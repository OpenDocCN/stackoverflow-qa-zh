# StackOverflow 问答 10798000-10798999

# graph - 在图中按顺序着色节点

> ID：10798002
> 
> 赞同：1
> 
> 时间：2012-05-29T11:13:06.480
> 
> 标签：graph, data-visualization

我有一个图 (nodes-edges) ，我想在其中突出显示某些节点​​。此外，我希望突出显示定义一个序列，即我希望查看器知道某个特定节点出现在另一个节点“之前”。我能想到的最简单的方法是用相同颜色的阴影将节点着色为高亮，将阴影从浅色变为深色以表示序列（较暗的节点出现在节点之后的序列中带有较浅的阴影）。我的问题是我希望突出显示的节点数通常是 500，我不认为拥有 500 种相同的阴影会使序列非常明显。当然，观众仍然会得到一个大概的想法，但是我可以使用更好的可视化技术吗？

谢谢！

# actionscript-3 - AS3 - 转 & 转 &

> ID：10798004
> 
> 赞同：2
> 
> 时间：2012-05-29T11:13:33.670
> 
> 标签：actionscript-3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T11:24:01.530

不，没有内置库。所以你必须自己写，或者你可以使用像[这样](http://www.markledford.com/blog/2009/02/25/as3-htmldecode-htmlencode-xml-hack/)的可用解决方案。

# php - Monitor all ajax request for a particular response

> ID：10798007
> 
> 赞同：0
> 
> 时间：2012-05-29T11:13:48.490
> 
> 标签：php, jquery

I need to monitor all the ajax responses whether it is responding the particular value in jQuery. How to do this?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T11:16:42.640

使用该`ajaxSuccess`事件可能是您的解决方案：[http ://api.jquery.com/ajaxSuccess/](http://api.jquery.com/ajaxSuccess/)

如果你这样做：

```
$(document).ajaxSuccess(function(event, req, options)
{
    // handle the response
}); 
```

例如：http: [//jsfiddle.net/gRoberts/NLH32/1/](http://jsfiddle.net/gRoberts/NLH32/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T11:21:25.673

您想监视以测试脚本的良好工作或监视 web 应用程序（或类似）吗？

如果是第一种情况，您可以使用 Firebug（如果您实际上没有使用它），但我认为直接不可能。也许，您可以`console.log()`在 AJAX 回调中添加一些（如果您将对象传递给它，它将在 Firebug 中显示所有内容）。

如果是第二个，你可以这样做：

```
 $.ajax({
       args
    }).done(function() { 
       // Treatment HERE !
    }); 
```

或者在 AJAX 调用之后使用 ajaxSuccess 事件。[请参阅此处](http://api.jquery.com/ajaxSuccess/)的文档。

# algorithm - 布伦特循环检测算法

> ID：10798012
> 
> 赞同：13
> 
> 时间：2012-05-29T11:14:03.387
> 
> 标签：algorithm, primes

谁能帮我解决布伦特的循环检测算法。我不明白为什么“搜索两个大于 λ 和 μ 的 2^i 的最小幂”？2 的幂如何在循环检测中发挥作用。它是否与弗洛伊德的循环检测算法有关？我无法从基础知识中得到它。请帮忙 ！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-29T12:47:28.837

此方法使用递增的步骤 (1, 2, 4, 8...) 尽快进入循环。当 P = 2^k 变得大于 λ 和 μ 时，乌龟 (T) 在循环中，兔子 (H) 不超过 P 步再次遇到（站立）乌龟。似乎一些模拟会很有用。让我们有列表 0-1-2-3-4-5-6-7-3

```
P=1 T=0 H=0; H makes 1 step and doesn't meet T
P=2 T=1 H=1; H makes 2 steps and doesn't meet T
P=4 T=3 H=3; H makes 4 steps and doesn't meet T 
P=8 T=7 H=7; H makes 5 steps and meets T !!!!! 
```

注意：当 P=4 时，T 在循环内，但 hare 不会经历整个循环（P >= μ 但 P < λ）

所以我们发现 μ<8 和 λ=5。然后我们要找到μ（循环入口点）

```
T=0 H=0; H makes 5 steps; H=5 
while T <> H 
   move both
T=1 H=6
T=2 H=7
T=3 H=3 !!!!!!! 
```

我们刚刚发现 μ=3

# iis - IIS 7 HTTP Redirect removing trailing slash

> ID：10798013
> 
> 赞同：4
> 
> 时间：2012-05-29T11:14:04.747
> 
> 标签：iis, redirect, iis-7, windows-server-2008, windows-server

We are running a server with IIS 7 and I've setup a 301 HTTP Redirect for an IIS Site, the forwarding URL is:

[http://www.websitename.com/deliveries/](http://www.websitename.com/deliveries/)

When IIS forwards on to this URL it removes the trailing slash and thus the web server handling the URL 'http://www.websitename.com/deliveries' fails to load the correct content because it's expecting a trailing slash (I have no control over this web server or site). Adding index.php to the URL works but I'd prefer it to work with the proper URL!

Any ideas?

# awk - field conditions in awk; newbie

> ID：10798016
> 
> 赞同：0
> 
> 时间：2012-05-29T11:14:30.277
> 
> 标签：awk, operators, conditional

When I write the following command:

```
awk '$3 != 0.00 && $5 < 0.2' file 
```

The condition applies only if $2 is not empty.

Why? The tab is there

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T11:51:37.437

You need to specify to awk that you are using a tab delimiter, and that is a special case. I tested the following:

```
echo -e "a\tb\tc\td\te" | awk -F$'\t' '{print NF}' 
```

The answer is 5, so it seems to work. The $ is necessary here.

# php - Memcache with both rails and php

> ID：10798017
> 
> 赞同：0
> 
> 时间：2012-05-29T11:14:33.197
> 
> 标签：php, ruby-on-rails, serialization, memcached, marshalling

I am trying to share my memcache server with my rails and php server.

Rails:

```
my_var = {'one'=>1,'two'=>2}
Rails.cache.write 'hello', PHP.serialize(my_var), :raw => true
Rails.cache.read 'hello' 
```

output:

```
"a:2:{s:3:\"one\";i:1;s:3:\"two\";i:2;}" 
```

PHP:

```
$var = self::$memcache->get('hello');
die(var_dump($var)); 
```

output:

```
"a:2:{s:3:\"one\";i:1;s:3:\"two\";i:2;}" 
```

PHP.serialize is a function from gem php_serialize. I was hoping that my PHP server can pickup hello and produces an array. Could anyone please help me which part that I do wrong here?

Thank you

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T11:17:05.847

Memcached gives back the serialized (marshaled) string. To use the actual array, you need to unserialize it in PHP first, just like you have to serialize the array in Ruby.

Try

```
$var = unserialize(self::$memcache->get('hello'));
die(var_dump($var)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T11:26:13.137

[PHP 和这里的 ruby​​ 的序列化](http://en.wikipedia.org/wiki/Serialization)意味着您将对象转换为文本表示形式，即平面字符串。在 PHP 中，这将通过函数[serialize](http://www.php.net/manual/en/function.serialize.php)来完成。要真正拥有传递对象的新实例，您需要从这个文本表示中重新创建它，您需要 PHP 中的另一个函数[unserialize](http://www.php.net/manual/en/function.unserialize.php)

所以在你的情况下，就像@chiborg 说的那样，使用 unserialize 会得到你的数组

```
var_dump(unserialize("a:2:{s:3:\"one\";i:1;s:3:\"two\";i:2;}"));

array(2) {
  ["one"]=>
  int(1)
  ["two"]=>
  int(2)
} 
```

# javascript - auth component in cakePHP2.0

> ID：10798018
> 
> 赞同：0
> 
> 时间：2012-05-29T11:14:35.693
> 
> 标签：javascript, cakephp, hyperlink, authorization

I have a link whose target i need to change depending on whether a user is logged in or not. If a user is logged in I direct him to a different page and If he is not I intend to show a dialog box that asks the user to log in before he can view the content..its a polite error message.

I would really appreciate if you people could tell me how do I go about it. If i can use a session-flash. I would want to use a dialog using some javascript though.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T14:28:36.760

Just check if they are logged in like you do in controllers.

```
if (AuthComponent::user()) {
  echo $this->Html->link('Admin Backend', array(
    'controller' => 'users',
    'action' => 'backend'
  ));
} else {
  echo $this->Js->link('Admin Backend', array(
    'controller' => 'users',
    'action' => 'login'
  ), array(
    'data-modal' => 'true' // or however your code looks for modals
  ));
} 
```

(This is for Cake 2.x and assumes you have javascript to handle creating a modal.)

# c++ - C++中C结构的前向声明

> ID：10798033
> 
> 赞同：2
> 
> 时间：2012-05-29T11:15:34.667
> 
> 标签：c++, c, struct, compatibility, forward-declaration

> **可能重复：**
> [转发声明文件 *](https://stackoverflow.com/questions/3882346/forward-declare-file)

假设我想为 C 结构编写一个包装类，该类由指向它的指针访问，例如 FILE

在C中你不得不说

```
typedef struct _iobuf
    {
    /*content of this struct*/
    } FILE; 
```

摆脱对象声明中的结构。现在我想在 filec.h 中执行以下操作：

```
class FILE;

class FileC
    {
    public:
        FileC(const char* name,const char* mode);
        ~FileC();
    private:
        FILE* fptr;
    }; 
```

在 filec.cpp 中：

```
#include "filec.h"
#include <cstdio>

//Implementation of FileC member functions 
```

但是在编译时，我只是抱怨不完整的类型结构文件。切换包含顺序给出 FILE 已经被声明。我可以通过使用特定于实现的细节来解决它，或者使用 void* 而不是 FILE* 来回转换。但是如何做得很好呢？使用 iostream 不是一个答案，因为它还包括 stdio。

# regex - Bash 正则表达式以匹配行首的“./”？或使用前导“-”重命名文件

> ID：10798038
> 
> 赞同：2
> 
> 时间：2012-05-29T11:15:44.610
> 
> 标签：regex, perl, bash, rename

我正在尝试用空格和其他此类脚本中断字符重命名文件。

该平台是 Ubuntu 服务器 12（带有 Bash 4），并且任何“重命名”命令的实例都是指 Prename aka Perl Rename。

我要么在编写合适的正则表达式时遇到问题，要么在从 find 命令创建有效变量时遇到问题。

这是我成熟命名的测试数据（所有文件，没有目录）：

```
/test/-poop
/test/poopfile.txt
/test/po_________!!!!!!!! $$^^^   op.sh 
```

（编辑）预期输出：我想将文件名更改为

```
/test/poop
/test/poopfile.txt
/test/po_op.sh 
```

（/编辑）

如果我在 /test 中运行此命令：

```
find * -type f -exec rename -n 's/[^a-zA-Z0-9-_.]/_/g; s/_+/_/g' {} \; 
```

我当然得到：

```
find: unknown predicate `-poop' 
```

所以我改变了一些事情：（find * -> find . 以便 find 命令的结果以 ./ 为前缀）

```
find . -type f -exec rename -n 's/[^a-zA-Z0-9-_.]/_/g; s/_+/_/g' {} \; 
```

哪个返回

```
./-poop renamed as ._-poop
./poopfile.txt as ._poopfile.txt
./po_________!!!!!!!! $$^^^   op.sh renamed as ._po_op.sh 
```

那不好。我所有的文件现在都以 _ 为前缀，因为我的正则表达式完全按照我的指示做了。如果我不必处理带有前导“-”的文件，那么我会很好，但这正是我试图用这个脚本处理的那种事情。

这就是我卡住的地方 - 我不知道如何让我的正则表达式*不*匹配一行中的前两个字符或“./”的第一个实例

```
^.{2} ## matches the first two characters in the string
^./   ## matches the ./ at the start of the line (assuming I change my delimiter from /) 
```

但是我怎么说“不是字符串中的前两个字符并且不是 [a-zA-Z0-9.-_] 中的字符的任何内容？”

或者

我这样做完全错了吗？有没有办法可以将 find 命令的结果传递给重命名脚本，以便前导“-”不会导致 find 出错？

实际上是在考虑这些方面 - 我写了这个：

```
for f in $( find . -type f ); do
    p=$( printf "%s\n" "$f" | sed 's/^..//' );
    rename -n 's/[^a-zA-Z0-9-_.]/_/g; s/_+/_/g' "$p";
done 
```

结果：

```
Unknown option: p
Unknown option: o
Unknown option: o
Unknown option: p
Usage: rename [-v] [-n] [-f] perlexpr [filenames] 
```

因此，即使我可以找到将“-poop”重命名为“-poop”的手，它仍然会在前导连字符上大吃一惊。

很确定答案就在正则表达式中。

我非常感谢可以提供的任何指导！这是我在这里的第一个问题-如果我犯了错误或礼仪错误，请告诉我。我很清楚我对正则表达式的了解很差，但我认为我已经达到了不问问题将是愚蠢的做法的地步。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T12:01:44.290

使用`rename -n -- $regex $filenames`.

这里的关键是`--`，这是一种广泛使用的方法，表示“选项从这里结束，文件名从这里开始”。[`find`本身不支持](https://stackoverflow.com/questions/4286073/find-in-directory-that-starts-with-dash)，但是支持`rename`。

[这里有更多细节。](https://unix.stackexchange.com/questions/11376/what-does-double-dash-mean)

# .net - 在 Visual Studio 2010 中发布 Web 服务

> ID：10798040
> 
> 赞同：0
> 
> 时间：2012-05-29T11:15:50.110
> 
> 标签：.net, visual-studio-2010, web-services

我想使用 WCF 服务应用程序发布用 Visual Studio 2010 编写的 Web 服务。但是在发布时我遇到了错误

Web 部署任务失败。( `A value for the 'setAclUser' setting must be specified when the 'setAcl' provider is used with a physical path.`) 0 0

在*站点/应用程序*的发布窗口中，我编写了*C:\Documents and Settings\user\My Documents\Visual Studio 2010\Projects\CustomerService*

谁能告诉问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T11:27:00.487

ACL 代表访问控制列表。可能网络服务使用了其他无法访问用户文件夹的帐户。尝试在您的用户配置文件之外发布您的网络服务并为其提供适当的访问权限。

# asp.net - VS 2010 中的 ASp.net WCF

> ID：10798043
> 
> 赞同：0
> 
> 时间：2012-05-29T11:15:55.460
> 
> 标签：asp.net, wcf

我有许多属性的类文件，例如名字、姓氏、电话号码。我在对象中得到了这个属性。现在如何将此对象转换为列表对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T11:31:24.273

do you mean something like this?

```
List<classname> name = new List<classname>(); 
```

# jquery - 结合 ASP:Repeater 和 JQuery

> ID：10798044
> 
> 赞同：0
> 
> 时间：2012-05-29T11:15:56.973
> 
> 标签：jquery, asp.net

我有下一个 C# 代码（有效）：

```
 // Write data into the checkboxes
    RepeaterVocabularyWords.DataSource = new[] { correctWord1, correctWord2, incorrectWord1, incorrectWord2 };
    RepeaterVocabularyWords.DataBind();  

    // Get data from the checkboxes
    protected void ButtonAccept_Click(object sender, EventArgs e)
    {
                    foreach (RepeaterItem item in RepeaterVocabularyWords.Items)
        {
            if (item.ItemType == ListItemType.Item
                || item.ItemType == ListItemType.AlternatingItem)
            {
                CheckBox CheckBoxVocabularyWord = (CheckBox)item.FindControl("CheckBoxVocabularyWord");
                if (CheckBoxVocabularyWord.Checked)
                { 
                }
            }
        } 
```

下一个带有 JQuery 代码的 ASP（有效）：

```
$(document).ready(function () {
    $("input[id$='ButtonAccept']").click(function (e) {
        if ($('span.storeCheck input:checked').length != 2) {
            alert("You have to choose only the 2 words that means the same!");
            e.preventDefault();
} 
```

然后，如果我写“span class="storeCheck"..”行，上面的转发器代码可以工作，但上面的 c# 代码不行：

```
<asp:Repeater ID="RepeaterVocabularyWords" runat="server" OnItemCommand="Repeater1_ItemCommand">
    <ItemTemplate>            
        <<span class="storeCheck"><input runat="server" type="checkbox" ID="CheckBoxVocabularyWord" title="<%# Container.DataItem %>" /></span>  
    </ItemTemplate>
</asp:Repeater> 
```

相反，如果我写“asp:CheckBox ID="..”，上面的 c# 代码可以工作，但 jQuery 的东西不行。

```
<asp:Repeater ID="RepeaterVocabularyWords" runat="server" OnItemCommand="Repeater1_ItemCommand">
    <ItemTemplate>  
        <asp:CheckBox ID="CheckBoxVocabularyWord" runat="server" Text="<%# Container.DataItem %>"   />    
    </ItemTemplate>
</asp:Repeater> 
```

我怎样才能使两者都起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T11:28:02.120

当你使用时`<input type='checkbox' runat='server'>`，你得到的是一个`HtmlInputCheckBox`，而不是一个`CheckBox`。更改您的 c# 代码以使用正确的类，看看是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T11:49:30.643

试试这个：

```
$(document).ready(function () {
    $("input[id$='ButtonAccept']").click(function (e) {
        if ($('span.storeCheck').find('input:checked').length != 2) {
            alert("You have to choose only the 2 words that means the same!");
            e.preventDefault();
} 
```

通过保留 asp 复选框。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T15:00:37.103

我认为 Ray 的方法会奏效，但这是我最终所做的。

Jquery 代码如下：

```
<script type="text/javascript">
    $(document).ready(function () {
        $("input[id$='ButtonAccept']").click(function (e) {
            if ($('span.storeCheck input:checked').length != 2) {
                alert("You have to choose only the 2 words that means the same!");
                e.preventDefault();
            }
        });
    });
</script> 
```

中继器是：

```
<asp:Repeater ID="RepeaterVocabularyWords" runat="server" OnItemCommand="RepeaterVocabularyWords_ItemCommand">
    <ItemTemplate>
        <span class="storeCheck">
            <asp:CheckBox ID="CheckBoxVocabularyWord" Font-Size="0px" runat="server" Text="<%# Container.DataItem %>"
                ClientIDMode="Static" CssClass="{labelOn: '<%# Container.DataItem %>', labelOff: '<%# Container.DataItem %>', easing: 'easeOutBounce', duration: 500}" />
        </span>
    </ItemTemplate>
</asp:Repeater> 
```

我正在写游戏。如果我最终将其上传到某个地方，我会将链接放在这里:)

# android - Android SOAP Web 服务中的 XmlPullParserException

> ID：10798046
> 
> 赞同：1
> 
> 时间：2012-05-29T11:16:01.800
> 
> 标签：android, web-services, soap, android-ksoap2

我想通过使用 ksoap2 来使用来自 andriod websevice 程序的肥皂网络服务。为此，我编写了以下代码。当我在 Android 模拟器中运行它时，我的 logcat 中没有得到响应。我的 web 服务返回类型结果是 XML 文件。

```
public class SoapWebservicesExampleActivity extends Activity {
    /** Called when the activity is first created. */
    final String NAMESPACE = "urn:sap-com:document:sap:soap:functions:mc-style";
    final String URL = "http://***********:8000/sap/bc/srt/wsdl/srvc_14DAE9C8D79F1EE196F1FC6C6518A345/wsdl11/allinone/ws_policy/document?sap-client=800&sap-user=*******&sap-password=*********";

//i am appending the Username and password as URL Parameters.

    final String METHOD_NAME = "Z_GET_CUST_GEN";
    final String SOAP_ACTION = "urn:sap-com:document:sap:soap:functions:mc-style/Z_GET_CUST_GEN";

// i am getting the method name tns from WSDL file.

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME); // set up
        request.addProperty("Input", "1460");
        //  request.addProperty("Langu", "d");

//one property in the webservices 

        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11); // put all required data into a soap
        envelope.dotNet = true;
        envelope.setOutputSoapObject(request);
        HttpTransportSE httpTransport = new HttpTransportSE(URL);
        httpTransport.debug = true;
        try {
            httpTransport.call(SOAP_ACTION, envelope);

// by using call method we can call the services

            SoapObject response = (SoapObject)envelope.getResponse();
            String str = response.getProperty(0).toString();
            System.out.println("theeeeeeeeeee"+str);

//printing the respose here

        }
        catch(SocketException ex){
            ex.printStackTrace();

        } catch (Exception e) {
               e.printStackTrace();
        }
    }

} 
```

但这里的问题是我遇到了这个异常，我正在添加 ksoap2 jar 文件。

```
 05-29 15:37:54.403: WARN/System.err(383): org.xmlpull.v1.XmlPullParserException: expected: START_TAG {http://schemas.xmlsoap.org/soap/envelope/}Envelope (position:START_TAG <{http://schemas.xmlsoap.org/wsdl/}wsdl:definitions targetNamespace='urn:sap-com:document:sap:soap:functions:mc-style'>@1:686 in java.io.InputStreamReader@40547218)
            05-29 15:37:54.403: WARN/System.err(383):     at org.kxml2.io.KXmlParser.exception(KXmlParser.java:273) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T11:37:14.317

```
 <soap:Header/> 
    <soap:Body> <urn:Z_GET_CUST_GEN> 
    <!--Optional:--> 
    <Input>1460</Input> 
    <!--Optional:-->
     <Langu>d</Langu> 
    <!--Optional:--> 
    <Max></Max> 
```

这是我的输入和输出 xml：

绑定网址

```
http://************:8000/sap/bc/srt/rfc/sap/z_customer_lookup1/800/z_customer_lookup1/z_customer_lookup1_bind 
```

输出： -

```
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
   <env:Header/>
   <env:Body>
      <n0:Z_GET_CUST_GENResponse xmlns:n0="urn:sap-com:document:sap:soap:functions:mc-style">
         <ZCustGen>
            <item>
               <Kunnr>0000001460</Kunnr>
               <Name1>C.A.S. Computer Application Systems</Name1>
               <City>Dresden</City>
               <Land>DE</Land>
               <Pstlz>01187</Pstlz>
            </item>
            <item>
               <Kunnr>0000027182</Kunnr>
               <Name1>Johnson Food Center Inc.</Name1>
               <City>Rochester</City>
               <Land>US</Land>
               <Pstlz>14608</Pstlz>
            </item>
            <item>
               <Kunnr>0000301046</Kunnr>
               <Name1>Second Source</Name1>
               <City>ROCHESTER</City>
               <Land>US</Land>
               <Pstlz>14602</Pstlz>
            </item>
         </ZCustGen>
      </n0:Z_GET_CUST_GENResponse>
   </env:Body>
</env:Envelope> 
```

将输入设置为所有值（语言，最大值），然后您尝试。您是否尝试过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T11:24:21.363

这意味着您要添加的属性，即

```
request.addProperty("Input", "1460"); 
```

是不恰当的。请检查您正在调用的 Web 方法，并确保参数的数量、方法名称、参数的拼写（也包括大小写）正确。我一直收到此错误，这就是您修复它的方法。

（（（也请分享您的网络方法。如果上述解决方案不起作用））

# objective-c - 开始输入时如何使 UITextView 可见？

> ID：10798047
> 
> 赞同：0
> 
> 时间：2012-05-29T11:16:03.680
> 
> 标签：objective-c, uitextview

我是 iPhone 的初学者。我有一个`UITextView`在我看来。当我开始打字时，键盘会弹出并覆盖文本视图。所以，我的问题是：当我开始打字时如何向上滑动文本视图？我将不胜感激任何建议和示例代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T12:08:39.110

检查下面的代码。在此代码中将您的文本视图添加到滚动视图

```
#import <UIKit/UIKit.h>

@interface HomeViewController : UIViewController <UIScrollViewDelegate,UITextViewDelegate>{
    IBOutlet UIScrollView *scrollView;
    IBOutlet UITextView *txtView;
}
- (void)scrollViewToCenterOfScreen:(UIView *)theView ; 
@end

#import "HomeViewController.h"
@implementation HomeViewController

// Implement viewDidLoad to do additional setup after loading the view, typically from a nib.
- (void)viewDidLoad {
    [super viewDidLoad];
    [scrollView addSubview:txtView];
}

- (void)scrollViewToCenterOfScreen:(UIView *)theView {  
    CGFloat viewCenterY = theView.center.y;  
    CGRect applicationFrame = [[UIScreen mainScreen] applicationFrame];  
    CGFloat availableHeight = applicationFrame.size.height - 200; 

    // Remove area covered by keyboard  
    CGFloat z = viewCenterY - availableHeight / 2.0;  
    if (z < 0) {  
        z = 0;
    }
    [scrollView setContentOffset:CGPointMake(0, z) animated:YES];  
}

#pragma mark For Making UITextView delegate methods-
-(void)textViewDidBeginEditing:(UITextView *)textView{
    [self scrollViewToCenterOfScreen:textView];
}
- (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range  replacementText:(NSString *)text{
    if (range.length==0) {
        if ([text isEqualToString:@"\n"]) {
            [textView resignFirstResponder];
            [scrollView1 setContentOffset:CGPointMake(0, 0) animated:YES];
            return NO;        
            }
    }   
    return YES;
} 
```

# magento - 在可配置产品中显示“缺货”简单产品？

> ID：10798049
> 
> 赞同：0
> 
> 时间：2012-05-29T11:16:06.790
> 
> 标签：magento

有谁知道如何在可配置产品中列出缺货的简单产品？例如，我有一个具有多个属性、尺寸等的项目。如果我有某个尺寸缺货，它不会在下拉列表中列出，我希望它仍然出现在这里，但也告诉客户它缺货。这可能吗？

我已经尝试了许多谷歌可用的模组，但都失败了

我正在使用 magento 1.6

资源`http://www.magentocommerce.com/boards/viewthread/33550/`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-03T13:06:58.710

是的，它运作良好。我在 v1.9 使用它，行数有点不同。第 179 行修改为

```
if(!$this->_validateAttributeValue($attributeId, $value, $options)) {
    $inStock = false;
} 
```

然后在第 202 行之后添加

```
'stock' => $inStock 
```

并获取代码

```
$info['options'][] = array(
    'id' => $value['value_index'],
    'label' => $value['label'],
    'price' => $configurablePrice,
    'oldPrice'  => $this->_prepareOldPrice($value['pricing_value'],$value['is_percent']),
                            'products'  => $productsIndex,
                            'stock'     => $inStock
                        ); 
```

在`app\design\frontend\base\default\template\catalog\product\view\type\options\configurable.php` 第 29 行之后指定

```
$inStock=false; 
```

在 v.1.9 的默认演示模板上测试。它在下拉列表中显示一个简单的产品项目，但无法选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T13:04:33.857

不是 100% 肯定，但我认为你会通过修改 Mage_Catalog_Block_Product_View_Type_Configurable 的第 151 行来实现你想要的：

```
if(!$this->_validateAttributeValue($attributeId, $value, $options)) {
   $inStock = false;
} 
```

稍后，在第 170 行，您可以将此标志包含在选项数组中：

```
$info['options'][] = array(
    'id'        => $value['value_index'],
    'label'     => $value['label'],
    'price'     => $configurablePrice,
    'oldPrice'  => $this->_preparePrice($value['pricing_value'], $value['is_percent']),
    'products'  => $productsIndex,
    'stock'     => $inStock
); 
```

然后，在前端： app\design\frontend\base\default\template\catalog\product\view\type\options\configurable.php 你有 $options var 存储股票标志的地方 - 你可以用它来创建你的逻辑我没有对此进行测试，因此请确保它有效

# delphi - Delphi XE/ XE2 64bit 中的 POPCNT

> ID：10798051
> 
> 赞同：5
> 
> 时间：2012-05-29T11:16:12.250
> 
> 标签：delphi, assembly, delphi-xe, basm

如何在 Delphi XE 或 XE2 下使用非常快的 Intel POPCNT 指令在 16/32/64 位字中实现 1 位计数？是否有一个库例程可以直接访问该指令？有人可以写一个演示 asm 部分来说明它的用途吗？最后，64 位 Delphi 有哪些选项（没有可用的 asm）？在此先感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T15:21:58.157

正如 Rob Kennedy 所建议的那样，这里有 32 位和 64 位 Delphi IDE 的功能。

```
function GetBitCount(num: integer): integer;
asm
  POPCNT    eax, num
end;

function GetBitCount(num: Int64): integer;
asm
  POPCNT    rax, num
end; 
```

编辑：这是 32 位和 64 位 Delphi 兼容版本

```
{$IF CompilerVersion < 23} //pre-XE2
  NativeInt = integer;
{$IFEND}

function GetBitCount(num: NativeInt): integer;
asm
{$IFNDEF CPUX64}
  POPCNT    eax, num
{$ELSE CPUX64}
  POPCNT    rax, num
{$ENDIF CPUX64}
end; 
```

# django - 来自合并表列的 Django 最大值

> ID：10798054
> 
> 赞同：1
> 
> 时间：2012-05-29T11:16:16.927
> 
> 标签：django, join, merge, union, annotate

我试图通过合并两个单独表的结果来获得最大值。我正在尝试获取帖子的最新评论。我有一个模型`Comment`可以通过`Post.comments`. 我还有一个与 .`Post`可以访问的主体分开的主体`Post.body`。评论和正文都有一个字段`when`是`DateTimeField`. 我想按最近的活动返回一个排序的查询集，以便首先显示具有最新评论或正文的帖子。

假设模型如下所示：

```
class Body(models.Model):
    when = models.DateTimeField(default=datetime.datetime.now)

class Post(models.Model):
    body = models.ForeignKey(Body)

class Comment(models.Model):
    post = models.ForeignKey(Post, related_name='comments')
    when = models.DateTimeField(default=datetime.datetime.now) 
```

如果可能，我希望结果保持为查询集，因为我继续处理它并进一步将其传递给分页器以限制结果。

基本上，我希望能够调用：

```
q = Post.annotate(
    activity=Max(
        Union('comments__when', 'body__when')
    )
)
q = q.order_by('-activity') 
```

但我不知道如何完成那个联盟。

我相信完成我正在寻找的 SQL 类似于：

```
SELECT
...
IF(MAX(c.`when`), MAX(c.`when`), b.`when`) AS `activity`
...
FROM `post` p
...
LEFT OUTER JOIN `comment` AS c
ON c.`post_id`=p.`id`
LEFT OUTER JOIN `body` AS b
ON p.`body_id`=b.`id`
... 
```

这样的自定义注解和Join可以实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T10:22:29.427

这花了我很长时间才弄清楚。一个大问题是 Django 不支持语句`ON`子句的多个条件`JOIN`。由于单个`SELECT`语句依赖于两个单独`JOINs`的 ，我们在准确跟踪表名时遇到了问题。当您要求 django 对表格进行注释时，例如使用`Max()`，您最终会遇到诸如`Max(T7.when) ... LEFT OUT JOIN table AS T7`，其中 T7 不一致的条件。因此，我需要一种方法来准确地生成由 Django 自动生成的`Max(T7.when)`表达式`JOINs`。许多在线帖子告诉您使用对查询集的`.raw()`支持，但在这种情况下，您将失去使用 ORM 的很多好处。

我想出的解决方案是生成一个自定义聚合函数。我调用了这个函数`CustomMax()`：

```
from django.conf import settings
from django.db import models

sum_if_sql_template = 'GREATEST(%(alt_table)s.%(alt_field)s, IFNULL(%(function)s(%(field)s), %(alt_table)s.%(alt_field)s))'

class CustomMaxSQL(models.sql.aggregates.Aggregate):
    sql_function = 'MAX'
    sql_template = sum_if_sql_template

class CustomMax(models.aggregates.Aggregate):
    name = 'Max'

    def __init__(self, lookup, **extra):
        self.lookup = lookup
        self.extra = extra

    def add_to_query(self, query, alias, col, source, is_summary):
        aggregate = CustomMaxSQL(col,
                             source=source,
                             is_summary=is_summary,
                             **self.extra)
        query.aggregates[alias] = aggregate 
```

该函数的用法是：

```
q = Post.annotate(
    activity=CustomMax(
        'comments__when',
        alt_table="app_post",
        alt_field="when",
    )
)
q.query.join((
    'app_post',
    'app_comment',
    'id',
    'post_id',
))
q = q.order_by('-activity') 
```

我包括`.join()`允许 alt_table 作为 存在`JOIN`，Django 将自动处理该部分的`SELECT`和`JOIN`语句的命名`Max`。从这种用法生成的 SQL 类似于：

```
SELECT 
...
GREATEST(app_post.when, IFNULL(MAX(T7.`when`), app_post.when)) AS `activity`,
...
`app_post`.`id`
...
INNER JOIN `app_post` ON ...
...
LEFT OUTER JOIN `app_comment` T7 ON (`app_post`.`id` = T7.`post_id`)
... 
```

注意：这仅适用于上面`Post`的`Comment`模型。我的实际实现有点复杂，需要这个解决方案。

`join`如果 Django 团队开发了这个建议的补丁来包含以下语句，这也会容易得多`.extra()`：[https ://code.djangoproject.com/ticket/7231](https://code.djangoproject.com/ticket/7231)

# java - 具有多层的背景（如视差）

> ID：10798059
> 
> 赞同：2
> 
> 时间：2012-05-29T11:16:44.780
> 
> 标签：java, android, andengine

我正在尝试为我的游戏创建一个背景，给人一种有些事情比其他事情更远的印象。所以可以说我有天空、太阳、一些云和地面。天空和太阳最远，云在中间，地在前面。现在，如果玩家缩放或平移相机，我希望更远的层比更近的层移动得更少，以给人一种它们真的更远的印象（地面移动最多，云移动较少，太阳几乎不移动）就像自动视差的行为方式一样，只是它是一个静态背景，所以除非玩家放大或缩小，否则通常什么都不会移动。

这个概念在愤怒的小鸟中实现，游戏对象（小鸟、猪、积木……），地面在前面，山在中间，天空和云层最远。

现在，如果您了解我要完成的工作，请告诉我如何去做，因为过去几天这让我发疯了，我什至无法将这个概念付诸实施。任何代码也会很棒。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-29T11:18:41.313

您可以尝试将 Andengine 用于此目的：
[http ://www.youtube.com/watch?v=ug5vfys6MIA](http://www.youtube.com/watch?v=ug5vfys6MIA)

另见：[http ://www.andengine.org/forums/features/parallaxlayer-t5390.html](http://www.andengine.org/forums/features/parallaxlayer-t5390.html)

实现这样的效果真的很容易，这里有一个例子：

```
@Override
    public void onLoadResources() {
        BitmapTextureAtlasTextureRegionFactory.setAssetBasePath("gfx/");

        this.mBitmapTextureAtlas = new BitmapTextureAtlas(256, 128, TextureOptions.BILINEAR_PREMULTIPLYALPHA);
        this.mPlayerTextureRegion = BitmapTextureAtlasTextureRegionFactory.createTiledFromAsset(this.mBitmapTextureAtlas, this, "player.png", 0, 0, 3, 4);
        this.mEnemyTextureRegion = BitmapTextureAtlasTextureRegionFactory.createTiledFromAsset(this.mBitmapTextureAtlas, this, "enemy.png", 73, 0, 3, 4);

        this.mAutoParallaxBackgroundTexture = new BitmapTextureAtlas(1024, 1024, TextureOptions.DEFAULT);
        this.mParallaxLayerFront = BitmapTextureAtlasTextureRegionFactory.createFromAsset(this.mAutoParallaxBackgroundTexture, this, "parallax_background_layer_front.png", 0, 0);
        this.mParallaxLayerBack = BitmapTextureAtlasTextureRegionFactory.createFromAsset(this.mAutoParallaxBackgroundTexture, this, "parallax_background_layer_back.png", 0, 188);
        this.mParallaxLayerMid = BitmapTextureAtlasTextureRegionFactory.createFromAsset(this.mAutoParallaxBackgroundTexture, this, "parallax_background_layer_mid.png", 0, 669);

        this.mEngine.getTextureManager().loadTextures(this.mBitmapTextureAtlas, this.mAutoParallaxBackgroundTexture);
    }

    @Override
    public Scene onLoadScene() {
        this.mEngine.registerUpdateHandler(new FPSLogger());

        final Scene scene = new Scene();
        final AutoParallaxBackground autoParallaxBackground = new AutoParallaxBackground(0, 0, 0, 5);
        autoParallaxBackground.attachParallaxEntity(new ParallaxEntity(0.0f, new Sprite(0, CAMERA_HEIGHT - this.mParallaxLayerBack.getHeight(), this.mParallaxLayerBack)));
        autoParallaxBackground.attachParallaxEntity(new ParallaxEntity(-5.0f, new Sprite(0, 80, this.mParallaxLayerMid)));
        autoParallaxBackground.attachParallaxEntity(new ParallaxEntity(-10.0f, new Sprite(0, CAMERA_HEIGHT - this.mParallaxLayerFront.getHeight(), this.mParallaxLayerFront)));
        scene.setBackground(autoParallaxBackground);

        /*
         * Calculate the coordinates for the face, so its centered on the camera.
         */
        final int playerX = (CAMERA_WIDTH - this.mPlayerTextureRegion.getTileWidth()) / 2;
        final int playerY = CAMERA_HEIGHT - this.mPlayerTextureRegion.getTileHeight() - 5;

        /* Create two sprits and add it to the scene. */
        final AnimatedSprite player = new AnimatedSprite(playerX, playerY, this.mPlayerTextureRegion);
        player.setScaleCenterY(this.mPlayerTextureRegion.getTileHeight());
        player.setScale(2);
        player.animate(new long[] { 200, 200, 200 }, 3, 5, true);

        final AnimatedSprite enemy = new AnimatedSprite(playerX - 80, playerY, this.mEnemyTextureRegion);
        enemy.setScaleCenterY(this.mEnemyTextureRegion.getTileHeight());
        enemy.setScale(2);
        enemy.animate(new long[] { 200, 200, 200 }, 3, 5, true);

        scene.attachChild(player);
        scene.attachChild(enemy);

        return scene;
    } 
```

# hadoop - 在 hadoop 中通过 map 和 reduce 任务转换序列文件并获取键、值对

> ID：10798060
> 
> 赞同：0
> 
> 时间：2012-05-29T11:16:45.803
> 
> 标签：hadoop, mapreduce

我想通过 hadoop map reduce 应用程序从顺序文件中获取所有键值对。我遵循以下帖子[http://lintool.github.com/Cloud9/docs/content/staging-records.html](http://lintool.github.com/Cloud9/docs/content/staging-records.html)来读取主类中的顺序文件，但这很有效。我想将所有键值对打印到 hdfs 系统中的普通文本文件中，我该如何实现？我写了我的代码如下。

```
 import java.io.File;
            import java.io.IOException;
            import java.util.*;
            import java.util.logging.Level;
            import java.util.logging.Logger;

            import org.apache.hadoop.fs.Path;
            import org.apache.hadoop.conf.*;
            import org.apache.hadoop.fs.FileSystem;
            import org.apache.hadoop.fs.FileUtil;
            import org.apache.hadoop.io.*;

            import org.apache.hadoop.mapreduce.*;
            import org.apache.hadoop.mapreduce.lib.input.FileInputFormat;
            import org.apache.hadoop.mapreduce.lib.input.SequenceFileAsBinaryInputFormat;
            import org.apache.hadoop.mapreduce.lib.input.TextInputFormat;
            import org.apache.hadoop.mapreduce.lib.output.FileOutputFormat;
            import org.apache.hadoop.mapreduce.lib.output.TextOutputFormat;

            public class WordCount
            {
                public static class Map extends Mapper
                {
                    private final static IntWritable one = new IntWritable(1);
                    private Text word = new Text();

                    public void map(BytesWritable key, BytesWritable value, Context context) throws IOException, InterruptedException
                    {
                        System.out.println(key.toString());
                        System.out.println(value.toString());
                        context.write(key, value);
                    }
                }
                public static class Reduce extends Reducer
                {
                    public void reduce(Text key, Iterable<IntWritable> values, Context context)
                            throws IOException, InterruptedException
                    {
                        int sum = 0;
                        for (IntWritable val : values)
                        {
                            sum += val.get();
                        }
                        context.write(key, new IntWritable(sum));
                    }
                }
                public static void main(String[] args) throws Exception
                {
                    FileUtil.fullyDelete(new File(args[1]));

                    Configuration conf = new Configuration();

                    Job job = new Job(conf, "wordcount");

                    job.setOutputKeyClass(BytesWritable.class);
                    job.setOutputValueClass(BytesWritable.class);

                    job.setMapperClass(Map.class);
                    job.setReducerClass(Reduce.class);

                    job.setInputFormatClass(org.apache.hadoop.mapreduce.lib.input.SequenceFileAsBinaryInputFormat.class);
                    job.setOutputFormatClass(TextOutputFormat.class);

                    FileInputFormat.addInputPath(job, new Path(args[0]));
                    FileOutputFormat.setOutputPath(job, new Path(args[1]));

                    job.setJarByClass(WordCount.class);

                    job.waitForCompletion(true);
                }
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-26T09:04:06.087

```
Please find the Below program. It may be useful in getting some idea in converting BytesWritable to Text.

import java.io.ByteArrayInputStream;
import java.io.IOException;
import java.io.InputStream;

import org.apache.hadoop.conf.Configuration;
import org.apache.hadoop.fs.FileSystem;
import org.apache.hadoop.fs.Path;
import org.apache.hadoop.io.BytesWritable;
import org.apache.hadoop.io.IOUtils;
import org.apache.hadoop.io.SequenceFile;
import org.apache.hadoop.io.WritableUtils;
import org.apache.hadoop.io.SequenceFile.Reader;
import org.apache.hadoop.io.Text;
import org.apache.hadoop.io.Writable;
import org.apache.hadoop.util.ReflectionUtils;

public class SequenceFileRead {
    public static void main(String args[]) throws IOException{
        Configuration conf=new Configuration();
        Path path=new Path(args[0]);
        SequenceFile.Reader reader=null;
        try{
        reader=new SequenceFile.Reader(conf, Reader.file(path));
        Text key= new Text();
        BytesWritable value=new BytesWritable();
        while(reader.next(key,value)){
            System.out.println(key);
            byte[] bytes=value.getBytes();
            int size=bytes.length;
            byte[] b=new byte[size];
            InputStream is=new ByteArrayInputStream(bytes);
            is.read(b);
            System.out.println(new String(b));
        }
        }
        finally {
            IOUtils.closeStream(reader);
        }

    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T12:24:27.337

使用以下代码读取所有键/值对..根据您的需要更改它..

```
public class SequenceFileReader {
    public static void main(String args[]) throws Exception {
        System.out.println("Readeing Sequence File");
        Configuration conf = new Configuration();
        conf.addResource(new Path("/home/mohammad/hadoop-0.20.203.0/conf/core-site.xml"));
        conf.addResource(new Path("/home/mohammad/hadoop-0.20.203.0/conf/hdfs-site.xml"));  
        FileSystem fs = FileSystem.get(conf);
        Path path = new Path("/seq/file");
        SequenceFile.Reader reader = null;      
        try {
            reader = new SequenceFile.Reader(fs, path, conf);
            Writable key = (Writable) ReflectionUtils.newInstance(reader.getKeyClass(), conf);
            Writable value = (Writable) ReflectionUtils.newInstance(reader.getValueClass(), conf);
            while (reader.next(key, value)) {
                System.out.println(key + "  <===>  " + value.toString());
            }
        } catch (Exception e) {
            e.printStackTrace();
        } finally {
            IOUtils.closeStream(reader);
        }

} 
```

}

# iphone - 如何使用计算器中的“清除”选项清除 iphone 中数字中的特定数字

> ID：10798064
> 
> 赞同：0
> 
> 时间：2012-05-29T11:16:50.823
> 
> 标签：iphone, xcode

我正在开发一个具有清除按钮的计算器。我可以轻松清除包含数字的整个标签，但我希望它应该在按钮 click 上逐位清除。这可能吗 。我该如何实施？

```
-(IBAction)cancelOperation
{
currentNumber = 0; 
```

计算器屏幕.text = @"0.00";

```
currentOperation = 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T11:32:11.077

我认为你所做的就是一次删除一封信。尝试将此方法放入您的按钮

**编辑**

*试试这个*

```
-(IBAction)cancelOperation
    {
      NSString *str = [[NSString alloc]initWithString:label.text];
      NSString *deleteOne;
      deleteOne = [str substringToIndex:[str length]-1];
      label.text = deleteOne; 
```

即使你想设置你的变量类型为 double 使用这个

```
 currentOperation = [deleteOne doubleValue];
     } 
```

**编辑2**

正如我在这里看到的，你要求删除一个标签

> 我可以轻松清除包含数字的整个标签，但我希望它应该在按钮单击时逐位清除

然而，这是如何通过数字变量 currentNumber 减少您的数字

```
-(IBAction)cancelOperation
    NSString *str = [NSString stringWithFormat:@"%i", currentNumber];
    NSString *deleteOne;
    deleteOne = [str substringToIndex:[str length]-1];
    currentNumber = [deleteOne intValue];
    NSLog(@"%i", currentNumber);
} 
```

在这一点上这种方法是否不好，即使我相信我还没有理解问题和你的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T11:41:48.377

```
 -(IBAction)cancelOperation
    {
    currentNumber = 0;
    NSString* str = calculatorScreen.text;
    calculatorScreen.text = [str substringToIndex:[string length]-1];;

    currentOperation = 0;
    } 
```

# actionscript-3 - TileList 向上或向下滚动，图像丢失

> ID：10798066
> 
> 赞同：0
> 
> 时间：2012-05-29T11:16:52.883
> 
> 标签：actionscript-3, apache-flex, flex3

第一次，TileList 运行良好。但是当我向上或向下滚动时，`image`itemRenderer 中的 丢失（不显示在屏幕上），但`label`仍然可以显示。以下是 TileList 中的 ItemRenderer：

```
<mx:VBox>
<script>
<![CDATA[
[Bindable]
private var url:String;

[Bindabl]
private var photoName:String;

override public function set data(value:Object):void {
     if(this.data == value) {
         return;
     }

     super.data = value;

     url = value.url;
     photoName = value.photoName;
  }
]]>
</script>
<mx:Image source="{url}"/>
<mx:Label text="{photoName}"/>
</mx:VBox> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T16:26:56.853

在您的平铺布局上尝试配置 usevirtuallayout=false

# php - 调用php passthru()函数后继续执行

> ID：10798070
> 
> 赞同：1
> 
> 时间：2012-05-29T11:17:25.040
> 
> 标签：php, passthru, external-script

使用 php passthru() 函数时，默认保持到外部脚本执行结束。

PHP手册说:::::“如果一个程序用这个函数启动，为了让它继续在后台运行，程序的输出必须重定向到一个文件或另一个输出流。如果不这样做会导致 PHP 挂起，直到程序执行结束。” - [http://php.net/manual/en/function.passthru.php](http://php.net/manual/en/function.passthru.php)

我想收集特定时间的外部脚本数据，例如 30 秒，然后继续执行 php 脚本。任何想法如何做到这一点？

我目前的代码是：

```
 ob_start();
    passthru("/home/somefolder/somefolder2/program $pic1 $pic2");
    $details = ob_get_contents();
    ob_end_clean(); 
```

上面代码中的问题是 - 有时“程序”脚本会持续执行一段时间，但我不想让用户在这个过程中停留超过 30 秒。

我考虑将输出重定向到一个文件并在 30 秒后读取它（根据手册）。但我不知道如何将输出重定向到文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T11:20:40.250

```
"/home/somefolder/somefolder2/program $pic1 $pic2 > /path/to/your/file 2>&1" 
```

如果您希望它在后台运行，请`&`在最后添加。

```
"/home/somefolder/somefolder2/program $pic1 $pic2 > /path/to/your/file 2>&1 &" 
```

# c# - Get a full list of users from LDAP

> ID：10798071
> 
> 赞同：1
> 
> 时间：2012-05-29T11:17:26.773
> 
> 标签：c#, ldap

I try to use the code below to get the full list of user. But I get the code "The server could not be contacted."

Any idea ?

Thanks,

```
static void Main(string[] args)
{
    string groupName = "Domain Users";
    string domainName = "LDAP://ldap.mycompany.be:389/ou=users,o=mycompany,dc=mycompany,dc=be";

    PrincipalContext ctx = new PrincipalContext(ContextType.Domain, domainName);
    GroupPrincipal grp = GroupPrincipal.FindByIdentity(ctx, IdentityType.SamAccountName, groupName);

    if (grp != null)
    {
        foreach (Principal p in grp.GetMembers(false))
        {
            Console.WriteLine(String.Format("{0} - {1}", p.SamAccountName, p.DisplayName));
        }

        grp.Dispose();
        ctx.Dispose();
        Console.ReadLine();
    }
    else
    {
        Console.WriteLine("\nWe did not find that group in that domain, perhaps the group resides in a different domain?");
        Console.ReadLine();
    }
} 
```

**Update :** This code is working (from the same machine)

```
static void Main(string[] args)
{
    string userUid = "myuser";

    DirectoryEntry Ldap = new DirectoryEntry("LDAP://ldap.mycompany.be:389/ou=users,o=mycompany,dc=mycompany,dc=be", "", "", AuthenticationTypes.Anonymous);
    DirectorySearcher LdapSearcher = new DirectorySearcher(Ldap, String.Format("(&(objectClass=*)(uid={0}))", userUid));

    LdapSearcher.PropertiesToLoad.Add("cn");
    LdapSearcher.PropertiesToLoad.Add("uid");
    LdapSearcher.PropertiesToLoad.Add("mail");
    LdapSearcher.PropertiesToLoad.Add("employeeNumber");
    LdapSearcher.PropertiesToLoad.Add("facsimileTelephoneNumber");
    LdapSearcher.PropertiesToLoad.Add("foremfunction");
    LdapSearcher.PropertiesToLoad.Add("foremservice");
    LdapSearcher.PropertiesToLoad.Add("foremsite");
    LdapSearcher.PropertiesToLoad.Add("inetUserStatut");
    LdapSearcher.PropertiesToLoad.Add("telephoneNumber");
    LdapSearcher.PropertiesToLoad.Add("uid");
    LdapSearcher.PropertiesToLoad.Add("mail");
    SearchResultCollection LdapSearcherResults = LdapSearcher.FindAll();

    foreach (SearchResult resultLdap in LdapSearcherResults)
    {
        Console.WriteLine(resultLdap.Properties["cn"][ 0].ToString());
        Console.WriteLine(resultLdap.Properties["uid"][0].ToString());
        Console.WriteLine(resultLdap.Properties["mail"][0].ToString());
    }
} 
```

**Update2**

```
System.NullReferenceException was unhandled
  Message=Object reference not set to an instance of an object.
  Source=System.DirectoryServices.AccountManagement
  StackTrace:
       at System.DirectoryServices.AccountManagement.PrincipalContext.ReadServerConfig(String serverName, ServerProperties& properties)
       at System.DirectoryServices.AccountManagement.PrincipalContext.DoServerVerifyAndPropRetrieval()
       at System.DirectoryServices.AccountManagement.PrincipalContext..ctor(ContextType contextType, String name, String container, ContextOptions options, String userName, String password)
       at System.DirectoryServices.AccountManagement.PrincipalContext..ctor(ContextType contextType, String name)
       at MoulinetteUser.Program.Main(String[] args) in C:\Users\.....\Program.cs:line 18
       at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
       at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
       at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
       at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ThreadHelper.ThreadStart()
  InnerException: 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T11:52:48.913

您的问题是 PrincipalContext 的参数不正确：您在 domainName 中传递 LDAP 查询，而不是域控制器的名称和端口。有关该类的完整文档，请参阅[MSDN 。](http://msdn.microsoft.com/fr-fr/library/bb298328.aspx)

您的第二个代码帖子有效，因为您使用的类是 LDAP 客户端类，它“理解”您的 ldap 查询。

尝试以下方法，看看它是否有效：

```
static void Main(string[] args)
{
    string groupName = "Domain Users";
    string domainName = "ldap.mycompany.be"; // or whatever your domain controller's name is...

    PrincipalContext ctx = new PrincipalContext(ContextType.Domain, domainName);
    GroupPrincipal grp = GroupPrincipal.FindByIdentity(ctx, IdentityType.SamAccountName, groupName);

    if (grp != null)
    {
        foreach (Principal p in grp.GetMembers(false))
        {
            Console.WriteLine(String.Format("{0} - {1}", p.SamAccountName, p.DisplayName));
        }

        grp.Dispose();
        ctx.Dispose();
        Console.ReadLine();
    }
    else
    {
        Console.WriteLine("\nWe did not find that group in that domain, perhaps the group resides in a different domain?");
        Console.ReadLine();
    }
} 
```

希望有帮助...

# jquery - 如何使用 jquery 唯一地添加选项以进行选择

> ID：10798075
> 
> 赞同：3
> 
> 时间：2012-05-29T11:17:43.143
> 
> 标签：jquery, html-select

我有一堆独特的选项`<select>`。只有当它是唯一的并且不存在于现有选项中时，我才需要添加一个新选项。

如何使用 jquery查找给定的给定中是否`option`已经存在？`select`

例如：

```
<select id="combobox">
    <option value="">Select one...</option>
    <option value="Apple">Apple</option>
    <option value="Banana">Banana</option>
    <option value="Pears">Pears</option>
</select> 
```

*   新的有效选项：梨
*   新的无效选项：Apple

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-29T11:20:14.297

```
if (!$("#combobox option[value='Apple']").length)
    // Add it 
```

使其可重用可以是：

```
if (!$("#combobox option[value='" + value + "']").length)
    // Add it 
```

[**现场演示**](http://jsfiddle.net/FVry9/1)

**不区分大小写：**

```
var isExist = !$('#combobox option').filter(function() {
    return $(this).attr('value').toLowerCase() === value.toLowerCase();
}).length;​ 
```

**完整代码：（**演示）

```
$('#txt').change(function() {
    var value = this.value;

    var isExist = !!$('#combobox option').filter(function() {
        return $(this).attr('value').toLowerCase() === value.toLowerCase();
    }).length;

    if (!isExist) {
        console.log(this.value + ' is a new value!');
        $('<option>').val(this.value).text(this.value).appendTo($('#combobox'));
    }
});​ 
```

[现场演示](http://jsfiddle.net/FVry9/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T11:20:59.210

我想你想搜索`value`而不是文本内容。在您的示例中，它们始终相同，但可能并不总是...

```
var toAdd = 'Apricot',
    combobox = $('#combobox');

if (!combobox.find('option[value="' + toAdd + '"]').length) {
    combobox.append('<option value="' + toAdd + '">' + toAdd + '</option>');
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T11:22:30.820

假设`newOption`变量中存在新的选项文本：

```
$('button').click(
    function() {
        var newOption = $('#newOptionInput').val(),
            opts = [];
        $('#combobox option').each(
            function() {
                opts.push($(this).text());
            });

        if ($.inArray(newOption, opts) == -1) {
            $('<option />')
                .val(newOption)
                .text(newOption)
                .appendTo('#combobox');
        }
    });​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/MMRZA/)。

**编辑**以更正上面的代码（我忘了`$.inArray()`返回`-1`，而`false`不是找不到值时），并使用更合适的选择器。

参考：

*   [`appendTo()`](http://api.jquery.com/appendTo/).
*   [`each()`](http://api.jquery.com/each/).
*   [`$.inArray()`/`jQuery.inArray()`](http://api.jquery.com/jQuery.inArray/)。
*   [`push()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/push).
*   [`text()`](http://api.jquery.com/text/).
*   [`val()`](http://api.jquery.com/val/).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T11:20:25.727

```
if ($('#combobox').find('option[value="Pear"]').length) {
  // there's pear
} else {
  // nope, no pear
} 
```

# jquery - jquery tablesorter plugin sort just one way

> ID：10798081
> 
> 赞同：2
> 
> 时间：2012-05-29T11:18:13.800
> 
> 标签：jquery, tablesorter

Hi have wrote tablesorter plugin to sort Polish chars but plugin sorts just one way [http://jsfiddle.net/Gk43v/](http://jsfiddle.net/Gk43v/) here is the example and plugin code

```
$.tablesorter.addParser({
   id: 'polish-chars' ,
   type: 'text',
   is: function(s)
   {
       return false;
   },
   format: function(s)
   {
       return
       s.replace('\u0105'/g, 'a')
       .replace('\u0104'/g, 'A')
       .replace('\u0118'/g, 'E')
       .replace('\u0119'/g, 'e')
       .replace('\u0107'/g, 'c')
       .replace('\u0106'/g, 'C')
       .replace('\u0143'/g, 'N')
       .replace('\u0144'/g, 'n')
       .replace('Ó'/g, 'O')
       .replace('ó'/g, 'o')
       .replace('\u0141'/g, 'L')
       .replace('\u0142'/g, 'l')
       .replace('\u015a'/g, 'S')
       .replace('\u015b'/g, 's')
       .replace('\u0179'/g, 'Z')
       .replace('\u017a'/g, 'z')
       .replace('\u017b'/g, 'Z')
       .replace('\u017c'/g, 'z')
   }
}); 
```

Edit: When using this plugin with tablesorter it didn't show an error `/g`, so it should look like

```
$.tablesorter.addParser({
   id: 'polish-chars',
   type: 'text',
   is: function(s)
   {
       return false;
   },
   format: function(s)
   {
       return s.replace('ą', 'a')
               .replace('Ą', 'A')
               .replace('Ę', 'E')
               .replace('ę', 'e')
               .replace('ć', 'c')
               .replace('Ć', 'C')
               .replace('Ń', 'N')
               .replace('ń', 'n')
               .replace('Ó', 'O')
               .replace('ó', 'o')
               .replace('Ł', 'L')
               .replace('ł', 'l')
               .replace('Ś', 'S')
               .replace('ś', 's')
               .replace('Ź', 'Z')
               .replace('ź', 'z')
               .replace('Ż', 'Z')
               .replace('ż', 'z');
   }
}); 
```

and work just like I wanted to work.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T19:46:57.023

使用 replace with 时`/g`，不要使用引号（[更新的演示](http://jsfiddle.net/Mottie/Gk43v/1/)）：

```
$.tablesorter.addParser({
    id: 'polish-chars',
    type: 'text',
    is: function(s) {
        return false;
    },
    format: function(s) {
       return s.replace(/\u0105/g, 'a')
       .replace(/\u0104/g, 'A')
       .replace(/\u0118/g, 'E')
       .replace(/\u0119/g, 'e')
       .replace(/\u0107/g, 'c')
       .replace(/\u0106/g, 'C')
       .replace(/\u0143/g, 'N')
       .replace(/\u0144/g, 'n')
       .replace(/Ó/g, 'O')
       .replace(/ó/g, 'o')
       .replace(/\u0141/g, 'L')
       .replace(/\u0142/g, 'l')
       .replace(/\u015a/g, 'S')
       .replace(/\u015b/g, 's')
       .replace(/\u0179/g, 'Z')
       .replace(/\u017a/g, 'z')
       .replace(/\u017b/g, 'Z')
       .replace(/\u017c/g, 'z');
    }
}); 
```

另外，您可以尝试我的[tablesorter](http://mottie.github.com/tablesorter/docs/index.html)叉子，该叉子在选项为时进行[字符等效替换](http://mottie.github.com/tablesorter/docs/example-locale-sort.html)。只需将缺少的波兰语字符添加到列表中：`sortLocaleCompare``true`

```
$.extend( $.tablesorter.characterEquivalents, {
    "a" : "\u0105", // ą
    "A" : "\u0104", // Ą
    "c" : "\u0107", // ć
    "C" : "\u0106", // Ć
    "e" : "\u0119", // ę
    "E" : "\u0118", // Ę
    "l" : "\u0142", // ł
    "L" : "\u0141", // Ł
    "n" : "\u0144", // ń
    "N" : "\u0143", // Ń
    "o" : "\u00f3", // ó
    "O" : "\u00d3", // Ó
    "s" : "\u015b", // ś
    "S" : "\u015a", // Ś
    "z" : "\u017a\u017c", // źż
    "Z" : "\u0179\u017b" // ŹŻ
}); 
```

# objective-c - Base64 和 utf8 / 国家字符编码

> ID：10798084
> 
> 赞同：0
> 
> 时间：2012-05-29T11:18:25.207
> 
> 标签：objective-c, ios, base64

我想使用波兰民族字符进行 Base64 编码。例如：

```
"zażółć gęślą jaźń" 
```

应该：

```
emEmIzM4MDvzJiMzMjI7JiMyNjM7IGcmIzI4MTsmIzM0NztsJiMyNjE7IGphJiMzNzg7JiMzMjQ7 
```

但实施此解决方案后：

```
-(NSString *)Base64Encode:(NSData *)data{
    //Point to start of the data and set buffer sizes
    int inLength = [data length];
    int outLength = ((((inLength * 4)/3)/4)*4) + (((inLength * 4)/3)%4 ? 4 : 0);
    const char *inputBuffer = [data bytes];
    char *outputBuffer = malloc(outLength);
    outputBuffer[outLength] = 0;

    //64 digit code
    static char Encode[] = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";

    //start the count
    int cycle = 0;
    int inpos = 0;
    int outpos = 0;
    char temp;

    //Pad the last to bytes, the outbuffer must always be a multiple of 4
    outputBuffer[outLength-1] = '=';
    outputBuffer[outLength-2] = '=';

    while (inpos < inLength){
        switch (cycle) {
            case 0:
                outputBuffer[outpos++] = Encode[(inputBuffer[inpos]&0xFC)>>2];
                cycle = 1;
                break;
            case 1:
                temp = (inputBuffer[inpos++]&0x03)<<4;
                outputBuffer[outpos] = Encode[temp];
                cycle = 2;
                break;
            case 2:
                outputBuffer[outpos++] = Encode[temp|(inputBuffer[inpos]&0xF0)>> 4];
                temp = (inputBuffer[inpos++]&0x0F)<<2;
                outputBuffer[outpos] = Encode[temp];
                cycle = 3;                  
                break;
            case 3:
                outputBuffer[outpos++] = Encode[temp|(inputBuffer[inpos]&0xC0)>>6];
                cycle = 4;
                break;
            case 4:
                outputBuffer[outpos++] = Encode[inputBuffer[inpos++]&0x3f];
                cycle = 0;
                break;                          
            default:
                cycle = 0;
                break;
        }
    }
    NSString *pictemp = [NSString stringWithUTF8String:outputBuffer];
    free(outputBuffer); 
    return pictemp;
} 
```

当然我得到的东西略有不同：

```
emHFvMOzxYLEhyBnxJnFm2zEhSBqYcW6xYQ 
```

女巫回到我身边（通过在线**[解码器](http://www.motobit.com/util/base64-decoder-encoder.asp)**）：

```
zaÅ¼Ã³Å‚Ä‡ gÄ™Å›lÄ… jaÅºÅ„ 
```

我这样称呼它：

```
NSString* str= _@"zażółć gęślą jaźń";
NSData* data=[str dataUsingEncoding:NSUTF8StringEncoding];

NSString * encodeString = [[[NSString alloc] init] autorelease];

encodeString = [self Base64Encode:data]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T12:33:42.893

在线解码器位于 ISO-8859-1 页面上，而不是 UTF-8。如果您强制使用 UTF-8，它会起作用。

此外，编码版本的差异可能是因为组合字符与分解字符（不确定）。

# javascript - how to convert mouse events and touch events using java script

> ID：10798086
> 
> 赞同：1
> 
> 时间：2012-05-29T11:18:27.207
> 
> 标签：javascript, jquery

Any idea about about how to use double click event in tablets or ipad. Like 'onmousedown' is equivalent to 'touchstart'.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T12:09:28.067

也许用于多点触控手势的hammer.js 库也会让您感兴趣：[http ://eightmedia.github.com/hammer.js/](http://eightmedia.github.com/hammer.js/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T09:18:26.553

```
To Detect long press you can simply use like this.

<div id="element" style="width:200px;height:200px; border:1px solid red;">&nbsp;</div>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​

<!------------ Javascript Code ---------->

$('#element').each(function() {

    var timeout, longtouch;

    $(this).mousedown(function() {
        timeout = setTimeout(function() {
            longtouch = true;
        }, 1000);
    }).mouseup(function() {
        if (longtouch) {
            alert('long touch');
        } else {
            alert('short touch');

        }
        longtouch = false;
        clearTimeout(timeout);
    });

});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T11:36:06.087

我想一个快速的谷歌搜索会解决你的问题，简短的回答是肯定的。长答案是您最好使用像[jQuery-mobile](http://jquerymobile.com/)这样的框架来为您处理，为您提供 ontouch、scroll 等事件。

还研究了使这些点击事件更快的[energet.js](https://github.com/davidcalhoun/energize.js)

也类似于这个stackvoverflow[答案](https://stackoverflow.com/questions/1517924/javascript-mapping-touch-events-to-mouse-events)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-27T10:21:41.407

过时的话题，但尚未标记为已回答，所以我想我会试一试。

在大多数情况下，向事件添加抽象层的 JavaScript 框架会有所帮助。（正如其他人指出的那样。）但是对于你不能的情况，试试这个。

```
var el = document.getElementById('myelement');
var numClicks = 0;  // count the number of recent clicks
var lastClickTime = 0;  // time of last click in milliseconds
var threshold = 50;  // you need to set this to a reasonable value

function isDoubleClick() {
    var r;
    if( numClicks == 0 ) {
      numClicks++;  // first click never counts
      r = false;
    } else if( new Date().getTime() - lastClickTime > threshold ) {
      numClicks = 1; // too long time has passed since lsat click, reset the count
      r = false;
    } else {
      numClicks++; // note: reset numClicks here if you want to treat triple-clicks and beyond differently
      r = true;
    }
    lastClickTime = new Date().getTime();
    return r;
}

var myClickFunction = function (event) {
    if( isDoubleClick() ) {
      // your double-click code
    } else {
      // plain click code
    }
}

// bind your own click function to the mouse click event
el.addEventListener("mouseclick", myClickFunction, false); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-01T06:46:45.730

I tried something like this :

```
<------java script and jquery ------>

            var startTime,endTime;

                $('#main-content').mousedown(function(event){
                    startTime = new Date().getTime();
                    //any other action
                });
                $('#main-content').mouseup(function(event){
                   endTime = new Date().getTime();
                   if(isTouchDevice()){
                    if((endTime-startTime)>200 && (endTime-startTime)<1000 ){
                        alert('long touch')

                    }
                  }

                });

function isTouchDevice(){
  return (typeof(window.ontouchstart) != 'undefined') ? true : false;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-29T11:39:18.670

```
Try to implement doubleTap you can use this code.

(function($){
    // Determine if we on iPhone or iPad
    var isiOS = false;
    var agent = navigator.userAgent.toLowerCase();
    if(agent.indexOf('iphone') >= 0 || agent.indexOf('ipad') >= 0){
           isiOS = true;
    }

    $.fn.doubletap = function(onDoubleTapCallback, onTapCallback, delay){
        var eventName, action;
        delay = delay == null? 500 : delay;
        eventName = isiOS == true? 'touchend' : 'click';

        $(this).bind(eventName, function(event){
            var now = new Date().getTime();
            var lastTouch = $(this).data('lastTouch') || now + 1 /** the first time this will make delta a negative number */;
            var delta = now - lastTouch;
            clearTimeout(action);
            if(delta<500 && delta>0){
                if(onDoubleTapCallback != null && typeof onDoubleTapCallback == 'function'){
                    onDoubleTapCallback(event);
                }
            }else{
                $(this).data('lastTouch', now);
                action = setTimeout(function(evt){
                    if(onTapCallback != null && typeof onTapCallback == 'function'){
                        onTapCallback(evt);
                    }
                    clearTimeout(action);   // clear the timeout
                }, delay, [event]);
            }
            $(this).data('lastTouch', now);
        });
    };
})(jQuery);

and to use doubleTap event

$(selector).doubletap(
    /** doubletap-dblclick callback */
    function(event){
        alert('double-tap');
    },
    /** touch-click callback (touch) */
    function(event){
        alert('single-tap');
    },
    /** doubletap-dblclick delay (default is 500 ms) */
    400
); 
```

# java - 视频转换 - Java 音频视频编码器 (JAVE)

> ID：10798087
> 
> 赞同：1
> 
> 时间：2012-05-29T11:18:32.487
> 
> 标签：java, encode, jave

我正在使用 MAC OS X。我正在尝试使用 jave（java 音频视频转换器）将视频从一种格式编码为另一种格式。但我不断收到这个例外

it.sauronsoftware.jave.EncoderException: Stream #0.0, 25.00 fps(r): Video: mpeg4, yuv420p, 608x288

所以我检查了异常发生的位置..我找到了引发异常但无法解决为什么会出现这个异常的代码部分..

代码部分是：

```
 while ((line = reader.readLine()) != null) {
            if (step == 0) {
                if (line.startsWith("WARNING: ")) {
                    if (listener != null) {
                        listener.message(line);
                    }
                } else if (!line.startsWith("Output #0")) {
                    throw new EncoderException(line);
                } 
```

我不断收到编码器异常。Encoder.java 的源文件可以在这里找到：http: [//www.sauronsoftware.it/projects/jave/download.php](http://www.sauronsoftware.it/projects/jave/download.php)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T12:17:15.097

您可以使用[Xuggler 库](http://www.xuggle.com/xuggler)。

我认为在 MAC OS X 上比 JAVE 更好

# entity-framework - 实体框架找不到连接字符串

> ID：10798089
> 
> 赞同：0
> 
> 时间：2012-05-29T11:18:41.010
> 
> 标签：entity-framework

我有一个问题。

在我的解决方案中，我有一个“模型”目录。在那个目录中，我创建了一个实体模型。当我创建模型（使用向导）时，它会在我的 app.config 中为连接字符串创建一个新条目（位于解决方案级别）。

但是，当我尝试使用默认构造函数访问实体对象构造函数时，出现错误：在配置中找不到指定的命名连接，不打算与 EntityClient 提供程序一起使用，或者无效。

我有一个测试应用程序，我在其中添加了指向此 app.config 的链接。从这里我可以毫无问题地访问实体对象！

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T19:35:48.957

确保连接字符串在执行程序集的配置文件中。例如，如果您使用来自 af 网站的 EF，则可以将连接字符串从 EF 程序集的 app.config 复制到网站程序集的 web.config。复制所有连接字符串块：

```
<connectionStrings>
...
</connectionStrings> 
```

# javascript - 使用javascript获取特定字符串

> ID：10798091
> 
> 赞同：1
> 
> 时间：2012-05-29T11:18:45.990
> 
> 标签：javascript

我将简要解释我的问题：

我有一个看起来像这样的数字：`971505896321;971505848963;971505478231;971509856987;`

我的客户应该在文本字段中写下上述数字，我应该`971505896321 and 971505848963 and 971505478231 and 971509856987`将它们添加到列表中。

我现在成功地将数字添加到列表中，但是我很难在没有`;`.

```
function AddPhoneNo()
{   
    var recipientNumber = document.smsmobile.mobile_no;
    var opt = "<option value='" + recipientNumber.value + "'>" + recipientNumber.value + "</option>"

    if  (recipientNumber.value != "")
    {
        if(verifyPhone(recipientNumber.value))
        {
             $('#selectedOptions').append(opt);

            recipientNumber.value = "";
        }
    }       
} 
```

所有数字都应以 开头`971`，每个数字的长度为`12`。例如：`971506987456`。

感谢你的帮助。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T11:24:49.830

```
var recipientNumber = "971505896321;971505848963;971505478231;971509856987;";
var mobileArr = recipientNumber.split(";"); 
```

然后你可以在上面的数组上运行一个循环并将它们添加到你的选项中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T11:22:40.580

你只需要更换；如果我正确地得到你而不是你的代码

```
var recipientNumber = document.smsmobile.mobile_no.replace(';',''); 
```

* * *

**编辑**

如果您输入所有数字，则需要拆分字符串

```
var recipientNumber = "971505896321;971505848963;971505478231;971509856987;";
var arrayofNumbers= recipientNumber.split(";"); 
var i; for (i = 0; i < arrayofNumbers.length; ++i)
{ 
   var opt = "<option value='" + arrayofNumbers[i]+ "'>" + arrayofNumbers[i]+ "</option>"

    if  (arrayofNumbers[i] != "")
    {
        if(verifyPhone(arrayofNumbers[i]))
        {
             $('#selectedOptions').append(opt);

        }
    } 
} 
```

# matlab - 非最大化matlab GUI图

> ID：10798095
> 
> 赞同：3
> 
> 时间：2012-05-29T11:19:14.640
> 
> 标签：matlab, user-interface, matlab-figure, maximize-window

有没有办法创建一个以最大化窗口开始的 GUI？我试图`set(gcf,'Units','normalized','Position',[0,0,1,1]);`在我的 gui 函数的末尾添加，`mygui_OpeningFcn()`但 GUI 没有正确最大化（参见 printscreen）。

将 GUIDE 上的 GUI 属性设置为`Units-'normalized'`也`Position-[0,0,1,1]`无济于事。

我还尝试通过在我的 gui 末尾添加来使用[Matlab File Exchange 最大化功能](http://www.mathworks.com/matlabcentral/fileexchange/10274-maximize-figure-windows)，但它也不起作用（相同的视觉结果 - 一个未完全最大化的 GUI）。`maximize(handle.figure1);``mygui_OpeningFcn()`

有没有办法让 Matlab GUI 在我启动时显示为最大化的图形？为什么我会得到 GUI 的这种奇怪的视觉行为？

![GUI 未正确最大化](../Images/4226a47490500e0253895bcce9c2cb24.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T16:32:04.410

如果您使用的是 Windows 机器，我建议您使用[`WindowAPI`](http://www.mathworks.com/matlabcentral/fileexchange/31437)来自 FEX 的提交。它直接调用[Windows API](http://en.wikipedia.org/wiki/Windows_API)函数（使用 MEX 文件），从而允许对图形进行更高级的控制，而不仅仅是最小化和最大化：

```
hFig = figure('Menubar','none');
WindowAPI(hFig,'Maximize') 
```

# iphone - 如何在openGLES（iPhone）的GL_Line中添加图像？

> ID：10798097
> 
> 赞同：2
> 
> 时间：2012-05-29T11:19:15.623
> 
> 标签：iphone, ios, opengl-es

目前我正在使用简单的游戏应用程序，使用 GL_Line 画一条线并且工作正常，然后我尝试在行尾添加（锚）图像。但我不知道，如何解决这个问题？那么有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T11:55:02.963

你为什么不画一个有纹理的四边形来完成这个？您可以只 glTranslate 到行尾并绘制四边形。

# php - 如何将php现有的Web应用程序转换为移动应用程序

> ID：10798102
> 
> 赞同：-1
> 
> 时间：2012-05-29T11:19:28.753
> 
> 标签：php, joomla1.5

我已经用 joomla 1.5 开发了一个网页，现在我需要将我的网络应用程序转换为移动应用程序。用户可以通过移动苹果等下载我的应用程序，然后他们可以访问。告诉任何提示并请指导我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T13:03:18.837

你可以看看 phonegap ( [http://phonegap.com/](http://phonegap.com/) ) 它是一个 java 框架，你可以用 javascript 控制响铃、振动、确定位置等。

有关于如何为每个手机操作系统制作应用程序的教程，对于初学者来说非常容易理解。但是，由于您使用 joomla，您的代码必须在 php 服务器上运行。（本教程仅涵盖如何在您的应用程序中嵌入本地 html 文件）。

有一些教程涵盖了在“现有”网站上使用 phonegap。谷歌为它。

将来，您可能想看看 jquery mobile，他们的网站[http://jquerymobile.com/](http://jquerymobile.com/)上有一个界面构建器，它旨在在每个设备上看起来都很好。你可以使用他们的 themeroller 和一些额外的 css 来实现一个相当不错的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T11:31:46.057

Humm joomla is not a good bet for mobile web apps. Even with adapted css and layouts, If you have a lot of extensions, some might break in mobile view.

I would build a a web app from scratch (using jquery mobile, that as a good cross platform support) and get the data from the original website. It might take a while longer, but the experience for your users will surely be better.

EDIT:

From what I gathered from your comments, it seems you want a landing page where people can download a "game" to their mobile phones, is that right? Please explain exactly what you want to accomplish so we might help you.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T12:06:43.497

要将现有的 Web 应用程序转换为移动应用程序，您必须创建 Web 应用程序的 Web 服务并以 XML 或 json 格式返回数据。在移动开发结束时，如在 android 平台上，您必须在模拟器上解析这些数据，并且这样您就可以测试应用程序并在移动设备中使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T11:38:08.413

你试过移动 Joomla 吗？这是一个很棒的扩展，它是让您的网站适合移动设备的简单第一步。

“Mobile Joomla!® 是移动您的 Joomla! 网站的最佳方式，在 iPhone、iPad、Android、Windows Phone 和所有其他手机上显示精美。”

[http://www.mobilejoomla.com/](http://www.mobilejoomla.com/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-29T11:25:09.330

Suresh，因为您的用户与托管您的 Joomla 安装的服务器进行交互非常重要，所以为您的网站创建特定于移动设备的单独 CSS 样式是最可行的。

因为 Joomla 有一个用户社区，所以很可能已经编写了插件或模板来帮助加快这个过程。这是一个扩展程序，可以完成您正在寻找的一些功能，因为它将允许手机上的用户通过浏览器以舒适的方式与您的网站进行交互。

[http://extensions.joomla.org/extensions/mobile/mobile-display/11722](http://extensions.joomla.org/extensions/mobile/mobile-display/11722)

# visual-studio-2010 - visual studio 2010 Step Into 功能无法正常工作

> ID：10798105
> 
> 赞同：1
> 
> 时间：2012-05-29T11:19:50.493
> 
> 标签：visual-studio-2010, debugging

还有其他人在使用 F11 进入代码时遇到问题吗？

直到大约一个小时前，我还能够轻松完美地单步执行 C# 和 C++ 项目中的代码，但现在我突然必须按 F11 至少 10 次才能转到下一行。这甚至不是延迟问题，因为按下和等待没有结果，每次我想进入代码时都必须按 10 次。这同样适用于 GUI 上的按钮。

它在使用即时和命令窗口（顺便说一句非常有用）之后开始，我没有使用任何处理单步执行代码的命令，只是用于启动和停止调试的命令。

我可能不小心启用了“延迟调试”选项吗？

到处搜索解决方案，似乎每个人都有 F11 问题，但没有这样的问题，所以非常感谢任何帮助

# regex - 如何使用 regexp_like (...'[^\_...]$) 过滤结果？

> ID：10798106
> 
> 赞同：0
> 
> 时间：2012-05-29T11:19:55.453
> 
> 标签：regex, oracle10g

阿罗哈

我需要过滤结果。我做了“不喜欢”的约束。但我想更有效率。

这是我尝试过的：以“不喜欢”的风格

`

```
 AND S.COLUMN_NAME NOT LIKE ('%_S')
  AND S.COLUMN_NAME NOT LIKE ('%_T')
  AND S.COLUMN_NAME NOT LIKE ('%_X')
  AND S.COLUMN_NAME NOT LIKE ('%_Y')
  AND S.COLUMN_NAME NOT LIKE ('%_L')
  AND S.COLUMN_NAME NOT LIKE ('%_SG')
  AND S.COLUMN_NAME NOT LIKE ('%_ST')
  AND S.COLUMN_NAME NOT LIKE ('%_X1')
  AND S.COLUMN_NAME NOT LIKE ('%_Y1')
  AND S.COLUMN_NAME NOT LIKE ('%_X2')
  AND S.COLUMN_NAME NOT LIKE ('%_Y2')
  AND S.COLUMN_NAME NOT LIKE ('%_O')` 
```

并在正则表达式中：

```
 REGEXP_LIKE (COLUMN_NAME, '[^\_O|Y]*') 
```

regexp_like 子句没有按我的预期工作。但是我不知道怎么写。我想要除以 _O、_Y、_X、...结尾的所有结果

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T12:18:50.683

我不熟悉正则表达式的 oracle 风格，但是在简要查看了他们的文档之后，我希望这样的东西可以工作：

```
.*?_(O|Y|Z)$ 
```

或者

```
.*?_[OYZ]$ 
```

它说：

*   `.*?`- 匹配后面的任何内容（非贪婪匹配）
*   `_`- 下划线文字，后跟
*   `(O|Y|Z)`- O 或 Y 或 Z（这是一个捕获组 - 在标准正则表达式中，我会使用 (?:) 但它可能不受支持
*   `$`- 在字符串的末尾

另一种方法是使用字符类`[OYZ]`，这意味着任何这些字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T12:19:49.193

尝试类似：

```
NOT REGEXP_LIKE (COLUMN_NAME, '_([STXYLO]|S[GT]|[XY][12])$') 
```

# jquery - 通过 DOM 访问特定元素

> ID：10798110
> 
> 赞同：0
> 
> 时间：2012-05-29T11:20:07.353
> 
> 标签：jquery, dom

我在使用 DOM 时遇到问题。我正在尝试访问特定`<span>`元素的类。

HTML：

```
<span><span class="abc">*</span><label for="sometext"></label></span> 
```

我想访问元素的“abc”类`<span>`，并且我有这个`<label>`元素。

这是我所做的：

```
var parent=$(label[0]).parent();
var class=$(parent[0]).childNodes[0].attr("class"); 
```

编辑：前一个兄弟似乎是一些文本节点！！..不知道为什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T11:28:15.973

如果您使用的是 jQuery，您可以简单地使用：

```
var classes = $(label[0]).prev().attr('class'); 
```

我建议不要将您的“类”变量命名为“类”，因为它是 javascript 中的保留字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T11:23:18.633

试试这个：

```
$('label')
      .prev('span')  // get the previous span of label
      .attr('class');  // get class of the span. 
```

**[演示](http://jsfiddle.net/nGw3E/2/)**

或者

```
$('label')
      .siblings('span')  // get the previous span of label
      .first()
      .attr('class');  // get class of the span 
```

**[演示](http://jsfiddle.net/wkZ3Z/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T11:24:27.850

用这个：

```
var sibling = $('label').siblings('span').first();
var class = $(sibling).attr('class'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-29T11:27:24.243

```
$('label').siblings('span').attr('class'); 
```

[http://jsfiddle.net/Cf9Qn/](http://jsfiddle.net/Cf9Qn/)

# google-docs - 联合函数 - 在自定义函数中传递参数 - Google 电子表格

> ID：10798113
> 
> 赞同：0
> 
> 时间：2012-05-29T11:20:21.813
> 
> 标签：google-docs, google-sheets, google-apps-script

在尝试回答 [这个问题](https://stackoverflow.com/questions/10793321/how-to-union-range-in-google-spreadsheet)时，我发现了一个奇怪的行为。

这是我的代码：

```
function remove(val, array){
  var res = new Array();
  for(var i=0; i<array.length; i++){
    if(array[i] != val){
      res.push(array[i]);
    }
  }
  return res;
}

//we assume that there is no duplicates values inside array1 and array2
function my_union(array1, array2){
  var longuer;
  var shorter;
  var arrayRes = new Array();
  if(array1.length < array2.length){
    longuer = array2;
    shorter = array1;
  } else {
    longuer = array1;
    shorter = array2;
  }

  for(var i=0; i<longuer.length; i++){
    arrayRes.push(longuer[i]);
    shorter = remove(longuer[i], shorter);
  }

  for(var i=0; i<shorter.length; i++){
    arrayRes.push(shorter[i]);
  }

  return arrayRes;
}

function test(){
  Browser.msgBox(my_union([1,2,3], [1,2]));
} 
```

消息框清楚地显示 1,2,3 但是当您尝试在具有相同值的电子表格中调用此函数时，它无法删除重复值，为什么？

**编辑：**感谢Henrique的回答，这里是代码：

```
function remove(val, array){
  var res = new Array();
  for(var i=0; i<array.length; i++){
    if(array[i] != val){
      res.push(array[i]);
    }
  }
  return res;
}

function matFlattener(matrix){
  var array = new Array();
  for(var i=0; i<matrix.length; i++){
    for(var j=0; j<matrix[i].length; j++){
      array.push(matrix[i][j]);
    }
  }
  return array;
}

function my_union(matrix1, matrix2){
  //assert no duplicate values in matrix1 and matrix2
  var longuer;
  var shorter;
  var array1 = matFlattener(matrix1);
  var array2 = matFlattener(matrix2);
  var arrayRes = new Array();
  if(array1.length < array2.length){
    longuer = array2;
    shorter = array1;
  } else {
    longuer = array1;
    shorter = array2;
  }

  for(var i=0; i<longuer.length; i++){
    arrayRes.push([longuer[i]]);
    shorter = remove(longuer[i], shorter);
  }

  for(var i=0; i<shorter.length; i++){
    arrayRes.push([shorter[i]]);
  }

  return arrayRes;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T14:18:47.173

当您从电子表格调用自定义函数并传递多范围参数时，此参数将**始终**为矩阵，无论您传递的是单行还是单列。

要像电子表格那样测试行为，您应该像这样更改`test`函数：

```
function test() {
  //note the "extra" brackets
  Browser.msgBox(my_union([[1,2,3]],[[1,2]]); //passing "single" rows
  Browser.msgBox(my_union([[1],[2],[3]],[[1],[2]]); //passing "single" columns
} 
```

解决方案是调整您的`my_union`公式以解决它。

# python - 在scrapy中将基本url与结果href结合起来

> ID：10798118
> 
> 赞同：10
> 
> 时间：2012-05-29T11:20:29.863
> 
> 标签：python, url, scrapy

下面是我的蜘蛛代码，

```
class Blurb2Spider(BaseSpider):
   name = "blurb2"
   allowed_domains = ["www.domain.com"]

   def start_requests(self):
            yield self.make_requests_from_url("http://www.domain.com/bookstore/new")

   def parse(self, response):
       hxs = HtmlXPathSelector(response)
       urls = hxs.select('//div[@class="bookListingBookTitle"]/a/@href').extract()
       for i in urls:
           yield Request(urlparse.urljoin('www.domain.com/', i[1:]),callback=self.parse_url)

   def parse_url(self, response):
       hxs = HtmlXPathSelector(response)
       print response,'------->' 
```

在这里，我试图将 href 链接与基本链接结合起来，但出现以下错误，

```
exceptions.ValueError: Missing scheme in request url: www.domain.com//bookstore/detail/3271993?alt=Something+I+Had+To+Do 
```

谁能让我知道为什么我会收到此错误以及如何使用 href 链接加入基本 url 并产生请求

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2017-10-14T15:33:49.227

如果您不想使用另一种解决方案`urlparse`：

```
response.urljoin(i[1:]) 
```

这个解决方案更进一步：在这里 Scrapy 计算出要加入的域基础。正如您所看到的，您不必提供明显`http://www.example.com`的加入。

如果您想更改正在抓取的域，这将使您的代码在将来**可重用。**

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-05-29T12:07:50.747

这是因为您没有在基本 url 中添加方案，例如 http://。

尝试：`urlparse.urljoin('http://www.domain.com/', i[1:])`

或者更简单：`urlparse.urljoin(response.url, i[1:])`因为 urlparse.urljoin 将自行整理基本 URL。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-02-20T13:07:25.217

跟随链接的最佳方式`scrapy`是使用`response.follow()`. scrapy 将处理其余部分。

[更多信息](https://docs.scrapy.org/en/latest/intro/tutorial.html#a-shortcut-for-creating-requests)

引用自文档：

> 不同`scrapy.Request`的是，`response.follow`直接支持相对 URL - 无需调用`urljoin`。

此外，您可以`<a>`直接将元素作为参数传递。

# java - Oracle 模式验证器

> ID：10798122
> 
> 赞同：0
> 
> 时间：2012-05-29T11:20:52.567
> 
> 标签：java, hibernate

我在我的应用程序中使用 Oracle DB

我的应用程序允许用户创建模式，因此

我想在我的应用程序设置之前做一些验证..

例如，我想确保用户没有创建具有长列名的表

（Oracle 对最大 30 字节的表和列名有限制）

我在验证函数中持有方言对象，

是否可以使用方言对象找出用户输入（在我的示例列名中）

不正确 - （因为列名大小超过 30 个字节..）

请协助，

谢谢，

约翰。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T06:05:29.240

我发现了怎么做..

我声明了类的新对象：java.sql.DatabaseMetaData

在此类中有 getMaxColumnNameLength() 方法，该方法返回每个 DB 的限制

（例如在 oracle 中该方法返回 30）

现在我可以进行验证了！

不管怎么说，还是要谢谢你 ：）

约翰。

# javascript - 删除引导下拉插入符号

> ID：10798129
> 
> 赞同：3
> 
> 时间：2012-05-29T11:21:18.290
> 
> 标签：javascript, html, css, twitter-bootstrap, caret

我正在使用引导程序处理我的个人投资组合，并且导航下拉菜单有一个插入符号，如您在[http://portfolio.tomvervoort.net](http://portfolio.tomvervoort.net)中看到的那样。

投资组合旁边的插入符号是可以的，但是当您单击投资组合时，下拉列表顶部也有一个白色插入符号。有谁知道如何删除这个？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-29T11:34:50.710

你的**插入符号**在里面`.dropdown-menu:after`。所以，这样写：

```
.navbar .dropdown-menu:after{
 display:none;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-24T23:35:22.437

在 Rails 中有同样的问题（使用 twitter bootstrap rails gem），修复略有不同。

```
.navbar .nav > li > .dropdown-menu::after, 
.navbar .nav > li > .dropdown-menu::before {
  display:none;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-21T19:11:37.140

在当前版本的 TBS (v2.2.1) 中，您还需要像这样定位 :before 伪选择器：

```
.navbar .dropdown-menu:after, .navbar .dropdown-menu:before {
    display:none;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-11T05:52:47.823

尝试这样做：

```
.navbar .nav > li > .dropdown-menu:before,
.navbar .nav > li > .dropdown-menu:after {
    display:none;
} 
```

对我来说很好。:-)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-01T04:12:24.443

从 git hub [post](https://github.com/react-bootstrap/react-bootstrap/pull/343) 现在我们可以直接使用`noCaret`prop。这篇文章基本上来自 DropDownButton 但它也适用于 NAvButton

# android - 空指针异常-android.widget.onTouchEvent

> ID：10798134
> 
> 赞同：0
> 
> 时间：2012-05-29T11:21:33.073
> 
> 标签：android

我在 android 市场收到了以下崩溃报告。在测试时我没有发现任何崩溃并且我的应用程序运行良好。一旦我发布了我的应用程序，我就会得到以下崩溃报告，如下所示。

但是我无法找到崩溃发生的位置，我检查了一些堆栈溢出问题，并且在某些情况下，我`setInputType(InputType.TYPE_CLASS_TEXT | InputType.TYPE_TEXT_VARIATION_PASSWORD);`在某些设备中使用了 make 导致崩溃。这是真的吗，因为在我的应用程序中的某些活动中，我使用了这行代码来更改`EditText`密码文本/文本密码的输入类型？

请帮我解决这个问题。

**堆栈跟踪**

```
java.lang.NullPointerException
at android.widget.TextView.onTouchEvent(TextView.java:7529)
at android.view.View.dispatchTouchEvent(View.java:3933)
at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:906)
at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:906)
at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:906)
at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:906)
at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:906)
at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:906)
at  com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1877)
at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1211)
at android.app.Activity.dispatchTouchEvent(Activity.java:2198)
at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1852)
at android.view.ViewRoot.deliverPointerEvent(ViewRoot.java:2382)
at android.view.ViewRoot.handleMessage(ViewRoot.java:2010)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:150)
at android.app.ActivityThread.main(ActivityThread.java:4385)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:849)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:607)
at dalvik.system.NativeStart.main(Native Method)

<EditText
    android:id="@+id/txt_edit_passwrd"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/txt_passwrd_title"
    android:background="@drawable/img_password_textbox"
    android:cursorVisible="true"
    android:layout_marginTop="195dp"
    android:hint="@string/passwrd_hint_text"
    android:inputType="textPassword"
    android:maxLength="10"
    android:padding="10dp"
    android:textColor="#121212" >
</EditText> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T11:51:07.433

NullPointerException 在我自己的经验中往往意味着它找不到引用对象，例如找不到您设置输入类型的编辑文本，检查您的布局引用以及您如何声明 EditText 本身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T13:32:18.273

首先检查，`Have you mention Minimum_sdk_version in android-manifest?`

如果不是，那么以下可能是您的应用程序崩溃的原因——

如果您使用的是客户设备上不支持的 android 操作系统的功能。假设您使用的是在 android 2.0 之前不支持的 Finger_Pointer（如 MotionEvent.ACTION_POINTER_DOWN [） 。](http://android-developers.blogspot.in/2010/06/making-sense-of-multitouch.html)

或者您正在使用`onBackPressed()`不支持 android 1.6.I 只是提示您可以检查其他类似的问题，如果您有

**更新**

对于 HTC 设备，TextView 的属性`InputType.TYPE_CLASS_NUMBER`导致崩溃

[这是讨论的相同问题，您也可以参考this。](https://stackoverflow.com/questions/5978370/nullpointerexception-report-from-android-market)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-26T13:50:37.563

解决方案是不要将“setInputType”与**TextView**一起使用。无论如何，您都不需要对 TextViews 进行输入类型过滤，因为它们仅用于显示文本。**只有 EditText 需要输入类型**（并且它在那里工作）。我对低于 4.2 的 Android 版本也有同样的问题。

缺点是，在文本视图上应用输入类型“密码”实际上是有意义的，因为它掩盖了密码，这可能是有意的（在我的情况下）。但这会在触摸或滚动文本视图时导致随机崩溃。

# scala - 很酷的类和方法名包裹在``: class `This is a cool class` {}中？

> ID：10798139
> 
> 赞同：10
> 
> 时间：2012-05-29T11:21:47.933
> 
> 标签：scala

我刚刚发现了一些具有奇怪类名的 scala 代码：

```
 class `This is a cool class` {} 
```

和方法名称：

```
 def `cool method` = {} 
```

我们可以用一个句子作为类名或方法名！

它对于单元测试非常酷且有用：

```
class UserTest {
   def `user can be saved to db` {
      // testing
   }
} 
```

但是为什么我们可以做到这一点？怎么理解？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-29T11:37:00.790

为了互操作性而存在此功能。如果 Scala 有一个保留字（`with`例如），那么您仍然可以通过使用反引号来引用来自其他语言的代码，这些代码将其用作方法或变量或其他任何东西。

由于没有理由禁止几乎任意的字符串，您可以使用几乎任意的字符串。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-29T11:49:45.000

正如[@Rex Kerr](https://stackoverflow.com/users/247533/rex-kerr)回答的那样，此功能用于互操作性。例如，

要调用 java 方法，

```
Thread.yield() 
```

你需要写

```
Thread.`yield`() 
```

因为`yield`是 scala 中的关键字。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-29T11:35:28.683

Scala 语言规范：

> 有三种方法可以形成标识符。首先，标识符可以以字母开头，后面可以跟任意的字母和数字序列。后面可以跟下划线“_”字符和另一个由字母和数字或运算符字符组成的字符串。其次，标识符可以以运算符字符开头，后跟任意序列的运算符字符。前两种形式称为普通标识符。最后，标识符也可以由反引号之间的任意字符串形成（主机系统可能会对标识符合法的字符串施加一些限制）。然后，标识符由除反引号本身之外的所有字符组成。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-29T11:30:28.830

包裹在*`*中的字符串是 Scala 中的有效标识符，不仅对类名和方法，对函数和变量也是如此。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-29T11:33:10.910

对我来说，只是解析器和编译器的构建方式可以实现这一点，因此 Scala 团队实现了它。

我认为编码人员能够为函数提供真实名称而不是`getThisIncredibleItem`or是很酷的`get_this_other_item`。

感谢您的问题让我在 Scala 中学到了一些新东西！

# ios - libxml2 xml解析问题

> ID：10798140
> 
> 赞同：0
> 
> 时间：2012-05-29T11:21:48.473
> 
> 标签：ios, xml, nsxmlparser, libxml2

我有一个我自己创建的 xml 文件。

```
 <?xml version='1.0' encoding='utf-8' ?>
    <Root>
        <ChildElements>
            <type name='xx' attr='false'>
                <child id='1' regex='^[0-9]{11}$'>
                    <BBB>
                        <node1 name='aaa' regex='\w{5}'/>
                        <node2 name='bbb' regex='\w{3}'/>
                    </BBB>
                </child>
                <child>
                .
                .
                .
               </child>
           </type>
        </ChildElements>
    </Root> 
```

像这样的东西。我想将其解析为 xml 文档对象并遍历其节点，我将 libxml2 用于 ios。

```
 NSString *xmlPath = [[NSBundle mainBundle] pathForResource:@"xmlcontent" ofType:@"xml"];
    NSData *xmlData = [NSData dataWithContentsOfFile:xmlPath];
    NSString* xml = [[NSString alloc ] initWithData:xmlData encoding:NSUTF8StringEncoding];
int size=[xml lengthOfBytesUsingEncoding:NSUTF8StringEncoding];    
xmlDocPtr docptr=xmlParseMemory([xml UTF8String], size); 
```

但是在docptr对象中只有一个节点，即Root节点，当我尝试获取Root节点子节点时，它返回一个名为@“text”的空节点。
NSXMLParser 可以轻松解析相同的 XML，但我不知道如何使用 NSXMLParser 创建文档并遍历节点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T11:28:16.933

也许错误是，您的 XML 无效：

```
<?xml version='1.0' encoding='utf-8' ?>
<Root>
    <ChildElements>
        <type name='xx' attr='false' />
            <child id='1' regex='^[0-9]{11}$'>
                <BBB>
                    <node1 name='aaa' regex='w{5}' />
                    <node2 name='bbb' regex='w{3}' />
                </BBB>
            </child>

    </ChildElements>
</Root> 
```

您可以使用[在线 XML Validator验证您的 XML](http://www.w3schools.com/xml/xml_validator.asp)

# iphone - 如何解决由于 iCloud 合并而导致的“CoreData：错误：严重应用程序错误”？

> ID：10798143
> 
> 赞同：0
> 
> 时间：2012-05-29T11:21:57.697
> 
> 标签：iphone, objective-c, core-data, nsfetchedresultscontroller, icloud

好的，所以我正处于测试我的应用程序的最后阶段，现在我遇到了一个困扰我的问题。

过程如下：

1）通过 coredata 更改为链接到`myTableView`firstViewController 中的“主表”

2）作为上述代码的一部分，我还将删除所有先前的对象并将字符串保存到“同步日志表”。因此，该表应该只剩下一个对象，例如“Mon 20:33”的字符串。 ***注意：这是一个新实现的功能，我认为它是问题的根源，我想要它，因为我正在使用它来填充所有设备上的标签以显示最后同步的数据，换句话说，给用户一个简单的检查所有设备是否具有相同的信息并且是最新的***

3）然后通过调用保存两个更改`[managedObjectContext save:&error];`

4）在第二台设备上一切正常，我可以更新“主表”，`myTableView`在调用代码重新加载后显示。

请注意，我在第二个设备上显示了 3 行，`myTableView`并且在步骤 1 中对“主表”所做的更改不会更改第二个设备上的 tableview，因为谓词是过滤结果。

**然后问题开始**

5) 第二台设备开始通过 iCloud 和委托方法接收更改：

```
- (void)mergeiCloudChanges:(NSNotification*)note forContext:(NSManagedObjectContext*)moc {
NSLog(@"AppDelegate Merge icloud changes for context");
 //***Specifically the line below!!
[moc mergeChangesFromContextDidSaveNotification:note]; 

NSNotification* refreshNotification = [NSNotification notificationWithName:@"RefreshAllViews" object:self  userInfo:[note userInfo]];

[[NSNotificationCenter defaultCenter] postNotification:refreshNotification]; 
} 
```

上面代码中指示的行在我的 firstViewController 中启动了以下方法

```
- (void)controllerWillChangeContent:(NSFetchedResultsController *)controller {
NSLog(@"I'm inside the method Controller Will Change Context");
[self.myTableView beginUpdates];
}

- (void)controller:(NSFetchedResultsController *)controller didChangeObject:(id)anObject
   atIndexPath:(NSIndexPath *)indexPath forChangeType:(NSFetchedResultsChangeType)type
  newIndexPath:(NSIndexPath *)newIndexPath {
NSLog(@"I'm inside the method Controller did Change Object");

UITableView *tableView = self.myTableView;

switch(type) {
        // And enters in this line here
    case NSFetchedResultsChangeInsert:
        [tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath]
                         withRowAnimation:UITableViewRowAnimationFade];
        break;

    case NSFetchedResultsChangeDelete:
        [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath]
                         withRowAnimation:UITableViewRowAnimationFade];
        break;

    case NSFetchedResultsChangeMove:
        [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath]
                         withRowAnimation:UITableViewRowAnimationFade];
        [tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath]
                         withRowAnimation:UITableViewRowAnimationFade];
        break;
   }
} 
```

然后我得到错误：

```
CoreData: error: Serious application error.  
An exception was caught from the delegate of NSFetchedResultsController during a call to -controllerDidChangeContent:.  
Invalid update: invalid number of rows in section 0\.  
The number of rows contained in an existing section after the update (3) must be equal to the number of rows contained in that section before the update (3), plus or minus the number of rows inserted or deleted from that section (1 inserted, 0 deleted) and plus or minus the number of rows moved into or out of that section (0 moved in, 0 moved out). with userInfo (null) 
```

收到此错误后，myTableView 不再响应，例如它不会更新或响应滑动删除。

基本上根据我的理解，从“同步日志表”中合并的对象被插入（当它们不应该插入时）到 myTableView 委托方法中，这些方法应该只接收来自“主表”的对象，从而抛出计数和导致错误。

知道如何在我的情况下解决这个问题吗？任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T10:38:07.913

# java - 哪个版本的 ipad 操作系统支持 ckeditor...？

> ID：10798144
> 
> 赞同：0
> 
> 时间：2012-05-29T11:22:01.770
> 
> 标签：java, javascript, ckeditor

> **可能重复：**
> [与 iPad 兼容的 HTML Wysiwyg 编辑器](https://stackoverflow.com/questions/5023510/ipad-compatible-html-wysiwyg-editor)

我正在使用的 ckeditor 版本 3.6.3 在 ipad 中不支持，请建议我支持的正确版本的 ckeditor。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T10:34:45.297

CKEditor 对 iPad 没有问题，但对 Safari 有问题。真正的问题是哪个 iOS 互联网浏览器可以与 CKEditor 一起正常工作？我问了团队，他们说 Safari 是唯一适用于 iOS 的。CKEditor 的创建者使用 iPad，我们对 Apple 的态度也不容忽视！

# c# - 密码正则表达式验证

> ID：10798145
> 
> 赞同：2
> 
> 时间：2012-05-29T11:22:07.337
> 
> 标签：c#, regex

这些是要求，但我想这对我的正则表达式技能来说太复杂了......

. 6 到 10 个字母数字字符之间
。允许 AZ,az,0-9,@,$,_
。必须以字母开头
。必须至少包含一个数字
。不能包含两个连续的相同字符
。不能包含两个连续相同的数字

我知道正则表达式的基本知识，例如 [A-Za-Z] = characters only 等......但是当涉及到连续字符和东西时......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-12T07:11:50.763

尝试这个

```
((?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[\W]).{6,20}) 
```

上述正则表达式说明：

```
(           # Start of group
  (?=.*\d)      #   must contains one digit from 0-9
  (?=.*[a-z])       #   must contains one lowercase characters
  (?=.*[A-Z])       #   must contains one uppercase characters
  (?=.*[\W])        #   must contains at least one special character
              .     #     match anything with previous condition checking
                {6,20}  #        length at least 6 characters and maximum of 20 
)           # End of group 
```

“/W”会增加可用于密码的字符范围，坑可以更安全。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-18T12:45:18.210

如果您想验证密码，您可以使用组来验证密码；

```
(?<a>[a-zA-Z])?(?<b>[0-9])?(?<c>[@%$#/\\\(\)])? 
```

将为您提供 3 个组中的任何一个（a、b 和 c）的匹配项

大写字符和小写字符将在 a 组中

数字字符将在 b 组中

特殊字符将在 c 组中

您可以使用 regex.match.groups("a").count 来查看是否可以找到来自组 a 的任何字符

如果您在所有 3 个组中都找到字符，则密码是强密码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T14:27:35.810

```
 string pattern1 = @"^[a-zA-Z]([a-zA-Z])*"; //start and any number of characters
        string pattern2 = @"[0-9]+"; //one number or more numbers
        string pattern3 = @"[@#$%]*"; // special symbol allowed
        string pattern4 = @"(.)\1";//consecutive characters
        string pattern5 = @"^(.){6,10}$"; //min max 
```

# svn - 如何在SVN中删除文件夹的内容

> ID：10798146
> 
> 赞同：0
> 
> 时间：2012-05-29T11:22:07.723
> 
> 标签：svn, tortoisesvn, trunk, svn-trunk

我需要在乌龟颠覆中删除文件夹的内容。所以基本上开发人员在项目的主干中加载了 30gigs 的数据进行测试，现在想要删除这个文件夹的所有内容并且不保留任何这些数据以供保留。

那么我会使用这个命令吗？这是正确的语法吗：svn delete something.com/svn/prod/WHOtest/trunk

然后提交，然后重新创建文件夹并再次提交？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T11:29:26.227

svn delete 将记录您在某一时刻不再想跟踪文件或文件夹的内容。但是，这不会将其从历史记录中删除。有一些关于从历史中删除的实验性工作，但我不知道它的状态。删除时间点的唯一可靠方法是从头开始重建 svn 存储库。现在您可以将所有内容 snvdump 到 30 GiB 提交之前的所有内容，然后尝试在有问题的提交之后实施补丁。我不羡慕必须这样做的人。也许你可以让做这件事的人解决问题（假设你仍然相信他们会做正确的事情）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T11:29:51.063

没有明显或干净的方法可以做到这一点。事实上，所谓的*Obliterate*方法并没有实现。

[你可以在这里](https://stackoverflow.com/questions/560684/svn-obliterate)和[那里](http://blog.projectnibble.org/2008/03/01/subversion-obliterate-the-forgotten-feature/)找到一些答案。

再见 ！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T11:40:39.607

添加到 Jasons 的答案： svndump 直到发生 30 GiB 提交的所有内容

1.  备份您当前的存储库

2.  `svnadmin dump -r1:125 myrepo > my.dump``125`30 GiB 提交之前的修订版在哪里

3.  删除并重新创建您的存储库

4.  `svnadmin load myrepo < my.dump`加载干净的转储。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T11:26:21.283

我不认为您可以通过 svn 永久删除内容。即使你删除了内容，它的 svn 历史也会一直存在。

我认为您将不得不手动从服务器中删除内容。

# c# - 列表中的数据绑定和列表

> ID：10798147
> 
> 赞同：1
> 
> 时间：2012-05-29T11:22:09.827
> 
> 标签：c#, wpf

我制作了一个示例项目来展示我的问题。它可以完整下载（[BookExample.zip](http://zspline.net/temp/BookExample.zip)），但这里是快速纲要：

我有以下数据模型：

```
Course
  Name
  Book
    Name
    Pages
      Note
      Number
      Lines
        Note
        Number 
```

实际数据是 Course 实例列表，其中每个实例包含一个 Page 实例列表（“Pages”），其中每个实例包含一个 Line 类型对象列表（“Lines”）。我的目标是将此结构绑定到以下 UI：[BookExample02.png](http://zspline.net/temp/BookExample02.png)

正确设置数据上下文后，更改课程选择会更改相关书籍文本和页面注释列表。但是我不能更深入：我做不到，所以“行注释”列表会根据“页面注释”列表中的选择而变化。

“行注释”列表不为空的唯一原因是因为在 XAML 中我写了这个：

```
<ListBox Height="80" x:Name="listBox3" ItemsSource="{Binding Book.Pages[0].Lines}" /> 
```

所以它总是显示第一页项目的 Lines 属性。如何用“页面注释”列表框中的选择索引替换 0？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T11:30:13.027

将 ItemsSource 绑定更改为：

```
ItemsSource="{Binding Path=SelectedItem.Lines, ElementName=listBox2}" 
```

当您在页面列表中选择一个页面时，便笺列表将正确更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T11:33:12.813

尝试将绑定设置为页面列表框中的选定项目：

```
<ListBox Height="80" x:Name="listBox3" ItemsSource="{Binding SelectedItem.Lines, ElementName=listBox2}" /> 
```

# java - Java 字符串数字准确度

> ID：10798148
> 
> 赞同：-5
> 
> 时间：2012-05-29T11:22:10.127
> 
> 标签：java, string, numbers

如何确定数字的准确性？我从给定的字符串值中获取数字准确性示例：1202222 -------->>>> 1.202.222。第一个值呈现到页面 1.202.222

使用数字精度

最好的，

BG

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T11:34:58.190

Integer.parse 将为您提供 32 位签名（大约 -4x10^9 到 4x10^9）。Long.parse 将为您提供 64 位签名（大约 -1x10^19 到 1x10^19）。BigInteger.parse 会给你无限的范围。仅当您确定需要处理大于 long 的数字时才使用 BigInteger，因为它要慢得多，并且使用 add() 之类的方法而不是 + 之类的运算符。你应该很少需要它。

# windows-ce - 我可以关闭 WinCE DHCP 服务器以使其始终使用 zeroconfig 吗？

> ID：10798154
> 
> 赞同：1
> 
> 时间：2012-05-29T11:22:28.570
> 
> 标签：windows-ce, dhcp, zeroconf

我们有一个旧版 WinCE 设备，它在封闭的以太网网络上运行良好多年。但是现在我们正试图让它与其他设备很好地工作，当网络上有 DHCP 服务器时它会失败。

问题是为了加快开机速度，原工程师在注册表中设置了“DhcpEnableImmediateAutoIP”。这有效地关闭了 WinCE 在确定没有 DHCP 服务器并执行 zeroconfig 之前等待一段时间的超时。但是因为它实际上并没有关闭 DHCP 请求，所以它使用 zeroconfig 分配一个 IP 地址，然后在几秒钟后从 DHCP 服务器获得第二个 IP 地址时搞砸了。

我可以看到“DhcpEnableImmediateAutoIP”是控制 DHCP 的几个键之一，所以我想知道如果我将“EnableDHCP”设置为 0 会发生什么？这会关闭 DHCP 请求，因此它只执行 zeroconfig，还是关闭 zeroconfig，因此它永远不会获得 IP 地址？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T18:46:06.967

我最终发现 EnableDHCP 会关闭 DHCP，然后假定静态 IP 设置（因此您需要提供 IP 地址、子网掩码和可选的网关/dns）。

以下是您可以设置的所有选项：http: [//msdn.microsoft.com/en-us/library/ms884977.aspx](http://msdn.microsoft.com/en-us/library/ms884977.aspx)

保留 DhcpEnableImmediateAutoIP，为 AutoInterval 设置可能的最高值：REG_DWORD 注册表项，它指定时间间隔（以秒为单位），用于验证 DHCP 服务器是否可用。该值在内部乘以 * 1000，以毫秒为单位，因此您可以设置的不换行的最大值对应于 ~49 天。如果设备始终处于开启状态，那么您将在那段时间之后结束，无论如何，一切都搞砸了......

最终的解决方案可能是克隆 DHCP 客户端 (D:\WINCE600\PRIVATE\WINCEOS\COMM\DHCP) 并对其进行修改以不发送发现数据包，例如以某种方式存根自动间隔计时器经过时定期调用的函数.

# php - 如何在magento中以编程方式更新自定义选项？

> ID：10798158
> 
> 赞同：2
> 
> 时间：2012-05-29T11:22:44.017
> 
> 标签：php, mysql, magento, magento-1.7, product

我有很多带有自定义选项的产品，现在我需要通过 csv 文件只更新自定义选项。那么我们如何以编程方式做到这一点呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T15:06:40.750

我找到了一种以编程方式更新自定义选项的解决方案

```
$product = Mage::getModel('catalog/product')->load($product_id);
$values = array();
foreach ($product->getOptions() as $o) {
           $p = $o->getValues();
        }
    }
  foreach($p as $v)
        {
            $values[$v->getId()]['option_type_id']= $v->getId();
                $values[$v->getId()]['title']= 'test';
                $values[$v->getId()]['price']= 23;
                $values[$v->getId()]['price_type']= 'fixed';
                $values[$v->getId()]['sku']= $value1;

          }
        $v->setValues($values);
        $v->saveValues();
$product->save(); 
```

希望这对仅更新自定义选项值的人有所帮助

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-23T08:43:23.253

我觉得这也很有用...

如果您是定制产品。

```
<?php

$magePath = 'app/Mage.php'; 

require_once $magePath;

Varien_Profiler::enable(); 

Mage::setIsDeveloperMode(true); 

ini_set('display_errors', 1);

umask(0);

Mage::app()->setCurrentStore(Mage_Core_Model_App::ADMIN_STORE_ID);

$product_ids = array(1,2,167);

$productmodel = Mage::getModel('catalog/product');

foreach ($product_ids as $product_id) { 

/**i use this two arrays for collecte value because i uses inside setData of 
current option*/

$cos=array();
$co=array();

$product = $productmodel->load($product_id);

$options = $product->getProductOptionsCollection();

if (isset($options)) { 

foreach ($options as $o) { 

$title = $o->getTitle();

/**
this block is for changing information of specific option from collection options inside
current product
the save method for this option in end of code
*/

if ($title == "Line 1/Front") { 

$o->setProduct($product); 

$o->setTitle("Line 1/Ftont"); 

$o->setType("drop_down"); 

$o->setIsRequire(1);

$o->setSortOrder(0);

}

/**
this block for update or add information of specific value inside current option
*/

$optionType = $o->getType(); 

//test type

if ($optionType == "drop_down") { 

//getting collection of value related to current option

$values = $o->getValuesCollection(); 

$found = false; 

foreach ($values as $k => $v) { 

//test existing of value for update

if (1 == preg_match("/said$/i", $v->getTitle())) { 

//update and save

$v->setTitle("morad")

->setSku("kk")

->setPriceType("fixed")

->setSortOrder(0)

->setPrice(floatval(13.0000));

$v->setOption($o)->save();

/**
this ligne is important i collecte all value required for normalize save function 
related to current option
*/

$cos[]=$v->toArray($co);

} 
} 

/**
create new value object you can use $option->getValueInstance() for working with 
getSingleton
*/

$value = Mage::getModel('catalog/product_option_value'); 

$value->setOption($o) 

->setTitle('valueiwant') 

->setSku("nn")

->setPriceType("fixed")

->setSortOrder(1)

->setPrice(12)

/**
this ligne is important (relation forigien key) for related this new value
to specific option
*/

->setOptionId($o->getId());

$value->save();

/**
this ligne is important i collecte all value required for normalize save function   
related to current option
*/

$cos[]=$value->toArray($co);
} 

$o->setData("values",$cos)->save();

//var_dump($cos);

}

}
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T14:20:13.850

您是否创建了一个模块来做到这一点？如果这样做，则必须使用 Magento 的 cron 系统并调用自定义模型的方法：

```
<config>
    <!--...-->
    <crontab>
        <jobs>
            <company_test>
                <schedule>
                    <cron_expr>0,15,30,45 * * * *</cron_expr>
                </schedule>
                <run>
                    <model>test/testmodel::testMethod</model>
                </run>
            </company_module>
        </jobs>
    </crontab>
</config> 
```

完成后，您可以使用 model 更新特定产品的选项`Mage_Catalog_Model_Product_Option`。我不知道 CSV 是如何制作的，但算法可以是这样的：

```
// foreach option
/** @var $opt Mage_Catalog_Model_Product_Option */
$opt = Mage::getModel('catalog/product_option');
$opt->setProduct($product);

$optionArray = array(
    'is_delete' => 0,
    'title' => 'Blabla',
    'previous_group' => '',
    'previous_type' => '',
    'type' => 'field',  //can be radio, drop_down, file, area...
    'is_require' => 0,
    'sort_order' => 42,
    'values' => array()
);

$opt->addOption($optionArray);
$opt->saveOptions();
// end foreach 
```

另请查看此链接：[http ://subesh.com.np/2009/12/adding-custom-options-product-magento/](http://subesh.com.np/2009/12/adding-custom-options-product-magento/)

# oracle - 循环遍历预定义的值

> ID：10798161
> 
> 赞同：30
> 
> 时间：2012-05-29T11:23:03.480
> 
> 标签：oracle, stored-procedures, for-loop, plsql

有没有办法在 oracle 中执行“for each”，如下所示：

```
begin
  for VAR in {1,2,5}
  loop
    dbms_output.put_line('The value: '||VAR);
  end loop;
end; 
```

我知道您可以执行以下操作：

```
begin
  for VAR in 1..5
  loop
    if VAR in(1,3,5) then
      dbms_output.put_line('The value: '||VAR);
    end if;
  end loop;
end; 
```

但是有没有更好的方法来做到这一点？定义一组值并遍历它们？

谢谢。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-05-29T11:37:27.230

你可以这样做，虽然可能不像你想要的那样光滑：

```
declare
  type nt_type is table of number;
  nt nt_type := nt_type (1, 3, 5);
begin
  for i in 1..nt.count loop
    dbms_output.put_line(nt(i));
  end loop;
end; 
```

如果在数据库中创建类型：

```
create type number_table is table of number; 
```

那么你可以这样做：

```
begin
  for r in (select column_value as var from table (number_table (1, 3, 5))) loop
    dbms_output.put_line(r.var);
  end loop;
end; 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2019-02-06T19:45:20.770

这来自 ABCade 对[当前接受的答案](https://stackoverflow.com/a/10798366/901641)的评论，但我发现它更干净，值得更多关注：

```
BEGIN
  FOR i IN (SELECT column_value FROM table(sys.dbms_debug_vc2coll(1, 3, 5))) LOOP
    dbms_output.put_line(i.column_value);
  END LOOP;
END; 
```

# wpf - WPF：Validation.ErrorTemplate 不显示

> ID：10798163
> 
> 赞同：5
> 
> 时间：2012-05-29T11:23:05.833
> 
> 标签：wpf, validation, mvvm, idataerrorinfo

我有一个用于在控件周围显示红色边框和错误消息的模板。它可以工作（在 TextBoxes 和 ComboBoxes 上测试）。但是在两个特定的组合框上却没有。
那么让我们看看VM中有什么不同：

*   因为我的基类中有通用的验证实现，所以没有改变
*   显示相同类型的异步加载数据，只需一个面板即可很好地进行验证

所以简而言之，*VM没有区别。*
视图完全一样，应用了相同的样式，所以总之*也没有区别*。

所以我添加`NotifyOnValidationError=True`了`ValidatesOnDataErrors=True`已经存在的内容，并订阅了`Validation.Error`......**它被解雇了**！然而模板仍然没有显示。***我没有想法，请建议我检查一下！***

编辑：进一步研究：

我已经反编译了 DataErrorValidationRule，并将其重新编译为 MyDataErrorValidationRule 以尽可能接近原始匹配。我删除了`ValidatesOnDataErrors=True`，并将我的 ValidationRule 添加到调试。它返回`new ValidationResult(false, (object)str);`包含正确错误消息的 str 两次 - 一次用于将属性设置为 null，一次用于强制验证整个对象。***模板仍未显示。***

我还检查了控件上的 Validation.GetErrorTemplate （在第一次触发 Validation.Error 时），它*不是 NULL*，所以它也不`DynamicResource`是失败的。

编辑：工作示例：

```
<ItemsControl ItemsSource="{Binding QuestionAnswers}">
                <ItemsControl.Resources>
                    <!-- ... -->
                    <DataTemplate DataType="{x:Type Model:QuestionAnswerModel}">
                        <StackPanel>
                                <!-- here is the combo box -->
                                <ComboBox Margin="8,4" Padding="8" MinWidth="120" HorizontalAlignment="Left" 
                                          Validation.ErrorTemplate="{DynamicResource DefaultValidationErrorTemplate}" 
                                          ItemsSource="{Binding Options.Source}"
                                          DisplayMemberPath="ItemName" SelectedValuePath="ItemID"
                                          SelectedValue="{Binding Options.SelectedID, ValidatesOnDataErrors=true}" />

                            </StackPanel>
                    </DataTemplate>
                </ItemsControl.Resources>
            </ItemsControl> 
```

非工作示例：

```
<ComboBox Margin="8,4" Padding="8" MinWidth="120" HorizontalAlignment="Left"
                          Validation.ErrorTemplate="{DynamicResource DefaultValidationErrorTemplate}"
                          SelectedItem="{Binding Type.SelectedItem, ValidatesOnDataErrors=True, NotifyOnValidationError=True}" Validation.Error="ComboBox_Error"
                          ItemsSource="{Binding Type.Source}"
                          DisplayMemberPath="Localized"
                          > 
```

它们来自*同一个 xaml 文件*，包含工作 ComboBox 的 ItemsControl 与非工作 ComboBox 在同一个网格中。

唯一的区别是 SelectedItem 或 SelectedValue 是否被绑定，但这不应该对*验证*有任何影响......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T11:44:16.640

即使事件正在触发，我也遇到了错误模板不显示的确切问题，并且永远无法弄清楚为什么它只发生在某些控件而不是其他控件上。

我最终找到的解决方法是将绑定设置为`ValidationStep`：`ConvertedProposedValue``ValidationRule`

```
<TextBox>
  <TextBox.Text>
    <Binding Path="MyField">
      <Binding.ValidationRules>
        <Validation:MyValidationRule ValidationStep="ConvertedProposedValue" Message="Please enter a value." />
      </Binding.ValidationRules>
    </Binding>
  </TextBox.Text>
</TextBox> 
```

无论如何，这似乎对我有用！

编辑：如果您使用的是 IDataErrorInfo，您可以尝试（尽管我没有亲自测试过）：

```
<Binding Path="MyField" ValidatesOnExceptions="True">
  <Binding.ValidationRules>
    <DataErrorValidationRule ValidationStep="ConvertedProposedValue" />
  </Binding.ValidationRules>
</Binding> 
```

即 remove `ValidatesOnDataErrors=True`，这只是包含单个的快捷方式`<DataErrorValidationRule />`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T12:24:40.337

我会检查以下内容：

*   检查您的组合框的数据上下文和绑定，如果它有效并且调用了 IDataErrorInfo（我假设您进行了 IDataErrorInfo 验证） - 下一步
*   将您的验证模板作为本地资源复制到您的 ComboBox.Resources 并检查它是否有效

不过，如果您发布您的验证模板、您的组合框 xaml 和您的 datacontext，那就太好了

# powershell - 检查远程计算机中的 WinRM 服务

> ID：10798167
> 
> 赞同：9
> 
> 时间：2012-05-29T11:23:29.367
> 
> 标签：powershell, .net-4.0, powershell-remoting, winrm

我看过很棒的文章
PowerShell 2.0 远程处理指南：第 8 部分 - 远程处理方案和故障排除
[http://www.ravichaganti.com/blog/?p=1181](http://www.ravichaganti.com/blog/?p=1181)

我有这个问题：我在域中有两台计算机，在网络中。

第一次测试确定：从域中的计算机远程连接到域中的计算机

**COMPANY_DOMAIN\desmonitor 是域用户。
域 COMPANY_DOMAIN
计算机：iis01**

> PS C:\Users\myUser> Enter-PSSession -Computername iisw01 -Credential COMPANY_DOMAIN\desmonitor
> [desiisw01]: PS C:\Users\desmonitor\Documents> 退出

第二次测试错误：：使用本地管理员用户从域中的计算机远程访问域中的计算机

**iis01\instalador 是机器 iis01
计算机的本地用户：iis01**

> PS C:\Users\myUser> Enter-PSSession -Computername iis01 -Credential iis01\instalador Enter-PSSession：连接到远程服务器失败，出现以下错误消息：WinRM 客户端无法处理请求。

在使用 COMPANY_DOMAIN\desmonitor 的终端服务器（远程桌面）的机器 ii01 中，我打开 PS 控制台并执行

> PS C:\Users\desmonitor> winrm quickconfig
> WinRM 已经设置为在这台机器上接收请求。
> WinRM 已经设置为在这台机器上进行远程管理。
> PS C:\Users\desmonitor>

然后，我再试一次，但我得到同样的错误：

> PS C:\Users\myUser> Enter-PSSession -Computername iis01 -Credential iis01\instalador Enter-PSSession：连接到远程服务器失败，出现以下错误消息：WinRM 客户端无法处理请求。

使用此命令：

> PS C:\Users\myUser> Set-Item WSMan:\localhost\Client\TrustedHosts -Value "*" -Force PS C:\Users\myUser>

现在，我可以访问：

> PS C:\Users\myUser> Enter-PSSession -Computername iis01 -Credential iis01\instalador [iiw01]: PS C:\Users\instalador\Documents> $Host

```
Name             : ServerRemoteHost
Version          : 1.0.0.0
InstanceId       : 6905896f-e6c7-4603-82f0-20183f71b1ec
UI               : System.Management.Automation.Internal.Host.InternalHostUserInterface
CurrentCulture   : es-ES
CurrentUICulture : es-ES
PrivateData      :
IsRunspacePushed :
Runspace         : 
```

在我公司，有很多电脑要连接到iis01。

每个计算都需要执行将远程计算机添加到本地计算机的受信任主机列表的命令？？

我有几个关于它的问题¿

如何在本地计算机中获取有关 TrustedHosts (WSMan:\LocalHost\Client) 的列表？
如何知道计算机中是否启用了 WinRM 服务？
如何知道 WinRM 服务是否在计算机中运行？
我如何知道 WinRM 是否设置为在计算机中接收请求？
我如何知道 WinRM 是否设置为在这台机器上进行远程管理？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-05-29T13:11:25.983

Q1。如何在本地计算机中获取有关 TrustedHosts (WSMan:\LocalHost\Client) 的列表？

```
Get-Item WSMan:\localhost\Client\TrustedHosts 
```

第二季度/第三季度。如何知道计算机中是否启用了 WinRM 服务？如何知道 WinRM 服务是否在计算机中运行？

```
Get-Service -ComputerName server01 -Name winrm | Select Status 
```

Q4。我如何知道 WinRM 是否设置为在计算机中接收请求？对此不太确定，但我会确认。一种查找方法是查看是否列出了客户端端口。但是，就像我说的，我可以证实这一点。

```
Get-ChildItem WSMan:\localhost\Client\DefaultPorts 
```

Q5。我如何知道 WinRM 是否设置为在这台机器上进行远程管理？

您应该能够列出听众。

```
Get-ChildItem WSMan:\localhost\Listener 
```

如果您在此处看不到任何内容，则表示您没有设置 WSMAN 传入连接。

# ruby-on-rails - 我们可以授予对应用程序的访问权限以在 facebook 的页面上发布内容吗？

> ID：10798169
> 
> 赞同：0
> 
> 时间：2012-05-29T11:23:40.227
> 
> 标签：ruby-on-rails, facebook-graph-api, koala, fb-graph

场景是我想在我从其他应用程序创建的 Facebook 页面上发布一些详细信息。所以想知道我们如何通过访问令牌授予对应用程序的访问权限意味着我们如何获得访问令牌？

谢谢问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T11:42:21.457

是的，请查看以下 URL 和*“页面访问令牌”*部分，了解有关如何获取令牌的信息。

[API - 获取页面令牌](https://developers.facebook.com/docs/reference/api/page/)

但是请注意，如果您打算在帖子中定义自己的链接，则在尝试使用**链接api 点时存在一个已知问题。**

[错误报告](https://developers.facebook.com/bugs/230178987060765)

您可能希望改用**feed** API 点。不过，我实际上还没有设法让这个工作，我正在等待 FB 自己的反馈。如果/当我听到有用的信息时，我会更新你。

祝你好运。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-29T11:53:42.067

您可以`access_token`通过启用`manage_pages`权限获取您的页面，然后调用 API 端点：`/me/accounts`获取`access_token`您管理的所有页面的。

然后，您可以使用此访问令牌通过 Graph API 调用发布到您的页面：`/{page_id}/feed`

# ssis - 可以在 SSIS 中实现运行总和，而无需任何手动编码吗？

> ID：10798177
> 
> 赞同：2
> 
> 时间：2012-05-29T11:24:19.270
> 
> 标签：ssis, etl, cumulative-sum

我有一个必须运行总计的场景，我可以通过纯 T-SQL 或脚本任务来实现这一点。但我想避免手动编码，并使用 ETL 工具功能。是否可能以及如何。

我有表余额

```
SELECT '00000001' AS [AccountNo], CONVERT(date,'20080828') AS [Date],10 AS [DailyMovement]
INTO   balances
UNION  ALL
SELECT '00000001' AS [AccountNo], CONVERT(date,'20080829') AS [Date],5 AS [DailyMovement]
UNION  ALL
SELECT '00000001' AS [AccountNo], CONVERT(date,'20080830') AS [Date],7 AS [DailyMovement]
UNION  ALL
SELECT '00000002' AS [AccountNo], CONVERT(date,'20080828') AS [Date],8 AS [DailyMovement]
UNION  ALL
SELECT '00000002' AS [AccountNo], CONVERT(date,'20080829') AS [Date],6 AS [DailyMovement] 
```

我得到了这样的结果。

```
SELECT b1.[AccountNo]
,      b1.[Date]
,      b1.[DailyMovement]
,      SUM(b2.[DailyMovement]) AS [RunningTotal]
FROM   balances b1
INNER  JOIN balances b2 ON  b1.[AccountNo] = b2.[AccountNo]
                           AND b1.[Date] >= b2.[Date]
GROUP  BY b1.[AccountNo],b1.[Date],b1.[DailyMovement]; 
```

想在 SSIS 中执行此操作而无需手动编码

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T13:39:23.897

您是否尝试添加查询

```
SELECT b1.[AccountNo]
,      b1.[Date]
,      b1.[DailyMovement]
,      SUM(b2.[DailyMovement]) AS [RunningTotal]
FROM   balances b1
INNER  JOIN balances b2 ON  b1.[AccountNo] = b2.[AccountNo]
                           AND b1.[Date] >= b2.[Date]
GROUP  BY b1.[AccountNo],b1.[Date],b1.[DailyMovement]; 
```

到 oledbsource 以将其用作 Source，然后直接将其指向 oledbdestination？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T19:47:20.013

没有。不是没有手工编码的东西。我发现运行总计的最佳选择是 Jeff Moden 在[SQLServerCentral的这篇文章](http://www.sqlservercentral.com/articles/T-SQL/68467/)

# c# - 在 C# 中处理 COM 异常的警告

> ID：10798180
> 
> 赞同：0
> 
> 时间：2012-05-29T11:24:28.063
> 
> 标签：c#

当我尝试从 com 异常中获取 HRESULT 的值时收到警告，我怀疑这是否不是在 C# 中处理 COM 异常的正确方法，请告知代码如下所示。

```
try
{
 ...                      
}
catch (System.Runtime.InteropServices.COMException comex)
{
 // Warning 8   Comparison to integral constant is useless; the constant is outside the range of type 'int'

 if (comex.ErrorCode == Constants.E_FAIL)
 {

 }  

} 
```

E_FAIL 定义为

```
public const UInt32 E_FAIL = 0x80004005; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T11:37:05.710

`Exception.HResult`可以说，定义as`UInt32`而不是`Int32`aka与 Win32 API 更一致`int`。

可能这没有完成，因为 UInt32 不符合 CLS。

我建议您将常量定义为 int：

```
public const int E_FAIL = unchecked((int)0x80004005); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T11:27:31.127

`comex.ErrorCode`是一个 Int32（请参见[此处](http://msdn.microsoft.com/it-it/library/system.runtime.interopservices.externalexception.errorcode.aspx)）并且您`Constants.E_FAIL`超出了 Int32 限制（`Int32.MaxValue`= 7FFFFFFF）。

我看到您正在将 Int32 与 UInt32 进行比较：您应该在比较之前转换后者...
例如，您可以使用

```
if (comex.ErrorCode == unchecked((int)Constants.E_FAIL)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T11:37:26.137

你可以这样做：

```
if (comex.ErrorCode == unchecked((int)Constants.E_FAIL))
{
    // do stuff
} 
```

但是请注意，您可能永远不会看到一些错误代码，因为它们被映射到[特定异常](http://msdn.microsoft.com/en-us/library/9ztbc5s1.aspx)，尽管它看起来不像`E_FAIL`是其中之一。

# visual-c++ - 错误处理失败

> ID：10798182
> 
> 赞同：0
> 
> 时间：2012-05-29T11:24:35.443
> 
> 标签：visual-c++

我是新手程序员，正在努力学习。我一直在尝试使用结构做一个库程序，并创建了以下函数。添加新客户，查找客户数量，打印客户详细信息，借书，预订书，还书

我失败的是；当我添加一个新客户时，我的程序要求提供姓名、地址和 ID，并且我希望我的程序在我尝试使用现有 ID 注册新客户时给出错误消息，我还将发布我的代码。

我不是要你提供代码，我只是想知道我做错了什么以及如何解决它，任何提示将不胜感激谢谢

我的代码：

```
 #include <iostream>
    using namespace std;

    const int maxx=100;             //max 100 users
    const int maxborrow=5;          //maxx borrow books
    int bi=0;                       //counter for books
    int i=0;                        //counter for users
    int number_of_customers=0;

        //initialize numebr of users to 0

struct loanreserved
{
    int loan;               // 1 indicates true 0 indicates false  if a book is reserved for example it's 1 if available 0
    int reserved;
};

struct duedate
{
    int day;
    int month;
    int year;
};

struct bookinf
{
    char title[maxx];
    char author[maxx];
    int ISBN;

    loanreserved loanorreserved;

    duedate bookduedate;

};

struct userinf
{
    char name[maxx];
    char address[maxx];
    int Id;
    int number_of_reserved_books;
    int number_of_loan_books;
    bookinf customersbookinf[maxborrow];
};

 userinf uniclibrary[maxx];

 int readcustomer()
 {      
     int uniqueid;
     cout<<"Customer name: ";
     cin>>uniclibrary[i].name;

     cout<<"Customer address: ";
     cin>>uniclibrary[i].address;

     cout<<"Customer Id: ";
     cin>>uniqueid;             //save id to temp file;

     for(int x=0;x<maxx;x++)
     {
        if(uniqueid!=uniclibrary[x].Id)
        {
            uniclibrary[i].Id=uniqueid;
            cout<<"Customer registration succeeded ! \n";
            number_of_customers++;
            return 1;           //success

        }

     }

     cout<<"This user is already registered ! ";
     return 0;                  //fail

     system("pause");
     system("cls"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T11:30:51.557

You can have a `static` variable that keeps track of existing customers:

```
#include <set>

int readcustomer()
{      
   static std::set<std::string> existingNames;

   std::string name;
   cout<<"Customer name: ";
   cin>>name;

   if ( existingNames.find(name) != existingNames.end() )
   {
      //name already exists
      return 0;
   }
   else
   {
      existingNames.insert(name);
   }

   //....
} 
```

Of course, this is a quick fix. Better take your code to codereview. The're MUCH that can be improved.

# jenkins - Jenkins(Hudson)：如何设置镜像 CI 实例，它可以交替构建

> ID：10798184
> 
> 赞同：1
> 
> 时间：2012-05-29T11:24:49.080
> 
> 标签：jenkins

我正在寻找使用 Jenkins 设置 CI 的替代实例的方法，这样一个实例始终可用于测试，而另一个实例则在刷新最新的更改。

目前我只有一个实例，并且在重新构建时有相当长的停机时间。有没有人尝试设置交替 CI ？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T11:43:09.103

您是否尝试过让您的主构建调用设置为在不同的从属服务器上运行的测试构建？您可以通过转到作业配置并选中“限制此项目可以运行的位置”框来将作业绑定到从属计算机。它会询问你要绑定的奴隶的名字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-23T07:59:31.753

通过拥有两个不同的主从组合和一个在这两个设置之间交替的自定义 shell 脚本解决了这个问题。找不到任何其他选择，但这对我有用。

# data-binding - 如何将数据绑定到子视图模型？

> ID：10798186
> 
> 赞同：2
> 
> 时间：2012-05-29T11:24:50.577
> 
> 标签：data-binding, mvvm, zk

我有一个包含两个不同视图模型的页面：

```
<?page title="My page" contentType="text/html;charset=UTF-8"?>
<div apply="org.zkoss.bind.BindComposer"
viewModel="@id('vm') @init('com.mycompany.FirstViewModel')">
<!-- A lot of unimportant stuff -->
<tabbox>
    <tabs>
        <tab label="Tab1" ></tab>
                    <!-- Other unimportant tabs -->
    </tabs>
    <tabpanels>
        <tabpanel>
        <include src="inc/other.zul" p="@ref(vm.selected)" pid="@ref(vm.selected.id)" ></include>
        </tabpanel>
    </tabpanels>
</tabbox>
</div> 
```

包括：

```
<window>
    <label id="sid" value="@load(pid)" />
    <div apply="org.zkoss.bind.BindComposer"
      viewModel="@id('vms') @init('com.mycompany.SecondViewModel')">
        <listbox model="@id('vars') @load(p.someList)"
            selectedItem="@bind(vms.selected)"
            emptyMessage="No data in list">
                    <!-- Template and stuff -->
        </listbox>
        <label id="sid1" value="@load(pid)" />
    </div>
</window> 
```

问题是，一旦我定义了第二个 viewModel，所有外部引用都无法访问：我有第一个标签的值，但我没有列表框或第二个标签的值。有没有办法做到这一点？我尝试这样做没有成功：

```
<div apply="org.zkoss.bind.BindComposer"
viewModel="@id('vms') @init('com.mycompany.SecondViewModel')" list="@ref(p.someList)">
<listbox model="@id('vars') @load(list)"
    selectedItem="@bind(vms.selected)"
    emptyMessage="No data in list"> 
```

我可以将第二个视图模型合并到第一个视图模型中，但这不是很方便！我也对其他允许我采用模块化方法的解决方案持开放态度。

我的 ZK 版本是 6.0.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T06:04:34.260

您无法访问外部组件的原因是您的作曲家，即 BindComposer，您对 Main zul 和 Included zul 具有相同的作曲家。您需要从外部 ZUL 访问 Included Listbox。所以删除 Include ZUL 的 Composer，给窗口一个 ID，你有两个空间所有者访问内部列表框

```
<?page title="My page" contentType="text/html;charset=UTF-8"?>
<div apply="org.zkoss.bind.BindComposer"
viewModel="@id('vm') @init('com.mycompany.FirstViewModel')">
<!-- A lot of unimportant stuff -->
<tabbox>
    <tabs>
        <tab label="Tab1" ></tab>
                    <!-- Other unimportant tabs -->
    </tabs>
    <tabpanels>
        <tabpanel>
        <include id="include" src="inc/other.zul" p="@ref(vm.selected)" pid="@ref(vm.selected.id)" ></include>
        </tabpanel>
    </tabpanels>
</tabbox>
</div>

<window id="win">
    <label id="sid" value="@load(pid)" />
    <div 
      viewModel="@id('vms') @init('com.mycompany.SecondViewModel')">
        <listbox id="listbox2" model="@id('vars') @load(p.someList)"
            selectedItem="@bind(vms.selected)"
            emptyMessage="No data in list">
                    <!-- Template and stuff -->
        </listbox>
        <label id="sid1" value="@load(pid)" />
    </div>
</window> 
```

现在，在您的 BindComposer 中访问时，将变量声明为 public ：

```
Listbox include$win$listbox2; 
```

在你的 doAfterCompose() 添加这一行

```
Sysout("You can access your inner Listbox and it is:"+include$win$listbox2); 
```

现在你看到你不会让你的列表框为空！！

链接：http: [//books.zkoss.org/wiki/ZK_Developer's_Reference/UI_Composing/ID_Space](http://books.zkoss.org/wiki/ZK_Developer%27s_Reference/UI_Composing/ID_Space)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T22:29:26.190

它实际上是（曾经）ZK 中的一个[错误](http://tracker.zkoss.org/browse/ZK-1165)，已在未来版本中修复。

# c++ - 身份验证标头在 ONVIF 请求中不起作用？

> ID：10798187
> 
> 赞同：0
> 
> 时间：2012-05-29T11:24:56.327
> 
> 标签：c++, c, xml, soap, onvif

我正在用 C 编写一个 API，用于使用 ONVIF 对用户进行身份验证。我编写了一些代码来制作身份验证标头。但是当我发送这些标头时，他的服务器响应“无法验证或授权安全令牌”

```
unsigned int nonce_int = 0, i = 0;
  time_t utcTime = 0;
  struct tm *timeInfo = NULL;
  char sha1_input[100] = { 0 }, sha1_input1[100] = { 0 };
  SHA1Context sha = { 0 };

  nonce_int = GetRandomNumber();
  encode_base64(sizeof(nonce_int), (char*)&nonce_int, nonceLen, noncestr);

  utcTime = time(NULL);
  timeInfo = localtime(&utcTime);
  strftime(timestr, timeLen, "%Y-%m-%dT%H:%M:%SZ", timeInfo);
  printf("\nTime in String Format = %s", timestr);

  sprintf(sha1_input, "%d+%d+%s", nonce_int, utcTime, password);
  strcpy(sha1_input1, sha1_input);

  SHA1Reset(&sha);
  SHA1Input(&sha, (const unsigned char*)sha1_input, strlen(sha1_input));

  if(!SHA1Result(&sha))
  {
    printf("\nERROR-- could not compute message digest");
  }
  else
  {
    memset(sha1_input, 0x00, sizeof(sha1_input));
    /*sprintf(sha1_input, "%X%X%X%X%X", sha.Message_Digest[0], sha.Message_Digest[1],
      sha.Message_Digest[2], sha.Message_Digest[3], sha.Message_Digest[4]);*/

    sprintf(sha1_input, "%u%u%u%u%u", sha.Message_Digest[0], sha.Message_Digest[1],
      sha.Message_Digest[2], sha.Message_Digest[3], sha.Message_Digest[4]);

    printf("\nSHA1 Digest = %s", sha1_input);
    encode_base64(strlen(sha1_input), sha1_input, digestLen, digeststr);
    printf("\nSHA1 Digest Base64 Encoded = %s", digeststr);
  } 
```

之后，我使用 POST 方法在 HTTP 上发送了这个请求。

```
snprintf(postData, sizeof(postData),
      "<?xml version=\"1.0\" encoding=\"utf-8\"?>" 
      "<SOAP-ENV:Envelope xmlns:SOAP-ENV=\"http://www.w3.org/2003/05/soap-envelope\"" 
      "xmlns:wsse=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401"
      "-wss-wssecurity-secext-1.0.xsd\""  
      "xmlns:wsu=\"http://docs.oasis-open.org/wss/2004/01/oasis-"
      "200401-wss-wssecurity-utility-1.0.xsd\""  
      "xmlns:tds=\"http://www.onvif.org/ver20/ptz/wsdl\">" 
      "<SOAP-ENV:Header><wsse:Security><wsse:UsernameToken>" 
      "<wsse:Username>%s</wsse:Username>" 
      "<wsse:Password Type=\"http://docs.oasis-open.org/wss/2004/01/oasis-"
      "200401-wss-username-token-profile-1.0#PasswordDigest\">"
          "%s</wsse:Password><wsse:Nonce>%s</wsse:Nonce>" 
      "<wsu:Created>%s</wsu:Created></wsse:UsernameToken>"
      "</wsse:Security></SOAP-ENV:Header><SOAP-ENV:Body>" 
      "<tds:GetNodes>" 
      "</SOAP-ENV:Body></SOAP-ENV:Envelope>", 
      username, base64EncDigest, nonce_char, time_char); 
```

回复：

```
<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope  xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope" 
                    xmlns:SOAP-ENC="http://www.w3.org/2003/05/soap-encoding" 
                    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
                    xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
                    xmlns:wsa5="http://www.w3.org/2005/08/addressing" 
                    xmlns:c14n="http://www.w3.org/2001/10/xml-exc-c14n#" 
                    xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" 
                    xmlns:ds="http://www.w3.org/2000/09/xmldsig#" 
                    xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" 
                    xmlns:ptzimg2="http://www.onvif.org/ver10/schema" 
                    xmlns:ptzimg3="http://www.w3.org/2005/05/xmlmime" 
                    xmlns:ptzimg4="http://docs.oasis-open.org/wsn/b-2" 
                    xmlns:ptzimg5="http://docs.oasis-open.org/wsrf/bf-2" 
                    xmlns:ptzimg6="http://docs.oasis-open.org/wsn/t-1" 
                    xmlns:ptzimg1="http://www.onvif.org/ver20/ptz/wsdl" 
                    xmlns:ptzimg7="http://www.onvif.org/ver20/imaging/wsdl" 
                    xmlns:ter="http://www.onvif.org/ver10/error">

    <SOAP-ENV:Header></SOAP-ENV:Header>
    <SOAP-ENV:Body>
        <SOAP-ENV:Fault>
            <SOAP-ENV:Code>
                <SOAP-ENV:Value>
                    SOAP-ENV:Sender
                </SOAP-ENV:Value>
                <SOAP-ENV:Subcode>
                    <SOAP-ENV:Value>
                        wsse:FailedAuthentication
                    </SOAP-ENV:Value>
                </SOAP-ENV:Subcode>
            </SOAP-ENV:Code>
            <SOAP-ENV:Reason>
                <SOAP-ENV:Text xml:lang="en">
                    The security token could not be authenticated or authorized
                </SOAP-ENV:Text>
            </SOAP-ENV:Reason>
            <SOAP-ENV:Node>
                http://www.w3.org/2003/05/soap-envelope/node/ultimateReceiver
            </SOAP-ENV:Node>
            <SOAP-ENV:Role>
                http://www.w3.org/2003/05/soap-envelope/role/ultimateReceiver
            </SOAP-ENV:Role>
            <SOAP-ENV:Detail></SOAP-ENV:Detail>
        </SOAP-ENV:Fault>
    </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

我做错什么了吗？特别是在创建摘要时？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T06:07:28.070

检查设备时间。假设您正在生成正确的密码摘要，则设备具有不同的时间可能是问题，然后您用来签署您的请求，然后密码摘要可能会像过期一样。

# iphone - iPhone Quartz - 从其他类调用绘图方法

> ID：10798188
> 
> 赞同：0
> 
> 时间：2012-05-29T11:25:02.093
> 
> 标签：iphone, ios, objective-c, quartz-graphics, quartz-2d

我试图从`Class A`例如位于的方法调用绘图方法`Class B`，正在调用该方法但没有绘图发生。

```
- (void)drawIt
{
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextSetFillColorWithColor(context, [UIColor whiteColor].CGColor);

    NSString *string = [NSString stringWithString:@"TEXT"];
    [string drawAtPoint:CGPointMake(12, 51) withFont:[UIFont fontWithName:@"Helvetica" size:35.0f]];
} 
```

为什么我可以从其他类调用这个方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T11:43:41.927

首先创建类' `YourView`'，它是 UIView 的子类。编写`viewDidLoad`B类中的分配代码方法

```
- (void)viewDidLoad{
 YourView *temp = [[YourView alloc] initWithFrame:CGRectMake(0, 0, 100, 100)];
    [self.view addSubview:temp];
} 
```

`- (void)drawRect:(CGRect)rect`在 YourView.m 中实现方法

```
- (void)drawRect:(CGRect)rect
{
CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextSetFillColorWithColor(context, [UIColor whiteColor].CGColor);
    NSString *string = [NSString stringWithString:@"TEXT"];
    [string drawAtPoint:CGPointMake(12, 51) withFont:[UIFont fontWithName:@"Helvetica" size:35.0f]];
} 
```

我想这会对你有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T11:31:32.360

If you are using a UIView or some subclass you need to overload the drawRect method. So, inside drawRect you call your method in other class. Also, you can pass your context via parameter too.

# c# - 创建子项目时，Visual Studio 中的空白解决方案被覆盖

> ID：10798191
> 
> 赞同：1
> 
> 时间：2012-05-29T11:25:25.430
> 
> 标签：c#, visual-studio-2010, visual-studio

好的，我必须这样做一千次，但今天它已经停止工作了。

我创建了一个新的空白解决方案。然后我右键单击那个**Add** > **New Project**我选择 C# 类库。每次我过去这样做时，它都会创建一个嵌套的子项目。但是，现在似乎决定更改它，以便我现在处于我刚刚创建的项目中，因此我无法创建任何兄弟姐妹。

我没有进行任何我记得的配置更改，并且我之前创建的项目按预期工作，我可以在其中创建子项目。

这真的让我很难过，所以任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T11:28:59.513

在 Visual Studio 工具/选项/项目和解决方案中 - 确保选中“始终显示解决方案”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T11:29:51.767

选中此复选框：工具 -> 选项 -> 项目和解决方案 -> 始终显示解决方案

# python - 从其他包导入 python 模块时遇到问题（pycharm 给出未解决的参考）

> ID：10798195
> 
> 赞同：6
> 
> 时间：2012-05-29T11:25:47.630
> 
> 标签：python, import, package, importerror, pycharm

我不知道 pycharm 是否与问题有关，或者我是菜鸟。

这是我的文件夹布局和三个代码文件的屏幕截图：

![截屏](../Images/e1c8d19399d6ce45cd180f257c7b9bcf.png)

我在 Windows 上使用 Pycharm，“my_working_directory”是我的工作目录。您可以在屏幕截图中看到 mod1.py 中“来自 package2.mod2”的下划线表示“未解析的引用”。

当我尝试运行 mod1.py 时，我得到：

```
C:\Python27\python.exe C:/Users/Robert/PycharmProjects/play/my_working_directory/package1/mod1.py
Traceback (most recent call last):
  File "C:/Users/Robert/PycharmProjects/play/my_working_directory/package1/mod1.py", line 1, in <module>
    from package2.mod2 import SomeClass
ImportError: No module named package2.mod2 
```

当我运行 main.py 时，我得到：

```
C:\Python27\python.exe C:/Users/Robert/PycharmProjects/play/my_working_directory/main.py
hi 
```

我不明白为什么一个有效，而另一个无效。

主要问题是pycharm没有给我自动完成功能，并且从mod1它无法检测到package2。这是一个大问题，因为 package1 是我的视图包，package2 是我的模型或 utils 或 lib 包（在大型模型视图控制器中）。（例如[https://github.com/coto/gae-boilerplate/blob/master/web/handlers.py](https://github.com/coto/gae-boilerplate/blob/master/web/handlers.py) pycharm 没有检测到任何 from lib.? import ? 语句。（给出未解决的参考）。

有谁知道发生了什么？这是导入包的最佳方式吗？我应该期望能够自动完成吗？

**是否应该通过制作另一个init** .py 文件将“my_working_directory”制作成一个包？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T11:41:55.627

可能是 C:/Users/Robert/PycharmProjects/play 不在您的`%PYTHON_PATH%`

# joomla - Joomla 中的数据库？

> ID：10798201
> 
> 赞同：-5
> 
> 时间：2012-05-29T11:26:16.460
> 
> 标签：joomla

我们将程序放在 joomla 文章中，config.php 位于目录/images/php/config.php

我有 2 个要包含在 joomla 中的 php 页面（pond.php 和 p_pond.php），pond.php 有一个提交按钮，但是当单击提交按钮时，它没有连接到数据库，也没有转到 p_pond .php 页面

页面加载时如何连接数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T04:19:46.580

使用 JUMI 组件使用你的个人 PHP 页面并查看此[页面进行数据库连接](http://docs.joomla.org/How_to_use_the_database_classes_in_your_script#Tips.2C_Tricks_.26_FAQ)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T10:38:10.820

Joomla 在 MVC 上工作，所以你应该遵循 MVC 规则。要显示页面，您需要制作一个组件。阅读 joomla 文档以制作组件这里是链接[http://docs.joomla.org/Developing_a_Model-View-Controller_Component/1.5/Introduction](http://docs.joomla.org/Developing_a_Model-View-Controller_Component/1.5/Introduction)

# sql-server - Sql 触发器在给定时间段内更新列值

> ID：10798206
> 
> 赞同：0
> 
> 时间：2012-05-29T11:26:24.507
> 
> 标签：sql-server, triggers

我有一个名为 Settings 的表，其中包含 columnA、columnB、columnC、columnD、columnE 及其值，如下所示：

列A = 1000 列B = 100 列C = 200 列D = 18 列E = 6

当时间在晚上 18 点到早上 6 点之间时，我想更改列 A/B/C 中的值。

我正在考虑某种通过查看时间戳来更新值的触发器，但我只是不知道该怎么做。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T12:51:57.303

如果您可以控制读取表格的应用程序，那么您是否可以创建一个视图来检查时间并返回您需要的值？

就像是：

```
SELECT 
  [COLUMN1],
  CASE 
    WHEN DATEPART("hh", GETDATE()) BETWEEN 6 AND 14 THEN 1
    ELSE [COLUMN2] END AS [COLUMN2],
  [COLUMN3]
FROM [TABLE1] 
```

**编辑：**

如果您通过应用程序中构建的 SQL 查询表，您可以更改 SQL 查询以使用`CASE`上述内容返回这些值：

```
CASE 
    WHEN DATEPART("hh", GETDATE()) BETWEEN 6 AND 14 THEN 1
    ELSE [COLUMN2] END AS [COLUMN2], 
```

# java - Commons CLI 所需的组

> ID：10798208
> 
> 赞同：30
> 
> 时间：2012-05-29T11:26:28.753
> 
> 标签：java, command-line-interface, apache-commons, apache-commons-cli

我正在用 Java 编写命令行应用程序，并且我选择了 Apache Commons CLI 来解析输入参数。

假设我有**两个必需的选项**（即 -input 和 -output）。我创建新的 Option 对象并设置所需的标志。现在一切都很好。但我有**第三个，不是必需的选项**，即。-帮助。使用我提到的设置，当用户想要显示帮助（使用 -help 选项）时，它会说“-input and -output”是必需的。有什么方法可以实现这个（通过 Commons CLI API，而不是简单的 if (!hasOption) throw new XXXException()）。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-05-29T12:02:22.870

在这种情况下，您必须定义两组选项并解析命令行两次。第一组选项包含所需组之前的选项（通常是`--help`and `--version`），第二组包含所有选项。

您首先解析第一组选项，如果没有找到匹配项，则继续使用第二组。

这是一个例子：

```
Options options1 = new Options();
options1.add(OptionsBuilder.withLongOpt("help").create("h"));
options1.add(OptionsBuilder.withLongOpt("version").create());

// this parses the command line but doesn't throw an exception on unknown options
CommandLine cl = new DefaultParser().parse(options1, args, true);

if (!cl.getOptions().isEmpty()) {

    // print the help or the version there.

} else {
    OptionGroup group = new OptionGroup();
    group.add(OptionsBuilder.withLongOpt("input").hasArg().create("i"));
    group.add(OptionsBuilder.withLongOpt("output").hasArg().create("o"));
    group.setRequired(true);

    Options options2 = new Options();
    options2.addOptionGroup(group);

    // add more options there.

    try {
        cl = new DefaultParser().parse(options2, args);

        // do something useful here.

    } catch (ParseException e) {
        // print a meaningful error message here.
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-06T10:49:59.483

commons-cli 库有一个流利的包装器：[https ://github.com/bogdanovmn/java-cmdline-app](https://github.com/bogdanovmn/java-cmdline-app)

帮助选项是内置的。还有一些方便的功能。例如，如果您必须指定以下两个选项之一：

```
new CmdLineAppBuilder(args)
// Optional argument
.withArg("input", "input description")
.withArg("output", "output description")

// "input" or "output" must be specified
.withAtLeastOneRequiredOption("input", "output")

.withEntryPoint(
    cmdLine -> {
        ...
    }
).build().run(); 
```

# python - 带有 Python 诅咒的回调

> ID：10798211
> 
> 赞同：3
> 
> 时间：2012-05-29T11:26:40.357
> 
> 标签：python, callback, curses

我的代码如下所示：

```
stdscr.nodelay(1)
while True:
    c = stdscr.getch()
    if c != -1:
        stdscr.addstr("%s was pressed\n" % c)
    if time() - last > 1:
        stdscr.addstr("time() == %s\n" % str(time()))
        last = time() 
```

但是，我担心我的代码真的很浪费/效率低下。是否有可用于诅咒的回调机制？如果不是，那么处理这种情况的规范方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T11:55:44.170

你可以试试[Urwid](http://excess.org/urwid/)。

Urwid 在 curses 之上提供了一个更高级别的工具包，并包括一个事件循环来处理键盘和鼠标输入。它要么使用自己的基于选择的事件循环，要么可以挂接到 gevent 或 Twisted。

除了有效地处理键盘输入之外，您还可以使用许多选项来处理带有编辑框、列表控件等的用户输入。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T12:02:40.597

使用半延迟模式使 getch() 阻塞怎么样？

```
import time
import curses

stdscr = curses.initscr()
curses.halfdelay(10) # 10/10 = 1[s] inteval

try:
    while True:
        c = stdscr.getch()
        if c != -1:
            stdscr.addstr("%s was pressed\n" % c)
        stdscr.addstr("time() == %s\n" % time.time())
finally:
    curses.endwin() 
```

# ios - 如何将 UISwitch 嵌入到静态 UITableView 中？

> ID：10798212
> 
> 赞同：8
> 
> 时间：2012-05-29T11:26:45.273
> 
> 标签：ios, uitableview, uikit, uiswitch

我看到了这个问题：

[UITableView 单元格中的 UISwitch](https://stackoverflow.com/questions/3770019/uiswitch-in-a-uitableview-cell)

但它似乎正在处理一个动态页面。我真的只是想为我的应用程序和表格中的一些单元格（不是全部）创建一个设置页面，需要在表格单元格上进行开关。我怎么能这样做？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2015-08-07T09:32:16.393

这是它在 Interface Builder 中的工作方式。无需代码。

*   将 UISwitch 拖到您的视图控制器中。它需要在主视图之外。有点只是在那儿放松一下，还有其他一些事情。

*   Ctrl-单击应该具有此开关的表视图单元格，然后拖动到新开关。见[1](https://i.stack.imgur.com/Cahmk.png)。 [![在此处输入图像描述](../Images/d0138beca13d11150e37225cdaa74c36.png)](https://i.stack.imgur.com/Cahmk.png)

*   将开关连接到表格视图单元的附件视图插座。见[2](https://i.stack.imgur.com/lZoiQ.png)。 [![在此处输入图像描述](../Images/1347eb1619bccf374bf05a7fd9f372e6.png)](https://i.stack.imgur.com/lZoiQ.png)

*运行应用程序并观察开关出现在表格中 - 完成！*

注意：这个开关奇怪地没有出现在界面生成器中。但它会在您运行应用程序时显示

如果您还想将它连接到一个实例变量 - 例如，以便您稍后可以读取它的“on”属性 - 将它连接到一个插座，就像您连接任何其他视图[3](https://i.stack.imgur.com/m0Gut.png)、[4](https://i.stack.imgur.com/LeZlf.png)一样。

[![在此处输入图像描述](../Images/9ce5abdb03528978099a706c95e3f28c.png)](https://i.stack.imgur.com/m0Gut.png) [![在此处输入图像描述](../Images/6babc304df4b2cefdba9f9f938c9b0c0.png)](https://i.stack.imgur.com/LeZlf.png)

PS：请记住，UISwitch 的开/关状态是在它的“on”属性中，而不是“selected”。我只是添加这个，因为它有点令人困惑。

PPS：对不起，我在视网膜屏幕上。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-29T11:30:30.393

只需将 UISwitch 拖到您布置的单元格上。然后，您可以使用助手编辑器（非常棒）将其连接到父类。我会给你一个提示，如果您计划几个外观相似的单元格，请在该部分中创建第一个并将其布置得恰到好处，然后您可以增加该部分中的行数，IB 将创建副本为您现有的行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-29T12:32:43.047

我为这种情况创建了一个函数，它对我很有用.. 尝试一下，首先在单元格创建中，您可以检查要添加的行`UISwitch`，例如。

```
 if(indexPath.row == 0)
      [self createOnOffView:cell withTitle:@"Somthing"  withTag:1001 defaultVal:YES]; 
```

功能是：

```
- (void) createOnOffView:(UITableViewCell*) cell withTitle:(NSString*) title withTag:(int)tag defaultVal:(BOOL) defaultVal
{
    CGRect rect;

    cell.textLabel.text = title;
    cell.selectionStyle = UITableViewCellSelectionStyleNone;

    rect = cell.contentView.frame;

    if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
        rect.origin.x = cell.frame.size.width - 20;
    else
        rect.origin.x = rect.size.width/2 +35;

    rect.origin.y = rect.size.height/2 - 15;    
    rect.size.width = 60;    

    UISwitch *switchView = [[UISwitch alloc] initWithFrame:rect];
    [cell.contentView addSubview:switchView];
    [switchView addTarget:self action:@selector(didChangeSwitch:) forControlEvents:UIControlEventValueChanged];

    switchView.tag = tag;

    [switchView setOn:defaultVal];

    [switchView release];
} 
```

当值是 switch 改变时，这个方法将被触发..所以你可以根据标签知道哪个开关

```
- (void) didChangeSwitch:(UISwitch*)switchView
{
    if(switchView.tag == 1001)
    {
       //Do Somthing
    }

    if(switchView.tag == 1002)
    {
        //Do Somthing
    }    
} 
```

希望这会有所帮助:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T11:31:38.503

您的操作方式与您在链接到的问题中的操作方式完全相同。没有“动态”表这样的东西。该表仅显示您的模型。您的模型可能是动态的，但 tableview 不是。无论哪种方式，按照该问题的答案，您将在您的表格视图中进行切换。

# jquery - 如何在移动应用中管理页面视图？

> ID：10798213
> 
> 赞同：-1
> 
> 时间：2012-05-29T11:26:47.880
> 
> 标签：jquery, html, css, mobile

我想知道一些关于如何管理或设计移动应用程序页面的建议，以使其适合纵向和横向方向。如果发生一些问题，我应该调用 jquery 的所有方法或事件以适应两个方向的页面。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T12:53:57.200

我不能对你的问题给出确切的答案。但我建议你看看那里是如何针对不同设备和方向做出决定的：[zurb](http://foundation.zurb.com/)或[twitter bootstrap](http://twitter.github.com/bootstrap/)

# objective-c - 从 xib 到情节提要 UIButton 还是没有？

> ID：10798215
> 
> 赞同：1
> 
> 时间：2012-05-29T11:26:55.473
> 
> 标签：objective-c, ios, ipad

我在情节提要之外创建了一个 xib 文件（它是一个 gridView）。如果您在 xib 文件上创建一个按钮并希望从该按钮移回情节提要并传递 GridViewItems。你是怎样做的？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T05:53:13.393

我想到了。首先，您在情节提要上设置了从您称为网格视图的视图到您想要去的视图的推送转场。当然，您必须将网格视图 xib 文件中的按钮连接到 IBOutlet 属性。

然后将其添加到 tableView

```
[cellview.button addTarget:self action:@selector(toNextView:) forControlEvents:UIControlEventTouchUpInside]; 
```

并创建一个 toNextView 函数并在函数中执行 segue：

```
[self.own performSegueWithIdentifier:@"OwnViewToNewView" sender:item]; 
```

# google-app-engine - sun.security.pkcs11.SunPKCS11 的服务器错误

> ID：10798218
> 
> 赞同：0
> 
> 时间：2012-05-29T11:26:58.967
> 
> 标签：google-app-engine, android-c2dm

几个月来，我已经成功地使用 Google AppEngine/Android C2DM 开发了。

突然，在使用所有最新的 Android 和 AppEngine 开发 SDK 等进行更新后，即使是内置在“App Engine Connected Android Project”（来自 Google Plugin for Eclipse）中的 Eclipse 在测试 C2DM 时也会出现以下服务器错误：

> 服务器错误：无法初始化类 sun.security.pkcs11.SunPKCS11

有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T13:44:47.610

我遇到了类似的问题，解决方案是选择不同的 JDK。不确定这是否也是您的情况，但这是 SO question的[链接。](https://stackoverflow.com/questions/10034900/appengine-devmode-access-denied-java-lang-runtimepermission-accessclassinp)

希望能帮助到你。

# c# - 通过 ISA、SSL 访问 Web 服务

> ID：10798222
> 
> 赞同：1
> 
> 时间：2012-05-29T11:27:10.340
> 
> 标签：c#, web-services, ssl, asmx, isaserver

我尝试访问托管在 ISA 服务器后面的 IIS 上的 asmx Web 服务，并且身份验证由 ISA 服务器使用证书（用户证书 => [https] => ISA => 身份验证 [http] => Web 服务）进行。如何使用 C# 客户端调用服务方法？

# javascript - 使用 Bash 在 JScript 中更快地搜索

> ID：10798223
> 
> 赞同：0
> 
> 时间：2012-05-29T11:27:11.360
> 
> 标签：javascript, bash, jscript

我正在使用以下 JScript 代码在文件中搜索字符串：

```
 var myFile = aqFile.OpenTextFile(fileToSearchIn, aqFile.faRead, aqFile.ctANSI);

  while(!myFile.IsEndOfFile())
  {
    s = myFile.ReadLine();
    if (aqString.Find(s, searchString) != -1)
      Log.Checkpoint(searchString + " found.", s); 
  }

  myFile.Close(); 
```

这个比较慢。我正在考虑使用 bash 命令来加快文件过程中的搜索：

```
 var WshShell = new ActiveXObject("WScript.Shell");
  var oExec = WshShell.Exec("C:\\cygwin\\bin\\bash.exe -c 'cat \"" + folderName + "/" + fileName + "\"'"); 
  while (!oExec.StdOut.AtEndOfStream)
    Log.Checkpoint(oExec.StdOut.ReadLine());
  while (!oExec.StdErr.AtEndOfStream)
    Log.Error(oExec.StdErr.ReadLine()); 
```

由于每次启动 bash.exe 都会打开一个新窗口，因此搜索并不比以前快。是否有可能使用另一个开关在后台运行 bash？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T10:37:47.267

每次调用`WshShell.Exec`都会启动一个代价高昂的新进程。如果您的文本文件不是太大，这将阻止生成新进程：

```
var myFile = aqFile.OpenTextFile(fileToSearchIn, aqFile.faRead, aqFile.ctANSI);
var myFileData = myFile.Read(myFile.Size);
var index = myFileData.indexOf(searchString);
if(index>0)
{
  Log.Checkpoint(searchString + " found.", index); 
}
myFile.Close(); 
```

这不会打印整行，而是打印找到的位置的索引。如果您想要整行，请从那里搜索行尾。

# php - PHP 日期函数 7 天前

> ID：10798228
> 
> 赞同：40
> 
> 时间：2012-05-29T11:27:50.287
> 
> 标签：php, date

我正在尝试使用 PHP 的日期函数以 YYYY-MM-DD 格式获取 7 天前的日期。

```
date('Y-m-d'); 
```

当我尝试

```
date('Y-m-d-7'); 
```

我收到一个错误

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2012-05-29T11:35:44.190

使用`strtotime`PHP 提供的方法。

`date('Y-m-d', strtotime('-7 days'))`

感谢@lonesomeday 在评论中指出我的错误；）

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-05-29T11:29:57.737

有了这个，就像所有 PHP 日期的东西一样，使用这个[`DateTime`](http://www.php.net/manual/en/class.datetime.php)类会更好。

```
$date = new DateTime('7 days ago');
echo $date->format('Y-m-d'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-29T06:06:41.083

使用 strtotime

```
date("Y-m-d", strtotime('-7 days')) 
```

或者

```
date("Y-m-d", time() - 60 * 60 * 24 * 7); 
```

# python - 在 django/tastypie 资源中传递请求变量

> ID：10798230
> 
> 赞同：2
> 
> 时间：2012-05-29T11:27:57.833
> 
> 标签：python, django, rest, resources, tastypie

我需要在美味派资源中执行过滤器查询。例如，输入应该是 url 的标题

```
new Ext.data.Store({
   proxy: {
     url :'api/users/'
     type: "ajax",
      headers: {
       "Authorization": "1"
    }
   }
 }) 
```

我在下面试过

```
from tastypie.authorization import Authorization
from django.contrib.auth.models import User
from tastypie.authentication import BasicAuthentication
from tastypie import fields
from tastypie.resources import ModelResource, ALL, ALL_WITH_RELATIONS
from tastypie.validation import Validation
from userInfo.models import ExProfile

class UserResource(ModelResource,request):
        class Meta:
            queryset = User.objects.filter(id=request.META.get('HTTP_AUTHORIZATION'))
            resource_name = 'user'
            excludes = ['email', 'password', 'is_active', 'is_staff', 'is_superuser']
            authorization = Authorization()
            authentication=MyAuthentication() 
```

它在说`name 'request' is not defined`。如何在 ORM 上传递过滤器？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T13:25:22.677

Not sure why are you inheriting request in UserResource.

I needed to do something like this and the best solution I could come up was to overwrite the dispatch method. Like this

```
class UserResource(ModelResource):
   def dispatch(self, request_type, request, **kwargs):
        self._meta.queryset.filter(id=request.META.get('HTTP_AUTHORIZATION'))
        return super(UserResource, self).dispatch(request_type, request, **kwargs) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T07:51:07.487

嗯，我发现`apply_filter`非常有用。我们可以像这样传递链接

```
http://localhost:8000/api/ca/entry/?format=json&userid=a7fc027eaf6d79498c44e1fabc39c0245d7d44fdbbcc9695fd3c4509a3c67009 
```

代码

```
class ProfileResource(ModelResource):

        class Meta:
             queryset =ExProfile.objects.select_related()
             resource_name = 'entry'
             #authorization = Authorization()
             #authentication = MyAuthentication()
             filtering = {
                 'userid': ALL,
                 'homeAddress': ALL,
                 'email': ALL,
                 'query': ['icontains',],
                 }
             def apply_filters(self, request, applicable_filters):
                    base_object_list = super(ProfileResource, self).apply_filters(request, applicable_filters)

                    query  = request.META.get('HTTP_AUTHORIZATION')
                    if query:
                        qset = (
                            Q(api_key=query)
                            )
                        base_object_list = base_object_list.filter(qset).distinct()

                    return base_object_list 
```

# android - 并发写入android数据库（来自多个服务）？

> ID：10798233
> 
> 赞同：13
> 
> 时间：2012-05-29T11:28:06.273
> 
> 标签：android, sqlite, android-service, sqliteopenhelper

我在 android sqlite 数据库和并发写入方面存在严重问题。为了更好地解释，我会给你一个现实生活中的例子：

我有一个桌面小部件，其中显示了我的数据库中的项目列表（在后台我有 DataService，它定期从我的远程服务器收集新数据，并用它们更新我的数据库）。所以 - 当我点击列表中的某个项目时，我需要更新数据库中点击的项目（=做写操作）。但是，当我准确地单击项目时，当 DataService 正在更新我的数据库中的新数据时，它当然会记录如下错误：

```
android.database.sqlite.SQLiteException: error code 5: database is locked 
```

通常它很难模拟，但如果你安排 DataService 例如每 10 秒运行一次（只是为了演示），你可以很容易地模拟这个错误。

我的问题是，如何处理？我在文档中读到，如果同时有两个写事件，只有第一个会被执行，第二个会被记录为错误。听起来很奇怪，必须有其他选项，例如第二次写入会等到第一次写入完成。或者也许其他解决方案？试图阅读文档，但似乎谷歌文档中没有很好地涵盖该项目......几乎我拥有的所有信息，都是在官方页面以外的地方找到的。

PS：这是我的 DBHelper 类的缩短版本：

```
public class DBHelper extends SQLiteOpenHelper {

    private static final String TABLE_NEWS = "News";    
    private static final String COL_ID = "id";
    private static final String COL_TITLE = "title";
    private static final String COL_ALERT = "alert";

    public DBHelper(Context context) {
        super(context, "MY_DB_NAME", null, 1);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        db.execSQL("CREATE TABLE " + TABLE_NEWS + "(" + COL_ID + " TEXT PRIMARY KEY," + COL_TITLE + " TEXT," + COL_ALERT + " INTEGER" + ")");
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        db.execSQL("DROP TABLE IF EXISTS " + TABLE_NEWS);
        onCreate(db);
    }

    public void addRecords(ArrayList<NewsItem> items) {
        SQLiteDatabase db = this.getWritableDatabase();    
        for (int i = 0; i < items.size(); i++) {
            NewsItem item = items.get(i);    
            ContentValues values = new ContentValues();
            values.put(COL_ID, item.getId());
            values.put(COL_TITLE, item.getTitle());
            values.put(COL_ALERT, item.getAlertMe());    
            db.insert(TABLE_NEWS, null, values);
        }    
        db.close();
    }

    public int updateRecord(NewsItem item) {
        SQLiteDatabase db = this.getWritableDatabase();    
        ContentValues values = new ContentValues();
        values.put(COL_ALERT_ME, item.getAlertMe());
        int updated = db.update(TABLE_NEWS, values, COL_ID + " = ?", new String[] { item.getId() });
        db.close();    
        return updated;
    }
} 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-29T12:19:12.560

`SQLiteDatabase`您需要在所有线程（及其托管组件）中使用单个对象来获得线程安全。让你`DBHelper`成为一个单身人士，或者使用`ContentProvider`, 来达到这个效果。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-05-29T11:56:25.737

`ContentProvider`正是出于这个原因而创建的。您可以从多个线程调用它以进行插入/更新/删除操作。

[http://developer.android.com/reference/android/content/ContentProvider.html](http://developer.android.com/reference/android/content/ContentProvider.html)

`ContentProvider`许多人认为，如果您想共享数据，您应该只想使用 a 。这是 a 的一大好处`ContentProvider`，但它不是唯一的好处。主要的好处是，在使用 时`ContentProvider`，Android 将为您管理数据库连接。

这是一个关于内容提供者的好教程

[http://www.vogella.com/articles/AndroidSQLite/article.html](http://www.vogella.com/articles/AndroidSQLite/article.html)

注意：虽然 ContentProvider 的 JavaDoc 确实声明它是共享数据所必需的，但这并不意味着它只能用于共享数据。在 Application Fundamentals 文档中，它也有关于 ContentProviders 的说法。

> 内容提供者对于读取和写入应用程序私有且不共享的数据也很有用。例如，Note Pad 示例应用程序使用内容提供程序来保存笔记。

[http://developer.android.com/guide/topics/fundamentals.html#lcycles](http://developer.android.com/guide/topics/fundamentals.html#lcycles)

# javascript - javascript hashchange 转发按钮上的奇怪问题

> ID：10798235
> 
> 赞同：1
> 
> 时间：2012-05-29T11:28:10.330
> 
> 标签：javascript, jquery, jquery-animate, hashchange

当用户按下后退按钮时，我使用 onhashchange 事件自动滚动到 FAQ 页面中的锚链接。

它工作正常，除非按下前进按钮，滚动不起作用的情况。

我一直无法理解为什么会发生这种情况。有人知道为什么会这样吗？

演示页面：[http](http://static.nemesisdesign.net/hashchange-issue/index.html) ://static.nemesisdesign.net/hashchange-issue/index.html （要重现该问题，请尝试单击左栏中的链接，然后按几次后退按钮，然后按前进按钮）

这是执行滚动的代码部分：

```
// if browser supports onhashchange event
if ("onhashchange" in window){
    $(window).bind('hashchange', function(e){
        e.preventDefault();
        var href = (location.hash != '') ? location.hash : '#container'
        scrollToFaq(href);
        return false;
    });
}

scrollToFaq = function(href){
    // scroll
    $('html, body').animate(
        // scroll to clicked item
        {scrollTop: $(href).offset().top},
        400, // duration in ms
        function(){
            if(href != '#container'){
                location.hash = href.replace('#',''); // update hash
            }
            // show back button if necessary
            if($(window).scrollTop() > 60){
                // onclick back to top button
                $('#back-top').fadeIn();
            }
        }
    );
}

// when clicking on a faq menu item
$('#faqmenu a').click(function(e){
    // prevent default behaviour
    e.preventDefault();
    // cache href attribute
    scrollToFaq($(this).attr('href'));
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T15:36:15.153

似乎在使用后退和前进按钮时，浏览器会执行其默认滚动操作，而不管事件处理程序 `e.preventDefault();`中的情况如何。`onhashchange`

基本上这不会阻止浏览器在使用后退和前进按钮时跳转：

```
if ("onhashchange" in window){
    $(window).bind('hashchange', function(e){
        e.preventDefault();
        return false;
    });
} 
```

我能想到的最简单的技巧是在哈希中使用一些不存在的 id（这样它就不会跳转）。

例如，`<div id="a">`您可以使用`<a href="#xxx_a">`. 然后你所要做的就是`xxx_`用javascript剥离部分。

但缺点是您破坏了禁用 javascript 的用户和不支持`onhashchange`.

您可以查看[这个 jsFiddle](http://jsfiddle.net/danmana/7XnjD/)以查看一个工作示例

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T21:40:38.607

另一种方法是在文档准备好时使用 javascript 删除/更改 id 属性。这样你会很好地降级并绕过你在这里遇到的默认滚动行为......

# linux - xdotool 窗口搜索随机失败

> ID：10798241
> 
> 赞同：1
> 
> 时间：2012-05-29T11:28:35.747
> 
> 标签：linux

我只是启动 gedit 并尝试使用 xdotool 找到 gedit 窗口

`xdotool search "gedit"`

有时它会给我一个窗口 ID，有时它会失败

```
X Error of failed request: 20(X_GetProperty)
Major opcode of failed request: 20 (X_GetProperty) 
```

可能是什么问题呢？我正在通过 vncviewer 访问运行此设置的机器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T10:00:38.143

您需要指定要搜索的属性：

`xdotool search --name "gedit"`

# java - 休眠中的多对多

> ID：10798244
> 
> 赞同：2
> 
> 时间：2012-05-29T11:28:38.397
> 
> 标签：java, hibernate, hibernate-mapping

我是新来的冬眠。我有三个表（课程-学生-课程学生）。以下是我的代码，但它不起作用。我也写了cfg.xml。我认为我的问题是我的 hbm 文件，但我无法解决。

```
public class Student {
private int student_id;
private String student_name;
public Student()
{

}
public Student(int id,String name)
{
this.student_id=id;
this.student_name=name;
}
private Set<Course> courses = new HashSet<Course>();
public int getstudentid()
{
    return student_id;
}
public void setstudentid(int id)

{
    this.student_id=id;
}
public String getstudentname()
{
    return student_name;
}
public void setstudentname(String name)
{
    this.student_name=name;
}
public Set<Course> getcourse()
{
    return courses;
}
public void setcourse(Set<Course> courses)
{
    this.courses=courses;
}
}

public class Course {
    private int course_id;
    private String course_name;
    private Set<Student> students= new HashSet<Student>();
public Course()
{

}
public Course(int id, String name)
{
    this.course_id=id;
    this.course_name=name;
}
public int getcourseid()
{
    return course_id;
}
public void setcourseid(int id)
{
    this.course_id=id;
}
public String getcoursename()
{
    return course_name;
}
public void setcoursename(String name)
{
    this.course_name=name;
}
public Set<Student> getstudents()
{
    return students;
}
public void setstudents(Set<Student> students)
{
    this.students=students;
}
} 
```

hbm.xml

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<!-- Generated May 29, 2012 3:19:54 PM by Hibernate Tools 3.4.0.CR1 -->
<hibernate-mapping package="first">
    <class name="Course" table="COURSE">
        <id name="course_id" type="int" access="field">
            <column name="COURSE_ID" />
            <generator class="assigned" />
        </id>
        <property name="course_name" type="java.lang.String" access="field">
            <column name="COURSE_NAME" />
        </property>
        <set name="students" table="student_course"
inverse="false" lazy="true" fetch="join" cascade="all">
<key column="student_id" />
<many-to-many column="course_id" class="Course" />
</set>
    </class>
</hibernate-mapping> 
```

和

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<!-- Generated May 29, 2012 3:19:54 PM by Hibernate Tools 3.4.0.CR1 -->
<hibernate-mapping package="first">
    <class name="Student" table="STUDENT">
        <id name="student_id" type="int" access="field">
            <column name="STUDENT_ID" />
            <generator class="assigned" />
        </id>
        <property name="student_name" type="java.lang.String" access="field">
            <column name="STUDENT_NAME" />
        </property>
        <set name="courses" table="student_course"
inverse="false" lazy="true" fetch="join" cascade="all">
<key column="student_id" />
<many-to-many column="course_id" class="Course" />
</set>
    </class>
</hibernate-mapping> 
```

我的托管代码：

```
public class ManageStudent {
    private static SessionFactory sf;
    private static ServiceRegistry serviceRegistry;

    public static void main(String[] args) {
    try {
    Configuration configuration = new Configuration().addResource("first/Student.hbm.xml").addResource("first/Course.hbm.xml");
    configuration.configure();
    serviceRegistry = new ServiceRegistryBuilder().applySettings(
    configuration.getProperties()).buildServiceRegistry();
    sf = configuration.buildSessionFactory(serviceRegistry);
    } catch (Throwable ex) {
    System.err.println("Failed to create sessionFactory object." + ex);
    throw new ExceptionInInitializerError(ex);
    }

    System.out.println("Hibernate Many to Many Mapping Example Using Xml ");

    Session session = sf.openSession();
    session.beginTransaction();

    Student s1=new Student(1,"mina");
    Student s2=new Student(2,"samira");

    Course c1=new Course(10,"math");
    Course c2=new Course(11,"sport");

    s1.getcourse().add(c2);
    s2.getcourse().add(c1);
    s2.getcourse().add(c2);

    session.save(s1);
    session.save(s2);

    session.getTransaction().commit();
    session.close();
    }
} 
```

我的错误是：

```
Failed to create sessionFactory object.org.hibernate.MappingException: Could not get constructor for org.hibernate.persister.entity.SingleTableEntityPersister

Exception in thread "main" java.lang.ExceptionInInitializerError
    at first.ManageStudent.main(ManageStudent.java:21)
Caused by: org.hibernate.MappingException: Could not get constructor for org.hibernate.persister.entity.SingleTableEntityPersister
    at org.hibernate.persister.internal.PersisterFactoryImpl.create(PersisterFactoryImpl.java:180)
    at org.hibernate.persister.internal.PersisterFactoryImpl.createEntityPersister(PersisterFactoryImpl.java:131)
    at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:346)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1737)
    at first.ManageStudent.main(ManageStudent.java:18)
Caused by: org.hibernate.HibernateException: Unable to instantiate default tuplizer [org.hibernate.tuple.entity.PojoEntityTuplizer]
    at org.hibernate.tuple.entity.EntityTuplizerFactory.constructTuplizer(EntityTuplizerFactory.java:138)
    at org.hibernate.tuple.entity.EntityTuplizerFactory.constructDefaultTuplizer(EntityTuplizerFactory.java:188)
    at org.hibernate.tuple.entity.EntityMetamodel.<init>(EntityMetamodel.java:336)
    at org.hibernate.persister.entity.AbstractEntityPersister.<init>(AbstractEntityPersister.java:498)
    at org.hibernate.persister.entity.SingleTableEntityPersister.<init>(SingleTableEntityPersister.java:142)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at org.hibernate.persister.internal.PersisterFactoryImpl.create(PersisterFactoryImpl.java:158)
    ... 4 more
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at org.hibernate.tuple.entity.EntityTuplizerFactory.constructTuplizer(EntityTuplizerFactory.java:135)
    ... 13 more
Caused by: org.hibernate.PropertyNotFoundException: Could not find a getter for courses in class first.Student
    at org.hibernate.property.BasicPropertyAccessor.createGetter(BasicPropertyAccessor.java:316)
    at org.hibernate.property.BasicPropertyAccessor.getGetter(BasicPropertyAccessor.java:310)
    at org.hibernate.mapping.Property.getGetter(Property.java:298)
    at org.hibernate.tuple.entity.PojoEntityTuplizer.buildPropertyGetter(PojoEntityTuplizer.java:436)
    at org.hibernate.tuple.entity.AbstractEntityTuplizer.<init>(AbstractEntityTuplizer.java:200)
    at org.hibernate.tuple.entity.PojoEntityTuplizer.<init>(PojoEntityTuplizer.java:82)
    ... 18 more 
```

请帮我。我的新错误：

```
Failed to create sessionFactory object.org.hibernate.HibernateException: Wrong column type in SYSTEM.COURSE for column COURSE_NAME. Found: number, expected: varchar2(255 char)
Exception in thread "main" java.lang.ExceptionInInitializerError
    at first.ManageStudent.main(ManageStudent.java:21)
Caused by: org.hibernate.HibernateException: Wrong column type in SYSTEM.COURSE for column COURSE_NAME. Found: number, expected: varchar2(255 char)
    at org.hibernate.mapping.Table.validateColumns(Table.java:282)
    at org.hibernate.cfg.Configuration.validateSchema(Configuration.java:1268)
    at org.hibernate.tool.hbm2ddl.SchemaValidator.validate(SchemaValidator.java:155)
    at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:453)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1737)
    at first.ManageStudent.main(ManageStudent.java:18) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T11:56:21.007

从代码片段中我可以看出一件事是错误的：

1.  `<class name="rStudent" table="STUDENT">`当班级名称为学生时，更改此项并重新运行。

当 hibernate 没有找到 No Arg 构造函数或者您有循环依赖项时，通常会引发此异常，因为在您的代码中我看到 No Arg 构造函数可用并且对于初始化不存在循环依赖项，更正名称应该有助于解决此问题。

根据编辑：

您的课程设置器、设置器不正确

代替

```
public Set<Course> getcourse() // this should be getCourses
{
    return courses;
}
public void setcourse(Set<Course> courses) // this should be setCourses
{
    this.courses=courses;
} 
```

在类似的行中，请在 Courses.java 中更改以下内容

```
public Set<Student> getstudents() // Make it getStudents
{
    return students;
}
public void setstudents(Set<Student> students) // Make it setStudents
{
    this.students=students;
} 
```

您的 getter、setter 不遵循休眠所需的正确命名约定。

使用以下代码检查您的学生的 getter、setter：

```
import java.util.HashSet;
import java.util.Set;

public class Student {

    private int    student_id;
    private String  student_name;
    private Set<Course> courses = new HashSet<Course>();
    public Student() {

    }
    public Student(int id, String name) {
        this.student_id = id;
        this.student_name = name;
    }

    /**
     * @return the student_id
     */
    public int getStudent_id() {
        return student_id;
    }

    /**
     * @param student_id the student_id to set
     */
    public void setStudent_id(int student_id) {
        this.student_id = student_id;
    }

    /**
     * @return the student_name
     */
    public String getStudent_name() {
        return student_name;
    }

    /**
     * @param student_name the student_name to set
     */
    public void setStudent_name(String student_name) {
        this.student_name = student_name;
    }

    /**
     * @return the courses
     */
    public Set<Course> getCourses() {
        return courses;
    }

    /**
     * @param courses the courses to set
     */
    public void setCourses(Set<Course> courses) {
        this.courses = courses;
    }
} 
```

同样的课程

```
import java.util.HashSet;
import java.util.Set;

public class Course {
    private int          course_id;
    private String       course_name;
    private Set<Student>    students    = new HashSet<Student>();
    public Course() {

    }
    public Course(int id, String name) {
        this.course_id = id;
        this.course_name = name;
    }

    /**
     * @return the course_id
     */
    public int getCourse_id() {
        return course_id;
    }

    /**
     * @param course_id the course_id to set
     */
    public void setCourse_id(int course_id) {
        this.course_id = course_id;
    }

    /**
     * @return the course_name
     */
    public String getCourse_name() {
        return course_name;
    }

    /**
     * @param course_name the course_name to set
     */
    public void setCourse_name(String course_name) {
        this.course_name = course_name;
    }

    /**
     * @return the students
     */
    public Set<Student> getStudents() {
        return students;
    }

    /**
     * @param students the students to set
     */
    public void setStudents(Set<Student> students) {
        this.students = students;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T12:17:57.013

我可以发现几个问题：

您`.hbm.xml`有以下内容：`<set name="courses" …&gt;`. 属性的值`name`必须是实体上的属性名称。但是，您的`Student`课程只有方法`getcourse()`和`setcourse()`. 这就是堆栈跟踪显示的原因：

> 在课堂上找不到第一门课程的吸气剂。学生

定义属性的正确方法名称`courses`是`getCourses()`and `setCourses()`。*对属性*重要的是 getter/setter 方法名称，而不是字段的名称。（您应该为您拥有的所有 getter 和 setter 更正此问题。）

Another thing is that your naming convention doesn't follow the official convention. In Java, the standard is to camelCase fields and methods. While this isn't as important for fields, it's necessary when using the JavaBean specification which a lot of frameworks rely on.

# visual-c++ - 运行 2 个图表的 Directshow 问题

> ID：10798245
> 
> 赞同：0
> 
> 时间：2012-05-29T11:28:53.623
> 
> 标签：visual-c++, directshow, video-capture, multiple-instances

我有直接显示的 Mp4 捕获应用程序。在我的应用程序中，我需要连续捕获 30 分钟（或说一些动态值）视频。我的图表如下

```
Video Source --> x264vfw - H.264/MPEG-4 AVC Codec --------->GDCL MPEG-4 Multiplexer --> File Writer                                             
                                                        | 
Audio Source --> ACM Wrapper --> Monogram AAC Encoder --| 
```

为此，我制定了类似 --> 的逻辑

1.  捕获类，其中包含制作图生成器、获取设备、构建图、启动和停止捕获图所需的所有内容。
2.  为捕获类制作 2 个指针对象并为第一个和第二个对象构建图形。
3.  运行第一张图并在 30 分钟超时后，开始第二张图并停止第一张图

以相同的方式连续运行图表，我想这个逻辑应该可以正常工作......并且几乎在逻辑上是正确的

当我构建第一个成功生成第一个图形并使用第二个指针对象我为该对象构建图形时，它不连接`Audio Source Pin`并且`ACM Wrapeer`与`HRESULT = -2147220969`

有人对这种行为有想法吗？

如果需要，我可以粘贴我的代码。

谢谢。

@Roman R.，我正在编辑我的帖子以添加我的代码片段，我希望我在这里添加了所需的详细信息。

**编辑：**

```
// Create 1st Capture Instance
Capture *capodd = new Capture();
capodd->destination = capinfo.destination;
capodd->periodicity = capinfo.periodicity;

// Select 1st Audio and 1st Video Device from Devices add their filters to graph
capodd->SelectDevice(1,1);

// Build Graph for the 1st Capture Instance
capodd->BuildMp4CaptureGraph();

// Create 2nd Capture Instance
Capture *capeven = new Capture();
capeven->destination = capinfo.destination;
capeven->periodicity = capinfo.periodicity;

// Select 1st Audio and 1st Video Device from Devices add their filters to graph
capeven->SelectDevice(1,1);

// Build Graph for the 2nd Capture Instance
capeven->BuildMp4CaptureGraph();

while(1)
{
    // set current capture file 
    Capture *capcurrent = new Capture();
    if(!capodd.Fcapturing && !capeven.Fcapturing)
    {
        capcurrent = capodd
        capodd->StopCapture();
    }
    else if(capodd.Fcapturing)
    {
        capcurrent = capeven;
        capodd->StopCapture();
    }
    else
    {
        capcurrent = capodd;
        capeven->StopCapture();
    }

    // Set the Capture File name 
    capcurrent->setCaptureInfo();

    // start capturing
    capcurrent->StartCapture();

    HANDLE hTimer = NULL;
    HANDLE hTimerQueue = NULL;
    int arg = 123;
    gDoneEvent = CreateEvent(NULL, TRUE, FALSE, NULL);
    if (NULL == gDoneEvent)
    {
        capcurrent->ErrMsg(TEXT("CreateEvent failed (%d)\n"), GetLastError());
        return FALSE;
    }

     hTimerQueue = CreateTimerQueue();
    if (NULL == hTimerQueue)
    {
        capcurrent->ErrMsg(TEXT("CreateTimerQueue failed (%d)\n"), GetLastError());
        return FALSE;
    }

    // Set a timer to call the timer routine in 10 seconds.
    if (!CreateTimerQueueTimer( &hTimer, hTimerQueue, 
        (WAITORTIMERCALLBACK)TimerRoutine, &arg , (capcurrent->dwTimeLimit)*1000, 0, 0))
    {
        capcurrent->ErrMsg(TEXT("CreateTimerQueueTimer failed (%d)\n"), GetLastError());
        return FALSE;
    }

    if (WaitForSingleObject(gDoneEvent, ((capcurrent->dwTimeLimit)*1000)+1000) != WAIT_OBJECT_0)
        capcurrent->ErrMsg(TEXT("WaitForSingleObject failed (%d)\n"), GetLastError());

    CloseHandle(gDoneEvent);

    // Delete all timers in the timer queue.
    if (!DeleteTimerQueue(hTimerQueue))
        capcurrent->ErrMsg(TEXT("DeleteTimerQueue failed (%d)\n"), GetLastError());

} 
```

选择设备获取音频和视频过滤器设备并将所选过滤器添加到图形

BuildMp4CaptureGraph 创建了上图中的图形，使用 CoCreateInstance 创建了 ACM Wrapper 和 GDCL Mux 过滤器并将其添加到图形中

我猜有些资源需要对外发布，不确定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T12:38:10.160

`-2147220969`-> `0x80040217`-> `VFW_E_CANNOT_CONNECT`：

> 找不到中间过滤器的组合来建立连接。

也就是说，您第二次构建图表的尝试失败了。您需要检查图表上的过滤器，以将错误隔离到特定的引脚连接。

另请注意，您通常不能在 2 个以上的图中使用相同的捕获设备，它们被活动管道专门锁定。

# iphone - iOS scrollview.bounces 使应用程序在 iOS 4.x 上崩溃

> ID：10798248
> 
> 赞同：0
> 
> 时间：2012-05-29T11:29:07.350
> 
> 标签：iphone, objective-c, ios, xcode, cocoa-touch

scrollView.bounces 在 iOS 5 上正常工作，但在 iOS 4 上执行时，会显示 sigabrt 错误。如何设置它适用于两个操作系统？谢谢

```
- (void)viewDidLoad
{  
    [super viewDidLoad];

    [spinner startAnimating];
    [self.webView1 setDelegate:self];

    self.webView1.scrollView.bounces = NO;
    self.webViewB.scrollView.bounces = NO;

    [self loadIt];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T11:35:04.980

可能是因为 iOS 4 中的 Web 视图没有 scrollView 属性——我认为它是在 iOS 5 中出现的 :)

看看[Stop UIWebView 从“垂直弹跳”的答案？](https://stackoverflow.com/questions/500761/stop-uiwebview-from-bouncing-vertically)要解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T11:40:08.233

您的问题不是设置`bounces`属性，`scrollView`而是尝试访问和对象的`scrollView`属性。在 iOS 5.0 之前，这个属性是不公开的，所以你不能像那样访问它。`webView1``webViewB`

您将不得不遍历 and 的所有 suview`webView1`并`webViewB`找到属于 and 的那个，`UIScrollView`而不是设置它的`bouncing`属性。你可以这样做：

```
if ([self.webView1 respondsToSelector:@selector(scrollView)]) {
    self.webView1.scrollView.bounces = NO;
    self.webViewB.scrollView.bounces = NO;
}
else {
    for (UIView *subview in self.webView1.subviews) {
        if ([subview isKindOfClass:[UIScrollView class]]) {
            UIScrollView *scrollView = (UIScrollView *)subview;
            scrollView.bounces = NO;
        }
    }

    for (UIView *subview in self.webViewB.subviews) {
        if ([subview isKindOfClass:[UIScrollView class]]) {
            UIScrollView *scrollView = (UIScrollView *)subview;
            scrollView.bounces = NO;
        }
    }
} 
```

让我知道这是否适合你。

# postgresql - 在触发器中使用 PL/Java 连接到 PostgreSQL 失败

> ID：10798250
> 
> 赞同：-4
> 
> 时间：2012-05-29T11:29:09.783
> 
> 标签：postgresql, pljava

我在 PostgreSQL 9.1 中定义了一个触发器，它应该在记录更新时触发：

```
CREATE OR REPLACE FUNCTION check() RETURNS TRIGGER AS $$
 BEGIN
   SELECT doubletEngine.checkForDoublet(NEW.id);
 RETURN NEW;
END;
$$ LANGUAGE plpgsql;

DROP TRIGGER IF EXISTS check_upd on people;
CREATE TRIGGER check_upd AFTER UPDATE ON people
  FOR EACH ROW
  WHEN (OLD.* IS DISTINCT FROM NEW.*)
  EXECUTE PROCEDURE check(); 
```

方法 doubletEngine.checkForDoublet() 被引入 PL/Java 1.4.3 使用

```
CREATE OR REPLACE FUNCTION doubletEngine.checkForDoublet(varchar) RETURNS void AS 'DoubletSearcher.checkForDoublet' LANGUAGE java; 
```

在方法 checkForDoublet() 中，我尝试使用

```
Class.forName("org.postgresql.Driver");
String url = "jdbc:postgresql://127.0.0.1:5432/db";
c = DriverManager.getConnection(url, "postgres", "postgres");
if ( c == null ) {
   throw new RuntimeException("Could not connect to server");
} 
```

...但 c 仍然为空。直接从我的 IDE 调用此代码效果很好，但是当触发器触发时，它只会抛出 RuntimeException。有什么我想念的吗...？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T12:24:46.023

根据 PL/Java[文档](http://cvs.pgfoundry.org/cgi-bin/cvsweb.cgi/~checkout~/pljava/org.postgresql.pljava/docs/userguide.html?rev=1.15&content-type=text/html)，连接应该如下获得：

```
Connection conn = DriverManager.getConnection("jdbc:default:connection"); 
```

# c++ - C++ 表达式评估。“评价”是什么意思？

> ID：10798251
> 
> 赞同：1
> 
> 时间：2012-05-29T11:29:20.100
> 
> 标签：c++, expression, evaluation

我理解经典示例的问题

```
int i=0;
foo(i++, i++); 
```

但我无法说服自己以下内容是否有效

```
int foo(int& i)
{
   i=42;
   return 99;
}

bar(foo(i), i); 
```

我知道评估的顺序 'foo(i)' 和 'i' 是未定义的，但 'evaluated' 究竟是什么意思？即 bar 的第二个参数是否总是 42，或者 'i' 的当前值是否可以在 foo 更改之前传入？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T11:32:04.133

不，不能保证。
函数参数的评估顺序是**未指定的**^([Ref 1])。
有可能是：

*   `foo(i)`首先被评估或
*   `i`被评估或
*   任何其他魔法命令（*如果参数数量超过两个*）

在此上下文中未指定意味着允许实现以任何他们想要的方式实现所述功能，并且不需要记录。

* * *

^([参考 1])
**C++03 5.2.2 函数调用第 8 段**

> **参数的评估顺序未指定**。参数表达式评估的所有副作用在输入函数之前生效。后缀表达式和参数表达式列表的求值顺序未指定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T11:35:39.880

此示例（gcc 4.6）

```
#include <iostream>
using namespace std;

int foo(int& i)
{
    i=42;
    return 99;
}

void bar(int i, int j)
{
    cout << "i = " << i << "; j = " << j << endl;
}

int main()
{
    int i =10;
    bar(foo(i), i);
    return 0;
} 
```

给出 i = 99，j = 10。

所以真的不能保证。

# bash - HBase - 如何使用 bash 获取 HBase 主地址？

> ID：10798254
> 
> 赞同：2
> 
> 时间：2012-05-29T11:29:42.997
> 
> 标签：bash, hbase, apache-zookeeper

我正在尝试为我的集群编写一个小的自动化状态例程。基本上，我正在编写一个小 shell 脚本，它将查询所有节点，检查各种指标（有点像 Ganglia 会给我的......但我不能使用那个......长篇大论）。这完成了，除了 HBase。对于所有其他服务器（NN、JT、ZK 等），我可以查看配置文件并知道主机名。然而，HBase 主服务器并没有在任何地方列出。它位于“/hbase/master”znode 中。

我的问题..我怎样才能从 bash 中获取该主机名？我一直在尝试类似'zkCli.sh -server myzoo << get /hbase/master'之类的东西，但到目前为止，我还是一无所获。

底线是，我想要一个可以访问我所有主要服务器的 shell 脚本。HBase 是我唯一遇到的问题。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-21T08:00:01.563

根据使用字符串，我们应该可以做到

```
zkCli.sh -server myzoo get /hbase/master 
```

即使这不起作用，我们也可以不用 input.txt：

```
zkCli.sh -server myzoo <<EOF
get /hbase/master
quit
EOF 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T23:01:58.293

我们可以在 hbase-site.xml 文件中拥有“hbase.master”属性，然后您可以从那里像其他进程一样选择它。

# winapi - winapi RawInput 和 pre XP 编译器，如何链接？

> ID：10798255
> 
> 赞同：0
> 
> 时间：2012-05-29T11:29:45.350
> 
> 标签：winapi, linker, linker-errors, raw-input

我需要使用旧编译器下的 RawInput api 调用，它是 pre xp （特别是 borland 5.5 - 不要告诉我使用其他编译器这是不可能的，我需要使用它）

Ist 头文件 winuser.h 和 user32.lib 不包含原始输入调用，其他编译器的头文件和 user32.lib 不包含。那么使用这样的外部 rawinput .h 定义并将其链接到最新的 user32.lib 是可以实现的吗？

我在链接器方面没有太多经验。定义编译但我在链接处确实有未解决的外部问题

错误：未解析的外部 '__stdcall GetRawInputDeviceList (tagRAWINPUTDEVICELIST *, unsigned int *, unsigned int)' 引用自 C \CODE2\PROGRAM\MAIN.OBJ

错误：从 C:\CODE2\PROGRAM\MAIN.OBJ 引用的未解析的外部 '__stdcall RegisterRawInputDevices(const tagRAWINPUTDEVICE *, unsigned int, unsigned int)'

用新的 user32.lib 替换旧的 user32.lib 似乎没有效果（即使重命名它似乎也没有效果，而且编译器似乎根本没有触及 user32.lib （？）

如何让它工作，很多 tnx 建议如何解决这个问题（而不是告诉我我需要更新的编译器，我需要用这个旧的编译器来做）

（火）

// 编辑：修正了我的错误 winuser.lib 到 user32.lib（我的意思是 user32.lib）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T11:41:14.257

`GetRawInputDeviceList`并且`RegisterRawInputDevices`都在 user32.lib 中而不是 winuser.lib

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms645598(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645598(v=vs.85).aspx)

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms645600(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645600(v=vs.85).aspx)

those pages also state that you only need to include windows.h (and not winuser.h)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T12:01:43.960

When you need to call APIs which do exist on some Windows platforms and not on other ones, then you must NOT bind to the associated LIB statically but dynamically (using LoadLibrary and GetProcAddress). Another mechanism would be to use Delay-loaded Libraries.

# javascript - Remove/Delete ":" Colon in an HTML page

> ID：10798262
> 
> 赞同：4
> 
> 时间：2012-05-29T11:30:24.870
> 
> 标签：javascript, jquery, html

I dont have access to the following HTML its displayed dynamically using some External JS.

```
<td class="quantitybox">
    <span class="qty">Quantity</span>
    <br style="clear:both;">
    :<input type="text" value="1" onkeydown="javascript:QtyEnabledAddToCart();" maxlength="8" size="3" name="QTY.1121309" class="v65-productdetail-cartqty">
</td> 
```

I want that : after to be Removed/Deleted using Jquery, but i am not getting what handler should be used shall i apply a class to `<br>` dynamically and do something to it

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T11:34:00.483

jQuery方式，没有`regex`：

```
$('td.quantitybox').contents().filter(function(){       
    return this.nodeType === 3  && // textNode
           $.trim(this.nodeValue) === ":";
}).remove(); 
```

**或者只是将 textnode 更改为空字符串：**

```
$('td.quantitybox').contents().filter(function(){       
    return this.nodeType === 3  && // textNode
           $.trim(this.nodeValue) === ":";
})[0].nodeValue = ""; 
```

**如果您有多个带有冒号`:`的文本节点 - 要删除：**

```
$('td.quantitybox').contents().filter(function() {
    return this.nodeType === 3 && // textNode
    $.trim(this.nodeValue) === ":";
}).each(function() {
    this.nodeValue = "";
});​ 
```

**如果您想这样做`regex`并意识到它的风险：**

```
$('td.quantitybox').html(function(i, old){
    return old.replace(/:\s*</, '<');
}); 
```

请注意，您在问题中的 HTML 代码已被编辑，因此我在正则表达式中添加了空格，因此它也可以与初始标记一起使用......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T11:34:57.063

我建议，虽然目前未经测试，但如下：

```
$('td').each(function() {
    var i = this.getElementsByTagName('input'),
        text = i.previousSibling.nodeValue.replace(/:/g, '');
    i.previousSibling.nodeValue = text;
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T11:46:05.127

```
$(document).ready(function(){
   var texts = $('input').map(function(){
        var text = this.previousSibling.nodeValue;
       this.previousSibling.nodeValue = text.replace(/:/g, '');
   });
});​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T11:51:20.863

另一种解决方案。示例：http: [//jsfiddle.net/k25yx/1/](http://jsfiddle.net/k25yx/1/)

```
$(document).ready(function() {

    // Cache Object
    var obj  = $('.quantitybox');

    obj.each(function(){
       var that = $(this);

       // remove br          
       that.find('br').remove();

       // trim colon  
       that.html(function(i, val) {
           return val.replace(':', '');
       });
    })
}); 
```

# c# - How would I get resharper to build me a simple fluent interface based on the current fields or props in a class

> ID：10798263
> 
> 赞同：1
> 
> 时间：2012-05-29T11:30:28.253
> 
> 标签：c#, visual-studio-2010, visual-studio, resharper

For example I have the following class:

```
public class PublishFacebookOpenGraphActionRequest
{
    public FacebookOpenGraphActions Action { get; private set; }
    public FacebookOpenGraphObjects ObjectType { get; private set; }
    public Uri Url { get; private set; }
    public Uri Image { get; private set; }
} 
```

And I would like to be able to generate something like this from the current set of properties:

```
public class PublishFacebookOpenGraphAction
{
    public FacebookOpenGraphActions Action { get; private set; }
    public FacebookOpenGraphObjects ObjectType { get; private set; }
    public Uri Url { get; private set; }
    public Uri Image { get; private set; }

    public PublishFacebookOpenGraphAction WithAction(FacebookOpenGraphActions action)
    {
        this.Action = action;
        return this;
    }

    public PublishFacebookOpenGraphAction WithObjectType(FacebookOpenGraphObjects objectType)
    {
        this.ObjectType = objectType;
        return this;
    }

    public PublishFacebookOpenGraphAction WithUrl(Uri url)
    {
        this.Url = url;
        return this;
    }

    public PublishFacebookOpenGraphAction WithImage(Uri image)
    {
        this.Image = image;
        return this;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T16:37:59.043

我没有将 PublishFacebookOpenGraphActionRequest 的所有成员转换为流畅的界面。
但也许半自动生成流畅的属性-WithMember-pair 也是向前迈出的一小步。这可以通过***ReSharper Live Template***实现。

我有一个例子：

![在此处输入图像描述](../Images/a199e6ebd2aecf694fb0c52f9ec96cfd.png)

*您可以使用该Live Template*创建以下代码：

```
public FacebookOpenGraphActions Action { get; private set; }

public PublishFacebookOpenGraphAction WithAction(FacebookOpenGraphActions action)
{
    this.Action = action;
    return this;
} 
```

只需键入`fluentProp`+ *ENTER*并输入属性名称及其类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T09:02:59.857

另一种方法是通过使用***正则表达式****来使用Visual Studio*的***快速替换***( *Ctrl+H* ) 。 看截图：

 *![在此处输入图像描述](../Images/7ee76507cf0c257cf20d266ddb55e8e6.png)

*查找什么：*设置为：`:b*public:b+{:i}:b+{:i}:b+\{:b*get;:b*private:b*set;:b*\}:b*$`。
*替换为：*设置为：`public \1 \2 { get; private set; }\n public _class_ With\2(\1 p\2)\n\{\nthis\.\2 = p\2;\nreturn this;\n\}\n`。

这会为当前文档中的所有属性添加一个 *With** 成员。不幸的是，我找不到设置 *With** 成员的返回类型的方法。所以我只是将其设置为`_class_`. 所以你需要`_class_`用类名替换它（手动或另一个*快速替换*运行）。*

# css - Is it possible to use keyframes animation to pseudo-element?

> ID：10798264
> 
> 赞同：13
> 
> 时间：2012-05-29T11:30:28.663
> 
> 标签：css, pseudo-element, css-animations

is it possible to use css keyframes animation to pseudo-element such as 'before' and 'after'? I am developing webservice for smartphone, and want to blink element. but do not want to blink element itself. so, ways I came up with are two; one is to cover element with another element, and blink that element; and another is to use pseudo-element, but it seems not working.

css:

```
.fadeElement {
  background-color: #000000;
  width: 60px;
  height: 60px;
}
.fadeElement:after {
  display: block;
  content: '';
  position: relative;
  height: 100%;
  width: 100%;
  z-index: 500;
  background-color: rgba(249, 4, 0, 0.5);
  animation-name: 'fade';
  animation-duration: 2s;
  animation-iteration-count: infinite;
  -webkit-animation-name: 'fade';
  -webkit-animation-duration: 2s;
  -webkit-animation-iteration-count: infinite;
}
@keyframes 'fade' {
  0% {
    opacity: 0;
  }
  40% {
    opacity: 0.5;
  }
  60% {
    opacity: 0.5;
  }
  100% {
    opacity: 0;
  }
}
@-webkit-keyframes 'fade' {
  0% {
    opacity: 0;
  }
  40% {
    opacity: 0.5;
  }
  60% {
    opacity: 0.5;
  }
  100% {
    opacity: 0;
  }
} 
```

html:

```
<div class="fadeElement"></div> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-29T12:21:52.950

Firefox、Chrome 和 IE10+ 支持此功能。

在 Chris Coyier 的网站上查看更多信息：http: [//css-tricks.com/transitions-and-animations-on-css-generated-content/](http://css-tricks.com/transitions-and-animations-on-css-generated-content/)

# string - Set of strings efficient implementation

> ID：10798267
> 
> 赞同：1
> 
> 时间：2012-05-29T11:30:33.577
> 
> 标签：string, matlab, set

Is there an easy way to create a set of strings in Matlab?

I am going through a list of filepaths and want to get all names of folders at a specific level. But since in some folders there are several files, I get these folders several times.

I know there would be the possibility to create a cell array and check every time if the current folder name is already in the array, and if not, add it.

Another option would be to use the java HashSet class.

But is there any easy inbuilt Matlab way to do something like that? I can't use a Vector since it would create a vector of chars not strings.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T11:50:27.103

不幸的是，没有什么比 Java Set 实现更高效了。

但是您可以使用集合操作。无论`union`是当您添加时，还是只是使用重复项调用`unique`您的收藏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T11:52:56.233

您可以使用[`rdir`](http://www.mathworks.com/matlabcentral/fileexchange/19550-recursive-directory-listing/content/rdir.m)脚本... MATLAB 文件交换来救援！

像这样使用它：

```
listing = rdir(name); 
```

该函数返回一个`listing`类似于内置[`dir`](http://www.mathworks.com/help/techdoc/ref/dir.html)命令的结构。
它应该可以避免您自己遍历目录树的麻烦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-08T20:25:35.663

“独特”怎么样：

```
x = {'dog', 'cat', 'cat', 'fish', 'horse', 'bird', 'rat', 'rat'};    
x_set=unique(x)    
x_set =  
'bird'    'cat'    'dog'    'fish'    'horse'    'rat' 
```

# dynamics-crm - Dynamics CRM 2011 Import - Ignore Row

> ID：10798268
> 
> 赞同：2
> 
> 时间：2012-05-29T11:30:42.430
> 
> 标签：dynamics-crm, dynamics-crm-2011

I am importing data from csv file in CRM2011, I was wondering if there a way to ignore a complete row, eg, if type = P then add if type = S then ignore?

Cheers

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T13:02:43.243

使用 Data Management 区域的 Imports 部分，我认为您可能有机会使其工作的唯一方法是，如果您可以控制其他一些行值并使其无效，这将导致整行在您的 type 'S 上失败' 记录。

另一种选择是使用[SDK](http://www.microsoft.com/en-us/download/details.aspx?id=24004)并创建您自己的自定义数据映射例程，其中可以对处理哪些记录有更多的控制。

SDK 文档 [http://msdn.microsoft.com/en-us/library/hh547396.aspx](http://msdn.microsoft.com/en-us/library/hh547396.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T17:00:23.367

您可以鼓励 CRM 将您导入的行视为重复行或无效查找。或者您可以通过工作流来完成此操作。

例如，如果您将“类型”字段映射到一个属性，然后确保您有一个将该值设置为“S”的记录，然后设置一个重复规则以不允许具有非唯一“类型”的记录。 .这可能有效。

或者，您可以尝试将“类型”映射到其中没有“S”值的选项集。这可能有效，或者可能很重要，我不确定。

或者，您可以创建一个工作流来追溯删除“类型”字段为“S”的记录。

我的免责声明是，这些听起来对我来说都不是特别好的想法。

编辑：另一个选项是在 Excel 中编辑您的 CSV 并删除您不想要的行。这听起来确实是个好主意，因为这样您就不会要求导入向导做任何聪明的事情。

# html - after refresh how to check whether the checkbox is checked before refreshed in jsp

> ID：10798272
> 
> 赞同：0
> 
> 时间：2012-05-29T11:30:56.470
> 
> 标签：html, jsp

how to make a checkbox remain unchanged whether it is checked or unchecked though the page is refreshed manually or automatically? Can you please provide code in your answer?

```
<html>
<head>
<script>
function checkFirstVisit() {
  if(document.cookie.indexOf('mycookie')==-1) {
    // cookie doesn't exist, create it now
    document.cookie = 'mycookie=1';
  }
  else {
    // not first visit, so alert
    alert("refreshed");
    checked();
  }
}

function checked()
{
var ins1=document.getElementById("id");

if(ins1.checked)
    ins1.checked=true;

}
</script>
</head>
<body onLoad="checkFirstVisit()">
<input type="checkbox" id="id" >
<input type="checkbox" id="id" >
<input type="checkbox" id="id">
<input type="checkbox" id="id">
<input type="checkbox" id="id">
</body>
</html> 
```

# xslt - 将项目列表打印为多列 xsl-fo 表

> ID：10798273
> 
> 赞同：2
> 
> 时间：2012-05-29T11:31:16.553
> 
> 标签：xslt, xslt-1.0, xsl-fo

美好的一天，请指教。我有一个项目清单：

```
<List>
  <Item>
    <Description>Item 1</Description>
    <Code>0001</Code>
  </Item>
  <Item>
    <Description>Item 2</Description>
    <Code>0002</Code>
  </Item>
  <Item>
    <Description>Item 3</Description>
    <Code>0003</Code>
  </Item>
  <Item>
    <Description>Item 4</Description>
    <Code>0004</Code>
  </Item>
</List> 
```

我想打印一个包含这些项目的 3 列表，如下所示：

```
| Column 1 | Column 2 | Column 3 |
==================================
| Item 1   | Item 2   | Item 3   |
----------------------------------
| Item 4   |          |          |
---------------------------------- 
```

下面的代码为每个项目呈现表格单元格。它不会呈现第二行中第 2 列和第 3 列的单元格：

```
<fo:table>
  <fo:table-column width="82mm"/>
  <fo:table-column width="82mm"/>
  <fo:table-column width="82mm"/>
  <fo:table-body>
    <xsl:for-each select="/List/Item[position() mod 3 = 1]">
      <fo:table-row><xsl:apply-templates select=". | following-sibling::*[3 > position()]"/></fo:table-row>
    </xsl:for-each>
  </fo:table-body>
</fo:table>

<xsl:template match="Item">
  <fo:table-cell><fo:block><xsl:value-of select="Description"/></fo:block></fo:table-cell>
</xsl:template> 
```

然后将表格打印如下：

```
| Column 1 | Column 2 | Column 3 |
==================================
| Item 1   | Item 2   | Item 3   |
----------------------------------
| Item 4   |
------------ 
```

有没有一种优雅的方式来渲染空的表格单元格，使表格看起来很满？我必须使用 FOP 0.95，xsl 版本 1.0。

先感谢您

沃杰科技

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T12:29:15.370

**希望这会给您一个可能的解决方案的想法**：

让我们拥有这个简单的 XML 文档：

```
<nums>
  <num>01</num>
  <num>02</num>
  <num>03</num>
  <num>04</num>
  <num>05</num>
  <num>06</num>
  <num>07</num>
  <num>08</num>
  <num>09</num>
  <num>10</num>
</nums> 
```

**然后这个转变**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:fo="http://www.w3.org/1999/XSL/Format">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>

    <xsl:template match="/*">
        <fo:table>
            <fo:table-column width="82mm"/>
            <fo:table-column width="82mm"/>
            <fo:table-column width="82mm"/>
            <fo:table-body>
               <xsl:for-each select="*[position() mod 3 = 1]">
                 <fo:table-row>
                   <xsl:apply-templates select=
                                  ". | following-sibling::*[3 > position()]"/>

                        <xsl:variable name="vPos" select="position()"/>
                        <xsl:variable name="vUnfilled"
                             select=" 2 - count(following-sibling::*)"/>
                        <xsl:if test="position() = last()">
                         <xsl:for-each select=
                                   "../*[not(position() > $vUnfilled)]">
                            <fo:table-cell>
                                <fo:block>
                                    <xsl:value-of select="' '"/>
                                </fo:block>
                            </fo:table-cell>
                         </xsl:for-each>
                        </xsl:if>
                    </fo:table-row>
                </xsl:for-each>
            </fo:table-body>
        </fo:table>
    </xsl:template>

    <xsl:template match="num">
        <fo:table-cell>
            <fo:block>
                <xsl:value-of select="."/>
            </fo:block>
        </fo:table-cell>
    </xsl:template>
</xsl:stylesheet> 
```

**当应用于上述 XML 文档时，会生成一个表格，其中包含每行所需的完整单元格数**：

```
<fo:table xmlns:fo="http://www.w3.org/1999/XSL/Format">
   <fo:table-column width="82mm"/>
   <fo:table-column width="82mm"/>
   <fo:table-column width="82mm"/>
   <fo:table-body>
      <fo:table-row>
         <fo:table-cell>
            <fo:block>01</fo:block>
         </fo:table-cell>
         <fo:table-cell>
            <fo:block>02</fo:block>
         </fo:table-cell>
         <fo:table-cell>
            <fo:block>03</fo:block>
         </fo:table-cell>
      </fo:table-row>
      <fo:table-row>
         <fo:table-cell>
            <fo:block>04</fo:block>
         </fo:table-cell>
         <fo:table-cell>
            <fo:block>05</fo:block>
         </fo:table-cell>
         <fo:table-cell>
            <fo:block>06</fo:block>
         </fo:table-cell>
      </fo:table-row>
      <fo:table-row>
         <fo:table-cell>
            <fo:block>07</fo:block>
         </fo:table-cell>
         <fo:table-cell>
            <fo:block>08</fo:block>
         </fo:table-cell>
         <fo:table-cell>
            <fo:block>09</fo:block>
         </fo:table-cell>
      </fo:table-row>
      <fo:table-row>
         <fo:table-cell>
            <fo:block>10</fo:block>
         </fo:table-cell>
         <fo:table-cell>
            <fo:block> </fo:block>
         </fo:table-cell>
         <fo:table-cell>
            <fo:block> </fo:block>
         </fo:table-cell>
      </fo:table-row>
   </fo:table-body>
</fo:table> 
```

# java - Opening a database connection in a constructor, when should I close it?

> ID：10798274
> 
> 赞同：3
> 
> 时间：2012-05-29T11:31:21.783
> 
> 标签：java, database-connection, destructor

well, I've been thinking of making database requests a little faster by keeping the connection to the database open as long as the object is being used. So I was thinking of opening the connection in the constructor of that class. Now the question is, how can I close the connection after I stopped using? I have to call close() somewhere, don't I? I've been reading about the finalize() method, but people seemed to be skeptical about usage of this method anywhere at all. I'd expect it to have something like a destructor, but Java doesn't have that, so?

So could anyone provide me with a solution? Thanks in advance.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T11:35:09.083

我建议让你的类成为[java.io.Closeable](http://docs.oracle.com/javase/6/docs/api/java/io/Closeable.html)的实现者。根据这个接口，你必须实现`void close() throws IOException`类的所有客户端都会调用它，因为`Closeable`在使用后关闭类是一个好习惯。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-29T11:40:22.050

如果应用程序允许，我建议您宁愿实现数据库连接池。通过连接池，将创建一个连接池并保持与数据库的连接。然后，您的应用程序将从池中获取打开/未使用的连接，使用它并将其返回到池中。

这将使您能够更快地获得连接，并且您不必过多地修改您的类。如果您需要扩展应用程序，数据库连接池是一项很棒的技术。

另一个好处是您的数据库连接池将由某种驱动程序管理，该驱动程序将负责打开连接、保持连接、在需要时增加连接池，并在未使用一定数量的额外连接时缩小连接池。时间。这将类似于您尝试在构造函数和终结方法中实现的代码。

一般而言，您仅在需要时才获取数据库连接并尽快释放它。

# java - Convert KML file to SHP file in java

> ID：10798277
> 
> 赞同：2
> 
> 时间：2012-05-29T11:31:25.820
> 
> 标签：java, kml, shapefile

I have a KML file which contains multiple polygons and want to convert it to a shp file using java.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T21:35:01.310

[GDAL](http://gdal.org/)是一个用于处理各种地理数据类型的 C++ 库。它具有 Java 绑定。

您可以为 GDAL 库使用 Java 绑定。我不是 Java 专家，因此您需要进行研究，但这应该是一个很好的起点：[http ://trac.osgeo.org/gdal/wiki/GdalOgrInJava](http://trac.osgeo.org/gdal/wiki/GdalOgrInJava)

# content-management-system - Kentico CMS: Add a class attribute to the html tag in a Kentico Masterpage

> ID：10798280
> 
> 赞同：2
> 
> 时间：2012-05-29T11:31:35.737
> 
> 标签：content-management-system, kentico

How do you edit the HTML tag in a Kentico CMS Masterpage, i.e. to add a class attribute?

Currently I have this:

![Kentico masterpage html tag](../Images/a4b813fdf4126d10f9310935b2aa7e2c.png)

But I want:

```
<!DOCTYPE html>
<html class="myClass">
  <head>
    <title> 
```

From the screenshot you can see that the HTML tag is not editable.

Is there a way to edit the html tag or tell Kentico to write a class attribute to the html tag?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T22:35:01.297

您还可以在页面模板上使用“Head HTML”Web 部件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T11:42:33.250

我找到了一种解决方案：

我在这个文件的 HTML 标记中手动添加了一个类属性：-

`<solution>/CMSPages/PortalTemplate.aspx`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-22T17:46:35.920

令人失望的是，Kentico 仍然不支持开箱即用。`<html>`已提交能够直接从代码修改标签的请求：http: [//ideas.kentico.com/forums/239189-kentico-product-ideas/suggestions/5947264-ability-to-modify-page-head- section-and-html-tag](http://ideas.kentico.com/forums/239189-kentico-product-ideas/suggestions/5947264-ability-to-modify-page-head-section-and-html-tag) 同时使用以下解决方案：

## 门户引擎

根据[Dave Haigh](https://stackoverflow.com/a/10798442/548020)的建议，我通过以下方式解决了这个问题。在文件中`/CMSPages/PortalTemplate.aspx`更改以下行：

```
<html xmlns="http://www.w3.org/1999/xhtml" <%=XmlNamespace%>
    lang="<%=CMSContext.PreferredCultureCode%>"> 
```

## ASPX 引擎

在您的母版页中，将以下代码段添加到您的代码隐藏文件中：

```
<script runat="server">
protected void Page_Load(object sender, EventArgs e)
{
    if (CurrentDocument != null)
    {          
        CMS.UIControls.ContentPage page= this.Page as CMS.UIControls.ContentPage;
        if (page != null)
        {
            string lang= CMS.Localization.LocalizationContext.CurrentCulture.CultureCode;
            page.XmlNamespace += " lang=\"" + lang + "\"";
        }
    }
}
</script> 
```

*来源：[http ://devnet.kentico.com/questions/kentico-9-how-to-define-language-in-html](http://devnet.kentico.com/questions/kentico-9-how-to-define-language-in-html)*

# c++ - g ++从具有模板参数的类派生

> ID：10798286
> 
> 赞同：0
> 
> 时间：2012-05-29T11:31:48.597
> 
> 标签：c++, templates, g++, compiler-options

考虑以下代码：

```
template<class T>
class Base {
  public:
    void doSomething(){}
};

template<class T>
class Derived : public Base<T> {
  public:
    void doMore() {
      doSomething(); //Affected line
    }
}; 
```

在用“受影响的行”注释的行中，g++ (4.7) 说：

```
test.cc:11:16: error: there are no arguments to ‘doSomething’ that depend on a template parameter, so a declaration of ‘doSomething’ must be available [-fpermissive] 
```

现在我想知道：

*   如果模板参数 T 不存在，则不会发生此错误。有什么不同？
*   g++ 显然能够解决这个问题（如果我添加 -fpermissive 它编译得很好）。我假设 g++ 试图为我作为“用户”（程序员）提供最佳体验。当 g++ 不接受此代码时，对我有什么好处？

谢谢！弥敦道

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T11:49:49.407

如果您不添加`this`或`Base<T>`编写不符合标准的代码 - GCC 会阻止您这样做。另请参阅 GCC 4.7 的变更日志条目：

> G++ 现在正确地实现了两阶段查找规则，因此模板中使用的非限定名称必须在模板定义点的范围内或通过实例化点的参数相关查找找到适当的声明。因此，依赖于在实例化点进行第二次非限定查找以查找在模板之后或在依赖库中声明的函数的代码将被拒绝。编译器将建议修复受影响代码的方法，并且使用 -fpermissive 编译器标志将允许代码在编译时出现警告。

```
template <class T>
void f() { g(T()); } // error, g(int) not found by argument-dependent lookup
void g(int) { } // fix by moving this declaration before the declaration of f

template <class T>
struct A: T {
  // error, B::g(B) not found by argument-dependent lookup
  void f() { g(T()); } // fix by using this->g or A::g
};

struct B { void g(B); };

int main()
{
  f<int>();
  A<B>().f();
} 
```

（在这里找到：http: [//gcc.gnu.org/gcc-4.7/changes.html](http://gcc.gnu.org/gcc-4.7/changes.html)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T13:06:29.237

GCC[详细诊断](http://gcc.gnu.org/wiki/VerboseDiagnostics#error%3a_there_are_no_arguments_to_.27f.27_that_depend_on_a_template_parameter.2C_so_a_declaration_of_.27f.27_must_be_available)wiki 页面对此进行了介绍。

> *当 g++ 不接受此代码时，对我有什么好处？*

It conforms to the standard and agrees with other compilers, ensuring your code is portable and correct.

# javascript - Using ColorBox inside a GridView in asp.net

> ID：10798291
> 
> 赞同：0
> 
> 时间：2012-05-29T11:32:20.113
> 
> 标签：javascript, asp.net, gridview, colorbox

I am using [ColorBox](http://www.jacklmoore.com/colorbox) library for a link inside a `GridView` row, but the `colorbox` don't show the popup window, but it redirect to the page.. If I took the same link to outside ,, it opens the `colobox` window .. why ?

The link to open the colorbox window :

```
<a id="ctl00_ContentPlaceHolder1_gvFSuper_ctl07_HyperLink1" href="AddStaff.aspx" class="showColorBox">Test</a> 
```

javascript:

```
 jQuery(document).ready(function ($) {
        $(".showColorBox").colorbox({ iframe: true, innerWidth: 800, innerHeight: 400 });
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T16:46:10.350

在您尝试为其分配颜色框时，该链接是否存在于文档中？如果没有，您可能必须使用事件委托。例如：

```
$('document').on('click', '.showColorBox', function(e){
    $.colorbox({href: this.href, iframe: true, innerWidth: 800, innerHeight: 400})
    e.preventDefault();
}); 
```

# .net - 使用 .net 进行 xslt 转换的缩进和文本节点

> ID：10798295
> 
> 赞同：2
> 
> 时间：2012-05-29T11:32:41.737
> 
> 标签：.net, xslt, xslt-1.0

我正在将 XML 转换为 XML，并希望自动缩进结果。
所以我使用`<xsl:output method="xml" indent="yes"/>`
当通过 .net4 编译转换运行它时，只要输出上没有文本节点，它就可以很好地工作。
一旦我添加了一些文本`<xsl:text>some text</xsl:text>`，整个 xml 文件的缩进就消失了，结果 XML 由一些非常长的行组成（格式良好但不可读......）

例子：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes"/>

  <xsl:template match="/">
    <Root>
      <!--xsl:text>some test</xsl:text-->
      <Test1/>
      <Test2/>
    </Root>
  </xsl:template>

</xsl:stylesheet> 
```

结果：

```
<?xml version="1.0" encoding="utf-8"?>
<Root>
  <Test1 />
  <Test2 />
</Root> 
```

删除评论时的结果`<xsl:text>some test</xsl:text>`：

```
<?xml version="1.0" encoding="utf-8"?>
<Root>some test<Test1 /><Test2 /></Root> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T12:11:04.770

**用 指定的缩进**：

```
<xsl:output indent="yes"/> 
```

**[仅影响仅空白节点的处理](http://www.w3.org/TR/1999/REC-xslt-19991116#section-XML-Output-Method)**。

每当您指定非纯空白文本节点时，您必须为它们提供您自己的缩进——您自己。

# c# - 计时器在第二次迭代后不更新事件

> ID：10798300
> 
> 赞同：0
> 
> 时间：2012-05-29T11:32:53.960
> 
> 标签：c#, timer, timeout

我正在使用计时器 -

```
static int count = 0;

private void button1_Click(object sender, EventArgs e)
    {
        // set time
        timer1.Interval = System.Convert.ToInt32(textBox2.Text) * 1000;
        // start timer
        timer1.Enabled = true;

        // set iterations
        count = System.Convert.ToInt32(textBox3.Text);

    } 
```

勾号在哪里——

```
private void timer1_Tick_1(object sender, EventArgs e)
    {
        count--;
        if (count == 0)
        {
            timer1.Enabled = false;

        }
        listBox1.Items.Add(textBox1.Text + " : " + count.ToString());

        var status = textBox1.Text + " : " + count.ToString();
        } 
```

当我将时间设置为每秒打勾并将计数设置为 4 时，我假设这将每秒运行一次事件，并重复 4 次。但是，一旦它重复该事件 3 次，它就会崩溃。列表框更新为 -

```
test : 3
test : 2
test : 1 
```

错误是 -

```
The operation has timed out 
```

我相信这可能是因为我在计时器滴答声内发出网络请求 - `

```
 HttpWebRequest request = (HttpWebRequest)WebRequest.Create(resource_url);
        request.Headers.Add("Authorization", authHeader);
        request.Method = "POST";
        request.ContentType = "application/x-www-form-urlencoded";
        using (Stream stream = request.GetRequestStream())
        {
            byte[] content = ASCIIEncoding.ASCII.GetBytes(postBody);
            stream.Write(content, 0, content.Length);
        }
        WebResponse response = request.GetResponse();` 
```

我怎样才能解决这个问题？进一步阅读表明，当对 URL 进行超过 2 次调用时会出现此错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T11:37:32.540

尝试`timer1.Stop()`代替`timer1.Enabled = false;`

```
if (count == 0)
{
   timer1.Stop();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T15:04:40.817

我不得不添加 -

```
response.Close(); 
```

行后 -

```
WebResponse response = request.GetResponse(); 
```

# powershell - Powershell Get-ChildItem -recurse 没有得到所有项目

> ID：10798301
> 
> 赞同：8
> 
> 时间：2012-05-29T11:33:02.443
> 
> 标签：powershell, recursion, delete-file, subdirectory, get-childitem

我正在编写一个 powershell 脚本，从文件夹中删除某些文件，并将其余文件移动到预定义的子文件夹中。

我的结构看起来像这样

```
Main
    (Contains a bunch of pdb and dll files)
    -- _publish
        --Website
            (Contains a web.config, two other .config files and a global.asax file)
            -- bin
                (Contains a pdb and dll file)
            -- JS
            -- Pages
            -- Resources 
```

我想在开始移动之前从整个文件结构中删除所有 pdb、config 和 asax 文件。我使用的：

```
$pdbfiles = Get-ChildItem "$executingScriptDirectory\*.pdb" -recurse

foreach ($file in $pdbfiles) {
    Remove-Item $file
} 
```

对于我需要删除的所有文件类型，依此类推。除了位于网站 bin 文件夹中的 pdb 文件外，它工作得很好。对于网站文件夹中的 ASAX 文件。由于某种原因，它们被 Get-ChildItem 递归搜索忽略。

这是由递归结构中项目的深度引起的吗？或者是别的什么？我该如何修复它，所以它会按照指定的方式删除所有文件。

**编辑：我尝试添加 -force - 但它没有改变**

**答案：以下工作：**

```
$include = @("*.asax","*.pdb","*.config")
$removefiles = Get-ChildItem "$executingScriptDirectory\*" -recurse -force -include $include 

foreach ($file in $removefiles) {
    if ($file.Name -ne "Web.config") {
        Remove-Item $file
    }
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-29T11:55:48.163

```
Get-ChildItem -path <yourpath> -recurse -Include *.pdb 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-01T14:36:26.070

您还可以使用管道进行删除：

```
Get-ChildItem -path <yourpath> -recurse -Include *.pdb | rm 
```

# javascript - Jquery output link's alt on hover

> ID：10798302
> 
> 赞同：0
> 
> 时间：2012-05-29T11:33:02.780
> 
> 标签：javascript, jquery, html

I am trying to output the link's "alt" on hover. (Text is showing up in `#container` div).

This is what i have been trying so far (it doesnt work):

If you have any better ideas, please suggest.

**HTML**

```
<div><a href="#" class="heroes" alt="necromancer">Icon</a></div>

<div><a href="#" class="heroes" alt="witch">Icon</a></div>

<div><a href="#" class="heroes" alt="barbarian">Icon</a></div>

<div><a href="#" class="heroes" alt="troll">Icon</a></div>

<div id="container"></div> 
```

**JS:**

```
$('.container').hover(function() {
    var hero = $(this).attr('alt');
    $('#container').text(hero);
}, function() {
    $('#container').text("");
}); 
```

> **JSFIDDLE: [http://jsfiddle.net/XDky6/](http://jsfiddle.net/XDky6/)**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T11:36:55.820

```
$('.heroes').hover(function() {
    var hero = $(this).attr('alt');
    $('#container').text(hero);
}, function() {
    $('#container').text("");
}); 
```

`hover`应该叫上`$('.heroes')`，不是`$('.container')`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T11:37:13.817

你打错了你的代码。您正在引用错误的课程。

应该是`.heroes`，但它是`.container`。

固定代码：

```
 $('.heroes').hover(function() { 
    var hero = $(this).attr('alt'); 
    $('#container').text(hero); 
}, function() { 
    $('#container').text(""); 
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T11:37:33.823

```
$('.heroes').hover(
 function() {
    var hero = $(this).attr('alt');
    $('#container').text(hero);
},
function() {
    $('#container').text("");}
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T11:38:36.397

**工作演示** [http://jsfiddle.net/RdSCV/1/](http://jsfiddle.net/RdSCV/1/)

通过了错误的课程，即正确的课程是`.heroes`

**代码**

```
$('.heroes').hover(function() {
    var hero = $(this).attr('alt');
    $('#container').text(hero);
}, function() {
    $('#container').text("");
});​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-29T11:40:21.287

初始选择器不正确。更改`.container`为`.heroes`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-29T13:01:45.710

如果您可以接受`alt`链接旁边显示的文本，则：

```
<style>
a:hover:after {
  content: attr(alt);
  position: absolute;
  background: #fff;
  padding: 2px;
  border: 1px solid #999;
  box-shadow: 1px 1px 5px #bbb;
}
</style> 
```

# qt - 如何在我自己的 Qt 小部件中绘制标题？

> ID：10798303
> 
> 赞同：0
> 
> 时间：2012-05-29T11:33:04.670
> 
> 标签：qt, user-interface, widget, draw

有谁知道如何在我自己的小部件中绘制标题（和其他简单元素），就像在 QTreeWidget 中一样？我想使用样式并调用类似：drawElement（CE_Header，rect，painter）；在指定的矩形中绘制标准标题。

QStyle::drawControl 不能这样做，因为它会控制整个小部件。

Qt 文档对此并没有多说。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T12:24:57.397

子类`QHeaderView`化并重新实现该`paint`方法，在那里您可以使用`QStyleOption`数据。然后使用`QTreeWidget::setHeader(QHeaderView* header)`在小部件中设置您的标题。

# latex - 自定义字幕前缀

> ID：10798307
> 
> 赞同：3
> 
> 时间：2012-05-29T11:33:27.930
> 
> 标签：latex, listings

使用时：

```
\begin{listing}
...
\caption{foo}
\end{listing} 
```

标题会说：`Listing x: foo`。我怎样才能`Listing`用别的东西代替这个词？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-23T19:03:32.920

如果您使用的是 minted（我是，而且我的来源看起来像您的），您可能想尝试

```
\renewcommand{\listingscaption}{Some fancy listing} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T11:38:39.480

您可能想阅读手册

[http://mirror.switch.ch/ftp/mirror/tex/macros/latex/contrib/listings/listings.pdf](http://mirror.switch.ch/ftp/mirror/tex/macros/latex/contrib/listings/listings.pdf)

第 32 页

```
\begin{listing}[caption=Some fancy listing] 
```

或尝试

```
\begin{listing}[title=Some fancy listing] 
```

或尝试

```
\renewcommand{\lstlistingname}{A funny listing} 
```

对我有用的最小示例：

```
\documentclass{article}

\usepackage{listings}
\renewcommand{\lstlistingname}{Something}

\begin{document}
Some text.
\begin{lstlisting}[caption=wwww]
xxxx
\end{lstlisting}
Some more text.
\end{document} 
```

# google-app-engine - 如何在 GWT 中的小部件之间共享数据资源

> ID：10798309
> 
> 赞同：0
> 
> 时间：2012-05-29T11:33:32.717
> 
> 标签：google-app-engine, gwt, rpc, data-sharing, gwt-widgets

我正在为一个项目使用 GWT 和 AppEngine。我想知道如何在小部件之间共享数据（ArrayList 对象），这样我就可以集中逻辑并减少对服务器的 RPC 调用次数。

我想到了两种方法，但我不知道哪个更好：

**1）**当我实例化小部件时，我将 ArrayList 对象作为参数传递，尽管我不知道该怎么做，因为小部件被实例化为：

```
 ThisAppShell shell = GWT.create(ThisAppShell.class); 
```

**2)**通过使用类似 eventBus 的机制

[http://www.dev-articles.com/article/Gwt-EventBus-(HandlerManager)-the-easy-way-396001](http://www.dev-articles.com/article/Gwt-EventBus-(HandlerManager)-the-easy-way-396001)

当用户加载应用程序时，在登录过程完成后，我想下载一个应该可用于所有小部件的员工列表。这一切都应该在 onModuleLoad() 方法中完成。我想在启动时下载它们，因为我想实现某种缓存机制。例如，我想要 2 个 ArrayList 实例： - emplListOnStart，它在应用程序加载时填充 - emplListChanges，一个数组，用户将从内部小部件进行修改。

用户完成更改后（他按下“保存”按钮），将比较两个数组，差异将保存在 appengine（通过 RPC）中，并在 emplListOnStart 中更新。

这是 EntryPoint 类的代码：

```
public class ThisApp implements EntryPoint {
ThisAppShell shell = GWT.create(ThisAppShell.class);
LoginServiceAsync loginService = GWT.create(LoginService.class);

private ArrayList<Employee> emplListOnStart;

private ArrayList<Employee> emplListChanges;

public void onModuleLoad() {
    RootLayoutPanel.get().clear();
    RootLayoutPanel.get().add(shell);
    loginService.isAuthenticated(new AsyncCallback<UserDto>() {

        public void onFailure(Throwable caught) {
            // TODO Auto-generated method stub

        }

        public void onSuccess(UserDto result) {
                             //Here I should load the emplListOnStart list;
        }

    });
    shell.getLogoutLink().addClickHandler(new ClickHandler() {
        public void onClick(ClickEvent event) {
            loginService.logout(new AsyncCallback() {
                public void onFailure(Throwable caught) {

                }

                public void onSuccess(Object result) {
                                             //Here the user will get logged out
                }
            });
            Window.Location.assign("");
        }
    });

   }
} 
```

这是小部件的代码：

```
public class ThisAppShell extends Composite {

private static ThisAppShellUiBinder uiBinder = GWT
        .create(ThisAppShellUiBinder.class);

interface ThisAppShellUiBinder extends UiBinder<Widget, ThisAppShell> {
}

@UiField
Anchor logout_link;
@UiField
StackLayoutPanel stackLPanel;
@UiField
TabLayoutPanel tabLPanel;

public ThisAppShell() {
    initWidget(uiBinder.createAndBindUi(this));

    initializeWidget();
}

public void initializeWidget() {
    stackLPanel.add(new HTML("Manage empl."), new HTML("Employees"), 30);
    stackLPanel.add(new HTML("Manage Dept."), new HTML("Departments"), 30);

    // Add a home tab
    HTML homeText = new HTML("This is the home tab");
    tabLPanel.add(homeText, "Home");

    // Add a tab
    HTML moreInfo = new HTML("This is the more info tab");
    tabLPanel.add(moreInfo, "More info");

    // Return the content
    tabLPanel.selectTab(0);
}

public Anchor getLogoutLink() {
    return logout_link;
}

} 
```

这可能吗，或者如何才能做得更好？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T14:29:56.633

我认为有两种方法可以做到：

1.  在您的小部件上创建一个 setter 来设置您的 ArrayList 实例 ( `setData()`)。`onSuccess`然后，您可以在loginService的方法中调用此函数。

2.  将全局的单例实例`EventBus`注入您的小部件（使用 gin/guice）并触发包含您的数据的事件。在小部件中，您必须为特定事件（即`LoadEmplListEvent`）附加一个 EventHandler。

我认为这两种解决方案都可以使用。解决方案一创建了与您的小部件更紧密的耦合，但更易于实现，我认为如果您只有少量小部件用于处理数据，那么您应该采用这条路线。

解决方案是一种更简洁的方法，因为它将您的小部件与其他小部件分离。您将事件中的数据触发`onSuccess`一次，并且您不关心小部件。
对数据感兴趣的小部件将确保它们适当地处理事件（通过处理事件）。我想如果您有很多必须处理数据的小部件，那么第二种方法就是要采用的方法。

# jaxb - CXF JAXB 数据绑定问题 - java.io.Serializable 是一个接口，而 JAXB 无法处理接口

> ID：10798310
> 
> 赞同：2
> 
> 时间：2012-05-29T11:33:45.083
> 
> 标签：jaxb, cxf

我有以下代码

```
@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class SamplePojo {
    private Serializable id;
    private String name;

    public Serializable getId() {
        return id;
    }
    public void setId(Serializable id) {
        this.id = id;
    }
    public String getName() {
        return name;
    }
    public void setName(String name) {
    this.name = name;
    }
} 
```

和一个简单的网络服务界面，

```
@WebService
public interface SampleManagementService {
    @WebMethod
    @WebResult(name = "samplePojo")
    public SamplePojo update(@WebParam(name = "samplePojo") SamplePojo pojo) throws SampleException;
} 
```

我正在使用 CXF-2.3.6 并`org.apache.cxf.tools.java2ws.JavaToWS`从 java 代码生成 WSDL。当我运行命令时

```
java2ws -verbose -o sample.wsdl -wsdl -frontend jaxws com.test.cxf.webservice.sample.SampleManagementService
```

我得到以下异常

```
cxfJavaToWSDL:
     [java] java2ws -verbose -o sample.wsdl -wsdl -frontend jaxws com.test.cxf.webservice.sample.SampleManagementService
     [java] java2ws - Apache CXF 2.3.6
     [java]
     [java] May 29, 2012 4:51:48 PM org.apache.cxf.service.factory.ReflectionServiceFactoryBean buildServiceFromClass
     [java] INFO: Creating Service {http://sample.webservice.cxf.test.com/}SampleManagementServiceService from class com.test.cxf.webservice.sample.SampleManagementService
     [java] Error: java.lang.RuntimeException: org.apache.cxf.service.factory.ServiceConstructionException
     [java]
     [java] java.lang.RuntimeException: org.apache.cxf.service.factory.ServiceConstructionException
     [java]     at org.apache.cxf.frontend.AbstractServiceFactory.createService(AbstractServiceFactory.java:80)
     [java]     at org.apache.cxf.tools.java2wsdl.processor.JavaToWSDLProcessor.process(JavaToWSDLProcessor.java:101)
     [java]     at org.apache.cxf.tools.java2ws.JavaToWSContainer.processWSDL(JavaToWSContainer.java:110)
     [java]     at org.apache.cxf.tools.java2ws.JavaToWSContainer.execute(JavaToWSContainer.java:75)
     [java]     at org.apache.cxf.tools.common.toolspec.ToolRunner.runTool(ToolRunner.java:103)
     [java]     at org.apache.cxf.tools.common.toolspec.ToolRunner.runTool(ToolRunner.java:58)
     [java]     at org.apache.cxf.tools.common.toolspec.ToolRunner.runTool(ToolRunner.java:40)
     [java]     at org.apache.cxf.tools.java2ws.JavaToWS.run(JavaToWS.java:77)
     [java]     at org.apache.cxf.tools.java2ws.JavaToWS.main(JavaToWS.java:45)
     [java] Caused by: org.apache.cxf.service.factory.ServiceConstructionException
     [java]     at org.apache.cxf.jaxb.JAXBDataBinding.initialize(JAXBDataBinding.java:341)
     [java]     at org.apache.cxf.service.factory.AbstractServiceFactoryBean.initializeDataBindings(AbstractServiceFactoryBean.java:86)
     [java]     at org.apache.cxf.service.factory.ReflectionServiceFactoryBean.buildServiceFromClass(ReflectionServiceFactoryBean.java:442)
     [java]     at org.apache.cxf.jaxws.support.JaxWsServiceFactoryBean.buildServiceFromClass(JaxWsServiceFactoryBean.java:682)
     [java]     at org.apache.cxf.service.factory.ReflectionServiceFactoryBean.initializeServiceModel(ReflectionServiceFactoryBean.java:505)
     [java]     at org.apache.cxf.service.factory.ReflectionServiceFactoryBean.create(ReflectionServiceFactoryBean.java:242)
     [java]     at org.apache.cxf.jaxws.support.JaxWsServiceFactoryBean.create(JaxWsServiceFactoryBean.java:202)
     [java]     at org.apache.cxf.frontend.AbstractWSDLBasedEndpointFactory.createEndpoint(AbstractWSDLBasedEndpointFactory.java:101)
     [java]     at org.apache.cxf.frontend.AbstractServiceFactory.createService(AbstractServiceFactory.java:78)
     [java]     ... 8 more
     [java] Caused by: com.sun.xml.bind.v2.runtime.IllegalAnnotationsException: 3 counts of IllegalAnnotationExceptions
     [java] Adapter com.test.cxf.webservice.sample.SerializableAdapter is not applicable to the field type java.io.Serializable.
     [java]     this problem is related to the following location:
     [java]             at @javax.xml.bind.annotation.adapters.XmlJavaTypeAdapter(type=class javax.xml.bind.annotation.adapters.XmlJavaTypeAdapter$DEFAULT, value=class com.test.cxf.webservice.sample.SerializableAdapter)
     [java]             at private java.io.Serializable com.test.cxf.webservice.sample.SamplePojo.id
     [java]             at com.test.cxf.webservice.sample.SamplePojo
     [java]             at private com.test.cxf.webservice.sample.SamplePojo com.test.cxf.webservice.sample.jaxws_asm.Update.samplePojo
     [java]             at com.test.cxf.webservice.sample.jaxws_asm.Update
     [java] java.io.Serializable is an interface, and JAXB can't handle interfaces.
     [java]     this problem is related to the following location:
     [java]             at java.io.Serializable
     [java]             at private java.io.Serializable com.test.cxf.webservice.sample.SamplePojo.id
     [java]             at com.test.cxf.webservice.sample.SamplePojo
     [java]             at private com.test.cxf.webservice.sample.SamplePojo com.test.cxf.webservice.sample.jaxws_asm.Update.samplePojo
     [java]             at com.test.cxf.webservice.sample.jaxws_asm.Update
     [java] java.io.Serializable does not have a no-arg default constructor.
     [java]     this problem is related to the following location:
     [java]             at java.io.Serializable
     [java]             at private java.io.Serializable com.test.cxf.webservice.sample.SamplePojo.id
     [java]             at com.test.cxf.webservice.sample.SamplePojo
     [java]             at private com.test.cxf.webservice.sample.SamplePojo com.test.cxf.webservice.sample.jaxws_asm.Update.samplePojo
     [java]             at com.test.cxf.webservice.sample.jaxws_asm.Update
     [java]
     [java]     at com.sun.xml.bind.v2.runtime.IllegalAnnotationsException$Builder.check(IllegalAnnotationsException.java:102)
     [java]     at com.sun.xml.bind.v2.runtime.JAXBContextImpl.getTypeInfoSet(JAXBContextImpl.java:472)
     [java]     at com.sun.xml.bind.v2.runtime.JAXBContextImpl.<init>(JAXBContextImpl.java:302)
     [java]     at com.sun.xml.bind.v2.runtime.JAXBContextImpl$JAXBContextBuilder.build(JAXBContextImpl.java:1140) 
```

我试图创造`SerializableAdapter`，但没有运气。谁能告诉我处理`Serializable`参数传递的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T12:44:11.047

那是行不通的。`Serializable`不能由 JAXB 处理，这是 CXF 在处理 Java 和 XML 之间的实际转换时使用的绑定引擎。

要修复，您必须决定是否需要`id`XML 中的属性。如果你不这样做，只需标记 getter`@XmlTransient`就可以了。但是，如果您*确实*想要一个 id，那么您必须决定如何将它映射到一个字符串（如果该字段是一个具体的类，而不仅仅是任何旧的任意可序列化的东西，这会简单得多）。如果您的转换`String`效果很好，您只需将您的属性更改为字符串属性或制作假属性：

```
@XmlRootElement
@XmlAccessorType(XmlAccessType.NONE) // Note the change here too!
public class SamplePojo {
    private Serializable id;
    private String name;

    @XmlTransient
    public Serializable getId() {
        return id;
    }
    public void setId(Serializable id) {
        this.id = id;
    }

    @XmlElement(name = "id")
    public String getStringId() {
        return id.toString(); // Or whatever...
    }
    public void setStringId(String id) {
        this.id = IdFactory.getIdFromString(id); // Or whatever...
    }

    @XmlElement
    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T13:26:45.607

You can use an `XmlAdapter` for this use case. You will need to specify a value type that is mappable (`String` in the example below) and then provide the necessary conversion logic:

**SerializableAdapter**

```
package forum10798310;

import java.io.Serializable; import javax.xml.bind.annotation.adapters.XmlAdapter;

public class SerializableAdapter extends XmlAdapter<String, Serializable>{

    @Override
    public Serializable unmarshal(String v) throws Exception {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public String marshal(Serializable v) throws Exception {
        // TODO Auto-generated method stub
        return null;
    }

} 
```

**SamplePojo**

The `@XmlJavaTypeAdapter` annotation is used to link in the `XmlAdapter`.

```
package forum10798310;

import java.io.Serializable;

import javax.xml.bind.annotation.*;
import javax.xml.bind.annotation.adapters.XmlJavaTypeAdapter;

@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class SamplePojo {
    @XmlJavaTypeAdapter(SerializableAdapter.class)
    private Serializable id;
    private String name;

    public Serializable getId() {
        return id;
    }
    public void setId(Serializable id) {
        this.id = id;
    }
    public String getName() {
        return name;
    }
    public void setName(String name) {
    this.name = name;
    }
} 
```

# css - 如何设置相同高度的div

> ID：10798313
> 
> 赞同：2
> 
> 时间：2012-05-29T11:33:59.007
> 
> 标签：css

这是我的情况

**HTML**

```
<div id="content">
    <div id="item1">
        <div class="empty">&nbsp;</div>
        <div class="empty">&nbsp;</div>
        <div class="empty">&nbsp;</div>
    </div>
    <div id="item2">
        <div class="empty">&nbsp;</div>
    </div>
</div> 
```

**CSS**

```
.empty
{
    width: 100px;
    height: 100px;
    background-color: red;
}

#item1
{
    float: left;
    padding: 10px;
    background-color: green;
}

#item2
{
    float: left;
    padding: 10px;
    background-color: blue;
}

#content
{
    padding: 10px;
    background-color: pink;
    overflow: hidden;
} 
```

这看起来[http://jsfiddle.net/59qEt/3/](http://jsfiddle.net/59qEt/3/)

所以我的问题是：我必须如何将我的样式设置为 #item2 具有与 #item1 相同的高度？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T11:37:24.750

您可以为此使用**display:table-cell**属性。并删除`float:left`这样的写：

```
#item1, #item2
{
    display:table-cell;
} 
```

检查这个[http://jsfiddle.net/59qEt/5/](http://jsfiddle.net/59qEt/5/)

请注意，它可以工作到 IE8 及更高版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T11:40:44.677

`div`在第 1 项中，您每个都`div`使用3 `padding:10px;`，在第 2 项中只有 1 个`div`，您可以在第 2 项中做 2 件事 1 添加 3`div`和选项 2。适用`height`于第 2 项和第 2 项子项为空

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T11:55:01.900

你可以尝试这样的事情：

```
#item2 > div {
    padding-bottom:200px;
} 
```

这是这个的小提琴：

[http://jsfiddle.net/59qEt/24/](http://jsfiddle.net/59qEt/24/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T12:01:52.183

从 css 中删除 item2 `

```
<div id="item1">
    <div class="empty">&nbsp;</div>
    <div class="empty">&nbsp;</div>
    <div class="empty">&nbsp;</div>
</div>
<div id="item1">
    <div class="empty">&nbsp;</div>
</div> 
```

`

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-29T11:43:51.487

只需添加两串 JavaScript **[http://jsfiddle.net/59qEt/20/](http://jsfiddle.net/59qEt/20/)** 适用于所有浏览器

# perl - 无法在 PERL CGI 中调用提交查询

> ID：10798320
> 
> 赞同：0
> 
> 时间：2012-05-29T11:34:30.910
> 
> 标签：perl, cgi

嘿，所以我正在尝试制作一个简单的“约会网站”，但是我在 CGI 方面苦苦挣扎 :( 主要是我在表单方面遇到了麻烦（我想我不太确定自己在苦苦挣扎）。

我有这个声明

```
print header, start_html("EngCupid"), h2("EngCupid"), start_form;

if (!param() || param("home")) {
    show_welcome();
} elsif (param("browse")) {
    browse_page();
} elsif (param("search")) {
    search_users();
} elsif (param("username")) {
    search_results(); 
} else {
    print "fail";
}   
print end_form, end_html;
exit 0; 
```

处理网站的一般导航。但是，在这些功能中提交按钮等时我很挣扎。所以我的 browse_page() 函数是

```
sub browse_page {
        print h2("Browse Page");
    print p;
    if (param("next")) {
        $hidden_variable = param("x") + 1;
    }
    param('x', $hidden_variable);
    $hidden_variable = 0;
    print hidden('x');
    print submit("next", "Next");
    print submit("home", "Home"), " ", submit("search", "Search Users");

} 
```

每次按下下一个键时，这应该会增加一个变量，我需要将其用于更多功能。但是，每当我按下下一个键时，它只会打印失败，因为表单没有通过？

我在打印的每个函数中都需要一个新表单吗？我试过了，但还是不行。一般只是有点迷失在形式上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T11:43:12.193

我不确定您要达到的目标。也许问题是`x`没有从客户端发送回服务器，也许你想要

```
print hidden('x', param('x')); 
```

另外，为什么设置`$hidden_variable`为0？提交后，脚本将再次运行，变量的旧值将无法再访问。

# iphone - 有没有办法检测正在运行的应用程序，而我的应用程序在 ios 的后台？

> ID：10798322
> 
> 赞同：1
> 
> 时间：2012-05-29T11:34:36.363
> 
> 标签：iphone, ios, cocoa-touch, ios4

当我的 ios 应用程序在后台时，我需要检测正在运行的应用程序。基本上我需要知道用户是否启动了 Safari 应用程序？

有没有办法做到这一点？据我所知，当应用程序处于后台时，它可能会暂停，或者只能做很少的事情。很感谢任何形式的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T11:37:56.667

您只能检测您的应用程序是否进入后台，没有关于其他应用程序的信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T11:54:39.480

一个警告是，在您的应用程序中，您可以测试另一个可用的应用程序：

```
- (BOOL)canOpenURL:(NSURL *)url 
```

这可以告诉您当前设备是否安装了特定应用程序，如果该应用程序设置为处理从另一个应用程序启动的 url 方案。

[苹果的文档](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIApplication_Class/Reference/Reference.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T11:37:12.920

不，没有这样的方法。Apple 禁止您在应用程序范围之外尝试了解的任何内容。

# javascript - jQuery 代码：从父到子开始；不是从孩子到父母

> ID：10798332
> 
> 赞同：-1
> 
> 时间：2012-05-29T11:35:10.747
> 
> 标签：javascript, jquery, html, css

我有以下 HTML 表格。在每一行的最后一列有三个按钮。单击查看按钮时，我需要获取相应行的消费者 ID。我有以下 jQuery 代码。[http://jsfiddle.net/Lijo/nUbB2/](http://jsfiddle.net/Lijo/nUbB2/)

1）有更好的jQuery代码吗？

2）目前我首先找到按钮 - 然后是它的父行 - 然后是消费者 ID 列。有没有办法从行开始，然后分别找到按钮和消费者ID列？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>

 </title>

<script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jquery/jquery-1.4.1.js"></script>
<script type="text/javascript">

    $(document).ready(function () {

        $('.resultGridTable tr > td > .actionButtonView').click(function () {
            //TRaversing to get the parent row and then the required columns in the row
            var consumerID = $(this).parents('tr:first').find('td:first').text();
            var consumerName = $(this).parents('tr:first').find('td:nth-child(2)').text();
            var configID = $(this).parents('tr:first').find('td:nth-child(5)').text();

            alert(consumerID + "," + consumerName + "," + configID);

            //window.location.href("SubscribedAssociates.aspx?ConsumerID=" + consumerID + "&consumerName=" + consumerName + "&configID=" + configID);
            return false;

        });

    });
</script>
</head>

<body>
<table class="resultGridTable" cellspacing="0" id="detailContentPlaceholder_grdConsumers"
    style="border-collapse: collapse;">
    <thead>
        <tr>
            <th scope="col">
                <a>Consumer ID</a>
            </th>
            <th scope="col">
                <a>Consumer Name</a>
            </th>
            <th scope="col">
                <a>Consumer URL</a>
            </th>
            <th scope="col">
                <a>Status</a>
            </th>
            <th scope="col">
                <a>Config ID</a>
            </th>
            <th scope="col">
                Action
            </th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>
                <a href="SubscribedAssociates.aspx?ConsumerID=101">101</a>
            </td>
            <td>
                Consumer1
            </td>
            <td>
                http://Consumer1.compnay.com/wps/payroll
            </td>
            <td>
                Active
            </td>
            <td>
                101
            </td>
            <td>
                <input type="submit" name="ctl00$detailContentPlaceholder$grdConsumers$ctl02$btnView"
                    value="VIEW" id="detailContentPlaceholder_grdConsumers_btnView_0" class="actionButtonView"
                    style="color: White; background-color: Orange; font-weight: bold; width: 35px" />
                <input type="submit" name="ctl00$detailContentPlaceholder$grdConsumers$ctl02$btnEdit"
                    value="EDIT" id="detailContentPlaceholder_grdConsumers_btnEdit_0" class="actionButtonEdit"
                    style="color: White; background-color: Orange; font-weight: bold; width: 35px" />
                <input type="submit" name="ctl00$detailContentPlaceholder$grdConsumers$ctl02$btnDelete"
                    value="DELETE" id="detailContentPlaceholder_grdConsumers_btnDelete_0" class="actionButtonDelete"
                    style="color: White; background-color: Orange; font-weight: bold; width: 45px" />
            </td>
        </tr>
        <tr style="background-color: #E5E5E5;">
            <td>
                <a href="SubscribedAssociates.aspx?ConsumerID=102">102</a>
            </td>
            <td>
                Consumer2
            </td>
            <td>
                http://Consumer2.compnay.com/prd/sap/operations
            </td>
            <td>
                Active
            </td>
            <td>
                102
            </td>
            <td>
                <input type="submit" name="ctl00$detailContentPlaceholder$grdConsumers$ctl03$btnView"
                    value="VIEW" id="detailContentPlaceholder_grdConsumers_btnView_1" class="actionButtonView"
                    style="color: White; background-color: Orange; font-weight: bold; width: 35px" />
                <input type="submit" name="ctl00$detailContentPlaceholder$grdConsumers$ctl03$btnEdit"
                    value="EDIT" id="detailContentPlaceholder_grdConsumers_btnEdit_1" class="actionButtonEdit"
                    style="color: White; background-color: Orange; font-weight: bold; width: 35px" />
                <input type="submit" name="ctl00$detailContentPlaceholder$grdConsumers$ctl03$btnDelete"
                    value="DELETE" id="detailContentPlaceholder_grdConsumers_btnDelete_1" class="actionButtonDelete"
                    style="color: White; background-color: Orange; font-weight: bold; width: 45px" />
            </td>
        </tr>
    </tbody>
</table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T11:39:57.590

更改 HTML 以将客户 ID 存储为按钮内的数据属性，例如：

```
<input type="button" value="Add" class="actionButtonView " data-customer="101"/> 
```

那么jQuery将只是

```
var customerid = ('.actionButtonView').data('customer'); 
```

[.data() 文档在这里](http://api.jquery.com/data/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T11:40:13.923

你需要做一些遍历，但你可以通过缓存行来减少它......

```
var row = $(this).closest('tr')[0],
    consumerID = $(row.cells[0]).text(),
    consumerName = $(row.cells[1]).text(),
    configID = $(row.cells[4]).text(); 
```

我还直接使用 DOM 元素来获取子行。

# codeigniter - Codeigniter 验证码

> ID：10798333
> 
> 赞同：1
> 
> 时间：2012-05-29T11:35:18.363
> 
> 标签：codeigniter, captcha

我遇到了一个小问题，我无法弄清楚。

我想在没有数据库的情况下使用验证码助手，但似乎没有任何效果。

在构造中，我创建了一个生成随机字符串的变量

```
 public function __construct()
   {
      parent::__construct();
      $this->rand = random_string('numeric', 4);
   } 
```

将此变量传递给验证码值，如下所示：

```
 $vals = array(
     'word'   => $this->rand,
     'img_path'  => './captcha/',
     'img_url'   => base_url() . 'captcha/',
     'font_path'    => './system/fonts/texb.ttf',
     'img_width'    => '150',
     'img_height' => 30,
     'expiration' => 7200
     );

 $cap = create_captcha($vals); 
```

并想用这样的回调函数来验证它

```
 function captcha_check()
   {
      if($this->input->post('code') != $this->rand)
      {
         $this->form_validation->set_message('captcha_check', 'Wrong captcha code, hmm are you the Terminator?');
         return false;
      }
   } 
```

没有任何效果，问题是，验证码与图像一起显示，问题是验证，如果我在验证码字段中输入正确的数字，它总是向我显示错误，不管我输入什么，可以取悦某人给我一个提示？

html:

```
 <label for="code">Count please </label>
      <?php echo $rand; ?>
  <input type="text" id="code" name="code" class="span3" /> 
```

验证行：

```
$this->form_validation->set_rules('code', 'Captcha', 'required|callback_captcha_check'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T11:44:09.620

像这样修改你的回调函数：

```
 function captcha_check()
   {
      if($this->input->post('code') != $this->rand)
      {
         $this->form_validation->set_message('captcha_check', 'Wrong captcha code, hmm are you the Terminator?');
         return false;
      }
      return true;
   } 
```

编辑：

您需要将此行`$this->rand = random_string('numeric', 4);`移出构造函数，因为在控制器的每次加载时，它都会生成一个新字符串，从而导致验证码初始加载和验证码验证的值不同。只需将它放在`$vals`初始化之前。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T08:00:04.547

```
 * Example of captcha validation without database
 * Instead of it used session to store captcha value
 * The images will be deleted after the use 
```

--

```
public function index()
    {   
        $this->load->helper(array('form', 'url','captcha'));
        $this->load->library('form_validation');

       $this->form_validation->set_error_delimiters('<div class="error">', '</div>');
       $this->form_validation->set_rules('username', 'Username', 'trim|required|xss_clean');
       $this->form_validation->set_rules('password', 'Password', 'trim|required|xss_clean|callback_check_database');
       $this->form_validation->set_rules('captcha', 'Captcha', 'callback_validate_captcha');

    if($this->form_validation->run() == FALSE)
       {

        $original_string = array_merge(range(0,9), range('a','z'), range('A', 'Z'));
        $original_string = implode("", $original_string);
        $captcha = substr(str_shuffle($original_string), 0, 6);

         //Field validation failed.  User redirected to login page
        $vals = array(
                'word' => $captcha,
                'img_path' => './captcha/',
                'img_url' => 'http://mycodeignitor.org/captcha/',
                'font_path' => BASEPATH.'fonts/texb.ttf',
                'img_width' => 150,
                'img_height' => 50,
                'expiration' => 7200
        );

        $cap = create_captcha($vals);
        $data['image'] = $cap['image'];

        if(file_exists(BASEPATH."../captcha/".$this->session->userdata['image']))
            unlink(BASEPATH."../captcha/".$this->session->userdata['image']);

        $this->session->set_userdata(array('captcha'=>$captcha, 'image' => $cap['time'].'.jpg'));
        $this->load->view('index_index',$data);
       }
       else
       {
            if(file_exists(BASEPATH."../captcha/".$this->session->userdata['image']))
                unlink(BASEPATH."../captcha/".$this->session->userdata['image']);

            $this->session->unset_userdata('captcha');
            $this->session->unset_userdata('image');
            redirect('home', 'refresh');
       }

}

public function validate_captcha(){
    if($this->input->post('captcha') != $this->session->userdata['captcha'])
    {
        $this->form_validation->set_message('validate_captcha', 'Wrong captcha code, hmm are you the Terminator?');
        return false;
    }else{
        return true;
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-07T13:14:37.890

```
$vals = array(
     'word'   => $this->rand,
     'img_path'  => './captcha/',
     'img_url'   => base_url() . 'captcha/',
     'font_path'    => './system/fonts/texb.ttf',
     'img_width'    => '150',
     'img_height' => 30,
     'expiration' => 7200
     );

$cap = create_captcha($vals);
$this->session->set_userdata($cap);

 function captcha_check()
   {
      if($this->input->post('code') == $this->session->userdata('word'))
      {
return true;
}else{
         $this->form_validation->set_message('captcha_check', 'Wrong captcha code, hmm are you the Terminator?');
         return false;
      }
   } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-06T03:06:10.267

尝试使用不需要设置数据库的验证码服务，如 MTCaptcha。Captcha 可以直接在后端验证（在本例中为 codeigniter）。

# cuda - CUDA 2D 卷积核

> ID：10798335
> 
> 赞同：1
> 
> 时间：2012-05-29T11:35:23.307
> 
> 标签：cuda, convolution

我是 CUDA 的初学者，我正在尝试实现 Sobel Edge 检测内核。我正在使用此代码，但它不起作用。谁能告诉我它有什么问题。我只得到一些 -1 和一些非常大的值。

```
__global__ void EdgeDetect_Hor(int *gpu_Edge_Hor, int *gpu_P, 
        int *gpu_Hor, int W, int H)
{ 
    int X = threadIdx.x; 
    int Y = threadIdx.y; 

    int sum = 0; 
    int k1, k2; 
    int min1, min2; 

    for (k1 = 0; k1 < 3; k1++) 
        for(k2 = 0; k2 <3;k2++) 
            sum += gpu_Hor[k1*3+k2]*gpu_P[(X-k1)*H+Y-k2]; 

    gpu_Edge_Hor[X*H+Y] = sum/5000;
} 
```

我这样称呼这个内核：

```
dim3 dimBlock(W,H);
dim3 dimGrid(1,1);
EdgeDetect_Hor<<<dimGrid, dimBlock>>>(gpu_Edge_Hor, gpu_P, gpu_Hor, W, H); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T12:18:36.663

首先，您的问题是您处理 480x720 像素的图像。CUDA 支持计算能力 2.0 及更高版本的线程块的最大大小为 1024，之前的线程块大小为 512。所以你不能在一个块中执行这么多线程。线路`dim3 dimBlock(W,H);` 不正确。你应该把你的线程分成几个块。

另一个问题是 CUDA 以行优先顺序处理数据。所以你应该改变你的内存访问模式。

CUDA 中二维数组的正确内存访问模式是

```
BaseAddress + width * Y + X 
```

在哪里

```
unsigned int X = blockIdx.x * blockDim.x + threadIdx.x;
unsigned int Y = blockIdx.y * blockDim.y + threadIdx.y; 
```

# php - 将数组数据插入mysql php

> ID：10798338
> 
> 赞同：0
> 
> 时间：2012-05-29T11:35:35.443
> 
> 标签：php, mysql, arrays

我有 test.xml 文件

```
<propertyList date="2012-05-21-17:12:37" username="" password="">
<business modTime="2011-10-31-12:33:07" status="sold">
  <agentID>TEST</agentID>
  <uniqueID>92134</uniqueID>
  <listingAgent id="1">
    <name>Spiro Abelas</name>
    <telephone type="BH"></telephone>
    <telephone type="mobile">0414298899</telephone>
    <email>spiro@abelas.com.au</email>
  </listingAgent>
  <listingAgent id="2"></listingAgent>
  <address display="no">
    <state>NSW</state>
    <postcode>2203</postcode>
    <country>Australia</country>
  </address>
</business>
</propertyList> 
```

我确实像那样分析了完整的 XML

```
<?php
$xml = simplexml_load_file('test.xml');
foreach($xml as $key0 => $value){
echo "..1..[$key0] => $value";
foreach($value->attributes() as $attributeskey0 => $attributesvalue1){
echo "________[$attributeskey0] = $attributesvalue1";
}
echo '<br />';
////////////////////////////////////////////////
foreach($value as $key => $value2){
echo "....2.....[$key] => $value2";
foreach($value2->attributes() as $attributeskey => $attributesvalue2){
echo "________[$attributeskey] = $attributesvalue2";
}
echo '<br />';
////////////////////////////////////////////////
foreach($value2 as $key2 => $value3){
echo ".........3..........[$key2] => $value3";
foreach($value3->attributes() as $attributeskey2 => $attributesvalue3){
echo "________[$attributeskey2] = $attributesvalue3";
}
echo '<br />';
////////////////////////////////////////////////
}}
echo '<br />';
}
?> 
```

获得这些输出

```
 ..1..[business] => ________[modTime] = 2011-10-31-12:33:07________[status] = sold
  ....2.....[agentID] => TEST
  ....2.....[uniqueID] => 92134
  ....2.....[listingAgent] => ________[id] = 1
  .........3..........[name] => Spiro Abelas
  .........3..........[telephone] => ________[type] = BH
  .........3..........[telephone] => 0414298899________[type] = mobile
  .........3..........[email] => spiro@abelas.com.au
  ....2.....[listingAgent] => ________[id] = 2
  ....2.....[address] => ________[display] = no
  .........3..........[state] => NSW
  .........3..........[postcode] => 2203
  .........3..........[country] => Australia 
```

我想需要触发查询（现在它是静态的，但我想让它动态）

```
insert into xml(business,agentID,uniqueID,listingAgent,name,telephone,email,state,postcode,country)values('sold', 'TEST', 92134, 1, 'Spiro Abelas', 0414298899, 'spiro@abelas.com.au', 'NSW', '2203', 'Australia') 
```

所以请指导如何从数组中检索数据并插入到表中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T11:40:31.680

以下代码会将您的 XML 转换为数组。

```
 $xml    = '<?xml version="1.0" encoding="utf-8"?>
        <propertyList date="2012-05-21-17:12:37" username="" password="">
        <business modTime="2011-10-31-12:33:07" status="sold">
          <agentID>TEST</agentID>
          <uniqueID>92134</uniqueID>
          <listingAgent id="1">
            <name>Spiro Abelas</name>
            <telephone type="BH"></telephone>
            <telephone type="mobile">0414298899</telephone>
            <email>spiro@abelas.com.au</email>
          </listingAgent>
          <listingAgent id="2"></listingAgent>
          <address display="no">
            <state>NSW</state>
            <postcode>2203</postcode>
            <country>Australia</country>
          </address>
        </business>
        </propertyList>
    ';
$xml   = simplexml_load_string($xml);
$json  = json_encode($xml);
$array = json_decode($json,TRUE); 
```

您可以执行上面的代码和 prinf 数据，如下所示

```
print"<pre>"; 
print_r($array );
print_r($array['business']['listingAgent'] );
print"</pre>"; 
```

您可以处理 $array 并保存在表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T11:46:25.333

将数据存储在一个数组中

```
$data = asort($data);
$keys = array_keys($data);
$values = array_values($data);
$sql = "INSERT INTO tablename (".implode(',',$keys).") VALUES (".implode(',',$values).")"; 
```

交给`sql injections`你。

如果你使用 pdo，

```
foreach($keys as $key) {
  $str1 .= '?,';
}
$sql = "INSERT INTO tablename (".implode(',',$keys).") VALUES (".substr($str1,0,-1).")"; 
```

# android - RadPHP 适合构建应用程序吗？

> ID：10798340
> 
> 赞同：3
> 
> 时间：2012-05-29T11:35:44.317
> 
> 标签：android, ios, build, radphp

昨天我尝试了RadPHP，它看起来非常类似于Delphi，它的属性非常好。

我设置了一些演示应用程序来测试它，在编译（到 android）之后，它似乎是一个编译后的应用程序，它创建了一个 webview 来显示 HTML 内容。对我来说听起来有点奇怪，不是吗？

RadPHP 是否为 iOS 创建了一个类似的包，或者这是一个真正的原生应用程序？

我无法针对 iOS 版本对其进行测试，因为我没有密钥，而且我对编译格式一无所知。

如果是这样，苹果会接受创建的应用程序吗？

**编辑/更新：** 我已经编译了应用程序（带有假苹果 ID），它当然会失败，但会在输出目录中生成一些 C-Objective（*.h，* .m）文件。在目录类中有一个名为 AppDelegate.m 的文件。当您查看该文件时，您可以看到它为 WebView 创建了一个 HTML 包装器（这里是代码片段）：

```
/**
 Called when the webview finishes loading.  This stops the activity view and closes the imageview
 */
- (void)webViewDidFinishLoad:(UIWebView *)theWebView
{
    // only valid if StreambutlerRemoteControl.plist specifies a protocol to handle
    if(self.invokeString)
    {
        // this is passed before the deviceready event is fired, so you can access it in js when you receive deviceready
        NSString* jsString = [NSString stringWithFormat:@"var invokeString = \"%@\";", self.invokeString];
        [theWebView stringByEvaluatingJavaScriptFromString:jsString];
    }
    return [ super webViewDidFinishLoad:theWebView ];
}

- (void)webViewDidStartLoad:(UIWebView *)theWebView
{
    return [ super webViewDidStartLoad:theWebView ];
}

/**
 * Fail Loading With Error
 * Error - If the webpage failed to load display an error with the reason.
 */
- (void)webView:(UIWebView *)theWebView didFailLoadWithError:(NSError *)error
{
    return [ super webView:theWebView didFailLoadWithError:error ];
}

/**
 * Start Loading Request
 * This is where most of the magic happens... We take the request(s) and process the response.
 * From here we can re direct links and other protocalls to different internal methods.
 */
- (BOOL)webView:(UIWebView *)theWebView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{
 NSURL *url = [request URL];
  if ([[url scheme] isEqualToString:@"http"] || [[url scheme] isEqualToString:@"https"]) {
    return YES;
  }
  else {
    return [ super webView:theWebView shouldStartLoadWithRequest:request navigationType:navigationType ];
  }
} 
```

**结论：** 它将是一个本机应用程序，但它是 Webview 的包装器（并非所有都是本机的）。它与接受的答案中所说的完全相同。所有移动应用程序都将使用 Webview 创建。我认为 RadPHP 仅在您喜欢编程界面时有用，但不是创建移动应用程序所必需的（您可以直接使用 phonegap 代替）。在 RadPHP 的示例中，您仍然需要一个 mac 来创建应用程序（您需要 XCode）。

Apple 接受 phonegap 生成的应用程序，但它仍然不确定它是否进入了 AppStore，这取决于你用它做什么。我认为简单的应用程序会成功。另见：[http ://www.phonegap.com/faq](http://www.phonegap.com/faq)

**关于 RadPHP 生成的 HTML 的通知** 它不是 W3C。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T00:52:02.883

RadPHP 使用 PhoneGap 将您的应用程序打包为 Android、iOS 或 Blackberry 应用程序。对于所有这三个移动平台，它通常以相同的方式工作。

# gwt - 如何在gwt中制作mailto链接？

> ID：10798342
> 
> 赞同：5
> 
> 时间：2012-05-29T11:35:58.270
> 
> 标签：gwt

如何使用标签、超链接或任何其他小部件在 gwt 中创建 mailto 链接，并将该小部件添加到 DisclosurePanel。请问有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T11:51:01.413

```
disclosurePanel.setContent(
    new Anchor("Contact us", "mailto:contact@example.com")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-04T06:05:43.707

您可能希望在浏览器选项卡中打开 mailto：

```
disclosurePanel.setContent(
    new Anchor("Contact us", "mailto:contact@example.com"), "_blank"); 
```

# visual-studio-2010 - TortoiseHg - 单个 .NET 开发人员的设置，具有本地副本和网络共享上的中央存储库

> ID：10798345
> 
> 赞同：0
> 
> 时间：2012-05-29T11:36:13.423
> 
> 标签：visual-studio-2010, visual-studio, version-control, tortoisehg, source-control-explorer

TortoiseHg 让我发疯了！没有双关语的意思。

我是一个单独的.NET 开发人员，只是试图实现良好的源代码控制，例如差异和还原。

我希望在网络共享上有一个中央仓库，例如`"\\server\repos\DO I NEED A FOLDER HERE"`

和本地副本，例如`"... My Documents\Visual Studio 2010\Websites\My Website"`

但快速入门指南[http://tortoisehg.bitbucket.io/manual/2.4/quick.html](http://tortoisehg.bitbucket.io/manual/2.4/quick.html)与我的情况无关 -**我不认为我想克隆存储库？**

请有人概述**实现的步骤及其顺序**：

*   本地副本
*   网络共享的中央仓库（定期备份）

例如

1.  为存储库创建文件夹`"\\server\repos\My Website"`
2.  链接`".. My Documents\Visual Studio 2010\Websites\My Website"`到回购
3.  添加文件/提交文件 - 我不确定这里的术语

或向我指出一些防白痴文档的方向。

我选择 TortoiseHg 是因为我认为它既现代又简单。

我应该选择 Source Gear Vault 吗？

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T16:42:22.770

我远非专家，但我相信您确实想要克隆存储库以开始。您将像对待任何其他“服务器”（bitbucket 等）一样对待您的网络共享。因此，您从网络共享克隆到本地计算机。然后，您所做的任何提交都将在您的本地计算机上。当准备好发送到网络共享时，只需进行推送。该过程完全相同，但您可以推送到您的网络共享，而不是一些网址。

我要做的是在您的`network share`. 然后我会克隆它`locally`。这真的很简单。一旦你安装了 mercurial，你就可以在`hg init`任何目录中，并且你有一个工作存储库。然后只需设置快捷方式以指向正确的位置，这样您就可以执行类似的操作，`hg push netshare`而不是`hg push \\server\repos`等。

此外，添加文件与提交不同。当您添加文件时，您是在告诉 mercurial，“嘿，我想跟踪对此/这些文件的更改”。当您提交时，您是在告诉 mercurial，“我已经修改了我的文件，我希望您记录自上次提交以来的更改”。

# macos - Aptana Studio 3 关闭时冻结

> ID：10798346
> 
> 赞同：0
> 
> 时间：2012-05-29T11:36:17.040
> 
> 标签：macos, aptana

经常是Aptana Studio 3关闭后卡死，这个过程只能通过手动关闭app来删除。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T18:59:13.313

Aptana 是一个非常牛逼的应用程序。如果您的机器速度很慢并且只需要一段时间才能关闭，我不会感到惊讶。

# c# - 在 Windows 8 网格中处理滑动访客

> ID：10798347
> 
> 赞同：11
> 
> 时间：2012-05-29T11:36:22.437
> 
> 标签：c#, xaml, windows-8, windows-runtime, winrt-xaml

我正在尝试实现一个自定义控件，该控件由一个带有一些画布元素作为子元素的网格组成，当在网格上进行滑动操作时，我打算对画布元素进行一些操作。我无法处理网格的滑动，我在 [msdn - win8 开发论坛上发布了相同的内容](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/6bf14cda-9bbf-47a3-b4d8-acbf742bbf1b/#6bf14cda-9bbf-47a3-b4d8-acbf742bbf1b)

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-15T17:09:27.743

我和你们在同一条船上，因为那里没有关于如何完成的示例，但是在仔细阅读并仔细检查了关于如何使用 C# 在 Windows 8 商店应用程序上实现滑动手势的 MSDN 文档之后，这就是我想出了（它适用于我需要向上/向下/向左/向右滑动的应用程序）：

首先，需要使用 Manipulation 事件而不是 GestureRecognizer，因此在您要处理滑动的网格上（假设您制作它以便它占用整个屏幕以便解释手势）执行下列的：

我调用了我的网格**swipingSurface**并且我正在处理 Y 轴和 X 轴的操作模式：

```
swipingSurface.ManipulationMode = ManipulationModes.TranslateX | ManipulationModes.TranslateY; 
```

然后连接您想要通知的操作事件，在我的情况下，我只想知道操作开始以及何时结束：

```
swipingSurface.ManipulationStarted += OnManipulationStarted;
swipingSurface.ManipulationCompleted += OnManipulationCompleted; 
```

在操作开始时做任何你想做的事情，比如如果你想得到初始点。但实际的技巧在于 ManipulationCompleted 事件，您需要在该事件中获取手势产生的速度，如下所示：

```
public void OnManipulationCompleted(object sender, ManipulationCompletedEventArgs e) {
    var velocities = e.Velocities;      
} 
```

ManipulationCompletedEventArgs **Velocities**属性将带回**ManipulationVelocities**类型的结构，其中包含其他属性：

-*角度*：以度/毫秒为单位的旋转速度。

-*扩展*：扩展或缩放速度，以每毫秒 DIP 为单位。

-*线性*：以每毫秒 DIP 为单位的直线速度。

我实际上正在查看**线**速度，它是一个包含 X 和 Y 值的**点**，指示执行手势的方向；例如，如果向上滑动，您会注意到 Y 值为正，如果向下滑动，则 Y 值为负；X 值也是如此，如果向左滑动，则 X 值为负，如果向右滑动，则 X 值为正，因此您可以使用这些值并检查您的滑动方向、最终点等.

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T20:54:57.307

您可以检查`SwipeHintThemeAnimation`用于`GestureRecognizer`连接到 Rectangle 控件或修改它以使用您的 Grid 控件，请参阅[文档](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/windows.ui.xaml.media.animation.swipehintthemeanimation.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T17:38:10.327

您可以尝试在可滑动控件上设置 ManipulationMode 并处理 Manipulation~ 事件。请注意，某些控件可能会停止 UI 事件的冒泡，因此如果您说将控件放在 Button 或 ScrollViewer 内 - 这些事件可能不起作用。

# xmlstarlet - 使用 xmlstarlet 从 XML 中提取值

> ID：10798348
> 
> 赞同：0
> 
> 时间：2012-05-29T11:36:27.930
> 
> 标签：xmlstarlet

如何使用 xmlstarlet 从此 xml 示例中提取本地端口：

```
<?xml version="1.0"?>
<opmn xmlns="http://www.oracle.com/ias-instance">
<notification-server>
<port local="6101" remote="6200" request="6003"/>
<log-file path="$ORACLE_HOME\opmn\logs\ons.log" level="4" rotation-size="1500000"/>
<ssl enabled="true" wallet-file="$ORACLE_HOME\opmn\conf\ssl.wlt\default"/>
</notification-server>
</opmn> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T20:10:35.357

```
xml sel -N ias=http://www.oracle.com/ias-instance -t -v //ias:port/@local example.xml 
```

或者更精确

```
xml sel -N ias=http://www.oracle.com/ias-instance -t -v /ias:opmn/ias:notification-server/ias:port/@local example.xml 
```

# onclick - 如何在ckeditor的动态内容中定义onclick()

> ID：10798351
> 
> 赞同：1
> 
> 时间：2012-05-29T11:36:47.743
> 
> 标签：onclick, ckeditor

我正在尝试在 ckeditor 中制作一个自定义插件。我想要做的是对我的服务器进行 ajax 调用并获取项目列表，我将其动态呈现到 div 中。对于这些项目中的每一个，我都设置了一个 onclick 属性。问题是我收到一个错误，即 onclick 属性中的函数未定义。

下面的代码片段：

对话框内容：

```
contents : [
{
            id : 'information',

            name : 'information',

            label : 'Information',

            elements : [
            {
                type:'vbox',
                padding:0,
                children:[
                {
                    type : 'html',
                    html : '<div style="width: 100%; height: 150px; float: left; border: 1px solid #666666; overflow: auto;" id="results"></div>'
                },
            ]
}] 
```

我在 div 中插入的列表元素：

```
var html  = '<a onclick="showMore(' + resultNum + ')">';
        html += result;
        html += '</a>';
        return html; 
```

我试图用这两种方式定义 showMore 函数：

```
CKEDITOR.dialog.add('popup', function(editor)
{   
    function showMore() {}
} 
```

和

```
CKEDITOR.dialog.add('popup', function(editor)
    {   
        showMore : function() {} (in the return block)
    } 
```

像 onOk 等，但两种方法都不走运。

有没有办法做到这一点？

非常感谢提前！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T15:30:20.967

问题是您必须`showMore`在页面中定义该功能，而不是作为对话框的一部分。

# iphone - 通过 for 循环将数据添加到 NSMUtableArray

> ID：10798354
> 
> 赞同：0
> 
> 时间：2012-05-29T11:36:58.153
> 
> 标签：iphone, objective-c, ios, ipad

我是 iPhone 新手，我想将元素添加到 NSMutableArray 中，每个元素的名称为我为 keys 创建了一个 MutableArray，然后为我从名为 Pages 的对象中获取的元素创建了另一个数组。

我写了以下代码

```
NSMutableArray *myArray;

NSMutableArray *arrayKey = [[NSMutableArray alloc] initWithObjects:@"b_pag_id", @"b_pag_bo_id", @"b_pag_num", @"b_pag_note", @"b_page_mark", @"b_page_stop", @"b_pag_user_id", nil];

    for (int x=0; x<[pages count]; x++) {
        Pages *myPages = (Pages *)[self.pages objectAtIndex:x];

        NSString *b_pag_id2 = [NSString stringWithFormat:@"%d",myPages.b_pag_id];
        NSString *b_pag_bo_id2 = [NSString stringWithFormat:@"%d",myPages.b_pag_bo_id];
        NSString *b_pag_num2 = [NSString stringWithFormat:@"%d",myPages.b_pag_num];
        NSString *b_pag_note2 = myPages.b_pag_note;
        NSString *b_page_mark2 = [NSString stringWithFormat:@"%d",myPages.b_page_mark];
        NSString *b_page_stop2 = [NSString stringWithFormat:@"%d",myPages.b_page_stop];
        NSString *b_pag_user_id2 = [NSString stringWithFormat:@"%d",myPages.b_pag_user_id];

        NSMutableArray *arrayValue = [[NSMutableArray alloc] initWithObjects:b_pag_id2, b_pag_bo_id2, b_pag_num2, b_pag_note2, b_page_mark2, b_page_stop2, b_pag_user_id2, nil];

        NSDictionary *theReqDictionary = [NSDictionary dictionaryWithObjects:arrayValue forKeys:arrayKey];

        myArray = [NSMutableArray arrayWithObjects:theReqDictionary,nil];
    }

   NSLog(@"array size: %d", [myArray count]); 
```

我想将每个元素添加到它的键中，例如元素 (b_pag_id2) 它的键 (b_pag_id) ..etc 这是对的吗？或如何做到这一点？考虑到 NSLog(@"array size: %d", [myArray count]); 给我 1 我元素的大小是 14

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T12:01:14.803

在循环之前，您需要初始化 aray

```
NSMutableArray *myArray = [NSMutableArray array]; 
```

在循环内替换以下内容：

```
myArray = [NSMutableArray arrayWithObjects:theReqDictionary,nil]; 
```

和

```
[myArray addObject:theReqDictionary]; 
```

问题是您在每次循环迭代中创建一个包含 1 个字典的新数组。相反，您需要初始化数组并一一添加值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T11:42:37.280

每次通过您的循环时，您都会为其创建一个`myArray`只有一个元素的新数组。您应该在循环之前初始化一个空的 NSMutableArray，然后简单地将新对象添加到其中，而不是使用`arrayWithObjects:`to create `myArray`..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T12:52:26.597

这里我举一个简短的例子，希望对你有所帮助。看到这个代码： -

```
NSMutableArray *arrayValue = [[NSMutableArray alloc]initWithObjects:@"Value1",@"Value2",@"Value3", nil];
NSMutableArray *arrayKey = [[NSMutableArray alloc]initWithObjects:@"1",@"2",@"3", nil];

NSMutableDictionary *dic = [[NSMutableDictionary alloc]init];

for(int i=0;i<3;i++)
{
    [dic setObject:[arrayValue objectAtIndex:i] forKey:[arrayKey objectAtIndex:i]];
}

//and you can see this by printing it using nslog-

NSLog(@"%@",[dic valueForKey:@"1"]); 
```

谢谢！！！

# php - 如何使用 javascript 和 ajax 调用 php 脚本？

> ID：10798355
> 
> 赞同：-1
> 
> 时间：2012-05-29T11:36:59.530
> 
> 标签：php, html, ajax, onclick

我有这个代码：

```
<script type="text/javascript" src="jquery.min.js"></script>
<script type="text/javascript">
function doSomething() {
  $.get("supcont.php");
  return false;
}
</script> 
```

我想在单击 img 时调用此函数，所以我使用了此函数

```
<a href="#" onclick="doSomething();">
  <img src="photo/suppc.png" width="295" height="36" href="" target="fenetreA"/>
</a> 
```

但这不起作用，有没有人可以帮助我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T11:40:32.567

```
$(function () {
    $('img').live('click', function () {
        $.ajax({
            url:"supcont.php",
            success:function (res) {
                alert(res);
            }
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T11:42:29.367

把它放在任何地方：

```
<img id="img1" src="photo/suppc.png" width="295" height="36"    href="" target="fenetreA"/> 
```

在包含 JQuery.js 之后放置它

```
<script type="text/javascript">
$(document).ready(function () {
 $("#img1").click(function(){
       $.get("supcont.php");
    });
});
</script> 
```

更多信息在这里：[http ://api.jquery.com/click/](http://api.jquery.com/click/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T11:42:49.797

检查[w3schools 网站](http://www.w3schools.com/php/php_ajax_database.asp)。这对你很有帮助。

# android - 想编译原生安卓二进制我可以在手机终端运行

> ID：10798357
> 
> 赞同：35
> 
> 时间：2012-05-29T11:37:01.353
> 
> 标签：android, c, gcc, android-ndk, arm

几天来，我一直在尝试编译一个本机 ARM Android 二进制文件，该二进制文件将使用终端应用程序在我的手机上执行。我想生成与安装在手机上的标准 Posix 二进制文件（如 ls、mkdir 等）相同类型的二进制文件。我已经在 Mac OS X 下下载了 Android NDK，并且能够编译简单的 ELF 二进制文件而不会出错。但是，当我将它们转移到手机时，它们总是出现段错误。也就是说，在 GCC 中使用 -static 编译时会出现段错误。如果我不使用 -static，他们会抱怨没有被链接，等等。简单地说，他们不工作。

我的假设是它们没有正确链接到 Android 标准 C 库。即使我将我的二进制文件与 NDK 提供的 libc 链接起来，它们仍然不起作用。我读到 Android 使用 Bionic C 库，并尝试下载它的源代码，但我不确定如何从中构建一个库（似乎都是 ARM 程序集）。

手机上的Android C库和Android NDK提供的库是不是真的不一样？NDK 中包含的那个是否不允许我编译可以通过终端执行的本机二进制文件？非常感谢这里的任何指导！

**更新：**

我终于在 Mac OS X 上使用 GCC 4.7.0 让它工作了。我下载了 Bionic 头文件，然后使用 Android NDK 附带的 C 库编译了一个动态链接的二进制文件。我能够使用手机的 C 库（二进制文件为 33K）让测试应用程序在手机上运行。我还尝试静态链接到 NDK 的 C 库，这也有效。

为了让这一切正常工作，我必须将 -nostdlib 传递给 GCC，然后手动将 crtbegin_dynamic.o 和 crtend_android.o 添加到 GCC 的命令行。它的工作原理是这样的：

```
$CC \
$NDK_PATH/usr/lib/crtbegin_dynamic.o \
hello.c -o hello \
$CFLAGS \
$NDK_PATH/usr/lib/crtend_android.o 
```

对于静态二进制文件，使用“crtbegin_static.o”。这在 crtbegin_dynamic.S/crtbegin_static.S 源中进行了解释。

对于这个实验，我只使用了普通的 'ol GCC 4.7.0 和 Binutils 2.22。我还用 newlib 编译了 GCC，但我实际上并没有将我的 ARM 二进制文件与 newlib 链接。我强制 GCC/ld 直接链接到 Android NDK 提供的 libc，或者在动态二进制文件的情况下，链接到手机上的 libc。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-09T23:16:11.673

只需使用 android-ndk。并像这样构建一个Android.mk。 `include $(BUILD_EXECUTABLE)`是什么告诉它构建可执行文件而不是 JNI .lib

# 安卓.mk

```
ifneq ($(TARGET_SIMULATOR),true)

LOCAL_PATH:= $(call my-dir)

include $(CLEAR_VARS)

LOCAL_CFLAGS += -Wall

LOCAL_LDLIBS := -L$(LOCAL_PATH)/lib -llog -g

LOCAL_C_INCLUDES := bionic
LOCAL_C_INCLUDES += $(LOCAL_PATH)/include

LOCAL_SRC_FILES:= main.cpp

LOCAL_MODULE := mycmd

include $(BUILD_EXECUTABLE)

endif  # TARGET_SIMULATOR != true 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-05-28T05:36:16.967

首先，确保您有 NDK：

[http://developer.android.com/tools/sdk/ndk/index.html](http://developer.android.com/tools/sdk/ndk/index.html)

这是为您的手机编译 C 二进制文件的最简单方法：

[http://developer.android.com/tools/sdk/ndk/index.html](http://developer.android.com/tools/sdk/ndk/index.html)

[http://www.kandroid.org/ndk/docs/STANDALONE-TOOLCHAIN.html](http://www.kandroid.org/ndk/docs/STANDALONE-TOOLCHAIN.html)

通常$NDK（可能不同）=

**Linux：**

/home/ `<user>`/android-ndk

**Mac OS X：**

/用户/ `<user>`/android-ndk

在终端：

```
# create tool-chain - one line
# New method in ndk 12.
$NDK/build/tools/make_standalone_toolchain.py --arch arm --install-dir=/tmp/my-android-toolchain
# Old method.
#$NDK/build/tools/make-standalone-toolchain.sh --platform=android-3 --install-dir=/tmp/my-android-toolchain

# add to terminal PATH variable
export PATH=/tmp/my-android-toolchain/bin:$PATH

# make alias CC be the new gcc binary
export CC=arm-linux-androideabi-gcc

# compile your C code(I tried hello world)
$CC -o foo.o -c foo.c

# push binary to phone
adb push foo.o /data/local/tmp

# execute binary
adb /data/local/tmp/foo.o 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-30T13:26:25.543

将 CMake 与 Android NDK 一起使用是编译 Android 控制台应用程序的好方法。

下载[CMake](http://www.cmake.org/)和[android-cmake](http://code.google.com/p/android-cmake/)（[像这样](http://android-cmake.googlecode.com/hg/documentation.html)设置）。如果您的程序名为 main.c，则在文件中写入以下内容`CMakeLists.txt`：

```
project(test)
cmake_minimum_required(VERSION 2.8)
add_executable(test ./main.c) 
```

并运行`cmake -DCMAKE_TOOLCHAIN_FILE=$ANDTOOLCHAIN .`

然后，您将拥有程序的 Makefile，您可以运行`make`以获取`test`可执行文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T12:07:18.113

尝试如果[agcc 包装器](http://plausible.org/andy/agcc)可以帮助您，如[Android-tricks](http://android-tricks.blogspot.se/2009/02/hello-world-c-program-on-using-android.html)博客中所引用的那样。根据博客文章你想使用仿生库，但是*手机上已经安装*了一个，而不是一些单独编译的版本。

# windows-7 - 制作我自己的游戏手柄驱动程序？

> ID：10798363
> 
> 赞同：0
> 
> 时间：2012-05-29T11:37:24.287
> 
> 标签：windows-7, driver

我试图找出我应该如何让我自己的游戏手柄与基于 Windows 的游戏兼容。我花了一些时间阅读 Windows 驱动程序，但我感到有点迷茫，不确定我应该如何解决我的问题。我要求的是一些关于我应该采取什么样的解决方案或方法的指导。

所以我制作了一个基于 Arduino 的 GamePad，它通过串口（usb）与计算机通信。从这里我假设我需要制作一个将自己标识为 GamePad（设备驱动程序，即插即用驱动程序）的驱动程序？我不确定我是否已经完成了，或者我是否必须以某种方式与 DirectInput 兼容？

-迈克尔

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-04T13:39:23.707

关于 arduino 和 ppJoy 虚拟操纵杆的论坛主题。 [http://www.arduino.cc/cgi-bin/yabb2/YaBB.pl?num=1210699098](http://www.arduino.cc/cgi-bin/yabb2/YaBB.pl?num=1210699098)

# html - 如何在 Schema.org 模式的文本类型属性中解释 HTML img 标记？

> ID：10798367
> 
> 赞同：1
> 
> 时间：2012-05-29T11:37:29.280
> 
> 标签：html, search-engine, image, schema.org

[Schema.org](http://schema.org)为 Web 中的每个有用内容提供了一个模式。例如，[在这里](http://schema.org/Recipe)您可以找到“食谱”的架构。正如您所看到的，有几个属性应该是文本（参见例如**recipeCategory**）。但是，有些属性可以包含 html *img*标签，例如**recipeInstructions**应该包含文本和视觉说明。您认为在预期为文本的属性中包含图像是否正确？在实践中，您认为以下代码是否正确：

```
<div itemprop="recipeInstructions">
  <p>Preheat the oven to 350 degrees. Mix in the ingredients in a bowl.</p> 
  <img src="path" title="Mixed ingredients">
  <p>Add the flour last. Pour the mixture into a loaf pan and bake for one hour.</p>
</div> 
```

或下一个：

```
<div itemprop="recipeInstructions">
  <p>Preheat the oven to 350 degrees. Mix in the ingredients in a bowl.</p> 
  <p>Add the flour last. Pour the mixture into a loaf pan and bake for one hour.</p>
</div> 
```

而且，对搜索引擎有哪些影响？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T12:39:05.167

就`<img>`而言，第一个标记很好。

从[微数据规范](http://www.w3.org/TR/microdata/#values)中，跨度元素上 itemprop 的值是跨度的`textContent`.

`textContent`在[DOM4](http://www.w3.org/TR/dom/#dom-node-textcontent)中定义为

> 上下文对象的所有文本节点后代的数据连接，按树顺序排列。

因此，由于`<img>`不是文本节点，并且没有文本节点后代，因此为了建立 itemprop 的值，它被简单地忽略。

没有理由相信关注微数据的搜索引擎不会遵循这里的规范。

* * *

As an aside, though, it's not valid to put `<p>` elements inside `<span>` elements. You may wish to fix that by using a `<div>` instead. The value of the itemprop would not be affected by making that change.

# php - PHP 是自 PHP 4.0 以来的编译语言？

> ID：10798368
> 
> 赞同：0
> 
> 时间：2012-05-29T11:37:30.247
> 
> 标签：php, zend-framework

[读完这篇文章](http://www.phpclasses.org/blog/post/117-PHP-compiler-performance.html)后，我很怀疑。我读过一些表格和文章说 php 是一种**解释性语言，即使我在**[Stackoverflow](https://stackoverflow.com/questions/5387405/php-is-compiled-language-or-interpreted-language)上也发现了同样的东西，但是当我从[这里](http://www.phpclasses.org/blog/post/117-PHP-compiler-performance.html)读到它时，我感到很困惑。任何人都可以通过某些经过身份验证的链接或引用向我解释这一点。

3 条评论后添加：- 文章说：-

`PHP became a compiled language in the year 2000, when PHP 4 was released for the first time. Until version 3, PHP source code was parsed and executed right away by the PHP interpreter.`

**请不要在没有查看提及的文章的情况下提出您的答案。读完这篇文章后我产生了疑问，我对这篇文章的内容更加好奇，**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T11:41:24.360

它不是。
您提到的文章谈到了 HipHop，它是 Facebook 将 PHP 编译为 C++ 以加快执行速度的工具。

* * *

编辑：

如文章中所述：

> PHP 在 2000 年成为编译语言，当时 PHP 4 首次发布。在版本 3 之前，**PHP 源代码**由 PHP 解释器立即解析和执行。
> 第一**阶段解析 PHP 源代码并生成 PHP 代码的二进制表示，**称为 Zend 操作码

这意味着 PHP 代码不是直接解析和执行的，而是首先动态编译的。
所以是的，它以某种方式被编译，但在内部没有用户的干预，这使得它不同于*真正的*编译语言，如 Java 或 C++。

这是我个人的理解，如有错误欢迎评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T12:01:15.337

与此相关：

> PHP 在 2000 年成为编译语言，当时 PHP 4 首次发布。在版本 3 之前，PHP 源代码由 PHP 解释器立即解析和执行。

这也是正确的，但是您必须查看“编译”或“解释”的定义才能真正掌握这意味着什么。区别真的不是那么明显。编译器的含义通常被认为是将源代码转换为可执行形式的软件。但是，编译器的更正式定义是将一种表示形式转换为另一种形式，就像文章中提到的那样。

解释器是一种软件，它实际上执行源代码中定义的操作，而不是（只是）转换。基于该定义，PHP 仍然（默认情况下，不包括 HipHop 之类的东西）被解释。在 PHP4 发布时所做的更改是源代码不*直接*解析和执行，而是首先由解释器编译为内存中的中间表示（在本例中为操作码），然后执行。这种“编译”是当今几乎所有不同语言的现代口译员都以某种形式所做的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T11:52:44.887

您提到的文章是关于一个名为 HipHop 的项目，它不是经典的 PHP。

HipHop 将获取您的 php 项目（php 文件）并在 C++ 中生成另一组具有相同行为的文件。

一旦项目是 C++ 项目，它就成为需要编译的项目。

HipHop 由 facebook 工程师创建，旨在提高他们代码的性能（他们经常使用 PHP），而不需要用另一种语言重写他们的整个堆栈。

为了澄清 PHP 是自 PHP4 以来的编译语言的引用，确实，自 PHP4 以来，脚本在解析时并未执行：每个包含的文件都预先“编译”为操作码，并且动态执行的是此操作码。

这个 2 阶段的过程允许创建特定的操作码缓存工具，可以大大提高 PHP 的执行时间。cf 例如[http://xcache.lighttpd.net/](http://xcache.lighttpd.net/)

操作码由知道如何解释这些操作码的“虚拟机”执行（有点像 Java 虚拟机）。

HipHop 会带来额外的性能，因为这个操作码层被绕过了。

# printqueue - 将作业添加到 printqueue - 本地打印

> ID：10798373
> 
> 赞同：0
> 
> 时间：2012-05-29T11:37:33.033
> 
> 标签：printqueue

我想知道如何从应用程序创建打印作业并将其发送到 C# 中打印服务器的打印队列。然后，我希望能够在需要时从本地打印机上的另一台计算机检索和打印服务器上的作业。

我的问题是您必须将打印机名称分配给打印队列。但是，当作业应该在本地打印时，这不应该是必需的。

我希望我把自己说清楚！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T06:18:41.877

我不确定你要去哪里。`PrintQueue`是一个**打印机**队列。不仅仅是某种等待队列，您可以在其中添加和删除作业。如果您将作业放入`PrintQueue`，它将使用与该 相关联的打印机打印`PrintQueue`。

另请注意，将作业放入队列意味着正在打印的文档将被转换为打印机驱动程序特定的指令。因此，如果可以从队列中提取作业，您将**无法**在其他打印机上打印它。

# c - DigiFlow 最像什么编程语言？

> ID：10798379
> 
> 赞同：2
> 
> 时间：2012-05-29T11:38:01.957
> 
> 标签：c, fortran, digiflow

DigiFlow 用于流体动力学实验的图像处理 - [DigiFlow 网站](http://www.damtp.cam.ac.uk/lab/digiflow/)。程序中有一个控制台，用于编写宏。

一些示例代码：

```
 function do_this(variable) {variable += 2};
    output := do_this(5); 
```

（运行后输出= 7。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T11:41:24.273

从赋值和函数声明我会说它看起来像谷歌的[go 语言](http://golang.org/)。帕斯卡可能是另一种选择。

# c++ - 这个矩阵变换如何正确？（初学者）

> ID：10798386
> 
> 赞同：-3
> 
> 时间：2012-05-29T11:38:11.433
> 
> 标签：c++, opengl, matrix

我被困在一个问题上，因为我不完全确定矩阵堆栈在这种情况下是如何工作的。如果有人可以给我一步一步的过程来说明这个例子中发生了什么：答案是用问题给出的。![在此处输入图像描述](../Images/1aed35c03076790f7b0aea7213b662d4.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T11:46:47.547

让我们这样称呼正确答案中的球（数字也是抽奖顺序）：

```
4 - 2
3 1 - 
```

我们从 (0, 0) 开始并转换为 (2, 0)。我们画球 1。这里没什么特别的。

我们保存当前的变换矩阵。

然后我们从 (2, 0) 翻译向量 (2, 2)，所以我们最终在 (4, 2)。我们画了2个球。也并不棘手。

我们弹出矩阵。这意味着它会丢弃所有转换，直到最后一次推送。所以我们最终回到 (2, 0)，这是我们之前推送变换矩阵的地方。

我们从 (2, 0) 通过向量 (-2, 0) 平移，所以我们最终在 (0, 0) 处绘制球 3。

然后我们从 (0, 0) 通过向量 (0, 2) 平移，所以我们最终在 (0, 2)，我们画了球 4。

# c# - 我可以在现有方法中发出 CIL 吗？

> ID：10798387
> 
> 赞同：3
> 
> 时间：2012-05-29T11:38:29.713
> 
> 标签：c#, c#-4.0, dynamic, cil

我需要在对象的生命周期内更改一些基本计算。

我知道如何创建一个动态方法并通过它来调用它`delegate.Invoke`；但是它的成本是静态方法调用的两倍。

**是否可以在现有方法中发出 CIL？**

假设一种方法调用另一种方法，而另一种方法可以有不同的主体（一次一个）：

```
public void Worker()
{
    while(true)
    {
        int a = queueA.Dequeue();
        int b = queueB.Dequeue();

        int c = Calculate(a,b);
    }
}

int Calculate(int a, int b)
{
    // here goes dynamic code.
    // could be return a - b;
    // could be return b - a;
} 
```

请注意，示例中的计算逻辑已大大简化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T12:19:17.477

一旦一个类被编译，你就不能再改变它的 IL。您可以使用 Reflection.Emit 在运行时动态发出全新的方法。但是你不能修改现有的。

如果您需要静态方法调用的速度，您可以考虑例如 OOP 提供的不同方法。

# variables - SAS 中的动态变量名

> ID：10798393
> 
> 赞同：3
> 
> 时间：2012-05-29T11:39:00.553
> 
> 标签：variables, dynamic, sas

SAS中有没有办法在代码中指定动态变量名称？即根据另一个变量的值对不同的观察使用不同的变量？

例如，我的输入数据集可能是：

```
Index  Var1   Var2  Var3
1      78.3   54.7  79.8
3      67.2   56.2  12.3
2      65.3   45.2  98.1
1      56.2   49.7  11.3
1      67.2   98.2  98.6 
```

我想添加一个包含 Var*Index* 值的列。即我想要的输出是：

```
 Index  Var1   Var2  Var3  Var_Index
    1      78.3   54.7  79.8  78.3
    3      67.2   56.2  12.3  12.3
    2      65.3   45.2  98.1  45.2
    1      56.2   49.7  11.3  56.2
    1      67.2   98.2  98.6  67.2 
```

我无法使用`call symput`它来工作。另外我应该提一下，我的真正问题稍微复杂一些，而且我已经有一个凌乱的蛮力方法，但我正在寻找一些干净的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T12:14:02.887

如果您创建一个 Var1 - VarN 数组，那么您可以轻松引用存储在 Index 中的值。

```
data have;
input Index  Var1   Var2  Var3;
cards;
1      78.3   54.7  79.8
3      67.2   56.2  12.3
2      65.3   45.2  98.1
1      56.2   49.7  11.3
1      67.2   98.2  98.6
;
run;

data want;
set have;
array vars(*) var: ;
var_index=vars(index);
run; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T11:09:29.323

我认为最简单的解决方案是使用 VVALUEX 函数。它使用索引创建变量名，然后将其作为参数提供给函数 -

```
var_index = vvaluex(compress("var" || put(index, 8.))); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T13:47:40.633

```
data want;
    set have;
    length _var_name $32 _var_num 5;
    array vars(*) var: ;
    /* if you want name of variable */
    _var_name=VNAME(vars(index));
    /* if you want numeric suffix of variable 
            and suffix is not same as position of variable in array
          (so that vars(index) is not usable */
    _var_num=INPUT(SUBSTR(_var_name, ANYDIGIT(_var_name)),32.);
run; 
```

所以你需要的是 VNAME() 函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T11:54:15.333

数据步骤不起作用吗？

```
 data assign_value;
  set have;

  if index = 1 then var_index = var1;
  else if index = 2 then var_index = var2;
  else if index = 3 then var_index = var3;
run; 
```

我可能错过了什么？但这应该会给您问题的结果。

# jquery - 使用jquery检查复选框组时如何选择下拉列表的值

> ID：10798394
> 
> 赞同：1
> 
> 时间：2012-05-29T11:39:05.627
> 
> 标签：jquery

我需要尝试选择下拉列表，当我选中复选框值时，在下拉列表中选择了相应的值

例如，当我检查测试 2 时，下拉列表还将所选值更改为测试 2

我需要复选框组代码..

```
<html>
<head><title>Check Box</title>
<script>
$("#chk").click(function(){
$("#test option:selected")=$("#chk :checked").val()
});
</script>
</head>
<form>
<input type="checkbox" value="1" id="chk">Test 1
<input type="checkbox" value="2" id="chk">Test 2
<input type="checkbox" value="3" id="chk">Test 3
<select id="test">
<option value="1">Test 1</option>
<option value="2">Test 2</option>
<option value="3">Test 3</option>
</select>
</form>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T11:40:24.150

**HTML**

```
<form>
  <input type="checkbox" value="1" id="chk1">Test 1
  <input type="checkbox" value="2" id="chk2">Test 2
  <input type="checkbox" value="3" id="chk3">Test 3
  <select id="test">
    <option value="1">Test 1</option>
    <option value="2">Test 2</option>
    <option value="3">Test 3</option>
  </select>
</form> 
```

**jQuery**

```
$(':checkbox').change(function() {
    // uncheck previously checked checkbox
    // becasue select can show one value
    // at a time

    $(':checkbox:checked') // select all checked checkbox
           .not(this)  // escape the current checkbox
           .prop('checked', false); // making uncheck

    // change the select box value

    $('#test').val(this.value);

}); 
```

***您的代码中的问题：***

*   `type="checbox"`应该`type="checkbox"`

*   不要`id`对所有人都使用相同的`checkbox`

**[演示](http://jsfiddle.net/L35Jt/1/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T11:57:49.290

```
$("#chk").click(function(){
    if( $(this).is(':checked') )  // or   if( $(this).attr('checked')== true) )
    $("#test").attr('value', $(this).attr('value'));

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T11:48:22.803

**工作演示** [http://jsfiddle.net/EZEQu/](http://jsfiddle.net/EZEQu/)

很少有事情是错的。该演示是基本演示，您可以玩耍和增强。

*   HTML`type=checkbox`

*   id 需要一直是唯一的

*   `<script>`标签也值得将`type`属性放入其中。

希望这可以帮助，

**代码**

```
$('input[type="checkbox"]').click(function(){

    if ($(this).is(':checked'))
        $("#test").val($(this).val());
});​ 
```

**HTML**

```
<html>
<head><title>Check Box</title>

</head>
<form>
<input type="checkbox" value="1" id="chk">Test 1
<input type="checkbox" value="2" id="chk1">Test 2
<input type="checkbox" value="3" id="chk2">Test 3
<select id="test">
<option value="1">Test 1</option>
<option value="2">Test 2</option>
<option value="3">Test 3</option>
</select>
</form>
</html>​ 
```

# svg - 我如何在像这样的元素上使用“内联”SVG渐变 ?

> ID：10798397
> 
> 赞同：8
> 
> 时间：2012-05-29T11:39:43.313
> 
> 标签：svg, gradient, inline-styles

是否可以在不必先定义它的情况下实现这个渐变`<defs>`？

我正在制作一张网络地图，显示设备（交换机、路由器……）之间链路上的网络负载。我使用 SVG 绘制它，但我不想将所有渐变定义为开始（上行链路）和结束（下行链路）颜色已经从后端系统提供给我，并且可以通过我们应用程序中的模板变量访问。

我希望使用内联样式，因为我不必跟踪数千个链接引用并确保我为每个链接指定正确的渐变，因为每个渐变都会“99.9%”，因此更容易编写代码有时我在网络地图中绘制的每一行（链接加载）都是唯一的

简而言之，我可以做一些事情吗： `<line stroke=<linearGradient...`？无需定义一个并引用它？像 CSS 中的样式：**`<span style='color: blue'> .. </span>`**

```
<svg width="1024" height="800">
 <defs>
    <linearGradient id="grad1" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#000066;stop-opacity:1" />
      <stop offset="50%" style="stop-color:#000066;stop-opacity:1" />
      <stop offset="51%" style="stop-color:#00ffff;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#00ffff;stop-opacity:1" />
    </linearGradient>
  </defs>
<text x="50" y="50" fill="red">foo bar</text>a
<line stroke="url(#grad1)" x1="130.8757632890282"
      y1="163.6818288670081" x2="651.9483366457684" y2="415.704113030817" />
</svg> 
```

( [http://jsfiddle.net/GgJnB/](http://jsfiddle.net/GgJnB/) )​</p>

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T12:05:40.470

您可以使用数据 URI，即 fill="url(data:image/svg+xml;base64,...encoded full svg...#mygradient)"

这是一个例子：http: [//xn--dahlstrm-t4a.net/svg/paint/datauri-gradient.svg](http://xn--dahlstrm-t4a.net/svg/paint/datauri-gradient.svg)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T07:18:23.293

首先，我可能在问这个问题之前就应该想到这一点，但我的借口是我还在学习 svg。我建议的答案也可能不是完全正确的。请参阅底部带有[SVG 参数](http://www.w3.org/TR/SVGParamPrimer/)的代码示例，这可能是最好的解决方案，并且不必跟踪对渐变的更改链接引用。

然而，我解决了我的问题，将以下代码包装在`<g>`我绘制的每个链接/行中，如下所示：

```
 <linearGradient id="gradientForLoopi" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#000066;stop-opacity:1" />
      <stop offset="50%" style="stop-color:#000066;stop-opacity:1" />
      <stop offset="51%" style="stop-color:#00ffff;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#00ffff;stop-opacity:1" />
  </linearGradient>
  <line stroke="url(#gradientForLoopi)" x1="130.8757632890282"
     y1="163.6818288670081" x2="651.9483366457684" y2="415.704113030817" /> 
```

（我可能甚至不需要这样做，但我这样做是出于语义目的，所以我可以更轻松地使用 d3js）。

对该领域进行更多研究，更好的解决方案是使用[SVG 参数](http://www.w3.org/TR/SVGParamPrimer/)（作为 pr.写作的草稿），当它在具有 HTML5 文档类型的浏览器中通常可用时（仅部分使用 SVG 上下文标头（？），而不是内`<svg>`联HTML5 文档）请参阅HTML5 doctype **not working的**[演示](http://jsfiddle.net/SAsHC/)，以及与 svg content-type/.svg相同的内容[在此处](http://www.w3.org/TR/SVG/images/struct/Use01.svg)**正常工作**。**`<svg>`**

 ****您现在可能已经可以使用[原型脚本来使用](http://www.w3.org/TR/SVGParamPrimer/param.js)[SVG 参数](http://www.w3.org/TR/SVGParamPrimer/)草稿了，我还没有开始工作，而且可能还不能在“所有常见浏览器”中工作。

使用[SVG 参数](http://www.w3.org/TR/SVGParamPrimer/)，您只需按照以下方式做一些事情（我假设）：

```
<defs>
    <linearGradient id="linkload" x1="0%" y1="0%" x2="0%" y2="100%">
        <stop offset="0%" style="stop-color:param(uplink_color);stop-opacity:1" />
          <stop offset="50%" style="stop-color:param(uplink_color);stop-opacity:1" />
          <stop offset="51%" style="stop-color:param(downlink_color);stop-opacity:1" />
          <stop offset="100%" style="stop-color:param(downlink_color);stop-opacity:1" />
    </linearGradient>
    <line stroke="url(#linkload)" x1="param(x1)"
        y1="param(y1)" x2="param(x2)" y2="param(y2)" />
</defs>

<use id="linkid" xlink:href="#linkload" x1="300" x2="0" y1="0" y2="300">
    <param name="downlink_color" value="#00ffff" />
    <param name="uplink_color" value="#006666" />
</use>
<use id="linkid" .. for every link.. 
```****

# php - 如何将 PHP 变量传递给 Shell 脚本？

> ID：10798398
> 
> 赞同：4
> 
> 时间：2012-05-29T11:39:54.093
> 
> 标签：php, bash, shell

> **可能重复：**
> [使用 shell 将参数传递给 php](https://stackoverflow.com/questions/7803025/pass-parameters-to-php-with-shell)

我在 shell 脚本中运行一个 php 脚本

```
#! /bin/sh

php file.php 
```

Shell 将运行该脚本并显示 php 脚本的输出，但是如何将 php 脚本中定义的变量传递到其中使用的 shell 脚本（供 shell 进一步处理）？

例如，考虑一个 php 文件

```
<?php
$test = "something";
?> 
```

如何将 的值传递`$test`给 shell 脚本

```
#! /bin/sh

php config.php
echo $test 
```

**更新：**建议的方法基于`print`变量。我不想打印任何东西，因为 php 脚本也有其他应用程序（`include`在其他 php 脚本中是 d）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T12:05:04.817

你的 PHP 脚本可以打印 shell 风格的变量赋值：

```
print("VAR1=foo\n");
print("VAR2=bar\n"); 
```

在您的 shell 脚本中，您需要评估这些分配，以便将它们导入您的环境：

```
. <(php file.php) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T12:41:43.230

您的 PHP 脚本可以打印这些值，而您的 shell 脚本可以使用进程或命令替换或`read`检索这些值。

PHP：

```
<?php
    print($test1 . "\n");
    print($test2 . "\n");
?> 
```

重击：

```
while read -r line
do
    something_with "$line"
done < <(php_script) 
```

或者

```
saveIFS=$IFS
IFS=$'\n'
array=($(php_script))
IFS=$saveIFS 
```

或者

```
saveIFS=$IFS
IFS=$'\n'
read -r -d '' var1 var2 <<< "$(php_script)"
IFS=$saveIFS 
```

或其他变体。

# android - ScrollView 不显示顶部

> ID：10798401
> 
> 赞同：8
> 
> 时间：2012-05-29T11:40:01.163
> 
> 标签：android, android-layout

问题：当 ScrollView 超过一定高度时，它会隐藏其子视图的顶部。

我在 XML 中定义了以下布局

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout
        android:id="@+id/commandPanel"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:paddingLeft="5dip"
        android:paddingRight="5dip" >

        <Button
            android:id="@+id/button1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="OK" />

        <Button
            android:id="@+id/button2"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Back" />
    </LinearLayout>

    <RelativeLayout
        android:id="@+id/mainContentPanel"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_above="@id/commandPanel"
        android:background="@android:color/white" >

        <ScrollView
            android:id="@+id/formScrollView"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_gravity="center"
            android:layout_marginTop="5dip"
            android:layout_weight="1"
            android:background="@android:color/darker_gray"
            android:fillViewport="false"
            android:paddingBottom="5dip"
            android:scrollbarStyle="insideOverlay" >

            <LinearLayout
                android:id="@+id/formContentLayout"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_gravity="center"
                android:layout_marginTop="20dip"
                android:background="@android:color/black"
                android:gravity="center_horizontal|top"
                android:orientation="vertical"
                android:paddingLeft="5dip"
                android:paddingRight="5dip"
                android:paddingTop="20dip" >

                <LinearLayout
                    android:id="@+id/tr"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginTop="10dip"
                    android:orientation="horizontal" >

                    <TextView
                        android:id="@+id/title"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:layout_weight="1"
                        android:text="sample title" />

                    <TextView
                        android:id="@+id/value"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:layout_weight="1"
                        android:text="sample value ......." />
                </LinearLayout>
            </LinearLayout>
        </ScrollView>
    </RelativeLayout>

</RelativeLayout> 
```

- - - - - 代码 - - -

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.scrollview);
    updateUi();
}

//add few more rows here
void updateUi() {
    LinearLayout sampletr = (LinearLayout) findViewById(R.id.tr);
    LinearLayout contentPane = (LinearLayout) findViewById(R.id.formContentLayout);
    TextView title = (TextView) findViewById(R.id.title);
    TextView value = (TextView) findViewById(R.id.value);
    for (int i = 0; i < 25; i++) {
        LinearLayout tr = new LinearLayout(this);
        TextView t = new TextView(this);
        t.setText("Sample title : " + i);
        TextView v = new TextView(this);
        v.setText("Sample value : " + i);

        tr.addView(t, title.getLayoutParams());
        tr.addView(v, value.getLayoutParams());
        contentPane.addView(tr, sampletr.getLayoutParams());
    }
} 
```

如果没有，LinearLayout（ScrollView 的直接子级）中的顶部行开始从顶部消失。行数超过 15！此外，我什至无法手动向上滚动查看它们，请任何指针，这个布局有什么问题？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-29T13:08:42.257

好的，我已经通过从 LinearLayout（ScrollView 的直接子级）中删除以下行来解决它

```
android:layout_gravity="center" 
```

ScrollView 现在可以完美运行。谢谢大家的建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T11:56:50.667

只需用 lil change 编写 xml

```
<LinearLayout
    android:id="@+id/commandPanel"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:paddingLeft="5dip"
    android:paddingRight="5dip" >

    <Button
        android:id="@+id/button1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="OK" />

    <Button
        android:id="@+id/button2"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="Back" />
</LinearLayout>

<RelativeLayout
    android:id="@+id/mainContentPanel"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_above="@id/commandPanel"
    android:background="@android:color/white" >

    <ScrollView
        android:id="@+id/formScrollView"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_gravity="center"

        android:layout_marginTop="0dp"    <--- --- change n remove this margin

        android:layout_weight="1"
        android:background="@android:color/darker_gray"
        android:fillViewport="false"
        android:paddingBottom="5dip"
        android:scrollbarStyle="insideOverlay" >

        <LinearLayout
            android:id="@+id/formContentLayout"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_gravity="center"
            android:layout_marginTop="20dip"
            android:background="@android:color/black"
            android:gravity="center_horizontal|top"
            android:orientation="vertical"
            android:paddingLeft="5dip"
            android:paddingRight="5dip"
            android:paddingTop="20dip" >

            <LinearLayout
                android:id="@+id/tr"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_marginTop="10dip"
                android:orientation="horizontal" >

                <TextView
                    android:id="@+id/title"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:text="sample title" />

                <TextView
                    android:id="@+id/value"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:text="sample value ......." />
            </LinearLayout>
        </LinearLayout>
    </ScrollView>
</RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T11:47:46.547

我会删除第二个`RelativeLayout`节点，但保留`ScrollView`. 然后对于`ScrollView`我会添加`layout_alignParentTop=true`and `layout_above="@+id/commandPanel"`。第二个`RelativeLayout`似乎是多余的，通常当您将子项添加到 a 时，`RelativeLayout`他们应该使用容器的布局选项，即 layout_above、below、align 等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T11:48:18.447

看起来您的 padding-top 似乎有问题，请先尝试将其删除。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-24T14:36:58.623

只需`android:gravity="center"`在父线性布局内添加行就`scrollView`解决了我的问题。

# twitter - Twitter 'Faves' 小部件 - RPP 值

> ID：10798418
> 
> 赞同：0
> 
> 时间：2012-05-29T11:40:47.697
> 
> 标签：twitter

我正在使用 'faves' 小部件来管理 Twitter 提要。我只是想知道这里的“rpp”值有什么影响。

它设置为轮询新结果并以 30 秒的间隔加载推文。只是想知道我的 RPP 值应该是多少

（我希望它继续轮询新的推文，只要它们即将到来。）

谢谢

BIOS

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T17:12:27.183

RPP 代表“[每页结果](https://dev.twitter.com/discussions/6681)”。因此，这取决于您想要获得多少结果。

搜索 API 的上限为 100 RPP。

# windows - Perl Windows - 观察文件并读取最后一行

> ID：10798419
> 
> 赞同：0
> 
> 时间：2012-05-29T11:40:56.560
> 
> 标签：windows, perl, file, notify, watch

我正在尝试在 Windows Perl 中查看文件。我正在使用 Win32::ChangeNotify

这是我的代码：

```
use strict;
use warnings;

require Win32::ChangeNotify;
use Data::Dumper;

my $Path="C:\\Eamorr\\";
my $WatchSubTree=0;
my $Events="FILE_NAME";

my $notify=Win32::ChangeNotify->new($Path,$WatchSubTree,$Events);
while(1){
    $notify->reset;
    $notify->wait;
    print "File changed\n";
} 
```

但是“文件已更改”永远不会被打印出来！我意识到这是非常基本的东西，但我真的在这个 Windows 平台上苦苦挣扎。

我在“C:\Eamorr\Eamorr.out”中有一个文件，我想监控它的变化（另一个程序每十分钟将一行新数据附加到该文件）。

当 Eamorr.out 更新时，我希望能够运行一些 Perl 并填充 MySQL 表。

请帮助我查看文件 Eamorr.out 并将最后一行打印到控制台。

ps 我在 Windows Server 2003 上

提前谢谢了，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-02T22:02:07.053

这适用于我的 Windows 7，Activestate Perl 5.16。

```
use feature ":5.16";
use warnings FATAL => qw(all);
use strict;
use Data::Dump qw(dump);
use Win32::ChangeNotify;

my $Path='C:\Phil\z\Perl\changeNotify\\';
my $WatchSubTree = 0;
my $Events = "SIZE";

say STDERR "Exists=", -e $Path;

my $notify=Win32::ChangeNotify->new($Path,$WatchSubTree,$Events) or say("Error=", Win32::GetLastError());
while(1)
 {$notify->reset;
  $notify->wait;
  say STDERR "File changed";
 } 
```

# jquery - 如何同时突出显示图像地图上的多个区域

> ID：10798420
> 
> 赞同：0
> 
> 时间：2012-05-29T11:41:04.383
> 
> 标签：jquery, jquery-plugins, imagemap

我正在使用[David Lynch 出色的 MapHighlight 插件](http://davidlynch.org/projects/maphilight/docs/)和美国地图的自定义版本。不幸的是，美国的一些州（如罗德岛）非常小。出于这个原因，我在地图右侧创建了一些方框，其中包含一些较小州的缩写。

我想做的是当用户将鼠标悬停在框或州上时，同时突出显示框和地图。

```
<area href="#" title="RI" shape="poly" coords="617,141, 617,138, 617,135, 616,131, 620,130, 621,131, 623,133, 625,136, 623,138, 622,137, 622,139, 620,140, 617,141, 617,141"/>
<area href="#" title="RI" shape="rect" coords="728,164,760,182"/> 
```

两个项目共享相同的时间标题。（例如，罗德岛的标题标签是“RI”）

根据 David Lynch 网站上的示例，我认为执行以下操作可能会很有用。

```
$('area[title]').mouseover(function() {
   $(this).mouseover();     
}); 
```

不幸的是，这不起作用，事件似乎从未触发——即使我尝试了许多变体。

我可以做些什么来同步这些元素（以通用方式）并使所有具有相同标题的区域标签在鼠标悬停/悬停时都突出显示？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T17:55:29.457

试用 ImageMapster：[http ://www.outsharked.com/imagemapster](http://www.outsharked.com/imagemapster)

默认行为应该做你想做的（见演示页面 - 第一个例子是美国地图）。

在小提琴中：http: [//jsfiddle.net/juvyh/](http://jsfiddle.net/juvyh/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-30T10:24:30.233

我知道这是一个老问题，但是正如[这个 SO 问题](https://stackoverflow.com/questions/7577190/groupby-function-in-maphilight-jquery-plugin)中所解释的那样：
maphilight 函数有一个 groupBy 函数。在您的情况下，您可以执行以下操作：

```
$('.mapimage').maphilight({ groupBy: 'title' }); 
```

它将按区域的标题分组（尽管您可以选择该区域的任何属性）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T11:57:24.393

尝试 ：

```
$('area').mouseover(function() {
    $('area[title="'+$(this).attr('title')+'"]').mouseover();
}); 
```

这会处理`mouseover`所有`area`元素上的事件，然后使用 title 属性在`mouseover`具有相同标题的所有匹配区域上触发事件

# jquery - 类不适用于 jQuery 前置

> ID：10798425
> 
> 赞同：1
> 
> 时间：2012-05-29T11:41:22.960
> 
> 标签：jquery

`<li>`我在我的 jQuery 代码中添加了一个列表项，`<ul>`并且在前面添加`<li>`了一个名为 fancybox 的文本链接。

任何带有“fb”类的点击项都会调用并打开fancybox，只有新添加的带有文本链接的列表项不会打开fancy box。

所以这就是我在前面的内容

```
<a class='fb' href='viewtopic?id="+nextlistid+"'>"+title+"</a> 
```

我尝试从链接中删除 (class='fb') ，而是给它一个唯一的 ID，我后来尝试添加`$("theuniqueid").addClass("fb");`它，但似乎也没有这样做。

这是fancybox代码（有效）

```
$(".fb").fancybox({
    'padding': 0,
    'autoScale': false,
    'transitionIn': 'none',
    'transitionOut': 'none',
    'overlayColor': '#f7f7f7',
    'overlayOpacity': 0.5
}); 
```

关于如何让课程附加到新的前置项目的任何想法？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T11:44:23.547

**一旦你动态地添加了一些元素（`prepend`这里），**你必须再次重新绑定花哨的盒子功能。**像这样的东西。**

 **```
$("#thatDiv").prepend("<a class='fb' href='viewtopic?id="+nextlistid+"'>"+title+"</a>");
$(".fb").fancybox({
    'padding': 0,
    'autoScale': false,
    'transitionIn': 'none',
    'transitionOut': 'none',
    'overlayColor': '#f7f7f7',
    'overlayOpacity': 0.5
}); 
```

我可能会将绑定代码移动为通用函数，以便我可以从很多地方调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T11:46:03.283

我认为您应该在最近添加的链接上再次调用您的*fancybox*方法。例如：

```
var li = $("<li></li>").addClass("fb");
$(ul).prepend(li);
li.fancybox({/*...*/}); 
```

实际上，您动态添加了最近的项目，而之前的*$(".fb")*选择器不包括您新创建的列表项目。**

# scons - 是否可以以只读方式使用 scons CacheDir

> ID：10798429
> 
> 赞同：3
> 
> 时间：2012-05-29T11:41:29.147
> 
> 标签：scons

什么是真的。我们需要缓存，因为大多数文件都是使用每个文件的相同版本构建的，但是任何更改文件的开发人员只会更改少数文件，而且通常会更改很多。

在批准生产之前，将更改写入 CacheDir() 指定的缓存没有什么意义，但是从 CacheDir 复制内容有很多意义

但我只能看到完全禁用缓存的选项。

（我会将此发布到 scons 邮件列表，但它只是提出了一个完全难以辨认的验证码）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-02T20:39:25.413

Fwiw，烤饼现在有这个。版本 2.3.1

来自：[http ://www.scons.org/doc/production/HTML/scons-man.html](http://www.scons.org/doc/production/HTML/scons-man.html)

scons 可以维护可以在多个构建之间共享的目标（派生）文件的缓存。当在 SConscript 文件中启用缓存时，由 scons 构建的任何目标文件都将被复制到缓存中。如果在缓存中找到最新的目标文件，它将从缓存中检索，而不是在本地重建。缓存行为可以通过 --cache-force、--cache-disable、--cache-readonly 和 --cache-show 命令行选项以其他方式禁用和控制。--random 选项对于防止多个构建尝试同时更新缓存很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T12:03:40.160

我可以想到 2 个不同的选项：

1.  代替 CacheDir，对那些几乎从不改变的文件使用 Repository() 怎么样？
2.  考虑使用`--implicit-deps-unchanged`SCons 手册页和[此处](http://www.scons.org/wiki/GoFastButton).

[这](http://scons.tigris.org/ds/viewMessage.do?dsForumId=1272&dsMessageId=515081)是一个类似的讨论。

你打算如何*切换*只读行为？你需要一些逻辑来做到这一点。由于不可能以只读方式使用 CacheDir，因此另一种方法是使用相同的切换逻辑在使用 Repository 和 CacheDir 之间切换。

# c++ - 如何在 C++ 中获取进程的句柄类型

> ID：10798434
> 
> 赞同：4
> 
> 时间：2012-05-29T11:42:03.970
> 
> 标签：c++, performance, types, handle

我正在编写一个代码，试图收集有关系统进程性能的信息。我有一些计数器，如 %Cpu、RAM 等，但我无法获取有关句柄的信息（就像 Process Explorer 一样）。

要获取进程的句柄计数，我们可以使用 GetProcessHandleCount() 但我需要“一些东西”来告诉计算机中使用的句柄的全局计数以及这些句柄的类型（文件、键、事件、目录等）

有人知道是否有一些功能可以获取该信息吗？

谢谢！

# javascript - google maps api v3 - 从外部点击打开信息窗口

> ID：10798435
> 
> 赞同：7
> 
> 时间：2012-05-29T11:42:07.533
> 
> 标签：javascript, jquery, google-maps, google-maps-api-3

所以我有一个 V3 地图，它的初始化如下：

```
function init() {
        var mapCenter = new google.maps.LatLng(51.5081289,-0.128005);
        var map = new google.maps.Map(document.getElementById('map'), {
          'zoom': 6,
          'center': mapCenter,
          'mapTypeId': google.maps.MapTypeId.ROADMAP, 
          panControl: false,
          mapTypeControl: false,
          zoomControl: true,
          zoomControlOptions: {
                style: google.maps.ZoomControlStyle.SMALL,
                position: google.maps.ControlPosition.LEFT_TOP
            },
        }); 
```

和一堆看起来像这样的标记：

```
var marker25837500 = new google.maps.Marker({
              map: map, 
              pop_title: 'blah blah',                                                                                                 
              pop_wind: 'more blah',
                      zIndex: 999,
              icon: 'images/map_icons/s6.png'
            }); 
            google.maps.event.addListener(marker25837500, 'click', onMarkerClick); 
```

最后，我有一个功能可以在点击每个制造商时打开信息窗口：

```
var infoWindow = new google.maps.InfoWindow;

var onMarkerClick = OpenInfoWindow;

function OpenInfoWindow() {
          var marker = this;
          infoWindow.setContent('<h3>' + marker.pop_title + '</h3>' +
                                         marker.pop_body);

          infoWindow.open(map, marker);
        };
        google.maps.event.addListener(map, 'click', function() {
          infoWindow.close();
        }); 
```

我的问题是，当单击页面内部时，我需要做什么才能使特定标记（例如 marker25837500）显示其信息窗口 - 可能类似于：

```
<div id="marker25837500">click to see infoWindow!</div> 
```

我敢肯定这很容易，但我只能看到我的方式！

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-29T11:45:09.077

您可能会使用`trigger`事件。

```
$('#marker25837500').click(function () {
    google.maps.event.trigger(marker25837500, 'click')
}) 
```

检查这个 - [https://developers.google.com/maps/documentation/javascript/reference#event](https://developers.google.com/maps/documentation/javascript/reference#event)

**编辑：**还注意到您在单击`onMarkerClick()`时调用`marker25837500`，但您命名了另一个函数`OpenInfoWindow()`，因此您可能也需要更改它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T12:18:44.277

您不必做任何不寻常的事情或`click`在标记上模拟 a；只需确保`OpenInfoWindow`可以访问该功能：

```
//This is the simple case:
var myDiv = document.getElementById( "marker25837500" );
google.maps.event.addDomListener( myDiv, "click", OpenInfoWindow );

//Or if you have other things that you want to accomplish when this occurs:
var myDiv = document.getElementById( "marker25837500" );
google.maps.event.addDomListener( myDiv, "click", function() {
    OpenInfoWindow();
    //Do other stuff here
}); 
```

只要`InfoWindow`在范围内（可以在`OpenInfoWindow`调用函数时到达），这应该可以正常工作。

# regex - content_scripts 的这个正则表达式有什么问题？

> ID：10798436
> 
> 赞同：1
> 
> 时间：2012-05-29T11:42:10.957
> 
> 标签：regex, google-chrome, google-chrome-extension

我不希望它在 tv.sme.sk 上运行。为什么它仍然不断出现在那里

```
"content_scripts": [
{
  "matches": ["http://*.sme.sk/*"],
  "exclude_matches": ["http://tv.sme.sk/*"],
  "js": ["script.js"],
  "css": ["style.css"]
}] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T13:06:47.257

我在一个最小的例子上检查了它，看起来你在 Chrome 中发现了一个错误。有趣的是，只有 CSS 被注入`tv.sme.sk`，javascript 注入按预期工作并遵循`exclude_matches`设置。我玩过`include_globs`和`exclude_globs`选项，但没有运气。

您最好的选择是使用[insertCSS 方法](http://code.google.com/chrome/extensions/tabs.html#method-insertCSS)注入 CSS 。

**编辑**

是的，这是一个[已知的错误](http://code.google.com/p/chromium/issues/detail?id=100106)。

# c# - 确定 AD 中的计算机是否有用户登录

> ID：10798437
> 
> 赞同：1
> 
> 时间：2012-05-29T11:42:14.710
> 
> 标签：c#, asp.net, active-directory, directoryservices

我正在尝试接收当前连接到 AD 的所有计算机以及其中哪些计算机有用户登录到 AD。我已经尝试使用`ComputerPrincipal`'s`.LastLogon`属性，但我得到一个完全关闭的值，大约一周。

我想知道 AD 中哪些计算机可用。我可以使用另一种方法吗？

```
PrincipalContext ctx = new PrincipalContext(ContextType.Domain, "192.168.0.101:389", "Administrator", "XXXX");

// define a "query-by-example" principal - here, we search for a ComputerPrincipal 
ComputerPrincipal qbeComputer = new ComputerPrincipal(ctx);

// create your principal searcher passing in the QBE principal    
PrincipalSearcher srch = new PrincipalSearcher(qbeComputer);

// find all matches
foreach (var found in srch.FindAll())
{
    // do whatever here - "found" is of type "Principal" - it could be user, group, computer.....          
    ComputerPrincipal cp = found as ComputerPrincipal;

    if (cp != null)
    {
       string computerName = cp.Name;
       DateTime? lastLogon = new DateTime();
       lastLogon = cp.LastLogon;
       DateTime convertedDate = DateTime.SpecifyKind(DateTime.Parse(cp.LastLogon.ToString()), DateTimeKind.Utc);

       var kind = convertedDate.Kind;
       DateTime dt = convertedDate.ToLocalTime();

       Response.Write(cp.Name+"   :   "+ dt.ToString()+ "<br />");
    }
 } 
```

编辑：

我希望打印出来是这样的：

计算机 1：正确 计算机 2：错误 计算机 3：错误 计算机 4：正确

如果当前已登录，是否无法查询计算机？我只需要一个布尔值，True 或 False。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T12:19:53.257

这是一个经典的 MCSE 问题。lastlogon 字段是该特定 DC 的本地字段，而不是全局复制的。

您需要查询每个 AD 域控制器并查找每个域的最近日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T12:29:55.737

您需要查询林/域中所有域控制器上的安全事件日志，以确保用户已登录某台机器。然后您应该使用 WMI 联系此工作站以检查用户是否仍然登录。

您可能感兴趣的事件是具有交互式登录类型的[登录事件](http://support.microsoft.com/kb/947226)（ID 4624 用于登录，4634 用于注销）。

但是，当 PC 失去与域的连接（笔记本电脑很常见）并且用户注销时，没有域控制器将收到注销事件。

用户实际上可以在没有域的情况下登录，之前已经在 PC 上创建了他的帐户的本地缓存。

正如其他人所说，lastlogon 和 lastlogontimestamp 不能用于可靠的方式来跟踪用户登录，检查[这个](http://arnoutvandervorst.blogspot.com/2008/03/ad-lastlogon-versus-lastlogontimestamp.html)和[这个](http://support.microsoft.com/default.aspx?scid=kb;EN-US;939899)

[这里](http://msdn.microsoft.com/en-us/library/bb671200%28v=vs.90%29.aspx#Y0)有一些例子

更多信息[在这里](https://stackoverflow.com/questions/10617754/improve-performance-of-reading-event-log)和[这里](https://stackoverflow.com/questions/2462426/c-how-to-query-for-an-event-log-details-with-a-given-event-id)

# java - Glassfish 环境用于具有共同依赖关系的多个应用程序

> ID：10798443
> 
> 赞同：2
> 
> 时间：2012-05-29T11:42:36.683
> 
> 标签：java, glassfish

我有一个我正在努力解决的问题。问题是我什至不知道我应该在谷歌上搜索什么，所以这就是为什么我在这里要求对 SO 做一个简短的解释。

假设我有三个项目：A、B 和 C。A 是 B 和 C 的依赖项。B 和 C 是例如 Web 服务，可以部署在 Glassfish 中。在 A 中，有一个带有**静态**字段的类，比如说一个`int`. 在构建项目 B 时，`static int`值 3。然后，我们构建项目 C，但我们将值更改`static int`为 4。

问题是：当我们将 B 和 C 都部署到 Glassfish 时，这些应用程序是否在单独的“环境”中运行，其中`static int`在每个环境中都有不同的值（3 在 B 的环境中，4 在 C 的环境中）还是只有一个`static int`?

LE：B 和 C 都部署在同一个 Glassfish 域中。Glassfish 版本是 3.1.1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T11:57:52.150

如果“A for B”和“A for C”不同，则需要为 B 和 C 创建一个部署，每个部署都包含自己的 A 副本。

最简单的方法很可能是为 B 封装 A_for_B.jar 的单独 WAR 和为 C 封装 A_for_C.jar 的单独 WAR。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T12:35:27.183

```
The problem is that I do not even know what exactly I should search for on google, so that's why I am asking for a short explanation here on SO. 
```

您要搜索的是“类加载器”。这种类型的对象负责加载 Java 类。JVM 加载的每个类都由其完全限定名称*和*加载它的类加载器实例标识。这意味着在单个 JVM 中，您可以有几个完全命名为“com.example.Test”的类，每个类都由不同的类加载器加载——并且每个类都有自己的静态字段。更重要的是，这些类在运行时会被认为是不同的：将“com.example.Test”从一个类加载器转换为“com.example.Test”从某个其他类加载器会以 ClassCastException 结束。

为了避免多次加载多个公共类（如 java.util.List）的情况，类加载器通常保持在一个干净的层次结构中。每个类加载器都知道它的“父类”，即负责加载“更通用的类”的类加载器。当我们尝试加载一个类（通常是“按名称”发生）时，例如“com.example.OtherTest”，当前类加载器会尝试询问其父级是否能够加载它（然后父级依次询问其父级） ， 等等）。这样，每个类都由能够加载它的最通用的类​​加载器加载（java.lang.String 将始终由标准引导类加载器加载，即使其他一些类加载器有一些不同的版本可用）。

当你部署一个战争时，glassfish 会为它创建一个单独的类加载器。类加载器知道如何从 WEB-INF/lib 和 WEB-INF/classes 加载类。它的父级是（或至少是祖父级）域类加载器，适用于所有应用程序。因此，在应用程序类加载器加载任何类之前 - 它会要求 Glassfish 执行此操作。

整个过程是相当可配置的，并且使您可以将一个通用库的副本加载到 JVM 中（例如，如果您将库放入 - AFAIR - domain1/lib/ext，它们将可供域类加载器使用，域类加载器是每个应用程序的类加载器；或者您甚至可以将它放在 JRE 的 lib/ext 文件夹中，并使其可用于主类加载器，这将为您运行的任何应用程序加载类）。在这种情况下，它们将共享静态字段。或者你可以让你的库由战争类加载器加载，并将所有静态字段“私有”给你的应用程序。

# facebook - 创建照片流

> ID：10798445
> 
> 赞同：0
> 
> 时间：2012-05-29T11:42:41.210
> 
> 标签：facebook, graph, photo

我想使用图形 api 创建所有用户朋友照片的照片流。您如何使用图形 api 创建类似的东西。我想本质上我想为我所有朋友的照片创建一个按时间顺序排列的相册。

我应该如何去完成这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T16:12:59.913

您应该首先让用户的朋友使用`/me/friends`. 然后您可以循环浏览朋友列表并获取他们的照片，例如：

`<img src="http://graph.facebook.com/{friend_id}/picture" />`

您可以使用 JavaScript 库来制作动画...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T08:46:59.847

我最终通过将 facebook 用户的整个图像集合保存在应用程序的数据库中并查询它们来解决这个问题`SORT BY datetime`。

# python - 如何在 python 中提取之前重命名压缩文件的内容？

> ID：10798448
> 
> 赞同：3
> 
> 时间：2012-05-29T11:42:44.377
> 
> 标签：python, zipfile

有没有办法在python中重命名压缩文件中的文件名，但不提取它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T23:19:40.937

不，python ZipFile 模块不提供任何方法来做到这一点。您可以将存档提取到内存中，然后用相关文件的新文件名重写它，但这会占用大量内存，而不是您想要做的。您也许可以编辑 zipfile 的标题和信息字段，但标准 Python 界面没有简单的方法来做到这一点。

# c++ - 知道按下的键是否打开了大写锁定，检测换档键，功能键等

> ID：10798449
> 
> 赞同：0
> 
> 时间：2012-05-29T11:42:46.610
> 
> 标签：c++, winapi

以下代码段打印按下的键。但它并没有告诉我我是否用大写字母打印了一个字母。当我按下它时它没有检测到大写锁定，没有检测到 shift 键或任何其他键，如功能键等。我该怎么做去做 ？

```
 wchar_t buff[10];
  BYTE keyState[256] = {0};
  KBDLLHOOKSTRUCT * kbhook = (KBDLLHOOKSTRUCT *) lParam;
  int result = ToUnicodeEx(   kbhook->vkCode,
                              kbhook->scanCode,
                              keyState,
                              buff,
                              10,
                              0,
                              NULL);

 wcout << result << endl; 
```

# php - php apc_fetch所有ID

> ID：10798452
> 
> 赞同：9
> 
> 时间：2012-05-29T11:42:55.707
> 
> 标签：php, caching, apc, outputcache

有没有办法获取和打印存储在 apc 存储中的所有数据？

为了测试和调试目的，我需要这样做。

我知道我可以通过 do 来检索特定数据`apc_fetch(id)`，但我不知道通过传递（例如）a 来检索所有数据的任何方法`*`

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-29T11:47:19.570

是的，您可以使用[`APCIterator`](http://www.php.net/manual/en/apciterator.construct.php). 这使您可以遍历所有使用 APC 存储的项目。

```
$iter = new APCIterator('user');
foreach ($iter as $item) {
    echo $item['key'] . ': ' . $item['value'];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T11:48:26.970

[apc_cache_info()](http://uk.php.net/manual/en/function.apc-cache-info.php)可能是您正在寻找的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T11:45:58.880

[APCIterator 类](http://www.php.net/manual/en/class.apciterator.php)可能是您正在寻找的。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2014-06-09T05:30:10.907

APC 扩展未安装在您的 APache 上。

所以根据你的 PHP 版本下载一个 APc 并安装它。

[http://downloads.php.net/pierre/](http://downloads.php.net/pierre/)

如果你需要安装 tuts。在这里阅读。

[http://kvcodes.com/2014/06/solution-call-undefined-function-apc_fetch/](http://kvcodes.com/2014/06/solution-call-undefined-function-apc_fetch/)

# arrays - 在 Perl 中让数组元素以特定关键字结尾并将其余元素移至下一行

> ID：10798456
> 
> 赞同：2
> 
> 时间：2012-05-29T11:43:11.617
> 
> 标签：arrays, perl, split

我正在将文本文件读入 perl 中的数组并循环遍历数组以对其进行处理。每当有“开始”、“结束”或“;” 在文本中的任何地方，我希望我的数组元素在此处结束，并且任何这些关键字之后的任何内容都将出现在下一个元素中，以便稍后尝试理解这些元素时让我的生活更轻松。

为了实现这一点，我想将整个文件读入一个数组，将所有“begin”替换为“begin\n”，将“end”替换为“end\n”和“;” 使用“;\n”，将此数组写回文件，然后将该文件读回数组。这行得通吗？

有没有更优雅的方法来做到这一点，而不是使用凌乱的额外写入和读取文件？

有没有办法缩短读取文件句柄和写入文件句柄（在电路意义上，如果你知道我的意思！），这样我就可以逃避对文本文件的整个写入，但仍然可以完成我的工作？

古鲁拉杰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T11:55:34.420

您可以使用`split`带括号将分隔符保留在结果中：

```
open my $FH, '<', 'file.txt' or die $!;
my @array = map { split /(begin|end|;)/ } <$FH>; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T11:58:44.483

我更喜欢使用 Perl 单行代码并完全避免操作数组：

```
$ perl -pi -e 's#(?<=begin)#\n#g; s#(?<=end)#\n#g; s#(?<=;)#\n#g;' file.txt 
```

# django - 如何使 str var 可调用

> ID：10798462
> 
> 赞同：-1
> 
> 时间：2012-05-29T11:44:06.887
> 
> 标签：django, models, var, callable

我想要的是使字符串 var 可调用。我只有一个包含不同模型名称的列表，我想像这样调用他们的创建方法。

```
class Object_model_a:
     #def ...
class Object_model_b:
     #def ...
class Object_model_c:
     #def ...

list = ('Object_model_a', 'Object_model_b', 'Object_model_c')
x = list[0]() # this must create a new instance of Object_model_a 
```

可以像这样使用 php 进行开发：

```
$hi = 'Hello'
$Hello = 'Hi!!'
echo $$hi
>> Hi!! 
```

任何人都知道这是否可以使用 django ？这将大大简化我的代码。

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T11:51:14.097

您可以使用 Django 的`get_model`辅助函数，它接受应用程序名称和模型名称并返回模型类。

```
from django.db.models import get_model

list = ('Object_model_a', 'Object_model_b', 'Object_model_c')
model = get_model('my_app_name', list[0]) # returns Object_model_a class
instance = model() # creates a model instance 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T11:55:45.327

如果出于某种原因您有一个表示特定类的字符串，则使用它来实例化该类的对象的正确方法是将您的类放在 a 中`dict`，由字符串键入，然后调用该类。

```
classes = dict((c.__name__, c) for c in (Object_model_a, Object_model_b, Object_model_c))

instance = classes['Object_model_a']() 
```

显然，您不需要使用类名作为键。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-30T08:07:03.527

感谢您的所有评论，这就是我解决此要求的方式。

```
def create_object_instance(model_name, id=None):
    for model in get_models():
        if str(model.__name__).lower() == str(model_name).lower():
            if id:
                try:
                    return model.objects.get(id=id)              
                except ObjectsDoesNotExist:
                    return None
            else:
                return model.objects.all()
    return None 
```

# javascript - facebook-node-sdk 用于 node.js 范围参数？

> ID：10798466
> 
> 赞同：0
> 
> 时间：2012-05-29T11:44:22.883
> 
> 标签：javascript, facebook, node.js, express, facebook-node-sdk

[https://github.com/amachang/facebook-node-sdk](https://github.com/amachang/facebook-node-sdk) 决定使用这个模块为 node.js 构建我的 facebook 集成登录，如下所示：

```
var express = require('express'); 
```

var Facebook = require('facebook-node-sdk');

```
var app = express.createServer();
app.configure(function () {
  app.use(express.bodyParser());
  app.use(express.cookieParser());
  app.use(express.session({ secret: 'foo bar' }));
  app.use(Facebook.middleware({ appId: 'YOUR_APP_ID', secret: 'YOUR_APP_SECRET' }));
});

app.get('/', Facebook.loginRequired(), function (req, res) {
  req.facebook.api('/me', function(err, user) {
    res.writeHead(200, {'Content-Type': 'text/plain'});
    res.end('Hello, ' + user.name + '!');
  });
}); 
```

如何添加额外的权限，如“电子邮件”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T15:55:37.303

看一下Facebook Node SDK 中的[getLoginUrl方法。](https://github.com/amachang/facebook-node-sdk/blob/master/lib/basefacebook.js#L347)您可以`scope`在此处提供一个参数来指定`email`权限。有关可用[权限](https://developers.facebook.com/docs/authentication/permissions/)的列表，请参阅权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-02T17:38:53.740

```
app.get('/', Facebook.loginRequired({scope: 'email'}), function (req, res) {
      /*-----*/
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-25T11:40:31.743

嗯您不需要编辑此文件:) 您所要做的就是将范围添加到您的配置中，如下所示：

```
app.use(Facebook.middleware({ appId: 'YOUR_APP_ID', secret: 'YOUR_APP_SECRET', scope 'YOUR_SCOPE' })) 
```

然后将此配置传递给 getLoginUrl 函数

# .htaccess - 如何为 GET 重定向格式化 RewriteRule？

> ID：10798470
> 
> 赞同：0
> 
> 时间：2012-05-29T11:44:31.240
> 
> 标签：.htaccess, mod-rewrite, url-rewriting, rewrite

在 wordpress 博客中，我想将所有新注册重定向到自定义注册页面。

代替

`www.example.com/wordpress/wp-login.php?action=register`

我想把它们送到

`www.example.com/wordpress/register`

到目前为止，我使用

```
RewriteRule ^wordpress/wp-login.php?action=register$ www.example.com/wordpress/register [NC,L] 
```

但它不起作用:(

我也试过这个规则；

```
RewriteCond %{QUERY_STRING}  ^action=register$
RewriteRule ^wp-login[.]php$ /register [R,NC,L] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T12:11:40.017

`$DOCUMENT_ROOT/wordpress/.htaccess`在文件中有这个规则：

```
RewriteEngine On
RewriteBase /wordpress/

RewriteCond %{QUERY_STRING} ^action=register$ [NC]
RewriteRule ^wp-login\.php$ register? [R,NC,L] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T12:10:05.057

```
RewriteEngine On

RewriteCond %{QUERY_STRING} ^action=register$ [NC]
RewriteRule ^wordpress/wp-login.php$ http://www.example.com/wordpress/register? [L,R=301,NC] 
```

`http://www.example.com/wordpress/wp-login.php?action=register` **1）这将完全**重定向到`http://www.example.com/wordpress/register`.

2) 我建议在测试期间使用 302 重定向代码而不是 301，直到您确认它按预期工作（因为现代浏览器会缓存 301 重定向，当您经常编辑规则时，这可能会在测试期间产生令人困惑的行为）。

3）如果您会看到浏览器发出无限重定向消息 - 那么您的规则冲突。

# iphone - CCMenuItem 不响应子类化并向 CCMenu 添加 cctouch 方法

> ID：10798472
> 
> 赞同：0
> 
> 时间：2012-05-29T11:44:49.900
> 
> 标签：iphone, cocos2d-iphone, ccmenuitem

我正在制作一个菜单，我希望其中一个按钮在用户触摸它时做出响应，所以我制作了一个 CCMenu 的子类，以便添加 cctouchbegan 方法并在那里管理它。问题是我可以让它同时响应这两个东西（menuItem 和 cctouch），这正常吗？有没有办法强迫它做这两件事？提前谢谢你，如果你需要我把一些代码放在这里，请告诉我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T15:53:54.020

你应该看看`CCMenu.m`——它已经`ccTouchBegan`在 s 上实现并设置了一个选定的标志`CCMenuItem`。您的方法可能不起作用，因为您正在窃取父类的消息。

您的子类应`[super ccTouchBegan...]`首先调用，然后检查`CCMenuItem`s 的选定状态以确定要在视觉上更改哪个按钮。

* * *

编辑：或者，更容易！-- 子类化适当的`CCMenuItem`子类（例如）并从默认方法`CCMenuItemSprite`重载该方法以包含您的视觉更改：`selected`

```
-(void) selected
{
    [super selected];
    //call method to update visuals here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T11:52:55.063

您可以简单地创建自己的 CCLayer 子类，将其 isTouchEnabled 属性设置为 YES 并实现您想要的任何触摸逻辑

# c# - 视图中的for循环

> ID：10798473
> 
> 赞同：0
> 
> 时间：2012-05-29T11:44:51.520
> 
> 标签：c#, .net, asp.net-mvc, asp.net-mvc-3, linq

我有这个代码：

```
columns.ForeignKey(p => p.SomeProperty, new SelectList(new[] {  "0", "1", "2", "3", "4", "5" })); 
```

而且我想以动态方式填充`SelectList`，而不是总是从 0 到 5。假设我将上限保存在`Session["upperLimit"]`变量中。如何在视图中创建一个 for 循环，以便`SelectList`从 0 转到 Session `["upperLimit"]`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T11:46:38.603

我会在控制器中创建选择列表并将其传递给视图。View 用于迭代模型。业务逻辑应该在控制器中。

但是，如果您仍然想在视图中执行此操作，您可以执行以下操作：

```
@{
    var list = new SelectList(Enumerable.Range(0, (int)Session["upperLimit"] + 1));
    columns.ForeignKey(p => p.SomeProperty, list);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T11:57:35.567

对于初学者来说，不要将上限放在 中`Session`，如果您在视图中需要它，这`Model`是一个完美的用例。其次，`SelectList`也应该包含在real 中，节省您将逻辑放入视图中，`Model`这意味着您甚至不需要`Limit`.`Model`

假设您的模型具有以下属性：

```
public class MyModel
{
    public string SomeProperty { get; set; }
    public SelectList MyNumbers { get; set; }
} 
```

然后您的控制器操作可以执行以下操作：

```
public ActionResult Index(int upperLimit) //I'm assuming that's where the limit is
{
    var model = new MyModel();

    model.MyNumbers = new SelectList(Enumerable.Range(0, upperLimit + 1));

    return View(model);
} 
```

然后在您看来：

```
@Html.DropDownListFor(m => m.SomeProperty, Model.MyNumbers) 
```

# php - IE 需要 CSS / Javascript 下拉导航修复

> ID：10798474
> 
> 赞同：0
> 
> 时间：2012-05-29T11:44:53.350
> 
> 标签：php, javascript, css

我们的一位前开发人员在处理我们内部 PHP 框架的第一个版本时，使用 javascript 集成了主导航的下拉元素，我需要为 IE8 应用修复程序，这导致即使使用 CSS 显示下拉菜单也会出现偏移在 Firefox / Chrome 中很好。

有问题的网站是[http://www.benchmemorials.co.uk/](http://www.benchmemorials.co.uk/)

如果主导航中有使用下拉菜单的子菜单项，则调用 javascript 来显示这个我相信（如下）...

```
<script type="text/javascript">
$(document).ready(function() {
var position = $('#link_why-buy-from-us').offset();
$('.dropdown').css(position);
$('#link_why-buy-from-us').mouseover(function() {
$('.dropdown').show();
});
$('.dropdown').mouseover(function() {
$('.dropdown').show();
});
$('.dropdownstyle').mouseover(function() {
$('.dropdown').show();
});
$('#link_why-buy-from-us').mouseleave(function() {
$('.dropdown').hide();
});
$('.dropdown').mouseleave(function() {
$('.dropdown').hide();
});
$('.dropdownstyle').mouseleave(function() {
$('.dropdown').hide();
});
});
</script> 
```

我对javascript不太感兴趣，但从我收集的信息来看，我认为上面指示下拉菜单出现在“为什么从我们这里购买”顶部导航菜单项下方。正如我所提到的，这在 Firefox/Chrome 中按预期工作。

但是，问题似乎是这样一个事实，即在某个地方，内联 CSS 正在为下拉类动态生成 - 这是动态生成的

```
style="top: 61px; left: 964px; display: none;" 
```

已搜索服务器上的每个文件，但没有指定，我唯一的猜测是上面的 javascript 以某种方式创建了这行 CSS，因此阻止我更改 IE 样式表中下拉列表的位置以修复显示在 IE8 中。

php文件中下拉菜单的其余代码如下：-

```
<div class="dropdown"><div class="dropdownstyle">
<?php
mysql_select_db($database_config, $config);
            $query_sub_pages = "SELECT * FROM `pages` WHERE site_id = '".$current_site_id."' AND menu_location = 'sub' ORDER BY `order` ASC";
            $sub_pages = mysql_query($query_sub_pages, $config) or die(mysql_error());
            $row_sub_pages = mysql_fetch_assoc($sub_pages);
            $totalRows_sub_pages = mysql_num_rows($sub_pages);
            $current_sub_link = 0;
do {
$current_sub_link = $current_sub_link + 1;
?>
<p<?php if ($current_sub_link != $totalRows_sub_pages) {echo ' style="margin-bottom: 10px;"';}; ?>><a class="sub_link" href="<?php echo $site_base.$row_sub_pages['page_location']; ?>"><?php echo $row_sub_pages['page_display_name']; ?></a></p><?php //if ($current_sub_link != $totalRows_sub_pages) {echo '<br />';}; ?>
<?php } while ($row_sub_pages = mysql_fetch_assoc($sub_pages)); ?>
</div>
</div> 
```

如您所见，.dropdown 没有应用内联 CSS。如果您在浏览器中检查元素，则可以查看样式表中的所有 CSS。

请任何人建议如何或是否可以防止生成此动态 CSS 定位，或者确保下拉列表在包括 IE 在内的所有浏览器中一致显示的替代/更简单的方法？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T18:49:02.090

定位由以下代码完成：

```
var position = $('#link_why-buy-from-us').offset();
$('.dropdown').css(position); 
```

它采用 #link_why-buy-from-us 相对于文档的位置，并将其添加到 .dropdown 元素。

我不知道您是否熟悉 jQuery，但上面的代码是使用该 JavaScript 库编写的。有关 .offset() 的更多文档，请查看此处：[http ://api.jquery.com/offset/](http://api.jquery.com/offset/)

# java - 在 libgdx 游戏中设置延迟

> ID：10798477
> 
> 赞同：8
> 
> 时间：2012-05-29T11:45:00.580
> 
> 标签：java, delay, libgdx

我有一个游戏（比如超级跳投，这个游戏是一个跳跃游戏），我们的角色有生命。与敌人碰撞后，他的生命减少。我想在 1 秒后计算碰撞。我的意思是在这 1 秒内，如果我的角色与敌人接触，什么都不会发生，他会继续前进。为此，我在 GameScreen 类中定义了一个布尔变量，名称为“collision”，在 Wolrd 类中定义另一个，名称为“collBirds”。在与敌人碰撞一次接触后，collBirds 变为 true。但我想在 1 秒碰撞后更改为假。我使用了一些东西，比如 System.currentTimeMillis() 和“for loop”，但什么也没发生。我在java中不太好。

这是我的条件：

```
if(World.collBirds == true && collition == false){
        life -= 1;
        lifeString = "Life : " + life;
        World.collBirds = false;
        collition = true;
        for (??? "need to stay here for 1 sec" ???) {
            collition = false;
        }
    } 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-04-19T09:13:37.697

在某些情况下，您可能还想使用*com.badlogic.gdx.utils.Timer*

示例用法：

```
float delay = 1; // seconds

Timer.schedule(new Task(){
    @Override
    public void run() {
        // Do your work
    }
}, delay); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-29T12:30:19.520

当第一次碰撞发生时，设置一个`float timeSinceCollision = 0;`

然后每个循环，您需要将自上次检查以来的时间添加到变量中，并检查它是否超过一秒。

```
timeSinceCollision += deltaTime;
if(timeSinceCollision > 1.0f) {
    // do collision stuff
} else {
    // ignore the collision
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T11:51:43.793

如果您想在同一个线程中执行此操作，则可以使用 Thread.sleep()。但是在这种情况下，您当前的线程将冻结，如果这是单线程游戏，那么您的整个游戏都会冻结。如果您不想让您的游戏冻结 1 秒，那么您应该生成线程并在该线程中调用睡眠，然后在睡眠后更改标志

# php - 将变量从 PHP 传递到 PERL

> ID：10798478
> 
> 赞同：-1
> 
> 时间：2012-05-29T11:45:03.270
> 
> 标签：php, perl

我已经编写了这个程序来在嵌入式 perl 脚本中传递一个变量，但它给出了空白输出:-( 为什么它不起作用。请解决这个问题。

php脚本

```
<?php
$var1='high'; 
exec('C:/xampp/htdocs/WORK/hello.pl'.' '.EscapeShellArg("$var1"),$output);
echo ($output);
?> 
```

perl 脚本

```
#!/usr/bin/perl -w

    $var1=<>; 

    print $var1; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T12:00:42.497

关于什么

```
 $var1 = shift; 
```

而不是从标准输入或参数文件中读取值？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T11:47:52.000

因为您试图将数组作为字符串发送...您必须将数组序列化为 perl 可以反序列化的字符串，例如`JSON`, `XML`,`CSV`等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T11:48:02.357

一个原因是[EscapeShellArg](http://php.net/manual/en/function.escapeshellarg.php)期望 $arg 参数是字符串类型，而在您的情况下，它是一个数组......

# ruby-on-rails - Rails 资产管道指纹识别和页面缓存

> ID：10798488
> 
> 赞同：1
> 
> 时间：2012-05-29T11:46:06.947
> 
> 标签：ruby-on-rails, ruby-on-rails-3, memcached

我在我网站的一页上使用 rails 页面缓存（使用 memcache）。缓存的过期时间为 24 小时。但是缓存值包含一些名为asset-FINGERPRINT.css的资产

如果我在缓存存在的 24 小时内运行部署，指纹会发生变化，但我的缓存值中仍然有旧版本。因此，当我尝试获取资产时，我得到了 404。

我有多个版本的页面，所以我不能在每次部署后手动使页面过期。我的问题是，有没有人遇到过同样的问题，解决方案是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T17:06:45.300

如果我是你，我不会删除旧版本的资产。除了您面临的问题之外，您可能不希望旧版本的 HTML 与新的 CSS 或 Javascript 一起使用 - 如果您不小心，这很容易破坏事情。

因为资产的每个版本都有一个指纹，所以您可以同时使用当前版本和几个以前的版本。一种方法是将 public/assets 符号链接到在版本之间不会更改的文件夹（如果您使用 capistrano 部署，如果您使用默认资产管道集成，则会发生这种情况）。

话虽如此，在你觉得你永远无法清除缓存的情况下，我感觉很不稳定。

# android - 将初始数据提供给片段的正确方法？

> ID：10798489
> 
> 赞同：60
> 
> 时间：2012-05-29T11:46:10.303
> 
> 标签：android, android-fragments

所以我了解到我需要一个空的构造函数，以使我的片段不会在重新初始化时崩溃。我的问题是我在初始化片段时使用数据列表（至少其中一些）。那么用数据列表开始新片段的好方法是什么。我应该`OnCreate()`采用`getData`一种从其他来源获取数据的方法还是正确的方法？

由于我有很多数据，因此向捆绑包提供数据确实不是一个很好的方法。

所以让我们举个例子（我这样理解更好）。

当用户单击按钮时，片段将启动。我以前做的是以这种方式创建一个新片段：

```
 FragmentManager fragmentManager = getSupportFragmentManager();
    FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();

    fragmentTransaction.replace(R.id.center_container, new DetailFragment(item));
    fragmentTransaction.addToBackStack(DETAIL_TAG);

    fragmentTransaction.commit(); 
```

然后在我的片段中：

```
public DetailFragment(EventItem item) {
    mItem = item;
    mPlaces = Database.getContainerPlaces(getActivity()).getValidItems();
} 
```

我不能将所有数据都提供给一个包，所以这行不通。所以我该怎么做？

答：我应该使用空构造函数初始化片段，然后从我的活动中使用 setter 直接在片段中设置数据吗？但是，如果用户按下主页，Android 关闭片段并且用户稍后返回，我不会丢失数据吗？

B：我应该用工厂模式初始化片段并调用`setRetainInstance(true)`，给片段一个识别数据的键，然后让片段从第三个来源获取 onCreateView 中所需的数据吗？

C：我应该只创建一个空的构造函数，然后`onCreate()`获取片段所需的数据吗？

应该注意的是，该应用程序是纵向锁定的，因此问题主要在于在 Android 关闭和用户重新启动时维护对象。

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-05-29T11:52:03.537

> 那么用数据列表开始新片段的好方法是什么。

使用工厂模式和“参数” `Bundle`，例如：

```
package com.commonsware.empublite;

import android.os.Bundle;

public class SimpleContentFragment extends AbstractContentFragment {
  private static final String KEY_FILE="file";

  protected static SimpleContentFragment newInstance(String file) {
    SimpleContentFragment f=new SimpleContentFragment();

    Bundle args=new Bundle();

    args.putString(KEY_FILE, file);
    f.setArguments(args);

    return(f);
  }

  @Override
  String getPage() {
    return(getArguments().getString(KEY_FILE));
  }
} 
```

如果你保留你的片段实例，你应该能够只使用普通的 setter 将东西放入数据成员中。“参数”`Bundle`作为配置更改的一部分保留，因此对于非保留实例，这是确保在用户旋转屏幕等时保留设置数据的方法。

# ruby-on-rails-3 - 在 Rails 3 中将 haml 代码转换为 erb

> ID：10798491
> 
> 赞同：0
> 
> 时间：2012-05-29T11:46:25.300
> 
> 标签：ruby-on-rails-3

以下haml代码的erb代码是什么？

```
content_for :head do
  = stylesheet_link_tag "plupload.queue"
  = javascript_include_tag "plupload/plupload.full.min", "plupload/jquery.plupload.queue.min"
  = javascript_tag do
    = render "plupload.js" 
```

照片容器

```
= render :partial => "photo", :collection => @photos 
```

上传者

```
%p You browser doesn't have HTML5, Flash or Silverlight support. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T12:04:06.990

我建议阅读 HAML 和 ERB 文档，因为它是您开发过程的基础。有很多关于这方面的信息，所以在你问之前尝试使用搜索。

*   [http://guides.rubyonrails.org/layouts_and_rendering.html](http://guides.rubyonrails.org/layouts_and_rendering.html)
*   [http://haml.info/](http://haml.info/)

您的 ERB 代码：

```
<% content_for :head do %>
  <%= stylesheet_link_tag "plupload.queue" %>
  <%= javascript_include_tag "plupload/plupload.full.min", "plupload/jquery.plupload.queue.min" %>
  <%= javascript_tag do %>
    <%= render "plupload.js"%>
  <% end %>
<% end %>

<div id="photos_container">
  <%= render :partial => "photo", :collection => @photos %>
</div>

<div id="uploader">
  <p>You browser doesn't have HTML5, Flash or Silverlight support.</p>
</div> 
```

在 Rails 3 中，如果您使用 app/views/photos/_photo.html.erb 部分，您可以优化您的代码。Rails 通过查看集合中的模型名称来确定要使用的部分名称。

像这样：

```
<div id="photos_container">
  <%= render @photos %>
</div> 
```

阅读 Rails 3 中的渲染：http: [//guides.rubyonrails.org/layouts_and_rendering.html#using-render](http://guides.rubyonrails.org/layouts_and_rendering.html#using-render)

# iphone - 访问 Graph API 出现错误

> ID：10798493
> 
> 赞同：0
> 
> 时间：2012-05-29T11:46:25.933
> 
> 标签：iphone

我面临一个问题：我在我的应用程序中使用 Graph API。应用程序每次都运行良好，但显示 3 个错误，尽管应用程序正在运行有错误...

1) 错误“_OBJC_CLASS_$_FbGraph”，引用自：

2) 错误“_OBJC_CLASS_$_FbGraphFile”，引用自：

3) 链接器命令失败，退出代码为 1（使用 -v 查看调用）

欲了解更多信息：我正在使用**XCODE 4.3.2** 我应该怎么做才能消除这些错误？需要帮忙...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T12:06:24.990

我认为如果需要 -lstdc++、-ObjC、-lxml2 .... 并使用 -all_load 定义链接器标志，是的，还检查使用这两个 armv6 和 armv7 定义的体系结构.....然后如果它给出错误然后定义编译器使用 LLVM-GCC 或 LLVM，然后重新启动应用程序...希望这对您有所帮助.. :)

# c# - 可以从问题签名中提取哪些有关崩溃的信息？

> ID：10798494
> 
> 赞同：0
> 
> 时间：2012-05-29T11:46:26.737
> 
> 标签：c#, crash-reports

> **可能重复：**
> [解密 .NET clr20r3 异常参数 P1..P10](https://stackoverflow.com/questions/4052770/deciphering-the-net-clr20r3-exception-parameters-p1-p10)

我已经发布了我的申请。它在我的电脑上运行良好。

有数据文件；该应用程序在其中保存了一些信息。如果该文件不存在，则应用程序将创建它。以前已经处理过这类异常，但是当我在另一台计算机上测试我的应用程序时，它崩溃了。

我想知道这些问题签名是什么？我所能理解的是，例外是：FileNotFound。

```
Problem signature:
  Problem Event Name:       CLR20r3
  Problem Signature 01:     todoweeklyshedule.exe
  Problem Signature 02:     1.0.0.0
  Problem Signature 03:     4fc4a03d
  Problem Signature 04:     TODOWeeklyShedule
  Problem Signature 05:     1.0.0.0
  Problem Signature 06:     4fc4a03d
  Problem Signature 07:     3
  Problem Signature 08:     17
  Problem Signature 09:     System.IO.FileNotFoundException
  OS Version:               6.1.7601.2.1.0.256.1
  Locale ID:                1033
  Additional Information 1: ff6d
  Additional Information 2: ff6d566fdcc8eae03c255b90fdbd6138
  Additional Information 3: 34b5
  Additional Information 4: 34b55c6039740b00ceeb05d7a9b1a45e 
```

# java - 具有相同功能但返回类型不同的基类和接口的多重继承

> ID：10798496
> 
> 赞同：0
> 
> 时间：2012-05-29T11:46:34.950
> 
> 标签：java, inheritance, extends, implements

我编写了一个类，它是 A 类的基类，并实现了 B 类的接口。

现在我的编译器给出了一种奇怪的错误，说“A 类的函数返回类型与 B 类函数的返回类型不兼容”。

我的代码如下，

```
public class X extends A implements B
{
}

public class A
{
  public Enumeration<String> test(){}
}

public interface B
{
  public Enumeration<Object> test();
} 
```

现在我不明白为什么编译器会给出这样的错误，因为 String 已经是对象的一种类型，所以我的理解是自动类型转换应该因此在运行时发生。我对吗？或者我的概念理解对我来说很奇怪？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T11:56:49.083

如果你能改变接口的定义，你就可以把它拓宽，得到你想要的。返回类型将是`Enumeration<? extends Object>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T11:49:11.880

`String`是 的子类`Object`，但`Enumeration<String>`不是*的*子类`Enumeration<Object>`。如果是，那么我可以将 an`Enumeration<String>`转换为 an `Enumeration<Object>`，然后将其转换为 an `Enumeration<Integer>`，所有这些都没有警告；但是当我尝试将它用作 时`Enumeration<Integer>`，我会得到`ClassCastException`s。

请注意，Java 数组的行为与我在上面描述的一样，这被广泛认为是该语言设计中的一个重大缺陷。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T11:59:12.437

您尝试做的事情在 Java 中是可能的。正如 Ernest 所说，Enumeration 不是 Enumeration 的子类，因为 Java 泛型缺少*方差*的概念。

无论如何，您可以使用类型通配符来表达您的意图。您必须以这种方式更改界面：

```
public interface B
{
  public Enumeration<?> test();
} 
```

现在你的代码编译好了。只是为了让您知道，您还可以将接口限制为 Object 以外的其他类型。例如，如果您必须构建一个返回
数字枚举的接口：

```
 class X extends A implements B
    {
    }

    class A
    {
        public Enumeration<Long> test(){return null;}
    }

    class C
    {
        public Enumeration<String> test(){return null;}
    }

    //This doesn't compile! String does not extend Number
    /*class Y extends C implements B
    {
    }*/

    interface B
    {
        public Enumeration<? extends Number> test();
    } 
```

# iphone - pjsip 为 iOS 5 构建，不会

> ID：10798498
> 
> 赞同：4
> 
> 时间：2012-05-29T11:46:40.433
> 
> 标签：iphone, ios, xcode, ffmpeg, pjsip

**周五，我从SVN 主干**中检索了最新版本，并尝试按照入门 wiki 上的说明进行构建。

`make`dep 似乎执行没有任何问题，但在 Samples.mak 上 make 失败。当平台为“arm-apple-darwin9”时，似乎没有任何规则可以制作任何样本。

如果我此时打开`Xcode`项目，`libavcodec`并且它的所有相关库以及`LibSDL`. 没有提到`ffmpeg`事先安装 SDL 的要求，所以不确定在那里做什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-14T10:45:47.597

请添加一些运行 pjsip 所需的框架，并检查 config_site.h 此文件是否可用，如果未找到则添加此文件。一些代码也可以写在 config_site.h 文件中。

# ios5 - UIManagedDocument 不会立即更新关系的更改

> ID：10798500
> 
> 赞同：0
> 
> 时间：2012-05-29T11:46:47.933
> 
> 标签：ios5, uimanageddocument

我在我的项目中使用 UIManagedDocument 并且必须更改现有对象的关系。

所有对象都已存在于数据库中，因此我不处理temporaryID/permanentID 问题。我也几乎`updateChangeCount:`在我的 UIManagedDocument 上使用来*保存*更改。所以它不应该是 UIManagedDocument 的常见嫌疑人的问题。

**模型：**

```
Company
   |-- Department
          |-- Employee 
```

**手术：**

通过调用将 a`Department`从一个移动到另一个。`Company``[aDepartment setCompany:newCompany]`

**情况1（成功）：**

`Department`对实体调用执行 fetchRequest`company = newCompany`会返回预期结果。

**情况2（失败）：**

`Employee`对实体调用执行 fetchRequest`department.company = newCompany`不会返回任何结果。

情况 2 仅在 UIManagedDocument 自动保存后成功。

任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T07:43:40.667

在处理这个问题很长一段时间后——不幸的是，即使是苹果工程师也无法提供帮助——我找到了解决方案。

`[myManagedDocument saveToURL:fileURL forSaveOperation:UIDocumentSaveForOverwriting completionHandler:nil];`更改关系后调用可以解决问题并立即返回正确的状态。

*无论如何，我为此填写了一份错误报告，以便通过`updateChangeCount:`.*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T08:55:01.350

同样的问题。我终于通过保存 managedObjectContext 和它的父上下文找到了一个解决方案。

```
NSError *error;
if ( ![self.fetchedResultsController.managedObjectContext save:&error] ||![self.fetchedResultsController.managedObjectContext.parentContext save:&error]) {
    //  .....
} 
```

# javascript - 如何在java脚本中获取文件路径表单输入标记

> ID：10798503
> 
> 赞同：1
> 
> 时间：2012-05-29T11:47:14.030
> 
> 标签：javascript, jquery, html, jquery-ui, javascript-events

我在 HTML 中使用属性 type="file" 的输入标签。如果我浏览并选择图像并尝试在脚本中使用**$('file_upload').val()**获取文件路径，它将返回路径为**“C:\fakepath\img_name”**

我需要获取此路径并将其设置为默认值以从 java 脚本输入标签。

请帮我解决一下这个。

脚本 ：

```
$(document).ready(function() {$('#imgUpload_edit').change(
        function(){if ($(this).val()) {alert($('#imgUpload_edit').val());} }); }); 
```

HTML：

```
<FORM id="frmImgUpload_edit" ENCTYPE="multipart/form-data" ACTION="" METHOD="POST">
                            <label for="imgUpload_edit" id="bold-text_edit">Select an image for the Device Type:</label>
                            <input type="file" id="imgUpload_edit" name="deviceTypeImage_edit" size="10000"/>
                            <div id="imageEditDeviceType"></div>
                        </FORM> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T11:48:10.697

对不起，那是做不到的。这是一项安全功能。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-29T11:54:05.707

您可以使用 jQuery 创建输入元素，而不是将输入的 value 属性设置为要从中获取它的元素的 val 吗？

```
jQuery('input').attr("value",$('#imgUpload_edit').val()) 
```

您可以根据需要对附加的 .attr 进行字符串处理，例如 id 等。

# java - 如何由两个程序共享同一个 lib 实例

> ID：10798506
> 
> 赞同：0
> 
> 时间：2012-05-29T11:47:23.070
> 
> 标签：java, visual-c++, dll

我在java中编写了使用某种win lib的程序，现在我想再编写一个程序来模拟另一个程序。我的意思是，它应该是这样的：

*   第一个程序向 lib 询问一些简单的数据（只是真假）
*   和其他程序同时使用这个库中的函数在这个库中设置一些变量，这些变量可能会返回到第一个程序......
*   这两个程序在java中首先是独立的（让我们说“getter”），在c ++中是第二个（“setter”）......我已经将lib中的所有变量设置为静态但它没有解决问题。

这种解决方案甚至可能吗？或者我必须使用某种插座，否则

感谢重播

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T14:38:35.397

我一直在使用这种东西（Java + dll + 另一个程序），我可以看出从另一个程序执行的库和 Java 不共享静态变量，所以我认为你将无法做到就这样。

我的示例使用大小为 0 的窗口在两个程序（Java 和 VB 6.0）之间交换消息，两个程序之间的第一次调用共享窗口处理程序，但我认为这不是最好的方法这样做，此外，它有一些限制。

我公开了我认为可能与您的问题相匹配的方式：

*   共享文件：很简单，只需要注意编码。
*   内存区：可以在dll中使用一个内存区进行数据交换，这是一个真正的“静态”上下文
*   Socket：Maybe 是最灵活的，因为它适用于任何程序/系统。

如果我必须实现类似的东西，最后一个将是我将使用的那个，但这取决于你。

# callback - 回调处理是如何实现的？

> ID：10798510
> 
> 赞同：1
> 
> 时间：2012-05-29T11:47:41.610
> 
> 标签：callback, implementation

过去，我使用了允许我注册回调的库，以便库可以在某些事件发生时调用我的方法（例如，在使用 GUI 库的代码中很常见`button.onClick(clickHandler)`）。

天真地，我认为图书馆的处理机制可以像这样实现：

```
while(1){
  if (event1) { event1Handler(); }
  if (event2) { event2Handler(); }
  ...
} 
```

但这真的很浪费，对吧？或者这真的是如何完成的（例如众所周知的 GUI 库，如 java swing，或 GTK+ 就是这样做的）？

**背景：**

直到我遇到[curses](https://stackoverflow.com/questions/10798211/callbacks-with-python-curses)才真正想到这个问题。我考虑过实现自己的回调系统，直到我意识到我不知道怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T11:54:26.910

while 循环通常会等待用户的中断（Windows 中的 GetMessage）。当中断到达时，GetMessage 返回，然后在回调函数中结束。if 语句通常实现为 switch-case。请参阅 Wikipedia 上的 Windows 消息循环。

更详细地说，会发生以下情况：

用户应用程序调用 GetMessage，它强制进程休眠，直到该应用程序的输入消息从系统队列中到达。当消息到达时，用户应用程序调用 DispatchMessage，后者调用与消息所针对的窗口关联的回调函数。

Windows API 使用*一个*回调来处理 switch case 中的所有事件。其他库改为对每个事件类使用一个回调。

函数指针本身与其他窗口数据一起存储在结构中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T11:58:53.230

回调系统实现可能在不同的技术中有不同的实现，但是，我想他们应该这样工作：

1.  数据结构存储回调 ID 和指向处理程序的指针。

2.  回调处理程序有一个验证器

3.  事件处理程序有回调调用者，它们知道什么是可能的回调并以这种方式检查它们的有效性：

    对于 event.callbacks 中的每个回调

    ```
    if (callback.isValid())

        call callback()

    end if 
    ```

    结束

4.  当您向函数添加处理程序时，系统将自动知道回调在哪里有效，并将回调添加到 1 中描述的数据结构中。

如果我错了，请纠正我，这个描述只是一个猜测。

# c# - MVC 中的 string.format 问题

> ID：10798511
> 
> 赞同：0
> 
> 时间：2012-05-29T11:47:42.830
> 
> 标签：c#, asp.net-mvc-3

```
 var amount="0";
 @String.Format("{0:0.00}", amount) 
```

返回`"0"`

虽然我期待它回来

```
"0.00" 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-29T11:50:17.193

Formatting a string will just return the string itself, you have to format a number to get it formatted as a number:

```
var amount = 0; 
```

* * *

A variable with implicit type which is assigned an integer value will be an integer, so it won't have a fractional part. You might want to specify the type:

```
double amount = 0; 
```

Or use a double value:

```
var amount = 0.0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T11:50:18.773

Try:

```
String.Format("{0:#.##}", amount) 
```

OR

```
String.Format("{0:N2}", amount) 
```

* * *

Scratch this - Guffa's answer is correct...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T11:52:45.860

尝试这个

```
.ToString("N2") 
```

它将使用 CultureInfo 来格式化数字。这意味着您的千位分隔符可能会有所不同，具体取决于使用的 CultureInfo。如果需要，您还可以传递所需的 CultureInfo。

# jquery - jQuery动画右

> ID：10798526
> 
> 赞同：0
> 
> 时间：2012-05-29T11:48:27.913
> 
> 标签：jquery, jquery-animate

[http://jsfiddle.net/hashie5/ZKwA6/](http://jsfiddle.net/hashie5/ZKwA6/)

 `我的链接现在滑到右边，但它们没有对齐。我需要一个带有`text-align:right`or的动画`float:right`。此外，当您离开链接时，文本应再次左对齐。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T12:03:27.960

要右对齐，请使用上面的代码，然后更改

```
"left":"140" 
```

和

```
"left": $(this).width() - $(this).find('a').width() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T11:52:09.540

试试这个，ti应该可以工作。

```
$('document').ready(function() {

   $('.menu td').hover(
      function() {
      var a =  $(this).find('a').first();
      a.css('position', 'relative')
       .stop().animate({ left: $(this).width() - a.width()}); 
      },
      function() {
        $(this).find('a').first().stop().animate({ left: 0 });
      });
   }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T11:53:39.337

尝试悬停方法：

```
$('.menu td').hover(function() {
        $(this).find('a').animate({
            "left": "140"
        }, 500);
    },
        function() {
        $(this).find('a').animate({
            "left": "0"
        }, 500);
    }); 
```

[http://jsfiddle.net/ZKwA6/10/](http://jsfiddle.net/ZKwA6/10/)

使用停止（）；

```
$('.menu td').hover(function() {
        $(this).find('a').stop().animate({
            "left": "140"
        }, 500);
    },
        function() {
        $(this).find('a').stop().animate({
            "left": "0"
        }, 500);
}); 
```

[http://jsfiddle.net/ZKwA6/20/](http://jsfiddle.net/ZKwA6/20/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T11:58:38.477

还不是你想要的，但如果你添加正确的类并删除它，它可能会看你想要的

```
$('document').ready(function() {
    $('.menu td').delegate('', 'mouseover', function() {
        $(this).find('a').animate({
            "left": "0",
        }, 500);
        $(this).addClass('right');
    });
    $('.menu td').delegate('', 'mouseout', function() {
        $(this).find('a').attr('style', 'left:0;');
        $(this).removeClass('right');
    });
});​ 
```

请注意，我将 Left 的动画设置为 0... 你可以在这个[fiddle中找到](http://jsfiddle.net/ZKwA6/26/)

小提琴只显示左/右，我想你想把它动画到右边。但是通过更改对齐方式从左到右对其进行动画处理可能需要一些额外的计算

编辑：添加了答案的组合，因为它们都显示了一个解决方案

```
$('document').ready(function() {
    $('.menu td').delegate('', 'mouseover', function() {
        $(this).find('a').stop().animate({
            "left": $(this).width() - $(this).find('a').width()
        }, 500);
    });
    $('.menu td').delegate('', 'mouseout', function() {
       $(this).find('a').stop().animate({
           "left": "0",
        }, 500);
   });
});​ 
```

致谢：Alex Ball、Raminson、Esailija`

# jquery - 如何使用 parseJSON 将数据放入不同的选项卡

> ID：10798527
> 
> 赞同：0
> 
> 时间：2012-05-29T11:48:34.207
> 
> 标签：jquery, json

我已经制作了 web 服务，并且正在使用 webmethod 从中获取数据。我制作了两个函数是否可以使用两个 parseJSON 函数在单个函数中调用单个 websrvice？

它随机向我显示数据我希望数据显示在两个不同的选项卡中。有时它仅显示在单个选项卡中，有时它显示在错误的选项卡中。

下面是一段代码

```
function contacts(){
 $.ajax({
            type: 'POST',
            url: webMethod,
            processData: true,
            data: { 'country': 'india' },
            dataType: "jsonp",
            jsonpCallback: 'parseJSON',
            contentType: "application/json; charset=utf-8",
            success: function (data) {

                $detail = $("div.presenter-tabs");

                $("div#india", $detail).html($('#contactUsTemplate').render(data));
            },
            error: function (response, status, data) {
                var c = status; //For testing purpose
            }
        });

        $.ajax({
            type: 'POST',
            url: webMethod,
            processData: true,
            data: { 'country': 'out of india' },
            dataType: "jsonp",
            jsonpCallback: 'parseJSON',
            contentType: "application/json; charset=utf-8",
            success: function (data) {

                $detail1 = $("div.presenter-tabs");

                $("div#outofindia",  $detail1).html($('#contactUsTemplate').render(data));
            },
            error: function (response, status, data) {
                var c = status; //For testing purpose
            }
        });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T11:52:41.520

这对我来说看起来很可疑：

```
$detail1 = $("div.presenter-tabs");

$("div#outofindia",  $detail1).html($('#contactUsTemplate').render(data)); 
```

尝试将其更改为：

```
$("div#outofindia").html($('#contactUsTemplate').render(data)); 
```

同样在“印度”回调中：

```
$("div#india").html($('#contactUsTemplate').render(data)); 
```

# md5 - 散列函数保证是唯一的？

> ID：10798529
> 
> 赞同：3
> 
> 时间：2012-05-29T11:48:45.663
> 
> 标签：md5, hash

在我们的应用程序中，我们将收到 png 图像以及大约 200 个字符字节的数组。我想用与该字节数组对应的文件名保存图像，但不是字节数组本身，因为我不想要 200 个字符的文件名。所以，我想我会将字节数组保存到数据库中，然后 MD5 得到一个短文件名。当需要显示特定图像时，我查找它的字节数组，MD5，然后查找该文件。

到目前为止，一切都很好。问题是两个不同的字节数组可能会散列到相同的 MD5。然后，一个文件将有效地覆盖另一个文件。或者他们可以吗？我想我的问题是

*   两个~200 char bytearrays MD5-hash 到同一个字符串吗？
*   如果可以的话，它是每 10 个宇宙时代一次的交易还是可以想象在我的应用程序中发生的事情？
*   是否有一个哈希算法会产生一个（比如说）32个字符的字符串，保证是唯一的？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-29T11:54:29.700

从逻辑上不可能从 200 字节源中获取 32 字节代码，这在所有可能的 200 字节源中是唯一的，因为您可以在 200 字节中存储比在 32 字节中更多的信息。

他们唯一的例外是存储在这 200 个字节中的信息也适合 32 个字节，在这种情况下，您的源日期格式将非常低效且浪费空间。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-29T11:58:37.480

当散列（而不是加密）时，您正在减少被散列的数据的信息空间，因此总是有*可能*发生冲突。

在散列函数中你能期望的最好的结果是所有散列均匀分布在散列空间中，并且你的散列输出足够大，可以提供你的“每 10 个宇宙时代一次的交易”为你把它！

因此，哈希对您来说是否“足够好”取决于碰撞的后果。您总是可以在校验和/哈希中添加一个唯一的 ID，以获得两全其美的效果。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-29T11:56:12.373

为什么不使用数据库中的[唯一 ID](http://dev.mysql.com/doc/refman/5.0/en/example-auto-increment.html)？

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-29T11:56:59.343

两个散列可能发生冲突的概率取决于散列大小。MD5 产生 128 位散列。因此，对于**2 ^(128) +1**个哈希值**，至少会发生一次**冲突。

这个数字对于*SHA1是***2 ^(160) +1**，对于*SHA512是***2** **^(512)** **+1**。

 **此处适用此规则。输出位越多，唯一性和计算量就越大。所以有一个权衡。你要做的就是选择一个最佳的。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-05-29T11:55:52.343

> 两个~200 char bytearrays MD5-hash 到同一个字符串吗？

考虑到 200 字节的字符串多于 32 字节的字符串（MD5 摘要），这是肯定的。

所有散列函数都有这个问题，但有些比 MD5 更健壮。试试 SHA-1。git 将它用于相同的目的。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-10T09:40:37.020

正如其他人之前所说。哈希不会给你你需要的东西，除非你有碰撞的风险。

数据库在这里很有帮助。您将获得每个 200 长字符串的唯一索引。这里没有冲突，您需要将 200 个长名称设置为索引，这样它会使用额外的内存，但它会为您进行排序，使搜索非常快速。您将获得可轻松用于文件名的唯一 ID。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-05-29T11:53:44.390

可能会发生两个 MD5 哈希冲突（相同）。1996 年，在 MD5 算法中发现了[一个缺陷](http://en.wikipedia.org/wiki/MD5#History_and_cryptanalysis)，密码分析家建议改用 SHA-1 哈希算法。

因此，我建议您切换到 SHA-1（40 个字符）。但别担心：我怀疑你的两张照片会得到相同的哈希值。我认为您可以在您的应用程序中承担这种风险。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-29T12:06:03.217

我没有在散列算法上做太多工作，但据我了解，散列算法总是有可能发生冲突，即两个不同的对象可能被散列到相同的散列值，但可以保证每次一个对象都会被散列到相同的散列价值。还有其他技术可以用于此，如线性探测。**

# php - CJUIDialog 不适用于 CListView 寻呼机控制器

> ID：10798530
> 
> 赞同：0
> 
> 时间：2012-05-29T11:49:07.257
> 
> 标签：php, yii

我有 CListView 并在内部重新编辑了一个具有按钮的视图，单击它会打开一个 CJUIDialog。

但是当我使用页面控制器进入下一页时。CJUIDialog 内容无需单击按钮即可加载到页面。

知道为什么会这样吗？

如果有人可以帮助我，那就太好了。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T12:20:21.633

好的，Yii 以自动方式为很多控件生成 id，所以为了避免与事件发生冲突，我建议您通过以下方式从项目视图中取出交互处理：

在生成 CListView 的页面中：

```
$this->widget('zii.widgets.CListView', array(
    'dataProvider'=>$dataProvider,
    'itemView'=>'_post',   // refers to the partial view named '_post'
    'sortableAttributes'=>array(
        'title',
        'create_time'=>'Post Time',
    ),
));
$this->beginWidget('zii.widgets.jui.CJuiDialog', array(
    'id'=>'dialog',
    'options'=>array(
        'title'=>'Dialog',
        'autoOpen'=>false,
    ),
));
$this->endWidget('zii.widgets.jui.CJuiDialog'); 
```

在项目视图页面中：

```
echo CHtml::htmlButton('Button',array('onclick' => '$("#dialog").dialog("open");')); 
```

如果您需要对数据行执行某些操作（例如使用该数据的 id 属性），您可以创建一个自定义 javascript 函数，该函数将在单击按钮时接收数据。

```
echo CHtml::htmlButton('Button',array('onclick' => 'myFunction('.$data->id.')')); 
```

前面的例子是：

```
<?php
$this->widget('zii.widgets.CListView', array(
    'dataProvider'=>$dataProvider,
    'itemView'=>'_post',   // refers to the partial view named '_post'
    'sortableAttributes'=>array(
        'title',
        'create_time'=>'Post Time',
    ),
));
$this->beginWidget('zii.widgets.jui.CJuiDialog', array(
    'id'=>'dialog',
    'options'=>array(
        'title'=>'Dialog',
        'autoOpen'=>false,
    ),
));
$this->endWidget('zii.widgets.jui.CJuiDialog');
?>
<script type="text/javascript">
function myFunction(id) {
    // you can put whatever you need inside the dialog 
    $("#dialog").html(id);
    // open the dialog
    $("#dialog").dialog("open");
}
</script> 
```

# c# - c# 报告 mysql 命令失败，即使它没有

> ID：10798536
> 
> 赞同：0
> 
> 时间：2012-05-29T11:49:45.187
> 
> 标签：c#, mysql

为了便于编辑，我将命令拆分为几行：

```
string docommand = "";
docommand += "DROP TABLE IF EXISTS `config`;";
//docommand += "/*!40101 SET @saved_cs_client     = @@character_set_client */;";
//docommand += "/*!40101 SET character_set_client = utf8 */;";
docommand += "CREATE TABLE `config` (";
docommand += "  `name` varchar(200) NOT NULL,";
docommand += "  `value` varchar(200) NOT NULL,";
docommand += "  `timestamp` int(11) NOT NULL,";
docommand += "  UNIQUE KEY `name` (`name`)";
docommand += ")";
//docommand += " ENGINE=MyISAM DEFAULT CHARSET=latin1";
docommand += ";";
//docommand += "/*!40101 SET character_set_client = @saved_cs_client */;";

mysql_connect connect = new mysql_connect();
MySqlConnection conn = connect.connect(core_config.server, core_config.database, core_config.username, core_config.pass);
bool success = mysql_command.command(docommand, conn);
connect.disconnect();

if (!success)
    Console.WriteLine("Command failed : " + docommand); 
```

如您所见，我注释掉了几行以查看它们是否造成了麻烦。没有什么不同。

输出：

```
Returning false because resultSet is 0
Command failed : DROP TABLE IF EXISTS `config`;CREATE TABLE `config` (  `name` varchar(200) NOT NULL,  `value` varchar(200) NOT NULL,  `timestamp` int(11) NOT NULL,  UNIQUE KEY `name` (`name`)); 
```

但是该表已正确创建......当我将完全相同的命令粘贴`phpmyadmin`并从那里运行它时，它不会报告任何问题。

类似的命令`"SELECT * FROM config"`不会报告失败。那么为什么 CREATE TABLE 命令会这样做呢？

**mysql_command.command()**函数：

```
public static bool command(string input, MySqlConnection con)
{
    try
    {
        MySqlCommand command = new MySqlCommand(input, con);
        var resultSet = command.ExecuteNonQuery();

        if (!resultSet.Equals(0))
        {
            return true;
        }
        Console.WriteLine("Returning false because resultSet is 0");
        return false;
    }
    catch (Exception ex) { Console.WriteLine("MySQL command error : "+ex.Message); }
    Console.WriteLine("Returning false after exception");
    return false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T11:59:15.810

**DROP TABLE 和 CREATE TABLE都**不会返回 0 以外的任何内容。因此，您的“命令”方法将始终认为命令失败。ExecuteNonQuery() 将返回受语句影响的**行，即 0。**

你可以做什么，传递你期望它改变的行数，比如：

```
public static bool command(string input, MySqlConnection con, int expectedRowsAffected = 0)
{
try
{
    MySqlCommand command = new MySqlCommand(input, con);
    var resultSet = command.ExecuteNonQuery();

    if (resultSet.Equals(expectedRowsAffected))
    {
        return true;
    }
    Console.WriteLine(string.Format("Returning false because resultSet isn't {0}", expectedRowsAffected));
    return false;
}
catch (Exception ex) 
{ 
    Console.WriteLine("MySQL command error : "+ex.Message); 
}
Console.WriteLine("Returning false after exception");
return false; 
```

}

这不是一个很好的方法——正如我所说，一个命令是否“成功”可能意味着不同的事情——但在低级别上，如果一个命令运行没有任何错误/异常，那么它就是成功的，你就是已经在检查。

# .net - Capture unprintable characters in Silverlight or WinForms field

> ID：10798537
> 
> 赞同：1
> 
> 时间：2012-05-29T11:49:46.047
> 
> 标签：.net, winforms, silverlight, inputstream, barcode-scanner

I have a Silverlight application. In one field the user is supposed to enter data by scanning a barcode using a usb connected barcode-scanner.

Normally this is not a problem because the barcode scanner behaves just like any keyboard.

But it seems Silverlight, WinForms, etc. are removing some unprintable characters. In my case I would like to capture the ASCII character 29 that I know exists on the barcode.

(If for example I make a Console program and do Console.Read() then I'm able to capture the ASCII 29.)

Any ideas?

# android - 关闭缩放图表引擎

> ID：10798542
> 
> 赞同：5
> 
> 时间：2012-05-29T11:50:01.040
> 
> 标签：android, charts, achartengine

AchartEngine 有两种缩放图表的方法。首先是“按钮”，其次是“手指”。有没有办法禁用其中一个？我不想用“手指”放大。是否可以？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-29T15:21:52.287

您可以使用 XYMultipleSeriesRenderer 方法来启用或禁用缩放

```
mRenderer.setPanEnabled(false, false);
mRenderer.setZoomEnabled(false, false);
renderer.setZoomEnabled(false, false); 
```

也看到这个

[http://www.achartengine.org/content/javadoc/org/achartengine/tools/class-use/ZoomListener.html#org.achartengine](http://www.achartengine.org/content/javadoc/org/achartengine/tools/class-use/ZoomListener.html#org.achartengine)

# android - Android，正在寻找一种简单的方法来准确确定设备是否支持 C2DM？

> ID：10798549
> 
> 赞同：0
> 
> 时间：2012-05-29T11:50:21.477
> 
> 标签：android, android-c2dm

我正在寻找编写布尔函数的最简单方法，该函数将告诉我运行应用程序的设备是否能够使用 C2DM。

我知道 Android Google Play 应用程序的存在保证了 C2DM 功能，但并非所有设备都具有此功能并且仍然具有 C2DM 功能

据我所知，该设备需要安装 GSF（Google 服务框架）并设置有效的 GMail 帐户，这些是保证 C2DM 正常工作的唯一要求。这是准确的吗？

如果是这样，检查 GMail 包和 Google Services Framework 包的存在是否是最好和最准确的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T11:59:36.180

非常快，但概念仍然存在，如果您确实希望简单地搜索 Google 服务框架的存在，您可以使用以下内容。

我只发布这个是因为 AFAIK 没有另一种明显的方法。

```
 boolean installed  =   appInstalledOrNot("com.google.process.gapps");
        if(installed)
        {
                  System.out.println("App installed on phone");
        }
        else
        {
            System.out.println("App is not installed phone");
        }
    }
    private boolean appInstalledOrNot(String uri)
    {
        PackageManager pm = getPackageManager();
        boolean app_installed = false;
        try
        {
               pm.getPackageInfo(uri, PackageManager.GET_ACTIVITIES);
               app_installed = true;
        }
        catch (PackageManager.NameNotFoundException e)
        {
               app_installed = false;
        }
        return app_installed ;
} 
```

# ruby-on-rails - 与 activerecord 导轨的关系问题

> ID：10798552
> 
> 赞同：1
> 
> 时间：2012-05-29T11:50:29.400
> 
> 标签：ruby-on-rails, activerecord, devise

我仍在学习 Rails，我已经阅读了一些书籍并在 codeschool.com 上进行了一些实践，现在我正在尝试从头开始编写我的第一个简单应用程序。

我正在使用设计进行身份验证，但由于我仍然对 Rails 有点失望，所以目前我还没有收到电子邮件确认，出于测试目的，只有管理员用户可以采取行动。

这是我的模型：

```
[loluser@fedora models]$ ls
admin.rb  pet.rb  user.rb
[loluser@fedora models]$ cat admin.rb 
class Admin < ActiveRecord::Base
    has_many    :pets 
    devise :database_authenticatable, :registerable, :timeoutable, :validatable,
         :timeout_in => 20.minutes
end
[loluser@fedora models]$ cat pet.rb 
class pet < ActiveRecord::Base
    belongs_to :admin
end 
```

[loluser@fedora 模型]$

在我的控制器中，我想在索引中显示 Admin[1] 的宠物，所以我有以下代码：

```
 class petsController < ApplicationController
  before_filter :authenticate_admin!
  # GET /pets
  # GET /pets.xml
  def index
    admin=Admin.find(1)
    @pets = pet.admin.all

    respond_to do |format|
      format.html # index.html.erb
      format.xml  { render :xml => @pets }
    end
  end 
```

但是，我收到此错误：

```
NoMethodError in petsController#index

undefined method `admin' for #<Class:0x7f2daa7b0258>

Rails.root: /home/loluser/dev/app2/devise_example
Application Trace | Framework Trace | Full Trace

app/controllers/pets_controller.rb:7:in `index' 
```

帮助将不胜感激，如果我需要澄清一些事情，请告诉我。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T11:54:15.430

它应该是：

```
@pets = admin.pets 
```

你应该看看 ActiveRecord 关联指南，它非常好： http: [//guides.rubyonrails.org/association_basics.html](http://guides.rubyonrails.org/association_basics.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T11:57:22.473

你不需要.all。你有管理员实例，管理员有很多宠物，对吧？所以就这样做

`@pets = admin.pets`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T12:53:51.370

你可以简单地`@pets = admin.pets`
为你的错误做，它说你在宠物表中没有 admin_id 字段记住..如果你想 has_many 与管理员的宠物关联，那么你需要在宠物表中设置 admin_id

# java - 从 Java 调用 WinMain：可能吗？还有什么办法吗？

> ID：10798559
> 
> 赞同：0
> 
> 时间：2012-05-29T11:51:06.073
> 
> 标签：java, c++, winapi, java-native-interface, winmain

我如何从 java 调用此方法：

```
 WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int nCmdShow) 
```

是否可以从 java 调用 WinMain ？我希望该函数中参数的值与直接运行 c++ 程序时的值相同。我想链接一个`.dll`入口点是这个函数的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T12:32:50.493

这是一个坏主意，原因有很多。

## [`WinMain`](http://msdn.microsoft.com/en-us/library/ff381406.aspx)很特别

像`main`or一样`DllMain`，这些功能比看起来要多说。

与天真的方法相反，`WinMain`不是堆栈上的“第一个”函数。它是代码开发人员可编写的第一个函数。但是如果你去调试，你会发现之前和之后发生了很多事情`WinMain`。

其中，C++ 全局对象的构造/销毁、使用[`atexit`](http://www.cplusplus.com/reference/clibrary/cstdlib/atexit/)C API 注册的函数等，但您可以肯定那里发生了很多特定于 Windows 平台的事情。

然后，如果它是 a `WinMain`，那么您很可能在内部某处有一个消息循环。它很可能会干扰您自己的（您的 Java 应用程序是 GUI 应用程序吗？）

## HINSTANCE 不是可选的

你会给什么参数值`WinMain`？

第一个 HINSTANCE 参数非常重要，可以由您尝试启动的可执行文件的代码使用。您不能只提供一些随机值并期望它起作用。您可以检索 Java 进程的 HINSTANCE，但我怀疑您不会喜欢这个结果。

## 隐藏变量不是可选的

假设您成功调用了程序的 WinMain。这个程序会期望一些东西在那里（见*`WinMain`特殊*部分）。其中，`GetCommandLine()`API 函数的结果，可以在你的 C++ 程序中使用。

## WinMain 用于进程，而不是 DLL

> 是否可以从 java 调用 WinMain ？我希望该函数中参数的值与直接运行 c++ 程序时的值相同。我想链接一个入口点是这个函数的.dll

您是否试图“启动”一个 DLL，其入口点是 WinMain？我猜是哪里出了问题。`WinMain`或者`main`是 Windows 上进程的标准入口点，而不是 DLL。DLL 入口点通常`DllMain`具有不同的原型。

## 结论

我不知道为什么您需要在与 Java 启动器相同的进程中启动可执行文件，但我相信您做错了什么。

就像[mikera](https://stackoverflow.com/users/214010/mikera)在他的[回答](https://stackoverflow.com/a/10798704/14089)中所写的那样，您最好使用 Java API 来启动一个进程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T11:58:21.437

通过JNA应该可以：

*   [http://en.wikipedia.org/wiki/Java_Native_Access](http://en.wikipedia.org/wiki/Java_Native_Access)

然而，它对我来说仍然像是一种设计气味......为什么要从 Java 程序调用 WinMain（标准 Windows 应用程序入口点）？为什么不只是[Runtime.exec()](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Runtime.html)呢？

# android - 如何使用标准 SENSOR_DELAY_UI/FASTEST/GAME/NORMAL 以外的 java API 在 android 中更改加速度计采样时间

> ID：10798561
> 
> 赞同：0
> 
> 时间：2012-05-29T11:51:08.287
> 
> 标签：android, android-sensors

我想知道使用加速度计输出的位置值。请回答我的问题

如何获得恒定的采样间隔（因为我在不同的事件值之间得到不同的时间间隔）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T11:55:31.167

> 如何获得恒定的采样间隔（因为我在不同的事件值之间得到不同的时间间隔）

“恒定采样间隔”是不可能的。当传感器选择将数据交给您时，您将获得数据（对于`SENSOR_DELAY_FASTEST`，这不是延迟），这将取决于传感器和整个设备的制造商。如果您需要平滑数据速率，则需要以某种方式自己完成。

# xaml - 使用 RichtTextBlock 格式化文本

> ID：10798566
> 
> 赞同：3
> 
> 时间：2012-05-29T11:51:26.267
> 
> 标签：xaml, mvvm-light, windows-8, windows-runtime, winrt-xaml

小问题，任何人都有一个关于在 Windows8 中使用 RichTextBlock 控件时不同数据格式提示的小例子 - XAML？

目前，我正在 MVVM 将 RichTextBlock 的 Paragraph 元素绑定到我的 MVVM 上的大型文本属性。

但我想知道，我怎样才能指出在哪里添加换行符、设置标题等......？任何人有什么好的建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T12:25:19.597

我以前从未使用过 RichTextBlock，但在 MSDN 论坛上有一个有趣的话题：http: [//social.msdn.microsoft.com/Forums/en-US/winappswithnativecode/thread/d215abeb-7acd-41c1-81ba-c73a0ab68785](http://social.msdn.microsoft.com/Forums/en-US/winappswithnativecode/thread/d215abeb-7acd-41c1-81ba-c73a0ab68785)其中一个MSFT 员工解释说您应该使用[Blocks 属性](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.richtextblock.blocks.aspx)。

现在，Blocks 属性是 BlockCollection 类型，这意味着它可以容纳任何类型的块。**在您的 ViewModel 中，您可以使用HTML**字符串填充属性（包含带有标题、段落等的文本）。然后，您应该考虑创建一个附加行为来读取 HTML 并创建所需的块（如**Windows.UI.Xaml.Documents.Paragraph**）以最终填充 Blocks 属性。

查看以下指南以创建附加行为：[http ://dotnet.dzone.com/articles/dragflickbehavior-windows](http://dotnet.dzone.com/articles/dragflickbehavior-windows)

```
<RichTextBlock ...>
    <MyBehaviors:Interaction.Behaviors>
        <MyBehaviors:RichTextBehavior HtmlText="{Binding ...}"/>
    </MyBehaviors:Interaction.Behaviors>
</RichTextBlock> 
```

# jquery - 使用 IP 而不是 localhost 时，IE8 jquery 调用未正确返回

> ID：10798569
> 
> 赞同：1
> 
> 时间：2012-05-29T11:51:28.247
> 
> 标签：jquery, ajax, internet-explorer, ip, localhost

我有一个 jquery ajax 调用

```
$.get("http://localhost:82/store-app/public/Index/getstylinginfo" 
```

当我使用本地主机从 IE 运行它时，它工作正常。但是当我尝试使用 IE 使用我的 IP 地址运行它时，它不会获取数据。知道我可能做错了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T11:53:43.280

`localhost`和你的IP地址不是同一个域。它们可能是同一台机器；一个甚至可以指向另一个，但它们是独立的域，因此由于同源策略，您不能从另一个访问一个。

为避免违反同源策略，您必须使用与原始文档中相同的域、协议和端口。

# wcf - 为一个应用程序添加多个服务参考

> ID：10798573
> 
> 赞同：0
> 
> 时间：2012-05-29T11:51:39.887
> 
> 标签：wcf, wcf-client

我无法为同一类添加多个服务引用。

```
using testApp.ServiceReference1;
using testApp.ServiceReference2; 
```

但`ServiceReference2`不能在这里用作命名空间

有没有可能？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T12:58:16.123

打开 ServiceReference2 文件夹下的 reference.cs 文件（在 Visual Studio 中*显示所有文件）。*生成类型的命名空间将在该文件中。

# html - 布局视口 css 宽度属性

> ID：10798579
> 
> 赞同：1
> 
> 时间：2012-05-29T11:52:00.543
> 
> 标签：html, css, mobile, responsive-design, viewport

我读了这篇文章[两个视口的故事](http://www.quirksmode.org/mobile/viewports2.html)

在这篇文章中，作者写道：

“CSS 布局，尤其是百分比宽度，是相对于布局视口计算的”

“重点是：浏览器选择了布局视口的尺寸，使其在完全缩小模式下完全覆盖屏幕（因此等于视觉视口）。”

我不明白以下段落：

“现在你可以尝试设置 html {width: 320px}。现在元素缩小了，所有其他元素也随之缩小，现在占 320px 的 100%。当用户放大时，这有效，但最初，当用户面临一个缩小的页面，其中大部分内容都没有”

**如果设备的屏幕大小约为 320 像素，布局视口也是如此，如果 html 元素的 css 宽度设置为 320px，为什么元素会缩小？**

谢谢

![在此处输入图像描述](../Images/5fb45ac87fc258cb492af8693cb9d4b1.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T12:49:59.263

> 如果设备的屏幕大小约为 320 像素，布局视口也是如此，如果 html 元素的 css 宽度设置为 320px，为什么元素会缩小？

**如果您不**使用元标记`<meta name="viewport" content="width=device-width">`（或任何附加项）重置它，您的移动设备上的默认视口为 ca 980px 。

移动浏览器会自动缩放您的页面，使 980 像素的大小适合屏幕，使您的 320 像素只有三分之一。

# windows - node.js：在新窗口中运行外部命令

> ID：10798586
> 
> 赞同：1
> 
> 时间：2012-05-29T11:52:41.687
> 
> 标签：windows, node.js, external, child-process

我正在编写一个在后台永久运行并不时启动文件下载的 node.js 脚本。我想使用 WGET 来下载文件，因为在我真正知道我在用 node.js 做什么之前它看起来更健壮。

问题是我想查看相关下载的进度。但是我找不到通过 node.js 启动 WGET 的方法，即打开一个新的 shell 窗口并为 WGET 显示。

Node 的 exec 和 spawn 函数在后台运行外部命令，让我可以访问输出流。但是由于我的脚本在后台运行（隐藏），所以我对输出流无能为力。

我尝试通过运行“cmd /c wget...”打开一个新的 shell 窗口，但这没有任何区别。

有没有办法通过 node.js 在新窗口中运行外部命令行进程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T12:15:49.120

您可以为此使用 node-progress 和 Node 的 http 客户端（或 requestT），不需要 wget：

[https://github.com/visionmedia/node-progress](https://github.com/visionmedia/node-progress)

例子：

```
var ProgressBar = require('../')
  , https = require('https');

var req = https.request({
    host: 'download.github.com'
  , port: 443
  , path: '/visionmedia-node-jscoverage-0d4608a.zip'
});

req.on('response', function(res){
  var len = parseInt(res.headers['content-length'], 10);

  console.log();
  var bar = new ProgressBar('  downloading [:bar] :percent :etas', {
      complete: '='
    , incomplete: ' '
    , width: 20
    , total: len
  });

  res.on('data', function(chunk){
    bar.tick(chunk.length);
  });

  res.on('end', function(){
    console.log('\n');
  });
});

req.end(); 
```

更新：

由于您想在后台进程中执行此操作并监听下载进度（在单独的进程中或您有什么），您可以使用 pub-sub 功能来实现，或者：

*   使用 Redis、RabbitMQ 或 ZeroMQ 等消息队列
*   在已知端口/UNIX 域上启动 TCP 服务器并监听它

资源：

[http://nodejs.org/api/net.html](http://nodejs.org/api/net.html)

# matlab - 另一个 for 循环中的 for 循环以生成新的向量集

> ID：10798588
> 
> 赞同：0
> 
> 时间：2012-05-29T11:52:45.420
> 
> 标签：matlab, vector, for-loop, matrix

我想在一个循环中使用一个 for 循环`for`（我认为）来生成一些我可以单独使用的向量`polyfit`。

我有一个 768x768 矩阵，我已将其拆分为 768 个单独的单元向量。但是我想将每个 1x768 矩阵分成 16 个点的部分 - 即 48 个新向量，长度为 16 个值。然后我想用这些信息做一些曲线拟合。

我想将 48 个向量中的每一个命名为不同的名称，但是我想为 768 列中的每一个进行此操作。我可以轻松地单独执行此操作，但我希望有一种方法可以将它们结合起来。我尝试将其作为 for 语句中的 for 语句执行，但它不起作用，我想知道是否有人可以给我一些关于如何产生我想要的东西的提示。我附上了代码。

`Qne`是我所有点的 768*768 矩阵。

```
N1=768;
x=cell(N,1);

for ii=1:N1;
   x{ii}=Qnew(1:N1,ii);
end 

for iii = 1:768;
   x2{iii}=x{iii};
    for iv = 1:39
    N2=20;        
    x3{iii}=x2{iii}(1,(1+N2*iv:N2+N2*iv));
    %Gx{iv}=(x3{iv});
    end     
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T12:53:35.113

使用正常的 2D 矩阵进行内部拆分。为什么？它很容易重塑，并且您可能会使用的许多拟合操作已经对矩阵的列进行了操作。

```
for ii=1:N1
    x{ii} = reshape(Qnew(:, ii), 16, 48);
end 
```

现在`x{ii}`是一个 2D 矩阵，大小为 16x48。如果要单独处理第 jj 个拆分窗口，可以说`x{ii}(:, jj)`. 但通常你不必这样做。例如，如果你想要每个窗口的平均值，你可以说`mean(x{ii})`，它将取每一列的平均值，然后给你一个 48 元素的行向量。

未提出问题的额外参考：如果您想要一个向量的重叠窗口而不是邻接，请参阅`buffer`信号处理工具箱。

编辑我的答案：

更进一步，3D 矩阵可能是等大小向量的最佳表示。请记住，`reshape()`按列读取并按列填充新矩阵，这可以通过单个重塑来完成：

```
x = reshape(Qnew, 16, 48, N1); 
```

x is now a 16x48x768 3D array, and the jj'th window of the ii'th vector is now `x(:, jj, ii)`.

# uiview - Xcode：如何在 UIView 之间左右滑动？

> ID：10798595
> 
> 赞同：0
> 
> 时间：2012-05-29T11:52:58.237
> 
> 标签：uiview, xcode4

我想要最简单的方法来实现多个 UIView 之间的滑动右/左手势，如 AngryBirds 级别，如下面的屏幕截图所示

![AngryBirds 关卡截图](../Images/1896920266d83015c48984599c46fc7a.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T11:56:35.760

您最好的选择可能是不使用滑动手势，而是使用小于其`UIScrollView`的 a （以显示上一页/下一页）和and 。`contentSize.width``frame.size.width``pagingEnabled = YES``clipsToBounds = NO`

# css - CSS3 Pie背景图像不显示

> ID：10798597
> 
> 赞同：0
> 
> 时间：2012-05-29T11:53:10.033
> 
> 标签：css, css3pie

我正在使用 CSS3 pie，并在 head 标签之前通过附加的 js 文件调用它。

出于某种原因，我的背景图片出现了。我已经尝试了标准添加 z-index 和位置相对修复，但它没有显示。任何帮助指导表示赞赏。

下面是css。

```
.linkButton {
  background: url('../Images/linkButtonBg.png') 100% 9px no-repeat #dc5c00;
  background: url('../Images/linkButtonBg.png') 100% 9px no-repeat, -webkit-gradient(linear, 0% 0% 0% 100% from(#e36000), to(#c85400));
  background: url('../Images/linkButtonBg.png') 100% 9px no-repeat, -webkit-linear-gradient(top, #e36000, #c85400);
  background: url('../Images/linkButtonBg.png') 100% 9px no-repeat, -moz-linear-gradient(top, #e36000, #c85400);
  background: url('../Images/linkButtonBg.png') 100% 9px no-repeat, -ms-linear-gradient(top, #e36000, #c85400);
  background: url('../Images/linkButtonBg.png') 100% 9px no-repeat, -o-linear-gradient(top, #e36000, #c85400);
  -pie-background: url('../Images/linkButtonBg.png') 100% 9px no-repeat #000;
  padding: 10px 10px 10px 11px;
  display: inline-block;
  color: #ffffff;
  font-weight: bold;
  box-shadow: inset 0 1px 0 0 #ff801e, 0 0 1px 1px #ffffff, 0 0 1px 1px #ffffff;
  border: 1px solid #c85400;
  text-shadow: #813700 2px 2px 1px;
  line-height: 12px;
  margin-bottom: 7px;
  width: 326px;
  display: block!important;
  position:relative;
  border-radius: 4px;
  -webkit-border-radius: 4px;
  -moz-border-radius: 4px;`enter code here`
  z-index:1;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T14:32:37.810

首先，对于普通的旧图像+背景颜色，您不需要 -pie-background 。

如果您确实想使用 -pie ，请记住路径是[相对于 html 而不是 css](http://css3pie.com/documentation/known-issues/#relative-paths)。

（我假设您已经设置了 mime-type 等，并且 pie 在不同情况下适用于您。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T11:55:59.093

```
.linkButton{
    behavior: url(PIE.htc);
} 
```

另外，请尝试在 PIE.htc 文件所在的位置添加具有以下内容的 .index 文件：

更多信息[http://css3pie.com/](http://css3pie.com/)

[http://css3pie.com/documentation/](http://css3pie.com/documentation/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T13:16:21.480

尝试不带点和斜线的链接，如下所示：

```
-pie-background: url('Images/linkButtonBg.png') 100% 9px no-repeat #000; 
```

# indexing - RavenDB 中的 MonotonicRead 和 ReadYourWrites 有什么区别？

> ID：10798599
> 
> 赞同：2
> 
> 时间：2012-05-29T11:53:13.207
> 
> 标签：indexing, ravendb, isolation-level, consistency, eventual-consistency

RavenDB (build 888) 中 DocumentConvention 的默认 ctor 将 DefaultQueryingConsistency 设置为 MonotonicRead。据我了解，这意味着默认情况下，我们将等待索引在写入后更新。不要误会我的意思——这对于简单性来说是个好消息（尤其是在集成测试中），但它违背了我理解的 RavenDB 最终一致性口头禅的一部分。

我已经阅读[了 ConsistencyOptions.cs 中引用的文章](http://www.allthingsdistributed.com/2008/12/eventually_consistent.html)，但我对 MonotonicRead 和 ReadYourWrites 之间的区别感到困惑——它们对我来说似乎是一样的。

那么：这两种一致性模型有什么区别，这与 RavenDB 的一致性模型有什么关系？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T19:02:59.927

ReadYourWrites 相当于对所有查询执行 WaitForNonStaleResultsAsOfLastWrite。这意味着您不会从任何映射索引中获得任何陈旧的结果（或获得超时异常），但您仍可能从 map/reduce 查询中获得陈旧的结果。

# django - 如何获取 django_tables2 中的列列表

> ID：10798601
> 
> 赞同：2
> 
> 时间：2012-05-29T11:53:19.083
> 
> 标签：django, django-tables2

是否可以获取 django_tables2 表中的列列表

```
# tables.py
import django_tables2 as tables    

class MyTable(tables.Table):
    firstcol = tables.Column()
    secondcol = tables.Column() 
```

然后使用一个函数...

```
 >>> MyTable.function_to_list_cols()
 ['firstcol', 'secondcol'] 
```

# python - 向 mysql 插入 4 字节 unicode 引发的警告

> ID：10798605
> 
> 赞同：8
> 
> 时间：2012-05-29T11:53:30.080
> 
> 标签：python, mysql, regex, astral-plane

请看以下内容：

```
/home/kinka/workspace/py/tutorial/tutorial/pipelines.py:33: Warning: Incorrect string 
value: '\xF0\x9F\x91\x8A\xF0\x9F...' for column 't_content' at row 1
n = self.cursor.execute(self.sql, (item['topic'], item['url'], item['content'])) 
```

string `'\xF0\x9F\x91\x8A`，实际上是一个 4 字节的 unicode: `u'\U0001f62a'`。mysql 的字符集是 utf-8，但插入 4 字节 unicode 会截断插入的字符串。我google了一下这样的问题，发现5.5.3下的mysql不支持4字节unicode，可惜我的是5.5.224。我不想升级mysql服务器，所以我只想在python中过滤4字节的unicode，我尝试使用正则表达式但失败了。那么，有什么帮助吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-29T12:46:50.447

如果 MySQL 无法处理 4 字节或更多字节的 UTF-8 代码，那么您必须过滤掉 codepoint 上的所有 unicode 字符`\U00010000`；UTF-8 将低于该阈值的代码点编码为 3 个字节或更少。

您可以为此使用正则表达式：

```
>>> import re
>>> highpoints = re.compile(u'[\U00010000-\U0010ffff]')
>>> example = u'Some example text with a sleepy face: \U0001f62a'
>>> highpoints.sub(u'', example)
u'Some example text with a sleepy face: ' 
```

或者，您可以将该[`.translate()`函数](http://docs.python.org/library/stdtypes.html#str.translate)与仅包含`None`值的映射表一起使用：

```
>>> nohigh = { i: None for i in xrange(0x10000, 0x110000) }
>>> example.translate(nohigh)
u'Some example text with a sleepy face: ' 
```

但是，创建翻译表会消耗大量内存并且需要一些时间来生成；这可能不值得您付出努力，因为正则表达式方法更有效。

这一切都假定您使用的是 UCS-4 编译的 python。如果您的 python 是在 UCS-2 支持下编译的，那么您最多只能`'\U0000ffff'`在正则表达式中使用代码点，并且您一开始就不会遇到这个问题。

我注意到从 MySQL 5.5.3 开始，新添加的[`utf8mb4`编解码器](http://dev.mysql.com/doc/refman/5.5/en/charset-unicode-utf8mb4.html)确实支持完整的 Unicode 范围。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-02T07:15:46.687

我认为您应该使用 utf8mb4 排序规则而不是 utf8 并运行

```
SET NAMES UTF8MB4 
```

与 DB 连接后（[链接](http://kawaikunee.blogspot.ru/2014/07/mysql-4.html)、[链接](http://dev.mysql.com/doc/refman/5.5/en/charset-unicode-utf8mb4.html)、[链接](http://dev.mysql.com/doc/refman/5.5/en/charset-unicode-utf8mb4.html)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-15T11:48:51.020

没有正则表达式的字符串的简单规范化和翻译：

```
def normalize_unicode(s):
    return ''.join([ unichr(k) if k < 0x10000 else 0xfffd for k in [ord(c) for c in s]]) 
```

# python - 是否可以将带有无关元素的字典传递给 Django object.create 方法？

> ID：10798606
> 
> 赞同：6
> 
> 时间：2012-05-29T11:53:35.760
> 
> 标签：python, django, django-models, dictionary

我知道在 Django 中使用 MyModel.objects.create 时，可以传入一个字典，其中的键对应于 MyModel 中的模型字段。这在此处的另一个问题中进行了解释：[Can a dictionary be passed to django models on create?](https://stackoverflow.com/questions/1571570/can-a-dictionary-be-passed-to-django-models-on-create)

但是，我试图传入一个键比模型字段多的字典——换句话说，一些键没有用于创建对象。有可能以某种方式做到这一点吗？例如：

```
data_dict = {
    'key1': value1,
    'key2': value2,
    'key3': value3,
}

class MyModel(models.Model):
    key1 = models.SomeField()
    key2 = models.SomeField()

m = MyModel.objects.create(**data_dict) 
```

当我尝试这个时，我收到一条错误消息，告诉我“'key3' 是此函数的无效关键字参数”。我是否错误地传递了字典？是否有不同的方法将其传递给模型，这意味着模型不必使用所有参数？或者我是否只需像这样手动指定每个字段：

```
m = MyModel.objects.create(
    key1 = data_dict['key1'],
    key2 = data_dict['key2'],
) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-29T12:04:56.430

您可以过滤，然后以这种方式传递您的字典：

`MyModel.objects.create(**{key: value for key, value in data_dict.iteritems() if key in MyModel._meta.get_all_field_names()})`.

# ruby-on-rails - 您如何将纬度和经度（地理位置）保存到数据库以跟踪用户位置？

> ID：10798613
> 
> 赞同：0
> 
> 时间：2012-05-29T11:53:48.663
> 
> 标签：ruby-on-rails, database, html, geolocation

目前我正在使用此代码查找用户。

[http://html5demos.com/geo/](http://html5demos.com/geo/)

我想在整个用户会话中存储用户的地理位置，以便为他们提供该地区的相关信息。

这是一个使用 SQL DB 的 Rails 3 应用程序。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T13:15:02.350

您可以在会话中存储 lat、lng，希望您在会话中除了 user_id 之外没有存储太多

从您的主页，您可以使用 ajax 将 position.coords.latitude、position.coords.longitude 发送到您的 rails 应用程序。

像 /store_ge_location?lat=<position.coords.latitude>&lng=<position.coords.longitude> 这样的网址

rails 应用程序会将其存储在会话中

```
session[:lat] = params[:lat] 
```

对于后续请求，rails 应用程序将在会话中找到它，无需从浏览器中收集它

但是，如果您在地理位置方面没有任何其他用例，为什么不每次都从浏览器中读取用户位置？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T13:02:27.553

您可以简单地存储为字符串（“lat,lon”），因为您没有做太多事情。您只需将其显示在地图上即可。

如果您需要在边界框中搜索哪些用户，您需要将数据库更改为`MySQL`，`PostgreSQL`或使用`Solr`来完成这项工作。

# c++ - 使用 const 原始引用且仅原始的参数传递

> ID：10798624
> 
> 赞同：0
> 
> 时间：2012-05-29T11:54:30.913
> 
> 标签：c++, parameter-passing

这两种用法有什么区别吗？

**1.**

```
void Foo(const double &n)
{
   cout<< "Hello: " << n << endl;
} 
```

**2.**

```
void Foo(double n)
{
   cout<< "Hello: " << n <<endl;
} 
```

我正在寻找一个普遍的答案，而不仅仅是针对这种情况。（`1.`用法让我感到困惑。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T11:55:32.683

您不能修改第一个片段中的参数值，但可以在第二个片段中修改。

在函数之外，它们都保持不变，因为第二个是按值传递的。

```
void Foo(const double &n)
{
   n = 3; //ERROR
}

void Foo(double n)
{
   n = 3; //OK
} 
```

对于非基本类型，它在性能方面有所不同。如果通过引用 ( `1.`) 传递，则传递原始对象，而不是副本。如果按值传递，则会创建一个副本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T12:12:12.150

如果您使用引用并且引用引用的值发生更改，则该更改将通过引用可见。如果按值传递，则更改将不可见。例子：

```
#include <iostream>

using namespace std;

double x;

void Foo1(const double& n) {
    cout << n << endl;
    x = 23.0;
    cout << n << endl;
}

void Foo2(double n) {
    cout << n << endl;
    x = 23.0;
    cout << n << endl;
}

int main()
{
    x = 42.0;
    Foo1(x); // Will print 42.0, then 23.0

    x = 42.0;
    Foo2(x); // Will print 42.0 twice

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T12:41:51.277

这是另一个示例，它显示了 'const double&' 和 'double' 类型之间的区别。

```
#include <iostream>

void foo1(const double &n)
{
    const_cast<double&>(n) = 10.0;  // <-- this code changes variable referenced by n
}

void foo2(double n)
{
    const_cast<double&>(n) = 10.0;  // <-- this code changes variable n
}

int main()
{
    double x = 12.0;
    foo1(x);
    std::cout << x << std::endl;  // <-- this will print '10'

    x = 12.0;
    foo2(x);
    std::cout << x << std::endl;  // <-- this will print '12'

    return (0);
} 
```

在第一种情况下，您将引用（几乎与指针相同）发送到变量“x”。在第二种情况下，您发送变量“x”的副本。

# wordpress - WordPress 自己的规则之前的 htaccess 规则

> ID：10798630
> 
> 赞同：2
> 
> 时间：2012-05-29T11:54:50.400
> 
> 标签：wordpress, .htaccess

我正在尝试向 Wordpress 站点添加一些重写规则，以比 wp 自己的重写功能更进一步，但是当我将这些规则放在 wordpress 自己的规则之前时我遇到了麻烦：如果我的规则重写为 wordpress 将重写的内容后来，它不起作用。例如：

www.domain.com/hello -> www.domain.com/image.jpg ：这是可行的，因为 wordpress 不会干扰 www.domain.com/hello -> www.domain.com/category/1 ：不会工作，即使 www.domain.com/category/1 自己工作

我试图从我的重写规则中删除 L 标记，以允许进一步重写，但它似乎不起作用......也许 wordpress 确实用 htaccess 做事？

这听起来很熟悉吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T09:54:45.203

Wordpress 不会检查重写后的 url ( `/category/1`)，而是解析原始请求 url ( `/hello`)，因此它不知道如何处理`/hello`. 要解决此问题，请使用代理标志。所以`[L]`会变成`[L,P]`

# ant - Ant：如何使用 Ant 设置环境变量

> ID：10798632
> 
> 赞同：1
> 
> 时间：2012-05-29T11:54:55.003
> 
> 标签：ant

我在一个名为 release.com 的文件中有环境变量，如下所示，

```
echo "<<< OpenSplice HDE Release V5.5.1OSS For x86.linux2.6, Date 2012-05-23 >>>"
if [ "$SPLICE_ORB" = "" ]
then
    SPLICE_ORB=DDS_OpenFusion_1_6_1
    export SPLICE_ORB
fi
if [ "$SPLICE_JDK" = "" ]
then
    SPLICE_JDK=jdk
    export SPLICE_JDK
fi
OSPL_HOME="/usr/local/covidien/HDE/x86.linux2.6"
OSPL_TARGET=x86.linux2.6
PATH=$OSPL_HOME/bin:$PATH
LD_LIBRARY_PATH=$OSPL_HOME/lib:$LD_LIBRARY_PATH
CPATH=$OSPL_HOME/include:$OSPL_HOME/include/sys:$CPATH
OSPL_TMPL_PATH=$OSPL_HOME/etc/idlpp
OSPL_URI=file://$OSPL_HOME/etc/config/ospl.xml
. $OSPL_HOME/etc/java/defs.$SPLICE_JDK
CLASSPATH=$OSPL_HOME/jar/dcpssaj.jar:$CLASSPATH
CLASSPATH=$OSPL_HOME/jar/dcpscj.jar:$CLASSPATH
export CLASSPATH OSPL_HOME OSPL_TARGET PATH LD_LIBRARY_PATH CPATH OSPL_TMPL_PATH OSPL_URI
$@ 
```

我将在 Linux 中使用这个环境变量，

```
# source release.com 
```

使用**Ant 脚本**如何设置`release.com`为源？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T17:40:47.593

构建设置通常定义为Ant 构建中的[属性。](http://ant.apache.org/manual/Tasks/property.html)

如有必要，可以按如下方式访问环境设置：

```
 <property environment="env"/>
  <echo message="Number of Processors = ${env.NUMBER_OF_PROCESSORS}"/>
  <echo message="ANT_HOME is set to = ${env.ANT_HOME}"/> 
```

我会谨慎使用此功能，因为它会使您的构建设置更加复杂且可移植性较差（与 Linux 相比，Windows 管理环境设置的方式不同）。

最后，如果您尝试将构建的依赖项集中在外部文件中，不幸的是 ANT（跨平台和 Java）将不支持 shell 脚本。相反，您可以使用 Java 属性文件并将其导入到您的构建中，如下所示：

```
<property file="build.properties"/> 
```

Java 属性有一个简单易懂的格式：

```
src.dir=src
build.dir=build 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T06:46:54.257

为了补充 Mark 的答案，Ant XML 构建文件也可用于将您的依赖项集中在外部文件中。

**依赖项.xml**

```
<project name="deps" basedir=".">  
  <dirname property="deps.basedir" file="${ant.file.deps}"/>

  <property name="my.jar" location="${deps.basedir}/my-tasks.jar" />

  <taskdef name="my-ant-task" classpath="${my.jar}"
      classname="org.my.domain.ant.MyAmazingTask" />
</project> 
```

**构建.xml**

```
<project name="my-project" basedir=".">
  <import file="dependencies.xml" />

  <target name="give-my-task-a-spin">
    <my-ant-task />
  </target>
</project> 
```

如果您有大量自定义任务，最好将它们放在 antlib 中，这样可以通过为库中的所有任务共享相同的类加载器来减少内存使用。

```
<antlib>
  <taskdef name="my-task01"
      classname="org.my.domain.ant.MyCustomTask01" />

  <taskdef name="my-task02"
      classname="org.my.domain.ant.MyCustomTask02" />

  <taskdef name="my-task03"
      classname="org.my.domain.ant.MyCustomTask03" />

  ...

</antlib> 
```

# ios - RootViewController 不能使用“超级”，因为它是根类

> ID：10798637
> 
> 赞同：1
> 
> 时间：2012-05-29T11:55:05.283
> 
> 标签：ios, xcode, xcode4, xcode4.2, xcode3to4

在阅读使用基于导航的应用程序的教程时，我决定使用我的 3.2.6-Xcode 创建一个基于导航的应用程序，并使用 Xcode 4.2 打开它，以便按照该版本的教程进行操作。但是当我在 Xcode 4.2 中打开同一个项目（不更改或添加任何代码）时，4.2 Xcode 给了我 2 个错误说：

> RootViewController 不能使用“超级”，因为它是根类

现在，我的 Xcode 有 4 个类文件：RootViewController.h、RootViewController.m、SaveUpAppDelegate.h 和 SaveUpAppDelegate.m。错误在`RootViewController.m`：

```
- (void)dealloc {
    [super dealloc];
} 
```

和

```
- (void)didReceiveMemoryWarning {
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];

    // Relinquish ownership any cached data, images, etc that aren't in use.
} 
```

我已经通过互联网搜索并找到了这个讨论（http://stackoverflow.com/questions/10113669/xcode-4-3-2-gives-error-cannot-use-super-because-it-is-a-root -class），他们说原因可能是控制器是开发人员忘记了超类`@interface`。这不适合我的情况，因为我（或更好：Xcode 3.2.6）没有忘记`RootViewController.h`...

```
#import <UIKit/UIKit.h>

@interface RootViewController : UITableViewController {
}

@end 
```

现在，我将那些关键行注释掉了，它工作正常，但我敢肯定，我需要这些行，因为 m 文件中的大多数自动创建的行都是用 [super ....] 完成的。

如何解决问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T20:15:22.627

我的决议更简单。.m 文件中的#import "ClassHere.h" 有拼写错误。这解决了我遇到的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T12:26:04.433

干净的。这是“运行”下的一个选项。它会删除所有自动生成的构建文件。

# html - CGI 脚本在 thttpd 服务器上的行为神秘

> ID：10798639
> 
> 赞同：0
> 
> 时间：2012-05-29T11:55:11.430
> 
> 标签：html, c, linux, file, cgi

我只是无法弄清楚为什么 CGI 脚本的输出不稳定，尽管输入在所有运行中都是相同的。

我有这个 CGI 脚本 [in C]，它生成一个`html`页面，该页面有一个表，该表再现了文件系统（Ubuntu）的树/层次视图。它在 arm 平台上运行并且是迷你的（使用 lighthttpd 开发）。所以 o /p of script 是一个包含目录名和文件名的表。我的问题是它在运行时成功列出了该表中的文件系统（文件和文件夹列表），比如现在，并且在运行 10 分钟左右时它不显示包含文件和文件夹的表，保持输入相同（文件系统和文件仍然相同）[浏览器只显示错误消息`Error 324 (net::ERR_EMPTY_RESPONSE): The server closed the connection without sending any data.` 或空白页。]

可能是什么问题？我已经在服务器上运行了脚本并验证了输出是一个有效的 HTML 页面，其中文件和文件夹的路径有效并且它们都存在。但有时相同的脚本会成功显示表格，否则我上面提到的任何错误都会出现。我怀疑这可能与权限问题有关，但如果是这样，它是如何偶尔显示的？我已将我正在处理的所有文件和文件夹的权限更改为 full.But 仍然没有帮助！！:(

脚本如下...

```
#include <stdio.h>
#include <dirent.h>
#include <string.h>
int main()
{
  int dir_count = 0;
  int file_count = 0;
  int dir_index=0;
  int file_index=0;
  int inner_loop=0;
  int len=0;
  int i=0;
  DIR * dirp;
  DIR * dirp2;
  DIR * dirp3;
  char realbase[35]="/home";
  char final_report_path[30];
  char base[20];
  char source[20];
  char patient_id[15];
  char patient_name[15];
  int j=0;
  struct dirent * entry;
  char dir_name[500][20];
  char* file_name[500];
  dirp = opendir(realbase); 
  if(dirp)
  while ((entry = readdir(dirp)) != NULL) 
    {
             if (entry->d_type == DT_DIR) 
        { /* If the entry is a regular file */
                 if(entry->d_name[0]!='.' && entry->d_name[1]!='.')
            {
                 dir_count++;
                         strcpy(dir_name[dir_index++],entry->d_name);

            }
            }
    }
  closedir(dirp);
  printf("Content-type: text/html\n\n");
  printf("<html>\n");
  printf("<body>\n");
  printf("<h1>Blah Blah!!</h1>\n");
  printf("\n");
  printf("    \n");
  printf("Click on the links to view Reports\n");
  printf("    \n");
  printf("<table border=\"3\" bordercolor=\"#c86260\" bgcolor=\"#ffffcc\" width=\"50%\" cellspacing=\"5\" cellpadding=\"3\">\n");
  printf("<tr><td><b>Patient Name</b></td><td><b>Patient ID</b></td><td><b>Reports</b></td></tr>\n");
  for(i=0;i<dir_count;i++)
  {
   strncpy(source, "", sizeof(source));
   strncpy(base, "", sizeof(base));
   strncpy(patient_name, "", sizeof(patient_name));
   strncpy(patient_id, "", sizeof(patient_id));
   strcpy(source,dir_name[i]);
   if(source[0]!='.')
{
   strcpy(base,"/home");
                      for(len=0;len<sizeof(source);len++)
                    {
                        if(source[len]!='_')
                        patient_name[len]=source[len];
                        else
                        {
                                                len++;

                        break;
                        }
                    }
                 for(inner_loop=0;len<sizeof(source);len++,inner_loop++)
                    {
                        if(source[len]!='\0')
                        patient_id[inner_loop]=source[len];
                        else
                        {

                        break;
                        }
                    }
   printf("<tr><td valign=\"center\">%s</td>",patient_name);
   printf("<td valign=\"center\">%s</td>",patient_id);

   strcat(base,source);
   strcat(base,"/Reports/");

   dirp2 = opendir(base); 
   if(dirp2)
   while ((entry = readdir(dirp2)) != NULL) 
    {

             if (entry->d_type == DT_REG) 
        { /* If the entry is a regular file */
                 if(entry->d_name[0]!='.')
            {
                                 if(file_count==0)
                                 {
                                  printf("<td>");
                                 }
                                 if(file_count!=0)
                                 {
                                  printf("<br>");
                                 }
                 file_count++;
                         file_name[file_index++]=entry->d_name;

                 printf("<a href=\"/home/%s/Reports/%s\">",dir_name[i],file_name[file_index-1]);
                 printf("%s",file_name[file_index-1]);
                 printf("</a>");
            }
            }
    }
   if(file_count>0)
   printf("</td>");
   printf("</tr>\n");
   file_count=0;
   file_index=0;
   closedir(dirp2);
}
  }

  printf("</table>");

  printf("</body>\n");
  printf("</html>\n");
  return 0;
} 
```

# javascript - 在 jquery 中传递 eventtobejct

> ID：10798640
> 
> 赞同：1
> 
> 时间：2012-05-29T11:55:15.697
> 
> 标签：javascript, jquery

我想通过触发函数传递 eventObject，这意味着当我手动触发任何事件时说：

```
 $(".test").bind({ click : Testing });

 $('.test').trigger("click");

 function Testing(e)
 {
 } 
```

当通过mouseclick调用函数测试时，参数**e**包含了eventobject，所以当我们手动触发它时我想要同样的东西。我们可以在手动触发任何事件时传递eventobject，这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T11:56:34.480

正如[gdoron 指出的](https://stackoverflow.com/a/10798675/157247)(+1)，jQuery 将为您提供事件对象。但是如果你愿意，你可以显式地创建它，用 jQuery 无法为你填写的信息来填充它。您可以创建一个[`Event`对象](http://api.jquery.com/category/events/event-object/)并将其传递给[`trigger`](http://api.jquery.com/trigger/).

以下是使用默认事件对象和创建自己的事件对象的示例：[Live copy](http://jsbin.com/uheqen) | [来源](http://jsbin.com/uheqen/edit)

```
jQuery(function($) {

  $(".test").click(function(e) {
    display("Received click on target");
    display("typeof e = " + typeof e);
    if (e) {
      display("e.type = " + e.type);
      if (e.type === "click") {
        display("Coords: (" + e.pageX + "," + e.pageY + ")");
      }
    }
  });

  //Create a new jQuery.Event object without the "new" operator.
  var e = $.Event("click");

  // Fill in more info
  e.pageX = 42;
  e.pageY = 27;

  // Trigger an artificial click event
  display("Issuing a click via <code>$('.test').trigger('click')</code>");
  $('.test').trigger("click");

  // Trigger an artificial click event
  display("Issuing a click creating our own event object with more info on it.");
  $('.test').trigger(e);

  function display(msg) {
    $("<p>").html(msg).appendTo(document.body);
  }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T11:57:05.557

你不需要做任何事情，当**你**触发一个事件时，`Event`对象已经在那里了......

 **> **事件对象总是作为第一个参数传递给事件处理** 程序
> ......

[`trigger`文档](http://api.jquery.com/trigger/)

[**现场演示**](http://jsfiddle.net/medXr/)**

# c# - 具有不同消息类型的消息队列

> ID：10798647
> 
> 赞同：10
> 
> 时间：2012-05-29T11:55:36.687
> 
> 标签：c#, msmq

我正在调查 Microsoft Message Queues 以进行进程间跨网络消息传递。*但是当我收到一条消息时，我事先*并不知道我得到的是什么类型的对象，所以代码

```
queue.Formatter = new XmlMessageFormatter(new Type[] { typeof(Wibble) }); 
```

*在我收到消息之前*无法申请，因为我不知道它是否是 Wibble。那么如何接收不同类型的消息呢？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-29T12:18:02.100

您已经在使用构造函数重载来[`XmlMessageFormatter`](http://msdn.microsoft.com/en-us/library/6tb06chb.aspx)接受类型*数组*。因此，只需将您期望接收的*所有*类型添加到该数组中，而不仅仅是一种类型。

```
queue.Formatter = new XmlMessageFormatter(new Type[] {
    typeof(Wibble),
    typeof(Fleem),
    typeof(Boo)
}); 
```

* * *

来自[`TargetTypes`](http://msdn.microsoft.com/en-us/library/system.messaging.xmlmessageformatter.targettypes.aspx)：

> 消息正文中序列化的实例必须符合类型数组中表示的模式**之一。**当您使用 Receive 方法读取消息时，该方法会创建一个与标识的架构相对应的类型的对象，并将消息正文读入其中。

（重点补充）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T12:18:09.663

您可能会考虑不在 MSMQ 消息中存储您的对象，而是在可能的情况下放置对它的持久位置的引用。MSMQ 的消息队列空间有限，因此最好使用较小的消息。

如果你不能这样做，你可以使用任何你喜欢的序列化器直接将你的对象序列化为消息 BodyStream。然后也存储类型名称，最好在消息标签中。

与此非常相似的东西（在这里划掉，这台计算机上没有 IDE）将其放入，以及退出时的类似操作：

```
public void FormatObject(object toFormat, Message message)
{
    var serializer = new XmlSerializer(toFormat.GetType());
    var stream = new MemoryStream();
    serializer.Serialize(toFormat, stream);

    //don't dispose the stream
    message.BodyStream = stream;
    message.Label = toFormat.GetType().AssemblyQualifiedName;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-21T23:04:07.597

MSMQ 上存在大量错误信息，主要是因为 Microsoft 文档在如何正确设计消息发送接收方面非常稀疏。我有两本关于这个主题的 MSMQ 书籍，我仍在互联网上寻找合理的设计。

因此，这些参考资料都没有说队列要求只有一种消息类型。这将使 PeakMessage 和变体变得不必要甚至愚蠢。微软的文档含糊不清，但我在那里工作过，他们从不傻。

使用 CLSID 作为标识符的建议一直很烦人，这种做法令人讨厌地短视。尝试在 LABEL 中嵌入消息类型怎么样？？？然后使用 PeadMessage 运行队列，直到您找到一条专门针对您的特定队列的消息，并且具有可用于格式化消息属性以在第一次尝试时正确接收消息的消息类型？

我知道这会产生一个复杂的代码集，但你宁愿不这样做吗？或者您是否真的会尝试实施上述响应者的建议，他暗示如果您有一个由 200 个用户和 200 种消息类型组成的系统，他们应该创建 80,000 个队列来管理所有一对一的需求？有些人只是不考虑这些事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T12:19:11.640

正如[joocer](https://stackoverflow.com/users/1368730/joocer)在评论中指出的那样：对不同的消息类型使用不同的队列。

或者，您可以同意消息发送者的所有消息都是 XML（任何不解析为 XML 的内容都将被拒绝）。然后还要同意 XML 模式的一些基础知识：带有消息类型（和版本）的标头元素。

然后处理（您自己或通过序列化程序）到内部类型。

当然，在许多情况下——反序列化​​并没有真正的好处——只需根据需要读取 XML 的内容。

# c# - 列表框 html 帮助器将零个对象返回到 Post 函数

> ID：10798654
> 
> 赞同：1
> 
> 时间：2012-05-29T11:55:56.583
> 
> 标签：c#, html, model-view-controller, listbox, html-helper

我试图为我创建的模块获取一个列表框。选择器有效（可选实体的标题出现，但没有数据返回到控制器中的 Post 函数。

我不知道你需要什么才能帮助我，但这里至少是 html 代码。

HTML 代码：

```
 <div class="field required">
        @Html.LabelFor(model => model.Sessions)
        @Html.ListBox("Sessions", new SelectList(Model.Sessions, "Id", "Title", 1));
        @Html.ValidationMessageFor(model => model.Sessions)
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T08:08:23.090

用于`ViewBag`_`Controller`

```
ViewBag.Sessions = new SelectList(EntityName, "Id", "Name", entity.ID); 
```

`entity.ID`将是您要选择的值

```
@Html.DropDownList("Sessions", "Select Sessions") 
```

# php - 组中的成员总数

> ID：10798655
> 
> 赞同：-5
> 
> 时间：2012-05-29T11:55:56.800
> 
> 标签：php

我有一个这样的数组，我希望它的总和如下所述：

```
Array
(
    [0] => stdClass Object
        (
            [id] => 1
            [group] => 1
        )

    [1] => stdClass Object
        (
            [id] => 2
            [group] => 2
        )

    [2] => stdClass Object
        (
            [id] => 3
            [group] => 2
        )

    [3] => stdClass Object
        (
            [id] => 4
            [group] => 3
        )

    [4] => stdClass Object
        (
            [id] => 5
            [group] => 3
        )

    [5] => stdClass Object
        (
            [id] => 6
            [group] => 3
        )

) 
```

我希望结果显示如下：

> 第 1 组有 1 个成员。第 2 组有 2 个成员。第 3 组有 3 名成员。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T12:11:23.460

执行以下对您有帮助的代码。

```
$arr_ids    =   array(array('id'=>10,'group'=> '1'),
                      array('id'=>20,'group'=> '1'),
                      array('id'=>30,'group'=> '2'),
                      array('id'=>40,'group'=> '3'),
                      array('id'=>50,'group'=> '3'),
                      array('id'=>60,'group'=> '3'),
                      array('id'=>70,'group'=> '4'),
                );

foreach($arr_ids as $ids)
{
    $arr_groups[]   = $ids['group'];
}   
$count_arr  =   array_count_values($arr_groups);
print"<pre>"; 
print_r($arr_groups);
print_r($count_arr);

foreach($count_arr as $group=>$count)
{
    echo "Group ".$group." = ".$count."<br>";
}
print"</pre>"; 
```

# html - 调整输入类型搜索的边框半径不适用于移动 safari

> ID：10798658
> 
> 赞同：3
> 
> 时间：2012-05-29T11:56:06.103
> 
> 标签：html, css, mobile-safari

这是我的html：

```
 <form action="/" method="get" class="searchForm">
        <input type="search" placeholder="Search...">
        <input type="submit" value="">
    </form> 
```

和我的CSS：

```
 input[type="search"]{
        height: 31px;
        width: 254px;
        border: 1px solid #ccc;
        border-right: none;
        padding: 0 5px;
        float: left;
        border-radius: 5px 0 0 5px;
    } 
```

它在所有浏览器中都可以正常工作，除了移动 safari，它为每个角落提供相等的半径。如果我将输入类型更改为 text 它可以工作，但对于搜索和提交它不会。

我试过添加：

```
 input {
        -webkit-appearance: none;
        border-radius: 0 !important;
    } 
```

有任何想法吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T09:48:00.817

你可以试试

1.  使用 -webkit 前缀作为边框半径。
2.  使用边界半径的长手版本（参见：- [http://blog.lesjames.com/post/8510513712/mobile-safari-and-border-radius](http://blog.lesjames.com/post/8510513712/mobile-safari-and-border-radius)）

如果这不起作用，请尝试提供更多详细信息，例如 ios 版本、ipad/iphone。我在 iphone 上使用 ios 5.1 和 4.3 进行了测试，如果使用 -webkit-appearance:none，对我来说非常适合；

# php - 在 PHP 中上传文件时遇到问题

> ID：10798659
> 
> 赞同：0
> 
> 时间：2012-05-29T11:56:08.717
> 
> 标签：php

我使用 PHP 作为服务器端编程，上传图片时遇到了不同类型的问题。如果上传的图片低于 8MB，则上传正常，但如果图片大小增加，则无法上传。可能是什么问题。我知道我必须更改 php.ini 文件，但我不知道。请帮助我

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T11:58:24.547

是的，您需要`upload_max_filesize`在 php.ini 文件中将一个值更改为您想要的值。之后您必须重新启动服务器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T12:05:37.757

您需要首先确定您的 PHP.ini 来自何处。如果您创建一个包含这一行代码的 PHP 脚本并在浏览器中访问它，它将告诉您：

```
phpinfo(); 
```

（我的说：加载的配置文件 /etc/php5/apache2/php.ini ）

然后编辑该文件并更改行

```
post_max_size = 8M
upload_max_filesize = 8M 
```

到更合适的东西。然后重新启动 Apache。您也许可以在 vlzvl 的答案中使用 .htaccess 方法，但我会说可能不会。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T12:00:22.883

打开你的 .htaccess 并写下：

```
php_value upload_max_filesize 16M
php_value post_max_size 16M 
```

# mysql - 使用 SQL 检查房间的可用性

> ID：10798664
> 
> 赞同：1
> 
> 时间：2012-05-29T11:56:28.857
> 
> 标签：mysql, sql

我想检查某个房间是否在开始日期和结束日期之间可用。我正在使用网络服务功能来做到这一点。此函数返回一个包含给定房间的所有预订的列表。如果此列表为空，则房间可用，否则不可用。要知道我有这个查询。但它总是回馈我所有的保留。

```
SELECT * FROM ARTICLES_RESERVERING res
INNER JOIN ARTICLES_ZAAL roo ON res.ZAALID = roo.ID 
WHERE roo.ID = @ZAALID
AND res.DATUM_BEGIN >= @DATUM_EINDE OR res.DATUM_EINDE <= @DATUM_BEGIN 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T11:59:29.483

`AND`的优先级高于`OR`。

将最后一行更改为：

```
AND (res.DATUM_BEGIN >= @DATUM_EINDE OR res.DATUM_EINDE <= @DATUM_BEGIN) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T12:01:46.750

```
 SELECT * FROM ARTICLES_RESERVERING res
  INNER JOIN ARTICLES_ZAAL roo ON res.ZAALID = roo.ID 
  WHERE roo.ID = @ZAALID
  AND  @DATUM_EINDE between res.DATUM_BEGIN and res.DATUM_EINDE 
```

我宁愿使用这个查询，因为使用*OR*通常很昂贵。

# python - 使用 lxml.etree 在命名空间的 xml 元素中查找文本

> ID：10798680
> 
> 赞同：2
> 
> 时间：2012-05-29T11:57:23.717
> 
> 标签：python, xpath, lxml, xml-namespaces, elementtree

我尝试使用 lxml.etree 来解析 XML 文件并将文本查找到 XML 的元素中。

XML 文件可以是这样的：

```
<?xml version="1.0" encoding="UTF-8"?>
<OAI-PMH xmlns="http://www.openarchives.org/OAI/2.0/" 
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://www.openarchives.org/OAI/2.0/
     http://www.openarchives.org/OAI/2.0/OAI-PMH.xsd">
 <responseDate>2002-06-01T19:20:30Z</responseDate> 
 <request verb="ListRecords" from="1998-01-15"
      set="physics:hep"
      metadataPrefix="oai_rfc1807">
      http://an.oa.org/OAI-script</request>
 <ListRecords>
  <record>
    <header>
      <identifier>oai:arXiv.org:hep-th/9901001</identifier>
      <datestamp>1999-12-25</datestamp>
      <setSpec>physics:hep</setSpec>
      <setSpec>math</setSpec>
    </header>
    <metadata>
     <rfc1807 xmlns=
    "http://info.internet.isi.edu:80/in-notes/rfc/files/rfc1807.txt" 
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
      xsi:schemaLocation=
       "http://info.internet.isi.edu:80/in-notes/rfc/files/rfc1807.txt
    http://www.openarchives.org/OAI/1.1/rfc1807.xsd">
    <bib-version>v2</bib-version>
    <id>hep-th/9901001</id>
    <entry>January 1, 1999</entry>
    <title>Investigations of Radioactivity</title>
    <author>Ernest Rutherford</author>
    <date>March 30, 1999</date>
     </rfc1807>
    </metadata>
    <about>
      <oai_dc:dc 
      xmlns:oai_dc="http://www.openarchives.org/OAI/2.0/oai_dc/" 
      xmlns:dc="http://purl.org/dc/elements/1.1/" 
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
      xsi:schemaLocation="http://www.openarchives.org/OAI/2.0/oai_dc/ 
      http://www.openarchives.org/OAI/2.0/oai_dc.xsd">
    <dc:publisher>Los Alamos arXiv</dc:publisher>
    <dc:rights>Metadata may be used without restrictions as long as 
       the oai identifier remains attached to it.</dc:rights>
      </oai_dc:dc>
    </about>
  </record>
  <record>
    <header status="deleted">
      <identifier>oai:arXiv.org:hep-th/9901007</identifier>
      <datestamp>1999-12-21</datestamp>
    </header>
  </record>
 </ListRecords>
</OAI-PMH> 
```

对于以下部分，我们假设`doc = etree.parse("/tmp/test.xml")`text.xml 包含上面粘贴的 xml。

首先，我尝试查找所有`<record>`使用的元素，`doc.findall(".//record")`但它返回一个空列表。

其次，对于给定的单词，我想检查它是否在`<dc:publisher>`. 为了实现这一点，我首先尝试做和之前一样的事情：`doc.findall(".//publisher")`但我有同样的问题......我很确定所有这些都与命名空间相关联，但我不知道如何处理它们。

我已经阅读了 libxml[教程](http://lxml.de/tutorial.html)，并尝试`findall`了基本 xml 文件（没有任何命名空间）上的方法示例，并且成功了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T13:21:38.663

正如 Chris 已经提到的，您还可以使用 lxml 和 xpath。由于 xpath 不允许您完整地编写命名空间名称`{http://www.openarchives.org/OAI/2.0/}record`（所谓的“James Clark 表示法”*），因此您必须使用前缀，并为 xpath 引擎提供前缀到命名空间 uri 的映射。

lxml 示例（假设您已经拥有所需的`tree`对象）：

```
nsmap = {'oa':'http://www.openarchives.org/OAI/2.0/', 
         'dc':'http://purl.org/dc/elements/1.1/'}
tree.xpath('//oa:record[descendant::dc:publisher[contains(., "Alamos")]]',
            namespaces=nsmap) 
```

这将选择所有具有包含单词“Alamos”`{http://www.openarchives.org/OAI/2.0/}record`的后代元素的元素。`{http://purl.org/dc/elements/1.1/}dc`

[*] 这是来自James Clark 解释 XML 命名空间的[一篇文章](http://www.jclark.com/xml/xmlns.htm)，不熟悉命名空间的每个人都应该阅读这篇文章！（虽然是很久以前写的）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-29T12:54:29.107

*免责声明*：我使用的是标准库 xml.etree.ElementTree 模块，而不是 lxml 库（尽管据我所知这是 lxml 的一个子集）。我确信有一个比我使用 lxml 和 XPATH 的答案要简单得多，但我不知道。

## 命名空间问题

您说得对，问题可能出在名称空间上。XML 文件中没有`record`元素，但文件中有两个`{http://www.openarchives.org/OAI/2.0/}record`标签。如下所示：

```
>>> import xml.etree.ElementTree as etree

>>> xml_string = ...Your XML to parse...
>>> e = etree.fromstring(xml_string)

# Let's see what the root element is
>>> e
<Element {http://www.openarchives.org/OAI/2.0/}OAI-PMH at 7f39ebf54f80>

# Let's see what children there are of the root element
>>> for child in e:
...     print child
...
<Element {http://www.openarchives.org/OAI/2.0/}responseDate at 7f39ebf54fc8>
<Element {http://www.openarchives.org/OAI/2.0/}request at 7f39ebf58050>
<Element {http://www.openarchives.org/OAI/2.0/}ListRecords at 7f39ebf58098>

# Finally, let's get the children of the `ListRecords` element
>>> for child in e[-1]:
...     print child
... 
<Element {http://www.openarchives.org/OAI/2.0/}record at 7f39ebf580e0>
<Element {http://www.openarchives.org/OAI/2.0/}record at 7f39ebf58908> 
```

所以，例如

```
>>> e.find('ListRecords') 
```

返回`None`，而

```
>>> e.find('{http://www.openarchives.org/OAI/2.0/}ListRecords'
<Element {http://www.openarchives.org/OAI/2.0/}ListRecords at 7f39ebf58098> 
```

返回`ListRecords`元素。

请注意，我正在使用该`find`方法，因为标准库 ElementTree 没有`xpath`方法。

## 可能的解决方案

解决此问题并获取名称空间前缀并将其添加到您要查找的标记的一种方法。您可以使用

```
>>>> e.tag[:e.tag.index('}')+1]
'{http://www.openarchives.org/OAI/2.0/}' 
```

在根元素 ,`e`上找到命名空间，尽管我确信有更好的方法来做到这一点。

现在我们可以定义函数来提取我们想要的标签我们一个可选的命名空间前缀：

```
def findallNS(element, tag, namespace=None):

    if namspace is not None:
        return element.findall(namepsace+tag)
    else:
        return element.findall(tag)

def findNS(element, tag, namespace=None):

    if namspace is not None:
        return element.find(namepsace+tag)
    else:
        return element.find(tag) 
```

所以现在我们可以写：

```
>>> list_records = findNS(e, 'ListRecords', namespace)
>>> findallNS(list_records, 'record', namespace)
[<Element {http://www.openarchives.org/OAI/2.0/}record at 7f39ebf580e0>, 
<Element {http://www.openarchives.org/OAI/2.0/}record at 7f39ebf58908>] 
```

## 替代解决方案

另一种解决方案可能是编写一个函数来搜索所有以您感兴趣的标签结尾的标签，例如：

```
def find_child_tags(element, tag):
    return [child for child in element if child.tag.endswith(tag)] 
```

在这里，您根本不需要处理名称空间。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-29T13:20:21.050

@Chris 的回答非常好，它也可以使用`lxml`。这是另一种使用`lxml`方式（与`xpath`代替的方式相同`find`）：

```
In [37]: xml.find('.//n:record', namespaces={'n': 'http://www.openarchives.org/OAI/2.0/'})
Out[37]: <Element {http://www.openarchives.org/OAI/2.0/}record at 0x2a451e0> 
```

# vim - 如何创建可以包含在任何地方的语法规则？

> ID：10798685
> 
> 赞同：0
> 
> 时间：2012-05-29T11:57:30.903
> 
> 标签：vim, syntax-highlighting

我的 .vimrc 中的以下代码段以灰色阴影突出显示了行尾多余的空白：

```
autocmd Syntax * syntax match MySpace /\s\+$/
autocmd ColorScheme * highlight MySpace ctermbg=238 
```

但是当这个空格已经被一个语法组匹配时，这不起作用。例如，不标记各种类型注释中的尾随空格。

该手册讨论了`contains=ALL`语法组的选项，但似乎没有类似`containedin=ALL`的 . 我可以以任何方式模仿它吗？我能想到的唯一方法是在`containedin=`选项中列出所有相关的语法组`MySpace`，这显然很乏味而且一点也不优雅。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T12:13:41.633

不知道如何使用`Syntax`，但您可以使用[listchars](http://vim.wikia.com/wiki/Highlight_unwanted_spaces#Using_the_list_and_listchars_options)选项突出显示尾随空格。

从我的`.vimrc`：

```
" List chars
set listchars=""           " Reset the listchars
set listchars+=tab:\|\     " show tabs as "|"
set listchars+=nbsp:·      " show non-breaking spaces as "·"
set listchars+=trail:·     " show trailing spaces as "·"
set listchars+=precedes:«
set listchars+=extends:» 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T15:17:11.443

您应该使用`:match`命令（或`matchadd()`），如有关此特定主题的[Vim Tips Wiki 文章中所述。](http://vim.wikia.com/wiki/Highlight_unwanted_spaces)

如果你喜欢一个现成的解决方案，你也可以试试[我的 ShowTrailingWhitespace 插件](http://www.vim.org/scripts/script.php?script_id=3966)，或者插件页面上列出的替代方案之一。

# c - Why is printf not equivalent to scanf?

> ID：10798688
> 
> 赞同：3
> 
> 时间：2012-05-29T11:57:39.097
> 
> 标签：c

I have a program which displays "hi", but I do not understand why.

I understand both scanf and printf return the number of characters they read/write but how does it work in this case?

```
void main()
{
    if(printf==scanf)
        printf("hello");
    else
        printf("hi");
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-29T12:00:20.830

You aren't **calling** the functions and comparing the results, you are **comparing the functions themselves**, which boils down to comparing the addresses of the functions (function names will convert to function pointers in many contexts, this is one). What you wrote is equal to this:

```
/* this is the correct signature for main by the way, not `void main()` */
int main(int argc, char **argv) {
    /* compare the address of printf to that of scanf */
    if (&printf == &scanf) {
        printf("hello");
    } else {
        printf("hi");
    }
} 
```

Since `scanf` and `printf` are not the same function they live at a different address so the comparison fails and `hi` is printed.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T11:59:47.807

Here you compare the adreses of the functions and as the functions are not the same, the equality does not hold. I do not see what confuses you.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-29T12:03:38.880

You are not calling `printf` or `scanf` in the if statement. Rather, you are comparing the location of `scanf` and `printf` function in the memory, which are different (otherwise, they will run the same code, and have the same functionality).

You only get back the return value if you invoke the function. An invocation will look like `<function_name> ( <arguments separated by commas> )`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-29T12:16:57.947

As others have already mentioned you are comparing the address of two functions (printf and scanf in this case) and since these functions cannot have the same address, the comparison fails making the program print "hi".

You can try the below code to understand it better

```
int main(void)
{

   printf("printf = %x\n", printf);
   printf("scanf = %x\n", scanf);

   return 0;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-29T11:59:48.103

Because the address of the function `printf` is not the same as the function `scanf`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-05-05T20:58:09.520

Just to add another angle on this matter. Others have already pointed out how you can compare the addresses to the functions. But this code make (well, it's a far stretch) sense:

```
int main()
{
    if(printf("")==scanf(""))
        printf("hello");
    else
        printf("hi");
} 
```

This code is guaranteed to print "hello". Why? Well, lets first look at return values. `printf` will return the number of characters printed, which is zero for an empty string. `scanf` will return the number of successful assignments (not the number of characters read), which for an empty string is also zero. Well, if some error occurs, it can also return EOF, which I find highly unlikely even if I cannot guarantee that it will not happen. Well, `printf` can fail too, and will in that case return an unspecified negative number.

So, it will print "hello", unless both `printf` and `scanf` both encounters a problem, AND that printf returns EOF, in which it will print "hi" instead.

However, it could be the case that this is UB. I'm not sure if the order of evaluation is well defined, or even if that matters.

# asp.net-mvc-3 - 如何将“类库项目”改为“测试项目”？

> ID：10798689
> 
> 赞同：5
> 
> 时间：2012-05-29T11:57:41.733
> 
> 标签：asp.net-mvc-3, unit-testing

在处理 ASP.NET MVC3 应用程序时，我错误地添加了一个**类库作为单元测试项目**。但不幸的是，我没有从上下文菜单中看到“运行测试”来测试为单元测试创​​建的方法。

有没有办法将“类库项目”转换为“测试项目”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T12:25:21.623

项目文件中有一个属性类型 guid。看这篇文章：[Visual Studio /mstest 如何识别测试项目？](https://stackoverflow.com/questions/7009943/how-does-visual-studio-mstest-identify-test-projects)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-09-06T22:16:06.153

对我有用的是将此`<PropertyGroup>`标签添加`libraries`到我的项目（`.csproj`或`.vbproj`）文件中：

```
<Project Sdk="Microsoft.NET.Sdk">

  <PropertyGroup>
    <TargetFramework>net5.0</TargetFramework>

    <IsPackable>false</IsPackable>
  </PropertyGroup>

  <ItemGroup>
    <PackageReference Include="Microsoft.NET.Test.Sdk" Version="16.7.1" />
    <PackageReference Include="MSTest.TestAdapter" Version="2.1.1" />
    <PackageReference Include="MSTest.TestFramework" Version="2.2.7" />
    <PackageReference Include="coverlet.collector" Version="1.3.0" />
  </ItemGroup>

<!--Here goes any other configuration-->

</Project> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-08-02T08:28:32.720

`Microsoft.NET.Test.Sdk`从 nuget添加

# javascript - 如何将信息页面显示到新的“层”中？

> ID：10798691
> 
> 赞同：0
> 
> 时间：2012-05-29T11:57:41.860
> 
> 标签：javascript, jquery

我的网站上有一个联系链接，我不想添加简单的超链接，因为我的联系信息大约是 5-6 行文本。

单击后，我希望它出现在我单击链接的页面上，但在窗口（无弹出窗口）之类的地方 - 只是在带有关闭按钮的更高层上。我已经用 Jquery.animate 做到了，facebook like 按钮来自屏幕后面——但现在我想要一些不同的东西：]。

怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T12:17:27.247

这是 HTML：

```
<a id="mci">My Contact Info</a>

<div id="info_box">
      <h1>This is contact info box</h1>
      <a id="info_box_close">Close</a>    
</div> 
```

这是CSS：

```
#info_box { 
display:none;
 position:fixed;  
 height:300px;  
 width:300px;  
 background:#EEEEEE;  
 left: 50px;
 top: 50px;
 z-index:100;
 margin-left: 15px; }

#info_box_close {
 font-size:20px;  
 right:5px;  
 top:5px;  
 position:absolute;  
 color:red;  
 font-weight:bold;      
} 
```

最后，Jquery：

```
 <script type="text/javascript">

 $(document).ready( function() {

     $('#mci').click( function() {  
            $('#info_box').fadeIn("slow");
     });

     $('#info_box_close').click( function() {            
           $('#info_box').fadeOut("slow");
     });

 });
 </script> 
```

工作示例：http: [//jsfiddle.net/wJzTh/](http://jsfiddle.net/wJzTh/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T12:04:44.493

不同的？

尝试这个：

```
<button onclick="alert('Address: blah blah Phone: 00blah')">Contact Info</button> 
```

开个玩笑:)，您可能会检查 jquery ui 对话框：

[http://jqueryui.com/demos/dialog/](http://jqueryui.com/demos/dialog/)

对于“不同”的东西

# android - 从 Rails 应用程序向 iOS、Android、BlackBerry 发送通知

> ID：10798692
> 
> 赞同：0
> 
> 时间：2012-05-29T11:57:42.023
> 
> 标签：android, ruby-on-rails, ios, blackberry, push-notification

我有一个 Rails 应用程序，我想在他们的手机上向用户发送通知。我只需要简单的文本通知，但我负担不起为任何操作系统编写应用程序。

有什么简单的方法可以做到这一点吗？（宝石，第三方服务）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T16:02:37.980

Boxcar 可能是您正在寻找的东西？[http://boxcar.io/help/api/providers](http://boxcar.io/help/api/providers)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T15:57:20.643

[Web Notifications](http://www.w3.org/TR/notifications/)可能是未来的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T14:55:09.750

我创建了一个 gem 来创建一个中央推送通知，它目前支持 iOS 和 Android，但我会添加更多平台。

也许这会对您有所帮助，它是目前使 iOS 成为 Android 的单一宝石，而且它相当容易实现

这是链接：[https ://github.com/NicosKaralis/pushmeup](https://github.com/NicosKaralis/pushmeup)

# android - 为每个通知添加不同的意图

> ID：10798694
> 
> 赞同：0
> 
> 时间：2012-05-29T11:57:48.983
> 
> 标签：android

目前我正在开发 android 应用程序，当我在某家商店附近时，女巫会显示通知（广告、折扣等）。问题是周围可能有很多商店，因此会有很多通知，所以如果我的通知是这样生成的，我该如何为我的通知设置不同的意图：`

```
private void notifymes(String adress, String prece,int poz) {
        // TODO Auto-generated method stub
        Context context = this.getApplicationContext();
            notificationManager = (NotificationManager) context
                .getSystemService(NOTIFICATION_SERVICE);

            Intent notificationIntent = new Intent(this, showadvert.class);
            notificationIntent.putExtra("lat", rdat.get(poz).lata);
            notificationIntent.putExtra("longa", rdat.get(poz).longa);
            notificationIntent.putExtra("adr", rdat.get(poz).adrese);
            notificationIntent.putExtra("prece", rdat.get(poz).prece);

            contentIntent = PendingIntent.getActivity(this, 0, notificationIntent, 0);

            notification = new Notification();
            notification.setLatestEventInfo(context, prece, adress, contentIntent);
            notification.icon = android.R.drawable.stat_notify_sync;
            notification.tickerText = "Good deal avalible";
            notification.when = System.currentTimeMillis();
            notificationManager.notify(poz, notification);

    } 
```

如果你能帮助我，我会很高兴。

**编辑：（**数据在 sql 数据库中）`因为你不理解我，我会举个例子。所以这个例子是.....我有3个或更多的通知是由一些循环和这段代码生成的。每个通知都必须将不同的数据传递给另一个活动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T13:01:10.140

好的，经过 47 分钟的研究，我发现我必须更换这个`contentIntent = PendingIntent.getActivity(this, 0, notificationIntent, 0);`

有了这个

```
contentIntent = PendingIntent.getActivity(this, myid, notificationIntent, 0); 
```

我的 id 是整数，并且会递增。

# android - Android UI 小部件垂直对齐问题

> ID：10798698
> 
> 赞同：4
> 
> 时间：2012-05-29T11:58:08.680
> 
> 标签：android, user-interface, widget, alignment

我正在尝试创建一个布局（使用 eclipse），我需要在其中垂直对齐各种控件，如 TextView 和 Button。我试图保持所有小部件完全左对齐。即使我为控件指定了相同的左边距/填充，在不同类型的控件之间仍然可以看到 1-2 个像素的差异。

问题是小部件的边框（日食中的蓝色矩形）和小部件的内容/图形之间的距离因小部件（例如 TextView 和 Button）而异。

我可以通过为 TextView 指定左填充或通过减少按钮容器的左边距来应用变通方法。但我正在寻找更清洁的解决方案。我找不到任何控制小部件边框和内容之间差异的属性。关于如何控制这个差距的任何指示？

演示问题的快照如下。这是我用于解决此问题的布局 XML：-

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Hello World" />

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Dummy Button" />

</LinearLayout> 
```

下图显示了虚拟应用程序的快照。请注意“Hello World”TextView 和“Dummy Button”的左侧边距之间的区别。

第二张图片显示了在 Eclipse 中选择时的按钮小部件。蓝色矩形表示小部件边界/边框。按钮的边框（蓝色矩形）和内容（灰色矩形）之间的区别是否可以通过某些属性来控制？

![虚拟应用程序快照](../Images/487dd69dd781ed0b593b13364e7b3b64.png) ![带边界的按钮](../Images/e5934db7243d2aaf938b474ac462687e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T12:17:39.883

这是一个难点，TextView 和其他 Android 小部件**可能有**自己的一些内在风格（也取决于 Android 版本）。

因此，要解决这个问题，您必须创建自己的风格。

在创建自己的样式时，请始终参考有关此主题的 android 源代码：

[https://github.com/android/platform_frameworks_base/tree/master/core/res/res/values](https://github.com/android/platform_frameworks_base/tree/master/core/res/res/values)

[https://github.com/android/platform_frameworks_base/blob/master/core/res/res/values/themes.xml](https://github.com/android/platform_frameworks_base/blob/master/core/res/res/values/themes.xml)

[https://github.com/android/platform_frameworks_base/blob/master/core/res/res/values/styles.xml](https://github.com/android/platform_frameworks_base/blob/master/core/res/res/values/styles.xml)

有多种方法可以创建自己的风格。

一种方法是在清单中为您的活动设置主题。首先，您需要一个位于 /values/ 文件夹中的 styles.xml 文件。在这里，您将声明您的新样式：

```
<style name="Theme.MyTheme.Dark" parent="@android:style/Theme.NoTitleBar">
    <item name="android:textViewStyle">@style/Widget.TextView.Black</item>
</style>

<style name="Theme.MyTheme.Light" parent="@android:style/Theme.NoTitleBar">
    <item name="android:textViewStyle">@style/Widget.TextView.White</item>
</style> 
```

它上面的样式继承自隐藏标题栏的Android样式，您可以从其他东西继承。在这个主题中，我们然后覆盖 textViewStyle，这允许我们为我们`TextView`的 's 设置自定义值并覆盖一些内在值。

```
<style name="Widget.TextView.White" parent="@android:style/Widget.TextView">
    <item name="android:textColor">#FFFFFF</item>
</style>

<style name="Widget.TextView.Black" parent="@android:style/Widget.TextView">
    <item name="android:textColor">#000000</item>
</style> 
```

最后，您在 AndroidManifest.xml 中为您的活动设置主题：

```
 <activity
        android:name=".ui.phone.FirstActivity"
        android:theme="@style/Theme.MyTheme.Dark" />

     <activity
        android:name=".ui.phone.SecondActivity"
        android:theme="@style/Theme.MyTheme.Light" /> 
```

现在，当您在 FirstActivity 中使用 TextView 时，默认情况下它的文本是黑色的，而在第二个活动中它将是白色的。

**对于您的具体问题：**

您必须查看我在顶部链接的源代码文件，看看是否有任何填充或 minWidth 或 size 属性影响您的小部件和布局。

# c# - 如何使用正则表达式从字符串中获取值

> ID：10798699
> 
> 赞同：5
> 
> 时间：2012-05-29T11:58:10.423
> 
> 标签：c#, regex

我有这个字符串文本：

```
 <meta http-equiv="Content-Type" content="text/html;" charset="utf-8">
    <style type="text/css">
        body {
            font-family: Helvetica, arial, sans-serif;
            font-size: 16px;
        }
        h2 {
            color: #e2703b;
        }.newsimage{
            margin-bottom:10px;
        }.date{
            text-align:right;font-size:35px;
        }
    </style> 
```

*为了清楚起见，添加了换行符和标识，真正的字符串没有它*

如何获得`h2`颜色的价值？在这种情况下应该是 -`#e2703b;`我不知道在这种情况下如何使用正则表达式。

**更新** 如果我尝试这种方式：

```
Match match = Regex.Match(cssSettings, @"h2 {color: (#[\d|[a-f]]{6};)");
                    if (match.Success)
                    {
                        string key = match.Groups[1].Value;
                    } 
```

它根本不起作用

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-29T12:08:50.107

我不确定正则表达式是否可行，但您可以使用此正则表达式提取值：

```
h2 \\{color: (#(\\d|[a-f]){6};)} 
```

从中获取第一个组将为您获取属于 h2 的颜色的值。

**编辑**

这段代码应该得到它：

```
String regex = "h2 \\{color: (#(\\d|[a-f]){6};)}";
String input = "<meta http-equiv=\"Content-Type\" content=\"text/html;\" charset=\"utf-8\"><style type=\"text/css\">body {font-family: Helvetica, arial, sans-serif;font-size: 16px;}h2 {color: #e2703b;}.newsimage{margin-bottom:10px;}.date{text-align:right;font-size:35px;}</style>";
MatchCollection coll = Regex.Matches(input, regex);
String result = coll[0].Groups[1].Value; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T12:36:06.183

正如您所说，字符串中**没有制表符[\s] 和换行符[\n]**。因此，正则表达式将是：

```
(?<=[.]*h2{color:)[#\w]*(?=[.]*) 
```

因此代码变为，

```
Match match = Regex.Match(cssSettings, @"(?<=[.]*h2{color:)[#\w]*(?=[.]*)");
                if (match.Success)
                {
                    string key = match.Value;
                } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T12:47:19.620

这应该是相当健壮的。可选空格、换行符和其他东西。还找到半角颜色代码，如果没有，则不跳转到下一个`h2`块`color`。

```
h2\s*\{[^}]*color\s*:\s*?(#[a-f\d]{3}|#[a-f\d]{6})\b 
```

结果是第一个也是唯一一个捕获的组。

[试试看！](http://regexr.com?313jb)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T12:37:57.350

尝试这个：

```
@"h2\s*{\s*color: (#.{6};)" 
```

# http - Apache Camel：为什么在收到 200 OK 后 TCP 连接没有关闭

> ID：10798700
> 
> 赞同：7
> 
> 时间：2012-05-29T11:58:13.167
> 
> 标签：http, apache-camel

我们使用 Apache Camel 作为编排引擎。通常，以下场景：

客户端发送 HTTP 请求 <-> CAMEL 代码 <-> 外部服务器

当我们的客户端向我们的 CAMEL 代码发送 HTTP 请求时，球开始滚动。Camel 代码将通过 REST HTTP 调用触发外部服务器。最终，Camel 代码会将回复发送回客户端。

在将响应发送回客户端之前的最后一个操作，Camel 代码向外部服务器发送 HTTP GET。因此，首先建立 TCP 连接，然后发送数据。一段时间后（这可能需要 5 到 10 秒），外部服务器回复 200 OK。

问题：Camel在收到200 OK后没有向外部服务器发送TCP FIN。结果，TCP 连接保持打开状态……（外部服务器在 200 秒超时后自行关闭 TCP 连接，但这意味着 TCP 资源在 200 秒内丢失）。

因此，在 TCP 级别，它是这样的：

Camel <----------> 外部服务器

```
 TCP SYN  -->
   <-- TCP SYN,ACK
   TCP ACK  -->

   HTTP GET -->
   <-- 200 OK
   TCP ACK  -->

   <200 seconds later>
   <-- TCP FIN,ACK
   TCP ACK  --> 
```

知道如何让 Camel 在收到 200 OK 后关闭 TCP 连接吗？

注意：我尝试添加“连接：关闭”标题，但骆驼没有添加标题？！它似乎忽略了它......

这是添加标题的代码：

```
exchange.getOut().setHeader("Connection","Close"); 
```

我在带有 Eclipse IDE 的 Spring 框架中使用 Camel 2.9.1。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T13:02:10.183

不幸的是，除了创建一个不过滤掉 Connection 标头的自定义 HttpHeaderFilterStrategy 类之外，我没有看到其他解决方案。然后在将我的请求发送到外部服务器之前，我设置了标题“连接：关闭”。一旦这个请求得到回复，Camel 代码就会发送一个 TCP FIN、ACK 以关闭 TCP 连接。

更多细节：

1）创建一个自定义的HttpHeaderFilterStrategy类，例如：CustomHttpHeaderFilterStrategy

2）调整 applicationContext.xml 使其指向该类，例如：

```
<bean id="http" class="org.apache.camel.component.http.HttpComponent">
    <property name="camelContext" ref="camel"/>
    <property name="headerFilterStrategy" ref="myHeaderFilterStrategy"/>
</bean>

<bean id="myHeaderFilterStrategy" class="com.alu.iptc.com.CustomHttpHeaderFilterStrategy">
</bean> 
```

3）调整您的代码，以便设置 Connection: close 标头，例如：

```
exchange.getOut().setHeader("Connection","close"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T06:37:52.567

HTTP1.1 连接被认为在第一条消息之后保持活动一段时间，以允许出于性能原因在一个 TCP 会话中传递多个文件。通常，http 服务器可能会在几秒钟后切断连接以节省线程，同时允许下载多个文件。Camel http 组件的行为方式可能相同。 [http://en.wikipedia.org/wiki/HTTP_persistent_connection](http://en.wikipedia.org/wiki/HTTP_persistent_connection)

Camel依赖的官方HTTP客户端可以配置使用或不使用持久连接，但默认为true： [http://docs.oracle.com/javase/1.5.0/docs/guide/net/http-keepalive。 html](http://docs.oracle.com/javase/1.5.0/docs/guide/net/http-keepalive.html)

虽然我没试过，但是应该可以设置一个系统属性来配置这个

```
http.keepAlive=<boolean> 
```

如果需要，您应该可以在骆驼上下文中设置它

```
<camelContext>
   <properties>
       <property key="http.keepAlive" value="false"/>
  </properties> 
</camelContext> 
```

请注意，我还没有尝试过。如果你让它工作，很高兴听到结果！

# string - 将前导零添加到数字

> ID：10798701
> 
> 赞同：0
> 
> 时间：2012-05-29T11:58:14.520
> 
> 标签：string, vbscript, formatting, numbers

我，需要得到像 05:00, -05:00 这样的值，当输入有数字值 5,-5..如果输入值像 10,-12 那么不需要添加前导零..我可以创建一些检查有多少位数的功能，然后在需要时添加“0”字符，但也许有人有最好的决定？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T12:18:31.140

我能找到的最能帮助解决这个问题的是 VBScript 中的 FormatNumber 函数。W3在这里有一个很好的例子和测试工具：http: [//www.w3schools.com/vbscript/func_formatnumber.asp](http://www.w3schools.com/vbscript/func_formatnumber.asp)

您很可能必须包装此函数来处理附加 0 的特定情况。但这应该非常简单，只需执行类似的 IFTHEN 语句：

```
IF x > 0 & x < 10 THEN "0" + x
ELSEIF x > -10 & x < 0 THEN "-0" + Abs(x) 
```

或者类似的东西。同样，这必须是一个字符串格式化的东西，因为整数总是反映 5 或 -5 而不是 05 或 -05

希望有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T12:36:13.697

尝试

```
Function FormatHour (input)
    Dim sign
    If (input < 0) Then
        sign = "-"
    End If

    FormatHour = sign & FormatDateTime(TimeSerial(Abs(input), 0, 0), vbShortTime)
End Function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T17:28:42.310

阿列克谢，下次请发表你所拥有的，现在我们必须猜测你真正想要什么，所以这是我的猜测

```
a = array(0, 5, -5, 15, -55) 
for each e in a 
  wscript.echo mid(" -",instr(e,"-")+1,1)&right("0"&abs(e),2)&":00" 
next    

 00:00
 05:00
-05:00
 15:00
-55:00 
```

或者

```
for i = 0 to uBound(a) 
  a(i) = mid(" -",instr(a(i),"-")+1,1)&right("0"&abs(a(i)),2)&":00" 
next 
wscript.echo join(a,",")  
'00:00, 05:00,-05:00, 15:00,-55:00 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T13:37:20.257

Microsoft 的这个 lpad 和 rpad 示例怎么样？

[http://support.microsoft.com/kb/96458](http://support.microsoft.com/kb/96458)

# flash - 你能在 Firefox 插件中嵌入 Flash 内容吗

> ID：10798703
> 
> 赞同：0
> 
> 时间：2012-05-29T11:58:18.837
> 
> 标签：flash, firefox-addon

我想在 Firefox 插件中嵌入一个 Flash 对象。

这可以通过图像来完成：

```
imgTest = function(document){      
  var h = document.getElementsByTagName("body")[0];            
  var img = document.createElement("img");
  img.src = 'chrome://extname/content/image.jpg';      
  h.appendChild(img);
} 
```

当对 Flash 执行相同操作时，Flash 对象不显示：

```
flashTest = function(document){      
  var h = document.getElementsByTagName("body")[0];            
  var ob = document.createElement("object");
  var embed = document.createElement("embed");
  embed.type = 'application/x-shockwave-flash';
  embed.src = 'chrome://extname/content/flash.swf';
  ob.appendChild(embed);      
  h.appendChild(ob);
} 
```

在 Firebug 中查看对象已附加，但嵌入显示为灰色。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T12:31:55.083

我猜这`document`指向浏览器内容区域中加载的网页（至少您*似乎*有一个 HTML 文档，而不是 XUL 文档）。然后问题似乎是该网页不允许访问`chrome://extname/`。如果您希望网页可以访问扩展程序的内容，那么您应该在 中指定标志[`contentaccessible`，](https://developer.mozilla.org/en/Chrome_Registration#contentaccessible)`chrome.manifest`例如：

```
content extname chrome/path/ contentaccessible=yes 
```

侧节点：它恰好适用于图像，因为图像在您设置`src`属性后立即开始同步加载 - 因此请求的发起者是您的扩展并且允许请求​​。Flash 对象仅在插入文档后才开始异步加载。这里请求的发起者是网页，在这种情况下不允许它发出请求。

# python - 奇怪的 loadtxt 行为，以前工作的脚本在重新安装后无法工作

> ID：10798705
> 
> 赞同：1
> 
> 时间：2012-05-29T11:58:22.813
> 
> 标签：python, numpy

我`loadtxt`在 python 中使用 numpy 的函数来将数据从文本文件加载到数组中。不应该引起任何问题的标准东西。

我在 ubuntu 10.04 下编写了一个脚本来执行此操作，并且它完美地工作。但是我最近升级到 ubuntu 12.04（完全重新安装，而不是升级），现在脚本不起作用。

这是文件中的一行，所有行都具有相同的结构：11 列由制表符分隔：

```
Av = 0° Bv = 78°    273013  247744  1327      ****  Av' = 156°  Bv = 78°    259197  247803  1551 
```

我想要第5列和第11列的数据，所以我用这个命令来加载数据：loadtxt(file, usecols=(4,10),delimiter='\t')

但它不起作用，这里 ipython 吐出什么：

```
In [46]: test=loadtxt(file,usecols=(4,10),delimiter='\t')
--------------------------------------------------------------------------- ValueError   
Traceback (most recent call last)  <ipython-input-46-20a0923eaf9b> in <module>()
----> 1 test=loadtxt(file,usecols=(4,10),delimiter='\t')

/usr/lib/python2.7/dist-packages/numpy/lib/npyio.pyc in loadtxt(fname, dtype, comments, delimiter, converters, skiprows, usecols, unpack, ndmin)
    794                 vals = [vals[i] for i in usecols]
    795             # Convert each value according to its column and store

--> 796             items = [conv(val) for (conv, val) in zip(converters, vals)]
    797             # Then pack it according to the dtype's nesting

    798             items = pack_items(items, packing)

ValueError: could not convert string to float: 
```

它曾经与我的旧系统（ubuntu 10.04）一起工作，但我无法在我的新安装（ubuntu 12.04）下从这个文件加载数据。

如果有人能指出我出了什么问题，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T12:32:35.023

我不知道为什么`loadtxt`以前可以工作，它目前不能很好地处理字符串。但是您可以使用`genfromtxt`来处理此记录：

```
import numpy as np

out = np.genfromtxt(file, usecols=(4,10), delimiter='\t') 
```

如果省略`usecols`并加载整个记录，则它将字符串条目替换为`nan`s。

# r - 使用 rmongodb 在 R 中运行高级 MongoDB 查询

> ID：10798707
> 
> 赞同：5
> 
> 时间：2012-05-29T11:58:31.633
> 
> 标签：r, mongodb, rmongodb

由于 MySQL 让我发疯，我试图让自己熟悉我的第一个“NoSQL”DBMS，它恰好是[MongoDB](http://www.mongodb.org/)。我通过[rmongodb](http://cran.r-project.org/web/packages/rmongodb/index.html)连接到它。

我玩的越多[rmongodb](http://cran.r-project.org/web/packages/rmongodb/index.html)，关于运行高级查询的问题/问题就越多。

首先，在详细介绍我似乎无法正确指定的不同类型的查询之前，我先介绍一些示例数据。

## 示例数据

该示例取自[MongoDB 网站](http://www.mongodb.org/display/DOCS/Schema+Design)，并进行了一些简化。

```
pkg <- "rmongodb"
if (!require(pkg, character.only=TRUE)) {
    install.packages(pkg)
    require(pkg, character.only=TRUE)   
}

# Connect to DB
db <- "test"
ns <- "posts"
mongo <- mongo.create(db=db)

# Insert document to collection 'test.users'
b <- mongo.bson.from.list(list(
    "_id"="alex", 
    name=list(first="Alex", last="Benisson"),
    karma=1.0,
    age=30,
    test=c("a", "b")
))
mongo.insert(mongo, "test.users", b)

# Insert document to collection 'test.posts'
b <- mongo.bson.from.list(list(
        "_id"="abcd",
        when=mongo.timestamp.create(strptime("2011-09-19 02:00:00",
            "%Y-%m-%d %H:%M:%s"), increment=1),
        author="alex",
        title="Some title",
        text="Some text.",
        tags=c("tag.1", "tag.2"),
        votes=5,
        voters=c("jane", "joe", "spencer", "phyllis", "li"),
        comments=list(
            list(
                who="jane", 
                when=mongo.timestamp.create(strptime("2011-09-19 04:00:00",
                    "%Y-%m-%d %H:%M:%s"), increment=1),
                comment="Some comment."
            ),
            list(
                who="meghan", 
                when=mongo.timestamp.create(strptime("2011-09-20 13:00:00",
                    "%Y-%m-%d %H:%M:%s"), increment=1),
                comment="Some comment."
            )
        )
    )
)
b
mongo.insert(mongo, "test.posts", b) 
```

与插入 JSON/BSON 对象相关的两个问题：

1.  文档'test.posts'，字段`voters`：在这种情况下使用是否正确`c()`？
2.  文档'test.posts'，字段`comments`：指定这个的正确方法是什么，`c()`或者`list()`？

## 顶级查询：他们很享受

顶级查询工作得很好：

```
# Get all posts by 'alex' (only titles)
res <- mongo.find(mongo, "test.posts", query=list(author="alex"), 
    fields=list(title=1L))
out <- NULL
while (mongo.cursor.next(res))
    out <- c(out, list(mongo.bson.to.list(mongo.cursor.value(res))))

> out
[[1]]
                       _id                      title 
                     "abcd"            "No Free Lunch" 
```

## 问题一：基本子级查询

如何运行需要进入[JSON/BSON](http://bsonspec.org/)样式 MongoDB 对象的任意深度子级别的简单“子级别查询”（与顶级查询相反）？这些子级查询使用 MongoDB 的[点表示法](http://www.mongodb.org/display/DOCS/Dot+Notation+%28Reaching+into+Objects%29)，我似乎无法弄清楚如何将其映射到有效的[rmongodb](http://cran.r-project.org/web/packages/rmongodb/index.html)查询

在简单的 MongoDB 语法中，类似于

```
> db.posts.find( { comments.who : "meghan" } ) 
```

会工作。但我不知道如何用[rmongodb](http://cran.r-project.org/web/packages/rmongodb/index.html)函数做到这一点

**这是我到目前为止尝试过的**

```
# Get all comments by 'meghan' from 'test.posts'

#--------------------
# Approach 1)
#--------------------
res <- mongo.find(mongo, "test.posts", query=list(comments=list(who="meghan")))
out <- NULL
while (mongo.cursor.next(res))
    out <- c(out, list(mongo.bson.to.list(mongo.cursor.value(res))))

> out
NULL
# Does not work

#--------------------
# Approach 2) 
#--------------------
buf <- mongo.bson.buffer.create()
mongo.bson.buffer.start.object(buf, "comments")
mongo.bson.buffer.append(buf, "who", "meghan")
mongo.bson.buffer.finish.object(buf)
query <- mongo.bson.from.buffer(buf)
res <- mongo.find(mongo, "test.posts", query=query)
out <- NULL
while (mongo.cursor.next(res))
    out <- c(out, list(mongo.bson.to.list(mongo.cursor.value(res))))

> out
NULL
# Does not work 
```

## 问题 2：使用`$`运算符的查询

这些工作

**查询 1**

```
buf <- mongo.bson.buffer.create()
mongo.bson.buffer.start.object(buf, "age")
mongo.bson.buffer.append(buf, "$lte", 30)
mongo.bson.buffer.finish.object(buf)
criteria <- mongo.bson.from.buffer(buf)
criteria

> mongo.find.one(mongo, "test.users", query=criteria)
    _id : 2      alex
    name : 3     
        first : 2    Alex
        last : 2     Benisson

    karma : 1    1.000000
    age : 1      30.000000
    test : 4     
        0 : 2    a
        1 : 2    b 
```

**查询 2**

```
buf <- mongo.bson.buffer.create()
mongo.bson.buffer.start.object(buf, "test")
mongo.bson.buffer.append(buf, "$in", c("a", "z"))
mongo.bson.buffer.finish.object(buf)
criteria <- mongo.bson.from.buffer(buf)
criteria
mongo.find.one(mongo, "test.users", query=criteria) 
```

但是，请注意，原子集将导致返回值`NULL`

```
mongo.bson.buffer.append(buf, "$in", "a")
# Instead of 'mongo.bson.buffer.append(buf, "$in", c("a", "z"))' 
```

尝试与子级别查询相同，我又迷路了

```
buf <- mongo.bson.buffer.create()
mongo.bson.buffer.start.object(buf, "name")
mongo.bson.buffer.start.object(buf, "first")
mongo.bson.buffer.append(buf, "$in", c("Alex", "Horst"))
mongo.bson.buffer.finish.object(buf)
mongo.bson.buffer.finish.object(buf)
criteria <- mongo.bson.from.buffer(buf)
criteria <- mongo.bson.from.buffer(buf)
> criteria
    name : 3     
        first : 3    
            $in : 4      
                0 : 2    Alex
                1 : 2    Horst

> mongo.find.one(mongo, "test.users", query=criteria)
NULL 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-09T14:12:25.180

c() 或 list() 都可以。取决于组件是否命名以及它们是否都具有相同的类型（对于列表）。最好的办法是查看生成的 BSON，看看你是否得到了你想要的。为了最好地控制生成的对象，请使用 mongo.bson.buffer 和对其进行操作的函数。事实上，这就是子查询失败的原因。'comments' 被创建为子对象而不是数组。mongo.bson.from.list() 很方便，但它不能给你相同的控制，有时它会猜错从复杂结构中生成的内容。

可以像这样更正对另一组数据的查询：

```
buf <- mongo.bson.buffer.create()
mongo.bson.buffer.start.object(buf, "name.first")
mongo.bson.buffer.append(buf, "$in", c("Alex", "Horst"))
mongo.bson.buffer.finish.object(buf)
criteria <- mongo.bson.from.buffer(buf) 
```

请注意，您肯定需要在此处使用缓冲区，因为 R 会因虚线名称而窒息。

我希望这能解决你的问题。如果您还有其他问题，请告诉我。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T10:18:09.440

一旦发布问题，我仍然不太清楚在 SO 上进展的首选方式是什么，但人们希望详细说明一下，可能会添加更多的问题和答案方法。

正如我经常被告知不要在未来的编辑中炸毁我原来的问题，在这个“答案”中，我只是接受 Gerald Lindsly 的建议并尝试将其放入实际代码中（因为它仍然不适合我):

## 准备工作

```
pkg <- "rmongodb"
if (!require(pkg, character.only=TRUE)) {
    install.packages(pkg)
    require(pkg, character.only=TRUE)   
}

# Connect to DB
db <- "test"
ns <- "posts"
mongo <- mongo.create(db=db)

# Make sure we start with an empty collection
mongo.drop(mongo, paste(db, ns, sep=".")) 
```

## 插入文档

正如 Gerald 在他的回答中指出的那样，`mongo.bson.from.list()`有时会对生成的 BSON 结构做出错误的猜测，所以我尝试继续显式创建 BSON 数组对象：

```
buf <- mongo.bson.buffer.create()

# 'REGULAR' APPENDING
mongo.bson.buffer.append(buf, "_id", "abcd")
mongo.bson.buffer.append(buf, "when", 
    mongo.timestamp.create(strptime("2011-09-19 02:00:00",
        "%Y-%m-%d %H:%M:%s"), increment=1))
mongo.bson.buffer.append(buf, "author", "alex")
mongo.bson.buffer.append(buf, "title", "Some title")
mongo.bson.buffer.append(buf, "text", "Some text.")
mongo.bson.buffer.append(buf, "tags", c("tag.1", "tag.2"))
mongo.bson.buffer.append(buf, "votes", 5)
# /

# VOTERS ARRAY
mongo.bson.buffer.start.array(buf, "voters")
voters <- c("jane", "joe", "spencer", "phyllis", "li")
i=1
for (i in seq(along=voters)) {
    mongo.bson.buffer.append(buf, as.character(i), voters[i])
}
mongo.bson.buffer.finish.object(buf)
# /

# COMMENTS ARRAY
mongo.bson.buffer.start.array(buf, "comments")

mongo.bson.buffer.start.object(buf, "1")
mongo.bson.buffer.append(buf, "who", "jane")
mongo.bson.buffer.append(buf, "when", 
    mongo.timestamp.create(strptime("2011-09-19 04:00:00",
            "%Y-%m-%d %H:%M:%s"), increment=1))
mongo.bson.buffer.append(buf, "comment", "some comment.")
mongo.bson.buffer.finish.object(buf)

mongo.bson.buffer.start.object(buf, "2")
mongo.bson.buffer.append(buf, "who", "meghan")
mongo.bson.buffer.append(buf, "when", 
    mongo.timestamp.create(strptime("2011-09-20 13:00:00",
            "%Y-%m-%d %H:%M:%s"), increment=1))
mongo.bson.buffer.append(buf, "comment", "some comment.")
mongo.bson.buffer.finish.object(buf)
# /

# FINALIZE
mongo.bson.buffer.finish.object(buf)
b <- mongo.bson.from.buffer(buf)
> b
_id : 2      abcd
when : 17    i: 1, t: 1316390400
author : 2   alex
title : 2    Some title
text : 2     Some text.
tags : 4     
    0 : 2    tag.1
    1 : 2    tag.2

votes : 1    5.000000
voters : 4   
    1 : 2    jane
    2 : 2    joe
    3 : 2    spencer
    4 : 2    phyllis
    5 : 2    li

comments : 4     
    1 : 3    
        who : 2      jane
        when : 17    i: 1, t: 1316397600
        comment : 2      some comment.

    2 : 3    
        who : 2      meghan
        when : 17    i: 1, t: 1316516400
        comment : 2      some comment.

mongo.insert(mongo, "test.posts", b) 
```

## 基本子级查询

```
# Get all comments by 'meghan' from 'test.posts'

#--------------------
# Approach 1)
#--------------------
res <- mongo.find(mongo, "test.posts", query=list(comments=list(who="meghan")))
out <- NULL
while (mongo.cursor.next(res))
    out <- c(out, list(mongo.bson.to.list(mongo.cursor.value(res))))

> out
NULL
# Does not work

#--------------------
# Approach 2) 
#--------------------
buf <- mongo.bson.buffer.create()
mongo.bson.buffer.start.object(buf, "comments")
mongo.bson.buffer.append(buf, "who", "meghan")
mongo.bson.buffer.finish.object(buf)
query <- mongo.bson.from.buffer(buf)
res <- mongo.find(mongo, "test.posts", query=query)
out <- NULL
while (mongo.cursor.next(res))
    out <- c(out, list(mongo.bson.to.list(mongo.cursor.value(res))))

> out
NULL
# Does not work 
```

指定文档时，我仍然必须在这里做错事；-)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-21T00:10:39.527

关于原子查询和 $in 运算符，我从您的第一个问题中得到了查询 2，如下所示：

```
buf <- mongo.bson.buffer.create()
mongo.bson.buffer.start.object(buf, "test")
mongo.bson.buffer.start.array(buf, "$in")
mongo.bson.buffer.append(buf, "a", "a")
mongo.bson.buffer.finish.object(buf)
mongo.bson.buffer.finish.object(buf)
criteria <- mongo.bson.from.buffer(buf)
criteria 
```

我想如果数组最终只包含一个元素，那么明确地开始和结束数组就可以了。

可能有用的一件事是监视 mongod 控制台或日志（在使用 -v 选项启动 mongod 之后）。运行旧查询，您将看到：

```
Tue Nov 20 16:09:04 [conn23] User Assertion: 12580:invalid query
Tue Nov 20 16:09:04 [conn23] assertion 12580 invalid query ns:test.users query:{ test: { $in: "a" } }
Tue Nov 20 16:09:04 [conn23] problem detected during query over test.users : { $err: "invalid query", code: 12580 }
Tue Nov 20 16:09:04 [conn23] query test.users query: { test: { $in: "a" } } ntoreturn:0 keyUpdates:0 exception: invalid query code:12580 locks(micros) r:440 reslen:59 0ms 
```

运行修改后的查询，看起来没问题：

```
Tue Nov 20 16:10:14 [conn23] query test.users query: { test: { $in: [ "a" ] } } ntoreturn:0 keyUpdates:0 locks(micros) r:168 nreturned:1 reslen:142 0ms 
```

# asp.net - Asp.net 中的 SqlException - 'Van' 附近的语法不正确

> ID：10798712
> 
> 赞同：0
> 
> 时间：2012-05-29T11:58:41.667
> 
> 标签：asp.net, sql-server-2008

我的 SqlCommand 有问题，我打开页面时遇到错误：

```
System.Data.SqlClient.SqlException: Incorrect syntax near 'Van'. 
```

我找不到问题，因为在整个项目和标题中只找到了一次“Van”。这是我在 Page_Load 中的代码：

```
 using (SqlConnection con = new SqlConnection(RoleEnvironment.GetConfigurationSettingValue("DatabaseConnectionString")))
            {
                var cmd = new SqlCommand("SELECT (SELECT Memo_ID, Dep_Name FROM Department WHERE (Department_ID = Staff.Depar_ID)) AS DepartmentName FROM Staff WHERE (FirstName + SPACE(1) + LastName = " + User.Identity.Name, con);
                cmd.Connection.Open();
                var sqlReader = cmd.ExecuteReader();
                while (sqlReader.Read())
                {

                    String result = sqlReader.GetString(0);
                    DropDownList1.DataBind();
                    DropDownList1.Items.FindByValue(result).Selected = true;
                    //Fill some data like : string result = sqlReader("SomeFieldName");
                }
                sqlReader.Close();
                cmd.Connection.Close();
                cmd.Dispose();
            } 
```

数据库连接字符串是正确的，因为它适用于我的所有其他页面。我正在尝试获取员工工作的部门，以便他/她只能查看他们自己部门的备忘录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T12:02:53.380

您需要关闭提供的姓氏后的括号。

```
SELECT (SELECT Memo_ID, Dep_Name FROM Department 
WHERE (Department_ID = Staff.Depar_ID)) AS DepartmentName 
FROM Staff WHERE (FirstName + SPACE(1) + LastName = 'xxx' ) 
```

这是它的样子：

```
 using (SqlConnection con = new SqlConnection(RoleEnvironment.GetConfigurationSettingValue("DatabaseConnectionString")))
        {
            var cmd = new SqlCommand("SELECT (SELECT Memo_ID, Dep_Name FROM Department WHERE (Department_ID = Staff.Depar_ID)) AS DepartmentName FROM Staff WHERE (FirstName + SPACE(1) + LastName = '" + User.Identity.Name + "')", con);
            cmd.Connection.Open();
            var sqlReader = cmd.ExecuteReader();
            while (sqlReader.Read())
            {

                String result = sqlReader.GetString(0);
                DropDownList1.DataBind();
                DropDownList1.Items.FindByValue(result).Selected = true;
                //Fill some data like : string result = sqlReader("SomeFieldName");
            }
            sqlReader.Close();
            cmd.Connection.Close();
            cmd.Dispose(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T12:01:00.800

您需要引用姓氏。您可能也想转换为参数化查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T12:02:01.207

我本来希望您的`WHERE`条款将`User.Identity.Name`引号括起来：

```
WHERE (FirstName + SPACE(1) + LastName = '" + User.Identity.Name + "'" ... 
```

“ *van* ”可以在用户名中吗？

这也不是一个非常安全的查询——但 SQL 注入是另一个问题！

# php - mysql 从查询中获取结果

> ID：10798714
> 
> 赞同：0
> 
> 时间：2012-05-29T11:58:51.047
> 
> 标签：php, mysql, select, where-clause

我目前在我的网站上运行此查询，

```
public function searchCandidates($type=null, $gender=null, $age=null)
{
    //die(var_dump($age));
    if($age != false) {
        $age = implode(", %", $age);
    }

    $sql = 'SELECT `candidates`.`candidate_id`, 
                    `candidates`.`first_name`, 
                    `candidates`.`surname`, 
                    `candidates`.`gender`,
                    `candidates`.`DOB`, 
                    `candidates`.`talent`, 
                    `candidates`.`availability`,
                    `candidates`.`youtube_showreel_1`,
                    `candidates`.`youtube_showreel_desc_1`,
                    `candidates`.`date_created`,
                    `candidates`.`new_talent`,
                     DATE_FORMAT(NOW(), "%Y") - DATE_FORMAT(`candidates`.`DOB`, "%Y") - (DATE_FORMAT(NOW(), "00-%m-%d") < DATE_FORMAT(`candidates`.`DOB`, "00-%m-%d")) as `age`,
                    `candidate_assets`.`url`, 
                    `candidate_assets`.`asset_size`,
                    `candidate_assets`.`weight`
            FROM `candidates`
            LEFT JOIN `candidate_assets` ON `candidate_assets`.`candidates_candidate_id` = `candidates`.`candidate_id`
            WHERE `candidates`.`show_on_site` = "urban talent" AND `candidates`.`visible` = "yes" AND `candidate_assets`.`weight` = 1';
            //is there a certain criteria
            if($type != "0") { $sql .= ' AND `candidates`.`talent` LIKE "%'.$type.'%"'; }
            if($age != false) { $sql .= ' AND `candidates`.`playing_age` LIKE "%'.$age.'%"';}
            if($gender != false){ $sql .= ' AND `candidates`.`gender` = "'.$gender.'"'; }

            $sql .= ' GROUP BY `candidates`.`candidate_id` ORDER BY `candidates`.`surname` ASC, `candidate_assets`.`weight` ASC';

    $query = $this->db->query($sql);

    //die(print_r($query->result_array()));

    //echo $this->db->last_query();
    //die();
    return $query->result_array();
} 
```

我正在努力让这个查询按我的意愿工作，我想显示所有结果，无论用户是否有图像（`candidate_assets`. `url`），但是如果他们确实有图像，那么我只需要显示具有的图像权重为 1。目前，我的查询只带回图像权重为 1 的用户。

我想要的是返回所有用户，如果他们有一个图像（或多个图像），则返回权重为 1 的图像。

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T12:06:16.660

如果您在 where 子句中使用第二个表中的列，则您的 LEFT JOIN 没有区别。要么允许它们在 where 子句中为 NULL，要么将它们移动到 ON 子句：

你有：

```
LEFT JOIN `candidate_assets` 
ON `candidate_assets`.`candidates_candidate_id` = `candidates`.`candidate_id`
WHERE `candidates`.`show_on_site` = "urban talent" 
AND `candidates`.`visible` = "yes" 
AND `candidate_assets`.`weight` = 1'; 
```

做到这一点：

```
LEFT JOIN `candidate_assets` 
ON `candidate_assets`.`candidates_candidate_id` = `candidates`.`candidate_id`
AND `candidate_assets`.`weight` = 1 /*moved here*/
WHERE `candidates`.`show_on_site` = "urban talent" 
AND `candidates`.`visible` = "yes" 
```

或者可能（不那么“合乎逻辑”）

```
LEFT JOIN `candidate_assets` 
ON `candidate_assets`.`candidates_candidate_id` = `candidates`.`candidate_id`
WHERE `candidates`.`show_on_site` = "urban talent" 
AND `candidates`.`visible` = "yes" 
AND (`candidate_assets`.`weight` = 1 OR `candidate_assets`.`weight` IS NULL) 
```

现在您将拥有所需的所有行。如果有选择地只选择一个图像，要么让您的应用程序代码处理它，要么使用 IF 查询稍微调整您的 SELECT 子句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T12:06:22.287

尝试这个 -

```
$sql = 'SELECT `candidates`.`candidate_id`, 
                `candidates`.`first_name`, 
                `candidates`.`surname`, 
                `candidates`.`gender`,
                `candidates`.`DOB`, 
                `candidates`.`talent`, 
                `candidates`.`availability`,
                `candidates`.`youtube_showreel_1`,
                `candidates`.`youtube_showreel_desc_1`,
                `candidates`.`date_created`,
                `candidates`.`new_talent`,
                 DATE_FORMAT(NOW(), "%Y") - DATE_FORMAT(`candidates`.`DOB`, "%Y") - (DATE_FORMAT(NOW(), "00-%m-%d") < DATE_FORMAT(`candidates`.`DOB`, "00-%m-%d")) as `age`,
                `candidate_assets`.`url`, 
                `candidate_assets`.`asset_size`,
                IF(`candidate_assets`.`url` IS NULL, 0, 1) AS `weight`
        FROM `candidates`
        LEFT JOIN `candidate_assets` ON `candidate_assets`.`candidates_candidate_id` = `candidates`.`candidate_id`
        WHERE `candidates`.`show_on_site` = "urban talent" AND `candidates`.`visible` = "yes"'; 
```

# javascript - 防止表单在 jQuery Validate 插件的 submitHandler 函数中提交

> ID：10798717
> 
> 赞同：34
> 
> 时间：2012-05-29T11:58:55.427
> 
> 标签：javascript, jquery, validation

我在[http://docs.jquery.com/Plugins/Validation/validate上使用 jQuery 和 validate 插件](http://docs.jquery.com/Plugins/Validation/validate)

我想阻止表单在通过 ajax 完成验证和提交过程后提交。我有以下代码：

```
$("#myform").validate({
   rules: {...},
   submitHandler: function(form) { 
      alert("Do some stuff...");
      //submit via ajax
      return false;  //This doesn't prevent the form from submitting.
   }
}); 
```

但是，这样做的问题是`submitHandler`即使我 `return false;`在处理函数的最后一行有一个语句，它也会提交表单。我想阻止默认行为并停止提交表单，因为我已经通过 ajax 提交了。

通过函数中的ajax代码后，我应该如何阻止代码提交`submitHandler`？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-04-20T13:42:31.500

我这样做，它完全按照您希望的方式工作：

```
$("#myform").submit(function(e) {
    e.preventDefault();
}).validate({
    rules: {...},
    submitHandler: function(form) { 
        alert("Do some stuff...");
        //submit via ajax
        return false;  //This doesn't prevent the form from submitting.
    }
}); 
```

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2014-04-21T14:57:00.823

```
$("#myform").validate({
   rules: {...},
   submitHandler: function(form, event) { 
      event.preventDefault();
      alert("Do some stuff...");
      //submit via ajax
   }
}); 
```

希望这有帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-29T12:04:54.210

也许您可以在不使用提交按钮的情况下进行外部验证：

```
if($("#myform").valid()){
    alert("Do some stuff...");
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-12-17T15:29:48.390

工作[小提琴](http://jsfiddle.net/g1715wqn/3/)

根据 jquery 插件验证文档。

`submitHandler`（默认：原生表单提交）

通过下面的提交方法是从它应该工作的[文档](https://jqueryvalidation.org/category/plugin/#submithandler)`submitHandler`中引用的，但实际上它不起作用，他们说

表单有效时处理实际提交的回调。获取`form`和`submit event`作为唯一的参数。替换默认提交。验证后通过 Ajax 提交表单的正确位置。

示例：当有效时，使用 jQuery Form 插件通过 Ajax 提交表单。

```
$("#myform").validate({   
   submitHandler: function(form,event) {
     event.preventDefault();
      $(form).ajaxSubmit();   
   } 
}); 
```

我在这里写代码对我有用。只需调用您的验证插件，并且不要包含`submitHandler`在您的验证函数参数中。

`submitHandler`而不是使用 jQuery 表单提交方法来提交和阻止。像下面

```
$("form").validate({});

$(document).on("submit", "form", function (event) {
   event.preventDefault();
   alert("submit"); 
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-30T07:23:00.810

您可以通过“jQuery Walidate”以非常简单的方式对此进行编码。 [http://jquery.dop-trois.org/walidate/](http://jquery.dop-trois.org/walidate/)

在那里您可以编写一个函数，该函数将在提交时执行。在文档中查找回调。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-29T12:01:11.697

您可以调用`event.preventDefault()`事件`submit`：

```
$("#myform").on("submit", function(event) {
    event.preventDefault();
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-19T07:51:29.933

不幸的是，似乎 call:`submitHandler: function(form){`不接受事件参数，所以似乎唯一的解决方案是这样的`return false`声明：

```
...
submitHandler: function(form) {
    //your code
    return false;
},
... 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-02-06T17:22:18.787

我是这样解决的。jQuery Validation Plugin bug 的补丁，即使在 v1.19.0 上也没有修复

```
$('#save_edit_user').on('click', function () {
    var isValid = $("#edit_user").validate().form() && $("#edit_user").validate().element("#edit_user_email");
    //check current ajax call by $.active 
    //the form is not submitted before 0 ajax is running
    if (isValid && $.active == 0){
     // my save logic

    }
}); 
```

# java - android微调器值不会停止播放器

> ID：10798718
> 
> 赞同：0
> 
> 时间：2012-05-29T11:59:11.573
> 
> 标签：java, android

有人知道为什么这段代码不能阻止我的播放器播放吗？

```
public void onItemSelected(AdapterView<?> parent,
            View view, int pos, long id) {

     if(pos == 1) {  

                    if (aacPlayer != null) {
                        aacPlayer.stop();
                        aacPlayer = null;
                    }

     }

        } 
```

我运行应用程序，当我选择应该停止 aacplayer 的微调器的某个值时，我得到这个：

```
05-29 12:14:59.279: E/AACPlayer(1608): java.lang.NullPointerException
05-29 12:14:59.279: E/AACPlayer(1608):  at com.spoledge.aacplay.AACPlayerActivity.onItemSelected(AACPlayerActivity.java:380)
05-29 12:14:59.279: E/AACPlayer(1608):  at android.widget.AdapterView.fireOnSelected(AdapterView.java:871)
05-29 12:14:59.279: E/AACPlayer(1608):  at android.widget.AdapterView.access$200(AdapterView.java:42)
05-29 12:14:59.279: E/AACPlayer(1608):  at android.widget.AdapterView$SelectionNotifier.run(AdapterView.java:837)
05-29 12:14:59.279: E/AACPlayer(1608):  at android.os.Handler.handleCallback(Handler.java:587)
05-29 12:14:59.279: E/AACPlayer(1608):  at android.os.Handler.dispatchMessage(Handler.java:92)
05-29 12:14:59.279: E/AACPlayer(1608):  at android.os.Looper.loop(Looper.java:123)
05-29 12:14:59.279: E/AACPlayer(1608):  at android.app.ActivityThread.main(ActivityThread.java:3683)
05-29 12:14:59.279: E/AACPlayer(1608):  at java.lang.reflect.Method.invokeNative(Native Method)
05-29 12:14:59.279: E/AACPlayer(1608):  at java.lang.reflect.Method.invoke(Method.java:507)
05-29 12:14:59.279: E/AACPlayer(1608):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
05-29 12:14:59.279: E/AACPlayer(1608):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
05-29 12:14:59.279: E/AACPlayer(1608):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T12:01:24.930

好吧，我猜“pos”变量永远不会是1？

尝试删除它。

# php - Smarty 包装每个字符

> ID：10798720
> 
> 赞同：0
> 
> 时间：2012-05-29T11:59:12.820
> 
> 标签：php, smarty

是否可以用 smarty 包装每个字符，例如用 div？

这是我用来在 php 中显示来自时间戳的天数的一行：

```
{floor($timeTill / 86400)|string_format:"%02d"} 
```

它输出如下内容：

50 或 37 或 10 或 07 或 ......

现在我希望每个数字或字符都被包装：

```
<div>3</div><div>7</div> 
```

我需要一个非javascript解决方案！谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T12:23:53.753

有点肮脏的解决方案，但应该做的工作

```
<div>{floor($timeTill / 86400)|spacify:"</div><div>"}</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T12:05:38.100

只需用 包裹 Smarty 标签本身`<div>`，即

```
<div>{floor($timeTill / 86400)|string_format:"%02d"}</div> 
```

**编辑：**回退到 PHP

```
{php}
  global $timeTill;
  $timeTill = str_split($timeTill);
  echo '<div>'.implode('</div><div>', $timeTill).'</div>';
{/php} 
```

# javascript - css 在固定宽度内浮动 2 个兄弟姐妹，一个兄弟姐妹包含推动兄弟姐妹的元素

> ID：10798725
> 
> 赞同：0
> 
> 时间：2012-05-29T11:59:32.700
> 
> 标签：javascript, html, css, css-float

很难解释我遇到的这个问题，因为有很多变量。

我有一个网站，它使用 javascipt 来调整固定换行的大小，取决于屏幕分辨率，所以所有的 div 都必须调整为 3 个不同的宽度，这就是它使这个问题变得如此困难的原因。

HTML

```
<div id="wrap" >
  <div id="content">
    <div class="sideNav" >/* This is not static in the markup so when its not in the markup the rest of the content will take its space as everything is 240px in width*/
      <ul>
        <li><a href=""></a></li>
        <li><a href=""></a></li>
        <li><a href=""></a></li>
        <li><a href=""></a></li>
        <li><a href=""></a></li>
        <li><a href=""></a></li>
        <li><a href=""></a></li>
        <li><a href=""></a></li>
        <li><a href=""></a></li>
        <li><a href=""></a></li>
      </ul>
    </div>
    <div class="contentContainer">/* this needs to resize to  */
      <div class="item">
        <a href="">
          <img src="" alt="" style="width: 240px; height: 180px;"/>
          <div class="title"><p>help</p></div>
        </a>    
      </div>
        <div class="item">
        <a href="">
          <img src="" alt="" style="width: 240px; height: 180px;"/>
          <div class="title"><p>help</p></div>
        </a>    
      </div>
      <div class="item">
        <a href="">
          <img src="" alt="" style="width: 240px; height: 180px;"/>
          <div class="title"><p>help</p></div>
        </a>    
      </div>
      <div class="item">
        <a href="">
          <img src="" alt="" style="width: 240px; height: 180px;"/>
          <div class="title"><p>help</p></div>
        </a>    
      </div>    
    </div>
  </div>
</div> 
```

CSS

```
.wrap {
  width: 960px; or width: 1110px; or width: 1350px depending on screen res; /* all sizes which would fix 240px 4,5 or 6 times across*/
}
.sideNav {
width: 240px;
float: left;
}
contentContainer {
float: left;
}
.item {
width: 240px;
width: 180px;
} 
```

显然，一旦有超过 3 个项目， .contentContainer 就会被推到 .sideNav 下方，因为没有足够的空间。我不能浮动 .sideNav 并留出 240px 的左边距，因为有时 .sideNav 不会在那里，无论如何要解决这个问题并找到一个平衡点，以便内容在他的页面上很好地流动......

我现在只学习 css 2 个月，所以他们可能是我不知道的解决方案....我真的不知道或理解 css LESS 但也许那里有答案？

如有必要，我可以发布完整的标记和 css

只想提前感谢任何可以提供帮助的人！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T12:22:50.877

您可以为您的项目使用百分比，例如`.time{ width: 20%}`. 它们根据您的 .contentContainer-Elements 宽度调整大小，您可以将其设置为`width: 100%`. 注意你的填充和边距，因为它们在默认浏览器框模式下加起来就是你的宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T12:27:25.450

如果列表中的所有图像尺寸相同，请将它们设置为

```
.item img { width: 240px; height: 180px; } 
```

而不是在每个图像上都具有相同的样式。

实际上，最好在您的 img 中设置 width="240" 和 height="180" 以减少页面加载时间，即“告诉”浏览器您的图像的确切尺寸。

# python - 如何以元组列表的形式处理查询参数？

> ID：10798730
> 
> 赞同：2
> 
> 时间：2012-05-29T11:59:51.027
> 
> 标签：python, string, list, tuples, query-parameters

给定参数名称和值的元组列表，例如：

```
[("foo", 10), ("bar", None), ("baz", "some_string")] 
```

和一些 url 字符串，例如：

```
"/some/url/string" 
```

我的函数应该能够创建以下输出字符串（请注意，查询字符串中不包含 None 值元组）：

```
"/some/url/string?foo=10&baz=some_string" 
```

我尝试使用 join 但由于这些值并非都是字符串，因此我必须先转换它们。也许有人可以用一种简短而干净的方式帮助我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T12:05:10.230

```
>>> from urllib import urlencode
>>> data = [("foo", 10), ("bar", None), ("baz", "some_string")]
>>> urlencode(data)
'foo=10&bar=None&baz=some_string'
>>> urlencode([x for x in data if x[1] is not None]) # no None's
'foo=10&baz=some_string' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T12:05:48.270

只需使用内置的[urllib](http://docs.python.org/library/urllib.html)为您编码参数。

```
>>> import urllib
>>> parameters = [("foo", 10), ("bar", None), ("baz", "some_string")]
>>> clean_parameters = [parameter for parameter in parameters if parameter[1] is not None]
>>> urllib.urlencode(clean_parameters)
'foo=10&baz=some_string' 
```

# ios - iOS - 在 NavBar 和 PullToRefreslh 之间添加自定义工具栏

> ID：10798731
> 
> 赞同：1
> 
> 时间：2012-05-29T12:00:03.687
> 
> 标签：ios, uitableview, toolbar

我想在我的 NavigationBar 下添加第二个“工具栏”。

我有一个继承自[PullToRefreshViewController 类](https://github.com/leah/PullToRefresh)并继承自 UITableViewController 的类。

但我想在通知下做类似 Facebook 应用的事情：http: [//i.imgur.com/puZcY.png](http://i.imgur.com/puZcY.png)

我不知道该怎么做，请您给我建议吗？创建一个自定义的 TableViewController 类似乎并不容易......

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T13:25:38.197

Could you not just add a toolbar in IB and set the PullToRefreshControllers frame?

```
pullToRefreshController.frame = CGRectMake(0, newToolBar.frame.size.height+navBar.frame.size.height, 320, self.view.frame.size.height-(newToolBar.frame.size.height+navBar.frame.size.height)); 
```

Like so? If not, I will switch to my mac and try to find a solution.

# javascript - 在长单词的 n 个字母后添加换行符

> ID：10798734
> 
> 赞同：6
> 
> 时间：2012-05-29T12:00:16.253
> 
> 标签：javascript, jquery

A 有一个最长可达 100 个字符的字符串。有没有一种简单的方法可以每隔 10 个字母在单词中插入换行符？例如：

```
aaaaaaaaaaaaaaaaaaaaaaaaa 
```

应该转为

```
aaaaaaaaaa<br/>aaaaaaaaaa<br/>aaaaa 
```

我知道我可以使用 html() 方法修改 html，但我不确定如何计算字符数和插入标签。谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-29T12:06:51.897

这是一种选择：

```
string.match(/.{1,10}/g).join("<br/>"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T12:09:40.820

假设文本在 div 或 span 内：

```
<div id="myDiv">aaaaaaaaaaaaaaaaaaaaaaaaa</div> 
```

你可以做：

```
$(function() {
    var html=$('#myDiv').html();
    var newHtml='';
    for (var i=0;i<html.length;i++) {
        newHtml=newHtml+html[i];
        if ((i+1)%10==0) {newHtml=newHtml+'<br/>';}
    }
    $('#myDiv').html(newHtml);
}); 
```

这是示例：http: [//jsfiddle.net/68PvB/](http://jsfiddle.net/68PvB/)

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T12:08:15.817

如果您将字符串放在变量中，则可以使用它的`replace`方法，如下所示：

```
var chunklen = 2;      //the length of the chunks you require
var str = '123456789'; //your string
var rxp = new RegExp( '(.{'+chunklen+'})', 'g' );

var str2 = str.replace( rxp, '$1<br/>' );

console.log( str2 );   //12<br/>34<br/>56<br/>78<br/>9 
```

# php - PHP regexp - 在 URI 中查找除特殊文件夹之外的所有 URL

> ID：10798739
> 
> 赞同：0
> 
> 时间：2012-05-29T12:00:24.537
> 
> 标签：php, regex, url

需要获取所有 URL，例如：

```
http://domain.name/novostroyki/novyy_petergof/

http://domain.name/novostroyki/novyy_petergof/?var1=value1&val2=value2=... 
```

但不是以下的：

```
http://domain.name/novostroyki/novyy_petergof/flats/

http://domain.name/novostroyki/novyy_petergof/flats/?var1=value1&val2=value2=... 
```

尝试过类似的事情，但它不能如我所愿：

```
/novostroyki/((?!flats)[a-z_0-9A-Z\.])*/?\??(.*)/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T12:30:59.303

试试这个正则表达式：

```
/novostroyki/((?!flats)[\w.]*/?)*(\?.*)? 
```

不确定它是否在所有情况下都可以 - 它肯定应该在上面列出的那些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T12:50:52.947

检查此建议是否属实：

> 如果 url 与列表中的正则表达式匹配，它不会继续到列表中的下一项。

那么你可以使用：

> 带有所有 novostroyki/flats/ 的正则表达式之后的带有所有 novostroyki 的正则表达式

# python - 在所有使用 UTF-8 的 django 表单提交中避免无效字节序列

> ID：10798740
> 
> 赞同：1
> 
> 时间：2012-05-29T12:00:24.977
> 
> 标签：python, django, utf-8, character-encoding

我提供用户输入数据。由于用户似乎做了很多复制/粘贴。我正面临解码错误。`DjangoUnicodeDecodeError: ‘utf8’ codec can't decode byte 0×96 in position 22`.

无论如何设置`accept-charset="UTF-8"`所有表单。由于所有表单主要由管理员生成，所以我应该覆盖管理员设置吗？

以后如何避免这些问题？我是否需要更改默认 AdminSite 或更改已拥有 100000 个用户的数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T13:12:23.380

我不认为接受字符集是你的问题。默认情况下，所有表单都接受 UTF8 数据。检查处理输入数据的代码，以获取以下语句：

```
value = str(request.POST['user_input'])
value = 'prefix' + request.POST['user-input'] 
# instead of u'prefix' + request.POST['user-input'] 
```

这是一个常见的错误，将 str() 用于可能包含非 ASCII 符号的用户输入。还要检查您的 .py 文件是否保存为 UTF-8。上面的错误可能有很多原因......

# asp.net - rdlc 报告在服务器上不起作用

> ID：10798741
> 
> 赞同：0
> 
> 时间：2012-05-29T12:00:25.523
> 
> 标签：asp.net, iis, rdlc

通过 Visual Studio 2008 创建的 RDCL 报告在本地服务器上运行良好。但是，当在 IIS 上托管相同的应用程序时，会显示 HTTP 404-File Not Found 错误。

![在此处输入图像描述](../Images/148e9cfe34268c9766e0819da7ce76d3.png)

有人对此有任何想法吗？请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T00:22:47.110

404 绝对不是权限问题。需要验证、查看和更改虚拟/相对/绝对路径。

尝试 Fiddler 或 HTTP Analyzer 以查看确切的 URL 并确保它匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T19:50:53.447

请确保 RDCL 报告文件存在于已发布目录和/或 IIS 上。

# git - 从标签提交到主分支

> ID：10798742
> 
> 赞同：0
> 
> 时间：2012-05-29T12:00:35.747
> 
> 标签：git, tagging

我已经从我的主分支签出了一个标签。我做了一些更改，想知道是否有办法将这些更改与分支提交/合并？否则，我认为我唯一的选择是提取最新的，然后在那里重做更改。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T12:38:25.140

您现在处于[“分离 HEAD”](https://stackoverflow.com/a/3965714/720999)状态。所以只需从你的头上分叉一个分支

```
git checkout -b newbranch 
```

然后在一个方便的常规情况下决定下一步做什么，你只有几个分支可以操作。

例如，您可能想决定将您的开发合并到“主”分支，然后执行

```
git checkout master
git merge newbranch 
```

之后，您可以使用摆脱该临时分支

```
git branch -d newbranch 
```

PS 另请注意，标签不在任何分支上。标签指的是提交，这些提交可能被多个分支或根本没有分支引用。

# java - 为什么使用 GWT？它比其他 Javascript UI 框架更好吗？

> ID：10798744
> 
> 赞同：-1
> 
> 时间：2012-05-29T12:00:44.757
> 
> 标签：java, javascript, gwt

我正在构建一个 REST Web 服务器，我需要选择一个与 Java ee 6 REST Web 服务一起工作的 UI 框架。我希望 UI 非常高效，并具有所有 AJAX 和 JQuery 功能，例如从服务器加载数据而不刷新页面。新数据经常添加，所以我需要 UI 每 3-5 秒显示一次新数据......拖放功能等。

我一直在阅读 GWT，这是我的问题：

*   GWT 将 Java 代码编译为 Javascript 对吗？显然 Javascript 不适合 SEO，但使用 GWT 是否使它对 Google SEO 友好？

*   性能虎钳 - GWT 是否比使用 Javascript 工具（如 redis、JQueryUI 或 AJAX）或许多其他 javascript UI 框架之一更快，或者它们都相同？

*   GWT 还支持 GWT 项目本身中的服务器端编码，对吗？在 GWT 项目中编写服务器端代码然后在另一个项目中构建它是否有好处，或者这是一个愚蠢的问题，我在哪里编写服务器端代码并​​不重要？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T12:32:20.937

> GWT 将 Java 代码编译为 Javascript 对吗？显然 Javascript 不适合 SEO，但使用 GWT 是否使它对 Google SEO 友好？

我认为没有解决办法，因为没有问题。使用 GWT，您可以制作 Web 应用程序而不是网页。

> 性能虎钳 - GWT 是否比使用 Javascript 工具（如 redis、JQueryUI 或 AJAX）或许多其他 javascript UI 框架之一更快，或者它们都相同？GWT项目的表现有很多方面。

1.  您的应用程序的加载时间。

    将您的应用程序划分为逻辑部分，当用户想要应用程序的特定部分时，它应该只加载所需的资源。它的其他部分将按需加载。因此，或多或少是您必须处理/管理的设计问题。

2.  小部件、视图等的渲染时间。

    GWT 创建自己的 DOM。在 JQuery 使用现有的 HTML 并进行了增强。

3.  与服务器和客户端之间的数据传输时间。

    没有显着差异。

> GWT 还支持 GWT 项目本身中的服务器端编码，对吗？在 GWT 项目中编写服务器端代码然后在另一个项目中构建它是否有好处，或者这是一个愚蠢的问题，我在哪里编写服务器端代码并​​不重要？

GWT 支持多种方式从服务器发送/接收数据。这不会强迫您在 GWT 项目本身中编写服务器端代码。但是，如果您选择这样做，您将在客户端和服务器上拥有共享模型类和其他实用程序类。您也可以在不同的项目中编写代码，但在这种情况下，您必须实施某种方式来管理共享代码（例如，构建工具）。

最大的收获：使用 GWT，您可以使用真正的面向对象语言构建应用程序，并利用已经可用的 Java 工具（如 Eclipse）。

# asp.net - 如何在asp.net mvc3的网络浏览器中显示pdf文件

> ID：10798752
> 
> 赞同：2
> 
> 时间：2012-05-29T12:01:33.367
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3

我的 App_Data 文件夹中有一个名为 102.pdf 的 pdf 文件。我想在我的网络浏览器中查看这个，比如 chrome。这是我的代码。但我无法显示它。

```
<iframe src="102.pdf" width="400" height="400"></iframe> 
```

我正在使用 VS11

任何帮助，将不胜感激。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T12:08:38.173

你可以尝试这样的事情：[http ://forums.asp.net/t/1506499.aspx/1?Dynamic+pdf+generation+using+iTextSharp](http://forums.asp.net/t/1506499.aspx/1?Dynamic+pdf+generation+using+iTextSharp)

是否需要渲染pdf？您可以做的是在浏览器中生成相同 pdf 文件的标记，并使用 itext [http://itextpdf.com/](http://itextpdf.com/)之类的 lib 以 pdf 格式下载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T13:34:35.880

`

```
<iframe src="@Url.Content("~/Content/pdfs/102.pdf")" width="1000" height="500"></iframe> 
```

`

它是如何使用剃须刀引擎在 asp.net MVC3 中查看 pdf 文件的解决方案。

快乐编码:)

# hibernate - HQL 中的 Theta 样式左外连接

> ID：10798754
> 
> 赞同：0
> 
> 时间：2012-05-29T12:01:41.230
> 
> 标签：hibernate, hql

我尝试将以下 SQL 查询转换为 HQL。不幸的是，外连接从来不是我最喜欢处理的。

```
SELECT DISTINCT T_EMPLOYEE.SSN,   
     T_EMPLOYEE.TRANSACTION_ID,   
     T_EMPLOYEE.NAME,   
     T_EMPLOYEE.CANCEL_DATE,   
     T_EMPLOYEE.CAN_USERID,   
     T_DEPARTMENT.LOC FROM T_EMPLOYEE,   
     T_DEPARTMENT  
WHERE ( T_EMPLOYEE.DEPARTMENT_CODE = T_DEPARTMENT.CODE (+)) and  
     ( ( T_EMPLOYEE.SSN = :s_ssn ) ) 
```

我知道右边的 (+) 符号是 Oracle 的旧式外连接序列（因为它在右边，所以它是左外连接）。T_EMPLOYEE 和 T_DEPARTMENT（遗留数据库）之间也没有外键关系。

两个问题： 1\. 在没有外键关系的情况下，HQL 中是否可以使用 theta 样式（即使用 =）外连接？2\. 如果是这样，有人可以帮我将其转换为 HQL 吗？

杰森

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T09:03:30.053

假设

```
class Employee
{
    private Department department;
}
<many-to-one name="department" column="DEPARTMENT_CODE" />

class Department
{
    private long id;
}
<id name="id" column="CODE" ><generator class="assigned" /></id> 
```

然后你会得到 Employee 与渴望加载的部门

```
"FROM Employee e join fetch e.Department d WHERE e.SSN = :s_ssn" 
```

或者只有你想要的列

```
"SELECT DISTINCT e.ssn, ..., d.loc FROM Employee e left outer join e.Department d WHERE e.SSN = :s_ssn" 
```

# javascript - 如何将输入按钮链接到文件选择窗口？

> ID：10798761
> 
> 赞同：23
> 
> 时间：2012-05-29T12:01:53.133
> 
> 标签：javascript, jquery, html, forms, file-upload

> **可能重复：**
> [Jquery 触发器文件输入](https://stackoverflow.com/questions/793014/jquery-trigger-file-input)

我正在开发一种允许用户将图像上传到网站的表单。到目前为止，我有一个在 Chrome 和 Safari 中工作的拖放解决方案。但是，我还需要支持用户单击按钮并以传统方式浏览文件的操作。

类似于这样做：

```
<input type="file" name="my_file"> 
```

然而，与其拥有笨重的文件描述区域和不可编辑的浏览按钮，我宁愿使用这样的东西：

```
<input type="button" id="get_file"> 
```

因此，我的问题是如何使此按钮打开文件选择窗口并以与`type="file"`工作相同的方式处理选择？

干杯。

* * *

**我的解决方案**

HTML：

```
<input type="button" id="my-button" value="Select Files">
<input type="file" name="my_file" id="my-file"> 
```

CSS：

```
#my-file { visibility: hidden; } 
```

jQuery：

```
$('#my-button').click(function(){
    $('#my-file').click();
}); 
```

到目前为止在 Chrome、Firefox 和 IE7+ 中工作（还没有尝试过 IE6）。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-05-29T12:22:28.883

您可以使用 JavaScript 并在单击按钮输入时触发隐藏文件输入。

[http://jsfiddle.net/gregorypratt/dhyzV/](http://jsfiddle.net/gregorypratt/dhyzV/) - 简单

[http://jsfiddle.net/gregorypratt/dhyzV/1/](http://jsfiddle.net/gregorypratt/dhyzV/1/) - 有点 JQuery 的爱好者

或者，您可以直接在文件输入上设置 div 的样式并`pointer-events`在 CSS 中设置为 none 以允许点击事件传递到花哨 div“后面”的文件输入。但这仅适用于某些浏览器；[http://caniuse.com/pointer-events](http://caniuse.com/pointer-events)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-29T12:09:20.420

如果您想允许用户浏览文件，您需要有一个`input type="file"`最接近您的要求的方法是将其放置`input type="file"`在页面上并将其隐藏。然后，在点击按钮时触发输入的点击事件：

```
#myFileInput {
    display:none;
}

<input type="file" id="myFileInput" />
<input type="button"
       onclick="document.getElementById('myFileInput').click()" 
       value="Select a File" /> 
```

这是[一个工作小提琴](http://jsfiddle.net/ZfPEt/)。

**注意：**我不推荐这种方法。这`input type="file"`是用户习惯用于上传文件的机制。

# c++ - 错误 c2660 和 c2061 C++

> ID：10798763
> 
> 赞同：0
> 
> 时间：2012-05-29T12:01:58.753
> 
> 标签：c++, visual-c++

我在处理以下错误时遇到问题：

> c2660: c:\users\lukas plaehn\desktop\oop\sokoban\sokoban\main.cpp(126): 错误 C2660: 'CPlayer::moveUp' : 函数不接受 1 个参数
> 
> c2061：c:\users\lukas plaehn\desktop\oop\sokoban\sokoban\player.h(10)：错误 C2061：语法错误：标识符 'CMaze'

我想要做的是在头文件中将对象作为参数传递。我也尝试过通过引用来做，但它不起作用。不知何故，编译器不允许我`CMaze`在头文件中声明任何类型的内容`CPlayer`。

```
 class CPlayer:public CBlocks
    {
    public:
    CMaze * m;
    CPlayer(void);
    CPlayer(char sym, int x, int y, CMaze mz);
    ~CPlayer(void);
    void moveUp(CMaze maze);
    void moveDown(CMaze maze);
    void moveLeft(CMaze maze);
    void moveRight(CMaze maze);
};

    #include "Player.h"
    #include "Maze.h"
    //#include "headers.h"

    CPlayer::CPlayer(void)
    {
    }

    CPlayer::CPlayer(char sym, int x, int y, CMaze mz)
    {
    m = &mz;
    m_symbol = sym;
    m_x = x;
    m_y = y;
    }

    CPlayer::~CPlayer(void)
    {
    }

    void CPlayer::moveDown(CMaze maze)
    {
    if(m->arr[m_y+1][m_x].m_symbol == ' ')
    {
        m->arr[m_y+1][m_x] = m->arr[m_y][m_x];
        m->arr[m_y][m_x] = CSpace(' ', m_x, m_y);
    }
    else if(m->arr[m_y+1][m_x].m_symbol == '#')
    {
        cout << "You cannot perform this move!"<<endl;
    }
    else if(m->arr[m_y+1][m_x].m_symbol == '$')
    {
        if(m->arr[m_y+2][m_x].m_symbol == ' ')
        {
            m->arr[m_y+2][m_x] = m->arr[m_y+1][m_x];
            m->arr[m_y+1][m_x] = m->arr[m_y][m_x];
            m->arr[m_y][m_x] = CSpace(' ', m_x, m_y);
        }
        else if(m->arr[m_y+2][m_x].m_symbol == '.')
        {
            m->arr[m_y+2][m_x] = m->arr[m_y+1][m_x];
            m->arr[m_y+2][m_x].m_symbol = '*';
            m->arr[m_y+1][m_x] = m->arr[m_y][m_x];
            m->arr[m_y][m_x] = CSpace(' ', m_x, m_y);
        }
        else if(m->arr[m_y+2][m_x].m_symbol == '$')
        {
            cout << "You cannot perform this move!" << endl;
        }
        else if(m->arr[m_y+2][m_x].m_symbol == '#')
        {
            cout << "You cannot perform this move!" << endl;
        }
        else if(m->arr[m_y+2][m_x].m_symbol == '*')
        {
            cout << "You cannot perform this move!" << endl;
        }
        else
        {
            cout << "Unkown Error Occurred" << endl;
        }   

    }

    else if(m->arr[m_y+1][m_x].m_symbol == '.')
    {
        m->arr[m_y+1][m_x] = m->arr[m_y][m_x];
        m->arr[m_y][m_x] = CSpace(' ', m_x, m_y);
        m->arr[m_y+1][m_x].m_symbol = '+';
    }
    else if(m->arr[m_y+1][m_x].m_symbol == '*')
    {
        if(m->arr[m_y+2][m_x].m_symbol == ' ')
        {
            m->arr[m_y+2][m_x] = m->arr[m_y+1][m_x];
            m->arr[m_y+2][m_x].m_symbol = '$';
            m->arr[m_y+1][m_x] = m->arr[m_y][m_x];
            m->arr[m_y+1][m_x].m_symbol = '+';
            m->arr[m_y][m_x] = CSpace(' ', m_x, m_y);
        }
        else if(m->arr[m_y+2][m_x].m_symbol == '.')
        {
            m->arr[m_y+2][m_x] = m->arr[m_y+1][m_x];
            m->arr[m_y+1][m_x] = m->arr[m_y][m_x];
            m->arr[m_y+1][m_x].m_symbol = '+';
            m->arr[m_y][m_x] = CSpace(' ', m_x, m_y);
        }
        else if(m->arr[m_y+2][m_x].m_symbol == '$')
        {
            cout << "You cannot perform this move!" << endl;
        }
        else if(m->arr[m_y+2][m_x].m_symbol == '#')
        {
            cout << "You cannot perform this move!" << endl;
        }
        else if(m->arr[m_y+2][m_x].m_symbol == '*')
        {
            cout << "You cannot perform this move!" << endl;
        }
        else
        {
            cout << "Unkown Error Occurred" << endl;
        }   
    }

    }

    void CPlayer::moveUp(CMaze maze)
    {
    if(maze.arr[m_y-1][m_x].m_symbol == ' ')
    {
        maze.arr[m_y-1][m_x] = maze.arr[m_y][m_x];
        maze.arr[m_y][m_x] = CSpace(' ', m_x, m_y);
    }
    else if(maze.arr[m_y-1][m_x].m_symbol == '#')
    {
        cout << "You cannot perform this move!"<<endl;
    }
    else if(maze.arr[m_y-1][m_x].m_symbol == '$')
    {
        if(maze.arr[m_y-2][m_x].m_symbol == ' ')
        {
            maze.arr[m_y-2][m_x] = maze.arr[m_y-1][m_x];
            maze.arr[m_y-1][m_x] = maze.arr[m_y][m_x];
            maze.arr[m_y][m_x] = CSpace(' ', m_x, m_y);
        }
        else if(maze.arr[m_y-2][m_x].m_symbol == '.')
        {
            maze.arr[m_y-2][m_x] = maze.arr[m_y-1][m_x];
            maze.arr[m_y-2][m_x].m_symbol = '*';
            maze.arr[m_y-1][m_x] = maze.arr[m_y][m_x];
            maze.arr[m_y][m_x] = CSpace(' ', m_x, m_y);
        }
        else if(maze.arr[m_y-2][m_x].m_symbol == '$')
        {
            cout << "You cannot perform this move!" << endl;
        }
        else if(maze.arr[m_y-2][m_x].m_symbol == '#')
        {
            cout << "You cannot perform this move!" << endl;
        }
        else if(maze.arr[m_y-2][m_x].m_symbol == '*')
        {
            cout << "You cannot perform this move!" << endl;
        }
        else
        {
            cout << "Unkown Error Occurred" << endl;
        }   

    }

    else if(maze.arr[m_y-1][m_x].m_symbol == '.')
    {
        maze.arr[m_y-1][m_x] = maze.arr[m_y][m_x];
        maze.arr[m_y][m_x] = CSpace(' ', m_x, m_y);
        maze.arr[m_y-1][m_x].m_symbol = '+';
    }
    else if(maze.arr[m_y-1][m_x].m_symbol == '*')
    {
        if(maze.arr[m_y-2][m_x].m_symbol == ' ')
        {
            maze.arr[m_y-2][m_x] = maze.arr[m_y-1][m_x];
            maze.arr[m_y-2][m_x].m_symbol = '$';
            maze.arr[m_y-1][m_x] = maze.arr[m_y][m_x];
            maze.arr[m_y-1][m_x].m_symbol = '+';
            maze.arr[m_y][m_x] = CSpace(' ', m_x, m_y);
        }
        else if(maze.arr[m_y-2][m_x].m_symbol == '.')
        {
            maze.arr[m_y-2][m_x] = maze.arr[m_y-1][m_x];
            maze.arr[m_y-1][m_x] = maze.arr[m_y][m_x];
            maze.arr[m_y-1][m_x].m_symbol = '+';
            maze.arr[m_y][m_x] = CSpace(' ', m_x, m_y);
        }
        else if(maze.arr[m_y-2][m_x].m_symbol == '$')
        {
            cout << "You cannot perform this move!" << endl;
        }
        else if(maze.arr[m_y-2][m_x].m_symbol == '#')
        {
            cout << "You cannot perform this move!" << endl;
        }
        else if(maze.arr[m_y-2][m_x].m_symbol == '*')
        {
            cout << "You cannot perform this move!" << endl;
        }
        else
        {
            cout << "Unkown Error Occurred" << endl;
        }   
    }
    }

    void CPlayer::moveLeft(CMaze maze)
    {
    if(maze.arr[m_y][m_x-1].m_symbol == ' ')
    {
        maze.arr[m_y][m_x-1] = maze.arr[m_y][m_x];
        maze.arr[m_y][m_x] = CSpace(' ', m_x, m_y);
    }
    else if(maze.arr[m_y][m_x-1].m_symbol == '#')
    {
        cout << "You cannot perform this move!"<<endl;
    }
    else if(maze.arr[m_y][m_x-1].m_symbol == '$')
    {
        if(maze.arr[m_y][m_x-2].m_symbol == ' ')
        {
            maze.arr[m_y][m_x-2] = maze.arr[m_y][m_x-1];
            maze.arr[m_y][m_x-1] = maze.arr[m_y][m_x];
            maze.arr[m_y][m_x] = CSpace(' ', m_x, m_y);
        }
        else if(maze.arr[m_y][m_x-1].m_symbol == '.')
        {
            maze.arr[m_y][m_x-2] = maze.arr[m_y][m_x-1];
            maze.arr[m_y][m_x-2].m_symbol = '*';
            maze.arr[m_y][m_x-1] = maze.arr[m_y][m_x];
            maze.arr[m_y][m_x] = CSpace(' ', m_x, m_y);
        }
        else if(maze.arr[m_y][m_x-2].m_symbol == '$')
        {
            cout << "You cannot perform this move!" << endl;
        }
        else if(maze.arr[m_y][m_x-2].m_symbol == '#')
        {
            cout << "You cannot perform this move!" << endl;
        }
        else if(maze.arr[m_y][m_x-2].m_symbol == '*')
        {
            cout << "You cannot perform this move!" << endl;
        }
        else
        {
            cout << "Unkown Error Occurred" << endl;
        }   

    }

    else if(maze.arr[m_y][m_x-1].m_symbol == '.')
    {
        maze.arr[m_y][m_x-1] = maze.arr[m_y][m_x];
        maze.arr[m_y][m_x] = CSpace(' ', m_x, m_y);
        maze.arr[m_y][m_x-1].m_symbol = '+';
    }
    else if(maze.arr[m_y][m_x-1].m_symbol == '*')
    {
        if(maze.arr[m_y][m_x-2].m_symbol == ' ')
        {
            maze.arr[m_y][m_x-2] = maze.arr[m_y][m_x-1];
            maze.arr[m_y][m_x-2].m_symbol = '$';
            maze.arr[m_y][m_x-1] = maze.arr[m_y][m_x];
            maze.arr[m_y][m_x-1].m_symbol = '+';
            maze.arr[m_y][m_x] = CSpace(' ', m_x, m_y);
        }
        else if(maze.arr[m_y][m_x-2].m_symbol == '.')
        {
            maze.arr[m_y][m_x-2] = maze.arr[m_y][m_x-1];
            maze.arr[m_y][m_x-1] = maze.arr[m_y][m_x];
            maze.arr[m_y][m_x-1].m_symbol = '+';
            maze.arr[m_y][m_x] = CSpace(' ', m_x, m_y);
        }
        else if(maze.arr[m_y][m_x-2].m_symbol == '$')
        {
            cout << "You cannot perform this move!" << endl;
        }
        else if(maze.arr[m_y][m_x-2].m_symbol == '#')
        {
            cout << "You cannot perform this move!" << endl;
        }
        else if(maze.arr[m_y][m_x-2].m_symbol == '*')
        {
            cout << "You cannot perform this move!" << endl;
        }
        else
        {
            cout << "Unkown Error Occurred" << endl;
        }   
    }
    }

    void CPlayer::moveRight(CMaze maze)
    {
    if(maze.arr[m_y][m_x+1].m_symbol == ' ')
    {
        maze.arr[m_y][m_x+1] = maze.arr[m_y][m_x];
        maze.arr[m_y][m_x] = CSpace(' ', m_x, m_y);
    }
    else if(maze.arr[m_y][m_x+1].m_symbol == '#')
    {
        cout << "You cannot perform this move!"<<endl;
    }
    else if(maze.arr[m_y][m_x+1].m_symbol == '$')
    {
        if(maze.arr[m_y][m_x+2].m_symbol == ' ')
        {
            maze.arr[m_y][m_x+2] = maze.arr[m_y][m_x+1];
            maze.arr[m_y][m_x+1] = maze.arr[m_y][m_x];
            maze.arr[m_y][m_x] = CSpace(' ', m_x, m_y);
        }
        else if(maze.arr[m_y][m_x+1].m_symbol == '.')
        {
            maze.arr[m_y][m_x+2] = maze.arr[m_y][m_x+1];
            maze.arr[m_y][m_x+2].m_symbol = '*';
            maze.arr[m_y][m_x+1] = maze.arr[m_y][m_x];
            maze.arr[m_y][m_x] = CSpace(' ', m_x, m_y);
        }
        else if(maze.arr[m_y][m_x+2].m_symbol == '$')
        {
            cout << "You cannot perform this move!" << endl;
        }
        else if(maze.arr[m_y][m_x+2].m_symbol == '#')
        {
            cout << "You cannot perform this move!" << endl;
        }
        else if(maze.arr[m_y][m_x+2].m_symbol == '*')
        {
            cout << "You cannot perform this move!" << endl;
        }
        else
        {
            cout << "Unkown Error Occurred" << endl;
        }   

    }

    else if(maze.arr[m_y][m_x+1].m_symbol == '.')
    {
        maze.arr[m_y][m_x+1] = maze.arr[m_y][m_x];
        maze.arr[m_y][m_x] = CSpace(' ', m_x, m_y);
        maze.arr[m_y][m_x+1].m_symbol = '+';
    }
    else if(maze.arr[m_y][m_x+1].m_symbol == '*')
    {
        if(maze.arr[m_y][m_x+2].m_symbol == ' ')
        {
            maze.arr[m_y][m_x+2] = maze.arr[m_y][m_x+1];
            maze.arr[m_y][m_x+2].m_symbol = '$';
            maze.arr[m_y][m_x+1] = maze.arr[m_y][m_x];
            maze.arr[m_y][m_x+1].m_symbol = '+';
            maze.arr[m_y][m_x] = CSpace(' ', m_x, m_y);
        }
        else if(maze.arr[m_y][m_x+2].m_symbol == '.')
        {
            maze.arr[m_y][m_x+2] = maze.arr[m_y][m_x+1];
            maze.arr[m_y][m_x+1] = maze.arr[m_y][m_x];
            maze.arr[m_y][m_x+1].m_symbol = '+';
            maze.arr[m_y][m_x] = CSpace(' ', m_x, m_y);
        }
        else if(maze.arr[m_y][m_x+2].m_symbol == '$')
        {
            cout << "You cannot perform this move!" << endl;
        }
        else if(maze.arr[m_y][m_x+2].m_symbol == '#')
        {
            cout << "You cannot perform this move!" << endl;
        }
        else if(maze.arr[m_y][m_x+2].m_symbol == '*')
        {
            cout << "You cannot perform this move!" << endl;
        }
        else
        {
            cout << "Unkown Error Occurred" << endl;
        }   
    }
    }

    class CMaze
    {
public:
    friend class CPlayer;

    int m_columns, m_rows;
    string line;
    CBlocks arr[32][48];
    int i, j;
    int k, count;
    bool m_status;

    ifstream mazeStream;

    CMaze(void);
    ~CMaze(void);
    void setStatus(CMaze maze);
    CBlocks fillCharArr();
    void displayMaze();

    }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T13:12:57.300

Forward declaring CMaze and passing by reference will take care of c2061

```
class CMaze;
class CPlayer : public CBlocks
{
    public:
    CMaze * m;
    CPlayer(void);
    CPlayer(char sym, int x, int y, CMaze & mz);
    ~CPlayer(void);
    void moveUp(CMaze & maze);
    void moveDown(CMaze & maze);
    void moveLeft(CMaze & maze);
    void moveRight(CMaze & maze);
}: 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T13:17:55.513

我猜这与您没有包含来自 player.h 的迷宫标头这一事实有关...这意味着当您按值传递时（这很糟糕，因为它会导致不必要的副本）该函数尽管想使用它，但对 CMaze 对象一无所知。

我怀疑如果您将 CMaze 作为指针或引用传递，问题就会消失。但是，您确实需要记住，通过这样做，您函数内对 CMaze 的任何后续修改都会导致传入的 CMaze 也发生变化。

# python - 在外键中使用 Django bulk_create 对象？

> ID：10798767
> 
> 赞同：11
> 
> 时间：2012-05-29T12:02:13.670
> 
> 标签：python, django, model, save

我正在阅读 Django bulk_create 及其一些“缺陷”：

```
"
This has a number of caveats though:

1\. The model's save() method will not be called, and the pre_save and post_save signals will not be sent.
2\. It does not work with child models in a multi-table inheritance scenario.
3\. If the model's primary key is an AutoField it does not retrieve and set the primary key attribute, as save() does.
" 
```

我没有完全理解。因此，如果我有一个对象列表，请将其传递给 bulk_create：

```
objList = [a, b, c,] #none are saved
model.objects.bulk_create(objList) 
```

我还能在外键中使用这些对象吗？

```
for obj in objList:
    o = otherModel(something='asdfasdf', fkey=obj)
    o.save() # will this be fine given the caveats stated above? 
```

那么foreignKey关系会好吗？同样当它说2时。它不适用于多表继承场景中的子模型，这意味着任何从另一个模型（抽象或非抽象）继承的模型都不能使用bulk_create？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T16:04:11.737

尝试手动设置 ID。为防止出现竞争条件，请确保将函数包装为单个事务。

```
from django.db import transaction, models

@transaction.commit_on_success
def bulk_create_with_manual_ids(foo_list):
    id_start = (Foo.objects.all().aggregate(models.Max('id'))['id__max'] or 0) + 1
    for i,foo in enumerate(foo_list): foo.id = id_start + i
    return Foo.objects.bulk_create(foo_list)

objList = [Foo(),Foo(),Foo()]
foo_objects = bulk_create_with_manual_ids(objList)
Bar(foo=foo_objects[0]).save() 
```

请注意，这种方法不适用于任何具有`serial`字段或其他自动递增的数据库内生成键的表。由于 ID 是在 Django 端生成的，因此批量创建不会增加密钥。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T12:14:25.657

对于第一个问题，不，您将无法这样做，因为`obj`不会设置其主键，因此不能用作外键。

第二个问题，不，这根本不是它所说的。它特别提到“多表继承”：从抽象模型继承不是多表继承。

# java - 如何处理包含 823237 个字符的字符串

> ID：10798769
> 
> 赞同：3
> 
> 时间：2012-05-29T12:02:20.823
> 
> 标签：java, string, servlets, file-io, io

我有一个包含 823237 个字符的字符串。它实际上是一个 xml 文件，出于测试目的，我想作为响应形式返回一个 servlet。

我已经尝试了我能想到的一切

1）用整个字符串创建一个常量......在这种情况下Eclipse抱怨（在servlet类名下有一条红线） -

```
 The type generates a string that requires more than 65535 bytes to encode in Utf8 format in the constant pool 
```

2) 将整个字符串分成 20 个字符串常量并直接写入`out`对象，例如：

```
out.println( CONSTANT_STRING_PART_1 + CONSTANT_STRING_PART_2 + 
             CONSTANT_STRING_PART_3 + CONSTANT_STRING_PART_4 +
             CONSTANT_STRING_PART_5 + CONSTANT_STRING_PART_6 + 
     // add all the string constants till .... CONSTANT_STRING_PART_20); 
```

在这种情况下……构建失败……抱怨……

```
 [javac] D:\xx\xxx\xxx.java:87: constant string too long
   [javac]      CONSTANT_STRING_PART_19 + CONSTANT_STRING_PART_20); 
                                                    ^ 
```

3) 将 xml 文件作为字符串读取并写入`out object`.. 在这种情况下我得到

```
SEVERE: Allocate exception for servlet MyServlet
Caused by: org.apache.xmlbeans.XmlException: error: Content is not allowed in prolog. 
```

**`servlet`最后我的问题是......我怎样才能从???返回这么大的字符串（作为响应） ？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-29T12:20:45.123

您可以避免使用流加载内存中的所有文本：

```
 InputStream is = new FileInputStream("path/to/your/file"); //or the following line if the file is in the classpath
    InputStream is = MyServlet.class.getResourceAsStream("path/to/file/in/classpath");
    byte[] buff = new byte[4 * 1024];
    int read;  
    while ((read = is.read(buff)) != -1) {  
        out.write(buff, 0, read);  
    } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-29T12:14:50.507

第二种方法可能按以下方式工作：

```
out.print(CONSTANT_STRING_PART_1);
out.print(CONSTANT_STRING_PART_2);
out.print(CONSTANT_STRING_PART_3);
out.print(CONSTANT_STRING_PART_4);
// ...
out.print(CONSTANT_STRING_PART_N);
out.println(); 
```

您当然可以循环执行此操作（强烈推荐；））。

你这样做的方式，你只是暂时再次创建大字符串，然后将它传递给`println()`，这与第一个问题相同。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-29T12:43:13.847

[绳索：理论与实践](http://www.ibm.com/developerworks/java/library/j-ropes/)

为什么以及何时使用 Ropes for Java 进行字符串操作

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-29T12:05:24.430

您可以将 823K 文件读入字符串。也许不是最优雅的方法，但完全可行。方法3应该有效。有一个 XML 错误，但这与从文件读取到字符串或数据长度无关。

但是，它必须是一个外部文件，因为它太大而无法内联到类文件中（这些文件有大小限制）。

我推荐 Commons IO [FileUtils#readFileToString](http://commons.apache.org/io/apidocs/org/apache/commons/io/FileUtils.html#readFileToString%28java.io.File,%20java.lang.String%29)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-29T12:08:06.577

您必须处理[ByteArrayOutputStream](http://docs.oracle.com/javase/6/docs/api/java/io/ByteArrayOutputStream.html)而不是自身的 String。如果您想在 http 响应中发送您的字符串，您所要做的就是从该 byteArray 流中读取并写入响应流，如下所示：

```
ByteArrayOutputStream baos = new ByteArrayOutputStream(8232237);
baos.write(constant1.getBytes());
baos.write(constant2.getBytes());
...
baos.writeTo(response.getOutputStream()); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-29T12:07:50.650

问题 1) 和 2) 都是由于相同的基本问题。字符串文字（或常量字符串表达式）不能超过 65535 个字符，因为类文件格式中的字符串常量有硬性限制。

第三个问题听起来像是您实现它的方式中的一个错误，而不是一个基本问题。事实上，听起来您正在尝试将 XML 作为 DOM 加载，然后对其进行解析（这是不必要的），并且您设法在此过程中破坏了 XML。（或者它可能在您尝试读取的文件中被破坏......）

简单而优雅的解决方案是将内容保存在文件中，然后以纯文本形式读取。

或者......不太优雅，但同样有效：

```
 String[] strings = new String[](
        "longString1",
        "longString2",
        ...
        "longStringN"};

   for (String str : strings) {
       out.write(str);
   } 
```

当然，将测试数据嵌​​入为字符串文字的问题在于，您必须转义字符串中的某些字符才能让编译器满意。如果您必须手动完成，那将很乏味。

# android - 从 Android 源代码构建/查找共享库

> ID：10798770
> 
> 赞同：4
> 
> 时间：2012-05-29T12:02:22.883
> 
> 标签：android, android-ndk, java-native-interface, shared-libraries, rtp

我希望将版本 3.1（Honeycomb）中引入的 Android RTP API 反向移植到早期版本。我下载了 4.0 版本的源代码，发现这些 API 既有 java 又有原生代码。为了使用 NDK 构建本机代码，需要某些共享库。
根据 Android.mk 文件，它们是`libnativehelper`、`libcutils`、`libutils`和`libmedia`。尽管所有这些的源代码都存在于源代码中，但构建它们却很困难。每个都需要许多其他共享库。例如，`libmedia`需要这些共享库：`libui`, `libcutils`, `libutils`, `libbinder`, `libsonivox`, `libicuuc`, `libexpat`, `libcamera_client`, `libstagefright_foundation`,`libgui`和 `libdl`.

所以我的问题是，有没有办法获得原来的 4 个共享库？它是否涉及构建整个源？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T08:28:41.367

假设我需要构建一段将使用标准 Android 共享库（例如`libutils`、`libcutlis`、`libmedia`. 我将执行以下步骤：

1.  `AOSP`使用目标版本安装存储库。
2.  将我的源代码添加到`./frameworks/base`.
    在您的情况下，创建一个单独的文件夹并正确放置可能会更容易`Android.mk`。
3.  如果这些标准共享库中所需的函数在以前的版本中不存在，您可能会遇到编译错误。
4.  当您将代码构建为其中的一部分时`AOSP`，它将构建所需的库并自动为您链接它们。

PS 要做到这一点，您最好使用基于 Linux 的构建主机。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T12:07:16.940

使用 cygwin 终端，构建本机部分，即 jni 文件夹。要使用 cygwin 构建，请使用 cygdrive 命令转到 jni 文件夹。然后键入 ndk-build。成功完成后，将在 libs 文件夹中创建共享库，即 .so 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T07:33:57.140

我可以理解您的问题，您可以从设备或模拟器的 /system/lib 中提取库。但是你需要一个系统权限。但是您可以通过安装应用程序来做到这一点。否则在 linux 平台上构建你的源代码。构建过程非常简单，只需使用 2 或 3 个命令。第一次需要很长时间来构建。之后你需要很短的时间来构建，它只会根据修改代码的时间戳来构建。 [请看这里](http://source.android.com/source/building.html)

# .net - 在 XML 文档中使用指向方法参数的链接会导致 SandCastle 生成的帮助文件中的链接断开

> ID：10798773
> 
> 赞同：1
> 
> 时间：2012-05-29T12:02:25.823
> 
> 标签：.net, xml, documentation, sandcastle

当指向方法的参数时，我在正确解析`<see cref=""/>`标记中的链接时遇到问题。`<see>`

这是一个例子：

```
<summary>
My method.
</summary>
<param name="arg1">Arg1</param>
<param name="arg2">Arg2</param>
<exception cref="ArgumentNullException">Either <see cref="arg1"/>
or <see cref="arg2"/> is <c>null</c></exception>
public void MyMethod(object arg1, object arg2)
{
  // code here...
} 
```

生成 XML 文档文件后，两个标签都被转换为：

```
<see cref="!:arg1"/>
<see cref="!:arg2"/> 
```

当 SandCastle 从上述 XML 文件生成帮助文件时，会出现以下警告：

```
Warn: ResolveReferenceLinksComponent2: Unknown reference link target '!:arg1'
Warn: ResolveReferenceLinksComponent2: Invalid reference link target '!:arg1'
Warn: ResolveReferenceLinksComponent2: Unknown reference link target '!:arg2'
Warn: ResolveReferenceLinksComponent2: Invalid reference link target '!:arg2' 
```

毕竟输出帮助文件包含到 arg1 和 arg2 的断开链接。

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T12:37:54.633

<see> 标签不用于引用参数。请改用[<paramref>](http://msdn.microsoft.com/en-us/library/wb7x2fhw.aspx)。

# java - 将对象附加到 .txt 文件

> ID：10798782
> 
> 赞同：-1
> 
> 时间：2012-05-29T12:03:24.973
> 
> 标签：java, objectoutputstream

我正在尝试在“序列化”一章末尾的练习中给出的程序。

该程序要求我声明一个 Person 类，它只封装了 Name 和 Address 类型的两个数据成员，它们也是类。然后我必须从键盘上获取一系列名称和地址，创建对象并将它们写入文件。但是，如果文件已经存在，则必须将对象附加到现有文件中。我的程序第一次运行完美，但第二次，当我尝试回读附加记录时，我得到一个异常

```
java.io.StreamCorruptedException: invalid type code: AC 
at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1374) 
at java.io.ObjectInputStream.readObject(ObjectInputStream.java:369) 
at Trial.main(Trial.java:66) 
```

我对此进行了一些研究，发现 StreamHeader 只能编写一次并且附加会破坏它。有什么办法吗？？？
**对象编写代码是：**

```
try(ObjectOutputStream stream = new ObjectOutputStream(new BufferedOutputStream(Files.newOutputStream(filePath,WRITE,CREATE,APPEND)))) {
        for(int i = 0;i<name.length;i++) {
            Person aPerson = new Person(name[i],address[i]);
            System.out.println(aPerson);
            stream.writeObject(aPerson);
            stream.reset();
            aPerson = null;
        }
        System.out.println("Writing Complete"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T12:10:32.527

是的，我自己以前也遇到过这个问题……不幸的是，这是不可能的。

您可以做的是将您的对象放入一个列表并一次保存完整列表。由于列表是一个对象，它可以很容易地持久化。我知道这很糟糕，因为这需要将全部内容读入内存，但据我所知，这是唯一的方法。

另一种选择（我推荐）是您使用像 JSON 这样的东西来提交您的数据。GSon 非常适合此目的。然后，您可以简单地编组和解组可以提交到文本文件的对象。这很容易做到，因为无论哪种方式都需要一行代码（对象到 JSon-string，反之亦然）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T12:20:13.333

这行得通。所以调试你的程序，看看为什么它没有。应该不会打电话`reset()`

```
public class ClassTest {

    public static void main(String a[]) throws Exception {
        ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream("c:/temp/foo.txt"));
        oos.writeObject(new Test("foo", "bar"));
        oos.writeObject(new Test("baz", "brr"));
        oos.close();

        ObjectInputStream ois = new ObjectInputStream(new FileInputStream("c:/temp/foo.txt"));
        System.out.println(ois.readObject());
        System.out.println(ois.readObject());
        ois.close();
    }
}

class Test implements Serializable {
    private String fld1;
    private String fld2;
    public Test(String v1, String v2) {
        this.fld1 = v1;
        this.fld2 = v2;
    }

    @Override
    public String toString() {
        return "Test [fld1=" + fld1 + ", fld2=" + fld2 + "]";
    }
} 
```

# performance-testing - 在手动测试应用程序时分析服务器响应

> ID：10798784
> 
> 赞同：0
> 
> 时间：2012-05-29T12:03:37.150
> 
> 标签：performance-testing, manual-testing, server-response

我有一个 Web 应用程序，我必须从该应用程序的服务器响应中测量性能，同时在几台机器上手动测试它。

我该怎么做。在多台机器上执行手动测试时，我们是否有任何工具来测量 Web 应用程序的服务器响应时间。

谢谢，
Udhay S

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-18T11:04:51.070

乌德海，

JMETER 为您提供了所有必要的性能图表，您可以从中获取服务器响应。它易于使用，您可以增加负载来测试服务器响应。在 JMETER 中，您有一个报告列表 - 聚合图、Spline Visualizer 图和解释服务器响应的摘要报告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T12:42:53.270

秒表？说真的，如果您正在运行手动测试，那么记录页面加载所需时间的最佳、最准确和最纯粹主观的方法*是*使用连接到人脑的秒表。直到有人可以发明一台可以通过图灵测试的计算机，这已经是最好的了。

如果你觉得你需要自动化，那么首先自动化测试，然后考虑自动化记录响应时间。

# jquery - ajax后onclick jquery菜单不起作用

> ID：10798790
> 
> 赞同：3
> 
> 时间：2012-05-29T12:03:54.663
> 
> 标签：jquery, css, ajax

遇到一些 jquery 和 ajax 的问题。基本上用户通过ajax形式登录。该表单位于 jquery onclick 下拉菜单中，该菜单也用于购物车菜单（只是更改了命名代码（css + jquery），因此不会相互冲突，并且两者都可以正常工作，直到用户登录（通过 ajax））。

这是下面的jquery代码

```
//////Cart App
jQuery(".dropdown-cart dt a").click(function() {
        // Change the behaviour of onclick states for links within the menu.
    var toggleId = "#" + this.id.replace(/^link/,"ul");

        // Hides all other menus depending on JQuery id assigned to them
    jQuery(".dropdown-cart dd ul").not(toggleId).hide();

        //Only toggles the menu we want since the menu could be showing and we want to hide it.
    jQuery(toggleId).toggle();

        //Change the css class on the menu header to show the selected class.
    if(jQuery(toggleId).css("display") == "none"){
        jQuery(this).removeClass("selected");
    }else{
        jQuery(this).addClass("selected");
    }
});

jQuery(".dropdown-cart dd ul li a").click(function() {

    // This is the default behaviour for all links within the menus
    var text = jQuery(this).html();
    jQuery(".dropdown-cart dt a span").html(text);
    jQuery(".dropdown-cart dd ul").hide();

});

jQuery(document).bind('click', function(e) {

    // Lets hide the menu when the page is clicked anywhere but the menu.
    var $clicked = jQuery(e.target);
    if (! $clicked.parents().hasClass("dropdown-cart")){
        jQuery(".dropdown-cart dd ul").hide();
            jQuery(".dropdown-cart dt a").removeClass("selected");
        }

}); 
```

我已经尝试了一些 .live 组合，甚至 .delgate 但在用户登录后仍然登录和购物车 onclick 菜单在页面刷新之前不起作用

有任何想法吗？？

欢呼 nz 战士

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T12:14:26.653

我想一旦用户通过 ajax 登录，您就会更新锚标签。所以你之前注册的事件绑定（点击事件）会丢失。您应该使用 jQuery[`on`](http://api.jquery.com/on/)进行绑定而不是单击

这段代码

```
jQuery(".dropdown-cart dt a").click(function() {
     //remaining code   
}); 
```

应该改为

```
$(document).on("click",".dropdown-cart dt a",function() {
    //remaining code   
}); 
```

jquery`on`适用于当前元素和未来元素，可从 jQuery 1.7+ 版本获得。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T12:21:41.847

代替：

```
$(".dropdown-cart dt a").click(function(){}) 
```

和：

jQuery 1.7+

```
$(".dropdown-cart").on("click","dt a", function(){}) 
```

jQuery 1.4.3+

```
$(".dropdown-cart").delegate("dt a", "click", function(){}) 
```

jQuery 1.3+

```
$(".dropdown-cart dt a").live("click",function(){}) 
```

在这种情况下，您不需要绑定新的 ajax 加载组件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T12:14:19.127

尝试这个

将代码包装成 a并使用事件`function`在您的 html 标记中调用该函数`onclick`

```
onclick='function_name(this)' --> in your html tag

function function_name(element){
   //your code here
} 
```

# c# - 如果我们继承一个类，私有变量也会被继承吗？

> ID：10798791
> 
> 赞同：0
> 
> 时间：2012-05-29T12:04:04.090
> 
> 标签：c#, oop

如果我们继承一个类，私有变量也会被继承吗？

我知道“*是的，变量是继承的，但不能通过类接口直接访问。* ”

**我想知道的是我们如何从子类访问私有变量/方法**

*我想说的是私有成员也是继承的。但是如何在不保护它们的情况下访问它们。*

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-29T12:05:26.563

> 我知道“是的，变量是继承的，但类接口不能直接访问”。

那么你就知道答案了。

> 我想知道的是我们如何从子类访问私有变量/方法

你不能，这就是为什么他们是`private`（而不是说，`protected`）。制作它们的全部*目的*`private`是让您无法从*任何地方*访问它们，特别是包括子类。

明确打破这种封装几乎总是设计损坏的标志，不应该成为正常代码流的一部分。但是，在某些情况下，您需要*对*某些代码进行推理，在这些情况下，甚至可能需要检查私有值。反射库允许这样做。`System.Reflection`这是一个使用这些功能的简单示例：

```
class Widget {
    private readonly string identifier;

    public Widget(string identifier) {
        this.identifier = identifier;
    }
}

class MainClass {
    public static void Main(string[] args) {
        var widget = new Widget("my_test_widget");

        var type = widget.GetType();
        var field = type.GetField("identifier",
                                  System.Reflection.BindingFlags.Instance |
                                  System.Reflection.BindingFlags.NonPublic);

        Console.WriteLine($"{field} = {field.GetValue(widget)}");
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-29T12:06:02.967

让他们受到保护。对于变量，创建一个子类然后使用的受保护属性。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-29T12:07:28.013

您只能使用[反射](https://stackoverflow.com/questions/135443/how-do-i-use-reflection-to-invoke-a-private-method-in-c)从派生类访问私有变量/方法。您不能以“自然”的方式访问它们，因为制作它们的全部`private`目的是对其他类（包括派生类）隐藏它们。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-29T12:05:27.393

使其成为`protected`财产而不是`private`成员。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-29T12:07:46.583

> 我想知道的是我们如何从子类访问私有变量/方法......但是如何在不保护它们的情况下访问它们。

您可能想尝试使用[反射](http://msdn.microsoft.com/en-us/library/ms173183%28v=vs.80%29.aspx)：
这是一个[类似的问题/答案](https://stackoverflow.com/a/686623/1379664)，解释了如何做到这一点。

# javascript - req.files.upload.length 为零时返回文件计数，或上传多个文件时，上传一个文件时返回文件大小

> ID：10798792
> 
> 赞同：0
> 
> 时间：2012-05-29T12:04:04.990
> 
> 标签：javascript, node.js, express

在这个循环中，“req.files.upload.length”在 0 时返回文件计数，或者上传多个文件，但是当上传一个文件时，“req.files.upload.length”返回文件大小。为什么？

上传处理程序：

```
app.post('/upload', function(req, res){
    console.log('file count: ' + req.files.upload.length);
    var file;
    var i = 0;
    for(var x = 0; x < req.files.upload.length; x++){
        file = req.files.upload[x];
        console.log(file.name + ' (' + (file.size * 0.0009765625).toFixed(0) + ' kB, ' + file.type + ')');
    };
    console.log(req.files.upload.length + ' files uploaded to server');
    res.redirect('/forms');
}); 
```

当我上传一个文件时，我收到此错误：

```
TypeError: Cannot read property 'name' of undefined
    at /Users/frode/Dropbox/Nettsider/expressmal/app.js:296:20
    at callbacks (/Users/frode/Dropbox/Nettsider/expressmal/node_modules/express/lib/router/index.js:272:11)
    at param (/Users/frode/Dropbox/Nettsider/expressmal/node_modules/express/lib/router/index.js:246:11)
    at pass (/Users/frode/Dropbox/Nettsider/expressmal/node_modules/express/lib/router/index.js:253:5)
    at Router._dispatch (/Users/frode/Dropbox/Nettsider/expressmal/node_modules/express/lib/router/index.js:280:4)
    at Object.handle (/Users/frode/Dropbox/Nettsider/expressmal/node_modules/express/lib/router/index.js:45:10)
    at Context.next (/Users/frode/Dropbox/Nettsider/expressmal/node_modules/express/node_modules/connect/lib/http.js:204:15)
    at Context.<anonymous> (/Users/frode/Dropbox/Nettsider/expressmal/node_modules/passport/lib/passport/context/http/actions.js:64:8)
    at SessionStrategy.pass (native)
    at /Users/frode/Dropbox/Nettsider/expressmal/node_modules/passport/lib/passport/strategies/session.js:48:12
URIError: URI malformed
    at /Users/frode/Dropbox/Nettsider/expressmal/node_modules/express/node_modules/connect/lib/middleware/static.js:119:14
    at Object.static [as handle] (/Users/frode/Dropbox/Nettsider/expressmal/node_modules/express/node_modules/connect/lib/middleware/static.js:60:5)
    at next (/Users/frode/Dropbox/Nettsider/expressmal/node_modules/express/node_modules/connect/lib/http.js:204:15)
    at pass (/Users/frode/Dropbox/Nettsider/expressmal/node_modules/express/lib/router/index.js:219:24)
    at Router._dispatch (/Users/frode/Dropbox/Nettsider/expressmal/node_modules/express/lib/router/index.js:280:4)
    at Object.handle (/Users/frode/Dropbox/Nettsider/expressmal/node_modules/express/lib/router/index.js:45:10)
    at Context.next (/Users/frode/Dropbox/Nettsider/expressmal/node_modules/express/node_modules/connect/lib/http.js:204:15)
    at Context.<anonymous> (/Users/frode/Dropbox/Nettsider/expressmal/node_modules/passport/lib/passport/context/http/actions.js:64:8)
    at SessionStrategy.pass (native)
    at /Users/frode/Dropbox/Nettsider/expressmal/node_modules/passport/lib/passport/strategies/session.js:48:12 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T12:23:11.440

在 Express/Connect 中，`req.files`将以`input[type=file]` `name`属性为键，内容为值的对象。如果有多个`input[type=file]`相同的`name`，它将是一个数组。如果您控制视图，即带有 的网页`form`，您应该能够为每个文件输入拥有唯一的名称，或者知道您有多个名称为“upload”。

**更新：**我没有想到最明显的情况，即用户选择了多个文件。

**更新：**以下是`req.files`两种不同情况的情况：

1.  一个文件：

    ```
    req.files = {
      upload: {
        name: 'foo.txt'
        length: 1024
      }
    } 
    ```

2.  两个文件：

    ```
    req.files = {
      upload: [
        {
          name: 'foo.txt'
          length: 1024
        },
        {
          name: 'bar.txt'
          length: 2048
        }
      ]
    } 
    ```

从这个例子中应该很清楚，在任何一种情况下`req.files.upload`都会有一个`length`属性，但是你已经发现它们意味着不同的东西。

在任何情况下，您都可能希望遍历数组，以简化您自己的代码。这很容易实现`[].concat`：

```
// Make sure that files is always an array
var files = [].concat(req.files.upload);
for(var x = 0; x < files.length; x++){
    file = files[x];
    // ...
} 
```

# php - 如果禁用 cookie，如何使工作 Zend 框架会话？

> ID：10798795
> 
> 赞同：0
> 
> 时间：2012-05-29T12:04:23.823
> 
> 标签：php, zend-framework, zend-session-namespace

我开始与

```
$sess = new Zend_Session_Namespace('MySession'); 
```

并且会话工作正常，但是`cookies`在浏览器中禁用时会出现问题。我有一个很大的应用程序，那么让它在无 cookie 环境中工作的最佳解决方案是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T14:33:40.163

您可以将 session.use_only_cookies 设置为“0”并将会话 ID 附加到代码中的 URL，因此每个链接或重定向都会在 URL 中附加类似于“session_id=4b5fe6a4019a8cd7fc4326664e9e03ae”的内容。

这种方法有很多问题，最大的一个问题是，如果用户决定共享一个 URL，比如说在 Facebook 中，他/她会从浏览器中复制整个 url（包括会话 ID），并且单击该链接的每个人都会捕获用户的会话。

看看[这个](http://framework.zend.com/manual/en/zend.session.global_session_management.html#zend.session.global_session_management.session_identifiers)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T14:40:22.717

您可以在登录页面上显示需要 cookie 的警告，而不是支持无 cookie 的浏览器。如今，许多 Web 应用程序强制您启用 cookie。

```
// make sure cookies are enabled
$.cookie('test_cookie', 'cookie_value', { path: '/' });
if ($.cookie('test_cookie') != 'cookie_value') {
    noty({"text":"Cookies must be enabled to log in. <a href='http://support.google.com/accounts/bin/answer.py?hl=en&answer=61416' class='noty_link'>Click here to learn how to enable cookies.</a>","layout":"top","type":"error","textAlign":"center","easing":"swing","animateOpen":{"height":"toggle"},"speed":500,"closable":false, "closeOnSelfOver":false, "timeout":"", "closeOnSelfClick":false});
} 
```

此代码片段使用 jquery.cookie.js (https://github.com/carhartl/jquery-cookie) & noty (http://needim.github.com/noty/) 插件插件

# php - 带有utf8希伯来字母的jquery自动完成

> ID：10798796
> 
> 赞同：2
> 
> 时间：2012-05-29T12:04:39.927
> 
> 标签：php, utf-8, jquery-autocomplete

我已经像这样设置了 jquery 的自动完成功能：

```
<script>
$(document).ready(function() {
     $( "input#Filter" ).autocomplete({
            source: ["בזן", "גאבה", "אוהד", "יוסי", "שחקן"], 
            minLength: 2,
        });
});
</script> 
```

它有效！

但我需要从另一个 php 文件中获取数据，所以我使用了这个

```
<script>
$(document).ready(function() {
     $( "input#Filter" ).autocomplete({
            source: "autocomplete.php?file=<?echo $newest?>", 
            minLength: 2,
        });
});
</script> 
```

让我们说 autocomplete.php 就像

```
header("Content-type: application/json; charset=utf-8");
echo json_encode('["אא", "בבבאאא", "גגגאאא"]');
// tried also echo '["אא", "בבבאאא", "גגגאאא"]'; 
```

没用。在各种论坛中寻找了许多解决方案。要么显示为jibrish，要么自动完成显示整个数组，无论我在文本框中输入什么。

看起来是编码问题。。

我的两个文件都保存为“ANSI AS UTF-8”。

谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T12:10:54.473

> 首先，我对这个自动完成插件没有太多经验 - 这些只是我脑海中的一些想法......

我认为这里的问题是您的 PHP 文件正在返回一个 JSON 对象，实际上 autcomplete 插件需要一个 JavaScript 数组。我假设这是因为`source`您传递给插件的参数...它只是一个普通数组...

你可能想尝试的是这样的 -

```
header("Content-Type: text/plain; charset=utf-8");
echo '["אא", "בבבאאא", "גגגאאא"]';
exit(); 
```

* * *

如果这不是问题并且 autcomplete 插件确实想要获得 JSON 响应，那么您可以尝试在编码为 JSON 之前将您的数据包装在一个普通的 PHP 数组中 -

```
header("Content-type: application/json; charset=utf-8");
$names = array(
  'ליאור',
  'עידו',
  'בן'
);
echo json_encode($names);
exit(); 
```

请记住，`exit()`在您回显您的 JSON 数据后，以防止任何其他输出弄乱 JSON 格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T09:58:52.200

我有一个类似的问题，我设法解决了它。有关详细信息，请参阅我的[问题](https://stackoverflow.com/questions/11393727/jquery-autocomplete-not-returning-results-with-e/11737498#11737498)。简而言之：将 source: "autocomplete.php?file=", 更改为 source: "autocomplete.php?file= **encodeURI** ()",

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T12:10:28.440

试试这个 autocomplete.php：

```
<html>
    <head>
        <meta charset="utf8">
    </head>
    <body>
        <?php echo json_encode('["אא", "בבבאאא", "גגגאאא"]');?>
    </body>
</html> 
```

# windows - GetRawInputDeviceInfo 在 Windows XP 中返回错误的 USB HID 设备名称语法

> ID：10798798
> 
> 赞同：4
> 
> 时间：2012-05-29T12:04:41.340
> 
> 标签：windows, winapi, usb, raw-input

我`GetRawInputDeviceInfo`用来获取 USB HID 设备名称的设备名称。

`\??\`出于某种原因，当我在 Windows XP 下运行我的代码时，我得到一个以而不是开头的设备名称`\\?\`。

这当然意味着，当我尝试使用此设备名称时（`CreateFile`例如“它不起作用。如果我编辑设备名称并手动修复它以使`\\?\`一切正常。

这在 Windows 7 中不会发生。在 Win7 中一切正常。

`GetLastError`我还在每次 API 调用后进行测试，并且没有发生错误。

我所有的操作系​​统都是 32 位的，我的项目是用 unicode 编译的。

任何建议我做错了什么？这是我的控制台应用程序中获取设备名称的代码片段。

```
nResult = GetRawInputDeviceInfo( pDeviceList[i].hDevice, RIDI_DEVICENAME, NULL, &nBufferSize );
if( nResult < 0 )
{
cout << "ERR: Unable to get Device Name character count.." << endl;
return false;
}
WCHAR* wcDeviceName = new WCHAR[ nBufferSize + 1 ];
if( wcDeviceName == NULL )
{
cout << "ERR: Unable to allocate memory for Device Name.." << endl;
return false;
}
nResult = GetRawInputDeviceInfo( pDeviceList[i].hDevice, RIDI_DEVICENAME, wcDeviceName, &nBufferSize );
if( nResult < 0 )
{
cout << "ERR: Unable to get Device Name.." << endl;
delete [] wcDeviceName;
return false;
}
wcDeviceName[1]='\\';
//This is the manual fix for the device name in WinXP. How do I get rid of it????
pDesc->hHandle = CreateFile(wcDeviceName, GENERIC_READ|GENERIC_WRITE, FILE_SHARE_READ|FILE_SHARE_WRITE, NULL, OPEN_EXISTING, NULL, NULL);
...

... 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T13:00:25.947

你没有做错任何事。

只需将第二个字符更改为即可`\`。您看到的是原生形式的原始设备路径 ( `\??\...`)。当您拥有`\\?\`作为拐杖 MS 发明的表单时，尽管 Win32 子系统对`\??`对象目录的限制，但当 NT 到达时，它可以在 Win32 上提供长路径名。

请阅读 Russinovich 的“Windows Internals”的几章（任何旧版本都可以）并使用 Sysinternals 的 winobj.exe 来探索 Windows 的对象命名空间，看看我在说什么。

旁注：当您调用`CreateFile`代码时，`kernel32.dll`将在本机函数看到路径之前撤消建议的更改并将其转换回其本机形式。所以你所做的就是让 Win32 层理解路径。

# java - 在使用 DefaultHandler 的字符函数将 XML 数据读入 Android 应用程序时需要帮助

> ID：10798800
> 
> 赞同：0
> 
> 时间：2012-05-29T12:04:45.003
> 
> 标签：java, android, xml

这是我的 XML 代码，我想从中读取我的 android 应用程序的图标标签。我正在使用 DefaultHandler 来读取 XML。我尝试使用字符功能，但它不起作用。所以请你帮忙。

```
<Screens>
<Elements>
<Screen>ABC</Screen>
<Item id="100">
<name>addr</name>
<type>abc</type>
<icon>xyz.png</icon>
<title>Map</title>
</Item>
</Elements>
</Screens> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T12:37:57.843

```
@Override
public void startElement(String uri, String localName, String qName,
    Attributes attributes) throws SAXException {
// TODO Auto-generated method stub
sb=new StringBuilder();
if(localName.equals("icon"))
{
    iconflag=true;
}
}

@Override
public void characters (char ch[], int start, int length) {
if (sb!=null && iconflag == true) {
    for (int i=start; i<start+length; i++) {
        sb.append(ch[i]);
    }
}
}

@Override
public void endElement(String uri, String localName, String qName)
    throws SAXException {
// TODO Auto-generated method stub
if(iconflag)
{
    info.setIcon(sb.toString().trim());
    iconflag=false;
}
} 
```

这就是解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T12:26:56.557

这可以通过使用 xstream 来实现。它的实现非常简单。您只需要为上述 xml 创建一个类层次结构，您就可以轻松地访问此 xml 文件中的任何元素。请阅读以下 2 分钟教程：http: [//x-stream.github.io/tutorial.html](http://x-stream.github.io/tutorial.html)

# c# - 按日期排序 ObservableCollection

> ID：10798802
> 
> 赞同：2
> 
> 时间：2012-05-29T12:04:50.967
> 
> 标签：c#

我有一个收藏

```
private ObservableCollection<ContentItemViewModel> _contentTree;
        public ObservableCollection<ContentItemViewModel> ContentTree
        {
            get { return _contentTree; }
        } 
```

类 ContentItemViewModel 具有属性：

```
 private string _published;
        public string Published
        {
            get
            {
                return _published;
            }
            set
            {
                _published = value;

                NotifyPropertyChanged("Published");
            }
        } 
```

那是 - `node.Published= Convert.ToDateTime(date.Value).ToString("dd MMM yyyy", new DateTimeFormatInfo());`

我需要按日期对 ContentTree 集合进行排序吗？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T12:19:04.603

我不知道是否有更好的方法，但您可以执行以下操作。这里的想法是创建一个有序列表和有序列表中的第一个 foreach 项目，从内容树中删除并重新添加相关项目。

```
var tempList = _contentTree.OrderBy(p => DateTime.Parse(p.DateAndTime)); 

tempList.ToList().ForEach(q =>
            {
                _contentTree.Remove(q);
                _contentTree.Add(q);
            }); 
```

或者您可以使用比较；

```
Comparison<ContentItemViewModel> comparison = new Comparison<ContentItemViewModel>(
            (p,q) =>
            {
                DateTime first = DateTime.Parse(p.DateAndTime);
                DateTime second = DateTime.Parse(q.DateAndTime);
                if (first == second)
                    return 0;
                if (first > second)
                    return 1;
                return -1;
            });

        List<ContentItemViewModel> tempList = _contentTree.ToList();
        tempList.Sort(comparison);
        _contentTree = new ObservableCollection<ContentItemViewModel>(tempList); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-25T07:19:20.493

你可以使用这个：

```
ConceptItems = new ObservableCollection<DataConcept>(ConceptItems.OrderBy(i => i.DateColumn)); 
```

# sqlite - SQLite 处理 NULL

> ID：10798808
> 
> 赞同：4
> 
> 时间：2012-05-29T12:05:18.647
> 
> 标签：sqlite, null

我有一个类似的 SQL 查询

```
SELECT * FROM tableName WHERE colName != 'contents' 
```

现在与我的预期相反，这似乎与内容为“NULL”的 colName 不匹配。看看[SQLite 如何处理 NULL](http://www.sqlite.org/nulls.html)，特别是这个条件`"null OR true" is true`对于 SqlLite 是正确的，我原以为我的查​​询足以选择带有`NULL`for的行`colName`。我一定理解错了。任何人都可以为我阐明这一点吗？我可以用

```
SELECT * FROM tableName WHERE (colName != 'contents' OR colName IS NULL) 
```

但我不认为我必须这样做。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T12:11:17.033

您可以通过使用`IS NOT`而不是`!=`. 如果您查看[本文档的操作符部分，](http://www.sqlite.org/lang_expr.html)您会看到：

> IS 和 IS NOT 运算符的工作方式与 = 和 != 类似，除非其中一个或两个操作数为 NULL。在这种情况下，如果两个操作数都为 NULL，则 IS 运算符的计算结果为 1（真），而 IS NOT 运算符的计算结果为 0（假）。如果一个操作数为 NULL 而另一个不是，则 IS 运算符的计算结果为 0（假）并且 IS NOT 运算符为 1（真）。**IS 或 IS NOT 表达式不可能计算为 NULL。**运算符 IS 和 IS NOT 与 = 具有相同的优先级。

我自己对此进行了测试：

```
sqlite> create table temp( dataColumn, nullColumn );
sqlite> insert into temp( dataColumn, nullColumn ) values ( 'test', NULL );
sqlite> select * from temp where nullColumn != 'test';
sqlite> select * from temp where nullColumn IS NOT 'test';
test|
sqlite> select * from temp where dataColumn IS NOT 'test';
sqlite> 
```

从更多的游戏来看，当你使用它来比较某些东西时，`!=`运算符似乎*会*评估为：`NULL``NULL`

```
sqlite> select ( 'contents' != NULL );

sqlite> select ( 'contents' == NULL );

sqlite> select ( 'contents' IS NULL );
0
sqlite> select ( 'contents' IS NOT NULL );
1 
```

大概这就是为什么你没有得到你期望的行为 - 你实际上是在说`WHERE NULL != 'contents'`哪个评估为 NULL，并且不满足 WHERE 子句

# ruby - 要反对的字符串？

> ID：10798809
> 
> 赞同：0
> 
> 时间：2012-05-29T12:05:23.103
> 
> 标签：ruby, datamapper

考虑以下代码：

我从 datamapper 收到一个对象，其中包含我选择的值：

```
user = User.first()
puts user.name
# John
puts user.surname
# Doe
puts user.age
# 42 
```

在用户定义的数组中，我有一个显示这些值的顺序

```
dataordering = ["age", "surname", "name"] 
```

那么如何让我的值在我的数组中排序？

```
dataordering.each do |sequence|
  puts user.sequence
  # this, of course, fails
end 
```

我不想使用 eval()。不。

也许还有更好的方法来存储值的顺序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T12:17:38.913

您可以通过这种方式从记录中选择值：

```
user_attributes = user.attributes

dataordering.each do |attribute|
  puts user_attributes[attribute.to_sym]
end 
```

或使用`send`方法：

```
dataordering.each do |attribute|
  puts user.send attribute.to_sym
end 
```

作为订购解决方案，我可以为您提供以下代码：

```
dataordering.map { |attr| user.send attribute.to_sym } 
```

# c# - 如何将包含 IEnumerable 模型（复杂）的模型从视图 C# MVC3 传递到控制器中？

> ID：10798823
> 
> 赞同：5
> 
> 时间：2012-05-29T12:05:54.917
> 
> 标签：c#, asp.net-mvc-3, forms, model

我浏览了该网站上的其他问题和答案，但找不到我需要的答案。

我有一个 StudentRecord 实体：

```
public class StudentRecord : Persistent {
        public virtual string LastName { get; set; }
        public virtual string FirstName { get; set; }
        public virtual DateTime Dob { get; set; }
        public virtual int StudentRef { get; set; }
        public virtual IEnumerable<StudentAddress> Addresses { get; set; }
        public virtual StudentAddress Address { get; set; }
        public virtual string Notes { get; set; }
    } 
```

如您所见，它包含一个 StudentAddress 实体以及一个 StudentAddress 的 IEnumerable：

```
public class StudentAddress: Persistent {
        public virtual int StudentRef { get; set; }
        public virtual string Addressee { get; set; }
        public virtual string Property { get; set; }
        public virtual string District { get; set; }
        public virtual string PostalTown { get; set; }
        public virtual string County { get; set; }
        public virtual string Postcode { get; set; }
    } 
```

我正在将学生记录传递给包含在视图模型中的视图：

```
public class UserViewModel {
        public StudentRecord Student;      
        public ICurrentUserService CurrentUserService;
        public ParentUser ParentUser;        
    } 
```

然后在表单中显示它以便可以对其进行编辑，并提交表单将 StudentRecord 传递回控制器。除了 StudentRecord 中的地址为空外，一切正常。如果添加了新地址，StudentRecord 中的单个 StudentAddress 也可以正常工作。

是否可以编辑地址并将其发送回控制器，或者我是否需要将它们以单独的形式放在单独的页面上？我可以做到这一点，但更愿意将它们合二为一。

我的问题可能是不可能，或者可能是我将地址放入表单的方式。一个学生可能有多个地址。

这是表格：（为了清楚起见，我删除了一些 html 布局。“添加另一个地址”复选框显示带有 jquery 的新学生地址部分。）

```
@using (Html.BeginForm()) {
    Personal Details
    Full Name: @Html.TextBoxFor(x => x.Student.FirstName) @Html.TextBoxFor(x => x.Student.LastName)
    DOB: @Html.TextBoxFor(x => x.Student.Dob)

    @if (Model.Student.Addresses.Any()) {
        // Only print addresses if they exist
            int count = 1;
            int element = 0;
                @if (Model.Student.Addresses.Count() > 1) {
                    foreach (var address in Model.Student.Addresses) {
                        Student Address @count
                        Addressee @Html.TextBoxFor(x => x.Student.Addresses.ElementAt(element).Addressee)
                        Property @Html.TextBoxFor(x => x.Student.Addresses.ElementAt(element).Property)
                        District @Html.TextBoxFor(x => x.Student.Addresses.ElementAt(element).District)
                        Postal Town @Html.TextBoxFor(x => x.Student.Addresses.ElementAt(element).PostalTown)
                        County @Html.TextBoxFor(x => x.Student.Addresses.ElementAt(element).County)
                        Postcode @Html.TextBoxFor(x => x.Student.Addresses.ElementAt(element).Postcode)
                        count++;
                        element++;
                    } //end foreach
                } else {
                    Student Address
                    Addressee @Html.TextBoxFor(x => x.Student.Addresses.ElementAt(0).Addressee)
                    Property @Html.TextBoxFor(x => x.Student.Addresses.ElementAt(0).Property)
                    District @Html.TextBoxFor(x => x.Student.Addresses.ElementAt(0).District)
                    Postal Town @Html.TextBoxFor(x => x.Student.Addresses.ElementAt(0).PostalTown)
                    County @Html.TextBoxFor(x => x.Student.Addresses.ElementAt(0).County)
                    Postcode @Html.TextBoxFor(x => x.Student.Addresses.ElementAt(0).Postcode)
                } @*end if (Model.Student.Addresses.Count() > 1)*@

                Add another address @Html.CheckBox("Add another address", false, new {@id = "newBox"})

                New Student Address
                Addressee @Html.TextBoxFor(x => x.Student.Address.Addressee)
                Property @Html.TextBoxFor(x => x.Student.Address.Property)
                District @Html.TextBoxFor(x => x.Student.Address.District)
                Postal Town @Html.TextBoxFor(x => x.Student.Address.PostalTown)
                County @Html.TextBoxFor(x => x.Student.Address.County)
                Postcode @Html.TextBoxFor(x => x.Student.Address.Postcode)
    } else {
        No address for this student.
    } @*end if (Model.Student.Addresses.Any())*@

    Notes: @Html.TextAreaFor(x => x.Student.Notes, new { @style = "width: 100%;"})

    <input type="submit" value="Send" class="btn btn-primary" style="clear: both;"/>
} @*end of form*@ 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-29T12:33:21.447

问题是`name`文本输入控件的属性不包含正确的值。我邀请您阅读[以下博客文章](http://www.hanselman.com/blog/ASPNETWireFormatForModelBindingToArraysListsCollectionsDictionaries.aspx)，以更好地了解默认模型绑定器用于绑定到集合和字典的约定。

然后我建议您使用编辑器模板而不是在您的视图中编写 foreach 循环：

```
@using (Html.BeginForm()) {
    Personal Details

    @Html.LabelFor(x => x.Student.FirstName, "Full Name:")
    @Html.EditorFor(x => x.Student.FirstName) 
    @Html.EditorFor(x => x.Student.LastName)

    @Html.LabelFor(x => x.Student.Dob, "DOB:")
    @Html.TextBoxFor(x => x.Student.Dob)

    @if (Model.Student.Addresses.Any()) {
        @Html.EditorFor(x => x.Student.Addresses)
    } else {
        <text>No address for this student.</text>
    }

    @Html.LabelFor(x => x.Student.Notes, "Notes:")
    @Html.TextAreaFor(x => x.Student.Notes, new { @style = "width: 100%;"})

    <input type="submit" value="Send" class="btn btn-primary" style="clear: both;"/>
} 
```

然后定义一个自定义编辑器模板，该模板将为 Addresses 集合 ( `~/Views/Shared/EditorTemplates/StudentAddress.cshtml`) 的每个元素自动呈现：

```
@model StudentAddress
@Html.LabelFor(x => x.Addressee, "Addressee")
@Html.EditorFor(x => x.Addressee)

@Html.LabelFor(x => x.Property, "Property")
@Html.EditorFor(x => x.Property)

@Html.LabelFor(x => x.District, "District")
@Html.EditorFor(x => x.District)

@Html.LabelFor(x => x.PostalTown, "Postal Town")
@Html.EditorFor(x => x.PostalTown)

@Html.LabelFor(x => x.County, "County")
@Html.EditorFor(x => x.County)

@Html.LabelFor(x => x.Postcode, "Postcode")
@Html.EditorFor(x => x.Postcode) 
```

但这一切都是静态的。如果您希望能够动态添加和删除地址，我邀请您阅读[以下来自 Steven Sanderson 的博客文章](http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/)，其中他说明了如何使用自定义 HTML 助手为输入字段 ( `Html.BeginCollectionItem`) 生成正确的名称并使用 AJAX添加新行。

# cryptography - 如何在 Visual Studio 2010 中安装 Crypto++5.6.1 库

> ID：10798824
> 
> 赞同：0
> 
> 时间：2012-05-29T12:05:55.657
> 
> 标签：cryptography

任何人都可以展示如何在 Visual Studio 2010 中集成（或安装）crypto++5.6.1 库，以及通过逐步使用该库的一个示例（如果您使用屏幕截图显示会很棒）。提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T12:36:34.643

这里有很好的记录：http: [//cryptopp.com/wiki/Compiling](http://cryptopp.com/wiki/Compiling)，他们也有一个有用的邮件列表。

# c# - 合并多个自定义对象列表的内容 - C#

> ID：10798825
> 
> 赞同：1
> 
> 时间：2012-05-29T12:05:56.937
> 
> 标签：c#, list

我有一个类项目

```
public class Project 
{   public int ProjectId { get; set; }
    public string ProjectName { get; set; }
    public string Customer { get; set; }
    public string Address{ get; set; }
} 
```

我有 3 个列表

```
List<Project> lst1; List<Project> lst2; List<Project> lst3; 
```

`lst1`包含`Person`具有 ProjectId 和 ProjectName 的对象。

`ProjectId =1, ProjectName = "X", Customer = null, Address = null`

`ProjectId =2, ProjectName = "Y", Customer = null, Address = null`

`lst2`包含`Person`具有 ProjectId 和 Customer 的对象

`ProjectId =1,ProjectName = null, Customer = "c1", Address = null`

`ProjectId =2,ProjectName = null, Customer = "c2", Address = null` ， 和

`lst3`包含`Person`具有 ProjectId 和 Address 的对象

`ProjectId = 1, ProjectName = null, Customer =null, Address = "a1"`

`ProjectId = 2, ProjectName = null, Customer =null, Address = "a2"`.

考虑到每个列表中有多个这样的记录，并且 ProjectId 对于每个项目都是唯一的，我如何合并/组合这些列表以获得一个包含合并对象的列表

`ProjectId=1, ProjectName="X", Customer="c1", address="a1"`

`ProjectId=2, ProjectName="Y", Customer="c2", address="a2"`

我发现这些链接相似并尝试使用它但无法满足结果

[使用 linq 从两个对象列表创建列表](https://stackoverflow.com/questions/720609/merge-two-object-lists-with-linq)

[如何使用 LINQ 合并两个列表？](https://stackoverflow.com/questions/4872943/how-to-merge-two-lists-using-linq)

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T14:29:26.883

这可以通过非常简单的多步骤方法完成。首先，定义一个`Func<Project, Project, Project>`来处理实际的记录合并。也就是说，您正在定义一个签名等效于`public Project SomeMethod(Project p1, Project p2)`. 此方法实现了您上面概述的合并逻辑。接下来，我们将列表的元素连接在一起，然后将它们分组`ProjectId`，使用我们的合并委托作为重载中的聚合函数，该函数`GroupBy`接受结果选择器：

```
Func<Project, Project, Project> mergeFunc = (p1,p2) => new Project
    {
        ProjectId = p1.ProjectId,
        ProjectName = p1.ProjectName == null ? p2.ProjectName : p1.ProjectName,
        Customer = p1.Customer == null ? p2.Customer : p1.Customer,
        Address = p1.Address == null ? p2.Address : p1.Address    
    };

var output = lst1.Concat(lst2).Concat(lst3)
                 .GroupBy(x => x.ProjectId, (k, g) => g.Aggregate(mergeFunc)); 
```

这是对上述逻辑以及输出的快速而肮脏的测试：

```
List<Project> lst1; List<Project> lst2; List<Project> lst3;
lst1 = new List<Project> 
    {
        new Project { ProjectId = 1, ProjectName = "P1" },
        new Project { ProjectId = 2, ProjectName = "P2" },
        new Project { ProjectId = 3, ProjectName = "P3" }
    };
lst2 = new List<Project>
    {
        new Project { ProjectId = 1, Customer = "Cust1"},
        new Project { ProjectId = 2, Customer = "Cust2"},
        new Project { ProjectId = 3, Customer = "Cust3"}
    };
lst3 = new List<Project>
    {
        new Project { ProjectId = 1, Address = "Add1"},
        new Project { ProjectId = 2, Address = "Add2"},
        new Project { ProjectId = 3, Address = "Add3"}
    };

Func<Project, Project, Project> mergeFunc = (p1,p2) => new Project
    {
        ProjectId = p1.ProjectId,
        ProjectName = p1.ProjectName == null ? p2.ProjectName : p1.ProjectName,
        Customer = p1.Customer == null ? p2.Customer : p1.Customer,
        Address = p1.Address == null ? p2.Address : p1.Address    
    };

var output = lst1
    .Concat(lst2)
    .Concat(lst3)
    .GroupBy(x => x.ProjectId, (k, g) => g.Aggregate(mergeFunc));

IEnumerable<bool> assertedCollection = output.Select((x, i) => 
    x.ProjectId == (i + 1) 
    && x.ProjectName == "P" + (i+1) 
    && x.Customer == "Cust" + (i+1) 
    && x.Address == "Add" + (i+1));

Debug.Assert(output.Count() == 3);  
Debug.Assert(assertedCollection.All(x => x == true)); 
```

- - 输出 - -

```
IEnumerable<Project> (3 items)   
ProjectId ProjectName Customer Address 
1 P1 Cust1 Add1 
2 P2 Cust2 Add2 
3 P3 Cust3 Add3 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T12:45:42.477

使用查找，您可以这样做：

```
 List<Project> lst = lst1.Union(lst2).Union(lst3).ToLookup(x => x.ProjectId).Select(x => new Project()
        {
            ProjectId = x.Key,
            ProjectName = x.Select(y => y.ProjectName).Aggregate((z1,z2) => z1 ?? z2),
            Customer = x.Select(y => y.Customer).Aggregate((z1, z2) => z1 ?? z2),
            Address = x.Select(y => y.Address).Aggregate((z1, z2) => z1 ?? z2)
        }).ToList(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T12:19:18.027

我假设该列表包含相同数量的项目并按 ProjectId 排序。

```
List<Project> lst1; List<Project> lst2; List<Project> lst3 
```

如果列表未排序，您可以先对其进行排序。

```
list1.Sort(p => p.ProjectId);
list2.Sort(p => p.ProjectId);
list3.Sort(p => p.ProjectId); 
```

用于合并对象

```
List<Project> list4 = new List<Project>();
for(int i=1; i<list.Count; i++)
{ 
    list4.Add(new Project
    {
       ProjectId = list1[i].ProjectId;
       ProjectName = list1[i].ProjectName;
       Customer = list2[i].Customer;
       Address = list3[i].Address;
    });

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-29T12:23:19.410

我相信以下是 LINQ 的`Join`工作原理：

```
var mergedProjects =
    lst1
        .Join(lst2,
            proj1 => proj1.ProjectID,
            proj2 => proj2.ProjectID,
            (proj1, proj2) => new { Proj1 = proj1, Proj2 = proj2 })
        .Join(lst3,
            pair => pair.Proj1.ProjectID,
            proj3 => proj3.ProjectID,
            (pair, proj3) => new Project
            {
                ProjectID = proj3.ProjectID,
                ProjectName = pair.Proj1.ProjectName,
                Customer = pair.Proj2.Customer,
                Address = proj3.Address
            }); 
```

*如果在所有三个列表*`ProjectID`中都找不到 ，这将不会返回任何结果。

 *如果这是一个问题，我认为您最好手动执行此操作而不是使用 LINQ。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-29T12:36:21.470

虽然矫枉过正，但我​​很想将其作为扩展方法：

```
public static List<T> MergeWith<T,TKey>(this List<T> list, List<T> other, Func<T,TKey> keySelector, Func<T,T,T> merge)
{
    var newList = new List<T>();
    foreach(var item in list)
    {
        var otherItem = other.SingleOrDefault((i) => keySelector(i).Equals(keySelector(item)));
        if(otherItem != null)
        {
            newList.Add(merge(item,otherItem));
        }
    }
    return newList;
} 
```

用法将是：

```
var merged = list1
     .MergeWith(list2, i => i.ProjectId,
       (lhs,rhs) => new Project{ProjectId=lhs.ProjectId,ProjectName=lhs.ProjectName, Customer=rhs.Customer})
    .MergeWith(list3,i => i.ProjectId,
       (lhs,rhs) => new Project{ProjectId=lhs.ProjectId,ProjectName=lhs.ProjectName, Customer=lhs.Customer,Address=rhs.Address}); 
```

现场示例：[http ://rextester.com/ETIVB14254](http://rextester.com/ETIVB14254)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-29T13:08:23.510

这是假设您要获取第一个非空值，或恢复为默认值 - 在本例中为字符串为空。

```
private static IEnumerable<Project> GetMergedProjects(IEnumerable<List<Project>> projects)
{
    var projectGrouping = projects.SelectMany(p => p).GroupBy(p => p.ProjectId);
    foreach (var projectGroup in projectGrouping)
    {
        yield return new Project
                            {
                                ProjectId = projectGroup.Key,
                                ProjectName =
                                    projectGroup.Select(p => p.ProjectName).FirstOrDefault(
                                        p => !string.IsNullOrEmpty(p)),
                                Customer =
                                    projectGroup.Select(c => c.Customer).FirstOrDefault(
                                        c => !string.IsNullOrEmpty(c)),
                                Address =
                                    projectGroup.Select(a => a.Address).FirstOrDefault(
                                        a => !string.IsNullOrEmpty(a)),
                            };
    }
} 
```

如果需要，您也可以将此作为扩展方法。*

# autocomplete - YUI 自动完成插件未定义

> ID：10798826
> 
> 赞同：0
> 
> 时间：2012-05-29T12:05:58.573
> 
> 标签：autocomplete, yui

我的各种简单代码： var ac = Y.Plugin.AutoComplete("searchInput", "results");

错误：未捕获的类型错误：对象 # 没有方法“自动完成”

我需要包含一些特定的 js 文件还是...？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T12:46:23.897

这可能意味着您没有以正确的方式调用它。虽然我之前没用过，但是文档说它只需要一个参数，而不是两个字符串。请参阅[自动完成 API](http://yuilibrary.com/yui/docs/api/classes/Plugin.AutoComplete.html)：

> 初始化（配置）基础
> 
> 继承自 BaseCore 但在 base/js/Base.js:191 中被覆盖
> 
> 初始化生命周期方法，在构造过程中调用。在设置属性和调用类层次结构的初始化程序之前触发 init 事件。参数：
> 
> ```
> config Object
> 
> Object with configuration property name/value pairs 
> ```
> 
> 返回： Base：对该对象的引用

因此，您应该尝试创建一个配置对象并将其作为参数传递。

亚历克西斯

# lucene - Lucene：匹配以短语开头的字段

> ID：10798827
> 
> 赞同：0
> 
> 时间：2012-05-29T12:06:00.810
> 
> 标签：lucene, lucene.net

对于以下文档（假设每个文档中有一个字段）：
1 - ABCD
2 - AB
3 - CDAB

（AD 是不同的术语）

我想创建一个仅匹配文档 1 和 2 的查询“A B”。我知道我可以插入一个特殊的“字段开头”标记来帮助我，但我更愿意避免这种情况（需要重新索引所有数据，而且也有点丑）。

怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T14:51:38.110

弄清楚了。诀窍是将[SpanNearQuery](http://lucene.apache.org/core/old_versioned_docs/versions/3_5_0/api/core/org/apache/lucene/search/spans/SpanNearQuery.html)与[SpanFirstQuery](http://lucene.apache.org/core/old_versioned_docs/versions/3_5_0/api/core/org/apache/lucene/search/spans/SpanFirstQuery.html)结合起来。

```
 SpanNearQuery spanNearQuery = new SpanNearQuery(new[] { new SpanTermQuery(new Term(field, "A")), new SpanTermQuery(new Term(field,"B")) },0, true);
  SpanFirstQuery spanFirstQuery = new SpanFirstQuery(spanNearQuery, 2); 
```

# grails - Grails 使用反向代理重定向

> ID：10798830
> 
> 赞同：2
> 
> 时间：2012-05-29T12:06:04.997
> 
> 标签：grails, redirect, reverse-proxy

我们开发了一个使用重定向的 Grails 应用程序。由于外部原因，我们最近才使用反向代理，将一些流量拆分到域：来自：demo1.company.local（服务器本身）

To: tomcat.company.local（适用于所有 java 应用程序，包括我们的 grails 应用程序） lotus.company.local（适用于所有 Domino 应用程序）

由于tomcat仅在demo1服务器上的hosts文件中配置，当我从demo1服务器本身以外的任何地方访问应用程序时，重定向不起作用。

我尝试在 Grails 的 redirect() 中使用“absolute”和/或“base”参数来解决这个问题，但如果我理解正确，这只是 Grails 2+，我们使用的是 Grails 1.3.4。

还有其他方法可以重定向到指定的主机吗？我在滥用东西吗？

谢谢，布拉姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T13:30:17.323

如果您`grails.serverURL`在 Config.groovy 中定义，则重定向`absolute:true`将使用该值作为 URL。

# android - 在使用 HttpUrlConnection 的 ICS session-cookie 错误中

> ID：10798841
> 
> 赞同：2
> 
> 时间：2012-05-29T12:06:49.593
> 
> 标签：android, session-cookies, android-4.0-ice-cream-sandwich, httpurlconnection

```
 MyApplication app = (MyApplication) mContext.getApplicationContext();

 CookieManager cookie = CookieManager.getInstance();                

    if(cookie.getCookie(mContext.getString(R.string.host_url))!=null){
    conn.setRequestProperty("Cookie",cookie.getCookie(mContext.getString(R.string.host_url)));                  app.cookie=cookie.getCookie(mContext.getString(R.string.host_url));
            }

  Map m = conn.getHeaderFields();
            if (m.containsKey("Set-Cookie")) {
                String cookies = "";
                Collection c = (Collection) m.get("Set-Cookie");
                for (Iterator i = c.iterator(); i.hasNext();) {
                    cookies += (String) i.next() + ",";
                }
                cookie.setCookie(mContext.getString(R.string.host_url), cookies);
                Log.d("tag", "cookie set " +  cookies);
            } 
```

--------------------使用 cookie 进行会话--------

```
 if (conn.getResponseCode() == HttpURLConnection.HTTP_OK) {
                BufferedReader reader = new BufferedReader(new InputStreamReader(conn.getInputStream(),"UTF-8"));
                String line = null;
                String res = "";
                while ((line = reader.readLine()) != null) {
                    res += line;
                }
                Log.d("tag", "url : " + requestUrl + "\n" + res);

                jobj = new JSONObject(res);
                if (jobj.getString("result").equals("YES")) {
                    success = true;
                } else if (jobj.getString("result").equals("NO")) {
                    result = jobj.getString("reason");
                }

                reader.close();
            }else{
                result = "HTTP FAILED";
            } 
```

--------------在网络上获得响应----------

在 ICS 中，此代码不起作用。

当在 web 中连接一些 .php，在 web 中产生会话错误
或其他 .php 时，conn.getResponseCode() == HttpURLConnection.HTTP_OK 无法捕获响应。（result = "HTTP FAILED"; 这种情况）

但是，一些 .php 文件仍然有效。

在 android 2.2 或 2.3 中运行良好，但 4.0.4 NexusS，NexusGalaxy 遇到了麻烦。

我的代码有问题吗？或者问题出在网络上？

# php - 在 PHP 中将一个数组拆分为多个数组

> ID：10798850
> 
> 赞同：0
> 
> 时间：2012-05-29T12:07:31.497
> 
> 标签：php, multidimensional-array, split

为了某些报告生成目的，我需要将单个数组拆分为多个数组。

我有一个这样的数组，我在下面给出。

```
Array
(
    [blah_1] => 1
    [blahblah_1] => 31
    [blahblahblah_1] => 25
    [blah_3] => 1
    [blahblah_3] => 3
    [blahblahblah_3] => 5
    [blah_10] => 1
    [blahblah_10] => 10
    [blahblahblah_10] => 2
) 
```

我想将以上内容拆分为，

```
Array
(
    [blah_1] => 1
    [blahblah_1] => 31
    [blahblahblah_1] => 25
)

Array
(
    [blah_3] => 1
    [blahblah_3] => 3
    [blahblahblah_3] => 5
)

Array
(
    [blah_10] => 1
    [blahblah_10] => 10
    [blahblahblah_10] => 2
) 
```

我怎样才能在 PHP 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T12:15:59.837

```
$oldarray=array('blah_1'=>1,'blahblah_1'=>31,'blahblahblah_1'=>25,
'blah_3'=>1,'blahblah_3'=>3,'blahblahblah_3'=>5,
'blah_10'=>1,'blahblah_10'=>10,'blahblahblah_10'=>2
)
$newarray=array();

foreach ($oldarray as $key=>$val) { //Loops through each element in your original array

    $parts=array_reverse(explode('_',$key)); //Splits the key around _ and reverses
    $newarray[$parts[0]][$key]=$val; //Gets the first part (the number) and adds the
    //value to a new array based on this number.

} 
```

输出将是：

```
Array (
    [1]=>Array
    (
        [blah_1] => 1
        [blahblah_1] => 31
        [blahblahblah_1] => 25
    )

    [3]=>Array
    (
        [blah_3] => 1
        [blahblah_3] => 3
        [blahblahblah_3] => 5
    )

    [10]=>Array
    (
        [blah_10] => 1
        [blahblah_10] => 10
        [blahblahblah_10] => 2
    )
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T12:10:25.697

使用[array_chunk](http://php.net/manual/en/function.array-chunk.php)。例子：

```
<?php
   $chunks = array_chunk($yourarray, 3);
   print_r($chunks);
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T12:12:00.387

使用[array_chunk](http://www.php.net/manual/en/function.array-chunk.php)

IE

```
$a = array(1,2,3,4,5,6,7);
var_dump(array_chunk($a, 3)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T12:12:22.277

不确定您是否在寻找[array_slice](http://php.net/manual/en/function.array-slice.php)

但看看这个例子：

```
 <?php
        $input = array("a", "b", "c", "d", "e");

       print_r(array_slice($input, 2, -1));
       print_r(array_slice($input, 2, -1, true));
?> 
```

将导致：

```
Array
(
    [0] => c
    [1] => d
)
Array
(
    [2] => c
    [3] => d
) 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-29T12:10:52.560

```
array_chunk ( array $input , int $size); 
```

# php - 从 MySQL 数据库中提取日期删除时间

> ID：10798855
> 
> 赞同：2
> 
> 时间：2012-05-29T12:07:54.323
> 
> 标签：php, sql

我正在从名为 events 的表中提取值 EventDate。目前正在给我一个时间戳以及日期 - 2012-05-29 00:00:00。

无论如何在PHP中修剪这个？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-29T12:10:39.783

尝试使用 MySQL 的内置函数，例如[`DATE_FORMAT()`](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_date-format)甚至[`DATE()`](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_date)

```
SELECT
  DATE_FORMAT(EventDate, '%Y-%m-%d') AS eventDate
FROM events; 
```

```
SELECT
  DATE(EventDate) AS eventDate
FROM events; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-29T12:26:56.927

如果不想在数据库中存储时间戳，则将字段类型从日期时间更改为日期。然后在检索时您将只获得日期。

或者

```
$date = //store DB date in this variable;
date('Y-m-d',strtotime($date)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-29T12:13:17.520

如果您确实需要在 PHP 中执行此操作，请使用该[`date()`](http://php.net/manual/en/function.date.php)函数。

```
$date = '2012-05-29 00:00:00';
echo date('Y-m-d', strtotime($date));  // 2012-05-29 
```

# php - 设置 cron 作业以执行 PHP 脚本

> ID：10798858
> 
> 赞同：-1
> 
> 时间：2012-05-29T12:08:14.277
> 
> 标签：php, ios, cron, push-notification

我需要设置一个 cron 作业，每分钟执行一个 PHP 脚本（用于向用户发送 iPhone 通知）。我已经尝试了几个代码片段，但它们似乎都不起作用。这是我尝试过的：

```
crontab -e 
```

然后..在编辑器中，我输入

```
* * * * * php  /Users/MYUSERNAME/Desktop/SimplePush/simplepush.php 
```

但它不起作用。我在 Mac OS X Lion 上运行，并将在 Linux 服务上部署该服务，但我认为 crontab 功能不应该受到操作系统的影响，因为两者都基于 unix 核心。所以，无论如何，我需要这个 cronjob`simplepush.php`每分钟触发一次以发送通知。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T12:11:28.540

您是否尝试过在终端中运行 php /Users/MYUSERNAME/Desktop/SimplePush/simplepush.php 以检查它是否正常工作？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T12:59:55.243

使用此代码：

```
* * * * * wget -q  /Users/MYUSERNAME/Desktop/SimplePush/simplepush.php 
```

或者

```
* * * * * wget -o  /Users/MYUSERNAME/Desktop/SimplePush/simplepush.php 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-05T14:28:59.480

我知道这是一个老问题，但这在 OSX Yosemite 中对我有用

`*/1 * * * * php -q /Users/path/to/php-file.php`

# git - 如何将代码与 Git 提交匹配并创建分支？

> ID：10798863
> 
> 赞同：1
> 
> 时间：2012-05-29T12:08:42.310
> 
> 标签：git, merge, git-extensions, git-commit

我的“DEV”机器上有一个 git 存储库。不久前，我将一些代码复制到我的 PROD 机器上。从那时起，我的 DEV 机器中出现了许多提交。但是，我的 PROD 机器上可能有一些临时代码更改从未提交或“退出”。

问题：如何在 DEV 上找到与 PROD 上的代码最接近的提交？

然后我将创建一个分支并合并。目标是将所有内容合并到 1 个分支中。PROD 上有许多文件从未被修改过，所以也许这会更容易，只需搜索所有提交以找到完全匹配的内容。

我使用 git 扩展。

泰。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T14:13:38.780

一种选择是用于`git bisect`搜索您的旧提交，在每个步骤中使用目录差异工具将 git 工作目录与 PROD 进行比较。如果工作目录自您想要保留的 PROD 以来有新的更改，请将其标记为`good`。如果工作目录有旧版本的文件，而您想要 PROD 版本，请将其标记为`bad`。最终，您应该找到最接近 PROD 开始位置的提交——从那里创建一个分支，从 PROD 复制过来，一切顺利。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T15:24:39.763

在没有其他信息的情况下（假设您的 PROD 机器的安装本身不是 git 存储库，这会使这变得非常简单），我可能只是将文件创建时间戳与您的 DEV 存储库的提交历史记录进行比较。大概您的 PROD 机器的代码是在一个狭窄的窗口中复制的。也有可能你在做这个副本时没有提交。只需使用`git log`在复制时间戳之前找到提交时间戳，然后类似：

```
git checkout -B new_branch <hash_of_that_commit>    # Checks out 'new_branch' at that commit 
```

接下来，区分 DEV 和 PROD，将 PROD 更改以增量方式或作为批次复制回 DEV。提交每个增量或批次。

那时你有一个可行的主题分支。您可以在闲暇时将其合并或变基回您的主分支。

# objective-c - 在 Objective-C 中裁剪并获取图像的其余部分

> ID：10798866
> 
> 赞同：1
> 
> 时间：2012-05-29T12:08:54.290
> 
> 标签：objective-c, crop, image-editing

我想裁剪图像，并想要获取图像的其他部分。如下图所示

![在此处输入图像描述](../Images/8701c4ebc6979c459bc88e55ab6bfa61.png)

和![在此处输入图像描述](../Images/adbb09d7947834b0dddd4099d0b05c91.png)

在这里，我想为图像的选定部分创建一个透明区域并制作一个新图像。

我也尝试获取所有像素并将选择部分的 alpha 设置为 0，但它没有用。

有人有其他解决方案吗？

这是我使用的代码：

> ```
> CGSize size = [UIImage imageNamed:fileName].size;
> CGImageRef inImage = [UIImage imageNamed:fileName].CGImage;
> CFDataRef ref = CGDataProviderCopyData(CGImageGetDataProvider(inImage));
> UInt8 * buf = (UInt8 *) CFDataGetBytePtr(ref);
> int length = CFDataGetLength(ref);
> float value2 =  (1 + value-0.5);
> NSLog(@"length  = %d",length);
> int row = 0,col = 0;
> for(int i=0; i<length; i+=4)
> {
> 
>     int r = i;
>     int g = i+1;
>     int b = i+2;
>     int a = i+3;
> 
>     col++;
>     if ((col % (int)size.width)==0 ) {
>         row++;
>         col=0;
>     }
> 
>     int red = buf[r];
>     int green = buf[g];
>     int blue = buf[b];
>     int alpha = buf[a]; 
> 
>     if (col > 25 && col < 75 && row > 25 && row < 75) {
>         alpha = 0;
>     }
> 
>     buf[r] = SAFECOLOR(red);
>     buf[g] = SAFECOLOR(green);
>     buf[b] = SAFECOLOR(blue);
>     buf[a] = SAFECOLOR(alpha);
> 
> }
> NSLog(@"CGImageGetAlphaInfo %d",CGImageGetAlphaInfo(inImage));
> NSLog(@"CGImageGetColorSpace %@",CGImageGetColorSpace(inImage));
> 
> CGContextRef ctx = CGBitmapContextCreate(buf,
>                                          CGImageGetWidth(inImage),
>                                          CGImageGetHeight(inImage),
>                                          CGImageGetBitsPerComponent(inImage),
>                                          CGImageGetBytesPerRow(inImage),
>                                          kCGColorSpaceGenericRGB,
>                                          kCGImageAlphaPremultipliedLast);
> 
> CGImageRef img = CGBitmapContextCreateImage(ctx);
> 
> imgView.image = [UIImage imageWithCGImage:img]; 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T12:25:54.150

尝试通过在其中绘制透明矩形来做到这一点`kCGBlendModeCopy`（它完全替换目标像素而不是与它们混合）

```
UIImage* dst = [UIImage imageNamed:fileName];
UIGraphicsBeginImageContext(dst.size);
[dst drawInRect:CGRectMake(0,0,dst.size.width,dst.size.height)];
[[UIBezierPath bezierPathWithRect:CGRectMake(25,25,50,50)] 
 fillWithBlendMode:kCGBlendModeCopy alpha:0];
UIImage* result = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

您的解决方案的问题可能在于，在具有*预乘 alpha*的位图中，R、G、B 分量应乘以 A 分量，这意味着如果将 A 设置为零，则必须将 R、G、B 设置为零也是（因为任何乘以 A=0 的值都将为零）。

# actionscript-3 - 在 AS3 中访问命令行

> ID：10798867
> 
> 赞同：0
> 
> 时间：2012-05-29T12:08:58.843
> 
> 标签：actionscript-3

我在 stackoverflow 上进行了搜索，但没有找到任何东西，并查看了 as3 文档，结果相同。
我想做一些像 C's`system();`或 PHP's 的东西`shell_exec(")`。

这可能吗？如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T12:23:03.123

Flash 是客户端，因此您不能直接调用服务器上的可执行文件。

但是，您可以在服务器上创建一个 PHP 文件来运行您的可执行文件。然后您可以使用 URLLoader 从 Flash 启动此脚本：

```
var urlLoader:URLLoader = new URLLoader();
var urlRequest:URLRequest = new URLRequest('http://example.com/somescript.php');
urlLoader.load(urlRequest); 
```

# java - RMI：将非远程对象类传递给服务器

> ID：10798877
> 
> 赞同：0
> 
> 时间：2012-05-29T12:10:03.963
> 
> 标签：java, rmi

假设我有一个远程类，它有一个带有 POJO 参数的方法：

```
class MyRemote implements Remote {

    void service(Param param) throws RemoteException;

} 
```

客户端检索存根并执行以下操作：

```
// DerivedParam is defined by the client
// and is derived from Param
DerivedParam dparam = getDerivedParam();
myService.service(dparam); 
```

它失败了，因为服务器不知道 DerivedParam 类（以及它可能实现的接口）。

问题：是否有可能以某种方式将这些类从客户端传递到服务器以使这样的调用成为可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T12:24:00.970

我不是这方面的专家，但我前段时间确实使用了这个技巧。神奇之处在于通过设置属性来使用[代码移动](http://en.wikipedia.org/wiki/Code_mobility)`java.rmi.server.codebase`性。

您使此属性指向您的共享类可能驻留的 URL 或以空格分隔的 URL 列表。例如，这可能是一个 FTP 服务器或一个 HTTP 服务器，其中包含一个带有公共类的 jar 文件。

一旦设置好，代码库注释将包含在服务器和客户端编组的所有对象中，当任何一方找不到类时，他们会在代码库中提供的 URL 中查找它并动态加载它。

请阅读[使用 Java RMI 进行动态代码下载](http://docs.oracle.com/javase/6/docs/technotes/guides/rmi/codebase.html)。

假设您只向客户端提供接口，并且实现将位于给定的代码库中。然后客户端请求服务器发送一个给定的对象，客户端期望接收一个实现给定接口的对象，但是实际的实现对于客户端来说是未知的，当它反序列化发送的对象时它必须去代码base 并为正在传递的实际对象下载相应的实现类。

这将使客户端非常瘦，并且您将非常轻松地更新代码库中的类，而不必诉诸于更新每个客户端。

假设您有一个具有以下界面的 RMI 服务器

```
public interface MiddleEarth {
     public List<Creature> getAllCreatures();
} 
```

客户端将只有 和 的接口`MiddleEarth`，`Creature`但在类路径中没有任何实现。

其中 的实现是 、 和 类型的可序列化`Creature`对象。这些实现位于您的代码库中，但不在您客户端的类路径中。`Elf``Man``Dwarf``Hobbit`

当您要求您的 RMI 服务器向您发送中土世界中所有生物的列表时，它会发送实现 的对象`Creature`，即上面列出的任何类。

当客户端收到序列化的对象时，它必须查找类文件以便对它们进行反序列化，但这些文件不在本地类路径中。此流中的每个对象都带有给定的代码库标记，可用于查找缺失的类。因此，客户端求助于代码库来查找这些类。在那里它将找到正在使用的实际生物类。

代码库双向工作，因此这意味着如果您向服务器发送 a `Creature`（即 an `Ent`），它也会在代码库中查找它。

这意味着当客户端和服务器都需要发布新类型的生物时，他们所要做的就是更新`creaturesImpl.jar`代码库中的内容，而不是服务器或客户端应用程序本身。

# c++ - 如何在 C++ 字体库中支持不同的 OpenGL 版本/扩展

> ID：10798880
> 
> 赞同：2
> 
> 时间：2012-05-29T12:10:15.020
> 
> 标签：c++, opengl

我打算重写一个小型 C++ OpenGL 字体库，因为我最近发现了对较新 OpenGL 版本的更改，所以我使用 FreeType 2 做了一段时间。我的代码使用立即模式，并且我很确定现在不推荐使用某些函数调用，例如 glLineStipple。

我非常希望支持一系列 OpenGL 版本，以便代码在可能的情况下使用例如 VBO，或者在没有其他可用的情况下回退到立即模式等等。我不知道该怎么做。Afaik，您无法进行编译时检查，因为您需要在运行时创建有效的 OpenGL 上下文。到目前为止，我提出了以下建议（灵感来自其他线程/站点）：

*   使用 GLEW 在绘图函数中进行运行时检查并检查函数支持（例如 glLineStipple）

*   使用可以在编译时指定的一些 #define 和其他预处理器指令来编译适用于不同 OpenGL 版本的不同版本

*   编译支持不同 OpenGL 版本的不同版本，并将每个版本作为单独的下载提供

*   使用脚本 (Python/Perl) 交付库，该脚本检查系统上的 OpenGL 版本（如果可能/可靠）并对源进行适当的修改，使其适合用户的 OpenGL 版本

*   仅针对较新的 OpenGL 版本并放弃对以下任何内容的支持

无论如何，我可能会使用 GLEW 轻松加载扩展。

**跟进：** 根据您非常有用的答案，我尝试根据我的旧代码编写几行代码，这是一个片段（未经测试/完成）。我在配置头中声明了适当的函数指针，然后在初始化库时，我尝试获取正确的函数指针。如果 VBO 失败（指针为空），我会退回到显示列表（在 3.0 中已弃用），然后最后到顶点数组。如果 fx，我应该（也许？）也检查可用的 ARB 扩展。VBO 无法加载还是工作量太大？这会是一个可靠的方法吗？评论表示赞赏:)

```
#if defined(WIN32) || defined(_WIN32) || defined(__WIN32__)
    #define OFL_WINDOWS
    // other stuff...
    #ifndef OFL_USES_GLEW
        // Check which extensions are supported
    #else
        // Declare vertex buffer object extension function pointers
        PFNGLGENBUFFERSPROC          glGenBuffers          = NULL;
        PFNGLBINDBUFFERPROC          glBindBuffer          = NULL;
        PFNGLBUFFERDATAPROC          glBufferData          = NULL;
        PFNGLVERTEXATTRIBPOINTERPROC glVertexAttribPointer = NULL;
        PFNGLDELETEBUFFERSPROC       glDeleteBuffers       = NULL;
        PFNGLMULTIDRAWELEMENTSPROC   glMultiDrawElements   = NULL;
        PFNGLBUFFERSUBDATAPROC       glBufferSubData       = NULL;
        PFNGLMAPBUFFERPROC           glMapBuffer           = NULL;
        PFNGLUNMAPBUFFERPROC         glUnmapBuffer         = NULL;
    #endif
#elif some_other_system 
```

初始化函数：

```
#ifdef OFL_WINDOWS
    bool loaded = true;

    // Attempt to load vertex buffer obejct extensions
    loaded = ((glGenBuffers          = (PFNGLGENBUFFERSPROC)wglGetProcAddress("glGenBuffers"))                   != NULL && loaded);
    loaded = ((glBindBuffer          = (PFNGLBINDBUFFERPROC)wglGetProcAddress("glBindBuffer"))                   != NULL && loaded);
    loaded = ((glVertexAttribPointer = (PFNGLVERTEXATTRIBPOINTERPROC)wglGetProcAddress("glVertexAttribPointer")) != NULL && loaded);
    loaded = ((glDeleteBuffers       = (PFNGLDELETEBUFFERSPROC)wglGetProcAddress("glDeleteBuffers"))             != NULL && loaded);
    loaded = ((glMultiDrawElements   = (PFNGLMULTIDRAWELEMENTSPROC)wglGetProcAddress("glMultiDrawElements"))     != NULL && loaded);
    loaded = ((glBufferSubData       = (PFNGLBUFFERSUBDATAPROC)wglGetProcAddress("glBufferSubData"))             != NULL && loaded);
    loaded = ((glMapBuffer           = (PFNGLMAPBUFFERPROC)wglGetProcAddress("glMapBuffer"))                     != NULL && loaded);
    loaded = ((glUnmapBuffer         = (PFNGLUNMAPBUFFERPROC)wglGetProcAddress("glUnmapBuffer"))                 != NULL && loaded);

     if (!loaded)
        std::cout << "OFL: Current OpenGL context does not support vertex buffer objects" << std::endl;
    else {
        #define OFL_USES_VBOS
        std::cout << "OFL: Loaded vertex buffer object extensions successfully"
        return true;
    }

    if (glMajorVersion => 3.f) {
        std::cout << "OFL: Using vertex arrays" << std::endl;
        #define OFL_USES_VERTEX_ARRAYS
    } else {
        // Display lists were deprecated in 3.0 (although still available through ARB extensions)
        std::cout << "OFL: Using display lists"
        #define OFL_USES_DISPLAY_LISTS
    }
#elif some_other_system 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T12:19:44.910

首先，你会很安全，因为它在任何地方都受支持：重写你的字体渲染器以使用*Vertex Arrays*。从 VA 到 VBO 只是一小步，但各地都支持 VA。您只需要一小组扩展功能；也许手动加载是有意义的，而不是依赖于 GLEW。静态链接它是巨大的矫枉过正。

然后将调用放入包装函数中，您可以通过函数指针引用它们，以便您可以通过这种方式切换渲染路径。例如添加一个函数“stipple_it”左右，并在内部调用 glLineStipple 或为其构建和设置适当的片段着色器。

glVertexPointer 与 glVertexAttribPointer 类似。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T12:20:09.083

如果您确实想手动进行每项检查，那么您将无法摆脱一些#defines，因为 Android/iOS 仅支持 OpenGL ES，然后运行时检查会有所不同。

运行时检查也几乎是不可避免的，因为（根据个人经验）来自不同硬件供应商的不同驱动程序有很多警告（当然，对于 OpenGL 1.0 以上的任何驱动程序）。

“只针对较新的 OpenGL 版本并放弃对以下任何内容的支持”将是一个可行的选择，因为 ATI/nVidia 甚至英特尔的大多数视频卡都支持某些版本的 OpenGL 2.0+，这大致相当于 GL ES 2.0。

GLEW 是一种简化 GL 扩展获取的好方法。尽管如此，嵌入式平台上的 GL ES 仍然存在问题。

现在加载过程：

1.  在 win32/linux 上，只需检查函数指针是否为 NULL 并使用 GL 的 ExtensionString 来了解此具体硬件支持的内容

2.  iOS/Android/MacOSX 的“加载”只是存储指针，甚至是“什么都不做”。Android 是一个不同的野兽，这里有静态指针，但需要检查扩展。即使经过这些检查，您也可能不确定某些被报告为“工作”的东西（我说的是“无名”Android 设备或简单的 gfx 硬件）。因此，您将根据视频卡的名称添加自己的（！）检查。

3.  OSX/iOS OpenGL 实现“正常工作”。因此，如果您在 10.5 上运行，您将获得 GL2.1；10.6 - 2.1 + 一些使其几乎像 3.1/3.2 的扩展；10.7 - 3.2 核心配置文件。还没有适用于 Mac 的 GL4.0，这主要是 3.2 的演变。

如果您对我的个人意见感兴趣，那么我主要来自“重塑一切”阵营，多年来我们一直在使用一些自动生成的扩展加载器。

最重要的是，您走在正确的轨道上：对 VBO/VA/Shaders/NoFFP 的重写将为您带来重大的性能提升。

# php - 多次尝试 Web 服务 - PHP

> ID：10798886
> 
> 赞同：0
> 
> 时间：2012-05-29T12:10:37.443
> 
> 标签：php, web-services

我正在构建一个与 Web 服务交互的函数。

在 Web 服务没有响应的情况下，我想重试 2 或 3 次，以防这是一个临时故障并且在注册失败之前。

使用 PHP 做这件事的最佳技术是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T12:14:54.627

```
$i = 0;
do {
    $response = getResponseFromWebService();
    if ($i++ >= 3) {
        throw new Exception('Web service unavailable');
    }
} while (!$response); 
```

不过，如果它第一次不起作用，可能第二次或第三次也不会起作用。除非您正在使用一个非常喜怒无常的 Web 服务，在这种情况下，您可能应该寻找一个不同的 Web 服务。

# php - 通过script标签调用jquery和php文件的组合

> ID：10798887
> 
> 赞同：0
> 
> 时间：2012-05-29T12:10:39.357
> 
> 标签：php, javascript, jquery, wordpress

我试图通过脚本标签调用 jQuery 和 PHP 文件的组合，但它没有正确加载。

这是我的代码

```
<script type="text/javascript">
jQuery(document).ready(function(){
$("#country").change(function(){
    var getVal = $(this).val();
<?php $sql="select t.term_id,t.description,t2.name,t2.slug from wp_term_taxonomy as t join wp_terms as t2 on t.term_id=t2.term_id where t.parent=3";
$data=mysql_query($sql); 
while($rec=mysql_fetch_array($data))
{?> if(getVal=="<?php echo $rec['name'];?>" )
  {
    window.location = "<?php echo get_category_link( $rec['term_id'] );?>";
  } <?php }?>                           
});
$("#team").change(function(){
    var getVal = $(this).val();
<?php
$args=array(
  'orderby' => 'name',
  'order' => 'ASC',
  'taxonomy' => 'teams'
  );
$categories=get_categories($args);
  foreach($categories as $category) { ?>if(getVal=="<?php echo $category->name;?>"){
<?php $x=str_replace(' ','-',$category->name);
      $y=str_replace('\'','',$x);?>
    window.location = "<?php echo home_url( '/' );?>teams/<?php echo $y;?>";
  }
<?php }?>
});
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T12:46:57.253

你不能这样做，PHP 将在页面加载时执行，它不会等待“更改”事件。这是我在这个烂摊子里唯一能看到的。

尝试用php生成jquery，就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T13:00:25.103

php 在服务器上运行，javascript 在客户端上运行。你不能以这种方式组合它们。

一种方法是让 javascripts 使用 ajax 调用 php 文件。

请参阅“ [http://viralpatel.net/blogs/2009/04/jquery-ajax-tutorial-example-ajax-jquery-development.html](http://viralpatel.net/blogs/2009/04/jquery-ajax-tutorial-example-ajax-jquery-development.html) ”和“ [http://api.jquery.com/category/ajax/](http://api.jquery.com/category/ajax/) ”

所以你的javascript更改事件将通过ajax调用你的php脚本所在的url。php 脚本将查询数据库并将结果以 json 格式输出回 javascript。javascript 基本上可以用 php 输出的结果做任何你想做的事情。

# eclipse - Eclipse Indigo 3.7.2 - 粘贴删除选项卡和空格

> ID：10798890
> 
> 赞同：2
> 
> 时间：2012-05-29T12:10:53.600
> 
> 标签：eclipse, copy-paste, eclipse-indigo

我正在使用带有 PDT 的 Eclipse 3.7.2（在 Windows 7 上），最近在从 Eclipse 或外部粘贴缩进文本（空格或制表符）时，所有制表符/空格都被完全删除。

其他人有这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T16:08:06.573

就我而言，问题出在“AnyEdit Tools”的配置中。选中“删除尾随空格”选项。但我记得我从来没有改变过这个插件的选项。神秘。不知道配置是如何更改的。也许另一个插件的安装做了这个改变......

但是，取消选中此选项有所帮助。

# javascript - jQuery 可排序问题

> ID：10798895
> 
> 赞同：0
> 
> 时间：2012-05-29T12:11:10.807
> 
> 标签：javascript, jquery, coffeescript

在我的包含无序列表的用户/索引视图中

```
<ul id="documents" data-update-url="<%= sort_documents_url %>">
  <% @documents.each do |document| %>
  <%= content_tag_for :li, document do %>
  <span class="handle">[drag]</span>
  <%= link_to h(document.title), document %>
  <%= link_to 'Delete', document, method: :delete, remote: true %>
  <% end %>
  <% end %>
</ul> 
```

正如您在 ul 中看到的，我正在为每个模型渲染一个部分。渲染的 html 的 _documents.html.erb 部分第二次更新。

```
<ul id="documents" data-update-url="http://localhost:3000/documents/sort">
  <li class="document" id="document_4fc4db0cb6231417f300000c">
    <span class="handle">[drag]</span>
    <a href="/documents/4fc4db0cb6231417f300000c">Help</a>
    <a href="/documents/4fc4db0cb6231417f300000c" data-method="delete" data-remote="true" rel="nofollow">Delete</a>
</li>  <li class="document" id="document_4fc4db27b6231417f300000f">
    <span class="handle">[drag]</span>
    <a href="/documents/4fc4db27b6231417f300000f">adam</a>
    <a href="/documents/4fc4db27b6231417f300000f" data-method="delete" data-remote="true" rel="nofollow">Delete</a>
</li>  <li class="document" id="document_4fc4db2db6231417f3000010">
    <span class="handle">[drag]</span>
    <a href="/documents/4fc4db2db6231417f3000010">adam</a>
    <a href="/documents/4fc4db2db6231417f3000010" data-method="delete" data-remote="true" rel="nofollow">Delete</a>
</li>  <li class="document" id="document_4fc4dbaab6231417f3000015">
    <span class="handle">[drag]</span>
    <a href="/documents/4fc4dbaab6231417f3000015"></a>
    <a href="/documents/4fc4dbaab6231417f3000015" data-method="delete" data-remote="true" rel="nofollow">Delete</a>
</li></ul> 
```

document.js.coffee jQuery ->

```
 $('#documents').sortable
    handle: '.handle'
    update: ->
      $.post($(this).data('update-url'), $(this).sortable('serialize')) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T13:30:53.937

您不能`<div>`直接在`<ul>`. 我敢打赌那是在抛弃剧本。

事实上，除了[在](http://www.w3.org/TR/html5/the-ul-element.html#the-ul-element)[or中之外，](http://www.w3.org/TR/html5/the-ul-element.html#the-ul-element)[你不能有任何东西。`<li>``<ol>``<ul>`](http://www.w3.org/TR/html5/the-ul-element.html#the-ul-element)

# java - 如何使用连接编写动态 JPA 查询？

> ID：10798896
> 
> 赞同：1
> 
> 时间：2012-05-29T12:11:12.543
> 
> 标签：java, jakarta-ee, jpa

我希望在 JPA 中实现动态查询，例如：

```
public Collection getOrderReportByUserName(String userName, Integer scripID, String orderStatus, String orderType) 
{     
    String strQuery = "Select o,t from OrderStock o,TradeStock t where o.userName.userName = "+ userName +" and t.userName.userName = "+ userName;
    if(scripID > 0)
    {
        strQuery += " and o.scripID.scripID = " + scripID;
    }
    if(orderStatus != null)
    {                        
        if(orderStatus.equals("Executed"))
        {
            strQuery += " and o.OrderID = t.OrderID and o.OrderStatus = " + orderStatus;
        }
        else
        {
            if(scripID > 0 && orderType != null)
            {
                String sQuery = "Select o from OrderStock o where o.UserName = " + userName +" and o.ScripID = "+ scripID+" and o.BuySell = "+ orderType;
                Collection<OrderStock> os = em.createQuery(sQuery).getResultList();
                Iterator it = os.iterator();
                Boolean ok = false;
                while(it.hasNext())
                {
                    OrderStock osObj  = (OrderStock)it.next();
                    Integer pending = osObj.getPendingQuantity();
                    Integer order = osObj.getOrderQuantity(); 
                    if(pending > 0 && ((order-pending) != 0))
                    {
                        ok = true;
                        break;
                    }
                }
                if(ok == true)
                {
                    strQuery += " and o.OrderID = t.OrderID and o.OrderStatus = " + orderStatus;
                }
                else
                {
                    strQuery += " and o.OrderStatus = " + orderStatus;
                }
            }
        }
    }
    if(orderType != null)
    {
        strQuery += " and o.BuySell = " + orderType;
    }
    Collection c = em.createQuery(strQuery).getResultList();
    return c;
} 
```

我希望将结果绑定到数据表，但如您所见，我想返回一个由 2 个表组成的集合 -`orderStock`和`tradeStock`. 那么如何在我的数据表中访问这个集合呢？以及如何设置生成的动态查询的参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T12:44:20.943

*   要参数化您的查询，请参阅[这篇文章](http://www.objectdb.com/java/jpa/query/parameter)。

*   *getOrderReportByUserName*方法返回的集合将包含*Object[2]*元素。第一个元素是*OrderStock*对象的实例，第二个元素是 TradeStock 对象的*实例*。要持久化接收到的实体，您应该使用*EntityManager*类的*持久*化或*合并*方法。

**   如果您使用的是 JPA 2.0，则可以使用[Criteria API](http://docs.oracle.com/javaee/6/tutorial/doc/gjrij.html)来构造类型安全的查询。它比硬编码 JPQL 查询要好得多。* 

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T12:40:06.883

您尚未在您`tradeStock`的代码中创建任何具有名称的变量，但我假设`'c'`最后一行第三行中的变量是您的`'tradeStock'`. 因此，如果您想从您的班级返回 2 个列表，您应该创建一个新班级 say `Stock`。Stock 将有 2 个成员列表，即它们的`tradeStock`和`overStock`和 getter/setter。在此方法中，创建`Stock`.when 您从查询中获取 resultList 的实例并将其设置并从方法`Stock`返回。`Stock`*

# php - 在 CakePHP 2 中使用带有 HABTM 关系的“软删除”

> ID：10798901
> 
> 赞同：2
> 
> 时间：2012-05-29T12:11:36.957
> 
> 标签：php, cakephp, cakephp-2.0, has-and-belongs-to-many, cakephp-model

在 CakePHP 2.x 中使用 HABTM 表，使用“软删除”技术（即在连接表中“删除”布尔字段）的最佳方式是什么，以便在删除关联时“删除”字段只会更新为“1”而不是被删除的行？

一个例子是电影数据库，它可以是一个或多个流派的一部分。所有表都有一个“已删除”字段，因此不会从数据库中删除任何数据，只有“已删除”字段会根据需要更新为 1 或 0：

### 电影

*   ID
*   姓名
*   已删除

### 类型

*   ID
*   姓名
*   已删除

### 类型电影

*   流派_id
*   电影编号
*   已删除

添加或编辑电影时，用户可以选择一个或多个流派来关联电影。如果从电影中删除了先前关联的流派，则“已删除”将设置为“1”。如果相同的流派随后与电影重新关联，它将被更新回“0”。

我们已经尝试了 CakeDC 的 Utils 插件中的 SoftDelete 行为 - [https://github.com/CakeDC/utils](https://github.com/CakeDC/utils) - 这对电影和流派非常有效，但对我们来说似乎不适用于连接表 GenreMovie，它继续已完全删除行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T18:50:54.197

您可以在您的关系中创建一个[deleteQuery](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#hasandbelongstomany-habtm)。

还要防止删除连接表中的记录，请查看以下内容：

> 唯一：布尔值或字符串 keepExisting。
> 
> ```
>  If true (default value) cake will first delete existing relationship records in the foreign keys table before inserting new ones. Existing associations need to be passed again when updating.
>    When false, cake will insert the relationship record, and that no join records are deleted during a save operation.
>    When set to keepExisting, the behavior is similar to true, but existing associations are not deleted. 
> ```

# oracle - 按小时或按天对记录进行分组，并用零或空值填充空白

> ID：10798905
> 
> 赞同：5
> 
> 时间：2012-05-29T12:11:48.280
> 
> 标签：oracle, group-by, hour, days

我写了一个查询，每小时计算记录：

```
select TO_CHAR(copied_timestamp, 'YYYY-MM-DD HH24'),count(*) from req group by
TO_CHAR(copied_timestamp, 'YYYY-MM-DD HH24'); 
```

结果是：

```
2012-02-22 13    2280
2012-02-22 15    1250
2012-02-22 16    1245
2012-02-22 19    1258 
```

但我需要这样的结果：

```
2012-02-22 13    2280
2012-02-22 14    0
2012-02-22 15    1250
2012-02-22 16    1245
2012-02-22 17    0
2012-02-22 18    0
2012-02-22 19    1258 
```

我也有这些按天和月分组的查询！

```
select TO_CHAR(copied_timestamp, 'YYYY-MM-DD'),count(*)  from req
group by TO_CHAR(copied_timestamp, 'YYYY-MM-DD');

select TO_CHAR(copied_timestamp, 'YYYY-MM'),count(*)  from req
group by TO_CHAR(copied_timestamp, 'YYYY-MM'); 
```

我也需要用零或空来填充它们的空白。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-29T12:46:05.583

尝试：
第一个查询（按小时）：

```
with t as (
  select mnd + ((level-1)/24) ddd
  from
  (select trunc(min(copied_timestamp),'hh') mnd, trunc(max(copied_timestamp),'hh') mxd from req) v
  connect by mnd + ((level-1)/24) <= mxd
  )
select to_char(trunc(d1, 'hh'), 'yyyy-mm-dd hh24'), count(d2) from 
(select nvl(copied_timestamp, ddd) d1, copied_timestamp d2 from req right outer join (
  select ddd from t) ad on ddd = trunc(copied_timestamp, 'hh'))
group by trunc(d1, 'hh'); 
```

第二个查询（按天）：

```
with t as (
      select mnd + level-1 ddd
      from
      (select trunc(min(copied_timestamp),'dd') mnd, trunc(max(copied_timestamp),'dd') mxd from req) v
      connect by mnd + level-1 <= mxd
      )
    select to_char(trunc(d1, 'dd'), 'yyyy-mm-dd'), count(d2) from 
    (select nvl(copied_timestamp, ddd) d1, copied_timestamp d2 from req right outer join (
      select ddd from t) ad on ddd = trunc(copied_timestamp, 'dd'))
    group by trunc(d1, 'dd'); 
```

第三个查询（按月）：

```
with t as (
      select add_months(mnd, level-1) ddd
      from
      (select trunc(min(copied_timestamp),'mm') mnd, trunc(max(copied_timestamp),'mm') mxd from req) v
      connect by add_months(mnd, level-1) <= mxd
      )
    select to_char(trunc(d1, 'mm'), 'yyyy-mm'), count(d2) from 
    (select nvl(copied_timestamp, ddd) d1, copied_timestamp d2 from req right outer join (
      select ddd from t) ad on ddd = trunc(copied_timestamp, 'mm'))
    group by trunc(d1, 'mm'); 
```

# css - 删除黑莓的html选择列表上的向下箭头？

> ID：10798907
> 
> 赞同：0
> 
> 时间：2012-05-29T12:12:07.283
> 
> 标签：css, forms, blackberry

我知道使用 CSS 设置表单元素的样式总是有点棘手，但是有没有办法从 Blackberrys 的选择列表中删除向下箭头？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T13:28:38.963

这似乎可以解决所有问题：

```
-moz-appearance: checkbox-container;
-webkit-appearance: button;
appearance: button; 
```

# raphael - gRaphael 饼图：添加动画

> ID：10798909
> 
> 赞同：2
> 
> 时间：2012-05-29T12:12:15.103
> 
> 标签：raphael, graphael

我想显示带有动画的饼图，使其从“小点”成长为全尺寸饼图，例如这个[不断增长的饼图](http://raphaeljs.com/growing-pie.html)或这个[Highcharts 演示库 - 饼图](http://www.highcharts.com/demo/pie-basic)，但我想将它应用于制作的饼图与格拉斐尔，

这是我的 jsfiddle 示例...[带有图例的拉斐尔饼图](http://jsfiddle.net/vedmack/85VtZ/3/)

提前谢谢，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T20:32:16.543

为了实现那种动画，您必须访问这些扇区并...为它们设置动画:)

您可以使用 your_pie.each() 来执行此操作

```
pie.each(function(){
  //scale each sector to 0
  this.sector.scale(0, 0, this.cx, this.cy);
  //animate from 0 to default size
  this.sector.animate({ transform: 's1 1 ' + this.cx + ' ' + this.cy }, 1000, "bounce");
}); 
```

小提琴在这里：http: [//jsfiddle.net/85VtZ/6/](http://jsfiddle.net/85VtZ/6/)

玩得开心 ;）

# qt - 在 Qt 中使用系统命令

> ID：10798916
> 
> 赞同：5
> 
> 时间：2012-05-29T12:12:37.373
> 
> 标签：qt

如何使用`system`以 QString 编写命令的命令？

喜欢：

```
QString command="chmod -R 777 /opt/QT/examples/code/TestGUI/Data";    
system(command); 
```

编译时，我收到此错误：

```
cannot convert ‘QString’ to ‘const char*’
  for argument ‘1’ to ‘int system(const char*)’ 
```

任何人都可以提出一些建议吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-29T12:52:13.580

使用[`qPrintable()`](http://qt-project.org/doc/qt-4.8/qtglobal.html#qPrintable)宏

`system(qPrintable(command));`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-29T12:21:14.527

您需要从 QString 中获取原始字符数组。这是一种方法：

```
system(command.toStdString().c_str()); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-29T13:04:03.930

Ankur Gupta 写道，使用 QProcess 静态函数（[链接到描述](http://doc.qt.io/qt-5/qprocess.html#execute-2)）：

```
int QProcess::execute ( const QString & program ) 
```

在你的情况下：

```
QProcess::execute ("chmod -R 777 /opt/QT/examples/code/TestGUI/Data"); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-05-29T12:16:41.833

QProcess 类[http://doc.qt.io/qt-5/qprocess.html](http://doc.qt.io/qt-5/qprocess.html)。这是你需要的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-13T14:07:09.513

要更改权限，您可以使用 QFile 的 setPermissions

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-11-15T09:05:42.473

您可以转换`QString`为`const char*`.

如果您的字符串是 UTF8，那么您可以使用：

```
const char* my_command = command.toUtf8().constData() ;
system(my_command); 
```

否则，如果您的字符串不是 UTF8，那么您可以使用：

```
command.toLatin1().constData() ;
system(my_command); 
```

在这种情况下，第二个就是你想要的。

# c++ - 来自 WDK 示例的 DbgPrint

> ID：10798923
> 
> 赞同：1
> 
> 时间：2012-05-29T12:13:09.107
> 
> 标签：c++, c, debugging, wdk

我需要从 WDK 示例中调用 DbgPrint 或 KdPrint 函数`src\print\monitors\localmon`

请帮忙说明

我刚刚添加

`#include <ntddk.h>`在 localmon.c 文件中

和

`DbgPrint("Some message");`在同一个文件中

并在编译时出现下一个错误：

```
1>errors in directory c:\winddk\7600.16385.1\src\print\new2\monitors\localmon
1>c:\winddk\7600.16385.1\inc\api\ntdef.h(149) : error C2220: warning treated as
error - no 'object' file generated
1>c:\winddk\7600.16385.1\inc\api\ntdef.h(614) : error C2011: '_PROCESSOR_NUMBER'
 : 'struct' type redefinition
1>c:\winddk\7600.16385.1\inc\api\ntdef.h(625) : error C2011: '_GROUP_AFFINITY' :
 'struct' type redefinition
1>c:\winddk\7600.16385.1\inc\api\ntdef.h(882) : error C2011: '_FLOAT128' : 'stru
ct' type redefinition
1>c:\winddk\7600.16385.1\inc\api\ntdef.h(933) : error C2011: '_LARGE_INTEGER' :
'union' type redefinition
1>c:\winddk\7600.16385.1\inc\api\ntdef.h(951) : error C2011: '_ULARGE_INTEGER' :
 'union' type redefinition
1>c:\winddk\7600.16385.1\inc\api\ntdef.h(973) : error C2011: '_LUID' : 'struct'
type redefinition 
```

我做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T12:43:52.170

这是用户模式代码。改为使用`OutputDebugString`，根本不包含`ntddk.h`。如果需要，请编写一个小函数作为适配器，`OutputDebugString`因为它不像对应的那样采用格式化字符串等`DbgPrint`。

* * *

如果您绝对必须使用`DbgPrint`，当然也可以从`ntdll.dll`获得。所以你可以进入它并从那里导入它（原型可以`wdm.h`在 WDK 中找到）。但我更喜欢`OutputDebugString`用户模式代码。

# ios - 与 SUP 断开连接

> ID：10798926
> 
> 赞同：0
> 
> 时间：2012-05-29T12:13:17.817
> 
> 标签：ios, sup

我的项目支持两种类型的连接，即 SUP 和 Web 服务。如果用户选择 Web 服务，则应断开与 SUP 的连接。我使用 [SUPMessageClient stop] 断开连接。此函数停止 SUP，但是当我尝试使用 [SUPMessageClient start] 或 [SUPMessageClient restart] 再次连接到 SUP 时，没有调用回调处理程序的方法。这是与 SUP 断开连接的正确方法吗？如果没有，那么正确的方法是什么？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T12:47:47.080

换网络？？？如果是，那么您必须知道在运行的应用程序之间更改网络是不可能的。如果否，那么您可以创建 Web 服务的 MBO 并可以在您的项目中使用

# iphone - 从后台返回时应用程序崩溃

> ID：10798927
> 
> 赞同：0
> 
> 时间：2012-05-29T12:13:18.873
> 
> 标签：iphone, ios, crash

我的应用程序在某些地方从后台返回时崩溃：

```
-[UITableViewCellContentView updateToInterfaceOrientation]: unrecognized selector sent to instance 0x165470
Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[UITableViewCellContentView updateToInterfaceOrientation]: unrecognized selector sent to instance 0x165470' 
```

错误总是与 [UIScrollViewDelayedTouchesBeganGestureRecognizer updateToInterfaceOrientation] 类似

我真的不知道为什么会这样，任何帮助将不胜感激。

编辑：好的，这就是我在 loadView 方法中创建表视图的方式：

```
int tableCells = [formDS.tableItems count];
    int tableHeight = FORM_TABLE_CELL_HEIGHT * (tableCells);
    UITableView *table = [[UITableView alloc] initWithFrame:CGRectMake(0, yCoord, FORM_TABLE_WIDTH, tableHeight) style:UITableViewStyleGrouped];
    [table setBackgroundView:nil];
    table.backgroundView.backgroundColor = UIColorFromRGB(FORM_BODY_COLOR);
    table.backgroundColor = UIColorFromRGB(FORM_BODY_COLOR);
    table.dataSource = self;
    table.delegate = self;
    [localContainerView addSubview:table]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T14:27:15.080

看起来您有一些已释放的对象，因此现在存在于内存中同一地址的其他一些对象接收到对`updateToInterfaceOrientation`.

尝试点击`COMMAND`++ （或转到XCode 顶部栏菜单中的-> `SHIFT`）让 XCode 对您的代码进行静态分析并获得一些可能出错的提示。`B``Product``Analyze`

希望这会有所帮助！

# java - 如何在 neo4j 中存储 Facebook 用户教育

> ID：10798934
> 
> 赞同：-1
> 
> 时间：2012-05-29T12:14:00.157
> 
> 标签：java, facebook, nosql, relationship, neo4j

我想在 Neo4j 中存储用户的 Facebook 教育，以便我可以查询任何属性组合。

目前我要保存的 Facebook 教育字段
**https://graph.facebook.com/me?fields=id,name,education&access_token=.....**

```
{
id:1
name:"xyz"
education": [   
{"school": {"id":2 "","name": "A"}, 
 "degree": {"id":3 "","name": "B"},
 "year":   {"id":4 "","name": "C"}, 
 "type": "X",
},.....]
} 
```

在 MySQL 中，我将使用下表 user_id、school_id、degree_id、year_id、type 创建一个教育表

不确定将它存储在 Neo4j 中的最佳方式是什么。
1.可能的解决方案是
节点用户-------->（教育关系）--->节点学校

学位，年份，类型是关系属性。

如果我们在类型和学位属性上遍历用户，不确定它会不会很快。

有没有其他或更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T16:05:20.680

Facebook 返回的教育详细信息并不总是采用严格的格式，并且可能缺少某些信息或这些对象的 facebook_ids。您应该将整个 Education 数组直接存储在数据库中的单个字段中。

然后使用代码显示您想要的数据，考虑缺少的字段等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T19:43:59.813

如果您想查询每个字段，那么您应该在图表中尽可能地展开它恕我直言。

# java - AES KeyPairGenerator 无法识别

> ID：10798936
> 
> 赞同：2
> 
> 时间：2012-05-29T12:14:14.287
> 
> 标签：java, file, encryption, key, aes

我的 java 代码有问题。我正在尝试加密文件。但是，当我运行我的 java 代码时，我得到“java.security.InvalidKeyException: Invalid AES key length: 162 bytes”。

这是代码：

```
byte[] rawFile;
File f = new File("./src/wonkybox.stl");
FileInputStream fileReader = new FileInputStream(f);
rawFile = new byte[(int)f.length()];
fileReader.read(rawFile);

/*****   Encrypt the file (CAN DO THIS ONCE!)  ***********/

//Generate the public/private keys
KeyPairGenerator keyGen = KeyPairGenerator.getInstance("AES");
SecureRandom random = SecureRandom.getInstance("SHA1PRNG","SUN");
keyGen.initialize(1024, random);
KeyPair key = keyGen.generateKeyPair();
PrivateKey privKey = key.getPrivate();
PublicKey pubKey = key.getPublic();

//Store the keys
byte[] pkey = pubKey.getEncoded();
FileOutputStream keyfos = new FileOutputStream("./CloudStore/keys/pubkey");
keyfos.write(pkey);
keyfos.close();

pkey = privKey.getEncoded();
keyfos = new FileOutputStream("./CloudStore/keys/privkey");
keyfos.write(pkey);
keyfos.close();

//Read public/private keys
KeyFactory keyFactory = KeyFactory.getInstance("AES");
FileInputStream keyfis = new FileInputStream("./CloudStore/keys/pubkey");
byte[] encKey = new byte[keyfis.available()];
keyfis.read(encKey);
keyfis.close();

X509EncodedKeySpec pubKeySpec = new X509EncodedKeySpec(encKey);
PublicKey pub1Key = keyFactory.generatePublic(pubKeySpec);

keyfis = new FileInputStream("./CloudStore/keys/privkey");
encKey = new byte[keyfis.available()];
keyfis.read(encKey);
keyfis.close();

PKCS8EncodedKeySpec privKeySpec = new PKCS8EncodedKeySpec(encKey);
PrivateKey priv1key = keyFactory.generatePrivate(privKeySpec);

//Encrypt file using public key
Cipher cipher = Cipher.getInstance("AES");
System.out.println("provider= " + cipher.getProvider());
cipher.init(Cipher.ENCRYPT_MODE, pub1Key);

byte[] encryptedFile;
encryptedFile = cipher.doFinal(rawFile);

//Write encrypted file to 'CloudStore' folder
FileOutputStream fileEncryptOutput = new FileOutputStream(new File("./CloudStore/encrypted.txt"));
fileEncryptOutput.write(encryptedFile);
fileEncryptOutput.close(); 
```

错误发生在“KeyPairGenerator keyGen = KeyPairGenerator.getInstance("AES");”行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T13:13:32.760

AES 是一种对称算法，因此`KeyPairGenerator`不支持它们的使用。要使用 AES 生成密钥，请调用`KeyGenerator`

```
KeyGenerator kgen = KeyGenerator.getInstance("AES");
       kgen.init(128);  //set keysize, can be 128, 192, and 256 
```

通过查看您的其余代码，您似乎正在尝试实现非对称加密（因为您调用`getPublic() and getPrivate()`等），所以我建议您切换到使用 RSA 或 java 支持的任何其他非对称算法。你很可能只需要在你的调用中替换`AES`为，并且可能需要一些微调。祝你好运`RSA``getInstance();`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T12:42:45.347

据我所知，`AES`是*对称*加密算法，即它只需要一个密钥来加密/解密。

从 JavaDoc `of java.security.KeyPairGenerator`：

> KeyPairGenerator 类用于生成公钥和私钥对。

这意味着它应该用于*非对称*加密算法。对于*对称*加密算法，应该使用`javax.crypto.KeyGenerator`.

但是，我建议简单地模仿一些关于如何使用像[这样](http://www.digizol.com/2009/10/java-encrypt-decrypt-jce-salt.html)的 AES 在 Java 中加密/解密字节数组的教程。

它使用`sun.misc.Base64Encoder / Base64Decoder`类来编码/解码字节数组到/从字符串，但是你可以跳过这一步。

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T16:13:22.630

如何为 AES 使用密钥对生成器？AES 是一种对称密钥算法。请参阅此[链接](http://en.wikipedia.org/wiki/Advanced_Encryption_Standard)。这意味着如果您使用密钥“k”加密数据，那么您也必须使用相同的密钥“k”对其进行解密。

但是，当您生成密钥对时，顾名思义，会生成两个密钥，如果您使用其中一个密钥进行加密，则只能使用另一个密钥进行解密。这是[PKI](http://en.wikipedia.org/wiki/Public-key_infrastructure)的基础。

如果您想使用密钥对生成器，请使用类似`"rsa"`或`"dsa"`在这样的`getInstance()`方法中的算法：

```
KeyPairGenerator keygen=KeyPairGenerator.getInstance("rsa"); 
```

我认为在进行上述更改后，您的代码现在应该可以正常工作了。

# sql - oracle PL/SQL：对行进行排序

> ID：10798939
> 
> 赞同：1
> 
> 时间：2012-05-29T12:14:19.900
> 
> 标签：sql, oracle, sorting, plsql

我使用 order by 运行查询，但我的列不是想要的顺序

我想要这样的：

## 产品

PROD_1
PROD_2
PROD_3
PROD_4
PROD_5
PROD_6
PROD_7
PROD_8
PROD_9
PROD_10

但它给了我这个

## 产品

PROD_1
PROD_10
PROD_2
PROD_3
PROD_4
PROD_5
PROD_6
PROD_7
PROD_8
PROD_9

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T12:18:03.053

您需要为每个位置添加一个 0，例如数字 1-99 的 01 或 1-999 的 001。或者，您必须拆分数值并在两个不同的列上进行排序。

[问汤姆](http://asktom.oracle.com/pls/asktom/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:786026162431)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T12:40:15.343

您将需要排序两次（注意我从 regexp_replace 更改为 regexp_substr 以允许空返回值）

```
with
    a as (
    select 'PROD_1' product from dual union all 
    select 'PROD_10' product from dual union all 
    select 'PROD_2' product from dual union all 
    select 'PROD_3' product from dual union all 
    select 'PROD_4' product from dual union all 
    select 'PROD_5' product from dual union all 
    select 'PROD_6' product from dual union all 
    select 'PROD_7' product from dual union all 
    select 'PROD_8' product from dual union all 
    select 'PROD_9' product from dual union all 
    select 'DECEAD_1' product from dual union all 
    select 'DECEAD_10' product from dual union all 
    select 'DECEAD_2' product from dual union all 
    select 'DECEAD_20' product from dual union all 
    select 'TREE_FROG' product from dual 
    )
    select PRODUCT
          , regexp_substr(product,'[^[:digit:]]*')  --return all non numeric
          , regexp_substr(product,'[0-9]+') 
          from a 
    order by regexp_substr(product,'[^[:digit:]]*')  ,
             TO_NUMBER(regexp_substr(product,'[0-9]+')) --note explicit numeric cast
    ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T12:18:08.677

您正在尝试按字典顺序对实际上部分数字的东西进行排序。您可以添加零前缀（即 PROD_000001），但这很脆弱。在实际应用中，我假设 Prod 10 实际上在时间上晚于 Prod 1，因此您将按创建日期时间排序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T12:27:48.487

```
 SELECT to_number(substr(colname,INSTR(column_name,'_')+1))) prodno, column_name 
    from table_name
    order by prodno 
```

不是很优雅的解决方案，但这应该可行。（因为我没有访问 Oracle 的权限，函数的参数可能需要调整。）首先获取*_*上的位置，使用它使用子字符串获取数字，然后将其转换为数字。如果表大小很大，您可能还需要查看性能

# android - 图像 GridView 内部片段

> ID：10798943
> 
> 赞同：8
> 
> 时间：2012-05-29T12:14:34.133
> 
> 标签：android, android-layout, android-fragments, android-adapter

在iOS上开发之后，我才开始在android平台上开发。我环顾四周，似乎无法弄清楚。我试图在选择操作栏中的选项卡后出现网格视图。控制标签栏的主要活动将片段带入视图。我认为问题可能与传递上下文有关，但我不确定。

这是我的**MainActivity.java**。这是片段被初始化并附加到活动的地方。它可以在没有片段中的代码的情况下工作。

```
if (mFragment == null){
            mFragment = Fragment.instantiate(mActivity, mClass.getName());
            ft.add(android.R.id.content,mFragment,mTag);
        } else {
            ft.attach(mFragment);
        } 
```

这是我的 PhotosFragment.java 这是我希望填充和显示网格视图的地方。

```
public class PhotosFragment extends Fragment {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        GridView gridview = (GridView) this.getActivity().findViewById(R.id.photogridview);
        gridview.setAdapter(new PhotoImageAdapter(this.getActivity()));
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
    }   
} 
```

这是我的**PhotoImageAdapter.java**类。我认为这是将图像添加到适配器的位置。

```
 public class PhotoImageAdapter extends BaseAdapter {
    private Context mContext;

    public PhotoImageAdapter(Context c) {
        mContext = c;
    }

    public int getCount() {
        return mThumbIds.length;
    }

    public Object getItem(int position) {
        return null;
    }

    public long getItemId(int position) {
        return 0;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        ImageView imageView;
        if (convertView == null) {  // if it's not recycled, initialize some attributes
            imageView = new ImageView(mContext);
            imageView.setLayoutParams(new GridView.LayoutParams(85, 85));
            imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
            imageView.setPadding(8, 8, 8, 8);
        } else {
            imageView = (ImageView) convertView;
        }

        imageView.setImageResource(mThumbIds[position]);
        return imageView;
    }

    private Integer[] mThumbIds = {
            R.drawable.sample_2, R.drawable.sample_3,
            R.drawable.sample_4, R.drawable.sample_5,
            R.drawable.sample_6, R.drawable.sample_7,
            R.drawable.sample_0, R.drawable.sample_1,
            R.drawable.sample_2, R.drawable.sample_3,
            R.drawable.sample_4, R.drawable.sample_5,
            R.drawable.sample_6, R.drawable.sample_7,
            R.drawable.sample_0, R.drawable.sample_1,
            R.drawable.sample_2, R.drawable.sample_3,
            R.drawable.sample_4, R.drawable.sample_5,
            R.drawable.sample_6, R.drawable.sample_7
    };
} 
```

这是我的photos_layout，其中包含ID 为photogridview 的gridview。 **照片_布局.xml**

```
 <?xml version="1.0" encoding="utf-8"?>
<GridView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/photogridview"
    android:layout_width="match_parent"
    android:layout_height="match_parent" 
    android:columnWidth="90dp"
    android:numColumns="auto_fit"
    android:verticalSpacing="10dp"
    android:horizontalSpacing="10dp"
    android:stretchMode="columnWidth"
    android:gravity="center">
</GridView> 
```

**编辑**

这是崩溃时的日志报告

```
 05-29 14:15:43.895: W/dalvikvm(676): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
05-29 14:15:43.925: E/AndroidRuntime(676): FATAL EXCEPTION: main
05-29 14:15:43.925: E/AndroidRuntime(676): java.lang.NullPointerException
05-29 14:15:43.925: E/AndroidRuntime(676):  at com.corecoders.PhotosFragment.onCreate(PhotosFragment.java:21)
05-29 14:15:43.925: E/AndroidRuntime(676):  at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:795)
05-29 14:15:43.925: E/AndroidRuntime(676):  at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:1032)
05-29 14:15:43.925: E/AndroidRuntime(676):  at android.app.BackStackRecord.run(BackStackRecord.java:622)
05-29 14:15:43.925: E/AndroidRuntime(676):  at android.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1382)
05-29 14:15:43.925: E/AndroidRuntime(676):  at android.app.FragmentManagerImpl$1.run(FragmentManager.java:426)
05-29 14:15:43.925: E/AndroidRuntime(676):  at android.os.Handler.handleCallback(Handler.java:605)
05-29 14:15:43.925: E/AndroidRuntime(676):  at android.os.Handler.dispatchMessage(Handler.java:92)
05-29 14:15:43.925: E/AndroidRuntime(676):  at android.os.Looper.loop(Looper.java:137)
05-29 14:15:43.925: E/AndroidRuntime(676):  at android.app.ActivityThread.main(ActivityThread.java:4424)
05-29 14:15:43.925: E/AndroidRuntime(676):  at java.lang.reflect.Method.invokeNative(Native Method)
05-29 14:15:43.925: E/AndroidRuntime(676):  at java.lang.reflect.Method.invoke(Method.java:511)
05-29 14:15:43.925: E/AndroidRuntime(676):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
05-29 14:15:43.925: E/AndroidRuntime(676):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
05-29 14:15:43.925: E/AndroidRuntime(676):  at dalvik.system.NativeStart.main(Native Method)
05-29 14:15:44.494: I/dalvikvm(676): threadid=3: reacting to signal 3
05-29 14:15:44.514: I/dalvikvm(676): Wrote stack traces to '/data/anr/traces.txt'
05-29 14:20:43.995: I/Process(676): Sending signal. PID: 676 SIG: 9 
```

当您单击选项卡并初始化片段时，应用程序崩溃。我正在关注的教程是[android 开发者](http://developer.android.com/resources/tutorials/views/hello-gridview.html)网站上的教程。

任何帮助或解释都会很棒。就像我说的那样，我是新手，所以如果有一些指示可以帮助我理解发生了什么，那就太好了。

迪斯科

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-29T14:45:40.363

结果是对原始代码进行了一些简单的修改，并且可以正常工作。

在调试和设置断点后，我发现 PhotoImageAdapter 中的上下文是一个空指针，因此导致应用程序崩溃。这是我在 PhotoFragment 中初始化适配器的方式，也是我在其中初始化它的方法。下面是其他任何为此苦苦挣扎的人都可以正常工作的代码。

```
 @Override
    public View onCreateView (LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.photos_layout,container,false);
        GridView gridView = (GridView) view.findViewById(R.id.photogridview);
        gridView.setAdapter(new MyAdapter(view.getContext())); // uses the view to get the context instead of getActivity().
        return view;
    } 
```

同样，这可能不是最好的或唯一的，但这种方式对我有用。（PhotoImageAdapter.java 已将名称更改为 MyAdapter.java）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T06:03:29.837

嗨，查看我刚刚分享的代码，我用 gridview 制作了片段，所以希望它对您检查此链接有所帮助，在那里您将找到有关设备和平板电脑片段的 gridview 实现的完整详细信息

主要在我的回答中检查这些文件，它肯定对你有帮助 MasterFragment,MasterGridActivity,MyAdapter,gridview.xml

[如何在片段内显示不同的布局](https://stackoverflow.com/questions/10942959/how-to-show-different-layout-in-fragments)

# c++ - 在 C++ 中循环定义多个输出文件

> ID：10798947
> 
> 赞同：0
> 
> 时间：2012-05-29T12:14:50.540
> 
> 标签：c++, file

我有一个 c++ 程序，我在其中多次运行相同的函数，但每次都运行不同的参数值。对于参数的每个值，我想将函数的结果输出到名称包含参数值的文件中。这该怎么做？这是我想做的一个例子。

```
for(parameter = 10;parameter<=100;parameter*=10){
       ofstream file("file"<<parameter<<".txt", ios::out);
       function();
       file<<result;
       file.close();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T12:19:22.913

你可以这样做[`ostringstream`](http://en.cppreference.com/w/cpp/io/basic_ostringstream)：

```
for (int parameter = 10; parameter <= 100; paramter *=10 )
{
    std::ostringstream name;
    name << "file" << parameter << ".txt";

    // If your library is too old, you have to use
    // name.str().c_str()
    // to get the string
    std::ofstream file(name.str()); // or name.str().c_str() in C++03

    // ...
} 
```

# php - 在mysql中匹配sustring时删除查询

> ID：10798948
> 
> 赞同：0
> 
> 时间：2012-05-29T12:14:51.730
> 
> 标签：php, mysql

我有一个名为“MYprojects”的表和一个名为“Rights”的列。现在我有一个以下行

```
id =>1

rights => 7,4,34,532,12,32 
```

现在，如果以下值中出现任何编号权限列，我需要删除该行

```
2,4,65,34 
```

如您所见，列中的值中存在 4，因此我需要删除该行。有人可以告诉我这个mysql查询或函数吗？它可以通过应用循环通过服务器端脚本来完成，但我需要一个优化的解决方案谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T12:21:49.847

```
DELETE FROM `MYprojects` WHERE `rights` REGEXP '(^|,)2($|,)' OR `rights` REGEXP '(^|,)4($|,)' OR `rights` REGEXP '(^|,)65($|,)' OR `rights` REGEXP '(^|,)34($|,)' 
```

是我能想到的最简洁的方式。正则表达式确保输入的数字是列表的一部分，而不仅仅是另一个数字的一​​部分（例如，“1”与“11”不匹配）。如果您通过脚本执行查询，它确实需要一些循环来构建查询，但与首先进行大量`SELECT`ing 相比，它是最小的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T12:21:59.040

您*可以*使用 MySQL 的函数（如果使用数据类型存储列[`FIND_IN_SET()`](http://dev.mysql.com/doc/en/string-functions.html#function_find-in-set)，这将特别有效）：`Rights`[`SET`](http://dev.mysql.com/doc/en/set.html)

```
DELETE FROM MYprojects WHERE
     FIND_IN_SET( 2, Rights)
  OR FIND_IN_SET( 4, Rights)
  OR FIND_IN_SET(65, Rights)
  OR FIND_IN_SET(34, Rights) 
```

但是，正如[daghan 评论](https://stackoverflow.com/questions/10798948/delete-query-while-matching-sustring-in-mysql#comment14048992_10798948)的那样，您可能应该考虑一种更合适的数据结构，它可以利用 MySQL 的*关系*数据库管理功能。

# opengl - 如何将矢量旋转到与 Z 轴对齐的位置？

> ID：10798954
> 
> 赞同：2
> 
> 时间：2012-05-29T12:15:43.067
> 
> 标签：opengl, matrix, rotation, rotatetransform

我想将一个向量旋转到 Z 轴，它的方向是 Z 轴向后。所以如果向量是(1,1,1)，我的结果应该是(0,0,-sqrt(3))。

我的想法是两个步骤。第一步是将我的向量绕 X 轴旋转到 XZ 平面。第二步是将XZ平面中的向量绕Y轴旋转到Z轴。

这是我的代码：

```
GLfloat p[4] = {1,1,1,0}; //my vector, in homogeneous coordinates
GLfloat r[4]; //result vector to test

float theta1 = ((double)180/PI)*asin(p[1]/sqrt(p[0]*p[0]+p[1]*p[1]+p[2]*p[2])); 
//angle theta1 between the vector and XZ plane, is this right ??? I doubt it !!!
float theta2 = ((double)180/PI)*atan(p[0]/p[2]); 
//angle theta2 between the vector's projection in XZ plane and Z axis 

GLfloat m[16]; 
glMatrixMode(GL_MODELVIEW); // get the rotation matrix in model-view matrix
glPushMatrix();
glLoadIdentity();
glRotatef(theta1, 1,0,0); //rotate to the XZ plane
glRotatef(180-theta2,0,1,0); //rotate to the Z axis
glGetFloatv(GL_MODELVIEW_MATRIX, m); // m is column-major.
glPopMatrix();

// use the matrix multiply my vector and get the result vector r[4]
//my expectation is (0,0,-sqrt(3))
r[0] = p[0]*m[0]+p[1]*m[4]+p[2]*m[8]+p[3]*m[12];
r[1] = p[0]*m[1]+p[1]*m[5]+p[2]*m[9]+p[3]*m[13];
r[2] = p[0]*m[2]+p[1]*m[6]+p[2]*m[10]+p[3]*m[14];
r[3] = p[0]*m[3]+p[1]*m[7]+p[2]*m[11]+p[3]*m[15]; 
```

然而，结果 r[4] 不是我的期望。所以我认为我在上面的某些地方犯了一些错误。谁能给我一个提示？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-29T15:11:45.840

旋转一个向量使其面向另一个向量：

1.  规范化它
2.  取他们的点积得到旋转角的余弦
3.  取他们的叉积来找到一个正交旋转向量
4.  围绕该新向量旋转 #2 中找到的角度

`| A x B | = sin(theta)`如果你记得if`A`和`B`都是标准化的，那么步骤 2 可以省略。

# android - 谷歌 API 公钥

> ID：10798955
> 
> 赞同：-1
> 
> 时间：2012-05-29T12:15:46.600
> 
> 标签：android, google-maps

我目前正在使用 Google API 的开发人员密钥。如何获得公钥？

是否有任何免费许可或点击次数有限？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T12:19:47.307

要获取 GoogleMaps 密钥，只需按照以下步骤操作：

[https://developers.google.com/android/maps-api-signup](https://developers.google.com/android/maps-api-signup)

[https://developers.google.com/maps/documentation/android/mapkey#finalsteps](https://developers.google.com/maps/documentation/android/mapkey#finalsteps)

也请使用搜索功能！： [获取Android公共地图API密钥](https://stackoverflow.com/questions/6462044/obtaining-android-public-map-api-key)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T12:27:50.857

请点击链接

[http://eagle.phys.utk.edu/guidry/android/apiKey.html](http://eagle.phys.utk.edu/guidry/android/apiKey.html)

有用的链接 [https://developers.google.com/maps/documentation/android/mapkey](https://developers.google.com/maps/documentation/android/mapkey) https://developers.google.com/android/maps-api-signup [https://developers.google.com/maps/documentation/ android/mapkey?hl=sv-SE#getdebugfingerprint](https://developers.google.com/maps/documentation/android/mapkey?hl=sv-SE#getdebugfingerprint)

**因为每个签名密钥都需要不同的密钥，所以不要忘记为模拟器获取不同的签名密钥，因为它有不同的密钥**

[http://blogspot.fluidnewmedia.com/2009/04/displaying-google-maps-in-the-android-emulator/](http://blogspot.fluidnewmedia.com/2009/04/displaying-google-maps-in-the-android-emulator/)

[http://mobiforge.com/developing/story/using-google-maps-android](http://mobiforge.com/developing/story/using-google-maps-android)

# r - R中用于OPTICS实现的优先级队列

> ID：10798958
> 
> 赞同：3
> 
> 时间：2012-05-29T12:15:51.510
> 
> 标签：r, cluster-analysis, priority-queue, optics-algorithm

我需要在 R 中构建一个优先级队列，我将在其中放置 OPTICS 聚类算法的有序种子对象（或对象的索引）。

*   一种可能性是用数组表示的堆来实现它，并在每个插入和减少键调用中传递堆数组，并返回更改后的数组并在调用函数中重新分配它。在这种情况下，重新分配操作会使性能变得很差，每次执行一次插入或减少操作时，整个数组都需要复制两次，一次用于调用，另一次用于返回和重新分配。

*   另一种可能性是在函数内部编写堆操作而不是调用它。这将导致代码重复和繁琐的代码。

*   有没有像我们一样访问的指针`C`

*   我可以在 R 的 S3 或 S4 类中声明用户定义的函数吗？在这种情况下，我认为对这些函数的调用在返回后仍然需要相同的重新分配（不像 C++/Java 类，对对象进行操作（对吗？））

*   是否有任何内置方法可以`O(log(n))`在 R 中及时插入和提取队列中的对象？

*   有没有其他方法可以实现目标，即根据 OPTICS 算法中对象的可达距离保持基于优先级的种子插入和移除，除了在每次插入后显式排序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T21:36:17.767

[R5 类](https://github.com/hadley/devtools/wiki/R5) 定义了可变对象，与 Java 类非常相似：它们应该允许您在修改对象时避免复制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T16:15:07.770

请注意，您不仅需要优先级队列。

它实际上也需要支持有效的更新。一个简单的堆是不够的，您需要同步一个 hashmap 以有效地查找对象以更新它们的值。然后您需要在更改的位置修复堆。

# ruby - Rake 缓存 rspec 测试还是什么？

> ID：10798959
> 
> 赞同：0
> 
> 时间：2012-05-29T12:15:51.747
> 
> 标签：ruby, rspec, rake

当我通过 rake 任务运行 rspec 测试时，我得到

```
1) Whois::Record::Parser::WhoisUa status_available.expected#created_on 
 Failure/Error: lambda { @parser.created_on }.should raise_error(Whois::PropertyNotSupported) 
```

但我的`status_available_spec.rb`样子是这样的：

```
# encoding: utf-8

# This file is autogenerated. Do not edit it manually.
# If you want change the content of this file, edit
#
#   /spec/fixtures/responses/whois.ua/status_available.expected
#
# and regenerate the tests with the following rake task
#
#   $ rake spec:generate
#

require 'spec_helper'
require 'whois/record/parser/whois.ua.rb'

describe Whois::Record::Parser::WhoisUa, "status_available.expected" do

  before(:each) do
    file = fixture("responses", "whois.ua/status_available.txt")
    part = Whois::Record::Part.new(:body => File.read(file))
    @parser = klass.new(part)
  end

  describe "#status" do
    it do
      @parser.status.should == :available
    end
  end
  describe "#available?" do
    it do
      @parser.available?.should == true
    end
  end
  describe "#registered?" do
    it do
      @parser.registered?.should == false
    end
  end
  describe "#created_on" do
    it do
      @parser.created_on.should == nil
    end
  end
  describe "#updated_on" do
    it do
      @parser.updated_on.should == nil
    end
  end
  describe "#expires_on" do
    it do
      @parser.expires_on.should == nil
    end
  end
  describe "#nameservers" do
    it do
      @parser.nameservers.should be_a(Array)
      @parser.nameservers.should == []
    end
  end
end 
```

正如你所看到的，它没有`.should raise_error(Whois::PropertyNotSupported)`改为`.should == nil`.

是 rake 缓存那些东西还是什么？

# c# - Windows Phone 7.1“发送到”功能？

> ID：10798962
> 
> 赞同：2
> 
> 时间：2012-05-29T12:15:55.813
> 
> 标签：c#, silverlight, windows-phone-7.1

我被要求用 C# 为 Windows Phone 7.1 编写一个原型应用程序，它可以通过 Android 的“共享”功能等功能获取数据，然后处理这些数据。

例如：用户打开邮件应用程序并查看 PDF 附件。对于这个附件，他按下应用程序的“共享”按钮，从注册处理程序列表中选择我的应用程序，我的应用程序可以处理 PDF 文件。

问题：

1.  Windows Phone 7.1 中是否提供这种“共享”功能？（我告诉它应该被称为“发送到”）
2.  有人可以为我提供有关如何创建相应处理程序的在线阅读吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T12:33:57.150

我不熟悉 Android 提供的产品，但您可以扩展共享选择器，并且[在 MSDN 上有一篇详细的文章，](http://msdn.microsoft.com/en-us/library/ff967563%28v=vs.92%29.aspx)其中包含示例代码。

# r - R编程，通过插入符号的随机森林

> ID：10798963
> 
> 赞同：2
> 
> 时间：2012-05-29T12:15:56.003
> 
> 标签：r, random-forest, r-caret

我是 R 的新手，我想使用 caret 包实现随机森林算法。

有什么有用的教程，一步一步来吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-29T12:43:10.980

大多数软件包都包含手册，许多还包括小插曲。

快速浏览一下`caret` [http://cran.r-project.org/web/packages/caret/index.html](http://cran.r-project.org/web/packages/caret/index.html)的 CRAN 页面会发现，这个包的文档记录特别好。

它包含4个小插曲：

*   caret 手册 – 数据和函数
*   caret 手册 – 变量选择
*   插入符号手册 - 模型构建
*   插入符号手册 - 变量重要性

从那里开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-27T15:01:48.493

自从最初提出问题以来，关于 caret 包的更多内容出现了。我发现插入符号维护​​者 Max Kuhn 的两篇教程特别有用。 [YouTube 插入符号网络研讨会](https://www.youtube.com/watch?v=7Jbb2ItbTC4)和[用户！2013年教程](http://www.edii.uclm.es/~useR-2013/Tutorials/kuhn/user_caret_2up.pdf)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-05T22:50:31.307

另外两个很好的起点是：

1.  Max Kuhn 和 Kjell Johnson - 应用预测建模 (2013) - [http://appliedpredictivemodeling.com/](http://appliedpredictivemodeling.com/)
2.  `caret`网页 - [http://topepo.github.io/caret/index.html](http://topepo.github.io/caret/index.html)

# xcode - 基于视图的表崩溃 xcode

> ID：10798967
> 
> 赞同：0
> 
> 时间：2012-05-29T12:16:08.507
> 
> 标签：xcode, cocoa, nstableview

我对 NSTableView 有疑问。我无法将其切换到基于视图的表，因为这会导致 xcode 崩溃。我用 xcode 创建了一个新应用程序，然后我将一个表视图添加到主应用程序窗口，然后在属性检查器中我将 Content-Mode 从基于单元格切换到基于视图。一段时间后（大约 10-20 秒）XCode 崩溃。此外，如果我尝试在 xcode 崩溃之前单击编辑器/模拟文档，我会遇到 Cocoa Simulator 崩溃。那么基于视图的表有什么问题我怎样才能让它工作呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T08:29:30.993

您无需对 Xcode 进行任何特殊操作即可使基于视图的 NSTableView 正常工作。我唯一能想到的是在安装 Xcode 的过程中出了点问题。尝试删除并重新安装，看看是否能解决您的问题。

# xslt - 如果代码点在给定范围内，则转换字符

> ID：10798974
> 
> 赞同：3
> 
> 时间：2012-05-29T12:16:35.287
> 
> 标签：xslt, xslt-2.0

我有几个 XML 文件，其中包含代码点值介于 57600 和 58607 之间的 unicode 字符。目前这些在我的内容中显示为方块，我想将它们转换为元素。

所以我想要实现的是：

```
<!-- current input -->
<p> Follow the on-screen instructions.</p>  
<!-- desired output-->
<p><unichar value="58208"/> Follow the on-screen instructions.</p>
<!-- Where 58208 is the actual codepoint of the unicode character in question --> 
```

我已经用标记器愚弄了一点，但是由于您需要参考 split ，结果证明这太复杂了。

关于如何最好地解决这个问题的任何建议？我一直在尝试类似下面的一些事情，但被打动了（不要介意语法，我知道这没有任何意义）

```
<xsl:template match="text()">
 -> for every character in my string
    -> if string-to-codepoints(current character) greater then 57600 return <unichar value="codepoint value"/>
       else return character
</xsl:template> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T12:43:23.663

**这种转变**：

```
<xsl:stylesheet version="2.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output omit-xml-declaration="yes"/>

 <xsl:template match="/*">
     <p>
      <xsl:for-each select="string-to-codepoints(.)">
        <xsl:choose>
            <xsl:when test=". > 57600">
              <unichar value="{.}"/>
            </xsl:when>
            <xsl:otherwise>
              <xsl:value-of select="codepoints-to-string(.)"/>
            </xsl:otherwise>
        </xsl:choose>
      </xsl:for-each>
     </p>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时**：

```
<p> Follow the on-screen instructions.</p> 
```

**产生想要的正确结果**：

```
<p><unichar value="58498"/> Follow the on-screen instructions.</p> 
```

**说明**：正确使用标准 XPath 2.0 函数**[`string-to-codepoints()`](http://www.w3.org/TR/xpath-functions/#func-string-to-codepoints)**和**[`codepoints-to-string()`](http://www.w3.org/TR/xpath-functions/#func-codepoints-to-string)**.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T12:45:01.527

这听起来像是一份工作，`analyze-string`例如

```
<xsl:template match="text()">
  <xsl:analyze-string select="." regex="[&#57600;-&#58607;]">
    <xsl:matching-substring>
       <unichar value="{string-to-codepoints(.)}"/>
    </xsl:matching-substring>
    <xsl:non-matching-substring>
      <xsl:value-of select="."/>
    </xsl:non-matching-substring>
  </xsl:analyze-string>
</xsl:template> 
```

未经测试。

# google-chrome - 如何强制 Chrome（或任何其他 WebKit 浏览器）不使用“默认”标签名称？

> ID：10798976
> 
> 赞同：0
> 
> 时间：2012-05-29T12:16:41.257
> 
> 标签：google-chrome, webkit, cross-browser, google-chrome-devtools

由于 Chrome 自动引用 DIV，我遇到了问题......它在 Safari（桌面和移动设备）中以这种方式工作，但在 Firefox 中则不然。

见图片：

![Chrome 开发工具与 Firebug](../Images/8f6b1755a14603eafbe8581cdda97233.png)

请参阅小提琴（在 Chrome 中打开，然后在 Firefox 中打开）：http: [//jsfiddle.net/stefek99/Sqcff/](http://jsfiddle.net/stefek99/Sqcff/)

问题是 -**如何禁用此功能**？我真的很想在没有任何谷歌怪癖的“严格”模式下开发，只是为了确保我的代码是跨浏览器兼容的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T22:44:31.243

这是一个已知的“问题”，但是我无法找到一种可靠的方法来禁用它。有人可能认为`"use strict";`应该禁用它，但似乎并非如此。

无论如何，对此进行更多解释；[带有 id 的 DOM 树元素会成为全局变量吗？](https://stackoverflow.com/questions/3434278/ie-chrome-are-dom-tree-elements-global-variables-here)正如那里解释的那样，它[可能会在 HTML5 中标准化](http://dev.w3.org/html5/spec/single-page.html#named-access-on-the-window-object)。这一切都始于一个[非标准的 IE 功能](https://stackoverflow.com/questions/5515659/javascript-variable-corresponds-to-dom-element-with-the-same-id)，当然在其他浏览器中得到了模仿。甚至还有一篇 msdn[博客文章指出它是一个“问题”](http://blogs.msdn.com/b/alvar/archive/2009/10/22/internet-explorer-creates-global-variables-for-each-object-in-the-dom.aspx)，因此 HTML5 工作组现在试图对其进行标准化似乎有点愚蠢。

我想提醒任何人不要依赖此问题功能，因为对于不了解它的程序员来说，它非常模棱两可且难以调试。

# java - 休眠： session.get() 随机行为

> ID：10798978
> 
> 赞同：0
> 
> 时间：2012-05-29T12:16:51.013
> 
> 标签：java, hibernate

在我的应用程序中，以下是场景，客户端请求 eventId。在服务器端，打开新会话-> 创建新的 eventId，并将其存储在数据库中，并将 eventId 发送给客户端-> 关闭会话。并且在使用该 eventId 的客户端向服务器发送 VO 之后。在服务器端，我们首先使用 session.get() 方法检查 eventId 是否存在。但问题是每次 session.get() 方法给出随机行为时，意味着有时它说 eventId 存在，有时不存在。检查 eventID 的代码是否存在：

```
 Session session = HibernateUtil.currentSession();
    Event event = (Event) session.get(Event.class,eventId);
    if(event != null){
       syso("Event is present");
    } else {
       syso("Event is not present");
    } 
```

谁能解释什么是问题？这是由于会话保持打开或其他任何原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T12:29:43.267

您正在使用有时尚未提交到数据库的事务。

尝试

```
t=session.beginTransaction();
session.save(newEvent);
t.commit();
session.flush(); 
```

问候

# c# - 将 C# 日期时间转换为字符串并返回

> ID：10798980
> 
> 赞同：32
> 
> 时间：2012-05-29T12:16:55.860
> 
> 标签：c#, string, datetime, data-conversion

我正在将 C# 日期时间转换为字符串。后来当我将它转换回**DateTime**对象时，它们似乎不相等。

```
const string FMT = "yyyy-MM-dd HH:mm:ss.fff";
DateTime now1 = DateTime.Now;
string strDate = now1.ToString(FMT);
DateTime now2 = DateTime.ParseExact(strDate, FMT, CultureInfo.InvariantCulture);
Console.WriteLine(now1.ToBinary());
Console.WriteLine(now2.ToBinary()); 
```

这是示例。看起来所有内容都包含在字符串格式中，当我打印日期时都显示相同，但​​是当我比较对象或以二进制格式打印日期时，我看到了差异。我看起来很奇怪，你能解释一下这里发生了什么吗？

这是上面代码的输出。

```
-8588633131198276118
634739049656490000 
```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-05-29T12:19:20.947

如果要[`roundtrip`保留](http://msdn.microsoft.com/en-us/library/az4se3k1.aspx#Roundtrip)`DateTime`.

> “O”或“o”标准格式说明符表示使用保留时区信息的模式的自定义日期和时间格式字符串。对于 DateTime 值，此格式说明符旨在保留日期和时间值以及文本中的 DateTime.Kind 属性。如果样式参数设置为 DateTimeStyles.RoundtripKind，则可以使用 DateTime.Parse(String, IFormatProvider, DateTimeStyles) 或 DateTime.ParseExact 方法解析格式化的字符串。

使用您的代码（除了更改格式字符串）：

```
const string FMT = "O";
DateTime now1 = DateTime.Now;
string strDate = now1.ToString(FMT);
DateTime now2 = DateTime.ParseExact(strDate, FMT, CultureInfo.InvariantCulture);
Console.WriteLine(now1.ToBinary());
Console.WriteLine(now2.ToBinary()); 
```

我得到：

```
-8588633127598789320
-8588633127598789320 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2016-12-31T18:27:52.077

Oded 的回答很好，但它不适用于 UTC 日期。为了让它适用于 UTC 日期，我需要指定“RoundtripKind”的 DateTimeStyles 值，这样它就不会试图假设它是本地时间。这是上面的更新代码：

```
const string FMT = "O";
DateTime now1 = DateTime.Now;
string strDate = now1.ToString(FMT);
DateTime now2 = DateTime.ParseExact(strDate, FMT, CultureInfo.InvariantCulture, DateTimeStyles.RoundtripKind);
Console.WriteLine(now1.ToBinary());
Console.WriteLine(now2.ToBinary()); 
```

请注意，这适用于 UTC 和本地日期。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-29T12:37:22.690

2件事：

1.  您可以使用带有 DateTimeStyle 参数的 ParseExact 重载来指定`AssumeLocal`.

2.  除非您将精度提高到 7 位而不是 3 位，否则 now1 和 now2 之间仍然会有细微差别：“yyyy-MM-dd HH:mm:ss.fffffff”

    ```
     const string FMT = "yyyy-MM-dd HH:mm:ss.fffffff";
        DateTime now1 = DateTime.Now;
        string strDate = now1.ToString(FMT);
        DateTime now2 = DateTime.ParseExact(strDate, FMT, CultureInfo.InvariantCulture, DateTimeStyles.AssumeLocal);
        Console.WriteLine(now1.ToBinary());
        Console.WriteLine(now2.ToBinary()); 
    ```

即使没有上述更改，now1 和 now2 之间的计算差异看起来也很小，即使二进制值看起来并不相似。

```
 TimeSpan difference = now2.Subtract(now1);
        Console.WriteLine(difference.ToString()); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-10-09T15:42:15.927

如果您不需要字符串是人类可读的（例如，您想在存储之前对其进行加密），您可以调用`string str = dt1.ToBinary().ToString();`并`DateTime dt2 = DateTime.FromBinary(long.Parse(str));`

```
DateTime now1 = DateTime.Now;
string strDate = now1.ToBinary().ToString();
DateTime now2 = DateTime.FromBinary(long.Parse(strDate));
Console.WriteLine(now1.ToBinary());
Console.WriteLine(now2.ToBinary()); 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-11-05T06:48:55.353

只需使用此代码即可将日期时间转换为字符串并将字符串转换为日期时间

> ```
> using System;
> using System.Collections.Generic;
> using System.ComponentModel;
> using System.Data;
> using System.Drawing;
> using System.Text;
> using System.Windows.Forms;
> 
> namespace DateTimeConvert
> {
>     public partial class Form1 : Form
>     {
>         public Form1()
>         {
>             InitializeComponent();
>         }
> 
>         private void button1_Click(object sender, EventArgs e)
>         {
>               label1.Text = ConvDate_as_str(textBox1.Text);
>         }
> 
>         public string ConvDate_as_str(string dateFormat)
>         {
>             try
>             {
>                 char[] ch = dateFormat.ToCharArray();
>                 string[] sps = dateFormat.Split(' ');
>                 string[] spd = sps[0].Split('.');
>                 dateFormat = spd[0] + ":" + spd[1] + " " + sps[1];
>                 DateTime dt = new DateTime();
>                 dt = Convert.ToDateTime(dateFormat);
>                 return dt.Hour.ToString("00") + dt.Minute.ToString("00");
>             }
>             catch (Exception ex)
>             {
>                 return "Enter Correct Format like <5.12 pm>";
>             }
>         }
> 
>         private void button2_Click(object sender, EventArgs e)
>         {
>             label2.Text = ConvDate_as_date(textBox2.Text);
>         }
> 
>         public string ConvDate_as_date(string stringFormat)
>         {
>             try
>             {
>                 string hour = stringFormat.Substring(0, 2);
>                 string min = stringFormat.Substring(2, 2);
>                 DateTime dt = new DateTime();
>                 dt = Convert.ToDateTime(hour+":"+min);
>                 return String.Format("{0:t}", dt); ;
>             }
>             catch (Exception ex)
>             {
>                 return "Please Enter Correct format like <0559>";
>             }
>         }
>     }
> } 
> ```

# log4net - Log4net RollingFileAppender 文件名仅带有日期时间

> ID：10798985
> 
> 赞同：2
> 
> 时间：2012-05-29T12:17:09.927
> 
> 标签：log4net

使用配置：

```
<file value="C:\\MyLog"/> 
<datePattern value="yyyyMMdd'.log'" /> 
```

我可以获得名为“ **Mylog20120529.log** ”的历史日志。

我想知道我是否可以获得名为“ **20120529.log** ”的日志。

伙计们

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T12:46:00.137

在这里应用一个技巧，它会完成这项工作。

```
<file value="C:\\MyLog\20"/> 
<datePattern value="yyMMdd'.log'" /> 
```

# codeigniter-2 - Code Igniter：上传多张图片

> ID：10798992
> 
> 赞同：0
> 
> 时间：2012-05-29T12:17:45.813
> 
> 标签：codeigniter-2

我的代码：

**看法**

```
<?php echo form_open_multipart('projects/create') ?>
<label for="pro_video">Project Image</label>
    <?php echo form_upload(array('name'=>'pro_image', 'type'=>'file', 'multiple'=>'multiple', 'accept'=>'image/*'))?>
<input type="submit" name="create_project" value="Create" />
</form> 
```

**控制器**

```
 public function __construct()
        {
            parent::__construct();
            $this->load->library('image_lib');
            $this->load->helper(array('form', 'url', 'html'));
            $this->load->library('form_validation');
        }

public function create()
    {
    if( sizeof($_FILES['pro_image']) > 0 ){

        $config['upload_path'] = './test_upload/';
        $config['allowed_types'] = 'gif|jpg|png|jpeg';

        $this->load->library('upload', $config);

        $this->image_lib->initialize($config);

            for( $i = 0; $i < sizeof($_FILES['pro_image']['name']); $i++ ){

                   $this->upload->do_upload('pro_image');
            }
    }
} 
```

但它上传最后一张图片.. :(

在 var_dump($_FILES) 上：

```
array(1) {
  ["pro_image"]=>
  array(5) {
    ["name"]=>
    array(2) {
      [0]=>
      string(10) "Desert.jpg"
      [1]=>
      string(10) "Tulips.jpg"
    }
    ["type"]=>
    array(2) {
      [0]=>
      string(10) "image/jpeg"
      [1]=>
      string(10) "image/jpeg"
    }
    ["tmp_name"]=>
    array(2) {
      [0]=>
      string(23) "E:\wamp\tmp\phpA235.tmp"
      [1]=>
      string(23) "E:\wamp\tmp\phpA245.tmp"
    }
    ["error"]=>
    array(2) {
      [0]=>
      int(0)
      [1]=>
      int(0)
    }
    ["size"]=>
    array(2) {
      [0]=>
      int(845941)
      [1]=>
      int(620888)
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T13:17:34.790

感谢朋友我使用了 HTML5**文件**标签

# javascript - 由简单的for循环引起的javascript无限循环

> ID：10798993
> 
> 赞同：3
> 
> 时间：2012-05-29T12:17:54.137
> 
> 标签：javascript, for-loop, infinite-loop

由于这一小段代码，我得到了一个无限循环。如果我在循环之前将 var i 声明为任何值（即 var i = 0），它就会变得固定，我不知道为什么。熟悉javascript错综复杂的人可以向我解释这里发生了什么吗？

```
for (num = 1; num <= 2; num++) {
    for (i = 1; i < num; i++) {
      console.log("hi");
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T12:33:47.807

由于`i`未声明为 local `var`，因此您的代码实际上是在更改变量/对象`window.i`以及`window.num`

Adding `var` keywords should fix the problem:

```
for (var num = 1; num <= 2; num++) {
    for (var i = 1; i < num; i++) {
      console.log("hi");
    }
} 
```

This doesn't answer the question why the program goes into an infinite loop. But you only know that the hanging code was trying to alter `window.i` and `window.num` which might be used elsewhere.

Read more about *javascript scoping rules*.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T12:25:33.113

代码似乎很好，请在[此处](http://jsfiddle.net/X3tUa/1/)查看 jsFiddle 的实际操作。

另一个注意事项：小心 javascript 中的变量。您应该始终使用`var`来声明它们；如果你忘记了他们最终会成为全球性的！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T12:30:40.660

它不应该是无限的，但这是可能发生的情况。

您在没有声明 var 的情况下访问 i 意味着您将其用作全局变量而不是本地变量。试着仔细分析你的代码，找出任何在你的循环中弄乱的全局“i”或“num”。