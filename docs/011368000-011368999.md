# StackOverflow 问答 11368000-11368999

# javascript - javascript动态更改表单onsubmit

> ID：11368000
> 
> 赞同：6
> 
> 时间：2012-07-06T18:48:34.027
> 
> 标签：javascript, validation, checkbox, checked, onsubmit

我有一个带有一些操作和 onsubmit 值的表单，它是通过提交输入标签提交的。问题是它应该可以通过两个按钮提交，所以我为第二个按钮编写了一个函数来更改表单的 action 和 onsubmit 值：

```
<a href="javascript:submitCompare()" class="submit">Compare</a>

function submitCompare()
{
    document.myForm.action = "anotherAction.php";
    document.myForm.onsubmit = function() {return countChecked()};
    document.myForm.submit();
}

function countChecked()
{
  var n = $(".reports input:checked").length;
  if (n >= 3 ) {
    alert ('You must select less than 3 reports.');
    return false;
  }
  else return true;
} 
```

单击比较链接后，它会正确地将我发送到 anotherAction.php 页面，但即使我有超过 2 个选中的复选框（这是验证规则）。有人可以帮助我使 onsubmit 功能正常工作吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T18:52:15.837

```
document.myForm.onsubmit = function() {return countChecked()}; 
```

应该

```
document.myForm.onsubmit = function( e ) {
   e = e || window.event;
   if ( !countChecked() ) {
       e.preventDefault();
       e.returnValue = false;
   }
}; 
```

在提交时返回 false 只会结束任何进一步的函数执行。如果您不想提交，则希望阻止默认提交行为。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-08-09T14:42:53.833

这是一个迟到的回复，但如果其他人正在看这个......

代替：

```
document.myForm.onsubmit = function() {return countChecked()}; 
```

我想你想要：

```
document.myForm.setAttribute("onsubmit", "return countChecked()"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T18:53:56.760

在`submitCompare()`中，您明确且无条件地调用

```
 document.myForm.submit(); 
```

你可能想要的是

```
 if (countChecked()) {
   document.myForm.submit();
 } 
```

# authentication - Cakephp 2.1- 使用 AuthComponent 的登录系统

> ID：11368001
> 
> 赞同：2
> 
> 时间：2012-07-06T18:48:45.890
> 
> 标签：authentication, logging, authorization, cakephp-2.0

我现在因为一个问题而发疯了好几天。我使用了 youtube 上的文档和视频。还有一些仅关于该特定问题的教程。但是有一些我看不到的错误。我使用 cakephp 在 Web 系统中创建了一个登录系统。我的用户表如下：

```
 CREATE TABLE `usuarios` (
    `Id` INT(50) UNSIGNED NOT NULL AUTO_INCREMENT,
    `grupo_id` INT(50) UNSIGNED NOT NULL,
    `Status` VARCHAR(30) NOT NULL COMMENT 'Coordenador/Bolsista/Super',
    `Nome` VARCHAR(50) NOT NULL,
    `Login` VARCHAR(50) NOT NULL,
    `Email` VARCHAR(50) NOT NULL,
    `Senha` VARCHAR(50) NOT NULL,
    `created` DATETIME NULL DEFAULT NULL,
    `modified` DATETIME NULL DEFAULT NULL,
    PRIMARY KEY (`Id`),
    UNIQUE INDEX `Login` (`Login`),
    UNIQUE INDEX `Nome` (`Nome`),
    INDEX `FK_usuarios_grupos` (`grupo_id`),
    CONSTRAINT `FK_usuarios_grupos` FOREIGN KEY (`grupo_id`) REFERENCES `grupos` (`Id`) ON UPDATE CASCADE
)
COLLATE='latin1_swedish_ci'
ENGINE=InnoDB
AUTO_INCREMENT=8; 
```

其中 Status 是系统不同部分的授权级别。评论中描述了这 3 个选项。

```
In my AppController, after some time, I coded:

    class AppController extends Controller {
    public $components = array('Session',
                               'Auth'=>array(
                                          'authenticate' => array(
                            'Form' => array(
                                           'fields'=>array(
                                                           'username'=>'Login',
                                                           'password'=>'Senha'
                                                            ),
                                    'userModel'=> 'Usuario'
                            ),
                           ),
                           'loginAction' =>array(
                                                    'Controller' => 'Usuarios',
                                                    'action' => 'login'
                                           ),
                'loginRedirect'=>array('Controller'=>'Usuarios', 'action'=>'index'), 
                'logoutRedirect'=>array('Controller'=>'Usuarios', 'action'=>'index'), 
                'authError'=>"You can't access that page", 
                'authorize'=>'Controller', 
                'loginError'=> 'Login errado'

            )
    );

    public function isAuthorized($usuario=null) {
        //return parent::isAuthorized($usuario);
        return true;
    }

    public function beforeFilter() {
        $this->Auth->allow('index','view');
        $this->set('logged_in', $this->Auth->loggedIn());
        $this->set('current_user', $this->Auth->user());
    }
    }?> 
```

isAuthorized 方法有两个选项，因为我正在尝试……主要问题是，每次我尝试登录时，我都会看到 AuthError 消息。无论是已注册的（带有散列密码）还是无效的。我不明白为什么会发生这种情况，但我怀疑这是 isAutorized 方法的问题。

我的特定控制器具有以下相关方法：

```
public function login() {
        if ($this->request->is('post')) {
            if ($this->Auth->login()) {
                return $this->redirect($this->Auth->redirect());   
            } else {
                $this->Session->setFlash(__('Username or password is incorrect'), 'default', array(), 'auth');
                $this->Session->setFlash('Username or password is incorrect');

            }
        }
    }

    public function logout() {
        $this->redirect($this->Auth->logout());
    }   
    public function beforeFilter() {
        parent::beforeFilter();
        $this->Auth->allow('add_bolsista','logout');
    }

    public function isAuthorized($usuario = null) {
        if (($usuario['Status'] == 'Super') || ($usuario['Status'] == 'Coordenador') || ($usuario['Status'] == 'Bolsista')) {
            return true;
        }
        if (in_array($this->action, array('edit', 'delete'))) {
            if ($usuario['Id'] != $this->request->params['pass'][0]) {
                return false;
            }
        }
        return true;
    }

    public function isAuthorized($usuario = null) {
    // Any registered user can access public functions
    if (empty($this->request->params['Bolsista'])) {
        return true;
    }

    // Only admins can access admin functions
    if (isset($this->request->params['Super'])) {
        return (bool)($usuario['Status'] === 'Super');
    }

    // Default deny
    return false;
} 
```

两个版本的 isAuthorized...似乎都没有真正起作用。任何人？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T08:02:00.950

如果您只想使用 auth 组件登录系统，则无需定义 isAuthorized 方法。不使用此方法尝试一次。

您不需要在您的特定控制器中的 allow() 方法中提供注销方法，而是应该在其中定义“登录”，因为该方法将可以公开访问。希望它对你有用。

# c# - 将 DockPanel 调整为 DockZone 的高度和宽度

> ID：11368025
> 
> 赞同：1
> 
> 时间：2012-07-06T18:50:16.137
> 
> 标签：c#, asp.net, devexpress

我正在尝试将动态停靠面板的大小调整为在运行时包含在 javascript（客户端）中的停靠区域的大小。我正在使用 Dev Express DockZone 和 DockPanel。我的 JScript 看起来像这样：

```
function setDockPanelFill() {
    var dockPanel = ASPxClientControl.GetControlCollection().GetByName('dockPanel1');
    var dockZone = document.getElementById('zone1');
    dockPanel.SetHeight = dockZone.offsetHeight;
    dockPanel.SetWidth = dockZone.offsetWidth;
} 
```

关于为什么这不起作用的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T09:29:07.007

设置[ASPxDockZone](http://documentation.devexpress.com/#AspNet/clsDevExpressWebASPxDockingASPxDockZonetopic)。[ClientInstanceName](http://documentation.devexpress.com/#AspNet/DevExpressWebASPxDockingASPxDockZone_ClientInstanceNametopic)到例如 dockZone1。
设置[ASPxDockPanel](http://documentation.devexpress.com/#AspNet/clsDevExpressWebASPxDockingASPxDockPaneltopic)。[PanelUID](http://documentation.devexpress.com/#AspNet/DevExpressWebASPxDockingASPxDockPanel_PanelUIDtopic)例如dockPanel1。
此外，[SetHeight](http://documentation.devexpress.com/#AspNet/DevExpressWebASPxClassesScriptsASPxClientControl_SetHeighttopic)和[SetWidth](http://documentation.devexpress.com/#AspNet/DevExpressWebASPxClassesScriptsASPxClientControl_SetWidthtopic)是方法，而不是属性。
所以你的代码应该是这样的：

```
function setDockPanelFill() {
    var dockPanel = dockZone1.GetPanelByUID('dockPanel1');
    dockPanel.SetHeight(dockZone1.GetHeight());
    dockPanel.SetWidth(dockZone1.GetWidth());
} 
```

# vb.net - 如何在 VB.NET 中扩展/装饰第三方类？

> ID：11368026
> 
> 赞同：1
> 
> 时间：2012-07-06T18:50:22.893
> 
> 标签：vb.net, interface, metaprogramming, aop, decorator

在 Ruby 中，所有的类都是永远开放的。几乎任何时候都可以将新行为添加到任何类中。有没有办法在 VB.NET 中做到这一点？

例如，如果我希望现有应用程序（大型应用程序）中的所有 DataRows 都采用新行为，该怎么办。我意识到我可以创建一个从 DataRow 继承的自定义行类，但继承不是我所追求的。这将涉及大量返工，以确保在所有地方都实例化行，我们是从自定义行类中实例化的。

关于如何做到这一点，我有两个粗略的想法：

1.  我突然想到方面（AOP）可以在这里工作。 [有没有办法在现有方法之上分层行为？](https://stackoverflow.com/questions/11395606/is-there-a-simple-means-of-adding-an-aspect-to-an-existing-vb-net-method)

2.  是否可以[将给定的接口应用于现有的类](https://stackoverflow.com/questions/11368353/can-an-interface-be-retroactively-implemented-in-vb-net)。

这里的主要目标是不必对现有代码进行任何大型改造。系统实际上应该忽略这些分层的行为/方面。它应该涉及对代码库的最小更改。

目前，我们使用装饰器类实现分层方面。问题是，系统知道本地行和行装饰器对象之间的区别。我希望能够传递系统认为是本机行的东西。同样，系统不需要注意应用于行的装饰。它应该认为它有一个行，而不是一些特殊的装饰器。

具体来说，我想装饰一行的默认 set Item(colName) 属性，以便我可以修改传入的值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T18:54:23.440

您所要求的大部分内容都可以通过扩展方法实现。请参阅此处了解更多信息：

[http://msdn.microsoft.com/en-us/library/bb384936.aspx](http://msdn.microsoft.com/en-us/library/bb384936.aspx)

这是该链接中的一个示例，它为所有对象添加了一个`Print`方法：`String`

```
Module StringExtensions
    <Extension()> 
    Public Sub Print(ByVal aString As String)
        Console.WriteLine(aString)
    End Sub
End Module 
```

但是，您只能使用扩展方法来添加方法，而不是属性或字段。此外，您只能添加新方法或重载。您不能用新方法覆盖现有方法。

由于您所说的具体是覆盖类的索引器属性的能力，因此扩展方法在这种情况下对您没有帮助。我知道的唯一其他选择是欺骗您的项目使用您的包装类而不是真实的。您可以创建自己的库，该库在与您尝试扩展的任何库相同的命名空间中实现具有相同名称的相同类。您的包装库将引用真实的，并从原始的继承所有类。然后你可以随心所欲地扩展它们，你的其他项目可以简单地引用你的库而不是真正的库。为此，您当然需要使用大量命名空间别名和很可能的程序集引用别名（这在 VB.NET 中不可用，`extern`关键词）。但我怀疑这对你来说可能不值得。

# git - 当它应该失败时，使用带有选项的 JavaScriptCore 运行 JSHint

> ID：11368033
> 
> 赞同：0
> 
> 时间：2012-07-06T18:50:58.957
> 
> 标签：git, bash, jshint, javascriptcore

从运行以下的 jshint 目录中按预期失败：

```
env/jsc.sh ${REPO}/${FILE} 
```

但是当尝试添加选项时，它通过了：

```
env/jsc.sh ${REPO}/${FILE} "{browser:true}" 
```

我是否正确设置了选项？它评估的代码为了测试目的而故意添加了一条错误的行。这是执行该行的循环的 bash 脚本：

```
for FILE in `git diff-index --name-only ${against} -- | egrep *.js`; do
    cd ${JSHINT_HOME}

    env/jsc.sh ${REPO}/${FILE} "{browser:true}"

    EXIT_CODE=$((${EXIT_CODE} + $?))

done 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T09:19:21.987

我一直在寻找同样的东西，发现[这个 Git 拉取请求](http://github.com/jshint/jshint/pull/399)表明带有花括号的选项被奇怪地解析，结果如你所见。

去掉花括号，你可能会得到你期望的结果。

# java - java向量作用域

> ID：11368034
> 
> 赞同：1
> 
> 时间：2012-07-06T18:50:59.477
> 
> 标签：java

我正在尝试使用类变量（向量）并得到以下 2 个错误

1

> ```
> <identifier> expected
> [javac]     bucketList = AppConfig.findVector (BUCKET_LIST_KEY); 
> ```

2 在`getBucketList()`方法中，`bucketList`由于某种原因是 null ......即使它被定义为类的全局变量。

代码

```
import java.util.Vector;

public class MyClass {
   ...
   private Vector<String> bucketList;

   public ThingieConfig() throws IOException {

     @SuppressWarnings("unchecked")
     bucketList = AppConfig.findVector (BUCKET_LIST_KEY);       
     if (bucketList != null && !bucketList.isEmpty()) {
       log_.debug ("Bucketlist defined");
       log_.debug("Buckets Defined : " + bucketList);
     }//if
   }//thingie

   public Vector getBucketList() {
    log_.debug ("Returning Vector " + bucketList);
    return bucketList;
    }//getBucketList

}//class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T18:52:51.850

定义它的类成员变量并不意味着它将具有默认初始化，默认情况下它将是`null`

方法声明需要返回类型，以下无效

```
public ThingieConfig() throws IOException 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T18:52:56.867

```
public ThingieConfig() 
```

不是有效的方法。它没有返回类型，但类名是`MyClass`，所以它不能是构造函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T18:54:59.680

bucketList 需要初始化：

```
 private Vector<String> bucketList = new Vector<String>(); 
```

你需要说明你的方法返回什么，或者无效：

```
public void ThingieConfig() throws IOException { 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T19:45:36.923

假设`bucketList = AppConfig.findVector (BUCKET_LIST_KEY);`一旦所有其他错误都得到修复，这就是我所做的修复它。

某处，`bucketList`需要初始化。
例如，在 的第一行`ThingieConfig()`，您可以输入
`bucketList = new Vector<String>();`. 这可能不是您的最佳位置，但它应该出现在某个地方。

此外，每个方法都需要一个返回类型。所以这条线

`public ThingieConfig() throws IOException {`

应该

`public Vector<String> ThingieConfig() throws IOException {`

（因为您返回您的 bucketList）。

最后，`Vector`在 Java 中已弃用。我会考虑`ArrayList`改用。

# c# - 网站项目中的控制声明放在哪里

> ID：11368040
> 
> 赞同：0
> 
> 时间：2012-07-06T18:51:34.110
> 
> 标签：c#, asp.net, visual-studio-2010

我的网站无法访问代码隐藏中的控件

我拖动控件并将它们添加到 ASPX 文件中，当我尝试访问它们时我不能。

我尝试使用以下方法打开网站：

*   视觉工作室 2012
*   视觉工作室 2010

当我什至双击一个按钮时，它会在后面的代码中创建它的事件，但我仍然无法访问控件！

没有 Designer.cs 文件，因为这是一个网站，知道如何修复它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T19:07:01.630

如果没有记错，标记*是*缺少设计器文件的页面的设计器。您可以在已移植到 .NET 的经典 ASP 页面中观察到这种行为。

编译器只是解析页面，寻找包含`runat="server"`并为其生成服务器端控件的标记。如果没有 ID，则为其生成一个。此外，如果`AutoEventWireup="true"`在页面级别设置，事件将自动连接到这些控件，就像变魔术一样。如果你问我，这一切都只是编译器巫术，而是相当方便的编译器巫术。

但这是一个有根据的猜测，基于经验，我相信在 ASP.NET 内部有更多经验的人可以提供更多引人入胜的细节。（乔恩斯基特等人）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T19:00:34.460

确保您的 .aspx 文件指定其代码隐藏文件： `<%@ Page Title="" Language="C#" CodeFile="YourPage.aspx.cs" Inherits="Content_YourPage" %>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T19:08:01.827

如果它是一个网站，那么网站没有设计师。

但是，如果您需要设计器，请尝试将其转换为 Web 应用程序

# extjs - 使用 ArrayStore 在本地过滤网格

> ID：11368042
> 
> 赞同：1
> 
> 时间：2012-07-06T18:51:42.907
> 
> 标签：extjs, extjs4, extjs-mvc, extjs4.1

我需要`FILTER`根据某些标准来网格化。

例如; 如果有 3 个字段，`Name,age,school`. 我需要在本地过滤网格，以便它显示`age`网格中 10 的所有学生。

我读到如果我使用`Ext.data.ArrayStore`. 但我不确定如何将它应用到我的代码中。我的商店类看起来像这样；

```
Ext.define('Project.store.Person',{
    extend:'Ext.data.Store',
    model:'App.model.Person',   
    proxy: {
        type: 'ajax',
        url : '/person.php'
    }
}); 
```

我的模型；

```
Ext.define ('Project.model.Person',{
    extend: 'Ext.data.Model',   
    fields:['name','age','school']
}); 
```

我如何申请`Ext.data.ArrayStore`，以便在本地过滤列。`10`喜欢展示所有学年的学生`age`。

```
**UPDATE** 
```

网格视图

```
this.columns = [
    {
{ text: "Size", dataIndex: 'size' ,filter: {
            type: 'list',
            options: ['small', 'medium', 'extra large']

        } }, ... 
```

店铺

```
Ext.define('SerenExample.store.GridFilterExample',{
    extend:'Ext.data.Store',
    model:'App.model.GridFilterExample',
    remoteFilter: false,
    remoteGroup:true,
    proxy: { ... 
```

当我单击受尊重的列时，我没有看到显示过滤器的复选框

**更新**

```
Ext.define('SerenExample.view.GridFilterExample' ,{
extend: 'Ext.grid.Panel',
alias : 'widget.gridfilt',
features: [],
    initComponent: function() {
        this.store = 'GridFilterExample';

        this.columns = [
    {
    ... 
```

**更新 2**

```
GET http://localhost/SerenExample/feature/filters.js?_dc=1341677311248 404 Not Found 104ms
"NetworkError: 404 Not Found - http://localhost/SerenExample/feature/filters.js?_dc=1341677311248"

Ext.define('SerenExample.view.GridFilterExample' ,{
extend: 'Ext.grid.Panel',
alias : 'widget.gridfilt',
features: [  {ftype: 'filters',
            autoReload: false,
            local: true,                
            filters: [{
                type: 'list',
                dataIndex: 'status',
                            options: ['small', 'medium', 'extra large']
            }]}],
    initComponent: function() {
        this.store = 'GridFilterExample';

        this.columns = [
    { 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T19:47:05.717

你不需要使用`ArrayStore`. 只需`remoteFilter: false`在您的商店定义中指定并应用过滤器。它将在本地完成。

# html - HTML 属性编码

> ID：11368044
> 
> 赞同：5
> 
> 时间：2012-07-06T18:51:48.137
> 
> 标签：html, asp.net-mvc-3, encoding, razor, xss

我有一个 .cshtml 页面，其中包含以下 HTML：

```
<div class="content rowBody">
       <span class="rowText" title="@description">                           
              @description                           
       </span>
</div> 
```

如果@description 的值为：我看到它在*title*`<img src=x onerror=alert(/XSS/.source)>`属性 中像这样显示并因此执行，而span 标记之间的那个似乎已编码并且不会触发警报框。

 *我的假设是 Razor 引擎视图尝试对 @ 前面的任何内容进行编码。这不适用于 HTML 属性吗？

生成源：

```
<div style="margin-left: 31px;" class="content rowBody unselectable" unselectable="on">
                        <span class="rowText unselectable" title="<img src=x onerror=alert(/XSS/.source)>" unselectable="on">                           
                            &lt;img src=x onerror=alert(/XSS/.source)&gt;                           
                        </span>
                    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T21:47:07.920

看起来您在这里看到的是基于上下文的不同编码。HTML 标记所需的输出编码与 HTML 属性不同，因为它对于 JavaScript 和 CSS 不同。

话虽如此，我无法用干净的 MVC4 项目重现这种行为。你用的是什么版本？*

# c# - 更新面板和回发问题

> ID：11368047
> 
> 赞同：0
> 
> 时间：2012-07-06T18:52:06.507
> 
> 标签：c#, asp.net, updatepanel, postback

我有 2 个 ddl、ddlCountry 和 ddlState，在选择 ddlCountry 时，ddlState 会根据所选国家/地区进行更新，但是...当我选择 ddlState 时，ddlState 中的所选项目未标记为选中，因此我无法获得选定的值。

这是代码：

```
<asp:DropDownList 
    ID="ddlReceiverCountry" 
    runat="server" 
    CssClass="textBox" 
    OnSelectedIndexChanged="ddlReceiverCountry_SelectedIndexChanged" 
    AutoPostBack="true" >
</asp:DropDownList>
    <br />
<asp:UpdatePanel ID="updatePanel" runat="server" UpdateMode="Conditional"  >
    <ContentTemplate>
        <asp:Label ID="lblReceiverState" runat="server" Text="State" CssClass="newReceiverlabel">
        </asp:Label>
        <asp:DropDownList 
            ID="ddlReceiverState" 
            runat="server" 
            CssClass="textBox" OnSelectedIndexChanged="ddlReceiverState_SelectedIndexChanged">     
        </asp:DropDownList>
    </ContentTemplate>
    <Triggers>
        <asp:PostBackTrigger ControlID="ddlReceiverState" />
        <asp:AsyncPostBackTrigger ControlID="ddlReceiverCountry" EventName="SelectedIndexChanged"   />
    </Triggers>
</asp:UpdatePanel> 
```

# javascript - 动态项和 jQuery 事件绑定

> ID：11368056
> 
> 赞同：0
> 
> 时间：2012-07-06T18:52:25.827
> 
> 标签：javascript, jquery, events

我目前正在根据一些网络调用动态填充列表。当这些调用返回时，我使用 HTML 模板根据调用响应将另一个项目添加到列表中。我还尝试使用 jQuery 将一些事件附加到这些对象，但是当我生成项目时，似乎只有最后一个生成的项目会触发适当的事件。

所以这里是代码：

javascript 生成 html 字符串并将其添加到列表中：

```
List.innerHTML += html; 
```

html 是使用 moustache.js 生成并正确呈现，我在添加之前在模板中设置了 id。

该模板具有以下形式：

```
var template = '<li style="width:400px; height:100px" id="{{id}}"  ><img src="{{source}}" style="float:left"/>{{title}} <button id="{{id}}button">Delete</button></li>'; 
```

所有元素都被适当替换的地方。

然后我尝试将单击事件附加到按钮并将双击事件附加到整个列表对象：

```
$('#' +id +'button').bind('click', function() {
       //SOME STUFF GOES HERE
     });

$('#' +id +'button').bind('dblclick', function() {
     //MORE STUFF GOES HERE
     }); 
```

我不确定为什么事件不会附加到每个对象，我错过了什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T18:56:16.860

添加点击处理程序时，浏览器上的 DOM 可能尚未更新。你有几个选择：

1.  使用委托绑定（使用 .on）
2.  在将事件添加到 DOM 之前附加事件

示例 1：

```
$('body').on('click', '#' +id +'button', function () { /* foo */ }); 
```

示例 2：

```
$('#' +id +'button', myHtml).on('click', function () { /* foo */ });
List.append(myHtml); 
```

# jboss - 试图澄清JBoss Application Server和Seam之间的关系：

> ID：11368063
> 
> 赞同：0
> 
> 时间：2012-07-06T18:52:54.840
> 
> 标签：jboss, seam, application-server

我试图澄清 JBoss Application Server 和 Seam 之间的关系：

1.  Seam 发行版或其任何部分是否包含在标准 JBoss AS 下载 zip 文件中？
2.  如果只包含 Seam 发行版的一部分，是哪一部分？
3.  [如果不是，Seam 发行版是否打算从http://www.jboss.org/projects](http://www.jboss.org/projects)单独下载并添加到 AS 中？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T20:18:32.353

Seam 不与 JBoss AS 一起分发。它是一个旨在支持 Web 应用程序开发的框架（很像 Spring 或 Struts），并且不以任何方式与 JBoss AS 绑定（您可以在 Glassfish 或任何其他应用程序服务器中同样出色地使用 Seam，而 JBoss AS 不需要 Seam完全）。

通常，Seam 库是您自己项目的一部分，位于 EAR 或 WAR 库中。[它可以从www.seamframework.org](http://www.seamframework.org)或 JBoss 项目站点单独下载，并且通常以“运行时”形式分发（您可以获得 seam 库以及所有依赖项和实用程序，例如`seam-gen`用于项目生成）。

# android - 用户退出 EditBox 后立即混淆密码

> ID：11368064
> 
> 赞同：0
> 
> 时间：2012-07-06T18:52:55.697
> 
> 标签：android

如何在用户离开 EditBox 之前对密码进行非混淆处理，然后再对其进行混淆处理？我希望用户在输入密码时能够看到密码，但在输入密码后立即对其进行混淆并转到其他字段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T19:01:01.617

我认为 android 没有内置功能来执行此操作，但您可以通过子类化 TextView 并更改 onFocusChanged 方法中的字符来轻松完成此操作。将密码字符存储在变量中，并在窗口失去焦点时用点替换它们。当它获得焦点时，摆脱点并将字符放回原处。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T19:16:38.487

您可以使用`PasswordTransformationManager`类和`OnFocusChangedListener`. 试试这个：

```
myEditText.setOnFocusChangeListener(new View.OnFocusChangeListener()
{
    @Override
    public void onFocusChange(View view, boolean focused)
    {
        if(focused)
           ((EditText)view).setTransformationMethod(null);
        else
           ((EditText)view).setTransformationMethod(PasswordTransformationMethod.getInstance());
    }
}); 
```

这基本上与设置 xml 属性相同`android:password="true"`，但仅在 EditText 没有焦点时。

# python - 如何使用初始数据附加一个新的 wtforms FormField 作为默认值？

> ID：11368067
> 
> 赞同：5
> 
> 时间：2012-07-06T18:53:03.043
> 
> 标签：python, flask, wtforms

我有一个带有 的表单`wtform`，我想使用`JobItemForm`向我的表单添加一个新表单。已命名。我通过这样的模型添加选择字段数据`JobForm``append_entry``JobItemForm``selectField``company`

```
form.jobs[0].company.choices = company_list 
```

现在我`append_entry`没有任何选择地使用，我收到一个错误。那么我怎样才能调用`append_entry`一些初始数据呢？

```
class JobItemForm(Form):
    company = SelectField(_('company'), description=_('<a href="/education/institute/add/">new company"</a>'))
    title = TextField(_('title'), [validators.Length(min=4, max=250)])
    date_from = DateField(_("date_from"), format='%Y-%m-%d')
    date_to = DateField(_("date_to"), format='%Y-%m-%d')
    description = TextAreaField(_('description'))

class JobForm(Form):
    jobs = FieldList(FormField(JobItemForm), min_entries=3)
    add_job = SubmitField(_('Add job')) 
```

像这样的东西

```
@mod.route('/edit/', methods=['GET', 'POST'])
@login_required
def edit_job():
    """
    edit job
    """
    company_list = Company.Company_list()
    form_title = "Edit job Form"
    if request.method != 'POST':
        form = JobForm()
        form.jobs[0].company.choices = company_list
        return render('form.html', form=form, form_title=form_title)
    form = JobForm(request.form)
    if form.add_job.data:
        new_item_job = form.jobs.append_entry()
        new_item_job.company.choices = company_list
        return render('form.html', form=form, form_title=form_title)

    form.validate
    if form.errors != dict():
        return render('form.html', form=form, form_title=form_title)
    # save data
    flash(_("Edit successfully!"))
    return render('registration/succesful.html') 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-07T17:33:40.920

有一个更好的方法可以做到这一点：

```
 form.jobs[0].company.choices = company_list 
```

Wtforms 具有 GAE、Django 和 SQLAlchemy 的扩展，支持 orm 支持的表单字段。[扩展文档](http://wtforms.simplecodes.com/docs/0.6/ext.html)。

对于 sqlalchemy，它的工作原理如下：

```
 from wtforms.ext.sqlalchemy.fields import QuerySelectField

    def fill_field():
         return Model.query

    myfield = QuerySelectField(query_factory=fill_field) 
```

这段代码会自动为您填充数据库模型中的选择。

（我没有你实际的错误，所以我只是在这里猜测）

add_job 之后没有选择错误的原因是您仅在它是 GET 请求时才填写选择。您需要在 Post 请求之后添加选项，如下所示：

```
 def your_view():
        form = YourForm()
        form.fieldname.choices = choice_list
        # Here comes your code for GET and POST request both 
```

# android - 解析数据 org.json.JSONException 时出错：字符 18696 处的未终止对象

> ID：11368074
> 
> 赞同：0
> 
> 时间：2012-07-06T18:53:51.690
> 
> 标签：android, json

谁能给我解释一下这个错误是什么意思？我在 SO 上搜索了一些与我的主题类似的帖子，根据我的理解，JSON 无法解析某个字符？

我正在使用 Eclipse 开发一个 android 应用程序。

这是我的日志：

```
 07-06 11:07:06.276: E/JSONfunction(1269): Error parsing data org.json.JSONException: Unterminated object at character 18696 of {"driver":"230","firstName":"****","lastName":"*********","gps_data": "stale","last_geocode": "","lastLatitudeUpdate": "","suspended":"false","scheduled":"Yes","scheduled_start":"06:00","status": "0","check-in": "False","check-out": "04:09:00 06-22-2012","jobs_assigned": "25","jobs": [{ "job": "1639859", "pays": "$******", "ready_at": "7/6/2012 6:00:00 AM", "due_by": "7/6/2012 4:00:00 PM", "customer_reference": "748558 ", "pieces": "230", "weight": "0", "pickup_name": "DHL SMART & GLOBAL MAIL ", "pickup_addr1": "***** S WILMINGTON AVE ", "pickup_city": "******", "pickup_state": "CA ", "pickup_zip_postal": "***** ", "deliver_name": "DHL SMART & GLOBAL MAIL ", "deliver_addr1": "**** S. **** AVENUE", "deliver_city": "PHOENIX", "deliver_state": "AZ", "deliver_zip_postal": "85043", "signature_required": "Y", "pickup_to_see": "", "pickup_room": "", "pickup_phone": "(310) ***-****", "deliver_to_see": "", "deliver_room": "", "pickup_special_instr": "", "deliver_special_instr": "375 MILES", "deliver_phone": ""}, { "job": "*******", "pays": "$******", "ready_at": "7/6/2012 10:00:00 AM", "due_by": "7/6/2012 5:00:00 PM", "customer_reference": "DAILY: LAX-LAS ", "pieces": "230", "weight": "6", "pickup_name": "EZ ********* ", "pickup_addr1": "*** ******* AVE ", "pickup_city": "INGLEWOOD", "pickup_state": "CA ", "pickup_zip_postal": "90301 ", "deliver_name": "SAMPLES LOGISTICS ", "deliver_addr1": "7350 ******** **** STE 170", "deliver_city": "HENDERSON", "deliver_state": "NV", "deliver_zip_postal": "89011", "signature_required": "Y", "pickup_to_see": "", "pickup_room": "", "pickup_phone": "(310) ***-****", "deliver_to_see": "", "deliver_room": "", "pickup_special_instr": "", "deliver_special_instr": "", "deliver_phone": "(702) ***-****"}, { "job": "*******", "pays": "$***.00", "ready_at": "7/6/2012 10:30:00 AM", "due_by": "", "customer_reference": "7011200316.1 ", "pieces": "0", "weight": "0", "pickup_name": "LVNA - SAN DIMAS ", "pickup_addr1": "*** WEST ****** BLVD ", "pickup_city": "SAN DIMAS", "pickup_state": "CA ", "pickup_zip_postal": "***** ", "deliver_name": "LVNA WESTCOAST WAREHOUSE ", "deliver_addr1": "**** S ********* AVE", "deliver_city": "ONTARIO", "deliver_state": "CA", "deliver_zip_postal": "91761", "signature_required": "Y", "pickup_to_see": "", "pickup_room": "", "pickup_phone": "", "deliver_to_see": "", "deliver_room": "STE 100 ", "pickup_special_instr": "", "deliver_special_instr": "", "deliver_phone": "(909) ***-****"}, { "job": "*******", "pays": "$***.00", "ready_at": "7/6/2012 12:00:00 PM", "due_by": "7/7/2012 4:39:00 AM", "customer_reference": "RT #6: NORTH ORANGE ", "pieces": "230", "weight": "0", "pickup_name": "VARIOUS PICK-UPS ", "pickup_addr1": "", "pickup_city": "*******", "pickup_state": "CA ", "pickup_zip_postal": "***** ", "deliver_name": "UPS MAIL INNOVATIONS ", "deliver_addr1": "***** ****** AVE STE 100", "deliver_city": "FONTANA", "deliver_state": "CA", "deliver_zip_postal": "92337", "signature_required": "Y", "pickup_to_see": "", "pickup_room": "", "pickup_phone": "", "deliver_to_see": "", "deliver_room": "", "pickup_special_instr": "", "deliver_special_instr": "", "deliver_phone": "(909) ***-****"}, { "job": "*******", "pays": "$***.00", "ready_at": "7/6/2012 12:00:00 PM", "due_by": "7/6/2012 4:30:00 PM", "customer_reference": "7011200***.2 ", "pieces": "0", "weight": "0", "pickup_name": "LVNA - SAN DIMAS ", "pickup_addr1": "**** ********* AVE ", "pickup_city": "BALDWIN PK/IRWDL", "pickup_state": "CA ", "pickup_zip_postal": "91706 ", "deliver_name": "LVNA ********* ********* ", "deliver_addr1": "**** S ********* AVE", "deliver_city": "ONTARIO", "deliver_state": "CA", "deliver_zip_postal": "91761", "signature_required": "Y", "pickup_to_see": "", "pickup_room": "", "pickup_phone": "", "deliver_to_see": "", "deliver_room": "STE *** ", "pickup_special_instr": "REQ 24' BOBTAIL", "deliver_special_instr": "DELIVER AT 10 PMMUST GO DIRECT ANDWAIT IN YARD!", "deliver_phone": "(909) ***-****" 
```

我不希望用银汤匙喂饱，只是希望有人能帮助我朝着正确的方向前进。谢谢！

编辑：如果我忘记包含任何信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T18:59:26.143

JSON 以“{”开头并以“}”结尾。如果日志完整，则缺少“}”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T15:24:05.610

我想通了，结果有时我的 JSON 字符串会返回引号，例如，一个字符串返回了 48"x40"x48" 的盒子大小尺寸，这就是它的原因。

# file - 使用关闭时参数数量错误

> ID：11368075
> 
> 赞同：1
> 
> 时间：2012-07-06T18:53:53.983
> 
> 标签：file, freepascal, lazarus

我正在编写一个小程序来将 TEdit 控件的内容保存在文件中。

这个想法是用户在 TEdit 控件中写一些东西，然后按下按钮在磁盘上写入文件，但是当尝试编译时我得到“unit1.pas(37,15) 错误：为调用“关闭”指定的参数数量错误"

我的表单只有 TEdit 控件和一个 TButton。

```
var
  Form1: TForm1;
  f: text;

procedure TForm1.Button1Click(Sender: TObject);
begin
     writeln (f,Edit1.Text);
     close (f);
end;

Begin
     assign (f,'code.txt');
     rewrite (f);
end. 
```

我到底做错了什么？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T19:02:07.703

通过谷歌搜索，我发现了这个

> Close 存在于 System unit（隐式使用）和 TCustomForm（TForm 祖先）类中。Pascal 标识符作用域规则使不合格的 Close 占据最内部的作用域。因此，如果您在 TForm 方法中调用它，则会调用 TForm 的 Close。为避免这种情况，请使用合格的调用（System.Close 从系统单元调用一个或 Self.Close 调用属于当前表单的那个）或从 ObjPas 单元（自动用于{$mode objfpc} 或 {$mode delphi})。

# java - 如何根据其运行时类型制作 JAXB Marshaller 编组抽象类？

> ID：11368076
> 
> 赞同：9
> 
> 时间：2012-07-06T18:53:53.983
> 
> 标签：java, jaxb, marshalling

考虑以下抽象类 -

```
public abstract class Car
{
    public abstract void drive(double miles);
} 
```

这是扩展上述类的示例类（用于说明目的）。

```
public class Ferrari extends Car
{
    private String lastUsed; // Ferrari specific field not in Car
    private boolean f1Car;   // Ferrari specific field not in Car

    @XmlElement
    public void setF1Car(boolean f1Car)
    {
        this.f1Car = f1Car;
    }

    public boolean isF1Car() { return f1Car; }

    @XmlElement
    public void setLastUsed(String lastUsed)
    {
        this.lastUsed = lastUsed;
    }

    public String getLastUsed() { return lastUsed; }

    public void drive(double miles)
    {
        // implementation
    }
} 
```

我有一个包含 Car 对象的报告类 -

```
@XmlRootElement
public class CarTestReport
{
    private String date;
    private double miles;
    private Car car;

    @XmlElement
    public void setDate(String date) { this.date = date;}

    public String getDate() {return date;}

    @XmlElement
    public void setMiles(double miles) { this.miles = miles; }

    public double getMiles() {return miles;}

    @XmlElement
    public void setCar(Car car) { this.car = car; }

    public Car getCar() { return car; }
} 
```

这是使用 JAXB 来编组 CarTestReport 对象的一段代码 -

```
public static void main(String[] args) throws Exception
{
    Ferrari ferrari = new Ferrari();
    ferrari.setLastUsed("July 5 2012");
    ferrari.setF1Car(false);

    CarTestReport  report = new CarTestReport();
    report.setDate("July 6 2012");
    report.setMiles(200);
    report.setCar(ferrari);

    File file = new File("carTestReport.xml");
    JAXBContext jaxbContext = JAXBContext.newInstance(CarTestReport.class);
    Marshaller jaxbMarshaller = jaxbContext.createMarshaller();

    jaxbMarshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
    jaxbMarshaller.marshal(report, file);
} 
```

问题是，由于抽象类型 Car，JAXB 在编组 CarTestReport 对象时忽略它并且不编组 Ferrari 对象。我得到的输出是这个 -

```
<carTestReport>
  <car/>
  <date>July 6 2012</date>
  <miles>200.0</miles>
</carTestReport> 
```

如您所见，“汽车”节点下没有输入任何内容，即使已填充 Ferrari 对象。如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-06T19:41:25.080

JAXB 系统不会通过类路径查找任何可能的带有 JAXB 注释的类。你必须帮助它找到它们。在您的示例代码中，它根本不知道`Ferrari`该类的存在。（它只看到`Car`，因为那是 getter 中的返回类型`CarTestReport`。）

告诉 JAXB 的一种快速而肮脏的方法是在类的顶部`Ferrari`添加。然后你会得到这样的输出：`@XmlSeeAlso({Ferrari.class})``Car`

```
<carTestReport>
  <car xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="ferrari">
    <f1Car>false</f1Car>
    <lastUsed>July 5 2012</lastUsed>
  </car>
  <date>July 6 2012</date>
  <miles>200.0</miles>
</carTestReport> 
```

告诉 JAXB 的另一种方法`Ferrari`是将该类传递给`JAXBContext.newInstance`方法，即：

```
JAXBContext jaxbContext = JAXBContext.newInstance(CarTestReport.class,
        Ferrari.class); 
```

或者，如果您所有的 JAXB 类都在同一个包中，例如`com.mycompany.carstuff`，那么您可以这样做：

```
JAXBContext jaxbContext = JAXBContext.newInstance("com.mycompany.carstuff"); 
```

在最后一种情况下，它将搜索该包中的所有类。

如果您希望它发出一个名为`ferrari`（而不是`<car xsi:type="ferrari">`上面的类似）的元素，一种可能性是添加`@XmlType`到您的`Car`类的顶部，如下所示：

```
import javax.xml.bind.annotation.XmlSeeAlso;
import javax.xml.bind.annotation.XmlType;

@XmlSeeAlso({Ferrari.class})
@XmlType
public abstract class Car {
  public abstract void drive(double miles);
} 
```

...并穿上`@XmlRootElement`，`Ferrari`例如：

```
import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement
public class Ferrari extends Car {
  // ...
} 
```

据我了解，这种注释组合告诉 JAXB`Car`该类映射到 XML 模式*类型*（因此您不会获得任何名为“car”的元素），并且`Ferrari`该类是该类型的*元素*（因此您*可以*拥有名为“法拉利”的元素）。并且其中的“根”`@XmlRootElement`具有误导性……它可以是对象结构中任何位置的元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-18T13:13:12.223

您需要用car 属性注释您的 Ferrari 类`@XmlRootElement`并替换为`@XmlElement``@XmlElementRef`

# java - Java Servlets，如何在多个转发中保持请求属性有效？

> ID：11368078
> 
> 赞同：1
> 
> 时间：2012-07-06T18:54:14.687
> 
> 标签：java, model-view-controller, servlets

我有一个本土的 MVC 实现。像这样的 ControllerServlet：

```
/controller?cmd=EditUser&userid=55 
```

从这个 URL，控制器创建一个`EditUserCommand.class`实例并调用一个`execute()`方法，该方法返回要显示的结果页面（例如`user.jsp`）。

然后控制器 servlet 执行...

```
getRequestDispatcher(resultPage).forward(request, response); 
```

...并显示结果页面。

控制器所做的其中一件事是将消息（错误、信息等）设置为请求属性。例如：

```
request.setAttribute("infoMessage", "User was edited successfully."); 
```

并且该消息从`user.jsp`页面中的请求中提取并显示。

工作正常。

现在我的问题来了。

有时我的命令不会返回类似的页面，`user.jsp`而是返回类似结果的 URL `cmd=ShowUser&userid=55`。这是因为在显示最终页面之前我可能要检查一些事情，例如查看用户的权限等。

当我这样做时，我放置在请求中的“infoMessage”永远不会出现，因为结果是一个对 servlet 进行新调用的 URL，这是一个新请求。新请求不保留第一个请求的请求属性；这是有道理的，我只是没有预见到会发生这种情况。

如何使我的请求变量“保持活动状态”，直到它实际显示在原始请求产生的最终页面上？

任何建议或意见表示赞赏。仅供参考，我无法重新编写整个应用程序以使用 JSF 的 Struts、Spring MVC 之类的东西。这不是一个选择。

谢谢！

抢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T18:58:46.847

`redirect`由于来自浏览器的全新请求，通常会丢失请求数据。一种可能的方法可能是将您的消息作为属性附加到 url 字符串并在需要时阅读它。

根据您的编辑：在您的编辑之后，我的回答也很有意义。但是，只有一个更正是，它不是全新的请求，因为转发发生在服务器端。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T18:57:45.340

您是否尝试过使用 RequestDispatcher 而不是 Redirect？

```
RequestDispatcher dispatcher = request.getRequestDispatcher("/myNextPage.jsp");
dispatcher.forward(request, response); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T19:02:43.663

您可能给出了一个简单的示例，但您的控制流可能会导致“重新发送”错误？基本上，在对数据进行任何更改后，控制器必须立即通过重定向执行“获取”，并且屏幕应该完全无状态地显示。

请看一下： [http ://en.wikipedia.org/wiki/Post/Redirect/Get](http://en.wikipedia.org/wiki/Post/Redirect/Get)

因此，属性不是一个很大的帮助。您可能需要考虑的是，为每个登录用户维护一个 Bean/Object，并将该对象保存在 LRU 缓存（JCache 或 MemcacheD）中，并在应用程序的每个条目上检索它。一旦你有了它，你就可以在那个对象中维护一个伪状态，比如以前的结果。

无论如何，使用 Attributes 来保留状态将严重限制您的选择。您需要有一个更通用的灵活的独立于路由的机制。

# unit-testing - 单元测试复杂逻辑

> ID：11368089
> 
> 赞同：0
> 
> 时间：2012-07-06T18:55:18.523
> 
> 标签：unit-testing, testing

对每个后置条件的测试与其他后置条件的测试非常相似的相对复杂的方法进行单元测试的最佳方法是什么？前置条件很容易单独测试，但需要进行大量设置以确保它们都成立，以便可以测试后置条件。我想到的三种方法是：

1.  创建一个可以一次测试所有内容的通用函数，但默认为最简单的场景。该函数将采用标志参数来指示与最简单方案的偏差。然后，为每个使用适当标志调用该函数的后置条件（或组合）创建一个单元测试，以覆盖该后置条件。这里的好处是几乎没有代码重复，所以如果被测试的代码发生变化，只需要重写一个测试函数；并且编写测试来覆盖后置条件组是微不足道的，但缺点是一般测试功能非常复杂
2.  对最简单的场景进行单元测试，然后复制、粘贴和修改。好处是每个测试都非常简单。缺点是原始测试的问题需要修复与粘贴的次数一样多。
3.  编写一个通用函数，允许通过将函数作为参数来覆盖各种位和部分，但默认情况下测试最简单的场景。好处类似于带有标志的一般功能的好处，但我认为将它们全部啮合在一起可能会更复杂。

第四个选项是“你做错了；将被测试的方法分解成更易于测试的部分！”

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T21:46:04.363

我之前的评论有点开玩笑。

从广义上讲，我实际上提倡的是执行您列为选项 2 的操作，然后重构您的测试代码以消除您由复制修改工作创建的重复项。

一旦你对这一切都进行了测试，你可能会寻找重构生产代码的方法，将其分解成更小、更易于管理的部分，并使这些部分可重用。但在做出重大改变之前进行测试总是健康的。

# java - 如何指定输入参数 在 Ant 的 build.xml 中？

> ID：11368091
> 
> 赞同：1
> 
> 时间：2012-07-06T18:55:21.723
> 
> 标签：java, ant, build, jar

对于熟悉 Ant 的人来说，这可能是一个幼稚的问题。我是蚂蚁的新手。帮我个忙。谢谢！

我在 build.xml 中写了这样的东西。

```
<target name="run">
    <java jar="build/jar/sth.jar" fork="true"/>
</target> 
```

但是，我想给它一些参数，比如 `java -jar build/jar/sth.jar input.txt`

怎么做？

顺便问一下，build.xml 语法的规范在哪里可以找到？比如有多少属性？除了“jar”“fork”还有什么其他属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T19:33:35.103

这应该做你想要的：

```
<exec executable="java">
    <arg value="-jar" />
    <arg value="build/jar/sth.jar" />
</exec> 
```

这是文档的来源[http://ant.apache.org](http://ant.apache.org)开始。

已编辑：您也可以使用 java 标签，只需指定标签 args="input.txt" 或您想要传递的任何参数。[有关 java 命令的更多信息](http://ant.apache.org/manual/Tasks/java.html)

```
<java jar="build/jar/sth.jar">
    <arg value="input.txt" />
</java> 
```

# javascript - D3：使用鼠标悬停查找图形 y 坐标

> ID：11368096
> 
> 赞同：10
> 
> 时间：2012-07-06T18:55:43.817
> 
> 标签：javascript, html, css, svg, d3.js

我正在使用 D3 制作交互式面积图。在将鼠标悬停在区域图表上时，我希望在图表顶部滚动一个点，如下例所示：http: [//hci.stanford.edu/jheer/files/zoo/ex/time/倍数.html](http://hci.stanford.edu/jheer/files/zoo/ex/time/multiples.html)

一旦获得鼠标位置（使用 d3.mouse），如何将这些坐标转换为相应的数据？x 轴是直接使用 x 比例的倒数（例如 xinvert）。但是，我找不到图表对应的 y 坐标。理想情况下，我可以“查找”数据中的 x 坐标并找到相应的 y 坐标，但不确定如何使用 D3 执行此操作。谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-07T20:30:08.947

创建自己的查找表实际上相对容易：

```
/* Create the lookup table */
var table = {};
data.forEach(function(d) {
    table[d.x] = d.y;
}); 
```

如果您有足够的数据点，这是一个可行的解决方案，但您可能需要使用某种舍入或插值器来填充中间 x 值。例如，如果您的点之间存在固定间距，您可以使用线性插值器并执行以下计算以获取您的圆的坐标`mouseover`：

```
var x = d3.mouse(this)[0];
var y;

if ( table[x] === undefined ) {
    var lower = x - (x % SPACING);
    var upper = lower + SPACING;
    var between = d3.interpolateNumber(table[lower], table[upper]);
    y = between( (x % SPACING) / SPACING );
} else {
    y = table[x];
} 
```

## 这是实际代码：http: [//jsfiddle.net/Wexcode/KGxHF/](http://jsfiddle.net/Wexcode/KGxHF/)

[这是Mike Bostock](http://bl.ocks.org/mbostock)如何做到这一点的另一个例子：http : [//bl.ocks.org/3025699](http://bl.ocks.org/3025699)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-04T21:50:24.737

mbostock（D3.js 作者）[在这里实现这个](http://bl.ocks.org/mbostock/3902569)

```
svg.append("rect")
  .attr("class", "overlay")
  .attr("width", width)
  .attr("height", height)
  .on("mouseover", function() { focus.style("display", null); })
  .on("mouseout", function() { focus.style("display", "none"); })
  .on("mousemove", mousemove);

function mousemove() {
  var x0 = x.invert(d3.mouse(this)[0]),
    i = bisectDate(data, x0, 1),
    d0 = data[i - 1],
    d1 = data[i],
    d = x0 - d0.date > d1.date - x0 ? d1 : d0;
  focus.attr("transform", "translate(" + x(d.date) + "," + y(d.close) + ")");
  focus.select("text").text(formatCurrency(d.close));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T19:45:44.013

我使用此代码查看每个点的 X 和 Y 值，并在鼠标事件上在我的曲线上画一个圆圈：[这里的 jsFiddle 示例](http://jsfiddle.net/albanlopez/D4MRP/8/)

Y_value 是一个全局的！

```
var Y_value; 
```

我定义了我的轴怒

```
x = d3.time.scale().range([0, w]);
y = d3.scale.linear().range([h, 0]); 
```

我定义了圆形光标

```
var circle = svg.append("circle")
        .attr("r", 8)
        .attr("cx", 0)
        .attr("cy", 0)
        .style({fill: '#fff', 'fill-opacity': .2, stroke: '#000', "stroke-width": '1px'})
        .attr("opacity", 0); 
```

我在我的圈子上添加了一个工具提示

```
var tooltip = circle.append("svg:title"); 
```

我有我的事件代码

```
mySensitiveArea.on("mousemove", function() {
    var X_pixel = d3.mouse(this)[0],
        X_date = x.invert(X_pixel);
    var Y_pixel = y(Y_value);

    var pathData = curve1.data()[0]; // recupere donnée de la courbe

    pathData.forEach(function(element, index, array) {
            if ((index+1 < array.length) && (array[index].date <= X_date) && (array[index+1].date >= X_date)) {
                if (X_date-array[index].date < array[index+1].date-X_date)  Y_value = array[index].val;
                else Y_value = array[index+1].val;
            }
        });

        circle.attr("opacity", 1)
            .attr("cx", X_px)
            .attr("cy", Math.round(y(Y_value)));

        tooltip.text("X = " + (X_date) + "\nY = " + (Y_value));
    }); 
```

# android - 在android中显示两个混合光标

> ID：11368098
> 
> 赞同：1
> 
> 时间：2012-07-06T18:55:56.883
> 
> 标签：android, cursor, adapter

我有一个我认为是直截了当的问题，但经过彻底搜索后，我找不到解决方案：

我有两个具有两种不同数据类型的数据源：苹果和橙子。唯一的共同点是“datePicked”。我想查询单独的数据库，然后在按“datePicked”排序和分组的同一个列表中显示苹果和橙子。

我看到一些使用 MergeAdapter 的建议。但是，除非我遗漏了什么，否则 MergeAdapter 只是连接两个适配器，它并没有真正合并它们。同样，我看到了使用 MatrixCursor 或 MergeCursor 创建单个统一光标然后为此创建适配器的建议。似乎都不是一个好的解决方案。MergeCursor 似乎只是连接游标，而 MatrixCursor 似乎要求我遍历两个数据集开始逐行完成构建游标。即使这些是可以接受的解决方案，我仍然有不同的模式需要在屏幕上不同的布局的问题。我将如何根据基础数据类型膨胀不同的布局？

所以我很难过，并会感谢任何帮助。是否有一个真正的合并适配器可以交错数据而不是仅仅连接它？如果没有，有没有办法创建一个适配器，根据对光标指向的特定行执行的某些业务逻辑，有条件地映射和扩展布局？

抱歉，如果我遗漏了一些明显的东西。

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T02:13:27.353

为了回答我自己的问题，似乎使用合并排序列表类型算法构建矩阵游标，遍历两个游标，然后通过使用 if 语句覆盖 newView() 方法有条件地扩展行布局是唯一可行的解​​决方案. 一旦我制定了详细信息，我将为任何感兴趣的人发布代码。

# c# - C# 正则表达式可选组不起作用

> ID：11368104
> 
> 赞同：0
> 
> 时间：2012-07-06T18:56:13.900
> 
> 标签：c#, regex

我想从这些字符串得到部分：第一：
2F4449534301224E4F204445534352495054494F4E20415641494C41424C45011F30303034342D30313230382D
第二：
2F4449534301224E4F204445534352495054494F4E20415641494C41424C45011F30303130312D3032323534012630303130312D31303932342D

基本上我想返回两个字符串：第一个：
2F(.+)011F(.+)2D
第二个：
2F(.+)011F(.+)0126(.+)2D

我正在尝试使用这种模式：

```
Match m = Regex.Match(this.__line, 
                      @"^2F.*22(.*)011F(.*)(0126.*)?.{2}$", 
                      RegexOptions.IgnoreCase); 
```

但是，当我尝试：

```
if (m.Success)
{
    if (m.Groups[3].Value != "")
    {
        Console.WriteLine("good");
    }
}
else
{
    Console.WriteLine("bad");
} 
```

我从第二个字符串中得到“坏”，因为它与模式不匹配。我没有使用正确的模式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T19:02:41.360

问题是你的模式是贪婪的。您应该改用此模式：

```
^2F.*22(.*?)011F(.*?)(0126.*?)?.{2}$ 
```

正则表达式中的第二组匹配所有内容，直到最后两个字符，因为它是贪婪的，最后一组是可选的。

要使您的匹配不贪婪，请使用 ? 在量词之后。

[这](http://www.exampledepot.com/egs/java.util.regex/greedy.html)是有关贪婪和非贪婪的更多信息。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T19:02:45.957

取出“^”。

2F。*22(.* )011F(. *)(0126.* )?.{2}$

[http://regexpal.com/](http://regexpal.com/)是我最喜欢的正则表达式工具。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T19:15:25.900

我想给你一些建议。**这些不是您问题的答案**，只是一些好的做法**提示**：

*   *除了换行符*（**.** ）之外的任何符号的性能都很差，您应该尽可能避免使用它。如我所见，您可以将其替换为**\S**
*   对于不区分大小写的匹配，使用语法`(?i:pattern)`. 这使您可以选择**RegexOptions.Compiled**，这将为您提供更好的性能
*   对于检索文本，建议使用命名的捕获组。使用语法`(?<name>pattern)`。这样你就可以通过`regexMatch.Groups["name"].Captures[0].Value`
*   每当您有一个不想检索的组时（仅用于匹配目的），将其标记为非捕获组，使用语法`(?:pattern)`
*   最后，[RegexBuddy](http://www.regexbuddy.com/)是一个很棒的（但付费的）工具。强烈推荐。

问候。

# python - Python App Engine：使用 app.yaml 控制 url 处理程序

> ID：11368106
> 
> 赞同：1
> 
> 时间：2012-07-06T18:56:17.017
> 
> 标签：python, google-app-engine

当我控制不同类型的页面时，我将我的代码移动到另一个 python 文件中。但是这种方式有一个缺点：每次我想更改 url 处理程序时，我都必须重新`main.py`配置关于 url 处理程序的底线。例如 ：

```
app = webapp2.WSGIApplication([('/', MainPage),
                               ('/thanks',ThanksHandler),
                               ('/unit2/signup',Signup),
                               ('/unit2/successful', LoginSuccess)], debug=True) 
```

我尝试配置处理程序`app.yaml`以防止不利。

我`blog.py`在同一目录中添加文件，在这个文件中，我有 Blog 类。这是我的`blog.py`文件：

```
class Blog(BaseHandler):
    def get(self):
        self.response.out.write("Hello")

app = webapp2.WSGIApplication([('/blog', Blog)], debug=True) 
```

这是原始文件：

```
> handlers:
> - url: /favicon\.ico   static_files: favicon.ico   upload: favicon\.ico

- url: /.*   script: main.app 
```

和这个新文件`app.yaml`：

```
handlers:
- url: /favicon\.ico   static_files: favicon.ico   upload: favicon\.ico

- url: /blog/.*   script: blog.app

- url: /.*   script: main.app 
```

但是当我转到： localhost:port/blog : 404: 找不到资源时。

请帮我。

谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T20:33:35.800

yaml 文件中的 /blog/.* url 规范与 blog.py 文件 (/blog) 中的 url 规范不匹配。特别是 /blog/.* 要求 url 在 blog 后有一个斜杠这一事实。例如，如果您在两个地方都只使用 /blog ，它将起作用。或者您可以在这两个地方使用 /blog/.*。

url 说明符按照它们在 yaml 文件中出现的顺序进行匹配，因此在这种特殊情况下，/blog/.* 不会在 /blog 上匹配，但会在最后一个（真正抓住所有）/.* 说明符上匹配，因此是 main .py 处理程序将被加载并且无法匹配（main.py 中调用 WSGIApplication 构造函数中没有模式）。

希望这可以帮助。-西尔维乌

# java - 旋转后恢复 CountdownTimer

> ID：11368107
> 
> 赞同：1
> 
> 时间：2012-07-06T18:56:17.853
> 
> 标签：java, android, countdowntimer

我有一个 CountdownTimer 从 60 秒开始倒计时。这个 CountdownTimer 通过将 textView 设置为剩余的毫秒来工作，但是每当我旋转我的设备时，CountdownTimer 都会重置。

我知道发生这种情况是因为 Activity 在轮换时重新启动。所以我尝试保存捆绑包中剩余的时间，然后在 Activity 重新启动后恢复它。

```
long transferValue;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_playtimemode);

    Log.d("Debug", "onCreate: " + transferValue);

    long setTime = 60000;
    long difference = setTime - transferValue;

    new CountDownTimer(difference, 1000) {

        public void onTick(long millisUntilFinished) {
            millisUntilFinishedToSave = millisUntilFinished;
            tvCountdown.setText("" + millisUntilFinished / 1000);
        }

        public void onFinish() {
            tvCountdown.setText("done!");
        }
    }.start();

}

@Override
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    outState.putLong("millisKey", millisUntilFinishedToSave);

}

@Override
protected void onRestoreInstanceState(Bundle savedInstanceState) {
    super.onRestoreInstanceState(savedInstanceState);
    transferValue = savedInstanceState.getLong("millisKey");
    Log.d("Debug", "onRestoreInstanceState(): " + transferValue);
} 
```

然而这不起作用。我在这段代码的顶部初始化 transferValue（因此它返回 0），但是我怎样才能将数据从 savedInstanceState 保存到 CountdownTimer？

```
07-06 20:21:30.038: D/Debug(28995): onCreate: 0
07-06 20:21:30.043: D/Debug(28995): onRestoreInstanceState(): 55994 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T19:05:38.640

我会给你的计时器它自己的线程。您的计时器正在停止，因为它位于 UI 线程上（如您所述），并且当 UI 重绘时，Activity 会重新初始化。所有长时间运行的进程都应该有自己的线程。经验法则：尽快退出 UI 线程。

这是使用服务的示例。此服务将在调用时启动并保留在内存中，无论屏幕方向更改甚至活动焦点更改。

这是服务：

```
public class Timer extends Service {

    @Override
    public IBinder onBind(Intent i) {
        return null;
    }
    @Override
    public int onStartCommand(Intent i, int flags, int startId) {
        // Put your timer code here
    }
} 
```

您需要将此行添加到清单中（在应用程序打开/关闭标记之间的某个位置）：

```
<service android:name=".Timer" /> 
```

然后你可以随时使用这个启动服务（重要的是要注意你可以一遍又一遍地启动它，递归调用不会产生新的服务。）：

```
startService(new Intent(this, Timer.class)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T19:02:08.263

使用 System.currentTimeMillis 获取当前系统时间，然后将 60000 毫秒添加到时间并将其存储为结束时间。然后，任何时候您必须更改任何内容，只需将 System.currentTimeMillis 与 EndTime 进行比较。

```
Endtime = System.currentTimeMillis + 60000; 
```

然后在每个实例上

```
TimeRemaining = Endtime - System.currentTimeMillis 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-10T20:41:28.173

公认的答案使事情变得非常复杂。你可以用更简单的方法来做。您的代码中的问题是 Activity 是在轮换时创建的（请参阅 Activity 生命周期），CountdownTimer 实例也是如此。

我可以编写整个示例代码，但@Drew 在这里给出了一个很好的答案：[Android Innerclass TextView reference when activity resumes](https://stackoverflow.com/questions/22511248/android-innerclass-textview-reference-when-activity-resumes)

# web-services - 来自 Orbeon 表单的 WebService 调用

> ID：11368109
> 
> 赞同：1
> 
> 时间：2012-07-06T18:56:26.683
> 
> 标签：web-services, orbeon, xforms

请在单击带有 xforms 或 orbeon 表单的按钮时提供 Web 服务调用和处理响应的示例代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T21:11:10.163

要求：

```
<xforms:instance id="ws-request-instance">     <!-- Field XML Instance -->                          
                                            <soapenv:Envelope>
                                               <soapenv:Header/>
                                               <soapenv:Body>

                                               </soapenv:Body>
                                            </soapenv:Envelope>
                            </xforms:instance> 
```

响应模板：

```
 <xforms:instance id="ws-response-instance">  <!-- Field XML Instance -->                          
                                            <soapenv:Envelope>
                                            </soapenv:Envelope>
                            </xforms:instance> 
```

搜索动作：

```
 <xforms:submission id="" ref="instance('ws-request-instance')" 
                                                            action="endpoint-url" method="post" mediatype="application/xml"
                                                            replace="instance" instance="ws-response-instance">
                                               <xforms:message ev:event="xforms-submit-done" level="modal">Done</xforms:message>
                                               <xforms:message ev:event="xforms-submit-error" level="modal">Error</xforms:message>
                                            </xforms:submission> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T06:53:14.777

在下面的讨论中，有一个 Sandbox 可运行代码，它使用 Orbeon Form 中的 Web 服务调用。

[http://orbeon-forms-ops-users.24843.n4.nabble.com/calling-web-service-from-orbeon-td35438.html](http://orbeon-forms-ops-users.24843.n4.nabble.com/calling-web-service-from-orbeon-td35438.html)

# html - 什么原因导致IE浏览器检测到兼容性视图

> ID：11368110
> 
> 赞同：0
> 
> 时间：2012-07-06T18:56:31.477
> 
> 标签：html, internet-explorer, xhtml, ie-compatibility-mode

我注意到一些网站 IE 会自动触发以显示在兼容性视图中，但是一旦禁用它，它就不会再自动触发了。你如何让浏览器重置这个行为，让它回到被禁用之前的状态，看看它是否自动触发它？

我已经尝试将其清除，`websites to view in compatibility view`但它仍然没有重置其自动触发兼容性视图的行为。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T19:00:47.573

当文档类型未设置或设置不正确时，通常会发生这种情况。另外，即使 doctype 设置正确，如果 PHP 或手动代码输入导致在 doctype 之前输出任何内容，也可能导致此问题。

如果你按 F12，你应该得到开发者工具。顶部有一个名为“浏览器模式”的下拉菜单 - 在那里您应该找到兼容性视图。此外，重新启动 IE 有时对我有用。

# facebook-graph-api - facebook API 身份验证查询参数特殊字符问题

> ID：11368112
> 
> 赞同：0
> 
> 时间：2012-07-06T18:56:44.197
> 
> 标签：facebook-graph-api, spring-mvc

我正在调用 facebook 身份验证 API

[https://www.facebook.com/dialog/oauth?client_id=3768637750&redirect_uri=http://localhost:8080/login.html?loginType=facebook](https://www.facebook.com/dialog/oauth?client_id=3768637750&redirect_uri=http://localhost:8080/login.html?loginType=facebook)

我得到以下回应。

=“> HTTP：//本地主机：8080 / login.html的loginType = Facebook和代码= AQA84TrJjJNQaib2qvhGSdrPIIwJoIlfs9ZABjhBO6H9vt2wSZuRedigWjgV8SMg7QafCq-0xgbvi5k1e-RtFNA1pbrcfSsIqBL __- YWWhVFFepTGUuJeXWPW8Z3orRl-fWJUqb2mnmAJ995VFVX3O9N4iDj_3mhgQLC0DVwegprezqV6fU1tElMpH5Gj0＃*=*

我正在使用 Spring3.0，当使用 getCode() 之类的方法在 Controller 中读取查询参数时，我得到查询参数“代码”的截断值

而不是让，AQA84TrJjJNQaib2qvhGSdrPIIwJoIlfs9ZABjhBO6H9vt2wSZuRedigWjgV8SMg7QafCq-0xgbvi5k1e-RtFNA1pbrcfSsIqBL __- YWWhVFFepTGUuJeXWPW8Z3orRl-fWJUqb2mnmAJ995VFVX3O9N4iDj_3mhgQLC0DVwegprezqV6fU1tElMpH5Gj0＃*=*

我得到AQA84TrJjJNQaib2qvhGSdrPIIwJoIlfs9ZABjhBO6H9vt2wSZuRedigWjgV8SMg7QafCq-0xgbvi5k1e-RtFNA1pbrcfSsIqBL __- YWWhVFFepTGUuJeXWPW8Z3orRl，fWJUqb2mnmAJ995VFVX3O9N4iDj_3mhgQLC0DVwegprezqV6fU1tElMpH5Gj0

我正在使用 UTF-8 编码，请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T19:12:04.907

> 我正在使用 UTF-8 编码

没关系，因为这不是字符编码问题。

URL 中的哈希 # 标记“片段标识符”的开始，并且*不会*传递给服务器。

> 我得到查询参数“代码”的截断值

没有截断，因为code参数的值在#之前结束*。*

# templates - 使用 nodejs 邮件模板的数据循环

> ID：11368113
> 
> 赞同：0
> 
> 时间：2012-07-06T18:56:53.380
> 
> 标签：templates, node.js, mailer

我正在使用 node.js 邮件模块来发送电子邮件模板。我设法将带有正确 json 替换的模板发送到指定的电子邮件地址。

但是，我想知道当有太多类似的替换时是否有设置替换值的快捷方式。

例如，我有一个对象“userNameList”。它包含用户名列表。我想使用电子邮件模板发送用户名列表。代替...

```
data: {
  "username1":userNameList[1],
  "username2":userNameList[2],
  "username3":userNameList[3],
  "username4":userNameList[4],
  "username5":userNameList[5],
  "username6":userNameList[6],
              ...
  "username100":userNameList[100]
} 
```

有没有办法减少行数并使代码更有效地工作？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T00:30:06.863

您可以使用以下内容：

```
data = {};
for(var i=0; i<userNameList.length; i++) {
   data["username" + (i+1)] = userNameList[i]; // Array indexes start at 0
} 
```

# collections - 从 String[] 到 F# List 的高效转换

> ID：11368114
> 
> 赞同：8
> 
> 时间：2012-07-06T18:56:58.753
> 
> 标签：collections, casting, f#

我从 C# 背景来到 F#，在不同的列表和集合上有点落后。我最近遇到了一个需要从 string[] 转到 'T 列表的情况。我最终使用列表理解来进行演员表：

```
let lines = File.ReadAllLines(@"C:\LinesOText.txt") // returns a string array
let listOLines = [for l in lines -> l] // use list comprehension to get the f# list 
```

有没有更有效的转换方式？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-06T18:58:46.363

使用[`List.ofArray`](http://msdn.microsoft.com/en-us/library/ee370614.aspx)或[`Array.toList`](http://msdn.microsoft.com/en-us/library/ee353606.aspx)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T19:00:41.767

这应该这样做：

```
let lines = File.ReadAllLines(@"C:\LinesOText.txt") |> List.ofArray 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-06T19:12:05.747

这是另一种方法：

```
let listOfLines = [yield! File.ReadAllLines(@"C:\LinesOText.txt")] 
```

# amazon-s3 - 使用 .NET 在 s3 中生成一个大文件

> ID：11368119
> 
> 赞同：0
> 
> 时间：2012-07-06T18:57:20.407
> 
> 标签：amazon-s3, amazon-ec2

我会使用我的 C# 逻辑生成一个具有特殊格式的大文件（几个 TB）并将其保存到 S3。做这个的最好方式是什么。我可以在 EC2 中启动一个节点，然后将大文件写入 EBS，然后使用 S3 .net Clinent 库将文件从 EBS 上传到 S3。

我可以在代码中生成文件内容时流式传输文件内容并将其直接流式传输到 S3，直到专门针对如此大的文件和内存不足问题完成生成。我可以看到此代码对流的帮助，但听起来流应该已经填满了。我显然不能将如此大量的数据放入内存，也不想先将其作为文件保存到磁盘。

```
PutObjectRequest request = new PutObjectRequest();
        request.WithBucketName(BUCKET_NAME);
        request.WithKey(S3_KEY);
        request.WithInputStream(ms);
        s3Client.PutObject(request); 
```

在生成这个大文件并将其流式传输到 S3 时，我最好的选择是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T14:46:23.037

您当然可以上传任何最大 5 TB 的文件，这是限制。我建议使用流式传输和多部分放置操作。上传一个 1TB 的文件很容易在这个过程中失败，你必须从头开始，在存储时将它分成几部分。您还应该知道，如果您需要修改文件，您需要下载文件、修改文件并重新上传。如果您打算修改文件，我建议您尝试将其拆分为较小的文件。

[http://docs.amazonwebservices.com/AmazonS3/latest/dev/UploadingObjects.html](http://docs.amazonwebservices.com/AmazonS3/latest/dev/UploadingObjects.html)

# php - PHP“preg_replace”将查询参数添加到某个域的任何网址

> ID：11368129
> 
> 赞同：1
> 
> 时间：2012-07-06T18:58:08.160
> 
> 标签：php, url, parameters, preg-replace

我有一个像这样的字符串：

```
$description = '
<a href="http://www.replace.com/1st-link/">1st link in string</a>,
<a href="http://www.ignore.com/">2nd link in string</a>, some other text in string,
<a href="http://www.replace.com/3rd-link/">3rd link in string</a>.
'; 
```

我需要使用 preg_replace 将“?id=awesome”的查询参数附加到来自“replace.com”的 $description 字符串中的任何 url（忽略所有其他链接，即“ignore.com”）。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T19:04:21.150

我强烈建议使用 DOM 解析器而不是正则表达式。例如：

```
$description = '...';
$wrapper = "<root>".$description."</root>";
$dom = new DOMDocument();
$dom->loadXML($wrapper);
$links = $dom->getElementsByTagName('a');
$count = $links->length;
for( $i=0; $i<$count; $i++) {
    $link = $links->item($i);
    $href = $link->getAttribute("href");
    if( preg_match("(^".preg_quote("http://www.replace.com/").")i",$href))
        $link->setAttribute("href",$href."?id=awesome");
}
$out = $dom->saveXML();
$result = substr($out,strlen("<root>"),-strlen("</root>")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T19:08:44.860

好的，很简单，给你：

```
$content = preg_replace('/http:\/\/[^"]*?\.replace\.com\/[^"]+/','$0?id=awesome',$description); 
```

希望就是这样，$content 将具有他将参数添加到 replace.com 域的字符串:)

# android - Android OS 可以使用与 Launcher Activity 不同的 Activity 启动应用程序吗？

> ID：11368130
> 
> 赞同：1
> 
> 时间：2012-07-06T18:58:09.533
> 
> 标签：android, operating-system, global

我有一个显示一些奇怪错误的应用程序。应用程序处于某些全局数据为 null 而不应为 null 的状态（查看应用程序的逻辑，无法到达该状态）。我怀疑操作系统要么自己覆盖全局数据，要么正在重新启动我的应用程序（或启动我的应用程序）并绕过初始活动。这些场景中的任何一个都可能吗？（当然我的逻辑可能总是错误的，但在这一点上，我真的怀疑发生了其他事情）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T19:23:17.397

**是**的，这实际上在各种情况下都是可以预料的：

1.  如果您的应用程序进入后台并且 Android 最终将其杀死以回收资源，那么随后的返回对用户来说可能看起来是无缝的，但实际上发生在一个全新的应用程序进程中。返回将直接返回到他们最后进入的活动，但在一个新的过程中。包中其他活动（例如您的启动器活动）的 onCreate() 将不会被调用，除非这些活动被用户导航或某处的 Intent 明确地重新访问。

2.  Launcher 活动（即带有 android.intent.category.LAUNCHER 的东西）并不是您在应用程序中可以拥有的唯一入口点。许多应用程序包含具有意图过滤器的活动，这些意图过滤器注册它们以处理具有 android.intent.category.DEFAULT 类别的 android.intent.action.VIEW 和它们可以处理的某种类型的内容的规范。此类应用程序甚至可能在包中根本没有启动器活动（尽管可能包含一个用于浏览内容、设置配置选项或用于其他功能的活动）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T19:00:41.330

我对此表示高度怀疑。启动器的想法是定义从操作系统接收启动意图的活动。

根据您描述的行为猜测，您可能需要对 Activity 生命周期进行一些研究。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T19:01:41.243

**启动器用于识别在应用程序启动时要启动的活动**....所以**我**认为这不可能...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T19:00:15.917

```
 Can Android OS start app with different Activity than Launcher Activity? 
```

**不，它总是搜索带有启动器标签的活动。**

添加您的代码，并具体说明哪些全局数据正在获取空值:)

# android - 钛中的 c2dm

> ID：11368132
> 
> 赞同：0
> 
> 时间：2012-07-06T18:58:30.400
> 
> 标签：android, titanium, android-c2dm

我正在为我的 Titanium 项目构建一个 c2dm 模块。（我实际上想要gcm，但唯一的变化是sender_id，所以这应该不是问题）。

但是，我在尝试这个时遇到了很多麻烦。我尝试使用[Kuraturpa](https://github.com/Kuraturpa/titanium-c2dm)编写的模块，但我无法构建它（编译错误），并且由于某种原因它不包含任何 .jar 文件。我尝试按照[本](http://technoblog-bhushan.blogspot.com/2012/03/looking-at-all-possible-solution-for.html)指南进行操作，但我再次遇到了一些构建错误（这一次，exec 返回 2，显然是因为它找不到 gpref？）

有没有人真正成功地让 c2dm 与 2.1.0.GA 一起工作？他们能分享成功吗？我不敢相信这是这么困难。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T16:39:02.547

我最终通过从苹果网站安装用于 c/c++ 开发的 macosx 开发人员工具让它工作。安装后，我就有了 gperf，并且构建适用于给定的模块。

至于将 c2dm 转换为 GCM，这非常简单。

# javascript - 根据其中一个对 jquery div 进行排序 （段落标签）

> ID：11368133
> 
> 赞同：2
> 
> 时间：2012-07-06T18:58:36.977
> 
> 标签：javascript, jquery

以下是我在模板中的重复 html 结构：

```
<div class="mystyle" data-id= "11002">
  <div class="style1-header"><h6>Change Status of Task</h6></div>
  <p class="style1-content">Seriously Change Status of Task</p>
  <p class="style2-content" style="visibility:hidden">12</p>
</div> 
```

以上是在我的 html 模板中不断重复的 html 结构。我希望这些东西根据`12`上面的例子中的数字进行排序。我怎么能用jquery做到这一点。小提琴在[这里可用。](http://jsfiddle.net/sJQCd/1/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T19:03:47.063

使用 JavaScript 的`Array.sort`方法对 div 数组进行排序。

```
var $divs = $('div.mystyle').get().sort(function(a,b){
    var aKey = +$(a).find('p.style2-content').text(),
        bKey = +$(b).find('p.style2-content').text();
    return aKey - bKey;
}); 
```

然后将现在排序的数组附加到 DOM。

```
$('body').append($divs); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T19:03:35.940

```
 var $elements = $("div.mystyle");
 function sortFn(a, b) {
      var aText = $(a).find("p:hidden").text();
      var bText = $(a).find("p:hidden").text();
      return aText > bText ? 0 : 1;
 }

 $elements.sort(sortFn); 
```

# python - Django活动流需要彗星（长轮询）吗

> ID：11368137
> 
> 赞同：0
> 
> 时间：2012-07-06T18:58:46.777
> 
> 标签：python, django

有谁知道如何在模板上显示 django 流操作。

我是否需要使用 Comet 来获取值以显示在我的模板上。因为，当我在执行 action.send 时，它会将动词和描述存储在表 actstream_action 中。但是我应该如何在模板上显示值？

PS 请注意，这是我第一次使用[django-activity 流。](https://github.com/justquick/django-activity-stream/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T13:20:25.760

我检查了 django-activity-stream，似乎它对于动态渲染活动更新没有任何魔力。

检查[django-socketio](https://github.com/stephenmcd/django-socketio)的 websockets 方式。或者，如果预期的访问负载不那么高，只需轮询技术即可满足您的要求。

我不太清楚您所说的“使用各种模板标签直接将操作获取到模板”是什么意思，因为模板呈现是在请求-响应过程中完成的。

# python - 如何对具有相似元素的元组序列进行分组以保持顺序？

> ID：11368141
> 
> 赞同：0
> 
> 时间：2012-07-06T18:59:06.480
> 
> 标签：python, sequence

我需要一个函数，它接受两个元素元组的列表并返回这些元组分组在列表中，其中元组的第二个元素相等，并保留原始序列顺序。例如，

```
>>> seq = [(0, 1), (1, 2), (2, 2), (3, 2), (4, 1), (5, 3), (6, 3), (7, 2)]
>>> split_repeated(seq)
[[(0, 1)], [(1, 2), (2, 2), (3, 2)], [(4, 1)], [(5, 3), (6, 3)], [(7, 2)]] 
```

如果我把结果弄平，我必须得到原始序列：

```
>>> itertools.chain.from_iterable(split_repeated(seq)) == seq
True 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T19:02:12.500

```
>>> seq = [(0, 1), (1, 2), (2, 2), (3, 2), (4, 1), (5, 3), (6, 3), (7, 2)]
>>> from itertools import groupby
>>> from operator import itemgetter
>>> [list(items) for key,items in groupby(seq,key=itemgetter(1))]
[[(0, 1)], [(1, 2), (2, 2), (3, 2)], [(4, 1)], [(5, 3), (6, 3)], [(7, 2)]] 
```

# apache-flex - 为什么某些 url 的内容无法在 AIR 应用程序中加载？

> ID：11368142
> 
> 赞同：0
> 
> 时间：2012-07-06T18:59:10.700
> 
> 标签：apache-flex, air

我试图使用 HTML 控件在我的 AIR 应用程序中的某个位置显示 Google Plus 页面，但 HTML 控件显示错误代码为 400 的页面。可以在浏览器中打开相同的 url 而不会出现任何错误。我也尝试使用 URLLoader 加载内容并得到相同的错误 400。浏览器和 AIR 之间有什么不同？Goole 是否有可能检测出浏览器的 http 请求并阻止它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-27T18:14:22.760

该网站可能会阻止以下内容：

*   帧尝试
*   特定用户代理
*   未知用户代理

**参考**

*   [您使用的是 robots.txt 文件吗？](http://blogs.adobe.com/cantrell/archives/2004/10/are_you_using_a.html)
*   [点击劫持安全咨询](http://blogs.adobe.com/psirt/?p=24)

# python - Python：从一个文件夹中导入多个图像并将它们缩放/组合成一个图像？

> ID：11368143
> 
> 赞同：2
> 
> 时间：2012-07-06T18:59:13.063
> 
> 标签：python, image, python-3.x, scaling, pixel

我有一个脚本可以将 8 到 12 张图像保存到本地文件夹。这些图像始终是 GIF。我正在寻找一个 python 脚本来将一个特定文件夹中的所有图像组合成一个图像。组合的 8-12 图像必须按比例缩小，但我也不想损害图像的原始质量（分辨率）（即，当放大组合图像时，它们看起来就像最初那样）

我目前能够做到这一点的唯一方法是将每个图像复制到电源点。

这对python（或任何其他语言，但最好是python）有可能吗？

作为脚本的输入，我将输入仅存储图像的路径（即 C:\Documents and Settings\user\My Documents\My Pictures\BearImages）

编辑：我下载了 ImageMagick 并一直在使用它与 python api 和命令行。这个简单的命令非常适合我想要的：`montage "*.gif" -tile x4 -geometry +1+1 -background none combine.gif`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T19:38:37.083

如果您希望能够放大图像，则*不想*缩放它们。您必须依靠图像查看器在显示时进行缩放 - 这就是 PowerPoint 现在正在为您做的事情。

输入图像是 GIF，因此它们都包含一个调色板来描述图像中的颜色。如果您的图像并非都具有相同的调色板，则需要在组合它们之前将它们转换为 24 位颜色。这意味着输出不能是另一个 GIF；好的选择是 PNG 或 JPG，这取决于您是否可以容忍图像质量的一些损失。

您可以使用[PIL](http://www.pythonware.com/products/pil/)读取图像、组合它们并写入结果。您需要创建一个与最终结果大小相同的新图像，并将每个较小的图像复制到它的不同部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-10T15:01:16.357

最简单的做法是将图像转换为 numpy 矩阵，然后构建一个新的、更大的 numpy 矩阵来容纳所有图像。然后将 np 矩阵转换回图像。当然它会很大，所以你可能想要下采样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T19:03:59.120

看看[Python 图像库](http://www.pythonware.com/products/pil/)。
该[手册](http://www.pythonware.com/library/pil/handbook/image.htm)包含几个关于打开文件、合并文件和保存结果的示例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T20:18:11.677

您可能希望将图像处理部分外包给[ImageMagick](http://www.imagemagick.org/)。它有一个[蒙太奇命令](http://www.imagemagick.org/Usage/montage/)，可以让你到达那里的 90%；只需将一些选项和目录中文件的名称传递给它。

# php - 通过 const 引用传递对象？

> ID：11368145
> 
> 赞同：0
> 
> 时间：2012-07-06T18:59:25.933
> 
> 标签：php, oop, constants, pass-by-reference, pass-by-value

在 C++ 中，当您希望函数能够从对象中读取但不能修改它时，您需要传递`const`对函数的引用。在 php 中执行此操作的等效方法是什么？

我知道 php5 中的对象默认是通过引用传递的，但为了便于阅读，我想我会继续在变量名之前使用与号，如下所示：

```
function foo(&$obj)
{

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T19:00:09.030

如果你想传递一个对象而不是通过引用，你可以`clone`事先传递这个对象。

```
<?php
function changeObject($obj) {
  $obj->name = 'Mike';
}

$obj = new StdClass;
$obj->name = 'John';

changeObject(clone $obj);
echo $obj->name; // John

changeObject($obj);
echo $obj->name; // Mike 
```

> 我知道 php5 中的对象默认是通过引用传递的，但是为了便于阅读，我想我会继续在变量名之前使用与号

那是你的电话，但我发现这只会让它读起来更像 C++。或者，您可以通过在函数定义中使用类型提示来显示正在传入一个对象：

```
function foo(StdClass $obj)
{

} 
```

一旦明确这`$obj`是一个对象，就可以假定它是通过引用传递的。

# jquery - 全天拖放

> ID：11368148
> 
> 赞同：1
> 
> 时间：2012-07-06T18:59:29.083
> 
> 标签：jquery, events, jquery-plugins, fullcalendar

我有一个包含正常事件和 allDay 事件的完整日历。

我想禁止 allDay-events 被拖到议程视图中的正常事件中。

全天事件从一开始就设置了开始时间和结束时间，所以我无法检查结束时间是否为空。

也许 eventDrop 函数中有一种方法可以阻止它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T23:57:41.527

检查这个小提琴：http: [//jsfiddle.net/100thGear/GPx28/](http://jsfiddle.net/100thGear/GPx28/)

需要注意的几点：

*   回调中的`allDay`参数*不代表*事件的 allDay。它代表***插槽的***全天能力。因此，在周视图中，顶部栏将具有as并且下面的时隙将具有as 。`eventDrop`**`allDay``true``allDay``false`**
***   回调中的`event`参数具有更新的日期/时间。`eventDrop`因此，如果您将事件从 allDay 槽移动到 6:30 AM 槽，则此回调中的事件开始实际上会说**6:30:00**。因此，我将拖动事件的 allDay 参数存储在拖动开始时的变量中（通过`eventDragStart`回调）*   事件的`id`属性确定它是否是可重复的事件。在您的小提琴中，allDay 事件和正常事件都具有相同的 id - 这会使您的拖动操作复杂化。如果可以，请避免这种情况。*   最后，我想你知道这一点，但是事件被删除后的正确回调被调用`eventDrop`- 而不仅仅是 drop。**

 **希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-12T12:59:38.890

有点晚了，但我遇到了类似的问题。我的一些 allDay 事件需要修复，而另一些则不需要。我的解决方案是为每个名为“forceAllDay”的事件添加一个用户定义的值，并将其设置为 true 或 false。

然后在事件丢弃部分添加了这个：

```
eventDrop: function(event, dayDelta, minuteDelta, allDay, revertFunc) {
    if (event.forceAllDay && !allDay) {
        revertFunc();
    } else {
        if (!confirm('Move event?')) {
            revertFunc();
        } else {
            // UPDATE DATABASE
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-21T02:33:04.863

您可以检查 endtime 是否为空。希望能帮助到你

```
eventDrop: function(event, delta, revertFunc) {
    var m = $.fullCalendar.moment(event.end);

    if (!m.hasTime() && !event.allDay)
        revertFunc(); 
    else {

    }
}, 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-23T09:26:46.363

根据他们最新的 API 2.xx，您可以这样做：

```
var draggedEventIsAllDay
var eventDragStart = function(ev) {
    draggedEventIsAllDay = ev.allDay;
};

var eventDrop = function(ev, delta, revertFunc, jsEvent, ui, view) {
    var data = delta._data,
        dayDelta = data.days,
        minuteDelta = data.minutes,
        allDay;

    var start = jQuery.fullCalendar.moment(ev.start.format('MM-DD-YYYY'));

    if (start.hasTime()) {
        allDay = false;
    } else {
        allDay = true;
    }

    if (!allDay && draggedEventIsAllDay || allDay && !draggedEventIsAllDay) {
        revertFunc();
    }
}; 
```**

# c++ - 如果位于头文件中的“重”函数没有用“内联”标记，它的代码编译到哪里？

> ID：11368149
> 
> 赞同：1
> 
> 时间：2012-07-06T18:59:42.597
> 
> 标签：c++, compiler-construction, compilation, inline

我已经知道，当我将成员函数的定义放入标头并将函数标记为 时，函数中`inline`的代码会内联到从 .cpp 文件中调用函数的任何位置，所以当涉及到一个已编译的二进制文件，我知道函数代码的位置——在任何依赖它的 .cpp 文件的编译代码中。但是如果我不在标头中标记函数会发生什么`inline`并且函数体大到足以让编译器选择不内联它？在函数的类所属的静态/动态库的上下文中，函数的代码编译到哪里？或者它根本没有编译，函数代码的最终目的地是库客户端的已编译 .cpp？如果是后一种情况，即使我没有用它标记函数的代码是否仍然被内联`inline`（因为它的代码太“重”）？最后，MSVC 编译器在这种情况下的行为是否与 GCC 不同？

当然，我意识到将要内联的成员函数放入 .h 文件（或 .inl 文件）并将“重”函数放入 .cpp 文件会使事情变得一目了然，但我真的很想避免破坏一个类'跨文件实现，因此很有趣。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T19:01:54.960

它直接编译到包含您的标题的每个翻译单元中。如果有多个这样的文件，则您违反了一个定义规则并使您的程序格式错误。

如果您真的想将所有代码放在一个文件中，请将其放在标题中并将函数标记为内联。这只是一个建议，所以如果函数太大，编译器无论如何都不会内联它，它会像非内联函数一样编译。但请注意，这*不是*规范的 C++，因为它会大大增加编译时间。正常模式实际上是将接口（标头）与实现（源文件）分开。如果编译器决定不内联函数，它将被写入每个包含头文件的翻译单元的编译目标文件中，并且链接器将需要从其中一个目标文件中选择一个实例，丢弃其余的（因为每个版本的代码都是相同的）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-06T19:08:29.360

当你标记一个函数`inline`时，你并没有强制编译器在它被调用的每个地方都内联它，你只是告诉它定义是内联的，它应该期望在不同的编译单元中有重复的副​​本。对于包含标头并调用函数的每个编译单元，实际代码将至少编译一次。

如果您不将其声明为内联，则链接器应该抱怨函数的多个定义，即使这些定义是相同的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-06T19:06:03.637

如您所知，“内联”只是对编译器的“请求”——仅此而已。

此外，没有什么可以阻止您在标头中声明独立的“静态”函数。此时，相同的二进制代码在其源文件#include 为标头的每个目标文件中都会被重复。

你猜怎么着——内联函数也会发生同样的事情:)

就个人而言，我喜欢在头文件中只看到*类*和结构定义、typedef、常量、函数原型……和 externs……。

# xml - xsd 上的模式匹配：元素名称

> ID：11368154
> 
> 赞同：0
> 
> 时间：2012-07-06T19:00:01.533
> 
> 标签：xml, regex, xml-parsing, xsd, sqlbulkcopy

我正在使用 SQL XML 批量加载将数据直接注入数据库。我的 XML 和 xsd 如下：

XML:

```
<?xml version="1.0"?>
<Data> 
  <USEFUL>
        <Value>3.1</Value>
        <Date>12/20/2001</Date>
  </USEFUL>

  <Something>
        <Value>3.1</Value>
        <Date>12/20/2001</Date>
  </Something>

</Data> 
```

XSD：

```
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema"
        xmlns:sql="urn:schemas-microsoft-com:mapping-schema">

    <xsd:simpleType name="anyElement">
        <xs:restriction base="xs:string">
            <xs:pattern value="[A-Za-z]+" />   
        </xs:restriction> 
    </xsd:simpleType>

    <xsd:element name="USEFUL" sql:relation="DATA" >

        <xsd:complexType>
           <xsd:sequence>
                <xsd:element name="Value" type="xsd:string" />
                <xsd:element name="Date" type="xsd:date" />
           </xsd:sequence>
        </xsd:complexType>

    </xsd:element>

    <xsd:element type="anyElement" sql:relation="NON-DATA" >

        <xsd:complexType>
           <xsd:sequence>
                <xsd:element name="Value" type="xsd:string" />
                <xsd:element name="Date" type="xsd:date" />
           </xsd:sequence>
        </xsd:complexType>

    </xsd:element>

</xsd:schema> 
```

我想将“USEFUL”元素插入同一个表中，并将其他所有元素插入到不同的表中。有没有办法使用通配符 * 作为名称或正则表达式将不需要的东西过滤到另一个表中？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T12:00:39.153

不，这是不可能的 - 无法在 XSD 中定义一种复杂类型，该类型适用于名称与指定名称不同的任何元素。您必须定义类型：

```
 <xsd:complexType name="anyElement"> 
    <xsd:sequence> 
        <xsd:element name="Value" type="xsd:string" /> 
        <xsd:element name="Date" type="xsd:date" /> 
    </xsd:sequence> 
 </xsd:complexType> 
```

然后明确列出所有进入“其他”表的元素：

```
 <xsd:element name="Something" type="anyElement" sql:relation="NON-DATA"/>
 <xsd:element name="SomethingElse" type="anyElement" sql:relation="NON-DATA"/>
 <xsd:element name="YetAnotherOne" type="anyElement" sql:relation="NON-DATA"/>
 . . . 
```

# bitmap - 8Bit 灰度位图转数组

> ID：11368162
> 
> 赞同：0
> 
> 时间：2012-07-06T19:00:41.913
> 
> 标签：bitmap, grayscale

我想知道，从这里我将如何将像素值存储到矩阵中？我想打印出强度（灰度）值。

示例 Array[5] = 4 或 Array[3][1] = 17

我真的不知道该怎么做。我看到的所有示例似乎都很复杂，有没有简单的方法可以做到这一点？

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

struct BitMap
{
short Type;
long Size;
short Reserve1;
short Reserve2;
long OffBits;
long biSize;
long biWidth;
long biHeight;
short biPlanes;
short biBitCount;
long biCompression;
long biSizeImage;
long biXPelsPerMeter;
long biYPelsPerMeter;
long biClrUsed;
long biClrImportant;
}Header;

int main( void ){

    FILE *BMPFile = fopen ("MriHotrod.bmp", "rb");

    if(BMPFile == NULL){
        return;
    }

    unsigned char DataBuff[128*128];
    int i;
    int j;

    memset(&Header, 0, sizeof(Header));

    fread(&Header.Type, 2, 1, BMPFile);
    fread(&Header.Size, 4, 1, BMPFile);
    fread(&Header.Reserve1, 2, 1, BMPFile);
    fread(&Header.Reserve2, 2, 1, BMPFile);
    fread(&Header.OffBits, 4, 1, BMPFile);
    fread(&Header.biSize, 4, 1, BMPFile);
    fread(&Header.biWidth, 4, 1, BMPFile);
    fread(&Header.biHeight, 4, 1, BMPFile);
    fread(&Header.biPlanes, 2, 1, BMPFile);
    fread(&Header.biBitCount, 2, 1, BMPFile);
    fread(&Header.biCompression, 4, 1, BMPFile);
    fread(&Header.biSizeImage, 4, 1, BMPFile);
    fread(&Header.biXPelsPerMeter, 4, 1, BMPFile);
    fread(&Header.biYPelsPerMeter, 4, 1, BMPFile);
    fread(&Header.biClrUsed, 4, 1, BMPFile);
    fread(&Header.biClrImportant, 4, 1, BMPFile);

printf("\nType:%hd\n", Header.Type);
printf("Size:%ld\n", Header.Size);
printf("Reserve1:%hd\n", Header.Reserve1);
printf("Reserve2:%hd\n", Header.Reserve2);
printf("OffBits:%ld\n", Header.OffBits);
printf("biSize:%ld\n", Header.biSize);
printf("Width:%ld\n", Header.biWidth);
printf("Height:%ld\n", Header.biHeight);
printf("biPlanes:%hd\n", Header.biPlanes);
printf("biBitCount:%hd\n", Header.biBitCount);
printf("biCompression:%ld\n", Header.biCompression);
printf("biSizeImage:%ld\n", Header.biSizeImage);
printf("biXPelsPerMeter:%ld\n", Header.biXPelsPerMeter);
printf("biYPelsPerMeter:%ld\n", Header.biYPelsPerMeter);
printf("biClrUsed:%ld\n", Header.biClrUsed);
printf("biClrImportant:%ld\n\n", Header.biClrImportant);

fread(DataBuff, sizeof(DataBuff), 128*128, BMPFile);

for(i=0; i<20; i++){
    printf("%d\n", DataBuff[i]);
}

fclose(BMPFile);

return 0;
}

Output
Type:19778
Size:17462
Reserve1:0
Reserve2:0
OffBits:1078
biSize:40
Width:128
Height:128
biPlanes:1
biBitCount:8
biCompression:0
biSizeImage:0
biXPelsPerMeter:0
biYPelsPerMeter:0
biClrUsed:256
biClrImportant:0

0
0
0
0
1
1
1
0
2
2
2
0
3
3
3
0
4
4
4
0 
```

我认为标题信息是正确的，并且元素的数量是正确的（16384）。我只是不确定如何打印出像素值。以上显然是不对的...

这与填充有关吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T19:14:55.573

您需要从 BMPFile.OffBits 中指定的偏移量开始读取像素。

BMP 标头中还有一个“颜色表”——每个像素都是其中的索引（IIRC！），因此它用作颜色查找表。Wikipedia 建议颜色表对于 8BPP（或更少）图像是强制性的。

另外：由于您的图像是每像素 8 位，因此您需要通过提取 RGB 分量并将它们组合来将 RGB 转换为灰度。

另外：你为什么说你的结果“显然是错误的”？请记住，.bmp 文件是倒置存储在文件中的。

你在哪个操作系统上？Windows 提供了为您执行此操作的功能。

# qt - QProcess：使进程独立和Windows问题

> ID：11368171
> 
> 赞同：0
> 
> 时间：2012-07-06T19:01:12.090
> 
> 标签：qt, permissions, qprocess

好吧，我有一个 QProcess 作为我的程序更新程序，但是在 Windows 上，当它们运行时你不能修改 exe 文件，但是如果你关闭创建更新程序进程的程序，我想更新程序也会关闭。可以使更新程序进程独立吗？

然后，在 Windows Vista（及更高版本）上，无法运行我的更新程序，因为它返回我需要将我的级别提升为管理员，是否可以提升进程的权限？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T21:01:13.263

首先，与Linux相反，Windows进程默认独立于其父进程，父进程关闭后不会关闭。

解决问题的正确方法是将更新程序设为*Windows 服务*。然后，它不会由应用程序启动，它将具有写入系统文件夹等的权限（请参见[此处](http://msdn.microsoft.com/en-us/magazine/cc163486.aspx#S4)）

[这是](http://qt.gitorious.org/~jmdressler/qt-solutions/jmdresslers-qt-solutions/trees/4b7af8e27f5a9c43e0e1563ce50df2a2a2c2ef9b/qtservice)Qt 中服务支持的库（它确实有效）。

如果您想要更简单的解决方案，您可以使用[ShellExecute](http://www.codeproject.com/Articles/19165/Vista-UAC-The-Definitive-Guide)升级权限以启动更新程序。

# regex - 从字符串中提取 n 值的正则表达式

> ID：11368173
> 
> 赞同：1
> 
> 时间：2012-07-06T19:01:14.593
> 
> 标签：regex

正则表达式可以提取字符串中嵌入的值，如先前在同一字符串中定义的变量模板所标识的那样？或者这在Java中处理得更好？

例如：“2012 Ferrari [F12] - Ostrich Leather interior [F12#OL] - Candy Red Metallic [F12#3]” 变量模板是遇到的第一个带方括号的字符串，例如 [F12]，所需的变量是在该模板的后续实例中找到，例如“OL”和“3”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T19:33:11.110

由于您提到了 Java，我假设您使用的是 Java 实现[Pattern](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html)。

Java 的 Pattern 支持所谓的*反向引用*，它可用于匹配与先前*捕获组*匹配的相同值。

不幸的是，您无法从单个捕获组中提取多个值，因此如果您想使用单个模式执行此操作，则必须对要匹配的模板数量进行硬编码。

对于一个变量，它可能如下所示：

```
\[(.*?)\].*?\[\1#(.*?)\]
  ^^^^^          ^^^^^ variable
 template     ^^ back reference to whatever template matched 
```

您可以通过将它们包装在可选的非捕获组中来添加更多可选匹配，如下所示：

```
\[(.*?)\].*?\[\1#(.*?)\](?:.*?\[\1#(.*?)\])?(?:.*?\[\1#(.*?)\])?
                        ^ optional group    ^ another one 
```

这将匹配最多三个变量：

```
 String s = "2012 Ferrari [F12] - Ostrich Leather interior [F12#OL] - Candy Red Metallic [F12#3]";
    String pattern = "\\[(.*?)\\].*?\\[\\1#(.*?)\\](?:.*?\\[\\1#(.*?)\\])?(?:.*?\\[\\1#(.*?)\\])?";
    Matcher matcher = Pattern.compile(pattern).matcher(s);
    if (matcher.find()) {
        for (int i = 1; i <= matcher.groupCount(); i++) {
            System.out.println(matcher.group(i));
        }
    }

    // prints F12, OL, 3, null 
```

但是，如果您需要匹配任意数量的变量，则必须在第一遍中提取模板，然后将其嵌入到第二个模式中：

```
 // compile once and store in a static variable
    Pattern templatePattern = Pattern.compile("\\[(.*?)\\]");

    String s = "2012 Ferrari [F12] - Ostrich Leather interior [F12#OL] - Candy Red Metallic [F12#3]";

    Matcher templateMatcher = templatePattern.matcher(s);

    if (!templateMatcher.find()) {
        return;
    }

    String template = templateMatcher.group(1);
    Pattern variablePattern = Pattern.compile("\\[" + Pattern.quote(template) + "#(.*?)\\]");

    Matcher variableMatcher = variablePattern.matcher(s);
    while (variableMatcher.find()) {
        System.out.println(variableMatcher.group(1));
    } 
```

# java - PhoneGap：它知道哪些库不能在目标平台上运行吗？

> ID：11368174
> 
> 赞同：1
> 
> 时间：2012-07-06T19:01:19.967
> 
> 标签：java, android, gwt, cordova

由于我（还）不太了解的原因，有些 Java 库/包在部署到 Android 设备时无法正常工作（甚至无法运行）。Guice 或 Apache Camel 等库。

我不是 iOS、.NET 或 JavaScript 开发人员，我不知道 iPhone、Windows Phone 或 Blackberries 是否存在相同/相似的问题。

无论如何，我们至少有 1 个场景（Java/Android），其中 PhoneGap 正在为*可能无法*在该平台上运行的目标平台生成代码。所以我问：PhoneGap 是否足够了解每个目标平台，不会生成无法在其上运行的本机代码？

换句话说，Apache Camel（例如）不会在 Android 设备上运行。当我使用 GWT 将 Camel 路由（带有端点）编译成 JavaScript，然后使用 PhoneGap 包装它并打包一个 APK 时会发生什么？PhoneGap 会说“嘿，这是 Camel 的东西；你不能在 Android 设备上运行”并失败，还是有可能将“不可运行”的代码泄漏到 PhoneGap 应用程序中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T20:40:52.700

正如您自己指出的那样，GWT 将您的 Java 代码编译为 Javascript。

所以 phonegap 只能看到 Javascript 代码，它无法判断这是从 Java 编译的（它不再包含任何 Java 源代码）。它将把它当作一个普通的网络应用程序，它只会执行生成的 javascript 源。

# paypal - 使用 Paypal 向用户付款

> ID：11368175
> 
> 赞同：0
> 
> 时间：2012-07-06T19:01:20.623
> 
> 标签：paypal

我想使用 Paypal 通过 paypal 按钮向用户付款。

我尝试使用标准的 cmd=_xclick，但在处理付款后它没有返回足够的信息。IPN似乎专注于商店而不是工资单，而Mass Pay似乎不完整（它需要一个用户信息的xml列表，并且没有实时修改用户信息）。

是否只有 Mass Pay api 可以可靠支付？

我真的认为我可以使用谷歌解决这个问题，但没有一个线程和文档真正解决了我的问题。

[编辑]

我尝试了 MassPay，但仅使用高级帐户不符合条件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T04:25:45.247

查看自适应支付 -> 隐式支付。

它允许您以编程方式从您自己的贝宝帐户中汇款。

[https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_APIntro](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_APIntro)

（您必须向下滚动一点，直到找到隐式付款流程）

# android - 如何在android中以编程方式将按钮向左或向右移动

> ID：11368181
> 
> 赞同：7
> 
> 时间：2012-07-06T19:01:55.813
> 
> 标签：android

我想通过获取它的坐标然后一个一个地增加或减少它们来为按钮设置动画，以便按钮可以向左然后向右。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-06T19:05:29.557

使用 TranslateAnimation：

```
TranslateAnimation animation = new TranslateAnimation(start_x, start_y, end_x, end_y);
animation.setDuration(1000); // duartion in ms
animation.setFillAfter(false);
button.startAnimation(animation); 
```

我不确定如何获得它的位置，button.getTop() 和 button.getLeft() 可以工作......

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-06-17T10:54:07.553

不确定这是否对您有帮助，但我遇到了同样的问题，我可以使用这些方法做到这一点，setTranslationX(float) setTranslationY(float)

你可以像这样使用它

```
Button button = (button) findViewById(your id); 
button.setTranslationX(a float value); 
```

这是提供更多信息的 android 文档[http://developer.android.com/reference/android/view/View.html#attr_android:translationX](http://developer.android.com/reference/android/view/View.html#attr_android%3atranslationX)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-03-25T14:25:27.050

当按钮单击的图像从左向右移动时，您也可以将此代码用于片段。

将此代码插入 onCreateView 片段或直接使用按钮侦听器。

```
 View view = inflater.inflate(R.layout.fragment_move,container,false);
    mBtnMove = view.findViewById(R.id.btn_move);
    mImageMove = view.findViewById(R.id.imv_move);
    mBtnMove.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {

            float start_x_axis = 0; // initialize the axis value start from and end
            float start_y_axis = 1000;
            float end_x_axis = 0;
            float end_y_axis = 0;
            TranslateAnimation animation = new TranslateAnimation(start_x_axis, start_y_axis, end_x_axis, end_y_axis);
            animation.setDuration(2500); // Duration of image to move from left to right
            mImageMove.startAnimation(animation);
        }
    });
  return view; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-12-15T07:48:38.560

```
 Solution for those who are looking for left to right animation)

            TranslateAnimation animation = new TranslateAnimation(0.0f, 0.0f, 0.0f, 1500.0f); // new TranslateAnimation (float fromXDelta,float toXDelta, float fromYDelta, float toYDelta)

               animation.setDuration(1500); // animation duration
                animation.setRepeatCount(1); // animation repeat count
            animation.setFillAfter(false);
                your_view .startAnimation(animation);//your_view for mine is imageView     

Solution for those who are looking for repeated animation(for eg. left to right and right to left)

            TranslateAnimation animation = new TranslateAnimation(0.0f, 0.0f, 0.0f, 1500.0f); // new TranslateAnimation (float fromXDelta,float toXDelta, float fromYDelta, float toYDelta)
                animation.setDuration(1500); // animation duration
                animation.setRepeatCount(4); // animation repeat count
                animation.setRepeatMode(2); // repeat animation (left to right, right to left)

                animation.setFillAfter(true);
                your_view .startAnimation(animation);//your_view for mine is imageView 
```

# .net - .NET Dictionary 对象是否可能溢出？

> ID：11368182
> 
> 赞同：1
> 
> 时间：2012-07-06T19:02:04.503
> 
> 标签：.net, dictionary, overflow

我现在有一个事件处理器类，它有一个字典来存储所有订阅。事实上，它是一本词典词典。而这个进程类正在与第三方远程服务器进行通信以请求目标数据。我问这个问题是因为现在我们偶尔会遇到一些订阅丢失的问题。由于由于某种原因很难验证这种丢失是否发生在与远程服务器的连接中，所以我现在必须首先检查我的事件处理器类是否有任何问题。我的第一个怀疑是订阅信息是否由于此 Dictionary 对象的溢出而丢失。有人有什么主意吗？谢谢！

更新

也许我应该多谈谈这个场景，因为代码并不容易显示。我们曾经有我们的遗留软件，我们称之为 A，使用 B 的供应商提供的 API 与称为 B 的远程数据服务进行通信。但是，由于我们将 A 改为 64 位 SW，但为 B 提供的库仍然是 32 位，所以我们新的 64 位 A 不能再使用这个库了。因此，我正在设计一个名为 C 的 32 位 SW，以使用该库连接到 B，同时使用 WCF 与 64 位 A 保持通信。由于 C 主要是 pub/sub 结构，正如我之前提到的，我使用 Dictionary of Dictionary 来维护 C 中的请求和订阅。我们的问题来了：我们遇到了一些订阅丢失（很长时间没有发布，但是在重新初始化订阅后，我们可以在 A 处获得出版物）。我们不容易去查B的反馈，看看有没有配置错误。而且我的 WCF 服务日志也没有显示任何错误。我不得不怀疑问题仅发生在 C 上。我知道多线程问题，所以我锁定了字典的每个操作。但我就是想不出有什么问题。顺便说一句，它不像 C 那样内存用完并且 C 崩溃了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T19:03:37.297

如果“溢出”是指“意外地默默丢失数据”，那么不，据我所知。

如果您的意思是“用完系统中的所有内存直到崩溃”，那么是的，这是可能的，但听起来不像发生在您身上的事情。

如果您在`Dictionary<,>`没有任何锁定的情况下使用来自多个线程的标准，*则*可能会导致您丢失数据。[`ConcurrentDictionary<,>`](http://msdn.microsoft.com/en-us/library/dd287191.aspx)如果您使用的是 .NET 4，您应该使用锁定（小心！）或使用。

此外，如果您有任何您不期望的重复键，如果您使用索引器，这将用另一个条目*覆盖一个条目的数据。*（如果您使用该`Add`方法则不会 - 它会引发异常。

基本上我们一直在猜测，直到我们看到一些代码或至少获得更多上下文......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T19:11:02.660

听起来像是比赛条件的秘诀。

你可能有一些看起来像这样的代码：

```
if (!myDictionary.ContainsKey(key))
{
  //point of interest
  myDictionary[key] = new Dictionary<X, Y>()
}
myDictionary[key][innerkey] = innnervalue; 
```

问题是两个线程使它成为条件内的兴趣点注释。您真的不打算为同一个键运行该块两次，但是线程魔术使它发生。

1.  线程 A 和线程 B 使其到达兴趣点。
2.  线程 A 唤醒并运行该方法的其余部分。
3.  线程 B 唤醒并运行，孤立线程 A 创建的字典。

您可以通过保护锁后的共享实例来解决此问题：

```
lock(_theLockInstance)
{
  if (!myDictionary.ContainsKey(key))
  {
    //point of interest
    myDictionary[key] = new Dictionary<X, Y>()
  }
  myDictionary[key][innerkey] = innnervalue;
} 
```

现在，一次只有一个线程可以到达临界区，并且不会创建孤立字典。

# wordpress - Wordpress 重写：将页面重定向到主页

> ID：11368187
> 
> 赞同：0
> 
> 时间：2012-07-06T19:02:33.407
> 
> 标签：wordpress, redirect

我有一个带有网址[http://mydomain.com/home/](http://mydomain.com/home/)的 wp 页面。我想使用 htaccess将它重定向到[http://mydomain.com/ 。](http://mydomain.com/)

```
<IfModule mod_rewrite.c>
   RewriteEngine On
   RewriteBase /
   RewriteRule ^index\.php$ - [L]
   RewriteCond %{REQUEST_FILENAME} !-f
   RewriteCond %{REQUEST_FILENAME} !-d
   RewriteRule ^home/$ index.php [L]    #This is my attempt to redirect; not working.
   RewriteRule . /index.php [L]
</IfModule> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T19:14:52.877

在默认 wp htaccess 规则集之外写入规则。试试下面：

```
RewriteRule ^home/(.*) http://mydomain.com/$ [L]

<IfModule mod_rewrite.c>
   RewriteEngine On
   RewriteBase /
   RewriteRule ^index\.php$ - [L]
   RewriteCond %{REQUEST_FILENAME} !-f
   RewriteCond %{REQUEST_FILENAME} !-d
   RewriteRule . /index.php [L]
</IfModule> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T19:18:05.013

只需在 wordpress 阅读设置中将主页设置为您的首页。那应该没有apache mod_rewrite

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T19:22:11.023

使用 301 重定向，是永久性的，有利于 SEO

```
RedirectMatch 301 ^/home($|/.*) $1 
```

在我的本地主机上测试了这个:)

/home /home/ /home/?blahblah

这一切都重定向到/保留正确的部分查询字符串

# wolfram-mathematica - Mathematica 循环遍历一个单元格

> ID：11368196
> 
> 赞同：-1
> 
> 时间：2012-07-06T19:02:49.177
> 
> 标签：wolfram-mathematica

在mathematica 中，可以使用类似于其他编程语言的单元格`For`或在单元格内编写循环。`While`为了迭代地运行一个单元块，我能想到的最好方法是在一个单独的数学笔记本中编写循环并调用`NotebookOpen; SelectionEvaluate`. 有没有办法在不创建额外的笔记本文件的情况下迭代地运行一个单元块？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T19:54:29.827

也许您正在寻找`Module`？

```
doTheLoop[] :=
  Module[{a, i},
    a = {};
    For[i=1, i < 1000, i++, If[PrimeQ[i], AppendTo[a, i]]];
    a
  ] 
```

调用子程序`doTheLoop[]`

但是，通常[循环不是](https://mathematica.stackexchange.com/q/7924/121)*Mathematica*的方式。

# syntax - 批量命令的语法不正确？

> ID：11368198
> 
> 赞同：9
> 
> 时间：2012-07-06T19:02:55.637
> 
> 标签：syntax, if-statement, batch-file

当我运行以下代码时，cmd.exe 不断给我一个 The syntax of the command is wrong 错误。它出什么问题了？

代码：

```
 @echo off
 setlocal enabledelayedexpansion
 CALL ant clean build compile 

REM loop thru/Run ALL .properties file names from "ExecutionSDKTest_10.2.2" folder
:labelNextTest
FOR %%G in (C:\ExecutionSDKTest_10.2.2\*.properties) DO (
    pause
    Set fileName=%%~nxG
    rem fileName==ENG-822.properties       
    set testName=!fileName:~0,7!
    rem testName==ENG-822
   set testNum=!fileName:~4,3!
     REM testNum==822
    ECHO Please Create: !testName!_Ref.properties.txt in C:\ExecutionSDKTest_10.2.2\Logs
   echo Running:!fileName!
   java -jar Test.jar !fileName! > Logs\!fileName!.log

   set logPath="C:/ExecutionSDKTest_10.2.2/Logs/!fileName!.log"
   set refLogPath="C:/ExecutionSDKTest_10.2.2/Logs/!testName!_Ref.properties.txt"
   REM if Ref exists check Line by line
   if EXIST !refLogPath!( 
        Call Perl TestProp1RefcheckLines.pl !fileName! !testName!
  ) else (
   rem if ref does NOT exist check one important line 
   rem returns case number to check for  
   perl.exe c:\ExecutionSDKTest_10.2.2\TestProp1noRefCases.pl !testNum!
   set lineCase=!ERRORLEVEL!
   echo linecase is !lineCase! 

   rem set LineCase to  one, two, three or four, depending on case number
   FOR /F "tokens=*" %%B in (!logPath!) Do (
    set logLine=%%B
rem check line >> : "...job status:..."
if /i "!logLine:~11,33!"=="... STATUS REPORT: ...Job status:"( 
    if "!lineCase!" =="1"( 
            if /i "!logline:~32!" == "job status: job finished_error" goto labelPass
           )
    if "!lineCase!"=="2" ( 
    if /i "!logLine:~32!" == "Job status: job QUEUED" goto labelPass
           )
    if "!lineCase!"=="4"( 
    if /i "!logLine:~32!" == "job Execution Finished Successfully" goto labelPass
   )
) else (   
       if /i "!logLine:~11,33!"=="Error initializing the connection" goto labelPass 
   if /i "!logLine!" == "Exception in thread ""main"" java.lang.IllegalArgumentException: timeout value is negative" goto labelPass
 )
 )
  goto labelFail
   )
   )
 pause

 REM Test Passed or Failed
:labelFail
echo !TestName! FAILED due to the above incorrect line
 goto labelNextTest

:labelPass
 Echo !TestName! PASSED
goto labelNextTest 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-06T20:14:01.370

你错过了一些关键的空间。在这些行中：

```
if EXIST !refLogPath!(

if /i "!logLine:~11,33!"=="... STATUS REPORT: ...Job status:"( 

if "!lineCase!" =="1"( 

if "!lineCase!"=="4"( 
```

括号前必须有空格`(`！

是的，批处理脚本很难调试。但实际上，脚本*可能*看起来更漂亮（缩进正确，等等......）。

# facebook - Internet Explorer 未捕获 OAuthException：必须使用活动访问令牌来查询有关当前用户的信息

> ID：11368201
> 
> 赞同：0
> 
> 时间：2012-07-06T19:03:01.817
> 
> 标签：facebook, internet-explorer, facebook-php-sdk, facebook-access-token

我的 Facebook 页面上有一个页面标签测验应用程序。它有 2 个 php：
**index.php：** like-gate、权限请求和测验问题（在一个表单中），这些在所有浏览器中都可以正常工作。
**processor.php** : 处理表单，上传图片：

> $photo_upload = $facebook->api('/me/photos', 'POST', 数组(
> 
> > '来源' => '@' 。'./images/userimg.jpg',
> > 'message' => $message,
> > ) );

一切都在 Chrome、Mozilla、Safari 中运行。但在 IE 中，我在 processor.php 上收到此错误：

> 致命错误：未捕获的 OAuthException：必须使用活动访问令牌来查询有关当前用户的信息。在第 1128 行扔进 .../php-sdk/base_facebook.php

在 IE 中提交表单后，它似乎丢失了访问令牌或令牌过期。

我已经尝试过下面的登录网址，但它仅在用户关闭浏览器时在 Chrome 或 Mozilla 中有效。在 IE 中单击登录链接会加载与登录链接相同的页面。

> $login_url = $facebook->getLoginUrl();

*为什么 IE 以不同于其他浏览器的方式处理访问令牌？*

任何解决方案表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T19:06:40.697

> 为什么 IE 以不同于其他浏览器的方式处理访问令牌？

当然不是。

更有可能的是，它不接受传递所需信息所必需的 cookie。

“第三方 cookie 问题”是您的关键词。

# css - 如何修复固定的侧边栏副作用？

> ID：11368204
> 
> 赞同：0
> 
> 时间：2012-07-06T19:03:23.983
> 
> 标签：css, html, sidebar

我按照在线教程/说明通过使侧边栏位置“固定”来制作侧边栏固定位置，并且效果很好。现在我意识到，由于我的页面具有 min-width 属性，因此当用户横向滚动时，不会移动的内容会移动到侧边栏中。所以基本上，我正在寻找一种在向下滚动时产生固定侧边栏的方法，但是当你横向移动时，内容不会跳到侧边栏中。我的代码类似于以下内容：

CSS

```
#sidebar {
    position:fixed;
    height:500px;
    width: 100px;
    background-color: blue;                    
}
#content {
    width:100%;
    box-sizing:border-box;
    margin-left:100px;
    background-color:purple;
} 
```

​ HTML

```
<div id="sidebar">
</div>
<div id="content">
</div>

​ 
```

JSFiddle：http: [//jsfiddle.net/znCF3/1/](http://jsfiddle.net/znCF3/1/)

注意：这不是我的实际代码，而是它的缩小版本，因为我的代码非常复杂。另外，我不能只使用流畅的布局。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T19:15:00.860

看看这个小提琴：http: [//jsfiddle.net/NfKca/](http://jsfiddle.net/NfKca/)

将css修改为：

```
#sidebar {
    position:fixed;
    height:500px;
    width: 100px;
    background-color: blue;                    
}
#content {
    box-sizing:border-box;
    background-color:purple;
    position:absolute;
    left:100px;           
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T19:29:11.497

正如其他人所说，仅使用 css 和 html 是不可能的。但是，您可以使用 javascript/jquery 执行此操作。

只需封装您想使用 jquery 来执行此操作，首先正如 watson 所说，更改侧栏的索引（我不得不做出否定），只需封装它 jquery 对某人来说无论出于何种原因都不起作用。

然后添加到您的`<head>`：

```
<script src="http://code.jquery.com/jquery-latest.min.js"></script>
<script>
<!--
$(document).ready(function() {

    $(window).scroll(function(){ 
        var offSet = - ($(this).scrollLeft());
        $('#sidebar').css('left', offSet);
    });
});
//-->
</script> 
```

[例子](http://jsfiddle.net/znCF3/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T19:07:42.090

您可以`z-index: 1;`在侧边栏上设置 。如果这没有帮助，如果您可以制作一个 jsfiddle 来说明您的意思，那就太好了。

# clojure - 我可以将 monad 与 clojurescript 一起使用吗？

> ID：11368208
> 
> 赞同：6
> 
> 时间：2012-07-06T19:03:39.810
> 
> 标签：clojure, monads, clojurescript

我知道 monad 在 clojure 中可用，但有没有人证实它们在 clojurescript 中工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-17T16:42:49.347

单子在 clojurescript 中工作。唯一的问题是您在 clojurescript [1] 中引用宏的方式。

我所做的是将所有 tools/macro.clj 和所有 monads.clj 代码复制到一个大文件中，然后我从 clojurescript 引用该文件。

这可能不是最优雅的方式，但它确实有效。

[您可以在https://github.com/cotarmanach/clojurescript-monad-macros](https://github.com/cotarmanach/clojurescript-monad-macros)中找到该文件 （我将其复制到我的项目中并将命名空间更改为我的项目之一）

[1] 见[https://github.com/clojure/clojurescript/wiki/Differences-from-Clojure](https://github.com/clojure/clojurescript/wiki/Differences-from-Clojure)

> ClojureScript 的宏是用 Clojure 编写的，并通过命名空间声明中的 require-macros 关键字引用：
> 
> (ns my.namespace (:require-macros [my.macros :as my])) :require-macros 中需要 :as 前缀选择器。需要注意的一点是，由 ClojureScript 宏生成的代码必须针对 ClojureScript 中的功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T19:15:30.190

函数式编程方法 Monads 只需要具有更高阶函数和闭包的语言。你需要一个 ClojureScript monad 库。或者你可以**继续以单子风格编写你的 ClojureScript**

编辑：通过“单子风格”，我指的是编写和编写函数，这些函数接受和返回单子值并实现三个[单子定律](https://en.wikipedia.org/wiki/Monad_(functional_programming)#Monad_laws)。有太多人比我更有资格解释 monads，所以我只链接到[我个人最喜欢的关于 monads 的视频之一](http://www.youtube.com/watch?v=ObR3qi4Guys)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-22T23:11:30.357

Chris Zheng将[Fluokitten](https://github.com/uncomplicate/fluokitten)库移植到 ClojureScript的一个很棒的端口： [https ://github.com/purnam/brahmin](https://github.com/purnam/brahmin)

因此， Chris 有一篇[很棒的帖子来反映 Monads](http://z.caudate.me/of-qufoids-and-the-monad-effect/)。

类别理论的猫库也不错[https://funcool.github.io/cats/latest/](https://funcool.github.io/cats/latest/)

ClojureScript 中的 Monads 活得很好。

# php - 如何在您的页面上为其他页面上的帖子点赞

> ID：11368213
> 
> 赞同：-1
> 
> 时间：2012-07-06T19:03:51.353
> 
> 标签：php, facebook-graph-api, facebook-like, facebook-php-sdk

好吧，我尝试使用我的页面帐户为我的页面上的帖子点赞，它有效，但是我如何使用我的页面为其他页面上的帖子点赞？

提前致谢！

**更新：** 您只需以与其他帐户相同的方式执行此操作，只需更改请求中的 page_id。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T21:53:05.483

您只需按照与其他帐户相同的方式进行操作，只需更改请求中的 page_id。

# mpi - 在 open-mpi/ mpi-run 中加载共享库

> ID：11368215
> 
> 赞同：6
> 
> 时间：2012-07-06T19:04:10.567
> 
> 标签：mpi, pbs, torque

我正在尝试使用 mpi run 使用扭矩调度程序运行我的程序。虽然在我的 pbs 文件中我加载了所有库

```
export LD_LIBRARY_PATH=/path/to/library 
```

但它给出了错误，即

```
error while loading shared libraries: libarmadillo.so.3: 
cannot open shared object file: No such file or directory. 
```

我猜错误在于变量 LD_LIBRARY_PATH 未在所有节点中设置。我将如何使它工作？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-06T19:36:34.977

`LD_LIBRARY_PATH`不会自动导出到 MPI 进程，由`mpirun`. 你应该使用

```
mpirun -x LD_LIBRARY_PATH ... 
```

推动 的值`LD_LIBRARY_PATH`。还要确保指定的路径存在于集群中的所有节点上，并且在`libarmadillo.so.3`任何地方都可用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T19:12:59.007

在某些系统上，您的环境并不总是通过`mpirun`. 您应该在`.bashrc`文件中设置所有这些变量。

# ios - 使用 Facebook SDK 的 iPhone 应用程序崩溃并出现“超出允许时间的有效断言”错误

> ID：11368217
> 
> 赞同：2
> 
> 时间：2012-07-06T19:04:20.543
> 
> 标签：ios, facebook, crash

我有一个使用当前 Facebook iOS SDK 的 iPhone（iOS 原生）应用程序。当尝试通过单点登录过程连接我的应用程序时，我经常遇到崩溃，说明我的应用程序“有超出允许时间的活动断言”。在查看 Stack Overflow 上的其他类似报告后（例如[iPhone 应用程序“有超出允许时间的有效断言”](https://stackoverflow.com/questions/3654716/iphone-app-has-active-assertions-beyond-permitted-time)），我没有找到任何适合我情况的东西。我正在遵循 Facebook 推荐的集成 SSO 的做法（来自[https://developers.facebook.com/docs/mobile/ios/build/#implementsso](https://developers.facebook.com/docs/mobile/ios/build/#implementsso)）。这意味着我在我的主线程上调用 Facebook SDK。Facebook 似乎并不认为这会是个问题。

谁能解释这个特定错误的含义？我认为某些 iOS 主管机制正在杀死我的应用程序，因为它花费了太长时间来做某事，但是有什么特别的东西呢？是不是因为前台任务被锁定太久？或者是什么？

这是显示错误的 iOS 应用程序崩溃报告。

```
Incident Identifier: F2486727-9EAC-4D7F-8A45-07AC51ADD186
CrashReporter Key:   b3825455d63e6e7f659074b5ea5fb89cf8ed1b9f
Hardware Model:      iPhone2,1
Process:         JouleBug [2060]
Path:            /var/mobile/Applications/FA3DB4BA-92AF-4D14-AD3A-1553EFA1FA16/JouleBug.app/JouleBug
Identifier:      JouleBug
Version:         ??? (???)
Code Type:       ARM (Native)
Parent Process:  launchd [1]

Date/Time:       2012-07-05 14:44:30.751 -0400
OS Version:      iPhone OS 5.1.1 (9B206)
Report Version:  104

Exception Type:  00000020
Exception Codes: 0x8badf00d
Highlighted Thread:  3

Application Specific Information:
JouleBug[2060] has active assertions beyond permitted time: 
{(
    <SBProcessAssertion: 0xe2ed000> identifier: Suspending process: JouleBug[2060] permittedBackgroundDuration: 10.000000 reason: suspend owner pid:52 preventSuspend  preventThrottleDownCPU  preventThrottleDownUI 
)}

Elapsed total CPU time (seconds): 6.190 (user 6.190, system 0.000), 84% CPU 
Elapsed application CPU time (seconds): 1.515, 21% CPU

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0:
0   libsystem_kernel.dylib            0x37e23dcc __open + 8
1   Foundation                        0x31ab412a _NSmkstemp83 + 322
2   Foundation                        0x31ab3f4a _NSCreateTemporaryFile + 118
3   Foundation                        0x31ab3b36 _NSWriteBytesToFileWithExtendedAttributes + 186
4   Foundation                        0x31ab3a70 _NSWriteBytesToFile + 24
5   Foundation                        0x31ab3a48 -[NSData(NSData) writeToFile:atomically:] + 76
6   JouleBug                          0x00109c5c -[LazyJSONModelMapper save] (LazyJSONModelMapper.m:106)
7   JouleBug                          0x00109b40 __36-[LazyJSONModelMapper initWithFile:]_block_invoke_0 (LazyJSONModelMapper.m:63)
8   Foundation                        0x31a856c2 -[__NSObserver _doit:] + 286
9   Foundation                        0x31b1152a __67-[NSNotificationCenter addObserverForName:object:queue:usingBlock:]_block_invoke_0 + 22
10  CoreFoundation                    0x311d6540 ___CFXNotificationPost_block_invoke_0 + 64
11  CoreFoundation                    0x31162090 _CFXNotificationPost + 1400
12  Foundation                        0x31a853e4 -[NSNotificationCenter postNotificationName:object:userInfo:] + 60
13  UIKit                             0x3090524e -[UIApplication _handleApplicationSuspend:eventInfo:] + 786
14  UIKit                             0x30895ef8 -[UIApplication handleEvent:withNewEvent:] + 2088
15  UIKit                             0x30895560 -[UIApplication sendEvent:] + 48
16  UIKit                             0x30894f34 _UIApplicationHandleEvent + 5820
17  GraphicsServices                  0x331db224 PurpleEventCallback + 876
18  CoreFoundation                    0x311deacc __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 8
19  CoreFoundation                    0x311de32e __CFRunLoopDoSources0 + 358
20  CoreFoundation                    0x311dd03e __CFRunLoopRun + 646
21  CoreFoundation                    0x3116049e CFRunLoopRunSpecific + 294
22  CoreFoundation                    0x31160366 CFRunLoopRunInMode + 98
23  GraphicsServices                  0x331da432 GSEventRunModal + 130
24  UIKit                             0x308c3cce UIApplicationMain + 1074
25  JouleBug                          0x00033ac6 main (main.m:14)
26  JouleBug                          0x00003900 0x1000 + 10496

Thread 1 name:  Dispatch queue: com.apple.libdispatch-manager
Thread 1:
0   libsystem_kernel.dylib            0x37e143a8 kevent + 24
1   libdispatch.dylib                 0x35a2eea4 _dispatch_mgr_invoke + 708
2   libdispatch.dylib                 0x35a2ebc2 _dispatch_mgr_thread + 30

Thread 2:
0   libsystem_kernel.dylib            0x37e24cd4 __workq_kernreturn + 8
1   libsystem_c.dylib                 0x352aaf36 _pthread_wqthread + 610
2   libsystem_c.dylib                 0x352aacc8 start_wqthread + 0

Thread 3 name:  WebThread
Thread 3:
0   libsystem_kernel.dylib            0x37e240d8 __psynch_mutexwait + 24
1   libsystem_c.dylib                 0x352a4674 pthread_mutex_lock + 376
2   WebCore                           0x362614e8 _ZL17_WebTryThreadLockb + 208
3   WebCore                           0x362c016c _ZL19SendDelegateMessageP12NSInvocation + 700
4   WebKit                            0x36bfad80 -[_WebSafeForwarder forwardInvocation:] + 112
5   CoreFoundation                    0x3120ca7c ___forwarding___ + 660
6   CoreFoundation                    0x31167648 _CF_forwarding_prep_0 + 40
7   WebCore                           0x3631bf7c WebCore::FrameLoader::finishedParsing() + 56
8   WebCore                           0x3631bf12 WebCore::Document::finishedParsing() + 186
9   WebCore                           0x3631be50 WebCore::HTMLTreeBuilder::finished() + 16
10  WebCore                           0x3630cfbe WebCore::HTMLDocumentParser::prepareToStopParsing() + 106
11  WebCore                           0x3630cc9e WebCore::HTMLDocumentParser::finish() + 90
12  WebCore                           0x3630cc3a WebCore::Document::finishParsing() + 14
13  WebCore                           0x36309e62 WebCore::DocumentWriter::endIfNotLoadingMainResource() + 74
14  WebCore                           0x363084fa WebCore::DocumentLoader::finishedLoading() + 74
15  WebCore                           0x363559c8 WebCore::FrameLoader::finishedLoading() + 48
16  WebCore                           0x36355938 WebCore::MainResourceLoader::didFinishLoading(double) + 88
17  WebCore                           0x363558c2 _ZN7WebCoreL16didFinishLoadingEP16_CFURLConnectionPKv + 46
18  CFNetwork                         0x349997ee URLConnectionClient::_clientDidFinishLoading(URLConnectionClient::ClientConnectionEventQueue*) + 186
19  CFNetwork                         0x3498e49e URLConnectionClient::ClientConnectionEventQueue::processAllEventsAndConsumePayload(XConnectionEventInfo<XClientEvent, XClientEventParams>*, long) + 418
20  CFNetwork                         0x3498e592 URLConnectionClient::ClientConnectionEventQueue::processAllEventsAndConsumePayload(XConnectionEventInfo<XClientEvent, XClientEventParams>*, long) + 662
21  CFNetwork                         0x3498e19c URLConnectionClient::processEvents() + 100
22  CFNetwork                         0x3498e0d2 MultiplexerSource::perform() + 150
23  CoreFoundation                    0x311deacc __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 8
24  CoreFoundation                    0x311de32e __CFRunLoopDoSources0 + 358
25  CoreFoundation                    0x311dd03e __CFRunLoopRun + 646
26  CoreFoundation                    0x3116049e CFRunLoopRunSpecific + 294
27  CoreFoundation                    0x31160366 CFRunLoopRunInMode + 98
28  WebCore                           0x36304c9c _ZL12RunWebThreadPv + 396
29  libsystem_c.dylib                 0x352b072e _pthread_start + 314
30  libsystem_c.dylib                 0x352b05e8 thread_start + 0

Thread 4:
0   libsystem_kernel.dylib            0x37e14004 mach_msg_trap + 20
1   libsystem_kernel.dylib            0x37e141fa mach_msg + 50
2   CoreFoundation                    0x311de3ec __CFRunLoopServiceMachPort + 120
3   CoreFoundation                    0x311dd124 __CFRunLoopRun + 876
4   CoreFoundation                    0x3116049e CFRunLoopRunSpecific + 294
5   CoreFoundation                    0x311dd444 CFRunLoopRun + 92
6   JouleBug                          0x00071800 +[ASIHTTPRequest runRequests] (ASIHTTPRequest.m:4772)
7   Foundation                        0x31a92a7a -[NSThread main] + 66
8   Foundation                        0x31b2658a __NSThread__main__ + 1042
9   libsystem_c.dylib                 0x352b072e _pthread_start + 314
10  libsystem_c.dylib                 0x352b05e8 thread_start + 0

Thread 5 name:  com.apple.NSURLConnectionLoader
Thread 5:
0   libsystem_kernel.dylib            0x37e14004 mach_msg_trap + 20
1   libsystem_kernel.dylib            0x37e141fa mach_msg + 50
2   CoreFoundation                    0x311de3ec __CFRunLoopServiceMachPort + 120
3   CoreFoundation                    0x311dd124 __CFRunLoopRun + 876
4   CoreFoundation                    0x3116049e CFRunLoopRunSpecific + 294
5   CoreFoundation                    0x31160366 CFRunLoopRunInMode + 98
6   Foundation                        0x31a92bb2 +[NSURLConnection(Loader) _resourceLoadLoop:] + 302
7   Foundation                        0x31a92a7a -[NSThread main] + 66
8   Foundation                        0x31b2658a __NSThread__main__ + 1042
9   libsystem_c.dylib                 0x352b072e _pthread_start + 314
10  libsystem_c.dylib                 0x352b05e8 thread_start + 0

Thread 6 name:  com.apple.CFSocket.private
Thread 6:
0   libsystem_kernel.dylib            0x37e24570 __select + 20
1   CoreFoundation                    0x311e263a __CFSocketManager + 726
2   libsystem_c.dylib                 0x352b072e _pthread_start + 314
3   libsystem_c.dylib                 0x352b05e8 thread_start + 0

Thread 7:
0   libsystem_kernel.dylib            0x37e14004 mach_msg_trap + 20
1   libsystem_kernel.dylib            0x37e141fa mach_msg + 50
2   CoreFoundation                    0x311de3ec __CFRunLoopServiceMachPort + 120
3   CoreFoundation                    0x311dd124 __CFRunLoopRun + 876
4   CoreFoundation                    0x3116049e CFRunLoopRunSpecific + 294
5   CoreFoundation                    0x31160366 CFRunLoopRunInMode + 98
6   Foundation                        0x31a86b6e -[NSRunLoop(NSRunLoop) runMode:beforeDate:] + 250
7   Foundation                        0x31aa051c -[NSRunLoop(NSRunLoop) run] + 72
8   JouleBug                          0x0014e516 0x1000 + 1365270
9   Foundation                        0x31a92a7a -[NSThread main] + 66
10  Foundation                        0x31b2658a __NSThread__main__ + 1042
11  libsystem_c.dylib                 0x352b072e _pthread_start + 314
12  libsystem_c.dylib                 0x352b05e8 thread_start + 0

Thread 8 name:  Dispatch queue: com.apple.root.default-priority
Thread 8:
0   libsystem_kernel.dylib            0x37e2451c __rename + 8
1   libsystem_kernel.dylib            0x37e15b6e rename + 2
2   Foundation                        0x31ab3dac _NSWriteBytesToFileWithExtendedAttributes + 816
3   Foundation                        0x31ab3a70 _NSWriteBytesToFile + 24
4   Foundation                        0x31ab3a48 -[NSData(NSData) writeToFile:atomically:] + 76
5   JouleBug                          0x00109c5c -[LazyJSONModelMapper save] (LazyJSONModelMapper.m:106)
6   JouleBug                          0x00109a4e -[LazyJSONModelMapper initWithFile:] (LazyJSONModelMapper.m:85)
7   JouleBug                          0x001097c6 -[LazyJSONModelMapper initWithData:fromFile:] (LazyJSONModelMapper.m:45)
8   JouleBug                          0x00089e5c +[GameDataManager storePinFromPinDict:] (GameDataManager.m:238)
9   JouleBug                          0x000dd378 +[GameDataLoader processData:] (GameDataLoader.m:62)
10  JouleBug                          0x000ae300 +[DataLoader refreshDataSynchronously] (DataLoader.m:54)
11  JouleBug                          0x000ae29c __25+[DataLoader refreshData]_block_invoke_0 (DataLoader.m:36)
12  Foundation                        0x31acbe50 -[NSBlockOperation main] + 196
13  Foundation                        0x31aad38c -[__NSOperationInternal start] + 856
14  JouleBug                          0x000ccb06 -[TimedBlockOperation start] (NSOperationExtensions.m:96)
15  Foundation                        0x31b1678c __block_global_6 + 96
16  libdispatch.dylib                 0x35a22c52 _dispatch_call_block_and_release + 6
17  libdispatch.dylib                 0x35a2e7b4 _dispatch_worker_thread2 + 256
18  libsystem_c.dylib                 0x352aadf4 _pthread_wqthread + 288
19  libsystem_c.dylib                 0x352aacc8 start_wqthread + 0

Thread 9:
0   libsystem_kernel.dylib            0x37e24cd4 __workq_kernreturn + 8
1   libsystem_c.dylib                 0x352aaf36 _pthread_wqthread + 610
2   libsystem_c.dylib                 0x352aacc8 start_wqthread + 0

Thread 10:
0   libsystem_kernel.dylib            0x37e24cd4 __workq_kernreturn + 8
1   libsystem_c.dylib                 0x352aaf36 _pthread_wqthread + 610
2   libsystem_c.dylib                 0x352aacc8 start_wqthread + 0

Thread 11 name:  WebCore: CFNetwork Loader
Thread 11:
0   libsystem_kernel.dylib            0x37e14004 mach_msg_trap + 20
1   libsystem_kernel.dylib            0x37e141fa mach_msg + 50
2   CoreFoundation                    0x311de3ec __CFRunLoopServiceMachPort + 120
3   CoreFoundation                    0x311dd124 __CFRunLoopRun + 876
4   CoreFoundation                    0x3116049e CFRunLoopRunSpecific + 294
5   CoreFoundation                    0x31160366 CFRunLoopRunInMode + 98
6   WebCore                           0x3632e0d2 _ZN7WebCoreL15runLoaderThreadEPv + 122
7   libsystem_c.dylib                 0x352b072e _pthread_start + 314
8   libsystem_c.dylib                 0x352b05e8 thread_start + 0

Thread 12:
0   libsystem_kernel.dylib            0x37e24cd4 __workq_kernreturn + 8
1   libsystem_c.dylib                 0x352aaf36 _pthread_wqthread + 610
2   libsystem_c.dylib                 0x352aacc8 start_wqthread + 0

Unknown thread crashed with unknown flavor: 5, state_count: 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T13:46:34.563

我终于找到了这个。正如在 Stack Overflow 上报告的其他类似事件一样，这被证明是计划操作试图在后台运行时出现的问题。我的问题解决了。

# mysql - 在应用程序中混合使用 MySQL 和 Mongodb

> ID：11368219
> 
> 赞同：10
> 
> 时间：2012-07-06T19:04:23.490
> 
> 标签：mysql, mongodb, doctrine-orm, nosql

我正在使用 PHP/Symfony2/Doctrine2 编写一个 Web 应用程序，并且刚刚完成了数据库的设计。我们必须将这些对象（例如项目、供应商）导入我们的数据库，这些对象来自不同领域的不同客户。有些客户在项目对象中有 2 个字段，有些有 20 个。所以我正在考虑在 MongoDB 中实现它们，因为它看起来很有用。

Symfony2 支持 ORM 和 ODM，所以这应该不是问题，现在我的问题是如何确保两个数据库中数据的完整性。因为**我的 MySQL 数据库中的对象需要以某种方式链接到 MongoDB 中的对象以**解决完整性问题。

有没有更好的解决方案？任何帮助/想法将不胜感激

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-06T19:26:12.793

当我们在 OpenSky 工作时，[Bulat实现了一个 Doctrine 扩展，用于处理 MongoDB 文档和 MySQL 记录之间的引用，该扩展目前位于他们（公认已过时）](https://github.com/avalanche123) [DoctrineExtensions](https://github.com/l3pp4rd/DoctrineExtensions)项目的[分支](https://github.com/opensky/DoctrineExtensions)中。您将要查看或分支。为了在您的项目中使用它，您可能希望将其移植到 DoctrineExtensions 的新分支，或者只是将代码合并到您的应用程序中。不幸的是，除了代码本身之外没有任何文档。`orm2odm_references``openskyfork`

值得庆幸的是，Doctrine 网站上也有[一篇食谱文章](http://docs.doctrine-project.org/projects/doctrine-mongodb-odm/en/latest/cookbook/blending-orm-and-mongodb-odm.html)，描述了如何从头开始实现这一点。基本上，您依靠事件侦听器将您的属性替换为来自其他对象管理器的引用（即未初始化的代理对象），而代理对象延迟加载自己的自然行为会处理其余部分。如果事件侦听器是一项服务，您可以轻松地将 ORM 和 ODM 对象管理器注入其中。

该模型唯一保证的完整性是，当您尝试对错误的引用进行水合时，您会收到异常，这可能比您通过简单地存储另一个数据库的 ID 并手动查询得到的要多。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-06T15:33:55.903

所以我们解决这个问题的方法是迁移到 Postgres。Postgres 有一个名为[hstore](http://www.postgresql.org/docs/9.0/static/hstore.html)的数据类型，它的作用类似于 NoSQL 列。工作很甜

**更新**

现在我回顾一下，使用`jsonb`而不是`json`or`hstore`因为它允许您拥有比键值存储更多的数据结构。

# web-services - 测试 REST 接口的最佳实践

> ID：11368221
> 
> 赞同：1
> 
> 时间：2012-07-06T19:04:29.653
> 
> 标签：web-services, unit-testing, rest, erlang

我正在编写一个完整的 REST 网络应用程序，并且正在寻找一个好的测试框架。该应用程序主要是用 Erlang 编写的，但我想在不依赖 erlang 代码的情况下测试应用程序的前端。

还需要与 js 测试框架集成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T08:56:56.600

美好的一天，如果您对 ruby​​ 的了解很少，那么我建议您使用 capybara+rails 解决方案，它还允许测试富含 javascript 的站点，只需使用支持 javascript 的测试驱动程序，如 selenium，这里是关于在远程站点上使用它的简短文档：[http ://rubydoc.info/github/jnicklas/capybara/master#Calling_remote_servers](http://rubydoc.info/github/jnicklas/capybara/master#Calling_remote_servers)

还可以查看黄瓜[http://cukes.info/](http://cukes.info/)，它与 rails+capybara 组合配合得很好，并且还有 erlang 端口

# parsing - Sun sTax、JAXB 和关闭针对 DTD/XSD/schema 的验证

> ID：11368223
> 
> 赞同：1
> 
> 时间：2012-07-06T19:04:45.987
> 
> 标签：parsing, jboss, jaxb, stax, validating

我们将 JAXB 与 sTAX XMLEventReaderAPI 结合使用来解析和提取通过 REST 调用检索到的数据 xml。

```
InputStream responseStream = response.getEntityInputStream();
    if (responseStream != null) 
    { 

        XMLInputFactory xmlif = XMLInputFactory.newInstance();

        // stax API
        XMLEventReader xmler = xmlif.createXMLEventReader(new InputStreamReader(responseStream));

        EventFilter filter = new EventFilter() {
            public boolean accept(XMLEvent event) {
                return event.isStartElement();
            }
        };

       XMLEventReader xmlfer = xmlif.createFilteredReader(xmler, filter);
        xmlfer.nextEvent();

       // use jaxb
        JAXBContext ctx = JAXBContext.newInstance(Summary.class);
        Unmarshaller um = ctx.createUnmarshaller();

        while (xmlfer.peek() != null) {
            JAXBElement<CustomObject> se = um.unmarshal(xmler,
                    CustomObject.class);
            CustomObject = se.getValue();

        }
        responseStream.close();
    } else {
        logger.error("InputStream response from API is null. No data to process");
    }
    response.close();
} 
```

所以基本上我们首先使用 sTAX 解析，然后使用 JAXB 解组它的**CustomObject**类型。**稍后我们对这个CustomObject**类型做其他事情。

但是我们遇到了一个问题，因为这段代码在 JBoss AS 6.1.0.Final 上执行

我们得到一个例外说`"The declaration for the entity "HTML.version" must end with '>'"`

似乎 sTAX 或 JAXB 正在针对 DTD/XSD 进行验证。XSD 在进行 REST 调用的同一服务器上定义。

因为我们使用的是 SUN sTAX 而不是 woodstox，所以它没有固有的 DTD/XSD 验证。没有验证，错误不能来自 sTAX 调用

那是对的吗 ？

如果问题不是 sTAX 的验证失败，那么它必须是 JAXB。

但是我不能执行以下操作：

```
um.setValidating(false); 
```

因为 setValidating 是一个不推荐使用的方法。

关于如何解决这个问题的任何想法/建议？我们的假设正确吗？这可能是一个已知的 JBoss 问题吗？

# cucumber - 使用全局挂钩运行标记场景

> ID：11368228
> 
> 赞同：0
> 
> 时间：2012-07-06T19:05:05.757
> 
> 标签：cucumber

我正在测试一个 Web 应用程序，在成功运行所有测试后，我需要通过 UI 删除项目（删除是我的测试场景的一部分）。这是为了确保在开始下一次运行之前保持干净的数据状态。我已经用@cleanup 标签标记了所有删除场景。我想要实现的是能够使用 at_exit 钩子或类似的东西触发这些标签的黄瓜运行。这有可能吗？

设置：cucumber.yml 配置文件

默认值：--tags ~@cleanup

清理：--tags @cleanup

# macos - 如何使用 QTKit 将立体声音轨分成两个单声道音轨？

> ID：11368229
> 
> 赞同：1
> 
> 时间：2012-07-06T19:05:08.643
> 
> 标签：macos, audio, quicktime, qtkit

我一直在 OSX 中编写一个用于播客的音频转换应用程序，但我遇到了一个问题。我可以访问我想要的音频的 QTTrack，但它在左扬声器和右扬声器上有两个非常不同的音频通道。有什么办法可以创建两个新的音频文件和/或在程序中播放它们 - 一种用于来自左扬声器的声音，另一种用于来自右扬声器的声音，彼此分开？

# ruby-on-rails - Mongoid 关系（自定义访问器）

> ID：11368238
> 
> 赞同：0
> 
> 时间：2012-07-06T19:05:39.207
> 
> 标签：ruby-on-rails, ruby-on-rails-3, model, associations, mongoid

我在我的 Rails 应用程序中使用 Mongoid。我有一个**用户**模型，我也有一个**角色**模型（想想管理员、访客等）。

我想设置我的 Mongoid 关联，以便可以使用以下代码：

```
u = User.first
u.invited_roles # returns all roles a user has been assigned

r = Role.new
r.invitee = user # user id should be stored in the Role
r.save! 
```

目前，我的模型设置如下：

```
class User
  include Mongoid::Document
  has_many :invited_roles, :class_name => 'Role'
end

class Role
  include Mongoid::Document
  has_one :invitee, :class_name => 'User'
end 
```

目前，当我`Role.new`从 Rails 控制台执行此操作时，我得到一个对象，该对象似乎没有存储被邀请者用户的字段。我该如何解决？我见过有人使用 inverse_of，但我真的找不到关于这个过程的任何教程或文档。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T19:39:06.430

好吧，考虑一下 --- 一个用户将被邀请拥有多个角色，但该角色只有一个用户。现在，这不是 has_one 意义上的“拥有一个”。相反，它定义了一个子关系。

因此，将 has_one 更改为 belongs_to 即可。

```
class User
  include Mongoid::Document
  has_many :invited_roles, :class_name => 'Role'
end

class Role
  include Mongoid::Document
  belongs_to :invitee, :class_name => 'User'
end 
```

# javascript - 定向碰撞检测

> ID：11368245
> 
> 赞同：0
> 
> 时间：2012-07-06T19:06:18.093
> 
> 标签：javascript, html, canvas, collision-detection

如果我想每秒移动一个对象 40 个像素并且我有以下情况，我怎样才能有效地检测到有碰撞？

假设两个对象都是 10 x 10 的正方形

2秒处运动物体的起点：

40, 100

3秒移动物体的终点：

80, 100

60、100 处的静止物体

如果我只移动移动物体一次（从 40 到 80 之间没有任何移动），我怎么知道它们之间有一个物体？

这显然是我正在做的事情的简化版本，但我希望它易于理解。

我唯一能想到的是检查每个对象是否有一个 x 值小于 80 的一侧和另一个 x 值大于 40 的一侧以及 y 值的相同想法......

如果这有什么不同，我将使用 javascript 和 html5 画布。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T19:29:27.493

您可以尝试确定是否与移动对象的开始和结束位置定义的边界矩形发生冲突：

```
+-----------+--+
|     +==+  |  |
+-----:  :--+--+
      +==+ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T19:43:29.180

听起来你想要这样的东西，它已经写好并且可以处理各种形状：

[http://code.google.com/p/box2dweb/](http://code.google.com/p/box2dweb/)

# iphone - iTunes 商店交易（应用内购买）

> ID：11368247
> 
> 赞同：2
> 
> 时间：2012-07-06T19:06:36.193
> 
> 标签：iphone, cordova, itunes-store, in-app-purchase

我目前正在开发一个 Phonegap 移动应用程序。我在我的 iPhone 应用程序中实现了应用内购买，它运行良好。我从 iTunes 检索我的产品信息，我从 iTunes 商店获得了付款收据，我的应用程序正在将收据发送回我的服务器，收据使用 curl/apple api 在服务器端进行验证。

我的问题是，在服务器端，当我使用收据信息记录购买时收据正常，所以我知道用户通过应用程序购买了哪个产品，日期时间，交易 ID 但我不知道多少钱用户为此付费。相同的产品在不同的 iTunes 商店（美国、法国、英国..），所以价格可能是 100E 或 140 美元，但在服务器端如何检索用户支付的价格和货币（例如进行统计)?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T00:49:45.367

我认为不允许您看到当地的购买价格。与您选择购买级别并没有真正的代码相关，Apple 在 Itunesconnect 中提供了一个图表，以查看他们在一系列货币中采取的付款方式。

# ajax - 谷歌地图跳转到

> ID：11368252
> 
> 赞同：0
> 
> 时间：2012-07-06T19:06:53.753
> 
> 标签：ajax, maps

完整的新手问题，但我无法弄清楚如何做到这一点：

[http://www.warrensbakery.co.uk/plymouth.htm](http://www.warrensbakery.co.uk/plymouth.htm)

我想创建一个带有跳转到谷歌地图上正确图钉并显示地址的链接的地图。

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T19:45:38.423

我制作了一个包含多个位置的自定义 Google 地图地图，每个位置都可以单击地图上的图钉本身，然后会打开一个信息窗口。我还想要我相信你在谈论的东西——点击地图外的链接并在地图上打开特定图钉的信息窗口的能力。这实际上很简单 - 只需将点击事件设置为 pin 具有的相同打开 infowindow 事件。

相关的 JavaScript

```
/* Used variables
  map = the map itself
  marker = the current pin
  infowindow = the infowindow shown on the map
    - my setup has only one infowindow and clicks just swap its content
  label = the current infowindow content
*/

// Inside loop setting each pin to the map

// Click mevent for pins
google.maps.event.addListener(marker, 'click', function() {
    infowindow.close;
    infowindow.setContent(label);
    infowindow.open(map,marker);
});

// Click event for link outside the map
$(relevantLink).click(function(){
    $("html, body").animate({scrollTop:$("#yourMap").offset().top}, 500);
    infowindow.close();
    infowindow.setContent(label);
    infowindow.open(map,marker);
    return false;
}); 
```

# android - adb wait-for-device 是一个肮脏的骗子

> ID：11368253
> 
> 赞同：0
> 
> 时间：2012-07-06T19:06:56.900
> 
> 标签：android, macos, bash, osx-lion, adb

> **可能重复：**
> [获取活动管理器的状态](https://stackoverflow.com/questions/11316354/get-status-of-activity-manager)

我正在编写一个启动 android 模拟器并执行卸载和安装操作的脚本。我想用`adb wait-for-device`它来推迟模拟器准备就绪。

不幸的是，它看起来像是过火了。它会过早停止等待（有时），然后当脚本尝试卸载并重新安装应用程序时，我收到错误消息：

```
Could not access the Package Manager.  Is the system running? 
```

和

```
android.util.AndroidException: Can't connect to activity manager; is the system running? 
```

有时 adb 会挂起。永远不要拿起模拟器，但是这种情况发生的频率比提早发生的频率要低一些。我得到相同的行为`adb get-state`。

如果有任何帮助，我正在 OSX Lion 上运行。

# .htaccess - 如何使用.htaccess 重写媒体路径？

> ID：11368254
> 
> 赞同：1
> 
> 时间：2012-07-06T19:06:56.693
> 
> 标签：.htaccess, url-rewriting

目前我的网站图片、css、js路径是这样的。它很长。我想使用 .htaccess 隐藏 URL 的某些部分，看看这个例子。

```
http://www.mysite.com/themes/global/css/style.css
http://www.mysite.com/themes/global/js/script.js
http://www.mysite.com/themes/global/images/logo.png
.... 
```

这就是我想要的，而无需使用 .htaccess 更改当前目录结构

```
http://www.mysite.com/css/style.css
http://www.mysite.com/js/script.js
http://www.mysite.com/images/logo.png
.... 
```

我怎样才能做到这一点？是好是坏请评论。谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T16:58:34.753

您可以尝试这样的事情，首先检查您是否正在访问 css、js 或图像，然后将短 URI 重写为完整 URI：

```
RewriteEngine On
RewriteCond %{REQUEST_URI} \.(css|js|jpe?g|gif|png|bmp)$
RewriteCond %{REQUEST_URI} !^/themes/global/
RewriteRule ^(.*) /themes/global/$1 [L] 
```

# javascript - 使用.each 循环遍历Backbone View 中具有相同类的元素？

> ID：11368256
> 
> 赞同：1
> 
> 时间：2012-07-06T19:07:04.933
> 
> 标签：javascript, jquery, backbone.js, underscore.js

我正在使用 Backbone 和 JQuery，并希望创建一个 Backbone 视图来[创建等高列，如本链接的方法 2 中所述](http://buildinternet.com/2009/07/four-methods-to-create-equal-height-columns/)。HTML 如下所示：

```
<div class="container">
 <div  id="leftcolumn" class="set_equal_height"> … Lots Of Content … </div>
 <div id="middlecolumn" class="set_equal_height"> … Lots Of Content … </div>
 <div  id="rightcolumn" class="set_equal_height"> … Lots Of Content … </div>
</div> 
```

我将以下主干视图放在一起，但它可能不起作用，因为使用 .each 的循环不起作用（页面加载没有错误，但列的高度没有被 javascript 修改）：

```
define([
  'jquery',
  'underscore',
  'backbone',
], function($, _, Backbone) {
  var SetEqualHeight = Backbone.View.extend({
    initialize: function() {
      var tallestcolumn = 0;
      console.log(this.$el.height());
      console.log(this.$el.attr("id"));
      this.$el.each(function() {
        currentHeight = $(this).height();
        console.log(currentHeight);
        if(currentHeight > tallestcolumn) {
            tallestcolumn  = currentHeight;
        }
      });
    this.$el.height(tallestcolumn);
    },
  });
  return SetEqualHeight;
}); 
```

我在单独的 Wire 规范中定义了“el”参数，如下所示：{ el: 'div.set_equal_height' }，并且自从“console.log(this.$el.height())”和上面代码中的 console.log(this.$el.attr("id")) 打印正确。但是“.each”语句中的console.log没有打印出来，表明“.each”存在问题。我查看了[这个问题](https://stackoverflow.com/questions/10354100/backbone-js-bind-this-to-each)并尝试了下划线“_.each”方法，但无法弄清楚如何使用给定类（即 div.set_equal_height）而不是给定数组迭代元素。谁能启发我让 .each 在上面的主干视图中工作？请！！！

仅供参考，以下函数可自行工作（我希望将其合并为 Backbone 视图或视图助手）：

```
function setEqualHeight(columns) {
 var tallestcolumn = 0;
 columns.each(function() {
  currentHeight = $(this).height();
  if(currentHeight > tallestcolumn) {
   tallestcolumn  = currentHeight;
  }
 });
 columns.height(tallestcolumn);
}
$(document).ready(function() {
 setEqualHeight($("div.set_equal_height"));
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T19:31:14.600

我假设你正在用这样的东西实例化你的视图？

```
new SetEqualHeight({el: '.container') 
```

如果是这样，这意味着`$el`它将被设置为您视图中的容器 div。 `$(anything).each`将迭代“”的所有成员`anything`......但在你的情况下只有一个成员（`'.container'`）。

解决方案是更改此行：

```
this.$el.each(function() { 
```

至：

```
this.$el.find('.set_equal_height').each(function() { 
```

或者更好（更多 Backbone-y）：

```
this.$('.set_equal_height').each(function() { 
```

希望有帮助。

# android - 图标左侧的菜单资源项位置标题

> ID：11368260
> 
> 赞同：1
> 
> 时间：2012-07-06T19:07:18.120
> 
> 标签：android, xamarin.android

有没有办法将菜单项的标题文本放置在图标的左侧而不是 ActionBar 的右侧？所以在：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">
  <item
    android:id="@+id/forward"
    android:title="Begin"
    android:icon="@drawable/ForwardArrow"
    android:showAsAction="always"></item>
</menu> 
```

它会出现“Begin ->”而不是“-> Begin”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T22:31:10.583

虽然您可以`android:actionButtonStyle`在主题中定义一些内容并将其应用于您的活动，但我不知道您可以使用它来转身并影响图像与文本的位置。

但是，您可以`android:actionLayout`在您的`<item>`元素中使用您自己设计的其他东西来替换库存操作按钮。如果您浏览 Android 源代码并找到这些操作按钮的来源，我怀疑您会发现它们是样式`Button`对象，使用复合可绘制内容将图像放在文本标题旁边。`actionLayout`至少在理论上，克隆它并切换图像的侧面，然后将其用于您的, 应该可以工作。

# c# - 在 ASP.NET 中检索 LAST_INSERT_ID 值时记录发布两次

> ID：11368261
> 
> 赞同：0
> 
> 时间：2012-07-06T19:07:20.273
> 
> 标签：c#, asp.net, mysql

我在 asp.net 中实现了用于存储记录和检索身份字段值的代码。这是我的代码。

```
str.Append("Insert Into Table1(value1,value2)values(?value1,?value2);Select LAST_INSERT_ID();");
MySqlCommand cmd = new MySqlCommand(str.ToString(), con);
cmd.CommandType = CommandType.Text;
cmd.Parameters.Add(new MySqlParameter("?value1", value1));
cmd.Parameters.Add(new MySqlParameter("?value2", value2));
if (con.State != ConnectionState.Open) 
  con.Open();
cmd.ExecuteNonQuery();
long id = Convert.ToInt64(cmd.ExecuteScalar()); 
```

当我检查我的数据库时，每条记录都发布了两次。当我删除线。

```
 long id = Convert.ToInt64(cmd.ExecuteScalar()); 
```

一切都很好，但没有检索到身份。我如何实现代码以检索身份字段值并仅发布一次记录。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T19:09:56.313

`ExecuteScalar`执行查询并返回结果。`ExecuteNonQuery`执行查询。这意味着您通过调用两者来执行两次查询。摆脱`ExecuteNonQuery`方法，你会很好

```
if (con.State != ConnectionState.Open) 
   con.Open();    

long id = Convert.ToInt64(cmd.ExecuteScalar()); 
```

# javascript - 在 JavaScript 命名空间中共享变量

> ID：11368264
> 
> 赞同：2
> 
> 时间：2012-07-06T19:07:31.850
> 
> 标签：javascript, javascript-namespaces

**我的目标：**命名我的 javascript 以保持全局命名空间干净。

**我的问题：**如何在我的 JavaScript 命名空间中的方法之间共享变量？

在我的示例中，我正在扩展和覆盖 ASP.net ModalPopupExtender 的行为。我想知道如何在不使其成为全局变量的情况下共享`modalPopupStack`变量。`ModalPopupShowOverride``ModalPopupHideOverride`

**相关代码：**

```
$(function () {
    if (Sys.Extended != undefined && Sys.Extended.UI != undefined && Sys.Extended.UI.ModalPopupBehavior != undefined) {
        MyPageMethods.ModalPopupShowOriginal = Sys.Extended.UI.ModalPopupBehavior.prototype.show;
        MyPageMethods.ModalPopupHideOriginal = Sys.Extended.UI.ModalPopupBehavior.prototype.hide;
        Sys.Extended.UI.ModalPopupBehavior.prototype.show = MyPageMethods.ModalPopupOverrides.ModalPopupShowOverride;
        Sys.Extended.UI.ModalPopupBehavior.prototype.hide = MyPageMethods.ModalPopupOverrides.ModalPopupHideOverride;
    }
});

var MyPageMethods = {

    ModalPopupShowOriginal: function () { },

    ModalPopupHideOriginal: function () { },

    ModalPopupOverrides: {

        modalPopupStack: new Array(),

        ModalPopupShowOverride: function () {

            var extender = this;
            var topElement;

            MyPageMethods.ModalPopupShowOriginal.apply(this, arguments);

            for (var x = 0; x < modalPopupStack.length; x++) {

                if ($(modalPopupStack[x].background).css("z-index") > $(extender._element).css('z-index') || $(modalPopupStack[x].popup).css("z-index") > $(extender._element).css('z-index')) {

                    if ($(modalPopupStack[x].background).css("z-index") > $(extender._element).css('z-index')) {
                        topElement = $(modalPopupStack[x].background).css("z-index");
                    }
                    else if ($(modalPopupStack[x].popup).css("z-index") > $(extender._element).css('z-index')) {
                        topElement = $(modalPopupStack[x].popup).css("z-index");
                    }

                }

            }

            if (topElement != undefined) {
                $(extender._backgroundElement).css('z-index', topElement);
            }

            modalPopupStack.push({ 'id': extender._id, 'background': extender._backgroundElement, 'popup': extender._element });

        },

        ModalPopupHideOverride: function () {
            var extender;
            MyPageMethods.ModalPopupHideOriginal.apply(this, arguments);
            extender = modalPopupStack.shift();
        }

    }

} 
```

我确信有一个简单的解决方案，但我不确定它是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T19:10:31.630

听起来您希望变量在命名空间内可见，但不在命名空间之外。如果是这样，请尝试以下解决方案。

```
var MyPageMethods = (function() { 
  // This variable is local to the namespace.  It can't be accessed from 
  // the caller
  var modalPopupStack = new Array();

  // These values are available to the callers as members of MyPageMethods
  return { 
    ModalPopupShowOriginal: function () { },

    ModalPopupHideOriginal: function () { },

    ModalPopupOverrides: { ... } 
  };
})(); 
```

此模式使用函数为命名空间的局部变量建立私有函数范围。然后它返回一个新对象，其中包含在命名空间之外可访问的成员。这些定义发生在函数内部，因此它们可以访问命名空间私有数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T19:14:26.220

您可以使用以下方法在两种方法中引用该属性：

```
MyPageMethods.ModalPopupOverrides.modalPopupStack 
```

这可能有点麻烦，因此您可能希望在每个方法中为其添加别名，如下所示：

```
var modalPopupStack = MyPageMethods.ModalPopupOverrides.modalPopupStack; 
```

请注意，该值在全局范围内仍然可见（与@JaredPar 的答案不同），但它只是在现有全局对象上的捎带。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T19:18:47.180

如果您愿意，可以将其作为命名空间的一部分。或者为了获得更多隐私，制作一个本地闭包，将其合并并公开您想要的功能：

```
var MyPageMethods = {
    ModalPopupShowOriginal: function () { },
    ModalPopupHideOriginal: function () { },
    ModalPopupOverrides: (function() {
        var modalPopupStack = new Array();
        var show = function () {
            // show implementation using modalPopupStack
        };
        var hide = function () {
            // hide implementation using modalPopupStack
        };
        return {
            ModalPopupShowOverride: show,
            ModalPopupHideOverride: hide
        }
    }())
}; 
```

顺便说一句，`new Array()`这些天很少使用。这通常是首选：

```
 var modalPopupStack = []; 
```

It's shorter, cleaner, and really more explicit.

# streaming - RTP 多路复用还是混合？

> ID：11368266
> 
> 赞同：1
> 
> 时间：2012-07-06T19:07:35.730
> 
> 标签：streaming, audio-streaming, rtp

我正在设计一个我想使用 RTP 的实时语音通信系统。这是我的一般要求：

*   每个用户将一个音频流流式传输到服务器
*   传入流的压缩方式可能不同，具体取决于源（SIP 中继、Android 电话、桌面客户端等）
*   用户可以选择他们想要接收的流

如果用户有无限的带宽并且没有有限数量的端口，我会让他们每个人都为他们想要接收的每个流与服务器打开一个 RTP 流。但是，很多用户将使用 3G 或 2G 网络，所以我的问题是，如何将流（由用户选择）捆绑到单个 RTP 流中？

我见过的一种选择是将流多路复用到一个数据包中，但据我所知，这实际上违反了 RFC（但是，有用于多路复用的工作草案）。

另一种选择是将音频混合到一个数据包中。这是推荐的方法吗？我必须首先将所有选择的流标准化为一种格式。

我对整个 VoIP/流媒体很陌生，所以这可能是一个糟糕的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T17:57:19.257

我猜你想使用 tcp 为了不丢失数据。你需要在 tcp 上使用 rtp[参见 rfc](https://www.rfc-editor.org/rfc/rfc4571)

这允许通过单个套接字发送多个 rtp 流，每个流具有唯一的 id。

# c# - 无法从配置部分 'common/logging' 获取 Common.Logging 的配置

> ID：11368267
> 
> 赞同：23
> 
> 时间：2012-07-06T19:07:36.637
> 
> 标签：c#, log4net, common.logging

我正在尝试使用以下日志记录程序集配置控制台应用程序：

*   Common.Logging.dll (2.1.0.0)
*   Common.Logging.Log4Net1211.dll (2.1.0.0)
*   log4net.dll (1.2.11.0)

如果记录器以编程方式配置，那么一切正常：

```
NameValueCollection properties = new NameValueCollection(); properties["showDateTime"] = "true";    
Common.Logging.LogManager.Adapter = new Common.Logging.Simple.ConsoleOutLoggerFactoryAdapter(properties); 
```

但是如果我尝试使用以下配置文件启动它，它就会爆炸：

```
<?xml version="1.0"?>
<configuration>
    <configSections>
        <sectionGroup name="common">
            <section name="logging" type="Common.Logging.ConfigurationSectionHandler, Common.Logging" />
        </sectionGroup>
    </configSections>

    <common>
    <logging>
        <factoryAdapter type="Common.Logging.Log4Net.Log4NetLoggerFactoryAdapter, Common.Logging.Log4Net">
             <arg key="configType" value="FILE-WATCH"/>
            <arg key="configFile" value="~/Log4NET.xml"/>
        </factoryAdapter>
    </logging>
</common>
</configuration> 
```

这些是相关的错误消息：

```
{"Unable to cast object of type 'System.Configuration.DefaultSection' to type 'System.Configuration.AppSettingsSection'."}

{"Failed obtaining configuration for Common.Logging from configuration section 'common/logging'."} 
```

似乎无法解析我的配置文件，有谁知道正确的格式应该是什么，还是其他什么问题？[我使用官方文档](http://netcommon.sourceforge.net/docs/2.1.0/reference/html/ch01.html#logging-usage)创建了我的配置文件。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-22T11:03:11.653

我也遇到了这个（或相关的）问题，经过半天的错误搜寻和调试，我将其缩小为配置问题。

该异常与 OP 相同，并且其内部的几个级别的内部异常未能找到`Common.Logging.Log4Net`( `FileNotFoundException`)。

似乎对于 Common.Logging.Log4Net1211 NuGet 包，他们已将程序集名称重命名为**Common.Logging.Log4Net1211**而不是简单的**Common.Logging.Log4Net**。这意味着`app.config`您需要引用这个新的程序集名称： `<factoryAdapter type="Common.Logging.Log4Net.Log4NetLoggerFactoryAdapter, Common.Logging.Log4net1211">`

这是我的 app.config 的整个 common/logging 部分供参考：

```
<common>
  <logging>
    <!-- Notice that it's Log4net1211 -->
    <factoryAdapter type="Common.Logging.Log4Net.Log4NetLoggerFactoryAdapter, Common.Logging.Log4net1211">
      <arg key="configType" value="FILE-WATCH" />
      <arg key="configFile" value="~/Log4Net-MAIN.config" />
    </factoryAdapter>
  </logging>
</common> 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-07-25T12:50:40.177

您的应用程序（我下载的那个）有两个问题：

1.  app.config 中的 configSections 如下所示：

```
<configSections>
    <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler, log4net"/>

    <sectionGroup name="common">
        <section name="logging" type="Common.Logging.ConfigurationSectionHandler, Common.Logging" />
    </sectionGroup>

    <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler,log4net" />
</configSections> 
```

注意 log4net-section 被声明了两次？删除第一个。

1.  删除第一个 log4net 部分后，我得到以下信息：

> 无法加载文件或程序集 'log4net, Version=1.2.11.0, Culture=neutral, PublicKeyToken=669e0ddf0bb1aa2a' 或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。（来自 HRESULT 的异常：0x80131040）

我从 log4net 网站下载了 log4net 1.2.11.0，解压缩，解封 dll 并替换了示例中的 log4net，它似乎可以工作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-09-20T16:00:10.437

我正在使用

> Common.Logging v3.3.1.0

和

> Common.Logging.Log4Net1213 v3.3.1.0

in `ASP.NET Web API v5`，抛出异常

> “不允许父配置部分”

[Common.Logging.ConfigurationSectionHandler.Create](https://github.com/net-commons/common-logging/blob/master/src/Common.Logging/Logging/ConfigurationSectionHandler.cs#L193)方法抛出异常

为了完成这项工作，我必须在语法上配置适配器

```
var properties = new Common.Logging.Configuration.NameValueCollection();
properties["configType"] = "INLINE";
Common.Logging.LogManager.Adapter = new Log4NetLoggerFactoryAdapter(properties); 
```

我仍然需要弄清楚为什么 IIS/Express 两次调用 Create 方法，这导致在 if 条件内抛出异常，但至少现在压力已经关闭。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-10-01T10:42:35.727

我通过安装丢失的包来让它工作

```
Install-Package Common.Logging.Log4Net1211 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-06-06T13:08:00.427

虽然这是一个老问题，但几周前我遇到了这个问题，目前的答案似乎都没有解决这个问题。我的配置似乎是正确的，因为我有许多其他应用程序使用几乎相同的配置，没有问题。经过相当多的调试和运行堆栈跟踪后，我终于找到了问题所在。

[![IIS](../Images/be7f75e0d0ea5292ec00f8f8a0e5e6e1.png)](https://i.stack.imgur.com/VcqIs.png)

请注意，在 IIS 中，我将 API 应用程序托管在另一个应用程序下。在这种情况下，*CAMP*应用程序和它下的*API*应用程序都使用 Common.Logging。因此，两个`web.config`文件都被加载， Common.Logging 读取*CAMP*的配置，然后它看到*API*有配置并尝试读取它，看到 Common.Logging 部分并抛出，因为它已经从*CAMP*读取了它应用。

最后，解决方案是将*API*从IIS 中的*CAMP应用程序下移出。*有点晦涩的边缘案例，但也许有一天其他人可能会面临这个问题。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-19T16:26:58.157

您可以尝试使用 Common.Logging.dll 版本 2.1.1.0 来代替。

您可以自己下载并比较这两个版本的源代码，但据我所知，2.1.0.0 和 2.1.1.0 之间的唯一区别是与读取配置设置相关的更改，以解决 Framework 4.0 错误。该错误的描述（请参阅[http://support.microsoft.com/kb/2580188](http://support.microsoft.com/kb/2580188)）是指从我没有从网络运行的网络共享运行，但使用 2.1.0.0 的测试应用程序会生成与你得到了，而 2.1.1.0 没有。

如果您使用的另一个库需要 2.1.0.0 版本的 common.logging.dll，那么您应该能够使用程序集重定向来改用 2.1.1.0。

附言

不确定它是否相关，但我将 dll 的名称保留为 Common.Logging.Log4Net121.dll 并修改了 app.config

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-31T17:07:50.803

我发现这是由于 Common.Logging.Log4Net1211 NuGet 包检索了旧版本的 Common.Logging。检查对 Common.Logging 的 NuGet 更新，如果找到，请下载并重试。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-10-17T13:09:00.267

如果你的 log4net 是 2.0.6 或更高版本，使用 Common.Logging.Log4Net.Universal 包可能会很方便。

# objective-c - 限制动画球在屏幕上的位置

> ID：11368270
> 
> 赞同：2
> 
> 时间：2012-07-06T19:07:43.303
> 
> 标签：objective-c, cocoa-touch, animation, uiviewanimation

我正在尝试一些简单的动画，并遵循了一个基本弹跳球的教程。

如何使用我自己的一组坐标而不是整个屏幕来限制球反弹的位置？我在教程中使用的代码随机选择整个屏幕的坐标，我想设置它的坐标，这样它只会在屏幕中间的一个小方块中反弹，而不是出去那些界限。

.m

```
 int ballx, bally;
 ///////

 ballx = arc4random() % 320;   

 bally = arc4random() % 480; 

 //////////

-(void)movetheball { 
    [UIView beginAnimations: @"MovingTheBallAround" context: nil];   

    [UIView setAnimationDelegate: self];
    [UIView setAnimationDuration: 1.0];
    [UIView setAnimationCurve: UIViewAnimationCurveEaseInOut];
    myball.frame =  CGRectMake(ballx, bally,myball.frame.size.width,myball.frame.size.height);  
    [UIView commitAnimations];   

}
- (void)animationDidStop:(NSString *)animationID finished:(NSNumber *)finished context:(SEL)aSelector {  

    if (finished) {  

        // set new coordinate for ballx and bally  

        ballx = arc4random() % 320; 

        bally = arc4random() % 480;   

        [self movetheball];  

    } 
```

我看过SO，但除了以下内容外，我找不到类似的东西：

```
ballx.center = CGPointMake(320/2, [self randNumBetween:-50:-100]); 
```

我试图适应但没有取得多大成功。我没有大量的编程经验，所以我不确定我是否对那段代码有误解

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T19:19:42.213

```
ballx = arc4random() % 320; 

bally = arc4random() % 480; 
```

正如您所注意到的，这些是您设置球的新坐标的线，这两个变量只是数字。它们没有称为 的组件`center`，也没有称为`CGPoint`s，因此，尽管您在建议的修改方面走在正确的轨道上，但您自己却让事情变得过于复杂。

你可能不明白的部分是`%`标志；这是[“模数”](http://en.wikipedia.org/wiki/Modular_arithmetic)运算符。简单来说，就是将左侧的数字限制为小于右侧的数字。

请注意`320`和`480`恰好是整个屏幕的宽度和高度，并观察您正在将模运算的结果（使用该宽度和高度）分配给代表您的球位置的变量。

希望这已经足够暗示了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T19:12:54.420

基本上，您需要修改以下部分并提出逻辑，以便为任何必要的视图窗口设置边界。

```
ballx = arc4random() % 320;   
bally = arc4random() % 480; 
```

或者您可以通过 [Self.view addsubview:constrainedView] 创建特定大小的 UIView 并将其放入您的 UIViewController 中，然后您可以在该视图中添加球。但是你将不得不再次更改 arc4random() % x; 其中 x 是 UIView 的宽度或高度。

# actionscript - 如何在 ActionScript 3 的函数调用中加载和返回 .png 文件？

> ID：11368276
> 
> 赞同：0
> 
> 时间：2012-07-06T19:08:06.583
> 
> 标签：actionscript, asynchronous, png, setinterval, synchronous

ActionScript 似乎不支持同步加载 png。我尝试过异步加载它，但是问题是让你的函数等待加载完成。我无法做到这一点。我曾尝试在 while 循环中同时调用 setInterval 和 setTimout，并在加载完成时中断，但我得到了一些非常神秘的行为。对于函数参数，我传递了一个名为 doNothing 的函数，它只是一个空函数。当我跑步时，setInterval 或 setTimeout 很快就会一遍又一遍。他们不会在再次致电之前等待提供的时间。此外， doNothing 永远不会被调用。

这是我的代码：

```
private function getData(extension:String):Bitmap
{
    var loader:Loader = new Loader();
    loader.contentLoaderInfo.addEventListener(Event.COMPLETE, onComplete);
    loader.contentLoaderInfo.addEventListener(IOErrorEvent.IO_ERROR, onComplete);
    loader.contentLoaderInfo.addEventListener(ErrorEvent.ERROR, onComplete);
    loader.load(new URLRequest(baseDir + extension));

    while (bitmap == null)
    {
        var test:Number = setInterval(doNothing, 1000);
    }

    var ret:Bitmap = bitmap;
    bitmap = null;

    return ret;
}

function onComplete(event:Event):void
{
    bitmap = Bitmap(LoaderInfo(event.target).content);
}

function doNothing():void
{
    trace("did nothing");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T15:23:10.273

while 循环在这里不好，因为它会导致您的客户端冻结（并且冻结 15 秒会引发错误）

建议实施：

```
private var loader:Loader;
private var onSuccess:Function;

// onSuccess = function (bitmap:Bitmap) : void
// onFail = function (e:ErrorEvent) : void
private function getData(extension:String, onSuccess:Function, onFail:Function):void
{
    this.onSucess = onSuccess;
    loader = new Loader();
    loader.contentLoaderInfo.addEventListener(Event.COMPLETE, onComplete);
    loader.contentLoaderInfo.addEventListener(IOErrorEvent.IO_ERROR, onFail);
    loader.contentLoaderInfo.addEventListener(ErrorEvent.ERROR, onFail);
    loader.load(new URLRequest(baseDir + extension));
}

private function onComplete(event:Event):void
{
    bitmap = Bitmap(LoaderInfo(event.target).content);
    onSuccess.call(null, bitmap);
    dispose();
}

private function dispose():void
{
    loader.contentLoaderInfo.removeEventListener(Event.COMPLETE, onComplete);
    loader.contentLoaderInfo.removeEventListener(IOErrorEvent.IO_ERROR, onFail);
    loader.contentLoaderInfo.removeEventListener(ErrorEvent.ERROR, onFail);
    this.loader = null;
    this.onSuccess = null;
} 
```

# php - 如何将 PHP 数组传递给 jQuery 函数？

> ID：11368278
> 
> 赞同：2
> 
> 时间：2012-07-06T19:08:28.743
> 
> 标签：php, javascript, jquery

我有一个 jQuery 函数，可以打开一个模式弹出窗口，并且在同一个文件中有一个 PHP 变量，例如`$url="iteminfo.php?ID=".$i['itmid'];`（`$i['itmid']`是 MySQL 中某些产品的 id）。jQuery 函数如下所示：

```
<script type="text/javascript">

  $(document).ready(function(Surl) {

    var source="iteminfo.php?ID=<?echo $i['itmid']?>";
    var width = 920;
    var align = "center";
    var top = 100;
    var padding = 10;
    var backgroundColor = "#FFFFFF";
    var borderColor = "#000000";
    var borderWeight = 4;
    var borderRadius = 5;
    var fadeOutTime = 300;
    var disableColor = "#666666";
    var disableOpacity = 40;
    var loadingImage = "js/popup/loading.gif";

    $(".modal").click(function() {

        modalPopup( align,
            top,
            width,
            padding,
            disableColor,
            disableOpacity,
            backgroundColor,
            borderColor,
            borderWeight,
            borderRadius,
            fadeOutTime,
            source,
            loadingImage );

    }); 

    $(document).keyup(function(e) {
        if (e.keyCode == 27) {
            closePopup(fadeOutTime);
        }
    });

  });

</script> 
```

它会打开相应的链接，但该函数会像循环一样打开所有链接。如何`$url`将 jQuery 函数传递给相应产品以打开相应链接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T19:13:47.993

对于初学者来说，它看起来更像这样，但是如果没有看到您的 HTML 代码，很难说您将如何使用 ID 提取每个不同对象的 ID。

```
 <script type="text/javascript">

    $(document).ready(function(Surl) {

      var source="iteminfo.php?ID=";
      var width = 920;
      var align = "center";
      var top = 100;
      var padding = 10;
      var backgroundColor = "#FFFFFF";
      var borderColor = "#000000";
      var borderWeight = 4;
      var borderRadius = 5;
      var fadeOutTime = 300;
      var disableColor = "#666666";
      var disableOpacity = 40;
      var loadingImage = "js/popup/loading.gif";

      $(".modal").click(function() {

        //get the id of what you're opening on each click event.
        var myid = ...

          modalPopup( align,
              top,
              width,
              padding,
              disableColor,
              disableOpacity,
              backgroundColor,
              borderColor,
              borderWeight,
              borderRadius,
              fadeOutTime,
              source + myid,
              loadingImage );

      }); 

      $(document).keyup(function(e) {
          if (e.keyCode == 27) {
              closePopup(fadeOutTime);
          }
      });

    });

  </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T19:20:26.663

你是不是说当你点击元素 .modal 时，右边的 modal 会出现好内容？

'功能打开所有这些'中的'它们'是什么意思？

也许你应该看看你的“modalPopup”函数。

您可以将每个 .modal 元素的相应 url 存储为具有 php 循环的属性，该循环浏览您的数组。

# android - 使用 Google Cloud Messaging 在 Android 上进行即时通讯

> ID：11368280
> 
> 赞同：17
> 
> 时间：2012-07-06T19:08:35.080
> 
> 标签：android, instant-messaging, google-cloud-messaging

我只是在查看新的 Google Cloud Messaging (GCM)，我想知道是否可以在您的 Android 应用程序上使用 GCM 进行即时消息传递？

我看到您可以从服务器发送数据（例如消息），但也可以从一台设备发送到另一台设备吗？这将如何运作？一些示例代码将非常有帮助..

天呐！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-07-25T15:24:04.753

Google Cloud Messaging for Android的[官方文档](http://developer.android.com/google/gcm/index.html)确实提到 GCM 可用于开发即时消息应用程序。

> ...或者它可能是包含多达 4kb 有效负载数据的消息（因此即时消息等应用程序可以直接使用该消息）。

所以我们继续使用 GCM 创建了一个即时消息应用程序。服务器端由 Google App Engine 提供支持。你可以在这里阅读完整的教程。[使用 Google Cloud Messaging (GCM) 创建即时消息应用](http://www.appsrox.com/android/tutorials/instachat/)

因此，可以在 Android 上使用 GCM for Instant Messaging 来回答您的问题。然而，与用于 IM 的 XMPP 相比，GCM 的可靠性是另一个话题。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-07T19:55:01.210

只是我的两分钱：

我认为你不应该使用 GCM 来传递 IM。您应该有一个专用服务器，您的 Android IM 应用程序将使用持久套接字连接连接到该服务器。您的服务器将知道谁在线或不在线，因此可以向所有应用程序显示“在线列表”。

GCM 可以在用户离线或未运行您的应用时发挥作用。可以向他们发送 GCM 消息以指示“XXXX 想要聊天”。然后他们可以启动您的应用程序并自动连接到聊天会话。

谷歌曾表示不能保证 GCM 消息的传递。仅凭这个原因依赖它们进行即时消息传递并不是一个好主意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T01:32:52.197

试试 pub nub - 这很容易实现 - 将 Im 从一部手机发送到另一部手机 - 只需在浏览器中启动网页（见链接），然后在 pc、手机和作品之间聊天 - 使用“无服务器”。代码适用于 javascript，但它们也有 java。[使用 jquerymobile web 应用框架的聊天应用](https://stackoverflow.com/questions/7316186/chat-app-using-jquerymobile-web-app-framework/9112679#9112679)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-11T07:12:57.073

您可能想查看服务器如何将消息发送到 GCM 服务。可以在服务器端使用 php，因此应该可以直接从您的应用程序中适应 POST 请求。但是，要进行通信，您需要注册要向其发送数据的设备的 ID。意味着您将需要一些东西来存储和获取它们。最好的解决方案是您自己的（网络）服务器，它存储所有 ID 并处理消息发送。

# html - 离线应用缓存不起作用

> ID：11368281
> 
> 赞同：2
> 
> 时间：2012-07-06T19:08:36.480
> 
> 标签：html, caching, web-applications, offline

为什么我的离线应用程序没有被任何浏览器缓存？

我在这里创建了一个简化的测试：http: [//design.aqueo.us/test/appcache/](http://design.aqueo.us/test/appcache/)

它只有两个文件：一个 html 文件加上清单。（html 文件包含一些用于显示缓存状态的 javascript。）检查控制台日志，您会看到它总是显示“缓存状态：未缓存”。chrome://appcache-internals/（在 Google Chrome 中）也没有列出该站点。据我所知，浏览器甚至从不获取清单文件。我已经在多个浏览器中尝试过了。

这是清单：

```
CACHE MANIFEST
# . 
```

这是HTML：

```
<!doctype html>
<html>
<head manifest="offline.appcache">
    <meta charset="utf-8">
    <title>Appcache test</title>
<script>
(function() {
    var webappCache = window.applicationCache;

    function loaded()
    {
        var h1El = document.querySelector("h1");
        var connectionStatus = ((navigator.onLine) ? 'online' : 'offline');
        h1El.textContent = h1El.textContent + " - currently: " + connectionStatus;

        switch(webappCache.status)
        {
            case 0:
                console.log("Cache status: Uncached");
                break;
            case 1:
                console.log("Cache status: Idle");
                break;
            case 2:
                console.log("Cache status: Checking");
                break;
            case 3:
                console.log("Cache status: Downloading");
                break;
            case 4:
                console.log("Cache status: Updateready");
                break;
            case 5:
                console.log("Cache status: Obsolete");
                break;
        }

    }

    function updateCache()
    {
        webappCache.swapCache();
        console.log("Cache has been updated due to a change found in the manifest");
    }

    function errorCache()
    {
        console.log("You're either offline or something has gone horribly wrong.");
    }

    window.addEventListener("load", loaded, false);
    webappCache.addEventListener("updateready", updateCache, false);
    webappCache.addEventListener("error", errorCache, false);

})();
</script>
</head>
<body>
    <h1>Appcache Test</h1>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-09T01:12:24.113

逆天！在所有的调试和拔毛之后，我在 HEAD 元素而不是 HTML 元素上有了 manifest 属性！在所有愚蠢的错误中！

有问题的链接现在可以按预期工作。

**更新：**为了让事情变得明显，下面是 HTML 文件顶部的样子：

```
<!doctype html>
<html manifest="offline.appcache">
<head> 
```

# rest - 如何跨多个父资源引用子资源？

> ID：11368282
> 
> 赞同：0
> 
> 时间：2012-07-06T19:08:36.687
> 
> 标签：rest

我在我的 REST 服务器中设置了一个很好的资源层次结构，但是我有一个用例让我感到困惑。

我们有一个相当典型的项目/组设置，并且引用项目中的所有组很容易。但有时，我希望所有组具有给定状态（跨所有项目）。这在标准子资源层次结构中显然是不可能的。

我看到的唯一干净的解决方案是将组同时作为资源和子资源（因为它们可以使用唯一键寻址）。我之前考虑过“别名”资源的概念（以两种不同的方式处理同一资源），但我不确定表达这一点的最佳方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T17:06:49.307

如果您希望您的应用程序与规模无关，最好将您的基本资源视为唯一标识的实体（请参阅[Helland](http://www.ics.uci.edu/~cs223/papers/cidr07p15.pdf)），但允许公开它们上的索引。最常见的索引形式是包含其项目的集合，使用 HTTP URI 的分层特性：

```
GET /groups/
    200 OK
    {"entities": [
        "/groups/1/",
        ...
        "/groups/212/",
        ],
     } 
```

我们可以称之为“主索引”。但是还有很多其他的可能性：

```
GET /projects/foo/groups/
    200 OK
    {"entities": [
        "/groups/7/",
        "/groups/182/",
        ],
     }

GET /groups/by_status/ACTIVE/
    200 OK
    {"entities": [
        "/groups/13/",
        "/groups/64/",
        ],
     } 
```

但是，请小心使用这些备用索引，因为它们往往与现实不同步，尤其是当您将多个服务器和缓存混在一起时（阅读 Helland 的论文）。这就是为什么上面的示例输出包含链接，而不是原子实体本身的副本。出于同样的原因，您不希望有两个标识同一个原子实体的 URI。当多个客户端获取相同数据的多个副本时，这将导致数据过时和更新丢失。

如果一个实体可以通过两个不同的标识符（例如数字 id 和唯一名称）真正识别，则选择一个作为规范并将另一个重定向到它：

```
GET /groups/by_name/bar/
    303 See Other
    Location: /groups/44/ 
```

# javascript - Javascript 正则表达式空格很古怪

> ID：11368284
> 
> 赞同：0
> 
> 时间：2012-07-06T19:08:46.967
> 
> 标签：javascript, regex

我正在尝试编写一个正则表达式来搜索页面以查找任何脚本标签并提取脚本内容，并且为了适应任何 HTML 编写风格，我希望我的正则表达式包含带有任意数量空白字符的脚本标签（例如`<script type = blahblah>`并且`<script type=blahblah>`应该都可以找到）。我的第一次尝试得到了奇怪的结果，所以我将问题分解为更简单的问题，并决定只测试和使用像 /\s*h\s*/g 这样的正则表达式。

当在字符串上测试它时，由于某种原因，'h' 周围的完全任意数量的空格将是匹配的，而其他任意数量的空格则不会匹配，例如“h”会匹配但“h”不会匹配。有谁知道为什么会发生这种情况或我正在犯的错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T19:12:11.910

既然您使用的是 JavaScript，为什么不能只使用`getElementsByTagName('script')`? 这就是你应该这样做的方式。

如果您有一个 HTML 字符串，请创建一个 iframe 并将 HTML 转储到其中，然后`getElementsByTagName('script')`在其上运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T19:53:41.547

好的，要扩展 Kolink 的答案，您不需要 iframe 或事件处理程序：

```
var temp = document.createElement('div');
temp.innerHTML = otherHtml;
var scripts = temp.getElementsByTagName('script'); 
```

...现在脚本是脚本元素的 DOM 集合 - 并且脚本不会被执行...

* * *

*为什么*正则表达式对此不是一个好主意：

由于一个`<script>`元素可能在任何地方都不包含字符串`</script>`，因此编写一个正则表达式来匹配它们并不难：`/<script[.\n]+?<\/script>/gi`

看起来您只想匹配具有特定类型属性的脚本。您也可以尝试将其包含在您的模式中：`/<script[^>]+type\s*=\s*(["']?)blahblah\1[.\n]*?<\/script>/gi`-但这太可怕了。（这就是在不规则字符串上使用正则表达式时会发生的情况，您需要简化）

因此，您可以遍历所有基本匹配的脚本，提取起始标签：`result.match(/<script[^>]*>/i)[0]`然后在其中搜索您的 type 属性`/type\s*=\s*((["'])blahblah\2|\bblahblah\b)/.test(startTag)`。哦，看 - 又变回可怕了 - 简化！

这次通过规范化： `startTag = startTag.replace(/\s*=\s*/g, '=').replace(/=([^\s"'>]+)/g, '="$1"')`- 现在您处于危险境地，如果`=`在带引号的字符串中怎么办？你能看到它是如何变得越来越复杂的吗？

如果您对将使用它的 HTML 做出可靠的假设（即使其成为常规），您只能使用正则表达式来完成这项工作。否则你的问题会越来越大，越来越大！

*   免责声明：我没有测试任何用于查看它们是否按照我所说的那样做的正则表达式，它们只是示例尝试。

# java - 如何在 Java 中解析格式为“\/Date(1339638938087-0500)\/”的日期字符串？

> ID：11368285
> 
> 赞同：0
> 
> 时间：2012-07-06T19:08:55.303
> 
> 标签：java, json, datetime

我有`"\/Date(1339638938087-0500)\/"`来自 Web 服务 api 格式的字符串。

使用java，我怎样才能把它放到一个`org.joda.time.DateTime`变量中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T19:16:23.573

您需要提取这两个信息：

*   -2208967200000：自 unix 纪元以来的毫秒数（UTC 时间 1970 年 1 月 1 日）
*   -0600：从 UTC 偏移

这假设该示例代表 1900 年 1 月 1 日当地时间午夜 - 因为 -2208967200000 部分代表 UTC 上午 6 点。

要将其转换为 Joda Time `DateTime`，您应该提取两个部分（去掉括号外的所有内容，然后使用长度拆分它，或者找到中间的 +/- 符号）。

接下来，将第一部分解析`long`为毫秒部分的 a。然后，解析第二部分——可能是小时、分钟并分别签名。（我假设它*总是*采用 xHHmm 的形式，其中 x 是符号，HH 是两位数的分钟数，mm 是两位数的小时数。）

[`DateTimeZone.forHoursMinutesOffset`](http://joda-time.sourceforge.net/api-release/org/joda/time/DateTimeZone.html#forOffsetHoursMinutes%28int,%20int%29)使用或类似的方法为偏移量创建一个固定的时区。

最后，创造时间

```
new DateTime(millis, zone); 
```

哦，然后踢任何制作如此可怕格式的人......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T19:14:00.330

这看起来像 unix 时间戳

> unix 时间戳是一种将时间跟踪为运行总秒数的方法。这个计数从 1970 年 1 月 1 日的 Unix 纪元开始

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T19:22:05.770

如果“2208967200000”是自 1970 年 1 月 1 日 00:00:00 以来的毫秒数，您可以在 Date(time) 的构造函数中使用它；

```
String dateStr="Date(-2208967200000-0600)";
String timeInMillis=dateStr.Split("-")[1];
String utcStr=dateStr.Split("-")[2].Substring(0,4);
Date d=new Date(Long.parseLong(timeInMillis)); 
```

如果需要，您可以处理 utcStr（如果“-”之后的第二部分是时区）

# python - 使用我传递给函数的字符串获取 NameError，说当我尝试在函数中使用该字符串时未定义该字符串

> ID：11368288
> 
> 赞同：0
> 
> 时间：2012-07-06T19:09:00.110
> 
> 标签：python, function, nameerror

我有这个`rev_comp()`功能

```
>>> def rev_comp(sequence):
...     def reverse(s):
...             letters = list(s)
...             letters.reverse()
...             return ''.join(letters)
...     def complement(s):
...             basecomplement = {'A': 'T', 'C': 'G', 'T': 'A', 'G': 'C', 'a': 't', 'c': 'g', 't': 'a', 'g': 'c'}
...             letters = list(s)
...             letters = [basecomplement[base] for base in letters]
...             return ''.join(letters)
...     reverse(sequence)
...     complement(sequence)
...     return sequence
... 
```

exon 是我想要反转和赞美的字符串。

本质上它应该将外显子反转为' `gtacgtgtacgt`'，然后替换以下每个实例：

```
g -> c, t -> a, c -> g, and a ->t 
```

`rev_comp(exon)`应该返回 '<code>catgcacatgca'</p>

```
>>> exon = "tgcatgtgcatg"
>>> rev_comp(exon)
'tgcatgtgcatg' 
```

我用 pdb 运行它，它吐出了所有这些：

```
>>> pdb.run(rev_comp(exon))
> <string>(1)<module>()->None
(Pdb) n
NameError: "name 'tgcatgtgcatg' is not defined"
> <string>(1)<module>()->None
(Pdb) n
--Return--
> <string>(1)<module>()->None
(Pdb) >>> def rev_comp(sequence):
*** SyntaxError: invalid syntax (<stdin>, line 1)
(Pdb) ...     def reverse(s):
*** SyntaxError: invalid syntax (<stdin>, line 1)
(Pdb) ...             letters = list(s)
*** SyntaxError: invalid syntax (<stdin>, line 1)
(Pdb) ...             letters.reverse()
*** SyntaxError: invalid syntax (<stdin>, line 1)
(Pdb) ...             return ''.join(letters)
*** SyntaxError: invalid syntax (<stdin>, line 1)
(Pdb) ...     def complement(s):
*** SyntaxError: invalid syntax (<stdin>, line 1)
(Pdb) ...             basecomplement = {'A': 'T', 'C': 'G', 'T': 'A', 'G': 'C', 'a': 't', 'c': 'g', 't': 'a', 'g': 'c'}
*** SyntaxError: invalid syntax (<stdin>, line 1)
(Pdb) ...             letters = list(s)
*** SyntaxError: invalid syntax (<stdin>, line 1)
(Pdb) ...             letters = [basecomplement[base] for base in letters]
*** SyntaxError: invalid syntax (<stdin>, line 1)
(Pdb) ...             return ''.join(letters)
*** SyntaxError: invalid syntax (<stdin>, line 1)
(Pdb) ...     reverse(sequence)
*** SyntaxError: invalid syntax (<stdin>, line 1)
(Pdb) ...     complement(sequence)
*** SyntaxError: invalid syntax (<stdin>, line 1)
(Pdb) ...     return sequence
*** SyntaxError: invalid syntax (<stdin>, line 1)
(Pdb) ...
*** SyntaxError: invalid syntax (<stdin>, line 1)
(Pdb) >>> exon = "tgcatgtgcatg"
*** SyntaxError: invalid syntax (<stdin>, line 1)
(Pdb) >>> rev_comp(exon)
*** SyntaxError: invalid syntax (<stdin>, line 1)
(Pdb) 'tgcatgtgcatg'
'tgcatgtgcatg'
(Pdb) n
Traceback (most recent call last):
 File "<stdin>", line 1, in <module>
 File "/usr/lib/python2.7/pdb.py", line 1238, in run
    Pdb().run(statement, globals, locals)
 File "/usr/lib/python2.7/bdb.py", line 387, in run
    exec cmd in globals, locals
 File "<string>", line 1, in <module>
NameError: name 'tgcatgtgcatg' is not defined 
```

这对我来说意义不大。

谁能帮我弄清楚为什么它认为我传入的序列没有定义？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T19:11:04.093

您忽略了`reverse`and的返回值`complement`。试试这个：

```
sequence = reverse(sequence)
sequence = complement(sequence)
return sequence 
```

# ruby-on-rails - 升级到 Rails 2.3.11 并收到 Uninitialized Constant::AWS 错误

> ID：11368290
> 
> 赞同：0
> 
> 时间：2012-07-06T19:09:26.060
> 
> 标签：ruby-on-rails, amazon-web-services

我正在尝试使用我们的应用程序生成屏幕截图。但是，相反，我生成以下内容：

**Step_results 中的名称错误#show**

显示第 26 行引发的 app/views/step_results/show.html.haml：

```
uninitialized constant StepResult::AWS 
```

提取的源代码（大约第 26 行）：

```
23:       %p{ :title => @step_result.message }= h @step_result.message
24:       = link_to 'close window', '#', :onclick => 'window.close();'
25:       = link_to 'Screenshot', html_screen_shot_src(@step_result), :class => 'screenshot', :target => "frame", :id => "screenshot", :onclick => '$("a#screenshot").hide(); $("a#screenscrape").show()' unless html_screen_shot_src(@step_result).nil?
26:       = link_to 'Screen Scrape', html_screen_scrape_src(@step_result), :class => 'screenscrape', :target => "frame", :id => "screenscrape", :onclick => '$("a#screenscrape").hide(); $("a#screenshot").show()'
27:       
28:     #frame
29:       %iframe{ :src => html_screen_scrape_src(@step_result), :name => 'frame' }

/Users/jasonbodak/.rvm/gems/ree-1.8.7-2011.03@janova-local_app/gems/activesupport-2.3.11/lib/active_support/dependencies.rb:131:in `const_missing'
/Users/jasonbodak/janova/janova/app/models/step_result.rb:73:in `html_scrape_url'
/Users/jasonbodak/janova/janova/app/helpers/step_results_helper.rb:3:in `html_screen_scrape_src'
/Users/jasonbodak/janova/janova/app/views/step_results/show.html.haml:26:in `_run_haml_app47views47step_results47show46html46haml'
/Users/jasonbodak/.rvm/gems/ree-1.8.7-2011.03@janova-local_app/gems/actionpack-2.3.11/lib/action_view/renderable.rb:34:in `send'
/Users/jasonbodak/.rvm/gems/ree-1.8.7-2011.03@janova-local_app/gems/actionpack-2.3.11/lib/action_view/renderable.rb:34:in `render'
/Users/jasonbodak/.rvm/gems/ree-1.8.7-2011.03@janova-local_app/gems/actionpack-2.3.11/lib/action_view/base.rb:306:in `with_template'
/Users/jasonbodak/.rvm/gems/ree-1.8.7-2011.03@janova-local_app/gems/actionpack-2.3.11/lib/action_view/renderable.rb:30:in `render'
/Users/jasonbodak/.rvm/gems/ree-1.8.7-2011.03@janova-local_app/gems/actionpack-2.3.11/lib/action_view/template.rb:205:in `render_template'
/Users/jasonbodak/.rvm/gems/ree-1.8.7-2011.03@janova-local_app/gems/actionpack-2.3.11/lib/action_view/base.rb:265:in `render_without_haml'
/Users/jasonbodak/.rvm/gems/ree-1.8.7-2011.03@janova-local_app/gems/haml-3.0.22/lib/haml/helpers/action_view_mods.rb:13:in `render'
/Users/jasonbodak/.rvm/gems/ree-1.8.7-2011.03@janova-local_app/gems/actionpack-2.3.11/lib/action_controller/base.rb:1252:in `render_for_file'
/Users/jasonbodak/.rvm/gems/ree-1.8.7-2011.03@janova-local_app/gems/actionpack-2.3.11/lib/action_controller/base.rb:978:in `render_without_benchmark'
/Users/jasonbodak/.rvm/gems/ree-1.8.7-2011.03@janova-local_app/gems/actionpack-2.3.11/lib/action_controller/benchmarking.rb:51:in `render'
/Users/jasonbodak/.rvm/gems/ree-1.8.7-2011.03@janova-local_app/gems/activesupport-2.3.11/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/jasonbodak/.rvm/gems/ree-1.8.7-2011.03@janova-local_app/gems/activesupport-2.3.11/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/jasonbodak/.rvm/gems/ree-1.8.7-2011.03@janova-local_app/gems/actionpack-2.3.11/lib/action_controller/benchmarking.rb:51:in `render'
/Users/jasonbodak/janova/janova/app/controllers/step_results_controller.rb:4:in `show'
/Users/jasonbodak/.rvm/gems/ree-1.8.7-2011.03@janova-local_app/gems/actionpack-2.3.11/lib/action_controller/base.rb:1333:in `send'
/Users/jasonbodak/.rvm/gems/ree-1.8.7-2011.03@janova-local_app/gems/actionpack-2.3.11/lib/action_controller/base.rb:1333:in `perform_action_without_filters'
/Users/jasonbodak/.rvm/gems/ree-1.8.7-2011.03@janova-local_app/gems/actionpack-2.3.11/lib/action_controller/filters.rb:617:in `call_filters'
/Users/jasonbodak/.rvm/gems/ree-1.8.7-2011.03@janova-local_app/gems/actionpack-2.3.11/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/Users/jasonbodak/.rvm/gems/ree-1.8.7-2011.03@janova-local_app/gems/actionpack-2.3.11/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/jasonbodak/.rvm/gems/ree-1.8.7-2011.03@janova-local_app/gems/activesupport-2.3.11/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/jasonbodak/.rvm/gems/ree-1.8.7-2011.03@janova-local_app/gems/activesupport-2.3.11/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/jasonbodak/.rvm/gems/ree-1.8.7-2011.03@janova-local_app/gems/actionpack-2.3.11/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/jasonbodak/.rvm/gems/ree-1.8.7-2011.03@janova-local_app/gems/actionpack-2.3.11/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/Users/jasonbodak/.rvm/gems/ree-1.8.7-2011.03@janova-local_app/gems/actionpack-2.3.11/lib/action_controller/flash.rb:151:in `perform_action'
/Users/jasonbodak/.rvm/gems/ree-1.8.7-2011.03@janova-local_app/gems/actionpack-2.3.11/lib/action_controller/base.rb:532:in `send'
/Users/jasonbodak/.rvm/gems/ree-1.8.7-2011.03@janova-local_app/gems/actionpack-2.3.11/lib/action_controller/base.rb:532:in `process_without_filters'
/Users/jasonbodak/.rvm/gems/ree-1.8.7-2011.03@janova-local_app/gems/actionpack-2.3.11/lib/action_controller/filters.rb:606:in `process'
/Users/jasonbodak/.rvm/gems/ree-1.8.7-2011.03@janova-local_app/gems/actionpack-2.3.11/lib/action_controller/base.rb:391:in `process'
/Users/jasonbodak/.rvm/gems/ree-1.8.7-2011.03@janova-local_app/gems/actionpack-2.3.11/lib/action_controller/base.rb:386:in `call'
/Users/jasonbodak/.rvm/gems/ree-1.8.7-2011.03@janova-local_app/gems/actionpack-2.3.11/lib/action_controller/routing/route_set.rb:438:in `call' 
```

任何想法为什么我现在突然收到 Amazon Worker Service 错误？谢谢。

编辑：这是 html_scrape_url 方法的代码：

```
 def html_scrape_url
    tries = 0
    begin
      return nil if html_filename.blank?
      AWS::S3::S3Object.url_for(html_filename, s3_bucket)
    rescue AWS::S3::NoConnectionEstablished => e
      if tries < 1
        logger.debug "S3 connection not established. Establishing..."
        AWS::S3::Base.establish_connection!(
          :access_key_id => APP_CONFIG[:amazon_access_key_id],
          :secret_access_key => APP_CONFIG[:amazon_secret_access_key]
        )
        tries += 1
        retry
      end
    end
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T18:50:05.087

好的，这很奇怪，但是添加

```
require 'aws/s3' 
```

到我的模型顶部（称为 step_result.rb，如上所示）解决了这个问题。我必须承认我不明白这样做是如何解决它的……我只是一时兴起尝试了它，但我很高兴我做到了。

# java - 不同的哈希码，但 HashMap 不起作用

> ID：11368291
> 
> 赞同：0
> 
> 时间：2012-07-06T19:09:26.950
> 
> 标签：java, collections, hashmap, hashcode

我有一个类`myDemoClass`来存储名称和一个类放在一个`HashMap`. 在尝试覆盖`hashCode()`方法时，即使哈希码不同，`HashMap`也会返回。`null`为什么？我已经重写了该`hashCode()`方法，因此即使具有相同的名称值，不同的对象也将具有不同的哈希码。

```
public class myDemoClass {

    String name;
    int value;
    static int i=1;

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public int hashCode()
    {
        //return name.hashCode();//now the hashcode are same
        return i++;//now the hashcode is different
    }

    public boolean equals(Object obj)
    {
        myDemoClass m=(myDemoClass)obj;
        if(obj==this)
            return true;

        if(obj instanceof myDemoClass)
        {
            return getName().equals(m.getName());
        }

        return false;
    }

} 
```

```
public class Hashcodes {

    myDemoClass m1=new myDemoClass();
    myDemoClass m2=new myDemoClass();

    HashMap h=new HashMap();

    public boolean test()
    {
        m1.setName("s");
        m2.setName("s");
        System.out.println(m1.hashCode());
        System.out.println(m2.hashCode());

        h.put(m1, "a1");
        h.put(m1, "b1");

        System.out.println(h.get(m1));
        System.out.println(h.get(m2));
        System.out.println(h.get(m1));

        return true;
    }

    public static void main(String args[])
    {
        Hashcodes h=new Hashcodes();
        h.test();
    }

} 
```

具有不同哈希码的输出：

```
1
2
null
null
null 
```

具有相同哈希码的输出：

```
115
115
b1
b1
b1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T19:30:55.637

请注意，您使 hashCode() 函数返回一个静态字段，**每次**调用 hashCode() 时该字段都会递增。这导致每次调用的哈希码都不同，即使是同一个对象！

例如，假设您有以下代码：

```
MyDemoClass m1 = new MyDemoClass();
m1.hashCode();
m1.hashCode(); 
```

对 hashCode() 的第一次调用返回 1，然后静态字段递增为 2。对 hashCode() 的下一次调用返回 2，这与之前的不同。由于对象不会跟踪其个人哈希码并且每次都引用相同的静态字段，因此您的对象永远不会返回相同的哈希码，并且您的 HashMap 将始终返回空值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T11:07:51.780

我同意上面的答案，使用静态字段来计算对象的 hashCode 是不好的做法。请考虑仅使用非静态字段，在您的情况下 - 执行有什么问题：
public int hashCode() { return name.hashCode() * 31 + (new Integer(value)).hashCode(); }

# ajax - JSF 2——在 f:ajax 上具有可选监听器属性的复合组件

> ID：11368292
> 
> 赞同：5
> 
> 时间：2012-07-06T19:09:33.313
> 
> 标签：ajax, jsf, jsf-2, listener, composite-component

我有一个看起来像这样的复合组件：

```
<!DOCTYPE html>
<html 
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:dm="http://davemaple.com/dm-taglib"
    xmlns:rich="http://richfaces.org/rich"
    xmlns:cc="http://java.sun.com/jsf/composite"
    xmlns:fn="http://java.sun.com/jsp/jstl/functions"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:a4j="http://richfaces.org/a4j">

<cc:interface>
    <cc:attribute name="styleClass" />
    <cc:attribute name="textBoxStyleClass" />
    <cc:attribute name="inputTextId" />
    <cc:attribute name="labelText" />
    <cc:attribute name="tabindex" />
    <cc:attribute name="required" default="false" />
    <cc:attribute name="requiredMessage" />
    <cc:attribute name="validatorId" />
    <cc:attribute name="converterId" />
    <cc:attribute name="title"/>
    <cc:attribute name="style"/>
    <cc:attribute name="unicodeSupport" default="false"/>
    <cc:attribute name="tooltip" default="false"/>
    <cc:attribute name="tooltipText" default=""/>    
    <cc:attribute name="tooltipText" default=""/>
    <cc:attribute name="onfail" default=""/>
    <cc:attribute name="onpass" default=""/>
</cc:interface>

<cc:implementation>

        <ui:param name="converterId" value="#{! empty cc.attrs.converterId ? cc.attrs.converterId : 'universalConverter'}" />
        <ui:param name="validatorId" value="#{! empty cc.attrs.validatorId ? cc.attrs.validatorId : 'universalValidator'}" />
        <ui:param name="component" value="#{formFieldBean.getComponent(cc.attrs.inputTextId)}" />
        <ui:param name="componentValid" value="#{((facesContext.maximumSeverity == null and empty component.valid) or component.valid) ? true : false}" />
        <ui:param name="requiredMessage" value="#{! empty cc.attrs.requiredMessage ? cc.attrs.requiredMessage : msg['validation.generic.requiredMessage']}" />
        <ui:param name="clientIdEscaped" value="#{fn:replace(cc.clientId, ':', '\\\\\\\\:')}" />

        <h:panelGroup layout="block" id="#{cc.attrs.inputTextId}ValidPanel" style="display:none;">
            <input type="hidden" id="#{cc.attrs.inputTextId}Valid" value="#{componentValid}" />
        </h:panelGroup>

        <dm:outputLabel for="#{cc.clientId}:#{cc.attrs.inputTextId}" id="#{cc.attrs.inputTextId}Label">#{cc.attrs.labelText}</dm:outputLabel>
        <dm:inputText 
            styleClass="#{cc.attrs.textBoxStyleClass}"
               tabindex="#{cc.attrs.tabindex}"
               id="#{cc.attrs.inputTextId}"
               required="#{cc.attrs.required}"
               requiredMessage="#{requiredMessage}"
               title="#{cc.attrs.title}"
               unicodeSupport="#{cc.attrs.unicodeSupport}">
            <f:validator validatorId="#{validatorId}" />
            <f:converter converterId="#{converterId}" />
            <cc:insertChildren />
            <f:ajax 
                event="blur" 
                execute="@this" 
                render="#{cc.attrs.inputTextId}ValidPanel #{cc.attrs.inputTextId}Msg" 
                onevent="on#{cc.attrs.inputTextId}Event" />
        </dm:inputText>
        <rich:message for="#{cc.clientId}:#{cc.attrs.inputTextId}" id="#{cc.attrs.inputTextId}Msg" style="display: none;" />
        <script>
            function on#{cc.attrs.inputTextId}Event(e) {
                if(e.status == 'success') {
                    $('##{clientIdEscaped}\\:#{cc.attrs.inputTextId}').trigger($('##{cc.attrs.inputTextId}Valid').val()=='true'?'pass':'fail');
                }
            }
            $('##{clientIdEscaped}\\:#{cc.attrs.inputTextId}').bind('fail', function() {
                $('##{clientIdEscaped}\\:#{cc.attrs.inputTextId}, ##{clientIdEscaped}\\:#{cc.attrs.inputTextId}Label, ##{cc.attrs.inputTextId}Msg, ##{cc.id}Msg').addClass('error');
                $('##{cc.id}Msg').html($('##{clientIdEscaped}\\:#{cc.attrs.inputTextId}Msg').html());
                #{cc.attrs.onfail}
            }).bind('pass', function() {
                $('##{clientIdEscaped}\\:#{cc.attrs.inputTextId}, ##{clientIdEscaped}\\:#{cc.attrs.inputTextId}Label, ##{cc.attrs.inputTextId}Msg, ##{cc.id}Msg').removeClass('error');
                $('##{cc.id}Msg').html($('##{clientIdEscaped}\\:#{cc.attrs.inputTextId}Msg').html());
                #{cc.attrs.onpass}
            });
        </script>
        <a4j:region rendered="#{facesContext.maximumSeverity != null and !componentValid}">
            <script>
                $(document).ready(function() { 
                    $('##{clientIdEscaped}\\:#{cc.attrs.inputTextId}').trigger('fail');
                });
            </script>
        </a4j:region>
</cc:implementation>

</html> 
```

我希望能够添加一个可选的“listener”属性，如果定义了该属性，它将向我的 f:ajax 添加一个事件侦听器，但我无法弄清楚如何实现这一点。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-06T19:23:17.810

您需要指定标签的`method-signature`属性，[`<cc:attribute>`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/composite/attribute.html)以便将属性值视为方法表达式。您可以使用 JSTL 视图构建时间标记`<c:if>`来有条件地添加`<f:ajax>`标记。

```
<cc:interface>
    <cc:attribute name="listener" method-signature="void listener()" />
</cc:interface>
<cc:implementation>
    <h:someComponent>
        <c:if test="#{cc.getValueExpression('listener') != null}">
            <f:ajax listener="#{cc.attrs.listener}" />
        </c:if>
    </h:someComponent>
</cc:implementation> 
```

*（这`#{not empty cc.attrs.listener}`不起作用，因为 EL 会隐式地将属性评估为值表达式）*

然后你可以按如下方式使用它：

```
<my:someComposite listener="#{bean.listener}" /> 
```

* * *

或者当您的环境不支持 EL 2.2 时，请创建一个支持组件：

```
@FacesComponent("someComponent")
public class SomeComponent extends UINamingContainer {

    public boolean isHasListener() {
        return getValueExpression("listener") != null;
    }

} 
```

这将被声明并用作

```
<cc:interface type="someComponent">
    <cc:attribute name="listener" method-signature="void listener()" />
</cc:interface>
<cc:implementation>
    <h:someComponent>
        <c:if test="#{cc.hasListener}">
            <f:ajax listener="#{cc.attrs.listener}" />
        </c:if>
    </h:someComponent>
</cc:implementation> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-03-18T08:04:42.587

我也有同样的问题，我的解决方案是为 action 方法创建默认值。我只需要创建一个类：`MyComponent.java`包含所有默认方法签名。

```
<cc:interface>
    <cc:attribute name="listener" method-signature="void listener()"
                  default="#{myComponent.doNothing()}" />
</cc:interface>
<cc:implementation>
    <h:someComponent>
        <f:ajax listener="#{cc.attrs.listener}" />
    </h:someComponent>
</cc:implementation> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-05T20:46:19.183

不幸的是，以上所有方法都对我不起作用，所以我摆弄了一下，想出了以下解决方案。

```
<cc:interface type="someComponent">
    <cc:attribute name="listener" method-signature="void listener()" />
</cc:interface>
<cc:implementation>
    <h:someComponent>
        <p:ajax listener="#{cc.attrs.listener}" onstart="#{cc.attrs.containsKey('listener') ? '' : 'return false'}" />
    </h:someComponent>
</cc:implementation> 
```

这将始终绑定 ajax 行为，但只有在实际存在侦听器时才执行它。

# java - 在 Java 中使用基于 Vector 的 Stack 实现而不是链表的动机是什么？

> ID：11368299
> 
> 赞同：2
> 
> 时间：2012-07-06T19:10:16.230
> 
> 标签：java, algorithm, data-structures, linked-list

`Vector`在 Java 中使用基于 a 的实现`Stack`而不是链表实现的动机是什么？我意识到 a`Vector`是同步的并且具有继承优势（和开销），但我觉得这些数据结构不仅通常在文本中作为基于链表的结构教授，而且 LL 避免了随着底层数组的填充而代价高昂的调整大小。

我确实明白`Vectors`，使用摊销分析，即使调整大小也是 O(1) 。因此，也许考虑到这一点并没有太大的区别，但是我仍然很想了解其中的原理。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T19:14:18.490

链表有以下缺点：

*   每个元素的存储开销
*   必须遵循从元素到元素的指针/引用的计算复杂性
*   缓存位置错误

当然，这些只是链表的一般缺点；我不知道他们是否影响了基于什么的`Queue`决定`Stack`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-06T19:13:44.287

向量将其数据存储在连续内存中。这有利于缓存。

链表在内存中会变得非常碎片化。

# python - 分发 .pyc 文件有什么限制？

> ID：11368304
> 
> 赞同：16
> 
> 时间：2012-07-06T19:10:56.933
> 
> 标签：python, pyc

我已经开始使用 Python 开发一个商业应用程序，并且正在权衡如何分发该应用程序的选择。

除了显而易见的（分发具有适当商业许可证的源）之外，我正在考虑仅分发`.pyc`没有相应`.py`来源的文件。但是我对 Python 的兼容性保证还不够熟悉，不知道这是否可行，更不用说它是否是一个好主意。

文件是否`.pyc`独立于底层操作系统？例如，`.pyc`在 64 位 Linux 机器上生成的文件可以在 32 位 Windows 机器上运行吗？

我发现该`.pyc`文件[应该在错误修复版本之间兼容](http://www.python.org/dev/peps/pep-0006/)，但是主要和次要版本呢？例如，使用 Python 3.1.5 生成的文件是否与 Python 3.2.x 兼容？或者`.pyc`使用 Python 2.7.3 生成的文件是否与 Python 3.x 版本兼容？

**编辑：**

首先，我可能不得不安抚那些不愿分发资源的利益相关者。分发`.pyc`没有源代码的 's 可能会给他们一定程度的安慰，因为它需要额外的反编译步骤才能获取源代码，即使该步骤有些微不足道。足以让诚实的人保持诚实的障碍。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-06T19:16:08.417

> 例如，使用 Python 3.1.5 生成的文件是否与 Python 3.2.x 兼容？

不。

> 或者使用 Python 2.7.3 生成的 .pyc 文件是否与 Python 3.x 版本兼容？

双重没有。

> 我正在考虑仅分发 .pyc 文件而没有相应的 .py 源。

Python 字节码是高级且可简单反编译的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-06T19:25:09.783

您当然只能分发 .pyc 文件。正如 Cat 所提到的，不，它不会与 Python 的不同主要版本兼容。它可能会阻止某些人查看源代码，但 .pyc 文件很容易反编译。基本上，如果你能编译它，你就可以反编译它。

您可以使用像 py2exe / py2app / freeze 这样的二进制打包程序。我从未尝试过它们，但如果他们愿意，仍然有人可以反编译它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T22:35:15.353

正如 Cat 所说，pyc 文件不是跨版本安全的。尽管您试图向用户隐藏的内容决定了您需要做什么。

至于源代码，在分布式应用程序中隐藏 Python 源代码并没有什么好的方法。如果你只是想隐藏特定的细节，你可以将它们打包到一个 C 扩展中——这将更难反编译。

因此，如果您担心代码的使用，请将许可证附加到代码中以供不使用，或者将您不想被盗的部分翻译成编译语言。如果您只是希望代码不是明显的 Python，您可以创建一个包装 Python 代码的二进制可执行文件（尽管如果有人从文件中提取它们，则不会隐藏实际细节）。

# html - appcache 用作文本/纯文本仅适用于 chrome？

> ID：11368310
> 
> 赞同：0
> 
> 时间：2012-07-06T19:11:28.180
> 
> 标签：html, google-chrome, html5-appcache

我正在开发一个清单文件损坏的应用程序。它以多种方式损坏。

它被破坏的一种方式是它被用作 type `text/plain`。

因此，Safari 和 Firefox 会忽略它。Safari、Firefox 或 Chrome 都没有显示在 firebug/inspector 中下载的清单文件。Safari 确实在其控制台中显示有关不正确的 mime 类型的错误。

只有 Chrome 接受清单文件并创建应用程序缓存。（当然，这会导致应用程序严重崩溃，因为清单的内容是错误的......）

我的印象是，任何以不正确的 mime 类型提供的清单都会被忽略。

**`text/plain`是否应该忽略作为 mime 类型的清单？这是 Chrome 中的已知错误吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T08:14:14.523

根据[规范](http://www.w3.org/TR/html5/offline.html#writing-cache-manifests)，清单必须与 mime-type 一起提供`text/cache-manifest`。

如果浏览器仅仅因为它被引用而解释没有该 mime 类型的清单，则`<html manifest="xxx">`它没有 100% 遵循规范。但在我看来：这不是错误，而是功能！:D

* * *

除此之外，为什么要引用一个没有正确 mime 类型的清单（而不是根本不引用一个）？

> 当然，这会导致应用程序严重崩溃，因为清单的内容是错误的......

读到我会假设您只想清理已经加载了配置错误的清单的用户的应用缓存？如果这是您的意图，请按照此处描述的方式尝试：[永久删除 HTML5 Appcache Manifest](https://stackoverflow.com/questions/8815280/removing-html5-appcache-manifest-permanently?rq=1)

# ios - 获取触摸位置的uiview

> ID：11368317
> 
> 赞同：0
> 
> 时间：2012-07-06T19:12:01.863
> 
> 标签：ios, xcode, uiview, uitouch

有没有办法快速获取（包含）UITouch 特定点的视图？我有相对于 self.view 的坐标，但想知道当时的任何/所有视图。我的视图层次结构类似于

*   自我观
    *   滚动视图
        *   看法
        *   看法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T19:23:16.330

您可以使用该`CGRectContainsPoint()` 方法。此方法将返回一个布尔值。您需要传递视图 frame( `CGRect`) 和相对于 touch( `CGPoint`) 的坐标。

[https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CGGeometry/Reference/reference.html#//apple_ref/c/func/CGRectContainsPoint](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CGGeometry/Reference/reference.html#//apple_ref/c/func/CGRectContainsPoint)

您也可以使用此方法进行检查，

```
CGPoint aPoint = //your touch point;
BOOL isPointInsideView = [yourView pointInside:aPoint withEvent:nil]; 
```

在这里，给定的点 ( `aPoint`) 与您给出的视图 ( ) 一起检查`yourView`并返回一个布尔值。

# html - 防止图像复制的最佳方法

> ID：11368328
> 
> 赞同：-3
> 
> 时间：2012-07-06T19:13:12.940
> 
> 标签：html

我们的网站上有一张图片我怎样才能防止其他用户无法下载这张图片？

有可能吗？如果不可能，请提供一些方法来使复制图片的方式更加困难

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T19:23:13.917

如果你真的想防止有人偷照片，有人指的是技术不好的人，这里有一些技术：

*   将图像放置为 CSS 背景
*   在图像上放置一个透明的 DIV。
*   禁用右键单击
*   给所有图片加水印
*   禁用直接图像访问
*   使用 .htaccess 仅允许您的网站访问您的图像
*   使用闪光灯或类似的东西嵌入图片

考虑一下：互联网上的内容对于每个“小偷”来说都是并且永远是“免费的”。

**编辑**这是一种用于在 PNG 中转换 torrent 的技术：[http](http://stegtorrent.sourceforge.net/) ://stegtorrent.sourceforge.net/如果你是 FBI，你可以做相反的事情！:) 将您的图像存储在不同类型的文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T19:17:58.880

用户可以以一种或另一种方式复制它。一种有趣的方法是使用图像作为 CSS 背景，这比右键单击和保存图像要难一些。

```
<div style="background-image:theimage.png ;"></div> 
```

但是对于坚定的用户，您无能为力。当你分享一张图片时，假设有人会复制它。否则不要分享。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T19:15:53.483

将此脚本添加到 body 标记。这将禁用调用保存的右键单击。看看这篇关于堆栈溢出的帖子 在[裁剪区域外禁用鼠标点击](https://stackoverflow.com/questions/8152517/disabling-mouse-clicks-on-image-while-using-jquery-jcrop)

# python - Windows 和 ZMQ 上的 CX_Freeze 导入错误

> ID：11368330
> 
> 赞同：2
> 
> 时间：2012-07-06T19:13:24.673
> 
> 标签：python, cx-freeze, pyzmq

我有一个使用 ZMQ 的 python 程序。我想冻结它，以便每个人都可以将它用作可执行文件。这是我的 setup.py

```
import sys

from cx_Freeze import setup, Executable
includes = ["sip", "re", "zmq", "PyQt4.QtCore", "atexit", "zmq.utils.strtypes", "zmq.utils.jsonapi", "encodings.hex_codec"]

base = None
if sys.platform == "win32":
    base = "Win32GUI"

setup (
    name = "prueba",
    version = "0.1",
    description = "Esto es una prueba",
    options = {"build_exe" : {"includes" : includes }},
    executables = [Executable("Cliente.py", base = base)]) 
```

当我在 Linux 上运行它时，它运行良好并且我的程序运行正常，但是当我在 Windows 上运行时，当我执行 .exe 文件时出现以下错误：

```
from zmq.core import (constants, error, message, context,
File "ExtensionLoader_zmq_core_error.py", line 12, in <module>
ImportError: DLL load failed: The specified module cannot be found 
```

此外，当 CX_Freeze 工作时，我可以注意到以下几行：缺少模块：？从 zmq.devices.basedevice 导入的 zmq.core.Context ？zmq.core.FORWARDER 从 zmq.devices.monitoredqueuedevice 导入？从 zmq.devices.monitoredquedevice 导入的 zmq.core.QUEUE ？从 zmq.devices.monitoredquedevice 导入的 zmq.core.ZMQError

我一直试图找出这个问题一两个小时，似乎它可能与它应该导入的 DLL 有关，但事实并非如此。ZMQ 需要工作的一些 DLL，但我找不到它是哪一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-14T18:16:18.790

通过添加修复：

`['zmq','zmq.utils.garbage','zmq.backend.cython']`

到包，然后重命名`zmq.libzmq.pyd`为`libzmq.pyd`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T20:13:05.643

您可能必须明确地将一个或多个模块添加到您的包含中。如果它是一个 DLL 问题，我通常使用 Dependency Walker 来解决它。你可以在这里免费获得它：http: [//www.dependencywalker.com/](http://www.dependencywalker.com/)

它偶尔会给我一个误报，但总的来说它几乎总是有帮助的。

# javascript - 正则表达式回调函数只执行一次

> ID：11368331
> 
> 赞同：2
> 
> 时间：2012-07-06T19:13:33.670
> 
> 标签：javascript, regex, callback

所以我正在为 {x} 搜索一个字符串，其中 x 是 1-9 之间的某个数字，我的正则表达式找到第一个出现并运行回调函数，但这仅在第一个找到的实例上调用。例如，{2}Some{3}String 将根据括号之间的整数返回替换值 x 次，因此该函数`&#09;&#09;Some{3}`在我希望它返回时返回`&#09;&#09;Some&#09;&#09;&#09;String`。

我不太了解正则表达式，但是否需要添加一些东西才能在所有匹配的事件上执行回调函数？

这是代码

```
var string = "{2}Some{3}String";

function replaceWithTabs(propertyName) {  
  var regExp = new RegExp('\{[1-9]\}');
  function addTabs(match) { 

    var string = '',
        i = 0,
        length = match.substring(1,2);

    for(i; i < length; i++) {
        string += "&#09;";
    }
    return string;  
}  return propertyName.replace(regExp, addTabs);  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T19:16:35.137

请改用此`RegExp`文字：

```
var regExp = /{[1-9]}/g; 
```

`{`or`}`不是特殊符号，`Regular Expression`因此您可以避免使用斜线。`g`RegExp 的标志意味着`global match`，如果没有，您只会替换第一个匹配项，而不是所有匹配项。首选使用`literal`代替`RegExp contstructor`，因为它更快。另外，如果您使用 RegExp 构造函数，您还需要转义`\`符号，因为斜杠是`string literal`. 考虑一下：

```
var regliteral = /\./;
//Similar with constructor
var regconstructor = new RegExp('\\.');  //slash is special symbol in string,so we add extra slash before it 
```

# c# - 使用嵌套的 LINQ 查询和对象集合

> ID：11368336
> 
> 赞同：1
> 
> 时间：2012-07-06T19:13:52.767
> 
> 标签：c#, asp.net, linq, collections, nested

我正在使用两个 LINQ 查询（嵌套）

这是我希望我的查询实现的目标：

在我的内心查询中

*   `UserLocation`使用两个条件检索对象集合

在我的外部查询中

*   从内部查询的集合中检索与每个对象的属性匹配的过滤`User`对象集合。`User.UID``UserLocation.UID``UserLocation`

我几乎就代码而言，我只是错过了最后一步——我不知道如何让外部查询枚举`UserLocation`集合并匹配`UID`.

在我的代码中，我有两个查询，第一个是使用内部查询和我需要的条件（以及匹配）获取对象`FullName`属性的工作示例。`User``UID`

第二个查询是我遇到的问题。我错过了什么？

```
 ownerLiteral.Text = 
            Users.First(u => u.UID.Equals(
                UserLocations.First(s => s.IsOwner == true && s.LID.Equals(building.LID)).UID)).FullName;

        var propertyteam = 
            Users.Where(c => c.UID.Equals(
                UserLocations.Where(x => x.IsPropertyTeam == true && x.LID.Equals(building.LID)))); 
```

## 编辑：修复了问题

我忘记了它`UserLocations`的成员`Users`——我缩短了我的查询并习惯于`.Any`选择`UserLocations`符合我条件的成员，然后只返回`User`.

在第一个查询中，我返回`FullName`对象`User`。

在第二个查询中，我现在返回`User`符合条件的对象集合。

对于那些感兴趣的人，我将第二个查询绑定到 DataList，然后在用户控件中评估他们的 FullName。

```
ownerLiteral.Text = 
            Users.First(
            u => u.UserLocations.Any(
                ul => ul.IsOwner == true && ul.LID.Equals(building.LID))).FullName;

var propertyteam = 
            Users.Where(
            u => u.UserLocations.Any(
                ul => ul.IsPropertyTeam && ul.LID.Equals(building.LID))); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T19:29:24.867

您的班级关系让我感到困惑，但我认为您的问题是您试图将`UserLocation`对象集合（`Where()`返回 an `IEnumerable`）视为单个`UserLocation`

我认为这可能会做到：

```
var propertyteam = LoggedInUser.ExtranetUser.Company.Users
  .Where(c => c.UID.IsPropertyTeam == true && c.UID.LID.Equals(building.LID)); 
```

**编辑，根据更多信息：**

所以也许这就是你要找的东西？

```
var uidsWhoArePartOfThePropertyTeamForThisBuilding
  = UserLocations.Where(x => x.IsPropertyTeam && x.LID == building.LID)
  .Select(x => x.UID); 
```

假设 UserLocation 的 UID 成员是一个完整的用户对象，而不仅仅是用户的一些 int ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T19:38:42.037

要编写 T-SQL 类型的 IN 子句，在 LINQ 中您将使用 Contains。这将是我开始的地方：

```
 var userlocations = LoggedInUser.ExtranetUser.UserLocations.Select(ul => ul.UID);
    var propertyteam = LoggedInUser.ExtranetUser.Company.Users.Where(userlocations.Contains(u => u.UID)); 
```

# html - 使用 d3 在两个节点之间绘制多条边

> ID：11368339
> 
> 赞同：26
> 
> 时间：2012-07-06T19:13:58.037
> 
> 标签：html, graph, svg, d3.js, edges

我一直在关注[此示例](http://bl.ocks.org/1153292)中的 Mike Bostock 的代码，以学习如何在 d3 中绘制有向图，并且想知道如何构建代码，以便可以在图中的两个节点之间添加多条边。例如，如果上例中的数据集被定义为

```
var links = [{source: "Microsoft", target: "Amazon", type: "licensing"},
             {source: "Microsoft", target: "Amazon", type: "suit"},
             {source: "Samsung", target: "Apple", type: "suit"},
             {source: "Microsoft", target: "Amazon", type: "resolved"}]; 
```

然后运行代码，我看到的只有一行。所有路径都在 html 代码中正确绘制，但是它们都具有相同的坐标和方向，这导致视觉看起来像 1 行。在这个例子中需要进行什么样的代码重组以允许 3 条边不被绘制在彼此之上？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-07-08T05:26:59.683

事实上，原始可视化是显示节点之间多条链接的一种方法的主要示例，即 - 使用弧线而不是直接路径，因此您可以看到传入和传出链接。

[通过更改表示链接的后续svg path(arc)](http://www.w3.org/TR/SVG/paths.html#PathDataEllipticalArcCommands)元素的半径值，可以扩展此概念以显示每种类型的链接中的多个。一个基本的例子是

```
dr = 75/d.linknum; 
```

其中`d.linknum`表示连续链接的编号。 `dr`稍后用作绘制弧的 rx 和 ry 量。

此处完整实施：http: [//jsfiddle.net/7HZcR/3/](http://jsfiddle.net/7HZcR/3/)

![在此处输入图像描述](../Images/b52d1c34a05b1d5fd51910671c2e8f1d.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-10-08T10:27:56.820

如果有人需要，这里是上述答案的来源：

```
var links = [{source: "Microsoft", target: "Amazon", type: "licensing"},
             {source: "Microsoft", target: "Amazon", type: "suit"},
             {source: "Samsung", target: "Apple", type: "suit"},
             {source: "Microsoft", target: "Amazon", type: "resolved"}];
//sort links by source, then target
links.sort(function(a,b) {
    if (a.source > b.source) {return 1;}
    else if (a.source < b.source) {return -1;}
    else {
        if (a.target > b.target) {return 1;}
        if (a.target < b.target) {return -1;}
        else {return 0;}
    }
});
//any links with duplicate source and target get an incremented 'linknum'
for (var i=0; i<links.length; i++) {
    if (i != 0 &&
        links[i].source == links[i-1].source &&
        links[i].target == links[i-1].target) {
            links[i].linknum = links[i-1].linknum + 1;
        }
    else {links[i].linknum = 1;};
};

var nodes = {};

// Compute the distinct nodes from the links.
links.forEach(function(link) {
  link.source = nodes[link.source] || (nodes[link.source] = {name: link.source});
  link.target = nodes[link.target] || (nodes[link.target] = {name: link.target});
});

var w = 600,
    h = 600;

var force = d3.layout.force()
    .nodes(d3.values(nodes))
    .links(links)
    .size([w, h])
    .linkDistance(60)
    .charge(-300)
    .on("tick", tick)
    .start();

var svg = d3.select("body").append("svg:svg")
    .attr("width", w)
    .attr("height", h);

// Per-type markers, as they don't inherit styles.
svg.append("svg:defs").selectAll("marker")
    .data(["suit", "licensing", "resolved"])
  .enter().append("svg:marker")
    .attr("id", String)
    .attr("viewBox", "0 -5 10 10")
    .attr("refX", 15)
    .attr("refY", -1.5)
    .attr("markerWidth", 6)
    .attr("markerHeight", 6)
    .attr("orient", "auto")
  .append("svg:path")
    .attr("d", "M0,-5L10,0L0,5");

var path = svg.append("svg:g").selectAll("path")
    .data(force.links())
  .enter().append("svg:path")
    .attr("class", function(d) { return "link " + d.type; })
    .attr("marker-end", function(d) { return "url(#" + d.type + ")"; });

var circle = svg.append("svg:g").selectAll("circle")
    .data(force.nodes())
  .enter().append("svg:circle")
    .attr("r", 6)
    .call(force.drag);

var text = svg.append("svg:g").selectAll("g")
    .data(force.nodes())
  .enter().append("svg:g");

// A copy of the text with a thick white stroke for legibility.
text.append("svg:text")
    .attr("x", 8)
    .attr("y", ".31em")
    .attr("class", "shadow")
    .text(function(d) { return d.name; });

text.append("svg:text")
    .attr("x", 8)
    .attr("y", ".31em")
    .text(function(d) { return d.name; });

// Use elliptical arc path segments to doubly-encode directionality.
function tick() {
  path.attr("d", function(d) {
    var dx = d.target.x - d.source.x,
        dy = d.target.y - d.source.y,
        dr = 75/d.linknum;  //linknum is defined above
    return "M" + d.source.x + "," + d.source.y + "A" + dr + "," + dr + " 0 0,1 " + d.target.x + "," + d.target.y;
  });

  circle.attr("transform", function(d) {
    return "translate(" + d.x + "," + d.y + ")";
  });

  text.attr("transform", function(d) {
    return "translate(" + d.x + "," + d.y + ")";
  });
}
```

```
path.link {
  fill: none;
  stroke: #666;
  stroke-width: 1.5px;
}

marker#licensing {
  fill: green;
}

path.link.licensing {
  stroke: green;
}

path.link.resolved {
  stroke-dasharray: 0,2 1;
}

circle {
  fill: #ccc;
  stroke: #333;
  stroke-width: 1.5px;
}

text {
  font: 10px sans-serif;
  pointer-events: none;
}

text.shadow {
  stroke: #fff;
  stroke-width: 3px;
  stroke-opacity: .8;
}
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.4.11/d3.min.js"></script>
<div id="chart"></div>
```

对于 D3v4，请参见此处：[https ://bl.ocks.org/mbostock/4600693](https://bl.ocks.org/mbostock/4600693)

# c# - 在上下文中具有不同值的枚举与 UnitOfWork

> ID：11368342
> 
> 赞同：1
> 
> 时间：2012-07-06T19:14:04.323
> 
> 标签：c#, asp.net-mvc-3, enums

我对 ASP.NET MVC 3 和枚举有一个“小”问题：

我的人物模型：

```
namespace AcTIV.Models
{
    public enum Sex { Male, Female };

    public class Person
    {
        public int PersonID { get; set; }
        public string Name { get; set; }
        public Sex Sexo { get; set; }
    }
} 
```

我的初始化器：

```
namespace AcTIV.DAL
{
    public class AcTIVInitializer : DropCreateDatabaseAlways<AcTIVContext>
    {
        protected override void Seed(AcTIVContext context)
        {    
            var persons = new List<Person>
            {
                new Person { Name = "Mary Lee", Sexo = Sex.Female }
            };
            persons.ForEach(s => context.Persons.Add(s));
            context.SaveChanges();
        }
    }
} 
```

到现在为止还挺好。我的手表显示正确的值。

```
persons[0].Name = "Mary Lee"  
persons[0].Sexo = Female 
```

现在，我的人控制器：

```
namespace AcTIV.Controllers
{
    public class PersonController : Controller
    {
        private UnitOfWork unitOfWork = new UnitOfWork();

        public ViewResult Index()
        {
            Person person = unitOfWork.PersonRepository.GetByID(1); //Just for test
            //return View(unitOfWork.PersonRepository.Get().ToList());
        }
    }
} 
```

我的手表在这里显示错误的枚举值：

```
person.Name = "Mary Lee"  
person.Sexo = Male 
```

我究竟做错了什么？

- - 解决了 - -

答案在另一个 stackoverflow 帖子 [中：如何使用 EF Code First 解释枚举类型](https://stackoverflow.com/q/9418958/890645)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T19:32:16.790

您使用的是 EF4.3 吗？我相信`enum`支持仅在 EF5 中可用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T19:32:08.787

我怀疑 PersonRepository 中带有 ID 的 Person 的 Sex 枚举值设置不正确。默认情况下，第一个枚举数的值为 0

但是在 Mary Lee 的 Person 记录中，它看起来像 Male = 0 而不是 Female = 1

# java - 用于将长数组写入文件的 Java 代码

> ID：11368343
> 
> 赞同：0
> 
> 时间：2012-07-06T19:14:05.790
> 
> 标签：java

我从[这里](https://stackoverflow.com/questions/11249718/write-compressed-array-to-increase-io-performance)得到了一个代码来将一个 Int 数组写入文件。但是，我正在尝试对其进行转换，因此它可以将 Long 数组写入文件。但是，它给出了错误（下面给出的代码）。任何人都可以帮助我为什么它会出错以及更正的代码应该是什么。谢谢。

```
import java.io.*;
import java.util.ArrayList;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.nio.ByteBuffer;
import java.nio.channels.FileChannel;
import java.util.Random;
import java.util.zip.DataFormatException;
import java.util.zip.Deflater;
import java.util.zip.Inflater;

public class Test {
    private static final int bucketSize = 1<<17;//in real world should not be const, but we bored horribly
    static final int zipLevel = 2;//feel free to experiement, higher compression (5+)is likely to be total waste

 static void writes(long[] a, File file, boolean sync) throws IOException{
        byte[] bucket = new byte[Math.min(bucketSize,  Math.max(1<<13, Integer.highestOneBit(a.length >>3)))];//128KB bucket
        byte[] zipOut = new byte[bucket.length];

        final FileOutputStream fout = new FileOutputStream(file);
        FileChannel channel = fout.getChannel();
        try{

            ByteBuffer buf = ByteBuffer.wrap(bucket);
            //unfortunately java.util.zip doesn't support Direct Buffer - that would be the perfect fit
            ByteBuffer out = ByteBuffer.wrap(zipOut);
            out.putLong(a.length);//write length aka header
            if (a.length==0){
                doWrite(channel, out, 0);
                return;
            }

            Deflater deflater = new Deflater(zipLevel, false);
            try{
                for (int i=0;i<a.length;){
                    i = puts(a, buf, i);
                    buf.flip();
                    deflater.setInput(bucket, buf.position(), buf.limit());

                    if (i==a.length)
                        deflater.finish();

                    //hacking and using bucket here is tempting since it's copied twice but well
                    for (int n; (n= deflater.deflate(zipOut, out.position(), out.remaining()))>0;){
                        doWrite(channel, out, n);
                    }
                    buf.clear();
                }

            }finally{
                deflater.end();
            }
        }finally{
            if (sync)
                fout.getFD().sync();
            channel.close();
        }
    }

    static long[] reads(File file) throws IOException, DataFormatException{
        FileChannel channel = new FileInputStream(file).getChannel();
        try{
            byte[] in = new byte[(int)Math.min(bucketSize, channel.size())];
            ByteBuffer buf = ByteBuffer.wrap(in);

            channel.read(buf);
            buf.flip();
            long[] a = new long[(int)buf.getLong()];
            if (a.length==0)
                return a;
            int i=0;
            byte[] inflated = new byte[Math.min(1<<17, a.length*4)];
            ByteBuffer intBuffer = ByteBuffer.wrap(inflated);
            Inflater inflater = new Inflater(false);
            try{
                do{
                    if (!buf.hasRemaining()){
                        buf.clear();
                        channel.read(buf);
                        buf.flip();
                    }
                    inflater.setInput(in, buf.position(), buf.remaining());
                    buf.position(buf.position()+buf.remaining());//simulate all read

                    for (;;){
                        int n = inflater.inflate(inflated,intBuffer.position(), intBuffer.remaining());
                        if (n==0)
                            break;
                        intBuffer.position(intBuffer.position()+n).flip();
                        for (;intBuffer.remaining()>3 && i<a.length;i++){//need at least 4 bytes to form an int
                            a[i] = intBuffer.getInt();
                        }
                        intBuffer.compact();
                    }

                }while (channel.position()<channel.size() && i<a.length);
            }finally{
                inflater.end();
            }
            //          System.out.printf("read ints: %d - channel.position:%d %n", i, channel.position());
            return a;
        }finally{
            channel.close();
        }
    }

    private static void doWrite(FileChannel channel, ByteBuffer out, int n) throws IOException {
        out.position(out.position()+n).flip();
        while (out.hasRemaining())
            channel.write(out);
        out.clear();
    }
    private static int puts(long[] a, ByteBuffer buf, int i) {
        for (;buf.hasRemaining() && i<a.length;){
            buf.putLong(a[i++]);
        }
        return i;
    }

    private static long[] generateRandom(int len){
        Random r = new Random(17);
        long[] n = new long [len];
        for (int i=0;i<len;i++){
            n[i]= r.nextBoolean()?0: r.nextInt(1<<23);//limit bounds to have any sensible compression
        }
        return n;
    }
    public static void main(String[] args) throws Throwable{
        File file = new File("xxx.xxx");
        long[] n = generateRandom(3000000); //{0,2,4,1,2,3};
        long start = System.nanoTime();
        writes(n, file, false);
        long elapsed = System.nanoTime() - start;//elapsed will be fairer if the sync is true

        System.out.printf("File length: %d, for %d ints, ratio %.2f in %.2fms %n", file.length(), n.length, ((double)file.length())/4/n.length, java.math.BigDecimal.valueOf(elapsed, 6) );

        long[] m = reads(file);

        //compare, Arrays.equals doesn't return position, so it sucks/kinda
        for (int i=0; i<n.length; i++){
            if (m[i]!=n[i]){
                System.err.printf("Failed at %d%n",i);
                break;
            }
        }
        System.out.printf("All done!");
    };

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T21:30:14.963

所以我花了几分钟来实际运行代码，并且对您发布的代码进行了一些调整，但就是这样。

为了清楚起见，我做的一件事是 - 不必要的 - 更改`intBuffer`为。`longBuffer`这是第一个区别的一部分

```
75  -  byte[] inflated = new byte[Math.min(1<<17, a.length*4)];
76  -  ByteBuffer intBuffer = ByteBuffer.wrap(inflated);
76  +  byte[] inflated = new byte[Math.min(1<<17, a.length*8)];
77  +  ByteBuffer longBuffer = ByteBuffer.wrap(inflated); 
```

在上面的代码片段中，我将膨胀缓冲区的长度更改为 a.length*8 以反映它是一个长数组而不是一个 int 数组。

```
89  -  int n = inflater.inflate(inflated,intBuffer.position(), intBuffer.remaining());
90  +  int n = inflater.inflate(inflated,longBuffer.position(), longBuffer.remaining()); 
```

这只是对变量名称的更改。

```
92  -  intBuffer.position(intBuffer.position()+n).flip();
93  -  for (;intBuffer.remaining()>3 && i<a.length;i++){//need at least 4 bytes to form an int
94  -      a[i] = intBuffer.getInt();
93  +  longBuffer.position(longBuffer.position()+n).flip();
94  +  for (;longBuffer.remaining()>7 && i<a.length;i++){//need at least 4 bytes to form an int
95  +      a[i] = longBuffer.getLong(); 
```

这是一个非常重要的变化。首先名称被更改，但这不是重要的部分。其次，`remaining()`正如 bestsss 指出的那样，是 7 而不是 3。最后，**a[i] 现在是 long 而不是 int。**. 这肯定是最大的问题。

```
96  -  intBuffer.compact();
97  +  longBuffer.compact(); 
```

这里只是重命名。

```
142 -  System.out.printf("File length: %d, for %d ints, ratio %.2f in %.2fms %n", file.length(), n.length, ((double)file.length())/4/n.length, java.math.BigDecimal.valueOf(elapsed, 6) );
143 +  System.out.printf("File length: %d, for %d ints, ratio %.2f in %.2fms %n", file.length(), n.length, ((double)file.length())/8/n.length, java.math.BigDecimal.valueOf(elapsed, 6) ); 
```

这只是在文件输出上了解压缩，它现在正在计算来自 file.length / 8 而不是超过 4 的结果数。

这些是我必须进行的唯一必要的编辑才能让它工作。基本上只是在所有地方从 int 移动到 long 。

完整的代码在 pastebin 中，以防你弄乱 diff 符号或其他东西： http: [//pastebin.com/emY14Ji4](http://pastebin.com/emY14Ji4)

注意：由于我没有删除调试语句，我的副本 (+) 中的行号比您的副本 (-) 高一...哎呀...

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-06T19:19:50.753

不要使用字节缓冲区，而是使用 ObjectOutputStream 将验证数据存储到文件中，并使用 ObjectInputStream 从中读取。我认为问题在于您在整个过程中没有持有“长期”定义。

ObjectOutputStream 和 ObjectInputStream 可以读/写任何数据类型。

# java - 编译android项目时Java堆空间错误

> ID：11368345
> 
> 赞同：1
> 
> 时间：2012-07-06T19:14:12.843
> 
> 标签：java, android, apache-tika

我正在尝试添加以下 jar 文件：tika-app-1.1

这是控制台输出：

```
[2012-07-06 22:05:03 - iCards] Dx warning: Ignoring InnerClasses attribute for an anonymous inner class
(org.apache.log4j.xml.DOMConfigurator$3) that doesn't come with an
associated EnclosingMethod attribute. This class was probably produced by a
compiler that did not target the modern .class file format. The recommended
solution is to recompile the class from source, using an up-to-date compiler
and without specifying any "-target" type options. The consequence of ignoring
this warning is that reflective operations on this class will incorrectly
indicate that it is *not* an inner class.
[2012-07-06 22:05:03 - iCards] Dx warning: Ignoring InnerClasses attribute for an anonymous inner class
(org.apache.log4j.xml.DOMConfigurator$4) that doesn't come with an
associated EnclosingMethod attribute. This class was probably produced by a
compiler that did not target the modern .class file format. The recommended
solution is to recompile the class from source, using an up-to-date compiler
and without specifying any "-target" type options. The consequence of ignoring
this warning is that reflective operations on this class will incorrectly
indicate that it is *not* an inner class.
[2012-07-06 22:05:03 - iCards] Dx warning: Ignoring InnerClasses attribute for an anonymous inner class
(org.apache.log4j.xml.DOMConfigurator$5) that doesn't come with an
associated EnclosingMethod attribute. This class was probably produced by a
compiler that did not target the modern .class file format. The recommended
solution is to recompile the class from source, using an up-to-date compiler
and without specifying any "-target" type options. The consequence of ignoring
this warning is that reflective operations on this class will incorrectly
indicate that it is *not* an inner class.
[2012-07-06 22:09:03 - Dex Loader] Unable to execute dex: Java heap space
[2012-07-06 22:09:03 - iCards] Conversion to Dalvik format failed: Unable to execute dex: Java heap space 
```

（这是其中很小的一部分，每次都在不同的班级重复......

我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T19:17:24.000

```
This class was probably produced by a
compiler that did not target the modern .class file format. The recommended
solution is to recompile the class from source, using an up-to-date compiler
and without specifying any "-target" type options 
```

看来您的编译器版本不兼容。这意味着 jar 是旧版本。尝试获取该 jar 的最新版本并查看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T19:25:51.287

Android dx 命令需要较大的堆栈空间。为“java”命令提供“-Xss256m”选项。如果您使用的是 Eclipse，请打开 eclipse.ini 并添加“-Xss256m”。

# vb.net - 可以在 VB.NET 中追溯实现接口吗？

> ID：11368353
> 
> 赞同：3
> 
> 时间：2012-07-06T19:14:38.007
> 
> 标签：vb.net, interface, metaprogramming

是否可以定义一个接口（例如 MyClass Implements MyInterface），其方法/属性定义已经与第三方（或本机）类上定义的某些方法/属性匹配？

例如，DataRow 类具有许多使其“类似于行”的属性/方法。如果我想实现一个接口（即 IRowLike），它定义了本机 DataRow 类（我不能直接触摸或扩展）上已经存在的某些方法和属性，该怎么办？我只是希望该类在运行时同意它确实遵守某些接口。

接口提供了穷人版的“鸭子打字”。一旦我有了一组都遵守给定接口的类，我就可以针对该接口定义扩展方法，并且所有支持该接口的类都会立即获得新的行为。我知道想要对第三方类追溯应用接口可能看起来很奇怪，但它肯定会让我们用更少的代码做更多的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T19:18:05.443

这在 .Net 中是不可能的。类型定义了它在编译时在元数据中实现的接口，并且它的定义在运行时不可更改。可以在运行时生成实现特定接口但不改变现有类型的类型

不过也有一些选择。在 VB.Net 中，您可以简单地选择对类型使用后期绑定并以这种方式（或`dynamic`在 C# 中）访问接口方法。当然，缺点是代码不是静态可验证的。

# python - 如何在 Python 中管理多个进程？

> ID：11368355
> 
> 赞同：1
> 
> 时间：2012-07-06T18:01:46.010
> 
> 标签：python

我有一个简单（我希望）的问题：我的问题始于我编写 GUI 时。在执行繁重的计算时，我无法刷新用户界面。

- 如果我使用线程有 GIL（不是太慢但 gui 冻结）

我尝试了很多东西，以至于我最后的希望是开始一个新的过程（问题就在这里）

首先：-我以前从未使用过进程（这可能是语义错误）

-我不知道流程的限制（和例外）

-i 在 Mac os xv 10.6.8 上使用 cpython 3.1.2 运行

这是我需要解决的一个示例（不是真正的代码，但结果是相同的）：

```
from multiprocessing import *
def bob(q):
    print(q)
A=Process(target=bob,args=("something"))
A.start()
A.is_alive()
A.join() 
```

输出是：

```
True 
```

它没有打印“某物”，所以我猜它没有运行该进程，但是“A.is_alive()”表示它正在运行，当解释器到达“A.join()”时，它或多或少地等待永远

有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T21:03:42.800

您需要添加逗号：`args=("something",)`。

逗号创建一个元组，否则它只是一个括号中的字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T20:20:44.707

你应该给出一个论点列表，而不仅仅是论点。这对我有用：

```
from multiprocessing import *
def bob(q):
    print(q)
A=Process(target=bob,args=["something"])
A.start()
A.is_alive()
A.join() 
```

以下使用 sleep-sort (http://stackoverflow.com/questions/6474318/what-is-the-time-complexity-of-the-sleep-sort) 对大写字符 AZ 进行排序

```
somestring="DGAECBF"
from multiprocessing import *
def bob(t):
    import time
    time.sleep(ord(t)-ord("A"))
    print(t)
p=[]
for c in somestring : 
    p.append(Process(target=bob,args=([c])))
    p[-1].start()
for pp in p:
    pp.join() 
```

# javascript - 如何跨浏览器一致地解析此日期字符串？

> ID：11368361
> 
> 赞同：5
> 
> 时间：2012-07-06T19:15:18.287
> 
> 标签：javascript, cross-browser

我正在使用 Javascript 的 Date 对象将字符串解析为毫秒时间戳。我正在使用 Date.parse()，我正在解析的字符串格式如下：“2012-07-06 12:59:36-0600”

Date.parse 在 Chrome 中表现很好，可以解析为我预期的正确时间戳。但是，当我通过 Date.parse() 运行字符串时，所有其他浏览器都会返回“NaN”。

我知道 Date 对象实现是特定于浏览器的，但我想找到一个能够为任何浏览器解析这种类型的字符串的 javascript 解决方案。关于我可以在Javascript中使用什么来实现这一点的任何建议？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-06T19:23:37.590

将输入转换为有效的[ISO 8601](http://en.wikipedia.org/wiki/ISO_8601)：

```
Date.parse("2012-07-06 12:59:36-0600".replace(' ', 'T')); 
```

这在 Firefox 中经过测试（并且有效）。

笔记：

> 请注意，虽然在日期字符串解析期间使用时区说明符来正确解释参数，但它们不会影响返回的值，它始终是 1970 年 1 月 1 日 00:00:00 UTC 和表示的时间点之间的毫秒数由论据。

*   [https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/parse](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/parse)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T19:20:06.667

如果格式一致，可以自己解析：

```
var date = "2012-07-06 12:59:36-0600";
function parseDatetime(input) {
    var match = input.match(/(\d{4})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})([-+]\d{4})/);
    match.shift(); // discard the "full match" index
    match[2]--;
    match[4] += parseInt(match[6],10);
    return new Date(match[0],match[1],match[2],match[3],match[4],match[5]);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T19:17:52.943

你试过[DateJS](http://www.datejs.com/)吗？也许您不想添加另一个库，但它会解决您的跨浏览器问题。

# wpf - 如何使 WPF DataGrid 显示具有绑定和 DataTemplate 的 ViewModel 集合

> ID：11368364
> 
> 赞同：5
> 
> 时间：2012-07-06T19:15:29.097
> 
> 标签：wpf, mvvm, datagrid, datatemplate, observablecollection

首先，道歉，因为我确信这是问题的答案非常简单。尽管如此，我似乎仍然找不到答案。

这是我使用 WPF 的第一周。我只是希望在 DataGrid 中显示某种列表的内容。我目前正在尝试使用 ObservableCollection<> 和 DataGrid，但这可能会改变。如何 DataTemplate 列表并显示它？

该列表位于 ViewModel 中，该 ViewModel 已在 Apps.xaml.cs 中设置为 MainWindow.xaml 的 DataSource：

```
protected override void OnStartup(StartupEventArgs e)
{
    base.OnStartup(e);

    var window = new MainWindow();

    // Create the ViewModel to which 
    // the main window binds.
    var viewModel = new MainWindowViewModel();

    // Allow all controls in the window to 
    // bind to the ViewModel by setting the 
    // DataContext, which propagates down 
    // the element tree.
    window.DataContext = viewModel;

    window.Show();
} 
```

这是当前列表：

```
 public ObservableCollection<PersonData> SearchResults { get; set; } 
```

不过，至于我的 xaml，我很迷茫——我尝试过摆弄绑定和 ItemsSource，但真的不知道如何在这里使用它们。另外，我认为有必要使用 DataTemplate，因为我需要以某种方式让它知道列需要显示 PersonData 的某些属性，例如名字和姓氏、位置和标题。任何帮助表示赞赏。

**编辑**

更一般地说——如何简单地显示一个 ViewModel 列表、集合、你有什么、句号？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-06T19:55:40.327

您的基本`DataGrid`语法应如下所示：

```
<DataGrid ItemsSource="{Binding SearchResults}"
          AutoGenerateColumns="False">
    <DataGrid.Columns>
        <DataGridTextColumn Header="First Name"  Binding="{Binding FirstName}"/>
        <DataGridTextColumn Header="Last Name" Binding="{Binding LastName}" />
    </DataGrid.Columns>
</DataGrid> 
```

如果您不想在 中显示数据`DataGrid`，可以使用[ItemsControl](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.aspx)。

默认情况下`ItemsControl`会将所有项目添加到 a`StackPanel`中，并使用`TextBlock`绑定到项目的来绘制每个`.ToString()`项目。您可以`ItemsControl`通过指定您自己的项目`ItemsPanelTemplate`和`ItemTemplate`供其使用来更改项目的显示方式。对于一些示例，请查看[我关于 WPF 的 ItemsControl 的博客文章](http://rachel53461.wordpress.com/2011/09/17/wpf-itemscontrol-example/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T14:04:30.637

啊。预习失败是致命的——我没有实现 INotifyPropertyChanged。了解如何在这里：http: [//msdn.microsoft.com/en-us/library/ms743695](http://msdn.microsoft.com/en-us/library/ms743695)

# wordpress - 在 WordPress 3.4 中使用 POST / GET 参数时出现 404

> ID：11368368
> 
> 赞同：2
> 
> 时间：2012-07-06T19:15:40.220
> 
> 标签：wordpress, url-parameters, http-post, get-request

我将永久链接设置为“帖子名称”。

如果我输入地址栏：[http://www.example.com/section1/whitepapers/](http://www.example.com/section1/whitepapers/)，WordPress 会正确加载它，但如果我向同一个 URL 发送 POST 或 GET 请求，它会在 WordPress 中引发 404 错误。

这是我的 htaccess 文件：[https ://gist.github.com/3062205](https://gist.github.com/3062205)

有人可以阐明这里可能发生的事情吗？

**注意：** 404 错误是由 WordPress 引发的，它不是服务器 404 消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T15:17:33.353

您使用 GET 和 POST 请求提交哪些参数。Wordpress 将删除其中带有“名称”的所有参数。在我的情况下，我将参数“firstname”重命名为“fn”并且它起作用了。请参阅[wordpress-404page-not-found-on-form-posted-data](http://www.lost-in-code.com/platforms/wordpress/wordpress-404page-not-found-on-form-posted-data/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T19:19:49.823

您的网址是否可以从 WWW 重定向到 nonWWW，反之亦然？

你能看到它返回的标头响应吗

# sql-server-2008 - 如何返回发票编号 - 所有关联的详细记录都有一个位字段设置为 1

> ID：11368369
> 
> 赞同：0
> 
> 时间：2012-07-06T19:15:48.787
> 
> 标签：sql-server-2008

SQL新手在这里。

我正在尝试获取发票编号列表。有两个表 - invoices 和 invoicedetail。invoicedetail 表有一个称为已扫描的字段（它是一个位字段）。如果它已被扫描，则位域为 1。

对于每张发票，invoicedetail 中都有关联记录，但我只想要发票编号列表，其中 invoicedetail 扫描字段中的每个关联记录都是 1。

如果可能，我宁愿在单个查询中执行此操作。

InvoiceDetail 中扫描的记录是所有记录 - 对于返回的任何发票编号。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T19:18:09.090

```
SELECT 
   InvoiceNumber 
FROM 
   Invoice 
INNER JOIN 
   InvoiceDetail 
ON 
   InvoiceDetail.ID = Invoice.ID 
WHERE 
   InvoiceDetail.ScannedColumn=1 
GROUP BY 
   Invoice.InvoiceNumber 
```

或者...

```
SELECT
   DISTINCT
   InvoiceNumber
FROM
   Invoice it
INNER JOIN
   InvoiceDetail idt 
ON idt.ID = it.ID
WHERE
  idt.ScannedColumn=1 
```

只需确保更改列名以满足您的需要。使用每个表中的 ID 进行连接，然后使用 a`WHERE`过滤记录以仅显示已扫描的记录。由于您使用的是位字段，因此您只需使用`WHERE ScannedColumn = 1`.

# c# - 如何知道 MS Windows 是否有红色或互联网连接？

> ID：11368370
> 
> 赞同：1
> 
> 时间：2012-07-06T19:15:53.093
> 
> 标签：c#, .net

> **可能重复：**
> [检查 Internet 连接是否可用 C#](https://stackoverflow.com/questions/1085045/check-whether-internet-connection-is-available-with-c-sharp)

我只想知道我们必须使用哪些方法来以编程方式（C#）检测 MS Windows 是否有活动的 Internet/red 连接或没有。

有可能吗？

谢谢！

例如：如果我放下WIFI，我怎么知道有连接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T19:18:57.327

看看[Ping类](http://msdn.microsoft.com/en-us/library/system.net.networkinformation.ping.aspx)

```
 Ping pingSender = new Ping ();
        PingOptions options = new PingOptions ();

        // Use the default Ttl value which is 128,
        // but change the fragmentation behavior.
        options.DontFragment = true;

        // Create a buffer of 32 bytes of data to be transmitted.
        string data = "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa";
        byte[] buffer = Encoding.ASCII.GetBytes (data);
        int timeout = 120;
        PingReply reply = pingSender.Send ("www.google.com", timeout, buffer, options);
        if (reply.Status == IPStatus.Success)
        {
            Console.WriteLine ("Address: {0}", reply.Address.ToString ());
            Console.WriteLine ("RoundTrip time: {0}", reply.RoundtripTime);
            Console.WriteLine ("Time to live: {0}", reply.Options.Ttl);
            Console.WriteLine ("Don't fragment: {0}", reply.Options.DontFragment);
            Console.WriteLine ("Buffer size: {0}", reply.Buffer.Length);
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T19:22:14.510

我使用以下方法检查连接：

```
public bool CheckForInternetConnection()
    {
        try
        {
            using (var client = new WebClient())
            using (var stream = client.OpenRead("http://www.google.com"))
            {
                Console.WriteLine("You Have connectity!");
                return true;
            }
        }
        catch
        {
            Console.WriteLine("No internet connection found.");
            return false;
        }
    } 
```

该方法尝试加载 Google 的 URL，如果加载则返回 true，否则返回 false。

# json - 从 Jackson 自定义反序列化器访问 HttpServletRequest 对象

> ID：11368374
> 
> 赞同：3
> 
> 时间：2012-07-06T19:16:07.380
> 
> 标签：json, spring, hibernate, servlets, jackson

我正在尝试使用 JSON 有效负载通过 ajax POST 发送对象；这个对象引用了存储在数据库中的其他对象，由 Hibernate 处理；我需要访问此数据库以解析其他对象引用并将它们存储在获得反序列化 JSON 有效负载的新对象中。

现在，我必须访问 HttpServletRequest 属性以获取保存的休眠会话以用于访问数据库。是否可以？

处理请求的控制器如下：

```
@RequestMapping(value = "/newproduct", method = RequestMethod.POST)
public @ResponseBody
Integer newProduct(HttpServletRequest request, @RequestBody Product product)
{
    //Controller code here
} 
```

我必须能够获取请求属性“hibernate_session”的反序列化器是一个自定义反序列化器，已注册到杰克逊，如下所示：

```
public class ProductDeserializer extends JsonDeserializer<Product>
{

    @Override
    public Product deserialize(JsonParser jpar, DeserializationContext arg1)
        throws IOException, JsonProcessingException
    {

            Product newProduct = new Product();
            // I want to get request attribute or open a new hibernate session here 
            return newProduct;
    }

} 
```

如有必要，我会在需要时发布更多代码。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T19:49:54.390

您可以尝试以下方法

```
HttpServletRequest request = ((ServletRequestAttributes) RequestContextHolder

                .getRequestAttributes()).getRequest(); 
```

# c# - 如何在网格中拖放按钮

> ID：11368377
> 
> 赞同：0
> 
> 时间：2012-07-06T19:16:12.447
> 
> 标签：c#, wpf, xaml, mvvm, drag-and-drop

如何使用拖放来移动网格中的元素。

即我有一个由 5x3 元素组成的网格，我希望能够从网格中拖动一个元素（通常是一个按钮）并让它在网格中的其他位置放置。

最好有一些突出显示或移动来查看按钮将插入的位置。

目前我只看到代码隐藏中的方法，但肯定有更好的方法，更 MVVM 的方法......

**为清楚起见：它是一个 Windows 桌面应用程序**

我的网格嵌入在一个列表框中，正如您从我的 XAML 中看到的那样：

```
<ListBox Margin="0" BorderThickness="0" Padding="0" Grid.Row="1" Background="Lime" SelectionMode="Single" ItemsSource="{Binding Path=CurrentToolTablet.Tools}" ScrollViewer.HorizontalScrollBarVisibility="Disabled" ScrollViewer.VerticalScrollBarVisibility="Disabled" VerticalContentAlignment="Stretch" HorizontalContentAlignment="Stretch">
    <ListBox.Template>
        <ControlTemplate TargetType="{x:Type ListBox}">
            <Border x:Name="Bd"
                    BorderBrush="{TemplateBinding BorderBrush}"
                    BorderThickness="{TemplateBinding BorderThickness}"
                    Background="{TemplateBinding Background}"
                    SnapsToDevicePixels="true">
                <ScrollViewer Focusable="false" Padding="{TemplateBinding Padding}">
                    <ItemsPresenter SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                </ScrollViewer>
            </Border>
            <ControlTemplate.Triggers>
                <Trigger Property="IsEnabled" Value="false">
                    <Setter Property="Background" TargetName="Bd" Value="{DynamicResource {x:Static SystemColors.ControlBrushKey}}"/>
                </Trigger>
                <Trigger Property="IsGrouping" Value="true">
                    <Setter Property="ScrollViewer.CanContentScroll" Value="false"/>
                </Trigger>
            </ControlTemplate.Triggers>
        </ControlTemplate>
    </ListBox.Template>
    <ListBox.ItemsPanel>
        <ItemsPanelTemplate>
            <Grid HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Margin="0">
                <Grid.RowDefinitions>
                    <RowDefinition Height="*" />
                    <RowDefinition Height="*" />
                    <RowDefinition Height="*" />
                    <RowDefinition Height="*" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
            </Grid>
        </ItemsPanelTemplate>
    </ListBox.ItemsPanel>
    <ListBox.ItemTemplate>
        <DataTemplate>
            <Button Focusable="False" Command="{Binding CmdClickTool}" Grid.Row="{Binding Path=Row}" Grid.Column="{Binding Path=Col}" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Margin="0">
                <Image Source="myimage.png" Grid.Row="{Binding Path=Row}" Grid.Column="{Binding Path=Col}" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Margin="0">
                </Image>
            </Button>
        </DataTemplate>
    </ListBox.ItemTemplate>
    <ListBox.ItemContainerStyle>
        <Style>
            <Setter Property="Grid.Column" Value="{Binding Path=Col}"/>
            <Setter Property="Grid.Row" Value="{Binding Path=Row}"/>
            <Setter Property="ContentControl.HorizontalContentAlignment" Value="Stretch"/>
            <Setter Property="ContentControl.VerticalContentAlignment" Value="Stretch"/>
            <Setter Property="ContentControl.Margin" Value="0"/>
            <Setter Property="ContentControl.Padding" Value="0"/>
            <Setter Property="Control.BorderThickness" Value="0"/>
        </Style>
    </ListBox.ItemContainerStyle>
</ListBox> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T23:43:51.530

好吧，我不明白你为什么发布 XAML 或者我如何使用它。但这是我的Forms实现，也许你可以使用它。没有动画，但它似乎适用于几种类型的控件。

```
public partial class ComponentMover : Form
{
    private Control trackedControl;
    private int gridWidth = 100, gridHeight = 20;

    public ComponentMover()
    {
        this.InitializeComponent();
        this.InitializeDynamic();
    }

    void draggable_MouseDown(object sender, System.Windows.Forms.MouseEventArgs e)
    {
        if (this.trackedControl == null)
            this.trackedControl = (Control)sender;
    }

    void draggable_MouseMove(object sender, System.Windows.Forms.MouseEventArgs e)
    {
        if (this.trackedControl != null)
        {
            int x = e.X + this.trackedControl.Location.X;
            int y = e.Y + this.trackedControl.Location.Y;
            Point moved = new Point(x - x % this.gridWidth, y - y % this.gridHeight);

            Console.WriteLine(e.X + ", " + e.Y + ", " + ", " + moved.X + ", " + moved.Y);
            if (moved != this.trackedControl.Location)
                this.trackedControl.Location = moved;
        }
    }

    void draggable_MouseUp(object sender, MouseEventArgs e)
    {
        this.trackedControl = null;
    }

    private void AddDragListeners(Control draggable)
    {
        draggable.MouseDown += new MouseEventHandler(draggable_MouseDown);
        draggable.MouseMove += new MouseEventHandler(draggable_MouseMove);
        draggable.MouseUp += new MouseEventHandler(draggable_MouseUp);
    }
}
// Designer code.
partial class ComponentMover
{
    /// <summary>
    /// Required designer variable.
    /// </summary>
    private System.ComponentModel.IContainer components = null;

    /// <summary>
    /// Clean up any resources being used.
    /// </summary>
    /// <param name="disposing">true if managed resources should be disposed; otherwise, false.</param>
    protected override void Dispose(bool disposing)
    {
        if (disposing && (components != null))
        {
            components.Dispose();
        }
        base.Dispose(disposing);
    }

    private void InitializeDynamic()
    {
        this.AddDragListeners(button1);
        this.AddDragListeners(button4);
        this.AddDragListeners(domainUpDown1);
        this.AddDragListeners(textBox1);
        this.AddDragListeners(checkBox1);
        this.AddDragListeners(radioButton1);

        //this.MouseMove += new System.Windows.Forms.MouseEventHandler(draggable_MouseMove);
    }

    #region Windows Form Designer generated code

    /// <summary>
    /// Required method for Designer support - do not modify
    /// the contents of this method with the code editor.
    /// </summary>
    private void InitializeComponent()
    {
        this.button1 = new System.Windows.Forms.Button();
        this.button4 = new System.Windows.Forms.Button();
        this.domainUpDown1 = new System.Windows.Forms.DomainUpDown();
        this.textBox1 = new System.Windows.Forms.TextBox();
        this.checkBox1 = new System.Windows.Forms.CheckBox();
        this.radioButton1 = new System.Windows.Forms.RadioButton();
        this.SuspendLayout();
        // 
        // button1
        // 
        this.button1.Location = new System.Drawing.Point(13, 13);
        this.button1.Name = "button1";
        this.button1.Size = new System.Drawing.Size(75, 23);
        this.button1.TabIndex = 0;
        this.button1.Text = "button1";
        this.button1.UseVisualStyleBackColor = true;
        // 
        // button4
        // 
        this.button4.Location = new System.Drawing.Point(177, 43);
        this.button4.Name = "button4";
        this.button4.Size = new System.Drawing.Size(75, 23);
        this.button4.TabIndex = 3;
        this.button4.Text = "button4";
        this.button4.UseVisualStyleBackColor = true;
        // 
        // domainUpDown1
        // 
        this.domainUpDown1.Location = new System.Drawing.Point(95, 42);
        this.domainUpDown1.Name = "domainUpDown1";
        this.domainUpDown1.Size = new System.Drawing.Size(74, 20);
        this.domainUpDown1.TabIndex = 4;
        this.domainUpDown1.Text = "domainUpDown1";
        // 
        // textBox1
        // 
        this.textBox1.Location = new System.Drawing.Point(177, 72);
        this.textBox1.Name = "textBox1";
        this.textBox1.Size = new System.Drawing.Size(100, 20);
        this.textBox1.TabIndex = 5;
        // 
        // checkBox1
        // 
        this.checkBox1.AutoSize = true;
        this.checkBox1.Location = new System.Drawing.Point(281, 13);
        this.checkBox1.Name = "checkBox1";
        this.checkBox1.Size = new System.Drawing.Size(80, 17);
        this.checkBox1.TabIndex = 6;
        this.checkBox1.Text = "checkBox1";
        this.checkBox1.UseVisualStyleBackColor = true;
        // 
        // radioButton1
        // 
        this.radioButton1.AutoSize = true;
        this.radioButton1.Location = new System.Drawing.Point(366, 42);
        this.radioButton1.Name = "radioButton1";
        this.radioButton1.Size = new System.Drawing.Size(85, 17);
        this.radioButton1.TabIndex = 7;
        this.radioButton1.TabStop = true;
        this.radioButton1.Text = "radioButton1";
        this.radioButton1.UseVisualStyleBackColor = true;
        // 
        // ComponentMover
        // 
        this.AutoScaleDimensions = new System.Drawing.SizeF(6F, 13F);
        this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
        this.ClientSize = new System.Drawing.Size(485, 159);
        this.Controls.Add(this.radioButton1);
        this.Controls.Add(this.checkBox1);
        this.Controls.Add(this.textBox1);
        this.Controls.Add(this.domainUpDown1);
        this.Controls.Add(this.button4);
        this.Controls.Add(this.button1);
        this.Name = "ComponentMover";
        this.Text = "ComponentMover";
        this.ResumeLayout(false);
        this.PerformLayout();

    }

    #endregion

    private System.Windows.Forms.Button button1;
    private System.Windows.Forms.Button button4;
    private System.Windows.Forms.DomainUpDown domainUpDown1;
    private System.Windows.Forms.TextBox textBox1;
    private System.Windows.Forms.CheckBox checkBox1;
    private System.Windows.Forms.RadioButton radioButton1;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-19T19:49:19.630

我最近制作了一个库，可以拖放按钮并更新它们的大小。我仍在进行一些更新，但您可以使用稳定版本。

[https://github.com/noahjames404/DragNDropPager](https://github.com/noahjames404/DragNDropPager)

# c# - 从 SQL 表向 DataTable 插入行

> ID：11368378
> 
> 赞同：0
> 
> 时间：2012-07-06T19:16:22.847
> 
> 标签：c#, .net, ado.net, datatable, dataadapter

我`Datatable`在我的 C# 程序中有一个我想`INSERT`从 SQL Server 中的临时表中获取行。该`dataAdapter.FILL()`方法覆盖整个数据表。我需要保留`DataTable`临时表中的记录并将临时表中存在的记录添加回我的`DataTable`.

我没有看到 DA 方法，它们似乎都回到了 SQL Server 表，除了 FILL。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T19:19:05.137

合并你的数据表怎么样

```
DataTable dttemp = new DataTable();

dataAdapter.Fill(dtTemp);

originaldatatable.Merge(dtTemp); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T19:19:24.393

```
// Now, open a database connection using the Microsoft.Jet.OLEDB provider.
// The "using" statement ensures that the connection is closed no matter what.
using (var connection = new OleDbConnection("Provider=Microsoft.Jet.OLEDB.4.0;Data      source=Northwind.mdb"))
{
    connection.Open();

// Create an OleDbDataAdapter and provide it with an INSERT command.
var adapter = new OleDbDataAdapter();
adapter.InsertCommand = new OleDbCommand("INSERT INTO Shippers (CompanyName, Phone) VALUES (@CompanyName , @Phone)", connection);
adapter.InsertCommand.Parameters.Add("CompanyName", OleDbType.VarChar, 40, "CompanyName");
adapter.InsertCommand.Parameters.Add("Phone", OleDbType.VarChar, 24, "Phone");

adapter.Update(data);
} 
```

# c++ - 在 C++ 中使用 wininet POST 上传二进制文件

> ID：11368381
> 
> 赞同：2
> 
> 时间：2012-07-06T19:16:26.807
> 
> 标签：c++, post, upload, binary, wininet

我已经通过 POST -example获得了这个[上传文件以使用 .txt 文件。](https://stackoverflow.com/questions/5309661/upload-file-via-post)但是，我仍然缺乏对二进制文件执行相同操作的方法。

有人可以展示如何做到这一点吗？我已经在互联网上浏览了大约 100 多页的人问这个*非常相同*的问题......其中许多问题都在这个网站上，但没有一个有任何好的答案。Codeproject 有一些方法，但它们似乎基于 MFC/ATL，我不能使用这些方法。

这个问题似乎异常困难。:D 所以请有人回答，非常请。你会帮我和很多其他人一个忙。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-03-11T13:40:53.087

下面的代码将上传文件：`1.jpg`使用`wininet`方法和一个简单的http POST请求到指定的主机

`(name=johndoe and document=1.jpg)`

```
#include<windows.h>
#include<wininet.h>
#include<iostream>

using namespace std;

DWORD rSize,filesize,bytesread,contentlen;

char tmp[2048]; //2Kb Response buffer
char szheaders[1024]; //1kb Header buffer
string chunks; //Server Response

HANDLE hfile;
HINTERNET hOpen2,hConnect2,hReq2;

char szstart[] = "Content-Type: multipart/form-data; boundary=-------------------------acebdf13572468\r\nUser-Agent: Mozilla";
char szData[]    = "---------------------------acebdf13572468\r\nContent-Disposition: form-data; name=\"firstname\"\r\n\r\njohndoe\r\n---------------------------acebdf13572468\r\nContent-Disposition: form-data; name=\"document\"; filename=\"1.jpg\"\r\nContent-Type: application/octet-stream\r\nContent-Transfer-Encoding: binary\r\n\r\n";
char szDataEnd[] = "\r\n---------------------------acebdf13572468--\r\n";

int main()
{

    hfile=CreateFile("1.jpg",GENERIC_READ,FILE_SHARE_READ,NULL,OPEN_EXISTING,0,NULL);

    if(hfile != INVALID_HANDLE_VALUE){

    wsprintf(szheaders,szData,"filetoupload","1.jpg");
    hOpen2=InternetOpen(TEXT("Mozilla/5.0"), INTERNET_OPEN_TYPE_DIRECT, NULL, NULL, 0);
    if(hOpen2){
        hConnect2=InternetConnect(hOpen2, TEXT("www.example.com"), INTERNET_DEFAULT_HTTPS_PORT, TEXT(""), TEXT(""), INTERNET_SERVICE_HTTP, 0, 0);
        if(hConnect2){

           hReq2=HttpOpenRequest(hConnect2, TEXT("POST"), TEXT("/your_path/index.php"), TEXT("HTTP/1.1"),NULL,NULL, INTERNET_FLAG_SECURE | INTERNET_FLAG_RELOAD | INTERNET_FLAG_IGNORE_CERT_CN_INVALID |INTERNET_FLAG_IGNORE_CERT_DATE_INVALID, 0);
           if(hReq2){

                filesize=GetFileSize(hfile,NULL);
                contentlen=lstrlen(szheaders)+filesize+lstrlen(szDataEnd);

                LPBYTE pbuf=(LPBYTE)malloc(contentlen);
                CopyMemory(&pbuf[0],szheaders,lstrlen(szheaders));

                ReadFile(hfile,&pbuf[lstrlen(szheaders)],filesize,&bytesread,NULL);
                CopyMemory(&pbuf[lstrlen(szheaders)+filesize],szDataEnd,lstrlen(szDataEnd));

                BOOL status =  HttpSendRequest(hReq2,szstart,lstrlen(szstart),pbuf,contentlen);
                if (status){
                    chunks="";
                    while(InternetReadFile(hReq2, tmp, 2048, &rSize) && rSize > 0)
                    {
                        tmp[rSize] = '\0';
                        chunks += tmp;
                    }
                    cout << chunks;
                    //Prints Server response
                }
                    CloseHandle(hfile);
                    free(pbuf);
            } 
            InternetCloseHandle(hReq2);
        }
        InternetCloseHandle(hConnect2);
    }
    InternetCloseHandle(hOpen2);
    }

} 
```

`g++ test.cpp -o test.exe -lwininet`

# ctags - BBEdit 无法识别 ctags 的标签文件

> ID：11368382
> 
> 赞同：0
> 
> 时间：2012-07-06T19:16:32.440
> 
> 标签：ctags, exuberant-ctags, bbedit

我试图让 BBEdit 识别我的 Rails 项目的 ctags 文件。我已经尝试直接使用 ctags-exuberant 和使用`bbedit --maketags`命令生成它。虽然我生成的标签在 Vim 中完美运行，但在 BBEdit 中没有这样的运气。没有错误消息或任何东西，只是没有符号触发完成或允许我跳转。

我试过将标签文件移动到项目目录中，但没有成功。我已经尝试在我的层次结构（我的模型文件夹）中生成一个较低的层并在模型类之间跳转，但没有运气。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T22:52:55.643

如果其他人像我一样遇到这个问题，这是来自 BBEdit 支持的答案。简而言之，如果您使用的是 OSX Fuse，请在终端中执行以下操作：

默认写入 com.barebones.bbedit DisableCtagsScanOnRemoteVolumes -bool NO

来自 BBEdit 支持的完整答案：

从帮助手册的“专家首选项”页面中抄袭（帮助 -> BBEdit 帮助）：

====

** 各种各样的 **

[...]

*   编辑远程文件服务器（AFP、NFS、SMB 等）上的文件时，BBEdit 不会查找目录相关标签文件或设置文件。当文件位于通过 MacFUSE/SSH 或类似方式安装的卷上，或者文件服务器通过慢速或高延迟链接时，这是一个特殊的性能提升。

    要启用扫描远程卷上的标记或设置文件，请单独或一起使用这些 [终端命令]：

    默认写入 com.barebones.bbedit DisableCtagsScanOnRemoteVolumes -bool NO

    默认写入 com.barebones.bbedit DisableSettingsScanOnRemoteVolumes -bool NO

====

请注意，如果您只需要 ctags，则只需应用第一个选项（“DisableCtagsScanOnRemoteVolumes”）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T19:44:44.283

来自 BBEdit 手册（第 302-304 页）：

> **使用 ctags**
> 
> BBEdit 允许您生成和使用标签文件作为文本完成源，并且可以识别与您的文档相关的任何标签文件。
> 
> 您可以将通过“bbedit --maketags”生成的标签文件放在 BBEdit 应用程序支持文件夹（参见第 32 页）的 Completion Sources 文件夹中，用作文本完成源。
> 
> [...]
> 
> **将文件标记为完成源**
> 
> 您现在可以将标签文件添加到特定位置，以便在以所需语言进行编辑时使符号可用作完成数据源。尤其是：
> 
> *   当你构建一个（编码的）语言模块时，如果你在语言模块的“Resources”目录中放置一个名为“tags”的文件，BBEdit 将
>     使用这些标签作为完成源。
> *   您可以生成一个标签文件（使用 exuberant ctags 或“bbedit --maketags”）并将生成的文件放在 Application Support/BBEdit/Completion Data// 中，其中“name>”是出现在已安装语言的列表
>     （或在语言弹出菜单上）。
> 
> 因此，例如，如果您要为 10.6 SDK 生成一个标签文件，以便在编辑 Objective-C 文件时添加完成数据，该文件将进入 Application Support/BBEdit/Completion Data/Objective-C/。可以为标签文件指定任何适当的名称，因此您可以为一种语言拥有多个标签文件，并且在生成补全时都会检查它们。

以及 p32 上的完成数据部分：

> **完成数据**
> 
> 此文件夹默认不存在，但您可以创建它。Completion Data 文件夹包含标签文件（或标签文件的别名），可以为编辑相应语言的文档提供额外的文本补全。这些标签文件应采用“bbedit --maketags”生成的格式，并且必须放在与其语言对应的子文件夹中。
> 
> 每个子文件夹都应具有其语言的确切名称，因为该语言出现在已安装语言的列表中（或在“语言”弹出菜单上）。
> 
> 例如，包含 Python 标记文件的子文件夹必须命名为“Python”，而包含 ANSI C 标记文件的子文件夹必须命名为“ANSI C”。

# html-email - 发送大正文的电子邮件失败

> ID：11368383
> 
> 赞同：1
> 
> 时间：2012-07-06T19:16:33.057
> 
> 标签：html-email

当从 C# 发送一封正文较大的电子邮件时，会导致发送电子邮件失败

```
Mailbox unavailable. 
```

电子邮件在较小的正文中运行良好。我正在使用 html 正文来真正的财产..

谢谢，扎法尔

代码：

```
using (MailMessage _mailMsg = new MailMessage())
                    {
                        _mailMsg.From = new MailAddress(ConfigurationManager.AppSettings["mailFrom"].ToString());
                        _mailMsg.Body = mail.Body;
                        _mailMsg.Subject = mail.Subject;
                        _mailMsg.IsBodyHtml = true;

                        foreach (string strEmailIds in mailTo)
                        {
                            if (strEmailIds != null && strEmailIds != string.Empty && strEmailIds != "")
                            {
                                if (!_mailMsg.To.Contains(new MailAddress(strEmailIds)))
                                    _mailMsg.To.Add(new MailAddress(strEmailIds));
                            }
                        }
                        //_mailMsg.CC.Add(ConfigurationManager.AppSettings["mailCC"].ToString());
                        using (SmtpClient _client = new SmtpClient(ConfigurationManager.AppSettings["Host"].ToString()))
                        {

                            if (_mailMsg.To.Count > 0)
                            {

                                _client.Send(_mailMsg);
                            }
                            else
                            {
                                _mailMsg.Subject = "No emails associated with the portfolio: " + account + " Original Email:" + mail.Subject;
                                _mailMsg.To.Add(new MailAddress(ConfigurationManager.AppSettings["mailSuppotTeam"].ToString()));
                                _client.Send(_mailMsg);
                            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T19:43:43.463

好的，可能是邮件服务器拒绝大邮件。排除那个...我假设您安装了本地 smtp 邮件服务器（检查 telnet 127.0.0.1 25 应该给出一种回复）配置邮件服务器 [ConfigurationManager.AppSettings["Host"]] 为 127.0。 0.1，现在可以发大邮件了吗？

如果 ConfigurationManager.AppSettings["Host"] 已经是本地 SMTP 服务器，则：a) 暂时停止该 smtp 服务（简单邮件传输协议）（通过命令 services.msc）b) 发送一封小电子邮件 c) 转到c:\inetpub\mailroot\pickup 并通过记事本编辑邮件，使其成为大电子邮件 d) 再次启动 smtp 服务 (services.msc)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T14:10:10.360

问题在于将电子邮件发送到跨域电子邮件 ID，并导致通用异常“邮箱不可用”。可能这是上述异常背后的原因之一。

# mysql - 如何提高 Perl/DBI 脚本的性能，该脚本从一个数据库服务器中选择超过 100 万行并将它们插入到另一个数据库服务器上？

> ID：11368387
> 
> 赞同：3
> 
> 时间：2012-07-06T19:16:42.480
> 
> 标签：mysql, perl, dbi

我正在使用最新版本的 MySQL（工作台）、Perl 和 DBI。

我有两个唯一的数据库，每个数据库都在唯一的服务器上。我在 Server1 上的 DB1 上查询 table1，加载到一个数组中，然后`while`将所述表插入到 Server2 上的 DB2 上的 table2 中。

它不是直接副本，因为我实际上是在表 1 上进行选择。

我正在尝试加快我的脚本或在必要时更改查询。

我正在使用绑定并将准备语句移出循环，这确实有帮助。但是，我最终还是调用了 160 万次插入到 table2/db2/server2 的调用，这会占用大量时间（每次调用 3100 秒或大约 2-3 毫秒）。

有两个子 &insert2tempData 在`while`循环中用于加载我的 DB2 table2。它被调用了 160 万次 AND query_dev_load_local_dbs 用于查询 DB1 然后调用第二个 sub。

为简单起见，我将此准备留在循环中，但在我的代码中，它不在循环中，而是在`while`调用此子的子中。

```
sub insert2tempData {
    $query4tmpData = $Locdbh_NetCool->prepare ("INSERT INTO kpincpolldata.kpitempData
        (monitoredObjectId, monitoredInstId, pollTime, tdwTime, errorCode, value)
        VALUES(?, ?, ?, ?, ?, ?)");

    $query4tmpData->execute($row[0], $row[1], $row[2], $row[3], $row[4],
                            $row[5]);
    warn "Problem in retrieving results", $query4tmpData->errstr(), "\n"
        if $query4tmpData->err();

} #End sun insert to tempData 
```

**这是用于查询 server1、DB1 和 table1 的主要 sub。它调用`while`循环**

```
sub query_dev_load_local_dbs {
    $queryRemote = $Devdbh_NetCool->prepare("SELECT * FROM ncpolldata.pollData
                                   WHERE pollTime >= $STARTU AND pollTime < $ENDU
                                   AND monitoredObjectId = 1");

    $queryRemote->execute();

    while (@row = $queryRemote->fetchrow_array()) {

        #** Call to sub insert2tempData**
        &insert2tempData($Locdbh_NetCool);

        warn &print2log ("Problem in retrieving results"), $queryRemote->errstr(), "\n"
            if $queryRemote->err();
    } # End while

} # End sub query_dev_load_local_dbs 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T20:15:37.673

我会使用[`fetchrow_arrayref()`](http://search.cpan.org/~timb/DBI-1.622/DBI.pm#fetchrow_arrayref)，而不是`fetchrow_array()`因为这样它就不必在每次获取一行时复制所有返回值。这应该会加快速度。你也可以看看[`bind_columns`](http://search.cpan.org/~timb/DBI-1.622/DBI.pm#bind_columns)。

然后我不太明白你对`while`循环和 的意思`prepare`，所以我还是这么说：将`$query4tmpData=$Locdbh_NetCool->prepare`移出 sub 并移到可以 d 一次的其他地方`prepare`，然后在 sub 中重用它。你可能有那个。

* * *

**还有几件事：**

*   你应该总是[`use strict`](http://perldoc.perl.org/strict.html)和`use warnings`. 我在你的潜艇上看不到[`my`](http://perldoc.perl.org/functions/my.html)。请使用那些编译指示。他们让你的生活更轻松。
*   当您无法`INSERT`读取*“检索结果*时出现问题”时发出的警告。如果发生这种情况，您可能会感到困惑。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-06T23:21:19.343

您上面发布的代码完全有可能与您感知的性能问题*无关。*在您使用的数据库服务器上插入这么多行可能需要很长时间。这是我要看的：

1.  关闭`AutoCommit`，它已启用。

    每次提交都会`insert`对性能产生严重影响，`Server2`具体取决于它的配置方式。完全有可能将整个过程集中到一个事务中可以加快速度。但这实际上取决于服务器的配置方式、索引的构建方式等。

    这使我们：

2.  一个称职的 DBA 可能会提供帮助。

    请与管理您的 MySQL 服务器的人联系，看看他们是否可以帮助您进行故障排除。谁知道呢，他们甚至可能有 DBA 工具来帮助解决您的问题，而无需您在代码中做任何不同的事情，*甚至*允许您完全放弃此脚本。

    除非您是 DBA：

3.  您可能会在[Stack Exchange 网站](https://dba.stackexchange.com/)上浏览 DBA。

您发布的代码中可能有一些小问题需要修复，但如果数据库是瓶颈，那就没关系了。找到瓶颈！

# c# - C# MVC - 返回不显示完整页面的 PartialView

> ID：11368388
> 
> 赞同：0
> 
> 时间：2012-07-06T19:16:53.063
> 
> 标签：c#, asp.net-mvc-3, telerik-mvc, asp.net-mvc-partialview

我的控制器返回部分视图时遇到问题。

这是我的控制器的样子：

```
[HttpPost]
    public ActionResult ProcessSubmit(IEnumerable<HttpPostedFileBase> attachments, Models.FloorPlan.FloorPlanModel F)
    {
        F.FloorPlanList = null;
        if (ModelState.IsValid)
        {
            //if (Models.FloorPlan.Repository.FloorPlanMethods.AddFloorPlan(F))
            //{
                if (attachments != null && attachments.Count() == 1)
                {
                    foreach (var file in attachments)
                    {
                        // Some browsers send file names with full path. We only care about the file name.
                        var fileName = Path.GetFileName(file.FileName);
                        var destinationPath = Path.Combine(Server.MapPath("~/App_Data"), fileName);

                        file.SaveAs(destinationPath);
                        F.Photo = destinationPath;
                        Models.FloorPlan.Repository.FloorPlanMethods.AddFloorPlan(F);
                    }
                }
            //}
        }
        Mvc.Models.FloorPlan.FloorPlanModel _floorPlanModel = new Models.FloorPlan.FloorPlanModel();
        _floorPlanModel.FloorPlanList = Mvc.Models.FloorPlan.Repository.FloorPlanMethods.GetFloorPlansAll(F.PropertyID);
        _floorPlanModel.PropertyID = F.PropertyID;

        return PartialView("~/Views/FloorPlan/Index.cshtml", _floorPlanModel);
        //return View("~/Views/FloorPlan/Index.cshtml", _floorPlanModel);
    } 
```

这是我的视图的样子：

```
@model Web.CMS.Mvc.Models.FloorPlan.FloorPlanModel
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
@using (Html.BeginForm("ProcessSubmit", "FloorPlan", FormMethod.Post, new { id = "uploadForm", encrypt = "multipart/form-data" }))
{
    @Html.ValidationSummary(false, "Please fix these errors.")

    <div class="H1">
    Floor Plans & Pricing
    </div>
    <!--<div class="iconAdd fl pt5 w120" onclick="FloorPlan_AddFloorPlan(); return false;">
        <a></a>
    </div>//-->
    <div class="fl clr" style="width: 600px;">
        <ul class="fl">
            <li class="w110">Name </li>
            <li class="w110">Beds </li>
            <li class="w110">Baths </li>
            <li class="w110">Sq Ft </li>
            <li class="w110">Price</li>
            <li class="w110">Text </li>
            <li class="w110">Photo </li>
        </ul>

        <ul class="fl">
            <li>@Html.TextBoxFor(f => f.Name)</li>
            <li>@Html.TextBoxFor(f => f.Bedrooms)</li>
            <li>@Html.TextBoxFor(f => f.Bathrooms)</li>
            <li>@Html.TextBoxFor(f => f.SquareFeet)</li>
            <li>@Html.TextBoxFor(f => f.Price)</li>
            <li>@Html.TextBoxFor(f => f.Body)</li>
            <li>@Html.TextBoxFor(f => f.Photo)
                @(Html.Telerik().Upload()
                    .Name("attachments")
                    .Multiple(false)
                )
                <div class="iconBrowse fr pt5"></div>
                <input type="submit" value="Send" class="t-button" />
                <input type="reset" value="Reset" class="t-button" />
            </li>
        </ul>
    </div>
    <br />
    <div class="clr">
    <input type="button" onclick="javascript: FloorPlan_AddFloorPlan(); return false;" value="Save" />
    @(Html.Telerik().Grid(Model.FloorPlanList)
            .DataKeys(k => k.Add(o => o.FloorPlanID))
            .DataBinding(dataBinding => dataBinding
                .Ajax()
                    .Select("Index", "Home")
                    .Delete("Delete", "FloorPlan"))
            .Name("FloorPlanListGrid")
            .Scrollable()
            .Pageable()
            .Selectable()
            .Columns(col =>
            {
                col.Bound(c => c.Name);
                col.Bound(c => c.Photo);
                col.Bound(c => c.Body);
                col.Bound(c => c.Bedrooms);
                col.Bound(c => c.Bathrooms);
                col.Bound(c => c.Price);
                col.Bound(c => c.SquareFeet);
                col.Command(commands =>
                {
                    commands.Delete();
                }).Width(100);
            })
        )
        @Html.HiddenFor(x => x.PropertyID)
    </div>  

}
<script src="@Url.Content("~/Scripts/floorplan.index.debug.js")" type="text/javascript"></script> 
```

结果页面仅包含我的视图中“表单”标记之后的实际数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T23:17:41.297

这就是 PartialViews 的用途。您调用一个返回部分视图的操作。如果您在浏览器中查看页面的源代码，您将看不到 the 和元素。如果要返回完整页面，则需要使用 return View("... 语句。这将呈现您在站点的布局页面中的视图。

# php - 从 mySQL 查询中收集两个单独的列结果

> ID：11368389
> 
> 赞同：0
> 
> 时间：2012-07-06T19:16:55.383
> 
> 标签：php, mysql

我有两个包含相似数据的数据库表——一个是一个进程完成的工作量，另一个是该进程产生的错误量。

我想显示第一次正确工作的百分比。

我按流程计算项目数的查询是：

```
SELECT Counter.Process, count( Counter.Process ) AS count
                            FROM Counter WHERE (TIME BETWEEN '2012-07-01 00:00:00' AND '2012-07-06 23:59:59')
                            GROUP BY Counter.Process
                            ORDER BY count DESC 
```

上面给了我一个类似的列表：

```
Process    | count
-------------------
Process A  | 40
Process B  | 32
Process C  | 102
Process D  | 23 
```

我有第二个表，其中包含用于记录错误的相同字段，称为“错误”。

通过使用相同的查询（但显然更改了表名），我可以获得进程和错误列表。

我想做的是创建一个 PHP 网页，显示每个进程的错误百分比。

我的问题是，如果我分别创建这两个查询，当我使用 PHP Where 循环遍历它们时，我不知道如何进行计算以显示百分比。

我尝试在两个 SQL 查询之间使用 UNION，但我无法让它显示针对该过程的两个不同的计数读数。

理想情况下，我想要一种显示数据的方法，如下所示：

```
Process   | Counter.count | Errors.count
Process A     40              2
Process B     32              0
Process C     102             18
Process D     23              8 
```

如果您需要有关我的数据库表的更多信息，请告诉我有关如何完成此操作的任何建议/建议，我将不胜感激

谢谢阅读

小号

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T19:53:54.230

我个人更喜欢通过 PHP 运行这样的情况，因为它不会让我感到困惑，所以我将解释我认为我会如何在 PHP 中做到这一点（我说“想想”，因为我可能不知道你的数据库结构或系统规范会否则让我做事）：

```
$rows = array();
$res = mysql_query('SELECT Counter.Process, count( Counter.Process ) AS count
                        FROM Counter WHERE (TIME BETWEEN '2012-07-01 00:00:00' AND '2012-07-06 23:59:59')
                        GROUP BY Counter.Process
                        ORDER BY count DESC');
while ($arr = mysql_fetch_assoc($res))
{
    $rows[] = $arr;
}

$res2 = mysql_query('SELECT Errors.Process, count( Errors.Process ) AS count
                        FROM Counter WHERE (TIME BETWEEN '2012-07-01 00:00:00' AND '2012-07-06 23:59:59')
                        GROUP BY Errors.Process
                        ORDER BY count DESC');
while ($arr2 = mysql_fetch_assoc($res2)
{
    for ($i=0; $i<count($rows); $i++)
    {
        if ($arr2["Process"] == $data[$i]["process"])
        {
            break;
        }
        //Do your functions with $arr and $data[$i] at this point...
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T19:56:23.027

在没有子查询的情况下这样做应该很简单：

```
SELECT 
    Counter.Process
    , COUNT(Counter.Process) AS ProcessCount
    , COUNT(Errors.Process) AS ProcessErrors
FROM
    Counter
    LEFT JOIN
    Errors
    ON Counter.Process = Errors.Process
WHERE
    Counter.TIME BETWEEN '2012-07-01 00:00:00' AND '2012-07-06 23:59:59'
GROUP BY
    Counter.Process 
```

您可以对这两个查询进行解释，看看哪个最适合您的数据。

-edit：我已将其更改为 LEFT JOIN，因此如果进程没有错误，您就不会错过行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T19:37:32.943

我没有运行它，所以可能会有错误。您可以进行两个选择，然后左加入结果：

```
select s.process, s.success_count, e.error_count
from 
(SELECT Counter.Process as process, count( Counter.Process ) AS success_count
 FROM Counter
 WHERE (TIME BETWEEN '2012-07-01 00:00:00' AND '2012-07-06 23:59:59')
 GROUP BY Counter.Process
) s left join
(SELECT Errors.Process, count( Errors.Process ) AS error_count
      FROM Errors
      WHERE (TIME BETWEEN '2012-07-01 00:00:00' AND '2012-07-06 23:59:59')
      GROUP BY Errors.Process 
) e
on (s.Process = e.process) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-06T19:31:53.053

您可以使用子查询：

```
SELECT Counter.Process, count( Counter.Process ) AS Count,
      (SELECT count(Errors.Process) 
         FROM Errors
        WHERE Process=Counter.Process 
          AND (TIME BETWEEN '2012-07-01 00:00:00' AND '2012-07-06 23:59:59')) AS Errors
                            FROM Counter WHERE (TIME BETWEEN '2012-07-01 00:00:00' AND '2012-07-06 23:59:59')
                            GROUP BY Counter.Process
                            ORDER BY count DESC 
```

问候，尼尔。

# google-app-engine - 使用 Appengine 进行事务和锁定

> ID：11368391
> 
> 赞同：1
> 
> 时间：2012-07-06T19:17:07.697
> 
> 标签：google-app-engine, objectify

我在下面有一个类似的代码，我试图找出事务锁定：

```
DAOT.repeatInTransaction(new Transactable() {
        @Override
        public void run(DAOT daot)
        {
                Points points = daot.ofy().find(Points.class, POINTS_ID);
                // do something with points
                takes_a_very_long_time_delay(); // perhaps 10 secs
                daot.ofy().put(points);
        }
}); 
```

上面的代码是从 Java servlet 中执行的。例如，该操作预计工作 10 秒。在此期间，我有一个测试将调用另一个将删除`Points`实体的 servlet，我预计删除操作将失败或至少在上述事务完成后删除实体。

但是，在上述代码执行期间，实体已被删除。在我的实际应用程序中，我添加了异常处理以在尝试访问或编辑不存在的实体时抛出异常。

从那里，应用程序`Entity not found"`在我执行将删除上面代码中的实体的 servlet 之后抛出“异常。

虽然我已经在使用 GAE Transactions，但是我认为我仍然缺少一些东西，这就是我的测试失败的原因。

从删除 servlet 中删除事务的代码：

```
DAOT.repeatInTransaction(new Transactable() {
        @Override
        public void run(DAOT daot)
        {
                Points points = daot.ofy().find(Points.class, POINTS_ID);
                daot.ofy().delete(points);
        }
}); 
```

如何确保`delete`在事务期间对实体进行的新操作（例如针对实体的新操作）将等到当前操作在实体上发生？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T04:54:54.153

App Engine 使用乐观并发，而不是锁定。也就是说，一组实体上的事务不会阻止其他进程在事务运行时修改这些实体。相反，当事务尝试提交时，它将检查在事务执行时是否进行了任何修改，如果有，则丢弃任何更改并从头开始再次运行您的函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T20:24:44.897

我假设您使用 objectify 来处理数据存储。首先，您需要确保 daot.ofy() 返回具有显式事务集 (ObjectifyFactory.beginTransaction()) 而不是 ObjectifyFactory.begin() 的 objectify 实例。然后确保对 find() 和 delete() 调用（以及 find()/put 对）使用相同的 objectify 实例。

# excel - Excel 数据表 - 如果基础视图发生更改，引用也会更改

> ID：11368395
> 
> 赞同：0
> 
> 时间：2012-07-06T19:17:19.470
> 
> 标签：excel

我在 Excel 中有一个数据表连接到 MSSQL 中的一个视图。Excel 中的 SQL 正在对视图执行 SELECT *。

我已经设置了许多公式来引用表格，即

```
=AVERAGE(table[Field A])
=AVERAGE(table[Field B])
=AVERAGE(table[Field C]) 
```

如果我更改视图的定义并在视图中的 B 和 C 之间插入一个字段，则公式会自动更新如下：

```
=AVERAGE(table[Field A])
=AVERAGE(table[Field B])
=AVERAGE(table[Field X]) 
```

有没有办法阻止这种行为或锁定公式？

# javascript - jQuery post 在加载时有效，但在点击时无效

> ID：11368399
> 
> 赞同：2
> 
> 时间：2012-07-06T19:17:27.913
> 
> 标签：javascript, jquery

我首先实现了以下代码片段来显示“hi”警报并在“document ready”处发布 jQuery 帖子。这第一步工作得很好。然后，我添加了几行代码来仅在单击标签时执行该块。现在“嗨”警报按预期工作（仅在我单击链接后），但是帖子返回“错误，帖子不起作用”并且没有按预期完成。重申一下，如果我删除下面标有 / *** / 的 2 行，代码就可以正常工作（在页面加载后立即）。任何想法为什么？

```
$(document).ready(function(){
    $('a.postlink').click(function() {    /*** post works if I remove this line ***/
    alert("hi");
    jQuery.post("http://myurl", 
            {registration_id: 'device1', command: 'MESSAGE', message: 'Hello', longMessage: ''},
       function(data) {
         alert("ok");
       })
       .error(function() {
        alert("error, the post didn't work");
        });
    });                                   /*** and this line ***/
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T19:21:47.937

试试`event.preventDefault()`；

```
<a href="#" class="postlink"></a>

$('a.postlink').click(function(event) { 
   event.preventDefault();
  // ...
}) 
```

# sql-server - 提高 sql 删除性能并减少日志文件和 tempDB 大小？

> ID：11368402
> 
> 赞同：0
> 
> 时间：2012-07-06T19:17:55.003
> 
> 标签：sql-server, database, tempdb

我有一个庞大的数据库，它每天处理电子邮件流量。在系统中，它需要每天删除一些旧邮件：

```
Delete from EmailList(nolock) 
WHERE EmailId IN ( 
    SELECT EmailId 
    FROM Emails 
    WHERE EmailDate < DATEADD([days], -60, GETDATE())
) 
```

它可以工作，但问题是：完成需要很长时间，因此日志文件变得非常大。日志文件大小每天增加超过 100GB。

我想我们可以把它改成

```
Delete from EmailList(nolock) 
WHERE EXISTS ( 
    SELECT EmailId 
    FROM Emails 
    WHERE (Emails.EmailId = EmailList.EmailId) AND 
        (EmailDate < DATEADD([days], -60, GETDATE()))
) 
```

但除此之外，我们还能做些什么来提高性能。最重要的是，减少日志文件的大小？

*   EmailId 已编入索引。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T20:16:51.270

您是否尝试过按日期进行分区，那么您可以删除您不再感兴趣的日子的表格版本。给定一个“hugh”数据库，您肯定会运行企业版的 SQL Server（毕竟，hugh 比非常大）并且具有表分区。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T19:35:47.787

我见过

```
GetDate()-60 
```

样式语法执行得比

```
DATEADD([days], -60, GETDATE())) 
```

特别是如果日期列上有索引。我和一些 DBA 同事花了很多时间试图理解为什么它会表现更好，但结果却是在布丁中。

考虑到我认为您必须删除的记录量，您可能要考虑的另一件事是分批删除，例如 1000 或 10000 条记录。这可能会加快删除过程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T19:36:15.557

[编辑]：

关于@TomTom 的评论：如果您有可用的 SQL Server Enterprise 版本，您应该**使用 Table Partitioning**。

如果不是这种情况，我的原始帖子可能会有所帮助：

* * *

[原帖]

删除大量数据总是很困难的。我遇到了同样的问题，我采用了以下解决方案：

根据您的要求，这将不起作用，但也许您可以从中获得一些想法。

不要使用 1 个表，而是使用**2 个**具有相同架构的表。创建一个同义词（我假设您使用的是 MS SQL 服务器）指向“两个表的活动表（活动的意思是，这是您当前写入的表）。将此同义词用于应用程序中的插入，或者应用程序可以不使用同义词，而是每 x 天写入一次就更改表。

每隔 x 天，您可以**截断旧的/非活动表**，然后重新创建同义词以针对截断的表（如果您使用同义词解决方案），因此您每次都有效地对数据进行分区。

您必须同步活动表的切换。我通过为应用程序使用共享应用程序锁和在更改同义词时使用独占应用程序锁（== 在切换过程中阻止写入应用程序）完全自动化了这一点。

如果更改应用程序的代码不是一个选项，请考虑使用相同的原则，但不是写入同义词，而是可以创建一个视图而不是触发器（插入操作将插入“活动”分区）。触发代码需要使用类似于上面提到的 Applock 的东西进行 syhcnronize（以便在切换过程中写入）。

我的解决方案稍微复杂一些，因此我目前无法在此处发布代码，但它对于高负载应用程序没有问题，并且 swithcingt/cleanup 过程是完全自动化的。

# android - Android：“无法初始化可视化引擎”

> ID：11368411
> 
> 赞同：6
> 
> 时间：2012-07-06T19:18:25.467
> 
> 标签：android, initialization, visualizer

我在 3 天前开始为 Android 编程，今天我想使用 android Api 中的一些类来做一些更困难的事情。我找到了 Visualizer 类，起初我遇到了问题。我在不同论坛上阅读了许多有相同问题的人的帖子：无法初始化可视化引擎。

我将需要使用权限添加到 Manifest.xml

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="org.program.fourier"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-permission android:name="android.permission.RECORD_AUDIO" />
    <uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS"/>

    <uses-sdk
        android:minSdkVersion="10"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >

        <activity
            android:name=".mainFFT"
            android:label="@string/title_activity_main_fft" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

接下来我试图解决这个问题，但我不能。这是我的完整代码：

```
package org.program.fourier;

import android.os.Bundle;
import android.app.Activity;
import android.util.Log;
import android.view.Menu;
import android.view.MenuItem;
import android.support.v4.app.NavUtils;

import android.media.audiofx.Visualizer;
import android.media.audiofx.Visualizer.OnDataCaptureListener;
import android.media.MediaPlayer;
import android.media.AudioManager;

public class mainFFT extends Activity {

    MediaPlayer mPlayer;
    Visualizer vis;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main_fft);

        mPlayer = MediaPlayer.create(this, R.raw.sight);
        mPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);

        try
        {
            mPlayer.prepare();
        }
        catch(Exception ex){ Log.w("ExCePtIoN", ex+""); }

        try
        {
            vis = new Visualizer(mPlayer.getAudioSessionId());
        //vis.setDataCaptureListener(this, 20, true, true);
        }
        catch(Exception ex){ Log.w("ExCePtIoN", ex+""); }

        mPlayer.start();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.main_fft, menu);
        return true;
    }

} 
```

最后一个问题是当我想执行 mPlayer.prepare() 方法时它会抛出 IllegalStateException 。

这是完整的 LogCat 消息：

```
07-06 18:33:17.141: E/Trace(833): error opening trace file: No such file or directory (2)
07-06 18:33:17.591: E/MediaPlayer(833): prepareAsync called in state 8
07-06 18:33:17.591: W/ExCePtIoN(833): java.lang.IllegalStateException
07-06 18:33:17.621: E/AudioEffect(833): set(): AudioFlinger could not create effect, status: -22
07-06 18:33:17.621: E/visualizers-JNI(833): Visualizer initCheck failed -4
07-06 18:33:17.621: E/Visualizer-JAVA(833): Error code -4 when initializing Visualizer.
07-06 18:33:17.621: W/ExCePtIoN(833): java.lang.RuntimeException: Cannot initialize Visualizer engine, error: -4
07-06 18:33:18.482: I/Choreographer(833): Skipped 337 frames!  The application may be doing too much work on its main thread.
07-06 18:33:18.551: D/gralloc_goldfish(833): Emulator without GPU emulation detected. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-10T08:17:09.453

[来自Github](https://github.com/felixpalmer/android-visualizer)的工作示例

```
 public void link(MediaPlayer player)
  {
    if(player == null)
    {
      throw new NullPointerException("Cannot link to null MediaPlayer");
    }

    // Create the Visualizer object and attach it to our media player.
    mVisualizer = new Visualizer(player.getAudioSessionId());
    mVisualizer.setCaptureSize(Visualizer.getCaptureSizeRange()[1]);

    // Pass through Visualizer data to VisualizerView
    Visualizer.OnDataCaptureListener captureListener = new Visualizer.OnDataCaptureListener()
    {
      @Override
      public void onWaveFormDataCapture(Visualizer visualizer, byte[] bytes,
          int samplingRate)
      {
        updateVisualizer(bytes);
      }

      @Override
      public void onFftDataCapture(Visualizer visualizer, byte[] bytes,
          int samplingRate)
      {
        updateVisualizerFFT(bytes);
      }
    };

    mVisualizer.setDataCaptureListener(captureListener,
        Visualizer.getMaxCaptureRate() / 2, true, true);

    // Enabled Visualizer and disable when we're done with the stream
    mVisualizer.setEnabled(true);
    player.setOnCompletionListener(new MediaPlayer.OnCompletionListener()
    {
      @Override
      public void onCompletion(MediaPlayer mediaPlayer)
      {
        mVisualizer.setEnabled(false);
      }
    });
  } 
```

并查看Android 开发者网站中的[AudioFxDemo](https://stackoverflow.com/a/8621292/3496570)和 .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T10:48:51.300

你需要先打电话`mPlayer.setDataSource()`，然后再打电话`mPlayer.prepare()`。
您将在以下位置找到更改状态的所有说明：http: [//developer.android.com/reference/android/media/MediaPlayer.html](http://developer.android.com/reference/android/media/MediaPlayer.html)

# c# - 降低位图质量产生 OutOfMemoryException

> ID：11368412
> 
> 赞同：2
> 
> 时间：2012-07-06T19:18:27.707
> 
> 标签：c#, networking, graphics, bitmap

我正在尝试将用户的整个桌面捕获为图像。我通过以下方式执行此操作：

```
 public Bitmap CaptureScreen()
    {
        // Set up a bitmap of the correct size
        Bitmap CapturedImage = new Bitmap((int)SystemInformation.VirtualScreen.Width,
            (int)SystemInformation.VirtualScreen.Height, System.Drawing.Imaging.PixelFormat.Format32bppArgb);

        // Create a graphics object from it
        System.Drawing.Size size = new System.Drawing.Size((int)SystemInformation.VirtualScreen.Width, (int)SystemInformation.VirtualScreen.Height);

        using (Graphics g = Graphics.FromImage(CapturedImage))
        {
            // copy the entire screen to the bitmap
            g.CopyFromScreen(0, 0, 0, 0,
                size, CopyPixelOperation.SourceCopy);
        }
        return CapturedImage;
    } 
```

但是，如果我尝试将`PixelFormat`from更改`Format32bppArgb`为`Format16bppArgb1555`，它会产生一个`OutOfMemoryException`，我不太明白，考虑到我降低了质量。

有任何想法吗？或者我怎样才能降低这个图像的质量（因为它会以相当频繁的时间间隔通过网络发送）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-06T19:26:41.907

来自[文档](http://msdn.microsoft.com/en-us/library/system.drawing.graphics.fromimage(VS.100).aspx)：（也[相关](http://connect.microsoft.com/VisualStudio/feedback/details/536050/graphics-fromimage-outofmemoryexception)）

> 如果图像具有以下任何像素格式，此 [ `FromImage()`] 方法也会引发异常。
> 
> *   不明确的
> *   不关心
> *   格式16bppArgb1555
> *   格式16bpp灰度

在“相关”链接中，msdn 继续说：

> 这里唯一的问题是 OutOfMessageException 在这种情况下不是非常准确的异常类型。我们会考虑在 VS2010 之后的版本中修复它。

# iphone - 在 iOS Objective C 中解析 json 字符串

> ID：11368418
> 
> 赞同：0
> 
> 时间：2012-07-06T19:19:01.607
> 
> 标签：iphone, ios, json

我正在尝试构建我的第一个从 Web 服务解析 json 的 iOS 应用程序。

在我的 .h 文件中，我创建了一个数组

```
NSArray *items; 
```

在我的 .m 文件中，我调用网站并将数据存储到数组中。这一切都很好，除了最终我试图在 uitableview 中显示数据。

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"ItemsCell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    NSLog(@"%@",items);

    NSDictionary *item = [items objectAtIndex:indexPath.row];
    NSString *title = [item objectForKey:@"title"];

    cell.title.text = title;

    return cell;
} 
```

项目的 nslog 产生：

```
{
category = code;
keyword = "";
limit = 20;
lowPrice = "";
page = 0;
products =     (
    {
        description = "...";
        mobileFriendly = 1;
        popularity = 2021;
        productId = code;
        title = "title";
    }, and so on...
) 
```

我在尝试执行 NSDictionary *item = [items objectAtIndex:indexPath.row]; 时遇到错误 它说做 objectAtIndex:indexPath.row 是无效的。

我究竟做错了什么？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T19:30:02.313

items 不是`NSArray`- 它是`NSDictionary`. 所以它没有`objectAtIndexPath:`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T19:32:25.667

存储的值`items`是 的实例`NSDictionary`，但您正在向它发送`NSArray`消息。此外，您发布的代码无论如何都引用`gift`并忽略了该项目。

您要查找的数组实际上存储在字典`products`内的键下`items`，因此您需要执行以下操作：

```
NSArray *products = [items objectForKey:@"products"];

NSDictionary *product = [products objectAtIndex:indexPath.row];
// Then use the product, instead of using 'gift' (whatever that is).
NSString *title = [product objectForKey:@"title"]; 
```

# jquery - 在 Raphael.js 中绘制棋盘的方法

> ID：11368419
> 
> 赞同：0
> 
> 时间：2012-07-06T19:19:02.097
> 
> 标签：jquery, animation, raphael, jquery-animate

我的应用程序需要一个棋盘，我想知道在 Raphael.js 中实现它的选项。我应该创建 64 个正方形并将它们连接在一起还是一个大块并将其着色为黑色和白色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T18:13:27.297

我认为你可以这样做：

您可以像这样描述电路板的单元格或框：

```
var cellSize = 25;//the size of our cell (whatever you want)
//Where x, y are the position in the board and cellSate 
//a value indicating if it is black or white.
Raphael.fn.cell = function(x, y, cellState) {
   var size = cellSize;
   var crect = paper.rect(x, y, size, size);
   if(cellState == 1)
          crect.attr({fill: "#000"});
   else
          crect.attr({fill: "#fff"});
} 
```

并绘制电路板（根据您的目的对其进行修改）：

```
var chessBoard = function() {
   var cSize = 0;//auxiliary variable
   var last = 0;//allows to change the colour of the boxes
   for(var i = 0; i < rows; i += 1) {
      for(var j = 0; j < cols; j+= 1) {
          if(last == 1) {
             paper.cell(i * cSize, j * cSize, 0);
             last = 0;
          } else {
             paper.cell(i * cSize, j * cSize, 1);
             last = 1;
          }

          if(i == 0)
             cSize = cellSize;
      }
      if(last == 1) last = 0;
      else last = 1;//my trick hehe
  } 
```

}

最后，在您的 HTML 代码中：

```
 <!DOCTYPE HTML>
    <html>
    <head> 
    <script src="./js/raphael-min.js"></script>
    <script src="./js/gof.js"></script>
    <script>
       var paper;   
       function loadBoard() {
          paper = Raphael("panel", 512, 512);
          chessBoard(cells1);
       }
    </script>
    </head>

    <body onload="loadBoard();">
       <div id="panel" style="width:100%; height:100%; position:absolute; top:0; left:0;">
       </div>
    </body>
    </html> 
```

输出应该是这样的（灰色部分来自浏览器）：

![在此处输入图像描述](../Images/f75ca52bd9accd2653da74b232ef8232.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-16T18:53:01.580

它的另一种形式：

```
<div id="paper1"></div>
    <script type="text/javascript">
        var ltam=400,paper = Raphael("paper1", ltam,ltam);
        var fins=['\u265C','\u265E','\u265D','\u265B','\u265A','\u265D','\u265E','\u265C',
                  '\u265F','\u265F','\u265F','\u265F','\u265F','\u265F','\u265F','\u265F',
                  '\u2659','\u2659','\u2659','\u2659','\u2659','\u2659','\u2659','\u2659',
                  '\u2656','\u2658','\u2657','\u2655','\u2654','\u2657','\u2658','\u2656'];
        var lfigs=paper.set();
        var chessBoard = function(swz0) {
            var r0, l0, sz0=swz0/8;
            for(var i = 0; i < 8; i++) {
                for(var j = 0; j < 8; j++) {
                    r0 = paper.rect(i * sz0, j * sz0,sz0,sz0).attr({ opacity: 0.45, fill: ((i%8+(j%8))%2)==1?"white":"silver"});
                }
            }
            for(var i = 0; i < fins.length; i++) {
                lfigs.push(paper.text((i % 8) * sz0 + sz0/2, Math.floor((i+(i<16?0:32)) / 8) * sz0 + sz0/2-(sz0/25*2), fins[i])
                    .attr({"font-family": "Arial Unicode MS", "font-size": sz0, 'fill-opacity': 0.65})
                    .hover(function (){this.animate({'fill-opacity': .99,'font-size':sz0*1.1}, 250)},
                           function (){this.animate({'fill-opacity': .65,'font-size':sz0}, 250)})
                )
            }
        };
        chessBoard(ltam); 
```

查看示例：[Crear tablero ajedrez](http://jsfiddle.net/lucindom/pyqyqu1o/) Exitos！！！！

# clojure - 如何将二进制文件的内容读入 Clojure 中的字符串？

> ID：11368420
> 
> 赞同：6
> 
> 时间：2012-07-06T19:19:04.253
> 
> 标签：clojure

我正在使用 Compojure 在 Clojure 中创建一个静态文件服务器，但我一直坚持从文件系统读取图像并通过 Compojure 路由显示该图像。

不幸的是，slurp 不能很好地处理二进制数据，从那以后我已经尝试了 100 种不同的方法，但这是我最近失败的尝试：

```
(defn image-output [filepath]
  (try
    (let [contents (apply str (with-open [rdr (io/reader filepath)]
      (into #{} (line-seq rdr))))]
      {
        :status 200
        :headers 
        {
          "Content-Type" "image/jpeg", 
          "Content-Length" "",
          "Cache-Control" "",
          "Expires" ""
        }
        :body contents
      }))
    (catch Exception e {:status 404})))

(defn endpoint_view [params]
  (if (contains? params :bucket)
    (image-output (join "/" [data_path (:bucket params) (:dir params) (:filename params)]))))

(defroutes main-routes
  (GET "/view/:bucket/:dir/:filename" {params :params} (endpoint_view params))
  (route/files "/")
  (route/resources "/s" {:root "./public/s"})
  (route/not-found "Page not found")) 
```

目前的尝试似乎与使用 slurp 遭遇同样的命运，我可以在其中回显内容字符串及其编码字符串，但是当我将内容类型更改为 image/jpeg 时，它是一个损坏的图像。

昨天我花了一整天的时间在 Google 上搜索，但没有一个示例实现了相同的目标，虽然它们帮助我了解了更多关于 Java IO 的知识，但它们还不够清楚，无法帮助我找到需要去的地方，或者生成了我已经得到了相同的结果（例如：[将文件内容读入 Clojure 中的集合的最佳方法](https://stackoverflow.com/questions/8013566/best-way-to-read-contents-of-file-into-a-set-in-clojure)）。

（如果你能告诉我如何从文件路径中获取内容类型，那是我的下一个问题！）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-06T19:29:56.743

只要让身体成为`(io/file filepath)`- Ring 非常乐意为您提供文件。

编辑奖励积分：您可以使用`ring.middleware.file-info/wrap-file-info`来获取您返回的文件的文件元数据。或者，您可以只使用 提供整个目录`(compojure.route/files "/public")`，这会为您解决所有这些问题。

# cocoa - 用 1 根手指 iPhone、iPad 旋转 UIView

> ID：11368432
> 
> 赞同：0
> 
> 时间：2012-07-06T19:20:05.947
> 
> 标签：cocoa, rotation, cgaffinetransform, uipangesturerecognizer

我实现了一个 UIPanGestureRecognizer，因为我希望用一根手指沿其轴旋转 UIView。uiview 中的按钮开始 UIView 旋转的手势。问题是它只有在按钮位于左上角的第一象限时才能正确旋转。任何其他象限，它都会不规律地旋转。谁能告诉我我的数学有什么问题。顺便说一下，ang 使用超级视图的坐标计算角度，因为用户的手指可能在旋转视图范围之外，但这可能不是必需的。

谢谢你

```
- (void)rotateItem:(UIPanGestureRecognizer *)recognizer
{
    NSLog(@"Rotate Item");

    float ang = atan2([recognizer locationInView:self.superview].y - self.center.y, [recognizer locationInView:self.superview].x - self.center.x);

    float angleDiff = deltaAngle - ang;
    self.transform = CGAffineTransformRotate(startTransform, -angleDiff);

    CGFloat radians = atan2f(self.transform.b, self.transform.a);
    NSLog(@"rad is %f", radians);
}

#pragma mark - Touch Methods

- (BOOL)gestureRecognizerShouldBegin:(UIPanGestureRecognizer *)recognizer
{

    if (recognizer == rotateGesture) {
        NSLog(@"rotate gesture started");

        deltaAngle = atan2([recognizer locationInView:self].y-self.center.y, [recognizer locationInView:self].x-self.center.x);

        startTransform = self.transform;
    }

    return YES;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T20:24:38.317

我做了一些记录，似乎我的 uiview 的中心在触摸拖动事件期间发生了变化。因此，我使用 touches started 方法存储了 uiview 的中心并使用它来代替。

```
- (void)rotateItem:(UIPanGestureRecognizer *)recognizer
    {
        NSLog(@"Rotate Item");

        CGPoint superPoint = [self convertPoint:itemCenter toView:self.superview];

        float ang = atan2([recognizer locationInView:self.superview].y - superPoint.y, [recognizer locationInView:self.superview].x - superPoint.x);

        float angleDiff = deltaAngle - ang;
        self.transform = CGAffineTransformRotate(startTransform, -angleDiff);

    }

    #pragma mark - Touch Methods

    - (BOOL)gestureRecognizerShouldBegin:(UIPanGestureRecognizer *)recognizer
    {

        if (recognizer == rotateGesture) {
            NSLog(@"rotate gesture started");

            deltaAngle = atan2([recognizer locationInView:self.superview].y-self.center.y, [recognizer locationInView:self.superview].x-self.center.x);

            startTransform = self.transform;
        }

        return YES;
    } 
```

# c++ - 我要抛出异常吗？

> ID：11368434
> 
> 赞同：0
> 
> 时间：2012-07-06T19:20:08.040
> 
> 标签：c++, exception

假设我有一个类的静态方法，它返回一个与我的类相同类型的对象。例如，要创建对象，此方法必须解析一个字符串：

```
class C
{
public:

   static C get_obj(const std::string& str)
   {
      C obj;
      // Parse the string and set obj properties
      return obj;
   }
}; 
```

如果在解析字符串时出现错误并且无法将对象构造为有效对象，我是否应该抛出异常或其他什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T19:23:44.613

我会说你应该抛出一个异常。这样你通知客户端无法获取 obj，并强制他处理。

如果不重要（不重要），您可以返回一个特殊`C`值，该值将充当指示出现问题的标记值。客户将选择是否对其进行处理。

我会例外。不推荐第二种方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T19:26:15.827

鉴于有失败的可能性，`get_obj`必须以某种方式将失败报告回调用者。这通常由

*   抛出异常
*   在方法的输出中传达故障

在这种特殊情况下，该方法的唯一输出是一个`C`实例。鉴于抛出异常可能是此签名方法的最佳选择。唯一的其他选择是将成功/失败嵌入到`C`您几乎肯定不想做的对象中。

解决这个问题的另一种方法是`try_parse`模式。让`bool`返回指示成功/失败，并通过引用参数返回构造对象成功

```
bool try_parse(const std::string& str, C& obj) {
  if (string is valid) { 
    obj = C(...);
    return true;
  }

  return false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T19:22:16.810

是的，抛出异常是完全有效的。与构造对象时的相同原因，如果您无法继续构造对象，您别无选择，只能抛出异常。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-06T19:22:03.780

是的，您确实需要抛出异常。

```
class C
{
public:

   static C get_obj(const std::string& str)
   {
      try
      {
          C obj;
          // Parse the string and set obj properties
          return obj;
      }
      catch (int x)
      {
        cout "blahblah";
      }
   }
}; 
```

如果无法构造对象，您将面临 0 变量的风险，这可能会进一步导致很多麻烦

# c++ - 将 minheap.top 移动到 maxheap.top ，其中 maxheap.top <= minheap.top

> ID：11368437
> 
> 赞同：0
> 
> 时间：2012-07-06T19:20:26.577
> 
> 标签：c++, algorithm, data-structures

我有一个 maxheap 和一个 minheap，其中 maxheap 的最大元素小于或等于 minheap 的最小元素。

我现在想移动 minheap 的最小元素成为 maxheap 的最大元素。

一种方法是弹出 minheap 的顶部元素并将其推送到 maxheap 上。

有没有更有效的方法来做到这一点？

**这是我最终做的事情**：

我实际上必须在 minheap 中插入一个元素，然后执行上述操作，我做了以下操作：

```
// place value to insert at end of minheap
mintoph[mintoph_size] = R;

// use std::pop_heap, minimum element now at end
pop_heap(mintoph.begin(), mintoph.begin() + mintoph_size + 1, greater<int>());

// (*) make room in maxheap at top
for (int pos = maxboth_size++; pos > 0;)
{
    int parent = (pos - 1) / 2;
    maxboth[pos] = maxboth[parent];
    pos = parent;
}

// move element from back of minheap to maxheap head
maxboth[0] = mintoph[mintoph_size]; 
```

`(*)`由于父母被降级为孩子，因此在上述步骤中已经有偿比较是一种浪费，但我认为这是不可避免的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T22:09:13.377

当您知道要插入的元素小于/大于最小值/最大值时，您真正需要的是一种插入优先级队列的有效方法，具体取决于这是最小堆还是最大堆。对于传统的“堆”数据结构，这需要 O(log n) 时间。

但是，如果您愿意为您的优先级队列使用与传统“堆”数据结构不同的表示，那么这样的插入可以轻松地在 O(1) 时间内运行。许多不同类型的优先级队列都可以做到这一点，例如左倾堆、倾斜堆或配对堆。

编辑：当然，您仍然需要支付从原始优先级队列中删除的费用，这可能是 O(log n) 无论如何，尽管有一些方法也可能对此有所帮助，例如“延迟删除” .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T23:05:48.220

使用 min-max-heap 或 treap 可能会为您提供最佳服务。min-max-heap 似乎是为你正在做的事情量身定做的，但是treaps 非常全面，它们也可能工作得很好——特别是如果你需要的不仅仅是查找最小值和最大值以及添加值。

[http://en.wikipedia.org/wiki/Min-max_heap](http://en.wikipedia.org/wiki/Min-max_heap)

[http://en.wikipedia.org/wiki/Treap](http://en.wikipedia.org/wiki/Treap)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-06T19:25:24.937

使用 min-max heap，它是一个双端优先级队列，你可以在 o(lgn) 中做这件事，你不能在小于 O(lgn) 的时间内做

但是您可以使用它们在 o(1) 中插入的分摊算法，例如斐波那契堆，

# xcode - 我可以在运行时禁用特定子视图的自动布局吗？

> ID：11368440
> 
> 赞同：107
> 
> 时间：2012-07-06T19:20:35.113
> 
> 标签：xcode, xcode4, interface-builder, xcode4.3, autolayout

我有一个需要以编程方式操作其框架的视图 - 它是一种包含其内容的文档视图，然后通过操作框架原点围绕超级视图滚动和缩放。自动布局在运行时与此作斗争。

完全禁用自动布局似乎有点苛刻，因为它可以合理地用于处理其他视图的布局。似乎我可能想要的是某种“空约束”。

* * *

## 回答 #1

> 赞同：171
> 
> 时间：2013-03-06T08:10:04.353

我有同样的问题。但我已经解决了。
是的，您可以在运行时为特定`UIView`的 .

设置`translatesAutoresizingMaskIntoConstraints`为`YES`, 在设置子视图的框架之前：

```
self.exampleView.translatesAutoresizingMaskIntoConstraints = YES;
self.exampleView.frame = CGRectMake(20, 20, 50, 50); 
```

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2012-11-28T20:02:58.700

我有一个类似的问题，即 Autolayout 在运行时覆盖了我的一些框架设置（我有一个动态视图，在某些情况下会推送一个新的视图控制器......推送然后按 Back 将重置初始视图）。

我通过将我的操作代码放入`viewDidLayoutSubviews`我的视图控制器来解决这个问题。这似乎在调用任何约束 mojo 之后被调用，但在 viewDidAppear 之前，所以用户并不聪明。

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2012-09-21T21:02:15.440

也许只是设置`translatesAutoresizingMaskIntoConstraints`为`YES`（而不是添加影响该视图的其他约束）可以让您设置框架而不会与自动布局系统发生冲突。

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2014-12-31T21:09:50.107

在 iOS 8 中，您可以将 NSLayoutConstraint 设置为活动或不活动。因此，如果我使用的是界面生成器，我会将所有约束添加到 OutletCollection，然后使用以下命令激活或停用：

```
NSLayoutConstraint.deactivateConstraints(self.landscapeConstraintsPad)
NSLayoutConstraint.activateConstraints(self.portraitConstraintsPad) 
```

我在这里使用的特定应用程序在纵向和横向模式下具有不同的约束，并且我根据设备的旋转来激活/停用。这意味着我可以在界面构建器中为两个方向创建一些复杂的布局更改，并且仍然使用自动布局而没有冗长的自动布局代码。

或者您可以使用 removeConstraints 和 addConstraints 激活/停用。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2014-07-01T02:40:42.200

我不知道这是否对其他人有帮助，但我写了一个类别来方便这一点，因为我发现自己经常这样做。

UIView+DisableAutolayoutTemporarily.h

```
#import <UIKit/UIKit.h>

@interface UIView (DisableAutolayoutTemporarily)

// the view as a parameter is a convenience so we don't have to always
// guard against strong-reference cycles
- (void)resizeWithBlock:(void (^)(UIView *view))block;

@end 
```

UIView+DisableAutolayoutTemporarily.m

```
#import "UIView+DisableAutoResizeTemporarily.h"
@implementation UIView (DisableAutoResizeTemporarily)

- (void)resizeWithBlock:(void (^)(UIView * view))block
{
    UIView *superview = self.superview;
    [self removeFromSuperview];
    [self setTranslatesAutoresizingMaskIntoConstraints:YES];
    __weak UIView *weakSelf = self;
    block(weakSelf);
    [superview addSubview:self];
}

@end 
```

我这样使用它：

```
[cell.argumentLabel resizeWithBlock:^(UIView *view) {
    [view setFrame:frame];
}]; 
```

希望能帮助到你。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2014-03-11T18:41:39.850

您可以在 xib/storyboard 中设置所需的 UIView 的用户定义运行时属性中的`translatesAutoresizingMaskIntoConstraints`类型、值是。`Boolean`

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-01-16T06:47:45.513

在我看来，我有一个标签和一个文本。标签有平移手势。标签在拖动过程中可以很好地移动。但是当我使用文本框键盘时，标签会将其位置重置为自动布局中定义的原始位置。当我为标签快速添加以下内容时，问题得到了解决。我在 viewWillAppear 中添加了它，但它几乎可以添加到您可以访问目标字段的任何地方。

```
self.captionUILabel.translatesAutoresizingMaskIntoConstraints = true 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-07-30T22:31:48.040

*   在 4.5 中打开项目
*   选择故事板
*   打开文件检查器
*   在界面生成器文档下取消选中“使用自动布局”

如果您想对某些视图使用自动布局，您可以拆分多个故事板。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-06-19T19:19:52.083

我遇到过类似的情况，我加入了一个使用自动布局启动的项目，但我需要对几个视图进行动态调整。这对我有用：

1.  不要在界面生成器中布置视图或组件。

2.  从 alloc/init 开始纯粹以编程方式添加您的视图并适当地设置它们的框架。

3.  完毕。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-01-20T01:48:15.607

对我来说，它以编程方式创建子视图，在我的情况下，自动布局弄乱了我需要围绕其中心旋转的视图，但是一旦我以编程方式创建了这个视图，它就起作用了。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-02-04T20:57:30.500

这发生在我没有故事板或 xib 文件的项目中。所有 100% 代码。我在底部有一个广告横幅，并希望视图边界停止在广告横幅上。加载后视图会自动调整大小。我尝试了此页面上的所有解决方案，但没有一个有效。

我最终只是创建了一个高度缩短的子视图，并将其放入控制器的主视图中。然后我所有的内容都进入了子视图。这很容易解决了这个问题，而没有做任何违背常规的事情。

我在想，如果您想要的视图不是填充窗口的正常大小，那么您应该为此使用子视图。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-05-26T20:56:31.157

我不会禁用自动布局，而是使用您要替换的框架计算新约束。在我看来，这似乎是合适的方式。如果您正在调整依赖于约束的组件，请相应地调整它们。

例如，如果您在两个视图（myView 和 otherView）之间的垂直约束为 0，并且您有一个平移手势或调整 myView 高度的东西，那么您可以使用调整后的值重新计算约束。

```
self.verticalConstraint.constant = newMyViewYOriginValue - (self.otherView.frame.origin.y + self.otherView.frame.size.height);
[self.myView needsUpdateConstraints]; 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-06-06T21:56:01.647

对于那些使用自动布局的人，请[在此处](https://stackoverflow.com/questions/30687731/moving-a-textfield-with-auto-layout-constraints-when-the-keyboard-appears)查看我的解决方案。您应该制作`@IBOutlet`您想要调整的约束，然后更改它们的常量。

* * *

## 回答 #14

> 赞同：-16
> 
> 时间：2012-12-03T13:32:43.917

如果是 xib 文件：

1.  选择 .xib 文件
2.  选择“文件的所有者”
3.  显示实用程序
4.  点击：“文件检查器”
5.  在“界面生成器文档”下禁用：“使用自动布局”

# jquery - jQuery缩放去除边框

> ID：11368445
> 
> 赞同：1
> 
> 时间：2012-07-06T19:20:47.140
> 
> 标签：jquery, html, css, scale

任何人都知道为什么jquery scale在缩小div时会删除div的右下边框？有解决办法吗？

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Game</title>
<link rel="stylesheet" type="text/css" href="inc/css/global.css" />
<script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js" type="text/javascript"></script>

<style>
.hit-wraooer { position: relative;}
#hit { height: 98px; width: 98px; margin: 300px auto; border: 1px solid #000; }
.box { height: 600px; width: 600px; position: absolute; top: 55px; left: 500px; z-index:-1;}
.inside-box { height: 598px; width: 598px; border: 1px solid #000; position:relative; z-index:-1;border: 5px solid #000;}

</style>
</head>
<body>
<script type="text/javascript">

$(document).ready(function(){

    var myvar;

    $("#clickme").click(function(){
        myvar = setInterval(function(){toggle()}, 2000);
    });

    function toggle(){  
        $(".box").show();
        $(".box").toggle( "scale", {scale: 'box'}, 5000 );
        clearInterval(myvar);
    }

    $("#hit").click(function(){
            var alertme = $(".box").offset();
            var alertme2 = $("#hit").offset();
            if (alertme.top > alertme2.top){
                alert("hit");
            }
            else if (alertme.top < alertme2.top){
                alert("missed");
            }
    });
});
</script>
  <div class="box">
    <div class="inside-box"></div>
  </div>

  <div class="hit-wrapper">
    <div id="hit"></div>
  </div>

<a id="clickme" href="javascript:void(0)">Click Me</a>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T19:30:21.627

那是因为你的边框在 中`.inside-box`，当你调整它的包装器大小时，它会被剪掉。

从to传递`border`CSS，它将按预期工作。`.inside-box``.box`

现场演示：[**故障**](http://jsfiddle.net/ult_combo/qetGd/3/)-[**工作**](http://jsfiddle.net/ult_combo/qetGd/4/)。

# perl - Perl - 如果没有在脚本调用之前显式放置“perl”，则无法获取命令行参数

> ID：11368446
> 
> 赞同：1
> 
> 时间：2012-07-06T19:20:54.777
> 
> 标签：perl, visual-studio-2005, command-line-arguments, command-prompt, file-association

我在 Win7 x64 上运行 ActivePerl 5.8.8 build 822。我们正在开发一个大约 60% 的 C++、15% 的 perl 等的项目。Perl 被大量用于将零碎和各种小型实用程序应用程序链接在一起，以创建和打包我们的最终数据。因此，例如，我们的 VS2005 解决方案具有构建后事件以使用构建后 perl 脚本创建到 DLL 的硬链接，该脚本位于我们开发驱动器上的某个位置（它是 PATH env var 的一部分）。

我很快发现，如果没有在 postbuild.pl 脚本调用前面显式放置“perl”来调用解释器，它就不会接受命令行参数。我只是通过转到 cmd 窗口并使用“hello world”样式的 perl 脚本来进一步测试这一点。当我说“bleh.pl arg1 arg2”时，没有传入命令行参数。但是当我说“perl bleh.pl arg1 arg2”时，我得到了命令行参数。

当这个失败发生时，perl 读取零个命令行参数，并且@ARGV 变量为空或 null（不管这个疯狂的语言做什么）。所以他们根本没有通过。

这是一个问题，因为对 perl 脚本的调用有数百甚至数千次，我担心它们的行为不正确，并且认为我应该明确地为每个 .pl 脚本调用加上 perl 前缀是不合理的，更不用说我们是使用版本控制，我不想提交所有这些垃圾更改，也不想在我的存储中管理它们。

PERL env var 存在并指向 perl 二进制文件所在的文件夹。以及 PATHEXT 中的 .PL 用于 perl 脚本。同样，我的 PATH 包含用于访问脚本和 perl 的文件夹条目。

任何有关如何解决这个问题的帮助将不胜感激！此外，当我安装 ActivePerl 时（我已经做了很多次试图弄清楚这一点）。我允许它更改我的路径并在 Windows 中关联文件扩展名，您认为这将是解决方案。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T19:43:55.700

您的关联已损坏（不完整）。首先，打开一个控制台并执行

```
assoc .pl 
```

你会得到类似的东西

```
.pl=SOMETHING 
```

然后，执行

```
ftype SOMETHING 
```

你应该得到类似的东西

```
SOMETHING="C:\SOMEWHERE\bin\perl.exe" "%1" %* 
```

但你会得到类似下面的东西：

```
SOMETHING="C:\SOMEWHERE\bin\perl.exe" "%1" 
```

要修复它，请执行

```
ftype SOMETHING="C:\SOMEWHERE\bin\perl.exe" "%1" %* 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T19:53:14.167

尝试搜索更多。这个[问题](https://stackoverflow.com/questions/4234581/argv-is-empty-using-activeperl-in-windows-7)有你的答案。

# silverlight - 如何在 Silverlight 应用程序中获取托管网站 url？

> ID：11368449
> 
> 赞同：10
> 
> 时间：2012-07-06T19:21:14.020
> 
> 标签：silverlight, silverlight-4.0, silverlight-5.0

Silverlight 应用程序托管在一个网站上。如何在 silverlight 应用程序代码中获取托管 url？例如，如果托管站点是`http://mysite/startingpage.aspx`，那么如何在 SL 应用程序代码中获取“http://mysite”？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-06T19:29:19.320

这将为您提供托管`.xap`文件的页面的位置：

```
var pageUri = System.Windows.Browser.HtmlPage.Document.DocumentUri.ToString(); 
```

这将为您提供`.xap`文件的位置：

```
var applicationUri = System.Windows.Application.Current.Host.Source.AbsoluteUri; 
```

然后，您可以获取这些字符串中的任何一个并解析出您不需要的部分。

# android - android opencv中的Posit算法

> ID：11368450
> 
> 赞同：0
> 
> 时间：2012-07-06T19:21:19.167
> 
> 标签：android, opencv, tracking, augmented-reality

我一直在网上和 android opencv 源代码中查找，但我不知道 Posit 算法 opencv 方法在哪里。有谁知道他们在opencv的源代码中的位置？

我检查了以下链接声称的位置：

[https://code.google.com/p/viewercv/source/browse/android-opencv/opencv/modules/calib3d/src/posit.cpp?r=fdcf3fdbac4cccbb0eefd55db5c8acd86ca78bb7](https://code.google.com/p/viewercv/source/browse/android-opencv/opencv/modules/calib3d/src/posit.cpp?r=fdcf3fdbac4cccbb0eefd55db5c8acd86ca78bb7)

但我还是找不到。有谁知道我如何使用链接中的代码自己构建它？希望我只是忽略了android opencv中的一些东西。

我也找不到 cvFindExtrinsicCameraParams2()。

**更新

cvFindExtrinsicCameraParams2在opencv的c++实现中已经重命名为solvePnP；但是，我仍然不知道位置算法在哪里。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T19:03:18.313

opencv 中的 SolvePnp 从 posit 算法中完成了我需要的一切

# javascript - 找到控件的 parent()，然后 find("a") JQuery

> ID：11368451
> 
> 赞同：0
> 
> 时间：2012-07-06T19:21:35.363
> 
> 标签：javascript, jquery

我有一个`<td>`看起来像这样的东西：

```
<td class="myTDClass">
    <span class="spanClass">Header</span>
    <br />
    <img class='myImages' style='cursor: hand;' onclick='doSomething(control)' alt='this is my alt Text'></img>
    <br />
    <span style="color: #123456;">More Text</span>
    <br />
    <a class='findThisClass'>Insert Alt Text Here</a>
</td> 
```

这会调用一些 jQuery 代码，将 alt 标记设置为一些新文本。然后，我希望它将`<a>`元素设置为一些新文本。这是jQuery代码：

```
doSomething = function(control)
  {
    var $myControl = $(control);
    $myControl.attr("alt", "This is the new Alt Text!");

    var $newControl = $(control).parent().siblings().find(".findThisClass").first();
    alert($newControl.find("a").text());
  }); 
```

jQuery 代码很好地设置了 alt 标签，但没有找到`<a class=findThisClass />`.

我想我用`.parent()`错`.siblings()`了。谁能找到我的错误？这里的想法是我可以*只*`<td>`在元素内部搜索`<a>`，而不触及其他元素中的其他`<td>`元素

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T19:25:42.047

试试这个：

```
var $newControl = $(control).closest('.myTDClass').find(".findThisClass");
alert($newControl.text()); 
```

也是`img`自闭标签，而不是：

```
<img></img> 
```

只需使用：

```
<img... /> 
```

而不是：

```
onclick='doSomething(control)' 
```

利用：

```
onclick='doSomething(this)' 
```

所以 jQuery 真的有一个可以使用的控件:)

## [工作示例](http://jsbin.com/ebawow)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T19:26:21.123

假设您想找到与`<a>`您相同的表格单元格中的那个`<img>`，您不需要使用`parent()`. 您需要做的就是调用`.siblings`Try：

```
var $newControl = $(control).siblings('a.findThisClass').first(); 
```

这假定`control`指向表格单元格内的图像。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-06T19:26:30.877

```
$("a.findThisClass", $myControl).first() 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-06T19:26:34.587

`a`是图像的兄弟，所以，简单地说：

```
$(control).siblings(".findThisClass") 
```

# php - 聊天实现 curl

> ID：11368452
> 
> 赞同：0
> 
> 时间：2012-07-06T19:21:45.823
> 
> 标签：php, javascript, html, ajax, curl

我只是想设计一个聊天应用程序，它允许两个域的用户之间的跨域聊天，即允许创建聊天室和聊天。所以，我被建议使用 curl 和 ajax。但我不知道我该怎么做，而且对 curl 也不太了解。我知道它用于使用 HTTP 和各种协议在域之间传输文件/数据。但我有疑问，如何通过登录检查在域之间传输消息。当我用谷歌搜索时，我发现了以下代码片段，但无法理解。CURL_SSL_VERIFYPEER 是否对域进行验证并仅重定向授权的域？请解释一下 curl_setopt($ch, CURLOPT_POSTFIELDS,"user_name=$user_name&cmd=$send_cmd&domain=$my_domain");

```
// code snippet //

$ch = curl_init();
         curl_setopt($ch, CURLOPT_URL, $url);
         curl_setopt($ch,CURLOPT_SSL_VERIFYPEER,false);
         curl_setopt($ch,CURLOPT_FAILONERROR,1);
         curl_setopt($ch,CURLOPT_FOLLOWLOCATION,1);
         curl_setopt($ch, CURLOPT_POST, 1); 
         curl_setopt($ch, CURLOPT_POSTFIELDS,"user_name=$user_name&cmd=$send_cmd&domain=$my_domain");
         $res = curl_exec($ch);
         curl_close($ch); 
```

2）我的第二个问题是我想在这里使用会话变量，所以使用 $_SESSION。我开始知道，每当我们在页面中使用会话变量时，我们都需要使用 session_start(); 但是为什么即使我没有在顶部使用 session_start() 它也能正常工作？我刚刚给出了以下代码

```
// code //
require_once 'db_connect.php';

if (isset($_SESSION ['user_id']) && !empty($_SESSION ['user_id']))
{

    echo '<p align="center">Hi, '.$_SESSION ['first_name'].'</p>';
    $u_name = $_SESSION['user_name'];
    include 'home.php';
}
else
{
//some stmt
}

/*******home.php file ****/

<?php
require_once 'dbconnect.php';
$_SESSION['username'] = $u_name;

?> 
```

在上面我没有使用任何 session_start() 也没有使用 GET 或 POST 获取变量，但即便如此 $u_name 是如何传递给 home.php 页面的？

3）下面的语句是做什么的？

```
echo '<link rel="stylesheet" type="text/css" href="bck_ground.css" />'; 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T21:07:48.337

我不确定“允许两个域的用户创建聊天室和聊天”的确切含义，但如果您需要跨域 ajax 请求，请检查`Access-Control-Allow-Origin`标题。所有现代浏览器都支持它。

如果您仍然需要支持较旧的浏览器，您可以将 ajax 请求从一个域代理到另一个域。至于我，您根本不需要 PHP - 例如，您可以将代理规则放入其中`.htaccess`。

# excel - 呈现一个 Excel 公式，这样您就不再需要其他列了吗？

> ID：11368454
> 
> 赞同：0
> 
> 时间：2012-07-06T19:21:54.923
> 
> 标签：excel

是否可以让 Excel 呈现公式的结果，以便我可以删除派生数据的额外列？

我正在连接几列，一旦我的最后一列包含我想要的最终值，我想杀死旧的。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-06T19:30:15.293

如果您确实确定不再需要旧数据，则只需复制整个结果列，选择`Paste Special->Paste as Values`.

您将丢失公式，但您的列将被公式计算的结果替换。

但是，隐藏旧列可能是一种更好的做法，如果您删除所有源数据然后发现轻微的公式错误或拼写错误，您会后悔的。

# c++ - c++ 使用来自另一个类的枚举

> ID：11368455
> 
> 赞同：1
> 
> 时间：2012-07-06T19:21:57.897
> 
> 标签：c++, .net, dword

我创建了一个类`Adresy`：

```
class Adresy {
    public:
        static const DWORD hp = 0x947000;
        static const DWORD mp = 0x7B2084;
        static const DWORD cap = 0x97EE94;
        enum Flags
        {
            None = 0,
            Poisoned = 1,
            Burning = 2,
            ProtectedByMagicShield = 16
        };
}; 
```

当我尝试在此示例中使用它时：

```
if(( (DWORD) adr.ProtectedByMagicShield & pFlags) == (DWORD) ProtectedByMagicShield){
//...
} 
```

它说抛出错误：`'ProtectedByMagicShield' : undeclared identifier...`

`pFlags`是一个`DWORD`，我正在使用 C++.NET。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T19:27:59.227

```
if(( (DWORD) Adresy::ProtectedByMagicShield & pFlags) == (DWORD) Adresy::ProtectedByMagicShield){
    //...
} 
```

您需要使用类名和范围标记 (::) 来访问枚举的值。

这是因为枚举不归类的任何特定实例所有，而是归类本身所有，就像静态 const 成员一样。

# android - android如何知道哪个countDownTimer在特定时间工作

> ID：11368456
> 
> 赞同：0
> 
> 时间：2012-07-06T19:22:01.187
> 
> 标签：android

我正在构建一个应用程序来接收一个有四个选项的问题，我会给用户时间阅读这些选项，然后（阅读后）我将开始从他那里拿分数，两个 countDownTimers 是`TimeToAnswerWithFourChoices`和`TimeToReadChoices`

如果用户在计时器读取选项时选择选择并回答，我会将其设置`answeredTime`为零，那么我如何知道哪个计时器在特定时间工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T19:45:37.653

设置两个布尔变量 TimeToAnswerWithFourChoicesIsRunning（或缩短这个史诗长变量名称）和 TimeToReadChoicesIsRunning。将两个变量都初始化为“false”。将两个计时器放在自己的方法中。启动该方法时，将相应的布尔值设置为 true。当计数器完成滴答时，让它调用一个方法将布尔值设置为 false。通过这种方式，您将能够可靠地查询计时器是否正在运行。请务必将您的计时器变量设置为私有，以便仅通过调用相应的开始和停止方法来更改它们。

# ruby - 在 heroku 上安装 MaxMind GeoIP ruby 库

> ID：11368461
> 
> 赞同：0
> 
> 时间：2012-07-06T19:22:12.710
> 
> 标签：ruby, heroku, geoip

我有一个在 heroku 上运行的 Rails 应用程序。现在我想运行一个 rake 任务（它使用我的 rails 应用程序的模型）并使用 MaxMind GeoIP 数据库（[http://www.maxmind.com/app/geolite](http://www.maxmind.com/app/geolite)）对每条记录进行地理标记。

在 Ruby 应用程序中使用此数据库涉及：

1.  构建它的 C-API ( [http://www.maxmind.com/app/c](http://www.maxmind.com/app/c) ) 然后
2.  为此构建 Ruby 绑定 ( [http://www.maxmind.com/app/ruby](http://www.maxmind.com/app/ruby) )。

我可以在我的本地机器上执行此操作，并成功地从 IP 地址获取国家代码。但是我不知道如何在 Heroku 上安装这些库。据我了解，ruby 绑定不能作为具有本机扩展的 gem（heroku 可以很好地处理）。此外，他们的 C-API 似乎还有一些其他依赖项，这让我想知道这样的事情是否可能发生。

那么有人在 Heroku 上安装了 MaxMind GeoIP（又名 Net::GeoIP）吗？如果是怎么办？

通过将本地设置指向生产数据库，我可以从笔记本电脑运行 rake 任务。在此之前，我想知道是否可以从 Heroku 设置本身运行它以避免延迟或连接中断等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T19:41:20.390

我找到了一个 gem，它捆绑了 MaxMind C-API 并提供了它自己的 Ruby API。它工作得很好 - [http://rubygems.org/gems/geoip](http://rubygems.org/gems/geoip)

我将暂时接受这个作为答案。但是，如果有人能告诉我如何在 Heroku 上为 Ruby 安装二进制扩展，那就太好了。

# android - 如何在 Android 的 Java 代码中创建 EditText？

> ID：11368462
> 
> 赞同：2
> 
> 时间：2012-07-06T19:22:13.827
> 
> 标签：android

我只使用 Java 代码制作了我的第一个 Android 应用程序。如何在 Java 代码中创建 EditText？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T19:27:04.447

或多或少是这样的：

```
EditText et = new EditTex(context); 
```

`context`例如，`Activity`托管`EditText`. 在实践中，您可能想要进行一些自定义，然后将其附加到现有布局，例如

```
EditText et = new EditText(getActivity());
et.setTextAppearance(getActivity(),R.style.table_cell); // add some style
et.setTag(name);  // add a tag

if(PropertyType.isNumeric(spd.getType())) {
     et.setInputType(InputType.TYPE_NUMBER_FLAG_DECIMAL); // Input are numbers only
}

if (spd.getDefaultValue()!=null) {
        et.setText(""+spd.getDefaultValue()); // set a default text to be displayed
}
row.addView(et); // add it to a parent 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T19:29:53.213

将其格式化为 XML 后：

```
<EditText
     android:id="@+id/edittextid"
     android:inputType="text" > 
```

您可以通过声明它并将其链接到您在 XML 中指定的视图来调用它，如下所示：

```
EditText et = (EditText)view.findViewById(R.id.edittextid); 
```

您可以在[此处获取有关该课程的更多信息](http://developer.android.com/reference/android/widget/EditText.html)

# node.js - 从 Stingray 负载均衡器后面的 Node.js 获取客户端 IP

> ID：11368466
> 
> 赞同：0
> 
> 时间：2012-07-06T19:22:27.617
> 
> 标签：node.js, express, load-balancing

我们在 stingray 负载均衡器后面运行多个节点实例。我们的 node.js 应用程序运行 Express.js。当我们访问`req.connection.remoteAddress`它时，它会返回我们的 stingray 设备的 IP。

有谁知道如何转发客户端IP？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T20:39:22.763

如果此信息没有过期，则 X-Cluster-Client-Ip 标头应包含原始 ip。

```
var remoteAddress = req.header('X-Cluster-Client-Ip'); 
```

此处引用了其他选项：

[http://community.riverbed.com/t5/Articles/IP-Transparency-with-Stingray-software-04-12-2006/td-p/22646](http://community.riverbed.com/t5/Articles/IP-Transparency-with-Stingray-software-04-12-2006/td-p/22646)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-14T13:35:09.897

已接受答案中的链接不再有效，因此只需添加一点，如果您在 Stingray 级别启用透明度选项，则请求将像来自原始 IP 而不是负载均衡器一样查看后端。这样您就可以避免从其他环境变量中提取它，并避免可能不得不处理一个变量中的多个“原始”IP。

“透明”选项位于池的连接管理属性中。

# android - 是否可以使用 Dexmaker 覆盖现有类中的方法？

> ID：11368468
> 
> 赞同：1
> 
> 时间：2012-07-06T19:22:42.140
> 
> 标签：android, bytecode-manipulation, dex

是否可以在运行时通过代理或生成代码来更改已经使用[Dexmaker加载的类的方法的行为？](http://code.google.com/p/dexmaker/)

**更新**

只是一句话：我想从我自己的应用程序中添加一个方法/修改现有的方法，而不是从 android 框架。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T22:12:54.617

不，这是不可能的。

您可以创建一个扩展原始类的新类，或者甚至可以制作该类的副本，使用新名称和经过调整的实现。但是你不能替换现有的类。

您最好的选择可能是将您可能想要修改的代码提取到一个单独的类中，然后将该类的一个实例传递给任何使用它的对象。然后，如果您需要创建一个新的实现，您可以将其子类化并传入子类。

# python - 从合法编号模式中删除闯入者

> ID：11368471
> 
> 赞同：-4
> 
> 时间：2012-07-06T19:23:09.200
> 
> 标签：python, algorithm, pattern-matching

我有一个遵循[法定编号](http://www.dcs.bbk.ac.uk/~keith/Word/exercises/exercise4/exercise5/files/stacks_image_55-legal-numbering.jpg)方案的号码列表

列表如下所示 -

```
['1', '1', '1.1', '1.2', '1.3', '1.4', '1.5', '2', '1.6', '2', '2.1', '2.2', '2.3', '2.4', '3', '2.5', '3', '3.1', '3.2', '4', '5', '4', '6', '6.1', '6.2', '9333', '6.3', '6.4', '5', '6.5', '6.6', '6.7', '6.8', '6.9', '6.10', '6', '7'] 
```

但是，此列表中有***“整数”***闯入者（与方案不一致的数字）。例如列表顶部的第一个“1”，在“1.6”之前的“2​​”。是否有已知的算法或模式来识别不一致的数字并将它们从列表中删除？

**编辑**：由于某些人不清楚这个问题，我发布了一个合法编号的方案是什么样的：

```
['1','1.1','1.2','1.3','2','2.1','3','3.1','3.2'....] 
```

但是请注意，我无法将其与静态列表进行比较，因为这只是一个编号方案。'2' 后面可以跟着 '2.1' 然后回到 '3' 或者可以跟着 '2.1','2.2' 然后回到 '3'。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T20:35:32.870

```
for a,b in zip(mylist, mylist[1:]):
    if a==b:
        print('Value {} is repeated'.format(a))
    elif a > b:
        print('Either {} or {} is out of order'.format(a,b)) 
```

根据您的数据，这给出了

```
Value 1 is repeated
Either 2 or 1.6 is out of order
Either 3 or 2.5 is out of order
Either 5 or 4 is out of order
Either 9333 or 6.3 is out of order
Either 6.4 or 5 is out of order
Either 6.9 or 6.10 is out of order
Either 6.10 or 6 is out of order 
```

或者，

```
mylist = sorted(set(mylist)) 
```

自动删除重复项并将所有内容整理好。

**编辑：** Mark Byers 提出了一个很好的观点，即 6.9 / 6.10 排序不正确；我看到的唯一解决方案是解析字符串，以便我们比较整数，如下所示：

```
mylist = sorted(set(mylist), key=lambda s:map(int, s.split('.'))) 
```

结果是

```
['1', '1.1', '1.2', '1.3', '1.4', '1.5', '1.6', '2', '2.1', '2.2', '2.3', '2.4', '2.5', '3', '3.1', '3.2', '4', '5', '6', '6.1', '6.2', '6.3', '6.4', '6.5', '6.6', '6.7', '6.8', '6.9', '6.10', '7', '9333'] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T19:34:49.907

您基本上想将其与列表的排序版本进行比较

```
for a, b in zip(numbers, sorted(numbers, key=lambda x: x.split('.'))):
    if a != b:
       print('error at ' + a)
       # or do something else 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-08T12:07:32.193

尝试这个：

```
def get_next_dotted_term(s, i):
    for x in s[i + 1:]:
        if '.' in x:
            return int(x.partition('.')[0])

def make_valid(s):
    result = []
    current = 0

    for i, x in enumerate(s):
        if '.' in x:
            result.append(x)
        else:
            ix = int(x)
            nextdot = get_next_dotted_term(s, i)
            if current + 1 == ix and (ix <= nextdot or not nextdot):
                result.append(x)
                current += 1
            else:
                print "Error: " + x
    return result

print make_valid(['1','1.1','2','1.2','2','3','3.1','3.2','4','3.3','3.4']) 
```

结果：

```
错误：2
错误：4
['1', '1.1', '1.2', '2', '3', '3.1', '3.2', '3.3', '3.4']

```

# javascript - 使用 javascript/jquery 动态调整画布窗口大小？

> ID：11368477
> 
> 赞同：22
> 
> 时间：2012-07-06T19:23:36.243
> 
> 标签：javascript, jquery, html, canvas

如何使用 javascript/jquery 调整画布的大小？

使用 css 函数调整大小并将其应用于画布元素只会拉伸内容，就像拉伸图像一样。

如果没有拉伸，我将如何做呢？

[http://jsfiddle.net/re8KU/4/](http://jsfiddle.net/re8KU/4/)

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-06T19:39:01.600

制作一个绘制函数，然后在需要它的更改时重新绘制（如页面大小调整等）。[试试看](http://jsfiddle.net/re8KU/12/)

[确保设置 context.canvas.width/height](https://stackoverflow.com/questions/1664785/html5-canvas-resize-to-fit-window)，而不是 CSS 宽度/高度。另请注意，设置大小会清除画布。

**我会怎么写：**

```
(function(){
    var c = $("#canvas"), 
        ctx = c[0].getContext('2d');

    var draw = function(){
        ctx.fillStyle = "#000";
        ctx.fillRect(10,10,50,50);   
    };

    $(function(){
        // set width and height
         ctx.canvas.height = 600;
         ctx.canvas.width = 600;
        // draw
        draw();

        // wait 2 seconds, repeate same process
        setTimeout(function(){
            ctx.canvas.height = 400;
            ctx.canvas.width = 400;
            draw();
        }, 2000)
    });
})(); 
```

​</p>

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-11T16:14:51.243

```
 (function($) {  
        $.fn.extend({  
            //Let the user resize the canvas to the size he/she wants  
            resizeCanvas:  function(w, h) {  
                var c = $(this)[0]  
                c.width = w;  
                c.height = h  
            }  
        })  
    })(jQuery) 
```

使用我创建的这个小功能来随时随地调整大小。以这种方式使用它——

```
$("the canvas element id/class").resizeCanvas(desired width, desired height) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-25T01:46:46.200

每当调整浏览器的大小时，以下解决方案都会根据窗口的尺寸通过创建初始比例来调整画布的尺寸。

jsfiddle：http: [//jsfiddle.net/h6c3rxxf/9/](http://jsfiddle.net/h6c3rxxf/9/)

注意：画布在调整大小时需要重新绘制。

**HTML：**

```
<canvas id="myCanvas" width="300" height="300" > 
```

**CSS：**

```
canvas {
    border: 1px dotted black;
    background: blue;
} 
```

**JavaScript：**

```
(function() {
    // get the precentage of height and width  of the cavas based on the height and width of the window
    getPercentageOfWindow = function() {
        var viewportSize = getViewportSize();
        var canvasSize = getCanvastSize();
        return {
            x: canvasSize.width / (viewportSize.width - 10),
            y: canvasSize.height / (viewportSize.height - 10)
        };
    };
    //get the context of the canvas 
    getCanvasContext = function() {
        return $("#myCanvas")[0].getContext('2d');
    };
    // get viewport size
    getViewportSize = function() {
        return {
            height: window.innerHeight,
            width: window.innerWidth
        };
    };
    // get canvas size
    getCanvastSize = function() {
        var ctx = getCanvasContext();
        return {
            height: ctx.canvas.height,
            width: ctx.canvas.width
        };
    };
    // update canvas size
    updateSizes = function() {
        var viewportSize = getViewportSize();
        var ctx = getCanvasContext();
        ctx.canvas.height = viewportSize.height * percentage.y;
        ctx.canvas.width = viewportSize.width * percentage.x;
    };
    var percentage = getPercentageOfWindow();
    $(window).on('resize', function() {
        updateSizes();
    });
}()); 
```

# javascript - @private 注解在 Google Closure JavaScript 代码中的实际作用是什么？

> ID：11368478
> 
> 赞同：6
> 
> 时间：2012-07-06T19:23:37.543
> 
> 标签：javascript, annotations, google-closure-compiler, google-closure, google-closure-library

当我在变量或函数上方添加评论时，`@private`它实际上在做什么？我已经查看了文档，但我仍然不确定。

```
goog.provide('myproject');

/** @private */
myproject.foo = "bar"; 
```

当我打开 chrome 的开发工具（myproject.foo）时，我仍然可以访问它。和...

```
goog.require('myproject');

window.addEventListener('load', function() {
    //this works.
    document.body.textContent = myproject.foo;
}); 
```

上面的代码仍然将正文 textContent 设置为等于“bar”，即使在编译时也是如此。那么`@private`实际上是做什么的呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T21:55:14.117

访问控制注解`@private`、`@protected`和`@public`是闭包编译器的指令，可帮助开发人员强制执行所需的属性和函数的可见性级别。

要针对访问冲突发出警告，请使用 Compiler 标志：

*   --jscomp_warning=可见性

要为访问冲突发出错误，请使用 Compiler 标志：

*   --jscomp_error=可见性

访问控制注释是在每个文件的基础上强制执行的，这意味着任何属性都被注释`@private`或`@protected`可以在同一文件中的任何位置访问。另请注意，编译器会从编译后的代码中删除这些注释，因为它们不是 JavaScript 语言的一部分。

## 例子

### 文件1.js

```
goog.provide('ns1');

/**
 * Global private variable.
 * @private
 */
ns1.global = 'foo';
alert('ns1.global = ' + ns1.global); // OK in same file.

/** @constructor */
ns1.Constructor = function() {
  /** @private */
  this.secret_ = ns1.global;
};

ns1.instance = new ns1.Constructor();
alert(ns1.instance.secret_); // No warning in same file. 
```

### 文件2.js

```
goog.provide('ns2');

goog.require('ns1');

alert('ns1.global = ' + ns1.global); // Not allowed.

ns2.instance2 = new ns1.Constructor();
alert(ns2.instance2.secret_); // Not allowed. 
```

设置标志`--jscomp_error=visibility`后，闭包编译器会发出以下错误。

```
ERROR - Access to private property global of ns1 not allowed here.
alert('ns1.global = ' + ns1.global);
                        ^
ERROR - Access to private property secret_ of ns1.Constructor not allowed here.
alert(ns2.instance2.secret_);
      ^ 
```

请参阅*Google JavaScript 样式指南*中的[可见性（私有和受保护字段）](https://google.github.io/styleguide/javascriptguide.xml#Visibility__private_and_protected_fields_)。

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T10:13:07.840

cpeisert 在他的回答中暗示了这一点，但要明确一点：这些可见性注释根本不会修改您的输出。

将函数标记为 @private 不会隐藏它或使其在生成的代码中比编译器通常更难访问，并且您在运行时引入的任何第三方代码都将能够调用此类函数。

这些注释提供的唯一访问保护是针对您使用它们编译的代码。*

# database - postgres 数据库和服务器的版本冲突

> ID：11368480
> 
> 赞同：8
> 
> 时间：2012-07-06T19:23:40.190
> 
> 标签：database, postgresql, database-connection, postgresql-9.1

我在 Mac OS X 10.6.x 上安装了 postgres。当我运行 postgres 数据库版本时：

```
psql --versionpsql (PostgreSQL) 9.1.1
contains support for command-line editing 
```

当我检查服务器的版本时：

```
psql -c "select version();"                                                                     version                                                                      
--------------------------------------------------------------------------------------------------------------------------------------------------
 PostgreSQL 9.0.5 on x86_64-apple-darwin10.8.0, compiled by GCC i686-apple-darwin10-gcc-4.2.1 (GCC) 4.2.1 (Apple Inc. build 5666) (dot 3), 64-bit
(1 row) 
```

所以当我跑步时

```
bash-3.2$ psql
psql (9.1.1, server 9.0.5)
WARNING: psql version 9.1, server version 9.0.
         Some psql features might not work. 
```

我不确定这些功能是什么。这些版本相互冲突。我是使用 postgres 的新手，所以我不知道如何只升级 postgres 服务器。我试图在网上搜索一些东西，但没有找到太多帮助。我不想卸载并重新安装 postgres。无论如何我可以同时使用它们而不会发生冲突吗？或者只是将服务器升级到与数据库相同的版本？

编辑：

```
which psql
/opt/local/lib/postgresql91/bin//psql

which postgres
/opt/local/lib/postgresql91/bin//postgres

ps -eaf|grep postgres
    0    60     1   0   0:00.07 ??         0:00.09 /opt/local/bin/daemondo --label=postgresql90-server --start-cmd /opt/local/etc/LaunchDaemons/org.macports.postgresql90-server/postgresql90-server.wrapper start ; --stop-cmd /opt/local/etc/LaunchDaemons/org.macports.postgresql90-server/postgresql90-server.wrapper stop ; --restart-cmd /opt/local/etc/LaunchDaemons/org.macports.postgresql90-server/postgresql90-server.wrapper restart ; --pid=none
  103  3971  3967   0   0:00.69 ??         0:01.17 postgres: writer process     
  103  3972  3967   0   0:00.67 ??         0:00.88 postgres: wal writer process     
  103  3973  3967   0   0:00.18 ??         0:00.23 postgres: autovacuum launcher process     
  103  3974  3967   0   0:00.19 ??         0:00.21 postgres: stats collector process     
    0  3616  2726   0   0:00.04 ttys000    0:00.06 su postgres
  103  3967  3619   0   0:00.23 ttys000    0:00.34 postgres -D /usr/local/pgsql/data
    0  4559  4055   0   0:00.03 ttys001    0:00.05 su postgres
  103  5922  4560   0   0:00.01 ttys001    0:00.01 grep postgres 
```

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T20:40:35.327

我想你之前已经安装了 PostgreSQL。请确认这一点，因为在这种情况下，您将不得不升级您的数据库。**这是重要的一步，不能只升级软件。**

请尝试停止当前正在运行的服务器。首先，检查当前运行的 PostgreSQL 的来源：

```
sudo launchctl list | grep -Ei "macports|postgres" 
```

然后执行：

```
sudo launchctl unload -w <OldPostgreSQL.plist> 
```

并像这样启动一个新服务器：

```
sudo launchctl load -w <NewPostgreSQL.plist> 
```

我希望新的 plist 是
`/Library/LaunchDaemons/org.macports.postgresql91-server.plist`.

* * *

**如果您需要升级：**

1.  确保首先使用*新*版本的`pg_dump`.
2.  在新文件夹中执行*新*版本。`initdb``PGDATA`
3.  如上所述启动*新服务器。*
4.  上传完整转储。

这是我在这个主题上遇到的一个[小描述。](https://wiki-bsse.ethz.ch/display/ITDOC/Upgrade+PostgreSQL+on+Mac+OS+X)这是有关[主要版本之间升级的官方 PostgreSQL 文档](http://www.postgresql.org/docs/current/interactive/upgrading.html)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-08T20:20:57.817

我的是自制安装，这就是我所做的（带我到一个没有版本问题的正常运行的 psql）——我正在尝试安装 KyngChaos 的 postgresql 的 mac 版本

```
step 0 (already did):
brew uninstall postgresql

step1
which psql
=> "locationpath" (in my case, /usr/bin/psql)
sudo rm "locationpath"

step2
#inside ~/.bash_profile
export PATH=/usr/local/pgsql-9.3/bin:$PATH

step3
psql
#works 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T20:11:47.003

如果您在新安装之前已经拥有 PostgreSQL 版本，则可能会发生这种情况。

由于你有两个版本的 PostgreSQL，你需要两个版本的 psql。基本上，现在当您键入 psql 时，您的系统可能无法确定您尝试连接的数据库版本。

删除以前的版本。或者安装新的 psql 以及新版本的服务器。

# c++ - 临时 std::strings 返回垃圾

> ID：11368483
> 
> 赞同：6
> 
> 时间：2012-07-06T19:24:03.167
> 
> 标签：c++

我还在学习c++，所以请多多包涵。我正在围绕 boost 文件系统路径编写一个简单的包装器——我在返回临时字符串时遇到了奇怪的问题。这是我的简单课程（这不准确，但非常接近）：

```
typedef const char* CString;
typedef std::string String;
typedef boost::filesystem::path Path;

class FileReference {

    public:

        FileReference(const char* path) : mPath(path) {};

        // returns a path
        String  path() const {
            return mPath.string();
        };

        // returns a path a c string
        CString c_str() const {
            return mPath.string().c_str();
        };

    private:

        Path    mPath;

} 
```

使用下面的小测试代码：

```
FileReference file("c:\\test.txt");

OutputDebugString(file.path().c_str()); // returns correctly c:\test.txt
OutputDebugString(file.c_str());        // returns junk (ie îþîþîþîþîþîþîþîþîþîþî.....) 
```

我很确定这必须处理临时人员，但我无法弄清楚为什么会这样 - 不应该一切都正确复制吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-06T19:32:20.907

```
CString c_str() const {
        return mPath.string().c_str();
    }; 
```

`mPath.string()`返回 a 的副本`std::string`。该副本存储在临时文件中，该临时文件将在此表达式结束时被销毁。

`.c_str()`返回一个指向内存的指针，当字符串被销毁时，该内存将被销毁，即在这个表达式的末尾。

您正在返回一个指向已被破坏的内存的指针。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-06T19:29:26.137

看起来像`mPath.string()`按值返回一个字符串。一旦 FileReference::c_str() 返回，该临时字符串对象就会被破坏，因此它的 c_str() 变得无效。`c_str()`使用这样的模型，如果不为字符串引入某种类或静态级别的变量，就不可能创建一个函数。

考虑以下替代方案：

```
//Returns a string by value (not a pointer!)
//Don't call it c_str() - that'd be misleading
String str() const
{             
     return mPath.string();
} 
```

或者

```
void str(String &s) const
{             
     s = mPath.string();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T20:46:56.240

表达式

```
OutputDebugString(file.path().c_str()) 
```

和

```
OutputDebugString(file.c_str()) 
```

相似之处在于它们都有效地调用`c_str()`临时`std::string`对象的方法并尝试使用该调用的结果。第一个直接将其称为`file.path().c_str()`子表达式。第二个更隐含地做到了：内部`FileReference::c_str()`方法。

在第一种情况下，临时`std::string`对象是通过`file.path()`调用显式创建的，作为整个表达式的直接部分。根据语言规则，该临时对象的生命周期延伸到整个表达式的末尾，这就是为什么临时对象和`c_str()`调用结果始终保持有效的原因。

在第二种情况下，临时`std::string`对象是在`FileReference::c_str()`方法内部创建的。当此方法返回时，该临时对象被销毁，这意味着`FileReference::c_str()`返回指向“死”数据的指针。这就是有问题的“垃圾”的原因。

# php - 是否可以确定刷新 $_SESSION[] 全局变量？

> ID：11368484
> 
> 赞同：0
> 
> 时间：2012-07-06T19:24:04.110
> 
> 标签：php, javascript

我有一个 PHP 应用程序，它使用 $_SESSION 全局来管理应用程序内的数据。但是，在尝试更新 $_SESSION 的值时我遇到了一个小问题，这就是我到目前为止所做的：

1.  做东西
2.  未设置（$_SESSION['var']）
3.  做东西
4.  $_SESSION['var']=newValue();

我这样调用php `$.post()`：

```
$('#id').click(function(){
    $.post("page.php", function(data){
        //do stuff
        window.location = "goto.php";
    })
}) 
```

`goto.php`从 $_SESSION['var'] 中获取内容并构造一个新的 html。

但是，当网页转到`goto.php`它时，它会加载使用最新版本的`$_SESSION['var']`. 请注意，如果我刷新网页，它会加载使用新创建的新内容`$_SESSION['var']`。

这也不是一种常规行为，有时它会在没有重新加载页面的情况下正确加载。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T19:30:04.060

这几乎可以肯定是一个缓存问题。您可以将某些标头发送到浏览器以强制它不缓存页面，从而确保每次都重新加载。

您可以使用以下方法在 PHP 中执行此操作：

```
header('Cache-Control: no-cache, no-store, must-revalidate'); // HTTP 1.1.
header('Pragma: no-cache'); // HTTP 1.0.
header('Expires: 0'); // Proxies. 
```

资料来源：[如何在所有浏览器中控制网页缓存？](https://stackoverflow.com/questions/49547/making-sure-a-web-page-is-not-cached-across-all-browsers)

# python - OpenMP 和 Python

> ID：11368486
> 
> 赞同：80
> 
> 时间：2012-07-06T19:24:16.570
> 
> 标签：python, parallel-processing, openmp

我有为共享内存机器（在 C 和 FORTRAN 中）编写 OpenMP 的经验，以执行简单的任务，如矩阵加法、乘法等（只是想看看它如何与 LAPACK 竞争）。我对 OpenMP 的了解足以执行简单的任务，而无需查看文档。

最近，我为我的项目转向 Python，除了绝对基础之外，我没有任何 Python 经验。

我的问题是：

在 Python 中使用 OpenMP的*最简单*方法是什么？最简单的意思是在程序员方面花费最少的努力（即使它是以增加系统时间为代价的）？

我使用 OpenMP 的原因是因为可以将串行代码转换为工作并行代码，其中`!$OMP`散布一些 s。实现*粗略*并行化所需的时间非常短。有没有办法在 Python 中复制这个特性？

通过在 SO 上浏览，我可以找到：

*   C 扩展
*   无堆栈 Python

还有更多吗？哪个最符合我的问题？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2016-04-20T11:17:47.170

## 赛通

*Cython*具有*OpenMP*支持：使用 Cython，可以通过使用`prange`（并行范围）运算符并将`-fopenmp`编译器指令添加到 setup.py 来添加 OpenMP。

在 prange 节中工作时，执行是并行执行的，因为我们通过使用指定禁用 GIL 的块来禁用*全局解释器锁 (GIL) 。*`with nogil:`

要编译*cython_np.pyx*，我们必须修改 setup.py 脚本，如下所示。我们告诉它通知 C 编译器`-fopenmp`在编译期间用作参数 - 以启用 OpenMP 并与 OpenMP 库链接。

```
from distutils.core import setup
from distutils.extension import Extension
from Cython.Distutils import build_ext
setup(
    cmdclass = {"build_ext": build_ext},
    ext_modules = [
        Extension(
            "calculate",
            ["cython_np.pyx"],
            extra_compile_args = ["-fopenmp"],
            extra_link_args = ["-fopenmp"]
        )
    ]
) 
```

使用 Cython `prange,`，我们可以选择不同的调度方法。使用*静态，*工作负载均匀分布在可用的 CPU 上。但是，由于您的一些计算区域在时间上很昂贵，而另一些则很便宜 - 如果我们要求 Cython 在 CPU 上使用*静态*平均调度工作块，那么某些区域的结果将比其他区域更快地完成，然后这些线程将闲着。动态的*和*引导*的*调度选项试图通过在运行时动态地分配更小的块来缓解这个问题，以便在工作负载的计算时间可变时 CPU 分布更均匀。因此，对于您的代码，正确的选择将取决于您的工作负载的性质。

## 努巴

Numba 的高级版本 NumbaPro 具有对`prange`并行化运算符的实验性支持，可与 OpenMP 一起使用。

## 吡斯兰

Pythran（Python 子集的 Python 到 C++ 编译器）可以利用矢量化可能性和基于 OpenMP 的并行化可能性，尽管它仅使用 Python 2.7 运行。您可以使用指令指定并行部分`pragma omp`（非常类似于上述 Cython 的 OpenMP 支持），例如：

[![编译指令](../Images/3dcd060607ced5b2b3372a9e2a265448.png)](https://i.stack.imgur.com/iur5X.png)

## 派皮

JIT Python 编译器 PyPy 支持多处理模块（见下文），并有一个名为 PyPy-STM 的项目“PyPy[的特殊开发版本，它可以在同一进程中并行运行多个独立的 CPU 密集型线程](http://doc.pypy.org/en/latest/stm.html?highlight=openmp#software-transactional-memory)”。

## 旁注：多处理

OpenMP 是多核的低级接口。您可能想查看`multiprocessing.`该`multiprocessing`模块在更高级别上工作，共享 Python 数据结构，而 OpenMP 在您编译为 C 后与 C 原始对象（例如整数和浮点数）一起工作。只有在您使用 OpenMP 时才有意义'正在编译你的代码；如果您不进行编译（例如，如果您使用高效的*numpy*代码并且希望在多个内核上运行），那么坚持使用`multiprocessing`可能是正确的方法。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-07-06T20:20:13.523

由于 GIL，没有必要在 CPython 中将线程用于 CPU 密集型任务。您需要多处理（[示例](https://stackoverflow.com/a/9849971/4279)）或使用在计算期间释放 GIL 的 C 扩展，例如，一些 numpy 函数，[示例](http://docs.scipy.org/doc/numpy/reference/generated/numpy.dot.html)。

您可以在 Cython 中轻松编写使用多个线程的 C 扩展，[例如](https://gist.github.com/2051661).

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-07-06T20:46:17.433

据我所知，没有适用于 Python 的 OpenMP 包（我不知道如果有它会做什么）。如果您希望线程直接在您的控制之下，您将不得不使用其中一个线程库。然而，正如其他人所指出的，GIL（全局解释器锁）使得 Python 中的多线程性能有点……好吧，毫无意义*。GIL 意味着一次只有一个线程可以访问解释器。

我建议改为查看 NumPy/SciPy。NumPy 让您可以编写 Matlab 风格的代码，您可以在其中使用单个操作对数组和矩阵进行操作。它还具有一些并行处理能力，请参阅[SciPy Wiki](http://wiki.scipy.org/ParallelProgramming)。

其他开始寻找的地方：

*   [使 CPU 绑定任务更快的经验](https://ep2012.europython.eu/conference/talks/experiences-making-cpu-bound-tasks-run-much-faster)
*   [加速 Python（NumPy、Cython 和 Weave）](http://technicaldiscovery.blogspot.com/2011/06/speeding-up-python-numpy-cython-and.html)

* 好吧，这不是毫无意义的，但除非时间消耗在 Python 代码之外（例如通过调用的外部进程`popen`或类似的方法），否则线程不会为您购买任何东西，而不是方便。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2012-10-25T23:35:54.637

如果你想发布 GIL 并使用 OpenMP ypu 可以看看 Cython。它为一些常见任务提供了简单的并行性。您可以在 Cython[文档](http://docs.cython.org/src/userguide/parallelism.html)中阅读更多内容。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2013-01-05T02:29:43.013

也许您的回复是在 Cython 中：

“Cython 通过 cython.parallel 模块支持本机并行性。要使用这种并行性，必须发布 GIL（请参阅发布 GIL）。它目前支持 OpenMP，但以后可能会支持更多后端。” [Cython 文档](http://docs.cython.org/src/userguide/parallelism.html)

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2018-01-31T15:24:31.427

有一个名为[pymp](https://github.com/classner/pymp)的包，作者将其描述为为 Python 带来类似 OpenMP 的功能的包。我尝试过使用它，但有不同的用例：文件处理。有效。我认为使用起来非常简单。以下是取自 GitHub 页面的示例：

```
import pymp
ex_array = pymp.shared.array((100,), dtype='uint8')
with pymp.Parallel(4) as p:
    for index in p.range(0, 100):
        ex_array[index] = 1
        # The parallel print function takes care of asynchronous output.
        p.print('Yay! {} done!'.format(index)) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-02-13T00:49:24.183

[http://archive.euroscipy.org/talk/6857](http://archive.euroscipy.org/talk/6857) “介绍了 Cython 的 OpenMP 能力，专注于 NumPy 数组上的并行循环。源代码示例演示了如何在 Python 中使用 OpenMP。使用 OpenMP 的并行算法的结果显示了可以实现哪些加速与其他并行化策略相比，实现了不同的数据大小。”

```
import numpy
import cython
from cython cimport parallel

@cython.boundscheck(False)
@cython.wraparound(False)
def func(object[double, ndim=2] buf1 not None,
        object[double, ndim=2] buf2 not None,
        object[double, ndim=2] output=None,
        int num_threads=2):
    cdef unsigned int x, y, inner, outer
    if buf1.shape != buf2.shape:
        raise TypeError('Arrays have different shapes: %s, %s' % (buf1.shape,
            buf2.shape))
    if output is None:
        output = numpy.empty_like(buf1)
    outer = buf1.shape[0]
    inner = buf1.shape[1]
    with nogil, cython.boundscheck(False), cython.wraparound(False):
        for x in parallel.prange(outer, schedule='static',
                num_threads=num_threads):
            for y in xrange(inner):
                output[x, y] = ((buf1[x, y] + buf2[x, y]) * 2 +
                    buf1[x, y] * buf2[x, y])
return output 
```

# c# - XSLT：列名出现在 csv 文件中，但数据为空白

> ID：11368492
> 
> 赞同：0
> 
> 时间：2012-07-06T19:24:37.200
> 
> 标签：c#, unit-testing, xslt

我的任务是测试一些 XSLT 代码以确保它输出我们需要的内容。问题是出现了列数据，但实际数据本身却消失了。由于我以前从未处理过 XSLT 或 csv 文件，因此我不知道为什么会发生这种情况。这是 XSLT：

```
 public const string XSLT = @"
<xsl:stylesheet version=""1.0"" xmlns:xsl=""http://www.w3.org/1999/XSL/Transform""
    xmlns:msxsl=""urn:schemas-microsoft-com:xslt"" exclude-result-prefixes=""msxsl"">  
<xsl:output method=""text"" encoding=""us-ascii"" />

  <xsl:template match=""DataRow"">IncidentNumber,IncidentDate,LocationCode,Location,DateReported,DaysFromWork,OSHAReportable, TotalDaysFromWork,InjuredEmployeeName,EmployeeType,ReportedBy,Witness,ThisIncidentIs,InjuryOrIllnessType,Hospital, Recurring,CauseOfInjury,InjuryType,BodyPartInjured,BodyFluid,AECIPremises,
<xsl:apply-templates select=""Derate""/>

</xsl:template>

<xsl:template match=""Data"">
   <xsl:for-each select=""*"">
     <xsl:if test=""position() != last()"">
       <xsl:text>'</xsl:text>
       <xsl:value-of disable-output-escaping=""yes"" select="".""/>
       <xsl:text>'</xsl:text>
      <xsl:value-of select=""','""/>
     </xsl:if>
     <xsl:if test=""position() = last()"">
     <xsl:text>'</xsl:text>
      <xsl:value-of disable-output-escaping=""yes"" select="".""/>
     <xsl:text>'</xsl:text>
     </xsl:if>
 </xsl:for-each>,
</xsl:template>
</xsl:stylesheet>
"; 
```

这是我的测试方法：

```
[TestMethod]
[DeploymentItem("app.config")]
public void OneDayTest()
{
     var target = new Harvester();
     var config = ConfigurationManager.OpenMappedExeConfiguration(new ExeConfigurationFileMap 
            { ExeConfigFilename = @"app.config" }, ConfigurationUserLevel.None);
     target.ConfigureHarvester(config);            
     var results = target.Harvest(new HarvestTargetTimeRangeUTC{StartTimeUTC = new DateTime(2012, 1, 1).ToUniversalTime(),
            EndTimeUTC = DateTime.Now.ToUniversalTime()});           

     XmlSchemaSet set = new XmlSchemaSet();
     set.Add(XmlSchema.Read(XElement.Parse(Constants.Xsd).CreateReader(), (o, e) => { }));
     bool valid = true;
     (new XDocument(results)).Validate(set, (o, e) =>
     {
         valid = false;
     });
     Assert.IsTrue(valid);

     XslCompiledTransform transformer = new XslCompiledTransform();
     transformer.Load(XElement.Parse(Constants.XSLT).CreateReader());
     var stream = new MemoryStream();
     transformer.Transform(results.CreateReader(), null, new StreamWriter(stream));
     stream.Position = 0;
     File.WriteAllBytes("UnsubmittedWorkmansCompIncidentsReportID.csv", stream.ToArray());            
} 
```

在我的 XSLT 和我的测试方法中，我使用的是预定义的公司格式。实际上我所做的只是调整它以适应我的数据。它在其他的没有问题，所以我不确定为什么它在这里不起作用。

当我调试它时，数据出现在这一行：

```
transformer.Transform(results.CreateReader(), null, new StreamWriter(stream)); 
```

但在那之后我不知道会发生什么。

如果有人可以就此分享一些信息，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T20:51:02.370

问题是我的模板不匹配，我在前 1000 次查看它时没有注意到。走了一会儿，回来阅读 Dimitre Novatchev 的评论后，我发现了问题。

# magento - MAGENTO : 添加可下载的实体产品或简单产品

> ID：11368494
> 
> 赞同：0
> 
> 时间：2012-07-06T19:24:41.037
> 
> 标签：magento, download, mp3, product

我不敢相信我找不到这个问题的答案。

我们希望在一次购买中提供包括 cd 的数字和物理副本的 cd。（所以我不是在寻找几个“添加产品手册作为下载”扩展中的一个，除非说扩展）

~~创建捆绑包不起作用，因为您无法将可下载的产品添加到捆绑包中。~~

我可以在第 106 行附近修改 /app/code/core/Mage/Bundle/etc/config.xml 以添加 <downloadable/> 作为捆绑包的选项。但我觉得这仍然是一种解决方法。

这似乎应该包含在核心中。

可下载产品和简单产品之间的唯一区别不就是下载吗？（并且不发货）将下载字段添加到简单或可配置的产品中不是很容易吗？

这是我能找到的最接近的，但需要太多的定制[INCHOO - 如何在 Magento 中创建新产品类型](http://inchoo.net/ecommerce/magento/how-to-create-a-new-product-type-in-magento/)

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T12:07:03.280

实际上问题是当您有一个示例文件附加到下载时，不能有一个文件示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T13:27:09.457

您可以在 magento 中使用捆绑产品

# java - 转发到相同的struts2动作时丢失bean的价值

> ID：11368495
> 
> 赞同：0
> 
> 时间：2012-07-06T19:24:47.740
> 
> 标签：java, struts2, javabeans

我正在开发一个简单的 UI，用户可以通过它向我们的公告系统添加消息。

他们在 addMessage.jsp 中输入详细信息，在 reviewMessage.jsp 上查看结果，然后从 reviewMessage.jsp 提交，信息将通过存储过程发送到数据库。

一切正常，直到用户从评论页面提交。当执行离开 JSP 并重新进入 Action 类时，消息 bean 已变为空。如何在同一个操作中通过多个方法和页面持久化 bean？

这是我的 struts.xml 文件的片段：

```
<!--Render message entry page-->
<action name="activateMessageInitial"
    class="org.mycompany.struts.action.ActivateMessageAction" method="execute">
    <result name="success">/addMessage.jsp</result>
</action>

<!--Receive message bean fields, adjust their results for storage, render review page-->        
<action name="segmentMessage"
    class="org.mycompany.struts.action.ActivateMessageAction" method="parseAndSegment">
    <result name="failed">/addMessage.jsp</result>
    <result name="success">/reviewMessage.jsp</result>
</action>

<!--Review complete, break message bean into fields to submit to database, then return to main menu-->      
<action name="submitMessage"
    class="org.mycompany.struts.action.ActivateMessageAction" method="activate">            
    <result name="success" type="redirectAction">main</result>
</action> 
```

还有一个混淆的 ActivateMessageAction 类：

```
private TargetedMessage messageBean;

public String execute() throws Exception 
{           
    //empty method  
}

//Take the provider message bean, adjust any values as necessary, and then add in the segmentation detail.
public String parseAndSegment() throws Exception    
{       
    //adjust bean fields
}

//Take a completed provider message bean and send it to the database for processing.
public String activate()
{

    //send bean to database; null, here, hence the error.
    ActivateMessageModel.createMessage(messageBean);    
}

public void setMessageBean(TargetedMessage messageBean)
{
    this.messageBean = messageBean;
}

public TargetedMessage getMessageBean()
{
    return messageBean;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T04:12:41.423

操作的生命周期仅限于单个 HTTP 请求。您可以将数据作为隐藏的表单字段传递，也可以将对象存储在会话中。

# java - 带有字符串构造函数的 Java BigDecimal 错误以使用 ROUND_HALF_UP 进行舍入

> ID：11368496
> 
> 赞同：4
> 
> 时间：2012-07-06T19:24:50.017
> 
> 标签：java, rounding, bigdecimal

我正在尝试对 BigDecimal 类实施新的成绩四舍五入，并且我遇到了一个可能的错误，我可能做错了什么。下面的代码暴露了我的问题：

```
public static void main(String[] args) throws IOException {
    BigDecimal valDouble = new BigDecimal(0.35);
    valDouble = valDouble.setScale(1, BigDecimal.ROUND_HALF_UP);
    System.out.println(valDouble.doubleValue()); // prints 0.3

    BigDecimal valString = new BigDecimal(new String("0.35"));
    valString = valString.setScale(1, BigDecimal.ROUND_HALF_UP);
    System.out.println(valString.doubleValue()); // prints 0.4
} 
```

我的疑问是，BigDecimal 对于 double 和 String 构造函数是否不同？

我无法理解这个“错误”，至少，我只是使用了一个简单的字符串 concat 来“解决”它，如下所示：

```
BigDecimal valDouble = new BigDecimal("" + 0.35); 
```

知道是什么导致了这种奇怪的行为吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-06T19:28:24.407

这不是错误。0.35 作为双精度字面值表示不完全等于 0.35 的值；它可能是 0.349999995 之类的东西。所以它四舍五入。

String 构造函数允许您使用“0.35”精确地指定 0.35，并且四舍五入。

不要在`double`这里使用构造函数；当它足够重要时，`BigDecimal`您需要远离浮点土地。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-06T20:37:16.453

您无需猜测 0.35 表示为

```
BigDecimal valDouble = new BigDecimal(0.35);
System.out.println(valDouble); 
```

印刷

```
0.34999999999999997779553950749686919152736663818359375 
```

这将四舍五入到小数点后 1 位为 0.3

您不需要转换为字符串，您可以使用`valueOf`

```
BigDecimal valDouble = BigDecimal.valueOf(0.35);
System.out.println(valDouble); 
```

印刷

```
0.35 
```

要将一半四舍五入到小数点后一位，您可以使用

```
double d = 0.35;
double d1 = Math.round(d * 10) / 10.0;
System.out.println(d1); 
```

印刷

```
0.4 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T02:58:10.287

0.35 已经不精确了，变成了 FP 的二进制基数。使用 new BigDecimal("0.35")，这是精确的，因为是十进制基数。

# filesystems - 在 iCloud（无 Pages）中查看文件以进行 iOS 应用测试？

> ID：11368498
> 
> 赞同：2
> 
> 时间：2012-07-06T19:25:03.707
> 
> 标签：filesystems, icloud

我现在正在开发一个应用程序，该应用程序应该从 NSString 生成文本文档，将其保存到应用程序的文档文件夹，然后将其上传到 iCloud。

我已经确认正在使用我想要的数据创建一个 .txt 文件，然后将其存储在设备上我的应用程序沙箱中的 Documents 文件夹中。我的下一步是调试 iCloud 上传。看起来我的应用程序无法通过查看将文档上传到 iCloud `Settings > iCloud > Storage & Backups > ManageStorage > myAppName > files created by my app in the iCloud would be listed here`。

因此，为了确认这一点，我想将我的整个 iCloud 帐户视为一个普通的文件目录，并查找我应该使用我的应用程序创建和上传的文件。想想 Dropbox 如何显示他们的文件。我就是这个意思。

`How do you view all the raw files saved in your personal iCloud, as if it were a normal filesystem?`（我目前无法购买 Pages。）

更新：我现在已经让我的文本文件的名称出现在“设置”>“iCloud”>“等”中......但我仍然无法验证它是否存在于我的 iCloud 中，也无法查看文件的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T10:06:15.993

[https://developer.icloud.com](https://developer.icloud.com)将向您展示 iCloud 服务器认为您的应用容器是什么样的。它还可以让您下载文件。

但是请注意，iOS 设备也会点对点同步，因此 iCloud 服务器可能不会一直拥有最新的信息。

# php - 使用 OAuth2 客户端凭据流保护用 PHP 编写的 REST API

> ID：11368504
> 
> 赞同：11
> 
> 时间：2012-07-06T19:25:14.407
> 
> 标签：php, api, rest, symfony, oauth-2.0

我正在使用 Symfony2 在 PHP 中编写 REST API。此 API 旨在供各个网站使用来访问数据，这将由客户端库完成。

但是，我需要保护 API 的安全，事实证明这有点令人困惑。我已经做了一些研究，据我所知，一个好方法似乎是将 OAuth2 与客户端凭据流一起使用（参见 RFC 草案）。我不得不承认，我仍然不清楚它是如何工作的细节，但我一直在读它是如此简单。我想我的第一个问题是：这是要走的路还是我走错了方向？我应该使用其他方法来验证客户端吗？请记住，我需要身份、身份验证和授权。

如果是，使用客户端凭据的 OAuth2 是一种方法，那么我问：在 PHP 中实现这一目标的最佳方法是什么？有没有人真的这样做过？到目前为止，我一直在尝试将[oauth2-php](https://github.com/FriendsOfSymfony/oauth2-php)与[捆绑包](https://github.com/FriendsOfSymfony/FOSOAuthServerBundle)一起使用，但运气不佳。该捆绑包似乎专注于三足身份验证，尽管我不太确定。我想知道最好的做法是否可能是使用 oauth2-php 包手动完成？

我将不胜感激有关此的任何信息。提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T20:31:11.543

海达尔，

我目前正在从事一个类似的项目，这是我迄今为止发现的。

Oauth 是正式授权网站与网络上的其他资源，Facebook 发现整个自动化和身份验证的分离令其开发人员感到困惑，并开始将 Oauth 用于两者。自从它成为开发人员一直关注的主要参与者。

即使我不太确定您声明中的身份部分是什么意思，但您需要“身份、身份验证和授权”。

您可以将 Oauth 用于其他两个，这是从所有大型互联网公司都这样做的事实中扣除的（我可以在这方面为您做最好的事情，Oauth 文档说它仅用于授权）。

Google 提供了一个维护良好的客户端库：[http ://code.google.com/p/google-api-php-client/wiki/OAuth2](http://code.google.com/p/google-api-php-client/wiki/OAuth2)

此外，对于服务器端库，我会转向 oauth2-php，如您所指，在[https://github.com/quizlet/oauth2-php](https://github.com/quizlet/oauth2-php)但请参阅这篇文章了解更多详细信息：[Are there OAuth 2 server side PHP or Java 实现？](https://stackoverflow.com/questions/4875420/are-there-oauth-2-server-side-php-or-java-implementations)

在三足身份验证方面，请在此处查看答案（它确实很广泛，但解释得很好）[OAuth 2.0：好处和用例——为什么？](https://stackoverflow.com/questions/7561631/oauth-2-0-benefits-and-use-cases-why)

请记住，尽管我仍在努力实现这一点。

# ios - UIViewController presentModalViewController: animated: 导致 SIGABRT

> ID：11368507
> 
> 赞同：0
> 
> 时间：2012-07-06T19:25:25.127
> 
> 标签：ios, cocoa-touch, uiviewcontroller, sigabrt

我有两个笔尖文件。ViewController.xib 和 NewView.xib。

当我尝试通过单击按钮执行以下代码时，从第一个 nib 的 viewController 内部：

```
NewView *secondView = [NewView alloc] initWithNibName:@"NewView.xib" bundle:nil];
secondView.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
[self presentModalViewController:secondView animated:YES]; 
```

一个 SIGABRT 被发送到程序。（NewView 是第二个视图控制器）

但是当我将第一行替换为：

```
NewView *secondView = [NewView alloc]init]; 
```

它工作正常，我的第二个笔尖显示为模态视图。

文件的所有者设置为 NewView 并且视图也连接到文件的所有者。

我对 iOS 很陌生，不明白为什么会这样。请放一些光。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T19:41:21.197

事实上，我想我知道你需要做什么。尝试更换

```
NewView *secondView = [NewView alloc] initWithNibName:@"NewView.xib" bundle:nil]; 
```

和

```
NewView *secondView = [NewView alloc] initWithNibName:@"NewView" bundle:nil]; 
```

我相信我以前也遇到过这个问题，归结为您在加载 xib 文件时不应该包含扩展名。

# javascript - 如何在不知道其域名的情况下跟踪网站的浏览量？

> ID：11368511
> 
> 赞同：0
> 
> 时间：2012-07-06T19:25:45.360
> 
> 标签：javascript

首先让我明确一点，这一点也不违法。

我制作了一个 html 代码并将其发布在互联网上，任何人都可以轻松复制代码并根据自己的要求使用它。现在因为我想检查我的代码有多受欢迎，所以我想跟踪**一个带有我的代码的网站在浏览器中加载的次数。**

我认为谷歌分析将是一个不错的选择，但他们希望跟踪网站的 url，但我的代码是公开上传的，任何人都可以使用，**我永远不知道它是在哪个 url 上实现的。**所以任何人都可以帮助我。

**如果可能的话，我想获得关于它实施的 url 的信息。**

欢迎任何形式的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T19:34:21.077

谷歌分析有很多替代品。其中之一- [Clicky](http://getclicky.com)。您可以尝试使用 Clicky API [http://getclicky.com/help/#/help/api](http://getclicky.com/help/#/help/api)

# c# - 在运行时评估控件是否属于父类型

> ID：11368515
> 
> 赞同：0
> 
> 时间：2012-07-06T19:25:58.533
> 
> 标签：c#, inheritance, runtime

有没有办法得到这样的代码打印“测试”；

```
DecendedTextBox myControl = new DecendedTextbox();

if (myControl is "TextBox")
{
   Debug.WriteLine("Test");
} 
```

这里的重点是我需要查看 myControl 是否继承自我在编译时没有引用的类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T19:28:35.310

如果您没有对该类型的引用，您可以这样做：

```
DecendedTextBox myControl = new DecendedTextbox();

if (myControl.GetType().Name == "TextBox")
{
   Debug.WriteLine("Test");
} 
```

如果你想知道完整的类型名称，包括命名空间，你可以使用`GetType().FullName`

至于检查它是否从类型继承，如下所示：

```
DecendedTextBox myControl = new DecendedTextbox();
Type typeToCheck = Type.GetType("TextBox");
if (myControl.GetType().IsSubclassOf(typeToCheck))
{
   Debug.WriteLine("Test");
} 
```

请注意，[Type.GetType](http://msdn.microsoft.com/en-us/library/w3f99sx1.aspx#Y0)采用[AssemblyQualifiedName](http://msdn.microsoft.com/en-us/library/system.type.assemblyqualifiedname.aspx)，因此您需要知道完整的类型名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T19:42:18.653

如果您需要避免`Type`通过反射拉出引用，那么您可以爬上继承树：

```
public static bool IsTypeSubclassOf(Type subclass, string baseClassFullName)
{
    while (subclass != typeof(object))
    {
        if (subclass.FullName == baseClassFullName)
            return true;
        else
            subclass = subclass.BaseType;
    }
    return false;
} 
```

# c# - AutoResetEvent 专门支持的并行模式

> ID：11368516
> 
> 赞同：1
> 
> 时间：2012-07-06T19:26:00.753
> 
> 标签：c#, .net, concurrency

[msdn 自动重置事件](http://msdn.microsoft.com/en-us/library/system.threading.autoresetevent.aspx)。

**问题**

哪种并行模式最适合 AutoResetEvent？

**背景**

在比较线程之间的同步选项时，我们可能会`AutoResetEvent`比较`ManualResetEvent`. 考虑这两个区别：

1.  AutoResetEvent 最多释放一个等待线程。
2.  AutoResetEvent在一个等待线程被释放后*自动重置。*

重要的是要注意，如果两个线程正在等待并且一个`AutoResetEvent`触发两次，则可能会发生竞争条件并且只释放一个线程。可以使用更多的锁来防止这种情况 - 但问题的重点是关于哪种模式`AutoResetEvent`最适合（也许这意味着它本身最支持哪种模式）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T19:33:44.480

我不确定在这种情况下我们是否可以谈论并行模式。模式比单纯的同步机制（例如`AutoResetEvent`.

当我们谈到并行模式时，我们指的是解决常见并行性问题的通用方法，例如数据结构的几何分解、并行分治、生产者-消费者等，这些方法可以通过一系列较低的具体实现级别机制，并且与语言和平台无关。

`AutoResetEvent`是一种.NET 同步机制。它可以与类一起用于在**具体案例**`Thread`中实现上述模式之一，但是这种实现可以很好地替换为例如 pthread 和条件变量。

 **在解决并行性问题时，我被教导看待事物的方式是从抽象到具体的这三个步骤：

1.  确定适用的平行模式
2.  确定一个合适的算法来实现模式
3.  确定合适的低级机制来实现算法

**编辑**：好的，在查看了我的旧“东西”之后，我发现了一种可以使用`AutoResetEvent`. 要很好地解释问题，请查看我的旧问题：[并行应用程序具有随机行为](https://stackoverflow.com/questions/6425706/parallel-application-has-random-behavior)

从描述中可以看出，在开始计算分配给它的行之前，每个线程必须等待伴随线程至少处理前一行的前几项。这意味着每个线程必须在分配给它的每一行的开头阻塞并等待信号。因此，假设我们有 3 个线程处理矩阵，线程 0 将在第 0、3、6 行的开头阻塞……线程 1 在第 1、4、7 行……依此类推。

这种等待发出信号的行为可以很容易地使用`AutoResetEvent`每个线程来实现，因为每个线程都需要多次阻塞，这意味着我们需要多次重置事件并且不存在按顺序快速发出信号的危险，因为线程必须等待彼此前进。**

# unit-testing - DbContext GetValidationErrors 和单元测试代码覆盖率

> ID：11368532
> 
> 赞同：4
> 
> 时间：2012-07-06T19:27:04.210
> 
> 标签：unit-testing, entity-framework-4.3

我不是要对 EF 进行单元测试，而是我的业务逻辑。

```
 if (_context.GetValidationErrors.Count > 0)
        {

            foreach (DbEntityValidationResult validationResult in _context.ValidationErrors)
            {
                foreach (DbValidationError error in validationResult.ValidationErrors)
                {
                    // add ErrorMessage to a list

                }
            }

        }
        else
        {
            _context.SaveChanges();
        } 
```

我在单元测试中使用 Mock。我可以轻松地模拟验证错误的计数，但模拟 foreach 循环中的列表让我很困惑。为了代码覆盖率，我希望能够模拟循环。

# excel - Lastrow在Excel VBA中上升而不是下降

> ID：11368537
> 
> 赞同：0
> 
> 时间：2012-07-06T19:27:30.303
> 
> 标签：excel, vba

这是我的代码，它有点偏离，虽然它确实有效，但不是我想要的方式。

```
Option Explicit

Sub ONJL()
    Dim lastrow As Long
    Dim wsPAR As Worksheet 'PAERTO
    Dim wsRD As Worksheet 'Raw Data
    Dim wsTEM As Worksheet 'Archive

    Set wsPAR = Sheets("PAERTO")
    Set wsRD = Sheets("Raw Data")
    Set wsTEM = Sheets("Template")

    With wsPAR
            Application.ScreenUpdating = False
            wsPAR.Range("B23:I300").Clear
            lastrow = wsRD.Range("B3").Row + 23
            wsTEM.Range("A23:H23").Copy wsPAR.Range("B23:I" & lastrow)
            .Range("F4").Formula = "=SUMPRODUCT(--(I23:I" & lastrow & ">='Raw Data'!K2),--(I23:I" & lastrow & "<='Raw Data'!K3))"
            .Range("F5").Formula = "=SUMPRODUCT(--(I23:I" & lastrow & ">='Raw Data'!K3),--(I23:I" & lastrow & "<='Raw Data'!K4))"
            .Range("F6").Formula = "=SUMPRODUCT(--(I23:I" & lastrow & ">='Raw Data'!K4),--(I23:I" & lastrow & "<='Raw Data'!K5))"

            lastrow = wsRD.Range("E3").Row + 23
            wsTEM.Range("I23:U23").Copy wsPAR.Range("M23:Y" & lastrow)

            Application.ScreenUpdating = True

    End With

End Sub 
```

现在 B3 是 7，E3 是 25。

我想如果我像 +23 那样输入，因为数据从 23 开始，并且应该在 lastrow 相等的地方结束，所以从技术上讲它应该是 I30 和 Y48，但事实并非如此。

有人可以告诉我为什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T19:36:12.077

将下面两行中的**.Row**替换为**.Value**

```
lastrow = wsRD.Range("B3").Row + 23
lastrow = wsRD.Range("E3").Row + 23 
```

您实际上要求 VBA 做的是在两种情况下获取范围的行号 3 并将其添加到 23。如果要获取每个范围内的值并将其添加 23，则需要使用该`.Value`属性.

# javascript - gRaphael 动态/实时更新图表

> ID：11368539
> 
> 赞同：1
> 
> 时间：2012-07-06T19:27:49.257
> 
> 标签：javascript, charts, dynamic-data, graphael

我是 gRaphael 的新手，由于文档很差，想问这个简单的问题。

我必须制作动态/实时更新图表，并且正在考虑使用 gRaphael，有人可以指导我如何动态加载/更新数据，例如`line chart`.

或者**有人对类似用途有良好经验的**其他一些好的替代品 会非常有帮助。谢谢。

# sql-server - “订阅出版物”已验证

> ID：11368542
> 
> 赞同：3
> 
> 时间：2012-07-06T19:27:59.507
> 
> 标签：sql-server, replication, merge-replication

我在服务器上使用 SQL Server 2008 R2，在大约 40 台移动设备上使用 SQL Server 2008 R2 Express。合并复制设置有 1 个发布者和分发者服务器，移动设备作为订阅者。

我在试图调查这些错误时碰了壁：

> 无法验证对发布“xxxxx”的订阅。确保正确指定所有合并代理命令行参数并且正确配置订阅。如果发布者不再拥有有关此订阅的信息，请删除并重新创建订阅。来源：MSSQL_REPL，错误号：MSSQL_REPL-2147201019）

虽然 Microsoft 非常友好地提供了帮助链接 ( [http://help/MSSQL_REPL-2147201019](http://help/MSSQL_REPL-2147201019) )，但他们的实际信息是：

> 很抱歉
> ，目前在错误和事件日志消息或知识库数据库中没有关于此问题的其他信息。
> 您可以使用支持区域中的链接来确定其他地方是否有任何其他信息可用。

有谁真正知道 SQL 如何验证订阅以及我可以做些什么来修复这些错误？到目前为止，我发现的所有内容都指向删除订阅者，然后重新订阅，这会删除整个数据库并重新创建它。对有线客户端来说没什么大不了的，但由于带宽限制，无线用户可能会呆一天。

在此先感谢您的帮助。

# c# - Entity Framework 4 语句中的多个“where”条件 - 可能吗？

> ID：11368546
> 
> 赞同：3
> 
> 时间：2012-07-06T19:28:37.790
> 
> 标签：c#, linq, entity-framework

我有一种有趣的感觉，我错误地处理了这个问题。这是我正在尝试做的事情：

我有一个字符串列表 ( `List<string>`)，我想从表中返回所有行，其中该行中的特定字段与列表中的一个字符串匹配。如果我使用循环并为每个字符串执行一个 Linq 语句，这很简单。当然，我希望尽可能避免多次往返数据库。

你会在这里推荐什么样的策略？我很乐意将 LINQ 与 Entity Framework 一起使用，但我意识到我可能会受到这些特定技术的限制。

我正在使用实体框架 4。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T19:30:46.277

您可以使用[`List.Contains`](http://msdn.microsoft.com/en-us/library/bhkz42b3.aspx)：

```
List<string> yourList = ...;
var query = context.YourTable.Where(x => yourList.Contains(x.Foo)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T19:32:07.127

多次`Where`调用类似于 AND 操作。你想要的是一个 OR：

```
col.Where(w=>w==1 || w==2 || w==3) 
```

或者，映射 SQL`IN`运算符的`Contains`方法是：

```
var vals=new[] {1,2,3};
var filteredcol=col.Where(w=>vals.Contains(w)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T19:40:47.343

对于这种情况，我使用扩展方法

```
public static bool In<T>(this T source, params T[] list)
{
   if (source = null)
       throw new NullReferenceException("Source is Null");

   return list.Contains(source);
} 
```

并将其称为

```
c.Where(w=> w.In("a", "g", "f")) 
```

# javascript - Javascript变量从数组空值直到浏览器刷新

> ID：11368547
> 
> 赞同：0
> 
> 时间：2012-07-06T19:28:42.170
> 
> 标签：javascript, arrays, cookies

希望有人可以阐明这一点。我正在从逗号分隔的 cookie 中获取值（例如 1、2、3、4、5），并将其设置为变量。一切都很好，直到我尝试访问从数组中设置的变量，这些变量在我刷新浏览器之前为空。有任何想法吗？

```
//Setting ExampleVar Cookie
var ExampleVar = null;
var ExampleVar = readCookie('SomeCookie');
if (ExampleVar == null) {
createCookie('SomeCookie',ValuesVariable,365)//create cookie if null
}

var ExampleVar = null;
var ExampleVar = readCookie('CookieGoesHere');//e.g. 1,2,3,4,5
document.write (ExampleVar);//Prints out 1,2,3,4,5 as it should

var myArr = new Array(); 
var myArr = ExampleVar.split(",");
for(var i=0;i<myArr.length;i++){  
    document.write("Array Index " + i + " = " + myArr[i] + "<br />");//prints null until     browser is refreshed
}  
var Foo = myArr[0];//set to Null until browser is refreshed
var Bar = myArr[1];//set to Null until browser is refreshed 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T19:32:00.467

你没有填充你的数组。它不应该打印任何东西。

```
var ExampleVar = readCookie('CookieGoesHere');//e.g. 1,2,3,4,5
var myArr = ExampleVar.split(','); 
```

应该管用

# linq-to-xml - 从 Linq 到 Xml 结果集中操作/删除项目

> ID：11368549
> 
> 赞同：0
> 
> 时间：2012-07-06T19:28:57.003
> 
> 标签：linq-to-xml

我有这个从 XML 文件加载的结果集

```
calendarDocument = XDocument.Load(@"C:\CalendarDB.xml");
IEnumerable<XElement> elements = from e in calendarDocument.Root.Elements("Session") select e; 
```

不要说我需要从日历文件中删除一个元素。这行得通吗？

```
elements.ToList().Remove(someElement);
calendarDocument.Save(@"C:\CalendarDB.xml"); 
```

那这个呢？

```
elements.ToList().Remove(someElement);
elements.Last().AddAfterSelf(anotherElement);
elements.Last().AddAfterSelf(yetAnotherElement);
element.ToList().Remove(anotherElement);
calendarDocument.Save(@"C:\CalendarDB.xml"); 
```

我有一种感觉，每次我调用 Last() 时，它都会直接从日历文件中返回一个新的结果集，但是当我调用 Remove() 时，它不会从文件中删除元素，直到我调用 Save() 并且如果我不调用Save() 在每个 Remove() 之后立即调用 Last() 将返回与以前相同的结果集，仍然包含已删除的元素。

有人可以告诉我这是如何工作的吗？我是否需要每次在 Remove() 之后调用 Save() 才能从 Last() 获取最新信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T06:53:49.457

您不能调用 ToList，它会创建结果集的副本，因此从中删除不会影响原始文档。要从文档中删除元素，只需在元素本身上调用 Remove。例如：

```
XDocument doc = XDocument.Parse("<root><child>a</child><child>b</child></root>");

IEnumerable<XElement> children = doc.Root.Elements("child");

XElement elementToRemove = children.Last();
elementToRemove.Remove();

XElement newLastElement = children.Last();
Console.WriteLine(newLastElement.Value); 
```

children 变量是可枚举的，它只是一个查询的定义。每次您从它开始查询时，它都会重新启动查询，从而为您提供最新的结果。但你桅杆从孩子开始。

无需以任何方式提交更改，它们会立即应用。只有当您想将修改后的文档写回文件时，您才需要在文档上调用 Save。

# ruby-on-rails - Ruby on rails 指南，在索引内容中找不到带有 ajax 的 rails

> ID：11368554
> 
> 赞同：2
> 
> 时间：2012-07-06T19:29:17.300
> 
> 标签：ruby-on-rails, ajax

快速提问：

我一直在学习 ruby​​ on rails 并且[http://guides.rubyonrails.org/index.html](http://guides.rubyonrails.org/index.html)非常好，对学习 rails 有很大帮助。当我使用 AJAX 搜索 rails 时，我在搜索结果中找到了[http://guides.rubyonrails.org/ajax_on_rails.html 。](http://guides.rubyonrails.org/ajax_on_rails.html)[但是我在主页或http://guides.rubyonrails.org/index.html](http://guides.rubyonrails.org/index.html)上的“指南索引”选项卡中找不到它。我怎样才能找到这些隐藏的链接，比如使用 AJAX 的 rails？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T19:39:33.037

在这里检查：

[https://github.com/rails/rails/tree/master/guides/source](https://github.com/rails/rails/tree/master/guides/source)

列出的每个纺织文件都转换为指南的 html 文件。如果您将 .textile 扩展名替换为 .html，您应该能够在指南站点上找到该页面。例如：_welcome.textile 可以在这里找到： [http ://guides.rubyonrails.org/_welcome.html](http://guides.rubyonrails.org/_welcome.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T19:45:03.113

原因是该指南不存在于定义显示哪些指南的documents.yml 文件中。我将在文档邮件列表上发布为什么会这样。

更新：正如 Emily 指出的，该指南尚未完成。

# sql - 基于 varchar 列中的连字符的动态 SQL 查询

> ID：11368556
> 
> 赞同：0
> 
> 时间：2012-07-06T19:29:21.503
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有一个关于我在`SQL Server 2008`数据库中编写的特定查询的问题。这是（更大）查询的一部分，但我会简化它，以便更容易隔离我正在尝试做的事情。

我有一张桌子`TableX`，两列：

*   `IDX (int) identity`
*   `VarX (varchar(20))`

我有两个辅助表，`TableY`并且`TableZ`. 两者都有两列，

```
TableY 
```

*   `IDY (int) identity`

*   `VarY (varchar(20))`

    和`TableZ`

*   `IDZ (int) identity`

*   `VarZ (varchar(20))`

我正在插入第四个表，我们称之为`TableA`. `TableA`有三列：

*   `IDA (int) identity`
*   `IDY (int)`
*   `IDZ (int)`

此表中的 IDY 和 IDZ 字段是表 Y 和表 Z 中标识列的外键。

听起来很复杂，但它是一个非常简单的连接。不过，这就是有趣的地方。

所以里面的数据`TableX`可能是这样的：

```
IDX | VarX
--------------
1   | ABC
2   | ABC-LMN 
```

中的数据`TableY`：

```
IDY | VarY
----------------
1   |ABC
2   | HIJ 
```

中的数据`TableZ`：

```
IDZ | VarZ
----------------
1   | LMN
2   | OPQ 
```

基本上，`VarX`（第二列）要么是单个 varchar 字符串，要么是两个由连字符连接的字符串，没有空格。在没有连字符的单个字符串的情况下，它始终是表 Y 中的匹配项。匹配项将在`VarY`in`TableY = VarX`中`TableX`。我会获取相关的 ID ( `IDY`)，并在插入时使用它`TableA`。

在第 1 行的示例中，插入`TableA`将是`(null, 1, null)`

现在在第 2 行的情况下，它有两个由连字符分隔的字符串。所以插入`TableA`最终会是`(null, 1, 1)`.

所以我的问题是......我如何制定插入及其相应的连接来处理这种类型的逻辑？我确信它必须是一个案例陈述......只是在可视化完整查询时遇到了很多麻烦，因为我不是 DBA.... 任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T19:58:35.617

没有必要制作这个动态 SQL，除非作为它的一部分的 proc 需要它。

```
INSERT INTO TableA (IDY,IDZ)
SELECT ty.IDY, tz.IDZ
FROM TableX tx
LEFT JOIN TableY ty ON ty.VarY =
   (CASE WHEN CHARINDEX('-', tx.VarX) = 0 THEN tx.VarX
   ELSE LEFT(tx.VarX, CHARINDEX('-', tx.VarX) - 1) END)
LEFT JOIN TableZ tz ON tz.VarZ =
   CASE WHEN CHARINDEX('-', tx.VarX) = 0 THEN NULL
   ELSE RIGHT(tx.VarX, LEN(tx.VarX) - CHARINDEX('-', tx.VarX)) END 
```

我故意省略了将 NULL 插入到 中`TableA.IDA`，因为我不知道您为什么要尝试将 NULL 插入到标识列中，或者这是否可能。我还假设中的数据`VarX`不会有退化的情况，例如`'-'`, `'ZXC-'`,`'ASD-BNM '`等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T19:52:40.267

我改了，好像可以简化成这样：

```
DECLARE @x TABLE (IDX INT, VarX VARCHAR(20))
INSERT @x VALUES (1, 'ABC'), (2, 'ABC-LMN')

DECLARE @y TABLE (IDY INT, VarY VARCHAR(20))
INSERT @y VALUES (1, 'ABC'), (2, 'HIJ')

DECLARE @z TABLE (IDZ INT, VarZ VARCHAR(20))
INSERT @z VALUES (1, 'LMN'), (2, 'OPQ') 

DECLARE @a TABLE (IDA INT IDENTITY(1, 1), IDY INT, IDZ INT)

INSERT      @a
SELECT      y.IDY,
            z.IDZ
FROM        @x x
LEFT JOIN   @y y ON y.VarY = LEFT(x.VarX, LEN(y.VarY))
LEFT JOIN   @z z ON z.VarZ = RIGHT(x.VarX, LEN(z.VarZ)) AND CHARINDEX('-', x.VarX) <> 0

 SELECT  *
 FROM    @a 
```

# c - C 程序无法在 Visual Studio 2010 中编译

> ID：11368561
> 
> 赞同：0
> 
> 时间：2012-07-06T19:29:31.533
> 
> 标签：c, visual-studio-2010

我有一个简单的 C 程序，我可以很容易地在 Linux 上通过命令行编译它，但我想使用 Visual Studio 来调试程序，以便我可以更轻松地看到它在做什么，但我无法编译它。

我创建了一个新的 cpp Win32 控制台应用程序。添加了我的 .c 和 .h 文件，但我无法编译它。我得到了 100 多个错误，这些错误主要似乎是红鲱鱼。例如，当我在之前的行上看到它声明时，我有一个错误说没有声明一个变量。例如：

```
int i;
for (i = 0; i < unpacked_length; i++)
{ 
```

在“for”行我收到一个错误：“error C2065: 'i': undeclared identifier”

因此，显然正在发生其他事情。一个似乎合法的错误是：

```
static unsigned char* Base64_Charset = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"; 
```

IntelliSense：“const char *”类型的值不能用于初始化“unsigned char *”类型的实体

由于这在通过命令行编译时有效，我不知道为什么智能感知会在此处给出此错误，除非该编译器具有与我通过命令行使用的另一个不同的规则。我已经有 15 年没有做过任何 C 语言了，不知道这是否会在编译器中有所不同，或者这里是否还有其他事情发生。

源中唯一包含的是：

```
#include "dtcrypt.h"
#include <string.h>
#include <stdlib.h> 
```

感谢任何帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T19:35:04.053

Visual Studio 2010 仅支持 ANSI C（又名 C89），它不支持更现代的 C99 或 C11 语言标准。ANSI C 要求您在函数顶部声明所有变量，您不能在函数中间使用它们之前定义它们。所以尝试像这样重写你的代码：

```
void my_function()
{
    /* Variable declarations go here */
    int i;
    ...

    /* Now teh codez */
    for (i = 0; i < unpacked_length; i++)
    {
        ...
    }
} 
```

对于第二个错误，Intellisense 抱怨它无法将指针转换为`const char`指向`const unsigned char`. 字符串文字有类型`char[]`（字符数组），`char`默认情况下是有符号的。因此，您应该将变量声明为 type`const char *`而不是`const unsigned char *`. 或者，您可以忽略它，因为它不是编译器错误，而是某些警告级别的警告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T19:33:22.123

是否`char`签名是 Visual C++ 中的编译器设置。将其更改为无符号以匹配预期的 GCC 环境。项目属性、C/C++、语言。

至于`i`在循环中，必须有一些您没有显示的额外信息。两条粘贴的线对我来说看起来很干净。

也就是说，我有丰富的在 VC++ 和 GCC 之间移植代码的经验——它几乎不漂亮。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T17:21:16.793

而不是弄乱编译器设置，将其类型转换为“unsigned char *”

例如：unsigned char* Base64_Charset = (unsigned char *)"ABCDEFG";

# android - 嵌入带有 youtube 视频的 webview

> ID：11368562
> 
> 赞同：1
> 
> 时间：2012-07-06T19:29:47.133
> 
> 标签：android, audio, webview, youtube, playback

我正在尝试构建一个带有 webview 的应用程序，它允许 youtube 播放。现在 youtube 的网站正在加载，我可以点击视频，但我只能听到它的声音，看不到任何东西。非常感谢您在这个问题上提供一些帮助。该应用程序已加载到 samsung galaxy s 上。版本 8。

```
import com.keyes.youtube.OpenYouTubePlayerActivity;

import android.app.Activity;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.view.KeyEvent;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.view.View;
import android.view.View.OnClickListener;
import android.webkit.WebChromeClient;
import android.webkit.WebSettings.PluginState;
import android.webkit.WebView;
import android.widget.Button;
import android.widget.ImageButton;
import android.widget.TextView;

public class Youtube extends Activity {

private WebView mWebView;
private String extra;

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main);       

extra = getIntent().getStringExtra("VideosId");        
mWebView = (WebView) findViewById(R.id.webView1); 
mWebView.getSettings().setJavaScriptEnabled(true);
mWebView.getSettings().setPluginState(PluginState.ON);
mWebView.getSettings().setLoadWithOverviewMode(true);// completely zoomed out
mWebView.getSettings().setUseWideViewPort(true);
mWebView.getTouchables();

final Activity activity = this;
mWebView.setWebChromeClient(new WebChromeClient() {
  public void onProgressChanged(WebView view, int progress) {
    // Activities and WebViews measure progress with different scales.
    // The progress meter will automatically disappear when we reach 100%
    activity.setProgress(progress * 1000);
  }
});

mWebView.setWebViewClient(new ourViewClient());   

mWebView.loadUrl("http://www.youtube.com/watch?v=AIbHWcko0Mg&feature=g-all-bul");     
mWebView.setWebViewClient(new ourViewClient());      
}

@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
if ((keyCode == KeyEvent.KEYCODE_BACK) && mWebView.canGoBack()) {
    mWebView.goBack();
    return true;
}
return super.onKeyDown(keyCode, event);
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T18:54:42.567

好的，所以很伤心，但没有人回答我的问题:(但我自己设法弄清楚了：

API 至少应为 11（android 3.0），并且在应用程序定义中的清单中应包含以下代码：android:hardwareAccelerated="true"。请享用 ！

# iphone - 将 Facebook 粉丝页面添加到新应用程序

> ID：11368567
> 
> 赞同：0
> 
> 时间：2012-07-06T19:30:05.480
> 
> 标签：iphone, facebook, facebook-c#-sdk

在应用程序 > 设置 > 高级下，有一个添加应用程序页面的位置。我已经为我的应用构建了一个应用页面，但这仅允许您创建一个新页面。有什么方法可以将我现有的应用程序页面与此应用程序连接起来？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T07:47:30.963

不，您不能将现有的 FB 页面用作应用程序页面，即使您将页面用作应用程序页面 facebook 也不会将其视为应用程序默认页面，并且您无法访问应用程序。页面按钮..

# java - App Engine 数据存储区中 Blob 的实际大小

> ID：11368568
> 
> 赞同：0
> 
> 时间：2012-07-06T19:30:13.920
> 
> 标签：java, database, google-app-engine

我在我的网络应用程序中使用该`com.google.appengine.api.datastore.Blob`类型。正如参考文献中提到的那样，此类实体的大小为“最多 1 兆字节”。

问题是：如果我将一个小于 1 兆字节（例如 500 KB）的字节数组包装到这个实体中 - 数据库中条目的实际大小是多少 - 实际大小（500 KB）或最大大小（1MB )?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T20:01:48.553

这将是数据的实际大小。您可以通过查看管理面板中的 blob 查看器来判断。

# javascript - 永久占位符？

> ID：11368570
> 
> 赞同：1
> 
> 时间：2012-07-06T19:30:16.347
> 
> 标签：javascript, input

有没有一种简单的方法可以输入带有无法删除的默认起始文本？例如，我想输入一个自定义 url，它有“www.mysite.com/”（在输入中），我希望输入在该位之后继续，但不可擦除。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T19:31:56.680

只需使用：

```
<label>
    Path: www.mysite.com/<input 
        name="path" 
        value="" 
        placeholder="images/foo.jpg">
</label> 
```

...然后在服务器上添加前缀。

您可以将输入的背景和边框设置为透明，然后将合适的背景和边框应用到`<label>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T19:35:15.953

您*可以*为输入设置一个 onKeyPress 处理程序，然后在每次按键时检查输入是否仍以您的前缀开头（如果不是，它可以将其重新添加）。

然而，我怀疑在实践中这将是一个糟糕的想法，无论是从实现的角度还是从可用性的角度来看。

一种更健康的方法是使用做同样事情的 onBlur 事件。它不会*立即*更新输入，但只要用户点击它就会修复它。

# ios - 将 ViewController 嵌入 Storyboard 中的另一个 ViewController

> ID：11368572
> 
> 赞同：12
> 
> 时间：2012-07-06T19:30:20.660
> 
> 标签：ios, uistoryboard

如何使用 Interface Builder 中的 iOS5 ViewController 容器（在故事板上）？

iOS 文档是这样说的（UIViewController -> View Management -> Storyboards）：

> 例如，您可以声明一个视图控制器的内容包含在另一个视图控制器中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-04-12T16:34:50.517

在`Xcode 11.7`Interface Builder（又名 Storyboard 编辑器）中：

1.  按住`Ctrl`并`Click`（即`macOS`右键单击的版本）您的目的地`Controller`（您想嵌入到其他一些`Controller`）。
2.  在弹出菜单中，从`Presenting Segues`部分中，将选项前面的圆圈拖动`Embed`到您的 Source `Controller`。
3.  最后，会出现另一个弹出菜单，选择`viewDidLoad`选项（如果有多个选项）。

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2012-08-09T04:05:53.443

iOS 中的 ViewController 只是一个绑定到视图的对象。界面构建器中的视图控制器可以拥有一百万个视图控制器作为属性，尽管没有理由这样做，除非连接到视图控制器的视图具有一百万个子视图并且它们都需要自己的控制器。

你不能说 iOS 中有视图控制器包含。这是没有意义的。请理解，视图控制器只包含一个视图和您添加到其中的任何插座或代码。

它可以加载并显示另一个视图控制器。它可以保存对另一个视图控制器的引用。但是视图控制器不会通过任何分层方式包含另一个视图控制器。

# web-services - 使用 JBoss 7 部署 Web 服务

> ID：11368578
> 
> 赞同：1
> 
> 时间：2012-07-06T19:30:50.423
> 
> 标签：web-services, jboss7.x

我正在尝试使用 JBoss 7 部署 WebServices。我有一个带有 @WebServices 注释的类。但是，我不断收到来自 JBoss 的错误...

原因：org.jboss.as.server.deployment.DeploymentUnitProcessingException：JBAS011232：只允许一个 JAX-RS 应用程序类。com.sun.jersey.api.core.ScanningResourceConfig com.sun.jersey.api.core.DefaultResourceConfig com.sun.jersey.api.core.ClasspathResourceConfig com.sun.jersey.api.core.ApplicationAdapter com.sun.jersey. api.core.ResourceConfig com.sun.jersey.api.core.servlet.WebAppResourceConfig com.sun.jersey.server.impl.application.DeferredResourceConfig com.sun.jersey.api.core.ClassNamesResourceConfig com.sun.jersey.api。 core.PackagesResourceConfig

这个神秘的其他应用程序在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T19:52:31.810

看起来您可能在应用程序中捆绑了泽西岛。JBoss AS7 使用 RESTEasy 来实现它的 JAX-RS。

# django - Django-nose --with-profile 没有结果（“0 个函数调用”）

> ID：11368579
> 
> 赞同：2
> 
> 时间：2012-07-06T19:30:52.513
> 
> 标签：django, unit-testing, nose, django-nose

我正在尝试诊断一些运行缓慢的单元测试，但我没有运气让探查器与[django-nose](https://github.com/jbalogh/django-nose)一起工作。我想出了一个关于一个全新的 Django 项目的 repo 案例。

```
django-admin.py startproject nosetest
cd nosetest/

virtualenv --no-site-packages --distribute virtualenv
source virtualenv/bin/activate
pip install django_nose

echo "
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3',
        'NAME': ':memory',
    },
}

INSTALLED_APPS = INSTALLED_APPS + ('django_nose', )

TEST_RUNNER = 'django_nose.NoseTestSuiteRunner'
" >> nosetest/settings.py

echo "
import unittest
import time

class SlowTestCase(unittest.TestCase):
    def test_slow(self):
        self.assertFalse(time.sleep(1))
" > nosetest/test.py

python manage.py test --with-profile 
```

这应该在当前目录中创建一个新的 Django 项目，在 virtualenv 中安装一些依赖项，创建一个有效的 settings.py，然后运行一个新的单元测试。

我期待在输出中看到各种函数调用。相反，我得到以下信息：

```
nosetests --verbosity 1 --with-profile
Creating test database for alias 'default'...
.
         0 function calls in 0.000 seconds

   Ordered by: cumulative time

   ncalls  tottime  percall  cumtime  percall filename:lineno(function)
        0    0.000             0.000          profile:0(profiler)

----------------------------------------------------------------------
Ran 1 test in 1.002s

OK
Destroying test database for alias 'default'... 
```

我已经尝试使用带有[nose-cprof 的 cProfiler](https://github.com/msherry/nose-cprof)，但结果相似。任何人都可以让这个相同的项目工作，或者指向我另一个解决方案来分析这个测试吗？

# objective-c - 设置一个基本的基于拆分视图的应用程序

> ID：11368581
> 
> 赞同：1
> 
> 时间：2012-07-06T19:31:00.457
> 
> 标签：objective-c, uisplitviewcontroller

我正在尝试为基于拆分视图的应用程序创建基础，因为在过去的几天里，我花了一段时间查看和尝试那些不起作用、不完整或过时的教程。

我应该遵循哪些步骤，以及在我设置了基础知识之后：

1.  如何更改工具栏上按钮的名称？
2.  我想包括一个弹出菜单；如何更改该菜单顶部的名称？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T19:31:01.220

本教程适用于初学者。如果您已经在 Objective-c 中编码了一段时间，那么您可能不会在这里学到任何东西。

在本教程之后，您将拥有一个基于拆分视图的应用程序，该应用程序具有三个（或更多）不同的视图，以及用于导航应用程序的弹出菜单。

**第 1 步**：获取一些 Apple 代码

从 Apple 获取（下载）MultiDetailsView 示例代码。 [http://developer.apple.com/library/ios/#samplecode/MultipleDetailViews/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/MultipleDetailViews/Introduction/Intro.html)

![在此处输入图像描述](../Images/dec6d3a50ec1219194414537ee414e07.png)

这段代码为我们提供了一个基于 splitview 的应用程序，它有 2 个不同的视图。除非您不知道此示例代码的存在，否则这没什么大不了的。

* * *

**第 2 步**：确保一切正常

在 Xcode 中打开项目。构建，然后运行项目以确保一切正常。当我尝试构建和运行应用程序时，我遇到了这个错误：

`XCode could not find a valid private certificate/valid key-pair for this profile in your keychain`

我意识到我的证书已经过时了（我猜这只是因为代码直接来自苹果？）。如果您碰巧遇到同样的问题，请查看[此](https://stackoverflow.com/questions/5525436/xcode-could-not-find-a-valid-private-certificate-valid-key-pair-for-this-profile)线程。或者，您可以从应用商店的 Xcode 下载最新版本。

无论如何，如果一切正常，您应该有以下 2 个视图： ![在此处输入图像描述](../Images/958ede61c51e6ca1f4750bc947c884ca.png) ![在此处输入图像描述](../Images/984af97bc0a6682de81c6a5e678b6bf8.png)

* * *

**第 3 步**：添加我们自己的视图

**第一部分**：创建文件

现在是添加更多视图的时候了（这可能是您正在寻找的）。

转到文件-> 新文件...

如果您使用**Xcode 4**：选择 Objective-C 类，然后为子类选择 UIViewController，并确保选中“针对 iPad”和“使用 XIB 用于用户界面”。 ![在此处输入图像描述](../Images/7372c6fe2bbd7ebfdb3782c7b6eccec5.png)

如果您使用的是**Xcode 3**：选择 UIViewController 子类，然后选中“Targeted for iPad”和“With XIB for user interface”

![在此处输入图像描述](../Images/c6e35a5d190844e99aa01bf9e4f09824.png)

这些文件将出现在您的左侧菜单中，如果它们位于错误的位置，您可以将它们拖到适当的目录（.h 和 .h 应该在 Classes 下，.xib 应该在资源下）。

![在此处输入图像描述](../Images/e65d8d615731ce3f2d122d40a148e843.png)

首先，将 SecondDetailViewController.h 的内容复制到您的 .h 文件中，并将 SecondDetailViewController.m 的内容复制到您的 .m 文件中。确保它最初说`SecondDetailViewController`的地方现在有你的文件名。

我的 .h 文件： ![在此处输入图像描述](../Images/9ccc7df2db1409bf96a81a8db5f1aed0.png)

我的 .m 文件： ![在此处输入图像描述](../Images/0ba8884ca9f46506a9aef4d135a47a40.png)

* * *

**b 部分**：RootViewController.m 内容

接下来，打开 RootViewController.m

目前，正在导入 3 个原始 .h 文件。我们需要添加我们刚刚创建的那个。

![在此处输入图像描述](../Images/f1e2a3419e444ac31b352ece1779585e.png)

接下来，进入 tableView 方法，将返回值从 2 更改为 3。每次添加新视图时，都需要增加这个数字！（即，如果您在完成本教程后添加另一个视图，请将其更改为 4）。本质上，这个方法只是返回你有多少视图。

![在此处输入图像描述](../Images/a7c3613d49ffe220556b64137c8a2cd4.png)

其下方的方法处理将在您的菜单中显示的内容。我们需要在这里做一些改变。由于我们在 if/else 语句中添加了另一个选项，因此`else`必须将原始选项更改为`if else`，并且我们必须提供一个条件，在我们的例子中，它只是检查它是否是第二行（在索引 1 处）`(indexPath.row == 1)`

![在此处输入图像描述](../Images/4ea415c8933e0e9b498add4e30615bc9.png)

下一个方法处理要显示的视图。添加另一个`if`语句。在第一行，我有`YourViewHereViewController`绿色，你应该有你的 .h / .m 文件的名称。然后我`@"YourViewHereViewController"`在红色的地方，你应该有你的 .xib 文件的名称。

![在此处输入图像描述](../Images/afb25f1b1d8c441b39d90045cd6aaa72.png)

* * *

**c部分**：xib

最后但同样重要的是，我们需要处理我们的 xib 文件。首先打开 SecondDetailView.xib 并复制视图。然后将其粘贴到您创建的 .xib 文件中（删除可能首先存在的任何内容）。您可以通过双击文本来更改视图的标题。

![在此处输入图像描述](../Images/e366346d48c48a3b208f8b6d80096a52.png)

最后要做的是行连接。按住 Control 并单击 Files's Owner，然后将其拖到工具栏并选择工具栏（这就是 RootController 按钮将出现在工具栏上的方式）。

![在此处输入图像描述](../Images/5554ad774d10b325ebfe6c9355e62bb7.png)

再次按住 Control 单击 File's Owner，然后将其拖到视图并选择视图。

![在此处输入图像描述](../Images/b8f2db6c1cad52004f3a944e065793cd.png)

* * *

如果你现在运行它，一切都应该工作！

* * *

以下是我在这一点上的一些问题：

**问：如何更改工具栏上按钮的名称？** A: 工具栏（以及按钮）是从 RootViewController.m 文件控制的，找这个方法

```
- (void)splitViewController:(UISplitViewController*)svc willHideViewController:(UIViewController *)aViewController withBarButtonItem:(UIBarButtonItem*)barButtonItem forPopoverController:(UIPopoverController*)pc {

    // Keep references to the popover controller and the popover button, and tell the detail view controller to show the button.
    barButtonItem.title = @"Root View Controller";
    self.popoverController = pc;
    self.rootPopoverButtonItem = barButtonItem;
    UIViewController <SubstitutableDetailViewController> *detailViewController = [splitViewController.viewControllers objectAtIndex:1];
    [detailViewController showRootPopoverButtonItem:rootPopoverButtonItem];
} 
```

请注意`barButtonItem.title = @"Root View Controller";`，将 更改`@`为您想要的任何内容！注意：如果您将此字段留空，则该按钮将不会出现！

**问：如何更改弹出菜单顶部的名称？** ![在此处输入图像描述](../Images/c9ca717d54d698a35a4ef4ee2aeff1c8.png)

A：添加以下行来声明/更改名称。`self.title = @"Menu";`，在您的 RootViewController.m 文件中，在`- (UITableViewCell *)tableView:(UITableView *)aTableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {`方法中。

![在此处输入图像描述](../Images/7828110d49de654e36040cf4090f5e4b.png)

# javascript - 我需要创建一个 PayPal“立即付款”按钮，该按钮将根据选定的复选框识别总价

> ID：11368587
> 
> 赞同：0
> 
> 时间：2012-07-06T19:31:33.577
> 
> 标签：javascript, html, paypal, calculator

我有一个简单的表格。它有几个复选框。我使用这个脚本来自动添加和显示被点击的复选框的总值：

```
<script type=text/javascript>
function getTotal(){
var form=document.theForm;
var inputs=form.getElementsByTagName('input');
var length=inputs.length;
var total='0';

for(i=0;i<length-1;i++){
  if(inputs[i].type == 'checkbox'){
  var checked=inputs[i].checked?1:0;
    if(checked){
    var value=inputs[i].value.split("~~")[0];
    total += value;
    }
  }
}
document.getElementById('totalspan').innerHTML="Total price will be: $"+total
total='0';
}

</script> 
```

我有一个 Paypal 的“立即付款”按钮，但它无法识别该值。当您单击该按钮时，它只会显示为 $0，因为没有任何东西将它链接到表单。那么，如何根据所选复选框的总价值制作一个支付按钮，该按钮将知道价格是多少？我试图尽可能简单地解释这一点，但我是 HTML 和脚本的新手，对它们的工作原理知之甚少。

这是立即付款按钮脚本：

```
<form action="https://www.paypal.com/cgi-bin/webscr" method="post">
 <input type="hidden" name="cmd" value="_xclick"/>
 <input type="hidden" name="business" value="harterzach10@yahoo.com"/>
 <input type="hidden" name="button_subtype" value="services"/>
 <input type="image" src="https://www.paypal.com/en_US/i/btn/btn_paynow_SM.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!"/>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T07:48:34.297

您只需要在该 paypal 表单中添加一个额外的字段。我不知道 JavaScript 与您的页面相关的位置，但如果您发布整个 HTML 代码，我们可以进一步帮助您。

```
<input type="hidden" name="amount" value="PRICE GOES HERE" /> 
```

# jquery - jQuery ajax 数据两个变量

> ID：11368588
> 
> 赞同：4
> 
> 时间：2012-07-06T19:31:46.160
> 
> 标签：jquery, ajax, variables

我正在尝试使用 jquery 通过 ajax 发送一些数据

```
var name = $(".name").attr("data-name");
var value = $(".value").attr("data-value");

$.ajax({
    url: 'panel.php',
    type: 'post',
    data: {name: value}
}).done(function(){
    alert("saved!");
}); 
```

那么name和value怎么可能是两个变量呢。现在只有 value 是一个变量，但是 name 呢？

干杯

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-06T19:37:37.973

尝试这个：

```
var name = "data-name";
var value = "data-value";
var dataObj = {};

dataObj[name]=value;

$.ajax({
    url: 'panel.php',
    type: 'post',
    data: dataObj,
}).done(function(){
    alert("saved!");
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T19:34:44.757

您需要将其包装到 DTO（数据传输对象）：

```
var obj = {};
obj.name = name;
obj.value = value;

//Convert to a DTO Object
var dto = { 'myData': obj }; 
```

# integration - 如何构建与消息传递的两个系统集成

> ID：11368589
> 
> 赞同：0
> 
> 时间：2012-07-06T19:31:51.230
> 
> 标签：integration, nservicebus, rabbitmq, esb

我需要在客户站点集成两个不同的系统，并且不知道 NServiceBus 或 RabbitMQ 等消息传递解决方案是否是正确的选择。老实说，我还没有完全理解他们实际上试图解决什么问题......

系统 1 是一个会计系统。系统 2 是一个制造系统。

两者都使用 SQL 服务器，但它们在物理上是分开的，我不能使用像 SSIS 这样的东西。（简化的）目标是在系统 1 中创建的新订单将在系统 2 中创建等效订单。在系统 2 中创建订单后，我需要将系统 2 的参考编号写回系统 1。

我已经与这些系统的两家供应商进行了交谈。我可以在 System 1 的数据库中的“订单”表中创建一个 SQL 触发器。为了在系统 2 中创建订单，我可以写入他们数据库中的“importorders”表。系统 2 将每 1-2 分钟安排一个任务，在其系统中创建新订单并将参考编号写回行中。当然，我也可以在这个表（'importorders'）上有一个触发器。

在两者之间进行集成的好解决方案是什么？

我听说过 NServiceBus 和 RabbitMQ，但我不知道它们是否是解决此类问题的正确工具？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T06:53:35.253

如果您没有能力修改任一系统的代码并且必须在 SQL 级别进行集成，那么消息传递可能不是您的最佳选择。

# hadoop - UDTF 支持 SELECT 子句中的单个表达式

> ID：11368607
> 
> 赞同：1
> 
> 时间：2012-07-06T19:32:48.320
> 
> 标签：hadoop, mapreduce, hive

这是我正在使用的以下查询，每次我得到以下语义分析错误。

```
hive> select explode(test2.purchased_item.product_id) AS prodID, 
explode(test2.purchased_item.timestamps) AS time from testingtable2 test2;

FAILED: Error in semantic analysis: Only a single expression in the SELECT clause
is supported with UDTF's 
```

我不能在单个选择语句中使用两个爆炸的蜂巢有什么限制吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T21:25:19.930

[是的 - 根据https://cwiki.apache.org/confluence/display/Hive/LanguageManual+UDF#LanguageManualUDF-explode](https://cwiki.apache.org/confluence/display/Hive/LanguageManual+UDF#LanguageManualUDF-explode)，您似乎是每个 SELECT 唯一使用的explode调用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-02T13:22:22.087

使用横向视图。我从“Programming Hive”中获取了这个

> Hive 提供了 LATERAL VIEW 功能来允许这种查询：

```
hive> SELECT name, sub
> FROM employees
> LATERAL VIEW explode(subordinates) subView AS sub; 
```

# java - Java - 使用预先共享的公钥对流量进行非对称加密，没有信任存储的麻烦

> ID：11368612
> 
> 赞同：1
> 
> 时间：2012-07-06T19:33:26.600
> 
> 标签：java, encryption, cryptography, encryption-asymmetric, truststore

我正在尝试使用 RSA 预共享密钥进行通信，理想情况下，*不*涉及信任库恶作剧

设置基本上是这样的：

*客户端有一个小程序，服务器端有一个 servlet（duh :)）*

*小程序有 servlet 的 RSA 公钥 (Spub) 硬编码。*

*servlet 有自己的 RSA 私钥 (Spriv) 硬编码。*

*他们的小程序生成一个随机的 AES 256 密钥（会话密钥），用 servlet 的公钥（它已经硬编码）对其进行加密，通过 TCP 套接字连接到 servlet，并将 RSA 加密的密钥发送到 servlet，后者继续解密会话密钥并将其用于与此小程序的任何进一步通信，只要此套接字连接持续。*

我宁愿在不弄乱信任库之类的情况下完成这一切（毕竟，这是一个相对简单的设置，允许预共享的硬编码公钥）

关于我应该从哪里开始自我教育的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T05:17:31.417

我同意 SSL 是一种不错的方式的评论，但要回答您的直接问题，您描述的方案相当简单，并且似乎没有泄露任何秘密。这是客户端的 RSA 部分的实现，基于硬编码的公钥。

```
// Hardcoded values extracted from getModulus of a generated KeySpec.
private static BigInteger mod = new BigInteger("113...");
private static BigInteger exp = new BigInteger("217...");

private PublicKey hardCodedKey() {
    RSAPublicKeySpec keySpec = new RSAPublicKeySpec(mod, exp);
    KeyFactory keyFactory = null;
    PublicKey rsaKey = null;
    try {
        keyFactory = KeyFactory.getInstance("RSA");
        rsaKey = keyFactory.generatePublic(keySpec);
    } catch (Exception ex) {
        throw new IllegalStateException(ex);
    }
    return rsaKey;
}

private byte[] encrypt(PublicKey pubKey, byte[] plaintext) {
    try {
        Cipher cipher = Cipher.getInstance("RSA");
        cipher.init(Cipher.ENCRYPT_MODE, pubKey);
        return cipher.doFinal(plaintext);
    } catch (Exception ex) {
        throw new IllegalStateException(ex);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-07T14:38:29.540

尽管您可以通过构建`PublicKey`和使用来使用较低级别的加密函数`Cipher`，但值得考虑使用 JSSE：它将在套接字的上下文中提供所有这些。此外，SSL/TLS 提供的加密是通过在握手期间协商的共享密钥完成的（除其他外，它比非对称加密更快）。

您可以使用自签名证书构建一个信任库，用于预共享该公钥。您可以按如下方式加载它（注意`InputStream`不一定是 a `FileInputStream`，例如，您可以从内存中读取内容）：

```
TrustManagerFactory tmf = TrustManagerFactory
    .getInstance(TrustManagerFactory.getDefaultAlgorithm());
KeyStore ks = KeyStore.getInstance("JKS");
InputStream is = ...
ks.load(is, null);
// or ks.load(is, "thepassword".toCharArray());
is.close();

tmf.init(ks);

SSLContext sslContext = SSLContext.getInstance("TLS");
sslContext.init(null, tmf.getTrustManagers(), null);

SSLSocketFactory = sslContext.getSocketFactory();
// ... 
```

这是使用 JSSE 的正常方式。如果您想将 SSL/TLS 与显式 RSA 公钥一起使用，则必须实现自己的`TrustManager`做显式比较（而不是使用`TrustManagerFactory`）：这肯定会使代码更长更复杂。

如果你在一个小程序中运行所有这些，你可能仍然有关于小程序权限系统的问题，以建立套接字连接。请参阅[*小程序可以做什么和不能做什么*](http://docs.oracle.com/javase/tutorial/deployment/applet/security.html)。

# html - 将样式应用于 div 下的任何级别

> ID：11368614
> 
> 赞同：0
> 
> 时间：2012-07-06T19:33:35.693
> 
> 标签：html, css, css-selectors

这是我的CSS：

```
div.leftNav 
{
}

div.leftNav a:link { color: black; }
div.leftNav a:visited { color: black; }
div.leftNav a:active { color: black; }
div.leftNav a:focus { color: black; } 
```

问题是`a`标签不是直接在`div`具有 class 的下面`leftNav`，它是向下的多个级别，有时在其他元素中，例如`span`s。我的目标是影响一个下的所有链接`div`，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T23:13:09.530

这将选择 .leftNav 中的任何锚元素并将其设置为黑色。

```
.leftNav a { color: black; } 
```

您不需要按元素（div.leftNav）进行选择，这是一种不好的做法，因为一旦您将类 .leftNav 分配给除 div 之外的任何其他元素，它就会使您的选择器中断。您也不需要选择 a (a:link, a:focus 等) 的每个伪类，因为如果您没有为它们提供特定的全局样式 (a:visited, a:link)，它们将被上面的选择器覆盖等），如果您必须在 CSS 中的多个位置覆盖该全局规则，这也是一种不好的做法。

但是，如果您使用 a:visited 和 a:link 全局设置链接样式，请为它们分配一个类（例如 .link），而不是按元素选择它们，并以这种方式设置它们的样式：

```
.link:link { color: blue; }
.link:visited { color: green; } 
```

这意味着您不必为看起来不同的链接重写样式，只是不要为这些链接分配 .link 类。

# redis - Redis-cli --csv 选项（导出到 csv）

> ID：11368615
> 
> 赞同：21
> 
> 时间：2012-07-06T19:33:39.907
> 
> 标签：redis

我想将我在从属服务器上的 Redis 数据的一个子集导出到一个 csv 文件。我注意到 redis-cli 中添加了一个新的 csv 输出选项，但我无法找到它如何工作的文档。启用该选项会将命令输出以 csv 格式打印到屏幕。将其转换为 csv 文件的最佳方法是什么？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-07-06T21:31:31.753

前沿！

我刚刚查看了[源代码](https://github.com/antirez/redis/blob/3.0/src/redis-cli.c#L477-L511)，它所做的只是将命令作为逗号分隔值输出到标准输出。这不足为奇。

因此，只要您在 Linux 上，您就可以以[标准方式](https://stackoverflow.com/questions/6674327/redirect-all-output-to-file)将其重定向到一个文件？

例如/

```
redis-cli --csv your-command > stdout.csv 2> stderr.txt 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-08-10T23:47:59.040

命令：

```
redis-cli --csv hgetall mykey > stdout.csv 
```

创建了一个 CSV 文件，如：

```
"id","value","id","value", ... 
```

为了让生活**更轻松**，我使用了：

```
sed -i 's/\([^\",]*",[^,]*\),/\1\n/g' stdout.csv 
```

它将输出转换为：

```
"id", "value"
"id", "value"
"id", "value"
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-23T16:21:54.937

转到`src`redis目录并运行以下命令

```
./redis-cli $command > $file_name 
```

示例：`./redis-cli SMEMBERS "$KEY" > $file_name(RANDOM NAME)`

这对我有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-13T07:52:54.027

如果是套接字和/或多个 redis 服务器，您需要执行以下操作：

```
redis-cli -s /path/to/socket --csv your-command > stdout.csv 2> stderr.txt 
```

例如

```
redis-cli -s /var/run/redis/redis4.sock --csv lrange my_list 0 -1 > stdout.csv 2> stderr.txt 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-11-14T14:22:09.073

如果您不需要像这样将值用引号括起来`--csv`，那么原始输出就足够了，您只需将每 2 行用逗号连接起来即可获得 CSV：

```
redis-cli <your redis command> | paste -d ","  - - > out.csv 
```

# c# - 为什么我无法使用 ImageMagickNet 打开 PDF 文件？

> ID：11368617
> 
> 赞同：0
> 
> 时间：2012-07-06T19:33:46.113
> 
> 标签：c#, .net, pdf, imagemagick, imagemagick.net

这是有问题的代码：

```
MagickNet.InitializeMagick();
ImageMagickNET.Image image = new ImageMagickNET.Image(@"C:\temp.pdf");
image.Quality = 100;
image.CompressType = ImageMagickNET.CompressionType.LosslessJPEGCompression;
image.Write(@"C:\temp.jpg"); 
```

我相当确定这段代码应该可以工作，但我得到了异常信息丰富的异常：`External component has thrown an exception.`

上线抛出这个异常：`ImageMagickNET.Image image = new ImageMagickNET.Image(@"C:\temp.pdf");`

内部异常：空

堆栈跟踪：

```
 at Magick.Image.{ctor}(Image* , basic_string<char\,std::char_traits<char>\,std::allocator<char> >* )
   at ImageMagickNET.Image..ctor(String imageSpec)
   at WindowsFormsApplication1.Form1.ReadQRCode(String doc) in C:\Users\me\Documents\Visual Studio 2010\Projects\WindowsFormsApplication1\WindowsFormsApplication1\Form1.Designer.cs:line 126
   at WindowsFormsApplication1.Form1.seperatePDFsInOrder(String fileName) in C:\Users\me\Documents\Visual Studio 2010\Projects\WindowsFormsApplication1\WindowsFormsApplication1\Form1.Designer.cs:line 109
   at WindowsFormsApplication1.Form1.InitializeComponent() in C:\Users\me\Documents\Visual Studio 2010\Projects\WindowsFormsApplication1\WindowsFormsApplication1\Form1.Designer.cs:line 44
   at WindowsFormsApplication1.Form1..ctor() in C:\Users\me\Documents\Visual Studio 2010\Projects\WindowsFormsApplication1\WindowsFormsApplication1\Form1.cs:line 16
   at WindowsFormsApplication1.Program.Main() in C:\Users\me\Documents\Visual Studio 2010\Projects\WindowsFormsApplication1\WindowsFormsApplication1\Program.cs:line 20
   at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
   at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
   at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
   at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.ThreadHelper.ThreadStart() 
```

有人知道我可能做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T09:03:15.937

您似乎在第二行引用的行中将您声明`image = new`为***.pdf**文件。最好用`c:\tmp.jpg`. 或者甚至更好`c:\temp\tmp.jpg`...

如果ImageMagick看到后缀 *.pdf，它会应用其*“我想将此文件解析为 PDF”模式。*（仅当文件名没有后缀时，它才会应用其神奇的文件类型发现例程。）

运行代码的用户也可能无法写入文件`c:\tmp.jpg`。可能有两个原因：

1.  c:\ 作为该用户不可写的目录。
2.  该文件已经存在，并且不能被这个用户覆盖（它可能属于另一个用户）。

最后，**请注意 ImageMagick 将 PDF 作为输入处理的能力依赖于外部“委托”：**它本身无法完成这项工作，它需要在同一主机上安装 Ghostscript 来调用它并让它完成工作......

# facebook - 我的 Facebook 应用程序无法使用 cookie

> ID：11368618
> 
> 赞同：-3
> 
> 时间：2012-07-06T19:33:53.397
> 
> 标签：facebook, internet-explorer, cookies, safari

Internet Explorer 有时不保留 cookie，并且 Safari 根本无法运行。

我决定放弃 cookie，并从签名请求数据中提取“用户 ID”（对于每个请求/页面），这个想法只适用于我的主页。

但是当试图在我的应用程序中查看其他页面时，我不再有签名的请求，而且 cookie 仍然存在问题。

我不知道其他应用程序是如何做到的，但这看起来是不可能的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T09:34:10.293

在这里我今天在 FB C# JS SDK 中遇到了同样的问题

我现在使用无 Cookie 会话，它工作得很好

**尝试无 Cookie 会话**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T19:21:37.287

挖掘后，Internet Explorer 需要一个 P3p 标头来接受 cookie 和 safari 问题就这样解决了

```
https://gist.github.com/586182

http://stackoverflow.com/questions/9930671/safari-3rd-party-cookie-iframe-trick-no-longer-working 
```

好吧，这花了我很长时间才找到解决方案，谢谢。

# iis - IIS 要求登录凭据

> ID：11368619
> 
> 赞同：7
> 
> 时间：2012-07-06T19:33:58.707
> 
> 标签：iis

我在虚拟机上安装了这个 Windows Server，并且我在该虚拟机的 IIS 上有一个网站，用于某些测试目的。这里的问题是，每次我想访问该网站时，该网站都会询问我一些用户名和密码。起初我不知道为什么，我尝试使用网站登录，但没有成功。然后我使用虚拟机的登录，这就是它的工作方式。我的问题是，如何禁用它？该站点位于一个虚拟目录中，我将它放在我的文档中。起初我以为是这样，但是当我将“我的文档”文件夹的安全性更改为共享时，它仍然不断要求我提供凭据。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T19:45:04.927

这可能与 IIS 中站点的身份验证设置有关。您是否通过 IIS 为该站点启用了 Windows 身份验证？这是一个很好的链接，应该有助于解决您的问题：

[http://www.c-sharpcorner.com/Forums/Thread/123890/site-deployed-in-iis-7-is-always-asking-for-username-and-pas.aspx](http://www.c-sharpcorner.com/Forums/Thread/123890/site-deployed-in-iis-7-is-always-asking-for-username-and-pas.aspx)

# django - 如何使用外键在 django 模板中重新组合

> ID：11368627
> 
> 赞同：0
> 
> 时间：2012-07-06T19:34:57.600
> 
> 标签：django, django-templates

我正在尝试显示按类别分组的成分列表。我已经显示了一个类别 ID 列表，但我似乎无法继续前进。这是我的设置，非常感谢任何帮助。

```
# models.py
class IngredienceCategory(models.Model):
    name = models.CharField(max_length=30)

    def __unicode__(self):
        return self.name

class Ingredience(models.Model):
    name = models.CharField(max_length=30)
    category = models.ForeignKey(IngredienceCategory, null=True, blank=True)

    def __unicode__(self):
        return self.name

# views.py
def home(request):
    ingredients = Ingredience.objects.all()
    ingrcat = IngredienceCategory.objects.all()

    return render_to_response('home.html', {'ingredients': ingredients, 'ingrcat': ingrcat,})

# home.html template
<h2>List of items by category:</h2>
{% regroup ingredients|dictsort:"category_id" by category_id as ingr_by_cats %}
{% for category in ingr_by_cats %}
    <p>{{ category.grouper }}</p>
    <ul>
        {% for item in ingrcat.list %}
            <li><a href="#" id="{{ item.id }}">{{ item.name }}</a></li>
        {% endfor %}
    </ul>
{% endfor %} 
```

我目前得到的：

```
<h2>List of items by category:</h2>
<p>1</p>
<ul></ul>

<p>2</p>
<ul></ul>

<p>3</p>
<ul></ul> 
```

我想要达到的目标：

```
<h2>List of items by category:</h2>
<p>Category A</p>
<ul>
    <li>Item 1</li>
    <li>Item 2</li>
    <li>Item 3</li>
</ul>

<p>Category B/p>
<ul>
    <li>Item 4</li>
    <li>Item 5</li>
    <li>Item 6</li>
</ul>

<p>Category C</p>
<ul>
    <li>Item 7</li>
    <li>Item 8</li>
    <li>Item 9</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T19:42:57.887

你的问题在这里：

```
{% for item in ingrcat.list %} 
```

你应该有：

```
{% for item in category.list %} 
```

# java - 解析日期字符串时抛出多个异常

> ID：11368632
> 
> 赞同：20
> 
> 时间：2012-07-06T19:35:37.017
> 
> 标签：java, tomcat, simpledateformat

我正在尝试将字符串解析为对象构造函数中的日期，我们将其称为`Example`. 这是代码

```
private static final SimpleDateFormat sdf = new SimpleDateFormat(
        "yyyy-MM-dd HH:mm:ss");

private long time;

public Example(String date) {
    try {
        this.time = sdf.parse(date).getTime();
    } catch (Exception e) {
        logger.log(Level.WARNING, "Exception while parsing date " + date, e);
    }
} 
```

现在，我在 Tomcat 实例中创建这些对象（无论是否有任何区别）。

我得到以下类型的异常

```
Fri Jul 06 15:13:48 EDT 2012 WARNING: Exception while parsing date 2012-07-06 18:57:31
java.lang.NumberFormatException: For input string: ""
    at java.lang.NumberFormatException.forInputString(NumberFormatException.java:48)
    at java.lang.Long.parseLong(Long.java:431)
    at java.lang.Long.parseLong(Long.java:468)
    at java.text.DigitList.getLong(DigitList.java:177)
    at java.text.DecimalFormat.parse(DecimalFormat.java:1297)
    at java.text.SimpleDateFormat.subParse(SimpleDateFormat.java:1589)
    at java.text.SimpleDateFormat.parse(SimpleDateFormat.java:1311)
    at java.text.DateFormat.parse(DateFormat.java:335)
    at ...
Fri Jul 06 15:13:48 EDT 2012 WARNING: Exception while parsing date 2012-07-06 19:00:07
java.lang.NumberFormatException: multiple points
    at sun.misc.FloatingDecimal.readJavaFormatString(FloatingDecimal.java:1082)
    at java.lang.Double.parseDouble(Double.java:510)
    at java.text.DigitList.getDouble(DigitList.java:151)
    at java.text.DecimalFormat.parse(DecimalFormat.java:1302)
    at java.text.SimpleDateFormat.subParse(SimpleDateFormat.java:1934)
    at java.text.SimpleDateFormat.parse(SimpleDateFormat.java:1311)
    at java.text.DateFormat.parse(DateFormat.java:335)
    at ...
Fri Jul 06 15:13:48 EDT 2012 WARNING: Exception while parsing date 2012-07-06 19:13:21
java.lang.ArrayIndexOutOfBoundsException: -1
    at java.text.DigitList.fitsIntoLong(DigitList.java:212)
    at java.text.DecimalFormat.parse(DecimalFormat.java:1295)
    at java.text.SimpleDateFormat.subParse(SimpleDateFormat.java:1934)
    at java.text.SimpleDateFormat.parse(SimpleDateFormat.java:1311)
    at java.text.DateFormat.parse(DateFormat.java:335)
    at ...
Fri Jul 06 15:48:06 EDT 2012 WARNING: Exception while parsing last check string 2012-07-06 19:08:08
java.lang.NumberFormatException: For input string: ".200172E4.200172"
    at sun.misc.FloatingDecimal.readJavaFormatString(FloatingDecimal.java:1222)
    at java.lang.Double.parseDouble(Double.java:510)
    at java.text.DigitList.getDouble(DigitList.java:151)
    at java.text.DecimalFormat.parse(DecimalFormat.java:1302)
    at java.text.SimpleDateFormat.subParse(SimpleDateFormat.java:1589)
    at java.text.SimpleDateFormat.parse(SimpleDateFormat.java:1311)
    at java.text.DateFormat.parse(DateFormat.java:335)
    at ... 
```

所以日期失败了

```
2012-07-06 18:57:31
2012-07-06 19:00:07
2012-07-06 19:13:21
2012-07-06 19:08:08 
```

`time`但是，如果我进行单元测试，我会从这些字符串中获得以下值

```
1341615451000
1341615607000
1341616401000
1341616088000 
```

所以该`SimpleDateFormat`对象确实有效......但不在服务器上？我注意到这个问题发生在服务器启动附近，如果有帮助的话，以后不会发生。不太确定下一步该做什么。

使用 Tomcat 7.0 和 Java 1.6 更新 32。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-07-08T18:22:25.820

SimpleDateFormat 不是线程安全的，正如[https://www.palantir.com/2007/07/simpledateformat-is-not-thread-safe/](https://www.palantir.com/2007/07/simpledateformat-is-not-thread-safe/)所解释的那样， 有时，使用“静态”对象时真正奇怪或不合逻辑的行为来自并发问题

要解决这种情况，请每次使用一个新实例（这比同步要好，因为同步会引发瓶颈问题）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-07T03:00:42.750

SimpleDateFormat 不是线程安全的：请参阅 Javadoc。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-05-17T17:12:51.300

从 Java 8+ 开始，最好选择`java.time`基于解决方案的解决方案。

中的类`java.time`是**线程安全**的。

您可以像这样实现等效的日期提取：

```
import java.time.LocalDateTime;
import java.time.format.DateTimeFormatter;

...

DateTimeFormatter formatter = DateTimeFormatter.ofPattern("yyyy-MM-dd HH:mm:ss");

LocalDateTime date = LocalDateTime.parse(str, dockerDateFormatter); 
```

然后从中查询您需要的字段`date`。

[JavaDoc 中有关DateTimeFormatter](https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html)和[LocalDateTime](https://docs.oracle.com/javase/8/docs/api/java/time/LocalDateTime.html)的更多详细信息。

另一个[TLDR 资源](http://www.vogella.com/tutorials/JavaDateTimeAPI/article.html)，带有两个现成的示例。

# algorithm - 使用 Kruskal 算法找到图中的最小切割？

> ID：11368635
> 
> 赞同：5
> 
> 时间：2012-07-06T19:35:48.437
> 
> 标签：algorithm, math, minimum-spanning-tree, minimum-cut, kruskals-algorithm

> 我们已经看到生成树和切割是密切相关的。这是另一个连接。让我们删除 Kruskal 算法添加到生成树的最后一条边；这将树分成两个组件，从而在图中定义了一个切割 (S,S)。我们能说什么？假设我们正在处理的图是未加权的，并且它的边是随机均匀排列的，以便 Kruskal 算法处理它们。这是一个值得注意的事实：至少有 1/n^2 的概率，(S,S) 是图中的最小割，其中割的大小 (S, S) 是 S 和 S 之间交叉的边数. 这意味着重复该过程 O(n^2) 次并输出找到的最小切割以高概率产生 G 中的最小切割：用于未加权最小切割的 O(mn^2 log n) 算法。

*   这不取决于通过 Kruskal 算法处理图形的 n^2 种独特方法这一事实吗？我的意思是，如果Kruskal 算法*只有*3 种独特的方式来处理具有 10 个节点的图，那么重复该过程 n^2 次将不会产生 n^2 独特的“最后一条边”。在唯一的最终切割少于 n^2 个（即少于 n^2 个唯一的“最后边缘”）的情况下，它将如何工作？

*   如果总共有少于 n^2 条边怎么办？例如，您可以有一个只有 9 条边的 10 个节点的连通图，这意味着无论您重复该算法多少次，您都不会有 n^2 个唯一的“最后一条边”。在这种情况下它将如何工作？

*   循环遍历每个边缘并检查边缘是否是最小切割不是更容易吗？在 n 个节点的图中，唯一边的最大数量为 n + n-1 + n-2... + 1 条边，小于 n^2。考虑到 n^2 小于 n^2 log n，为什么不直接遍历所有边，因为这样更快？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T20:05:06.903

我认为您可能误解了该算法的工作原理。该算法的工作原理是运行 Kruskal 算法，直到添加最后一条边，然后在此之前停止。该算法不会尝试建立这些“最后一条边”的集合；相反，重复运行 Kruskal 算法的 O(n ² ) 随机迭代，以建立 O(n ² ) 可能的削减。在所有这些候选切割中取最低切割，然后以高概率给出最小切割。换句话说，如果边数少于 O(n ² ) 则无关紧要。重要的是最后保留的切口，而不是考虑的最后一个边缘。

希望这可以帮助！

# c# - 读取包含复杂数据的 Windows 事件负载

> ID：11368636
> 
> 赞同：0
> 
> 时间：2012-07-06T19:35:57.753
> 
> 标签：c#, xml, windows, event-log, complex-data-types

在我之前的问题中[，](https://stackoverflow.com/questions/11250992/deserialize-xml-string-to-object-error-there-is-an-error-in-xml-document-1-2)我发布了我试图序列化的 xml。这是另一个 XML 示例：

```
<Event xmlns="http://schemas.microsoft.com/win/2004/08/events/event"> 
    <System> 
        <Provider Name="XXXXXXXXXX" Guid="{YYYYYYYY}" />  
        <EventID>XYZ</EventID>  
        <Version>0</Version>  
        <Level>L</Level>  
        <Task>A</Task>  
        <Opcode>0</Opcode>  
        <Keywords>0x000xyzh</Keywords>  
        <TimeCreated SystemTime="2012-06-28T15:44:04.997837000Z" />  
        <EventRecordID>153</EventRecordID>  
        <Correlation ActivityID="{DDDDDDDDD}" />  
        <Execution ProcessID="199999" ThreadID="90990" />  
        <Channel>Microsoft-Windows-ABCDEFG/Admin</Channel>  
        <Computer>myPC</Computer>  
        <Security UserID="ABCABC" />  
    </System> 
    <EventData> 
        <Data Name="name1">data1</Data>  
        <Data Name="name2">data2</Data>  
        <Data Name="name3">data3</Data>  
        <ComplexData Name="XYZXYZ">0C004300310022002D004400460053005400450053002200310003004E0053003200230041002D00570041002D00320045004400000047006C002900620061006C0048006900670068005000720069006F007200240074006600120044006100730087000000000000000000000000000000</ComplexData> 
    </EventData> 
    <RenderingInfo Culture="en-US"> 
        <Message>some message </Message>  
        <Level>Information</Level>  
        <Task>XYZ</Task>  
        <Opcode>Info</Opcode>  
        <Channel />  
        <Provider />  
        <Keywords> 
            <Keyword>XYZ</Keyword>  
        </Keywords> 
    </RenderingInfo> 
</Event> 
```

一个区别是它具有复杂数据，这是一个定义整数值数组（后续字符串的长度......等）和字符串 unicode 的结构。我想出了一种逐字节解码该字符串的方法，但我需要一种更简洁的方法来做到这一点。如果 EventRecord.ToXml() 不是获取事件有效负载（包括复杂数据/结构/数组）的最佳方式，那么获得它的最佳方式是什么。msdn上有很多Windows Event相关的类，不知道用哪一个。

谢谢

**编辑：** 这是我所知道的关于 ComplexData 的一些示例：

```
 <data  
                  inType="win:UInt16"  
                  name="XYZLength"  
                  />  
              <data  
                  inType="win:UnicodeString"  
                  length="XYZLength"  
                  name="XYZ"  
                  /> 
```

这意味着前两个字节（低端格式）是以下 unicode 字符串的长度，依此类推。对于那些没有长度的，我需要找到空终止，它是 16 位零（2 字节的零）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T21:13:48.763

```
public class Event
{
    [XmlArrayItem(typeof(Data))]
    [XmlArrayItem(typeof(ComplexData))]
    public object[] EventData;
}

public class Data
{
    [XmlAttribute]
    public string Name { get; set; }

    [XmlText]
    public string Value { get; set; }
}

public class ComplexData
{
    [XmlAttribute]
    public string Name { get; set; }

    [XmlText(DataType = "hexBinary")]
    public byte[] Encoded { get; set; }
} 
```

请阅读文档：

*   [XML 序列化简介](http://msdn.microsoft.com/en-us/library/182eeyhh)
*   [使用属性控制 XML 序列化](http://msdn.microsoft.com/en-us/library/2baksw0z)
*   [XML 序列化示例](http://msdn.microsoft.com/en-us/library/58a18dwa)

# facebook - Facebook 发送对话框不适用于除 Google 之外的任何 URL

> ID：11368639
> 
> 赞同：-3
> 
> 时间：2012-07-06T19:36:19.437
> 
> 标签：facebook, facebook-javascript-sdk, facebook-ui

我正在尝试使用 Facebook 的 JavaScript SDK 让用户将链接发送给另一个用户，即使用`FB.ui(data, callback)`. `console.log( data )`给出这个输出：

```
link
    "http://example.com/something/y3k62pg3t4"

method
    "send"

to
    "10000xxxxx(omitted)" 
```

问题是，这能够正确显示 facebook 发送对话框（即对话框打开，朋友的名字是预先填写的，选择的链接显示正确的 url、缩略图等）。但是当我点击发送时，回调函数永远不会被调用，朋友也永远不会收到 PM。

但是，如果我将 url 更改为 google.com，那么这两件事都会起作用，即回调被调用并且 PM 也被发送。

关于有什么问题的任何想法？

**编辑：**

这就是我发现的。如果我有一个链接到域的 Facebook 应用程序，例如 example.com，那么我可以从该应用程序发送到除 example.com 之外的任何站点的链接。因此，这似乎是 Facebook 采取的反垃圾邮件措施。

有人可以确认他们能够从他们的应用链接到的同一个域名发送链接，或者他们是否也遇到了这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T17:34:27.243

试试这两个选项

一个。手动调用发送 url

`https://www.facebook.com/dialog/send?app_id=YOUR_APP_ID&name=TITLE_OF_POST&link=LINK_FOR_DOMAIN&redirect_uri=LINK_FOR_DOMAIN`

给自己解决这个`to`问题以删掉你的朋友。

如果成功，您应该点击重定向 uri 并在收件箱中看到消息，如果没有，您应该会看到错误。

湾。捕捉响应

```
var data = {
      method: 'send',
      to: 'YOUR_ID',
      name: 'My Title',
      link: 'YOUR_DOMAIN',
    };

function requestCallback (response) {
    console.log(response);
}

FB.ui(data, requestCallback); 
```

如果成功，您应该得到一个空数组并在收件箱中看到消息。如果没有，您应该得到对象中返回的错误消息。

在这两个选项之间，您应该能够查明应用程序中未正确设置的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T13:34:23.923

有点远，但您是否尝试过将链接放入[Facebook 调试工具](https://developers.facebook.com/tools/debug)，以查看它在抓取文件的元数据时会看到什么？它可能会显示错误。

此外，我在使用指向我自己的内部服务器的链接时遇到了麻烦，我在其中使用了动态 DNS（在我的情况下来自 no-ip.com）。因此，这可能是要从列表中划掉的其他内容。

祝你好运。

- 编辑 -

这是我用来创建发送请求的 JS 代码：

```
var obj = {
        method: 'send',
        to: '<test user ID>',
        name: 'My Title',
        caption: 'My Caption',
        description: 'My Message',
      link: 'http://apps.facebook.com/<app name>/',
      picture: 'http://<no-ip domain>/images/testpos.jpg'
    };

FB.ui(obj, callback); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T09:25:52.840

看起来可能存在 Facebook BUG。使用我的应用程序，我得到了

`POST https://www.facebook.com/dialog/send 500 (Internal Server Error)`

以下是您可以在此问题上订阅的错误：[https](https://developers.facebook.com/bugs/426059697438651) ://developers.facebook.com/bugs/426059697438651 https://developers.facebook.com/bugs/379191648801449

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-15T23:15:42.857

有一些域被阻止。我知道所有 .TK 域（只是尝试发送`http://dot.tk`给朋友）（我自己已经遇到过这个问题）都被标记为垃圾邮件，每当您尝试在消息中发送它们时，该消息就是 - 就像您的情况一样，使用发送对话框 - 被拒绝。

Facebook 也遵循 Location-header-redirects，这就是问题所在，您不能只使用 URL 缩短器。

为避免被标记为垃圾邮件，您可以使用页面隐藏功能。重定向唯一需要的是一个列入白名单的域，您可以在其上放置以下脚本。

```
<?php
$UserAgent=$_SERVER['HTTP_USER_AGENT']; //The user agent header
$URL=$_GET["URL"]; //The URL to be redirected to
if(preg_match("#(^facebookexternalhit/|\\(\\+http://(www\\.|[a-zA-Z0-9-]{1,}\\.)?facebook\\.com($|/))#i", $UserAgent)) //Is it a facebook agent?
{
    //Deliver content prepared for facebook
    echo '<html>
    <head>
        <meta name="og:image" content="http://example.com/logo.png" />
        <meta name="og:title" content="Page title for facebook" />
        <meta name="og:description" content="Any description of your page." />
        <meta name="og:url" content="http://'.$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI'].'" />
    </head>
    <body>
    </body>
    </html>';
    exit();
}
else
{
    //This is not a facebook agent, redirect client to $URL
    header("HTTP/1.1 301 Moved Permanently");
    header("Location: ".$URL);
    exit();
}
?> 
```

另一种可能性是 JavaScript 重定向，但这不适用于所有用户。

编辑：我已经使用了您的代码，它适用于白名单页面。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-15T19:05:25.287

尝试在 fb.ui 发送操作中引用 FB 应用程序 URL 时，我遇到了类似的问题。

原因是 FB 使用的是过时的网页副本（其中有错误）。

因此，如果您正在进行测试（并不断更改目标 URL 的内容），请确保 FB 使用您网页的最新副本。

[您可以通过https://developers.facebook.com/tools/debug](https://developers.facebook.com/tools/debug)上的 FB 调试器再次传递您的 URL 来实现此目的

# cors - 通过模仿.js 的 CORS XMLRPC

> ID：11368640
> 
> 赞同：0
> 
> 时间：2012-07-06T19:36:23.400
> 
> 标签：cors, xmlrpcclient, simplexmlrpcserver

场景：我有一个网页需要从 Javascript 进行 XMLRPC 调用，并使用mimic.js 来执行此操作。XMLRPC 服务器是用 python 编写的，基于 SimpleXMLRPCServer。

当网页和服务器在同一台机器上时，一切正常。如果页面来自不同的机器，我会遇到 CORS 问题。我已经设法达到我知道 XMLRPC 调用正在进入服务器的地步，但页面仍在抱怨：

```
XMLHttpRequest cannot load http://server.machine.com:8888/. Origin http://page.machine.com is not allowed by Access-Control-Allow-Origin.
(mimic.js:8) NETWORK_ERR: XMLHttpRequest Exception 101: A network error occurred in synchronous requests. 
```

这是我必须添加到服务器中 SimpleXMLRPCRequestHandler 子类的内容：

```
 def do_OPTIONS(myself):
            myself.send_response(200)
            myself.send_header("Access-Control-Allow-Origin", "*")
            myself.send_header("Access-Control-Allow-Headers","Content-Type")
            myself.end_headers()
            myself.wfile.write("OK") 
```

我的理解是，当服务器位于另一台机器上时（除了指定新地址），我不需要更改有关进行 XMLRPC 调用的任何内容。

所以（最后！）问题：我错过了这个难题的哪一部分？如果答案很简单，比如“您需要一个不同的 XMLRPC 客户端库”，那么关于替换的建议将是最受欢迎的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T17:13:28.283

似乎还需要将 ACA-Origin 和 ACA-Headers 标头添加到来自 POST 请求（实际的 XMLRPC 方法调用）的响应中。

# jquery - 将 JSON 对象存储为复选框输入的值属性是否合法？

> ID：11368641
> 
> 赞同：5
> 
> 时间：2012-07-06T19:36:33.930
> 
> 标签：jquery, html, json

我有一个 HTML 表，如果用户想对该行执行特定操作，他们将从该表中检查该行。

而不是创建从行中挑选关键数据的逻辑，我希望将关键值存储在输入复选框的 value 属性中。

我的问题是，这是否合法：

```
<input type="checkbox" value="{'id': 100, 'postcode': 'WA8 6QF'}" /> 
```

这样，我可以使用 jQuery 选择器来挑选选中的框并循环它们，使用值 JSON 对象中的项目执行操作。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-06T19:39:31.527

您可以使用 HTML5[`data-*`](http://ejohn.org/blog/html-5-data-attributes/)属性：

```
<input type="checkbox" data-value='{"id": 100, "postcode": "WA8 6QF"}' />

var val = $('input:checkbox').data('value') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T19:40:31.577

取而代之的是，您可以使用[.data()](http://api.jquery.com/data/) of `jQuery`：

```
$(':checkbox').data({'id': 100, 'postcode': 'WA8 6QF'}); 
```

*标记*等价物是这样的：

```
<input type="checkbox" data-id="100" data-postcode="'WA8 6QF'" /> 
```

然后像这样检索：

```
$(':checkbox').data('id')   //100
$(':checkbox').data('postcode') //'WA8 6QF' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T19:43:46.327

`value`元素的the`input:checkbox`可以是任何字符串，因此 JSON 对象是完全有效的。您必须确保它是一个正确编码的 JSON 对象（[`"`用于引用字符串，而不是`'`](http://www.json.org/)），并且它也是正确的 HTML 转义。

您提供的示例是无效的 JSON：

```
<input type="checkbox" value="{'id': 100, 'postcode': 'WA8 6QF'}" /> 
```

相反，您应该拥有：

```
<input type="checkbox" value="{&quot;id&quot;:100,&quot;postcode&quot;:&quot;WA8 6QF&quot;}" /> 
```

正是由于这些类型的编码问题，大多数人会阻止这种使用。它本身并没有什么问题，但是很容易犯不被注意的错误。

综上所述，如果你只是想将数据与元素关联起来，jQuery 的[`data`](http://api.jquery.com/data)方法更容易使用，而且你不必担心编码。

此外，如果您从服务器传递信息。jQuery 的`data`方法将从所有`[data-*]`属性中提取信息：

```
<input id="example" type="checkbox" data-id="100" data-postcode="WA8 6QF" value="...some value..." />
<script>//ideally in an external .js file rather than inline
    var exampleData = $('#example').data();
</script> 
```

`exampleData`将会：

```
{
    id: 100, //will even be nicely cast to a Number
    postcode: 'WA8 6QF'
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T19:42:20.857

您打算如何将其发布到服务器？

如果通过正常的 _POST 提交，您可能只需要配对输入隐藏标签

```
<input type="checkbox" name="c1" />
<input type="hidden" name="d1" value="{'id': 100, 'postcode': 'WA8 6QF'}" /> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-06T19:45:42.613

*将 JSON 对象存储为复选框输入的值属性是否合法？*

`"{'id': 100, 'postcode': 'WA8 6QF'}"`毕竟是一个字符串。

所以，**存储这个字符串是合法的**

但是，由于它不是有效的 json，您以后可能无法使用它。

所以解决这个问题，你应该这样做，

```
<input type="checkbox" value='{"id": 100, "postcode": "WA8 6QF"}' /> 
```

*（键应该有双引号）*

**所以，你可以，但你不应该。使用`data`其他人解释的属性。**

# android - 如何在 TextView 中显示卢比符号？

> ID：11368644
> 
> 赞同：4
> 
> 时间：2012-07-06T19:36:38.597
> 
> 标签：android

谁能帮我确定如何在 TextView 中插入卢比符号。我已尝试按照其中一个线程中的建议使用 \u20B9 ，但没有帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T19:41:50.970

Android 的系统字体不支持卢比符号。您需要使用字体嵌入将其嵌入到您自己的中。

按照本教程进行字体嵌入：

[http://www.barebonescoder.com/2010/05/android-development-using-custom-fonts/](http://www.barebonescoder.com/2010/05/android-development-using-custom-fonts/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-08T07:03:22.130

尝试使用[https://gist.github.com/john1jan/a82912fb355771e565bea1720439c5dc](https://gist.github.com/john1jan/a82912fb355771e565bea1720439c5dc)。它为卢比符号添加前缀，甚至添加逗号分隔的金额

# android - 按钮内的文本填充

> ID：11368646
> 
> 赞同：2
> 
> 时间：2012-07-06T19:36:42.460
> 
> 标签：android, android-layout, android-button

我正在创建一个仪表板，我想在 Button 内填充文本，因此文本在图标之后开始。我尝试了按钮上的所有填充选项，但没有结果。填充的移动入口按钮。此外，间距选项令人失望，因为它们控制行之间的空间，而不是按钮内部的空间。

有没有办法在图标之后找到按钮的文本？任何想法或方法将不胜感激。

以下是我想要作为 Button 的背景的想法。
![仪表板的按钮样式](../Images/751154db600e7e8224c57747de8a101c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T19:42:22.477

您是否尝试过使用 CompoundDrawable。他们只是为了这个案子。您基本上有一个 TextView 并将左侧的视图设置为您的图标。这不仅可以满足您的需求，还可以消除屏幕上的另一个视图。

查看 [setDrawableLeft](http://developer.android.com/reference/android/widget/TextView.html#attr_android%3adrawableLeft)

基本上你可以使用

```
android:drawableLeft 
```

或者

```
setCompoundDrawablesWithIntrinsicBounds(int,int,int,int) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T20:36:12.183

我认为您可以使用 9-patch 图像轻松解决此问题。

看看一些[教程](http://developer.android.com/tools/help/draw9patch.html)（更多[教程](http://blog.fenrir-inc.com/us/2012/02/android-design-enlarge-images-with-nine-patch.html)）来发现它的力量。

采取这个 9 补丁图像：

![在此处输入图像描述](../Images/83db4a6fd95f0971b9bbf46580ef1370.png)

将其设置为按钮的背景。然后只需写一些文字，图像就会适应您的文字长度。如果您希望按钮具有特定宽度，只需设置固定宽度，您的文本就会分成几行。

编辑：当您下载图像时，将其保存为类似的名称`button_icon.9.png`

# java - 在 Android 4 上制作一个只有文本和确定/取消按钮的对话框的最简单代码是什么？

> ID：11368647
> 
> 赞同：1
> 
> 时间：2012-07-06T19:36:59.393
> 
> 标签：java, android

使用 Android API 14 或更高版本，制作对话框最简单的方法是什么？我想要的只是几行文本、确定按钮和取消按钮。取消按钮关闭对话框，确定按钮执行我拥有的一些方法。

我问的原因是因为我正在阅读一些不同的教程书籍，其中许多似乎使对话创建成为一个过于复杂的过程。所以我想要最简单的方法来做到这一点（最少的代码行）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T19:42:02.700

正确的方法是使用 DialogFragment 但如果你想要最少的代码行，那么下面的代码就可以了：

```
public void showMessageDialog(Context context, int message, int title) {
    new AlertDialog.Builder(context)
    .setTitle(title)
    .setMessage(message)
    .setPositiveButton(R.string.ok, new DialogInterface.OnClickListener() {
        @Override
        public void onClick(DialogInterface dialog, int which) {
            // TODO: Ok click stuff
        }
    })
    .setNegativeButton(R.string.cancel, null)
    .show();
} 
```

变量`message`和`title`都是字符串资源标识符。

# c# - 使用 PostMessage/SendMessage 将密钥发送到 c# IE WebBrowser

> ID：11368648
> 
> 赞同：4
> 
> 时间：2012-07-06T19:37:11.243
> 
> 标签：c#, pinvoke, windows-messages

我正在尝试在 C# webbrowser 控件和选项卡中自动填充值，然后输入并向上和向下按以在字段中移动。

这是我的 PInvoke 和包装函数。我使用 Spy++ 在 Internet Explorer 中获取这些内容。有人看到我的定义有什么问题吗？我想使用 Send and Post 消息而不是 SendInput 因为我不想聚焦窗口...

```
 [DllImport("user32.dll")]
    [return: MarshalAs(UnmanagedType.Bool)]
    static extern bool PostMessage(IntPtr hWnd, uint msg, IntPtr wParam, IntPtr lParam);

    [DllImport("user32.dll")]
    static extern int SendMessage(IntPtr hWnd, uint msg, IntPtr wParam, IntPtr lParam);

    const uint WM_KEYDOWN = 0x0100;
    const uint WM_KEYUP = 0x0101;
    const uint WM_CHAR = 0x0102;
    const int VK_TAB = 0x09;
    const int VK_ENTER = 0x0D;
    const int VK_UP = 0x26;
    const int VK_DOWN = 0x28;
    const int VK_RIGHT = 0x27;

    //According to SPY++ in IE

    //ENTER key is
    // P KEYDOWN
    // P CHAR
    // S CHAR
    // P KEY_UP

    //TAB key is
    // P KEYDOWN
    // P KEYUP

    //DOWN, UP, RIGHT, LEFT is
    // P KEYDOWN
    // S KEYDOWN
    // P KEYUP

    //Letters is
    // P KEYDOWN
    // S KEYDOWN
    // P CHAR
    // S CHAR
    // P KEYUP

    private void SendEnter()
    {
        PostMessage(this.Handle, WM_KEYDOWN, (IntPtr)VK_ENTER, IntPtr.Zero);
        PostMessage(this.Handle, WM_CHAR, (IntPtr)VK_ENTER, IntPtr.Zero);
        SendMessage(this.Handle, WM_CHAR, (IntPtr)VK_ENTER, IntPtr.Zero);
        PostMessage(this.Handle, WM_KEYUP, (IntPtr)VK_ENTER, IntPtr.Zero);
    }

    private void SendTab()
    {
        PostMessage(this.Handle, WM_KEYDOWN, (IntPtr)VK_TAB, IntPtr.Zero);
        PostMessage(this.Handle, WM_KEYUP, (IntPtr)VK_TAB, IntPtr.Zero);
    }

    private void SendArrowKey(int key)
    {
        PostMessage(this.Handle, WM_KEYDOWN, (IntPtr)key, IntPtr.Zero);
        SendMessage(this.Handle, WM_KEYDOWN, (IntPtr)key, IntPtr.Zero);
        PostMessage(this.Handle, WM_KEYUP, (IntPtr)key, IntPtr.Zero);
    }

    private void SendChar(int key)
    {
        //Keydown wParam values are 0x020 less than WM_CHAR wParam
        PostMessage(this.Handle, WM_KEYDOWN, (IntPtr)(key - 0x020), IntPtr.Zero);
        SendMessage(this.Handle, WM_KEYDOWN, (IntPtr)(key - 0x020), IntPtr.Zero);
        PostMessage(this.Handle, WM_CHAR, (IntPtr)key, IntPtr.Zero);
        SendMessage(this.Handle, WM_CHAR, (IntPtr)key, IntPtr.Zero);
        PostMessage(this.Handle, WM_KEYUP, (IntPtr)(key - 0x020), IntPtr.Zero);
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-19T13:57:26.140

首先，我建议你拥有 WebBrownser 文档的句柄：

```
 IntPtr pControl; 
        IntPtr pControl2;
        pControl = FindWindowEx(WebWindow.Handle, IntPtr.Zero, "Shell Embedding", IntPtr.Zero);
        pControl = FindWindowEx(pControl, IntPtr.Zero, "Shell DocObject View", IntPtr.Zero);
        pControl = FindWindowEx(pControl, IntPtr.Zero, "Internet Explorer_Server", IntPtr.Zero);
        pControl2 = FindWindowEx(pControl, IntPtr.Zero, "MacromediaFlashPlayerActiveX", IntPtr.Zero);

         if (pControl2 != IntPtr.Zero)
             pControl = pControl2;
             break;
        return pControl; 
```

使用该句柄发送您的关键信息。

我个人所做的是，我在盒子的位置向那个手柄发送点击，然后发送我的钥匙

```
 PostMessage(pControl , (uint)MouseMessages.WM_MOUSEMOVE, 0, MAKELPARAM(x.X, x.Y));
        PostMessage(pControl , (uint)MouseMessages.WM_LBUTTONDOWN, 0, MAKELPARAM(x.X, x.Y));
        PostMessage(pControl , (uint)MouseMessages.WM_LBUTTONUP, 0, MAKELPARAM(x.X, x.Y)); 
```

像这样使用 MAKELPARAM ：

```
 private int MAKELPARAM(int p, int p_2)
    {
        return ((p_2 << 16) | (p & 0xFFFF));
    } 
```

我看到在非 Flash 文档上找到的一件事是仅发送 WM_CHAR 工作。

有了这一切，你不必有你的窗口焦点

我希望它有帮助:)

# java - 如何在 Java 中检测另一个图像中的图像？

> ID：11368649
> 
> 赞同：4
> 
> 时间：2012-07-06T19:37:19.073
> 
> 标签：java, image, image-processing, pattern-matching

嗨，我有一个像这样的调色板， ![在此处输入图像描述](../Images/efff0b4aa0a97c3fc7f20f28cc199da0.png)

我有一个图像。图像包含这样的调色板。我需要从图像中检测到这个调色板并从图像中裁剪调色板。他们是否有任何Java库可以做到这一点。给定一个参考图像是他们的任何库可以使用它作为模板并从图片中提取图像吗？

这是一个例子，如果图像是![在此处输入图像描述](../Images/29d832e75bd705f2c035e5768acd2c6d.png)

我的参考图像就像第一张图像，我想在第二张图像中检测第一张图像并裁剪该部分以获得与参考图像相似的图像图像。裁剪第二张图像后，我会得到![在此处输入图像描述](../Images/d0a92cc301d81c97da53f21881061cd8.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T16:14:44.237

您需要的称为“模板匹配”。它是一种图像处理算法。详情在这里：[http](http://en.wikipedia.org/wiki/Template_matching) ://en.wikipedia.org/wiki/Template_matching 。

我不是 Java 专家，所以不知道有任何实现。这是一个非常简单的算法。如果这是您正在寻找的内容，您可以自己编写代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-22T18:33:43.253

如果我们已经有参考图像，那么下面的链接可以解决您的问题。 [https://stackoverflow.com/a/17516753/2421703](https://stackoverflow.com/a/17516753/2421703)在这里，您需要做的就是不用为边框着色，而是使用该内容创建一个新的图像文件

# java - Java XML Dom 内存密集型

> ID：11368650
> 
> 赞同：1
> 
> 时间：2012-07-06T19:37:21.230
> 
> 标签：java, xml, parsing, dom, xml-parsing

我正在处理要提交给英国 HMRC 的 XML 文档。需要处理这些文档并为其生成哈希码。

我编写了下面的代码，它适用于小型文档。但是，如果我处理一个 60mb 的 xml 文件，它会使用大约 1.2gb 的内存。

我已经看了看是否有任何方法可以提高效率，但什么也看不到。如果 IRMark 元素已经存在，它需要能够移除它。

任何想法都非常感谢。谢谢。

```
/*
** Generates the HMRC IRMARK as required.
*/
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.PrintWriter;
import java.io.StringWriter;
import java.io.UnsupportedEncodingException;
import java.security.MessageDigest;
import java.security.NoSuchAlgorithmException;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.ParserConfigurationException;
import javax.xml.transform.Transformer;
import javax.xml.transform.TransformerFactory;
import javax.xml.transform.dom.DOMSource;
import javax.xml.transform.stream.StreamResult;
import javax.xml.xpath.*;

import org.apache.xml.security.Init;
import org.apache.xml.security.c14n.CanonicalizationException;
import org.apache.xml.security.c14n.Canonicalizer;
import org.apache.xml.security.c14n.InvalidCanonicalizerException;
import org.bouncycastle.util.encoders.Base64;
import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.Node;
import org.xml.sax.SAXException;

public class IRMarkDOS
{
    /**
     * @param args
     */
    public static void main(String[] args) 
    {

        // Initialise Apache XML tools
        Init.init();

        // Start tracking execution time
        long start = System.currentTimeMillis();

        try
        {

            // Validate/parse the command line
            if (args.length != 3)
            {
                System.out.println("INCORRECT PARAMETERS SPECIFIED" + System.getProperty("line.separator") + "  Specify IRMark.exe <InputFile> <OutputFile> " + "<TaxNamespace>");
                return;
            }

            // Set input/output variables
            String sInput = args[0];
            String sOutput = args[1];
            String sTaxNamespace = args[2];

            // Read the XML Document
            //Document xmlDoc = IRMarkDOS.processXML(sInput, sTaxNamespace);
            String xml = IRMarkDOS.processXML(sInput, sTaxNamespace);
            System.gc();

            // Generate the IRMark
            String strIRMark = IRMarkDOS.generateIRMark(xml);

            // Write to file
            PrintWriter out = new PrintWriter(new FileOutputStream(sOutput));
            out.println(strIRMark);
            out.close();
            System.out.println("IRmark64: " + strIRMark);

            // Output execution time
            long end = System.currentTimeMillis();          
            System.out.println("Execution Time " + ((end-start) / 1000) + " seconds, " + (end-start) + " milliseconds");

        }
        catch (RuntimeException ex)
        {
            System.out.println(ex.getMessage());
            System.exit(1);
        }
        catch (OutOfMemoryError ex) 
        {
            System.out.println(ex.getMessage());
            System.exit(1);         
        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }

    /**
     * 
     * Processes the specified XML document
     * 
     * @param sInput             - XML Document
     * @param sTaxNamespace      - TaxNamespace
     * @param sEnvelopeNamespace - EnvelopeNamespace
     * @return
     */
    private static String processXML (String sInput, String sTaxNamespace)
    {

        try
        {
            // Read XML
            File xmlDocument=new File(sInput);
            DocumentBuilderFactory xmlDomFactory = DocumentBuilderFactory.newInstance();
            DocumentBuilder xmlBuilder = xmlDomFactory.newDocumentBuilder();
            Document xmlDoc = xmlBuilder.parse(xmlDocument);                    

            // Setup XPath          
            XPathFactory factory=XPathFactory.newInstance();
            XPath xPath=factory.newXPath();     

            Node body = (Node) xPath.evaluate("/GovTalkMessage/Body", xmlDoc, XPathConstants.NODE);

            //Get IRMark and remove if exists
            Node irmark = (Node) xPath.evaluate("/GovTalkMessage/Body/IRenvelope/IRheader/IRmark", xmlDoc, XPathConstants.NODE);

            if (irmark != null)
            {
                System.out.println("Original IRMark: " + irmark.getTextContent());
                irmark.getParentNode().removeChild(irmark);             
            }
            irmark = null;

            // Create new doc for body and add envelope namespace to body as required
            xmlDoc = null;
            xmlDoc = xmlBuilder.newDocument();

            Node tmp = xmlDoc.importNode(body, true);
            xmlDoc.appendChild(tmp);
            tmp = null;

            // Add namespace to body element        
            xmlDoc.getDocumentElement().setAttributeNS("http://www.w3.org/2000/xmlns/", "xmlns", "http://www.govtalk.gov.uk/CM/envelope");

            return IRMarkDOS.getOuterXml(xmlDoc);

        }
        catch (RuntimeException ex)
        {
            System.out.println(ex.getMessage());
            System.exit(1);

        } catch (ParserConfigurationException e) {
            e.printStackTrace();
        } catch (SAXException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        } catch (XPathExpressionException e) {
            e.printStackTrace();
        }

        return null;

    }

    /**
     * Generates the IRMark for the specified XML Document
     * 
     * @param xmlDoc - XML Document to generate the IRMark for
     * @return - The generated IRMark
     */
    private static String generateIRMark(String bodyText1)
    {
        // Get XML string
        //String bodyText1 = IRMarkDOS.getOuterXml(xmlDoc);

        // Final Data Tweaks
        bodyText1 = bodyText1.toString();
        bodyText1 = bodyText1.replace("&#xD;", "");
        bodyText1 = bodyText1.replace("\r\n", "\n");
        bodyText1 = bodyText1.replace("\r", "\n");

        try 
        {
            // Convert the final document back into a byte array encoded as UTF8
            byte[] bodyBytes = bodyText1.getBytes("UTF8");

            // Canonicalisation to C14n         
            Canonicalizer c14n = Canonicalizer.getInstance("http://www.w3.org/TR/2001/REC-xml-c14n-20010315");
            byte[] bodyCanonical = c14n.canonicalize(bodyBytes);

            // Generate SHA 1 and convert to Base64
            MessageDigest md1 = MessageDigest.getInstance("SHA");           
            md1.update(bodyCanonical); //bodyBytes
            byte[] digest1 = md1.digest();         

            String strIRmark = new String(Base64.encode(digest1));
            return strIRmark;
        }
        catch (RuntimeException ex)
        {
            System.out.println(ex.getMessage());
            System.exit(1);

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (InvalidCanonicalizerException e) {
            e.printStackTrace();
        } catch (CanonicalizationException e) {
            e.printStackTrace();
        } catch (ParserConfigurationException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        } catch (SAXException e) {
            e.printStackTrace();
        } catch (NoSuchAlgorithmException e) {
            e.printStackTrace();
        }       
        return "";
    }

    /**
     * Converts a XML Node to a string representation
     * 
     * @param node - XML Node to convert to String
     * @return - A string representation of the XML Node
     */
    private static String getOuterXml(Node node)
    {
        try
        {
            Transformer transformer = TransformerFactory.newInstance().newTransformer();
            transformer.setOutputProperty("omit-xml-declaration", "yes");

            StringWriter writer = new StringWriter();
            transformer.transform(new DOMSource(node), new StreamResult(writer));
            return writer.toString();  
        }
        catch (Exception e)
        {
            e.printStackTrace();
        }

        return "";

    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T19:40:26.670

您可以尝试仅使用 SAX 解析器并响应特定元素的打开和关闭事件。也许您可以完成您需要做的事情，而无需以这种方式一次将整个 DOM 保存在内存中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T19:50:42.160

我还建议对您的 processXML() 方法进行以下修改：

```
private static String processXML (String sInput, String sTaxNamespace){
    Document xmlDoc = null;
    try{
        /**
         * Your processing logic
        */
    }catch(Exception exe){
        //Catch your individual exceptions
    }finally{
        if(xmlDoc != null){
            xmlDoc = null;
            System.runFinalization();
            System.gc();
        }
    }
} 
```

这样，您可以确保在完成处理后您的 Document 可能会被垃圾收集。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T19:51:28.217

DOM XML 树在处理小文件时很好，这是因为当您使用 DOM API 加载 XML 文件时，会创建一个树来将整个文档结构保存在内存中。当您处理大量 XML 数据时，您应该改用[XML 流](http://docs.oracle.com/cd/E17802_01/webservices/webservices/docs/1.6/tutorial/doc/SJSXP.html)。XML 流式传输使用最少的内存，并以简单时尚的方式为您提供读取和处理 XML 数据的灵活性。

# java - 使用 owasp-java-html-sanitizer 提取链接

> ID：11368655
> 
> 赞同：4
> 
> 时间：2012-07-06T19:37:32.013
> 
> 标签：java, owasp, html-sanitizing

我计划使用 owasp-java-html-sanitizer 对用户生成的 html 执行一些任务。

我想从 html 字符串中提取 URL 列表。

我还想确保所有链接的目标都设置为“_blank”，这似乎与`HtmlPolicyBuilder.requireRelNofollowOnLinks`配置相似。（完毕）

* * *

```
PolicyFactory linkRewrite = new HtmlPolicyBuilder().allowAttributes("href").onElements("a")
      .requireRelNofollowOnLinks().allowElements(new ElementPolicy() {
        public String apply(String elementName, List<String> attrs) {
          attrs.add("target");
          attrs.add("_blank");
          return "a";
        }
      }, "a").toFactory(); 
```

这增加`target="_blank"`了链接，不确定它是完成它的最佳方式。

这也提取了 URL：

```
.allowElements(new ElementPolicy() {
        public String apply(String elementName, List<String> attrs) {
          for (int i = 0, n = attrs.size(); i < n; i += 2) {
            if ("href".equals(attrs.get(i))) {
              urls.add(attrs.get(i + 1));
              break;
            }
          }
          attrs.add("target");
          attrs.add("_blank");
          return elementName;
        }
      }, "a") 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-06T14:39:27.330

```
.allowElements(
   new ElementPolicy() {
     public String apply(String elementName, List<String> attrs) {
       // Make sure that all links open in new windows/tabs without
       // using <base target> which also affects unsanitized links.
       attrs.add("target");
       attrs.add("_blank");
       return elementName;
     }
   }, "a")
.allowAttributes("href").matching(
   new AttributePolicy() {
     public String apply(String elementName, String attributeName, String value) {
       // Collect all link URLs.
       urls.add(value);
       return value;
     }
   }).onElements("a") 
```

# java - 在 EntityListener 中注入 SessionScoped Stateful bean

> ID：11368662
> 
> 赞同：5
> 
> 时间：2012-07-06T19:38:17.390
> 
> 标签：java, glassfish, ejb, javabeans, cdi

我正在尝试在 GlassFish 3 上的 Java EE JPA (2.0) 应用程序中实现某种审计。

我`@EntityListeners`在我的实体上添加了一个注释`@MappedSuperclass`，侦听器在其方法上有`@PrePersist`and注释，这些方法在运行时被愉快地调用。`@PreUpdate`

在这些方法中，我尝试使用 ( `@Inject`) a `@Named`, `@Stateful`, `@SessionScoped`bean ( `UserSession`) 来获取当前用户的 ID。侦听器类根本没有注释。

问题是我无法`UserSession`注入 bean；我总是以一个`null`值结束。到这一次，我尝试了总是注入空值的*plain* 。我也尝试了总是返回一个新对象（我验证了构造函数调用，加上对象是*空*的）。`@Inject UserSession us;``UserSession us = (UserSession) ctx.lookup("java:global/application/module/UserSession");`

 *我很确定我错过了关于 CDI 的一些非常重要的事情，但我不知道是什么。有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T19:54:35.570

EntityListner 不支持 CDI，至少在 JPA 2.0 中是这样。它显然在[JPA 2.1中的新事物列表中](https://blogs.oracle.com/arungupta/entry/jpa_2_1_early_draft)

当我遇到这个时，我也很惊讶。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T15:05:09.617

我最终找到了一种解决方法，它可以让我获得`@Stateful`bean 的引用：

我创建了一个`@Named @Singleton @Startup`bean SessionController，它包含一个`HashMap<String, UserSession> sessionMap`带有我的 bean 引用的本地`@Stateful`：

```
@Named
@Singleton
@Startup
@ConcurrencyManagement(ConcurrencyManagementType.CONTAINER)
public class SessionController {

private HashMap<String, UserSession> sessionMap;

@PostConstruct
void init() {
    sessionMap = new HashMap<String, UserSession>();
}

@PreDestroy
void terminate() {
    for (UserSession us : sessionMap.values()) {
        us.logoutCleanUp(); //This is annotated as @Remove
    }
    sessionMap.clear();
}

public void addSession(String sessionId, UserSession us) {
    sessionMap.put(sessionId, us);
    System.out.println("New Session added: " + sessionId);
}

public UserSession getCurrentUserSession() {
    FacesContext context = FacesContext.getCurrentInstance();
    String sessionId = ((HttpSession) context.getExternalContext().getSession(false)).getId();
    return sessionMap.get(sessionId);
} 
```

}

我从每个 bean 的`@PostConstruct`方法中添加引用：

```
public class UserSession implements Serializable {
@Inject SessionController sc;
...
    @PostConstruct
    void init() {
    FacesContext context = FacesContext.getCurrentInstance();
    String sessionId = ((HttpSession) context.getExternalContext().getSession(true)).getId();
    sc.addSession(sessionId, this);
} 
```

注意`.getSession(true)`which 是必需的，因为 Session 可能尚未创建。另请注意，由于不是构造函数，`this`因此已安全传递...`@PostConstruct`

毕竟，我可以像这样在我的 EntityListener （和任何其他地方）中获得参考：

```
SessionController sc = (SessionController) new InitialContext().lookup("java:module/SessionController");
    UserSession us = sc.getCurrentUserSession(); 
```

或者像这样在 CDI bean 中

```
@Inject SessionController sc; 
```

我看到的唯一缺点是这种方法仅适用于 Web 应用程序（`FacesContext context = FacesContext.getCurrentInstance()`有意义的地方）。`@javax.jws.WebService`我的一些 bean（最后是我的 EntityListeners）也通过`@Stateless`bean 公开。在这种情况下（实际上：没有），我的 Singleton 将无法工作（尚未测试），因为没有任何类型的*sessionId*（确切地说根本没有会话）。我将不得不为此使用一种解决方法，可能使用 bean 的 SessionContext 或发明某种可用的*sessionId*。如果我创造了一些有用的东西，我会回帖......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-09T12:19:34.880

> 到这个时候，我尝试了普通的@Inject UserSession 我们；它总是注入一个空值。

这是因为在 JPA 2.0 中，这些类不是由 CDI 管理的，所以 @Inject 不能与它们一起使用。正如 Steve K. 所指出的，这些类从 JPA 2.1 开始由 CDI 管理。

> 我也试过 UserSession us = (UserSession) ctx.lookup("java:global/application/module/UserSession");

您无法在 JNDI 中查找由 CDI 实例化的 bean。但是，您可以做的是在 JNDI 中查找 CDI BeanManager 并从 BeanManager 中获取您的 bean。CDI 的规范保证您将始终在“java:comp/BeanManager”中从您的应用程序中找到 BeanManager。这是一个简化的示例：

```
InitialContext ctx = new InitialContext();
BeanManager bm = ctx.lookup("java:comp/BeanManager");
Set<Bean<?>> beans = bm.getBeans(UserSession.class);
Bean<?> bean = bm.resolve(beans);
CreationalContext<?> ctx = bm.createCreationalContext(bean);
UserSession us = (UserSession) bm.getReference(bean, UserSession.class, ctx); 
```

这将是由 CDI 管理的 Bean，以防会话范围的 UserSession 实例。

我的回答是基于[EntityListeners 中的 CDI 注入中提出的内容](https://stackoverflow.com/questions/10765508/cdi-injection-in-entitylisteners)*

# weblogic - 什么时候会使用 WebLogic RDBMS 身份验证提供程序与 RDBMS 安全存储？

> ID：11368670
> 
> 赞同：0
> 
> 时间：2012-07-06T19:39:06.640
> 
> 标签：weblogic, weblogic-10.x, weblogic11g

如果我希望将应用程序用户名/密码存储在数据库中，不清楚是应该使用 RDBMS Authentication Provider 功能（在 WebLogic 控制台的 Security Realm 部分的 Providers 选项卡上）还是 RDBMS Security Store 功能（在 RDBMS WebLogic 控制台的安全领域部分中的安全存储选项卡）

有人可以解释一下区别以及什么时候会使用另一种吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T22:22:09.330

当您想使用自己的模式创建自己的用户表（或者您已经创建和/或使用它们）时，RDBMS 身份验证提供程序很有用。RDBMS 安全存储非常有用，因为它提供了在数据库中创建用户身份验证和授权表所需的所有脚本。

您应该知道，如果您选择使用 RDBMS 安全存储路线，您可能希望允许 weblogic 管理员用户在无法访问数据库的情况下登录到 weblogic 的控制台，例如，如果您的数据库出现故障并且您想登录到控制台更改数据库连接信息。您可以通过添加第二个提供程序来完成此操作，该提供程序将用于验证/授权您的 weblogic 管理员用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-03T21:38:08.597

RDBMS 身份验证提供程序与一组特殊的安全提供程序一起使用，因此 RDBMS 安全存储和 RDBMS 身份验证提供程序不能相互替代。

不在以下列表中的任何其他安全提供程序都将忽略 RDBMS 安全存储：

*   XACML 授权提供者
*   XACML 角色映射提供程序

SAML 1.1 的以下提供程序：

*   SAML 身份断言提供程序 V2
*   SAML 凭据映射提供程序 V2

SAML 2.0 的以下提供程序：

*   SAML 2.0 身份断言提供程序
*   SAML 2.0 凭据映射提供程序
*   WebLogic 凭据映射提供程序
*   PKI 凭据映射提供程序
*   证书注册

# ios - 如果用户将应用程序移到后台，然后又回到前台，是否可以更改视图？

> ID：11368673
> 
> 赞同：0
> 
> 时间：2012-07-06T19:39:28.700
> 
> 标签：ios

My app's main page is a table view and when a row is selected a detailed view is displayed.

有一个要求是，每当应用程序移动到前台时，都应该显示表格视图，而不管之前显示的是什么视图。

这样做的结果是用户可能正在查看详细视图，然后他们将应用程序切换到后台，然后立即再次回到前台，但现在他们的详细视图已被表格视图替换。

根据人机界面指南，我似乎认为这是不允许的，但是查看该文档后，我看不到任何内容。所以也许我的记忆不正确。Apple 是否允许这种行为，或者应用程序必须始终努力呈现与应用程序上次在前台时相同的视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T20:08:48.707

此行为仅在特定情况下才有意义，例如：

*   用户需要登录才能使用该应用程序。如果应用程序在特定时间内未使用并且登录已过期，则一旦应用程序再次移动到前台，您可能会显示登录窗口而不是原始视图。

*   该应用程序的主要目的是显示来自提要（新闻、推特等）的更新。一旦应用程序移动到前台，您可能会更新到最新的项目。

*   在将应用程序发送到后台时使用了相机。一旦应用程序移动到前台，您可能会禁用相机视图并显示一个按钮以再次激活相机。

通常，应用程序在再次移动到前台时不应从详细视图返回到主视图。用户非常熟悉导航视图的概念，并且不假思索地使用它。用户可能会因为意外行为而感到困惑和烦恼。

总之，如果这样做可以显着改善用户体验，那么它与人机界面指南并不矛盾，应该这样做。

# c# - 如何在 MVC3 应用程序中构建 HTML 消息以进行发送？

> ID：11368677
> 
> 赞同：4
> 
> 时间：2012-07-06T19:39:42.773
> 
> 标签：c#, asp.net-mvc-3, email

我在早上洗澡的时候在想这个问题，如何在 MVC3 应用程序中构造 HTML 消息？

我正在考虑使用 a`PartialView`并调用生成的 HTML，将其保存为字符串以在 HtmlMessage 正文中使用它。

而不是做类似的事情：

```
string body = @"<html><h1>This is an email. Yuk formatting and hard to maintain.</h1></html>"; 
```

我可以做类似的事情：

```
string body = Html.Action("WelcomeEmail", "Emails"); 
```

由于 MVC3 如此健壮和成熟，因此必须有一个标准的方法来做到这一点，对吗？

推荐的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T19:42:37.363

[Postal](http://aboutcode.net/postal/)允许您以渲染视图的形式发送电子邮件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T19:41:58.967

我强烈建议[Mvc.Mailer](http://www.hanselman.com/blog/NuGetPackageOfTheWeek2MvcMailerSendsMailsWithASPNETMVCRazorViewsAndScaffolding.aspx)。

您可以获得 MVC 框架的所有好处以及脚手架支持。

# javascript - 将多个元素放入 JavaScript 数组

> ID：11368678
> 
> 赞同：5
> 
> 时间：2012-07-06T19:40:02.917
> 
> 标签：javascript

在***JavaScript 中***，我以传统方式填充***数组***元素，例如：

```
myArray[12] = 123;
myArray[13] = 432;
myArray[14] = 233;
myArray[15] = 98; 
```

是否可以通过一个命令更快地做到这一点？

例如，`[123, 432, 233, 98]`以`myArray[12-15]`某种方式将数字放入...？不一一。

* * *

以及如何优化这种场景：

```
newArray[12] = oldArray[30];
newArray[13] = oldArray[31];
newArray[14] = oldArray[32];
newArray[15] = oldArray[33]; 
```

当一个数组中相邻的 n 个元素（上例中为 4 个）需要移动到另一个数组时？

请指教。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-06T19:53:33.620

```
var myArray = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 
               12, 13, 14, 15, 16, 17, 18, 19, 20];
myArray.splice(12, 4, 123, 432, 233, 98);

// [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 
//  123, 432, 233, 98, 16, 17, 18, 19, 20] 
```

第一个参数 to`splice`是开始的索引，第二个是要删除的元素的数量，其余的是要插入的元素。因此，如果您插入与删除相同的号码，您最终会替换它们。

如果你确实希望它来自另一个数组，你可以试试这个，虽然它不是那么干净：

```
var oldArray = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11,
               12, 13, 14, 15, 16, 17, 18, 19, 20, 21,
               22, 23, 24, 25, 26, 27, 28, 29, 123, 
               432, 233, 98, 34, 35]
var newArray = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 
               12, 13, 14, 15, 16, 17, 18, 19, 20];

[].splice.apply(newArray, [12, 4].concat(oldArray.slice(30, 30 + 4)));

// [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11,
// 123, 432, 233, 98, 16, 17, 18, 19, 20] 
```

这可能不如[PointedEars 建议](https://stackoverflow.com/a/11368883)有效，但它非常简单，可能适用于许多用例。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-06T19:43:06.967

最接近的就是`splice`用来设置输入位置。

第一个参数是开始的索引，第二个参数是要删除的项目数，下一个参数是值....

这是我在控制台中弄乱的一些输出。

```
myArray = new Array(15)
myArray.splice(12, 4, 123, 432, 223, 98)
myArray.forEach(function(v, i){console.log(v, i)})
123 12
432 13
223 14
98 15
undefined
myArray[12]
123
myArray[13]
432
myArray[14]
223
myArray[15]
98 
```

当然这有几个不足：你不能传递一个你想要插入的值的数组，这个数组需要足够大（即你不能在索引 12 处插入，除非数组至少有 12 长）。

为了将一个数组中一组索引的值传输到另一个数组中的另一组索引，我认为你必须循环。 `splice`将值单独添加，而不是作为数组。你当然可以用循环编写一个方法，然后重用它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-06T19:58:17.297

`Array.prototype.push()`并且`Array.prototype.splice()`是不错的想法，但`push()`总是附加到数组的末尾（即从`length`属性指定的索引开始），并且`splice()`要求您在插入之前删除与插入一样多的元素（这是*两倍的成本*因为它需要）。

因此，您应该使用循环：

```
 for (var i = 12; i < 16; ++i)
 {
   _new[i] = old[i + 18];
 } 
```

(`new`是一个关键字，因此保留；您的示例代码不可执行。我在`_new`这里使用过它来解决这个问题。)

这可以概括为：

```
function putValues(array1, array2, start1, start2, num)
{
  if (typeof start1 == "undefined") start1 = 0;
  if (typeof start2 == "undefined") start2 = 0;
  var max = (typeof num == "undefined") ? array2.length : start2 + num;

  for (var i = start1, j = start2; j < max; ++i, ++j)
  {
    array1[i] = array2[j];
  }
}

putValues(newArray, oldArray, 12, 30, 4); 
```

更复杂的概括是可以想象的，例如传递一个或两个索引数组，以便索引不必是连续的。

（抵制将其作为 的方法的诱惑`Array.prototype`，除非您想在使用-以无序方式在稀疏数组上进行`Object.prototype.hasOwnProperty()`有效迭代时使用。）`for``in`

下次，先尝试*一下*。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-05-03T06:27:18.150

**最新方法：使用Splice和Splice**

这是执行此操作的最新和最简单的方法。

使用`...`（扩展）运算符以及`splice`前面示例中使用的方法。

这将删除从索引 12 开始的 4 个元素，然后将所需的数组插入位置 12 到 15。

**尝试示例代码**

```
const myArray = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 
               12, 13, 14, 15, 16, 17, 18, 19, 20];

console.log('Before:', JSON.stringify(myArray));

myArray.splice(12, 4, ...[123, 432, 233, 98]);

console.log('After: ', JSON.stringify(myArray));
```

进一步参考：ECMAScript (ECMA-262)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-06T19:42:09.353

你可以使用`push`功能：

```
myarray.push([123, 432, 233, 98]); 
```

将整个数组添加到您的数组或添加单个项目：

```
myarray.push(123, 432, 233, 98); 
```

要添加到**特定位置**，您需要使用`splice()`函数。

**文件：**

*   [https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/splice](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/splice)
*   [https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/push](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/push)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-06T19:43:22.553

您应该使用 .concat()，如下所示：

```
myArray = myArray.concat([123, 432, 233, 98]) 
```

或使用 .push() 如下：

```
myArray.push(123,432,233,98) 
```

# java - Android 是否有类似于 iOS 的 UINavigationController 的活动流程？

> ID：11368679
> 
> 赞同：0
> 
> 时间：2012-07-06T19:40:14.353
> 
> 标签：java, android, ios, eclipse, cocoa-touch

在 iOS 上，UINavigationController 非常有用，并且非常容易用于从堆栈中推送和弹出视图。

Android有类似或同等的东西吗？

Android中是否有推荐的流程，或者只是根据需要调用活动？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T19:45:52.520

Android 应用程序维护一系列活动。当一个活动创建另一个活动时，新的活动被推入活动堆栈并接管。[在Tasks 和 Back Stack](http://developer.android.com/guide/components/tasks-and-back-stack.html)中阅读有关堆栈的更多信息，以及在[Activities](http://developer.android.com/guide/components/activities.html)中了解有关活动的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T20:13:09.173

没有内置导航控件，但系统维护了一个活动堆栈，您可以随时使用硬件返回按钮（在某些平板电脑上是软按钮）返回。没有迹象表明您可以返回（除非您构建了一个），并且没有一致的 UI 可以继续前进。您只需开始下一个活动。

# asp.net-mvc-3 - 来自本地用户和组的 Windows 身份验证

> ID：11368680
> 
> 赞同：0
> 
> 时间：2012-07-06T19:40:15.330
> 
> 标签：asp.net-mvc-3, windows-authentication

在计算机->管理（计算机管理）中，您可以创建 Windows 帐户并将这些用户分配到组。我很想在我的网站上使用相同的功能。

我不想使用表单身份验证，因为它需要管理额外的用户名和密码。

有没有办法将它与 Windows 认证的 MVC 3 网站一起使用？

例如，如果我在计算机管理中创建了一个名为“Employees”的组，有没有办法将 [Authorize(Roles = "Employees")] 链接到该组？是 Roles = @"Domain\GroupName" 吗？

这仅对大约 20 个具有三个左右组的用户是必需的。我遇到过很多人说 Active Directory 是要走的路。但是，如果有一个同样有效的更简单的解决方案，我会接受的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T20:06:37.413

如果这要在带有 Windows 身份验证的 Intranet 上运行，那没关系，但在 Internet 上，虽然可以做到，但不要这样做！

请使用表单身份验证，因为它更安全。

# javascript - DISQUS.reset 不起作用

> ID：11368682
> 
> 赞同：0
> 
> 时间：2012-07-06T19:40:30.103
> 
> 标签：javascript, ajax, disqus

有没有人成功让 DISQUS.reset 函数为嵌入式线程工作？每次我尝试运行 DISQUS.reset 时，它都会说该函数未定义。在调用 reset 之前，我确保已加载 javascript 文件。

知道发生了什么吗？他们取代了这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T18:38:04.933

仍然没有在 DISQUS 2012 中实现...禁用它以使用 DISQUS.reset。

> 尚不支持的显着特性和功能
> 
> 即将支持以下功能：
> 
> 1.  **使用 DISQUS.reset 变量的 AJAX 驱动站点**
> 2.  onNewComment 回调
> 3.  HTTPS 非英语语言和翻译
> 4.  图片上传
> 5.  模组/管理员识别
> 
> *虽然以前支持的所有功能都没有进入 Disqus 2012，但我们很乐意通过我们的支持页面听到您的反馈。

[http://help.disqus.com/customer/portal/articles/526768-introducing-disqus-2012-and-faq-](http://help.disqus.com/customer/portal/articles/526768-introducing-disqus-2012-and-f-a-q-)

# java - ZXing Result.getRawBytes()，究竟是什么？

> ID：11368684
> 
> 赞同：2
> 
> 时间：2012-07-06T19:40:45.347
> 
> 标签：java, android, zxing

我正在使用 zxing QR 码 API，并且正在尝试从 android 设备上的 QR 码中提取二进制数据。但是，在 android 上，Result.getResultMetadata() 没有通过 Intent 传递给我，所以我尝试使用 Result.getRawBytes() 来检索我的字节数组。但是， getRawBytes() 似乎没有返回相同的内容。

Result.getRawBytes() 究竟是什么，有谁知道如何正确地从 zxing QR 码中提取字节数组？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T15:24:28.703

所以我认为你想要的是字节数组中的原始解码数据。zxing 为您提供的意图源缺少元数据，但仍将其发送到意图过滤器。

在 IntentIntegrator.java 的 parseActivityResult 中，您可以添加：

```
byte[] dataBytes = intent.getByteArrayExtra("SCAN_RESULT_BYTE_SEGMENTS_0");
return new IntentResult(contents,
                        formatName,
                        rawBytes,
                        orientation,
                        errorCorrectionLevel,
                        dataBytes); 
```

我修改了 IntentResult 类，以便能够获取这个额外的部分：

```
private final byte[] dataBytes;

IntentResult() {
    this(null, null, null, null, null, null);
}

IntentResult(String contents,
           String formatName,
           byte[] rawBytes,
           Integer orientation,
           String errorCorrectionLevel,
           byte[] dataBytes) {
    this.contents = contents;
    this.formatName = formatName;
    this.rawBytes = rawBytes;
    this.orientation = orientation;
    this.errorCorrectionLevel = errorCorrectionLevel;
    this.dataBytes = dataBytes;
}

/**
* @return raw content of barcode in bytes
*/

public byte [] getDataBytes() {
  return dataBytes;
} 
```

此字节数组存储元数据的第一个数组，也就是数据的原始内容（以字节为单位）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T20:32:35.067

为什么不从[javadoc](https://zxing.github.io/zxing/apidocs/index.html)开始？

它是二维码中的原始码字。它不是单独的已解析字节段。

# c# - 按下键时的 C# 和 Unity3D

> ID：11368686
> 
> 赞同：13
> 
> 时间：2012-07-06T19:40:58.083
> 
> 标签：c#, unity3d

我对 C# 很陌生。我正在 Unity 中创建一些东西来帮助我更好地学习 C# 和 Unity。

我想知道为什么：

```
Input.GetKeyDown(KeyCode.UpArrow)) 
```

放置在以下范围内时只会触发一次：

```
void Update() 
```

由于更新是一个循环，为什么在我按住键时它没有被触发（在我的情况下导致球体移动）？

我已经设法通过使用两个在按下和释放键时改变的布尔值来使其工作。

这是我用来移动球体并模拟加速/减速的完整脚本：

```
using UnityEngine;
using System.Collections;

public class sphereDriver : MonoBehaviour {
int x ;
bool upPressed = false ;
bool downPressed = false ;
void Start()
{
    x = 0 ;
}

void Update ()
{
    if(x > 0) {
        x -= 1 ;
    }
    if(x < 0) {
        x += 1 ;
    }
    if(Input.GetKeyDown(KeyCode.UpArrow))
    {
        upPressed = true ;
    }
    else if(Input.GetKeyUp(KeyCode.UpArrow))
    {
        upPressed = false ;
    }

    if(upPressed == true)
    {
        x += 5  ;
    }

    if(Input.GetKeyDown(KeyCode.DownArrow))
    {
        downPressed = true ;
    }
    else if(Input.GetKeyUp(KeyCode.DownArrow))
    {
        downPressed = false ;
    }

    if(downPressed == true)
    {
        x -= 5  ;
    }

    transform.Translate(x * Time.deltaTime/10, 0, 0) ;
}

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-06T19:54:01.630

[文档](http://docs.unity3d.com/Documentation/ScriptReference/Input.GetKeyDown.html)说这是正常的预期行为。

您可能想改用[GetButton](http://docs.unity3d.com/Documentation/ScriptReference/Input.GetButton.html)或[GetAxis](http://docs.unity3d.com/Documentation/ScriptReference/Input.GetAxis.html)，因为只要按住键，它们就表示“按下”（GetButton 返回 true，GetAxis 返回 1）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-06-14T22:20:27.347

来自[Input.GetKeyDown](http://docs.unity3d.com/Documentation/ScriptReference/Input.GetKeyDown.html)的文档。

> 您需要从 Update 函数中调用此函数，因为每帧都会重置状态。在用户释放键并再次按下它之前，它不会返回 true。

此方法对于打开​​菜单或其他一次性事件最有用。比如继续对话。

您可以使用上面提到的方法，但是您可以使用[Input.GetKey](http://docs.unity3d.com/Documentation/ScriptReference/Input.GetKey.html)来实现您的目标。

> 当用户按住 name 标识的键时返回 true。

# php - 基于 \n 展开

> ID：11368688
> 
> 赞同：0
> 
> 时间：2012-07-06T19:41:03.573
> 
> 标签：php, csv

我正在拉入一个 CSV，我想根据新行分解返回的字符串。

```
$quotes = file_get_contents('http://ca.finance.yahoo.com/d/quotes.csv?s=CLQ12.NYM+NGQ12.NYM+GCQ12.CMX+SIN12.CMX+HGN12.CMX+^DJI+^GSPC+^GSPTSE+^SPCDNX+X&f=nsc1'); 
```

给我：

```
"Crude Oil Aug 12","CLQ12.NYM",-3.10
"Natural Gas Aug 1","NGQ12.NYM",-0.165
"Gold Aug 12","GCQ12.CMX",-28.40
"Silver Jul 12","SIN12.CMX",-0.698
"Copper Jul 12","HGN12.CMX",-0.079
"S&P 500","^GSPC",-13.20
"S&P/TSX Composite","^GSPTSE",-156.71
"S&P/TSX Venture C","^SPCDNX",-18.29
"United States Ste","X",-0.37 
```

然而，使用 `$quotes = explode('\n', $quotes);`并没有做任何事情。返回每行数组的最简单方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-06T19:41:37.920

你需要双引号，否则 PHP 不会解析转义序列：

```
$quotes = explode("\n", $quotes); 
```

您还可以使用[`file()`](http://php.net/file)返回行数组：

```
$array = file( 'http://ca.finance.yahoo.com/d/quotes.csv?s=CLQ12.NYM+NGQ12.NYM+GCQ12.CMX+SIN12.CMX+HGN12.CMX+^DJI+^GSPC+^GSPTSE+^SPCDNX+X&f=nsc1'); 
```

但是，更好的方法可能是 PHP 中内置的 CSV 函数，例如[`fgetcsv()`](http://php.net/fgetcsv).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T19:48:25.997

您可能想研究使用 fgetcsv。

它将逐行检索为数组。

[http://php.net/manual/en/function.fgetcsv.php](http://php.net/manual/en/function.fgetcsv.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T21:55:24.140

我宁愿使用 PHP_EOL 来实现跨操作系统兼容性：

```
<?php
$quotes = file_get_contents('http://ca.finance.yahoo.com/d/quotes.csv?s=CLQ12.NYM+NGQ12.NYM+GCQ12.CMX+SIN12.CMX+HGN12.CMX+^DJI+^GSPC+^GSPTSE+^SPCDNX+X&f=nsc1');
$lines = explode(PHP_EOL, $quotes);
?> 
```

# .htaccess - 如何 301 将旧索引页面重定向到我的新页面

> ID：11368698
> 
> 赞同：1
> 
> 时间：2012-07-06T19:41:36.717
> 
> 标签：.htaccess

我在谷歌有 10 万个索引页面

[http://www.domain.com/lol-1](http://www.domain.com/lol-1) http://www.domain.com/lol-2 [http://www.domain.com/lol-3](http://www.domain.com/lol-3) ...

我想 301 将所有 100k 页面重定向到我在[http://www.domain.com/newpage的新页面](http://www.domain.com/newpage)

我该怎么做呢？对不起，我是 htaccess 的新手

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T19:49:24.187

这将计算任何以 lol- 开头的访问您的服务器的内容，并将其余的 url 发送到 newpage/

那是 www.domain.com/lol-whatever --> www.domain.com/newsite/whatever

```
RewriteEngine On
RewriteRule ^lol-(.+)$ newpage/$1 [R=301] 
```

如果后面的 lol- 必须是数字，请使用以下更具体的情况：

```
RewriteEngine On
RewriteRule ^lol-([0-9]+)$ newpage/$1 [R=301] 
```

# c++ - Qt中如何使用TMX数据【C++游戏】

> ID：11368700
> 
> 赞同：0
> 
> 时间：2012-07-06T19:41:41.523
> 
> 标签：c++, qt, tmx

我正在学习如何在 Qt creator 中做事，并下载了[“Tiled”](http://www.mapeditor.org/)，这是一个输出 .TMX 文件的平铺地图创建器。我用几个不同颜色的瓷砖创建了一个简单的地图。

现在，在 Qt Creator 2.4.1 [最新版本......它说“基于 Qt 4.7.4（32 位）”]，我希望能够在 Qt C++ 项目中使用它。一些谷歌搜索让我找到了 TMX 解析器 [http://code.google.com/p/tmx-parser/] 但我无法获得源代码 [我将 Silk SVN 下载到 SVN 签出代码，但我m 无法设置代理]，但无论如何 TMX 应该像 XML，并且 Qt 有自己的 XML 解析器，对吧？

我的最终目标是能够以某种方式在一个简单的游戏中使用我自己的平铺地图，并使用我的 C++ 技能在 Qt Creator 中进行编码。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T21:06:44.860

好吧，看来你很幸运。您需要的源是 BSD 许可的。

程序建立在内部 libtitled 库之上。所以你可以在你的项目中使用它。

只需下载 Tiled 源代码，然后在您的 Qt Creator 中编译它。将 tmxviewer 项目作为在 QT 应用程序中集成 libtitled 的示例。

# sencha-touch - 无法获取存储（无法创建无法识别别名的实例）

> ID：11368708
> 
> 赞同：2
> 
> 时间：2012-07-06T19:42:17.373
> 
> 标签：sencha-touch, sencha-touch-2

我是 Sencha Touch 2 的新手，并尝试按照本[教程](http://miamicoder.com/2012/how-to-create-a-sencha-touch-2-app-part-2/)学习它。打开时出现错误`index.html`。这是错误：

```
[Ext.createByAlias] Cannot create an instance of unrecognized alias: widget.noteslist
sencha-touch-debug.js:6295 Uncaught Error: 
```

谢谢！

编辑：

根据 hekomobile 的建议，我做了一些更改。requires 属性现在是：

```
requires: [
        'NotesApp.view.NotesListContainer',
        'NotesApp.view.NotesList'
], 
```

此外，将 itemTpl 属性字符串全部放在一行似乎可以解决问题（排序）。

部分应用程序加载（顶部工具栏加载），但商店没有，我收到此错误：

`[WARN][NotesApp.view.NotesList#applyStore] The specified Store cannot be found Console.js:35`

可以在[此处](http://www.mediafire.com/?e4986489llyskpu)下载该项目代码的当前状态。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T19:57:49.117

在 app.js 存档中放入`requires: ['NotesApp.your_folder.your_class']`类似这样的内容

```
Ext.application({
name: 'NotesApp',

    requires: ['NotesApp.view.NotesListContainer'],

    views: ['NotesListContainer'],
    controllers: ['Notes'],
    models: ['Note'],

    launch: function() {
        Ext.Viewport.add({
           xtype: 'noteslistcontainer'
        })
    }
}); 
```

等等。我希望这有帮助。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T21:04:49.133

嘿@Nathan 把正确的 itemTpl 这样的东西，

```
itemTpl: '<pre><div class="list-item-title">{title}</div><div class="list-item-narrative">{narrative}</div></pre>' 
```

在您的 .js 文件中这是错误的。:)

![在此处输入图像描述](../Images/adf697c2c4bc25d66bffaf102de7c94c.png)

# django - Django TypeError：“totask”是此函数的无效关键字参数

> ID：11368709
> 
> 赞同：1
> 
> 时间：2012-07-06T19:42:18.017
> 
> 标签：django, arguments, keyword, typeerror

我有一个模型供用户为任务添加时间。

```
class Time(models.Model):
    to_task = models.ForeignKey(Task)
    appuser = models.ForeignKey(CustomUser)
    hours = models.DecimalField(max_digits=5, decimal_places=2) 
```

但是，当我尝试使用以下内容创建此模型的实例时：

```
t1=Time(totask=task, appuser=user, hours=6.75) 
```

我收到一个错误：

```
TypeError: 'totask' is an invalid keyword argument for this function. 
```

我之前没有制作任何具有多个 ForeignKeys 的模型，所以我认为可能是因为这个。但是，我在 Django 文档中看到了带有两个 ForeignKey 的示例，它们的功能与我完全相同。

经过多次搜索，我仍然无法弄清楚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T19:44:42.177

嗯......这似乎不可能是错误的，但你的领域`to_task` *不是* `totask`。使用实际的字段名称，您就可以了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T19:44:45.623

问题是您已将其定义为`to_task`在模型中，因此在创建实例时需要使用相同的名称：

```
t1 = Time(to_task=task, appuser=user, hours=6.75) 
```

不要忘记保存它：

```
t1 = Time(to_task=task, appuser=user, hours=6.75)
t1.save() 
```

您也可以使用该`create`方法：

```
t1 = Time.objects.create(to_task=task, appuser=user, hours=6.75) 
```

# php - 哪个更快：输出缓冲区或回显

> ID：11368717
> 
> 赞同：3
> 
> 时间：2012-07-06T19:42:57.140
> 
> 标签：php, echo, output-buffering

我正在写一个 wordpress 小部件插件。它应该输出一些看起来像这样的html代码

```
<a href="link1">link1title</a>
<a href="link2">link2title</a>
<a href="link3">link3title</a>
<a href="link4">link4title</a>
<a href="link5">link5title</a> 
```

我正在运行一个 for 循环来输出 2 个数组的链接和标题，我可以通过两种不同的方式来做到这一点：

```
<?php for ($i = 0; $i < $x; $i++)
    echo '<a href="'.$links[$i].'">'.$titles[$i].'</a>';
?> 
```

或者我可以使用这样的东西：

```
<?php ob_start();
for ($i = 0; $i < $x; $i++) {?>
    <a href="<?php echo $links[$i];?>"><?php echo $titles[$i];?></a>
<?php ob_get_flush();?> 
```

这个例子是微不足道的。有更多的 html 代码，并且涉及更多的变量。由于 c/c++ 中 printf 和 cout 之间存在速度差异，我想知道使用输出缓冲区和 echo 之间是否存在速度差异。

另外，哪个更好用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T19:45:07.713

当然有。使用`echo`，您将转储到输出流。使用`ob_start`，您正在创建一个缓冲区，然后必须对其进行处理（在`ob_start`转储到输出流之前的可选参数。

由于第二个基本上是“做一些事情，然后和第一个完全一样”，显然它会慢一些。

但是，如果使用得当，那么好处可能远远超过缺点。

# wpf - 像抽象类一样使用 WPF DataTemplate

> ID：11368723
> 
> 赞同：0
> 
> 时间：2012-07-06T19:43:28.147
> 
> 标签：wpf

我正在为我的一些视图模型创建数据模板，并且我的所有视图模型共享一个公共界面，我希望只需要编写一次模板，而不是在每个视图模型模板中。我怎样才能做到这一点。我的界面基本上有一些属性，比如部分的名称、帮助命令、工具提示文本等。

所以我的每个视图模型都有不同的视图，但这在所有视图模型中都很常见，并且样式相同，只是文本不同。那么我该如何定义它并添加不同的东西而不是每次都添加呢？

基本上我有三个部分，一个用于 IIS 设置，一个用于用户帐户，一个用于 Web 配置。它们都有标题、帮助命令和工具提示。这三个属性在界面中，但它们也有不同的东西，比如 IIS 有网站、虚拟目录等。用户将拥有用户名、密码、类型、组等。

我正在尝试创建一个数据模板来显示这些部分，但不想为帮助命令、标题和工具提示重复模板。无论如何我可以在其中制作一个模板并扩展模板以包含每个部分不同的属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T19:59:35.067

如果您的视图模型已经共享一个通用接口，那么为该接口创建视图与为任何特定视图模型创建视图没有什么不同。您只需要将视图的数据上下文设置为实例化的视图模型，绑定就会起作用。

**编辑**
在你澄清之后，我发现了这个关于[数据模板继承](https://stackoverflow.com/questions/4443600/is-there-a-way-to-use-data-template-inheritance-in-wpf)的 SO 问题。

# vim - 如何将监控结果从标准输入更改为 vim？

> ID：11368725
> 
> 赞同：0
> 
> 时间：2012-07-06T19:43:29.463
> 
> 标签：vim, monitoring, tail

有一个标准输入屏幕，由`tail -f log_file`. 并且想在一个edit中查看监控结果`vim`，这样可以同时搜索到监控的数据。是否有可能做到这一点？

PS：我试过`tail -f log_file | vim -`了，还是不行，因为`vim`不会持续监控`stdin`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T19:53:18.253

这可能只会间接回答您的问题，但如果您只担心*搜索*，为什么不简单地将其输入`less`而不是`vim`? 您可以在更少的地方找到相同的内容（使用`/`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T00:30:24.040

您可以在 Vim ( ) 中打开文件，`gvim -R log_file`然后使用这样的映射来快速重新加载：

```
nnoremap <S-space> :e<CR> 
```

# ruby-on-rails - fullcalendar 防止使用 prev 按钮重复加载事件

> ID：11368730
> 
> 赞同：1
> 
> 时间：2012-07-06T19:43:49.687
> 
> 标签：ruby-on-rails, fullcalendar

使用我的完整日历时，我有一个小问题，如果您正在查看当前月份并想回到例如一月份，您单击上一个按钮直到您到达那里，但每次单击它时都会请求加载该月的事件已发送。因此，在 1 月份的事件渲染之前，它必须找到 6 月、5 月、4 月等。它给事件加载增加了相当多的延迟。当按下 prev 按钮并中止它时，有什么方法可以捕捉到事件加载请求？

# php - Apache/PHP url 解析问题

> ID：11368733
> 
> 赞同：0
> 
> 时间：2012-07-06T19:44:00.397
> 
> 标签：php, apache, mod-rewrite

所以，我正在使用我正在构建的 PHP 应用程序玩一些 url。

我正在使用 .htaccess 使用 mod_rewrite。看起来是这样的：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /

    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule (.*) index.php/$1
</IfModule> 
```

我想如果一个 URL 是这样写的：

```
http://localdomain.com/controller 
```

作为 $_SERVER['PATH_INFO'] 的一部分，我希望“控制器”结束时不会出现问题。但是，在运行 Apache 2.2.22 的 Ubuntu 12.04 上，我得到了 404 Not Found 错误：

```
NOT FOUND
The requested URL /index.php/controller was not found on this server. 
```

似乎在 index.php 后面的斜杠后正确处理了“控制器”，但是有谁知道为什么我得到 404 而不是预期的响应？

最终，我试图捕获“控制器”以在我正在构建的 MVC 框架中使用。

在这种情况下，我有一个非常简单的 index.php，只有以下内容：

```
<?php
echo $_SERVER['PATH_INFO']; 
```

但是，我仍然收到 404 错误，而不是预期的路径信息。

注意：仅访问[http://localdomain.com/](http://localdomain.com/)或[http://localdomain.com/index.php](http://localdomain.com/index.php)即可。mod_rewrite 已打开且正在工作，并且 AllowOverride 设置为 All。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T19:26:27.947

如果您正在运行 apache 2.2.22，那么您的 PHP 代码现在负责在找到控制器函数时指定 200 响应。

与 2.2.14 相比，Apache 2.2.22 似乎采用了不同的重写理念。说来话长，但很有道理。它假设如果您正在重写像 CodeIgniter 那样的前端控制器，那么 PHP 代码负责决定是否找到了请求的 URI。Apache 等待 PHP 代码发送 header('HTTP/1.1 200 OK')，如果没有，则发送 header('HTTP/1.1 404 Not Found')。

有趣的是，来自控制器的实际内容也可能在响应正文中发送。但是如果响应代码是 404（如 MSIE、wget 等），许多 HTTP 客户端会忽略这一点。

简短的版本是 apache 2.2.14（铂金版）是乐观的，除非 PHP 另有规定，否则假设为 200，而 apache 2.2.22 是悲观的，除非 PHP 另有规定，否则假设为 404。

所以在你的代码的某个地方，你必须放置：

```
header('HTTP/1.1 200 OK'); 
```

这应该放在前端控制器确定 URI 有效并且存在并且可以为此 URI 调用的类和方法之后，但在实际调用类和方法之前。

在 CodeIgniter 2.1.3 中，它看起来像这样：

```
// Added this line for Apache 2.2.22
header('HTTP/1.0 200 OK');
// Call the requested method.
// Any URI segments present (besides the class/function) will be passed to the method for convenience
call_user_func_array(array(&$CI, $method), array_slice($URI->rsegments, 2)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T19:45:30.520

这是我为 MVC 创建并使用的 .htaccess ：

```
# Mod Rewrite
<IfModule mod_rewrite.c>
    RewriteEngine On

    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d

    RewriteRule ^(.*)$          /root/index.php/$1 [PT,L]
</IfModule> 
```

尝试添加`^`和`$`+`[PT,L]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T19:47:34.733

如果您希望在没有 index.php 的情况下重写 URL，那么只需使用：

```
RewriteRule ^(.*)$ index.php [NC,L] 
```

# excel - 企业网络上的 Silverlight 应用程序 OOB 问题

> ID：11368734
> 
> 赞同：0
> 
> 时间：2012-07-06T19:44:08.377
> 
> 标签：excel, silverlight-4.0, comautomationfactory

我正在开发一个可以运行 OOB 的 silverlight 应用程序。当我在 VS2010 中调试应用程序时，它就像魅力一样工作，即使我将它安装在我的 PC 上也是如此。该应用程序使用 Excel COM 自动化来自动创建、读取和写入 Excel 文件。

我现在面临的问题是，当我在公司网络上运行应用程序时，我无法创建任何 Excel 文件。虽然如果我使用 MS excel 创建一个 excel 文件并尝试使用我的应用程序对其进行读取和写入，但它可以正常工作。

OBS！！！我在我的 PC 和公司 PC 上使用相同版本的 MS excel。

我的问题是，这（不能创建，但可以读写）是否与 cor 的用户权限有关。网络？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T23:23:57.273

我确定它的权限。如果路径不正确，甚至在较新的操作系统上使用 winform 和 wpf 应用程序时也会发生这种情况。

尝试为文件创建和使用“特殊文件夹”。

System.Environment.SpecialFolder.ApplicationData 等

请参阅[作为开发人员，我应该如何使用 Windows Vista（和 Windows 7）中的特殊文件夹？](https://stackoverflow.com/questions/1556082/as-a-developer-how-should-i-use-the-special-folders-in-vista-and-windows-7)

我建议在 MSDN 上查找特殊文件夹。不久前我遇到了类似的问题，现在我在开始一个新项目时总是会想到 UAC。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T19:02:52.237

在回答我自己的问题之前，让我总结一下我面临的问题。

我正在开发一个 Silverlight 应用程序，该应用程序在 OOB 中使用 Excel COM 自动化来创建/读取/写入 excel 文件。该应用程序在我运行 windows7 的 PC 上运行良好，无论是在调试时还是在运行时。当我尝试在我的公司网络上运行我的应用程序时（那里的所有 PC 都使用 Windows XP），我无法运行它。所以为了解决这个问题，我经历了以下事情： -

1.  我联系了我公司的系统管理员给我更高的权限，但他确实无法运行我的应用程序。（失败）
2.  我试图将我的应用程序中的一些代码（如 System.Environment.SpecialFolder.Personal）更改为 System.Environment.SpecialFolder.ApplicationData。你猜怎么了？另一个失败:(
3.  最后，我在家里的另一台装有 Windows XP 的 PC 上运行了该应用程序，你猜怎么着？它运行。但为什么不在我的公司 PC 上？？？
4.  NOW i think i know what is the problem. I Managed to repro the problem and solve it on my home Windows XP PC. Will try to test it at corporate next week.

The whole problem is solve by these steps:-

1.  Go to Administraive Tools.
2.  Find Component service and open it.
3.  Browse to DCOM Config.
4.  Find Microsoft Excel Application, right click and select properties.
5.  On the Security Tab, change the Launch and activation permission to Customize.
6.  Then add permissions to the user.

After that you are set to launch ;)

You can also read this for more info:- [Microsoft Excel Application entry missing in DCOMCNFG](http://social.technet.microsoft.com/Forums/en/w7itproappcompat/thread/dde69147-a01a-4eb1-8ea9-31adbf874bed "Microsoft Excel Application entry missing in DCOMCNFG")

I will update this thread after i have tested this on my corporate PC.

Best regards

# c++ - 通过修改时间获取目录中的文件

> ID：11368735
> 
> 赞同：3
> 
> 时间：2012-07-06T19:44:27.520
> 
> 标签：c++, sorting, time

我想编写一个 C++ 函数，用目录中所有文件的文件名填充向量。此外，我希望这个向量按文件的最后修改时间排序。

我可以使用 boost:: filesystem 读取目录中的所有文件并将其传递给向量，但是这些文件会通过文件名加载到向量中，然后我对文件进行统计并执行一种效率不高的排序。

有谁知道一个快速的方法来做到这一点？例如， ls -lhctr 几乎可以立即执行此操作，因此 C++ 对于大型目录也应该能够非常快速地执行此操作。

如果可能的话，我也希望它具有亚毫秒级的分辨率。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T19:51:01.797

也许`map/multimap<std::time_t/dt::ptime, std::string/fs::path>`？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T19:54:07.040

您可以使用 Boost.Filesystem 遍历目录，并调用[`last_write_time()`](http://www.boost.org/doc/libs/1_50_0/libs/filesystem/doc/reference.html#last_write_time)每个文件。

然后使用调用结果作为键将文件名存储在[std::multimap中。](http://en.cppreference.com/w/cpp/container/multimap)`last_write_time`这样，在插入容器时会自动进行排序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T19:53:05.370

我知道在 Qt 的框架内有一个 QFileInfo 类将提供该信息。[http://doc.qt.nokia.com/4.7-snapshot/qfileinfo.html](http://doc.qt.nokia.com/4.7-snapshot/qfileinfo.html)

我对 boost 不太熟悉，但我认为这应该类似： http: [//www.boost.org/doc/libs/1_32_0/libs/filesystem/doc/operations.htm#last_write_time](http://www.boost.org/doc/libs/1_32_0/libs/filesystem/doc/operations.htm#last_write_time)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T20:22:32.020

我并不是要开始伟大的 C++ system() 战斗，但您提到“ls -lhctr”几乎会立即返回您的答案，那么为什么不使用 system() 函数呢？尝试：

`system("ls -lhctr > out.txt");`

And then use the fstream header to getline() that data?

Using system(), of course, guarantees that this solution won't be portable to other OSes, but you may not care about doing that anyway.

# perl - 需要 Net::Server SSL 服务器提示

> ID：11368736
> 
> 赞同：0
> 
> 时间：2012-07-06T19:44:28.340
> 
> 标签：perl, ssl, tcp

我正在使用 Net::Server 模块构建一个预分叉 SSL 服务器。客户端将传输二进制数据，或者为每个数据集打开一个新连接，或者让连接永久打开。

数据是动态长度的，带有指定有效负载长度的标头。

问题：

*   什么是读取数据的推荐方式，以支持持久连接？
*   在实际开始接收数据之前，如何确定客户端是否正确建立了 SSL 会话？

代码模板：

```
#!/usr/bin/perl

use common::sense;

use IO::Socket;
use base qw(Net::Server::PreForkSimple);

my $sslErrorCallback = 'ssl_error_callback';
__PACKAGE__->run(
  port => "*:12345:ssleay:IPv4",
  SSL_key_file => "server.pem",
  SSL_cert_file => "server.crt",
  SSL_error_callback => \&$sslErrorCallback,
);
exit;

################################################################################

sub ssl_error_callback {
  print STDERR "SSL failed; Data::Dumper:Dumper(\$@)";
}

##
# process_request - for Net::Server
sub process_request {
  my $self = shift;
  my $serverProp = $self->{'server'};

  # howto check if ssl session is established?

  while(1) {
    # wait until new data is available
    # read/verify the header (5 byte)
    # read/verify the payload (XX byte)
    # do something with the payload
  };

  return;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T20:58:47.443

1.  覆盖[`read`](http://kobesearch.cpan.org/htdocs/Net-Server/Net/Server/Proto/SSLEAY.pm.html#read-)以检查关闭的连接。
2.  覆盖[`bind_SSL`](http://kobesearch.cpan.org/htdocs/Net-Server/Net/Server/Proto/SSLEAY.pm.html#bind_SSL-)以执行额外的 Net::SSLeay 检查。

# c# - FindControl 不适用于动态创建的控件

> ID：11368740
> 
> 赞同：0
> 
> 时间：2012-07-06T19:44:47.783
> 
> 标签：c#, javascript, asp.net, ajax

我有一个使用母版页的 asp 页。我在页面上创建了几个面板，并通过 AJAX 调用我的代码隐藏页面上的 [Webmethod]。这是页面本身的结构......

```
<form runat="server" class="form-horizontal" id="frm_estRequest">
   <div id="mainContent" runat="server" >
    <div id="contentInner" runat="server>
           <asp:Panel  id="comp_list" runat="server"></asp:Panel>
        </div>
   </div>
</form> 
```

我通过 web 方法将动态创建的控件添加到“comp_list”面板。这是在 webmethod 中创建的 html...

```
Panel component = new Panel();
component.ID = "comp" + compNumber;
component.Controls.Add(new LiteralControl("<input type='hidden' value='" + 
compType + "' ID='compType_" + compNumber + "'/>")); 
```

所以我想做的是从 Html Hiddenfield 中获取价值。这是我必须做的（由于某种原因它不起作用）。

```
ContentPlaceHolder cph =(ContentPlaceHolder)this.Master.FindControl("placeholder_content");
Control compList = (Control)cph.FindControl("frm_estRequest").FindControl("mainContent").FindControl("contentInner").FindControl("comp_list");
Control ct = (Control) compList.FindControl("comp" + i.ToString());
HiddenField compType = (HiddenField)ct.FindControl("compType_" + i.ToString()); 
```

我能够获得“comp_list”控件，但这是我能获得的。它一直说 ct 为空。仅供参考，我只是一个计数器，用于跟踪已添加到页面的控件。我唯一的想法是，也许我应该使用 clientID。对此的任何帮助将不胜感激。

控件呈现为 html，然后通过 ajax 返回到页面，然后像这样添加到 div...

```
System.Text.StringBuilder sb = new System.Text.StringBuilder();
System.IO.StringWriter tw = new System.IO.StringWriter(sb);
HtmlTextWriter hw = new HtmlTextWriter(tw);
component.RenderControl(hw); 
return sb.ToString();

var req = $.ajax({ 
                    type: "POST", 
                    url: "EstRequest.aspx/createComponent", 
                    data: params,
                    contentType: "application/json; charset=utf-8", 
                    dataType: "json", 
                    success: function (data) { 
                            $('#<%= comp_list.ClientID%>').append(data.d) 
                            document.getElementById('<%= compNumber.ClientID %>').value = comp + 1;

                            $("#<%= compNumber.ClientID %>").live("click", function() {
                            $(this).next().slideToggle("fast")}); 

                            }, 
                    error: function (response) { debugger; alert("Error: " + params); }, 
                    failure: function (response) { 
                        alert(response.d); 
                    } 
                }) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T20:21:57.747

> `面板组件=新面板（）；组件.ID = "comp" + compNumber; component.Controls.Add(new LiteralControl(""));
> 
> //这里添加一行
> 
> comp_list.Add（组件）；`

现在尝试它应该可以工作。

# c# - Group By - 仅返回唯一元素的 IEnumerable

> ID：11368752
> 
> 赞同：1
> 
> 时间：2012-07-06T19:45:49.430
> 
> 标签：c#, asp.net-mvc-3, linq, entity-framework

我有一个 LINQ to Entities 查询，我只需要返回“ProgramYears”的唯一实例，这样我就可以在我的视图中遍历它们。我不知道如何改变它，这样我就不会得到重复。

```
var data = from SurveyProgramModel in surveyProgramRepository.Get()
                       where SurveyProgramModel.ProgramYear == ProgramYear
                       group SurveyProgramModel by SurveyProgramModel.ProgramTypeId into programTypeGroup
           select new ProgramTypeViewModel()
           {

               ProgramTypeIds = programTypeGroup.Key,
               ProgramIds = programTypeGroup.Select(r => r.ProgramId),
               ProgramYears = programTypeGroup.Select(r => r.ProgramYear),
               ProgramTitles = programTypeGroup.Select(r => r.ProgramTitle),
               ProgramTypes = programTypeGroup.Select(r => r.ProgramType.ProgramType).Distinct(),
           }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T19:50:16.713

可以使用`Distinct`运营商吗？

```
(from SurveyProgramModel in surveyProgramRepository.Get()
 where SurveyProgramModel.ProgramYear == ProgramYear
 group SurveyProgramModel by SurveyProgramModel.ProgramTypeId)
.Distinct()
.Select(programTypeGroup => new ProgramTypeViewModel()
    {
        ProgramTypeIds = programTypeGroup.Key,
        ProgramIds = programTypeGroup.Select(r => r.ProgramId),
        ProgramYears = programTypeGroup.Select(r => r.ProgramYear),
        ProgramTitles = programTypeGroup.Select(r => r.ProgramTitle),
        ProgramTypes = programTypeGroup.Select(r => r.ProgramType.ProgramType).Distinct(),
    }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T20:53:15.580

这将为您提供您想要的不同年份：

```
var years = surveyProgramRepository.Get()
           .Select(x => x.ProgramYear).Distinct(); 
```

或者，如果我误解了这个问题，并且您想要*每组*财产的不同年份`ProgramYears`，您可以在您的方法中进行以下更改`Select`：

```
...
ProgramYears = programTypeGroup.Select(r => r.ProgramYear).Distinct(),
... 
```

（但正如评论中所述，这没有意义，因为您已经使用 过滤了一年`where`，因此每个组在 中只有一年`ProgramYears`）

# ipad - UIPopover 防止摇晃撤消

> ID：11368759
> 
> 赞同：1
> 
> 时间：2012-07-06T19:46:45.493
> 
> 标签：ipad, ios5, uipopovercontroller, nsundomanager, uipopover

我有一个允许在各种情况下输入文本的应用程序。当文本输入到 UIPopover 内的 UITextView 或 UITextField 时，摇动撤消不起作用。摇晃设备（或模拟器）时，不会出现询问您是否要撤消的 UIAlertView。

如果我有 UITextFields 不包含在 UIPopovers 中，请摇动以撤消按预期工作。

当文本输入字段位于 UIPopover 中时，什么可能会阻止摇动撤消工作？

我的部署目标是 iOS 5.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T12:05:20.657

遇到了同样的问题，但是我开始认为这是故意的，因为我也无法撤消在应用程序（例如 Safari 和地图）上在 Apples 中输入弹出框。

也许这个想法是，您不需要在那里进行撤消操作，因为点击弹出框之外的任何地方都会关闭弹出框而不保存。

# git - git-p4 克隆单个文件

> ID：11368769
> 
> 赞同：5
> 
> 时间：2012-07-06T19:47:52.057
> 
> 标签：git, git-p4

我想使用 git 对特定文件进行一些临时管理。在那个目录结构中有很多我不想要的文件（而且 git 不能很好地处理），但是我需要对这个文件使用它的补丁管理功能。

我想使用 git-p4。是否可以克隆一个文件而不是整个目录结构？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T09:34:42.550

如果只是暂时的，您是否刚刚考虑过独立于 perforce 来做 git？

只需`git init .`在包含文件的目录中执行，将文件添加到 git，为其他所有内容创建一个 .gitignore，p4 编辑文件以使其可写，然后对该文件使用 git，直到您准备好将文件提交回 perforce .

这假设您不想要/不需要`git p4`为您提供的复杂历史记录和同步管理。

# google-chrome - Chrome 开发者栏：重新排序元素

> ID：11368770
> 
> 赞同：16
> 
> 时间：2012-07-06T19:47:52.197
> 
> 标签：google-chrome

## 语境

我正在使用 Chrome。我正在使用开发人员栏。它具有以下顺序：

```
Elements Resources Network Scripts Timeline Profiles Audits Console 
```

我正在开发 13" MBP，iTerm 占据屏幕的右半部分，Chrome 占据屏幕的左半部分。

结果，我的 Chrome 栏看起来像：

```
Elements Resources Network [DROPDOWN] 
```

现在，我想重新排序我的 Chrome 栏，使其看起来像：

```
Elements Scripts Console [DROPDOWN] 
```

反而。

我尝试拖动东西，但无法做到。

## 问题：

有什么方法可以重新排序 Chrome 开发者栏上的元素吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-10-20T23:05:14.343

如果您切换到[Chrome Beta 频道](https://www.google.com/chrome/browser/beta.html)，您会发现您现在可以在 47 版的开发人员工具中拖放重新排序选项卡。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-26T09:02:53.777

首先，您可以使用`Ctrl-1`to `Ctrl-9`（在 Mac 中为`Cmd-1`to `Cmd-9`）切换到特定面板。

这些资源确实存储在一个名为`resources.pak`. 它是一种[二进制格式](https://stackoverflow.com/questions/10633357/how-to-unpack-resources-pak-from-google-chrome)。如果您查看它，您将看到一个 JSON 字符串指定元素的相对顺序。使用十六进制编辑器修改它，你可能会得到你想要的。但是由于谷歌浏览器喜欢自己自动更新，你可能需要每隔几周重新应用你的补丁。

![](../Images/89059ecf9672bab7ff0cc18aab9ee837.png)

# facebook - 发布游戏成就 - 令牌无效错误：“已指定 ID”

> ID：11368771
> 
> 赞同：2
> 
> 时间：2012-07-06T19:48:02.547
> 
> 标签：facebook, api, achievements

我正在尝试使用下面显示的 PHP CURL 代码将游戏成就发布到 Facebook。

我有两个变量`$non_sef_achievement`和`$sef_achievement`.

使用`$sef_achievement`我得到我有一个`invalid type game`并且这`game.achievements`是必需的。

`$non_sef_achievement`当我注册成就时，使用该变量会得到以下转储。请注意，`true`当我发布分数时我会得到，另一个错误是当我尝试发布成就时。

你能帮我找出我做错了什么吗？

`[string] {"error":{"message":"Invalid token: \"103032446\". An ID has already been specified.","type":"OAuthException","code":2500}} = "Register: " Tooltip`

`[string] true = "Post Score: " Tooltip`

`[string] {"error":{"message":"Invalid token: \"1000234234602\". An ID has already been specified.","type":"OAuthException","code":2500}} = "Post Achievement: " Tooltip`

注意 标记已被编辑。

```
 //Get the achievement
    $achievement_user = $this->achUser->event_user->username;
   // $achievement = 'http://apps.facebook.com/my_app/component/achievements/achievement/'.$this->achUser->ach->name.'-'.$this->achUser->ach->id;
     $non_sef_achievement = 'https://apps.facebook.com/my_app/index.php?option=com_jachievements&view=achievement&id='.$this->achUser->ach->id;
   // http://mysite.com/index.php?option=com_jachievements&view=achievement&id=1
     $sef_achievement = 'https://apps.facebook.com/my_app/achievements/achievement/'.$this->achUser->ach->id;

    //CHECK https 
    $achievement_display_order = 1;

    // Get an App Access Token
    $token_url = 'https://graph.facebook.com/oauth/access_token?'
        . 'client_id=' . $app_id
        . '&client_secret=' . $app_secret
        . '&grant_type=client_credentials';

    $token_response = file_get_contents($token_url);
    $params = null;
    parse_str($token_response, $params);
    $app_access_token = $params['access_token'];

    $achievement_registration_URL = 'https://graph.facebook.com/'.$app_id.'/achievements';

    $ch = curl_init($achievement_registration_URL);
    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_POSTFIELDS, 'achievement='.$non_sef_achievement.'&display_order='.$achievement_display_order.'&access_token='.$app_access_token);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    $result = curl_exec($ch);
    curl_close($ch);

 $ach_id = $this->achUser->ach->id;

    $db =& JFactory::getDBO();
    $tableName = $db->nameQuote('jos_ja_achievements_actions');
    $achparams = $db->nameQuote('params');
    $achtype = $db->nameQuote('community_addkarmapoints');
    $sql = "SELECT $achparams FROM ".$tableName." WHERE ach_id =  $ach_id AND `type_name` = 'community_addkarmapoints'" ; 
    $db->setQuery($sql);
    $row = $db->loadRow();
    $achparam = $row['0'];
    $str = explode('"',$achparam);
    $ach_points = $str['3'];

    $score = $ach_points;

         $score_URL = 'https://graph.facebook.com/' .$fbUserId. '/scores';      
    $ch = curl_init($score_URL);
    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_POSTFIELDS, 'score='.$score.'&access_token=' . $app_access_token);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    $result = curl_exec($ch);
    curl_close($ch);

         POST a user achievement         
    $achievement_URL = 'https://graph.facebook.com/'.$fbUserId.'/achievements';
    $ch = curl_init($achievement_URL);
    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_POSTFIELDS, 'achievement='.$non_sef_achievement.'&access_token=' . $app_access_token);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    $result = curl_exec($ch);
    curl_close($ch); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T09:00:02.693

如果您提出以下请求，可能会导致“已指定 ID”：

`https://graph.facebook.com/[USER ID]/feed?id=[SOME OTHER ID]`

在该示例中，路径中的第一个“[USER ID]”是 Facebook 的请求“id”，指定另一个 ID 作为参数会触发错误。

在这种情况下，最可能的原因是，如果您的成就 URL 在您调用 API 之前没有正确转义的 URL 中有一个“?id=” - 请检查您的编码或更改您在其中使用的参数的名称你的成就生成代码

# java - Eclipse Juno 中的规划透视图？

> ID：11368774
> 
> 赞同：0
> 
> 时间：2012-07-06T19:48:17.930
> 
> 标签：java, eclipse

以前版本的 Eclipse 有一个计划透视图，其中包含一个任务视图，用于查看任务存储库中的任务。我在 Eclipse Juno 中找不到这个，也找不到任何插件来安装它。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T02:02:32.057

这可能取决于您使用的特定包。

“面向 RCP 和 RAP 开发人员的 Eclipse”包包括开箱即用的 Mylyn：Menu Window、Open Perspective、Other...、Planning 打开透视图，或 Window、Show View、...、Mylyn、Task List任务列表。

还包括对 Bugzilla 和 Gerrit 的访问，对于其他任务存储库，您需要安装更多连接器，例如通过帮助、Eclipse Marketplace...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T21:01:44.510

好的，在Help->Install new software中找到。选择使用“Juno - [http://download.eclipse.org/releases/juno](http://download.eclipse.org/releases/juno) ”，在“协作”选项卡下有一个选项“Mylyn Tasks Connector: Bugzilla”。

# php - 以编程方式降低上传 MP3 文件的采样率

> ID：11368778
> 
> 赞同：1
> 
> 时间：2012-07-06T19:48:30.603
> 
> 标签：php, mp3, sample-rate

我可以完全控制我的服务器，所以我可以安装任何插件或其他任何东西，但该软件必须是可用于商业用途的许可。

我想为人们上传的歌曲创建一个“钝化”版本（即较低的频率和比特率），它会在被自动删除之前使用一小段时间（可能最多几天）。

这可以在下载或上传时实时完成；我不介意它是否在服务器上保留原始副本。我什至不介意将它添加到待办事项的数据库中，然后制作一个 cronjob 来抓取待办事项，然后从那里执行。

我对让PHP运行存储在服务器上的程序了解不多，目前我做的最多的是从PHP运行MySQL备份脚本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T19:52:52.640

您将下载此[http://lame.sourceforge.net/](http://lame.sourceforge.net/) (http://sourceforge.net/projects/lame/files/lame/3.99/) 并安装它。在 PHP 中，您将使用函数[exec](http://php.net/manual/fr/function.exec.php)运行命令，并以低质量（如 64 甚至 48 kbits）创建 MP3 的新“编码”。编码完成后，将编码的输出放在 Web 服务器可以访问的地方，这样您就可以从 Internet 上读取结果。

# backbone.js - Backbone JS - JSON 响应被识别为实际的 Backbone 模型

> ID：11368782
> 
> 赞同：1
> 
> 时间：2012-07-06T19:49:11.307
> 
> 标签：backbone.js

我正在使用带有一些嵌套模型的主干。我在父模型和子模型上有一堆用于 UI 更新的更改处理程序（下面的简化版本）。我遇到的问题是，只要我在父模型上调用 save() 并且 JSON 从服务器返回，子模型数据就会更新，但它不再被识别为主干模型，并且我的处理程序都失败了.

```
ChildModel = Backbone.Model.extend({
    defaults: {
        property: "property"           
    }
});

ParentModel = Backbone.Model.extend({
    defaults: {
        childModel: new ChildModel()           
    },
    url : "resturl",
    initialize: function () {
        this.bind('change:childModel', this.changeHandler, this);
    },             
    changeHandler: function () {
       var child = this.get('childModel');
       if(child instanceof Backbone.Model){
         alert("is a backbone model");
       } else {
         alert("is not a backbone model")
       }
    }
});

var parent = new ParentModel();
parent.save() 
```

当调用 parent.save() 时，模型会更新，但“不是主干模型”会收到警报。​</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T20:04:29.157

看看我对你[其他](https://stackoverflow.com/q/11364615/737318)问题的回答。我认为这是相关的：

[https://stackoverflow.com/a/11368225/737318](https://stackoverflow.com/a/11368225/737318)

如果这没有帮助，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T03:47:59.780

考虑覆盖 parse 方法并在那里而不是在其他地方更新 childModel。方法。这适用于保存模型更新的绑定事件。

```
parse: function ( response, xhr ) {
    // don't update the models childData attribute
    if ( this.get('childModel') instanceof ChildModel ) {

        this.get('childModel').set( response.childData );
    } else {
       this.set({ childModel: new childModel( response.childData );
    }
    delete response.childData;
    return response;
} 
```

# powershell - Powershell：递归替换目录的选择子文件中的字符串

> ID：11368786
> 
> 赞同：11
> 
> 时间：2012-07-06T19:49:43.357
> 
> 标签：powershell, file-io, windows-xp

我在 Windows XP 上使用 Powershell 并尝试编写一个命令：

```
1\. read all .bat,.cfg, and .config files
2\. replace a string (it's actually the path...these files were all moved)
3\. overwrite the existing files with the new one (same name, same location, etc.) 
```

我不是 Powershell 用户，但我设法将以下内容拼凑在一起：

```
gci -r -include "*.bat","*.config","*.cfg" 
    | gc 
    | foreach { $_ -replace "D:","C:\path" } 
    | sc ??.FullName 
```

我相当确定我已经处理了#1 和#2，但是在弄清楚#3 时遇到了麻烦（将文件名传递给可以在 sc 中引用的变量）。有什么想法吗？另外，如果您需要任何其他信息，请告诉我。

**编辑：**

我设法找到了答案（见下文），但有更好的方法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-06T20:38:10.533

尝试：

```
gci -r -include "*.bat","*.config","*.cfg" |
 foreach-object { $a = $_.fullname; ( get-content $a ) |
 foreach-object { $_ -replace "D:","C:\path" }  | 
set-content $a } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-07-23T03:00:37.043

如果您想在所有文件上使用上述代码，请使用此代码，请注意第一行：

```
gci -r *.* |
foreach-object { $a = $_.fullname; ( get-content $a ) |
foreach-object { $_ -replace "master81","master" }  | 
set-content $a } 
```

如果您遗漏，`*.*`您可能会收到错误，因为您正在尝试编辑文件夹。

*[获取内容]，未授权访问异常*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T20:37:27.747

我意识到我需要一个额外的变量。一种方法是将 for 循环集成到命令的外部。我用了：

```
foreach ($f in gci -r -include "*.bat") 
    { (gc $f.fullname) |
       foreach { $_ -replace "D:","C:\path" }  |
       sc $f.fullname 
    } 
```

# android - 似乎在 ICS 中被忽略的主题

> ID：11368787
> 
> 赞同：5
> 
> 时间：2012-07-06T19:49:46.837
> 
> 标签：android, android-layout, styles, themes, android-4.0-ice-cream-sandwich

我正在构建一个为其活动使用一些主题的应用程序。它们在运行 ICS 之前版本的 Android 的手机上都能正常工作，但由于某种原因，当我在 Galaxy Nexus（运行 4.1）和 Nexus S（运行 4.0.4）上应用主题时，背景总是黑色的。

这是我正在使用但不起作用的主题之一：

```
<style name="BlueStyle" parent="@android:style/Theme.Holo.NoActionBar">
    <item name="android:background">@color/Blue</item>
    <item name="android:textColor">@android:color/white</item>
    <item name="android:textSize">16dip</item>
</style> 
```

蓝色在我的`res/values/colors.xml`. 主题在我的清单中`res/values-v11/styles.xml`并在我的清单中被引用，如下所示：

```
<activity
        android:name=".activity.SplashActivity"
        android:theme="@style/BlueStyle"
        android:configChanges="orientation|keyboardHidden|screenSize"/> 
```

就像我说的那样，一个类似的主题（在 下`res/values`，`@android:style/Theme.NoTitleBar`用作父级）在 ICS 之前的 Android 版本上适用于相同的 Activity。即使我进入布局文件并制作布局的背景，`@color/Blue`如果我将主题分配给 Activity，它仍然是黑色的。但是，我发现，如果我将主题设置为，`@android:style/Theme.NoTitleBar`那么 Activity 将使用我在布局文件中强制使用的蓝色。

我也尝试将 BlueStyle 设置为整个应用程序的主题，但这没有什么区别。

其他人以前遇到过这个问题吗？这是我第一次尝试同时支持 pre-v11 和 v11+ 主题，所以我可能会犯一些非常明显的错误。

**编辑：**还忘了提到，当我的活动开始时，我确实看到了蓝色，但随后背景变成了黑色。不确定该信息是否会有所帮助。

**编辑#2：**我也刚刚在运行 3.2 的 Galaxy Tab 10.1 上进行了测试，它也存在问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T14:12:50.580

从外观上看，主题活动在 Honeycomb 及更高版本中完全被破坏了。我通过删除特定于活动的主题并将样式添加到我的布局文件来“解决”我的问题。

如果遇到此问题，请确保在将主题应用到布局之前，从 AndroidManifest.xml 中的活动中删除主题。否则，问题将持续存在。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-06T20:52:38.250

在 .xml 中，选择在主题选项下的顶部的主题布局是什么。还选择下拉框并单击打开然后声明和确保 xml 在那里以及在 android amnifest 中是正确的。

我注意到即使我出于某种原因更改了样式，它也会立即接受它们，我必须多次保存它们。

# php - PHP/MYSQL - MYSQLI - 准备好的语句 - 如何获取此查询的值？

> ID：11368799
> 
> 赞同：2
> 
> 时间：2012-07-06T19:51:13.683
> 
> 标签：php, mysqli, prepared-statement

我有一个查询，它检查数据库是否与输入的用户名和密码匹配，此查询的相应值将是 0（不匹配）或 1（匹配）。这将在具有一个值（1 或 0）的列 (itDoesExist) 中输出。

我想知道的是如何在 PHP 中获得该值？我想我在这里遗漏了一些东西，我似乎无法弄清楚那是什么。

这是代码：

```
$stmt = $link->prepare("
    SELECT CASE WHEN
    EXISTS (

    SELECT 1
    FROM user_details
    INNER JOIN user_info 
        ON user_details.id = user_info.id
    WHERE user_info.emailContact = ?
    AND user_details.password = ?
    )
    OR EXISTS (

    SELECT 1
    FROM user_details
    INNER JOIN user_business_info 
        ON user_details.id = user_business_info.id
    WHERE user_business_info.emailContact = ?
    AND user_details.password = ?
    )
    THEN 1
    ELSE 0
    END AS itDoesExist
");

if (!$stmt)
{
    $error = "{$link->errno}  :  {$link->error} (Error Searching For User)";
    include "C:/wamp/www/includes/html/main/error.html.php";
    exit();
}
if (!$stmt->bind_param("ssss", $username, $password, $username, $password))
{
    $error = "{$stmt->errno}  :  {$stmt->error}";
    include "C:/wamp/www/includes/html/main/error.html.php";
    exit();
}
if (!$stmt->execute())
{
    $error = "{$stmt->errno}  :  {$stmt->error} (Cant execute?)";
    include "C:/wamp/www/includes/html/main/error.html.php";
    exit();
} 
```

提前感谢您在这方面的任何帮助或信息！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T20:01:31.390

如果您正在寻找可以使用`bind_result`and的查询结果`fetch`，请参阅[prepare 语句中的示例](http://php.net/manual/en/mysqli.prepare.php)

```
$stmt->bind_result($itDoesExist);
$stmt->fetch();

if ($itDoesExist == 1)
{
    /* Handle the exists case */
} 
```

# node.js - Node.js 奇怪的每个请求执行多个代码

> ID：11368801
> 
> 赞同：3
> 
> 时间：2012-07-06T19:51:20.847
> 
> 标签：node.js

我之前对节点做了一些实验

以下代码向控制台输出“aaa”，浏览器按预期继续等待响应。

```
var http = require("http");

http.createServer(function (req, res) {
  //res.writeHead(200);
  console.log("aaa");
  //res.end("hello");
  //console.log("test111");
  //res.end("bye");
}).listen(5555); 
```

输出：

```
aaa 
```

但是，一旦我取消注释第一个 res.end，节点就会根据一个请求将“aaa”两次写入控制台！

```
var http = require("http");

http.createServer(function (req, res) {
  res.writeHead(200);
  console.log("aaa");
  res.end("hello");
  //console.log("test111");
  //res.end("bye");
}).listen(5555); 
```

输出：

```
aaa
aaa 
```

最后，当我取消评论所有内容时，

```
var http = require("http");

http.createServer(function (req, res) {
  res.writeHead(200);
  console.log("aaa");
  res.end("hello");
  console.log("test111");
  res.end("bye");
}).listen(5555); 
```

输出：

```
aaa
test111
aaa
test111 
```

知道为什么每个单个请求都会执行两次 console.log 语句吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-06T19:59:54.197

在第一个示例中，浏览器没有得到回复并停在那里。

在第二个示例中，浏览器*确实*收到了回复，然后继续请求作为第二个请求的 favicon。

尝试同时记录请求 url：

```
var http = require("http");
http.createServer(function (req, res) {
  console.log("aaa", req.url);
  res.end("bye");
}).listen(5555); 
```

你会看到服务器运行：

```
aaa /
aaa /favicon.ico 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-06T20:00:36.247

这有您正在寻找的答案：

[对于每个请求，NodeJS 服务器将变量递增 2](https://stackoverflow.com/questions/7904867/nodejs-server-incrementing-variable-by-two-for-every-request)

它正在点击 / 和 /favicon.ico。

# wordpress - 如何更改类别的永久链接？

> ID：11368803
> 
> 赞同：1
> 
> 时间：2012-07-06T19:51:26.583
> 
> 标签：wordpress

我有一些归类在项目下的帖子，并且从主菜单导航中有一个指向该类别的链接。我希望该链接具有这样的网址：[http://www.example.com/projects](http://www.example.com/projects)。如何在 Wordpress 中实现这一目标？

请注意，我已经将博客文章的永久链接设置为：`/%category%/%postname%/`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T20:16:26.577

从垃圾箱中删除所有类别并下载插件 No Category Base。

然后类别页面将具有如下链接：[http](http://example.com/projects) ://example.com/projects而不是[http://example.com/category/projects](http://example.com/category/projects)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T20:01:52.890

如果您已经将其设置为永久链接，那么您应该一切就绪。

我在我的一个网站上有这个设置，它就像你提到的那样工作。

* * *

这些类型的链接是否适用于您的设置？

[http://www.example.com/category/projects](http://www.example.com/category/projects)

[http://www.example.com/projects](http://www.example.com/projects)

# perl - DBM::无法解释的深层错误

> ID：11368807
> 
> 赞同：1
> 
> 时间：2012-07-06T19:51:54.533
> 
> 标签：perl, fork, dbm

所以我[`DBM::Deep`](http://search.cpan.org/perldoc?DBM%3a%3aDeep)用来在不同的分叉进程之间共享数据。我像这样设置我的 DBM::Deep 对象：

```
my $todo = DBM::Deep->new(
    file      => "urls.db",
    locking   => 1,
    autoflush => 1,
    type      => DBM::Deep->TYPE_HASH
); 
```

但是当我运行我的脚本时，我似乎得到了这些错误：

```
DBM::Deep: Cannot read sector at 673 in get_bucket_list() at new_forked_crawl.pl line 116
DBM::Deep: '30': Don't know what to do with type '' at new_forked_crawl.pl line 116
DBM::Deep: Cannot read sector at 1188 in get_bucket_list() at new_forked_crawl.pl line 116
DBM::Deep: '65536': Don't know what to do with type '' at new_forked_crawl.pl line 116
Can't locate object method "data" via package "DBM::Deep::Sector::File::BucketList" at /usr/lib/perl5/site_perl/5.8.8/DBM/Deep/Engine/File.pm line 160. 
```

所以除了最后一个错误之外的所有错误都与第 116 行有关，但奇怪的是第 116 行实际上与 DBM::Deep 无关：

```
 my $pid = fork();
    if($pid) { #line 116
        push(@forked_children,$pid);
    }
    #child process, do the work, son!
    elsif($pid == 0) {
        process_url($todo->{1}->{'urls_hash'}->{$url_id}{'url'},$url_id);
    } #end $pid else 
```

所以我知道这没什么好做的，但是有没有人遇到这些错误或类似的错误？在如何使用 DBM::Deep 方面我有什么遗漏吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T20:40:32.460

我怀疑问题源于使用 DBM::Deep 对象的副本。尝试在孩子中创建一个新的 DBM::Deep 对象。如果创建子对象时父对象中甚至不存在此类对象，通常会更好。

# string - 为什么 Fortran 版本的 Delphi 的 TStringList 的业余实现比 Delphi 的内置版本低 10 倍？

> ID：11368809
> 
> 赞同：1
> 
> 时间：2012-07-06T19:52:10.127
> 
> 标签：string, performance, delphi, memory-management, fortran

要了解 latest 的 OO 特性，编写`Fortran`了一个`Fortran`版本并链接在下面 ( )。来源模仿了那个。`Delphi``TStringList``gist.github``Fortran``Delphi`

这`Fortran` `TStringList`按预期工作。然而，我的问题是，它读取/写入 30MB 文件的 LoadFromFile/SaveToFile 组合比 Delphi 的对应项慢 10 倍。文件越大，Fortran 版本看起来越差。我不会因为我的业余 Fortran 技能而感到惊讶。出于同样的原因，我无法理解性能下降发生在哪里，甚至从哪里开始。你能帮忙评论一下吗？非常感谢您的宝贵时间！

[系统.f90](https://gist.github.com/3dd70d740a3e372a3415)

[SysUtils.f90](https://gist.github.com/347d4f5e3d1ce8eff5a4)

[Classes_TStringList.f90](https://gist.github.com/4010199758d1e976b0c8)

[LoadFromFile/SaveToFile 的测试程序](https://gist.github.com/631152d69bef02262431)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T21:31:48.050

我相信最根本的区别将来自 Delphi 中“String”类型和 Fortran-90 中可变长度字符串的不同性质。

在 Delphi 中，String 是一种引用类型。不仅如此，它还是一个引用计数和修改时复制类型。

那是你写的时候：

```
 var
    a, b: String;   
  begin
    a := 'The quick brown fox';
    b := a;

    b := b + ' jumped over the lazy dog.';
  end; 
```

当**a**分配给**b**时，不会复制字符串字符。取而代之的是**b**和**a**是现在引用相同字符串且引用计数为 2 的指针。

**然后修改b**时，只有在此时（由编译器）生成代码，才需要使用它自己的引用计数 (1) 创建一个初始的重复字符串，并从原始引用计数递减。

但是，简单地将字符串添加到列表中显然不会修改它。

当**TStringList**读取文件的内容时，会从文件中读取一个字符串。然后将字符串值添加到内部列表时，不会复制字符串本身，而是增加引用计数，这反映了即使“LoadFromFile”方法不再使用该字符串（因为它的内容已经替换为从文件中读取的下一个字符串）先前添加到内部列表项的字符串仍然有效。

**LoadFromFile**然后必须初始化一个新字符串，准备好从文件中接收下一个字符串，但这是不可避免的。

不同之处在于，在 Fortran 版本中，除了在从文件中读取每个字符串时对其进行初始化之外，还必须在将项目添加到列表时复制这些字符串中的每一个。由于引用计数的字符串类型，在 Delphi 代码中消除了这种字符串数据的复制。

因此，Fortran 代码的效率将不可避免地降低，而 Delphi 中引用计数的 String 类型的更高效率将对类的几乎每个领域产生影响——根据定义和设计——这种字符串类型的重“用户” .

除了 Delphi 编译器与 Fortran 的内存管理性能或代码生成效率方面的任何其他相对差异之外，这将是超越和补充的。

# r - 在多面几何线图中标记平均 y 值 ggplot2

> ID：11368810
> 
> 赞同：2
> 
> 时间：2012-07-06T19:52:16.763
> 
> 标签：r, ggplot2

我有以下情节，我正在尝试

1）将标签添加到蓝色虚线以显示其值，最好在每个方面的右侧

2）按均值对分面重新排序，使分面按均值的降序出现

```
require(ggplot2)
require(reshape)
set.seed(13)                                                                 
df <- data.frame(a=runif(10), b=rnorm(10), c=rbinom(10, 10, 0.1),            
             d=runif(10, -1, 1), date=as.Date("2000-01-01") + 0:9)       
df <- melt(df, id=c('date'))                                                 

g <- ggplot(df, aes(date, value)) + geom_line() + facet_wrap(~variable)      
g <- g + geom_line(stat='hline', yintercept='mean', color='blue', linetype=2) 
```

![在此处输入图像描述](../Images/fce127e2db66907ef721fa8494caec32.png)

# git - Git 没有显示任何冲突，并且正在覆盖我的本地副本

> ID：11368811
> 
> 赞同：3
> 
> 时间：2012-07-06T19:52:21.367
> 
> 标签：git, github, merge-conflict-resolution

我在 git 上的套路一直很简单：

```
git add -A
git commit -m 'the changes I made'
git pull
# resolve conflicts
git push 
```

然而，由于一些未知的原因，尽管与原点有很多冲突，但在拉取之后，我没有遇到任何冲突，并且未经我的许可，它会强制更新我的本地副本。类似这样的事情：'2 个文件已更改，2 个插入（+），6 个删除（-）'。但就我而言，不应该通过简单的合并来解决冲突，而应该需要我这边手动解决冲突。为什么 git 不让我手动解决冲突？提前致谢！注意：我的 git 命令都没有强制选项 -f

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T20:06:42.407

`git pull`没有参数或多或少等同于`git fetch && git merge origin/<upstream_branch>`. 通过使用`pull`而不是`fetch`and `merge`，您允许 git 尝试合并到您的本地分支。如果该合并发生时没有冲突，您的本地将看起来“强制更新”，因为它能够在没有您干预的情况下整理出您的远程文件版本与您自己的文件之间的差异。

在没有看到您的代码的情况下调试正在发生的事情有点困难，但试试这个：

```
git fetch ;# fetch the remote changes
git diff HEAD origin/<branch> ;# diff your local branch with the remote's copy of <branch> 
```

的输出`git diff`应该让您了解正在发生的事情。如果您想进一步了解它，请尝试`git merge --no-commit origin/<branch>`，然后发出`git diff --cached`。这将准确地向您展示 git 自动合并的更改，并且应该允许您确定什么是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T22:32:36.663

如果`git`在 a 期间设法解决所有冲突，`git pull`那么它将进行提交。这并不意味着它一定会把事情做好。正如您所注意到的，根据更改，您可能需要进行一些手动修复。

为此，请在拉取后在工作树中进行更正，然后将它们暂存（例如，使用`git add -u`）并使用 修改合并提交`git commit --amend`。

这将创建一个新的合并提交，它将 git 所做的合并提交替换为包含您的更正的合并提交。

然后，您可以像往常一样推送结果。

# algorithm - N次方矩阵乘法。更好的方法

> ID：11368812
> 
> 赞同：1
> 
> 时间：2012-07-06T19:52:31.547
> 
> 标签：algorithm, matrix, complexity-theory

我有一个矩阵 [2,2][1,0]。我需要这个 2*2 矩阵的第 n 次乘法。当我使用简单乘法时，我可以在 O(n) 或 O(logn) 中进行。O（登录）代码：

```
int NUM(int n)
 {
  int F[2][2] = {{2,2},{1,0}};
  if(n == 0)
      return 0;
  power(F, n-1);
  return F[0][0];
 }

/* Optimized version of power() */
void power(int F[2][2], int n)
{
  if( n == 0 || n == 1)
  return;
  int M[2][2] = {{2,2},{1,0}};

 power(F, n/2);
  multiply(F, F);

 if( n%2 != 0 )
   multiply(F, M);
} 
```

它在 n 的小值下工作得很好。但是一旦 n 是 10^9 或更多。int,long int 甚至 long long int 都不起作用。所以，我相信这种方法似乎没有多大帮助.

基本上我的问题是：数字变得相当大，甚至没有 long long int。那我该如何处理。

当 n 为 10^9 时，谁能建议我任何公式或算法来获得 2*2 矩阵[2,2][1,0] 的 n 次方？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T20:32:34.790

这是作业，还是只是实施中的练习？如果你有选择，取模可能更方便，基本上你在每个幂或乘法之后取你的矩阵模数 M，矩阵的各个条目永远不会超过 (M - 1)^2，但显然结果会是一种模幂运算的算法，因此与您现在所拥有的不同。

因此，对于无符号长整数，您可以拥有高达 65535 左右的模数和无限指数。取矩阵取模某个数字的过程很简单：取每个条目取模该数字。

请记住，随着指数的增加，这种模幂最终会进入一个循环（循环的大小取决于矩阵和模的属性）。

代码看起来像这样（未经测试且不是特别优雅，几乎只是在每次乘法后插入矩阵模数）：

```
/* Raises the matrix to the exponent n, modulo m. */
int NUM(int n, int m)
 {
  int F[2][2] = {{2,2},{1,0}};
  if(n == 0)
      return 0;
  power(F, n-1, m);
  return F[0][0];
 }

/* Takes a matrix modulo m. */
void modMatrix(int F[2][2], int m)
{
   F[0][0] = F[0][0] % m;
   F[0][1] = F[0][1] % m;
   F[1][0] = F[1][0] % m;
   F[1][1] = F[1][1] % m;
}

/* Optimized version of power() - raises a matrix F to the exponent n modulo modulus */
void power(int F[2][2], int n, int modulus)
{
  if( n == 0 || n == 1) return; // recursive termination condition

  int M[2][2] = {{2,2},{1,0}}; // original matrix for multiplication

 power(F, n/2, modulus); // raise the matrix to half the exponent
 modMatrix(multiply(F, F), modulus); // square the matrix to go the rest of the way

 if( n%2 != 0 ) modMatrix(multiply(F, M), modulus); // if the exponent is odd, multiply one last time
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T11:51:47.030

由于它是一个 2x2 矩阵，一种可能的方法是将其扩展为一组 [泡利矩阵](http://en.wikipedia.org/wiki/Pauli_matrices)和一个单位矩阵。然后使用泡利矩阵的属性（正方形是单位矩阵等 - 参见链接页面）计算`N`th 次方，这对于纸笔练习并不难（参见 Wiki 链接中的等式（2）以上）。

# android - libgdx中的多边形到多边形碰撞

> ID：11368817
> 
> 赞同：2
> 
> 时间：2012-07-06T19:52:41.543
> 
> 标签：android, polygon, collision, libgdx

这段代码出现了意外的 ArrayIndexOutOfBoundsException；谁能帮忙？

我创建了两个这样的多边形：

```
float[]vertice={.1f, 2.7f, .4f, 4.3f, 3.4f, 5.3f, 5.6f, 3.3f, 3.3f, .1f};
Polygon oPolygon1=new Polygon(vertice);

float[]vertice2={.2f,1.3f,1.9f,4.5f,4.1f,1.3f};
Polygon oPolygon2=new Polygon(vertice2); 
```

并更新他们的位置：

```
oPolygon1.setPosition(x1,y1);
oPolygon2.setPosition(x2,y2); 
```

但是当我尝试使用`Intersector`它们来查看它们是否重叠时......

```
if(Intersector.overlapConvexPolygons( oPolygon1, oPolygon2)){
   //do something
} 
```

...我收到以下错误：

> 线程“LWJGL 应用程序”java.lang.ArrayIndexOutOfBoundsException 中的异常：

在这段代码中`Intersector`：

```
// projection axis is perpendicular to potential separation axis edge i->j
float projX = verts1[j + 1] - verts1[i + 1];
float projY = verts1[i] - verts1[j]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T21:04:36.927

这似乎是 LibGDX 中的一个错误。在行设置 projX 中，它应该包装索引

```
float projX = verts1[(j + 1) % length1] - verts1[i + 1]; 
```

我会在 SVN 中解决这个问题。

# javascript - Bootstrap的文档子导航怎么做？

> ID：11368822
> 
> 赞同：0
> 
> 时间：2012-07-06T19:53:16.413
> 
> 标签：javascript, jquery, css, twitter-bootstrap

我开始使用 Twitter-Bootstrap 来帮助我开始制作 Web 应用程序。到目前为止，我很喜欢我所看到的，但我想要一个类似于他们文档的子导航的东西。

例如，在[http://twitter.github.com/bootstrap/components.html](http://twitter.github.com/bootstrap/components.html)有一个子导航栏。我真的很喜欢当你滚动过去时它神奇地粘在顶部的方式。此外，我比常规更喜欢造型`nav-pills`

不过，我不能完全弄清楚是什么导致了这种效果。他们的javascript中的这条评论让我有点害怕：

```
// NOTICE!! DO NOT USE ANY OF THIS JAVASCRIPT
// IT'S ALL JUST JUNK FOR OUR DOCS! 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T20:00:05.680

虽然我没有使用 javascript，但我确实提取了他们的 CSS，在我放在一起的引导应用程序上创建了我自己的子导航栏。相关的 CSS`.subnav`位于[http://twitter.github.com/bootstrap/assets/css/docs.css](http://twitter.github.com/bootstrap/assets/css/docs.css)

他们的警告只是意味着 javascript 不是为公共消费而编写的，因此它可能没有经过全面测试或编写得很好。但是，这是用于修复滚动条上的子导航栏的 javascript：

```
// fix sub nav on scroll
var $win = $(window)
  , $nav = $('.subnav')
  , navTop = $('.subnav').length && $('.subnav').offset().top - 40
  , isFixed = 0

processScroll()

// hack sad times - holdover until rewrite for 2.1
$nav.on('click', function () {
  if (!isFixed) setTimeout(function () {  $win.scrollTop($win.scrollTop() - 47) }, 10)
})

$win.on('scroll', processScroll)

function processScroll() {
  var i, scrollTop = $win.scrollTop()
  if (scrollTop >= navTop && !isFixed) {
    isFixed = 1
    $nav.addClass('subnav-fixed')
  } else if (scrollTop <= navTop && isFixed) {
    isFixed = 0
    $nav.removeClass('subnav-fixed')
  }
} 
```

基本上，当窗口滚动时，此代码检查子导航栏是否已到达窗口顶部；如果有，`subnav-fixed`则添加该类并设置一个标志。否则，将删除该类并将标志设置为 false

# xss - 解码html时如何避免XSS

> ID：11368827
> 
> 赞同：0
> 
> 时间：2012-07-06T19:53:34.277
> 
> 标签：xss, htmlspecialchars, richtext

首先，我想做的是显示来自富文本编辑器的值的解码版本。我的意思是，如果来自富文本编辑器的值显示为粗体，我希望它显示为**这样**，而不是 <.b.>like this<./b.>
我知道我们可以这样做php 函数，称为*htmlspecialchars_decode()*。但我想写它时避免 XSS。有可能做到吗？如果有可能，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T19:55:45.977

最简单的方法是替换或您不想显示的坏标签，例如或等...

# cocoa-touch - 如何在截断的 UILabel 上自定义省略号？

> ID：11368831
> 
> 赞同：3
> 
> 时间：2012-07-06T19:53:47.197
> 
> 标签：cocoa-touch, uilabel

[UILabel](http://developer.apple.com/library/ios/#documentation/uikit/reference/UILabel_Class/Reference/UILabel.html)将截断太长而无法容纳的文本并将省略号附加到末尾：

> 小UILa中很长的句子...

如何自定义省略号文本？我想使用`..."`而不仅仅是`...`. 我的用例是引用的文本，例如：

> 约翰史密斯说：“你好，简·多伊”。

它被截断为：

> 约翰史密斯说：“你好，简 D...

我认为它看起来会更好：

> 约翰史密斯说：“你好，简……”

# javascript - 跨域将视频绘制到画布

> ID：11368832
> 
> 赞同：1
> 
> 时间：2012-07-06T19:53:51.797
> 
> 标签：javascript, html, html5-video, html5-canvas

我有一个`video`链接到电影的标签`content.mysite.com`，并且我有一个从`www.mysite.com`（不同的子域）提供的脚本文件。

该脚本使用方法创建一个`canvas`元素并将视频捕获到画布`context.drawImage`。但是当我尝试使用`canvas.toDataURL`方法从画布中获取图像数据时，由于跨域限制，它失败并出现安全错误。

有解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T09:55:36.290

在视频文件上设置 CORS 标头：

[https://developer.mozilla.org/en/http_access_control](https://developer.mozilla.org/en/http_access_control)

根据此错误报告，`<video>`自 Firefox 12 起支持它：

[https://bugzilla.mozilla.org/show_bug.cgi?id=682299](https://bugzilla.mozilla.org/show_bug.cgi?id=682299)

我认为至少 Chrome 应该支持它，其他浏览器可能不支持。

# android - 嵌套线性布局权重

> ID：11368835
> 
> 赞同：3
> 
> 时间：2012-07-06T19:53:58.193
> 
> 标签：android, android-layout, android-linearlayout, android-layout-weight

我有一个“主”LinearLayout，其中嵌套了几个其他 LinearLayout，它们从一边延伸到另一边。我想知道是否可以使用权重将嵌套布局之间的垂直空间与百分比分开。如果是这样，这可能是我目前在使用我的应用程序时遇到的所有问题的解决方案。感谢所有帮助！

这是我的目标： ![在此处输入图像描述](../Images/140a6a1a8b15009dd1beb423fd9e8be8.png)

我想垂直分割它们，所以它会很好地扩展。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T19:59:07.987

您父母的体重`Layout`将计入您的孩子总数`Layouts`并给`weight=1`您的孩子`Layouts`。

这将使您的孩子`Layouts`水平对齐大小相等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T20:06:49.967

我会避免使用嵌套的线性布局。这会严重影响应用程序的性能。如果您发现您正在使用多个嵌套的线性布局，您可能需要考虑使用相对布局。当然，对于相对布局，您不能使用“权重”属性，但有一些方法可以解决这个问题。这是一篇关于布局的精彩文章：

[http://android-developers.blogspot.com/2009/02/android-layout-tricks-1.html](http://android-developers.blogspot.com/2009/02/android-layout-tricks-1.html)

# php - PHP 存储简单变量

> ID：11368841
> 
> 赞同：0
> 
> 时间：2012-07-06T19:54:17.383
> 
> 标签：php, store

我有一个非常简单的网络同步 PHP 我想构建它基本上每次加载时都会返回一个 0-20 之间的唯一数字。很简单，对吧？

好吧，为了做到这一点，我需要存储最后发送的号码。

我知道有两种方法可以做到这一点，一种是将数字存储在服​​务器上的文件中，然后一遍又一遍地重写、写入等，或者更糟糕的是，使用 MySQL 将一个整数存储在一行中一个单列表....对我来说似乎都过于复杂了。

所以这让我想到一个问题，有没有办法在不使用 MySQL 或文件系统的情况下存储一个简单的整数？

PS我似乎忘记提及这一点，但我需要存储所有客户端的信息，而不仅仅是每个客户端。任何与 cookie 有关的东西都不起作用

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T19:55:04.487

您可以将其存储在会话中

放在`session_start();`每一页的顶部。访问`$_SESSION['number']`。它将在该用户的页面中持续存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T20:15:26.147

如果数据必须是：

*   **统一**所有用户
*   **不得**包括**cookie** /**会话**
*   **必须简单**——这意味着 MySQL 不是一个好的解决方案

那么最好和最简单的解决方案是使用**文件**。

1.  **创建**一个文件，你自己。**TXT**文件似乎工作得很好。
2.  **将初始整数写入**其中。
3.  **一旦用户更新整数/无论他做什么，就**存储整数：****

     **`$file = fopen('data.txt','w')`,`fwrite($file,2)`** 
***   如果您必须检查最后的数据，请使用

    `$last_int = fread($file)`** 

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T20:11:29.200

我没有亲自使用过这个，但似乎这也可能是一个替代解决方案：[APC Functions](http://php.net/manual/en/ref.apc.php)**

# javascript - 为什么 preventDefault 不起作用但返回 false 确实

> ID：11368842
> 
> 赞同：4
> 
> 时间：2012-07-06T19:54:26.837
> 
> 标签：javascript, html, ajax, jquery

有谁知道为什么我的 preventDefault 代码不起作用？return false 返回很好，但我的理解是这不是真正的“正确”方式？

```
 if ($('.signup').length == 0) {
        $('.star').on('click',function(e){
            e.preventDefault();
            var starElement = $(this);
            var resourceId = starElement.parents('li').data('id');

            updateFavoritesSpan( starElement, starElement.hasClass('starred') );

            starElement.toggleClass('starred');
            starElement.parents('li').toggleClass('fvtd');
        });
        // voting
        $('.voting').on('click .up', function(e){
            e.preventDefault();
            sendVote($(this), 1);
        });

        $('.voting').on('click', '.down', function(e){
            e.preventDefault();
            sendVote($(this), -1);
        });
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-06T19:57:11.493

`return false;``preventDefault`和`stopPropagation`. _

`preventDefault`停止对元素的“默认”操作，`stopPropagation`阻止事件冒泡到父元素。

我的猜测是，当你只做`preventDefault`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T19:57:50.923

**不`return false`一样。`preventDefault()`**

事实上`return false`是以下的组合或*简写*：

*   `preventDefault()`
*   `stopPropagation()`

所以尝试添加这个（连同`e.preventDefault()`）：

```
e.stopPropagation(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-06T19:58:40.843

有错别字，改一下：

```
$('.voting').on('click .up', function(e){ 
```

到：

```
$('.voting').on('click', '.up', function(e){ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-06T15:56:17.913

只是为了完整性：

```
返回假
```

也触发

```
停止立即传播（）
```

它取消了同一元素上的所有后续处理程序（在使用 touchend 事件时可能会派上用场，并且意味着取消后续点击）在此处阅读*stopPropagation()*和*event.stopImmediatePropagation()*

之间的区别：[jquery：stopPropagation 与 stopImmediatePropagation](https://stackoverflow.com/questions/5299740/jquery-stoppropagation-vs-stopimmediatepropagation)

# c# - 如何确定我的 Windows 域中的计算机是否“活动”

> ID：11368844
> 
> 赞同：0
> 
> 时间：2012-07-06T19:54:31.617
> 
> 标签：c#, exception, networking, dns, ping

我正在尝试编写一种方法来确定我的域中的哪些计算机是“非活动的”。我能够让它工作的唯一方法是尝试使用以下方法获取计算机的 IP 地址：

`Dns.GetHostAddresses( computerName )`

如果计算机处于“非活动状态”，它会抛出一个`System.Net.Sockets.SocketException`，然后我可以捕获该计算机并将其添加到我的非活动计算机数据表中。这种方法的问题在于它非常缓慢。通过我的 500 台计算机的 Windows 域，大约 300 台计算机处于“非活动状态”，通过这种方法对它们进行排序需要将近 30 分钟。有没有人建议如何判断在我的 Windows 域中注册的计算机是否处于活动状态？

我也尝试通过 ping 我列表中的所有计算机来做到这一点，但是当尝试 ping 一台“非活动”计算机时`System.Net.NetworkInformation.PingException`，我必须以相同的方式捕获和处理它。这也给了我近 30 分钟的运行时间来完成这个过程。

这是我的代码。

```
public void findInactiveComputers( string customerName, string domain )
        {
            DirectoryEntry entry = new DirectoryEntry( domain );
            DirectorySearcher searcher = new DirectorySearcher( entry );
            searcher.Filter = ("(objectClass=computer)");
            searcher.SizeLimit = int.MaxValue;
            searcher.PageSize = int.MaxValue;

            // Removes the inactive computers from the DataTable that associated with the customer.
            if( _InactiveComputers.Rows.Count != 0 )
            {
                _InactiveComputers.AsEnumerable().Where( cust => cust["CustomerName"].ToString()
                    .Equals( customerName, StringComparison.InvariantCultureIgnoreCase ) )
                    .ToList().ForEach( comp => comp.Delete() );
            }

            foreach( SearchResult result in searcher.FindAll() )
            {
                if( result.GetDirectoryEntry().Name.StartsWith( "CN=" ) )
                {
                    string computerName = result.GetDirectoryEntry().Name.Remove( 0, "CN=".Length );

                    try
                    { 
                        Dns.GetHostAddresses( computerName );
                    }

                    catch( SocketException )
                    {
                        DataRow newRow = _InactiveComputers.NewRow();
                        newRow["ComputerName"] = computerName;
                        newRow["CustomerName"] = customerName;
                        _InactiveComputers.Rows.Add( newRow );
                    }
                }
            }

            Properties.Settings.Default.InvalidComputers = _InactiveComputers;
            Properties.Settings.Default.Save();
        } 
```

编辑：

我尝试使用多个线程来完成我的任务，但是等待时间仍然很长（我现在正在运行它，它仍然没有完成）。

这是我如何实现它，提高性能的建议？

```
List<string> inactiveComputerNames = new List<string>();

            foreach( SearchResult result in searcher.FindAll() )
            {
                new Thread( delegate()
                    {
                        if( result.GetDirectoryEntry().Name.StartsWith( "CN=" ) )
                        {
                            string computerName = result.GetDirectoryEntry().Name.Remove( 0, "CN=".Length );

                            try
                            {
                                Dns.GetHostAddresses( computerName );
                            }

                            catch( SocketException )
                            {
                                inactiveComputerNames.Add( computerName );
                            }
                        }
                    } ).Start();
            }

            foreach( string computerName in inactiveComputerNames )
            {
                DataRow newRow = _InactiveComputers.NewRow();
                newRow["ComputerName"] = computerName;
                newRow["CustomerName"] = customerName;
                _InactiveComputers.Rows.Add( newRow );
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T20:57:42.607

我有一个类似的要求，因为我想扫描网络中的 IP 地址以确定正在使用的地址。

我做了几个假设，首先，Ping 不会在大多数设备上被阻塞，其次我们只处理特定范围的地址 EG 192.168.xx

这不是最干净的代码，只是一个快速而肮脏的示例，但以下将作为控制台应用程序运行，并演示如何将线程与 Ping 结合使用的基本原则。

希望能帮助到你？

亲切的问候，韦恩

```
using System;
using System.Net;
using System.Net.NetworkInformation;
using System.Collections.Generic;
using System.Net.Sockets;
using System.Threading.Tasks;

namespace NetworkPing
{
    class Program
    {

        private static int _Timeout = 120;
        private static int nextLine = 0;

        public static void Main(string[] args)
        {
            Console.WriteLine("NetworkPing!");

            //check if any command line arguments have been supplied
            if (args.Length > 0)
            {
                //parse the the arguments
                foreach ( string arg in args)
                {
                    switch( arg[1].ToString() )
                    {
                        case "?":
                            {
                                //display help topic
                                DisplayHelp();
                            }
                        break;

                        case "t":
                            {
                                //change the timout
                                _Timeout = Int32.Parse( GetParameter(arg) );
                                Console.WriteLine("Ping timeout set to {0}ms", _Timeout);
                            }
                        break;
                    }    
                }
            }

            DateTime startTime = DateTime.Now;

            IPAddress[] Adresses2 = GetAllUnicastAddresses();
            foreach (IPAddress Adres in Adresses2)
            {
                Console.WriteLine("");
                Console.WriteLine("Local IP Address: {0}", Adres);
                Console.WriteLine("Scanning IP from {0}.1 to {0}.254, awaiting results...", NetworkAddress(Adres) );

                nextLine = Console.CursorTop;

                Task[] tasks = new Task[254];

                for (int i = 0; i != 254; i++)
                {
                    //calculate the IP address for the ping
                    string ipAddressToPing = NetworkAddress( Adres ) + "." + (i+1);
                    //ping the address and check the response
                    tasks[ i ] = Task.Factory.StartNew( () => PingAddress(ipAddressToPing) );
                }

                //Block until all tasks complete.
                Task.WaitAll(tasks);

            }

            TimeSpan ts = DateTime.Now - startTime;
            Console.WriteLine("");            
            Console.WriteLine("Scan complete in {0} seconds, Press any key to continue...", ts.Seconds);
            Console.ReadKey();
        }

        private static string GetParameter( string Argument )
        {
            return Argument.Substring( Argument.LastIndexOf(":") +1);
        }

        public static void DisplayHelp()
        {
            Console.WriteLine("Usage: PingNetwork [/?] or [-?] [-t:Timeout]");
            Console.WriteLine("");
            Console.WriteLine("  {0,-12} {1}","/?","Display these usage instructions");
            Console.WriteLine("  {0,-12} {1}","-?","Display these usage instructions");
            Console.WriteLine("  {0,-12} {1}","-t:timeout","Changes the default timout from 120ms");
            Console.WriteLine("");
        }

        public static IPAddress[] GetAllUnicastAddresses()
        {
            // This works on both Mono and .NET , but there is a difference: it also
            // includes the LocalLoopBack so we need to filter that one out
            List<IPAddress> Addresses = new List<IPAddress>();
            // Obtain a reference to all network interfaces in the machine
            NetworkInterface[] adapters = NetworkInterface.GetAllNetworkInterfaces();
            foreach (NetworkInterface adapter in adapters)
            {
                IPInterfaceProperties properties = adapter.GetIPProperties();
                foreach (IPAddressInformation uniCast in properties.UnicastAddresses)
                {
                    // Ignore loop-back, IPv6 and link-local
                    if (!IPAddress.IsLoopback(uniCast.Address) && uniCast.Address.AddressFamily!= AddressFamily.InterNetworkV6 && !uniCast.Address.ToString().StartsWith("169.254.") )
                        Addresses.Add(uniCast.Address);
                }

            }
            return Addresses.ToArray();
        }

        private static void PingAddress( string IPAddress )
        {
            Ping pingSender = new Ping ();
            PingOptions options = new PingOptions ();

            // Use the default Ttl value which is 128,
            // but change the fragmentation behavior.
            options.DontFragment = true;

            // Create a buffer of 32 bytes of data to be transmitted.
            string data = "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa";
            byte[] buffer = System.Text.Encoding.ASCII.GetBytes (data);

            PingReply reply = pingSender.Send(IPAddress, _Timeout, buffer, options);

            if (reply.Status == IPStatus.Success)
            {
                   //set the cursor to the next line
                Console.CursorTop = nextLine;
                //        
                Console.WriteLine( IPAddress + " :OK");
                //
                nextLine++;
            }
        }

        private static string NetworkAddress( IPAddress Address )
        {
            string ipAddress = Address.ToString();
            return ipAddress.Substring( 0, ipAddress.LastIndexOf(".") );
        }

        private static string LastOctet( IPAddress Address )
        {
            string ipAddress = Address.ToString();
            return ipAddress.Substring( ipAddress.LastIndexOf(".") );
        }

        private static int _cursorX;
        private static int _cursorY;

        private static void GetCursor()
        {
            _cursorX = Console.CursorLeft;
            _cursorY = Console.CursorTop;
        }

        private static void SetCursor()
        {
            Console.CursorLeft = _cursorX;
            Console.CursorTop = _cursorY;
        }

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T19:54:07.800

想通了这个问题......终于！我使用了一个`Parallel.ForEach`循环，它解决了我所有的问题。正如六个字母变量所建议的那样，我不得不在访问列表时使用锁定。工作得很好！

```
SearchResultCollection results = searcher.FindAll();

            List<string> inactiveComputerNames = new List<string>();

            object threadLock = new object();

            Parallel.ForEach( results.OfType<SearchResult>(), result =>
            {
                if( result.GetDirectoryEntry().Name.StartsWith( "CN=" ) )
                {
                    string computerName = result.GetDirectoryEntry().Name.Remove( 0, "CN=".Length );

                    try
                    {
                        Dns.GetHostAddresses( computerName );
                    }

                    catch( SocketException )
                    {
                        lock( threadLock )
                        {
                            inactiveComputerNames.Add( computerName );
                        }
                    }
                }
            }
            ); 
```

# android - 在 Eclipse 中使用包 com.android.phone.PhoneApp

> ID：11368848
> 
> 赞同：0
> 
> 时间：2012-07-06T19:54:58.417
> 
> 标签：android, eclipse

我想覆盖**com.android.phone.PhoneApp**包中的一个方法。[我已经使用“ http://devmaze.wordpress.com/2011/01/18/using-com-android-internal-part-1-introduction/](http://devmaze.wordpress.com/2011/01/18/using-com-android-internal-part-1-introduction/)
” 将我的eclipse配置为使用内部类。我应该如何处理这个？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T20:06:35.113

您链接到的那些说明在您的情况下完全没用。

您需要下载完整的 Android 开源项目（AOSP，[http://source.android.com](http://source.android.com)）并按照该站点上的说明构建完整的固件映像。然后，您将需要购买 AOSP 具有完整驱动程序的设备，或寻找其他方式为您的设备获取必要的驱动程序。然后，您需要在设备上安装该固件。XDA 小组可能有一些关于这个“固件修改”过程的说明，可以帮助你，尽管我手头没有任何链接。

# ruby-on-rails - 我正在尝试使用 GET 方法发送值，但 Rails 坚持调用 POST 方法

> ID：11368851
> 
> 赞同：0
> 
> 时间：2012-07-06T19:55:12.077
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms, post, get

我不明白为什么会这样。这是我的表格：

```
<%= form_tag controller: :static_pages, action: :index, method: :get do %>
  <%= text_field_tag :search_text %>
  <%= submit_tag "Search", id: :search_button %>
<% end %> 
```

但是，它不是`search_text`通过 URL 发送 valeu ，而是调用 post 方法并`method=get`在 URL 中发送。

```
http://localhost:3000/static_pages/index?method=get 
```

知道原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T19:59:25.010

它将 解释`method: :get`为表单应该去的路径的一部分，而不是作为`form_tag`自身的附加选项。包装`controller: :static_pages, action: :index`在哈希中并在方法调用中添加括号。然后它应该工作：

```
<%= form_tag( {controller: :static_pages, action: :index}, method: :get ) do %> 
```

# regex - 在bash中挤压不在引号中的空格

> ID：11368857
> 
> 赞同：1
> 
> 时间：2012-07-06T19:55:46.863
> 
> 标签：regex, bash, quotes

我试图找出一种方法来压缩 bash 中不在引号中的空格（双引号和单引号）。我会使用`tr -s`，但它不会削减它。我想在文本文件（foo.txt）中有以下行：

```
 "      not  squeezed      "     squeeze     this     part 
```

变成：

```
 "      not  squeezed      " squeeze this part 
```

当然，嵌套单引号、双引号、转义引号会变得更加复杂，所以我想知道是否已经为此编写了某种命令？

编辑：

如果我尝试：

```
 cat foo.txt | tr -s 
```

我会得到输出：

```
 " not squeezed " squeeze this part 
```

这会挤压引号内的空格 - 这是不可取的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T20:01:21.380

是的。它被称为`echo`... 如果您不需要打印双引号。如果你这样做，首先转义所有未转义的`"`和所有`\`.`\`

如果这不是一个选项，您只需要咳出一个小 bash 脚本，该脚本基本上会打印其所有参数，并由`"`先前的参数包围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T23:24:22.343

你想要的是上下文相关的，所以你必须自己解析它。

例如

```
cat foo.txt | (
st=0; lc=""; od -v -t o1  | cut -b 9- |
while read line
 do
  for t in $line
   do
    if [[ $st == 1 ]] ; then
     printf \\$t
    else
     if [[ "$t" != "040" ]] ; then
      printf \\$t
     else
      if [[ "$lc" != "040" ]] ; then
       printf \\$t
      fi
     fi
    fi
    if [[ "$t" == "042" ]] ; then
     st=$((1-$st))
    fi
    lc="$t"
   done
 done) 
```

# hadoop - Hadoop慢启动配置

> ID：11368862
> 
> 赞同：7
> 
> 时间：2012-07-06T19:56:25.163
> 
> 标签：hadoop

对于 Hadoop 作业，“mapred.reduce.slowstart.completed.maps”的理想值是多少？要遵循哪些规则来适当地设置它？

谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-06T21:37:12.783

这取决于您的工作、集群和利用率的许多特征：

1.  您的工作需要多少地图槽与最大地图容量：如果您的工作会产生 1000 个地图任务，但总共只有 10 个地图槽（说明一点的极端情况），那么尽早启动减速器可能会剥夺过度减少任务的执行。在这种情况下，我会将您的慢启动设置为一个较大的值（0.999 或 1.0）。如果您的映射器需要一段时间才能完成，这也是正确的 - 让其他人使用减速器

2.  如果您的集群负载相对较轻（reducer 插槽没有争用）并且您的映射器输出大量数据，那么慢启动的低值将有助于让您的工作更早完成（而其他映射任务执行，获取移动到减速器的地图输出数据）。

可能还有更多

# android - 为什么dismissDialog、removeDialog 或dialog.dismiss 在onDestroy 或onPause 中不起作用？

> ID：11368863
> 
> 赞同：0
> 
> 时间：2012-07-06T19:56:25.290
> 
> 标签：android, android-dialog, android-orientation

我一生都无法弄清楚如何在不使用 configChanges 来指定您要手动处理方向更改的情况下管理对话框。所以假设你有这个 AndroidManifest：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.testandroid"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />    
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>    
</manifest> 
```

拿这个 MainActivity.java：

```
package com.example.testandroid;

import android.app.Activity;
import android.app.AlertDialog;
import android.app.AlertDialog.Builder;
import android.app.Dialog;
import android.os.Bundle;
import android.util.Log;
import android.view.Menu;
import android.view.View;

public class MainActivity extends Activity {
    private final static String TAG = "MainActivity";
    Dialog mDialog = null;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Log.d(TAG, "onCreate");
        setContentView(R.layout.activity_main);
    }    
    public void doShowDialog(View b) {
        Log.d(TAG, "doShowDialog");
        showDialog(1);
    }

    private void tryDismiss() {
        Log.d(TAG, "tryDismiss");
        try {           
            dismissDialog(1);
            removeDialog(1);
            mDialog.dismiss();
        } catch(IllegalArgumentException ex) {
            Log.e(TAG, ex.getMessage());
        }
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    @Override
    protected void onPause() {
        tryDismiss();
        super.onPause();
        Log.d(TAG, "onPause");

    }
    @Override
    protected Dialog onCreateDialog(int dialog) {
        Builder b = new AlertDialog.Builder(this);
        b.setTitle("Hello").setMessage("Waiting..");
        mDialog =  b.create();
        return mDialog;

    }    
} 
```

和这个布局（main.xml）

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
 >
    <Button 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Open Dialog"
        android:onClick="doShowDialog"
        />

</LinearLayout> 
```

如果您从 onDestroy 或 onPause 调用似乎并不重要，对话框会在方向切换后重新显示。但为什么？我告诉它走开。如果调用 removeDialog/dismissDialog 在方向改变之前调用它什么也不做。我终其一生都无法弄清楚为什么会这样。我所知道的摆脱这种情况的唯一方法是自己处理方向变化，方法是使用

```
android:configChanges="keyboardHidden|orientation" 
```

我知道新的工作方式是使用我尚未升级到的 FragmentDialog 的东西，并且还没有准备好为此重写我的整个应用程序。这不起作用似乎很奇怪。

这只是我在我的应用程序中遇到的一个真实世界问题的一个示例，用户可以请求从远程服务器中提取一些数据（以更新微调器的数据），如果他们切换方向，加载对话框将永远不会消失除了使用 android:configChanges 选项处理方向更改之外，似乎没有解决此问题的方法。我可以做到，但对我来说不得不这样做似乎很荒谬。

-- 更新 -- 删除了关闭对话框的按钮，因为它不是必需的，而且由于对话框位于顶部，因此无论如何您都无法单击它。

要重现只需启动应用程序，单击打开对话框的按钮，然后旋转手机。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T10:20:17.457

您的对话框保存在 中`onSaveInstanceState`，因此您可以尝试在它启动之前将其关闭：

```
@Override
protected void onSaveInstanceState(Bundle state)
{
  tryDismiss();
  super.onSaveInstanceState(state);
} 
```

另外我不太明白你为什么要使用Activity的onCreateDialog来管理对话框。设计它的原因是自动处理方向变化。如果你想手动处理，为什么不直接使用对话框的功能呢？而不是使用`showDialog(id)`并`onCreateDialog(id)`直接启动它，它不会在旋转屏幕后重新出现。

```
 Builder b = new AlertDialog.Builder(this);
    b.setTitle("Hello").setMessage("Waiting..");
    Dialog mDialog =  b.create();
    mDialog.show(); // <----- 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T17:22:10.163

塞巴斯蒂安明白了，但我想多解释一下这种情况和我在对话中的发现，因为它可能会让人很困惑：

1.  正如塞巴斯蒂安所说， 如果您希望对话框在旋转之前消失，则必须从**onSaveInstanceState调用dismissDialog/removeDialog。**
2.  虽然您可以从 onCreate 创建一个对话框，但如果您在方向更改之前不关闭它，您将无法在活动重新启动时在 onCreate 方法中关闭它。您必须从**onPostCreate调用dismissDialog**
3.  在方向改变后调用dismissDialog 也不能在**onRestoreInstanceState中工作。**我在调用 super.onRestoreInstanceState 之前和之后都尝试过，但都没有工作（认为它会因为在 onSaveInstanceState 中发生消除）

比这更重要的是，我了解到如果您正在执行一些异步任务，例如 HTTP 调用，并且您有一个包含回调函数的内部类，该回调函数将在任务完成时运行，您需要知道该内部如果屏幕旋转，类方法将包含对外部 Activity 类的原始实例的引用。这对我来说一点也不明显，因为我实际上并没有使用 AsyncTask，因为许多其他人都遇到了问题（我使用的是异步 http 库）。

举一个类似于我真实代码的小例子：

```
 public class MyActivity extends Activity {
   private static MyActivity sThis;

   @Override
   public void onCreate(Bundle state) {
      super.onCreate(state);
      sThis = this;
      doAsyncWork();
   }

   @Override
   public void onDestroy() {
      super.onDestroy();
      sThis = null;
   }
   private void doAsyncWork() {
      showDialog(LOADING_DIALOG); 
      ExampleAsyncWorker.work(new AsyncWorkerCallback() {   
           @Override
           public void onWorkComplete() {
             dismissDialog(LOADING_DIALOG); //doesn't work if orientation change happened.
           }        
      });
   }
} 
```

上述代码通过 CategoryManager 连接到外部服务器，下载类别列表，完成后调用 onCategoriesObtained 和 onFetchComplete（为简洁起见，还删除了一些错误处理回调函数）。如果在 fetchCategories 调用和 onFetchComplete 之间发生方向变化，那么 onFetchComplete 中对dismissDialog 的调用将永远不会起作用。原因是这个内部类隐式引用了在方向改变之前创建的 Activity 类的原始实例。因此，当您调用dismissDialog 时，您是在原始实例而不是新实例上调用它，这将导致dismissDialog 失败并显示以下消息：“没有通过Activity#showDialog 显示ID 为1 的对话框”。我确实想出了解决这个问题的方法，但它有点破解：

在您的 Activity 类中，包含对**this**引用的静态引用并将其设置在 onCreate 中，并将其设置为 onDestroy，并使用内部类中的该引用，如下所示：

```
public class MyActivity extends Activity {
   private static MyActivity sThis;

   @Override
   public void onCreate(Bundle state) {
      super.onCreate(state);
      sThis = this;
      doAsyncWork();
   }

   @Override
   public void onDestroy() {
      super.onDestroy();
      sThis = null;
   }
   private void doAsyncWork() {
      showDialog(LOADING_DIALOG); 
      ExampleAsyncWorker.work(new AsyncWorkerCallback() {   
           @Override
           public void onWorkComplete() {
              sThis.dismissDialog(LOADING_DIALOG);
           }        
      });
   }
} 
```

请注意，我不确定这是一个很好的做法，但它对我有用。我知道在引用外部类的活动中内部类可能存在问题（泄漏上下文），因此可能有更好的方法来解决这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-08T09:59:56.233

AFAIK，这个泄露的窗口可以通过两种方式处理。

```
@Override
public void onDestroy(){
    super.onDestroy();
    if ( Dialog!=null && Dialog.isShowing() ){
        Dialog.dismiss();
    }
} 
```

或者

```
if(getActivity()!= null && !getActivity().isFinishing()){
            Dialog.show();
} 
```

这里 Dailog 是你的进度 /alert dailog

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-16T14:41:04.207

要在没有保存实例的情况下创建应用程序，您可以使用 super.onCreate(null);

# dojo - 如何让网格内的文本框小部件工作属性？

> ID：11368866
> 
> 赞同：0
> 
> 时间：2012-07-06T19:56:44.057
> 
> 标签：dojo, dojox.grid, dojox.grid.datagrid

我使用格式化程序在网格单元格中放置了一个文本框小部件。但是，我无法移动光标，也无法在文本框中选择文本。

例如 [http://jsfiddle.net/g33m9/69/](http://jsfiddle.net/g33m9/69/)

有谁知道如何解决这一问题？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T12:45:27.147

您需要将列设置为**“可编辑”**，以便 Grid 组件知道如何处理按键事件。所以修改布局是为了

### 从

```
var layout = [[
        {name: 'Column 1', field: 'col1'},
        {name: 'Column 2', field: 'col2', width:'200px', formatter: func}
    ]]; 
```

### 至

```
var layout = [[
        {name: 'Column 1', field: 'col1'},
        {name: 'Column 2', field: 'col2', width:'200px', formatter: func, editable: true}
    ]]; 
```

编辑状态通过双击激活。

现在，OP 希望它成为一个完全臃肿的小部件，以可编辑状态弹出。为了使它可以使用任意数量的行/列进行扩展，我将其限制为*编辑*状态，以便该值仅显示文本，但一旦双击它将弹出一个 FilteringSelect。dijit 小部件 ValidationTextBox 的原理相同。

当前（1.7.2）可能的单元格类型是：dojox.grid.cells.Bool dojox.grid.cells.ComboBox dojox.grid.cells.DateTextBox dojox.grid.cells.Select

抓住我的SEO：

# 自定义 dojox.grid cellType 小部件的示例 - 半编程

### 第一步 - 创建一些数据

```
var i = 0,
data = {
    identifier: 'id',
    items: [
      { id: i, value: 'val'+i++},
      { id: i, value: 'val'+i++},
      { id: i, value: 'val'+i++},
      { id: i, value: 'val'+i++}
    ]
},
// The item label which holds visible value and which holds the value to represent
searchAttr = 'value',
valueAttr = data.identifier,
// The store to use for select widget
store = new dojo.data.ItemFileReadStore({ data: data }),
// And the options, reassembling the valid options we will present in dropdown
// Used when cellType is dojox.grid.cells.Select to name the allowable options
options = [];
dojo.forEach(data.items, function(it) { options.push(it[searchAttr])}); 
```

### 棘手的部分 - 定义一个 cellType

让我们扩展现有的`dojox.grid.cells.Cell`，它有两个关键特性 - 编辑状态格式化程序和默认格式化程序。默认设置就可以了。最后但同样重要的是，我们将覆盖“_finish”函数，尽管允许 Cell 也处理它自己的定义。

```
var whenIdle = function( /*inContext, inMethod, args ...*/ ) {
    setTimeout(dojo.hitch.apply(dojo, arguments), 0);
};

var FilteringSelectCell = declare("dojox.grid.cells.FilteringSelect", [dojox.grid.cells.Cell], {
    options: null,
    values: null,

    _destroyOnRemove: true,
    constructor: function(inCell){
        this.values = this.values || this.options;
    },

    selectMarkupFactory: function(cellData, rowIndex) {
        var h = ['<select data-dojo-type="dijit.form.FilteringSelect" id="deleteme' + rowIndex + '" name="foo">'];
        for (var i = 0, o, v;
        ((o = this.options[i]) !== undefined) && ((v = this.values[i]) !== undefined); i++) {
            v = v.replace ? v.replace(/&/g, '&amp;').replace(/</g, '&lt;') : v;
            o = o.replace ? o.replace(/&/g, '&amp;').replace(/</g, '&lt;') : o;
            h.push("<option", (cellData == v ? ' selected' : ''), ' value="' + v + '"', ">", o, "</option>");
        }
        h.push('</select>');
        return h;
    },
    textMarkupFactory: function(cellData, rowIndex) {
        return ['<input class="dojoxGridInput" id="deleteme' + rowIndex + '" data-dojo-type="dijit.form.ValidationTextBox" type="text" value="' + cellData + '">']

    },
    // @override
    formatEditing: function(cellData, rowIndex) {

        this.needFormatNode(cellData, rowIndex);
        var h = (cellData == "W1")
            ? this.textMarkupFactory(cellData, rowIndex)
            : this.selectMarkupFactory(cellData, rowIndex);
        // a slight hack here, i had no time to figure out when the html would actually be inserted to the '<td>' so.. Use 'debugger' statement and track function to hook into
        whenIdle(function() {
            dojo.parser.parse(dojo.byId('deleteme' + rowIndex).parentNode);
            var w = dijit.byId('deleteme' + rowIndex);
            w.focus()

        });
        return h.join('');
    },
    // clean up avoiding multiple widget definitions 'hanging'
    _finish: function(inRowIndex) {
        this.inherited(arguments)
        dijit.byId('deleteme' + inRowIndex).destroy();
    },
    // needed to read the value properly, will work with either variant
    getValue: function(rowIndex) {
        var n = this.getEditNode(rowIndex);
        n = dijit.getEnclosingWidget(n);
        return n.get("value");
    }
}); 
```

### 最后一点，新的布局

```
var layout = [[
      { name: 'Column 1', field: 'col1' },
      { name: 'Column 2', field: 'col2', 
        cellType: FilteringSelectCell, options: options, editable: true
      }
]]; 
```

**在此处运行示例** [http://jsfiddle.net/dgbxw/1/](http://jsfiddle.net/dgbxw/1/)

# c++ - 表示使用 UML 在 C++ 模板类中定义的 typedef

> ID：11368867
> 
> 赞同：3
> 
> 时间：2012-07-06T19:56:47.583
> 
> 标签：c++, templates, uml, generic-programming

我有一个代表 UI 小部件的模板类。该课程被称为（令人惊讶地）`Widget`。该类定义`graphics_type`（通过`typedef`或类似）可以是 a `cairo_t`、 a `HDC`、 a`CDC*`或类似的东西。换句话说，`Widget`定义了一个`graphics_type`用于绘制东西的类型。

我如何表示`Widget`和`graphics_type`使用 UML 之间的关系？

额外的问题：这里有没有 C++ 程序员发现 UML 在这些情况下有用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-08T19:58:04.150

Sparx EA 通过泛化将 typedef 链接到别名类型。至少从源代码导入时会发生这种情况。如果构造型为 ，则 C++ 生成模板将覆盖 Class `<<typedef>>`。如果 typedef 使用模板，EA 会插入：

```
typedef templateName<alias> alias; 
```

否则，它会插入：

```
typedef aliasedClass alias; 
```

我去搜索是因为我想要：

```
typedef aliasedClass* class_ptr; 
```

而且我不知道如何在UML中表达指针部分。我希望找到一些表达构造的标准方式，但没有运气。

选项 1：创建一个仅作为指针生成器的模板：template class _ptr { /* TMTFWIW */ }

选项 2：在我的 PIM 到 C++ PSM 转换中使用标记来插入`*`.

我想我会选择#2。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T19:09:10.007

publib.boulder.ibm.com 有很多关于许多主题的文档，包括很多关于 UML 的文档。他们对许多特定于 C++ 的构造（包括 typedef 和其他构造）的规则几乎就像@David Rodriguez 所说的那样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-07T21:52:51.560

对于 UML 的有用性问题，每个人都有自己的答案。也许 UML 对非常大的项目有好处，但我在这里无话可说。在我的实践中，我发现基于 UML 图开发代码是无效的，因为 C++ 中的类声明信息量很大而且本身很清晰，特别是如果您在类主体之外定义方法时。制作其他图表需要相同的时间，但没有显示任何新内容。

关于类关系图的第二件事是，如果从现有代码自动构建它们，它们会非常好。例如，Doxygen 可以做到这一点。优点是您无需为 UML 花费额外的时间，并且可以轻松检查当前的实现。此外，在带有此类图表的打印纸上手动进行更改对于重构非常方便。

# sql-server - 选择 IF 到自定义变量

> ID：11368868
> 
> 赞同：0
> 
> 时间：2012-07-06T19:56:48.940
> 
> 标签：sql-server

我有这个：

```
SELECT 
        @is_daily_rollup = CASE WHEN rt.[id]=1 THEN 1 ELSE 0,
        @is_weekly_rollup = CASE WHEN rt.[id]=2 THEN 1 ELSE 0 
```

但是 sql server 抱怨语法。我将如何将这个条件值实现到变量中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T19:58:09.483

对于`CASE`声明，您需要提供`END`

```
CASE WHEN rt.[id]=1 THEN 1 ELSE 0 END
CASE WHEN rt.[id]=2 THEN 1 ELSE 0 END 
```

所以你的完整查询将是：

```
SELECT @is_daily_rollup = CASE WHEN rt.[id]=1 THEN 1 ELSE 0 END,
       @is_weekly_rollup = CASE WHEN rt.[id]=2 THEN 1 ELSE 0 END 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-06T19:58:15.170

你错过了`END`你的`CASE`：

```
SELECT 
        @is_daily_rollup = CASE WHEN rt.[id]=1 THEN 1 ELSE 0 END,
        @is_weekly_rollup = CASE WHEN rt.[id]=2 THEN 1 ELSE 0 END 
```

当然，这是假设您已经声明了变量。

# javascript - 从数组中提取子数组的内存最安全方法

> ID：11368869
> 
> 赞同：2
> 
> 时间：2012-07-06T19:57:01.903
> 
> 标签：javascript, arrays, memory-management, multidimensional-array, garbage-collection

我正在遍历数组数组，取出我需要的子数组并丢弃其余的子数组。

```
var newArray = [];
for (var i = 0; i < oldArray.length; i++) {
    if (oldArray[i][property] == value) {
        newArray.push(oldArray[i]);
    }
}
oldArray = newArray; 
```

1.  这是对内存最友好的方式吗？

2.  垃圾收集会安全地处理我没有推送到 newArray 上的子数组吗？

3.  newArray 是否会以某种方式分散在内存中，从而阻止此方法有效扩展？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T20:01:55.373

javascript 原型性质使一切都成为对象。所有对象都是映射，字面意思是哈希映射。这意味着，正如您所说，当您将对象从一个数组“拉”到另一个数组时，您只是在复制它们的引用。

所以是的，我会说它不会给你带来太多的内存问题，如果你放弃引用（至少在现代浏览器中）。但是垃圾收集器以不同的方式实现，具体取决于您使用的浏览器。

1 - 这是对内存最友好的方式吗？

如果您删除引用，是的，这是一种记忆友好的方式。你在 c/c++ 中没有任何`free`类似的东西，为了在 chrome 上进行测试，我认为你可以调用`window.gc()`垃圾收集器。我认为`delete`存在或存在，但我不知道它是如何工作的。

2- 垃圾收集会安全地处理我没有附加到 newArray 的子数组吗？

如果没有任何其他引用指向它们。是的。循环内存泄漏在旧浏览器中很常见，但对于新浏览器，可以肯定地说是。

3 - newArray 是否会分散在内存中以防止此方法有效扩展？

是的，它会分散在内存中，因为在 javascript 数组中的工作方式类似于 hashmap 或链接的 hashmap（如果我在这里弄错了，请有人纠正我），但垃圾收集器会处理它，因为它用于处理地图。同样，您只使用对象将保留在同一位置的引用，并且您只会将引用存储在数组中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T20:10:04.573

1.no... fmsf 基本上是正确的，但是您可以进行一些微优化以改善页面加载时间，以及检查条件的时间。如果您将 oldArray.length 留在循环中，它将在 oldArray 对象上查找每次迭代的长度，这可能会在大循环中增加一些时间，如果包含此方法，一次实​​例化所有变量也可以节省一些时间inside 被调用了很多次。
当有人下载​​您的脚本时，最好让所有变量的名称尽可能短，以便从服务器到客户端的数据传输最少。

```
var nA = [],
    i = 0,
    t = oA.length,
    s;
for (; i < t; i++) {
    s = oA[i];
    if (s[p] == v) {
        nA.push(s[i]);
    }
}
oA = nA; 
```

如果你想认真一点，你会使用代码压缩器来重命名变量和删除空格。

2.是的，JavaScript 在这些方面做得很好，您唯一需要注意的是 IE 闭包，这不会是由您的代码引起的。我仍然发现在极少数情况下关闭在 IE9 中很常见，但这些通常是由链接到 DOM 引起的，这在这种情况下是无关紧要的。

3.不，这段代码唯一改变的是对对象的引用，而不是它们在内存中的存储方式。

# mysql - MySQL - 我们可以按列位置而不是名称排序吗？

> ID：11368871
> 
> 赞同：5
> 
> 时间：2012-07-06T19:57:11.717
> 
> 标签：mysql, sql, database

我在谷歌上看过，但找不到。我们可以使用字段的位置在 MySQL 中订购吗？

假设我有字段`ID | FirstName | LastName | Age`，但我想按字段 4 订购，我可以`ORDER BY FieldPos4`在 Age 上订购吗？我还没有设法找到关于那个的东西。

谢谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-06T19:58:55.960

您可以按位置（从 1 开始）引用列：

```
ORDER BY 4 
```

从[**文档**](http://dev.mysql.com/doc/refman/5.0/en/select.html#id756773)（强调我的）：

> **可以使用列名、列别名或列位置**在 ORDER BY 和 GROUP BY 子句中引用为输出选择的列。**列位置是整数，以 1 开头**

# mysql - 每个班级的 ClassSchedule 表中的最新日期

> ID：11368874
> 
> 赞同：0
> 
> 时间：2012-07-06T19:57:28.257
> 
> 标签：mysql, cakephp

数据库查询有问题？这是场景这是一个TeacherClass表（父表）（id） ![在此处输入图像描述](../Images/8ac5a381c229f0c3b27ed1bbafb8a60a.png) 这是一个ClassSchedule表（子表）（teacher_class_id是外键） ![在此处输入图像描述](../Images/78d89b28a6b0e1bff02eb2cd6d83a653.png)

我想从 ClassSchedule Table 中找出每个班级的最新日期，并按 class_schdule_date（最新日期）排序。（如果您用 cackphp 查询语法编写查询，对我来说会更好。）请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T20:09:30.687

这需要一个简单的连接：

```
select tc.id, max(schedule_date) as max_schedule_date
from TeacherClass tc
left join ClassSchedule cs on cs.teacher_class_id = tc.id
group by tc.id 
```

您可以根据需要从 TeacherClass 表中选择其他列 - 只需将它们也添加到 group by 子句中。

请注意，`left join`如果课程*没有*预定日期，您仍然会得到该课程的一行（但最大预定日期将为空）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T20:03:39.297

使用此解决方案：

```
SELECT 
    c.*, b.*
FROM
    (
        SELECT teacher_class_id, MAX(schedule_date) AS maxdate
        FROM classschedule
        GROUP BY teacher_class_id
    ) a
INNER JOIN
    classschedule b ON 
        a.teacher_class_id = b.teacher_class_id AND
        a.maxdate = b.schedule_date
INNER JOIN
    teacherclass c ON
        b.teacher_class_id = c.teacher_class_id 
```

# jquery - undefined: $undefined 成功返回结果后在cshtml页面中显示

> ID：11368889
> 
> 赞同：0
> 
> 时间：2012-07-06T19:58:37.177
> 
> 标签：jquery, .net, asp.net-mvc-4

我有一个简单的页面，它使用 ID 从数据库返回的产品列表中查找特定产品，然后在 html 页面中显示该产品。当我使用 /api/products/12345 时，我能够看到我希望看到的 JSON，但是当我尝试从 Index.cshtml 页面查询数据时，我得到了结果 --> undefined: $undefined in my page。我将通过 Product 类和我的 html 页面。请注意，所有产品的显示都完美呈现。

```
public class Product
{
    public int ID { get; set; }
    public string ProductDescription { get; set; }
    public string UnitOfMeasure { get; set; }
    public decimal MSRP { get; set; }
    public string Category { get; set; }
    public int CategoryID { get; set; }
    public string ZipCode { get; set; }
} 
```

这是我的 Index.cshtml 页面

```
<html lang="en">
<head>
<title>.:: Web API ::.</title>
<script src="../../Scripts/jquery-1.6.2.min.js" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function () {
        // Send an AJAX request - the second parameter is a callback function that is invoked when the request successfully completes.
        $.getJSON("api/products/",
        function (data) {
            // On success, 'data' contains a list of products.
            $.each(data, function (key, val) {

                // Format the text to display.
                var str = val.ProductDescription + ': $' + val.MSRP;

                // Add a list item for the product.
                $('<li/>', { html: str }).appendTo($('#products'));
            });
        });
    });

    function find() {
        var id = $('#prodId').val();
        // Again, we call the jQuery getJSON function to send the AJAX request, but this time we use the ID to construct the request URI.
        $.getJSON("api/products/" + id,
            function (data) {
                // On success, 'data' contains a list of products.
                $.each(data, function (key, val) {

                    // Format the text to display.
                    var str = val.ProductDescription + ': $' + val.MSRP;
                    $('#products').html(str);
                });
            })
        .fail(
            function (jqXHR, textStatus, err) {
                $('#products').html('Error: ' + err);
            });
        }     
</script>
</head>
<body>
<div>
    <h1>All Products</h1>
    <ul id='products' />
</div>
<div>
    <label for="prodId">ID:</label>
    <input type="text" id="prodId" size="5"/>
    <input type="button" value="Search" onclick="find();" />
    <p id="product" />
</div> 
```

我遇到的问题是 find() 函数渲染到 UI 有意义的数据，我看到匹配 ID 12345 的数据已成功返回。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T16:05:17.720

没有看到代码，很难确定，但我猜测控制器操作的代码`api/products`返回一个 JSON 格式的对象数组 - 可能是这样的：`[{ID: 5, MSRP: 20.10},{ID: 6, MSRP: 10.10}]`. 因此，使用`$.each(data, function() {...})`遍历项目列表是有意义的。

但是，我猜它会以 JSON 形式`api/products/5`返回*单个*对象 - 像这样：`{ID: 5, MSRP: 20.10}`. 没有包装数组，`$.each(data, function() {...})`就不会做你想做的事。在 find() 中为你的回调函数试试这个：

```
function (data) {
    // On success, 'data' contains a *single* product.
   var str = data.ProductDescription + ': $' + data.MSRP;
   $('#products').html(str);
}) 
```

如果这不起作用，您能否显示由返回的`api/products`数据与由返回的数据的片段`api/products/5`？

# build - Gradle - 任务“sonarAnalyze”执行失败 - java.lang.ClassCastException：java.util.ArrayList 无法转换为 java.lang.String

> ID：11368891
> 
> 赞同：2
> 
> 时间：2012-07-06T19:58:41.810
> 
> 标签：build, gradle, sonarqube

使用我的 gradle 构建脚本运行声纳时出现此错误。

gradle 声纳分析

```
15:41:02.931 [ERROR] [org.gradle.BuildExceptionReporter] FAILURE: Build failed with an   exception.
15:41:02.931 [ERROR] [org.gradle.BuildExceptionReporter]
15:41:02.931 [ERROR] [org.gradle.BuildExceptionReporter] * What went wrong:
15:41:02.931 [ERROR] [org.gradle.BuildExceptionReporter] Execution failed for task  ':sonarAnalyze'.
15:41:02.934 [ERROR] [org.gradle.BuildExceptionReporter] > java.util.ArrayList cannot be cast to java.lang.String

 My sonar 

sonar {
        server { 
        url = "http://server.com:9000"
        }
        database {

            url="jdbc:mysql://server:3306/sonar?useUnicode=true&characterEncoding=utf8"
            driverClassName="com.mysql.jdbc.Driver"
            username="sonar"
            password="sonar"
                }
                project {
                    coberturaReportPath=file("$buildDir/reports/cobertura/coverage.xml")
                    language = "java"
                }

            } 
```

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-06T17:38:27.850

你运行的是什么版本的声纳？我在运行 Sonar 4.1.1 时遇到了这个问题，因为我使用的是与您相同的[Gradle Sonar 插件](http://www.gradle.org/docs/current/userguide/sonar_plugin.html)。我切换到[Gradle Sonar Runner 插件](http://www.gradle.org/docs/current/userguide/sonar_runner_plugin.html)，问题得到解决。

# r - R中的矩阵元素除法

> ID：11368894
> 
> 赞同：1
> 
> 时间：2012-07-06T19:59:05.710
> 
> 标签：r

我有一个矩阵：

```
    关闭 close.1 关闭.2
1 38.050 22.320 23.115
2 37.650 22.150 23.055
3 37.295 22.090 23.090

```

我想将每一行的“close”除以“close.1”，将“close”除以“close.2”，最后将“close.1”除以“close.2”。

我知道我可以编写一个可怕的寻找循环来解决这个问题，但我真的很感激知道在 R 中是否有一种简单的方法可以做到这一点？

任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T20:05:03.167

你实际上有一个数据框。它本质上是一个矩阵，你是对的，但是你可以通过使用列的名称来访问这些列。

可以通过如下命令访问数据框的每一列：

```
Matrix$close 
```

如果我正确理解了您的问题，这应该为您提供所需的数据框。

```
New_DataFrame <- data.frame(close = Matrix$close / (Matrix$close.1 * Matrix$close.2), close.1 = Matrix$close.1 / Matrix$close.2) 
```

这些操作都是针对每一行完成的。

如果您希望以矩阵而不是数据框的形式给出答案，请使用以下命令：

```
New_Matrix <- data.matrix(New_DataFrame) 
```

从矩阵切换回数据帧非常简单：

```
New_DataFrame <- data.frame(New_Matrix) 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T20:04:57.130

如果`mat`是您的矩阵，则为您`mat[,1]/mat[,2]`提供每行的元素划分。如果`mat`实际上是 data.frame 而不是矩阵，那么上面的方法和`mat$close/mat$close.1`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T20:21:45.717

```
> combn(1:3, 2)
     [,1] [,2] [,3]
[1,]    1    1    2
[2,]    2    3    3
> apply(combn(1:3, 2), 2, function(x) mat[, x[1]]/mat[,x[2]] ) 
```

# c# - 实体框架运行时连接字符串

> ID：11368897
> 
> 赞同：12
> 
> 时间：2012-07-06T19:59:10.277
> 
> 标签：c#, asp.net-mvc-3, entity-framework

我想在运行时为我的数据库提供连接字符串。我正在使用实体框架。这是我到目前为止所拥有的

```
class MyClassDBContext:DbContext
{
  public MyClassDBContext(string str) : base(str)
  {
    this.Database.Connection.ConnectionString = str;
  }
} 
```

要使用上面的代码，我试过了

```
//create connection string
EntityConnectionStringBuilder myConn = new EntityConnectionStringBuilder();
myConn.Provider = "System.Data.SqlClient";
myConn.ProviderConnectionString = "user id=xxxx;password=xxxx;server=localhost;database=xxxx;connection timeout=30";

//inject the connection string at runtime
MyClassDBContext a = new MyClassDBContext(myConn.ToString()) 
```

上面的代码给了我一个错误，说“不支持提供者关键字”。为了尝试调试此错误，我尝试了以下

```
 MyClassDBContext a = new MyClassDBContext("metadata=res://*/Model.csdl|res://*/Model.ssdl|res://*/Model.msl;provider=System.Data.SqlClient;provider connection string=user id=xxxx;password=xxxx;server=localhost;database=xxxx;connection timeout=30") 
```

现在，我收到一条错误消息，提示“不支持元数据关键字”。所以我将代码更改为

```
MyClassDBContext a = new MyClassDBContext("provider=System.Data.SqlClient;provider connection string=user id=xxxx;password=xxxx;server=localhost;database=xxxx;connection timeout=30") 
```

现在我收到一条错误消息，提示“不支持提供者关键字”。所以我再次将我的代码更改为

```
 MyClassDBContext a = new MyClassDBContext("user id=xxxx;password=xxxx;server=localhost;database=xxxx;connection timeout=30") 
```

现在它可以工作了！我的问题是：如何在运行时指定提供程序和元数据？看起来只有连接字符串被接受。我正在使用 Nuget 的 Entity 4.3.1。

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-06T21:07:53.837

基于 edmx 文件的 EF 需要“提供者”和“元数据”内容。基于代码优先的 EF 不需要这个，只需要常规连接字符串。如果您愿意，可以使用`SqlConnectionStringBuilder`( 而不是`EntityConnectionStringBuilder`) 来构建这个正常的连接字符串。但正如您所见，您只需要指定实际的连接详细信息。EF 4.3.1 的 DbContext 代码优先范例中不需要提供程序和元数据。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-05-21T20:28:36.750

基于[HatSoft 的回答](https://stackoverflow.com/a/11369087/35133)：

```
var entityConnectionStringBuilder= new EntityConnectionStringBuilder();
entityConnectionStringBuilder.Provider = "System.Data.SqlClient";
entityConnectionStringBuilder.ProviderConnectionString = <your SQL Server connection string>;
entityConnectionStringBuilder.Metadata = "res://*";

MyClassDBContext a = new MyClassDBContext(entityConnectionStringBuilder.ToString()); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-06T20:15:06.957

EntityConnectionStringBuilder 类可用于在运行时指定提供程序和元数据

> 例如
> 
> var entityConnectionStringBuilder= new EntityConnectionStringBuilder(); entityConnectionStringBuilder.Provider = "System.Data.SqlClient"; entityConnectionStringBuilder.Metadata = "res:// */Example.csdl|res://* /Example.ssdl|res://*/Example.msl";

请参阅元数据中有关[CSDL、SSDL 和 MSDL的更多信息](http://msdn.microsoft.com/en-us/library/bb399604.aspx)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-05T22:27:03.090

我跟着这个[链接](http://blogs.msdn.com/b/adonet/archive/2011/01/27/using-dbcontext-in-ef-feature-ctp5-part-2-connections-and-models.aspx)

还有这个

如何在没有 app.conf 文件的情况下使用 EF Code-First？

基本上我所做的几乎和你一样，用字符串创建一个构造函数并调用基数。

但我也在这个构造函数中设置了提供者。

这是一个例子

```
public Context(string ConnectionString) : base(ConnectionString) { 
    Database.DefaultConnectionFactory = new SqlCeConnectionFactory("Oracle.DataAccess.Client"); 
} 
```

这样您就可以指定提供者。而且您不会收到提供者关键字错误，因为您不需要在连接字符串中指定

我是这样称呼它的。

```
var dbCont = new ClassLibrary1.Models.Context("DATA SOURCE=xxx;PASSWORD=xxx;USER ID=xxx"); 
```

希望能帮助我花了很长时间才找到它

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-08-24T11:28:59.497

这是老问题，但也许对某人有用

```
 var provider = (DbProviderFactory)System.Data.Entity.DbConfiguration
            .DependencyResolver
            .GetService(typeof(DbProviderFactory), "invariant provider name");

        var conn = provider.CreateConnection();
        //conn.ConnectionString = "sample connection string";

        DbInterception.Dispatch.Connection.SetConnectionString(conn, new DbConnectionPropertyInterceptionContext<string>()
            .WithValue("sample connection string"));

return new SampleDbContext(conn,true); 
```

# jquery - 单击单选按钮图像应更改

> ID：11368905
> 
> 赞同：-4
> 
> 时间：2012-07-06T20:00:01.710
> 
> 标签：jquery, html, phpmyadmin

我有 3 个单选按钮，单击第一个按钮时，它应该调用一个图像。单击第二个按钮时，第一个图像应该消失，单击 3 第二个应该消失。我想用jquery来做。请帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T20:20:13.423

[你可以在这个演示](http://jsfiddle.net/Eagjz/13/)中看到代码示例

这是示例代码。**但是**我同意每个人的观点，您应该发布一些示例代码来表明您正在做一些思考！

```
div{
height:50px;
    width:50px;
}
.yellow{
background-color:yellow
}
.green{
background-color:green;
}
.blue{
background-color:blue;
}
.red{
background-color:red;
}
​
<ul>
    <li><input type='radio' id='1' name='change'><label>red</label></li>
    <li><input type='radio' id='2' name='change'><label>blue</label></li>
    <li><input type='radio' id='3' name='change'><label>green</label></li>

</ul>

<div id='show' class='yellow'></div>

$(document).ready(function(){
    $('ul>li>input').change(function(index){
        console.log($(this));
        var id = $(this).attr('id');
        console.log(id);
        var cssClass = 'yellow';
        switch(id)
        {
            case '1':
                cssClass = 'red';
                break;
            case '2':
                cssClass = 'blue';
                break;
            case '3':
                cssClass = 'green';
                break;
        }
        console.log(cssClass);
        $('#show').removeClass().addClass(cssClass);
    });
});​ 
```

# hadoop - Hadoop块大小和文件大小问题？

> ID：11368907
> 
> 赞同：7
> 
> 时间：2012-07-06T20:00:06.277
> 
> 标签：hadoop, hdfs

这似乎是一个愚蠢的问题，但在 Hadoop 中假设块大小为 X（通常为 64 或 128 MB），本地文件大小为 Y（其中 Y 小于 X）。现在，当我将文件 Y 复制到 HDFS 时，它会消耗一个块还是hadoop会创建更小的块？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-06T20:24:25.627

Hadoop 消耗一个块。这并不意味着存储容量将以相同的方式消耗。

从 Web 浏览 HDFS 时的输出如下所示：

```
filename1   file    48.11 KB    3   128 MB  2012-04-24 18:36    
filename2   file    533.24 KB   3   128 MB  2012-04-24 18:36    
filename3   file    303.65 KB   3   128 MB  2012-04-24 18:37 
```

您会看到每个文件的大小都小于 128 MB 的块大小。这些文件以 KB 为单位。HDFS 容量根据实际文件大小消耗，但每个文件消耗一个块。

可用的块数量有限，具体取决于 HDFS 的容量。您正在浪费块，因为在使用所有实际存储容量之前您将用完它们。请记住，Unix filsystem 也有块大小的概念，但它是一个非常小的数字，大约 512 字节。这个概念在 HDFS 中是相反的，其中块大小保持在 64-128 MB 左右。

另一个问题是，当您运行 map/reduce 程序时，它会尝试为每个块生成映射器，因此在这种情况下，当您处理三个小文件时，最终可能会生成三个映射器来处理它们。当文件较小时，这会浪费资源。您还增加了延迟，因为每个映射器都需要时间来生成，然后最终会在一个非常小的文件上工作。您必须将它们压缩成更接近块大小的文件，以利用映射器处理较少数量的文件。

大量小文件的另一个问题是它加载了 namenode，它将每个块的映射（元数据）和块映射保存在主内存中。使用较小的文件，您可以更快地填充此表，并且随着元数据的增长将需要更多的主内存。

阅读以下内容以供参考：

1.  [http://www.cloudera.com/blog/2009/02/the-small-files-problem/](http://www.cloudera.com/blog/2009/02/the-small-files-problem/)
2.  [http://www.ibm.com/developerworks/web/library/wa-introhdfs/](http://www.ibm.com/developerworks/web/library/wa-introhdfs/)
3.  哦！有一个关于 SO 的讨论：[小文件和 HDFS 块](https://stackoverflow.com/questions/8562934/small-files-and-hdfs-blocks)

# php - 下载 PDF 并重命名？

> ID：11368908
> 
> 赞同：-6
> 
> 时间：2012-07-06T20:00:06.673
> 
> 标签：php

我正在编写一个小脚本以节省一些时间。我的脚本将给定的 URL 用于 PDF，我想将 PDF 下载到本地计算机，例如 /Downloads，但我想用从表单中获取的名称重命名文件。

这可以用PHP吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T20:06:10.247

使用它重命名：

```
rename(oldname,newname) 
```

[http://php.net/manual/en/function.rename.php](http://php.net/manual/en/function.rename.php)

使用它来强制下载 pdf 文件：

```
<?php
header('Content-type: application/pdf');
header('Content-disposition: attachment; filename=filename.pdf');
readfile("http://manuals.info.apple.com/en/iphone_user_guide.pdf");
?> 
```

# android - 如何在android运行时更改按钮上的背景图像

> ID：11368910
> 
> 赞同：0
> 
> 时间：2012-07-06T20:00:13.913
> 
> 标签：android, image, dynamic, background

嗨，我是一个新的 android 开发人员，当我在运行时使用 R.drawable.image1 单击按钮时，我尝试更改背景图像，然后我单击按钮显示另一个图像，如何更改图像名称，但图像名称声明为字符串数组,如何改变图像 ,使用

setBackgroundResource(R.drawable.images)

请任何人帮助我并解决我的问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T20:15:20.717

```
Integer[] imageIDs = {
            R.drawable.pic1,
            R.drawable.pic2,
            R.drawable.pic3,
            R.drawable.pic4,
            R.drawable.pic5,
            R.drawable.pic6,
            R.drawable.pic7                    
    }; 
```

并打电话`imageView.setImageResource(imageIDs[position]);`

# wpf - 在 wpf 中显示 Windows 窗体

> ID：11368916
> 
> 赞同：1
> 
> 时间：2012-07-06T20:00:59.140
> 
> 标签：wpf, winforms, touch

我正在为我的工作场所（主要用于会议和演示）开发一些多点触控 Surface 计算机，并且对 WPF 并不完全熟悉，我想知道是否可以将一些 Windows 窗体放入 Surface 项目中，以便几个用户表面上可以同时使用程序。

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T11:57:19.177

我不明白您为什么要将 Windows 窗体包含到 WPF 项目中，但如果这就是您想要做的，请查看[此](http://msdn.microsoft.com/en-us/library/system.windows.forms.integration.windowsformshost%28v=vs.90%29.aspx). WindowsFormsHost 类用于管理 WPF 中的 WinForms 事物。

如果它解决了您的问题，请将我的回复标记为答案。

谢谢，

# objective-c - 在 Objective-C 中解析嵌套的 JSON 对象

> ID：11368921
> 
> 赞同：2
> 
> 时间：2012-07-06T20:01:32.497
> 
> 标签：objective-c, ios, xcode, json, nsmutablearray

也许我是在想太多或让自己感到困惑，但我的脑袋被困在这个循环中，我无法摆脱。

我有一个 JSON 格式：（在[http://jsonformatter.curiousconcept.com/](http://jsonformatter.curiousconcept.com/)验证）

```
{
  id: 1,
  sections: "5",
  total: "10",
  result: {
    3: 00PM: [
      {
        name: "Anurag",
        status: "Web"
      },
      {
        name: "Anurag2",
        status: "Web2"
      }
    ],
    5: 00PM: [
      {
        name: "Anurag",
        status: "Seated"
      }
    ],
    6: 00PM: [
      {
        name: "Anurag4",
        status: "Web4"
      },
      {
        name: "Anurag5",
        status: "Web5"
      },
      {
        name: "Anurag6",
        status: "Web6"
      },
      {
        name: "Anurag7",
        status: "Web7"
      }
    ]
  }
} 
```

到目前为止我有这个：

```
 NSDictionary *dict = [response JSONValue];
        NSDictionary *results = [dict objectForKey:@"result"];

        NSInteger num_results = [[dict valueForKey:@"total"] intValue];
        NSInteger num_sections = [[dict valueForKey:@"sections"] intValue];

        NSMutableArray *sections = [[NSMutableArray alloc] initWithCapacity:num_sections];
        NSMutableArray *objarr = [[NSMutableArray alloc] initWithCapacity:num_results];
        NSMutableArray *obj= [[NSMutableArray alloc] initWithCapacity:num_sections];
        NSMutableArray *temp = [[NSMutableArray alloc] initWithCapacity:num_results];

        for (NSString* key in results) {
            NSLog(@"Key: %@", key); // prints out 3:00 PM...5:00 PM etc...
            [obj addObject:[results objectForKey:key]]; // nested objects within each key are saved in the array
            NSLog(@"Object 1: %@", obj);
        }

        for (int i = 0; i < [obj count]; i++) {
            //NSLog(@"Object 2: %@", [obj objectAtIndex:i]);
            [temp addObject:[obj objectAtIndex:i]]; // I take each object from previous array and save it in a temp array
            for (int i = 0; i < num_results; i++) {
                NSLog(@"Object 3: %@", [temp objectAtIndex:i]);
                **[objarr addObject:[temp objectAtIndex:i]]; // I want to extract the object within the object but cannot get it to work**
            }   
        } 
```

我能够在结果中的 3 个键中的每一个中创建一个对象数组。但是我无法将其中的每个对象作为单独的对象获取并将它们保存在数组中。

例如，在 NSArray 我有：

```
Object 3: (
        {
        name = "Anurag ";
        status = Web;
    },
        {
        name = "Anurag ";
        status = Web;
    }
) 
```

如何获取此对象中的两个对象并将它们都保存在数组中？我想主要问题是我无法引用键名来获取单个对象。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T20:12:45.350

您可以使用以下代码，

```
NSDictionary *json = [response JSONValue];

// Get the objects you want
NSArray *items = [json valueForKeyPath:@"result.6: 00PM"]; 
```

这将返回**6: 00PM**`NSArray`键的对象

 **请也检查此[链接](https://stackoverflow.com/questions/3165290/how-to-parsing-json-object-in-iphone-sdk-xcode-using-json-framework)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T20:15:57.607

您在第二个*for*循环中重新定义*int i 。*尝试类似的东西

 *```
for(int j = 0; j < num_results; j++) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T20:55:54.013

```
[temp addObject:[obj objectAtIndex:i]]; // I take each object from previous array and save it in a temp array 
```

这是无用的动作。您实际上只是将数组复制`obj`到`temp`数组中 - 没有添加任何值。***

# ruby - 使用 apigee 配置 twitter gem 版本 3

> ID：11368924
> 
> 赞同：0
> 
> 时间：2012-07-06T20:01:39.137
> 
> 标签：ruby, twitter, twitter-gem, faraday-oauth

我通过设置将 twitter gem 版本 2 与 apigee 结合使用：

Twitter.gateway = 'myapp-myapigee.apiggeee.com'

在版本 3 中，删除了通过网关配置对 API 网关的支持。如更新版本中所指出的，任何与实现自定义法拉第中间件有关的指针都值得赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T03:46:19.163

我[删除了](https://github.com/sferik/twitter/commit/7e501a99fe15ba9be69d2b791fc1d99c1904542b)版本 3 中允许自定义网关配置的代码，因为它未经测试。如果您查看我删除的代码，它所做的只是`host`在发送请求之前立即将 URL 的一部分设置为网关。如果此中间件在版本 2 中为您工作，您应该能够将其复制到您的应用程序中：

```
require 'faraday'

class ApigeeGatewayMiddleware < Faraday::Middleware

  def call(env)
    url = env[:url].dup
    url.host = 'myapp-myapigee.apiggeee.com'
    env[:url] = url
    @app.call(env)
  end

end 
```

然后运行：

```
Twitter.middleware.insert_after Faraday::Request::UrlEncoded, ApigeeGatewayMiddleware 
```

所有后续请求都应通过网关。

如果您提交了包含测试的拉取请求，我会考虑将网关配置添加回库中，但我不愿意在代码库中包含未经测试的代码。

# objective-c - 删除项目后从分段表视图更新 NSMutableArray

> ID：11368925
> 
> 赞同：0
> 
> 时间：2012-07-06T20:01:43.580
> 
> 标签：objective-c, ios5, uitableview

我有一个按字母顺序划分的表格视图。我有一个这是我的原始数据源，它是从 plist`NSMutableArray *drinks`中填充的。`NSMutableDictionary's`在我的`viewDidLoad`方法中。然后，我遍历我的数组并在我的`viewWillAppear`方法中创建部分的键和每个部分中的行数

```
- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
    self.sections = [[NSMutableDictionary alloc] init];
    BOOL found;

    // Loop through the whiskys and create our keys
    for (NSMutableDictionary *whisky in self.drinks)
    {
        NSString *c = [[whisky objectForKey:NAME_KEY] substringToIndex:1];

        found = NO;

        for (NSString *str in [self.sections allKeys])
        {
            if ([str isEqualToString:c])
            {
                found = YES;
            }
        }

        if (!found)
        {
            [self.sections setValue:[[NSMutableArray alloc] init] forKey:c];
        }
    }
    // Loop again and sort the whiskys into their respective keys
    for (NSDictionary *whisky in self.drinks)
    {
        [[self.sections objectForKey:[[whisky objectForKey:NAME_KEY] substringToIndex:1]] addObject:whisky];
    }
    // Sort each section array
    for (NSString *key in [self.sections allKeys])
    {
        [[self.sections objectForKey:key] sortUsingDescriptors:[NSArray arrayWithObject:[NSSortDescriptor sortDescriptorWithKey:NAME_KEY ascending:YES]]];
    }
        [self.tableView reloadData];
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view

    NSArray *searchPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [searchPaths lastObject];
    NSString *writeableDBPath = [documentsDirectory stringByAppendingPathComponent:@"ScotchList.plist"];

    NSMutableArray *tmpArray = [[NSMutableArray alloc]initWithContentsOfFile:writeableDBPath];

    self.drinks = tmpArray;

    [[NSNotificationCenter defaultCenter] addObserver:self 
                                             selector:@selector(applicationDidEnterBackground:) 
                                                 name:UIApplicationDidEnterBackgroundNotification
                                               object:nil];

    //Register for application exiting information so we can save data
    [[NSNotificationCenter defaultCenter]addObserver:self selector:@selector(applicationWillTerminate:) name:UIApplicationWillTerminateNotification object:nil];

} 
```

所有这些工作都很好而且花花公子。然后，当我删除一行时，它也可以正常工作。但是，当我转到新视图并返回 tableview 时，已删除的行会重新出现。所以我需要更新我的原始数据源（饮料），因为每次 viewAppears 它都会再次从原始数据源中提取。所以我试图在行中获取项目（威士忌）并将其从数组中删除。但它会抛出一个 sigabrt。这是我的删除行方法。

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (editingStyle == UITableViewCellEditingStyleDelete) {
        //DELETE THE ROW FROM THE DATA SOURCE
        [self.tableView beginUpdates];

        [[self.sections valueForKey:[[[self.sections allKeys] sortedArrayUsingSelector:@selector(localizedCaseInsensitiveCompare:)] objectAtIndex:indexPath.section]] removeObjectAtIndex:indexPath.row];

        NSDictionary *whisky = [[self.sections valueForKey:[[[self.sections allKeys] sortedArrayUsingSelector:@selector(localizedCaseInsensitiveCompare:)] objectAtIndex:indexPath.section]] objectAtIndex:indexPath.row];
        [self.drinks removeObject:whisky];

        if ([[self.sections valueForKey:[[[self.sections allKeys] sortedArrayUsingSelector:@selector(localizedCaseInsensitiveCompare:)] objectAtIndex:indexPath.section]] count] > 0)
        {
            // Section is not yet empty, so delete only the current row.
            [tableView deleteRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationFade];

        }
        else
        {
            // Section is now completely empty, so delete the entire section.
            [self.sections removeObjectForKey:[[[self.sections allKeys] sortedArrayUsingSelector:@selector(localizedCaseInsensitiveCompare:)] objectAtIndex:indexPath.section]];
            [tableView deleteSections:[NSIndexSet indexSetWithIndex:indexPath.section]
                     withRowAnimation:UITableViewRowAnimationFade];
        }

        [self.tableView endUpdates];
    } else if (editingStyle == UITableViewCellEditingStyleInsert) {
        // Create a new instance of the appropriate class, insert it into the array, and add a new row to the table view.
    }
} 
```

这是日志显示的内容：

```
2012-07-06 15:36:42.454 WhiskyBook[3275:907] *** Terminating app due to uncaught exception 'NSRangeException', reason: '*** -[__NSArrayI objectAtIndex:]: index 1 beyond bounds [0 .. 0]'

*** First throw call stack:

(0x3998a17b 0x3494395b 0x398d83bd 0x3e6b5 0x32a0cd11 0x328f0d09 0x328f0cbb 0x328f0c95 0x328f09eb 0x328f1369 0x328ef791 0x328dd72d 0x328dd009 0x339a7603 0x339a7233 0x3995a873 0x3995a817 0x39959611 0x398d6be5 0x398d6a71 0x339a634b 0x329037f5 0x3ac09 0x33cc7b20)

libc++abi.dylib: terminate called throwing an exception

(lldb) 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T21:21:23.173

我找到了解决我的问题的方法。我没有尝试从 commitEditingStyle 方法中的原始数据源中删除对象，而是为我的 master-viewController 分配了一个 NSDictionary 属性，并在我的 viewDidLoad 中对其进行了初始化，然后为其分配了我想要在其中删除的项目commitEditingStyle 方法。然后在我的 viewWillDisappear 方法中，我将它从原始数据源中删除。

# c# - 对同一域/实体模型的两次引用

> ID：11368927
> 
> 赞同：1
> 
> 时间：2012-07-06T20:01:50.933
> 
> 标签：c#, .net, sql-server, asp.net-mvc, entity-framework

**问题**

我想保存用户编辑模型时已更改的模型属性。这就是我想做的...

1.  检索已编辑的视图模型
2.  获取域模型并映射回更新的值
3.  调用存储库上的更新方法
4.  获取“旧”域模型并比较字段的值
5.  将更改的值（以 JSON 格式）存储到表中

但是我在第 4 步时遇到了问题。似乎实体框架不想再次访问数据库来获取具有旧值的模型。它只是返回与我相同的实体。

**尝试的解决方案**

我曾尝试使用`Find()`和`SingleOrDefault()`方法，但它们只返回我目前拥有的模型。

**示例代码**

```
private string ArchiveChanges(T updatedEntity)
{
    //Here is the problem!
    //oldEntity is the same as updatedEntity
    T oldEntity = DbSet.SingleOrDefault(x => x.ID == updatedEntity.ID);

    Dictionary<string, object> changed = new Dictionary<string, object>();

    foreach (var propertyInfo in typeof(T).GetProperties())
    {
        var property = typeof(T).GetProperty(propertyInfo.Name);

        //Get the old value and the new value from the models
        var newValue = property.GetValue(updatedEntity, null);
        var oldValue = property.GetValue(oldEntity, null);

        //Check to see if the values are equal
        if (!object.Equals(newValue, oldValue))
        {
            //Values have changed ... log it
            changed.Add(propertyInfo.Name, newValue);
        }
    }

    var ser = new System.Web.Script.Serialization.JavaScriptSerializer();
    return ser.Serialize(changed);
}

public override void Update(T entityToUpdate)
{
    //Do something with this
    string json = ArchiveChanges(entityToUpdate);

    entityToUpdate.AuditInfo.Updated = DateTime.Now;
    entityToUpdate.AuditInfo.UpdatedBy = Thread.CurrentPrincipal.Identity.Name;

    base.Update(entityToUpdate);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T20:41:49.617

问题是实体框架缓存它在 DbSet 中读取的对象。因此，当您第二次请求该对象时，它不会进入数据库，因为它已经加载了它。

但是，好消息是 Entity 会自动跟踪原始值。有关如何获取它们的信息，请参阅此问题：[如何在实体框架中获取实体的原始值？](https://stackoverflow.com/questions/8133974/how-to-get-original-values-of-an-entity-in-entity-framework)

# google-maps - 谷歌地图航点未显示

> ID：11368931
> 
> 赞同：1
> 
> 时间：2012-07-06T20:02:12.787
> 
> 标签：google-maps, google-maps-api-3

我是 Google Maps API 的新手，到目前为止我遇到了很多问题。

我正在尝试从由一组复选框确定的纬度坐标映射航点。

这是我的完整js文件：

```
var directionDisplay;
var directionsService = new google.maps.DirectionsService();
var map;

var waypts = [];
var start = new google.maps.LatLng(41.850033, -87.6500523);
var end = new google.maps.LatLng(40.850033, -87.6500523);

function initialize() 
{
    directionsDisplay = new google.maps.DirectionsRenderer();
    var myOptions = {
        zoom: 6,
        mapTypeId: google.maps.MapTypeId.ROADMAP,
        center: new google.maps.LatLng(41.850033, -87.6500523)
    }

    map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
    directionsDisplay.setMap(map);

}

function calcRoute()
{
    var checkboxArray = document.getElementsByName("waypoints[]");

    for (var i = 0; i < checkboxArray.length; i++) 
    {
        if (checkboxArray[i].checked) 
        {
            var lat = parseFloat(checkboxArray[i].attributes["lat"].value);
            var lng = parseFloat(checkboxArray[i].attributes["lng"].value);

            waypts.push({
                location: new google.maps.LatLng(lat, lng),
                stopover: true
            });
        }
    }
}

var request = {
    origin: start, 
    destination: end,
    waypoints: waypts,
    optimizeWaypoints: true,
    travelMode: google.maps.DirectionsTravelMode.DRIVING
};

directionsService.route(request, function(response, status) {
    console.log("mapping...");

    if(status == google.maps.DirectionsStatus.NOT_FOUND)
    {
        console.log("Could not one or more of locations");
    }
}); 
```

当页面加载时，地图显示并在控制台中弹出“映射...”。当我按下 calcRoute 提交按钮时，没有任何反应。我已经记录了 lat/long 和 waypt 对象，所以我知道他们已经到了那个点，但似乎永远不会重新计算路线等。

我真的只需要一个基本的演示，但我发现的唯一一个是我几乎所有东西都用过但我没有得到任何结果： [Google Example Directions Waypoints](https://google-developers.appspot.com/maps/documentation/javascript/examples/directions-waypoints)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T21:56:25.250

目前，您的脚本永远不会显示任何路线，因为您错过了调用方向显示.setDirections() 来打印路线。

您还应该将方向服务.route() 的调用放入 calcRoute 函数中。

固定代码：

```
<script type="text/javascript">
var directionDisplay;
var directionsService = new google.maps.DirectionsService();
var map;

var start = new google.maps.LatLng(41.850033, -87.6500523);
var end = new google.maps.LatLng(40.850033, -87.6500523);

function initialize() 
{
    directionsDisplay = new google.maps.DirectionsRenderer();
    var myOptions = {
        zoom: 12,
        mapTypeId: google.maps.MapTypeId.ROADMAP,
        center: new google.maps.LatLng(41.850033, -87.6500523)
    }

    map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
    directionsDisplay.setMap(map);

}

function calcRoute()
{
    var checkboxArray = document.getElementsByName("waypoints[]");
    var waypoints=[];

    for (var i = 0; i < checkboxArray.length; i++) 
    {
        if (checkboxArray[i].checked) 
        {
            var lat = parseFloat(checkboxArray[i].attributes["lat"].value);
            var lng = parseFloat(checkboxArray[i].attributes["lng"].value);

            waypts.push({
                location: new google.maps.LatLng(lat, lng),
                stopover: true
            });
        }
    }

var request = {
    origin: start, 
    destination: end,
    waypoints: waypts,
    optimizeWaypoints: true,
    travelMode: google.maps.DirectionsTravelMode.DRIVING
};

directionsService.route(request, function(response, status) {
    if(status == google.maps.DirectionsStatus.OK)
    {
        //print the route
        directionsDisplay.setDirections(response);
    }
    else
    {
      console.log('something went wrong',status);
    }

});
}
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T21:45:30.853

关于您的 Javascript 如何与页面 HTML 相关的信息并不多。但是这条线

```
var checkboxArray = document.getElementsByName("waypoints[]"); 
```

应该是

```
var checkboxArray = document.getElementsByName("waypoints"); 
```

假设您所有的复选框都有名称`waypoints`。

引号内的内容应与复选框元素的名称完全匹配，因此，如果每个复选框都有名称`waypoint`（因为每个复选框都标记一个路点，这是可能的），那么您应该使用`.getElementsByName("waypoint")`查找具有该名称的所有元素。

# android - 找不到我的项目的 R.class

> ID：11368932
> 
> 赞同：0
> 
> 时间：2012-07-06T20:02:34.803
> 
> 标签：android

我的 res/ 目录中没有错误，但是，我的所有 java 文件都找不到我的 R.java 的编译版本，因为它无法编译。

我在看什么？？![在此处输入图像描述](../Images/03f600e39ebefd83a94daac7a8661683.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T20:24:35.620

*   不要导入任何`R`文件。检查您的导入语句以确保您不包括`android.R`or`com.google.maps.R`或`whatever.whatever.whatever.R`。
*   检查您是否有任何错误，尤其是您的布局文件。有时，Eclipse 的错误检查器会遗漏一些 XML 错误，这些错误会妨碍您的自动生成。
*   确保您选择了正确的构建路径。在 Package Explorer 中右键单击您的项目，转到`Properties -> Android -> Project Build Target`. 检查您想要的构建目标。
*   确保一切都是最新的（Eclipse、Android SDK、工具等）
*   如果一切都失败了，只需重新启动 Eclipse。如果这不起作用，请重新启动计算机。您会惊讶于简单的重新启动会多久解决您的问题。

# javascript - ajax隐藏和显示

> ID：11368933
> 
> 赞同：-1
> 
> 时间：2012-07-06T20:02:39.427
> 
> 标签：javascript, jquery

我有这个 html 代码

```
<div id="a1"><input type="text" id="ac1" /></div>
<div id="a2" style="display:none"><input type="text" id="ac2" /></div>
<div id="a3" style="display:none"><input type="text" id="ac3" /></div>
<div id="a4" style="display:none"><input type="text" id="ac4" /></div>
<div id="a5" style="display:none"><input type="text" id="ac5" /></div>
<div id="a6" style="display:none"><input type="text" id="ac6" /></div><span id="close" style="display:none">X</span>
<div><input type="button" id="add" value="add" /></div> 
```

这段代码由 javascript

```
var i = 2;
$(document).ready(function(){
    $("#add").click(function(){
    if(i <= 6){
        $("#a"+i).show(500);
        ++i;
        if (i == 7){ $(this).hide(500); }
        if (i >= 2){ $("#close").show(500); }
    }
    });

    $("#close").click(function(){
        --i;
        $("#a"+i).hide(500);
        $("#ac"+i).val("");
        if (i == 2){ $(this).hide(500); }
        if (i == 6){ $("#add").show(500); }
    });
}); 
```

我需要单击添加按钮时，我需要隐藏最后一个并在其上方添加新按钮

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T20:16:35.257

我认为你可以简单地颠倒你的 html 输入的顺序

```
<div id="a6" style="display:none"><input type="text" id="ac6" />
<div id="a5" style="display:none"><input type="text" id="ac5" /></div>

a4
a3
a2
a1 
```

# c++ - C ++ for_each循环找不到指向地图元素

> ID：11368936
> 
> 赞同：0
> 
> 时间：2012-07-06T20:02:56.223
> 
> 标签：c++, stl, map, exc-bad-access, huffman-code

我正在构建一个霍夫曼编码程序，当我尝试运行到目前为止的代码时，它只会给我一个警告，即频率映射对象 .begin() 不存在。

哈夫.h

```
#ifndef HuffPuff_Huff_h
#define HuffPuff_Huff_h
//---Include---
#include <iostream>
#include <vector>
#include <set>
using namespace std;

//---Node---
struct Node {
    int weight;
    char litteral;
    string symbol;
    Node* childL;
    Node* childR;
    void set_node(int w, char l, Node* L, Node* R){
        weight = w;
        litteral = l;
        childL = L;
        childR = R;
    }
    bool operator>(Node & r){
        if(this->weight > r.weight)
            return true;
        return false;
    }
};

//---Code---
struct Code {
    string symbol;
    char content;
};

//---HuffClass---
class Huff {
private:
    typedef pair<char, int> c_pair;
    vector<Code> code;
    string content;
    void copy_to(c_pair c);
public:
    Huff(string);
    ~Huff();

    string compress();
    bool set_content();
    string get_content();
    string get_compress();
};

#endif 
```

哈夫.cpp

```
//---Include---
#include <iostream>
#include <vector>
#include "Huff.h"
#include <map>
#include <set>
using namespace std;

//---|+ -|---
Huff::Huff(string c): content(c){}
Huff::~Huff(){}

//---Compress---
struct CopyTo {
    vector<Node*>* & nodes;
    CopyTo(vector<Node*>* & c):nodes(c){}
    void operator()(pair<char, int> c){
        Node * n = new Node;
        n->set_node(c.second, c.first, NULL, NULL);
        nodes->push_back(n);
    }
};
void show_freq(pair<char, int>  p) {
    cout << p.first << "\t" << p.second << endl;
}
/*void show_freq(Node*  p) {
    cout << p->litteral << "\t" << p->weight << endl;
}*/

string Huff::compress(){   
    vector<Node *>* nodes; // Vector of nodes for later use
    map<char, int>* freq = new map<char, int>; //  Map to find weight of nodes
    for(int i = 0; i < content.length(); i++) 
        (*freq)[content[i]]++; 
    for_each(freq->begin(), freq->end(), show_freq);
    CopyTo copyto(nodes); //Copy map elements to nodes in this and next one
    for_each(freq->begin(), freq->end(), copyto);
    delete freq;
    Node p;
    while(nodes->size() != 1){ //Sorts nodes by weight and then removes two of them and replaces them with one
        sort(nodes->begin(), nodes->end());
        vector<Node *>::iterator beg = nodes->begin();
        int w= (**beg).weight + (**beg++).weight;
        Node* p = new Node;
        p->set_node(w, '*', *nodes->begin(), *(nodes->begin()++));
        nodes->erase(nodes->begin(), nodes->begin()+2);
        nodes->push_back(p);
        //for_each(nodes->begin(), nodes->end(), show_freq);
        cout << "--------------" << endl;
    }
    Node* root = *nodes->begin();
    return "110";
}

Main.cpp

int main(){
Huff mike("Testing-");
mike.compress();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T20:46:54.740

算法头包含在哪里？

[在线编译](http://liveworkspace.org/code/ae8c5b880bd3e5a331179bbcd276ca25) 结果

> 编译输出：
> source.cpp：在成员函数'std::string Huff::compress()'中：
> source.cpp:76:39：警告：有符号和无符号整数表达式之间的比较[-Wsign-compare] source.cpp： 94:11：警告：未使用的变量 'root' [-Wunused-variable]
> 执行输出：
> - 1
> T 1
> e 1
> g 1
> i 1
> n 1
> s 1
> t 1

# android - Android 恢复原始状态

> ID：11368937
> 
> 赞同：0
> 
> 时间：2012-07-06T20:02:58.530
> 
> 标签：android, fullscreen

这可能是一个菜鸟问题。实际上，我正在尝试`Activity`使用单击来切换 Windows。单击一下，我`Activity`会进入全屏状态，下次单击时，它应该回到非全屏状态。

如果全屏使用，我制作了：

```
this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

但现在我无法返回到 NonFullScreen 状态。我该怎么做？提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T20:08:26.020

要启用全屏：

```
this.getWindow().addFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

要返回非全屏：

```
this.getWindow().clearFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

# c++ - 将 const 引用转换为 const 指针到 const

> ID：11368940
> 
> 赞同：2
> 
> 时间：2012-07-06T20:03:20.390
> 
> 标签：c++, stl, constants

我正在建立一个 STL 列表。我制作了一个装饰器类 ( `MyList`)，它是一个特殊类 ( `ProtectMe`) 的列表。我希望列表中的所有项目都是 const。所以这就是我所做的：

```
#include <list>

using namespace std;

class ProtectMe{
private:
    int data_;
public:
    ProtectMe(int data):data_(data){
    }

    int data() const{return data_;}
};

class MyList{
private:
    //A list of constant pointers to constant ProtectMes.
    list<const ProtectMe* const> guts_;
public:
    void add(const ProtectMe& data){
        guts_.push_front(&data);
    }
}; 
```

我收到以下编译错误：

```
错误：'const _Tp* __gnu_cxx::new_allocator::address(const _Tp&) const [with _Tp = const ProtectMe* const]' 不能重载

```

我仍在挠头试图解码我出错的地方。为什么这段代码不能编译？我应该改变什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T20:14:44.627

标准容器的`value_type`必须是`CopyInsertable`（或`MoveInsertable`）才能`push_front`工作。的值类型`list<const ProtectMe* const>`是常量，所以不是`CopyInsertable`.

†`CopyInsertable`表示

```
allocator_traits<A>::construct(m, p, v); 
```

定义明确 where `p`is a pointer to `value_type`，默认情况下调用placement new on p，因此要求它是一个非常量指针。

# php - Codeigniter 2 型号

> ID：11368941
> 
> 赞同：2
> 
> 时间：2012-07-06T20:03:23.220
> 
> 标签：php, api, codeigniter, model

我必须从不同的 Web 服务 + 我自己的数据库中获取数据，并在显示在网站上之前组合这些数据。

这样做的最佳方法是什么？我更喜欢为 Web 服务和数据库编写单独的模型。如何在不同的文件夹中组织不同数据源的模型类？

稍后我可能会添加更多网络服务。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T20:45:39.900

编辑：我真的很抱歉，因为我下面的例子不起作用，因为你不能有同名的模型。您还应该在子目录中为它们添加前缀，例如：

1.  webservice1/ws1_products
2.  webservice2/ws2_products
3.  分贝/分贝产品
4.  产品

这样你就可以将它们加载为

```
$this->load->model('webservice1/ws1_products');
$this->load->model('webservice2/ws2_products');
$this->load->model('db/db_products');
$this->load->model('products'); 
```

并用作

```
$x = $this->ws1_products->getAll();
$x = $this->ws2_products->getAll();
$x = $this->db_products->getAll();
$x = $this->products->getAll();  // combined result 
```

编辑结束。

要将它们分隔在不同的文件夹中，只需将它们放在`models`目录中的子文件夹中，然后使用通用语法`$this->load->model('web_service1/products');`。

我不知道最好的方法，因为这是一个偏好问题，但如果我是你，我会按照你所说的将它们分成两种不同的模型并制作第三种，这会将它们组合成一个结果。因此，如果您必须从 2 个不同的服务和您的数据库中获取产品，我会制作 4 个模型：

1.  网络服务1/产品
2.  webservice2/产品
3.  分贝/产品
4.  products // 将它们组合成一个结果的模型

这样，您只需从控制器向`products`模型发出一个请求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T20:25:37.617

我通常为每个数据源做一个模型文件。无论是数据库表、Web 服务等。

为了在渲染之前组合来自 2 个或更多模型的数据，如果涉及业务逻辑，我喜欢在控制器中进行。如果不是，我会在模型中正确执行（您现在可以在 CI2 中从另一个模型加载一个模型）

# c++ - 避免同时写入 NFS 共享文本文件

> ID：11368942
> 
> 赞同：1
> 
> 时间：2012-07-06T20:03:24.047
> 
> 标签：c++, locking, nfs, inotify, stat

我正在用 C++ 编写一个模块，它将在一组机器上运行，所有这些机器都有一个安装了 nfs 的文件存储。

我有一个通过 NFS 与所有机器共享的配置文件；并且所有人都可以读/写该文件。如何确保不会因同时访问而导致数据损坏？

我知道 NFS 有自己的锁定协议，但我认为它不可靠 -[并发 nfs 访问](https://superuser.com/questions/33525/concurrent-nfs-access)。我还看到 iNotify 在安装 nfs 的驱动器上表现不佳 - [inotifiy 示例](http://www.thegeekstuff.com/2010/04/inotify-c-program-example/)。我不确定 [stat](http://linux.die.net/man/2/stat)是否有助于在写入/读取之前检查文件是否正在被访问。

如何在 C++ 中实现简单的锁定机制以避免同时访问？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T20:45:06.347

当您将内容 A、B 和 C 同时写入通过 NFS 共享的文件时，最终内容将是 ABC 或任何可能的 ABC 组合，如 BAC、CAB 等。文件将始终保持一致，它将永远不要部分写A，然后写B。因此写一个接一个。请注意，仅当内容大小在 NFS 块大小范围内时才会如此。

如果您的写入超出块大小，则需要使用 NLM，这需要在 NFS 服务器和客户端上运行锁定守护程序。

# ios - 在 iPhone 上调试 MFI 应用程序

> ID：11368943
> 
> 赞同：3
> 
> 时间：2012-07-06T20:03:38.463
> 
> 标签：ios, debugging, mfi

我是一名 MFi 开发人员，我正在开发一个与定制硬件对话的 iPhone 应用程序。我的问题是如何调试 iPhone 应用程序

我已经搜索了网络和stackoverflow，但似乎没有明确的方向。

1\. 30 Pin dock - 由于iPhone是docked到accessory - Xcode如何调试App

2\. 有一些 Xcode 在 WiFi 上调试的线程，但是这个功能在 Xcode 中有但后来被删除了 - 在最新的 Xcode 中这个状态是什么（大约 2012 年）

任何指示，尤其是来自成功完成此操作的人的指示，我们将不胜感激。

佩德罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-10T14:57:22.453

无线调试是[Xcode 4.2](https://stackoverflow.com/questions/7266391/what-does-the-xcode-4-2-preference-support-wirelessly-connected-devices-do)中的一项功能，但在以后的版本中已被删除，并且在 Xcode 5.0 中仍然不可用。
不幸的是，看起来你最好的选择是不得不依赖日志。

# php - 使用 cron 系统地更新数据库

> ID：11368945
> 
> 赞同：-3
> 
> 时间：2012-07-06T20:03:41.787
> 
> 标签：php, mysql, unix, crontab

我正在开发类似于梦幻足球应用程序的软件。

我有用户帐户，其中每个帐户的信息都存储在 mysql 的关系数据库中。我有一个 php 脚本，我想在所有游戏完成后运行它来一次更新每个成员的统计信息（可能有成千上万的用户）。

经过研究，似乎最好的解决方案是使用 Unix 设置一个 cron 选项卡。
我想知道这是否是正确的解决方案？

如果我将此 crontab 设置为每周二运行，它会运行更新用户信息的 PHP 脚本吗？

使用 Unix 为一个简单的网站设置 cron 选项卡是否容易？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T20:17:49.820

设置 crons 非常简单。如果您有 shell 访问权限，只需键入 #crontab -e 即可进入 cron 设置。查看此链接：[Crontab - 快速参考](http://www.adminschoice.com/crontab-quick-reference)。
您只需创建一个 PHP 脚本并通过 cron 选项卡链接它。如果您使用 cPanel 运行服务器，那么也有一个内置的 cron 管理器，如果您更喜欢在 GUI 中执行它。

您没有提供足够的信息让我对此发表任何结论性意见，但您希望平衡脚本，以便 1) 足够频繁地运行，以便它必须更新足够小的更改——例如，如果 100 条记录是每小时更改一次，每天运行脚本意味着它必须更新 2400 条记录，而如果您每周运行一次，它必须更新 16800 条记录，这可能非常严重以至于它会增加您的服务器负载。和/或 2) 将您的更新分成几块。例如，如果记录每周只更改一次，但当时有 16800 条记录更改，那么您可能希望让脚本运行 1000 次更新并使其休眠一段时间，再运行一些，休眠等（这是一个坏习惯，但我想这是最简单的），或者你经常运行你的 cron 脚本，每次更新 1000 次，

如果您希望我起草一些更详细的示例来说明两种不同的方法，请告诉我。

# django - django 确认密码验证器

> ID：11368947
> 
> 赞同：11
> 
> 时间：2012-07-06T20:03:53.297
> 
> 标签：django, validation

我有一个配置文件设置页面，用户可以在其中更改他们的密码，如果他们这样做，他们必须确认。我不能将此作为必填字段，因为他们不必更改密码。如果密码字段不为空，是否有验证确认密码的示例？然后检查它们是否相等？我找不到任何这样的例子......

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-06T20:24:12.597

将以下内容添加到表单的`clean`方法中：

```
def clean(self):
    password1 = self.cleaned_data.get('password1')
    password2 = self.cleaned_data.get('password2')

    if password1 and password1 != password2:
        raise forms.ValidationError("Passwords don't match")

    return self.cleaned_data 
```

**编辑**

上面的验证错误消息将进入`non_field_errors`. 您没有指定每个密码字段上显示的错误消息，但根据上下文，我想这是“此字段是必需的”消息。如果是这种情况，请确保您的表单字段`required=False`在定义它们时具有，或者如果您正在使用表单子类（并且无法编辑实际的表单字段），您可以覆盖`__init__`表单的方法：

```
class MyForm(SomeOtherForm):
    def __init__(self, *args, **kwargs):
        super(MyForm, self).__init__(*args, **kwargs)

        self.fields['password1'].required = False
        self.fields['password2'].required = False 
```

# javascript - 三元语句是否比 javascript 中的 if/then/else 语句更快？

> ID：11368948
> 
> 赞同：8
> 
> 时间：2012-07-06T20:04:06.917
> 
> 标签：javascript, performance, ternary-operator

我看到很多：

```
var something = (is_something_true()) ? 3 : 4; 
```

在 JavaScript 中。这比

```
var something;
if (is_something_true()) {
    something = 3;
} else {
    something = 4;
} 
```

还是为了方便而写的简洁？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T20:10:37.623

请享受这一点——如果差异在统计上是有效的，那么结果（真或假）也很重要——显然这只是机器上其他对浏览器性能有影响的东西：

[链接在这里](http://jsperf.com/test-vs-exp "链接在这里")

![不同的结果！](../Images/dcf564dafb32dcc1a8813ae1935b596c.png)

两者之间有一个根本的区别，三元语句是表达式而不是控制流。如果有人将其编写为三元表达式而不是标准 if / than / else，那么当两者的工作方式相同时，它们（在我看来）会使代码在没有充分理由的情况下更难阅读。

在速度方面应该没有区别。除非您使用的是非常糟糕的 javascript 实现。两个语句中最慢的部分是分支。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-06T20:13:50.857

你应该先写可读性，然后再写一百五十秒的微小优化。在许多情况下，第一种形式更容易阅读，并且在性能方面可能没有太大差异。

（即使您不同意并认为第二种形式更易于阅读，询问相对性能差异仍然是错误的问题。）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-06T20:17:42.027

这是[统计数据](http://jsperf.com/ternaryoperatorspeed)：![在此处输入图像描述](../Images/7275156757d0d293088f1a1d3f8ff8b4.png)

经过多次测试和观察，可以得出结论，大多数情况下三元运算符（`?:`）比 慢`if/else`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-10-24T18:13:18.863

是的，两者之间的差异可以忽略不计。

但是差异是如此之小，以至于您使用哪一个都没有关系（我更喜欢 if/else），因为它们有助于提高可读性，如果有人正在查看您的代码，或者您自己可能正在阅读您的代码，这将为您节省大量时间说3个月左右。

对于那些想要检查差异的人，请尝试以下代码：

```
// declarations  
var num1 = 10, num2, i = 0, startTime, endTime, x, y;

// start timer
startTime = Math.floor((new Date()).getTime());

for(; i < 1e8; i++) {
  // first part if /else
  if(x == 10)
    y = x;
  else
    y = 0;

  // second part ternary
  y = (x == 10) ? x : 0;
}

// end timer     
endTime = Math.floor((new Date()).getTime() - startTime);
document.write("Time taken " + endTime + " ms"); 
```

**注意：**注释其中一个部分并执行代码并运行循环以进行大量迭代（以上代码数百万次迭代）。

**提示：**尝试多次运行循环以获得平均值。

# c - 如何在 chroot 监狱中执行 shell 命令

> ID：11368952
> 
> 赞同：1
> 
> 时间：2012-07-06T20:04:25.397
> 
> 标签：c, linux, shell, exec, chroot

我在 chroot 监狱中执行 shell 命令时遇到问题。这是一个例子：

```
#include <stdio.h>
#include <unistd.h>
#include <errno.h>
#include <string.h>
#include <sys/types.h>

int main()
{
   if (geteuid() == 0)    // check root privileges
   {
      chroot("/bin");
      chdir("/");

      execl("/ls", "ls", "-l",  (char *) NULL); // "/ls" should be equivalent to "/bin/ls"
      perror(strerror(errno));
   }

   else
      printf("Permission denied\n");

   return 0;
} 
```

问题是exec：根据errno，错误是“没有这样的文件或目录”。如果我使用 exec("/bin/ls", ...)

我认为“ls”不能使用他需要的共享库，因为 chroot jail。

有什么建议可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T20:29:36.740

关于共享库无法访问，您可能是对的。设置 chroot 监狱通常涉及将 、 、 和 的部分复制`/bin`到`/usr/bin`并行`/lib`目录`/usr/lib`结构中。

一个更简单的替代方法是仅使用静态链接的可执行文件。在许多 linux 系统上会有一个静态链接的可执行文件`busybox`，它提供许多 Unix 命令的基本功能，包括`ls`. 像调用它一样调用它可以`busybox ls -l`提供与常规程序类似的输出，`ls`而无需访问 chroot 监狱之外的其他共享库。

# android - Android：偏好活动未运行？

> ID：11368955
> 
> 赞同：0
> 
> 时间：2012-07-06T20:04:36.563
> 
> 标签：android, startup-error

我现在大部分时间都在玩这个偏好活动代码，在我上一篇文章中的一些帮助下，我得到了它，所以它可以在 AVD 上编译/安装，但它不会运行并且不会显示在应用程序菜单中。这是代码：

```
import android.content.Context;
import android.media.AudioManager;
import android.os.Bundle;
import android.preference.DialogPreference;
import android.preference.Preference;
import android.preference.Preference.OnPreferenceChangeListener;
import android.preference.PreferenceActivity;
import android.widget.SeekBar;
import android.widget.SeekBar.OnSeekBarChangeListener;
import android.widget.Toast;
public class volman extends PreferenceActivity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.dhd);

    DialogPreference dp = (DialogPreference) findPreference("mediavolume");
    dp.setOnPreferenceChangeListener(new OnPreferenceChangeListener() {

        public boolean onPreferenceChange(Preference preference,
                Object newValue) {
            SeekBar volumeBar = (SeekBar) findViewById(R.id.seekBar);
            final AudioManager manager = (AudioManager) getSystemService(Context.AUDIO_SERVICE);

            volumeBar.setMax(manager
                    .getStreamMaxVolume(AudioManager.STREAM_SYSTEM));
            volumeBar.setProgress(manager
                    .getStreamVolume(AudioManager.STREAM_SYSTEM));

            volumeBar
                    .setOnSeekBarChangeListener(new OnSeekBarChangeListener() {
                        @Override
                        public void onStartTrackingTouch(SeekBar seekBar) {
                            Toast.makeText(volman.this, "Starting Vol Tracking", Toast.LENGTH_LONG).show();

                        }

                        @Override
                        public void onStopTrackingTouch(SeekBar seekBar) {
                            Toast.makeText(volman.this, "Now Stopping", Toast.LENGTH_LONG).show();

                        }
                        public void onProgressChanged(SeekBar seekBar,
                                int progress, boolean fromUser) {
                            manager.setStreamVolume(
                                    AudioManager.STREAM_SYSTEM, progress,
                                    AudioManager.FLAG_SHOW_UI);
                            Toast.makeText(volman.this, "Now going Silent!", Toast.LENGTH_LONG).show();
                        }
                    });

            return false;
        }
    });
}

private DialogPreference findPreference(String string) {
    return null;
}
} 
```

这是清单文件：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="path.to.app"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="5"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".volman"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.PREFERENCE" />
        </intent-filter>
    </activity>
</application> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T20:38:25.363

你从

```
DialogPreference dp = (DialogPreference) findPreference("mediavolume"); 
```

但是之后

```
private DialogPreference findPreference(String string) {
    return null;
} 
```

所以你得到了一个`NullPointerException`例外`dp.setOnPreferenceChangeListener(...)`，不是吗？

# web-services - 使用 INI 使用 Apache Shiro 保护 Apache CXF Web 服务

> ID：11368956
> 
> 赞同：2
> 
> 时间：2012-07-06T20:04:37.843
> 
> 标签：web-services, cxf, shiro

在这里迫切需要帮助保护一个简单的 Apache CXF Web 服务。Spring Security 的尝试让我无处可去，所以我需要找到不同的策略。这是为了在为我们的一些客户实现的遗留 Java 服务上实现授权。

这个简单的 Apache CXF Web 服务是使用 Maven 的 cxf-jaxws-javafirst 原型创建的。它生成了一个 web.xml 和 beans.xml 文件和示例代码。除了保持默认状态的 beans.xml 之外，我还对这些实体进行了如下修改：

**网页.xml：**

```
<?xml version="1.0" encoding="ISO-8859-1"?>

<!DOCTYPE web-app
    PUBLIC "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN"
    "http://java.sun.com/dtd/web-app_2_3.dtd">

<web-app>
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>WEB-INF/beans.xml</param-value>
    </context-param>
     <context-param>
     <param-name>shiroConfigLocations</param-name>
        <param-value>WEB-INF/shiro.ini</param-value>
      </context-param>  

     <filter>
        <filter-name>ShiroFilter</filter-name>
        <filter-class>org.apache.shiro.web.servlet.ShiroFilter</filter-class>       
    </filter>

    <filter-mapping>
        <filter-name>ShiroFilter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

    <listener>      
        <listener-class>org.apache.shiro.web.env.EnvironmentLoaderListener</listener-class>
    </listener> 

    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>      
    </listener>

    <servlet>
        <servlet-name>CXFServlet</servlet-name>
        <display-name>CXF Servlet</display-name>
        <servlet-class>
            org.apache.cxf.transport.servlet.CXFServlet
        </servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>CXFServlet</servlet-name>
        <url-pattern>/*</url-pattern>
    </servlet-mapping>
</web-app> 
```

我的 Shiro.ini 文件如下所示：

```
# =======================
# Shiro INI configuration
# =======================

[main]
authc = org.apache.shiro.web.filter.authc.BasicHttpAuthenticationFilter

[users]
o = o, OPERATOR
a = a, ADMIN
s = s, SUPERVISOR

[roles]
SUPERVISOR = *
ADMIN = sayHiAdmin
OPERATOR = deleteAccounts 
```

我的简单网络服务代码如下：

```
import javax.jws.WebService;

import org.apache.shiro.SecurityUtils;
import org.apache.shiro.authz.Permission;
import org.apache.shiro.authz.UnauthorizedException;
import org.apache.shiro.subject.Subject;

@WebService(endpointInterface = "org.myCo.com.CxfShiroSecuredService.HelloWorld")
public class HelloWorldImpl implements HelloWorld {

    public String sayHi(String text) {              

        if (isAuthorized("sayHi")) {
            return "Successfully said hi " + text;
        }               

        if (hasRole("OPERATOR")){
            return "User is OPERATOR";
        }
        if (hasRole("ADMIN")){
            return "User is OPERATOR";
        }
        throw new UnauthorizedException("Logged user does not have OPERATOR's permission");                             
    }    

    public String sayHiAdmin(String text) {         

        if (isAuthorized("sayHiAdmin")) {
            return "Successfully said hi Admin " + text;
        }               

        throw new UnauthorizedException("Logged user does not have ADMIN permission");
    }

    public String deleteAccounts(String text) {             

        if (isAuthorized("deleteAccounts")) {
            return "Successfully deleted accounts " + text;
        }               

        throw new UnauthorizedException("Logged user does not have SUPERVISOR permission");
    }

    private Boolean isAuthorized(String operation){
        Subject currentUser = SecurityUtils.getSubject();       
        return currentUser.isPermitted(operation);  //currentUser.isAuthenticated(); // && currentUser.isPermitted(operation);      
    }

    private Boolean hasRole(String role){
        Subject currentUser = SecurityUtils.getSubject();       
        return currentUser.hasRole(role);       
    }
} 
```

我有一个 C# 测试客户端，它在调用 web 服务之前在 SOAP 标头中传递身份验证信息，如下所示：

```
 private void OnButtonClick(object sender, RoutedEventArgs e)
        {
            var client = new HelloWorldClient();
            var response = "";

            using (new OperationContextScope(client.InnerChannel))
            {
                var httpRequestProperty = new HttpRequestMessageProperty();
                httpRequestProperty.Headers[System.Net.HttpRequestHeader.Authorization] = "Basic " +
                Convert.ToBase64String(Encoding.ASCII.GetBytes(UserName.Text + ":" + Password.Text));
                OperationContext.Current.OutgoingMessageProperties[HttpRequestMessageProperty.Name] = httpRequestProperty;

                try
                {
                    response = client.sayHi("hi " + UserName.Text);
                }
                catch (TimeoutException tex)
                {
                    response = tex.Message;
                }
                catch (CommunicationException cex)
                {
                    response = cex.Message;
                }
            }

            TextBox.Text = response;

        } 
```

在成功调用方法调用之前，我对其他需要基本身份验证的 Web 服务使用了相同的策略，但该服务似乎无法识别我的凭据。对于调用的每个方法调用，无论用户名/密码组合如何，我都会抛出 UnAuthorizedException。有人能给我一些启示吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T21:16:24.970

您的 shiro.ini 文件中需要一个 [urls] 部分。像这样的东西：

```
[urls]
/** = authc 
```

[在此处](http://shiro.apache.org/web.html#Web-%257B%257B%255Curls%255C%257D%257D)查看文档以获取更多详细信息。

# string - 汇编和 BIOS 中断中的字符串缓冲区

> ID：11368957
> 
> 赞同：0
> 
> 时间：2012-07-06T20:04:49.647
> 
> 标签：string, assembly, buffer, sector

我正在尝试将字符串写入硬盘的第 2 扇区。它似乎失败了。这是我目前拥有的代码：

```
xor ax, ax
mov es, ax    
mov cx, 1     
mov dx, 0080h 
mov bx, NameString 
mov ax, 0301h 
int 13h

NameString db 'string', 0 
```

谢谢你们！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T23:58:08.257

NameString 的地址需要在 es:bx 中，但您将 es 归零。正确加载es，它会工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T00:15:11.707

看起来您正在尝试写入扇区 1，而不是扇区 2。

在游戏的这个阶段尝试做一件疯狂的事情，IMO，但我想这是一个“假”硬盘，所以你可能不会破坏任何关键的东西......我希望......

最好的，弗兰克

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T20:09:16.757

我不熟悉在硬盘上写，但这对你有用吗？ [如何用bios中断13h在硬盘上写](https://stackoverflow.com/questions/9057670/how-to-write-on-hard-disk-with-bios-interrupt-13h)

# java - 如何在 tomacat 中部署多个（java web 应用程序）war 文件？

> ID：11368964
> 
> 赞同：0
> 
> 时间：2012-07-06T20:05:47.413
> 
> 标签：java, jsp, war

我们有一个主域，从中我们可以创建无限的 jsp 站点（附加域）...我的问题是？我想为那个jsp站点部署不同的war文件……我有共享主机、私有jvm、cpanel……请帮帮我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T20:39:05.937

如果我理解正确，您有不同的域指向同一服务器，并且您希望 tomcat 为每个域提供不同的默认 Web 应用程序。您可以通过编辑服务器来做到这一点。xml 文件。有关详细信息，请参阅 tomcat 文档：

[http://tomcat.apache.org/tomcat-7.0-doc/virtual-hosting-howto.html](http://tomcat.apache.org/tomcat-7.0-doc/virtual-hosting-howto.html)

# mysql - 来自 CREATE USER 的语法错误，变量给出用户名和密码

> ID：11368966
> 
> 赞同：5
> 
> 时间：2012-07-06T20:05:50.293
> 
> 标签：mysql

存储过程代码：

```
CREATE DEFINER = `root` @`localhost` PROCEDURE `P_CreateUser3` (
  IN _Username NVARCHAR(30), IN _Password NVARCHAR(32), IN _DBName VARCHAR(20))
BEGIN
  CREATE USER _Username @'localhost' IDENTIFIED BY _Password ;
  GRANT SELECT, UPDATE, DELETE, INSERT 
  ON    _DBName.* 
  TO    _Username @'localhost' 
  WITH GRANT OPTION ;
END $$ 
```

> 错误代码：1064 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在 '_Password 附近使用的正确语法；GRANT SELECT, UPDATE, DELETE, INSERT ON 'pr' 在第 6 行

请帮帮我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T20:06:58.487

[不幸的是，在此错误](http://bugs.mysql.com/bug.php?id=28406)中将存储过程输入参数用作`CREATE USER`or`GRANT`语句中的密码记录为*不支持*。所以你实际上不能做你尝试的事情。

 *可以使用一个语句`PREPARE`来连接新密码，但这*不是一种安全的方法*，因此不推荐使用。如果您这样做，您将失去存储过程的所有安全优势。`EXECUTE``CONCAT()`

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-17T23:28:02.830

您必须使用准备好的语句，因为变量不会直接在查询中求值。

```
DELIMITER $$

DROP PROCEDURE IF EXISTS `create_user`$$

CREATE PROCEDURE `create_user`(
    `user_name` VARCHAR(50), 
    `passwd` VARCHAR(255),
    `ip` VARCHAR(50)
)
BEGIN
   set @sql = concat("CREATE USER '",`user_name`,"'@'",`ip`,"' IDENTIFIED BY '",`passwd`,"'");
   PREPARE stmt1 FROM @sql;
   EXECUTE stmt1;
   DEALLOCATE PREPARE stmt1;

   set @sql = concat("GRANT ALL PRIVILEGES ON * . * TO '",`user_name`,"'@'",`ip`,"' ");
   PREPARE stmt2 FROM @sql;
   EXECUTE stmt2;
   DEALLOCATE PREPARE stmt2;

   FLUSH PRIVILEGES;
END$$

DELIMITER ; 
```**

# php - php 2页面表单验证与css

> ID：11368967
> 
> 赞同：0
> 
> 时间：2012-07-06T20:05:54.293
> 
> 标签：php, validation

我第一次尝试使用 php 进行表单验证。我知道如何构建我的错误数组并显示它。谁能解释一种我可以用来为表单中错误的字段着色的技术？甚至不知道从哪里开始尝试这个。我的表格在单独的页面上处理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T20:14:27.483

您可以使用多维数组：

```
$pass = $_POST['pass'];
$error[0] = array("Your password must be 8-20 characters in length", "red")
if(str_len($pass) > 20 || str_len($pass) < 8){
    $finalError = $error[0];
} 
```

和 HTML：

```
<input style="background-color:<?echo $finalError[1]?>" name="pass"/> 
```

这是假设您没有使用 ajax 来验证...

# javascript - YouTube Javascript API：加载在 Firefox 中不起作用

> ID：11368968
> 
> 赞同：0
> 
> 时间：2012-07-06T20:06:00.533
> 
> 标签：javascript, youtube, youtube-api, youtube-javascript-api

我有一个 YouTube Javscript API 的实现，它在 Chrome 和 Safari 中运行良好，但在 Firefox 中却不行。是的，我在网络服务器上执行此操作；）

准备好文档后，我调用我的函数 showVideo();

这是所有相关代码：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/swfobject/2.2/swfobject.js"></script>    

<div id="ytplayer" class="youtubepromovideo"></div>

<script type="text/javascript">   
function showVideo(){
    var params = { allowScriptAccess: "always" };
    swfobject.embedSWF("http://www.youtube.com/apiplayer?enablejsapi=1&playerapiid=ytplayer", "ytplayer", "400", "400", "8", null, null, params);
}

function onYouTubePlayerReady(playerId) {
    console.log("player ready: "+playerId);
    loadNewVideo();
}

function loadNewVideo() {
    var id = 'jc8n44ddy9A';
    var startSeconds = 0;
    console.log("loading video");
    ytplayer.loadVideoById(id, startSeconds);
}
</script> 
```

在所有浏览器中播放器都会显示，但在 Firefox 中视频不会加载。我的日志在 Firefox 上显示“正在加载视频”消息，但之后没有其他任何事情发生。甚至没有错误。`ytplayer.loadVideoById('jc8n44ddy9A', 0);`如果我在加载所有内容后尝试手动调用，则会收到错误消息`ReferenceError: ytplayer is not defined`。

我意识到 ytplayer 并没有被我明确定义为变量，但我的猜测（？）是 YouTube API 这样做是因为它可以在其他浏览器中使用。此外，如果我只是`var ytplayer`在某个地方全局定义它并不能解决它。

任何建议都非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T21:44:52.170

不确定其他浏览器从哪里获得`ytplayer`引用，但您应该在全局范围内定义它（无论如何，对于您给出的示例）并将引用添加到`onYouTubePlayerReady`：

`ytplayer = document.getElementById( playerId );`

[使用iframe](https://developers.google.com/youtube/iframe_api_reference)播放器可能会更好，因为它也支持没有 Flash 的浏览器。我相信它可以在没有控件的情况下使用[“控件”参数](https://developers.google.com/youtube/player_parameters#controls)加载。

# jquery - MVC3-使用 jQuery 将 onclick 事件添加到链接

> ID：11368972
> 
> 赞同：0
> 
> 时间：2012-07-06T20:06:19.957
> 
> 标签：jquery, asp.net-mvc-3, click

显然我做错了什么。我一直无法让 .click() 工作，但其他 jQuery 调用工作正常。

我有以下 Javascript 函数：

```
 function showParamsFor(divID) {
       //Code here works when the function is called through onclick attribute
    } 
```

然后，我基本上有以下场景：

```
 int index = 0;
    foreach (var op in Model.Operations)
    {
       <div id="param_container[@(index)]"
          <a id="show_params[@(index)]" href="#">
             Edit Parameters
          </a>
       </div>
       index++;
    }

    int total = index;
    <script type="text/javascript" src="~/Scripts/jquery-1.6.2.min.js"></script>
    for (int i = 0; i < total; i++)
    {
        <script type="text/javascript">
            $(document).ready($('#show_params[@(i)]').click(function () {
                showParamsFor('#param_container[@(i)]');
            });
        </script>
    } 
```

对于我的一生，我似乎无法让它发挥作用。除了 .click()，我还尝试过使用以下方法：

```
.live('click', function()) 
.bind('click', function()) 
```

我已经尝试删除 $(document).ready 并将其添加回每个场景中，但是单击链接时没有任何反应。

我仔细检查了我的 id 名称，甚至尝试使用链接的类名 (.show_params[@(i)]) 而不是 id。我在这里做错了什么？

**编辑**

我正在使用循环，因为我有这些链接的动态列表。我需要在它们全部创建后将点击事件绑定到每个链接，因为每个链接都需要对每个其他链接的引用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T20:29:23.980

我将向 a 标签添加一个 css 类，以便我可以将它用于我的 jQuery 选择器来绑定点击功能。

```
foreach (var op in Model.Operations)
{
   <div id="param_container[@(ViewBag.Index)]"
      <a id="show_params[@(ViewBag.index)]" href="#" class="thatClass">
         Edit Parameters
      </a>
   </div>
   ViewBag.Index++;
} 
```

你的脚本应该是

```
$(function(){
  $(".thatClass").click(function(e){
     e.preventDefault()'; //if you want to prevent default behaviour
     var item=$(this);
     alert(item.attr("id");
     alert(item.parent().attr("id");

  });
}); 
```

这应该工作

不知道为什么使用 ViewBag 项来提供元素的 ID！.

如果你有一个 ID（其他一些属性给你唯一的值，你应该考虑像这样使用它（假设你有一个`ID`属性，它对集合中的每个项目都有唯一的值）

```
foreach (var op in Model.Operations)
{
   <div id="param_container-@op.ID"
      <a id="show_params-@op.ID" href="#" class="thatClass">
         Edit Parameters
      </a>
   </div>       
} 
```

恕我直言，上面的代码看起来比使用 ViewBag 的代码更干净

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T20:47:37.717

还是不明白，为什么要在这里使用自定义循环。Jquery 代码在这里就足够了。首先，添加您的元素。然后，您准备好的文档应该如下所示：

```
 $(document).ready(function() {
            $('a[id^=link]').live('click', function(data) {
                alert($('#links').children().index(this));
            });
        }); 
```

**UPD** 小样本在这里：http: [//jsbin.com/ahafel/2](http://jsbin.com/ahafel/2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T14:21:37.010

感谢您的回复，但我已经找到了我的问题。

1.  当我应该将 'param_container[@(i)]' 传递给它时，我将 '#param_container[@(i)]' 传递给我的 showParamsFor 函数。没有哈希标签。

2.  一个更重要的问题......我的 id 中的括号没有被 jQuery 识别。我读到您可以在括号前使用 \\ 作为转义字符，但自然......这对我不起作用。我将我的 id 从 'param_container[@(i)]' 更改为 'param_container-@(i)'。

一切似乎都很好。这是我的最终脚本：

```
 <script type="text/javascript" src="~/Scripts/jquery-1.6.2.min.js"></script>
    <script type="text/javascript">
        for (var i = 0; i < total; i++)
        {
            $(document).ready(function() {
               $('#show_params-'+i).live('click', function (data) {
                    showParamsFor('param_container-'+i);
                });
            });
        }
    </script> 
```

# php - PDO 和 PHP。未定义索引，但已定义

> ID：11368976
> 
> 赞同：2
> 
> 时间：2012-07-06T20:06:28.287
> 
> 标签：php, pdo

我有一堂课：

```
class Media {
    private $media;
    private $thumb;
    private $slug;
    private $info;
    private $type;
    private $link;
} 
```

我尝试使用 PHP PDO 将其保存到数据库中：

```
$PDO = new PDO("mysql:host=".DBHOST.";dbname=".DB, DBUSER, DBPASS);

$options = array('media' => 'image.jpg',
            'thumb' => 'image_thumb.jpg');
$media = new Media($options);

$media = (array)$media;

$STH = $PDO->prepare('INSERT INTO media (media, thumb, slug, info, type, link) values (?, ?, ?, ?, ?, ? )');

$STH->bindParam(1, $media['Mediamedia']);
$STH->bindParam(2, $media['Mediaslug']);
$STH->bindParam(3, serialize($media['Mediainfo']));  //line 150
$STH->bindParam(4, $media['Mediathumb']);
$STH->bindParam(5, $media['Mediatype']);
$STH->bindParam(6, $media['Medialink']);

$STH->execute(); 
```

上面的代码产生 1 个错误：

> 注意：未定义的索引：第 150 行 C:\wamp32\www\MM\index.php 中的 Mediainfo

但`print_r($media);`输出：

```
Array
(
    [Mediamedia] => image.jpg
    [Mediathumb] => image_thumb.jpg
    [Mediaslug] => image
    [Mediainfo] => Array
    (
        [title] => image.jpg
        [alt] => image.jpg
        [description] => image.jpg
    )
    [Mediatype] => .jpg
    [Medialink] => 0
) 
```

编辑：修复了第二个错误，就像@dleiftah 所说的那样愚蠢，但仍然存在。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T20:49:15.423

当您将对象转换为数组时，私有成员和受保护成员会被破坏。私有成员`\x00`在类名周围有空字节。要以这种方式使用它们，您需要：

```
$STH->bindParam(1, $media["\x00Media\x00media"]);
$STH->bindParam(2, $media["\x00Media\x00slug"]);
$STH->bindParam(3, serialize($media["\x00Media\x00info"]));
$STH->bindParam(4, $media["\x00Media\x00thumb"]);
$STH->bindParam(5, $media["\x00Media\x00type"]);
$STH->bindParam(6, $media["\x00Media\x00link"]); 
```

如果他们是受保护的成员，他们将从`\x00*\x00`

此外，您绑定参数的顺序似乎与您的插入语句中的字段顺序不匹配。

# database - 如果 MD5 散列很容易被破解，它的目的是什么？

> ID：11368979
> 
> 赞同：1
> 
> 时间：2012-07-06T20:06:42.430
> 
> 标签：database, encryption, hash, md5

我知道密码应该在数据库中加密，以保护它们免受黑客和恶意的人的侵害。但是 MD5 在 2005 年更新。从那时起，黑客发现了逆哈希函数，许多网站都可以轻松破解 MD5 哈希密钥，例如 md5this.com，这是 google 上第一个建议的网站之一。

每个 Web 开发人员不应该创建自己的哈希函数，以便黑客在访问数据库时无法检索密码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T20:08:38.110

出于这个原因，您不应再使用 MD5 哈希。

它提供了一些安全性，但还不够重要。

每个 Web 开发人员都应该这样做，但他们通常没有时间，所以 sha1 通常可以解决问题......

Sha1 容易受到暴力攻击，但是对于大多数开发人员来说，想出自己的不易受到暴力攻击的加密模式将非常耗时。

[SHA-1 对密码存储是否安全？](https://stackoverflow.com/questions/2772014/is-sha-1-secure-for-password-storage)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T20:09:33.883

如果你觉得你有算法能力来创建一个可行的哈希函数，请这样做。我见过的最好的建议是从 MD5 切换到最新的 SHA 实现，使用盐，并考虑运行几个加密循环来强制对任何破解者进行额外的工作。

# c++ - Visual C++ 2010 错误。运行时找不到program.exe

> ID：11368982
> 
> 赞同：-2
> 
> 时间：2012-07-06T20:06:56.833
> 
> 标签：c++

这是我收到的信息

> 无法启动程序 C:\Users\Documents\Visual Studio 2010\Projects\EULER'S Fixed\Debug\EULER'S Fixed.exe
> 
> 该系统找不到指定的文件。

这是构建输出

```
1>------ Build started: Project: EULER'S Fixed, Configuration: Debug Win32 ------
1>LINK : error LNK2001: unresolved external symbol _mainCRTStartup
1>C:\Users\adicpluplu\Documents\Visual Studio 2010\Projects\EULER'S Fixed\Debug\Debug\EULER'S Fixed.exe : fatal error LNK1120: 1 unresolved externals
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T17:11:28.170

Select the properties for the file in which main is defined and make sure "item type" under "General" (under Configuration Properties) is set to "c/c++ compiler"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T20:13:10.430

当您在第一次编译之前未能保存所有内容时，您会收到该消息。

我认为这是 2010 年的一个缺陷。创建一个新项目，或向项目中添加文件或从项目中删除文件实际上并没有保存。您必须在它们真正存在之前手动保存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T20:10:27.173

您错过了定义 main：

```
int main()
{
     //..
     return 0;
} 
```

# javascript - 使用javascript生成唯一随机数

> ID：11368986
> 
> 赞同：0
> 
> 时间：2012-07-06T20:07:22.933
> 
> 标签：javascript, jquery, html

我使用以下代码生成从 0 到 15 的随机数。我使用函数 random() 生成唯一数我这样调用函数

```
cat=random(); 
```

我将随机数保存在数组 r[] 中。并检查新生成的数字是否在数组中。如果出现重复，我再次调用 random() 函数。我使用 alert 来检查它是否正常工作

```
function random(){
    var ran,max=0,min=0;
    max=r.length;
    alert(max);
    if (max>15)
        alert("no more space");
    ran=Math.floor(Math.random() * 15) + 0;
    for (i=0;i<max;i++)
    if (ran==r[i])
        min++;
    if (min>0){
        alert("calling");
        random();  //return in here
    }else{
        i=parseInt(max);
        r[i]=ran;   
        return(ran);
        alert(ran); 
    }                   
} 
```

但是当重复发生时，函数内的变量返回可以帮助解决这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T20:14:52.737

我会创建一个数组并使用[Fisher-Yates](http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle)对其进行洗牌。

```
function shuffle(arr) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor(i * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled;
}

// Create the array
var i = 16, arr = [];
while (i--) arr[i] = i;

// Shuffle it
arr = shuffle(arr);

// Array is now the numbers 0-15 in a random order
console.log(arr); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T20:24:39.147

无聊，快速的黑客工作，但我相信它会起作用：

```
// Minimum random number
var min = 0;

// Maximum random number
var max = 15;

// Returns a random number between min and max
function random() {
    var random_number = Math.random();

    return Math.floor((random_number * max) + min);
}

// Returns false if number is in the array
function random_is_unique(random_num_, array_) {
    // Could use indexOf, but just looping here for simplicity.
    // And not so sure IE has this capability.
    for(i = 0; i < array_.length; i++) {
        if(array_[i] == random_num_) {
            return false;
        }                        
    }
    return true;
}

// Returns a guaranteed unique, or -1 if no more unique values
// are availble to return
function guaranteed_unique(array_) {
    random_number = random();

    // Just an iterator, so we have a terminating condition
    tries = 0;    

    while(!random_is_unique(random_number, array_)) {
        // This is dumb. There's likely a better way to do this, but it's
        // quick and dirty. It also does not guarantee you've tested all
        // integers. 
        if(tries > max) {
            return -1;
        }

        random_number = random();

        tries++;
    }

    return random_number;
}

my_array = new Array();
my_array[0] = 1;
my_array[1] = 15;
my_array[2] = 6;
my_array[3] = 9;
my_array[4] = 13;

my_random_number = guaranteed_unique(my_array);

alert("Random number is " + my_random_number); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-03T20:42:08.430

我修改了一个对我有用的解决方案，它消除了数字之间的空条目，并用 1-9 之间的唯一数字填充它们

```
var arr = [,2,,4,,6,7,,]; //**example**<br/>
while(arr.length < 9){<br/>
var randomnumber=Math.floor(Math.random()*9+1);<br/>
var found=false;<br/>
for(var i=0;i<arr.length;i++){<br/>
if(arr[i]==randomnumber){found=true;break;}<br/>
}<br/>
if(!found)<br/>
for(k=0;k<9;k++)<br/>
{if(!arr[k]) //**if it's empty !!MODIFICATION**<br/>
{arr[k]=randomnumber; break;}}<br/>
}<br/>
alert(arr); //**outputs on the screen**<br/> 
```

# windows - $PATH 或 /usr5bin 中没有可用的 M4

> ID：11368989
> 
> 赞同：13
> 
> 时间：2012-07-06T20:07:41.050
> 
> 标签：windows, codeblocks, gmp, m4

作为一个漫长而肮脏的故事的一部分，其最终目标只是安装 GMP 以与 Windows 中的 code::blocks 一起使用，我正在尝试配置 gmp。我使用以下命令执行此操作：

> ./configure --prefix=${gmp_install}

一切都开始得很好。几分钟和一点进展后，一切都停止了，我收到以下消息：

> 配置：错误：$PATH 或 /usr5bin 中没有可用的 M4

我什至不知道 M4 是什么，但我发现它是某种宏处理器。所以我下载了它，并将文件夹添加到我的 Path 变量中。然后我再次开始配置，但结果相同。

我需要对 M4 做些什么才能使其正常工作吗？我真的很茫然。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-07T21:43:37.803

如果您使用的是基于 debian 的操作系统，请执行 sudo apt-get install m4。如果 Internet 不存在或者您只有 m4 的软件包，请将其复制到 /opt，配置它，然后将 $PATH 值更改为您现在拥有的值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-11-28T21:20:08.303

如果您使用的是 cygwin，则 setup 安装程序有一个 m4 工作包。这样就不需要下载 m4 或更改 $PATH。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-01-22T15:06:16.493

假设你在 MSYS2 上（你似乎有一个`sh`），你可以`m4`通过`pacman -S m4`.

请注意，如果您通过 shell 运行 configure，则不要意外选择 WSL 的 bash（位于 中`%System32%/bash.exe`）。这就是我们的构建系统中发生的事情......

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-08-13T03:29:15.207

我遇到了同样的问题，我通过运行 Mingw 包安装程序解决了它，并在列表中搜索 msys-m4，选择所有然后应用更改，它应该让你 ./configure 就好了:)

# ubuntu - 如何更改 Ubuntu 中 Komparator 的默认语言？

> ID：11368991
> 
> 赞同：2
> 
> 时间：2012-07-06T20:07:43.833
> 
> 标签：ubuntu, configuration, internationalization, app-config

[我从这个页面](http://kde-apps.org/content/show.php?content=116039)下载了 Komparator4 源代码。我安装了它，但没有更改语言的选项（默认为*English*）。

包源中有一个文件夹，其中包含**6 个习语**（意大利语、德语等）。如何将默认语言从英语更改为其中一种？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T13:05:04.833

在 KDE 设置中设置语言。它位于联合国旗帜下的“系统设置”中，标题为“语言环境”。然后重新启动应用程序。

# c# - 动态加载控件上 Viewstate 的奇怪行为

> ID：11368993
> 
> 赞同：3
> 
> 时间：2012-07-06T20:07:47.970
> 
> 标签：c#, asp.net, viewstate

我正在动态加载用户控件以在项目中的视图之间切换。我知道我需要在每次回发时重新加载我的用户控件。奇怪的是，即使控件消失了，我的控件视图状态仍然保持不变？我确认我加载它的面板是空的，然后我检查视图状态并且我的值在那里。

奇怪的是，如果我加载不同的控件，它可以从前一个控件中看到视图状态？我检查了一下，我的页面无法从动态加载的控件中看到视图状态，反之亦然。这让我觉得用户控件被视为自己的页面。令人困惑的部分是为什么我加载的第二个视图可以看到第一个视图的值以及为什么即使我的控件消失了这些值仍然存在？

我也发现这部分代码没用。为什么要取消控制？面板始终为空（代码来自 Telerik）：

```
string controlId = LatestLoadedControlName.Split('.')[0];
Control previousControl = pnlControlPlaceholder.FindControl(controlId);
if (!Object.Equals(previousControl, null))
{
   this.pnlControlPlaceholder.Controls.Remove(previousControl);
} 
```

我看了几篇帖子，大多数人说每次回发都会丢失视图状态，尽管对我来说不是这样。也许是因为我正在使用更新面板。尽管如果一个初始请求处理了一个事件，然后再次重新加载相同的控件，视图状态就会丢失。它似乎只在下一次回发时保留视图状态。

任何人都可以解释这种在用户控件之间共享视图状态的奇怪行为，或者即使控件丢失，为什么它仍然存在？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T18:27:07.217

显然，您可以在两种情况下读取页面之间的视图状态...跨页面回发和使用 Server.Transfer 时。我相信跨页面回发场景可以解释我所看到的。

# synchronization - 将数据传递给正在运行的 CUDA 内核

> ID：11368994
> 
> 赞同：0
> 
> 时间：2012-07-06T20:07:55.417
> 
> 标签：synchronization, cuda, gpu

有没有办法将数据传递给正在运行的 CUDA 内核？我认为可以通过异步启动内核并使用映射的固定内存来完成。使用这种方法，我可能可以在 GPU 设备内存中写入，内核代码可以从那里读取。

这种方法有一个主要的同步问题：单个线程如何在特定的内存位置上同步？

# java - 在 Play Framework 中混合 scala 和 java

> ID：11368995
> 
> 赞同：4
> 
> 时间：2012-07-06T20:08:01.250
> 
> 标签：java, scala, playframework

我有一个如下所示的 Java 文件：

```
package AuthorizeNetFingerprint;

class Fingerprint {
    private static Log logger = LogFactory.getLog(Fingerprint.class);

    private long sequence;
    private long timeStamp;
    private String fingerprintHash;

    private Fingerprint() {
    }

    /**
     * Creates a fingerprint with raw data fields.
     * 
     * @param loginID
     * @param transactionKey
     * @param sequence : this number will be concatenated with a random value
     * @param amount
     * @return A Fingerprint object.
     */
    public static String createFingerprint(String loginID,
                    String transactionKey, long sequence, String amount) {
         return transactionKey;
    }
} 
```

我正在尝试像这样的scala访问它：

```
val fingerprint = new AuthorizeNetFingerprint.Fingerprint
val x_fp_hash = fingerprint.createFingerprint(x_api_login_id,
                  transaction_key, x_fp_sequence, x_amount) 
```

它给了我这个错误：

包 AuthorizeNetFingerprint 中的对象指纹无法在包 AuthorizeNetFingerprint 中访问

是否可以在 Play Framework 中混合使用 scala 和 java？

我做错了什么？

*编辑*

我需要：公共类指纹

代替

```
class Fingerprint 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T07:57:23.117

三件事：

1.  正如您已经知道的那样，您的指纹类需要公开。
2.  您已将 Fingerprint 的构造函数设为私有；你不能实例化它。
3.  Java 类中的任何静态方法都应该通过类在 Scala 中的伴生对象来访问。

您示例中的所有 Scala 代码都应替换为：

```
val x_fp_hash = AuthorizeNetFingerprint.Fingerprint.createFingerprint(…) 
```

这适用于使用 sbt (0.11.3) 编译的 Scala (2.9.1) 控制台。

是的，您可以在 Play2 应用程序中混合使用 Java 和 Scala，只需将 Java 代码放在 app 目录中即可。请注意，Java 类需要位于其相应的包目录中，而 Scala 类并非如此。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T20:48:27.980

我不熟悉 Play 框架，但是您的 Scala 示例代码中的第一行应该实例化 class `AuthorizeNetFingerprint.Fingerprint`，它只有一个**私有构造函数**，而不是**公共类**（即，它只能从同一个包中访问）。

`AuthorizeNetFingerprint.Fingerprint.createFingerprint(...)`也许在上课后打电话给工作`public`？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T20:24:39.830

从理论上讲，这应该可以正常工作。查看此博客 Re Java and Scala interop。 [http://www.codecommit.com/blog/java/interop-between-java-and-scala](http://www.codecommit.com/blog/java/interop-between-java-and-scala)

创建项目时，您是否指定了 Java、Scala 或 None（1,2 或 3）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-07T00:20:25.833

按照惯例，Java 包的名称都是小写的。

如果您尝试使用以大写开头的 Java 包，Scala 似乎也会感到困惑。如果你使用`authorize`作为包名而不是`AuthorizeNetFingerprint`，它将编译。

此外，没有必要这样做：

```
val fingerprint = new AuthorizeNetFingerprint.Fingerprint 
```

`createFingerprint`是一个静态方法，所以只需调用

```
val x_fp_hash = Fingerprint.createFingerprint 
```

（导入后`authorize.Fingerprint`）。

# .htaccess - 我的 301 htaccess modrewrite 规则有什么问题

> ID：11368996
> 
> 赞同：0
> 
> 时间：2012-07-06T20:08:02.873
> 
> 标签：.htaccess

```
RewriteEngine On
RewriteRule ^(.*)$ /snsd.html [R=301] 
```

我希望谷歌中的所有索引页面都被 301 定向到一个名为 snsd.html 的页面

但是，我不断收到重定向循环错误。

我想我需要设置一个条件，如果页面不是 snsd.html 则执行 301 重定向。我该怎么做呢？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T20:14:42.120

像这样的东西：

```
RewriteEngine on
RewriteCond %{REQUEST_URI} !^/snsd.html$
RewriteRule ^(.*)$ /snsd.html [R=301] 
```

我把例子从[http://wiki.apache.org/httpd/RewriteCond](http://wiki.apache.org/httpd/RewriteCond)

# ios - 无法签署应用程序以分发到应用程序商店

> ID：11368997
> 
> 赞同：0
> 
> 时间：2012-07-06T20:08:03.187
> 
> 标签：ios, xcode, app-store

我正在尝试将应用程序分发到应用程序商店，但我能够对其进行签名。

![在此处输入图像描述](../Images/295c638a7753e62d5309586d2d164713.png)

如您所见，我确实可以访问我们的分发证书：

![如您所见，我确实可以访问我们的分发证书](../Images/266f61c81279841ae136876d470fcefe.png)

`Download Identities`和都试过了`Import Developer Profile`，都没有成功。我真的不知道还能尝试什么；这个问题没有解决我的问题[没有可用的身份 - 管理员请求](https://stackoverflow.com/questions/10215530/no-identities-were-available-administrator-request)

有什么建议么？

更新：当我为归档而构建时，我确实收到了这个错误，因为它的价值：

```
warning: Application failed codesign verification.  The signature was invalid, contains disallowed entitlements, or it was not signed with an iPhone Distribution Certificate. (-19011) 
```

更新：我发现了问题，捆绑标识符的名称错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T20:52:36.877

好的，这就是你需要做的：

*   登录到供应门户
*   去供应
*   分配
*   如果您没有游戏的个人资料..制作一个
*   如果你这样做..然后下载并安装在你的mac上
*   在您的项目中：

    ![在你的项目中](../Images/845b5abcd702071901660d4cd4f204d3.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T12:17:34.300

总结一下，这种情况下的问题实际上是我输入了错误的包标识符。令人沮丧的是 Xcode 无法告诉我这一点。我只是碰巧尝试了Application Uploader，当它失败时，DID 告诉我。

# java - 导入具有不同字段的多个 XML 文件 - 检查 isset() 或一些 Java equiv？

> ID：11368998
> 
> 赞同：0
> 
> 时间：2012-07-06T20:08:06.180
> 
> 标签：java, android

我正在导入多个具有相同标签名称的 XML 文件，但其中一些文件没有一些标签。

我的导入适用于所有具有每个“字段”（即`<title></title>`）的文件，但是`java.lang.NullPointerException`当我尝试将我的类的值设置为 XML 文件中不存在的项目时，我得到了。

例如：

```
for(NewsItem item : parser.getParsedItems())
{
    Article a1 = new Article();
    a1.title = item.title.trim();
    a1.subtitle = item.subhead.trim();
    //...
} 
```

这对大多数人来说都很好，但如果其中一个没有“副标题”标签，那么我会收到错误消息。

在尝试将其设置为我的文章的“标题”值之前，有什么方法可以检查它是否已设置或具有价值？（举个例子）。

我试过`if(!item.title.isEmpty())`了，但这仍然给出了错误。

（或者有没有更好的方法让我忽略？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T20:14:48.017

好吧，如果元素不存在，则无法检查 isEmpty() 因为它为空。

```
if(item.title != null && !item.title.isEmpty()) {
    // Yay, we have something useful!
    a1.title = item.title.trim();
} else {
    // Perhaps we should give a default value?
    a1.title = "";
} 
```