# StackOverflow 问答 000905000-000905999

# emacs - 禁用瞬态标记模式

> ID：905001
> 
> 赞同：7
> 
> 时间：2009-05-25T00:59:19.787
> 
> 标签：emacs, syntax-highlighting, dot-emacs

在我的`.emacs`文件中，我有

```
(setq transient-mark-mode nil) 
```

并且`transient-mark-mode`在我启动 Emacs 时被激活。调用`transient-mark-mode`会给出消息“transient-mark-mode disabled”，但是`Control`-`Space`仍然开始突出显示一个区域。

有没有办法关闭它？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-25T02:35:29.607

您可能还`cua-mode`启用了与 . 具有相似区域突出显示的区域`transient-mark-mode`。仅对此进行测试`M-x cua-mode`（打开/关闭它）并查看它是否禁用突出显示。

从`C-h f cua-mode`帮助：

> CUA 模式在内部管理瞬态标记模式。在启用 CUA 模式时尝试禁用瞬态标记模式不起作用；如果您只想在使用移动键选择区域时突出显示该区域，请设置“cua-highlight-region-shift-only”。

# python - Python 和智能感知

> ID：905005
> 
> 赞同：70
> 
> 时间：2009-05-25T01:02:23.070
> 
> 标签：python, ide, intellisense

Python 是否有相当于“智能感知”的功能？

也许我不应该承认这一点，但我发现智能感知确实加快了学习一门新语言的“发现阶段”。例如，从 VB.net 切换到 C# 是一件轻而易举的事，因为片段和智能感知帮助了我。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2009-05-25T01:25:42.290

[这篇](http://blog.dispatched.ch/2009/05/24/vim-as-python-ide/)博文解释了将 Vim 设置为 Python IDE，他介绍了类似 Intellisense 的功能：

[![Python 智能感知](https://i.stack.imgur.com/XG5NA.png)](https://i.stack.imgur.com/XG5NA.png)
[（来源：[dispatched.ch](http://blog.dispatched.ch/wp-content/uploads/2009/05/omnicompletion.png)）]

这是 Vim 7 中的标准。在 Vim 中还有许多其他非常有用的 Python 开发插件，例如[Pyflakes 即时](http://www.vim.org/scripts/script.php?script_id=2441)检查代码和[Python_fn.vim](http://www.vim.org/scripts/script.php?script_id=30)，它提供了操作 Python 缩进和代码块的功能。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2011-08-05T22:00:12.067

看看[Visual Studio 的 python 工具](http://pytools.codeplex.com/)，它们提供代码完成（又名智能感知）、调试等......

下面是用于显示代码完成的 Python 交互式 shell 的屏幕截图。

![在此处输入图像描述](https://i.stack.imgur.com/UhMnP.png)

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2009-05-25T01:34:23.240

Eclipse的[PyDev](http://pydev.sf.net/)环境具有类似智能感知的 Python 功能。保持交互式控制台打开以及该`help(item)`功能非常有用。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2009-05-25T03:22:07.907

语言的动态特性往往使自动完成类型分析变得困难，因此上面提到的各种完成设施的质量差异很大。

虽然它不完全符合您的要求，但 ipython shell 非常适合探索性工作。当我使用一个新模块时，我倾向于将它拉入 ipython 并戳它。在尝试了上面提到的大多数解决方案后（尽管 Wing 已经有好几年了），ipython 的完成设施始终更加可靠。探索的两个主要工具是制表符完成并在模块/函数名称后附加一个问号以获取帮助文本，例如：

```
In [1]: import sqlalchemy

In [2]: sqlalchemy.s #tab completion
sqlalchemy.schema    sqlalchemy.select    sqlalchemy.sql       sqlalchemy.subquery

In [2]: sqlalchemy.select? #Shows docstring

In [3]: sqlalchemy.select?? #Shows method source

In [4]: edit sqlalchemy.select #opens the source in an editor 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2009-05-25T02:55:47.897

Python 附带的[IDLE 编辑器具有智能感知功能，可以自动发现导入的模块、函数、类和属性。](http://en.wikipedia.org/wiki/IDLE_(Python))

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2009-05-25T01:54:20.720

我强烈推荐[PyDev](http://pydev.sourceforge.net)。在 Pydev 中，您可以将您正在使用的模块放在[**Forced Buildins**](http://www.fabioz.com/pydev/manual_101_interpreter.html)中，大多数情况下代码完成将比在其他 IDE（如 KOMODO EDIT）中更好地工作。

我也认为[IPython](http://ipython.scipy.org/)非常有帮助。由于它是 IPython 中的“运行时”，因此 IPython 中的代码完成不会遗漏任何内容。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2013-06-06T16:41:39.537

[PyCharm](http://www.jetbrains.com/pycharm/)是支持 IntelliSense 的最佳 Python IDE。

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2009-05-25T02:33:11.950

我推荐[Komodo Edit](http://www.activestate.com/komodo_edit/)。但是，我应该指出一点：您不会得到任何与您习惯使用 Visual Studio 的 C# 智能感知一样好的东西。Python 的动态特性使得实现这些功能变得困难。

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2009-05-25T01:07:20.830

例如，Wingware 实现了自动完成，参见[http://wingware.com/doc/edit/auto-completion](http://wingware.com/doc/edit/auto-completion)。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2009-05-25T01:13:06.857

ctags + vim 也可以，虽然它没有智能感知那么强大。将它与 ipython 一起使用，您可以获得在线帮助、自动名称完成等……但这显然是面向命令行的。

Eclipse + pydev 也可以，但我没有经验：[http ://pydev.sourceforge.net/](http://pydev.sourceforge.net/)

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2009-05-26T13:18:05.353

好吧，我认为学习 Python 最动态的方法是使用[iPython](http://ipython.scipy.org/moin/)。

您在使用选项卡时获得了自动完成，动态行为，因为它是一个外壳，您可以获得任何对象/方法类型的完整文档：

```
object.method ? 
```

在开发时，我同意 PyDev 很酷。但是它很重，所以在学习的时候，一个文本编辑器 + iPython 真的很不错。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2010-08-23T18:54:19.823

[Pyscripter](http://code.google.com/p/pyscripter/)拥有我见过的最好的智能感知 :)

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2013-06-06T18:06:32.157

对于 emacs 和 VI，还有[https://github.com/tkf/emacs-jedi](https://github.com/tkf/emacs-jedi)。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2014-03-14T01:23:54.307

我会推荐[jedi-vim](https://github.com/davidhalter/jedi-vim)，它对我来说是完美的，试试吧，你不会后悔的。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2012-12-25T01:51:44.803

IronPython 是要走的路。Visual Studio 具有最好的智能感知支持，您可以使用 IronPython 来利用它

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2016-10-16T08:36:46.397

试试视觉工作室代码。它具有非常强大的 Python 和 Django 支持，以及用于 Python 项目中使用的其他语言的数千个插件，例如 CSS、HTML 和 Django 模板。

最重要的是，它是免费的： [https ://code.visualstudio.com](https://code.visualstudio.com)

# validation - Silverlight 3 使用模板验证 DataForm

> ID：905008
> 
> 赞同：0
> 
> 时间：2009-05-25T01:03:53.567
> 
> 标签：validation, silverlight-3.0, dataform

我有一个 SL3 应用程序，我在其中使用 DataForm 进行数据输入。我希望我的表单以我喜欢的方式显示，因此，我使用`<dataControls:DataForm.EditTemplate>`模板并在模板内部进行了漂亮的表单设计。

主要问题是，在模板内我必须使用普通控件（如 TextBox）而不是“字段”控件（如 DataFormTextField）。它们的工作原理几乎相同，但在验证时有很大的不同。

如果我在绑定到它们的属性的设置器中抛出异常，它们都会显示正确的红色符号和错误，但如果我通过验证属性（例如`[Required(ErrorMessage = "can't be empty!")]`）装饰属性，则只有 DataFormTextField 控件而不是 TextBox 控件将显示错误。在这两种情况下，我的 ErrorSummary 控件在其集合中都有错误，因此我可以看到正在考虑该错误...

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-25T14:41:15.653

你在使用模板字段吗？

```
 <df:DataFormTemplateField FieldLabelContent="Year"> 
      <df:DataFormTemplateField.DisplayTemplate> 
        <DataTemplate> 
          <TextBox Text="{Binding Year}" HorizontalAlignment="Left" /> 
        </DataTemplate> 
      </df:DataFormTemplateField.DisplayTemplate> 
      <df:DataFormTemplateField.EditTemplate> 
        <DataTemplate> 
          <TextBox Text="{Binding Year}" HorizontalAlignment="Left" /> 
        </DataTemplate> 
      </df:DataFormTemplateField.EditTemplate> 
    </df:DataFormTemplateField> 
```

# process - 终止使用 spawnv 创建的进程

> ID：905014
> 
> 赞同：1
> 
> 时间：2009-05-25T01:07:17.133
> 
> 标签：process, termination

我根本没有流程经验，但我设置的应该非常简单。我所做的就是产生一个这样的过程：

```
int spawnId = spawnv(_P_NOWAIT,"wgetlocal.exe",my_env); 
```

现在，我想做的是在一段时间后杀死这个程序。但是，返回的 spawnId 并不是我在调用`taskkill /PID [number] /F`.

我已经尝试过使用`otherId2 = GetWindowThreadProcessId((HWND)spawnId,OUT otherId1)`但又一次，既没有也没有`otherId1`给出`otherId2`正确的 PID。

如果有人可以帮助我解决他的问题，我将不胜感激。问候， 罗尔德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-25T01:29:52.733

[来自 MSDN](http://msdn.microsoft.com/en-us/library/7zt1y878.aspx)：

> 异步`_spawnv`或`_wspawnv`（`_P_NOWAIT`或`_P_NOWAITO`为模式指定）的返回值是进程句柄。

当你有一个进程句柄时，你可以使用[`TerminateProcess`](http://msdn.microsoft.com/en-us/library/ms686714.aspx).

手柄类型不可互换。您不能将进程句柄类型转换为`HWND`并使其突然成为窗口句柄。

# javascript - ExternalInterface.call 在 IE 中导致错误

> ID：905018
> 
> 赞同：1
> 
> 时间：2009-05-25T01:10:04.787
> 
> 标签：javascript, flash, internet-explorer, actionscript, externalinterface

我有一个菜单屏幕，由于各种原因，它包含许多按钮作为单独的 Flash 电影。当单击这些电影中的按钮时，它应该调用 javascript 函数以移动到相应的页面。它在 Firefox 中运行良好，但目前在 IE7 中失败。我没有方便的 IE6 来测试。这是我在 IE 中遇到的错误：

```
Line:1
Char:25
Error: Expected ';'
Code:0 
```

我无法找到第 1 行的 char 25 的实际含义。我只有在单击按钮时才会收到错误，并且在安装 Visual Web Developer 以尝试进行一些实际调试后，它似乎并没有真正触发被调用的函数，所以看起来错误发生在究竟是什么机制使 ExternalInterface.call 起作用？

Flash 电影上的代码实际上就是：

```
ExternalInterface.call('gohere',skip_id); 
```

skip_id 作为 flashvar 传递到电影中的地方 - 它似乎得到了一个有意义的值，因为我可以将它打印到 flash 电影中的文本字段。javascript函数同样复杂：

```
function gohere(i){
    lo.skipto(i);
} 
```

但正如我所说，如果我在此处放置断点并对其进行调试，它甚至不会出现。如果我在 html 屏幕中放置一个 javascript:gohere('id') 链接并单击它可以正常工作。我有 ExternalInterface.call 在同一个项目的其他部分工作，并且在我的一生中看不到它的实施方式有任何差异。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-27T01:43:44.037

原来我有一个 - 在对象标签的 ID 中，IE 根本不喜欢它。

*叹*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-25T01:34:04.770

我在 IE 中调试这些东西更糟糕，所以对于初学者，我会在我的 gohere 中放置一个“alert()”。然后我会开始在我的 javascript 中输入回车，看看有错误的行是否移动，然后通过推导找出来。

顺便说一句，有一个名为 IETester 的软件，它应该向您展示您的页面在 IE 5.5/6/7/8RC1 中的外观。

# python - 与 Vim 中的 Python 脚本相关的资源

> ID：905020
> 
> 赞同：34
> 
> 时间：2009-05-25T01:11:07.903
> 
> 标签：python, vim

我正在尝试在 GVim 中学习一些关于 python 脚本的知识，但我在开始时遇到了麻烦。基本的东西，真的。

是否有任何资源/教程在 Vim 中协调 python 脚本？显示基本原理的简单示例也将受到欢迎。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2009-05-25T01:16:08.923

以下是我对此类文档的了解：

*   [Sean Reifschneider 的精彩演讲](http://www.tummy.com/Community/Presentations/vimpython-20070225/vim.html)
*   [“官方”VIM Python 接口参考](http://vimdoc.sourceforge.net/htmldoc/if_pyth.html)
*   [一些较短的笔记](http://zerokspot.com/weblog/2009/02/22/getting-to-know-vims-python-interface/)
*   [用 Python 扩展 Vim](http://www.techrepublic.com/article/extending-vim-with-python/6310729)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-25T02:04:40.013

:help python-vim 是一个好的开始。最好的 vim 资源总是在您的指尖，您越早习惯使用它，您对 vim 的整体了解就会越好。

我在搜索 vim 帮助方面做得更好..

[如何使 vim 对文件名进行正常的（类似 bash 的）制表符补全？](https://stackoverflow.com/questions/526858/how-do-i-make-vim-do-normal-bash-like-tab-completion-for-file-names/526940#526940)

还有：他 vim-script-intro

我还建议直接查看现有插件的来源，这些插件的功能与您想做的类似。这样一来，您就可以省去中间人，而不必处理博客广告和其他干扰。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-02-07T09:36:35.747

### Vimscript 艰难的道路

你检查过[Learn Vimscript The Hard Way](http://www.vim.org/scripts/script.php?script_id=2914)吗？这是一本极好的读物。

### 用 Python 编写 Vim 脚本

vim 7.0 及更高版本可以使用该`+python`标志编译，这提供了 vim Python 支持。这是获得所需语言支持的一条（尽管有些极端）途径。

**链接**

*   [I Code With Things And Stuff](http://blog.raynes.me/blog/2012/02/01/i-code-with-things-and-stuff/)深入探讨了如何使用 Python 等脚本语言扩展编辑器。
*   [使用 Python 扩展 Vim](http://www.techrepublic.com/article/extending-vim-with-python/6310729)似乎更像是该主题的参考。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-25T02:01:24.433

请参阅['A Byte of Vim'中的](http://www.swaroopch.com/notes/vim/)*脚本*章节。

# javascript - tinymce 打开一个新窗口切换到 Firefox 和 chrome 中的下载对话框

> ID：905028
> 
> 赞同：1
> 
> 时间：2009-05-25T01:21:38.507
> 
> 标签：javascript, tinymce

这几乎就是事情。

在 tinymce 中，我按下任何应该打开新窗口的东西，例如颜色选择器或链接对话框，FireFox/Chrome 似乎开始打开窗口，然后突然打开一个标准文件下载对话框，询问我是否是确定我想下载请求的 html 文件。

具有所有相同插件的相同 Firefox/Chrome 完全能够在其示例页面上正确运行所有 tinymce 示例。所以不是浏览器。

请求 URL 正确（如 LiveHTTPHeaders 所示）。

令人惊讶的是 IE7 没有这个问题。

所以我猜测它与 window.open 的行为有关，可能与 tinymce 本身无关。

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-25T01:35:42.347

*   您可能正在发送带有**Content-Type**标头的页面，浏览器无法将其识别为可以内联显示的内容 - 即，在浏览器中。您可能打算将其发送为`Content-Type: text/html`.

*   您可能正在发送带有**Content-Disposition**标头的页面，该标头指示浏览器不要内联显示它，例如`Content-Disposition: attachment`.

# c++ - cryptoapi 好用吗？

> ID：905029
> 
> 赞同：3
> 
> 时间：2009-05-25T01:22:07.213
> 
> 标签：c++, cryptography, cryptoapi

我正在编写一个加密程序，它执行诸如散列（sha1），加密，c++中win32的数字签名之类的东西是内置在cryptoapi安全中的，或者我应该使用像crypto++这样的其他库我需要最大的安全性并且适用于所有系统xp和vista（和可选的 2000），但同时我需要最小化 exe 大小，所以不想要不需要的外部库

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-25T01:31:48.970

定义“安全”。内置的 windows 加密 api 做了它宣传的事情，并且没有任何没有得到纠正的缺陷，至少我知道。“下一代加密货币”API 可能值得一看。

通常，在一个安全的程序中，问题在于人们对 API 所做的事情——密钥长度不足、以纯文本形式留下密钥等——这确实会造成麻烦，而不是供应商软件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-25T02:35:23.943

“安全是一个过程，而不是一个产品。” -[施奈尔](http://www.schneier.com/crypto-gram-0005.html)

散列、加密和签名等加密算法只是该过程的一部分：

*   你是如何存放你的钥匙的？它们会通过页面文件意外泄漏到磁盘上吗？
*   你如何生成随机数？糟糕的随机数真的会削弱一切。只需向[Debian](http://www.schneier.com/blog/archives/2008/05/random_number_b.html)或[Netscape](http://www.cs.berkeley.edu/~daw/papers/ddj-netscape.html)询问恐怖故事即可。
*   IT 管理员能否更新允许使用组策略的算法？
*   该解决方案是否支持外部强化设备？
*   你可以在内核模式下进行加密吗？
*   在受到攻击或弱点的情况下如何分发更新？

CAPI，尤其是[Vista 上的 CNG](http://msdn.microsoft.com/en-us/library/aa376210(VS.85).aspx)已经考虑过这些问题，总的来说还不错。您可能想观看CAPI 团队中的两个人制作的[这段视频，以了解是谁设计的。](http://channel9.msdn.com/posts/scobleizer/Tomas-Palmer-and-Tolga-Acar-Crypto-in-Windows-Vista/)

此外，如果人们可以物理访问您的机器并放入键盘记录器，那么所有这些都没有实际意义。

唉，这是一个过程……

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-25T02:25:52.183

“最大安全性”将由您如何使用您选择的加密 API 来定义。它**不会**由 API 本身定义。

只要 API 正确实现了各种加密算法，它就与任何其他加密 API 一样好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-25T02:13:13.473

如果您需要“最大”的安全性，您确实需要聘请专家来帮助您。正如查理·马丁指出的那样，您不仅可以通过滥用加密 API 来结束不安全的程序，还可以通过正确使用错误类型的加密，通过滥用正确使用的 API 的结果，甚至在其他部分的不安全设计你的程序。

这是软件行业中*极为*常见的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-24T08:56:26.333

加密 API 已弃用，在 Vista 中仍然有效，但您应该使用 CNG（下一代加密 API）。我不确定 Crypto API 在 Windows 7 中是否仍然可用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-11T22:10:14.150

出于安全考虑，请选择具有 fips 140-2 认证的库。之后，一切都取决于您是否安全地使用它。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-25T05:00:29.293

如果使用得当，CryptoAPI 将尽其所能。

你会发现有两种用于 Windows 加密的外部库：一种是重新实现所有内容的库，因为它们旨在支持多平台开发，另一种是在 CryptoAPI 之上为特定目的充当简化层。如果您属于前一类，请务必使用信誉良好的平台中立库。如果您发现在原始 CryptoAPI 中无法高效工作，请找到一个信誉良好的库，它可以在较少的步骤中完全满足您的需求。但是不要假设另一个库会因为它“更好”而解决您的安全风险；只要确保你使用的任何东西都是有信誉的。

正如许多其他人指出的那样，如果您真的需要“最大安全性”（无论您的“最大”级别是什么），您可能需要聘请专家。此外，您确实需要从整体角度看待安全性；加密数据只是一方面。

最后，不用说，甚至不要*梦想*编写自己的密码库，甚至不要实现现有算法。你会失败的，很惨。

# apache - 从网站 URL 中删除 index.php

> ID：905030
> 
> 赞同：3
> 
> 时间：2009-05-25T01:22:18.287
> 
> 标签：apache, .htaccess, mod-rewrite, url-rewriting, friendly-url

我正在使用 Kohana 框架（但我认为这与这个问题无关）并且可以像这样访问页面

```
http://www.example.com/articles/
http://www.example.com/index.php/articles/ 
```

现在，根据经验，我通常会尝试调整我的 .htaccess 以只允许一种方式进入页面，并静默重定向其他常见方式。

本质上，在上面的第一个 URL 中，地址实际上是在内部重定向到第二个示例。

我想要做的是强制任何第二种类型的 URL 变成第一种类型的 URL。我对 .htaccess 并不经常有信心，我的第一次尝试是抛出一些意想不到的结果（比如有时会出现无限循环）

这是我想出的

```
RewriteRule ^index\.php/(.*) $1 [NC,L,R=301] 
```

谁能告诉我我做错了什么，如果你也遇到这个问题，你是如何解决的？

**编辑**

我决定发布我的整个 .htaccess 以便可以检查我的所有重定向。

```
# Turn on URL rewriting
RewriteEngine On

# Installation directory
RewriteBase /~toberua/

# file not found page
    ErrorDocument 404 /404/
    ErrorDocument 403 /403/

# get people out of my directories
    Options -Indexes

# default page to load
    DirectoryIndex index.php

# add trailing slash if missing
    RewriteRule ^(([a-z0-9\-]+/)*[a-z0-9\-]+)$ $1/ [NC,R=301,L]

# redirect /favicon.ico requests
     RewriteCond %{REQUEST_URI} !^/images/layout/favicon\.ico [NC]
     RewriteCond %{REQUEST_URI} favicon\.(gif|ico|png|jpe?g) [NC]
     RewriteRule (.*) images/layout/favicon.ico [R=301,L]

# send /home back to TLD
     RewriteRule home/ $1  [NC,R=301,L]

# ensure there is no /index.php in the address bar
    RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /.*index\.php\ HTTP/
    RewriteRule ^(.*)index\.php$ $1 [R=301,L] # this was my attempt to stop /dir/index.php and make it simply /dir/

    RewriteRule ^index\.php/(.*) $1 [NS,NC,L,R=301]

# Protect application and system files from being viewed
RewriteRule ^(application|modules|system) - [F,L]

# Allow any files or directories that exist to be displayed directly
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# Rewrite all other URLs to index.php/URL
RewriteRule .* index.php/$0 [PT,L] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-25T01:29:58.287

试试这个：

```
RewriteRule ^index\.php/(.*) $1 [NS,NC,L,R=301] 
```

您没有处理的是*所有*请求都需要重写，并且当您进行重写时，它会生成一个子请求——这也需要重写。因此，您最终将 /articles 重写为 /index.php/articles，然后在该问题的子请求中，您将 /index.php/articles 重写为 /articles 并生成一个新的 301 重定向请求，不断重复。添加 NS 标志将使该规则不适用于子请求，我认为这应该可以解决您的问题，除非您还在 /articles -> /index.php/articles 重写上执行 301（但这将是疯狂的）。

# asp.net - ASP.NET：图像文本中的粗体字

> ID：905032
> 
> 赞同：0
> 
> 时间：2009-05-25T01:22:48.647
> 
> 标签：asp.net, image, string

我正在尝试将文本动态写入图像，但我想将句子中的选定单词加粗。我所做的是将字符串分成三个字符串，第一部分，要加粗的单词和句子的其余部分。但是，当我尝试将它们绘制到图像 ( `.DrawString()`) 上时，它们不会连接，而是相互覆盖。有什么方法可以在图像上重建句子（中间词加粗）？

谢谢！

编辑：示例代码：

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    Dim w As Word = Word.GetLastPublishedWord()
    Dim wordForm As String = Word.FindWordForm(w.Word, w.Sentence, Word.RegexOutputType.StandardString)
    Dim firstPart As String = Left(w.Sentence, w.Sentence.IndexOf(wordForm))
    Dim lastPart As String = Right(w.Sentence, (w.Sentence.Length - firstPart.Length - wordForm.Length))

    Dim sig As Image = Image.FromFile(Server.MapPath(ResolveUrl("~/images/sig.jpg")))
    Dim text As Graphics = Graphics.FromImage(sig)
    text.SmoothingMode = Drawing2D.SmoothingMode.AntiAlias
    Dim sentenceRec As New RectangleF(0, 0, 400, 75)
    Dim tagRec As New RectangleF(250, 75, 150, 25)
    text.DrawString(firstPart, New Font("Arial", 12, FontStyle.Regular), SystemBrushes.WindowText, sentenceRec)
    text.DrawString(wordForm, New Font("Arial", 12, FontStyle.Bold), SystemBrushes.WindowText, sentenceRec)
    text.DrawString(lastPart, New Font("Arial", 12, FontStyle.Regular), SystemBrushes.WindowText, sentenceRec)

    Response.ContentType = "image/jpeg"
    sig.Save(Response.OutputStream, ImageFormat.Jpeg)
    sig.Dispose()
    text.Dispose()
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-25T01:39:49.127

当您将文本写入图形对象时，您需要增加插入点。

```
PointF insertionPoint;
SizeF textWidth = g.MeasureString("First ", normalFont);

g.DrawString("First ", normalFont, Brushes.Black, insertionPoint);

insertionPoint.X += textWidth.Width;
textWidth = g.MeasureString("bolded", boldFont);
g.DrawString("bolded", boldFont, Brushes.Black, insertionPoint);

insertionPoint.X += textWidth.Width;
g.DrawString(" and remaining.", normalFont, Brushes.Black, insertionPoint); 
```

# css - 如何在 CSS 中使用“悬停”

> ID：905033
> 
> 赞同：30
> 
> 时间：2009-05-25T01:25:03.697
> 
> 标签：css, hover, anchor

我使用下面的代码来实现这个目标：

当鼠标悬停在锚点上时，下划线出现，

但它没有工作，

```
 <a class="hover">click</a>

    a .hover :hover{
        text-decoration:underline;
    } 
```

执行此操作的正确版本是什么？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2009-05-25T01:28:05.857

如果您希望在鼠标悬停在链接上时出现下划线，则：

```
a:hover {text-decoration: underline; } 
```

就足够了，但是如果您愿意，您也可以使用类名“悬停”，以下内容同样适用：

```
a.hover:hover {text-decoration: underline; } 
```

顺便说一句，可能值得指出的是，“hover”的类名并没有真正向元素添加任何内容，因为 的 psuedo-element 与 的`a:hover`做同样的事情`a.hover:hover`。除非它只是使用类名的演示。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-29T17:58:37.150

有很多方法可以做到这一点。如果你真的想在你的 A 元素中有一个“悬停”类，那么你必须这样做：

```
a.hover:hover { code here } 
```

再说一次，在那里有这样的 className 是不常见的，这就是您进行常规悬停的方式：

```
select:hover { code here } 
```

这里还有几个例子：

# 1

HTML：

```
<a class="button" href="#" title="">Click me</a> 
```

CSS：

```
.button:hover { code here } 
```

# 2

HTML：

```
<h1>Welcome</h1> 
```

CSS：

```
h1:hover { code here } 
```

:hover 是众多伪类之一。

例如，您可以更改，当鼠标悬停在元素上时，您可以控制元素的样式，单击它时以及之前单击它的时间。

HTML：

```
<a class="home" href="#" title="Go back">Go home!</a> 
```

CSS：

```
.home { color: red; }
.home:hover { color: green; }
.home:active { color: blue; }
.home:visited { color: black; } 
```

除了我作为示例给出的尴尬颜色之外，带有“home”类的链接默认为红色，鼠标悬停时为绿色，单击时为蓝色，单击后为黑色。

希望这可以帮助

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-28T03:39:49.197

不是答案，而是解释为什么您的 css 与 HTML 不匹配。

在 css 中，空间用作分隔符，告诉浏览器查看子项，所以你的 css

```
a .hover :hover{
   text-decoration:underline;
} 
```

意思是“查找一个元素，然后查找它的任何具有悬停类的后代，并查找具有悬停状态的那些后代的任何后代”并且将匹配此标记

```
<a>
   <span class="hover">
      <span>
         I will become underlined when you hover on me
      <span/>
   </span>
</a> 
```

如果你想匹配 <`a class="hover">I will become underlined when you hover on me</a>`你应该使用`a.hover:hover`，这意味着“寻找任何具有类悬停和悬停状态的元素”

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-05-25T01:28:11.223

```
a.hover:hover {
    text-decoration:underline;
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-05-25T01:27:40.990

a.hover:悬停

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-05-25T01:28:18.493

您需要连接选择器和伪选择器。您还需要一个样式元素来包含您的样式。大多数人使用外部样式表有很多好处（缓存一个）。

```
<a class="hover">click</a>

<style type="text/css">

    a.hover:hover {
        text-decoration: underline;

    }

</style> 
```

请注意：悬停类不是必需的，除非您仅定义某些链接以具有此行为（可能是这种情况）

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-07-03T14:06:34.113

href 是锚元素的必需属性，因此没有它，您不能期望所有浏览器都能平等地处理它。无论如何，我在评论中的某处读到，您只希望在悬停时给链接加下划线，而不是在其他地方加下划线。您可以使用以下方法来实现此目的，它仅适用于具有*悬停*类的链接：

```
<a class="hover" href="">click</a>

a.hover {
    text-decoration: none;
}

a.hover:hover {
    text-decoration:underline;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-25T01:28:33.097

你应该使用过：

```
a:hover {
    text-decoration: underline;
} 
```

`hover`是 CSS 中的伪类。无需分配班级。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-12-02T11:06:26.527

上次我正在处理一个很好的缺陷，并且想知道更多关于如何正确使用 A 标签链接和 IE 浏览器的悬停属性。对我来说奇怪的是，IE 无法基于简单的 A 选择器捕获 A 标签链接元素。因此，我发现了如何强制捕获 A 标签元素，并且发现我们必须使用更具体的 CSS 选择器。下面是一个示例 - 它非常完美：

```
li a[href]:hover {...} 
```

# jmockit - ClassFormatError 使用 JMockit 和 EMMA

> ID：905052
> 
> 赞同：4
> 
> 时间：2009-05-25T01:34:22.163
> 
> 标签：jmockit, emma

我正在尝试使用 EMMA 来测量一些使用 JMockit 的 JUnit 测试的覆盖率。但是，当我在使用 EMMA 进行检测后尝试运行 JMockit 测试时，大约四分之一的测试失败并出现以下错误：

```
com.logstorage.engine.sensor.SensorManagerTest.setUpBeforeClass(SensorManagerTest.java:98)
    java.lang.ClassFormatError
    at sun.instrument.InstrumentationImpl.redefineClasses0(Native Method)
    at sun.instrument.InstrumentationImpl.redefineClasses(InstrumentationImpl.java:150)
    at mockit.internal.RedefinitionEngine.redefineMethods(RedefinitionEngine.java:152)
    at mockit.internal.RedefinitionEngine.redefineMethods(RedefinitionEngine.java:139)
    at mockit.internal.RedefinitionEngine.redefineMethods(RedefinitionEngine.java:73)
    at mockit.Mockit.setUpMock(Mockit.java:235)
    at com.myapp.MyTest.setUpBeforeClass(MyTest.java:98) 
```

我看不到任何关于哪些测试失败和哪些没有失败的模式。我想这只是 JMockit 中的一个错误，但有人知道解决方法吗？

我发现了一个非常相似的问题，叫做“Getting ClassFormatError with EMMA?” 但该解决方案对我不起作用（我没有使用任何 reentrant=true 模拟方法）。还有其他想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-29T02:13:19.707

我一直遇到同样的问题 - 这似乎已经为我解决了，希望也能帮助其他人。

如果你正在运行这个`ant`，请确保你没有`vars`在你的`javac`目标`debuglevel`参数中。以下目标将导致错误。

```
<javac srcdir="${src}" destdir="${bin}" debug="on" debuglevel="lines,source,vars" nowarn="true" /> 
```

将其更改为：

```
<javac srcdir="${src}" destdir="${bin}" debug="on" debuglevel="lines,source" nowarn="true"> 
```

这可能是一个 JMockit 错误 - 非常微妙且难以发现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-30T22:27:26.023

我今天才看到这个问题，但是如果可以的话，请给我一些在使用 EMMA 运行时抛出 ClassFormatError 的测试，我会尝试在 JMockit 中找到错误。

顺便说一句，您是否尝试过使用 JMockit Coverage？只需将 jmockit-coverage.jar 添加到类路径中，看看你得到了什么。通常，这将在工作目录下的“coverage-report”目录中生成（无需任何额外配置）一个漂亮的 HTML 覆盖率报告。没有比这更容易的了！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-09-23T14:27:16.753

我的团队也有同样的问题。具体案例是：使用 jMockit 模拟来自在 TeamCity 下运行的单元测试套件中的类中的静态方法，并使用 EMMA 作为覆盖工具。解决方案如下：

为每个模拟静态方法的测试添加一个拆卸方法：

```
@After
public void tearDown() throws Exception {
  Mockit.tearDownMocks(ClassWithStaticMethods.class);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-16T05:19:57.480

将 jmockit 从 1.5 更新到任何最新版本。

# linux - 非阻塞 getch()、ncurses

> ID：905060
> 
> 赞同：29
> 
> 时间：2009-05-25T01:38:00.813
> 
> 标签：linux, g++, blocking, ncurses, getch

我在阻止 ncurses 的 getch() 时遇到了一些问题。默认操作似乎是非阻塞的（或者我错过了一些初始化）？我希望它像 Windows 中的 getch() 一样工作。我试过各种版本的

```
timeout(3000000);
nocbreak();
cbreak();
noraw();
etc... 
```

（不是同时）。如果可能的话，我宁愿不（明确）使用 any `WINDOW`。`while`围绕 getch() 循环，检查特定的返回值也可以。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2009-05-25T02:11:53.743

curses 库是一揽子交易。如果没有正确初始化库，您不能只抽出一个例程并希望获得最好的结果。这是一个正确阻止的代码`getch()`：

```
#include <curses.h>

int main(void) {
  initscr();
  timeout(-1);
  int c = getch();
  endwin();
  printf ("%d %c\n", c, c);
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-05-25T01:44:02.037

从[手册页](http://www.manpagez.com/man/3/curs_inopts/)（强调添加）：

> `timeout`and例程为`wtimeout`给定窗口设置阻塞或非阻塞读取。**如果`delay`为负，则使用阻塞读取（即，无限期地等待输入）。**

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2009-05-25T02:08:07.243

你需要调用`initscr()`或`newterm()`初始化 curses 才能工作。这对我来说很好：

```
#include <ncurses.h>

int main() {
    WINDOW *w;
    char c;

    w = initscr();
    timeout(3000);
    c = getch();
    endwin();

    printf("received %c (%d)\n", c, (int) c);
} 
```

# css - 在 Internet Explorer 7 和 8 中无法控制 tds 的宽度

> ID：905067
> 
> 赞同：0
> 
> 时间：2009-05-25T01:44:26.573
> 
> 标签：css, internet-explorer

我使用以下方法设置宽度：

```
style="width: 200px" 
```

当浏览器窗口很窄时，td 是正确的宽度。当我使窗口变宽时，td 会比我设置的更宽。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-25T01:58:47.810

我的猜测是您在实际表格上指定了宽度，并且表格中的单元格不等于表格的宽度。因此，Internet Explorer 和我怀疑大多数其他浏览器必须补偿和加宽所有单元格，包括您的固定宽度的单元格。

要么从表格中删除宽度规范，要么将表格中的一个单元格更改为更灵活的内容，例如 width="10%"。

但是，我这可能不是一个好方法，尽管它可能会让你走上正确的轨道。@Darko Z 是对的，我们需要更多代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-25T02:00:05.967

尝试使用[colgroups](http://www.w3.org/TR/html4/struct/tables.html#h-11.2.4)。

此外，您可以尝试使用其他样式属性，例如dysplay 等。我相信如果您为每列提供固定宽度，则必须为表格元素设置固定宽度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-25T02:13:50.710

几乎可以肯定，你在这里不走运。

浏览器将一堆嵌套的自动调整表视为一件大事。它试图找到考虑到单元格内容（最小和最大）宽度和各种设置的最佳布局，就像你拥有的那样。没有任何设置被认为是一成不变的。

因此，如果您有简单且不矛盾的要求，他们将受到尊重。否则，所有赌注都取消。

# iphone - Sqlite 数据库表：数组可以成为记录的一列吗？

> ID：905078
> 
> 赞同：0
> 
> 时间：2009-05-25T01:55:07.083
> 
> 标签：iphone, sqlite

我正在设计一个 iPhone 应用程序，它需要将数据存储到 Sqlite 数据库中。

表的一条记录看起来像 -

```
@interface Record:NSObject {
    NSInteger primaryKey;
    NSString *name;
    NSInteger priority;
    NSMutableArray *items;
}; 
```

请注意，记录中的一列是一个数组，数组的大小不是固定的。大小可以为零或任何正整数。

我的问题是：当我设计 Sqlite 表时，我可以指定一个数组作为记录的一列吗？如果否，我应该如何设计这张桌子？

更新：谢谢你的回答。看来我的问题的答案是否定的。如果是这样，我可以使用其他归档方法，比如 Property List 或 NSKeyedArchiver 来实现它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-25T02:01:03.343

你不能这样做并被规范化。您自己对“不固定”大小的要求告诉您这是不可能的。无论您如何编码或选择哪种数据结构，这都是正确的。这是关系数据库的本质。您需要阅读[规范化](http://www.deeptraining.com/litwin/dbdesign/FundamentalsOfRelationalDatabaseDesign.aspx)以完全理解它。

听起来像是一对多的外键关系。您需要一个表用于记录，另一个用于该数组中的任何对象。第二个表将有一个外键指向第一个表的主键。

我会推荐一个比“记录”更具描述性的名称。这对我来说似乎太笼统了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-26T16:55:52.653

您可以将数组序列化到磁盘并在数据库中存储该列的文件名/路径。

显然，您将无法查询数组中的任何内容，但是...

# mysql - 如何在 mySQL 中对动态生成的特定顺序进行排序？

> ID：905080
> 
> 赞同：3
> 
> 时间：2009-05-25T01:55:20.937
> 
> 标签：mysql, sql, join, sql-order-by

我一直在为此绞尽脑汁，但我没有取得任何进展。我不太擅长 SQL，所以我希望答案很简单，我只是不知道。

我有 2 个表：一个称为“图像”，其中包含我想要的数据，用主键“imageID”组织。另一个称为“productPhotos”，它包含两个字段（加上一个主键）：imageID 和 productID。因此，对于给定的产品，可能有多个图像，并且给定的图像可能用于表示多个产品。

到目前为止，它工作得很好，但问题来了。我有一个动态生成的产品 ID 列表，我想加载代表这些产品的所有图像。而且我不仅要加载它们，而且我希望它们按我列表中产品的顺序排列。

因此，如果我的产品列表是“5,2,4”，我希望我的输出列表首先包含产品 5 的所有图像，然后是产品 2 的所有图像，然后是产品 4 的所有图像。我没有t 特别关心子组内的顺序。

获取正确的图像非常简单，但是以正确的顺序获取它们是可恶的。我想出了如何以正确的顺序获取我想要的图像的 ID，但实际上在没有单独的 MySQL 调用的情况下获取这些图像到目前为止让我感到困惑。我尝试设置一个临时表，将我想要的 ID 存储在 @variable 中，以及 ORDER BY FIELD() 和 ORDER BY FIND_IN_SET() 的许多不同变体。

这是我到目前为止所得到的： 从 productPhotos 中选择 imageID WHERE productID IN (5,2,4) ORDER BY FIELD(specificProductUID, 5,2,4);

这成功地以正确的顺序返回了一组 imageID，但我一直难以从那里获取从图像表中提取这些 imageID 的数据。我知道只需在 PHP 中使用两个单独的数据库调用（一个用于获取 imageID，另一个用于加载图像），我就可以很容易地做到这一点，但是（我认为）这意味着性能方面的巨大打击，而且看起来就像应该有更好的方法来做到这一点。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-25T02:10:26.990

```
SELECT images.*
FROM images
INNER JOIN productPhotos ON images.imageID = productPhotos.imageID
WHERE productID in (5, 2, 4)
ORDER BY FIELD(specificProductUID, 5,2,4); 
```

# c# - nHibernate Validator 自定义 IMessageInterpolator

> ID：905081
> 
> 赞同：1
> 
> 时间：2009-05-25T01:55:33.290
> 
> 标签：c#, nhibernate, validation

有没有人设法获得一个自定义 IMessageInterpolator 来启用错误消息的自定义。我已尝试按照此网页上的说明进行操作，但无济于事。 [http://codelog.climens.net/2009/03/04/nhibernate-validator-custom-messages/](http://codelog.climens.net/2009/03/04/nhibernate-validator-custom-messages/)

查看代码 DefaultMessageInterpolator 似乎非常适合框架，所以我缺少什么。

我已经包含了我的单元测试来展示我是如何实现它的。

```
namespace TestValidator
{
    [TestClass]
    public class UnitTest1
    {
        [TestMethod]
        public void TestValidator()
        {
            var customer = new Customer();

            ClassValidator classValidator = new ClassValidator(customer.GetType());
            InvalidValue[] validationMessages = classValidator.GetInvalidValues(customer);

            Assert.IsTrue(validationMessages.Length == 1);
            Assert.IsTrue(validationMessages[0].Message == "may not be null or empty");
        }

        [TestMethod]
        public void TestCustomInterpolator()
        {
            ValidatorEngine ve = new ValidatorEngine();
            NHVConfiguration nhvc = new NHVConfiguration();
            nhvc.Properties[Environment.MessageInterpolatorClass] = typeof(CustomMessageInterpolator).AssemblyQualifiedName;
            ve.Configure(nhvc);

            var customer = new Customer();

            ClassValidator classValidator = new ClassValidator(customer.GetType());
            InvalidValue[] validationMessages = classValidator.GetInvalidValues(customer);

            Assert.IsTrue(validationMessages.Length == 1);
            // THIS TEST FAILS!!
            Assert.IsTrue(validationMessages[0].Message == "CustomMessageInterpolator");
        }
    }

    public class Customer
    {
        public virtual int CustomerId { get; set; }

        [NotNullNotEmpty]
        public string CustomerName { get; set; }
    }

    public class CustomMessageInterpolator : IMessageInterpolator
    {
        public CustomMessageInterpolator()
        {

        }

        public string Interpolate(string message, IValidator validator, IMessageInterpolator defaultInterpolator)
        {
            return "CustomMessageInterpolator";
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-10-12T04:17:29.407

我终于得到了这个工作。在我的存储库中调用验证器之前，我明确地创建了插值器并将其作为参数传递。

```
ClassValidator classValidator = new ClassValidator(obj.GetType(), null, new CustomMessageInterpolator(), 
CultureInfo.CurrentCulture, ValidatorMode.UseAttribute);
InvalidValue[] validationMessages = classValidator.GetInvalidValues(obj); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-05T15:23:11.213

我查看了您的问题，最有趣的是：

```
Assert.AreEqual(typeof(CustomMessageInterpolator), ve.Interpolator.GetType()); 
```

是真的。我认为问题在于 CFG 已经配置了 DefaultMessageInterpolator，并且

```
ve.Configure(nhvc); 
```

没有效果，因为 ClassValidator 使用了这个配置的默认值 DefaultMessageInterpolator。这就是为什么对于 Climens，它在 App.config 中工作，而不是在 nhvalidator.cfg.xml 中工作的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T17:30:34.660

我正在使用流利的 Nhibernate 来注册 NHibernate 验证器，并且消息插值器已正确集成。要记住的关键是 Shared Engine Provider 提供了对 Validator Engine 的 Singleton 访问。如果您尝试在您的应用程序中实例化一个新的验证器引擎，它不会将消息插值器配置为配置它的唯一方法是在初始化期间，如下所示。

```
 Environment.SharedEngineProvider = new NHibernateSharedEngineProvider();

        var fluentConfiguration = new FluentConfiguration();

        fluentConfiguration
            .SetMessageInterpolator<CustomMessageInterpolator>()
            .SetDefaultValidatorMode(ValidatorMode.OverrideAttributeWithExternal)
            .IntegrateWithNHibernate
            .ApplyingDDLConstraints()
            .And
            .RegisteringListeners();

        var validatorEngine = Environment.SharedEngineProvider.GetEngine();
        validatorEngine.Configure(fluentConfiguration);
        configuration.Initialize(validatorEngine); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-25T10:47:44.760

如果您需要验证器在运行时检查实体，而不是创建验证器的新实例，您可以从配置 NHV 时注册的引擎请求验证器。

```
var engine = NHibernate.Validator.Cfg.Environment.SharedEngineProvider.GetEngine();
return engine.GetClassValidator(YourEntityType); 
```

# tfs - TFS 工作项选项卡可见性

> ID：905082
> 
> 赞同：0
> 
> 时间：2009-05-25T01:56:47.720
> 
> 标签：tfs

在自定义 TFS 工作项时，是否可以根据另一个控件的值显示/隐藏选项卡控件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-25T19:36:27.340

经过相当多的研究，没有直接的方法可以做到这一点。一种可能性是编写一个自定义控件，但这不符合我的需求。

在我的情况下，我正在处理一个自定义的需求工作项，该工作项也具有来自 CaliberRM 的字段。其中一些字段仅适用于某些类型的需求。我使用的解决方案是在应该只对某些类型的需求可用的字段上使用WhenNot 规则。该规则具有关联的 Empty 和 ReadOnly 规则。现在会发生什么，如果选择了适用的需求类型，那么这些字段是可用的；否则字段不可用于输入并被清空。

注意：您可以做的另一件事是使用 When 规则来指定基于另一个字段的选择所需的字段。奇迹般有效。

# asp.net - HtmlSelect 与 DropDownList

> ID：905083
> 
> 赞同：1
> 
> 时间：2009-05-25T01:57:02.400
> 
> 标签：asp.net

在 HtmlSelect 和 DropDownList 之间，哪个性能更好（初始化和渲染更快）？有什么指导方针什么时候使用？

另一个问题是，如果我想从 JScript 访问选择控件的值，我是否只能使用 HtmlSelect（因为 ID 不会更改），或者是否有任何方法可以强制 DropDownList 使用我的 ID 而不是像“ ctl00_MainContainerContentPlaceHolder_Day1DropDownList”？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-25T03:23:16.233

由于没有人解决这个问题的性能方面，我想我会试一试。我最初的假设是这两个选项中的任何一个都会为您带来相似的性能，因为它们会产生几乎相同的呈现 HTML。但是，我整理了以下 .aspx 页面来测试我的理论。

```
public enum ListType
{
    DropDownList,
    HtmlList
}

public partial class ListControlRenderTimeComparison : System.Web.UI.Page
{
    private Dictionary<ListType, Action<Int32>> _listMap = new Dictionary<ListType, Action<Int32>>();

    protected void Page_Load(object sender, EventArgs e)
    {
        InitializeListMap();

        for (int i = 0; i < ControlsToRender; i++)
        {
            _listMap[ListToRender](NumberOfItems);
        }
    }

    private void InitializeListMap()
    {
        _listMap.Add(ListType.DropDownList, AddDropDownList);
        _listMap.Add(ListType.HtmlList, AddHtmlList);
    }

    private void AddDropDownList(Int32 controlsToAdd)
    {
        var ddl = new DropDownList();

        for (int i = 0; i < controlsToAdd; i++)
            ddl.Items.Add((i + 1).ToString());

        form1.Controls.Add(ddl);
    }

    private void AddHtmlList(Int32 controlsToAdd)
    {
        var ddl = new HtmlSelect();

        for (int i = 0; i < controlsToAdd; i++)
            ddl.Items.Add((i + 1).ToString());

        form1.Controls.Add(ddl);
    }

    private Int32 NumberOfItems
    {
        get
        {
            Int32 timesToRender;

            return Int32.TryParse(Request.QueryString["numItems"], out timesToRender) ? timesToRender : 1;
        }
    }

    private Int32 ControlsToRender
    {
        get
        {
            Int32 timesToRender;

            return Int32.TryParse(Request.QueryString["numControls"], out timesToRender) ? timesToRender : 1;
        }
    }

    private ListType ListToRender
    {
        get
        {
            String listType = Request.QueryString["listType"];

            if (String.IsNullOrEmpty(listType)) return ListType.DropDownList;

            return (ListType)Enum.Parse(typeof (ListType), listType, true);
        }
    }
} 
```

我用不同的输入测试了这些控件中的每一个，发现跟踪在每种情况下几乎相同。与 DropDownList 相比，HtmlOption 控件在性能上为您带来了微小的优势，但即使每个控件呈现 100 个，每个控件具有 100 个项，差异也只有百分之几秒。

所以最后......坚持使用 DropDownList 控件，因为它有更多的选项可供您使用。如其他答案所示，可以轻松缓解 ASP.Net 运行时修饰 ID 的问题。此外，您可以设计 JavaScript 函数，使其可以对作为参数传入的 ID 进行操作。

```
function doStuff(strId)
{
    document.getElementById(strId); //Straight up, no lime
    $get(strId); // Asp.Net Ajax Client Side Framework
    $(strId); // JQuery
} 
```

如果你这样做，那么很容易绑定到客户端事件（onclick、onmouseover、onmouseout 等），以便在许多地方重用你的行为。

干杯，乔什

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-25T02:05:15.627

我不认为你可以停止控件的名称生成。该框架将根据内容占位符生成一个 ID，以确保每个控件都可以通过唯一的 ID 访问。您可以使用后面的代码访问此 ID

```
DropDownList.ClientID 
```

和

```
DropDownList.UniqueID 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-25T02:18:25.757

```
<script type="text/javascript">
function Display()
{
 alert($('<%=this.FindControl("abc").ClientID%>').value);
}
</script>

<form id="form1" runat="server">
<div>
<asp:Panel runat="server" ID="container">
  <asp:TextBox ID="abc" runat="server" Text="Some text"></asp:TextBox>
  <br />
  <asp:Button ID="btn1" runat="server"  Text="Submit!!" OnClientClick="Display();"/>
</div>
</asp:Panel> 
```

这可能很有用。即使您重新排列容器，您也不必担心框架生成的 id。

# delphi - Delphi 4 的代码分析工具

> ID：905085
> 
> 赞同：2
> 
> 时间：2009-05-25T01:59:28.197
> 
> 标签：delphi, code-analysis

我需要一个支持 Delphi 4 的**代码分析工具**。

我尝试了以下一些工具：

1.  代码治疗器（来自 Delphi 5 的支持）
2.  帕斯卡分析仪

您能否说一下哪个是分析**Delphi 4**代码文件的最佳工具。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-25T05:38:23.783

Pascal Analyzer 支持除最新版本之外的所有 Delphi 版本，来自它的 FAQ 页面：

> Pascal Analyzer 支持哪些版本？
> 
> ```
> * Borland Pascal 7 (or earlier)
> * Delphi 1
> * Delphi 2
> * Delphi 3
> * Delphi 4
> * Delphi 5
> * Delphi 6
> * Delphi 7
> * Delphi 8 .NET
> * Delphi 2005 Win32
> * Delphi 2005 .NET
> * Delphi 2006 Win32 (also Turbo Delphi for Win32)
> * Delphi 2006 .NET    (also Turbo Delphi for .NET)
> * Delphi 2007 Win32
> * Delphi 2007 .NET 
> ```

**编辑：**[有关其他分析工具，](https://stackoverflow.com/questions/532986/are-there-any-static-code-analysis-tools-for-delphi-pascal)请参阅此问题

定义最好的还有一些取决于你的代码和情况，要选择最好的，你必须下载每一个并决定它是否符合你的需要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-26T01:29:57.610

另一种选择是[源监视器](http://www.campwoodsw.com/)，或者您可以更新到具有静态代码分析的新版本的 Delphi。我当然会推荐全部尝试，尤其是 Pascal Analyzer & Source Monitor，因为它们是免费的。

# c# - 在 VB.NET/C# 中，如何将 SQL 表模式从 DB 复制到另一个？

> ID：905090
> 
> 赞同：1
> 
> 时间：2009-05-25T02:02:44.430
> 
> 标签：c#, sql-server, vb.net

我想使用 vb.net 或 c# 将表模式从一个数据库移动到另一个数据库。我怎样才能做到这一点？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-25T02:07:58.103

[本文](http://www.codeproject.com/Articles/26459/Copy-Database-Schema-and-Data-Using-SQL-Server-Man)展示了如何使用 SQL Server 管理对象 (SMO)、C# 编写脚本、复制数据库架构（有或没有数据）。

```
public class DBHelper
{
    #region Private Variables
    private static string sourceSQLServer;
    private static string destinationSQLServer;
    private static string sourceDatabase;
    private static string destinationDatabase;
    #endregion 

    #region Properties

    /// <summary>
    /// SourceSQLServer Holds Instance Name of Source SQL Server Database Name
    /// </summary>
    public static string SourceSQLServer
    {
        get { return DBHelper.sourceSQLServer; }
        set { DBHelper.sourceSQLServer = value; }
    }

    /// <summary>
    /// DestinationSQLServer Holds Instance Name of Destination SQL Server Database Name
    /// </summary>
    public static string DestinationSQLServer
    {
        get { return DBHelper.destinationSQLServer; }
        set { DBHelper.destinationSQLServer = value; }
    }

    /// <summary>
    /// SourceDatabase Holds Source Database 
    /// </summary>
    public static string SourceDatabase
    {
        get { return DBHelper.sourceDatabase; }
        set { DBHelper.sourceDatabase = value; }
    }

    /// <summary>
    /// DestinationDatabase Holds Destination Database Name
    /// </summary>
    public static string DestinationDatabase
    {
        get { return DBHelper.destinationDatabase; }
        set { DBHelper.destinationDatabase = value; }
    }
    #endregion 

    #region Static Methods
    /// <summary>
    ///  CopyDatabase Copies Database 
    /// </summary>
    /// <param name="CopyData">True if Want to Copy Data otherwise False</param>
    public static void CopyDatabase(bool bCopyData)
    {
        //Set Source SQL Server Instance Information
        Server server = new Server(DBHelper.SourceSQLServer); 

        //Set Source Database Name [Database to Copy]
        Database database = server.Databases[DBHelper.SourceDatabase];            

        //Set Transfer Class Source Database
        Transfer transfer = new Transfer(database);

        //Yes I want to Copy All the Database Objects
        transfer.CopyAllObjects = true;

        //In case if the Destination Database / Objects Exists Drop them First
        transfer.DropDestinationObjectsFirst = true;

        //Copy Database Schema
        transfer.CopySchema = true;

        //Copy Database Data Get Value from bCopyData Parameter
        transfer.CopyData = bCopyData;

        //Set Destination SQL Server Instance Name
        transfer.DestinationServer = DBHelper.DestinationSQLServer;

        //Create The Database in Destination Server
        transfer.CreateTargetDatabase = true;      

        //Set Destination Database Name
        Database ddatabase = new Database(server, DBHelper.DestinationDatabase);

        //Create Empty Database at Destination
        ddatabase.Create();

        //Set Destination Database Name
        transfer.DestinationDatabase = DBHelper.DestinationDatabase;

        //Include If Not Exists Clause in the Script
        transfer.Options.IncludeIfNotExists = true; 

        //Start Transfer
        transfer.TransferData();

        //Release Server variable
        server = null;
    }
    #endregion 
} 
```

# java - 测试复杂数据场景

> ID：905093
> 
> 赞同：1
> 
> 时间：2009-05-25T02:05:27.560
> 
> 标签：java, testing

我正在开发一个为用户运行一系列财务计算的 Java Web 应用程序。运行财务计算时，大约使用 30 个不同的输入来计算最多 18 年的 15 个不同的值（最多 15*18 个预期值）。如您所知，有大量信息需要计算和验证。

我正在寻找的是关于如何准备测试数据（模拟 30 个不同的输入）、将其加载到一系列对象中并通过计算器运行对象以生成输出的建议，然后可以将其与预期值进行比较。

我试图存根数据库，但这最终需要**永远**。嘲笑一切似乎同样乏味。如果可能的话，我想避免外部数据库依赖。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-25T02:37:10.413

听起来 FitNesse ( [http://fitnesse.org/](http://fitnesse.org/) ) 可能就是您要找的东西。您将在 FitNesse 中使用您的输入和预期输出设置一个 html 表。当您运行测试时，FitNesse 会通知您实际输出是否与您的预期输出匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-05T07:33:07.557

我将确定每个输入参数的数量限制（边界值）、实际值和零值附近的值。然后我会使用 allpairs 算法（[http://www.satisfice.com/tools.shtml](http://www.satisfice.com/tools.shtml)）将它们全部组合起来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-25T02:09:11.283

您最好的选择是使用可以从池中随机选择值并从中组装输入的工厂。您可以根据需要从总体中生成尽可能多的候选人。坚持他们以及预期的结果。如果数据库不符合您的喜好，也许 XML 或纯文本序列化可以。

如果你做 TDD，你可以运行一些，看看预期的结果应该是什么。用手工计算检查一些，以确保它们没问题。然后使用工厂生成您需要的尽可能大的测试集。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-25T03:20:53.227

如果您在 Db 中有数据，并且只想从中创建测试数据，以便您的测试运行不依赖于外部数据库。您可以查看 DbUnit 框架并可以从 DB 中填充 XML 中的示例数据。这些 XML 可以用于测试目的，这些 XML 可以通过常用的解析器数量轻松转换为 java 对象。

# c# - 使用 MEF 进行部件特定设置

> ID：905096
> 
> 赞同：3
> 
> 时间：2009-05-25T02:06:36.700
> 
> 标签：c#, configuration, mef

例如，我们有一个接口，该接口将由负责跨网络或 COM 端口的数据传输的类实现。

我们暂时称它为 IDataTransporter，我们有 2 个实现：

ComPortDataTransporter 和 TcpDataTransporter。

显然，这两个需要非常不同的配置。

第一个具有诸如 buadrate、开始/停止位等设置...第二个具有诸如 ip 地址和端口之类的设置。

是否有任何最佳实践来处理这个问题？最后，我们希望用户能够加载“部件”并对其进行一次配置。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-25T02:26:08.517

也许您可以将某种配置部分与您的传输器部分一起导出。

假设您的主机应用程序定义了一个接口：

```
public interface IDataTransporterSettings 
{
    // any common settings are defined here
} 
```

...并假设任何 IDataTrasporter 都具有该类型的公共属性：

```
public interface IDataTransporter
{
    IDataTransporterSettings Settings { get; }
} 
```

...那么您的“设置”可能是一个具有与每个设置匹配的一组公共属性的类：

```
public class TcpDataTransporterSettings : IDataTransporterSettings
{
    public string Address { get; set; }
    public int Port { get; set; }
} 
```

然后，您的 TcpDataTransporter 类将始终从其 Settings 属性中读取以确定其地址/端口/任何内容。

现在，您的主机应用程序可以使用反射来检查其每个导入的传输器部件的设置，并为每个公共可设置属性（字符串的 TextBox、整数的 NumericUpDown 等）显示适当的控件。

我想通过一些工作，您可以通过 Attributes 为每个属性添加人类可读的描述，这样您就可以为 UI 中的每个控件定义标签。

我还没有完全考虑到这一点，当然我也没有在任何地方实现它，但听起来它可能是一种为每个导入的部件提供灵活设置的方法。

# iphone - 保存视图状态 iphone sdk

> ID：905113
> 
> 赞同：1
> 
> 时间：2009-05-25T02:17:06.587
> 
> 标签：iphone, cocoa, cocoa-touch

目前我创建了 2 个视图，在第一个视图上，有一个下一步按钮，单击它后，它将转到第二个视图。

然后在第二个视图中，我在标签中设置了一些值，当我单击返回时，它将返回到第一个视图。

问题：现在我回到第一个视图，如果我再次单击下一步按钮，我在第二个视图中设置的标签值将丢失。

问题：如何保存状态，以便当我单击下一步按钮时，它会检测到标签是先前设置的，因此会显示回先前的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-25T02:52:51.023

这取决于。有很多方法。

我希望每次将第二个视图推送到屏幕上时，都会创建它的一个新实例。在任何情况下，无论您是否是，您都应该将标签的值保存在模型中，而不是期望视图保留数据（请参阅：MVC 设计模式）。然后，在`-viewDidLoad:`第二个视图控制器的函数中，将标签的值设置为之前的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-25T03:23:24.050

MVC 是你的朋友。

您的视图仅显示存储在模型中的数据。因此，如果您显示人员信息，则数据将存储在人员对象中。您的视图将引用它正在显示的人员对象，以便它可以读取数据。View 不会在 person 对象上设置任何数据，这是通过控制器完成的。您的控制器通过持有对两者的引用来桥接您的模型（数据）和视图。

用户点击显示的项目（例如修改用户名），这由控制器处理，控制器用新名称更新人的模型。一旦动作完成，控制器会要求视图重新显示模型中的数据。

查看 Apple 参考资料中的 Model-View-Controller 和 UIViewController。

# php - Zend Framework 是否有特定的方法来防止 CSRF/XSRF？

> ID：905118
> 
> 赞同：2
> 
> 时间：2009-05-25T02:24:22.623
> 
> 标签：php, zend-framework, csrf

[跨站点请求伪造](http://en.wikipedia.org/wiki/Cross-site_request_forgery)（CSRF 或 XSRF）攻击会引发您认为可信的用户在您的 Web 应用程序中进行未经授权的操作。

这肯定是我们想要阻止的事情，我特别使用 Zend Framework。是否有 Zend Framework 方法来防止 CSRF/XSRF？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-25T02:30:55.827

是的。[Zend_Form_Element_Hash](http://www.zendframeworkinaction.com/2009/03/14/zend_form_element_hash-and-crsf/)

# apache - .htaccess 边缘案例

> ID：905119
> 
> 赞同：2
> 
> 时间：2009-05-25T02:24:58.707
> 
> 标签：apache, .htaccess, url-rewriting, friendly-url

我在 .htaccess 中使用这些规则和条件来打开这些

```
http://www.example.com/index.php/about/history
http://www.example.com/about/history/index.php 
```

进入

```
http://www.example.com/about/history 
```

.htaccess

```
# ensure there is no /index.php in the address bar
    RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /.*index\.php\ HTTP/
    RewriteRule ^(.*)index\.php$ $1 [R=301,L,NS]

    RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /(.*)index\.php(.*)\ HTTP/ [NC]
    RewriteRule ^index\.php/(.*) $1 [NS,NC,L,R=301] 
```

除非有一种情况，如果 URL 是

```
http://www.example.com/about/index.php/history/ 
```

这将导致无限循环的重定向。现在我知道这可能是一种罕见的情况，但如果可能的话，我希望它不要发生。我怎样才能改变我的规则以适应这种情况？

[此处有关我的 .htaccess 的更多信息](https://stackoverflow.com/questions/905030/removing-index-php-from-website-urls/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-25T04:08:45.693

如果我理解正确，您只想在 index.php 出现的任何地方删除它？在这种情况下，您的解决方案过于复杂。你可能想要类似的东西

```
RewriteRule ^(.*)index\.php/(.*)$ $1$2 [NS,NC,L,R=301] 
```

这应该是唯一的规则，也不需要 RewriteCond

# c - C/C++ 中的鲁棒人脸检测？

> ID：905121
> 
> 赞同：19
> 
> 时间：2009-05-25T02:25:45.493
> 
> 标签：c, algorithm, computer-vision, face-detection

我正在寻找一个强大的人脸检测算法/库，最好是用 C 语言（C++ 也可以；如果需要，我可以移植其他语言）。我过去使用过[OpenCV](http://opencv.willowgarage.com/)的实现，但我不认为它对旋转是不变的。不需要是实时的，但也不应该太慢（也许每张照片一两秒就可以了）。寻求高可靠性，而不是很多误报。有谁知道任何好的实现？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-09-27T06:33:58.710

在[OpenCV Wiki上查看有关使用](http://opencv.willowgarage.com/wiki/FaceDetection)[Haar-like features](http://en.wikipedia.org/wiki/Haar-like_features)进行人脸检测的页面。

[@floppydisk](https://stackoverflow.com/questions/905121/robust-face-detection-in-c/911877#911877)：同一个人发布了另一个[项目](http://www.codeproject.com/KB/audio-video/haar_detection.aspx)，该项目实现了这些类似 Haar 的面部检测功能。

这个概念并不难理解，你甚至可以自己实现它。也许最困难的部分是构建增强分类器的级联（但 openCV 已经很容易实现所有这些！）

可以在人脸检测中使用的其他一些可以使仿射变换不变的方法包括：

*   带有 SVD/PCA 的[特征脸](http://en.wikipedia.org/wiki/Eigenface)
*   傅里叶描述符
*   统计形状模型（特别是[本文](http://citeseer.ist.psu.edu/326991.html)）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-25T06:48:04.217

您可以尝试查看此库：

[http://vasc.ri.cmu.edu/NNFaceDetector/](http://vasc.ri.cmu.edu/NNFaceDetector/)

它显示在旋转的测试用例之一中。正如你所看到的，它是作为一篇论文完成的，所以如果你愿意，你也可以阅读那篇论文。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-26T17:45:15.063

在 Code Project 上，有人发布了面部识别项目的[详细描述](http://www.codeproject.com/KB/audio-video/face_detection.aspx)，以及该项目的一些 C++ 源代码和他使用的库的链接。他的算法侧重于使用颜色差异来查找皮肤斑块，然后测试 19x19 像素的图片是否与人脸匹配。我不熟悉面部识别的所有库，但阅读了他的一些代码，许多方法和函数的名称中都有 CV，所以他可能正在使用 OpenCV 库，但我不熟悉它，所以我我不能 100% 确定。但是，他确实提供了很多关于他的应用程序和源文件的解释，所以这可能是一个很好的起点。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-09-27T06:02:35.907

马克 - 你说 OpenCV 可能不会旋转不变

什么会阻止您进行四次比较，每次比较后旋转 90°？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-25T02:31:06.933

我唯一使用过的是 Visionics FaceIt。它运作得相当好，但最后我知道离自由非常、非常、非常远（无论是在啤酒中还是在演讲中）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-09-27T07:53:49.660

我没有使用 Haar 特征进行人脸检测，但据我所知，它在检测人脸方面可能比 eigenfaces/pca 更有效。

我遇到了关于面部旋转问题的问题。我的想法是也许你可以尝试形状匹配并尝试纠正对象。尝试将其定向为正常的头部纵横比。在我的 Eigenface 项目中，我从未走得那么远，但请告诉我它是如何工作的。这在matlab中应该很容易。:P

# java - Java 异常循环和弃用（或者它是 URLEncoding 的东西？）

> ID：905126
> 
> 赞同：0
> 
> 时间：2009-05-25T02:30:41.333
> 
> 标签：java, performance, exception, urlencode, malformedurlexception

我刚刚写了一个关于我如何达到这一点的完整简介，但认为发布代码并保留它更容易:)

据我所知，test3() 的性能应该与 test1() 相同 - 唯一的区别是捕获异常的位置（在 test1() 的调用方法内，在 test3() 的被调用方法内）

为什么 test3() 经常在 test1() 和 test2() 之间花费时间来完成？

```
import java.io.UnsupportedEncodingException;
import java.net.URLEncoder;

public class Test {

    public static void main(String[] args) {
        warmup(); 
        test1(2500000); // Exception caught inside the loop
        test2(2500000); // Exception caught outside the loop
        test3(2500000); // Exception caught "inside" the loop, but in the URLEncoder.encode() method
    }

    private static void warmup() {
        // Let URLEncoder do whatever startup it needs before we hit it
        String encoding = System.getProperty("file.encoding");
        try {
            URLEncoder.encode("ignore", encoding);
        } catch (UnsupportedEncodingException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    private static void test1(int count) {
        String encoding = System.getProperty("file.encoding");
        long start = System.currentTimeMillis();
        for (int i = 0; i < count; i++) {
            try {
                URLEncoder.encode("test 1 " + i, encoding);
            } catch (UnsupportedEncodingException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
        long end = System.currentTimeMillis();
        System.out.println("Performed " + count + " encodings trying to catch each in " + (end - start) + "ms");
    }

    private static void test2(int count) {
        String encoding = System.getProperty("file.encoding");
        long start = System.currentTimeMillis();
        try {
            for (int i = 0; i < count; i++) {
                URLEncoder.encode("test 2" + i, encoding);
            }
        } catch (UnsupportedEncodingException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        long end = System.currentTimeMillis();
        System.out.println("Performed " + count + " encodings trying to catch all in " + (end - start) + "ms");
    }

    private static void test3(int count) {
        long start = System.currentTimeMillis();
        for (int i = 0; i < count; i++) {
            URLEncoder.encode("test 3 " + i);
        }
        long end = System.currentTimeMillis();
        System.out.println("Performed " + count + " encodings with a deprecated method in " + (end - start) + "ms");
    }

} 
```

运行它会给我（Windows XP 上的 JDK 1.6.0_13）输出：

```
Performed 2500000 encodings trying to catch each in 4906ms
Performed 2500000 encodings trying to catch all in 2454ms
Performed 2500000 encodings with a deprecated method in 2953ms 
```

因此，响应非常接近（我们正在谈论一些无关紧要的事情），但是我很好奇！

**之后...**

人们建议有 JVM 优化阻碍 - 我同意。因此，我将每个测试分解为它自己的类/主方法，并且每个测试都单独进行。结果：

```
1 - Performed 2500000 encodings trying to catch each in 5016ms
1 - Performed 5000000 encodings trying to catch each in 7547ms
1 - Performed 5000000 encodings trying to catch each in 7515ms
1 - Performed 5000000 encodings trying to catch each in 7531ms

2 - Performed 2500000 encodings trying to catch all in 4719ms
2 - Performed 5000000 encodings trying to catch all in 7250ms
2 - Performed 5000000 encodings trying to catch all in 7203ms
2 - Performed 5000000 encodings trying to catch all in 7250ms

3 - Performed 2500000 encodings with a deprecated method in 5297ms
3 - Performed 5000000 encodings with a deprecated method in 8015ms
3 - Performed 5000000 encodings with a deprecated method in 8063ms
3 - Performed 5000000 encodings with a deprecated method in 8219ms 
```

有趣的观察：

*   捕获每个调用与捕获循环之外的所有内容之间的差距在它自己的 JVM 中减少了（我假设由于已执行的其他迭代，优化不会在所有测试合一的情况下全部完成）
*   我这边的 try/catch 与 URLEncoder.encode() 中的 try/catch 之间的差距现在要小得多（超过 5000000 次迭代半秒），但仍然始终如一......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-25T06:24:29.483

按照您发布的顺序运行它：

> 执行 2500000 次编码试图在 34208 毫秒内捕获每个编码 执行 2500000 次
> 编码试图在 31708 毫秒内捕获所有
> 编码 使用不推荐使用的方法在 30738毫秒内执行 2500000 次编码

颠倒顺序：

> 使用不推荐使用的方法在 32598 毫秒内执行 2500000 次
> 编码 尝试在 31239 毫秒内捕获所有编码执行 2500000 次
> 编码 尝试在 31208 毫秒内捕获每个编码执行2500000 次编码

因此，我实际上并不认为您看到的是您认为看到的内容（当然，test1 并不比 test3 慢 66%，这是您的基准测试所建议的）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-25T08:59:40.537

是的，你有你的解释，我认为：

由于涉及额外的方法调用，3 比 1 稍慢。

2 比任何一个都快，因为它不会在每个循环中“设置”和“拆除”与异常捕获相关的字节码。你可以破解打开字节码看看与javap的区别——见[http://www.theserverside.com/tt/articles/article.tss?l=GuideJavaBytecode](http://www.theserverside.com/tt/articles/article.tss?l=GuideJavaBytecode)

使用 2 还是 1 取决于您想要哪种行为，因为它们不等价。我会选择 1 而不是 3，因为这样您就不会使用不推荐使用的方法，这比微小的速度增加更重要——但碰巧 1 无论如何都会更快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-25T09:15:58.273

请纠正我，但是 test2 for 循环只执行了 1 步，因为抛出异常并且 test1 在循环内捕获了异常并执行了 2500000 次。

当您在循环外捕获异常时，循环将不会重新开始。打印出“int i”以确定循环执行了多少步。

第三个是最慢的，因为该方法将调用委托给已弃用的方法。

# c - 确定 explorer.exe 是否作为 Windows shell 运行？

> ID：905131
> 
> 赞同：0
> 
> 时间：2009-05-25T02:34:49.997
> 
> 标签：c, winapi, windows-shell, windows-explorer

我需要确保它`explorer.exe`作为系统外壳运行。我需要做的是：

*   `Winlogon\Shell`用_`explorer.exe`
*   运行`explorer.exe`（作为外壳）
*   用我自己的 shell 覆盖当前 shell。

最后两步之间是一场比赛：

*   如果我用自己的 shell 过快地覆盖当前 shell，则只会打开“我的文档”窗口。

所以问题是，是否有任何事件/互斥体/回调我可以调用以确保资源管理器被初始化为 shell？

我设法做的最好的事情是等待托盘窗口，例如：

```
while(!FindWindow("Shell_TrayWnd", NULL)) { 
     sleep(250);
} 
```

看起来有点草率，有没有更好的方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-06-03T19:58:57.180

我什至不会尝试这样做。您应该创建一个新的 winsta0 桌面 (Win32 API CreateDesktop)，在该桌面上启动您的 Kiosk 应用程序并切换到它。这样，您就可以保留默认桌面，运行资源管理器，并且可以在需要时返回它。我们在我们建立的信息亭项目中取得了很大的成功。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-07-30T23:47:57.273

更好的方法（如实际记录的那样）是创建一个顶级窗口并等待“TaskbarCreated”广播。这样你也摆脱了 Sleep() 调用。

广播记录[在这里](http://msdn.microsoft.com/en-us/library/cc144179%28VS.85%29.aspx#Taskbar_Creation_Not)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-07T18:37:15.383

您还没有解释为什么需要 3 个步骤，“kiosk 软件”不是解释。

您是否尝试过像 litestep 和其他桌面替换软件一样在 system.ini 中简单地设置 shell？如果您必须来回切换，请考虑使用[ShellOn](http://www.indexo.pionexnet.co.uk/surf.design/shellon/features.htm)或[LiteSpawn 之](http://www.hellbent.com/digitaloxide/litespawn/readme.html)类的 shell 切换器，它们是为此任务编写的。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-06-02T21:07:55.563

你为什么不看正在运行的进程？不应列出在第 1 步之前的 explorer.exe，因为它不是默认 shell。第 2 步，您启动它并观察该过程，一旦可用，您就可以更改它。

我不确定您是否在 .NET 框架上，但如果您是 StartInfo 类上的事件应该足以满足您的需求。

# asp.net-ajax - 更新 ASP.NET Ajax

> ID：905138
> 
> 赞同：0
> 
> 时间：2009-05-25T02:38:20.520
> 
> 标签：asp.net-ajax

**更新：** 根据 Slace 的回复，我现在正在使用最新的官方版本女巫，其中包括我所追求的功能，但我仍然在下面遇到同样的问题。

全部，

我正在开发一个使用日历弹出位置的应用程序，该位置不在 ASP.NET Ajax 的发布版本中。我已将 ASP.NET ajax 更新到最新的开发版本，当我创建一个具有所需功能的新应用程序时，它可以完美运行。

但是在我试图更新的应用程序中它不起作用。

我相信这是因为我需要更新我的应用程序正在使用的 Javascript 文件（IE CalendarBehavior.js）。但是我找不到这些文件的位置。

这些文件的位置以及如何将 ASP.NET Ajax 更新到最新版本以便可以使用 CalendarPositon 元素？

干杯，迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-25T03:02:47.213

如果它不在 AJAX 控制工具包的当前版本中，我不会期望它会起作用。它可能只是部分实施，或者只是刚刚开始。我强烈建议您只使用官方版本（前几天有一个）。

也就是说，您可以设置该`ScriptPath`属性以指定您希望 JS 位于何处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-25T05:52:45.243

对，

通过 Slace 的一些意见，我自己设法找到了解决方案。原来这是我电脑上的一些主要版本问题。所以我卸载了所有 ASP.NET Ajax 组件并使用最新的官方版本重新安装。这解决了我所描述的问题并允许我访问新功能。

# ruby-on-rails - ActiveRecord::Base#find 上的 proxy_reflection 等效项？

> ID：905139
> 
> 赞同：2
> 
> 时间：2009-05-25T02:39:16.837
> 
> 标签：ruby-on-rails, activerecord

我正在尝试制作一个助手，它会根据 ActiveRecord::Base#find 或关联返回的对象类型自动选择正确的部分。不幸的是，我不能只查看返回数组的第一个元素，因为在这种情况下我也想选择正确的元素。如果你调用一个关联，它会返回一个带有 proxy_reflection 方法的代理，这正是我想要的，但它在 ActiveRecord::Base#find :( 的结果中不存在。

例子：

```
association_posts = Author.find(1).posts
association_posts.proxy_reflection.class_name # Returns "Post"
all_posts = Post.find(:all)
all_posts.proxy_reflection # no method exception, what do I call here instead? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-12-18T13:07:40.937

我不确定这是否是您想要的，但请尝试：

```
all_posts.first.class 
```

# compression - 有没有办法读取压缩存档的属性？

> ID：905141
> 
> 赞同：0
> 
> 时间：2009-05-25T02:40:19.410
> 
> 标签：compression, zip

是否有任何工具/简单的方法来读取属性（例如：压缩级别、字典大小、字长等）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-25T02:48:46.897

如果您想获取 .Zip 存档的属性，可以尝试我的[Zip-Parser](http://github.com/alanhaggai/Zip-Parser/tree/master "邮编解析器")。它是用 Perl 编写的，您可能需要安装一些模块。

`'Compressed Data'`记得在`zip_parser.conf`前面加上一个注释掉`#`，否则你会打印很多压缩数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-25T03:15:20.743

在任何 Unix 平台上解压缩、修改、重新压缩，`zip`都`unzip`应该是你所需要的。在 Windows 上，我不是最新的，但曾经最好的版本是 PKZIP（但您可能需要为此付费）。当然 cygwin 应该包括 zip 和 unzip；我不知道mingw。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T22:10:44.890

在[python](http://www.python.org)中，[tarfile](http://docs.python.org/2/library/tarfile.html)和[zipfile](http://docs.python.org/2/library/zipfile.html)模块支持 gzipped/bzipped tar 文件和 zip 文件，分别保存多磁盘 zipfile，目前尚不支持。

# string - 我在这个冒泡排序代码中找不到逻辑错误

> ID：905142
> 
> 赞同：1
> 
> 时间：2009-05-25T02:41:25.350
> 
> 标签：string, parsing, list, python-3.x

我正在尝试做一个简单的冒泡排序代码来熟悉列表/字符串操作和方法的使用，但是由于某种原因，当我尝试遍历列表中的每个值以删除空格和非整数值时，它跳过了一些。我什至还没有进入气泡排序部分..

```
#test data:  45,5j, f,e,s , , , 45,q,

    if __name__ == "__main__":
getList = input("Enter numbers separated by commas:\n").strip()
listOfBubbles = getList.split(',')
print (listOfBubbles)
i = 0
for k in listOfBubbles:
    listOfBubbles[i] = k.strip()
    print ("i = {0} -- Checking '{1}'".format(i,listOfBubbles[i]))
    if listOfBubbles[i] == '' or listOfBubbles[i] == ' ':
        del listOfBubbles[i]
        i -= 1
    else:
        try:
            listOfBubbles[i] = int(listOfBubbles[i])
        except ValueError as ex:
            #print ("{0}\nCan only use real numbers, deleting '{1}'".format(ex, listOfBubbles[i]))
            print ("deleting '{0}', i -= 1".format(listOfBubbles[i]))
            del listOfBubbles[i]
            i -= 1
        else:
            print ("{0} is okay!".format(listOfBubbles[i]))
    i += 1

print(repr(listOfBubbles)) 
```

输出：

```
 Enter numbers separated by commas:
45,5j, f,e,s , , , 45,q,
['45', '5j', ' f', 'e', 's ', ' ', ' ', ' 45', 'q', '']
i = 0 -- Checking '45'
45 is okay!
i = 1 -- Checking '5j'
deleting '5j', i -= 1
i = 1 -- Checking 'e'
deleting 'e', i -= 1
i = 1 -- Checking ''
i = 1 -- Checking '45'
45 is okay!
i = 2 -- Checking 'q'
deleting 'q', i -= 1
[45, 45, ' ', ' 45', 'q', ''] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-25T02:59:48.340

更pythonic的方式怎么样？

```
#input
listOfBubbles = ['45', '5j', ' f', 'e', 's ', ' ', ' ', ' 45', 'q', '']
#Copy input, strip leading / trailing spaces. Remove empty items
stripped = [x.strip() for x in listOfBubbles if x.strip()]    

# list(filtered) is ['45', '5j', 'f', 'e', 's', '45', 'q']
out = []
for val in filtered:
  try:
    out.append(int(val))
  except:
    # don't do anything here, but need pass because python expects at least one line
    pass 
# out is [45, 45] 
```

最后，跳到你的正确答案

```
out.sort() 
```

*更新* 澄清通行证

```
>>> for i in range(0,5):
        pass
        print i

0
1
2
3
4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-25T02:47:09.117

永远不要改变你正在循环的那个列表——在循环内部`for k in listOfBubbles:`，你正在删除那个列表中的一些项目，这会扰乱内部循环逻辑。有许多替代方法，但最简单的解决方法是循环您要更改的列表的*副本*`for k in list(listOfBubbles):`： . 可能还有更多问题，但这是第一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-25T02:55:22.547

没关系，修好了。我将循环从 for.. 更改为 while..

```
if __name__ == "__main__":
    getList = input("Enter numbers separated by commas:\n").strip()
    listOfBubbles = getList.split(',')
    print (listOfBubbles)
    i = 0
    while i < len(listOfBubbles):
        listOfBubbles[i] = listOfBubbles[i].strip()
        print ("i = {0} -- Checking '{1}'".format(i,listOfBubbles[i]))
        if listOfBubbles[i] == '' or listOfBubbles[i] == ' ':
            del listOfBubbles[i]
            i -= 1
        else:
            try:
                listOfBubbles[i] = int(listOfBubbles[i])
            except ValueError as ex:
                #print ("{0}\nCan only use real numbers, deleting '{1}'".format(ex, listOfBubbles[i]))
                print ("deleting '{0}', i -= 1".format(listOfBubbles[i]))
                del listOfBubbles[i]
                i -= 1
            else:
                print ("{0} is okay!".format(listOfBubbles[i]))
        i += 1

    print(repr(listOfBubbles)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-25T02:57:07.427

您不能使用迭代器从列表中删除，因为长度会发生变化。

相反，您必须在 for 循环（或 while 循环）中使用索引。

一旦你删除了一个项目，你需要再次遍历列表。

伪代码：

```
再次：
对于 i = 0 到 list.count - 1
{
  如果条件那么
    删除列表[i]
    再次转到；
}

```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-25T13:39:47.977

如果您要在遍历列表时从列表中删除，请以相反的顺序遍历列表：

```
for( i = myList.length - 1; i >= 0; i-- ) {
   // do something
   if( some_condition ) {
      myList.deleteItem( i );
   }
} 
```

这样您就不会跳过任何列表项，因为缩短列表不会影响任何未来的迭代。当然，上面的代码片段假设 list/array 类支持 deleteItem 方法，并做了适当的事情。

# regex - sed初学者：更改文件夹中的所有事件

> ID：905144
> 
> 赞同：120
> 
> 时间：2009-05-25T02:42:57.690
> 
> 标签：regex, linux, shell, sed

我需要对文件夹（及其子文件夹）中的所有文件进行正则表达式查找和替换。执行此操作的 linux shell 命令是什么？

例如，我想在所有文件上运行它，并用新的替换文本覆盖旧文件。

```
sed 's/old text/new text/g' 
```

* * *

## 回答 #1

> 赞同：177
> 
> 时间：2009-05-25T02:51:41.417

仅使用 sed 是无法做到的。您至少需要一起使用 find 实用程序：

```
find . -type f -exec sed -i.bak "s/foo/bar/g" {} \; 
```

此命令将为`.bak`每个更改的文件创建一个文件。

**笔记：**

*   command的`-i`参数`sed`是一个 GNU 扩展，因此，如果您使用 BSD 运行此命令，`sed`您需要将输出重定向到一个新文件，然后重命名它。
*   该`find`实用程序没有`-exec`在旧的 UNIX 框中实现参数，因此，您需要使用 a`| xargs`来代替。

* * *

## 回答 #2

> 赞同：68
> 
> 时间：2015-01-21T14:58:15.890

我更喜欢用`find | xargs cmd`over，`find -exec`因为它更容易记住。

此示例在当前目录或当前目录下的 .txt 文件中将“foo”全局替换为“bar”：

```
find . -type f -name "*.txt" -print0 | xargs -0 sed -i "s/foo/bar/g" 
```

如果您的文件名不包含空格等时髦字符，则可以省略`-print0`and选项。`-0`

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-05-25T03:12:43.790

对于可移植性，我不依赖 sed 特定于 linux 或 BSD 的特性。相反，我使用`overwrite`Kernighan 和 Pike 关于 Unix 编程环境的书中的脚本。

然后命令是

```
find /the/folder -type f -exec overwrite '{}' sed 's/old/new/g' {} ';' 
```

`overwrite`脚本（我到处使用）是

```
#!/bin/sh
# overwrite:  copy standard input to output after EOF
# (final version)

# set -x

case $# in
0|1)        echo 'Usage: overwrite file cmd [args]' 1>&2; exit 2
esac

file=$1; shift
new=/tmp/$$.new; old=/tmp/$$.old
trap 'rm -f $new; exit 1' 1 2 15    # clean up files

if "$@" >$new               # collect input
then
    cp $file $old   # save original file
    trap 'trap "" 1 2 15; cp $old $file     # ignore signals
          rm -f $new $old; exit 1' 1 2 15   # during restore
    cp $new $file
else
    echo "overwrite: $1 failed, $file unchanged" 1>&2
    exit 1
fi
rm -f $new $old 
```

这个想法是它仅在命令成功时才会覆盖文件。`find`在你不想使用的地方也很有用

```
sed 's/old/new/g' file > file  # THIS CODE DOES NOT WORK 
```

因为shell在`sed`读取文件之前会截断文件。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-25T02:50:57.797

我可以建议（备份文件后）：

```
find /the/folder -type f -exec sed -ibak 's/old/new/g' {} ';' 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-06-08T13:32:42.113

示例：将 /app/config/ 文件夹及其子文件夹下的所有 ini 文件的 {AutoStart} 替换为 1：

```
sed 's/{AutoStart}/1/g' /app/config/**/*.ini 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-09-16T11:05:29.530

这对我有用（在 mac 终端上，在你不需要的 Linux 上`'' -e`）：

```
sed -i '' -e 's/old text/new text/g' `grep 'old text' -rl *` 
```

该命令`grep 'old text' -rl *`列出了工作目录（和子目录）中存在“旧文本”的所有文件。然后在 sed 中传递。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-01-28T16:57:12.810

如果您担心会破坏您不小心没有考虑到的文件，您可以`grep`先使用递归选项运行以查看哪些文件可能会被更改：

```
grep -r 'searchstring' * 
```

然后不难将可以在每个文件上运行替换的东西放在一起：

```
for f in $(grep -r 'searchstring' *)
do
    sed -i -e 's/searchstring/replacement/g' "$f"
done 
```

（仅对*GNU sed*有效- POSIX 兼容性需要进行调整，因为`-i`inplace 选项是 GNU 扩展）：

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2009-05-25T02:55:16.633

可能想试试[我的批量搜索/替换 Perl 脚本](http://lostsouls.org/grimoire_convert_all)。与链式实用程序解决方案相比具有一些优势（例如不必处理多个级别的 shell 元字符解释）。

```
#!/usr/bin/perl

use strict;

use Fcntl qw( :DEFAULT :flock :seek );
use File::Spec;
use IO::Handle;

die "Usage: $0 startdir search replace\n"
    unless scalar @ARGV == 3;
my $startdir = shift @ARGV || '.';
my $search = shift @ARGV or
    die "Search parameter cannot be empty.\n";
my $replace = shift @ARGV;
$search = qr/\Q$search\E/o;

my @stack;

sub process_file($) {
    my $file = shift;
    my $fh = new IO::Handle;
    sysopen $fh, $file, O_RDONLY or
        die "Cannot read $file: $!\n";
    my $found;
    while(my $line = <$fh>) {
        if($line =~ /$search/) {
            $found = 1;
            last;
        }
    }
    if($found) {
        print "  Processing in $file\n";
        seek $fh, 0, SEEK_SET;
        my @file = <$fh>;
        foreach my $line (@file) {
            $line =~ s/$search/$replace/g;
        }
        close $fh;
        sysopen $fh, $file, O_WRONLY | O_TRUNC or
            die "Cannot write $file: $!\n";
        print $fh @file;
    }
    close $fh;
}

sub process_dir($) {
    my $dir = shift;
    my $dh = new IO::Handle;
    print "Entering $dir\n";
    opendir $dh, $dir or
        die "Cannot open $dir: $!\n";
    while(defined(my $cont = readdir($dh))) {
        next
            if $cont eq '.' || $cont eq '..';
        # Skip .swap files
        next
            if $cont =~ /^\.swap\./o;
        my $fullpath = File::Spec->catfile($dir, $cont);
        if($cont =~ /$search/) {
            my $newcont = $cont;
            $newcont =~ s/$search/$replace/g;
            print "  Renaming $cont to $newcont\n";
            rename $fullpath, File::Spec->catfile($dir, $newcont);
            $cont = $newcont;
            $fullpath = File::Spec->catfile($dir, $cont);
        }
        if(-l $fullpath) {
            my $link = readlink($fullpath);
            if($link =~ /$search/) {
                my $newlink = $link;
                $newlink =~ s/$search/$replace/g;
                print "  Relinking $cont from $link to $newlink\n";
                unlink $fullpath;
                my $res = symlink($newlink, $fullpath);
                warn "Symlink of $newlink to $fullpath failed\n"
                    unless $res;
            }
        }
        next
            unless -r $fullpath && -w $fullpath;
        if(-d $fullpath) {
            push @stack, $fullpath;
        } elsif(-f $fullpath) {
            process_file($fullpath);
        }
    }
    closedir($dh);
}

if(-f $startdir) {
    process_file($startdir);
} elsif(-d $startdir) {
    @stack = ($startdir);
    while(scalar(@stack)) {
        process_dir(shift(@stack));
    }
} else {
    die "$startdir is not a file or directory\n";
} 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2020-06-15T17:26:29.350

```
for i in $(ls);do sed -i 's/old_text/new_text/g' $i;done 
```

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2016-08-21T07:08:47.237

In case the name of files in folder has some regular names (like file1, file2...) I have used for cycle.

```
for i in {1..10000..100}; do sed 'old\new\g' 'file'$i.xml > 'cfile'$i.xml; done 
```

# iphone - iPhone 上导航栏按钮的默认颜色是什么？

> ID：905158
> 
> 赞同：8
> 
> 时间：2009-05-25T02:50:49.560
> 
> 标签：iphone, colors, uinavigationbar

我正在向我的 iPhone 应用程序中的导航栏添加分段控件。默认情况下，分段控件的颜色与导航栏的颜色相匹配。我想将分段控件的颜色与导航栏中的其他按钮（如后退导航按钮）相匹配。

谁能告诉我一个 RGB 值（或系统颜色）与 UIButtonBarItems 的默认颜色相匹配，这些 UIButtonBarItems 已添加到 UINavigationBar，样式为 UIBarStyleDefault？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-05-25T13:06:12.893

过了一会儿，我意识到 iPhone 正在为按钮应用蓝色渐变，所以色调需要非常灰色。我终于找到了这个非常完美的 HSV 组合。请注意，根据文档，所有值都指定为 0 到 1 之间的浮点值。

```
Hue: 0.6

Saturation: 0.33

Value: 0.69

Alpha: 0 
```

我希望这可以为其他开发人员节省几个小时的工作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-25T12:50:48.210

像这样设置色调颜色：

`self.navigationController.navigationBar.tintColor = nil`

它还会为您提供默认颜色和渐变阴影。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-01-05T12:13:16.577

我用这个：

```
[UIColor colorWithHue:0.6 saturation:0.33 brightness: 0.65 alpha:1.0]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-25T04:33:25.880

教别人钓鱼。

检查您的系统是否有一个名为 Digital Color Meter 或类似的应用程序。您可以使用它从屏幕上的颜色中获取 RGB 值。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-19T08:43:28.630

为了节省更多时间，RGB 值是：

```
RGB(118, 141, 176). 
```

如果要为按钮栏的“向下”状态重新创建颜色，则 RGB 值为：

```
RGB(0, 23, 73). 
```

我不确定渐变，但这是基色。

# parsing - HTML 解析器：达到重定向限制错误

> ID：905168
> 
> 赞同：0
> 
> 时间：2009-05-25T02:55:50.423
> 
> 标签：parsing

我正在使用 DOM Simple HTML Parser，并返回此错误：

警告：file_get_contents(h**p://info.xxxx.org/eng/txt_detail.jsp?cid=2_8&channelid=3&primarykeyvalue=132234142&libid=2&doctype=1) [function.file-get-contents]：打开流失败：已达到重定向限制

有人请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-25T04:04:55.897

听起来您获得了很多 302 重定向状态。当页面想要设置 cookie 但您不接受它时，可能会发生这种情况，因此它会重定向您并尝试再次设置 cookie，但失败并重定向您...

当我尝试访问该 URL 时，我得到一个 404 状态代码。

您使用什么语言和其他库？

# cocoa - 如何将视图连接到图形上下文？

> ID：905169
> 
> 赞同：2
> 
> 时间：2009-05-25T02:56:28.800
> 
> 标签：cocoa, cocoa-touch, xcode

我是 XCode 的新手，所以我一直在攀登 Quartz2D 的学习曲线。我知道每当需要刷新视图的图形时都会调用视图的 drawRect 方法，并且 setNeedsDisplay 方法会激活重绘。

但是我找不到明确的解释图形上下文和特定视图之间的关系。图形上下文本身显然不是视图的实例变量，所以如果我想修改一个视图，并且我使用 CGContext... 方法创建了一个复杂的路径，那么需要什么代码来将该图形上下文与我的视图结合起来希望改变？

提前感谢您对此问题的任何指导。

乔丹纳

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-25T03:33:19.333

您可以创建图形上下文，但这仅在复杂的绘图操作中需要。对于大多数情况，它是为您完成的。你只需要通过调用来获取上下文`UIGraphicsGetCurrentContext()`。

当框架确定一个视图需要重绘时（由于各种原因，其中一个原因是您通过调用 来指示它`setNeedsDisplay:`），它将为该视图生成（或恢复）一个图形上下文，并在调用之前使其成为当前上下文`-drawRect:`。然后，您的工作就是在您提供的上下文中进行绘画。之后，框架的问题是剪辑生成的上下文，将其与其他上下文混合，最后将其绘制到屏幕内存中。

`-drawRect:`如果可以的话，请小心不要进行过多复杂的绘图。iPhone 没有台式机那么强大的 CPU，建议您使用图像而不是路径来完成大部分绘图工作。Apple 甚至从 Mac 中删除了许多更方便的绘图包装器，几乎是故意劝阻开发人员不要过多使用 Core Graphics。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-25T03:33:49.693

我假设您正在子类的`-(void)drawRect:(CGRect)rect`方法中创建路径`UIView`。

在 drawRect 中，您可以通过调用 (`CGContextRef)UIGraphicsGetCurrentContext(void);`

[来自第 5 讲 cs193p 的](http://www.stanford.edu/class/cs193p/cgi-bin/index.php)示例：

```
- (void)drawRect:(CGRect)rect {
    CGContextRef context = UIGraphicsGetCurrentContext();
    [[UIColor grayColor] set];
    UIRectFill ([self bounds]);
    CGContextBeginPath (context);
    CGContextMoveToPoint (context, 75, 10);
    CGContextAddLineToPoint (context, 10, 150);
    CGContextAddLineToPoint (context, 160, 150);
    CGContextClosePath (context);
    [[UIColor redColor] setFill];
    [[UIColor blackColor] setStroke];
    CGContextDrawPath (context, kCGPathFillStroke);
} 
```

# html - 如何将 default.html 的字符编码设置为 UTF-8？

> ID：905173
> 
> 赞同：17
> 
> 时间：2009-05-25T02:57:41.887
> 
> 标签：html, character-encoding

我花了最后几个小时让我的网站验证*HTML 4.01 Strict*，实际上我已经成功了，但是仍然有一个我无法摆脱的警告。警告是：

> 字符编码不匹配！
> 
> HTTP 标头 (iso-8859-1) 中指定的字符编码与元素 (utf-8) 中的值不同。我将使用 HTTP 标头 (iso-8859-1) 中的值进行此验证。

有问题的页面是[www.dubiousarray.net/default.html](http://www.dubiousarray.net/default.html)。正如您从页面源代码中看到的那样，我有以下元元素：

```
<meta http-equiv="Content-Type" content="text/html;charset=utf-8"> 
```

并且我已确保 default.html 文件以 UTF-8 编码保存。奇怪的是站点中的所有其他页面都在没有此警告的情况下进行验证，并且它们具有相同的元标记并且以完全相同的方式保存。我很确定这与服务器配置有关。.htaccess 文件现在看起来像这样：

```
# Use PHP 5 as default
AddHandler application/x-httpd-php5 .php
AddDefaultCharset UTF-8 
```

但是我已经尝试了[此页面](http://www.askapache.com/htaccess/setting-charset-in-htaccess.html)上显示的所有修复程序，但没有一个有效。我怎样才能摆脱这个警告？

在 Firefox 中，如果您右键单击页面并选择“查看页面信息”，*default.html*将显示为 ISO-8859-1，而所有其他页面显示为 UTF-8。

所有 html 文件都以完全相同的方式创建和保存（字符编码设置为 UTF-8 没有[BOM](https://en.wikipedia.org/wiki/Byte_order_mark)），但*default.html*是唯一不显示为 UTF-8 的文件。*所以我假设服务器正在对default.html*文件做一些特殊的事情，尽管我不确定是什么，因为*.htaccess*文件中没有它的迹象。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2009-05-25T13:30:00.240

您需要替换 HTTP 级别的标头。

这应该有效：

```
<?php
    header('Content-type: text/html; charset=utf-8');
?> 
```

请注意，以上内容必须是您文件中的第一件事。没有例外。见*[标题](http://us2.php.net/manual/en/function.header.php)*。

有关如何更改不同 Web 堆栈中的字符集标头的一般信息，请参阅*[设置 HTTP 字符集参数](http://www.w3.org/International/O-HTTP-charset)*。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-25T03:07:00.760

服务器在 HTTP 标头中清楚地将文档标记为 ISO-8859-1。尝试使用 UTF-8 编码和适当的编辑器保存 default.html。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-25T04:20:17.830

好的，我已经为我的问题提出了部分解决方案。由于它只是导致警告的*default.html*文件，因此我认为服务器因其名称而对其进行了特殊处理。所以我创建了一个名为*home.html*的新文件，其内容与*default.html*文件相同，并将*.htaccess*文件指向新文件（见下面的第 3 行）。

```
# Use PHP5 as default
AddHandler application/x-httpd-php5 .php
DirectoryIndex home.html
AddDefaultCharset UTF-8 
```

这解决了问题，现在所有文件都被识别为 UTF-8。我仍然不确定服务器对*default.html*文件做了什么或相关设置在哪里，但随着我的问题消失，我会忘记这一点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-07-07T02:42:15.457

将其包含在您的代码中：

```
<meta charset="utf-8" />
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-25T03:06:20.560

删除`AddDefaultCharset`并`.htaccess`检查编码。

我保存了您网页的 HTML 源代码并打开了它。编码被检测为 UTF-8。但是，在查看 Web 服务器提供的同一网页时，编码为 ISO-8859-1。这就是为什么我建议删除以前的冗余规则。

# websphere - 什么类型的业务/技术使用可以证明 Websphere 许可证的高成本是合理的？

> ID：905179
> 
> 赞同：1
> 
> 时间：2009-05-25T03:05:03.197
> 
> 标签：websphere

在我之前工作过的一家大公司中，一位经理购买了超过 50,000 美元的 Websphere 生产许可证，尽管他只需要一个容器就可以在一个小型 Intranet 系统上运行几个 servlet。

假设我们同意这是矫枉过正，至少可以说，并且像 Tomcat 这样的免费 servlet 运行程序可能就足够了，那么哪种类型的业务/技术使用可以证明 Websphere 等应用程序服务器的高成本是合理的？我认为**集成项目**是最有可能的候选者——即在需要使用 Java/Websphere 作为桥梁或包装器将多个遗留系统粘合在一起的环境中。还有什么好的案例吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-25T03:47:01.857

我不一定同意以下观点，但那里有一个相当强烈的论点......

```
<devil's advocate> 
```

在查看许可时要记住的关键事项不一定是技术成本，而是在凌晨 2 点有人指责你的成本，那时你想要钱的一切都已经消失了。

有很多公司已经在这种方法上建立了他们的商业模式（例如 Sun - 抛开关于这种方法是否真的有效的明显争论，RedHat 等）。

IBM 可以为其产品提供的好处并不能真正归结为技术本身（正如您所说，您可以以更好的价格获得可以完成相同工作的东西），更多的是关于他们的业务流程产品。如果您所处的环境需要可预测的正常运行时间、可扩展性等（例如银行业）

IBM 的产品经过了相当好的测试（它们通常在其他地方的前沿之后发布几个版本的原因之一）。你知道你得到的东西将非常强大，与其他大型企业系统（如你所说的遗留系统和其他业务系统，如 Siebel、Oracle、SAP 等）很好地集成，更不用说一站式- 支持与其他 IBM 产品的集成（如果您已经喝了完整的 IBM 酷援助）。

您还知道，在交付的内容存在问题的地方，它是相对透明的，并且对于您可能遇到的事情，会有记录在案的解决方法。

```
</devil's advocate> 
```

如果你有足够聪明的人，你不一定需要像 IBM 这样的人可以提供的支持（以 RedHat 为例——人们仍然可以免费下载 Linux 并在其上开展业务）。但是在 2:00，你只能靠你自己了——你不能给 Linux（或 Tomcat 提交者之一）打电话，让他​​们告诉你你做错了什么并帮助你修复它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-10T15:22:23.703

如果您继续环顾四周，您会发现许多这样的决定并不像您认为的那样基于技术考虑。像大多数其他有经验的从业者一样，我会选择其他堆栈之一，例如 Tomcat 或 JBoss。这不是因为他们没有许可费用；而是因为他们没有许可费用。这是因为与其他 J2EE 产品相比，开发人员可以在最短的时间内构建出最好的产品。

至于为什么 IBM 和其他 J2EE 供应商仍然拥有与他们一样大的市场份额，这是因为“有一个喉咙要窒息”和“不能因为购买 IBM 而被解雇”这样的思维模式。两者都没有太多的技术优势，但那是因为大多数时候做出这些决定的人在技术上不够成熟，无法理解真正的因素，并且没有或不信任有资格做出决定的人决定。

这个问题有点过于细化，无法给出简短的技术答案，因为在您的情况下构建成功的产品有很多复杂的方面。不过，有一些通用的“傻瓜容器”指南：

*   使用 Tomcat 或 JBoss，继续前进，专注于编写一个好的应用程序。我看到对 Glassfish 的强烈支持，但我要提醒您，它可能没有您愿意接受的临界质量。您可以使用其他供应商产品之一并且仍然成功；他们只会加重你的负担。
*   如有疑问，请听 Rod Johnson 的意见。他和他的公司[Spring Source](http://www.springsource.com/)正在为今天的 Java 发展铺平道路。他今天为 Java 容器所做的事情就像 Josh Block 为 Java 1.2 所做的事情（任何人都使用 Collections 框架？？？）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-25T03:51:10.203

请记住，Websphere*不仅仅是*一个过度设计的 Servlet 容器——它还是一个过度设计的 J2EE 容器。因此，J2EE 中也支持 EJB 之类的东西存在于 WebSphere 中——因此，如果应用程序确实需要它们，它们是可用的。当然，为什么需要 WebSphere 而不是通用 J2EE 容器，我无法理解——除非他们需要过度设计的特性 Y，该特性 Y 将在具有竞争性的免费产品 Z 的里程碑 X 中发布。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-25T05:35:57.610

准确地说，Websphere 不是产品。这是一条产品线。正如 Martin 所说，服务是人们购买 IBM Websphere 产品的关键部分（顺便说一句，IBM 收入的很大一部分）。

Websphere 不仅包含 J2EE 堆栈（又名 Websphere Application Server）。它有许多构建在其之上的组件/产品，例如 Websphere Process Choreographer（工作流引擎）、Websphere Portal、Websphere Business Monitor 和其他用于运行业务的有用组件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-25T05:56:28.560

Websphere 是一个糟糕的产品。除非您只需要与它集成的所有其他 IBM 产品，否则没有合理的理由购买它。如果您只需要一个 servlet 容器，请使用 Tomcat 或 Jetty。

它们的速度无限快，不会让您的开发人员头疼。Websphere 是一个令人讨厌的皇家痛苦。在 tomcat 中花费几秒钟的事情，例如部署一个小型 WAR，在 Websphere 中实际上需要几分钟和一千次点击。

最后，Websphere 只被出售给那些经理，不懂技术，不关心浪费^h^h^h^h 投资公司资金的大公司类型，并且因为老话 - 没有人因为购买 IBM 而被解雇。

许多人不使用 EJB，而是坚持使用 Hibernate 和 Servlet。如果您一开始就这样做，那么当您决定迁移到 Websphere 时，您的 WAR 没有理由在未来无法工作，因为它与某些东西集成。再说一次，你真的应该确保你知道你将来可能需要什么其他产品，并在你的决策过程中使用它。

我确信许多其他 java 类型在被迫使用 Websphere 时只使用 servlet 通常在 Tomcat 中开发，然后在最后部署在 WS 中。

# regex - 如何在 Sed 中的 [] 中查找文本？

> ID：905180
> 
> 赞同：2
> 
> 时间：2009-05-25T03:05:22.447
> 
> 标签：regex, sed

这类似于已经提出的问题。但是，我正在寻找 Sed 特定的答案。我有类似于以下的文本：

一些示例文本[带有一些额外的文本].foo

我只需要抓住括号内的文本。到目前为止，我的尝试都是徒劳的。我可以用其他工具解析该行，但似乎无法让 Sed 正确解析它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-25T03:25:47.603

像这样的东西？

```
$ echo Some sample text [with some extra text].foo | sed -e 's/.*\[\([^]]*\)\].*/\1/g'
with some extra text

$ echo Some sample text [with some extra text].foo | sed -e 's/.*\[\([^]]*\)\].*/Your text was: "\1", okay?/g'
Your text was: "with some extra text", okay? 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-25T03:10:56.133

这是一个替换括号内的文本的示例：

```
$ echo 'Some sample text [with some extra text].foo' | sed -e 's/\[\(with some extra text\)\]/<\1>/g'
Some sample text <with some extra text>.foo 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-03-23T09:13:41.153

```
echo "Some [sample inside] text [with some extra text].foo" | sed -n '/\[/{ s/\]/\n/g; s/.[^\n]*\[/:/g;s/\..*//;p}'
:sample inside:with some extra text 
```

# javascript - 如何通过 javascript 确定图像 url 字符串没有基域？

> ID：905181
> 
> 赞同：1
> 
> 时间：2009-05-25T03:05:28.157
> 
> 标签：javascript, regex, image, url, relative-path

我正在使用 php 从外部 url 捕获数据，并通过 ajax 将其扔回我的页面以加载图像。我的问题是外部 url 有一些相对的图像（“images/example.jpg”），所以我必须预先添加它们的基本域（“ [http://www.example.com](http://www.example.com) ” ），这样我才能将它加载到我的页面中。问题是一些图像包含一个基本域 url 但有些是它们的相对形式。我猜可能在我的 javascript 中使用正则表达式来确定字符串是否有一个基本（“ [http://example.domain.com](http://example.domain.com) ”）或者只是一个相对（“图像/”）它。我怎样才能通过正则表达式来实现呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-25T03:52:46.943

[使用parse_url](http://php.net/parse_url "解析网址")从 PHP 脚本中解析 URL 。如果关联数组不包含键`host`或`scheme`，您可以重写 URL 以包含它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-26T03:11:36.813

如果你可以用 PHP 解析它 - 我会做 alanhaggai 建议的：[`parse_url`](http://php.net/parse_url). 如果您需要在 javascript 中执行此操作：只需检查开头是否有协议（例如：http:// https://ftp://）。基本上检查`://`网址的前十几个字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-25T10:12:35.023

您将无法区分“images/blank.gif”之类的相对 url 和具有“www.theirdomain.com/images/blank.gif”的相对 url。谁说“www.theirdomain.com”不是目录？

如果 url 不以 http://、https:// 或 // 开头，则它是相对于您从中抓取它们的页面的 url。

# windows-7 - 有人在 Windows 7 上开发时遇到过任何问题吗？

> ID：905183
> 
> 赞同：5
> 
> 时间：2009-05-25T03:06:19.233
> 
> 标签：windows-7

我想试用 Windows 7，但想知道这样做过的人是否已经遇到过与开发相关的任何问题？

即VS2008、SQL Management Studio 和SQL Server、MySQL、PHP 等问题。

XP -> Vista 中的示例：在 Vista 中，SMTP 服务器突然丢失。并且最初（如果我没记错的话）VS2005 存在问题，我似乎记得后来出现了一个补丁来补救。

编辑：或者相反，在 Windows 7 上开发的任何重大优势或好处！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-25T03:18:33.873

我已经使用 Windows 7 有一段时间了。我一直在使用VS2008、netbeans、tomcat、sql manager studio、mysql等...

我实际上发现它比 windows vista 更稳定、更快。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-25T03:34:06.400

*在*Windows 7 发布之前进行开发并没有太多优势。大多数开发功能是 IDE 的功能，而不是操作系统。因此，您可能需要考虑是否应该在 Visual Studio 2010 而不是 VS2008 上进行开发。相反，您更有可能遇到兼容性问题，尽管在大多数情况下，Windows 7 与现有软件的兼容性要比 Vista 处于测试阶段时要好得多。

*在发布之前为*Windows 7进行开发可能有一个优势——您可以在利用竞争对手尚未具备的功能方面领先一步，从而在市场上获得优势。至少理论上是这样的。这假设您要开发的产品使用仅在 Windows 7 中可用的功能。假设您通过开发可在现有平台上运行的产品获得的销售量不会更好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-25T03:18:01.720

到目前为止，我遇到的唯一问题是使用 Visual C++ 编译较旧的 vanilla C 程序。您通常会遇到如下错误：

> mt.exe：一般错误 c101008d：无法将更新的清单写入文件“.\Release\SomeProgram.exe”的资源。二进制文件不是有效的 Windows 映像。

您必须向解决方案添加一个空资源文件。

更多关于[这里](http://www.wintellect.com/CS/blogs/jrobbins/archive/2009/01/24/the-case-of-the-corrupt-pe-binaries.aspx)的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-25T04:01:07.037

~~我从来没有让任何新的音频堆栈示例正常工作；因此[这个问题](https://stackoverflow.com/questions/858974/iaudiosessionnotification-anyone-have-working-code)。~~ API 有效，文档……目前有点缺乏；肯定会被 RTM 修复。

除此之外，对于我来说，Windows 7 比 Vista（RTM 2 次崩溃，SP1 后 0 次崩溃）更快且稳定。确实，您应该在 Vista 上进行开发并在 Windows 7 RC 上进行测试，作为预发布操作系统的一般做法；但我认为在这种特殊情况下我们会很好地摆脱它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-25T04:34:15.160

从我的角度来看还没有问题，一直在使用 Visual Studio 2008 x64 开发 ac# 应用程序，以及使用 dreamweaver cs3 和 netbeans 开发 php web 应用程序。

Windows7 似乎只是具有更多花里胡哨和响应速度更快的 vista，不确定是否真正改变了“引擎盖下”可以这么说。但我没有什么可以支持这种说法......

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-25T03:13:45.833

我的建议是*不要*在 Windows 7 上开发。请注意，我并不是说你不应该将它作为一个平台，只是你应该在一个稳定的平台上进行开发。

我个人不会相信新版本的 Windows（或 Linux），直到它作为合适的产品（而不是候选版本）在野外出现了好几个月。对于 Windows，我倾向于等到第一个真正的服务包加上一个月的时间来修复所有的小问题。

对于 Linux，我仍在使用 Ubuntu 8.04 LTS，而不是 8.1，当然也不是 9 alpha。

测试机器是另一回事，您应该始终拥有“最新和最好”级别的测试机器，但我认为开发机器最重要，需要一个稳定的平台。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-25T05:34:16.037

我已经使用Win7几个月了，从来没有遇到过问题。我直接从 XP 升级到 7，我遇到的唯一问题与配置 SourceGear Vault 以与 IIS7 一起使用...除此之外，一切都很好。

我使用 VS 2005、VS 2008、SQL Server 2005、Infragistics NetAdvantage 和几个第三方组件。

虽然我没有看到应用程序开发方面的任何优势，但我建议您升级到 Win7 只是为了更好地体验完整的操作系统。我的意思是XP很好，但我真的很喜欢Win7。

# oracle10g - 创建另一个

> ID：905188
> 
> 赞同：0
> 
> 时间：2009-05-25T03:09:57.977
> 
> 标签：oracle10g

我试图创建将拥有 PUBLIC 角色的所有权限的新角色，然后从 PUBLIC 角色中删除所有权限。这是出于安全目的。

这就是问题。我无法将 SYS./1005bd30_LnkdConstant 和其他具有相同格式的其他人授予我的新角色。

样本：

SYS./10076b23_OraCustomDatumClosur SYS./100c1606_StandardMidiFileRead ORDSYS./1013c29d_PlanarImageServerPro。. .

我真的需要这些，或者我的新“公共”角色可以没有这些吗？

任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-27T16:58:52.163

让我在这里快速猜测一下。您遇到的问题是对象名称区分大小写。快速解决方法是将对象名称括在双引号中，就像这样。

```
GRANT EXECUTE ON SYS."/1005bd30_LnkdConstant" TO mynewpublicrole; 
```

您表明您“无法将 [EXECUTE ON] SYS./1005bd30_LnkdConstant”授予角色。
我认为这意味着当您运行 GRANT 语句时，Oracle 很可能引发了异常，

```
 ORA-00903: invalid table name 
```

将 objectname 括在双引号中（如示例中所示）应该可以解决该问题。

无法回答您的新角色是否需要对这些对象具有 EXECUTE 权限的问题。好吧，这个角色不一定需要它们。问题是用户是否需要它们（无论是直接授予，还是通过角色间接授予）。这可以通过彻底的测试来确定。

* * *

其他一些评论。

如果您打算创建一个新角色并将该角色授予所有用户，我认为安全性不会改变或改进。所以，我会假设情况并非如此。

看来您正在尝试应用“最小特权”原则。我为这种努力鼓掌。

我看到应用程序开发人员遵循的最常见模式之一是让应用程序作为模式对象的所有者连接到数据库。这意味着应用程序具有它可能不需要的各种权限，例如 DROP TABLE、ALTER PROCEDURE 等。

我们使用的模式是拥有一个拥有模式对象的“OWNER”用户，以及一个拥有对“OWNER”对象和“OWNER”对象的同义词所需的特定权限的单独的“APP”用户。（同义词允许引用 OWNER.object 而不用 OWNER 限定。）几乎不用说，我们不授予 PUBLIC 权限，而是在需要时授予角色。

我之所以提到这一点，是因为它是我们用来实现“最小特权”原则的一种模式。

* * *

对于其他安全问题，我建议您查看“Oracle 安全检查表”白皮书：

[http://www.oracle.com/technology/deploy/security/database-security/pdf/twp_security_checklist_database.pdf](http://www.oracle.com/technology/deploy/security/database-security/pdf/twp_security_checklist_database.pdf)

* * *

您在执行 GRANT 语句时可能遇到的其他一些可能的异常：

```
 ORA-01031: insufficient privileges 
```

或者

```
 ORA-04042: procedure, function, package, or package body does not exist. 
```

在任何一种情况下，请确保以 SYS (SYSDBA) 身份连接到数据库以授予权限。我们几乎总是以对象所有者的身份授予权限，而不是让其他用户作为 GRANTEE。我几乎从不在对象权限上使用“WITH GRANT OPTION”。这是一个更简单的模型，并且避免了依赖树的任何潜在问题。

# python - 为什么 sys.exit() 在 Python 的线程内调用时不退出？

> ID：905189
> 
> 赞同：113
> 
> 时间：2009-05-25T03:10:44.620
> 
> 标签：python, python-2.6

这可能是一个愚蠢的问题，但我正在测试我对 Python 的一些假设，我很困惑为什么以下代码片段在线程中调用时不会退出，但在主线程中调用时会退出。

```
import sys, time
from threading import Thread

def testexit():
    time.sleep(5)
    sys.exit()
    print "post thread exit"

t = Thread(target = testexit)
t.start()
t.join()
print "pre main exit, post thread exit"
sys.exit()
print "post main exit" 
```

sys.exit() 的文档声明调用应该从 Python 退出。我可以从这个程序的输出中看到“post thread exit”永远不会被打印出来，但是即使在线程调用 exit 之后，主线程也会继续运行。

是否为每个线程创建了一个单独的解释器实例，而对 exit() 的调用只是退出该单独的实例？如果是这样，线程实现如何管理对共享资源的访问？如果我确实想从线程中退出程序怎么办（不是我真正想要的，但我明白了）？

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2009-05-25T03:31:38.480

`sys.exit()`引发`SystemExit`异常，`thread.exit()`. 因此，当`sys.exit()`在该线程内引发该异常时，它与调用具有相同的效果`thread.exit()`，这就是只有线程退出的原因。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2011-08-17T20:43:41.887

> 如果我确实想从线程中退出程序怎么办？

### 对于 Linux：

```
os.kill(os.getpid(), signal.SIGINT) 
```

这会将 a 发送`SIGINT`到引发 a 的主线程`KeyboardInterrupt`。这样你就有了适当的清理工作。如果您想做出不同的反应，您也可以注册一个处理程序。

以上不适用于 Windows，因为您只能发送一个`SIGTERM`信号，该信号不由 Python 处理，与`os._exit()`.

### 对于 Windows：

您可以使用：

```
os._exit() 
```

这将退出整个过程而不进行任何清理。如果需要清理，则需要以另一种方式与主线程通信。

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2011-02-25T16:58:10.660

> 如果我确实想从线程中退出程序怎么办？

除了 Deestan 描述的方法之外，您还可以调用`os._exit`（注意下划线）。在使用它之前，请确保您了解它不会进行*清理*（例如调用`__del__`或类似操作）。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2009-05-25T11:32:18.467

> 如果我确实想从线程中退出程序怎么办（不是我真正想要的，但我明白了）？

我首选的方法是 Erlang-ish 消息传递。稍微简化，我这样做：

```
import sys, time
import threading
import Queue # thread-safe

class CleanExit:
  pass

ipq = Queue.Queue()

def testexit(ipq):
  time.sleep(5)
  ipq.put(CleanExit)
  return

threading.Thread(target=testexit, args=(ipq,)).start()
while True:
  print "Working..."
  time.sleep(1)
  try:
    if ipq.get_nowait() == CleanExit:
      sys.exit()
  except Queue.Empty:
    pass 
```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2009-05-25T04:07:21.217

打印“pre main exit, post thread exit”的事实让你感到困扰吗？

`sys.exit`与其他一些语言（如 Java）不同，其中( ，在 Java 的情况下)的模拟`System.exit`会导致 VM/进程/解释器立即停止，Python`sys.exit`只是抛出一个异常：特别是 SystemExit 异常。

以下是`sys.exit`（只是`print sys.exit.__doc__`）的文档：

> 通过引发 SystemExit(status) 退出解释器。
> 如果省略状态或无，则默认为零（即成功）。
> 如果状态是数字，它将被用作系统退出状态。
> 如果是另一种对象，则打印出来，系统
> 退出状态为一（即失败）。

这有几个后果：

*   在一个线程中它只是杀死当前线程，而不是整个进程（假设它一直到堆栈的顶部......）
*   对象析构函数 ( `__del__`) 可能会在引用这些对象的堆栈帧展开时被调用
*   finally 块在堆栈展开时执行
*   你可以捕捉到一个`SystemExit`异常

`except`最后一个可能是最令人惊讶的，这也是为什么您几乎不应该在 Python 代码中包含不合格语句的另一个原因。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2021-01-05T06:29:26.660

`_thread.interrupt_main()`从 Python 3.7 开始可用（在此之前可选）

# java - jsf 托管 bean 中的 JSF inputText 和 Sessions

> ID：905194
> 
> 赞同：3
> 
> 时间：2009-05-25T03:14:28.920
> 
> 标签：java, jsp, jsf

我想知道如何从托管 bean 中读取输入文本的值。我知道以这种方式阅读是可能的，而且非常直截了当。

```
<h:inputText id="username" value="#{mylogin.username}" required="true" /> 
```

但是如果让我们说我有一个像

```
 <h:inputText id="username" value="some_value" required="true" /> 
```

我想在我的托管 bean 中读取这个“some_value”。可能吗 ？

另一个问题是可以访问托管 bean 中的会话变量还是我应该以某种方式将它们传递给那里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-25T09:50:54.350

```
<h:inputText id="username" value="#{mylogin.username}" required="true" /> 
```

在我看来，这将是最好的方式。您是否有理由避免这种情况？[正如harto 建议](https://stackoverflow.com/questions/905194/basic-question-about-jsf-inputtext-and-about-sessions-in-jsf-managed-bean/905380#905380)的那样，您可以使用组件绑定，但是（正如 Vinegar 指出的那样）您不会从这种方法中获得任何收益。

```
<h:inputText id="username" value="some_value" required="true" /> 
```

如果要读取上面的值，可以直接从请求参数中读取。[ExternalContext](http://java.sun.com/javaee/5/docs/api/javax/faces/context/ExternalContext.html)封装了底层容器 API ，可以在托管 bean 中访问，如下所示：

```
FacesContext facesContext = FacesContext
    .getCurrentInstance();
ExternalContext extContext = facesContext
    .getExternalContext();
Map<String, String> params = extContext
    .getRequestParameterMap(); 
```

但是，除了违反模型-视图-演示者契约之外，您还可能遇到一些实际问题。参数键可能不是“用户名”，但可能类似于“j_id_jsp_115874224_691:username”，具体取决于您是否使组件成为任何[NamingContainer](http://java.sun.com/javaee/5/docs/api/javax/faces/component/NamingContainer.html)的子项（如[UIForm](http://java.sun.com/javaee/5/docs/api/javax/faces/component/UIForm.html) - 请参阅[prependId 属性](http://java.sun.com/javaee/javaserverfaces/1.2_MR1/docs/tlddocs/h/form.html)）或视图是否具有命名空间。在任何地方硬编码这个值可能是个坏主意。[您可以在此处](http://illegalargumentexception.blogspot.com/2009/02/jsf-working-with-component-ids.html)阅读 JSF 组件 ID 和呈现的 HTML ID 之间的关系。如果您想使用[UIComponent.getClientId](http://java.sun.com/javaee/5/docs/api/javax/faces/component/UIComponent.html#getClientId(javax.faces.context.FacesContext))来生成密钥，您将返回到组件绑定，因为您需要获取对组件的引用。

> 另一个问题是可以访问托管 bean 中的会话变量..？

请参阅[ExternalContext.getSessionMap](http://java.sun.com/javaee/5/docs/api/javax/faces/context/ExternalContext.html#getSessionMap())。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-25T04:12:40.607

在后一种情况下，`some_value`不是 bean 管理的，恕我直言。尽管如此，你可以阅读它。做这样的事情，

```
FacesContext ctx = FacesContext.getCurrentInstance();
HttpServletRequest request =
      (HttpServletRequest)ctx.getExternalContext().getRequest(); 
request.getParameter("username"); 
```

同样，关于访问会话变量，

```
FacesContext ctx = FacesContext.getCurrentInstance();
HttpServletRequest request =
      (HttpServletRequest)ctx.getExternalContext().getSession(false); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-25T04:55:23.247

读取组件值的常用方法是在托管 bean 中创建到组件的绑定，并从中读取值。

例如：

```
<h:inputText id="username" value="some_value" required="true"
    binding="#{mylogin.usernameField}" /> 
```

然后，在托管 bean 中：

```
private UIInput usernameField;

public void setUsernameField(UIInput usernameField) { 
    this.usernameField = usernameField;
}
public UIInput getUsernameField() { 
    return usernameField; 
} 
```

最后，访问字段值：

```
Object value = usernameField.getValue(); 
```

# c# - 对可变多维数组进行排序

> ID：905197
> 
> 赞同：1
> 
> 时间：2009-05-25T03:17:41.720
> 
> 标签：c#, linq

我有整数数组：d[]。例如（7 列和一些行）：

4 1 8 0 3 2 6

7 0 4 9 1 1 5

0 6 1 3 5 2 0

等等。在编译时我不知道数组 d 有多少列。而且我不知道在编译时要使用哪些列来排序。

例如需要排序：d[5], d[2], d[0], d[3]。但是在运行时我知道要排序的列的顺序。例如列索引： 5, 2, 0, 3 表示 d[5], d[2], d[0], d[3] 列。如何使用此列索引对数组 d 进行排序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-25T09:14:24.533

假设您使用的是锯齿状数组 ( `int[][]`)，那么您可以通过组合使用 LINQ`OrderBy`和`ThenBy`：

```
using System;
using System.Collections.Generic;
using System.Linq;
static class Program
{
    static void Main()
    {
        int[][] data = {
          new[]{4,1,8,0,3,2,6},
          new[]{7,0,4,9,1,1,5},
          new[]{0,6,1,3,5,2,0}};
        int[] sortCols = { 5, 2, 0, 3 };

        IEnumerable<int[]> qry = data;
        if (sortCols.Length > 0)
        {
            IOrderedEnumerable<int[]> sorted =
                qry.OrderBy(row => row[sortCols[0]]);
            for (int i = 1; i < sortCols.Length; i++)
            {
                int col = sortCols[i]; // for capture
                sorted = sorted.ThenBy(row => row[col]);
            }
            qry = sorted;
        }

        // show results (does actual sort when we enumerate)
        foreach (int[] row in qry)
        {
            foreach (int cell in row)
            {
                Console.Write(cell);
                Console.Write('\t');
            }
            Console.WriteLine();
        }
    }
} 
```

您还可以（或者）建立一个比较以传递给`Array.Sort`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-25T03:31:51.850

我建议使用 DataTable 在运行时创建列结构并添加行。然后使用 Column 的名称对其进行排序。

例如 DataTable.Sort = "Column5 ASC, Column2 ASC"（伪代码）。

# batch-file - 批处理文件如何定位它所在的位置？

> ID：905203
> 
> 赞同：2
> 
> 时间：2009-05-25T03:20:49.327
> 
> 标签：batch-file, cmd, locate

批处理文件如何单独查看它的位置？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-25T03:24:12.783

%0 是文件名。%~dp0 将是文件的绝对位置，其中 d 是驱动器，p 是路径，0 是文件名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-25T03:23:58.527

只需调用“cd”

```
set WORKING_DIRECTORY=%cd% 
```

曾经是 %~dp0，但这在 Vista 中对我不起作用。

# iphone - 检测 iPhone 相机方向

> ID：905217
> 
> 赞同：1
> 
> 时间：2009-05-25T03:29:03.897
> 
> 标签：iphone, ios, objective-c, camera, uiimage

根据我是直接从回调中的相机获取图像还是从相机胶卷中选择图像，我得到的结果不一致。

在`UIImagePickerControllerDelegate`回调方法中，无论照片如何拍摄，`UIImage.imageOrientation`都会出现。`UIImageOrientationRight`

当从相机胶卷上读取它时，会出现一张风景照片（向左转），`UIImageOrientationUp`同时出现一张人像照片`UIImageOrientationRight`。

如何在这两种情况下可靠地获取相机方向？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2010-09-23T17:55:50.283

我将此发布到 Apple 论坛，并得到了解释：

“相机实际上是横向原生的，所以当你在风景中拍照时你会向上或向下，当你在纵向拍照时你会向左或向右（取决于你拿着设备的方式）。”

看：

```
https://devforums.apple.com/message/301160#301160 
```

谢谢：

[https://devforums.apple.com/people/Rincewind](https://devforums.apple.com/people/Rincewind)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-09-08T16:04:27.280

拍完照片后，我尝试了 imageOrientation 属性，这很有趣，因为我的方向值搞砸了。上为左，下为右，左为下，右为上，例如，如果我握住 iPhone“上”（正常位置），则 imageOrientation 为“UIImageOrientationRight”。

```
- (void)imagePickerController:(UIImagePickerController *)picker
  didFinishPickingImage:(UIImage *)image
      editingInfo:(NSDictionary *)editingInfo {
    switch (image.imageOrientation) {
      case UIImageOrientationUp: //Left
       break;
      case UIImageOrientationDown: //Right
       break;
      case UIImageOrientationLeft: //Down
       break;
      case UIImageOrientationRight: //Up
       break;
      default:
       break;
     }
} 
```

目前我正在使用针对 iOS 3.1 的 4.1 SDK GM (xcode_3.2.4_and_ios_sdk_4.1_gm_seed)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-06-25T16:54:41.080

我在[某处](http://joris.kluivers.nl/iphone-dev/?p=IncorrectlyRotated)读到UIImagePickerController 没有打开监听硬件方向事件，所以你可能需要调用

```
[[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications]; 
```

在您自己的应用程序中捕获图像之前。我将自己尝试测试这个，所以我希望它有效！

# python - os.system() 在哪个linux shell下执行命令？

> ID：905221
> 
> 赞同：9
> 
> 时间：2009-05-25T03:30:14.833
> 
> 标签：python, linux, shell

我使用`/bin/tcsh`作为我的默认外壳。

但是，tcsh 样式命令`os.system('setenv VAR val')`对我不起作用。但`os.system('export VAR=val')`有效。

所以我的问题是我怎么知道`os.system()`在哪个shell下运行命令？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-02T19:54:43.253

只是在阅读[Executing BASH from Python](http://www.rubyops.net/executing-bash-from-python)，然后是[17.1。subprocess — 子进程管理 — Python v2.7.3 文档](http://docs.python.org/2/library/subprocess.html#popen-constructor)，我看到了`executable`论点；它似乎有效：

```
$ python
Python 2.7.1+ (r271:86832, Sep 27 2012, 21:16:52) 
[GCC 4.5.2] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import os
>>> print os.popen("echo $0").read()
sh
>>> import subprocess
>>> print subprocess.call("echo $0", shell=True).read()
/bin/sh
>>> print subprocess.Popen("echo $0", stdout=subprocess.PIPE, shell=True).stdout.read()
/bin/sh
>>> print subprocess.Popen("echo $0", stdout=subprocess.PIPE, shell=True, executable="/bin/bash").stdout.read()
/bin/bash
>>> print subprocess.Popen("cat <(echo TEST)", stdout=subprocess.PIPE, shell=True).stdout.read()
/bin/sh: Syntax error: "(" unexpected
>>> print subprocess.Popen("cat <(echo TEST)", stdout=subprocess.PIPE, shell=True, executable="/bin/bash").stdout.read()
TEST 
```

希望这对某人有帮助，
干杯！

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-05-25T03:51:58.113

这些天你应该使用[Subprocess](http://docs.python.org/library/subprocess.html)模块而不是`os.system()`. 根据那里的文档，默认外壳是`/bin/sh`. 我相信这`os.system()`也是一样的。

编辑：我还应该提到 subprocess 模块允许您通过`env`参数设置执行进程可用的环境。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-05-25T04:17:18.393

`os.system()`只需调用`system()`系统调用（“ `man 3 system`”）。在大多数 *nixes 上，这意味着你得到`/bin/sh`.

请注意，这`export VAR=val`在技术上不是标准语法（尽管`bash`理解它，我认为`ksh`也是）。它不适用于`/bin/sh`实际上是 Bourne shell 的系统。在这些系统上，您需要导出并设置为单独的命令。（这也适用`bash`。）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-25T11:00:53.007

如果您的命令是一个 shell 文件，并且该文件是可执行的，并且该文件以“#!”开头，那么您可以选择您的 shell。

```
#!/bin/zsh
Do Some Stuff 
```

你可以编写这个文件然后执行它，`subprocess.Popen(filename,shell=True)`你就可以使用任何你想要的shell。

另外，请务必阅读[有关](http://docs.python.org/library/subprocess.html#replacing-os-system)`os.system`和的内容`subprocess.Popen`。

# javascript - 防止按 Enter 键提交表单

> ID：905222
> 
> 赞同：371
> 
> 时间：2009-05-25T03:31:28.980
> 
> 标签：javascript, forms, keypress, dom-events, enter

我有一个`form`带有两个文本框，一个**选择**下拉和一个**单选按钮**。当`enter`按键被按下时，我想调用我的 JavaScript 函数，但是当我按下它时，它`form`被提交了。

按下键时如何防止`form`提交？`**enter**`

* * *

## 回答 #1

> 赞同：466
> 
> 时间：2009-05-25T03:35:11.080

```
if(characterCode == 13)
{
    return false; // returning false will prevent the event from bubbling up.
}
else
{
    return true;
} 
```

好的，假设您在表单中有以下文本框：

```
<input id="scriptBox" type="text" onkeypress="return runScript(event)" /> 
```

为了在按下回车键时从该文本框中运行一些“用户定义”脚本，而不是让它提交表单，这里有一些*示例*代码。请注意，此功能不会进行任何错误检查，并且很可能仅在 IE 中有效。要做到这一点，您需要一个更强大的解决方案，但您将了解总体思路。

```
function runScript(e) {
    //See notes about 'which' and 'key'
    if (e.keyCode == 13) {
        var tb = document.getElementById("scriptBox");
        eval(tb.value);
        return false;
    }
} 
```

返回函数的值将提醒事件处理程序不要再冒泡事件，并防止按键事件被进一步处理。

## 笔记：

有人指出，`keyCode`现在[已弃用](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/keycode)。次佳选择`which`也[已被弃用](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/which)。

不幸的`key`是，现代浏览器广泛支持的受欢迎的标准[在 IE 和 Edge 中有一些狡猾的行为](https://caniuse.com/#feat=keyboardevent-key)。任何早于 IE11 的东西仍然需要[polyfill](https://github.com/cvan/keyboardevent-key-polyfill)。

`keyCode`此外，虽然已弃用的警告对and来说是相当不祥的`which`，但删除这些警告将代表对无数旧网站的巨大破坏性变化。出于这个原因，**他们不太可能很快就会去任何地方。**

* * *

## 回答 #2

> 赞同：141
> 
> 时间：2012-01-20T08:17:03.217

同时使用`event.which`和`event.keyCode`：

```
function (event) {
    if (event.which == 13 || event.keyCode == 13) {
        //code to execute here
        return false;
    }
    return true;
}; 
```

* * *

## 回答 #3

> 赞同：115
> 
> 时间：2017-09-14T04:25:36.913

# event.key === "输入"

更新和更清洁：使用`event.key`. **没有更多的任意数字代码！**

> 注意：旧属性 (`.keyCode`和`.which`) 已弃用。

```
const node = document.getElementsByClassName("mySelect")[0];
node.addEventListener("keydown", function(event) {
    if (event.key === "Enter") {
        event.preventDefault();
        // Do more work
    }
}); 
```

### 现代风格，带有 lambda 和解构

```
node.addEventListener("keydown", ({key}) => {
    if (key === "Enter") // Handle press
}) 
```

[Mozilla 文档](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key)

[支持的浏览器](http://caniuse.com/#feat=keyboardevent-key)

* * *

## 回答 #4

> 赞同：82
> 
> 时间：2012-06-08T17:46:42.983

如果您使用 jQuery：

```
$('input[type=text]').on('keydown', function(e) {
    if (e.which == 13) {
        e.preventDefault();
    }
}); 
```

* * *

## 回答 #5

> 赞同：27
> 
> 时间：2015-06-16T05:58:33.620

检测整个文档上按下的 Enter 键：

```
$(document).keypress(function (e) {
    if (e.which == 13) {
        alert('enter key is pressed');
    }
}); 
```

[http://jsfiddle.net/umerqureshi/dcjsa08n/3/](http://jsfiddle.net/umerqureshi/dcjsa08n/3/)

* * *

## 回答 #6

> 赞同：18
> 
> 时间：2009-05-25T03:40:51.813

覆盖`onsubmit`表单的操作以调用您的函数并在其后添加 return false ，即：

```
<form onsubmit="javascript:myfunc();return false;" > 
```

* * *

## 回答 #7

> 赞同：17
> 
> 时间：2016-01-08T07:15:38.980

一个反应js解决方案

```
 handleChange: function(e) {
    if (e.key == 'Enter') {
      console.log('test');
    }

 <div>
    <Input type="text"
       ref = "input"
       placeholder="hiya"
       onKeyPress={this.handleChange}
    />
 </div> 
```

* * *

## 回答 #8

> 赞同：10
> 
> 时间：2019-01-22T11:21:41.040

因此，覆盖尽可能多的浏览器并成为未来证明的最佳解决方案可能是

```
if (event.which === 13 || event.keyCode === 13 || event.key === "Enter") 
```

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2018-06-16T23:04:39.323

以下是使用 JavaScript 的方法：

```
//in your **popup.js** file just use this function 

    var input = document.getElementById("textSearch");
    input.addEventListener("keyup", function(event) {
        event.preventDefault();
        if (event.keyCode === 13) {
            alert("yes it works,I'm happy ");
        }
    });
```

```
<!--Let's say this is your html file-->
 <!DOCTYPE html>
    <html>
      <body style="width: 500px">
        <input placeholder="Enter the text and press enter" type="text" id="textSearch"/> 
          <script type="text/javascript" src="public/js/popup.js"></script>
      </body>
    </html>
```

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2016-12-14T07:40:15.773

`ENTER`下面的代码将在整个页面上为键添加监听器。

这在具有单个操作按钮的屏幕中非常有用，例如登录、注册、提交等。

```
<head>
        <!--Import jQuery IMPORTANT -->
        <script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>

         <!--Listen to Enter key event-->
        <script type="text/javascript">

            $(document).keypress(function (e) {
                if (e.which == 13 || event.keyCode == 13) {
                    alert('enter key is pressed');
                }
            });
        </script>
    </head> 
```

在所有浏览器上测试。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2014-01-08T15:49:50.513

一个 jQuery 解决方案。

我来这里是为了寻找一种方法来延迟表单提交，直到文本输入上的模糊事件被触发之后。

```
$(selector).keyup(function(e){
  /*
   * Delay the enter key form submit till after the hidden
   * input is updated.
   */

  // No need to do anything if it's not the enter key
  // Also only e.which is needed as this is the jQuery event object.
  if (e.which !== 13) {
       return;
  }

  // Prevent form submit
  e.preventDefault();

  // Trigger the blur event.
  this.blur();

  // Submit the form.
  $(e.target).closest('form').submit();
}); 
```

很高兴获得一个更通用的版本来触发所有延迟事件，而不仅仅是表单提交。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2015-06-07T11:07:37.447

**从我的角度来看，一个更简单有效的方法应该是：**

```
function onPress_ENTER()
{
        var keyPressed = event.keyCode || event.which;

        //if ENTER is pressed
        if(keyPressed==13)
        {
            alert('enter pressed');
            keyPressed=null;
        }
        else
        {
            return false;
        }
} 
```

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2019-02-01T09:30:08.440

## 有点简单

不要在按键“Enter”上发送表单：

```
<form id="form_cdb" onsubmit="return false"> 
```

在按键“Enter”上执行功能：

```
<input type="text" autocomplete="off" onkeypress="if(event.key === 'Enter') my_event()"> 
```

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2018-03-14T21:18:12.503

使用 TypeScript，避免多次调用函数

```
let el1= <HTMLInputElement>document.getElementById('searchUser');
el1.onkeypress = SearchListEnter;

function SearchListEnter(event: KeyboardEvent) {
    if (event.which !== 13) {
        return;
    }
    // more stuff
} 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2017-06-10T12:16:10.007

# 本机 js（获取 api）

```
document.onload = (() => {
    alert('ok');
    let keyListener = document.querySelector('#searchUser');
    // 
    keyListener.addEventListener('keypress', (e) => {
        if(e.keyCode === 13){
            let username = e.target.value;
            console.log(`username = ${username}`);
            fetch(`https://api.github.com/users/${username}`,{
                data: {
                    client_id: 'xxx',
                    client_secret: 'xxx'
                }
            })
            .then((user)=>{
                console.log(`user = ${user}`);
            });
            fetch(`https://api.github.com/users/${username}/repos`,{
                data: {
                    client_id: 'xxx',
                    client_secret: 'xxx'
                }
            })
            .then((repos)=>{
                console.log(`repos = ${repos}`);
                for (let i = 0; i < repos.length; i++) {
                     console.log(`repos ${i}  = ${repos[i]}`);
                }
            });
        }else{
            console.log(`e.keyCode = ${e.keyCode}`);
        }
    });
})();
```

```
<input _ngcontent-inf-0="" class="form-control" id="searchUser" placeholder="Github username..." type="text">
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2017-08-28T04:41:38.757

```
<div class="nav-search" id="nav-search">
        <form class="form-search">
            <span class="input-icon">
                <input type="text" placeholder="Search ..." class="nav-search-input" id="search_value" autocomplete="off" />
                <i class="ace-icon fa fa-search nav-search-icon"></i>
            </span>
            <input type="button" id="search" value="Search" class="btn btn-xs" style="border-radius: 5px;">
        </form>

</div>

<script type="text/javascript">
    $("#search_value").on('keydown', function(e) {
        if (e.which == 13) {
             $("#search").trigger('click');
            return false;
        }
    });
    $("#search").on('click',function(){
        alert('You press enter');
    });
</script> 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2019-11-08T06:16:41.593

```
<form id="form1" runat="server" onkeypress="return event.keyCode != 13;"> 
```

在您的 HTML 页面中添加此代码...它将禁用...输入按钮...

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2019-03-07T17:43:42.330

## 跨浏览器解决方案

一些较旧的浏览器以非标准方式实现 keydown 事件。

> **[KeyBoardEvent.key](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key)**是它应该在现代浏览器中实现的方式。

[`which`](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/which) 并且[`keyCode`](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/keyCode)现在已被弃用，但检查这些事件并没有什么坏处，因此代码适用于仍然使用 IE 等旧浏览器的用户。

该`isKeyPressed`函数检查是否输入了按下的键并`event.preventDefault()`阻止表单提交。

```
 if (isKeyPressed(event, 'Enter', 13)) {
    event.preventDefault();
    console.log('enter was pressed and is prevented');
  } 
```

### 最小的工作示例

**JS**

```
function isKeyPressed(event, expectedKey, expectedCode) {
  const code = event.which || event.keyCode;

  if (expectedKey === event.key || code === expectedCode) {
    return true;
  }
  return false;
}

document.getElementById('myInput').addEventListener('keydown', function(event) {
  if (isKeyPressed(event, 'Enter', 13)) {
    event.preventDefault();
    console.log('enter was pressed and is prevented');
  }
}); 
```

**HTML**

```
<form>
  <input id="myInput">
</form> 
```

**[https://jsfiddle.net/tobiobeck/z13dh5r2/](https://jsfiddle.net/tobiobeck/z13dh5r2/)**

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2020-07-27T18:43:02.380

`event.preventDefault()`在用户定义函数内部使用

```
<form onsubmit="userFunction(event)"> ... 
```

```
function userFunction(ev) 
{
    if(!event.target.send.checked) 
    {
        console.log('form NOT submit on "Enter" key')

        ev.preventDefault();
    }
}
```

```
Open chrome console> network tab to see
<form onsubmit="userFunction(event)" action="/test.txt">
  <input placeholder="type and press Enter" /><br>
  <input type="checkbox" name="send" /> submit on enter
</form>
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2022-01-01T04:55:06.983

我使用了文档，它涵盖了页面加载后动态添加的 html：

```
 $(document).on('keydown', '.selector', function (event) {
    if (event.which == 13 || event.keyCode == 13) {
      //do your thang
    }
  }); 
```

添加了来自@Bradley4 的更新

# spring - 元素“security:http”的前缀“security”未绑定

> ID：905223
> 
> 赞同：0
> 
> 时间：2009-05-25T03:31:32.160
> 
> 标签：spring, gwt, spring-mvc, gwt-rpc

我得到错误

2009-05-24 21:49:56,399 错误 [org.springframework.web.context.ContextLoader] - 上下文初始化失败 org.springframework.beans.factory.xml.XmlBeanDefinitionStoreException：来自 ServletContext 资源的 XML 文档中的第 38 行 [/WEB- INF/applicationContext.xml] 无效；嵌套异常是 org.xml.sax.SAXParseException：元素“security:http”的前缀“security”未绑定。

参考网址： http: [//forum.springsource.org/showthread.php?p=242557#post242557](http://forum.springsource.org/showthread.php?p=242557#post242557)

谁能评论我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-25T15:53:37.367

您在春季论坛上发布了问题，并在那里得到了回答。

# windows - 什么相当于 Windows 中的 Linux mkdir -p？

> ID：905226
> 
> 赞同：75
> 
> 时间：2009-05-25T03:32:47.823
> 
> 标签：windows, batch-file, cmd, mkdir

在 Linux 中，`mkdir -p`创建一个文件夹树。

Windows 中创建文件夹树的等效选项是什么？有没有？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2009-05-25T03:39:08.253

如果启用了命令扩展，Windows mkdir 会自动执行此操作。它们几乎出现在我用过的每个盒子上，但如果没有，您可以创建自己的脚本来执行此操作：

```
@echo off
setlocal enableextensions
md %1
endlocal 
```

扩展：

命令扩展是 cmd.exe 的附加功能，它允许您做更多事情（以与批处理语言的早期版本有一点兼容性为代价）。

Windows XP`cmd.exe`应该默认启用这些扩展，但您可以配置您的机器，使其默认禁用（`"cmd /e:off"`用作默认处理器）。如果你这样做并且想要使用扩展，你的`cmd`文件必须有一个 setlocal 才能重新打开它们。

上面的脚本可以称为 md2.cmd，然后您可以保证能够创建多个目录级别，`"md2 a\b\c"`而不必担心是否启用了扩展。

几乎我写的每一个`cmd`脚本都是这样开始的：

```
setlocal enableextensions enabledelayedexpansion 
```

以确保我尽可能接近我心爱的人的行为`bash`:-)

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2009-05-25T03:38:20.843

在 Windows 中，`mkdir`默认创建目录树。

`mkdir a\b\c`

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2016-08-29T14:27:48.570

当我尝试使用以下方法创建目录时，出于一个奇怪的原因；

```
mkdir src/main/java/main/resources 
```

它不起作用，我不得不用双引号将路径括起来，如下所示；

```
mkdir "src/main/java/main/resources" 
```

此外，unix 允许这样做；

```
mkdir -p src/main/java src/main/resources 
```

其中将创建两个分支，如下所示，相当于windows上的；

`mkdir "src/java/resources" "src/main/resources"`

```
src
-----java
-------resources
-----main
-------resources 
```

我希望这有帮助！xox

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-08-04T07:08:01.130

如果您想使用正斜杠，只需在双引号内给出您想要的目录结构。mkdir "org/frame/bu/fed/config"

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2019-06-16T17:29:33.340

mkdir 默认创建所有中间目录。只需确保使用 '\' 作为分隔符。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-05-06T08:00:12.653

我今天只是尝试创建多个文件夹，它正在工作！

```
mkdir "templates" "static/css" "static/js" 
```

# bash - 如何搜索PID？（重击）

> ID：905242
> 
> 赞同：3
> 
> 时间：2009-05-25T03:40:16.400
> 
> 标签：bash, search, pid

假设我知道进程的 PID 并想在 ps -A 中进行搜索，我该怎么做？我试过这样做：

```
echo "Enter PID to search: "
read PID
search=$(ps -A | grep -v PID | awk '{print $1}') 
```

这会返回给我一长串 PID。那么我怎样才能使用输出的每个单独的值并执行以下操作：

```
if [ "$PID" = "*each_value_in_search_list*" ]; then
........ 
```

在这种情况下，我试图将用户输入的内容与我的命令输出进行比较，那么我该怎么做呢？我首先做的是正确的方式吗？或者有没有其他方法可以做到这一点？

感谢您的帮助，所有回答此问题的人。（：

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-25T03:53:33.573

grep 的 -v 开关执行反向搜索，换句话说，你会得到你不想要的一切。设置变量后，您还应该以 $ 为前缀引用它。

试试这个

```
#!/bin/bash

echo "Enter PID to search: "
read PID
search=$(ps --pid $PID -o comm=)

if [ $search ]
    then
        echo "Program: $search"
    else
        echo "No program found with PID: $PID"
fi 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-25T03:48:35.353

您正在`ps`搜索不包含文字字符串“PID”的所有行的输出。您想改用`$PID`名为 PID 的*变量*而不是文字“PID”。此外，由于您不希望与 PID 匹配的其他字段出现误报，因此只需匹配第一列：

```
search=$(ps -A | grep "^ *$PID\>" | awk '{print $1}') 
```

`"\>"`转义序列匹配单词末尾的空字符串。

某些版本`ps`支持`-p`仅向您提供有关特定 PID 的信息的选项，因此您不需要 grep 或 awk：

```
search=$(ps -p $PID) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-25T04:05:36.787

您`"grep -v PID"`是删除标题行的标准技巧，而不是从输出中获取实际 PID 详细信息的方法。

如果您想要的只是该过程的详细信息，只需使用：

```
search=$(ps -A | awk -v pid=$PID '$1==pid{print pid}') 
```

如果它存在，这会将搜索设置为有问题的 PID，否则设置为空字符串，这就是您想要的。

对 PID 进行盲搜索（而不是用 来检查第 1 列`awk`）存在一个问题，即您可能会选择该 PID 在命令字符串中显示的行。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-25T06:39:57.053

`grep`您可以[使用`-p`选项将 PID 直接传递给`ps`命令](http://research.att.com/~gsf/man/man1/ps.html)，而不是使用。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-25T05:39:21.740

如果问题的根源是检查输入的PID是否对应于进程条目（根）。更具体地说，如果您能够向该进程（用户）发送信号：

```
if kill -0 $PID >/dev/null 2>&1; then ... 
```

当然，这可能根本不是您想要的。我可以随意“解释”你的问题；）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2011-04-12T09:39:26.727

```
<?php
echo shell_exec("ps -Ao cmd,pid|grep -P ' {$pid}$'");
?> 
```

# svn - 创建内部开源类型系统

> ID：905250
> 
> 赞同：0
> 
> 时间：2009-05-25T03:43:41.953
> 
> 标签：svn, iis, collaboration

所以我希望创建一个开源类型的环境，以允许我们的国际合作伙伴查看和贡献我们的代码。

目前我们使用 SVN 进行源代码控制，并使用fogbugz 进行缺陷跟踪。但是，这可以满足我们的大部分要求。使用 Fogbugz 启用社区讨论和 wiki

*   WebSVN 似乎无法在 IIS 上运行
*   svn over http dosnt 似乎在 IIS 上运行。

如果这项研究实际上是错误的，有人可以纠正我（以及在哪里可以找到设置这些系统的方向）

建议可以实现类似设置的其他工具。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-25T03:54:33.277

对 Subversion 的 HTTP 访问通过 Apache 运行。您可以在 Windows 服务器上同时运行 IIS 和 Apache，您只需将其中一个设置为使用不同的端口，例如 81 或 8080。

[使用 Subversion 进行版本控制的](http://svnbook.red-bean.com/)第 6 章都是关于配置服务器以运行 Subversion。

我没有使用过它，但其他人推荐了一个[One-Click Setup](http://svn1clicksetup.tigris.org/)工具，它将在您的服务器上安装和配置 subversion。我的猜测是，使用此工具后，您仍然需要在 Apache 或 IIS 中调整端口设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-25T03:55:37.537

你看过[SVN-IIS](http://www.svniis.org/)了吗？

# wcf - 你可以推荐哪些好的资源来学习高级 WCF？

> ID：905260
> 
> 赞同：1
> 
> 时间：2009-05-25T03:52:18.427
> 
> 标签：wcf

我正在寻找任何可以帮助我精通 WCF 的基本资源。

我发现[Microsoft Virtual Labs](http://msdn.microsoft.com/en-us/netframework/wcf-resources.aspx#training)非常好，但我正在寻找更多。如果您向我指出更多资源，我将不胜感激。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-25T04:52:57.853

我的 Michele Leroux Bustamante 有一本非常好的书，叫做[Learning WCF](https://rads.stackoverflow.com/amzn/click/com/0596101627)（有点像 Juwal Lowy 更高级的书的前身）。她详细介绍了 WCF 的所有主题，甚至包括一些非常高级的主题（如联合身份验证）。

Michele 还在 MSDN 上录制了一个由 15 部分组成的截屏视频系列，名为“WCF Top-to-Bottom”，这是开始 WCF 编程的一种非常好的方式。查看她为该系列[收集的链接。](http://www.dasblonde.net/WCFWebcastSeries.aspx)

马克

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-25T04:11:07.847

我喜欢 Juval Lowy 的[书](https://rads.stackoverflow.com/amzn/click/com/B002AWX8UK)。

# sharepoint - 想要扩展 XML Web 部件，当现有的 Web 部件是密封类时，最简单的方法是什么？

> ID：905264
> 
> 赞同：1
> 
> 时间：2009-05-25T03:54:10.093
> 
> 标签：sharepoint, web-parts

我需要扩展 XML Web-part 以允许一些自定义属性。密封现有 XML Web-Part 类的最简单方法是什么？

扩展的自定义属性将用于派生 XML Web 部件的属性，如 XML Url、XSL Url 等。

-甘道夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-25T17:56:24.343

由于它是一个简单的 webpart，我认为最简单的方法是自己编写。您总是可以使用[Reflector了解 Microsoft 的代码](http://www.red-gate.com/products/reflector/)

# iphone - 如何在 iPhone 中更新 sqlite3 数据库

> ID：905273
> 
> 赞同：3
> 
> 时间：2009-05-25T04:04:37.520
> 
> 标签：iphone, database

我想更新我的 sqlite 数据库，但我找不到这样做的方法，以下是代码：

```
 const char *sqlStatement = "UPDATE frame SET fileExist = '1' WHERE name='$variable'";

if(sqlite3_prepare_v2(database, sqlStatement, -1, &compiledStatement, NULL) == SQLITE_OK) {
    NSLog(@"successupdate");
} 
```

从上面的代码中，我希望我的表更新名称等于 $variable 名称；如何实现这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-25T04:42:37.007

你快到了。

```
const char *sqlStatement = "UPDATE frame SET fileExist = '1' WHERE name=?";

sqlite3_prepare_v2(database, sqlStatement, -1, &compiledStatement, NULL);

sqlite3_bind_text(sqlStatement, 1, variable, -1, SQLITE_TRANSIENT);

int success = sqlite3_step(sqlStatement);

sqlite3_reset(sqlStatement); 
```

请注意，准备 SQL 语句只会告诉 SQLite 语句的样子。它将`sqlite3_bind_text`变量应用于 SQL 语句和`sqlite3_step`实际*运行*它的行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-09-24T19:11:47.790

[FMDB](http://gusmueller.com/blog/archives/2008/03/fmdb_for_iphone.html)是一个很好的 SQLite 语句包装器。它负责大部分准备/绑定/步骤/重置的苦差事。对于任何需要数据库但不想使用核心数据的项目，我强烈推荐它。

# svn - 哪些 Subversion 发行版适合企业

> ID：905281
> 
> 赞同：1
> 
> 时间：2009-05-25T04:07:40.593
> 
> 标签：svn

我正在寻找适合在企业内部署的 Subversion 发行版。它需要在 Windows 服务器上运行，并且应该可以扩展以支持数量可能不超过十几个的同时用户（这是同时连接，而不是总用户），并支持最多几个 Gb 的存储库。除了通常的 Subversion 功能之外，我希望实现的主要功能是能够将创建存储库的权利和管理权限分配给指定的个人，而不必授予他们服务器级别的权限或为他们提供读取其他存储库的能力，他们应该没有权利。

我在个人项目中使用 Visual SVN Server 已经有一段时间了，并且对它非常满意，但这显然是一个非常不同的场景。对于 Visual SVN 的适用性（我知道这里已经部分介绍[）](https://stackoverflow.com/questions/848380/is-visual-svn-server-generally-viewed-as-a-trustworthy-svn-server)以及可能更适合企业环境的其他发行版，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-25T04:22:40.107

我们使用的是 svnserve 的 windows 服务版本，我相信它现在随 subversion 的官方发行版一起提供。我为我们的大多数用户配置了服务器（尽管我们在大西洋彼岸有一些）。我们的并发用户比您所说的要少，但总共可能有 20 个用户，但在极端情况下，超过 4 个用户同时访问服务器是不可能的。我们的总存储库大小约为 15Gb。

不过，最灵活的系统是将其托管在 Apache 后面。Apache 的安全控制更加灵活，并且可能更符合您的要求。Windows 上的 Apache 不是最好的，但应该足以满足您的需求。它需要对配置文件进行一些设置，但在权限方面你可以做得很好。我建议阅读官方网站上的 svnbook。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-25T21:31:12.180

坚持使用 VisualSVN 服务器。它运行良好，易于管理和安装，并且与 Active Directory 身份验证很好地集成在一起。这大致就是您对企业产品的所有要求。

鉴于这些以及您的经验，它是您想要的完美工具。您可以非常轻松地授予不同存储库的权限，但显然创建新存储库需要服务器级别的访问权限（除非您提供脚本来为您执行它）并且它们需要服务器级别的磁盘访问权限以及访问配置的能力。但是，一旦创建和设置，它们应该能够为每个存储库提供不同的保护。虽然它并不适合您的情况，但我不确定您是否能够允许人们创建和保护他们自己的存储库，而无需以某种方式访问​​服务器的其余部分。

SVN 支持超过几个 gig 的存储库 - 我在 2 个 repos 中有 12Gig 的数据，有 300k 修订。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-10-09T02:28:40.307

事实证明，没有分发版可以做我需要的事情，所以我在 VisualSVN 之上编写了自己的管理层。我已经以博客格式记录了该过程，以供将来偶然发现此问题的任何人使用：[http ://www.troyhunt.com/2009/10/creating-your-own-custom-subversion.html](http://www.troyhunt.com/2009/10/creating-your-own-custom-subversion.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-25T04:50:48.807

几年来，我们一直在托管 apache 2.0.x，我对此感到非常满意。我们使用[mod_auth_sspi](http://sourceforge.net/projects/mod-auth-sspi)进行用户身份验证，使用[mod_authz_svn](http://svnbook.red-bean.com/en/1.5/svn.ref.mod_authz_svn.conf.html)进行用户/路径授权，使用[mod_dav_svn](http://svnbook.red-bean.com/en/1.1/re58.html)添加 WebDAV 访问权限。一旦你安装和配置它，它就会继续工作。能够使用 WebDAV 浏览存储库也非常方便。如果您需要更多，那么您可以安装任何一种 Web 查看器工具。

只要您可以为每个经过身份验证的用户授予读取权限，然后创建用户组并授予对完整存储库或子树的写入权限，配置就非常简单。分离身份验证和访问控制使得系统在用户来来去去时非常好维护。我们目前在一台 Win2K 服务器上托管三个存储库。我们总共有大约 50 或 60 个用户，并且大部分访问都集中在其中一个存储库上。我上次检查时，我们有大约 7 或 8 个同时连接，总共大约 6GB。我不确定文件大小的计算结果。

一些警告是有道理的......

1.  [用 Subversion](http://svnbook.red-bean.com/)阅读版本控制几次
2.  在开始提交代码之前弄清楚你想要如何布局你的存储库
3.  真正确保您已经考虑了存储库布局......特别是您将如何维护多个版本和分支。

# permissions - 从文档而不是程序文件运行应用程序

> ID：905285
> 
> 赞同：3
> 
> 时间：2009-05-25T04:11:00.077
> 
> 标签：permissions, self-updating

我正在创建一个自我更新的应用程序，我在 Vista 和 Windows 7 上遇到的一个问题是需要具有管理员权限才能更新客户端。我遇到了客户端的问题，他们的用户在受限权限下运行，他们必须让 IT 登录到每台需要更新客户端的机器上，因为用户无法这样做。

我正在考虑的一个可能的解决方法是将启动器应用程序正常安装到 Program Files 中，并将它更新的真实应用程序安装在用户文档中的某个位置，以便他们可以更新和运行新版本而无需 IT 参与。

我想知道我在这里遗漏了哪些潜在的陷阱，或者在沿着这条道路前进之前我应该​​注意什么。我知道 click-once 做了非常相似的事情，我会使用它，除了我需要能够进行静默更新，而无需任何用户交互。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-25T04:48:53.613

这就是它应该的样子。大多数 IT 部门最不想要的就是用户随机更新一个软件。这可能会产生各种无意的副作用，例如与旧版本的文件不兼容、新的和可能不安全的功能等。这就是 IT 部门禁用 Windows 更新并以受控方式手动执行更新的原因。

如果用户想要更新版本的软件，他们应该向 IT 部门提出请求。这些计算机和基础设施不属于他们，他们只是从他们工作的公司借用时间，以便他们可以完成他们的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-25T04:57:44.743

只安装一个程序有问题吗？例如，它是否特别大？

您是否需要管理员权限才能运行您的程序？

如果没有，您可能不需要 Program Files 文件夹。

我建议您完全放弃安装到 Program Files，只需将您的程序安装到用户的文件夹系统中`<userfolder>\AppData\ProgramName`。

如果您碰巧使用 .NET，请查看[ClickOnce 部署机制](http://msdn.microsoft.com/en-us/library/t71a733d.aspx)。它有一个很棒的自我更新功能，可能会让你的生活更轻松。

**编辑：**刚刚看到你的最后一句话。ClickOnce 可以强制用户更新。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-25T05:28:19.790

有几件事：

如果您决定将您的应用程序移动到文档中的某个位置，请确保您的应用程序将数据透明地写入您的程序安装位置，例如，如果代码中的任何位置存在指向错误位置的硬编码路径。也许这对您来说不是问题，但可能需要牢记。

当我们决定实现“实时更新”功能时，我们以几乎相同的方式解决了这个问题。但是我们安装了一个以管理员权限运行的服务。一旦程序需要更新，该服务又可以运行安装程序。使用这种类型的解决方案，您甚至不必将您的应用程序移出程序文件。

干杯！

编辑：

以管理员身份运行服务的另一件好事。是你可以创建一个命名管道通信并让它为你做事，就像你不能作为一个普通用户做的那样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-25T04:47:37.750

加载程序存根是一个很好的方法。唯一的问题是当你必须更新加载器时；同样的初始问题也适用（尽管这应该很少见）。

我能想到的一个问题是，你正在超越让事情更“安全”的整个想法。由于您的可执行文件存在于非管理员应该可以完全访问的位置，因此其他东西可能会破坏您的 exe 从而破坏安全性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-29T07:03:50.607

您可能可以利用[AppLocker](http://www.microsoft.com/windows/enterprise/products/applocker.aspx)。虽然我不再运行 Vista，但它可能只适用于 Win7。;)

# python - Python - 如何实现桥（或适配器）设计模式？

> ID：905289
> 
> 赞同：14
> 
> 时间：2009-05-25T04:12:43.230
> 
> 标签：python, design-patterns

我正在努力在 Python 中实现 Bridge 设计模式（或适配器等替代方案）

我希望能够编写这样的代码来根据提供的 URL 转储数据库模式：

```
urls = ['sqlite://c:\\temp\\test.db', 'oracle://user:password@tns_name'];
for url in urls:
    db = Database(url);
    schema = db.schema() 
```

我的类定义为

```
class Database():
    def __init__(self, url):
        self.db_type = string.split(self.url, "://")[0]

class Oracle():
    def schema(self):
        # Code to return Oracle schema

class SQLite():
    def schema(self):
        # Code to return SQLite schema 
```

如何将这 3 个类“粘合”在一起，以便让第一个代码块正确执行？我已经用谷歌搜索了，但一定是度过了充实的一天，因为它只是没有在我的脑海中出现......

提前致谢

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2009-05-25T04:16:29.937

改用工厂模式：

```
class Oracle(object):
  ...

class SQLite(object):
  ...

dbkind = dict(sqlite=SQLite, oracle=Oracle)

def Database(url):
  db_type, rest = string.split(self.url, "://", 1)
  return dbkind[db_type](rest) 
```

# regex - 如何在正则表达式中转义元字符

> ID：905290
> 
> 赞同：0
> 
> 时间：2009-05-25T04:13:36.067
> 
> 标签：regex, asp-classic

语言：asp

这是我的代码示例：

```
str = "www.example.com/gotobuy.aspx?id=1234"
key_word = ".obuy."
Dim regEx
Set regEx = New RegExp
regEx.Pattern = key_word
regEx.IgnoreCase = True
regEx.Global = True
Set Matches = regEx.Execute(str)
if matches.count > 0 then
    new_string =  str
    For Each Match in Matches
        new_string = replace(new_string,match.value,"")
    Next
else
    new_string = str
end if
response.write new_string 
```

响应将显示：

```
www.example.com/goaspx?id=1234 
```

我知道 (.) 是元字符之一。但是如果我想要 (.) 只是 (.)，而不是任何一个单词。我该怎么办？

感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-25T04:20:12.010

In addition to escaping the `.` with `\`, many people like to use a character class with only `.` in it: `[.]`, they find it more aesthetically pleasing. You also don't run into the problem of multiple levels of escaping. With `\`, you may have to use many levels of escaping if your language's version of strings treat `\` as a special character: `"\\."`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-25T04:18:05.443

用于`\.`匹配`.`字面意思。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-25T04:21:53.837

Since . is a metacharacter, to match '.' you need to escape it, like as `\.`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-25T04:19:33.430

您需要转义要按字面处理的元字符。在大多数正则表达式系统中，这意味着用反斜杠作为前缀。例如：`"foo\.bar"`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-25T04:38:36.170

For a great regular expression tutorial see [http://www.regular-expressions.info/](http://www.regular-expressions.info/)

# iphone - iPhone 需要获取子视图的 CGContextRef 上下文引用

> ID：905291
> 
> 赞同：0
> 
> 时间：2009-05-25T04:14:19.327
> 
> 标签：iphone, cocoa-touch

我正在使用 IBoutlet 来获取对我添加到界面构建器中的主视图的子视图的引用，但由于这不会让我访问 drawRect：我将无法获得要绘制的上下文. 无论如何我仍然可以获得图形上下文，以便我可以在子视图上绘制？我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-25T04:22:23.930

你不能那样画；您必须在响应`drawRect`呼叫时进行绘制，而不是像某些框架允许的那样在任何时候绘制。

正确的做法是：在 Xcode 中创建一个 UIView 子类。切换到 Interface Builder，选择您的子视图，并将其“Class Identity”（在“Tools > Identity Inspector”下）更改为新子类的名称。

然后在您的子类中，您可以实现`drawRect`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-01-04T19:50:44.173

从技术上讲，有一种方法可以让一个对象通过 view.layer.delegate 路由成为另一个对象的绘图委托。可以构造一个委托来实现

*   (void)drawLayer:(CALayer *)layer inContext:(CGContextRef)ctx

这使您能够在必要时重用绘图指令。但是对于其他程序员来说阅读和理解可能很乏味。大多数人会避免它，除非它消除了代码重复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-25T04:23:12.277

你永远不应该在另一个视图中绘图，甚至是子视图。子视图应该自己绘制，并且可以访问自己的图形上下文。您无法访问另一个视图的上下文；它们由框架处理并在调用`-drawRect:`适当的视图之前设置。

# ruby-on-rails - Rails w/ ActiveRecord 会话和 Restful-authentication：会话表何时被写入？

> ID：905295
> 
> 赞同：1
> 
> 时间：2009-05-25T04:17:36.317
> 
> 标签：ruby-on-rails, session, restful-authentication

警告：其中一些可能是非常错误的，所以如果我的假设不正确，请告诉我。

这是我要完成的工作：

我正在使用restful-authentication进行登录。但是，当我在 UI 中使用 flex/ruby_amf 时，我必须分别对来自 flex 的每个连接进行身份验证。

我决定这样做的方法是将登录屏幕重定向到嵌入式 Flash 页面，将 session-id 作为 flashvar 插入。flash 应用程序会随每个请求发送 session-id，并且所有相关控制器上的 before 过滤器会检查与 session-id 标识的会话关联的用户是否已登录。

我将用户与会话关联的方法是在会话表中添加一个“user_id”列，并执行从登录函数调用的 sql“更新会话集 user_id...”类型查询。

但是，user_id 仅在用户第二次登录时更新。稍作调查表明，在执行登录功能期间，会话表中的记录尚不存在。

所以，如果到目前为止一切都有意义，并且符合最佳实践等，那么我的问题是：

会话表中的记录是在什么时间点创建的？有没有办法更新登录函数中的会话对象并让 Rails 为我将 user_id 写入数据库？

Rails 中会话的行为对我来说是一个真正的谜。我会很感激任何帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-01T18:24:45.667

在 Rails 2.3 中，会话在 Rack 应用程序完成处理后保存。在传统的 Rails 应用程序中，这将在请求被完全处理之后：过滤器之前、控制器操作、视图呈现和过滤器之后。进去看看`actionpack/lib/action_dispatch/vendor/rack-1.1.pre/rack/session/abstract/id.rb`。

如果你仔细想想，这完全有道理。每次在会话中放置内容时将会话写入其存储区会产生大量额外开销。

它是 Rails，所以如果你想把它弄得够呛，当然，你可以给自己打个猴子补丁，以便随时编写会话来存储。我不推荐它。随着 Rails 的发展，您最终将不得不不断地修改代码。

你是对的，对于 ActiveRecord::SessionStore，一行确实映射到一个会话。该`data`列是您放入会话中的每个对象的编码形式。每次收到请求时，Rails 都必须通过创建先前存储在其中的所有对象的新实例来重建会话，因为它存在。

# objective-c - 无法在 Windows 上使用 Gnustep 编译 Objective C

> ID：905297
> 
> 赞同：2
> 
> 时间：2009-05-25T04:18:07.173
> 
> 标签：objective-c, compilation, gnustep

嗨，我是初学者学习目标 c。我发现一个错误“hello.m:1:34: Foundation/Foundation.h: No such file or directory”我知道我需要制作一个make文件我可以知道如何制作make文件吗

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-03T18:58:19.343

无需创建生成文件。如果您按照 Pax 的说明从“所有程序 -> GNUstep -> Shell”启动 MinGW，则只需编译 .m 文件即可。

我的 GNUstep 安装在 c:\GNUstep\GNUstep\System 中。如果你的不同，你应该相应地更改 Foundation.h 的导入。

我这样做了：

1.  创建如下所示的 c:\myprogs\obj-c\hello\hello.m：

//------------ 你好.m

```
#import <../../GNUstep/System/Library/Headers/Foundation/Foundation.h>

int main(int argc, const char* argv[])
{
    NSAutoreleasePool* pool = [[NSAutoreleasePool alloc] init];
    NSLog(@"Hello from Hello.m!");

    [pool release];
    return 0;
} 
```

//------------

2.  启动 MinGW 外壳。（看上面。）

3.  在 shell 命令行上，切换到程序代码所在的目录。（请注意，由于这不是 Unix，因此必须包含 Windows 驱动器号。）：

    cd /c/myprogs/obj-c/hello

4.  编译程序：

    gcc -o hello hello.m -I/c/GNUstep/GNUstep/System/Library/Headers \

    -L /c/GNUstep/GNUstep/系统/库/库 -lobjc -lgnustep-base \

    -fconstant-string-class=NSConstantString

（请注意，“\”字符允许我们将命令扩展到多行。）

我在编译时收到以下信息性消息：

```
Info: resolving ___objc_class_name_NSAutoreleasePool by linking to __imp____objc_class_name_NSAutoreleasePool (auto-import)
Info: resolving ___objc_class_name_NSConstantString by linking to __imp____objc_class_name_NSConstantString (auto-import) 
```

运行产生的 hello.exe 给了我这个：

```
2009-06-03 14:44:59.483 hello[1240] Hello from Hello.m! 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-25T04:37:17.577

这个问题看起来就像您没有指示 gcc 在哪里可以找到相关的包含文件（即，`Foundation/Foundation.h`所在的目录）。

您是在 MinGW 下还是从命令提示符下运行 gcc。你应该`All Programs -> GNUstep -> Shell"`在你的开始菜单上有一个 " 来显示这个 shell。

为此的生成文件应该很简单：

```
include $(GNUSTEP_MAKEFILES)/common.make
TOOL_NAME = YourProg
YourProg_OBJC_FILES = source_code.m
include $(GNUSTEP_MAKEFILES)/tool.make 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-02-08T07:37:55.130

如果您将源代码放在 GNUStep 的主目录中，则无需提供 Foundation 框架的相对位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-04-29T00:34:44.267

使用诸如 paxdiablo 指定的 makefile 可能是最简单的，因为不是每次都尝试记住一个神秘的命令行，而是设置 makefile 然后从源文件夹调用 make。但是，我在 Windows 下的经验表明 GNUStep 和 Windows，即使使用 shell，也不会使用它来构建，因为它找不到它需要的所有 make 文件 - 添加一个值为 /GNUstep/System/ 的环境变量 GNUSTEP_MAKEFILES Library/Makefiles 并重新启动该 shell，然后它无法找到标准 makefile 的任何错误都应该成为历史。（我曾尝试使用 makefile 的完整路径，但发现这包括特定的 makefile，但在尝试包含更多的 makefile 时失败，因此采用简单的方法并添加环境变量。）

# jquery - JQuery - 将ajax响应存储到全局变量中

> ID：905298
> 
> 赞同：68
> 
> 时间：2009-05-25T04:18:14.693
> 
> 标签：jquery, xml, ajax, response

我仍然是 jQuery 和 ajax 场景的新手，但我有一个 $.ajax 请求执行 GET 以检索一些 XML 文件（约 6KB 或更少），但是对于用户在该页面上花费的时间，XML 内容应该不会/不会改变（这个设计我无法改变，我也无权更改 XML 文件，因为我正在从其他地方读取它）。因此，我有一个将响应数据存储到其中的全局变量，并且随后对数据的任何查找都在此变量上完成，因此不需要发出多个请求。

鉴于 XML 文件可以增加这一事实，我不确定这是不是最佳实践，而且来自 java 背景，我对全局公共变量的想法通常是不可以的。

所以我的问题是是否有更好的方法来做到这一点，以及如果文件扩展为一些荒谬的文件大小是否会导致任何内存问题的问题？

我认为数据可以传递到 xml 对象内的一些 getter/setter 类型函数中，这将解决我的全局公共变量问题，但仍然提出了我是否应该将响应存储在对象本身内的问题。

例如，我目前所做的是：

```
// top of code
var xml;
// get the file
$.ajax({
  type: "GET",
  url: "test.xml",
  dataType: "xml",
  success : function(data) {
    xml = data;
  }
});
// at a later stage do something with the 'xml' object
var foo = $(xml).find('something').attr('somethingElse'); 
```

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2010-08-17T15:17:08.820

这是一个可以很好地完成工作的函数。我无法获得上面的最佳答案。

```
jQuery.extend({
    getValues: function(url) {
        var result = null;
        $.ajax({
            url: url,
            type: 'get',
            dataType: 'xml',
            async: false,
            success: function(data) {
                result = data;
            }
        });
       return result;
    }
}); 
```

然后访问它，像这样创建变量：

```
var results = $.getValues("url string"); 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2009-05-25T04:35:00.060

除了存储它没有其他办法。内存分页应该减少那里的潜在问题。

我建议不要使用名为“xml”的全局变量，而是执行以下操作：

```
var dataStore = (function(){
    var xml;

    $.ajax({
      type: "GET",
      url: "test.xml",
      dataType: "xml",
      success : function(data) {
                    xml = data;
                }
    });

    return {getXml : function()
    {
        if (xml) return xml;
        // else show some error that it isn't loaded yet;
    }};
})(); 
```

然后访问它：

```
$(dataStore.getXml()).find('something').attr('somethingElse'); 
```

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2011-12-30T13:40:07.500

这对我有用：

```
var jqxhr = $.ajax({
    type: 'POST',       
    url: "processMe.php",
    data: queryParams,
    dataType: 'html',
    context: document.body,
    global: false,
    async:false,
    success: function(data) {
        return data;
    }
}).responseText;

alert(jqxhr);
// or...
return jqxhr; 
```

需要注意的重要事项：`global: false`，`async:false`最后`responseText`链接到`$.ajax`请求。

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2011-01-19T17:33:21.213

你不必做任何这些。我的项目遇到了同样的问题。您所做的是在成功回调中进行函数调用以重置全局变量。只要您将异步 javascript 设置为 false，它就会正常工作。这是我的代码。希望能帮助到你。

```
var exists;

//function to call inside ajax callback 
function set_exists(x){
    exists = x;
}

$.ajax({
    url: "check_entity_name.php",
    type: "POST",
    async: false, // set to false so order of operations is correct
    data: {entity_name : entity},
    success: function(data){
        if(data == true){
            set_exists(true);
        }
        else{
            set_exists(false);
        }
    }
});
if(exists == true){
    return true;
}
else{
    return false;
} 
```

希望这可以帮助你。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2015-03-08T17:02:40.867

您可能会发现将响应值存储在 DOM 元素中更容易，因为它们可以全局访问：

```
<input type="hidden" id="your-hidden-control" value="replace-me" />

<script>
    $.getJSON( '/uri/', function( data ) {
        $('#your-hidden-control').val( data );
    } );
</script> 
```

这样做的好处是不需要将 async 设置为 false。显然，这是否合适取决于您要达到的目标。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2011-05-17T12:46:55.660

您的问题可能与任何本地或全局范围无关，只是“成功”函数执行与您尝试从变量中取出数据之间的服务器延迟。

您可能正试图在 ajax“成功”函数触发之前打印变量的内容。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2014-12-26T09:45:36.340

```
 function getJson(url) {
            return JSON.parse($.ajax({
                type: 'GET',
                url: url,
                dataType: 'json',
                global: false,
                async: false,
                success: function (data) {
                    return data;
                }
            }).responseText);
        }

        var myJsonObj = getJson('/api/current'); 
```

这行得通！！！

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2011-07-13T14:18:00.873

```
 function get(a){
            bodyContent = $.ajax({
                  url: "/rpc.php",
                  global: false,
                  type: "POST",
                  data: a,
                  dataType: "html",
                  async:false
               } 
            ).responseText;
            return bodyContent;

  } 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-08-23T14:35:11.943

也碰到了这个。很多答案，然而，我将提供一个简单正确的答案。关键是让你的 $.ajax 调用..sync！

```
$.ajax({  
    async: false, ... 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2012-09-19T17:22:14.297

在事件的“document.ready”阶段，我真的很难将 jQuery ajax 的结果放入我的变量中。

当用户在页面加载后触发选择框的“onchange”事件时，jQuery 的 ajax 将加载到我的变量中，但在页面首次加载时数据不会提供变量。

我尝试了很多很多很多不同的方法，但最终，查尔斯·吉尔伯特的方法对我最有效。

向查尔斯吉尔伯特致敬！使用他的回答，即使我的页面第一次加载，我也能够将数据放入我的变量中。

这是工作脚本的示例：

```
 jQuery.extend
    (
        {
            getValues: function(url) 
            {
                var result = null;
                $.ajax(
                    {
                        url: url,
                        type: 'get',
                        dataType: 'html',
                        async: false,
                        cache: false,
                        success: function(data) 
                        {
                            result = data;
                        }
                    }
                );
               return result;
            }
        }
    );

    // Option List 1, when "Cats" is selected elsewhere
    optList1_Cats += $.getValues("/MyData.aspx?iListNum=1&sVal=cats");

    // Option List 1, when "Dogs" is selected elsewhere
    optList1_Dogs += $.getValues("/MyData.aspx?iListNum=1&sVal=dogs");

    // Option List 2, when "Cats" is selected elsewhere
    optList2_Cats += $.getValues("/MyData.aspx?iListNum=2&sVal=cats");

    // Option List 2, when "Dogs" is selected elsewhere
    optList2_Dogs += $.getValues("/MyData.aspx?iListNum=2&sVal=dogs"); 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2011-08-26T10:31:35.557

我知道线程很旧，但我认为其他人可能会觉得这很有用。根据jquey.com

```
var bodyContent = $.ajax({
  url: "script.php",
  global: false,
  type: "POST",
  data: "name=value",
  dataType: "html",
  async:false,
  success: function(msg){
     alert(msg);
  }
}).responseText; 
```

将有助于将结果直接转换为字符串。注意**.responseText;** 部分。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-05-25T04:35:03.803

IMO 您可以将此数据存储在全局变量中。但最好使用一些更独特的名称或使用命名空间：

我的公司 = {};

...
MyCompany.cachedData = 数据；

并且最好使用 json 来实现这些目的，json 格式的数据通常比 xml 格式的相同数据小得多。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-05-25T05:06:16.977

我建议应该避免从服务器获取大型 XML 文件：变量“xml”应该像*缓存*一样使用，而不是作为数据存储本身。

在大多数情况下，可以检查缓存并查看是否需要向服务器发出请求以获取所需的数据。这将使您的应用程序更轻、更快。

干杯，jrh。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2009-05-25T05:06:52.873

.get 响应默认被缓存。因此，你真的不需要做任何事情来获得想要的结果。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-07-21T00:17:45.330

与上一个答案类似：

```
<script type="text/javascript">

    var wait = false;

    $(function(){
        console.log('Loaded...');
        loadPost(5);
    });

    $(window).scroll(function(){
      if($(window).scrollTop() >= $(document).height() - $(window).height()-100){
        // Get last item
        var last = $('.post_id:last-of-type').val();
        loadPost(1,last);
      }
    });

    function loadPost(qty,offset){
      if(wait !== true){

        wait = true;

        var data = {
          items:qty,
          oset:offset
        }

        $.ajax({
            url:"api.php",
            type:"POST",
            dataType:"json",
            data:data,
            success:function(data){
              //var d = JSON.parse(data);
              console.log(data);
              $.each(data.content, function(index, value){
                $('#content').append('<input class="post_id" type="hidden" value="'+value.id+'">')
                $('#content').append('<h2>'+value.id+'</h2>');
                $('#content').append(value.content+'<hr>');
                $('#content').append('<h3>'+value.date+'</h3>');
              });
              wait = false;
            }
        });
      }
    }
</script> 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-04-23T16:39:31.847

就用这个。简单有效：

```
var y;

function something(x){
return x;
}

$.get(bunch of codes, function (data){

y=something(data);
)}

//anywhere else
console.log(y); 
```

# objective-c - 将 UINavigationController 与同一类的 UIViewControllers 实例一起使用，并且没有 NIB

> ID：905302
> 
> 赞同：1
> 
> 时间：2009-05-25T04:21:42.527
> 
> 标签：objective-c, iphone

在尝试基于 UINavigationController 的实验性 iPhone 应用程序时，当用户导航回上一个视图时遇到了问题。

简单的应用程序使用 UINavigationController，UIViewControllers 的新实例被推送到该控制器上。这些实例都是同一个类（在本例中，类 MyViewController 是 UIViewController 的子类），并且是手动创建的（不使用 NIB）。每个实例都包含一个单独的 UITableView 实例作为 UIViewController 的视图。

下面的 tableView:didSelectRowAtIndexPath: 方法来自 MyViewController 类。当用户选择表格单元格时，它会创建另一个 MyViewController 实例并将其推送到 navigationController 上：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    MyViewController *nextViewController = [[MyViewController alloc] initWithNibName:nil bundle:nil];
    [self.navigationController pushViewController:nextViewController animated:YES];
    [nextViewController release];
} 
```

用户可以通过一系列视图向前导航，每个视图都包含一个表格。导航回上一个屏幕时会出现此问题。应用程序中止，xcode 启动调试器。

可以通过在上面的 tableView:didSelectRowAtIndexPath: 方法中不释放 MyViewController 实例，或者在 MyViewController 的 dealloc 方法中不对 'myTableView' 实例调用 dealloc 来防止该错误。然而，这不是一个真正的解决方案。据我所知， UINavigationController “拥有”推送的 UIViewController 实例，然后可以安全地从分配它的客户端释放。那么，这个实验性应用程序有什么问题呢？为什么当用户导航回来时它会终止？

下面是 MyViewController 类的其他一些方法：

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil {
    if (self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil]) {
        self.title = @"My Table";
        myTableView = [[UITableView alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
        myTableView.delegate = self; 
        myTableView.dataSource = self;
        self.view = myTableView;
    }
    return self;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"MyTable"];
    if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithFrame:CGRectMake(0,0, 300, 50) reuseIdentifier:@"MyTable"];
        [cell autorelease];
    }
    cell.text = [NSString stringWithFormat:@"Sample: %d", indexPath.row];
    return cell;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return 3; // always show three sample cells in table
}

- (void)dealloc {
    [myTableView dealloc];
    [super dealloc];
} 
```

**编辑：**

问题已解决 - 感谢 Rob Napier 指出问题。

-loadView 方法现在使用本地 UITableView 实例设置视图：

```
- (void)loadView {
    UITableView *myTableView = [[UITableView alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    myTableView.delegate = self; 
    myTableView.dataSource = self;
    self.view = myTableView;
    [myTableView release];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-25T04:39:06.450

您以错误的方法设置视图。您应该在 中设置它`-loadView`，而不是`-initwithNibName:bundle:`. 查看*视图控制器编程指南*“使用视图控制器”中的示例。

# html - 有没有办法让 Rails 辅助函数不生成 XHTML 而是生成 HTML？

> ID：905304
> 
> 赞同：1
> 
> 时间：2009-05-25T04:22:13.510
> 
> 标签：html, ruby-on-rails, xhtml

我想使用 HTML 4.01 Strict，并在我的应用程序模板中使用了它的 DOCTYPE。但是看起来像样式表包含在辅助函数中

```
<%= stylesheet_link_tag 'style' %> 
```

生成的代码是 XHTML：

> <link href="/stylesheets/style.css?1243210734" media="screen" rel="stylesheet" type="text/css" />

有没有办法让 Rails 生成 HTML 而不是 XHTML？（例如，HTML 将验证）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-25T02:23:18.560

只是对上面包含的代码的快速修复，它确实有效。

```
module ActionView::Helpers::TagHelper
  def tag_with_html(name, options = nil, open = true, escape = true)
    tag_without_html(name, options, true, escape)
  end
  alias_method_chain :tag, :html
end 
```

谢谢你的提示！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-25T06:02:08.410

不是真的，不。

编辑：根据我下面的评论，这应该可行（我仍然感到不安，但我想不出任何会因此而破裂的东西）

```
module ActionView::Helpers::TagHelper
  def tag_with_html(name, options = nil, open, escape = true)
    tag_without_html(name, options, true, escape)
  end
  alias_method_chain :tag, :html
end 
```

# model-view-controller - 我的 MVC 存储库模式和 StructureMap 的问题

> ID：905313
> 
> 赞同：0
> 
> 时间：2009-05-25T04:26:52.230
> 
> 标签：model-view-controller, structuremap, repository-pattern

我有一个在 ado.net 实体框架之上创建的存储库模式。当我尝试实现 StructureMap 来解耦我的对象时，我不断收到 StackOverflowException（无限循环？）。这是模式的样子：

IEntityRepository where TEntity : class 定义基本的 CRUD 成员

MyEntityRepository : IEntityRepository 实现 CRUD 成员

IEntityService where TEntity : class 定义为每个成员返回公共类型的 CRUD 成员。

MyEntityService : IEntityService 使用存储库检索数据并返回一个通用类型作为结果（IList、bool 等）

问题似乎与我的服务层有关。更具体地说是构造函数。

```
 public PostService(IValidationDictionary validationDictionary)
        : this(validationDictionary, new PostRepository())
    { }

    public PostService(IValidationDictionary validationDictionary, IEntityRepository<Post> repository)
    {
        _validationDictionary = validationDictionary;
        _repository = repository;
    } 
```

从控制器中，我传递了一个实现 IValidationDictionary 的对象。我明确地调用第二个构造函数来初始化存储库。

这是控制器构造函数的样子（第一个创建验证对象的实例）：

```
 public PostController()
    {
        _service = new PostService(new ModelStateWrapper(this.ModelState));
    }

    public PostController(IEntityService<Post> service)
    {
        _service = service;
    } 
```

如果我不传递我的 IValidationDictionary 对象引用，一切正常，在这种情况下，第一个控制器构造函数将被删除，并且服务对象将只有一个接受存储库接口作为参数的构造函数。

感谢您对此的任何帮助:) 谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-29T01:38:38.777

看起来循环引用与服务层依赖于控制器的模型状态和控制器依赖于服务层的事实有关。

我必须重写我的验证层才能让它工作。这就是我所做的。

定义通用验证器接口，如下所示：

```
public interface IValidator<TEntity>
{
    ValidationState Validate(TEntity entity);
} 
```

我们希望能够返回一个 ValidationState 的实例，它显然定义了验证的状态。

```
public class ValidationState
{
    private readonly ValidationErrorCollection _errors;

    public ValidationErrorCollection Errors
    {
        get
        {
            return _errors;
        }
    }

    public bool IsValid
    {
        get
        {
            return Errors.Count == 0;
        }
    }

    public ValidationState()
    {
        _errors = new ValidationErrorCollection();
    }
} 
```

请注意，我们还需要定义一个强类型错误集合。该集合将包含 ValidationError 对象，其中包含我们正在验证的实体的属性名称以及与之关联的错误消息。这只是遵循标准的 ModelState 接口。

```
public class ValidationErrorCollection : Collection<ValidationError>
{
    public void Add(string property, string message)
    {
        Add(new ValidationError(property, message));
    }
} 
```

这是 ValidationError 的样子：

```
public class ValidationError
{
    private string _property;
    private string _message;

    public string Property
    {
        get
        {
            return _property;
        }

        private set
        {
            _property = value;
        }
    }

    public string Message
    {
        get
        {
            return _message;
        }

        private set
        {
            _message = value;
        }
    }

    public ValidationError(string property, string message)
    {
        Property = property;
        Message = message;
    }
} 
```

剩下的就是 StructureMap 的魔法。我们需要创建验证服务层来定位验证对象并验证我们的实体。我想为此定义一个接口，因为我希望任何使用验证服务的人都完全不知道 StructureMap 的存在。此外，我认为除了引导程序逻辑之外的任何地方都撒上 ObjectFactory.GetInstance() 是个坏主意。保持中心化是确保良好可维护性的好方法。无论如何，我在这里使用装饰器模式：

```
public interface IValidationService
{
    ValidationState Validate<TEntity>(TEntity entity);
} 
```

我们最终实现了它：

```
public class ValidationService : IValidationService
{
    #region IValidationService Members

    public IValidator<TEntity> GetValidatorFor<TEntity>(TEntity entity)
    {
        return ObjectFactory.GetInstance<IValidator<TEntity>>();
    }

    public ValidationState Validate<TEntity>(TEntity entity)
    {
        IValidator<TEntity> validator = GetValidatorFor(entity);

        if (validator == null)
        {
            throw new Exception("Cannot locate validator");
        }

        return validator.Validate(entity);
    }

    #endregion
} 
```

我将在我的控制器中使用验证服务。我们可以将它移动到服务层并让 StructureMap 使用属性注入将控制器的 ModelState 实例注入到服务层，但我不希望服务层与 ModelState 耦合。如果我们决定使用另一种验证技术怎么办？这就是为什么我宁愿把它放在控制器中。这是我的控制器的样子：

```
public class PostController : Controller
{
    private IEntityService<Post> _service = null;
    private IValidationService _validationService = null;

    public PostController(IEntityService<Post> service, IValidationService validationService)
    {
        _service = service;
        _validationService = validationService;
    }
} 
```

在这里，我使用 StructureMap 注入我的服务层和验证服务实例。因此，我们需要在 StructureMap 注册表中注册两者：

```
 ForRequestedType<IValidationService>()
       .TheDefaultIsConcreteType<ValidationService>();

    ForRequestedType<IValidator<Post>>()
            .TheDefaultIsConcreteType<PostValidator>(); 
```

就是这样。我没有展示我如何实现我的 PostValidator，但它只是实现 IValidator 接口并在 Validate() 方法中定义验证逻辑。剩下要做的就是调用验证服务实例来检索验证器，调用实体上的 validate 方法并将任何错误写入 ModelState。

```
 [AcceptVerbs(HttpVerbs.Post)]
    public ActionResult Create([Bind(Exclude = "PostId")] Post post)
    {
        ValidationState vst = _validationService.Validate<Post>(post);

        if (!vst.IsValid)
        {
            foreach (ValidationError error in vst.Errors)
            {
                this.ModelState.AddModelError(error.Property, error.Message);
            }

            return View(post);
        }

        ...
    } 
```

希望我能帮助别人解决这个问题:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-12-19T19:52:46.610

我使用了一个类似的解决方案，其中涉及 IValidationDictionary 的通用实现者使用 StringDictionary，然后将错误从中复制回控制器中的模型状态。

验证字典接口

```
 public interface IValidationDictionary
    {
        bool IsValid{get;}
        void AddError(string Key, string errorMessage);
        StringDictionary errors { get; }
    } 
```

验证字典的实现不参考模型状态或其他任何东西，因此结构图可以轻松创建它

```
public class ValidationDictionary : IValidationDictionary
{

    private StringDictionary _errors = new StringDictionary();

    #region IValidationDictionary Members

    public void AddError(string key, string errorMessage)
    {
        _errors.Add(key, errorMessage);
    }

    public bool IsValid
    {
        get { return (_errors.Count == 0); }
    }

    public StringDictionary errors
    {
        get { return _errors; }
    }

    #endregion
} 
```

控制器中的代码将错误从字典复制到模型状态。这可能最好作为 Controller 的扩展功能。

```
protected void copyValidationDictionaryToModelState()
{
    // this copies the errors into viewstate
    foreach (DictionaryEntry error in _service.validationdictionary.errors)
    {
        ModelState.AddModelError((string)error.Key, (string)error.Value);
    }
} 
```

因此引导代码是这样的

```
public static void BootstrapStructureMap()
{
    // Initialize the static ObjectFactory container
    ObjectFactory.Initialize(x =>
    {
        x.For<IContactRepository>().Use<EntityContactManagerRepository>();
        x.For<IValidationDictionary>().Use<ValidationDictionary>();
        x.For<IContactManagerService>().Use<ContactManagerService>(); 
    });
} 
```

创建控制器的代码是这样的

```
public class IocControllerFactory : DefaultControllerFactory
{
    protected override IController GetControllerInstance(RequestContext requestContext, Type controllerType)
    {
        return (Controller)ObjectFactory.GetInstance(controllerType);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-07-31T05:49:06.660

只是对此进行快速查询。它对我帮助很大，所以感谢您提出答案，但我想知道 TEntity 存在于哪个命名空间中？我看到Colletion（TEntity）需要System.Collections.ObjectModel。我的文件无需进一步编译，但我看到您的 TEntity 引用以蓝色突出显示，这表明它具有类类型，我的在 Visual Studio 中是黑色的。希望你能帮忙。我很想得到这个工作。

你有没有找到任何方法将验证分离到服务层？我的直觉告诉我，在控制器中进行验证有点臭，但我一直在寻找一种方法来将验证错误消息传递回控制器，而无需将服务层与控制器紧密耦合并且找不到任何东西。:(

再次感谢您的精彩帖子！

劳埃德

# c# - 大小写排列

> ID：905317
> 
> 赞同：5
> 
> 时间：2009-05-25T04:31:47.033
> 
> 标签：c#, .net, string, capitalization

我想建立一个包含单词大写所有可能排列的列表。所以它会是

```
List<string> permutate(string word)
{
    List<string> ret = new List<string>();
    MAGIC HAPPENS HERE
    return ret;
} 
```

所以说我输入`"happy"`我应该得到一个数组

```
{happy, Happy, hAppy, HAppy, haPpy, HaPpy ... haPPY, HaPPY, hAPPY, HAPPY} 
```

我知道有很多函数会将第一个字母大写，但我如何在单词中添加任意字母？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-25T04:54:00.363

如果将字符串转换为 char 数组，则可以修改单个字符。像这样的东西应该可以解决问题......

```
public static List<string> Permute( string s )
{
  List<string> listPermutations = new List<string>();

  char[] array = s.ToLower().ToCharArray();
  int iterations = (1 << array.Length) - 1;

  for( int i = 0; i <= iterations; i++ )
  {
    for( int j = 0; j < array.Length; j++ )
    array[j] = (i & (1<<j)) != 0 
                  ? char.ToUpper( array[j] ) 
                  : char.ToLower( array[j] );
    listPermutations.Add( new string( array ) );
  }
  return listPermutations;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-25T04:50:10.163

请记住，虽然公认的答案是将任意字母大写的最直接方法，但如果您要在同一组字母上反复更改大写（例如，“快乐”中的 32 次，并且对于更长的单词呈指数增长） ，将字符串转换为 char[]，设置适当的字母，并从数组构造字符串会更有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-25T05:32:04.137

要“置换”你的字符串（从技术上讲，这不是置换，因为你没有改变任何东西的顺序，但我不想被视为一个 *l-retentive :-)，我会使用递归方法，它基本上“置换”字符串减去第一个字符，并将它们附加到该字符的上下变化。

类似的东西（在 C 中，我的 C# 并没有真正达到标准，所以你必须转换它）：

```
#include <stdio.h>
#include <string.h>

static void permute (char *prefix, char *str) {
    char *newPrefix;

    /* End of string, print and return. */

    if (*str == '\0') {
        printf ("%s\n", prefix);
        return;
    }

    /* Allocate space for new prefix. */

    if ((newPrefix = malloc (strlen (prefix) + 2)) == NULL) {
        printf ("ERROR: Cannot allocate memory.\n");
        return;
    }

    /* Do lowercase/sole version and upper version if needed. */

    sprintf (newPrefix, "%s%c", prefix, *str);
    permute (newPrefix, &(str[1]));

    if (islower (*str) {
        sprintf (newPrefix, "%s%c", prefix, toupper(*str));
        permute (newPrefix, &(str[1]));
    }

    /* Free prefix and return. */

    free (newPrefix);
} 
```

```
int main (int argc, char *argv[]) {
    char *str, *strPtr;

    /* Check and get arguments. */

    if (argc < 2) {
        printf ("Usage: permute <string to permute>\n");
        return 1;
    }

    if ((str = malloc (strlen (argv[1]) + 1)) == NULL) {
        printf ("ERROR: Cannot allocate memory.\n");
        return 1;
    }
    strcpy (str, argv[1]);

    /* Convert to lowercase. */
    for (strPtr = s; *strPtr != '\0'; strPtr++)
        *strPtr = toupper (*strPtr);

    /* Start recursion with empty prefix. */

    permute ("", str);

    /* Free and exit. */

    free (str);
    return 0;
} 
```

运行此作为`"permute Pax1"`返回：

```
pax1
paX1
pAx1
pAX1
Pax1
PaX1
PAx1
PAX1 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-10-25T03:08:32.660

我能够创建一个控制台应用程序来执行此操作..

```
 public static class Program
{
    static void Main()
    {
        Console.WriteLine("Enter string");
        string value = Console.ReadLine();

        value = value.ToLower();

        List<string> list = new List<string>();

         var results =
             from e in Enumerable.Range(0, 1 << value.Length)
             let p =
             from b in Enumerable.Range(0, value.Length)
             select (e & (1 << b)) == 0 ? (char?)null : value[b]
             select string.Join(string.Empty, p);

        foreach (string s in results)
        {
            string newValue = value;
            s.ToLower();
            foreach(char c in s)
            {
                var Old = c.ToString().ToLower();
                var New = c.ToString().ToUpper();
                newValue=ReplaceFirstOccurrence(newValue, Old, New);
            }
            list.Add(newValue);
        }

        foreach(string s in list)
        {
            Console.WriteLine(s);
        }

        Console.ReadKey();
    }

    public static string ReplaceFirstOccurrence(string Source, string Find, string Replace)
    {
        int Place = Source.IndexOf(Find);
        string result = Source.Remove(Place, Find.Length).Insert(Place, Replace);
        return result;
    }    
}
```

我得到了字符串中所有可能的字符子集的列表，然后对于每个子集中的每个字符，将它们替换为初始字符串中的大写对应字符，然后列出这些字符。必须有一个自定义替换函数作为普通字符串。替换将替换任何出现的字符。

它可能不是最干净的代码，但它可以完成工作。这是作为动态搜索加密字段的一种手段提出来的，我想看看这到底有多疯狂……

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-06-21T08:27:49.657

如果*顺序*无关紧要，您可以尝试*Linq*。我们枚举范围内的所有二进制数`[0..2**word.Length]`。并将每个数字视为*掩码*：`0`- 小写，`1`- 大写。例如`happy`我们有

```
mask      string
----------------
00000  ->  happy
00001      Happy
00010      hAppy
00011      HAppy
00100      haPpy
00101      HaPpy
...
11111      HAPPY 
```

**代码：**

```
 using System.Linq;

  ... 

  List<string> permutate(string word) =>
    Enumerable
      .Range(0, 1 << word.Length)
      .Select(mask => string.Concat(word.Select((c, i) => (mask & (1 << i)) == 0 
         ? char.ToLower(c) 
         : char.ToUpper(c))))
      .ToList(); 
```

**演示：**

```
 Console.Write(string.Join(", ", permutate("happy"))); 
```

**结果：**

```
happy, Happy, hAppy, HAppy, haPpy, HaPpy, hAPpy, HAPpy, hapPy, HapPy, hApPy, HApPy, haPPy, HaPPy, hAPPy, HAPPy, happY, HappY, hAppY, HAppY, haPpY, HaPpY, hAPpY, HAPpY, hapPY, HapPY, hApPY, HApPY, haPPY, HaPPY, hAPPY, HAPPY 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-25T04:38:41.303

粗略地说，如下所示。我可能会将我的范围缩小一倍，但这个想法是合理的。

```
def cap_n(in_str, pos):
  leading = in_str.substr(0, pos-1)
  trailing = in_str.substr(pos+1) # no second arg implies to end of string
  chr = in_str[pos].to_uppercase()
  return leading + chr + trailing 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-25T04:42:57.210

使用按位运算。对于长度为 N 的单词，您需要一个由 N 位表示的整数类型。如果单词更长 - 拆分它。遍历从 0 到 2 ^N -1 的值并检查从 0 到 N-1 的每个位。如果该位是 1 - 大写 ( `Char.ToUpper()`) 对应于该位的字母。

这种方法比递归算法更好，因为它不容易在长字上发生堆栈溢出。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-25T05:19:43.450

假设：

1）你不太关心这是O（n * 2 ^ n）......虽然我很想知道：这类问题的最佳渐近运行时间是多少？

2）你的输入都是小写的。

3) 您的输入长度小于 32 个字符。（排列计数器中可用位的数量，i）

```
 List<string> permutate(string word)
{
    List<string> ret = new List<string>();

// MAGIC HAPPENS HERE
Dictionary<char,char> toUppers = new Dictionary<char,char>(26);
toUppers.Add('a', 'A');
toUppers.Add('b', 'B');
toUppers.Add('c', 'C');
toUppers.Add('d', 'D');
toUppers.Add('e', 'E');
toUppers.Add('f', 'F');
toUppers.Add('g', 'G');
toUppers.Add('h', 'H');
toUppers.Add('i', 'I');
toUppers.Add('j', 'J');
toUppers.Add('k', 'K');
toUppers.Add('l', 'L');
toUppers.Add('m', 'M');
toUppers.Add('n', 'N');
toUppers.Add('o', 'O');
toUppers.Add('p', 'P');
toUppers.Add('q', 'Q');
toUppers.Add('r', 'R');
toUppers.Add('s', 'S');
toUppers.Add('t', 'T');
toUppers.Add('u', 'U');
toUppers.Add('v', 'V');
toUppers.Add('w', 'W');
toUppers.Add('x', 'X');
toUppers.Add('y', 'Y');
toUppers.Add('z', 'Z');

char[] wordChars = word.ToCharArray();
int len = wordChars.Length;

// iterate the number of permutations
for(int i = 0; i < 2^len; i++) {
    char[] newWord = new char[len]();

    // apply "i" as a bitmask to each original char
    for(int n = 0; n < newWord.Length; n++) {
        if((1 << n) & i != 0) {
            newWord[n] = toUppers[wordChars[n]]; // or skip the dictionary and just call Char.ToUpper(wordChars[n])
        } else {
            newWord[n] = wordChars[n];
        }
    }
    ret.Add(new String(newWord));
}

    return ret;
} 
```

注意：我没有编译或测试过这段代码。这也实现了上面建议的尖牙的按位比较。

# javascript - 如何停止 Javascript 中的无限循环？

> ID：905322
> 
> 赞同：84
> 
> 时间：2009-05-25T04:34:51.120
> 
> 标签：javascript

假设我不小心写了这个：

```
 do { } while (true); 
```

...然后运行它。除了杀死你的浏览器，有没有办法停止 javascript 的执行（相当于基本的 Ctrl+Break 或 Ctrl+C）？

通常，大约 30 秒后，您的浏览器会询问您是否要停止长时间运行的脚本，但这并不总是发生（正如我刚刚发现的那样）！

仅供参考：像这样的简单循环：`for (i=1; i > 0; ++i);`将导致我的浏览器崩溃（Firefox 3.5b4）。我不太想测试它是否是我的任何附加组件。连续重启我的浏览器并不是我认为的一个有趣的星期一晚上。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2018-07-01T10:03:20.393

2018年更新：

在 Chrome 67 中，如果您打开了 DevTools ( `F12`)，您可以结束无限循环而不杀死整个选项卡：

*   转到“**源**”面板并单击“暂停脚本执行”。
*   按住相同的按钮，现在选择“停止”图标。

[![在此处输入图像描述](https://i.stack.imgur.com/iYiF1.png)](https://i.stack.imgur.com/iYiF1.png)

[https://developers.google.com/web/updates/2018/04/devtools#stop](https://developers.google.com/web/updates/2018/04/devtools#stop)

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2015-10-09T09:17:42.887

我正在使用 Chome 版本 45.0.2454.101

在右上角的汉堡菜单中，单击更多工具> 任务管理器，然后从那里终止该选项卡。这是如果尝试关闭选项卡失败。否则选项卡上的一个简单的“X”会杀死它。

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2009-05-25T04:43:14.027

至少在 Chrome 中，您可以关闭单个选项卡而不是整个应用程序。

[Randolpho](https://stackoverflow.com/users/12716/randolpho)还告诉我 IE8 也有类似的功能。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2018-06-02T12:33:11.850

如果您使用的是**Chrome**，您可以轻松杀死没有响应的选项卡：

1.  打开一个新标签
2.  按**Shift + Esc**打开**Chrome 的任务管理器**
3.  在列表中找到您的选项卡（应该是最消耗内存的）
4.  单击**结束进程**按钮

* * *

**重要提示：**导航到另一个选项卡很重要，因为 JavaScript 会捕获您的按键并且由于其无限循环而什么也不做。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2013-02-06T22:27:53.657

参考：[https](https://superuser.com/questions/92617/stop-never-ending-popup-alerts-in-firefox)
://superuser.com/questions/92617/stop-never-ending-popup-alerts-in-firefox Firefox 特别成问题...

警告！警告！不要运行这个！

```
javascript:
    while (true) alert("irritated and exhausted - yet?"); 
```

这将“无限”并且不会耗尽内部超时，因为脚本不会足够快地消耗 CPU 时间。在 FF 11 中，这保证不会有“无响应的脚本”堕胎机会。

在早期的浏览器版本中，优雅地停止有问题的脚本是可能的，而且是微不足道的，使用手动干预，而不会破坏和中止整个浏览器。没有这样的控制是一个主要的浏览器软件设计缺陷。影响参考文献中描述的“解决方案”的手动运动机制需要不合理的灵巧和反射。

警告：脚本可能会“无限”运行而没有超时和没有警报类型提示。这些是特别有害和烦人的。基本上，脚本运行得足够慢，以至于 CPU 时间周期分配为 20 秒。被延长了几分钟或几小时，或者......在超时之前，通过暂停执行等待在事件触发器上恢复。与其对 CPU 周期计时，不如让脚本在现实世界的时钟上超时。（有没有注意到你如何不能中止试图检索内容但不成功的脚本来构建页面？在 FF 中，地址栏按钮`reload`和`cancel/stop`被禁用，但至少可以关闭选项卡。）普通的 javascript`Timeout()`和`setInterval()`呼叫不会因此受到影响，并且有条件，因此在暂停时，可以手动干预以“优雅地”中止它们。

经验观察的测试环境：

```
window.navigator.userAgent=
Mozilla/5.0 (X11; Ubuntu; Linux i686; rv:11.0) Gecko/20100101 Firefox/11.0 
```

PS。剧本

```
for (i=1; i > 0; ++i); 
```

`i`当超过允许的最大值时，最终会陷入溢出错误。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2009-05-25T04:41:54.963

取决于浏览器。有些让您单击“停止”按钮以停止 javascript 执行。其他人没有。

我建议最好的方法是完全杀死浏览器或标签。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2009-05-25T04:43:43.917

大多数浏览器都有一个“脚本性能慢”警告，当一个失控的 javascript 需要很长时间才能执行时，就会出现这种警告。此警告对话框通常提供终止有问题的脚本的选项。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2021-03-19T11:51:31.810

## 在火狐中

转到**Developer Tools** > **Debugger**，然后单击暂停按钮。

[![在此处输入图像描述](https://i.stack.imgur.com/zIrVWl.png)](https://i.stack.imgur.com/zIrVWl.png)

## 在 Chrome 中

转到**Developer Tools** > **Sources**，然后单击暂停按钮。

[![在此处输入图像描述](https://i.stack.imgur.com/a2StMl.png)](https://i.stack.imgur.com/a2StMl.png)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-05-25T05:02:19.697

大多数体面的浏览器确实显示“无响应脚本”警告..​​....如果没有，我想你最好的做法是找出警告没有弹出的原因。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-08-11T21:50:50.800

来自[https://superuser.com/questions/92617/stop-never-ending-popup-alerts-in-firefox#comment93927_92617](https://superuser.com/questions/92617/stop-never-ending-popup-alerts-in-firefox#comment93927_92617)，[匿名](https://superuser.com/users/18451)：

> 这不是一个令人满意的通用解决方案，但使用 Greasmonkey（或者可能是 Ubiquity 或 Jetpack），您可以使用调用 window.confirm 的函数覆盖 window.alert 并可选地抛出错误，停止所有脚本执行，或者切换标志以停止警报。如果您继续返回的站点呈现此行为，这可能会很有用。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-02-23T15:31:57.977

我在使用 Chrome 时所做的就是按 shift+ctrl+esc 来调出 Windows 任务管理器。然后切换到进程选项卡并滚动浏览 chrome.exe 进程（chrome 每个打开的选项卡都有一个进程），直到我找到一个 CPU 使用率明显高于其他进程的进程。它对我来说往往有 30% 左右，而所有其他人都有 0-2%。然后我将结束这个过程。实际上，可以通过转到工具>任务管理器或 chrome 中的 shift+esc 打开其进程的自定义任务管理器来完成相同的操作。可能更容易使用，因为它显示了选项卡的更多信息。

# c# - PHP 可以解压缩使用 .NET GZipStream 类压缩的文件吗？

> ID：905328
> 
> 赞同：3
> 
> 时间：2009-05-25T04:36:22.100
> 
> 标签：c#, php, web-services, compression, gzip

我有一个 C# 应用程序，它与基于 PHP 的 SOAP Web 服务进行通信以进行更新和许可。

我现在正在开发一个反馈系统，供用户通过软件自动提交错误和跟踪日志。根据我之前发布的一个问题，我认为 Web 服务将是最好的方法（最有可能以最少的配置正常工作）。

我目前的想法是使用 .NET 内置的 gzip 压缩来压缩文本文件，转换为 base64，发送到 Web 服务，并将 PHP 脚本转换为二进制并解压缩数据。

PHP 可以解压用 GZipStream 压缩的数据吗？如果可以，如何解压？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-25T07:53:51.043

我真的试过这个。GZipStream 不起作用。另一方面，在 .NET 端使用 DeflateStream 进行压缩并在 PHP 端使用 gzinflate 进行解压缩确实有效。你的旅费可能会改变...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-25T12:38:58.707

如果 http 级别的库实现了它（客户端和服务器），[http 支持 gzip-compression](http://www.w3.org/Protocols/rfc2616/rfc2616-sec3.html#sec3.5)，在这种情况下，没有理由手动压缩任何东西。在您进一步冒险之前，您应该检查这是否已经发生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-25T07:00:23.740

是的，PHP 可以解压缩 GZIP 压缩字符串，无论有无标题。

*   [gzdecode](http://au.php.net/gzdecode)用于 GZIP 文件格式（即与 gzip 兼容）
*   [gzinflate](http://au.php.net/manual/en/function.gzinflate.php)用于“原始”DEFLATE 格式
*   用于 ZLIB 格式的[gzuncompress （没有一些标头信息的 GZIP 格式）](http://au.php.net/manual/en/function.gzuncompress.php)

我不确定您想要哪一个，因为我不熟悉 .NET GZipStream。这听起来有点像 gzuncompress，因为 ZLIB 格式是一种“流”格式，但请尝试所有这三种格式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-25T07:05:17.850

由于服务器正在接受 Web 请求，因此您确实应该检查 HTTP 标头以确定是否有任何客户端接受 GZIP 编码，而不是每次都猜测和 gzip 压缩。

如果 PHP 客户端可以执行 gzip，它将设置标头，然后您的代码将做出相应的反应并做正确的事情。当为您的代码提供工具来学习客户端的功能时，假设或猜测是一个糟糕的选择。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-25T16:56:37.540

我写了一篇我最近发布的文章，展示了如何在 C# 中压缩/解压缩。我将它用于几乎相同的场景。我想将日志文件从客户端传输到服务器，它们通常很大。但是在我的情况下，我的 web 服务在 .NET 中运行，所以我可以使用解压缩方法。但看起来 PHP 确实支持一种称为 gzdecode 的方法。

[http://coding.infoconex.com/post/2009/05/Compress-and-Decompress-using-net-framework-and-built-in-GZipStream.aspx](http://coding.infoconex.com/post/2009/05/Compress-and-Decompress-using-net-framework-and-built-in-GZipStream.aspx)

# .net - 'UnauthorizedAccessException' - 'Global\.net clr 网络'

> ID：905331
> 
> 赞同：9
> 
> 时间：2009-05-25T04:37:59.353
> 
> 标签：.net, security

我正在用户 Guest 下测试我的应用程序。它崩溃并出现以下错误。

'UnauthorizedAccessException' - 'Global.net clr 网络'

现在，我知道我可以编辑机器上的安全策略以允许在客户机下运行的 CLR 代码受到信任，但是在商业应用程序上应该怎么做呢？

（签名并添加 CAS 属性？）我目前正在阅读整个安全部分，但我时间紧迫，因此任何指向正确方向的指针都将不胜感激。

编辑：我已经追踪到使用 Microsoft.VisualBasic.ApplicationServices.WindowsFormsApplicationBase 类的问题。如果包含此内容，则会出现错误。我正在寻找要添加到清单中的内容或其他方式，以便在安装/运行应用程序时，它会要求适当的权限。我不想让用户亲自打电话给 caspol 或其他一些工具。

环境详细信息： - 应用程序使用 .NET 3.0 - 操作系统是 Vista

以下是这些内容的相关堆栈跟踪：

```
Unhandled Exception: System.UnauthorizedAccessException: Access to the path 'Glo
bal\.net clr networking' is denied.
   at System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath)
   at System.Threading.Mutex.<>c__DisplayClass3.<.ctor>b__0(Object userData)
   at System.Runtime.CompilerServices.RuntimeHelpers.ExecuteCodeWithGuaranteedCl
eanup(TryCode code, CleanupCode backoutCode, Object userData)
   at System.Threading.Mutex..ctor(Boolean initiallyOwned, String name, Boolean&
 createdNew, MutexSecurity mutexSecurity)
   at System.Diagnostics.SharedUtils.EnterMutexWithoutGlobal(String mutexName, M
utex& mutex)
   at System.Diagnostics.SharedPerformanceCounter.Verify(CategoryEntry* currentC
ategoryPointer)
   at System.Diagnostics.SharedPerformanceCounter.FindCategory(CategoryEntry** r
eturnCategoryPointerReference)
   at System.Diagnostics.SharedPerformanceCounter.GetCounter(String counterName,
 String instanceName, Boolean enableReuse, PerformanceCounterInstanceLifetime li
fetime)
   at System.Diagnostics.SharedPerformanceCounter..ctor(String catName, String c
ounterName, String instanceName, PerformanceCounterInstanceLifetime lifetime)
   at System.Diagnostics.PerformanceCounter.Initialize()
   at System.Diagnostics.PerformanceCounter.set_RawValue(Int64 value)
   at System.Net.NetworkingPerfCounters.Initialize()
   at System.Net.Configuration.SettingsSectionInternal..ctor(SettingsSection sec
tion)
   at System.Net.Configuration.SettingsSectionInternal.get_Section()
   at System.Net.Sockets.Socket.InitializeSockets()
   at System.Net.Sockets.Socket.get_SupportsIPv4()
   at Microsoft.VisualBasic.ApplicationServices.WindowsFormsApplicationBase.get_
HostName()
   at Microsoft.VisualBasic.ApplicationServices.WindowsFormsApplicationBase.Regi
sterChannel(Boolean SecureChannel)
   at Microsoft.VisualBasic.ApplicationServices.WindowsFormsApplicationBase.Run(
String[] commandLine) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-25T07:00:37.890

是否可以将其添加到您的 app.config 文件中？

```
<configuration>
   <system.net>
      <settings>
         <performanceCounters enabled="false" />
      </settings>
   </system.net>
</configuration> 
```

这将指示网络类不要尝试创建在来宾帐户下不起作用的性能计数器。

上述设置应该在 .NET Framework 4 及更高版本中工作，但由于错误在早期版本中失败。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-07T09:07:14.760

对于像我这样需要在 framework 2.x 程序上支持来宾帐户的可怜人（即使安装了 CLR 4，一些旧的 CLR2 编译的程序仍然会在 CLR2 下运行），这里有一个 hacky 功能将禁用此功能性能计数器初始化问题（请参阅 Matt Ellis 的回答。他的回答的问题是 - 正如其他一些人所说 - 它并不总是有效）：

```
 public static bool DisablePerfCountersIfNeeded()
    {
        try
        {
            NetworkInterface.GetIsNetworkAvailable();
            return false;
        }
        catch(UnauthorizedAccessException)
        {
        }

        Type type = typeof(Uri).Assembly.GetType("System.Net.NetworkingPerfCounters");
        FieldInfo fi = type.GetField("initialized", BindingFlags.Static | BindingFlags.NonPublic);
        bool initialized = (bool)fi.GetValue(null);
        fi.SetValue(null, true);
        return true;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-25T05:08:58.067

据我了解，发生这种情况是因为来宾帐户分配了一些非常奇怪的权限。这*并不是*说您不能使用网络的错误 - 在部分信任下仍然可以使用基本网络。

发生此错误是因为 CLR 无法访问其自己的性能计数器之一，该计数器在网络操作期间使用。其他用户帐户不应出现此问题 - 您是否特别需要使用 Guest？普通的受限用户帐户应该可以正常工作。众所周知，Guest 帐户在与 .NET 相关的访问权限方面存在许多问题 - 该帐户在实践中很少使用，并且几乎没有对其进行过测试。

关于代码访问安全性，您在哪个用户下运行代码并不重要 - 默认情况下，所有用户的 CAS 权限都是相同的。信任级别由可执行文件的位置确定 - 运行安装在本地计算机上的内容授予它完全信任，从其他位置运行授予部分信任（请参阅 .NET Framework 配置中的代码组）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-25T05:23:49.360

您可以尝试强命名您的程序集，然后通过[CASPOL](http://msdn.microsoft.com/en-us/library/cb6t8dtz(VS.80).aspx)授予它们完全信任，使用

```
caspol -fulltrust assemblyName 
```

但正如 Sander 所说，Guest 帐户不是真实帐户，它不是正常登录的帐户，并且对其施加了非常严格的限制。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-25T09:07:43.017

约扎。在 Microsoft Connect 中找到它。这是 .NET 4.0 中修复的错误

[https://connect.microsoft.com/VisualStudio/feedback/ViewFeedback.aspx?FeedbackID=387419](https://connect.microsoft.com/VisualStudio/feedback/ViewFeedback.aspx?FeedbackID=387419)

感谢大家的帮助！

# emacs - 我可以在任何地方使用 ido-completing-read 而不是 complete-read 吗？

> ID：905338
> 
> 赞同：12
> 
> 时间：2009-05-25T04:39:51.817
> 
> 标签：emacs, elisp, editing, ido-mode, icicles

我是 . 的忠实粉丝`ido-mode`，以至于我想将它用于诸如`describe-function`或之类的事情`find-tag`，而不必编写类似“我可以在 Emacs 中搜索标签的 ido-mode 样式完成吗？”中的内容。每一个人。

两个都

```
(defalias completing-read ido-completing-read) 
```

和

```
(setf 'completing-read 'ido-completing-read) 
```

不起作用，至少部分是因为`ido-completing-read`调用`completing-read`了它的主体，所以任何简单的重新定义都会导致无限递归。

从理论上讲，它应该是可能的，因为文档字符串的第一行`ido-completing-read`是“内置的 Ido 替换`completing-read`”。我环顾四周，似乎找不到其他尝试或成功的人。

我意识到[Icicles](http://www.emacswiki.org/Icicles)可能提供了类似的东西，我可能最终还是会使用它，但这比我现在想采取的更冒险。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-06-19T18:58:29.650

编辑：这现在是[MELPA 提供的 Emacs 包](https://stable.melpa.org/#/ido-completing-read+)。它已扩展为成熟的次要模式。开发发生[在 GitHub 上](https://github.com/DarwinAwardWinner/ido-completing-read-plus)。

### 原帖：

这是我对 Jacobo 答案的改进。归功于他的原始魔法。我添加了一个覆盖变量，您可以使用它来防止`ido-completing-read`在特定函数中使用。我还添加了一个检查，如果没有完成，则使用原始的完成读取（这种情况偶尔会发生，例如在`org-remember-apply-template`来自 org-mode 的情况下，这与 Jacobo 的原始建议不同）。

```
(defvar ido-enable-replace-completing-read t
  "If t, use ido-completing-read instead of completing-read if possible.

Set it to nil using let in around-advice for functions where the
original completing-read is required.  For example, if a function
foo absolutely must use the original completing-read, define some
advice like this:

(defadvice foo (around original-completing-read-only activate)
  (let (ido-enable-replace-completing-read) ad-do-it))")

;; Replace completing-read wherever possible, unless directed otherwise
(defadvice completing-read
  (around use-ido-when-possible activate)
  (if (or (not ido-enable-replace-completing-read) ; Manual override disable ido
          (boundp 'ido-cur-list)) ; Avoid infinite loop from ido calling this
      ad-do-it
    (let ((allcomp (all-completions "" collection predicate)))
      (if allcomp
          (setq ad-return-value
                (ido-completing-read prompt
                               allcomp
                               nil require-match initial-input hist def))
        ad-do-it)))) 
```

哦，对于使用 ido in `M-x`，请使用[amx](https://github.com/DarwinAwardWinner/amx)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-07-05T20:04:41.693

Hocus pocus, abracadabra, presto！

```
(defadvice completing-read
  (around foo activate)
  (if (boundp 'ido-cur-list)
      ad-do-it
    (setq ad-return-value
      (ido-completing-read
       prompt
       (all-completions "" collection predicate)
       nil require-match initial-input hist def)))) 
```

这适用于除 subr 之外的所有内容，其中执行扩展命令是最重要的（绑定到 Mx 的内容）。但是我们可以从 Mx 中得到我们想要的

```
(global-set-key
 "\M-x"
 (lambda ()
   (interactive)
   (call-interactively
    (intern
     (ido-completing-read
      "M-x "
      (all-completions "" obarray 'commandp)))))) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-26T15:48:52.023

我认为还没有`ido-mode`为此做好准备。特别是，`ido-completing-read`目前仅适用于字符串，同时也`completing-read`支持 alists。一旦您想要对要完成的项目有不同的用户级描述，这一点非常重要。

因此，我对它还不能开箱即用并不感到惊讶。如果不自己修改代码，最好的选择可能是提交错误报告/功能请求。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T13:43:18.193

Using Emacs 24.3, ido-ubiquitous didn't work for me. So tried this and it is working fine so far:

```
(defun my-completing-read (prompt collection &optional predicate
                  require-match initial-input
                  hist def inherit-input-method)
  (if (listp collection)
      (ido-completing-read prompt collection predicate require-match
               initial-input hist def inherit-input-method)
    (completing-read-default prompt collection predicate require-match
                 initial-input hist def inherit-input-method)))

(setq completing-read-function 'my-completing-read) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-25T15:01:56.577

Ido 带有一个应该执行此操作的函数，因此只需在您的 .emacs 文件中调用它：

> (ido-无处不在 t)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-25T09:03:46.363

只是一个想法：您是否尝试过编辑`ido-completing-read`call`original-completing-read`而不是`completing-read`，定义`original-completing-read`为当前`completing-read`，然后执行您的 defalias 或 setf 事情？

# events - 页面关闭后用于注销用户的 Firefox 扩展

> ID：905339
> 
> 赞同：2
> 
> 时间：2009-05-25T04:40:47.073
> 
> 标签：events, firefox

我正在编写我的第一个 FireFox 扩展，我有一些问题。也许有人可以帮忙。

我有一个需要登录的网站。登录是每个登录类型一个用户。因此，如果我使用用户名“tom”从一台 PC 登录并转到另一台 PC 并尝试使用相同的详细信息登录，它会失败。当我从经过身份验证的页面单击注销按钮时，新位置会执行 PHP 函数以注销用户（更新 MySQL 中用户的“已登录”状态）。问题是，如果用户从他的办公桌上登录并浏览页面，然后突然接到朋友的电话，要求他在休息时间快速吃午饭，并且必须在短时间内与他见面，他只需单击 X（关闭) 按钮，忘记按注销按钮，所以登录的状态仍然是 1。稍后，如果他想再次从**home**访问该页面，他将无法登录。

所以，我需要以某种方式从 Firefox 中获取“关闭”事件。我正在考虑寻找仅包含“website.com”域的那些。然后，如果关闭了一个选项卡或 Firefox 的主窗口，发送一个唯一的密钥和用户名到该 URL 注销用户，问题可能会得到解决。我不知道这是否可能。请发布要构建此扩展的任何想法（如果可以，请在后跟代码）。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-25T04:49:35.203

按照设计，这是错误的。

如果用户的 PC 崩溃（硬盘故障、电源故障），您的插件将无法注销用户。因此，用户将无法在任何 PC 上登录。

--

让我们重新审视这个前提，

一个。为什么从另一台 PC 登录需要失败？

湾。当用户登录到另一台 PC 时，如何使从前一台 PC 的登录无效（注销）。这有点像 Yahoo! 等聊天应用程序。信使工作。

根据您的回答，我的建议如下：如果用户在另一台 PC 上登录，请警告并向用户提供选项：

*   取消登录
*   强制注销其他用户并继续登录

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-25T18:19:47.743

为了收到有关选项卡关闭的通知，您需要执行类似[此示例代码](https://developer.mozilla.org/en/Code_snippets/Tabbed_browser#Detecting_page_load)的操作。但是，您需要监听卸载，而不是监听负载。

当您最终收到有关卸载的通知时，您必须像 Web 应用程序一样向注销页面发出请求。您可以通过检查来确定正在卸载的文档的位置`aEvent.originalTarget.location.href`。请注意，这`aEvent.originalTarget`将为您提供`document`正在关闭的选项卡的对象。然后，您需要在事件处理程序中为此使用 XLMHttpRequest。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-25T05:06:29.147

在一段时间不活动后注销用户是（应用程序或 Web）服务器的责任，而不是（仅）客户端浏览器的责任。这称为会话超时。

正如您所描述的那样，您可能可以通过浏览器实现来避免超时，但这不应该是主要的解决方案。

这是您可能会采取的一种临时方法：
在您的情况下，我将在存储“锁定”状态的表中包含一个时间戳。每次用户执行操作时，时间戳都会更新。当您尝试再次登录广告时，时间戳早于某个阈值（例如 15 分钟），您的登录代码应该默默地注销前一个用户。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-25T06:20:31.500

您可以使用 ajax 来 ping 站点上的页面 - 所有会话信息都将被传递，您可以验证用户是否仍然打开活动的浏览器/页面。如果 Firefox 崩溃，它将无法再 ping 网站，并且会话可能会在 15 分钟后超时。我认为最好允许在另一个登录时强制注销。通常当我在一天结束时下班时，我不会关闭所有程序或注销或任何东西——只是锁定我的电脑以防止任何人使用它。第二天早上我回来时我的所有程序仍在运行，所以我可以从中断的地方继续。

顺便说一句，Yahoo Web Messenger 可能使用某种形式的基于会话的 cookie。也就是说，cookie 存储在内存中，并在关闭选项卡或浏览器时消失。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-25T18:38:26.507

只需允许用户从另一台机器重新登录。如果您在第一台机器上收到用户的请求，请他也重新登录。因此，您一次只能获得一个登录用户。

# iphone - iPhone通讯录上出现空白字段，如何调试？

> ID：905347
> 
> 赞同：0
> 
> 时间：2009-05-25T04:43:51.140
> 
> 标签：iphone, objective-c, cocoa, cocoa-touch, gdb

以下代码按名字和姓氏在我的地址簿中创建了一个包含所有联系人的数组。问题是，我有一个联系人一直以空的名字和姓氏出现。我在我的实际通讯录中找不到那个联系人。谁能建议如何调试它以找出神秘幽灵联系的来源？

```
ABAddressBookRef addressBook = ABAddressBookCreate();
NSArray *peopleArray = (NSMutableArray *)ABAddressBookCopyArrayOfAllPeople(addressBook);
NSMutableArray *allNames = [NSMutableArray array];

for (id person in peopleArray) {
    NSMutableString *firstName = [(NSString *)ABRecordCopyValue(person, kABPersonFirstNameProperty) autorelease];
    NSMutableString *lastName = [(NSString *)ABRecordCopyValue(person, kABPersonLastNameProperty) autorelease];
    ABMutableMultiValueRef multiValueEmail = ABRecordCopyValue(person, kABPersonEmailProperty);
    if (ABMultiValueGetCount(multiValueEmail) > 0) {
        NSString *email = [(NSString *)ABMultiValueCopyValueAtIndex(multiValueEmail, 0) autorelease];
    }

    if (![firstName length]) {
     firstName = @"";
    }
    if (![lastName length]) lastName = @"";

    [allNames addObject:[NSString stringWithFormat:@"%@ %@", firstName, lastName]];
} 
```

人员类型是 NSCFType 类型。我可以轻松地执行以下操作：

```
 if (![lastName length] && ![firstName length]) continue; 
```

.. 解决问题。我很好奇我的地址簿中的哪些条目会像幽灵一样出现。我试过用 gdb 内省对象，但不能从中得到任何有价值的东西。

我想查看人员的所有属性，但是将对象取消引用到 (ABPerson*) 似乎并没有这样做。

我也尝试过使用 CFShow(person) 来显示它是 CPRecord 类型。但是，找不到关于此的更多文档。

我可以在 gdb 中做些什么来进一步检查这个特定的人对象以查看它的来源吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-25T05:22:55.817

该条目可能被标记为组织记录，而不是个人记录。在这种情况下，您必须提取组织名称而不是名字和姓氏。

尝试查看以下属性：

```
kABPersonOrganizationProperty, kABPersonKindProperty 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-25T05:25:55.283

IT 可能只是一个组织的联系人

尝试查看这些属性

> 这些常量实现了人员类型属性（类型为 kABIntegerPropertyType 的属性），它指示人员记录是代表一个人还是一个组织。

```
 const ABPropertyID kABPersonKindProperty;
     const CFNumberRef kABPersonKindPerson;
     const CFNumberRef kABPersonKindOrganization; 
```

# php - 使用 PHP 的 telnet 连接

> ID：905348
> 
> 赞同：17
> 
> 时间：2009-05-25T04:44:13.353
> 
> 标签：php, telnet

我需要编写一个 PHP 脚本来远程登录到路由器，运行命令并获取结果。有人知道 PHP 中的 telnet 连接库吗？

**更新：**这个请求（很明显）是很久以前的。最后，我不得不编写自己需要的客户端库。这个库（以及更多模块）的代码是开源的，可以在[github](https://github.com/farzadghanei/POLlib/blob/master/Parsonline/Network/Telnet.php)上找到。谢谢大家的回答。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-11-05T20:32:33.567

Nicholas Hall 的 Github 上有一个可用于 PHP telnet 连接的可爱课程： [https ://github.com/ngharo/Random-PHP-Classes/blob/master/Telnet.class.php](https://github.com/ngharo/Random-PHP-Classes/blob/master/Telnet.class.php)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-14T12:33:50.910

使用 stdin/stream_select 和阻塞流给你一个 20 行 telnet 像客户端

```
<?

$socket = fsockopen("192.168.52.1", 8000);

if(!$socket)return;
stream_set_blocking($socket, 0);
stream_set_blocking(STDIN, 0);

do {
  echo "$ ";
  $read   = array( $socket, STDIN); $write  = NULL; $except = NULL;

  if(!is_resource($socket)) return;
  $num_changed_streams = @stream_select($read, $write, $except, null);
  if(feof($socket)) return ;

  if($num_changed_streams  === 0) continue;
  if (false === $num_changed_streams) {
      /* Error handling */
    var_dump($read);
    echo "Continue\n";
    die;
  } elseif ($num_changed_streams > 0) {
    echo "\r";
    $data = fread($socket, 4096);
    if($data !== "") 
      echo "<<< $data";

    $data2 = fread(STDIN, 4096);

    if($data2 !== "") {
      echo ">>> $data2";
      fwrite($socket, trim($data2));
    }
  }

} while(true); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-18T04:37:18.850

Pear::Net_Socket: [http://pear.php.net/package/Net_Socket](http://pear.php.net/package/Net_Socket) 为一个简单的 PHP telnet bot 或会话扩展这个类。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-06-23T22:27:40.250

```
<?php

$file = 'somefile.txt';
$remote_file = 'readme.txt';
// set up basic connection
$ftp_server = '127.0.0.1';
$ftp_user_name = 'Till';
$ftp_user_pass = 'Kcp05';
$conn_id = ftp_connect($ftp_server);
// login with username and password
ftp_login($conn_id, $ftp_user_name, $ftp_user_pass);
// upload a file
ftp_nb_put($conn_id, $remote_file, $file, FTP_ASCII);
// close the connection
echo "$file sent to $ftp_server as $remote_file\n<br/>";
ftp_close($conn_id);

// finished copying the input.dat to the till now, just need to execute the print command.
// That will copy somefile.txt in the same folder as this .php file to the ftp server root dir.

$header1=chr(0xFF).chr(0xFB).chr(0x1F).chr(0xFF).chr(0xFB).chr(0x20).chr(0xFF).chr(0xFB).chr(0x18).chr(0xFF).chr(0xFB).chr(0x27).chr(0xFF).chr(0xFD).chr(0x01).chr(0xFF).chr(0xFB).chr(0x03).chr(0xFF).chr(0xFD).chr(0x03).chr(0xFF).chr(0xFC).chr(0x23).chr(0xFF).chr(0xFC).chr(0x24).chr(0xFF).chr(0xFA).chr(0x1F).chr(0x00).chr(0x50).chr(0x00).chr(0x18).chr(0xFF).chr(0xF0).chr(0xFF).chr(0xFA).chr(0x20).chr(0x00).chr(0x33).chr(0x38).chr(0x34).chr(0x30).chr(0x30).chr(0x2C).chr(0x33).chr(0x38).chr(0x34).chr(0x30).chr(0x30).chr(0xFF).chr(0xF0).chr(0xFF).chr(0xFA).chr(0x27).chr(0x00).chr(0xFF).chr(0xF0).chr(0xFF).chr(0xFA).chr(0x18).chr(0x00).chr(0x58).chr(0x54).chr(0x45).chr(0x52).chr(0x4D).chr(0xFF).chr(0xF0);

$fp=pfsockopen("127.0.0.1",23);

echo "Telnet session opening ...";

sleep(4);

fputs($fp,$header1); 
sleep(4); 

fputs($fp,"Till\r");
sleep(2); 
fputs($fp,"Kcp05\r"); 

sleep(2);
fputs($fp,"notepad\r"); 

sleep(3);

echo "Telnet session closing ...";

fclose($fp);

?> 
```

这对我有用。第一部分将ftp文件上传到服务器，第二部分将lo到telnet服务器，并执行一个可以使用您刚刚通过ftp上传的文件的程序。刚才测试了一下。

# character-encoding - 如何在数据库中插入特殊字符？

> ID：905349
> 
> 赞同：2
> 
> 时间：2009-05-25T04:44:39.830
> 
> 标签：character-encoding

我有ó，ö等字符。当我将这些数据插入到表中时，它会像这些 ÃƒÂ³ ÃƒÂ¶ 一样显示。我正在使用 php mysql。有什么解决办法吗？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-25T04:49:04.347

请指定您正在使用的数据库系统——每个系统都有其指定字符编码的首选方式。然后，将您的数据库的字符编码设置为您用于发送字符串的相同编码——后者可能取决于您的语言和库，因此如果您需要详细的帮助，您最好也指定这些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-25T04:50:00.507

取决于您的数据库引擎。对于 MySQL，解决方案通常是设置表的默认字符集，如下所示：

```
CREATE TABLE `foo` (
    `bar` varchar(20) not null
) ENGINE=MyISAM DEFAULT CHARSET=utf8; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-25T06:02:19.907

运行这个查询来检查 MySQL 的各种字符编码设置：

```
show variables like '%character%' 
```

我会说您可能已经将其中一个或多个设置为 latin1。此外，尝试在插入/获取数据之前执行这些查询：

```
SET NAMES utf8
SET CHARACTER SET utf8 
```

# .net - 在 Process.Start(..) 期间保持外部命令窗口打开的任何方法？

> ID：905352
> 
> 赞同：2
> 
> 时间：2009-05-25T04:46:30.747
> 
> 标签：.net, process

我有以下运行 bat 文件的代码。bat 文件然后运行一些 .exe .. 它做一些事情。这些东西大约需要5-10秒。

```
ProcessStartInfo start = new ProcessStartInfo
{
    Arguments = "\"" + newTargetFile + "\"" +
                " " +
                "\"" + originalFile.FullName + "\"",
    FileName = filename,
    WindowStyle = ProcessWindowStyle.Normal,
    CreateNoWindow = false,
    UseShellExecute = false
};

// Run the external process & wait for it to finish
using (Process proc = Process.Start(start))
{
    proc.WaitForExit();
} 
```

我想要做的是让命令窗口保持打开状态，即使在进程终止之后也是如此。有没有办法做到这一点？

否则，我可以让那个窗口的所有输出转到我的调试器，所以我不需要担心这个窗口会剩下吗？

干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-25T04:50:16.810

如果您使用 /k 参数运行 cmd 解释器并将批处理文件名作为下一个参数传递，您应该得到您所追求的。/k 参数告诉 Windows 在 cmd 解释器完成后保持打开状态作为下一个参数。

您当然也可以使用 RedirectStandardOutput 属性，但我认为这最终会更复杂。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-22T19:41:15.337

使用 /k 参数尝试这样的操作以保持终端打开：

```
 System.Diagnostics.Process proc = new System.Diagnostics.Process();

    string path = System.IO.Directory.GetParent(Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData)).FullName;
    if (Environment.OSVersion.Version.Major >= 6)
    {
        path = System.IO.Directory.GetParent(path).ToString();
    }

    proc.StartInfo.WorkingDirectory = path;
    proc.StartInfo.FileName = "cmd.exe";
    proc.StartInfo.Arguments = "/k git --version";
    proc.Start(); 
```

# javascript - Google Analytics - 阻止 HTML/页面呈现

> ID：905353
> 
> 赞同：10
> 
> 时间：2009-05-25T04:47:37.640
> 
> 标签：javascript, html, rendering, google-analytics, blocking

我使用了“[不阻止页面下载的更好的 Google Analytics JavaScript](http://lyncd.com/2009/03/better-google-analytics-javascript/) ”来动态加载 Google Analytics，这样它就不会阻止 HTML/页面呈现。

但是，有时我的 HTML 页面会阻止呈现 Firefox 3.0 (WinXP) 状态消息状态：

"**从 www.google-analytics.com 传输数据**"

*关于如何以不会阻止 HTML/页面渲染的方式加载 Google Analytics JavaScript 的任何想法？*

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-12-04T22:42:41.553

您可以使用 Google Analytics [跟踪代码的异步加载][1]。以下代码段应该有所帮助：

```
<script type="text/javascript">

    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-XXXXX-X']);
    _gaq.push(['_trackPageview']);

    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') +      '.google-analytics.com/ga.js';
       var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();

</script> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-25T04:51:41.520

`</body>`像谷歌推荐的那样，把谷歌分析代码放在标签之前的最后一件事吗？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-02-04T03:22:45.897

You may be seeing this bug. Before 3.6, FF sometimes incorrectly blamed google analytics for slowing down the page...

[https://bugzilla.mozilla.org/show_bug.cgi?id=487638](https://bugzilla.mozilla.org/show_bug.cgi?id=487638)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-25T05:33:24.540

但它在底部（就在 </body> 之前）并延迟它：

```
<script type="text/javascript" src="http://www.google-analytics.com/ga.js"></script>
<script type="text/javascript">
    if (typeof(_gat)=='object')
        setTimeout(function(){
            _gat._getTracker("UA-1234567-8")._trackPageview()}, 1500);
</script> 
```

看看我对为什么我认为这是“[集成分析的最佳方式”](http://blog.cherouvim.com/best-way-to-integrate-google-analytics/)的解释。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-25T06:25:41.117

DEFER 属性可能对您有用

```
<script DEFER type="text/javascript" src="http://www.google-analytics.com/ga.js">

<script DEFER type="text/javascript">... tracker code ...</script> 
```

# c++ - 如何获取 std::string 中的字符数？

> ID：905355
> 
> 赞同：122
> 
> 时间：2009-05-25T04:47:53.037
> 
> 标签：c++, string, stdstring, string-length

我应该如何在 C++ 中获取字符串中的字符数？

* * *

## 回答 #1

> 赞同：185
> 
> 时间：2009-05-25T04:50:47.560

如果您使用的是`std::string`，请致电[`length()`](http://en.cppreference.com/w/cpp/string/basic_string/size)：

```
std::string str = "hello";
std::cout << str << ":" << str.length();
// Outputs "hello:5" 
```

如果您使用的是 c 字符串，请调用[`strlen()`](http://en.cppreference.com/w/cpp/string/byte/strlen).

```
const char *str = "hello";
std::cout << str << ":" << strlen(str);
// Outputs "hello:5" 
```

或者，如果您碰巧喜欢使用 Pascal 风格的字符串（或 f***** 字符串，因为 Joel Spolsky[喜欢](http://www.joelonsoftware.com/articles/fog0000000319.html)在它们有尾随 NULL 时调用它们），只需取消引用第一个字符。

```
const char *str = "\005hello";
std::cout << str + 1 << ":" << *str;
// Outputs "hello:5" 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2009-05-25T04:51:00.460

在处理 C++ 字符串 (std::string) 时，您正在寻找[length()](http://www.cppreference.com/wiki/string/length)或[size()](http://www.cppreference.com/wiki/string/size)。两者都应该为您提供相同的价值。但是，在处理 C 样式字符串时，您将使用[strlen()](http://www.cplusplus.com/reference/clibrary/cstring/strlen/)。

```
#include <iostream>
#include <string.h>

int main(int argc, char **argv)
{
   std::string str = "Hello!";
   const char *otherstr = "Hello!"; // C-Style string
   std::cout << str.size() << std::endl;
   std::cout << str.length() << std::endl;
   std::cout << strlen(otherstr) << std::endl; // C way for string length
   std::cout << strlen(str.c_str()) << std::endl; // convert C++ string to C-string then call strlen
   return 0;
} 
```

**输出：**

```
6
6
6
6 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2009-05-25T06:39:24.247

这取决于您正在谈论的字符串类型。字符串有很多种：

1.  `const char*`- C 风格的多字节字符串
2.  `const wchar_t*`- C 风格的宽字符串
3.  `std::string`- “标准”多字节字符串
4.  `std::wstring`- 一个“标准”宽字符串

对于 3 和 4，可以使用`.size()`or`.length()`方法。

对于 1，可以使用`strlen()`，但必须确保字符串变量不为 NULL (=== 0)

对于2，可以使用`wcslen()`，但必须保证字符串变量不为NULL（=== 0）

非标准 C++ 库中还有其他字符串类型，例如 MFC's `CString`、 ATL's `CComBSTR`、 ACE's`ACE_CString`等，具有诸如 等方法`.GetLength()`。我不记得他们的细节了。

STLSoft库用他们所谓的[字符串访问垫片](http://www.stlsoft.org/doc-1.9/group__group____concept____shim____string__access.html)[将这](http://www.stlsoft.org/)一切抽象出来，可用于从任何类型获取字符串长度（和其他方面）。因此，对于上述所有内容（包括非标准库的），使用相同的功能。[本文](http://www.ddj.com/cpp/184401689)描述了它是如何工作的，因为它并不完全显而易见或容易。`stlsoft::c_str_len()`

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2019-03-15T15:49:17.047

# 对于 Unicode

这里的几个答案已经解决`.length()`了使用多字节字符给出错误结果的问题，但是有 11 个答案并且没有一个提供解决方案。

## Z͉̳̺ͥͬ̾a̴͕̲̒̒͌̋ͪl̨͎̰̘͉̟ͤ̀̈̚͜g͕͔̤͖̟̒͝ͅo̵̡̡̼͚̐ͯ̅ͪ̆ͣ̚的情况

首先，重要的是要知道“长度”是什么意思。为了激励的例子，请考虑字符串“ z͉̳̺ͥͬ̾a̴͕̲̒̒͌̋ͪl̨͎̰̘͉̟ͤ̀̈̚͜g͕͔̤͖̟̒͝ͅo̵̡̡̼͚̐ͯ̅ͪ̆ͣ̚”（请注意，某些语言，尤其是泰语，实际上是使用结合音符号的，所以这对15岁的模因*不仅*有用，但显然这是最重要的用例） . 假设它以**UTF-8**编码。我们可以通过 3 种方式讨论这个字符串的长度：

### 95 字节

```
00000000: 5acd a5cd accc becd 89cc b3cc ba61 cc92  Z............a..
00000010: cc92 cd8c cc8b cdaa ccb4 cd95 ccb2 6ccd  ..............l.
00000020: a4cc 80cc 9acc 88cd 9ccc a8cd 8ecc b0cc  ................
00000030: 98cd 89cc 9f67 cc92 cd9d cd85 cd95 cd94  .....g..........
00000040: cca4 cd96 cc9f 6fcc 90cd afcc 9acc 85cd  ......o.........
00000050: aacc 86cd a3cc a1cc b5cc a1cc bccd 9a    ............... 
```

### 50 个代码点

```
LATIN CAPITAL LETTER Z
COMBINING LEFT ANGLE BELOW
COMBINING DOUBLE LOW LINE
COMBINING INVERTED BRIDGE BELOW
COMBINING LATIN SMALL LETTER I
COMBINING LATIN SMALL LETTER R
COMBINING VERTICAL TILDE
LATIN SMALL LETTER A
COMBINING TILDE OVERLAY
COMBINING RIGHT ARROWHEAD BELOW
COMBINING LOW LINE
COMBINING TURNED COMMA ABOVE
COMBINING TURNED COMMA ABOVE
COMBINING ALMOST EQUAL TO ABOVE
COMBINING DOUBLE ACUTE ACCENT
COMBINING LATIN SMALL LETTER H
LATIN SMALL LETTER L
COMBINING OGONEK
COMBINING UPWARDS ARROW BELOW
COMBINING TILDE BELOW
COMBINING LEFT TACK BELOW
COMBINING LEFT ANGLE BELOW
COMBINING PLUS SIGN BELOW
COMBINING LATIN SMALL LETTER E
COMBINING GRAVE ACCENT
COMBINING DIAERESIS
COMBINING LEFT ANGLE ABOVE
COMBINING DOUBLE BREVE BELOW
LATIN SMALL LETTER G
COMBINING RIGHT ARROWHEAD BELOW
COMBINING LEFT ARROWHEAD BELOW
COMBINING DIAERESIS BELOW
COMBINING RIGHT ARROWHEAD AND UP ARROWHEAD BELOW
COMBINING PLUS SIGN BELOW
COMBINING TURNED COMMA ABOVE
COMBINING DOUBLE BREVE
COMBINING GREEK YPOGEGRAMMENI
LATIN SMALL LETTER O
COMBINING SHORT STROKE OVERLAY
COMBINING PALATALIZED HOOK BELOW
COMBINING PALATALIZED HOOK BELOW
COMBINING SEAGULL BELOW
COMBINING DOUBLE RING BELOW
COMBINING CANDRABINDU
COMBINING LATIN SMALL LETTER X
COMBINING OVERLINE
COMBINING LATIN SMALL LETTER H
COMBINING BREVE
COMBINING LATIN SMALL LETTER A
COMBINING LEFT ANGLE ABOVE 
```

### 5个字素

```
Z with some s**t
a with some s**t
l with some s**t
g with some s**t
o with some s**t 
```

## [使用ICU](http://site.icu-project.org/)查找长度

ICU 有 C++ 类，但它们需要转换为 UTF-16。您可以直接使用 C 类型和宏来获得一些 UTF-8 支持：

```
#include <memory>
#include <iostream>
#include <unicode/utypes.h>
#include <unicode/ubrk.h>
#include <unicode/utext.h>

//
// C++ helpers so we can use RAII
//
// Note that ICU internally provides some C++ wrappers (such as BreakIterator), however these only seem to work
// for UTF-16 strings, and require transforming UTF-8 to UTF-16 before use.
// If you already have UTF-16 strings or can take the performance hit, you should probably use those instead of
// the C functions. See: http://icu-project.org/apiref/icu4c/
//
struct UTextDeleter { void operator()(UText* ptr) { utext_close(ptr); } };
struct UBreakIteratorDeleter { void operator()(UBreakIterator* ptr) { ubrk_close(ptr); } };
using PUText = std::unique_ptr<UText, UTextDeleter>;
using PUBreakIterator = std::unique_ptr<UBreakIterator, UBreakIteratorDeleter>;

void checkStatus(const UErrorCode status)
{
    if(U_FAILURE(status))
    {
        throw std::runtime_error(u_errorName(status));
    }
}

size_t countGraphemes(UText* text)
{
    // source for most of this: http://userguide.icu-project.org/strings/utext
    UErrorCode status = U_ZERO_ERROR;
    PUBreakIterator it(ubrk_open(UBRK_CHARACTER, "en_us", nullptr, 0, &status));
    checkStatus(status);
    ubrk_setUText(it.get(), text, &status);
    checkStatus(status);
    size_t charCount = 0;
    while(ubrk_next(it.get()) != UBRK_DONE)
    {
        ++charCount;
    }
    return charCount;
}

size_t countCodepoints(UText* text)
{
    size_t codepointCount = 0;
    while(UTEXT_NEXT32(text) != U_SENTINEL)
    {
        ++codepointCount;
    }
    // reset the index so we can use the structure again
    UTEXT_SETNATIVEINDEX(text, 0);
    return codepointCount;
}

void printStringInfo(const std::string& utf8)
{
    UErrorCode status = U_ZERO_ERROR;
    PUText text(utext_openUTF8(nullptr, utf8.data(), utf8.length(), &status));
    checkStatus(status);

    std::cout << "UTF-8 string (might look wrong if your console locale is different): " << utf8 << std::endl;
    std::cout << "Length (UTF-8 bytes): " << utf8.length() << std::endl;
    std::cout << "Length (UTF-8 codepoints): " << countCodepoints(text.get()) << std::endl;
    std::cout << "Length (graphemes): " << countGraphemes(text.get()) << std::endl;
    std::cout << std::endl;
}

void main(int argc, char** argv)
{
    printStringInfo(u8"Hello, world!");
    printStringInfo(u8"หวัดดีชาวโลก");
    printStringInfo(u8"\xF0\x9F\x90\xBF");
    printStringInfo(u8"Z͉̳̺ͥͬ̾a̴͕̲̒̒͌̋ͪl̨͎̰̘͉̟ͤ̀̈̚͜g͕͔̤͖̟̒͝ͅo̵̡̡̼͚̐ͯ̅ͪ̆ͣ̚");
} 
```

这打印：

```
UTF-8 string (might look wrong if your console locale is different): Hello, world!
Length (UTF-8 bytes): 13
Length (UTF-8 codepoints): 13
Length (graphemes): 13

UTF-8 string (might look wrong if your console locale is different): หวัดดีชาวโลก
Length (UTF-8 bytes): 36
Length (UTF-8 codepoints): 12
Length (graphemes): 10

UTF-8 string (might look wrong if your console locale is different): 
Length (UTF-8 bytes): 4
Length (UTF-8 codepoints): 1
Length (graphemes): 1

UTF-8 string (might look wrong if your console locale is different): Z͉̳̺ͥͬ̾a̴͕̲̒̒͌̋ͪl̨͎̰̘͉̟ͤ̀̈̚͜g͕͔̤͖̟̒͝ͅo̵̡̡̼͚̐ͯ̅ͪ̆ͣ̚
Length (UTF-8 bytes): 95
Length (UTF-8 codepoints): 50
Length (graphemes): 5 
```

[Boost.Locale](https://www.boost.org/doc/libs/1_69_0/libs/locale/doc/html/index.html)包装了 ICU，并可能提供更好的界面。但是，它仍然需要与 UTF-16 进行转换。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-05-25T04:55:38.100

如果您使用旧的 C 样式字符串而不是较新的 STL 样式字符串，则`strlen`C 运行时库中有该函数：

```
const char* p = "Hello";
size_t n = strlen(p); 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-05-25T06:44:02.897

如果您使用 std::string，有两种常用方法：

```
std::string Str("Some String");
size_t Size = 0;
Size = Str.size();
Size = Str.length(); 
```

如果您使用的是 C 样式字符串（使用 char * 或 const char *），那么您可以使用：

```
const char *pStr = "Some String";
size_t Size = strlen(pStr); 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-05-20T08:09:57.690

在 C++ std::string 中，length() 和 size() 方法为您提供字节数，**而不一定是字符数！。** 与 c 样式的 sizeof() 函数相同！

对于大多数可打印的 7 位 ASCII 字符，这是相同的值，但对于不是 7 位 ASCII 的字符，它绝对不是。请参阅以下示例以获得真实结果（64 位 linux）。

没有简单的 c/c++ 函数可以真正计算字符数。顺便说一句，所有这些东西都是依赖于实现的，并且在其他环境（编译器、win 16/32、linux、嵌入式......）上可能会有所不同

**请参见以下示例：**

```
#include <string>
#include <iostream>
#include <stdio.h>
#include <string.h>
using namespace std;

int main()
{
/* c-Style char Array */
const char * Test1 = "1234";
const char * Test2 = "ÄÖÜ€";
const char * Test3 = "αβγ";

/* c++ string object */
string sTest1 = "1234";
string sTest2 = "ÄÖÜ€";
string sTest3 = "αβγ";

printf("\r\nC Style Resluts:\r\n");
printf("Test1: %s, strlen(): %d\r\n",Test1, (int) strlen(Test1));
printf("Test2: %s, strlen(): %d\r\n",Test2, (int) strlen(Test2));
printf("Test3: %s, strlen(): %d\r\n",Test3, (int) strlen(Test3));

printf("\r\nC++ Style Resluts:\r\n");
cout << "Test1: " << sTest1 << ", Test1.size():  " <<sTest1.size() <<"  sTest1.length(): " << sTest1.length() << endl;
cout << "Test1: " << sTest2 << ", Test2.size():  " <<sTest2.size() <<"  sTest1.length(): " << sTest2.length() << endl;
cout << "Test1: " << sTest3 << ", Test3.size(): " <<sTest3.size() << "  sTest1.length(): " << sTest3.length() << endl;
return 0;
} 
```

**该示例的输出是这样的：**

```
C Style Results:
Test1: ABCD, strlen(): 4    
Test2: ÄÖÜ€, strlen(): 9
Test3: αβγ, strlen(): 10

C++ Style Results:
Test1: ABCD, sTest1.size():  4  sTest1.length(): 4
Test2: ÄÖÜ€, sTest2.size():  9  sTest2.length(): 9
Test3: αβγ, sTest3.size(): 10  sTest3.length(): 10 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-05-25T04:50:04.563

```
string foo;
... foo.length() ... 
```

.length 和 .size 是同义词，我只是认为“长度”是一个更清晰的词。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2009-05-25T04:50:08.090

```
std::string str("a string");
std::cout << str.size() << std::endl; 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2009-05-25T04:51:16.653

对于实际的字符串对象：

```
yourstring.length(); 
```

或者

```
yourstring.size(); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-09-28T16:50:17.353

这可能是输入字符串并找到其长度的最简单方法。

```
// Finding length of a string in C++ 
#include<iostream>
#include<string>
using namespace std;

int count(string);

int main()
{
string str;
cout << "Enter a string: ";
getline(cin,str);
cout << "\nString: " << str << endl;
cout << count(str) << endl;

return 0;

}

int count(string s){
if(s == "")
  return 0;
if(s.length() == 1)
  return 1;
else
    return (s.length());

} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-06-12T06:34:38.543

在不关心 std 命名空间的情况下获取字符串长度的最简单方法如下

带/不带空格的字符串

```
#include <iostream>
#include <string>
using namespace std;
int main(){
    string str;
    getline(cin,str);
    cout<<"Length of given string is"<<str.length();
    return 0;
} 
```

不带空格的字符串

```
#include <iostream>
#include <string>
using namespace std;
int main(){
    string str;
    cin>>str;
    cout<<"Length of given string is"<<str.length();
    return 0;
} 
```

# sql - JOIN 和 UNION 有什么区别？

> ID：905379
> 
> 赞同：296
> 
> 时间：2009-05-25T04:55:16.337
> 
> 标签：sql, database, join, union

`JOIN`和 和有什么不一样`UNION`？我可以举个例子吗？

* * *

## 回答 #1

> 赞同：354
> 
> 时间：2009-05-25T04:57:20.453

`UNION`将查询中的行放在一起，同时`JOIN`制作笛卡尔积并将其子集 - 完全不同的操作。的简单示例`UNION`：

```
mysql> SELECT 23 AS bah
    -> UNION
    -> SELECT 45 AS bah;
+-----+
| bah |
+-----+
|  23 | 
|  45 | 
+-----+
2 rows in set (0.00 sec) 
```

类似的简单示例`JOIN`：

```
mysql> SELECT * FROM 
    -> (SELECT 23 AS bah) AS foo 
    -> JOIN 
    -> (SELECT 45 AS bah) AS bar
    -> ON (33=33);
+-----+-----+
| foo | bar |
+-----+-----+
|  23 |  45 | 
+-----+-----+
1 row in set (0.01 sec) 
```

* * *

## 回答 #2

> 赞同：67
> 
> 时间：2009-05-25T05:01:15.067

[UNION](http://msdn.microsoft.com/en-us/library/ms180026.aspx "联盟")将两个或多个查询的结果组合到一个结果集中，其中包括属于联合中所有查询的所有行。

通过使用[JOIN](http://msdn.microsoft.com/en-us/library/ms191517.aspx "加入")，您可以根据表之间的逻辑关系从两个或多个表中检索数据。连接指示 SQL 应如何使用一个表中的数据来选择另一个表中的行。

UNION 操作不同于使用组合来自两个表的列的 JOIN。

联合示例：

```
SELECT 1 AS [Column1], 2 AS [Column2]
UNION
SELECT 3 AS [Column1], 4 AS [Column2] 
```

输出：

```
Column1    Column2
-------------------
1          2
3          4 
```

加入示例：

```
SELECT a.Column1, b.Column2 FROM TableA a INNER JOIN TableB b ON a.Id = b.AFKId 
```

这将输出两个表中条件`a.Id = b.AFKId`为真的所有行。

* * *

## 回答 #3

> 赞同：61
> 
> 时间：2015-05-28T09:50:09.223

您可能会看到两者的相同示意图解释，但这些完全令人困惑。

对于联合：

[![在此处输入图像描述](https://i.stack.imgur.com/phA2q.jpg)](https://i.stack.imgur.com/phA2q.jpg)

对于加入：

[![在此处输入图像描述](https://i.stack.imgur.com/1Tfy0.jpg)](https://i.stack.imgur.com/1Tfy0.jpg)

* * *

## 回答 #4

> 赞同：44
> 
> 时间：2011-07-08T12:04:29.173

## 加入：

连接用于显示来自不同表的具有相同或不同名称的列。显示的输出将单独显示所有列。也就是说，列将彼此相邻对齐。

## 联盟：

UNION 集合运算符用于组合来自具有相同数据类型的列的两个表中的数据。执行 UNION 时，两个表中的数据将收集在具有相同数据类型的单个列中。

例如：

请参阅下面显示的两个表：

```
Table t1
Articleno article price manufacturer_id
1 hammer 3 $ 1
2 screwdriver 5 $ 2

Table t2
manufacturer_id manufacturer
1 ABC Gmbh
2 DEF Co KG 
```

现在，为了执行 JOIN 类型，查询如下所示。

```
SELECT articleno, article, manufacturer
FROM t1 JOIN t2 ON (t1.manufacturer_id =
t2.manufacturer_id);

articelno article manufacturer
1 hammer ABC GmbH
2 screwdriver DEF Co KG 
```

那是一个连接。

UNION 意味着您必须使用具有相同数量和类型的列的表或结果集，并将其添加到表/结果集中。看这个例子：

```
Table year2006
Articleno article price manufacturer_id
1 hammer 3 $ 1
2 screwdriver 5 $ 2

Table year2007
Articleno article price manufacturer_id
1 hammer 6 $ 3
2 screwdriver 7 $ 4

SELECT articleno, article, price, manufactruer_id
FROM year2006
UNION
SELECT articleno, article, price, manufacturer_id
FROM year2007

articleno article price manufacturer_id
1 hammer 3 $ 1
2 screwdriver 5 $ 2
1 hammer 6 $ 3
2 screwdriver 7 $ 4 
```

* * *

## 回答 #5

> 赞同：24
> 
> 时间：2010-03-26T09:34:29.183

它们是完全不同的东西。

连接[允许](https://en.wikipedia.org/wiki/Join_(SQL))您关联不同表中的相似数据。

联合将两个不同查询的结果作为单个记录集返回。

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2009-05-25T05:00:39.683

Union 使两个查询看起来像一个。连接用于在单个查询语句中检查两个或多个表

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2016-05-24T10:00:01.107

联接和联合可用于组合来自一个或多个表的数据。不同之处在于数据的组合方式。

简单来说，连接将数据组合到新列中。如果将两个表连接在一起，则第一个表中的数据将显示在一组列中，与第二个表的列在同一行中。

联合将数据组合成新行。如果两个表“合并”在一起，则第一个表中的数据在一组行中，第二个表中的数据在另一组中。这些行的结果相同。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-05-25T05:07:59.720

请记住，联合将合并结果（肯定是[SQL Server ）（功能或错误？）](http://en.wikipedia.org/wiki/Microsoft_SQL_Server)

```
select 1 as id, 3 as value
union
select 1 as id, 3 as value 
```

标识，值

1,3

```
select * from (select 1 as id, 3 as value) t1 inner join (select 1 as id, 3 as value) t2 on t1.id = t2.id 
```

ID，值，ID，值

1,3,1,3

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-02-23T10:25:50.403

1\. SQL Joins 子句用于合并数据库中两个或多个表的记录。JOIN 是一种通过使用每个表共有的值来组合两个表中的字段的方法。

2\. SQL UNION 运算符将两个或多个 SELECT 语句的结果组合在一起。UNION 中的每个 SELECT 语句必须具有相同数量的列。这些列还必须具有相似的数据类型。此外，每个 SELECT 语句中的列的顺序必须相同。

例如：表 1 客户/表 2 订单

内部联接：

选择 ID、姓名、金额、日期

来自客户</p>

内部连接订单</p>

ON CUSTOMERS.ID = ORDERS.CUSTOMER_ID;

联盟：

选择 ID、姓名、金额、日期

 来自客户</p>

左连接命令</p>

ON CUSTOMERS.ID = ORDERS.CUSTOMER_ID

联盟

选择客户的 ID、姓名、金额、日期</p>

正确的加入命令</p>

ON CUSTOMERS.ID = ORDERS.CUSTOMER_ID;

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-09-29T05:22:18.903

联合运算是行的**垂直**聚合的组合结果，联合运算是列的**水平**聚合的组合结果。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-05-29T06:28:57.123

使用 UNION

UNION 将两个或多个查询的结果组合成一个结果集，其中包括属于联合中所有查询的所有行。

```
联合示例：
选择 121 作为 [列 1]、221 作为 [列 2]
联盟
选择 321 作为 [列 1]、422 作为 [列 2]

```

```
输出：

列 1 列 2
------------------
121 221
321 422

```

使用 JOIN

JOIN，您可以根据表之间的逻辑关系从两个或多个表中检索数据。

```
加入示例：
SELECT a.Column1, b.Column2 从 TblA a INNER JOIN TblB b ON a.Id = b.id

```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2015-07-27T09:51:35.410

UNION 运算符仅用于组合两个或多个 SELECT 语句。

而 JOIN 用于从每个表中选择行，可以通过内部、外部、左侧或右侧方法。

请参阅[此处](http://www.w3schools.com/sql/sql_union.asp)和[此处](http://www.w3schools.com/sql/sql_join_inner.asp)。有一个更好的例子解释。

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2016-06-08T22:41:08.337

在摘要中，它们是相似的，因为正在合并两个表或结果集，但 UNION 实际上用于将具有相同列数的结果集与具有相似数据类型的列合并。STRUCTURE 相同，只是添加了新行。

在连接中，您可以将表/结果集与任何可能的结构组合在一起，包括没有共享/相似列的笛卡尔连接。

* * *

## 回答 #14

> 赞同：-3
> 
> 时间：2019-04-04T01:09:30.050

我喜欢将一般差异视为：

*   JOINS 连接表
*   UNION (et all) 组合查询。

# jquery - 从 javascript 调用 VB.net 函数

> ID：905387
> 
> 赞同：2
> 
> 时间：2009-05-25T04:59:13.600
> 
> 标签：jquery, asp.net, ajax, vb.net, callback

我需要找到一种方法来从 javascript 调用我的 aspx 页面中的 vb.net 函数。我有一个使 .drop 类成为 .droppable 的 Jquery 函数，每当我将 .draggable 拖放到放置目标上时，我的 Jquery 代码都会成功触发 java 警报语句。全部使用纯 JavaScript。我需要做的是一些沉重的数学！

我知道javascript存在客户端，ASP/VB存在服务器端，两者永远不会相遇。从谷歌研究来看，完成我需要做的事情的理想方法似乎是在我的更新面板中触发异步回发。我创建了一个名为“HiddenButton”的隐藏按钮，还创建了一个名为“HiddenLabel”的隐藏标签。我如何让它工作，所以当我放下一些东西时，我的 javascript 调用一些东西来更新 HiddenLabel 中的文本（所以我可以将一个值传递给服务器端），并以某种方式触发 HiddenButton_click 事件？

我当前的 javascript 优点如下所示：

```
<script type="text/javascript">  
  $(document).ready(function() {  
doReady();  

var prm = Sys.WebForms.PageRequestManager.getInstance();  
prm.add_endRequest(function(s, e) {  
    doReady();  
});  
});

function doReady() {

$('.drag').draggable({ revert: true, helper: 'clone' });
$('.drop').droppable({
    tolerance: "touch", // Here should be a string
    drop: function() { alert('dropped'); } 
```

这是我认为需要更新标签并触发回发的地方，但我不知道它是什么:(

```
});

} // End of do ready
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-25T05:11:46.347

您可以使用隐藏变量的 OnValueChanged 事件。连接那个事件，改变隐藏变量的值，然后写下这个语句——

```
__doPostBack('<%= hdnHidden.UniqueID  %>', ''); //This statement will fire the OnValueChanged event and the control will be moved to the server side where you can update the label and do your processing. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-25T05:07:37.227

使用 JS 调用 __doPostBack 会导致页面回发。

```
function __doPostBack(eventTarget, eventArgument) { ... } 
```

# c# - .NET 工作流引擎

> ID：905389
> 
> 赞同：35
> 
> 时间：2009-05-25T04:59:58.653
> 
> 标签：c#, .net, workflow, workflow-foundation

这是一个多部分的问题：

首先，您对 Workflow 的个人看法是什么？

其次，还有其他好的基于.NET 的工作流引擎吗？关于我的使用的一些信息：

*   使用静态和动态工作流
*   与城堡（单轨和温莎）整合
*   通过 MSMQ 使用队列
*   我们想要一个简单、干净、非庞然大物的框架。
*   GUI工作流程编辑并不是真正需要的，但我不在乎它是否有。

我不在乎工作流是在 DB、XML 还是 Code 中定义的，因为我们决定定义它，如果它不被支持，我们可以编写一个适配器。专有（免费或收费）很好，但首选开源。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-11-17T16:17:36.990

我在一个生产系统中成功使用了[http://codeplex.com/simplestatemachine](http://codeplex.com/simplestatemachine)（一个 ASP.NET 系统，用于处理 350 多个不同的政府营业执照颁发）。

Boo 中实现了一个简单的状态机，因此我们只需将定义暴露在系统管理员可以修改的文本文件中。在编辑器中，我们进行验证以确保编辑正确且工作流程实际正常运行。

今天我发现了这个，[https://github.com/nblumhardt/stateless](https://github.com/nblumhardt/stateless)，看起来很有趣。

我们切换到开源替代方案只是因为我们对 Workflow 的体验不好。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-05-25T05:29:29.757

我不喜欢工作流以二进制格式保存到数据库的事实。这意味着您无法仅通过查看数据库来理解它。

对版本控制的支持很弱。这意味着，如果您更新您的工作流程，要确保在先前版本上运行的任何现有工作流程都可以完成，这是一个真正的麻烦。您需要弄乱 web.config 并指定不同版本的 .dll 文件。

我确实和一对夫妇一起玩。[WorkflowGen](http://www.workflowgen.com/)非常易于使用且功能强大。但最后我决定自己动手，因为我们只需要简单任务的工作流程，例如在提出采购订单和需要支付发票时向供应商发送电子邮件。我还可以完全控制源代码，并且可以通过这种方式进行修改。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2010-12-12T09:48:06.650

我们一直在使用需要简单工作流程的产品线之一；

[http://objectflow.codeplex.com/](http://objectflow.codeplex.com/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-10T22:01:05.600

您可能希望查看 Jazz，它允许您使用 C# 编写工作流 - [http://jazz.codeplex.com/](http://jazz.codeplex.com/)

# .net - 如何绑定具有多个 ObservableCollection 的视图

> ID：905392
> 
> 赞同：0
> 
> 时间：2009-05-25T05:00:43.240
> 
> 标签：.net, observablecollection

我有一个带有多个 ObservableCollection 的 ModelView。这是正确的方法吗？当视图调用视图模块时，所有的 ObservableCollection 都需要重新填充数据，然后对所有 CollectionViewSource 再次进行绑定。

另外我如何在视图模型的构造函数之外调用 CollectionViewSource.GetDefaultView，我得到一个错误，它只能在构造函数中调用。

如果我为每个 CollectionViewSource 创建一个单独的 ModelView，那么在将其中一个视图与 ModelView 绑定时，其余的控件也会被绑定，但是这次使用空值并且所有的 ModelView 都没有被调用。

我真的很困惑该怎么办，请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-25T05:44:50.123

听起来您正在使用 MVVM。你当然可以绑定到多个 ObservableCollections。问题真的是：**你需要**吗？您应该保留绑定到 ObserableCollections 的情况，以防您的 ViewModel 发生变化，并且您需要让您的视图随更改保持更新。

这是我为您准备的一个示例，该示例将一个 View 绑定到 ViewModel 中的两个 ObservableCollections 和一个 List。所以——是的——你当然可以绑定到你想要的任何东西。在这个例子中，两个 ObservableCollections 将交替更新。这有帮助吗？

如果对整个 vs 项目有帮助，我在[这里](http://www.rootsilver.com/files/905392.zip)发布了代码。

看法：

```
<Window x:Class="WpfApplication1.Window1"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="Window1" Height="300" Width="300">
    <StackPanel Orientation="Vertical">

        <TextBlock>Bind to List:</TextBlock>
        <ListView ItemsSource="{Binding Path=Users}" Height="20"/>

        <TextBlock>Bind to ObservableCollection1:</TextBlock>
        <ListView ItemsSource="{Binding Path=ObservableCollection1}" 
                 Height="100"/>

        <TextBlock>Bind to ObservableCollection2:</TextBlock>
        <ListView ItemsSource="{Binding Path=ObservableCollection2}" 
                 Height="100"/>

    </StackPanel>
</Window> 
```

ViewModel（View 绑定到这个 ViewModel）

```
using System;
using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.Timers;
using System.Windows;
using System.Windows.Threading;
namespace WpfApplication1
{
  public class Class1
  {
    public List<string> Users{get;set;}
    public ObservableCollection<string> ObservableCollection1 { get; set; }
    public ObservableCollection<string> ObservableCollection2 { get; set; }
    public Class1()
    {
      this.Users = new List<string>{ "bob", "mary" };

      this.ObservableCollection1 = new ObservableCollection<string>();
      this.ObservableCollection2 = new ObservableCollection<string>();
      int counter = 0;
      Timer t1 = new Timer();
      t1.Enabled = true;
      t1.Interval = 1000;
      t1.Elapsed += delegate
      {
        Application.Current.Dispatcher.Invoke(
        DispatcherPriority.Send, new Action(delegate
        {
          if(counter % 2 == 1)
            this.ObservableCollection1.Add(DateTime.Now.ToString());
          else
            this.ObservableCollection2.Add(DateTime.Now.ToString());
          ++counter;
        }));
      };
    }
  }
} 
```

# objective-c - 关于 NSStrings 的最后一句话：可变和不可变

> ID：905396
> 
> 赞同：8
> 
> 时间：2009-05-25T05:02:52.910
> 
> 标签：objective-c, cocoa, cocoa-touch, immutability, mutable

我读过几本书......和在线......关于不可变和可变字符串。他们声称“不可变字符串”无法更改。（但他们从不定义“改变”。）

哪些 NSString 可以在不使用 NSMutableString 的情况下进行更改？

该字符串包含“catfish”......我后来尝试将其更改为“cat”。（相同的字母，只是更短。）

它包含“猫”......我尝试将其更改为“鲶鱼”。（类似的开始......但只是变长了。）

我把“猫”改成“猫”。（相同的字母，但只是大小写发生了变化。）

我把“猫”变成了“狗”。（完全不同的字符串，但长度相同。）

我把“猫”改成了“山茱萸”。（完全不同的字符串，但更长。）

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-05-25T05:11:38.657

答案是——没有。不可变意味着它不能更改为与原始字符串不同的*任何内容。*每个字符都保持不变，长度不能改变，等等。一旦它被定义，你就不能改变关于该字符串的任何内容。如果您想让它更长或更短或更改任何字符，您需要创建一个新字符串（或使用 NSMutableString 开头）。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-05-25T05:55:35.240

如果我声明一个变量：

```
NSString * var;
// Here some code giving a new value to var 
```

不可变的是 指向的对象`var`，而不是`var`它本身。

这意味着我无法更改 指向的对象的任何内容`var`，但我可以更改指向的对象。

您提到的任何操作都不允许在 上进行，但您可以使用另一个不同的字符串`var`进行分配：`var`

```
NSString * anotherVar;
// Here some code giving a new value to anotherVar

var = anotherVar; // This is allowed (with a memory leak if GC is disabled)

// The following is also allowed: -stringWithFormat: creates a new object
var = [var stringWithFormat:@"%@ with more chars", var]; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-01-03T14:42:36.770

NSString 不能被编辑，每次你为 NSString 对象分配一个字符串值时，它都会孤立旧的字符串对象并重新创建新的字符串对象。如果您正在处理大型字符串缓冲区，那将是一项昂贵的操作。如果您正在处理大型字符串缓冲区，请使用 NSMutableString 以获得最佳性能。这类似于 .net 中的 string vs stringBuilder。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-25T05:42:30.127

你也需要定义“改变”:)

基本上，当您创建一个 NSString 时，您正在创建一个字符数组，并且您告诉编译器该数组*的内容*永远不会改变。“永不改变”部分是“不可变”部分；字符串包含的数据永远无法修改。

另一方面，NSMutableString 允许您实际更改它指向的数据（因此它是“可变的”）。注意 NSMutableString 存在的 'appendString' 方法；这实际上需要数据并将其拍到字符串的末尾。

例如，如果您有：

NSString *myString = @"猫"; myString = @"金鱼";

那会很好用。您永远不会真正更改 myString 包含的数据；您只是告诉它您希望它指向一个新的不可更改数据段。

唯一一次你真正遇到可变对象和不可变对象之间差异的问题是，如果你试图直接修改 myString （例如，将“s are cool”附加到它或其他东西）。

换句话说，任何一个类都允许您将任何字符串“更改”为任何其他字符串，但是您用来执行此操作的方法会非常不同。例如，要使用可变字符串将“cat”转换为“CAT”，您可以遍历每个字符并简单地将其设为大写（因为您可以修改可变字符串的内容）。另一方面，对于不可变字符串，您必须首先将原始字符串复制到其他地方，对其进行修改，然后将您的变量重定向到这个新的 NSString。

以下链接可能有用： [http ://www.kirupa.com/forum/showthread.php?t=](http://www.kirupa.com/forum/showthread.php?t=307928) [307928 http://forums.macrumors.com/showthread.php?t=467099](http://forums.macrumors.com/showthread.php?t=467099)

我还建议做一些谷歌搜索；这是一个涉及到总体发展的问题，是一个比较重要的概念。它也在互联网上的其他地方被讨论到死。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-25T06:29:30.427

不可变字符串（或者实际上是任何不可变对象）是在初始化后根本无法更改的字符串。

这是在（伪）伪代码中使用不可变字符串的优势：

```
// if using mutable strings
let a = "Hello World";
let b = a;
a.replace("Hello", "Goodbye"); 
```

现在持有什么？“你好世界”？“世界再见”？现在 b 持有什么？

如果字符串是可变的，那么它可能会保存“再见世界”。这可能是你想要的。可能不是。

有了不变性，很明显 b 仍然指向原始字符串，因为 replace 方法不能更改实际字符串，而是返回对新字符串的引用。

在此示例中，您可能看不到太多好处。但是如果 a 和 b 在代码的不同部分或不同的线程中被引用和使用，具有不可变引用会消除很多潜在的错误。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-07-10T12:17:09.273

默认情况下，目标 C 语言中使用的 NSString 是不可变的。NSMutableString 用于声明和定义可变字符串。不可变字符串中的任何内容都无法更改。不是长度，不是字符，什么都没有。

# python - 是否有任何库可以在网页中查找嵌入式 flvs 的 url？

> ID：905403
> 
> 赞同：1
> 
> 时间：2009-05-25T05:07:31.017
> 
> 标签：python, download, flv

我正在尝试编写一个可以自动下载游戏视频的脚本。这些网页看起来像 dota.sgamer.com/Video/Detail/402 和 www.wfbrood.com/movie/spl2009/movie_38214.html，它们在 flash 插件中嵌入了 flv 播放器。是否有任何图书馆可以帮助我找出确切的 flv 网址？或任何其他想法得到它？

非常感谢您的回复

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-25T06:15:54.253

它看起来像[Flashticle](http://undefined.org/python/#flashticle)（在奶酪店中搜索“flash”的第 4 个结果），如果它在那里，也许能够获得你想要的信息。

至于获取文件，您需要查看 html 解析器。我听说过[美丽汤](http://www.crummy.com/software/BeautifulSoup/)的好消息。在它和 urllib2（标准库的一部分）之间，您应该能够下载 swf 文件以进行处理。

请注意，我从未尝试过这个，并且根本不熟悉 Flash（当然，除了作为最终用户之外）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-25T05:34:41.747

如果嵌入播放器使用了一些设置了 flv 路径的变量，那么你可以下载它，如果没有的话。我怀疑你会找到“自动”做的事情，因为每个站点都制作它自己的播放器并通过 id 识别文件而不是通过路径，这使得很难知道 flv 文件在哪里。

# c - 在 POSIX C 中获取自己的外部 IP 地址

> ID：905406
> 
> 赞同：3
> 
> 时间：2009-05-25T05:08:10.640
> 
> 标签：c, networking, ip-address, posix

我正在寻找自己的 IP 地址，以便将该信息发布到对等网络中。在 POSIX/C 中，我们有`getaddrinfo(NULL, ...)`，但这似乎总是返回`INADDR_ANY`or `INADDR_LOOPBACK`，这对我来说没用。

有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-26T14:13:34.057

问题之一是，即使您获得了本地 IP 地址，Internet 其余部分看到的 IP 地址也可能不同，因为不幸的是， [NAT](http://en.wikipedia.org/wiki/Network_address_translation)的杂乱无章非常普遍。使用 IPv6 可能会抑制这个问题，但现在它可能不是你的选择。

要获取**公共**IP 地址，您需要为此目的制定的协议，例如[STUN](http://en.wikipedia.org/wiki/STUN) ( [RFC 5389](http://www.ietf.org/rfc/rfc5389.txt) )。C中有[公共 STUN 服务器](http://www.voip-info.org/wiki/view/STUN)和已经存在的[STUN 客户端](http://sourceforge.net/projects/stun/)。

所有点对点程序都有类似的问题，所以了解其他人在做什么，我强烈建议阅读[RFC 5128，“跨网络地址转换器 (NAT) 的点对点 (P2P) 通信状态”](http://www.ietf.org/rfc/rfc5128.txt)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-25T06:07:42.067

您说的是公共地址，您的应用程序的同行可以与您联系的地址。唯一完全证明的方法是连接到一个已知的“外部”对等点并将您的地址发回给您。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-12T23:18:36.987

尽管我应该指出一台计算机可以有多个 IP 地址，但我并不是想让事情变得更复杂。通常每个网卡都会有一个。

一个更具体的提问方式是“当我连接到 foo.com.org 时，如何找到将用作源地址的 IP 地址”我喜欢 bortzmeyer 对此的回答 :)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-25T05:12:35.957

创建一个 UDP 套接字，bind() 到 INADDR_ANY，connect() 到 Internet 上的某个地址，然后在套接字上使用 getsockname() 来找出分配给它的地址。

如果网络协议支持它，另一个好的解决方案是询问您的引导同行他们认为您的 IP 是什么。这会自动处理 NAT。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-25T05:31:50.660

您是否检查`ai_next`了返回结构的字段？

`getaddrinfo()`返回地址的链表。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2009-05-25T06:58:53.480

如果您知道您的主机名称，您可以使用 gethostbyname 来获取 IP 地址。

# objective-c - 无法制作make文件

> ID：905409
> 
> 赞同：1
> 
> 时间：2009-05-25T05:09:55.320
> 
> 标签：objective-c, gnustep

嗨，先生，首先我要感谢您回答我。我打字时仍然遇到错误

包括 $(GNUSTEP_MAKEFILES)/common.make

在 MINGW32 外壳中，我收到如下错误

sh：GNUSTEP_MAKEFILES：找不到命令 sh：include：找不到命令

请告诉我是否应该制作一个 make.txtfile 并在 MINGW32 shell 中输入 make 或在 MINGW32 shell 中输入 make.mfile

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-25T13:18:59.657

在我看来，您正在尝试将 make 文件作为 shell 脚本运行，这就是错误消息所暗示的。这可能是微不足道的，但您需要调用`make`以“执行”makefile 的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-25T06:20:53.387

可能您正在调用 Windows 版本的 make.exe，因为 system32 或其他构建系统在您的路径中。重新排序 PATH 以确保 mingw32/bin 是第一个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-07-08T06:03:27.750

如果你在 Windows 上使用 GNUstep，你最好也安装 cygwin。比你启动 bash shell，获取所提供的文件来获取所有 GNUSTEP 路径，你会有更多的运气。目前看来你是从 cmd.exe 开始的，而且你没有安装任何 Shell，所以这些东西总是会坏掉的。您确实必须遵循安装指南，并且一定不要忘记这一步。（这需要一个 unix shell）

[http://www.gnustep.org/resources/documentation/User/GNUstep/gnustep-howto_4.html#SEC8](http://www.gnustep.org/resources/documentation/User/GNUstep/gnustep-howto_4.html#SEC8)

所以真的你必须按照这里的大纲 [http://www.gnustep.org/resources/documentation/User/GNUstep/gnustep-howto_toc.html](http://www.gnustep.org/resources/documentation/User/GNUstep/gnustep-howto_toc.html)

问候弗里德里希

# .net - .NET 或基于 Java 的小型桌面应用程序

> ID：905410
> 
> 赞同：4
> 
> 时间：2009-05-25T05:11:22.853
> 
> 标签：.net, desktop, client-side, java

几天前我发布了一个问题，非常感谢那些已经回答的人。我重新发布这个问题是因为我似乎需要澄清我们的要求。所以这里更详细。

我正在尝试构建一个非常小的桌面应用程序——人们可以很快下载的东西。我正在尝试决定是用 .NET 还是 Java 构建它。我有两个目标：1\. 快速下载 2\. 针对最大的用户群（按此顺序）

我知道 Java 将是跨平台的，但是如果很多 Windows 用户没有在他们的计算机上安装 JRE，我被告知他们需要下载一些 15MB 的 JRE 软件才能运行这个应用程序，而 .NET 可以预装在大多数 Windows 机器中。

如前所述，对我来说，一个可快速下载的小型应用程序比跨平台应用程序更重要。因此，我想使用预装在最多计算机中的平台，这样我的用户只需下载我的应用程序，而无需额外下载平台本身（JRE 或 .NET）。从这个角度来看，哪个平台预装的机器比较多？Java 还是 .NET？

有谁知道有多少百分比的 Windows 用户在他们的机器上没有 JRE？有多少百分比的 Windows 用户预装了 .NET？

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-25T06:03:54.070

如果您走 .NET Framework 的路线，问题可能是您将针对哪个版本的框架。

例如，如果您想针对 .NET Framework 3.5，虽然很多人可能已经通过自动更新安装了它，但有些人可能不会。就我而言，*去年夏天我购买了我的 Eee PC 时，它只安装了 .NET Framework **1.1**。*

当我想升级到 .NET Framework 3.5 时，安装程​​序是 2.7 MB——这很好，除了它是一个在线安装程序，而且[微软下载中心](http://www.microsoft.com/downloads/details.aspx?FamilyId=333325FD-AE52-4E35-B531-508D977D32A6&displaylang=en)说我可能需要多达**500 MB**的可用空间。（而且离线安装程序是 197 MB！）这是一个小问题，因为 Eee PC 的主分区在出厂安装条件下只有 1.3 GB 可用空间。

另一方面，最新版本的 JRE 下载为 15.5 MB，其中包括*所有内容*——不仅仅是在线安装程序——它是一个离线安装程序。安装的 JRE 在我的机器上占用了大约 90 MB。

考虑到这一点，是的，.NET Framework 可能存在，但也可能需要相当大的下载才能开始，如果它不存在，特别是如果目标系统上存在版本非常过时。

使用 Java，下载量最多为 15.5 MB，这就是全部。此外，使用新的[Java 内核](http://java.sun.com/javase/6/6u10faq.jsp#JKernel)，可以通过下载管理器逐步获取 JRE，基本下载量约为**2 MB**。[（在此处](http://java.sun.com/developer/technicalArticles/javase/java6u10/#kernel)、[此处](http://weblogs.java.net/blog/chet/archive/2007/05/consumer_jre_le.html#JavaKernel)和[此处](http://weblogs.java.net/blog/enicholas/archive/2007/05/java_kernel_unm.html)阅读有关它的更多信息。）“Windows 内核安装”的下载页面列出为 0.22 MB。（这可能意味着它仍然需要上网并下载最多 2 MB 的所需文件。）

如果最佳情况和最差情况之间的差异是 0 MB 与 200 MB，这对于用户在安装时将面临的体验来说似乎非常不可预测。这是向用户解释“安装将在几分钟内完成”与“安装可能需要一个小时”的区别。

由于 0 MB 或 15 MB 之间的差异，它可能不是很好，但也不是很糟糕，尤其是对于潜在的在线增量安装程序，只需下载 2 MB 即可开始使用。

回答完这个问题后，我开始认为 Java 运行时并不像我以前想象的那么庞大，现在我实际上已经花时间研究了这个问题。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-25T05:19:09.957

> 1.  非常快的下载
> 2.  针对最大的用户群（按此顺序）

1、你知道有所谓的java小程序，所以从网上下载小应用程序是很常见的，而且jar都是压缩文件（我不知道CLI exes）

2，如果你想瞄准**最大**的用户群，忘记“.Net”，因为它只适用于 Windows 用户而不是 Mac OS X 或 Linux 用户......所以，你会自动忽略这些潜在用户。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-25T05:47:17.267

我的个人意见。我会在 .net 中进行。这是我自己的经验。我在 .net（非常小的桌面应用程序）中开发了 TweetMyPC，一个月内的下载量几乎超过了 3700 次，但我只收到了 5 到 10 封电子邮件，要求我使用 Mac 应用程序，而要求我使用 Linux 应用程序的电子邮件很少。

编辑：我知道这些电子邮件是由真正关心我的申请的人发送的。其他人只会忽略。我不反对 mac 或 java 应用程序开发 ;-) 我刚刚写了关于我的 exp。

以下是我选择 .net 的原因

1.  安装时不那么头疼（我的个人经验——当你没有 jre 时，大多数时候安装 Java 应用程序会让人头疼。我总是感到困惑）所以对于普通 PC 用户来说，安装应用程序会很容易。

2.  更快的发展。我建议您现在针对一个平台。我使用 .net 的另一个原因是因为该应用程序主要针对 PC（即 TweetMyPC ;-)）我的应用程序的功能是重新启动/关闭，我无法在一个应用程序中使其跨平台。所以我针对的是 Windows 用户。

3.  [ClickOnce](http://msdn.microsoft.com/en-us/library/t71a733d(VS.80).aspx)：如果您计划将来为您的应用程序添加更多功能，这将是一个非常有用的功能。就我而言，我的应用程序变得非常受欢迎（这是我从未预料到的），但现在我不知道如何通知我现有的 3000 多名用户有关更新的信息。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-25T05:29:48.697

（个人意见）在 .net 中开发您的应用程序会更快（dons armour）。

此外，JRE 是一个重要的考虑因素。这取决于你的目标受众是谁。在技​​术规模上，人们更有可能拥有 JRE 和/或非 Windows 环境。在技​​术规模较低的情况下，人们更有可能拥有窗户，可能没有 JRE。

因此，如果它是 'joe blow' 的程序，那么一定要去 .net。如果它是为“技术人员”的人准备的，我会说这取决于您的个人喜好，但 java 可能会接触到更广泛的受众。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-25T06:04:02.167

似乎没有人回答您关于 JRE 安装基础的问题，尽管许多人同意您的*假设*，即 JRE 部署非常低。

那么一些实际数据呢？据[TheCounter](http://www.thecounter.com/stats/2008/August/java.php)称，92% 的浏览器用户拥有 JRE。当然，明智的做法是尽可能多地寻找数据。但这表明你的担心可能被夸大了。

*但更重要的是，使用*最新版本的 .NET 或最新版本的 JRE 的用户很少。因此，如果您打算使用最新的功能，您的用户可能不得不下载一些东西。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-25T08:07:34.933

我了解您的要求是：

1.  非常快的下载
2.  目标最大的用户群

正如其他人所提到的，我认为很难准确衡量所涉及的所有变量。它是针对高技术还是低技术的受众？它有什么作用？您表示它可能是跨平台的，但您不在乎它是否是。这表明它不是非常特定于平台的。您甚至可以选择完全基于 Web 的路线。

如果您的要求颠倒了：

1.  目标最大的用户群
2.  非常快的下载

我会说使用Java。具体来说，将 Java 1.4.2 或 Java 1.5 定位为最低版本。这将使您几乎免费使用 Mac/Windows/Linux 和其他几个平台（当然取决于应用程序功能）。所以这将针对近 99.9% 的用户......这比 90% 的用户要好。同样，这是如果您的目标是尽可能多的受众。

我之所以颠倒这些要求，是因为我不确定您是否可以自信地说您选择的平台总是会为大多数用户带来非常快速的下载。我主要做Java开发。当我最近创建一个 Java 小程序作为项目的一部分时，我确实遇到了大量没有 Java 并且需要安装它的用户。但是一旦安装，它通常非常顺利。根据您打算定位的 .NET 版本，您的结果可能相似。

我想我的建议是：

1.  如果您需要大量观众和少量下载，请使用 Flash
2.  .NET 如果您不打算支持其他平台
3.  Java 如果您想支持尽可能多的平台，而 Flash 无法满足您的需求

我从未在 Flash 或 AIR 中开发过任何东西，但如果您的应用程序符合它提供的功能，那么它可能值得研究。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-25T06:45:11.133

考虑改用 Flash。超大市场渗透率，易+小安装，非常适合小程序

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-25T14:14:04.787

在桌面上被 Java 烧毁后，我会说坚持使用 .NET 或 flash。即使是最新的 javaFX，查看演示应用程序（Sun 已经做了很多工作，您会感觉到它以前有多糟糕）仍然需要**两个**安全对话框才能玩突围游戏。他们只是不在那里。

但是，如果您走这条路，请以 .NET 2.0 为目标，以尽可能避免下载问题。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-05-25T05:29:38.353

银光怎么样？它将在 Windows、Linux 和 Mac 上运行，并且只需从网络上下载大约 4mb（如果他们还没有的话）。它可以作为 Web 应用程序或桌面应用程序（仅限 Silverlight 3）运行，并且具有使用完整 .NET 框架的许多功能和优势。

# c# - 使用 MEF 从 X 个文件夹中导入零件

> ID：905413
> 
> 赞同：2
> 
> 时间：2009-05-25T05:12:30.823
> 
> 标签：c#, asp.net-mvc, mef

我有许多文件夹，它们都包含应该导入的 MEF 部件。查找所有部件以遍历文件夹并创建 MEF 聚合目录对象的最简单方法是什么？

我需要根据从中读取的文件夹将部件放置在应用程序中的不同位置。所以文件夹“Test1Parts”中的部件应该放在应用程序的“Test1”部分下。我是否以某种方式提供了文件夹名称，或者通过聚合目录导入后它们看起来都一样吗？

我有通用部分，所以我不能真正在每个部分上添加一个属性，重新编译只是为了让它们显示在应用程序的不同部分。

另一种方法（如果不能通过文件夹结构控制）当然是使用我在导入之前读取的配置文件，告诉哪个部分应该去哪里。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-25T12:06:59.723

我不是 100% 清楚您要做什么，但我建议为您的应用程序的每个“部分”使用一个聚合目录。然后，您将根据该部分的零件目录对每个部分执行 Compose。每个目录将仅包含相关目录中的部分（您还可以将一些公共目录加载到两个目录中）。这有任何意义吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-25T17:31:13.283

我认为最好的方法是为每个文件夹创建一个单独的容器，并为该文件夹中的部件创建一个相应的 DirectoryCatalog。如果有需要全局的部件，那么您可以拥有一个包含这些部件的父目录，并为每个目录设置子目录。

# php - 向 Netbeans 添加自定义文件扩展名

> ID：905416
> 
> 赞同：54
> 
> 时间：2009-05-25T05:13:41.773
> 
> 标签：php, netbeans, ide

我正在尝试弄清楚如何添加要被 Netbeans 识别的自定义文件类型。

我正在编辑 .tpl 文件，我希望它们被识别为 PHP/HTML 文件。

[我在这里](http://www.techienuggets.com/Comments?tx=38126)和[这里](http://forums.netbeans.org/ptopic3275.html)都看过，但我在配置目录中找不到 cnd.properties 并且`Advanced Options`选项对话框中没有对话框。

我正在使用带有 PHP 的 Netbeans 6.5 和最新的所有模块。

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2009-05-25T06:09:15.623

让我猜猜，对于 Smarty 模板？我做了以下

1.  打开工具并选择选项。
2.  选择其他选项卡。
3.  选择文件子选项卡的东西。
4.  单击**新**文件扩展名并输入**tpl**。
5.  选择 MIME 类型。
6.  单击确定。完毕！
7.  （可能需要重新启动 Netbeans 才能看到实际更改）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-02-18T08:03:33.763

在 NetBeans 8.XX 中，这是通过转到**NetBeans > Preferences > Miscellaneous > Files**来实现的。在**文件扩展**名行中单击**新建**并输入不带点的新文件扩展名（例如：*tpl*）。选择**关联文件类型 (MIME)**，然后单击**应用**。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-08-02T06:05:19.520

去

```
Netbeans
    tools
     options
      Miscellaneous
        Files 
```

现在找到行`file extension`select `tpl`。然后**最重要**的是选择`Associated File Type (MIME)`as `text/x-php5`。保存后，重新启动netbeans。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-27T15:32:48.833

如果您正在寻找如何让 Netbeans 识别 smarty 模板，现在有一个 Smarty 模板插件应该更有用： http: [//plugins.netbeans.org/plugin/37379/php-smarty](http://plugins.netbeans.org/plugin/37379/php-smarty)

# contracts - IT 合同中指定人员/资源的“开放”小时数的术语？

> ID：905418
> 
> 赞同：1
> 
> 时间：2009-05-25T05:14:05.783
> 
> 标签：contracts

快速提问...我的妻子正在为她工作的 IT 公司起草一份与另一家 IT 公司合作的小协议，她的公司将在其中借出或分配程序员，而没有限制或指定分配资源的时间长度.

这两家公司之前有过合作，协议中有一个资源每小时成本的数据表，具体取决于他的级别，以及可以收取的限制小时数。

在这种情况下，由于他们将分配资源，因此他们需要将数字替换为一个单词或一个非常简短的短语，以描述小时数是资源分配给他们的总小时数。

我不确定什么是好词……它会是“开放”吗？还是“无限”？还是“工作小时数”？我不确定，我尝试在网上搜索，但找不到适合我需要的东西。

非常感谢任何帮助，因为她明天需要提交草稿。谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-25T05:20:01.530

“进行中”、“根据需要”、“分配时每小时”？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-25T05:39:37.980

“ .. 小时数是分配给他们的资源工作的**总小时数。”**

“累积”时间呢？

# c# - 数据表中的图像

> ID：905419
> 
> 赞同：2
> 
> 时间：2009-05-25T05:16:44.733
> 
> 标签：c#, image, datatable

我使用 OpenFileDialog 读取图像。示例代码如下：

```
openFileDialog1.ShowDialog();
if (openFileDialog1.FileName != null)
   if (picBoardImage.Image != null)
{
    picBoardImage.Image.Dispose();
}
picBoardImage.Image = Image.FromFile(openFileDialog1.FileName); 
```

我想将此图像存储在数据表中。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-25T05:25:18.967

你可以这样做 -

```
DataTable table = new DataTable("ImageTable"); //Create a new DataTable instance.

DataColumn column = new DataColumn("MyImage"); //Create the column.
column.DataType = System.Type.GetType("System.Byte[]"); //Type byte[] to store image bytes.
column.AllowDBNull = true;
column.Caption = "My Image";

table.Columns.Add(column); //Add the column to the table. 
```

然后，向该表添加新行并设置`MyImage`列的值。

```
DataRow row = table.NewRow();
row["MyImage"] = <Image byte array>;
tables.Rows.Add(row); 
```

编辑：您可以查看[此](http://www.codeproject.com/KB/recipes/ImageConverter.aspx "图像转换器")CodeProject 文章以获取有关将图像转换为字节数组的帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T16:30:45.240

我实际上也试图实现这一点。我的解决方案实际上并不涉及。

```
Drawing.Bitmap img = new Drawing.Bitmap("Path to image"); //Replace string with your OpenFileDialog path.

DataColumn column = new DataColumn("ImageColumn");
column.DataType = System.Type.GetType("System.Drawing.Bitmap");

//Code to add data to a cell:
DataRow row = new DataRow();
row("ImageColumn") = img; 
```

对我来说，这就像一个魅力。

# c# - KeyValuePair VS DictionaryEntry

> ID：905424
> 
> 赞同：127
> 
> 时间：2009-05-25T05:20:22.780
> 
> 标签：c#

通用版本的 KeyValuePair 和 DictionaryEntry 有什么区别？

为什么在通用 Dictionary 类中使​​用 KeyValuePair 而不是 DictionaryEntry？

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2009-05-25T05:46:22.897

`KeyValuePair<TKey,TValue>`用于代替，`DictionaryEntry`因为它是泛型的。使用 a 的好处`KeyValuePair<TKey,TValue>`是我们可以为编译器提供更多关于我们字典中的内容的信息。扩展 Chris 的示例（其中我们有两个包含`<string, int>`对的字典）。

```
Dictionary<string, int> dict = new Dictionary<string, int>();
foreach (KeyValuePair<string, int> item in dict) {
  int i = item.Value;
}

Hashtable hashtable = new Hashtable();
foreach (DictionaryEntry item in hashtable) {
  // Cast required because compiler doesn't know it's a <string, int> pair.
  int i = (int) item.Value;
} 
```

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2009-05-25T05:24:05.940

KeyValuePair < T,T > 用于遍历 Dictionary < T,T >。这是 .Net 2（及更高版本）的做事方式。

DictionaryEntry 用于遍历 HashTables。这是 .Net 1 的做事方式。

这是一个例子：

```
Dictionary<string, int> MyDictionary = new Dictionary<string, int>();
foreach (KeyValuePair<string, int> item in MyDictionary)
{
  // ...
}

Hashtable MyHashtable = new Hashtable();
foreach (DictionaryEntry item in MyHashtable)
{
  // ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-07-31T07:25:12.437

问题是这样解释的。请参阅以下链接：

[https://www.manojphadnis.net/need-to-know-general-topics/listkeyvaluepair-vs-dictionary](https://www.manojphadnis.net/need-to-know-general-topics/listkeyvaluepair-vs-dictionary)

列表<键值对>

1.  打火机

2.  在 List 中插入更快

3.  搜索比字典慢

4.  这可以序列化为 XMLSerializer

5.  更改键值是不可能的。键值对只能在创建过程中赋值。如果要更改，请在同一位置删除并添加新项目。

字典<T键，T值>

1.  重的

2.  插入速度较慢。必须计算哈希

3.  由于哈希，搜索速度更快。

4.  不能序列化。需要自定义代码。

5.  您可以更改和更新字典。

# linq-to-sql - 随机项数据集上的分页

> ID：905435
> 
> 赞同：2
> 
> 时间：2009-05-25T05:26:10.870
> 
> 标签：linq-to-sql, random, pagination

我必须在网站上生成一个项目列表，这些项目列表对于该特定项目列表的用户会话是随机的。

我将添加一个链接来演示该问题。 [网站链接](http://www.logta.com/en/CategoryListing.aspx?locid=2&catid=2&pagesize=10&pageno=1&sort=DiscountedPrice&order=asc)

场景：当用户进入并点击链接时，页面上的项目应该是随机的。当用户点击第二、三页之后，它应该遵循它第一次生成的相同随机模式，这样当我回到第一页时，该页面上的项目将与用户第一次单击时相同关联。

我确实想过将所有项目的数据集随机化一次并将它们保持在会话中，但这是最后的手段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-25T06:14:22.573

1) 您的随机数生成器必须是可重复的：通过为每个用户使用唯一的种子并使用 Random() 类，您可以在多个 HTTP 请求中生成相同的随机数序列。但是，您必须将种子存储在某个地方（我建议使用 cookie 或隐藏的输入元素）。

```
public Random GetGenerator() {
DateTime now = new DateTime();
long ticks = now.Ticks();

if(getCookie("ticks") > 0) {
// existing user:
ticks = getCookie("ticks"); // you must implement this to get the user's seed
} else {
// new user:
setCookie(now.Ticks()); // you must implement this to set a Cookie/input field value
}

return new Random(ticks);
} 
```

2) 您必须生成 M*(N-1) 个数字才能最终获得第 N 页的随机数，其中 M 是每页的项目数。只有这样，您才能开始为请求的页面生成随机数。

# windows - 我应该在程序中使用特殊的 Unicode 字符作为标点符号，例如省略号吗？

> ID：905437
> 
> 赞同：2
> 
> 时间：2009-05-25T05:26:35.987
> 
> 标签：windows, language-agnostic, unicode, user-interface

Unicode 有一组用于标点符号的字符，例如*省略号*(...)、En-Dash (–) 等。人们相信，使用这些字符可以改善排版，从而改善文本的视觉外观。

许多开发工具（包括 Visual Studio）都支持 Unicode，因此我可以轻松地在程序资源（对话框等）中使用这些字符。

有什么理由不这样做吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-25T05:32:30.113

如果您绝对确定用户的机器将具有正确显示这些字符所需的字体（例如，对于 Windows 上的对话框，您绝对应该能够依赖它），那么，继续前进！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-04-27T16:20:20.933

为了完全安全，我会避免在源代码文件中使用 Unicode 字符，例如在硬编码字符串中使用它们。相反，我会坚持使用 ASCII 或系统代码页。原因是某些源代码管理系统可能不支持 Unicode。

例如，Tortise SVN 曾经不正确地处理了一个 Unicode 源代码文件，并最终在提交时永久损坏该文件，无法修复，直到下一次检索它进行编辑时才检测到该文件。我认为当系统尝试将新 Unicode 文件中的更改合并到最初提交的非 Unicode 文件中时，就会出现问题。无论如何，我不得不完全重写代码，因为修改的方式使得原始信息无法恢复。我不知道它为什么会发生，或者现在发生的可能性有多大，但我之所以提到它，是因为我经历过。

如果您确实避免在源代码文件中使用 Unicode，那么您可以将 Unicode 字符串存储在嵌入式资源、具有适当 BOM 的外部编码文件或数据库中。

# c# - 获取代码文件版本差异，显示受影响的方法（名称）

> ID：905438
> 
> 赞同：3
> 
> 时间：2009-05-25T05:26:40.430
> 
> 标签：c#, java, diff, methods, abstract-syntax-tree

我想获得两个版本的代码文件（Java/C#）之间的差异 - 并从中获得受影响的方法（名称）列表。这是否已实施？

我认为这需要对从差异返回的行进行 AST 分析。

这样做的目的是改进 checkstyle/findbugs 以仅处理 Sprint 期间触及的方法。

我查看了 eclipse 的 diff 过程：

[http://dev.eclipse.org/viewsvn/index.cgi/org.eclipse.compare.tests/src/org/eclipse/compare/tests/](http://dev.eclipse.org/viewsvn/index.cgi/org.eclipse.compare.tests/src/org/eclipse/compare/tests/)

看起来它只适用于行号 - 而不是实际的 AST。我对 line#=>methodName 映射感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-25T07:03:38.697

我不知道这是否会/可以帮助您，但是 Eclipse 中的 diff/compare 在它的顶部面板中执行此操作（下面是并排的两个文件/版本）。图形，是的，但也许那里有一个 API 供“公共”使用？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-25T09:28:34.737

您可以使用 eclipse 的比较 api，即使不使用 eclipse 本身。搜索**org.eclipse.compare**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-17T10:22:39.617

不知道它是否在其他地方实施。

但是你是对的，你需要一个 AST，只是为了确定方法体是什么，但你还需要名称和类型解析 + 调用图来确定两个名为 SAM 的方法是否实际上在同一个类中，因此是“版本”彼此的。

我们的 DMS Software Reengineering Toolkit 具有 Java 解析器并构造名称/类型解析和完整的调用图，因此可用于确定“方法匹配”。（当然，您可能会作弊并决定如果方法名称相同，则它们必须是变体，但是您会在 Get 和 Set 等方面得到很多误报，如果您经常这样做，那些误报会非常分散注意力）。确定了哪些“匹配”后，可以显示它们的文本。如果有很多 API 文件要比较，这将很有用。

另一种方法是将 SD 的“Smart Diff”应用于您知道是原始版本和更改版本的 Java 文件对。它比较 AST 并找到将一个映射到另一个的最小编辑。如果旧方法和新方法完全相似，它会发现并告诉您如何编辑一种方法以获得另一种方法。请参阅[http://www.semdesigns.com/Products/SmartDifferencer/index.html](http://www.semdesigns.com/Products/SmartDifferencer/index.html)

# c# - 如何防止 ListBox.SelectedIndexChanged 事件？

> ID：905447
> 
> 赞同：21
> 
> 时间：2009-05-25T05:33:01.797
> 
> 标签：c#, .net, winforms

我在我的 C#2.0 windows 窗体应用程序中使用了一个列表框。填充列表框的方法是

```
 private void PopulateListBox(ListBox lb, ReportColumnList reportColumnList)
    {
        lb.DataSource = reportColumnList.ReportColumns;
        lb.DisplayMember = "ColumnName";
        lb.ValueMember = "ColumnName";
    } 
```

但是，当它执行该方法时，它也会调用列表框的 SelectedIndexChanged 事件处理程序，即使我没有在上面的方法中设置选定的索引。如何防止为上述代码调用 SelectedIndexChanged 事件处理程序？

我希望仅当用户在 ListBox 中进行选择时才调用该事件。或者是否有任何其他事件仅用于用户使用鼠标单击选择列表框项目？

另一方面，即使用户单击列表框中的空白区域，SelectedIndexChanged 事件也会被触发。所以我想知道它与 MouseClick 事件有什么不同？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-05-25T05:53:25.493

您可以通过三种方式解决此问题。

A) 在调用此方法之前，不要挂钩 SelectedIndexChanged 事件。

B）在您的类中有一个私有布尔值，该值最初设置为 true。在 PopulateListBox 方法开始时，将其设置为 false，最后将其设置回 true。在 SelectedIndexChanged 的​​事件处理程序中，如果标志为 false，则返回并且什么也不做。

C) 在您的 PopulateListBox 方法开始时，从事件中取消挂钩 (this.listbox1.SelectedIndexChanged -= myMethod;)，然后在方法完成之前，重新挂钩到该事件。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2009-05-25T07:03:33.750

您可以使用 lb.Items.AddRange() 填充列表框，而不是设置数据源。除了不触发 SelectedIndexChanged 之外，这也不会预先选择第一项。

```
 lb.Items.Clear();
 lb.Items.AddRange(reportColumnList.ReportColumns.ToArray()); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2011-02-12T19:48:43.307

这个问题有一个最简单的答案：下面的代码片段可以建议解决方法。

```
lstBxState.SelectionMode = SelectionMode.None;
lstBxState.DataSource = lstStates;
lstBxState.ValueMember = "StateId";
lstBxState.DisplayMember = "StateName";
lstBxState.ClearSelected();
lstBxState.SelectionMode = SelectionMode.One; 
```

这意味着，只需将选择模式设为“无”，并愉快地对控件进行数据绑定。然后继续将模式更改为所需的模式（这里我已将其更改为 One，您也可以选择 Multiple）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-25T06:18:15.297

您应该知道，即使您不处理该事件，在分配 DataSource 属性时仍会自动选择列表中的第一项。为了强制用户进行选择，您需要取消选择自动选择的项目。

如果您的 SelectedIndexChanged 事件处理程序在选择项目时触发某些功能，您可能仍希望阻止执行此操作。一种方法是跟踪代码当前是否正在填充列表框。如果在填充列表框时触发 SelectedIndexChanged 事件，您可以避免执行这些操作：

```
private bool _populating = false;
private void PopulateListBox(ListBox lb, ReportColumnList reportColumnList)
{
    _populating = true;
    lb.DataSource = reportColumnList.ReportColumns;
    lb.DisplayMember = "ColumnName";
    lb.ValueMember = "ColumnName";

    // clear the automatically made selection
    lb.SelectedIndex = -1;
    _populating = false;
}

private void ListBox_SelectedIndexChanged(object sender, EventArgs e)
{
    if (!_populating)
    {
        // perform the action associated with selecting an item
    }

} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-10T15:01:32.113

在`SelectedIndexChanged`方法内部，只需插入一个 if 语句，如果`SelectedIndex == -1`什么都不做，在这个方法中做任何你想做的事情，可能不是最有效的代码，但对我有用:)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-01T18:08:03.780

我的情况可能很独特，但我会在这里发布以防万一它对某人有所帮助。

我这样做是`Items.AddRange`为了填充我的 ListBox 而不是绑定。我不知道为什么，但是在 PostBack 上，SelectedIndex 从 -1 变为 0。这可能是因为我的 ListBox 是`SelectionMode="Single"`.

我的解决方法是在填充后手动将 SelectedIndex 设置为 0 而不是 -1：

```
listBox.Items.AddRange(items);
listBox.SelectedIndex = 0; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-11T04:12:47.060

```
private void PopulateListBox(ListBox lb, ReportColumnList reportColumnList)
{

    lb.SelectedIndexChanged -= this.*MethodnamewhichhandlesthisEvent*;  //unset eventhandler

    lb.DataSource = reportColumnList.ReportColumns;
    lb.DisplayMember = "ColumnName";
    lb.ValueMember = "ColumnName";

    lb.SelectedIndexChanged += this.*MethodnamewhichhandlesthisEvent*;  //set the eventhandler
} 
```

基本上从事件中删除委托，然后在完成后添加。

# .net - .NET 中的反射有什么用？

> ID：905450
> 
> 赞同：9
> 
> 时间：2009-05-25T05:34:39.733
> 
> 标签：.net, reflection

> **可能的重复：**
> [你什么时候使用反射？模式/反模式](https://stackoverflow.com/questions/429962/when-do-you-use-reflection-patterns-anti-patterns)
> [反射到底是什么，什么时候它是一个好方法？](https://stackoverflow.com/questions/864332/what-exactly-is-reflection-and-when-is-it-a-good-approach)

.NET 中的反射需要什么？它在什么情况下派上用场？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-25T05:42:08.070

假设您正在编写一个基本的序列化例程，它将将任何对象序列化为 XML。你如何使它足够通用，以便它可以适用于任何对象？如果您有一个知道所有属性的类，那么您可以轻松编写一个“ToXml()”函数，在其中手动将所有属性写出到 XML。如果您想将此扩展到任何对象怎么办？在这种情况下，您需要在运行时反映属性，并将它们写入 XML。

它还有很多用途，这是第一个想到的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-25T05:46:10.573

反射有很多用途。.NET 框架使用它进行[序列化](http://msdn.microsoft.com/en-us/magazine/cc301761.aspx)和[数据绑定](http://davidhayden.com/blog/dave/archive/2006/03/07/2876.aspx)，它还可以用于创建检查您的代码的工具，如 Reflector、FxCop 和 NUnit 以及 ORM 数据库框架。它在运行时具有广泛的用途，从将有关对象的特定内容记录到[依赖注入框架](http://www.hanselman.com/blog/ListOfNETDependencyInjectionContainersIOC.aspx)。它还可用于在运行时动态执行方法或设置属性，就像使用自定义属性一样。它还可以用于更高级别的编程，例如[元编程](http://en.wikipedia.org/wiki/Metaprogramming)和自修改代码。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-25T05:39:56.450

我认为[关于反射的维基百科文章](http://en.wikipedia.org/wiki/Reflection_(computer_science))非常好：

> 在计算机科学中，反射是计算机程序可以观察和修改其自身结构和行为的过程。由反射驱动的编程范式称为反射式编程。它是一种特殊的元编程。
> 
> 在许多计算机体系结构中，程序指令被存储为数据——因此指令和数据之间的区别仅仅是计算机和编程语言如何处理信息的问题。通常，“指令”被“执行”，“数据”被“处理”；但是，在某些语言中，程序也可以将指令视为数据，因此可以进行反射修改。反射最常用于高级虚拟机编程语言，如 Smalltalk 和脚本语言，而较少用于明显类型和/或静态类型的编程语言，如 Java 和 C。

反射允许您在执行时获取有关对象类型的信息。这在许多情况下都有帮助，包括（但限于）序列化和对象关系映射。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-25T05:46:54.847

它用于元编程，即当您编写代码本身而不是通常的业务问题时

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-25T07:10:13.253

它在测试应用程序时也非常有用，例如单元测试或其他类型的测试框架。例如，通过使用反射，您可以创建一个 xml 文件（或其他合适格式的输入数据文件）并让您的程序对其进行分析并调用文件中定义的方法。这就是[Fitnesse](http://fitnesse.org/)的工作方式。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-25T05:41:14.403

当您在编译时不知道您的对象是什么时候或要执行什么操作或在什么属性上时，使用反射...

您可以使用反射在给定的程序集中查找所有类型 X 的对象，或者通过它的名称调用某个方法（从数据库或配置文件中获取......），设置属性也是如此......类似的事情（这些是我们使用它的情况）

# c - 如何使 C 程序负载存储密集？

> ID：905469
> 
> 赞同：2
> 
> 时间：2009-05-25T05:44:03.200
> 
> 标签：c

如何使程序集中加载存储，以便有最大的内存引用和可忽略的计算（甚至没有循环开销！）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-25T06:02:09.753

在此代码上`gcc`使用：`-funroll-loops`

```
int main (int argc, char** argv) {
    int a = 5;
    int b = 10;
    int c;
    int i;

    while (1) {
        for (i = 0; i <= 2147483647; i++) {
            c = b;
            b = a;
            a = c;
        }
    }

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-25T06:00:52.860

使用具有大量分散读取/写入的巨大数组来最大化缓存未命中。如果您的目标是编写一个只锻炼记忆的程序 - 将随机值写入随机选择的索引处的数组中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-25T05:55:17.953

使用大量`volatile`存储在内存中的变量，但我不确定这是否能回答您的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-25T06:04:09.297

在程序的可能输入和可能的输出之间制作映射。

但是，需要通过另一个程序或手动来计算输入以产生输出。

# linux - 在哪里可以找到有关编写 MAKEFILE 的教程？

> ID：905478
> 
> 赞同：3
> 
> 时间：2009-05-25T05:48:00.790
> 
> 标签：linux, makefile

我需要写一些 MAKEFILE，但对它们一无所知。有人会发布一些关于如何创建这些精彩文件的教程的链接吗？我想从一开始就学习 MAKEFILE 的基础知识......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-25T05:51:45.540

[http://www.google.com/search?q=makefile+tutorial](http://www.google.com/search?q=makefile+tutorial)

[http://www.gnu.org/software/make/manual/make.html](http://www.gnu.org/software/make/manual/make.html)

[http://mrbook.org/blog/tutorials/make/](http://mrbook.org/blog/tutorials/make/)

[http://www.opussoftware.com/tutorial/TutMakefile.htm](http://www.opussoftware.com/tutorial/TutMakefile.htm)

[http://www.cs.indiana.edu/classes/c304/Makefiles.html](http://www.cs.indiana.edu/classes/c304/Makefiles.html)

[http://www.cs.duke.edu/~ola/courses/programming/Makefiles/Makefiles.html](http://www.cs.duke.edu/~ola/courses/programming/Makefiles/Makefiles.html)

[http://www.cs.umd.edu/class/spring2002/cmsc214/Tutorial/makefile.html](http://www.cs.umd.edu/class/spring2002/cmsc214/Tutorial/makefile.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-25T05:58:29.837

[比起在线教程（这里](http://oreilly.com/catalog/9780596006105/)），我更喜欢死树变体。似乎（无论如何对我来说）这些书更加精美，在被释放之前已经经历了无数次编辑周期。

大多数在线教程似乎都是由一群醉醺醺的狐猴串起来的。

![替代文字](https://covers.oreilly.com/images/9780596006105/cat.gif)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-25T13:05:35.360

不完全是初学者的 HowTo，但您可能想在开始感到舒适后不久阅读[Recursive Make Considered Harmful 。](http://miller.emu.id.au/pmiller/books/rmch/)

# c++ - std::string length() 和 size() 成员函数

> ID：905479
> 
> 赞同：312
> 
> 时间：2009-05-25T05:49:55.543
> 
> 标签：c++, string, stl, size

我正在阅读这个[问题](https://stackoverflow.com/questions/905355/c-string-length)的答案，发现实际上有一种方法`length()`需要`std::string`（我一直使用`size()`）。`std::string`在课堂上使用这种方法有什么具体原因吗？`size()`我阅读了 MSDN 和 CppReference，它们似乎表明和之间没有区别`length()`。如果是这样，是不是让班级的用户更加困惑？

* * *

## 回答 #1

> 赞同：410
> 
> 时间：2009-05-25T05:53:04.853

根据[文档](http://en.cppreference.com/w/cpp/string/basic_string)，这些只是同义词。 `size()`是否与其他 STL 容器（如`vector`、`map`等）保持一致，并与大多数人对字符串的直观概念保持一致*。*`length()`人们通常谈论一个单词、句子或段落的*长度*，而不是它的大小，这样`length()`是为了让事情更具可读性。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2009-05-25T06:11:48.550

顺便说一句，Ruby 也是一样的，它同时提供`#length` *和* `#size`作为数组和散列中项目数的同义词（C++ 仅对字符串这样做）。

极简主义者和相信“应该有一种，理想情况下只有一种明显的方式来做到这一点”的人（正如 Python 之禅所背诵的那样），我猜，大多数人会同意你的疑问，@Naveen，而 Perl 的“粉丝”有不止一种方法可以做到这一点”（或者 SQL 的语法带有大量可选的“干扰词”，给出了无数相同的语法形式来表达一个概念）无疑会抱怨 Ruby，尤其是 C++，只是不要走得太远提供这样的同义词冗余就足够了；-)。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2019-10-14T09:15:10.507

使用编码练习工具（LeetCode）时，似乎 size() 比 length() 快（虽然基本上可以忽略不计）

* * *

## 回答 #4

> 赞同：-16
> 
> 时间：2017-04-05T02:13:20.653

字符串长度==字符串具有多少位，大小==这些位的大小，如果编辑器分配的字符大小为1字节，则在字符串中两者都是相同的

# domain-driven-design - 执着无知有什么好处？

> ID：905498
> 
> 赞同：41
> 
> 时间：2009-05-25T05:58:07.887
> 
> 标签：domain-driven-design, persistence-ignorance

我是 DDD+TDD 世界的新手。但我从事编程工作将近 9 年了。

有人可以解释一下坚持无知的好处吗？典型的 nHibernate 应用程序只是将类和数据库之间的依赖关系推送到映射文件。

如果我更改类文件或数据库，我必须更改映射文件。那么它不只是通过添加一个抽象层来推动依赖吗？在我看来，到目前为止，我不认为这是革命性的。但我不确定我是否遗漏了什么。

最后如何测试映射文件？映射文件中可能会出现错误，我该如何测试它们？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2009-05-25T09:49:03.447

让我用一个例子来解释这一点。假设您正在使用经典的 SQL 方法实现应用程序。您打开记录集、更改数据并提交它。

伪代码：

```
trx = connection.CreateTransaction();
query = connection.CreateQuery("Select * from Employee where id = empid");
resultset = query.Run();
resultset.SetValue("Address_Street", "Bahnhofstrasse");
resultset.SetValue("Address_City", "Zürich");
trx.Commit(); 
```

使用 NHibernate，它看起来像这样：

```
emp = session.Get<Employee>(empid);

// persistence ignorant 'logic'
emp.Address.Street = "Bahnhofstrasse";
emp.Address.City = "Zürich";

session.Commit(); 
```

**持久性无知意味着业务逻辑本身不知道持久性。**或者换句话说，持久性与逻辑是分开的。这使得它更加可重用。

将“逻辑”移动到可重用的方法：

```
void MoveToZuerichBahnhofstrasse(Employee emp)
{
  // doesn't have anything to do with persistence
  emp.Address.Street = "Bahnhofstrasse";
  emp.Address.City = "Zürich";
} 
```

尝试使用结果集编写这样的方法，您就会知道什么是持久性无知。

如果你不相信，看看单元测试有多简单，因为与持久性相关的东西没有任何依赖关系：

```
Employee emp = new Employee();
MovingService.MoveToZuerichBahnhofstreasse(emp);
Assert.AreEqual("Bahnhofstrasse", emp.Address.Street);
Assert.AreEqual("Zürich", emp.Address.City); 
```

* * *

DDD 是不同的东西。在那里你首先建立你的领域模型（类模型）并根据它创建数据库设计。使用 NH，这非常简单，因为 - 由于对持久性的无知 - 您可以在拥有（确定的）数据库模型之前编写和单元测试模型和逻辑。

* * *

测试：我们通过创建实体实例、将其存储到数据库、取回并进行比较来测试映射。这是通过大量反射自动完成的。但你不需要走那么远。尝试存储实体时会出现大多数典型错误。

你可以对查询做同样的事情。复杂的查询值得测试。如果查询完全被编译，那将是最有趣的。您甚至不需要任何数据。

对于数据库集成测试，我们使用[Sqlite](http://sqlite.phxsoftware.com/)。这是相当快的。NH 使用 SchemaExport 动态生成内存数据库（在每次测试之前）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-25T07:22:57.067

我一直在考虑域，虽然我过去使用过存储过程，ADO.NET，但只有当我最终转向 NHibernate 时，我才对我的持久性机制感到满意。

领域驱动设计 (DDD) 将重点直接放在领域模型上。这意味着主要重点是创建一个概念模型，为用户和程序员形成一种通用语言。用户几乎从不对您如何保存他们的信息感兴趣。NHibernate 通过使持久性成为捕获业务规则和了解用户真正想要从系统中得到什么的次要问题来帮助您实现这种心态。

[Fluent NHibernate](http://fluentnhibernate.org/)减少了对域模型的更改对底层映射文件的影响。它还具有[自动映射功能](http://wiki.fluentnhibernate.org/show/AutoMapping)。虽然您永远不能完全忽略系统的持久性，但 NHibernate 与 Fluent NHibernate 允许您专注于域模型。如果您不专注于使用丰富的域模型，那么 NHibernate 几乎没有什么好处。

至于测试您的映射，无论您使用什么方法来实现持久性，您都将编写测试（或者您应该编写测试）。这不是因为您使用 NHibernate 而出现的额外工作。只需将测试您的映射视为测试您的持久性是否正常工作。

再次对于这个[Fluent NHibernate](http://fluentnhibernate.org/)来说是无价的。它有一个[持久性规范测试](http://fluentnhibernate.wikia.com/wiki/Persistence_specification_testing)，在大多数情况下使用起来非常简单。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-25T07:21:30.437

PI 不是关于使用 NHibernate。PI 代表忽略数据将如何存储开发领域模型。是的，它通过添加一个抽象层来推动依赖。DDD 不是革命性的——它更像是一种想法，一种如何使用已经熟悉的模式（大多数都是）进行编码的方法。即 - 工厂模式或模块模式也不是新的，但它是 DDD 的重要组成部分。

我最近也开始使用 NHibernate，所以 - 不能提供太多关于它的细节。但是我得到了一个可能对您有用的提示 -如果您还没有这样做，请尝试[Fluent NHibernate 。](http://fluentnhibernate.org)

# windows - 在批处理文件中删除目录树的最快方法

> ID：905500
> 
> 赞同：18
> 
> 时间：2009-05-25T05:58:24.033
> 
> 标签：windows, batch-file, file-io

我需要编写一个批处理文件，该文件接收一个包含大量空子目录的目录并将它们全部删除。

最快的方法是什么？（快速我的意思是不像 Windows 资源管理器在您尝试删除此类目录时所做的那样......）

**澄清：**

我不想*只*删除空目录。碰巧我要删除的这个目录主要是空的子目录。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2009-05-25T06:00:32.407

```
rd yourdirname /s/q 
```

无论他们是否为空，都会完成这项工作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-25T06:03:59.187

我不确定我是否理解了这个问题。如果您只想删除树，那么您可以使用`rd /s`. 但是，如果您只想删除*空*目录，则可以使用 Cygwin 执行以下操作。

```
find -type d -empty | xargs rmdir 
```

我工作的标准 IT 版本安装了 Cygwin，而且我不止一次使用过它。

# iphone - 使用进度条加载新视图

> ID：905504
> 
> 赞同：0
> 
> 时间：2009-05-25T05:59:10.303
> 
> 标签：iphone, view, progress-bar, android-activity

在我的应用程序中，我的一个视图的加载时间比正常情况要长（它是一个包含许多图片的滚动视图），所以我想我会让用户知道在加载视图时发生了什么。所以我放了一个进度条，它使用计时器来显示通常需要多长时间加载。唯一的问题是，当按钮被触摸时，iPhone 仍会加载视图，然后当新视图打开时，会出现进度条并启动计时器。如何设置它，以便进度条将显示在与按钮相同的视图上，并且当按下按钮时加载第二个视图，当进度条填满时，它会转到第二个视图。这是我到目前为止的代码。

```
- （无效）按钮
{{

`if (!self.baseSheet) {
    baseSheet = [[UIActionSheet alloc] 
                 initWithTitle:@"Please Wait" 
                 delegate:self 
                 cancelButtonTitle:nil 
                 destructiveButtonTitle: nil
                 otherButtonTitles: nil];
    [baseSheet setNumberOfRows:5];
    [baseSheet setMessage:@"Loading Photos"];

    UIProgressView *progbar = [[UIProgressView alloc] initWithFrame:CGRectMake(50.0f, 70.0f, 220.0f, 90.0f)];
    progbar.tag = PROGRESS_BAR;
    [progbar setProgressViewStyle: UIProgressViewStyleDefault];
    [baseSheet addSubview:progbar];
    [progbar release];
}

UIProgressView *progbar = (UIProgressView *)[self.view viewWithTag:PROGRESS_BAR];
[progbar setProgress:(amountDone = 0.0f)];
[NSTimer scheduledTimerWithTimeInterval: 0.5 target: self selector: @selector(incrementBar:) userInfo: nil repeats: YES];
[baseSheet showInView:self.view];

[[self navigationController] pushViewController:[[ScrollViewController alloc] init]
                                       animated:YES];` 

} }

            回答 #1

赞同：0

时间：2009-05-25T06:49:20.393

您是否尝试过将进度条例程放入一个完全独立的方法中？

有时我也会遇到方法中某些例程的执行速度问题——尤其是与 UIView/UIImageView 相关的更改。*有时，某些与视图相关的例程的更改实际上在屏幕上的更新速度比在*它们实际发生之前执行的内容要快。我发现我通常可以通过将显示视图更改太晚的例程放入一个完全独立的方法中并在 BEFORE 调用该方法来纠正此问题。

        c# - 检查word模板文件

ID：905505

赞同：1

时间：2009-05-25T05:59:40.210

标签：c#, .net, ms-word

如何检查 word 模板文件。可以使用扩展名 .dot 或 .dotx 进行检查。但如果用户将 .txt 更改为 .dot。怎么识别的？？

            回答 #1

赞同：1

时间：2009-05-25T06:25:41.867

要检查 dotx 文件（实际上是一个 zip 文件），请检查标题：

```
0000000: 504b 0304 1400 0000 0800 95a1 3435 4a07  PK..........45J. 
```

前四个字节是 0x050 0x4b 0x03 0x04。这将证明文件是否为 zip 文件（因此不一定是 dotx），如果您想进一步检查，则需要解压缩整个缓冲区并解析生成的 XML。

要检查点文件（2007 年之前），请检查标题：

```
0000000: d0cf 11e0 a1b1 1ae1 0000 0000 0000 0000  ................ 
```

前八个字节 0xd0 0xcf 0x11 0xe0 0xa1 0xb1 0x1a 0xe1

因此，对于这两种情况，以二进制模式打开文件，读取前 8 个字节并进行比较。  

            回答 #2

赞同：1

时间：2009-05-25T07:02:45.327

根据[http://www.garykessler.net/library/file_sigs.html](http://www.garykessler.net/library/file_sigs.html)，点文件（以及其他）的完整签名是：

D0 CF 11 E0 A1 B1 1A E1

所以，下面是一些开始的代码。它适用于.dot，但如果你想检查.dotx，你可以实现类似的代码。这并不能绝对保证它是一个有效的点，因此您仍然需要稍后合理地处理错误。

```
// Use this as a class field.
private static readonly byte[] DOT_SIGNATURE = new byte[]{0xD0, 0xCF, 0x11, 0xE0, 0xA1, 0xB1, 0x1A, 0xE1}; 
```

稍后，当您实际拥有 Stream 时：

```
bool isDot = true;

Stream dotStream = ...
byte[] firstBytes = new byte[DOT_SIGNATURE.Length];
int totalRead = 0, curRead;

while(totalRead < DOT_SIGNATURE.Length)
{
    curRead = dotStream.Read(firstBytes, totalRead, DOT_SIGNATURE.Length - totalRead);
    if(curRead == 0)
    {
            isDot = false;                
            break; // Premature end of stream;
    }

    totalRead += curRead;
}

if(isDot)
{
    for(int i = 0; isDot && i < DOT_SIGNATURE.Length; i++)
    {
            // If isDot becomes false, arrays are not equal and we break out.
            isDot = (firstBytes[i] == DOT_SIGNATURE[i]);
    }
}

dotStream.Seek(0, SeekOrigin.Begin); 
```

            回答 #3

赞同：0

时间：2009-05-25T06:09:41.613

检查文件签名，.dot 文件应该以 D0 CF 开头.....

            回答 #4

赞同：0

时间：2009-05-25T06:11:31.110

.dotx 文件只是一个 ZIP 文件，因此您可以检查它是否以“PK”（zip 标头）开头，然后您需要完全解压缩文件并检查内容是否为有效的 Word 模板。

        c++ - 如何在obj c / cocoa中将数字四舍五入以50结尾

ID：905508

赞同：2

时间：2009-05-25T05:59:55.530

标签：c++, objective-c, cocoa

如何在 obj c 或 c++ / cocoa 中舍入一个数字以 50 结尾？

我正在编写一个税收程序，对于最终查找，我必须在应用税率之前将收入四舍五入以 50 结尾。

我能想到的唯一选择是字符串修改，但在那个区域我很不稳定，]。

            回答 #1

赞同：5

时间：2009-05-25T06:03:17.270

目前还不清楚您是想要最近的 50 美元还是 50 美分，所以两者都有：

要使整数变为 50 的倍数，您需要以下公式：

```
x = int(x / 50) * 50               ; for truncation.
x = int((x + 25) / 50) * 50        ; for rounding. 
```

要使浮点数达到 0.50 的倍数，您需要以下公式：

```
x = 0.5 * int(x / 0.5)             ; for truncation.
x = 0.5 * int((x + 0.25) / 0.5)    ; for rounding. 
```

**更新：**

如果您只想将最后两位数更改为 50，只需执行以下操作之一：

```
x = x - (x % 100) + 50
x = 50 + 100 * int (x / 100) 
```

            回答 #2

赞同：2

时间：2009-05-25T06:05:57.827

```
x-=x%50; /*for truncating*/ 
```

            回答 #3

赞同：0

时间：2009-05-25T07:42:25.997

给一个人一条鱼，他就有一天的食物。

您想知道的是一个数字中有多少个 50 的“块”。这可以通过浮点除法来实现。

```
const double chunksize = 50.;
const double chunks=income/chunksize; 
```

然后，显然，通过四舍五入、截断、......

```
const int i_chunks = ceil( chunks ); 
```

最后，您希望将块数缩放回原始货币：

```
const double chunked_income = i_chunks*chunksize; 
```

        build-automation - 通过命令行构建 Visual Studio 部署项目 (.vdproj)

ID：905515

赞同：6

时间：2009-05-25T06:01:51.297

标签：build-automation, deployment-project

我有一个部署项目 deployment.vdproj，我已将 project.csproj 的项目输出添加到其中。我想通过命令行构建 deployment.vdproj。但是在这样做的同时，我需要为 project.csproj 指定一个属性 (/p:)。我该怎么做？

我使用 devenv.com 构建了 deployment.vdproj，但我不知道如何传递 project.csproj 的属性

我使用的命令行是：

```
 devenv.exe /build Debug deployment.vdproj 
```

这工作正常。但我也想指定 project.csproj 的输出路径。类似于 /p:OutputPath="C:\output"。是否可以在构建 deployment.vdproj 时控制 project.csproj 的属性？如果是这样，我该怎么做？

            回答 #1

赞同：2

时间：2009-05-25T06:05:29.483

csproj 已经包含输出路径，所以我认为您不能使用命令行参数进行修改。我想唯一的方法是使用正则表达式修改 csproj 说命令行 perl -i .... *.csproj 然后运行 ​​MSBuild 并再次恢复 csproj 中的更改。

        php - 带有城市/州或邮编的谷歌地图搜索

ID：905530

赞同：0

时间：2009-05-25T06:06:17.670

标签：php, api, google-maps

我想在“X”距离内使用城市/州或 Zip 进行搜索。相应的结果将在谷歌地图中查看。

            回答 #1

赞同：2

时间：2009-05-25T09:43:05.380

查看[使用 PHP、MySQL 和 Google 地图创建商店定位器一](http://code.google.com/apis/maps/articles/phpsqlsearch.html)文。

本教程适用于熟悉 PHP/MySQL 并希望了解如何将 Google 地图与 MySQL 数据库一起使用来创建商店定位器类型的应用程序的开发人员。完成本教程后，您将拥有一个位置数据库和一个网页，允许用户输入他们的地址并在地图上查看距离他们最近的位置的标记，在选定的距离限制内。

            回答 #2

赞同：1

时间：2009-05-25T06:13:35.070

Google Maps 丰富的 API 在从[http://code.google.com/apis/maps/](http://code.google.com/apis/maps/)开始的链接中得到了详尽的记录。

        iphone - 如何在plist中写入数据？

ID：905542

赞同：16

时间：2009-05-25T06:13:17.067

标签：iphone, objective-c, cocoa

我在资源文件夹中创建了 save.plist。我直接在其中写入了一些数据（不使用编码）。我能够读取该数据，但无法将代码写入同一个 save.plist。通过使用以下代码，我试图写入数据，但它存储在我的 .app plist 中。代码在这里

```
NSString *errorDesc = nil;

NSPropertyListFormat format;

NSString *plistPath = [[NSBundle mainBundle] pathForResource:@"save" ofType:@"plist"];

NSData *plistXML = [[NSFileManager defaultManager] contentsAtPath:plistPath];

NSMutableDictionary *temp = (NSMutableDictionary *)[NSPropertyListSerialization
                     propertyListFromData:plistXML
                              mutabilityOption:NSPropertyListMutableContainersAndLeaves
                  format:&format errorDescription:&errorDesc];

if (!temp) {

    NSLog(errorDesc);

    [errorDesc release];        
    }
    //  [temp setValue:@"123" forKey:@"line1"];
    //  [temp writeToFile:plistPath atomically: YES];

    //Reading data from save.plist
    NSLog([temp objectForKey:@"name"]);
    NSLog([temp objectForKey:@"wish"]);
    NSNumber *num=[temp valueForKey:@"roll"];
    int i=[num intValue];
    printf("%d",i);
        //writitng the data in save.plist

    [temp setValue:@"green" forKey:@"color"];
    [temp writeToFile:plistPath atomically: NO];
    NSMutableDictionary *temp1 = (NSMutableDictionary *)[NSPropertyListSerialization
                propertyListFromData:plistXML                                                            
                                mutabilityOption:NSPropertyListMutableContainersAndLeaves
                format:&format errorDescription:&errorDesc];

    NSLog([temp objectForKey:@"color"]); 
```

我想要那个，我想写的数据应该被写入 save.plist 只存储在引用中。我对这个概念很陌生。所以如果有人知道，请帮助我。提前致谢。:-)

            回答 #1

赞同：26

时间：2009-05-25T06:36:21.287

我不知道我是否理解你的问题，但如果你想在你的 .app 包中写入一个 .plist ，你可能做错了什么。如果要存储首选项，则应考虑使用[NSUserDefaults](http://developer.apple.com/DOCUMENTATION/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html)。

如果您真的想修改捆绑的 .plist - 这是一些代码：

```
NSString *plistPath = nil;
NSFileManager *manager = [NSFileManager defaultManager];
if (plistPath = [[[NSBundle mainBundle] bundlePath] stringByAppendingPathComponent:@"Contents/Info.plist"]) 
{
    if ([manager isWritableFileAtPath:plistPath]) 
    {
        NSMutableDictionary *infoDict = [NSMutableDictionary dictionaryWithContentsOfFile:plistPath];
        [infoDict setObject:[NSNumber numberWithBool:hidden] forKey:@"LSUIElement"];
        [infoDict writeToFile:plistPath atomically:NO];
        [manager changeFileAttributes:[NSDictionary dictionaryWithObject:[NSDate date] forKey:NSFileModificationDate] atPath: [[NSBundle mainBundle] bundlePath]];
    }
} 
```

**更新：**

Nate Flink 指出上面使用的一些 NSFileManager 方法已被弃用。他用以下替换方法发布了答案：
 [https ://stackoverflow.com/a/12428472/100848](https://stackoverflow.com/a/12428472/100848)

            回答 #2

赞同：9

时间：2012-09-14T16:27:58.897

weichsel 的原始真棒示例的更新版本（谢谢！）。Xcode 抛出了几个警告，其中一个是 NSFileManager 上不推荐使用的方法。此处使用 iOS 5.1 中未弃用的方法进行了更新

```
 NSString *plistPath = nil;
NSFileManager *manager = [NSFileManager defaultManager];
if ((plistPath = [[[NSBundle mainBundle] bundlePath] stringByAppendingPathComponent:@"mySpecial/PathTo.plist"])) 
{
    if ([manager isWritableFileAtPath:plistPath]) 
    {
        NSMutableDictionary *infoDict = [NSMutableDictionary dictionaryWithContentsOfFile:plistPath];
        [infoDict setObject:@"foo object" forKey:@"fookey"];
        [infoDict writeToFile:plistPath atomically:NO];
        [manager setAttributes:[NSDictionary dictionaryWithObject:[NSDate date] forKey:NSFileModificationDate] ofItemAtPath:[[NSBundle mainBundle] bundlePath] error:nil];
    }
} 
```

            回答 #3

赞同：4

时间：2009-05-25T08:44:18.133

当您构建应用程序时，它将创建一个可执行文件“appName.app”，并且所有文件都构建在包中。因此，当应用程序运行时，您无法访问资源文件夹，因为所有数据都在包中（而不是文件夹中）。

但是，您可以访问包含应用程序一些信息的临时文件夹。您可以在此处找到临时文件夹： 
**打开 finder--单击您的用户名（在 PLACES 下）--Library--Application Support--iPhone Simulator--User--Applications--（在这里您可以找到您的所有临时文件夹iPhone 应用程序）**

您可以通过以下方式访问此临时文件夹：

```
 NSArray *path = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask,YES);
NSString *documentsDirectory = [paths objectAtIndex:0]; 
```

如果你命名你的文件 save.plist，你可以像这样访问它：

```
NSString *filePath = [documentsDirectory stringByAppendingString:@"_save.plist"];
```

然后，您只需将文件保存到此文件路径，它就会出现在名为“Documents_save.plist”的临时文件夹中。

*请注意，每次运行应用程序时临时文件夹的名称都会有所不同。

给你推荐一本书：《iPhone开发入门--探索iPhone SDK》。在第 11 章中，你可以找到你想要的。

            回答 #4

赞同：4

时间：2009-05-25T23:14:26.153

总结其他一些答案：

您的问题是您正在尝试将文件写回包含您的应用程序的文件夹中。该文件夹在运行时不可写。你所做的一切都很好，你只需要选择一个不同的位置来写入你的文件。

您可以使用 NSSearchPathForDirectoriesInDomains 函数为该数据找到更合适的文件夹。（例如@“Documents”文件夹。）

            回答 #5

赞同：1

时间：2011-04-01T15:23:55.313

试试这个：

```
-(void)add:(NSRunningApplication *) app { 
   if ([self contains:app]) return; 
   [self.apps addObject:app.localizedName]; 
   [self.apps writeToFile:self.dataFile atomically:YES];
} 
```

来自“可可编程”。

            回答 #6

赞同：0

时间：2011-01-06T11:01:50.597

你必须将你的 plist 复制到文档目录中......因为你不能保存任何东西而不保存到文档文件中......当你复制它时，它将允许在 plist 上写入/修改

        c# - Environment.Exit() 和 Application.Shutdown() 有什么区别？

ID：905544

赞同：26

时间：2009-05-25T06:13:48.173

标签：c#, .net

**[当我调用Application.Shutdown](http://msdn.microsoft.com/en-us/library/ms597013.aspx)**时，有时应用程序无法退出，UI 已关闭，但进程仍在运行。如何在关闭所有线程的情况下关闭应用程序？**[Environment.Exit](http://msdn.microsoft.com/en-us/library/system.environment.exit.aspx) ()**是否可以关闭所有线程？或者我们应该调用 Win32 API **TerminateThread**来做到这一点？

            回答 #1

赞同：23

时间：2009-05-25T06:29:14.497

[Environment.Exit()](http://msdn.microsoft.com/en-us/library/system.environment.exit.aspx)是关闭应用程序的更残酷的方式，是的。但总的来说，如果您需要杀死您的应用程序以使其关闭，那么我认为您以错误的方式看待问题。您应该研究为什么其他线程没有正常关闭。

您可以查看主窗体上的[FormClosing 事件](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.formclosing.aspx)并关闭挂起应用程序的所有资源，以防止其关闭。

这就是我找到挂起应用程序的资源的方式。

1.  在调试模式下，启用显示[线程](https://stackoverflow.com/questions/164600/how-can-i-see-my-applications-threads-while-debugging-in-visual-studio)。（这将允许您查看应用程序正在运行的所有线程。）
2.  以无法正确关闭的方式关闭应用程序。
3.  在 Visual Studio 中按暂停。
4.  查看线程列表，然后单击它们以查看它们挂起的代码在哪里。现在您可以看到哪些资源阻止您的应用程序关闭，请转到您的 FormClosing 事件并在那里关闭/处置它们。
5.  重复直到应用程序正确关闭:)

请注意，调试模式下的线程列表将显示一些正在运行但不受您控制的线程。这些线程很少有名称，当您单击它们时，您会收到一条消息，说您没有符号。这些可以安全地忽略。

确保您的应用程序正常关闭的原因之一是某些资源（例如[FileStream](http://msdn.microsoft.com/en-us/library/system.io.filestream.aspx)）没有完成工作，因此使用某些 API 强制它退出可能会导致各种“随机”问题出现，例如设置/data 文件没有被写入等等。

            回答 #2

赞同：9

时间：2009-05-25T06:33:31.730

1.  [你**永远不**应该调用 TerminateThread](https://web.archive.org/web/20071221023907/http://blogs.msdn.com/cbrumme/archive/2003/08/20/51504.aspx)
2.  确保您生成的所有线程都标记为后台，这样当您关闭应用程序时，它不会等待它们完成。

            回答 #3

赞同：4

时间：2009-05-25T07:10:20.727

正如 Shay 所说，永远不要调用 TerminateThread，TerminateThread 只会杀死一个线程而不让它自己清理，这可能会导致进程中其他线程的死锁和损坏。

另一方面， TerminateProcess 将杀死整个进程并让操作系统清理，这是关闭进程的最快方法 - 你只需要确保你没有持有操作系统无法清理的任何资源（它也有助于在调用 TerminateProcess 之前关闭窗口）。

我认为，但我没有检查过，Environemnt.Exit 调用 TerminateProcess。

Application.Shutdown 非常不同，它不会立即终止进程——它会发送所有关闭和关闭通知，并等待所有应用程序的窗口和线程自行关闭。

        asp.net-mvc - 如何使用从源代码而不是 GAC 构建的 ASP.NET MVC？

ID：905550

赞同：2

时间：2009-05-25T06:15:20.247

标签：asp.net-mvc

我已经在本地安装了 ASP.NET MVC，但我希望能够使用 CodePlex 上的 SVN 存储库中的代码，而不是发布的 1.0 版本。但是，如果我在我的解决方案中删除对 GAC 程序集的引用并添加对本地构建的引用`System.Web.Mvc`，它将构建良好，但在运行时它会说：

解析器错误消息：“System.Web.Mvc.ViewPage”类型不明确：它可能来自程序集“W:\source\projects\vinemedia\VineMedia.Site\bin\System.Web.Mvc.DLL”或程序集'C:\WINDOWS\assembly\GAC_MSIL\System.Web.Mvc\1.0.0.0__31bf3856ad364e35\System.Web.Mvc.dll'。请在类型名称中明确指定程序集。

            回答 #1

赞同：5

时间：2009-05-25T14:48:20.893

需要对 web.config 和 ~/Views/web.config 配置文件进行大量修改才能使用 ASP.NET MVC 源代码。您应该阅读这篇文章 - [Steve Sanderson 的博客 - 使用 ASP.NET MVC 源代码来调试您的应用程序](http://blog.codeville.net/2009/02/03/using-the-aspnet-mvc-source-code-to-debug-your-app/)

            回答 #2

赞同：-1

时间：2009-05-25T06:50:34.090

`<bindingRedirect>`您的 web.config 文件中的  A可能会解决此问题。[这篇文章](https://stackoverflow.com/questions/267693/how-can-i-force-net-to-use-a-local-copy-of-an-assembly-thats-in-the-gac)可能会有所帮助。

        theory - 是否有任何 O(1/n) 算法？

ID：905551

赞同：354

时间：2009-05-25T06:15:28.030

标签：theory, complexity-theory, big-o

是否有任何 O(1/n) 算法？

或者其他任何小于 O(1) 的东西？

            回答 #1

赞同：329

时间：2009-05-25T08:10:15.847

这个问题并不像在某些人看来那么愚蠢。至少在理论上，当我们采用[大 O 符号](http://en.wikipedia.org/wiki/Big_O_notation)的数学定义时，诸如*O* (1/ *n* ) 之类的东西是完全合理的：
![](https://i.stack.imgur.com/9ii3q.png)
*现在您可以轻松地将g* ( *x* )替换为 1/ *x* ……很明显，上述定义仍然适用于某些*f*。
出于估计渐近运行时增长的目的，这是不太可行的……有意义的算法不能随着输入的增长而变得更快。当然，您可以构建任意算法来实现这一点，例如以下算法：

```
def get_faster(list):
    how_long = (1 / len(list)) * 100000
    sleep(how_long) 
```

显然，随着输入大小的增加，这个函数花费的时间更少……至少直到某个限制，由硬件强制执行（数字的精度、`sleep`可以等待的最短时间、处理参数的时间等）：这个限制将是一个恒定的下限，所以实际上上面的函数*仍然*有运行时间*O* (1)。
但实际上有*一些*现实世界的算法，当输入大小增加时，运行时间会减少（至少部分减少）。请注意，这些算法*不会*表现出低于*O* (1) 的运行时行为。不过，它们很有趣。例如，以[Horspool](https://en.wikipedia.org/wiki/Boyer%E2%80%93Moore%E2%80%93Horspool_algorithm)的非常简单的文本搜索算法为例。在这里，预期的运行时间将随着搜索模式长度的增加而减少（但是增加干草堆的长度将再次增加运行时间）。

            回答 #2

赞同：155

时间：2009-06-11T17:40:02.927

是的。

恰好有一种运行时间为 O(1/n) 的算法，即“空”算法。

算法为 O(1/n) 意味着它以比由单个指令组成的算法更少的步骤渐近执行。如果对于所有 n > n0，它执行的步骤少于一个步骤，那么对于那些 n，它必须完全不包含任何指令。由于检查“如果 n > n0”至少需要 1 条指令，因此它必须不包含所有 n 的指令。

总结： O(1/n) 的唯一算法是空算法，*不*包含指令。

            回答 #3

赞同：25

时间：2009-05-25T07:01:49.947

sharptooth 是正确的，O(1) 是最好的性能。但是，它并不意味着快速的解决方案，只是一个固定时间的解决方案。  

一个有趣的变体，也许真正被建议的是，随着人口的增长，哪些问题会变*得更容易。*我能想到 1，虽然是做作和半开玩笑的答案：

一组中是否有两个人的生日相同？当 n 超过 365 时，返回 true。虽然小于 365，但这是 O(n ln n)。也许不是一个很好的答案，因为问题并没有慢慢变得更容易，而是在 n > 365 时变成 O(1)。

            回答 #4

赞同：23

时间：2009-05-25T06:21:23.840

那是不可能的。Big-O 的定义是*不大于*不等式：

```
A(n) = O(B(n))
<=>
exists constants C and n0, C > 0, n0 > 0 such that
for all n > n0, A(n) <= C * B(n) 
```

所以 B(n) 实际上是最大值，因此如果它随着 n 的增加而减小，估计不会改变。

            回答 #5

赞同：17

时间：2009-05-25T06:47:38.930

从我之前学习的大 O 表示法来看，即使你需要 1 步（比如检查一个变量，做一个赋值），也就是 O(1)。

请注意，O(1) 与 O(6) 相同，因为“常数”无关紧要。这就是为什么我们说 O(n) 与 O(3n) 相同。

因此，如果您甚至需要 1 步，那就是 O(1)……而且由于您的程序至少需要 1 步，因此算法可以达到的最小值是 O(1)。除非我们不这样做，否则我认为是 O(0)？如果我们做任何事情，那么它就是 O(1)，这是它可以达到的最小值。

（如果我们选择不这样做，那么它可能会成为一个禅或道的问题......在编程领域，O(1) 仍然是最小的）。

或者这个怎​​么样：  

**程序员**：老板，我在 O(1) 时间内找到了一种方法！

**老板**：不用了，今天早上我们破产了。

**程序员**：哦，那么，它变成了 O(0)。

            回答 #6

赞同：8

时间：2009-05-25T12:45:40.597

不，这是不可能的：

由于 n 在 1/n 中趋于无穷大，我们最终达到 1/(inf)，实际上是 0。

因此，问题的大哦类将是 O(0)，n 很大，但更接近常数时间，n 较低。这是不明智的，因为唯一可以比恒定时间更快地完成的事情是：

`void nothing() {};`

甚至这是有争议的！

一旦你执行一个命令，你至少处于 O(1)，所以不，我们不能有一个 O(1/n) 的大哦类！

            回答 #7

赞同：7

时间：2009-05-25T08:10:03.913

根本不运行该功能（NOOP）怎么办？或使用固定值。这算不算？

            回答 #8

赞同：7

时间：2009-05-25T17:52:18.063

我经常使用 O(1/n) 来描述随着输入变大而变小的概率——例如，公平硬币在 log2(n) 翻转时出现反面的概率是 O(1/n)。

            回答 #9

赞同：7

时间：2016-04-30T01:57:23.537

对于阅读此问题并想了解对话内容的任何人，这可能会有所帮助：

```
|    |constant |logarithmic |linear|  N-log-N |quadratic|  cubic  |  exponential  |
|  n |  O(1)   | O(log n)   | O(n) |O(n log n)|  O(n^2) |  O(n^3) |     O(2^n)    |
|  1 |       1 |          1 |     1|         1|        1|       1 |             2 |
|  2 |       1 |          1 |     2|         2|        4|       8 |             4 |
|  4 |       1 |          2 |     4|         8|       16|      64 |            16 |
|  8 |       1 |          3 |     8|        24|       64|     512 |           256 |
| 16 |       1 |          4 |    16|        64|      256|   4,096 |         65536 |
| 32 |       1 |          5 |    32|       160|    1,024|  32,768 | 4,294,967,296 |
| 64 |       1 |          6 |    64|       384|    4,069| 262,144 |   1.8 x 10^19 | 
```

            回答 #10

赞同：6

时间：2009-05-25T12:28:45.170

O(1) 仅表示“恒定时间”。

当您向循环[1] 添加提前退出时，您（在大 O 表示法中）将 O(1) 算法转换为 O(n)，但使其更快。

诀窍*通常*是恒定时间算法是最好的，线性优于指数，但对于少量的 n，指数算法实际上可能更快。

1：假设此示例的静态列表长度

            回答 #11

赞同：4

时间：2010-07-09T19:29:46.037

很多人都得到了正确答案（否） 这是另一种证明方式：为了拥有一个函数，您必须调用该函数，并且必须返回一个答案。这需要一定的恒定时间。即使其余的处理过程花费更少的时间来处理较大的输入，打印出答案（我们可以假设为单个位）至少需要恒定的时间。

            回答 #12

赞同：3

时间：2009-05-25T06:20:14.763

我相信量子算法可以通过叠加“一次”进行多项计算......

我怀疑这是一个有用的答案。

            回答 #13

赞同：2

时间：2009-05-25T06:32:22.403

如果存在解决方案，则可以在恒定时间 = 立即准备和访问它。例如，如果您知道排序查询是逆序的，则使用 LIFO 数据结构。假设选择了适当的模型 (LIFO)，则数据已经排序。

            回答 #14

赞同：2

时间：2009-05-25T06:51:32.777

你不能低于 O(1)，但是在 O(k) 中 k 小于 N 是可能的。我们称它们为[次线性时间算法](http://en.wikipedia.org/wiki/Sublinear_time)。在某些问题中，次线性时间算法只能给出特定问题的近似解。然而，有时，一个近似的解决方案就很好，可能是因为数据集太大，或者计算量太大而无法全部计算。

            回答 #15

赞同：2

时间：2009-05-25T07:22:06.320

随着人口的增长，哪些问题会变得更容易？一个答案是像 bittorrent 这样的东西，其中下载速度是节点数量的反函数。与加载越多的汽车速度越慢相反，像 bittorrent 这样的文件共享网络连接的节点越多，速度就越快。

            回答 #16

赞同：1

时间：2009-05-25T06:32:24.307

O(1/n) 不小于 O(1)，这基本上意味着你拥有的数据越多，算法运行得越快。假设你得到一个数组，如果它的元素少于 10 ^(100 个)，则总是填充它，如果有更多则什么也不做。这当然不是 O(1/n) 而是像 O(-n) 之类的东西 :) 太糟糕了 O-big 符号不允许负值。

            回答 #17

赞同：1

时间：2009-05-25T06:37:12.020

那这个呢：

```
void FindRandomInList(list l)
{
    while(1)
    {
        int rand = Random.next();
        if (l.contains(rand))
            return;
    }
} 
```

随着列表大小的增加，程序的预期运行时间会减少。

            回答 #18

赞同：1

时间：2010-07-09T11:19:32.083

正如已经指出的那样，除了可能的 null 函数异常之外，不可能有任何`O(1/n)`函数，因为所花费的时间将不得不接近 0。

`O(1)`当然，有一些算法，比如 Konrad 定义的算法，至少在某种意义上它们似乎应该小于。

```
def get_faster(list):
    how_long = 1/len(list)
    sleep(how_long) 
```

如果你想研究这些算法，你应该定义你自己的渐近测量，或者你自己的时间概念。例如，在上面的算法中，我可以允许使用一定数量的“自由”操作。在上述算法中，如果我通过排除除睡眠之外的所有时间来定义 t'，则 t'=1/n，即 O(1/n)。可能有更好的例子，因为渐近行为是微不足道的。事实上，我确信外面的某个人可以想出能给出不平凡结果的感官。

            回答 #19

赞同：1

时间：2017-07-30T02:07:18.087

其余大多数答案都将 big-O 解释为完全与算法的运行时间有关。但是由于问题没有提到它，我认为值得一提的是 big-O 在数值分析中的另一个应用，即关于误差。

许多算法可以是 O(h^p) 或 O(n^{-p})，具体取决于您是在谈论步长 (h) 还是划分数 (n)。例如，在[欧拉方法](https://en.wikipedia.org/wiki/Euler_method)中，假设您知道 y(0) 和 dy/dx（y 的导数），您会寻找 y(h) 的估计值。h 越接近 0，您对 y(h) 的估计就越准确。因此，为了找到某个任意 x 的 y(x)，需要将区间 0 到 x，将其拆分为 n 块，然后运行欧拉方法在每个点，从 y(0) 到 y(x/n) 到 y(2x/n)，依此类推。

因此，欧拉的方法是 O(h) 或 O(1/n) 算法，其中 h 通常被解释为步长，n 被解释为划分区间的次数。

由于[浮点舍入误差](https://en.wikipedia.org/wiki/Floating-point_arithmetic#Accuracy_problems)，您还可以在实际数值分析应用程序中使用 O(1/h) 。间隔越小，某些算法的实现发生的取消越多，有效数字的丢失越多，因此错误越多，这些错误会通过算法传播。

对于欧拉方法，如果您使用浮点数，请使用足够小的步长并取消，并且您将小数添加到大数中，而大数保持不变。对于通过从在两个非常接近的位置评估的函数中减去彼此的两个数字来计算导数的算法，在平滑函数 y 中用 (y(x+h) - y(x) / h) 逼近 y'(x) (x+h) 接近 y(x) 导致较大的抵消和对具有较少有效数字的导数的估计。这将反过来传播到您需要导数的任何算法（例如，边界值问题）。

            回答 #20

赞同：1

时间：2019-01-27T01:21:06.370

我想少于 O(1) 是不可能的。算法所花费的任何时间都称为 O(1)。但是对于 O(1/n)，下面的函数怎么样。（我知道这个解决方案中已经出现了许多变体，但我想它们都有一些缺陷（不是主要的，它们很好地解释了这个概念）。所以这里有一个，只是为了争论：

```
def 1_by_n(n, C = 10):   #n could be float. C could be any positive number
  if n <= 0.0:           #If input is actually 0, infinite loop.
    while True:
      sleep(1)           #or pass
    return               #This line is not needed and is unreachable
  delta = 0.0001
  itr = delta
  while delta < C/n:
    itr += delta 
```

因此，随着 n 的增加，函数将花费越来越少的时间。还可以确保如果输入实际上是 0，那么函数将永远返回。

有人可能会争辩说，它将受到机器精度的限制。因此，因为 eit 有一个上限，它是 O(1)。但是我们也可以通过在字符串中输入 n 和 C 来绕过它。加法和比较是在字符串上完成的。想法是，有了这个，我们可以将 n 减少到任意小。因此，即使我们忽略 n = 0，函数的上限也是无界的。

我也相信我们不能只说运行时间是 O(1/n)。但我们应该说像 O(1 + 1/n)

            回答 #21

赞同：0

时间：2009-05-25T06:32:12.340

好的，我想了想，也许有一个算法可以遵循这个一般形式：

您需要计算 1000 个节点图的旅行商问题，但是，您还会得到一个无法访问的节点列表。随着不可访问节点的列表越来越大，问题变得更容易解决。

            回答 #22

赞同：0

时间：2009-05-28T00:36:35.470

我看到一个算法的上限是 O(1/n)：

由于例程外部的某些原因，您有大量输入正在发生变化（可能它们反映了硬件，或者甚至可能是处理器中的其他内核执行此操作。）并且您必须选择一个随机但有效的输入。

现在，如果它没有改变，您只需制作一个项目列表，随机选择一个并获得 O(1) 时间。但是，数据的动态特性无法列出列表，您只需随机探测并测试探测的有效性。（请注意，本质上，不能保证返回时答案仍然有效。这仍然可以使用 - 例如，游戏中的一个单位的 AI。它可以射击一个在视线范围内消失的目标扣动扳机。）

这具有无穷大的最坏情况性能，但平均情况性能会随着数据空间的填满而下降。

            回答 #23

赞同：0

时间：2010-01-24T00:12:54.050

在数值分析中，逼近算法的逼近容差应该具有亚常数渐近复杂度。

```
class Function
{
    public double[] ApproximateSolution(double tolerance)
    {
        // if this isn't sub-constant on the parameter, it's rather useless
    }
} 
```

            回答 #24

赞同：-1

时间：2011-04-29T23:08:34.047

有可能构造一个 O(1/n) 的算法。一个例子是一个循环，它迭代 f(n)-n 的某个倍数，其中 f(n) 是某个函数，其值保证大于 n，并且当 n 接近无穷大时 f(n)-n 的极限是零。对于所有 n，f(n) 的计算也需要保持不变。我不知道 f(n) 会是什么样子，也不知道这样的算法会有什么应用，但在我看来，这样的函数可能存在，但生成的算法除了证明算法的可能性之外没有其他目的O(1/n)。

            回答 #25

赞同：-2

时间：2009-05-25T08:15:13.043

如果无论输入数据如何，答案都是相同的，那么您就有一个 O(0) 算法。

或者换句话说 - 在提交输入数据之前答案是已知的 - 可以优化函数 - 所以 O(0)

            回答 #26

赞同：-2

时间：2009-05-25T13:18:41.777

Big-O 表示法表示算法的**最坏情况**，这与其典型的运行时间不同。证明 O(1/n) 算法是 O(1) 算法很简单。根据定义，

O(1/n) --> T(n) <= 1/n，对于所有 n >= C > 0 

O(1/n) --> T(n) <= 1/C，因为1/n <= 1/C for all n >=C 

O(1/n) --> O(1)，因为 Big-O 表示法忽略了常量（即 C 的值无关紧要）

            回答 #27

赞同：-2

时间：2009-05-28T00:08:51.877

没有什么小于 O(1) Big-O 表示法意味着算法的最大复杂度顺序

如果算法的运行时间为 n^3 + n^2 + n + 5，那么它是 O(n^3) 较低的幂在这里根本不重要，因为当 n -> Inf 时，n^2 与n^3

同样作为 n -> Inf，与 O(1) 相比，O(1/n) 将无关紧要，因此 3 + O(1/n) 将与 O(1) 相同，从而使 O(1) 成为可能的最小计算量复杂

            回答 #28

赞同：-2

时间：2009-08-17T09:50:06.637

```
inline void O0Algorithm() {} 
```

            回答 #29

赞同：-2

时间：2009-09-15T22:43:43.433

这是一个简单的 O(1/n) 算法。它甚至做了一些有趣的事情！

```
function foo(list input) {
  int m;
  double output;

  m = (1/ input.size) * max_value;  
  output = 0;
  for (int i = 0; i < m; i++)
    output+= random(0,1);

  return output;
} 
```

O(1/n) 是可能的，因为它描述了随着输入大小的增加，函数的输出如何变化。如果我们使用函数 1/n 来描述函数执行的指令数，那么对于任何输入大小，函数都不需要零指令。相反，对于每个输入大小，n 高于某个阈值，所需的指令数以正常数乘以 1/n 为界。由于没有 1/n 为 0 的实际数字，并且常数为正，因此没有理由将函数限制为采用 0 或更少的指令。

            回答 #30

赞同：-2

时间：2016-04-24T19:15:15.400

我不了解算法，但小于 O(1) 的复杂性出现在随机算法中。实际上，o(1)（小 o）小于 O(1)。这种复杂性通常出现在随机算法中。例如，正如您所说，当某些事件的概率为 1/n 时，它们用 o(1) 表示。或者当他们想说某事发生的概率很高（例如 1 - 1/n）时，他们用 1 - o(1) 来表示它。

            回答 #31

赞同：-3

时间：2009-05-25T08:24:35.180

我不懂数学，但这个概念似乎是在寻找一个随着你添加更多输入而花费更少时间的函数？在这种情况下怎么办：

```
def f( *args ): 
  if len(args)<1:
    args[1] = 10 
```

添加可选的第二个参数时，此函数更快，因为否则必须分配它。我意识到这不是一个等式，但维基百科页面说 big-O 也经常应用于计算系统。

            回答 #32

赞同：-3

时间：2010-01-24T00:23:30.420

有亚线性算法。事实上，[Bayer-Moore 搜索](http://en.wikipedia.org/wiki/Boyer%E2%80%93Moore_string_search_algorithm)算法就是一个很好的例子。

        sql - VB6.0 中的记录集

ID：905554

赞同：1

时间：2009-05-25T06:16:15.143

标签：sql, vb6, recordset

我正在使用 VB6 从*记录集中*的数据库中检索数据...因此，在使用 SQL 中的 Select 检索数据时，我添加了一个名为**Comments**的列，以便在记录集中，表的所有列+“Comments”列会出现...我不想（而且*我也不能*）更新数据库中的任何内容，因为我现在只是从数据库中“获取”数据...

现在，当我通过获取的数据进行验证时，如果记录集中的特定行是错误的，我想用相应的错误填充“评论”列）......当我这样做时，我收到一条错误消息“我是无权这样做！！（更新“评论”栏”....

现在我的问题是“我能以什么方式解决这个问题？？？”..我试图复制这个记录集，现在填充'comments'列（在复制的列中），这反过来又显示了同样的错误.. .似乎这可能是因为重复的（recordSet）只是保留了原始的属性......

你能帮我解决这个问题吗？？？？任何复制记录集的方法（不继承其属性）？？？？？？

            回答 #1

赞同：2

时间：2009-05-27T19:49:08.997

我想你只是在问如何做一个断开连接的记录集。为此，您只需更改记录集的光标位置。

```
Dim rstTest as ADODB.RecordSet
Set rstTest = New ADODB.RecordSet
With rstTest
   .CursorLocation = adUseClient
   .Open "your sql here", your_connection_object, adOpenStatic, adLockBatchOptimistic, adCmdText
   ' now disconnect it and force the local copy
   .ActiveConnection = Nothing
End With 
```

            回答 #2

赞同：1

时间：2009-05-25T06:25:45.347

不完全是您正在寻找的东西，但这就是我的做法：

1.  创建一个类来封装记录集（'Customer' 表的'Customer' 类）
2.  将您的 Comment 属性添加到类而不是记录集
3.  将 Validate 方法添加到您的类。让它写入您的 Comment 属性（我使用错误集合）
4.  读取记录集
5.  将其解析为“新客户”
6.  证实
7.  检查 Comment 属性（或错误集合）

            回答 #3

赞同：0

时间：2009-05-26T11:23:49.437

您可以使用 MSDataShape 及其`SHAPE..APPEND`语法将新字段附加到 ADO 记录集。下面是一个使用 Jet（又名 MS Access）的简单示例：

```
Sub ShapeAppendField()

  On Error Resume Next
  Kill Environ$("temp") & "\DropMe.mdb"
  On Error GoTo 0

  Dim cat
  Set cat = CreateObject("ADOX.Catalog")
  With cat
    .Create _
        "Provider=Microsoft.Jet.OLEDB.4.0;" & _
        "Data Source=" & _
        Environ$("temp") & "\DropMe.mdb"

    Dim jeng
    Set jeng = CreateObject("JRO.JetEngine")
    jeng.RefreshCache .ActiveConnection

    Set .ActiveConnection = Nothing
  End With

  Dim con
  Set con = CreateObject("ADODB.Connection")
  With con
    .ConnectionString = _
        "Provider=MSDataShape;" & _
        "Data Provider=Microsoft.Jet.OLEDB.4.0;" & _
        "Data Source=" & _
        Environ$("temp") & "\DropMe.mdb"
    .CursorLocation = 3
    .Open

    .Execute _
    "CREATE TABLE Test (" & _
    "existing_col INTEGER NOT NULL);"
    .Execute _
    "INSERT INTO Test (existing_col)" & _
    " VALUES (1);"

    Dim rs
    Set rs = CreateObject("ADODB.Recordset")
    With rs
      .CursorType = 2
      .LockType = 4
      .Source = _
          "SHAPE {" & _
          " SELECT existing_col" & _
          " FROM Test" & _
          "} APPEND NEW adInteger AS new_col"

      Set .ActiveConnection = con
      .Open
      Set .ActiveConnection = Nothing

      .Fields("new_col").value = 55
      MsgBox .GetString
      .Close

    End With
  End With
End Sub 
```

        ruby - ROR - 不能在一对多关系中使用 Find

ID：905555

赞同：1

时间：2009-05-25T06:16:22.460

标签：ruby, activerecord

在 Ruby on rails 中，我们的模型包括订单和付款。订单和付款之间存在一对多的关系。在订单模型中，我们指定：
    *has_many :payments, :as => :payable*
并且支付记录的payable_id 设置为order.id。

在报告中，我想选择属于给定类型订单的所有付款。使用：
     *payments = Payment.find(:all, :conditions => conditions)*
并在条件中添加 'payable.type="a" ' 不起作用。ActiveRecord 似乎没有将其发展为正确的连接语句（payable_id=order.id 和 orders.type='a'）。我不能在这里使用显式 SQL，因为条件包含在代码前面插入的其他内容。谢谢，拉菲利普金

            回答 #1

赞同：2

时间：2009-05-25T17:28:41.167

你的条件条款是错误的。

你说一个`Order` 

```
has_many :payments, :as => :payable 
```

这告诉我一个`Payment`

```
belongs_to :payable, :polymorphic => true 
```

这意味着该`payments`表有两列注释：  `payable_id`和`payable_type`。这也意味着它不仅`Payments`可以应用于，还可以应用于`Orders`其他模型（`CreditCardBalances`谁知道）。

如果要查询特定类型的付款，即属于特定类的任何实例，则需要查询字段`payments.payable_type`。这工作正常：

```
Payment.find(:all, :conditions => "payable_type = 'Order'") 
```

[这是一个要点](http://gist.github.com/117628)，显示了我为测试这一点所做的工作。创建的模型就像上面描述的那样设置。

不要忘记，如果更容易，您可以将其提取到命名范围中：

```
named_scope :on_orders, :conditions => "payable_type = 'Order'" 
```

这使得它

```
Payment.on_orders 
```

或动态：

```
named_scope :on, lambda { |type| { :conditions => "payable_type = '#{type.to_s}'" } } 
```

然后使它

```
Payment.on(Order) # or Payment.on(CreditCardBalance) or Payment.on("Order") 
```

            回答 #2

赞同：1

时间：2009-05-25T06:28:56.963

尝试在条件中包含并引用实际的表 ID 名称，而不是关联别名：

```
find(:include => "payments", :conditions => ["payment.type = ?", "x"] 
```

            回答 #3

赞同：0

时间：2009-05-25T13:15:06.653

您提到“付款方式”。如果它们是相当静态的，您是否考虑过使用单表继承 (STI) 来对不同的支付类型进行子类化？然后 Rails 会做所有的魔法来过滤类型。

例如

```
class CreditCardPayment < Payment
...
end 
```

它甚至不需要一开始就表现出不同的行为；但是，您可能会发现，围绕付款拥有不同的数据和多态行为非常有用。

        c# - 如何使文本框等于 C# 中另一个文本框中特定字母或字符左侧的所有字母

ID：905582

赞同：0

时间：2009-05-25T06:29:01.987

标签：c#, textbox

我试图找出一种简单的方法，使文本框等于另一个文本框中“-”左侧的所有字母。基本上，如果最终用户在 textbox1 中键入 blah-test，我希望 textbox2 等于 blah。我已经尝试过基于字母位置计数的 if 语句和子字符串（即 substring(0, 5)；但是，这变得非常冗长且不切实际，因为输入到 textbox1 中的单词可以是任意长度。

谢谢，

DFM    

            回答 #1

赞同：3

时间：2009-05-25T06:32:09.797

试试这个：

```
if(textbox2.text.Contains("-"))
{
  textbox1.text = textbox2.text.Split("-")[0];
} 
```

在这里，我们首先检查 textbox2 是否包含 - 字符，如果包含，我们将文本分成两部分并将 textbox1 的文本设置为第一个 - 字符左侧的部分。

            回答 #2

赞同：1

时间：2009-05-25T06:35:07.733

这很简单

选择并双击 textbox1 上的 OnTextChange 事件

在 textbox1_OnTextChange 中写下这段代码：

 `string text = textbox1.Text;

textbox2.text = text.Substring(0, text.indexOf("-"));` 

你就完成了！

        iphone - 如何从 iphone 的 feed 中获取项目？

ID：905583

赞同：0

时间：2009-05-25T06:29:12.220

标签：iphone

我正在开发 RSS 阅读器，我需要从给定的 Feed URL 中获取项目。我为此使用了 Touch XML，但这很慢。有没有更快的方法？谢谢。

            回答 #1

赞同：0

时间：2009-05-25T08:47:24.850

NSXMLParser 是原始的 XML 解析器

        .net - 通用字典类键值

ID：905591

赞同：1

时间：2009-05-25T06:33:03.120

标签：.net, generics, .net-2.0, c#-2.0

据我所知，在 HashTable 中，键字符串的哈希值是唯一的，因为如果有两个相同的字符串，GetHashCode() 函数将用第二个覆盖第一个。

这将确保具有相同值的不同字符串不会生成相同的哈希值。

但是对于泛型字典类，我们可以指定任何类型作为键的类型参数。

因此，该键生成的哈希值不能唯一，因为它不执行字符串行为。是这样吗？

如果不是，那么这个通用场景背后的过程是什么？

提前致谢，

杰...

            回答 #1

赞同：3

时间：2009-05-25T06:40:42.733

哈希仅用于将项目放入“桶”中，以便快速查找。哈希值不用于确定相等性。

所以不用担心，如果两个字符串（或其他）返回完全相同的哈希，它们确实会进入同一个桶，但它们仍然是单独的“键”。

            回答 #2

赞同：1

时间：2009-05-25T07:30:41.933

哈希值由每个对象实现的 GetHashCode() 获得。从 System.Object 继承的默认实现不保证不同对象的唯一返回值。

但是，散列值不需要对对象是唯一的，因为它们仅用于加速搜索，并且您的键类仍然需要一个相等实现来确定键是否相等。

因此，如果您使用 System.Object 作为您的键，它将根据引用的相等性从另一个键中识别一个键，因为它将使用 Object.Equals 来解决这个问题。

        javascript - 如何创建“声音开/关”按钮？

ID：905594

赞同：3

时间：2009-05-25T06:34:42.180

标签：javascript, html, flash, audio, mp3

我见过很多网页都有一个简单的声音开/关按钮，当你按下声音时播放音乐或一些 mp3 文件，当你按下声音时将其关闭。

我怎么做？

嗨，我不打算使用 Flash ——如果有一个标准插件我可以使用然后对脚本进行修改，那会很酷。

我对任何“标准”方式持开放态度。

            回答 #1

赞同：1

时间：2009-05-25T18:13:46.633

这是在 AS3 中执行此操作的正确方法。

**初始化：**

```
var sound:Sound;
var channel:SoundChannel;
var pos:Number;
var numLoops:Number = 0; // 0 to loop forever

sound = new Sound();
sound.load( new URLRequest("song.mp3") );
channel = sound.play( 0, numLoops ); 
```

**停止播放：**

```
pos = channel.position;
channel.stop(); 
```

**开始播放：**

```
channel = sound.play( pos, numLoops ); 
```

的确，您可以将音量切换为零并返回，但这会留下不必要的开销，并且当您重新启动声音时，它会从您“停止”它的位置前进。

            回答 #2

赞同：1

时间：2010-01-03T06:11:17.723

我使用了谷歌，然后我使用了独立的 pixel1

            回答 #3

赞同：1

时间：2012-03-19T02:07:22.090

您可以尝试嵌入我的 Javascript SoundPlayer，看看是否适合您。它易于使用，只需将以下代码复制到您的网页中即可。

```
<script language="javascript" type="text/javascript" src="http://lablogic.net/scripts/soundplayer/audio_o.js"></script>

<a href="#" onclick='play("your-sound-file.mp3")'>PLAY</a>
<a href="#" onclick='stop("your-sound-file.mp3")'>STOP</a> 
```

只需将“your-sound-file.mp3”更改为您的声音文件的 url 或位置。它应该适用于大多数浏览器和大多数声音格式。如果它不起作用，我真的很想得到反馈，所以我可以进一步改进它。您可以先在此处试用该脚本，看看它是否有效：[免费的 javascript 声音播放器](http://lablogic.net/scripts/soundplayer/web-sound-player.php)

            回答 #4

赞同：0

时间：2009-05-25T06:39:27.350

你在用闪存吗？在这种情况下，您可以这样做：

```
stopAllSounds(); 
```

或者

```
theSound.stop(["id"]); 
```

            回答 #5

赞同：0

时间：2009-05-25T18:07:11.250

假设您如上所述使用 Flash。

AS2

```
stopAllSounds(); 
```

AS3

```
var xf:SoundTransform = SoundMixer.soundTransform;
xf.volume = 0;
SoundMixer.soundTransform = xf; 
```

        iphone - 如何获取访问网页的 iPhone OS 设备的语言设置？

ID：905595

赞同：1

时间：2009-05-25T06:34:52.710

标签：iphone, webkit, ipod-touch

我正在尝试创建一个供 iPhone OS 设备查看的网页。当用户在 iPhone OS 设备上访问时，有没有办法检索当前语言或某些特定于区域设置的数据？我想根据设备的本地或语言设置网页语言。那么，如何获取访问我网页的 iPhone OS 设备的语言设置？

            回答 #1

赞同：2

时间：2009-05-25T06:51:13.993

尝试使用浏览器发送到服务器的“Accept-Language”标头。它应该类似于“en-us”或“fr-fr”等，具体取决于设备的语言设置。

            回答 #2

赞同：0

时间：2009-06-02T00:28:42.740

`Accept-Language`从[这封电子邮件](http://lists.apple.com/archives/safari-iphone-web-dev/2009/Jan/msg00027.html)中可以看出， iPhone 确实发送了相当正确的信息。

（但是，它只发送对我来说很奇怪。发送*似乎* `fr-fr`更合理，`fr-fr, en-us;q=0.9`将来可能会改变）

但对你来说更重要的信息是，你真的不需要在你的情况下做任何复杂的事情。这称为[**内容协商**](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html)，是 Apache 和其他服务器的标准功能——它们会以用户喜欢的语言自动返回页面，并且配置最少。

您确实需要在不同的 URI 上为不同的语言创建不同的页面。如果你不这样做，你就打破了这样的想法，即任何内容都有一个可以轻松传递给另一个人的 URI，并且即使他/她的语言不同，第二个人也会看到完全相同的内容。

阿帕奇是如何做到的。你创造

```
example.fr.html
example.en.html
example.de.html 
```

（并编辑`.htaccess`文件）。然后`/example`以用户的语言返回页面，同时`/example.fr`始终返回法语。作为额外的奖励，您不需要`.html`.

        css - 绝对定位元素的包含块是什么？

ID：905597

赞同：3

时间：2009-05-25T06:35:33.707

标签：css

绝对定位元素的包含块是什么？似乎规则可能有点复杂......

规范应该在这里：
 [http ://www.w3.org/TR/CSS21/visudet.html#containing-block-details](http://www.w3.org/TR/CSS21/visudet.html#containing-block-details)

我想验证以下是否属实：

为简单起见，假设包含块是块元素（不是内联元素）...

1) 如果绝对定位元素有一个最近的祖先定位为“非静态”（相对、固定或绝对），那么该祖先就是包含块。绝对定位元素是相对于它的。

2）如果没有这样的祖先，那么视口就是包含块，所以绝对定位的元素是相对于视口的。

不管包含块在什么上面，width:100% 或 n% 和 height:100% 或 n% 都是相对于包含块的。  

这就是为什么

```
<div style="position:absolute;width:100%;height:100%;background:green"></div> 
```

<body> 正下方将完全覆盖整个视口——不多也不少。

我们也可以使用 position: fixed，除了 IE 6 不支持它......所以可怜的程序员需要使用 position: absolute 来代替......（好吧，没什么大不了的）

这是对绝对定位元素的准确描述吗？如果是这样，我认为 IE 6 及更高版本、FF、Safari、Chrome 都准确地遵循了这种行为？

            回答 #1

赞同：6

时间：2009-05-25T06:41:59.437

你是对的。包含块是最后*定位*的元素。所以如果你想显式设置容器然后给它位置：相对的。大多数浏览器都能做到这一点。CSS 并没有真正的“视口”，我认为顶部是 HTML 元素，尽管我不这么认为。不过，7 之前的 IE 在 HTML 之上有一个未命名的元素。

            回答 #2

赞同：5

时间：2009-06-16T12:31:21.857

概括：

`position: relative`

**除了为其中包含**的所有元素设置**定位上下文**之外，什么也不做。然后，您可以通过从可能的 、或中设置（通常是一两个）值来包含它包含的任何元素。**`position: absolute``top``right``bottom``left`** 如果您为元素提供`position: relative`、`top`或值，它会相应地移动位置，但会在默认情况下保留一个`right`空白区域**。**换句话说，它保留在*文档流*中，但有偏移。`bottom``left`

 ***## `position: absolute`

要绝对定位某些东西，您需要问'***绝对*，但*相*对于哪个包含元素**'？它将是整个正文（默认）或页面上已经定位的某些其他元素（通常使用`relative`或`absolute`-[在 IE 7](http://www.quirksmode.org/bugreports/archives/2007/03/ie7_positionfixed_and_margin_top_bug.html)`fixed`中也很有用和支持，但请参阅此错误）。*然后将其从文档流*中取出- 其他元素可能会出现在它的下方，但不会围绕它流动。如果它出现在另一个元素的后面，则需要设置[属性](http://www.w3schools.com/Css/pr_pos_z-index.asp)将其移到前面。*[`z-index`](http://www.w3schools.com/Css/pr_pos_z-index.asp)*

 *一个常见的解决方案是使用一个居中的容器 ( `margin: 0 auto`)，`position: relative`在其中放置其他物品`position: absolute`。

最后，我喜欢这个小小的[交互式 CSS 定位演示](http://www.barelyfitz.com/screencast/html-training/css/positioning/)。

# asp.net-mvc - 如何处理 ASP.NET MVC 应用程序中的成员资格？

> ID：905600
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2009-05-25T06:37:18.260
> 
>         
> 
> 标签：asp.net-mvc, membership

您将如何处理 ASP.NET MVC 应用程序中的成员资格？使用任何外部库？你会如何做 OpenID 登录？用户名登录？电子邮件登录？还有其他值得研究的吗？也许所有这些都混合到应用程序中？

似乎 ASP.NET 带有一些预构建的用户数据库（我对 .Net 完全陌生）。NerdDinner 示例使用它，但随后它使外键使用用户名。这听起来不太好。您是使用两个独立数据库的架构还是只使用一个？您使用什么作为外键，任何ID？

我找到了[ASP.Net MVC Membership](http://www.codeplex.com/MvcMembership)，有人在用吗？它运作良好吗？可以期待维持吗？

* * *

## 回答 #1

> 赞同：4
> 
>             
> 
> 时间：2009-05-25T06:46:56.840

Membership Providers 对 ASP.Net MVC 来说并不陌生，它们是在 ASP.Net 2.0 中引入的。Membership Provider 模型只是您的应用程序和您验证用户身份的任何来源之间的一个抽象层。您只需更改 web.config 文件即可轻松切换提供商。

编写会员提供程序很容易，网上有很多演练。通常，如果您使用的数据库使用的架构与 ASP.Net 附带的默认示例不同（大多数情况下），您会这样做。NerdDinner 示例中用户名的外键是一个简单的示例，您在任何真实世界的数据库中都很少看到。

我*强烈*推荐使用会员模式。像 Login 控件这样的控件是为了使用它而构建的，它经过精心设计，可以很容易地为您的应用程序更改或组合不同的登录方法。如果你想使用 OpenID，可以通过谷歌快速搜索找到这个[OpenID Membership Provider](http://code.google.com/p/dotnet-membership-provider/)。

# xcode - 我可以创建一个 Xcode 项目在 MacOS 上调试吗

> ID：905604
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-05-25T06:39:41.143
> 
>         
> 
> 标签：xcode, macos

我有一个现有的项目，它有自己的 Makefile。它在 MacOS 上编译 find 。我是否可以创建一个新的 XCode 项目但没有让它在 XCode 下编译它，但我仍然可以使用 Xcode 作为我的调试器？

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-05-28T04:13:18.893

是的。

[http://lists.apple.com/archives/xcode-users/2009/Jan/msg00070.html](http://lists.apple.com/archives/xcode-users/2009/Jan/msg00070.html)

# eclipse - 如何设置 eclipse.ini -vm 选项？

> ID：905611
> 
>         
> 
> 赞同：89
> 
>         
> 
> 时间：2009-05-25T06:42:53.743
> 
>         
> 
> 标签：eclipse, maven-2, maven, eclipse-plugin, m2eclipse

[我为Eclipse](http://en.wikipedia.org/wiki/Eclipse_%28software%29)安装了[Maven](http://en.wikipedia.org/wiki/Apache_Maven)插件，然后出现如下错误：

> 请确保 eclipse.ini 中的 -vm 选项指向 JDK

如何`-vm`在 eclipse.ini 中使用该选项指向我的 JDK？

* * *

## 回答 #1

> 赞同：110
> 
>             
> 
> 时间：2009-05-25T07:13:42.933

我的解决方案是：

```
-vm
D:/work/Java/jdk1.6.0_13/bin/javaw.exe
-showsplash
org.eclipse.platform
--launcher.XXMaxPermSize
256M
-framework
plugins\org.eclipse.osgi_3.4.3.R34x_v20081215-1030.jar
-vmargs
-Dosgi.requiredJavaVersion=1.5
-Xms40m
-Xmx512m 
```

* * *

## 回答 #2

> 赞同：66
> 
>             
> 
> 时间：2010-03-16T13:42:53.007

eclipse.ini 文件的第一行必须有`-vm`，第二行必须有路径。不要试图把所有东西都放在一条线上！

```
-vm
C:\Program Files\Java\jdk1.6.0_07\bin\javaw.exe 
```

* * *

## 回答 #3

> 赞同：47
> 
>             
> 
> 时间：2010-08-14T19:20:09.410

“vmargs”之后的任何内容都被视为 vm 参数。只需确保它在此之前，这是 eclipse.ini 中的最后一部分。

* * *

## 回答 #4

> 赞同：24
> 
>             
> 
> 时间：2009-05-25T19:50:48.917

[这里](http://wiki.eclipse.org/Equinox_Launcher#Finding_a_VM.2C_Using_JNI_Invocation_or_Executing_Java)有一个 wiki 页面。

可以通过两种方式启动[JVM ：通过在与 Eclipse 启动器不同的进程中分叉它，或者通过使用](http://en.wikipedia.org/wiki/Java_virtual_machine)[JNI](http://en.wikipedia.org/wiki/Java_Native_Interface)调用 API在进程内加载它。

如果您指定`-vm`实际 java(w).exe 的路径，则 JVM 将在单独的进程中分叉。您还可以指定`-vm`jvm.dll 的路径，以便在同一进程中加载​​ JVM：

```
-vm
D:/work/Java/jdk1.6.0_13/jre/bin/client/jvm.dll 
```

您还可以指定 jre/bin 文件夹本身的路径。

还要注意，eclipse.ini 的一般格式是每个参数在单独的行上。如果将“-vm”和路径放在同一行，它将不起作用。

* * *

## 回答 #5

> 赞同：13
> 
>             
> 
> 时间：2009-07-24T22:27:04.197

> -vm
> 
>   
>   
> 
> C:\Program Files\Java\jdk1.5.0_06\bin\javaw.exe

请记住，无论您的路径是否有空格（与命令行执行相反），都没有引号。

请参见此处：[查找 Eclipse 的 JRE](http://wiki.eclipse.org/FAQ_How_do_I_run_Eclipse%3F#Find_the_JRE)

* * *

## 回答 #6

> 赞同：11
> 
>             
> 
> 时间：2012-05-09T17:10:33.923

我的[Ubuntu](http://en.wikipedia.org/wiki/Ubuntu_%28operating_system%29) Linux 解决方案：

```
-vm
/home/daniel/Downloads/jdk1.6.0_17/bin
-startup
plugins/org.eclipse.equinox.launcher_1.1.1.R36x_v20101122_1400.jar
--launcher.library
plugins/org.eclipse.equinox.launcher.gtk.linux.x86_64_1.1.2.R36x_v20101019_1345
-product
org.eclipse.epp.package.jee.product
--launcher.defaultAction
openFile
-showsplash
org.eclipse.platform
--launcher.XXMaxPermSize
256m
--launcher.defaultAction
openFile
-vmargs
-Dosgi.requiredJavaVersion=1.5
-XX:MaxPermSize=256m
-Xms40m
-Xmx512m 
```

* * *

## 回答 #7

> 赞同：9
> 
>             
> 
> 时间：2010-04-26T20:03:04.643

我不确定是否发生了变化，但我只是尝试了有关 Eclipse Galileo SR2（Windows XP SR3）的“eclipse.ini”中条目的其他答案，但没有一个有效。Java 是 jdk1.6.0_18，是默认的 Windows 安装。当我从路径中删除“\javaw.exe”时，情况有所改善。

`-vm`另外，我非常感谢需要在 ini 文件的第一行中提及的内容。我相信这真的帮助了我。

因此我的 eclipse.ini 文件以：

```
-vm
C:\Program Files\Java\jdk1.6.0_18\bin 
```

仅供参考，我特别需要指定使用 JDK 启动 Eclipse，因为我想使用 m2eclipse 插件。

* * *

## 回答 #8

> 赞同：5
> 
>             
> 
> 时间：2009-05-25T06:53:51.133

您必须编辑 eclipse.ini 文件以获得与此类似的条目：

```
C:\Java\JDK\1.5\bin\javaw.exe (your location of java executable)
-vmargs
-Xms64m   (based on you memory requirements)
-Xmx1028m 
```

还要记住，在 eclipse.ini 中，用于 Eclipse 的任何内容都应该在该`-vmargs`行之前，而用于 JVM 的任何内容都应该在该`-vmargs`行之后。

* * *

## 回答 #9

> 赞同：4
> 
>             
> 
> 时间：2011-04-19T17:46:17.573

您在 eclipse.ini 中指向的 JDK 必须与 Eclipse 安装相匹配。

如果您运行的是 32 位或 64 位 Eclipse，请分别使用 32 位或 64 位 Java JDK。

* * *

## 回答 #10

> 赞同：3
> 
>             
> 
> 时间：2014-01-27T16:10:25.387

我想分享这个小技巧：

单击 Eclipse 的图标表明 JRE 存在问题。因此，我将此命令放在图标属性的目标字段中：

```
C:\...\eclipse.exe -vm c:\'Program Files'\Java\jdk1.7.0_51\jre\bin\javaw 
```

认为“'”会解决路径中空间的问题。那没有用。然后，我尝试了这个命令：

```
C:\...\eclipse.exe -vm c:\Progra~1\Java\jdk1.7.0_51\jre\bin\javaw 
```

成功

* * *

## 回答 #11

> 赞同：2
> 
>             
> 
> 时间：2009-05-25T06:58:56.863

我知道存在一个命令行选项，`-vm`用于指定 Java 运行时可执行文件的路径。这可能与 eclipse.ini 中的相同。

* * *

## 回答 #12

> 赞同：2
> 
>             
> 
> 时间：2011-12-08T22:16:04.610

假设您有一个 jre 文件夹，其中包含从 Java 运行时分发中复制的 bin、lib 等文件，位于与 eclipse.ini 相同的文件夹中，您可以在 ecrilpse.ini 中进行设置

```
-vm
jre\bin\javaw.exe 
```

* * *

## 回答 #13

> 赞同：-2
> 
>             
> 
> 时间：2016-04-05T06:33:35.900

```
-startup
plugins/org.eclipse.equinox.launcher_1.3.0.v20140415-2008.jar
--launcher.library
plugins/org.eclipse.equinox.launcher.win32.win32.x86_64_1.1.200.v20140603-1326
-product
org.eclipse.epp.package.jee.product
--launcher.defaultAction
openFile
--launcher.XXMaxPermSize
512M
-showsplash
org.eclipse.platform
--launcher.XXMaxPermSize
512m
--launcher.defaultAction
openFile
--launcher.appendVmargs
-vmargs
-Dosgi.requiredJavaVersion=1.6
-Xms2000m
-Xmx3512m 
```

# sql - 如何将这两个数据库表合并到一个结果集中？

> ID：905612
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-05-25T06:43:38.657
> 
>         
> 
> 标签：sql, view

我在系统中有两个表。我正在尝试制作一个同时代表它们的视图，我不确定如何做到这一点，甚至不确定是否可以做到。

### 宠物

```
PetId INT PK
Name  VARCHAR(100) 
```

### 宠物其他名字

```
PetID INT PK FK
Name VARCHAR(100) PK 
```

所以，我有一张宠物桌。名称（在此表中）是它们的正式通用名称。每只宠物可能有零对多的其他名称。这些名称永远不会显示，但要在搜索查询中使用。

那么，让我们看一些数据。

### 宠物资料

```
1\. Fred
2\. Barney
3\. Foo
4\. Megan Fox (boom tish) 
```

### PetsOtherName 数据

```
2\. B-b-b-Barney
2\. Bannana Barney
2\. Banannarama
4\. TapTap 
```

所以......如果我查看这两个表，我希望得到以下结果......

```
SELECT *
FROM PetsView
ORDER BY PetId, Name

1\. Fred
2\. B-b-b-Barney
2\. Barney
2\. Bannana Barney
2\. Banannarama
3\. Foo
4\. Megan Fox
4\. TapTap 
```

这将使我能够执行以下操作....

```
SELECT PetId, Name
FROM PetsView
WHERE CONTAINS(Name, 'Fox') 
```

...并返回 4\. Fox

```
SELECT PetId, Name
FROM PetsView
WHERE CONTAINS(Name, 'Fox') 
```

...然后返回 4。 TapTap

干杯:)

PS。我不确定我写了这篇文章的标题，所以请随时适当地编辑它（或建议一个更好的标题，让我更新）。

更新：这是针对 sql2008 的，但我假设结果是 tsql .. 所以它应该/可以全面应用。

* * *

## 回答 #1

> 赞同：4
> 
>             
> 
> 时间：2009-05-25T06:46:04.720

创建一个创建两个表的 UNION 的视图：

```
CREATE VIEW PetsView AS
SELECT * FROM Pets
UNION
SELECT * FROM PetOtherNames 
```

* * *

## 回答 #2

> 赞同：4
> 
>             
> 
> 时间：2009-05-25T06:49:21.173

不要偷任何雷声，但我之前没有使用 UNION ALL 被咬过。  

基本上，如果您在任一表中都有完全相同的 petId-Name 组合，那么如果您只使用 UNION，则结果集中只会出现一条记录。通过使用 UNION ALL，您将看到重复项（您可能想要也可能不想要）。

```
CREATE VIEW PetsView AS
SELECT petId, [Name] FROM Pets
UNION ALL
SELECT petId, [Name] FROM PetOtherNames 
```

（在 SQL Server 中，“name”是关键字，所以我使用了转义括号）

# javascript - 如何动态加载 Javascript 文件并立即使用它们？

> ID：905625
> 
>         
> 
> 赞同：3
> 
>         
> 
> 时间：2009-05-25T06:49:54.603
> 
>         
> 
> 标签：javascript, bookmarklet

我正在使用 JQuery 在网页的正文选项卡中动态注入脚本标签。我得到了类似的东西：

```
function addJS(url) {
  $("body").append('<script type="text/javascript" src='+url+'></script>'); 
} 
```

我以这种方式添加了几个脚本，然后尝试使用它们。例如：

*lib.js* 

```
function core() {...}
alert("I'am here !"); 
```

*初始化.js*

```
addJS("lib.js");
c = new core(); 
```

*测试.html*

```
<html>
  <head>
    <title>test</title>        
    <script type="text/javascript" src="init.js"></script> 
  </head>
  <body>
     Hello
  </body>
</html> 
```

加载 test.html 会弹出“我在这里”，然后以错误“未定义核心”结束。当然，合并这两个 JS 文件将使它们完美地工作。

我只是不明白它o_O。

**编辑**

我简化了这个例子，但杰夫的回答让我明白这是一个错误。所以这里有一些细节：

init.js 在重新加载时不在 test.html 的头部，因为我用在小书签上执行的代码注入它。

所以真正的执行过程如下：

重新加载 test.html > 运行书签 > 插入 jquery 和 init.js > 插入 lib.js

对困惑感到抱歉。

**编辑 2**

现在我有了解决问题的方法（很快:-)），但我仍然对我的问题的答案感兴趣。为什么会出错？

* * *

## 回答 #1

> 赞同：5
> 
>             
> 
> 时间：2009-05-25T06:59:57.987

[jQuery 使用getScript](http://docs.jquery.com/Ajax/jQuery.getScript#urlcallback)内置了这个功能。

* * *

## 回答 #2

> 赞同：3
> 
>             
> 
> 时间：2009-05-25T08:26:07.437

您会收到“未定义核心”错误，因为脚本是异步加载的。这意味着您的浏览器将开始在后台加载 lib.js，并继续执行 init.js，然后在 lib.js 完成加载之前遇到“new core()”。

getScript 函数有一个回调，将在脚本加载完成后触发：

```
$.getScript('lib.js', function() {
    var c = new core();
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2009-05-25T06:56:59.317

请注意，您的 addJS 函数附加到 body 元素的末尾。

由于浏览器将运行出现在 HTML 源代码中的脚本，

```
c = new core() 
```

将在您的 lib.js 脚本加载之前运行（在 body 元素的末尾）。

我建议移动 c = new core(); 进入 $(document).ready(function() {...}); 或在正文标记之后进入脚本元素。

* * *

## 回答 #4

> 赞同：1
> 
>             
> 
> 时间：2009-05-25T07:13:48.677

IMO，将脚本标签附加到文档末尾以加载脚本是相当难看的。原因：

1.  您相信浏览器会自动获取脚本并加载它。

2.  您无法确定脚本是否正在加载、已加载或是否遇到错误（可能是 404？）

适当的方法是使用 $.getScript()，或者对于更细粒度的控件，使用 $.ajax() 获取脚本文件并使用 eval()。

但是，第二种方法有一些问题：如果您在函数内部调用了 eval()，那么脚本将在它之外不可用！这要求解决方法...

但何必呢！使用 $.getScript() 并克服它:)

干杯，jrh。

* * *

## 回答 #5

> 赞同：1
> 
>             
> 
> 时间：2009-05-25T07:56:39.167

针对您的代码失败的原因：向正文添加脚本标记不会阻止进一步的脚本执行。您的代码添加它，这将启动浏览器下载过程。同时，您的脚本尝试调用`core()`不存在，因为`lib.js`尚未完成下载。jQuery 之所以有效，是因为它会等到脚本完成下载后再执行回调函数。

# flash - 读取文本文件并拆分字符串并推入数组

> ID：905634
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-05-25T06:51:55.537
> 
>         
> 
> 标签：flash, actionscript-3

你好，

我正在阅读文本文件

1=苹果 2=杰克 3=柠檬 4=香蕉

```
 var loader:URLLoader = URLLoader(event.target);
var mystring :String = loader.data;
 tempArray = mystring.split("\n"); 
```

并获得像

1=苹果

2=千斤顶

3=柠檬

4=香蕉

我需要拆分值并推入数组，例如..删除“=”和“结束空间”

"1=apple" 将该值拆分为 1 和 apple。“2=jack”将该值拆分为 2 和 jack。

并使用 1 2 3... 作为索引推入名为 fruits 数组的新数组；

水果[1]="苹果"; 水果[2]="杰克";柠檬水果[3]="柠檬";

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-05-25T13:05:26.953

我知道这可能被视为一个不充分的答案，但是：

为什么不使用 XML？XML 文件在 AS 中很容易阅读，并且它们总是带有简单的文本文件几乎无法提供的结构......

举个例子：

```
<fruits>
    <fruit index="1" name="Apple" />
    <fruit index="2" name="Jack" />
    <fruit index="3" name="Lemon" />
    <fruit index="4" name="Banana" />
</fruits> 
```

AS 会是这样的：

```
var fruits:Array = new Array();
var xml:XML = new XML();
xml.ignoreWhite = true;
xml.onLoad = function()
{
    var nodes:Array = this.firstChild.childNodes;
    for(var i=0; i<nodes.length; i++)
        fruits.push(nodes[i].name);        // *
}
xml.load(xmlFile); 
```

如果您坚持使用文件中的索引，则带有 * 的行可以替换为 fruits[nodes[i].index] = nodes[i].name 之类的内容。

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-05-25T07:07:17.660

您是否尝试过这个而不是拆分成换行符，

```
tempArray = mystring.split(" "); 
```

...以及分别处理数组中的每个元素以删除每个元素的“=”符号之前的任何内容。

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-05-25T12:55:57.190

尝试这个：

```
var lines:Array /* of String */ = String(loader.data).split(/ *\n */);
var fruits:Array = [];
for each (var line:String in lines) {
    var tokens:Array /* of String */ = line.split('=');
    fruits[int(tokens[0])] = tokens[1];
} 
```

# asp.net-mvc - Asp.Net MVC 中的管理区域

> ID：905635
> 
>         
> 
> 赞同：28
> 
>         
> 
> 时间：2009-05-25T06:52:16.580
> 
>         
> 
> 标签：asp.net-mvc, administration, asp.net-mvc-areas

我的问题可能很明显，但我想构建一个设计良好的 Web 应用程序。对于任何管理区域，管理员应该能够列出/创建/删除/修改用户、文章、帖子等...

我想知道设计应用程序的最佳方法是什么。我应该为这些项目中的每一项（/Users/Create/id 或 /Posts/Delete/id）创建一个控制器，还是在我的管理控制器中创建所有操作（/Administration/CreateUser/id 或 /Administration/DeletePost/ ID） ？

* * *

## 回答 #1

> 赞同：14
> 
>             
> 
> 时间：2009-05-25T06:59:41.107

您应该为每个实体编写一个单独的控制器，以保持控制器类的关注点清晰分离。如果你只有一个控制器，那么你就只有一个 Views 目录，里面有几十个视图，你的控制器会包含几十个方法，很快就会变得无法管理。

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-05-25T06:58:27.473

答案取决于控制器中有多少功能。只需从一个控制器开始，如果它太多，将它分成几个。MVC 的伟大之处在于您将内容放入控制器中的位置不必对 URL 产生任何影响。您可以非常轻松地将 /Users/Create 映射到例如 UserAdminController 类。

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2009-05-25T07:01:54.627

我只想建立一个新的 MVC 网站来处理管理。只要您将数据和业务逻辑分离到不同的程序集中，您就有一个更灵活的解决方案。然后，您可以将您的网站发布到子域，例如 admin.yoursite.com。这样您就不必弄乱您的路线，并且可以将它们保存在单独的视图中，恕我直言，这是最优雅的解决方案。Pro's 和 Con's 会很高兴听到。

我正在开发一个需要相同管理站点但还没有那么远的项目，所以这个问题让我很感兴趣。

* * *

## 回答 #4

> 赞同：1
> 
>             
> 
> 时间：2009-05-25T07:32:29.980

我目前正在将 ASP.NET 用于大型客户端。

我采用的方法是将动作的功能放到另一个类中。

**例子**

我也在写一个管理部分。将有一个管理控制器（我们的管理部分很小，如果它更大，我会更改路由以允许更多控制器，现在我们正在使用开箱即用的配置）。如果我创建一个“EditUser”视图。我还将创建一个“EditUserAction”**类**。所有 EditUser 代码都将进入该类。我在 Edit User 方法的 Administration 控制器类中构造了 EditUserAction 类。这会从 Controller 类中删除所有特定于操作的代码。这样，所有特定于动作的代码要么在动作方法中，要么在动作类中。否则，控制器将很快被各种操作的代码溢出。控制器类会在短时间内膨胀到无法控制的混乱状态。

**类示例**

```
public class Administration: Controller
{
    public ActionResult EditUser(string userId)
    {
        EditUserAction action = new EditUserAction();
    }
}

public class EditUserAction
{
    public void Save(User user)
    {   
        //save code here
    }
} 
```

我希望这个解释是清楚的。如果不让我知道，我会澄清的。

为了**回答**您的问题，我正在做后者（*/Administration/CreateUser/id*或*/Administration/DeletePost/id*）。

* * *

## 回答 #5

> 赞同：0
> 
>             
> 
> 时间：2009-05-25T06:57:30.907

您可以为此使用[DynamicData 。](http://www.asp.net/dynamicdata/)它不是 MVC，但可以与它一起使用，并且非常易于设置和使用。

* * *

## 回答 #6

> 赞同：0
> 
>             
> 
> 时间：2009-05-25T08:59:27.777

这是问我问题的另一种方式。

我的母版页的一部分：

```
<% if (!String.Equals(ViewContext.RequestContext.RouteData.GetRequiredString("controller"), "Administration")) { %>
<div>
    <!-- Some Code -->
</div> <% } %> 
```

如您所见，在我的母版页中，我想显示页面的某些部分，这取决于是否在管理区域工作的用户。它仅适用于管理控制器（/Administration/CreateUser/id）...但是当我使用不同的控制器作为用户或文章（/User/DeleteUser/id 或 /Article/Details/id）时，它变得一团糟.

我更喜欢每个实体使用一个控制器，但我找不到将这种方法与多个控制器绑定的方法。

* * *

## 回答 #7

> 赞同：0
> 
>             
> 
> 时间：2009-08-11T15:18:54.057

我建议使用[这个解决方案](http://pietschsoft.com/post/2009/03/26/ASPNET-MVC-Implement-Theme-Folders-using-a-Custom-ViewEngine.aspx)。

但是我将定义更改为：

```
 public ThemedViewEngine()
    {
        base.MasterLocationFormats = new string[] {
            "~/Views/{1}/{0}.master", 
            "~/Views/Shared/{0}.master",
            "~/Themes/{2}/Views/{1}/{0}.master", 
            "~/Themes/{2}/Views/Shared/{0}.master",
            "~/Themes/Default/Views/{1}/{0}.master", 
            "~/Themes/Default/Views/Shared/{0}.master"
        };
        base.ViewLocationFormats = new string[] { 
            "~/Views/{1}/{0}.aspx", 
            "~/Views/{1}/{0}.ascx", 
            "~/Views/Shared/{0}.aspx", 
            "~/Views/Shared/{0}.ascx",
            "~/Themes/{2}/Views/{1}/{0}.aspx", 
            "~/Themes/{2}/Views/{1}/{0}.ascx", 
            "~/Themes/{2}/Views/Shared/{0}.aspx", 
            "~/Themes/{2}/Views/Shared/{0}.ascx",
            "~/Themes/Default/Views/{1}/{0}.aspx", 
            "~/Themes/Default/Views/{1}/{0}.ascx", 
            "~/Themes/Default/Views/Shared/{0}.aspx", 
            "~/Themes/Default/Views/Shared/{0}.ascx" 
        };
        base.PartialViewLocationFormats = new string[] {
            "~/Views/{1}/{0}.aspx",
            "~/Views/{1}/{0}.ascx",
            "~/Views/Shared/{0}.aspx",
            "~/Views/Shared/{0}.ascx",
            "~/Themes/{2}/Views/{1}/{0}.aspx",
            "~/Themes/{2}/Views/{1}/{0}.ascx",
            "~/Themes/{2}/Views/Shared/{0}.aspx",
            "~/Themes/{2}/Views/Shared/{0}.ascx",
            "~/Themes/Default/Views/{1}/{0}.aspx",
            "~/Themes/Default/Views/{1}/{0}.ascx",
            "~/Themes/Default/Views/Shared/{0}.aspx",
            "~/Themes/Default/Views/Shared/{0}.ascx"
        };
    } 
```

默认主题是默认的，所以它必须存在。

目录结构将是：

*   内容

*   主题

    *   默认

        *   内容

        *   意见

            *   家

            *   博客

            *   什么都应该剥皮

    *   其他主题

        *   内容

        *   意见

            *   家

            *   博客

            *   什么都应该剥皮

*   意见

    *   文章

    *   帖子

    *   用户

    *   设置

    *   其他行政事务

* * *

## 回答 #8

> 赞同：0
> 
>             
> 
> 时间：2013-07-08T06:41:14.873

这取决于您的管理区域的规模大小，我建议您考虑执行以下操作（或者可能记录一下）

*   考虑您要独立管理多少个实体，

*   考虑每个人会有多少动作，

*   检查您的应用程序和管理区域之间是否存在任何依赖关系（用户访问，对于用户友好的 URL）

然后您可以指定哪种方法可以帮助您，拥有一个管理控制器，实体控制器中的管理操作，或者在大型功能应用程序的情况下定义一个新的管理项目。

*如果项目规模正在快速增长并且很快需要大规模，我会选择第三个 - 拥有一个新的 admin mvc 项目。

我希望它能帮助你做出决定。

# coding-style - 返回具体或抽象数据类型？

> ID：905644
> 
>         
> 
> 赞同：4
> 
>         
> 
> 时间：2009-05-25T06:57:32.483
> 
>         
> 
> 标签：coding-style, encapsulation

我正在阅读 Code Complete，在本书的最后，在关于重构的章节中，作者列出了一些你应该做的事情，以在重构时提高代码的质量。

他的观点之一是**始终尽可能返回特定类型的数据**，尤其是在返回集合、迭代器等时。所以，正如我所理解的那样，如果你使用那种数据类型，而不是返回，比如说`Collection<String>`，你应该返回`HashSet<String>`方法里面。

这让我很困惑，因为这听起来像是他在鼓励人们打破信息隐藏的规则。现在，我在谈论访问器时理解了这一点，这是一个明确的案例。但是，在计算和修改数据时，方法的抽象级别意味着没有直接的数据结构，我发现最好尽可能返回*抽象的数据类型*，只要数据不分崩离析（我不会例如，返回`Object`而不是`Iterable<String>`)。

**所以，我的问题是：** Code Complete 的建议背后是否有更深层次的哲学，即始终返回尽可能具体的数据类型，并允许向下转换，而不是保持我刚刚不理解的需要知道的基础？

* * *

## 回答 #1

> 赞同：3
> 
>             
> 
> 时间：2009-05-25T07:56:26.170

我认为在大多数情况下这是完全错误的。它必须是：
**尽可能宽容，根据需要尽可能具体**

在我看来，您应该始终返回 List 而不是 LinkedList 或 ArrayList，因为区别更多的是实现细节而不是语义细节。来自[Java 的 Google collections api 的](http://code.google.com/p/google-collections/)人更进一步：他们返回（并期望）迭代器，这已经足够了。但是，他们还建议在可能的情况下返回 ImmutableList、-Set、-Map 等，以向调用者显示他不必制作防御性副本。

除此之外，我认为不同列表实现的性能并不是大多数应用程序的瓶颈。

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-05-25T07:15:57.267

找不到任何证据来证实我的主张，但想法/指南似乎是：

**接受输入时尽可能宽容**。选择通用类型而不是专用类型。这意味着客户可以将您的方法用于不同的专业类型。因此，将 IEnumerable 或 IList 作为输入参数意味着该方法可以运行 ArrayList 或 ListItemCollection。它最大限度地提高了您的方法有用的机会。

**返回值时尽可能严格**。如果可能，请首选专用类型。这意味着客户端不必事后猜测或跳过箍来处理返回值。此外，专门的类型具有更大的功能。如果您选择返回 IList 或 IEnumerable，调用者可以使用您的返回值执行的操作数量会大大减少 - 例如，如果您通过 ArrayList 返回 IList，要获取返回的元素数量 - 使用 Count 属性，客户必须垂头丧气。但是这样的向下转换会破坏目的-今天有效..明天不会（如果您更改返回对象的类型）。因此，出于所有目的，客户无法轻松获得元素的数量 - 导致他编写平凡的样板代码（在多个地方或作为辅助方法）

这里的总结是它取决于上下文（大多数规则的例外）。例如，如果您的返回值最可能的用途是客户端将使用返回的列表来搜索某个元素，那么返回支持某种搜索方法的列表实现（类型）是有意义的。让客户端尽可能容易地使用返回值。

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2009-05-25T07:28:15.447

大多数时候应该返回一个接口，或者可能是一个代表返回值的抽象类型。如果要返回 X 列表，请使用 List。如果需要返回列表类型，这最终会提供最大的灵活性。

也许后来你意识到你想要返回一个链表或一个只读列表等。如果你把一个具体的类型你卡住了，改变它会很痛苦。使用接口解决了这个问题。

@Gishu

如果您的 api 要求客户在大多数情况下直接转换，那么您的设计就很糟糕。如果客户需要转换为 Y，为什么还要麻烦返回 X。

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2009-05-25T07:02:09.587

我可以看到，在某些情况下，返回更具体的数据类型会很有用。例如，知道返回值是 LinkedList 而不仅仅是 List 将允许您从列表中删除，因为知道它会很有效。

* * *

## 回答 #5

> 赞同：0
> 
>             
> 
> 时间：2009-05-25T07:23:10.310

我认为，在设计接口时，您应该设计一种方法来返回尽可能抽象的数据类型。返回特定类型将使方法的目的更清楚地了解它们返回的内容。

另外，我会这样理解：

返回尽可能抽象的数据类型 = 返回尽可能具体的数据类型

即当你的方法应该返回任何集合数据类型时返回集合而不是对象。

告诉我我是否错了。

* * *

## 回答 #6

> 赞同：0
> 
>             
> 
> 时间：2009-05-25T07:23:27.610

特定的返回类型更有价值，因为它：

1.  减少通过投射或反射发现功能时可能出现的性能问题

2.  增加代码可读性

3.  事实上，并没有超出必要的范围。

函数的返回类型是专门为满足其所有调用者而选择的。调用函数应该尽可能抽象地使用返回变量，因为调用函数知道如何使用数据。  

只需要遍历结构吗？有必要对结构进行排序吗？改造它？克隆吗？这些是只有调用者才能回答的问题，因此可以使用抽象类型。被调用的函数必须提供所有这些情况。

事实上，如果您现在最具体的用例是 Iterable<string>，那很好。但通常情况下——你的调用者最终需要有更多的细节，所以从一个特定的返回类型开始——它不需要任何成本。

# asp.net - ASP.NET 链接按钮可见属性问题

> ID：905650
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-05-25T06:59:37.563
> 
>         
> 
> 标签：asp.net

我在 aspx 页面后面的代码中使用了一个名为 IsAdmin 的公共变量。

```
 public partial class _news : System.Web.UI.Page
{
    public bool IsAdmin = false;
    protected void Page_Load(object sender, EventArgs e)
    {

    if (User.Identity.Name.Contains("admin"))
    {
        IsAdmin = true;
    }
    else
    {
        IsAdmin = false;
    }
 } 
```

我使用属性 Visible='<%#IsAdmin%>' 分配给我想要显示的面板，如果用户是页面的 aspx 设计中的管理员。奇怪的是，它适用于我放在中继器上的链接按钮。

```
 <asp:Panel ID="Panel1" runat="server" Visible='<%#IsAdmin%>'>
 <asp:LinkButton ID="LinkButton2" runat="server" PostBackUrl='<%# "news_edit.aspx?     Action=edit&id=" + Convert.ToString( Eval("news_id")) %>Edit</asp:LinkButton>

 <asp:LinkButton ID="LinkButton3" runat="server" PostBackUrl='<%# "news.aspx?Action=delete&id=" + Convert.ToString( Eval("news_id")) %>'>Delete</asp:LinkButton>
        </asp:Panel> 
```

它工作正常，但是在中继器之外我放了另一个没有面板的链接按钮

```
 <asp:LinkButton ID="LinkButton4" runat="server" PostBackUrl="~/news_edit.aspx?action=new" Visible='<%#IsAdmin%>'>Add New Item</asp:LinkButton> 
```

但是可见属性对它不起作用！我也尝试将它放在面板中并设置它的可见属性，但这也不起作用。

所以我有以下疑问

1）有什么问题？2）当我们在设计页面中使用“<%#IsAdmin%>”之类的引用时，技术名称是什么？ 3）页面加载是在页面渲染之前发生还是在页面渲染之后发生？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-05-25T07:11:02.753

`<%# %>`是用于访问数据绑定字段的语法。由于您可能会在某些时候对 Repeater 控件进行数据绑定，因此将评估这些表达式。

由于您可能*不会*调用面板上的数据绑定和中继器之外的链接按钮，因此不会处理这些表达式。您可能可以将它们更改为类似

```
<%= IsAdmin.ToString() %> 
```

并得到你想要的结果。

查看这个[很棒的博客条目](http://blogs.msdn.com/dancre/archive/2007/02/13/the-difference-between-lt-and-lt-in-asp-net.aspx)以获取有关差异的更多信息。

此外，页面加载发生在页面呈现之前。呈现页面是 ASP.Net 页面生命周期中发生的最后一件事。

# c# - C#中的压缩文件夹

> ID：905654
> 
>         
> 
> 赞同：78
> 
>         
> 
> 时间：2009-05-25T07:00:34.600
> 
>         
> 
> 标签：c#, zip, directory, archive, compression

如何在 C# 中压缩文件夹的示例（简单代码）是什么？

* * *

更新：

我没有看到命名空间`ICSharpCode`。我下载`ICSharpCode.SharpZipLib.dll`了，但我不知道在哪里复制那个 DLL 文件。我需要做什么才能看到这个命名空间？

您是否有压缩文件夹的 MSDN 示例的链接，因为我阅读了所有 MSDN 但我找不到任何东西。

* * *

好的，但我需要下一个信息。

我应该在哪里复制`ICSharpCode.SharpZipLib.dll`才能在 Visual Studio 中查看该命名空间？

* * *

## 回答 #1

> 赞同：144
> 
>             
> 
> 时间：2012-07-30T14:09:14.023

这个答案随着 .NET 4.5 而改变。创建 zip 文件[变得异常简单](http://msdn.microsoft.com/en-us/library/system.io.compression.zipfile%28v=vs.110%29.aspx)。不需要第三方库。

```
string startPath = @"c:\example\start";
string zipPath = @"c:\example\result.zip";
string extractPath = @"c:\example\extract";

ZipFile.CreateFromDirectory(startPath, zipPath);
ZipFile.ExtractToDirectory(zipPath, extractPath); 
```

* * *

## 回答 #2

> 赞同：53
> 
>             
> 
> 时间：2009-05-25T07:29:13.480

来自[DotNetZip](http://www.codeplex.com/DotNetZip)帮助文件，[http: //dotnetzip.codeplex.com/releases/](http://dotnetzip.codeplex.com/releases/)

```
using (ZipFile zip = new ZipFile())
{
   zip.UseUnicodeAsNecessary= true;  // utf-8
   zip.AddDirectory(@"MyDocuments\ProjectX");
   zip.Comment = "This zip was created at " + System.DateTime.Now.ToString("G") ; 
   zip.Save(pathToSaveZipFile);
} 
```

* * *

## 回答 #3

> 赞同：22
> 
>             
> 
> 时间：2009-05-25T07:03:22.940

BCL 中没有任何内容可以为您执行此操作，但是有两个用于 .NET 的出色库确实支持该功能。

*   [SharpZipLib](http://www.icsharpcode.net/OpenSource/SharpZipLib/)

*   [点网邮编](http://www.codeplex.com/DotNetZip)

两个我都用过，可以说两个都非常齐全，API设计的很好，所以主要看个人喜好。

我不确定他们是否明确支持将*文件夹*[`DirectoryInfo`](http://msdn.microsoft.com/en-us/library/system.io.directoryinfo.aspx)而不是单个文件添加到 zip 文件，但是使用和[`FileInfo`](http://msdn.microsoft.com/en-us/library/system.io.fileinfo.aspx)类创建递归迭代目录及其子目录的东西应该很容易。

* * *

## 回答 #4

> 赞同：17
> 
>             
> 
> 时间：2016-02-29T17:53:22.090

在 .NET 4.5 中 ZipFile.CreateFromDirectory(startPath, zipPath); 方法不涵盖您希望压缩多个文件和子文件夹而不必将它们放在文件夹中的情况。当您希望解压缩将文件直接放在当前文件夹中时，这是有效的。

这段代码对我有用：

```
public static class FileExtensions
{
    public static IEnumerable<FileSystemInfo> AllFilesAndFolders(this DirectoryInfo dir)
    {
        foreach (var f in dir.GetFiles())
            yield return f;
        foreach (var d in dir.GetDirectories())
        {
            yield return d;
            foreach (var o in AllFilesAndFolders(d))
                yield return o;
        }
    }
}

void Test()
{
    DirectoryInfo from = new DirectoryInfo(@"C:\Test");
    using (var zipToOpen = new FileStream(@"Test.zip", FileMode.Create))
    {
        using (var archive = new ZipArchive(zipToOpen, ZipArchiveMode.Create))
        {
            foreach (var file in from.AllFilesAndFolders().OfType<FileInfo>())
            {
                var relPath = file.FullName.Substring(from.FullName.Length+1);
                ZipArchiveEntry readmeEntry = archive.CreateEntryFromFile(file.FullName, relPath);
            }
        }
    }
} 
```

文件夹不需要在 zip 存档中“创建”。CreateEntryFromFile 中的第二个参数“entryName”应该是一个相对路径，解压压缩文件时会检测并创建相对路径的目录。

* * *

## 回答 #5

> 赞同：6
> 
>             
> 
> 时间：2010-10-21T16:03:57.483

There is a ZipPackage class in the System.IO.Packaging namespace which is built into .NET 3, 3.5, and 4.0.

[http://msdn.microsoft.com/en-us/library/system.io.packaging.zippackage.aspx](http://msdn.microsoft.com/en-us/library/system.io.packaging.zippackage.aspx)

Here is an example how to use it.
[http://www.codeproject.com/KB/files/ZipUnZipTool.aspx?display=Print](http://www.codeproject.com/KB/files/ZipUnZipTool.aspx?display=Print)

* * *

## 回答 #6

> 赞同：4
> 
>             
> 
> 时间：2009-05-25T07:24:38.280

[MSDN](http://code.msdn.microsoft.com/DotNetZip/Wiki/View.aspx?title=Console%20Example&referringTitle=Home)上有一篇文章，其中有一个示例应用程序，用于纯粹用 C# 压缩和解压缩文件和文件夹。很长一段时间以来，我一直在成功地使用其中的一些课程。如果您需要了解这类事情，代码是根据 Microsoft Permissive License 发布的。

**编辑：**感谢 Cheeso 指出我有点落后于时代。我指出的 MSDN 示例实际上是使用[DotNetZip](http://dotnetzip.codeplex.com/)，并且现在功能非常齐全。根据我对以前版本的经验，我很乐意推荐它。

[SharpZipLib](http://www.icsharpcode.net/OpenSource/SharpZipLib/)也是一个相当成熟的库，受到人们的高度评价，并且在 GPL 许可下可用。这实际上取决于您的压缩需求以及您如何查看每个项目的许可条款。

富有的

* * *

## 回答 #7

> 赞同：1
> 
>             
> 
> 时间：2010-07-15T10:52:28.983

以下代码使用来自 Rebex 的第三方[ZIP 组件](http://www.rebex.net/zip.net/)：

```
// add content of the local directory C:\Data\  
// to the root directory in the ZIP archive
// (ZIP archive C:\archive.zip doesn't have to exist) 
Rebex.IO.Compression.ZipArchive.Add(@"C:\archive.zip", @"C:\Data\*", ""); 
```

或者，如果您想添加更多文件夹而无需多次打开和关闭存档：

```
using Rebex.IO.Compression;
...

// open the ZIP archive from an existing file 
ZipArchive zip = new ZipArchive(@"C:\archive.zip", ArchiveOpenMode.OpenOrCreate);

// add first folder
zip.Add(@"c:\first\folder\*","\first\folder");

// add second folder
zip.Add(@"c:\second\folder\*","\second\folder");

// close the archive 
zip.Close(ArchiveSaveAction.Auto); 
```

您可以[在此处下载 ZIP 组件](http://www.rebex.net/zip.net/download.aspx)。

使用免费的、LGPL 许可的[SharpZipLib](http://www.icsharpcode.net/opensource/sharpziplib/)是一种常见的替代方法。

免责声明：我为 Rebex 工作

* * *

## 回答 #8

> 赞同：1
> 
>             
> 
> 时间：2018-05-18T09:22:14.783

使用 DotNetZip（作为 nuget 包提供）：

```
public void Zip(string source, string destination)
{
    using (ZipFile zip = new ZipFile
    {
        CompressionLevel = CompressionLevel.BestCompression
    })
    {
        var files = Directory.GetFiles(source, "*",
            SearchOption.AllDirectories).
            Where(f => Path.GetExtension(f).
                ToLowerInvariant() != ".zip").ToArray();

        foreach (var f in files)
        {
            zip.AddFile(f, GetCleanFolderName(source, f));
        }

        var destinationFilename = destination;

        if (Directory.Exists(destination) && !destination.EndsWith(".zip"))
        {
            destinationFilename += $"\\{new DirectoryInfo(source).Name}-{DateTime.Now:yyyy-MM-dd-HH-mm-ss-ffffff}.zip";
        }

        zip.Save(destinationFilename);
    }
}

private string GetCleanFolderName(string source, string filepath)
{
    if (string.IsNullOrWhiteSpace(filepath))
    {
        return string.Empty;
    }

    var result = filepath.Substring(source.Length);

    if (result.StartsWith("\\"))
    {
        result = result.Substring(1);
    }

    result = result.Substring(0, result.Length - new FileInfo(filepath).Name.Length);

    return result;
} 
```

**用法：**

```
Zip(@"c:\somefolder\subfolder\source", @"c:\somefolder2\subfolder2\dest"); 
```

**或者**

```
Zip(@"c:\somefolder\subfolder\source", @"c:\somefolder2\subfolder2\dest\output.zip"); 
```

* * *

## 回答 #9

> 赞同：0
> 
>             
> 
> 时间：2010-03-25T15:09:41.790

`"Where should I copy ICSharpCode.SharpZipLib.dll to see that namespace in Visual Studio?"`

您需要在项目中添加 dll 文件作为参考。右键单击解决方案资源管理器中的引用->添加引用->浏览，然后选择 dll。

最后，您需要将它作为 using 语句添加到您想要使用它的任何文件中。

* * *

## 回答 #10

> 赞同：0
> 
>             
> 
> 时间：2014-12-18T17:21:50.293

[ComponentPro ZIP](http://www.componentpro.com/zip.net/)可以帮助您完成这项任务。以下代码片段压缩文件夹中的文件和目录。您也可以使用通配符掩码。

```
using ComponentPro.Compression;
using ComponentPro.IO;

...

// Create a new instance.
Zip zip = new Zip();
// Create a new zip file.
zip.Create("test.zip");

zip.Add(@"D:\Temp\Abc"); // Add entire D:\Temp\Abc folder to the archive.

// Add all files and subdirectories from 'c:\test' to the archive.
zip.AddFiles(@"c:\test");
// Add all files and subdirectories from 'c:\my folder' to the archive.
zip.AddFiles(@"c:\my folder", "");
// Add all files and subdirectories from 'c:\my folder' to '22' folder within the archive.
zip.AddFiles(@"c:\my folder2", "22");
// Add all .dat files from 'c:\my folder' to '22' folder within the archive.
zip.AddFiles(@"c:\my folder2", "22", "*.dat");
// Or simply use this to add all .dat files from 'c:\my folder' to '22' folder within the archive.
zip.AddFiles(@"c:\my folder2\*.dat", "22");
// Add *.dat and *.exe files from 'c:\my folder' to '22' folder within the archive.
zip.AddFiles(@"c:\my folder2\*.dat;*.exe", "22");

TransferOptions opt = new TransferOptions();
// Donot add empty directories.
opt.CreateEmptyDirectories = false;
zip.AddFiles(@"c:\abc", "/", opt);

// Close the zip file.
zip.Close(); 
```

[http://www.componentpro.com/doc/zip](http://www.componentpro.com/doc/zip)有更多示例

# log4j - 如何使用 Log4j 格式化为特定模式？

> ID：905666
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-05-25T07:04:43.140
> 
>         
> 
> 标签：log4j

我想通过以下方式捕获 log4j 日志注释。可能吗 ？如果是这样，那么我的 log4j.properties 应该如何？

我的留言：2009-05-22 17:07:28

谢谢溜冰场

* * *

## 回答 #1

> 赞同：7
> 
>             
> 
> 时间：2009-05-29T12:39:25.047

使用以下转换模式：`"%m: %d{yyyy-MM-dd HH:mm:ss}%n"`不带引号。如果您想使用 ConsoleAppender，您的`log4j.properties`文件将包含：

```
log4j.rootLogger=debug, CON
log4j.appender.CON=org.apache.log4j.ConsoleAppender
log4j.appender.CON.layout=org.apache.log4j.PatternLayout
log4j.appender.CON.layout.ConversionPattern=%m: %d{yyyy-MM-dd HH:mm:ss}%n 
```

* * *

## 回答 #2

> 赞同：3
> 
>             
> 
> 时间：2009-05-25T07:16:24.613

在 log4j.properties 文件中添加以下行：

```
log4j.appender.stdout.layout.ConversionPattern=MyMessage : %-5p %d{yyyy-MMM-dd   HH:mm:ss,SSS} %m %n

log4j.appender.R.layout.ConversionPattern=MyMessage : %-5p %d{yyyy-MMM-dd   HH:mm:ss,SSS} %m %n 
```

# asp.net - ASP.NET：URL 掩码

> ID：905668
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-05-25T07:06:21.733
> 
>         
> 
> 标签：asp.net, url-rewriting

我有一个 ASP.NET Web 应用程序，其中有一个页面 Signup.aspx 和一个主页.aspx。在我的主页中，我有指向 signup.aspx 页面的链接。我想在地址栏中隐藏文件 extension.aspx有人点击主页中的注册链接。我想将其显示为[http://mysite.com/signup](http://mysite.com/signup)   。有没有办法做到这一点？我正在使用 VS 2008

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
>             
> 
> 时间：2009-05-25T07:25:49.323

如果您使用的是 ASP.NET 3.5，那么 ASP.NET Routing 对您来说可能是一个不错的选择。

MSDN 页面：[msdn.microsoft.com/en-us/library/cc668201.aspx](http://msdn.microsoft.com/en-us/library/cc668201.aspx)

在 ScottGu 博客上将其与 ASP.NET MVC 一起使用：[weblogs.asp.net/scottgu/archive/2007/12/03/asp-net-mvc-framework-part-2-url-routing.aspx](http://weblogs.asp.net/scottgu/archive/2007/12/03/asp-net-mvc-framework-part-2-url-routing.aspx)

将其与 ASP.NET 3.5 一起使用：[www.techbubbles.com/aspnet/aspnet-35-url-routing/](http://www.techbubbles.com/aspnet/aspnet-35-url-routing/)

如果您的网站在 ASP.NET 2.0 下运行 Helicon ISAPI Rewrite 对您来说可能是一个不错的选择。这是一个 IIS 过滤器，它根据基于正则表达式的配置文件将请求重定向到您的页面。他们有一个网站的免费版本。

看看 Helicon：[www.isapirewrite.com](http://www.isapirewrite.com)

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2009-05-25T07:09:07.983

最简单的方法就是拥有一个名为“signup”的文件夹，其中包含一个重定向到 signup.aspx 的默认页面

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-05-25T07:18:09.680

另一个不涉及自己重写 URL 的选项是使用[ASP.NET MVC 框架](http://www.asp.net/mvc/)，它可以很容易地处理这类事情。

# xcode - 我可以在 XCode 上切换 gdb 客户端吗？

> ID：905669
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-05-25T07:06:29.533
> 
>         
> 
> 标签：xcode, macos

如何在 MACOS 上的 Xcode 中切换到使用不同的 gdb 客户端？或者如果这是可能的？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
>             
> 
> 时间：2013-07-09T07:39:19.127

我想你想要的是进入产品菜单，然后选择方案->编辑方案。

在那里您可以将调试器更改为 GDB 而不是 LLDB

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-05-28T04:18:20.370

不确定“Xcode 中的不同 gdb 客户端”是什么意思。你真正想做什么？

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2010-02-28T22:42:01.443

您的意思是切换到内部使用 gdb 的其他调试器 GUI 吗？ddd[可](http://ddd.darwinports.com/)用于 OS X，因此可能还有其他的。

# .net - WPF UserControl 的集合属性

> ID：905672
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-05-25T07:09:00.323
> 
>         
> 
> 标签：.net, wpf, user-controls, user-interface

我想`UserControl`在 WPF 中创建一个我想通过它公开一个集合属性的方法。我想`UserControl`根据集合的变化来改变 UI。

例如，假设我有一个绑定到我的`UserControl`. 基于该集合，我想在`UserControl`包含这些文本的按钮文本上创建按钮。有没有办法我可以实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-05-25T07:20:19.817

是的，您可以为绑定到该集合`DataTemplate`的控件设置一个包含按钮。`ItemsControl`例如：

```
//For code:
items.DataContext = new List<string>
{
    "Item 1",
    "Item 2",
    "Item 3"
};

//For XAML            
<ItemsControl x:Name="items" ItemsSource="{Binding}">
    <ItemsControl.ItemTemplate>
        <DataTemplate>
            <Button Content="{Binding}" />
        </DataTemplate>
    </ItemsControl.ItemTemplate>
</ItemsControl> 
```

# c# - .NET 中的 PDF 阅读器

> ID：905683
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-05-25T07:13:35.930
> 
>         
> 
> 标签：c#, .net, pdf, pdf-reader

我想从我的 .net 应用程序中读取 PDF 文件。有没有免费的图书馆可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
>             
> 
> 时间：2009-05-25T07:23:06.800

如果您正在寻找免费的 PDF Read/Write .Net 库，那么您可以访问

[https://itextpdf.com/](https://itextpdf.com/)（以前的 itextsharp）

注意：正如 Dexters 所说，这是一个不再免费用于商业目的的库。它属于[Affero 通用公共许可证 (AGPL)](http://itextpdf.com/terms-of-use/agpl.php)

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-05-25T07:16:42.180

你可以看看 PDFSharp：[http ://www.pdfsharp.com/PDFsharp/](http://www.pdfsharp.com/PDFsharp/)

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2009-05-25T07:39:25.113

[PDFBox](http://pdfbox.apache.org/)是开源的，支持[高级文本提取](http://pdfbox.apache.org/cookbook/textextraction.html)。它还支持 lucene 搜索，因此非常适合创建 lucene 索引。

# apache-flex - 如何删除 swf 中的右键菜单（使用动作脚本 3、flash 9 的 flash cs4）？

> ID：905688
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-05-25T07:16:04.520
> 
>         
> 
> 标签：apache-flex, animation, air, flash

我使用 Flash 9 播放器制作了 swf，如果我右键单击 swf，它将显示诸如放大、缩小等选项的菜单。如何删除swf中的右键菜单。

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-07-09T13:10:05.110

检查这篇文章：[http](http://blog.another-d-mention.ro/programming/right-click-and-custom-context-menu-in-flash-flex/) ://blog.another-d-mention.ro/programming/right-click-and-custom-context-menu-in-flash-flex/ 。如果您不希望与右键单击进行任何交互，则可以使用该 JavaScript，以便在 Flash 顶部添加一个层，以捕获右键单击事件并阻止它们进入 Flash 播放器。

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-05-25T08:53:12.220

试试[这个方法](http://livedocs.adobe.com/flash/9.0/ActionScriptLangRefV3/flash/ui/ContextMenu.html#hideBuiltInItems())，或者在[这个课程](http://livedocs.adobe.com/flash/9.0/ActionScriptLangRefV3/flash/ui/ContextMenu.html)中阅读关于你可以用上下文菜单做什么。

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-05-25T07:31:32.180

我看到了你的参考网址，它只显示重绘区域选项。你会改变你的嵌入代码

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2009-06-30T23:57:27.513

as3（在电影中）把它放在第一帧:)：

```
myMenu.hideBuiltInItems();
_root.menu = myMenu; 
```

在 html 中：

```
<EMBED src=Yourswf.swf type="text/html;  
charset=iso-8859-1" quality="high" menu=false  
bgcolor=#000000 WIDTH=120 HEIGHT=30> 
```

* * *

## 回答 #5

> 赞同：0
> 
>             
> 
> 时间：2009-08-04T12:09:57.057

```
<param name="MENU" value="false"> 
```

# sql - 快速获取 MySQL 中 2 列差异的方法

> ID：905689
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-05-25T07:16:16.843
> 
>         
> 
> 标签：sql, mysql, mediawiki

如何获取在另一列中没有匹配的列的字段？

我试过：

```
SELECT table1.page_title 
FROM table1, table2 
WHERE table1.page_title != table2.page_title 
```

它产生了很多重复的字段，所以我做了一个：

```
SELECT DISTINCT table1.page_title 
FROM table1, table2 
WHERE table1.page_title != table2.page_title 
```

但它只是挂起。

任何帮助将不胜感激，谢谢！

PS 我这样做是为了为 mediawiki 的 MWDumper 工具创建一个排除列表。我需要它，这样当我导入输出的 sql 时，我当前的 wiki 条目不会被覆盖。

编辑：是的，它们是 2 张不同的桌子。每个都有大约 70,000 多条记录 另外为什么我的查询很慢？如果有人能澄清一下，我将不胜感激，以便我了解原因:) 再次感谢！

* * *

## 回答 #1

> 赞同：0
> 
>             
> 
> 时间：2009-05-25T07:28:15.510

您可以尝试我过去使用过的自联接，但我不确定这是否会更快，因为我不使用 MySQL。此页面可能会给您一些见解：[http ://www.xaprb.com/blog/2006/10/11/how-to-delete-duplicate-rows-with-sql/](http://www.xaprb.com/blog/2006/10/11/how-to-delete-duplicate-rows-with-sql/)

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-05-25T07:31:18.470

a 和 b 是不同的表，都具有“page_title”列吗？

如果是这样，试试这个：

```
SELECT DISTINCT page_title FROM a
WHERE page_title NOT IN (SELECT page_title FROM b) 
```

如果您感兴趣的只是删除重复项（如果您只有一张表），那么有几种方法可以做到，其中两种是：

```
SELECT DISTINCT page_title FROM a 
```

或者

```
SELECT page_title FROM a
GROUP BY page_title 
```

GROUP BY 选项虽然速度较慢，但​​更强大 - 您可以添加 HAVING 子句以仅选择出现两次以上的标题：

```
SELECT page_title FROM a
GROUP BY page_title
HAVING COUNT(page_title) > 2 
```

希望有帮助

（感谢亚伦 F 的评论）

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-05-25T07:40:11.367

Rax 的回答略有改进：

```
SELECT DISTINCT a.page_title FROM a
WHERE a.page_title NOT IN (SELECT DISTINCT b.page_title FROM b) 
```

您的表在其 page_title 列上有索引吗？解释计划对您的查询有何说明？

无论如何，我无法想象您需要索引，因为您的表中只有 70k 行。

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2009-05-25T07:52:16.180

你可以通过加入来做到这一点：

```
SELECT DISTINCT table1.page_title 
FROM table1
LEFT JOIN table2 
    ON table1.page_title = table2.page_title
WHERE table2.page_title is null 
```

如果速度很慢，请在 (table2.page_title) 上添加索引

# c# - vs2005如何调用另一个项目

> ID：905703
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-05-25T07:20:23.840
> 
>         
> 
> 标签：c#, visual-studio, visual-studio-2005

我有 2 个名为 SQLDiscovery 和 TestApp 的项目，例如（解决方案“TestApp”（2 个项目）

解决方案“TestApp”（2 个项目）| 

  | ---> (SQLDiscovery) 包含一个类 SQLDiscover 和一个方法 DisplayLocalinstances()

---> (TestApp) 其中包含 main()

现在我想在 main.how 中访问 DisplayLocalInstances()。我该怎么做。已经为 2nd proj k hav chhose proj 1 作为依赖项目。

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-05-25T07:22:56.113

首先，您必须添加对您想要调用它的方法的项目的引用。然后确保该方法在它包含的程序集之外是可见的（即在公共类中定义并且它本身被标记为公共）。

实际上添加引用是一项非常简单的工作，只需选择客户端项目（您将从中调用其他项目功能的项目），右键单击并选择添加引用，从对话框中选择项目选项卡，选择包含你想参考的功能，瞧！你都准备好了。

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-05-25T07:24:53.270

您必须在 TestApp 项目中[引用](http://msdn.microsoft.com/en-us/library/wkze6zky.aspx)SQLDiscovery 项目。

# random-access - 文件和随机访问文件有什么区别？

> ID：905706
> 
>         
> 
> 赞同：4
> 
>         
> 
> 时间：2009-05-25T07:21:50.860
> 
>         
> 
> 标签：random-access, file-access

文件和随机访问文件有什么区别？

* * *

## 回答 #1

> 赞同：12
> 
>             
> 
> 时间：2009-05-25T07:25:39.587

随机访问文件是一个文件，您可以在其中“跳转”到其中的任何位置，而无需顺序读取直到您感兴趣的位置。

例如，假设您有一个 1MB 的文件，并且您对 100k 数据之后开始的 5 个字节感兴趣。随机访问文件将允许您在一次操作中“跳转”到第 100k 个位置。非随机访问文件将要求您先读取 100k 字节，然后才读取您感兴趣的数据。

希望有帮助。

澄清：此描述与语言无关，与任何特定语言/框架中的任何特定文件包装器无关。

* * *

## 回答 #2

> 赞同：5
> 
>             
> 
> 时间：2009-05-25T07:28:55.463

这几天几乎没有。在某些操作系统中曾经有一段时间存在不同类型的文件——其中一些可以随机访问（在文件中的任何点），而另一些只能按顺序访问。当您使用诸如磁带之类的顺序介质时，这更有意义。如今，任何值得称道的文件系统都只支持随机访问。

# php - Debian 服务器中的 Bosh 错误消息

> ID：905722
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-05-25T07:25:56.327
> 
>         
> 
> 标签：php, debian, bots

嗨，我有一个 debian 服务器。我正在使用 xmpphp 库进行机器人开发。当我使用 xmpp 文件创建机器人时，它工作正常，但是当我尝试使用 bosh 时，它会产生致命错误。

致命错误：在 /var/www/testlib/XMPPHP/BOSH.php:75 中带有消息“无法将字符串解析为 XML”的未捕获异常“异常”堆栈跟踪：

0 /var/www/testlib/XMPPHP/BOSH.php(75): SimpleXMLElement->__construct('')

1 /var/www/testlib/index.php(14): XMPPHP_BOSH->connect('myserver')

2 {main} 在第 75 行的 /var/www/testlib/XMPPHP/BOSH.php 中抛出

请帮助我

谢谢

* * *

## 回答 #1

> 赞同：0
> 
>             
> 
> 时间：2009-05-25T09:47:43.967

不确定，但它可能与这个已知的错误有关：
 [http ://bugs.php.net/bug.php?id=42682](http://bugs.php.net/bug.php?id=42682)

# c++ - C++ 数组 [索引] 与索引 [数组]

> ID：905724
> 
>         
> 
> 赞同：15
> 
>         
> 
> 时间：2009-05-25T07:26:17.200
> 
>         
> 
> 标签：c++, c, arrays

> **可能重复：**
> 
>   [在 C 数组中，为什么这是真的？a[5] == 5[a]](https://stackoverflow.com/questions/381542/in-c-arrays-why-is-this-true-a5-5a)

array[index] 和 index[array] 是编译器功能还是语言功能的可能性。第二个怎么可能？

* * *

## 回答 #1

> 赞同：30
> 
>             
> 
> 时间：2009-05-25T07:30:03.243

编译器会转

```
index[array] 
```

进入

```
*(index + array) 
```

使用正常的语法它会变成

```
array[index] 
```

进入

```
*(array + index) 
```

因此您会看到两个表达式的计算结果相同。这适用于 C 和 C++。

* * *

## 回答 #2

> 赞同：6
> 
>             
> 
> 时间：2009-05-25T07:29:09.847

从 C 的早期开始，表达式`a[i]`只是将 a[0] 的地址添加到 i（按 a[0] 的大小放大）然后取消引用。事实上，所有这些都是等价的：

```
a[i]
i[a]
*(a+i) 
```

> ====
> 
>   
>   
> 
> 我唯一关心的是实际的取消引用。虽然它们都产生相同的*地址*`a`，但如果和的类型不同，则取消引用可能是一个问题`i`。
> 
>   
>   
> 
> 例如：

```
 int i = 4;
    long a[9];
    long x = a[i]; //get the long at memory location X.
    long x = i[a]; //get the int at memory location X? 
```

> 我实际上还没有测试过这种行为，但你可能需要注意这一点。如果它确实改变了被取消引用的内容，那么它也可能会导致对象数组出现各种问题。
> 
>   
>   
> 
> ====

**更新：**

您可能可以放心地忽略以上`=====`行之间的位。我已经在 Cygwin 下用短和长测试了它，看起来还不错，所以我想我的担心是没有根据的，至少对于基本情况。我仍然不知道更复杂的会发生什么，因为这不是我可能想做的事情。

* * *

## 回答 #3

> 赞同：5
> 
>             
> 
> 时间：2009-05-25T08:59:20.723

正如 Matthew Wilson 在[*Imperfect C++*](http://www.imperfectcplusplus.com/)中所讨论的，这可用于强制 C++ 中的类型安全，方法是防止在`DIMENSION_OF()`定义下标运算符的类型实例中使用 -like 宏，如下所示：

```
#define DIMENSION_OF_UNSAFE(x)  (sizeof(x) / sizeof((x)[0]))

#define DIMENSION_OF_SAFER(x)  (sizeof(x) / sizeof(0[(x)]))

int ints[4];

DIMENSION_OF_UNSAFE(ints); // 4
DIMENSION_OF_SAFER(ints); // 4

std::vector v(4);

DIMENSION_OF_UNSAFE(v); // gives impl-defined value; v likely wrong
DIMENSION_OF_SAFER(v); // does not compile 
```

处理指针还有更多内容，但这需要一些额外的模板智能。查看[STLSoft](http://www.stlsoft.org/)`STLSOFT_NUM_ELEMENTS()`库中的实现，并在[*Imperfect C++*](http://www.imperfectcplusplus.com/)的第 14 章中阅读所有内容。[](http://www.imperfectcplusplus.com/)

 *编辑：一些评论者建议实现不拒绝指针。它确实如此（以及用户定义的类型），如下面的程序所示。您可以通过未注释的第 16 行和第 18 行来验证这一点。（我刚刚在 Mac/GCC4 上做了这个，它拒绝了这两种形式）。

```
#include <stlsoft/stlsoft.h>
#include <vector>
#include <stdio.h>

int main()
{
    int     ar[1];
    int*    p = ar;
    std::vector<int>        v(1);

    printf("ar: %lu\n", STLSOFT_NUM_ELEMENTS(ar));

//  printf("p: %lu\n", STLSOFT_NUM_ELEMENTS(p));

//  printf("v: %lu\n", STLSOFT_NUM_ELEMENTS(v));

    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2009-05-25T09:12:06.597

在 C 和 C++（*数组*是指针或数组）中，它是一种语言特性：指针算术。将 a 或 b 为指针的操作 a[b] 转换为指针算术：*(a + b)。由于加法是对称的，重新排序不会改变含义。

现在，非指针存在差异。事实上，给定一个带有重载 operator[] 的类型 A，那么 a[4] 是一个有效的方法调用（将调用 A::operator），但相反的甚至不会编译。

# asp.net - ASP.NET 客户端验证和回发

> ID：905725
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-05-25T07:26:22.130
> 
>         
> 
> 标签：asp.net, validation, client-side

我有一个 aspx 页面，其中有 3 个 asp.net 文本框和 1 个 asp.net 按钮控件。我想在单击按钮时进行回发之前进行客户端验证。IE ; 如果页面通过验证检查，那么我只需要调用服务器端按钮单击事件。有人可以帮助我吗？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-05-25T07:31:14.710

定义JS函数：  

```
function validate(){
    //perform some validation
    return $("#myTextbox").val()=="";
} 
```

在按钮控件上调用它 onclick event="return DoValidation();"

如果 JS 函数返回 false，则回发将被取消。

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-05-25T07:34:07.260

如果您想与 ASP.net 验证集成，需要使用**RegisterValidator**声明来注册您的 Javascript 验证器。

不要忘记在服务器端进行验证，因为 Javascript 可能会被禁用。

# jboss - 如何在不硬编码值的情况下为 EJB3 消息驱动 bean 持久订阅指定 clientId 和 subscriptionName？

> ID：905729
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-05-25T07:27:39.770
> 
>         
> 
> 标签：jboss, jms, jboss-mdb

我有一个运行 JBoss4.2.1 的服务器，其中包含一个 JMS 主题。我还有多个终端，每个终端都运行自己的 JBoss，并带有一个 EJB3 消息驱动 bean，需要使用持久订阅来订阅主题。由于每个订阅都需要指定唯一的 clientId 和 subscriptionName，因此我无法对 ActivationConfigProperty 注释中的值进行硬编码，也无法在部署描述符文件中指定值。

那么，问题是如何指定这些值？我是否在 JBoss 配置文件中执行此操作？

如果可能，请提供完整的示例配置。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-05-28T08:48:11.330

这可以通过使用 ejb-jar.xml 配置文件中的条目组合并将值作为参数提供给 JBoss 启动命令来完成。

META-INF/ejb-jar.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<ejb-jar xmlns="http://java.sun.com/xml/ns/javaee"
         version="3.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/ejb-jar_3_0.xsd">

    <enterprise-beans>

        <message-driven>
            <ejb-name>MyMsgDrivenBeanMDB</ejb-name>
            <ejb-class>com.mdb.MyMsgDrivenBeanMDB</ejb-class>
            <activation-config>
                <activation-config-property>
                    <activation-config-property-name>clientId</activation-config-property-name>
                    <activation-config-property-value>${client.id}</activation-config-property-value>
                </activation-config-property>
                <activation-config-property>
                    <activation-config-property-name>subscriptionName</activation-config-property-name>
                    <activation-config-property-value>${subscription.name}</activation-config-property-value>
                </activation-config-property>
                <activation-config-property>
                    <activation-config-property-name>reconnectInterval</activation-config-property-name>
                    <activation-config-property-value>60</activation-config-property-value>
                </activation-config-property>
            </activation-config>
        </message-driven>

    </enterprise-beans>
</ejb-jar> 
```

通过在 ejb-jar.xml 文件中使用 ${variable} 表示法指定值，然后可以从 JBoss 启动命令中将它们作为服务器选项获取。

-Dclient.id=client-01 -Dsubscription.name=subscription-01

# sharepoint - 如何使用 SharePoint 网站从命令行打开 SharePoint 设计器

> ID：905730
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2009-05-25T07:27:54.513
> 
>         
> 
> 标签：sharepoint, sharepoint-designer

我正在使用 Visual Studio 加载项来编辑 SharePoint 中的文件。通过这个加载项，我希望能够使用特定的 SharePoint 网站打开 SharePoint Designer。找到应用程序没有问题，它的文件夹在注册表项 HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Office\12.0\SharePoint Designer\InstallRoot 中，应用程序名为 SPDesign.exe。

我只能找到一个命令行开关来打开一个页面（参见[http://office.microsoft.com/en-us/sharepointdesigner/HA101487151033.aspx](http://office.microsoft.com/en-us/sharepointdesigner/HA101487151033.aspx)），而不是打开一个站点。

如果我打开一个类似 spdesign.exe /n [http://myserver/pages/default.aspx](http://myserver/pages/default.aspx)的页面，该页面将以 Untitled_1.aspx 的名称打开，并且在左侧您看不到站点资源管理器。

关于如何自动打开站点的任何想法，如果可能的话，还可以打开站点中的页面，站点导航器在左侧，实际页面打开。

* * *

## 回答 #1

> 赞同：5
> 
>             
> 
> 时间：2009-05-27T20:40:08.893

我认为要打开一个站点，您只需传入站点的 URL，无需切换。

spdesign.exe [http://My_server/My_site](http://My_server/My_site) 

# c# - double.TryParse 荷兰语

> ID：905754
> 
>         
> 
> 赞同：5
> 
>         
> 
> 时间：2009-05-25T07:34:17.107
> 
>         
> 
> 标签：c#

以荷兰语（比利时）运行的 Web 服务器

```
double output;

double.TryParse(txtTextbox1.Text, out output); 
```

这是在荷兰语环境中将文本转换为双精度的好方法吗？假设输入是“ **24.45** ”而不是“ **24,45** ”

* * *

## 回答 #1

> 赞同：27
> 
>             
> 
> 时间：2009-05-25T07:39:39.230

如果要使用荷兰（比利时）数字格式：

```
double output;
double.TryParse("24,45", NumberStyles.Any, CultureInfo.GetCultureInfo("nl-BE"), out output); 
```

或者使用美国号码格式：

```
double output;
double.TryParse("24.45", NumberStyles.Any, CultureInfo.GetCultureInfo("en-US"), out output); 
```

如果您尝试使用荷兰文化集解析“24.45”，您将返回“2445”，同样，如果您尝试使用美国文化解析“24,45”，您将获得“2445”。如果您希望在使用错误的小数点时解析失败，请更改 NumberStyles.Any 以排除标志`NumberStyles.AllowThousands`：：

```
double output;
if (double.TryParse("24.45", NumberStyles.Any ^ NumberStyles.AllowThousands, CultureInfo.GetCultureInfo("nl-BE"), out output)) 
```

如果您的整个应用程序都是荷兰语，您应该在全球范围内更改您的文化信息 -[这是在 WinForms 中](http://www.sisulizer.com/online-help/ActionMessageNetUiLocale.htm)的操作方法和[在 ASP.NET 中的操作方法](http://msdn.microsoft.com/en-us/library/bz9tc508.aspx)。

使用全局设置 CultureInfo 后，可以将上述代码更改为：

```
double output;
double.TryParse("24.45", NumberStyles.Any, CultureInfo.CurrentCulture, out output); 
```

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2009-05-25T08:01:47.737

荷兰-比利时的正确文化代码是“nl-BE”，因此您应该使用它而不是经常建议的“nl-NL”，这将为您提供适合荷兰的荷兰文化设置的变体。

```
double output;
double.TryParse("24.45", NumberStyles.Any, CultureInfo.GetCultureInfo("nl-BE"), out output); 
```

[您可以在http://arvindlounge.spaces.live.com/blog/cns!C9061D5B358A2804!263.entry](http://arvindlounge.spaces.live.com/blog/cns!C9061D5B358A2804!263.entry)找到文化代码的完整列表。

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-05-25T07:39:16.113

您应该将文化设置为荷兰语。文化决定了如何解析表示数字的字符串。

查看这篇文章：[如何：在 ASP.NET 应用程序中以编程方式设置当前文化](http://support.microsoft.com/kb/306162)，它解释了如何为 ASP.NET 应用程序和当前线程设置文化。

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2009-05-25T07:40:16.423

如果您的服务器的区域设置设置为荷兰数字，请尝试以下操作：

```
double output;
double.TryParse(txtTextbox1.Text, System.Globalization.NumberStyles.Any, System.Globalization.CultureInfo.CurrentCulture, out output); 
```

* * *

## 回答 #5

> 赞同：0
> 
>             
> 
> 时间：2009-05-25T07:40:33.863

您可以使用允许您指定语言环境的重载（使用瑞典语言环境的示例，因为我知道它是如何工作的）：

```
double result;
if (double.TryParse("24,95", NumberStyles.AllowDecimalPoint, CultureInfo.GetCultureInfo("sv-SE"), out result))
{
    Console.WriteLine(result.ToString());
} 
```

如果我在上面对 TryParse 的调用中传递“24.95”，它将返回 false，因为瑞典小数点符号是“，”。

您可能需要尝试使用 NumberStyles 参数来获得所需的确切行为。例如，如果我更改为 NumberStyles.Any 并使用上面的输入 24.95 调用该方法，TryParse 返回 true，结果将为 2495，这可能不是您想要的。

* * *

## 回答 #6

> 赞同：0
> 
>             
> 
> 时间：2012-03-12T13:39:55.740

我的版本适用于分隔符`'.'`  和`','`：

```
public static double? GetDoubleFromString(string strNum)
        {
            double num = 0;
            strNum = strNum.Replace(',', '.');

            if (double.TryParse(strNum, NumberStyles.Any, CultureInfo.GetCultureInfo("en-US"), out num))
                return num;

            return null;
        } 
```

# workflow-foundation - 适用于 Windows WF 的状态机工作流设计器

> ID：905755
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-05-25T07:34:33.890
> 
>         
> 
> 标签：workflow-foundation, state-machine

我想要一个状态机 Windows WF 的设计器，我从微软找到了一个示例代码，并在 Windows 应用程序中托管了序列工作流的视觉工作室设计师，但我不能将它用于状态机，是否有任何状态机的设计师或可以我在另一个 Windows 应用程序中托管 Visual Studio？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-05-25T07:55:59.260

相同的可托管设计器控件支持顺序和状态机工作流编辑。这里提到了一些如何保存和恢复状态节点布局的示例：

[http://msdn.microsoft.com/en-us/library/aa480213.aspx](http://msdn.microsoft.com/en-us/library/aa480213.aspx)

# c# - c#：将变量复制到字节数组

> ID：905764
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-05-25T07:38:00.593
> 
>         
> 
> 标签：c#, built-in-types

如何在 C# 中将 double、int、bool 或其他内置类型复制到字节数组？

我需要这样做才能使用该`FileStream.Write()`方法。

* * *

## 回答 #1

> 赞同：8
> 
>             
> 
> 时间：2009-05-25T07:40:02.710

`BitConverter.GetBytes()`可以将原始类型转换为字节数组。

* * *

## 回答 #2

> 赞同：4
> 
>             
> 
> 时间：2009-05-25T08:17:26.783

您可以使用 a`BinaryWriter`将值写入文件流，而不是将每个值转换为字节数组。

例子：

```
using (BinaryWriter writer = new BinaryWriter(fileStream)) {
   writer.Write(1);
   writer.Write(1.0);
   writer.Write(true);
   writer.Write("Hello");
} 
```

# c++ - 在 C++ 中分配和释放 char *

> ID：905765
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-05-25T07:38:45.787
> 
>         
> 
> 标签：c++, malloc, heap-memory, free

大家好，我遇到了一个我无法弄清楚的堆损坏错误。

```
char * c = (char *) malloc(1);
// main loop
_gcvt_s(c, 100, ball->get_X_Direction(), 10);
      if(pushFont(c, (SCREEN_WIDTH - 30), (SCREEN_HEIGHT - 40), message, screen,
font, textColor) == false)
      {
           //return 1; // error rendering text.
      }
// end main loop
free(c); 
```

上面的代码是我唯一一次在 _gcvt_s 和 pushFont() 中使用 c 指针，它只接受一个 char * 作为它的第一个参数，并将文本放在屏幕上。除此之外我不使用c。当我尝试在主循环之后释放 c（我认为我应该这样做）时，我收到一条错误消息，指出 Visual Studio 已获得堆错误（堆损坏）。

注释掉对 pushFont 的调用我仍然收到错误。

谁能向我解释为什么释放一个字符（我在堆上分配的 1 个字节）会给我一个堆损坏？

最后，我的主循环做了很多事情，我和一个伙伴正在用 WinSocket 制作乒乓球游戏，主体的其余部分是游戏的循环。我认为没有必要发帖，但如果有必要，我会用整个主循环更新我的帖子，但我相信我对 malloc() 和 free() 的理解刚刚结束。

谢谢大家，

* * *

## 回答 #1

> 赞同：11
> 
>             
> 
> 时间：2009-05-25T07:42:50.550

_gcvt_s 不使用第二个参数作为分配缓冲区的最大大小吗？您分配了 1 个字节，但告诉 _gcvt_s 有 100 个。所以它很乐意将多达 100 个字节写入缓冲区，从而破坏您的堆。然后免费崩溃。如果您打算访问 100 个字节，请分配 100 个字节。

编辑：听起来您需要学习 C 如何存储和操作字符串。C 将字符串作为单独的字节存储在连续的内存中，后跟一个额外的字符来指示字符串的结尾。这个额外字符的 ASCII 值为 0（不是字符“0”，即 ASCII 48）。所以如果你有一个像“HELLO”这样的字符串，它需要6个字节来存储——5个字母和终止符中的每一个。

为了让 _gcvt_s() 将值返回到缓冲区，您需要包含足够的字节用于转换和额外的终止字节。在 _gcvt_s() 的情况下，您要求 10 个字符的精度。但是您还必须为小数点（潜在的负号）保留空间。

根据这个[文档]( [http://msdn.microsoft.com/en-us/library/a2a85fh5(VS.80).aspx)](http://msdn.microsoft.com/en-us/library/a2a85fh5(VS.80).aspx))，在标题中有一个#define 用于缓冲区的最大必要大小： _CVTBUFSIZE。那里的示例应该可以帮助您解决这个问题。

* * *

## 回答 #2

> 赞同：4
> 
>             
> 
> 时间：2009-05-25T07:47:39.980

根据文档，我可以找到`_gcvt_s()`一个缓冲区和该缓冲区的长度作为前两个参数。

```
errno_t _gcvt_s( 
   char *buffer,
   size_t sizeInBytes,
   double value,
   int digits 
); 
```

您的`malloc()`ed 缓冲区长 1 个字节，您告诉`_gcvt_s()`它长 100 个字节。我会开始在这里寻找。

* * *

## 回答 #3

> 赞同：3
> 
>             
> 
> 时间：2009-05-25T07:44:02.263

为什么需要使用堆？如果您只需要 1 个字符的空间，您不能只使用局部变量：

```
char c;
_gcvt_s(&c... 
```

?

* * *

## 回答 #4

> 赞同：2
> 
>             
> 
> 时间：2009-05-25T10:51:44.070

您需要一个以上的字节来存储浮点数。分配比 1 字节更实用的长度...

你也真的不需要堆，尝试一个（稍微过大的）16字节缓冲区并给_gcvt_s正确的缓冲区长度（而不是你给它的神奇的100）。当你在它的时候，去魔化你的常数。

```
const unsigned int cuFloatStringLength = 16;
const unsigned int cuFloatStringPrecision = 10;

char c[cuFloatStringLength];

_gcvt_s( c, cuFloatStringLength, ball->get_X_Direction(), cuFloatStringPrecision ); 
```

那么问题应该就消失了。

# openid - OpenID 问题 - 多个电子邮件帐户

> ID：905769
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2009-05-25T07:39:51.867
> 
>         
> 
> 标签：openid

由于我有多个电子邮件帐户，每当我被要求登录并访问我的 OpenID 提供商页面时，我很有可能最终选择了一个我以前没有使用过的电子邮件。

事实上，当这种情况发生时，我什至可以拥有相同的“显示名称”，尽管帐户完全不同！

事实上，在 Stackoverflow 本身中，我就犯了这个错误，不得不提出一个特殊的请求来合并多个 OpenID。

我的问题是其他 Web 应用程序人员 - 这是实现 OpenID 的主要问题之一吗？您是否经常收到帐户合并请求？有没有办法克服这个问题？

* * *

## 回答 #1

> 赞同：3
> 
>             
> 
> 时间：2009-05-28T19:46:43.717

这是个问题，我同意。接受 OpenID 的站点可以通过以下几种方式解决此问题：

1.  允许帐户链接到多个 OpenID，以便用户可以使用他们认为的任何一个登录，并且它会正确登录。

2.  通过 sreg/ax 扩展程序请求电子邮件地址，如果在登录期间未看到 OpenID，则在检查电子邮件地址与具有该电子邮件地址的现有帐户之前，并询问用户他们是否打算使用不同的 OpenID 登录（自愿合并它们会带来安全风险，因此仍应要求用户使用原始标识符登录）。

3.  允许用户在发生时合并帐户。

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2009-05-27T11:10:37.717

我认为这根本不是 OpenID 的问题。大多数人没有平等使用的多个电子邮件帐户，即使是这样，真正的问题发生在此之前： 网络效应或网络饥饿：网站不消费是因为人们不使用它，人们不使用它'不要使用它，因为他们不知道它是什么，如何使用它，或者它的用途。

要获得更广泛的采用，还有一个问题需要解决，那就是人们希望在您的网站上开设一个帐户，而不是已经拥有一个帐户或必须去其他地方开设一个帐户。我认为有几种方法可以解决这个问题，一种是允许创建自定义帐户并使用 OpenID，大多数网站都这样做（Stack Overflow 除外）。但是我仍然很失望，因为我的妻子从来没有问过我这个 OpenID 是什么东西。如果她能在任何地方看到它，她会问我的。这是一个缓慢的过程

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-05-25T07:56:15.767

饼干呢？

编辑：我的意思是，向具有 2 个或更多 id 的人发送 cookie 以自动登录他们上次使用的帐户。

# iphone - 如何布局 iPhone 页面

> ID：905778
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-05-25T07:42:27.963
> 
>         
> 
> 标签：iphone, objective-c, layout, user-interface, interface-builder

我想在 iPhone 应用程序中实现描述页面。它是向下钻取导航结构中的最后一页，需要包含标题、描述、图标、大图、日期和一些用户可以单击以激活另一个应用程序的按钮。信息来自外部来源，标题、描述和图像大小各不相同。

我见过各种方法，例如在表格单元格中布置每条信息，以及创建看起来像网页的视图。由于内容大小可变，我使用标准 UIView 和 UILabel 遇到了布局问题。

看看其他应用程序，我认为 Facebook 和 App Store 的布局最吸引人，并且可以很好地处理可变大小的内容。我想知道获得有吸引力的布局的最简单方法是什么，以及哪种方式会产生最好的（如最佳外观）结果。

* * *

## 回答 #1

> 赞同：0
> 
>             
> 
> 时间：2009-05-25T08:44:00.380

首先你很幸运，因为很多 facebook UI 的东西都可以在 three20 项目中使用

[http://github.com/joehewitt/three20/tree/master](http://github.com/joehewitt/three20/tree/master)

您可以在其中使用很多模板，这些模板可能会解决您的所有问题，但是文档有点简单，可能需要一些逆向工程。

此外，您没有提到 UIscrollview 这可能会帮助您在页面上获得包含更多信息的布局。

不幸的是，要获得最好看的应用程序，您需要关注细节（或付钱给这样做的人）阅读苹果人机界面指南，因为他们似乎知道自己在做什么。

# java - 如何使用套接字通道读取和写入数据并接受连接

> ID：905781
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2009-05-25T07:43:41.860
> 
>         
> 
> 标签：java, sockets, nio, channel

我使用 java NIO 创建了一个简单的服务器客户端应用程序。我在那里使用了一个选择器来接受连接、读取数据和写入。但我想要一个应用程序，其中 1 个选择器将忙于接受连接，而第 2 个选择器将读取数据，而第 3 个选择器将写入数据。

意味着我不想将所有负载放入单个选择器中。

如何做到这一点？有没有在线帮助

谢谢迪帕克。

// 创建选择器 Selector selector = Selector.open();

```
 // Create two non-blocking server sockets on 80 and 81
    ServerSocketChannel ssChannel1 = ServerSocketChannel.open();
    ssChannel1.configureBlocking(false);
    ssChannel1.socket().bind(new InetSocketAddress(80));

    // Register both channels with selector
    ssChannel1.register(selector, SelectionKey.OP_ACCEPT);

    while (true) {
        // Wait for an event
        selector.select();

        // Get list of selection keys with pending events
        Iterator it = selector.selectedKeys().iterator();

        // Process each key
        while (it.hasNext()) {
            // Get the selection key
            SelectionKey selKey = (SelectionKey)it.next();

            // Remove it from the list to indicate that it is being processed
            it.remove();

            // Check if it's a connection request
            if (selKey.isAcceptable()) {
                // Get channel with connection request
                ServerSocketChannel ssChannel = (ServerSocketChannel)selKey.channel();

                // Accepting a Connection on a ServerSocketChannel
                SocketChannel sChannel = serverSocketChannel.accept();

    // If serverSocketChannel is non-blocking, sChannel may be null
    if (sChannel == null) {
        // There were no pending connection requests; try again later.
        // To be notified of connection requests,

    } else {
        // Use the socket channel to communicate with the client

    }

            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
>             
> 
> 时间：2009-05-25T14:37:50.667

可以使用 . 注册具有多个选择器的通道`register(Selector sel, int ops)`。然后在每个选择器上注册不同的兴趣操作：

```
// After the accepting a connection:
SelectionKey readKey = sChannel.register(readSelector, SelectionKey.OP_READ);

// When you have something to write:
SelectionKey writeKey = sChannel.register(writeSelector, SelectionKey.OP_WRITE); 
```

* * *

## 回答 #2

> 赞同：5
> 
>             
> 
> 时间：2016-03-22T08:59:24.743

通常，在非阻塞 tcp 服务器上，先接受，然后读取，然后写入，

您需要按此顺序注册选择器才有意义。

* * *

## 示例代码

这是非阻塞io的完整示例：

**TcpChannelTest.java**：（*一个**TestNG**测试类*）

```
import java.io.IOException;
import java.net.InetSocketAddress;
import java.nio.ByteBuffer;
import java.nio.channels.SelectionKey;
import java.nio.channels.Selector;
import java.nio.channels.ServerSocketChannel;
import java.nio.channels.SocketChannel;
import java.nio.charset.StandardCharsets;
import java.util.Iterator;
import java.util.Set;

import org.testng.annotations.Test;

/**
 * tcp channel test
 * 
 * @author eric
 * @date Sep 2, 2012 9:17:40 PM
 */
public class TcpChannelTest {
    public String serverHost = "localhost";
    public int serverPort = 12345;

    private ServerSocketChannel server;
    private int clientSerial = 0;
    private int clientCount = 5;

    // test tcp non-blocking channel,
    @Test
    public void testTcpNonBlockingChanne() throws IOException, InterruptedException {
        // start server
        startServerNonBlocking();

        Thread.sleep(500); // wait server to be ready, before start client,

        // start clients
        for (int i = 0; i < clientCount; i++) {
            startClientOnce();
        }

        // shutdown server,
        Thread.sleep(500); // wait client to be handled,
        shutdownServer();
    }

    // start non-blocking server,
    private void startServerNonBlocking() throws IOException {
        new Thread(new Runnable() {
            @Override
            public void run() {
                try {
                    server = ServerSocketChannel.open();
                    server.socket().bind(new InetSocketAddress(serverHost, serverPort)); // bind,
                    server.configureBlocking(false); // non-blocking mode,

                    Selector selector = Selector.open();
                    server.register(selector, SelectionKey.OP_ACCEPT);

                    while (true) {
                        selector.select();
                        Set<SelectionKey> readyKeys = selector.selectedKeys();

                        // process each ready key...
                        Iterator<SelectionKey> iterator = readyKeys.iterator();
                        while (iterator.hasNext()) {
                            SelectionKey key = (SelectionKey) iterator.next();
                            iterator.remove();

                            if (key.isAcceptable()) {
                                SocketChannel client = server.accept();
                                System.out.printf("[%s]:\t%s\n", Thread.currentThread().getName(), "accept connection");
                                client.configureBlocking(false);

                                // prepare for read,
                                client.register(selector, SelectionKey.OP_READ);
                            } else if (key.isReadable()) {
                                // read
                                SocketChannel client = (SocketChannel) key.channel();
                                ByteBuffer inBuf = ByteBuffer.allocate(1024);
                                while (client.read(inBuf) > 0) {
                                    System.out.printf("[%s]:\t%s\n", Thread.currentThread().getName(), new String(inBuf.array(), StandardCharsets.UTF_8));
                                }

                                // prepare for write,
                                client.register(selector, SelectionKey.OP_WRITE);
                            } else if (key.isWritable()) {
                                SocketChannel client = (SocketChannel) key.channel();
                                String response = "hi - from non-blocking server";
                                byte[] bs = response.getBytes(StandardCharsets.UTF_8);
                                ByteBuffer buffer = ByteBuffer.wrap(bs);
                                client.write(buffer);

                                // switch to read, and disable write,
                                client.register(selector, SelectionKey.OP_READ);
                            }
                        }
                    }
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        }, "t-server-threads").start();
    }

    // close server,
    private void shutdownServer() {
        try {
            if (server != null) {
                server.close();
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    /**
     * <p>
     * tcp client - via channel,
     * </p>
     * <p>
     * It send once request.
     * </p>
     * 
     * @throws IOException
     */
    private void startClientOnce() throws IOException {
        // start client in a new thread
        new Thread(new Runnable() {
            @Override
            public void run() {
                try {
                    SocketChannel client = SocketChannel.open(new InetSocketAddress(serverHost, serverPort));

                    // write
                    String request = "hello - from client [" + Thread.currentThread().getName() + "}";
                    byte[] bs = request.getBytes(StandardCharsets.UTF_8);
                    ByteBuffer buffer = ByteBuffer.wrap(bs);
                    while (buffer.hasRemaining()) {
                        client.write(buffer);
                    }

                    // read
                    ByteBuffer inBuf = ByteBuffer.allocate(1024);
                    while (client.read(inBuf) > 0) {
                        System.out.printf("[%s]:\t%s\n", Thread.currentThread().getName(), new String(inBuf.array(), StandardCharsets.UTF_8));
                    }

                    client.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        }, "t-channelClient-" + clientSerial++).start();
    }
} 
```

# delphi - Delphi中的设计时拖放？

> ID：905788
> 
>         
> 
> 赞同：7
> 
>         
> 
> 时间：2009-05-25T07:47:19.810
> 
>         
> 
> 标签：delphi, controls, drag-and-drop, design-time

在 Delphi 2006（我认为）引入 TFlowPanel 和 TGridPanel 之前，我做了一个概念上相似的控件。它仍然做了一些那些控件不做的事情，当我将代码升级到 Delphi 2009 时，我决定也添加一些增强功能。

现在，子控件的顺序由它们的创建顺序决定。FlowPanel 和 GridPanel 显示了使用 ControlIndex 和其他过滤属性的更好方法，但我想知道是否有办法在设计时处理拖放重新排序？据我所知，将编辑控件拖放到我的面板上不会调用我在设计时可以访问的任何内容。

我半幻想着有一种方法可以直接检测放置操作，或者检测控件何时移动，以便我可以确定它应该去哪里。

有任何想法吗？

**更新：**
好的，让它工作。容器控件已经覆盖了 AlignControls 来管理控件的放置。当您拖放嵌套控件时，将再次调用 AlignControls。然后，我将控件的新坐标与列表中的其他控件进行比较，并将其移动到适当的位置。

我必须解决几个问题（主要与对 AlignControls 的许多调用有关），但基本概念很简单。感谢所有评论者的帮助。

* * *

## 回答 #1

> 赞同：5
> 
>             
> 
> 时间：2009-05-25T15:13:58.987

您不能将已经在表单上的控件拖放到面板上。拖动仅用于*移动*控件，而不用于更改其父级。要更改父级，请剪切并粘贴。

如果控件已经在您的面板上，并且您想将其移动到面板上的另一个位置，则面板可以通过覆盖该`TWinControl.AlignControls`方法来控制布局。当一个控件被移动时，它的`SetBounds`方法被调用，其中发生的事情是它调用`AlignControl(Self)`它的父窗口。那叫`AlignControls`. 查看*Controls.pas*，您会发现这是一个复杂的方法，但它负责控件上子项的布局，而这正是您计划更改的内容。

* * *

## 回答 #2

> 赞同：3
> 
>             
> 
> 时间：2009-05-26T03:35:13.927

也许其中一些建议可能会有所帮助。

您可以在设计器中重新设置控件的父级，而无需进行剪切和粘贴。查看结构窗格，只需将可视控件拖动到结构窗格中另一个父级的节点即可。如果您在流程面板中有东西，请将所有内容拖出流程面板，然后按照您希望它们的顺序将它们拖回。

（您可以通过这种方式重新设置任何视觉控件的父级，而无需更改其父级以外的任何内容。我强烈建议您这样做。）

您可以将表单作为文本查看，并在其中移动声明顺序——但显然在直接编辑“资源”文件时需要小心。

You can set tab order in the designer, so you could make a different control based on tab order that works as you want. You can right click on the form and change the creation order of the non-visual controls, but that doesn't work with visual controls. 

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-05-25T14:40:28.913

您是否尝试为您的网格组件编写一个“OnDragDrop”事件，以检查您的组件是否处于设计模式？

我还没有写过这样的组件，但我不明白为什么事件不应该触发。

# c# - 动态加载 .NET 程序集

> ID：905792
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-05-25T07:49:00.477
> 
>         
> 
> 标签：c#, .net, vb.net, assemblies

我正在编写一个程序，我希望该程序支持插件。我创建了一个程序必须实现的接口。我正在使用我的主程序中的以下代码来调用插件：

```
Dim asm As Assembly = Assembly.LoadFrom(ff.FullName)
' Get the type
Dim myType As System.Type = asm.GetType(asm.GetName.Name + "." + asm.GetName.Name)
' If the type is null then we try again without the root namespace name
If myType Is Nothing Then myType = asm.GetType(asm.GetName.Name)
' Check to see if the plugin implements the required Interface
Dim IsMyPlugin As Boolean = GetType(LGInterfaces.ILGSQLPlugin).IsAssignableFrom(myType)
Dim ActivePlugin As New PluginObject()
If IsMyPlugin Then
    ActivePlugin.Plugin = CType(Activator.CreateInstance(myType), LGInterfaces.ILGPlugin) 
```

一切正常，我可以访问我暴露的属性，除了一个我无法弄清楚的问题。在我的插件中，我使用以下代码来公开一个属性：

```
Private m_PanelObject As Windows.Forms.Control

Public Property PanelObject() As Windows.Forms.Control
Get
     Return m_PanelObject
End Get
Set(ByVal value As Windows.Forms.Control)
    m_PanelObject = value
End Set 
```

好的，所以我从我的主程序中设置了这个属性，一切正常。除了，过了一会儿，m_PanelObject 出于某种奇怪的原因被设置为 Nothing。我没有在程序中的任何地方将其设置为 Nothing，插件代码中也没有将其设置为 Nothing 的位置。那么我在这里错过了什么？我相信这将是非常明显的。提前致谢

* * *

## 回答 #1

> 赞同：3
> 
>             
> 
> 时间：2009-05-25T07:55:41.837

首先，看看[MEF](http://www.codeplex.com/MEF)，因为您无缘无故地重新发明了一个轮子。

至于您最初的问题，请确保您的插件实例不会被处理或`PanelObject`分配`Nothing`或类似的东西：.NET 垃圾收集器与此问题无关。

# java - Java，BigDecimal。分工问题

> ID：905795
> 
>         
> 
> 赞同：15
> 
>         
> 
> 时间：2009-05-25T07:50:40.833
> 
>         
> 
> 标签：java, division, bigdecimal

我正在尝试计算百分比“因子”。也就是说，给定 20%，将其转换为 0.2（我的意图是稍后将值乘以该值并获得 20% 的值）。

无论如何，这个问题与这段代码有关：

```
public static void main(String[] args) {
    int roundingMode = BigDecimal.ROUND_FLOOR;
    BigDecimal hundred = new BigDecimal("100");
    BigDecimal percentageFactor = null;
    BigDecimal percentage = new BigDecimal("20");
    BigDecimal value = new BigDecimal("500");
    percentageFactor = percentage.divide(hundred, roundingMode);
    float f = percentage.floatValue() / hundred.floatValue();
    f = value.floatValue() * f;
    BigDecimal aux = value.multiply(percentageFactor);
    System.out.println("factor:"+percentageFactor.toString());
    System.out.println("final falue:"+aux.toString());
    System.out.println("Float Value:"+f);       
} 
```

我希望这样的结果是这样的：

```
factor: 0.2
final value: 100
float value: 100 
```

而是`percentage.divide(hundred, roundingMode);`返回零，因此我得到：

```
factor:0
final falue:0
Float Value:100.0 
```

我究竟做错了什么？如何正确划分两个大小数？

顺便说一句，我使用的`BigDecimal`是因为我将计算货币百分比，所以我想控制四舍五入。

* * *

## 回答 #1

> 赞同：17
> 
>             
> 
> 时间：2009-05-25T12:45:43.263

我认为最好的解决方案是在划分时设置请求的比例：在这种情况下可能是 2。

```
 var hundred = new BigDecimal(100);
    var percentage = new BigDecimal(20);
    var value = new BigDecimal(500);

    var percentageFactor = 
        percentage.divide(hundred,2, BigDecimal.ROUND_HALF_UP);

    value = value.multiply(percentageFactor);
    System.out.println("final value:"+ value); 
```

最终值：`100.00`

乘法使用因子 (0+2) 的比例，但也可以指定。

我将`ROUND_HALF_UP`用于会计（在我的立法中）或`ROUND_EVEN`（用于统计）用于舍入模式。

* * *

## 回答 #2

> 赞同：9
> 
>             
> 
> 时间：2009-05-25T08:10:09.543

的比例`new BigDecimal("20")`为零，因为那里没有小数点。这意味着您`percentage.divide(hundred, BigDecimal.ROUND_FLOOR)`将产生零（实际上是`int(20/100)`or `0`）。

如果您真的想做小数`new BigDecimal("20.00")`的东西，请使用正确设置比例，或使用其他构造函数之一来专门设置比例。

这是对`20`to的简单更改的输出`20.00`，并带有您的拼写错误:-)

```
factor:0.20
final falue:100.00
Float Value:100.0 
```

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-05-25T15:08:55.033

float 只有 6 位数的精度，几乎不是一个好的选择，我建议你使用 double 代替。（或者 BigDecimal 在某些情况下可能会更好）

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2019-08-06T08:52:10.373

原因`factor`是代码中的 0 而不是 0.2 是因为

1.  您已将 RoundingMode 设置为 FLOOR（这意味着 ROUND DOWN），并且

2.  您的`percentage`变量的隐式比例为 0（任何`BigDecimal`从整数初始化但未指定比例的 s 的比例均为 0）

因此，当您调用除法时，您将四舍五入任何小数，并且您保持比例为 0，因此 0.2 被四舍五入为 0。

要获得正确的号码，您可以

1.  明确指定比例，或

2.  因为您知道您是除以 100，所以您可以只使用该`BigDecimal#divide(BigDecimal)`方法（不提供 scale 或 RoundingMethod）。在您的情况下，该方法不会抛出`ArithmeticException`，因为不可能有非终止小数（想想 20 / 100 = 0.2、20 / 10000 = 0.002 - 除以 100 时小数总是终止）。

但是，如果您要除以另一个数字，例如 3，那么您需要指定比例，因为可能存在非终止小数（想想 10 / 3 = 3.3333333333...）

# visual-studio-2008 - 已安装 MVVM Visual Studio 模板，但未显示在模板列表中

> ID：905801
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-05-25T07:52:24.027
> 
>         
> 
> 标签：visual-studio-2008, visual-studio-2005, mvvm

我安装了[MVVM Visual Studio 模板](http://wpf.codeplex.com/Wiki/View.aspx?title=WPF%20Model-View-ViewModel%20Toolkit)。

它现在出现在：

*   Visual Studio C# Express 2008（英文）

但不在：

*   Visual Studio 2008（德语）

*   Visual Studio 2005（德语）

我也在另一台机器上复制了这个。

有没有人能够以**英语以外的任何语言在完整版 Visual Studio 中安装 MVVM Visual Studio 模板？**

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-05-27T11:08:57.050

我们刚刚用 Express 创建了一个 MVVM 模板，在 VS 2008 中打开它，然后执行 File | 导出模板，现在它会在我们创建新项目时显示在模板中。

# python - HttpResponseRedirect django + facebook

> ID：905803
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-05-25T07:53:37.083
> 
>         
> 
> 标签：python, django, facebook

我有一个带有 2 个按钮的表单。根据按钮点击用户被带到不同的网址。视图功能是：

```
friend_id = request.POST.get('selected_friend_id_list')

history = request.POST.get('statushistory')
if history:
    print "dfgdfgdf"
    return HttpResponseRedirect('../status/')

else:
    return direct_to_template(request, 'friends_list.fbml',
                          extra_context={'fbuser': user,
                                         'user_lastname':user_lastname,
                                         'activemaintab':activemaintab,
                                         'friends':friends,
                                         'friend_list':friend_list}) 
```

对于模板：

```
<input type="submit"  value="Calendar View" name="calendarview"/>
<input type="submit"  value="Status History" name="statushistory"/>
</form 
```

所以我的问题是页面没有重定向到 url 。如果我制作 HttpResponseRedirect('../') 它会给我正确的页面，但 url 没有改变。

当前页面=“朋友列表/状态/所以在提交表单后我的网址应该是frinedlist/list/所以这应该可以工作HttpResponseRedirect（'../list/'）但网址没有改变。知道吗？我该如何解决这个谢谢

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-05-25T10:56:03.517

“所以我的问题是页面没有重定向到 url。如果我让 HttpResponseRedirect('../') 它给了我正确的页面，但 url 没有改变。”

“URL”我猜你的意思是“浏览器中显示的 URL”。如果您的问题非常精确，它会有所帮助。

首先，您必须提供一个绝对 URL。  [http://docs.djangoproject.com/en/dev/ref/request-response/#django.http.HttpResponseRedirect](http://docs.djangoproject.com/en/dev/ref/request-response/#django.http.HttpResponseRedirect)

从标准（RFC 2616，第 14.30 节）中可以清楚地看出，绝对 URL 是必需的。某些浏览器可能会容忍相对 URL。有些没有。

其次，您不应该在程序的任何地方使用相对 URL。

你应该使用[reverse](http://docs.djangoproject.com/en/dev/topics/http/urls/#reverse)。

```
from django.core.urlresolvers import reverse

def myview(request):
    theURL= reverse('path.to.viewFunction')
    return HttpResponseRedirect(theURL) 
```

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-05-25T08:50:25.750

为什么需要使用相对 url？不能使用绝对网址吗？

# opencv - 如何使用 cvLoadImage 加载到 OpenCV 窗口？

> ID：905813
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-05-25T07:59:51.983
> 
>         
> 
> 标签：opencv

我在硬盘上有图像文件。

我使用“cvLoadImage”来加载它并将其显示在 OpenCV 的窗口上。虽然这个文件存在，但是，我得到一个空白窗口。我无法解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-06-22T15:16:58.950

这是您想要执行的代码：

```
IplImage * image = cvLoadImage("yourpath", CV_LOAD_IMAGE_COLOR);

cvNamedWindow("Window name");
cvShowImage("Window name", image);
cvWaitKey(); //To wait until you pressed a key

cvReleaseImage(&image); 
```

告诉我你得到什么错误信息（如果有的话）。

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2013-03-24T17:54:31.720

您只需输入“waitKey(1);” 在你显示图像（XXX）之后；。

这将使计算机有喘息的时间来显示您要显示的图像。

# sql - TSQL 逗号分隔

> ID：905818
> 
>         
> 
> 赞同：4
> 
>         
> 
> 时间：2009-05-25T08:01:30.153
> 
>         
> 
> 标签：sql, sql-server, tsql

我正在编写一个导出函数，我需要将联系人导出到 Excel，但我遇到了技术障碍——或者我的 SQL 技能上的差距更接近事实。;)

这是场景：我在数据库中有一堆联系人。每个联系人可以有许多不同的角色，例如，一个联系人可以是 C# 开发人员和 DBA，或者是 DBA 和 IT 经理。这些被分成三个表，如下所示：

```
-------------------   -------------------   -------------------
*     Contact     *   *   ContactRole   *   *      Role       *
-------------------   -------------------   -------------------
* ID              *   * ContactID       *   * ID              *
* Name            *   * RoleID          *   * Name            *
* Address         *   -------------------   -------------------
------------------- 
```

不太难跟上。有一组联系人和一组角色。它们由各自 ID 上的 ContactRole 表连接。

当我导出联系人时，我需要在导出中有一个列，所有角色用逗号分隔，比如`C# Developer, DBA`or `DBA, IT-manager`。导出将在 ASP.NET/C# 代码隐藏中完成，所以我想我可以在代码中执行此操作，但我感觉可以在 SQL 中执行此操作。

数据来自 SQL Server 2005。

* * *

## 回答 #1

> 赞同：6
> 
>             
> 
> 时间：2009-05-26T22:11:53.327

仅仅因为您使用 SQL Server 2005（如果您很幸运并且正确设置了所有 XML 设置），下面是您的简单 SQL 查询（纯 SQL，没有函数）：

```
SELECT  c.ID, c.Name, c.Address, 
    (   SELECT      r.Name + ','
        FROM        "ContactRole" cr
        INNER JOIN  "Role" r
                ON  cr.RoleID = r.ID
        WHERE       cr.ContactID = c.ID
        ORDER BY    r.ID --r.Name
        FOR XML PATH('')
    ) AS "Roles"
FROM    "Contact" c 
```

要测试它是否适合您，只需执行下面的整个代码段：

```
WITH "Contact" (ID, Name, Address) AS (
                SELECT 1, 'p1-no role', NULL
    UNION ALL   SELECT 2, 'p2-one role', NULL
    UNION ALL   SELECT 3, 'p3-two roles', NULL
)
, "Role" (ID, Name)AS (
                SELECT 1, 'teacher'
    UNION ALL   SELECT 2, 'student'
)
, "ContactRole" (ContactID, RoleID) AS (
                SELECT 2, 1
    UNION ALL   SELECT 3, 1
    UNION ALL   SELECT 3, 2
)

SELECT  c.ID, c.Name, c.Address, 
    (   SELECT      r.Name + ','
        FROM        "ContactRole" cr
        INNER JOIN  "Role" r
                ON  cr.RoleID = r.ID
        WHERE       cr.ContactID = c.ID
        ORDER BY    r.ID --r.Name
        FOR XML PATH('')
    ) AS "Roles"
FROM    "Contact" c 
```

你应该得到以下结果：

```
ID          Name         Address     Roles
----------- ------------ ----------- ------------------
1           p1-no role   NULL        NULL
2           p2-one role  NULL        teacher,
3           p3-two roles NULL        teacher,student, 
```

* * *

## 回答 #2

> 赞同：5
> 
>             
> 
> 时间：2009-05-25T08:22:50.113

您可以使用**CLR 用户定义的聚合**来获得此类结果。用户定义的聚合可以像用户定义的聚合（例如 SUM 或 MAX）一样被调用，并且它不使用游标。

```
using System;
using System.Data;
using Microsoft.SqlServer.Server;
using System.Data.SqlTypes;
using System.IO;
using System.Text;

[Serializable()]
[SqlUserDefinedAggregate(
    Format.UserDefined,
    IsInvariantToNulls=true,
    IsInvariantToDuplicates=false,
    IsInvariantToOrder=false,
    MaxByteSize=8000)]
public class Concat : IBinarySerialize
{
    #region Private fields
    private string separator;
    private StringBuilder intermediateResult;
    #endregion

    #region IBinarySerialize members
    public void Read(BinaryReader r)
    {
        this.intermediateResult = new StringBuilder(r.ReadString());
    }

    public void Write(BinaryWriter w)
    {
        w.Write(this.intermediateResult.ToString());
    }
    #endregion

    #region Aggregation contract methods
    public void Init()
    {
        this.separator = ", ";
        this.intermediateResult = new StringBuilder();
    }

    public void Accumulate(SqlString pValue)
    {
        if (pValue.IsNull)
        {
            return;
        }

        if (this.intermediateResult.Length > 0)
        {
            this.intermediateResult.Append(this.separator);
        }
        this.intermediateResult.Append(pValue.Value);
    }

    public void Merge(Concat pOtherAggregate)
    {
        this.intermediateResult.Append(pOtherAggregate.intermediateResult);
    }

    public SqlString Terminate()
    {
        return this.intermediateResult.ToString();
    }
    #endregion
} 
```

在[这篇文章](http://chopeen.blogspot.com/2007/05/sql-clr-user-defined-aggregate-notes-on.html)中，您将找到代码以及我遇到的调试问题的解决方案。

**我在生产环境**中使用了这个聚合，它表现得非常好。

* * *

## 回答 #3

> 赞同：4
> 
>             
> 
> 时间：2009-05-25T08:24:35.147

试试这个

```
declare @Roles nvarchar(max)

select @Roles = case when @Roles is null then '' else @Roles + ', ' end + Role.Name
from  Role
inner join ContactRole on Role.ID = ContactRole.RoleID
where ContactRole.ContactID = @ContactID

select @Roles 
```

更新：

上面的代码涵盖了单个联系人的功能。您可以使用参数 @ContactID 创建一个标量函数并从

```
Select Name, dbo.GetContactRoles(ID) From Contact 
```

* * *

## 回答 #4

> 赞同：2
> 
>             
> 
> 时间：2009-05-26T21:35:57.830

您可以在单个查询中执行此操作，但我不知道性能是好是坏。

```
SELECT [<group field 1>], [<group field 2>], [etc...], (
    SELECT CAST([<field to list>] AS VARCHAR(MAX)) + 
        CASE WHEN (ROW_NUMBER() OVER (ORDER BY [<inner order-by REVERSED>]) = 1)
            THEN '' ELSE ',' END
        AS [text()]
    FROM [<inner table>]
    WHERE [<inner table join field>] = [<outer table join field>]
    AND [<inner conditions>]
    ORDER BY [<inner order-by>]
    FOR XML PATH('')) AS [<alias>]
FROM [<outer table]
WHERE [<outer conditions>] 
```

里面的 CASE 语句只是从列表中删除最后一个逗号——你必须为内部查询 ORDER BY 一些东西，然后在 CASE 语句中*反转*那个 ORDER BY。

* * *

## 回答 #5

> 赞同：1
> 
>             
> 
> 时间：2009-05-25T08:15:48.707

SQL查询：

```
SELECT Contact.Name as cName, Role.Name as rName FROM Contact 
JOIN ContactRole ON (Contact.ID==ContactRole.ContactID)
JOIN Role ON  ON (Role.ID==ContactRole.RoleID) 
```

接下来继续应用逻辑

```
forloop:
    array[ cName ] .= rName.', ';
endforloop; 
```

* * *

## 回答 #6

> 赞同：1
> 
>             
> 
> 时间：2009-05-25T08:43:16.903

编辑：根据[devio 的想法](https://stackoverflow.com/questions/905818/tsql-comma-separation/905853#905853)从表重写为标量函数，所以如果你喜欢这篇文章，请为他的答案投票。

如果不能选择 CLR 集成，您可以使用标量函数完成此操作：

```
create function dbo.getRole(
    @ContactId int)
returns varchar(8000)
as
begin
declare @Roles varchar(8000)

select 
    @Roles = case when @Roles is null then '' else @Roles + ', ' end + Role.Name
from Role
inner join ContactRole on Role.ID = ContactRole.RoleID
where ContactRole.ContactID = @ContactID

return @Roles 
```

然后，您可以调用此函数来计算每个联系人的逗号分隔列表：

```
SELECT c.id, c.name, dbo.getRole(ID) as Roles
FROM Contact 
```

* * *

## 回答 #7

> 赞同：0
> 
>             
> 
> 时间：2009-05-25T08:26:48.903

您可以编写一个函数，在传递联系人 ID 时将角色输出为逗号分隔的字符串。然后在您的选择语句中调用此函数:)

例如，如果您想获取客户以特定顺序订购的产品，您可以使用以下代码：

```
 create function FetchProducts(@orderid int) returns varchar(1000)
    as
    begin
    declare prods cursor for select ProductName from products where 
            productid in (select ProductId from [Order Details] 
              Where OrderId = @orderid)

    open prods

    declare @products  varchar(1000)
    declare @cp varchar(500)
    Select @products = ''
    fetch prods into @cp

    while @@fetch_status = 0
    begin
        SET @products = @products + ',' + @cp
        fetch prods into @cp
    end

    close prods
    deallocate prods

    return substring(@products, 2, len(@products)-1)
    end 
```

现在您可以按如下方式使用该功能：

```
 select orderid, orderdate, dbo.FetchProducts(orderid) 
from orders where customerid = 'BERGS' 
```

# asp.net - 突然动态创建的图像按钮的点击事件不会触发。

> ID：905820
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-05-25T08:01:51.510
> 
>         
> 
> 标签：asp.net, events, dynamic, imagebutton

我有一个动态创建联系人表的页面，如果联系人收到电子邮件，我还会创建一个带有点击事件的图像按钮。我在页面的其余部分有一个类似的功能，效果很好。我以前用过这个没有任何问题：

```
protected void CreateContactsList(IQueryable<AA_BranschFinder.Login.vyWebKontaktpersoner> lContacts) // Creates a table in the aspx from an IQueryable List 
        {
            if (1 == 1)
            {
                htmlTblContactsContent.Rows.Clear();

                foreach (var p in lContacts)
                {
                    HtmlTableRow tr = new HtmlTableRow();
                    HtmlTableCell tdName = new HtmlTableCell();
                    HtmlTableCell tdCompanyName = new HtmlTableCell();
                    HtmlTableCell tdEmailAdress = new HtmlTableCell();
                    tdName.InnerHtml = p.strFnamn + " " + p.strEnamn;
                    tdCompanyName.InnerHtml = p.strNamn;

                    //Displays an image if the contacts has an email
                    if (p.strEpost != null)
                    {
                        ImageButton imgEmail = new ImageButton();
                        imgEmail.CommandArgument = p.intKundID.ToString();
                        imgEmail.ImageUrl = "images/symbol_letter.gif";
                        imgEmail.CssClass = "letter";
                        imgEmail.Click +=new ImageClickEventHandler(imgEmail_Click);
                        tdEmailAdress.Controls.Add(imgEmail);
                    }
                    tr.Cells.Add(tdCompanyName);
                    tr.Cells.Add(tdEmailAdress);
                    tr.Cells.Add(tdName);
                    htmlTblContactsContent.Rows.Add(tr);
                }
            }

        }

        void imgEmail_Click(object sender, ImageClickEventArgs e)
        { 
```

*断点在这里*
                throw new NotImplementedException(); }

该页面位于 java 弹出窗口中。但是我有类似事件创建的分页号码，效果很好。但它们是链接按钮。

* * *

## 回答 #1

> 赞同：0
> 
>             
> 
> 时间：2009-05-25T08:51:09.773

您必须在每次回发时创建动态控件。还要检查 imgEmail_Click 事件处理程序中的代码；如果您使用 .NET IDE 的 Alt + Shift + F10 方法创建了事件处理程序方法，那么您可能没有删除此行 -

```
throw new Exception("The method or operation is not implemented."); 
```

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-05-25T08:09:52.743

你在哪里调用你的 Create 方法？您需要在其他事件处理程序运行之前执行此操作，最好是在 Page.Init 中。否则，回传到页面的数据被指示为一个尚不存在的控件触发的事件。

我还会确保你给你的 ImageButton 一个 ID。这将使调试变得容易得多。

```
imgEmail.ID = String.Format("EmailImageButton_{0}", p.intKundID); 
```

另一种解决方案是查看 Request 对象中的 __eventtarget 和 __eventargument 参数，并查看在那里单击了哪个按钮。

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-10-22T14:37:37.647

确保在您的回发中添加了事件处理程序。仅在初始页面加载时添加它时，将不会处理该事件！（刚刚遇到并自己解决了这个问题。）

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2009-05-25T10:47:16.733

如果我没有弄错 imagebutton 是一种提交类型的按钮，而 linkbutton 是带有 javascript 的 a-tag。也许改变你的图像按钮点击（即usesubmitbehaviour设置为false）会解决你的问题。

# cocoa - 从 NSArray 获取 NSIndexSet

> ID：905828
> 
>         
> 
> 赞同：7
> 
>         
> 
> 时间：2009-05-25T08:09:47.877
> 
>         
> 
> 标签：cocoa, arrays, nsarray, nsindexset

NSArray 有有用的方法来查找指定索引的对象

```
// To find objects by indexes
- (id)objectAtIndex:(NSUInteger)index
- (NSArray *)objectsAtIndexes:(NSIndexSet *)indexes

// To find index by object
- (NSUInteger)indexOfObject:(id)anObject 
```

但是，我想获取`NSIndexSet`给定对象的（多个索引）。就像是：

```
- (NSIndexSet *)indexesOfObjects:(NSArray *)objects 
```

不存在此方法`NSArray`。我错过了什么吗？有人知道另一种标准方法吗？否则我必须把它写成一个类别方法。

* * *

## 回答 #1

> 赞同：13
> 
>             
> 
> 时间：2013-02-06T16:00:05.453

较新的 NSArray 版本（OSX 10.6 和 iOS 4）提供了该`indexesOfObjectsPassingTest:`方法。

```
NSIndexSet *indexesOfObjects = [[array1 indexesOfObjectsPassingTest:^BOOL(id obj, NSUInteger idx, BOOL *stop) {
    return [array2 containsObject:obj];
}]; 
```

* * *

## 回答 #2

> 赞同：6
> 
>             
> 
> 时间：2009-05-31T14:37:33.033

使用集合来指定要查找的对象可能很有用，例如：

```
- (NSIndexSet *) indicesOfObjectsInSet: (NSSet *) set
{
    if ( [set count] == 0 )
        return ( [NSIndexSet indexSet] );

    NSMutableIndexSet * indices = [NSMutableIndexSet indexSet];

    NSUInteger index = 0;
    for ( id obj in self )
    {
        if ( [set containsObject: obj] )
            [indices addIndex: index];

        index++;
    }

    return ( [[indices copy] autorelease] );
} 
```

这需要访问数组中的每个对象，但至少只这样做一次，并且在这样做时使用快速枚举。使用 NSSet 并针对该集合测试数组中的每个对象也比测试是否包含在数组中快得多。

这里有一个潜在的优化，但在单个对象多次存储在接收数组中的情况下它会中断：

```
if ( [set containsObject: obj] )
{
    [indices addIndex: index];
    if ( [indices count] == [set count] )
        break;
} 
```

这样，如果您正在扫描包含 20,000 个项目的数组中的两个对象并且它们都在前十个对象之内，那么您将能够避免扫描数组中的其他 19,990 个对象。正如我所说，如果数组包含重复项，那将无济于事，因为它会在找到 2 个索引后立即停止（即使它们都指向同一个对象）。

**话虽如此**，我同意上面迈克的评论。您可能会在优化时间遇到一些痛苦。可能值得考虑不同的数据类型；例如，虽然 NSArray 似乎是简单平面容器最合乎逻辑的选择，但如果您实际上不需要排序信息，最好使用 NSSet 代替；这具有额外的优势，即它不会存储相同的对象（使用 计算`-isEqual:`）两次。如果您确实想跟踪重复项，但不需要排序，则可以使用 NSCountedSet，它的行为类似于 NSSet，除了它跟踪每个对象添加/删除的次数而不实际存储重复项。

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2009-05-25T08:15:32.217

据我所知，您必须实现自己的类别。

# asp.net - asp.net WebForms 模拟无状态环境中的状态

> ID：905835
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-05-25T08:12:51.287
> 
>         
> 
> 标签：asp.net, design-patterns

我正在寻找一种优雅的方式来正确配置 AppContext，这就是：

```
public class AppContext : IAppContext
{
    public AppContext()
    {
        Application = new AppStorage();    // app scoped hashtable
        Local = new LocalStorage();        // current thread scoped hashtable
        Session = new SessionStorage();    // session for some reasons hashtable
    }

    public CultureInfo Culture { get; set; }     // session scoped
    public UserProfile AuthProfile { get; set; } // session scoped

    public IStorage Application { get; private set; } // application 
    public IStorage Session { get; private set; }     // session
    public IStorage Local { get; private set; }       // current thread
    public IStorage WcfSession { get; private set; }  // wcf session

    private ISecurityWriter SecurityWriter;           // session scoped
    private ISecurityContext SecurityContext;         // session scoped

    /// 1\. START WEB CONTEXT
    /// 2\. START WCF CONTEXT
} 
```

目前我正在平衡a）

```
public class Global : HttpApplication
{
    public static AppContext Context;

    protected void Application_Start(object sender, EventArgs e)
    {
       Context = new AppContext();
    }
} 
```

但我不喜欢这个想法

```
Global.Context.Sesstion.Set<Order>(theOrderInstance); 
```

b) 并添加到 AppContext 以下行

```
public class AppContext{
private static AppContext instance;

public AppContext Instance
{ 
   get{ 
        if(instance == null) 
          instance = new AppContext();
        return instance;
   }
} 
```

这也不好看

```
AppContext.Instance.Session.Set<Order>(theOrderInstance); 
```

**问题**：我喜欢拥有的想法

```
AppContext.Session.Set<Order>(theOrderInstance); 
```

任何困难如何实现这一目标？非常感谢与此主题相关的 OSS

玩得开心 ：）

* * *

## 回答 #1

> 赞同：0
> 
>             
> 
> 时间：2009-05-25T08:50:26.873

这条路怎么样？

```
protected AppContext Instance
{ 
   get{ 
        if(instance == null) 
          instance = new AppContext();
        return instance;
   }
}

public IStorage Session
{ 
   get{ 
        return Instance.Session;
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-05-25T10:19:05.807

看这里：

```
public static class AppContextExtensions
{
    public static AppContext Context(this Page page)
    {
        return AppContext.Instance;
    }
} 
```

用法

```
this.Context().Session.Set<Order>(theOrderInstance) 
```

我很高兴:)

# xml - 基于子属性的e4x查询

> ID：905844
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-05-25T08:17:30.670
> 
>         
> 
> 标签：xml, apache-flex, actionscript-3, e4x

我正在尝试执行一个 E4X 查询（在下面的 xml 中），它将返回所有包含“元数据”节点的“访问器”节点，该节点的“名称”属性等于“必需”。

我试过...

```
type.accessor.(metadata.@name == "Required") 
```

...但这仅适用于只有 1 个元数据节点的访问节点。

有什么线索吗？

```
<type name="org.springextensions.actionscript.ioc.testclasses::PersonRequiredName" base="org.springextensions.actionscript.ioc.testclasses::Person" isDynamic="false" isFinal="false" isStatic="false">
  <metadata name="__go_to_definition_help">
    <arg key="file" value="C:\workspace\spring-actionscript\core\src\test\actionscript\org\springextensions\actionscript\ioc\testclasses\PersonRequiredName.as"/>
    <arg key="pos" value="935"/>
  </metadata>
  <extendsClass type="org.springextensions.actionscript.ioc.testclasses::Person"/>
  <extendsClass type="Object"/>
  <constructor>
    <parameter index="1" type="String" optional="true"/>
    <parameter index="2" type="int" optional="true"/>
    <parameter index="3" type="Boolean" optional="true"/>
  </constructor>
  <accessor name="name" access="readwrite" type="String" declaredBy="org.springextensions.actionscript.ioc.testclasses::PersonRequiredName">
    <metadata name="Required"/>
    <metadata name="__go_to_definition_help">
      <arg key="file" value="C:\workspace\spring-actionscript\core\src\test\actionscript\org\springextensions\actionscript\ioc\testclasses\PersonRequiredName.as"/>
      <arg key="pos" value="1163"/>
    </metadata>
    <metadata name="__go_to_definition_help">
      <arg key="file" value="C:\workspace\spring-actionscript\core\src\test\actionscript\org\springextensions\actionscript\ioc\testclasses\PersonRequiredName.as"/>
      <arg key="pos" value="1249"/>
    </metadata>
  </accessor>
  <variable name="age" type="int">
    <metadata name="__go_to_definition_help">
      <arg key="file" value="C:\workspace\spring-actionscript\core\src\test\actionscript\org\springextensions\actionscript\ioc\testclasses\Person.as"/>
      <arg key="pos" value="1070"/>
    </metadata>
  </variable>
  <accessor name="siblings" access="readonly" type="Array" declaredBy="org.springextensions.actionscript.ioc.testclasses::Person">
    <metadata name="__go_to_definition_help">
      <arg key="file" value="C:\workspace\spring-actionscript\core\src\test\actionscript\org\springextensions\actionscript\ioc\testclasses\Person.as"/>
      <arg key="pos" value="3724"/>
    </metadata>
  </accessor>
  <method name="addFriend" declaredBy="org.springextensions.actionscript.ioc.testclasses::Person" returnType="void">
    <parameter index="1" type="org.springextensions.actionscript.ioc.testclasses::Person" optional="false"/>
    <metadata name="__go_to_definition_help">
      <arg key="file" value="C:\workspace\spring-actionscript\core\src\test\actionscript\org\springextensions\actionscript\ioc\testclasses\Person.as"/>
      <arg key="pos" value="2424"/>
    </metadata>
  </method>
  <method name="toString" declaredBy="org.springextensions.actionscript.ioc.testclasses::Person" returnType="String">
    <metadata name="__go_to_definition_help">
      <arg key="file" value="C:\workspace\spring-actionscript\core\src\test\actionscript\org\springextensions\actionscript\ioc\testclasses\Person.as"/>
      <arg key="pos" value="3181"/>
    </metadata>
  </method>
  <method name="helloWorld" declaredBy="org.springextensions.actionscript.ioc.testclasses::Person" returnType="String">
    <metadata name="__go_to_definition_help">
      <arg key="file" value="C:\workspace\spring-actionscript\core\src\test\actionscript\org\springextensions\actionscript\ioc\testclasses\Person.as"/>
      <arg key="pos" value="2159"/>
    </metadata>
  </method>
  <method name="equals" declaredBy="org.springextensions.actionscript.ioc.testclasses::Person" returnType="Boolean">
    <parameter index="1" type="org.springextensions.actionscript.ioc.testclasses::Person" optional="false"/>
    <metadata name="__go_to_definition_help">
      <arg key="file" value="C:\workspace\spring-actionscript\core\src\test\actionscript\org\springextensions\actionscript\ioc\testclasses\Person.as"/>
      <arg key="pos" value="1932"/>
    </metadata>
  </method>
  <method name="hasSibling" declaredBy="org.springextensions.actionscript.ioc.testclasses::Person" returnType="Boolean">
    <parameter index="1" type="org.springextensions.actionscript.ioc.testclasses::Person" optional="false"/>
    <metadata name="__go_to_definition_help">
      <arg key="file" value="C:\workspace\spring-actionscript\core\src\test\actionscript\org\springextensions\actionscript\ioc\testclasses\Person.as"/>
      <arg key="pos" value="2789"/>
    </metadata>
  </method>
  <accessor name="writeObject" access="writeonly" type="Object" declaredBy="org.springextensions.actionscript.ioc.testclasses::Person">
    <metadata name="__go_to_definition_help">
      <arg key="file" value="C:\workspace\spring-actionscript\core\src\test\actionscript\org\springextensions\actionscript\ioc\testclasses\Person.as"/>
      <arg key="pos" value="3950"/>
    </metadata>
  </accessor>
  <variable name="colleague" type="org.springextensions.actionscript.ioc.testclasses::Person">
    <metadata name="__go_to_definition_help">
      <arg key="file" value="C:\workspace\spring-actionscript\core\src\test\actionscript\org\springextensions\actionscript\ioc\testclasses\Person.as"/>
      <arg key="pos" value="1132"/>
    </metadata>
  </variable>
  <variable name="anArray" type="Array">
    <metadata name="__go_to_definition_help">
      <arg key="file" value="C:\workspace\spring-actionscript\core\src\test\actionscript\org\springextensions\actionscript\ioc\testclasses\Person.as"/>
      <arg key="pos" value="1166"/>
    </metadata>
  </variable>
  <method name="addSibling" declaredBy="org.springextensions.actionscript.ioc.testclasses::Person" returnType="void">
    <parameter index="1" type="org.springextensions.actionscript.ioc.testclasses::Person" optional="false"/>
    <metadata name="__go_to_definition_help">
      <arg key="file" value="C:\workspace\spring-actionscript\core\src\test\actionscript\org\springextensions\actionscript\ioc\testclasses\Person.as"/>
      <arg key="pos" value="2605"/>
    </metadata>
  </method>
  <variable name="anObject" type="Object">
    <metadata name="__go_to_definition_help">
      <arg key="file" value="C:\workspace\spring-actionscript\core\src\test\actionscript\org\springextensions\actionscript\ioc\testclasses\Person.as"/>
      <arg key="pos" value="1197"/>
    </metadata>
  </variable>
  <accessor name="friends" access="readwrite" type="Array" declaredBy="org.springextensions.actionscript.ioc.testclasses::Person">
    <metadata name="__go_to_definition_help">
      <arg key="file" value="C:\workspace\spring-actionscript\core\src\test\actionscript\org\springextensions\actionscript\ioc\testclasses\Person.as"/>
      <arg key="pos" value="3583"/>
    </metadata>
    <metadata name="__go_to_definition_help">
      <arg key="file" value="C:\workspace\spring-actionscript\core\src\test\actionscript\org\springextensions\actionscript\ioc\testclasses\Person.as"/>
      <arg key="pos" value="3645"/>
    </metadata>
  </accessor>
  <accessor name="isMarried" access="readwrite" type="Boolean" declaredBy="org.springextensions.actionscript.ioc.testclasses::Person">
    <metadata name="__go_to_definition_help">
      <arg key="file" value="C:\workspace\spring-actionscript\core\src\test\actionscript\org\springextensions\actionscript\ioc\testclasses\Person.as"/>
      <arg key="pos" value="3434"/>
    </metadata>
    <metadata name="__go_to_definition_help">
      <arg key="file" value="C:\workspace\spring-actionscript\core\src\test\actionscript\org\springextensions\actionscript\ioc\testclasses\Person.as"/>
      <arg key="pos" value="3502"/>
    </metadata>
  </accessor>
</type> 
```

* * *

## 回答 #1

> 赞同：4
> 
>             
> 
> 时间：2009-05-25T08:53:26.400

这似乎有效：

```
type.accessor.(hasOwnProperty("metadata") && metadata.attribute("name").contains("Required")) 
```

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-05-27T03:33:43.083

这都是关于括号的。

试试这个（更清洁）

```
var list:XMLList;

xmlList = type.accessor.metadata.(@name == "Required"); 
```

# maven-2 - **/* 在 Maven 语法中是什么意思？

> ID：905845
> 
>         
> 
> 赞同：37
> 
>         
> 
> 时间：2009-05-25T08:19:27.780
> 
>         
> 
> 标签：maven-2

我是 maven 新手，我一直使用以下语法：

```
<include>**/*</include> 
```

我不确定如何解释`**/*`，这是一些 Java 还是 maven 约定？

* * *

## 回答 #1

> 赞同：62
> 
>             
> 
> 时间：2009-05-25T08:25:47.250

它与构建 Maven 的[`<fileset>`Ant 约定更相关。](http://ant.apache.org/manual/Types/fileset.html)

`**/*`：所有子目录中的所有文件：参见[Ant 模式](http://ant.apache.org/manual/dirtasks.html#patterns)。

> 当`**`用作模式中目录的名称时，它匹配零个或多个目录。
> 
>   例如：`/test/**`匹配 下的所有文件/目录`/test/`，例如`/test/x.java`、 或`/test/foo/bar/xyz.html`，但不匹配`/xyz.xml`。

# python - 为什么不允许这样的进口？

> ID：905848
> 
>         
> 
> 赞同：3
> 
>         
> 
> 时间：2009-05-25T08:22:29.660
> 
>         
> 
> 标签：python

文件：b.py

```
class B:
    def __init__(self):
        print "B"

import a

a = A() 
```

文件：a.py

```
class A(B):             ###=> B  is not  defined
    def __init__(self):
        print "A" 
```

当我尝试执行`b.py`时，据说 B 没有定义。我误解了“进口”吗？

如果您能指出问题，非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
>             
> 
> 时间：2009-05-25T08:36:18.087

因为python在自己的文件中初始化了A类。它不像 C 或 PHP 包含，其中每个导入的模块本质上都粘贴到原始文件中。

您应该将 B 类与 A 类放在同一个文件中以解决此问题。或者您可以将 B 类放入 c.py 并使用“from c import B”导入它。

* * *

## 回答 #2

> 赞同：4
> 
>             
> 
> 时间：2009-05-25T10:08:29.853

与您的代码最接近的工作是：

```
==== FILE: b.py ====

class B:
    def __init__(self):
        print "B"

import a

if __name__ == "__main__":
    a = a.A()

==== FILE: a.py ====
import b

class A(b.B):             ###=> B  is not  defined
    def __init__(self):
        print "A" 
```

注意差异：

*   文件（模块）是命名空间，如果您导入“a”，则将其类 A 称为“aA”。

*   如果你想使用它，你需要在 a.py 中导入 b。

您希望通过将所有内容放在同一个模块中或将内容拆分到更多模块中来避免两个模块需要相互包含。此外，最好将所有导入都放在文件的开头，这样就不可能进行这种胡闹了。

# windows - 使用 SChannel 重用 SSL 会话 (Windows)

> ID：905851
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-05-25T08:24:01.933
> 
>         
> 
> 标签：windows, security, session, ssl, schannel

我有一个使用 schannel.dll 与远程服务器建立 SSL 连接的程序。但我想经常断开与服务器的连接并重新连接，而无需再次重新协商共享密钥。我知道 SSL 支持这一点，但不知道如何使用 SChannel 来实现。

你能帮助我吗？

以下是一些可以提供帮助的链接：

使用 Schannel 创建安全连接：http: [//msdn.microsoft.com/en-us/library/aa374782 (VS.85).aspx](http://msdn.microsoft.com/en-us/library/aa374782(VS.85).aspx)

SSL 会话重用 - 如何查找是否支持？：[http ://royontechnology.blogspot.com/2008/01/how-to-find-out-if-server-supports-ssl.html](http://royontechnology.blogspot.com/2008/01/how-to-find-out-if-server-supports-ssl.html)

* * *

## 回答 #1

> 赞同：0
> 
>             
> 
> 时间：2009-05-28T12:37:22.223

如果您希望重新连接正常工作，对每个连接使用相同的凭据句柄很重要。在调用 InitializeSecurityContext 时，您还需要传入相同的目标名称字符串。几乎所有其他东西都是自动的。

# c# - 在 Environment.Exit() 上捕获异常

> ID：905852
> 
>         
> 
> 赞同：4
> 
>         
> 
> 时间：2009-05-25T08:24:21.967
> 
>         
> 
> 标签：c#, exit, exit-code

我的主要功能结束后，我需要返回退出代码 1。但是，我还有一个永远不会结束的线程`(while(true))`。所以我设法打电话给*Environment.Exit(1)*。但是在处理 com 对象时我遇到了一些异常......

由于几个原因，我无法更改其他线程代码。大家提倡怎么做？

我可以捕获来自 com 对象处理的异常吗？我是否有其他选项可以返回退出代码？

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-05-25T09:25:51.000

我建议您：附加到 ProcessExit 事件以进行任何最后机会清理或...在线程上执行 Thread.Abort 以使其在退出前完成。

```
AppDomain.CurrentDomain.ProcessExit +=
delegate(object sender, EventArgs e)
{
    Console.WriteLine("Process Exit");
};
Thread t1 = new Thread(new ThreadStart(delegate
{
try
{
    while (true)
    {
        Console.WriteLine("test 1");
        Thread.Sleep(500);
    }
}
finally
{
    Console.WriteLine("Terminating t1");
}
}));

Thread t2 = new Thread(new ThreadStart(delegate
{
try
{
    while (true)
    {
        Console.WriteLine("test 2");
        Thread.Sleep(500);
    }
}
finally
{
    Console.WriteLine("Terminating t2");
}
}));

t1.Start();
t2.Start();
Thread.Sleep(2000);
t2.Abort();
t2.Join();
Environment.Exit(1); 
```

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-07-30T13:34:49.797

您可以通过编写此代码来终止进程 Dim myProcess As System.Diagnostics.Process = System.Diagnostics.Process.GetCurrentProcess() myProcess.Kill()

或 Environment.exit(1) 是杀死所有进程的最佳方法

[http://www.zhakkas.com/affiliates/idevaffiliate.php?id=542](http://www.zhakkas.com/affiliates/idevaffiliate.php?id=542)

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-05-25T09:16:54.417

尝试使用：

```
Environment.ExitCode = 1; 
```

然而; 如果另一个线程不是后台线程，则*需要*它退出才能结束进程（退出代码在进程退出之前是没有意义的）。

# coldfusion - 如何确定 ColdFusion 应用程序使用哪些文件？

> ID：905855
> 
>         
> 
> 赞同：4
> 
>         
> 
> 时间：2009-05-25T08:25:12.167
> 
>         
> 
> 标签：coldfusion

我正在对没有版本控制的现有 ColdFusion 应用程序开始一些工作，并且看起来像未使用的 cfm 文件（test.cfm、test2.cfm 等）。我想了解哪些文件实际上是应用程序的一部分，以便我可以将它以可管理的状态放入 git 或 subversion。

你会怎么做？一个正则表达式和一些方法来查找和映射 cfinclude 和 cfcomponent 标签？是否有一些现有的工具可以做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
>             
> 
> 时间：2009-05-27T20:50:54.427

Ben Nadel 有一种方法可以从正在运行的模板中检查实时堆栈跟踪。在我看来，您可以轻松地将其放入您的应用程序并将结果记录到数据库中。完成此操作后，您就可以很好地了解正在使用的内容和未使用的内容。

但是，我认为最简单的方法是启用调试（此处关于开发服务器的标准警告等）。标准的 ColdFusion 调试器将为您提供在单个页面执行期间使用的每个文件的完整列表。ColdFire 将在一个方便的 Firebug 扩展中执行相同的操作（单击 ColdFusion，然后单击 Exec Times）。

应该指出的是，内置调试器甚至会向您显示 CFC 调用中包含的文件，以及这些调用中包含的文件。它是**包罗万象**的。

[Ben Nadel 谈堆栈跟踪](http://www.bennadel.com/blog/116-Finding-Template-Execution-Stack-in-ColdFusion.htm)

[雷·卡姆登的冷火](http://coldfire.riaforge.org/)

来自实时页面的 CF 调试示例：

[![替代文字](https://i.stack.imgur.com/D1Z5V.png)](https://i.stack.imgur.com/D1Z5V.png)

* * *

## 回答 #2

> 赞同：6
> 
>             
> 
> 时间：2009-05-25T12:12:42.503

**先放到git里面！**然后，如果你搞砸了，你可以很容易地回滚。

（如果您担心拥有一个“干净”的存储库，当您完成并经过全面测试后，您可以选择删除单个 .git 文件夹并创建一个新文件夹。）

然后，正如 Tomalak 建议的那样，`cflog`在每个文件上使用。事实上，我想说甚至可能在每个脚本的顶部和底部记录两次，这可能会帮助您绘制出应用程序的运行方式。

* * *

## 回答 #3

> 赞同：5
> 
>             
> 
> 时间：2009-05-25T08:39:57.253

不建议使用正则表达式。由于 ColdFusion 在包含或引用文件的方式上非常灵活，因此无法仅从源代码中确定最终的依赖关系列表。

您可以[`<cflog>`](http://livedocs.adobe.com/coldfusion/8/Tags_j-l_06.html)在每个文件中插入一个并从正在运行的应用程序构建一个日志。在应用程序处于活动状态一段时间后检查日志，并且所有功能都至少被访问过一次。

* * *

## 回答 #4

> 赞同：1
> 
>             
> 
> 时间：2009-05-26T15:16:25.600

不要费心检测每个文件，只需在 application.cfc 中的 OnRequest 中对页面名称进行cflog - 目标页面是一个参数。

当然，问题就变成了代码覆盖率和充分运行应用程序的能力。

```
<cffunction name="onRequest" returnType="void">
  <cfargument name="targetPage" type="String" required=true/>
  <cflog file="Usedpage" text="#Arguments.targetPage#">
  <cfinclude template="#Arguments.targetPage#">
   ...
</cffunction> 
```

* * *

## 回答 #5

> 赞同：0
> 
>             
> 
> 时间：2009-05-25T08:34:04.723

cfinclude 不会告诉您 url 是否应该直接加载文件。我见过一些文件没有通过 index.cfm 包含的系统，即使框架需要它。我在自己的工作中拥有它，其中 index.cfm 加载了大多数代码，但 reset.cfm 绕过了框架来重置配置和会话数据。

* * *

## 回答 #6

> 赞同：0
> 
>             
> 
> 时间：2009-05-28T23:20:28.667

下载 Dreamweaver 试用版并定义 ColdFusion 站点。DW 可以创建站点地图并告诉您哪些文件未包含、链接、cfmoduled 等。我不知道它是否可以找出未使用的 CFC，但 CFM 应该很容易。请注意，我已经多年没有使用 DW，但它在 CF 4/5 左右具有此功能。

# iphone - 如何接收来自对单例的异步请求的响应？

> ID：905856
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2009-05-25T08:25:21.730
> 
>         
> 
> 标签：iphone, cocoa, cocoa-touch, singleton

以下涉及 iPhone 应用程序。

我想使用单例来处理异步 URL 请求。我已经涵盖了，但是告诉单身人士在收到响应时将响应发送到哪里的最佳编码实践方法是什么？我需要将响应返回给最初称为单例的类。

我可以将一个指向调用类的指针传递给单例，以及在收到响应时调用的委托方法（调用类的）吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-05-25T08:42:27.280

首先，单例通常是一个糟糕的设计，这看起来就像你不应该需要单例的情况。请参阅Miško Hevery 的[单身人士是病态的骗子以及他博客上的其他文章。](http://misko.hevery.com/2008/08/17/singletons-are-pathological-liars/)（我希望这不会显得傲慢，摆脱单例可能会让你的设计更好，编码更容易。）

其次，如果我正确理解您的问题，您可以向单例传递一个选择器，在单例接收数据后应该调用该选择器。单例类中的 API 可能如下所示：

```
- (void) download: (NSURLRequest*) request andTell: (id) delegate to: (SEL) doThis; 
```

然后在您完成加载数据后，您将执行以下操作：

```
[delegate performSelector:doThis withObject:receivedData]; 
```

这能回答问题吗？

# iphone - 任何人都可以解释 AudioSessionSetActive(true/false) 函数在 iPhone 操作系统中的工作原理吗？

> ID：905857
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2009-05-25T08:25:31.057
> 
>         
> 
> 标签：iphone

激活音频会话会中断属于在后台运行的内置应用程序的音频会话，具体取决于类别和优先级。停用音频会话允许其他中断的音频会话恢复。激活音频会话 ( AudioSessionSetActive(true) ) 工作正常，但停用音频会话 ( AudioSessionSetActive(false) ) 不工作。任何人都可以建议我如何停用音频会话并恢复中断的音频。

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2013-06-05T03:46:32.473

而不是使用`AudioSessionSetActive(false)`

您应该使用以下内容

```
AudioSessionSetActiveWithFlags(false, kAudioSessionSetActiveFlag_NotifyOthersOnDeactivation); 
```

通知其他应用程序恢复播放。

要了解 AudioSession，请访问[Apple dev](http://developer.apple.com/library/IOS/#documentation/Audio/Conceptual/AudioSessionProgrammingGuide/Cookbook/Cookbook.html#//apple_ref/doc/uid/TP40007875-CH6-SW2)

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-05-25T14:41:11.703

这个现在过时的[博客条目](http://web.archive.org/web/20090602051705/http://benbritten.com/blog/2009/02/02/restarting-openal-after-application-interruption-on-the-iphone/comment-page-1/)很好地解释了它。  

只需将“OpenAL”替换为“您的音频系统”即可。

# visual-studio - 将 Visual Studio 项目中的项目从“链接”转换为复制的文件

> ID：905863
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2009-05-25T08:27:04.067
> 
>         
> 
> 标签：visual-studio

我有一个 Visual Studio (2008) 项目，我在其中添加了一些文件作为链接（通过添加现有项目-> 添加为链接）。假设我想将此项目复制到其他地方（将其提供给另一个开发人员、发布源代码等），并且我想将所有这些链接“转换”为这些文件的实际副本。这可能吗？我如何在 VS 中执行此操作，或者是否有一些 3rd 方实用程序可以执行此操作？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
>             
> 
> 时间：2009-05-25T08:29:47.337

我想最简单的方法就是从项目中删除项目，然后再次添加它们，而不是作为链接？如果要将文件作为链接保留在项目中，请先制作副本，然后删除/添加副本中的项目。

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-05-25T08:36:31.223

如果您的所有文件都在一个根目录下（而不是 c:\...）并且是相对的，您可以尝试使用[TreeTrim](http://code.google.com/p/treetrim/)。

*treetrim.console c:\ -workingcopy -zip:writeTo:c:\out.zip*

这将创建一个没有临时文件（.pdb，.ncb）的所有需要​​信息的 zip

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2010-04-23T04:15:23.267

我遇到了这个问题，并写了一个小工具来做到这一点。结帐：[http ://translate.google.com/translate?js=y&prev=_t&hl=en&ie=UTF-8&layout=1&eotf=1&u=http%3A%2F%2Fwww.cnblogs.com%2Fdeerchao%2Farchive%2F2010%2F04% 2F22%2F1718183.html&sl=zh-CN&tl=en](http://translate.google.com/translate?js=y&prev=_t&hl=en&ie=UTF-8&layout=1&eotf=1&u=http%3A%2F%2Fwww.cnblogs.com%2Fdeerchao%2Farchive%2F2010%2F04%2F22%2F1718183.html&sl=zh-CN&tl=en)

# c# - 持久性无知 Linq to SQL

> ID：905866
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2009-05-25T08:28:02.333
> 
>         
> 
> 标签：c#, .net, linq-to-sql, persistence-ignorance

我有一个现有的域层。我想使用 Linq to SQL 开发持久层。我目前正在使用外部地图文件。我正在尝试对我的子集合使用延迟加载，但没有成功。有没有办法使用 Linq to SQL 但不使用 EntitySet 或 EntityRef 来实现延迟加载。

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-05-25T08:36:49.630

我不能保证我掌握了 LTS 的最新开发，但以前你必须使用 EntitySet/EntityRef 来获得延迟加载。

如果你想要一个 PI 模型，你最好选择 NHibernate。

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-05-25T09:02:03.013

（没有真正回答这个问题。）

.NET 4 中的实体框架（又名 LINQ to Entities）包括持久性无知支持，例如能够映射到 POCO（普通旧 CLR 对象¹）。请参阅[“先睹为快：Entity Framework 4.0 中的持久性无知和 POCO”](http://blogs.msdn.com/adonet/archive/2009/05/11/sneak-preview-persistence-ignorance-and-poco-in-entity-framework-4-0.aspx)。

¹即不需要基类或属性。

# header - 如何配置没有 mod_expires 或 mod_headers 的 apache 来发送过期标头？

> ID：905867
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2009-05-25T08:28:35.200
> 
>         
> 
> 标签：header, apache-config

托管我的网站的网络服务器未返回最后修改或过期标头。我想纠正这一点，以确保我的网页内容是可缓存的。  

我无权访问 apache 配置文件，因为该站点托管在我无法控制的共享环境中。但是，我可以通过 .htaccess 文件进行配置。服务器 - apache 1.3 - 没有配置 mod_expires 或 mod_headers，公司不会为我安装这些。

考虑到这些限制，我有哪些选择？

对不起这里的帖子。我认识到这个问题严格来说不是一个编程问题，而更像是一个系统管理员问题。当 serverfault 公开时，我会确保我在那里直接提出这种性质的问题。  

* * *

## 回答 #1

> 赞同：3
> 
>             
> 
> 时间：2009-05-25T10:53:02.650

什么样的内容？如果是静态的（HTML、图像、CSS），那么附加标题的唯一方法就是通过前端网络服务器。我很惊讶托管公司没有启用 mod_headers，尽管他们可能没有为 .htaccess 启用它。不缓存会花费他们更多的带宽和 CPU（即金钱）。

如果它是动态内容，那么您将在生成页面时进行控制。这取决于您的语言；这是 PHP 的一个示例（它来自 PHP 手册，是一个不好的示例，因为它还应该设置响应代码）：

```
if (!headers_sent()) {
    header('Location: http://www.example.com/');
    exit;
} 
```

哦，关于设置缓存标头的一件事：不要将它们设置太长时间，特别是对于 CSS 和脚本。您可能不想更改这些内容，但您不希望网站损坏，而人们的浏览器中仍保留旧内容。我会推荐 4-8 小时范围内的最大缓存设置：适合单个用户的会话或工作日，但仅此而已。

# windows - 如何将名称设置为 Win32 线程？

> ID：905876
> 
>         
> 
> 赞同：21
> 
>         
> 
> 时间：2009-05-25T08:32:03.633
> 
>         
> 
> 标签：windows, multithreading, winapi

如何为 Win32 线程设置名称。我没有找到任何 Win32 API 来实现相同的功能。基本上我想在日志文件中添加线程名称。TLS（线程本地存储）是唯一的方法吗？

* * *

## 回答 #1

> 赞同：30
> 
>             
> 
> 时间：2009-05-25T08:36:51.330

这有帮助吗？
[如何：在本机代码中设置线程名称](http://msdn.microsoft.com/en-us/library/xcb2z8hs.aspx)

在托管代码中，只需设置相应 Thread 对象的 Name 属性即可。

* * *

## 回答 #2

> 赞同：23
> 
>             
> 
> 时间：2012-04-28T14:44:10.530

[http://msdn.microsoft.com/en-us/library/xcb2z8hs(VS.90).aspx](http://msdn.microsoft.com/en-us/library/xcb2z8hs(VS.90).aspx)

```
//
// Usage: SetThreadName (-1, "MainThread");
//
#include <windows.h>
const DWORD MS_VC_EXCEPTION=0x406D1388;

#pragma pack(push,8)
typedef struct tagTHREADNAME_INFO
{
   DWORD dwType; // Must be 0x1000.
   LPCSTR szName; // Pointer to name (in user addr space).
   DWORD dwThreadID; // Thread ID (-1=caller thread).
  DWORD dwFlags; // Reserved for future use, must be zero.
} THREADNAME_INFO;
#pragma pack(pop)

void SetThreadName( DWORD dwThreadID, char* threadName)
{
   THREADNAME_INFO info;
   info.dwType = 0x1000;
   info.szName = threadName;
   info.dwThreadID = dwThreadID;
   info.dwFlags = 0;

   __try
   {
      RaiseException( MS_VC_EXCEPTION, 0, sizeof(info)/sizeof(ULONG_PTR),       (ULONG_PTR*)&info );
  }
  __except(EXCEPTION_EXECUTE_HANDLER)
  {
  }
} 
```

* * *

## 回答 #3

> 赞同：11
> 
>             
> 
> 时间：2017-05-04T15:23:36.593

根据与 Microsoft 调试团队负责人的讨论（有关详细信息，请参阅下面的链接），SetThreadDescription API 是 Microsoft 将用于在本机代码中正式支持线程命名的 API。“正式”是指用于命名线程的 MS 支持的 API，而不是当前仅在 Visual Studio 中运行进程时才有效的当前异常抛出 hack。

此 API 从 Windows 10 版本 1607 开始可用。

然而，目前几乎没有工具支持，因此您设置的名称在 Visual Studio 或 WinDbg 调试器中不可见。但是，截至 2017 年 4 月，Microsoft xperf/WPA 工具确实支持它（通过此 API 命名的线程的名称将在这些工具中正确显示）。

如果您希望看到它获得更好的支持，例如在 WinDbg、Visual Studio 和故障转储文件中，请使用此链接为它投票：

[https://visualstudio.uservoice.com/forums/121579-visual-studio-ide/suggestions/17608120-properly-support-native-thread-naming-via-the-sett](https://visualstudio.uservoice.com/forums/121579-visual-studio-ide/suggestions/17608120-properly-support-native-thread-naming-via-the-sett)

* * *

## 回答 #4

> 赞同：10
> 
>             
> 
> 时间：2013-04-24T18:31:55.460

Win32 线程没有名称。有一个 Microsoft 约定，应用程序会引发包含线程名称的特殊 SEH 异常。这些异常可以被调试器拦截并用于指示线程名称。几个答案涵盖了这一点。

但是，这一切都由调试器处理。线程本身是无名对象。因此，如果您想将名称与线程相关联，则必须开发自己的机制。虽然您可以使用只允许您从该线程中执行的代码中获取名称的线程本地存储。因此，线程 ID 和名称之间的全局映射似乎是最自然和最有用的方法。

* * *

## 回答 #5

> 赞同：3
> 
>             
> 
> 时间：2015-04-22T17:55:03.460

您可以使用线程本地存储对象来存储名称。例如，

```
__declspec( thread ) char threadName[32]; 
```

然后你可以从一个线程中写入和读取它。这在记录器应用程序中可能很有用，您希望在其中打印出每条消息的线程名称。您可能希望在线程启动后立即写入此变量，并抛出 Microsoft 异常 ( [https://stackoverflow.com/a/10364541/364818](https://stackoverflow.com/a/10364541/364818) )，以便调试器也知道线程名称。

* * *

## 回答 #6

> 赞同：3
> 
>             
> 
> 时间：2018-08-24T21:48:00.007

如果您的应用程序在 Windows 1607+ 版本上运行，您可以使用[SetThreadDescription](https://docs.microsoft.com/en-us/windows/desktop/api/processthreadsapi/nf-processthreadsapi-setthreaddescription) ()

* * *

## 回答 #7

> 赞同：0
> 
>             
> 
> 时间：2009-05-25T18:21:52.560

如果您想在调试器（windbg 或 Visual Studio）中查看线程的名称：http:
     [//blogs.msdn.com/stevejs/archive/2005/12/19/505815.aspx](http://blogs.msdn.com/stevejs/archive/2005/12/19/505815.aspx)

我实际上不确定是否有反向方法来获取线程名称。但 TLS 听起来像是要走的路。

* * *

## 回答 #8

> 赞同：0
> 
>             
> 
> 时间：2014-08-06T14:21:48.460

另一种方法是在线程的 TEB 的 ArbitraryUserPointer 字段中存储指向名称的指针。这可以在运行时写入和读取。

[有一篇题为“使用线程信息块进行调试”](http://www.codeproject.com/Articles/2398/Thread-Debugging-with-the-Thread-Information-Block?display=Print)的 CodeProject 文章向您展示了如何执行此操作。

* * *

## 回答 #9

> 赞同：-2
> 
>             
> 
> 时间：2009-05-25T09:25:29.627

您始终可以将这些信息存储在合适的数据结构中。使用散列或映射将 GetThreadId() 映射到此名称。由于 GetThreadId() 始终是唯一标识符，因此可以正常工作。

干杯！

> 当然，如果他创建了很多线程，那个 hashmap 会慢慢填满并使用越来越多的内存，所以一些清理过程可能也是一件好事。

你是绝对正确的。当一个线程死亡时，它在映射中的相应条目自然应该被删除。

# javascript - jQuery 中的绑定事件是非常昂贵还是非常便宜？

> ID：905883
> 
>         
> 
> 赞同：33
> 
>         
> 
> 时间：2009-05-25T08:35:59.587
> 
>         
> 
> 标签：javascript, jquery, performance, events

我刚刚写了一个 $().bind('event') 函数，然后担心如果 jQuery 必须遍历 DOM 中的每个元素来绑定这个事件，这种调用可能会非常昂贵。

或者，它可能与活动一样高效。我读过的 jQuery 文档并没有说明这一点。有什么意见吗？

* * *

## 回答 #1

> 赞同：72
> 
>             
> 
> 时间：2009-05-25T08:59:46.980

有两件事可以使您的事件绑定代码变慢：选择器和绑定数。两者中最关键的是绑定数，但选择器可能会影响您的初始性能。

就选择器而言，只要确保您不使用纯类名选择器，例如`.myclass`. 如果你知道 的 类`myclass`总是在一个`<div>`元素中，让你的选择器为 be `div.myclass`，因为它将帮助 jQuery 更快地找到匹配的元素。另外，不要利用 jQuery 让你给它巨大的选择器字符串。它可以用字符串选择器做的所有事情，它也可以通过函数做，这是有意的，因为它（勉强承认）这样做更快，因为 jQuery 不必坐下来解析你的字符串来找出什么你要。因此，`$('#myform input:eq(2)');`您可能会做而不是做`$('input','#myform').eq(2);`. 通过指定一个上下文，我们也不会让 jQuery 在它不需要的任何地方看起来，这要快得多。[更多关于这个here](https://stackoverflow.com/questions/879123/what-is-the-most-efficient-way-to-access-dom-elements-in-jquery)。

至于绑定的数量：如果你有一个相对中等数量的元素，那么你应该没问题 - 任何多达 200、300 个潜在元素匹配在现代浏览器中都可以正常运行。如果您有更多的东西，您可能想要查看事件委托。

什么是事件委托？本质上，当你运行这样的代码时：

```
$('div.test').click(function() {
    doSomething($(this));
}); 
```

jQuery 在幕后做了类似的事情（为每个匹配的元素绑定一个事件）：

```
$('div.test').each(function() {
    this.addEventListener('click', function() {
        doSomething(this);
    }, false);
}); 
```

如果您有大量元素，这可能会变得低效。通过事件委托，您可以将完成的绑定数量减少到一个。但是怎么做？事件对象有一个`target`属性，可以让您知道事件作用于哪个元素。所以你可以做这样的事情：

```
$(document).click(function(e) {
    var $target = $(e.target);
    if($target.is('div.test')) { // the element clicked on is a DIV
                                 // with a class of test
       doSomething($target);
    }
}); 
```

值得庆幸的是，您实际上不必使用 jQuery 编写上述代码。[live](http://docs.jquery.com/Events/live#typefn)函数被宣传为一种将事件绑定到尚不存在的元素的简单方法，它实际上能够通过使用事件委托并在操作发生时检查目标是否与您指定的选择器匹配来做到这一点. 当然，这具有副作用，当速度很重要时非常方便。

这个故事的主旨？如果您担心脚本刚刚替换的绑定数量，请`.bind`确保`.live`您有智能选择器。

但是请注意，并非所有事件都受`.live`. 如果你需要它不支持的东西，你可以查看[livequery](http://docs.jquery.com/Plugins/livequery)插件，它是在类固醇上运行的。

* * *

## 回答 #2

> 赞同：-1
> 
>             
> 
> 时间：2009-05-25T08:42:07.327

基本上，你不会做得更好。它所做的只是在您选择的每个元素上调用 attachEventListener()。

仅在解析时，此方法可能比在每个元素上设置内联事件处理程序更快。

一般来说，我认为这是一个非常便宜的操作。

# oracle - 让 Oracle 客户端在 Windows 7 RC 上工作

> ID：905886
> 
>         
> 
> 赞同：7
> 
>         
> 
> 时间：2009-05-25T08:36:15.793
> 
>         
> 
> 标签：oracle, windows-7

有没有人有幸让 Oracle 客户端安装和使用 Windows 7 RC？我从 Vista 升级到 Windows 7，但在让我的 Oracle 数据库正常工作时遇到了可怕的问题......

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-05-26T10:56:45.607

呸，我终于解决了。我下载了 Oracle Instant Client x86 并复制了它并设置了我的环境变量（PATH、LD_LIBRARY、TNS_ADMIN）。我之前遇到的问题是我下载的 x64 版本无法与 x86 应用程序 Toad 一起使用！一旦我安装了x86版本，问题就解决了......

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-08-10T22:33:45.603

我遇到了类似的问题。

从 Oracle 网站下载适用于 Vista 的 Oracle 10g 客户端 (10203_vista_w2k8_x86_production_client.zip) 后，我解压缩文件，右键单击 setup.exe，然后选择以管理员身份运行。

在 Oracle Universal Installer 中，我选择了 Administrator，单击 Next 按钮，然后选择 Oracle 主目录名称和路径，然后单击 Next 按钮。  

如其他答案中所述，安装程序在下一个屏幕“特定于产品的先决条件检查”中失败。具体失败是“检查操作系统要求...”在第三列，有一个复选框（未选中）。我单击了复选框，安装程序将状态更改为“未执行”。当我单击下一步按钮时，它警告我安装可能会失败。我点击了确定。我能够安装而没有进一步的问题。

它不直观，Oracle 11g 客户端可能有所不同，但这对我有用。

-韦斯顿

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2009-10-21T14:19:04.147

我遇到过同样的问题。我为解决这个问题所做的是： - 右键单击​​设置 - 选择疑难解答兼容性 - 它会弹出一个窗口“测试程序的兼容性设置”。它告诉我它与哪个版本兼容，Windows 7 将为您激活该设置。就我而言，Windows XP Service Pack 2 是用于安装此 Oracle 10g 客户端的设置 - 单击“启动程序”按钮它将运行安装程序 - 完成

* * *

## 回答 #4

> 赞同：1
> 
>             
> 
> 时间：2009-12-13T21:07:25.843

它与我一起工作，我必须执行以下操作：（在以兼容模式安装 oracle 或跳过操作系统检查结果之后）

1- 在环境变量中设置 %Oracle_Home%。

2- 配置“tnsnames.ora、listener.ora 和 sqlnet.ora”以确保它们匹配

3- 为 sql*plus 替换了一个有故障的 DLL（我在安装程序的临时文件中找到了原来的 DLL，只是使用 Windows 搜索）

4- 从命令行（sys / as dba）登录到 sqlplus 并创建了一个具有高权限的用户（因为您不能使用“system”或“sys”构建存储库

5- 使用这个新用户从 RAU（存储库管理实用程序）创建存储库，然后就可以了！

* * *

## 回答 #5

> 赞同：0
> 
>             
> 
> 时间：2009-05-25T08:48:59.030

在这里阅读：http: //forums.oracle.com/forums/thread.jspa?messageID=3454893& [#3454893](http://forums.oracle.com/forums/thread.jspa?messageID=3454893&#3454893)

# shell - 在 shell 脚本中传递包含空格的参数

> ID：905891
> 
>         
> 
> 赞同：35
> 
>         
> 
> 时间：2009-05-25T08:37:53.513
> 
>         
> 
> 标签：shell

我需要我的脚本能够接受带有空格字符的参数。例如，如果我有一个脚本如下：

```
for SOME_VAR in $@
do
    echo "$SOME_VAR"
    cd "$SOME_VAR"
done; 
```

如果我将参数传递给脚本（假设它被调用`foo.sh`）

```
sh foo.sh "Hello world" 
```

我期待脚本打印`Hello world`并将目录更改为`Hello world`. 但我收到此错误消息：

```
hello
cd: 5: can't cd to hello
world
cd: 5: can't cd to world 
```

如何将带有空格字符的参数传递给 shell 脚本中的命令？

* * *

## 回答 #1

> 赞同：51
> 
>             
> 
> 时间：2009-05-25T08:44:31.410

您也必须用`$@`引号括起来：`"$@"`

这告诉 shell 忽略参数中的空格；它不会将所有参数变成一个很长的字符串。

# mysql - 如何在不覆盖重复字段的情况下将 SQL 转储导入表

> ID：905894
> 
>         
> 
> 赞同：5
> 
>         
> 
> 时间：2009-05-25T08:38:17.523
> 
>         
> 
> 标签：mysql, database, mysqldump

如何在不覆盖具有相同值的记录的情况下将 MySQL 转储文件导入数据库？

* * *

## 回答 #1

> 赞同：5
> 
>             
> 
> 时间：2009-05-25T08:44:37.557

这是手册的[链接](http://dev.mysql.com/doc/refman/5.0/en/mysqlimport.html)。您可以指定是否替换现有记录。

```
--replace, -r 
```

`--replace`和`--ignore`选项控制在唯一键值上重复现有行的输入行的处理。如果您指定`--replace`，新行将替换具有相同唯一键值的现有行。如果您指定`--ignore`，将跳过与唯一键值上的现有行重复的输入行。如果您不指定任一选项，则在找到重复键值时会发生错误，并且文本文件的其余部分将被忽略。

如果您使用的是 phpmyadmin，那么您在 GUI 中也有一个选项。

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2017-03-15T14:51:28.733

您可以修改SQL文件并更改`INSERT INTO`为`INSERT IGNORE INTO`

# javascript - 使用 jQuery XPath 选择器

> ID：905897
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-05-25T08:38:41.157
> 
>         
> 
> 标签：javascript, jquery, xpath

我正在使用一个简单的 DOM 解析器函数来捕获文档所有节点的 XPath 信息

例如，HTML 是：

```
<div>
  <div>Everyday People</div>
  <div>My name is ACE</div>
  <div>Hello world</div>
</div> 
```

解析 DOM 以将 XPath 信息存储在数组中`arr`：

```
<script type="text/javascript" src="js/jquery/js/jquery-1.3.2.min.js"></script>
<script type="text/javascript" src="js/jquery/js/xpath-selector.js"></script>

<script type="text/javascript">
function get_XPath(elt) 
{
  var path = '';
  for (; elt && elt.nodeType == 1; elt = elt.parentNode)
  {
    var idx = $(elt.parentNode).children(elt.tagName).index(elt) + 1;
    idx > 1 ? (idx='[' + idx + ']') : (idx='');
    path = '/' + elt.tagName.toLowerCase() + idx + path;
  }
  return path;
}

var arr = Array();
htmlDoc = document;
x = htmlDoc.documentElement.childNodes;

for (i=0; i<x.length; i++)
{
  arr.push(get_XPath(x[i]));  
}
</script> 
```

稍后在脚本中，我使用存储的值`arr`来执行一些功能，例如显示、隐藏或更改节点的内容。

```
<script>
for(i=0;i<arr.length;i++)
{
  //catch the object reference with the XPath info
  $(arr[i])

}
</script> 
```

在上面的代码片段中，我得到了一个对象，但我无法获取对象引用以将其用于以下用途：

```
$(arr[i]).text(); 
```

非常欢迎任何帮助。有人研究过 jQuery XPath 选择器吗？

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-05-25T09:01:05.137

我不太确定除了选择元素之外是否需要 Xpaths。因为如果你不这样做，那么你可以将元素本身存储在 arr 数组中：

```
var arr = new Array();
htmlDoc = document;
x = htmlDoc.documentElement.childNodes;

for (i=0,b=x.length; i<b; i++){
  arr.push($(x[i]));  
} 
```

然后你可以这样做：

```
arr[i].text(); 
```

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2009-05-25T09:01:22.750

想到的第一个问题是……*你为什么*要这样做？

您生成一个元素的 XPath 并将其存储在一个数组中，以便以后可以引用该元素？为什么不只存储元素本身？

你一开始想做什么？看着你的问题，一无所知，我怀疑可能有比你更简单的方法。

# python - 在网络服务器上存储 Python 脚本

> ID：905902
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-05-25T08:42:53.190
> 
>         
> 
> 标签：python, hosting

继我之前的问题之后，如果我有一些托管，我怎样才能在他们身上放置一个 python 脚本，然后我可以从那里运行？我需要做一些特别的事情来运行它/安装一些东西吗？编辑-澄清-我希望能够上传在互联网上执行操作的脚本-没有数据存储在我的计算机上。然后我需要安排它每天运行一次。

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-05-25T09:15:32.347

您必须确保您的主机系统支持 Python。

你可以问他们。

要在脚本存在后运行脚本，您可以通过多种方式执行操作，具体取决于您想要执行的操作。

您可以使用服务器端语言来调用它（即从网页的后端），或者如果您对机器有 shell 访问权限，则可以手动调用它。

顺便说一句，托管服务提供商通常会通过托管计划管理面板提供调度工具（即 crontab 或 at 的界面），您可以使用它来启动脚本。  

首先，无论如何，您必须询问您的主机并检查 Python 的可用性。

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-05-25T08:49:29.997

通常已经安装了 python，但这取决于您的主机。问问他们。

# batch-file - [NT Batch]如何从用户输入的文件中获取目录？

> ID：905909
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2009-05-25T08:44:19.773
> 
>         
> 
> 标签：batch-file

我需要知道如何从用户输入的文件中提取目录信息，以这段代码为例：

```
 ECHO Drag and drop your .txt file here, after that press Enter:
SET txtfile=
SET /P txtfile=
ECHO.
CD %txtfile% 
```

当然这不起作用，因为我没有从 %txtfile% 提取文件路径，这里是我想要的示例输出：

```
C:\>将您的 .txt 文件拖放到此处，然后按 Enter：
C:\somefolder\somesubfolder\somefile.txt
C:\>按 Enter 继续...

C:\somefolder\somesubfolder\>

```

注意它已经改变了它的工作目录

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-05-25T08:54:56.833

您可以按如下方式提取完整路径：

```
@echo off
setlocal
echo Drag and drop your .txt file here, after that press Enter:
set txtfile=
set /p txtfile=
echo.
for %%i in (%txtfile%) do set txtdir=%%~dpi
for %%i in (%txtfile%) do set txtfil=%%~nxi
cd /d %txtdir%
dir %txtfil%
endlocal 
```

第一个 for 语句获取驱动器和路径，第二个获取文件名和扩展名。我曾经`cd /d`更改过驱动器*和*目录，只是用来`setlocal/endlocal`在脚本之外保留我的路径（如果你不关心，可以删除这些）。

可以通过运行“for /?”找到完整的 ~-修饰符。在命令窗口中。它确实是一个强大的命令，并且这些修饰符不限于“for”，它们也可以用于脚本的任何 %1 类型的参数。

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-05-25T08:58:30.727

```
ECHO Drag and drop your .txt file here, after that press Enter:
SET txtfile=
SET /P txtfile=
ECHO.
CD %txtfile%\.. 
```

我真的不知道为什么，但这适用于 XP，也适用于 NT。

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2012-02-21T21:37:49.753

答案是通过一个人所说的并修改它来使用......

paxdiablo 走在了正确的道路上，但这不是复制/粘贴的。为了让他正常工作（也许它只是为了我运行 Windows7），你需要 2 个文件。

第一个文件：drag_drop.bat

```
@echo off
echo Drag and drop your .txt file here, after that press Enter:
set txtfile=
set /p txtfile=
echo.%txtfile%
call c:\temp\process_filename.bat %txtfile% 
```

第二个文件：process_filename.bat

```
FOR %%i in (%txtfile%) do set txtdir=%~dp1
cmd /K "cd %txtdir%" 
```

我必须使用 2 个文件的原因是因为 %~dp1 的触发器（paxdiablo 的语法错误 - 无意冒犯我知道你有 187k 代表，我为此给你道具 [你有 %%~dpi, %%在 echo 中用于禁用特殊字符 '%' ，而 dp1 是允许您从文件名中去除引号、文件路径的分隔符 - %%~nxi] 也是如此）

无论如何，您需要调用批处理文件并传递另一个文件名。这是第二个出现的地方。这个删除了必要的信息，然后允许您访问该路径，然后在您的 cmd 提示符下打开该目录。

**或者**

您可以从同一个文件中执行此操作...

```
@echo off
setlocal
IF '%process%'=='1' goto processFile
echo Drag and drop your .txt file here, after that press Enter:
set txtfile=
set /p txtfile=
echo.%txtfile%
set process=1
call c:\temp\dragdrop.bat %txtfile%

:processFile
set txtdir=
FOR %%1 in (%txtfile%) do set txtdir=%~dp1
cmd /K "cd %txtdir%"
endlocal 
```

# iis - 未引发 Global.asax 事件

> ID：905916
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2009-05-25T08:47:13.260
> 
>         
> 
> 标签：iis, events, deployment, web-applications, global-asax

在 Global.asax（用于应用程序启动等）中声明的 IIS 6 方法上部署后不会执行。IIS 5 上的相同代码可以正常工作。可能是什么原因？是权限/配置的问题吗？

* * *

## 回答 #1

> 赞同：3
> 
>             
> 
> 时间：2009-05-25T12:43:48.573

通过从根目录中删除文件 precompiledapp.config 来修复。

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-05-25T10:17:15.433

IIS 中的虚拟文件夹是否配置为“应用程序”？

# audio - 声音匹配/搜索

> ID：905917
> 
>         
> 
> 赞同：5
> 
>         
> 
> 时间：2009-05-25T08:47:14.617
> 
>         
> 
> 标签：audio

实际上，声音匹配/搜索的当前状态是什么？我目前正在远程参与规划一个 Web 应用程序，该应用程序将包含并公开一个记录的短音频剪辑数据库（最多 3-5 秒，人名）。有人提出了一个问题，是否可以根据用户语音输入来实现搜索。我的直觉告诉我，无论从计算角度还是从算法的角度来看，这都是一项不可能完成的任务，尤其是在 Web 应用程序中（而且它不是应用程序的核心功能）。我意识到可能有许多学术项目，这将是一个很好的研究课题，但它不是任何可以作为附加功能实现到中型 Web 应用程序的东西。

我知道在不花更多时间自己研究的情况下提出关于 SO 的问题并不是很负责任，但我一直注意到在 SO 上提出问题比随机谷歌搜索更有效、更准确、更快。

* * *

## 回答 #1

> 赞同：7
> 
>             
> 
> 时间：2009-05-25T08:58:11.553

那里有一些音频指纹识别技术（主要是专有的），它本质上是“散列”音频文件。然后搜索是一个简单的哈希表或数据库查找。

[Musicbrainz 对这里](http://musicbrainz.org/doc/Audio_Fingerprint)的各种技术有很好的了解

这些指纹是否适合或准确适合您的特定情况，我无法告诉您。

* * *

## 回答 #2

> 赞同：5
> 
>             
> 
> 时间：2009-05-25T09:16:45.930

我不确定您是尝试根据输入来识别说话者，还是将输入与数据库中的名称相匹配。然而：我曾经有这个想法来开发一个度量来计算两个口语单词的“距离”。我从来没有接近实现，但我想出了以下几点：

1）您需要定义音频的重要特征。这是尼克在他的回答中描述的“散列”部分。即使是频谱图也可能包含太多有用的信息。我发现一种可能有趣的方法（没有任何关于语音研究的理论知识）是 MFCC（即梅尔频率倒谱系数）。etsi.org 上有免费代码（查找语音识别和标准）。

2）语速可能会有所不同，这会使事情变得复杂。动态时间扭曲可以用来解决这个问题。有关示例，请参见此[Matlab 代码。](http://www.ee.columbia.edu/~dpwe/resources/matlab/dtw/)

我认为这不会很容易实现，并且需要很多调整。而且它绝对不是最先进的。

# vb.net - 将数组从 VB.NET 编组到 COM 对象

> ID：905923
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2009-05-25T08:49:21.743
> 
>         
> 
> 标签：vb.net, interop, marshalling

我有一个调用 COM 方法的 VB6 程序，将 2 个数组作为参数传递，并期望填充 2 个数组作为响应。

代码是这样的，其中 ItemIDs 和 ItemClientHandles 是输入数组参数，而 MyItemServerHandles 和 Errors 由 COM 对象填充。

```
Dim ItemIDs(2) As String
Dim ItemClientHandles(2) As Long
Dim Errors() As Long             ' Array for returned Item related errors
Dim MyItemServerHandles() As Long   ' Server Handles for Items

ItemIDs(1) = "2,VW1000,word"
ItemIDs(2) = "2,VW1002,word"

ItemClientHandles(1) = 1
ItemClientHandles(2) = 2

Call MyItems.AddItems(2, ItemIDs, ItemClientHandles, MyItemServerHandles, Errors) 
```

现在我想从 VB.NET 调用相同的方法，并尝试这样的方法来定义数组：

```
<MarshalAs(UnmanagedType.LPArray, ArraySubType:=UnmanagedType.I4, SizeConst:=2)> Private MyItemServerHandles(2) As Int32 ' Server Handles for Items
<MarshalAs(UnmanagedType.LPArray, ArraySubType:=UnmanagedType.LPWStr, SizeConst:=2)> Private ItemIDs(2) As String
<MarshalAs(UnmanagedType.LPArray, ArraySubType:=UnmanagedType.I4, SizeConst:=2)> Private ItemClientHandles(2) As Int32
<MarshalAs(UnmanagedType.LPArray, ArraySubType:=UnmanagedType.I4, SizeConst:=2)> Dim Errors(2) As Int32 ' Array for returned Item related errors 
```

但无法让它工作，因为我收到一个错误（我尝试从意大利语翻译）：

> 无法将对象从“System.Int32[*]”类型转换为“System.Int32[]”类型

将数组从 VB.NET 托管代码编组为非托管 COM 代码的正确方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-05-25T08:59:41.910

解决。

输出数组必须简单地声明为

```
Private MyItemServerHandles As System.Array
Private Errors As System.Array 
```

从调用返回时，它们将被正确编组为 Int32 数组。

# c - 在嵌入式 C 中使用带有 sprintf() 的浮点数

> ID：905928
> 
>         
> 
> 赞同：31
> 
>         
> 
> 时间：2009-05-25T08:50:03.847
> 
>         
> 
> 标签：c, embedded, floating-point, printf

伙计们，我想知道`float`变量是否可以在`sprintf()`函数中使用。

就像，如果我们写：

```
sprintf(str,"adc_read = %d \n",adc_read); 
```

其中`adc_read`是一个整数变量，它将存储字符串

> `"adc_read = 1023 \n"`

在`str`（假设  `adc_read = 1023`）

如何使用浮点变量代替整数？

* * *

## 回答 #1

> 赞同：58
> 
>             
> 
> 时间：2009-05-25T09:13:56.967

由于您使用的是嵌入式平台，因此您很可能没有来自`printf()`-style 函数的全部功能。

假设你有浮动（对于嵌入式的东西仍然不一定是给定的），你可以用类似的东西来模拟它：

```
char str[100];
float adc_read = 678.0123;

char *tmpSign = (adc_read < 0) ? "-" : "";
float tmpVal = (adc_read < 0) ? -adc_read : adc_read;

int tmpInt1 = tmpVal;                  // Get the integer (678).
float tmpFrac = tmpVal - tmpInt1;      // Get fraction (0.0123).
int tmpInt2 = trunc(tmpFrac * 10000);  // Turn into integer (123).

// Print as parts, note that you need 0-padding for fractional bit.

sprintf (str, "adc_read = %s%d.%04d\n", tmpSign, tmpInt1, tmpInt2); 
```

您需要根据整数的大小限制小数点后有多少个字符。例如，对于 16 位有符号整数，您只能使用四位数字（9,999 是可以表示的最大 10 次幂）。

但是，有一些方法可以通过进一步处理小数部分来处理这个问题，每次将其移动四位小数（并使用/减去整数部分），直到获得所需的精度。

* * *

**更新：**

您提到的最后一点是您`avr-gcc`在对其他答案之一的回应中使用的。我发现以下网页似乎描述了您在[此处](http://winavr.scienceprog.com/avr-gcc-tutorial/using-sprintf--function-for-float-numbers-in-avr-gcc.html)`%f`的`printf()`陈述中需要执行的操作。

正如我最初怀疑的那样，您需要做一些额外的工作才能获得浮点支持。这是因为嵌入式东西很少需要浮点（至少我做过的东西都没有）。它涉及在您的 makefile 中设置额外的参数并与额外的库链接。

但是，由于需要处理通用输出格式，这可能会大大增加您的代码大小。如果您可以将浮点输出限制为小数点后 4 位或更少，我建议将我的代码变成一个函数并使用它——它可能占用更少的空间。

万一该链接消失了，您要做的就是确保您的 gcc 命令具有`"-Wl,-u,vfprintf -lprintf_flt -lm`“。这意味着：

*   强制 vfprintf 最初是未定义的（以便链接器必须解决它）。

*   `printf()`指定用于搜索的浮点库。

*   指定用于搜索的数学库。

* * *

## 回答 #2

> 赞同：6
> 
>             
> 
> 时间：2012-05-24T21:56:50.007

这样的事情不是很容易吗：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

char str[10];
float adc_read = 678.0123;

dtostrf( adc_read, 3, 4, temp );
sprintf(str,"adc_read = %10s \n", temp);
printf(temp); 
```

* * *

## 回答 #3

> 赞同：2
> 
>             
> 
> 时间：2009-05-25T08:51:31.007

使用`%f`修饰符：

```
sprintf (str, "adc_read = %f\n", adc_read); 
```

例如：

```
#include <stdio.h>

int main (void) 
{
    float x = 2.5;
    char y[200];

    sprintf(y, "x = %f\n", x);
    printf(y);
    return 0;
} 
```

产生这个：

> x = 2.500000

* * *

## 回答 #4

> 赞同：2
> 
>             
> 
> 时间：2009-05-25T08:53:32.297

是的，当然，花车并没有什么特别之处。您可以使用 printf() 中用于浮点数和任何其他数据类型的格式字符串。

**编辑**
我尝试了这个示例代码：

```
float x = 0.61;
char buf[10];
sprintf(buf, "Test=%.2f", x);
printf(buf); 
```

输出为：测试=0.61

* * *

## 回答 #5

> 赞同：2
> 
>             
> 
> 时间：2009-05-25T09:00:53.187

是的你可以。但是，这取决于您链接的 C 库，您需要了解后果。

由于您正在为嵌入式应用程序编程，请意识到浮点支持已针对许多嵌入式体系结构进行了仿真。在这种浮点支持中进行编译最终会显着增加可执行文件的大小。

* * *

## 回答 #6

> 赞同：1
> 
>             
> 
> 时间：2009-05-25T09:01:33.763

不要指望 sprintf（或任何其他带有可变参数的函数）会自动转换任何东西。编译器不会尝试读取格式字符串并为您进行转换；在运行时，sp​​rintf 没有可用的元信息来确定堆栈上的内容；它只是弹出字节并将它们解释为格式字符串给定的。sprintf(myvar, "%0", 0); 立即出现段错误。

所以：格式字符串和其他参数必须匹配！

* * *

## 回答 #7

> 赞同：0
> 
>             
> 
> 时间：2009-05-25T09:15:58.960

是的，没有。尽管其他一些回复说了什么，但 C 编译器**需要**为`sprintf()`和所有其他可变参数函数执行转换，如下所示：

*   `char`=>`int`

*   `short`=>`int`

*   `float`=>`double`

（以及上述整数类型的有符号/无符号变体）

它这样做正是因为`sprintf()`（和其他`print()`-family 功能）没有它将无法使用。（当然，[它们实际上是非常不可用的](http://accu.org/index.php/journals/1539)。）

但是您不能假设任何其他转换，并且您的代码将具有未定义的行为 - 阅读：崩溃！- 如果你这样做。

* * *

## 回答 #8

> 赞同：0
> 
>             
> 
> 时间：2009-05-25T10:35:16.367

查看适用于您平台的 sprintf 的文档。它通常是 %f 或 %e。您唯一能找到明确答案的地方是文档……如果没有文档，您所能做的就是联系供应商。

它是什么平台？有人可能已经知道文档在哪里...... :)

* * *

## 回答 #9

> 赞同：0
> 
>             
> 
> 时间：2009-12-31T04:06:02.803

不要这样做；C/C++ 中的整数总是向下舍入，因此不需要使用 floor 函数。

```
char str[100]; 
int d1 = value; 
```

更好用

```
int d1 = (int)(floor(value)); 
```

然后你不会得到整数部分的四舍五入（68.99999999999999999 变成 69.00..）。很难避免使用 68.09999847 而不是 68.1 - 任何浮点格式都具有有限的精度。

* * *

## 回答 #10

> 赞同：0
> 
>             
> 
> 时间：2016-01-12T04:49:50.127

*%g*可以这样做：

```
#include <stdio.h>
int main() {
  float w = 234.567;
  char x[__SIZEOF_FLOAT__];
  sprintf(x, "%g", w);
  puts(x);
} 
```

* * *

## 回答 #11

> 赞同：0
> 
>             
> 
> 时间：2019-03-15T16:29:28.517

许多嵌入式系统具有不处理浮点数的有限 snprintf 函数。我写了这个，它相当有效地完成了这个把戏。我选择使用 64 位无符号整数来处理大浮点数，因此请随意将它们减少到 16 位或任何资源有限的需求。

```
#include <stdio.h>   // for uint64_t support.

int  snprintf_fp( char destination[], size_t available_chars, int decimal_digits,
                  char tail[], float source_number )
{
    int   chars_used  = 0;    // This will be returned.

    if ( available_chars > 0 )
    {
        // Handle a negative sign.
        if ( source_number < 0 )
        {
            // Make it positive
            source_number = 0 - source_number;
            destination[ 0 ] = '-';
            ++chars_used;
        }

        // Handle rounding
        uint64_t zeros = 1;
        for ( int i = decimal_digits; i > 0; --i )
            zeros *= 10;

        uint64_t source_num = (uint64_t)( ( source_number * (float)zeros ) + 0.5f );

        // Determine sliding divider max position.
        uint64_t  div_amount = zeros;       // Give it a head start
        while ( ( div_amount * 10 ) <= source_num )
            div_amount *= 10;

        // Process the digits
        while ( div_amount > 0 )
        {
            uint64_t whole_number = source_num / div_amount;
            if ( chars_used < (int)available_chars )
            {
                destination[ chars_used ] = '0' + (char)whole_number;
                ++chars_used;

                if ( ( div_amount == zeros ) && ( zeros > 1 ) )
                {
                    destination[ chars_used ] = '.';
                    ++chars_used;
                }
            }
            source_num -= ( whole_number * div_amount );
            div_amount /= 10;
        }

        // Store the zero.
        destination[ chars_used ] = 0;

        // See if a tail was specified.
        size_t tail_len = strlen( tail );

        if ( ( tail_len > 0 ) && ( tail_len + chars_used < available_chars ) )
        {
            for ( size_t i = 0; i <= tail_len; ++i )
                destination[ chars_used + i ] = tail[ i ];
            chars_used += tail_len;
        }
    }

    return chars_used;
}

main()
{
    #define TEMP_BUFFER_SIZE 30
    char temp_buffer[ TEMP_BUFFER_SIZE ];
    char  degrees_c[] = { (char)248, 'C', 0 };
    float  float_temperature = 26.845f;

    int len = snprintf_fp( temp_buffer, TEMP_BUFFER_SIZE, 2, degrees_c, float_temperature );
} 
```

* * *

## 回答 #12

> 赞同：0
> 
>             
> 
> 时间：2020-01-01T15:37:27.737

类似于上面的paxdiablo。此代码插入到更广泛的应用程序中，可与 STM32 NUCLEO-F446RE 一起正常工作。

```
#include <stdio.h>
#include <math.h>
#include <string.h>
void IntegFract(char *pcIntegStr, char *pcFractStr, double dbValue, int iPrecis);

main()
{
   char acIntegStr[9], acFractStr[9], char counter_buff[30];
   double seconds_passed = 123.0567;
   IntegFract(acIntegStr, acFractStr, seconds_passed, 3);
   sprintf(counter_buff, "Time: %s.%s Sec", acIntegStr, acFractStr);
}

void IntegFract(char *pcIntegStr, char *pcFractStr, double dbValue, int 
iPrecis)
{
    int iIntegValue = dbValue;
    int iFractValue = (dbValue - iIntegValue) * pow(10, iPrecis);
    itoa(iIntegValue, pcIntegStr, 10);
    itoa(iFractValue, pcFractStr, 10);
    size_t length = strlen(pcFractStr);
    char acTemp[9] = "";
    while (length < iPrecis)
    {
        strcat(acTemp, "0");
        length++;
    }
    strcat(acTemp, pcFractStr);
    strcpy(pcFractStr, acTemp);
} 
```

counter_buff 将包含 123.056 。

* * *

## 回答 #13

> 赞同：-2
> 
>             
> 
> 时间：2009-05-25T08:51:47.057

是的，使用 %f

# windbg - windbg 反汇编函数命令 (uf) 需要一些格式

> ID：905929
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-05-25T08:50:12.677
> 
>         
> 
> 标签：windbg

附加notepad.exe后，我在windbg中执行了uf命令命令是uf notepad！WinMain我得到以下输出

```
0:000> uf notepad!WinMain
notepad!WinMain:
0021138d mov     edi,edi
0021138f push    ebp
00211390 mov     ebp,esp
00211392 sub     esp,1Ch
00211395 push    esi
00211396 push    edi
00211397 push    6
002113c8 test    eax,eax
002113ca jl      notepad!WinMain+0x118 (00211c93)

notepad!WinMain+0x43:
002113d0 push    ebx
002113d1 push    dword ptr [ebp+14h]
002113d4 push    edi
002113d5 call    notepad!SkipProgramName (00213170)
002113e5 je      notepad!WinMain+0x10e (00211ca9)

notepad!WinMain+0x5e:
002113eb push    esi
002113ec push    esi
002113ed call    dword ptr [notepad!_imp__GetCurrentProcessId (00211084)] 
```

依此类推..如果您在每条跳转指令之后注意到它会创建一个新块，例如

```
002113ca jl      notepad!WinMain+0x118 (00211c93)

notepad!WinMain+0x43: 
```

并且在

```
002113e5 je      notepad!WinMain+0x10e (00211ca9)

notepad!WinMain+0x5e: 
```

所以我想知道WinDbg中的一个设置，我可以在每次跳转时省略创建新块以进行函数反汇编。为什么我不能像使用 U 命令那样获得输出？

所以我正在寻找这样的选择

```
002113c8 test    eax,eax002113ca 
jl      notepad!WinMain+0x118 (00211c93)
**blank line omitted**
**notepad!WinMain+0x43:** omitted**
002113d0 push    ebx002113d1 push    dword ptr [ebp+14h] 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：5
> 
>             
> 
> 时间：2009-05-25T14:48:47.087

因为函数代码可能分散在您的代码部分中（由链接器决定在哪里放置什么，通常，它最终会将执行最多的部分移动到顶部）

现在，您**不在乎**您是否对特定功能感兴趣-它只会按顺序转储指令，而**uf**必须查找所有相关代码块并将它们格式化在一起以使其看起来像一个完整的功能。

编辑：不幸的是（据我所知）windbg 没有立即设置来满足您的需求 - 在这里您可能不得不求助于某种后处理（漂亮的打印脚本来删除空白行和其他任何你需要）。

# wpf - 如何在 WPF 中为数据触发提供多个条件？

> ID：905932
> 
>         
> 
> 赞同：184
> 
>         
> 
> 时间：2009-05-25T08:51:03.440
> 
>         
> 
> 标签：wpf, datatrigger

如何在 WPF 中为数据触发提供多个条件？

* * *

## 回答 #1

> 赞同：297
> 
>             
> 
> 时间：2009-05-25T08:53:22.843

使用[MultiDataTrigger](http://msdn.microsoft.com/en-us/library/system.windows.multidatatrigger.aspx)类型

```
<Style TargetType="ListBoxItem">
    <Style.Triggers>
      <DataTrigger Binding="{Binding Path=State}" Value="WA">
        <Setter Property="Foreground" Value="Red" />
      </DataTrigger>    
      <MultiDataTrigger>
        <MultiDataTrigger.Conditions>
          <Condition Binding="{Binding Path=Name}" Value="Portland" />
          <Condition Binding="{Binding Path=State}" Value="OR" />
        </MultiDataTrigger.Conditions>
        <Setter Property="Background" Value="Cyan" />
      </MultiDataTrigger>
    </Style.Triggers>
  </Style> 
```

* * *

## 回答 #2

> 赞同：55
> 
>             
> 
> 时间：2011-01-11T16:36:34.720

@jasonk - 如果你想有“或”然后否定所有条件，因为 (A and B) <=> ~(~A or ~B)

但如果您有布尔值以外的值，请尝试使用类型转换器：

```
<MultiDataTrigger.Conditions>
    <Condition Value="True">
        <Condition.Binding>
            <MultiBinding Converter="{StaticResource conditionConverter}">
                <Binding Path="Name" />
                <Binding Path="State" />
            </MultiBinding>
        </Condition.Binding>
        <Setter Property="Background" Value="Cyan" />
    </Condition>
</MultiDataTrigger.Conditions> 
```

您可以以任何您喜欢的方式使用 Convert 方法中的值来生成适合您的条件。

* * *

## 回答 #3

> 赞同：21
> 
>             
> 
> 时间：2015-02-19T18:13:03.367

为了详细说明[@serine 的答案](https://stackoverflow.com/a/4660030/1174169)并说明使用非平凡的多值条件：我需要在布尔条件的项目上显示“暗淡”覆盖`NOT a AND (b OR NOT c)`。

> 作为背景，这是一个“多项选择”问题。如果用户选择了错误的答案，它将被**禁用**（变暗并且无法再次选择）。自动化代理能够**专注**于任何特定选择以给出解释（突出显示边界）。*当代理专注于一个项目时，即使它被禁用*也不应该变暗。所有未聚焦的项目都被标记为失**焦**，并且应该变暗。
> 
> 因此，调光的逻辑是：
> 
> `NOT IsFocused AND (IsDefocused OR NOT Enabled)`

为了实现这个逻辑，我做了一个泛型`IMultiValueConverter`命名（尴尬）来匹配我的逻辑

```
// 'P' represents a parenthesis
//     !  a &&  ( b ||  !  c )
class NOT_a_AND_P_b_OR_NOT_c_P : IMultiValueConverter
{
    // redacted [...] for brevity
    public object Convert(object[] values, ...)
    {
        bool a = System.Convert.ToBoolean(values[0]);
        bool b = System.Convert.ToBoolean(values[1]);
        bool c = System.Convert.ToBoolean(values[2]);

        return !a && (b || !c);
    }
    ...
} 
```

在 XAML 中，我`MultiDataTrigger`在`<Style><Style.Triggers>`资源中使用它

```
<MultiDataTrigger>
    <MultiDataTrigger.Conditions>
        <!-- when the equation is TRUE ... -->
        <Condition Value="True">
            <Condition.Binding>
                <MultiBinding Converter="{StaticResource NOT_a_AND_P_b_OR_NOT_c_P}">
                    <!-- NOT IsFocus AND ( IsDefocused OR NOT Enabled ) -->
                    <Binding Path="IsFocus"/>
                    <Binding Path="IsDefocused" />
                    <Binding Path="Enabled" />
                </MultiBinding>
            </Condition.Binding>
        </Condition>
    </MultiDataTrigger.Conditions>
    <MultiDataTrigger.Setters>
        <!-- ... show the 'dim-out' overlay -->
        <Setter Property="Visibility" Value="Visible" />
    </MultiDataTrigger.Setters>
</MultiDataTrigger> 
```

为了完整起见，我的转换器定义在`ResourceDictionary`

```
<ResourceDictionary xmlns:conv="clr-namespace:My.Converters" ...>
    <conv:NOT_a_AND_P_b_OR_NOT_c_P x:Key="NOT_a_AND_P_b_OR_NOT_c_P" />
</ResourceDictionary> 
```

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2020-04-29T22:50:43.867

**这个答案仅适用于动画**

**如果你想实现 AND 逻辑，你应该使用 MultiTrigger，这里是一个例子：**

假设我们想要做一些动作，如果属性 Text="" (空字符串) **AND** IsKeyboardFocused="False"，那么您的代码应如下所示：

```
<MultiTrigger>
    <MultiTrigger.Conditions>
        <Condition Property="Text" Value="" />
        <Condition Property="IsKeyboardFocused" Value="False" />
    </MultiTrigger.Conditions>
        <MultiTrigger.EnterActions>
            <!-- Your actions here -->
        </MultiTrigger.EnterActions>
</MultiTrigger> 
```

**如果你想实现 OR 逻辑，有几种方法，这取决于你尝试做什么：**

第一种选择是使用多个触发器。

因此，假设您想要在 Text=""**或**IsKeyboardFocused="False" 时执行某些操作，

那么您的代码应该如下所示：

```
<Trigger Property="IsEnabled" Value="false">
    <Setter Property="Opacity" TargetName="border" Value="0.56"/>
</Trigger>
<Trigger Property="IsMouseOver" Value="true">
    <Setter Property="BorderBrush" TargetName="border" 
            Value="{StaticResource TextBox.MouseOver.Border}"/>
</Trigger> 
```

但是这里的问题是，如果我想在 Text ISN'T null**或**IsKeyboard="True" 的情况下做某事，我该怎么办？这可以通过第二种方法来实现：

回忆德摩根的规则，即 !(!x && !y) = x || 是的。

所以我们将使用它来解决前面的问题，通过编写一个多重触发器，它在 Text="" 和 IsKeyboard="True" 时触发，我们将在**EXIT ACTIONS**中执行我们的操作，如下所示：

```
<MultiTrigger>
    <MultiTrigger.Conditions>
        <Condition Property="Text" Value="" />
        <Condition Property="IsKeyboardFocused" Value="False" />
    </MultiTrigger.Conditions>
    <MultiTrigger.ExitActions>
        <!-- Do something here -->
    </MultiTrigger.ExitActions>
</MultiTrigger> 
```

# c# - 在 ToDictionary() 方法中填充值字段的 Lambda 方法？

> ID：905933
> 
>         
> 
> 赞同：6
> 
>         
> 
> 时间：2009-05-25T08:51:08.447
> 
>         
> 
> 标签：c#, .net, dictionary, lambda

我有两个 IEnumerable

```
IEnumerable<MyObject> allowedObjects = MyService.GetAllowedObjects();
IEnumerable<MyOBject> preferedObjects = MyService.GetPreferedObjects(); 
```

我们可以安全地假设preferedObjects 将始终是allowedObjects 的子集。

我想创建一个`IDictionary<MyObject, bool>`. 键是来自 allowedObjects 的 MyObjects 集合的对象，如果 MyObject 实例也在preferedObjects 可枚举中，则 bool 为真。

我可以通过枚举它们并一一添加来做到这一点，但我希望能够做这样的事情：

```
IDictionary<MyObject, bool> selectedObjects = allowedObjects
    .ToDictionary(o => new KeyValuePair<MyObject, bool>()
        { Key = q,
          Value = preferedObjects.Any(q)
        }
     ); 
```

**更新**

交换包含任何；建议最多的解决方案是我首先尝试的解决方案，但由于某种原因它不被接受：

```
IDictionary<MyObject, bool> selectedObjects = allowedObjects
    .ToDictionary<MyObject, bool>(o => o, preferedObjects.Any(o)); 
```

Visual Studio 说第一种方法不返回布尔值。这是真的，但主要是因为 bool 不是开始的正确结果......

然后它说它无法推断第二个 lambda 的类型......

如你所见，我试图明确定义类型以提供帮助推理，但它不能解决任何问题..

建议？

免责声明：名称和代码被截断以将焦点保持在应有的位置

* * *

## 回答 #1

> 赞同：8
> 
>             
> 
> 时间：2009-05-25T08:55:53.133

我不记得 Linq 是否在`IEnumerable<T>`. 如果没有，您可以使用 Any：

```
var dict = allowedObjects.ToDictionary(o => o,
    o => preferredObjects.Contains(o)); 
```

** 编辑 ** 是的，刚刚测试了一下，确实有一个 Contains() 扩展方法，所以上面的代码有效。

* * *

## 回答 #2

> 赞同：5
> 
>             
> 
> 时间：2009-05-25T08:56:10.683

[`Enumerable.ToDictionary`](http://msdn.microsoft.com/library/system.linq.enumerable.todictionary)有多个重载。其中一些需要第二个委托（因此您可以传递一个 lambda）来返回与键一起使用的值。

就像是：

```
var secondDict = firstDictionary
                 .Where(p => SomeCondition(p))
                 .ToDictionary(p => p.Key, p => p.Value); 
```

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2009-05-25T08:59:43.453

您快到了：

```
IDictionary<MyObject, bool> selectedObjects = allowedObjects
    .ToDictionary(o => o, o => preferedObjects.Contains(q)); 
```

扩展方法使用`ToDictionary`两个 lambda 表达式来生成键/值对而不是`KeyValuePair`类型。

您可以通过为您的和集合使用`HashSet<T>`对象来显着加快速度，但除非您的列表特别大/性能很重要，否则我不会打扰。`allowedObjects``preferredObjects`

* * *

## 回答 #4

> 赞同：1
> 
>             
> 
> 时间：2009-05-25T09:11:03.103

您当然可以创建自己的扩展方法。ToDictionary 通过将源中的所有元素添加为值并使用 lambda 作为键来简单地创建一个字典。您可以使用不同的方法创建自己的。当您使用“包含”时，我认为这样做不是一个好主意，因为它是一个缓慢的操作（线性搜索，对于 allowedObjects 中的每个元素，您都在枚举首选对象）。

一种方法是将所有首选对象添加到 HashSet 并在其上使用 Contains。另一种可能是使用 linq 查询，您可以将实际对象与首选对象连接起来，使用 join into 并使用 DefaultIfEmpty。这更有效：

```
List<MyObject> allowedObjects = new List<MyObject>() { new MyObject("one"), new MyObject("two"), new MyObject("three")};
List<MyObject> preferredObjects = allowedObjects.Take(2).ToList();

var q = from a in allowedObjects
        join p in preferredObjects on a equals p into ap
        from x in ap.DefaultIfEmpty()
        let isPreferred = (x != null)
        let toUse = x ?? a
        select new { toUse, isPreferred };

Dictionary<MyObject, bool> selectedObjects = new Dictionary<MyObject, bool>();
foreach(var v in q)
{
    selectedObjects.Add(v.toUse, v.isPreferred);

    Console.WriteLine("{0}, {1}", v.toUse.Foo, v.isPreferred);
} 
```

# jquery - jQuery：将克隆添加到容器

> ID：905937
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-05-25T08:52:25.247
> 
>         
> 
> 标签：jquery, clone

是否有其他方法可以将克隆元素添加到容器中，而不是：

```
$(".product").draggable({
    helper: 'clone'
});

$("#container").append(ui.draggable.clone()); 
```

append 只是将元素放在#container 中的最后一个元素之后。我想决定职位应该在哪里。

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-05-25T13:19:29.640

您可以使用`before()`或`after()`在特定位置插入元素。

```
$(".product").draggable({
    helper: 'clone'
});

$("#container #target").after(ui.draggable.clone()); 
```

# iphone - 如何重新加载父 UINavigationController？

> ID：905943
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-05-25T08:53:51.470
> 
>         
> 
> 标签：iphone, cocoa-touch

我的 RootViewController 包含一个表格视图和一个导航栏。点击一行后，另一个视图控制器被推送到堆栈中，即 SecondViewController。如果我单击返回按钮，SecondViewController 会从堆栈中弹出，但父视图控制器的数据已过期。

如何重新加载 RootViewController 的数据？我的第一次尝试是实施

```
- (void)navigationController:(UINavigationController *)navigationController willShowViewController:(UIViewController *)viewController animated:(BOOL)animated 
```

并再次调用 viewdidLoad。

问题是，在第一次加载时，viewDidLoad 会被调用两次。

* * *

## 回答 #1

> 赞同：9
> 
>             
> 
> 时间：2009-05-25T11:27:37.570

在 viewWillAppear: 方法中加载表中的数据，而不是 viewDidLoad。每次视图出现时都会调用 viewWillAppear，而 viewDidLoad 只会在创建视图时调用一次。

因此，在 viewWillAppear: 中加载数据将确保您的表格在显示时具有最新数据。

# asp.net - 在 ASP.Net 中，我可以使用 Javascript 和 PageMethods 调用用户控件 WebMethod 吗？

> ID：905944
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-05-25T08:54:34.667
> 
>         
> 
> 标签：asp.net, web-services, asmx, pagemethods

它说 PageMethods 是未定义的。

* * *

## 回答 #1

> 赞同：0
> 
>             
> 
> 时间：2009-05-25T09:01:35.727

是的。你绝对可以。只需确保 WebMethod 已声明为`public static`，您已使用正确的命名空间引用它，并且`EnablePageMethods`的属性`ScriptManager`设置为`true`。

# tsql - 确定正在执行的 T-Sql 脚本的状态

> ID：905945
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-05-25T08:54:47.113
> 
>         
> 
> 标签：tsql

我正在运行一个 T-SQL 脚本来将旧数据迁移到我们的新数据库。处理时间太长了！现在已经超过2个半小时了。有没有办法检查执行脚本的状态？

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-05-25T09:31:35.573

您可以在新数据库上不断运行“select count(*) from table_being_populated”并将其与旧数据库中的计数进行比较，并观察它随着脚本运行而增长，以了解当前有多少数据在新数据库中D B。

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-05-26T19:37:57.833

您没有移动数据是某种光标是吗？如果您一次移动一条记录，这可能需要几天或几个月的时间，甚至取决于数据量。现在，如果您有大量数据要移动，您可能需要一个循环，但在时间游标上仍然不是一条记录，而是一个处理一批记录的循环。插入一百万条记录通常比一次插入一百万条记录要快。

如果所有内容当前都在一个事务中，那么如果您需要停止并重新考虑这个 long_running 进程，您也可能会遇到问题，因为它必须回滚所有内容。这可能需要很长时间。

由于您没有使用日志记录或其他方式轻松查看进度，因此我认为监视插入到的表上的 count(*) 的建议是一个很好的建议（并且可能是您唯一真正的选择）。只要确保您没有使用锁，否则在插入完成之前结果可能不会返回。还要检查是否发生阻塞，通常当这样的事情花费太长时间时，其他一些进程正在阻塞它。

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-05-25T09:05:16.827

一种简单的方法是`print`在脚本中每隔一段时间包含语句。

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2009-05-25T09:47:28.320

```
RAISERROR ('marker', 10, 1) WITH NOWAIT 
```

这会立即向客户提供反馈：PRINT 可能不会。严重性 10 也意味着这是一个警告，因此不会使代码崩溃。

# java - java - 如何在java中转换泛型列表类型？

> ID：905964
> 
>         
> 
> 赞同：16
> 
>         
> 
> 时间：2009-05-25T09:00:48.677
> 
>         
> 
> 标签：java, generics, casting

好吧，我有一个类 Customer（没有基类）。

我需要从 LinkedList 转换为 List。有什么干净的方法可以做到这一点吗？

请注意，我需要将其转换为 List。没有其他类型会这样做。（我正在使用 Slim 和 FitNesse 开发一个测试夹具）。

* * *

编辑：好的，我想我需要在这里给出代码示例。

```
import java.util.*;
public class CustomerCollection
{
    protected LinkedList<Customer> theList;

    public CustomerCollection()
    {
        theList = new LinkedList<Customer>();
    }

    public void addCustomer(Customer c){ theList.add(c); }
    public List<Object> getList()
    {
        return (List<? extends Object>) theList;
    }
} 
```

所以按照Yuval A的说法，我终于把代码写成这样了。但我得到这个错误：

```
CustomerCollection.java:31: incompatible types
found   : java.util.List<capture#824 of ? extends java.lang.Object>
required: java.util.List<java.lang.Object>
        return (List<? extends Object>)theList;
               ^
1 error 
```

那么，做这个演员的正确方法是什么？

* * *

## 回答 #1

> 赞同：31
> 
>             
> 
> 时间：2009-05-25T09:03:43.837

你不需要投射。`LinkedList`实现`List`，因此您无需在此处进行强制转换。

即使您想向下转换为 a `List`of `Object`s，您也可以使用泛型来做到这一点，如下面的代码：

```
LinkedList<E> ll = someList;
List<? extends Object> l = ll; // perfectly fine, no casting needed 
```

现在，在您进行编辑后，我了解您要做什么，这是不可能的，如果不创建`List`这样的新内容：

```
LinkedList<E> ll = someList;
List<Object> l = new LinkedList<Object>();
for (E e : ll) {
    l.add((Object) e); // need to cast each object specifically
} 
```

我会解释为什么这是不可能的。考虑一下：

```
LinkedList<String> ll = new LinkedList<String>();
List<Object> l = ll; // ERROR, but suppose this was possible
l.add((Object) new Integer(5)); // now what? How is an int a String??? 
```

有关详细信息，请参阅[Sun Java 泛型教程](http://java.sun.com/j2se/1.5/pdf/generics-tutorial.pdf)。希望这可以澄清。

* * *

## 回答 #2

> 赞同：20
> 
>             
> 
> 时间：2011-05-30T05:14:51.627

这是我进行铸造的可怕解决方案。我知道，我知道，我不应该将这样的东西发布到野外，但它对于将任何对象转换为任何类型都很方便：

```
public class UnsafeCastUtil {

    private UnsafeCastUtil(){ /* not instatiable */}

    /**
    * Warning! Using this method is a sin against the gods of programming!
    */
    @SuppressWarnings("unchecked")
    public static <T> T cast(Object o){
        return (T)o;
    }

} 
```

用法：

```
Cat c = new Cat();
Dog d = UnsafeCastUtil.cast(c); 
```

现在我要为我的罪孽向编程之神祈祷......

* * *

## 回答 #3

> 赞同：2
> 
>             
> 
> 时间：2013-03-28T20:51:15.280

我为此做了这个功能，丑陋但它有效

```
public static <T> Collection<T> cast(Collection<? super T> collection, Class<T> clazz){
    return (Collection<T>)collection;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
>             
> 
> 时间：2009-05-25T11:37:00.843

```
>    public List<Object> getList() 
```

你为什么要返回 List<Object>？您不妨返回 List （不带泛型），因为这是等效的，但会使以下代码工作：

```
LinkedList<Customer> theList = new LinkedList<Customer>();

public List getList() {
    return theList;
} 
```

在具有不同泛型类型的列表之间进行转换很棘手，在这里似乎没有必要。

当然你应该返回类型 List<Customer> ...

* * *

## 回答 #5

> 赞同：0
> 
>             
> 
> 时间：2009-05-25T09:07:42.360

LinkedList 实现了 List，所以可以实现

```
List< String > list1 = new LinkedList< String >(); 
```

或者您想从 LinkedList<String> 转换为 List<int>？在这种情况下，您必须选择每个元素并将其转换为整数。

* * *

## 回答 #6

> 赞同：0
> 
>             
> 
> 时间：2009-05-25T17:42:53.577

`List<?>`你应该从你的方法中返回一个。直观地说，`getList()`返回一个列表，以便调用者可以检索其中的项目。`List<?>`（相当于`List<? extends Object>`）允许该功能。但是，您将无法通过返回的列表将任何内容放入其中，因为这不是类型安全的；但我不认为那是你需要的。

```
public List<?> getList()
{
    return theList;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
>             
> 
> 时间：2011-07-30T10:30:33.363

就放

```
public static List<Object> getList() {
    List l = test;
    return l;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
>             
> 
> 时间：2014-07-14T14:44:56.257

如果您的列表是通用类型，例如

`ArrayList<String> strList = new ArrayList<String>();
strList.add("String1");
Object o = strList;`

然后以下方法应该有效

```
public <T> List<T> getListObjectInBodyOfType(Class<T> classz, Object body) {
    if(body instanceof List<?>){
        List<?> tempList = (List<?>)body;
        if(tempList.size() > 0 && tempList.get(0).getClass().equals(classz)){
            return (List<T>) body;
        }
    }
    return new ArrayList<T>();
} 
```

如何使用它？

```
List<String> strList1 = getListObjectInBodyOfType(String.class, o); 
```

正如我之前提到的，如果对象包含通用列表，它会起作用，如果你传递一个包含混合类型元素的非通用列表，这将不起作用

* * *

## 回答 #9

> 赞同：-1
> 
>             
> 
> 时间：2009-05-25T09:08:03.763

List 是一个接口，LinkedList 是该接口的具体实现。大多数情况下，隐式转换将起作用，将 LinkedList 分配给 List，或将其传递给期望 List 的函数，它应该只是“工作”。

如有必要，也可以进行显式强制转换。

```
//This is valid
List<Customer> myList = new LinkedList<Customer>();

//Also Valid
List<Customer> myList = (List<Customer>) new LinkedList<Customer>(); 
```

# ios - 如何在 iPhone 上缩小 UIPickerView？

> ID：905969
> 
>         
> 
> 赞同：23
> 
>         
> 
> 时间：2009-05-25T09:01:34.260
> 
>         
> 
> 标签：ios, interface-builder, uipickerview, picker

我想`UIPickerView`在我的 iPhone 应用程序中降低 a 的高度，以便它只显示一行和一列。选择器视图的高度应该等于一行的高度。

我正在使用 Interface Builder 来构造`UIPickerView`，但我找不到重新调整此控件大小的简单方法。

你怎么缩小一个`UIPickerView`？

* * *

## 回答 #1

> 赞同：52
> 
>             
> 
> 时间：2009-05-25T14:40:05.153

实际上，您可以通过对封闭视图应用仿射变换来稍微缩小整个 UIPickerView。例如：

```
CGSize pickerSize = [pickerView sizeThatFits:CGSizeZero];

pickerTransformView = [[UIView alloc] initWithFrame:CGRectMake(0.0f, 0.0f, pickerSize.width, pickerSize.height)];
pickerTransformView.transform = CGAffineTransformMakeScale(0.75f, 0.75f);

[pickerTransformView addSubview:pickerView];
[self.view addSubview:pickerTransformView];
[pickerTransformView release]; 
```

通过将选取器放置在包含视图中并将缩放变换应用于该视图，将选取器缩放到其原始大小的 75%。将转换直接应用于 UIPickerView 会导致不良的绘图伪影。

但是，您正在寻找的调整大小最好通过创建自定义控件来实现。

* * *

## 回答 #2

> 赞同：3
> 
>             
> 
> 时间：2009-06-05T15:15:50.743

这是可能的和容易的！

只需以纯文本格式打开 nib 文件，然后找到选取器视图并调整度量：

```
<object class="IBUIPickerView" id="783900772">
<reference key="NSNextResponder" ref="191373211"/>
<int key="NSvFlags">292</int>
<string key="NSFrame">{{85, 68}, {150, 116}}</string> 
```

就这样！

* * *

## 回答 #3

> 赞同：2
> 
>             
> 
> 时间：2015-07-31T20:41:49.150

如果您使用故事板和/或自动布局，则 user2248258 的答案实际上有效。在那里，我想按照 Nilambar 的建议添加屏幕截图。

1.  在另一个容器视图中放置一个你想要的大小的选择器视图[![将pickerview放入另一个容器视图](https://i.stack.imgur.com/ZdgAw.png)](https://i.stack.imgur.com/ZdgAw.png)

2.  检查容器视图的 clipSubviews[![](https://i.stack.imgur.com/pgHi8.png)](https://i.stack.imgur.com/pgHi8.png)

3.  在该容器视图中将选择器水平和垂直居中对齐，同时为尾随和前导位置提供零约束[![](https://i.stack.imgur.com/zuXFJ.png)](https://i.stack.imgur.com/zuXFJ.png)

这样，选择器视图就会被剪裁到正确的大小（不会调整大小）。

结果：
[![在此处输入图像描述](https://i.stack.imgur.com/YKyTa.png)](https://i.stack.imgur.com/YKyTa.png)

* * *

## 回答 #4

> 赞同：1
> 
>             
> 
> 时间：2009-05-25T09:22:54.233

据我所知，如果你缩小它会搞砸的。

a)`UITableView+UIPickerView`

我建议您使用“a row in”`UITableView+UIPickerView`来执行此操作。您可以在 tableView 中使用一行，就像 Windows 中的 dropDownList 一样，当您点击该行时，将显示 pickerView（起初隐藏）。

b) 如果 tableView 中的数据列表很长，并且只有一项需要选择数据，则应使用以下方法滚动视图（确保计算 pickerView 的原始位置，因为它会向上/向下移动一起）：

```
 -(void)setViewMove:(BOOL)moveUP offset:(CGFloat)offset
{
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.3];
    CGRect rect = self.view.frame;

    if(moveUP)
    {
        rect.origin.y-=offset;
        rect.size.height+=offset;
    }
    else    //move down
    {
        rect.origin.y+=offset;
        rect.size.height-=offset;
    }
    self.view.frame = rect;
    [UIView commitAnimations];
} 
```

c) 您还可以为选取器添加另一个视图，并在您选择某些内容后返回此视图。

我的结论是：

如果 tableView 中只有几行，请使用 a. 

如果 tableView 中有很多行但只有其中一个需要选择器，请使用 b。

如果您在 tableView 中有很多行并且其中很多需要选择器，请使用 c.

* * *

## 回答 #5

> 赞同：1
> 
>             
> 
> 时间：2015-06-03T21:52:57.607

在 Interface Builder 中创建一个简单的 UIView。设置所需的位置和大小，添加约束。选中“剪辑子视图”复选框。然后将 Picker View 作为子视图拖放到此视图中。为选取器添加约束以在容器内水平和垂直对齐。应该做的工作。

# asp.net - 测量 Web 请求和响应的大小

> ID：905975
> 
>         
> 
> 赞同：4
> 
>         
> 
> 时间：2009-05-25T09:03:45.223
> 
>         
> 
> 标签：asp.net, ajax, performance, request, response

我正在寻找一种方法来测量我在浏览器中发出的 Web 请求和响应的大小。我需要一种方法来衡量常规请求以及 ajax 请求。我正在尝试通过减少请求和响应大小来提高 Ajax 性能，我需要一些方法来在客户端对此进行基准测试，并在我进行时衡量我的进度。

这是 ASP.net 应用程序 (3.5) 的一部分，但我肯定更喜欢一些基于客户端的工具（Firefox 插件、可执行应用程序等）而不是基于代码的方法。

* * *

## 回答 #1

> 赞同：3
> 
>             
> 
> 时间：2009-05-25T09:12:19.700

您可以使用IE上的[HttpWatch和 firefox 上的](http://www.httpwatch.com/)[FireBug](http://getfirebug.com/)来检查请求响应标头。这些应该足以满足您的要求。

* * *

## 回答 #2

> 赞同：3
> 
>             
> 
> 时间：2009-05-25T09:13:19.167

我通常使用[Fiddler](http://www.fiddler2.com/fiddler2/)来调查发出的请求、响应时间和大小。

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2009-05-25T09:07:43.907

[雅虎！Firebug 的YSlow](http://developer.yahoo.com/yslow/ "雅虎！ 慢")插件（在 FireFox 中）是您想要做的最好的工具之一。

编辑：您需要先在 Firefox 中安装[FireBug](https://addons.mozilla.org/firefox/addon/1843 "萤火虫")才能安装 YSlow。

* * *

## 回答 #4

> 赞同：1
> 
>             
> 
> 时间：2009-05-25T09:08:32.173

对于 Firefox，有一个名为[LORI](https://addons.mozilla.org/en-US/firefox/addon/1743)（Life-Of-Request-Information）的附加组件。

它告诉你页面大小，它向服务器发出多少请求（对于 css、javascript 等）到第一个字节的时间和完成请求的时间。

* * *

## 回答 #5

> 赞同：1
> 
>             
> 
> 时间：2009-05-25T09:13:21.960

对于 Internet Explorer，您可以从以下网址下载 IE Developer 工具栏：“ [http://www.microsoft.com/DownLoads/details.aspx?familyid=E59C3964-672D-4511-BB3E-2D5E1DB91038&displaylang=en](http://www.microsoft.com/DownLoads/details.aspx?familyid=E59C3964-672D-4511-BB3E-2D5E1DB91038&displaylang=en) ”

此外，您可以从以下网址下载 Fiddler：“ [http://www.fiddler2.com/fiddler2/](http://www.fiddler2.com/fiddler2/) ”

描述您的请求/响应。

对于 Firefox，有许多插件： - Firebug - YSlow

* * *

## 回答 #6

> 赞同：1
> 
>             
> 
> 时间：2009-05-25T09:33:08.097

除了其他人的优秀建议之外，还有一个针对 Visual Studio 和 Ajax 的特定工具集，即[VS Ajax Profiling Extensions](http://code.msdn.microsoft.com/AjaxView) - 但是这只适用于 IIS7

* * *

## 回答 #7

> 赞同：0
> 
>             
> 
> 时间：2009-05-25T09:08:25.450

看起来 Firefox Firebug 插件 >[网络监控](http://getfirebug.com/net.html)可能会完成这项工作。

* * *

## 回答 #8

> 赞同：0
> 
>             
> 
> 时间：2009-05-25T09:08:28.443

Charles 是一个出色的 Web 调试代理，它会向您显示 Web 浏览器发出的每个 HTTP 请求的大小。它还提供了一种非常简单的方法来检查请求的负载，包括 XML。

[http://www.charlesproxy.com/](http://www.charlesproxy.com/)

# c# - 如何在 C# 中将记录器调用自动生成到源代码中？

> ID：905982
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-05-25T09:07:23.783
> 
>         
> 
> 标签：c#, logging, code-generation

我想在方法体中生成什么：

```
private void SomeMethod()
{
Logger.Log("Entering SomeMethod.");

// do stuff here

Logger.Log("Exiting SomeMethod.")
} 
```

有没有可以为我生成的工具？如果没有，并且我想自己实现一个，那么我应该从哪里开始，我应该研究哪个库来识别 c# 源代码中的方法？简单的正则表达式就足够了吗？

* * *

## 回答 #1

> 赞同：5
> 
>             
> 
> 时间：2009-05-25T09:09:25.680

您肯定在这里寻找[PostSharp](http://www.postsharp.org/) - Aspect Oriented Programming (AOP) for .NET。它将允许您添加在任意方法开始之前和结束之后执行的处理程序，这样您实际上只需要在一个地方定义您的日志记录代码。

* * *

## 回答 #2

> 赞同：5
> 
>             
> 
> 时间：2009-05-25T09:14:41.847

签出postsharp

[http://www.postsharp.org/](http://www.postsharp.org/)

这是一个面向方面的编程框架。它将允许您使用将运行记录器、安全检查等的属性来绘制您的方法。

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2009-05-25T09:09:22.873

为此使用 AOP 框架。

看看 Spring.NET 或 Castle Dynamic Proxy。

在大多数情况下，代码生成通常不是一个好主意。

* * *

## 回答 #4

> 赞同：1
> 
>             
> 
> 时间：2009-05-25T09:14:50.723

如果您打算生成代码，那么您真的应该对每个代码文件进行完整（和正确）的解析。

“C Sharp Parser”的一些谷歌搜索给出了几个可能的结果：
 [Here](http://www.csharpparser.com/csparser.php) 
[And Here](http://sourceforge.net/projects/cscodedomparser/)

然后您需要做的就是遍历解析树，并在每个方法的开头和结尾添加您的方法调用。

# c# - 检测文件打开

> ID：905991
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2009-05-25T09:09:15.573
> 
>         
> 
> 标签：c#, filesystems, .net

是否可以在 Windows 环境中检测文件是否正在使用 .NET 打开

我想在文件系统上放置一个处理程序来检测是否正在打开文件或任何文件，这可能吗？

* * *

## 回答 #1

> 赞同：5
> 
>             
> 
> 时间：2009-05-25T09:13:59.587

最简单的解决方案是使用 a[`FileSystemWatcher`](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx)并将过滤器设置为[`NotifyFilters.LastAccess`](http://msdn.microsoft.com/en-us/library/system.io.notifyfilters.asp)，这将告诉它注意上次访问日期/时间的变化。

* * *

## 回答 #2

> 赞同：5
> 
>             
> 
> 时间：2009-05-25T09:14:03.253

查看 FileSystemWatcher 类

[http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx)

我不能 100% 确定您是否可以确定文件是否已打开，但您可以确定文件是否已更改、创建、删除。

* * *

## 回答 #3

> 赞同：2
> 
>             
> 
> 时间：2009-05-25T09:21:24.753

前段时间我需要一个应用程序来监视特定文件夹（及其子文件夹）并在创建新文件时引发事件。我使用了 FileWatcher 类。我很确定它的事件“改变”对你有用。实现起来既好又简单。查看以下网站以获取更多信息：

使用此地址 msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx

使用此地址 csharphelp.com/archives2/archive377.html

希望这可以帮助。

达摩

* * *

## 回答 #4

> 赞同：1
> 
>             
> 
> 时间：2009-05-25T09:13:37.030

[System.IO.FileSystemWatcher](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx)可能是您正在寻找的。

AFAIK 无法检测文件是否是用 .NET 或其他方式打开的。

# c - C 是否具有函数参数名称的 __func__ 功能？

> ID：905999
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2009-05-25T09:11:43.057
> 
>         
> 
> 标签：c, func

“C”标准是否支持类似于`__func__`函数参数名称的内容？

* * *

## 回答 #1

> 赞同：5
> 
>             
> 
> 时间：2009-05-25T09:29:08.853

不，C99 标准有以下内容：

> 6.10.8 预定义的宏名称
> 
>   
>   
> 
> 以下宏名称应由实现定义：

```
__DATE__ 
__FILE__ 
__LINE__ 
__STDC__ 
__STDC_HOSTED__ 
__STDC_MB_MIGHT_NEQ_WC__ 
__STDC_VERSION__ 
__TIME__ 
```

> 以下宏名称由实现有条件地定义：

```
__STDC_IEC_559__ 
__STDC_IEC_559_COMPLEX__ 
__STDC_ISO_10646__ 
```

> 6.4.2.2 预定义标识符
> 
>   
>   
> 
> 标识符`__func__`应由翻译器隐式声明，就好像紧跟在每个函数定义的左大括号之后，声明

```
 static const char __func__[] = "function-name"; 
```

出现，其中 function-name 是词法封闭函数的名称。63)

gcc 添加了一些[扩展](http://gcc.gnu.org/onlinedocs/gcc-4.4.0/gcc/Function-Names.html#Function-Names)，正如我想象的其他编译器所做的那样。

* * *

## 回答 #2

> 赞同：3
> 
>             
> 
> 时间：2009-05-25T09:38:54.547

如果您想要一个快速而肮脏的解决方案，请制作像这样的预处理器宏......

```
#define FUNCTION_HEADER(a) a { const char* __func__ = #a;
#define FUNCTION_FOOTER() } 
```

...并将其用于您的函数页眉和页脚，如下所示（使用 VS 2008 测试）：

```
#include <windows.h>

#define FUNCTION_HEADER(a) a { const char* __func__ = #a;
#define FUNCTION_FOOTER() }

FUNCTION_HEADER( int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int nShowCmd) )
    MessageBoxA(0, __func__, __func__, MB_OK);
    return 0;
FUNCTION_FOOTER() 
```

这应该完全按照您的意愿工作，但它很丑陋。***** 
```