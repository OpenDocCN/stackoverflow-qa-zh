# StackOverflow 问答 11812000-11812999

# python - 登录对话框 PyQt

> ID：11812000
> 
> 赞同：16
> 
> 时间：2012-08-04T21:04:35.203
> 
> 标签：python, qt, login, dialog, pyqt

当客户问我是否可以在应用程序启动时实现某种登录表单时，我几乎完成了我的应用程序。

到目前为止，我已经设计了 UI，并对实际执行进行了修改。用户名和密码暂时无关紧要。

```
class Login(QtGui.QDialog):
    def __init__(self,parent=None):
        QtGui.QWidget.__init__(self,parent)
        self.ui=Ui_dlgLogovanje()
        self.ui.setupUi(self)

        QtCore.QObject.connect(self.ui.buttonLogin, QtCore.SIGNAL("clicked()"), self.doLogin)

    def doLogin(self):
        name = str(self.ui.lineKorisnik.text())
        passwd = str(self.ui.lineSifra.text())
        if name == "john" and passwd =="doe":
            self.runIt()
        else:
            QtGui.QMessageBox.warning(self, 'Greška',
        "Bad user or password", QtGui.QMessageBox.Ok)           

    def runIt(self):
        myprogram = Window()        
        myprogram.showMaximized() #myprogram is

class Window(QtGui.QMainWindow):
    def __init__(self,parent=None):
        QtGui.QWidget.__init__(self,parent)
        self.ui=Ui_MainWindow()
        self.ui.setupUi(self)

if __name__=="__main__":
    program = QtGui.QApplication(sys.argv)
    myprogram = Window()
    if Login().exec_() == QtGui.QDialog.Accepted:       
        sys.exit(program.exec_()) 
```

显示登录表单。如果输入了正确的用户名和密码，则显示主窗口并正常工作。但是，登录表单保持活动状态，如果我关闭它，主窗口也会关闭。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-08-04T22:53:42.067

A`QDialog`有自己的事件循环，因此它可以与主应用程序分开运行。

您只需要检查对话框的返回代码来决定是否应该运行主应用程序。

示例代码（PyQt5）：

```
from PyQt5 import QtWidgets
# from mainwindow import Ui_MainWindow

class Login(QtWidgets.QDialog):
    def __init__(self, parent=None):
        super(Login, self).__init__(parent)
        self.textName = QtWidgets.QLineEdit(self)
        self.textPass = QtWidgets.QLineEdit(self)
        self.buttonLogin = QtWidgets.QPushButton('Login', self)
        self.buttonLogin.clicked.connect(self.handleLogin)
        layout = QtWidgets.QVBoxLayout(self)
        layout.addWidget(self.textName)
        layout.addWidget(self.textPass)
        layout.addWidget(self.buttonLogin)

    def handleLogin(self):
        if (self.textName.text() == 'foo' and
            self.textPass.text() == 'bar'):
            self.accept()
        else:
            QtWidgets.QMessageBox.warning(
                self, 'Error', 'Bad user or password')

class Window(QtWidgets.QMainWindow):
    def __init__(self, parent=None):
        super(Window, self).__init__(parent)
        # self.ui = Ui_MainWindow()
        # self.ui.setupUi(self)

if __name__ == '__main__':

    import sys
    app = QtWidgets.QApplication(sys.argv)
    login = Login()

    if login.exec_() == QtWidgets.QDialog.Accepted:
        window = Window()
        window.show()
        sys.exit(app.exec_()) 
```

示例代码（PyQt4）：

```
from PyQt4 import QtGui
# from mainwindow import Ui_MainWindow

class Login(QtGui.QDialog):
    def __init__(self, parent=None):
        super(Login, self).__init__(parent)
        self.textName = QtGui.QLineEdit(self)
        self.textPass = QtGui.QLineEdit(self)
        self.buttonLogin = QtGui.QPushButton('Login', self)
        self.buttonLogin.clicked.connect(self.handleLogin)
        layout = QtGui.QVBoxLayout(self)
        layout.addWidget(self.textName)
        layout.addWidget(self.textPass)
        layout.addWidget(self.buttonLogin)

    def handleLogin(self):
        if (self.textName.text() == 'foo' and
            self.textPass.text() == 'bar'):
            self.accept()
        else:
            QtGui.QMessageBox.warning(
                self, 'Error', 'Bad user or password')

class Window(QtGui.QMainWindow):
    def __init__(self, parent=None):
        super(Window, self).__init__(parent)
        # self.ui = Ui_MainWindow()
        # self.ui.setupUi(self)    

if __name__ == '__main__':

    import sys
    app = QtGui.QApplication(sys.argv)
    login = Login()

    if login.exec_() == QtGui.QDialog.Accepted:
        window = Window()
        window.show()
        sys.exit(app.exec_()) 
```

# android - android newView/bindView 的自定义 cursorAdapter 没有调用

> ID：11812002
> 
> 赞同：1
> 
> 时间：2012-08-04T21:05:11.800
> 
> 标签：android, listview, simplecursoradapter, android-cursoradapter

它工作正常，我不知道我做了什么改变，我做错了什么，它不再工作了

一切正常，正在创建表，正在插入值，甚至在日志中显示表数据，调用将转到自定义光标适配器，但我通过调试了解到的是

**我的自定义光标适配器的 newView 和 Bind 视图方法未调用**

*   在调试期间，我在自定义 cursorAdapter 构造函数中看到值存在于光标中，但 newView 和 bindView 没有调用这里是 mmy 代码：

    ```
    public class DbHelper extends SQLiteOpenHelper{

    private static final String dbName = "(AnnoyingAlarmDatabase).db";
    private static final int version = 1;
    public static final String keyId = "_id";
    public static final String hour = "hour";
    public static final String minute = "min";
    public static final String strength = "strength";
    public static final String vibrate = "vibrate";
    public static final String snooze = "snooze";
    public static final String method = "method";
    public static final String label = "label";
    public static final String days = "days";

    private static final String createTable = "create table alarms (" + keyId + " integer primary key, " + label + " text, " + hour + " integer, " + minute + " integer, " + strength + " text, " + vibrate + " text, " + snooze + " integer, " + method + " text " +")";

    public DbHelper(Context context) {
    // TODO Auto-generated constructor stub
    super(context, dbName, null, version);
    Log.d("mydb", "constructor");
    }

      @Override

          public void onCreate(SQLiteDatabase db) {
    try{

    Log.d("mydb", "oNCreate()");
    db.execSQL(createTable);
    }

    catch( SQLException e)
    {
        e.printStackTrace();
    }
     }

     @Override
            public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    db.execSQL("DROP TABLE IF EXISTS alarms" );

        onCreate(db);

     }

          public void addAlarm( String getLabel, int getHour, int getMin, String getStrength, String getVibrate, int getSnooze, String getMethod, String getDays )
      {

               Log.d("mydb", "addAlarm");
       SQLiteDatabase db = this.getWritableDatabase();
       ContentValues values = new ContentValues();

       values.put( label , getLabel);
       values.put( hour , getHour);
    values.put( minute , getMin);
    values.put( strength , getStrength);
    values.put( vibrate , getVibrate);
    values.put( snooze , getSnooze);
    values.put( method , getMethod);

    db.insert("alarms", null, values);

    db.close();

       }

          public Cursor getAlarm( )
      {

              Log.d("mydb", "getAlarm");

    SQLiteDatabase db = this.getReadableDatabase();
    Cursor cursor = db.rawQuery("select * from alarms", null);

    try{
        while( cursor.moveToNext())
        {
            Log.d("db id", cursor.getString(0));
            Log.d("db label",cursor.getString(1));
            Log.d("db hour",cursor.getString(2));
            Log.d("db minute",cursor.getString(3));
            Log.d("db strength",cursor.getString(4));
            Log.d("db vibrate",cursor.getString(5));
            Log.d("db snooze",cursor.getString(6));
            Log.d("db method",cursor.getString(7));
            //Log.d("db days",cursor.getString(8));
        }

    }

    catch( SQLException e )
    {
        e.printStackTrace();
    }

    finally{
    //  cursor.close();
        db.close();
    }

    cursor.moveToFirst();

    //db.close();
      return cursor;
        } 
    ```

活动：

```
 public class ViewAlarms extends ListActivity {

Cursor cursor;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);

    DbHelper db = new DbHelper(this);

    cursor = db.getAlarm();
String [] from = {DbHelper.label};
    int [] to = {R.id.textViewLabel};

//  SimpleCursorAdapter adapter =  new SimpleCursorAdapter(this, R.layout.row_view, cursor, from, to);
//  setListAdapter(adapter);

    CustomCursorAdapter adapter = new CustomCursorAdapter(this, cursor);
    setListAdapter(adapter);
    cursor.close();

} 
```

自定义光标适配器

```
public class CustomCursorAdapter extends CursorAdapter {

    private LayoutInflater inflator;
    private int hourIndex;
    private int minIndex;
    private int labelIndex;

    public CustomCursorAdapter(Context context, Cursor c) {
        super(context, c);
        inflator = LayoutInflater.from(context);
        hourIndex = c.getColumnIndex(DbHelper.hour);
        minIndex = c.getColumnIndex(DbHelper.minute);
        labelIndex = c.getColumnIndex(DbHelper.label);
        Log.d("customAdapter", "constructor");
        //Log.d("adapter curconst",c.getString(minIndex));
        }

    @Override
    public void bindView(View view, Context context, Cursor cursor) {

        TextView label = (TextView)view.findViewById(R.id.textViewLabel);
        TextView time = (TextView)view.findViewById(R.id.textViewTIme);
        Log.d("adapter cursor","chala?");

    //time
        int hour = Integer.parseInt(cursor.getString(hourIndex));
        int min = Integer.parseInt(cursor.getString(minIndex));
        String minStr;

        if ( min < 10 )
        {
            minStr = "0" + min;
        }
        else
        {
            minStr = "" + min;
        }
        if ( hour < 12 )
        {
            if ( hour == 0 )
                hour = 12;
            time.setText(hour + ":" + minStr + " Am");
        }

        if ( hour > 12 )
        {
            if ( hour == 0 )
                hour = 12;
            time.setText(hour % 12 + ":" + minStr + " Pm");
        }

        //label
        label.setText(cursor.getString(labelIndex));
    }

    @Override
    public View newView(Context context, Cursor cursor, ViewGroup arg2) {
        Log.d("newView","chala");
        return inflator.inflate(R.layout.row_view, arg2, false);
    }

} 
```

即使我尝试了简单的光标适配器，它仍然没有显示任何内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T00:11:37.837

您正在使用的构造函数已被*弃用*。您应该使用加载器。 [这是更多文档](http://developer.android.com/reference/android/widget/CursorAdapter.html#CursorAdapter%28android.content.Context,%20android.database.Cursor%29)

试图回答你的问题。您是否尝试在调用 setAdapter() 后立即删除 cursor.close() 行。当您的适配器仍然需要它时，您可能正在关闭光标。这也可以通过使用 Loader 来解决，因为它可以更好地为您处理生命周期事件。

# objective-c - 制作图片跳转IOS

> ID：11812004
> 
> 赞同：0
> 
> 时间：2012-08-04T21:05:28.447
> 
> 标签：objective-c, ios, xcode, image, cocoa-touch

我需要图像像 15 个单位一样在屏幕上显示，放慢速度（不是立即停止），然后再降下来。我对此很陌生，不知道该怎么做。我希望有人能帮帮忙。如果您需要更多信息，请与我们联系。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T21:25:20.613

您可以使用 2 条路径：CABasicAnimation 或 UIView 动画（代码差异不大）。UIView 更简单，更适合简单的动画。CAAnimation 需要 Quartz 框架，也有更多更低的偏好。这两个指南将有助于[http://www.raywenderlich.com/2454/how-to-use-uiview-animation-tutorial](http://www.raywenderlich.com/2454/how-to-use-uiview-animation-tutorial)，[http://www.raywenderlich.com/5478/uiview-animation-tutorial-practical-recipes](http://www.raywenderlich.com/5478/uiview-animation-tutorial-practical-recipes)

使用 CAAnimation 简单（例如）：

```
-(void)animationRotation
 {
      CABasicAnimation *anim;
      anim = [CABasicAnimation animationWithKeyPath:@"transform.rotation"];
      anim.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseOut];  // this what you need - slow down (not an immediate stop)
     anim.duration = 0.5;
     anim.repeatCount = 1;

      anim.fromValue = [NSNumber numberWithFloat:0];
      [anim setDelegate:self];    

      anim.toValue = [NSNumber numberWithFloat:(15)];
      [myView.layer addAnimation:anim forKey:@"transform"];

      CGAffineTransform rot = CGAffineTransformMakeTranslation(15.0);
       myView.transform = rot;
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T21:24:41.583

您获取包含图像的 UIImageView 并使用`animateWithDuration:delay:options:animations:completion:`. 在动画块中，您只需更改`frame`图像视图的。

在`options`你使用`UIViewAnimationOptionCurveEaseOut`上升。

完成后，您将立即开始第二个动画，这次使用`UIViewAnimationOptionCurveEaseIn`. 因此

```
NSTimeInterval durationUp = 1.5;
[UIView animateWithDuration:durationUp delay:0.0 
   options:UIViewAnimationOptionCurveEaseOut 
   animations:^{
      CGRect f = imageView.frame;
      f.origin.y += 15;
      imageView.frame = f;
   }
   completion:nil];

[UIView animateWithDuration:1.5 delay:durationUp 
   options:UIViewAnimationOptionCurveEaseIn 
   animations:^{
      CGRect f = imageView.frame;
      f.origin.y -= 15;
      imageView.frame = f;
   }
   completion:nil]; 
```

# uiimage - 如何将高斯模糊添加到具有透明度的 UIImage

> ID：11812009
> 
> 赞同：1
> 
> 时间：2012-08-04T21:05:49.117
> 
> 标签：uiimage, core-graphics, blur

我读了这个答案：[如何在 iphone 中锐化/模糊 uiimage？](https://stackoverflow.com/questions/1486051/how-to-sharp-blur-an-uiimage-in-iphone)

以及几十个关于阴影和模糊的其他答案和教程。它不起作用，包括答案中的所有源链接。

每当我尝试从具有透明区域的 png 文件中模糊图像时，我都会得到什么。是一个图像（当不使用上面答案中粘贴的源时）一个模糊的图像，其中所有透明区域都充满了噪点。

在尝试了过去 5 天我发现的每一段示例代码之后，我没有任何运气，无论我有大约 50 个小时的时间来完成这项工作，并且完成的工作比我开始之前的要少。所以我想知道，如何将 gaussianblur 添加到具有透明像素的 UIImage 中？

更好的是……我正在尝试获取 UIImage，有时是从 UILabel 创建的，并为其添加一个阴影，该阴影可以倾斜，使其看起来像落在图像后面和下方的地面上，就像太阳在地面上投下的阴影一样. 有人建议我应该拍摄图像，将其转换为灰度并将其模糊，然后应用变换......好主意，除了如上所述，因为所有这些图像都有大量透明像素，我最终得到一个几乎什么都没有，只有噪音。

我应该注意，核心图形对我来说是一个真正的弱点，所以我可以整天看示例代码，却永远无法理解它来调整它以使其工作。

# c# - 在我的软件中实现数据同步的服务

> ID：11812010
> 
> 赞同：0
> 
> 时间：2012-08-04T21:05:57.717
> 
> 标签：c#, c++, windows, synchronization

我目前正在开发一个 Windows 软件，并正在寻找一种方法来实现该程序的多个副本之间的数据同步。

让我用一个简单的例子来解释一下：比如说，有问题的软件让一个用户在他们的收银机中计算现金。比如说，同一帐户下的另一个用户在另一个收银终端上使用该软件的另一个副本。我希望实现的是一种方法，可以对软件的一个副本进行任何更改，并将它们“推送”到相同注册用户或一组用户的任何其他运行副本（即“同步”它们之间的数据。）

PS。我显然可以使用我自己的网络服务器（如果我设置了一个）这样做，但这不是我正在寻找的方法。我正在考虑一种服务，就像 Dropbox 一样，它可以让我的软件的用户向他们注册一个免费帐户，然后将其用于我的软件中的数据同步。

那么您对如何实现这一点有任何建议（从开发人员的角度来看）？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-04T22:18:01.070

创建自己的数据库？这样，一个用户所做的每一项更改都将对所有人可见。当然，您可以为不同的用户授予不同的管理权限，以限制他们可以进行的更改。

# ruby-on-rails-3 - Rails 3 和 RefineryCMS - 在 Refinery::Admin::ImagesController#create 中的 Dragonfly::Shell::CommandFailed

> ID：11812011
> 
> 赞同：3
> 
> 时间：2012-08-04T21:06:29.263
> 
> 标签：ruby-on-rails-3, imagemagick, refinerycms, dragonfly-gem

看起来很多人都有这个相同/相似的问题，并且我在 SO [here](https://stackoverflow.com/questions/11355846/refinerycms-image-not-loading-dragonfly-error)上找到了一些针对它的报告修复。不幸的是，他们不为我工作。我正在运行 MacOS Lion。这是我到目前为止所做的：

1) 标准 RefineryCMS 安装。运行良好，除了上传图片。2）一旦遇到问题，我就根据 Dragonfly[文档](http://markevans.github.com/dragonfly/file.Rails3.html)添加了一个配置文件：

```
# configure/initializers/dragonfly.rb
require 'dragonfly/rails/images' 
```

3）那没有用。我重新安装了 ImageMagick。确认 ImageMagick 已安装：

```
# whereis convert
/usr/bin/convert
# whereis identify
/usr/bin/identify 
```

4) 这并没有解决问题，所以我为 /usr/bin 和 /usr/local/bin 设置了符号链接：

```
lrwxr-xr-x  1 root  wheel  22 Aug  4 11:00 /usr/bin/convert -> /opt/local/bin/convert
lrwxr-xr-x  1 root  wheel  23 Aug  4 11:01 /usr/bin/identify -> /opt/local/bin/identify
lrwxr-xr-x  1 root  admin  22 Aug  4 11:06 /usr/local/bin/convert -> /opt/local/bin/convert
lrwxr-xr-x  1 root  admin  23 Aug  4 11:07 /usr/local/bin/identify -> /opt/local/bin/identify 
```

5）那没有用，所以我根据 Dragonfly 文档和一些附加[说明](http://markevans.github.com/dragonfly/file.ImageMagick.html#Configuration)设置了一个新的配置文件：

```
# config/initializers/dragonfly.rb
require 'dragonfly'

app = Dragonfly[:images]
app.configure_with(:imagemagick)
app.configure_with(:rails)

app.define_macro(ActiveRecord::Base, :image_accessor)

app.configure do |c|
  c.convert_command = "/opt/local/bin/convert"          # defaults to "convert"
  c.identify_command = "/opt/local/bin/identify"        # defaults to "identify"
  c.log_commands = true                                 # defaults to false
end 
```

6）那并没有解决它。基于一个[GitHub 问题](https://github.com/resolve/refinerycms/issues/1781)，我添加了这个

```
# config/application.rb
module Refincmstest
  class Application < Rails::Application
    # trying a fix for image magic
    initializer 'override-image-magick-paths', :after => 'attach-refinery-images-with-dragonfly' do
      Dragonfly[:refinery_images].configure do |c|
        c.convert_command = "/opt/local/bin/convert"          # defaults to "convert"
        c.identify_command = "/opt/local/bin/identify"        # defaults to "identify"
      end
    end
  end
end 
```

那没有用。这是控制台输出，如果这有帮助：

```
Started POST "/refinery/images?dialog=true" for 127.0.0.1 at 2012-08-04 12:23:54 -0700
Processing by Refinery::Admin::ImagesController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"Nddc/uPbbAGevNH15M6nzo/AJmVskIClJYZ5O60KDTU=", "image"=>{"image"=>[#<ActionDispatch::Http::UploadedFile:0x007fe5cd383e10 @original_filename="Photo on 2010-10-27 at 22.46 #2.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"image[image][]\"; filename=\"Photo on 2010-10-27 at 22.46 #2.jpg\"\r\nContent-Type: image/jpeg\r\n", @tempfile=#<File:/var/folders/rr/1_vvbrvd3ylgpdv8f2z3qqp80000gn/T/RackMultipart20120804-97351-xbv8ew>>]}, "wymeditor"=>"", "modal"=>"true", "dialog"=>"true", "app_dialog"=>"true", "field"=>"", "update_image"=>"", "thumbnail"=>"", "callback"=>"", "conditions"=>"", "locale"=>:en}
  Refinery::Role Load (0.2ms)  SELECT "refinery_roles".* FROM "refinery_roles" WHERE "refinery_roles"."title" = 'Refinery' LIMIT 1
  Refinery::User Load (0.1ms)  SELECT "refinery_users".* FROM "refinery_users" INNER JOIN "refinery_roles_users" ON "refinery_users"."id" = "refinery_roles_users"."user_id" WHERE "refinery_roles_users"."role_id" = 1
  Refinery::User Load (0.1ms)  SELECT "refinery_users".* FROM "refinery_users" WHERE "refinery_users"."id" = 1 LIMIT 1
  Refinery::UserPlugin Load (0.2ms)  SELECT "refinery_user_plugins".* FROM "refinery_user_plugins" WHERE "refinery_user_plugins"."user_id" = 1 ORDER BY position ASC
  Refinery::Role Load (0.1ms)  SELECT "refinery_roles".* FROM "refinery_roles" INNER JOIN "refinery_roles_users" ON "refinery_roles"."id" = "refinery_roles_users"."role_id" WHERE "refinery_roles_users"."user_id" = 1
Completed 500 Internal Server Error in 210ms

Dragonfly::Shell::CommandFailed (Command failed (identify '/var/folders/rr/1_vvbrvd3ylgpdv8f2z3qqp80000gn/T/RackMultipart20120804-97351-xbv8ew') with exit status ):
  dragonfly (0.9.12) lib/dragonfly/shell.rb:29:in `raise_shell_command_failed'
  dragonfly (0.9.12) lib/dragonfly/shell.rb:23:in `run'
  ... 
```

我没主意了。关于下一步去哪里的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-21T09:26:10.943

**升级到OS X Yosemite**后出现此错误。由于我使用 brew 安装了 imagemagick，我运行`brew doctor`它并报告了各种问题，其中还有一个符号链接问题。我按照说明解决了所有问题，现在它又可以工作了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T07:12:06.063

做了更多研究，发现虽然我使用 Mac Ports 来更新 ImageMagick，但我的安装不知何故损坏了。我通过尝试`/opt/local/bin/identify`手动执行命令发现了这一点。多次尝试使用 Map Ports 重新安装失败（Mac Ports 在 mac book air running lion 上运行时存在一些非常严重的问题。）我安装了 Mac Brew 并通过 brew 安装了 ImageMagick。删除我的符号链接并确保将蜻蜓配置为指向 /usr/local/bin 后，一切正常。

故事的寓意 - 如果您在运行 Lion 的 MacBook Air 上，请不要使用 Mac 端口。即使在使用最新版本重新安装 Mac Ports 后，多个 ImageMagick 先决条件的安装也会失败。几个月前，我安装了另一个 Mac Ports，也发生了类似的事情。不得不暂时退回以前版本的 Mac 开发工具。这样的痛苦。

# c++ - C++ 中跨多个文件的类

> ID：11812014
> 
> 赞同：6
> 
> 时间：2012-08-04T21:06:53.960
> 
> 标签：c++

我几乎 100% 确定我在这两个类中都有正确的语法，但是我收到以下错误：

对于 CShape.cpp - “错误 C2011: 'CShape' : 'class' 类型重新定义” 对于 CCircle.cpp - “错误 CS2504: 'CShape': 基类未定义”

这是 CShape.cpp 的完整代码

```
#include <iostream>
using namespace std;

class CShape
{
protected:
    float area;
    virtual void calcArea();
public:
    float getArea()
    {
        return area;
    }
} 
```

这是 CCircle.cpp 的代码

```
#include <iostream>
#include "CShape.cpp"
#define _USE_MATH_DEFINES
#include "math.h"
using namespace std;

class CCircle : public CShape
{
protected:
    int centerX;
    int centerY;
    float radius;
    void calcArea()
    {
        area = M_PI * (radius * radius);
    }
public:
    CCircle(int pCenterX, int pCenterY, float pRadius)
    {
        centerX = pCenterX;
        centerY = pCenterY;
        radius = pRadius;
    }
    float getRadius()
    {
        return radius;
    }
} 
```

如您所见，CShape 是 CCircle 应该继承的基类。我对 C++ 很陌生，所以我可能有错误的文件结构（也许基础应该在头文件中？），如果这样的事情很重要。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-04T21:10:54.253

从不#include .cpp 文件；这将导致您遇到的那种重新定义错误。相反，在头文件中*声明类并#include 那个，然后在 .cpp 文件中**定义*类方法。

```
// CShape.h
class CShape
{
protected:
    float area;
    virtual void calcArea();
public:
    float getArea();
} 
```

.cpp 文件：

```
// CShape.cpp
#include "CShape.h"
#include <iostream>
using namespace std;

float CShape::getArea() {
    return area;
} 
```

您应该类似地拆分 CCircle - CCircle.h 应该#include CShape.h，CCircle.cpp 应该#include CCircle.h。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-04T21:26:15.433

正如您所猜测的，您应该将类​​组织在单独的文件中，用于声明（头文件）和定义（.cpp 文件）。您可以在头文件中将成员函数定义（带主体）保留为（建议的）内联。将适当的包含阻止程序放入头文件中，以避免多个类声明。

**CShape.h：**

```
#ifndef __CSHAPE_H__
#define __CSHAPE_H__
class CShape
{
protected:
    float area;
    virtual void calcArea();
public:
    float getArea()
    {
        return area;
    }
};
#endif 
```

**CShape.cpp：**

```
#include "CShape.h"

void CShape::calcArea()
{
    // Your implementation
} 
```

**CCircle.h：**

```
#ifndef __CCIRCLE_H__
#define __CCIRCLE_H__
#include "CShape.h"

class CCircle : public CShape
{
protected:
    int centerX;
    int centerY;
    float radius;
    virtual void calcArea();
    {
        area = M_PI * (radius * radius);
    }
public:
     CCircle(int pCenterX, int pCenterY, float pRadius);
     inline float getRadius()
     {
         return radius;
     }
};
#endif 
```

**CCircle.cpp：**

```
#include "CCircle.h"

CCircle::CCircle(int pCenterX, int pCenterY, float pRadius)
: centerX(pCenterX)
, centerY(pCenterY)
, radius(pRadius)
{
} 
```

# ruby-on-rails-3 - rails字符串长度验证不起作用

> ID：11812019
> 
> 赞同：0
> 
> 时间：2012-08-04T21:07:56.887
> 
> 标签：ruby-on-rails-3, validation, ruby-on-rails-3.2

我一定遗漏了一些基本的东西，但我不断收到验证错误：

应用程序/模型/person.rb

```
class Person < ActiveRecord::Base
  attr_accessible  :cell

  before_validation :format_cell_string

  validates :cell, :length => { :is => 10 }

  protected

    def format_cell_string
      self.cell = self.cell.gsub!(/\D/, '') if self.cell != nil
    end

end 
```

在轨道 c

```
> bib = Person.new(cell: "1234567890")
> bib.save 
```

导致回滚

> 围兜错误 `=> #<ActiveModel::Errors:0x007fcb3cf978d8 @base=#<Person id: nil, created_at: nil, updated_at: nil, cell: nil>, @messages={:cell=>["is the wrong length (should be 10 characters)"]}>`

认为这可能是 Rails 控制台或 irb 错误，我也尝试了我的表单，但无济于事。尝试`bib = Person.new`， bib.save 然后 bib.update_attributes(cell: "0123456789") 在控制台中也不起作用。我错过了什么吗！我检查了有关验证的[rails 文档](http://guides.rubyonrails.org/active_record_validations_callbacks.html#length)和有关模型验证的[rails api，](http://api.rubyonrails.org/classes/ActiveModel/Validations/ClassMethods.html#method-i-validate)并尝试了许多不同的方法。有什么想法吗？我使用的是 rails 3.2.6，刚刚升级到 rails 3.2.7。不用找了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T21:22:11.153

`gsub!``nil` [如果没有进行任何更改，则](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-gsub-21)修改字符串并返回：

```
"1234567890".gsub!(/\D/, '') #=> nil 
```

因此，在该字段仅包含数字的情况下，您的代码会在验证之前将该字段设置为 nil，这会导致其失败。`gsub!`通常最好避免使用on 属性，因为它不能很好地与 Rails 的更改跟踪配合使用。

```
self.cell = self.cell.gsub(/\D/, '') if self.cell != nil 
```

应该做的伎俩

# css - CSS渐变到纯背景

> ID：11812023
> 
> 赞同：2
> 
> 时间：2012-08-04T21:08:21.830
> 
> 标签：css

我有一个按钮，并为其添加了渐变。

这是代码：

```
.mybutton {
    background: #258dc8; /* Old browsers */
    background: -moz-linear-gradient(top,  #258dc8 0%, #258dc8 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#258dc8), color-stop(100%,#258dc8)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top,  #258dc8 0%,#258dc8 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top,  #258dc8 0%,#258dc8 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top,  #258dc8 0%,#258dc8 100%); /* IE10+ */
    background: linear-gradient(to bottom,  #258dc8 0%,#258dc8 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#258dc8', endColorstr='#258dc8',GradientType=0 ); /* IE6-9 */
} 
```

我的问题是，在悬停状态下，我想摆脱渐变，只使用纯色背景色。

```
.mybutton:hover {
    background-color: #333333;
} 
```

由于某种原因，这不起作用，因为它没有摆脱渐变。我能够改变渐变的唯一方法是添加另一个渐变。

有没有办法禁用渐变？

我也尝试过`background: none;`，但这并没有做到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T21:10:42.797

渐变是[图像值](http://www.w3.org/TR/css3-images/#gradients)，因此`background-color`单独设置不会影响渐变。您将特别想要覆盖该`background-image`属性（以及`filter`在您使用该属性时）：

```
.mybutton:hover {
    background-color: #333333;
    background-image: none;
    filter: none;
} 
```

如果您使用简写`background: none`，您将*同时*设置颜色和图像（`none`映射到`background-image`并省略颜色设置为`transparent`），因此您将获得透明背景。

当然，您可以使用简写来仅声明颜色，并且图像将隐式为`none`：

```
.mybutton:hover {
    background: #333333;
    filter: none;
} 
```

# mongodb - 这是在 DynamoDB 中创建表的正确方法吗？

> ID：11812025
> 
> 赞同：0
> 
> 时间：2012-08-04T21:10:04.770
> 
> 标签：mongodb, amazon-dynamodb, nosql

我对 Dynamo 或 Mongo 等 NoSQL 存储的理解是，您应该考虑非规范化并根据您将执行的查询创建表。

我正在为如何设置我的桌子而苦苦挣扎。

我已经确定了我想要运行的查询。

我已经将普通的 SQL 查询翻译成“简单的英语”

例如，我要运行的查询将转换为：

“获取在 date_x 和 date_y 之间拍摄的所有照片，其中摄影师是 John，获得最多票数”

由于我不能进行表连接，这就是我想出的：

```
photos
{
    name,
    url,
    photographer,
    date_created,
    likes,
    dislikes,
    num_voters,
    weighted_score
} 
```

这是正确的方法吗？

我有喜欢、不喜欢、num_voters 和 weighted_score 的原因是因为我相信，每当用户对照片投票时，我需要更新“行”并增加喜欢/不喜欢/num_voters 并重新计算 weighted_score（这样投票人数少的高评价项目不会影响我的排行榜）

然而，

因为我正在应用“过滤器”——我假设像 Dynamo 这样的键/值存储不是我想要的？

还有一个问题：假设我有一个摄影师表，我想删除一个摄影师。然后我有责任浏览照片并被摄影师删除吗？同样，由于它是非关系型的，我假设没有级联类型功能？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T00:32:58.627

DynamoDB 是一个索引键值数据库，目前只允许您为每个表定义一个主键以及一个范围键。它可能不太适合您的灵活查询示例，因为按多个属性搜索最终会执行[非索引表扫描](http://aws.amazon.com/dynamodb/faqs/#Can_I_make_a_query_based_on_a_non-primary_key_attribute)。

MongoDB 是一个面向文档的数据库，它允许您定义多个索引，并且更适合您的用例。

例如：“获取在 date_x 和 date_y 之间拍摄的所有照片，其中摄影师是 John，按最多票排序”。

```
db.photos.find({
    'photographer': 'john',
    'created': {
        $gte: ISODate("2012-07-01"),
        $lte: ISODate("2012-07-05")
    }
}).sort({'votes': -1}); 
```

有关递增计数器，例如喜欢/不喜欢/投票的数量，请参阅[原子操作](http://www.mongodb.org/display/DOCS/Atomic+Operations)。

您是正确的，非关系数据库不支持（或相关）级联删除。您可以通过删除相关文档在应用程序层支持此逻辑。一些 MongoDB 驱动程序确实支持[数据库引用 (DBRefs)](http://docs.mongodb.org/manual/applications/database-references/)的概念，这对于获取相关文档很有用。使用 DBRefs 仍会导致多个查询，但可能是一个有用的助手。

# java - Java中的简单Wav比较

> ID：11812027
> 
> 赞同：3
> 
> 时间：2012-08-04T21:10:07.460
> 
> 标签：java, audio, comparison, wav, pcm

我似乎对看似非常微不足道的事情有很大的问题。

**目标**：尝试比较两个 Wav 文件，看看一个（小文件）是否是另一个（大文件）的一部分。

**测试**：首先，我录制了一段 1 分钟长的音频，并将 30 秒的音频导出到另一个文件。我首先尝试简单地读取 byte[] 数据并通过日志查看它，即使它们都来自同一个源文件，也绝对没有相关性？然后我尝试使用 WavFile 和 MusicG 等库，但我根本看不到两个“指纹”之间的任何关联，甚至看不到来自两个文件的原始字节 [] 数据？

**问题**：***分析这两个 Wav 文件的相似之处的最简单方法是什么？***我已经阅读过，如果它们来自同一个源音频文件，它们应该是字节字节相同的。因此，对每个样本进行抽样，它们应该是相同的吗？这不是正在发生的事情吗？

现在我已经为这个问题搜索了很多，但几乎所有的答案都只完成了 25-50%，所以我觉得我在某个地方错过了一个很大的部分。

感谢您提供的任何解决方案！

**[编辑]**源音频文件只是一个 1 分钟的 Wav 文件......我从中提取了前 30 秒以创建较小的文件。然后我比较短（30 秒）和长（1 分钟）。我从 Audacity 以 1141kbps、16 位、Wav 的速度导出了两者。这是为了避免格式问题……我想

有关代码，请查看这个 UNANSWERED 问题：[Wav comparison, same file](https://stackoverflow.com/questions/11604518/wav-comparison-same-file)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T01:28:40.727

这里发生了一些奇怪的事情。在不详细说明的情况下，我只想说，当某些程序执行您所谓的“提取”之类的简单操作时，它们并没有制作精确的副本。例如，当从 int 声音文件到 float（Audacity 内部使用的）返回 int 时，Libsndfile 不会透明地转换。如果 Audacity 使用 libsndfile （我很确定它确实如此），它不会制作文件的透明副本，因此您的方法将不起作用。例如：尝试以下操作：打开一个 wav 文件，使用相同的参数导出它。使用 diff 比较输入和输出。很可能，它们会有所不同。有关更多详细信息，请参见此处：[http ://blog.bjornroche.com/2009/12/int-float-int-its-jungle-out-there.html](http://blog.bjornroche.com/2009/12/int-float-int-its-jungle-out-there.html)

libsndfile 的作者在这里为他的设计决定辩护：[http ://www.mega-nerd.com/libsndfile/FAQ.html#Q010](http://www.mega-nerd.com/libsndfile/FAQ.html#Q010)

您可以尝试另一个应用程序，但我怀疑即使人们使用大胆，您也希望它能够正常工作。

其中一条评论建议互相关。您还可以使用音频指纹识别。不过，这两种解决方案都有些复杂。

可能最简单的解决方案是以本机格式读取数据。例如，如果文件是 16 位，则读取 16 位整数（不是字节）。然后将它与较短的比较，但比较允许一些错误（在我的脑海中，我很确定你永远不应该超过一个，但这是每次经历大胆的时候）。因此，与其问“这些值是否相等”，不如问“这些值是否在彼此的 epsilon 内”。当然，对于其中有很多沉默的事情，你会想要做一些例外。

Audacity 也有可能使用抖动，因此请确保已将其关闭。抖动会增加显着的噪音，因此如果您想将其纳入方程式，您将需要一个不同的解决方案。

# php - PHP 使用 ADOdb 显示行

> ID：11812029
> 
> 赞同：1
> 
> 时间：2012-08-04T21:10:20.133
> 
> 标签：php, mysql, adodb-php

这是我的 ADOdb 代码：

```
$sql  = "SELECT m.*, s.photo, s.gender
         FROM mail AS m, signup AS s
         WHERE m.receiver = '" .mysql_real_escape_string($username). "'
         AND m.sender = s.username AND inbox = '1' AND status = '1'
         ORDER BY send_date DESC LIMIT " .$limit;
// my date is in the format 2012-08-02 02:20:05

$rs1  =  $conn->execute($sql);
$time =  $rs1->GetAssoc('send_date'); //GetArray Or GetRows
echo $time; 
```

echo 显示了一个数组，但我需要的是显示 row `send_date`。

（而不是`->GetAssoc`，我也尝试过`->GetArray`和`->GetRows`。）

如何显示该行 `send_date`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T21:33:59.843

您没有正确使用 adodb。它具有用于转义参数的内置机制，以及用于有限结果的单独方法：

```
$sql  = "SELECT m.*, s.photo, s.gender
         FROM mail AS m, signup AS s
         WHERE m.receiver = ?
         AND m.sender = s.username 
         AND inbox = '1' 
         AND status = '1'
         ORDER BY send_date DESC";
$rs1  =  $conn->selectLimit($sql, $limit, -1, array($username));

// You will recive recordset with maximum of $limit rows, so you have to iterate through it:
while($row = $rs1->FetchRow()){
   echo $row['send_date'] . "\n";
} 
```

# javascript - 将变量和 DOM 元素分别传递给 jquery

> ID：11812030
> 
> 赞同：0
> 
> 时间：2012-08-04T21:10:32.033
> 
> 标签：javascript, jquery

我已经为此苦苦挣扎了一段时间，并且尝试了很多搜索，但没有找到正确的解决方案，也没有找到我遇到的问题的文字。我希望用 jQuery 遍历`<tr>`'s `<table id="Listeners">`，并将行设置为 Even 或 Odd 类。

尚未保存在变量中并传递给函数，如下所示：

```
<table id="Listeners">
 <tr><td>1</td></tr>
 <tr><td>2</td></tr>
</table> 
```

还有我的 jQuery：

```
var Element = $("#Listeners");
$(Element+" tr").each(function(index) {
 if (index%2 == 0) {
  $(this).addClass("Even");
 }
}); 
```

但这不起作用，关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T21:13:41.797

您可以使用`find()`方法和**[`:even`](http://api.jquery.com/even-selector/)**选择器：

> 选择偶数元素，零索引。

```
var $element = $("#Listeners");
$element.find("tr:even").addClass("Even");
// or $element.find("tr").filter(':even').addClass("Even") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T21:18:27.850

有很多方法可以做到这一点。这应该有效：

```
$('#Listeners tr:nth-child(even)').addClass("Even"); 
```

请参阅：[http ://api.jquery.com/nth-child-selector/](http://api.jquery.com/nth-child-selector/)

即使这样：

```
$('#Listeners tr:even').addClass("Even"); 
```

看到它在这里工作：http: [//jsfiddle.net/zm2nN/](http://jsfiddle.net/zm2nN/)

# r - 在 for 循环中将列添加到数据框中

> ID：11812034
> 
> 赞同：1
> 
> 时间：2012-08-04T21:11:06.143
> 
> 标签：r, for-loop, dataframe

如何在 for 循环中向数据框添加变量？

我想创建一个数据框，其中每列是 2009 年至 2011 年期间某个地区的收入。

```
regions = c('A','APAC','CEE','LATAM','ME', 'NA', 'WE')

# Loop through all regions, and add them as a column in my dataframe.
for (region in regions) {

  # create the query string
  query_string  = sprintf("SELECT date, revenue
                  FROM country_revenue
                  WHERE region = '%s'
                  AND date>='2009-01-01'
                  AND date<='2011-12-31'
                  ORDER BY date ASC
                  LIMIT 2000", region)

  # Query the database, and assign the result to a variable.
  assign(sprintf('rev.%s',region), mysql_query(query_string))

  # I only want the 2nd column returned from my query above. 
  # THIS IS THE PART THAT FAILS. Error in sprintf("rev.%s", region)[, 2] : incorrect number of dimensions
  sprintf('rev.%s',region) = sprintf('rev.%s',region)[,2]

  # Add this variable to my data frame.
  revenue = cbind(revenue, sprintf('rev.%s',region))
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-04T21:33:04.300

那将是非常低效的。为什么不`region`作为 SQL 调用的一部分返回，这样你就有了类似的东西

```
foo <- data.frame(date = rep(Sys.Date() + 0:4, 7),
                  revenue = runif(7*5),
                  region = rep(c('A','APAC','CEE','LATAM','ME', 'NA', 'WE'), 
                               each = 5))

> head(foo)
        date   revenue region
1 2012-08-04 0.1170867      A
2 2012-08-05 0.6173779      A
3 2012-08-06 0.9860934      A
4 2012-08-07 0.1344043      A
5 2012-08-08 0.5570391      A
6 2012-08-04 0.5844136   APAC 
```

这是一个简单的`dcast()`调用，将数据重塑为所需的格式。

```
> require(reshape2)
> dcast(foo, date ~ region, value.var = "revenue")
        date         A      APAC       CEE      LATAM         ME
1 2012-08-04 0.1170867 0.5844136 0.8011066 0.82864796 0.85856770
2 2012-08-05 0.6173779 0.7893151 0.3991653 0.41268349 0.05925445
3 2012-08-06 0.9860934 0.2812308 0.2272009 0.04599903 0.82367709
4 2012-08-07 0.1344043 0.7513777 0.8022602 0.96933913 0.61501816
5 2012-08-08 0.5570391 0.2915478 0.4601065 0.82996462 0.83779233
         NA         WE
1 0.4833374 0.25713295
2 0.9574843 0.22122544
3 0.5575645 0.03492411
4 0.2962364 0.51973593
5 0.9020639 0.95506837 
```

# objective-c - 在 Objective C 中使用未声明的标识符

> ID：11812035
> 
> 赞同：0
> 
> 时间：2012-08-04T21:11:21.010
> 
> 标签：objective-c, ios

我对Objective C非常陌生，并且在一些非常基本的事情上遇到了麻烦。
在`AppDelegate.m`，我收到以下错误：

> 使用未声明的标识符“ `health`”
> 使用未声明的标识符“ `attack`”

代码（分别）：

```
[Troll setValue:100 forKeyPath:health];
[Troll setValue:10 forKeyPath:attack]; 
```

我不太确定如何声明标识符。

**`AppDelegate.m`**

```
#import "AppDelegate.h"

@implementation AppDelegate

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions

{

    NSObject *Troll = [[NSNumber alloc]init];

    [Troll setValue:100 forKeyPath:health];

    [Troll setValue:10 forKeyPath:attack];

    return YES;

}

@end 
```

**`AppDelegate.h`**

```
#import `<UIKit/UIKit.h>`

@interface AppDelegate : UIResponder <UIApplicationDelegate>

@property (strong, nonatomic) UIWindow *window;

@end

@interface Troll : NSObject {

    NSNumber *health;

    NSNumber *attack;

}

@end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T21:18:02.587

键是字符串，而不是其他东西（如悬空的语法垃圾）。此外，“100”和“10”不是对象。即使在此之后，您也不想设置类本身的属性，而是设置其实例的属性。尝试

```
[troll setValue:[NSNumber numberWithInt:100] forKeyPath:@"health"];
[troll setValue:[NSNumber numberWithInt:10] forKeyPath:@"attack"]; 
```

反而。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T21:26:03.393

首先要说的是，你不是在实例化一个 Troll 对象，而是一个 NSNumber……为什么？你必须做`Troll *troll = [[[Troll alloc] init] autorelease];`

从类中设置和获取属性的方法是在类上声明属性。这样编译器将为您管理内存（保留和释放）。另一种方法是直接访问您的 ivars。

但是，如果您想使用 setValue:forKeyPath: 您必须使用 NSString 作为第二个参数，即变量的名称。

```
@interface Troll : NSObject
{
    NSNumber *_health;
    NSNumber *_attack;
}

@property (nonatomic, retain) NSNumber *health;
@property (nonatomic, retain) NSNumber *attack;

@end

@implementation Troll

@synthesize health = _health;
@synthesize attack = _attack;

- (void)dealloc
{
    [_health release];
    [_attack release];
    [super release];
}

- (void)customMethod
{
    //using properties
    [self setHealth:[NSNumber numberWithInteger:100];
    [self setAttack:[NSNumber numberWithInteger:5];

    //accessing ivars directly - remember to release old values
    [_health release];
    _health = [[NSNumber numberWithInteger:100] retain];
    [_attack release];
    _attack = [[NSNumber numberWithInteger:5] retain];
}

@end 
```

祝你好运！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-04T21:18:02.790

尽管您正在定义一个名为 Troll 的类，它具有“健康”和“攻击”，但您并没有实例化一个。您可能希望在您的应用程序中使用以下内容之一 didFinishLaunchingWithOptions：

```
Troll *troll = [[Troll alloc]init];
troll.health = [NSNumber numberWithInt:100];
troll.attack = [NSNumber numberWithInt:10]; 
```

或者

```
Troll *troll = [[Troll alloc]init];
[troll setHealth:[NSNumber numberWithInt:100]];
[troll setAttack:[NSNumber numberWithInt:10]]; 
```

这两个是等价的。

# css - 使用“display: inline-block”的最佳实践是什么

> ID：11812046
> 
> 赞同：0
> 
> 时间：2012-08-04T21:12:47.460
> 
> 标签：css

当我将它们与列表项一起使用时，“内联块”和“位置”让我感到困惑。Dreamweaver CS3 没有帮助，因为它不显示块内联，而是显示为一堆元素。我有兴趣学习使不同高度的块元素沿其顶部边缘对齐的**最佳实践**，同时在总可用空间内居中。

请你看一下这个精简的代码，看看我是否做得正确？ [http://www.words4it.com/test_block1.html](http://www.words4it.com/test_block1.html)

这是 CSS： [http ://words4it.com/test_block1.css](http://words4it.com/test_block1.css)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T21:53:32.040

这是关于定位元素[的好文章](http://www.w3schools.com/css/css_positioning.asp)

这是关于元素大小、边距和填充[的好文章](http://www.w3schools.com/css/css_boxmodel.asp)

毕竟，我对块、内联块和浮动的**简短建议：浏览器有两种对齐元素的通用模型：**

1.  **内联模型**，块水平地相互粘连，形成块的水平线，块之间有换行符，你可以把它想象成文本中的单词。使用此模型，您可以操作以下属性：

    *   字体大小
    *   线高
    *   文本对齐
    *   垂直对齐
    *   等等
2.  **块模型**，块相互垂直粘连，形成垂直堆叠的块，你可以把它想象成文本中的段落。使用此模型，您可以操作以下属性：

    *   利润
    *   填充
    *   浮动/清除
    *   位置
    *   等等

当您尝试实现所描述的行为时，应使用相应的模型。几乎没有例外：具有相同浮点值的几个块（例如 float:left）可以表现得与几个内联块非常相似，区别在于浏览器兼容性，您应该根据情况选择。

# shell - Tomcat servlet 引擎未运行，但存在 pid 文件。这条消息是什么意思？如果我得到它，我需要恢复 Tomcat 吗？

> ID：11812048
> 
> 赞同：5
> 
> 时间：2012-08-04T21:12:51.767
> 
> 标签：shell, tomcat, tomcat7, crontab, recover

我正在制作一个shell脚本来在崩溃后重新启动tomcat。我想知道我需要在我的脚本“Tomcat servlet 引擎未运行，但 pid 文件存在”中处理此消息。这个消息是什么意思？我是否需要将其视为迫使我重新启动 Tomcat 的错误消息？

我的脚本如下：

```
#!/bin/bash
SERVICE=/etc/init.d/tomcat7
STOPPED_MESSAGE=" * Tomcat servlet container is not running."  
PID_FILE_MESSAGE=" * Tomcat servlet engine is not running, but pid file exists."

if [ "`$SERVICE status`" == "$STOPPED_MESSAGE" ];
then  
{
    $SERVICE start
}
else
    if [ "`$SERVICE status`" == "$PID_FILE_MESSAGE" ];
    then
    {
        $SERVICE restart
    }
    fi
fi 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T03:40:06.497

这是[PID](http://en.wikipedia.org/wiki/Process_identifier)的定义。PID 文件是包含进程标识符的文件。如果 Tomcat 的启动脚本是在`CATALINA_PID`正确设置环境变量的情况下运行的，那么 Tomcat 进程的 PID 将在启动时记录到一个文件中。如果在您尝试启动 Tomcat 时该文件存在，脚本将拒绝运行，因为它不想破坏（可能是有效的）PID 文件。

如果您确定 Tomcat 没有运行，只需删除该文件（它应该可以通过`CATALINA_PID`环境变量获得）并重试。

我分享了@jordanm 关于使用退出代码而不是检查特定（文本）输出的评论：最新版本的 Tomcat 甚至不使用您上面显示的消息，因此它非常脆弱。

如果您想要一个自启动服务，请考虑查看[jsvc](http://commons.apache.org/daemon/jsvc.html)，它实际上以源代码形式随 Tomcat 二进制文件一起提供。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-17T13:18:16.700

当我重新启动tomcat时，我遇到了同样的问题。我还在 cataline.out 日志文件中发现“ `java.net.BindException`：无法分配请求的地址”。

**Soultion：**再次使用`killall -9 java`重新启动**tomcat**杀死所有java pid 。

对我来说问题已经解决

# ruby - Ruby 模板中的 Jade 样式块（Haml？）

> ID：11812053
> 
> 赞同：4
> 
> 时间：2012-08-04T21:13:38.123
> 
> 标签：ruby, haml, pug

Ruby 中有没有支持 Jade`extend`和`block`( [https://github.com/visionmedia/jade#template-inheritance](https://github.com/visionmedia/jade#template-inheritance) ) 之类的模板引擎？`:layout`与Haml 和类似支持的简单选项相比，这是一个很棒的功能。

任何想法如何在 Ruby 中实现这些块？也许扩展 Haml 的语法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-01T08:50:09.240

是的，您可以使用**content_for？**并在haml中**产生模板继承。**例子：

Base.html.haml

```
    %html
        = 渲染“布局/头部”
            ％身体
                .container.container-main
                    = content_for?(:page_content) ? 产量（：page_content）：产量

```

现在你可以使用另一个haml的'page_content' =>

派生的.html.haml

```
    - content_for :page_content 做
        /内容

```

'content_for :block_name' 块中的任何内容都会在布局中相应的 yield 上下文中执行。

# c# - Windows 8 Metro 专注于网格

> ID：11812059
> 
> 赞同：2
> 
> 时间：2012-08-04T21:14:05.393
> 
> 标签：c#, xaml, windows-8, microsoft-metro, winrt-xaml

我正在尝试使用 c# 和 xaml 制作一个简单的 Windows 8 Metro 游戏。我一直无法触发 KeyDown 事件。我认为这可能是因为网格没有焦点。如果是这种情况，我将如何在我的代码中赋予网格焦点？感谢您的帮助。

这是我的代码：xaml 中的网格

```
 <Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}" 
      KeyDown="Grid_KeyDown" KeyUp="Grid_KeyUp" x:Name="myGrid"
      >
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="auto" />
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
    <StackPanel Orientation="Vertical">
        <StackPanel Orientation="Horizontal">
            <TextBlock FontSize="30" Margin="10" x:Name="statusBox">Status</TextBlock>
        </StackPanel>
    </StackPanel> 
```

和 c# 中的事件处理程序

```
 private void Grid_KeyDown(object sender, KeyRoutedEventArgs e)
    {
        statusBox.Text = "Key down";
    } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-04T22:26:00.173

[在CoreWindow](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.core.corewindow.aspx)级别而不是网格级别挂钩事件。在您的 C# 中，执行类似...

```
CoreWindow.GetForCurrentThread().KeyDown += Window_KeyDown; 
```

其中 Window_Keydown 是一种代替您当前拥有 Grid_KeyDown 的方法。

# c# - 将对象从一个应用程序拖到另一个应用程序

> ID：11812061
> 
> 赞同：0
> 
> 时间：2012-08-04T21:14:45.283
> 
> 标签：c#, winforms

我有两个小应用程序：图像文件浏览器和图像查看器。

资源管理器使用标准树视图来显示文件系统中的内容。
查看器支持拖放以加载文件。

我想将一个文件条目从我的资源管理器拖到我的查看器中并让它加载图像。如果我需要访问特定信息，资源管理器中的每个节点都会在其标记中包含一个 FileInfo 对象。

这可能吗？

注意：我可以将查看器直接构建到资源管理器中，但我想看看是否可以将对象拖入和拖出应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T16:24:56.913

从您的自定义应用程序中获取数据的一些基本代码...

```
DataObject d = new DataObject(); 
d.SetData(DataFormats.Serializable, myObject); 
myForm.DoDragDrop(d, DragDropEffects.Copy); 
```

您通常从识别拖动源、UIElement 或 ContentElement 开始，然后为 MouseMove 事件创建一个处理程序。那就是上面的代码应该去的地方。

在放置目标上，您还可以识别元素，将 AllowDrop 设置为 true，并实现 Drop 事件处理程序。看看[Drag and Drop Overview](http://msdn.microsoft.com/en-us/library/ms742859.aspx)应该很有帮助。

# css - 转型中的可见性有什么意义？

> ID：11812063
> 
> 赞同：-1
> 
> 时间：2012-08-04T21:15:17.567
> 
> 标签：css, css-transitions

请告知我是否感到困惑，但是否有任何转变可见性的意义？当然，不透明度会产生整洁的效果。但是 none to block 的更改将立即从 nada 变为 full。也许我们可以在某个时间间隔内的某个时间传播它的发生**，**但过渡会同时发生。还是我弄错了？

这是我正在创建的代码。我应该在第一种样式中保留最后三行吗？

```
div.contentItem{
    border: 2px solid #00bb00;
    border-radius: 20px;
    background-color: Beige;
    padding: 10px;
    -webkit-transition: visibility 3.0s, opacity 3.0s;
    -moz-transition: visibility 3.0s, opacity 3.0s;
    -o-transition: visibility 3.0s, opacity 3.0s;
}

div.contentItemHidden{
    opacity: 0;
}

div.contentItemVisible{
    opacity: 1;
} 
```

之前，我在最后两个子句中有块样式，但这实际上破坏了不透明度的过渡（可能是由于 display: none 导致元素根本不透明）。

```
div.contentItemHidden{
    display: none;
    opacity: 0;
}

div.contentItemVisible{
    display: block;
    opacity: 1;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T21:28:17.373

是的，在`visibility`. 如果您只是`opacity`在一个元素上使用，该元素将仍然存在，并且会阻止对其下方的任何内容的点击和悬停效果。使用`visibility: hidden`，元素将不再可见（类似于`opacity: 0`），但无法单击。

这是一个链接，有助于更详细地解释为什么使用`visibility`and`opacity`可能是必要的，以及如何正确地这样做：[http ://www.greywyvern.com/?post=337](http://www.greywyvern.com/?post=337)

作为旁注，我注意到您`visibility`在问题中提到了，但`display`在您的代码中有。我想指出[visibility](http://www.w3schools.com/cssref/pr_class_visibility.asp)和[display](http://www.w3schools.com/cssref/pr_class_display.asp)之间存在差异。特别是，元素`visibility: hidden`不可见，但仍占用空间。元素`display: none`不可见但不占用空间。

# java - 带有 Java 泛型的 JPA

> ID：11812064
> 
> 赞同：1
> 
> 时间：2012-08-04T21:15:40.953
> 
> 标签：java, generics, jpa, eclipselink

我有几个具有基本`Long`ID 和其他属性的实体。这些实体与另一个实体具有一对多的关系，该实体为第一个实体保存不同的自定义（用户输入）翻译。基本上存在实体对，其中一个包含所有非翻译内容，另一个包含文本属性的多个翻译。

为了减少代码和注释的重复，我想为其中一对实体中的每个实体创建一个抽象类。对于多个翻译，我创建了一个这样的类：

```
@MappedSuperclass
public abstract class CustomTranslations
{
    @Id
    protected Long id;
    @Id
    protected String locale;
} 
```

对于主要实体，我有这个：

```
@MappedSuperclass
public abstract class CustomTranslationsHolder<T extends CustomTranslations>
{
    @OneToMany(fetch=FetchType.EAGER)
    @JoinColumn(name="ID")
    @MapKey(name="locale")
    protected Map<String, T> translationsByLocale;
} 
```

所以说其中一个实体对是 for `Foo`。我会有这个：

```
@Entity
@Table(name="FOO_TRANSLATIONS")
public class FooTranslations extends CustomTranslations
{
    private String title;
    private String description;
    ....
} 
```

和这个：

```
@Entity
public class Foo extends CustomTranslationsHolder<FooTranslations>
{
    @Id
    private Long id;
    private String whatever;
    private Integer blah;
    ...
    public String getTitle(String locale)
    {
        return translationsByLocale.get(locale).getTitle();
    }
} 
```

这一切都编译得很好，但是在服务器启动时我收到以下错误：

```
Exception Description: Neither the instance method or field named [locale] exists for the item class [class java.lang.Void], and therefore cannot be used to create a key for the Map.
at org.eclipse.persistence.exceptions.ValidationException.mapKeyNotDeclaredInItemClass(ValidationException.java:1332)
at org.eclipse.persistence.internal.queries.MapContainerPolicy.initializeKey(MapContainerPolicy.java:517)
at org.eclipse.persistence.internal.queries.MapContainerPolicy.getKeyType(MapContainerPolicy.java:438)
at org.eclipse.persistence.internal.jpa.metamodel.MapAttributeImpl.<init>(MapAttributeImpl.java:167)
at org.eclipse.persistence.internal.jpa.metamodel.ManagedTypeImpl.initialize(ManagedTypeImpl.java:1158)
at org.eclipse.persistence.internal.jpa.metamodel.MetamodelImpl.initialize(MetamodelImpl.java:459)
at org.eclipse.persistence.internal.jpa.metamodel.MetamodelImpl.<init>(MetamodelImpl.java:111)
at org.eclipse.persistence.internal.jpa.metamodel.MetamodelImpl.<init>(MetamodelImpl.java:130)
at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.getMetamodel(EntityManagerSetupImpl.java:2566)
at org.eclipse.persistence.internal.jpa.EntityManagerFactoryDelegate.getMetamodel(EntityManagerFactoryDelegate.java:592)
at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.getMetamodel(EntityManagerFactoryImpl.java:506)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.invokeProxyMethod(AbstractEntityManagerFactoryBean.java:376)
at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean$ManagedEntityManagerFactoryInvocationHandler.invoke(AbstractEntityManagerFactoryBean.java:517)
at $Proxy8.getMetamodel(Unknown Source)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:176)
at $Proxy12.getMetamodel(Unknown Source)
at org.springframework.data.jpa.repository.support.JpaEntityInformationSupport.getMetadata(JpaEntityInformationSupport.java:60)
at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getEntityInformation(JpaRepositoryFactory.java:149)
at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getTargetRepository(JpaRepositoryFactory.java:87)
at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getTargetRepository(JpaRepositoryFactory.java:70)
at org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:137)
at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.getObject(RepositoryFactoryBeanSupport.java:125)
at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.getObject(RepositoryFactoryBeanSupport.java:41)
at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:142)
... 44 more 
```

所以，听起来它可以在地图`locale`上找到属性。`T`似乎它应该知道那`T`是 a `CustomTranslations`，因此知道 上有一个`locale`字段`CustomTranslations`。

这只是 EclipseLink 的问题吗？或者有没有办法我可以这样做？我很想知道 Hibernate 如何处理完全相同的代码。任何有关这方面的信息或建议将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-11T22:36:54.547

接受的答案是错误的。泛型在 JPA 或 EclipseLink 中似乎没有得到很好的支持（可能是因为它们使用字节码编织而不是反射）。无论类型擦除如何，这些信息都绝对可以在运行时使用反射获得。

的实际运行时类型被删除，但扩展`T`的事实没有。这是在编译时指定的，并存储在可从实例访问的类元数据中。`T``CustomTranslations``Class`

您可以调用`CustomTranslationsHolder.class.getTypeParameters()`which 将返回一个数组，其中包含一个`TypeVariable`名为“T”的元素，您可以在该数组上调用`getBounds()`which 将返回`"CustomTranslations"`。因此可以证明地图中的值包含该`locale`属性。

我会提交错误和/或与其他 JPA 提供程序进行测试。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-04T21:20:04.587

> 似乎它应该知道 T 是`CustomTranslations`

由于类型擦除，它不知道这一点。

[http://docs.oracle.com/javase/tutorial/java/generics/erasure.html](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)

[Java 泛型 - 类型擦除 - 何时以及发生什么](https://stackoverflow.com/questions/339699/java-generics-type-erasure-when-and-what-happens?rq=1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-14T07:41:08.140

JPA 规范说：

> 映射超类定义的持久关系必须是单向的。

这就是您不能将**CustomTranslationsHolder**定义为映射超类的原因，因为它与另一个映射超类具有 ManyToOne 关系。这个类可能是一个实体。

```
@Entity
public abstract class CustomTranslationsHolder<T extends CustomTranslations>
{
    @OneToMany(fetch=FetchType.EAGER)
    @JoinColumn(name="ID")
    @MapKey(name="locale")
    protected Map<String, T> translationsByLocale;
} 
```

但在这种情况下，不幸的是，JPA 将无法在运行时提取 T 类型。

我建议审查您的设计。

# android - Android 3.x/Google TV/SDK 上的视频处理：视频帧到 SurfaceTexture/OpenGL/GLSL

> ID：11812066
> 
> 赞同：5
> 
> 时间：2012-08-04T21:16:03.700
> 
> 标签：android, opengl-es, glsl, google-tv, android-3.2-honeycomb

在花了一些时间之后，最好问一下。谢谢你们的帮助，伙计们！

问题

*   如何将 MediaPlayer 或 VideoView 中的视频帧渲染到 SurfaceTexture 或 OpenGL 纹理，以便通过 GLSL 更改纹理/片段颜色？（我们需要它用于花哨的 GLES/GLSL 视频处理例程。）

语境

a) Google TV（LG G2 2012 设备）是 Android 3.2 设备，仅支持 SDK（无 NDK）

b) 从相机渲染到 SurfaceTexture 很容易，但是如何在 Android 3.x 中将视频渲染到 SurfaceTexture？有关相机解决方案，请参见下文。

c) 我已经将视频帧渲染到 GLView/GLRenderer，但我没有抓取帧以通过 GLSL 更改它。它似乎不起作用。但是我需要带有视频数据的可访问 GLES/GLSL 纹理来进行视频处理：

MainActivity 类：

```
public void onCreate(Bundle state) {
    super.onCreate(state);

    m_View = new GLSimpleView(this);
    setContentView(m_View);

    m_Holder = m_View.getHolder();
    m_Holder.addCallback(this);
    m_Holder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
} 
```

GLSimpleView 类：

```
public GLSimpleView(Context context) {
    super(context);

    m_Renderer = new GLTextureRenderer(context); 
    this.setRenderer(m_Renderer);
} 
```

GLTextureRender 类：

```
int[] textures = new int[1];
GLES20.glGenTextures(1, textures, 0);

m_SurfaceTexture = textures[0];
GLES20.glBindTexture(GL_TEXTURE_EXTERNAL_OES, mTextureID);

GLES20.glTexParameterf(GL_TEXTURE_EXTERNAL_OES, GLES20.GL_TEXTURE_MIN_FILTER, GLES20.GL_NEAREST);
GLES20.glTexParameterf(GL_TEXTURE_EXTERNAL_OES, GLES20.GL_TEXTURE_MAG_FILTER, GLES20.GL_LINEAR);

GLES20.glTexParameteri(GL_TEXTURE_EXTERNAL_OES, GLES20.GL_TEXTURE_WRAP_S, GLES20.GL_CLAMP_TO_EDGE);
GLES20.glTexParameteri(GL_TEXTURE_EXTERNAL_OES, GLES20.GL_TEXTURE_WRAP_T, GLES20.GL_CLAMP_TO_EDGE);

m_Surface = new SurfaceTexture(m_SurfaceTexture);
m_Surface.setOnFrameAvailableListener(this);

// THIS ONE DOESN'T WORK WITH ANDROID 3.x!
// HOW TO BIND m_Surface TO m_MediaPlayer?

//Surface surface = new Surface(m_Surface);
//m_MediaPlayer.setSurface(surface);
//surface.release(); 
```

也比较一下：

*   相机的 SurfaceTexture（我需要这个用于 MediaPlayer 或 VideoView！）：[在 Android 中使用 SurfaceTexture](https://stackoverflow.com/questions/6414003/using-surfacetexture-in-android)

*   视频到 GLView（不能通过 GLSL 访问纹理！）：[在 GLSurfaceView 而不是 SurfaceView 中播放视频](https://stackoverflow.com/questions/11431676/playing-video-in-a-glsurfaceview-instead-of-surfaceview)

*   Android 4.x SDK VideoSurfaceTexture 示例（不兼容 3.2！）：http: [//source-android.frandroid.com/cts/tests/src/android/media/cts/VideoSurfaceView.java](http://source-android.frandroid.com/cts/tests/src/android/media/cts/VideoSurfaceView.java)

*   Android MediaPlayer（在 Android 3.x 中不支持 setSurface()！）：http: [//developer.android.com/reference/android/media/MediaPlayer.html](http://developer.android.com/reference/android/media/MediaPlayer.html)

因此主要问题仍然是：如何使用 Android 3.x 访问和操作视频帧？也许是不同的解决方案？在花费太多时间之后，我是否错过了什么？考虑到 Google TV 根本不支持 NDK，如果我们试图操纵视频数据，我们会受到很大的限制。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T06:09:56.873

Megha 很友善地为我调查了这件事。我们在 Google TV for ARM 上不支持此功能。我们目前的 SOC（片上系统）是不可能的。

# javascript - 如何在 Parse.com 中设置路由？Parse.Router 的替代方案

> ID：11812067
> 
> 赞同：7
> 
> 时间：2012-08-04T21:16:21.507
> 
> 标签：javascript, backbone.js, parse-platform

集成路由器的最简单方法是什么？这个[https://parse.com/questions/how-to-create-website-with-parse](https://parse.com/questions/how-to-create-website-with-parse)建议在 Parse 旁边添加 Backbone.js。

我该如何以最轻松的方式做到这一点？

想知道 Parse 团队是否正在计划 Parse.Router 类:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-18T15:01:31.283

较早的响应已过时。Parse JS SDK 现在包含一个路由器。使用 Parse.Router 和 Parse.history。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T22:55:09.523

到目前为止，我的方法是在 underscore.js 之后包含一个到主干.js（您从站点获得）的脚本链接，因为它是一个主干.js 要求，就像它是一个 parse.js 一样，就像这样

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script src="js/underscore-1.1.6.js"></script>
<script src="js/backbone.js"></script>
<script src="http://www.parsecdn.com/js/parse-1.0.10.min.js"></script>
<script src="js/myApp.js"></script> 
```

然后像这样创建一个 Backbone.Router 实例

```
$(function() {

  Parse.$ = jQuery;

  // Initialize Parse with your Parse application javascript keys
  Parse.initialize("YOUR_APPLICATION_ID", "YOUR_JAVASCRIPT_KEY");

  // Router
  var Workspace = Backbone.Router.extend({

    routes: {
      "help":                 "help",    // #help
      "search/:query":        "search"  // #search/kiwis
    },

    help: function() {
      // 
      console.log("help");
    },

    search: function(query, page) {
      //
      console.log("search query is "+query);
    }

  });
  this.Router = new Workspace();
  Backbone.history.start();

  // Models ...

  // Views ... 
```

# php - 如何通过限制发送位置来保护 POST

> ID：11812068
> 
> 赞同：0
> 
> 时间：2012-08-04T21:16:43.683
> 
> 标签：php, flash, post, actionscript

好的，首先我有一个问题——人们可以查看正在发送的帖子吗？例如，在 Flash 游戏中，当对网页进行 POST 时，用户有什么方法可以查看该 POST 的数据？

如果他们可以，那么我最初发布密码的想法就行不通了。但我不认为密码会那么有效。

所以.. 最好的方法是什么，所以源 A 只能发布到源 B。

我希望你能理解我在这里想要达到的目标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T21:20:37.263

> [...]***用户有什么方法可以查看该 POST 的数据？***

是的。用户可以检查从他的计算机发送的内容。

例如，如果您有一个游戏并想提交一些高分，那么基本上没有办法确保用户不会以任意分数执行手工制作的帖子。

> ***所以.. 最好的方法是什么，所以源 A 只能发布到源 B。***

不知道你的意思是什么，但如果你想确保服务器只处理来自特定客户端的帖子，那么我相信你应该简单地使用例如 cookie 建立一个会话。

* * *

如果您面临例如必须提交高分的情况，您有几个选择：

*   您可以对正在发送的数据应用一些密码。这不会阻止任何人尝试破解游戏并提交任意分数，因为他总是可以查看代码，并弄清楚如何自己创建这些密文。您可以通过混淆代码来使这个过程变得更加困难，但基本上没有办法保证 100% 的安全。

*   您可以监控游戏中的每个动作，并验证最终得分是否是服务器上有效游戏的结果。然后，用户必须手工制作完整的合法游戏以伪造分数。

*   你可以做到以上，但*记录*游戏中的所有动作，并在服务器端进行“赛后检查”，并验证最终得分是否为有效游戏的结果。

* * *

你说这很关键。在这种情况下，您要么不走运，要么可以利用某些特定于应用程序的功能来解决它​​。

# java - 在另一个片段活动中删除片段

> ID：11812070
> 
> 赞同：0
> 
> 时间：2012-08-04T21:16:52.940
> 
> 标签：java, android, android-fragments, android-fragmentactivity

我有一个实现 的片段，`onClickListener`然后`onClickListener`尝试删除一个片段。

`badFragment`我在in下得到一条红线`transaction.remove(badFragment);`。我最好的猜测是因为它无法分辨那个片段是什么/它在哪里。

我将如何找到该片段，以便将其删除？

我试过 findFragmentId(badFragment); 但它不起作用。

*如果您可以让我知道您在哪里找到此方法，则可以加分。因为我不擅长在 Android Docs 中查找内容。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T21:48:38.557

你可以找到片段

```
getFragmentManager().findFragmentById(R.id.fragment_id); 
```

或者

```
getFragmentManager().findFragmentByTag("tag"); 
```

您可以删除片段本身

```
getActivity().getFragmentManager().beginTransaction().remove(this).commit(); 
```

# php - 按数字对数组中的数字进行排序（PHP）

> ID：11812076
> 
> 赞同：0
> 
> 时间：2012-08-04T21:17:34.767
> 
> 标签：php, arrays, sorting, numbers, digit

我需要一个 PHP 脚本，它可以按第一个数字对数字数组进行排序，然后按第二个数字，依此类推。

例如，一个数组：

```
$arr = array(1, 94, 4, 925, 401, 277, 255); 
```

应该是这样的：

1、255、277、4、401、925、94

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-04T21:18:42.197

`SORT_STRING`通过传递给[`sort()`](http://php.net/sort)函数，将其排序为字符串：

```
sort( $arr, SORT_STRING); 
```

这[输出](http://viper-7.com/m2Xpc1)：

```
Array
(
    [0] => 1
    [1] => 255
    [2] => 277
    [3] => 4
    [4] => 401
    [5] => 925
    [6] => 94
) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-04T21:19:50.920

```
sort($arr, SORT_STRING); 
```

请参阅手册页进行排序：

[http://php.net/manual/en/function.sort.php](http://php.net/manual/en/function.sort.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T16:17:39.307

句法

bool sort ( array &$array [, int $sort_flags = SORT_REGULAR ] ) 这个函数对一个数组进行排序。此功能完成后，元素将从低到高排列。

```
$arr = array(1, 94, 4, 925, 401, 277, 255);

sort( $arr, SORT_STRING);

var_dump($arr); 
```

上面的海报使用了这个链接。这是使用您的代码的示例

# asp.net-mvc - 为什么我在使用 aspnet_compiler.exe 编译我的站点时会出现构建错误，但在我使用 VS 的构建工具时却没有？

> ID：11812077
> 
> 赞同：2
> 
> 时间：2012-08-04T21:17:46.000
> 
> 标签：asp.net-mvc, vb.net, visual-studio-2010, compiler-construction

我有一个包含 MVC、测试、数据访问等项目的解决方案，当我在 VS 2010 中单击“构建”时，它构建得很好。

当我尝试在命令提示符 ( `aspnet_compiler.exe -c -v temp -p \absolute\path\to\my\solution\directory`) 中使用 aspnet_compiler 时，我收到两个错误并且构建失败！

*   C:\myFrameworkPath\Temporary ASP.NET Files\temp\6d21e425\4455c27d\App_Web_y5rq3jcy.0.vb(17)：警告 BC40056：在 Imports 'myExternalLib.Controls' 中指定的命名空间或类型不包含任何公共成员或不能被发现。确保命名空间或类型已定义并包含至少一个公共成员。确保导入的元素名称不使用任何别名。
*   C:\myFrameworkPath\Config\web.config(130)：错误 ASPCONFIG：无法加载类型“System.Data.Entity.Design.AspNet.EntityDesignerBuildProvider”。

注意：我想使用 aspnet_compiler 来实现[Luis Rocha 的](http://www.luisrocha.net/2011/10/avoiding-mvcbuildviews-build-time.html)预构建视图。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T09:26:20.643

我不知道*为什么*会发生这种情况（我仍然希望得到这个答案），但看起来 aspnet_compiler 工具[不知道](https://stackoverflow.com/a/2812707/794234)`System.Data.Entity.Design.AspNet.EntityDesignerBuildProvider`在 web.config 文件中没有明确说明的情况下在哪里找到类型。VS 2010 内部的构建例程不知何故知道，我不明白为什么 aspnet_compiler 不这样做！

# jquery - 第一个过渡不平滑jQuery淡入/淡出

> ID：11812089
> 
> 赞同：2
> 
> 时间：2012-08-04T21:20:18.107
> 
> 标签：jquery

我有一些循环遍历一系列 div 的 jQuery 代码。我有它，所以当前的 div 淡出，然后下一个 div 淡入它的位置。问题出在第一次转换时，可见的 div 不会淡出，它只是消失了。在第一次过渡之后，其余的过渡是平滑的，具有适当的淡入/淡出运动。以下是 div 的示例：

```
<div id="testimonials">
    <div class="testimony current">
        <p>Text1</p>
    </div>
    <div class="testimony">
        <p>Text2</p>
    </div>
</div> 
```

以下是用于转换的 jQuery：

```
$(document).ready(function() {
    var cycle = window.setInterval(next, 6000);

    function next() {
        $('#testimonials .current').removeClass('current').fadeOut(500).next().add('#testimonials div:first').last().fadeIn(2000).addClass('current');
    }
}); 
```

您可以在以下位置看到尴尬的第一次过渡：http: [//jrubins.webfactional.com/tamid/vision.php](http://jrubins.webfactional.com/tamid/vision.php)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T21:39:29.693

更改调用`fadeOut()`和`removeClass()`方法的顺序，试试这个：

```
function next() {
   $('#testimonials .current').fadeOut(500, function(){
       $(this).removeClass('current')
   }).next()...
} 
```

# asp.net-mvc-3 - 数据注释扩展 MV3 ModelState 无效

> ID：11812094
> 
> 赞同：2
> 
> 时间：2012-08-04T21:21:02.610
> 
> 标签：asp.net-mvc-3, data-annotations

我正在使用来自[http://dataannotationsextensions.org/的 DataAnnotationsExtensions](http://dataannotationsextensions.org/)

这里有一个例子[http://weblogs.asp.net/srkirkland/archive/2011/02/23/introducing-data-annotations-extensions.aspx](http://weblogs.asp.net/srkirkland/archive/2011/02/23/introducing-data-annotations-extensions.aspx)

控制器代码

```
 public ActionResult Create(Dog dog, HttpPostedFileBase Picture)
    {
        Regex rgx = new Regex(@"^.*\.(jpg|gif|jpeg|png)$");
        Match m = rgx.Match(Picture.FileName);

        if (rgx.IsMatch(Picture.FileName))
            {
                if (ModelState.IsValid)
                { 
```

型号代码

```
[FileExtensions("png|jpg|jpeg|gif", ErrorMessage = "Only jpg jpeg gif or png files allowed")]
        public string Picture { get; set; } 
```

和剃须刀代码

```
@Html.TextBoxFor(model => model.Picture, new { type = "file" })
@Html.ValidationMessageFor(model => model.Picture) 
```

我所做的一切都失败了

```
if (ModelState.IsValid) 
```

如果我删除 FileExtensions Annotation 它可以正常工作，但是我不再能够阻止我不想要的文件类型。

我已经检查了位于此处的数据注释扩展的代码 [https://github.com/srkirkland/DataAnnotationsExtensions/blob/master/DataAnnotationsExtensions/FileExtensionsAttribute.cs](https://github.com/srkirkland/DataAnnotationsExtensions/blob/master/DataAnnotationsExtensions/FileExtensionsAttribute.cs)

而且我似乎仍然无法找出问题所在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T15:14:44.043

我相信模型绑定器与模型上名为“图片”的属性以及名为“图片”的参数混淆了`HttpPostedFileBase`。

如果您将`HttpPostedFileBase`参数更新为“图片”以外的内容，则模型绑定器应正常运行。例子：

```
public ActionResult Create(Dog dog, HttpPostedFileBase UploadedPicture) 
```

# c - 如何隐藏 C 程序的控制台窗口？

> ID：11812095
> 
> 赞同：17
> 
> 时间：2012-08-04T21:21:14.803
> 
> 标签：c, window, hide

我一直在环顾四周，但我找不到我的问题的解决方案，即使有一些据称已解决的问题类似于我的问题。

我想在我的 C 程序运行时隐藏控制台窗口。

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>
#include <windows.h>
#define _WIN32_WINNT 0x0500

int main(){   
    HWND hWnd = GetConsoleWindow();
    ShowWindow( hWnd, SW_MINIMIZE );  //won't hide the window without SW_MINIMIZE
    ShowWindow( hWnd, SW_HIDE );
} 
```

这是我尝试过的，但编译器给了我

> 初始化使指针从整数而不进行强制转换

以及实际上停止编译的致命错误：

> 对“GetConsoleWindow”的未定义引用

PS：我检查了*wincon.h*并`GetConsoleWindow()`定义了函数。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-04T21:43:48.310

您的

```
#define _WIN32_WINNT 0x0500 
```

（需要使用`GetConsoleWindow`- 请参阅[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683175%28v=vs.85%29.aspx)）必须在*之前*

```
#include <windows.h> 
```

它`#define`用于`windows.h`了解您所针对的 Windows 版本（以及因此它必须提供哪些声明/它必须添加到结构/其他可能与该链接器错误相关的魔法的附加字段）；如果在包含*后*`windows.h`定义它，它将无用。

# php - 将变量传递给另一个网络服务器

> ID：11812097
> 
> 赞同：0
> 
> 时间：2012-08-04T21:21:29.890
> 
> 标签：php

是否可以使用 php 将变量从一个网络服务器传递到另一个网络服务器？我需要能够将变量从虚拟主机传递到本地服务器进行处理，我不知道是否可以完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T21:24:04.360

您必须以某种方式在服务器之间进行通信。您如何进行通信决定了您是否以及如何传递数据。（您通常不能传递实际变量，只能传递它们的内容）。

例如，如果您正在与 HTTP 通信，那么您可以在 URI 的查询字符串或 POST 请求的正文中传递数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T21:24:09.990

向该服务器发布 Web 请求。您可以使用 curl 并添加标题数据或发布数据来做到这一点。检查[php curl 手册](http://php.net/manual/en/book.curl.php)

简单的发布请求也可以解决问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T21:25:10.070

有很多方法可以做到这一点。最简单和最面向服务的方法是制作一个“捕手” php 脚本，它将接收目标服务器上的变量，然后本地服务器可以运行：

```
file_get_contents('http://targetserver.com/catcher.php?var1=val1&var2=val2&var3=val3...'); 
```

还要研究套接字和直接连接、FTP 和其他方法。

# php - 在服务器端重用主干应用程序以在服务器端呈现视图

> ID：11812098
> 
> 赞同：2
> 
> 时间：2012-08-04T21:21:48.417
> 
> 标签：php, javascript, node.js, backbone.js

我正在开发一个backbone.js 应用程序，其中我的一个视图是具有不同类型子视图的复杂提要。

我将不得不生成该视图的静态版本以用于电子邮件目的。我正在寻找最实用的解决方案，让我可以从现有代码中尽可能多地重用而不重复

我想出了两个选择：

1.  使用 php 静态生成视图。由于语言不同，这将使我不得不重复很多逻辑。
2.  设置一个简单的 nodejs http 服务器，它将重用大部分应用程序逻辑来在服务器端创建一个视图。这听起来不错，但我仍然不知道这种解决方案从长远来看会有多实用。对于 ecample，我完全不知道我是否能够在服务器端使用 Jquery 从现有的 html 文件创建布局。

我应该选择两种选择中的哪一种，为什么？或者也许还有第三个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T23:25:32.617

当我开始开发我的第一个backbone.js 应用程序时，我就这个确切的问题争论了很长时间，因为和你一样，我认为复制这么多视图代码是一种浪费。我在 Rails 中工作，我的目标是对服务器上的部分（haml/ruby）和客户端上的模板（haml/coffeescript）使用相同的格式（haml），但事实证明这是不可能的，无论如何也不是很可取的。

无论如何，在该应用程序上工作了几个月后，我得出的结论是重复不是一个主要问题。如果最终结果只有几页，那么避免重复肯定是不值得的。此外，至少在我的情况下，我从服务器发送的静态页面最终并没有与backbone.js 呈现的模板具有完全相同的结构，所以它不是100% 的重复。

不确定这是否有帮助，但无论如何我建议先复制页面，看看实际涉及多少额外的工作。更复杂的解决方案，如使用 nodejs 服务器的#2 让我觉得有点矫枉过正，除非你真的会以这种方式提供大量页面。

对于它的价值，这里有一些关于 SO 主题的讨论：

[Rails 客户端/服务器端渲染使用单个模板（车把或 Mustache）和 Sammy.js](https://stackoverflow.com/questions/5478654/rails-client-side-server-side-rendering-using-single-template-handlebars-or-m)

[适用于服务器和客户端的模板语言](https://stackoverflow.com/questions/4977558/template-language-that-works-on-both-server-and-client)

# objective-c - MFMailComposeViewController 发送电子邮件

> ID：11812102
> 
> 赞同：0
> 
> 时间：2012-08-04T21:22:57.270
> 
> 标签：objective-c, email

我对代码本身没有问题，只是对MFMailComposeViewController的理解首先：如何将我的地址添加为发件人地址？

当我点击发送时，一封电子邮件将发送给收件人。电子邮件来自我的电子邮件帐户。

但是当我检查我的框时，我从应用程序发送的电子邮件卡在发件箱中。

错误：“主机不允许中继”我该如何解决？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T05:41:54.903

第一个问题的答案是：您不能从您的应用程序中添加发件人地址。您的发件人地址将与 iPhone 的邮件应用程序中配置的相同。您需要在 iPhone 的邮件应用程序中配置您的电子邮件帐户。

iOS 不允许在您的应用程序中设置邮件帐户。

在邮件应用程序中配置正确的邮件帐户后，您将摆脱此类错误。

# java - 从字符串到 ASCII 到二进制再到 ASCII 到 Java 中的字符串

> ID：11812110
> 
> 赞同：0
> 
> 时间：2012-08-04T21:24:44.977
> 
> 标签：java, binary, ascii

我有一个时髦的问题（我希望还没有被问到和回答）。首先，我会告诉你我正在尝试做的事情的顺序以及我是如何做的，然后告诉你我在哪里遇到了问题：

1.  将字符串转换为 ASCII 数字
2.  将这些 ASCII 数字转换为二进制并将它们存储在字符串中
3.  将这些二进制数转换回 ASCII 数
4.  将 ASCII 数字转换回普通字符

以下是我迄今为止编写的方法：

```
public static String strToBinary(String inputString){

    int[] ASCIIHolder = new int[inputString.length()];

    //Storing ASCII representation of characters in array of ints
    for(int index = 0; index < inputString.length(); index++){
        ASCIIHolder[index] = (int)inputString.charAt(index);
    }

    StringBuffer binaryStringBuffer = new StringBuffer();

    /* Now appending values of ASCIIHolder to binaryStringBuffer using
     * Integer.toBinaryString in a for loop. Should not get an out of bounds
     * exception because more than 1 element will be added to StringBuffer
     * each iteration.
     */
    for(int index =0;index <inputString.length();index ++){

        binaryStringBuffer.append(Integer.toBinaryString
                (ASCIIHolder[index]));
    }

    String binaryToBeReturned = binaryStringBuffer.toString();

    binaryToBeReturned.replace(" ", "");

    return binaryToBeReturned;
}

public static String binaryToString(String binaryString){

    int charCode = Integer.parseInt(binaryString, 2);

    String returnString = new Character((char)charCode).toString();

    return returnString;
} 
```

运行代码时出现 NumberFormatException ，我认为这是因为程序试图将二进制数字转换为一个完整的二进制数字而不是单独的字母。根据您在此处看到的内容，是否有更好的方法来整体执行此操作和/或如何告诉计算机在迭代二进制代码时识别 ASCII 字符？希望这很清楚，如果没有，我会检查评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-19T03:40:58.803

所以我使用了 OP 的代码并进行了一些修改，它对我来说非常有效。我会在这里发布给未来的人。我认为 OP 不再需要它了，因为他可能在过去 2 年里就想通了。

```
public class Convert
    {
    public String strToBinary(String inputString){

    int[] ASCIIHolder = new int[inputString.length()];

    //Storing ASCII representation of characters in array of ints
    for(int index = 0; index < inputString.length(); index++){
        ASCIIHolder[index] = (int)inputString.charAt(index);
    }

    StringBuffer binaryStringBuffer = new StringBuffer();

    /* Now appending values of ASCIIHolder to binaryStringBuffer using
     * Integer.toBinaryString in a for loop. Should not get an out of bounds
     * exception because more than 1 element will be added to StringBuffer
     * each iteration.
     */
    for(int index =0;index <inputString.length();index ++){

        binaryStringBuffer.append(Integer.toBinaryString
                (ASCIIHolder[index]));
    }

    String binaryToBeReturned = binaryStringBuffer.toString();

    binaryToBeReturned.replace(" ", "");

    return binaryToBeReturned;
}

public String binaryToString(String binaryString){
    String returnString = "";
    int charCode;
    for(int i = 0; i < binaryString.length(); i+=7)
    {
    charCode = Integer.parseInt(binaryString.substring(i, i+7), 2);
    String returnChar = new Character((char)charCode).toString();
    returnString += returnChar;
    }
    return returnString;
}
} 
```

我要感谢 OP 为我写了大部分内容。修复错误比编写新代码容易得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T21:35:23.207

你*在这里至少有两个*问题：

*   您只是连接二进制字符串，没有分隔符。所以如果你有“1100”然后是“0011”，你会得到“11000011”，这与你有“1”后跟“1000011”的结果相同。
*   您正在调用`String.replace`并忽略返回结果。当您要替换空格时，这种情况并不重要，而且无论如何都不会有任何空格......但*应该*有！

当然，您不必*使用*分隔符 - 但如果您不使用，则需要确保包含每个 UTF-16 代码点的所有 16 位。（或验证您的字符串仅使用有限范围的字符并下降到适当的位数，例如 ISO-8859-1 为 8 位或 ASCII 为 7 位。）

（我想知道这一切的意义何在。作业？我看不出这在现实生活中有用。）

# html - @font-face 指向本地文件的 url

> ID：11812111
> 
> 赞同：33
> 
> 时间：2012-08-04T21:24:49.173
> 
> 标签：html, css, fonts, font-face

我需要在 html 文件中包含字体（OpenSymbol），并且字体文件位于本地文件夹中（我知道它的确切绝对路径）。如果我像这样使用@font-face：

```
@font-face {
  font-family: "OpenSymbol";
  src: url("<absolutePath>/OpenSymbol.ttf") format("truetype");
} 
```

它适用于 Chrome、Opera 和 Safari，但不适用于 Firefox 和 IE9。其他 @font-face 用法在所有浏览器中都可以正常工作。

顺便说一句，在 Chrome 中，我收到一条警告：

```
Resource interpreted as Font but transferred with MIME type application/octet-stream 
```

我该怎么做才能干净地包含**未安装**在操作系统上的本地存储字体？

**编辑：**

我发现不同网址的列表似乎不起作用！如果我将`[...].ttf`url 放在首位，Chrome 会加载字体，但如果它在其他地方则不会！

**第二次编辑：**

我让它在除 Firefox 之外的所有浏览器中工作：

```
@font-face { 
  font-family: 'OpenSymbol';
  src: url('file:<path>/openSymbol.ttf') format('truetype');
  font-weight: normal;
  font-style: normal;
}
@font-face { 
  font-family: 'OpenSymbolEOT';
  src: url('file:<path>/openSymbol.eot') format('embedded-opentype');
  font-weight: normal;
  font-style: normal;
}
... 
```

接着

```
.element {
  font-family: OpenType, OpenTypeEOT, [...];
} 
```

无论如何，它确实可以在 IE 中工作，但不能在使用 IE 渲染引擎的 Eclipse 中工作...... oO

顺便说一句，firefox 由于安全问题而出现问题：[请参阅此处](https://stackoverflow.com/questions/2856502/css-font-face-not-working-with-firefox-but-working-with-chrome-and-ie)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2017-04-17T16:26:16.450

您只需要一个 Web 开放字体格式的字体文件。转到[http://www.fontconverter.org](http://www.fontconverter.org)转换您的`OpenSymbol.tff to OpenSymbol.woff`. 我是一名跨平台开发人员，我测试了这在以下情况下可以正常工作：

1.  macOS 10.12.4 (iMac) 上的 Safari 10.1 和 Firefox 52.0.2
2.  Windows 7 (PC) 上的 Internet Explorer 11.0 和 Firefox 52.0.1 以及 Google Chrome 52.0 和 Opera 53.0
3.  iOS 10.3.1 (iPhone) 上的 Safari
4.  Android 5.0.2（Asus 平板电脑）上的 Chrome 57.0 和 Asus Browser 2.0.3

这在css中：

```
/* Add the decaration on top */
@font-face { 
font-family: 'OpenSymbol';
src: url('font/OpenSymbol.woff') format('woff');
}
/* in separate css .elements or even the whole body, edit your font properties */ 
body {
font-family: OpenSymbol;
font-weight: normal;
font-style: normal;
.. 
```

无需担心 Embedded OpenType (EOT) 字体文件，因为它们仅在 IE9 (2011) 和 IE10 (2012) 中需要。无需担心可缩放矢量图形 (SVG) 字体，因为自 iOS 5.0 起不再需要它们

自 2012 年以来，每个已知浏览器都完全支持 Web 开放字体格式 (WOFF)。Truetype 字体 (TTF) 在 iMac 和 PC 上本地使用，也可以在 Android 和 iPhone 上本地使用。这就是为什么 Web 开发人员经常犯这个错误，使用 TTF 而不是 WOFF 的网站。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-04T21:33:18.213

可能是浏览器不支持 .ttf 文件。考虑使用[fontsquirrel](http://www.fontsquirrel.com/)，它将为您生成所有必需的文件（.ttf、.woff、.svg、.eot）和 css，并且适用于所有浏览器。我用它所有的时间...

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-04T23:36:05.367

根据 Font Squirrel 的示例字体页面，IE 9 和 Firefox 都要求字体文件与加载它们的页面来自同一个域。因此，使用@font-face，您唯一的选择是找到您尝试使用的字体文件并将它们上传到站点，然后使用类似于以下的代码：

```
@font-face {
font-family: 'MyWebFont';
src: url('webfont.eot'); /* IE9 Compat Modes */
src: url('webfont.eot?#iefix') format('embedded-opentype'), /* IE6-IE8 */
     url('webfont.woff') format('woff'), /* Modern Browsers */
     url('webfont.ttf')  format('truetype'), /* Safari, Android, iOS */
     url('webfont.svg#svgFontName') format('svg'); /* Legacy iOS */
} 
```

取自[http://www.fontspring.com/blog/further-hardening-of-the-bulletproof-syntax](http://www.fontspring.com/blog/further-hardening-of-the-bulletproof-syntax)

编辑：Font Squirrel 页面的另一件事是，如果您使用的是 IIS 服务器，则需要将文件类型添加到 MIME 类型列表中。

# django - 带有数据的 Django 帖子返回 HTTP 403 禁止错误

> ID：11812117
> 
> 赞同：0
> 
> 时间：2012-08-04T21:25:58.947
> 
> 标签：django, tastypie

我已经启动了一个应用程序来使用tastepie 将数据发布到django。但是，我收到一个 http 403 禁止错误。你能帮我绕过那个错误吗？

**编辑：** 由于我的views.py，我收到了这个错误

```
 </script>
            </head>
            <body>
                <div id="summary">
                    <h1>MultiValueDictKeyError at /api/recipes/item_new/</h1>
                    <pre class="exception_value">&#39;Key \&#39;data\&#39; not found in &lt;QueryDict: {u\&#39;{ data:\\n        {\\n          name: &quot;Something&quot;,\\n          content: &quot;Anything&quot;\\n        }\\n}\\n\&#39;: [u\&#39;\&#39;]}&gt;&#39;</pre>
                    <table class="meta">
                        <tr>
                            <th>Request Method:</th>
                            <td>POST</td>
                        </tr>
                        <tr>
                            <th>Request URL:</th>
                            <td>http://localhost:8000/api/recipes/item_new/</td>
                        </tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T03:19:08.887

您是否遇到 CSRF 错误？您需要将`csrf_exempt`装饰器添加到您的视图中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T00:44:07.733

根据您的 urls.py，您实际上应该为此 url 获得 404`/api/recipes/item_new` 此外，您的资源已命名`recipes`，因此您的第一个和第二个 url 是准确的，这意味着第二个永远不会被调用。

```
url(r'^api/', include(recipe_resource.urls)),
url(r'^api/recipes/$', views.item_new()), 
```

尝试在此处切换订单并调整您的 item_new 网址，如下所示

```
url(r'^api/recipes/item_new$', views.item_new()),
url(r'^api/', include(recipe_resource.urls)), 
```

# javascript - 从远程文件覆盖fancybox？

> ID：11812119
> 
> 赞同：1
> 
> 时间：2012-08-04T21:26:08.520
> 
> 标签：javascript, jquery, fancybox

好吧，我正在使用一个弹出框，我想更改它的一些功能。但该文件是远程文件，我不太确定如何覆盖 javascript 函数？

基本上我想覆盖这部分：

```
<div id="fancybox-overlay"></div> 
```

因为我想禁用

> hideOnOverlayClick

所以不是真的，我想要那个函数是假的。

此外，当弹出窗口出现时，是否有机会运行自定义 javascript 计时器，该计时器将在 30 秒左右后强制脚本关闭？

提前致谢。我希望在这两种情况下都有可能。

更新：

```
<script type="text/javascript" src="http://fileice.net/gateway/mygate.php?id=4465766c4278366467523838"></script> 
```

那就是包含fancybox和jquery的网关。它在单击按钮时运行，所以我希望通过包含该脚本，您可以获得所需的信息？

更新#2：http: [//jsfiddle.net/pVp5h/](http://jsfiddle.net/pVp5h/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T21:40:53.953

您可以只下载您正在使用的 javascript 文件，进行所需的更改，然后自己再次托管和引用它。

**编辑：** 刚刚注意到您的链接，该文件受版权保护并已缩小。这意味着我之前的回答不是一个好主意......你甚至应该使用这个文件吗？

# java - 无法识别客户端 http 标头何时完成

> ID：11812123
> 
> 赞同：2
> 
> 时间：2012-08-04T21:26:48.733
> 
> 标签：java, scala, websocket

我等待客户，`ServerSocket.accept()`然后像这样处理：

```
val in = new BufferedReader(new InputStreamReader(socket.getInputStream()))
var line = in.readLine()
while (line != null) {
//...
line = in.readLine()
} 
```

我如何知道客户端已完成发送标头以便发送响应？

具体来说，我的意思是这些标题：

```
获取 /mychat HTTP/1.1
主机：server.example.com
升级：websocket
连接：升级
Sec-WebSocket-Key：x3JJHMbDL1EzLkh9GBhXDw==
Sec-WebSocket-Protocol：聊天
Sec-WebSocket-版本：13
来源：http://example.com
```

如所述：[http ://en.wikipedia.org/wiki/WebSocket](http://en.wikipedia.org/wiki/WebSocket)

我试过：

```
if (line.contains("\r\n")) {
    println("1")
}
if (line.contains("\r")) {
    println("2")
}
if (line.contains("\n")) {
    println("3")
} 
```

但它不起作用...

有效的东西是`line.isEmpty()`。但这很奇怪，因为流应该包含一些东西，而所有的包含都返回 false ......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T21:52:47.287

`readLine`从它读取的每一行的末尾删除`\r\n`，因此空行只是`""`没有任何`\r`或`\n`字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T21:43:40.957

websocket 握手只是一个 http 请求。因此，您应该能够通过回车/换行字符 (\r\n) 判断标题何时结束。

你用的是什么客户端？也许客户有问题？

您知道您不需要自己构建 websockets 库。有许多开源替代品，例如[netty](http://netty.io)的一部分。

# ruby-on-rails - 学习如何通过 RoR 创建博客，并在索引页面上获得意外内容

> ID：11812127
> 
> 赞同：1
> 
> 时间：2012-08-04T21:28:09.050
> 
> 标签：ruby-on-rails, unexpectendoffile

我刚刚开始通过 RoR 制作博客，使用从头开始的博客指南，我的索引页面上有一些意想不到的内容。这是图片： http: [//i.minus.com/ibpnYRmlPv7IW3.png](http://i.minus.com/ibpnYRmlPv7IW3.png) 标题下的一些类似哈希的字符串是出乎意料的事情。

**index_page 代码：**

```
<h1>Recent posts</h1>
<table>
    <tr>
        <th>Title</th>
        <th>Text</th>
   </tr>

   <%= @posts.each do |post| %>
        <tr>
            <td style="border: solid 2px;"><%= post.title %></td>
            <td style="border: solid 2px;"><%= post.text %></td>
       </tr>
   <% end %>    
</table>

<%= link_to 'New post', :action => :new %> 
```

**PostsController 的代码部分：**

```
def index
    @posts = Post.all
end 
```

首先，我认为这是来自 Db 的时间戳，但这里是
**来自 migrate 的代码：**

```
class CreatePosts < ActiveRecord::Migration
  def change
    create_table :posts do |t|
      t.string :title
      t.text :text
    end
  end
end 
```

所以现在任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T21:35:05.540

改变

```
<%= @posts.each do |post| %> 
```

到

```
<% @posts.each do |post| %> 
```

您看到的是`@posts.to_s`屏幕截图顶部的输出

```
<%= @posts... 
```

# iphone - 知道歌曲何时播放完毕

> ID：11812128
> 
> 赞同：1
> 
> 时间：2012-08-04T21:28:11.033
> 
> 标签：iphone, objective-c, ios, avaudioplayer

在我的应用程序中，我有几个按钮可以在按下时播放歌曲。歌曲完成后，我想将播放/停止按钮上的图像更改为播放图像。我知道我可以设置一个计时器来检查以确保显示正确的图像，但我觉得这会浪费系统资源。有没有办法知道歌曲何时播放完毕或其他？（另外，我正在使用 AVAudioPlayer）-谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T21:32:11.430

设置委托，并响应[`audioPlayerDidFinishPlaying`](https://developer.apple.com/library/ios/#DOCUMENTATION/AVFoundation/Reference/AVAudioPlayerDelegateProtocolReference/Reference/Reference.html#//apple_ref/occ/intf/AVAudioPlayerDelegate)回调。

# r - 从动态变量中选择一列

> ID：11812136
> 
> 赞同：-1
> 
> 时间：2012-08-04T21:30:21.640
> 
> 标签：r, variables, dynamic, for-loop

如何选择动态命名变量的第二列？

我创建了“population.USA”、“population.Mexico”、“population.Canada”形式的变量。每个变量都有一列表示年份，另一列表示人口值。我想在循环期间从每个变量中选择第二列。

我使用这种语法：

```
sprintf("population.%s", country)[, 2] 
```

R 返回错误：`Error in sprintf("population.%s", country)[, 2] : incorrect number of dimensions`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-04T21:46:50.860

根据您在过去几分钟内提出的一系列问题，在您熟悉 R 时，我有两个一般性建议：

1.  不要使用`sprintf`.
2.  不要使用`assign`.

现在，显然，这些功能有时都很有用。但是在你掌握一些关于 R 数据结构的基本知识之前，你已经了解它们太早了。尝试在没有那些拐杖的情况下编写代码（暂时！），因为它们只会给你带来问题。

与其为每个国家的人口创建单独的变量，不如将它们放在一个列表中。

```
population <- vector("list",3)
names(population) <- c('USA','Mexico','Russia') 
```

然后，您可以使用每个国家/地区名称的*字符串*表示来访问每个：

```
population[['USA']] <- 10000 
```

或者，

```
region <- 'USA'
population[[region]] 
```

在此示例中，我为列表元素分配了一个值，列表将保存任何其他数据类型，包括矩阵或数据框。与使用and相比，打字会少*很多*，而且更安全、更高效。`sprintf``assign`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-04T21:36:48.713

见`?get`。这是一个例子：

```
> country <- "FOO"
> assign(sprintf("population.%s", country), data.frame(runif(5), runif(5)))
> 
> get(sprintf("population.%s", country))[,2]
[1] 0.2241105 0.5640709 0.5945869 0.1830719 0.1895938 
```

如果遇到错误，查看函数返回的对象至关重要。如果您只看它返回的内容，就会立即清楚为什么您的示例会失败：

```
> sprintf("population.%s", country)
[1] "population.FOO" 
```

到那时就会很清楚，如果您还不知道或没有想过要阅读`?sprintf`，那`sprintf()`将返回一个字符串，而不是该名称的对象。有了这些知识，您就会将问题缩小到如何从计算的名称中调用对象？

# hadoop - 使用 sqoop 在 HDFS 中显示导入的表

> ID：11812138
> 
> 赞同：0
> 
> 时间：2012-08-04T21:30:36.497
> 
> 标签：hadoop, fedora, hive, sqoop

我已经设置了一个单节点 hadoop 集群并将其配置为与 apache Hive 一起使用，现在当我使用以下命令（使用 sqoop）导入 mysql 表时

> sqoop import --connect jdbc:mysql://localhost/dwhadoop --table 命令 --username root --password 123456 --hive-import

它运行成功，之后我做的时候抛出了一些异常

```
Hive> show tales; 
```

它没有列出`orders`表格

如果我再次运行导入命令，它会给我`orders`dir 已经存在的错误

请帮我找到解决方案

编辑：

我在导入之前没有创建任何表，我必须`order`在运行导入之前在 hive 中创建一个表吗？如果我导入另一个表`Customers`，它会给我以下异常

```
[root@localhost root-647263876]# sqoop import --connect jdbc:mysql://localhost/dwhadoop  --table Customers --username root --password 123456 --hive-import
Warning: /usr/lib/hbase does not exist! HBase imports will fail.
Please set $HBASE_HOME to the root of your HBase installation.
Warning: $HADOOP_HOME is deprecated.

12/08/05 07:30:25 WARN tool.BaseSqoopTool: Setting your password on the command-line is insecure. Consider using -P instead.
12/08/05 07:30:25 INFO tool.BaseSqoopTool: Using Hive-specific delimiters for output. You can override
12/08/05 07:30:25 INFO tool.BaseSqoopTool: delimiters with --fields-terminated-by, etc.
12/08/05 07:30:26 INFO manager.MySQLManager: Preparing to use a MySQL streaming resultset.
12/08/05 07:30:26 INFO tool.CodeGenTool: Beginning code generation
12/08/05 07:30:26 INFO manager.SqlManager: Executing SQL statement: SELECT t.* FROM `Customers` AS t LIMIT 1
12/08/05 07:30:26 INFO orm.CompilationManager: HADOOP_HOME is /home/enigma/hadoop/libexec/..
Note: /tmp/sqoop-root/compile/e48d4803894ee63079f7194792d624ed/Customers.java uses or overrides a deprecated API.
Note: Recompile with -Xlint:deprecation for details.
12/08/05 07:30:28 INFO orm.CompilationManager: Writing jar file: /tmp/sqoop-root/compile/e48d4803894ee63079f7194792d624ed/Customers.jar
12/08/05 07:30:28 WARN manager.MySQLManager: It looks like you are importing from mysql.
12/08/05 07:30:28 WARN manager.MySQLManager: This transfer can be faster! Use the --direct
12/08/05 07:30:28 WARN manager.MySQLManager: option to exercise a MySQL-specific fast path.
12/08/05 07:30:28 INFO manager.MySQLManager: Setting zero DATETIME behavior to convertToNull (mysql)
12/08/05 07:30:28 INFO mapreduce.ImportJobBase: Beginning import of Customers
12/08/05 07:30:28 INFO util.NativeCodeLoader: Loaded the native-hadoop library
12/08/05 07:30:29 INFO mapred.JobClient: Running job: job_local_0001
12/08/05 07:30:29 INFO util.ProcessTree: setsid exited with exit code 0
12/08/05 07:30:29 INFO mapred.Task:  Using ResourceCalculatorPlugin : org.apache.hadoop.util.LinuxResourceCalculatorPlugin@11f41fd
12/08/05 07:30:29 INFO mapreduce.AutoProgressMapper: Auto-progress thread is finished. keepGoing=false
12/08/05 07:30:30 INFO mapred.Task: Task:attempt_local_0001_m_000000_0 is done. And is in the process of commiting
12/08/05 07:30:30 INFO mapred.LocalJobRunner: 
12/08/05 07:30:30 INFO mapred.Task: Task attempt_local_0001_m_000000_0 is allowed to commit now
12/08/05 07:30:30 INFO output.FileOutputCommitter: Saved output of task 'attempt_local_0001_m_000000_0' to Customers
12/08/05 07:30:30 INFO mapred.JobClient:  map 0% reduce 0%
12/08/05 07:30:32 INFO mapred.LocalJobRunner: 
12/08/05 07:30:32 INFO mapred.Task: Task 'attempt_local_0001_m_000000_0' done.
12/08/05 07:30:33 INFO mapred.JobClient:  map 100% reduce 0%
12/08/05 07:30:33 INFO mapred.JobClient: Job complete: job_local_0001
12/08/05 07:30:33 INFO mapred.JobClient: Counters: 13
12/08/05 07:30:33 INFO mapred.JobClient:   File Output Format Counters 
12/08/05 07:30:33 INFO mapred.JobClient:     Bytes Written=45
12/08/05 07:30:33 INFO mapred.JobClient:   File Input Format Counters 
12/08/05 07:30:33 INFO mapred.JobClient:     Bytes Read=0
12/08/05 07:30:33 INFO mapred.JobClient:   FileSystemCounters
12/08/05 07:30:33 INFO mapred.JobClient:     FILE_BYTES_READ=3205
12/08/05 07:30:33 INFO mapred.JobClient:     FILE_BYTES_WRITTEN=52579
12/08/05 07:30:33 INFO mapred.JobClient:     HDFS_BYTES_WRITTEN=45
12/08/05 07:30:33 INFO mapred.JobClient:   Map-Reduce Framework
12/08/05 07:30:33 INFO mapred.JobClient:     Map input records=3
12/08/05 07:30:33 INFO mapred.JobClient:     Physical memory (bytes) snapshot=0
12/08/05 07:30:33 INFO mapred.JobClient:     Spilled Records=0
12/08/05 07:30:33 INFO mapred.JobClient:     Total committed heap usage (bytes)=21643264
12/08/05 07:30:33 INFO mapred.JobClient:     CPU time spent (ms)=0
12/08/05 07:30:33 INFO mapred.JobClient:     Virtual memory (bytes) snapshot=0
12/08/05 07:30:33 INFO mapred.JobClient:     SPLIT_RAW_BYTES=87
12/08/05 07:30:33 INFO mapred.JobClient:     Map output records=3
12/08/05 07:30:33 INFO mapreduce.ImportJobBase: Transferred 45 bytes in 5.359 seconds (8.3971 bytes/sec)
12/08/05 07:30:33 INFO mapreduce.ImportJobBase: Retrieved 3 records.
12/08/05 07:30:33 INFO hive.HiveImport: Loading uploaded data into Hive
12/08/05 07:30:33 INFO manager.SqlManager: Executing SQL statement: SELECT t.* FROM `Customers` AS t LIMIT 1
12/08/05 07:30:33 ERROR tool.ImportTool: Encountered IOException running import job: java.io.IOException: Cannot run program "hive": error=2, No such file or directory
    at java.lang.ProcessBuilder.start(ProcessBuilder.java:1029)
    at java.lang.Runtime.exec(Runtime.java:615)
    at java.lang.Runtime.exec(Runtime.java:526)
    at org.apache.sqoop.util.Executor.exec(Executor.java:76)
    at org.apache.sqoop.hive.HiveImport.executeExternalHiveScript(HiveImport.java:344)
    at org.apache.sqoop.hive.HiveImport.executeScript(HiveImport.java:297)
    at org.apache.sqoop.hive.HiveImport.importTable(HiveImport.java:239)
    at org.apache.sqoop.tool.ImportTool.importTable(ImportTool.java:393)
    at org.apache.sqoop.tool.ImportTool.run(ImportTool.java:454)
    at org.apache.sqoop.Sqoop.run(Sqoop.java:145)
    at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)
    at org.apache.sqoop.Sqoop.runSqoop(Sqoop.java:181)
    at org.apache.sqoop.Sqoop.runTool(Sqoop.java:220)
    at org.apache.sqoop.Sqoop.runTool(Sqoop.java:229)
    at org.apache.sqoop.Sqoop.main(Sqoop.java:238)
    at com.cloudera.sqoop.Sqoop.main(Sqoop.java:57)
Caused by: java.io.IOException: error=2, No such file or directory
    at java.lang.UNIXProcess.forkAndExec(Native Method)
    at java.lang.UNIXProcess.<init>(UNIXProcess.java:135)
    at java.lang.ProcessImpl.start(ProcessImpl.java:130)
    at java.lang.ProcessBuilder.start(ProcessBuilder.java:1021)
    ... 15 more 
```

但是如果我再次运行导入，它会说

```
Warning: /usr/lib/hbase does not exist! HBase imports will fail.
Please set $HBASE_HOME to the root of your HBase installation.
Warning: $HADOOP_HOME is deprecated.

12/08/05 07:33:48 WARN tool.BaseSqoopTool: Setting your password on the command-line is insecure. Consider using -P instead.
12/08/05 07:33:48 INFO tool.BaseSqoopTool: Using Hive-specific delimiters for output. You can override
12/08/05 07:33:48 INFO tool.BaseSqoopTool: delimiters with --fields-terminated-by, etc.
12/08/05 07:33:48 INFO manager.MySQLManager: Preparing to use a MySQL streaming resultset.
12/08/05 07:33:48 INFO tool.CodeGenTool: Beginning code generation
12/08/05 07:33:49 INFO manager.SqlManager: Executing SQL statement: SELECT t.* FROM `Customers` AS t LIMIT 1
12/08/05 07:33:49 INFO orm.CompilationManager: HADOOP_HOME is /home/enigma/hadoop/libexec/..
Note: /tmp/sqoop-root/compile/9855cf7de9cf54c59095fb4bfd65a369/Customers.java uses or overrides a deprecated API.
Note: Recompile with -Xlint:deprecation for details.
12/08/05 07:33:50 ERROR orm.CompilationManager: Could not rename /tmp/sqoop-root/compile/9855cf7de9cf54c59095fb4bfd65a369/Customers.java to /app/hadoop/tmp/mapred/staging/root-647263876/./Customers.java
java.io.IOException: Destination '/app/hadoop/tmp/mapred/staging/root-647263876/./Customers.java' already exists
    at org.apache.commons.io.FileUtils.moveFile(FileUtils.java:1811)
    at org.apache.sqoop.orm.CompilationManager.compile(CompilationManager.java:227)
    at org.apache.sqoop.tool.CodeGenTool.generateORM(CodeGenTool.java:83)
    at org.apache.sqoop.tool.ImportTool.importTable(ImportTool.java:368)
    at org.apache.sqoop.tool.ImportTool.run(ImportTool.java:454)
    at org.apache.sqoop.Sqoop.run(Sqoop.java:145)
    at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)
    at org.apache.sqoop.Sqoop.runSqoop(Sqoop.java:181)
    at org.apache.sqoop.Sqoop.runTool(Sqoop.java:220)
    at org.apache.sqoop.Sqoop.runTool(Sqoop.java:229)
    at org.apache.sqoop.Sqoop.main(Sqoop.java:238)
    at com.cloudera.sqoop.Sqoop.main(Sqoop.java:57)
12/08/05 07:33:50 INFO orm.CompilationManager: Writing jar file: /tmp/sqoop-root/compile/9855cf7de9cf54c59095fb4bfd65a369/Customers.jar
12/08/05 07:33:51 WARN manager.MySQLManager: It looks like you are importing from mysql.
12/08/05 07:33:51 WARN manager.MySQLManager: This transfer can be faster! Use the --direct
12/08/05 07:33:51 WARN manager.MySQLManager: option to exercise a MySQL-specific fast path.
12/08/05 07:33:51 INFO manager.MySQLManager: Setting zero DATETIME behavior to convertToNull (mysql)
12/08/05 07:33:51 INFO mapreduce.ImportJobBase: Beginning import of Customers
12/08/05 07:33:51 INFO util.NativeCodeLoader: Loaded the native-hadoop library
12/08/05 07:33:52 INFO mapred.JobClient: Cleaning up the staging area file:/app/hadoop/tmp/mapred/staging/root-195281052/.staging/job_local_0001
12/08/05 07:33:52 ERROR security.UserGroupInformation: PriviledgedActionException as:root cause:org.apache.hadoop.mapred.FileAlreadyExistsException: Output directory Customers already exists
12/08/05 07:33:52 ERROR tool.ImportTool: Encountered IOException running import job: org.apache.hadoop.mapred.FileAlreadyExistsException: Output directory Customers already exists
    at org.apache.hadoop.mapreduce.lib.output.FileOutputFormat.checkOutputSpecs(FileOutputFormat.java:137)
    at org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:889)
    at org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:850)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:415)
    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1093)
    at org.apache.hadoop.mapred.JobClient.submitJobInternal(JobClient.java:850)
    at org.apache.hadoop.mapreduce.Job.submit(Job.java:500)
    at org.apache.hadoop.mapreduce.Job.waitForCompletion(Job.java:530)
    at org.apache.sqoop.mapreduce.ImportJobBase.runJob(ImportJobBase.java:119)
    at org.apache.sqoop.mapreduce.ImportJobBase.runImport(ImportJobBase.java:179)
    at org.apache.sqoop.manager.SqlManager.importTable(SqlManager.java:413)
    at org.apache.sqoop.manager.MySQLManager.importTable(MySQLManager.java:97)
    at org.apache.sqoop.tool.ImportTool.importTable(ImportTool.java:381)
    at org.apache.sqoop.tool.ImportTool.run(ImportTool.java:454)
    at org.apache.sqoop.Sqoop.run(Sqoop.java:145)
    at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)
    at org.apache.sqoop.Sqoop.runSqoop(Sqoop.java:181)
    at org.apache.sqoop.Sqoop.runTool(Sqoop.java:220)
    at org.apache.sqoop.Sqoop.runTool(Sqoop.java:229)
    at org.apache.sqoop.Sqoop.main(Sqoop.java:238)
    at com.cloudera.sqoop.Sqoop.main(Sqoop.java:57) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T01:36:04.007

需要注意的主要事情是您的原始导入失败，因为 Sqoop 尝试调用 hive 但它不在您的路径中。在继续之前解决该问题。

然后，您应该从 hdfs ~~（本地，而不是 HDFS）中~~找到并删除客户目录，然后重试。

从我所见，“Customers.java 已经存在”形式的错误并不是致命的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-25T12:28:55.997

1.  如果您希望 Sqoop 创建表并将数据加载到 hive 中的表中，则必须在查询中包含 --create-hive 表
2.  当您将数据导入 hive 时，Sqoop 会尝试创建一个临时 hdfs 目录作为暂存，以便最终将数据加载到表中。在此期间，最好确保该目录不存在。
3.  看起来您的 sqoop 工作目录没有足够的权限来更改文件系统。确保“用户”是相关文件的所有者。

# mysql - mysql utf-8 字符集支持

> ID：11812140
> 
> 赞同：1
> 
> 时间：2012-08-04T21:31:14.323
> 
> 标签：mysql, utf-8

> **可能重复：**
> [一直到 UTF-8](https://stackoverflow.com/questions/279170/utf-8-all-the-way-through)

我希望通过 mysql 拥有完整的 unicode 数据库。我听说 using`SET NAMES 'utf8'`不适合某些 SQL 注入问题。

什么是完全 unicode 支持的最佳使用 mysql。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T21:44:14.330

我们经常`utf8_general_ci`在 mysql 数据库中用作表排序规则。它更快，但它被认为是遗留排序规则。[mysql 文档](http://dev.mysql.com/doc/refman/5.1/en/charset-unicode-sets.html)建议使用`utf8_unicode_ci`最精确的字符解析。至于 sql 注入：您需要使用`mysql_real_escape_string()`而不是进行转义`addslashes()`，后者不会阻止 unicode 表中的 sql 注入。

# java - 如何从 JTable 中获取数据？

> ID：11812142
> 
> 赞同：11
> 
> 时间：2012-08-04T21:31:25.077
> 
> 标签：java, swing, arraylist, jtable, nullpointerexception

好的，我想从 JTable 的第一列中获取所有数据。我虽然最好的方法是将它拉到一个`ArrayList`，所以我做了一个。我还做了一个实例`TableModel`：

```
static DefaultTableModel model = new javax.swing.table.DefaultTableModel(); 
f.data.setModel(model); //f.data is the JTable

public static final void CalculateTotal(){
    ArrayList<String> numdata = new ArrayList<String>();

  for(int count = 1; count <= model.getRowCount(); count++){
      numdata.add(model.getValueAt(count, 1).toString());

  }
  System.out.println(numdata); 
} 
```

这给了我一个 NullPointerException （提示尖叫）。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-04T21:35:05.260

我不太了解这些课程，但我猜你必须从零开始数：

```
for (int count = 0; count < model.getRowCount(); count++){
  numdata.add(model.getValueAt(count, 0).toString());
} 
```

在 Java 中，通常从 0 开始计数（就像在大多数类 C 语言中一样）......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T21:50:59.597

最好是发布[SSCCE](http://sscce.org/)以显示模型初始化及其数据填充。还包括异常的详细信息，因为问题可能有多个来源。

这是一个基于@CedricReichenbach 校正的演示：

```
import java.util.ArrayList;
import java.util.List;

import javax.swing.table.DefaultTableModel;

public class TestModel {
    public static void main(String s[]) {
        DefaultTableModel model = new javax.swing.table.DefaultTableModel();    

        model.addColumn("Col1");
        model.addColumn("Col2");

        model.addRow(new Object[]{"1", "v2"});
        model.addRow(new Object[]{"2", "v2"});

        List<String> numdata = new ArrayList<String>();
        for (int count = 0; count < model.getRowCount(); count++){
              numdata.add(model.getValueAt(count, 0).toString());
        }

        System.out.println(numdata); 
    }
} 
```

结果是：

```
[1, 2] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-19T10:01:33.793

我知道这个答案有点晚了，但它实际上是一个非常容易解决的问题。您的代码在读取条目时会出错，因为表本身没有可供代码读取的条目。填充表并再次运行您的代码。问题本可以更早解决，但从您发布的代码来看，您的表中的内容并不明显。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-03T10:33:44.167

```
 DefaultTableModel model = (DefaultTableModel) table.getModel();

        for (int i = 0; model.getRowCount() > i; i++) {
            final String col1 = (String) model.getValueAt(i, 0);
            final String col2 = (String) model.getValueAt(i, 1);

            System.out.println("Row: " + i + " Col 0: " + col1);
            System.out.println("Row: " + i + " Col 1: " + col2);
        } 
```

# .net - 语法错误：缺少 ';' 前 '。'

> ID：11812144
> 
> 赞同：1
> 
> 时间：2012-08-04T21:31:54.843
> 
> 标签：.net, visual-studio, c++-cli

我对 Visual C++ 不熟悉，所以我使用 .NET 框架编译了一个简单的程序来解决它。

```
#pragma once

namespace Netattempt2 {

using namespace System;
using namespace System::ComponentModel;
using namespace System::Collections;
using namespace System::Windows::Forms;
using namespace System::Data;
using namespace System::Drawing;

/// <summary>
/// Summary for Form1
///
/// WARNING: If you change the name of this class, you will need to change the
///          'Resource File Name' property for the managed resource compiler tool
///          associated with all .resx files this class depends on.  Otherwise,
///          the designers will not be able to interact properly with localized
///          resources associated with this form.
/// </summary>
public ref class Form1 : public System::Windows::Forms::Form
{
public:
    Form1(void)
    {
        InitializeComponent();
        //
        //TODO: Add the constructor code here
        //
    }

protected:
    /// <summary>
    /// Clean up any resources being used.
    /// </summary>
    ~Form1()
    {
        if (components)
        {
            delete components;
        }
    }
private: System::Windows::Forms::TextBox^  txtbxUsername;
private: System::Windows::Forms::Button^  btnClick;
protected: 

protected: 

private: System::Windows::Forms::Label^  label1;

private:
    /// <summary>
    /// Required designer variable.
    /// </summary>
    System::ComponentModel::Container ^components;

#pragma region Windows Form Designer generated code
    /// <summary>
    /// Required method for Designer support - do not modify
    /// the contents of this method with the code editor.
    /// </summary>
    void InitializeComponent(void)
    {
        this->txtbxUsername = (gcnew System::Windows::Forms::TextBox());
        this->btnClick = (gcnew System::Windows::Forms::Button());
        this->label1 = (gcnew System::Windows::Forms::Label());
        this->SuspendLayout();
        // 
        // txtbxUsername
        // 
        this->txtbxUsername->Location = System::Drawing::Point(94, 17);
        this->txtbxUsername->Name = L"txtbxUsername";
        this->txtbxUsername->Size = System::Drawing::Size(174, 20);
        this->txtbxUsername->TabIndex = 0;
        // 
        // btnClick
        // 
        this->btnClick->Location = System::Drawing::Point(204, 43);
        this->btnClick->Name = L"btnClick";
        this->btnClick->Size = System::Drawing::Size(64, 23);
        this->btnClick->TabIndex = 1;
        this->btnClick->Text = L"Click Me!";
        this->btnClick->UseVisualStyleBackColor = true;
        this->btnClick->Click += gcnew System::EventHandler(this, &Form1::button1_Click);
        // 
        // label1
        // 
        this->label1->AutoSize = true;
        this->label1->Location = System::Drawing::Point(12, 20);
        this->label1->Name = L"label1";
        this->label1->Size = System::Drawing::Size(76, 13);
        this->label1->TabIndex = 2;
        this->label1->Text = L"Enter name -->";
        this->label1->Click += gcnew System::EventHandler(this, &Form1::label1_Click);
        // 
        // Form1
        // 
        this->AutoScaleDimensions = System::Drawing::SizeF(6, 13);
        this->AutoScaleMode = System::Windows::Forms::AutoScaleMode::Font;
        this->ClientSize = System::Drawing::Size(284, 73);
        this->Controls->Add(this->label1);
        this->Controls->Add(this->btnClick);
        this->Controls->Add(this->txtbxUsername);
        this->Name = L"Form1";
        this->Text = L"Hello World!";
        this->ResumeLayout(false);
        this->PerformLayout();

    }
#pragma endregion
private: System::Void label1_Click(System::Object^  sender, System::EventArgs^  e) {
         }
private: System::Void btnClick_Click(System::Object^  sender, System::EventArgs^  e) {
             MessageBox.Show("Welcome to windows " + txtbxUsername.Text, "Hi there...");
         }
};
} 
```

而这一行：

```
MessageBox.Show("Welcome to windows " + txtbxUsername.Text, "Hi there..."); 
```

返回此错误：

```
Form1.h(114) : error C2143: syntax error : missing ';' before '.' 
```

取出行允许程序编译，但消息框或多或少对程序是必需的。

有谁知道这里出了什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T21:37:38.740

改成

```
MessageBox::Show("Welcome to windows " + txtbxUsername->Text, "Hi there..."); 
          ^^                                          ^^ 
```

# python - pattern() 中每个 url() 的 Django 可选 url 参数

> ID：11812146
> 
> 赞同：2
> 
> 时间：2012-08-04T21:32:41.253
> 
> 标签：python, django, url-routing

在 Django 的 urls.py 中，我知道您可以指定一个可选参数以传递给单个 url() 对象的视图。我的问题是，是否可以指定相同的可选参数并将其应用于 patterns() 对象内的每个 url() 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T22:45:06.433

我不这么认为，但你可以简单地使用一个变量：

```
d = { 'foo' : very_long_value }

urlpatterns = patterns('',
    url('^aaaa/$', 'aaa', d),
    url('^bbbb/$', 'bbb', d),
    url('^cccc/$', 'ccc', d),
) 
```

如果您希望能够即时向某些 url 添加值，您可以执行以下操作：

```
def add_dict(d, **kw):
    x = d.copy()
    x.update(kw)
    return x

d = { 'foo' : very_long_argument }

urlpatterns = patterns('',
    url('^aaaa/$', 'aaa', d),
    url('^bbbb/$', 'bbb', d),
    url('^cccc/$', 'ccc', add_dict(d, bar = 'xxx')),
) 
```

或者，您可以编写自己的`url`包装器：

```
def my_url(regex, view, kwargs=None, name=None, prefix=''):
    if kwargs is None:
        kwargs = {}
    kwargs.update(foo = very_long_argument)
    return url(regex, view, kwargs, name, prefix)

urlpatterns = patterns('',
    my_url('^aaaa/$', 'aaa'),
    my_url('^bbbb/$', 'bbb'),
    my_url('^cccc/$', 'ccc' { 'bar' : 'xxx'),
) 
```

# c++ - 如何在opencv中删除包含文本的部分图像

> ID：11812147
> 
> 赞同：0
> 
> 时间：2012-08-04T21:32:45.843
> 
> 标签：c++, image-processing, opencv

我可以在opencv中使用什么方法来删除图像底部包含文本的黑色部分？

![在此处输入图像描述](../Images/5667db2a7d1d5c0c5864470956ca94f9.png)

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T09:00:55.283

如果 Blender 的建议不适用于您的情况，您可以：

1.  对图像设置阈值，使所有高于 0 的像素都变为 255。
2.  寻找轮廓。
3.  计算每个轮廓的边界矩形。
4.  将最大的边界矩形定义为要保留的区域（其他的只是字母）。然后，您可以简单地将找到的矩形用作 ROI。

祝你好运，

# c# - 从 Windows Phone 7 地图上的按针获取地理坐标

> ID：11812153
> 
> 赞同：1
> 
> 时间：2012-08-04T21:33:36.980
> 
> 标签：c#, silverlight, windows-phone-7, mouseevent, bing-maps

我正在开发一个显示 SF MUNI 停止和时间的 Windows Phone 7 应用程序。我已经发布了它，但想添加地图功能。因此，我添加了一张地图，其中显示了特定用户选择路线的停靠点（入站或出站）。这是我的代码，它可以工作并显示路线上的每个站点：

```
//coords is an array of GeoCoordinates for each stop
//limit is the number of stops
GeoCoordinate [] coords=new GeoCoordinate[limit];

//pin is an array of Pushpins for each stop to add to the map
Pushpin[] pin = new Pushpin[limit];

for (int i = 0; i < limit; i++)
{
   pin[i] = new Pushpin();
}

for (int i = 0; i < limit; i++)
{
  coords[i] = new GeoCoordinate(Convert.ToDouble(latitude[inb[i]]), Convert.ToDouble(longitude[inb[i]]));//populate coords array
   pin[i].Location = coords[i];//assign coords to pushpin location for each stop
}

//wires up event handler for clicking on each stop
for (int i = 0; i < limit; i++)
{
  pin[i].MouseLeftButtonUp += new MouseButtonEventHandler(pin_MouseLeftButtonUp);
}  

//Adds a pin at each stop's geocoords for each station
for (int i = 0; i < limit; i++)
  map1.Children.Add(pin[i]); 
```

因此，上面的代码确实在每个地理坐标上正确放置了图钉。我完全被难住了，如果我按下图钉，我如何获得该图钉的地理坐标？换句话说，当我按下图钉时，我想在某个变量中捕获 pin[i].Location （这是一个地理坐标）。

谢谢，我希望这能解释我的问题。

阿曼达

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T23:53:22.453

您应该使用`Tap`事件而不是`MouseLeftButtonUp`. （并确保在离开页面时将其删除！）并且您可以引用`GeoCoordinate`in `pin[i].Tag`。

`Tag`是对任何你想要的东西的抓包参考——在你的情况下，你想放 a `GeoCoordinate`，但你可以放任何你想要的东西——它存在于所有`UIElements`.

在您的`Tap`事件侦听器中，您可以获得对您`GeoCoordinate`喜欢的参考：

```
pressedCoord = (GeoCoordinate)((PushPin)sender).Tag; 
```

# django - django slugfield url错误

> ID：11812155
> 
> 赞同：1
> 
> 时间：2012-08-04T21:34:06.220
> 
> 标签：django, django-urls

我得到：使用 blog.urls 中定义的 URLconf，Django 按以下顺序尝试了这些 URL 模式：^ ^$ ^ ^/(?P[a-zA-Z0-9]+) [name='view_blog_post']当前 URL duzeltme-yazisi/ 与其中任何一个都不匹配。

这个错误。这里有一些输出：

urls.py（在项目文件夹中）：

```
from django.conf.urls import patterns, include, url

urlpatterns = patterns('',
    url(r'^', include('userside.urls')),

) 
```

urls.py（在应用程序的文件夹中）：

```
from django.conf.urls import patterns, include, url

urlpatterns = patterns('userside.views',
    url(r'^$','index'),
    url(r'^/(?P<postslug>[^\.]+)','userside.views.singlePost',name='view_blog_post'),
) 
```

视图.py：

```
from userside.models import Post
from django.shortcuts import render_to_response
from django.template import RequestContext

def index(request):
    post_list = Post.objects.all()
    return render_to_response('userside/index.html',
                              {'post_list':post_list},
                  context_instance = RequestContext(request))

def singlePost(request,postslug):
    post = Post.objects.get(slug=postslug)
    context = {'post':post}
    return render_to_response('userside/detail.html',context,context_instance = RequestContext(request)) 
```

模型.py：

```
from django.db import models
#from django.utils import timezone
from django.db.models import permalink

class Post(models.Model):
    title = models.CharField(max_length = 100)
#    date  = models.DateTimeField(auto_now_add=True)
    text  = models.TextField()
    slug = models.SlugField(unique=True)

    def __unicode__(self):
    return self.title

    @permalink
    def get_absolute_url(self):
    return ('view_blog_post',None, {'postslug':self.slug}) 
```

这是我的 index.html 模板文件：

```
<html>
<head>
        <title>Welcome</title>
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}css/index.css" />
</head>
<body>
<h1>Hello Mars</h1>
<br>
{% if post_list %}
    {% for x in post_list %}
        <p><a href="/{{ x.slug }}/">{{ x.title }}</a></p>
        <p>{{ x.text }}</p>
        <hr>
    {% endfor %}
{% else %}
    <div class="center">No records! ( but looks like code works correctly!)</div>
{% endif %}
</body>
</html> 
```

Django 版本：1.4

这里有什么问题？：/

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T12:12:02.830

**项目 - urls.py**

```
url(r'^$', include('userside.urls')), 
```

**用户端 - urls.py**

```
url(r'^(?P<postslug>[-\w]+)/$',
    # ../gis-grundlagen/
    view = 'singlePost',
    name = 'userside-single-post',
), 
```

**用户端-views.py**

```
def singlePost(request, postslug):
    post = get_object_or_404(Post, slug=postslug)
    context = {'post':post}
    return render_to_response('userside/detail.html',context,context_instance = RequestContext(request)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T21:38:57.370

`$`使用include时不应该有，尝试：

```
url(r'^', include('userside.urls')), 
```

通常你会显示一个子文件夹，例如

```
url(r'^userside/', include('userside.urls')), 
```

最初的斜线 ( `/`) 可能也是一个错误：

```
url(r'^/(?P<postslug>[^\.]+).html','userside.views.singlePost',name='view_blog_post'), 
```

应该是

```
url(r'^(?P<postslug>[^\.]+).html','userside.views.singlePost',name='view_blog_post'), 
```

# android - Facebook 应用程序在使用 Facebook SDK 身份验证后保持登录状态

> ID：11812160
> 
> 赞同：0
> 
> 时间：2012-08-04T21:36:00.670
> 
> 标签：android, facebook-android-sdk

我有一个使用 Facebook SDK 获取数据的应用程序，例如用户的朋友、图片等。

使用 SSO 功能后，如果设备上安装了 facebook 应用程序，它会保持登录状态，并提供通知等。我想禁用它 - 我只需要对我的应用程序进行身份验证并进行简单的 facebook 查询，我不希望 facebook 应用程序打开并停留在后台。

有什么办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T14:23:24.890

使用新的 Facebook SDK 3.0 有一种`Session#close()`方法。

# html - 在 HTML 中打开弹出窗口

> ID：11812161
> 
> 赞同：25
> 
> 时间：2012-08-04T21:36:02.150
> 
> 标签：html

我正在使用网络应用程序，我想知道是否有办法使用 HTML 在应用程序类型窗口中打开链接？像这样的东西：

```
<a href="link" target="_app">My App</a> 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-08-04T21:38:18.843

像这样的东西？

```
<a href="#" onClick="MyWindow=window.open('http://www.google.com','MyWindow','width=600,height=300'); return false;">Click Here</a> 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2015-04-16T11:12:51.827

`HTML`单独不支持这一点。你需要使用一些`JS`.

并且还要考虑现在人们在浏览器中使用弹出窗口阻止程序。

```
<a href="javascript:window.open('document.aspx','mypopuptitle','width=600,height=400')">open popup</a> 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2017-09-18T16:43:56.250

**我觉得这是最简单的方法。（随意更改宽度和高度值）。**

```
<a href="http://www.google.com" 
target="popup" 
onclick="window.open('http://www.google.com','popup','width=600,height=600'); return false;">
Link Text goes here...
</a> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-26T17:16:55.670

在同一站点中打开弹出窗口、示例、链接。

```
 <a onclick="window.open('/Product/Product', 'popup', 'location=0,width=750,height=650,left=500,top=55'); return false;" class="btn btn-primary btn-sm">+</a> 
```

# kernel - Brans 内核开发：Grub Multiboot 头文件？

> ID：11812163
> 
> 赞同：3
> 
> 时间：2012-08-04T21:36:38.427
> 
> 标签：kernel, grub

我正在关注 Bran 的内核开发[教程](http://www.osdever.net/bkerndev/Docs/basickernel.htm)。在他的汇编代码中，他有以下代码块，他将其描述为不是那么重要，但与 GRUB 相关。

```
; This part MUST be 4byte aligned, so we solve that issue using 'ALIGN 4'
ALIGN 4
mboot:
    ; Multiboot macros to make a few lines later more readable
    MULTIBOOT_PAGE_ALIGN    equ 1<<0
    MULTIBOOT_MEMORY_INFO   equ 1<<1
    MULTIBOOT_AOUT_KLUDGE   equ 1<<16
    MULTIBOOT_HEADER_MAGIC  equ 0x1BADB002
    MULTIBOOT_HEADER_FLAGS  equ MULTIBOOT_PAGE_ALIGN | MULTIBOOT_MEMORY_INFO |        MULTIBOOT_AOUT_KLUDGE
    MULTIBOOT_CHECKSUM  equ -(MULTIBOOT_HEADER_MAGIC + MULTIBOOT_HEADER_FLAGS)
    EXTERN code, bss, end

    ; This is the GRUB Multiboot header. A boot signature
    dd MULTIBOOT_HEADER_MAGIC
    dd MULTIBOOT_HEADER_FLAGS
    dd MULTIBOOT_CHECKSUM

    ; AOUT kludge - must be physical addresses. Make a note of these:
    ; The linker script fills in the data for these ones!
    dd mboot
    dd code
    dd bss
    dd end
    dd start 
```

我仍然想知道这段代码在做什么？有人可以给我或指出我在哪里可以找到关于此的描述。二、为什么这段代码需要4字节对齐？这是出于效率原因还是在 GRUB 的上下文中具有某些特殊意义？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-05T13:27:05.767

这部分汇编不是代码，而是一个多重引导头文件。当您链接内核时，此标头将放置在二进制文件的开头，因此 GRUB 可以看到您的内核是多引导兼容的。此标头包含一个幻数（0x1badb002）、一个标志列表（在您的情况下，内核应该加载到一个页面对齐的地址，并且您希望 GRUB 为您提供一个内存映射）和一个校验和。如果这些条目之一不遵循多重引导规范，GRUB 将不会加载您的内核。

您可以在 GRUB 的多重引导手册中找到有关多重引导的更多信息：

[http://www.gnu.org/software/grub/manual/multiboot/multiboot.html](http://www.gnu.org/software/grub/manual/multiboot/multiboot.html)

引用手册：

> 除了 OS 映像使用的格式的标头之外，OS 映像还必须包含一个称为 Multiboot 标头的附加标头。Multiboot 标头必须完全包含在 OS 映像的前 8192 个字节内，并且**必须是长字（32 位）对齐的**。一般来说，它应该尽早出现，并且可能嵌入在真正的可执行文件头之后的文本段的开头。

我不确定 AOUT kludge 是做什么的。我只在我的操作系统中使用 ELF。我遵循了本指南：[http ://wiki.osdev.org/Bare_Bones](http://wiki.osdev.org/Bare_Bones)

# php - 将数据保存到数据库

> ID：11812167
> 
> 赞同：0
> 
> 时间：2012-08-04T21:36:53.403
> 
> 标签：php, cakephp, cakephp-2.1

我对 CakePHP 很陌生，所以我的问题希望很容易回答。

我想创建一个表单来同时添加新配方和配方项。我怎么做？

我的数据库中有三个表：recipes、recipeitems 和 recipes_recipeitems；

```
eg.  Recipe.title
     Recipe.cookingtime
     Recipeitem.name 
```

我尝试了以下方法，但它只创建了一个 Recipepart 而不设置它的名称或 recipe_id。

形式：

```
<?php echo $this->Form->create('Recipe'); ?>
<fieldset>
    <legend><?php echo __('Create recipe'); ?></legend>
<?php
    echo $this->Form->input('title');
    echo $this->Form->input('cooking_time');
    echo $this->Form->input('RecipeitemName');
?>
</fieldset> 
 <?php echo $this->Form->end(__('Submit')); ?> 
```

配方控制器：

```
App::import('model','RecipeItem');
class RecipesController extends AppController {
public function add() {
    if ($this->request->is('post')) {
        $this->request->data['Recipe']['user_id'] = $this->Auth->user('id');
        $this->request->data['RecipeItem']['name'] = $this->request->data['Recipe']['RecipeitemName'];
        $newRecipeItem = new RecipeItem();
        $this->Recipe->create();
        if ($this->Recipe->save($this->request->data)) {
            $this->Session->setFlash(__('The recipe has been saved'));
            //$this->redirect(array('action' => 'index'));
        } else {
            $this->Session->setFlash(__('The recipe could not be saved. Please, try again.'));
        }
        $this->request->data['RecipeItem']['recipe_id'] = $this->Recipe->id;
        if ($newRecipeItem->save($this->request->data)) {
            $this->Session->setFlash(__('The recipeItem has been saved'));
            $this->redirect(array('action' => 'index'));            
        } else{
            $this->Session->setFlash(__('The recipeItem could not be saved. Please, try again.'));
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T22:19:21.820

```
$newRecipeItem = new RecipeItem(); 
```

这条线没有按照你的想法做。它创建RecipeItem 类的一个实例。但它不会在数据库中进行 INSERT。所以这一行：

```
$newRecipeItem->save($this->request->data) 
```

什么也没做。你可以使用：

```
$this->Recipe->RecipeItem->create(); 
```

然后进行保存。

[create() 函数文档](http://api20.cakephp.org/class/schema-shell#method-SchemaShellcreate)

# asp.net-mvc - Kendo MVC Grid 列类型未设置

> ID：11812174
> 
> 赞同：0
> 
> 时间：2012-08-04T21:38:50.303
> 
> 标签：asp.net-mvc, telerik-mvc, kendo-ui

我正在将 Telerik ASP.net MVC 迁移到 Kendo ASP.net MVC。在 Telerik MVC 中，我使用数组中的一个对象和在 Bound 调用中指定的对象类型来限制列，并且所有这些都运行良好。

```
columns.Bound(field.EntityFieldType, field.EntityFieldName).Title(field.DisplayName).Template(g =>
{<%= g.GetValue(field.EntityFieldId)%>}).Width(field.Width);
....... 
```

但是使用 Kendo MemberType 会被忽略并保持为空。有没有其他方法可以在 Kendo 中设置 MemberType？或者，如果 Kendo 仅将数据模式用于列数据类型，那么我如何在运行时更新模式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T10:06:46.980

Telerik 似乎不赞成使用 Type in Bound 调用，而是使用 DataSource Schema Model。在绑定任何列之前，我通过清除模型架构解决了我的问题。

```
columns.Container.DataSource.Schema.Model.Fields.Clear(); 
```

然后在每个绑定列之后，我在模型字段列表中添加了一个新条目。由于我的字段名称包含点（。）我需要将字段名称放在引号中，以便生成 JSon 是正确的。

```
ModelFieldDescriptor modelField = new ModelFieldDescriptor();
modelField.Member = "\"" + field.EntityFieldName + "\"";
modelField.MemberType = field.EntityFieldType;
modelField.DefaultValue = null;
modelField.IsEditable = false;
columns.Container.DataSource.Schema.Model.Fields.Add(modelField); 
```

# java - MongoDB Morphia - 独特的

> ID：11812177
> 
> 赞同：5
> 
> 时间：2012-08-04T21:39:10.060
> 
> 标签：java, mongodb, playframework-2.0, morphia

我正在尝试拥有一个一致的数据库，其中用户名和电子邮件是唯一的。

[http://www.mongodb.org/display/DOCS/Indexes#Indexes-unique%3Atrue](http://www.mongodb.org/display/DOCS/Indexes#Indexes-unique%3Atrue)

[http://code.google.com/p/morphia/wiki/EntityAnnotation](http://code.google.com/p/morphia/wiki/EntityAnnotation)

我的用户类如下所示：

```
public class User {
    @Indexed(unique = true)
    @Required
    @MinLength(4)
    public String username;

    @Indexed(unique = true)
    @Required
    @Email
    public String email;

    @Required
    @MinLength(6)
    public String password;

    @Valid
    public Profile profile;

    public User() {
... 
```

我使用了 @Indexed(unique=true) 注释，但它不起作用。我的数据库中仍然有重复项。

有什么想法可以解决这个问题吗？

编辑：

我读到了 ensureIndexes 但这似乎是一种错误的方法，我不想上传重复的数据，只是想看看它真的是重复的。

我想立即阻止它。

类似的东西

```
try{

ds.save(user);
}
catch(UniqueException e){
...
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-05T00:11:15.137

如果您尝试索引的列中已经存在重复项，则无法创建[唯一索引。](http://www.mongodb.org/display/DOCS/Indexes#Indexes-unique%3Atrue)

我会尝试`ensureIndex`从`mongo`shell 运行你的命令：

```
db.user.ensureIndex({'username':1},{unique:true})
db.user.ensureIndex({'email':1},{unique:true}) 
```

..并检查索引是否设置：

```
db.user.getIndexes() 
```

Morphia 应该默认设置[WriteConcern.SAFE](http://api.mongodb.org/java/current/com/mongodb/WriteConcern.html)，当尝试插入违反唯一索引的文档时会抛出异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T22:19:10.543

这里有关于唯一约束的很好的解释[Unique constraint with JPA and Bean Validation](https://stackoverflow.com/questions/3495368/unique-constraint-with-jpa-and-bean-validation)，这对你有帮助吗？所以我要做的只是在检查其他错误时在控制器级别（或 bean validate()）验证您的数据。这将完成这项工作，但它并不像注释那样酷。

**编辑**

或者看到这篇文章[Inserting data to MongoDB - no error, no insert](https://stackoverflow.com/questions/9457368/inserting-data-to-mongodb-no-error-no-insert)它清楚地描述了 mongodb 默认情况下不会引发错误，如果你不告诉它，尝试配置你的 mongodb 来抛出这些错误，看看是否您可以使用解决方案:(

**编辑 2**

我还想到 play 2 有一个启动全局类，您可以在其中尝试访问数据库并运行索引列命令，例如 db.things.ensureIndex({email:1},{unique:true}); ?? [在http://www.playframework.org/documentation/2.0/JavaGlobal](http://www.playframework.org/documentation/2.0/JavaGlobal)上查看更多信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-08T19:35:23.540

我有同样的问题，游戏框架 1.2.6 和 morphia 1.2.12。

@Indexed(unique = true) 注释的解决方案是**让 morpha 重新创建集合**。因此，如果我已经在 mongo 中拥有“帐户”集合，并注释了电子邮件列，并重新启动了 play 应用程序，那么帐户索引中没有任何变化。

如果我删除了 Account ollection，morphia 会重新创建它，现在 email 列是唯一的：

```
> db.Account.drop()
true 
```

播放重新启动后：（我有一个创建初始帐户的工作......）

```
> db.Account.getIndexes()
[
        {
                "v" : 1,
                "key" : {
                        "_id" : 1
                },
                "ns" : "something.Account",
                "name" : "_id_"
        },
        {
                "v" : 1,
                "key" : {
                        "email" : 1
                },
                "unique" : true,
                "ns" : "something.Account",
                "name" : "email_1"
        }
] 
```

现在，在插入已有电子邮件后，我得到了一个`MongoException.DuplicateKey`例外。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-06T21:26:16.527

要创建索引，`Datastore.ensureIndexes()`需要调用该方法将索引应用到 MongoDB。在您向 Morphia 注册实体后，应调用该方法。然后它将同步创建您的索引。这可能应该在您每次启动应用程序时完成。

```
Morphia m = ...
Datastore ds = ...

m.map(Product.class);
ds.ensureIndexes(); //creates all defined with @Indexed 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-20T05:43:24.937

Morphia 将使用类名或 @Entity 注释值为集合创建索引。

例如，如果您的班级名称是作者：

*   请确保您的 Entity 类中有 @Indexed 注释，并且您已完成以下两个步骤：

    `m.map(Author.class);`

    `ds.ensureIndexes();`

*   检查 mongo db 上的索引

    `b.Author.getIndexes()`

我正在添加这个答案，以强调您不能使用自定义集合名称创建索引（实体类是作者，但您的集合名称不同）

这种情况在许多情况下很明显，如果架构相同，您希望重用 Entity 类

# applescript - 如何仅在提供的服务中使用 applescript 发送 imessage 文本？

> ID：11812184
> 
> 赞同：24
> 
> 时间：2012-08-04T21:40:20.853
> 
> 标签：applescript, send, messages, imessage

有人可以告诉我如何通过消息应用程序直接向 iMessage 用户发送消息吗？

```
tell application "Messages"
    if service type of service of buddy whose name is ("Name here" is "iMessage") then set x to 1
    if service type of service of buddy whose name is ("Name here" is "iMessage") then set x to 2
    if service type of service of buddy whose name is ("Name here" is "iMessage") then set x to 3

    send "Message" to buddy "mail of name" of service x
end tell 
```

我只需要通过 iMessage 向帐户发送消息，而不是通过 google talk、AIM、bonjour。谢谢！

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-10-20T21:21:43.503

无需对 iMessage 服务进行硬编码，您可以自动找到它：

1.  将以下脚本另存为`sendMessage.applescript`（注意：确保选择**文本**选项）。
2.  通过运行执行它：`osascript sendMessage.applescript 1235551234 "Hello there!"`。
3.  这将向电话号码 123-555-1234 发送一条 iMessage，其中包含文本“Hello there！”。

**sendMessage.applescript：**

```
on run {targetBuddyPhone, targetMessage}
    tell application "Messages"
        set targetService to 1st service whose service type = iMessage
        set targetBuddy to buddy targetBuddyPhone of targetService
        send targetMessage to targetBuddy
    end tell
end run 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-22T23:33:28.900

据我了解，您无法通过 AppleScript 开始新的对话。因此，好友和服务必须结合在一起，并且必须进行持续的对话。

如果您有好友的姓名，您可以执行以下操作

```
tell application "Messages"
    get name of service of buddy "Buddy Name"
end tell 
```

这将返回适合伙伴的服务名称。当然，您也可以使用服务 ID。但我喜欢用这个名字。

最后，您将能够发送消息

```
tell application "Messages"
    send "Text of Message" to buddy "+43 555 XXXXXXX" of service "E:example@mac.com"
end tell 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-05-12T22:17:18.670

此脚本将每 10~30 秒发送一条消息

```
tell application "Messages"

    set targetBuddy to "+12025551234"
    set targetService to id of 1st service whose service type = iMessage

    repeat

        set textMessage to "Hi there!"

        set theBuddy to buddy targetBuddy of service id targetService
        send textMessage to theBuddy

        delay (random number from 10 to 30)

    end repeat

end tell 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-06-03T22:32:16.170

```
tell application "Messages"
    set myid to get id of first service
    set theBuddy to buddy "mybuddy@me.com" of service id myid
    send "Washer Done!" to theBuddy
end tell 
```

我有同样的问题，经过一番搜索，我找到了答案。为了让“第一个服务”成为 iMessage，您需要进入 iMessage Preferences Accounts 并将 iMessage 帐户重新排序为第一个。之后，这就像一个魅力。

如果没有对话，这也将开始对话。

希望有帮助！

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-19T23:59:33.567

例子：

```
get services
get name of services
get buddies
get name of buddies 
```

您的线路：

```
send "Test-Message" to buddy "buddy" of service "service" 
```

如果“伙伴”和“服务”有效，似乎可以工作。

我的 iMessage 注册了我的 Apple-ID，所以当我执行“获取服务名称”时，我会为此服务获得一个字符串，例如

> “E:myAppleID@host.com”

我可以将其用于“服务”。Buddy 只是你的好友的名字，也是纯文本。请参阅“获取好友的姓名”。

希望它有效！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-22T20:25:41.093

好的，我刚刚将以下内容放入 Automator 操作中，该操作获取登录用户的全名，从联系人中找到匹配的 iPhone 号码、服务名称，最后将传入文本（来自上一个操作）发送到.. .myself 在 iMessage 上。不是很有用，至少目前对我来说不是很有用，但我证明它在某种程度上是可能的:)

```
set input to "Testing 123" **//This line is just for testing**
tell application "System Events"
    set MyName to get full name of current user
end tell
  tell application "Contacts"
      set myPhone to value of phone 1 of (person 1 whose name = MyName)   
      whose label = "iPhone"
   end tell
tell application "Messages"
    set MyService to get name of service of buddy MyName
    send input to buddy myPhone of service MyService
end tell 
```

# c# - 无法使用带有 C# 的 ANTLR 3 解析简单代码

> ID：11812185
> 
> 赞同：1
> 
> 时间：2012-08-04T21:40:21.550
> 
> 标签：c#, antlr, antlr3

鉴于语法

```
grammar T;

options
{
    k=4;
  language=CSharp3;     
  TokenLabelType=CommonToken; 
  output=AST;   
  ASTLabelType=CommonTree;  
}

tokens 
{
  LPAREN = '(';
  RPAREN = ')';
  LBRACK = '{';
  RBRACK = '}';
}

fragment
ID  :   ('a'..'z'|'A'..'Z'|'_')('a'..'z'|'A'..'Z'|'0'..'9'|'_')*;
WS : (' ' | '\t' | '\n' |'\r' )+ { $channel = Hidden; } ;

public program: CLASSDEF+ EOF!   ;

CLASSDEF: 'class' ID LBRACK
       RBRACK     ; 
```

这会产生一个词法分析器和一个解析器，我使用如下

```
using System;
using Antlr.Runtime;
using Antlr.Runtime.Tree;

namespace compiler
{
  internal class Program2
  {
    public static void Main(string[]arg)
    {
      ANTLRStringStream Input = new ANTLRStringStream(@"class foo 
{ 
}");
      TLexer lex = new TLexer(Input);
      Console.WriteLine("errors:" + lex.NumberOfSyntaxErrors);
      CommonTokenStream tokens = new CommonTokenStream(lex);
      TParser parser = new TParser(tokens);

      var parsed = parser.program();
      Console.WriteLine("errors: " + parser.NumberOfSyntaxErrors);
      CommonTree tree = parsed.Tree;

      Console.WriteLine("type:" + tree.Type);
      Console.WriteLine("text:" + tree.Text);
      Console.WriteLine("children:" +tree.ChildCount);
      Console.WriteLine(tree.ToString());
      Console.WriteLine(tree.ToStringTree());

      Console.ReadKey();
    }
  }
} 
```

运行此代码时，我得到 0 个 lex 错误和 1 个解析错误

结果

```
errors:0
errors: 1
type:0
text:{
}
children:0
<error: {
}>
<error: {
}> 
```

问题！

1.  我认为 ANTLR 应该提供智能错误消息，但我没有找出问题所在

2.  我是否缺少改进错误消息的代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T19:58:56.220

您制定`CLASSDEF`了一个词法分析器规则（换句话说：单个标记），这是不正确的。当词法分析器偶然发现输入 like`"class X"`时，它​​无法创建标记，因为and`CLASSDEF`之间有一个空格（不，标记不会帮助您，因为这是词法分析器规则）。`"class"``"X"``WS``CLASSDEF`

换句话说：改为制定解析器规则（并从中`CLASSDEF`删除！）：`fragment``ID`

```
grammar T;

options
{
  language=CSharp3;     
  output=AST; 
}

tokens 
{
  CLASS  = 'class';
  LPAREN = '(';
  RPAREN = ')';
  LBRACK = '{';
  RBRACK = '}';
}

public program
 : class_def+ EOF!
 ;

class_def
 : CLASS ID LBRACK RBRACK
 ;

ID
 : ('a'..'z'|'A'..'Z'|'_') ('a'..'z'|'A'..'Z'|'0'..'9'|'_')*
 ;

WS
 : (' ' | '\t' | '\n' |'\r' )+ { $channel = Hidden; } 
 ; 
```

现在解析输入`"class foo { }"`将产生以下解析：

![在此处输入图像描述](../Images/d4620a555ab1da9ca7c815c5fbe997dc.png)

# mysql - mysql表重新设计思路（关系）

> ID：11812199
> 
> 赞同：0
> 
> 时间：2012-08-04T21:43:42.987
> 
> 标签：mysql, sql, ajax, database, database-design

我有如下关系的表：

![ERD](../Images/d0504f04b1ed09ec287a79080ddafffd.png)

我有相互链接的级联下拉框，即当您选择国家时，该国家下的区域将加载到区域下拉列表中。但现在我想将下拉菜单更改为基于 Ajax 的自动完成文本框。

我的问题是，我应该有多少个文本框？我是否应该为“按位置搜索”之类的所有内容设置一个文本框，我需要更改表格设计，或者为每个国家、地区、城市等设置一个文本框，

如果我有这样的文本框，用户可能不知道，很少有地方是区域还是城市，例如新西兰的奥克兰是一个区域而不是城市。

他们可以在城市文本框中搜索区域并在区域文本框中搜索城市......现在他们有一个下拉列表，他们可以从中看到他们的区域，“奥克兰肯定会在该区域中”

我可能无法从单个文本框中找到我想要的，

我需要一些关于从数据库和界面的角度重新设计的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T03:43:38.923

您的架构很好。但听起来用户至少想要的是： 1\. 谷歌风格的自由格式文本字段，他们可以输入单词，但是...... 2\. 在组合中显示匹配结果的子集-风格时尚。

所以这是交易：类似搜索的功能不是关系数据库的设计目标，这基本上就是您遇到的问题。也就是说，MySQL 虽然不是我的专业领域，但似乎确实具有合理的全文搜索支持（[MySQL 全文搜索](http://dev.mysql.com/doc/refman/5.6/en/fulltext-search.html)）。

也许您*可以*在每个描述字段上都有 FULLTEXT 索引并发出五个不同的查询。或者，如果您愿意使用肮脏的解决方案，请使用单独的 BUSINESS_SEARCH(business_id, concat_description) ，其中 concat_description 只是所有相关的“描述”字段组合在一起；尽管您需要考虑描述更新。

但我不知道 FULLTEXT 对性能的影响是什么。如果不重要，我会将这些查询卸载到服务器的单独副本。

我个人的感觉——完全没有证据支持它——是你会遇到性能问题。你考虑过加装吗？一个快速的谷歌[搜索引擎在 PHP/mySQL 中显示了类似谷歌的搜索引擎](https://stackoverflow.com/questions/502238/google-like-search-engine-in-php-mysql)。最大的缺点是您正在引入尚未经过验证/不熟悉的技术的所有陷阱。

对于任何一种方法，我认为你都有一些研究适合你。

祝你好运！

# gem - 试图创建一个指南针文件

> ID：11812201
> 
> 赞同：2
> 
> 时间：2012-08-04T21:43:59.973
> 
> 标签：gem, sass, compass-sass

我安装了指南针：

```
 sudo gem install compass 
```

并安装了 0.12.2 版 gem，但是当我这样做时

```
 compass version 
```

或者

```
 compass create myfilename 
```

我得到“找不到命令”。我尝试卸载并重新安装，但我仍然坚持同样的事情。

所有这些都来自 /Users/mycomputer。感谢任何帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-05T18:52:37.790

您的 gem 可执行目录似乎不在您的`$PATH`. 这可能不是解决此问题的最佳方法，但它非常直接。希望其他成员能帮助改进答案。

要解决此问题，请找到您的 gem 可执行目录：

```
$ gem environment 
```

并寻找`EXECUTABLE DIRECTORY`这样的行：

```
- EXECUTABLE DIRECTORY: /Users/mycomputer/.rvm/gems/ruby-1.9.3-p194@foo/bin 
```

通过在运行时查找它来仔细检查它是否已经存在`$PATH`：

```
$ echo $PATH 
```

如果你没有看到你的`EXECUTABLE DIRECTORY`，在你的主目录中编辑（或创建）`.profile`添加（或修改）：

```
export PATH="/Users/mycomputer/.rvm/gems/ruby-1.9.3-p194@foo/bin:$PATH" 
```

现在重新加载您的`.profile`以更新您的`$PATH`并检查您`EXECUTABLE DIRECTORY`的存在并`compass`再次尝试运行。

```
$ . ~/.profile
$ echo $PATH
/Users/mycomputer/.rvm/gems/ruby-1.9.3-p194@foo/bin:/usr/bin:/bin:/usr/sbin:/sbin...
$ compas --version
Compass 0.12.2 (Alnilam) 
```

希望这能让你上路。管理宝石和路径可能会很痛苦。做对你有用的事。您可能会研究[RVM](https://rvm.io/)，因此您不必`sudo`安装 gem，但我离题了。

# c - 链表和大小为 4 的无效读取

> ID：11812202
> 
> 赞同：0
> 
> 时间：2012-08-04T21:44:12.767
> 
> 标签：c, algorithm, data-structures, doubly-linked-list

我一直在实现一个链接列表来消除我的开发技能的锈迹，但注意到在我删除中间元素的测试期间，valgrind 报告了大小为 4 的无效读取。

> ```
> ==1197== Invalid read of size 4
> ==1197==    at 0x804885C: main (list.c:135)
> ==1197==  Address 0x426e76c is 4 bytes inside a block of size 12 free'd
> ==1197==    at 0x40257ED: free (vg_replace_malloc.c:366)
> ==1197==    by 0x804875E: list_remove (list.c:112)
> ==1197==    by 0x8048857: main (list.c:137) 
> ```

触发此操作的主要代码是：

> ```
>  for (iter = l2->head; iter; iter = iter->next) {
>             if (iter->n >= 10 && iter->n <= 14)
>                     list_remove(l2, iter); 
> ```

删除功能是：

```
void list_remove(struct list *list, struct node *node)
{
        if (node == list->head && node == list->tail) {
                list->head = list->tail = NULL;
        }
        else if (node == list->head) {
                list->head = node->next;
                list->head->prev = NULL;
        }
        else if (node == list->tail) {
                list->tail = node->prev;
                list->tail = NULL;
        }
        else  {
                struct node *prev, *next;
                prev = node->prev;
                next = node->next;
                prev->next = next;
                next->prev = prev;
        }

        free(node);
} 
```

知道我可能做错了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T21:46:07.523

您正在释放循环中的值，然后取消引用它以获取其“下一个”指针。您需要一个临时值才能正确执行此操作：

```
 for (iter = l2->head; iter; iter = next) {
            next = iter->next;
            if (iter->n >= 10 && iter->n <= 14)
                    list_remove(l2, iter);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T21:48:41.053

当您释放`iter`指针时`free(node)`。然后，您尝试从中读取`iter->next`不再存在的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T21:50:51.623

嗯...您所要做的就是**阅读**valgrind 消息。

*   此处阅读无效：`main (list.c:135)`- 那是`iter->next`，
*   从一个释放的位置，内存在这里释放：`list_remove (list.c:112)`，即`free(node);`.

只需在删除之前缓存下一个指针。

# mysql - MySQL - 从一组可能的时间戳中选择最近的日期？

> ID：11812215
> 
> 赞同：17
> 
> 时间：2012-08-04T21:46:54.127
> 
> 标签：mysql, select, timestamp, sql-order-by

我想知道这是否可以使用 mysql 查询：

我有一个名为更新的表。

在更新表中，我有 2 列，`id`并且`timestamp`.

我有 5 行，每行都有相同`id`但不同的日期时间戳。此时间戳的一个示例是值：`2012-08-04 23:14:09`。

我想从 5 个结果中只选择最近的时间戳值。这也可以通过说我想选择最接近当前日期和时间的值来解释。我怎么能这样做？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-08-04T21:51:03.580

```
SELECT id, timestamp FROM updates ORDER BY timestamp DESC LIMIT 1 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-04T21:50:13.127

你试过`SELECT MAX(timestamp)`吗？

# asp.net-mvc-4 - Umbraco 正在使用查询字符串做某事，它永远不会进入 asp.net 控制器

> ID：11812218
> 
> 赞同：1
> 
> 时间：2012-08-04T21:47:00.767
> 
> 标签：asp.net-mvc-4, umbraco

```
Umbraco: ver: 4.8 
```

Umbraco 中的页面设置为`link: mycontroller-myaction`

我对这个路由有问题的控制器/动作没有问题。我们使用节点工厂来获取当前节点 (umbraco.NodeFactory.Node.GetCurrent().Id)，该节点填充在视图 (Razor) 上。但是，如果我有我的动作设置来接受一个参数：

```
 public ViewResult MyAction(int id) {  } 
```

即将`www.domain.com/mycontroller-myaction?id=1234`

ControllerBase上的查询字符串`umbraco.library.RequestQueryString`或基本请求对象不包含“id”查询字符串。

所以对我来说，Umbraco 正在用它做点什么，我看不出是什么。我对 Umbraco 的了解不够，不知道我需要做什么，因为 Umbraco 的路由处理以确保它通过查询字符串传递。

任何人都可以提供一些见解？

**注意：** 通过不转到 Umbraco 中为上面列出的页面指定的路线来绕过 Umbraco，而是去正常`domain.com/mycontroller/myaction?id=1234`工作 - 更多的理由知道我对 Umbraco 对查询字符串所做的了解不够。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T00:01:05.593

这与 url 重写有关：

[网址重写.NET](http://www.urlrewriting.net/116/de/home.html)

查看第 10 页及以下的文档。

# bash - 匹配字符串中几个可能的字符之一

> ID：11812221
> 
> 赞同：4
> 
> 时间：2012-08-04T21:48:00.460
> 
> 标签：bash, scripting

在 bash（版本 3.2.48）脚本中，我得到一个字符串，可能类似于：

> 'XY'
> ' Y'
> 'YY'
> 等

所以，我有一个字母字符**或**一个空格（第一个插槽），然后是相关字符（第二个插槽）。我尝试了一些变体（没有 grep、sed、...），例如：

> if [[ $string =~ ([[:space]]{1}|[[:alpha:]]{1})M ]]; 然后

和

> if [[ $string =~ (\s{1}|.{1})M ]]; 然后

但我的解决方案并不总是正常工作（正确匹配每个组合）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T22:03:36.173

这应该适合你：

```
if [[ $string =~ [[:space:][:alpha:]]M ]]; then 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-04T21:58:50.490

```
if [[ ${string:1:1} == "M" ]]; then
    echo Heureka
fi 
```

或者（如果你想用模式来做）

```
if [[ $string =~ ([[:space:]]|[[:alpha:]])M ]]; then
    echo Heureka
fi 
```

或（甚至更简单）

```
if [[ $string == ?M ]]; then
    echo Heureka
fi 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-05T01:10:25.257

不使用正则表达式，简单的模式匹配就足够了：

```
if [[ $string == [[::upper:]\ ]M ]]; then
  echo match
fi 
```

鉴于你的例子，你想要`[[:upper:]]`而不仅仅是`[[:alpha:]]`

# c++ - 保存系统不打开 fstream 文件？

> ID：11812226
> 
> 赞同：0
> 
> 时间：2012-08-04T21:49:35.073
> 
> 标签：c++, save, fstream

我正在为游戏开发一个保存文件系统，并试图确保我可以在一个小测试程序中打开文件，确定它是否为空，如果它是空的，则提示用户创建一个角色，如果它not empty 将角色的信息加载到游戏中使用的变量中。到目前为止，在我的测试中，我已经在记事本中创建了文件（将它们留空），使用适当的扩展名保存它们，并尝试打开文件并测试它们是否为空。

```
#include <iostream>
#include <string>
#include <fstream>

using namespace std;

int main ( int argc, char* argv[])
{
   struct charFile
   {
      int chapterNum;
      int savePoint;
      string firstName;
      char gender, hairColor, hairType, hairLength, eyeColor, profession, magic, martialSkills;
      bool hasPet;
   } character;

   fstream save;

   char saveFileChoice;
   string saveFile;

   cout << "Select a File (1, 2, 3, 4, 5, or 6): ";
   cin >> saveFileChoice;

   saveFile = saveFileChoice + ".charsav";

   save.open(saveFile.c_str());
   if (!save.good())
   {
      cout << "Save file cannot be opened.\n";
   }

   char tempStr[12];
   save.getline (tempStr, 256);
   if ( tempStr == "EMPTY" )
   {
      cout << "There is no save data in the file.  Starting a new game...\n\n";
      cout << "What is your character's name? ";
      cin >> character.firstName;
      save << character.firstName;

   }

return 0;
} 
```

我想知道为什么即使文件是空的，文件也从未放入 if 语句中，然后即使我在文件中添加了 EMPTY ascii 字符并更改了条件。然后我输入：

```
if (!save.good())
       {
          cout << "Save file cannot be opened.\n";
       } 
```

并在运行时不断显示消息，因此由于某种原因文件未打开。=/我不知道为什么。

我检查了文件，它们没有被格式化为 .charsav.txt 或任何东西，它们仍然只是 1.charsav、2.charsav 等。我觉得我错过了一些简单而明显的东西。有人可以为我指出吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T21:53:17.853

if (!strcmp(tempStr, "EMPTY" )) 是您比较字符串的方式

# java - 我应该怎么做才能通过 Domino Designer 中的外部 jar 的导入语句获取类？

> ID：11812227
> 
> 赞同：0
> 
> 时间：2012-08-04T21:49:51.427
> 
> 标签：java, lotus-domino, lotus, agent

我使用 Domino 服务器并开发 Java 代理。通常我将外部 jar 文件放入脚本库，但会定期获取 OutOfMemory。我将 jar 从脚本库提取到 jvm/lib/ext。我可以通过 ClassLoader 获取类，但不能通过 import 语句。我应该怎么做才能通过导入语句使其工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T04:13:02.453

您实际上可以将 jar 显式添加到 Java 代理。请注意，Java 代理默认没有包名，在导入语句中引用包时，您需要引用正确的包名。[此处](http://lekkimworld.com/2006/02/28/imported_java_agent.html)描述了将 jar 导入代理，对于 8.5 版，[此处](http://www.mindwatering.com/supportref.nsf/e6b464faa52c14d1852567d90082c48f/7da81c091b073d9c85256f560055baa3!OpenDocument)和[此处](http://lotus-blogs.blogspot.com.au/2010/09/what-is-best-place-to-keep-external.html)

另外，我怀疑您没有明确清理您是 java 对象。JVM 和 Domino 内存堆之间的连接是“弱的”。因此，您必须对 Domino 对象进行自己的垃圾收集，以保持服务器的内存清洁。这对我来说仍然是黑魔法，但我的理解是，即使代理应该“包含”会话，然后在终止时释放内存，未正确回收的 Domino 对象也会耗尽 Domino 的堆内存。以下是我保持记忆清洁的简单提示：

**1/ 将会话对象保存在包装对象中**。创建一个包含 Domino 会话对象的类（我称之为 SessionWrapper）。然后只在 NotesMain 方法中声明 SessionWrapper 对象，不要在类级别声明它。这个 SessionWrapper 类需要有它自己的调用 Session.recycle() 的回收方法，并且您需要在 NotesMain 结束时调用它。其原因在第 2 点中进行了解释。如果您不调用 NotesMain 中的任何其他方法，那么您实际上并不需要此包装器。请参阅第 4 点关于回收会话。

**2/ 将 SessionWrapper 传递给您需要 Domino 访问的所有方法**。基本上，您在这个包装类中将会话作为参数传递。这是因为我们不想在类级别声明会话对象。这并不理想，但可以防止由于将会话类保持在类级别而导致的内存泄漏。

**3/ 积极回收**。在我看到这个示例循环之前，这对我来说从来没有多大意义

```
ViewEntryCollection vec = view.getAllEntries();
ViewEntry ve = vec.getFirstEntry();
While (ve!=null) {
 ViewEntry veNext = vec.getNextEntry(ve);
 // do stuff

 ve.recycle;
 ve = null;
 ve = veNext;
} 
```

看看“ve”对象是如何被回收的，而 veNext 是如何获取下一个对象的。基本上你需要在使用完每个对象后回收它，“getNext”方法实际上不会回收 Domino 堆内存中的对象，如果你不回收它，它就是孤立的，Domino 不会清理运行起来，服务器最终将耗尽 Domino 对象的内存。请注意，我没有回收 veNext。我不需要，因为我分配了 ve => veNext。“ve”将有一个指向同一个 Domino 对象的链接，我在循环结束时调用 recycle ve。从中可以看出，很多java对象可以在后端指向同一个Domino实例对象。如果我尝试在 ve.recycle 之后调用 veNext.recycle，我会收到“对象已被删除或回收”错误。

**4/ 在 NotesMain 结束时回收会话**。确保在 NotesMain 结束时调用 SessionWrapper.recycle() 以确保将那部分内存释放回服务器。

**5/ 确保您为服务器上的 JVM 提供了足够的内存**。请参阅此[技术](http://www-01.ibm.com/support/docview.wss?uid=swg21377202)说明。还要注意“HTTPJVMMaxHeapSizeSet=1”，这是一个奇怪的设置，可确保内存设置“坚持”。更多关于它[的信息在这里](http://www-01.ibm.com/support/docview.wss?uid=swg1LO58189)。

多年来，IBM 一直没有提供对象的内部清理任务，而这些任务对于消除开发人员的这种开销是非常必要的。然后，您需要显式释放内存，这也会影响性能，但它是稳定性的必要妥协。这些要点绝不是详尽无遗的，但我发现在遵守这些规则时，代理和 servlet 的稳定性大大提高。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T09:31:22.430

1.  关闭 Lotus Notes 客户端和设计器。
2.  将 JAR 放入本地 jvm/lib/ext。
3.  打开 Lotus Notes 客户端和设计器。

现在您可以导入类。

# c# - 如何创建包含 sql server 数据库的安装

> ID：11812231
> 
> 赞同：0
> 
> 时间：2012-08-04T21:50:18.347
> 
> 标签：c#, winforms, visual-studio-2008, sql-server-2012

我使用 Visual Studio 2008 在 c# 中创建了一个应用程序，并且我正在使用 SQL Server 2012 来实现应用程序的数据库。

我的问题是：

如何在不使用 atach 数据库方法的情况下创建包含数据库的安装。

请按F1！F1！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T21:54:15.243

您可以导出一个脚本，该脚本将使用数据创建和填充数据库。您使用的是什么设置工具？

或者，您可以让 C# 应用在首次启动时创建数据库和默认数据。在这两种情况下，您都必须创建一个脚本文件来创建/填充数据库。

导出 SQL 脚本

1.  右键单击 SQL 服务器管理器中的数据库名称
2.  任务->脚本

在 C# 中，使用 StreamReader 打开脚本文件并读取所有行。然后使用 SqlCommand 执行脚本文件。首先，您需要打开与 Master 数据库的连接，因为您尚未创建数据库。然后修改连接字符串并将主数据库替换为您的数据库名称。

连接字符串可以存储在应用程序设置中，您可以提供一个设置对话框来修改它，为简单起见，将默认连接字符串连接到本地计算机和您的数据库名称。

以下代码修改了一个设置键名 Setting1

```
MessageBox.Show(Properties.Settings.Default.Setting1);
Properties.Settings.Default.Setting1 = "New Value";
Properties.Settings.Default.Save(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T21:59:24.050

您还可以在安装程序 (.msi) 文件中创建自定义操作 - 这是一个[链接](http://msdn.microsoft.com/en-us/library/49b92ztk%28v=vs.80%29.aspx)，告诉您执行此操作的步骤。使用 C# 添加指向示例的链接 -[此处](http://msdn.microsoft.com/en-us/library/49b92ztk.aspx)

# macos - Mac 安装程序包 (productbuild) 要求输入管理员密码，但不应该

> ID：11812234
> 
> 赞同：3
> 
> 时间：2012-08-04T21:50:42.347
> 
> 标签：macos, code-signing, osx-mountain-lion, productbuild

我已经创建了一个带有 productbuild 的 pkg 安装程序包：

```
$ productbuild --component "/Applications/Earlybird.app" /Applications --sign "Developer ID Installer: Name" --product "/Applications/Earlybird.app/Contents/Info.plist" Thunderbird_14.0_enUS.pkg 
```

这工作得很好。但是，如果我尝试安装应用程序，它会要求输入管理员密码。但对于简单的应用程序，它并不需要它。这会使用户感到困惑。因此，我尝试通过使用 Flat Package Editor 打开 pkg 并将 PackageInfo 文件中的 auth="root" 更改为 auth="none" 来解决此问题。但它仍然要求输入管理员密码。为什么会这样，我该如何解决？我在 OS X 10.8 上。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T16:43:52.953

在 Mac 上，您需要管理权限才能写入 /Applications。

除了将应用程序复制到用户的主文件夹之外，没有办法解决这个问题。

# java - 是否可以使用 RandomAccessFile 打印出学生对象？

> ID：11812240
> 
> 赞同：2
> 
> 时间：2012-08-04T21:52:28.633
> 
> 标签：java, arraylist, random-access

我正在使用 RandomAccessFile 为文本文件创建数据库。基本上我使用 ArrayList 创建了一个普通存储，现在我需要使用 RandomAccessFile 输出存储的内容。但我被困在如何让 randomAccessFile 方法获取学生商店。这是我的代码：

```
import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.FileWriter;
import java.io.IOException;
import java.io.PrintWriter;
import java.io.RandomAccessFile;

public class MainApp
{
    private RandomAccessFile File;

    public static void main(String[] args) throws Exception 
    {
        new MainApp().start();

    }
    public void start()throws Exception 
    {
        StudentStore details = new StudentStore();
        Student a = new Student("Becky O'Brien", "DKIT26", "0876126944", "bexo@hotmail.com");
        Student b = new Student("Fabio Borini", "DKIT28", "0876136944", "fabioborini@gmail.com");
        Student c = new Student("Gaston Ramirez", "DKIT29", "0419834501", "gramirez@webmail.com");
        Student d = new Student("Luis Suarez", "DKIT7", "0868989878", "luissuarez@yahoo.com");
        Student e = new Student("Andy Carroll", "DKIT9", "0853456788", "carroll123@hotmail.com");
        details.add(a);
        details.add(b);
        details.add(c);
        details.add(d);
        details.add(e);

        details.print();

        //Create a file object.
        File contactDetailsFile = new File("StudentDetails.txt");
        //Open a buffered output stream to allow write to file operations.
        PrintWriter out = new PrintWriter(
                          new BufferedWriter(
                          new FileWriter(contactDetailsFile)));   

        out.println(a);
        out.println(b);
        out.println(c);
        out.println(d);
        out.println(e);
        out.close();

        BufferedReader in = new BufferedReader(
                            new FileReader(contactDetailsFile));

        String line = in.readLine();
        System.out.println(line);

        out.close();

    }
/**
 * @param args the command line arguments
 */
public void RandomAccessFile(String filename) 
{

    RandomAccessFile randomAccessFile = null;
    try {

        //Declare variables that we're going to write
        String line1 = "First line\n";
        String line2 = "Second line\n";

        //Create RandomAccessFile instance with read / write permissions
        randomAccessFile = new RandomAccessFile(filename, "rw");

        //Write two lines to the file
        randomAccessFile.writeBytes(line1);
        randomAccessFile.writeBytes(line2);

        //Place the file pointer at the end of the first line
        randomAccessFile.seek(line1.length());

        //Declare a buffer with the same length as the second line
        byte[] buffer = new byte[line2.length()];

        //Read data from the file
        randomAccessFile.read(buffer);

        //Print out the buffer contents
        System.out.println(new String(buffer));

    } catch (FileNotFoundException ex) {
        ex.printStackTrace();
    } catch (IOException ex) {
        ex.printStackTrace();
    } finally {
        try {

            if (randomAccessFile != null)
                randomAccessFile.close();

        } catch (IOException ex) {
            ex.printStackTrace();
        }
    }

}   

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T01:00:15.883

一句话，是的。

但是，您将不得不再次重新执行此解决方案的*写入文件*部分。您必须以与编写对象相同的方式读取对象。

从这个[示例](http://www.java2s.com/Code/Java/File-Input-Output/UseRandomAccessFiletosaveanobject.htm)中，您可以看到每个成员是如何使用[RandomAccessFile](http://docs.oracle.com/javase/7/docs/api/java/io/RandomAccessFile.html)对象编写的。

我建议您让示例中的 read 方法返回一个新的 Student 对象。

# android - 服务器如何定位 GCM (Google Cloud Messaging) 注册 ID

> ID：11812241
> 
> 赞同：3
> 
> 时间：2012-08-04T21:52:36.120
> 
> 标签：android, google-app-engine

我正在尝试编写一个使用 GCM 通知手机的应用程序。我能够实现基本功能，但有一个问题我仍然不确定

据我了解，流程是这样的：

1.  设备启动
2.  设备注册，获取注册id
3.  服务器获取设备上注册ID的知识
4.  服务器正在使用它的 API 密钥 + 注册 ID 将有效负载发送到设备
5.  设备接收有效载荷。

我不清楚的一件事是：实施步骤 3 的正确方法是什么？

我找不到任何方法来获取已注册设备的列表。让我们想象一下，我使用 GCM 来发布到已知设备，我可以通过电子邮件将该 ID 发送给自己，然后手动将其注册到服务器上。但据我了解，它过期了。

那么，是否期望每次发生时我都必须继续重新注册并以某种方式通知服务器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T18:05:43.337

是的，您设备上的应用程序必须将注册 ID 发送到您的服务器应用程序，以便服务器能够发送 GCM 消息。[请参阅启用 GCM](http://developer.android.com/guide/google/gcm/gcm.html#push-process)中的第三点。

# c - C：将 return & scanf() 合并在一行中

> ID：11812244
> 
> 赞同：-2
> 
> 时间：2012-08-04T21:52:59.123
> 
> 标签：c, stdin, scanf

我正在用 C 语言编写一个程序，它显示一个要求用户做出决定的菜单。

我想在程序中多次调出菜单，所以我将其投入使用。

每个选项都有一个与之关联的数字：

```
(1) Add
(2) Subtract 
```

`scanf`该函数显示菜单，然后我`int`响应一个局部变量，然后返回该变量（我当然在函数开头声明了该变量）。

```
int function ()
{
    int choice;

    // *insert print menu code here*

    scanf(" %i", &choice);

    return choice;
} 
```

我可以通过某种方式使这个更短：`return scanf(" %i", stdin);`

我不确定是否`stdin`是正确的选择，但这就是搜索告诉我的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T22:15:26.693

你当然可以：

```
int scanInt(void) {
  int result;
  return (scanf(" %i", &result), result);
} 
```

但是有用吗？可能不是。

* * *

请注意，乍一看，这*可能看起来像未定义的行为，因为您在一个表达式中从同一内存位置进行写入和读取。*但事实并非如此，因为逗号运算符引入了一个序列点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T21:55:44.823

你不能这样做`scanf`：你将返回 的*返回值*，`scanf`它只表示成功读取的项目数。如果您需要退货，`choice`则需要致电`scanf`填写`choice`并分两个单独的步骤退货。

这里的另一点是您应该检查`scanf`: 如果无法转换输入，它将失败。在您的代码中，`scanf`如果输入不是整数，则会失败。

此外，`scanf`从 - 标准输入读取`stdin`- 默认情况下，您不能将其作为参数传递，除非您使用`fscanf`，否则其行为方式相同。

您是否考虑过使用`fgets`您的输入？它*确实*返回下一个输入行，这*将*允许您在`return`语句中进行读取，因为`fgets`将下一行输入作为字符串返回。但是您仍然需要自己解析输入，这可能应该发生*在*您的`function`. 在任何情况下，`fgets`它通常是用户输入的更好选择，因为它将读取输入与解析输入分开，并避免在使用时`scanf`由于输入与格式字符串不匹配而出现问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T22:20:38.957

你可以，有点——但不要。

`scanf`返回扫描的项目数。您不能让它返回扫描项目之一的值。

```
return scanf(" %i", &choice), choice; 
```

这使用逗号运算符（不要与函数参数之间的逗号分隔符混淆），它计算两个操作数并产生正确操作数的结果。

但是没有充分的理由这样做。像这样使您的源代码更紧凑并没有什么好处。多行表单更清晰，并且通过添加错误处理更容易修改（如果用户输入的不是数字会发生什么？）

或者您可以编写自己的函数来调用`scanf`并返回您想要的值，但这仍然不能解决错误处理的问题。

如果您的目标只是将它们放在一条线上：

```
scanf(" %i", &choice); return choice; 
```

但同样，这不是一种改进。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-04T21:55:45.863

不，你不能用`scanf`. 该函数需要一个内存位置来存储结果，并且不返回它。所以你只需要忍受额外的代码。

# sql - Grails 数据建模困境

> ID：11812247
> 
> 赞同：0
> 
> 时间：2012-08-04T21:53:11.317
> 
> 标签：sql, database-design, grails, polymorphism, data-modeling

我希望有人可以帮助我决定为这个设计建模的最佳方法，因为听起来应该是一个简单的用例。

我有一个`Client`域类。我有一个`Person`命令对象和一个`Firm`代表公司或组织的命令对象。

我也有子类，为了命名，我们称它们`ClientSubClass1`为`ClientSubClass2`扩展`Client`.

我感到困惑的是，客户应该既可以是个人，也可以是公司。

所以我认为最好的方法是使用嵌入并将 Firm 类和 Person 类嵌入到 Client 类中，并添加一个标志来指示客户是个人还是公司。否则我看不到如何使用继承来完成我所需要的。

任何想法将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T04:53:11.230

在 Grails 中，您可以在域类中使用继承，而 GORM 将在数据库中为您创建和管理一个标志，而无需您显式声明一个标志。我将创建从 Client 继承的 Person 和 Firm 域类。

命令类主要用于将请求中的参数绑定到控制器操作，这与数据的存储和检索方式有些无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T17:26:13.497

好吧，只是为了回答这个问题并总结一下，我决定创建一个更高级别的 Contact 域类，它有一个 Person 和 Organization 子类（tableperHierarchy false）。

客户端扩展了 Person 并包含一个嵌入式组织，以及一个标志，用于指示在引用该客户端时我应该使用个人详细信息还是组织详细信息，例如当我想显示客户端名称时，我知道是否使用来自嵌入式组织的个人姓名（头衔、名字、首字母、姓氏）或公司名称。

在 Contact 类定义中，我还使用了一个嵌入的 Address 类，它保存在 'src/groovy' 中，因此它不会创建自己的表。

所以我混合了组合和继承，效果很好。

# f# - 覆盖 F# 中的继承成员

> ID：11812250
> 
> 赞同：4
> 
> 时间：2012-08-04T21:53:47.750
> 
> 标签：f#

下面的代码产生“t1 t1 t2”。我想知道是否有人可以告诉我如何更改它以获得“t1 t2 t2”。在 t2 中使用“覆盖”而不是“成员”是错误的，我不明白为什么。我对 RTFM 感到非常高兴，只要我知道在哪里看什么 FM 就好了。

非常感谢，如果我错过了一些根本原因，为什么我想要的东西不应该是可能的。

```
type myinterface =
   abstract member doit : unit -> unit

type t1 () =
   interface myinterface with
      member x.doit () = printf "t1\n"

type t2 () =
    inherit t1 ()

    member x.doit () = printf "t2\n"

let override_test () =
    let t1 = t1 () :> myinterface
    let t2 = t2 ()
    let t2i = t2 :> myinterface
    t1.doit ()
    t2i.doit ()
    t2.doit () 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-04T22:01:13.943

这应该具有您想要的行为：

```
type myinterface =
    abstract member doit : unit -> unit

type T1 () =
    interface myinterface with
        member x.doit () = printfn "t1"

type T2 () =
    inherit T1 ()
    member x.doit () = printfn "t2"
    interface myinterface with
        member x.doit () = x.doit ()

let override_test () =
    let t1i = T1() :> myinterface
    let t2 = T2()
    let t2i = t2 :> myinterface
    t1i.doit ()
    t2i.doit ()
    t2.doit () 
```

# php - 计算行数和值匹配数

> ID：11812251
> 
> 赞同：1
> 
> 时间：2012-08-04T21:54:05.147
> 
> 标签：php, mysql

```
SELECT COUNT(m.winner = p.userName) AS wins, YEAR(m.datePlayed) AS year, DATE_FORMAT(m.datePlayed, '%M') AS month, COUNT(*) as games FROM allMatches AS m LEFT JOIN playerUsers AS p ON m.season = p.season AND (m.player1 = p.userName OR m.player2 = p.userName) WHERE p.realName = '$realName' AND m.winner != '' AND m.canceled != '1' GROUP BY YEAR(m.datePlayed), MONTH(m.datePlayed)"; 
```

我们要加入 2 个表：allMatches 和 playerUsers。PlayerUser 的用户名与给定赛季的 allMatches 表中的 player1 或 player2（也可能与获胜者）匹配。

我想计算玩的游戏数量（他们参加的任何比赛）和他们赢得的比赛数量（他们在 playerUsers 上的用户名与 allMatches 上的获胜者匹配）。上面的 SQL 语句以相同的数字返回胜利和游戏。有没有办法在同一个 SQL 语句中统计胜数和游戏数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T21:58:19.947

使用`SUM`而不是`COUNT`计算获胜次数：

```
SELECT SUM(m.winner = p.userName) AS wins, ... 
```

它之所以有效，是因为布尔表达式的计算结果为 0 和 1，因此可以`SUM`为您提供表达式为真的总行数。

# c++ - 优先规则

> ID：11812253
> 
> 赞同：0
> 
> 时间：2012-08-04T21:54:09.973
> 
> 标签：c++

我正在解决 C++ 多项选择题。我无法理解以下代码的输出::

```
#include <iostream>
using namespace std;
int main()
{
    int x,y,z;
    x=y=z=1;
    z=++x || ++y && ++z;
    cout<<x<<" "<<y<<" "<<z<<endl;
    system("pause");
    return 0;
} 
```

我正在通过以下方式解决这个问题::优先顺序::

```
Precedence "++" greaterthan Precedence "&&" greaterthan  Precedence "||" 
```

此外，一元++的关联性是“从右到左”。所以

```
z=(++x)||(++y) && (2)
z=(++x)||(2)&& (2)
z=(2)||(2)&&(2)
z=(2)|| 1  //As 2 && 2 is 1(true)
z=1       // As 2 || 1 is 1(true) 
```

所以在我看来，正确的输出应该是 x=2,y=2 和 z=1。

但是当我在编译器中运行此代码时，编译器输出为 x=2,y=1,z=1。

为什么我得到这样的输出以及我在哪里犯了错误？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T21:59:58.573

运算符优先级告诉您如何对表达式进行分组；它不会告诉您它们的执行顺序。

`||`并且`&&`特别之处在于始终首先计算第一个操作数，并且仅在需要确定表达式的值*时才计算第二个操作数（包括所有子表达式）。*

对于`||`，如果第一个操作数计算为`true`第二个操作数，则不计算第二个操作数，因为逻辑或的结果将始终为真。

类似地，`&&`如果第一个操作数作为逻辑计算结果为假，则不会计算第二个操作数 - 在这种情况下必须为假。

在表达式`z=++x || ++y && ++z`中，语法规则指定了一个分组：

```
z = ((++x) || ((++y) && (++z))); 
```

在 sub-expression`(++x) || ((++y) && (++z))`中， as 的`(++x)`计算结果为`true`（因为 2 非零），第二个运算符`((++y) && (++z))`永远不会被计算。`x`变为 2，`y`不变并被`z`赋值`1`（`true`转换为整数）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-04T21:57:58.673

`&&`和`||`运算符是*短路*的。他们评估左侧，然后仅在必要时评估右侧以确定值。

因此，如果左侧`||`为真，则不评估右侧，如果左侧`&&`为假，则不评估右侧。

在您的示例中，由于`++x`为真（ ），因此不评估`2`右侧的。`||`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T22:00:47.323

逻辑或运算符要求如果两个操作数中的任何一个不为零，则条件为真。在表达式`A||B`中，要么 要么`A`不`B`为零，则`(A || B)`br 为真或等于`1`。所以`++y`and `++z`将被编译器忽略，因为`++x`is的值`1`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-04T22:03:32.580

请记住，编译器只有在需要时才会执行整个逻辑表达式。否则，它会尽量减少工作量。

例如，如果您使用 && 运算符，则需要对两个表达式进行求值。但是，如果您使用 || 运算符（您有），如果左侧的第一个表达式为真，则不执行右侧。在您的示例中， ++x 给出 2，它被评估为布尔值 TRUE。编译器的故事结束，因为一旦为真，OR 语句将永远不会恢复为 FALSE。这个概念被编译器称为“短路”。这就是为什么你得到你描述的输出。

# php - 如何在php中转义一个字符串？

> ID：11812256
> 
> 赞同：-2
> 
> 时间：2012-08-04T21:54:28.503
> 
> 标签：php, mysql

> **可能重复：**
> [如何通过 PHP 和 mysql 正确转义字符串](https://stackoverflow.com/questions/5840230/how-to-properly-escape-a-string-via-php-and-mysql)

我正在尝试填充`MySQL`数据库，为此我正在解析数据文件并运行`INSERT INTO ...`查询。该表`parsonspredictions_R`的结构如下：

```
+-------------+---------+------+-----+---------+----------------+
| Field       | Type    | Null | Key | Default | Extra          |
+-------------+---------+------+-----+---------+----------------+
| id          | int(11) | NO   | PRI | NULL    | auto_increment |
| drug_a      | blob    | NO   |     | NULL    |                |
| drug_b      | blob    | NO   |     | NULL    |                |
| correlation | float   | NO   |     | NULL    |                |
| p_value     | float   | NO   |     | NULL    |                |
+-------------+---------+------+-----+---------+----------------+ 
```

但是，有一些`drug_x`值是有的`'`，那么我怎样才能在其他值中转义我的字符串以忽略或`'`从字符串中删除这些值？

例子：

```
INSERT INTO parsonspredictions_R (
    drug_a,
    drug_b,
    correlation,
    p_value
) VALUES(
   '2'-Hydroxyflavanone_28_0',
   'Emodin',
   0.165714,
   0.0019
); 
```

结果是：

> 无效查询：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1-b 行的 '', 'Emodin', 0.165714, 0.0019 )' 附近使用正确的语法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T21:57:40.060

如果您正在使用 mysqli，请尝试使用此功能[mysqli_real_escape_string](http://php.net/manual/en/mysqli.real-escape-string.php)，如果您不使用 mysqli，请使用简单的谷歌搜索：`escapes special characters in a string PHP`将为您提供解决方案。

如果你想完全避免这个问题，你应该尝试使用[PDO 类](http://www.php.net/manual/en/class.pdo.php)和他们对准备好的语句的看法。

**假设您使用的是 mysqli**

```
$drug_a = mysqli_real_escape_string($drug_a);
$drug_b = mysqli_real_escape_string($drug_b);

INSERT INTO parsonspredictions_R (
    drug_a,
    drug_b,
    correlation,
    p_value
) VALUES(
   $drug_a,
   $drug_b,
   0.165714,
   0.0019
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T22:00:54.750

您可以通过键入转义 '-character

```
INSERT INTO parsonspredictions_R (
    drug_a,
    drug_b,
    correlation,
    p_value
) VALUES(
    '2''-Hydroxyflavanone_28_0',
    'Emodin',
    0.165714,
    0.0019
); 
```

或者你可以把你的字符串放在 MySQL 查询中的 ""-quotes 中。

编辑：要使您的文件准备好使用正则表达式，您可以`mysql_real_escape_string()`在使用正则表达式之前在文本上使用。它将转义所有可疑字符，例如'-character。

# ruby-on-rails - rails ckeditor：图片上传不起作用

> ID：11812258
> 
> 赞同：1
> 
> 时间：2012-08-04T21:54:38.200
> 
> 标签：ruby-on-rails, ckeditor, wysiwyg

我已经在我的 Rails 应用程序中安装了 ckeditor，按照此处的说明进行操作：[https](https://github.com/fxposter/rails_3_1_with_ckeditor_and_carrierwave) ://github.com/fxposter/rails_3_1_with_ckeditor_and_carrierwave Ckeditor 已加载且功能良好，但上传图片不起作用。我不知道为什么。当我上传图片时，它只显示加载动画，没有其他任何作用。但是图片实际上是上传的，我通过浏览我的应用程序文件夹就知道了，它位于 \public\tmp 中。但是当我再次浏览服务器时，它没有显示图像。当我浏览 sqlite 数据库时，我发现根本没有数据。这意味着，图片正在上传，但未能将资产信息保存在数据库中。在这种情况下我能做什么？

我的错误日志如下所示。

```
Started POST "/ckeditor/pictures?qqfile=Picture0004.jpg" for 127.0.0.1 at 2012-08-05 00:00:42 +0300
Processing by Ckeditor::PicturesController#create as */*
  Parameters: {"qqfile"=>"Picture0004.jpg"}
Completed 500 Internal Server Error in 268ms

Errno::ENOENT (No such file or directory - identify -ping -quiet -format "%w\n" "c:/RAILSapp/txtEdtr/public/uploads/tmp/20120805-0000-7596-2102/Picture0004.jpg"):
  subexec (0.2.2) lib/subexec.rb:71:in `spawn'
  subexec (0.2.2) lib/subexec.rb:71:in `spawn'
  subexec (0.2.2) lib/subexec.rb:55:in `run!'
  subexec (0.2.2) lib/subexec.rb:41:in `run'
  mini_magick (3.4) lib/mini_magick.rb:405:in `run'
  mini_magick (3.4) lib/mini_magick.rb:399:in `run_command'
  mini_magick (3.4) lib/mini_magick.rb:230:in `[]'
  C:/Ruby193/lib/ruby/gems/1.9.1/bundler/gems/ckeditor-7a987ee4c703/lib/ckeditor/backend/carrierwave.rb:57:in `read_dimensions'
  carrierwave (0.6.2) lib/carrierwave/uploader/processing.rb:85:in `block in process!'
  carrierwave (0.6.2) lib/carrierwave/uploader/processing.rb:81:in `each'
  carrierwave (0.6.2) lib/carrierwave/uploader/processing.rb:81:in `process!'
  carrierwave (0.6.2) lib/carrierwave/uploader/callbacks.rb:18:in `block in with_callbacks'
  carrierwave (0.6.2) lib/carrierwave/uploader/callbacks.rb:18:in `each'
  carrierwave (0.6.2) lib/carrierwave/uploader/callbacks.rb:18:in `with_callbacks'
  carrierwave (0.6.2) lib/carrierwave/uploader/cache.rb:112:in `cache!' 
```

虽然得到它看起来像这样

```
Started GET "/ckeditor/pictures?CKEditor=test_area&CKEditorFuncNum=2&langCode=en" for 127.0.0.1 at 2012-08-05 00:27:57 +0300
Processing by Ckeditor::PicturesController#index as HTML
  Parameters: {"CKEditor"=>"test_area", "CKEditorFuncNum"=>"2", "langCode"=>"en"}
  [1m[35mCkeditor::Picture Load (0.0ms)[0m  SELECT "ckeditor_assets".* FROM "ckeditor_assets" WHERE "ckeditor_assets"."type" IN ('Ckeditor::Picture') ORDER BY id desc
  Rendered C:/Ruby193/lib/ruby/gems/1.9.1/bundler/gems/ckeditor-7a987ee4c703/app/views/ckeditor/shared/_asset.html.erb (0.0ms)
DEPRECATION WARNING: ActiveSupport::JSON::Variable is deprecated and will be removed in Rails 4.0\. For your own custom JSON literals, define #as_json and #encode_json yourself. (called from new at C:/Ruby193/lib/ruby/gems/1.9.1/bundler/gems/ckeditor-7a987ee4c703/lib/ckeditor/utils.rb:12)
  Rendered C:/Ruby193/lib/ruby/gems/1.9.1/bundler/gems/ckeditor-7a987ee4c703/app/views/ckeditor/pictures/index.html.erb within layouts/ckeditor/application (5.0ms)
DEPRECATION WARNING: :confirm option is deprecated and will be removed from Rails 4.0\. Use ':data => { :confirm => 'Text' }' instead. (called from _____uby____lib_ruby_gems_______bundler_gems_ckeditor__a___ee_c____app_views_ckeditor_shared__asset_tmpl_html_erb___29464367_32812632 at C:/Ruby193/lib/ruby/gems/1.9.1/bundler/gems/ckeditor-7a987ee4c703/app/views/ckeditor/shared/_asset_tmpl.html.erb:4)
  Rendered C:/Ruby193/lib/ruby/gems/1.9.1/bundler/gems/ckeditor-7a987ee4c703/app/views/ckeditor/shared/_asset_tmpl.html.erb (1.0ms)
Completed 200 OK in 52ms (Views: 23.0ms | ActiveRecord: 0.0ms) 
```

# java - servlet 和 jsp 之间的通信不起作用 - PropertyNotFoundException

> ID：11812264
> 
> 赞同：0
> 
> 时间：2012-08-04T21:55:24.337
> 
> 标签：java, html, jsp, web-applications, servlets

我正在尝试将信息从我的 servlet 传递到 jsp ，其中一些字段成功传递，而另一些则没有。

这是我输入输入的初始页面：

![在此处输入图像描述](../Images/fea4e66faafeacc98f3c7ec9c06c4556.png)

的代码`index.html`

```
<!DOCTYPE html>
<html>
<head><title>Bank application</title>
<link rel="stylesheet"
      href="./css/styles.css"
      type="text/css"/>
</head>
<body>
<table class="title">
  <tr><th>Web Bank application</th></tr>
</table>

<br/>
<fieldset>
  <legend>Registration</legend>
  <form action="register"> 
    First name: <input type="text" name="firstName"><br>
    Last name : <input type="text" name="lastName"><br>
    Address   : <input type="text" name="address"><br>
    ID-number : <input type="text" name="idnumber"><br>
    User-Name : <input type="text" name="userName"><br>
    Password  : <input type="text" name="password"><br>
    <input type="submit" value="Register">
  </form>
</fieldset> 
```

我想将数据传递给一个名为`show-name.jsp`：

```
<!DOCTYPE html>
<html>
<head><title>Thanks for Registering</title>
<link rel="stylesheet"
      href="./css/styles.css"
      type="text/css"/>
</head>
<body>
<h1>Congratulations ! You are now registered to our bank</h1>
<h2>First Name: ${name.firstName}</h2>  // that's okay 
<h2>Last Name: ${name.lastName}</h2>    // that's okay  
<h2>Address: ${name.address}</h2>       // that's okay 
<h2>Password: ${name.password}</h2>     // that's okay 
<h2>User-Name: ${name.userName}</h2>    // that's not okay 
<h2>Id Number: ${name.idnumber}</h2>    // that's not okay 
</body></html> 
```

我在 Eclipse 中得到以下异常：

```
root cause 

javax.el.PropertyNotFoundException: Property 'userName' not found on type model.Person 
```

或者 ：

```
root cause 

javax.el.PropertyNotFoundException: Property 'idnumber' not found on type model.Person 
```

奇怪的是，所有其他`4`字段都很好，意思是`name.firstName`& `name.lastName`& `name.address`& `name.password`，但其他两个不是，即使我添加了几个`System.out.prinln`-s ：

```
 System.out.println(person.getID());
      System.out.println(person.getUsername()); 
```

在servlet中，数据提交`console`成功，意思是我得到：

```
4444
5555 
```

. 但由于某种原因，数据部分没有传递给`jsp`.

为什么 ？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T22:10:00.747

我认为这是因为 EL 使用 getter 来获取 bean 的属性。

在你的`Person`bean getter for `idnumber`is not `getIdnumber`or `isIdnumber`but`getID`所以你可以看到错误，说在 model.Person 类型上找不到属性 'idnumber'。

吸气剂也一样，因为`userName`它不是`getUserName`但是`getUsername`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T22:17:34.153

您应将您的 EL 更改为，`name.username`或者您应更改您的`Person`类并将方法重命名为`getUserName()`（EL 中 userName 中的 N 大写，但在您的 Person 类中未大写）

# jquery - jQuery 动画不透明度错误（移动图像）

> ID：11812268
> 
> 赞同：2
> 
> 时间：2012-08-04T21:56:22.210
> 
> 标签：jquery, google-chrome, animation

我有个问题。在我的网站中，我添加了一个效果：当有人悬停缩略图时，其他人的不透明度会通过 jQuery 动画降低。它在 FF 和 IE 中完美运行，在 Chrome 中存在一个问题：在动画期间，一些缩略图向左或向右移动 1px。

两个示例链接：[first](http://www.simonepomata.com/gallery/2)和[second](http://www.simonepomata.com/)。

这是 jQuery 函数：

```
var GALLERIE = {
thumbHover : function(contenitore){
    var $immagini = $(contenitore).find('img');
    $immagini.parent('a').hover(
    function(){ $immagini.not($(this).find('img')).stop(true).animate({opacity:'0.8'},400)},
    function(){ $immagini.not($(this).find('img')).stop(true).animate({opacity:'1'},400)}
    )
} 
```

};

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T22:28:45.723

我只看第一个例子。

我注意到，即使只是将任何不同于 1 的不透明度设置为 img、父 a、parend td 或事件父 tbody，图像也会发生变化。我还注意到移位仅发生在第一列。第一列有一些奇怪的地方：左上角的图像是 146px x 216px，但它的父级 a 是 147px 宽。第一列中的其他元素也存在相同的差异。当我将左上角的样式更改为

```
position: relative; 
```

左上元素的所有故障都消失了。可以说这个错误与表格单元格的 33% 宽度和块的 ceter-align 有某种联系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T11:46:11.767

为图像添加背景颜色似乎对我来说神奇地解决了这个问题。多么奇怪。请注意，不仅使用 jQuery，当我在 firebug 中将不透明度从 1 更改为 0.99 时，图像会移动（缩小 1px）。

# java - Web 应用程序中的网络摄像头流式传输到 Java 服务器

> ID：11812277
> 
> 赞同：3
> 
> 时间：2012-08-04T21:58:20.243
> 
> 标签：java, streaming, webcam, rtp, rtmp

我正在实施基于面部的网络身份验证系统，并且正在寻找如何通过网络流式传输视频的良好解决方案。我想从用户的网络摄像头获取音频和视频，在用户的浏览器中显示网络摄像头输出，并通过（RTP/RTMP/web 套接字？）将媒体流式传输到我的 JAVA 服务器（或额外的——Tomcat 支持的东西。这会让事情变得更容易）。

经过几个小时的谷歌搜索，我真的很困惑，不知道什么是最干净、最省力的解决方案，此外还支持多个浏览器。我对在客户端使用哪种技术没有任何限制。

我真的对所有提案持开放态度，并为在该主题上有任何经验的任何人寻找关于该主题的意见。

# php - 在 Wordpress 中使用 Timeago jQuery 插件

> ID：11812279
> 
> 赞同：0
> 
> 时间：2012-08-04T21:58:30.700
> 
> 标签：php, jquery, html, wordpress

我正在尝试将 timeago jQuery 插件与自定义 wordpress 主题构建集成以显示帖子的发布时间。

由于主题是使用 HTML5 构建的，timeago 要求插入的代码看起来像这样：

```
<time class="timeago" datetime="2008-07-17T09:24:17Z"></time> 
```

显然，简单地使用`<?php the_time() ?>`是行不通的，因为时间必须如上所述格式化。

非常感谢您对此的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T08:02:17.477

对于那些对解决方案感兴趣的人：

我实际上删除了插件并将其添加到我在 Wordpress 中的 functions.php 文件中，

```
function time_ago( $type = 'post' ) {
$d = 'comment' == $type ? 'get_comment_time' : 'get_post_time';
return human_time_diff($d('U'), current_time('timestamp')) . " " . __('ago'); 
```

}

这样就行了！好的，它不会实时更新，但每次页面刷新对我来说已经足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T22:57:26.517

老问题，但我刚刚找到了解决方案，所以对于那些仍然感兴趣的人......

`<time class="timeago" datetime="2008-07-17T09:24:17Z"></time>`

成为您的 WP 主题

`<time class="timeago" datetime="<?php echo get_the_date('Y-m-d\TH:i\Z'); ?>"></time>`

托马斯

# jquery - Jquery Change Image on selections on ajax html changes

> ID：11812281
> 
> 赞同：0
> 
> 时间：2012-08-04T21:58:42.907
> 
> 标签：jquery, dom, refresh, selection

I am trying to change product images when different colors are selected. 当我使用直接 HTML 时，我的 jQuery 代码可以正常工作，但是当我尝试使用 Ajax 所做的选择更改图像时，只有第一个选择有效。似乎我的 jQuery 只读取初始 html 而不是初始加载后所做的更改。我认为这`.on`将处理更新的 html，但我似乎遗漏了一些东西。任何指导将不胜感激。

```
jQuery(window).load(function(){
  var data = {
   "1" : { img: "/test.png" },
   "2" : { img: "/test_1.png" },
   "3" : { img: "/test_2.png" },
  };
   jQuery('[name*="Color"]').on('change',function() {
var value = jQuery(this).val();
if (data[value] != undefined)
{
    jQuery('#product-image').attr('src', data[value].img);        
}
 });}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T02:13:47.470

我能够使用 Brandon Aaron 的 livequery 插件来完成我想做的事情。我的印象是 livequery 插件只适用于旧版本的 jQuery 原来我错了它适用于 1.7.1 仍然不知道为什么`.on`不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T02:19:34.007

在将新节点插入文档后，您需要重做事件绑定。尝试插入代码：

```
jQuery('[name*="Color"]').on('change',function()... 
```

在加载函数回调中。

**编辑：**

我现在意识到您在窗口文档中注册了一个加载事件...您做错了...您需要加载新节点，插入它们并注册它们的事件。

您需要执行以下操作：

```
$( "#idOfTheElementThatWillContainTheNewNodes" ).load(
    "url to obtain the code to be inserted",
    { param1: value1, ..., paramN : valueN }, // parameters to be sent to the server (if any)
    function( responseText, textStatus, xmlHttpRequest ) {    // this is the load callback. it will run after the request is complete
        // ok, the responseText was inserted in "idOfTheElementThatWillContainTheNewNodes" container.
        // now you do register your events...
    }
); 
```

看看文档：[http ://api.jquery.com/load/](http://api.jquery.com/load/)

我为你创建了一个例子，看看：http: [//jsfiddle.net/davidbuzatto/zuFsc/](http://jsfiddle.net/davidbuzatto/zuFsc/)

# c++ - 使基类指针的行为类似于 C++ 中的派生类

> ID：11812283
> 
> 赞同：4
> 
> 时间：2012-08-04T21:58:50.987
> 
> 标签：c++, inheritance, pointers

如果我从我的 Shape 基类中创建一个指针，我将如何让它表现得像圆（派生）类？这是我的类定义：

```
 //CShape.h class definition
    //Shape class definition
    #ifndef CSHAPE_H
    #define CSHAPE_H

    class CShape
    {
    protected:
        float area;
        virtual void calcArea();
    public:
        float getArea()
        {
            return area;
        }
    };

    class CCircle : public CShape
    {
    protected:
        int centerX;
        int centerY;
        float radius;
        void calcArea()
        {
            area = float(M_PI * (radius * radius));
        }
    public:
        CCircle(int pCenterX, int pCenterY, float pRadius)
        {
            centerX = pCenterX;
            centerY = pCenterY;
            radius = pRadius;
        }
        float getRadius()
        {
            return radius;
        }
    }; 
```

在我调用这些对象的项目文件中，我有以下代码：

```
 CShape *basePtr = new CCircle(1, 2, 3.3);
            basePtr->getRadius(); 
```

在我看来这应该可行，但是我被告知 CShape 没有成员“getRadius()”。

编辑根据下面的响应，我尝试将 basePtr 对象动态转换为 CCircle，如下所示：

```
CCircle *circle = new CCircle(1, 2, 3.3);
basePtr = dynamic_cast<CCircle *>(circle); 
```

然而，这也失败了。我从未做过 dynamic_cast 并且不熟悉 C++ 中的大部分语法，因此非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T23:25:55.543

你可能会小心演员表。首先`dynamic_cast`s 增加了检查指针类型的运行时开销（参见*rtti*）。`static_cast`s 便宜很多但不检查对象的动态类型。

向下转型是您的设计*可能（！）有问题的指标。*情况并非总是如此，但尤其是如果您正在学习 C++ OOP，请尽量避免使用它们。

由于添加 a 没有意义`getRadius`（`CShape`仅仅是因为并非所有形状都有半径），处理 a 的函数`CShape*`不应该依赖对象是 a `CCircle`。

例如，您可能正在尝试确定形状的面积。这可能对所有形状都有意义，因此您将添加一个`virtual`抽象函数来计算形状的面积。然后你的圆将通过使用它的半径来实现这一点，通过使用它的边长的乘积来实现一个矩形等等。

* * *

编辑：了解原因

```
CShape *basePtr = new CCircle(1, 2, 3.3);
basePtr->getRadius(); 
```

不能工作，你必须明白 C++ 是强类型的。在第二行中，您试图访问一个名为`getRadius`from的成员`CShape`。该类（也不是它的任何父类）没有这样的成员。确实（当您的程序运行时）变量`basePtr`指向类型的对象`CCircle`，但在编译时无法知道（在一般情况下）。因此，C++ 甚至不需要检查派生类型，因为（同样，通常）它根本不能。编译这一行时，它甚至可能不*知道*所有派生类型，因此它没有机会理解你的意思。

就编译器而言，`basePtr`可能指向一个没有成员的类型的*对象*`getRadius`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T22:01:32.057

要`getRadius`发挥作用，您必须声明它的类型`CCircle`：

```
 CCircle *basePtr = new CCircle(1, 2, 3.3);
        basePtr->getRadius(); 
```

否则，如果您想声明`basePtr`为`CShape`，请使用动态绑定`dynamic_cast`或直接使用 c 样式转换，正如@Janisz 指出的那样。

```
 CShape *basePtr = new CCircle(1, 2, 3.3);
       CCircle *child
       // choose one of the two ways, either this:
       child = (CCircle*)basePtr; // C-style cast
       // or this:
       child = dynamic_cast<CCircle*>(basePtr); // C++ version
       child->getRadius(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T22:09:24.190

您可以从 CShape 到 Circle进行静态转换 ( [http://www.cplusplus.com/doc/tutorial/typecasting/ )](http://www.cplusplus.com/doc/tutorial/typecasting/)

或者，您可以在 CShape 中将 getRadius() 声明为一个虚函数，鉴于类的名称，您可能不想这样做。

# css - 除了最新版本的 Chrome 之外，CSS 选项卡不会显示在任何其他内容中

> ID：11812285
> 
> 赞同：0
> 
> 时间：2012-08-04T21:59:52.470
> 
> 标签：css

我试图弄清楚为什么这些选项卡除了我正在使用的最新版本的 Chrome (21) 之外没有显示。

我认为这可能与`after`标签有关，但这应该适用于大多数主要浏览器（IE8+），根据：[quirksmode](http://www.quirksmode.org/css/contents.html)

CSS：

```
ul {
    list-type: none;
}

li {
    cursor: pointer;
    display: inline-block;
    max-height: 46px;
    padding: 14px 10px 0 14px;
    -moz-border-radius-topleft: 5px;
    -webkit-border-top-left-radius: 5px;      
    border-top-left-radius: 5px;
}

li.dark_green {
    background: url(http://i.imgur.com/49NPN.png) repeat-x;
    position: relative;
    color: #fff;
}

li.dark_green:after {
    background: url(http://i.imgur.com/ggxKy.png) repeat-x;
    content: " ";
    display: inline-block;
    width: 66px;
    position: relative;
    height: 46px;
    display: block;
    z-index: 400;
    left:50px;
    bottom:32px;
}

li.light_green {
    background: url(http://i.imgur.com/CRuk8.png) repeat-x;
    position: relative;
}

li.light_green::after {
    background: url(http://i.imgur.com/K7DAL.png) no-repeat;
    content: " ";
    display: inline-block;
    width: 66px;
    position: relative;
    height: 46px;
    display: block;
    z-index: 400;
    left:50px;
    bottom:32px;
}

.text {
    position: relative;
    left: 10px;
    z-index: 500;
}
.light_green_text {
    position: relative;
    left: 20px;
    z-index: 500;
} 
```

HTML：

```
<ul>
    <li class="light_green"><span class="text">Symptoms</span></li>
    <li class="dark_green active"><span class="light_green_text">Problems</span></li>
    <li class="light_green"><span class="light_green_text">Behavior</span></li>
</ul>​
​ 
```

演示：

[http://jsfiddle.net/someprimetime/6F4MC/7/](http://jsfiddle.net/someprimetime/6F4MC/7/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T22:20:37.773

[http://imgur.com/](http://imgur.com/)阻止对您的四个图像的访问，当它们加载了[http://fiddle.jshell.net的](http://fiddle.jshell.net)[引用](http://en.wikipedia.org/wiki/HTTP_referer)时。您可以在开发人员工具的网络选项卡中看到响应。直接加载图像后（在单独的选项卡中打开它们的 url），将使用缓存的版本，可以在您的小提琴演示中看到。`403 Forbidden`

![未加载图像的示例](../Images/d5063535412844f483bf44f983ee854a.png)

不确定为什么它在您的 Chrome 中有效，它可能被设置为不发送推荐人。看看你的喜好。

更新：我已经提交[了](http://imgur.userecho.com/topic/120841-403-forbidden-on-jsfiddlenet/)关于这个主题的报告。

# git - Git 中的分支与新项目

> ID：11812286
> 
> 赞同：3
> 
> 时间：2012-08-04T21:59:55.467
> 
> 标签：git

在为几个不同的平台（例如 OS X、linux 和 Cygwin）设置点文件存储库时，最好为每种机器类型创建分支，还是使用单独的项目？

许多文件将相同，但有些文件会有细微差别。

我尝试从我的主人创建分支，但推送到远程仓库会导致以下情况：

```
Your branch and 'master' have diverged,
and have 4 and 1 different commit(s) each, respectively. 
```

我不明白为什么我的“Cygwin”分支报告它与 master 不同步。它是一个分支——它应该与 master 不同。

实现我的目标的最佳实践的任何建议。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T23:31:52.160

该`diverged`消息意味着您有一个*跟踪*的分支。您可以禁用跟踪，请参见[此处](https://stackoverflow.com/questions/3046436)。

但是，我不认为您使用分支进行多平台构建的方式是正确的。如果您将通过代码分隔依赖于平台的内容会更好，例如通过使用条件`#include`s、`#define`s 或构建脚本。

# ajax - Sencha touch store 和代理问题

> ID：11812290
> 
> 赞同：-1
> 
> 时间：2012-08-04T22:00:16.387
> 
> 标签：ajax, sencha-touch-2, local-storage, store, http-request

像往常一样，我尝试为自己做这件事，我阅读了 sencha touch 2 使用商店的文档，但我无法制作我想要的东西，我需要制作一个快速应用程序来帮助我了解商店的工作方式和代理到 sencha touch，我可以将这个功能添加到我的真实项目中。所以这就是我想要的：

```
Ext.define("ejemplo.view.Main", {
    extend: 'Ext.Panel',

    requires: [
        'Ext.form.FieldSet',
    ],

    config: {
        fullscreen: true,
        scrollable: true,

        items: [
            {
                xtype: 'fieldset',
                title: 'Guardando Data',
                centered: true,

                items: [
                    {
                        xtype: 'textfield',
                        label: 'Nombre',
                    },
                    {
                        xtype: 'button',
                        ui: 'confirm',
                        text: 'Guargar',

                        handler: function(){
                            //Store my data locally
                        }                   
                    }
                ]
            },
            {
                xtype: 'button',
                text: 'Almacen',
                ui: 'action',
                docked: 'bottom',

                handler: function(){
                    //Show the data
                }
            }
        ]
    }
}); 
```

但是，我知道这个快速应用程序可以让所有需要了解如何将数据存储到本地 sencha touch 的人更轻松地完成工作，并且他们可以将这些数据用于我们需要的任何事情。

很简单，如果我制作文件并将此文件放入我的应用程序的路径中，但是当我想在其他设备上运行该应用程序时，此解决方案不起作用。所以，请帮忙

另外，当我制作和获取数据时，我如何从 sencha touch 向我的服务器发出 PUT 请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T22:17:11.107

```
Ext.Ajax.request({
    url : '/your/request/to/server/url',
    method : 'GET', // You can set also method: 'PUT' (answer for 2nd question)
    params : { // your params you want to send 
        user: 'Alexis
    },

    success : function(response) {
    ...
    },

    failure : function(response) {

    ...
    },
}) 
```

在回调函数中，您可以通过以下方式处理响应

```
if (response.responseText) {
    result = Ext.decode(response.responseText);
} 
```

查看[Sencha 文档](http://docs.sencha.com/touch/2-0/#!/api/Ext.Ajax)了解更多信息

干杯，奥列格

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T18:26:17.317

嗨@Alexis，您可以尝试使用这样的简单示例，因为您了解代理如何工作**`Sencha Touch`**

```
<!DOCTYPE html>
<html lang="en">
<head>
<title>Whatever</title>

      <link rel="stylesheet" href="sencha-touch/resources/css/sencha-touch.css" type="text/css" media="screen" />

     <script src="sencha-touch/sencha-touch.js" type="text/javascript"></script>
     <script type="text/javascript">
           Ext.onReady(function() {
                Ext.Ajax.request({
                      url: 'your_file_url',
                      params: {
                           format: 'json',
                      },
                      success: function(response, opts) {
                            var info = Ext.util.JSON.decode(response.responseText)
                            alert(info)
                            console.dir(info)
                            console.log('Response:-:-:-: ' + response.responseText)
                     },
                     failure: function(response) {
                            ...
                     },
                })
           })
    </script>
</head>
<body>
</body>
</html> 
```

上面的代码是一个请求 JSON 文件的简单文件，这个代码你可以使用`handler: function() { ... }`到**`xtype: button`**.

**更新**

只放入`url: ''`文件名，例如`myFileJson.json`或`myFileJson.php`或任何有效的扩展名。:)

如果您有问题，请告诉我。

**我希望能帮助你。:)**

# xcode - 更改视图控制器时是否有任何代码运行？

> ID：11812292
> 
> 赞同：1
> 
> 时间：2012-08-04T22:00:41.160
> 
> 标签：xcode, xamarin.ios

当视图控制器更改时，我可以覆盖任何全局函数吗？

就像在应用程序委托中一样？

我正在使用单点触控，我想为每一页更改我的导航栏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T10:29:11.010

我并不完全清楚你到底想做什么。如果只是为显示的每个视图更改导航栏，您可以从每个视图控制器访问“this.NavigationController”。只要它们共享相同的 UINavigationController，您就可以更改相同的导航栏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T12:02:07.003

这里有几个例子可以帮助你。

您可以在以下位置执行这些操作`ViewDidLoad()`：

*   设置`Title`在控制器上设置标题栏的文字
*   设置`NavigationBar.RightBarButtonItem`或`NavigationBar.LeftBarButtonItem`向工具栏添加附加按钮
*   设置`NavigationBar.TintColor`更改栏的颜色

如果您在其中执行这些操作，`ViewDidLoad`它将为您需要设置的每个屏幕或“控制器”执行此操作。

如果您提到您具体需要哪个功能，我们可以为您提供更多帮助。

# json - Grails - 将 JsonArray 绑定到 Collection 属性

> ID：11812298
> 
> 赞同：1
> 
> 时间：2012-08-04T22:01:26.883
> 
> 标签：json, rest, grails-2.0, grails-controller

我有一个 REST 控制器，它需要 JSON 格式的复杂对象。

假设 A.class 与 B.class 的集合有关联。

```
class A {
    private List<B> values;
    ...
}

class B {
    private String name;
    ... 
} 
```

简化的控制器如下所示：

```
def create(){
    def jsonObject = request.JSON;
    A a = new A(jsonObject);
    ....
} 
```

假设，我将以下 JSON 发送到控制器：

```
{"values":[{"name":"test1"},{"name":"test2"}]} 
```

在控制器中，jsonObject 的“values”属性为 JsonArray。我希望 Grails 绑定构造函数为我将 JsonArray“值”绑定到列表“值”，但事实并非如此。在 Spring MVC 中，JacksonMapper 为我完成了这项工作。我喜欢这样的东西。

我是否必须自己手动迭代 JsonArray 并将数组中的项目转换为域对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-03T12:37:56.517

使用 JsonSlurper，读取 json 并迭代并将其设置为域对象。

# graphics - 多边形渐变

> ID：11812300
> 
> 赞同：3
> 
> 时间：2012-08-04T22:01:33.917
> 
> 标签：graphics, polygon, gradient

我正在开发一个使用 Juce 库来显示图形的项目。到目前为止，我一直在使用该库的 API 函数来生成线性和径向渐变，但这是该库支持的仅有的两种类型的渐变。我现在需要生成一种不同类型的渐变，一种遵循正凸多边形的形状。这里的关键词是 REGULAR，意思是一个多边形，所有边的长度相同，所有顶点都位于一个圆上。

对于五边形的情况，这里有一张图片可以更好地显示我想要得到的结果： [http ://www.filterforge.com/wiki/index.php/Polygonal_Gradient](http://www.filterforge.com/wiki/index.php/Polygonal_Gradient)

对于我的应用程序，我希望能够指定具有任意数量边的多边形渐变。（五边形、六边形、八边形等……）

鉴于 API 的限制，我可以产生所需结果的唯一方法是逐像素填充表面矩阵，以数学方式计算每个像素的 R、G、B、A 分量的值。

这是我到目前为止的代码：

```
void render_surface(unsigned char *surface_data,
                    int width, int height, int linestride,
                    int num_vertices, t_rgba *color1, t_rgba *color2)
{
    const double center_x = 0.5 * width;
    const double center_y = 0.5 * height;
    const double radius = 0.5 * MIN(width, height);
    int x, y;

    for (y = height; --y >= 0;) {

        uint32_t *line = (uint32_t *)data;
        data += linestride;

        const double dy = y - center_y;

        for (x = width; --x >= 0;) {

            const double dx = x - center_x;

            double rho = hypot(dx, dy);
            rho /= radius;    // normalize radius 

            // constrain
            rho = CLIP(rho, 0.0, 1.0);

            // interpolate
            double a = color2->alpha + (color1->alpha - color2->alpha) * rho;
            double r = color2->red   + (color1->red   - color2->red  ) * rho;
            double g = color2->green + (color1->green - color2->green) * rho;
            double b = color2->blue  + (color1->blue  - color2->blue ) * rho;

            // premultiply alpha
            r *= a;
            g *= a;
            b *= a;

#if LITTLE_ENDIAN
            *line++ = ((unsigned int)((256.0 * (1.0 - DBL_EPSILON)) * a) << 24) // alpha
                    | ((unsigned int)((256.0 * (1.0 - DBL_EPSILON)) * r) << 16) // red
                    | ((unsigned int)((256.0 * (1.0 - DBL_EPSILON)) * g) <<  8) // green
                    |  (unsigned int)((256.0 * (1.0 - DBL_EPSILON)) * b);       // blue
#else
            *line++ = ((unsigned int)((256.0 * (1.0 - DBL_EPSILON)) * b) << 24) // blue
                    | ((unsigned int)((256.0 * (1.0 - DBL_EPSILON)) * g) << 16) // green
                    | ((unsigned int)((256.0 * (1.0 - DBL_EPSILON)) * r) <<  8) // red
                    |  (unsigned int)((256.0 * (1.0 - DBL_EPSILON)) * a);       // alpha
#endif
        }
    }
} 
```

上面的代码产生了一个径向渐变，与我使用一个 API 函数可以产生的渐变类型相同。然而，这似乎是解决问题的一个很好的起点。

surface_data - 是一个 8 位值矩阵，表示红色、绿色、蓝色和 Alpha 分量的像素强度。

num_vertices - 是我们希望多边形渐变具有的顶点数（在单个圆上等距分布）。

color1 - 渐变的起始颜色。

color2 - 渐变的结束颜色。

我想知道如何以相同的方式填充表面，创建多边形渐变而不是径向渐变。

谢谢你的帮助。

*   路易吉

稍微重新考虑一下这个问题......如果我们将坐标系的原点视为多边形的中心，归结为找到一个方程，使得对于笛卡尔坐标中的任何输入点，输出是到最近的距离多边形的一侧。

我的直觉告诉我，一定有某种封闭形式的解决方案，因为：

对于一个圆圈，

```
rho = sqrt(dx*dx + dy*dy); 
```

给我们到圆心的径向距离，可以将其视为具有无限边的多边形。

对于一个正方形，

```
fmax(fabs(dx), fabs(dy)); 
```

给我们距离正方形最近边的切比雪夫距离，可以将其视为具有 4 个边的多边形。

所以，我认为这两个公式的某种组合应该给出中间案例，这将解决最初的问题。

我完全不按照这些思路思考吗？

*   路易吉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T04:25:21.257

这大概就是我的处理方式......

*   将多边形的中心放置在原点“O”处。
*   对于正多边形的给定段内的给定点“P”，让通过“O”和“P”的线为“Line1”和
*   让通过包含多边形段的外边缘的线为“Line2”
*   找到这两条线的交点“IP”。

现在 P 处的颜色分数由 P 到原点的距离相对于 IP 到原点的距离来定义。

![在此处输入图像描述](../Images/2e24c1d40d5f82d2d594ad702d07dbd4.png)

编辑：我已经实现了上面的算法，这是输出......

![在此处输入图像描述](../Images/4b86c6b378741cf7771179bd370c31d4.png)

Edit2：这是（Delphi）代码

```
const
  vertical: TFloat = 3.4e38;

function Slope(const pt1, pt2: TFloatPoint): single;
begin
  if (pt1.X = pt2.X) then result := vertical
  else result := (pt2.Y - pt1.Y)/(pt2.X - pt1.X);
end;
//---------------------------------------------------------------------------

procedure GetLine(const pt1, pt2: TFloatPoint; out m, b: TFloat);
begin
  m := Slope(pt1, pt2);
  if m = vertical then
    b := pt1.X else
    b := pt1.Y - m * pt1.X;
end;
//---------------------------------------------------------------------------

function GradientColor(const clr1, clr2: TColor32; fraction: TFloat): TColor32;
begin
  if fraction <= 0 then result := clr1
  else if fraction >= 1 then result := clr2
  else
  begin
    TColor32Entry(result).B :=
      trunc(TColor32Entry(clr2).B * fraction + TColor32Entry(clr1).B * (1-fraction));
    TColor32Entry(result).G :=
      trunc(TColor32Entry(clr2).G * fraction + TColor32Entry(clr1).G * (1-fraction));
    TColor32Entry(result).R :=
      trunc(TColor32Entry(clr2).R * fraction + TColor32Entry(clr1).R * (1-fraction));
    TColor32Entry(result).A :=
      trunc(TColor32Entry(clr2).A * fraction + TColor32Entry(clr1).A * (1-fraction));
  end;
end;
//---------------------------------------------------------------------------

function PointInTriangle(const pt, tr1, tr2, tr3: TFloatPoint): boolean;
begin
  result := false;
  if ((((tr1.Y <= pt.Y) and (pt.Y < tr3.Y)) or
    ((tr3.Y <= pt.Y) and (pt.Y < tr1.Y))) and
    (pt.X < (tr3.X - tr1.X) * (pt.Y - tr1.Y) /
    (tr3.Y - tr1.Y) + tr1.X)) then result := not result;
  if ((((tr2.Y <= pt.Y) and (pt.Y < tr1.Y)) or
    ((tr1.Y <= pt.Y) and (pt.Y < tr2.Y))) and
    (pt.X < (tr1.X - tr2.X) * (pt.Y - tr2.Y) /
    (tr1.Y - tr2.Y) + tr2.X)) then result := not result;
  if ((((tr3.Y <= pt.Y) and (pt.Y < tr2.Y)) or
    ((tr2.Y <= pt.Y) and (pt.Y < tr3.Y))) and
    (pt.X < (tr2.X - tr3.X) * (pt.Y - tr3.Y) /
    (tr2.Y - tr3.Y) + tr3.X)) then result := not result;
end;
//---------------------------------------------------------------------------

function GetSegmentIndex(vertex: TFloatPoint; vertices: TArrayOfFloatPoint): integer;
var
  i, highI: integer;
  prev: TFloatPoint;
const
  origin: TFloatPoint = (X: 0; Y: 0);
begin
  highI := high(vertices);
  prev := vertices[highI];
  result := -1;
  for i := 0 to highI do
  begin
    if PointInTriangle(vertex, origin, prev, vertices[i]) then
    begin
      result := i;
      break;
    end;
    prev := vertices[i];
  end;
end;
//---------------------------------------------------------------------------

procedure RegularPolygonFill(bmp: TBitmap32; const origin: TPoint;
  radius: TFloat; vertexCount: integer; InnerColor, OuterColor: TColor32);
var
  i,j,d,q: integer;
  dist1,dist2: TFloat;
  vert, intersetPt: TFloatPoint;
  verts: TArrayOfFloatPoint;
  edgeMs, edgeBs: TArrayOfFloat;
  angle, angleDiff, m, b: TFloat;
  sinAngle, cosAngle: extended;
const
  orig: TFloatPoint = (X: 0; Y: 0);
begin
  if vertexCount < 3 then exit;
  setlength(verts, vertexCount);
  setlength(edgeMs, vertexCount); //edge slopes  (ie y = M*x +b)
  setlength(edgeBs, vertexCount); //edge offsets (ie y = m*x +B)
  angleDiff := pi *2 / vertexCount;
  angle := angleDiff;
  vert.X := radius; //vert used here as prev vertex
  vert.Y := 0;
  for i := 0 to vertexCount -1 do
  begin
    SinCos(angle, sinAngle, cosAngle);
    verts[i].X := cosAngle * radius;
    verts[i].Y := sinAngle * radius;
    GetLine(vert, verts[i], edgeMs[i], edgeBs[i]);
    angle := angle + angleDiff;
    vert := verts[i];
  end;

  d := floor(radius);
  for i := -d to d do
    for j := -d to d do
    begin
      vert := FloatPoint(i,j);
      GetLine(orig, vert, m, b);
      q := GetSegmentIndex(vert, verts);
      if q < 0 then continue;
      //simultaneous equations to find intersection ...
      //y = m * x + b; y = edgeMs[q]* x + edgeBs[q];
      //edgeMs[q]* x + edgeBs[q] = m * x + b;
      //(edgeMs[q] - m) * x = b - edgeBs[q]
      //x = (b - edgeBs[q])/(edgeMs[q] - m)
      if m = vertical then
      begin
        intersetPt.X := b;
        intersetPt.Y := edgeMs[q]* intersetPt.X + edgeBs[q];
      end
      else if edgeMs[q] = vertical then
      begin
        intersetPt.X := edgeBs[q];
        intersetPt.Y := m* intersetPt.X + b;
      end else
      begin
        intersetPt.X := (b - edgeBs[q])/(edgeMs[q] - m);
        intersetPt.Y := m * intersetPt.X + b;
      end;

      //get distances from origin of vert and intersetPt ...
      dist1 := sqrt(vert.X*vert.X + vert.Y*vert.Y);
      dist2 := sqrt(intersetPt.X*intersetPt.X + intersetPt.Y*intersetPt.Y);

      bmp.Pixel[i + origin.X, j + origin.Y] :=
        GradientColor(InnerColor, OuterColor, dist1/dist2);
    end;
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-05T11:55:04.620

> 我的直觉告诉我，一定有某种封闭形式的解决方案

有...

### 分析

为此，我采用了*从中心到六边形边缘的距离*公式（[此处](https://math.stackexchange.com/questions/1210572/find-the-distance-to-the-edge-of-a-hexagon)），并注意到它可以推广到任何多边形。在该特定公式中，`sqrt(3)`使用了常数（我现在将其称为*z*）。该数字相当于多边形中点与其一条边的中点之间的距离与中点与其顶点之一之间的距离之比的**两倍（该距离在单位长度的多边形中为 1）。**

因此，这个常数（`sqrt(3)`用于六边形）由下式给出：

[![在此处输入图像描述](../Images/b80fe09d6366fb354d293191a90a46b6.png)](https://i.stack.imgur.com/cfz0o.png)

我之前描述的这个比率由下式给出：

[![在此处输入图像描述](../Images/5efae4cfe288e5d89071c5ce5d707f05.png)](https://i.stack.imgur.com/GhMWm.png)

注意 2s 抵消了，所以为任何多边形推导这个常数的一般函数是：

[![在此处输入图像描述](../Images/7c64a7bbdbd200d1c74bd2988e06f5e6.png)](https://i.stack.imgur.com/mVY7b.png)

*`SIDES`是多边形边数（例如六边形为 6）*

现在我们简单地将这个常数代入公式中，计算一个点在给定单位长度多边形上的位置与它在单位长度圆上的位置之比：

[![在此处输入图像描述](../Images/6e8e3c052a45fc0fae1e94747a5671c9.png)](https://i.stack.imgur.com/xuUwb.png)

### 例子

下面显示了六边形的结果（因此*SIDES=6*和*z=sqrt(3)*）。对于 θ=30°，我们得到*d*为 0.866，对于 θ=45°（也相当于 θ=15°） ， *d为 0.897。*

请注意，*d*仅正确定义为 0 <= θ <= segmentAngle（由`2PI/SIDES`弧度给出）。

[![在此处输入图像描述](../Images/0c553dc54d29a4ddda54963d810bee27.png)](https://i.stack.imgur.com/Tvyrm.png)

### 执行

现在我们拥有了编写解决方案所需的一切。

以下函数将 2D（像素）坐标映射到 0 到 1 之间的数字；此数字指定每个像素出现在颜色渐变中的哪个点（步骤）。

最终，这与径向梯度非常相似，其中像素和圆中点之间的欧几里德距离用于定义像素的步长。然而，对于多边形梯度，我们希望将像素 (x,y) 和多边形中点之间的欧几里得距离缩放*d*，这样颜色就会被“推”向多边形的边缘（也就是圆的弦）。

在渲染方面，唯一的事情就是将*d*乘以a`denominator`以便多边形以适当的比例渲染。

### 代码

```
public void polygonGradient(colour[][] pixels, Gradient gradient, Vector2 midPoint, float angle, float zoom, int sides) {

    final double z = Math.tan(HALF_PI - (PI / sides)); // z, as derived in answer
    final double SEGMENT_ANGLE = (2 * PI) / sides; // max angle of polygon segment in radians

    angle %= SEGMENT_ANGLE; // mod angle to minimise difference between theta and SEGMENT_ANGLE in loop (less while calls)

    final double denominator = 1 / ((Math.max(pixels.height, pixels.width)) * zoom); // calc here once, not in loop

    double yDist; // y distance between midpoint and a given pixel
    double xDist; // x distance between midpoint and a given pixel

    for (int y = 0, x; y < pixels.height; ++y) {
        yDist = (midPoint.y - y) * (midPoint.y - y);

        for (x = 0; x < pixels.width; ++x) {
            xDist = (midPoint.x - x) * (midPoint.x - x);

            double theta = Math.atan2((midPoint.y - y), (midPoint.x - x));
            theta += (TWO_PI - angle); // TWO_PI - angle, so we rotate clockwise
            theta = Math.abs(theta); // abs() here to simplify while loop 

            // polygon is split into N segments; restrict theta to angle of one segment
            while (theta > SEGMENT_ANGLE) { // effectively modulo (faster than using % operator)
                theta -= SEGMENT_ANGLE;
            }

            final double pointDistance = Math.sqrt(yDist + xDist); // euclidean dist between (x,y) and midpoint

            double d = z * (z * Math.cos(theta) + Math.sin(theta)); // d, as derived in answer

            // now calculate the position of the pixel on the gradient
            double step = d  * denominator * pointDistance; // multiply euclidean distance by d

            if (step > 1) { // clamp to 1
                step = 1;
            }

            pixels[x][y] = gradient.colourAt(step); // get the colour of the gradient at the step given by dist
        }
    }
} 
```

### 输出

边数 = 6

[![在此处输入图像描述](../Images/8a0966a07a067197f3f25a2d9723feb3.png)](https://i.stack.imgur.com/bEB7H.png)

边数 = 9

[![在此处输入图像描述](../Images/00f87135fdfbc0e692fd6daf659b10e1.png)](https://i.stack.imgur.com/twYn7.png)

边数 = 3；放大一点；中点偏离中心

[![在此处输入图像描述](../Images/3482e2870ac1eed93a808c424885236c.png)](https://i.stack.imgur.com/jOZ6E.png)

边数 = 5；非线性颜色插值 [![在此处输入图像描述](../Images/11e7f0933c14d246f537ecbc9ddbe00f.png)](https://i.stack.imgur.com/r9IDD.png)

# ios - 播放音乐错误和相对路径

> ID：11812305
> 
> 赞同：0
> 
> 时间：2012-08-04T22:02:20.853
> 
> 标签：ios, xcode

我正在尝试在我的应用程序中播放 mp3，经过大量研究，我仍然无法弄清楚如何进行相对路径，甚至无法使用绝对路径播放音乐。这就是我所拥有的：

```
//set music
NSError *error;
if (songChosen == 0)
{
    soundPath = @"/Users/aeubanks/Desktop/XCode Stuff/Apps/Game-Storyboard/Game-Storyboard/Amalgamation.mp3";
}
else if (songChosen == 1)
{
    soundPath = @"/Users/aeubanks/Desktop/XCode Stuff/Apps/Game-Storyboard/Game-Storyboard/BUTTERFLY.mp3";
}
audio = [[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:soundPath] error:&error];
if([[NSFileManager defaultManager] fileExistsAtPath:soundPath] == NO)
{
    NSLog(@"No File");
}

else
{
    NSLog(@"Yes File");
}

if(error != nil)
{
    NSLog(@"%@", error);
}
[audio prepareToPlay]; 
```

NSLog 说明了这一点（做好准备）：

> 2012-08-04 15:52:02.415 游戏故事板[8430:10703] 是文件
> 
> 2012-08-04 15:52:02.473 游戏故事板[8430:12303] 加载/System/Library/Extensions/AudioIPCDriver.kext/Contents/Resources/AudioIPCPlugIn.bundle/Contents/MacOS/AudioIPCPlugIn: dlopen(/System/) 时出错库/扩展/AudioIPCDriver.kext/Contents/Resources/AudioIPCPlugIn.bundle/Contents/MacOS/AudioIPCPlugIn，262）：找不到符号：__*CFObjCIsCollectable 引用自：/System/Library/Frameworks/Security.framework/Versions/A/Security 预期在：/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/ System/Library/Frameworks/CoreFoundation.framework/CoreFoundation in /System/Library/Frameworks/Security.framework/Versions/A/Security 2012-08-04 15:52:02.486 Game-Storyboard[8430:12303] 加载/System时出错/Library/Extensions/AudioIPCDriver.kext/Contents/Resources/AudioIPCPlugIn.bundle/Contents/MacOS/AudioIPCPlugIn: dlopen(/System/Library/Extensions/AudioIPCDriver.kext/Contents/Resources/AudioIPCPlugIn.bundle/Contents/MacOS/AudioIPCPlugIn, 262）：未找到符号：_*_CFObjCIsCollectable 引用自：/System/Library/Frameworks/Security.framework/Versions/A/Security 预期在：/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/ System/Library/Frameworks/CoreFoundation.framework/CoreFoundation in /System/Library/Frameworks/Security.framework/Versions/A/Security 2012-08-04 15:52:02.525 Game-Storyboard[8430:12303] 加载 /System 时出错/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn: dlopen(/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn, 262）：未找到符号：__*CFObjCIsCollectable 引用自：/System/Library/Frameworks/Security.framework/Versions/A/Security 预期在：/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/ /System/Library/Frameworks/Security.framework/Versions/A/Security 中的 System/Library/Frameworks/CoreFoundation.framework/CoreFoundation 2012-08-04 15:52:02.546 Game-Storyboard[8430:12303] 加载 /System 时出错/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn: dlopen(/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn, 262）：未找到符号：_*_CFObjCIsCollectable 引用自：/System/Library/Frameworks/Security.framework/Versions/A/Security 预期在：/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/ System/Library/Frameworks/CoreFoundation.framework/CoreFoundation in /System/Library/Frameworks/Security.framework/Versions/A/Security 2012-08-04 15:52:02.570 Game-Storyboard[8430:12303] 加载/System时出错/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn: dlopen(/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn, 262）：未找到符号：__*CFObjCIsCollectable 引用自：/System/Library/Frameworks/Security.framework/Versions/A/Security 预期在：/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/ /System/Library/Frameworks/Security.framework/Versions/A/Security 中的 System/Library/Frameworks/CoreFoundation.framework/CoreFoundation 2012-08-04 15:52:02.582 Game-Storyboard[8430:12303] 加载 /System 时出错/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn: dlopen(/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn, 262）：未找到符号：_*_CFObjCIsCollectable 引用自：/System/Library/Frameworks/Security.framework/Versions/A/Security 预期在：/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/ /System/Library/Frameworks/Security.framework/Versions/A/Security 中的 System/Library/Frameworks/CoreFoundation.framework/CoreFoundation

我还尝试将 soundPath 设置为 @"BUTTERFLY.mp3"/@"Amalgamation.mp3" 以及 @"Game-Storyboard/BUTTERFLY.mp3"/@"Game-Storyboard/Amalgamation.mp3"，我得到了这个：

> 2012-08-04 15:58:55.763 游戏故事板[8470:10703] 无文件
> 
> 2012-08-04 15:58:55.767 Game-Storyboard[8470:10703] 错误域 = NSOSStatusErrorDomain 代码 =-43 “操作无法完成。（OSStatus 错误 -43。）”

我不知道这一切意味着什么，所以我希望能得到一些帮助来解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T22:11:01.620

我会做这样的事情（这是一个片段）：

```
if (songChosen == 0)
{
    NSString *soundFilePath = [[NSBundle mainBundle] pathForResource:@"Amalgamation" ofType:@"mp3"]
    NSURL *soundFileURL = [[NSURL alloc] initFileURLWithPath: soundFilePath];
    NSError *error;
    AVAudioPlayer *aPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:soundFileURL error:&error];
} 
```

我还建议阅读捆绑包。

# c# - MVC3 网站内的作业调度程序

> ID：11812306
> 
> 赞同：2
> 
> 时间：2012-08-04T22:02:24.100
> 
> 标签：c#, asp.net-mvc-3, job-scheduling, quartz.net-2.0

我正在寻找一些指导，以获取在我的 MVC3 网站内部使用的 Job Scheduler 设置。为此，我一直在查看 Quartz.NET，但在网上找到有关设置的指导以确保它在网站运行时运行时遇到了麻烦。

考虑到上述信息。我知道在 IIS 内设置作业调度程序的几个“缺点”。我正在寻找设置的工作是简单的清理工作，其中时间相当不重要，所以如果 IIS 通过并回收网站的线程，它真的不会有什么大不了的。IE。如果由于回收/重新启动网站线程而每天运行 10 次，那很好/如果因为线程没有启动而每月运行一次，那也很好（尽管不太可能）。

我似乎记得关于 SO 的问题或通过 Google 发布的帖子显示在 in 内部进行了设置`Application_Start()`，`Global.asax`但现在无法在任何地方找到此信息。有没有人对如何实现与我所说的类似的东西有任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T23:12:16.000

经过更多搜索后，我在 SO 上发现[**了这个**](https://stackoverflow.com/questions/1356789/how-to-use-quartz-net-with-asp-net)问题，它讨论了在文件中实现 Quartz.NET `global.asax`。

为了实现它，我只是引用了`Quartz.dll`新的（在本文发布时）下载包中的，并使用了以下代码......

```
 protected void Application_Start()
    {
        /*
         * Include other Application_Start() code...
         */

        //Job Scheduling
        try {
            //Setup the new Scheduler
            var sf = new StdSchedulerFactory();
            var sched = sf.GetScheduler();
            sched.Start();

            //Setup the Job
            var jobDetail = new JobDetailImpl( "myJob", null, typeof( DocCleanup ) );

            //Create 1 week trigger that will go on forever
            var trigger = new SimpleTriggerImpl( "jobTrigger", SimpleTriggerImpl.RepeatIndefinitely, new TimeSpan( 168, 0, 0 ) );
            trigger.StartTimeUtc = DateTimeOffset.Now;

            //Add the job to the scheduler
            sched.ScheduleJob( jobDetail, trigger );
        } catch (Exception ex) { //Implement Exception code... }
    } 
```

我不想为这种特殊需要创建控制台应用程序/sql 作业/等。这主要是由于我的问题中提到的可以接受的极端不可靠性。话虽如此，如果您需要任何关于何时运行作业的保证，我怀疑您是否希望以这种方式实现 Quartz.NET。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T22:12:15.553

您可以创建一个控制台应用程序来完成您的清理工作（我不确定您想要进行哪种清理）。您可以使用 Windows 任务计划程序在特定时间间隔内调用此应用程序来完成您的工作

另一种选择是创建将在特定时间间隔执行的 SQL 作业。Job 中的 Stored proc 可以调用托管代码。所以你可以从中调用你的点网代码。

如果只是清理 SQL 表，只需编写一个 SQL 作业即可。

# asp.net-mvc-3 - 如何使 DAL 项目中的连接字符串引用 MVC 3 项目中 APP_DATA 文件夹中的数据库

> ID：11812307
> 
> 赞同：0
> 
> 时间：2012-08-04T22:02:25.077
> 
> 标签：asp.net-mvc-3, frameworks, entity, data-access-layer, edmx

我正在开发一个 MVC 3 项目，并且我也创建了一个 DAL 项目。EDMX 在 DAL 项目中，当然 App.config 中有一个连接字符串（在 DAL 项目中），所以每次我想更新 edmx 它当然是指这个连接字符串。

案例如下，数据库位于MVC 3项目的APP_Data文件夹中，所以我可以更新edmx文件，我必须使用App.config中连接字符串中的物理路径来引用数据库达尔项目。但是我想通过引用 APP_DATA 文件夹来设置连接字符串，这样它就可以更加动态，所以当我将项目移动到另一个位置时我不需要更改它。

那么我如何告诉 DAL 项目数据库位于 MVC 项目的 app_data 文件夹中

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T23:09:31.367

`web.config`您可以在MVC 项目而不是`App.config`DAL 项目中添加连接字符串。

只需`|Data Directory|`在连接字符串中使用来引用`App_Data`文件夹。

# html - 无序列表项目缩进

> ID：11812309
> 
> 赞同：0
> 
> 时间：2012-08-04T22:02:58.560
> 
> 标签：html, css

大家好，我有一个随着屏幕变宽而缩进的有序列表。列表项的每一层都比上一层缩进更多。

任何人都可以帮忙。这是我的代码

```
<div id="left-content">

        <div id="product-header">

            <h1 class="red-text">Gmail</h1>
            <h2>A google approach to email</h2>

        </div>

        <p>Gmail is built on the idea that email can be more intuitive, efficient, and useful. And maybe even fun. After all, Gmail has:</p>

        <ol class="features">
            <li>
                <img src="../IMAGES/google-storage.png" alt="google-storage">
                <p class="features-header">Lots of space</p>
                <p>Over 10275.525924 megabytes (and counting) of free storage.</p>
            </li>
            <li>
                <img src="../IMAGES/google-cancel.png" alt="google-cancel">
                <p class="features-header">Less spam</p>
                <p>Keep unwanted messages out of your inbox.</p>
            </li>
            <li>
                <img src="../IMAGES/google-mobile.gif" alt="google-mobile">
                <p class="features-header">Mobile access</p>
                <p>Get Gmail on your mobile phone.<a href="#">Learn more</a></p>
            </li>
        </ol>

    </div><!--  "left-content -->

 #product-header{
    margin-bottom: 1.225em;
}

#main-content{
    padding: 2em;
    width: 80%;
    margin: 0 auto;
}

#left-content{
    width: 45%;
    min-width: 18.75em;
}

#left-content p{
    font-size: .8125em;
}

.red-text{
    color: red;
}

.features li{
    margin: 0.625em 2.5em 1.25em 0;
}

.features img{
    float: left;
    margin: 0 1em 1em 0;
}

.features-header{
    font-size: : .875em;
    margin-bottom: .3em;
} 
```

我已将其缩小到#left-content p 上的字体大小。

感谢任何能提供帮助的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T22:16:48.580

不想要的行为可能是由于浮动图像的高度略大于文本。

尝试添加`clear: both`到`.features li`：

```
.features li{
    clear: both;
    margin: 0.625em 2.5em 1.25em 0;
} 
```

您可以在这里找到一个非常紧凑的示例：http: [//jsfiddle.net/urE23/](http://jsfiddle.net/urE23/)

# c++ - 如何从 gcc 内联 arm7 程序集中调用 c++ 成员函数

> ID：11812314
> 
> 赞同：0
> 
> 时间：2012-08-04T22:04:20.503
> 
> 标签：c++, gcc, assembly, arm

我有以下适用于 x86 的代码，我需要将其转换为 gcc/arm7 内联汇编。

似乎替换堆栈只是将堆栈指针移入`r15`而不是 的简单问题`esp`，但我不知道如何调用该函数，或将实际变量放入 arm 汇编代码中。

```
Object *c;

unsigned long _stack = (unsigned long)c->stack + 65535;
void (Object::*_run)() = &Object::_run;

__asm
{
    mov ecx, _this // store pointer to this Object
    mov edx, _run  // store address of _run() function
    mov esp, stack // replace stack pointer with Object's internal stack
    call edx       // call the _run() function
} 
```

**编辑：**

到目前为止，我有这个：

```
unsigned long _stack = (unsigned long)c->stack + 65535;
void (Object::*_run)() = &Object::_run;

asm volatile("mov %[__this], %r0\n\t"
             "mov %[__run], %r5\n\t"
             "mov %[__stack], %%sp\n\t"
             "blx %r5\n\t"
             : /* no output operands */
             : [__stack] "r" (_stack), 
               [__this] "r" (_this), 
               [__run] "r" (_run)
             : /* no clobbers */); 
```

问：在 x86 asm 中，使用 thiscall 调用约定，“this”指针进入 ecx。它在哪里？

**编辑：**

A：[`For C++, an implicit this parameter is passed as an extra argument that immediately precedes the first user argument. Other rules for marshalling C++ arguments are described in CPPABI.`](http://infocenter.arm.com/help/topic/com.arm.doc.ihi0042d/IHI0042D_aapcs.pdf)

**编辑：**

我正在尝试做的事情的完整实现在这里： http: [//pastebin.com/6mrUC7td](http://pastebin.com/6mrUC7td)

它在视觉工作室中完美运行，但我无法让它在 XCode/iOS 中正常运行

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T09:58:45.413

[arm abi](http://infocenter.arm.com/help/topic/com.arm.doc.ihi0042b/IHI0042B_aapcs.pdf)指定`r0`用于`r3`参数传递的寄存器。`this`指针总是在第一个寄存器中，这将是`r0`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T10:04:27.403

对于 gcc 内联汇编器中的任何东西都不是特别安全`call`，因为没有办法告诉编译器它（对 gcc 内联 asm 指令没有*约束*可以表示“这个东西包含一个函数调用，做所有必要的保存/恢复你保留的任何内容在进行函数调用时可能会更改的寄存器中”）。

理论上，您可以通过提供一个 clobber 列表来“手动”执行此操作，该列表指定在根据平台 ABI 进行函数调用时*可能*更改的所有寄存器（在 ARM 上很多，我认为几乎所有这些寄存器都不包括`sp`......） . 但是这样做经常会导致 gcc 告诉您无法满足约束的情况（即它没有任何寄存器可以将“需要保留的东西”填充到其中），具体取决于使用内联汇编的上下文。

为什么你需要从内联程序集中调用一个函数？难道你不能使用一个`static inline`函数来代替普通的 C 代码（它执行函数调用）和内联汇编来完成只能在内联汇编中完成的事情吗？

如果*整个*函数只是内联汇编，ARM 上的 gcc 提供了一个出路——即`__attribute__((naked))`选项。这告诉编译器不要为其创建函数序言/结语，您有义务自己编写这些，即添加保存/恢复此函数使用但声明由 EABI 保留的寄存器的代码。通过将执行函数调用的内联程序集“外包”到`static inline __attribute__((naked))`函数中，您可以避免必须指定大量的clobber列表，因为编译器会识别出它是一个函数调用（并根据需要在它周围保留/恢复，即使在内联代码时也是如此）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T11:07:34.737

获取 ABI 所需信息的简单解决方案（例如在哪些寄存器中获取传递的值）：只需编写几行调用 c++ 方法的虚拟代码，然后反汇编结果（在您的目标平台上）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-05T10:50:52.683

我不太确定你在用那里的堆栈指针做什么 - 这是你在 ARM 上不需要的 x86 习惯用法，还是你故意尝试设置一个新的堆栈指​​针？

在任何情况下，堆栈指针都在`r13`- 程序计数器是`r15`-`LDR`或`MOV`进入`PC`分支。在函数序言之外，SP 已经指向堆栈上的下一个位置，因此如果由于寄存器不足而需要在堆栈上传递参数时，您只需要修改它`r0-r3`- 这不是这里的情况。

如果您确实修改了堆栈指针，则需要在函数调用后恢复它，否则在退出函数时会出现一个不错的小崩溃。

最后，您需要将 ARM [E]ABI 允许被调用者在函数调用上修改的所有寄存器声明为已破坏。这是`r0-r3`, `r9`{也许} 和`r12`。

如果您在 iOS 上执行此操作，ISTR 会在寄存器使用方面存在细微差异。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-05T00:51:10.253

看看[这个](http://www.ethernut.de/en/documents/arm-inline-asm.html)。虽然它使用 x86 程序集，但同样适用于 arm 程序集。

# c++ - 构造函数初始化列表中的数组

> ID：11812317
> 
> 赞同：1
> 
> 时间：2012-08-04T22:04:32.060
> 
> 标签：c++, arrays, constructor, initialization, initialization-list

我试图弄清楚如何在构造函数的初始化列表中声明一个任意大小的数组。如果这是不可能的，我应该怎么做？

例如：

```
class vectorOfInt
{
public:

private:
    int _size;
    int _vector[];
};

vectorOfInt::vectorOfInt()
    :_size(32),
    _vector(size)
{
} 
```

基本上，我希望将数组 _vector 初始化为大小（在本例中为 32）。我怎么做？感谢您的任何意见。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T22:05:23.960

使用`std::vector`：

```
#include <vector>

class vectorOfInt
{
public:

private:
    int _size; // probably you want to remove this, use _vector.size() instead.
    std::vector<int> _vector;
};

vectorOfInt::vectorOfInt()
    :_size(32),
    _vector(size)
{
} 
```

**编辑**：由于您不想使用`std::vector`，您必须自己处理内存。如果您在编译时知道数组的大小，则可以使用内置数组，但我怀疑情况是否如此。您必须执行以下操作：

```
#include <memory>

class vectorOfInt
{
public:

private:
    int _size;
    // If C++11 is not an option, use a raw pointer.
    std::unique_ptr<int[]> _vector;
};

vectorOfInt::vectorOfInt()
    :_size(32),
    _vector(new int[size])
{
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T22:10:43.603

你想要的是使用一个向量，然后使用'reserve'关键字。这将为 32 个元素分配空间，您可以将它们初始化为您想要的任何内容。

```
#include<vector>
using namespace std;

class vectorOfInt
{
public:

private:
      int _size;
      vector<int> _vector;

vectorOfInt()
{
    _size = 32;
   _vector.reserve(32);

}

}; 
```

# node.js - convert：不符合要求的绘图图元定义

> ID：11812318
> 
> 赞同：0
> 
> 时间：2012-08-04T22:04:33.527
> 
> 标签：node.js, imagemagick

为什么我会得到：

```
convert: non-conforming drawing primitive definition `circle 15,15 15,1' @ error/draw.c/DrawImage/3143. 
```

执行此 ImageMagick 代码时？

```
var fs = require('fs');
var spawn = require('child_process').spawn;

var bg = function (size) {

  var args = ['-size', '30x30', 'xc:none', '-fill', '-', '-draw', '"circle 15,15 15,1"', '-'];
  var convert = spawn('convert', args);
  convert.stderr.on('data', function (data) { console.log(data.toString()); });
  convert.stdin.pipe = convert.stdout.pipe.bind(convert.stdout);
  return convert.stdin;

};

module.exports = bg; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T08:05:27.280

那这个呢

```
 var args = ['-size', '30x30', 'xc:none', '-draw', '"circle 15,15 15,1"', '-']; 
```

它有效吗？

我建议这样做是因为命令行

```
convert -size 30x30 xc:none         -draw "circle 15,15 15,1" out.png 
```

会工作，但我从你的代码中读到的那个：

```
convert -size 30x30 xc:none -fill - -draw "circle 15,15 15,1" out.png 
```

将不会....

# objective-c - 为什么 [dict valueForKey:@"@"] 会导致 SIGABRT？

> ID：11812320
> 
> 赞同：1
> 
> 时间：2012-08-04T22:04:40.953
> 
> 标签：objective-c, macos

> **可能重复：**
> [如果键启动 @ 符号，则在 NSDictionary 上使用 valueForKeyPath？](https://stackoverflow.com/questions/1567850/using-valueforkeypath-on-nsdictionary-if-a-key-starts-the-symbol)

错误：

```
Terminating app due to uncaught exception 'NSUnknownKeyException', reason:
'[<__NSDictionaryI 0x100110e00> valueForUndefinedKey:]:
this class is not key value coding-compliant for the key .' 
```

示例代码：

```
NSDictionary *dict = @{ @"foo": @"bar" };

NSLog(@"foo=%@, qaz=%@", [dict valueForKey:@"foo"], [dict valueForKey:@"qaz"]);
NSLog(@"@=%@", [dict valueForKey:@"@"]); // SIGABRT 
```

~~使用时也会发生这种情况`[dict objectForKey:@"@"]`。~~

即使定义了“@”键，它仍然会导致`SIGABRT`：

```
NSDictionary *dict = @{ @"@": @"at-sign" };
NSLog(@"@=%@", [dict valueForKey:@"@"]); // SIGABRT 
```

为什么会发生这种情况，如何从字典中检索“@”键的值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-04T22:09:05.177

你应该`objectForKey:`在尝试访问字典中的对象时使用，`valueForKey:`and`valueForKeyPath:`方法适用于 KVC，并且对它们的命名有一些限制。使用`[dict objectForKey:@"@"]`将工作并返回`(null)`或返回`at-sign`您的示例。

# objective-c - 多线程程序算法

> ID：11812322
> 
> 赞同：0
> 
> 时间：2012-08-04T22:04:59.700
> 
> 标签：objective-c, concurrency, grand-central-dispatch

我在[Project Euler #22](http://projecteuler.net/problem=22)上工作，并在大约 9.6 毫秒内得到了我的解决方案。这是我所拥有的：

```
#import <Foundation/Foundation.h>

NSUInteger valueOfName(NSString *name) {
    NSUInteger sum = 0;
    for (int i = 0; i < [name length]; i++) {
        unichar character = [name characterAtIndex:i];
        sum += (character - 64);
    }
    return sum;
}

int main(int argc, const char * argv[]) {
    @autoreleasepool {
        CFAbsoluteTime currentTime = CFAbsoluteTimeGetCurrent();
        NSMutableString *names = [NSMutableString stringWithContentsOfFile:[@"~/Documents/Developer/Project Euler/Problem22/names.txt" stringByExpandingTildeInPath] encoding:NSASCIIStringEncoding error:nil];
        CFAbsoluteTime diskIOTime = CFAbsoluteTimeGetCurrent();
        [names replaceOccurrencesOfString:@"\"" withString:@"" options:NSLiteralSearch range:NSMakeRange(0, [names length])];
        NSArray *namesArray = [names componentsSeparatedByString:@","];
        namesArray = [namesArray sortedArrayUsingSelector:@selector(compare:)];
        // Marker 1
            int totalScore = 0;
        for (int i = 0; i < [namesArray count]; i++) {
            NSString *name = namesArray[i];
            NSUInteger sum = valueOfName(name);
            NSUInteger position = i + 1;
            totalScore += (sum * position);
        }
        // Marker 2
        CFAbsoluteTime endTime = CFAbsoluteTimeGetCurrent();
        double timeDiff = (endTime - currentTime) * 1000;
        printf("Total score: %d\n", totalScore);
        printf("Disk IO Time: %fms\tTime: %fms\n", ((diskIOTime - currentTime) * 1000), timeDiff);
    }
    return 0;
} 
```

这是一个好时机，但我开始思考如何通过使用多个线程来使其更快。使用四核 CPU，理论上我应该能够在单独的线程上处理四分之一的名称，然后从那里得到总数。这是我尝试过的（替换上面标记之间的代码）：

```
__block int totalScore = 0;
        int quarterArray = [namesArray count] /4 ;
        typedef void(^WordScoreBlock)(void);
        WordScoreBlock block1 = ^{
            for (int i = 0; i < quarterArray; i++) {
                NSString *name = namesArray[i];
                NSUInteger sum = valueOfName(name);
                NSUInteger position = i + 1;
                totalScore += (sum * position);
            }
            printf("Total score block 1: %d\n", totalScore);
        };
        WordScoreBlock block2 = ^{
            for (int i = quarterArray; i < (quarterArray * 2); i++) {
                NSString *name = namesArray[i];
                NSUInteger sum = valueOfName(name);
                NSUInteger position = i + 1;
                totalScore += (sum * position);
            }
        };
        WordScoreBlock block3 = ^{
            for (int i = (quarterArray * 2); i < (quarterArray * 3); i++) {
                NSString *name = namesArray[i];
                NSUInteger sum = valueOfName(name);
                NSUInteger position = i + 1;
                totalScore += (sum * position);
            }
        };
        WordScoreBlock block4 = ^{
            for (int i = (quarterArray * 3); i < [namesArray count]; i++) {
                NSString *name = namesArray[i];
                NSUInteger sum = valueOfName(name);
                NSUInteger position = i + 1;
                totalScore += (sum * position);
            }
        };
        dispatch_queue_t processQueue = dispatch_queue_create("Euler22", NULL);
        dispatch_async(processQueue, block1);
        dispatch_async(processQueue, block2);
        dispatch_async(processQueue, block3);
        dispatch_async(processQueue, block4); 
```

但是，我得到的结果为 0，但我的时间快了大约一毫秒。

*   这种多线程方法可行吗？
*   如果是这样，我将如何实施它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T22:48:58.360

首先创建一个*并发*队列，以便您的块并行执行：

```
dispatch_queue_t processQueue = dispatch_queue_create("Euler22", DISPATCH_QUEUE_CONCURRENT); 
```

然后创建一个调度组，将所有块添加到该组，并等待该组完成：

```
dispatch_group_t group = dispatch_group_create();
dispatch_group_async(group, processQueue, block1);
dispatch_group_async(group, processQueue, block2);
dispatch_group_async(group, processQueue, block3);
dispatch_group_async(group, processQueue, block4);
dispatch_group_wait(group, DISPATCH_TIME_FOREVER); 
```

最后：添加到`totalScore`不是原子操作，因此当所有线程并行执行时，您将得到错误的结果。您必须使用原子增量操作，或者让所有线程计算自己的分数并在所有线程完成后添加来自所有线程的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T22:58:46.217

您真的想在计时中加载文件吗？

此外，如果您想同时执行它们，则需要使用并发队列。您正在创建一个串行队列，因此所有块将一个接一个地执行。

```
// Create a concurrent queue
dispatch_queue_t processQueue = dispatch_queue_create("Euler22", DISPATCH_QUEUE_CONCURRENT); 
```

或者，您可以调用 *dispatch_get_global_queue*，并请求一个并发队列。

现在，当您添加任务时，GCD 会将它们分配给可用的工作线程。

现在任务已被外包出去，您需要等待它们完成。这可以通过多种方式实现。如果您使用多个队列，调度组可能是最好的方法。

但是，使用相同的队列，在所有 *dispatch_sync*() 调用之后，您可以放置​​一个屏障块，等待所有先前的块完成，然后运行...

```
dispatch_barrier_async(processQueue, ^{
    // We know that all previously enqueued blocks have finished, even if running
    // concurrently.  So, we can process the final results of those computations.
}); 
```

但是，在这种情况下，我们使用的是一个队列（虽然是并发的，但它会同时执行多个任务......尽管它会按照它们入队的顺序从队列中拉出）。

可能最简单的方法是使用 *dispatch_apply*，因为它就是为这个目的而设计的。您多次调用同一个块，并传入一个索引。该块获取索引，您可以使用它来对数据数组进行分区。

**编辑**

好的，尝试对您的特定问题使用 apply （以您的块代码为例......我假设它可以满足您的需求）。请注意，我只是输入了它（这里也没有突出显示语法），所以你可能需要稍微玩一下才能让它编译......但它应该给你一个大致的想法）。

```
// You need to separate both source and destination data.
size_t const numChunks = 4; // number of concurrent chunks to execute
__block int scores[numChunks];
size_t dataLen = [namesArray count];
size_t chunkSize = dataLen / numChunks; // amount of data to process in each chunk
dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0);
dispatch_apply(numChunks, queue, ^(size_t index) {
    // GCD will schedule these tasks concurrently as best as possible.
    // You know the current iteration index from the parameter.
    size_t beginIndex = index * chunkSize; // beginning of chunk
    size_t endIndex = beginIndex + chunkSize; // one past end of chunk
    if (endIndex > dataLen) endIndex = dataLen;
    int score = 0;
    for (size_t i = beginIndex; i < endIndex; ++i) {
        NSString *name = namesArray[i];
        NSUInteger sum = valueOfName(name);
        NSUInteger position = i + 1;
        score += (sum * position);
    }
    scores[index] = score;
});

// Since dispatch_apply waits for all bucks to complete, by the time you
// get here you know that all the blocks are done.  If your result is just
// a sum of all the individual answers, sum them up now.
int totalScore = 0;
for (size_t i = 0; i < numChunks; ++i) {
    totalScore += scores[i];
} 
```

希望这是有道理的。如果你让它工作，请告诉我。

现在，如果您遇到真正需要数学性能的情况，您应该研究 Accelerate 框架。一个词。惊人的。

# java - JPanel 中的 JPanel 在不同位置被绘制两次

> ID：11812324
> 
> 赞同：1
> 
> 时间：2012-08-04T22:05:10.660
> 
> 标签：java, swing, custom-component, paintcomponent, jcomponent

我目前正在为一个新游戏用java创建一些自定义UI。我现在正在创建一个窗口。无论如何，当我创建窗口（作为 a `JPanel`）并在该窗口之上添加另一个主面板时，对于主要内容，主面板在两个不同的位置绘制两次，正确的位置，一次在左上角。如图所示：

![JPanel 的图像在不同位置绘制了两次](../Images/0d34a4c0543a5d22fdc005fce0f13608.png)
中心按钮是正确的，并且位于正确的位置，而左上角不是。黑色是主面板的背景。

这是我要创建的窗口的代码：

```
package gui.elements;

import graphic.CutSprite;
import graphic.SpriteStorage;
import gui.CFont;

import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;

import javax.swing.JPanel;

public class CWindow extends JPanel {
    private static final long serialVersionUID = 1L;

    // The main panel, on which components in the window are to be placed
    private JPanel panel;

    private String title;

    public CWindow(String title) {
        this(title, 380, 380);
    }

    public CWindow(String title, int width, int height) {
        this.title = title;

        // Place the main panel of the window
        panel = new JPanel();
        panel.setBackground(Color.BLACK);
        add(panel);
    }

    @Override
    public void paintComponent(Graphics graphics) {
        super.paintComponents(graphics);
    }

    public JPanel getPanel() {
        return panel;
    }

} 
```

这`CWindow`是实例化和添加的框架：

```
package gui;

import java.awt.Color;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;

import gui.elements.CWindow;

public class Screen {

    private static Screen single = new Screen();
    public static Screen get() { return single; }

    private JFrame frame;
    private PanelManager panelManager;
    private ScreenCanvas screenCanvas;

    /**
     * Constructor, set the window, and initialize the game.
     */
    public Screen() {
        frame = new JFrame("Game");

        // Frame (window) settings
        frame.setSize(860, 540);
        frame.setLocationRelativeTo(null); //Open window in center of screen
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        CWindow w = new CWindow("This is a window!");
        frame.add(w);

        JButton tf9 = new JButton("Dunno?");
        w.getPanel().add(tf9);

        // Display the window
        frame.setVisible(true);
    }

    /**
     * @return the height of the screen
     */
    public static int getHeight() {
        return get().frame.getHeight();
    }

    /**
     * @return the width of the screen
     */
    public static int getWidth() {
        return get().frame.getWidth();
    }

    /**
     * @param args
     */
    public static void main(String[] args) {
        Screen.get();
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T22:14:28.053

好的，找到并回答，够奇怪的。发布后 6 分钟 xD 尴尬。

好的，所以问题出`super.paintComponents(graphics);`在 CWindow 类中的以下代码中

```
@Override
public void paintComponent(Graphics graphics) {
    super.paintComponents(graphics);
} 
```

不知道为什么，但是当我删除该行时它起作用了。

# css - 无法让我的 div 正确对齐

> ID：11812331
> 
> 赞同：0
> 
> 时间：2012-08-04T22:06:28.003
> 
> 标签：css, html

所以，我试图让这些 div 彼此相邻，在格式的导航菜单下

1 2
3 4

出于某种原因，我所能做的就是让 RHS 的标题（div“righthead”）与 LHS 的主体（div“main”）内联，如果这有意义的话......

这是代码，请帮助！[我没有很好地解释它，所以如果需要，请要求澄清] - 我也包括了其余部分的所有代码，以防影响它。

```
<style type="text/css">

.hmenu{ width: 100%; border-bottom: 1px solid black;  }

.hmenu ul{ margin: 0; padding: 0; font: bold 12px Verdana; list-style-type: none; }

.hmenu li{ display: inline; margin: 0; }

.hmenu li a{ float: left; display: block; text-decoration: none; margin: 0; padding: 7px 8px;  border-right: 1px solid white;  color: white; background: #D3D3D3;  }

.hmenu li a:visited{ color: white; }

.hmenu li a:hover, .hmenu li.selected a{ background: #A9A9A9; color:
#008B8B; }

body { font-family: "Verdana", Calibri, Arial, sans-serif; font-size: 12px; text-align: center;  }

div#container { position: relative; width: 849px; margin: 0 auto; text-align: left; }

#header{ width: 100%; background: blue;  border-bottom: 1px solid black; }

#mainhead{ background: #D3D3D3; clear: both; width: 634px; color: white; border-top: 4px solid white; font: 18px Verdana; padding-left: 7px; padding-right: 8px; height: 30px; border-right: 1px solid white; }

#main{ background: #F2F2F2; width: 642px;  height: 800px;  padding-left: 7px; position: absolute; border-right: 1px; float: left; }

#righthead{ float: right; clear: both; background: #D3D3D3; color: white; font: 18px Verdana; width: 191px; padding-left: 7px;   height: 30px; border-left: 1px solid white; }

#right{ clear: both; float: right; background: black; width: 191px;  height: 800px;  padding-left: 7px; border-right: 1px; }

</style> 
```

HTML如下：

```
<!DOCTYPE html>

<html>
<head>
<title>Black Kite - Home</title>
<link rel="stylesheet" type="text/css" href="css/bk.css"/>
</head>

<body>

<div id="header">

<!-- header --></div>

<div id="container">

<div class="hmenu">
<ul>
<li><a href="index.html">Home</a></li>
<li><a href="#">About</a></li>
<li><a href="#">Services</a></li>
<li><a href="#">Events</a></li>
<li><a href="#">Contact</a></li>
</ul>
<!-- hmenu --></div>

<div id="mainhead">
About Us
<!-- mainhead --></div>

<div id="righthead">
heading
<!-- righthead --></div>

<div id="main">
<p>some text here. yey. </p>
<!-- main --></div>

<div id="right">
<p>some other here. yey. </p>
<!-- right --></div>

<!-- container --></div> 
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T22:46:03.207

尝试这个：

```
.hmenu{ width: 100%; border-bottom: 1px solid black; height: 30px;  }

#mainhead{ position: absolute; background: #D3D3D3; width: 634px; color: white; border-top: 4px solid white; font: 18px Verdana; padding-left: 7px; padding-right: 8px; height: 30px; border-right: 1px solid white; }

#main{ background: #F2F2F2; width: 642px;  height: 800px;  padding-left: 7px; border-right: 1px; float: left; }

#righthead{ float: right; background: #D3D3D3; color: white; font: 18px Verdana; width: 191px; padding-left: 7px;   height: 30px; border-left: 1px solid white; }

#right{ float: right; background: black; width: 191px;  height: 800px;  padding-left: 7px; border-right: 1px; } 
```

为 .hmenu 添加了高度，为#mainhead 添加了绝对定位，并删除了 clear:boths。这是你的想法吗？

[http://jsfiddle.net/WPHxj/](http://jsfiddle.net/WPHxj/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T22:48:13.030

绝对与位置属性有关。尝试将 4 个部分的 div 设置为`position: relative`. 然后你应该能够按照你喜欢的方式定位它。如果仍然不完全正确，请将它们放在更大的内容 div 中，将其设置为一定的宽度，以便只有两个 div 可以在其中彼此相邻。然后将它们的所有浮点属性设置为`float:left`.

我没有花时间创建自己的 jsfiddle。如果这不能正常工作，请放一个，这样我实际上就可以弄乱代码了。如果您想通过反复试验来学习，位置属性和浮点数可能是您的怀疑对象。祝你好运！

# php - PHP 正则表达式。搜索双引号？

> ID：11812334
> 
> 赞同：1
> 
> 时间：2012-08-04T22:07:19.493
> 
> 标签：php, regex

我正在编写一个 PHP 网页，它从搜索框中获取数据并使用它来搜索 mysql 数据库并返回结果。目前它只使用带有所有提供数据的 mySQL LIKE 查询。这不是很灵活，因为它将数据视为要匹配的单个精确表达式。

在快速谷歌之后，我找到了这个页面（[http://www.iamcal.com/publish/articles/php/search/](http://www.iamcal.com/publish/articles/php/search/)），我打算用它来扩展我的搜索网页的功能。

但是，我对该网页上的教程有两个疑问：

1）教程的第一部分是这样的：

```
$terms = preg_replace("/\"(.*?)\"/e", "search_transform_term('\$1')", $terms); 
```

我不明白为什么 * 后面跟着一个？，据我了解，.* 表示一个字符（可以是任何字符）零次或多次，这表示任何字符串。这 ？表示零次或一次。因此没有.*？也意味着任何字符串？

2）我的第二个问题是如何使表达式替换语音标记中包含的表达式而不是括号？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T22:22:31.717

回答 1。

**.*?** 意味着，该运算符**.***是懒惰的。这是什么意思。

正则表达式中的每个运算符都是贪婪的，它试图找到最大值，添加？它变得懒惰，它试图找到最小值。

当我使用

```
preg_replace("/_(.*)_/","Hi,_first_ and _second_ element","!replaced!"); 
```

输出将是

```
Hi,!replaced! element 
```

因为它找到最大的文本，但在这种情况下：

```
preg_replace("/_(.*?)_/","Hi,_first_ and _second_ element","!replaced!"); 
```

输出将是

```
Hi,!replaced! and !replaced! element 
```

因为它试图找到与正则表达式匹配的最少文本。

我希望这已经足够了，因为我不知道如何更好地解释它：D

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T22:10:24.867

问号使匹配不贪心，以便 php 在遇到 " 字符之前尝试匹配尽可能少的字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T22:27:14.013

*   星号 (*) 允许点重复任意次数，包括零次。
*   问号 (?) 使正则
    表达式中的前面的标记是可选的。例如：colou?r 匹配颜色和颜色。

# android - 为什么 Eclipse 文件 > 新建 > android 应用程序项目会产生一个带有不同文件夹图标的内脏文件夹？

> ID：11812336
> 
> 赞同：1
> 
> 时间：2012-08-04T22:08:18.720
> 
> 标签：android, eclipse, project

我正在清理一些我认为不必要的过时软件和文件。

当我之后启动 eclipse juno 4.2 时，新的 android 应用程序按钮生成了一个与我习惯完全不同的文件夹。图标完全不同。它们不是文件夹，而是黑白图标。文件夹内的唯一文件是styles.xml 和strings.xml。src、gen 和 assets 文件夹是空的。

我是新用户，还不能发布图片，但这是正在发生的事情的图片： ![在此处输入图像描述](../Images/5c9fab2a55e1d3ff6bfe8f67535e3dc8.png)

由于这个问题，我已经恢复了可能导致此问题的所有内容。当然重新启动。我还尝试删除整个 eclipse 文件夹并将其解压缩到程序文件中。

我发现生成正确项目的唯一方法是取消选中 New Android App 对话框中的 []Create Custom Launcher 框。然后它似乎正确地出来了。还值得注意的是，MOTODEV > New > New Android Application 按钮仍然可以正常工作并生成标准项目。

我想知道是否有人知道我必须重新安装什么才能让一切再次正常运行。或者，如果有更简单的解决方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T05:12:50.730

我的感觉是这是一个功能，而不是一个错误。MOTODEV 资源可能仍然是“旧”资源。

但请注意，并非所有这些图标都是相同的。

您站点的“黑白”图标在我看来是某种尝试显示图形项目，例如十字准线或布局之类的东西。

assets、gen、libs 和 res 文件夹旁边有一个小的 android 'a'，就像你的外部项目文件夹和 AndroidManifest.xml 的文档图标一样。

请注意，具有内容的项目，如 lib 和 res，在右下角有小文件夹。这似乎表明这些本地资源有内容，而其他资源还没有。我想知道，一旦您在项目中创建了一些代码并完成了一些填充 gen 文件夹的操作，它是否会以相同的图标结束。

我的猜测是“解决”这个问题的方法是退回到以前版本的 SDK/eclipse。

# jquery - 如何使用用户上传的 XML 文件？

> ID：11812339
> 
> 赞同：2
> 
> 时间：2012-08-04T22:08:56.240
> 
> 标签：jquery, xml, file-upload

我希望用户能够上传 XML 文件（使用`<input type="file">`）。假设这个文件是：

```
<fruit>Watermelon</fruit>
<fruit>Banana</fruit> 
```

用户上传此文件后，程序将使用 XML 中的信息（在本例中为水果）。那可能吗？注意：我是初学者。如果可以，请详细解释我。我不知道如何访问上传的文件。

我在这个项目中使用 jQuery。如果 jQuery 无法解决这个问题，请告诉我应该使用哪种语言。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T22:18:27.923

jQuery 是一个客户端库。jQuery 在您的客户端浏览器中执行。

您可以上传文件并以任何服务器端语言（如 PHP/ASP.NET 等）处理该文件。您可以对您的此文件执行任何类型的操作（将文件保存到磁盘/读取内容等）服务器端。

你的页面应该有一些像这样的标记来控制文件上传。您的 enctype 值应该是`multipart/form-data`将文件发送到服务器页面。

```
<form  action="myServerpage.php" method="post" enctype="multipart/form-data">
   <input type="file" id="someId" name="someName">
   <input type="submit" />
</form> 
```

[这](http://www.tizag.com/phpT/fileupload.php/)是一个 PHP 示例，[这](http://msdn.microsoft.com/en-us/library/aa479405.aspx)是一个 ASP.NET 示例。

有一些客户端异步文件上传解决方案，例如 uplodify，但即使这样，您也需要一个服务器页面来处理来自客户端的请求。

正如 icktoofay 提到的，HTML5 也在客户端处理它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T22:30:57.880

您可以使用[HTML5 File API](http://www.w3.org/TR/FileAPI/)读取在`input`.

假设您`file`在一个名为`fileSelector`. 首先，您将使用`files`它的属性来选择文件。假设它只需要一个文件，您可能只选择第一个文件。

然后，构造一个[`FileReader`](http://www.w3.org/TR/FileAPI/#dfn-filereader). 将[其`onload`属性](http://www.w3.org/TR/FileAPI/#dfn-onload)设置为文件读取完成时的回调。[`readAsText`](http://www.w3.org/TR/FileAPI/#dfn-readAsText)使用文件和编码调用。调用回调[后](http://www.w3.org/TR/FileAPI/#dfn-result)[，`result`](http://www.w3.org/TR/FileAPI/#dfn-result)`FileReader`使用.

然后解析该 XML 并根据需要使用它。

# php - 查找多次存在的数字

> ID：11812342
> 
> 赞同：2
> 
> 时间：2012-08-04T22:09:23.750
> 
> 标签：php, mysql, sql

在 MySQL 数据库中，我存储了仅给出第一个和最后一个的数字集，例如：

```
编号 | 来自 | 至
1 | 65.789 | 66.323
2 | 66.151 | 69.298
ETC...

```

我试图用 PHP 和 MySQL 找出一种方法来找到不止一次存在的数字，例如在上面，从 66.151 到 66.323 的数字。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T22:16:34.103

```
SELECT a.from, b.to FROM mytable a JOIN mytable b ON a.from BETWEEN b.from AND b.to 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T22:25:32.357

我会这样做：

```
select 
    IF(
    t1.`from` = t2.`from` and t1.`to` = t2.`to`,
    CONCAT('ID: ',t1.id, ' (',t1.`from` ,'-',t1.`to`,') is same as ID: ',t2.id,' (',t2.`from`,'-',t2.`to`,')' ),    
    IF(
        t1.`from` >= t2.`from` and t1.`to` <= t2.`to`,
        CONCAT('ID: ',t1.id, ' (',t1.`from` ,'-',t1.`to`,') is included in ID: ',t2.id,' (',t2.`from`,'-',t2.`to`,')' ),
        CONCAT('ID: ',t1.id, ' (',t1.`from` ,'-',t1.`to`,') overlaps with ID: ',t2.id,' (',t2.`from`,'-',t2.`to`,')' )
    )
) as overlaping
from 
    numbers t1 
join 
    numbers t2 
where 
    t2.`from` <= t1.`to` 
and 
    t2.`to` >= t1.`to` 
and 
    t1.id != t2.id
group by 
    concat( greatest(t1.id,t2.id),'-',least(t1.id, t2.id) ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T22:59:58.367

```
SELECT 
    GREATEST(a.from, b.from) AS overlap_start
  , LEAST(a.to, b.to)        AS overlap_end
FROM mytable a 
  JOIN mytable b 
    ON  a.id < b.id
    AND a.from <= b.to
    AND b.from <= a.to ; 
```

和另一个选项，使用分组，以便组合一些结果并产生更少的行：

```
 SELECT 
        MIN(b.from) AS overlap_start
      , a.to        AS overlap_end
    FROM mytable a 
      JOIN mytable b 
        ON  a.id <> b.id
        AND a.from <= b.from
                  AND b.from <= a.to
                            AND a.to <= b.to
    GROUP BY a.id 
  UNION ALL
    SELECT 
        b.from AS overlap_start
      , b.to   AS overlap_end
    FROM mytable b 
    WHERE EXISTS
          ( SELECT *
            FROM mytable a
            WHERE a.id <> b.id
              AND a.from <= b.from
                               AND b.to <= a.to
          ) ; 
```

# java - 无法让 onTouchListener 在 fragmentActivity 中工作

> ID：11812343
> 
> 赞同：0
> 
> 时间：2012-08-04T22:09:29.577
> 
> 标签：java, android, android-fragments, android-fragmentactivity

当我的片段中击中特定的editText时，我正在尝试敬酒。

我的片段活动：

```
@Override
    public void onActivityCreated(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onActivityCreated(savedInstanceState);

        EditText ed2 = (EditText) getView().findViewById(R.id.editText2);
        ed2.setOnTouchListener(new OnTouchListener() {
            @Override
            public boolean onTouch(View v, MotionEvent event) {
                if(MotionEvent.ACTION_UP == event.getAction()){

                    Toast.makeText(getActivity(), "Hello", Toast.LENGTH_LONG).show();
                }
                return false;
            }
        });
    } 
```

添加此片段时，我的应用程序崩溃。我在`ed2.setOnTouchListener...`.

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T22:16:18.923

使用 onCreateView

```
 @Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.your_view, container, false);
    EditText = ed2 = (EditText) getView().findViewById(R.id.editText2);
    ed2.setOnTouchListener(new OnTouchListener() {
        @Override
        public boolean onTouch(View v, MotionEvent event) {
            if(MotionEvent.ACTION_UP == event.getAction()){

                Toast.makeText(getActivity(), "Hello", Toast.LENGTH_LONG).show();
            }
            return false;
        }
    });
    return view;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T22:17:00.643

EditText 为空。如果您的 contentview 不是 cotain edittext ，则无法创建 edittext。OnTouchListener 不为空。首先检查 EditText 。

# c# - 如何从通过 USB 连接的相机读取文件

> ID：11812345
> 
> 赞同：7
> 
> 时间：2012-08-04T22:10:22.437
> 
> 标签：c#, winforms, usb

在 C# 中，如何将文件从相机复制到本地驱动器？相机通过 USB 连接，它不显示为标准驱动器。

我正在使用 Sony Handycam HDR-CX160。我想编写一个小型 c# windowsform 应用程序，用于从设备复制视频文件。

那么我的应用程序如何从通过 USB 连接的设备复制文件？它不会显示为驱动器，但会显示在 Windows 资源管理器中。当我在 C# 中搜索驱动器时，它不在列表中？

谢谢！

======== 更新 =======

我将尝试以不同的方式提出这个问题，并希望它会重新开放。

使用 C# 我需要将文件从相机复制到本地硬盘。如果我新建路径，这行代码就可以了。

```
string cameraPath = ?????
string sourcePath = Path.Combine(cameraPath, @"\Video\2012-1-1.WMV");
string targetPath =  @"C:\Video\2012-1-1.WMV";
System.IO.File.Copy(sourceFile, destFile, true); 
```

那么如何解决cameraPath？还有另一种方法可以一起完成这一切吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T22:43:44.930

我不知道您的设备的具体情况，最好的办法可能是使用您的设备附带的软件。

但是，如果数码相机不将自身显示为可以从中读取文件的驱动器，则可能支持[Windows Image Acquisition](http://msdn.microsoft.com/en-us/library/windows/desktop/ee663303%28v=vs.85%29.aspx)。从 C# 使用它的最简单方法是使用[Windows Image Acquisition Automation Layer](http://msdn.microsoft.com/en-us/library/windows/desktop/ms630827%28v=vs.85%29.aspx)。Scott Hanselman 有一篇旧的 Coding4Fun 文章[看我！通道 9 上的Windows 图像采集](http://channel9.msdn.com/coding4fun/articles/Look-at-me-Windows-Image-Acquisition)。

如果您能够从相机中取出闪存卡，您也可以尝试使用读卡器读取此卡以直接访问文件。

此外，如果您想在连接相机时运行您的应用程序，您需要[注册一个 AutoPlay 事件处理程序](http://msdn.microsoft.com/en-us/library/windows/desktop/aa468474.aspx)。连接相机时有一个事件。

# java - 使用 java.util.prefs.Preferences 实现 Java 持久性

> ID：11812353
> 
> 赞同：1
> 
> 时间：2012-08-04T22:11:31.090
> 
> 标签：java, preferences

似乎我可以使用`java.util.prefs.Preferences`. 首选项与特定的类相关——我`Preferences`通过将类 Object 传递给某个静态方法来获得一个实例，例如`Preferences.userNodeForPackage`.

但是，如果我删除我的课程并且不再使用它会发生什么？存储的数据会发生什么？它只会泄漏我硬盘中的内存吗？有什么好方法可以浏览我当前的`Preferences`数据吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T23:05:38.190

> 此数据永久存储在依赖于实现的后备存储中

一般来说，是的。如果您只是删除创建首选项的项目，这些首选项可能会保留。

您最好的选择是尝试提供某种“卸载”，该“卸载”具有删除应用程序使用的密钥的能力/知识。

# html - 有人知道我的问题有任何在线转换器吗？

> ID：11812362
> 
> 赞同：0
> 
> 时间：2012-08-04T22:13:30.480
> 
> 标签：html, converter

我最近接管了一个新网站，但是当我获得源代码时，它在 JavaScript 中未转义，如下所示：

```
%3C%21DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A 
```

不幸的是，我不知道 %XX thingys 叫什么，所以我找不到转换器将它转换回 HTML。

提前致谢。（对不起，可怜的解释我只是不知道如何解释。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T22:14:52.460

这会做到这一点：http: [//meyerweb.com/eric/tools/dencoder/](http://meyerweb.com/eric/tools/dencoder/)

或者在任何 JS 控制台中：

```
unescape('%3C%21DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A'); 
```

而且，需要明确的是，这是 URL 编码，与 javascript 无关。它替换任何可能保留或导致 url 出现问题的字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T22:14:45.160

解码是

```
<!DOCTYPE html>
<html>
<head> 
```

把它放在这里看看： http: [//meyerweb.com/eric/tools/dencoder/](http://meyerweb.com/eric/tools/dencoder/)

# javascript - 组织大型 javascript 应用程序的工具和最佳实践

> ID：11812363
> 
> 赞同：4
> 
> 时间：2012-08-04T22:14:11.047
> 
> 标签：javascript, jquery, node.js, twitter-bootstrap, d3.js

我正在开发相当复杂的 webapps/dashboards，主要是在 Javascript 中。我喜欢在服务器上使用 mongo 和 node，但在客户端上通常会有特定于应用程序的库和脚本混乱。

我目前的项目包括[bootstrap](http://twitter.github.com/bootstrap/)、[jquery](http://jquery.com/)、[jquery-ui](http://jqueryui.com/)、[D3](http://d3js.org/)、[leaflet](http://leaflet.cloudmade.com/)、[crossfilter](http://square.github.com/crossfilter/)和一些晦涩难懂的东西的组合，可以公平地说，虽然应用程序很棒，但代码已经变得一团糟。特别是 D3 和 crossfilter 的代码非常冗长，请参阅官方[crossfilter 演示](http://square.github.com/crossfilter/)的源代码以获取典型示例。

那么问题来了：*组织大型 javascript 应用程序的好工具和最佳实践是什么？*

我已经避免使用全局变量并尝试使用闭包来组织命名空间，但恐怕我需要一些比这更多的结构。在服务器上有 npm 非常好，但是在浏览器中是否有类似的东西？

我已经研究[过 require.js](http://requirejs.org/)、[backbone.js](http://backbonejs.org/)和[coffeescript](http://coffeescript.org/)，但我不太确定这些是否真的能解决问题或只会增加复杂性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T22:30:20.410

听起来您已经走在正确的道路上，但这里有一些提示：

1.  使用框架。[Backbone](http://backbonejs.org/)现在很流行，但也有其他的。它将极大地帮助代码组织。事实上，如果您的应用程序大小不一，框架绝对是避免意大利面条式代码的必要条件。其他流行的框架包括[Ember](http://emberjs.com/)和[Knockout](http://knockoutjs.com/)。

2.  如果您决定不使用这些框架之一，请至少使用模板。例如[Mustache](http://mustache.github.com/)或内置的下划线。

3.  合并和缩小您的文件。主要是为了优化加载时间。理想情况下，您会找到一些可以添加到后端的东西来为您执行此操作。例如，Rails 的“资产管道”使用了一种叫做[Sprockets](https://github.com/sstephenson/sprockets)的东西。

4.  我确实听到人们对[coffeescript 赞不绝口](http://coffeescript.org/)。它并没有真正增加功能，但喜欢它的人说它使他们的代码更干净。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T23:01:01.563

我认为“模块化”方法是您所需要的，使用模块可能会帮助您摆脱混乱。

您可以查看以下内容：

[http://addyosmani.com/largescalejavascript/](http://addyosmani.com/largescalejavascript/)

[http://www.yuiblog.com/blog/2007/06/12/module-pattern/](http://www.yuiblog.com/blog/2007/06/12/module-pattern/)

[http://www.2ality.com/2011/04/modules-and-namespaces-in-javascript.html](http://www.2ality.com/2011/04/modules-and-namespaces-in-javascript.html)

# facebook - 计算 facebook 封面偏移量 y

> ID：11812364
> 
> 赞同：2
> 
> 时间：2012-08-04T22:14:19.763
> 
> 标签：facebook, facebook-timeline

我正在使用 Facebook SDK 获取用户封面照片。我有到 img 的路径和偏移量 y。

```
 "source": "http://a5.sphotos.ak.fbcdn.net/hphotos-ak-ash3/526114_459046674110601_992101492_n.jpg",
  "offset_y": 19 
```

我放置图像的 div 高度为 300px；和右背景位置是`center -146px;`。`top value`当我有 300 和 19 时如何计算？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T12:47:04.163

`offset_y`是裁剪图像的上部区域和下部区域之间的空间比例。

所以，实际的像素偏移应该是这样的：

```
y = (offset_y / 100) * (upperArea_of_cropImage.height + lowerArea_of_cropImage.height) 
```

编辑：

```
// where y is the actual pixels from the upper left corner of the real image to
// upper left corner of the cropped image

        -- ================================  --
    y {   ||                              ||    } a
        --||..............................|| --
          ||                              ||
          ||                              ||
          ||            Cover             ||
          ||                              ||
          ||..............................|| --
          ||                              ||    } b
          ||                              ||   |
           ================================  --

     offset_y that Facebook send to you actually was a/b not y 
```

# windows - 如何在 Windows 上使用自定义的 couch.ini？

> ID：11812365
> 
> 赞同：3
> 
> 时间：2012-08-04T22:14:22.540
> 
> 标签：windows, couchdb, erlang-shell

我正在尝试使用一些第三方代码

```
couchdb -a ./my/couch.ini 
```

这在 Windows 上不起作用，因为该`couchdb.bat`文件不会将参数传递给 CouchDB。所以 CouchDB 总是在默认端口 (5984) 上启动，而不是在`./my/couch.ini`(15984) 中指定的端口。

我尝试使用批处理文件的内容手动传递参数。IE

```
cd "C:\Program Files (x86)\Apache Software Foundation\CouchDB\bin"
erl -sasl errlog_type error -s couch -a /full/path/to/my/couch.ini 
```

但这似乎没有做任何事情，即它仍然在 5984 上。

我尝试了 的一些变体`/full/path/to/my/couch.ini`，例如`C:/full/path/to/my/couch.ini`and`C:\full\path\to\my\couch.ini`和`C:\\full\\path\\to\\my\\couch.ini`，但没有区别。

有没有人能够使用自定义`couch.ini`文件在 Windows 上运行 CouchDB？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T22:34:22.350

我现在没有要确认的 windows 框，但您可能不需要在下面包含默认和本地参数。`-s couch`在之前添加`couchdb.bat`：

```
 -couch_ini ../etc/couchdb/default.ini ../etc/couchdb/local.ini /path/to/custom/couch.ini 
```

笔记：

*   所有路径都相对于`%COUCH%/bin/`

*   指定的最后一个 ini 文件需要是可写的，这是更新参数应该去的地方

*   通过首先将它们放在一个可读文件中来保护您的白名单参数

FWIW，我自制的 mac 版本上的 unix 语法是：

```
usr/local/Cellar/erlang/R15B01/lib/erlang/erts-5.9.1/bin/beam.smp -Bd -K true -A 4 -- -root /usr/local/Cellar/erlang/R15B01/lib/erlang -progname erl -- -home ~ -- -noshell -noinput -os_mon start_memsup false start_cpu_sup false disk_space_check_interval 1 disk_almost_full_threshold 1 -sasl errlog_type error -couch_ini /usr/local/etc/couchdb/default.ini /usr/local/etc/couchdb/local.ini -s couch 
```

如果您记录一个 描述您想要实现的目标的[jira 票证，我会看看是否可以将它放入 1.3.0。](https://issues.apache.org/jira/browse/COUCHDB)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T11:54:16.900

我已经修改了： *C:\Program Files (x86)\Apache Software Foundation\CouchDB\etc\couchdb\local.ini C:\Program Files (x86)\Apache Software Foundation\CouchDB\etc\couchdb\defaults。初始化*

**[httpd]**部分 为：

```
port = 5984
bind_address = 0.0.0.0 
```

并重新启动了 CouchDB。这有帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-05T13:02:01.183

理论上，您应该只编辑位于下的*local.ini*

`$PROGRAMS_DIR\Apache Software Foundation\CouchDB\etc`

CouchDB 默认会解析这个配置文件。我知道这并不完全符合您的要求，但我想这是唯一的方法。

# python - Django方法中的输入参数

> ID：11812366
> 
> 赞同：1
> 
> 时间：2012-08-04T22:14:25.677
> 
> 标签：python, ios, django, web-services

我是使用 python 和 Django 的新手。我想在 django 中编写一个 Web 服务，它接收一些输入参数并返回一个响应。该 Web 服务应该从 iOS 应用程序中调用。我写了下面的方法，但我不确定是否有输入参数（ccId）。我应该从请求对象中读取输入参数吗？如果可以，请给我一些示例代码。

```
def get_clients(request, ccId):    
    lstClients = Patients.objects.filter(cr=ccId)    
    data = serializers.serialize("json", lstClients, fields=('tel',))
    return http.HttpResponse(json.dumps(data), mimetype='application/javascript') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T22:23:23.217

是的，您可以从请求对象中读取参数：

```
def get_clients(request):
    if request.method == 'GET':
        ccId = request.GET['ccId']
    elif request.method == 'POST':
        ccId = request.POST['ccId']

    lstClients = Patients.objects.filter(cr=ccId)    
    data = serializers.serialize("json", lstClients, fields=('tel',))
    return http.HttpResponse(json.dumps(data), mimetype='application/javascript') 
```

也许您需要将收到的对象转换为其适当的类型。类似的东西：`ccId = int(request.GET['ccId']`。

看看 Django 文档：[https ://docs.djangoproject.com/en/dev/ref/request-response/#httprequest-objects](https://docs.djangoproject.com/en/dev/ref/request-response/#httprequest-objects)

# android - Android Facebook SDK 错误

> ID：11812375
> 
> 赞同：0
> 
> 时间：2012-08-04T22:15:56.500
> 
> 标签：android, facebook, permissions, webview

我有一个使用具有某些权限的 Facebook SDK 的应用程序。通常，当用户按下登录按钮时，应用程序会打开 Facebook 应用程序或 Webview（取决于是否安装了 Facebook 应用程序）并要求用户授权我的应用程序。但是，在某些带有 Facebook 应用程序的设备上，SDK 会跳过授权过程，从而使我的应用程序卡住。

我这样调用授权方法：

```
mFacebook.authorize(mContext, PERMISSIONS, new DialogListener() {bla bla}; 
```

其中 PERMISSIONS 是一个字符串数组。我发现如果我卸载 Facebook 应用程序，使用 Webview 一切正常...

知道有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T22:24:58.807

我相信如果用户已经在设备上登录（可能来自另一个应用程序），就会发生这种情况。facebook 应用程序实现单点登录。您可以在此处找到更多详细信息和代码：[https ://developers.facebook.com/docs/mobile/android/sso/#sso](https://developers.facebook.com/docs/mobile/android/sso/#sso)

# model - 三.js + .mesh 旋转

> ID：11812376
> 
> 赞同：0
> 
> 时间：2012-08-04T22:15:58.153
> 
> 标签：model, three.js

我正在使用 THREE.js (.obj Loader) 和具有多个网格部件的模型。当我制作模型时，我小心翼翼地在 Blender 中为每个部分赋予其自己的“几何原点”，但这并没有按预期导出。当我尝试“局部”旋转一个球体（例如，眼球在自己的轴上旋转）时，它们只会围绕父级（头部）旋转。我需要球体网格在内部“旋转”而不是在头部（网格父级）周围“绕行”。有什么提示或建议吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T01:45:12.627

部分问题是，据我所知， obj 没有层次结构。因此，即使您要导出许多对象，所有这些对象也仅被视为一组子对象。它们都位于0,0,0。然而，即使它们都在 0,0,0，每个对象的顶点也会被偏移，所以在 Blender 中看起来只有“中心”不在同一个地方。

# math - 如何正交化一组向量

> ID：11812384
> 
> 赞同：2
> 
> 时间：2012-08-04T22:17:05.553
> 
> 标签：math, vector, orthogonal

我一直在阅读“3D 游戏编程和计算机图形学的数学”，并且有一个章节练习（第 2 章。问题 2）尽管重读了这一章并进行了研究，但我似乎无法理解。如何“正交化以下向量集”

e1 = ( sqrt(2)/2, sqrt(2)/2, 0 )

e2 = ( -1, 1, -1 )

e3 = ( 0, -2, -2 )

另外，“正交化一组向量”是什么意思？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-04T22:25:26.087

[Gram-Schmidt 过程](http://en.wikipedia.org/wiki/Gram%E2%80%93Schmidt_process)是用于推导由一组[线性独立](http://en.wikipedia.org/wiki/Linear_independence)向量定义的[跨越空间的标准](http://en.wikipedia.org/wiki/Linear_span)[正交基](http://en.wikipedia.org/wiki/Orthonormal_basis)的典型方法。在您描述的情况下，由于 e1、e2 和 e3 是线性独立的，因此 Gram-Schmidt 可用于生成三个相互正交的单位长度向量 e1'、e2' 和 e3'，这是您的线性跨度的正交基原始向量。

# apache - httpd.conf 别名不适用于 www 版本的站点

> ID：11812390
> 
> 赞同：0
> 
> 时间：2012-08-04T22:17:36.467
> 
> 标签：apache, alias, httpd.conf, no-www

我最近通过编辑我的 httpd.conf 文件向 Django 站点添加了一个 favicon：

别名 /favicon.ico /home/learntango/webapps/staticapp/site_images/favicon.ico

这适用于无 www，但不适用于 www。：

*   作品： http: [//learntodancetango.com/](http://learntodancetango.com/)
*   不： http: [//www.learntodancetango.com/](http://www.learntodancetango.com/)

有什么建议吗？

**谢谢！**
大卫

* * *

完整的 httpd.conf 文件供参考：

> ```
> ServerRoot "/home/learntango/webapps/django/apache2"
> 
> LoadModule dir_module        modules/mod_dir.so
> LoadModule env_module        modules/mod_env.so
> LoadModule log_config_module modules/mod_log_config.so
> LoadModule mime_module       modules/mod_mime.so
> LoadModule rewrite_module    modules/mod_rewrite.so
> LoadModule setenvif_module   modules/mod_setenvif.so
> LoadModule wsgi_module       modules/mod_wsgi.so
> LoadModule alias_module      modules/mod_alias.so
> 
> Alias /favicon.ico /home/learntango/webapps/staticapp/site_images/favicon.ico
> 
> LogFormat "%{X-Forwarded-For}i %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\"" combined
> CustomLog /home/learntango/logs/user/access_django.log combined
> ErrorLog /home/learntango/logs/user/error_django.log
> KeepAlive Off
> Listen 32691
> MaxSpareThreads 3
> MinSpareThreads 1
> ServerLimit 1
> SetEnvIf X-Forwarded-SSL on HTTPS=1
> ThreadsPerChild 5
> WSGIDaemonProcess django processes=2 threads=12 python-path=/home/learntango/webapps/django:/home/learn
> tango/webapps/django/lib/python2.7
> WSGIProcessGroup django
> WSGIRestrictEmbedded On
> WSGILazyInitialization On
> WSGIScriptAlias / /home/learntango/webapps/django/mysite.wsgi 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T22:20:19.750

它对我有用。你清除浏览器缓存了吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T14:58:19.127

解决了，虽然我不知道为什么它没有早点工作！

# jsf - JSF h：commandButton 在 Enter 按键上提交不起作用

> ID：11812391
> 
> 赞同：2
> 
> 时间：2012-08-04T22:17:36.767
> 
> 标签：jsf, icefaces

我有一个带有 inputText 和 commandButton 的简单表单。通常，如果我使用`onkeypress="if (event.keyCode == 13) this.submit();"`我可以按 Enter 键提交表单。在我的应用程序的上下文中，虽然这不起作用。当我按下 Enter 键时，inputText 被清除但没有提交表单并且没有调用 commandButton 的操作。我正在使用 Icefaces，我`ice.captureEnterKey`在页面的源代码中看到了一些，但我不知道这是否相关。

页面代码：

```
<h:form id="form1">
    <h:inputText value="#{myBean.query}"/>
    <h:commandButton id="search" value="Search" action="#{myBean.submitQuery()}" onkeypress="if (event.keyCode == 13) this.submit();"/>
</h:form> 
```

更新：我设法使它像这样工作：

```
`<h:form id="form1">
    <h:inputText value="#{myBean.query}" onkeypress="if (event.keyCode == 13) document.getElementById('form1:search').click();"/>
    <h:commandButton id="search" value="Search" action="#{myBean.submitQuery()}"/>
</h:form>` 
```

现在的问题是，在导航到下一页之前，我收到了这个奇怪的错误：

`Network connection interrupted. Reload this page to try to reconnect.`

该错误仅在我按 Enter 提交表单时出现。如果我用鼠标按下按钮，它不会出现。此外，如果我删除 Icefaces 库，一切正常。

# ruby-on-rails - 切换数据库值

> ID：11812393
> 
> 赞同：0
> 
> 时间：2012-08-04T22:17:50.203
> 
> 标签：ruby-on-rails, database, ruby-on-rails-3, devise, ruby-on-rails-3.2

我有一个定义为运动员的方法，它是用户模型中的创始人，还有一个布尔列定义为运动员，默认值为 false。

提供者是 twitter 或 facebook，如果提供者不是其中的任何一个并且为空白，那么我希望它在下面的方法中将运动员列切换为 true。

```
 def athlete?
    provider.blank?
  end 
```

我尝试了多种方法，但没有运气，比如下面的切换方法没有运气。

```
 def athlete?
    provider.blank?
    user.toggle!(:athlete)
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T22:30:32.277

由于我不知道 Provider 的列类型，我假设它是一个字符串，可能值为“facebook”、“twitter”和“”。尝试这样的事情，让我知道你得到了什么

```
def athlete?
  !provider.any? { |p| %w(facebook twitter).include?(p) }
end 
```

所有这一切都是检查提供者是否包含“twitter”或“facebook”，如果没有，则返回 true。

如果您想更新属性，请执行以下操作：

```
def athlete=(athlete)
  self[:athlete] = !provider.nil? && !provider.any? { |p| %w(facebook twitter).include?(p) } rescue true
end 
```

# applescript - Applescript - 组合多个 IF 语句和主文件夹的缩写

> ID：11812394
> 
> 赞同：0
> 
> 时间：2012-08-04T22:17:53.827
> 
> 标签：applescript, directory, home-directory

我正在尝试制作一个applescript来将一些文件备份到Dropbox。我的问题是是否可以在我的脚本中组合多个 IF statmen，以及是否可以缩短 SET name TO 路径，例如 Macintosh HD:Users:svkrzn:Dropbox to ~:Dropbox。

这是我的脚本：

```
set destination to "Macintosh HD:Users:svkrzn:Dropbox:Backup"
set safari to "Macintosh HD:Users:svkrzn:Library:Safari:Bookmarks.plist"
set safariplist to "Macintosh HD:Users:svkrzn:Dropbox:Backup:Safari_Bookmarks.plist"
set things to "Macintosh HD:Users:svkrzn:Library:Application Support:Cultured Code:Things:Database.xml"
set thingsxml to "Macintosh HD:Users:svkrzn:Dropbox:Backup:THINGS_Database.xml"

tell application "Finder"
    try
    set S1 to duplicate file safari to folder destination with replacing
    set T1 to duplicate file things to folder destination with replacing
    if exists file safariplist then
        display dialog "It exists."
        delete file safariplist
    end if
    if exists file thingsxml then
        display dialog "It exists."
        delete file thingsxml
    end if
    set name of S1 to "Safari_Bookmarks.plist"
    set name of T1 to "THINGS_Database.xml"
 on error
    display dialog "Oops, a problem occurred duplicating the file."
 end try
end tell 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T12:48:57.007

如果语句可以是这样的......

```
if something then
    -- do something
else if somethingElse then
    -- do something else
else if anotherThing then
    -- do the other thing
else
    -- if none of the others are true then do this
end if 
```

在 applescript 中，我们使用“path to”命令来访问标准文件夹。Applescript 知道很多标准文件夹。打开 AppleScript 编辑器，在“窗口”菜单下选择“库”。找到“Standard Additions”应用程序并双击它以打开 Applescript 的 Standard Additions 字典。搜索“path to”并查看 Applescript 知道的所有标准文件夹。

例如，您可以这样做...

```
set destination to (path to home folder as text) & "Dropbox:Backup" 
```

# jquery - Django：从 jQuery 提交表单时未设置 CSRF cookie

> ID：11812396
> 
> 赞同：0
> 
> 时间：2012-08-04T22:18:17.227
> 
> 标签：jquery, django, csrf

我的`jQuery`功能看起来像

```
$("body").on("submit","form",function(e){
        // do not submit the form
        e.preventDefault();

        // handle everything yourself
        var $form = $(this);
        var title = $form.closest('.video-detail').find('.title').text();
        var entryTitle = $form.find('.input-small').val();
        console.debug(title);
        console.debug(entryTitle);

        // send the data to the server using .ajax() or .post()
        $.ajax({
            type: 'POST',
            url: 'addVideo',
            data: {video_title: title},
        }).done(function(){
            alert('done');
        });
    }); 
```

然后我的`urls.py`样子

```
urlpatterns = patterns('',
    url(r'^$', home),
    url(r'^done$', done, name='done'),
    url(r'', include('social_auth.urls')),
    url(r'^addVideo$', addVideo)
) 
```

我的`views.py`样子

```
@login_required()
@transaction.commit_on_success
def addVideo(request):
    logging.info('add Video request - ' + str(request))
    pass 
```

当我运行我的网络应用程序时，我使用 firebug 调试控制台我看到了错误

```
my.js (line 96)
POST http://myaap.in/addVideo

403 FORBIDDEN    43ms 
```

然后当我进一步钻取作为回应时，我看到

```
<div id="summary">
  <h1>Forbidden <span>(403)</span></h1>
  <p>CSRF verification failed. Request aborted.</p>

</div>

<div id="info">
  <h2>Help</h2>

    <p>Reason given for failure:</p>
    <pre>
    CSRF cookie not set.
    </pre>

  <p>In general, this can occur when there is a genuine Cross Site Request Forgery, or when
  <a
  href='http://docs.djangoproject.com/en/dev/ref/contrib/csrf/#ref-contrib-csrf'>Django's
  CSRF mechanism</a> has not been used correctly.  For POST forms, you need to
  ensure:</p>

  <ul>
    <li>Your browser is accepting cookies.</li>

    <li>The view function uses <a
    href='http://docs.djangoproject.com/en/dev/ref/templates/api/#subclassing-context-requestcontext'><code>RequestContext</code></a>
    for the template, instead of <code>Context</code>.</li>

    <li>In the template, there is a <code>{% csrf_token
    %}</code> template tag inside each POST form that
    targets an internal URL.</li>

    <li>If you are not using <code>CsrfViewMiddleware</code>, then you must use
    <code>csrf_protect</code> on any views that use the <code>csrf_token</code>
    template tag, as well as those that accept the POST data.</li>

  </ul> 
```

*   我是新手`Django`，大家`web development`都在一起，不太明白这意味着什么
*   请帮助我了解我需要学习什么来解决这个问题

**更新**

我的表格看起来像

```
<form class="new-playlist form-inline" onclick="event.stopPropagation()">{% csrf_token %}
     <input type="text" class="input-small">
     <button class="btn btn-danger create-playlist-button" type="submit" disabled="disabled">New</button>
</form> 
```

**更新 1** 添加来自[Django CSRF 的代码检查失败并出现 Ajax POST 请求](https://stackoverflow.com/questions/5100539/django-csrf-check-failing-with-an-ajax-post-request) 后，我看到发布数据为

```
csrfmiddlewaretoken {{ csrf_token }}
video_title The Who - Who Are You?
Source
video_title=The+Who+-+Who+Are+You%3F&csrfmiddlewaretoken=%7B%7B+csrf_token+%7D%7D 
```

我`jQuery`现在看起来像

```
// setting up ajaxSetup
$(function(){
    $.ajaxSetup({ 
         beforeSend: function(xhr, settings) {
             function getCookie(name) {
                 var cookieValue = null;
                 if (document.cookie && document.cookie != '') {
                     var cookies = document.cookie.split(';');
                     for (var i = 0; i < cookies.length; i++) {
                         var cookie = jQuery.trim(cookies[i]);
                         // Does this cookie string begin with the name we want?
                     if (cookie.substring(0, name.length + 1) == (name + '=')) {
                         cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                         break;
                     }
                 }
             }
             return cookieValue;
             }
             if (!(/^http:.*/.test(settings.url) || /^https:.*/.test(settings.url))) {
                 // Only send the token to relative URLs i.e. locally.
                 xhr.setRequestHeader("X-CSRFToken", getCookie('csrftoken'));
             }
         } 
    });
});
// creating new playlist
$(function() {
    // activate "New" buttons if input is not empty
    $('form input[type="text"]').live('keyup', function() {
        var val = $.trim(this.value);
        $(this).next("button").prop('disabled', val.length === 0);
    });

    $("body").on("submit","form",function(e){
        // do not submit the form
        e.preventDefault();

        // handle everything yourself
        var $form = $(this);
        var title = $form.closest('.video-detail').find('.title').text();
        var entryTitle = $form.find('.input-small').val();
        console.debug(title);
        console.debug(entryTitle);      

        // send the data to the server using .ajax() or .post()
        $.ajax({
            type: 'POST',
            url: 'addVideo',
            data: {
                video_title: title,
                csrfmiddlewaretoken: '{{ csrf_token }}'
                },
        }).done(function(){
            alert('done');
        });
    });
}); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T22:44:19.243

尝试使用将结果`$form.serialize()`作为数据传递给`$.ajax()`. 只要您`{% csrf_token %}`在表单模板中的某个位置出现，这将选择表单中的所有值（包括令牌）并发送您的 AJAX 调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T22:36:05.733

Django 试图通过[坚持你提供一个 CSRF Token来保护你免受](https://docs.djangoproject.com/en/dev/ref/contrib/csrf/#how-to-use-it)[CSRF](http://en.wikipedia.org/wiki/Cross-site_request_forgery)的伤害。通常 - 如果您通过普通 POST 提交表单 - 它很容易启用，您只需执行以下操作：

```
<form action="." method="post">{% csrf_token %} 
```

但是因为您使用的是 AJAX，所以它有点复杂。查看 django 文档以获取[他们的建议](https://docs.djangoproject.com/en/dev/ref/contrib/csrf/#ajax)或查看[处理该问题的上一个问题](https://stackoverflow.com/questions/5100539/django-csrf-check-failing-with-an-ajax-post-request)。

本质上，您需要在使用 AJAX 时手动提供和提交令牌，但最好的解决方案似乎取决于您的 django 版本。

# c# - 即使没有按下 Enter 键也会被检测到

> ID：11812402
> 
> 赞同：0
> 
> 时间：2012-08-04T22:20:00.470
> 
> 标签：c#

目前，我有这个：

```
if ((input.Text.ToUpper() == "FURNACE" || input.Text.ToUpper() == "COAL") && count == 3)
                {
                    end3();
                }
                else
                {
                    MessageBox.Show("Unknown key");
                } 
```

但是，无论我输入 FURNACE、COAL 还是其他任何东西，它仍然会弹出“Unknown key”。为什么？

它在 KeyUp 事件下，如下所示：

```
private void input_KeyUp(object sender, KeyEventArgs e)
    {
        if (e.KeyData == Keys.Enter)
        { 
          //The earlier code I showed goes here
        }
    } 
```

计数各不相同，其中一个 if (input.Text.ToUpper...) 将计数加一，但它从零开始。

输入是一个文本框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T22:39:13.657

我认为您`e.SuppressKeyPress = true;`在输入后立即丢失了，`if`因此当您按 Enter 时，它不会在您的文本中显示为字符。

```
private void input_KeyUp(object sender, KeyEventArgs e)
{
    if (e.KeyData == Keys.Enter)
    { 
        e.SuppressKeyPress = true;
        if ((input.Text.ToUpper() == "FURNACE" || input.Text.ToUpper() == "COAL") && count == 3)
        {
            end3();
        }
        else
        {
            MessageBox.Show("Unknown key");
        }
    }
} 
```

# image - Clojure 不释放内存

> ID：11812409
> 
> 赞同：0
> 
> 时间：2012-08-04T22:20:55.207
> 
> 标签：image, clojure, jvm

我正在学习 Clojure，我想知道为什么我的应用程序会消耗这么多内存，并且在使用这些数据结构完成后不释放它。我想在 Clojure 中有一些我不知道的东西是让应用程序错误地*持有*一些东西。

这是一个简单的缩略图应用程序。它从一个目录中获取图像，调整它们的大小并将它们放入另一个目录。它使用`javax.imageio`和 `java.awt.image`库。

```
(def thumb "path to thumbnails directory")

(defn get-thumb-filename [thumb-dir filename width]
  (str thumb-dir (fs/name filename) "_" width ".jpg"))

(defn get-thumb-filename-100 [filename]
  (get-thumb-filename thumb filename 100))

(defn small-thumbnail [filename]
  (make-thumbnail filename (get-thumb-filename-100 filename) 100))

(defn make-thumbnail [filename new-filename width]
  (let [img (javax.imageio.ImageIO/read (as-file filename))
        imgtype (java.awt.image.BufferedImage/TYPE_INT_ARGB)
        width (min (.getWidth img) width)
        height (* (/ width (.getWidth img)) (.getHeight img))
        simg (java.awt.image.BufferedImage. width height imgtype)
        g (.createGraphics simg)]
    (.drawImage g img 0 0 width height nil)
    (.dispose g)
    (javax.imageio.ImageIO/write simg "png" (as-file new-filename))))

;; `images` is a list of original filenames
;; Kick it off with...
(pmap small-thumbnail images) 
```

此代码是 Noir 视图的一部分，这意味着在处理完所有图像后应用程序不会退出。

当我运行这段代码时，我的电脑开始发疯。风扇声音很大，主要的 java 进程使用了​​超过 1GB 的内存。处理完所有图像后，CPU 使用率下降到 < 5%，但内存使用率保持不变。

我怎样才能让它释放它*显然*不需要任何东西的所有这些内存？

谢谢！

PS：如果您需要我填写任何详细信息，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T14:44:51.560

JVM 管理它自己的内存。一旦它从操作系统获取内存，它通常不会将其归还。（或者至少我从未见过 Sun 的 JVM 这样做，可能有一些方法可以强制它......）

无论如何，使用您可能已经安装的工具来查看您的程序是否真的泄漏内存的一种简单方法是将 JConsole 附加到您的 JVM 并仅监视堆使用情况。查看活动监视器不会告诉您任何有用的信息。

[http://java.sun.com/developer/technicalArticles/J2SE/jconsole.html](http://java.sun.com/developer/technicalArticles/J2SE/jconsole.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T23:41:29.187

如果您在 repl 中执行此操作，则将`pmap`存储结果以`*1`供您以后使用；这不会在生产中发生，您可以在 repl 中阻止它发生，例如，`(dorun (pmap ...))`.

# magento - 将数量输入添加到 Magento 产品网格

> ID：11812410
> 
> 赞同：0
> 
> 时间：2012-08-04T22:21:01.123
> 
> 标签：magento, e-commerce

我的类别页面上有一个网格产品，每个产品图片下方都有一个“添加到购物车”按钮。我已经通过 list.phtml 文件编辑了这个网格的布局。如何在“添加到购物车”旁边添加数量输入框？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T04:21:39.730

如果只涉及简单的产品，这并不难。但是对于所有产品类型，它真的很复杂。

希望以下片段对您有所帮助：

```
<div class="product-list">
  <div class="product">
    <form class="product-<?php echo $_product_id?>" action="<?php // add to cart url?>">
      <input type="hidden" name="product" value="<?php echo $_product_id; ?>">
      <input type="text" name="qty">
      <button class="add-to-cart" value="add to cart">
    </form>
  </div>
</div>
<script>
   jQuery(function() {
      jQuery('.add-to-cart').click(function() {
        jQuery(this).parent().submit();
      });
   });
</script> 
```

顺便说一句，我想如果你已经实现了这个，AJAX 可能会给用户体验带来很大的改善，代码需要稍作改动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T04:28:51.013

您可能首先需要知道如何提交表单。提交“添加到购物车”操作时有一个表单。

正如 Ram Les 所回答的，您需要将“数量”输入框添加到表单中。因此，当您单击添加到购物车时，带有数量信息的表单将提交给控制器，控制器将从那里处理要添加的产品数量。

希望这有帮助。

# javascript - knockout.js 中的嵌套循环

> ID：11812414
> 
> 赞同：0
> 
> 时间：2012-08-04T22:22:24.767
> 
> 标签：javascript, loops, knockout.js, nested-loops, knockout-2.0

我开始学习一些 Web 编程并选择了 knockout.js，因为 MVVM 模式对我来说很熟悉，并且在 .Net 中有一些使用 MVVM 的经验。

但是我在使用嵌套数组制作循环时遇到了一些麻烦。该模型非常简单：我有一系列主题，每个主题都有一系列故事。

[您可以在Fiddle](http://jsfiddle.net/QCY4r/)上查看完整代码，但这里有一个简化版本：

ViewModel.js：

```
function Story(t, u, v) {
    var self = this;

    self.summary = ko.observable(t);
    self.url = ko.observable(u);
    self.up_votes = ko.observable(v);
}

function Topic(t) {
    var self = this;

    self.title = ko.observable(t);
    self.stories = ko.observableArray();
}

function TopicListViewModel() {
    var self = this;
    self.topics = ko.observableArray([]);
} 
```

主题.html：

```
<!-- ko foreach: topics -->
<div class="span2">
    <table cellpadding="2" cellspacing="2" style="width:100%" class="table">
        <thead>
            <tr>
                <th>
                    <span data-bind="text: title"> </span>
                </th>
            </tr>
        </thead>

        <tbody data-bind="foreach: $data.stories">
            <tr>
                <!--<a data-bind="attrib: { href: url, title: summary} "></a>-->
                <span data-bind="text: summary"> </span>
            </tr>
        </tbody>

    </table>
</div>
<!-- /ko -->​ 
```

我不断遇到的问题是在故事循环中。我不断得到，`Message: ReferenceError: summary is not defined;`但我在 Chrome 中调试了代码，故事确实是一组`summary`定义了属性的对象。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T00:43:41.523

当您将元素放入`tr`不在单元内的元素时，浏览器会方便地将它们移动到外部，以便它们与整个视图模型绑定。

因此，您只需要确保您的元素位于单元格内，例如：

```
<tr>
    <td>
       <a data-bind="attrib: { href: url, title: summary} "></a>
       <span data-bind="text: summary"> </span>
    </td>
</tr> 
```

这是您的小提琴的更新：http: [//jsfiddle.net/rniemeyer/QCY4r/1/](http://jsfiddle.net/rniemeyer/QCY4r/1/)

# c - 函数错误：double[] 加倍？

> ID：11812419
> 
> 赞同：0
> 
> 时间：2012-08-04T22:23:13.847
> 
> 标签：c, compiler-errors

我的作业有问题。我花了最后一个小时试图弄清楚。我个人没有看到任何语法错误。

这是错误

> 错误 1 ​​错误 C2440：“功能”：无法从“双 [49]”转换为“双”

这是它所指的行：

```
std_report(student_id, upexp_m, upexp_y, upinc_m, upinc_y, num); 
```

随着声明：

```
int student_id[MAX];
double upexp_m[MAX], upexp_y[MAX], upinc_m[MAX], upinc_y[MAX];

void std_report(int student_id[], double exp_m[], double exp_[], double income_m, double income_y, int size); 
```

和实施：

```
void std_report(int student_id[], double exp_m[], double exp_y[], double income_m[], double income_y[], int size) {
  printf("\n\n<STUDENT NAME> Budget Report (Student ID:%d\n", student_id[size]);
  printf("~~~~~~~~~~~~~~~~~~~~~\n");
  printf("Expenses\n~~~~~~~~\n\n");
  printf("%45c MONTHLY %6c ANNUALLY\n", ' ', ' ');
  printf("Total Expenses: %28c $ %.2lf %5c $ %.2lf\n", ' ', exp_m[size], ' ', exp_y[size]);
  printf("Total Income: %30c $ %.2lf %5c $ %.2lf\n", ' ',income_m[size], ' ',income_y[size]);
  printf("Total Savings Available for your goals: %4c $ %.2lf %6c $ %.2lf\n\n\n", ' ', income_m[size]-exp_m[size], ' ', income_y[size]-exp_y[size]);
  return;
} 
```

如果还有什么我可以粘贴的，请告诉我，我完全被难住了。任何帮助将不胜感激。

## 解决方案

原型中缺少一个`[]`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T22:34:15.850

解决此问题的一种分析方法：查看错误，它清楚地表明您的编译器正在尝试将`double`s ( `double[49]`) 数组转换为一个普通的`double`.

如果我们查看您的`std_report`函数，您正在使用带有数组下标的所有相关变量，因此错误不可能存在，您的编译器还会指示错误发生在您调用的行`std_report`。由于您作为参数传递的变量具有正确的类型，因此编译器必须假设其中一个参数具有不同的类型。

因此，我们必须检查您向编译器传达所需参数列表的所有点`std_report`，即**实现和*所有*声明**。

# ios - WebApp“随机”缓存某些页面而不是其他页面

> ID：11812421
> 
> 赞同：2
> 
> 时间：2012-08-04T22:23:34.977
> 
> 标签：ios, caching, web-applications

我正在尝试创建一个 web 应用程序，但在 iOS 5 上遇到了一个令人抓狂的问题。我有一个以线性四页“游览”开始的 web 应用程序。（例如 tour1 到 tour2，tour2 到 tour3，等等）

当我将网站保存为 webapp（不使用清单）时，它会缓存游览步骤 1、3 和 4，但不会缓存步骤 2 和步骤 4 之后的注册页面。这没有任何意义！

我已经尝试将 .htaccess 添加到索引目录和包含 tourX.html 文件的目录中，根据[Mobile Web App not clearing cache](https://stackoverflow.com/questions/8337631/mobile-web-app-not-clearing-cache-properly) proper 的建议。

我还清除了 Safari 缓存，删除了 Web 应用程序，并强制关闭了浏览器。我仍然得到相同的结果 - 出于某种原因，它可以提取 tour2.html 和 register.html 的最新副本，但拒绝提取其他页面的最新版本。感觉是随机的，但当然在计算机世界中没有什么是真正随机的。

有没有人在使用网络应用程序时遇到过这样的事情？

# android - 在 2.1 中将 TextToSpeech.Engine.ACTION_CHECK_TTS_DATA 用于非默认语言的正确方法是什么？

> ID：11812425
> 
> 赞同：4
> 
> 时间：2012-08-04T22:23:59.407
> 
> 标签：android, text-to-speech

```
Intent intent = new Intent();
intent.setAction(TextToSpeech.Engine.ACTION_CHECK_TTS_DATA);
startActivityForResult(intent, 0);

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
if(requestCode == 0){
if(resultCode == TextToSpeech.Engine.CHECK_VOICE_DATA_PASS){
Toast.makeText(getApplicationContext(),"Already Installed", Toast.LENGTH_LONG).show();
} else {
Intent installIntent = new Intent();
installIntent.setAction(TextToSpeech.Engine.ACTION_INSTALL_TTS_DATA);
startActivity(installIntent);
Toast.makeText(getApplicationContext(),"Installed Now", Toast.LENGTH_LONG).show();
}
}
} 
```

伙计们，上面的代码只有在**OS Default language == TTS installed language**时才有效。如果它们不同，它会分支到**ACTION_INSTALL_TTS_DATA**。显然，应该是**TextToSpeech.Engine.ACTION_CHECK_TTS_DATA**的附加数据来指定需要检查哪些语言数据，但我找不到。

当用户以英语作为默认操作系统语言运行法语 - 德语词典之类的东西时，会出现以下场景。

场景：SVOX + 德语、法语已安装。默认语言设置为英语或其他语言。关键不是德语或法语它看起来像**TextToSpeech.Engine.ACTION_CHECK_TTS_DATA**检查 SVOX 中是否存在英语并返回**CHECK_VOICE_DATA_FAIL**。如果语言设置为德语，则结果将为**CHECK_VOICE_DATA_PASS**

有类似的问题，但看起来试图回答的人并不完全理解问题。 [如何以编程方式了解我的设备中是否安装了任何 TTS 引擎？](https://stackoverflow.com/questions/10911530/how-to-get-to-know-programmatically-whether-any-tts-engine-installed-in-my-devic)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T18:49:38.387

你试过把额外的`TextToSpeech.Engine.EXTRA_CHECK_VOICE_DATA_FOR`

根据[此链接](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android-apps/4.1.1_r1/com/example/android/ttsengine/CheckVoiceData.java)中的源代码，它将使您能够传递您特别想检查的语音语言环境参数。

# java - Java参数验证，File存在，可以读取，是一个普通的File

> ID：11812426
> 
> 赞同：0
> 
> 时间：2012-08-04T22:24:38.073
> 
> 标签：java, validation

我有这段代码来验证一个`java.io.File`参数不应该是`null`，应该是可访问的，应该是文件而不是目录等：

```
private static final String EXCEPTION_FILE_CAN_NOT_BE_READ =
    "The file %s does not seem to readable.";
private static final String EXCEPTION_PATH_DOES_NOT_EXIST =
    "The path %s does not seem to exist.";
private static final String EXCEPTION_PATH_IS_NOT_A_FILE =
    "The path %s does not seem to correspond to a file.";
private static final String EXCEPTION_PATH_REFERENCE_IS_NULL =
    "The supplied java.io.File path reference can not be null.";

public static Banana fromConfigurationFile(
    File configurationFile) {
  if (configurationFile == null) {
    String nullPointerExceptionMessage =
        String.format(EXCEPTION_PATH_REFERENCE_IS_NULL, configurationFile);
    throw new NullPointerException();
  }
  if (!configurationFile.exists()) {
    String illegalArgumentExceptionMessage =
        String.format(EXCEPTION_PATH_DOES_NOT_EXIST,
            configurationFile.getAbsolutePath());
    throw new IllegalArgumentException(illegalArgumentExceptionMessage);
  }
  if (!configurationFile.isFile()) {
    String illegalArgumentExceptionMessage =
        String.format(EXCEPTION_PATH_IS_NOT_A_FILE,
            configurationFile.getAbsolutePath());
    throw new IllegalArgumentException(illegalArgumentExceptionMessage);
  }
  if (!configurationFile.canRead()) {
    String illegalArgumentExceptionMessage =
        String.format(EXCEPTION_FILE_CAN_NOT_BE_READ,
            configurationFile.getAbsolutePath());
    throw new IllegalArgumentException(illegalArgumentExceptionMessage);
  }
  // ... more tests, like "isEncoding(X)", "isBanana(ripe)", ...
} 
```

对于我可能从某个地方“捏”的东西，看起来有很多样板。特别是因为这些不是我需要的所有检查，还有更多（例如，文件是文本文件并且具有正确的编码，...）。在我看来，有比这更简单的方法来做到这一点似乎是合理的。也许一个 FileSpecs 对象要通过 Builder 构造并传递给 verifyFileSpecs 静态助手？

**问题：我做错了还是有可以重用的代码？**

对帖子有效性常见问题的回答：

表明我事先做了一些研究：我查看了 Java 6 SDK，这是我从中获得不同方法的地方，查看了 JDK 7 和 Files.isReadable，查看了 Apache Commons IO，...

说明这个问题是独一无二的：我是专门问有没有可以复用的代码，我不是问“如何检查路径对应的是文件而不是目录？”，这些都已经有了答案就这样

为什么这对其他人有用：团队不喜欢提交代码审查、签入和版本控制、可能维护（单元测试等）的样板代码。因此，从信誉良好的来源借用代码将非常有帮助， 在我看来。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T22:54:39.947

是的，我会说上面的代码不是`DRY (Don't Repeat Yourself)`.

考虑使用来自 Apache Commons 的[验证。](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/Validate.html)

```
public static Banana fromConfigurationFile(File configurationFile) {
  Validate.notNull(configurationFile, String.format(EXCEPTION_PATH_REFERENCE_IS_NULL, configurationFile));
  Validate.isTrue(configurationFile.exists(), String.format(EXCEPTION_PATH_DOES_NOT_EXIST, configurationFile.getAbsolutePath()));
  Validate.isTrue(configurationFile.isFile()), String.format(EXCEPTION_PATH_IS_NOT_A_FILE, configurationFile.getAbsolutePath()));
  // and more validation...

} 
```

# java - 我直接从“Java all in one for Dummies”中提取了这段代码……为什么它不起作用？

> ID：11812427
> 
> 赞同：4
> 
> 时间：2012-08-04T22:24:52.357
> 
> 标签：java, eclipse, swing, jframe, imageicon

```
import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;

@SuppressWarnings("serial")
public class Picture extends JFrame{

    public static void main(String[] args){

        new Picture();

    }

    public Picture(){

        this.setTitle("Picture");
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JPanel p = new JPanel();
        ImageIcon pic = new ImageIcon("TestImage.jpg");
        p.add(new JLabel(pic));
        this.add(p);
        this.pack();
        this.setVisible(true);
        System.out.println(pic);
    }

} 
```

这段代码只是显示一个折叠的框架。我希望 pack(); 方法调用会围绕我的 .jpg 图像调整框架的大小，对吗？

我已经可以听到第一个问题，是的，图像与我的项目包文件夹位于同一文件夹中。

我正在使用 Eclipse IDE。

我还添加了 println(); 语句以查看 Image 引用返回的内容并返回“TestImage.jpg”。我以为它会返回内存中图像的地址。？？

我整个早上都在阅读论坛，如果不复制和使用其他人更复杂的代码，我真的找不到任何可以帮助我的东西。我试图让这个尽可能简单，这样我就不会混淆自己。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-04T22:31:04.180

尝试：

```
ImageIcon image = new ImageIcon(getClass().getResource("TestImage.jpg")); 
```

有关更多详细信息，请参阅[如何使用图标](http://docs.oracle.com/javase/tutorial/uiswing/components/icon.html)教程，特别是[使用 getResource](http://docs.oracle.com/javase/tutorial/uiswing/components/icon.html#getresource)部分加载图像。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-04T22:30:29.513

> 该图像与我的项目包文件夹位于同一文件夹中

就是这样。

如所写，您的程序在*当前工作目录*中查找图像，而不是包层次结构。

从[构造函数的 Javadoc 中`String`](http://docs.oracle.com/javase/6/docs/api/javax/swing/ImageIcon.html#ImageIcon%28java.lang.String%29)，它根据需要从指定的文件名读取图像。但是，当您指定相对路径时，这意味着相对于运行应用程序的工作目录进行读取。

要解决此问题，您有 2 个选项：

*   指定相对于 IDE 运行程序的工作目录的图像文件名。我相信 Eclipse 在项目根目录中运行应用程序，并且源包层次结构植根于`src`. 在这种情况下，如果您指定`src/TestImage.jpg`. 缺点是如果您从不同的目录运行程序，则必须将图像文件一起移动。这对于分发/打包很不方便，因为您不能只删除 JAR 文件并让它运行。

*   使用 Java 的资源加载器从包层次结构中加载图像文件。为此，首先使用

    ```
    getClass().getResource("TestImage.jpg") 
    ```

    获取图像的 URL（相对于包根目录）。看到它[`ImageIcon`有一个构造函数，它接受一个 URL](http://docs.oracle.com/javase/6/docs/api/javax/swing/ImageIcon.html#ImageIcon%28java.net.URL%29)来读取图像。所以你应该使用

    ```
    new ImageIcon(getClass().getResource("TestImage.jpg")) 
    ```

    相对于包层次结构的优点是程序可以从任何位置运行，并且图像可以与您的应用程序捆绑在一个 JAR 文件中。

    另外：最好的做法是创建一个在其中放置代码和资源的包（而不是仅仅将它们放在包根目录中）。在这种情况下，请`"com/example/someapp/TestImage.jpg"`改为通过。

# spring - Spring数据+休眠

> ID：11812432
> 
> 赞同：1
> 
> 时间：2012-08-04T22:25:47.277
> 
> 标签：spring, hibernate, spring-data, spring-data-jpa

我正在使用 Spring Data 和 Hibernate，当我尝试使用 set id 保存实体时出现错误：

```
org.springframework.dao.InvalidDataAccessApiUsageException: detached entity passed to persist: com.snp.cm.persistency.contact.Contact; nested exception is org.hibernate.PersistentObjectException: detached entity passed to persist: com.snp.cm.persistency.contact.Contact
at org.springframework.orm.hibernate3.SessionFactoryUtils.convertHibernateAccessException(SessionFactoryUtils.java:668) 
```

请帮助我如何通过 JpaRepositories 更新实体或我错过了什么配置？

持久性.xml：

```
<?xml version="1.0" encoding="UTF-8"?> <persistence xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
version="2.0" xmlns="http://java.sun.com/xml/ns/persistence">
<persistence-unit name="contactManagerPU">
    <provider>org.hibernate.ejb.HibernatePersistence</provider>

    <class>com.snp.cm.persistency.contact.Contact</class>
    <class>com.snp.cm.persistency.contact.TelephoneNumber</class>

    <exclude-unlisted-classes>false</exclude-unlisted-classes>

    <properties>
        <property name="hibernate.max_fetch_depth" value="3" />
    </properties>
</persistence-unit> 
```

春天的背景：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?><beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:aop="http://www.springframework.org/schema/aop"
xmlns:context="http://www.springframework.org/schema/context"
xmlns:jee="http://www.springframework.org/schema/jee" xmlns:tx="http://www.springframework.org/schema/tx"
xmlns:p="http://www.springframework.org/schema/p" xmlns:jdbc="http://www.springframework.org/schema/jdbc"
xmlns:util="http://www.springframework.org/schema/util"
xsi:schemaLocation="http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc.xsd
    http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee.xsd
    http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
    http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
    http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.0.xsd"
default-lazy-init="true">

<import resource="classpath*:META-INF/spring/dbs-repository-context.xml" />

<!-- Activates JPA's @PersistenceContext and @PersistenceUnit (if available) 
    annotations to be detected in bean classes. -->
<context:annotation-config />

<!-- Enable Transaction using @Transactional annotation -->
<tx:annotation-driven />

<bean id="daTM"
    class="org.springframework.jdbc.datasource.DataSourceTransactionManager"
    p:dataSource-ref="dataSource" />

<!-- Create local transaction manager -->
<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager"
    p:entityManagerFactory-ref="entityManagerFactory" lazy-init="true"
    p:dataSource-ref="dataSource" />

<!-- Create EntityManagerFactory for injection into services. -->
<bean id="entityManagerFactory"
    class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean"
    p:dataSource-ref="dataSource" p:persistenceXmlLocation-ref="persistenceXmlLocation">
    <property name="jpaVendorAdapter">
        <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
            <property name="showSql" value="true" />
        </bean>
    </property>
</bean>

<!-- Database access configuration -->
<bean id="persistenceXmlLocation" class="java.lang.String">
    <constructor-arg value="classpath*:META-INF/persistence.xml"></constructor-arg>
</bean>

<context:property-placeholder
    location="classpath:META-INF/spring/jdbc.properties" />

<!-- Dev's env DataSource -->
<bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource"
    destroy-method="close">
    <property name="driverClassName" value="${jdbc.driver}" />
    <property name="url" value="${jdbc.url}" />
    <property name="username" value="${jdbc.username}" />
    <property name="password" value="${jdbc.password}" />
</bean> 
```

我在另一个项目中使用了 OpenJpa 并且没有这样的问题：如果实体设置了 ID，则“保存”方法确实创建和更新。那么如何更新对象呢？我应该实现自己的更新方法吗？

测试失败：

```
@Test
public void testRepositorySaveMethod() {
    Contact contact = new Contact();
    contact.setLastName("Carter");
    contact.setName("John");
    contact.setNickName(null);
    contact = this.contactRepository.save(contact);
    Assert.assertNotNull(contact.getContactId());

    TelephoneNumber telephoneNumber1 = new TelephoneNumber();
    telephoneNumber1.setTelephoneNumber("777 7777777");
    telephoneNumber1.setContact(contact);
    telephoneNumber1.setTelephoneType(TelephoneType.HOME);
    this.telephoneNumberRepository.save(telephoneNumber1);    // failes cause contact has already id

    contact = this.contactRepository.findOne(contact.getContactId());

    Assert.assertEquals(1, contact.getTelephoneNumbers().size());
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T17:54:26.890

原因如下。存储库代理的`save(…)`方法是事务性的。由于您已经`JpaTransactionManager`配置了 Hibernate 的生命周期，因此`Session`将绑定到事务。当调用从您的测试用例返回时，这会导致`Session`（和事务）被关闭。`save(…)`因此，实体不再附加到`Session`，这会导致您稍后看到的异常。

测试用例中的解决方案通常是将测试方法标记为`@Transactional`. 假设您使用的是 Spring 测试上下文框架，这将导致`Session`整个测试方法的一个事务（以及一个 ）被打开（并保持打开状态）。

除此之外， the 的声明`DataSourceTransactionManager`已经过时，因为您似乎没有在任何地方使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T22:31:17.163

一切都是这样说的：`detached entity passed to persist`

可能您正在尝试执行以下操作：

```
Entity detachedEntity = getDetachedEntitySomehow();
em.persist(detachedEntity); // it is causing error. 
```

似乎`id`为您的实体设置了任何尝试使用`persist`.

你也可以看看这个答案：[“detached entity passing to persist error” with JPA/EJB code](https://stackoverflow.com/questions/2441598/detached-entity-passed-to-persist-error-with-jpa-ejb-code)

# android - 制作 Android 应用程序时是否需要注意内存管理技巧？

> ID：11812437
> 
> 赞同：9
> 
> 时间：2012-08-04T22:27:14.717
> 
> 标签：android, android-layout, android-memory

我最近在一次关于 Android 的采访中被问到了一些问题。我搜索了其中一些，但找不到合适的资源和答案。所以想在这里跟大家分享一下。

1.  在 Android 中使用的首选布局是什么（为了更好的内存消耗等）？我没有答案，面试官告诉我这是相对布局。这是真的 ？对此有何解释？

2.  告诉我一些你为了更好的内存消耗而做的练习？我在[这里](http://developer.android.com/guide/practices/performance.html)看了看，但似乎还有其他东西。因为面试官提到了一些和静态变量相关的东西比较好。

3.  如果 Android 需要内存，它会杀死服务或 Activity 吗？一个优先问题。我也没有找到任何人讨论这个。面试官说 Service 的某些事情比活动具有高优先级（??），因此活动是将被杀死的组件。这是真的 ？任何进一步的资源或解释？

请分享您了解的有关此问题的任何知识或资源。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-04T22:57:34.860

一一解答：

**编号。1**

~~听起来不对。~~说它**总是**比任何其他布局都快`RelativeLayout`是错误的。使布局“快”或“慢”的原因是计算所有子项的位置和大小需要多长时间。因此，当您只显示 15 行时，一个在另一个之下，a肯定会更快（并且使用起来更不麻烦）。**`TextView``LinearLayout`**

 **一般来说，我建议使用最适合您情况的布局。

**编号。2**

首选静态变量的“优点”是它们只被初始化（并因此在内存中）一次。但这更像是一种设计决策，而不是性能决策。

您应该避免在内存中使用大量嵌套集合（例如`List<List<HashMap<?,?>>`），但这应该是常识。对象创建的问题是，如果您创建许多对象并且不保留对它们的任何引用，它们将被垃圾收集。这将为您的应用程序增加运行时开销。

**编号。3**

这既是对的，也是错的。服务可以以不同的优先级启动。但是，在您的应用程序使用的任何东西（无论是服务还是活动）被杀死之前，后台应用程序及其资源将被释放。

对于服务，文档提供了多个提示：

> **只要服务已启动或绑定了客户端**，Android 系统就会尝试保持托管服务的进程。当内存不足并需要终止现有进程时， **托管服务的进程的优先级将是以下可能性中的较高者**：[[完整列表]](http://developer.android.com/reference/android/app/Service.html#ProcessLifecycle)

在活动中，[列出了以下内容](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)：

> 一个活动基本上有四种状态：
> 
> *   如果某个活动在屏幕的前台（在堆栈的顶部），则它处于活动状态或正在运行。
>     
>     
> *   如果一个**活动失去焦点**但仍然可见（也就是说，一个新的非全尺寸或透明活动的焦点位于您的活动之上），它会被暂停。暂停的活动是完全活动的（它维护所有状态和成员信息并保持连接到窗口管理器），**但可以在内存极低的情况下被系统杀死。**
>     
>     
> *   如果一个**活动被另一个活动完全遮挡**，它就会停止。它仍然保留所有状态和成员信息，但是，它不再对用户可见，因此它的窗口是隐藏的，并且 **当其他地方需要内存时，它通常会被系统杀死。**
>     
>     
> *   如果一个**活动被暂停或停止，系统可以通过要求它完成或简单地终止其进程来从内存中删除该活动。**当它再次显示给用户时，它必须完全重新启动并恢复到之前的状态。

因此，对于活动，它取决于当前状态它被杀死的可能性有多大。

**结论**

“MA Jackson”对优化的引用：

> 我们在优化问题上遵循两条规则：
> 规则 1：不要这样做。
> 规则 2（仅适用于专家）：不要这样做——也就是说，在你有一个完全清晰且未优化的解决方案之前不要这样做。

不使用特定平台功能，因为它“太慢”通常是一个坏主意。Google 和 Oracle 非常注意*尽可能优化*他们的标准库。让专家担心这样的事情。**

# jquery - JSONP：需要回调吗？

> ID：11812440
> 
> 赞同：2
> 
> 时间：2012-08-04T22:27:46.340
> 
> 标签：jquery, json, web-services, jsonp

我正在使用 AJAX、jQuery 和 Phonegap 创建一个 iOS / Droid 应用程序。后端是通过 Web 服务提供内容的 Drupal 7 站点。不过，我对 JSONP 回调的必要性有点困惑。

我的理解是，为了允许跨域请求，需要 JSONP。而且，在某种程度上，它通过将 JSON 数据包装在回调函数中来工作，从而使其成为一个对象。

但是，我发现我可以在没有回调的情况下发送 JSONP 请求，并通过 jQuery 解析数据而无需回调函数。因此 JSONP 数据看起来与 JSON 数据完全一样。

我错过了什么吗？如果将数据作为函数提供是 JSONP 的好处之一，那么在流程的某个阶段不应该需要它吗？我是否通过不发送回调参数来绕过某种级别的安全性？

谢谢！

仅供参考，这里是 jQuery AJAX 代码：

```
$.ajax({
    type: 'GET',
    cache: false,
    url: 'http://www.example.com/mobile/menu/devel-gosto.jsonp',
    dataType: 'jsonp',
    timeout: menuLoadTimeout,
    success: function (data) {
        menu = populateSlider(data.tree, 0);
    }
}); 
```

因此，我将 dataType 设置为“jsonp”，调用返回 JSONP 数据的 Web 服务，但将回调保留在 URL 之外。Web 服务在没有回调包装器的情况下进行响应。一切正常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T22:41:18.347

JSONP 是为了响应同源策略 (SOP) 而设计的，该策略指出，如果 HTML 页面是从一个域提供的，那么网页（一旦交付给客户端）就不能对上的站点进行“Ajax 调用”不同的域。如果对同一个域进行了“Ajax 调用”，那么一切都很好。（也许是你看到的？）

现在，您不能对不同的域进行 Ajax 调用，但*可以*使用脚本标记来调用不同域上的代码（看图，嗯？）。现在的问题是，假设您在脚本标签中调用了一个不同的域，并返回了一些 JSON 文本。你会*怎么*处理它？这就是 JSONP 的用武之地。如果服务器发回一些包装在函数调用中的 JSON，那么当您评估该（包装的）对象时，您现在正在“用它做一些事情”。

不过最近，大多数浏览器都支持[CORS](http://www.w3.org/TR/cors/)，因此不需要 JSONP。然而，一些较旧的浏览器不支持 CORS，但这些浏览器越来越少。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-04T22:46:58.383

如果没有回调，JSONP 调用将无法工作。数据加载在`script`标签中，如果代码不是方法调用的形式，结果只是一个被丢弃的对象，`success`永远不会调用回调方法。

`ajax`即使您没有指定回调参数，该方法也会向 URL 添加回调参数。

在文档中，在设置的`"jsonp"`值下`dataType`：

> “在 URL 的末尾添加一个额外的“？callback=？”以指定回调。”

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T22:42:08.370

> 是否需要回调？

当然是。回调对于[JSON-with- *padding*](http://en.wikipedia.org/wiki/JSONP)的定义非常重要。没有，它只是 JSON。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-16T13:25:02.860

是的，这是必需的。默认函数名是**callback**，但可以是任何声明的函数名。

[https://jar-download.com/java-documentation-javadoc.php?a=jersey-json&g=com.sun.jersey&v=1.19.2](https://jar-download.com/java-documentation-javadoc.php?a=jersey-json&g=com.sun.jersey&v=1.19.2)

它为我们提供了一种访问返回数据的方法。它通过让服务器返回包装在函数调用（“填充”）中的 JSON 数据来实现这一点，然后浏览器可以解释这些数据。此函数必须在评估 JSONP 响应的页面中定义。

[看这里](https://www.sitepoint.com/jsonp-examples/)

# google-maps-api-3 - 无论 z-index 设置如何，平面图覆盖都隐藏在地图视图后面

> ID：11812448
> 
> 赞同：1
> 
> 时间：2012-08-04T22:29:17.040
> 
> 标签：google-maps-api-3, overlay

我正在将平面图覆盖应用于 Google 地图中建筑物的卫星视图。为此，我遵循[了这个示例](https://google-developers.appspot.com/maps/documentation/javascript/examples/overlay-simple)，但无论 z-index 设置如何，叠加层都隐藏在地图窗格的后面。

我正在使用该`OverlayView()`函数，其中定义了 onAdd 函数

```
overlayFloorPlan.prototype.onAdd = function(){
  // Create the DIV and set some basic attributes.
  var div = document.createElement('div');
  div.style.borderStyle = 'none';
  div.style.borderWidth = '0px';
  div.style.position = 'absolute';
  div.style.zIndex = '100000'; //this number makes no difference

  // Create an IMG element and attach it to the DIV.
  var img = document.createElement('img');
  img.src = this.image_;
  img.style.width = '100%';
  img.style.height = '100%';
  img.style.position = 'absolute';
  img.style.opacity = "0.7";
  //img.style.zIndex = "100000";
  div.appendChild(img);

  // Set the overlay's div_ property to this DIV
  this.div_ = div;

  // We add an overlay to a map via one of the map's panes.
  // We'll add this overlay to the overlayImage pane.
  var panes = this.getPanes();
  panes.overlayImage.appendChild(div); 
} 
```

奇怪的是，在页面加载过程中，我可以在一瞬间看到覆盖图像，然后它就消失了。

更奇怪的是，这个确切的代码在我工作的开发机器上渲染得很好，但在我家里的本地机器上却不行。我可以远程进入并按预期查看叠加层。两台机器都运行相同的最新版本的 Ubuntu，只是内核版本不同。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T13:50:10.080

您有包含绝对定位的图像的 DIV，但它没有指定大小。图像也是绝对定位的，并且具有 100% 的高度和宽度，但 100% 是什么？由于 DIV 没有大小，因此图像大小为 100%。要么给 DIV 一个大小，要么给图像一个特定的大小，它应该会出现。

您还应该使用overlayLayer 窗格而不是overlayImage。

# android - 如何将从 sd 卡加载的图像缩放到图像视图中？

> ID：11812455
> 
> 赞同：-1
> 
> 时间：2012-08-04T22:30:22.310
> 
> 标签：android, android-layout, android-intent

我想将从 sd 卡加载的图像缩放到图像视图中。

**问题**是，每当我从 sd 卡加载图像时，图像就会全屏显示，并且我已经根据其他问题设置了所有参数 fill_parent viewbounds scaletype 等。

应该怎么做？

```
<ImageView
    android:id="@+id/imageView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/Frame"
    android:layout_alignLeft="@+id/Load1"
    android:adjustViewBounds="true"
    android:cropToPadding="true"
    android:scaleType="fitXY"
    android:src="@android:drawable/alert_light_frame" />

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_centerHorizontal="true"
    android:layout_marginBottom="14dp"
    android:scaleType="fitXY"
    android:src="@android:drawable/alert_light_frame" /> 
```

这是我的图像视图代码你能告诉我要改变什么，以便图像根据图像视图大小出现吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T00:04:38.460

使用`fitCenter`比例类型。`ImageView`在您的布局定义中，为您的 s使用以下属性

```
android:scaleType="fitCenter" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T02:25:01.720

如果图像视图很大并且您尝试加载大图像，那么布局正在执行它应该做的事情。

因此，要么给 ImageView 一个固定的宽度/高度，而不是 wrap_content，要么你必须根据你的手机屏幕尺寸来缩放 imagedown。

试试这个链接：[如何在 Android 上缩小图像以获得更好的质量？](https://stackoverflow.com/questions/3964939/how-to-scale-down-the-image-for-better-quality-on-android) 以及这里的一些提示：[如何在 ImageView 中缩放图像以保持纵横比](https://stackoverflow.com/questions/2521959/how-to-scale-an-image-in-imageview-to-keep-the-aspect-ratio)

# oauth-2.0 - Google API - 来自 Oauth2 的令牌请求返回“invalid_request”

> ID：11812459
> 
> 赞同：4
> 
> 时间：2012-08-04T22:30:43.967
> 
> 标签：oauth-2.0

我知道以前有人问过这个问题，但是其他帖子中的建议没有帮助。我成功地从谷歌收到了一个授权令牌，但是当我尝试获取访问令牌时，我得到了一个 invalid_request。

我们在 PHP 中的第一次尝试导致了该响应，当我通过我的 HTTP 客户端尝试它时，我得到了相同的结果。最后，我直接用 CURL 试了一下，结果还是一样：

```
curl -v -k --header "Content-Type: application/x-www-form-urlencoded" \
-F 'code=4/U2su0fwiynq4v8J8xD56ohfF0fX6.EhP0brx3cosbuJJVnL49Cc8EFE7ncQI' \
-F 'client_id=012345678901-abcdefghijklmnopqrstuvwxyz012345.apps.googleusercontent.com' \
-F 'client_secret=ABC123ABC123ABC123ABC123' \
-F 'grant_type=authorization_code' \
-F 'redirect_uri=https://app.myserver.com/googleLogin.php' \
https://accounts.google.com/o/oauth2/token 
```

我收到的回复是：

```
> https://accounts.google.com/o/oauth2/token
* About to connect() to accounts.google.com port 443 (#0)
*   Trying 173.194.77.84... connected
* Connected to accounts.google.com (173.194.77.84) port 443 (#0)
* SSLv3, TLS handshake, Client hello (1):
* SSLv3, TLS handshake, Server hello (2):
* SSLv3, TLS handshake, CERT (11):
* SSLv3, TLS handshake, Server finished (14):
* SSLv3, TLS handshake, Client key exchange (16):
* SSLv3, TLS change cipher, Client hello (1):
* SSLv3, TLS handshake, Finished (20):
* SSLv3, TLS change cipher, Client hello (1):
* SSLv3, TLS handshake, Finished (20):
* SSL connection using RC4-SHA
* Server certificate:
*      subject: C=US; ST=California; L=Mountain View; O=Google Inc; CN=accounts.google.com
*      start date: 2011-07-21 00:00:00 GMT
*      expire date: 2013-07-18 23:59:59 GMT
*      common name: accounts.google.com (matched)
*      issuer: C=ZA; O=Thawte Consulting (Pty) Ltd.; CN=Thawte SGC CA
*      SSL certificate verify ok.
> POST /o/oauth2/token HTTP/1.1
> User-Agent: curl/7.21.4 (universal-apple-darwin11.0) libcurl/7.21.4 OpenSSL/0.9.8r zlib/1.2.5
> Host: accounts.google.com
> Accept: */*
> Content-Length: 771
> Expect: 100-continue
> Content-Type: application/x-www-form-urlencoded; boundary=----------------------------0d3dc3507a7f
> 
* Done waiting for 100-continue
< HTTP/1.1 400 Bad Request
< Cache-Control: no-cache, no-store, max-age=0, must-revalidate
< Pragma: no-cache
< Expires: Fri, 01 Jan 1990 00:00:00 GMT
< Date: Sat, 04 Aug 2012 22:07:07 GMT
< Content-Type: application/json
< X-Content-Type-Options: nosniff
< X-Frame-Options: SAMEORIGIN
< X-XSS-Protection: 1; mode=block
< Server: GSE
< Transfer-Encoding: chunked
< 
{
  "error" : "invalid_request"
* Connection #0 to host accounts.google.com left intact
* Closing connection #0
* SSLv3, TLS alert, Client hello (1): 
```

我在发送之前没有对任何内容进行 url 编码，但是当我这样做时，我会得到相同的结果。

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-05T01:41:03.073

尝试使用 OAuth 2.0 Playground 执行相同的请求并将它们与您的进行比较：

[https://code.google.com/oauthplayground/](https://code.google.com/oauthplayground/)

# windows-phone-7 - 在 Windows Phone 应用程序中一起使用 MVVM Light 和 AgFx

> ID：11812460
> 
> 赞同：0
> 
> 时间：2012-08-04T22:30:54.543
> 
> 标签：windows-phone-7, mvvm-light, restsharp, reactiveui, agfx

所以我刚开始开发 Windows Phone 应用程序，之前我没有任何使用 Silverlight 或 WPF（实际上是任何基于 XAML 的平台）的经验。自然地，在我加入之前，我开始做大量的研究和学习，我必须说这有点不知所措。

我决定的事情是我希望我的应用程序遵循 MVVM 模式，并且因为它会不断与 REST Web 服务通信，所以我也希望有一个好的缓存框架。

我目前正在将 MVVM Light、RestSharp、Silverlight Toolkit、Facebook C# SDK 和 Twitterizer 作为主要使用的库。（实际上我只需要 Facebook 和 Twitter 进行身份验证和授权，因此最终可能根本不使用这些库，而让 RestSharp 也能处理）。

真正的问题是，因为这是我的第一次，我无法真正决定是使用 MVVM Light 还是 RestSharp 之类的东西，后者具有一些很好的功能，例如使 MVVM 易于使用或 AgFx，我听说它非常擅长数据缓存。此外，我已经看到 Rx 被提及的次数足够多，也可以将其视为一种选择，但从我到目前为止所阅读的内容来看，它不适用于 MVVM Light 或 AgFx。虽然也有 ReactiveUI 框架。

任何关于采用什么平台的想法或建议都会在这里受到赞赏。就像我之前提到的，我的应用程序将完全依赖于 REST 后端，并且会主动使用手机上的位置服务（我的应用程序实际上是基于位置的）。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T21:58:09.363

ReactiveUI 与 MVVM Light 配合得很好。这是[一篇关于如何做到这一点的文章](http://blog.paulbetts.org/index.php/2011/04/04/using-reactiveui-with-mvvm-light-or-any-other-framework/)

# c++ - Boost.Python link errors under Windows/MSVC10

> ID：11812463
> 
> 赞同：3
> 
> 时间：2012-08-04T22:31:14.177
> 
> 标签：c++, python, boost, boost-python

I compiled the boost 1.50.0 libraries using b2 with the correct Python configuration. Here's the relevant ouput from the command *`b2 --debug-configuration`*:

```
notice: [python-cfg] Configuring python...
notice: [python-cfg]   user-specified cmd-or-prefix: "C:\Python33z\python"
notice: [python-cfg] Checking interpreter command "C:\Python33z\python"...
notice: [python-cfg] running command 'DIR /-C /A:S "C:\Python33z\python.exe" 2>&
1'
notice: [python-cfg] running command '"C:\Python33z\python" -c "from sys import
*; print('version=%d.%d\nplatform=%s\nprefix=%s\nexec_prefix=%s\nexecutable=%s'
% (version_info[0],version_info[1],platform,prefix,exec_prefix,executable))" 2>&
1'    notice: [python-cfg] Configuring python...
notice: [python-cfg]   user-specified cmd-or-prefix: "C:\Python33z\python"
notice: [python-cfg] Checking interpreter command "C:\Python33z\python"...
notice: [python-cfg] running command 'DIR /-C /A:S "C:\Python33z\python.exe" 2>&
1'
notice: [python-cfg] running command '"C:\Python33z\python" -c "from sys import
*; print('version=%d.%d\nplatform=%s\nprefix=%s\nexec_prefix=%s\nexecutable=%s'
% (version_info[0],version_info[1],platform,prefix,exec_prefix,executable))" 2>&
1'
notice: [python-cfg] ...requested configuration matched!
notice: [python-cfg] Details of this Python configuration:
notice: [python-cfg]   interpreter command: "C:\Python33z\python"
notice: [python-cfg]   include path: "C:\Python33z\Include"
notice: [python-cfg]   library path: "C:\Python33z\libs"
notice: [python-cfg]   DLL search path: "C:\Python33z"
notice: [msvc-cfg] msvc-10.0 detected, command: 'C:\Program Files (x86)\Microsof
t Visual Studio 10.0\VC\bin\cl.exe'
notice: will use 'C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\bin\cl.
exe' for msvc, condition <toolset>msvc-10.0

...updating 4 targets...
msvc.archive bin.v2\libs\python\build\msvc-10.0\debug\link-static\threading-mult
i\libboost_python3-vc100-mt-gd-1_50.lib
common.copy stage\lib\libboost_python3-vc100-mt-gd-1_50.lib
bin.v2\libs\python\build\msvc-10.0\debug\link-static\threading-multi\libboost_py
thon3-vc100-mt-gd-1_50.lib
        1 file(s) copied.
msvc.archive bin.v2\libs\python\build\msvc-10.0\release\link-static\threading-mu
lti\libboost_python3-vc100-mt-1_50.lib
common.copy stage\lib\libboost_python3-vc100-mt-1_50.lib
bin.v2\libs\python\build\msvc-10.0\release\link-static\threading-multi\libboost_
python3-vc100-mt-1_50.lib
        1 file(s) copied.
...updated 4 targets...

The Boost C++ Libraries were successfully built! 
```

I have set the linker directories correctly and linked to the appropriate output files (`libboost_ python3-vc100-mt-1_50.lib` on release, and `libboost_python3-vc100-mt-gd-1_50.lib` on debug). I am using a self compiled python distribution, but I've tried with the standard ones too and the result isn't any different.

The link errors I'm getting when I compile are:

```
error LNK2019: unresolved external symbol "__declspec(dllimport) protected: __thiscall boost::python::detail::str_base::str_base(char const *)" (__imp_??0str_base@detail@python@boost@@IAE@PBD@Z) referenced in function "public: __thiscall boost::python::str::str(char const *)" (??0str@python@boost@@QAE@PBD@Z)
error LNK2019: unresolved external symbol "__declspec(dllimport) public: __thiscall boost::python::detail::str_base::~str_base(void)" (__imp_??1str_base@detail@python@boost@@QAE@XZ) referenced in function "public: __thiscall boost::python::str::~str(void)" (??1str@python@boost@@QAE@XZ)
error LNK2019: unresolved external symbol "__declspec(dllimport) class boost::python::api::object __cdecl boost::python::import(class boost::python::str)" (__imp_?import@python@boost@@YA?AVobject@api@12@Vstr@12@@Z) referenced in function _main
fatal error LNK1120: 3 unresolved externals 
```

The test code which produced those errors boils down to:

```
using namespace boost::python;
object main_module = import("__main__"); 
```

I have used `Boost.Filesystem` with the same build configuration and it didn't cause me any problems.

I hope somebody can help me with this issue, it's really confusing me!

**Update**: *I just read some vague text about the define `BOOST_PYTHON_STATIC_LIB`*; i'm not sure if i'm headed in the right direction with this (since afaik it wasn't mentioned in the build process), but either way, it gives me an even more confusing error:

```
LINK : fatal error LNK1104: cannot open file 'python27.lib' 
```

I don't know why it trys to link with that lib when the python-cfg output clearly shows it found my python33 dist (which my application is already linking with; python33.lib).

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-05T17:56:22.423

First problem: It turns out defining `BOOST_PYTHON_STATIC_LIB` was indeed the correct way to fix the unresolved external link errors. It appears to be a necessary define when linking with the static lib; this seems obvious, but it is *not* mentioned here: [http://www.boost.org/doc/libs/1_50_0/libs/python/doc/building.html](http://www.boost.org/doc/libs/1_50_0/libs/python/doc/building.html).

Second problem: After adding that define, the next link error happened because I didn't run `b2 clean` before re-building with the correct Python configuration (ie. nothing was re-compiled until cleaned!), this should have been obvious from the lack of compiler related output, but it did fool me, so it's just another little thing to look out for.

# javascript - “撤消” Javascript 中的 DOM 操作函数

> ID：11812465
> 
> 赞同：3
> 
> 时间：2012-08-04T22:32:39.270
> 
> 标签：javascript

我对 Javascript 很陌生（但不是编程）。我的页面中有两个现成的功能，它们可以分别很好地工作：

1.  `<p>`一种是更改某些元素中的字体大小。
2.  另一个神奇地将`<p>`元素分成几行，并用`<span>`. 这样我可以突出显示指针悬停在其上方的行。

当使用第一个函数来增加字体大小时（比如说，单击一个按钮），整个行结构发生了变化，并且`<span>`s 不再位于正确的位置。

所以基本上我希望我的字体大小增加按钮首先“撤消”第二个功能的动作。

我的问题是我是否必须手动编写一个函数来撤消段落的换行符（删除`<span>`s），或者 Javascript 是否能够将页面恢复到调用函数之前的某个点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T22:38:06.533

您不能“撤消”函数调用。你想要做的是`p`像这样剥离标签内的 HTML 标签：

```
pelement.innerHTML = pelement.innerText; 
```

这剥夺了所有`span`元素。您可以增加字体大小并在之后应用您的 spanify 功能。

Derija93 的一个重要提示：这种技术确实会去除段落中的每个 HTML 标记，而不仅仅是`span`标记。

jwatt1980 的另一个重要提示：`innerText`不是 100% 跨浏览器兼容。有关详细信息，请参阅链接：[http ://www.quirksmode.org/dom/w3c_html.html#t04](http://www.quirksmode.org/dom/w3c_html.html#t04)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T22:47:25.610

没有内置的方法。但是，您可以将更改保存到变量并恢复该变量以撤消。以下两个示例有点复杂，但我相信它们可以工作。

**示例 1 — 将整个内容恢复为原始/页面加载格式：**

```
<script>
var orignalContent;

function setContent(content) {
    document.getElementById('changableContent').innerHTML = content;
}

function getContent() {
    return document.getElementById('changableContent').innerHTML;
}

function resetContent() {
    updateContent(originalContent);
}

window.onload = function() {
    originalContent = getContent();

    document.getElementById('resetButton').onclick = resetContent;
};
</script> 
```

**示例 2 - 通过更改重置更改（可能会遇到较大的变量...您可以添加一种方法来限制撤消步骤）**

```
<script>
var contentChanges;

function setContent(content, save) {
    if(save !== false) {
        contentChanges.push(content);
    }
    document.getElementById('changableContent').innerHTML = content;
}

function undoChange() {
    setContent(contentChanges.pop(), false);
}

window.onload = function() {
    document.getElementById('undoButton').onclick = undoChange;
};
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T23:08:54.930

更改您的 addSpans 代码以向仅由 addSpans 使用的跨度添加一个额外的类。创建一个名为 undoSpans 的新函数。它使用 jquery 通过获取该类的所有元素来获取所有跨度。然后它可以遍历它们，调用 .innerHTML() 并将结果插入父节点，然后删除跨度。此时，您可以调整字体大小，然后重新跨度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-04T22:50:56.313

您将需要编写自己的函数。一种可能性是在转换之前存储文本的原始状态，例如使用公共变量或隐藏元素。您还可以使用`element.getElementsByTagName()`获取元素中的所有跨度并使用 重建文本`element.innerHTML`。

这样的事情可能会“撤消”跨度。

```
var pList = document.getElementsByTagName('p'); //get all p elements
var p, s, sList, text;

for (p = 0; p < pList.length; p++) {
   sList = pList[p].getElementsByTagName('span'); //get all spans within a p
   text = '';

   for (s = 0; s < sList.length; s++) 
      text += sList[s].innerHTML + ' '; //reconstruct the text

   pList[p].innerHTML = text; //update the p back to non-span text
} 
```

如果您只想删除某个类的跨度，您可以使用类似这样的内容更新第二个 for 循环

```
for (s = 0; s < sList.length; s++) {
   if (s.className && s.className != 'classname') {
      text += (sList[s].outerHTML) ? sList[s].outerHTML : '<span class="' + sList[s].className + '">' + sList[s].innerHTML + '</span>';
   } else {
      text += sList[s].innerHTML + ' ';
   }
} 
```

# ruby-on-rails - 用于在轮播中显示许多图像的 ruby 代码

> ID：11812469
> 
> 赞同：1
> 
> 时间：2012-08-04T22:33:55.240
> 
> 标签：ruby-on-rails, carousel

我必须在轮播推特引导程序中显示 30 多张图像。所以我写了那里提到的代码。显示一张图片的代码如下：

```
<div id="carousel" class="carousel">
  <div class="carousel-inner">  
    <div class="item active">
      <%= image_tag('1.JPG',:size => '600x400', :alt => "College Building") %>
    <div class="carousel-caption"></div>
  </div> 
</div> 
```

上面的 html 代码是在轮播中显示一张图片。同样，对于其他图像，我们必须使用其他图像的名称再次编写相同的代码。我的问题是我们如何在 ruby​​ 中编写代码来显示多个图像。我试过使用像这样的数组

```
# in controller
@image["1.jpg","2.jpg",...] 
@image.each do|n|

# in HTML page
<%=image_tag("n",:size => '600x400')%> 
```

我是初学者，所以请尽可能解释代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T22:43:39.353

看起来您的代码在正确的轨道上：

控制器：

```
# You have to assign the array to the @images variable
@images = [ "1.jpg", "2.jpg", ... ] 
```

看法：

```
<% @images.each do |n| %>

  <%

  # You have to use the `n` variable, not the literal
  # string "n" that you used in your sample code. Notice
  # the lack of quotes here:

  %>

  <%= image_tag( n, :size => '600x400' ) %> 

<% end %> 
```

您可能希望分配一个哈希数组，以便您可以存储图像文件名之外的其他信息，例如：

控制器：

```
@images = [

  { 'file' => "1.jpg", 'alt' => "College Building" },

  { 'file' => "2.jpg", 'alt' => "Something else" }

] 
```

看法：

```
<% @images.each do |image| %>

  <%= image_tag(

    image[ 'file' ], :size => '600x400', :alt => image[ 'alt' ]

  ) %>

<% end %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T17:53:25.633

1.  我通常将所有轮播图片加载到 assets/images 文件夹中，并以“c”字母结尾。（例如，towerc.jpg）。可以根据需要加载任意数量。

2.  假设第一个图像是welcome.jpg（因为通常是组合图像/文本。至少在我的情况下）。

3.  加载一个变量（在我的情况下为@pics），其中包含文件夹中所有符合条件的图片）

4.  在视图中遍历数组以显示图像。

5.  不要忘记使用高度和宽度#'s (xxx, yyy)

    ```
    <!--  file names ending with c.(jpg,png,gif,jpeg) are carousel only-->
    <!--  welcome.jpg is first active file, usually something special.--> 
    ```

    ```
     <div class="active item">
          <%= image_tag("welcome.jpg", :width=>"xxx", :height=>"yyy")%>
        </div>

        <% @pics.each do |photos| %>
            <div class="item">
              <%= image_tag(photos[18..photos.length], :width=>"xxx", :height=>"yyy")%>
            </div>          
        <% end %>

      </div>

      <a class="carousel-control left" href="#myCarousel" data-slide="prev">&saquo;</a>
      <a class="carousel-control right" href="#myCarousel" data-slide="next">&aquo;</a>
    </div> 
    ```

顺便说一句，JMM 解决方案应该可以工作，只是试图说明您应该将图像存储在 assets/images 文件夹中并从那里获取它们。

# android - 我无法在 Dreamweaver 中构建 Android 项目

> ID：11812474
> 
> 赞同：0
> 
> 时间：2012-08-04T22:34:25.110
> 
> 标签：android, cordova, dreamweaver

我无法在 Dreamweaver 中构建 Android 项目。当我转到站点 -> 移动应用程序 -> 构建并单击 Android 时，我看到出现此窗口：- ![在此处输入图像描述](../Images/60413adcd5a83b45cb0d81986523f973.png)

这是程序说的日志文件： [下载](http://www.4shared.com/file/tLIZ58R1/buildlog.html?) 如果无法下载，这是日志文件：

> 警告：应用设置中未指定图标。使用默认值。警告：应用设置中未指定启动画面。使用默认值。克隆 Android 种子应用程序 ____________________ set ANT_HOME=C:\PROGRA~2\Adobe\ADOBED~2.5\CONFIG~1\NATIVE~1\APACHE~1 set ANDROID_HOME=C:\PROGRA~2\Android\ANDROI~1 set JAVA_HOME =C:\PROGRA~2\Adobe\ADOBED~2.5\JDK set PATH=%JAVA_HOME%\bin;%PATH% cd C:\Users\Sina\Desktop\COMCOM~1.UNN C:\windows\SysWOW64\cmd .exe /u /c C:\PROGRA~2\Adobe\ADOBED~2.5\CONFIG~1\NATIVE~1\DWPHON~1\android\scripts\droidGap.bat "C:\Program Files (x86)\Adobe\ Adobe Dreamweaver CS5.5\Configuration\NativeAppFramework\DWPhoneGap\android\PhoneGapApp" "未命名站点 2" com.company.unnamed_site_2 1.0 "C:\Program Files (x86)\Android\android-sdk" 2 ____________________
> 
> C 创建项目目录：C:\Users\Sina\Desktop\com.company.unnamed_site_2_Android\com.company.unnamed_site_2
> 
> 创建目录 C:\Users\Sina\Desktop\com.company.unnamed_site_2_Android\com.company.unnamed_site_2\src\com\company\unnamed_site_2
> 
> 添加文件 C:\Users\Sina\Desktop\com.company.unnamed_site_2_Android\com.company.unnamed_site_2\src\com\company\unnamed_site_2\DefaultActivity.java
> 
> 创建目录 C:\Users\Sina\Desktop\com.company.unnamed_site_2_Android\com.company.unnamed_site_2\res
> 
> 创建目录 C:\Users\Sina\Desktop\com.company.unnamed_site_2_Android\com.company.unnamed_site_2\bin
> 
> 创建目录 C:\Users\Sina\Desktop\com.company.unnamed_site_2_Android\com.company.unnamed_site_2\libs
> 
> 创建目录 C:\Users\Sina\Desktop\com.company.unnamed_site_2_Android\com.company.unnamed_site_2\res\values
> 
> 添加文件 C:\Users\Sina\Desktop\com.company.unnamed_site_2_Android\com.company.unnamed_site_2\res\values\strings.xml
> 
> 创建目录 C:\Users\Sina\Desktop\com.company.unnamed_site_2_Android\com.company.unnamed_site_2\res\layout
> 
> 添加文件 C:\Users\Sina\Desktop\com.company.unnamed_site_2_Android\com.company.unnamed_site_2\res\layout\main.xml
> 
> 添加文件 C:\Users\Sina\Desktop\com.company.unnamed_site_2_Android\com.company.unnamed_site_2\AndroidManifest.xml
> 
> 添加文件 C:\Users\Sina\Desktop\com.company.unnamed_site_2_Android\com.company.unnamed_site_2\build.xml
> 
> 添加文件 C:\Users\Sina\Desktop\com.company.unnamed_site_2_Android\com.company.unnamed_site_2\proguard-project.txt
> 
> 克隆成功
> 
> ____________________ 设置 ANT_HOME=C:\PROGRA~2\Adobe\ADOBED~2.5\CONFIG~1\NATIVE~1\APACHE~1 设置 ANDROID_HOME=C:\PROGRA~2\Android\ANDROI~1 设置 JAVA_HOME=C:\PROGRA ~2\Adobe\ADOBED~2.5\JDK set PATH=%JAVA_HOME%\bin;%PATH% cd C:\Users\Sina\Desktop\COMCOM~1.UNN C:\windows\SysWOW64\cmd.exe /u / c C:\PROGRA~2\Adobe\ADOBED~2.5\CONFIG~1\NATIVE~1\APACHE~1\bin\ant.bat debug ____________________ Buildfile: C:\Users\Sina\Desktop\COMCOM~1.UNN\构建.xml
> 
> -设置模式检查：
> 
> -设置调试文件：
> 
> -检查环境：
> 
> [checkenv] Android SDK 工具修订版 20.0.1
> 
> [checkenv] 安装在 C:\Program Files (x86)\Android\android-sdk
> 
> -设置：
> 
> ```
>  [echo] Project Name: unnamed_site_2 
> ```
> 
> [gettype] 项目类型：应用程序
> 
> -设置调试模式：
> 
> -调试混淆检查：
> 
> -构建设置：
> 
> ```
>  [echo] Resolving Build Target for unnamed_site_2... 
> ```
> 
> [gettarget] 项目目标：Google API
> 
> [gettarget] 供应商：Google Inc.
> 
> [gettarget] 平台版本：2.1
> 
> [gettarget] API 级别：7
> 
> ```
>  [echo] ----------
> 
>  [echo] Creating output directories if needed...
> 
> [mkdir] Created dir: C:\Users\Sina\Desktop\COMCOM~1.UNN\bin\res
> 
> [mkdir] Created dir: C:\Users\Sina\Desktop\COMCOM~1.UNN\gen
> 
> [mkdir] Created dir: C:\Users\Sina\Desktop\COMCOM~1.UNN\bin\classes
> 
>  [echo] ----------
> 
>  [echo] Resolving Dependencies for unnamed_site_2... 
> ```
> 
> [依赖] 库依赖：
> 
> [依赖] 没有库
> 
> [依赖]
> 
> [依赖] ------------------
> 
> [依赖性] API<=15：将 annotations.jar 添加到类路径。
> 
> ```
>  [echo] ----------
> 
>  [echo] Building Libraries with 'debug'... 
> ```
> 
> [subant] 没有要迭代的子构建
> 
> -预构建：
> 
> -代码生成：
> 
> [mergemanifest] 将 AndroidManifest 文件合并为一个。
> 
> [mergemanifest] 清单合并已禁用。仅使用项目清单。
> 
> ```
>  [echo] Handling aidl files...
> 
>  [aidl] No AIDL files to compile.
> 
>  [echo] ----------
> 
>  [echo] Handling RenderScript files... 
> ```
> 
> [renderscript] 没有要编译的 RenderScript 文件。
> 
> ```
>  [echo] ----------
> 
>  [echo] Handling Resources...
> 
>  [aapt] Generating resource IDs...
> 
>  [echo] ----------
> 
>  [echo] Handling BuildConfig class... 
> ```
> 
> [buildconfig] 生成 BuildConfig 类。
> 
> -预编译：
> 
> -编译：
> 
> ```
> [javac] Compiling 3 source files to C:\Users\Sina\Desktop\COMCOM~1.UNN\bin\classes 
> ```
> 
> -编译后：
> 
> - 混淆：
> 
> -索引：
> 
> ```
>  [dex] Converting compiled files and external libraries into C:\Users\Sina\Desktop\COMCOM~1.UNN\bin\classes.dex...
> 
>    [dx] Could not create the Java virtual machine.
> 
>    [dx] Error occurred during initialization of VM
> 
>    [dx] Could not reserve enough space for object heap 
> ```
> 
> 构建失败
> 
> C:\Program Files (x86)\Android\android-sdk\tools\ant\build.xml:850：执行此行时出现以下错误：
> 
> C:\Program Files (x86)\Android\android-sdk\tools\ant\build.xml:852：执行此行时出现以下错误：
> 
> C:\Program Files (x86)\Android\android-sdk\tools\ant\build.xml:864：执行此行时出现以下错误：
> 
> C:\Program Files (x86)\Android\android-sdk\tools\ant\build.xml:266: null 返回：1
> 
> 总时间：8秒
> 
> 警告：应用设置中未指定图标。使用默认值。警告：应用设置中未指定启动画面。使用默认值。
> 
> ____________________ 设置 ANT_HOME=C:\PROGRA~2\Adobe\ADOBED~2.5\CONFIG~1\NATIVE~1\APACHE~1 设置 ANDROID_HOME=C:\PROGRA~2\Android\ANDROI~1 设置 JAVA_HOME=C:\PROGRA ~2\Adobe\ADOBED~2.5\JDK set PATH=%JAVA_HOME%\bin;%PATH% cd C:\Users\Sina\Desktop\COMCOM~1.UNN C:\windows\SysWOW64\cmd.exe /u / c C:\PROGRA~2\Adobe\ADOBED~2.5\CONFIG~1\NATIVE~1\APACHE~1\bin\ant.bat debug ____________________ Buildfile: C:\Users\Sina\Desktop\COMCOM~1.UNN\构建.xml
> 
> -设置模式检查：
> 
> -设置调试文件：
> 
> -检查环境：
> 
> [checkenv] Android SDK 工具修订版 20.0.1
> 
> [checkenv] 安装在 C:\Program Files (x86)\Android\android-sdk
> 
> -设置：
> 
> ```
>  [echo] Project Name: unnamed_site_2 
> ```
> 
> [gettype] 项目类型：应用程序
> 
> -设置调试模式：
> 
> -调试混淆检查：
> 
> -构建设置：
> 
> ```
>  [echo] Resolving Build Target for unnamed_site_2... 
> ```
> 
> [gettarget] 项目目标：Google API
> 
> [gettarget] 供应商：Google Inc.
> 
> [gettarget] 平台版本：2.1
> 
> [gettarget] API 级别：7
> 
> ```
>  [echo] ----------
> 
>  [echo] Creating output directories if needed...
> 
>  [echo] ----------
> 
>  [echo] Resolving Dependencies for unnamed_site_2... 
> ```
> 
> [依赖] 库依赖：
> 
> [依赖] 没有库
> 
> [依赖]
> 
> [依赖] ------------------
> 
> [依赖性] API<=15：将 annotations.jar 添加到类路径。
> 
> ```
>  [echo] ----------
> 
>  [echo] Building Libraries with 'debug'... 
> ```
> 
> [subant] 没有要迭代的子构建
> 
> -预构建：
> 
> -代码生成：
> 
> [mergemanifest] 找到已删除的目标文件
> 
> [mergemanifest] 将 AndroidManifest 文件合并为一个。
> 
> [mergemanifest] 清单合并已禁用。仅使用项目清单。
> 
> ```
>  [echo] Handling aidl files...
> 
>  [aidl] No AIDL files to compile.
> 
>  [echo] ----------
> 
>  [echo] Handling RenderScript files... 
> ```
> 
> [renderscript] 没有要编译的 RenderScript 文件。
> 
> ```
>  [echo] ----------
> 
>  [echo] Handling Resources...
> 
>  [aapt] Found Deleted Target File
> 
>  [aapt] Generating resource IDs...
> 
>  [echo] ----------
> 
>  [echo] Handling BuildConfig class... 
> ```
> 
> [buildconfig] 生成 BuildConfig 类。
> 
> -预编译：
> 
> -编译：
> 
> ```
> [javac] Compiling 2 source files to C:\Users\Sina\Desktop\COMCOM~1.UNN\bin\classes 
> ```
> 
> -编译后：
> 
> - 混淆：
> 
> -索引：
> 
> ```
>  [dex] Converting compiled files and external libraries into C:\Users\Sina\Desktop\COMCOM~1.UNN\bin\classes.dex...
> 
>    [dx] Could not create the Java virtual machine.
> 
>    [dx] Error occurred during initialization of VM
> 
>    [dx] Could not reserve enough space for object heap 
> ```
> 
> 构建失败
> 
> C:\Program Files (x86)\Android\android-sdk\tools\ant\build.xml:850：执行此行时出现以下错误：
> 
> C:\Program Files (x86)\Android\android-sdk\tools\ant\build.xml:852：执行此行时出现以下错误：
> 
> C:\Program Files (x86)\Android\android-sdk\tools\ant\build.xml:864：执行此行时出现以下错误：
> 
> C:\Program Files (x86)\Android\android-sdk\tools\ant\build.xml:266: null 返回：1
> 
> 总时间：4秒

我应该怎么办？

# java - JSF2 MetaRule 和 MethodBinding

> ID：11812475
> 
> 赞同：0
> 
> 时间：2012-08-04T22:34:49.397
> 
> 标签：java, jsf, jsf-2, custom-component

我还需要关心 MetaRule#applyRule 的子类中的 MethodBinding 吗？我想从我的代码中完全删除所有已弃用的 API，并且只支持 JSF2+

我有一个 MethodRule 类，它扩展了 MetaRule，就像在 Primefaces 等框架中看到的那样。那么您认为，我必须保留 MethodBinding 代码还是可以将其删除？

# authentication - 使用 SIM 卡登录网络应用程序

> ID：11812481
> 
> 赞同：0
> 
> 时间：2012-08-04T22:36:39.667
> 
> 标签：authentication, sim-card

我想创建一个安全连接到 Web 服务器的移动应用程序。为了避免依赖用户/密码身份验证，我想使用他们的 SIM 卡对设备进行身份验证。

我知道 SIM 卡上有证书，并且我找到了 EAP 身份验证。但所有文章都是关于 WiFi 接入点的。

是否可以从网络应用程序发送 EAP 请求？如果是怎么办？

谢谢您的帮助

他说[这是不可能的：是否可以使用 SIM 卡在访问具有 Android 的安全 Web 服务器时进行相互身份验证？](https://stackoverflow.com/questions/9026828/is-it-possible-to-use-sim-card-to-mutual-authentication-on-access-to-a-secure-we)但我不敢相信。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T14:08:38.677

我一直在寻找类似的解决方案，一个很好的起点是 Telenor 几年前运行的一个项目，用于使用 EAP 对应用程序进行身份验证。这是[链接](http://projectliberty.org/liberty/content/download/816/5823/file/Telnor_SIM_Strong_Auth_LAP_COT_Dr_Do_van_Thanh.pdf)。

# php - 通过第三方网站自动创建 Gravatar 账号

> ID：11812482
> 
> 赞同：1
> 
> 时间：2012-08-04T22:36:49.680
> 
> 标签：php, gravatar

是否可以根据我网站上的用户提交的注册数据自动创建一个 Gravatar 帐户？我喜欢 gravatar，但我不想让我的用户注册两次

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T22:50:17.413

从理论上讲，您可以使用 curl 通过 get 和 post 请求来操作 Gravatar 站点并解析结果。这样您就可以使用用户在您网站上提供的数据在 Gravatar 上创建一个帐户。

请注意，如果他们有某种验证码或等价物，如果没有某种验证码转发，这将无法直接工作。

最后，我实际上不会这样做，但我只是说这是*可能的*。

# javascript - 图像与 javascript 按钮一起工作

> ID：11812483
> 
> 赞同：1
> 
> 时间：2012-08-04T22:37:11.160
> 
> 标签：javascript, javascript-events

我会尽力解释。我有 Javascript 中的按钮（右侧的红色），所以当我单击每个按钮时，它们会变为绿色，当我再次单击它们时，它们会变为红色。我正在尝试让图像按钮（左侧）工作，如果我单击每个按钮，它将打开 javascript 按钮（右侧的红色按钮）。这意味着我可以使用其中任何一个来启用/禁用。

这是图像：

![按钮图片](../Images/2182790b82cb02c450da9dfaa2650719.png)

html代码：

```
 <img src="images/menuIcons/skip.gif" width="126" height="34" />
    <div align="center" style="margin-bottom: 10px; margin-left: 10px;">
      <button id="skip" class="red" onclick="controls(this.getAttribute('class'),this.id)"></button>

<img src="images/menuIcons/text.gif" width="126" height="34" />
        <div align="center" style="margin-bottom: 10px; margin-left: 10px;">
          <button id="text" class="red" onclick="controls(this.getAttribute('class'),this.id)"></button>

<img src="images/menuIcons/message.gif" width="126" height="34" />
    <div align="center" style="margin-bottom: 10px; margin-left: 10px;">
      <button id="message" class="red" onclick="controls(this.getAttribute('class'),this.id)"></button>

<img src="images/menuIcons/game.gif" width="126" height="34" />
        <div align="center" style="margin-bottom: 10px; margin-left: 10px;">
          <button id="game" class="red" onclick="controls(this.getAttribute('class'),this.id)"></button> 
```

Javascript代码：

```
 // enable / disable Buttons
function controls(className,elem) {
    if (className == "red") {
        document.getElementById(elem).setAttribute('class','green');
        // You can define your enable statements here
    } else {
        document.getElementById(elem).setAttribute('class','red');
        // You can define your disables statements here        
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T22:54:07.070

您也可以从`onclick`图像上调用该函数。但是，我建议将`controls`函数重构为仅将 the`id`作为参数。

```
<img src="images/menuIcons/skip.gif" onclick="controls('skip')" width="126" height="34" />
...
<button id="skip" class="red" onclick="controls(this.id)"></button>
<!-- the other elements analogous --> 
```

```
// enable / disable Buttons
function controls(elemid) {
    var elem = document.getElementById(elemid);
    if (elem.className == "red") {
        elem.setAttribute('class', 'green');
        // You can define your enable statements here
    } else {
        elem.setAttribute('class', 'red');
        // You can define your disables statements here        
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T00:00:18.203

这一切都有点复杂。你可以用一个容器包围你的菜单，并使用[事件委托](http://www.nczonline.net/blog/2009/06/30/event-delegation-in-javascript/)为所有项目添加一个点击处理程序。这是您菜单的（纯 javascript）[jsfiddle 模型](http://jsfiddle.net/KooiInc/cXRDN/)。

关于您的 html/代码的一些注释：

*   不要使用内联样式或 javascript。内联 javascript 在执行时产生一个新的解释器。
*   在您的 html 中，您有多个相同的元素`id`，这是自找麻烦。`id`应该是唯一的。
*   也许你应该检查[jQuery](http://jquery.com/)，它可以节省你的工作。

# aptana - Aptana Studio 3.0 的官方发布更新 URL 是什么？

> ID：11812485
> 
> 赞同：2
> 
> 时间：2012-08-04T22:38:16.667
> 
> 标签：aptana, aptana3

我今天注意到有一个新版本的 Aptana Studio 3.2.1。

每当我单击帮助-> 检查更新时。它不更新它。

我在 3.2.0 上，根据文档，我没有做错任何事： [https ://wiki.appcelerator.org/display/tis/Updating+the+Current+Version](https://wiki.appcelerator.org/display/tis/Updating+the+Current+Version)

之前似乎已经问过类似的问题，[但](https://stackoverflow.com/questions/11182618/how-to-update-aptana-studio-to-the-latest)建议的更新网址“ [http://download.aptana.com/studio3/plugin/update/](http://download.aptana.com/studio3/plugin/update/) ”被拒绝。

哪个是发布的官方更新链接？

**更新：**

感谢 Eric 的建议，我已在我的桌面上将其更新`Aptana Studio 3, build: 3.2.1.201207261642`为与我的笔记本电脑上的相同版本，它直接安装了 3.2.1。

命名约定仍然有点混乱。通常 RC (Release Candidate) 是一个没有错误的 Beta 版本，顾名思义，它只是一个候选版本，而不是实际版本。通过 preview.rc url 更新实际版本感觉不对。我的直觉告诉我，这个 rc url 很快就会包含一个未在实际网站上发布的新发布候选更新。

我仍然保持开放状态，希望 Aptana 的官员发表声明。谢谢 ：）

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T23:13:18.283

*对于 beta 版本，*我必须使用以下 URL 手动添加更新站点：

[http://preview.appcelerator.com/aptana/studio3/standalone/update/beta/](http://preview.appcelerator.com/aptana/studio3/standalone/update/beta/)

另外，我必须以管理员（Windows 超级用户）的身份进入 Aptana。

也许这会有所帮助。

*编辑：*每条评论，看起来这将是相应的候选发布 URL：

[http://preview.appcelerator.com/aptana/studio3/standalone/update/rc/](http://preview.appcelerator.com/aptana/studio3/standalone/update/rc/)

但是我没有尝试过，并且有兴趣知道它是否有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T13:42:00.190

这取决于您要更新的安装类型，因为它们具有不同的 URL。

更新一个 Eclipse 插件版本，更新 URL 确实是：

[http://download.aptana.com/studio3/plugin/update/](http://download.aptana.com/studio3/plugin/update/)

但是，对于独立版本，URL 是：

[http://download.aptana.com/studio3-rcp/plugin/update/](http://download.aptana.com/studio3-rcp/plugin/update/)

为了确认，RC 流将具有几乎可以发布的构建。他们正在接受最终的质量检查。他们可能有错误，并且在我们到达最终版本之前可能会有几个 RC 版本。

# java - 休眠使用 @ManyToMany 并更新两种方式

> ID：11812487
> 
> 赞同：1
> 
> 时间：2012-08-04T22:38:21.160
> 
> 标签：java, hibernate, annotations

我有 2 个班级，一个 Room 班级和一个 Student 班级。一个房间可以有很多学生，而一个学生也可以有很多房间。因此我使用了@ManyToMany 关系

```
public class Room {
  @ManyToMany
  private Collection<Student> studentList = new ArrayList<Student>();
} 
```

* * *

```
public class Student {
  @ManyToMany(mappedBy="studentList")
  private Collection<Room> roomList = new ArrayList<Room>();
} 
```

因为我想使用 1 个映射表，即 Room_Student，所以我能够将一组学生添加到一个房间。当我尝试将集合添加到学生时，休眠没有保存它。这里是

```
Collection<Student> collectionOfStudents=new ArrayList<Student>();
Room room1=(Room) session.get(Room.class, 1);
Student student1=(Student) session.get(Student.class, 1);
Student student2=(Student) session.get(Student.class, 2);
collectionOfStudents.add(student1);
collectionOfStudents.add(student2);
room1.getStudentList().addAll(collectionOfStudents)
session.update(room1); 
```

这有效并插入到表 Room_Student

当我这样做的时候

```
Collection<Room> collectionOfRooms=new ArrayList<Room>();
Student student1=(Student) session.get(Student.class, 1);
Room room2=(Room) session.get(Room.class, 2);
Room room3=(Room) session.get(Room.class, 3);
collectionOfRooms.add(room2);
collectionOfRooms.add(room3);
student1.getRoomList().addAll(collectionOfRooms);
session.update(student1); 
```

它**没有插入**到 room2 和 room3 的表 Room_Student 中。感谢所有的答复

编辑1：我添加

```
public class Student {
  @ManyToMany(mappedBy="studentList",cascade={CascadeType.ALL})
  private Collection<Room> roomList = new ArrayList<Room>();
} 
```

这

```
student1.getRoomList().addAll(collectionOfRooms);
session.update(student1); 
```

没有更新/插入房间到表中

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T22:56:31.363

在您的映射中，`Room`是拥有方并且`Student`是拥有方。因此，您必须始终将学生添加到房间中，以便在房间和学生之间建立关系。即使您使用 Cascading，反之亦然。您将始终必须在 ORM 中的关系中定义拥有方，并始终使用该方本身来创建关系。此[链接](https://stackoverflow.com/questions/2749689/what-is-the-owning-side-in-an-orm-mapping)进一步阐明了该主题。此外，如果您需要更深入地研究，您应该阅读 JPA/hibernate 文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T23:07:05.147

感谢 Satadru，Hibernate 不会以其他方式持续存在，因此我必须删除映射（**mappedBy**），并且两者

**将创建**Student_Room**表和 **Room_Student表。**这显示房间拥有学生和学生拥有房间而不是仅**Student_Room****

 **然而，OJB 很好地工作了这个特性。**

# css - 多个 CSS3 ::selection

> ID：11812489
> 
> 赞同：2
> 
> 时间：2012-08-04T22:38:36.103
> 
> 标签：css, selection

好的，我希望能够在我的页面上为各种文本设置多个背景，例如，如果用户突出显示文本，h1 应该是不同的颜色，h2 应该是不同的颜色，等等。

我对页面上所有文本的默认**::selection**可以以其他方式选择

```
::-moz-selection { background:#fff; color:#fff; }
::selection { background:#fff; color:#fff; } 
```

但是我希望我的一些不同颜色的单词有不同的背景::selection

这是我下面的html：

```
<span class="bigblue bigblueselect">Snoop Lion</span> 
```

下面的CSS：

```
 .bigblue {color:#69b5e1;} 

    .bigblueselect ::-moz-selection { background:pink; }
    .bigblueselect ::selection { background:pink; } 
```

如何在一个页面上获得多个 CSS3 ::selection？谢谢，我想不通，我把这里作为最后的手段。我希望某些标题/文本在选择时具有不同的背景颜色，但我不太明白这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T22:49:18.647

您需要删除 and 之间的空格`.bigblueselect`，`::selection`因为这是一个后代选择器，因此它只适用于后代元素而不是您`.bigblueselect`自己：

```
.bigblueselect::-moz-selection { background:pink; }
.bigblueselect::selection { background:pink; } 
```

# matlab - 一阶 RC 滤波器的时间离散实现

> ID：11812490
> 
> 赞同：6
> 
> 时间：2012-08-04T22:39:00.237
> 
> 标签：matlab, signal-processing

我试图通过实现一阶 RC 滤波器的时间离散版本来确保我了解我的（数字）信号处理知识。（背景是我正试图在软件中实现一个用于 SDR 的 PLL，但这是一个不同的故事......）

我的问题是我以为我理解了如何为这样的滤波器创建差分方程，从而推导出它的系数。但是，当我使用 freqz 函数在 MATLAB 中绘制响应时 - 使用计算`a`和`b`系数 - 我没有得到看起来像 RC 滤波器响应的东西。

我参考了关于这个主题的维基百科页面（在[http://en.wikipedia.org/wiki/Low-pass_filter#Discrete-time_realization](http://en.wikipedia.org/wiki/Low-pass_filter#Discrete-time_realization)），只是为了确保我没有完全脱离杂草，但它仍然没有没有帮助。这将差分方程详细说明为：

```
yi = alpha * xi + ( 1 - alpha ) * yi-1
where: alpha = sample period / ( RC + sample period ) 
```

一个例子：

```
fs = 96000.0;                         % Sample rate.
delta_t = 1.0 / fs;                   % Sample period.
fc = 5000.0;                          % Filter cut off frequency.
tau = 1 / ( 2 * pi * fc );            % Time constant of filter.
alpha = delta_t / ( tau + delta_t );  % Smoothing factor per Wikipedia page.
b = [ alpha ];                        % 'b' coefficients
a = [ 1.0, ( 1 - alpha ) ];           % 'a' coefficents
freqz( b, a, 1024, fs );              % 1024 point FFT used. 
```

结果： ![在此处输入图像描述](../Images/06fa060abe40fc80e02e17bb76be8d4a.png)

关于我要去哪里错的任何想法？我完全误解了什么吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T22:44:21.817

您希望您的`a(2)`系数为负数，因为`a`表示出现在等式左侧的系数。

```
a(1)*y(n) + a(2)*y(n-1) - ... + a(na+1)*y(n-na) = b(1)*x(n) + b(2)*x(n-1) + ... + b(nb+1)*x(n-nb) 
```

或等效地，

```
a = a ./ a(1)
y(n) = b(1)*x(n) + b(2)*x(n-1) + ... + b(nb+1)*x(n-nb)
                 - a(2)*y(n-1) - ... - a(na+1)*y(n-na) 
```

请参阅文档[`filter`](http://www.mathworks.com/help/techdoc/ref/filter.html#f83-1015962)

* * *

通过此校正，响应变为

![在此处输入图像描述](../Images/b222da5bc95139af787258a8ec1c18d5.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-28T00:30:59.980

Ben Voigt 给出了正确的答案。他只是没有展示如何更改 bitcyber 的代码以使代码生成他的图表。我需要这个[StackExchange 答案](https://stackoverflow.com/questions/1783633/matlab-apply-a-low-pass-or-high-pass-filter-to-an-array?rq=1)来理解 Ben 所说的话，然后我将倒数第三行更改为“a = [ 1.0, (alpha -1) ];”。

```
fs = 96000.0;                         % Sample rate.
delta_t = 1.0 / fs;                   % Sample period.
fc = 5000.0;                          % Filter cut off frequency.
tau = 1 / ( 2 * pi * fc );            % Time constant of filter.
alpha = delta_t / ( tau + delta_t );  % Smoothing factor per Wikipedia page.
b = [ alpha ];                        % 'b' coefficients
a = [ 1.0, ( alpha -1 ) ];           % 'a' coefficents
a = a ./ a(1);
freqz( b, a, 1024, fs );              % 1024 point FFT used. 
```

谢谢你的回答本。只是我比大多数人慢一点。

# java - OpenGL ES glRotatef

> ID：11812493
> 
> 赞同：1
> 
> 时间：2012-08-04T22:39:52.737
> 
> 标签：java, android, graphics, opengl-es

我只是想完全清楚。我还是 Open GL 的新手，主要是通过反复试验来学习。

当我使用 glRotatef(angle, x, y, z)

我从那一点开始绘制的任何东西都会在指定的轴上旋转指定的量？

那么我将如何撤消这样的轮换呢？

```
 glRotatef(45, 0, 0, 1);
    // draw object
    glRotatef(0, 0, 0, 0); 
```

那行得通吗？

为了清楚我需要什么，当用户在屏幕上拖动手指时，它会以给定的角度绘制一条线，我正在采用该角度并将其应用于带纹理的正方形。

我在这个正方形之前和之后绘制了许多我不想旋转的对象。

到目前为止，我认为可以肯定地说，当您应用转换/旋转/平移/纹理时，除非您指定其他方式，否则它将保持这种状态？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T22:55:49.507

OpenGL 转换常见问题解答包括：[http ://www.opengl.org/archives/resources/faq/technical/transformations.htm](http://www.opengl.org/archives/resources/faq/technical/transformations.htm)

您可以计算每个变换操作的倒数，我很确定在这种情况下正确的方法是`glRotatef(-45, 0, 0, 1)`. 当您开始添加音阶并转化为混音时，这很快就会变得复杂。`glPushMatrix`一个更简单的解决方案是使用和包装转换`glPopMatrix`

例如：

```
// save the current matrix state
glPushMatrix() 

// Transform
glTranslate(...)
glRotate(...)

// Issue a draw call
glDrawArrays(...)

// Restore the transformation matrix to when it was saved.
glPopMatrix() 
```

弹出矩阵后，您可以像从未发生过的转变一样开展业务。这对于层次转换也非常有用，因为您可以在彼此内部拥有多个 push-pop 序列。

# c# - 如何将多个变量与单个条件进行比较？

> ID：11812494
> 
> 赞同：4
> 
> 时间：2012-08-04T22:40:15.360
> 
> 标签：c#, if-statement, collections

我有这个：

```
if (input.Text.ToUpper() == "STOP") 
```

但是有太多可能的值，我无法像这样单独指定它们：

```
if (input.Text.ToUpper() == "STOP" || input.Text.ToUpper() == "END") 
```

有没有办法可以做这样的事情：

```
if (input.Text.ToUpper() == "STOP", "END", "NO", "YES") 
```

这样使用 STOP、END、NO 或 YES 就能完成任务？

使用任何包含都不起作用，其他时候接受的单词将包含单词 STOP 和 END。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-04T22:43:48.650

您可以使用像数组和这样的集合[`Enumerable.Contains`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.contains.aspx)：

```
var words = new[]{ "STOP", "END", "NO", "YES" };
if(words.Contains(input.Text.ToUpper()))
{
     // ...      
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-04T23:00:46.783

字符串扩展的完美情况

将此添加到新文件

```
namespace appUtils
{
    public static class StringExtensions
    {
        public static bool In(this string s, params string[] values)
        {
            return values.Any(x => x.Equals(s));
        }
    }
} 
```

并以这种方式从您的代码中调用

```
if(input.Text.In("STOP", "END", "NO", "YES") == true)
   // ... do your stuff 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-04T22:43:59.553

你可以做...

```
if(new[]{ "STOP", "END", "NO", "YES" }.Contains(input.Text.ToUpper())) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-04T22:44:26.430

您可以保存可能单词的数组并将其与`Contains`方法匹配：

```
string[] validInput = new string[] { "STOP", "END", "NO", "YES" };

// input is the input you have
if (validInput.Contains(input.Text.ToUpper()))
{
    // Do something
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-04T22:45:51.503

```
 var tasks = new List<string> { "STOP", "END", "NO", "YES" };
        tasks.Contains(input.Text.ToUpper()); 
```

看起来更好

```
 var tasks = new List<string> { "stop", "end", "no", "yes" };
        tasks.Exists(x => string.Equals(x, input.Text, StringComparison.OrdinalIgnoreCase)); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-04T22:52:11.210

您可以使用 LINQ 来执行此操作。这样，如果您的字符串中同时包含 STOP 和 END，它将同时接收它们：

```
var myStringArray= new[]{ "STOP", "END", "NO", "YES" };
var query = myString.Any(x => myStringArray.Contains(x)); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-04T23:00:12.397

创建扩展：

```
public static class Extension
{
    public static bool EqualsAny(this string item, params string[] array)
    {
        return array.Any(s => item.ToUpper() == s.ToUpper());
    }
} 
```

使用：

```
if (inputText.EqualsAny("STOP", "END", "NO", "YES")) 
```

# ios - iOS Facebook 授权问题

> ID：11812495
> 
> 赞同：1
> 
> 时间：2012-08-04T22:40:32.207
> 
> 标签：ios, post, photo, facebook-wall

我正在使用最新的 Facebook iOS beta SDK 并尝试将照片发布到我的墙上。我正在使用以下代码：

[https://gist.github.com/3145581](https://gist.github.com/3145581)

我的应用程序调用“sessionOpenWithPermissions”，加载 facebook 应用程序，我可以接受该应用程序及其权限，但没有任何反应。从那时起，它所做的就是加载 facebook 应用程序，在对话框中显示“正在加载...”消息，然后对话框退出，我留在了 facebook 应用程序中。它甚至没有到达 sessionOpenWithPermissions 内的块......

知道我做错了什么吗？

**编辑：**我实际上只是恢复到稳定的 Facebook SDK，同样的事情发生在：

> [delegate.facebook 授权:[NSArray arrayWithObjects:@"publish_stream", @"offline_access", nil]];

所以实际上授权出了问题。我已经仔细检查了应用程序 ID、Facebook 上的设置、URL 方案……但很难解释，因为没有错误。

# php - php表格显示数据、编辑、删除

> ID：11812496
> 
> 赞同：0
> 
> 时间：2012-08-04T22:40:40.417
> 
> 标签：php, string

我花了一整天的时间试图让这个代码片段工作：

```
 <?php
            include("conn.php");

$result = mysql_query("SELECT * FROM users");
  echo "<table border=\"0\" width=\"100%\" cellpadding=\"0\" cellspacing=\"0\" id=\"product-       table\">
  <tr>
  <th class=\"table-header-check\"><a id=\"toggle-all\" ></a> </th>
  <th class=\"table-header-repeat line-left\" ><a href=\"\">User ID</a></th>
  <th class=\"table-header-repeat line-left\"><a href=\"\"> Username</a></th>
  <th class=\"table-header-repeat line-left\"><a href=\"\">Firstname</a></th>
  <th class=\"table-header-repeat line-left\"><a href=\"\">Lastname</a></th>
  <th class=\"table-header-repeat line-left\"><a href=\"\">Email</a></th>
  <th class=\"table-header-repeat line-left\"><a href=\"\">Registration Date</a></th>
  <th class=\"table-header-options line-left\"><a href=\"\">Options</a></th>
   </tr>";
  while ($row = mysql_fetch_array($result)) {

   echo "<tr>";
   echo "<td>"."<input  type=\"checkbox\"/></td>";
    echo "<td>" . $row['user_id'] . "</td> ";
    echo "<td>" . $row['username'] . "</td>";
    echo "<td>" . $row['first_name'] . "</td>";
    echo "<td>" . $row['last_name'] . "</td>";
     echo "<td>" . $row['email'] . "</td>";
 echo "<td>" . $row['registration_date'] . "</td>";
 echo "<td class=\"options-width\">".
                "<a href=\"\" title=\"Edit\" class=\"icon-1 info-tooltip\">              </a>".
                "><a href="delete.php?id=' . $row['id'] . '"class=\"icon-2 info-tooltip\"></a>".
                "<a href=\"\" title=\"Save\" class=\"icon-5**strong text**info-tooltip\">       </a>".
                "
                </td>";
  echo "</tr>";
  }

     ?> 
```

我想要做的是将我的用户拉到一个 html 表中，然后制作它，以便我可以从 url 字符串 ex 中编辑/删除它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T22:59:33.000

不确定这是否是一个答案，但它更干净并且可能不太容易出现问题：

```
<?php
    include("conn.php");
    $result = mysql_query("SELECT * FROM users");
    $rows   = mysql_fetch_array($result);
?>
<table border="0" width="100%" cellpadding="0" cellspacing="0" id="product-table">
    <tr>
        <th class="table-header-check"><a id="toggle-all"></a> </th>
        <th class="table-header-repeat line-left"><a href="#">User ID</a></th>
        <th class="table-header-repeat line-left"><a href="#">Username</a></th>
        <th class="table-header-repeat line-left"><a href="#">Firstname</a></th>
        <th class="table-header-repeat line-left"><a href="#">Lastname</a></th>
        <th class="table-header-repeat line-left"><a href="#">Email</a></th>
        <th class="table-header-repeat line-left"><a href="#">Registration Date</a></th>
        <th class="table-header-options line-left"><a href="#">Options</a></th>
    </tr>
    <?php foreach($rows as $row) { ?>
    <tr>
        <td><input type="checkbox" /></td>
        <td><?php echo $row['user_id']; ?></td>
        <td><?php echo $row['username']; ?></td>
        <td><?php echo $row['first_name']; ?></td>
        <td><?php echo $row['last_name']; ?></td>
        <td><?php echo $row['email']; ?></td>
        <td><?php echo $row['registration_date']; ?></td>
        <td class="options-width">
            <a href="#" title="Edit" class="icon-1 info-tooltip"></a>
            <a href="delete.php?id=<?php echo $row['id']; ?>" class="icon-2 info-tooltip"></a>
            <a href="#" title="Save" class="icon-5 strong-text info-tooltip"></a>
        </td>
    </tr>
    <?php } ?>
</table> 
```

希望有帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T22:49:14.817

通过此行在最后一个回显之前更改

```
 echo '<td class="options-width">'.
            '<a href="" title="Edit" class="icon-1 info-tooltip"> </a>'.
            '      <a href="delete.php?id=' . $row['id'] . ' " class="icon-2 info-tooltip"></a>'.
            '<a href="" title="Save" class="icon-5**strong text**info-tooltip">       </a>'.
            '</td>'; 
```

引号有问题（嵌套的 " 和 ' ）

# android - 用于 Web 服务应用程序开发和测试的 Android USB 隧道到 localhost

> ID：11812498
> 
> 赞同：1
> 
> 时间：2012-08-04T22:40:55.850
> 
> 标签：android, localhost

我正在尝试通过 Android USB 到 PC 隧道应用程序将我的 Android 设备连接到我的 PC 的本地主机，以开发和测试我正在处理的 Web 服务。当 Android 尝试连接到 localhost 时，我收到一条消息“org.apache.http.conn.HttpHostConnectException: Connection to `http://127.0.0.1:26121`denied”

这是我配置的方式：

隧道软件：安装在PC端和Android端的[Android usb portforwarding 。](http://www.codeproject.com/Articles/191930/Android-Usb-Port-Forwarding)

PC 上的 Android usb 隧道正在侦听 Android 端口 8080，并设置为将流量定向到 192.168.0.1:80 的 PC，这是我 PC 的默认网关。

Web 服务正在运行，`http://localhost:26121`它的有效地址是`http://localhost:26121/api/products/`。

我写了一个防火墙规则来允许 TCP 连接到本地端口 26121。

因此，现在当我尝试使用 HttpClient 在 Android 上解决此地址时，我收到“`http://127.0.0.1:26121`拒绝连接”消息。

任何人都可以建议对允许成功连接的配置进行更改吗？

# sql-server - mssql jdbc 连接的连接错误

> ID：11812510
> 
> 赞同：0
> 
> 时间：2012-08-04T22:42:46.997
> 
> 标签：sql-server, jdbc, google-apps-script

我使用 Squirrel（使用 jTDS）远程连接到我的数据库，所以我认为我的参数设置正确。GAS 系统地给我一个错误：“未能建立数据库连接”。有什么办法可以调试那个坏连接？我的代码来自 GAS JDBC 示例，但我使用的是 mssql。

有什么建议么？

注意：我也尝试了以下方法，因为这是我在 Squirrel 中输入的方式：

```
 var conn = Jdbc.getConnection("jdbc:sqlserver:///my.server.adress:2433/MyName", "MyName", "password"); 
```

卡住！

```
function foo() {
  var conn = Jdbc.getConnection("jdbc:sqlserver:///my.server.adress:2433", "MyName", "password");
  var stmt = conn.createStatement();
  stmt.setMaxRows(100);
  var start = new Date();
  var rs = stmt.executeQuery("select * from MyTable");

  var doc = SpreadsheetApp.getActiveSpreadsheet();
  var cell = doc.getRange('a1');
  var row = 0;
  while(rs.next()) {
    cell.offset(row, 0).setValue(rs.getString(1));
    cell.offset(row, 1).setValue(rs.getString(2));
    cell.offset(row, 2).setValue(rs.getString(3));
    cell.offset(row, 3).setValue(rs.getString(4));
    row++;
  }
  rs.close();
  stmt.close();
  conn.close();
  var end = new Date();
  Logger.log("time took: " + (end.getTime() - start.getTime()));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T18:52:27.260

好的，愚蠢的错误：连接字符串中的额外斜杠。

看起来我必须使用限定名称。所以我必须使用 AccountName.DatabaseName.MyTable 而不是 MyTable

但它有效！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T15:26:24.467

您也可以在连接字符串中指定数据库名称：

[https://developers.google.com/apps-script/jdbc](https://developers.google.com/apps-script/jdbc)

var conn = Jdbc.getConnection("jdbc:mysql://:/", "user", "password");

这*应该*排除指定数据库名称的需要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T03:49:50.840

这是完整的功能（它有效！），使用 USE：

```
 function typestring_f() {
  var conn = Jdbc.getConnection("jdbc:sqlserver://my.server.adress:2433", "MyName", "password");
  var stmt = conn.createStatement();

  var ret = stmt.execute("USE wgwDatabase;");

  pstmt=conn.prepareStatement("{ call f_dict_sp(?)}");  // get the stored procedure with 1 parameter.
  pstmt.setString(1, "cat%"); // set the parameter (a string for matching with Like )
  pstmt.setMaxRows(100);
  rs= pstmt.executeQuery(); // run the query

  var doc = SpreadsheetApp.getActiveSpreadsheet();
  var cell = doc.getActiveRange(); // ac('a1');
  var row = 0;
  while(rs.next()) {
    cell.offset(row, 0).setValue(rs.getString(1));
    cell.offset(row, 1).setValue(rs.getString(2));
    row++;
  }
  rs.close();
  pstmt.close();
  conn.close();

 } 
```

# python - 在 Python 2.6+ 中使用 super(...) 时如何避免样板文件？

> ID：11812517
> 
> 赞同：5
> 
> 时间：2012-08-04T22:43:54.930
> 
> 标签：python, oop, python-2.7, python-2.6, super

有没有好的（适合在实际项目中使用）方法或减少类似这样的样板

```
class B(A):
    def qqq(self): # 1 unwanted token "self"
        super(B, self).qqq() # 7 unwanted tokens plus 2 duplications ("B", "qqq")
        do_something() 
```

我希望它看起来更像这样：

```
class B(A):
    def qqq:
        super
        do_something() 
```

或（更现实地）

```
class B(A):
    @autosuper_before
    def qqq(self):
        do_something() 
```

在 Python 2.6+ 中是否有可能没有公开的黑客攻击？

没有参数的 Python 2.x 中的@link [super()](https://stackoverflow.com/questions/2706623/super-in-python-2-x-without-args)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T23:48:58.957

**tl;博士**

正如 OP 所说“在 Python 2.6+ 中是否有可能没有公开的黑客攻击？”，答案是：**不**

**长版**

~~您可以制作一个简单的装饰器，该装饰器将使用此方法调用下一个父级。问题是您无法控制要传递的参数。~~

**编辑：** 这对于已经使用的子类不起作用，`autosuper`因为它会选择错误的类并进行无限循环。

```
def autosuper(fn):
    def f(self, *args, **kw):
        cl = super(type(self), self)
        getattr(cl, fn.__name__)(*args, **kw)
        return fn(self, *args, **kw)
    return f 
```

**怎么可能做到这一点？Python 3.x 确实有一个`super`不带参数的函数！**

不幸的是，Python 3.x`super`是一个*类*，同时也是一个*关键字*，因为它的名称的存在将改变当前环境，以揭示一个名为的变量`__class__`，它是您需要使用的正确类！

如果检查类中声明的函数内的框架，则没有`__class__`变量，并且`co_freevars`框架属性的`f_code`属性为空。当你写名字时`super`（不需要调用它），`__class__`字符串会出现，`co_freevars`意思是它来自另一个闭包。此外，如果您尝试在`__class__`不使用 super 的情况下访问变量，它将`LOAD_DEFER`出于同样的原因使用字节码，而不是`LOAD_GLOBAL`像每个未定义名称一样正常。

这太疯狂了，你不能只做不带参数的`hyper = super`调用这个新`hyper`变量（与 完全相同的对象`super`）。

因为我无法在 Python 解释器中与这么多的黑魔法竞争，而且因为`autosuper`装饰器没有在类中声明（所以`__class__`即使在 Python 2.x 中可能，它也永远无法访问变量），我不会尝试写一个新的装饰器，并将这个答案留在这里作为对其他想要这样做的人的警告。

可能有可能让一些黑客找到合适的类来使用，但我不会深入挖掘。需要考虑的事项：

*   应用装饰器时，该类尚不存在，因此应在调用装饰函数时完成。
*   被装饰的函数还不是一个`unbound method`（无论如何都从 Py3k 中删除了），所以你不能检查`im_class`属性。
*   The frame does not seem to hold any information of the class used to make this call (unless of course the `__class__` variable do exist and it is possible to get a reference to it)
*   [This answer](https://stackoverflow.com/a/2706703/754991) provided by OP is also quite broken because it makes a lot of bad assumptions and has problems with decorated functions.

# iphone - 如何显示许多不同的精灵

> ID：11812530
> 
> 赞同：0
> 
> 时间：2012-08-04T22:45:47.790
> 
> 标签：iphone, ios4, cocos2d-iphone

游戏如何处理需要左右滑动才能选择关卡的关卡选择屏幕？这样的游戏似乎每个级别都有不同的精灵（例如Amazing Alex）。

如何在不占用太多内存空间的情况下加载这么多精灵？它们是否一次全部加载到内存中？在这种情况下是否使用了特殊技术？在我的游戏关卡选择中，我有 20 个关卡，每个关卡都有自己的精灵（图标）。如何一次处理所有这些精灵？

请记住，当用户左右滚动以选择关卡时，屏幕上一次最多出现 3 个精灵。

任何示例或链接都会很有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T17:17:00.627

在我创建的游戏 SmashTurtle 中，我使用了[http://ios.biomsoft.com/2011/11/28/a-paging-uiscrollview-in-cocos2d-with-previews/教程中的 UIScrollView 滚动代码](http://ios.biomsoft.com/2011/11/28/a-paging-uiscrollview-in-cocos2d-with-previews/)

SmashTurtle 有 25 个 200x200 点节点，可以选择添加多个精灵，我能够在 3gs 设备上实现良好的性能，在较新的设备上实现良好的性能。

当呈现选择关卡场景时，我会加载所有精灵。没有内存警告，加载速度非常快。我加载了一张 1024x1024 的表格，上面有 25 个精灵。我还从文件中加载了 25 个单独的精灵；对加载时间和绘图调用性能不利，但仍然可以正常工作，因为它只是一个关卡选择场景，没有其他任何事情发生。

从单独的文件中加载 25 个精灵的原因是，我需要将精灵放在单独的文件中，以用于某些只需要 25 个恶意中的一个的级别，并且不想将 25 个单独的精灵复制到一个精灵表中，这会增加包的大小.

如果没有在选择关卡场景中加载 25 个单独文件的奇怪限制，我本可以让关卡选择滚动条更高效。但是即使加载了精灵表和 25 个单独的文件，在 3gs 上的性能还是可以接受的。

# objective-c - NSPopUpButtonCell indexOfSelectedItem 总是返回 0

> ID：11812533
> 
> 赞同：0
> 
> 时间：2012-08-04T22:46:26.463
> 
> 标签：objective-c, macos, cocoa, nstableview, nspopupbuttoncell

我有一个 NSTableView，每个单元格都包含一个`NSPopUpButtonCell`. 我已将`NSPopUpButtonCell`' 操作设置为仅检查所选索引的方法（以便可以保存并重新加载表）。

```
thePopUpButtonCell.action = @selector(popUpChangedValue);

-(void)popUpChangedValue {

    NSLog(@"%ld", [thePopUpButtonCell indexOfSelectedItem]);

} 
```

无论我选择什么，它都说选择的索引是 0，即使它不是。你知道是什么原因造成的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T23:35:37.730

我这样做的方法是使用绑定。您需要数组中的一个字段（NSDictionary 中的键值对）来保存弹出窗口选择的值。在 IB 中，您将拥有一个数组控制器，其内容数组绑定到您的数组（包括我上面提到的字典）。带有弹出窗口的列将其 Selected Value 绑定到数组控制器的排列对象，并带有字典中键名的模型键路径。当您在弹出窗口中更改选择时，数组的值将通过绑定的魔力进行更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T23:06:53.820

看起来你`thePopUpButtonCell`的可能也是零？保留等可能存在一些问题。

# java - 在java中将点转换为svg路径/文件

> ID：11812538
> 
> 赞同：0
> 
> 时间：2012-08-04T22:46:47.150
> 
> 标签：java, svg, vaadin

我使用 vaadin 编写了一个简单的绘图应用程序，从我的应用程序中我收集了通过在画布上使用移动鼠标生成的所有点坐标。将这些点数据转换为 svg 的最佳方法是什么？非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T11:35:12.467

如果你想要一条跟随点的线，那么创建一个路径元素线：

```
<path d="Mx0 y0 Lx1 y1 x2 y2 x3 y3 ... Z"/> 
```

其中 x0、y0 等是您拥有的坐标。Z 是可选的；它通过添加从最后一个点到第一个点的直线来创建一个封闭的多边形，并允许您应用填充样式而不仅仅是线条样式。

# dynamics-crm - 更改 CRM2011 中的服务端点 URL

> ID：11812541
> 
> 赞同：1
> 
> 时间：2012-08-04T22:46:55.543
> 
> 标签：dynamics-crm, dynamics-crm-2011

有没有办法更改 MSCRM 2011 安装的服务端点 URL（在开发人员资源下）。如果绑定（A 记录）用于 IIS 中的 CRM 网站（例如 crm、crm.mydomain.com），则作为安装的一部分，MSCRM 2011 使用“crm”作为服务 URL，即“http://crm” /MSCRMDEV/XRMServices/2011/OrganizationData.svc" "http://crm/XRMServices/2011/Discovery.svc"

有没有办法重新配置 CRM 以使用 FQDN，以便我可以从域外访问服务？“http://crm.mydomain.com/MSCRMDEV/XRMServices/2011/OrganizationData.svc” “http://crm.mydomain.com/XRMServices/2011/Discovery.svc”

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T23:00:46.747

我在 IIS 绑定中有 2 个主机名，“crm”和“crm.mydomain.com”，我删除了“crm”，因为 crm 2011 似乎只能使用 1 个主机名，但无法使用FQDN（得到 404），如果我在绑定中添加“crm”主机头，则非限定名称有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T16:15:29.067

如果您没有使用主机的默认 FQDN（例如 crm01.mydomain.com），那么通常您需要为您正在使用的 URL 设置一个 SPN。我不记得结果是 404 还是 401，但我会[看看配置 SPN](http://blogs.msdn.com/b/crm/archive/2009/08/06/configuring-service-principal-names.aspx)。

# iphone - 应用程序激活时更新 uilabels

> ID：11812542
> 
> 赞同：0
> 
> 时间：2012-08-04T22:46:57.313
> 
> 标签：iphone, objective-c, ios, xcode, uiviewcontroller

我正在尝试做一些非常简单的事情：当应用程序从后台变为活动状态时更新我的​​（一个也是唯一的）视图控制器上的一些标签（为了简单起见，比如当前时间（即使在我的情况下，我正在更新电话参数，例如呼叫状态等，但这无关紧要））。

老实说，我确信一旦调用`viewDidLoad`，此方法中的代码将再次运行，因此我的所有标签都是最新的。但这不会发生，除非我杀死应用程序并重新启动它，所以我在应用程序委托中所做的`applicationDidBecomeActive`，我调用了我的视图控制器方法：

```
ViewController *vc = [[ViewController alloc] init];
[vc refreshCalls]; 
```

哪个确实执行此代码，但标签没有任何反应。这样做时，我还显示了一个`UIAlertView`确实有更新的信息，但没有标签。

我怎样才能解决这个问题？任何想法将不胜感激。

这是我的应用程序委托 applicationDidBecomeActive 方法：

```
- (void)applicationDidBecomeActive:(UIApplication *)application
{

ViewController *vc = [[ViewController alloc] init];
[vc refreshCalls];
} 
```

`refreshCalls`以及视图控制器中的方法：

```
 -(void) refreshCalls {

NSDate *today = [NSDate date];
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
// display in 12HR/24HR (i.e. 11:25PM or 23:25) format according to User Settings
[dateFormatter setTimeStyle:NSDateFormatterShortStyle];
NSString *currentTime = [dateFormatter stringFromDate:today];
NSLog(@"User's current time in their preference format:%@",currentTime);

  UIAlertView *alert1 = [[UIAlertView alloc] initWithTitle:@"TIME" message:currentTime delegate:nil cancelButtonTitle:@"Dismiss" otherButtonTitles:nil , nil];

 [alert1 show]; --> does show an update time        

myLabel.text = currentTime;
[self.view addSubview:myLabel]; --> nothing happens, stays the last time

 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T23:12:39.777

首先，您不应该调用`ViewDidLoad`. 它会为您调用，就像`applicationDidBecomeActive`.

现在，回答：

`refreshCalls`正在发生的事情是您在新的而不是现有的方法上调用您的方法`ViewController`，您可能在应用程序委托的某处创建了该方法。当你第一次创建你的`ViewController`时，你可能将它的视图添加到`UIWindow`.

然后，当您创建一个新`ViewController`的 in`applicationDidBecomeActive`并调用`refreshCalls`它时，它会按原样更新，但它的视图不会显示在屏幕上，因为您没有将它添加到`UIWindow`.

尝试在`appDelegate`您的第一次创建您的位置`ViewController`并将其分配给属性。然后，不要创建新`ViewController`的 in ，而是`applicationDidBecomeActive`获取现有的 in 并在其上调用您的`refreshCalls`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T22:51:33.397

我认为如果您的视图中已经有一个`myLabel`，您可能不应该添加另一个。也许您可以尝试拥有一个`@property`like `self.myLabel`，并在`self.myLabel.text = currentTime;`每次想要更新其文本时调用。（没有`addSubview`再次或东西..）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T00:07:59.273

您可以更新您的标签，`ViewController`而`viewDidAppear:animated`不是使用`applicationDidBecomeActive`. 像这样的东西：

```
- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
    [self refreshCalls];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T05:37:27.413

为了避免混淆，我决定根据我之前的答案创建另一个答案。

基本思想是在您的班级中保留订阅者列表，并在收到事件`UIApplication`时通知他们。`UIApplicationDelegate`这是如何做到的。

第1步

在您的`UIApplication`派生类标头中添加静态方法的定义来管理列表：

```
+ (void)addDelegate:(id <UIApplicationDelegate>)delegate;
+ (void)removeDelegate:(id <UIApplicationDelegate>)delegate; 
```

我正在使用`UIApplicationDelegate`它，因为它是一种“自然”的解决方案。但是，您可以定义自己的协议或扩展`UIApplicationDelegate`。

第2步

在您的应用程序类中添加实现。首先在 last`#import`和`@implementation`.

```
static NSMutableArray *_delegates; 
```

在里面`@implementation`我们添加静态方法体和初始化：

```
+ (void)initialize {
    _delegates = [[NSMutableArray alloc] init];
}

+ (void)addDelegate:(id <UIApplicationDelegate>)delegate {
    [_delegates addObject:delegate];
}

+ (void)removeDelegate:(id <UIApplicationDelegate>)delegate {
    [_delegates removeObject:delegate];
} 
```

对于您需要通知订阅者的每种`UIApplicationDelegate`方法，添加类似于此示例的代码：

```
- (void)applicationDidBecomeActive:(UIApplication *)application {
    NSEnumerator *enumerator = [_delegates objectEnumerator];
    id delegate;

    while (delegate = [enumerator nextObject]) {
        if ([delegate respondsToSelector:@selector(applicationDidBecomeActive:)]) {
            [delegate applicationDidBecomeActive:application];
        }
    }
} 
```

第 3 步

在您的`UIViewController`（或任何其他类）中添加代码以订阅、取消订阅和处理通知。不要忘记导入你的`UIApplication`类头。

订阅可以在您的 init 方法中设置，也可以在内部`UIViewController`设置`viewDidLoad`。

```
[MyAppDelegate addDelegate:self]; // your class should implement UIApplicationDelegate 
```

不要忘记取消订阅，否则可能会发生坏事！在你的 dealloc 方法或 for `UIViewController`inside`viewDidUnload`中添加它就可以了。

```
[MyAppDelegate removeDelegate:self]; 
```

最后添加`UIApplicationDelegate`您需要获得有关 ex 通知的方法：

```
- (void)applicationDidBecomeActive:(UIApplication *)application {
    // add your notification handling code here
} 
```

# soap - 骆驼：码头作为输入，肥皂作为输出

> ID：11812544
> 
> 赞同：2
> 
> 时间：2012-08-04T22:47:06.893
> 
> 标签：soap, routing, jetty, http-status-code-404, apache-camel

我想用骆驼做一个简单的代码，将一个 URL 监听器重定向到一个肥皂网络服务。我有一个简单的 PHP helloWorld SOAP Web 服务可用。我想键入`http://localhost:8080/test`并被路由到外部 SOAP Web 服务。最终目标是将soap转换为REST/JSON。

这是我的 camel-context.xml ：

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:cxf="http://camel.apache.org/schema/cxf"
    xmlns:camel="http://camel.apache.org/schema/spring" xmlns:http-conf="http://cxf.apache.org/transports/http/configuration"
    xsi:schemaLocation="
             http://www.springframework.org/schema/beans 
             http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
             http://camel.apache.org/schema/spring 
             http://camel.apache.org/schema/spring/camel-spring.xsd
             http://camel.apache.org/schema/cxf 
             http://camel.apache.org/schema/cxf/camel-cxf.xsd
             http://cxf.apache.org/transports/http/configuration 
             http://cxf.apache.org/schemas/configuration/http-conf.xsd">

    <import resource="classpath:META-INF/cxf/cxf.xml" />

<cxf:cxfEndpoint id="helloEp"                     
                   address="http://test.mydomain.com/soap/hello.php"
                   serviceClass="com.seb.helloEndPoint"
                   wsdlURL="http://test.mydomain.com/soap/hello.php?wsdl"/>

  <camelContext xmlns="http://camel.apache.org/schema/spring">
    <package>com.seb</package>
    <route>
        <from uri="jetty://http://0.0.0.0:8080/test"/>               
        <to uri="cxf:bean:helloEp"/>
    </route>
  </camelContext>
</beans> 
```

输入 camel:run 时的部分结果：

```
[pache.camel.spring.Main.main()] MainSupport                    INFO  Apache Camel 2.9.0 starting
[pache.camel.spring.Main.main()] CamelNamespaceHandler          INFO  OSGi environment not detected.
[pache.camel.spring.Main.main()] SpringCamelContext             INFO  Apache Camel 2.9.0 (CamelContext: camel-1) is starting
[pache.camel.spring.Main.main()] ManagementStrategyFactory      INFO  JMX enabled. Using ManagedManagementStrategy.
[pache.camel.spring.Main.main()] ultManagementLifecycleStrategy INFO  StatisticsLevel at All so enabling load performance statistics
[pache.camel.spring.Main.main()] AnnotationTypeConverterLoader  INFO  Found 3 packages with 15 @Converter classes to load
[pache.camel.spring.Main.main()] DefaultTypeConverter           INFO  Loaded 168 core type converters (total 168 type converters)
[pache.camel.spring.Main.main()] AnnotationTypeConverterLoader  INFO  Loaded 5 @Converter classes
[pache.camel.spring.Main.main()] DefaultTypeConverter           INFO  Loaded additional 23 type converters (total 191 type converters) in 0.023 seconds
[pache.camel.spring.Main.main()] ReflectionServiceFactoryBean   INFO  Creating Service {http://seb.com/}helloEndPointService from WSDL: http://test.mydomain.com/soap/hello.php?wsdl 
```

但是当我`http://127.0.0.1:8080/test`在我的网络浏览器中输入时，我有一个“无法加载页面”的空白页面。我还尝试使用 PHP SOAP 客户端脚本`http://127.0.0.1:8080/test`和相同的问题（无法加载外部实体“ `http://127.0.0.1:8080/test`”）。

谁能解释我做错了什么？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-19T03:27:32.637

几件事。打开跟踪并查看日志。我很确定您的问题出在 cxf 方面。

```
<camelContext trace="true" xmlns="http://activemq.apache.org/camel/schema/spring"> 
```

您还需要在端点中指定更多详细信息，例如此示例

```
 <cxf:cxfEndpoint id="serviceEndpoint" address="http://localhost:9000/SoapContext/SoapPort"
        wsdlURL="testutils/hello_world.wsdl"
        serviceClass="org.apache.hello_world_soap_http.Greeter"
        endpointName="s:SoapPort"
        serviceName="s:SOAPService"
    xmlns:s="http://apache.org/hello_world_soap_http" /> 
```

# java - Java Android 应用程序 Android 键盘（在进程 com.android.inputmethod.latin）没有响应

> ID：11812545
> 
> 赞同：0
> 
> 时间：2012-08-04T22:47:19.867
> 
> 标签：java, android, google-maps

我有一个示例应用程序 Android 2.1 google maps(2.1) 应用程序。当我运行该文件时，我遇到了一个我无法修复的错误，需要一些帮助。我不完全确定问题出在哪里，所以这是我在活动中创建的代码。

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        mapView = (MapView)findViewById(R.id.mapView);
        mapView.setBuiltInZoomControls(true);
        mapView.setSatellite(false);
        mapView.setStreetView(true);
        mapController = mapView.getController();
        mapController.setZoom(13);
        getLastLocation();
        animateToCurrentLocation();
        //added to include overlays in here
        //List<Overlay> mapOverlays = mapView.getOverlays();
        //Drawable drawable = this.getResources().getDrawable(R.drawable.androidmarker);
        //MapItemizedOverlay itemizedoverlay = new MapItemizedOverlay(drawable, this);
        //GeoPoint coordinates are specified in microdegrees (degrees * 1e6). The OverlayItem constructor accepts the 
        //GeoPoint location, a string for the item's title, and a string for the item's snippet text, respectively.
        //GeoPoint point = new GeoPoint(19240000,-99120000);
        //OverlayItem overlayitem = new OverlayItem(point, "Hola, Mundo!", "I'm in Mexico City!");
        //try adding another one 
        //GeoPoint point2 = new GeoPoint(35410000, 139460000);
        //OverlayItem overlayitem2 = new OverlayItem(point2, "Sekai, konichiwa!", "I'm in Japan!");
        //All that's left is to add this OverlayItem to your collection in the MapItemizedOverlay
        //instance, then add the HelloItemizedOverlay to the MapView:
        //itemizedoverlay.addOverlay(overlayitem);
        //itemizedoverlay.addOverlay(overlayitem2);
        //mapOverlays.add(itemizedoverlay);
    } 
```

08-04 20:03:05.144: E/ActivityThread(229): 找不到 com.google.settings 的提供者信息

08-04 20:03:06.765: E/MapActivity(229): 无法获取连接工厂客户端

```
 [2012-08-04 17:38:41 - com.shawnbe.mallfinder.MallFinderActivity] ------------------------------
    [2012-08-04 17:38:41 - com.shawnbe.mallfinder.MallFinderActivity] Android Launch!
    [2012-08-04 17:38:41 - com.shawnbe.mallfinder.MallFinderActivity] adb is running normally.
    [2012-08-04 17:38:41 - com.shawnbe.mallfinder.MallFinderActivity] Performing com.shawnbe.mallfinder.MallFinderActivity activity launch
    [2012-08-04 17:38:41 - com.shawnbe.mallfinder.MallFinderActivity] Automatic Target Mode: launching new emulator with compatible AVD 'MAPPAPI2'
    [2012-08-04 17:38:41 - com.shawnbe.mallfinder.MallFinderActivity] Launching a new emulator with Virtual Device 'MAPPAPI2'
    [2012-08-04 17:38:42 - com.shawnbe.mallfinder.MallFinderActivity] New emulator found: emulator-5554
    [2012-08-04 17:38:42 - com.shawnbe.mallfinder.MallFinderActivity] Waiting for HOME ('android.process.acore') to be launched...
    [2012-08-04 17:39:36 - com.shawnbe.mallfinder.MallFinderActivity] HOME is up on device 'emulator-5554'
    [2012-08-04 17:39:36 - com.shawnbe.mallfinder.MallFinderActivity] Uploading com.shawnbe.mallfinder.MallFinderActivity.apk onto device 'emulator-5554'
    [2012-08-04 17:39:46 - com.shawnbe.mallfinder.MallFinderActivity] Failed to install com.shawnbe.mallfinder.MallFinderActivity.apk on device 'emulator-5554': timeout
    [2012-08-04 17:39:46 - com.shawnbe.mallfinder.MallFinderActivity] Launch canceled! 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T23:05:14.227

我对 Android 还是很陌生，所以很遗憾我无法解释这些错误，但我的应用程序中出现了相同的错误，但没有它们导致安装失败。

有时重新启动 AVD 为我解决了安装失败的问题，但我不知道原因。

# android - 如何使用嵌套的 FrameLayouts 排列多个 android 片段？

> ID：11812548
> 
> 赞同：0
> 
> 时间：2012-08-04T22:47:38.287
> 
> 标签：android, android-fragments

我想显示一个简单的横向布局，其中一个列表片段在屏幕的左半部分，两个垂直对齐的片段在右侧。水平显示所有三个片段可以正常工作，但我下面的布局仅显示列表片段，而不显示右侧垂直 LinearLayout 内的其他两个片段。我的布局参数做错了什么？

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal">

    <fragment class="com.copperykeenclaws.gameplanner.TeamListFragment"
        android:id="@+id/team_list_fragment"
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_weight="1"
        android:layout_width="0px"
        android:layout_height="wrap_content">
   </fragment>
   <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_weight="1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="vertical">
        <FrameLayout android:id="@+id/team_details_frame" 
                android:layout_width="0px" 
                android:layout_height="wrap_content"/>
        <FrameLayout android:id="@+id/team_players_frame" 
                android:layout_width="0px" 
                android:layout_height="wrap_content"/>
    </LinearLayout>
</LinearLayout> 
```

FrameLayouts 在 FragmentTransactions 中以编程方式被替换，这在全水平布局中运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T23:03:58.897

两者都`team_details_frame`具有`team_players_frame`0px 的宽度，因此它们不会显示。要么给他们一个 layout_weight 属性（尽管不鼓励嵌套 layout_weights，但我怀疑在你的情况下会有很大的性能影响）或将它们设置为 wrap_content 或 match_parent。

# java - Android：文件在模拟器中工作但在设备中出错？

> ID：11812549
> 
> 赞同：0
> 
> 时间：2012-08-04T22:48:00.860
> 
> 标签：java, android, file-upload, http-post

我只是想通过代码将文件上传到服务器，如果我从模拟器访问文件，它工作正常，

路径**data/app/07312012_135528.3gp**并获得服务器响应**200，OK**

但是当我通过设备访问要上传的文件时出现错误**400，** 当文件存在于**SDCard**中时出现错误请求，并且它通过了**File.exists()**检查。

我的手机是**三星 Galaxy Ace**

```
HttpPost postRequest = new HttpPost(ServerURL);
MultipartEntity reqEntity = new MultipartEntity();
File dir = Environment.getExternalStorageDirectory();
File yourFile = new File(dir, "tdsongdata/07312012_135528.3gp");
// path becomes "/mnt/sdcard/tdsongdata/07312012_135528.3gp"

if(yourFile.exists())
{
    reqEntity.addPart("email", new StringBody("esetylo@gmail.com"));
    reqEntity.addPart("password", new StringBody("123"));
    reqEntity.addPart("title", new StringBody("The new file"));         
    reqEntity.addPart("musicData", new FileBody(yourFile));
} 
```

但是当我**尝试从设备中的同一路径播放它时，它会成功播放音频**

```
MediaPlayer mp = new MediaPlayer();
try {
        mp.setDataSource("/mnt/sdcard/tdsongdata/07312012_135528.3gp");
    mp.prepare();
    mp.start(); 
} catch (IllegalArgumentException e) {
        e.printStackTrace();
} catch (IllegalStateException e) {
    e.printStackTrace();
} catch (IOException e) {
    e.printStackTrace();
} 
```

看不懂问题出在哪里，求大神帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T07:37:00.860

将您的手机语言更改为英语（美国）。重新启动您的设备，然后重试。

# java - 关键字实现不工作 Java

> ID：11812552
> 
> 赞同：0
> 
> 时间：2012-08-04T22:48:50.140
> 
> 标签：java, android, eclipse

我正在制作一个用于学习 android 的测试应用程序，我尝试使用“实现”来使用类函数接口，正如我在 android 教程中看到的那样。但是当我尝试按照教程使用的语法来开发我自己的接口时，我遇到了错误并且无法使用接口函数。教程中的人使用的语法就像

```
public class alfred extends Activity implements View.onClickListener()
{some code .....} 
```

和我一样，但我自己设计的界面就像

```
public class tony extends Activity implements Myinterface.foo()
{...} 
```

但我不能做 Myinterface.foo() 但可以做 Myinterface 然后使用所有接口函数。为什么会这样？感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T22:57:29.980

在类视图中定义了一个接口

```
 public interface OnClickListener {
        void onClick(View v);
 } 
```

仔细查看它的 View.OnClickListener() 而不是 View.onClickListener()

尝试

```
public class tony extends Activity implements Myinterface 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T22:58:05.653

您正在经历的行为正是应该发生的事情！我猜你正在遵循的教程中有一个错误。

要使用接口，您需要实现接口，而不是它公开的方法。因此，例如，您实现`View.OnClickListener`（*不是* `View.OnClickListener.onClick()`- 这是我想象的错误所在），或者在您的情况下`Myinterface`。然后，您必须将所需的方法放入类中（例如`onClick(View)`，或`foo()`）。

# tridion - C# 代码片段和程序集 TBB 有什么区别？

> ID：11812553
> 
> 赞同：15
> 
> 时间：2012-08-04T22:48:53.750
> 
> 标签：tridion

我了解 C# 代码片段和 .NET 程序集为模块化模板开发提供相同的功能。我们在 CME 中管理代码片段，在 Visual Studio 中管理汇编代码，但在模板生成器中使用相同的方式。

在代码方面，我可以创建一个 C# Code Fragment Template Building Block (TBB)，例如：

```
var timeStamp = DateTime.Now.ToString("d MMM yyyy");
package.PushItem("timeStamp from fragment", package.CreateHtmlItem(timeStamp)); 
```

我还可以通过如下实现 ITemplate 来使用相同的代码创建一个 .NET 程序集模板构建块。

```
using System;
using Tridion.ContentManager.Templating;
using Tridion.ContentManager.Templating.Assembly;

namespace CreateAndBreakTemplates
{
  [TcmTemplateTitle("Add Date to Package")]
  public class AddDateToPackage : ITemplate
  {
    public void Transform(Engine engine, Package package)
    {
      var timeStamp = DateTime.Now.ToString("d MMM yyyy");
      package.PushItem("timeStamp from assembly", 
                       package.CreateHtmlItem(timeStamp));
    }
  }
} 
```

[文档](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/concept_EAD6A4932E6B4BAA87646A5F8D9C6A9C)解释说“ SDL Tridion 将代码片段插入到预定义类的预定义方法中”。**看起来这个类实现了 ITemplate 并在下面添加了一些引用（我错过了什么吗？）。**

程序集[设置说明](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/task_BE927D0A8B0F4E46AFE51032895447CA)至少提到了这些 dll。

*   Tridion.Common.dll
*   Tridion.ContentManager.dll
*   Tridion.ContentManager.Templating.dll
*   Tridion.ContentManager.Publishing.dll

**片段和程序集之间还有其他区别吗？您将如何在两者之间进行选择？**

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-05T00:19:27.390

当模板第一次被调用和修改后，AC# 片段被 Tridion 编译成一个程序集。为了编译该片段，Tridion 将其包装在一些“地牢敷料”（那些知道该术语来自哪里的人的奖励积分）中：

1.  使用`Tridion.ContentManager`、`Tridion.ContentManager.CommunicationManagement`和`Tridion.ContentManager.ContentManagement`命名`Tridion.ContentManager.Templating`空间
2.  使`Package`and分别在名为and`Engine`的字段中可用`package``engine`
3.  为 C# 片段创建一个记录器，该记录器可通过名为`log`
4.  添加对一些常用程序集的引用（但`using`尚未为其命名空间添加 a）

* * *

***编辑：***鉴于其他答案，似乎很多人不知道如何在 C# 片段 TBB 中完成某些任务，所以我将在下面记录它们：

# 导入其他命名空间

要将其他命名空间导入/使用到您的 C# 片段中，您需要使用以下语法：

```
<%@ Import Namespace="Tridion.ContentManager.ContentManagement.Fields" %> 
```

请注意，这只会从 Tridion 已引用的程序集中导入命名空间。没有机制让您显式添加对其他程序集的引用；因此，如果您需要第三方 DLL，则需要将其添加到 GAC。

# 定义自定义函数

您可以使用以下语法在 C# 片段中定义自定义字段和函数：

```
<%!

public static string GetDate()
{
    return new DateTime().ToString("u").Replace(" ", "T");
}

%> 
```

# 定义成员字段和（嵌套）类

定义自定义函数的语法还允许您定义嵌套类和/或成员字段：

```
<%!

public class MyLittleHelper
{
    public MyLittleHelper(string param1)
    {
    }
}

%> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-05T05:53:04.773

弗兰克已经解释了这两种方法之间的区别，但这仍然留下了如何在两者之间进行选择的问题。我个人的建议是永远不要将 C# 片段用于任何事情，只有一个例外*。正如你所发现的，其中有一些我个人不喜欢的黑暗魔法。此外，还有很多你不能在它们中做的事情是 .NET 程序员非常喜欢的，比如创建类。

撇开我的个人品味不谈，我认为您会求助于 C# 片段的原因只有一个：如果您无法访问 Visual Studio 或其他构建 DLL 的工具。这也不是一个非常有力的论据：如果你想完成工作，你应该得到合适的工具！

**当然，Tridion 为程序集中的每个 ITemplate 自动创建的 C# 片段除外。*

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-08-06T02:13:55.093

在我看来，C# 代码片段和 .net 程序集之间的主要区别分为以下高级桶。

**逐步调试**

使用 .net 程序集，您可以从 Visual Studio 进行逐步调试，而 C# 代码片段则无法实现。

**重用或基类**

使用 .net 程序集，您可以扩展 ITemplate 以创建类似 BaseTemplate 的内容，并且您的所有模板都可以扩展它们，因此您拥有通用的设计模式，而在 C# 中，除了 Tridion ITemplate 接口之外没有 BaseTemplate 的概念。

使用 .net 程序集，您可以添加通用实用程序类（通常是 TridionUtilities），并且所有模板都引用相同的 TridionUtilities 以实现通用功能。C# 代码片段，实用程序函数需要在同一个 TBB 中定义，并且不能与其他 TBB 重用，除非您创建一个类并部署到 GAC。

**更轻松的升级扫描和维护**

使用 .net 程序集，可以更轻松地进行任何升级扫描，例如不推荐使用的 API/方法，只需引用新的 dll/.net 框架。.net 程序集可以轻松识别对规划 Tridion 升级或 .net 框架升级的潜在影响。C# 代码片段很难找到已弃用或升级的任何影响。

**开发者友好**

显然 .net 程序集是使用 Visual Studio 开发的（开发人员喜欢它！）与文本编辑器中的 C# 代码片段（痛苦）。

当我开始使用 Tridion 5.3 时，从 C# 代码片段开始，并很快意识到我犯了一个错误，因为我没有使用 .net 程序集。

我的投票始终是 .net 程序集，甚至没有考虑 C# 代码片段，除非我别无选择。哈哈..

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-08-06T08:52:49.220

我认为弗兰克的回答确实可以最好地解释差异，至于您将如何在两者之间进行选择。我通常会说，既然您一直在使用 Visual Studio，请始终为您的代码创建一个 .NET 程序集 TBB。它们为您提供了更多好处，例如包括 3rd 方程序集，允许使用类和方法进行正确编码更容易并且可能最重要的是，允许正确调试（尽管最后一个可能很难根据您所在的位置进行设置，思考客户环境、防火墙等）。

对我来说，使用 C# 片段只有两个例外：

1.  对在程序集中实现 ITemplate 的类的引用，允许您将它们用作单独的 TBB
2.  如果需要直接从 SDL Tridion 管理常量或其他硬编码常量

第二个当然是有争议的，但你永远不能没有配置属性，对于一个 TBB，你可以使用参数模式来处理大多数这些，但有时直接将它们写在 C# 片段中并拥有它会容易得多将它们推到包装中以供其他 TBB 使用。

在我的培训课程中，我通常会提到以下关于我迄今为止唯一一次选择使用 C# Fragment TBB 的故事，表明使用它们有多大的例外情况：

> 我在国外的一个客户那里工作，我去机场的出租车在 10 分钟后就要离开，当时我正在指导的一位开发人员问我一个问题，即如何从他的 TBB 中的文件夹中获取项目列表。我已经关闭了我的 Visual Studio 和 Outlook，正要关闭我的笔记本电脑，但我快速浏览了我的一些代码示例以找到他需要的东西。知道启动 Visual Studio 或 Outlook 需要几分钟，我迅速将代码粘贴到 C# 片段中，以便他方便参考。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-05T11:18:29.637

我永远不会使用 C# 片段，唯一的原因是它使您的代码管理非常困难并且您需要手动部署它们。如果您确实从 Visual Studio 编写代码，那么您应该创建一个 .NET Building Block 程序集。

# c++ - 如何对联合进行零初始化？

> ID：11812555
> 
> 赞同：5
> 
> 时间：2012-08-04T22:49:07.920
> 
> 标签：c++

考虑以下代码：

```
struct T {
    int a;
    union {
        struct {
            int a;
        } s1;
        struct {
            char b[1024];
        } s2;
    };
};

int main() {
    T x = T();
} 
```

由于调用了显式构造函数，因此上述代码最终将 x 中的所有数据成员初始化为零。

但是即使没有调用显式，我也希望将 x 初始化为零。要做到这一点，一个想法是在声明中初始化数据成员，这对 T::a 来说似乎是可以的。但是如何使用相同的标准对联合占用的所有内存进行零初始化呢？

```
struct T {
    int a = 0;
    union {
        struct {
            int a;
        } s1;
        struct {
            char b[1024];
        } s2;
    };
};

int main() {
    T x; // I want x to be zero-initialized
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-04T22:56:56.777

你可以使用归零`memset`：

```
memset(&x, 0, sizeof(x)); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-04T22:59:10.267

对于没有用户定义的默认构造函数的联合，*值初始化*为零*初始化*。

但是，联合的零初始化可能不会将所有内存归零，而只会将填充和第一个成员归零。如果第一个成员不是最大的，则可能会留下非零内容。

由于您知道这`s2`是最大的，您可以创建一个将其归零的默认构造函数：

```
struct T
{
    int a;
    union {
        int s1a;
        char s2b[1024];
    };
    T() : a(), s2b() {}
}; 
```

现在

```
T x; 
```

将归零。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-04T23:01:27.527

我建议为：实现一个构造函数`T`：

```
struct T {
    int a;
    union {
        struct {
            int a;
        } s1;
        struct {
            char b[1024];
        } s2;
    };
    T() : a(), s2() {} // <- proper initialisation
}; 
```

在这种情况下，我选择了你最大的成员，`union`因为它是透明的。否则，您可以显式创建`union`自身。

# facebook-graph-api - 在 Facebook Graph API 中使用应用令牌而不是用户/页面令牌

> ID：11812556
> 
> 赞同：0
> 
> 时间：2012-08-04T22:49:10.330
> 
> 标签：facebook-graph-api

Facebook 的 Graph API 返回 3 种类型的令牌：用户令牌、页面令牌和应用令牌。我们的网络应用程序使用用户和页面令牌分别读取和发布数据给用户和页面。它工作得很好，除了 60 天的令牌生命周期需要重复重新认证......

然后我注意到[这篇关于 App tokens](http://developers.facebook.com/docs/authentication/applications/)的文章，其中提到 a) 它们不会过期 b) 它们允许您代表用户发布

我还尝试使用 App 令牌从用户和页面对象中读取私有流数据，效果也很好。那么有什么关系呢？我可以在所有调用中使用 App 令牌而不是用户/页面生成的令牌，而不必担心过期吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T22:56:41.177

App 令牌将您的应用程序*作为应用程序本身*向 Facebook 验证。这对于公共数据来说很好，但如果您有用户登录，它可能不是您想要的。

如果您想代表您的用户采取行动，您仍然必须让他们进行身份验证并使用他们的用户和页面访问令牌。

# .net - 如何从 .NET 锁定 Windows（如“Windows + L”）？

> ID：11812562
> 
> 赞同：11
> 
> 时间：2012-08-04T22:50:12.577
> 
> 标签：.net, windows, winapi

您可以按`Windows`+锁定 Windows PC `L`。

如何使用 VB.NET 或 C# 锁定 Windows PC？

一个简短的例子会很有帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-04T22:53:17.933

使用 PInvoke调用[LockWorkStation函数。](http://msdn.microsoft.com/en-us/library/windows/desktop/aa376875%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-04T23:01:21.873

以下代码可用于以编程方式锁定计算机。

```
using System.Runtime.InteropServices;

[DllImport("user32.dll")]
public static extern void LockWorkStation(); 
```

# apache - 将子域重定向到另一个相同结构的子文件夹

> ID：11812563
> 
> 赞同：0
> 
> 时间：2012-08-04T22:50:14.597
> 
> 标签：apache, .htaccess, mod-rewrite, redirect

我想知道如何通过 .htaccess 将子域重定向到另一个具有相同结构的子文件夹

例如我想重定向

```
bookmarks.site.com 
```

至

```
www.site.com/bookmarks 
```

如果有人去链接

```
http://bookmarks.site.com/story.php?title=free-logo-design 
```

它将重定向到

```
http://www.site.com/bookmarks/story.php?title=free-logo-design 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T23:32:50.403

尝试将其放入文档根目录的 htaccess 文件中：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} !^www\.site\.com$ [NC]
RewriteCond %{HTTP_HOST} ^([^\.]+)\.site.com$ [NC]
RewriteRule ^(.*)$ http://www.site.com/%1/$1 [L,R=301] 
```

# wpf - WPF + PRISM - 显示带有控件的模态弹出窗口？

> ID：11812569
> 
> 赞同：4
> 
> 时间：2012-08-04T22:51:03.380
> 
> 标签：wpf, popup, prism

我正在关注 Prism 团队的*“Stock Trader RI”*示例，但它并没有完全解决这个问题：

我有一个带有***主要区域的******外壳***。

 **在这个外壳中，我有一些过滤器字段和一个网格。

当我按下按钮时 - 我想加载一个允许我更改过滤器的屏幕，

然后按*“保存”*。然后这将调用服务来更新字段，并关闭弹出窗口。

这是按下按钮之前（左）和之后（右）的“外壳”的图示：

[![插图：](../Images/02375605d22255aa9f1efe1e1999618d.png)](https://i.stack.imgur.com/1pW2H.png)

问题是：

1.  “Stock Trader RI”示例应用程序仅使用无模式对话框弹出窗口。我需要一个**MODAL**弹出窗口（背景将继续刷新，但只要弹出窗口处于活动状态，用户就无法访问它）。
2.  弹出显示时需要具有类似 Silverlight 的效果，这意味着 - “外壳”需要显示为“禁用”（就像它上面的灰色蒙版）。
3.  弹出窗口应该没有“X”按钮，也没有“最小化”或“最大化”按钮。弹出窗口应该只是一个带有弯角的矩形。
4.  我认为我不能使用“通知窗口”或“确认窗口”，因为我无法在其中放入任何我想要的东西。这是一个包含 2 个字段的示例，但弹出窗口可能会更复杂，其中包含选项卡，并且向用户显示了很多信息。

那么，一旦按下“编辑”按钮，如何从“WPF+PRISM”Shell-View-Model 中显示模式弹出窗口？（意思是，一旦“EditCommand”被执行......）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T19:16:52.463

我在[这里](http://blogs.southworks.net/dcherubini/2012/05/24/popupwindowaction-using-custom-views-instead-of-windows-in-wpf-and-prism/)找到了解决方案。

基本上它使用**InteractionRequest**并且它允许我打开一个窗口（我可以根据需要设置样式，没有“最大化”“最小化”按钮），而且 - 我可以选择它是*Modal*。

这个解决方案的好处是 - 我可以使用自定义弹出窗口，而不仅仅是通知或确认弹出窗口。

另外 - 我可以将信息传递回调用“InteractionRequest”的类。

唯一没有解决的问题是 - 我无法通过在其上添加灰色半透明来使调用视图看起来被禁用......还没有想出如何做到这一点......**

# java - 如何为迷宫/迷宫/地牢建造墙壁？

> ID：11812570
> 
> 赞同：1
> 
> 时间：2012-08-04T22:51:18.013
> 
> 标签：java, 3d, blender, ogre, jmonkeyengine

我使用的代码是从一个示例中获取的，它确实为我的场景构建了一堵墙：

```
 /** This loop builds a wall out of individual bricks. */
  public void initWall() {
    float startpt = brickLength / 4;
    float height = 0;
    for (int j = 0; j < 15; j++) {
      for (int i = 0; i < 6; i++) {
        Vector3f vt =
         new Vector3f(i * brickLength * 2 + startpt, brickHeight + height, 10);
        makeBrick(vt);
      }
      startpt = -startpt;
      height += 2 * brickHeight;
    }
  }

  /** This method creates one individual physical brick. */
  public void makeBrick(Vector3f loc) {
    /** Create a brick geometry and attach to scene graph. */
    Geometry brick_geo = new Geometry("brick", box);
    brick_geo.setMaterial(wall_mat);
    rootNode.attachChild(brick_geo);
    /** Position the brick geometry  */
    brick_geo.setLocalTranslation(loc);
    /** Make brick physical with a mass > 0.0f. */
    brick_phy = new RigidBodyControl(2f);
    /** Add physical brick to physics space. */
    brick_geo.addControl(brick_phy);
    bulletAppState.getPhysicsSpace().add(brick_phy);
  } 
```

![在此处输入图像描述](../Images/f5c897dfb72db66e78b5b4f9d2ebb206.png)

现在我想知道我是否应该使用这段代码来建立一个完整的迷宫/地牢，或者这是否最好在程序之外建模，例如。在搅拌机中而不是像 .scene 然后读入程序？整个程序是

```
package adventure;

import java.applet.Applet;
import com.jme3.math.Quaternion;
import com.jme3.math.FastMath;
import java.applet.AudioClip;
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.Image;
import java.awt.TextArea;
import java.net.MalformedURLException;
import java.net.URL;
import java.util.ArrayList;
import java.util.List;
import com.jme3.material.RenderState.FaceCullMode;
import javax.swing.JFrame;
import javax.swing.JPanel;
import com.jme3.renderer.queue.RenderQueue.ShadowMode;
import com.jme3.animation.AnimChannel;
import com.jme3.animation.AnimControl;
import com.jme3.animation.AnimEventListener;
import com.jme3.animation.LoopMode;
import com.jme3.app.SimpleApplication;
import com.jme3.asset.BlenderKey;
import com.jme3.asset.TextureKey;
import com.jme3.asset.plugins.ZipLocator;
import com.jme3.bullet.BulletAppState;
import com.jme3.bullet.PhysicsSpace;
import com.jme3.bullet.collision.PhysicsCollisionEvent;
import com.jme3.bullet.collision.PhysicsCollisionListener;
import com.jme3.bullet.collision.shapes.CapsuleCollisionShape;
import com.jme3.bullet.collision.shapes.CollisionShape;
import com.jme3.bullet.collision.shapes.SphereCollisionShape;
import com.jme3.bullet.control.CharacterControl;
import com.jme3.bullet.control.RigidBodyControl;
import com.jme3.bullet.util.CollisionShapeFactory;
import com.jme3.effect.ParticleEmitter;
import com.jme3.effect.ParticleMesh.Type;
import com.jme3.effect.shapes.EmitterSphereShape;
import com.jme3.input.ChaseCamera;
import com.jme3.input.KeyInput;
import com.jme3.input.controls.ActionListener;
import com.jme3.input.controls.KeyTrigger;
import com.jme3.light.DirectionalLight;
import com.jme3.material.Material;
import com.jme3.math.ColorRGBA;
import com.jme3.math.Vector2f;
import com.jme3.math.Vector3f;
import com.jme3.post.FilterPostProcessor;
import com.jme3.post.filters.BloomFilter;
import com.jme3.renderer.Camera;
import com.jme3.renderer.queue.RenderQueue.ShadowMode;
import com.jme3.scene.Geometry;
import com.jme3.scene.Node;
import com.jme3.scene.Spatial;
import com.jme3.scene.shape.Box;
import com.jme3.scene.shape.Sphere;
import com.jme3.scene.shape.Sphere.TextureMode;
import com.jme3.system.AppSettings;
import com.jme3.system.JmeCanvasContext;
import com.jme3.terrain.geomipmap.TerrainLodControl;
import com.jme3.terrain.geomipmap.TerrainQuad;
import com.jme3.terrain.heightmap.AbstractHeightMap;
import com.jme3.terrain.heightmap.ImageBasedHeightMap;
import com.jme3.texture.Texture;
import com.jme3.texture.Texture.WrapMode;
import com.jme3.util.SkyFactory;

public class MountainWorld extends SimpleApplication implements ActionListener,
        PhysicsCollisionListener, AnimEventListener, Playable {

      /** Prepare Materials */
      Material wall_mat;
      Material stone_mat;
      Material floor_mat;

      /** Prepare geometries and physical nodes for bricks and cannon balls. */
      private RigidBodyControl    brick_phy;
      private static final Box    box;
      private RigidBodyControl    ball_phy;
      private static final Sphere sphere;
      private RigidBodyControl    floor_phy;
      private static final Box    floor;

      /** dimensions used for bricks and wall */
      private static final float brickLength = 0.48f;
      private static final float brickWidth  = 0.24f;
      private static final float brickHeight = 0.12f;

      static {
        /** Initialize the cannon ball geometry */
        sphere = new Sphere(32, 32, 0.4f, true, false);
        sphere.setTextureMode(TextureMode.Projected);
        /** Initialize the brick geometry */
        box = new Box(Vector3f.ZERO, brickLength, brickHeight, brickWidth);
        box.scaleTextureCoordinates(new Vector2f(1f, .5f));
        /** Initialize the floor geometry */
        floor = new Box(Vector3f.ZERO, 100f, 0.1f, 50f);
        floor.scaleTextureCoordinates(new Vector2f(3, 6));
      }

    private static World world;
    private static Person person;
    private static Player dplayer;
    private static TextArea textarea;
    private BulletAppState bulletAppState;
    private AnimChannel channel;
    private AnimControl control;
    // character
    CharacterControl character;
    Node model;
    // temp vectors
    Vector3f walkDirection = new Vector3f();
    // terrain
    TerrainQuad terrain;
    RigidBodyControl terrainPhysicsNode;
    // Materials
    Material matRock;
    Material matBullet;
    // animation
    AnimChannel animationChannel;
    AnimChannel shootingChannel;
    AnimControl animationControl;
    float airTime = 0;
    // camera
    boolean left = false, right = false, up = false, down = false;
    ChaseCamera chaseCam;
    // bullet
    Sphere bullet;
    SphereCollisionShape bulletCollisionShape;
    // explosion
    ParticleEmitter effect;
    // brick wall
    Box brick;
    float bLength = 0.8f;
    float bWidth = 0.4f;
    float bHeight = 0.4f;
    FilterPostProcessor fpp;
    private Spatial sceneModel;

    private RigidBodyControl landscape;
    public static void main(String[] args) {
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                AppSettings settings = new AppSettings(true);
                settings.setWidth(850);
                settings.setHeight(440);

                MountainWorld canvasApplication = new MountainWorld();
                canvasApplication.setSettings(settings);
                canvasApplication.createCanvas(); // create canvas!
                JmeCanvasContext ctx = (JmeCanvasContext) canvasApplication
                        .getContext();
                ctx.setSystemListener(canvasApplication);
                Dimension dim = new Dimension(640, 480);
                ctx.getCanvas().setPreferredSize(dim);

                JFrame window = new JFrame("Dungeon World");
                window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

                JPanel panel = new JPanel(new BorderLayout()); // a panel
                world = new DungeonWorld(canvasApplication);
                person = new Person(world, "You", null);
                dplayer = new Player(world, person);
                Commands commands = new Commands(person);
                textarea = new TextArea("", 10, 60,
                        TextArea.SCROLLBARS_VERTICAL_ONLY);
                textarea.append("You are in a dungeon. The horrible shrieks of the undead chill your bones.\n");
                textarea.setEditable(false);
                panel.add("West", ctx.getCanvas());
                panel.add("East", commands);
                panel.add("South", textarea);
                window.add(panel);
                window.pack();
                window.setVisible(true);
                canvasApplication.startCanvas();

            }
        });
    }

    @Override
    public void simpleInitApp() {
        bulletAppState = new BulletAppState();
        bulletAppState.setThreadingType(BulletAppState.ThreadingType.PARALLEL);
        stateManager.attach(bulletAppState);
        setupKeys();
        //prepareBullet();
        //prepareEffect();
        createLight();
        //createSky();
        initMaterials();
        initFloor();
        initWall();
        //createTerrain();
        //createWall();
        createCharacters();
        setupChaseCamera();
        setupAnimationController();
        setupFilter();
    }

      /** This loop builds a wall out of individual bricks. */
      public void initWall() {
        float startpt = brickLength / 4;
        float height = 0;
        for (int j = 0; j < 15; j++) {
          for (int i = 0; i < 6; i++) {
            Vector3f vt =
             new Vector3f(i * brickLength * 2 + startpt, brickHeight + height, 10);
            makeBrick(vt);
          }
          startpt = -startpt;
          height += 2 * brickHeight;
        }
      }

      /** This method creates one individual physical brick. */
      public void makeBrick(Vector3f loc) {
        /** Create a brick geometry and attach to scene graph. */
        Geometry brick_geo = new Geometry("brick", box);
        brick_geo.setMaterial(wall_mat);
        rootNode.attachChild(brick_geo);
        /** Position the brick geometry  */
        brick_geo.setLocalTranslation(loc);
        /** Make brick physical with a mass > 0.0f. */
        brick_phy = new RigidBodyControl(2f);
        /** Add physical brick to physics space. */
        brick_geo.addControl(brick_phy);
        bulletAppState.getPhysicsSpace().add(brick_phy);
      }

     /** Make a solid floor and add it to the scene. */
      public void initFloor() {
        Geometry floor_geo = new Geometry("Floor", floor);
        floor_geo.setMaterial(floor_mat);
        floor_geo.setLocalTranslation(0, -0.1f, 0);
        this.rootNode.attachChild(floor_geo);
        /* Make the floor physical with mass 0.0f! */
        floor_phy = new RigidBodyControl(0.0f);
        floor_geo.addControl(floor_phy);
        bulletAppState.getPhysicsSpace().add(floor_phy);
      }

      /** Initialize the materials used in this scene. */
      public void initMaterials() {
        wall_mat = new Material(assetManager, "Common/MatDefs/Misc/Unshaded.j3md");
        TextureKey key = new TextureKey("Textures/Terrain/BrickWall/BrickWall.jpg");
        key.setGenerateMips(true);
        Texture tex = assetManager.loadTexture(key);
        wall_mat.setTexture("ColorMap", tex);

        stone_mat = new Material(assetManager, "Common/MatDefs/Misc/Unshaded.j3md");
        TextureKey key2 = new TextureKey("Textures/Terrain/Rock/Rock.PNG");
        key2.setGenerateMips(true);
        Texture tex2 = assetManager.loadTexture(key2);
        stone_mat.setTexture("ColorMap", tex2);

        floor_mat = new Material(assetManager, "Common/MatDefs/Misc/Unshaded.j3md");
        TextureKey key3 = new TextureKey("Textures/Terrain/Pond/Pond.jpg");
        key3.setGenerateMips(true);
        Texture tex3 = assetManager.loadTexture(key3);
        tex3.setWrap(WrapMode.Repeat);
        floor_mat.setTexture("ColorMap", tex3);
      }

    private void setupFilter() {
        FilterPostProcessor fpp = new FilterPostProcessor(assetManager);
        BloomFilter bloom = new BloomFilter(BloomFilter.GlowMode.Objects);
        fpp.addFilter(bloom);
        viewPort.addProcessor(fpp);
    }

    private PhysicsSpace getPhysicsSpace() {
        return bulletAppState.getPhysicsSpace();
    }

    private void setupKeys() {
        inputManager.addMapping("wireframe", new KeyTrigger(KeyInput.KEY_T));
        inputManager.addListener(this, "wireframe");
        inputManager.addMapping("CharLeft", new KeyTrigger(KeyInput.KEY_A));
        inputManager.addMapping("CharRight", new KeyTrigger(KeyInput.KEY_D));
        inputManager.addMapping("CharUp", new KeyTrigger(KeyInput.KEY_W));
        inputManager.addMapping("CharDown", new KeyTrigger(KeyInput.KEY_S));
        inputManager.addMapping("CharSpace",
                new KeyTrigger(KeyInput.KEY_RETURN));
        inputManager
                .addMapping("CharShoot", new KeyTrigger(KeyInput.KEY_SPACE));
        inputManager.addListener(this, "CharLeft");
        inputManager.addListener(this, "CharRight");
        inputManager.addListener(this, "CharUp");
        inputManager.addListener(this, "CharDown");
        inputManager.addListener(this, "CharSpace");
        inputManager.addListener(this, "CharShoot");
    }

    private void createWall() {
        float xOff = -144;
        float zOff = -40;
        float startpt = bLength / 4 - xOff;
        float height = 6.1f;
        brick = new Box(Vector3f.ZERO, bLength, bHeight, bWidth);
        brick.scaleTextureCoordinates(new Vector2f(1f, .5f));
        for (int j = 0; j < 15; j++) {
            for (int i = 0; i < 4; i++) {
                Vector3f vt = new Vector3f(i * bLength * 2 + startpt, bHeight
                        + height, zOff);
                addBrick(vt);
            }
            startpt = -startpt;
            height += 1.01f * bHeight;
        }
    }

    private void addBrick(Vector3f ori) {
        Geometry reBoxg = new Geometry("brick", brick);
        reBoxg.setMaterial(matBullet);
        reBoxg.setLocalTranslation(ori);
        reBoxg.addControl(new RigidBodyControl(1.5f));
        reBoxg.setShadowMode(ShadowMode.CastAndReceive);
        this.rootNode.attachChild(reBoxg);
        this.getPhysicsSpace().add(reBoxg);
    }

    private void prepareBullet() {
        bullet = new Sphere(32, 32, 0.4f, true, false);
        bullet.setTextureMode(TextureMode.Projected);
        bulletCollisionShape = new SphereCollisionShape(0.4f);
        matBullet = new Material(getAssetManager(),
                "Common/MatDefs/Misc/Unshaded.j3md");
        matBullet.setColor("Color", ColorRGBA.Green);
        // matBullet.setColor("m_GlowColor", ColorRGBA.Green);
        getPhysicsSpace().addCollisionListener(this);
    }

    private void prepareEffect() {
        int COUNT_FACTOR = 1;
        float COUNT_FACTOR_F = 1f;
        effect = new ParticleEmitter("Flame", Type.Triangle, 32 * COUNT_FACTOR);
        effect.setSelectRandomImage(true);
        effect.setStartColor(new ColorRGBA(1f, 0.4f, 0.05f,
                (float) (1f / COUNT_FACTOR_F)));
        effect.setEndColor(new ColorRGBA(.4f, .22f, .12f, 0f));
        effect.setStartSize(1.3f);
        effect.setEndSize(2f);
        effect.setShape(new EmitterSphereShape(Vector3f.ZERO, 1f));
        effect.setParticlesPerSec(0);
        effect.setGravity(0, -5, 0);
        effect.setLowLife(.4f);
        effect.setHighLife(.5f);
        effect.setInitialVelocity(new Vector3f(0, 7, 0));
        effect.setVelocityVariation(1f);
        effect.setImagesX(2);
        effect.setImagesY(2);
        Material mat = new Material(assetManager,
                "Common/MatDefs/Misc/Particle.j3md");
        mat.setTexture("Texture",
                assetManager.loadTexture("Effects/Explosion/flame.png"));
        effect.setMaterial(mat);
        // effect.setLocalScale(100);
        rootNode.attachChild(effect);
    }

    private void createLight() {
        Vector3f direction = new Vector3f(-0.1f, -0.7f, -1).normalizeLocal();
        DirectionalLight dl = new DirectionalLight();
        dl.setDirection(direction);
        dl.setColor(new ColorRGBA(1f, 1f, 1f, 1.0f));
        rootNode.addLight(dl);
    }

    private void createSky() {
        rootNode.attachChild(SkyFactory.createSky(assetManager,
                "Textures/Sky/Bright/BrightSky.dds", false));
    }

    private void createTerrain2() {
        matRock = new Material(assetManager,
                "Common/MatDefs/Terrain/TerrainLighting.j3md");
        matRock.setBoolean("useTriPlanarMapping", false);
        matRock.setBoolean("WardIso", true);
        matRock.setTexture("AlphaMap",
                assetManager.loadTexture("Textures/Terrain/splat/alphamap.png"));
        Texture heightMapImage = assetManager
                .loadTexture("Textures/Terrain/splat/mountains512.png");
        Texture grass = assetManager
                .loadTexture("Textures/Terrain/splat/grass.jpg");
        grass.setWrap(WrapMode.Repeat);
        matRock.setTexture("DiffuseMap", grass);
        matRock.setFloat("DiffuseMap_0_scale", 64);
        Texture dirt = assetManager
                .loadTexture("Textures/Terrain/splat/dirt.jpg");
        dirt.setWrap(WrapMode.Repeat);
        matRock.setTexture("DiffuseMap_1", dirt);
        matRock.setFloat("DiffuseMap_1_scale", 16);
        Texture rock = assetManager
                .loadTexture("Textures/Terrain/splat/road.jpg");
        rock.setWrap(WrapMode.Repeat);
        matRock.setTexture("DiffuseMap_2", rock);
        matRock.setFloat("DiffuseMap_2_scale", 128);
        Texture normalMap0 = assetManager
                .loadTexture("Textures/Terrain/splat/grass_normal.jpg");
        normalMap0.setWrap(WrapMode.Repeat);
        Texture normalMap1 = assetManager
                .loadTexture("Textures/Terrain/splat/dirt_normal.png");
        normalMap1.setWrap(WrapMode.Repeat);
        Texture normalMap2 = assetManager
                .loadTexture("Textures/Terrain/splat/road_normal.png");
        normalMap2.setWrap(WrapMode.Repeat);
        matRock.setTexture("NormalMap", normalMap0);
        matRock.setTexture("NormalMap_1", normalMap2);
        matRock.setTexture("NormalMap_2", normalMap2);

        AbstractHeightMap heightmap = null;
        try {
            heightmap = new ImageBasedHeightMap(heightMapImage.getImage(),
                    0.25f);
            heightmap.load();

        } catch (Exception e) {
            e.printStackTrace();
        }

        terrain = new TerrainQuad("terrain", 65, 513, heightmap.getHeightMap());
        List<Camera> cameras = new ArrayList<Camera>();
        cameras.add(getCamera());
        TerrainLodControl control = new TerrainLodControl(terrain, cameras);
        terrain.addControl(control);
        terrain.setMaterial(matRock);
        terrain.setLocalScale(new Vector3f(2, 2, 2));

        terrainPhysicsNode = new RigidBodyControl(
                CollisionShapeFactory.createMeshShape(terrain), 0);
        terrain.addControl(terrainPhysicsNode);
        rootNode.attachChild(terrain);
        getPhysicsSpace().add(terrainPhysicsNode);
    }

    private void createTerrain() {

         assetManager.registerLocator("town.zip", ZipLocator.class);
         sceneModel = assetManager.loadModel("main.scene");
        //sceneModel = assetManager.loadModel("Scenes/ManyLights/Main.scene");
        sceneModel.setLocalScale(2f);
        //initFloor();
        // We set up collision detection for the scene by creating a
        // compound collision shape and a static RigidBodyControl with mass
        // zero.
        CollisionShape sceneShape = CollisionShapeFactory
                .createMeshShape((Node) sceneModel);
        landscape = new RigidBodyControl(sceneShape, 0);
        sceneModel.addControl(landscape);
        List<Camera> cameras = new ArrayList<Camera>();
        cameras.add(getCamera());
        rootNode.attachChild(sceneModel);
    }

    private void createCharacters() {
        CapsuleCollisionShape capsule = new CapsuleCollisionShape(0.0f, 0.0f);
        character = new CharacterControl(capsule, 0.01f);
        model = (Node) assetManager.loadModel("Models/Ninja/Ninja.mesh.xml");
        float scale = 0.25f;
        model.scale(0.05f, 0.05f, 0.05f);
        model.addControl(character);
        character.setPhysicsLocation(new Vector3f(0, -0.05f, 0));
        model.setShadowMode(ShadowMode.CastAndReceive);
        character.setViewDirection(new Vector3f(1, 0, 0));
        rootNode.attachChild(model);
        getPhysicsSpace().add(character);

        BlenderKey blenderKey = new BlenderKey("Models/Oto/Oto.mesh.xml");

        Spatial man = (Spatial) assetManager.loadModel(blenderKey);
        man.setLocalTranslation(new Vector3f(-10, 4.5f, -10));

         man.setShadowMode(ShadowMode.CastAndReceive);
        rootNode.attachChild(man);

    }

    private void setupChaseCamera() {
        flyCam.setEnabled(false);
        chaseCam = new ChaseCamera(cam, model, inputManager);
    }

    private void setupAnimationController() {
        animationControl = model.getControl(AnimControl.class);
        animationControl.addListener(this);
        animationChannel = animationControl.createChannel();
        // shootingChannel = animationControl.createChannel();
        // shootingChannel.addBone(animationControl.getSkeleton().getBone(
        // "uparm.right"));
        // shootingChannel.addBone(animationControl.getSkeleton().getBone(
        // "arm.right"));
        // shootingChannel.addBone(animationControl.getSkeleton().getBone(
        // "hand.right"));
    }

    @Override
    public void simpleUpdate(float tpf) {
        Vector3f camDir = cam.getDirection().clone().multLocal(0.1f);
        Vector3f camLeft = cam.getLeft().clone().multLocal(0.1f);
        camDir.y = 0;
        camLeft.y = 0;
        walkDirection.set(0, 0, 0);
        if (left) {
            walkDirection.addLocal(camLeft);
        }
        if (right) {
            walkDirection.addLocal(camLeft.negate());
        }
        if (up) {
            walkDirection.addLocal(camDir);
        }
        if (down) {
            walkDirection.addLocal(camDir.negate());
        }
        if (!character.onGround()) {
            airTime = airTime + tpf;
        } else {
            airTime = 0;
        }
        if (walkDirection.length() == 0) {
            if (!"Idle1".equals(animationChannel.getAnimationName())) {
                animationChannel.setAnim("Idle1", 1f);
            }
        } else {
            character.setViewDirection(walkDirection);
            if (airTime > .3f) {
                if (!"stand".equals(animationChannel.getAnimationName())) {
                    animationChannel.setAnim("stand");
                }
            } else if (!"Walk".equals(animationChannel.getAnimationName())) {
                animationChannel.setAnim("Walk", 0.7f);
            }
        }
        character.setWalkDirection(walkDirection);
    }

    public void onAction(String binding, boolean value, float tpf) {
        if (binding.equals("CharLeft")) {
            if (value) {
                left = true;
            } else {
                left = false;
            }
        } else if (binding.equals("CharRight")) {
            if (value) {
                right = true;
            } else {
                right = false;
            }
        } else if (binding.equals("CharUp")) {
            if (value) {
                up = true;
            } else {
                up = false;
            }
        } else if (binding.equals("CharDown")) {
            if (value) {
                down = true;
            } else {
                down = false;
            }
        } else if (binding.equals("CharSpace")) {
            character.jump();
        } else if (binding.equals("CharShoot") && !value) {
            bulletControl();
        }
    }

    private void bulletControl() {
        shootingChannel.setAnim("Dodge", 0.1f);
        shootingChannel.setLoopMode(LoopMode.DontLoop);
        Geometry bulletg = new Geometry("bullet", bullet);
        bulletg.setMaterial(matBullet);
        bulletg.setShadowMode(ShadowMode.CastAndReceive);
        bulletg.setLocalTranslation(character.getPhysicsLocation().add(
                cam.getDirection().mult(5)));
        RigidBodyControl bulletControl = new BombControl(bulletCollisionShape,
                1);
        bulletControl.setCcdMotionThreshold(0.1f);
        bulletControl.setLinearVelocity(cam.getDirection().mult(80));
        bulletg.addControl(bulletControl);
        rootNode.attachChild(bulletg);
        getPhysicsSpace().add(bulletControl);
    }

    public void collision(PhysicsCollisionEvent event) {
        if (event.getObjectA() instanceof BombControl) {
            final Spatial node = event.getNodeA();
            effect.killAllParticles();
            effect.setLocalTranslation(node.getLocalTranslation());
            effect.emitAllParticles();
        } else if (event.getObjectB() instanceof BombControl) {
            final Spatial node = event.getNodeB();
            effect.killAllParticles();
            effect.setLocalTranslation(node.getLocalTranslation());
            effect.emitAllParticles();
        }
    }

    public void onAnimCycleDone(AnimControl control, AnimChannel channel,
            String animName) {
        if (channel == shootingChannel) {
            channel.setAnim("stand");
        }
    }

    public void onAnimChange(AnimControl control, AnimChannel channel,
            String animName) {
    }

    // Load an image from the net, making sure it has already been
    // loaded when the method returns
    public Image loadPicture(String imageName) {
        return null;
    }

    // Load and play a sound from /usr/local/hacks/sounds/

    public void playSound(String name) {
        URL u = null;

        try {
            u = new URL("file:" + "/usr/local/hacks/sounds/" + name + ".au");
        } catch (MalformedURLException e) {
        }

        AudioClip a = Applet.newAudioClip(u);
        a.play();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T12:49:45.967

在您的示例中，您有大约 100 多块砖块 - 想象一下完整的地牢需要多少块砖块，以及它将如何影响您的物理性能:)。用这种方法创建可玩的游戏几乎是不可能的。

您应该创建一些静态网格并将其划分为走廊、房间等，这样您就可以只绘制关卡的可见部分。如果您真的想创建可破坏的环境，您仍然应该使用静态网格，并在应该破坏墙壁时用砖块动态替换其中的一部分。

# f# - MonoDevelop 重置 F# 交互板

> ID：11812573
> 
> 赞同：1
> 
> 时间：2012-08-04T22:52:01.983
> 
> 标签：f#, monodevelop, f#-interactive, fsi

简单的问题：有没有办法在 MonoDevelop 中重置 F# 交互板（不清除它），以便它重新开始一个新的会话？如果是这样，怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T11:40:28.047

我认为没有按钮可以做到这一点（即在 Visual Studio 中的上下文菜单项），但您可以通过键入以下`#q`命令来重置会话：

```
> #q;;
Session termination detected. Press Enter to restart. 
```

如果您随后按“Enter”，您将获得一个全新的 F# Interactive 会话。此外，如果 F# Interactive 陷入无限循环，则没有按钮可以杀死它（我认为），但您可以从任务管理器中杀死它，然后您可以使用“Enter”重新启动它。

# ios - iOS - 如何更改文档目录

> ID：11812576
> 
> 赞同：2
> 
> 时间：2012-08-04T22:52:51.653
> 
> 标签：ios, xcode, core-data, jailbreak

目前我正在处理的程序使用Core Data，并将“帐户”信息存储在一个名为`Accounts.sqlite` 该文件的文件中存储在`Documents`长字符串内的目录中，即`A89C1398-A7BE-44F1-A337-DABA9C66AF1D` 我想为应用程序保存/创建`/var/mobile/Library/KegCop` 文件发现[了这个 SO 问题](https://stackoverflow.com/questions/9065585/cydia-app-documents-folder-not-created)，我进行了必要的更改，从手机上删除了我的应用程序，单击了`Run`Xcode 中的按钮，应用程序构建并运行良好。但是该`Accounts.sqlite`文件仍在`Documents`目录中。

我在文件中添加/修改了以下代码`AppDelegate.m`，

```
// default sqlite file path
// NSURL *storeURL = [[self applicationDocumentsDirectory] URLByAppendingPathComponent:@"Accounts.sqlite"];

// jailbroken path - /var/mobile/Library/KegCop/
NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

NSString *docPath = [documentPaths objectAtIndex:0];

NSURL *storeURL = [NSURL fileURLWithPath: [docPath stringByAppendingPathComponent:@"Accounts.sqlite"]]; 
```

然后在`AppDelegate.m`文件中创建以下方法，

```
// set path for documents in jailbreak environment
+(NSString *)documentsDirectoryPath
{
#ifdef JAILBREAK

NSString *documentPath =@"/var/mobile/Library/KegCop";

if (![[NSFileManager defaultManager] fileExistsAtPath:documentPath])
{
    [[NSFileManager defaultManager] createDirectoryAtPath:documentPath
                              withIntermediateDirectories:NO
                                               attributes:nil
                                                    error:NULL];
}

return documentPath;

#else

NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
return [documentPaths objectAtIndex:0];

#endif
} 
```

# android - ClassNotFoundException RemoteViews

> ID：11812583
> 
> 赞同：3
> 
> 时间：2012-08-04T22:54:45.150
> 
> 标签：android

我创建自己的控件从 TextView 扩展。我尝试在通知时在 RemoteViews 中使用此控件。但是问题，如果我尝试显示通知，则会出现错误：

java.lang.ClassNotFoundException: {namespace}.{myClass}。

但是如果我在活动布局中添加相同的控件。一切都好。有什么问题？

我的文本视图：

```
public class ScrollingTextView extends TextView {

public ScrollingTextView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
}

public ScrollingTextView(Context context, AttributeSet attrs) {
    super(context, attrs);
}

public ScrollingTextView(Context context) {
    super(context);
}

@Override
protected void onFocusChanged(boolean focused, int direction, Rect previouslyFocusedRect) {
    if (focused)
        super.onFocusChanged(focused, direction, previouslyFocusedRect);
}

@Override
public void onWindowFocusChanged(boolean focused) {
    if (focused)
        super.onWindowFocusChanged(focused);
}

@Override
public boolean isFocused() {
    return true;
} 
```

}

我的通知布局：

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<ImageView
    android:id="@+id/notification_image"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_centerVertical="true"
    android:layout_marginRight="10dp"
    android:background="@drawable/ic_launcher" />

<TextView
    android:id="@+id/notification_title"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_toRightOf="@+id/notification_image"
    android:text="notification_title"
    android:textStyle="bold" />

<{namespace}.ScrollingTextView
    android:id="@+id/notification_message"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/notification_title"
    android:layout_toRightOf="@+id/notification_image"
    android:ellipsize="marquee"
    android:marqueeRepeatLimit="marquee_forever"
    android:scrollHorizontally="true"
    android:singleLine="true"
    android:text="notification_message" /> 
```

通知电话：

```
Intent intent = new Intent(context, NotificationActivity.class);
PendingIntent pendingIntent = PendingIntent.getActivity(context, 1, intent, PendingIntent.FLAG_UPDATE_CURRENT);
Notification notification = new Notification(R.drawable.ic_launcher, tickerText, System.currentTimeMillis());
notification.setLatestEventInfo(context, contentTitle, contentText, pendingIntent);
RemoteViews contentView = new RemoteViews(_context.getPackageName(), R.layout.notify);
contentView.setImageViewResource(R.id.notification_image, R.drawable.ic_launcher);
contentView.setTextViewText(R.id.notification_title, state.contentTitle);
contentView.setTextViewText(R.id.notification_message, state.contentText);
notification.contentView = contentView;
_notificationManager.notify(1, notification); 
```

*   更新 05.08.2012 17:08

在 android 清单中，我有值 package="com.test"。

在 {namespace} 我理解 com.test 和 {myClass} - ScrollingTextView。ScrollingTextView 放置在 com.test 包中。

发生错误：android.view.InflateException：二进制 XML 文件第 25 行：膨胀类 com.test.ScrollingTextView 时出错。

其中第 25 行是行，其中声明了 ScollingTextView：

```
<com.test.ScrollingTextView ... 
```

完整错误：

```
couldn't inflate view for notification com.test/0x1
android.view.InflateException: Binary XML file line #25: Error inflating class com.test.ScrollingTextView
    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:691)
    at android.view.LayoutInflater.rInflate(LayoutInflater.java:739)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
    at android.widget.RemoteViews.apply(RemoteViews.java:1580)
    at com.android.systemui.statusbar.tablet.TabletStatusBar.inflateViews(TabletStatusBar.java:1938)
    at com.android.systemui.statusbar.tablet.TabletStatusBar.addNotificationViews(TabletStatusBar.java:1744)
    at com.android.systemui.statusbar.tablet.TabletStatusBar.addNotification(TabletStatusBar.java:891)
    at com.android.systemui.statusbar.CommandQueue$H.handleMessage(CommandQueue.java:231)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:137)
    at android.app.ActivityThread.main(ActivityThread.java:4424)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
    at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.ClassNotFoundException: com.test.ScrollingTextView
    at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
    at android.view.LayoutInflater.createView(LayoutInflater.java:552)
    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:680)
    ... 16 more 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-05T22:32:35.287

[RemoteView 仅适用于此处](http://developer.android.com/guide/topics/appwidgets/index.html#CreatingLayout)提到的少数标准 android 视图。特别是，您不能将自己的自定义视图与它一起使用。

这是因为远程视图实际上是在不同的进程中运行的，并且它无权访问您定义的自定义视图类。

如果允许其他进程加载和使用您的自定义视图，这将允许您将任意代码注入该其他进程，并从本质上接管它。

# mysql - 如何创建一个在内容更改时自动更新另一个表的表？

> ID：11812585
> 
> 赞同：0
> 
> 时间：2012-08-04T22:55:13.523
> 
> 标签：mysql, sql, database

我试图完成的是，当 tableB 中的一行被删除时，我想更新 tableA 中的行。

tableA的布局是这样的：

```
+----------------------------+--------------+------+-----+---------------------+----------------+
| Field                      | Type         | Null | Key | Default             | Extra          |
+----------------------------+--------------+------+-----+---------------------+----------------+
| user_id                    | int(11)      | NO   | PRI | NULL                | auto_increment |
| nickname                   | varchar(32)  | NO   |     | NULL                |                |
| password                   | varchar(129) | NO   |     | NULL                |                |
| mafia_id                   | int(11)      | NO   |     | 0                   |                |
+----------------------------+--------------+------+-----+---------------------+----------------+ 
```

和表B这个：

```
+-------------+-------------+------+-----+---------+----------------+
| Field       | Type        | Null | Key | Default | Extra          |
+-------------+-------------+------+-----+---------+----------------+
| mafia_id    | int(11)     | NO   | PRI | NULL    | auto_increment |
| mafia_name  | varchar(32) | NO   |     |         |                |
| mafia_tag   | varchar(5)  | NO   |     |         |                |
| mafia_color | int(11)     | NO   |     | 0       |                |
| mafia_car   | int(11)     | NO   |     | 0       |                |
| mafia_base  | int(11)     | NO   |     | 0       |                |
+-------------+-------------+------+-----+---------+----------------+ 
```

当 tableB 中相应的 mafia_id 被删除时，我想将所有 tableA.mafia_id 设置为 0。

我在文档中读到数据库会自动为您执行此操作，但您必须在创建表时指定一些内容（在 CREATE TABLE 中，create_definition: | CHECK (expr)?）。文档对我来说有点不清楚。

我还阅读了这个主题： [创建一个触发器，当另一个表中的列更新时更新一个表上的列](https://stackoverflow.com/questions/2678102/create-a-trigger-that-updates-a-column-on-one-table-when-a-column-in-another-tab)

但这不适用于我，我想？

那么我将如何创建这样的表（创建表...）或删除行语句？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T22:59:38.900

由于您使用的是 InnoDB，因此您可以使用[外键约束](http://dev.mysql.com/doc/en/innodb-foreign-key-constraints.html)来实现这一点：

```
ALTER TABLE tableA
  MODIFY mafia_id INT(11) NULL,
  ADD FOREIGN KEY (mafia_id) REFERENCES tableB (mafia_id) ON DELETE SET NULL 
```

如手册中所述：

> *   `SET NULL`：删除或更新父表中的行，并将子表中的外键列设置为`NULL`。这仅在外键列没有`NOT NULL`指定限定符时才有效。`ON DELETE SET NULL`和`ON UPDATE SET NULL`子句都受支持。
>     
>     
>     
>     *如果您指定一个`SET NULL`操作，请确保您没有将子表中的列声明为`NOT NULL`.*

请注意，该约束具有额外的优势，即确保in 中的`mafia_id`值`tableA`必须始终引用 in 中的现有记录`tableB`。

# php - 从 PHP 数组中删除选定单词的有效方法

> ID：11812586
> 
> 赞同：3
> 
> 时间：2012-08-04T22:55:39.387
> 
> 标签：php, arrays, keyword

我创建了一个数组来获取文件，然后解析该文件的内容。我已经过滤掉了少于 4 个字符的单词`if(strlen($value) < 4): unset($content[$key]); endif;`

我的问题是——我想从数组中删除常用词，但其中有很多。我没有对每个数组值一遍又一遍地进行这些检查，而是想知道是否有更有效的方法来做到这一点？

这是我目前正在使用的代码示例。这个列表可能很大，我认为必须有更好（更有效）的方法？

```
foreach ($content as $key=>$value) {
    if(strlen($value) < 4): unset($content[$key]); endif; 
    if($value == 'that'): unset($content[$key]); endif;
    if($value == 'have'): unset($content[$key]); endif;
    if($value == 'with'): unset($content[$key]); endif;
    if($value == 'this'): unset($content[$key]); endif;
    if($value == 'your'): unset($content[$key]); endif;
    if($value == 'will'): unset($content[$key]); endif;
    if($value == 'they'): unset($content[$key]); endif;
    if($value == 'from'): unset($content[$key]); endif;
    if($value == 'when'): unset($content[$key]); endif;
    if($value == 'then'): unset($content[$key]); endif;
    if($value == 'than'): unset($content[$key]); endif;
    if($value == 'into'): unset($content[$key]); endif;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T23:01:58.563

也许这会更好：

```
$filter = array("that","have","with",...);

foreach ($content as $key=>$value) {
   if (in_array($value,$filter)){
      unset($content[$key])
   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T23:13:29.360

这是我的做法：

```
$exlcuded_words = array( 'that','have','with','this','your','will','they','from','when','then','than','into');
$replace = array_fill_keys($exlcuded_words,'');
echo str_replace(array_keys($replace),$replace,'some words that have to be with this your will they have from when then that into replaced'); 
```

它的工作方式：创建一个充满空字符串的数组，其中的键是您要删除/替换的子字符串。刚刚使用`str_replace`，将键作为第一个参数传递，数组本身作为第二个参数传递，在这种情况下，结果是：`some words to be replaced`. 此代码已经过测试并且工作正常。

处理数组时，只需用一些古怪的分隔符（比如`%@%@%`或其他东西）和`str_replace`批次将其内爆，再次爆炸批次，*鲍勃就是你的叔叔*

* * *

当谈到用少于 3 个字符替换所有单词时（我在原始答案中忘记了），这是正则表达式擅长的事情......我会说类似`preg_replace('(\b|[^a-z])[a-z]{1,3}(\b|[^a-z])/i','$1$2',implode(',',$targetArray));`或类似的话。
你可能想测试一下这个，因为这只是我的想法，而且未经测试。但这似乎足以让你开始

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T23:03:21.830

我可能会做这样的事情：

```
$aCommonWords = array('that','have','with','this','yours','etc.....');

foreach($content as $key => $value){
    if(in_array($value,$aCommonWords)){
        unset($content[$key]);
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-04T23:04:06.503

创建一个要删除的单词数组并检查该值是否在该数组内

```
$exlcuded_words = array( 'that','have','with','this','your','will','they','from','when','then','than','into'); 
```

而如果`foreach`

```
if (in_array($value, $excluded_words)) unset($content[$key]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-04T23:13:05.483

另一种可能的解决方案：

```
$arr = array_flip(array( 'that', 'have', 'with', 'this', 'your', 'will', 
        'they', 'from', 'when', 'then', 'than', 'into' ));
foreach ($content as $key=>$value) {
    if(strlen($value) < 4 || isset($arr[$value])) {
        unset($content[$key]);
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-08-17T01:46:29.830

使用[`array_diff()`](http://php.net/manual/en/function.array-diff.php)：

```
$content = array('here','are','some','words','that','will','be','filtered');
$filter = array('that','have','here','are','will','they','from','when','then');
$result = array_diff($content, $filter); 
```

**结果：**

```
Array
(
    [2] => some
    [3] => words
    [6] => be
    [7] => filtered
) 
```

或者，如果您希望在过滤内容方面具有更大的灵活性（例如，您提到需要过滤掉少于 4 个字符的单词），您可以使用[`array_filter()`](http://php.net/manual/en/function.array-filter.php)：

```
$result = array_filter($content, function($v) use ($filter) {
    return !in_array($v, $filter) && strlen($v) >= 4;
}); 
```

**结果：**

```
Array
(
    [2] => some
    [3] => words
    [7] => filtered
) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-08-17T01:58:33.027

```
$var = array('abb', 'bffb', 'cbbb', 'dddd', 'dddd', 'f', 'g');
$var= array_unique($var);
foreach($var as $val){
    echo $val. " ";
} 
```

结果 ：

```
abb
bffb
cbbb
dddd
f
g 
```

最简单的方法

# xslt - XSLT 循环遍历由全局配置列表指示的属性

> ID：11812587
> 
> 赞同：2
> 
> 时间：2012-08-04T22:55:45.297
> 
> 标签：xslt

全局变量为各种元素中的每一种指示需要处理哪些属性。

```
<xsl:variable name="attributes.rtf">
  <element name="measure">
    <att>type</att>
    <att>quantity</att>
    <att>unit</att>
  </element>
  <element name="milestone">
    <att>n</att>
  </element>
  <element name="lb">
    <att>ed</att>
    <att>type</att>
    <att>subtype</att>
    <att>n</att>
  </element>
</xsl:variable>
<xsl:variable name="attributes" select="exslt:node-set($attributes.rtf)" /> <!-- This is XSLT 1.0 --> 
```

当上下文是一个元素时，我需要一个 for-each 循环遍历该元素的属性。我看不到如何在一个 XPath 表达式中做到这一点。现在我有这两个：

```
 <xsl:variable name="temp" select="." />                            <!-- For, say, a <measure> element, -->
 <xsl:for-each select="$attributes/element[@name=name($temp)]/att"> <!-- loop through the names "type", "quantity", and "unit" -->
      <xsl:for-each select="$temp/@*[name()=current()]">            <!-- If an attribute of that name exists in the current <measure> element  -->
                                                                    <!-- (now stored as $temp), then process that attribute. --> 
      </xsl:for-each>
 </xsl:for-each> 
```

有没有办法在一个表达式中做到这一点，而无需创建 $temp.

而且，我需要一个外部测试条件来指示上下文元素是否具有任何列出的属性。对于那个测试，我想要一个表达式。

（属性的处理确实需要排序，所以可能需要两个循环。但是顺序与测试条件无关。所以也许这可以用一个表达式来完成。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T23:30:52.337

**一、“简单”问题**：

```
When the context is an element, I need a for-each that will loop through attributes for that kind of element. 
```

**不需要`xsl-for-each`**。**_**

```
I don't see how to do this in one XPath expression. 
```

**只需使用**：

```
<xsl:apply-templates select=
  "@*[name()=$attributes/element[@name=name(current())]/att]"/> 
```

**说明**：

正确使用**[`current()`](http://www.w3.org/TR/1999/REC-xslt-19991116#function-current)**功能。

* * *

**二、“复杂”的问题**：

```
Processing of the attributes does need to be ordered, so maybe that requires the two loops 
```

**这是一个完整的示例，显示*无需**其他嵌套* 即可按中指定的顺序生成属性：`<xsl:apply-templates>` *`$attributes`***

 *```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:exslt="http://exslt.org/common">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

    <xsl:variable name="attributes.rtf">
        <element name="measure">
            <att>type</att>
            <att>quantity</att>
            <att>unit</att>
        </element>
        <element name="milestone">
            <att>n</att>
        </element>
        <element name="lb">
            <att>ed</att>
            <att>type</att>
            <att>subtype</att>
            <att>n</att>
        </element>
    </xsl:variable>

    <xsl:variable name="attributes" select="exslt:node-set($attributes.rtf)" />

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="t/*">
  <xsl:copy>
      <xsl:apply-templates select="$attributes/element[@name=name(current())]/att">
        <xsl:with-param name="pCurrent" select="current()"/>
      </xsl:apply-templates>
      <xsl:apply-templates select=
       "@*[not(name() = $attributes/element[@name=name(current())]/att)]"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="att">
   <xsl:param name="pCurrent" select="/.."/>

  <xsl:if test="$pCurrent[@*[name()=current()]]">
      <xsl:attribute name="{.}">
       <xsl:value-of select="concat(.,'-',.)"/>
      </xsl:attribute>
  </xsl:if>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时**（没有提供！！！）：

```
<t>
  <lb type="normal" ed="uni" n="3"
      subtype="initial" other="yes"/>
  <milestone n="2" other="yes"/>
  <measure quantity="3" unit="cm"
           type="length" other="yes"/>
</t> 
```

**产生了想要的正确结果**：

```
<t>
   <lb ed="ed-ed" type="type-type" subtype="subtype-subtype" n="n-n" other="yes"/>
   <milestone n="n-n" other="yes"/>
   <measure type="type-type" quantity="quantity-quantity" unit="unit-unit" other="yes"/>
</t> 
```*

# android - 如何从 /proc/cpuinfo 中去除最佳 GCC arm 选项？

> ID：11812591
> 
> 赞同：2
> 
> 时间：2012-08-04T22:56:22.367
> 
> 标签：android, optimization, gcc, compilation

cpu是omap 4460，好像是cortex-A9，armv7，有neon，vfpu3，其他选项。我的主要问题是，如何让 GCC“知道”目标平台有 neon 指令？因为我知道它在 cortex-a9 上是可选的。我只是想确保程序被编译为至少尝试使用霓虹灯，因为当我在 GCC 中编译我的代码并告诉它使用具有 SSE 的 x86 处理器时，我希望它至少尝试使用它如果它可以。

我会用实际信息更新这篇文章，`/proc/cpuinfo`但在那之前我会保持原样，因为 debian 的 fuse 规则正在咬我。

```
Processor   : ARMv7 Processor rev 10 (v7l)
processor   : 0
BogoMIPS    : 1194.24

processor   : 1
BogoMIPS    : 1194.24

Features    : swp half thumb fastmult vfp edsp thumbee neon vfpv3 
CPU implementer : 0x41
CPU architecture: 7
CPU variant : 0x2
CPU part    : 0xc09
CPU revision    : 10

Hardware    : Tuna
Revision    : 000a
Serial      : 0149c6f40c009018 
```

好的，以上。-march= 应该是 armv7 正确的吗？和-mfpu，应该是vfpv3还是应该是霓虹灯？我个人倾向于vfpv3，但目前我不确定......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T23:21:07.420

Android NDK 附带了几个示例，只需查看一个名为`hello-neon`及其`Android.mk`.

您只需要知道那里，如果您只对编译器选项感兴趣，您可能只想考虑*C 标志*。

# javascript - 最快的 jQuery 自动省略号插件？

> ID：11812597
> 
> 赞同：6
> 
> 时间：2012-08-04T22:57:24.170
> 
> 标签：javascript, jquery

我正在寻找一个 jQuery autoellipsis 插件。（自动省略号插件将`...`在多行文本的末尾添加。）

我知道这些插件：[autoellipsis](http://pvdspek.github.com/jquery.autoellipsis/)和[dotdotdot](http://dotdotdot.frebsite.nl/)。但两者都在我的 jQuery Mobile 项目中运行缓慢。

最快的 jQuery autoellipsis 插件是什么？

编辑：我必须在窗口调整大小事件上调用 autoellipsis 插件。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-08-19T17:03:56.867

这个 JsPerf ( [http://jsperf.com/truncate-vs-dotdotdot/4](http://jsperf.com/truncate-vs-dotdotdot/4) ) 比较了以下截断/省略号插件：

*   jquery dotdot 1.6.16
*   jQuery截断1.4
*   自动省略号 1.0.10
*   截断.js v0.1.0
*   主干8 v1.3.1

这些插件是从 jsPerf 链接的。根据结果​​，truncate.js out 执行其余部分。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-05T00:13:20.440

[Trunk8](https://github.com/rviscomi/trunk8)是一个很好的捆绑包。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T23:49:31.443

[AutoEllipsis.jquery](https://github.com/SmartMedia/AutoEllipsis)呢？

[https://github.com/SmartMedia/AutoEllipsis/blob/master/autoellipsis.min.jquery.js](https://github.com/SmartMedia/AutoEllipsis/blob/master/autoellipsis.min.jquery.js) **1.292 kb**

这是一个使用它的活生生的例子[http://jsfiddle.net/abdullahdiaa/s6WB5/](http://jsfiddle.net/abdullahdiaa/s6WB5/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-10T15:59:14.850

这是我不久前推出的一个，它支持多行等，我确实有一些“大”的想法，但到目前为止这已经足够有用了：

[https://github.com/rmorse/AutoEllipsis](https://github.com/rmorse/AutoEllipsis)

# android - CheckedTextView 带描述区域

> ID：11812604
> 
> 赞同：2
> 
> 时间：2012-08-04T22:58:54.147
> 
> 标签：android, widget, checkedtextview

我想知道默认的 android checkedtextview 控件是否带有在主要文本下方添加辅助文本的选项，有点像描述。我在操作系统的设置菜单中看到了它。不确定这是定制的还是同一个小部件已经支持。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T00:19:13.990

您是否尝试过查看[CheckBox 的文档？](http://developer.android.com/reference/android/widget/CheckBox.html) 我不相信有内置的字幕选项。您只需将 Views 放入布局中即可完成此操作。

# php - 如果不在引号内，则用空格替换以“//”为前缀的文本

> ID：11812605
> 
> 赞同：0
> 
> 时间：2012-08-04T22:58:56.240
> 
> 标签：php

匹配`//`一行数组中的 a ，`//`如果它不在里面，则用空格替换`" "`。例如我有这一行：

```
//this is a test
"this is a // test" 
```

输出应该是：

```
“这是一个测试”

```

它会忽略`//`里面`""`

现在我想出了这个正则表达式：

```
$string[$i] = preg_replace('#(?<!")//.*(?!")#',' ',$string[$i]); 
```

`//`但如果它位于一行的中间或最后一部分，这将不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T23:42:43.867

由于您不必担心跨越多行的引号，这使您的工作变得更加容易。

一种方法是逐行遍历输入，并将`explode()`每一行`"`用作分隔符：

```
$processed = '';

/* Split the input into an array with one (non-empty) line per element.
 *
 * Note that this also allows us to consolidate and normalize line endings
 *  in $processed.
 */
foreach( preg_split("/[\r\n]+/", $input) as $line )
{
  $split = explode('"', $line);

  /* Even-numbered indices inside $split are outside quotes. */
  $count = count($split);
  for( $i = 0; $i < $count; $i += 2 )
  {
    $pos = strpos($split[$i], '//');
    if( $pos !== false )
    {
      /* We have detected '//' outside of quotes.  Discard the rest of the line. */
      if( $i > 0 )
      {
        /* If $i > 0, then we have some quoted text to put back. */
        $processed .= implode('"', array_slice($split, 0, $i)) . '"';
      }

      /* Add all the text in the current token up until the '//'. */
      $processed .= substr($split[$i], 0, $pos);

      /* Go to the next line. */
      $processed .= PHP_EOL;
      continue 2;
    }
  }

  /* If we get to this point, we detected no '//' sequences outside of quotes. */
  $processed .= $line . PHP_EOL;
}
echo $processed; 
```

使用以下测试字符串：

```
<?php
$input = <<<END
//this is a test
"this is a // test"
"Find me some horsemen!" // said the king, or "king // jester" as I like to call him.
"I am walking toward a bright light." "This is a // test" // "Who are you?"
END; 
```

我们得到以下输出：

```
“这是一个测试”
“给我找几个骑兵！”
“我正朝着明亮的灯光走去。” “这是一个测试”

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T23:49:49.870

我不知道，但是您可以使用and`RegEx`轻松实现此目的：`substr_replace``strpos`

```
$look = 'this is a "//" test or not //';
$output = "";
$pos = -1;
while($pos = strpos($look, '//'))
{
    if(strpos($look, '"//') == ($pos - 1)) {
        $output = $output.substr($look, 0, $pos + 4);
        $look = substr($look, $pos + 4);
        continue;
    }
    $output = $output .substr_replace(substr($look, 0, $pos + 2), '', $pos, 2);
    $look = substr($look, $pos + 2);
}

//$output = "this is a // test or not" 
```

# facebook - facebook登录按钮onclick事件

> ID：11812607
> 
> 赞同：1
> 
> 时间：2012-08-04T22:59:20.690
> 
> 标签：facebook, asp.net-mvc-3, login

我添加了如下所示的登录按钮，但是出了点问题。前两次我得到 facebook 登录窗口，但后来出现了一些问题。当登录窗口开始打开时，它关闭了。当我逐步跟踪函数调用时，我发现 onConnect() 函数没有调用。有什么想法吗？

我的观点：

```
 <script type="text/javascript">

    $(document).ready(function () {

    if (document.getElementById('fb-root') != undefined) {
        var e = document.createElement('script');
        e.type = 'text/javascript';
        e.src = document.location.protocol + '//connect.facebook.net/en_US/all.js';
        e.async = true;
        document.getElementById('fb-root').appendChild(e); 
    }
});

window.fbAsyncInit = function () {
    FB.init({ appId: '455724271129246', status: true, cookie: false, xfbml: true, oauth: true });
};

function onConnect() { 
    FB.getLoginStatus(function (response) {

        if (response.session) {
            window.location = "../LogOn/FbLogin?token=" + response.session.access_token;
        } else {
            // if user cancel
        }
    });
};

    </script>

     <html xmlns="http://www.w3.org/1999/xhtml" xmlns:fb="http://www.facebook.com/2008/fbml">
 <body>
     <div id="fb-root"></div>
    <fb:login-button perms="email,user_checkins"
        onlogin="onConnect();" autologoutlink="false">
    </fb:login-button>
</body> 
```

我的控制器：

```
 public ActionResult FbLogin(string token)
    {
        WebClient client = new WebClient();
        string JsonResult = client.DownloadString(string.Concat("https://graph.facebook.com/me?access_token=", token));
        JObject jsonUserInfo = JObject.Parse(JsonResult);
        UInt64 facebook_userID = jsonUserInfo.Value<UInt64>("id");
        string username = jsonUserInfo.Value<string>("username");
        string email = jsonUserInfo.Value<string>("email");
        ViewData["email"] = email;
        return View();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T23:06:43.493

尝试添加订阅事件：

```
 FB.Event.subscribe('auth.login', function (response) {
        //do whatever
        login();
        // or onConnect(); 

    });
    FB.Event.subscribe('auth.logout', function (response) {
        //do whatever
        logout();

    }); 
```

# javascript - Javascript 和 CSS，HTML 内部与外部文件

> ID：11812611
> 
> 赞同：0
> 
> 时间：2012-08-04T22:59:49.630
> 
> 标签：javascript, jquery, html, css

`<style>...</style>`包含外部 javascript 和 CSS 文件和包含所有 javascript 和 CSS 文件（甚至是 jQuery 核心！）在 html 文件中，除了缓存之外的`<script>...</script>`标签之间有什么区别吗？（我想在本地对那个 html 文件做一些事情，所以缓存无关紧要）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T23:03:10.653

不同之处在于您的浏览器不会发出这些额外的请求，并且正如您所指出的，不能将它们与页面分开缓存。

从功能的角度来看，不，一旦加载资源就没有区别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T23:07:13.337

大多数时候我们看到 CSS 和 javascript 的外部路径的原因是因为它们要么保存在 CDN 上，要么现在保存在云上的某种排序缓存服务器上

很好的例子是当你包含来自谷歌的 jquery

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
```

在这里我们看到谷歌正在为我们托管它，我们不需要担心维护等

因此，如果您想将它们保留在本地，则必须对其进行维护

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T23:10:25.867

加载代码后没有任何区别。当然，它不会像您指出的那样被缓存，但是由于您只需要在本地执行某些操作，因此实际上并不那么重要。

要记住的是，您必须确保依赖链没有被破坏，因为浏览器会同时加载脚本。

**编辑**：当然，您的主页似乎需要更长的时间才能加载，因为它必须在`<body>`开始加载之前下载所有额外的内容。您可以通过将 JS 移动到底部（靠近页脚）来避免这种情况。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-04T23:13:24.447

当您的 css 未加载时，您的页面起初看起来很糟糕，然后在应用 css 样式后它会稳定下来，因此现在您必须在页面顶部声明您的 css 样式，然后等待浏览器处理所有这些，然后开始渲染您的页面，或者您让您的第一页加载缓慢，并且在进一步请求时您的页面将加载更快，因为样式现在已缓存

与您的脚本代码类似，现在您需要等待您的代码在页面上呈现，然后等待您在 $(document).ready() 中绑定的执行。我希望您意识到 $( document).ready 现在将被延迟，因为没有缓存。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-04T23:15:28.057

这存在一个巨大的性能问题。你的`load`和`DOMContentLoaded`会开火的方式更慢。

`load`当浏览器解析代码的最后一行时将触发。所以浏览器会显示等待圈，直到你所有的资源都被加载和解析。**浏览器同步**加载多个资源。通过在 HTML 中包含 JS 和 CSS 代码，您将失去这种性能提升。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-04T23:16:32.187

客户端没有区别，除了你会做更少的请求，因此加载速度更快。另一方面，您不会进行缓存，但也无法在多个页面之间共享样式和 JavaScript。

如果您肯定 CSS 和 JavaScript 只会在此页面中使用，那么 inline 就可以了。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-04T23:18:33.337

如果您仅在一个页面上使用脚本和 css，则将它们包含在 html 中将是最快的方式，因为浏览器只需要发出一个请求。如果您在更多页面上使用它们，则应该将它们设置为外部，以便浏览器可以缓存它们并且只需下载一次。例如，使用来自 google 的 jquery，正如提到的 @hatSoft，甚至更好，因为浏览器很可能已经将它们从其他站点缓存中，这些站点在您的用户第一次访问时引用它们。在现实生活中，您很少只在一个页面上使用脚本和 css，因此将它们放在外部通常是最好的性能，并且肯定是维护。就我个人而言，我总是将 HTML、js 和 css 严格分开！

# vim - 是什么导致 Vim 中的替换每行只匹配一个元素？

> ID：11812615
> 
> 赞同：9
> 
> 时间：2012-08-04T23:00:15.860
> 
> 标签：vim, substitution

我`.vimrc`最近对我的产品进行了很多更改，并且在某个地方我引入了一个不受欢迎的功能。在执行搜索标记每行出现多次的替换命令时，仅更改第一个标记（尽管其余标记作为替换的结果突出显示）。我在这里看到了一些关于如何根据具体情况启用此行为的帖子，但我还没有看到什么会导致它成为默认行为或如何禁用它。如果有人有任何想法，他们将不胜感激。

作为参考，我的`.vimrc`（[https://github.com/chpatton013/dotfiles/blob/master/vim/.vimrc](https://github.com/chpatton013/dotfiles/blob/master/vim/.vimrc)）：

```
"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
" Autocommands
"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""

" Reread configuration of Vim if .vimrc is saved
augroup VimConfig
  au!
  au BufWritePost ~/.vimrc       so ~/.vimrc
  au BufWritePost _vimrc         so ~/_vimrc
  au BufWritePost vimrc          so ~/.vimrc
augroup END

" Set colorcolumn to 80 chars, or (if not supported) highlight lines > 80 chars
augroup ColorColumnConfig
   au!
   if exists('+colorcolumn')
      au BufWinEnter * set colorcolumn=80
      au BufWinEnter * hi ColorColumn ctermbg=lightgrey guibg=lightgrey
   else
      au BufWinEnter * let w:m2=matchadd('ErrorMsg', '\%>80v.\+', -1)
   endif
augroup END

" Highlight over-length characters and trailing whitespace
augroup ExtraCharacters
   au!
   au ColorScheme * highlight ExtraWhitespace ctermbg=Red guibg=Red
   au ColorScheme * highlight OverLength ctermbg=red ctermfg=white guibg=red guifg=white
   au BufWinEnter * let w:whitespace_match_number =
   \ matchadd('ExtraWhitespace', '\s\+$')
   au BufWinEnter * call matchadd('OverLength',
   \ '\(^\(\s\)\{-}\(*\|//\|/\*\)\{1}\(.\)*\(\%81v\)\)\@<=\(.\)\{1,}$')
   au InsertEnter * call s:ToggleWhitespaceMatch('i')
   au InsertLeave * call s:ToggleWhitespaceMatch('n')
augroup END

" Resize splits on window resize
au VimResized * exe "normal! \<c-w>="

" Restore the cursor when we can.
au BufWinEnter * call RestoreCursor()

" Change the statusline color based on current mode
augroup StatuslineColor
   au!
   au InsertEnter * call InsertStatuslineColor(v:insertmode)
   au InsertLeave * hi statusline ctermfg=cyan ctermbg=black guifg=cyan guibg=black
augroup END

"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""

"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
" Plugins
"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""

" Pathogen - https://github.com/tpope/vim-pathogen

runtime bundle/vim-pathogen/autoload/pathogen.vim
call pathogen#infect()
call pathogen#helptags()

" Easymotion - https://github.com/Lokaltog/vim-easymotion/

" This is so much more convenient
let g:EasyMotion_leader_key=',m'

" Neocomplcache - https://github.com/Shougo/neocomplcache

" Enable at startup.
let g:neocomplcache_enable_at_startup=1
" Only display 'n' items in the list.
let g:neocomplcache_max_list=5
" Do not auto-select the first candidate.
let g:neocomplcache_enable_auto_select=1
" Do not try to match until 'n' characters have been typed
let g:neocomplcache_auto_completion_start_length=3
" Do not try to match to anything less than 'n' characters
let g:neocomplcache_min_keyword_length=6
let g:neocomplcache_min_syntax_length=6
" Only consider case if an uppercase character has been typed
let g:neocomplcache_enable_smart_case=1

" Syntastic - https://github.com/scrooloose/syntastic/
"  Commands:
"     :Errors              // pop up location list and display errors
"     :SyntasticToggleMode // toggles between active and passive mode
"     :SyntasticCheck      // forces a syntax check in passive mode

" check for syntax errors on file open
let g:syntastic_check_on_open=1
" echo errors to the command window
let g:syntastic_echo_current_error=1
" mark lines with errors and warnings
let g:syntastic_enable_signs=1
" set sign symbols
let g:syntastic_error_symbol='E>'
let g:syntastic_warning_symbol='W>'
let g:syntastic_style_error_symbol='S>'
let g:syntastic_style_warning_symbol='s>'
" open error balloons when moused over erroneous lines
let g:syntastic_enable_balloons=1
" customize Syntastic statusline
let g:syntastic_stl_format = '[%E{E: %fe #%e}%B{, }%W{W: %fw #%w}]'

"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""

"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
" Functions
"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""

" Strip trailing whitespace
function! <SID>StripTrailingWhitespaces()
   let _s=@/
   let l = line(".")
   let c = col(".")
   %s/\s\+$//e
   let @/=_s
   call cursor(l, c)
endfunction

" Toggle match of trailing whitespace
function! s:ToggleWhitespaceMatch(mode)
   let pattern = (a:mode == 'i') ? '\s\+\%#\@<!$' : '\s\+$'
   if exists('w:whitespace_match_number')
     call matchdelete(w:whitespace_match_number)
     call matchadd('ExtraWhitespace', pattern, 10, w:whitespace_match_number)
   else
     " Something went wrong, try to be graceful.
     let w:whitespace_match_number =  matchadd('ExtraWhitespace', pattern)
   endif
endfunction

" Restore the cursor when we can
function! RestoreCursor()
    if line("'\"") <= line("$")
        normal! g`"
        normal! zz
    endif
endfunction

" Change the statusline color based on current mode
function! InsertStatuslineColor(mode)
   if a:mode == 'i'
      hi statusline ctermfg=darkmagenta ctermbg=black guifg=darkmagenta guibg=black
   elseif a:mode == 'r'
      hi statusline ctermfg=darkgreen ctermbg=black guifg=darkgreen guibg=black
   else
      hi statusline ctermfg=darkred ctermbg=black guifg=darkred guibg=black
   endif
endfunction

"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""

"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
" Configuration customization
"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""

" gui configuration (do not move from top of configurations)
set guioptions=am
set guifont=Consolas:h9
set encoding=utf-8
set fileencoding=utf-8

set nocompatible     " No compatibility with vi.
filetype on          " Recognize syntax by file extension.
filetype indent on   " Check for indent file.
filetype plugin on   " Allow plugins to be loaded by file type.

behave xterm   " Maintain keybindings across enviornments

set autowrite                    " Write before executing the 'make' command.
set background=dark              " Background light, so foreground not bold.
set backspace=indent,eol,start   " Allow <BS> to go over indents, eol, and start of insert
set expandtab                    " Expand tabs with spaces.
set nofoldenable                 " Disable folds; toggle with zi.
set gdefault                     " Assume :s uses /g.
set hidden                       " Use hidden buffers so unsaved buffers can go to the     background
set history=500                  " Set number of lines for vim to remember
set hlsearch                     " Highlight all search matches
set ignorecase                   " Ignore case in regular expressions
set incsearch                    " Immediately highlight search matches.
set laststatus=2                 " Show status line even where there is only one window
set lazyredraw                   " Redraw faster
set linespace=-1                 " Bring lines closer together vertically
set modeline                     " Check for a modeline.
set noerrorbells                 " No beeps on errors.
set nohls                        " Don't highlight all regex matches.
set nowrap                       " Don't soft wrap.
set number                       " Display line numbers.
set path=~/Code/**               " Set default path
set scrolloff=5                  " Keep min of 'n' lines above/below cursor.
set shellslash                   " Use forward slashes regardless of OS
set shiftwidth=3                 " >> and << shift 3 spaces.
set showcmd                      " Show partial commands in the status line.
set showmatch                    " Show matching () {} etc..
set showmode                     " Show current mode.
set sidescrolloff=10             " Keep min of 'n' columns right/left cursor.
set smartcase                    " Searches are case-sensitive if caps used.
set smarttab                     " Tabs and backspaces at the start of a line indent the line     one level
set smartindent                  " Maintains most indentation and adds extra level when     nesting
set softtabstop=3                " See spaces as tabs.
set splitright splitbelow        " Open splits below and to the right
set synmaxcol=160                " Only matches syntax on first 'n' columns of each line (    faster)
set tabstop=3                    " <Tab> move three characters
set textwidth=79                 " Hard wrap at 79 characters
set title                        " Set the console title
set viminfo='20,\"500,%          " Adjust viminfo contents
set virtualedit=block            " Allow the cursor to go where it should not
set wildmenu                     " Tab completion opens a Tab- and arrow-navigable menu
set wildmode=longest,full        " Tab completion works like bash.
set wrapscan                     " Searching wraps to start of file when end is reached

" Define statusline
set statusline=%f                                     " Relative file path
set statusline+=%(\ [%M%R%H%W]%)                      " File flags (mod, RO, help, preview)
set statusline+=%(\ %<%)                              " Start truncation
set statusline+=%(\ %{fugitive#statusline()}%)        " Git branch name (if applicable)
set statusline+=%=                                    " Begin right justification
set statusline+=%#warningmsg#                         " Start warning highlighting
set statusline+=%(\ %{SyntasticStatuslineFlag()}%)    " Show Syntastic errors and warnings
set statusline+=%*                                    " End warning highlighting
set statusline+=\ [line\ %l\/%L,\ col\ %c%V,\ %p%%]   " Line and column numbers and     percentage through file

" Text formatting settings
" t: Auto-wrap text using textwidth. (default)
" c: Auto-wrap comments; insert comment leader. (default)
" q: Allow formatting of comments with "gq". (default)
" r: Insert comment leader after hitting <Enter>.
" o: Insert comment leader after hitting 'o' or 'O' in command mode.
" n: Auto-format lists, wrapping to text *after* the list bullet char.
" l: Don't auto-wrap if a line is already longer than textwidth.
set formatoptions+=ronl

" Enable mouse scrolling in selected modes
" a: All
" c: Command
" i: Insert
" n: Normal
" v: Visual
set mouse=a
" Set scrolling to be single-line
"map <MouseDown> <C-Y>
"map <S-MouseDown> <C-U>
"map <MouseUp> <C-E>
"map <S-MouseUp> <C-D>

" Highlighting
syntax enable
set t_Co=16
colorscheme solarized

" Configuration variables
let loaded_matchparen=0   " do automatic bracket highlighting.
let mapleader=","         " Use , instead of \ for the map leader.

"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""

"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
" Command mode customization
"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""

" Make y behave like all other capitals
map Y y$

" Make Q reformat text.
noremap Q gq

" Toggle paste mode.
noremap <Leader>p :set paste!<CR>

" Open the file under the cursor in a new tab.
noremap <Leader>ot <C-W>gf

" Toggle highlighting of the last search.
noremap <Leader>h :set hlsearch! hlsearch?<CR>

" Open a scratch buffer.
noremap <Leader>s :Scratch<CR>

" Improve movement on wrapped lines
nnoremap j gj
nnoremap k gk

" Keep search pattern at the center of the screen
nnoremap <silent> n nzz
nnoremap <silent> N Nzz
nnoremap <silent> * *zz
nnoremap <silent> # #zz
nnoremap <silent> g* g*zz
nnoremap <silent> g# g#zz

" Use C-hjkl in to change windows
nnoremap <C-h> <C-w><Left>
nnoremap <C-j> <C-w><Down>
nnoremap <C-k> <C-w><Up>
nnoremap <C-l> <C-w><Right>

" Strip trailing whitespace
nnoremap <silent> <leader>W :call <SID>StripTrailingWhitespaces()<CR>

" Allow easy toggling of spaces / tabs mode
nnoremap <C-t><C-t> :set invexpandtab<CR>

" Create simple toggles for line numbers, paste mode, and word wrap.
nnoremap <C-N><C-N> :set invnumber<CR>
nnoremap <C-p><C-p> :set invpaste<CR>
nnoremap <C-w><C-w> :set invwrap<CR>

" Folding stuff
nnoremap <C-o> zo
nnoremap <C-c> zc
nnoremap <C-O> zO
nnoremap <C-O><C-O> zR
set foldmethod=indent

" Open file for class name under cursor
nnoremap <C-i> yiw:find <C-R>".php<CR>

"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""

"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
" Insert mode customization
"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""

" Set up dictionary completion.
set dictionary+=~/.vim/dictionary/english-freq
set complete+=k

" Smash Esc
inoremap jk <Esc>
inoremap kj <Esc>

" Use hjkl in insert mode
imap <C-h> <Left>
imap <C-j> <Down>
imap <C-k> <Up>
imap <C-l> <Right>

" Make C-s write the buffer and return to insert mode when applicable
inoremap <C-s> <C-O>:w<CR>
nnoremap <C-s> :w<CR>

" auto-insert second braces and parynthesis
inoremap {<CR> {<CR>}<Esc>O
inoremap ({<CR> ({<CR>});<Esc>O
inoremap <<<<CR> <<<EOT<CR>EOT;<Esc>O<C-TAB><C-TAB><C-TAB>
set cpoptions+=$ "show dollar sign at end of text to be changed

"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""

"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
" Visual mode customization
"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""

" reselect visual block after indent/outdent
xnoremap < <gv
xnoremap > >gvo

""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""" 
```

以下插件构成了我的`bundle`目录（[https://github.com/chpatton013/dotfiles/tree/master/vim/.vim/bundle](https://github.com/chpatton013/dotfiles/tree/master/vim/.vim/bundle)）的内容：

```
neocomplcache/
syntastic/
vim-abolish/
vim-colors-solarized/
vim-commentary/
vim-easymotion/
vim-fugitive/
vim-pathogen/
vim-repeat/
vim-surround/ 
```

最后，我禁用了所有插件，但问题没有解决。我删除了我`.vimrc`的问题并解决了（所以它不是我无法控制的一些全局设置）。我在我的 中禁用了几个单独的设置`.vimrc`，但我似乎无法消除这个问题。最终，我厌倦了打地鼠游戏，决定求助于社区。有任何想法吗？

编辑：例如，

我使用命令`:%s/foo/foobar/g`

文本`foo bar foo`转换为`foobar bar foo`

编辑：由 pb2q 解决。`set gdefault`反转 的行为`/g`。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-04T23:02:30.147

替换命令接受 switch `g`，用于全局，这会导致对该行的所有匹配项进行替换：

```
:s/regex/replacement/g 
```

*默认情况下*，仅替换第一次匹配的匹配项，但有一个设置可以将默认设置切换为*global* : `gdefault`。因此`set gdefault`，如果您希望将此作为默认行为，请在您的 vimrc 中。首先在当前的 vim 会话中使用`:set gdefault`.

请注意，当您设置 时`gdefault`，这不仅会`g`产生默认行为，而且还会更改`g`标志的使用，以便`/g`在替换结束时使用将导致仅进行一次替换。

见：`:help gdefault`。

# actionscript-3 - 类文件中的动画？

> ID：11812616
> 
> 赞同：0
> 
> 时间：2012-08-04T23:00:28.537
> 
> 标签：actionscript-3

我发现自己需要在我的课程中引用某些未知帧中的某些动画。最好的方法是什么？我是否应该创建一个 custum 名称并指定该类的所有实例都应将某个动画标记为同一事物。例如：

```
public class CanBeHurt{

    public CanBeHurt() extends MovieClip{
        // constructor code here
    }

    public function hurt():void{
        gotoAndPlay("hurt");
    }
} 
```

然后，此类的任何实例都将被迫将受伤动画的开始标记为“受伤”。或者，我可以在指定框架的构造函数中接收字符串，如下所示：

```
public class CanBeHurt{
    private var hurtAnimationLabel: String;

    public CanBeHurt(hurtAnimationLabel: String) extends MovieClip{
        this.hurtAnimationLabel = hurtAnimationLabel;
    }

    public function hurt():void{
        gotoAndPlay(hurtAnimationLabel);
    }
} 
```

但不幸的是，对于更复杂的对象，我已经为构造函数提供了一堆其他输入参数，并且有这么多动画，我真的不想再添加了。最后，我想出的最后一个选项是：

```
public class CanBeHurt{
    private var hurtAnimationLabel: String;

    public CanBeHurt() extends MovieClip{
        this.hurtAnimationLabel = this.currentLabels[0];
    }

    public function hurt():void{
        gotoAndPlay(hurtAnimationLabel);
    }
} 
```

不幸的是，由于有多个动画，现在我不得不按特定顺序排列动画标签，以便能够正确引用它们。在这 3 种方法中，我发现第一种是最令人满意的，但有没有更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T12:14:59.437

您不需要存储标签名称，仅当您想要有效的方式时。

例子：

```
public class CanBeHurt{
    private var label: String;

    public CanBeHurt() extends MovieClip{
        label= "hurtLabel";
    }

    public function hurt():void{
        currentFrameLabel != "hurtLabel" ? gotoAndPlay("hurtLabel") : null;
    }
} 
```

您应该检查当前帧的标签，然后播放动画以避免卡帧。（动画总是在第一帧）

对于游戏，大多数开发者使用一个函数来控制动画，它是handleAnimation 函数。

例子：

```
public class Example{
   private var label:String = "someLabel1";

   public Example() extends MovieClip{
      //constructor code here
   }
   private function handleAnimation(){
      if(condition){
         label = "someLabel1";
      }
      if(condition2){
         label = "someLabel2";
      }
      gotoAndPlay(label);
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T17:54:51.203

我通常不会为我的代码扩展movieclip。我创建了某种类，它在构造函数中接受一个 MovieClip 并存储对此的引用，然后在函数调用上对其进行操作。

当涉及到标签名称时，我通常将它们作为静态变量放在适当的类中。

多年来，这对我来说效果很好:)

# java - 调用随机函数

> ID：11812622
> 
> 赞同：0
> 
> 时间：2012-08-04T23:01:02.683
> 
> 标签：java, function, switch-statement, main, random-access

```
public static GetRandomFunc() {
    switch((int)(Math.random()*NUM_FUNCTIONS)  {
        case 0:
            functionA();
            break;
        case 1:
            functionB();
            break;
        case 2:
            functionC();
            break;
          //  ...
    }
} 
```

我想在 main 中随机调用 GetRandomFunc() ，直到每个函数都被调用一次然后结束。我如何确保一个函数只被调用一次，而不是再次被调用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T23:03:40.673

将值存储在集合中会更容易，然后随机抽取它们直到集合为空。或者更好的是，打乱集合，然后按顺序遍历它。

集合中的值可以是整数，也可以是不同类的对象（具有共同的超类或接口），它们提供`call()`方法的不同实现。

例如：

```
import java.util.*;
import java.util.concurrent.*;

List<Runnable> functions = new ArrayList<Runnable>();
functions.add(new Runnable() {
  public void run() { /* do something */ }
});
functions.add(new Runnable() {
  public void run() { /* do something else */ }
});

Collections.shuffle(functions);
for(Runnable function : functions)
  function.run(); 
```

该线程上的其他帖子显示了其他潜在的解决方案，但它们都比这个更复杂且更容易出错，如果函数数量很大，它们中的大多数会非常慢。（来自@AndersLinden 的是一个例外——即使有数千个函数要调用，它仍然会很快。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T23:06:29.360

用于记录是否已调用函数的位字段以及`if`如果该位已设置则不调用该函数的语句 - 继续循环直到设置所有位。

（或者正如 Alex D 所说，创建一组数字以预先使用）

无论哪种方式，诀窍都是确保您只生成一次每个数字 - 如果您搞砸了这一点，您可能会陷入无限循环（例如等待获取数字 1、2 和 3，但您的随机函数正在生成 0 , 1 和 2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T23:06:52.183

您可以创建一个数组来跟踪哪些函数已被使用。

例如：

```
boolean[] usedFunctions = new boolean[NUM_FUNCTIONS];

public static GetRandomFunc() {
    switch((int) (Math.random() * NUM_FUNCTIONS) {
        case 0:
            if(!usedFunctions[0]) {
                functionA();
                usedFunctions[0] = true;
            }
            break;
        case 1:
            if(!usedFunctions[1]) {
                functionB();
                usedFunctions[1] = true;
            }
            break;
        // etc.
     }
} 
```

然后你需要做的就是重复调用 GetRandomFunc() 直到 usedFunctions 中的所有元素都为真。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-04T23:09:04.703

您保留一个整数数组，告诉您哪些索引仍未使用。当你使用了一个整数时，你用列表中的最后一个索引填充它，并将其视为一个短一个项目的列表。

```
int indexes[] = new int[3];

for (int i = 0; i < 3; i++)
  indexes[i] = i;

for (int i = 0; i < 3; i++)
{
  int index = (int)(Math.random()*(3 - i));
  switch (indexes[index])
  {
    case 0:
      functionA();
      break;
    case 1:
      functionB();
      break;
    case 2:
      functionC();
      break;
  }

  indexes[index] = indexes[2 - i];
} 
```

# c# - PreviewMouseRightButtonDown 路由事件和 WPF DataGrid

> ID：11812625
> 
> 赞同：0
> 
> 时间：2012-08-04T23:01:42.097
> 
> 标签：c#, wpf, wpfdatagrid, routed-events

现在这里基本上有两个问题，让我轻轻地向您介绍一下我目前遇到的问题。假设我们有一个常规的 DataGrid，我尝试`PreviewMouseRightButtonDown`在行上应用自定义功能，同时避免选择，因为这会扩展 Details 视图。我认为[这篇文章会有所帮助；它是针对 的`ListView`，但只需稍作调整，它应该可以正常工作，对吗？](https://stackoverflow.com/a/1075380/1180426)

* * *

*你为什么想这么做？*，你可能会问。我想避免在右键单击时打开详细信息，因为在主项目详细信息部分中（有时）会花费很长时间访问数据库，并且右键单击只会`bool`在集合中的视图模型中设置适当的标志属性。

* * *

`MainWindowView.xaml:`

```
<DataGrid AutoGenerateColumns="False" RowDetailsVisibilityMode="VisibleWhenSelected">
    <!-- Columns ommitted for brevity -->
<DataGrid.ItemContainerStyle>
            <Style TargetType="{x:Type DataGridRow}">
            <!-- Since I'm using Caliburn Micro anyway, I'm going to redirect the event to view model. It doesn't really matter, issue exists with EventSetter too. -->
                <Setter Property="cal:Message.Attach" Value="[Event PreviewMouseRightButtonDown] = [Action CheckItem($eventArgs, $source]"/>
            </Style>
        </DataGrid.ItemContainerStyle>
</DataGrid> 
```

`MainWindowViewModel.cs:`

```
public void CheckItem(RoutedEventArgs args, object source)
{
    var row = source as DataGridRow;

    if (row != null)
    {
        var item = (ItemViewModel)row.Item;
        item.IsChecked = true;
    }

    args.Handled = true;
} 
```

提问时间：

*   为什么`RoutingStrategy`列出`RoutedEventArgs`的为 `Direct`而不是`Tunneling`？我以为所有`Preview`事件都是 `Tunneling`。

![在此处输入图像描述](../Images/93623db05ba7c4b5c7a6aa3c17f41642.png)

*   更重要的是：如果我在里面放一个断点，上面的解决方案就可以工作`CheckItem`，不会发生选择并且详细信息被折叠，一切都按预期工作。如果我删除断点，则会选择项目并打开详细信息部分，就好像事件没有停止传播一样。为什么会这样？我认为将 设置为 `Handled`应该只是表明该事件已被`true`真正*处理*。`RoutedEventArgs`

 ** * *

**[编辑]**

现在我找到了一个“低俗”的解决方法，我可以附加`PreviewMouseDown`事件：

```
bool rightClick;

public void MouseDown(object source, MouseEventArgs args)
{
    rightClick = false;

    if (args.RightButton == MouseButtonState.Pressed)
    {
        rightClick = true;
        //do the checking stuff here
    }
} 
```

然后连接到`SelectionChanged`事件：

```
public void SelectionChanged(DataGrid source, SelectionChangedEventArgs args)
{
    if (rightClick)
        source.SelectedIndex = -1;           
} 
```

它适用于我的特殊情况，但主观上看起来很臭，所以我愿意接受任何其他建议。特别是为什么简单`eventArgs.Handled = true`的鼠标事件不足以抑制`SelectionChanged`以后的触发:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T23:44:52.030

处理 PreviewMouseRightButtonUp 而不是 Down 可以获得我想要的效果（选择必须在 up 而不是 down 上完成？）。

[PreviewMouseRightButtonDown](http://msdn.microsoft.com/en-us/library/system.windows.uielement.previewmouserightbuttondown.aspx)的 msdn 页面说它的路由策略应该是“直接”并且[路由事件概述](http://msdn.microsoft.com/en-us/library/ms742806.aspx)页面说：

> 由于对使用的命名约定，隧道事件有时也称为预览事件。

所以也许隧道事件通常是预览事件，但并不是说预览事件必须是隧道；）

编辑：

查看其他事件，例如 PreviewMouseDown 和 MouseDown，它们是 Tunneling 和 Bubble，也许只是 Right/Left 按钮事件是直接完成的。*

# java - 什么更有效/更便宜，铸造或方法调用？

> ID：11812629
> 
> 赞同：1
> 
> 时间：2012-08-04T23:02:57.603
> 
> 标签：java, performance, casting, type-conversion

在`Double`转换为`String`.

`int`我想知道是使用 a 还是使用 a`DecimalFormat`和 call是否会更好`format(..)`。此外，指定`String.valueOf()`或保持原样并让编译器解决它是否更有效？

抱歉，如果我听起来有点无知，我真的很想了解更多技术细节。

作为参考，我正在向 android canvas 绘制文本：

```
c.drawText("FPS: " + String.valueOf((int)lastFps), xPos, yPos, paint); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T23:12:01.387

铸造可能会更有效率。这是作为本机代码实现的，而使用方法必须通过 java 代码。它也更具可读性。

对于 string.valueof，我希望性能完全相同。我发现这样做`"string" + intValue`比`"string" + String.valueof(intValue)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T23:38:57.327

我做了一个程序，使用 System.nanoTime() 来计算这两种方法的执行时间：

```
 public static void cast() {
    for (int i=0; i<1000000; i++) {
        int x= (int)Math.random();
    }
}

public static void format() {
    for (int i=0; i< 1000000; i++) {
        DecimalFormat df = new DecimalFormat("#");
        df.format(Math.random());
    }
} 
```

以下是各自的结果：

80984944

6048075593

当然，我的测试可能不是完美的例子。我只是在使用 math.random()，它会生成一个始终为 0 的数字，这可能会影响结果。然而，这些结果确实是有道理的——强制转换应该很便宜，因为它可能根本不对位进行操作——JVM 只是以不同的方式处理这些位。

编辑：如果我为第二个示例提取格式化程序的实例化，则程序在 3155165182ns 中运行。如果我在两种情况下都将随机数乘以 Integer.MAX_VALUE（实例化被拉出），结果是：82100170 和 4174558079。看起来铸造是要走的路。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-05T09:58:24.627

这是一份工作`Math.floor().`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-04T23:11:10.650

一般来说，函数/方法调用是以性能开销为代价的。我的投票是类型转换会更快，但正如@Zefiryn 建议的那样，最好的方法是创建一个循环并多次执行每个操作并使用计时器测量性能。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-04T23:23:19.287

我不确定两者的效率，但这里有第三种比较有趣的选项：

```
String.valueOf(doubleValue).substring(0, endInt) 
```

这将给出一组字符而不是小数/数字，并且会跳过类型转换，而是进行两个函数调用。

编辑：太好奇了，所以我尝试运行每个选项：

```
integerNumberFormat.format(number)
String.valueOf(doubleValue).substring(0, endInt)
String.valueOf((int)doubleValue) 
```

10^6 个周期，结果分别为 ~800 ms、~300 ms 和 ~40 ms。我想我的结果不会立即转化为您的情况，但它们可以暗示最后一个确实是，正如之前的海报所暗示的那样，最快的一个。

# django - OS X Django 开发环境：链接到 virtualenv django 和应用程序媒体

> ID：11812631
> 
> 赞同：0
> 
> 时间：2012-08-04T23:03:16.383
> 
> 标签：django, macos, symlink

我正在 Mac OS 10.8 上开发 Django 应用程序。生产服务器是 Ubuntu 服务器。在生产服务器上，我创建了指向以下目录的符号链接：

> （在 Ubuntu 上）
> /var/virtualenvs/some_virtualenv/lib/python2.6/site-packages/django/contrib/admin/media

但是这些符号链接显然在我的本地 OS X 开发环境中不起作用：

> （在 OS X 上）
> /Users/username/Webdev/.virtualenvs/some_virtualenv/lib/python2.7/site-packages/django/contrib/admin/media

符号链接显然已进入 git repo。Django 部署真的有点痛苦！有人能告诉我如何处理两种不同环境中的部署吗？

更新：是否只是确保从 git 中排除符号链接的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T23:44:48.733

Django 部署确实不是太难，但是有一些有用的模式。首先，是拆分您的生产和开发设置。有许多不同的方法可以做到这一点，其中大部分[在 django 文档中](https://code.djangoproject.com/wiki/SplitSettings)进行了描述。

此外，如果您使用 Django >= 1.4，则不再需要符号链接到管理媒体，因为它已转换为使用[staticfiles](https://docs.djangoproject.com/en/dev/ref/contrib/staticfiles/)。

我在创建任何新的 django 1.4 项目时使用[此模板](http://amccloud.com/post/14689947527/django-1-4-custom-project-template)，包括生成您的生产和本地设置。

符号链接不应包含在您的 git repo IMO 中。有更好的方法来管理如何访问您的媒体。

# xcode - 安装 Fragaria 框架

> ID：11812632
> 
> 赞同：2
> 
> 时间：2012-08-04T23:03:17.347
> 
> 标签：xcode, cocoa, frameworks

我正在寻找一种在我的可可应用程序上实现语法突出显示的方法，我发现了很棒的 Fragaria 框架[https://github.com/mugginsoft/Fragaria](https://github.com/mugginsoft/Fragaria)。不幸的是，我似乎无法在我的应用程序中安装框架。

以下是我遵循的步骤：

1.  从源代码目标编译框架
2.  将框架添加到 XCode 4 的“Link Binary with Libraries”构建阶段
3.  将框架拖入构建阶段的“Copy Bundle Resources”

不幸的是，当我尝试构建我的应用程序时，我收到了这个错误：

> dyld：库未加载：@executable_path/../Frameworks/MGSFragaria.framework/Versions/A/MGSFragaria 引用自：/Users/dedalus/Developer/DEGS/trunk/build/Debug/DEGS.app/Contents/MacOS/DEGS原因：找不到图片

我错过了哪一步？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T08:37:43.220

不要将框架产品添加到*Copy Bundle Resources*构建阶段。相反，创建一个新的*Copy Files*构建阶段，将其目标设置为*Frameworks*目录并将框架构建产品添加到此阶段。*Copy Bundle Resources*构建阶段将框架复制到资源子目录（`Contents/Resources`在 OS X 上），但动态链接器希望它位于 frameworks 子目录中（`Contents/Frameworks`在 OS X 上）。新添加的*Copy Files*构建阶段将把它放在那里。

顺便说一句，您看到的错误是运行时错误，而不是编译时错误。所以严格来说，您在运行应用程序时会收到此错误，而不是在构建它时。

# objective-c - iOS：一个视图可以看到在另一个视图中创建的对象吗

> ID：11812635
> 
> 赞同：0
> 
> 时间：2012-08-04T23:03:44.780
> 
> 标签：objective-c, ios

万事如意，

我一直在阅读有关在控制器之间传递数据的协议和委托。

假设 ViewControllerA 在一个对象上创建一个实例：

```
myObject = [[anObject alloc]init];
[myObject setProperty: value]; 
```

ViewControllerB 如何访问 myObject 的属性？ViewControllerB 如何知道 ViewControllerA 创建的对象？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T23:19:11.670

如果 B 在 A 之后（即它们是分层的），您可以将对象传递给 B（在创建它之后或在`prepareForSegue`：

```
bController.objectProperty = myObject; 
```

如果两者同时对用户处于活动状态（例如通过标签栏），您可以使用通知。这与委托的不同之处在于关系更松散——发送对象不必知道接收对象的任何信息。

```
// in A
[[NSNotificationCenter defaultCenter] 
   postNotificationName:ObjectChangedNOtificationName 
   object:self
   userInfo:dictionaryWithObject];
// in B
[[NSNotificationCenter defaultCenter] addObserver:self 
   selector:@selector(objectChanged:) 
   name:ObjectChangedNOtificationName 
   object:nil]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T23:25:21.080

您可以使用`NSNotificationCenter`让有兴趣的人了解新对象。
通常这是在模型层完成的，例如我有一个`Person`对象。在.h 文件
中定义“新人创建通知”`Person`

```
extern NSString *const NewPersonCreatedNotification; 
```

在 .m 文件中

```
NSString *const NewPersonCreatedNotification = @"NewPersonCreatedNotification"; 
```

当一个人被创建时（在 init 方法中）发布通知

```
 [[NSNotificationCenter defaultCenter] postNotificationName:NewPersonCreatedNotification
                                                        object:self
                                                      userInfo:nil]; 
```

然后谁想知道新创建的人需要观察这个通知，例如 ViewControllerA 想知道，所以在它的 init 方法中我做：

```
- (id)init
{
    self = [super init];
    if (self) {
       [[NSNotificationCenter defaultCenter] addObserver:self
                                                 selector:@selector(handleNewPersonCreatedNotification:)
                                                     name:NewPersonCreatedNotification
                                                   object:nil];    
    }
    return self;
}  

- (void)handleNewPersonCreatedNotification:(NSNotification *)not
{
    // get the new Person object  
    Person *newPerson = [not object];  

    // do something with it...
} 
```

# c# - 实体框架不保存

> ID：11812640
> 
> 赞同：0
> 
> 时间：2012-08-04T23:04:39.613
> 
> 标签：c#, linq, entity-framework, entity-framework-4, linq-to-entities

我正在尝试更新我的表，`Bareme`但我的唯一键出现异常 `(Categorie , Section)`，但如这里所示，如果对象确实存在，则仅更新我的薪水，并且我已通过“DEBUG”验证插入的对象均不重复

内部异常说：

> 违反 UNIQUE KEY 约束“IX_Bareme”。无法在对象“dbo.Bareme”中插入重复键。\r\n语句已终止。

代码：

```
for (int i = 1; i <= sl_cat.Value; i++)
            for (int j = 1; j <= sl_sec.Value; j++)
            {

                Bareme brm = db.Entities.Baremes.Select(X => X).Where(X => X.Section == j && X.Categorie == i).FirstOrDefault();
                if (brm != null)
                    db.Entities.Baremes.DeleteObject(brm);

                brm = new Bareme();
                brm.Categorie = i;
                brm.Section = j;
                brm.Salaire = dt.Rows[j - 1][i.ToString()].ToString().ToDecimal();
                db.Entities.Baremes.AddObject(brm);
            }

        try
        {
            db.Entities.SaveChanges();
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T23:15:23.213

请使用`SaveChanges Method`with `SaveOptions`for`DetectChangesBeforeSave`

**例子**

```
db.Entities.SaveChanges(SaveOptions.DetectChangesBeforeSave); 
```

# eclipse - 无法在 Eclipse Juno - Fedora17 中创建 JSP 文件 :(

> ID：11812641
> 
> 赞同：0
> 
> 时间：2012-08-04T23:05:02.137
> 
> 标签：eclipse, jsp

我刚刚在我的 Fedora 中安装了这个 IDE。

我收到以下错误...

```
eclipse.buildId=I20120608-1400
java.version=1.7.0_05-icedtea
java.vendor=Oracle Corporation
BootLoader constants: OS=linux, ARCH=x86_64, WS=gtk, NL=es_ES
Command-line arguments:  -os linux -ws gtk -arch x86_64

Error
Sat Aug 04 17:54:04 PET 2012
No se ha podido inicializar el editor.

java.lang.NoClassDefFoundError: org/w3c/dom/ElementTraversal
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClass(ClassLoader.java:791)
at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.defineClass(DefaultClassLoader.java:188)
at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.defineClassHoldingLock(ClasspathManager.java:632)
at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.defineClass(ClasspathManager.java:607)
at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findClassImpl(ClasspathManager.java:568)
at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClassImpl(ClasspathManager.java:492)
at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClass(ClasspathManager.java:465)
at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.findLocalClass(DefaultClassLoader.java:216)
at org.eclipse.osgi.internal.loader.BundleLoader.findLocalClass(BundleLoader.java:395)
at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:464)
at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:421)
at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:412)
at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
at org.apache.xerces.parsers.AbstractDOMParser.startDocument(Unknown Source)
at org.apache.xerces.impl.dtd.XMLDTDValidator.startDocument(Unknown Source)
at org.apache.xerces.impl.XMLDocumentScannerImpl.startEntity(Unknown Source)
at org.apache.xerces.impl.XMLVersionDetector.startDocumentParsing(Unknown Source)
at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)
at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)
at org.apache.xerces.parsers.XMLParser.parse(Unknown Source)
at org.apache.xerces.parsers.DOMParser.parse(Unknown Source)
at org.apache.xerces.jaxp.DocumentBuilderImpl.parse(Unknown Source)
at org.eclipse.jst.jsp.core.internal.contenttype.DeploymentDescriptorPropertyCache.fetchDescriptor(DeploymentDescriptorPropertyCache.java:750)
at org.eclipse.jst.jsp.core.internal.contenttype.DeploymentDescriptorPropertyCache.getCachedDescriptor(DeploymentDescriptorPropertyCache.java:812)
at org.eclipse.jst.jsp.core.internal.contenttype.DeploymentDescriptorPropertyCache.getPropertyGroups(DeploymentDescriptorPropertyCache.java:873)
at org.eclipse.jst.jsp.core.internal.contentmodel.tld.TLDCMDocumentManager.handlePreludes(TLDCMDocumentManager.java:966)
at org.eclipse.jst.jsp.core.internal.contentmodel.tld.TLDCMDocumentManager$DirectiveStructuredDocumentRegionHandler.nodeParsed(TLDCMDocumentManager.java:188)
at org.eclipse.wst.xml.core.internal.parser.XMLSourceParser.fireNodeParsed(XMLSourceParser.java:135)
at org.eclipse.jst.jsp.core.internal.parser.JSPSourceParser.parseNodes(JSPSourceParser.java:296)
at org.eclipse.wst.xml.core.internal.parser.XMLSourceParser.getDocumentRegions(XMLSourceParser.java:173)
at org.eclipse.wst.sse.core.internal.text.StructuredDocumentReParser._core_reparse_text(StructuredDocumentReParser.java:355)
at org.eclipse.wst.sse.core.internal.text.StructuredDocumentReParser.core_reparse(StructuredDocumentReParser.java:752)
at org.eclipse.jst.jsp.core.internal.parser.JSPReParser.reparse(JSPReParser.java:153)
at org.eclipse.wst.sse.core.internal.text.StructuredDocumentReParser.reparse(StructuredDocumentReParser.java:1333)
at org.eclipse.wst.sse.core.internal.text.BasicStructuredDocument.updateModel(BasicStructuredDocument.java:2713)
at org.eclipse.wst.sse.core.internal.text.BasicStructuredDocument.internalReplaceText(BasicStructuredDocument.java:1923)
at org.eclipse.wst.sse.core.internal.text.BasicStructuredDocument.replaceText(BasicStructuredDocument.java:2423)
at org.eclipse.wst.sse.core.internal.text.BasicStructuredDocument.set(BasicStructuredDocument.java:2935)
at org.eclipse.core.internal.filebuffers.ResourceTextFileBuffer.setDocumentContent(ResourceTextFileBuffer.java:575)
at org.eclipse.core.internal.filebuffers.ResourceTextFileBuffer.initializeFileBufferContent(ResourceTextFileBuffer.java:286)
at org.eclipse.core.internal.filebuffers.ResourceFileBuffer.create(ResourceFileBuffer.java:245)
at org.eclipse.core.internal.filebuffers.TextFileBufferManager.connect(TextFileBufferManager.java:112)
at org.eclipse.ui.editors.text.TextFileDocumentProvider.createFileInfo(TextFileDocumentProvider.java:559)
at org.eclipse.ui.editors.text.TextFileDocumentProvider.connect(TextFileDocumentProvider.java:478)
at org.eclipse.ui.texteditor.AbstractTextEditor.doSetInput(AbstractTextEditor.java:4222)
at org.eclipse.ui.texteditor.StatusTextEditor.doSetInput(StatusTextEditor.java:237)
at org.eclipse.ui.texteditor.AbstractDecoratedTextEditor.doSetInput(AbstractDecoratedTextEditor.java:1480)
at org.eclipse.ui.editors.text.TextEditor.doSetInput(TextEditor.java:169)
at org.eclipse.wst.sse.ui.StructuredTextEditor.doSetInput(StructuredTextEditor.java:1924)
at org.eclipse.ui.texteditor.AbstractTextEditor$19.run(AbstractTextEditor.java:3209)
at org.eclipse.jface.operation.ModalContext.runInCurrentThread(ModalContext.java:464)
at org.eclipse.jface.operation.ModalContext.run(ModalContext.java:372)
at org.eclipse.ui.internal.WorkbenchWindow$13.run(WorkbenchWindow.java:1666)
at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:70)
at org.eclipse.ui.internal.WorkbenchWindow.run(WorkbenchWindow.java:1663)
at org.eclipse.ui.texteditor.AbstractTextEditor.internalInit(AbstractTextEditor.java:3227)
at org.eclipse.ui.texteditor.AbstractTextEditor.init(AbstractTextEditor.java:3254)
at org.eclipse.wst.sse.ui.StructuredTextEditor.init(StructuredTextEditor.java:2601)
at org.eclipse.ui.internal.EditorReference.initialize(EditorReference.java:324)
at org.eclipse.ui.internal.e4.compatibility.CompatibilityPart.create(CompatibilityPart.java:288)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.eclipse.e4.core.internal.di.MethodRequestor.execute(MethodRequestor.java:56)
at org.eclipse.e4.core.internal.di.InjectorImpl.processAnnotated(InjectorImpl.java:857)
at org.eclipse.e4.core.internal.di.InjectorImpl.processAnnotated(InjectorImpl.java:837)
at org.eclipse.e4.core.internal.di.InjectorImpl.inject(InjectorImpl.java:111)
at org.eclipse.e4.core.internal.di.InjectorImpl.internalMake(InjectorImpl.java:318)
at org.eclipse.e4.core.internal.di.InjectorImpl.make(InjectorImpl.java:240)
at org.eclipse.e4.core.contexts.ContextInjectionFactory.make(ContextInjectionFactory.java:161)
at org.eclipse.e4.ui.internal.workbench.ReflectionContributionFactory.createFromBundle(ReflectionContributionFactory.java:102)
at org.eclipse.e4.ui.internal.workbench.ReflectionContributionFactory.doCreate(ReflectionContributionFactory.java:71)
at org.eclipse.e4.ui.internal.workbench.ReflectionContributionFactory.create(ReflectionContributionFactory.java:53)
at org.eclipse.e4.ui.workbench.renderers.swt.ContributedPartRenderer.createWidget(ContributedPartRenderer.java:141)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createWidget(PartRenderingEngine.java:889)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:623)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:725)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.access$2(PartRenderingEngine.java:696)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$7.run(PartRenderingEngine.java:690)
at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createGui(PartRenderingEngine.java:675)
at org.eclipse.e4.ui.internal.workbench.PartServiceImpl$1.handleEvent(PartServiceImpl.java:90)
at org.eclipse.e4.ui.services.internal.events.UIEventHandler$1.run(UIEventHandler.java:41)
at org.eclipse.swt.widgets.Synchronizer.syncExec(Synchronizer.java:180)
at org.eclipse.ui.internal.UISynchronizer.syncExec(UISynchronizer.java:150)
at org.eclipse.swt.widgets.Display.syncExec(Display.java:4291)
at org.eclipse.e4.ui.internal.workbench.swt.E4Application$1.syncExec(E4Application.java:187)
at org.eclipse.e4.ui.services.internal.events.UIEventHandler.handleEvent(UIEventHandler.java:38)
at org.eclipse.equinox.internal.event.EventHandlerWrapper.handleEvent(EventHandlerWrapper.java:197)
at org.eclipse.equinox.internal.event.EventHandlerTracker.dispatchEvent(EventHandlerTracker.java:197)
at org.eclipse.equinox.internal.event.EventHandlerTracker.dispatchEvent(EventHandlerTracker.java:1)
at org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:230)
at org.eclipse.osgi.framework.eventmgr.ListenerQueue.dispatchEventSynchronous(ListenerQueue.java:148)
at org.eclipse.equinox.internal.event.EventAdminImpl.dispatchEvent(EventAdminImpl.java:135)
at org.eclipse.equinox.internal.event.EventAdminImpl.sendEvent(EventAdminImpl.java:78)
at org.eclipse.equinox.internal.event.EventComponent.sendEvent(EventComponent.java:39)
at org.eclipse.e4.ui.services.internal.events.EventBroker.send(EventBroker.java:81)
at org.eclipse.e4.ui.internal.workbench.UIEventPublisher.notifyChanged(UIEventPublisher.java:57)
at org.eclipse.emf.common.notify.impl.BasicNotifierImpl.eNotify(BasicNotifierImpl.java:374)
at org.eclipse.e4.ui.model.application.ui.impl.ElementContainerImpl.setSelectedElement(ElementContainerImpl.java:171)
at org.eclipse.e4.ui.internal.workbench.ModelServiceImpl.showElementInWindow(ModelServiceImpl.java:418)
at org.eclipse.e4.ui.internal.workbench.ModelServiceImpl.bringToTop(ModelServiceImpl.java:385)
at org.eclipse.e4.ui.internal.workbench.PartServiceImpl.delegateBringToTop(PartServiceImpl.java:578)
at org.eclipse.e4.ui.internal.workbench.PartServiceImpl.bringToTop(PartServiceImpl.java:314)
at org.eclipse.e4.ui.internal.workbench.PartServiceImpl.showPart(PartServiceImpl.java:962)
at org.eclipse.ui.internal.WorkbenchPage.busyOpenEditor(WorkbenchPage.java:3071)
at org.eclipse.ui.internal.WorkbenchPage.access$21(WorkbenchPage.java:2996)
at org.eclipse.ui.internal.WorkbenchPage$8.run(WorkbenchPage.java:2978)
at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:70)
at org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:2974)
at org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:2933)
at org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:2916)
at org.eclipse.ui.ide.IDE.openEditor(IDE.java:687)
at org.python.pydev.navigator.actions.PyOpenResourceAction.openFiles(PyOpenResourceAction.java:101)
at org.python.pydev.navigator.actions.PyOpenPythonFileAction.run(PyOpenPythonFileAction.java:85)
at org.eclipse.ui.actions.RetargetAction.run(RetargetAction.java:221)
at org.eclipse.ui.navigator.CommonNavigatorManager$3.open(CommonNavigatorManager.java:185)
at org.eclipse.ui.OpenAndLinkWithEditorHelper$InternalListener.open(OpenAndLinkWithEditorHelper.java:48)
at org.eclipse.jface.viewers.StructuredViewer$2.run(StructuredViewer.java:866)
at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
at org.eclipse.ui.internal.JFaceUtil$1.run(JFaceUtil.java:49)
at org.eclipse.jface.util.SafeRunnable.run(SafeRunnable.java:175)
at org.eclipse.jface.viewers.StructuredViewer.fireOpen(StructuredViewer.java:864)
at org.eclipse.jface.viewers.StructuredViewer.handleOpen(StructuredViewer.java:1152)
at org.eclipse.ui.navigator.CommonViewer.handleOpen(CommonViewer.java:462)
at org.eclipse.jface.viewers.StructuredViewer$6.handleOpen(StructuredViewer.java:1256)
at org.eclipse.jface.util.OpenStrategy.fireOpenEvent(OpenStrategy.java:275)
at org.eclipse.jface.util.OpenStrategy.access$2(OpenStrategy.java:269)
at org.eclipse.jface.util.OpenStrategy$1.handleEvent(OpenStrategy.java:309)
at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1276)
at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3554)
at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3179)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$9.run(PartRenderingEngine.java:1022)
at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:916)
at org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:86)
at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:585)
at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:540)
at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:124)
at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:638)
at org.eclipse.equinox.launcher.Main.basicRun(Main.java:593)
at org.eclipse.equinox.launcher.Main.run(Main.java:1447)
at org.eclipse.equinox.launcher.Main.main(Main.java:1423) 
```

引起：java.lang.ClassNotFoundException: org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:501) at org.eclipse.osgi.internal.loader.BundleLoader 的 org.w3c.dom.ElementTraversal。 findClass(BundleLoader.java:421) 在 org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:412) 在 org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)在 java.lang.ClassLoader.loadClass(ClassLoader.java:356) ... 158 更多

它向我展示了这一点：

![错误](../Images/aa48a69933baa129cbb9e00833c90202.png)

# javascript - Javascript 基本继承与 Crockford 原型继承

> ID：11812648
> 
> 赞同：0
> 
> 时间：2012-08-04T23:06:51.450
> 
> 标签：javascript, inheritance

我对 Crockford 推荐的继承感到困惑，Crockford 方法和通用（默认）方法之间的主要区别是什么。

```
//Crockford method
      function object(o) {
            function F() {}
            F.prototype = o;
            return new F();
        } 
```

下面是更通用的方式

```
function Base(name) {
    this.name = name;
}

Base.prototype.getName = function () {
    return 'Base :' + this.name;
}

function Child(name) {
    this.name = name;
}

Child.prototype.getName = function () {
    return 'Child :' + this.name;
}

function Kid(name) {
    this.name = name;
}

Kid.prototype.getName = function () {
    return 'Kid :' + this.name;
}

Child.prototype = new Base ("childBase");
Kid.prototype = new Child ("kidChild");

var base = new Base ("myBase");
var child = new Child("myChild");
var kid = new Kid("myKid");

console.log(base.getName());
console.log(child.getName());
console.log(kid.getName()); 
```

**以上两者有什么区别？**

实际上我无法完全理解 Crockford 方法。任何人都可以帮助我找出通用方法的缺点和 Crockford 方法的优点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T01:56:27.760

```
Child.prototype = new Base ("childBase");
Kid.prototype = new Child ("K1", "K2"); 
```

通过这些行，您可以实例化两个对象，它们甚至具有自己的名称。那有什么好处？在更复杂的环境中，这甚至可能会破坏应用程序 - 当`Base`构造函数使用私有变量和特权方法时，它的所有子级将在同一个实例中共享相同的变量！

因此，通常不应该使用这种方式，而是使用 Crockfords 函数，即[Object.create](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/create)的旧版本。它将被调用`Base.prototype`，创建一个直接从该对象继承的新对象——它只设置原型链，但不执行任何构造函数代码。[了解 Crockford 的 Object.create shim](https://stackoverflow.com/q/10141086/1048572)将帮助您了解详细信息。然后创建的对象非常适合作为 Children 的原型对象。另请阅读[此答案](https://stackoverflow.com/a/1598077/1048572)。

# java - 返回实现接口的私有类，保持实现私有

> ID：11812651
> 
> 赞同：3
> 
> 时间：2012-08-04T23:06:55.323
> 
> 标签：java

静态方法`M`返回一个对象实现接口`A`：

```
interface A { ... }
static A M() { ... } 
```

在`M`我想构造一个类型的对象`B`并返回它，给定`B`实现`A`：

```
class B implements A { ... } 
```

我不希望客户端代码知道有关如何`B`实现的任何信息，我*宁愿*`B`不成为一个类`static`，`B` *必须*是不可变的，并且可以不同的方式`B`交给不同的客户端。我想不惜一切代价阻止`B`外部方法的实例化`M`（正如一位用户评论的那样，缺少反射）。

我怎样才能实现上述目标？我应该在哪里以及如何实施`B`？您能否提供一个简短的代码示例？

我的主要问题是：我怎样才能拥有“不同`B`的 s”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T23:10:43.277

静态内部类可能是您最好的选择。您将无法“`B`不惜一切代价阻止实例化”，因为通过反射，客户端代码可以绕过所有访问修饰符。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-04T23:13:33.993

您可以使用不会被称为 B （是匿名的）但将实现`A`例如的匿名内部类

```
interface A {
    void someMethod();
}

public class Test {
    static A M() {
        return new A() {// it will create and return object of anonymous 
                        // class that implements A
            @Override
            public void someMethod() {
            }
        };
    }
} 
```

不使用匿名类的反射对象只能通过方法创建`M`。它也不能扩展，所以它是不变性的第一步。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T23:22:14.507

您还可以使用`Proxy`实现来进一步隐藏实现类

```
public interface A {
    public Object getValue();
}

public class Factory {
    public static A newInstance() {
        return new ProxyA(AImpl);
    }
}

public class ProxyA implements A {
    private A proxy;
    public ProxyA(A proxy) {
        this.proxy = proxy;
    }

    public Object getValue() {
        return proxy.getValue();
    }
} 
```

所有这一切实际上都是将实现隐藏`A`在另一个布局下，并且很难创建一个实例`ProxyA`

但是正如@Asaph 指出的那样，通过反射，几乎不可能真正防止人们访问类和对象的各个部分......

您还可以通过不同的 分离您的接口和实现`Classloaders`，这样您就只向开发人员公开接口，并且实现是通过在运行时加载它们的动态类来交付的。虽然没有解决根本问题，但对于那些试图绕过你的工厂的人来说，它使事情变得更加复杂。

恕我直言

# asp.net - asp.net 代码在浏览器中显示代码本身而不是输出

> ID：11812654
> 
> 赞同：0
> 
> 时间：2012-08-04T23:07:31.017
> 
> 标签：asp.net, razor

以下代码在浏览器中显示，而不是预期的输出。我在 sql server 2008 中有表格。我在 webmatrix 中有这段代码。

```
<%@ Page Language="VB" %>
@{
var db = Database.Open("databasename"); 'database name in sql server is 'databasename'
var selectQueryString = "SELECT column_date, sum(qty1) as quantity1, 
sum(qty2) as quantity2, sum(qty3) as quantity3
from tbldaily group by column_date order by column_date"; 
}
<!DOCTYPE html>
<html> 
<body> 
<h1>First table test</h1> 
<table> 
<tr>
<th>at_date</th> 
<th>quantity1</th> 
<th>quantity2</th> 
<th>quantity3</th> 
</tr>
@foreach(var row in db.Query(selectQueryString))
{
<tr> 
<td>@row.column_date</td> 
<td>@row.quantity1</td> 
<td>@row.quantity2</td> 
<td>@row.quantity3</td> 
</tr> 
}
</table> 
</body> 
</html> 
```

我觉得这段代码的某个地方有错误。你能帮我解决这个问题吗？如果您想了解有关我的数据库结构或表的更多信息，请告诉我，这可能有助于更好地理解我的场景

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T23:15:44.243

看起来您正在将[Razor 语法](http://www.asp.net/web-pages/overview/getting-started/introducing-razor-syntax-%28c%29)与网页混合。将您的文件命名为 *.cshtml 并删除用于网页的第一行。您的其余代码是有效的 C# razor。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T02:06:14.860

我认为他需要相反的情况。保留它.aspx。
因此，无论您有 @ 标记来标记 asp 代码，请改用 aspx 转义符

```
<% For i As Integer = 0 To .... %>
   <tr> <td> <%= row.column_date %> </td> ......
<% Next%> 
```

# android - Handler (MessageQueue) 和 AsyncTask (SERIAL_EXECUTOR) 在性能方面有什么区别？

> ID：11812657
> 
> 赞同：0
> 
> 时间：2012-08-04T23:08:50.260
> 
> 标签：android, multithreading, android-asynctask, android-handler

有几种方法可以在您的应用程序中异步获取数据。一个是a `Handler`，另一个是a `AsyncTask`。现在我已经使用了两者，并且想知道哪一个在某些任务中表现更好/更有效。

到目前为止，我主要用于`AsyncTasks`获取 Web 数据，以及`Handler`从 获取数据`Services`到`Activities`.

我想知道将`Handler`'s 用于 Webdata 或使用 AsyncTasks 从`Services`. 最大的区别是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T23:55:13.920

由于[`AsyncTask`使用 a`Handler`](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/os/AsyncTask.java)，您的比较是......奇怪。

`AsyncTask`非常适合事务性工作：需要多于几毫秒且少于几分钟的工作。对于这类工作，如果您不需要自己的线程管理，`AsyncTask`通常使用起来更简单。

如果您的线程需要一些特殊的特性，`AsyncTask`并且不容易处理，或者如果您需要线程的时间不确定（例如，直到用户按下停止按钮），请使用您自己的线程和其他东西来让主应用程序线程工作： a `Handler`， or `post()`， or `runOnUiThread()`。“不确定的时间段”建议假设您使用的是内置线程池之一——我从不喜欢从您未设置的线程池中绑定线程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T14:29:21.673

看起来像`AsyncTask`使用它自己的内部处理程序。我的测试是使用处理程序的“帖子”立即入队。在`onCreate`此使用时可能会出现问题，因为必须在之后将其他操作排入队列`onCreate`（尚未通读 Android Activity 等源代码）。因此，尝试发布以稍后加载布局不起作用。不得不使用一个`AsyncTask`. 由于`AsyncTask`有自己的内部Handler；也许，然后创建任务可能会直接发生在队列中，`onCreate`但`doInBackground`and`onPostExecute`可能会稍后发生，因为它们稍后会出现在队列中。

所以，`AsyncTask`这个 UI 工作得更好，需要稍后加载一个过大的布局文件`setContentView`- 稍后意味着可以显示`onCreate`之后。在完成之前不会出现。`ProgressDialog``ProgressDialog``onCreate`

此外，请参阅本文了解如何[选择何时使用 AsyncTask](http://android-pro.blogspot.com/2011/05/difference-between-handler-and.html)。基本上是在想要更新 UI 时说。但实际上你可以这样做，`runOnUIThread`所以不需要处理程序，也不`AsyncTask`需要你已经知道 Java 线程。`runOnUIThread`就像 Swing 中的 invoke/invokeLater 一样。

# css - CSS - 使用浮动 div 自动填充空白空间

> ID：11812659
> 
> 赞同：1
> 
> 时间：2012-08-04T23:08:58.783
> 
> 标签：css, css-float, html, jquery-isotope

我正在尝试在[http://www.gablabelle.com/](http://www.gablabelle.com/)创建网格布局。

我有多个带有浮动的div（图像）：left; 财产，我想知道为什么有一些空白以及为什么浮动 div 没有填补空白。

非常感谢您的时间和帮助。

**更新：**我现在使用 jQuery 同位素，但仍有差距……知道吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T23:18:16.347

这就是浮动的工作原理。这些间隙之所以存在，是因为元素在一个又一个换行后浮动。它没有填满上面的空间。

如果您想要不均匀的网格效果，那么您需要使用 JavaScript 解决方案来设置绝对位置。我推荐[masonry plugin](http://masonry.desandro.com/)，我认为主页上的 before/after 示例显示了您遇到的问题和您想要的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T23:20:26.353

您似乎正在寻找一种方法来填充页面上的所有方块。简单地通过 CSS 是不可能的。'向左飘浮;' 只是简单地填充页面中的空间，一个个图像，而不是考虑它们是如何组合在一起的。

将所有部件组装在一起，让它们像拼图一样舒适地坐着并不容易。这实际上是一个相当复杂的问题，它与背包问题（[http://en.wikipedia.org/wiki/Knapsack_problem](http://en.wikipedia.org/wiki/Knapsack_problem)）和包装问题（[http://en.wikipedia.org/wiki/Packing_problem](http://en.wikipedia.org/wiki/Packing_problem)）有关.

为了解决这个问题，我确信会有 jQuery 或 JavaScript（甚至可能是 PHP）库可供使用。或者，您可以手动排序照片，使它们以整齐的方式组合在一起。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T23:13:08.577

这导致了差距：

```
article.post {
    margin: 0 0 30px 30px;
} 
```

# javascript - 在 Javascript d3 中更新 svg:line

> ID：11812668
> 
> 赞同：1
> 
> 时间：2012-08-04T23:10:40.077
> 
> 标签：javascript, svg, scale, d3.js, transition

我对 Javascript 和 d3 真的很陌生，并且仍在尝试围绕语法进行思考。

我的可视化包含一条线 ( `svg:line`) 和一个叠加的动态直方图。该线路目前是固定的；直方图可以更新。我正在尝试找出该行的类似更新以及如何访问它。

```
函数直方图 (...) {
  this.create = function() {
    ...
    this.targetPDF = 数组（1,2,3）；
    this.vis = d3.select(divID)
      .append("svg:svg")
      .attr（“类”，“vis2chart”）
      .attr("宽度", width2)
      .attr("高度", height2);
    ...
    那=这；
    this.densityKernel = d3.svg.line()
     .x(function(d,i) { return that.xxTarget(i); })
     .y(function(d) { return that.yy2(d); });
    this.vis.append("svg:path").attr("d", that.densityKernel(that.targetPDF));
  };
  this.reset = function() {
     // 这里是我想通过 exit() 或 transform() 更新行的地方
  };
}

```

我的语法都不起作用，所以不值得发布它。我不知道为什么我觉得这很困难。

* * *

*编辑*：很抱歉，我没有将其简化为基本要素——部分原因是不确定基本要素是什么。为了回应下面的评论，我正在粘贴`yy2`以下代码`xxTarget`。他们正在重新调整函数，我怀疑他们的定义与行更新的代码无关：

```
this.yy2 = d3.scale.linear()
    .domain([0, that.maxDensity + d3.max([plotMargin * that.maxDensity, 0.05])])
    .range([(1 - xmf.xxbMarginFactor) * height2, xmf.xxtMarginFactor * height2]);
this.xxTarget = d3.scale.linear()
    .domain([0, numLineSegments])
    .range([xmf.yylMarginFactor * width2, (1 - xmf.yyrMarginFactor) * width2]); 
```

* * *

*编辑*这里是一些语法的尝试，遵循d3 中的动画折线图[示例。](https://gist.github.com/1148374)该函数在 Histogram 类函数中定义。**这似乎可行，但恐怕我会以某种方式搞砸范围……建议表示赞赏。**

```
this.redrawDynamically = function() {
  this.vis.selectAll("path")
    .data(hist.targetPDF)
    .attr("d", hist.densityKernel(hist.targetPDF))
    .transition()
    .ease("linear")
    .duration(100)
}; 
```

这个想法是调用`redrawDynamically()`。`reset()`

# directshow - Win7/Vista 上的视频播放 [dshow, dmo]

> ID：11812670
> 
> 赞同：0
> 
> 时间：2012-08-04T23:11:04.283
> 
> 标签：directshow, dmo

我有一个视频剪辑，在默认安装 Win7 时存在一些问题：视频播放时没有声音。视频剪辑来自手机，它是 3gp (mp4) 文件格式，带有 H264 视频和 AMR 音频。我想知道如何在该机器上添加对 AMR 音频的播放支持。VLC 或 klite/ffdshow 编解码器包在这里是不可能的。我尝试使用 MonoGram 的 AMR dshow 解码器，但它并没有解决问题。当我试图在 MonoGram graph studio 中查看图表时，它并没有向我显示 win7 是如何播放视频的图表。在此视频剪辑的情况下，似乎它不使用 dshow 过滤器/解码器。所以问题是：它如何播放剪辑以及如何扩展默认操作系统功能以使我的剪辑可播放。

# jquery - 不透明度的过渡需要预先设置的显示块

> ID：11812677
> 
> 赞同：1
> 
> 时间：2012-08-04T23:13:05.030
> 
> 标签：jquery, css

我已经和这个斗争了一段时间了。我已经声明了以下样式。

```
div.contentItem{
  -webkit-transition: opacity 1.0s ease;
  display: block; // this line will be discussed below
}

div.contentItemHidden{
  opacity: 0;
}

div.contentItemVisible{
  opacity: 1;
} 
```

**除了**一个小问题外，它按预期工作。具有内容的不同 div 显示在彼此**下方。**由于样式 contentItemHidden 中的不透明度设置为 0，因此无法真正看到其他 div，但它们仍然占据空间。

现在，我知道你不由自主地想提出什么建议。*“使用显示：无，笨蛋！”* 在你上面讨论的那一行。但猜猜怎么了！如果我进行该更改，则不透明度过渡根本没有效果 - 屏幕上不会出现任何内容。

现在，我知道你现在会自发地说什么。*“放显示：挡住，朋友！”* 在 contentItemVisible 样式中。但猜猜怎么了！如果我进行更改，则不透明度过渡根本没有效果 - div 出现 kaboom 而不是淡入。

我很确定缺少的过渡与元素显示的事实有关：无。所以我尝试修改我的 jQuery 代码，以便在我交换类（contentItemVisible 和 contentItemHidden）之前，我像这样将 block'ification 添加到显示中。

```
$("#bzzz")
  .css("display", "block")
  .removeClass("contentItemHidden")
  .addClass("contentItemVisible"); 
```

尽管如此，这并没有达到预期的效果。如果我稍后不通过*.css("display", "none")*删除它，我会得到奇怪的位置（因为元素占用空间，即使它们看不到）。如果我确实删除了它，我们将不会获得不透明度的过渡。

我究竟做错了什么？我能做什么呢？

可以在[这里](http://jsfiddle.net/Chamster/gysvU/4/)看到我想要实现的工作的 jsFiddle （当然，接受我想从不可见的 DIV 开始）。通过将 div.contentItem 的样式更改为无，不透明度的过渡无效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T00:58:01.817

你可以尝试这样的事情：

```
div.contentItem {
 -webkit-transition: opacity 1.0s ease; 
 opacity: 0;
 height: 0;
 width: auto;
 margin: 0;
 padding: 0;
}

div.contentItemVisible {
 opacity: 1;
 width: auto;
 height: auto;
}​ 
```

我从你上面的帖子中收集到的是你并不真的需要这`contentItemHidden`门课。只需将默认设置`opacity`为**0**并在您的班级中将其切换为**1 。**`contentItemVisible`还要使元素具有`height: 0px`（并为填充和边距添加相同的值），以便在隐藏时不会占用任何空间。当然`contentItemHidden`，如果您愿意，您可以将所有这些属性移至并切换它们`contentItemVisible`。

这是上面的示例[jsFiddle](http://jsfiddle.net/LWubb/ "jsFiddle")。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T16:27:15.050

我们在这里有很多很好的建议，但在结论中，我不相信我在其他地方收到的关于使用 CSS 过渡解决情况的提示是好的。我在 JS 中使用过`.fadeIn()`和`.fadeOut()`，这使它工作。不过，这里有一些有价值的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T23:18:14.653

你**可以**使用 CSS `display: none`，你只需要使用`$('#bzzz').show()`and`$('#bzzz').hide()`而不是`.addClass()`and `.removeClass()`。希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-06T14:03:46.300

我在幻灯片中遇到了类似的问题。我终于不得不在添加类和`display: block`.

```
$(item).show();
window.setTimeout(function(){
    $(item).addClass('active');
}, 100); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-06T20:09:07.490

这完全可以通过 CSS 过渡实现。您需要在动画完成后设置 display:none 并在动画开始之前应用 display:block 。

CSS：

```
div.contentItem{
  -webkit-transition: opacity 1.0s ease;
  display: block; // you don't need this. div is display:block by default
}

div.contentItemHidden{
  opacity: 0;
}

// you don't need this class. div will be opacity:1 by default
div.contentItemVisible{
  opacity: 1;
} 
```

JS：

```
// ex. usage
var bzzz = $('#bzzz');
hideItem(bzzz);
showItem(bzzz);

// how we do it
function hideItem(element){
    // listen for fadeout finish
    element.on('webkitTransitionEnd',function(){
        // when it's finished call function to hide the element and remove listener
        removeDisplay(element)
    });
    // start hide css transition
    element.addClass('contentItemHidden');
}

function showItem(element){
    // set to block (item will still have 0 opacity)
    element.css('display', 'block');
    setTimeout(function(){
        element.removeClass('contentItemHidden');
    },0); // setTimeout is used so display:block is executed before starting the transition
}

function removeDisplay(element){
    bzzz.off('webkitTransitionEnd',removeDisplay);
    bzzz.css('display','none');
} 
```

# iis - 如何限制对我的游戏客户端源的访问

> ID：11812685
> 
> 赞同：0
> 
> 时间：2012-08-04T23:14:52.293
> 
> 标签：iis, iis-7, web

您好，我运行一个 Flash 游戏网站，当人们继续玩游戏时，如果用户按 Control +U，他们会加载进入游戏的客户端，它会显示我网站的链接和文件的来源！我安装了 cloudflare 来隐藏我的服务器 ip，但是如果我在名为 Variables 的页面中隐藏服务器 ip，他们可以通过查看源代码来访问它，并且变量是我游戏的 SWF，所以我不能阻止 swfs 访问人们，否则游戏不会加载正确！我需要停止从外部访问这些页面以了解我的服务器 IP。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T23:20:06.693

Ctrl + U 仅显示网页的来源（HTML、JavaScript 和 CSS 等）。SWF 文件不是人类可读的，因此您的源代码是安全的。

使用 Notepad++ 或类似工具打开您的 SWF 之一。你会看到这样的东西：

![SWF 文件内脏](../Images/b5886a754bfde7bb8aedf7e76a3d200a.png)

虽然，我认为有一些方法可以对编译文件进行反编译或逆向工程，但这适用于每种语言。

# android - Android API 8 , 10 ContactsContract.Data.HAS_PHONE_NUMBER 没有这样的列

> ID：11812686
> 
> 赞同：4
> 
> 时间：2012-08-04T23:14:57.857
> 
> 标签：android, android-emulator, android-contacts, contactscontract, android-sqlite

以下查询在我的设备（API 15）上运行良好。它在我运行 API 8 或 API 10 的模拟器中不起作用。

这是查询：

```
Cursor contactsCur = getContentResolver().query(
  ContactsContract.Data.CONTENT_URI,
  new String[] { ContactsContract.Data._ID,
    ContactsContract.Data.CONTACT_ID,
    ContactsContract.Data.DISPLAY_NAME,
    ContactsContract.CommonDataKinds.Organization.COMPANY,
    ContactsContract.CommonDataKinds.Phone.TYPE,
    ContactsContract.Data.LOOKUP_KEY,
    ContactsContract.CommonDataKinds.Phone.NUMBER,
    Contacts.Data.MIMETYPE,
    ContactsContract.CommonDataKinds.Phone.MIMETYPE,
    ContactsContract.CommonDataKinds.StructuredPostal.CITY,
    ContactsContract.CommonDataKinds.StructuredPostal.STREET,
    ContactsContract.CommonDataKinds.StructuredPostal.REGION,
    ContactsContract.CommonDataKinds.StructuredPostal.POSTCODE},
  ContactsContract.Data.HAS_PHONE_NUMBER + " >? ",
  new String[] { "0" },
  ContactsContract.Data.DISPLAY_NAME + " COLLATE NOCASE ASC"); 
```

这是它抛出的异常： `android.database.sqlite.SQLiteException: no such column: has_phone_number: , while compiling: SELECT _id, contact_id, display_name, data1, data2, lookup, data1, mimetype, mimetype, data7, data4, data8, data9 FROM view_data_restricted data WHERE (1) AND (has_phone_number >? ) ORDER BY display_name COLLATE NOCASE ASC`

奇怪的是，以下代码也不起作用：

```
Cursor contactsCur = getContentResolver().query(
    ContactsContract.CommonDataKinds.Phone.CONTENT_URI,
    new String[] { ContactsContract.CommonDataKinds.Phone.HAS_PHONE_NUMBER},
    ContactsContract.CommonDataKinds.Phone.HAS_PHONE_NUMBER + " >? ",
    new String[] { "0" },
    null); 
```

它产生：`java.lang.IllegalArgumentException: Invalid column has_phone_number`

[http://developer.android.com/reference/android/provider/ContactsContract.CommonDataKinds.Phone.html](http://developer.android.com/reference/android/provider/ContactsContract.CommonDataKinds.Phone.html)声明可以`ContactsContract.CommonDataKinds.Phone`访问`HAS_PHONE_NUMBER`From 接口 android.provider.ContactsContract.ContactsColumns

更奇怪的是，这个查询有效：

```
Cursor contactsCur = getContentResolver().query(
    ContactsContract.Data.CONTENT_URI,
    new String[] { ContactsContract.Data.LOOKUP_KEY},
    null,
    null,
    null); 
```

但是这个没有：

```
Cursor contactsCur = getContentResolver().query(
    ContactsContract.Data.CONTENT_URI,
    new String[] { ContactsContract.Data.HAS_PHONE_NUMBER},
    null,
    null,
    null); 
```

`ContactsContract.Data.LOOKUP_KEY`来自与`ContactsContract.Data.HAS_PHONE_NUMBER`!相同的隐式连接

我哪里错了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-21T18:08:20.893

您遇到的主要问题是`ContactsContract.CommonDataKinds.Phone.CONTENT_URI` **自动**过滤`has_phone_number=1`. `Phone.CONTENT_URI` *所以*你可以保证所有出来的东西都有一个电话号码。`Phone.TYPE`然后，您可以通过检查是否是其中之一`Phone.TYPE_MOBILE`或`Phone.TYPE_WORK_MOBILE`（例如）如果您想限制它拥有的电话号码类型，可以进一步过滤。

* * *

供参考（请注意URI`has_phone_number`中不存在）：`data/phones`

```
Columns for content://com.android.contacts/contacts:
- times_contacted
- contact_status
- custom_ringtone
- has_phone_number
- phonetic_name
- phonetic_name_style
- contact_status_label
- lookup
- contact_status_icon
- last_time_contacted
- display_name
- sort_key_alt
- in_visible_group
- _id
- starred
- sort_key
- display_name_alt
- contact_presence
- display_name_source
- contact_status_res_package
- contact_status_ts
- photo_id
- send_to_voicemail 
```

和：

```
Columns for content://com.android.contacts/data/phones:
- data_version
- phonetic_name
- phonetic_name_style
- contact_id
- lookup
- data12
- data11
- data10
- mimetype
- data15
- data14
- data13
- display_name_source
- data_sync1
- data_sync3
- data_sync2
- data_sync4
- account_type
- custom_ringtone
- status
- data1
- data4
- data5
- data2
- data3
- data8
- data9
- group_sourceid
- data6
- account_name
- data7
- display_name
- in_visible_group
- display_name_alt
- contact_status_res_package
- is_primary
- contact_status_ts
- raw_contact_id
- times_contacted
- contact_status
- status_res_package
- status_icon
- contact_status_icon
- mode
- version
- last_time_contacted
- res_package
- _id
- name_verified
- status_ts
- dirty
- is_super_primary
- photo_id
- send_to_voicemail
- name_raw_contact_id
- contact_status_label
- status_label
- sort_key_alt
- starred
- sort_key
- contact_presence
- sourceid 
```

# c++ - 为什么 int 数组在 C++ 中未初始化为零？

> ID：11812687
> 
> 赞同：4
> 
> 时间：2012-08-04T23:15:12.863
> 
> 标签：c++, arrays, initialization

我有一个 C++ 中的基本程序，它列出了给定数量的素数。完成工作的类如下 - 我的问题是，当“数量”的输入为 10（特别是 10 - 它适用于我尝试过的所有其他数字）时，下面生成的数组未初始化为一个零数组。因此，“数组的最后一个元素为空”返回 false，我的代码无法正常运行。

我不知道我是否误解了，但是 int 数组不应该初始化为零吗？如果不是，整数 10 有什么特别之处导致它初始化为奇怪的值？

```
int* primecalc(int amount) {

int* primes = new (nothrow) int [amount];

//Throw an error if we can't allocated enough memory for the array.
if (primes==0) {
cout<< "Error allocating memory.";
return 0;
}

//Otherwise, start iterating through the numbers.
else {
primes[0] = 2;
primes[1] = 3;

int p = 2;

for (int i=4;primes[amount]==0;i++) {
int j = 0;
int k = 0;

    while ((primes[j]<=floor(i/2)) && !(primes[j]==0) && (k==0)) {

        if ((i % primes[j]) == 0) {
        k=1;
        } 
    j++;
    } //end the while loop

if (k==0) {
        primes[p] = i;
        p++;

}

} //end the for loop

} //end the "else" part (this was only necessary in case memory could not be allocated)

return primes;
} 
```

我也尝试不使用（nothrow），结果相同。提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-04T23:19:10.817

`int* primes = new (nothrow) int[amount];`正在使用*default-initialization*，对于标量来说，它`int`是一个 noop （即不执行实际初始化）。

如果要显式初始化，请改用*值初始化*：

```
int* primes = new (nothrow) int[amount](); 
```

* * *

来自 C++11 标准，§8.5/6：

> *默认初始化*类型的对象`T`意味着：
> 
> *   如果`T`是（可能是 cv 限定的）类类型，则调用 T 的默认构造函数（如果 T 没有可访问的默认构造函数，则初始化是非良构的）；
> *   **如果`T`是数组类型，每个元素都是默认初始化的**；
> *   **否则，不执行初始化**。
> 
> 如果程序要求对 const 限定类型的对象进行默认初始化`T`，`T`则应是具有用户提供的默认构造函数的类类型。

§8.5/7：

> 对类型对象进行*值初始化*`T`意味着：
> 
> *   if`T`是具有用户提供的构造函数的（可能是 cv 限定的）类类型，`T`则调用 for 的默认构造函数（如果 T 没有可访问的默认构造函数，则初始化格式错误）；
> *   if`T`是没有用户提供的构造函数的（可能是 cv 限定的）非联合类类型，则该对象被零初始化，并且如果`T`' 的隐式声明的默认构造函数不平凡，则调用该构造函数。
> *   **如果`T`是数组类型，则每个元素都是值初始化的**；
> *   **否则，对象是零初始化的**。
> 
> 一个被值初始化的对象被认为是被构造的，因此受制于适用于“构造的”对象、“构造函数已完成的对象”等的本国际标准的规定，即使没有为对象的构造函数调用构造函数。初始化。

§8.5/6：

> 对类型的对象或引用进行*零初始化*`T`意味着：
> 
> *   **如果`T`是标量类型，则将对象设置为值`0`（零），作为整数常量表达式，转换为`T`**；
> *   如果`T`是（可能是 cv 限定的）非联合类类型，则每个非静态数据成员和每个基类子对象都被初始化为零并且填充被初始化为零位；
> *   如果`T`是（可能是 cv 限定的）联合类型，则对象的第一个非静态命名数据成员初始化为零，填充初始化为零位；
> *   **如果`T`是数组类型，则每个元素都初始化为零**；
> *   如果`T`是引用类型，则不执行初始化。

最后从 §8.5/10 开始：

> **初始化器是一组空括号的对象，即 ，`()`应进行值初始化。**

（所有的重点都是我的。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-04T23:17:45.147

这样做只是为了提高效率。并非在所有情况下，数组都必须预先填充一个值，因此 C++ 默认情况下不会这样做。

如果你使用`std::vector<int>`而不是普通数组（我建议你这样做），你有一个构造函数来设置一个可以为 0 的初始值：

```
std::vector<int> v(10,0);  // 10 elements with 0 
```

# python - 是否有一个能够在 128mb 内存上正常运行的 python 网络框架？

> ID：11812690
> 
> 赞同：2
> 
> 时间：2012-08-04T23:15:29.297
> 
> 标签：python, linux, webserver, web-frameworks, vps

我有一个小而简单的项目，没有数据库交互，除了小型 linux VPS (vServer) 128MB RAM 机器外，我没有可用资源。感觉冒险我想尝试在python中实现这个项目。

有可能吗？如果是这样，我必须选择什么设置（网络服务器、框架等）？

我正在从文件系统读取文件并以漂亮的方式显示它们的内容。文件和一些类似的东西之间也存在差异......用户没有上传文件，所有文本文件都是预制的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T23:17:28.557

我会选择像[瓶子](http://bottlepy.org/docs/dev/)或[烧瓶](http://flask.pocoo.org/)这样的微型框架。

编辑：如果您正在寻找光线，您可能不想使用 django。Django 是一个全栈框架，如果您不需要数据库交互，我会认真研究上述 CherryPy 或 web.py 之一。

老实说，我认为你应该和[瓶子](http://bottlepy.org/docs/dev/)一起去。它是一个单一的文件，它的内存使用率[非常低](http://nuald.blogspot.com/2011/08/web-application-framework-comparison-by.html)。

这将允许您安装 python 和瓶子，并且您可以轻松地读取这些文件并轻松地使用瓶子提供内容，并且内存使用率非常低。

就像我之前所说的 web.py，CherryPy、Flask 也是不错的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T01:19:15.140

不直接回答您的问题，但如果您没有数据库交互，为什么要使用 Python？我想我更愿意为在客户端上完成昂贵工作的站点提供服务（因为您资源受限），即使用轻量级 Web 服务器和简洁的 Javscript 框架。有很多，我喜欢[angular.js](http://angularjs.org/)。

# android - 不确定如何在 2 列中动态添加复选框

> ID：11812691
> 
> 赞同：1
> 
> 时间：2012-08-04T23:15:42.123
> 
> 标签：android, checkbox, multiple-columns

我正在尝试将数据库中的信息显示为复选框。现在它工作正常，但在屏幕上放置了一列复选框。我想要做的是把它分成2。

**现在做什么：**
item1
item2
item3
item4
item5

**我想要什么：**
item1 item2
item3 item4
item5

最好是新的 2 列列表大小均匀，每个占屏幕的 50%，即使分配的文本长度不同。

我搜索了很多，并尝试了 3 种不同的东西。还没有找到任何有效的东西。下面是我的代码（创建一列）。

```
private void listStudents()
{    
    st = (LinearLayout)findViewById(R.id.studTable);
    ml = (RelativeLayout)findViewById(R.id.main);

    ArrayList<ArrayList<String>> studentlst = new ArrayList<ArrayList<String>>();
    studentlst = db.getAllStudentsRowsAsArrays();
    final int sllen = studentlst.size();
    final String student[][] = new String[sllen][3];

    CheckBox cb[] = new CheckBox[sllen];
    TextView pemail[] = new TextView[sllen];
    int num = st.getChildCount();
    if(num != 0) st.removeAllViews();
    String tsl = sllen + "";
    nos.setText(tsl);
    for(int x=0; x < sllen; x++)
    {
        /************************
         *   student[x][case]   *
         *     case options     *
         *        0 = id        *
         *       1 = name       *
         *       2 = email      *
         ************************/
        String curstudent = studentlst.get(x).toString();
        student[x][0] = curstudent.substring(1,curstudent.indexOf(","));
        student[x][1] = curstudent.substring(curstudent.indexOf(" ")+1,curstudent.lastIndexOf(","));
        student[x][2] = curstudent.substring(curstudent.lastIndexOf(" ")+1, curstudent.length() - 1);
    } 
    Arrays.sort(student, new Comparator<String[]>() { 
        @Override 
        public int compare(String[] entry1, String[] entry2) { 
            String name1 = entry1[1]; 
            String name2 = entry2[1]; 
            return name1.compareTo(name2); 
        } 
    });     
    for(int x=0;x<sllen;x++)
    {
      cb[x] = new CheckBox(this);
      cb[x].setId(x+100);
      cb[x].setText(student[x][1]);
      pemail[x] = new TextView(this);
      pemail[x].setText(student[x][2]);
      pemail[x].setId(x+1000);
      pemail[x].setVisibility(View.INVISIBLE);
        st.addView(cb[x],x);
        ml.addView(pemail[x],x);
    }
} 
```

XML 文件

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/main"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<TextView
    android:id="@+id/lblmainselclass"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginLeft="82dp"
    android:layout_marginTop="7dp"
    android:text="@string/lblmainselectclass" />

<Spinner
    android:id="@+id/mainclassspinner"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_toRightOf="@+id/lblmainselclass" />

<ScrollView
    android:id="@+id/scrollView1"
    android:layout_width="wrap_content"
    android:layout_height="250dp"
    android:layout_below="@+id/lblmainselstudents"
    android:layout_centerHorizontal="true" >

    <LinearLayout
        android:id="@+id/studTable"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="vertical" >
    </LinearLayout>
</ScrollView>

<TextView
    android:id="@+id/lblmainselstudents"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/mainclassspinner"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="5dp"
    android:text="@string/lblselectstud" />

<Button
    android:id="@+id/btnsend"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_centerHorizontal="true"
    android:text="@string/btnlblsend" />

<Spinner
    android:id="@+id/mainresponsespinner"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/btnsend"
    android:layout_centerHorizontal="true"
    android:layout_marginBottom="30dp" />

<TextView
    android:id="@+id/mainnumofstudents"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:text="@string/invis"
    android:visibility="invisible" />

<TextView
    android:id="@+id/classselected"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:text="@string/invis"
    android:visibility="invisible" />

<TextView
    android:id="@+id/responseselected"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:text="@string/invis"
    android:visibility="invisible" />

<TextView
    android:id="@+id/numchecked"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:text="@string/invis"
    android:visibility="invisible" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-10T13:19:31.413

老问题，但我发现自己在这里，所以我会继续回答它。有几种方法，但我是这样做的。

首先，获取您的数据并填充复选框的 ArrayList：

```
ArrayList<CheckBox> checkboxes = new ArrayList<CheckBox>();
for (String s : dataArray) {
    CheckBox cBox = new CheckBox(myContext); //or inflate it from xml if you have a defined style
    cBox.setText(s);
    checkboxes.add(cBox);
} 
```

然后创建一个扩展 BaseAdapter 的类以及一个支持的静态类。假设您的 CheckBox ArrayList 是一个实例变量，我们会将数据绑定到适配器。如果没有，您可以通过这种方式在 BaseAdapter 类访问复选框中创建一个构造函数。

```
private class CheckboxGridAdapter extends BaseAdapter {
    @Override
    public int getCount() {
        return checkboxes.size();
    }

    @Override
    public Object getItem(int pos) {
        return checkboxes.get(pos);
    }

    @Override
    public long getItemId(int pos) {
        return 0;
    }

    @Override
    public View getView(int pos, View convertView, ViewGroup parent) {
        final ViewPlaceHolder holder;
        final CheckBox item = (CheckBox) getItem(pos);

        if (convertView == null) {
        holder = new ViewPlaceHolder();
        holder.cb = (CheckBox) item;
        convertView = holder.cb;

        convertView.setTag(holder);
        } else {
        holder = (ViewPlaceHolder) convertView.getTag();
        }

        return convertView;
    }
}

static class ViewPlaceHolder {
    CheckBox cb;
} 
```

最后，回到您创建复选框的 ArrayList 的位置，创建一个 GridView（以编程方式或通过扩展 xml 资源），然后附加 BaseAdapter。不要忘记设置列数，毕竟这是这篇文章的重点。

```
GridView grid = new GridView(myContext);
grid.setNumColumns(2);
grid.setAdapter(new CheckboxGridAdapter()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T23:58:06.530

如果您有很多条目，您应该使用自定义[ListView](http://developer.android.com/reference/android/widget/ListView.html)和[BaseAdapter来提高效率。](http://developer.android.com/reference/android/widget/BaseAdapter.html)

您可以在 SDK ApiDemos (android-sdk/samples/android-x/ApiDemos) 中找到很好的示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T02:43:28.403

您应该使用[GridView](http://developer.android.com/guide/topics/ui/layout/gridview.html)而不是 ScrollView。这样您就可以动态创建您的项目并拥有两个（或更多列）

# jquery - jQuery：为 Django 设置 CSRF 令牌不起作用

> ID：11812694
> 
> 赞同：2
> 
> 时间：2012-08-04T23:16:04.797
> 
> 标签：jquery, django, csrf

我的`jQuery`功能看起来像

```
$(function() {
    // activate "New" buttons if input is not empty
    $('form input[type="text"]').live('keyup', function() {
        var val = $.trim(this.value);
        $(this).next("button").prop('disabled', val.length === 0);
    });

    $("body").on("submit","form",function(e){
        // do not submit the form
        e.preventDefault();

        // handle everything yourself
        var $form = $(this);
        var title = $form.closest('.video-detail').find('.title').text();
        var entryTitle = $form.find('.input-small').val();
        console.debug(title);
        console.debug(entryTitle);  

        $.ajaxSetup({ 
             beforeSend: function(xhr, settings) {
                 function getCookie(name) {
                     var cookieValue = null;
                     if (document.cookie && document.cookie != '') {
                         var cookies = document.cookie.split(';');
                         for (var i = 0; i < cookies.length; i++) {
                             var cookie = jQuery.trim(cookies[i]);
                             // Does this cookie string begin with the name we want?
                         if (cookie.substring(0, name.length + 1) == (name + '=')) {
                             cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                             break;
                         }
                     }
                 }
                 return cookieValue;
                 }
                 if (!(/^http:.*/.test(settings.url) || /^https:.*/.test(settings.url))) {
                     // Only send the token to relative URLs i.e. locally.
                     xhr.setRequestHeader("X-CSRFToken", getCookie('csrftoken'));
                 }
             } 
        }); 

        // send the data to the server using .ajax() or .post()
        $.ajax({
            type: 'POST',
            url: 'addVideo',
            data: {
                video_title: title,
                csrfmiddlewaretoken: '{{ csrf_token }}'
                },
        }).done(function(){
            alert('done');
        });
    });
}); 
```

这是基于答案[Django CSRF 检查失败并出现 Ajax POST 请求](https://stackoverflow.com/questions/5100539/django-csrf-check-failing-with-an-ajax-post-request)

我的`html`样子

```
<form class="new-playlist form-inline" onclick="event.stopPropagation()">{% csrf_token %}
    <input type="text" class="input-small">
    <button class="btn btn-danger create-playlist-button" type="submit" disabled="disabled">New</button>
</form> 
```

当我在 Firefox 中调试代码时，我看到 post 值为

```
csrfmiddlewaretoken {{ csrf_token }}
video_title The Who - Who Are You? 
```

如何填充该`{{ csrf_token }}`值？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-07-10T01:43:00.320

就我而言，我有一个模板，我不想在其中包含`<form></form>`元素。但我仍然想使用 jQuery 发出 AJAX POST 请求。

由于 CSRF cookie 为空，我得到了 403 错误，即使我遵循了 django 文档（[https://docs.djangoproject.com/en/1.5/ref/contrib/csrf/](https://docs.djangoproject.com/en/1.5/ref/contrib/csrf/)）。解决方案在同一页面中，提到了`ensure_csrf_cookie`装饰器。

当我在我的顶部添加这个时，我的 CSRF cookie 确实被设置了`views.py`：

```
from django.views.decorators.csrf import ensure_csrf_cookie
@ensure_csrf_cookie 
```

另外，请注意，在这种情况下，您的标记/模板中*不需要DOM 元素：*`{% csrf_token %}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T23:25:09.333

`<input type="hidden" name="csrfmiddlewaretoken" value="SOME_TOKEN">`

以上是django输出的标记。您想获取 SOME_TOKEN 的值。您将无法使用与 javascript 混合的 django 模板引擎来获取它，因为它已经被渲染到隐藏的输入中。

我会将我的内容包装`{{ csrf_token }}`在一个 span/div 中，然后使用 jquery 来定位该 span/div 并获取 span/div内的输入[值](http://api.jquery.com/val/)。

# .net - 如何仅为当前用户注册类型库？

> ID：11812697
> 
> 赞同：3
> 
> 时间：2012-08-04T23:16:33.893
> 
> 标签：.net, deployment, com, registration, typelib

我有一个名为 的类型库`MyCOMAddin.tlb`，我使用它`tlbexp.exe`从`MyCOMAdd.dll`. 这是一个用 C# 编写的 .NET COM 公开类。此 dll 在每个用户级别注册。

问题是

*   有什么方法我也可以`MyCOMAddin.tlb`只注册当前用户吗？

我试过`regtlibv12.exe`了，但它为所有用户注册。这很不方便，因为如果任何用户在机器上卸载插件，在后期绑定中仍然可以访问 dll 的其他用户将无法再访问类型库。

我正在使用 Inno setup 来部署加载项，因此我可以直接在注册表中写入密钥。但我不知道哪些键以及在哪里写它们。

我希望`regtlibv12.exe`有一个`/peruser`选择。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T16:05:45.827

这并非不可能，但您当然会遇到一些并发症。首先，仅在本地注册类型库是不够的，您还需要在本地注册 CLSID，否则仍然无法正常工作。Regasm.exe 完成的工作。与其运行regtlib，不如使用它的/tlb 命令行选项（没有文件）。请注意，任何使用类型库的编程工具都可能需要一些额外的注册表项才能将库识别为组件，例如，“Control”键很常见。

专业安装人员在安装时不依赖 Regasm 或 Regtlib 等工具编写密钥，他们自己编写密钥。当然，这需要知道这些键是什么。一种方法是观察使用 SysInternals 的 ProcMon 实用程序编写密钥的安装工具。尽管它往往会产生大量信息。您会在[WiX 项目](http://wix.codeplex.com/releases/view/60102)中找到一个专用工具，Heat.exe 是“收获”工具。修改您发现的所有内容，从使用 HKCR 或 HKLM 改为使用 HKCU。HKCR 映射到 HKCU\Software\Classes。可能为 64 位操作系统添加了 Wow6432Node。

并确保您确实*需要*注册类型库。仅当您在另一个编程环境中使用该组件时才需要。以及使用在 STA 线程上创建的对象并从另一个线程调用它的极端情况，标准编组器使用类型库来编组跨单元的调用。并且不要忘记带有清单的无注册 COM，因此根本不需要修改注册表。目前尚不清楚这是否适用于此。

# silverlight - 无法在 scrollviewer 内滚动

> ID：11812703
> 
> 赞同：1
> 
> 时间：2012-08-04T23:17:22.633
> 
> 标签：silverlight, xaml, scrollview, scrollviewer

当我添加标题面板时，我失去了滚动的能力。请帮我恢复它。

```
 <StackPanel>

            <Grid  HorizontalAlignment="Left">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            <TextBlock .../>
            <TextBlock ... >
            </TextBlock>
        </Grid>
            <ScrollViewer  Grid.Row="1" x:Name="_ScrollViewer">
            <StackPanel  ScrollViewer.VerticalScrollBarVisibility="Disabled">
                <Grid ScrollViewer.VerticalScrollBarVisibility="Disabled"> 
                        <Grid.RowDefinitions>
                            <RowDefinition Height="auto" />
                            <RowDefinition Height="auto" />
                        </Grid.RowDefinitions>
                        <ListBox x:Name="listmy"
                                 Grid.Row="0" ScrollViewer.VerticalScrollBarVisibility="Disabled"
                                 >
                            <ListBox.ItemTemplate>
                                <DataTemplate>
                                    <local:TypeMessage Content="{Binding}">
                                        <local:TypeMessage.Me>
                                            <DataTemplate>
                                                ...
                                            </DataTemplate>
                                        </local:TypeMessage.Me>
                                        <local:TypeMessage.Other>
                                            <DataTemplate>
                                                ...
                                            </DataTemplate>
                                        </local:TypeMessage.Other>
                                    </local:TypeMessage>
                                </DataTemplate>
                            </ListBox.ItemTemplate>
                            <ListBox.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <VirtualizingStackPanel />
                                </ItemsPanelTemplate>
                            </ListBox.ItemsPanel>
                        </ListBox>
                        <Grid Grid.Row="3" ScrollViewer.VerticalScrollBarVisibility="Disabled">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="auto" />
                                <RowDefinition Height="auto" />
                            </Grid.RowDefinitions>
                            <tbox:WatermarkTextBox
                                                   ScrollViewer.VerticalScrollBarVisibility="Disabled"
                                                   />
                        </Grid>
                    </Grid>
                </StackPanel>
</ScrollViewer>
    </StackPanel>

</phone:PhoneApplicationPage> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T09:22:21.063

问题出在堆栈面板中。

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition />
    </Grid.RowDefinitions>
    <Grid Grid.Row="0" HorizontalAlignment="Left">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <TextBlock  />
        <TextBlock  >
            <TextBlock.Foreground>
                <SolidColorBrush Color="{StaticResource PhoneContrastBackgroundColor}"/>
            </TextBlock.Foreground>
        </TextBlock>
    </Grid>
    <ScrollViewer ScrollViewer.VerticalScrollBarVisibility="Visible"  Grid.Row="1" x:Name="_ScrollViewer">
            <Grid ScrollViewer.VerticalScrollBarVisibility="Disabled"> 
                    <Grid.RowDefinitions>
                        <RowDefinition Height="auto" />
                        <RowDefinition Height="auto" />
                    </Grid.RowDefinitions>
                <ListBox x:Name="listmy" ScrollViewer.VerticalScrollBarVisibility="Disabled"
                             Grid.Row="0">
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <local:TypeMessage Content="{Binding}">
                                    <local:TypeMessage.Me>
                                     ...
                                    </local:TypeMessage.Me>
                                    <local:TypeMessage.Other>
                                    ...
                                    </local:TypeMessage.Other>
                                </local:TypeMessage>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                        <ListBox.ItemsPanel>
                            <ItemsPanelTemplate>
                                <VirtualizingStackPanel />
                            </ItemsPanelTemplate>
                        </ListBox.ItemsPanel>
                    </ListBox>
                <StackPanel Grid.Row="1" ScrollViewer.VerticalScrollBarVisibility="Disabled">
                    <tbox:WatermarkTextBox />
                </StackPanel>
            </Grid> 
```

# android - Android 包括 XML 文件 = 放置它们的位置

> ID：11812707
> 
> 赞同：1
> 
> 时间：2012-08-04T23:17:52.893
> 
> 标签：android, xml, resources

我正在开发一个需要引用多个 XML 文件中的数据的应用程序。该应用程序需要很多 (~40) 个 XML 文件。

该文件的名称类似于“AbnormalFlags-v1.0.xml”，我目前将它们放在

> res/raw/v2/AbnormalFlags-v1.0.xml res/raw/v2/ActualDeliveryPlace-v1.0.xml res/raw/v2/AddressType-v1.0.xml ... ...

几个问题

*   这是找到这些文件的最佳位置吗？
*   文件名似乎有问题，会导致问题吗
*   因为我必须动态确定要使用的文件，所以我使用：

    `xmlFile = getApplicationContext().getResources().getIdentifier(xmlFileId,"raw","com.apps4health.refpack");`

这找不到资源文件，我哪里出错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T23:47:57.367

鉴于文件名的格式，我建议您将它们保存在`assets`文件夹中。`assets`在文件夹内创建一个名为的`res`文件夹并将 XML 文件放在那里。

下面的代码显示了如何打开目录中的`assets`文件：

```
InputStream is = null;
try {
   AssetManager am = getApplicationContext().getAssets();
   is = am.open("AbnormalFlags-v1.0.xml");
   // Process the XML file from "is"...
}catch( IOException e ) { 
   // Handle exception
} 
```

[AssetManager](http://developer.android.com/reference/android/content/res/AssetManager.html)负责打开文件夹中保存的`res/assets`文件。您只需调用将`open()`文件名作为参数传递的方法。

# c# - 如何将复杂对象从jquery传递到标签中的动作控制器

> ID：11812711
> 
> 赞同：1
> 
> 时间：2012-08-04T23:18:22.980
> 
> 标签：c#, javascript, jquery, asp.net-mvc-3, controller

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T23:31:03.083

您可以做的是提出`HTTP POST`请求而不是`HTTP GET`.

```
$('#postLink').click(function() {
    var MyPerson = {
        ID: 1234,
        FirstName: 'abc',
        LastName: 'def'
    };

    $.ajax({
        data: MyPerson,
        url: $(this).attr('href'),
        type: 'POST',
        dataType: 'json' /* this really is optional */,
        success: function (response) {
            return true;
        },
        error: function ( error ) {
            return false;
        }
    )};

    return false; /* required to stop event propagation */
}); 
```

现在你可以像这样定义一个 HTML`<a>`元素：

```
<a href="/test/Index" id="postLink">Ajax post the person to the server.</a> 
```

您的控制器现在应该能够解析该`Person`对象。

**编辑**`List<Person>`：如果您没有在每个请求中传递它，您可能想要删除它。它将帮助 ASP.NET 将复杂类型（`Person`在本例中）识别为请求的数据类型。通常最好为您的每个视图创建 ViewModel，这样您的视图就有一个强类型的数据上下文。

```
class PersonViewModel
{
    public int ID { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T23:20:21.853

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T23:23:38.850

查询字符串接受参数而不是您拥有的对象类型，因此您必须将其作为带分隔符的查询字符串传递 &

例子 ：

```
var html = "<a href='/test/Index/person?PersonId=123456789&FirtsName=Test...... 
```

# c# - 为什么 GetThumbnailImage 会创建模糊的图像

> ID：11812712
> 
> 赞同：1
> 
> 时间：2012-08-04T23:18:29.460
> 
> 标签：c#, winforms

我正在创建图像的缩略图。我以两种方式实现了缩略图显示

1 - 给定一张图片，使用上述方法创建一个新的缩略图。

2 - 给定图像，获取尺寸，计算调整后的尺寸，然后将其设置为 PictureBox 的尺寸。PictureBox 设置为自动缩放模式，因此它将图像缩小到 1/4。

两种方法都会生成输入图像原始大小的 1/4 的缩略图（仅显示，我不担心保存或使用图像），但第二种方法会产生更清晰的缩略图，尽管我猜它会使用更多记忆，因为我不认为缩放控件实际上会影响图像。

为什么使用时生成的缩略图非常模糊`GetThumbnailImage`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T23:23:09.363

[请参阅文档](http://msdn.microsoft.com/en-us/library/system.drawing.image.getthumbnailimage.aspx)中的备注：

> 如果[Image](http://msdn.microsoft.com/en-us/library/system.drawing.image.aspx)包含嵌入的缩略图图像，则此方法检索嵌入的缩略图并将其缩放到请求的大小。如果[Image](http://msdn.microsoft.com/en-us/library/system.drawing.image.aspx)不包含嵌入的缩略图图像，则此方法通过缩放主图像来创建缩略图图像。
> 
> 当请求的缩略图图像的大小约为 120 x 120 像素时，**GetThumbnailImage方法工作得很好。**如果您从具有嵌入式缩略图的图像中请求较大的缩略图图像（例如，300 x 300），则缩略图图像的质量可能会明显[下降](http://msdn.microsoft.com/en-us/library/system.drawing.image.aspx)。通过调用[DrawImage](http://msdn.microsoft.com/en-us/library/system.drawing.graphics.drawimage.aspx)方法来缩放主图像（而不是缩放嵌入的缩略图）可能会更好。

因此，您可能会获得放大的嵌入式缩略图。

# c# - 插入 SELECT DISTINCT 和另一个字段？

> ID：11812719
> 
> 赞同：1
> 
> 时间：2012-08-04T23:19:10.937
> 
> 标签：c#, .net-4.0, sqlite

我有一个产品表，每个产品都有一个类别字段*（这不是我要更改的，我需要从中读取数据）*，我想从产品表中更新一个仅包含唯一类别的类别表（我也使用 a`IFNULL`来处理空类别），这是我目前所拥有的：

```
string query = "INSERT INTO categories (name) 
                    SELECT DISTINCT(IFNULL(category, \"Uncategorized\")) AS category_name
                    FROM products 
                        WHERE NOT EXISTS (
                            SELECT name FROM categories 
                                WHERE name = category_name)"; 
```

通过上面的查询，我可以使用唯一的类别字段更新类别，并且每次我需要运行它时，它只会将不存在的类别添加到表中。

但除了上述内容之外，我还需要包含一个配置文件 ID，每个类别都插入了类似这样的内容，但这是行不通的：

```
string query = "INSERT INTO categories (profile_id, name)
                    SELECT " + profileId.ToString() + ",
                        DISTINCT(IFNULL(category, \"Uncategorized\")) AS category_name
                    FROM products 
                        WHERE NOT EXISTS (
                            SELECT name FROM categories 
                                WHERE name = category_name 
                                    AND profile_id = @profileId)"; 
```

**有没有办法通过查询来完成这个？**

上面给了我一个信息：

```
SQLite error near "DISTINCT": syntax error 
```

SqliteMan 错误：

```
Query Error: near "DISTINCT": syntax error Unable to execute statement 
```

让我知道我是否还不清楚，我应该更清楚什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T23:24:08.283

您`DISTINCT`错误地使用了关键字：它不是一个函数。请尝试：

```
"INSERT INTO categories (profile_id, name)
 SELECT DISTINCT '"+profileId.ToString()+"', IFNULL(category, 'Uncategorized')
 FROM   products
 WHERE  category_name NOT IN (
          SELECT name FROM categories WHERE profile_id = "'+profileId.ToString()+"'
        )
" 
```

一个假设`profileId.ToString()`可以保证不受 SQL 注入的影响，否则您会转义它/将其作为参数传递给准备好的语句？

# haskell - 如何在具有多个变量的函数上使用绑定（>>=）

> ID：11812722
> 
> 赞同：3
> 
> 时间：2012-08-04T23:19:58.287
> 
> 标签：haskell, monads

我是haskell和函数式编程的新手。这可能是一件非常简单的事情，但我在搜索时没有找到答案。

我有这个功能主要在这里：

```
main :: IO ()
main = print =<< (`rnd_select` 6) =<< readNumbers

readNumbers :: IO [(Int,Int,Int)]
readNumbers = makeTriples . map rInt . words <$> readFile "somefile"

rInt :: String -> Int
rInt = read

makeTriples :: [a] -> [(a,a,a)]
makeTriples [] = []
makeTriples (x:y:z:zs) = (x,y,z) : makeTriples zs

rnd_select :: [a] -> Int -> IO [a]
rnd_select _  0 = return []
rnd_select [] _ = return []
rnd_select xs count = do r <- randomRIO (0, (length xs)-1)
                         rest <- rnd_select (removeAt (r+1) xs) (count-1)
                         return ((xs!!r) : rest)

removeAt :: Int -> [a] -> [a]
removeAt _ [] = []
removeAt 1 (x:xs) = xs
removeAt k (x:xs) = let r = removeAt (k - 1) xs in x:r 
```

这包含在 IO-monad 中，这就是当我想在值上使用函数时变得困难的原因。

这里我使用 bind 函数将输入应用到 rnd_select 函数：

```
(`rnd_select` 6) =<< readNumbers 
```

但为了做到这一点，我必须将它部分应用于一个值。

我认为它看起来不太好，如果函数有更多变量，我不知道该怎么做。

所以我想知道是否有更好的方法将值应用于这些函数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T00:01:08.823

除了定义函数以使省略的参数是最后一个参数之外，您还可以编写

```
foobar = baz . foo 5 17 29 . bar 
```

您可以使用 lambda 省略除最后一个以外的参数，

```
foobar = baz . (\x -> foo 5 17 x 29 41) . bar 
```

但是对于只有两个参数的情况，`flip`是一个不错的选择，

```
main = print =<< flip rnd_select 6 =<< readNumbers 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T00:02:24.103

交换`rnd_select`参数，或使用`flip rnd_select 6 =<< readNumbers`.

# php - 使用 PHP (echo) 触发 jQuery 事件？

> ID：11812724
> 
> 赞同：1
> 
> 时间：2012-08-04T23:20:12.980
> 
> 标签：php, jquery, triggers, effect

我一直在尝试通过 PHP 触发效果。基本上，当用户输入无效密码时，我想让提交按钮抖动。为此，我需要通过 PHP，并尝试在我的数据库中验证用户，如果失败，下面的代码应该会触发 jQuery 效果。

```
echo'<script>$(".shake").effect("shake", {times:2, distance:3, direction:"right"}, 45);</script>'; 
```

我知道为什么这可能不起作用，但我看不到另一种方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T23:23:16.447

为此，您需要 AJAX。客户端通过 AJAX 询问服务器密码是否正确，然后响应结果摇动按钮（或不摇动按钮）。像这样的东西：

```
$.ajax("http://www.example.com/ajax.php", {
  data: {
    username: username,
    password: password
  },
  success: function(data) {
    if (data.okay) {
      loggedIn = true;
    } else {
      $(".shake").effect("shake", {times:2, distance:3, direction:"right"}, 45);    if (data == "OK");
    }
  }
}; 
```

并在`ajax.cgi`：

```
echo "Content-Type: application/json\n\n"
$username = $_GET("username");
$password = $_GET("password");
if (authenticate($username, $password)) {
  echo "{ \"okay\": true }";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T23:25:28.327

为此，您需要使用 AJAX。

```
$('#submit').on('click', function() {
    $.ajax({
        url: "your/auth/script.php",
        type: "POST",
        success: function(result) {
            if(result !== 1) {
                $(".shake").effect("shake", {times:2, distance:3, direction:"right"}, 45);
            }
        }
    });
}); 
```

# sql - 将一些 SQL 查询转换为活动记录

> ID：11812727
> 
> 赞同：2
> 
> 时间：2012-08-04T23:20:35.277
> 
> 标签：sql, ruby-on-rails, ruby, activerecord

所以，我有这个“高级”查询（真的不多），我想把它翻译成 Ruby Active Record 的语法。

```
SELECT microposts.* 
FROM microposts
WHERE user_id IN 
      ( SELECT r.followed_id as uid 
        FROM relationships r 
        WHERE follower_id = 1 
      UNION 
        SELECT u.id as uid 
        FROM users as u 
        WHERE id = 1
      ) 
ORDER BY microposts.created_at DESC 
```

想法是检索用户 1 的所有微博，用户 1 以 desc 创建顺序跟随用户，但我真的不知道如何使用 Active Record 的语法轻松翻译。

任何想法 ？

PS：这里问的是一些rails上下文：

我有 3 个模型：`Microposts`, `Users`, `Relationships`.

*   关系是处理所有用户关系（关注者/关注者）的连接表。
*   用户通过关系有很多followed_users/followers。
*   用户有许多微箍，而微箍有一个用户。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T23:28:58.960

您的查询非常具体，因此最好的办法是使用 SQL 编写其中的大部分内容，或者尝试使用类似的 gem`squeel`来帮助从 ActiveRecord 生成非常定制的 SQL。

尽管如此，这应该可以在没有额外宝石的情况下完成工作：

```
user_id = ... #Get the user_id you want to test
Micropost.where("user_id IN 
  ( SELECT r.followed_id as uid 
    FROM relationships r 
    WHERE follower_id = ? )
  OR user_id = ?
  ", user_id, user_id).order("created_at desc") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T23:43:00.753

不了解 Ruby，但 SQL 可以简化为：

```
SELECT microposts.* 
FROM microposts
WHERE user_id IN 
      ( SELECT r.followed_id as uid 
        FROM relationships r 
        WHERE follower_id = 1 
      ) 
   OR user_id = 1
ORDER BY microposts.created_at DESC 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T23:52:35.143

我的回答将假设*（因为您在原始 SQL 查询之外没有提供 ruby​​/rails-context）*您有一个`User`模型、一个`Micropost`通过关系的模型`:microposts`和一个`Relationship`通过关系的模型`:following`。`User`有很多`Micropost`和`Relationship`实例相关的。你可以做

```
u = User.find(1)
user.microposts + user.following.microposts 
```

或者你可以把它移到一个方法中`Micropost`

```
def self.own_and_following(user)
  user.microposts + user.following.microposts      
end 
```

并调用`Micropost.own_and_following(User.find(1))`。

这可能不是您要寻找的，但鉴于上述您在 Rails 应用程序中可能存在的关系，听起来与此类似的东西应该可以工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T14:52:15.327

我设法只使用 where 来做到这一点，对我来说似乎很像 find_by_sql，我不知道哪个会更好：

```
Micropost.order('created_at DESC').
where('user_id in (select r.followed_id as uid from relationships as r where follower_id = ?) or user_id = ?', user.id, user.id) 
```

不知道这有多好，但它似乎工作。

# javascript - 复制要在模式框中显示的父元素

> ID：11812730
> 
> 赞同：0
> 
> 时间：2012-08-04T23:21:09.347
> 
> 标签：javascript, jquery

我有一个链接，我想显示一个模式对话框，其中包含标题和单击链接的父元素的副本。

```
$('#link').live('click',function(){
    container = $(this).parents(".container")[0];
    message = $("<h2>You clicked on this.</h2>" + container);
    message.find(".foo, .bar, .lorem").remove();

    console.log(message[0]);
    // code for displaying the box using message[0]
}); 
```

我还必须过滤掉容器元素的某些子元素。

然而，这（这是我在涉足一段时间后的第四次尝试`clone()`）`insertAfter()`不起作用。它只显示`<h2>`，看不到父元素的副本。

显然，在模态后面的页面上仍然可见的原始父元素不应该受到影响。

这里有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T23:27:42.867

```
$(document).on('click', '#link', function(){
    var container = $(this).closest(".container").clone(true);
        container.find(".foo, .bar, .lorem").remove();
    var message = $("<h2>You clicked on this.</h2>").add(container);

    $('#modalID').append(message);

    console.log(message);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T23:26:23.263

我建议您联系 line message =`$("<h2>You clicked on this.</h2>" + container);`因为这不是连接字符串的正确方法

像这样

```
message = "<h2>You clicked on this.</h2>" + container; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T23:27:36.323

```
message = $("<h2>You clicked on this.</h2>" + container); 
```

将是“这里有什么问题？”的答案。`container`是一个 DOM 元素，加号运算符不起作用。我猜你想做类似的事情

```
var message = $(this).closest(".container").clone(true);
message.prepend("<h2>You clicked on this.</h2>");
message.find(".foo, .bar, .lorem").remove();

// then take the message container and view it as a modal box 
```

# c - 到特定远程 IP 的第一条 UDP 消息丢失

> ID：11812731
> 
> 赞同：9
> 
> 时间：2012-08-04T23:21:10.707
> 
> 标签：c, sockets, windows-7, network-programming, udp

我正在开发一个基于 LAN 的解决方案，它的“服务器”必须控制多个“玩家” 我选择的协议是 UDP，因为它很简单，我不需要连接，我的流量不时只包含短命令我想混合使用广播消息进行同步，并使用单个目标消息进行播放器个人命令。

多播 TCP 将是一种替代方案，但它更复杂，不完全适合该任务，并且通常不受硬件的良好支持。

不幸的是，我遇到了一个奇怪的问题：

**使用“sendto”发送到特定 ip 的第一个数据报丢失。** 之后短时间发送到同一 IP 的任何数据报都会被接收。但是，如果我等待一段时间（几分钟），第一个“sendto”会再次丢失。

广播数据报总是有效的。本地发送（到同一台计算机）始终有效。

我认为操作系统或路由器/交换机有一些从 IP 到 MAC 地址的转换表，当几分钟不使用时会被遗忘，不幸的是会导致数据报丢失。我可以通过不同的路由器/交换机硬件观察到这种行为，所以我怀疑是 Windows 网络层。

我知道 UDP 从定义上讲是“不可靠的”，但我不敢相信这会发展到如此地步，即使物理连接正常并且一切都定义明确的数据包可能会丢失。那么它实际上将一文不值。

从技术上讲，我正在打开一个 UDP 套接字，将它绑定到一个端口和 INADRR_ANY。然后我使用“sendto”和“recvfrom”。我从不进行连接——我不想这样做，因为我有几个玩家。据我所知，UDP应该在没有连接的情况下工作。

我目前的解决方法是我定期向所有特定的玩家 ip 发送虚拟数据报 - 这解决了问题，但它在某种程度上“不满意”

**问题：**有人知道这个问题吗？它从何而来？我该如何解决？

编辑：

我将其归结为以下测试程序：

```
int _tmain(int argc, _TCHAR* argv[])
{
    WSADATA wsaData;
    WSAStartup(MAKEWORD(2, 2), &wsaData);
    SOCKET Sock = socket(AF_INET, SOCK_DGRAM, IPPROTO_UDP);
    SOCKADDR_IN Local = {0};
    Local.sin_family = AF_INET;
    Local.sin_addr.S_un.S_addr = htonl(INADDR_ANY);
    Local.sin_port = htons(1234);
    bind(Sock, (SOCKADDR*)&Local, sizeof(Local));
    printf("Press any key to send...\n");
    int Ret, i = 0;
    char Buf[4096];

    SOCKADDR_IN Remote = {0};
    Remote.sin_family = AF_INET;
    Remote.sin_addr.S_un.S_addr = inet_addr("192.168.1.12");  // Replace this with a valid LAN IP which is not the hosts one
    Remote.sin_port = htons(1235);

    while(true) {
        _getch();
        sprintf(Buf, "ping %d", ++i);
        printf("Multiple sending \"%s\"\n", Buf);

        // Ret = connect(Sock, (SOCKADDR*)&Remote, sizeof(Remote));
        // if (Ret == SOCKET_ERROR) printf("Connect Error!\n", Buf);
        Ret = sendto(Sock, Buf, strlen(Buf), 0, (SOCKADDR*)&Remote, sizeof(Remote));
        if (Ret != strlen(Buf)) printf("Send Error!\n", Buf);
        Ret = sendto(Sock, Buf, strlen(Buf), 0, (SOCKADDR*)&Remote, sizeof(Remote));
        if (Ret != strlen(Buf)) printf("Send Error!\n", Buf);
        Ret = sendto(Sock, Buf, strlen(Buf), 0, (SOCKADDR*)&Remote, sizeof(Remote));
        if (Ret != strlen(Buf)) printf("Send Error!\n", Buf);
        }
    return 0; 
```

该程序打开一个 UDP 套接字，并在每次击键时连续发送 3 个数据报到特定 IP。通过wireshark 运行该命令，观察您的UDP 流量，按一个键，稍等片刻，然后再次按一个键。您不需要远程 IP 上的接收器，没有区别，除了您不会收到黑色标记的“不可访问”数据包。这就是你得到的：

![Wireshark 快照](../Images/cac95444d006104519715a6b0a0e229d.png)

如您所见，第一次发送启动了对 IP 的 ARP 搜索。虽然该搜索正在等待 3 次连续发送中的前 2 次丢失。第二次击键（在 IP 搜索完成后）正确发送了 3 条消息。您现在可以重复发送消息，它会一直工作，直到您等待（大约一分钟，直到地址转换再次丢失）然后您将再次看到丢失。

**这意味着：发送 UDP 消息时没有发送缓冲区，并且有 ARP 请求待处理！除最后一条消息外，所有消息都会丢失。同样“sendto”在发送成功之前不会阻塞，并且没有错误返回！**

好吧，这让我感到惊讶，也让我有点难过，因为这意味着我必须接受我目前的解决方法，或者实现一个一次只发送一条消息然后等待回复的 ACK 系统——这并不容易更多，也意味着很多困难。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-26T09:01:41.257

我在其他人回答很久之后才发布这个，但它是直接相关的。

如果目标地址（或目标的网关）没有 ARP 条目，Winsock 会丢弃 UDP 数据包。

因此，很可能第一个 UDP 数据包的一些被丢弃，因为当时没有 ARP 条目 - 与大多数其他操作系统不同，winsock 仅在 ARP 请求完成时将 1 个数据包排队。

这记录[在这里](https://technet.microsoft.com/en-us/library/cc940021.aspx)：

> ARP 仅对指定目标地址的一个出站 IP 数据报进行排队，同时将该 IP 地址解析为 MAC 地址。如果基于 UDP 的应用程序将多个 IP 数据报发送到单个目标地址而在它们之间没有任何暂停，则如果不存在 ARP 缓存条目，则可能会丢弃一些数据报。应用程序可以通过在发送数据包流之前调用 Iphlpapi.dll 例程 SendArp() 来建立 ARP 缓存条目来对此进行补偿。

[在Mac OS X](https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man4/arp.4.html)和[FreeBSD](http://www.unix.com/man-page/FreeBSD/4/arp/)上可以观察到相同的行为：

> 当接口请求对不在缓存中的地址进行映射时，ARP 将需要映射的消息排队，并在关联的关联网络上广播请求地址映射的消息。如果提供了响应，则缓存新映射并传输任何未决消息。ARP 在等待对映射请求的响应时，最多会排队一个数据包；只保留最近“传输”的数据包。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-05T00:12:36.463

UDP 数据包应该在接收时被缓冲，但是一个 UDP 数据包（或持有它的以太网帧）可以在给定机器上的几个点被丢弃：

1.  网卡没有足够的空间来接受它，
2.  操作系统网络堆栈没有足够的缓冲内存将其复制到，
3.  防火墙/数据包过滤丢弃规则匹配，
4.  没有应用程序正在侦听目标 IP 和端口，
5.  侦听应用程序套接字的接收缓冲区已满。

前两点是关于过多的流量，这里不太可能出现这种情况。然后我相信第 4 点不适用，您的软件正在等待数据。第 5 点是关于您的应用程序处理网络数据的速度不够快 - 似乎也并非如此。

MAC 和 IP 地址之间的转换是通过[地址解析协议](http://en.wikipedia.org/wiki/Address_Resolution_Protocol)完成的。如果您的网络配置正确，这不会导致数据包丢失。

我会禁用 Windows 防火墙和任何防病毒/深度数据包检查软件，并使用[wireshark](http://www.wireshark.org)检查线路上的内容。这很可能会为您指明正确的方向 - 如果您可以在“发送到”机器上嗅探那些第一个数据包，然后检查本地配置（防火墙等）；如果不这样做，请检查您的网络 - 路径中的某些东西干扰了您的流量。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T03:48:26.260

erm ..... 它是你的计算机在做 ARP 请求。当您第一次开始发送时，您的 com 不知道接收方的 mac 地址，因此无法发送任何数据包。它使用接收方的 ip 地址进行 ARP 请求以获取 MAC 地址。在此过程中，您尝试发送的任何 udp 数据包都无法发送出去，因为目标 MAC 地址仍然未知。

一旦您的 com 收到 mac 地址，它就可以开始发送。但是，mac 地址只会在您的 com 的 ARP 缓存中保留 2 分钟（如果在您和接收者之间没有检测到进一步的活动）或 10 分钟（完全清除 ARP 缓存，即使连接处于活动状态）。这就是为什么你每隔几分钟就会遇到这个问题。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-08-06T19:34:13.370

> 有人知道这个问题吗？

*真正的*问题是您假设 UDP 数据包发送是可靠的。它不是。

您丢失当前网络配置的第一个数据包这一事实实际上是次要问题。你也许可以解决这个问题，但在任何时候你仍然容易受到数据包丢失的影响。

如果丢包对你来说是个问题，那么你真的应该使用 TCP。您可以在 UDP 上构建可靠的协议，但除非您有充分的理由这样做，否则不建议这样做。

# cocoa - 使用 NSColorWell 的基于视图的表格视图

> ID：11812736
> 
> 赞同：1
> 
> 时间：2012-08-04T23:22:07.033
> 
> 标签：cocoa

我有一个 NSMutableArray 设置了具有颜色、布尔值和名称的对象。我想让数组显示在表格视图中，颜色很好地描述了对象的颜色值，其布尔值的复选框，然后是第三列中的名称。我只用一个复选框和名称设置表格视图没有问题，但是我遇到了一些问题，试图让颜色很好地显示在表格中。

我相当确定我需要使用基于视图的表格视图而不是基于单元格的表格视图，这就是我遇到麻烦的地方。我应该使用绑定来设置表格吗？如果是这样，我该怎么做？

如果不是，那么设置基于视图的表视图的正确方法是什么？
我试过使用

`- (NSInteger)numberOfRowsInTableView:(NSTableView *)tableView`

和

`- (id)tableView:(NSTableView *)tableView objectValueForTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row`

但是，这似乎不起作用。我已经研究过使用 NSArrayController，但我认为这不是我实现它所需要的。

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T22:23:55.023

我找到了一个有效的答案。

我使用了一个名为 LVColorWellCell (http://ringce.com/code/Cocoa/lvcolorwellcell) 的自定义单元格在基于单元格的表格视图中实现了一个颜色井单元格，效果很好！

# git - ZSH 提示不显示 git unstaged 文件

> ID：11812737
> 
> 赞同：4
> 
> 时间：2012-08-04T23:22:13.837
> 
> 标签：git, zsh, prompt

我正在使用 vcs_info 在提示符中添加有关 git 的信息。我已经配置：

```
setopt promptsubst                
autoload -Uz vcs_info             
zstyle ':vcs_info:*' enable git   
zstyle ':vcs_info:*' check-for-changes true
zstyle ':vcs_info:*' stagedstr '!'
zstyle ':vcs_info:*' unstagedstr '?'                                           
zstyle ':vcs_info:*' formats '[%b]%c%u'
...
PROMPT='${vcs_info_msg_0_}$ ' 
```

现在，我有一个带有当前更改的 git 存储库，即一个暂存和未暂存文件：

```
# On branch test
# Changes to be committed:
#   (use "git reset HEAD <file>..." to unstage)
#
#       new file:   a
#
# Untracked files:
#   (use "git add <file>..." to include in what will be committed)
#
#       b 
```

但是，我的提示是忽略未暂存的文件并仅显示！对于上演的。它看起来如下：

```
[test]!$ 
```

要么我误解了 %u 应该输出什么，要么我必须在某处有错字。我在 zsh 4.3.17 上。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T00:08:27.337

我认为您的 .zshrc 可能还可以。

您的存储库文件“a”已暂存。所以 zsh 显示“！” 按预期提示它。但文件“b”只是未跟踪。未跟踪！=未上演。所以， ”？” 未显示。

# sql - 德比中两个日期之间的时间戳差异

> ID：11812747
> 
> 赞同：0
> 
> 时间：2012-08-04T23:24:05.807
> 
> 标签：sql, database, derby

我正在尝试获取交易的经过时间。我需要将其提取到一个文件中。我在 Derby 网上找到了一些 SQL，但它并不能如我所愿：

```
ij> create  table atab1(ts timestamp, i int, ts1 timestamp); 
ij> insert into atab1 values(CURRENT_TIMESTAMP, 1, CURRENT_TIMESTAMP); 
1 row inserted/updated/deleted 
ij> insert into atab1 values(CURRENT_TIMESTAMP, 2, CURRENT_TIMESTAMP); 
1 row inserted/updated/deleted 
ij> select {fn TIMESTAMPDIFF(SQL_TSI_SECOND, ts1,ts)} as TS_DIFF from atab1; 
TS_DIFF 
----------- 
0 
0 
```

atab1 表的内容是：

```
TS                           |I          |TS1
-----------------------------------------------------------------------
2012-08-05 00:20:16.675      |1          |2012-08-05 00:20:16.675
2012-08-05 00:20:29.081      |2          |2012-08-05 00:20:29.081 
```

该声明：

```
select {fn TIMESTAMPDIFF(SQL_TSI_SECOND, ts1,ts)} as TS_DIFF from atab1; 
```

将始终给出 0，因为 ts1 和 ts 的值相同

我应该如何调整语句以显示 ts 和 ts1 的值之间的差异？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T23:39:30.953

似乎您应该有两行不同的行：一是起始行，一是结束行。每一行都应该有一个事务 id 和一个时间戳，一个应该有一个代码表明它是开始行，而另一行应该有一个代码表明它是结束行。

然后，您可以通过在其事务 id 上自连接表来选择这两行，然后您可以从结束时间中减去开始时间以获得经过的时间。

# mysql - 将 MySQL 行转换为列

> ID：11812756
> 
> 赞同：-7
> 
> 时间：2012-08-04T23:25:31.417
> 
> 标签：mysql

我有一个 mysql 表，其中有一列是这样的：

```
1
2
3
4
5
6
7
A
B
C
Y
... 
```

我需要将它转换成一个 4 列的表，如下所示：

```
|  1 |  2 |  3 |  4 |
|  5 |  6 |  7 |  A |
|  B |  C |  Y | ...| 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-04T23:43:29.870

```
ALTER TABLE tbl 
    ADD COLUMN col1 CHAR(1),
    ADD COLUMN col2 CHAR(1),
    ADD COLUMN col3 CHAR(1),
    ADD COLUMN col4 CHAR(1);

SET @rn = 0;

INSERT INTO tbl (col1, col2, col3, col4)
SELECT SUBSTRING(GROUP_CONCAT(a.col ORDER BY a.rn), 1, 1),
       SUBSTRING(GROUP_CONCAT(a.col ORDER BY a.rn), 3, 1),
       SUBSTRING(GROUP_CONCAT(a.col ORDER BY a.rn), 5, 1),
       SUBSTRING(GROUP_CONCAT(a.col ORDER BY a.rn), 7, 1)
FROM   (
       SELECT col, @rn:=@rn+1 AS rn
       FROM   tbl
       ) a
GROUP BY CEIL(a.rn / 4);

ALTER TABLE tbl DROP COLUMN col;

DELETE FROM tbl 
WHERE col1 IS NULL AND 
      col2 IS NULL AND
      col3 IS NULL AND 
      col4 IS NULL; 
```

* * *

## [*SQLFiddle 演示*](http://www.sqlfiddle.com/#!2/675b8/2/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T23:36:31.317

如果你有 php，你可以尝试这样的事情：

```
$q=mysql_query('select col from table');
while ($a=mysql_fetch_assoc($q){
    $c[]=$a['col'];
}
for ($i=0;$d[]=array_slice($c,$i,4););
foreach($d as $k => $v)
  mysql_query("insert into bullsh values('".$v[0]."','".$v[1]."','".$v[2]."','".$v[3]."')"); 
```

# javascript - 无法理解 ESRI API

> ID：11812757
> 
> 赞同：0
> 
> 时间：2012-08-04T23:25:35.947
> 
> 标签：javascript, api, gis, esri

我是 ESRI Javascript API 的新手。我不明白 attr 上需要做什么就行了，用新的图形。

```
var graphic = new esri.Graphic(geoPoint, symbol, attr, infoTemplate); 
```

这是我捆绑在一起的许多示例代码中的最后一部分。有人请提出解决方案。谢谢您的帮助。下面是整个函数。如果您需要整个脚本，请告诉我。

```
function onGeocodesuccess(results)
{
console.log(results);

    var geoPoint = new esri.geometry.Point(results.utm_x, results.utm_y, map.spatialReference);
    var symbol = new esri.symbol.SimpleMarkerSymbol(esri.symbol.SimpleMarkerSymbol.STYLE_CIRCLE, 15, new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_SOLID, new dojo.Color([0,0,255]), 2), new dojo.Color([0,0,255]));
    var infoTemplate = new esri.InfoTemplate("Attributes", "${*}");
    var graphic = new esri.Graphic(geoPoint, symbol, attr, infoTemplate);
    map.graphics.add(graphic);
    map.infoWindow.setTitle(graphic.getTitle());
    map.infoWindow.setContent(graphic.getContent());
    var screenPnt = map.toScreen(geoPoint);
    map.infoWindow.show(screenPnt,map.getInfoWindowAnchor(screenPnt));

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-19T23:09:26.843

“attr”变量不需要任何内容​​，因为它是可选的。在上面的示例中，我将删除“attr”，因为它未在函数中定义或不需要。

```
var graphic = new esri.Graphic(geoPoint, symbol, attr, infoTemplate); 
```

ESRI 有[Graphic Class](https://developers.arcgis.com/javascript/jsapi/graphic-amd.html#attributes)的血统文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-23T04:31:06.533

attr 是具有字段名称和字段值的键的对象，它通常填充有从服务器返回的特征。当您创建新图形时，这是一个可选参数，如前所述，您可以在创建新图形时忽略此参数，在您的情况下，这将是：

```
function onGeocodesuccess(results) {
console.log(results);

var geoPoint = new esri.geometry.Point(results.utm_x, results.utm_y, map.spatialReference);
var symbol = new esri.symbol.SimpleMarkerSymbol(esri.symbol.SimpleMarkerSymbol.STYLE_CIRCLE, 15, new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_SOLID, new dojo.Color([0,0,255]), 2), new dojo.Color([0,0,255]));
var infoTemplate = new esri.InfoTemplate("Attributes", "${*}");
var graphic = new esri.Graphic(geoPoint, symbol);
map.graphics.add(graphic);
map.infoWindow.setTitle(graphic.getTitle());
map.infoWindow.setContent(graphic.getContent());
var screenPnt = map.toScreen(geoPoint);
map.infoWindow.show(screenPnt,map.getInfoWindowAnchor(screenPnt));

} 
```

# html - CSS3 高度 100%

> ID：11812759
> 
> 赞同：3
> 
> 时间：2012-08-04T23:25:42.887
> 
> 标签：html, css, height

我不知道如何问/写这个，所以请随时更新名称或将我指向正确的问题/标题。

我正在设计一个跨 html5-css3 站点，并试图使其对于每个（常见）浏览器看起来都一样。

这就是我所拥有的： [http ://www.pojotlan.com/example1/](http://www.pojotlan.com/example1/)

它适用于 Firefox 14.0.1、Chrome 21.0.1180.6 和 Safari 5.1.7，此 (file:estilo.css)`#contenido`行高用于使其适合 Safari 和 Chrome。

这是包含的 3 个 css 文件的简短版本...

```
html {height:100%;}
body {height:100%;}
div#Tabla {display:table; height:100%;}
div.row.main {display:table-row-group; height:auto; min-height:100%;}
div#main {display: table-cell; position: relative; height:auto; min-height:100%;}
div#contenido {display:inline-block; position: relative; 
               height:100%; min-height:100%; line-height:100%;}
section {height:auto; min-height:100%;} 
```

如果我将其位置更改为绝对位置，我在 Chrome 21.0.1180.6 和 Safari 5.1.7、Opera 12 上会看到相同的外观。

如您所见，`#contenedor`在 Opera 和 IE 上不适合 100% 的高度。我怎样才能解决这个问题？

我对 css 样式和东西真的很陌生，所以我不明白有什么问题。

先感谢您 ：）

附言。是的，也许我用 css display:table 和其他东西搞砸了一切，但这就是谷歌发给我的地方......哈哈 xD 所以，是的，你基本上可以告诉我在没有桌子的情况下重新开始。（我已经在尝试了，但结果较少。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T02:17:22.657

我不能像我一样做到这一点，所以这就是我所做的。

CSS 文件：

```
body, html {border: 0px; margin: 0px; padding: 0px; 
height:100%; position:relative; width:100%;}
#head
{
 position:absolute;
 background-color: #98a;
 height: 100px;
 width:100%;
 top:0px;
}

#footer
{
 position:absolute;
 background-color: #e46;
 width:100%;
 height:20px;
 bottom:0px;
}

#content
{
 position:absolute;
 background-color: #dee;
 height:auto;
 top:100px;
 bottom:20px;
 width:100%;
} 
```

身体：

```
<body>

<div id="head">#head</div>
<div id="footer">#footer</div>
<div id="content">#content</div>

</body> 
```

重要的部分是内容是绝对的，并且是顶部/底部。

所以，这就是全部。谢谢 :D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T08:03:52.523

您可以尝试使用`min-height`IE hack：

```
body, html {
  min-height:100%;
  height:auto !important;
  height:100%;
} 
```

希望这可以帮助！

# c - 使用 Netfilter 在两个网络设备之间转发数据包

> ID：11812763
> 
> 赞同：0
> 
> 时间：2012-08-04T23:26:18.577
> 
> 标签：c, linux, module, kernel, netfilter

我正在研究将在独立防火墙单元中使用的内核模块。我假设网络的基本结构是：

LAN <---> 网关 <---> 防火墙 <---> 互联网

防火墙本身没有 DHCP 服务器。它有两个网络接口卡，eth0 连接到互联网，eth1 连接到网关。默认情况下，网关将配置为将传出数据包转发到防火墙，我假设这也是可能的。

我正在使用 Netfilter 内核库编写内核模块，我需要一种在两个网络接口之间转发（或不转发）数据包的方法。架设桥梁有用吗？我更像是一名程序员，而不是一名网络工程师，所以我在这里有点不知所措。这应该如何工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T19:55:42.260

iptables 是 Netfilter 引擎的用户界面。如果您说“iptables 升级不足以满足您的项目”，您是在说 Netfilter 不适合您的项目……我认为您无需编写任何代码，您只需学习 iptables；是的，我知道，它不是很容易;-)

# c# - C# .NET 中的显式字符串对框架是否更有效？

> ID：11812767
> 
> 赞同：3
> 
> 时间：2012-08-04T23:26:56.370
> 
> 标签：c#, .net

在某些编程语言中，所有字符串都有一个 @ 前缀，即 var foo = @"this is a test";

如果字符串没有 @ 前缀，.NET 框架是否需要做额外的工作？是否需要进行任何扫描？我很好奇我们应该在所有可能的字符串上使用@？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-04T23:31:16.887

从 MSIL 的角度来看，没有区别

```
string test = @"\test1";
string test2 = "test2";

IL_0001:  ldstr       "\test1"
IL_0006:  stloc.0     
IL_0007:  ldstr       "test2"
IL_000C:  stloc.1 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-04T23:28:17.477

使用逐字字符串可能会或可能不会更快，您甚至可能无法通过为编译器提供特制程序来测量。在任何情况下，此处理都发生在编译时，这使得所有相关工作“免费”。因此，从这个角度来看，绝对没有支持或反对逐字字符串的论据。

也就是说，我已经看到开发工具将非逐字字符串视为本地化的候选者——在这种情况下，在适当的情况下使用逐字字符串确实有一些价值。

# objective-c - 跳跃动画：第一个动画持续时间不起作用。IOS

> ID：11812770
> 
> 赞同：1
> 
> 时间：2012-08-04T23:27:02.773
> 
> 标签：objective-c, ios, xcode, cocoa-touch

我有一个动画，当按下按钮时，它应该跳起来，然后再向下浮动。我使用动画一个让它浮起来，第二个让它下来。无论我做什么，第一个动画都不会浮动，它只是传送到顶部，而第二个动画正是它应该做的。

这就是我所拥有的：

```
//This animation does not respond to its duration.
[UIView animateWithDuration:.5 delay:0.0
                    options:UIViewAnimationOptionCurveEaseOut
                 animations:^{
                     CGRect f = imageView.frame;
                     f.origin.y -= 40;
                     imView.frame = f;
                 }
                 completion:nil];

[UIView animateWithDuration:.7 delay:0.0
                    options:UIViewAnimationOptionCurveEaseOut
                 animations:^{
                     CGRect f = imageView.frame;
                     f.origin.y += 40;
                     imView.frame = f;
                 }
                 completion:nil]; 
```

另一个问题是我想通过动画更改图像，但它总是以我最后声明的图像开始。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-04T23:29:29.773

您的第二个动画会覆盖第一个动画，因为它没有延迟。尝试从第一个动画的完成块开始第二个动画。

```
[UIView animateWithDuration:.5 delay:0.0
                    options:UIViewAnimationOptionCurveEaseOut
                 animations:^{
                     CGRect f = imageView.frame;
                     f.origin.y -= 40;
                     imView.frame = f;
                 }
                 completion:^{
                     [UIView animateWithDuration:.7 delay:0.0
                                         options:UIViewAnimationOptionCurveEaseOut
                                      animations:^{
                                         CGRect f = imageView.frame;
                                         f.origin.y += 40;
                                         imView.frame = f;
                                      }
                                      completion:nil];
                 }]; 
```

# wordpress - 从 GitHub 获取 WordPress 主题的样式表

> ID：11812775
> 
> 赞同：1
> 
> 时间：2012-08-04T23:28:36.650
> 
> 标签：wordpress, github

我想知道是否可以将 GitHub 帐户中的样式表提供给 WordPress，以便自动提供对 GitHub 文件所做的任何更改？

如果是这样，有人可以解释或指出正确的方向来完成这个吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T23:42:56.610

是的，这是可能的，但你可能会遇到麻烦。看到[这个](https://stackoverflow.com/a/5503156/538866)答案。基本上 Github 会将您的文件作为“原始”文件提供。然后，浏览器必须依赖于`type`参数，该参数可能会也可能不会正常工作。

Github 也有带宽限制，因此如果您有很多访问者，他们可能会减少您的带宽使用（即阻止访问样式表）。

如链接帖子中所述，还有其他问题。例如，缺少缓存意味着您的访问者每次访问都必须下载样式表。

# 64-bit - 为什么 x64 操作系统可以运行为 x86 机器编译的代码

> ID：11812776
> 
> 赞同：2
> 
> 时间：2012-08-04T23:28:48.453
> 
> 标签：64-bit, x86-64

基本上，我想知道的是 x86-64 操作系统如何运行为 x86 机器编译的代码。我知道当第一个 x64 系统被引入时，这不是其中任何一个的特性。在那之后，他们以某种方式设法做到了这一点。

请注意，我知道 x86 汇编语言是 x86-64 汇编语言的子集，并且 ISA 的设计方式使其可以支持向后兼容性。但是这里让我感到困惑的是堆栈调用约定。这些约定因架构而异。例如，在 x86 中，为了备份帧指针，进程会在它指向堆栈（RAM）的位置推送，并在完成后弹出。另一方面，在 x86-64 中，进程根本不需要更新帧指针，因为所有引用都是通过堆栈指针给出的。其次，虽然在 x86 架构中函数的参数是通过 x86-64 中的堆栈传递的，但寄存器用于此目的。

也许 x86-64 和 x64 体系结构的堆栈调用约定之间的这种差异可能不会影响程序堆栈的增长方式，只要不同时使用不同的约定，这主要是因为 x32 函数被其他 x32 调用并且相同对于 x64。但是，在某一时刻，一个函数（可能是一个系统函数）将调用一个函数，该函数的代码是为带有一些参数的 x86-64 机器编译的，此时，我很好奇操作系统（或其他一些控制单元）如何处理让这个功能工作。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T23:50:37.177

i386/x86-64 架构设计的部分方式是[CS](http://en.wikipedia.org/wiki/CS_register)和其他段寄存器引用[GDT](http://en.wikipedia.org/wiki/Global_Descriptor_Table)中的条目。GDT 条目除了描述当前运行任务的操作模式和特权级别的基数和限制外，还有一些特殊位。

如果 CS 寄存器指的是 32 位[代码段](http://en.wikipedia.org/wiki/Code_segment)，则处理器将以 i386 兼容模式运行。同样，64 位代码需要一个 64 位代码段。

所以，把这一切放在一起。

当操作系统要运行一个 32 位任务时，在任务切换到它的过程中，它会将一个值加载到 CS 中，该值指的是一个 32 位代码段。中断处理程序也有与之关联的段寄存器，因此当发生系统调用或发生中断时，处理程序将切换回操作系统的 64 位代码段，（允许 64 位操作系统代码正确运行）和操作系统然后可以完成它的工作并继续安排新任务。

作为关于调用约定的跟进。i386 或 x86-64 都不**需要**使用帧指针。代码可以随意做。事实上，许多编译器（gcc、clang、VS）都提供了在没有帧指针的情况下编译 32 位代码的能力。重要的**是**调用约定的实现是一致的。如果所有代码都希望参数在堆栈上传递，那很好，但被调用的代码最好同意这一点。同样，通过寄存器传递也可以，只是每个人都必须同意（至少在库接口级别，内部函数通常可以随心所欲）。

除此之外，请记住，两者之间的差异并不是真正的问题，因为每个进程都有自己的私有内存视图。一个副作用是 32 位应用程序无法加载 64 位 dll，而 64 位应用程序无法加载 32 位 dll，因为进程要么有 32 位代码段，要么有 64 位代码部分。不可能两者兼而有之。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T23:49:54.150

处理器进入传统模式，但这要求当时执行的所有内容都是 32 位代码。此切换由操作系统处理。

> Windows：它使用[**WoW64**](http://en.wikipedia.org/wiki/WoW64)。WoW64负责改变处理器模式，它还提供了兼容的dll和注册表功能。
> 
> Linux：直到最近，Linux 过去（如 Windows）在开始执行 32 位代码时转向以传统模式运行处理器，您需要安装所有 32 位 glibc 库，如果它试图与 64 位代码一起工作，它会中断。现在正在实施[**X32 ABI**](http://en.wikipedia.org/wiki/X32_ABI)，它应该使一切运行得更顺畅，并允许 32 位应用程序访问 x64 功能，如增加 no。的寄存器。[请参阅有关 x32 abi 的这篇文章](http://lwn.net/Articles/456731/)

PS：我对事情的细节不是很确定，但它应该给你一个开始。

此外，这个答案与 Evan Teran 的答案相结合，可能会大致了解正在发生的一切。

# c# - 没有构造函数的依赖注入：真的是个坏习惯吗？

> ID：11812783
> 
> 赞同：4
> 
> 时间：2012-08-04T23:30:19.100
> 
> 标签：c#, asp.net-mvc, dependency-injection, structuremap, recommendation-engine

我正在使用 C#、MVC4、StructureMap 等开发 Web 解决方案。

在解决方案中，我为控制器提供服务。举例：

```
public class ServiceA{
    private readonly IRepository _repository1;
    private readonly IRepository _repository2;

    public ServiceA(IRepository1 repository1, IRepository2 repository2){
        _repository1=repository1;
        _repository2=repository2;
    }

    public void DoSomethingA(){
        _repository1.DoSomething();
    }

    public void DoSomethingB(){
        _repository2.DoSomething();
    }
}

public class ServiceB{
    private readonly IRepository _repository3;
    private readonly IRepository _repository4;

    public ServiceB(IRepository3 repository3, IRepository4 repository4){
        _repository3=repository3;
        _repository4=repository4;
    }

    public void DoSomethingA(){
        _repository3.DoSomething();
    }

    public void DoSomethingB(){
        _repository4.DoSomething();
    }
} 
```

这样做是个好习惯吗？：

```
public abstract class ServiceBase(){
    public IRepository1 Repository1 { get { return instanceOf<IRepository1>(); }}
    public IRepository2 Repository2 { get { return instanceOf<IRepository2>(); }}
    public IRepository3 Repository3 { get { return instanceOf<IRepository3>(); }}
    public IRepository4 Repository4 { get { return instanceOf<IRepository4>(); }}

    private T instanceOf<T>()
    {
        return ServiceLocator.Current.GetInstance<T>();
    }
} 
```

然后以这种方式创建服务？

```
public class ServiceA : ServiceBase
{
    public void DoSomethingA(){
        Repository1.DoSomething();
    }

    public void DoSomethingB(){
        Repository2.DoSomething();
    }
}

public class ServiceB : ServiceBase
{
    public void DoSomethingA(){
        Repository3.DoSomething();
    }
    public void DoSomethingB(){
        Repository4.DoSomething();
    }
} 
```

使用第二种选择，我看到了某些优势：

*   不必为每个存储库都有一个私有变量。
*   我不需要服务的构造函数，使它们更小更易于阅读。
*   所有存储库都将在任何服务中可用。
*   该服务不会获得不必要的实例。`ServiceA`例如，在方法`DoSomethingA`中调用`ServiceLocator`get only`Repository1`实例。（使用第一种方法会收到两个实例：for`Repository1`和`Repository2`）

在这两种情况下，我都可以进行适当的测试：

*   在第一种情况下，通过构造函数发送模拟对象。
*   在第二种情况下，将 StructureMap 配置为在必要时使用模拟对象。

你认为？我违背了一些原则？（对不起我的英语）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-05T01:03:18.570

让我们先看看优势论点：

> 不必为每个存储库都有一个私有变量。

这是正确的。尽管实际上这 4 个字节作为参考通常并不重要。

> 我不需要服务的构造函数，使它们更小更易于阅读。

我的看法正好相反。拥有一个构造函数会立即告诉您该类具有哪些依赖项。对于基类，您必须查看整个类以获取该信息。此外，如果你有一个低耦合、高内聚和没有缠结的好的设计，也无法使用工具来分析。而那些使用该类的人根本不知道该类具有哪些依赖项，除非他们阅读了实现。

> 所有存储库都将在任何服务中可用。

应避免在一项服务中使用多个 repos，因为这会增加耦合。为所有服务提供所有 repos 是鼓励高耦合不良设计的最佳方式。所以我认为这是一个缺点。

> 该服务不会获得不必要的实例。例如，在ServiceA 中调用DoSomethingA 方法，ServiceLocator 只得到Repository1 实例。（使用第一种方法会收到两个实例：对于 Repository1 和 Repository2 ）

使用完全不同的依赖项不同方法的服务是一个巨大的迹象，表明它不遵循[单一责任原则](http://en.wikipedia.org/wiki/Single_responsibility_principle)。在这种情况下，它很可能会被拆分为两个服务。

关于可测试性：在第二种情况下，通过使用单例（ServiceLocator），您的测试不再是孤立的。所以他们可以互相影响。特别是在并行运行时。

在我看来，你走错路了。使用[Service Locator 反模式](http://blog.ploeh.dk/2010/02/03/ServiceLocatorIsAnAntiPattern.aspx)，您将依赖项隐藏到使用您的类的人身上，这使得那些阅读实现的人更难看到该类具有哪些依赖项，并且您的测试不再被隔离。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T00:06:48.323

我在这种设计中看到的问题是您将 ServiceLocator 紧密耦合到您的服务，因此不会促进松散耦合。如果您想使用模拟/测试存储库对服务进行单元测试，会发生什么？甚至换掉你的 DI 实现。在实践中，这可能不是一个大问题，因为您可以通过服务定位器配置您的测试服务，但它只是让我觉得代码有异味。

# mysql - Rows_sent: 12 Rows_examined: 549024 - 如何优化 mySQL 查询？

> ID：11812785
> 
> 赞同：2
> 
> 时间：2012-08-04T23:30:28.633
> 
> 标签：mysql, performance, optimization

我有一个数据库，其中列出了相当不错的服务器（四核 Xeon 2.0Ghz、16GB RAM、SSD 驱动器）。该数据库有大约 180,000 个列表。服务器上还没有流量，我只是用大量列表对其进行测试，以确保以后实际上有那么多实时列表和实际流量时没有问题。

但即使还没有流量，我觉得他们应该比实际返回得更快。

从慢查询日志中，我可以找到：

```
# Query_time: 1.575742  Lock_time: 0.000113 Rows_sent: 12  Rows_examined: 549024 
```

有 180,000 条记录，它只需要返回 12 条，但它检查了超过 500,000 条记录并且需要超过 1.5 秒？一定有什么问题，对吧？:(

实际查询是：

```
SELECT a.listing_id, a.name, a.item_price, a.max, a.nb, a.currency,
     a.end_time, a.closed, a.bold, a.hl, a.buy_price, a.is_offer, a.reserve,
     a.owner_id, a.postage_amount, a.fb_current_bid, a.type, a.start_time,
     a.is_relisted_item, a.enable
     FROM db_listings a
     LEFT JOIN db_users u ON u.user_id=a.owner_id  WHERE a.active=1 AND
     a.approved=1 AND a.deleted=0 AND a.creation_in_progress=0 AND
     a.closed=0 AND (a.list_in='store' OR u.shop_active='1')
     GROUP BY a.listing_id
     ORDER BY a.list_in ASC, a.end_time ASC  LIMIT 0, 12; 
```

已经在 db_listings 中的 listing_id 以及 db_users 中的 user_id 上设置了索引。我不认为 db_users 加入有问题，因为现在那里只有 2 个用户。

如果您需要任何其他信息来解决此问题，请告诉我。

任何帮助是极大的赞赏 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T23:58:32.257

首先，您的查询有问题。您使用 LEFT JOIN，但您使用 where 子句变成了隐式 INNER JOIN：AND (a.list_in='store' OR u.shop_active='1')

为什么这会将 LEFT JOIN 变成隐式 INNER？因为当没有匹配的用户时，LEFT JOIN 将为 u.shop_active 生成​​ NULL 值，但 NULL 永远不会等于“1”。这会将查询转换为 INNER JOIN，因为由 OUTER JOIN 生成的任何行都将被 WHERE 条件过滤。

这个过滤器也是性能问题的原因。您在两个不同表中的列之间有一个 OR 条件。没有指标可以满足这样的条件。

这是另一种可能表现更好的方法。此版本将仅搜索 (a.list_in != 'store' and u.shop_active = '1') 当 list_in='store' 列表少于 12 个时的列表。

要使用以下内容，**请确保您在 (list_in, end_time) 上有一个索引**

```
SELECT * FROM
(
    SELECT a.listing_id, a.name, a.item_price, a.max, a.nb, a.currency,
           a.end_time, a.closed, a.bold, a.hl, a.buy_price, a.is_offer, a.reserve,
           a.owner_id, a.postage_amount, a.fb_current_bid, a.type, a.start_time,
           a.is_relisted_item, a.enable
     FROM db_listings a
    WHERE list_in = 'store'
     a.active=1 AND
     a.approved=1 AND 
     a.deleted=0 AND 
     a.creation_in_progress=0 AND
     a.closed=0
    ORDER BY end_time 
    LIMIT 12 
    )
    UNION ALL
    (
        SELECT a.listing_id, a.name, a.item_price, a.max, a.nb, a.currency,
           a.end_time, a.closed, a.bold, a.hl, a.buy_price, a.is_offer, a.reserve,
           a.owner_id, a.postage_amount, a.fb_current_bid, a.type, a.start_time,
           a.is_relisted_item, a.enable
        FROM db_listings a
        JOIN users u 
          ON a.owner_id = u.user_id
         AND u.shop_active = '1'
       WHERE list_in != 'store' AND
       a.active=1 AND
       a.approved=1 AND 
       a.deleted=0 AND 
       a.creation_in_progress=0 AND
       a.closed=0
       ORDER BY end_time 
       LIMIT 12 
    )
) sq
ORDER BY list_in, end_time
LIMIT 12; 
```

# javascript - window.open 在 chrome 扩展中返回 undefined

> ID：11812786
> 
> 赞同：7
> 
> 时间：2012-08-04T23:30:36.077
> 
> 标签：javascript, google-chrome, google-chrome-extension, popup

我有基于内容脚本的 Chrome 扩展。我通过内容脚本中的弹出窗口启动登录过程。

我使用下面的代码打开一个弹出窗口，然后等到它关闭。

但是，我从`window.open`方法中得到一个“未定义”。有人知道为什么会这样吗？

`loginwin`位于`undefined`下面的代码中，尽管弹出窗口使用指定的`login_url`. 下面的代码是从我的内容脚本中调用的。

```
var loginWin = window.open(login_url, 'LoginWindow', "width=655,height=490");
console.log(loginWin);
// Check every 100 ms if the popup is closed.
var finishedInterval = setInterval(function() {
    console.log('checking if loginWin closed');
    if (loginWin.closed) {
        clearInterval(finishedInterval);
        console.log('popup is now closed');
        Backbone.history.navigate('index', true);
    }
}, 1000); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-05T10:10:37.943

> 注意：此答案已过时。`window.open()`在 Chrome 扩展程序中始终返回`null`（当弹出窗口被阻止时）或`window`对象。以下信息仅适用于非常旧的 (2012) 版本的 Chrome。

* * *

内容脚本无权访问页面的全局`window`对象。对于内容脚本，以下适用：

*   该**`window`**变量不引用页面的全局对象。相反，它指的是一个新的上下文，一个页面上的“层”。页面的 DOM 是完全可访问的。^([#执行环境](http://code.google.com/chrome/extensions/content_scripts.html#execution-environment))

给定一个包含以下内容的文档   `<iframe id="frameName" src="http://domain/"></iframe>`：

*   对框架内容的访问受到页面[同源策略](https://developer.mozilla.org/En/Same_origin_policy_for_JavaScript)的限制；您的扩展程序的权限不会放松政策。
*   `frames[0]`和`frames['frameName']`,（通常指帧的包含全局`window`对象）是**`undefined`**.
*   `var iframe = document.getElementById('frameName');`
    *   **`iframe.contentDocument`**返回**`document`**包含框架的对象，因为内容脚本可以访问页面的 DOM。此属性**`null`**适用于同源策略。
    *   **`iframe.contentDocument.defaultView`**（指`window`与文档关联的对象）**未定义**。
    *   **`iframe.contentWindow`** 是**未定义**的。

如您所见，`window.open()`不返回`Window`实例（也不返回`window.opener`，等等）。

* * *

### 备择方案

*   [在页面中注入代码](https://stackoverflow.com/questions/9515704/building-a-chrome-extension-inject-code-in-a-page-using-a-content-script/9517879#9517879)，使其在页面的上下文中运行。注意：仅当您正在操作的页面可以信任时才使用此方法。要在注入脚本和内容脚本之间进行通信，您可以使用：

    ```
    var login_url = 'http://example.com/';
    var event_name = 'robwuniq' + Math.random().toString(16); // Unique name
    document.addEventListener(event_name, function localName() {
        document.removeEventListener(event_name, localName); // Clean-up
        // Your logic:
        Backbone.history.navigate('index', true);
    });
    // Method 2b: Inject code which runs in the context of the page
    var actualCode = '(' + function(login_url, event_name) {
        var loginWin = window.open(login_url, 'LoginWindow', "width=655,height=490");
        console.log(loginWin);
        // Check every 100 ms if the popup is closed.
        var finishedInterval = setInterval(function() {
            console.log('checking if loginWin closed');
            if (loginWin.closed) {
                clearInterval(finishedInterval);
                console.log('popup is now closed');
                // Notify content script
                var event = document.createEvent('Events');
                event.initEvent(event_name, false, false);
                document.dispatchEvent(event);
            }
        }, 1000);
    } + ')(' + JSON.stringify(login_url+'') + ', "' + event_name + '")';
    var script = document.createElement('script');
    script.textContent = actualCode;
    (document.head||document.documentElement).appendChild(script);
    script.parentNode.removeChild(script); 
    ```

*   使用 . 从后台页面启动窗口`window.open()`。这将返回一个`window`具有可靠`closed`属性的对象。有关通信流程的更多详细信息，请参阅下一个要点。

*   从内容脚本中，[将消息传递](http://code.google.com/chrome/extensions/messaging.html)到[后台页面](http://code.google.com/chrome/extensions/background_pages.html)。在后台页面中，用于[`chrome.windows.create`](http://code.google.com/chrome/extensions/windows.html#method-create)打开一个窗口。在回调中，分配一个[`chrome.tabs.onRemoved`](http://code.google.com/chrome/extensions/tabs.html#event-onRemoved)和/或[`chrome.tabs.onUpdated`](http://code.google.com/chrome/extensions/tabs.html#event-onUpdated)事件。当这些事件监听器被触发时，它们应该移除自己，并`sendResponse`使用`chrome.extension.onMessage`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-04T19:49:48.000

就我而言，Chrome 阻止了弹出窗口，用户必须通过单击窗口右上角的“阻止的弹出窗口”图标来解除阻止。（他们还可以在 Chrome 设置的“内容设置...”下启用/禁用例外。）

我建议在 window.open() 之后添加一些代码，以便用户知道该怎么做。例如：

```
if (!loginWin)
    alert("You must first unblock popups and try again for this to work!"); 
```

# android - Linux 内核 vanilla 的分支 3.x 无法在 Android 下运行 - 2.6 可以

> ID：11812787
> 
> 赞同：1
> 
> 时间：2012-08-04T23:30:46.153
> 
> 标签：android, linux-kernel, kernel, arm

我已经为 Android emulator-arm 成功编译了一个金鱼内核 2.6.x，问题是相同的`.config`文件和相同的编译脚本不适用于 linux stable 分支（通过 git 结帐）。

我必须对香草内核采取额外的步骤吗？有人让 linux 3.x 在模拟器上工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T15:41:37.773

ARM SoC 的内核更改进入内核主线（如果有的话）非常缓慢 - 尤其是因为有 5 或 6 个 ARM SoC 都在尝试进行更改。

您的挑战将是找到用作给定 SoC 的集成分支的内核树，以及 Android 内核版本所基于的内核树。对此没有规范的信息来源。

[Linaro](http://www.linaro.org/)可能是一个不错的起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T01:34:02.703

我认为您不能在 Android 中使用 vanilla Linux 内核。进行了许多特定于 Android 的更改。请参阅：[http](http://elinux.org/Android_Kernel_Features) ://elinux.org/Android_Kernel_Features 。

# javascript - .on() 不适用于动态生成的内容

> ID：11812790
> 
> 赞同：0
> 
> 时间：2012-08-04T23:31:01.647
> 
> 标签：javascript, jquery, dom, event-handling, dynamically-generated

我会尽可能清楚地解释我正在尝试做的事情，并希望人们能够理解这个问题。

```
$(document).ready(function() {
  $('body').on('click', '.mainNav', function() {
    var href = $(this).attr('href');
    $('body').load(href);
   });
}); 
```

这是给我带来麻烦的代码。基本上，它应该做的是从 div 中获取 'href' 属性，然后加载该属性以替换 body 标记的当前内容。

这是第一次工作，但是当通过 .load() 生成新内容时，div 停止响应。我对 JS 很陌生，所以如果答案很明显，我提前道歉。我一直在尝试自己寻找解决方案，但我发现的一切都告诉我 .on() 应该适用于动态生成的内容。

**编辑：**无法在小提琴中模拟问题，所以我发布了一个包含整个索引页面的 pastebin，希望它能澄清问题。

[http://pastebin.com/xT5syd9j](http://pastebin.com/xT5syd9j)

**编辑：**它使用 adeneo 的解决方案。非常感谢每个人的意见，并为没有从一开始就发布整个内容而道歉。我猜它会为每个人节省一些时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T00:12:17.090

这里的问题**可能**是你调用`$('body').load(href)`. 如果你加载整个页面的 HTML（包括`<html>`和`<body>`标签），那么你可能会遇到问题。您的浏览器通过使用不正确的 HTML（在您的情况下类似于`<html><body><html><body>...</body></html></body></html>`）来处理此类问题 - 这可能会产生意想不到的结果。

更好的主意是：

1.  正确组织 HTML（见下文）
2.  仅加载上面生成的 HTML 的一部分，当您使用`$(...).load()`.

广告1。确保您在标签下方有一些元素`<body>`，它有自己的 ID 并包含将位于`<body>`标签中的所有内容。它可能看起来像这样：

```
<html>
...
<body>
    <div id="main_div">
    <!-- all elements here -->
    </div>
</body>
</html> 
```

广告 2。加载此类内容要容易得多，因为您可以**将选择器附加**到传递给的 URL `.load()`（请参阅[jQuery](http://api.jquery.com/load/)[文档页面上的“](http://api.jquery.com/load/)*加载页面片段*” ）：[`.load()`](http://api.jquery.com/load/)

```
$('body').load(href + ' #main_div'); 
```

这样您将检索整个页面，但只获取 ID 为 " `#main_div`" 的元素并用它替换整个`<body>`内容。

这样，附加到主体的事件（即使是这些委托）仍应正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T00:15:32.063

尝试这个：

```
$(document).ready(function(){
    $('body').on('click', '.mainNav', function() {
        var href = $(this).attr('href');
        $('body').load(href + " body > *");
    });
}); 
```

我们在这里所做的只是加载页面上的 body 元素的内容（`href`）。无需向该页面添加更多元素。只需像 Tradeck 提到的那样选择正文的内容。

问题显然是，如果页面`href`是一个完整的 HTML 页面，你正在加载一个 DOCTYPE、第二个`html`标签、第二个`head`标签`body`等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T23:33:44.333

不太确定它是什么问题，但我猜它与加载到与处理程序连接的相同元素有关，所以尝试：

```
$(document).ready(function() {
    $(document).on('click', '.mainNav', function(e) {
        e.preventDefault();
        console.log('I just clicked : '+e.target.href);
        $('body').load(e.target.href);
    });
}); 
```

此外，您当然知道这将替换您页面上的所有内容，除非在加载的内容中存在具有相同类的新元素，否则不会发生任何事情。我建议也使用容器将内容加载到其中。当然，链接必须指向服务器上的实际文件。

还要确保您加载的文件没有另一组`<head>`,`<body>`标签等，因为这会给您带来麻烦，仅限 HTML 内容！

**编辑：**

如果`.mainNav`是一种`<a href="link_you_are_trying_to_load"></a>`元素，您还必须阻止默认操作，请参阅更新的代码。

**新编辑：**

您遇到的问题非常明显，您正在使用以下元素：

```
<div class="mainNav" href="test.php" id="active"> 
```

div 元素没有属性 href，因此 JS 不会获取该值，因为它不是`<a>`元素以外的任何东西的有效属性

您可以将元素更改为`<a>`元素或将 href 属性更改为：

```
<div class="mainNav" data-href="test.php" id="active"> 
```

并做：

```
var href = $(this).data('href'); 
```

至少那将是有效的 HTML！

此外，您似乎有一个类似“容器”的元素`#site`，所以您为什么不这样做：

```
$('#site').load(href); //using the data-href as above 
```

# c# - SSL/TLS 中的相互认证

> ID：11812793
> 
> 赞同：4
> 
> 时间：2012-08-04T23:31:22.180
> 
> 标签：c#, wcf, authentication, iis, ssl

我是 SSL 身份验证的新手，我需要通过 SSL 的信任边界对两个架构组件进行身份验证（我可以控制这两个组件）。我想我需要两种方式的 SSL 身份验证，服务器和客户端都有证书。

证书可以自签名吗？（即由供应商签名，这不会首先使用 SSL 无效？还是我需要第三方验证服务来确保证书的身份？）

就服务器和客户端的公钥和私钥而言，握手是如何工作的？

我将不得不在 IIS 中配置服务器以使用证书，并随请求发送客户端证书（很可能通过使用 WCF 进行配置？），但是我还需要执行其他任务来完成这项工作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T13:11:50.323

我同意 EJP 的回答，但由于您接受了不同的回答，这里有更多关于自签名证书问题的详细信息。

可以在您的服务器上使用自签名证书。您只需将所有潜在客户配置为使用信任此证书。这可以通过将证书（没有私钥）导入每台机器的受信任存储区或浏览器的受信任证书存储库（例如，Firefox 使用它自己的，独立于运行它的操作系统）来完成。这里的自签名服务器证书主要是自定义 CA 证书的一种特殊情况，其中每个客户端都需要了解它可能使用的每台服务器（缺点是无法撤销自签名证书）。这没关系，但实际上，如果您拥有的机器不多，这很快就会成为一个问题。

您的主要问题是将自签名证书作为*客户端*证书。

客户端证书身份验证由服务器发起，服务器向客户端发送 TLS 证书请求消息。此消息包含它愿意接受的证书颁发机构的名称列表。客户端然后使用此列表来选择要发送的证书：他们查找具有与此 CA 列表中的名称之一匹配的颁发者 DN 的证书（他们拥有私钥）（如果中间 CA，他们也可以使用证书链需要证书才能链接到此 CA 列表中的颁发者 DN）。

如果找不到符合这些条件的证书，大多数客户端根本不会发送任何客户端证书。这将是您尝试使用自签名客户端证书时遇到的最大问题。

解决此问题的一种方法是让服务器发送一个空列表。这为客户端提供了更多选择哪个证书的自由（然后由服务器来选择是否接受它，但无论如何总是如此）。这是 TLS 1.1 明确允许的，之前的版本 (SSLv3/TLS 1.0) 对此主题保持沉默，尽管在实践中，据我所知，它也适用于大多数 SSLv3/TLS 1.0 堆栈。（例如，当浏览器完成自动证书选择时，这仍然会导致笨拙的交互，因为很难正确地进行自动选择。）

`X509TrustManager`可以自定义Java `getAcceptedIssuers()`，以在 TLS 证书请求消息中返回一个空的 CA 列表。据我所知，在 C#/.Net 中，`SslStream`'s`RemoteCertificateValidationCallback`没有它的等价物。据我所知，此列表是在使用 IIS/ 时根据机器的受信任证书列表构建的`SslStream`。（请注意，这与证书验证本身无关，它只是关于服务器宣传它可能接受哪些证书。）

此外，如果您想将客户端证书身份验证与自签名证书一起使用，则必须在服务器中实现自己的验证回调来执行此身份验证。一个简单的示例是从您获得的证书中提取公钥，将其与服务器拥有的预定义列表进行比较，然后使用您在该预定义列表中拥有的用户名。你不能相信自签名证书所说的任何东西，除非你有一种明确的方式来检查它的内容与你知道的东西。实现一个刚刚说的回调`return true;`all 不会执行任何身份验证。任何人都可以构建具有相同名称或属性和不同密钥的证书。（在您的服务器可信证书存储中明确信任每个客户端证书几乎会更好，尽管这可能会导致 TLS 证书请求消息中的 CA 列表过长。）

如果您不想依赖商业 CA，请构建您自己的 CA。这可能需要一些工作（主要是管理），但至少您将拥有一个更清晰的结果系统。通过使用该 CA 证书配置您的客户端和服务器，您应该能够扩展到更多的客户端和服务器而无需更改，并且您还可以在请求客户端证书时从正常的 CA 列表行为中受益。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T00:18:22.207

自签名实际上最终更复杂。除非您完全控制两端，否则不要这样做。

私钥用于签署握手中发送的证书，以便对等方可以检查您是否真正拥有您发送的证书。在某些密码中，服务器私钥也在生成分片秘密方面发挥作用。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-08-06T15:59:00.303

使用客户端和服务器证书的 2 路身份验证将起作用。您也可以使用自签名证书。但是，如果两个证书都是自签名的，因为它们不是由受信任的机构签名的，那么您需要绕过客户端和服务器上的证书验证。

在安装证书方面，应按如下方式进行：

服务器端

1.  ServerCert.pfx 安装到 LocalMachine --> 个人存储

2.  ClientCert.cer 安装到本地机器 --> 受信任的人存储

客户端

1.  ClientCert.pfx 安装到当前用户 --> 个人商店

2.  ServerCert.cer 安装到本地机器 --> 可信存储

您需要将 ServerCert.cer 文件发送给客户端，而客户端需要将 ClientCert.cer 发送给您。

现在，如果您使用自签名证书并且您的客户正在访问您的服务，那么他将需要绕过证书验证。下面的 C# 示例代码：

```
 System.Net.ServicePointManager.ServerCertificateValidationCallback = (sender, cert, chain, error) =>
                                                                                 {
                                                                                     return true;
                                                                                 }; 
```

希望有帮助。

**注意：从安全角度来看，不建议在生产环境中使用自签名证书或绕过证书验证。**

# vb.net - vb 2010，删除datagridview中的行以更新访问表

> ID：11812797
> 
> 赞同：1
> 
> 时间：2012-08-04T23:32:58.093
> 
> 标签：vb.net, ms-access, datagridview, oledb

我已在表格中将这些声明为私有。

```
Private callLogConnection As New OleDbConnection()
Private schDataAdapter = New OleDbDataAdapter("Select * From tbl_schtime", _ callLogConnection)
Private schCommmandBuilder = New OleDbCommandBuilder(schDataAdapter)
Private schDataTable As New DataTable
Private schRowPosition As Integer = 0
Private qryexceptionDataAdapter = New OleDbDataAdapter("Select * From  _ qry_exceptionUpdate", callLogConnection)
Private exceptionBindingSource = New BindingSource()
Private exception2BindingSource As New BindingSource
Private exceptionCommandBuilder As OleDbCommandBuilder = New _ OleDbCommandBuilder(qryexceptionDataAdapter)
Private qryexceptionDataTable As New DataTable
Private qryexceptionRowPostiion As Integer = 0
Private tbl_ExceptionDataSet As DataSet = New DataSet
Private exceptionDataTable As New DataTable 
```

我已经在表单加载中声明了这些对象

```
qryexceptionDataAdapter.Fill(qryexceptionDataTable)
'linking the qryexception table to binding source
exceptionBindingSource.DataSource = qryexceptionDataTable
'showing the binding source in the datagrid view
dgvExceptions.DataSource = exceptionBindingSource 
```

这是我的保存按钮命令，用于从 datagridview 更新我的表。

```
Private Sub btnSaveException_Click(sender As System.Object, ByVal e As System.EventArgs) Handles btnSaveException.Click
    Try
        Me.Validate()
        Me.qryexceptionDataAdapter.Update(Me.tbl_ExceptionDataSet.Tables("qry_exceptionUpdates"))
        Me.tbl_ExceptionDataSet.AcceptChanges()
    Catch ex As Exception
        MessageBox.Show(ex.Message)
    End Try

    End Sub code here 
```

但我不断得到：

```
System.Reflection.AmbiguousMatchException: Overload resolution failed because no Public 'Update' is most specific for these arguments:
    'Public Function Update(dataTable As System.Data.DataTable) As Integer':
        Not most specific.
    'Public Overrides Function Update(dataSet As System.Data.DataSet) As Integer':
        Not most specific.
    'Public Function Update(dataRows As System.Data.DataRow()) As Integer':
        Not most specific.
   at Microsoft.VisualBasic.CompilerServices.OverloadResolution.ResolveOverloadedCall(String MethodName, List`1 Candidates, Object[] Arguments, String[] ArgumentNames, Type[] TypeArguments, BindingFlags LookupFlags, Boolean ReportErrors, ResolutionFailure& Failure)
   at Microsoft.VisualBasic.CompilerServices.OverloadResolution.ResolveOverloadedCall(String MethodName, MemberInfo[] Members, Object[] Arguments, String[] ArgumentNames, Type[] TypeArguments, BindingFlags LookupFlags, Boolean ReportErrors, ResolutionFailure& Failure)
   at Microsoft.VisualBasic.CompilerServices.NewLateBinding.ResolveCall(Container BaseReference, String MethodName, MemberInfo[] Members, Object[] Arguments, String[] ArgumentNames, Type[] TypeArguments, BindingFlags LookupFlags, Boolean ReportErrors, ResolutionFailure& Failure)
   at Microsoft.VisualBasic.CompilerServices.NewLateBinding.CallMethod(Container BaseReference, String MethodName, Object[] Arguments, String[] ArgumentNames, Type[] TypeArguments, Boolean[] CopyBack, BindingFlags InvocationFlags, Boolean ReportErrors, ResolutionFailure& Failure)
   at Microsoft.VisualBasic.CompilerServices.NewLateBinding.ObjectLateCall(Object Instance, Type Type, String MemberName, Object[] Arguments, String[] ArgumentNames, Type[] TypeArguments, Boolean[] CopyBack, Boolean IgnoreReturn)
   at Microsoft.VisualBasic.CompilerServices.NewLateBinding.LateCall(Object Instance, Type Type, String MemberName, Object[] Arguments, String[] ArgumentNames, Type[] TypeArguments, Boolean[] CopyBack, Boolean IgnoreReturn)
   at Call_Log.CallLogForm.btnSaveException_Click(Object sender, EventArgs e) in C:\Users\mdutton\Desktop\Call Log\Call Log\CallLogForm.vb:line 174 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T00:47:28.507

线索在您的调用堆栈中：

`Microsoft.VisualBasic.CompilerServices.NewLateBinding.LateCall`.

这意味着 VB 正试图找出它应该在运行时而不是设计时调用的重载。抛出的异常很可能意味着：

```
Me.tbl_ExceptionDataSet.Tables("qry_exceptionUpdates") 
```

评估为 Nothing 因为有 3 个重载采用单个对象参数（例外已为您列出了有用的参数），这些参数可能与您的请求相匹配。

所以，这里有两件事需要解决：

1) 在项目属性中设置 Option Strict On。从[微软文档](http://msdn.microsoft.com/en-us/library/zcd4xwzs%28v=vs.80%29.aspx)：

> 除了不允许隐式缩小转换之外，Option Strict 还会为后期绑定生成错误。当一个对象被分配给一个声明为 Object 类型的变量时，它是后期绑定的。
> 
> 因为 Option Strict On 提供强类型，防止意外的类型转换和数据丢失，不允许后期绑定，并提高性能，强烈建议使用它。

2) 完成上述操作后，仍然会出现运行时错误，但现在 DataTable 参数不能为空（Nothing），因此您也需要修复此问题。

您的示例代码中可能有错字，但按钮单击事件中的表名称与您在 select 语句 ( `qry_exceptionUpdates`vs `_qry_exceptionUpdate`) 中的名称不匹配。

如果可能，您应该在全局或模块级常量中指定一次表名，以免遇到此类命名问题。

# xml - ColdFusion - 处理来自两个同时 XML 查询的结果？

> ID：11812799
> 
> 赞同：1
> 
> 时间：2012-08-04T23:33:02.813
> 
> 标签：xml, arrays, loops, coldfusion, struct

我需要建立一个页面，列出给定委员会的每个委员会成员、他们的职位、他们的电子邮件和电话号码。此数据通过 XML Web 服务公开。一张表包含委员会数据（成员姓名、职位），另一张表包含个人数据（电子邮件、电话）。我尝试使用连接在单个查询中获取数据，但 API 显然不支持。它确实提供了一个“MultiQuery”方法，允许运行许多离散查询，所以这就是我正在使用的。

我之前问过一个[类似](https://stackoverflow.com/questions/11705162/coldfusion-how-to-loop-through-xml-output-and-adding-to-struct-or-array)的问题，它实际上使用了相同的 XML 和相同的常规设置。Peter Boughton 和其他人非常有帮助，他们的建议非常有效。当时和现在的区别是，那时我只需要委员会的数据。现在我需要委员会和个人数据，而这正是我所困的地方。

两个查询的结果分为两个部分——一个对象，但两个“ArrayOfanyType”部分。两个“部分”都被分解并包含在一个数组中：

```
<cfset keyValue = xmlSearch(soapBody,"//*[local-name()='KeyValueOfstringanyType']") /> 
```

我可以使用蛮力方法循环遍历此数组以将数据添加到结构：

```
<cfloop index="i" from="1" to="#arrayLen(keyValue)#">
<cfif keyValue[i].Key.xmlText EQ 'Member_Name'>
    <cfset memberName = keyValue[i].Value.xmlText>
</cfif>
<cfif keyValue[i].Key.xmlText EQ 'Position_Name'>
    <cfset positionName = keyValue[i].Value.xmlText>
</cfif>
<cfif keyValue[i].Key.xmlText EQ 'Member_Guid'>
    <cfset memberGuid = keyValue[i].Value.xmlText>
</cfif>
<cfif keyValue[i].Key.xmlText EQ 'Employer__c'>
    <cfset employer = keyValue[i].Value.xmlText>
</cfif>
<cfif keyValue[i].Key.xmlText EQ 'Primary_EmailAddress_EmailAddress'>
    <cfset email = keyValue[i].Value.xmlText>
</cfif>
<cfif keyValue[i].Key.xmlText EQ '_Default_PhoneNumber_PhoneNumber'>
    <cfset phone = keyValue[i].Value.xmlText>
</cfif>
<cfset chapterOfficer = {
    aName = #memberName#,
    bPositionName = #positionName#,
    cMemberGuid = #memberGuid#,
    dCompany = #employer#,
    eEmail = #email#,
    fPhone = #phone#
    } />
</cfloop> 
```

这对单个成员很有用。倾倒“chapterOfficer”给了我我需要的一切。我的想法是为每个官员构建一堆结构并将它们放在一个数组中，chapterOfficers，然后我将循环通过它来构建我的页面：

```
<cfif structKeyExists(chapterOfficer, "aName")>
    <cfset arrayAppend(chapterOfficers, chapterOfficer)>
</cfif> 
```

我将这段代码放在结构创建者的末尾，就在循环结束之前。我不明白结果，因为它在数组中放置了 8500 多个结构。有些结构没有条目，有些有部分条目，有些是以前的重复，有些有一个官员的电子邮件和另一个人的电话——啊！我试图做的是，对于循环的每次迭代，测试我的页面需要的键/值对是否存在，将它们添加到新创建的结构中，并将结构添加到现有数组中。

我正在使用的 XML 结果中确实有数千行，但只有 10 名官员。我不确定为什么要创建 8500 个奇怪的结构 - 除非键“aName”存在，否则不应将结构添加到数组中，除非在任何给定的传递中定义 #memberName# 的值，否则不应发生环形。创建的任何结构都应该只包含我分配给它的键/值对。

但这根本不是正在发生的事情。我很确定我让这种方式比实际上更复杂，但它真的让我难过。我将*非常*感谢任何提示、建议、建议、指点——非常感谢你们的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T17:06:59.817

如果有人感兴趣，我通过在两个不同页面上将包含查询的 SOAP 信封分成两部分来获得一个可行的解决方案。

第一个信封查询委员会信息（成员姓名、ID、职位）并遍历生成的 XML 以加载多维数组，然后将其保存为会话变量。然后将我带到另一个页面，在那里我获取个人数据（来自第二个表的 ID、电子邮件、电话），并创建了第二个多维数组。

每个表都以不同的顺序输出其信息（当然），所以我然后遍历两个数组并根据 ID 对它们进行排序。然后我再次循环它们以输出到页面。

我最终得到了一个很好的姓名、职位、电子邮件和电话号码的列表。它有效，但多么令人头疼！当然有更好的方法来做到这一点......

# android - 自定义 AlertDialog 中的布局问题

> ID：11812801
> 
> 赞同：1
> 
> 时间：2012-08-04T23:33:32.923
> 
> 标签：android, layout

我对如下实现的自定义对话框有疑问：

```
 AlertDialog.Builder dialogBuilder = new AlertDialog.Builder(this);

    dialogBuilder.setTitle("Title");
    dialogBuilder.setMessage("Message");

    LinearLayout layout = new LinearLayout(this);
    layout.setOrientation(LinearLayout.VERTICAL);
    layout.setGravity(Gravity.CENTER_HORIZONTAL | Gravity.CENTER_VERTICAL);

    // Set an EditText view to get user input
    EditText input = new EditText(this);
    input.setHeight(LayoutParams.WRAP_CONTENT);
    input.setWidth(LayoutParams.MATCH_PARENT);
    layout.addView(input);

    TextView text = new TextView(this);
    text.setText("show some text here");
    text.setHeight(LayoutParams.WRAP_CONTENT);
    text.setWidth(LayoutParams.MATCH_PARENT);
    //text.setHeight(50);
    //text.setWidth(150);
    text.setVisibility(TextView.VISIBLE);
    layout.addView(text);

    Button btn = new Button(this);
    btn.setText("Button");
    btn.setHeight(LayoutParams.WRAP_CONTENT);
    btn.setWidth(LayoutParams.WRAP_CONTENT);
    layout.addView(btn);

    dialogBuilder.setView(layout);
    dialogBuilder.setPositiveButton("Ok", null);

    AlertDialog myDialog = dialogBuilder.create();
    myDialog.show(); 
```

问题是`TextView text`如果我在上面的代码中设置它的宽度和高度，它不会显示在对话框中。仅当我对属性（两条注释行）进行硬编码时才会出现，但这不是所需的行为。

此外，虽然 Button 的宽度设置为`WRAP_CONTENT`，但它与屏幕一样大。

有人可以指出我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T00:26:47.090

您应该使用 setLayoutParams() 而不是 setHeight() 和 setWidth()

代替

```
text.setHeight(LayoutParams.WRAP_CONTENT);
text.setWidth(LayoutParams.MATCH_PARENT); 
```

有了这个

```
text.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.MATCH_PARENT)); 
```

编辑：关于按钮使用：

```
btn.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT)); 
```

它对我有用...

编辑2：如果你使用`text.setHeight(LayoutParams.WRAP_CONTENT);`它等于`text.setHeight(-2);`所以你`textView`将是-2像素高度并且将不可见......`Buttons`另一方面，使用ninepatch图像的其他人不会比ninepatch本身小。

# php - PHP - SimpleXML 使用从 ForEach 循环中创建的对象创建的变量

> ID：11812804
> 
> 赞同：0
> 
> 时间：2012-08-04T23:33:45.877
> 
> 标签：php, variables, object, foreach, simplexml

我正在尝试为我的新网站开发导航面包屑系统。我的页面使用 SimpleXML 从 xml 数据库中检索它的文件名和页面信息。

我收到**preg_replace() 的 php 错误；**最后一个代码块中的函数：*解析错误：语法错误，第 21 行 /home/content/85/8762385/html/joelsdesign/movies/we-are-hiring.php 中的意外 T_STRING*

在文件的头部，有 **$dom = simplexml_load_file('pages.xml');**

这是我的 xml 文件的内容：http: [//joelsdesign.info/movies/scores.xml](http://joelsdesign.info/movies/scores.xml)

我的导航菜单是“必需的”，并且 require 语句存储在我的名为**$nav的变量中**

```
foreach ($dom->page as $page) {
    $title = $page->title;
    $file = $page->file;
    $nav = file_get_contents('require/nav.php');
    $nav = preg_replace("<li><a href=\"".$file."\">".$title."</a></li>", "<li class="current"><a href=\"".$file."\">".$title."</a></li>", $nav);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T23:36:15.903

单词周围的引号`current`没有转义：

```
$nav = preg_replace("<li><a href=\"".$file."\">".$title."</a></li>", "<li class=\"current\"><a href=\"".$file."\">".$title."</a></li>", $nav); 
```

此外，您不应该在不使用正则表达式的情况下使用 preg_replace。您应该使用 str_replace。

如果您确实需要 preg_replace 您将编写一个正则表达式 - 正则表达式 - 需要以分隔符开头，最常见的是正斜杠`/`。`<`因此，第二个错误是由于不是正则表达式的已知分隔符这一事实造成的。

# ios - 使用适用于 iOS 的 Adob e Builder (flex) 拍照

> ID：11812807
> 
> 赞同：2
> 
> 时间：2012-08-04T23:34:25.343
> 
> 标签：ios, apache-flex, camera

有谁知道如何使用 flex 拍照？我有点失落！我找到了一些教程，但没有工作！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T00:03:00.263

XpenseIt（[Flex 移动项目 FXP 下载](http://devgirl.org/files/RIAUnleashed/)）示例代码提供了这个相机实现。

调用`takePicture()`启动相机，然后从`loaderInfo.loader`.

```
var bitmapData:BitmapData = new BitmapData(loaderInfo.width, loaderInfo.height);
bitmapData.draw(loaderInfo.loader); 
```

相机实用程序类如下：

**类：CameraUtil**

```
package utils
{
    import events.CameraEvent;

    import flash.display.BitmapData;
    import flash.display.Loader;
    import flash.display.LoaderInfo;
    import flash.events.Event;
    import flash.events.EventDispatcher;
    import flash.events.MediaEvent;
    import flash.filesystem.File;
    import flash.filesystem.FileMode;
    import flash.filesystem.FileStream;
    import flash.media.CameraRoll;
    import flash.media.CameraUI;
    import flash.media.MediaPromise;
    import flash.media.MediaType;
    import flash.utils.ByteArray;

    import mx.events.DynamicEvent;
    import mx.graphics.codec.JPEGEncoder;

    [Event(name = "fileReady", type = "events.CameraEvent")]
    public class CameraUtil extends EventDispatcher
    {
        protected var camera:CameraUI;
        protected var loader:Loader;
        public var file:File;

        public function CameraUtil()
        {
            if (CameraUI.isSupported)
            {
                camera = new CameraUI();
                camera.addEventListener(MediaEvent.COMPLETE, mediaEventComplete);
            }
        }

        public function takePicture():void
        {
            if (camera)
                camera.launch(MediaType.IMAGE);
        }

        protected function mediaEventComplete(event:MediaEvent):void
        {
            var mediaPromise:MediaPromise = event.data;
            if (mediaPromise.file == null)
            {
                // For iOS we need to load with a Loader first
                loader = new Loader();
                loader.contentLoaderInfo.addEventListener(Event.COMPLETE, loaderCompleted);
                loader.loadFilePromise(mediaPromise);
                return;
            }
            else
            {
                // Android we can just dispatch the event that it's complete
                file = new File(mediaPromise.file.url);
                dispatchEvent(new CameraEvent(CameraEvent.FILE_READY, file));
            }
        }

        protected function loaderCompleted(event:Event):void
        {
            var loaderInfo:LoaderInfo = event.target as LoaderInfo;
            if (CameraRoll.supportsAddBitmapData)
            {
                var bitmapData:BitmapData = new BitmapData(loaderInfo.width, loaderInfo.height);
                bitmapData.draw(loaderInfo.loader);
                file = File.applicationStorageDirectory.resolvePath("receipt" + new Date().time + ".jpg");
                var stream:FileStream = new FileStream()
                stream.open(file, FileMode.WRITE);
                var j:JPEGEncoder = new JPEGEncoder();
                var bytes:ByteArray = j.encode(bitmapData);
                stream.writeBytes(bytes, 0, bytes.bytesAvailable);
                stream.close();
                trace(file.url);
                dispatchEvent(new CameraEvent(CameraEvent.FILE_READY, file));
            }
        }

    }
} 
```

# vim - 如何在 Vim 中使用 UTF-8 序列键入 Unicode 字符？

> ID：11812810
> 
> 赞同：10
> 
> 时间：2012-08-04T23:35:56.723
> 
> 标签：vim, unicode

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-04T23:40:53.390

I just found this solution:

In insert mode, press `Ctrl`-`R` `="\xe2\x82\xa9"` `Enter`.

I'd like to know about any other (shorter?) methods, though.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-05T01:03:06.953

Same solution with a twist of automation to help remember it:

```
command! -nargs=* UTF8 call EncodeUTF8(<f-args>)
fun! EncodeUTF8(...)
   let utf8str = ""
   for i in a:000
      let utf8str .= "\\x" . i
   endfor
   exe "norm i" . eval("\"".utf8str."\"")
endfun 
```

Now you can `:UTF8 e2 82 a9`

You can also type this particular character with `<C-k>W=`. See `:help digraph-table-mbyte`.

Note that you can also get information about a character with `ga` and `g8` in normal mode. So it might be easier to just do `<C-r>="\xe2\x82\xa9"` once and then do `ga` to get the code-point.

# css - 选择基于“类”声明的存在

> ID：11812811
> 
> 赞同：0
> 
> 时间：2012-08-04T23:35:58.827
> 
> 标签：css, class, css-selectors

CSS中有没有办法根据`class`声明的存在进行选择，但不是它的实际名称？我想说的是，对于所有`body`有`id=declaration`和任何`class`的，`display: block`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T23:38:53.940

是的，您可以使用[属性选择器](http://www.w3.org/TR/selectors/#attribute-representation)来测试属性是否存在`class`：

```
body#declaration[class] {
    display: block;
} 
```

# jquery-isotope - 如何确保 div 和同位素没有空白

> ID：11812818
> 
> 赞同：0
> 
> 时间：2012-08-04T23:37:25.353
> 
> 标签：jquery-isotope

我正在尝试在[http://www.gablabelle.com/](http://www.gablabelle.com/)创建网格布局。

我有多个 div 漂浮着同位素，我想知道为什么会有一些空白空间以及为什么浮动 div 没有填补空白。

![在此处输入图像描述](../Images/9ff4c42bb24daa189151ecfac301587d.png)

与此处相同的问题：[How to Avoid gaps using Isotope with Masonry layout](https://stackoverflow.com/questions/10738542/how-to-avoid-gaps-using-isotope-with-masonry-layout)

非常感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T06:02:11.587

如果您的项目按特定顺序排列，您不想通过调用 shuffle 方法“破坏”，这将是不可避免的。然后，即使在改组时，您也无法保证某些元素跨越两列的适合类型。您也许可以[改用这个插件](http://codecanyon.net/item/jquery-tiles-gallery/2281417)，但这是一个非常不同的逻辑。

# ruby-on-rails-3 - FactoryGirl 序列失败

> ID：11812823
> 
> 赞同：1
> 
> 时间：2012-08-04T23:38:50.183
> 
> 标签：ruby-on-rails-3, testing, factory-bot

> **可能重复：**
> [Factory Girl 序列不递增](https://stackoverflow.com/questions/11441505/factory-girl-sequences-not-incrementing)

看来 FactoryGirl 没有`email`正确执行序列，因为我在尝试创建 user 时遇到了失败`6.times`。（还要注意：我对该`email`字段有唯一性约束。）

```
FactoryGirl.define do
  factory :user do
    username 'asddfsa'
    sequence(:email) {|n| "asd01#{n}@gmail.com" }
    ...
  end
end 
```

规格：

```
describe User do
  describe ".matches" do
    before :each do
      6.times { FactoryGirl.create(:user, :gender => 'Female', :seeking => 'Men') }
      4.times { FactoryGirl.create(:user, :gender => 'Male', :seeking => 'Women') }
      ...
    end
    ... 
```

失败：

```
Failure/Error: 6.times { FactoryGirl.create(:user, :gender => 'Female', :seeking => 'Men') }
     ActiveRecord::RecordInvalid:
       Validation failed: Email has already been taken
     # ./spec/models/user_spec.rb:6:in `block (4 levels) in <top (required)>'
     # ./spec/models/user_spec.rb:6:in `times'
     # ./spec/models/user_spec.rb:6:in `block (3 levels) in <top (required)>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T15:58:48.830

[Dean Brundage的问题](https://stackoverflow.com/questions/11441505/factory-girl-sequences-not-incrementing/)解决了我的问题......

另外我没有正确配置数据库清理器，这也是一个错误；）

# apache - 我如何通过.htaccess 告诉页面“那些文件不再在这里，它们在这里......”？

> ID：11812826
> 
> 赞同：0
> 
> 时间：2012-08-04T23:38:54.653
> 
> 标签：apache

我在服务器上有一个站点，可以访问 ftp 但没有 SSH。

由于必要的 DNS 更改，该站点的主页正在尝试从不存在的文件路径加载图像。

我可以使用 .htaccess 告诉页面文件所在的位置吗？

它要查找的所有文件都在一个文件夹中，但嵌套结构与 DNS 更改之前不同。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T23:41:35.473

试试[`Alias`](http://httpd.apache.org/docs/2.2/mod/mod_alias.html)？

```
Alias /the/url/path/that/no/longer/exists /physical/path/to/where/files/are 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T23:42:45.347

在 .htaccess 中：

```
RewriteEngine On
RewriteRule ^oldpage.html$ http://yoursite.com/newpage.html [R=301,L] 
```

# c++ - 我可以从文件中保存和加载 C++ 函数吗？

> ID：11812827
> 
> 赞同：1
> 
> 时间：2012-08-04T23:38:55.157
> 
> 标签：c++

我有一个 GUI 类，它存储指向在鼠标按下事件等事件上触发的函数的指针。我希望能够读取和写入该函数存储在文件中的内存块，然后像 DLL 一样将其加载回内存中。有没有办法做到这一点？此外，我完全了解 Lua 或 Python 等脚本解释器，但我想实际编写一个 C++ 函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T00:11:06.027

没有实际的方法可以做到这一点。问题是函数的某些部分可能会被编译器优化掉或内联或拆分为多个部分。此外，您可能会遇到链接、调用约定等问题。最后，该函数可能取决于全局状态，在这种情况下它无论如何都不会工作。

最好的办法是定义一种序列化格式，该格式表示对应用程序中一组特定核心函数的调用序列。或者只是使用脚本语言，除了更好并且为您完成之外，这是相同的事情。Lua 的嵌入重量非常轻。

# java - int 到 string 然后放入 for

> ID：11812830
> 
> 赞同：0
> 
> 时间：2012-08-04T23:39:18.680
> 
> 标签：java, android, android-edittext, int

我正在尝试制作一个 android 应用程序，用户在其中输入一个值，然后他们按下下面的按钮。当他们按下按钮时，我希望它将编辑文本值添加到自身，然后在屏幕上显示结果。例如，如果用户在编辑文本中输入了两个，当他们按下按钮时，我希望应用程序执行 2+2，然后在屏幕上显示结果 4。这是我到目前为止所拥有的...

```
int AnsNum;
EditText Km;
Button KmPL;
TextView Ans;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Km = (EditText) findViewById(R.id.etKm);
    KmPL = (Button) findViewById(R.id.button1);
    Ans = (TextView) findViewById(R.id.tvAns);

    KmPL.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            Km = (EditText) findViewById(R.id.etKm);
            int etKm = new Integer(Km.getText().toString()).intValue();

            int AnsNum = etKm+etKm;
            Ans.setText(AnsNum);        
        }
    });
} 
```

在主 java 文件和...

```
<TextView
    android:id="@+id/tvAns"
    android:textSize="100dp"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center"
    android:text="0" />

<EditText
    android:id="@+id/etKm"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:hint="Km"
    android:textSize="100dp"
    android:inputType="numberSigned" />

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:textSize="75dp"
    android:text="Km per Litres" /> 
```

在 main.xml 文件中。但是，每当我尝试在手机或模拟器上运行应用程序天气时，它会说它已意外停止，请再试一次。我已经尝试了几次，但它只是不起作用。

我知道这可能是一个愚蠢的问题，但我对编程是全新的，如果你能教我我做错了什么，它会帮助我加载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T00:19:36.780

我认为你的主要问题在这里，当你写：

```
Ans.setText(AnsNum); 
```

您正在尝试调用[TextView.setText(int resId)](http://developer.android.com/reference/android/app/Service.html)，这绝对不是您想要的。相反，正如 Ivan Seidel 所说，你应该打电话给

```
Ans.setText("" + AnsNum); 
```

[使用字符串连接运算符](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html)将 AnsNum 转换为 String （此外，编译器将对此进行优化，以不使用连接运算符，而是使用 StringBuilder 类，因为这样更有效）。

* * *

此外，而不是这个：

```
int etKm = new Integer(Km.getText().toString()).intValue(); 
```

最好像这样调用类 Integer [public static Integer valueOf(String s)](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Integer.html#valueOf%28java.lang.String%29)的静态方法：

```
int etKm = Integer.valueOf(Km.getText().toString()); 
```

它返回 Integer **objet**，它会自动转换为[int](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)类型

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T23:49:37.537

尝试这个：

```
Km = (EditText) findViewById(R.id.etKm);
int etKm = Integer.parseInt(Km.getText().toString());
int AnsNum = etKm+etKm;
Ans.setText(AnsNum+""); 
```

我通常只打印数字类型，后跟一个+“”，因为它转换为字符串......

我不能在这里测试它，所以你需要告诉我是否有效

# ruby-on-rails - 在 Rails 中，如何在新对象的 Create 方法中自动更新用户以拥有另一个类的新创建对象？

> ID：11812834
> 
> 赞同：0
> 
> 时间：2012-08-04T23:40:03.623
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我的应用程序有`Users`和`Dwellings`。当 a`user`创建 a`dwelling`时，`user`成为through a rails 关联的`owner`。`dwelling`通过我的`create`方法，`user_id`已成功分配给列中新创建`dwelling`的`owner_id`，但是`dwelling_id`没有传播到`dwelling_id`的`user`记录中。我不确定是否是关系或方法设置不正确，但是当尝试保存 时似乎会出现问题`user`，因为`dwelling`已成功创建。以下是我的模型和方法实现。

**住宅模型**

```
# dwelling.rb
class Dwelling < ActiveRecord::Base
  attr_accessible :street_address, :city, :state, :zip, :nickname

  belongs_to :owner, :class_name => "User", :foreign_key => "owner_id"
  has_many :roomies, :class_name => "User"

  validates :street_address, presence: true
  validates :city, presence: true
  validates :state, presence: true
  validates :zip, presence: true

end 
```

--

**用户模型**

```
# user.rb
class User < ActiveRecord::Base
  attr_accessible :email, :first_name, :last_name, :password, :password_confirmation, :zip
  has_secure_password

  before_save { |user| user.email = email.downcase }
  before_save :create_remember_token

  belongs_to :dwelling
  has_many :properties, :class_name => "Dwelling", :foreign_key => "owner_id"
... 
```

--

**住宅控制器（创建方法）**

```
# dwellings_controller.rb
def create
  @dwelling = current_user.properties.build(params[:dwelling])

  if @dwelling.save
    current_user.dwelling = @dwelling
    if current_user.save
      flash[:success] = "Woohoo! Your dwelling has been created. Welcome home!"
    else
    flash[:notice] = "You have successfully created a dwelling, but something prevented us from adding you as a roomie. Please email support so we can try to correct this for you."
    end
    redirect_to current_user
    else
    render 'new'
  end
end 
```

--

如上所述，`dwelling`已成功创建，但从`else`条件触发了“...但有些东西阻止我们将您添加为新秀...”闪光灯。

**更新 2012 年 8 月 3 日晚上 9:11 东部标准时间**

我更新了`create`用于`user.save!`强制交易的操作。输出以下错误。显然以某种方式需要密码。

```
ActiveRecord::RecordInvalid in DwellingsController#create

Validation failed: Password can't be blank, Password is too short (minimum is 6 characters), Password confirmation can't be blank 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T00:35:40.763

更新：为了清楚起见，我误解了下面答案中的用户/居住关系，所以这不是问题的解决方案。

* * *

我认为您误解了关联的工作方式。使用`belongs_to`/`has_many`关系，只有*属于*的模型（在本例中为`Dwelling`）具有指向另一条记录的外键（在本例中，`User`通过外键`owner_id`）。另一条记录 ( `User`) 不需要每个关联的键，这将是多余的。

同样，您不需要分配`@dwelling`给`current_user.dwelling`，也不需要保存`current_user`. 只需`@dwelling`在构建后保存就`current_user.properties.build(params[:dwelling])`足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T03:22:45.600

确切的问题实际上取决于我们尚未看到的应用程序的详细信息。例如，我们不知道`current_user`定义是什么，我们不知道您的用户是如何创建的，我们不知道有关您的表单的任何详细信息等。

我现在没有更多的时间来处理这个问题，但是您可以尝试以下操作。

1.  首先，`has_secure_password`从您的`User`模型中删除，看看您是否仍然遇到问题。这仅用于故障排除，因为最终您需要重新添加`has_secure_password`。

2.  确保您的用户表有一个`password_digest`列。

3.  确保`current_user`在 users 表中有一个值`password_digest` 也许您在添加`has_secure_password`功能之前创建了用户，这将导致 NULL 值`password_digest`。

4.  确保它`current_user`实际上是一个持久化（即在数据库中）用户。您可以通过在上面添加以下行来做到这一点`current_user.save!`：

    ```
    raise StandardError, "current_user is not persisted" unless current_user.persisted? 
    ```

5.  我假设`current_user`已经作为持久用户存在。如果您实际上是在做一些更奇特的事情，例如尝试以相同的形式创建用户和住宅，那么还需要考虑其他几个因素。

我暂时没有额外的时间来帮助解决这个问题。最好的祝愿它得到解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T15:03:35.293

这是保存`user`. 我更新`create`了`Dwellings`控制器中的操作以强制保存`user`使用`user.save!`来破坏应用程序并获得明确的错误。Rails 抱怨缺少`password`（和密码长度）和`password_confirmation`. 我正在对我的模型进行`presence`验证`password`，`password_confirmation`以及`length`对`password`我的`User`模型进行验证。我将这些验证更新为仅在`create`. 这解决了这个问题。由于不再强制执行验证`user.save`，`dwelling_id`已成功添加到`user`记录中。新实现的代码如下。

```
#dwellings_controller.rb
...
def create
  @dwelling = current_user.properties.build(params[:dwelling])

  if @dwelling.save
    current_user.dwelling = @dwelling
    if current_user.save
      flash[:success] = "Woohoo! Your dwelling has been created. Welcome home!"
    else
      flash[:notice] = "You have successfully created a dwelling, but something prevented us from adding you as a roomie. Please email support so we can try to correct this for you."
    end
    redirect_to current_user
    else
      render 'new'
    end
  end
... 
```

--

```
#user.rb
...
  validates :password, presence: { :on => :create }, length: { minimum: 6, :on => :create }
  validates :password_confirmation, presence: { :on => :create } 
```

# java - foreach 二维数组赋值

> ID：11812837
> 
> 赞同：1
> 
> 时间：2012-08-04T23:41:12.787
> 
> 标签：java

以下代码将 2d 布尔数组中大约一半的值分配给 true，另一半分配给 false：

```
boolean[][] btab = new boolean[10][10];
for (int row = 0; row < btab.length; row++) {
    for (int col = 0; col < btab[row].length; col++) {
        btab[row][col] = (Math.random() < 0.5);
    }
} 
```

我认为使用 foreach 循环的以下代码会做同样的事情......

```
boolean[][] btab = new boolean[10][10];
for (boolean[] row : btab) {
    for (boolean b : row) {
        b = (Math.random() < 0.5);
    }
} 
```

但是 2d 数组中的所有值都是错误的，我猜这意味着赋值只是没有发生，或者 b 是我要分配的布尔值的副本，而不是对它的引用。谁能解释发生了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T23:44:20.193

您的猜测是正确的，在原始类型（如布尔类型）的情况下，增强 for 中的变量只是数组中实际值的副本。

当涉及到对象时，您将获得引用值的副本（不是真实对象），因此您可以修改其内容，但不能替换对象，即创建一个新实例并替换实际对象。例子：

```
List<SomeClass> lstSomeClass;
//create and fill the list...
for(SomeClass sc : lstSomeClass) {
    //this will modify the current sc object data
    sc.setSomeAttribute(someNewValue);
    //this will compile but it won't replace the currenct sc object in the list
    sc = new SomeClass();
} 
```

如果你想让代码工作，使用第一种方式来填充数组。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-04T23:45:39.713

Foreach 循环返回数组元素的值，而不是对它的引用。Foreach 不能用于修改基元数组中的值。即使在对象数组中，您也可以修改对象的内容，但不能修改存储在数组中的引用。

# node.js - 通过 npm 安装节点 iconv 失败

> ID：11812842
> 
> 赞同：4
> 
> 时间：2012-08-04T23:41:53.990
> 
> 标签：node.js, npm, iconv

我在安装节点 iconv 时遇到问题。

这是我尝试将其安装在目录 ~/please-work/ 中时发生的情况

```
please-work >> npm install iconv
npm http GET https://registry.npmjs.org/iconv
npm http 304 https://registry.npmjs.org/iconv

> iconv@1.2.3 install /Users/j/please-work/node_modules/iconv
> node-gyp rebuild

CC(target) Release/obj.target/iconv/deps/libiconv/libcharset/lib/localcharset.o
CC(target) Release/obj.target/iconv/deps/libiconv/lib/iconv.o
In file included from ../deps/libiconv/lib/iconv.c:71:
In file included from ../deps/libiconv/lib/converters.h:133:
../deps/libiconv/lib/utf7.h:162:13: warning: comparison of integers of different signs: 'int' and 'unsigned int' [-Wsign-compare]
  if (n < count+base64count+1)
      ~ ^ ~~~~~~~~~~~~~~~~~~~
../deps/libiconv/lib/utf7.h:331:11: warning: comparison of integers of different signs: 'int' and 'unsigned int' [-Wsign-compare]
if (n < count)
    ~ ^ ~~~~~ 
```

....然后像这样持续了很长时间

然后就这样结束了……

```
620 warnings generated.
  CXX(target) Release/obj.target/iconv/binding.o
  SOLINK_MODULE(target) Release/iconv.node
  File "./gyp-mac-tool", line 159
    fd = os.open(lockfile, os.O_RDONLY|os.O_NOCTTY|os.O_CREAT, 0o666)
                                                                   ^
SyntaxError: invalid syntax
make: *** [Release/iconv.node] Error 1
gyp ERR! build error 
gyp ERR! stack Error: `make` failed with exit code: 2
gyp ERR! stack     at ChildProcess.onExit (/usr/local/lib/node_modules/npm/node_modules/node-gyp/lib/build.js:215:23)
gyp ERR! stack     at ChildProcess.EventEmitter.emit (events.js:91:17)
gyp ERR! stack     at Process._handle.onexit (child_process.js:674:10)
gyp ERR! System Darwin 11.4.0
gyp ERR! command "node" "/usr/local/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js" "rebuild"
gyp ERR! cwd /Users/j/please-work/node_modules/iconv
gyp ERR! node -v v0.8.5
gyp ERR! node-gyp -v v0.6.3
gyp ERR! not ok 
npm ERR! iconv@1.2.3 install: `node-gyp rebuild`
npm ERR! `sh "-c" "node-gyp rebuild"` failed with 1
npm ERR! 
npm ERR! Failed at the iconv@1.2.3 install script.
npm ERR! This is most likely a problem with the iconv package,
npm ERR! not with npm itself.
npm ERR! Tell the author that this fails on your system:
npm ERR!     node-gyp rebuild
npm ERR! You can get their info via:
npm ERR!     npm owner ls iconv
npm ERR! There is likely additional logging output above.

npm ERR! System Darwin 11.4.0
npm ERR! command "node" "/usr/local/bin/npm" "install" "iconv"
npm ERR! cwd /Users/j/please-work
npm ERR! node -v v0.8.5
npm ERR! npm -v 1.1.46
npm ERR! code ELIFECYCLE
npm ERR! 
npm ERR! Additional logging details can be found in:
npm ERR!     /Users/j/please-work/npm-debug.log
npm ERR! not ok code 0 
```

任何帮助将不胜感激！谢谢，-J

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T22:58:50.663

iconv 的作者指出我可能运行了错误的python 版本。

一旦我安装了 python 2.7.3 就很好了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T07:33:49.710

看起来某些库`iconv`依赖存在问题，但编译器警告可能会被忽略。

真正的失败发生在 中`"node" "/usr/local/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js" "rebuild"`，因此检查 node-gyp 文档的好地方是：[https ://github.com/TooTallNate/node-gyp/](https://github.com/TooTallNate/node-gyp/)

我不太了解您正在使用的平台（似乎是Mac），您是否`make`安装了gcc？node-gyp github 页面提到了这些要求。

我不确定您的使用要求。如果您花费 50% 的应用程序时间更改文本编码格式，也许您需要`iconv`. 否则可以试试[https://github.com/ashtuchkin/iconv-lite/](https://github.com/ashtuchkin/iconv-lite/)？由于它是一个纯 JS 实现，如果您对此有任何安装问题，我会感到非常惊讶。:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-22T17:16:34.850

我在 Ubuntu 安装 iconv 时出错。就我而言，我解决了安装 g++ 以允许编译 iconv 的问题：

```
sudo apt-get install g++ 
```

并重新安装 iconv。希望对其他人有所帮助！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-15T12:11:21.953

我使用 Ubuntu 12.04.3 apt-get install build-essential 解决了这个问题

# php - 关于保存 SVG 文件和检索的疑问

> ID：11812849
> 
> 赞同：1
> 
> 时间：2012-08-04T23:43:08.157
> 
> 标签：php, database, json, file, svg

我制作了一个系统，用户上传 Gerber 文件（印刷电路板格式），然后用 PHP 将该文件（GCode）转换为 SVG。

我现在面临一个问题，这实际上是一个架构问题。

我应该将 SVG 保存在文件中还是数据库中？

我应该将 SVG 作为 JSON 返回（{name: test, data: SVGFILEGOESHERE}）还是只呈现为 .svg？我的意思是，对于大数据结构来说，JSON 是否足够安全？

编辑：

转换后的 SVG 将在网站的许多视图中使用，例如：产品页面、配置页面……它不会只显示一次……

主要思想是向服务器发送一个 GCode，一旦有人需要该文件，如果它没有被渲染，那么它会渲染，并将 SVG 保存在数据库中，或者在一个文件中，并存储一个缓存，以避免重新-多次处理同一个文件。

SVG 将使用 ajax 检索，并在页面上~~呈现~~插入（但我认为我将使用 ajax 加载所有内容）。

文件一旦发送到服务器，永远不会被修改，但可以删除，然后重新发送......

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-04T23:59:48.077

**更新**

对于您正在做的事情，我建议将 SVG 存储为单独的文件，并将 SVG 作为图像返回（提示：`header("Content-type: image/svg+xml");`在 PHP 中）。

作为旁注，您说`The SVG, would be retrieved with ajax, and also rendered with PHP on the page.` 这不太对；SVG 是一个文本/XML 文件。PHP 不会渲染 SVG，它只会将 SVG 的代码发送给客户端。客户端机器*必须*是解析 SVG 代码并将其作为可见图像呈现给客户端的机器。

**原始答案**

答案是：**视情况而定**。你没有给我们太多的继续。

SVG 是 ASCII 文本，有点像 HTML。[你可以在这里](http://www.w3.org/TR/SVG/struct.html)了解更多。因此，以 JSON 格式发送 SVG 文件没有任何“错误”，只需确保所有引号都被转义。

JSON 适用于大型结构；问题不在于大小，而在于将其从服务器发送到客户端所需的时间，然后是 javascript 解析 JSON 并将 SVG 呈现为图像所需的时间。我不知道您的设置是什么样的，或者 SVG 文件有多大，但是对于非常大的 SVG 图像，您可能希望将它们放在一个单独的请求中，该请求仅返回 SVG，这样客户端机器就不会花费时间解析 JSON。您必须对您的应用程序进行性能测试，以确定最适合您的需求。

至于将SVG存储为文件还是数据库，这取决于数据库，它有多少内存用于索引以及如何构建索引，是SQL还是NoSQL，或者它有多少存储空间，多少流量你在网站上有，你是如何备份数据库和/或文件的，等等。人们已经使用数据库来存储用户图像的缩略图，所以它绝对可以在其中保存 SVG 文件。这完全取决于数据库的速度和稳定性。就个人而言，我更喜欢将图像和大量文本保存在硬盘上的单独文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T23:57:23.273

这取决于（至少）两件事：

1.  您打算如何使用这些数据（以后可以修改吗？）
2.  网站将获得多少流量。

如果以后可以修改 SVG 数据，我会将其保存在数据库中。JSON数据在那里应该没问题。

如果您认为您将获得大量流量，那么除非您有良好的缓存机制，否则我个人不会将其保存在数据库中。我不确定您是否使用 MySQL，但 MySQL 中的查询缓存可能对缓存大量数据不太满意。

我个人会做的是将SVG保存在一个文件中，并以可以根据数据库中的关联记录检索它的方式存储它，即`/uploads/svg/$username/$circuitboardid.svg`

如果您有很多用户（超过 30,000 个），您的 svg 目录会变得很大，并且取决于文件系统，您可能会遇到每个文件夹的文件数限制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-27T16:31:36.217

我通过在 php 和 mySQL 数据库中使用以下代码段来实现这一点： 首先，记住 svg 基本上存储在文本中，就像 HTML 一样。svg 标签，无论是不同的标签，都与 HTML 标签非常相似。

存入数据库。您必须在实际的 mySQL Insertcall 中使用以下代码段。我发现如果你先对变量执行此操作，然后将变量放入插入调用中，它将不起作用。该函数必须在 mySQL 语句中。
`mysql_real_escape_string($myValue)`

检索到文本框中的值。假设您的值已经从数据库中检索出来，并且现在位于名为 theValues 的数组中。基本上我正在删除任何反斜杠，但在此之前我要确保它可以使用 htmlentities 正确显示。因为你在 svg 中没有反斜杠，我知道它修复了服务器用 \" 替换引号的地方。如果你在 svg 中遇到一些反斜杠，你只需要在你的替换函数中更聪明一点。
`$myValue= str_replace("\\", "", htmlentities($theValues->myValue)); echo $myValue;`

回显到页面的原因与上述相同，但 htmlentities 功能使其仅显示 svg 的文本，而不是处理 svg 并显示您的图片。这只需要在文本已存储在数据库中后显示 svg 但它不会损害您的显示如果它不是第一个数据，只是一个不必要的函数调用。
`str_replace("\\", "",$myValue)`

# c++ - Arduino 使用 C 还是 C++？

> ID：11812850
> 
> 赞同：70
> 
> 时间：2012-08-04T23:43:14.030
> 
> 标签：c++, c, arduino

我在一个地方看到 Arduino 使用“标准”C，在另一个地方看到它使用“标准”C++，依此类推。

它是哪一个？

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-08-05T01:29:02.073

Arduino 草图是用 C++ 编写的。

这是您将遇到的典型构造：

```
LiquidCrystal lcd(12, 11, 5, 4, 3, 2);
...
lcd.begin(16, 2);
lcd.print("Hello, World!"); 
```

那是 C++，不是 C。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-08-04T23:53:49.293

两者都受支持。引用[Arduino 主页](http://code.google.com/p/arduino/)，

> 核心库是用 C 和 C++ 编写的，并使用 avr-gcc 编译

请注意，C++ 是 C 的超集（嗯，[差不多](http://www.stroustrup.com/bs_faq.html#C-is-subset)），因此通常看起来非常相似。我不是专家，但我想你在第一年在那个平台上为 Arduino 编程的大部分内容都不需要任何东西，只需要普通的 C。

# android - 有没有办法查看控件是否在屏幕外并且未绘制？

> ID：11812856
> 
> 赞同：0
> 
> 时间：2012-08-04T23:44:29.190
> 
> 标签：android

我有一个应用程序，在非常小的屏幕上，最底部的文本视图没有被绘制（它不在屏幕上）。有没有办法查看它是否在屏幕外？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T23:49:57.400

是的。实际上，您可以使用一个非常好的工具，称为[HierarchyViewer](http://developer.android.com/tools/debugging/debugging-ui.html#HierarchyViewer) ，它会为您提供各种有用的信息，例如视图的布局方式、每个视图的规格以及绘制所需的时间。

> Hierarchy Viewer 应用程序允许您调试和优化您的用户界面。它提供了布局的视图层次结构（View Hierarchy 窗口）的可视化表示和显示的放大视图（Pixel Perfect 窗口）。

[http://developer.android.com/tools/debugging/debugging-ui.html#HierarchyViewer](http://developer.android.com/tools/debugging/debugging-ui.html#HierarchyViewer)

# php - 使用 HTML2PDF 和 MySQL 创建 PDF

> ID：11812864
> 
> 赞同：2
> 
> 时间：2012-08-04T23:47:58.973
> 
> 标签：php, mysql, pdf, html2pdf

我在使用 HTML2PDF 库创建 PDF 和 MySQL 时遇到问题。我想显示图像但不显示。有人知道该怎么做吗？

例如：我有以下代码：

## 书签.php

```
<?php
ob_start();
?>
<style type="text/css">
<!--
    table.page_header {width: 100%; border: none; background-color: #DDDDFF; border-bottom: solid 1mm #AAAADD; padding: 2mm }
    table.page_footer {width: 100%; border: none; background-color: #DDDDFF; border-top: solid 1mm #AAAADD; padding: 2mm}
    h1 {color: #000033}
    h2 {color: #000055}
    h3 {color: #000077}

    div.niveau
    {
        padding-left: 5mm;
    }
-->
</style>
<page backtop="14mm" backbottom="14mm" backleft="10mm" backright="10mm" style="font-size: 12pt">
    <page_header>
        <table class="page_header">
            <tr>
                <td style="width: 100%; text-align: left">
                    <img src=showimage.php alt="image" />
                </td>
            </tr>
        </table>
    </page_header>
    <page_footer>
        <table class="page_footer">
            <tr>
                <td style="width: 100%; text-align: right">
                    page [[page_cu]]/[[page_nb]]
                </td>
            </tr>
        </table>
    </page_footer>
</page>
<?php
    $content = ob_get_clean();

    require_once(dirname(__FILE__).'/../html2pdf.class.php');
    try
    {
        $html2pdf = new HTML2PDF('P', 'A4', 'en', true, 'UTF-8', 0);
        $html2pdf->writeHTML($content, isset($_GET['vuehtml']));
        $html2pdf->Output('bookmark.pdf');
    }
    catch(HTML2PDF_exception $e) {
        echo $e;
        exit;
    }
?> 
```

## 显示图像.php

```
<?php
mysql_connect("localhost","user","pass");
mysql_select_db("db");
$rs = mysql_query("select * from gallery");
$row = mysql_fetch_assoc($rs);
$imagebytes = $row[imgdata];
header("Content-type: image/jpeg");
print $imagebytes;
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-13T02:54:05.017

这是旧的，但由于没有提供正确的答案，我会试着捏一下。Html2pdf 是用来直接从磁盘加载图像而不使用 http。在当前版本中，您会收到一条错误消息，说它无法加载图像...

链接图像的常用方法是：

```
<img src='/path/to/image.png' alt="image" /> 
```

代替：

```
<img src=showimage.php alt="image" /> 
```

在您的情况下，如果您不想在磁盘上写入图像，您可以尝试将其嵌入为 data-uri （我还没有测试 html2pdf 是否支持这个）

```
echo '<img src="data:image/jpeg;base64,'.base64_encode($row[imgdata]).'"/>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T11:28:25.857

我想知道您是否收到错误消息。也许让 PHP 在错误/警告报告上更加冗长是一个想法。

请参阅[error_reporting@php.net](http://www.php.net/manual/en/function.error-reporting.php)。在您的 php.ini 中还设置了一个默认值。

您的 showimage.php 中可能存在什么问题：

```
$row = mysql_fetch_assoc($rs);
$imagebytes = $row[imgdata]; 
```

mysql_fetch_assoc 返回一个关联数组。由于在这种情况下*imgdata*甚至不是变量，您应该将*imgdata*更改为*$imgdata*并使用包含图像数据/blob 的 MySQL 表的列名初始化变量。**如果**列名**是** *imgdata*，您可能只需将其放在引号中，如下所示：

```
$imagebytes = $row['imgdata']; 
```

第三个想法，我可能会在这里错过，您正在使用*imgdata*作为常量（那么您应该考虑将常量标识符全部设为大写以提高可读性） - 如果是这种情况，请确保常量包含正确的列名MySQL 表。

# wordpress - 将字段添加到 Wordpress 管理员快速编辑

> ID：11812865
> 
> 赞同：4
> 
> 时间：2012-08-04T23:48:03.990
> 
> 标签：wordpress, custom-fields, jigoshop

我有一个新客户，其网站使用旧版本的 Jigoshop (0.9.9)，该版本已对其进行了大量定制。他们希望我将定价字段添加到每个产品的管理员快速编辑面板中。

有问题的字段名称是“regular_price”。

如何将自定义字段添加到快速编辑面板？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-09T19:23:20.503

我意识到这是一个较老的问题，但我最近也尝试过这样做，我确实发现这个插件我还没有完全实现它，但认为它可能能够帮助你，除非你找到另一种解决方法。我看到@Jonas G. Drange 有处理它的编码方式，但我不一定想弄乱它，所以找到了这个插件。如果它对你有用，请告诉我！

[自定义批量/快速编辑](http://wordpress.org/plugins/custom-bulkquick-edit/)

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-09-18T13:48:27.980

如果你不想搞乱编码，你可以试试[Advanced Custom Fields 插件](http://wordpress.org/extend/plugins/advanced-custom-fields/)

# html - 如何在 Visual Studio 2012 html 编辑器中为修改后的标签提供验证？

> ID：11812879
> 
> 赞同：10
> 
> 时间：2012-08-04T23:50:47.883
> 
> 标签：html, visual-studio-2012

Visual Studio 2012 html 编辑器坚持在检测到或配置的 html 架构中未找到标记名称时向我发出警告。

当我使用 Google 的 AngularJs 时，这种行为并不方便，因为它充分利用了所有主流浏览器都允许将自定义标签输入到 DOM 中的事实。

有没有办法提供自定义验证模式，还是我坚持使用 Microsoft 提供的硬编码模式？

* * *

**请注意**

我知道您可以通过取消选中 Tools->Options->Text Editor->HTML->Validation->Show Errors 来完全禁用验证。但是，我不想完全禁用验证。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-05-22T19:29:24.713

如果您愿意编辑您的验证规则文件，`C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\Packages\schemas\html\html_5.xsd`您可以消除与 Angularjs 元素指令相关的验证错误。

首先备份原始的xsd文件。定义您的元素并将其添加到文件中。根据需要修改相关的父元素。保存并重新启动 VS2012。您的元素指令将不再生成 HTML5 验证错误。

例如，给定一个元素指令“schema-form-fields”：

1.  嵌套在字段集中
2.  需要属性“字段”、“模型”和“模式”

以下修改的字段集和新的模式表单字段声明消除了不需要的验证错误。

```
<xsd:element name="fieldset">
    <xsd:complexType mixed="true">
        <xsd:choice>
            <xsd:element name="legend" type="legendType" minOccurs="0" maxOccurs="1" />
            <xsd:element ref="schema-form-fields" minOccurs="0" maxOccurs="1"/>
            <xsd:group ref="flowContent" />
        </xsd:choice>
        <xsd:attributeGroup ref="commonAttributeGroup" />
        <xsd:attribute name="disabled" vs:standalone="true" />
        <xsd:attribute name="form"  vs:associatedcontrolid="form" />
        <xsd:attribute name="name" />
    </xsd:complexType>
</xsd:element>

<xsd:element name="schema-form-fields">
    <xsd:complexType mixed="true">
        <xsd:attribute name="fields" type="xsd:string" use="required" />
        <xsd:attribute name="model" type="xsd:string" use="required" />
        <xsd:attribute name="schema" type="xsd:string" use="required" />
    </xsd:complexType>
</xsd:element> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T16:57:52.737

我不知道我是否正确理解了你的问题。

如果你说 VS2012 总是在 ng- 属性上显示错误，这里是解决方案。

1.  在 ng- 之前添加 data-，所以它将是 data-ng-*

2.  安装这个[AngularJS 智能感知支持。](http://madskristensen.net/post/angularjs-intellisense-in-visual-studio-2012)

对于 VS2010 试试[这个](https://github.com/johnlindquist/angularjs-plugin)

# c# - 为什么这个 OrderBy 没有抛出错误？

> ID：11812881
> 
> 赞同：1
> 
> 时间：2012-08-04T23:51:30.873
> 
> 标签：c#, asp.net

我有一个我想订购的号码列表。

```
List<int> numbers = new List<int> { 1, 2, 3, 4, 5, 6, 7, 8, 9, 0 }; 
```

如果我这样做，效果很好

```
.OrderBy(n => n) 
```

只是为了它，我试过了

```
.OrderBy(n => "ASC") 
```

它没有用，但它没有抛出错误。如果我将鼠标悬停在 OrderBy 上，智能感知会显示，

```
IOrderedEnumerable<int> IEnumerable<int>.OrderBy<int,string>(Func<int,string> keySelector) 
```

只是好奇，这是为什么呢？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T23:59:18.433

它不会抛出错误。你告诉它比较 using `"ASC"`，它就是这样做的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T00:01:57.957

此方法使用默认比较器比较键。每个元素的键是“ASC”。不违法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T00:16:27.443

正如其他人指出的那样，这是因为这是完全合法的。你也可以这样做：

```
 Enumerable.Range(0,20).OrderBy(x=>x.ToString()); 
```

你会得到按字母顺序排列的整数。

```
0
1
10
11
12
13
14
15
16
17
18
19
2
3
4
5
6
7
8
9 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-05T00:18:55.840

您是说按某个值对对象进行排序，其中要排序的每个值都是通过每个对象获得的；通常这将是该对象的属性或功能。您可以将其视为数据库或电子表格中的“列”。

前任：

```
var employeesByName = Employees.OrderBy(employee => employee.Name); 
```

给出按名称值排序的雇员对象的可枚举. 如果您改为这样做：

```
var employeesByConstant = Employees.OrderBy(employee => "ASC"); 
```

那么您将获得一个可枚举的员工对象，这些对象按“列”排序，其中所有值都是“ASC”。根据使用的排序算法，这可能没有效果，或者一些任意排序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-05T06:46:57.973

它可以工作，但不能按您的意愿工作，因为您使用“ASC”进行比较。

如果您想订购号码，请使用：
`.OrderBy(i => i);
.OrderByDescending(i => i);`

# php - 警告：mail() [function.mail]：无法在“localhost”端口 25 连接到邮件服务器，请验证您的“SMTP”和“smtp_port”，Windows XP 的 XAMPP

> ID：11812884
> 
> 赞同：2
> 
> 时间：2012-08-04T23:52:36.207
> 
> 标签：php, email, windows-xp, xampp, localhost

我在 Windows XP 上运行 XAMPP 服务器。据称 XAMPP 会自动准备一个邮件服务器。

这是我正在使用的代码：

```
$cimzett = 'ledit4@gmail.com';
...
mail($cimzett, $targy, $uzenet, 'From:'.$email); 
```

（`$cimzett`意思是“to”，`$targy`是主题，`$uzenet`是匈牙利语中的消息）但在应用 PHP 的浏览器中，它向我发送了以下消息：

我收到此错误消息：

```
Warning: mail() [function.mail]: Failed to connect to mailserver at "localhost" port 25, verify your "SMTP" and "smtp_port" setting in php.ini or use ini_set() in C:\xampp\htdocs\PHP\alien.php on line 50 
```

我也尝试使用`set_ini()`函数，但我得到了同样的信息。

也许 XAMPP 的安全属性不允许我向 gmail.com 发送电子邮件？

我使用 PHP 版本 5.3.5 和

SMTP 本地主机 本地主机 smtp_port 25 25

是 phpinfo() 报告的设置；

我怀疑邮件服务器工作不正常。你怎么看？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-05T00:04:45.220

默认情况下，Windows 没有安装 SMTP 服务器。XAMPP 也不会为您安装一个。如果安装了一个，那么它就没有运行，因为端口 25 上的“连接拒绝”意味着没有任何东西在监听电子邮件。

XAMPP 也不会禁用与外部邮件服务器的连接。但是，Windows 防火墙和/或某些 ISP 会（我的 isp 不允许外部 smtp 连接作为反垃圾邮件措施）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T06:59:38.063

好吧，如果您想在本地计算机上执行此操作，请尝试安装 IIS 并从那里配置 SMTP 服务器。请记住，此过程仅适用于 SMTP，您不必更改 Apache 和 PHP 的现有安装。有关更多详细信息，这里是链接[http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/e4cf06f5-9a36-474b-ba78-3f287a2b88f2.mspx?mfr=true](http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/e4cf06f5-9a36-474b-ba78-3f287a2b88f2.mspx?mfr=true)

完成以下步骤后，邮件将保存为 wwwroot 目录中的文件。您可能需要对此进行进一步研究，但您可以将此解决方案作为起点。

希望这可以帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-05T00:18:20.540

可能您应该将邮件提交设置为外部帐户，例如您的 gmail 帐户。更多信息在这里： [身份验证php邮件](https://stackoverflow.com/questions/10455469/authentication-php-mail)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-16T13:02:50.883

您将需要一个额外的 SMTP 服务器应用程序，因为 Xampp 不支持它。下载“Post Cast Server”版本 > 2\. 转到工具 -> 设置 -> 系统 -> SMTP 服务器并将主机名设置为 localhost 服务器端口为 25。然后最小化运行应用程序。它肯定会起作用，因为当我遇到同样的问题时，它对我有用。

# java - 休眠 - 具有复合键哈希码异常的 OneToMany

> ID：11812885
> 
> 赞同：4
> 
> 时间：2012-08-04T23:52:49.270
> 
> 标签：java, hibernate, jakarta-ee, jpa, persistence

我在 and 之间有@OneToMany 关系，并且在`UserDomain`and之间`PartageDomain`有相同的关系。有一个由和组成的复合键。当我尝试在表中保存记录时，出现此异常：`FileDomain``PartageDomain``PartageDomain``UserDomain``FileDomain``PartageDomain`

```
Caused by: java.lang.NullPointerException
    at org.hibernate.type.AbstractType.getHashCode(AbstractType.java:136)
    at org.hibernate.type.AbstractType.getHashCode(AbstractType.java:144)
    at org.hibernate.type.EntityType.getHashCode(EntityType.java:312)
    at org.hibernate.type.ComponentType.getHashCode(ComponentType.java:212)
    at org.hibernate.engine.EntityKey.generateHashCode(EntityKey.java:126)
    at org.hibernate.engine.EntityKey.<init>(EntityKey.java:70)
    at org.hibernate.engine.StatefulPersistenceContext.getDatabaseSnapshot(StatefulPersistenceContext.java:263)
    at org.hibernate.engine.ForeignKeys.isTransient(ForeignKeys.java:212)
    at org.hibernate.event.def.AbstractSaveEventListener.getEntityState(AbstractSaveEventListener.java:535)
    at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.performSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:103)
    at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.onSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:93)
    at org.hibernate.impl.SessionImpl.fireSaveOrUpdate(SessionImpl.java:535)
    at org.hibernate.impl.SessionImpl.saveOrUpdate(SessionImpl.java:527)
    at org.hibernate.impl.SessionImpl.saveOrUpdate(SessionImpl.java:523)
    at com.stage.dao.PartageDaoImpl.add(PartageDaoImpl.java:39)
    at com.stage.service.PartageServiceImpl.add(PartageServiceImpl.java:33)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:309)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
    at $Proxy42.add(Unknown Source)
    at com.stage.beans.UserManagedBean.saveUserRights(UserManagedBean.java:234)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at com.sun.el.parser.AstValue.invoke(AstValue.java:234)
    at com.sun.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:297)
    at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:102)
    ... 23 more 
```

我做了一些研究，发现这个异常来自三个案例：

a）我们有一个复合键，其中一个键的属性是另一个持久类的 FK。

b) 另一个持久类有一个 ID 字段，其值正在生成。

c) 另一个持久类的实例是瞬态的（还没有 ID）

文档中没有说明我们如何解决这些问题，但是按照 hibernate 文档中的建议，我重写了 equals() 和 hashCode() 以实现复合标识符相等。并且还实现了Serializable，但它总是不起作用。因此，如果有人对我的问题的根源有所了解；

正如上面评论中所建议的，我将 hashcode 方法添加到我的`UserDomain`and`FileDomain`中，`getId`and`getLink`方法获取相应的对象 ID。

部分`userDomain`

```
 public class UserDomain implements Serializable {
    ....
    @OneToMany (cascade=CascadeType.ALL)
        private Collection<PartageDomain> partageDomain = new ArrayList<PartageDomain>();
    public Collection<PartageDomain> getPartageDomain() {
            return partageDomain;
        }

        public void setPartageDomain(Collection<PartageDomain> partageDomain) {
            this.partageDomain = partageDomain;
        }
public boolean equals(Object o) {
        if (this == o) return true;
        if (o == null || getClass() != o.getClass()) return false;

        UserDomain that = (UserDomain) o;

        if (getId() != null ? !getId().equals(that.getId()) : that.getId() != null) return false;

        return true;
    }
    public int hashCode() {
        return (getId() != null ? getId().hashCode() : 0);
    } 
```

部分`FileDomain`

```
 public class FileDomain implements Serializable {
    ...
        @OneToMany 
        private Collection<PartageDomain> partageDomain = new ArrayList<PartageDomain>();

        public Collection<PartageDomain> getPartageDomain() {
            return partageDomain;
        }

        public void setPartageDomain(Collection<PartageDomain> partageDomain) {
            this.partageDomain = partageDomain;
        }
public boolean equals(Object o) {
        if (this == o) return true;
        if (o == null || getClass() != o.getClass()) return false;

        FileDomain that = (FileDomain) o;

        if (getLink() != null ? !getLink().equals(that.getLink()) : that.getLink() != null) return false;

        return true;
    }
    public int hashCode() {
        return (getLink() != null ? getLink().hashCode() : 0);
    } 
```

部分`PartageDomain`

```
public class PartageDomain implements Serializable {
@EmbeddedId
    private PartageId partageId = new PartageId();
public PartageId getPartageId() {
        return partageId;
    }

    public void setPartageId(PartageId partageId) {
        this.partageId = partageId;
    }
...
public boolean equals(Object o) {
        if (this == o) return true;
        if (o == null || getClass() != o.getClass()) return false;

        PartageDomain that = (PartageDomain) o;

        if (getPartageId() != null ? !getPartageId().equals(that.getPartageId()) : that.getPartageId() != null) return false;

        return true;
    }

    public int hashCode() {
        return (getPartageId() != null ? getPartageId().hashCode() : 0);
    } 
```

`PartageId`班级：

```
@Embeddable

    public class PartageId implements Serializable {
        /**
         * 
         */
        private static final long serialVersionUID = 1L;

        @ManyToOne
        private FileDomain fileDomain;

        @ManyToOne
        private UserDomain userDomain;

        public FileDomain getFileDomain() {
            return fileDomain;
        }

        public void setFileDomain(FileDomain fileDomain) {
            this.fileDomain = fileDomain;
        }

        public UserDomain getUserDomain() {
            return userDomain;
        }

        public void setUserDomain(UserDomain userDomain) {
            this.userDomain = userDomain;
        }

        public boolean equals(Object o) {
            if (this == o) return true;
            if (o == null || getClass() != o.getClass()) return false;

            PartageId that = (PartageId) o;

            if (fileDomain != null ? !fileDomain.equals(that.fileDomain) : that.fileDomain != null) return false;
            if (userDomain != null ? !userDomain.equals(that.userDomain) : that.userDomain != null)
                return false;

            return true;
        }

        public int hashCode() {
            int result;
            result = (fileDomain != null ? fileDomain.hashCode() : 0);
            result = 31 * result + (userDomain != null ? userDomain.hashCode() : 0);
            return result;
        }
    } 
```

# node.js - Node.js 的麻烦

> ID：11812886
> 
> 赞同：2
> 
> 时间：2012-08-04T23:52:53.053
> 
> 标签：node.js

我正在尝试开始使用 node.js，但我绝不是高级程序员。除了检查我的 ip 之外，我从未使用过 cmd。

我的问题是我不知道在哪里保存文件，以及如何使用 node.js 从 cmd 运行它们。我发现的教程似乎假设我应该知道所有这些而不解释它，并直接跳到代码。

那么，我如何在节点中实际运行一些东西？这是我到目前为止所做的：

1.  从 nodejs.org 下载了 windows 安装程序。
2.  将nodejs安装在默认目录：C:\Program Files (x86)\nodejs。
3.  确保我有 Python 和 Microsoft Visual Studio。

这就是我卡住的地方，我该如何测试呢？

1.  它不会让我将文件保存在 nodejs 目录中（即使作为管理员）。我在哪里保存我的文件？
2.  cmd中启动节点并运行我的文件的正确命令和路径是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-04T23:58:17.047

将您的文件保存在您想要的任何位置，并从`cmd`提示符中将它们运行为`node yourfile.js`.

# php - 删除 iframe 后，联系表单在浏览器中显示 PHP

> ID：11812890
> 
> 赞同：0
> 
> 时间：2012-08-04T23:54:04.533
> 
> 标签：php, iframe, contact-form

我想重用/重新设计我以前使用过的 php 表单，但使用了一个 iframe 来调用 php 文件。我被告知这是不好的做法并停止使用 iframe；但是，当我将 php 移动到我的 html 页面时，php 代码会显示在表单的文本字段中。

我在这里检查了几页的php线程，似乎问题通常是忘记关闭php标签或主机不支持php。我没有从工作版本更改 php 本身，并且我的主机支持 PHP 版本 5.3.6。

编辑：将文件更改为 .php 会清除浏览器中的 php，但不会发送表单。

文本字段中显示的 PHP 如下：

```
<?php echo ($sr && !$cf['form_ok']) ? $cf['posted_form_data']['name'] : '' ?>
<?php echo ($sr && !$cf['form_ok']) ? $cf['posted_form_data']['email'] : '' ?>
<?php echo ($sr && !$cf['form_ok']) ? $cf['posted_form_data']['message'] : '' ?> 
```

Contact.html 页面代码：

```
 <div id="contact-form" class="clearfix">

<?php session_start(); ?>
<?php
include("spam_check.php");
?>
            <h2> You can contact us by filling out the form below.</h2>
            <?php
            //init variables
            $cf = array();
            $sr = false;

            if(isset($_SESSION['cf_returndata'])){
                $cf = $_SESSION['cf_returndata'];
                $sr = true;
            }
            ?>
            <ul id="errors" class="<?php echo ($sr && !$cf['form_ok']) ? 'visible' : ''; ?>">
                <li id="info">There were some problems with your form submission:</li>
                <?php 
                if(isset($cf['errors']) && count($cf['errors']) > 0) :
                    foreach($cf['errors'] as $error) :
                ?>
                <li><?php echo $error ?></li>
                <?php
                    endforeach;
                endif;
                ?>
<?php
if (isset($_POST['real'])) {
  // error condition, redisplay form
}
?>
            </ul>
            <p id="success" class="<?php echo ($sr && $cf['form_ok']) ? 'visible' : ''; ?>">Thanks for your message! We will get back to you ASAP!</p>
            <form method="post" action="process.php">
                <label for="name">Name: <span class="required">*</span></label>
                <input type="text" id="name" name="name" value="<?php echo ($sr && !$cf['form_ok']) ? $cf['posted_form_data']['name'] : '' ?>" placeholder="Your Name" required autofocus />

                <label for="email">Email: <span class="required">*</span></label>
                <input type="email" id="email" name="email" value="<?php echo ($sr && !$cf['form_ok']) ? $cf['posted_form_data']['email'] : '' ?>" placeholder="yourname@example.com" required />

                <label for="message">Message: <span class="required">*</span></label>
                <textarea id="message" name="message" placeholder="Your message must be greater than 20 characters." required data-minlength="20"><?php echo ($sr && !$cf['form_ok']) ? $cf['posted_form_data']['message'] : '' ?></textarea>

<label style="display:block;position:absolute;left:-9999px" class="real">
  Please leave this checkbox blank
  <input type=checkbox name=real value=1>
</label>

                <span id="loading"></span>
                <input type="submit" value="SEND" id="submit-button" />
                <p id="req-field-desc"><span class="required">*</span> indicates a required field</p>          
            </form>

            <?php unset($_SESSION['cf_returndata']); ?>
        </div> 
```

进程.php：

```
<?php
if( isset($_POST) ){

    //form validation vars
    $formok = true;
    $errors = array();

    //sumbission data
    $ipaddress = $_SERVER['REMOTE_ADDR'];
    $date = date('d/m/Y');
    $time = date('H:i:s');

    //form data
    $name = $_POST['name']; 
    $email = $_POST['email'];
    $message = $_POST['message'];

    //validate form data

    //validate name is not empty
    if(empty($name)){
        $formok = false;
        $errors[] = "You have not entered a name";
    }

    //validate email address is not empty
    if(empty($email)){
        $formok = false;
        $errors[] = "You have not entered an email address";
    //validate email address is valid
    }elseif(!filter_var($email, FILTER_VALIDATE_EMAIL)){
        $formok = false;
        $errors[] = "You have not entered a valid email address";
    }

    //validate message is not empty
    if(empty($message)){
        $formok = false;
        $errors[] = "You have not entered a message";
    }
    //validate message is greater than 20 charcters
    elseif(strlen($message) < 20){
        $formok = false;
        $errors[] = "Your message must be greater than 20 characters";
    }

    //send email if all is ok
    if($formok){
        $headers = "From: name@email.com" . "\r\n";
        $headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";

        $emailbody = "<p>You have received a new message from the form on your website.</p>
                      <p><strong>Name: </strong> {$name} </p>
                      <p><strong>Email Address: </strong> {$email} </p>
                      <p><strong>Message: </strong> {$message} </p>
                      <p>This message was sent from the IP Address: {$ipaddress} on {$date} at {$time}</p>";

        mail("name@email.com","New Enquiry",$emailbody,$headers);

    }

    //what we need to return back to our form
    $returndata = array(
        'posted_form_data' => array(
            'name' => $name,
            'email' => $email,
            'telephone' => $telephone,
            'enquiry' => $enquiry,
            'message' => $message
        ),
        'form_ok' => $formok,
        'errors' => $errors
    );

    //if this is not an ajax request
    if(empty($_SERVER['HTTP_X_REQUESTED_WITH']) && strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) !== 'xmlhttprequest'){
        //set session variables
        session_start();
        $_SESSION['cf_returndata'] = $returndata;

        //redirect back to form
        header('location: ' . $_SERVER['HTTP_REFERER']);
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T00:02:09.450

查看页面源代码 - 其余的 PHP 代码也在那里吗？如果 php 不能正常工作，那么所有代码​​都会显示出来，而不仅仅是表单域中的一些位。

您说您将其移至“html 文件”。那是“somefile.html”吗？请记住，通常 .html 不设置为由 Web 服务器由 PHP 解析。尝试将其重命名为“somefile.php”。

# symfony - 如何获取我从树枝扩展中设置的树枝变量？

> ID：11812897
> 
> 赞同：4
> 
> 时间：2012-08-04T23:56:19.543
> 
> 标签：symfony, twig

所以.. 我一直在尝试在我的扩展中获取树枝变量。

首先，我尝试从`$environment->getGlobals()`.. 获取，但实际上，这只是全局变量。然后我尝试引用内部的不同部分`getCompiler()`，没有果汁，我尝试的很多东西只是锁定了我的浏览器或 php 实例。

那我想做什么？

在我的树枝模板中，我正在这样做

```
{% set myvariable = "something" %} 
```

在我的树枝扩展中，当我调用一个特定的函数时，我想看看这个变量是否被设置了一些东西，如果它被设置了一些我想执行一个特定的操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T11:45:17.400

如果您可以访问调用扩展程序的上下文，那么您应该能够弄清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-19T05:06:37.713

你看过[Twig 的模板全局变量](http://twig.sensiolabs.org/doc/templates.html#global-variables)吗？我正在寻找类似的东西（一种在模板上下文中设置*所有*变量的机制），并偶然发现了`_context`包含我需要的一切的全局变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-19T09:30:59.987

您可以通过将全局变量传递`_context`给您的函数来将 twig 变量传递给您的 twig 扩展。`_context`是一个包含模板中所有变量的数组。

```
{{ my_twig_function(_context) }} 
```

# apache - 为什么这个网址不重写？简单的

> ID：11812907
> 
> 赞同：1
> 
> 时间：2012-08-05T00:01:54.973
> 
> 标签：apache, mod-rewrite

这是我正在尝试做的一个例子。

转这个：

```
http://example.com/products/ 
```

进入这个：

```
http://example.com/app.php?products 
```

最后我还需要对查询的支持，例如::

这：

```
http://example.com/products/?foo=bar&boat=row 
```

进入这个：

```
http://example.com/app.php?products&foo=bar&boat=row 
```

这是我到目前为止的重写：

```
RewriteRule ^([A-Za-z0-9]+)/?\??([A-Za-z0-9\+=&]+)?$ app.php?$1&$2 [L] 
```

这适用于我的前两个示例，但是第二个示例仅适用于类似 url

```
http://example.com/products/foo=bar&boat=row 
```

我需要能够在那里有那个问号，我认为\?? 在我的重写中应该这样做，但它没有，并且 instad 返回 404。我做错了什么？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T00:10:56.483

可以使用`QSA`标志附加查询字符串，您不能与 a 中的查询字符串匹配`RewriteRule`。试试这个：

```
RewriteRule ^([A-Za-z0-9]+)/?$ app.php?$1 [L,QSA] 
```

# java - 私有静态最终双精度为 0

> ID：11812912
> 
> 赞同：3
> 
> 时间：2012-08-05T00:03:03.520
> 
> 标签：java, static, final, private-members

我正在尝试使用以下行来指定一个双常量，任何人都可以帮我解释为什么在运行时这个常量的值为`0.0`：

```
private static final double CONSTANT = 1/2; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-05T00:04:17.933

1 和 2 被解释为整数并产生整数除法结果。在末尾添加 D 以使它们被解释为双打。

```
private static final double CONSTANT = 1D/2D; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-05T00:04:28.337

常量以值结束，`0.0`因为整数除法的结果是一个整数，被截断。所以你的初始化值是`0`，不是`0.5`。要强制`double`结果，请将一个或两个操作数设为 a `double`：

```
private static final double CONSTANT = 1/2.0;  // or 1/2D, or even 1D/2D 
```

# opengl - OpenGL/GLSL - 室外环境中的每像素雾

> ID：11812913
> 
> 赞同：0
> 
> 时间：2012-08-05T00:03:08.013
> 
> 标签：opengl, glsl

使用固定功能管道，我能够将清晰的颜色设置为与雾相同的颜色，并完美地启用雾。现在我正在使用着色器，我知道我需要使用 GLSL 来应用雾。我理解的问题是，如果像素着色器只在每个光栅化多边形的每个像素上运行，我如何强制它在没有多边形的区域运行？我只是设置与雾相匹配的清晰颜色吗？我需要天穹吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T00:08:10.803

它的工作方式与以前相同。如果您的背景只是透明色，那么您的透明色应该与雾色相匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T17:50:37.797

正如 Nicol 所说，它应该按原样工作，只需稍作修改。

那你怎么走？将您的清晰颜色设置为远端雾颜色，然后我建议将雾组件功能集成到您的像素/片段着色器中。通过这种方式，您可以将雾的方程变得像您想要的一样复杂，包括非线性和依赖随机噪声，这将允许引入“体积区域雾效应”（这样某些区域可能看起来比其他人以“多云”的方式）。通过添加读取指定雾方程或噪声（或查看雾比）的屏幕坐标纹理，可以轻松完成后面的效果。

祝你好运

# java - Android NFC 示例 - java.lang.ExceptionInInitializerError

> ID：11812923
> 
> 赞同：0
> 
> 时间：2012-08-05T00:05:14.010
> 
> 标签：java, android, nfc, noclassdeffounderror

我正在尝试运行我的 Eclipse 下载附带的示例应用程序之一，尤其是 NFC 示例应用程序。所以我加载它并运行它，但它不断崩溃并出现以下错误。

这是代码本身的链接 [http://source-android.frandroid.com/development/samples/NFCDemo/src/com/example/android/nfc/](http://source-android.frandroid.com/development/samples/NFCDemo/src/com/example/android/nfc/)

```
08-04 23:49:40.056: D/dalvikvm(409): VFY: replacing opcode 0x71 at 0x0003
08-04 23:49:40.056: D/dalvikvm(409): VFY: dead code 0x0006-000b in Lcom/example/android/nfc/record/UriRecord;.<init> (Landroid/net/Uri;)V
08-04 23:49:40.066: I/dalvikvm(409): Could not find method com.google.common.base.Preconditions.checkArgument, referenced from method com.example.android.nfc.record.UriRecord.parseWellKnown
08-04 23:49:40.066: W/dalvikvm(409): VFY: unable to resolve static method 101: Lcom/google/common/base/Preconditions;.checkArgument (Z)V
08-04 23:49:40.066: D/dalvikvm(409): VFY: replacing opcode 0x71 at 0x000c
08-04 23:49:40.066: D/dalvikvm(409): VFY: dead code 0x000f-004f in Lcom/example/android/nfc/record/UriRecord;.parseWellKnown (Landroid/nfc/NdefRecord;)Lcom/example/android/nfc/record/UriRecord;
08-04 23:49:40.066: W/dalvikvm(409): Exception Ljava/lang/NoClassDefFoundError; thrown while initializing Lcom/example/android/nfc/record/UriRecord;
08-04 23:49:40.066: D/AndroidRuntime(409): Shutting down VM
08-04 23:49:40.076: W/dalvikvm(409): threadid=1: thread exiting with uncaught exception (group=0x40015560)
08-04 23:49:40.086: E/AndroidRuntime(409): FATAL EXCEPTION: main
08-04 23:49:40.086: E/AndroidRuntime(409): java.lang.ExceptionInInitializerError
08-04 23:49:40.086: E/AndroidRuntime(409):  at com.example.android.nfc.NdefMessageParser.getRecords(NdefMessageParser.java:47)
08-04 23:49:40.086: E/AndroidRuntime(409):  at com.example.android.nfc.NdefMessageParser.parse(NdefMessageParser.java:41)
08-04 23:49:40.086: E/AndroidRuntime(409):  at com.example.android.nfc.TagViewer.buildTagViews(TagViewer.java:105)
08-04 23:49:40.086: E/AndroidRuntime(409):  at com.example.android.nfc.TagViewer.resolveIntent(TagViewer.java:86)
08-04 23:49:40.086: E/AndroidRuntime(409):  at com.example.android.nfc.TagViewer.onCreate(TagViewer.java:59)
08-04 23:49:40.086: E/AndroidRuntime(409):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
08-04 23:49:40.086: E/AndroidRuntime(409):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
08-04 23:49:40.086: E/AndroidRuntime(409):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
08-04 23:49:40.086: E/AndroidRuntime(409):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
08-04 23:49:40.086: E/AndroidRuntime(409):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
08-04 23:49:40.086: E/AndroidRuntime(409):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-04 23:49:40.086: E/AndroidRuntime(409):  at android.os.Looper.loop(Looper.java:123)
08-04 23:49:40.086: E/AndroidRuntime(409):  at android.app.ActivityThread.main(ActivityThread.java:3683)
08-04 23:49:40.086: E/AndroidRuntime(409):  at java.lang.reflect.Method.invokeNative(Native Method)
08-04 23:49:40.086: E/AndroidRuntime(409):  at java.lang.reflect.Method.invoke(Method.java:507)
08-04 23:49:40.086: E/AndroidRuntime(409):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
08-04 23:49:40.086: E/AndroidRuntime(409):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
08-04 23:49:40.086: E/AndroidRuntime(409):  at dalvik.system.NativeStart.main(Native Method)
08-04 23:49:40.086: E/AndroidRuntime(409): Caused by: java.lang.NoClassDefFoundError: com.google.common.collect.ImmutableBiMap
08-04 23:49:40.086: E/AndroidRuntime(409):  at com.example.android.nfc.record.UriRecord.<clinit>(UriRecord.java:51)
08-04 23:49:40.086: E/AndroidRuntime(409):  ... 18 more 
```

我是 Java 新手，甚至是 Android 新手，不知道如何调试 Android 应用程序。我尝试在代码中放置断点，但没有被触发。所以我会很感激我能从这里的人那里得到任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T02:21:33.207

经过几次尝试，它对我有用。不知道我最终做了什么来得到它，但这有效，但我重新加载然后再次尝试并繁荣。

[GoogleAnalyticsTracker.getInstance() 时出现 NoClassDefFoundError](https://stackoverflow.com/questions/9857539/noclassdeffounderror-when-googleanalyticstracker-getinstance/9857669#9857669)

# javascript - 我网站上这个神秘的左边距是怎么回事？为什么它不与浏览器的左边缘齐平？

> ID：11812924
> 
> 赞同：0
> 
> 时间：2012-08-05T00:05:33.437
> 
> 标签：javascript, css, html

[http://willryan.us](http://willryan.us)

如果您调整浏览器的大小，您会看到页面左侧稍微偏离边缘，但右侧没有。我认为我在任何事情上都没有余量，这是我能想到的唯一可能导致这种情况的事情。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T00:09:25.680

您`<body>`没有指定填充或边距，因此它默认为浏览器默认值。例如，在 Chrome 中，边距是 `8px`.

![在此处输入图像描述](../Images/1671f07e788f85659b0fccefe40a981e.png)

设置边距和内边距，`0`布局的左侧与浏览器窗口的左边缘齐平。

```
body {
  margin: 0;
  padding: 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T00:12:58.950

和元素默认具有填充/边距，其数量因浏览器而异`html`。`body`如果您不想要它，只需将其添加到您的 css 中：

```
html, body {
     margin: 0;
     padding: 0;
} 
```

您可以在 Chrome 和 Firefox（如果您有 Firebug）中检查元素，两者都会显示元素的布局信息。

# knockout.js - 将值插入淘汰视图模型

> ID：11812925
> 
> 赞同：0
> 
> 时间：2012-08-05T00:06:18.080
> 
> 标签：knockout.js, knockout-2.0

我正在努力学习淘汰赛。我想构建一个插入列表的输入表单

我已经举了这些例子，并试图修改它们以适应它们。

我有一个[jsFiddle](http://jsfiddle.net/spnz/DQGYX/1)示例

我想设置 2 个文本框以允许将值插入到视图模型中。我尝试将 data-bind="value:question" & data-bind="value:qtype" 添加到每个输入中，但这似乎没有帮助

如果有人可以看看 jsfiddle 并让我知道我做错了什么，那就太棒了。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T00:48:14.833

您可能希望在您的根视图模型上`question`添加可观察对象。`qtype`然后，您可以将输入绑定到它们。

当你推送到你的问题列表时，你会读取 observables 的值并最终清除它们，这样你就可以为下一个输入做好准备了。

这是一个更新的示例：http: [//jsfiddle.net/rniemeyer/DQGYX/4/](http://jsfiddle.net/rniemeyer/DQGYX/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T00:52:33.930

您需要将输入元素设置为可观察对象（或其他变量）以捕获它们，然后将它们添加到数组中。附上小提琴：

[http://jsfiddle.net/johnpapa/DQGYX/7/](http://jsfiddle.net/johnpapa/DQGYX/7/)

# eclipse - 如何知道 Magento 文件中某些代码的输出？

> ID：11812926
> 
> 赞同：0
> 
> 时间：2012-08-05T00:06:23.177
> 
> 标签：eclipse, magento, netbeans

假设我想知道 list.phtml 中 $_productCollection 的输出。当然，我可以简单地使用 var_dump($_productCollection) 或 print_r($_productCollection) 并显式加载 list.phtml 然后从浏览器访问它。然而，这不是我需要的。

为了跟踪 Magento 代码的行为，我需要当场知道每个代码的输出（无需通过浏览器访问它来查看输出）。有可能这样做吗？

我尝试了 eclipse 和 netbeans，但我不知道如何查看任何文件中任何代码的输出。有人可以指导我如何实现这一目标吗？

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T18:48:05.790

理想情况下，您应该使用 xdebug，但如果您无法让 xdebug 工作并且只想在不停止流程的情况下使用 var_dump 之类的东西，您还可以在任何您感兴趣的地方添加 Mage::log($somevar) 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T04:50:49.643

您正在寻找调试器。 [X调试](http://xdebug.org)。

# php - 子文件夹上的 Silex APP

> ID：11812928
> 
> 赞同：1
> 
> 时间：2012-08-05T00:06:51.720
> 
> 标签：php, silex

我想在*localhost/mytestfolder/*上托管一个 Silex 应用程序，但正如我注意到的，每次我路由一个 URL 时，我都必须这样做

```
$app->get('mytestfolder/myRoute' ... 
```

有没有办法可以配置路由器，所以我只是这样做

```
$app->get('myRoute' ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T13:14:32.790

尝试将 web 目录放在 RewriteBase 上

```
<IfModule mod_rewrite.c>
    Options -MultiViews

    RewriteEngine On
    RewriteBase /lolcollege/web
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^ app/index.php [L]
</IfModule> 
```

# wordpress - 在元框中使用 WordPress 链接插入对话框？

> ID：11812929
> 
> 赞同：8
> 
> 时间：2012-08-05T00:06:52.193
> 
> 标签：wordpress

我经常使用自定义元框。很多时候，我会在元框中有一个“链接”字段。我一直在使用一个简单的文本输入字段，但我试图弄清楚如何放入一个按钮，该按钮将调用 WordPress 内容编辑器使用的相同“插入链接”对话框。那可能吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-26T04:51:10.110

您可以通过首先对所需的 js 进行排队，然后与 wp-link js 文件方法进行交互来调用链接框。

确保您已将 wp-link 加入队列

1 /`wp_enqueue_script( 'wp-link' );`

2 / 设置你的用户界面。我通常使用一个按钮来调用链接对话，并使用一个文本字段来处理链接 URL。

3 / 调用链接对话

```
$('body').on('click', '.link-btn', function(event) {
            wpActiveEditor = true; //we need to override this var as the link dialogue is expecting an actual wp_editor instance
            wpLink.open(); //open the link popup
            return false;
        }); 
```

4 / 处理链接保存

```
$('body').on('click', '#wp-link-submit', function(event) {
            var linkAtts = wpLink.getAttrs();//the links attributes (href, target) are stored in an object, which can be access via  wpLink.getAttrs()
            $('your_url_textfield').val(linkAtts.href);//get the href attribute and add to a textfield, or use as you see fit
            wpLink.textarea = $('body'); //to close the link dialogue, it is again expecting an wp_editor instance, so you need to give it something to set focus back to. In this case, I'm using body, but the textfield with the URL would be fine
            wpLink.close();//close the dialogue
//trap any events
            event.preventDefault ? event.preventDefault() : event.returnValue = false;
            event.stopPropagation();
            return false;
        }); 
```

5 / 处理链接取消

```
 $('body').on('click', '#wp-link-cancel, #wp-link-close', function(event) {
        wpLink.textarea = $('body');
        wpLink.close();
        event.preventDefault ? event.preventDefault() : event.returnValue = false;
        event.stopPropagation();
        return false;
    }); 
```

应该差不多了。我在我的元框类中使用了相同的方法，它似乎工作正常。它有点像黑客，因为我正在对链接对话的 html 元素的引用进行硬编码。对话确实需要外部 API。可能并不难添加到 WP。

# css - CSS 多元素自动定位

> ID：11812930
> 
> 赞同：0
> 
> 时间：2012-08-05T00:07:00.813
> 
> 标签：css, html, autoresize

我正在一个有四个 div 的移动网站上工作，这些 div 需要根据父 div 的宽度进行定位。我需要 div 来平均分配它们之间的空间。这里有一些例子：

当宽度为 500px 时，它可能看起来像这样，

![图像1](../Images/cd9eb3ea1782c43be0993fb01e3467c1.png)

当它是 300px 时，

![img2](../Images/ba224f0ecec94144ed12ec98279f18d9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T00:15:52.477

检查以下文章：[使用 CSS 居中多个 DIV](http://www.impressivewebs.com/center-multiple-divs/)。

也有一个[类似的SO问题](https://stackoverflow.com/questions/6865194/fluid-width-with-equally-spaced-divs)。

# windows - 如何使 Win32 对话框出现在默认位置（CW_USEDEFAULT）？

> ID：11812931
> 
> 赞同：4
> 
> 时间：2012-08-05T00:07:09.890
> 
> 标签：windows, winapi, visual-c++, dialog

如何使 Win32**对话框** 以默认位置/大小显示？

（即当窗口已经创建时`CW_USEDEFAULT`如何模拟）？`CreateWindow`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-07T01:19:11.080

创建一个临时的不可见窗口`CW_USEDEFAULT`并查看它的位置。将您的对话框移到那里。

# c++ - C ++中的重复循环

> ID：11812932
> 
> 赞同：0
> 
> 时间：2012-08-05T00:07:12.380
> 
> 标签：c++, loops

下面是 C++ 中一个简单菜单的代码。出于某种原因，如果你给它垃圾输入它会正确反应（“请再次尝试你的选择”）。然而，它会再次通过循环再次给出错误消息，然后最终恢复正常运行。

编辑

输入变量是一个字符。如果垃圾输入只有一个字符长，则循环按预期工作。如果在允许用户再次输入任何内容之前，有任何其他字符将导致循环多次执行。

```
char input = 0;
    while (input != 4)
{
    cout << "1\. Circle";
    cout << "\n2\. Rectangle";
    cout << "\n3\. Triangle";
    cout << "\n4\. Quit";
    cout << "\nChoose a shape: ";
    cin >> input;

    switch(input)
    {
    case '1':
        circleFunctions();
        break;
    case '2':
        rectangleFunctions();
        break;
    case '3':           
        triangleFunctions();
        break;
    case '4':
        exit(4);
    default:
        cout << "\nPlease try your selection again...\n";
        input = NULL;
        cin.ignore();
        break;
    }

    cin.ignore();
    cout << "\n";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T00:19:53.153

当遇到默认情况时，您只需要清除输入缓冲区，

```
std::cin.clear(); 
```

之后忽略输入流中的所有内容，

```
std::cin.ignore(INT_MAX); 
```

这应该使 cin 缓冲区处于良好状态，并且提取运算符 (>>) 应该可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T00:42:22.907

找到了答案。将以下参数添加到 cin.ignore 使其工作：

```
 cin.ignore(20, '\n'); 
```

# android - 如何显示 YouTube 播放列表网页视图？

> ID：11812933
> 
> 赞同：0
> 
> 时间：2012-08-05T00:07:18.577
> 
> 标签：android, webview, rss, youtube

我想在我的应用程序的 web 视图中显示 YouTube 视频播放列表。当它加载时，它会显示在我手机的整个屏幕上，而不是在我的应用程序布局中，其中包括一个带有三个选项卡的选项卡主机、一个标题栏和一个状态栏。其他链接显示正常。如何在不占用我屏幕的情况下加载 YouTube？

这些是我的 webview 的设置...

```
newsfeed = (WebView) findViewById(R.id.webViewnews);
//Enables JavaScript (YouTube)
newsfeed.getSettings().setJavaScriptEnabled(true);
newsfeed.setVerticalScrollBarEnabled(false); 
```

这是有问题的代码行...

```
} else
    if(selectednewsfeed.contentEquals("4")){
        try{
            //This link display on entire screen
            newsfeed.loadUrl("http://www.youtube.com/watch?v=_3PTjOdMKwY&list=UUBIwq18tUFrujiPd3HLPaGw&feature=plcp"); 

            //This link displays within the layout of my application, but as 
            //title and headline followed by source code
            //newsfeed.loadUrl("http://feeds2.feedburner.com/Maxkeisercom"); 
        }
        catch (Exception e){
            e.printStackTrace();
       } 
```

我还想知道如何在 web 视图中显示来自[FeedBurner](http://en.wikipedia.org/wiki/FeedBurner)的内容。我希望用户能够阅读此提要，然后访问播客。如何使 webview 显示完整的 HTML？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T05:09:59.160

我已将此添加为[Video not playing in Android](https://stackoverflow.com/questions/8725818/video-not-playing-in-android/8804432#8804432)中的答案。

我希望这可以帮助您制作仅填满屏幕的 YouTube 视频。`VideoView`并且`Mediaplayer`只能播放其文档中指定的名为[支持的媒体格式的格式](http://developer.android.com/guide/appendix/media-formats.html)。

您提供的 YouTube 链接用于*HTML 页面*。

```
String url = "your_youtube_link";
Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(url)); 
```

如果您只想从该链接查看视频，请在页面中保留所有其他详细信息。假设这是 YouTube 链接，`http://www.youtube.com/watch?v=ZC7ZOGpM2cU&feature=g-logo&context=G233b464FOAAAAAAABAA`.

如果您解析 YouTube HTML 页面的源代码，您可能会看到以下部分：

```
<link rel="alternate" type="application/json+oembed" href="http://www.youtube.com/oembed?url=http%3A//www.youtube.com/watch?v%3DZC7ZOGpM2cU&amp;format=json" title="Bigg Boss 5: Juhi Parmar wins Big Boss season 5">
<link rel="alternate" type="text/xml+oembed" href="http://www.youtube.com/oembed?url=http%3A//www.youtube.com/watch?v%3DZC7ZOGpM2cU&amp;format=xml" title="Bigg Boss 5: Juhi Parmar wins Big Boss season 5">
<meta property="fb:app_id" content="87741124305">
<meta property="og:url" content="http://www.youtube.com/watch?v=ZC7ZOGpM2cU">
<meta property="og:title" content="Bigg Boss 5: Juhi Parmar wins Big Boss season 5">
<meta property="og:description" content="Ntv News: Juhi Parmar wins Bigg Boss 5 - Juhi Parmar wins &#39;Bigg Boss 5&#39;, takes home Rs.1 crore - No kid for now, keen for good work: Juhi Parmar">
<meta property="og:type" content="video">
<meta property="og:image" content="http://i3.ytimg.com/vi/ZC7ZOGpM2cU/hqdefault.jpg">
  <meta property="og:video" content="http://www.youtube.com/v/ZC7ZOGpM2cU?version=3&amp;autohide=1">
<meta property="og:video:type" content="application/x-shockwave-flash">
<meta property="og:video:width" content="396">
<meta property="og:video:height" content="297">
<meta property="og:site_name" content="YouTube"> 
```

在此，提取以下内容。

```
<meta property="og:video" content="http://www.youtube.com/v/ZC7ZOGpM2cU?version=3&amp;autohide=1"> 
```

在此，`http://www.youtube.com/v/ZC7ZOGpM2cU?version=3&amp;autohide=1`链接将全屏显示。

同样，您必须提取播放列表的部分 HTML 代码。

我希望这可以帮助你。

# javascript - GraphDracula：如何检测 onclick 和 onmouseover 事件？

> ID：11812934
> 
> 赞同：2
> 
> 时间：2012-08-05T00:07:43.333
> 
> 标签：javascript, raphael, graph-drawing

[GraphDracula](http://www.graphdracula.net/)是一个不错的简单的小型图形可视化库，基于 RaphaelJS。然而，我希望它检测到的两个非常重要的事情是 onmouseover（在一个节点上）和 onclick（再次在一个节点上）。

例如，在他们最基本的示例中，“cherry”节点上的鼠标悬停应该提供有关cherry 的一些额外细节。单击它会弹出一个警告框。

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T01:48:51.287

您可以通过遍历图形对象中的节点并在对象上添加 Raphael 处理程序来做到这一点：http `shape`: [//jsfiddle.net/imsky/65Mpy/](http://jsfiddle.net/imsky/65Mpy/)

```
var g = new Graph();
//Rest of code
for(var i in g.nodelist){
   g.nodelist[i].shape.mouseover(console.log)
   g.nodelist[i].shape.click(console.log)
} 
```

# java - 调用 glTexImage2D 清除数据缓冲区

> ID：11812937
> 
> 赞同：0
> 
> 时间：2012-08-05T00:08:14.037
> 
> 标签：java, opengl, lwjgl

我将 LWJGL 用于它的 OpenGL 绑定，并且我正在尝试绘制一个带有纹理的四边形。我已经成功地做到了，但是有一个奇怪的副作用，我不确定它为什么会出现。

以下代码在第一次加载纹理时执行（在第一次渲染之前）。`textureID`当我绑定纹理/绘制四边形时，我保存了 for 的值。以下设置代码取自[此处](https://stackoverflow.com/questions/10801016/lwjgl-textures-and-strings)找到的 SO 答案。

```
int textureID = GL11.glGenTextures(); // Generate texture ID

GL11.glBindTexture(GL11.GL_TEXTURE_2D, textureID); // Bind texture ID

// Setup wrap mode
GL11.glTexParameteri(GL11.GL_TEXTURE_2D, GL11.GL_TEXTURE_WRAP_S, GL11.GL_CLAMP);
GL11.glTexParameteri(GL11.GL_TEXTURE_2D, GL11.GL_TEXTURE_WRAP_T, GL11.GL_CLAMP);

// Setup texture scaling filtering
GL11.glTexParameteri(GL11.GL_TEXTURE_2D, GL11.GL_TEXTURE_MIN_FILTER, GL11.GL_NEAREST);
GL11.glTexParameteri(GL11.GL_TEXTURE_2D, GL11.GL_TEXTURE_MAG_FILTER, GL11.GL_NEAREST);

// Send texel data to OpenGL
GL11.glTexImage2D(GL11.GL_TEXTURE_2D, 0, GL11.GL_RGBA8, image.getWidth(), image.getHeight(), 0, GL11.GL_RGBA, GL11.GL_UNSIGNED_BYTE, buffer); 
```

在渲染循环中，我使用以下代码绘制四边形：

```
int texture = TextureLoader.loadTexture(TextureLoader.loadImage("/pc_run/run3.png"));

GL11.glBindTexture(GL11.GL_TEXTURE_2D, texture);

GL11.glBegin(GL11.GL_QUADS);
{
    GL11.glTexCoord2f(0.0f, 0.0f);
    GL11.glVertex2f(-hw, -hh);

    GL11.glTexCoord2f(1.0f, 0.0f);
    GL11.glVertex2f(+hw, -hh);

    GL11.glTexCoord2f(1.0f, 1.0f);
    GL11.glVertex2f(+hw, +hh);

    GL11.glTexCoord2f(0.0f, 1.0f);
    GL11.glVertex2f(-hw, +hh);
}
GL11.glEnd(); 
```

到目前为止，这是可行的（并且也包含在`glPushMatrix()`/`glPopMatrix()`调用之间）。但是，到目前为止，我绘制到 GLContext 的任何内容都不会显示。删除初始化代码中的调用 `GL11.glTexImage2D`，精灵不显示，但其他所有内容（非纹理）都正确显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T04:21:51.977

您需要为`glDisable(GL_TEXTURE_2D)`不应该被纹理化的对象禁用纹理化 ( )。

# html - 我不能在我的帖子中添加 tumblr like 按钮？

> ID：11812938
> 
> 赞同：0
> 
> 时间：2012-08-05T00:08:24.953
> 
> 标签：html, tumblr

我的问题是，为了让某人“喜欢”我的照片，他们必须点击永久链接才能这样做。我不知道我做错了什么，因为我已经尝试了很多次让它工作。有人可以看看我的 HTML 并告诉我为什么它不起作用吗？谢谢，麻烦您了，

小威

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T03:41:12.083

试试[这个](http://like-button.tumblr.com/)页面了解更多信息。可能会有所帮助。

# css - css：对id规则如何传递的误解？

> ID：11812940
> 
> 赞同：1
> 
> 时间：2012-08-05T00:08:38.403
> 
> 标签：css

我很难让 ul 标记落在边距内。我通过改变来修复它

```
#contents ul {
border:solid;
    font-size:85%;
margin-left: 0px;
padding-left: 2.5em;
    max-width: inherit;
list-style-position: inside;
} 
```

到

```
ul {
  /* rules */
} 
```

即使有问题的 ul 被赋予了“内容”的 id，但似乎规则只会传递给它的孩子？或者还有其他原因导致这次事故？如果可能，我希望能够将 ul 规则集限制为“内容”ID。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-05T00:15:30.423

和

```
#contents ul 
```

您是说任何`<ul>`属于 and 元素的后代都`id="contents"`应该应用样式。但你说你有

```
<ul id="contents"> 
```

所以你可以做

```
ul#contents {
  /* your rules */
} 
```

虽然这不应该是用元素限定选择器的必要条件；`#contents`一个人应该就够了。

如果你想要`<ul>`with`id="contents"` **和**它的后代，你可以做

```
#contents, #contents ul {
  /* your rules */
} 
```

# java - 从数据库中获取字符串

> ID：11812941
> 
> 赞同：-1
> 
> 时间：2012-08-05T00:09:05.157
> 
> 标签：java, android, sql, database

我在[第 4.3 节](http://www.vogella.com/articles/AndroidSQLite/article.html#databasetutorial_database)中有类似这里的数据库。

`String`当我想`TextSwitcher`单独显示它时，如何从这个数据库中获取一个项目并将其转换为一个`Activity`？

我知道如何将数据添加到此数据库并`ArrayList`在示例中显示，但我无法使用此数据库中的任何项目`ArrayList`。请帮我处理这个问题。

我试着按照你说的做，但我总是替换一些错误的东西，Eclipse 显示方法查询不适用于参数，请任何人都可以帮助我并告诉我应该是什么

```
uri, projection, selection, selectionArgs, sortOrder 
```

我的名称与我的问题中链接的教程中的名称相同，我想获取字符串，其中数字是我的 mCounter 变量的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T01:16:30.820

在您`SecondActivity`从数据库中查询您想要的值时。

您可以使用[`ContentResolver`](http://developer.android.com/reference/android/content/ContentResolver.html).

```
ContentResolver contentResolver = this.getContentResolver();

Cursor cursor = 
    contentResolver.query(
        uri, projection, selection, selectionArgs, sortOrder);

String myStringValue = 
    cursor.getString(cursor.getColumnIndex(columnName)); 
```

*   替换`uri`为您的表的 uri。
*   替换`projection`为此查询所需的列。这需要是一个数组`Strings`
*   替换为此查询`selection`的子句。`where`
*   替换`selectionArgs`为 `selection`. 这需要是一个数组`Strings`。
*   替换`sortOrder`为排序顺序，`null`如果您不关心结果的顺序，可以这样做。

最后一行代码将从`String`数据库中获取`String`.

*   替换`columnName`为目标字符串所在的列名。

# javascript - 从 JavaScript 数组中删除负数

> ID：11812943
> 
> 赞同：0
> 
> 时间：2012-08-05T00:09:48.073
> 
> 标签：javascript, arrays, for-loop, splice, negative-number

这不是从数组中删除负整数。我想不通为什么不...

```
for(var ii = 0; ii < diffs.length; ii++) {
     if(Number(diffs[ii]) < 0) {
       diffs.splice(ii, 1);
     }
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T00:14:30.667

在遍历期间修改数组时，不能从 0 向上遍历数组，因为删除当前元素会将数组中的其他元素向下移动并导致您跳过下一个元素。

解决此问题的常用方法是以相反的顺序遍历数组元素，因为通过删除当前元素重新定位的元素是您已经遍历的元素，而不是`for`循环接下来仍要处理的元素：

```
for(var ii = diffs.length - 1; ii >= 0; ii--) {
    if(Number(diffs[ii]) < 0) {
        removed.push(diffs[ii]);
        diffs.splice(ii, 1);
    }
} 
```

您还必须在从阵列中删除之前推送已删除的项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T00:17:20.990

您有两个问题：1）当您删除数组中的项目时，您必须确保不增加计数器（这可以通过从末尾计数来避免）。2）您必须存储 splice 的结果，然后将其添加到删除的数组中

```
for(var ii = diffs.length - 1; ii >= 0; ii--) {
    if(+diffs[ii] < 0) { // use the unary plus operator to convert to a number, just in case
        removed.push(diffs.splice(ii, 1)[0]); //splice returns an array - get the first and only element in it
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T00:29:55.743

索引也可以这样固定：

```
for (ii = 0; ii < diffs.length; ii++) {
    if (Number(diffs[ii]) < 0) {
        removed.push(diffs[ii]);
        diffs.splice(ii, 1);
        ii--;
    }
}
console.log(diffs);
console.log(removed); 
```

[小提琴](http://jsfiddle.net/GDgPx/)

正如我现在所看到的，再次发布这个答案太晚了:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-05T00:24:59.787

在向前遍历数组时删除项目时，您需要调整循环变量或跳过下一个元素。另一种可能性是向后遍历。

```
for (var i=0; i<diffs.length; i++)
    if (Number(diffs[i]) < 0)
        diffs.splice(i--, 1);

// OR

for (var i=diffs.length-1; i>=0; i--)
    if (Number(diffs[i]) < 0)
        diffs.splice(i, 1); 
```

`diffs`创建一个新数组并用它覆盖变量可能更容易（甚至更快） 。这与[`filter()`方法](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/filter)非常优雅：

```
var diffs = diffs.filter(function(diff) { return Number(diff) >= 0; }); 
```

# postgresql - Apache DdlUtils :: 如何获取自增键的序列名称？

> ID：11812945
> 
> 赞同：0
> 
> 时间：2012-08-05T00:09:50.910
> 
> 标签：postgresql, ddlutils

我正在使用[Apache DdlUtils](http://db.apache.org/ddlutils/)查询 PostgreSQL 数据库以获取表和列元数据（最终目标是自动生成 javax.persistence 注释的实体 bean）。但是在我看来，***DdlUtils***库没有提供一种方法来获取自动增量列中使用的序列名称。**Column**类提供了一个isAutoIncrement**方法**来查询自动增量状态，但我找不到获取与其关联的序列名称的方法。这是 PostgreSQL 中 DDL 的一部分，例如：

```
orders=# \dS customer
                         Table "public.customer"
    Column     |       Type        |                    Modifiers
---------------+-------------------+--------------------------------------------------
 id            | integer           | not null default nextval('cst_id_seq'::regclass)
 name          | character varying | not null
 (...) 
```

我应该直接查询一些元数据/目录表来获取那部分信息吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T08:31:50.150

回答我自己的问题......是的，就像**millimoose**建议的那样，它不能用**DdlUtils**来完成，你必须查询information_schema.columns表：

```
public String getPostgreSQLSequenceForColumn(String database, String table, String column) {
    try {
        Statement stmt = connection.createStatement();
        String sql="select column_default from information_schema.columns where "+
                   "table_catalog='"+database+"' and "                           +
                   "table_schema='public' and "                                  +
                   "table_name='"+table+"' and "                                 +
                   "column_name='"+column+"'";
        ResultSet rs = stmt.executeQuery(sql);
        rs.next();
        String sequenceName = rs.getString(1);
        panicIf(rs.next());
        return sequenceName;
    } catch (Exception e) {
        throw new ExceptionAdapter(e);
    }
} 
```

# ruby-on-rails-3 - Rails 中的 Bootstrap Carousel 突然停止工作

> ID：11812946
> 
> 赞同：2
> 
> 时间：2012-08-05T00:10:12.580
> 
> 标签：ruby-on-rails-3, twitter-bootstrap

我在 Rails 应用程序中使用的轮播直到不久前还在工作，现在下一个和上一个按钮不起作用。没有对此视图或 CSS 中的轮播进行任何更改。

这是我的代码：

```
.carousel.slide#myCarousel
 .carousel-inner
  .active.item
    =image_tag("/assets/1.jpg")
    .carousel-caption
      %h4 Caption
  .item
    =image_tag("/assets/2.jpg")
    .carousel-caption
      %h4 Caption
  .item
    =image_tag("/assets/3.jpg")
    .carousel-caption
      %h4 Caption

 %a.carousel-control.left{"data-slide" => "prev", :href => "#myCarousel"} ‹
 %a.carousel-control.right{"data-slide" => "next", :href => "#myCarousel"} › 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T18:18:52.757

发现这个解决方案对我有用：

[https://stackoverflow.com/questions/9353294/bootstrap-carousel-not-working](https://stackoverflow.com/questions/9353294/bootstrap-carousel-not-working%20Bootstrap%20Carousel%20not%20Working)

在我的标题中使用了这个：

```
<script>
$(function(){
  $('#myCarousel').carousel();
});
</script> 
```

# java - java socket编程中的流块

> ID：11812947
> 
> 赞同：-4
> 
> 时间：2012-08-05T00:10:18.117
> 
> 标签：java, sockets, network-programming

在我的代码的一部分中，我从服务器写入套接字并等待从客户端将其变红，但客户端从未读取我从服务器和程序块发送的这个整数。我测试了，我看到服务器发送了整数，但我找不到客户端没有收到整数的原因。我在这里写了我的代码。请注意，我评论了关于将“mysize”变量从服务器传输到客户端的代码的重要部分，例如“// ***** **** //”

谢谢你。

我的服务器部分（重要的行是第 107 行）：

```
import java.awt.List;
import java.awt.im.spi.InputMethod;
import java.io.DataInputStream;
import java.io.DataOutputStream;
import java.io.IOException;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.io.OutputStream;
import java.io.PrintStream;
import java.net.InetAddress;
import java.net.ServerSocket;
import java.net.Socket;
import java.net.SocketAddress;
import java.net.UnknownHostException;
import java.util.ArrayList;

import javax.swing.JOptionPane;

/**
 * 
 */

/**
 * @author Sina
 *
 */
public class BoxServer {

    ServerSocket serversocket;
    static ThreadHandler t[]=new ThreadHandler[1000000];
    static int size=0;
    static ArrayList<Message> messagebox=new ArrayList<Message>();
    public static void main(String[] args) {

        ServerSocket serverSocket = null;
        try {
            serverSocket = new ServerSocket(79);
        } catch (IOException e1) {
            // TODO Auto-generated catch block
            System.exit(0);
            e1.printStackTrace();
        }
        while(true)
        {

        try{

                //InetAddress inetadress=InetAddress.getLocalHost();
                //System.out.println(inetadress);
                //System.out.println(inetadress.getHostName());
                //System.out.println(inetadress.getHostAddress());
                Socket socket=serverSocket.accept();
                if(socket==null)
                {
                    System.out.println("null");
                }
                t[size]=new ThreadHandler(socket,size);
                size++;
                t[size-1].start();

        }
        catch(UnknownHostException e){
        //  System.out.println("salam s");
            System.exit(0);
         //System.out.println(e.getMessage());
        }
        catch (IOException e) {
            System.exit(0);
        //  System.out.println("bye s");
            //System.out.println(e.getMessage());
        }

        }

    }

}

class ThreadHandler extends Thread{

    private int mysize;
    Socket mySocket;
    ObjectInputStream inp;
    ObjectOutputStream outp;
    public ThreadHandler(Socket s,int size)
    {

        this.mySocket=s;
        this.mysize=size;
        System.out.println("Actives: " +Thread.activeCount());

    }
    public void run()
    {
        try {

            inp=new ObjectInputStream(mySocket.getInputStream());
            outp=new ObjectOutputStream(mySocket.getOutputStream());
            System.out.println("yaaaani minvise ? :|");
            outp.writeInt(mysize);//*********//
            System.out.println(mysize+"neveshte shod dar systam");
            System.out.println("age in umad yaaani nevesht");
        } catch (IOException e1) {
            // TODO Auto-generated catch block
            System.exit(0);
            e1.printStackTrace();
        }

        while(true)
        {
        //System.out.println("thread run");
        //System.out.println(mySocket.getLocalPort());
        //System.out.println(mySocket.getLocalAddress());

        try {
        //  System.out.println("my socket:"+mySocket.getOutputStream());
        //  System.out.println(mySocket.isConnected());
        //  System.out.println(inp.available());
        //  System.out.println("inp = "+inp);

            if(mySocket.isConnected())
            {

            Message mess=(Message)inp.readObject();

        //  System.out.print("mess is ====>");
        //  System.out.println(mess+"        ");
        //  JOptionPane x=new JOptionPane();
        //  x.setVisible(true);
        //  x.setMessage(mess);
            //System.out.println("dsd");
            //System.out.println("mess: "+mess);

            if(mess.getReceiver().equals("system-use:code=1"))
            {
            //  System.out.println("yaroo payamasho mikhad");
                String senderOfSystemUse=mess.getSender();
                ArrayList<Message> tempInbox=new ArrayList<Message>();
                for(int i=0;i<BoxServer.messagebox.size();i++)
                {
                    if(BoxServer.messagebox.get(i).getReceiver().equals(senderOfSystemUse) && BoxServer.messagebox.get(i).getDeliver()!=true)
                    {
                        tempInbox.add(BoxServer.messagebox.get(i));
                        BoxServer.messagebox.get(i).delivered();
                    }
                }

             //   System.out.println("قاعدتا باید نوشته باشه :دی");
                outp.writeObject(tempInbox);

            }
            else
            {
                //System.out.println("ye payam be sistem ezaf shod :"+mess);
                BoxServer.messagebox.add(mess);
            }

            }
            //mySocket.close();
        } catch (Exception e) {
            // TODO Auto-generated catch block
            //System.out.println("bug dar thread");
            System.exit(0);
            //e.printStackTrace();
            try {
                mySocket.close();
            } catch (IOException e1) {
                // TODO Auto-generated catch block
                System.exit(0);
            //  e1.printStackTrace();
            }

        }

         }

    }
} 
```

我的客户代码：

```
import java.awt.Color;
import java.awt.GridLayout;
import java.awt.LayoutManager;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.FocusEvent;
import java.awt.event.FocusListener;
import java.io.IOException;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.net.Socket;
import java.net.UnknownHostException;
import java.util.ArrayList;

import javax.swing.ImageIcon;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTextArea;
import javax.swing.JTextField;
import javax.swing.ScrollPaneConstants;
import javax.swing.SwingUtilities;

public class Main extends JFrame{

    /**
     * @param args
     */

    public String userTemp;
    public Main()
    {

        this.setDefaultCloseOperation(EXIT_ON_CLOSE);
        final JPanel jpanel=new JPanel(null);
        this.getContentPane().add(jpanel);
        JButton inbox=new JButton("INBOX");
        jpanel.add(inbox);
        inbox.setBounds(0,0,100,30);
        inbox.setToolTipText("for see your inbox messages click!");
        this.setVisible(true);
        this.setSize(400,400);
        JLabel receiver=new JLabel("receiver : ");
        jpanel.add(receiver);
        receiver.setBounds(0,60,100,30);
        final JTextField receiverText=new JTextField();
        jpanel.add(receiverText);
        receiverText.setBounds(100,60,100,30);
        receiverText.setBackground(Color.magenta);
        JLabel message=new JLabel("message : ");
        jpanel.add(message);
        message.setBounds(0, 90, 100, 30);
        final JTextArea messageText=new JTextArea();
        jpanel.add(messageText);
        messageText.setBounds(100,90,200,30);
        messageText.setBackground(Color.magenta);
        ImageIcon x=new ImageIcon("send.png");
        JButton send=new JButton(x);
        jpanel.add(send);
        send.setBounds(50,130,64,64);
        final JTextField username=new JTextField("username ...");
        JButton signup=new JButton("new user");
        signup.setVisible(false);
        JButton login=new JButton("login Or create");
        jpanel.add(login);
        jpanel.add(signup);
        jpanel.add(username);
        username.setBounds(10,240,100,40);
        login.setBounds(10, 290, 200, 50);
        signup.setBounds(110, 290, 100, 50);
        //kpanel
        final JPanel kpanel=new JPanel(new GridLayout(0, 1));
        kpanel.setBackground(Color.green);
        ImageIcon t=new ImageIcon("back.png");
        JButton back=new JButton(t);
        kpanel.add(back);
        back.setBounds(0,0,64,64);  
        kpanel.setVisible(false);
    //  this.getContentPane().add(kpanel);

        try {

            username.addFocusListener(new FocusListener() {

                @Override
                public void focusLost(FocusEvent arg0) {
                    // TODO Auto-generated method stub

                }

                @Override
                public void focusGained(FocusEvent arg0) {
                    // TODO Auto-generated method stub
                    String teString=username.getText();
                    if(teString.equals("username ..."))
                    {
                        username.setText("");
                    }
                }
            });

            final Socket socket = new Socket("127.0.0.1",79); 
            final ObjectOutputStream out = new ObjectOutputStream(socket.getOutputStream());
            final ObjectInputStream in=new ObjectInputStream(socket.getInputStream());

                    try {
                        System.out.println("ghable khundane shomaarash");

                        int temp=in.readInt();//*********//

                        System.out.println("baade khundane shomaarash");

                        userTemp=""+temp;
                        login.setText(userTemp);

                        Thread timer=new Thread()
                        {
                            public void run()
                            {
                                while(true)
                                {
                                    Message temp=new Message();
                                    temp.setReceiver("system-use:code=1");
                                    temp.setSender(userTemp);

                                    try {
                                        out.writeObject(temp);
                                        sleep(60000);
                                    } 
                                    catch (InterruptedException e) {
                                        // TODO: handle exception
                                    //  e.printStackTrace();
                                    } catch (IOException e) {
                                        // TODO Auto-generated catch block
                                        //e.printStackTrace();
                                        try {
                                            socket.close();
                                        } catch (IOException e1) {
                                            // TODO Auto-generated catch block

                                        }
                                    }

                                }
                            }
                        };
                        timer.start();

                    } catch (Exception e1) {
                        // TODO Auto-generated catch block
                        try {
                            socket.close();
                        } catch (IOException e2) {
                            // TODO Auto-generated catch block
                    //      System.out.println("socket can not close");
                        }
                    //  e1.printStackTrace();
                    }

            Thread readerMessagesFromServer=new Thread(){

                public void run()
                {
                    while(true)
                    {

                        try {
                            ArrayList<Message> inboxReceived;

                            inboxReceived = (ArrayList<Message>) in.readObject();
                        //  System.out.println(userTemp+" received in its box :"+inboxReceived.size());
                            for(int i=0;i<inboxReceived.size();i++)
                            {
                                kpanel.add(new JLabel(inboxReceived.get(i).toString()));

                            }

                        } catch (IOException e) {
                            // TODO Auto-generated catch block

                            try {

                                socket.close();
                                in.close();
                                out.close();

                            } catch (IOException e1) {
                                // TODO Auto-generated catch block
                                e1.printStackTrace();
                            }

                            e.printStackTrace();
                        } catch (ClassNotFoundException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        }

                    }
                }
            };

            readerMessagesFromServer.start();

            send.addActionListener(new ActionListener() {

                @Override
                public void actionPerformed(ActionEvent e) {

                    String rec=receiverText.getText();
                    String mes=messageText.getText();
                    String snd=userTemp;
                    Message obj=new Message();
                    obj.setReceiver(rec);
                    obj.setSender(snd);
                    obj.setText(mes);

                    try {
                        out.writeObject(obj);
                    } catch (IOException e1) {
                        // TODO Auto-generated catch block
                        e1.printStackTrace();
                    }

                }
            });

        } catch (UnknownHostException e2) {
            // TODO Auto-generated catch block
            e2.printStackTrace();
        } catch (IOException e2) {
            // TODO Auto-generated catch block
            e2.printStackTrace();
        }

        inbox.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent arg0) {
                jpanel.setVisible(false);
                kpanel.setVisible(true);
                Main.this.getContentPane().add(kpanel);

            }
        });

        back.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent arg0) {
                kpanel.setVisible(false);
                Main.this.getContentPane().remove(kpanel);
                jpanel.setVisible(true);

            }
        });

    }
    public static void main(String[] args) {

        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                Main ex = new Main();
                ex.setVisible(true);
            }
        });

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T00:15:16.750

在调用 writeInt() 之后调用 flush()。您还应该在 ObjectInputStream 之前构造 ObjectOutputStream。

# mediawiki - 您如何将换行符粘贴到 mediawiki 中？

> ID：11812949
> 
> 赞同：6
> 
> 时间：2012-08-05T00:10:28.177
> 
> 标签：mediawiki

在文本编辑器（记事本）中，我创建这样的文本

```
=Heading=
* item1
* item2
* item3 
```

然后我尝试将其复制并粘贴到 mediawiki 并将其变成

```
=Heading= * item1 * item2 * item3 
```

如何让 mediawiki 停止删除预格式化文本中的行尾？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T20:30:01.490

@gman 的答案不再有效（使用 WikiEditor 版本 0.3.1）。

如果您只是一个 wiki 编辑器，您实际上需要取消选中

```
 Enable navigable table of contents 
```

在下面

```
 My Preferences->Labs features 
```

如果您是 wiki 的主持人，您应该将此行添加到您的 LocalSettings.php 文件中：

```
$wgDefaultUserOptions['usenavigabletoc'] = 0; 
```

这会为所有用户禁用 wiki 编辑器右侧的导航栏，这似乎是换行符无法正常工作的原因。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-06T20:22:29.137

`Show edit toolbar (requires JavaScript)`问题是你需要关闭`My Preferences->Editing`

复制和粘贴时会出现换行问题。关闭它，问题就消失了。

# javascript - 谷歌地理定位和方向 API

> ID：11812955
> 
> 赞同：2
> 
> 时间：2012-08-05T00:11:46.087
> 
> 标签：javascript, google-maps, geolocation, google-maps-markers, google-directions-api

您如何将 Google Geolocation 和 Direction API 结合起来，以便当您单击地理定位标记和任何一个标记（我硬编码了坐标）时，它将显示它们之间的方向。

**地理位置代码**

```
<script type="text/javascript">
  function initialize() {
    var locations = [
     ['Hougang', 1.37265, 103.893658],
     ['Punggol', 1.400617, 103.907833],
     ['MacRitchie Reservoir', 1.346002, 103.825436],
     ['Bishan', 1.352051, 103.849125],
     ['Sentosa', 1.251226, 103.830757]
    ];
    var map = new google.maps.Map(document.getElementById('map'), {
      zoom: 15,
      center: new google.maps.LatLng(1.37265, 103.893658),
      mapTypeId: google.maps.MapTypeId.ROADMAP
    });
    var infowindow = new google.maps.InfoWindow();
    var marker, i;
    for (i = 0; i < locations.length; i++) {
      marker = new google.maps.Marker({
        position: new google.maps.LatLng(locations[i][1], locations[i][2]),
        map: map
      });
      google.maps.event.addListener(marker, 'click', (function (marker, i) {
        return function () {
          infowindow.setContent(locations[i][0]);
          infowindow.open(map, marker);
        }
      })(marker, i));
    }
    // Check if user support geo-location
    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(function (position) {
        var latitude = position.coords.latitude;
        var longitude = position.coords.longitude;
        var geolocpoint = new google.maps.LatLng(latitude, longitude);
        var mapOptions = {
          zoom: 8,
          center: geolocpoint,
          mapTypeId: google.maps.MapTypeId.HYBRID
        }
        // Place a marker
        var geolocation = new google.maps.Marker({
          position: geolocpoint,
          map: map,
          title: 'Your geolocation',
          icon: 'http://labs.google.com/ridefinder/images/mm_20_green.png'
        });
      });
    }
  }
  google.maps.event.addDomListener(window, 'load', initialize);
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T01:27:46.320

*   向标记添加点击侦听器。
*   当它执行时，将当前标记的位置推到一个数组上。
*   如果数组的长度为 2，则调用以这两个位置作为起点和终点的方向服务。

与[此示例](http://www.geocodezip.com/inventoresdegaragem_com_dbteste_indexA.html)类似，但不是“地图”点击侦听器，而是使用“标记”点击侦听器。

您确实说过您想强制第一次单击定位标记，您需要编写代码来检查标记的位置并验证它是否是地理位置标记，如果您想这样做的话。我认为让用户单击其中一个目标标记，然后从地理位置标记生成方向（您需要对其进行特殊引用）会更简单。

[假设起点是地理位置的示例](http://www.geocodezip.com/v3_GoogleEx_geolocation_directionsA.html)

示例中的代码片段：

```
var geolocation = null;
  var ren = null;

  function initialize() {

    var locations = [
      ['Hougang', 1.37265, 103.893658],
      ['Punggol', 1.400617, 103.907833],
      ['MacRitchie Reservoir', 1.346002, 103.825436],
      ['Bishan', 1.352051, 103.849125],
      ['Sentosa', 1.251226, 103.830757]
    ];

    var map = new google.maps.Map(document.getElementById('map_canvas'), {
      zoom: 13,
      center: new google.maps.LatLng(1.37265, 103.893658),
      mapTypeId: google.maps.MapTypeId.ROADMAP
    });

    var infowindow = new google.maps.InfoWindow();

    var marker, i;

    // Place a marker
    geolocation = new google.maps.Marker({
      position: map.getCenter(),
      map: map,
      title: 'Your geolocation',
      icon: 'https://maps.google.com/mapfiles/ms/micons/green.png'
    });

    for (i = 0; i < locations.length; i++) {
      marker = new google.maps.Marker({
        position: new google.maps.LatLng(locations[i][1], locations[i][2]),
        map: map
      });

      google.maps.event.addListener(marker, 'click', (function(marker, i) {
        return function() {
          infowindow.setContent(locations[i][0]);
          infowindow.open(map, marker);
          if (ren && ren.getMap()) ren.setMap(null);
          ren = new google.maps.DirectionsRenderer({
            'draggable': true
          });
          ren.setMap(map);
          ren.setPanel(document.getElementById("directionsPanel"));
          ser = new google.maps.DirectionsService();

          //Cria a rota, o DirectionTravelMode pode ser: DRIVING, WALKING, BICYCLING ou TRANSIT
          ser.route({
            'origin': geolocation.getPosition(),
            'destination': marker.getPosition(),
            'travelMode': google.maps.DirectionsTravelMode.DRIVING
          }, function(res, sts) {
            if (sts == 'OK') ren.setDirections(res);
          })
        }
      })(marker, i));
    }

    // Check if user support geo-location
    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(function(position) {
        var latitude = position.coords.latitude;
        var longitude = position.coords.longitude;
        var geolocpoint = new google.maps.LatLng(latitude, longitude);

        var mapOptions = {
            zoom: 8,
            center: geolocpoint,
            mapTypeId: google.maps.MapTypeId.HYBRID
          }
          // Place a marker
        geolocation = new google.maps.Marker({
          position: geolocpoint,
          map: map,
          title: 'Your geolocation',
          icon: 'http://labs.google.com/ridefinder/images/mm_20_green.png'
        });
      });
    } else {
      // Place a marker
      geolocation = new google.maps.Marker({
        position: map.getCenter(),
        map: map,
        title: 'Your geolocation',
        icon: 'http://labs.google.com/ridefinder/images/mm_20_green.png'
      });
    }
  }
  google.maps.event.addDomListener(window, 'load', initialize);
```

```
html,
body,
#map_canvas {
  margin: 0;
  padding: 0;
  height: 100%;
}
```

```
<script src="https://maps.googleapis.com/maps/api/js"></script>
<div id="map_canvas"></div>
```

# asp.net-mvc-4 - HTTP 错误 500.0 - VS2012 .NET 4.5 本地开发服务器的内部服务器错误

> ID：11812956
> 
> 赞同：2
> 
> 时间：2012-08-05T00:12:09.440
> 
> 标签：asp.net-mvc-4, asp.net-web-api, asp.net-4.5

我安装了包含 .NET 4.5 的 Visual Studio 2012。当我创建一个默认的 MVC 4 Web Api 应用程序并尝试运行它时，我得到一个内部服务器错误 500.0。我想知道是否有人遇到过这种情况？我重新安装了 .NET 4.5，我还拥有所有可用于 Web 平台安装程序的软件包。我似乎找不到任何错误或日志。

Http 错误 500.0 模块：IIS Web 核心错误代码：0x80070585

**编辑：* *我已经能够将应用程序发布到我的本地 IIS 并运行。因此，在直接从 VS 调试时，该错误似乎是特定于开发的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T16:42:10.750

当前解决方案：

我进入了 Web 项目属性，选择了 Web 选项卡，然后在“服务器”下选择了“使用 Visual Studio 开发服务器”而不是本地 IIS。这让我现在可以从 VS 运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T22:47:38.120

在我的情况下，有一个未记录的要求，即具有 DataAnnotations 中的RequiredAttribute 的实体类也需要旧 System.Runtime.Serialization 中的 DataMemberAttribute(Required = true)。

我只是通过在异常上停止调试器并调用：

response.Content.ReadAsStringAsync().GetAwaiter().GetResult()

...在即时调试窗口中，它显示了一个字符串，其中包含一条提示上述内容的消息。添加 DataContract 和 DataMember 属性后，问题就解决了，我的 Web API 现在可以工作了。

我对这种行为并不满意，因为我应该能够在事件日志或调试窗口或 Global.asax 错误处理程序中看到“内部服务器错误”。似乎 Web API 与所有托管环境完全断开。

我认为在将任何 Web API 解决方案放入生产环境之前，需要一个过滤器来筛选此类响应并将它们写入应用程序事件日志！

# iphone - 一个应用程序可以在另一个应用程序运行时显示 uialertview 吗？

> ID：11812967
> 
> 赞同：-1
> 
> 时间：2012-08-05T00:13:55.497
> 
> 标签：iphone, objective-c, ios, xcode, telephony

我有一个跟踪来电的应用程序和另一个接听电话的应用程序。我希望我的应用程序（无论出于何种原因）显示带有正在进行的呼叫 CallID 的警报视图。特别是电话应用程序是否可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T00:24:56.537

您可能应该改用本地或推送通知。就像短信到达时您在应用程序中一样。您将在屏幕顶部看到一条横幅，显示一条消息，您可以点击它转到消息应用程序。有关详细信息，请参阅 Apple 文档[http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Introduction/Introduction.html%23//apple_ref/doc/uid/TP40008194-CH1-SW1](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Introduction/Introduction.html%23//apple_ref/doc/uid/TP40008194-CH1-SW1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T00:17:20.820

为了回答您的问题，一个应用程序可能会在另一个应用程序运行时显示警报。如果您尝试提交到应用商店，我认为苹果不会允许这样做。但是我在运行其他应用程序（使用 cycript）时显示了来自 SpringBoard 的警报视图，而 SpringBoard 本身就是一个应用程序，所以它是可能的。

# javascript - 取消选中复选框时声音未静音

> ID：11812970
> 
> 赞同：0
> 
> 时间：2012-08-05T00:14:46.500
> 
> 标签：javascript, jquery, html5-audio

我正在创建一个游戏，当开始屏幕出现时，开始播放一些音乐。现在我还在开始屏幕中添加了一个复选框。选中此复选框时，如果未选中，则应听到音乐，不应播放音乐。

我有以下代码：

```
// Show the start screen and play some music.
game.start(game.DEMO_MODE);
if (document.getElementById('music').checked){ //check if checkbox is checked
    music.play();
    music.loop(); //Loop the music
} 
```

如果选中该复选框，则此代码会检查游戏负载，如果是，则播放音乐。这很好用，但只有在游戏加载时。如果选中该复选框并且有人在开始屏幕中未选中它，则音乐将继续播放。除非他重新加载游戏，否则声音会静音。

显然我不想要这个。取消选中复选框时应停止声音，反之亦然。

我认为这个问题可以通过使用 jQuery 来解决，`.bind('change',function(){`但我没有成功。我希望这里有人知道需要添加什么...

复选框的代码（它还将选中/未选中状态存储到 cookie 或本地存储中）：

```
jQuery(function($) {
    // Aa key must is used for the cookie/storage
    var storedData = getStorage('com_test_checkboxes_'); 

    $('div#musiccheck input:checkbox').bind('change',function(){
        // do something here tho mute or unmute the sound??

        // save the data on change
        storedData.set(this.id, $(this).is(':checked')?'checked':'not');
    }).each(function() {
        // on load, set the value to what we read from storage:
        var val = storedData.get(this.id);
        if (val == 'checked') $(this).attr('checked', 'checked');
        if (val == 'not') $(this).removeAttr('checked');
        if (val) $(this).trigger('change');
    }); 
}); 
```

如何解决这个问题？

亲切的问候，

莫里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T00:23:20.880

```
$("#music").on('change', function() {
    if (this.checked) {
        music.play();
        music.loop();
    }else{
        music.stop();
    }
}); 
```

# preview - Google Drive：设置预览缩略图

> ID：11812973
> 
> 赞同：5
> 
> 时间：2012-08-05T00:15:15.780
> 
> 标签：preview, google-drive-api

视频、电子表格和文档支持在云端硬盘中预览其内容。我正在开发一个 Google Drive 应用程序，我希望它支持预览其内容，那么 Google Drive 中是否有任何 api 来设置预览缩略图图像或嵌入其中的东西？例如，在视频点击预览中，它会在播放器中显示视频，预览图像或电子表格会显示其快照。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-05T01:15:12.133

目前这是不可能的，但我们希望通过 API 提供一些东西。它并不像听起来那么简单，因为版本、共享等方面存在问题。

# f# - 如何在 F# 中定义执行顺序？

> ID：11812979
> 
> 赞同：3
> 
> 时间：2012-08-05T00:16:29.080
> 
> 标签：f#, functional-programming

在纯函数式编程中，执行顺序无关紧要，因此是不确定的（即取决于编译器）。如果您有副作用，则执行顺序确实很重要。那么如何在 F# 中定义呢？

我有一个函数可以递归删除给定路径的所有空子文件夹。此外，如果它们的名称在给定列表中，它会删除其中包含的一些文件。

算法很简单：

1.  删除列表中的所有文件。
2.  对子文件夹进行递归调用。
3.  如果文件夹为空，请删除该文件夹。这必须是最后一步。

此外，该函数以元组的形式返回已删除元素的数量（已删除文件夹的数量、已删除文件的数量）。

这是我的代码：

```
let rec DeleteEmptyFolders path filenames =
    // Deletes a file or folder using the given function.
    // Returns 1 if the file could be deleted, otherwise 0.
    let Delete delete name =
        try
            delete name;
            1
        with
            | _ -> 0

    // The function result (number of deleted folders and files).
    let deletedFolders (a, _) = a
    let deletedFiles   (_, a) = a

    let accumulator a b = 
        ( deletedFolders a + deletedFolders b,
          deletedFiles a + deletedFiles b )

    // Deletes the given files and returns the number of deleted elements.
    let DeleteFiles folder names =
        names
        |> Seq.map (fun n -> Path.Combine (folder, n))
        |> Seq.map (fun n -> Delete File.Delete n)
        |> Seq.reduce (+)

    // Deletes the folder if it is empty
    // (Directory.Delete will fail if it is not empty).
    let DeleteFolder folder = Delete Directory.Delete folder

    // The recursive call
    let DeleteEmptySubFolders folder files =
        Directory.EnumerateDirectories folder
        |> Seq.map (fun p -> DeleteEmptyFolders p files)
        |> Seq.reduce (accumulator)

    // Three functions are executed: DeleteEmptySubFolders, DeleteFolder and DeleteFiles
    // But it has to be done in the correct order: DeleteFolder must be executed last.
    accumulator (DeleteEmptySubFolders path filenames) (DeleteFolder path, DeleteFiles path filenames) 
```

我可以弄清楚 DeleteEmptySubFolders 首先执行，然后是 DeleteFolder 和 DeleteFiles。这是函数在代码中出现的顺序。但我不认为这是 F# 的规则，它只是编译器决定的。它可以是任何其他命令。

当然，我可以交换代码最后一行中的元素。编译器会相应地更改执行顺序。但由于这不是语言的规则，这只是运气。

在关于这个主题的[另一个问题](https://stackoverflow.com/questions/3170951/f-code-execution-order)中，我读到值（即没有参数的函数）按照它们声明的顺序进行初始化。

```
let firstCall  = DeleteFiles path filenames
let secondCall = DeleteEmptySubFolders path filenames
let thirdCall  = DeleteFolder path

accumulator (secondCall) (thirdCall, firstCall) 
```

现在电话的顺序是正确的。但同样：这是 F# 的规则还是编译器的工作原理？（如果不使用这些函数，编译器可能决定根本不初始化这些值）

如果我想告诉 F# 执行顺序很重要以及每次调用应该何时完成，我应该如何写最后一行？是否有关键字或特殊语法将函数标记为无副作用？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-05T00:34:09.970

F# 不是纯函数式编程语言：函数和值将按从上到下、从左到右的顺序计算。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T00:43:49.833

我认为最好将您的代码编写为

```
let firstCall  = DeleteFiles path filenames
let secondCall = DeleteEmptySubFolders path filenames
let thirdCall  = DeleteFolder path

accumulator (secondCall) (thirdCall, firstCall) 
```

# android - android.widget.CalendarView 类无法实例化

> ID：11812992
> 
> 赞同：2
> 
> 时间：2012-08-05T00:18:44.227
> 
> 标签：android, eclipse, macos

我很想在我的 Mac 上开发 android 应用程序。具有以下规格

```
eclipse.buildId=I20120608-1400
java.version=1.6.0_33
java.vendor=Apple Inc.
BootLoader constants: OS=macosx, ARCH=x86_64, WS=cocoa, NL=en_US
Framework arguments:  -product org.eclipse.epp.package.jee.product -keyring 
Command-line arguments:  -os macosx -ws cocoa -arch x86_64 -product 
```

基本上，当我将日历视图拖到我的 xml 布局中时，我在 xml 编辑器中收到此错误：

无法实例化以下类：-android.widget.CalendarView(Open Class, Show Error Log)

以下是错误日志：

```
!ENTRY com.android.ide.eclipse.adt 4 0 2012-08-03 19:28:43.196
!MESSAGE android.widget.DatePicker failed to instantiate.
!STACK 0

    java.lang.ClassCastException: com.android.layoutlib.bridge.MockView cannot be cast to android.widget.CalendarView
        at android.widget.DatePicker.<init>(DatePicker.java:212)
        at android.widget.DatePicker.<init>(DatePicker.java:145)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
        at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
        at com.android.ide.eclipse.adt.internal.editors.layout.ProjectCallback.instantiateClass(ProjectCallback.java:402)
        at com.android.ide.eclipse.adt.internal.editors.layout.ProjectCallback.loadView(ProjectCallback.java:166)
        at android.view.BridgeInflater.loadCustomView(BridgeInflater.java:207)
        at android.view.BridgeInflater.createViewFromTag(BridgeInflater.java:135)
        at android.view.LayoutInflater.rInflate_Original(LayoutInflater.java:746)
        at android.view.LayoutInflater_Delegate.rInflate(LayoutInflater_Delegate.java:64)
        at android.view.LayoutInflater.rInflate(LayoutInflater.java:718)
        at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
        at android.view.LayoutInflater.inflate(LayoutInflater.java:372)
        at com.android.layoutlib.bridge.impl.RenderSessionImpl.inflate(RenderSessionImpl.java:321)
        at com.android.layoutlib.bridge.Bridge.createSession(Bridge.java:331)
        at com.android.ide.common.rendering.LayoutLibrary.createSession(LayoutLibrary.java:325)
        at com.android.ide.eclipse.adt.internal.editors.layout.gle2.RenderService.createRenderSession(RenderService.java:372)
        at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.renderWithBridge(GraphicalEditorPart.java:1640)
        at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.recomputeLayout(GraphicalEditorPart.java:1391)
        at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart$ReloadListener.reloadLayoutSwt(GraphicalEditorPart.java:1868)
        at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart$ReloadListener.access$0(GraphicalEditorPart.java:1806)
        at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart$ReloadListener$1.run(GraphicalEditorPart.java:1800)
        at org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)
        at org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:135)
        at org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:3944)
        at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3621)
        at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$9.run(PartRenderingEngine.java:1022)
        at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
        at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:916)
        at org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:86)
        at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:585)
        at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
        at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:540)
        at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
        at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:124)
        at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
        at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
        at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
        at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
        at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
        at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
        at org.eclipse.equinox.launcher.Main.run(Main.java:1438) 
```

请帮忙

**编辑**：这似乎只发生在 SDK 版本 16 中。SDK 15 打开并使用日历视图很好 Oo

# iphone - 如何为 NavigationController 使用 push Storyboard Segue

> ID：11812996
> 
> 赞同：3
> 
> 时间：2012-08-05T00:19:23.137
> 
> 标签：iphone, objective-c, ios, xcode, storyboard

我是 iOS 开发的新手。我使用 Storyboard 创建了一个应用程序来导航到不同的页面。

![在此处输入图像描述](../Images/c86529f3eb8679af3b673171d4d1a712.png)

当我单击客户页面中的添加栏按钮时-> 转到添加客户页面。（使用`Modal`Storyboard Segue）

在那里，当我输入用户名和密码并单击保存按钮时->返回客户页面。

一切正常。

问题是我想`back button`在添加客户页面中有。我已经知道我可以使用`Push`Storyboard Segue，但是当我使用它时，我遇到了一个错误：

```
Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'Pushing a navigation controller is not supported'
*** First throw call stack:
(0x13cb022 0x155ccd6 0xeff1b 0xefa24 0x44bde6 0x4404d0 0x13cce99 0x1814e 0x256a0e 0x13cce99 0x1814e 0x180e6 0xbeade 0xbefa7 0xbe266 0x3d3c0 0x3d5e6 0x23dc4 0x17634 0x12b5ef5 0x139f195 0x1303ff2 0x13028da 0x1301d84 0x1301c9b 0x12b47d8 0x12b488a 0x15626 0x25ed 0x2555)
terminate called throwing an exception(lldb) 
```

客户视图控制器.h：

```
#import "AddCustomerViewController.h"
    @interface CustomerViewController : UITableViewController<AddCustomerViewControllerDelegate>
    {
        IBOutlet UITableView *tableview;
        NSMutableArray *customers;
    }

    @property(nonatomic,retain)IBOutlet UITableView *tableview;
    @property(nonatomic,retain)NSMutableArray *customers;

    @end 
```

这是我在 CustomerViewController.m 中使用的代码：

```
self.customers = [[NSMutableArray alloc]init]; 

-(void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if([segue.identifier isEqualToString:@"AddCustomer"])
    {
        UINavigationController *navigationController = segue.destinationViewController;
        AddCustomerViewController *addCustomerViewController = [[navigationController viewControllers] objectAtIndex:0];
        addCustomerViewController.delegate = self;
    }
}

-(void) addCustomerViewControllerDidSave: (AddCustomerViewController *) Controller newCustomer: (Customer *) customer
{
    [self dismissViewControllerAnimated: YES completion:NULL];
    [self.customers addObject:customer];
    [self.tableview reloadData];
} 
```

AddCustomerViewController.h：

```
#import "Customer.h"

@class AddCustomerViewController;

@protocol AddCustomerViewControllerDelegate <NSObject>

-(void) addCustomerViewControllerDidSave: (AddCustomerViewController *) Controller newCustomer: (Customer *) customer;

@end

@interface AddCustomerViewController : UITableViewController
{

}

@property (nonatomic, weak) id <AddCustomerViewControllerDelegate> delegate;

@property (nonatomic, strong) IBOutlet UITextField *firstnameTxt;
@property (nonatomic, strong) IBOutlet UITextField *lastnameTxt;

- (IBAction)save:(id)sender;

@end 
```

和 AddCustomerViewController.m：

```
- (void)save:(id)sender 
{
    NSLog(@"Save");
    Customer *newCustomer = [[Customer alloc]init];
    newCustomer.firstname = self.firstnameTxt.text;
    newCustomer.lastname = self.lastnameTxt.text;
    [self.delegate addCustomerViewControllerDidSave:self newCustomer:newCustomer];

} 
```

你能帮我如何使用`Push`Storyboard Segue（有后退按钮）吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-05T14:13:28.130

首先，像这里每个人所说的那样摆脱第二个导航控制器。

然后，在情节提要中，将“+”按钮直接连接到 Add Customer View Controller 并将 segue 设置为 push。

接下来，单击客户视图控制器的导航栏，在属性检查器中，您应该为该视图定义标题（“客户”），应该有一个“后退按钮”行。键入“Back”，您将在 Add Customer 视图控制器中获得一个 Back 按钮。

在 prepareForSegue 中，

```
if([segue.identifier isEqualToString:@"AddCustomer"])
{    
    AddCustomerViewController *addCustomerViewController = segue.destinationViewController;
    addCustomerViewController.delegate = self;
} 
```

要关闭添加客户视图控制器，请使用 popViewControllerAnimated，如下所示：

```
-(void) addCustomerViewControllerDidSave: (AddCustomerViewController *) Controller newCustomer: (Customer *) customer
{
    [self.customers addObject:customer];
    [self.tableview reloadData];
    [self.navigationController popViewControllerAnimated:YES];
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-05T00:21:54.883

您只需要一个导航控制器。尝试删除第二个导航控制器并将第一个表中的 segue 直接设置为第二个。

编辑：

我仔细看了看，我认为你应该使用`popViewControllerAnimated`而不是`dismissModalViewControllerAnimated`. 后者用于模态，前者用于推送。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T04:04:50.347

您不能推动导航控制器。我怀疑在那种情况下你需要第二个，但有时这种用法会派上用场。

但是，您需要将样式设置为 Modal（或自定义 - 并提供您自己的 segue 子类实现）。

完成后，调用 dismissViewControllerAnimated:completion: 来“弹出”导航控制器。

# c++ - C++ 错误：未分配被释放的指针

> ID：11812999
> 
> 赞同：0
> 
> 时间：2012-08-05T00:19:27.430
> 
> 标签：c++

我正在构建一个 AVL 树。我有一种删除树中项目的方法，但出现错误。

这是我得到的运行时错误：

```
malloc: *** error for object 0x100100120: pointer being freed was not allocated
*** set a breakpoint in malloc_error_break to debug
jim Abort trap 
```

我的课看起来像这样：

```
struct Avlnode{
string data;
int balfact;
Avlnode *left;
Avlnode *right;
};

class Avltree{
public:
Avltree();
~Avltree( );
Avlnode* insert(string i, bool* j);
static Avlnode* buildtree ( Avlnode *root, string data, bool *h ) ;
void display( Avlnode *root );
Avlnode* deldata ( Avlnode* root, string data, bool *h );
static Avlnode* del ( Avlnode *node, Avlnode* root, bool *h );
static Avlnode* balright ( Avlnode *root, bool *h );
static Avlnode* balleft ( Avlnode* root, bool *h );
void setroot ( Avlnode *avl );
static void deltree ( Avlnode *root );
private:
Avlnode *root;
int items;
}; 
```

deldata 的定义如下：

```
Avlnode* Avltree::deldata ( Avlnode *root, string data, bool *h ){
Avlnode *node;

if ( root == NULL ){
    //cout << "\nNo such data.";
    return ( root );
}
else{
    if ( data < root -> data ){
        root -> left = deldata ( root -> left, data, h ) ;
        if ( *h )
            root = balright ( root, h ) ;
    }
    else{
        if ( data > root -> data ){
            root -> right = deldata ( root -> right, data, h ) ;
            if ( *h )
                root = balleft ( root, h );
        }
        else{
            node = root;
            if ( node -> right == NULL ){
                root = node -> left ;
                *h = true ;
                delete ( node ) ;
            }
            else{
                if ( node -> left == NULL ){
                    root = node -> right ;
                    *h = true ;
                    delete ( node ) ;
                }
                else{
                    node -> right = del ( node -> right, node, h ) ;
                    if ( *h )
                        root = balleft ( root, h ) ;
                }
            }
        }
    }
}
return ( root ) ;
}

Avlnode* Avltree :: del ( Avlnode *succ, Avlnode *node, bool *h ){
Avlnode *temp = succ ;

if ( succ -> left != NULL ){
    succ -> left = del ( succ -> left, node, h ) ;
    if ( *h )
        succ = balright ( succ, h ) ;
}
else{
    temp = succ ;
    node -> data = succ -> data ;
    succ = succ -> right ;
    delete ( temp ) ;
    *h = true ;
}
return ( succ ) ;
} 
```

为什么我会收到此错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T00:27:29.860

tl;博士但是-管理内存的类+内存管理错误->

您正在实现一个析构函数，这意味着您的复制/销毁逻辑比浅拷贝可以处理的更多。这是有道理的，因为你有一个 member `Avlnode *root;`。

要么使用 RAII，要么正确实现复制构造函数和赋值运算符。

这被称为三法则。使用的所有术语都很容易用谷歌搜索。