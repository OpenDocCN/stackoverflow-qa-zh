# StackOverflow 问答 11777000-11777999

# apache - apache 6 tomcat setenv.bat文件输入行太长

> ID：11777009
> 
> 赞同：0
> 
> 时间：2012-08-02T12:03:14.467
> 
> 标签：apache, batch-file, tomcat6, javaagents

当我尝试使用启动批处理文件启动我的 apache 服务器时。我收到此错误消息：

输入行太长
"C:\Tomcat\apache-tomcat-6.0.35\bin\setenv.bat" 此时出乎意料。

我的 setenv.bat 看起来像这样：

```
set CATALINA_OPTS=" %CATALINA_OPTS% -javaagent:C:\jp2-2.1\lib\jborat-agent.jar -Dch.usi.dag.jborat.exclusionList="C:\jp2-2.1\conf\exclusion.lst" -Dch.usi.dag.jborat.liblist="C:\jp2-2.1\conf\lib.lst" -Dch.usi.dag.jp2.outputFilePrefix="Profiling" -Dch.usi.dag.jp2.dumpers="ch.usi.dag.jp2.dump.xml.XmlDumper" -Dch.usi.dag.jborat.instrumentation="ch.usi.dag.jp2.instrument.AddInstrumentation" -Dch.usi.dag.jborat.codemergerList="C:\jp2-2.1\conf\codemerger.lst" -Dch.usi.dag.jborat.uninstrumented="uninstrumented" -Dch.usi.dag.jborat.instrumented="instrumented" -Xbootclasspath/p:C:\jp2-2.1\lib\Thread_JP2.jar;C:\jp2-2.1\lib\jborat-runtime.jar;C:\jp2-2.1\lib\jp2-runtime.jar"
C:\Tomcat\apache-tomcat-6.0.35\bin\startup.bat 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-25T17:45:02.547

我认为您不应该在“setenv.bat”文件中调用“startup.bat”文件。“setenv.bat”文件由“catalina.bat”有条件地调用，我相信它本身在正常的 Tomcat 设置中由“startup.bat”调用。

# internet-explorer - Internet Explorer 工具栏问题

> ID：11777010
> 
> 赞同：0
> 
> 时间：2012-08-02T12:03:15.577
> 
> 标签：internet-explorer, com-interop, toolbar, ieaddon

我正在基于[c#中漂亮的IE工具](http://www.codeproject.com/Articles/29215/Pretty-IE-Toolbar-in-C)栏为Internet Explorer开发一个附加工具栏..但是，在尝试时我发现这个工具栏也出现在文件浏览器中..如何使其启用（或可见）仅在 Internet Explorer 中......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T16:17:01.773

如果不是 iexplore.exe，您可以[获取进程名称，然后从 DllGetClassObject() 返回 E_FAIL。](https://stackoverflow.com/questions/4570174/how-to-get-process-name-in-c)

# java - 布局中的 SWT 复合排序

> ID：11777014
> 
> 赞同：0
> 
> 时间：2012-08-02T12:03:32.197
> 
> 标签：java, layout, swt

我有一个包含两个子复合材料的复合材料

```
+---+---+
| 1 | 2 |
+---+---+

```

当用户单击按钮时，如何更改这两个组合的顺序？结果应该是：

```
+---+---+
| 2 | 1 |
+---+---+

```

谢谢西蒙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T12:18:23.087

控制类有方法moveAbove（）和moveBelow（），我认为这两个正是你需要的

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T12:07:46.933

我认为这回答了你的问题：[Change the order of element in RowLayout SWT Java](https://stackoverflow.com/a/9254219)

它基本上说，有一个`z-order`你可以用来定位你的组件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T06:17:35.397

Control.moveAbove() 和 Control.moveBelow() 用于更改 Composite children() 中控件的顺序。应该重新布局父复合以计算子级的新边界。

# zend-framework - 如何在zend框架中为dojo动态树创建dojo数据onclick事件以实现程序化方法

> ID：11777018
> 
> 赞同：2
> 
> 时间：2012-08-02T12:03:41.260
> 
> 标签：zend-framework, dojo, treeview

我是 Zend 框架和 dojo 的新手。我在 zend 框架中使用 dojo 创建了动态树结构，但我想通过单击每个文件夹和树结构的元素来通过编写函数来导航到另一个表单。请检查我的代码和帮帮我，我在点击事件链接上经历了一些道场，但无法解决..

```
 <html>
    <head>
    <title> Tree Structure </title>
    <link rel="stylesheet"    href=/dojo/dijit/themes/ claro/claro.css" /> 
    <script type="text/javascript" src="/ dojo/dojo/dojo.js" 
         djConfig="parseOnLoad:true, isDebug:true"  >
       </script> 

   <script type="text/javascript">
   dojo.require("dojo.parser");
   dojo.require("dijit.layout.ContentPane");
   dojo.require("dijit.layout.BorderContainer");
   dojo.require("dijit.layout.TabContainer")
   dojo.require("dijit.form.Button");
   dojo.require("dojo.data.ItemFileReadStore"); 
   dojo.require("dijit.tree.ForestStoreModel");
   dojo.require("dijit.Tree"); 
   dojo.require("dojo.parser"); 
  function myTree( domLocation ) { 
  var store = new dojo.data.ItemFileReadStore({url:    "http://localhost/CMTaSS_module1.0/public/dojo/cbtree/datastore/Family-1.7.json"}); 

 var treeModel = new dijit.tree.TreeStoreModel({
         store: store,
         query: { name:'John'}
        });

  var tree =  new dijit.Tree( { 
             model: treeModel, 
            id: "mytree",
           openOnClick: true
                   }); 
                    tree.placeAt( domLocation );
                } 
var tree_obj = new dijit.Tree({
    model: treeModel

 },
  "tree_obj");

 dojo.connect(tree_obj, 'onClick', function(item, node, evt){
     console.log("Item", item);
     console.log("Node", node);
     console.log("Event", evt);
     //console.log('node: ' +tree_obj.getLabel(node));
     //console.log('event: ' +tree_obj.getLabel(evt));
     console.log('identifier: ' + tree_obj.getLabel(item))
  });

</script>

</head>
 <body class="claro"><br><br><br>
 <div id="CheckboxTree"> 
  <script type="text/javascript"> 
     myTree("CheckboxTree"); 
   </script> 
 </div> 
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T20:21:20.330

看起来您的代码示例格式不正确，因为某些逻辑在 myTree 函数之外。我使用 jsbeautifier.org 来确认这一点。

其他注意事项... 您应该等到 dojo 准备好。要么使用[dojo.addonload](http://dojotoolkit.org/reference-guide/1.6/dojo/addOnLoad.html#dojo-addonload)，要么[创建一个小部件](http://dojotoolkit.org/documentation/tutorials/1.6/recipes/custom_widget/)并在代码的 html 部分中引用该小部件。小部件令人惊叹，是使道场变得伟大的原因，因此掌握它们的工作方式将带来好处。

另请注意，如果以编程方式创建小部件（新 dijit.Tree），则应在其上调用启动。以声明方式创建它（内联 html）时不需要这样做。

我希望这有帮助。

# php - php - 裁剪空白并调整图像大小

> ID：11777019
> 
> 赞同：1
> 
> 时间：2012-08-02T12:03:45.090
> 
> 标签：php, crop, image-resizing

我想知道从图像中裁剪空白并动态调整其大小以保持纵横比的给定尺寸的最佳方法。该方法应该是相当轻量级的，因为我需要它来在一个页面中显示许多图像（具有 30-50 个图像/页的产品列表）。

我使用[这个脚本](http://shiftingpixel.com/2008/03/03/smart-image-resizer/)来调整图像的大小，我也看到[了](https://stackoverflow.com/questions/1669683/crop-whitespace-from-image-in-php)它完全符合我的需要，但我不确定如何组合这两个脚本。

任何帮助或替代方案将不胜感激。

# php - 链接在 Facebook 应用程序中无法正常工作

> ID：11777020
> 
> 赞同：0
> 
> 时间：2012-08-02T12:03:49.240
> 
> 标签：php, smarty, facebook-apps

我在我的 Facebook 应用程序中遇到了一个小问题。当我左键单击任何链接时，它将不起作用，但是当我尝试使用右键单击并在新窗口中打开选项时，它会完美运行。请帮我找出问题所在。

这是网址，请查看[http://apps.facebook.com/moviereviewforyou/](http://apps.facebook.com/moviereviewforyou/)

代码是：

```
<a href="{$url->reviewMovie($file.fkey)}">
<img src="{$url->img2($file.thumbnail)}"  alt="{$file.ftitle}" width=100 height=100/>
</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T12:10:20.503

您所指的页面在`<head>`标签中包含以下内容：

```
<noscript><meta http-equiv="X-Frame-Options" content="deny" /></noscript> 
```

这就是拒绝在框架中显示页面的原因。删除此行，或设置`content`为`allow`让它显示在框架中。

编辑：

我注意到我提到的那一行是在 FaceBook 本身的标题中，而不是在你的标题中。您是否正确引用了您的页面？您不应引用包含您的页面的 facebook 页面，而应直接引用您的页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T15:46:55.570

看起来你没有（有效的）SSL 证书——至少这是我的浏览器在我尝试访问你的应用程序时警告我的第一件事（Facebook 自动将我重定向到其页面的 HTTPS 版本，因为我有那个选项在我帐户的安全设置中设置）。

然后你`"http://…"`在开头设置了硬编码的链接 href 属性，当用户通过 HTTPS 使用你的应用程序时，这也不好。只需使用相对链接而不是绝对 URL；或者至少让它们像这样开始`"//example.com/…"`（这让浏览器可以根据用于请求嵌入这些链接的页面的协议来决定他必须使用哪个协议）。

# version-control - 如何使用命令行访问远程主机的 perforce

> ID：11777034
> 
> 赞同：0
> 
> 时间：2012-08-02T12:04:13.517
> 
> 标签：version-control, command-line, command, perforce

我正在尝试使用命令行访问远程机器上的 perforce（我知道它的 IP 和端口）。我知道 p4v 命令用于运行 perforce，但它运行 perforce GUI 而不是命令行。

为什么我想要这个，因为我想在远程主机 perforce 上运行一些命令（类似于同步）。这些命令提供了很多我可以在 GUI 中获得的功能。

我听说必须为此进行一些 p4 设置。我也试过[这个](http://www.perforce.com/perforce/doc.current/manuals/p4guide/02_config.html#1070447)链接，但似乎没有用。

谁能告诉我如何访问命令行的 perforce。我正在寻找一些分步解决方案。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T14:42:08.073

据我所知，这是不可能的，也就是说，您不能在远程机器上运行 p4 客户端命令。

如果您使用的是 Windows，请尝试SysInternals [Suite](http://technet.microsoft.com/en-us/sysinternals/bb842062)中的[PsExec](http://technet.microsoft.com/en-us/sysinternals/bb897553.aspx)。

`psexec \\REMOTE_MACHINE p4.exe [g-opts] sync \\depot\path\...`

设置[全局选项 [g-opts]](http://www.perforce.com/perforce/doc.current/manuals/cmdref/o.gopts.html#1040647)以覆盖远程机器环境，例如客户端、p4 服务器、端口等。

高温下，

# ios - iOS、Xamarin、UIView、Draw、动态动画不起作用

> ID：11777041
> 
> 赞同：3
> 
> 时间：2012-08-02T12:04:33.550
> 
> 标签：ios, animation, uiview, xamarin.ios, xamarin

我正在使用 MonoDevelop 和 xamarin 创建 iOS 应用程序。

我有一个看起来像这样的视图：

```
public class MyView: UIView 
{
    private Timer _t = new Timer(1000);
    private int _i = 0;

    public MyView()
    {
        _t.Elapsed += (sender, e) => { 
             _i = (_i + 1) % 100;
             this.Draw(new Rectangle(0, 0, 110, 110)); 
         };
        _t.Enabled = true;
    }

    public override void Draw(RectangleF rect)
    {
        base.Draw(rect);
        var uiImage = UIImage.FromFile("myImage");
        var uiImageView = new UIIMageView(new Rectangle(_i, 0, 10, 10));
        uiImageView.Image = uiImage;
        AddSubView(uiIMageView);
    }
} 
```

我希望我的形象会移动。但结果我只有初始的静态图像。任何人都可以建议如何像描述的那样做动画吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-14T13:09:44.347

我建议像这样修改您的代码：

```
public MyView()
    {

        var uiImage = UIImage.FromFile("myImage");
        var uiImageView = new UIIMageView(new Rectangle(0, 0, 10, 10));
        uiImageView.Image = uiImage;
        AddSubView(uiIMageView);

        _t.Elapsed += (sender, e) => { 
             _i = (_i + 1) % 100;
             this.Draw(new Rectangle(_i, 0, 110, 110)); 
         };
        _t.Enabled = true;
    }

    public override void Draw(RectangleF rect)
    {
        base.Draw(rect);
        InvokeOnMainThread(()=>{
             uiImageView.Frame = rect;
        });
    } 
```

我认为您的部分问题是计时器 Elapsed 处理程序在与主 UI 线程不同的线程上运行。此外，您每次不重新创建 UIImageView 会更有效。

# android - 我无法在模拟器上获得 MotionEvent

> ID：11777048
> 
> 赞同：2
> 
> 时间：2012-08-02T12:04:53.063
> 
> 标签：android

我试图对我的应用程序实现缩放，但由于某种原因我无法获得运动事件。

```
public class GraphTest extends Activity implements OnTouchListener {

    private DrawView drawView;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Log.i("MAIN","Created   ");
        drawView = new DrawView(this);
        drawView.setBackgroundColor(Color.WHITE);
        setContentView(drawView);
    }

    @Override
    public boolean onTouch(View v, MotionEvent event) {
        Log.i("MAIN","Touch");
        return false;
    }

} 
```

这是我的示例代码，谁能告诉我我错过了什么？（目前我在模拟的 Android 4.1 上运行它）小更新，它在模拟的 2.3.3 和 2.3.5 的手机上也不起作用

# android - 如何以低速旋转 ImageView

> ID：11777051
> 
> 赞同：1
> 
> 时间：2012-08-02T12:05:05.217
> 
> 标签：android

我已经构建了一个工作正常的指南针应用程序，但它只有一个问题，它是动画，基本上我正在使用 SensorEventListener 中的 matrix.setRotate onSensorChanged 方法旋转一个 ImageView（一个 nidle 图像）。nidle 正在旋转，但速度非常快，这似乎不太好。我想要的是低速旋转图像。就像 iPhone 内置的指南针一样。需要您的专家建议。

```
privateSensorEventListener mySensorEventListener= newSensorEventListener() {
            .
            .
            .
public void onSensorChanged(SensorEvent event) {
            .
            .
            .
            azimuth= (int) event.values[0];
            allowRotating=true;
            dialer.post(new RotateRunnable(azimuth));
            .
            .
            .
}}; 
```

如果传感器数据发生变化，则调用 Runnable

```
private class RotateRunnable implementsRunnable {

    private int Degrees;    
    public Rotate Runnable(intDegrees) {
        this.Degrees= Degrees;
    }

    public void run() {
        if(allowRotating) {
            rotateDialer(Degrees);
            dialer.post(this);
        }
    }

} 
```

旋转图像的方法

```
private void rotateDialer(int Degrees) {

    matrix.setRotate(360-Degrees, dialerWidth/ 2, dialerHeight/ 2);
    dialer.setScaleType(ScaleType.MATRIX);
    dialer.setImageMatrix(matrix);
    allowRotating=false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T12:13:12.060

我相信，如果你平均传感器的变化，它会平滑你的动画。

```
azimuth = ((azimuth + (int)event.values[0]) / 2); 
```

当然，您总是可以通过保留一组值并做一些更有趣的算术来变得更复杂。

[http://en.wikipedia.org/wiki/Average](http://en.wikipedia.org/wiki/Average)

# extjs - 使用字段容器内的配置设置文本字段的值

> ID：11777053
> 
> 赞同：1
> 
> 时间：2012-08-02T12:05:08.063
> 
> 标签：extjs, extjs4, extjs4.1

我无法为字段容器内的文本字段设置值。我想为“fieldcontainer”内的“textfield”设置值和其他配置。所以基本上我设置了我从服务器接收的文本字段的配置，例如：allowBank：true，maxlength：4，值：'Hello World' 我从服务器获取并希望将其提供给里面的 textdfield我的自定义控件是 fieldcontainer。除使用内置 textConfig 的值配置外，所有其他配置均适用。下面是我的代码：

```
Ext.define('PTextField', { extend: 'Ext.form.FieldContainer',
            alias: 'widget.ptextfield',
            requires: ['Ext.form.TextField', 'Ext.Img'],
            width: 170,
            fieldLabel: 'Empty Label',
            labelAlign: 'top',
            layout: {
                type: 'hbox'
            },
            BLANK_IMAGE_URL: '',

            constructor: function (config) {
                this.callParent(arguments);

                Ext.apply(this.down('textfield'), this.textConfig);
                Ext.apply(this.down('image'), this.imgConfig);

            }, // eo function constructor

            initComponent: function () {
                var me = this;
                this.textBox = this.createTextField();
                this.imageBox = this.createImagefield();
                this.items = [this.imageBox, this.textBox];
                this.callParent(arguments);
            }, //eo initComponent
            createTextField: function () { return {xtype: 'textfield'} },
            createImagefield: function () { return { xtype: 'image', height: 20, width: 20} }
        });

var fname = Ext.create('PTextField', {
            fieldLabel: 'First Name',
            textConfig: { value: 'Hello World', allowBlank: false, readOnly: true,     maxLength: 4, width: 100 },
            imgConfig: { src: 'http://www.sencha.com/img/20110215-feat-html5.png' }
        });

fname.render(Ext.getBody()); 
```

我正在使用 extjs 4.1。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T12:33:58.213

我会将您的代码简化为：

删除整个 constructor() 函数。你不需要它。

将您的字段集的函数重写`initComponent()`为：

```
initComponent: function() {
   var me = this;

   Ext.apply(me, items: [{
      xtype: 'textfield',
      value: me.textConfig.value,
      .... 
   }, {
      xtype: 'image',
      src: me.imageConfig.src,
      ... 
   }]);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T16:07:13.453

您应该使用您的配置简单地创建文本字段和图像。然后使用创建的对象定义您的 items 数组，如下所示：

```
initComponent: function() { 
    var me = this,
        textfield = Ext.widget('textfield', me.textConfig),
        image = Ext.widget('image', me.imgConfig);

    me.items = [textfield, image];
    me.callParent(arguments); 
}, 
```

# java - RMI 程序中缺少登录

> ID：11777062
> 
> 赞同：1
> 
> 时间：2012-08-02T12:05:26.497
> 
> 标签：java, rmi, aspectj

我设法编写了一个简单的程序，该程序应该模拟由三个组件组成的系统中的传递控制。但我不确定我是否做得正确，因为日志看起来不像我预期的那样。

我找不到错误。是在 aspectJ 部分还是在 RMI 部分？

RMI服务器

```
public class RMIServer {

    public static void main(String[] args) throws RemoteException,
            MalformedURLException {
        LocateRegistry.createRegistry(1099);
        HelloIF hello = new Hello();
        Naming.rebind("server.Hello", hello);
        System.out.println("Server is ready.");
    }
} 
```

RMI服务器2

```
public class RMIServer2 {

    public static void main(String[] args) throws RemoteException,
            MalformedURLException, NotBoundException, InterruptedException {

            //LocateRegistry.createRegistry(1098);
            LocateRegistry.getRegistry(1099);
        ByeIF bye = new Bye();
        Naming.rebind("server.Bye", bye);
        System.out.println("Server-Client is ready.");

    } 
```

RMI客户端

```
public class RMIClient {
        public static void main(String[] args) throws RemoteException,
                MalformedURLException, NotBoundException, InterruptedException {

            Registry registry = LocateRegistry.getRegistry("localhost");
            ByeIF bye = (ByeIF) registry.lookup("server.Bye");
            System.out.println(bye.farewell(Thread.currentThread().getName()));
        }
} 
```

你好

```
public class Hello extends UnicastRemoteObject implements HelloIF {

    public Hello() throws RemoteException {
    }

    public String greeting(String c) throws RemoteException,
            InterruptedException {
        return "Good morning!";
    }
} 
```

再见

```
public class Bye extends UnicastRemoteObject implements ByeIF {

    public Bye() throws RemoteException {
    }

    public String farewell(String c) throws RemoteException,
            InterruptedException, NotBoundException {
        Registry registry = LocateRegistry.getRegistry("localhost");
        HelloIF hello = (HelloIF) registry.lookup("server.Hello");
        System.out.println(hello.greeting(Thread.currentThread().getName()));
        return "Bye bye!";
    }

} 
```

日志看起来：

```
[2012-08-03 11:06:18,582] [request1343984778582] [public static void hello.RMIClient.main(java.lang.String[])]
[2012-08-03 11:06:18,738] [request1343984778582] [public java.lang.String hello.Bye.farewell(java.lang.String)]
[2012-08-03 11:06:18,785] [request1343984778582] [public java.lang.String hello.Hello.greeting(java.lang.String)]
[2012-08-03 11:06:18,785] [request1343984778582] [public java.lang.String hello.Hello.greeting(java.lang.String)]
[2012-08-03 11:06:18,847] [request1343984778582] [public static void hello.RMIClient.main(java.lang.String[])] 
```

所以缺少一个日志 -`Bye.farewell()`

我不知道为什么 aspectJ 看不到方法何时结束。

```
@Aspect
public class ReportingAspect {

    // --------------------------------------LOGGER

    static final Logger logger = Logger.getLogger(ReportingAspect.class);

    // --------------------------------------POINTCUTS

    @Pointcut("execution(public static void hello.RMIClient.main(String[]))")
    public void requestStart() {
    }

    @Pointcut("(execution(String greeting(..)) && args(context)) || "
            + "(execution(String farewell(..)) && args(context))")
    public void RMImethodStart(String context) {
    }

    @Pointcut("execution(String greeting(..)) || "
            + "execution(String farewall(..)) || "
            + "execution(public static void hello.RMIClient.main(String[]))")
    public void general() {
    }

    @Pointcut("execution(public static void hello.RMIServer.main(String[])) || "
            + "execution(public static void hello.RMIServer2.main(String[]))")
    public void setLoggingFile() {
    }

    // --------------------------------------ADVICES

    @Before("requestStart()")
    public void setLoggerAndThreadName(JoinPoint joinPoint) {
        PropertyConfigurator.configure("log4j.properties");
        Thread.currentThread().setName("request" + System.currentTimeMillis());
        report(joinPoint);
    }

    @Before("RMImethodStart(context)")
    public void setThreadName(JoinPoint joinPoint, String context) {
        Thread.currentThread().setName(context);
        report(joinPoint);
    }

    @Before("setLoggingFile()")
    public void setProperties() {
        PropertyConfigurator.configure("log4j.properties");
    }

    @After("general()")
    public void generateReport(JoinPoint joinPoint) {
        report(joinPoint);
    }

    /*//!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
    @After("execution(public String hello.Bye.farewell(String))")
    public void test(JoinPoint joinPoint)
    {
        report(joinPoint);
    }*/

    // ---------------------------------------REPORT
    void report(JoinPoint jp) {
        logger.error(jp.getSignature().toLongString());
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T12:14:29.773

如果你发现一个你不理解的错误，试着减少问题。在您的情况下，在实际代码中使用一些旧`System.out.println()`代码如何查看真正发生的情况？

另外，我没有看到任何异常处理。根据您的 Java 版本，`main()`可能会吞下异常。

# android - Android InApp 计费包装？

> ID：11777064
> 
> 赞同：5
> 
> 时间：2012-08-02T12:05:45.343
> 
> 标签：android, in-app-billing

是否有围绕 InApp Billing API 的经过良好测试和记录的包装器？

Google 提供的 API 甚至很难调用——单一`aidl`接口和相当复杂的（针对任务）示例应用程序。更不用说，还有一些尚未修复的已知错误（例如，不检查`null`in `BillingService.onStart()`）相当混乱......

我已经根据示例应用程序集成了支付流程，但我正在寻找一些更好的解决方案。到目前为止我发现了什么：

*   [gumma-android-payments](http://code.google.com/p/gumma-android-payments/) - 这个提供了公平的 API，但实现似乎只是`Dungeons`示例的副本，这让我觉得使用它并不安全
*   [marketbilling](http://code.google.com/p/marketbilling/) - 这似乎是 Google Code 上的 Dungeon 示例应用程序项目（当前主干没有事件编译 - 没有评论）

有没有其他推荐的资源（当然除了官方文档）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T22:47:14.060

查看[Android 计费库](https://github.com/robotmedia/AndroidBillingLibrary)

# iphone - 图像发送问题到服务器

> ID：11777066
> 
> 赞同：1
> 
> 时间：2012-08-02T12:05:46.760
> 
> 标签：iphone, ios

我正在开发一个应用程序。我想将图像发送到服务器，但我的解析没有调用，也没有得到任何响应。我尝试以下代码。

```
-(void)callParsing   
{

NSData *imgData=UIImageJPEGRepresentation(cameraImageView.image,0.5);

    NSLog(@"%@",imgData);

    NSString *regestrationString=[[NSString alloc]initWithFormat:@"http://humsomething.netsmartz.us/HumServices.svc/updateimage/vchImage=%@",imgData];

    NSURLRequest *regestrationRequest=[[NSURLRequest alloc]initWithURL:[NSURL URLWithString:regestrationString]];

    NSURLResponse *regestrationResponce;

    NSError *error;

    NSMutableData *regestrationData=[[NSMutableData alloc]initWithData:[NSURLConnection sendSynchronousRequest:regestrationRequest returningResponse:&regestrationResponce error:&error]];

    //[self performXML:regestrationData];
    results = [[NSMutableArray alloc] init];
    xmlParser = [[NSXMLParser alloc] initWithData:regestrationData];
    [xmlParser setDelegate: self];
    [xmlParser setShouldResolveExternalEntities: YES];

    if([xmlParser parse])
    {
        NSLog(@"Sucessful");
    }
    else
    {
        NSLog(@"Failure");
    }

}

-(void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *) namespaceURI qualifiedName:(NSString *)qName
   attributes: (NSDictionary *)attributeDict

{           

    if( [elementName isEqualToString:@"RegisterUserResult"] )
    {
            if(!soapResults)
            {
                soapResults = [[NSMutableString alloc] init];   
            }
            [soapResults setString:@""];
            recordResults = TRUE;
        }       
}

-(void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{       
    if( recordResults )
    {
        [soapResults appendString:string];
        NSLog(@"%@",soapResults);
    }
}

-(void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
{

    if([elementName isEqualToString:@"RegisterUserResult"])
    {
        [results addObject:soapResults];
          NSLog(@" REPONSE %@",results);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T13:47:59.507

我正在使用以下作为我的数据的上传者。

```
 -(void) Uploader:(NSData *) imageData fileName : (NSString *) Name
{

    NSLog(@"%d",[imageData length]);

    NSString *urlString = @".aspx URL";

    // setting up the request object now
    NSMutableURLRequest *request = [[[NSMutableURLRequest alloc] init] autorelease];
    [request setURL:[NSURL URLWithString:urlString]];
    [request setHTTPMethod:@"POST"];

    /*
     add some header info now
     we always need a boundary when we post a file
     also we need to set the content type

     You might want to generate a random boundary.. this is just the same 
     as my output from wireshark on a valid html post
     */

    NSString *boundary = [NSString stringWithString:@"---------------------------14737809831466499882746641449"];
    NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@",boundary];
    [request addValue:contentType forHTTPHeaderField: @"Content-Type"];

    /*
     now lets create the body of the post
     */
    NSMutableData *body = [NSMutableData data];
    [body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];    
    [body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"userfile\"; filename=\"%@\"\r\n",Name] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithString:@"Content-Type: application/octet-stream\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[NSData dataWithData:imageData]];
    [body appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];

    // setting the body of the post to the reqeust
    [request setHTTPBody:body];

    // now lets make the connection to the web
    //NSData *returnData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];
    //NSString *returnString = [[NSString alloc] initWithData:returnData encoding:NSUTF8StringEncoding];

    theConnection = [[[NSURLConnection alloc] initWithRequest:request delegate:self] autorelease];
    if( theConnection )
    {
        webData = [[NSMutableData data] retain];
    }
    else
    {
        NSLog(@"theConnection is NULL");
    }

    uploadedData = 0.00;
    totalData = [imageData length];

} 
```

# ios - 如何设置 UIPickerView 的默认值

> ID：11777072
> 
> 赞同：66
> 
> 时间：2012-08-02T12:06:11.817
> 
> 标签：ios, objective-c, xcode, swift, uipickerview

我的 UIPickerView 有问题。我在其中有 3 个值 EU AP 和 NA。当我启动应用程序时，似乎选择了 EU，但是当我创建一个时，`NSLog(@"%@", [regions objectAtIndex:row]);`我只返回`(null)`，现在当我触摸 UIPickerView 时，EU 值被选中，我`"EU"`从 NSLog 中返回。

**我的问题是：**

当用户只启动应用程序并且什么都不碰时，我如何定义一个被选中的默认值（不仅是标签）。

*编辑：*这是我获取所选项目的代码：

```
#pragma mark -
#pragma mark PickerView DataSource

- (NSInteger)numberOfComponentsInPickerView:
(UIPickerView *)pickerView
{
    return 1;
}
- (NSInteger)pickerView:(UIPickerView *)pickerView
numberOfRowsInComponent:(NSInteger)component
{
    return [regions count];
}
- (NSString *)pickerView:(UIPickerView *)pickerView
             titleForRow:(NSInteger)row
            forComponent:(NSInteger)component
{
    return [regions objectAtIndex:row];
}

#pragma mark -
#pragma mark PickerView Delegate
-(void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row
      inComponent:(NSInteger)component
{

                selectedRegion = [[NSString alloc] initWithFormat:
                              @"%@", [regions objectAtIndex:row]];
    NSLog(@"%@", selectedRegion);

} 
```

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2012-08-02T12:17:34.160

**TL:DR 版本：**

```
//Objective-C
[self.picker selectRow:2 inComponent:0 animated:YES];
//Swift
picker.selectRow(2, inComponent:0, animated:true) 
```

* * *

要么你没有设置你的选择器来选择行（你说你似乎已经这样做了，但无论如何）：

```
- (void)selectRow:(NSInteger)row inComponent:(NSInteger)component animated:(BOOL)animated 
```

或者您没有使用以下方法从您的选择器中获取所选项目

```
- (NSInteger)selectedRowInComponent:(NSInteger)component 
```

这将从您的选择器中获取选定的行作为整数，并随心所欲地使用它。这应该可以解决问题。祝你好运。

无论如何阅读参考： [https ://developer.apple.com/documentation/uikit/uipickerview](https://developer.apple.com/documentation/uikit/uipickerview)

* * *

编辑：

在 UIPickerView 中手动设置和获取选定行的示例：

.h 文件：

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController <UIPickerViewDelegate, UIPickerViewDataSource>
{
    UIPickerView *picker;
    NSMutableArray *source;
}

@property (nonatomic,retain) UIPickerView *picker;
@property (nonatomic,retain) NSMutableArray *source;

-(void)pressed;

@end 
```

.m 文件：

```
#import "ViewController.h"

@interface ViewController ()

@end
@implementation ViewController

@synthesize picker;
@synthesize source;

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return YES;
}

- (void) viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];

    self.view.backgroundColor = [UIColor yellowColor];

    self.source = [[NSMutableArray alloc] initWithObjects:@"EU", @"USA", @"ASIA", nil];

    UIButton *pressme = [[UIButton alloc] initWithFrame:CGRectMake(20, 20, 280, 80)];
    [pressme setTitle:@"Press me!!!" forState:UIControlStateNormal];
    pressme.backgroundColor = [UIColor lightGrayColor];
    [pressme addTarget:self action:@selector(pressed) forControlEvents:UIControlEventTouchUpInside];
    [self.view addSubview:pressme];

    self.picker = [[UIPickerView alloc] initWithFrame:CGRectMake(20, 110, 280, 300)];
    self.picker.delegate = self;
    self.picker.dataSource = self;
    [self.view addSubview:self.picker];

    //This is how you manually SET(!!) a selection!
    [self.picker selectRow:2 inComponent:0 animated:YES];
}

//logs the current selection of the picker manually
-(void)pressed
{
    //This is how you manually GET(!!) a selection
    int row = [self.picker selectedRowInComponent:0];

    NSLog(@"%@", [source objectAtIndex:row]);
}

- (NSInteger)numberOfComponentsInPickerView:
(UIPickerView *)pickerView
{
    return 1;
}

- (NSInteger)pickerView:(UIPickerView *)pickerView
numberOfRowsInComponent:(NSInteger)component
{
    return [source count];
}

- (NSString *)pickerView:(UIPickerView *)pickerView
             titleForRow:(NSInteger)row
            forComponent:(NSInteger)component
{
    return [source objectAtIndex:row];
}

#pragma mark -
#pragma mark PickerView Delegate
-(void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row
      inComponent:(NSInteger)component
{
//    NSLog(@"%@", [source objectAtIndex:row]);
}

@end 
```

* * *

**编辑 Swift 解决方案（来源：Dan Beaulieu 的回答）**

定义一个出口：

```
@IBOutlet weak var pickerView: UIPickerView!  // for example 
```

然后在您的*viewWillAppear*或*viewDidLoad*中，例如，您可以使用以下内容：

```
pickerView.selectRow(rowMin, inComponent: 0, animated: true)
pickerView.selectRow(rowSec, inComponent: 1, animated: true) 
```

如果您检查 Swift 2.0 框架，您会看到 .selectRow 定义为：

```
func selectRow(row: Int, inComponent component: Int, animated: Bool) 
```

**在 Xcode 中单击**.selectRow 的选项会显示以下内容：

[![](../Images/889b6742a98fe7e7e0f77bf15aa10ff3.png)](https://i.stack.imgur.com/yy0pi.png)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-02-07T06:10:38.063

这是如何设置 UIPickerView 的默认值

```
[self.picker selectRow:4 inComponent:0 animated:YES]; 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-07-02T18:40:53.073

## 快速解决方案：

定义一个出口：

```
@IBOutlet weak var pickerView: UIPickerView!  // for example 
```

然后在您的*viewWillAppear*或*viewDidLoad*中，例如，您可以使用以下内容：

```
pickerView.selectRow(rowMin, inComponent: 0, animated: true)
pickerView.selectRow(rowSec, inComponent: 1, animated: true) 
```

如果您检查 Swift 2.0 框架，您会看到`.selectRow`定义为：

```
func selectRow(row: Int, inComponent component: Int, animated: Bool) 
```

**在 Xcode 中单击**.selectRow 的选项会显示以下内容：

![在此处输入图像描述](../Images/2c842f674ef1d17b54373abe82a63929.png)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-04-26T00:21:53.767

我也有这个问题。但显然存在方法调用顺序的问题。您必须致电：

```
[self.picker selectRow:2 inComponent:0 animated:YES]; 
```

**打电话**后****

 **```
[self.view addSubview:self.picker]; 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-08-02T12:34:18.283

您必须在它出现之前发送 `- (void)selectRow:(NSInteger)row inComponent:(NSInteger)component animated:(BOOL)animated` 到选择器视图。文档指出方法 selectedRowInComp... 将给出 -1，因此选择器视图可能处于没有选定行的状态。事实证明，它在创建时处于该状态。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-11-21T09:45:43.607

在正常情况下，您可以在**viewDidLoad**方法中执行类似的操作；

> [_picker selectRow:1 inComponent:0 动画:YES];

就我而言，我想从 api 服务器获取数据并将它们显示到`UIPickerView`然后我希望选择器`first`默认选择该项目。

UIPickerView**看起来像是**在创建后选择了第一个项目，但是当您尝试使用 获取所选索引时`selectedRowInComponent`，您将获得`NSNull`. 那是因为它检测到用户没有进行任何**更改**（从 0 中选择 0）。

以下是我的解决方案（在 viewWillAppear 中，在我获取数据后）

```
[_picker selectRow:1 inComponent:0 animated:NO];
[_picker selectRow:0 inComponent:0 animated:NO]; 
```

它有点脏，但不用担心，iOS 中的 UI 渲染非常快；）

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-12-19T02:51:20.530

```
For example: you populated your UIPickerView with array values, then you wanted 
```

在第一次加载 pickerView 时选择某个数组值，例如“Arizona”。请注意，“Arizona”这个词在索引 2 处。这是如何做到的 :) 享受编码。

```
NSArray *countryArray =[NSArray arrayWithObjects:@"Alabama",@"Alaska",@"Arizona",@"Arkansas", nil];
UIPickerView *countryPicker=[[UIPickerView alloc]initWithFrame:self.view.bounds];
countryPicker.delegate=self;
countryPicker.dataSource=self;
[countryPicker selectRow:2 inComponent:0 animated:YES];
[self.view addSubview:countryPicker]; 
```**

# ajax - 验证错误后不更新字段

> ID：11777077
> 
> 赞同：6
> 
> 时间：2012-08-02T12:04:02.183
> 
> 标签：ajax, validation, user-interface, jsf-2, primefaces

我有一个可以在其中创建或更新员工的 primefaces 对话框。它将由此打开

```
 </p:dialog><p:dialog id="employeeEditDialog" header="#{msg.employeeEdit}"
        widgetVar="dlgEmployeeEdit" resizable="false">

        <p:ajax  event="close" listener="#{employeeView.cancel}"
              update=":showEmployees:liste" />

        <ui:include src="/content/Employee/ShowEmployeeContent.xhtml" />
    </p:dialog> 
```

这是对话框页面

```
<h:form id="editContent">
<p:growl id="growl" showDetail="true" sticky="false" life="5000" />
<p:focus id="focusEdit" for="emSalutation" />
<h:panelGrid columns="2" id="contentGrid">
    <h:panelGrid columns="2" id="allgemein">                                                            <h:outputText value="#{msg.id}" />
        <h:outputText value="#{employeeView.newEmployee.id}" />

        <h:outputText value="#{msg.salutation}" />
        <p:selectOneMenu value="#{employeeView.newEmployee.salutation}"
            id="emSalutation">
            <f:selectItem itemLabel="" itemValue="" />
            <f:selectItems value="#{employeeView.salutations}" var="salutations"
                itemLabel="#{salutations.description}" itemValue="#{salutations}" />
        </p:selectOneMenu>

        <h:outputText value="#{msg.title}" />
        <p:inputText value="#{employeeView.newEmployee.title}" id="emTitle" />

        <h:outputText value="#{msg.name}" />
        <p:inputText value="#{employeeView.newEmployee.name}" id="emName"
            validatorMessage="#{msg.valName}" />

        <h:outputText value="#{msg.prename}" />
        <p:inputText value="#{employeeView.newEmployee.prename}"
            id="emPrename" />

        <h:outputText value="#{msg.loginname}" />
        <p:inputText value="#{employeeView.newEmployee.loginname}"
            validatorMessage="#{msg.valLogin}" />

        <h:outputText value="#{msg.department}" />
        <h:panelGrid columns="2" id="departmentGrid">
            <p:selectOneMenu value="#{employeeView.selectedDepartment.id}"
                id="emDepartment">
                <f:selectItem itemLabel="" itemValue="" />
                <f:selectItems value="#{employeeView.departmentList}"
                    var="department" itemLabel="#{department.description}"
                    itemValue="#{department.id}" />
            </p:selectOneMenu>
            <p:commandButton icon="ui-icon-disk" immediate="true"
                oncomplete="dlgDepartmentAdd.show()"
                update="departmentGrid, :departmentAddDialog">
            </p:commandButton>
        </h:panelGrid>

        <h:outputText value="#{msg.position}" />
        <h:panelGrid columns="2" id="positionGrid">
            <p:selectOneMenu value="#{employeeView.selectedPosition.id}"
                id="emPosition">
                <f:selectItem itemLabel="" itemValue="" />
                <f:selectItems value="#{employeeView.positionList}" var="position"
                    itemLabel="#{position.description}" itemValue="#{position.id}" />
            </p:selectOneMenu>
            <p:commandButton icon="ui-icon-disk" immediate="true" id="buttonPos"
                oncomplete="dlgPositionAdd.show()"
                update="positionGrid, :positionAddDialog">
            </p:commandButton>
        </h:panelGrid>

        <h:outputText value="#{msg.phone}" />
        <p:inputText value="#{employeeView.newEmployee.phone}" id="emPhone" />

        <h:outputText value="#{msg.fax}" />
        <p:inputText value="#{employeeView.newEmployee.fax}" id="emFax" />

        <h:outputText value="#{msg.email}" />
        <p:inputText value="#{employeeView.newEmployee.email}" id="emEmail"
            validator="myEmailValidator" validatorMessage="#{msg.valEmail}" />

        <h:outputText value="#{msg.employeedSince}" />
        <p:calendar value="#{employeeView.newEmployee.employeedSince}"
            id="emEmployeedSince" pattern="dd.MM.yyy" showOn="button" />

        <h:outputText value="#{msg.employeedEnd}" />
        <p:calendar value="#{employeeView.newEmployee.employeedEnd}"
            id="emEmployeedEnd" pattern="dd.MM.yyy" showOn="button" />

        <h:outputText value="#{msg.active}" />
        <p:selectBooleanCheckbox  value="#{employeeView.newEmployee.active}"
            id="emActive" /> 
    </h:panelGrid>

</h:panelGrid>

<h:panelGrid columns="3" class="buttonContent" id="button">
    <p:commandButton value="#{msg.save}" id="saveButton" update="growl"
        oncomplete="if ((!args.validationFailed)) dlgEmployeeEdit.hide()"
        actionListener="#{employeeView.saveOrUpdateEmployee}" />
    <p:commandButton value="#{msg.cancel}" immediate="true"
        oncomplete="dlgEmployeeEdit.hide()"/>
    <p:commandButton value="#{msg.delete}" immediate="true"
        oncomplete="dlgEmployeeDelete.show()"
        disabled="#{(employeeView.newEmployee.id == null) ? true : false}" />
</h:panelGrid>

<p:defaultCommand target="saveButton" /></h:form></html> 
```

现在这是页面中使用的两种方法：

```
/**
 * Methode zum Speichern und Updaten eines Mitarbeiters
 */
public void saveOrUpdateEmployee() {
    FacesContext context = FacesContext.getCurrentInstance();
    try {
        logger.debug("save aufgerufen " + this.newEmployee);
        if (this.selectedDepartment.getId() == null) {
            this.newEmployee.setDepartment(null);
        }
        else {
            this.newEmployee.setDepartment(this.departmentHandler.getDepartmentById(this.selectedDepartment.getId()));
        }
        if (this.selectedPosition.getId() == null) {
            this.newEmployee.setPosition(null);
        }
        else {
            this.newEmployee.setPosition(this.positionHandler.getPositionById(this.selectedPosition.getId()));
        }
        this.employeeController.saveOrUpdate(this.newEmployee);
        logger.info("Mitarbeiter erfolgreich gespeichert");
        context.addMessage(null, new FacesMessage("Successful", "Mitarbeiter gespeichert "));
    }
    catch (Exception e) {
        logger.error("Fehler beim Speichern des Mitarbeiters", e);
        context.addMessage(null, new FacesMessage("Fehler beim Speichern des Mitarbeiters", e.getMessage()));
    }
    this.loadPersons();
}

/**
 * Methode zum Abbrechen bei der Neuanlage/Änderung eines Mitarbeiters
 * Felder leeren
 */
public void cancel() {
    logger.debug("cancel()");
    this.newEmployee = new Employee();
    this.selected = new Employee();
    this.selectedDepartment = new Department();
    this.selectedPosition = new Position();
} 
```

如果现在验证失败，对话框将不会隐藏。这是可以的，也是需要的。它根据需要通过 FacesMassages 显示我创建的消息。如果我随后使用“取消”按钮自行关闭对话框，对话框将按预期关闭。`this.newEmployee = new Employee()`如您所见，在 cancel() 方法中，对象 Employee 将被设置为 Employee ( ) 的一个新实例。但是当我在验证失败后打开对话框时，对象“newEmployee”只包含旧值......为什么我的方法cancel（）不起作用？我不明白。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T12:55:03.820

此问题与[JSF 问题 1060](http://java.net/jira/browse/JAVASERVERFACES_SPEC_PUBLIC-1060)相关，并在此问答中详细阐述：[How can I populate a text field using PrimeFaces AJAX after validation errors? 发生验证错误？](https://stackoverflow.com/questions/6642242/how-can-i-populate-a-text-field-using-primefaces-ajax-after-validation-errors-oc/6845800#6845800)

就这一点而言，根据当前的 JSF 规范，这种行为（不幸的是）是正确的，这可以通过以下方式解决：在调用操作阶段，您需要收集`UIInput`包含在 ajax 渲染中但不包含在 ajax 执行中的组件，并且然后在它们上调用[`resetValue()`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIInput.html#resetValue%28%29)方法。这可以在[OmniFaces`ResetInputAjaxActionListener`](http://showcase.omnifaces.org/eventlisteners/ResetInputAjaxActionListener)的帮助下以通用且可重用的方式完成。

# java - 处理一个 Spring bean/接口的多个实现

> ID：11777079
> 
> 赞同：19
> 
> 时间：2012-08-02T12:06:49.747
> 
> 标签：java, spring, interface

假设我需要依赖Spring bean 的**几个实现**。我有一个`AccountService`接口和两个实现：`DefaultAccountServiceImpl`和`SpecializedAccountServiceImpl`.

1.  在 Spring 中这怎么可能（注入一个或另一个实现）？

2.  以下注入将使用哪种实现？

    ```
    @Autowired
    private AccountService accountService; 
    ```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-02T12:08:53.850

广告。1：您可以使用[`@Qualifier`注释](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/beans.html#beans-autowired-annotation-qualifiers)或自动装配使用`@Resource`，而不是`@Autowired`默认为字段名称而不是类型。

广告。2：它会在运行时失败，说两个 bean 正在实现这个接口。如果您的某个 bean 还[带有 注释`@Primary`](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/context/annotation/Primary.html)，则在按类型自动装配时将首选它。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-12-07T05:42:02.380

```
@Autowired
@Qualifier("impl1")
BaseInterface impl1;

@Autowired
@Qualifier("impl2")
BaseInterface impl2;

@Component(value="impl1")
public class Implementation1  implements BaseInterface {

}

@Component(value = "impl2")
public class Implementation2 implements BaseInterface {

}

For full code: https://github.com/rsingla/springautowire/ 
```

# regex - 用于验证基于 Windows 的文件路径（包括 UNC 路径）的正则表达式

> ID：11777081
> 
> 赞同：5
> 
> 时间：2012-08-02T12:06:56.710
> 
> 标签：regex, path

我想验证文件名及其完整路径。我尝试了以下某些正则表达式，但它们都不能正常工作。

```
^(?:[\w]\:|\\)(\\[a-z_\-\s0-9\.]+)+\.(txt|gif|pdf|doc|docx|xls|xlsx)$
and
^(([a-zA-Z]\:)|(\\))(\\{1}|((\\{1})[^\\]([^/:*?<>""|]*))+)$
etc... 
```

我的要求如下所述：假设文件名是“c:\Demo.txt”，那么它应该检查每一个可能性，比如不应该包含双斜杠（`c:\\Demo\\demo.text`），不包括额外的冒号（`c::\Demo\demo.text`）。应该接受 UNC 文件，如 ( `\\staging\servers`) 和其他验证。请帮忙。我真的被困在这里了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T12:11:42.540

你为什么不使用 File 类？永远使用它！

```
File f = null;
string sPathToTest = "C:\Test.txt";
try{
f = new File(sPathToTest );
}catch(Exception e){
   Console.WriteLine(string.Format("The file \"{0}\" is not a valid path, Error : {1}.", sPathToTest , e.Message);
} 
```

MSDN：http: [//msdn.microsoft.com/en-gb/library/system.io.file%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-gb/library/system.io.file%28v=vs.80%29.aspx)

也许您只是在寻找 File.Exists ( [http://msdn.microsoft.com/en-gb/library/system.io.file.exists%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-gb/library/system.io.file.exists%28v=vs.80%29.aspx) )

还要看看 Path 类（[http://msdn.microsoft.com/en-us/library/system.io.path.aspx](http://msdn.microsoft.com/en-us/library/system.io.path.aspx)）

GetAbsolutePath 可能是获得您想要的东西的一种方法！（[http://msdn.microsoft.com/en-us/library/system.io.path.getfullpath.aspx](http://msdn.microsoft.com/en-us/library/system.io.path.getfullpath.aspx)）

```
string sPathToTest = "C:\Test.txt";
string sAbsolutePath = "";
try{
   sAbsolutePath = Path.GetAbsolutePath(sPathToTest);
   if(!string.IsNullOrEmpty(sAbsolutePath)){
     Console.WriteLine("Path valid");
   }else{
     Console.WriteLine("Bad path");
   }
}catch(Exception e){
   Console.WriteLine(string.Format("The file \"{0}\" is not a valid path, Error : {1}.", sPathToTest , e.Message);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T12:45:10.750

如果您只对文件名部分感兴趣（而不是整个路径，因为您通过上传获取文件），那么您可以尝试这样的事情：

```
string uploadedName =  @"XX:\dem<<-***\demo.txt";

int pos = uploadedName.LastIndexOf("\\");
if(pos > -1)
    uploadedName = uploadedName.Substring(pos+1);

var c = Path.GetInvalidFileNameChars();
if(uploadedName.IndexOfAny(c) != -1)
     Console.WriteLine("Invalid name");
else
     Console.WriteLine("Acceptable name"); 
```

这将避免使用异常作为驱动代码逻辑的方法。

# objective-c - iOS设备文档目录中的多个音乐文件

> ID：11777082
> 
> 赞同：1
> 
> 时间：2012-08-02T12:06:59.450
> 
> 标签：objective-c, nsfilemanager, nsdocumentdirectory

我正在 iPhone 中开发应用程序。此应用程序需要将 3 个音乐文件 (.mp3) 存储到 iOS 设备（文件来自网络服务器）。下载功能完美运行（使用 ASIHTTPrRequest）。有时音乐保存无法正常工作，这意味着我在音乐文件进入音乐播放器之前使用了检查。

```
playpath=@"/Users/company/Library/Application Support/iPhone Simulator/5.0/Applications/3D5AD723-F18E-4F44-B3CB-FAEF2EA4963B/Documents/329/25-06-2012/330217/work25-06-2012330217.mp3"

 NSFileManager*fileM=[NSFileManager defaultManager];
if([fileM isReadableFileAtPath:playpath])
    {

     } 
```

每次下载都会改变播放路径（目录路径）。有时下载路径播放音乐，有时不播放，即该路径不能满足上述条件。

我的问题是

1.  出现上述问题的原因是什么？
2.  isReadableFileAtPath 的确切功能是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T13:14:59.337

不要显式写出文件路径，而是让设备为您找到路径。这就是我所做的：

```
- (NSString*) saveFilePath: (NSString *) add
{
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask, YES);
    NSString *path = [paths objectAtIndex:0];
    NSString *filename = [path stringByAppendingPathComponent:add];
    return filename;
} 
```

将此添加到需要保存或加载数据的任何类中。然后，您将能够通过以下方式获取文件的位置：

```
[self saveFilePath:@"Name of file you want to load or write to"] 
```

# java - 在 Applet 上使用 AWT 放大/缩小图形

> ID：11777086
> 
> 赞同：1
> 
> 时间：2012-08-02T12:07:08.447
> 
> 标签：java, swing, awt, awtutilities

我是 java 的新手......正在编写一段小程序代码......因为我仍在学习 OOP 概念和对 java 的理解，需要开发下面提到的功能。我的代码是这样工作的：首先它从 HTML 标记中读取所有参数并存储在全局变量中。然后它向 CGI 发送查询以读取图形数据。然后它将数据转换为绘图并绘制图形。用户可以选择 1-24 小时。基于选择图将通过仅绘制选定数据来绘制。每 30 秒它会向 CGI 发送查询以收集数据。

该代码使用以下库并使用 java 1.5 环境，由于嵌入要求，我无法更改它：

我需要通过实现放大缩小功能来增强它，其中 xy 轴粒度随放大而变化。我担心如何做到这一点？我知道它令人沮丧的问题......但我来这里是为了从 java 专家那里获得建议，以便我可以快速学习和实施这些东西。

```
 import java.awt.*;
import java.awt.image.*;
import java.awt.event.*;
import java.applet.*;
import java.net.*;
import java.io.*;
import java.util.*;
import java.text.*;

/******************************************************************************
*
* Class - Graph
*
*       This is the entry point.
*   This class extends Applet class and implements Runnable.
*
*****************************************************************************/

public class GraphPerf extends Applet implements Runnable,ItemListener,MouseMotionListener

{
//Global variables
int MAX_DATA_X  ;
int    SIZE_X= 480;
int    SIZE_Y= 250;
int    SIZE_Y1= 240;
int MIN_ERROR = -1;
int MAX_LOG10_ERROR_COUNT = 1001;
int MAX_ERROR_COUNT = 101;
int SIZE_Y_EXTENDED_BOTTOM = 20;
int MAX_DISP_PARMS = 16;
int MAX_NUM_INTERVELL_PER_DAY = 96;
int MAX_DISP_PARMS_STD = 7;
int refreshTime;
String  serverAddress,hostAddr;
Color   plotColor1,plotColor8;

float graphData[][];
float graph_data_rf_east,graph_data_rf_west;

int xOffset = 50;
int yOffset = 40;

int Y1_MAX_VALUE = 100;
int Y2_MAX_VALUE = 3;

float RANGE2;

Thread  graphThread;
Image   Buffer;
Graphics plot;

Choice  timeChoice, modeChoice, seloptChoice;
int     duration=1, viewMode=1, line_type = 0,viewOpt = 1;

Label valueLabel1, valueLabel2,valueLabel3,valueLabel4,valueLabel5;
boolean GraphBottomExtendFlag=true;

/******************************************************************************
*
* method - init
*
*       This is the method called first after applet loaded in to browser.
*   This function reads configurable parameters from HTML tag and updates
*   global variables.
*****************************************************************************/

public void init()
{

MAX_DATA_X = 672;//Integer.parseInt(getParameter("max_data_x"));
//refreshTime       = 30;//Integer.parseInt(getParameter("refresh_sec"));
/*URL url = getDocumentBase();
String host = url.getHost();
try
{
    InetAddress addr =  InetAddress.getByName(host);
    hostAddr=addr.getHostAddress();
}catch (UnknownHostException ex) {
    ex.printStackTrace();
}
 */
//serverAddress     = new String ( getParameter("access_str")+ hostAddr + getParameter("data_server"));
graphData       = new float[MAX_DISP_PARMS][MAX_DATA_X+1];
/*initialize the array with -1 not with 0(0 also valid for graph data)  */
int i =0,j = 0;
for( j=0; j<MAX_DISP_PARMS; j++)
{
    for( i=0; i<MAX_DATA_X+1; i++)
    {
        graphData[j][i] = -1;
    }
}
graph_data_rf_east = -1;
graph_data_rf_west = -1;

plotColor1      = Color.orange;
plotColor2      = Color.black;
plotColor8      = Color.red;
plotColor9      = Color.green;

setBackground(Color.white);
setLayout(null);

timeChoice   = new Choice();
timeChoice.add("1");
timeChoice.add("2");
timeChoice.add("3");
timeChoice.add("4");
timeChoice.add("5");
timeChoice.add("6");
timeChoice.add("7");
add(timeChoice);

timeChoice.setBounds(190,340,40,23);
timeChoice.addItemListener(this);

Label timeLabel1 = new Label("View graph for last");
Label timeLabel2 = new Label("day(s)");
add(timeLabel1);
timeLabel1.setBounds(xOffset+30,340,160,23);

add(timeLabel2);
timeLabel2.setBounds(240,340,50,23);

valueLabel1 = new Label();
add(valueLabel1);
valueLabel1.setBounds(300,340,50,23);
valueLabel2 = new Label();
add(valueLabel2);
valueLabel2.setBounds(370,340,70,23);
valueLabel3 = new Label();
add(valueLabel3);
valueLabel3.setBounds(440,340,70,23);
valueLabel4 = new Label();
add(valueLabel4);
valueLabel4.setBounds(500,340,70,23);
valueLabel5 = new Label();
add(valueLabel5);
valueLabel5.setBounds(370,370,80,25);
modeChoice = new Choice();
modeChoice.add("East");
modeChoice.add("West");
/* Display this only for Protected and East-West Mode */
if(2/*Integer.parseInt(getParameter("mode"))*/ == 2)
{
    add(modeChoice);
}
else
{
    viewOpt = 1;
}
modeChoice.setBounds(xOffset+SIZE_X-55, 0, 60, 25);
modeChoice.addItemListener(this);
addMouseMotionListener(this);
}

public void start()
{
graphThread = new Thread(this);
graphThread.start();
}

public void stop()
{
graphThread = null;
}

/******************************************************************************
*
*   This method will be called after starting the thread. This is a
*   infinite loop which will call query method for every 30 sec to read data
*   from CGI. Then it plots graph by calling plotGraph method
*   the thread.
*****************************************************************************/

public void run()
{
/*while (false)
{
    try
    {//getData(serverAddress);
        int sizeY = SIZE_Y;
        if(GraphBottomExtendFlag)
        {
            sizeY += SIZE_Y_EXTENDED_BOTTOM;
        }
        repaint(xOffset+1,yOffset+1,SIZE_X-1,sizeY-1);
        //graphThread.sleep(refreshTime*1000);
    }catch (Exception e) { System.out.println(e); }
}*/
}

/******************************************************************************
*
* method - paint
*
*       This method displays the graph plotted by plotGraph method
*   in the screen. Then it draws axis for the graph
*
*****************************************************************************/

public void paint(Graphics g1)
{
int sizeY = SIZE_Y;
/*If  Graph Bottom is to be Etended
 *soo that zero is displayed properly
 */
if(GraphBottomExtendFlag)
{
    sizeY += SIZE_Y_EXTENDED_BOTTOM;
}

if( duration <= 5 )
{
    Buffer = createImage(SIZE_X, sizeY);
    plot = Buffer.getGraphics();
    plotGraph(plot);
    g1.drawImage (Buffer,xOffset,yOffset,this);
}
else
{
    Buffer = createImage(MAX_DATA_X*duration/7,sizeY);
    plot = Buffer.getGraphics();
    plotGraph(plot);
    g1.drawImage (Buffer,xOffset,yOffset,SIZE_X,sizeY,this);
}

g1.setColor(Color.black);

g1.drawRect(70,150,270,80);
/*Dram Graph boarder */
g1.drawRect(xOffset,yOffset,SIZE_X,sizeY);
g1.drawRect(xOffset-1,yOffset-1,SIZE_X+2,sizeY+2);

      /*Plot X axis*/
int max_x_marks = 8;
int temp = 1,cnt_graph = 0;
int float_temp,float_temp2;

/*max 8 plots on x axis*/
for(int x=max_x_marks; x>0; x--)
{

    float_temp = (int)((MAX_NUM_INTERVELL_PER_DAY*duration)/max_x_marks)*((max_x_marks+1)-x);
    float_temp2 = SIZE_X-(60*cnt_graph);

    g1.drawString(String.valueOf(float_temp),(float_temp2-20) ,SIZE_Y+yOffset+35);
    cnt_graph++;
}

/*Plot Y1 AXIS*/
temp = Y1_MAX_VALUE;
for(int x = 0; x <= SIZE_Y; x+= 25)
{
    g1.drawString(String.valueOf(temp), 25, x + yOffset+10);
    temp -= (Y1_MAX_VALUE - 0)/10;
}
temp = 1000;
 /*Plot Y2 AXIS*/
int index_log = 1;
for(int x = 0; x <= SIZE_Y1; x+= 80)
{
    if(x== 240)
    index_log--;
    if(temp>=1)
    {
        g1.drawString(String.valueOf(temp), 550, x+yOffset+8-index_log);
        g1.drawLine(530,x+yOffset+5-index_log, 540, x+yOffset+5-index_log);
    }
    temp = temp/10;
}
Font thisFont = new Font("Times New Roman", Font.BOLD, 14);
g1.setFont(thisFont);
g1.drawString("Y2", 550, 160);
g1.drawString("Y1",5, 160);

}
/******************************************************************************
 *
 * method - plotGraph
 *
 *      Depending on the mode, "East", "West" or "Combined", it plots
 *  single or two graphs in the same applet.
 *
 *  Inputs :
 *          g - Graphics object
 *****************************************************************************/

public void plotGraph(Graphics g)
{
g.setColor(new Color(255,255,220));

/*If  Error-Sec-Count Graph
 *Then extend the lower portion
 *soo that zero is displayed properly
 */
if(GraphBottomExtendFlag)
{
    g.fillRect(0,0,MAX_DATA_X,SIZE_Y + SIZE_Y_EXTENDED_BOTTOM);
}
else
{
    g.fillRect(0,0,MAX_DATA_X,SIZE_Y);
}

switch(viewMode)
{
    case 1 :
        plot1(g);
        plot_timeelapsed_east(g);
        break;

    case 2 :
        plot8(g);
        plot_timeelapsed_west(g);
        break;
}
}
/******************************************************************************
 *
 * method - plot1
 *
 *      This method uses graphData[0][] global variable and plots series of lines
 *  in the applet
 *
 *  Inputs :
 *          g - Graphics object
 *****************************************************************************/

 void plot1(Graphics g)
 {
int end = MAX_DATA_X;
int localPlotBuffer[];

localPlotBuffer = new int[2];

g.setColor(plotColor1);
if(duration > 5)
{
    for(int x=(duration*MAX_NUM_INTERVELL_PER_DAY); x > 0 ; x--)
    {
        /*if data is valid data then plot else ignore*/
        if((graphData[0][end]>MIN_ERROR)&&(graphData[0][end-1]<MAX_LOG10_ERROR_COUNT)&&(graphData[0][end-1]>MIN_ERROR)&&(graphData[0][end]<MAX_LOG10_ERROR_COUNT))
        {
            /*if data present is 0, log10(0) is not define so then plot this graph in normal scale */
            if(graphData[0][end] == 0)
            {
                localPlotBuffer[0] = (int)((float)(SIZE_Y )*(float)(1 - (float)graphData[0][end]/(float)Y1_MAX_VALUE)) ;
            }
            else
            {
                localPlotBuffer[0] = (int)((float)(SIZE_Y1 )*(float)(1 - (float)Math.log10(graphData[0][end])/(float)Y2_MAX_VALUE));
            }
            /*if data present is 0, log10(0) is not define so then plot this graph in normal scale */
            if(graphData[0][end-1] == 0)
            {
                localPlotBuffer[1] = (int)((float)(SIZE_Y )*(float)(1 - (float)graphData[0][end-1]/(float)Y1_MAX_VALUE)) ;
            }
            else
            {
                localPlotBuffer[1] = (int)((float)(SIZE_Y1 )*(float)(1 - (float)Math.log10(graphData[0][end-1])/(float)Y2_MAX_VALUE));
            }
            g.drawLine(x-1,(localPlotBuffer[0]+5), x-2,(localPlotBuffer[1]+5));
            g.drawLine(x,(localPlotBuffer[0]+5), x-1,(localPlotBuffer[1]+5));
        }
        end--;
    }
}
else
{
    float temp = SIZE_X;
    for(int x=(duration*MAX_NUM_INTERVELL_PER_DAY) ; x > 0 ; x--)
    {
        float LocalTemp1 = temp;
        float LocalTemp2 = (int)(temp-(double)5/(double)duration);
        /*Normalise the pixcel positions */
        /*Normalise the pixcel positions */
        if(duration == 1)
        {
            if(LocalTemp1>(SIZE_X-3))
            LocalTemp1 = SIZE_X;
            if(LocalTemp2>(SIZE_X-3))
            LocalTemp2 = SIZE_X;
        }
        /*Normalise the pixcel positions */
        else if(duration == 2)
        {
            if(LocalTemp1>(SIZE_X-2))
            LocalTemp1 = SIZE_X;
            if(LocalTemp2>(SIZE_X-2))
            LocalTemp2 = SIZE_X;
        }
        /*Normalise the pixcel positions */
        else if(duration == 3)
        {
            if(LocalTemp1>(SIZE_X-1))
            LocalTemp1 = SIZE_X;
            if(LocalTemp2>(SIZE_X-1))
            LocalTemp2 = SIZE_X;
        }
        /*if data is valid data then plot else ignore*/
        if((graphData[0][end]>MIN_ERROR)&&(graphData[0][end-1]<MAX_LOG10_ERROR_COUNT)&&(graphData[0][end-1]>MIN_ERROR)&&(graphData[0][end]<MAX_LOG10_ERROR_COUNT))
        {
            /*if data present is 0, log10(0) is not define so then plot this graph in normal scale */
            if(graphData[0][end] == 0)
            {
                localPlotBuffer[0] = (int)((float)(SIZE_Y )*(float)(1 - (float)graphData[0][end]/(float)Y1_MAX_VALUE)) ;
            }
            else
            {
                localPlotBuffer[0] = (int)((float)(SIZE_Y1 )*(float)(1 - (float)Math.log10(graphData[0][end])/(float)Y2_MAX_VALUE));
            }
            /*if data present is 0, log10(0) is not define so then plot this graph in normal scale */
            if(graphData[0][end-1] == 0)
            {
                localPlotBuffer[1] = (int)((float)(SIZE_Y )*(float)(1 - (float)graphData[0][end-1]/(float)Y1_MAX_VALUE)) ;
            }
            else
            {
                localPlotBuffer[1] = (int)((float)(SIZE_Y1 )*(float)(1 - (float)Math.log10(graphData[0][end-1])/(float)Y2_MAX_VALUE));
            }
            g.drawLine((int)LocalTemp1,(localPlotBuffer[0]+5), (int)LocalTemp2,(localPlotBuffer[1]+5));
        }
        temp-=(double)5/(double)duration;
        end--;
    }
}
}

/******************************************************************************
*
* method - plot8
*
*       This method uses graphData[7][] global variable and plots series of lines
*   in the applet
*
*   Inputs :
*           g - Graphics object
*****************************************************************************/

void plot8(Graphics g)
{
int end = MAX_DATA_X;
int localPlotBuffer[];
localPlotBuffer = new int[2];

g.setColor(plotColor1);

if(duration > 5)
{
    for(int x=(duration*MAX_NUM_INTERVELL_PER_DAY); x > 0 ;x-- )
    {
        /*if data is valid data then plot else ignore*/
        if((graphData[8][end]>MIN_ERROR)&&(graphData[8][end-1]<MAX_LOG10_ERROR_COUNT)&&(graphData[8][end-1]>MIN_ERROR)&&(graphData[8][end]<MAX_LOG10_ERROR_COUNT))
        {
            /*if data present is 0, log10(0) is not define so then plot this graph in normal scale */
            if(graphData[8][end] == 0)
            {
                localPlotBuffer[0] = (int)((float)(SIZE_Y )*(float)(1 - (float)graphData[8][end]/(float)Y1_MAX_VALUE)) ;
            }
            else
            {
                localPlotBuffer[0] = (int)((float)(SIZE_Y1 )*(float)(1 - (float)Math.log10(graphData[8][end])/(float)Y2_MAX_VALUE));
            }
            /*if data present is 0, log10(0) is not define so then plot this graph in normal scale */
            if(graphData[8][end-1]== 0)
            {
                localPlotBuffer[1] = (int)((float)(SIZE_Y )*(float)(1 - (float)graphData[8][end-1]/(float)Y1_MAX_VALUE)) ;
            }
            else
            {
                localPlotBuffer[1] = (int)((float)(SIZE_Y1 )*(float)(1 - (float)Math.log10(graphData[8][end-1])/(float)Y2_MAX_VALUE));
            }
            g.drawLine(x-1,(localPlotBuffer[0]+5), x-2,(localPlotBuffer[1]+5));
            g.drawLine(x,(localPlotBuffer[0]+5), x-1,(localPlotBuffer[1]+5));
        }
        end--;
    }
}
else
{
    float temp = SIZE_X;
    for(int x=(duration*MAX_NUM_INTERVELL_PER_DAY) ; x > 0 ; x--)
    {
        float LocalTemp1 = temp;
        float LocalTemp2 = (int)(temp-(double)5/(double)duration);
        /*Normalise the pixcel positions */
        if(duration == 1)
        {
            if(LocalTemp1>(SIZE_X-3))
            LocalTemp1 = SIZE_X;
            if(LocalTemp2>(SIZE_X-3))
            LocalTemp2 = SIZE_X;
        }
        /*Normalise the pixcel positions */
        else if(duration == 2)
        {
            if(LocalTemp1>(SIZE_X-2))
            LocalTemp1 = SIZE_X;
            if(LocalTemp2>(SIZE_X-2))
            LocalTemp2 = SIZE_X;
        }
        /*Normalise the pixcel positions */
        else if(duration == 3)
        {
            if(LocalTemp1>(SIZE_X-1))
            LocalTemp1 = SIZE_X;
            if(LocalTemp2>(SIZE_X-1))
            LocalTemp2 = SIZE_X;
        }
        /*if data is valid data then plot else ignore*/
        if((graphData[8][end]>MIN_ERROR)&&(graphData[8][end-1]<MAX_LOG10_ERROR_COUNT)&&(graphData[8][end-1]>MIN_ERROR)&&(graphData[8][end]<MAX_LOG10_ERROR_COUNT))
        {
            /*if data present is 0, log10(0) is not define so then plot this graph in normal scale */
            if(graphData[8][end] == 0)
            {
                localPlotBuffer[0] = (int)((float)(SIZE_Y )*(float)(1 - (float)graphData[8][end]/(float)Y1_MAX_VALUE)) ;
            }
            else
            {
                localPlotBuffer[0] = (int)((float)(SIZE_Y1 )*(float)(1 - (float)Math.log10(graphData[8][end])/(float)Y2_MAX_VALUE));
            }
            /*if data present is 0, log10(0) is not define so then plot this graph in normal scale */
            if(graphData[8][end-1]== 0)
            {
                localPlotBuffer[1] = (int)((float)(SIZE_Y )*(float)(1 - (float)graphData[8][end-1]/(float)Y1_MAX_VALUE)) ;
            }
            else
            {
                localPlotBuffer[1] = (int)((float)(SIZE_Y1 )*(float)(1 - (float)Math.log10(graphData[8][end-1])/(float)Y2_MAX_VALUE));
            }
            g.drawLine((int)LocalTemp1,(localPlotBuffer[0]+5), (int)LocalTemp2,(localPlotBuffer[1]+5));
        }
        temp-=(double)5/(double)duration;
        end--;
    }
}
}

/******************************************************************************
 *
 * method - plot_timeelapsed_east
 *
 *      This method uses graph_data_rf_east global variable and plots series of lines
 *  in the applet
*****************************************************************************/

void plot_timeelapsed_east(Graphics g)
{
int end = MAX_DATA_X;
int localPlotBuffer[];
int x= 0;

localPlotBuffer = new int[2];
x= (duration*MAX_NUM_INTERVELL_PER_DAY);
g.setColor(plotColor9);
/*if data is valid data then plot else ignore*/
if((graph_data_rf_east>0)&&(graph_data_rf_east<MAX_LOG10_ERROR_COUNT))
{
    localPlotBuffer[0] = (int)((float)(SIZE_Y1 )*(float)(1 - (float)Math.log10(graph_data_rf_east)/(float)Y2_MAX_VALUE));
    if(duration>5)
    g.drawLine(x-1,SIZE_Y+5, x-2,(localPlotBuffer[0]+5));
    else
    g.drawLine(SIZE_X,SIZE_Y+5, 474+duration,(localPlotBuffer[0]+5));
}
  }/*End for plot_timeelapsed_east() */

 /******************************************************************************
 *
 * method - plot_timeelapsed_west
 *
 *      This method uses graph_data_rf_east global variable and plots series of lines
 *  in the applet
 *****************************************************************************/

void plot_timeelapsed_west(Graphics g)
{
int end = MAX_DATA_X;
int localPlotBuffer[];
int x= 0;

localPlotBuffer = new int[2];
x= (duration*MAX_NUM_INTERVELL_PER_DAY);

g.setColor(plotColor9);
/*if data is valid data then plot else ignore*/
if((graph_data_rf_east>MIN_ERROR)&&(graph_data_rf_east<MAX_LOG10_ERROR_COUNT))
{
    localPlotBuffer[0] = (int)((float)(SIZE_Y1 )*(float)(1 - (float)Math.log10(graph_data_rf_west)/(float)Y2_MAX_VALUE));
    if(duration>5)
    g.drawLine(x-1,SIZE_Y+5, x-2,(localPlotBuffer[0]+5));
    else
    g.drawLine(SIZE_X,SIZE_Y+5, 474+duration,(localPlotBuffer[0]+5));
}
}

/******************************************************************************
*
* method - getData
*
*       This method sends query to CGI to collect data. Then it converts the
*   data for applet area then updates global variable.
*
*   Inputs :
*           serverAddress - server CGI path
*****************************************************************************/

public void getData(String serverAddress)
{

URL addr;
BufferedReader in;
String inputLine;
int count = 0;
int i=0,j = 0;
try
{
    addr = new URL(serverAddress);
    URLConnection connection = addr.openConnection();
    in = new BufferedReader(new InputStreamReader(addr.openStream()));
    /*Read data for first link */
    for( j=0; j<MAX_DISP_PARMS_STD; j++)
    {
        for( i=0; i<MAX_DATA_X+1; i++)
        {
            inputLine = in.readLine();
            graphData[j][i] = Integer.parseInt(inputLine);
        }
    }
    for( i=0; i<MAX_DATA_X; i++)
    {
        inputLine = in.readLine();
        graphData[7][i] = Integer.parseInt(inputLine);
        if(graphData[7][i] == 1)
        graphData[7][i] = 10;
    }
    inputLine = in.readLine();
    graph_data_rf_east = Integer.parseInt(inputLine);
    /*Reading data for second link */
    if(Integer.parseInt(getParameter("mode")) == 2)
    {
        for( j=8; j<15; j++)
        {
            for( i=0; i<MAX_DATA_X+1; i++)
            {
                inputLine = in.readLine();
                graphData[j][i] = Integer.parseInt(inputLine);
            }

        }
        for( i=0; i<MAX_DATA_X; i++)
        {
            inputLine = in.readLine();
            graphData[15][i] = Integer.parseInt(inputLine);
            if(graphData[15][i] == 1)
            graphData[15][i] = 10;
        }
        inputLine = in.readLine();
        graph_data_rf_west = Integer.parseInt(inputLine);
    }
    in.close();
}catch (Exception e) { System.out.println("Server Data Read Error:"+e); }
}

/******************************************************************************
 *
 * method - itemStateChanged
 *
 *      This method will be called whenever event occured on this choice.
 *  it read the current status and changes scale accordingly.
 * *****************************************************************************/

public void itemStateChanged(ItemEvent evt)
{
if( evt.getSource() == timeChoice )
    duration = Integer.parseInt(timeChoice.getSelectedItem());
else
    viewMode = modeChoice.getSelectedIndex()+1;
repaint();
}
/******************************************************************************
 *
 * method - mouseMoved
 *
 *      This method will be called whenever mouse cursor is moved over the
 *  applet. Depending on the cursor position, it will display Actual
 *  X and Y values of the graph.
 *****************************************************************************/

public void mouseMoved(MouseEvent evt)
{
    int x = evt.getX()-xOffset;
    int y = evt.getY()-yOffset-5;

    int a = evt.getX();
    int b = evt.getY();

    int duration = Integer.parseInt(timeChoice.getSelectedItem());
    if( (x>=0) && (x<=SIZE_X) && (y>=0) && (y<=SIZE_Y) )
    {
        valueLabel1.setText("X ");
        valueLabel2.setText("Y1 ");
        valueLabel3.setText("Y2 ");
        try
        {
            int x_max_value = ((SIZE_X*duration)/5);
            int x1  = (int)((float)((float)((float)(SIZE_X*duration))/5)  * ((float)((float)(SIZE_X - x))/((float)SIZE_X)));
            /*For Durations less than 16 scale starts with 1*/
            int y1  = (int)((float)Y1_MAX_VALUE  * (((float)SIZE_Y - (float)y)/((float)SIZE_Y)));
            int y2 = (int) Math.pow(10,((float)(3 * ((float)(1 - (float)y/((float)SIZE_Y1))))));
            valueLabel1.setText("X="+x1);
            valueLabel2.setText("X pix="+a);
            valueLabel3.setText("Y="+y1);
            valueLabel4.setText("Y pix="+b);
            valueLabel5.setText("Y2="+y2);
        }
        catch(Exception e) {System.out.println("Mouse Moved Error" + e);}
    }
    else
    {
        valueLabel1.setText(" ");
        valueLabel2.setText(" ");
        valueLabel3.setText(" ");

    }
}
public void mouseDragged(MouseEvent evt) { }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T12:43:13.350

有很多方法可以做到这一点。这里有两个：

1.  您可以简单地缩放值：将每个坐标乘以缩放因子。

2.  使用 Java2D 和`AffineTransform`：

    ```
    AffineTransform transformer = new AffineTransform();
    transformer.scale(zoom, zoom);
    Graphics2D g2d = (Graphics2D)g;
    g2d.setTransform(transformer);
    // draw to g2d. 
    ```

**[编辑]**如果您想自己做所有事情，请参阅此页面以刷新基本线性代数：[2D Transformations](http://www.willamette.edu/~gorr/classes/GeneralGraphics/Transforms/transforms2d.htm)

不要介意顶部的 3D 示例；页面的其余部分是关于 2D 的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-05T05:24:02.450

我为我的目标平台使用了 JCC 套件，它的库不到 100kb。您需要了解图书馆，然后您可以玩而不必担心大小。:)

在嵌入式系统中使用的好库是否始终是问题。它具有将坐标转换为屏幕坐标的内置功能，反之亦然。

# java - Android MediaPlayer 安装时需要文件

> ID：11777089
> 
> 赞同：1
> 
> 时间：2012-08-02T12:07:15.363
> 
> 标签：java, android, media-player

我正在使用 android 应用程序动态生成 midi 文件（在缓存目录中）。

生成后，我在同一个应用程序中使用 MediaPlayer 播放文件。

第一次运行应用程序时，它已经需要文件在缓存目录中（应用程序崩溃）。如果我先使用文件管理器将虚拟文件放在那里，它可以在模拟器上运行。我该如何规避这个？

我需要该应用程序首次在平板电脑上运行，而不需要文件。

我现在正在使用这些命令：

```
try {

            filePath = getCacheDir() + "/optimuse" + song + ".mid";
            file = new File(filePath);

            inputStream = new FileInputStream(file);
            if (inputStream.getFD().valid()) {
                System.out.println("Valid!");
            }
        } catch (Exception e1) {
            e1.printStackTrace();
            System.exit(-1);
        }

        try {
            mediaPlayer = new MediaPlayer();
            mediaPlayer.setDataSource(inputStream.getFD());
            inputStream.close();
        } catch (Exception e1) {
            e1.printStackTrace();
            System.exit(-1);
        }

        try {
            mediaPlayer.prepare();
        } catch (IllegalStateException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        } 
```

有没有办法解决？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T12:13:17.433

也许在使用之前检查文件是否存在？您可以使用该方法实现此目的[`File#exists()`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#exists%28%29)。

首先，您使用该[`Context#getFileStreamPath(String)`](http://developer.android.com/reference/android/content/Context.html#getFileStreamPath%28java.lang.String%29)方法 - 其中 String 是您尝试访问的文件的文件名。然后你可以调用`File#exists()`返回的对象。

# c# - 识别 ItemTemplate 中的对象和未触发的事件

> ID：11777091
> 
> 赞同：1
> 
> 时间：2012-08-02T12:07:20.223
> 
> 标签：c#, asp.net, .net, telerik, rad-controls

我正在使用带有 ItemTemplate 的 RadListView 控件，其中包含一个按钮，如下所示：

```
<ItemTemplate>
    <tr class="rlvI">
        //more TD elements here
        <td>
            <telerik:RadButton ID="ENABLEDToggle" runat="server" Width="75" ButtonType="StandardButton" AutoPostBack="true"
            ToggleType="CustomToggle" Checked='<%# Enabled_Converter(Eval("ENABLED")) %>' OnCheckedChanged="TaskStateChange_Clicked">
                <ToggleStates>
                    <telerik:RadButtonToggleState Text="Enabled" />
                    <telerik:RadButtonToggleState Text="Disabled" />
                </ToggleStates>
            </telerik:RadButton>
        </td>
    </tr>
</ItemTemplate> 
```

我的第一个问题是为什么当我按下按钮时，我没有进入我的 TaskStateChange_Clicked 事件处理程序？就好像该事件从未被触发。

其次，每当单击按钮时，如何获取与该行关联的对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T12:26:11.667

至于第一个问题，请检查您如何绑定`RadListView`. 如果控件在每次回发时都与数据绑定，则通常会出现此类问题。所以如果你有类似的东西

```
void Page_Load(object sender, EventArgs e)
{
    ...
    RadListView1.DataSource = dataSource;
    RadListView1.DataBind();
    ...
} 
```

将其替换为

```
void Page_Load(object sender, EventArgs e)
{
    ...
    if (!this.IsPostBack)
    {
        RadListView1.DataSource = dataSource;
        RadListView1.DataBind();
    }
    ...
} 
```

**从评论更新。**另一个原因可能是您的按钮类型是`StandardButton`而[规范](http://www.telerik.com/help/aspnet-ajax/button-server-side-properties-events.html)暗示事件`CheckedChanged`仅在按钮类型为时触发`ToggleButton`。

至于第二个问题，考虑使用 RadListView 的`ItemCommand`事件。这样你就可以利用它的`CommandArgument`属性`RadButton`并传递你想要的任何信息，比如对象的 ID。

# git - Alternative to git cherry-pick when renamed files are common

> ID：11777101
> 
> 赞同：2
> 
> 时间：2012-08-02T12:08:17.680
> 
> 标签：git, git-rebase, cherry-pick, renaming, git-cherry-pick

I'd like to cherry-pick single commits from on branch to another. I expect file renames to be quite common but still want to be able to apply changes without human intervention.

Since the built-in cherry-pick command doesn't seam to detect renames (at least in my test cases), especially when combined with modification to the renamed file.

I tried a bit and finally came up with a solution involving two rebase operations.

Let's assume I have a branch named **target** pointing at the commit I want to apply the cherry-pick to. The commit I want to cherry-pick is pointed to by a branch named **source**.

I then execute the following commands:

1.  create branch sourceTemp pointing at the same commit as source (since I want to retain the branch source )
2.  `git rebase --strategy="recursive" --strategy-option="rename-threshold=30" target sourceTemp` (maybe use another threshold; the test file was quite small and the changes therefore relatively large)
3.  `git rebase --onto target sourceTemp~ sourceTemp`

This applies only the changes introduced by the last commit in branch **source** to **target**.

I also put my test on github:

[https://github.com/fraschfn/cherry-pick](https://github.com/fraschfn/cherry-pick)

What I like to know is, if this approach is feasible or if it only worked in my simple test setting!

**Update**: Alternative method

I rebase the patch to the merge base of **source** and **target**:

start situation

```
 A - B     <--- target
   /
  M 
   \
    C - D     <--- source 
```

I want to cherry-pick D onto B.

1.  rebase D onto M after creating a new branch **patch**

    ```
     A - B     <--- target
     /
    M - D'      <--- patch
     \
      C - D     <--- source 
    ```

2.  merge C and D' to obtain a replacement for source

    merge B and D' to obtain the patched version of target

    ```
     A - B    <--- target
      /     \
     /      E   <--- patched target
    /      / 
    M -  D'     <--- patch
     \    \
      \   F     <--- new source (same snapshot as source different history)
       \ /
        C - D   <--- source (will be discarded) 
    ```

The advantage is that E and F can now be merged without a problem. Alternative way: Include the patch as early as possible in the hierarchy thus not creating D but directly D' and saving yourself the rebase.

The advantage above the previous version is that you can merge the two branches "new source" and "patched target" and it will work (if the merge of source and target would work of course) and not introduce the same changeset twice since git knows due to the merge operation which introduced the changeset into both branches.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-02T12:47:42.543

您的`rename-threshold`方法对于您正在尝试做的事情是可行的。分支之间的书面、定期挑选绝不是可持续的工作流程，除非您的分支是永远不会合并的分叉项目。如果是这样的话，那就去吧，祝你好运。如果您期望将分支合并回一个有凝聚力的整体，我建议您更改代码流动方式。这里有一些很好的资源：

1.  [git 项目文档。](http://www.kernel.org/pub/software/scm/git/docs/gitworkflows.html)

2.  [gitflow 模型，在这些部分非常流行。](http://nvie.com/posts/a-successful-git-branching-model/)

3.  [ProGit 关于分布式工作流的章节。](http://git-scm.com/book/en/Distributed-Git-Distributed-Workflows)

分支之间的定期挑选会生成具有不同 SHA1 哈希的相同更改集。在足够长的时间段内进行足够的扩展，跟踪代码变得困难，几乎不可能理解你的历史，合并分支让你感觉就像你在[MC Escher 的画中昏迷并醒来。](http://upload.wikimedia.org/wikipedia/en/thumb/a/a3/Escher%27s_Relativity.jpg/250px-Escher%27s_Relativity.jpg)这不是一个好时机。

根据您对此答案的评论，您的用例听起来像是一个可行的选择。在这种情况下，我建议将补丁集应用于重命名文件的劳动强度稍低的方法：

```
git checkout branchB
git diff <commit>~1 <commit> |
    sed 's:<path_on_branchA>:<path_on_branchB>:g' |
    git apply 
```

你想从哪里`<commit>`移到的`branchA`提交`branchB`。使用这种方法，您不会获得提交元数据，即它只会应用更改，不会提交。但是您可以轻松地操纵`git format-patch`with`sed`和的输出`git am`。只取决于你想做什么。

这将为您省去生成临时分支、选择正确的重命名阈值和变基的麻烦。它永远不会像直线上升那样干净`git merge`，但我以前用过它，一旦你掌握了它就很容易了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-28T13:02:17.310

`git rebase`使用相同的重命名检测逻辑`git merge`，甚至使用相同的选项`--strategy-option="rename-threshold=30"`来控制它。

这里发生的事情是，您首先将整个源分支重新定位到您的目标分支（as `sourceTemp`），然后基本上将其上的最后一次提交选择到`target`. 顺便说一句，这和on`git rebase -onto target src~ src`是一样的：将一个 commit at应用到.`git cherry-pick src``target``src``target`

与直接挑选樱桃相比，您的工作流程的变化在于您逐渐处理源分支上的提交，这可能比一步完成更容易捕获重命名。如果您直接挑选，则必须通过查看和之间的区别来识别重命名`target`，`src~`这可能是很长的路要走；当第一次重新定位整个源分支时，重命名是分小步处理的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-17T13:15:53.340

有时，文件分歧太大，所以没有一个重命名算法可以准确地确定重命名，所以我使用“锤子方法”。

```
git checkout target

# get list of files modified in source branch
git diff source^ source --name-only

# ... (A) rename corresponding target files to match source's ones (possibly write script to automate this)

git add -A
git commit -m "Temporarily rename files for cherry-pick purposes"

# There is no need for rename detection anymore
git cherry-pick source

# ... resolve all conflicts and finish the cherry-pick

# ... rename files back, reverting (A) step. Note that you cannot use `git revert` here

git add -A
git commit -m "Rename files back"

# Get rid of the artificial commits made but preserve file changes
git reset --soft HEAD~3

# Make a commit to store cherry-picked files
git commit -m "Cherry-pick source branch" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-17T10:35:49.623

```
git checkout target

# Make an artificial merge to link target and source's parent
git merge source^ --strategy=ours

# Equivalent to cherry-pick but includes rename detection
git merge source --no-ff

# ... fix all merge conflicts and finish the merge

# Get rid of those artificial merges preserving file changes
git reset --soft HEAD~2

# Make a commit to store cherry-picked files
git commit -m "Cherry-pick source branch" 
```

# java - Set parameters dynamically to prepared Statement in JDBC

> ID：11777103
> 
> 赞同：8
> 
> 时间：2012-08-02T12:08:32.670
> 
> 标签：java, jdbc

I have a common class for all DAO's where we will read queries and execute them as below. I will send parameters from DAO to this class.

```
Connection connection = Queries.getConnection();
String query = Queries.getQuery(queryName);//Queries i will get from xml
PreparedStatement preparedStatement =  connection.prepareStatement(query); 
```

what is the best way to set parameters dynamically to prepared Statement in JDBC. I believe, we don't have named parameters concept in JDBC as we have in spring JDBC. We are only simple JDBC in our project.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-02T12:15:11.680

写这样的东西：

```
public static int mapParams(PreparedStatement ps, Object... args) throws SQLException {
    int i = 1;
    for (Object arg : args) {         
         if (arg instanceof Date) {
        ps.setTimestamp(i++, new Timestamp(((Date) arg).getTime()));
    } else if (arg instanceof Integer) {
        ps.setInt(i++, (Integer) arg);
    } else if (arg instanceof Long) {
        ps.setLong(i++, (Long) arg);
    } else if (arg instanceof Double) {
        ps.setDouble(i++, (Double) arg);
    } else if (arg instanceof Float) {
        ps.setFloat(i++, (Float) arg);
    } else {
        ps.setString(i++, (String) arg);
    }
   }
  }
} 
```

并在查询中使用“？” 您需要在哪里设置参数。

我知道这是老派代码，但只是举一些简约的例子......

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-04-26T19:16:19.297

好方法是使用地图

```
Map<String, Object> params = new HashMap<>();
params.put("id",0);
params.put("name","test");
//more params here...

String sql = "SELECT * FROM test";

boolean first = true;

for (String paramName : params.keySet()) {
    Object paramValue = params.get(paramName);
    if (paramValue != null) {
        if (first){
            sql += " where " + paramName + "=?";
            first = false;
        } else {
            sql += " and " + paramName + "=?";
        }
    }
}

Connection connection = DataSource.getInstance().getConnection();

ps = connection.prepareStatement(sql);

int paramNumber = 1;
for (String paramName : params.keySet()) {
    Object paramValue = params.get(paramName);
    if (paramValue != null) {
        if (param instanceof Date) {
            ps.setDate(paramNumber, (Date) param);
        } else if (param instanceof Integer) {
            ps.setInt(paramNumber, (Integer) param);
        //more types here...
        } else {
            ps.setString(paramNumber, param.toString());
        }
        paramNumber ++;
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-02T12:18:20.083

看看这个页面[示例](http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html)。您的查询应包含 ? 在您要设置值的位置。

```
String query = "update COFFEES set SALES = ? where COF_NAME = ?"; 
```

您可以轻松设置这样的值

```
preparedStatement.setInt(1, 100);
preparedStatement.setString(2, "French_Roast"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-02T12:23:49.957

也许这对您 [来说很有趣 PreparedStatement 的命名参数](http://www.javaworld.com/javaworld/jw-04-2007/jw-04-jdbc.html)

# php - data no inserting into mysql database due to difference in 'quotes'

> ID：11777104
> 
> 赞同：4
> 
> 时间：2012-08-02T12:08:45.463
> 
> 标签：php, mysql

I am having a very strange problem inserting values into my mysql database, using php, so i was running a test, the simplest of the simple insert; the following doesnt work:

```
<?php
include("config.php"); // put the *FULL* path to the file.

mysql_query("INSERT INTO 'lms'.'test2' ('trn') VALUES ('17')");

?> 
```

However the following works:(Note the difference in single quotes)

```
<?php
include("config.php"); // put the *FULL* path to the file.

mysql_query("INSERT INTO `lms`.`test2` (`trn`) VALUES ('17')");

?> 
```

I really can't see what the problem is could I get sum assistance please

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T12:12:52.770

您不需要在查询中封装表，除非它们有空格或它们是保留字。

```
INSERT INTO 'lms'.'test2' ('trn') VALUES ('17')
// This makes no real sense to the db. It should be:
INSERT INTO lms.test2 (trn) VALUES ('17') 
```

如果 trn 列接受数字，它确实应该是：

```
INSERT INTO lms.test2 (trn) VALUES (17) 
```

使用 MySQL，您可以使用*倾斜的引号*字符来封装名称，但不能封装字符串。要在查询中输入字符串，您必须使用普通引号，例如`'`.

你可以这样做：

```
select `someTable`.`someColumn` from `someTable` 
```

但不是这个：

```
select someTable.someColumn from someTable where myName=`Tommy`; 
```

正确的用法是：

```
select someTable.someColumn from someTable where myName='Tommy'; 
```

# hadoop - How do we pass objects of some custom class as a parameter to mapper in mapReduce programs??

> ID：11777108
> 
> 赞同：3
> 
> 时间：2012-08-02T12:08:53.787
> 
> 标签：hadoop

How do we pass objects of some custom class as a parameter to mapper in mapReduce programs?? JobConf has 'set' methods for boolean, string, int and long. What if I want to pass a Document object as a parameter to my mapper? Can any one help me out?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T12:30:08.080

我给了一个希望将整个地图传递给映射器的人的提示。

[Hadoop：如何在配置中保存 Map 对象](https://stackoverflow.com/questions/7807576/hadoop-how-to-save-map-object-in-configuration)

这个想法是一样的，你必须把你的对象序列化成一个字符串，然后放到配置中。JSON 效果很好，因为配置被序列化为 XML，因此反序列化时没有问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T13:47:24.193

如果您的对象实现了 Writable，您可以将其序列化为字节数组，base64 对字节数组进行编码，然后将生成的字符串保存到配置中。解码则相反。

当然，如果您的对象占用空间非常大，我不建议这样做 - 在这种情况下，您最好将其序列化为 HDFS 中的文件并使用分布式缓存。

# android - Android - how to display large text

> ID：11777111
> 
> 赞同：2
> 
> 时间：2012-08-02T12:08:56.183
> 
> 标签：android

I have a txt file which is around 2MB. I need to display it in android. I have tried out WebView and it takes around 5 seconds to load and display the file. Is there any way I can get it rendered faster? Moreover, I dont want to load all the text at the start. Something like a scrollbar which displays elements efficiently is what I require. I need not stick to WebView alone, but can choose to show it using any efficient way.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T12:20:10.490

您可以按段落划分文本并使用列表视图。在一个项目中显示每一段文本。

# android - 为 Android 应用程序的所有页面启用缩放

> ID：11777116
> 
> 赞同：0
> 
> 时间：2012-08-02T12:09:05.730
> 
> 标签：android, html, cordova, zooming

我使用 phone-gap [A​​ndroid] 创建了一个 android 应用程序。

在这里，我可以缩放我的第一个 .html 应用程序页面，但是当我通过单击第一个 .html 页面的锚标签/按钮移动/重定向到页面时，我无法缩放第二个 .html 页面

我在我的 .java 中添加了以下内容

```
WebSettings settings = appView.getSettings();
settings.setBuiltInZoomControls(true);
settings.setSupportZoom(true);
settings.setDefaultZoom(ZoomDensity.FAR); 
```

我还在我的所有 .html 页面中添加了以下内容。

```
<meta name="viewport" content="user-scalable=yes, width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=6, target-densityDpi=device-dpi" />
<meta http-equiv="Content-type" content="text/html; charset=utf-8"> 
```

所以我的问题是：如何启用缩放效果

任何帮助都会得到满足.......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T11:55:49.027

我刚刚将 Phonegap 更新到 Cordova1.9.0，一切都开始正常了。

# c++ - Accessing calloc'd data through a shared_ptr

> ID：11777119
> 
> 赞同：1
> 
> 时间：2012-08-02T12:09:12.983
> 
> 标签：c++, boost, shared-ptr

I'm trying to access the data that I previously allocated with the `calloc` method through a shared_ptr. For some reason I can't access it (keeps on crashing with `EXC_BAD_ACCESS`) on `glTexImage2D` (last line of my code snippets).

My util method to load the data:

```
shared_ptr<ImageData> IOSFileSystem::loadImageFile(string path) const
{
    // Result
    shared_ptr<ImageData> result = shared_ptr<ImageData>();

    ...

    // Check if file exists
    if([[NSFileManager defaultManager] fileExistsAtPath:fullPath isDirectory:NO])
    {
        ...

        GLubyte *spriteData = (GLubyte*) calloc(width * height * 4, sizeof(GLubyte));

        ...

        // Put result in shared ptr
        shared_ptr<GLubyte> spriteDataPtr = shared_ptr<GLubyte>(spriteData);
        result = shared_ptr<ImageData>(new ImageData(path, width, height, spriteDataPtr));
    }
    else
    {
        cout << "IOSFileSystem::loadImageFile -> File does not exist at path.\nPath: " + path;
        exit(1);
    }

    return result;
} 
```

Header for `ImageData`:

```
class ImageData
{
public:
    ImageData(string path, int width, int height, shared_ptr<GLubyte> data);
    ~ImageData();

    string getPath() const;

    int getWidth() const;
    int getHeight() const;

    shared_ptr<GLubyte> getData() const;

private:
    string path;

    int width;
    int height;

    shared_ptr<GLubyte> data;
}; 
```

File that calls the util class:

```
void TextureMaterial::load()
{
    shared_ptr<IFileSystem> fileSystem = ServiceLocator::getFileSystem();
    shared_ptr<ImageData> imageData = fileSystem->loadImageFile(path);

    this->bind(imageData);
}

void TextureMaterial::bind(shared_ptr<ImageData> data)
{
    // Pointer to pixel data
    shared_ptr<GLubyte> pixelData = data->getData();

    ...

    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, data->getWidth(), data->getHeight(), 0, GL_RGBA, GL_UNSIGNED_BYTE, &pixelData);
} 
```

Just for the record: if I throw out all shared_ptr's I'm able to access the data. Signature for `glTexImage2D`:

```
void glTexImage2D(GLenum target, GLint level, GLint internalFormat, GLsizei width, GLsizei height, GLint border, GLenum format, GLenum type, const GLvoid *data); 
```

**Additional question**: normally you have to free(spriteData) but since I gave the data to a shared_ptr, will the data be free'd when the shared_ptr is removed?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T12:12:25.273

`shared_ptr`无法神奇地猜测如何释放内存。默认情况下它会尝试`delete`它，并且由于您没有使用`new`，因此最终会导致灾难。

你需要告诉它怎么做：

```
shared_ptr<GLubyte>(spriteData, &std::free); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T12:17:58.590

我认为这是你的问题：

```
..., &pixelData); 
```

您正在获取一个局部变量（类型为`shared_ptr<GLubyte>`）的地址，该变量被默默地转换为`void*`，而不是从中获取指针。将其替换为：

```
..., pixelData.get()); 
```

# r - r中的三向颜色渐变填充

> ID：11777124
> 
> 赞同：24
> 
> 时间：2012-08-02T12:09:25.657
> 
> 标签：r, plot, triplot

如何将三向颜色渐变（热图）填充到三图（三角形图），像这样。

```
plot(NA,NA,xlim=c(0,1),ylim=c(0,sqrt(3)/2),asp=1,bty="n",axes=F,xlab="",ylab="")
segments(0,0,0.5,sqrt(3)/2)
segments(0.5,sqrt(3)/2,1,0)
segments(1,0,0,0) 
```

![在此处输入图像描述](../Images/ed4e241a888117e846a13a332d251f77.png)

颜色应该与三图平行运行。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-04T17:44:34.317

这是一种方法 - 它有点像黑客，使用点来逐个绘制渐变：

```
plot(NA,NA,xlim=c(0,1),ylim=c(0,1),asp=1,bty="n",axes=F,xlab="",ylab="")
segments(0,0,0.5,sqrt(3)/2)
segments(0.5,sqrt(3)/2,1,0)
segments(1,0,0,0)
# sm - how smooth the plot is. Higher values will plot very slowly
sm <- 500
for (y in 1:(sm*sqrt(3)/2)/sm){
    for (x in (y*sm/sqrt(3)):(sm-y*sm/sqrt(3))/sm){
        ## distance from base line:
        d.red = y
        ## distance from line y = sqrt(3) * x:
        d.green = abs(sqrt(3) * x - y) / sqrt(3 + 1)
        ## distance from line y = - sqrt(3) * x + sqrt(3):
        d.blue = abs(- sqrt(3) * x - y + sqrt(3)) / sqrt(3 + 1)
        points(x, y, col=rgb(1-d.red,1 - d.green,1 - d.blue), pch=19)
    }
} 
```

和输出：

![在此处输入图像描述](../Images/d30392ce124203ceab8aa2c288245596.png)

您想使用这些渐变来表示数据吗？如果是这样，可能会改变`d.red`,`d.green`和`d.blue`这样做 - 不过我还没有测试过类似的东西。我希望这会有所帮助，但是`colorRamp`例如，使用 的适当解决方案可能会更好。

**编辑**：根据 baptiste 的建议，这就是您将信息存储在向量中并一次性绘制出来的方式。它要快得多（`sm`例如，尤其是设置为 500 时）：

```
plot(NA,NA,xlim=c(0,1),ylim=c(0,1),asp=1,bty="n",axes=F,xlab="",ylab="")
sm <- 500
x <- do.call(c, sapply(1:(sm*sqrt(3)/2)/sm, 
                       function(i) (i*sm/sqrt(3)):(sm-i*sm/sqrt(3))/sm))
y <- do.call(c, sapply(1:(sm*sqrt(3)/2)/sm, 
                       function(i) rep(i, length((i*sm/sqrt(3)):(sm-i*sm/sqrt(3))))))
d.red = y
d.green = abs(sqrt(3) * x - y) / sqrt(3 + 1)
d.blue = abs(- sqrt(3) * x - y + sqrt(3)) / sqrt(3 + 1)
points(x, y, col=rgb(1-d.red,1 - d.green,1 - d.blue), pch=19) 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-08-06T15:21:13.787

这是一个带有光栅化背景图像的解决方案。该函数的`sharpness`参数`tricol`控制颜色变黑的速度。将其设置为 1 为您提供 Edward 的颜色，将其设置为 2 为您提供以下颜色。

```
# Coordinates of the triangle
tri <- rbind(sin(0:2*2/3*pi), cos(0:2*2/3*pi))

# Function for calculating the color of a set of points `pt`
# in relation to the triangle
tricol <- function(pt, sharpness=2){
    require(splancs)
    RGB <- sapply(1:3, function(i){
        a <- sweep(pt, 2, tri[,i])
        b <- apply(tri[,-i], 1, mean) - tri[,i]
        sharpness*((a %*% b) / sum(b^2))-sharpness+1
    })
    RGB[-inpip(pt,t(tri)),] <- 1    # Color points outside the triangle white
    do.call(rgb, unname(as.data.frame(pmin(pmax(RGB, 0), 1))))
}

# Plot
res <- 1000                         # Resolution
xi <- seq(-1, 1, length=res)        # Axis points
yi <- seq(-.8, 1.2, length=res)
x <- xi[1] + cumsum(diff(xi))       # Midpoints between axis points
y <- yi[1] + cumsum(diff(yi))
xy <- matrix(1:(length(x)*length(y)), length(x))
image(xi, yi, xy, col=tricol(as.matrix(expand.grid(x,y))), useRaster=TRUE)
lines(tri[1,c(1:3,1)], tri[2,c(1:3,1)], type="l") 
```

什么是用颜色（红色，绿色，蓝色）`tricol()`表示每个角落。`i`它定义了一个从角到点`a`的向量矩阵`pt`和一个`b`从角到对边中心的向量。然后它`a`投影`b`并缩放以获得相对距离=颜色强度（并应用一个小技巧`sharpness`来稍微调整颜色）。当涉及到像这个简单的代数这样的问题时，它可以发挥神奇的作用。

由于混叠，您会在边缘周围得到一点噪音，但您可能可以将其调整掉，或者在三角形中画出稍宽的线条。 ![渐变三角形](../Images/e281edf2f06a3d35ed1d3bded5e2803f.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-28T20:08:47.567

这是我为`phonR`包设计的一个实现...该`fillTriangle`函数未导出，因此您必须使用`:::`运算符来访问它。示例显示了基于 pch 和基于光栅的方法。

```
# set up color scale
colmap <- plotrix::color.scale(x=0:100, cs1=c(0, 180), cs2=100, cs3=c(25, 100),
                               alpha=1, color.spec='hcl')
# specify triangle vertices and corner colors
vertices <- matrix(c(1, 4, 2, 1, 3, 4, length(colmap), 1, 30), nrow=3,
                   dimnames=list(NULL, c("x", "y", "z")))
# edit next line to change density / resolution
xseq <- yseq <- seq(0, 5, 0.01)
grid <- expand.grid(x=xseq, y=yseq)
grid$z <- NA
grid.indices <- splancs::inpip(grid, vertices[,1:2], bound=FALSE)
grid$z[grid.indices] <- with(grid[grid.indices,], 
                             phonR:::fillTriangle(x, y, vertices))
# plot it
par(mfrow=c(1,2))
# using pch
with(grid, plot(x, y, col=colmap[round(z)], pch=16))
# overplot original triangle
segments(vertices[,1], vertices[,2], vertices[c(2,3,1),1], 
         vertices[c(2,3,1),2])
points(vertices[,1:2], pch=21, bg=colmap[vertices[,3]], cex=2)

# using raster
image(xseq, yseq, matrix(grid$z, nrow=length(xseq)), col=colmap)
# overplot original triangle
segments(vertices[,1], vertices[,2], vertices[c(2,3,1),1], 
         vertices[c(2,3,1),2])
points(vertices[,1:2], pch=21, bg=colmap[vertices[,3]], cex=2) 
```

[![渐变三角形填充的示例图](../Images/2121270a98e2507d8715310dc32fe318.png)](https://i.stack.imgur.com/QDx9C.png)

# xml - Insert an Image in Openxml

> ID：11777126
> 
> 赞同：2
> 
> 时间：2012-08-02T12:09:29.370
> 
> 标签：xml, ms-word

Is there any way to call Images directly in document.xml instead of calling in rels file in OpenXML?

# silverstripe - Silverstripe 与混合移动应用程序

> ID：11777133
> 
> 赞同：0
> 
> 时间：2012-08-02T12:09:53.940
> 
> 标签：silverstripe

基本上我想做的是创建一个允许用户输入信息的 SilverStripe CMS。我不想像往常一样在网页上显示此信息，而是想使用 JSON 将其输出到混合移动应用程序。我知道我必须使用 RESTful 服务器 API 和数据对象，但我有点不清楚它实际上是如何工作的。

希望能对此有所启发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T20:12:03.437

将数据保存到数据库中非常容易，这甚至包含在 5 个基本教程之一中。

如果您只需要基本功能，通过 REST 提供此信息也不是那么难。SilverStripe 已经带有 REST 支持，但至少在 2.4 中，这种 REST 支持相当有限，并且与数据库模型密切相关。
据我所知，SS 3.0 中已删除 REST 服务器

这里是 SS 2.4 中 RestfulServer 类的 API 文档的链接：http: [//api.silverstripe.org/2.4/sapphire/api/RestfulServer.html#class_details](http://api.silverstripe.org/2.4/sapphire/api/RestfulServer.html#class_details)

取自该文档，允许 api 访问对象相当简单：

```
class Article extends DataObject {
     static $db = array('Title'=>'Text','Published'=>'Boolean');
     static $api_access = array(
         'view' => array('Title'),
         'edit' => array('Title'),
     );
} 
```

而不是通过访问它`http://mysite.com/api/v1/Article`

如果这不能满足您的需求，我认为您可以采取 2 种替代方案：

1.  创建您自己的控制器来输出您需要的其余内容
2.  或者，如果您需要复杂的 API，则使用像[https://github.com/Luracast/Restler](https://github.com/Luracast/Restler)这样的 REST 框架（但将 Rester 设置为在 SilverStripe 中工作可能会很痛苦，因为 Restler 和 SS 都拥有网址魔术）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T00:29:17.403

或者，您实际上可以只吐出 HTML 片段。我已经在几个 Phonegap 应用程序中做到了这一点。样式、主要 javascript 等明显嵌入在 phonegap 应用程序中。但是您可以创建只获取 HTML 片段的迷你窗口（几乎像和 iframe）。而且您可以方便地使用您的模板更改该 HTML（更改非常方便）。

查看 JQmobi 框架和数据延迟功能。

您只需将 data-defer 的属性放到您网站上的 URL 中，而该 URL 只是一个 HTML 片段。

# awk - 在 awk 中定义一个字符串

> ID：11777142
> 
> 赞同：-1
> 
> 时间：2012-08-02T12:10:30.103
> 
> 标签：awk

我对 awk 有疑问，我想根据整数值 NF 定义一个字符串变量 (str)，以便在另一个函数中使用它：如果 NF=3 str="$1 $2 $3"。

if NF=4 str="$1 $2 $3 $4"....等等怎么做

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T12:20:50.677

只需使用 str=$0

if(NF==3) 那么 str="$1 $2 $3"

如果该行有 3 个字段，那么显然 $0 是所有 3 个字段的组合。如果您希望输出字段分隔符为“”，则只需提及 OFS=""。

例子：

```
awk -F";" 'BEGIN{OFS=" "}{str=$0;print str}' file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T12:25:43.717

如果你只是想看看如何定义和使用变量，试试这个：

```
#!/bin/awk -f
{
        print NF
        if (NF==3){
                str=$1 $2 $3 " says hello 3"
        }
        if (NF==2){
                str=$1 $2 
        }
        print str
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T12:59:00.643

如果我理解你的话，你想要这个吗？

```
kent$echo "a b c d"|awk '{for(i=1;i<=NF;i++) s=s"$"i" ";print s}' 
$1 $2 $3 $4 
```

# java - ImageJ：在 JAVA 中使用 run() 执行命令

> ID：11777145
> 
> 赞同：1
> 
> 时间：2012-08-02T12:10:41.610
> 
> 标签：java, api, plugins, image-processing, imagej

我使用以下 JAVA 代码执行了这个“增强对比度...”命令（*在 ImageJ 中：Process > Enhance Contrast... ）：*

```
IJ.run(imagePlus, "Enhance Contrast...", ""); 
```

但是，我不知道如何执行其他一些命令，例如： *Process > Binary > **Make Binary***。

最后，我想启动插件：Anisotropic Diffusion 2D。将其放入 ImageJ 后，它将显示在： *Plugins > **Anisotropic Diffusion 2D***中。

**如何在我的 JAVA 代码中执行这两个命令？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T12:34:35.297

回答这些问题的一个有用工具是 ImageJ 的宏记录器。打开*Plugins > Macros > Record ...*并将“Record”选项更改为`Plugin`. 如果您随后尝试运行“Make Binary”的菜单选项，您将在宏记录器中看到以下内容：

```
IJ.run(imp, "Make Binary", ""); 
```

您可以对“Anisotropic Diffusion 2D”执行相同的操作。

# javascript - Javascript正则表达式测试方法无法正常工作

> ID：11777147
> 
> 赞同：0
> 
> 时间：2012-08-02T12:10:44.940
> 
> 标签：javascript, regex

> **可能重复：**
> [为什么在 Javascript 中带有全局标志的 RegExp 会给出错误的结果？](https://stackoverflow.com/questions/1520800/why-regexp-with-global-flag-in-javascript-give-wrong-results)

我有以下方法，我将这些参数传递给：

```
var stringValue = "50, abc";
var stringArray = stringValue.split(",");
var agePattern = /^([0-9]|[1-9][0-9]|[1][0-4][0-9]|[1][5][0])$/g;

age = getMatchingString(stringArray, agePattern);

//---------------------------------------------

function getMatchingString(stringArray, regexPattern) {
    //alert("getMatchingString");
    for (var i=0; i < stringArray.length; i++) {
        if (regexPattern.test(stringArray[i])) {

            return (stringArray[i].match(regexPattern)).toString();

        }
    }

    return null;
} 
```

* * *

Chrome 显示以下有趣的行为，其中带有 stringArray[i] 和 stringArray[0] 的测试方法显示不同的值，即使`i = 0`如图所示：

![问题的演示](../Images/741fb81b64fadc9bed40ad973ff58a88.png)

有人可以向我解释一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T13:23:36.450

```
var stringValue = "50, abc";
var stringArray = stringValue.split(",");
var age = getMatchingString(stringArray);

function getMatchingString(stringArray)
{
    var len=stringArray.length;
    for (var i=0; i < len; i++)
    {
        if(!isNaN(stringArray[i]))
        {
           return stringArray[i]
        }
    }

    return null;
}

alert(age)//50 
```

也许，如果您正在遍历数组以检查是否存在像这样的年龄的数值，`isNaN`那么在这里使用的选项比使用正则表达式模式要好得多。

[演示](http://jsfiddle.net/kghK7/)

# c# - 将 DBGhost 从 5.0.0.1108 升级到 5.0.0.1368

> ID：11777149
> 
> 赞同：0
> 
> 时间：2012-08-02T12:10:48.843
> 
> 标签：c#, sql-server, sql-server-2008, dbghost

当我将 DBGhost 从 5.0.0.1108 升级到 5.0.0.1368 时，Delta 中没有生成静态数据。有什么解决方法吗？，我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T10:33:29.340

这也发布在我们的论坛上，您可以在其中看到回复。“使用 GUI 准备和保存设置，然后您可以使用设置文件进行命令行运行。”

[http://dbghost.forumco.com/topic.asp?TOPIC_ID=225](http://dbghost.forumco.com/topic.asp?TOPIC_ID=225)

乔恩@Innovartis

# git - 你能以任何方式在 Git 中获得重复的哈希吗？这意味着什么

> ID：11777151
> 
> 赞同：5
> 
> 时间：2012-08-02T12:10:56.880
> 
> 标签：git

我的观点是应该有可能得到一个重复的 git 哈希，因为哈希码是唯一性的浓缩表示，因此会有一些步骤序列产生相同的哈希码。更重要的是，应该有一系列步骤，在这些步骤中提交不同的更改但产生相同的哈希码。

例如，在同一台机器上克隆相同的存储库两次，在不同的存储库中进行几乎完全相同的更改（保存一个字节或位）并提交。即使在提交中使用了目录名称或时间戳，它仍然应该可以得到它（尽管很少被授予）。例如，两个不同的人在两台不同的机器上同时进行提交。

我的问题是两方面的。这怎么会发生，Git 将如何处理它。

或者更明确地说，git 如何在推送之前确保您是最新的。是否有可能一个人先推送，然后另一个人尝试推送（这两个更改都基于相同的父提交）并且 Git 从远程和本地历史记录中看到哈希码匹配，决定您可以继续，允许您的push 但您刚刚丢失了一项更改？在这种情况下，我看到它更像以下内容：

repo1 a->b->c1

repo2 a->b->c1'->c2

说 c1,c1',c2 都发生在两个 repos 都被克隆到 b 之后，现在 repo1 推送，现在没有问题 repo2 尝试推送 c1' 和 c2 并且 git 确定 c1' = c1 但实际上它们不同，git 将 c2 推送到顶部c1 得到 a->b->c1->c2 并且我们丢失了在 c1' 中所做的更改

这可能吗？它怎么会发生，git会做什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-02T12:16:06.547

关于与重复哈希有关的问题部分：

Git 完全依赖于生成的哈希值的唯一性，据我所知，它没有任何安全措施来处理产生相同哈希值的不同数据块。但是，发生哈希冲突的机会非常小，实际上可以忽略不计。如果您仍然担心，[Pro Git 的这一部分](http://git-scm.com/book/cs/ch6-1.html#A-SHORT-NOTE-ABOUT-SHA-1)可能会让您放心：

> 您的编程团队的每个成员都更有可能在同一晚在不相关的事件中被狼袭击和杀死。

至于你问题的第二部分（会发生什么）：

> 如果您碰巧提交了一个对象，该对象的哈希值与您的存储库中的前一个对象相同，Git 将在您的 Git 数据库中看到前一个对象并假设它已经被写入。如果您尝试在某个时候再次检查该对象，您将始终获得第一个对象的数据。

# java - 在 Spring MVC 中使用 Ajax 和 SimpleFormCotroller

> ID：11777153
> 
> 赞同：1
> 
> 时间：2012-08-02T12:11:07.130
> 
> 标签：java, ajax, hibernate, jsp, spring-mvc

我正在[`SimpleFormController`](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/web/servlet/mvc/SimpleFormController.html)使用 Hibernate 与 Spring MVC 3.0.2 一起在 JSP 中开发应用程序。一切都很好。我还[`Validator`](http://static.springsource.org/spring/docs/2.0.x/api/org/springframework/validation/Validator.html)用于验证服务器端的表单。它也进展顺利。

现在，我需要以 Ajax 为例，当从下拉列表中选择一个国家`<form:select><form:option></form:option></form:select>`（

我已经在某些地方使用 Ajax 完成了这些事情，但还没有使用 Spring MVC。我浏览了很多`SimpleFormController`关于 Google 的教程/文章，但没有一个使用 Ajax。我找不到关于如何将 Ajax 与`SimpleFormController`.

使用带注释`@Controller`的控制器（`@RequestMapping`

但是`SimpleFormController`，对于如何在 Spring 控制器中处理 Ajax 请求（要映射哪些方法以及如何映射），我没有任何确切的想法。使用`SimpleFormController`, 我通常与`onSubmit()`,`showForm()`和`referenceData()`方法相关联。

您能否公开一些关于如何发出 Ajax 请求`SimpleFormController`、可以映射哪些方法以及如何映射的想法？（我不再想要完整的代码了。一个非常简单的示例（*当且仅当它可能时*）或者更具体的链接，其中解释了 Ajax 的使用`SimpleFormController`对我来说已经足够学习了）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T13:33:19.603

你总是可以有一个单独的@Controller 来处理 ajax 请求。如果您可以在视图上使用自定义 jsp，则没有什么可以阻止您处理页面上的 ajax 请求。只需将选择框的 onchange 事件绑定到指向您创建的另一个控制器的 ajax 调用。

就保持它绑定到那个 SimpleFormController 而言，我认为这是不可能的，但是如果您创建一个表单将使用的新 RESTful 控制器，那么网站的其他部分也将能够使用这个新控制器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T09:11:40.907

作为对 dardo 的回答的补充，可以同时使用 spring MVC 2 和 MVC 3 控制器，但设置起来有点棘手。

为了在同一个 Spring 上下文中同时使用`SimpleFormController`和`@Controller`控制器，我习惯了以下定义：

```
<!-- ======== MVC Spring 3.x ======== -->

<!-- Scans within the base package of the application for @Components to configure as beans @Controller, @Service, @Configuration, etc. -->
<context:component-scan base-package="com.your.package" />

<!-- Enables the Spring MVC @Controller programming model -->
<!-- It's a shortcut equivalent to the (more complete) bean definition below (see bean AnnotationMethodHandlerAdapter).-->
<!--<mvc:annotation-driven />-->

<!-- This HandlerAdapter will register spring 3.x controllers (@Controller) into the DispatcherServlet -->
<bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter">
    <property name="messageConverters">
        <array>
            <bean class="org.springframework.http.converter.StringHttpMessageConverter">
                <property name="writeAcceptCharset" value="false"/>
            </bean>
            <bean class="org.springframework.http.converter.ByteArrayHttpMessageConverter"/>
            <bean class="org.springframework.http.converter.xml.SourceHttpMessageConverter"/>
            <bean class="org.springframework.http.converter.xml.XmlAwareFormHttpMessageConverter"/>
            <bean class="org.springframework.http.converter.json.MappingJacksonHttpMessageConverter"/>
        </array>
    </property>
</bean>

<!-- This HandlerMapping allows to map urls defined in @RequestMapping annotations to the corresponding controllers -->
<bean class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping">
</bean>

<!-- ======== MVC Spring 2.x ======== -->

<!-- This HandlerAdapter will register spring 2.x controllers (@Controller) into the DispatcherServlet -->
<bean class="org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter" />

<!-- Url mapper -->
<bean id="urlMapper" class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
    <property name="urlMap">
        <map>
            <entry key="/foo.do" value-ref="fooController" />
            <entry key="/bar.do" value-ref="barController" />

            ...
        </map>
    </property>
</bean> 
```

# windows-7 - 提取特定语言的 Eventlog 消息

> ID：11777154
> 
> 赞同：1
> 
> 时间：2012-08-02T12:11:26.113
> 
> 标签：windows-7, message, extract, event-log

我需要一些有关在 Windows 7 下提取事件日志数据的帮助。

我试图实现的目标：一台计算机安装了 Windows 7 德语（或任何其他语言）。我想提取英语中的事件日志消息，以将它们传输到另一台我想要存储和分析事件日志的计算机。这应该以某种方式以编程方式（C# 或 C++）完成。

我尝试了不同的方法。编写一个 C# 程序来提取消息，结果总是得到的消息不是英语，而是计算机的配置语言。我也在 C++ 中尝试过，但结果相同。

另一种方法是提取 evtx 文件中的事件日志并将其传输到另一台具有英语操作系统的计算机。但该解决方案的问题在于，我还需要非 Windows 事件日志消息（例如来自已安装程序的消息），这些消息无法在未安装程序和消息 dll 的另一台计算机上查看。

有谁知道如何独立于操作系统的语言提取英语事件日志消息？

非常感谢，乌利

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T14:08:59.943

这是 C++ 以特定语言提取特殊事件日志消息的完整代码（感谢“Apokal”和 MSDN）。您可以更改定义

1.  提供者名称（这是注册表中的键）
2.  资源 dll（这是注册表中引用的消息 dll 的路径）
3.  消息语言（这是语言代码 - 注意：似乎需要完整的代码“DE”不工作“DE-de”工作......）

    ```
     #include "stdafx.h"
    #include <windows.h>
    #include <stdio.h>
    #include <strsafe.h>

    #define PROVIDER_NAME           L"SceCli"
    #define RESOURCE_DLL            L"C:\\Windows\\System32\\scecli.dll"
    #define MESSAGE_LANGUAGE        0x0409 // En-Us
    #define MAX_TIMESTAMP_LEN       23 + 1   // mm/dd/yyyy hh:mm:ss.mmm
    #define MAX_RECORD_BUFFER_SIZE  0x10000  // 64K

    HANDLE GetMessageResources();
    DWORD DumpRecordsInBuffer(PBYTE pBuffer, DWORD dwBytesRead);
    DWORD GetEventTypeName(DWORD EventType);
    LPWSTR GetMessageString(DWORD Id, DWORD argc, LPWSTR args);
    void GetTimestamp(const DWORD Time, WCHAR DisplayString[]);
    DWORD ApplyParameterStringsToMessage(CONST LPCWSTR pMessage, LPWSTR & pFinalMessage);

    CONST LPWSTR pEventTypeNames[] = {L"Error", L"Warning", L"Informational", L"Audit Success", L"Audit Failure"};

    HANDLE g_hResources = NULL;

    void wmain(void)
    {
        HANDLE hEventLog = NULL;
        DWORD status = ERROR_SUCCESS;
        DWORD dwBytesToRead = 0;
        DWORD dwBytesRead = 0;
        DWORD dwMinimumBytesToRead = 0;
        PBYTE pBuffer = NULL;
        PBYTE pTemp = NULL;

        // The source name (provider) must exist as a subkey of Application.
        hEventLog = OpenEventLog(NULL, PROVIDER_NAME);
        if (NULL == hEventLog)
        {
            wprintf(L"OpenEventLog failed with 0x%x.\n", GetLastError());
            goto cleanup;
        }

        // Get the DLL that contains the string resources for the provider.
        g_hResources = GetMessageResources();
        if (NULL == g_hResources)
        {
            wprintf(L"GetMessageResources failed.\n");
            goto cleanup;
        }

        // Allocate an initial block of memory used to read event records. The number 
        // of records read into the buffer will vary depending on the size of each event.
        // The size of each event will vary based on the size of the user-defined
        // data included with each event, the number and length of insertion 
        // strings, and other data appended to the end of the event record.
        dwBytesToRead = MAX_RECORD_BUFFER_SIZE;
        pBuffer = (PBYTE)malloc(dwBytesToRead);
        if (NULL == pBuffer)
        {
            wprintf(L"Failed to allocate the initial memory for the record buffer.\n");
            goto cleanup;
        }

        // Read blocks of records until you reach the end of the log or an 
        // error occurs. The records are read from newest to oldest. If the buffer
        // is not big enough to hold a complete event record, reallocate the buffer.
        while (ERROR_SUCCESS == status)
        {
            if (!ReadEventLog(hEventLog, 
                EVENTLOG_SEQUENTIAL_READ | EVENTLOG_BACKWARDS_READ,
                0, 
                pBuffer,
                dwBytesToRead,
                &dwBytesRead,
                &dwMinimumBytesToRead))
            {
                status = GetLastError();
                if (ERROR_INSUFFICIENT_BUFFER == status)
                {
                    status = ERROR_SUCCESS;

                    pTemp = (PBYTE)realloc(pBuffer, dwMinimumBytesToRead);
                    if (NULL == pTemp)
                    {
                        wprintf(L"Failed to reallocate the memory for the record buffer (%d bytes).\n", dwMinimumBytesToRead);
                        goto cleanup;
                    }

                    pBuffer = pTemp;
                    dwBytesToRead = dwMinimumBytesToRead;
                }
                else 
                {
                    if (ERROR_HANDLE_EOF != status)
                    {
                        wprintf(L"ReadEventLog failed with %lu.\n", status);
                        goto cleanup;
                    }
                }
            }
            else
            {
                // Print the contents of each record in the buffer.
                DumpRecordsInBuffer(pBuffer, dwBytesRead);
            }
        }

        getchar();

    cleanup:

        if (hEventLog)
            CloseEventLog(hEventLog);

        if (pBuffer)
            free(pBuffer);
    }

    // Get the provider DLL that contains the string resources for the
    // category strings, event message strings, and parameter insert strings.
    // For this example, the path to the DLL is hardcoded but typically,
    // you would read the CategoryMessageFile, EventMessageFile, and 
    // ParameterMessageFile registry values under the source's registry key located 
    // under \SYSTEM\CurrentControlSet\Services\Eventlog\Application in
    // the HKLM registry hive. In this example, all resources are included in
    // the same resource-only DLL.
    HANDLE GetMessageResources()
    {
        HANDLE hResources = NULL;

        hResources = LoadLibraryEx(RESOURCE_DLL, NULL, LOAD_LIBRARY_AS_IMAGE_RESOURCE | LOAD_LIBRARY_AS_DATAFILE);
        if (NULL == hResources)
        {
            wprintf(L"LoadLibrary failed with %lu.\n", GetLastError());
        }

        return hResources;
    }

    // Loop through the buffer and print the contents of each record 
    // in the buffer.
    DWORD DumpRecordsInBuffer(PBYTE pBuffer, DWORD dwBytesRead)
    {
        DWORD status = ERROR_SUCCESS;
        PBYTE pRecord = pBuffer;
        PBYTE pEndOfRecords = pBuffer + dwBytesRead;
        LPWSTR pMessage = NULL;
        LPWSTR pFinalMessage = NULL;
        WCHAR TimeStamp[MAX_TIMESTAMP_LEN];

        while (pRecord < pEndOfRecords)
        {
            // If the event was written by our provider, write the contents of the event.
            if (0 == wcscmp(PROVIDER_NAME, (LPWSTR)(pRecord + sizeof(EVENTLOGRECORD))))
            {
                GetTimestamp(((PEVENTLOGRECORD)pRecord)->TimeGenerated, TimeStamp);
                wprintf(L"Time stamp: %s\n", TimeStamp);
                wprintf(L"record number: %lu\n", ((PEVENTLOGRECORD)pRecord)->RecordNumber);
                wprintf(L"status code: %d\n", ((PEVENTLOGRECORD)pRecord)->EventID & 0xFFFF);
                wprintf(L"event type: %s\n", pEventTypeNames[GetEventTypeName(((PEVENTLOGRECORD)pRecord)->EventType)]);

                pMessage = GetMessageString(((PEVENTLOGRECORD)pRecord)->EventCategory, 0, NULL);

                if (pMessage)
                {
                    wprintf(L"event category: %s", pMessage);
                    LocalFree(pMessage);
                    pMessage = NULL;
                }

                pMessage = GetMessageString(((PEVENTLOGRECORD)pRecord)->EventID, 
                    ((PEVENTLOGRECORD)pRecord)->NumStrings, (LPWSTR)(pRecord + ((PEVENTLOGRECORD)pRecord)->StringOffset));

                if (pMessage)
                {
                    status = ApplyParameterStringsToMessage(pMessage, pFinalMessage);

                    wprintf(L"event message: %s", (pFinalMessage) ? pFinalMessage : pMessage);
                    LocalFree(pMessage);
                    pMessage = NULL;

                    if (pFinalMessage)
                    {
                        free(pFinalMessage);
                        pFinalMessage = NULL;
                    }
                }

                // To write the event data, you need to know the format of the data. In
                // this example, we know that the event data is a null-terminated string.
                if (((PEVENTLOGRECORD)pRecord)->DataLength > 0)
                {
                    wprintf(L"event data: %s\n", (LPWSTR)(pRecord + ((PEVENTLOGRECORD)pRecord)->DataOffset));
                }

                wprintf(L"\n");
            }

            pRecord += ((PEVENTLOGRECORD)pRecord)->Length;
        }

        return status;
    }

    // Get an index value to the pEventTypeNames array based on 
    // the event type value.
    DWORD GetEventTypeName(DWORD EventType)
    {
        DWORD index = 0;

        switch (EventType)
        {
        case EVENTLOG_ERROR_TYPE:
            index = 0;
            break;
        case EVENTLOG_WARNING_TYPE:
            index = 1;
            break;
        case EVENTLOG_INFORMATION_TYPE:
            index = 2;
            break;
        case EVENTLOG_AUDIT_SUCCESS:
            index = 3;
            break;
        case EVENTLOG_AUDIT_FAILURE:
            index = 4;
            break;
        }

        return index;
    }

    // Formats the specified message. If the message uses inserts, build
    // the argument list to pass to FormatMessage.
    LPWSTR GetMessageString(DWORD MessageId, DWORD argc, LPWSTR argv)
    {
        LPWSTR pMessage = NULL;
        DWORD dwFormatFlags = FORMAT_MESSAGE_FROM_SYSTEM | FORMAT_MESSAGE_FROM_HMODULE | FORMAT_MESSAGE_ALLOCATE_BUFFER;
        DWORD_PTR* pArgs = NULL;
        LPWSTR pString = argv;

        // The insertion strings appended to the end of the event record
        // are an array of strings; however, FormatMessage requires
        // an array of addresses. Create an array of DWORD_PTRs based on
        // the count of strings. Assign the address of each string
        // to an element in the array (maintaining the same order).
        if (argc > 0)
        {
            pArgs = (DWORD_PTR*)malloc(sizeof(DWORD_PTR) * argc);
            if (pArgs)
            {
                dwFormatFlags |= FORMAT_MESSAGE_ARGUMENT_ARRAY;

                for (DWORD i = 0; i < argc; i++)
                {
                    pArgs[i] = (DWORD_PTR)pString;
                    pString += wcslen(pString) + 1;
                }
            }
            else
            {
                dwFormatFlags |= FORMAT_MESSAGE_IGNORE_INSERTS;
                wprintf(L"Failed to allocate memory for the insert string array.\n");
            }
        }

        if (!FormatMessage(dwFormatFlags,
            g_hResources,
            MessageId,
            MESSAGE_LANGUAGE,  
            (LPWSTR)&pMessage, 
            0, 
            (va_list*)pArgs))
        {
            wprintf(L"Format message failed with %lu\n", GetLastError());
        }

        if (pArgs)
            free(pArgs);

        return pMessage;
    }

    // If the message string contains parameter insertion strings (for example, %%4096),
    // you must perform the parameter substitution yourself. To get the parameter message 
    // string, call FormatMessage with the message identifier found in the parameter insertion 
    // string (for example, 4096 is the message identifier if the parameter insertion string
    // is %%4096). You then substitute the parameter insertion string in the message 
    // string with the actual parameter message string. 
    DWORD ApplyParameterStringsToMessage(CONST LPCWSTR pMessage, LPWSTR & pFinalMessage)
    {
        DWORD status = ERROR_SUCCESS;
        DWORD dwParameterCount = 0;  // Number of insertion strings found in pMessage
        size_t cbBuffer = 0;         // Size of the buffer in bytes
        size_t cchBuffer = 0;        // Size of the buffer in characters
        size_t cchParameters = 0;    // Number of characters in all the parameter strings
        size_t cch = 0;
        DWORD i = 0;
        LPWSTR* pStartingAddresses = NULL;  // Array of pointers to the beginning of each parameter string in pMessage
        LPWSTR* pEndingAddresses = NULL;    // Array of pointers to the end of each parameter string in pMessage
        DWORD* pParameterIDs = NULL;        // Array of parameter identifiers found in pMessage
        LPWSTR* pParameters = NULL;         // Array of the actual parameter strings
        LPWSTR pTempMessage = (LPWSTR)pMessage;
        LPWSTR pTempFinalMessage = NULL;

        // Determine the number of parameter insertion strings in pMessage.
        while (pTempMessage = wcschr(pTempMessage, L'%'))
        {
            dwParameterCount++;
            pTempMessage++;
        }

        // If there are no parameter insertion strings in pMessage, return.
        if (0 == dwParameterCount)
        {
            pFinalMessage = NULL;
            goto cleanup;
        }

        // Allocate an array of pointers that will contain the beginning address 
        // of each parameter insertion string.
        cbBuffer = sizeof(LPWSTR) * dwParameterCount;
        pStartingAddresses = (LPWSTR*)malloc(cbBuffer);
        if (NULL == pStartingAddresses)
        {
            wprintf(L"Failed to allocate memory for pStartingAddresses.\n");
            status = ERROR_OUTOFMEMORY;
            goto cleanup;
        }

        RtlZeroMemory(pStartingAddresses, cbBuffer);

        // Allocate an array of pointers that will contain the ending address (one
        // character past the of the identifier) of the each parameter insertion string.
        pEndingAddresses = (LPWSTR*)malloc(cbBuffer);
        if (NULL == pEndingAddresses)
        {
            wprintf(L"Failed to allocate memory for pEndingAddresses.\n");
            status = ERROR_OUTOFMEMORY;
            goto cleanup;
        }

        RtlZeroMemory(pEndingAddresses, cbBuffer);

        // Allocate an array of pointers that will contain pointers to the actual
        // parameter strings.
        pParameters = (LPWSTR*)malloc(cbBuffer);
        if (NULL == pParameters)
        {
            wprintf(L"Failed to allocate memory for pEndingAddresses.\n");
            status = ERROR_OUTOFMEMORY;
            goto cleanup;
        }

        RtlZeroMemory(pParameters, cbBuffer);

        // Allocate an array of DWORDs that will contain the message identifier
        // for each parameter.
        pParameterIDs = (DWORD*)malloc(cbBuffer);
        if (NULL == pParameterIDs)
        {
            wprintf(L"Failed to allocate memory for pParameterIDs.\n");
            status = ERROR_OUTOFMEMORY;
            goto cleanup;
        }

        RtlZeroMemory(pParameterIDs, cbBuffer);

        // Find each parameter in pMessage and get the pointer to the
        // beginning of the insertion string, the end of the insertion string,
        // and the message identifier of the parameter.
        pTempMessage = (LPWSTR)pMessage;
        while (pTempMessage = wcschr(pTempMessage, L'%'))
        {
            if (isdigit(*(pTempMessage+1)))
            {
                pStartingAddresses[i] = pTempMessage;

                pTempMessage++;
                pParameterIDs[i] = (DWORD)_wtoi(pTempMessage);

                while (isdigit(*++pTempMessage))
                    ;

                pEndingAddresses[i] = pTempMessage;

                i++;
            }
        }

        // For each parameter, use the message identifier to get the
        // actual parameter string.
        for (DWORD i = 0; i < dwParameterCount; i++)
        {
            pParameters[i] = GetMessageString(pParameterIDs[i], 0, NULL);
            if (NULL == pParameters[i])
            {
                wprintf(L"GetMessageString could not find parameter string for insert %lu.\n", i);
                status = ERROR_INVALID_PARAMETER;
                goto cleanup;
            }

            cchParameters += wcslen(pParameters[i]);
        }

        // Allocate enough memory for pFinalMessage based on the length of pMessage
        // and the length of each parameter string. The pFinalMessage buffer will contain 
        // the completed parameter substitution.
        pTempMessage = (LPWSTR)pMessage;
        cbBuffer = (wcslen(pMessage) + cchParameters + 1) * sizeof(WCHAR);
        pFinalMessage = (LPWSTR)malloc(cbBuffer);
        if (NULL == pFinalMessage)
        {
            wprintf(L"Failed to allocate memory for pFinalMessage.\n");
            status = ERROR_OUTOFMEMORY;
            goto cleanup;
        }

        RtlZeroMemory(pFinalMessage, cbBuffer);
        cchBuffer = cbBuffer / sizeof(WCHAR);
        pTempFinalMessage = pFinalMessage;

        // Build the final message string.
        for (DWORD i = 0; i < dwParameterCount; i++)
        {
            // Append the segment from pMessage. In the first iteration, this is "8 " and in the
            // second iteration, this is " = 2 ".
            wcsncpy_s(pTempFinalMessage, cchBuffer, pTempMessage, cch = (pStartingAddresses[i] - pTempMessage));
            pTempMessage = pEndingAddresses[i];
            cchBuffer -= cch;

            // Append the parameter string. In the first iteration, this is "quarts" and in the
            // second iteration, this is "gallons"
            pTempFinalMessage += cch;
            wcscpy_s(pTempFinalMessage, cchBuffer, pParameters[i]);
            cchBuffer -= cch = wcslen(pParameters[i]);

            pTempFinalMessage += cch;
        }

        // Append the last segment from pMessage, which is ".".
        wcscpy_s(pTempFinalMessage, cchBuffer, pTempMessage);

    cleanup:

        if (ERROR_SUCCESS != status)
            pFinalMessage = (LPWSTR)pMessage;

        if (pStartingAddresses)
            free(pStartingAddresses);

        if (pEndingAddresses)
            free(pEndingAddresses);

        if (pParameterIDs)
            free(pParameterIDs);

        for (DWORD i = 0; i < dwParameterCount; i++)
        {
            if (pParameters[i])
                LocalFree(pParameters[i]);
        }

        return status;
    }

    // Get a string that contains the time stamp of when the event 
    // was generated.
    void GetTimestamp(const DWORD Time, WCHAR DisplayString[])
    {
        ULONGLONG ullTimeStamp = 0;
        ULONGLONG SecsTo1970 = 116444736000000000;
        SYSTEMTIME st;
        FILETIME ft, ftLocal;

        ullTimeStamp = Int32x32To64(Time, 10000000) + SecsTo1970;
        ft.dwHighDateTime = (DWORD)((ullTimeStamp >> 32) & 0xFFFFFFFF);
        ft.dwLowDateTime = (DWORD)(ullTimeStamp & 0xFFFFFFFF);

        FileTimeToLocalFileTime(&ft, &ftLocal);
        FileTimeToSystemTime(&ftLocal, &st);
        StringCchPrintf(DisplayString, MAX_TIMESTAMP_LEN, L"%d/%d/%d %.2d:%.2d:%.2d", 
            st.wMonth, st.wDay, st.wYear, st.wHour, st.wMinute, st.wSecond);
    } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T14:03:54.613

完全不可能做到。

原因如下：

每个将事件写入 EventLog 的程序都有一个在 HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\services\eventlog 下注册的相应 EventSource。EventSource 键下的 EventMessagFile 值提供了包含事件消息的文件的路径。因此，例如，如果某些自定义程序在该文件中仅提供德语事件消息，那么您从哪里获得英语事件消息？答案不知从何而来，因为开发人员根本无法为其他语言发送事件消息。

对于 Windows，如果您有德语 Windows，但没有英语语言包（Microsoft 的 MUI），Windows 必须从哪里获得翻译？无处。

# c# - WPF ListView 使用代码隐藏更改前景，仅用于一个单元格

> ID：11777155
> 
> 赞同：0
> 
> 时间：2012-08-02T12:11:32.747
> 
> 标签：c#, wpf, listview, code-behind

嗨，我有`listview`两列，“*文件夹*”和“*状态*”。如果“状态”成员的数据为“已锁定”，如何将“*状态*”成员的前景更改为绿色，如果其数据为“*未**锁定*”，如何将其更改为红色。

 *例子

```
Folder    |       Status
----------+--------------------------------------------
xxxx      |       Locked  <--To be appeared as green
yyyyy     |       Unlocked <-- To be appeared as red 
```

对不起，我的英语不好。

编辑： - - - - - - - - - - - - - - - - -

嘿，我尝试了你的解决方案，但我仍然无法让它工作。

看看我做错了什么。

```
<ListView x:Name="FoldersListView" Margin="11,202,8,98" Foreground="Black" Background="#FFFFCFCF" BorderBrush="Transparent" FontWeight="Bold">
        <ListView.View>
            <GridView>
                <GridViewColumn Header="Folder" Width="300" DisplayMemberBinding="{Binding Path = FolderPath}"/>

                <GridViewColumn Header="Status" Width="100" DisplayMemberBinding="{Binding Path = FolderStatus}">
                    <GridViewColumn.CellTemplate>
                        <DataTemplate> 
                            <TextBlock Text="{Binding Path=Locked}"> 
                                <TextBlock.Style> 
                                    <Style TargetType="TextBlock"> 
                                        <Setter Property="Foreground" Value="Red"/> 
                                        <Style.Triggers> 
                                            <DataTrigger Binding="{Binding Path=Locked}" Value="True"> 
                                                  <Setter Property="Foreground" Value="Green"/> 
                                            </DataTrigger> 
                                            <DataTrigger Binding="{Binding Path=Locked}" Value="False"> 
                                                  <Setter Property="Foreground" Value="Red"/> 
                                            </DataTrigger> 
                                        </Style.Triggers> 
                                    </Style> 
                           </TextBlock.Style> 
                          </TextBlock> 
                        </DataTemplate>
                    </GridViewColumn.CellTemplate>
                </GridViewColumn>
            </GridView>
        </ListView.View> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T12:23:41.440

您可以为特定的 CellTemplate 使用触发器

```
<DataTemplate> 
 <TextBlock Text="{Binding Path=Status}"> 
 <TextBlock.Style> 
   <Style TargetType="TextBlock"> 
     <Setter Property="Foreground" Value="Red"/> 
     <Style.Triggers> 
       <DataTrigger Binding="{Binding Path=Locked}" Value="True"> 
          <Setter Property="Foreground" Value="Green"/> 
        </DataTrigger> 
       <DataTrigger Binding="{Binding Path=Locked}" Value="False"> 
          <Setter Property="Foreground" Value="Red"/> 
        </DataTrigger> 
      </Style.Triggers> 
     </Style> 
   </TextBlock.Style> 
  </TextBlock> 
<DataTemplate> 
```

**更新**

我刚刚看到您使用命令式代码询问解决方案。因此，您可以忽略我的答案，这是一种声明性方式的解决方案。

但是请注意，您尝试实现的目标不应在代码中实现，因为它不符合 MVVM 原则*

# android - 来自 Google 的无效身份验证密钥响应

> ID：11777157
> 
> 赞同：0
> 
> 时间：2012-08-02T12:11:43.973
> 
> 标签：android, push-notification, urbanairship.com

我正在使用城市飞艇在android中做一个推送通知的项目但是在发送通知后我收到了这个错误

由于身份验证令牌无效，C2DM 推送到 apid 25cbc337-c3de-4236-b0cc-55806eab 2e8c 失败

请指导我摆脱这个错误

谢谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T12:44:05.517

C2DM 不再发行新代币可能是个问题。您需要更新并开始使用 Google Cloud Messenger (GCM)，因为 Google 已开始弃用 C2DM。

请参阅此处的代码迁移信息：http: [//developer.android.com/guide/google/gcm/c2dm.html](http://developer.android.com/guide/google/gcm/c2dm.html)

# android - 适用于 iOS 的 Android 库/SDK/API，例如文件查看器

> ID：11777158
> 
> 赞同：6
> 
> 时间：2012-08-02T12:11:45.517
> 
> 标签：android, viewer, formats

关于这个主题有很多问题，但没有一个得到正确答案。

总而言之，哪些开箱即用的库/SDK 为构建可以查看的 Android 应用程序提供了完整/可用的代码：doc、docx、xls、xlsx、ppt、pptx 和 PDF？

*   重定向到 Apache POI 不是答案，因为它不提供此功能，仅读取（某些）这些格式，需要显示；
*   重定向到应用商店中的各种应用不是答案：是的，您可以使用意图打开这些应用中的文件格式，但这不在我们自己的应用中；
*   重定向到转换代码不是答案，因为这在 Android 中是不可能的。（doc到html然后到PDF并使用PDF查看器？我只看到部分/错误的答案）；
*   无法使用谷歌文档或其他云解决方案展示，需离线使用；

没有提供本机库的公司，或正在实现此功能的开源项目/应用程序吗？

# mysql - 正确的代码改进

> ID：11777163
> 
> 赞同：-1
> 
> 时间：2012-08-02T12:11:57.123
> 
> 标签：mysql, procedure

有人可以看看我的代码吗，因为我不知道它在 MySQL 中是否可以

```
set @max=concat('select max(length(CommentsId))from', table_name);
    prepare stmt from @max;
    execute stmt;

    set @max=concat('UPDATE', table_name, 'SET CommentsId= ',CommentsId * power(10, (@max - length(CommentsId))),' WHERE CommentsId= ', @CommentsId );
    prepare stmt from @max;
    execute stmt; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T13:25:51.723

`from`在,`UPDATE`和`SET`关键字之前或之后需要空格。

```
set @max=concat('select max(length(CommentsId)) from ', table_name);
prepare stmt from @max;
execute stmt;

set @max=concat('UPDATE ', table_name, ' SET CommentsId= ',CommentsId * power(10, (@max -   length(CommentsId))),' WHERE CommentsId= ', @CommentsId );
prepare stmt from @max;
execute stmt; 
```

# c# - 列表相交返回 null

> ID：11777164
> 
> 赞同：6
> 
> 时间：2012-08-02T12:11:59.560
> 
> 标签：c#, linq, list, fileinfo, intersect

我有两个`List<FileInfo>`，我想返回`FileItem`它们之间的共同点。

```
List<FileInfo> outputList = new List<FileInfo>();
outputList = list1.Intersect(list2).ToList(); 
```

但是，我得到了一个空列表。

两个列表都包含`FileInfo`'s found by

```
System.IO.DirectoryInfo dir = new System.IO.DirectoryInfo(startFolder);
IEnumerable<System.IO.FileInfo> fileList = 
dir.GetFiles("*.*", System.IO.SearchOption.AllDirectories); 
```

并按查询过滤。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T12:16:29.653

我怀疑这`FileInfo`不会覆盖`Equals`/ `GetHashCode`，因此即使两个不同的对象引用同一个文件，它们也将是不相等的。三个选项：

*   如果您不需要将列表转换为路径`FileInfo`
*   创建一个`IEqualityComparer<FileInfo>`并将其传递给`Intersect`
*   以与[MoreLINQ](http://morelinq.googlecode.com)`IntersectBy`相同的风格实现，并将其作为项目的补丁提出来 :)（我以为我们已经有了它，但显然没有......）`DistinctBy`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T12:15:23.167

对两个列表中对象的*引用*`FileInfo`将不同，因此`Intersect`会生成一个空列表。

您需要创建一个实现[`IEqualityComparer<FileInfo>`](http://msdn.microsoft.com/en-us/library/ms132151.aspx)接口的类并将该类的实例传递给以`Intersect`获得您期望的结果。

# jquery - jQuery Draggable，可以使用左侧吗？

> ID：11777165
> 
> 赞同：4
> 
> 时间：2012-08-02T12:12:01.070
> 
> 标签：jquery, jquery-ui, jquery-ui-draggable, jquery-ui-droppable

我有一个网格，可以将可拖动的对象拖放到网格上。可拖动对象通常比网格大。

我的问题是，当一个对象被丢弃时，它使用对象的中心来确定它被丢弃的位置。为了使对齐正确，我希望它根据对象的左侧而不是中心来计算它被丢弃的位置。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T08:13:22.777

我已经通过将其添加到可拖动：cursorAt：{left：0}，并将其添加到可放置：容差：“指针”来解决这个问题。这使光标决定使用哪个 droppable 而不是 div 的中心，并且通过将光标放在左侧，我可以特定于一个精确的网格项目。

# c# - 向打开新表单的控件添加新属性？

> ID：11777166
> 
> 赞同：3
> 
> 时间：2012-08-02T12:12:05.563
> 
> 标签：c#, activereports

我们有一个使用 Active Reports 的报表设计器项目。我们想使用 Active Reports 的 SubReport 工具。子报表控件具有填充子报表的 ActiveReport 内容的“报告”属性。由于我们有一个设计器项目和一个 SubReport 工具，我想向 SubReport 控件添加一个属性，该属性会打开一个新表单，使用户能够从列表中选择一个报表并将报表加载到 SubReport 控件中。

那么如何将属性添加到打开新窗口窗体的控件中呢？

这是我设置属性的方式：

```
public class SubReportProp
{
    private DataDynamics.ActiveReports.SubReport _SubReport;

    public SubReportProp(DataDynamics.ActiveReports.SubReport subReport, List<string> fieldCollection)
    {
        this._SubReport = subReport;

        if (fieldCollection != null && fieldCollection.Count > 0)
        {
            FieldVars._DataFields = fieldCollection;
        }
    }

    [DisplayName("X")]
    [Description("Kontrolün yatay konumunu getirir veya ayarlar.")]
    [Category("Konum")]
    public float X
    {
        get
        {
            return SharedProp.TrimFloatValue(ActiveReport.InchToCm(_SubReport.Location.X));
        }
        set
        {
            _SubReport.Location = new PointF(ActiveReport.CmToInch(value), _SubReport.Location.Y);
        }
    }

    [DisplayName("Y")]
    [Description("Kontrolün dikey konumunu getirir veya ayarlar.")]
    [Category("Konum")]
    public float Y
    {
        get
        {
            return SharedProp.TrimFloatValue(ActiveReport.InchToCm(_SubReport.Location.Y));
        }
        set
        {
            _SubReport.Location = new PointF(_SubReport.Location.X, ActiveReport.CmToInch(value));
        }
    }
} 
```

像这些 x、y 坐标一样，我还需要添加另一个属性，使用户能够从列表中选择报告并应用于 _SubReport.Report

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T14:31:42.650

[http://blogs.gcpowertools.co.in/2011/11/showcase-enhance-end-user-designer.html#more](http://blogs.gcpowertools.co.in/2011/11/showcase-enhance-end-user-designer.html#more)

我想你应该看看这个博客。它完全符合您的要求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T15:22:50.207

忽必烈

报告布局可以保存到流中。您可以将其作为 blob/byte 数组保存到数据库中。如果可能，您还可以将报告以 xml 格式保存为文本。这是使用 ActiveReport 的 SaveLayout API 完成的。

然后可以使用 LoadLayout API 重新加载此报告。

# javascript - jQuery无限垂直循环像老虎机

> ID：11777172
> 
> 赞同：0
> 
> 时间：2012-08-02T12:13:05.797
> 
> 标签：javascript, jquery, css

我正在用 jQuery 制作简单的垂直循环动画，我现在被困在中间。

我首先要实现的是制作一个垂直的无限循环动画，就像老虎机一样，由START按钮触发。（这次不需要STOP按钮）。这是我的例子。 [http://jsfiddle.net/nori2tae/qWM56/](http://jsfiddle.net/nori2tae/qWM56/)

（我不是 javascript 专家，从其他来源拼凑这些代码，所以请放轻松。）

其次，我想复制这个块两次，让它们像老虎机一样并排对齐。

需要一点帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T14:20:14.980

我使用了 alphanyx 的版本，将“last”类添加到最后一个 div 以使其同步：

[http://jsfiddle.net/Bn7Kq/6/](http://jsfiddle.net/Bn7Kq/6/)

# c# - 图表中的 Y 轴标题

> ID：11777173
> 
> 赞同：0
> 
> 时间：2012-08-02T12:13:06.210
> 
> 标签：c#, wpf

我正在创建一个图表作为 WPF 中的用户控件。对于 Y 轴标题，我添加了一个文本框。它以垂直方向显示。用户可以编辑标题。单击文本框时，它应该在图表绘图区域上以水平方向呈现。用户输入文本后，它应该是默认的垂直方向。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T14:43:17.660

您可以旋转焦点样式您的文本框。就像是

```
<Style TargetType="{x:Type TextBox}">
                <Setter Property="RenderTransform">
                    <Setter.Value>
                        <RotateTransform Angle="-90"></RotateTransform>
                    </Setter.Value>
                </Setter>
                <Style.Triggers>
                    <Trigger Property="IsFocused" Value="True">
                        <Setter Property="RenderTransform">
                            <Setter.Value>
                                <RotateTransform Angle="0"></RotateTransform>
                            </Setter.Value>
                        </Setter>
                    </Trigger>
                </Style.Triggers>
            </Style> 
```

# javascript - JavaScript 功能上的谷歌地图

> ID：11777176
> 
> 赞同：0
> 
> 时间：2012-08-02T12:13:10.127
> 
> 标签：javascript, google-maps-api-3

我想在asp.net按钮点击事件上运行这个JavaScript函数。但是当我点击按钮时地图没有被加载。这是我的代码。请帮助我。

```
<script type="text/javascript"
    src="http://maps.google.com/maps/api/js?sensor=false">
  </script> 
```

//这是我的 JavaScript 函数

```
<script type="text/javascript">
    var map;
    var layerl0;
    function initializes() 
    {
      map = new google.maps.Map(document.getElementById('map-canvas'), {
        center: new google.maps.LatLng(16.003575733881323, 81.298828125),
        zoom: 5,
        mapTypeId: google.maps.MapTypeId.HYBRID
      });
      layerl0 = new google.maps.FusionTablesLayer({
        query: {
          select: "'geometry'",
          from: '4757916',
          where: "Address='kerala'"
        },
        map: map
      });
    }
  </script> 
```

// 这是asp.net代码

```
<body>
    <form id="form1" runat="server">
    <div>
    <div>
    <div id="map-canvas" style="height: 421px"></div>
    </div>
    <asp:Button ID="Button1" OnClientClick="initializes()" runat="server" Text="Button" />
    </div>
    </form>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T13:14:12.663

从我上面的评论中复制：

> 我假设该按钮导致回发发生，从而阻止 JS 在客户端浏览器中运行。使用标准 html 按钮或输入 type=button 元素而不是 asp:Button。如果您使用它的只是客户端交互，那只会让人头疼

还有一个小提琴：http: [//jsfiddle.net/qbjAD/](http://jsfiddle.net/qbjAD/)

# android - MapView 非常慢，地图上有 1000 个覆盖项，即使只有 2 个可见项

> ID：11777177
> 
> 赞同：2
> 
> 时间：2012-08-02T12:13:11.180
> 
> 标签：android, android-mapview, itemizedoverlay, overlayitem

我有一个地图视图，在地图视图上显示 1000 个覆盖项。即使地图上只有两个覆盖项可见，地图也移动得很慢（应用了巨大的缩放）

如果只有少量的覆盖项可见，是否可以优化地图视图以更快地移动？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T12:23:52.557

你可能掉进了通常的坑里。如果您制作了自己的 customoverlay，请确保您的 addOverlay 方法不会填充。填充应在添加所有叠加层后首先发生。如果您每次添加时都进行填充，您最终会得到许多叠加层。

确保它为此过程使用 2 种方法，1 种用于添加，1 种用于填充：

public void addOverlay(CustomOverlayItem overlay) { mOverlays.add(overlay); }

公共无效填充覆盖（）{填充（）；}

**如果这不是问题，**那么您应该考虑在它们超出屏幕范围时动态删除引脚或将引脚分组在一起。我相信有一些开源项目已经为您完成了这方面的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T17:28:20.473

找到一个链接[http://onthefencedevelopment.com/blog/using-google-maps-your-android-applications-%E2%80%93-part-3-adding-place-markers](http://onthefencedevelopment.com/blog/using-google-maps-your-android-applications-%E2%80%93-part-3-adding-place-markers)仅绘制屏幕上的叠加层. 尚未对其进行测试，但似乎很有希望。

编辑：它有效

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T13:02:13.503

子类 MapView，覆盖 dispatchDraw()。检测地图中心或缩放级别的变化：

```
@Override
public void dispatchDraw(Canvas canvas)
{
    super.dispatchDraw(canvas);

    GeoPoint gpCenterPoint = getMapCenter();
    int nZoomLevel = getZoomLevel();

    // either diff't zoom level or change to center point?
    if ( (gpCenterPoint.getLatitudeE6() != mCenterPoint.getLatitudeE6()) ||
         (gpCenterPoint.getLongitudeE6() != mCenterPoint.getLongitudeE6()) ||
         (nZoomLevel != mZoomLevel) )
    {
        // update pins here
                  updatePINS();

        mZoomLevel = nZoomLevel;
            mCenterPoint = gpCenterPoint;
    }
}

void updatePINS()
{
    int nLatitudeSpan = mapView.getLatitudeSpan();
    int nLongitudeSpan = mapView.getLatitudeSpan();

     // TODO insert/remove PINS as needed
} 
```

# class - Why "case class" doesn't need "new" to create a new object

> ID：11777199
> 
> 赞同：18
> 
> 时间：2012-08-02T12:14:50.693
> 
> 标签：class, scala, case

In Scala what is the reason that you don't need to use "new" to create a new "case class"? I tried searching for awhile now without answers.

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-08-02T12:32:23.493

Do you want the *how* or the *why*? As the other answer notes, the *how* is just the `apply` method on the automatically generated companion object.

For the *why*: case classes are often used to implement [algebraic data types](http://en.wikipedia.org/wiki/Algebraic_data_type) in Scala, and the `new`-less constructor allows code that is more elegant (creating a value looks more like deconstructing it via pattern matching, for example) and that more closely resembles ADT syntax in other languages.

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-02T12:17:29.450

Case class has prebuilt companion object with `apply()` implemented. Someone even complains about this: [How to override apply in a case class companion](https://stackoverflow.com/questions/5827510/how-to-override-apply-in-a-case-class-companion) :)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-12-18T11:26:42.453

Case classes provide you with an **automatically generated** `apply` function on their companion object that you can use like a constructor.

In **Scala** decompiled byte code you will find `apply` function created as the following :

```
object Person {
def apply(name: String, age: Integer): Person = new Person(name,age)
} 
```

**Example :**

```
case class Person(name: String, age: Integer) 
```

The following three all do the same thing.

```
val p0 = new Person("Frank", 23) // normal constructor

val p1 = Person("Frank", 23) // this uses apply

val p2 = Person.apply("Frank", 23) // using apply manually 
```

So if you use `val p1 = Person("Frank", 23)` **it is not a constructor**, this a method that call apply method.

Please read [scala-object-apply-functions](https://blog.matthewrathbone.com/2017/03/06/scala-object-apply-functions.html) for more info.

# php - HMVC 模块数组 Codeigniter

> ID：11777205
> 
> 赞同：0
> 
> 时间：2012-08-02T12:15:07.953
> 
> 标签：php, mysql, codeigniter

我的配置中有数组，我将其用于 foreach。它工作正常，但我如何从任何模块获取参数。例如，我希望参数 1 为自定义/自定义/索引。

谢谢你的回复

```
$config['modules'] = array('calendar/calendar/index','randphoto/randphoto/index','feedback/feedback/index','survey/survey/index','custom/custom/index');

foreach ($this->config->item('modules') as $key) {
        echo Modules::run($key);
      } 
```

如果我单独尝试，它可以正常工作，但我希望它在数组回显中`Modules::run('custom/custom/index', 1);`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T15:03:42.967

使用`$this->uri->segment(3);`这将为您提供来自 URL 的第三个参数。有关更多信息，请阅读用户指南

[http://ellislab.com/codeigniter/user-guide/libraries/uri.html](http://ellislab.com/codeigniter/user-guide/libraries/uri.html)

# sencha-touch-2 - iconCls 不工作选项卡面板栏位置是顶部

> ID：11777206
> 
> 赞同：1
> 
> 时间：2012-08-02T12:15:08.760
> 
> 标签：sencha-touch-2, tabbar, tabpanel

当标签栏位置在 sencha touch 2 顶部时，为什么 iconCls 在标签面板栏中不起作用？

当标签栏位置为底部时，它工作正常。为什么当标签栏位置在顶部时它不起作用？

```
 Ext.create('Ext.TabPanel', {
    fullscreen: true,
    tabBarPosition: 'top',

    defaults: {
        styleHtmlContent: true
    },

    items: [
        {
            title: 'Home',
            iconCls: 'home',
            html: 'Home Screen'
        },
        {
            title: 'Contact',
            iconCls: 'user',
            html: 'Contact Screen'
        }
    ]
}); 
```

上述代码的输出：

![在此处输入图像描述](../Images/4a8d6517a3e80f48c87cd278bcd5296c.png)

```
Ext.create('Ext.TabPanel', {
    fullscreen: true,
    tabBarPosition: 'bottom',

    defaults: {
        styleHtmlContent: true
    },

    items: [
        {
            title: 'Home',
            iconCls: 'home',
            html: 'Home Screen'
        },
        {
            title: 'Contact',
            iconCls: 'user',
            html: 'Contact Screen'
        }
    ]
}); 
```

上述代码的输出：

![在此处输入图像描述](../Images/0777515e4626ea6ae82a4781f29b2561.png)

为什么它不能在最高位置工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T17:47:55.707

这是 Sencha Touch 框架类中定义的方式。

如果你想要你的方式，只需覆盖它们:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-15T09:24:12.553

他们是这样设计的。。

在他们看来，如果选项卡面板位于屏幕底部，它可能看起来不错，但如果它位于屏幕顶部，则它与图标不匹配。

话虽如此，我有点同意该决定，但如果您坚持不这样做，也许您可​​以尝试将按钮添加为选项卡面板的项目并将图标放在按钮内

# php - 在php中连接表单

> ID：11777208
> 
> 赞同：-1
> 
> 时间：2012-08-02T12:15:16.720
> 
> 标签：php, html, sql

我有一个表格，其中包含 , , 等详细信息`name`……`number`我`email`有 3 个这样的表格。

所以我创建了一个名为的文件，该文件`form.php`具有表单，并将其包含在我的页面中。

每个表格都有一些其他表格没有的细节，例如：

*   一种形式有插槽数，而另 2 种没有。

我在每个页面中以不同的方式明确添加了表单的不常见部分作为表单。

现在我有 2 个提交按钮。那么如何避免两个按钮并将两个表单连接为完整表单中的数据？它必须添加到单个表中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T12:28:02.043

在前 2 个表单中使用 $_SESSION 将数据获取到第 3 个表单。 [http://php.net/manual/en/reserved.variables.session.php](http://php.net/manual/en/reserved.variables.session.php)

然后以第三种形式从会话中检索数据并将其放置为隐藏字段。

然后最后一个表单上的提交按钮将提交所有数据，即来自第三个表单的字段以及前两个表单携带的数据。

# java - Eclipse：项目版本作为多个文件中的参数

> ID：11777219
> 
> 赞同：1
> 
> 时间：2012-08-02T12:15:54.790
> 
> 标签：java, eclipse, version-control

我正在开发一个使用版本控制的项目：

1.  在 POM 文件中输入版本名称

2.  它也用作`to-be-created .msi`文件名的一部分：`file_[version].msi`

3.  它用于服务名称，在安装此项目后，`.msi` 这些参数保存在如下位置：

    a)`.properties`文件作为`Spring param: version=0340`

    b) 在 pom.xml 中`<package-version>0340</package-version>`

    c) 作为`<filename><version>.wxs`文件，由`build.xml`

    d）也在上述`.wxs`文件中作为`MsiProductVersion = "3.4.0"`（注意点）

有没有办法在其他`config`文件中定义一个参数，用适当的数据填充这些文件，以便只将版本保存在一个地方。现在很容易忽略一个`param`，并构建一个`340.msi`将显示`330 Service`为它的名称。我觉得这很困难，因为并非所有文件都属于一个模型（如`Spring`）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T12:34:07.130

您可以配置 Maven 以替换资源中的“变量”。将此添加到您的 POM：

```
<build>
    <resources>
        <resource>
            <directory>src/main/resources</directory>
            <filtering>true</filtering>
        </resource>
        <resource>
            <directory>src/test/resources</directory>
            <filtering>true</filtering>
        </resource>
    </resources>
    ...
</build> 
```

现在您可以使用`${project.version}`它了，它将被以下所有文件中的 POM 版本替换`src/main/resources`为`src/test/resources`.

至于其他文件，您可以[在您的 POM 中使用嵌入式 Ant 任务](https://maven.apache.org/plugins/maven-antrun-plugin/)，也可以编写一个小脚本（Ant、bash，无论您喜欢什么）来读取 POM 并从模板创建其他三个文件。

另一种选择是编写一个单元测试来读取所有文件并确保它们包含正确的值。这样，版本不会自动更新，但是a）版本不会经常更改（这可能会导致您的问题）和b）测试比您在脚本中可以做的要强大得多（他们可以，例如，读取和更新二进制文件）。

# java - Java 应用程序在 getOutputStream() 处终止

> ID：11777230
> 
> 赞同：0
> 
> 时间：2012-08-02T12:16:40.500
> 
> 标签：java, android, outputstream

我正在为我们的 Android 设备创建一个应用程序。本节的目的是将用户名和密码（目前只是作为字符串分配）发布到 Web 服务并接收登录令牌。运行代码时，在 getOutputStream() 行，我的代码将终止并且不会再有任何进展。

我已经分配了 android 模拟器 GSM 访问权限，并在 Eclipse 中设置了代理和 DNS 服务器。我现在不知道该去哪里！

这是在我的 onHandleIntent() 中：

```
protected void onHandleIntent(Intent i) {
    try{

        HttpURLConnection http_conn = (HttpURLConnection) new URL("http://www.XXXXX.com").openConnection();

        http_conn.setRequestMethod("POST");
        http_conn.setDoInput(true); 
        http_conn.setDoOutput(true); 
        http_conn.setRequestProperty("Content-type", "application/json; charset=utf-8"); 

        String login = URLEncoder.encode("XXXXX", "UTF-8") + "=" + URLEncoder.encode("XX", "UTF-8");
        login += "&" + URLEncoder.encode("XXXXX", "UTF-8") + "=" + URLEncoder.encode("XX", "UTF-8");

        OutputStreamWriter wr = new OutputStreamWriter(http_conn.getOutputStream());
        //TERMINATES HERE
        wr.write(login);
        wr.flush();

        BufferedReader rd = new BufferedReader(new InputStreamReader(http_conn.getInputStream()));
        String line = rd.toString();

        wr.close();
        rd.close();

        http_conn.disconnect();
        }
        catch (IOException e){
        }
} 
```

这是我第一次接触 java 并且只写了几天，所以如果我错过了一些明显的东西，请多多包涵。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T12:27:01.403

```
String line = rd.toString(); 
```

应该

```
String line = rd.readLine(); 
```

这可能会奏效。`rd.toString()`给你一个字符串表示你的`BufferedReader`. 它不会触发 HTTP 操作。我没有测试你的代码，所以可能还有其他错误，这只是一个明显的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T12:22:16.627

如果您想使用 HTTP 发布内容，为什么不使用 HTTP POST？;-)

这是一个示例片段：

```
public void postData() {
    // Create a new HttpClient and Post Header
    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost("http://www.yoursite.com/script.php");

    try {
        // Add your data
        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
        nameValuePairs.add(new BasicNameValuePair("id", "12345"));
        nameValuePairs.add(new BasicNameValuePair("stringdata", "AndDev is Cool!"));
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

        // Execute HTTP Post Request
        HttpResponse response = httpclient.execute(httppost);

    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
    } catch (IOException e) {
        // TODO Auto-generated catch block
    }
} 
```

来源：[http ://www.androidsnippets.com/executing-a-http-post-request-with-httpclient](http://www.androidsnippets.com/executing-a-http-post-request-with-httpclient)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T12:23:18.180

这可能不是正确的答案，但肯定会对您有所帮助。我已使用此代码向 Web 服务发送和接收请求并回复响应。

此代码正在运行，但需要一些`Refactoring`，因为我使用了一些不需要的额外变量。

我已经用`NameValuePair`这里的帖子

```
public String postData(String url, String xmlQuery) {

        final String urlStr = url;
        final String xmlStr = xmlQuery;
        final StringBuilder sb  = new StringBuilder();

        Thread t1 = new Thread(new Runnable() {

            public void run() {

                HttpClient httpclient = new DefaultHttpClient();

                HttpPost httppost = new HttpPost(urlStr);

                try {

                    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(
                            1);
                    nameValuePairs.add(new BasicNameValuePair("xml", xmlStr));

                    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

                    HttpResponse response = httpclient.execute(httppost);

                    Log.d("Vivek", response.toString());

                    HttpEntity entity = response.getEntity();
                    InputStream i = entity.getContent();

                    Log.d("Vivek", i.toString());
                    InputStreamReader isr = new InputStreamReader(i);

                    BufferedReader br = new BufferedReader(isr);

                    String s = null;

                    while ((s = br.readLine()) != null) {

                        Log.d("YumZing", s);
                        sb.append(s);
                    }

                    Log.d("Check Now",sb+"");

                } catch (ClientProtocolException e) {

                    e.printStackTrace();
                } catch (IOException e) {
                    e.printStackTrace();
                } /*
                 * catch (ParserConfigurationException e) { // TODO
                 * Auto-generated catch block e.printStackTrace(); } catch
                 * (SAXException e) { // TODO Auto-generated catch block
                 * e.printStackTrace(); }
                 */
            }

        });

        t1.start();
        try {
            t1.join();
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        System.out.println("Getting from Post Data Method "+sb.toString());

        return sb.toString();
    } 
```

# c# - 测试一个长时间运行的进程

> ID：11777231
> 
> 赞同：0
> 
> 时间：2012-08-02T12:16:55.610
> 
> 标签：c#, unit-testing

我有一个需要测试的耗时操作。该操作对数据库进行更改。目前，我的大部分测试都非常相似，都是对数据库进行查询，以确定操作后的预期结果。然后，运行被测操作。最后，再次查询数据库以确定是否满足预期条件。由于我只是在每次测试中查询数据库以确定预期和实际结果，并且被测函数始终对数据库执行相同的操作。有没有一种方法可以让我运行一次操作并且仍然在自己的测试中测试每个条件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T12:29:43.373

对具有副作用的代码（例如连接到数据库）运行单元测试的标准策略是提供模拟对象而不是真正的数据库连接或其他服务，但这取决于您的代码的结构，这可能更难或更容易采用.

控制反转和依赖注入的框架对于这种目的非常有帮助。依赖注入模式确保对象可以在运行时将依赖实现传递给它们，而不是直接构造它们，用于测试目的或只是为了创建更多模块化代码。[StructureMap](http://docs.structuremap.net/)就是这样的 C# 框架，但还有其他框架，例如 Spring.NET。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T12:28:53.383

听起来您想使用单元测试框架和/或模拟框架。

作为一般规则，您不应该编写额外的查询来测试查询在数据库上是否按预期工作，因为这些本身将需要开发和测试。

根据您正在写入的数据库，您可能能够获取数据库上受影响的行数（查看 SQL Server 的@@rowcount）。但是同样，您添加额外的代码只是为了进行测试，这应该是一个单独的活动。

# vba - 2个工作表中的VBA Excel单列比较

> ID：11777235
> 
> 赞同：0
> 
> 时间：2012-08-02T12:17:08.343
> 
> 标签：vba, comparison

我是 VBA 新手，我需要一些帮助来完成我的需求。我有 2 个工作表。一个工作表将具有根据用户输入而变化的整数。（B 列工作表 1）。另一个工作表将具有从 1 到 255 的常数整数，每次 256 次。（在 B-Sheet 2-256 列 1's,256-2's.. ..)（即总共65280个细胞）。我需要比较两个工作表中的两个 B 列并将结果写入 D-Sheet 2 列。如果两个工作表中的两个列值都匹配，则结果列应该等于 B 列 sheet2。如果没有，结果列应该有 0。我该怎么做？

听到的单元格比较将花费更多时间进行大输入。有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T12:49:43.720

您实际上不需要为此使用 VBA。

您可以使用以下命令创建函数：`VLOOKUP`

> 在表数组的第一列中搜索值，并从表数组的另一列返回同一行中的值。

示例：

```
=IF(ISERROR(VLOOKUP(Sheet1!A1;Sheet2!A1:A15;1;0))=TRUE;0;Sheet1!A1) 
```

[http://office.microsoft.com/en-us/excel-help/vlookup-HP005209335.aspx](http://office.microsoft.com/en-us/excel-help/vlookup-HP005209335.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T12:57:57.310

为此，您可以遍历所有行并比较每行的单元格并写入结果。这是代码：

```
 Public FirstSheetName As String
Public SecondSheetName As String
Public ResultSheetName As String
Public FirstSheetCol As String
Public SecondSheetCol As String
Public ResultSheetCol As String
Public StartIndex As Long
Public EndIndex As Long
Public Sub CompareTwoCols()
Dim i As Long
Dim ii As Long
FirstSheetName = "Sheet1"
FirstSheetCol = "B"
SecondSheetName = "Sheet2"
SecondSheetCol = "B"
ResultSheetName = "Sheet2"
ResultSheetCol = "D"
StartIndex = 1
EndIndex = 65280
'Initialized result with 0's
For i = StartIndex To EndIndex
If Sheets(SecondSheetName).Range(SecondSheetCol & i).Text <> "" Then
    Sheets(ResultSheetName).Range(ResultSheetCol & i).Formula = 0
End If
Next i
'Loop throuh all first sheet items skip if blank
For ii = StartIndex To EndIndex
If Sheets(FirstSheetName).Range(FirstSheetCol & ii).Text <> "" Then
'Loop through all second sheet items
    For i = StartIndex To EndIndex
    'skip if blank or has a value in it
    If Sheets(SecondSheetName).Range(SecondSheetCol & i).Text <> "" _
    And Sheets(ResultSheetName).Range(ResultSheetCol & i).Text = "0" Then
        If Sheets(FirstSheetName).Range(FirstSheetCol & ii).Value = Sheets(SecondSheetName).Range(SecondSheetCol & i) Then
            ' Match Found
            Sheets(ResultSheetName).Range(ResultSheetCol & i).Formula = ThisWorkbook.Sheets(SecondSheetName).Range(SecondSheetCol & i)
        End If
    End If
    Next i
End If
Next ii
End Sub 
```

只需将 FirstSheetName、SecondSheetName 和 ResultSheetName 设置为适用的工作表。然后，设置 FirstSheetCol、SecondSheetCol 和 ResultSheetCol。最后将 StartIndex 设置为第一行，将结束索引设置为 LastRow。我希望它有帮助，迈克

# r - 轴以 0 为中心的散点图看起来像“十字准线”

> ID：11777236
> 
> 赞同：2
> 
> 时间：2012-08-02T12:17:09.560
> 
> 标签：r, plot, scatter-plot

我想为包含正值和负值的数据集制作散点图。我对 plot() 非常熟悉，但我找不到将轴移动到绘图中心的任何选项，即在零处。我希望情节看起来像“十字准线”。

我知道如何关闭plot() 中的轴，即xaxt = "N"，并且我了解如何使用axis()。我找不到任何选项或示例可以使轴在图的中间以零为中心。似乎没有必要使用 abline() 创建线条和刻度线。

您能否指出我可以与 plot() 一起使用来实现此目标的命令、技巧或包？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-02T12:38:19.900

你需要`axis`命令。在帮助中查找。您可以垂直放置 x 轴，水平放置 y 轴。

这是一个小例子。

```
plot(c(-2,2), c(-2,2), axes = FALSE, bty = 'n', panel.first = grid())
axis(1, c(-2, -1, 1, 2), pos = 0, cex.axis = 0.8)
axis(2, c(-2, -1, 1, 2), pos = 0, cex.axis = 0.8, las = 2) 
```

# css - Struts 2 磁贴的滚动条

> ID：11777237
> 
> 赞同：0
> 
> 时间：2012-08-02T12:17:12.710
> 
> 标签：css, struts2

我正在使用 Struts 瓷砖。我有一个标题、菜单和正文。我只想为菜单部分设置滚动条。我正在为整个页面获取滚动条，但只希望它用于菜单部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T14:20:29.370

听起来你想要的是一个可滚动的 div。查看 w3schools 提供的以下链接，该链接提供了此问题的代码和示例。

[w3schools 的 CSS 解决方案](http://www.w3schools.com/cssref/pr_pos_overflow.asp)

[示例，您可以修改，由 w3schools](http://www.w3schools.com/cssref/tryit.asp?filename=trycss_overflow)

在示例中，尝试将 div 的宽度更改为 100% 而不是 100px，使其成为页面的整个宽度。

# sharepoint - 如何使共享点列表标题显示为默认列值

> ID：11777239
> 
> 赞同：0
> 
> 时间：2012-08-02T12:17:27.970
> 
> 标签：sharepoint, sharepoint-2010

我正在尝试获取日历标题，并在有人尝试添加新事件时让它显示为默认列值。有没有办法在 SharePoint 中做到这一点，如果有，怎么做？

谢谢大家的帮助。

幸运的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T04:56:40.447

**快速解决方案>>**当您更改日历的标题时，请同时设置该列的默认值。

**正确的解决方案>>**为日历创建一个事件接收器，并在 ItemAdding 事件中设置标题的值...应该类似于 item["Title"] = item.ParentList.Title

# c# - 在 C# 中使用像 XVid 这样的视频编解码器

> ID：11777246
> 
> 赞同：2
> 
> 时间：2012-08-02T12:17:40.807
> 
> 标签：c#, directshow, codec, directshow.net

我正在尝试开发一个应用程序，它使用 DirectShow.Net 从网络摄像头捕获一系列图像，然后通过网络将其发送给其他客户端。一切正常，除了图像太大，使用 GZipStream、JPEG 压缩等压缩方法对减小尺寸没有帮助。

现在，我想知道如何使用 XVid 之类的编解码器或任何其他编解码器来减小大小。播放 VisioForge 的演示，它认为 XVid 文件比常规 AVI 文件小。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T13:44:35.287

有特定的视频压缩算法可以有效地压缩视频，其中一些最流行的是：M-JPEG、MPEG-4、H.261、H.263、H.264、VP8、Theora。在 DirectShow 中，视频压缩项具有视频压缩过滤器（或编解码器）的形式因素。标准 Windows 通常不包含太多用于此任务的内容（由于各种原因，专利要特别提及），因此您需要使用第三方或其他可安装的编解码器。幸运的是，编解码器具有或多或少统一的接口，您可以从 C# 中类似地使用它们。

查看包含有用信息的相关问题：

*   [DirectShow 中的实时视频编码](https://stackoverflow.com/questions/3167032/real-time-video-encoding-in-directshow)
*   [使用 DirectShow.NET 库捕获网络摄像头](http://dashingquill.wordpress.com/2012/06/27/capturing-webcam-using-directshow-net-library/)

请务必检查[DirectShow.NET 示例](http://sourceforge.net/projects/directshownet/files/DirectShowSamples/)：

`\Samples\Misc\DxWebCam`

> 一个穷人的网络摄像头程序。此应用程序作为 Win32 服务运行。它获取捕获图的输出，将其转换为 JPEG 文件流，然后通过 TCP/IP 将其发送到客户端应用程序。

`\Samples\Capture\CapWMV`

> 使用 WM ASF Writer 过滤器创建 wmv 文件的 .NET 示例应用程序

# python - Python/numpy 追加数组、转置并保存为 csv

> ID：11777251
> 
> 赞同：1
> 
> 时间：2012-08-02T12:17:51.773
> 
> 标签：python, arrays, list, numpy, transpose

我在做什么：生成一系列长的一维数组。

我想要做什么：追加/连接/vstack/？这些到二维数组中，然后将行保存为 csv 文件中的列。

以下工作，但它并不优雅：

```
rlist=[]                        # create empty list
for i in range(nnn)             # nnn is typically 2000
    (calculate an array "r")
    rlist.append(r)             # append f.p. array to rlist
rarr = array(rlist)             # turn it back into array so I can transpose
numpy.savetxt('test.csv',rarr.T,delimiter=',')  # save rows as columns in csv file 
```

有没有更优雅或蟒蛇式的方式来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T12:56:02.880

如果您提前知道的长度`r`，您可以执行以下操作：`nnn`

```
rarr = np.zeros((r_len, nnn)) # r_len rows, nnn columns
for i in range(nnn):
    rarr[:,i] = r_calc()
numpy.savetxt('test.csv', rarr, delimiter=',') 
```

这会将数据向量直接放入 的行中`rarr`，从而节省您转换为数组和转置的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T13:14:03.153

```
rarr = np.concatenate([get_array(r) for r in xrange(nnn)])
np.savetxt('test.cvs', rarr.T, delimiter=',') 
```

# objective-c - 如何从另一个 viewController 中正确删除 pin

> ID：11777259
> 
> 赞同：1
> 
> 时间：2012-08-02T12:18:26.537
> 
> 标签：objective-c, ios, uitableview, uiviewcontroller, mkannotation

到目前为止我所做的是工作，但我想知道这是否是正确的方法。

我有一个显示注释的地图，当按下它时显示一个标注。

显示的下一个视图是表格视图。该表有一个用于删除该注释的按钮。

我在类型的表视图中创建了一个属性`MKMapView`。在点击 callOut 附件时初始化此视图后，我设置了`MKMapView`属性。

在表格视图中按下按钮时，我通过 map 属性删除注释。

这是正确的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T18:32:40.060

而不是直接操作父（地图）控制器视图的控件的详细视图，更“正确”的方法可能是使用委托+协议。

使用地图控制器需要实现的方法定义协议（例如 deleteAnnotation、detailViewDone 等）。

详细视图将具有该协议的委托属性，并通过委托属性调用协议方法，而不是直接访问和修改另一个视图的控件。

地图控制器会将自己设置为详细视图的委托，并实际实现协议方法。

这样，每个控制器/类就不必知道其他控制器/类如何工作的内部细节，并且让您更轻松地更改每个控制器/类的内部工作方式，而不会影响其他控制器中的代码（只要协议不改变）。它提高了封装性和可重用性。

例如，在详细视图 .h 中，定义协议并声明委托属性：

```
@protocol DetailViewControllerDelegate <NSObject>
-(void)deleteAnnotation:(id<MKAnnotation>)annotation;
-(void)detailViewDone;
//could have more methods or change/add parameters as needed
@end

@interface DetailViewController : UIViewController
@property (nonatomic, assign) id<DetailViewControllerDelegate> delegate;
@end 
```

在详细视图 .m 中，无论您在何处处理删除按钮，都应调用委托方法：

```
if ([delegate respondsToSelector:@selector(deleteAnnotation:)])
{
    [delegate deleteAnnotation:annotation];
} 
```

在地图控制器 .h 中，声明它实现了协议并声明了方法：

```
@interface MapViewController : UIViewController<DetailViewControllerDelegate>
-(void)deleteAnnotation:(id<MKAnnotation>)annotation;
-(void)detailViewDone;     
@end 
```

在地图控制器 .m 中，在您创建详细视图的 calloutAccessoryControlTapped 中，设置委托属性而不是地图视图属性：

```
DetailViewController *dvc = [[DetailViewController alloc] init...
dvc.annotation = view.annotation;
dvc.delegate = self;
[self presentModalViewController:dvc animated:YES]; 
```

最后，同样在地图控制器 .m 中，实现委托方法：

```
-(void)deleteAnnotation:(id<MKAnnotation>)annotation
{
    [mapView removeAnnotation:annotation];
    //dismiss the detail view (if that's what you want)...
    [self dismissModalViewControllerAnimated:YES];
} 
```

从文档中，[委托和数据源](http://developer.apple.com/library/ios/#documentation/General/Conceptual/CocoaEncyclopedia/DelegatesandDataSources/DelegatesandDataSources.html#//apple_ref/doc/uid/TP40010810-CH11-SW1)以及[使用委托与其他控制器进行通信](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/ManagingDataFlowBetweenViewControllers/ManagingDataFlowBetweenViewControllers.html#//apple_ref/doc/uid/TP40007457-CH8-SW9)的文章也可能很有用。

# java - 列表项不起作用

> ID：11777263
> 
> 赞同：1
> 
> 时间：2012-08-02T12:18:36.063
> 
> 标签：java, android

我制作了一个简单的列表，当单击 ListItem 时它会调用其他活动，但它对我不起作用。当我点击时，什么都没有出现。怎么了 ？这是代码：

```
 String classes[]={"StartingPoint","Splash", "ex1","ex2"};
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setListAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, classes));
}

@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    // TODO Auto-generated method stub
    super.onListItemClick(l, v, position, id);
    String cheese = classes[position];
    try
    {

        Class ourclass = Class.forName("com.alfred.splashscreenwithsound." + cheese);
        Intent myintent = new Intent(this,ourclass);
        startActivity(myintent);
    }
    catch(ClassNotFoundException e)
    {
        e.printStackTrace();
    }
} 
```

}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T12:39:13.043

我认为你还没有实现 OnItemClickListener

试试下面的代码

```
 //Declare your listView  here
        yourlistView.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View view, int position,
                    long id) {

                 Intent callActivity = new Intent(CurrentActivity.this,NextActivity.class); 
                 startActivity(callActivity);
                 }
            }); 
        } 
```

希望能帮助到你

# jquery - 在jQuery中隐藏包含特定字符串的div

> ID：11777270
> 
> 赞同：5
> 
> 时间：2012-08-02T12:19:01.370
> 
> 标签：jquery, hidden

根据另一个问题尝试了以下内容：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script type="text/javascript" src="jquery-latest.min.js"></script>
<script type="text/javascript">
$("div p:contains('text')").parent('div').hide();
</script>

<title>test</title>
</head>

<body>

<div>
<p>text</p>
</div>

</body>
</html> 
```

但它不起作用。我错过了一些明显的东西吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-02T12:26:38.420

您错过了 document.ready 事件。见[http://api.jquery.com/ready/](http://api.jquery.com/ready/)

```
<script type="text/javascript">
$(document).ready(function () {
   $("div p:contains('text')").parent('div').hide();
});
</script> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-02T12:26:33.653

只有在 DOM 完成加载后，您才需要运行 jQuery 的东西。

```
$(document).ready(function() {
  $("div p:contains('text').parent('div').hide();
}); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-02T12:27:25.473

看起来代码没有问题。

```
$(document).ready(function () {
    $("div p:contains('text')").parent('div').hide();
}); 
```

看看[**这个**](http://jsfiddle.net/ajorpheus/EwpWA/3/)。

**更新**

都来看看**[这个](http://jsfiddle.net/ajorpheus/EwpWA/6/)**。这是上面***的不区分大小写***的版本：

```
// Add the case-insensitive selector
$.expr[":"].containsNoCase = function(el, i, m) {
    var search = m[3];
    if (!search) return false;

    var pattern = new RegExp(search,"i");
    return pattern.test($(el).text());
};

$(document).ready(function() {
    $("div p:containsNoCase('text')").parent('div').hide();
}); 
```

# javascript - 使用 Jquery 显示身体背景图像

> ID：11777271
> 
> 赞同：0
> 
> 时间：2012-08-02T12:19:06.687
> 
> 标签：javascript, jquery, jquery-ui

我必须使用 jquery 显示 jsp 页面的背景图像。图像文件的名称在 Java 类的静态成员中可用。我试过了，在 Java 类（ImageClass）中创建了一个静态成员

```
 public static final String img_file="welcome.png" 
```

在jsp文件中，我导入了这个java类和里面的脚本标签

```
 $(document).ready(function () {
          $('body').css('background-image','url(/resource/'<%=ImageClass.img_file%>')');
         }); 
```

但是图像没有显示出来，我确信图像在上述路径中可用。我做错什么了吗？这是仪式的方式吗？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T12:27:06.243

你写了

```
... ,'url(/resource/'<%=ImageClass.img_file%>')' 
```

试试吧

```
... ,'url(/resource/<%=ImageClass.img_file%>)' 
```

服务器端回显周围没有引号，否则可能会出现js解析错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T12:25:51.880

您的 javascript 就绪功能似乎不完整。添加 ”）;” 在您的代码末尾并尝试。

# javascript - 使用变量来定义宽度和高度

> ID：11777272
> 
> 赞同：-1
> 
> 时间：2012-08-02T12:19:12.487
> 
> 标签：javascript, html

```
var w=300;
var h=300;

function openWin()
{
w=window.open("http://www.google.com","mywin","width=w, height=h,screenX=50,left=50,screenY=50,top=50,status=no,menubar=no");
}

<input type="button" value="Start" onclick="openWin()" /> 
```

* * *

大家好，

我想知道在定义打开的窗口时使用我自己的变量（var w 和 h）。无论我尝试什么组合，宽度和高度属性都不起作用。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T12:21:07.407

您需要使用变量，而不仅仅是将字母扔进去。像这样：

```
var w=300; var h=300;

function openWin()
{ 
 w=window.open("http://www.google.com","mywin","width=" + w + ", height=" + h + ", screenX=50,left=50,screenY=50,top=50,status=no,menubar=no"); 
} 
```

# c++ - Octave 的 QuantLib 绑定 ？

> ID：11777273
> 
> 赞同：1
> 
> 时间：2012-08-02T12:19:14.063
> 
> 标签：c++, octave, quantlib, quantlib-swig

我想使用 Octave 的 QuantLib。

从 QuantLib 网站：

> QuantLib 是用 C++ 编写的，具有干净的对象模型，然后导出为不同的语言，例如 C#、Objective Caml、Java、Perl、Python、GNU R、Ruby 和 Scheme。QuantLibAddin/QuantLibXL 项目使用 ObjectHandler 将面向对象的 QuantLib 接口导出到各种最终用户平台，包括 Microsoft Excel 和 OpenOffice.org Calc。与其他语言的绑定以及向 Gnumeric、Matlab/Octave、S-PLUS/R、Mathematica、COM/CORBA/SOAP 架构、FpML 的移植正在考虑中。

但是，我似乎找不到任何说明如何执行此操作的文档或示例？

Quantlib 是否有 Octave 绑定，有人可以提供一个片段来显示如何在 Octave 中使用 QuantLib（或指向此类片段的链接）吗？

如果找不到任何东西，我正在考虑为此目的在 QuantLib 周围编写 SWIG 包装器 - 但我不想重新发明轮子，如果这已经完成......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T13:08:53.640

你应该已经阅读了整段：

> 与其他语言的绑定以及向 Gnumeric、Matlab/Octave、S-PLUS/R、Mathematica、COM/CORBA/SOAP 架构、FpML 的移植**正在考虑**中。有关详细信息，请参阅[扩展](http://quantlib.org/extensions.shtml)页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T13:11:30.637

您可以查看我为[RQuantLib](http://dirk.eddelbuettel.com/code/rquantlib.html)所做的工作，并使用 Octave 和 QuantLib 都是用 C++ 实现的事实——但您必须为不同的对象模型构建桥梁。

# php - 这个分页类有什么问题？

> ID：11777275
> 
> 赞同：-1
> 
> 时间：2012-08-02T12:19:23.283
> 
> 标签：php, pagination

我正在寻找一个简单的分页脚本，并在[这里](http://net.tutsplus.com/tutorials/php/how-to-paginate-data-with-php/)找到了一个，这似乎工作得很好。

但是，当我点击“2”时，就像在第 2 页中一样，它只显示第 2 页的记录在那些已经存在的下面。所以基本上，如果我点击第 214 页，它仍然会在一页上显示所有记录。

我对 PHP 不是很有经验，所以我无法弄清楚 . 有什么问题`paginator.class.php`，希望这里有人可以。

这是应该进行分页的页面上的代码：

```
else {
$query = "SELECT COUNT(*) FROM products";
$result = mysql_query($query) or die(mysql_error());
$num_rows = mysql_fetch_row($result);
$pages = new Paginator;  
$pages->items_total = $num_rows[0];  
$pages->mid_range = 9;  
$pages->paginate();  

$query1 = "SELECT serial, name, description, price, picture FROM products WHERE serial != '' ORDER BY serial ASC $pages->limit";
$result = mysql_query($query1) or die(mysql_error());
while ($row = mysql_fetch_array($result))
{
echo '<div style="margin-bottom:10px;display:inline-block;background-color:#E3E3E3;width:190px;height:200px;"><a href="'.$_SERVER['PHP_SELF'].'?serial='.$row['serial'].'"><img style="padding-top:10px;padding-left:25px;width:150px;height:150px;" src="'.htmlspecialchars($row['picture']).'"></a><br><div align="center"><b>'.htmlspecialchars($row['name']).'</b><br><h6>&euro;'.htmlspecialchars($row['price']).'</h6></div></div>&nbsp;';
};
echo '&nbsp;';
echo '<br><br><div style="margin-left:330px;">';
echo $pages->display_pages();
echo '</div>';
} 
```

`paginator.class.php`可以在我刚才提到的网站上找到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T12:44:36.403

问题在于您的查询：

```
"SELECT serial, name, description, price, picture FROM products WHERE serial != '' ORDER BY serial ASC $pages->limit" 
```

您需要确定 $pages->limit 的值是多少。在我看来，不是计算应该在每页上显示多少条记录（为了论证的缘故，假设为 10 条），然后确定您在哪个页面上并设置`LIMIT`条件。

它*应该*设置为如下所示：

```
LIMIT 30, 10 
```

这是第 4 页 - 它显示记录 30-40，而不是我怀疑它在做什么，即

```
LIMIT 40 
```

该行将仅显示最多 40 条记录，并且不会关闭窗口的下限。

仅供参考，看看[手册](http://dev.mysql.com/doc/refman/5.0/en/select.html)`SELECT`中的 MySQL语法。

# java - 在 JFrame 或 JPanel 上重新设置 X11 窗口？

> ID：11777277
> 
> 赞同：3
> 
> 时间：2012-08-02T12:19:35.753
> 
> 标签：java, jframe, jpanel, x11, reparenting

为了将 C/C++ X11 应用程序嵌入到另一个 Java 应用程序中，是否可以在以下位置重新设置 X11 顶级小部件：

*   一个 JFrame 或一个 JWindow（使用包 sun.awt.x11 捕获其 X11 对等方的 X11 窗口 ID）？
*   还是JPanel？

我更喜欢用 JPanel 重新父母，但我不确定这是否可能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T14:39:07.190

我搜索并发现：

一个递归函数，它将搜索（从根窗口开始）具有所需名称的窗口

```
Window windowWithName(Display *dpy, Window top, char *name)
{
        Window *children, dummy;
        unsigned int nchildren;
        unsigned int i;
        Window w = 0;
        char *window_name;

        if (XFetchName(dpy, top, &window_name) && !strcmp(window_name, name))
                return (top);

        if (!XQueryTree(dpy, top, &dummy, &dummy, &children, &nchildren))
                return (0);

        for (i = 0; i < nchildren; i++)
        {
                w = windowWithName(dpy, children[i], name);
                if (w)
                        break;
        }
        if (children)
                XFree((char *) children);
        return (w);
} 
```

您可以随时打开一个`java.net.Socket`到**6000**左右的端口并`X11`自己说话。
[可能有帮助的代码](http://www.jcraft.com/jsch/examples/X11Forwarding.java)

[参考](https://stackoverflow.com/questions/1529526/to-create-x-windowx11-in-java-swing-and-to-get-its-id)，希望对您有所帮助注意
**：**包**不再**`sun.awt.x11`存在**`jdk7`**

# sql - 将宏计算结果传递给运行时的推荐方法是什么？

> ID：11777278
> 
> 赞同：9
> 
> 时间：2012-08-02T12:19:37.703
> 
> 标签：sql, scala, macros, compilation

我正在尝试构建一些类似 SQL 的抽象，但遇到了问题。

这是一个简化的“数据库表”：

```
trait Coffee {
  def id: Long
  def name: String
  def brand: String
} 
```

这是我的查询抽象：

```
import language.experimental.macros

object Query {  
  def from[T] = 
    macro QueryMacros.fromMacro[T]
}

class From[T] {  
  def select[S](s: T => S): Select[T] =
    macro QueryMacros.selectMacro[T, S]
}

class Select[T] {
  def where(pred: T => Boolean): Where =
    macro QueryMacros.whereMacro[T]
}

class Where(val result: String) 
```

这是我的宏实现：

```
import scala.reflect.macros.Context

object QueryMacros {
  val result = new StringBuilder

  def fromMacro[T : c.WeakTypeTag](c: Context): c.Expr[From[T]] = { 
    result ++= ("FROM " + c.weakTypeOf[T])
    c.universe.reify(new From[T])
  }

  def selectMacro[T : c.WeakTypeTag, S : c.WeakTypeTag](c: Context)(s: c.Expr[T => S]): c.Expr[Select[T]] = {
    result ++= ("SELECT " + s.tree)
    c.universe.reify(new Select[T])
  }

  def whereMacro[S](c: Context)(pred: c.Expr[S]): c.Expr[Where] = {
    result ++= ("WHERE " + pred.tree)
    c.universe.reify(new Where(result.toString))
  }
} 
```

这是我的示例代码：

```
object Main extends App {
  println("Query start")
  val query = 
    Query.from[Coffee]
         .select(_.id)
         .where(_.brand == "FairTrade")

  println(query.result)
  println("Query end")
} 
```

它编译并运行良好，但输出为：

```
Query start

Query end 
```

基本上，`result`似乎是空的。我希望它能够容纳堆积的树绳。

如何将我的数据从宏编译阶段传递到下一阶段，以便在运行时显示？我当然可以将当前字符串显式传递给下一个方法，但我想避免这种情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T15:06:03.327

基本上，您需要有一个`Queryable`抽象：1) 提供集合 API ( `from`,`select`等)，2) 通过具体化调用并在内部累积它们来记住在其上调用的方法。

这个概念在我们的 ScalaDays 幻灯片 [1] 中有所解释，并在 Slick（开源）[2] 中实现。顺便说一句，在 LINQ 中，它们对`Queryable`具体化调用并将它们提供给实现的对象的方法大致相同`IQueryable`，例如，如 [3] 中所述。

链接：

1.  [http://scalamacros.org/talks/2012-04-18-ScalaDays2012.pdf](http://scalamacros.org/talks/2012-04-18-ScalaDays2012.pdf)
2.  [https://github.com/slick/slick/tree/master/src/main/scala/scala/slick/queryable](https://github.com/slick/slick/tree/master/src/main/scala/scala/slick/queryable)
3.  [http://community.bartdesmet.net/blogs/bart/archive/2007/04/06/the-iqueryable-tales-linq-to-ldap-part-1-key-concepts.aspx](http://community.bartdesmet.net/blogs/bart/archive/2007/04/06/the-iqueryable-tales-linq-to-ldap-part-1-key-concepts.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T13:01:48.170

问题是没有将信息从一个宏调用传递到下一个宏调用。所有这些都发生在编译时，所以应该可以。问题在于最后调用的宏。由于它返回`c.universe.reify(new Where(result.toString))`,`new Where(result.toString)`在运行时被调用。然后`result`将是空的。您可以做的是 return `c.Expr(tree)`，其中`tree`apply`Where`的构造函数应用于`String`包含`result.toString`.

此外，您应该注意，您的代码取决于宏调用的编译顺序。如果您在多个代码文件中多次调用这些宏，则`result`可能包含来自先前调用的信息。最好重新考虑您的整个方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T10:21:45.103

正如@Kim 指出的那样，聚合信息不是问题，而是宏扩展将生成`result.toString`在运行时评估的代码，当它确实为空时。我遇到了和你类似的问题，最后做了等效的`result.toString`替换`resultExpr(c).splice`

```
private def resultExpr(c :Context) = { 
  import c.universe._
   c.Expr[String](Literal(Constant(result.toString)))
} 
```

（正如@Kim 还指出的那样，这会将所有宏调用的累积结果反馈给运行时，所以要小心！）

# objective-c - 在 iOS 中检测 PAN 手势的方向

> ID：11777281
> 
> 赞同：40
> 
> 时间：2012-08-02T12:19:48.733
> 
> 标签：objective-c, ios, cocoa-touch

在我的应用程序中有一个图像视图。我将 PAN 手势添加到该图像视图。

这工作正常。

图像视图处于横向模式。

我想在用户向右平移时增加标签计数，并在用户向左平移时减少该计数。

我用谷歌搜索了很多，但没有找到解决方案。

谁能帮助我如何检测用户平移的方向（左/右）？

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2012-08-02T12:25:23.943

在手势识别器的目标选择器中，使用`- (CGPoint)velocityInView:(UIView *)view;`：

```
- (void)panRecognized:(UIPanGestureRecognizer *)rec
{
    CGPoint vel = [rec velocityInView:self.view];
    if (vel.x > 0)
    {
        // user dragged towards the right
        counter++;
    }
    else
    {
        // user dragged towards the left
        counter--;
    }
} 
```

Ps：直到大约我才知道这种方法。3分钟前。Google 的第一个热门产品是 Apple 官方文档。

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2014-02-04T12:41:42.087

像这样的东西：

```
- (void)pan:(UIPanGestureRecognizer *)sender
{

    typedef NS_ENUM(NSUInteger, UIPanGestureRecognizerDirection) {
        UIPanGestureRecognizerDirectionUndefined,
        UIPanGestureRecognizerDirectionUp,
        UIPanGestureRecognizerDirectionDown,
        UIPanGestureRecognizerDirectionLeft,
        UIPanGestureRecognizerDirectionRight
    };

    static UIPanGestureRecognizerDirection direction = UIPanGestureRecognizerDirectionUndefined;

    switch (sender.state) {

        case UIGestureRecognizerStateBegan: {

            if (direction == UIPanGestureRecognizerDirectionUndefined) {

                CGPoint velocity = [sender velocityInView:recognizer.view];

                BOOL isVerticalGesture = fabs(velocity.y) > fabs(velocity.x);

                if (isVerticalGesture) {
                    if (velocity.y > 0) {
                        direction = UIPanGestureRecognizerDirectionDown;
                    } else {
                        direction = UIPanGestureRecognizerDirectionUp;
                    }
                }

                else {
                    if (velocity.x > 0) {
                        direction = UIPanGestureRecognizerDirectionRight;
                    } else {
                        direction = UIPanGestureRecognizerDirectionLeft;
                    }
                }
            }

            break;
        }

        case UIGestureRecognizerStateChanged: {
            switch (direction) {
                case UIPanGestureRecognizerDirectionUp: {
                    [self handleUpwardsGesture:sender];
                    break;
                }
                case UIPanGestureRecognizerDirectionDown: {
                    [self handleDownwardsGesture:sender];
                    break;
                }
                case UIPanGestureRecognizerDirectionLeft: {
                    [self handleLeftGesture:sender];
                    break;
                }
                case UIPanGestureRecognizerDirectionRight: {
                    [self handleRightGesture:sender];
                    break;
                }
                default: {
                    break;
                }
            }
        }

        case UIGestureRecognizerStateEnded: {
            direction = UIPanGestureRecognizerDirectionUndefined;   
            break;
        }

        default:
            break;
    }

}

- (void)handleUpwardsGesture:(UIPanGestureRecognizer *)sender
{
    NSLog(@"Up");
}

- (void)handleDownwardsGesture:(UIPanGestureRecognizer *)sender
{
    NSLog(@"Down");
}

- (void)handleLeftGesture:(UIPanGestureRecognizer *)sender
{
    NSLog(@"Left");
}

- (void)handleRightGesture:(UIPanGestureRecognizer *)sender
{
    NSLog(@"Right");
} 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2016-06-08T09:21:00.827

**我之前在 Swift 中的回答**

```
public enum Direction: Int {
    case Up
    case Down
    case Left
    case Right

    public var isX: Bool { return self == .Left || self == .Right }
    public var isY: Bool { return !isX }
}

public extension UIPanGestureRecognizer {

    public var direction: Direction? {
        let velocity = velocityInView(view)
        let vertical = fabs(velocity.y) > fabs(velocity.x)
        switch (vertical, velocity.x, velocity.y) {
        case (true, _, let y) where y < 0: return .Up
        case (true, _, let y) where y > 0: return .Down
        case (false, let x, _) where x > 0: return .Right
        case (false, let x, _) where x < 0: return .Left
        default: return nil
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2017-04-12T20:13:56.133

这是一个清理过的 Swift 5 版本，带有使用示例：

```
public enum PanDirection: Int {
    case up, down, left, right
    public var isVertical: Bool { return [.up, .down].contains(self) }
    public var isHorizontal: Bool { return !isVertical }
}

public extension UIPanGestureRecognizer {

   var direction: PanDirection? {
        let velocity = self.velocity(in: view)
        let isVertical = abs(velocity.y) > abs(velocity.x)
        switch (isVertical, velocity.x, velocity.y) {
        case (true, _, let y) where y < 0: return .up
        case (true, _, let y) where y > 0: return .down
        case (false, let x, _) where x > 0: return .right
        case (false, let x, _) where x < 0: return .left
        default: return nil
        }
    }

}

@IBAction func pan(_ recognizer: UIPanGestureRecognizer) {        
    if let direction = recognizer.direction {
        if direction.isVertical {
            //do what you want when pan is vertical
        } else if direction == .left {
            //do what you want when pan is left
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-03-27T15:03:56.597

在 Swift 3 上重写 Adam Waite 版本

```
public enum PanDirection: Int {
    case up,
    down,
    left,
    right

    public var isX: Bool {
        return self == .left || self == .right
    }

    public var isY: Bool {
        return !isX
    }
}

extension UIPanGestureRecognizer {
    var direction: PanDirection? {
        let velocity = self.velocity(in: view)
        let vertical = fabs(velocity.y) > fabs(velocity.x)
        switch (vertical, velocity.x, velocity.y) {
        case (true, _, let y):
            return y < 0 ? .up : .down

        case (false, let x, _):
            return x > 0 ? .right : .left
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-07-09T07:58:39.000

请注意，上面的 Adam 的 Swift 版本有一个错误。如果 y < 0 应该返回 .up ，如果 y > 0 应该返回 .down （它们是相反的）。

所以：

```
//MARK: - Direction
internal enum Direction {
    case up
    case down
    case left
    case right
}

//MARK: - UIPanGestureRecognizer
internal extension UIPanGestureRecognizer {
    internal var direction: Direction? {
        let velocity = velocityInView(view)
        let isVertical = fabs(velocity.y) > fabs(velocity.x)

        switch (isVertical, velocity.x, velocity.y) {
            case (true, _, let y) where y < 0: return .up
            case (true, _, let y) where y > 0: return .down
            case (false, let x, _) where x > 0: return .right
            case (false, let x, _) where x < 0: return .left
            default: return nil
        }
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-12-08T16:25:30.023

判断`velocity`对我来说太敏感了，用户很容易将点击屏幕与平移一小部分混合在一起。

所以我使用自定义`UIPanGestureRecognizer`。**斯威夫特 5**

```
enum Orientation{
    case lhs, rhs, `default`
}

class HPan: UIPanGestureRecognizer {

    var first: CGPoint?
    var orient = .default

    override func touchesBegan(_ touches: Set<UITouch>, with event: UIEvent) {
        super.touchesBegan(touches, with: event)

        state = .began
        first = touches.first?.location(in: view?.window)
    }

    override func touchesMoved(_ touches: Set<UITouch>, with event: UIEvent) {
        super.touchesMoved(touches, with: event)
        if state == .cancelled{
            return
        }
        if let location = touches.first?.location(in: view?.window), let begin = first{
          let magicDistance: CGFloat = 20
          if location.x - begin.x > magicDistance{
               orient = .rhs
               state = .ended
          }  
          else if begin.x - location.x > magicDistance{
               orient = .lhs
               state = .ended
          }  
        }

    }

    override func touchesEnded(_ touches: Set<UITouch>, with event: UIEvent) {
        super.touchesEnded(touches, with: event)
        state = .ended
    }

    override func touchesCancelled(_ touches: Set<UITouch>, with event: UIEvent) {
        super.touchesCancelled(touches, with: event)
        state = .cancelled
    }

    override func reset() {
        super.reset()

        state = .possible
        isRight = false
        orient = .default
    }
} 
```

像这样调用：

```
@objc func push(_ gesture: RightPan){
        if gesture.state == UIGestureRecognizer.State.ended{
            switch gesture.orient{
                case .lhs:
                     counter -= 1
                case .rhs:
                     counter += 1
                default:
                    ()        
            }
        }

    } 
```

# linq - 如何使用 CAML 跳过 4 个项目？

> ID：11777288
> 
> 赞同：1
> 
> 时间：2012-08-02T12:20:10.327
> 
> 标签：linq, caml

CAML 中是否有 LINQ 等效的跳过功能。

我想跳过列表中的前 4 个项目并显示其余项目。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T12:24:01.447

看这个例子：

**C#版本**

```
// this is an extension method type ofLINQ
int[] hello = new int[]{1,2,3,4,5,6};
var world = hello.Skip(4);

foreach (var n in world) 
{ 
    Console.WriteLine(n); 
} 
```

它会显示

```
5
6 
```

顺便说一句，您使用的是什么语言？`C#`还是`VB`？这是为了`C#`

**这是VB版本**

```
Dim numbers() = {1,2,3,4,5,6}
Dim allButFirst4Numbers = From n In numbers Skip 4
For Each n In allButFirst4Numbers
        Console.WriteLine(n)
Next 
```

它会显示

```
5
6 
```

# jquery - 在 jQuery 中延迟 CSS

> ID：11777290
> 
> 赞同：3
> 
> 时间：2012-08-02T12:20:17.783
> 
> 标签：jquery, css, settimeout, delay

我有这个 div 我想`display:none`在它淡出后隐藏（），所以我输入：

```
$('.element').click(function(){
    $(this).animate({opacity:"0"},{duration:200});
    $(this).delay(200).css('display','none');
}); 
```

我突然想起 delay()s 不适用于 css。我曾经有一个小的 setTimeout 解决这个问题，但在任何地方都找不到它，所以我尝试了这样的随机东西：

```
$('.element').click(function(){
    $(this).animate({opacity:"0"},{duration:200});
});
$('.element').click(function(){
    setTimeout(function(){
        $(this).css('display','none');
    },200);
}); 
```

还是不行。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T12:22:30.853

jQuery 的 .animate() 具有回调功能，您可以在动画完成后发送一个匿名函数来执行：

```
$(this).animate({opacity:"0"},{duration:200}, function(){
   $(this).css('display','none');
}); 
```

来源：[jQuery 动画](http://api.jquery.com/animate/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T12:22:23.360

使用[动画回调函数](http://api.jquery.com/animate/)，该函数将在动画完成时初始化。

结构是这样的 = .animate( properties [, duration] [, easing] [, complete] )

例子：

```
$('.element').click(function(){
    $(this).animate({opacity:"0"},200,function() {//use callback here
       $(this).css('display','none');
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T12:26:25.240

一种更优雅的方法是指定一个回调函数在动画之后运行。

例如：

```
$(this).animate({opacity:"0"},200,function(){

     $(this).css('display','none');

}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T12:23:27.890

```
$('.element').fadeOut('slow', function() {
    // Animation complete. do something here if you want
 }); 
```

# android - com.google.android.maps 包无法解析

> ID：11777291
> 
> 赞同：4
> 
> 时间：2012-08-02T12:20:21.727
> 
> 标签：android

我想 `import com.google.android.maps.MapActivity; import com.google.android.maps.MapController; import com.google.android.maps.MapView;` 在我的 mainactivity.java中导入这些包

但是 Eclipse 无法解析这些包，我也不知道这是什么原因。

我已经按照我在电子书上找到的所有说明一步一步地了解如何在您的应用程序中导入地图，并且没有提到这个错误。

这是我的文件：

////////// MainActivity.java //////////////////

```
package com.paad.whereami;

import java.io.IOException;
import java.util.List;
import java.util.Locale;

import com.google.android.maps.MapActivity;
import com.google.android.maps.MapController;
import com.google.android.maps.MapView;

import android.app.Activity;
import android.content.Context;
import android.location.Address;
import android.location.Criteria;
import android.location.Geocoder;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.util.Log;
import android.widget.TextView;

public class MainActivity extends MapActivity {

//static final private int MENU_REFRESH = Menu.FIRST;

@Override
    protected boolean isRouteDisplayed() {
    return false;
}

private LocationManager locationManager;
private String provider;
private Location location;

private final LocationListener locationListener = new LocationListener() {
    public void onLocationChanged(Location location) {
        updateWithNewLocation(location);
    }
    public void onProviderDisabled(String provider){
        updateWithNewLocation(null);
    }
    public void onProviderEnabled(String provider){ }
    public void onStatusChanged(String provider, int status, Bundle extras){ }
};

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.map_layout);
        mapView = (MapView)findViewById(R.id.map_view);

        locationManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE);

        Criteria criteria = new Criteria();
        criteria.setAccuracy(Criteria.ACCURACY_FINE);
        criteria.setAltitudeRequired(false);
        criteria.setBearingRequired(false);
        criteria.setCostAllowed(true);
        criteria.setPowerRequirement(Criteria.POWER_LOW);
        provider = locationManager.getBestProvider(criteria, true);
        location = locationManager.getLastKnownLocation(provider);

    //Log.v("BEFORE", "Location is: " + location);
    updateWithNewLocation(location);
    //Log.v("AFTER", "LOCATION FOUND");
    locationManager.requestLocationUpdates(provider, 2000, 10, locationListener);
    }

    private void updateWithNewLocation(Location location){
        String latLongString;
        TextView myLocationText;
        myLocationText = (TextView)findViewById(R.id.myLocationText);

        String addressString = "No address found";

        if (location != null) {
        double lat = location.getLatitude();
        double lng = location.getLongitude();
        latLongString = "Lat:" + lat + "\nLong:" + lng;

        //double latitude = 73.147536;
        //double longitude = 0.510638;
        Geocoder gc = new Geocoder(this, Locale.getDefault());

        try {
            List<Address> addresses = gc.getFromLocation(lat, lng, 1);
            Log.v("TRY_BODY", "All addresses are: " + addresses);
            StringBuilder sb = new StringBuilder();
            if (addresses.size() > 0) {
                Log.v("IF_BODY", "All addresses are: " + addresses);
                Address address = addresses.get(0);
                for (int i = 0; i < address.getMaxAddressLineIndex(); i++){
                    sb.append(address.getAddressLine(i)).append("\n");
                    sb.append(address.getLocality()).append("\n");
                    sb.append(address.getPostalCode()).append("\n");
                    sb.append(address.getCountryName());
                }
                addressString = sb.toString();
            }
        } catch (IOException e) {}
        } 
        else {
        latLongString = "No location found";
        }

        myLocationText.setText("Current Pos:\n"+latLongString+"\n"+addressString);
    }

} 
```

/////////// main.xml ///////////////

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout 
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="vertical"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent">
  <TextView  
    android:id="@+id/myLocationText"
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" 
    android:text="@string/hello"
  />

  <com.google.android.maps.MapView
android:id="@+id/myMapView"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:enabled="true"
android:clickable="true"
android:apiKey="@string/myMapKey"
/>

</LinearLayout> 
```

///////////// Manifest.xml //////////////

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.paad.whereami"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="4"
        android:targetSdkVersion="15" />

    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.INTERNET"/>

        <application
            android:icon="@drawable/ic_launcher"
            android:label="@string/app_name"
            android:theme="@style/AppTheme" >

            <uses-library android:name="com.google.android.maps"/>

            <activity
                android:name=".MainActivity"
                android:label="@string/title_activity_main" >
                <intent-filter>
                    <action android:name="android.intent.action.MAIN" />

                    <category android:name="android.intent.category.LAUNCHER" />
                </intent-filter>
            </activity>
        </application>

</manifest> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-02T12:26:34.010

右键单击您的项目 ---> 属性 ---> android --> 选择目标名称 Google ApIs。并清理项目并构建项目。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T12:25:38.037

在您的 Eclipse 项目中，检查您使用的是 google-15 而不是平台的 android-15，地图支持仅作为 google 插件包中的额外库提供。

# css - 顶部属性中具有百分比值的相对定位

> ID：11777293
> 
> 赞同：1
> 
> 时间：2012-08-02T12:20:27.873
> 
> 标签：css, layout, html, css-position

[jsfiddle](http://jsfiddle.net/Xsf5B/2/)

上面的代码片段呈现了我在 Chrome (v.20) 中的意图。然而，在 Firefox 11 和 IE 9 中，第二个和第三个内容 div 似乎没有考虑顶部和左侧 CSS 值。

使用百分比宽度进行相对定位的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T12:29:50.033

我的箱子容器没有高度。你可以使用这个：

```
body, html {
    min-height: 100%;
    height: 100%;
} 
```

# c - Stackoverflow：递归调用太多？在 C 中

> ID：11777302
> 
> 赞同：4
> 
> 时间：2012-08-02T12:20:58.320
> 
> 标签：c, graph, recursion, stack-overflow

我正在尝试查看一个巨大的图表（大约 875000 个节点和 5200000 个边），但我得到了一个 stackoverflow。我有一个递归函数来循环它。它将仅探索未探索的节点，因此无法进入无限递归。（或者至少我认为）我的递归函数适用于较小的输入（5000 个节点）。

我该怎么办？递归调用是否有最大成功次数？

我真是一头雾水。

编辑：我也在最后发布了迭代等效项。

这是递归的代码：

```
int main()
{
int *sizeGraph,i,**reverseGraph;
// some code to initialize the arrays
getGgraph(1,reverseGraph,sizeGraph); // populate the arrays with the input from a file

getMagicalPath(magicalPath,reverseGraph,sizeGraph);

return 0;
}

void getMagicalPath(int *magicalPath,int **graph,int *sizeGraph) {
    int i;
    int *exploredNode;
    /* ------------- creation of the list of the explored nodes ------------------ */
    if ((exploredNode =(int*) malloc((ARRAY_SIZE + 1) * sizeof(exploredNode[0]))) == NULL) {
        printf("malloc of exploredNode error\n");
        return;
    }
    memset(exploredNode, 0, (ARRAY_SIZE + 1) * sizeof(exploredNode[0]));

    // start byt the "last" node
    for (i = ARRAY_SIZE; i > 0; i--) {
        if (exploredNode[i] == 0)
            runThroughGraph1stLoop(i,graph,exploredNode,magicalPath,sizeGraph);
    }
    free(exploredNode);
}

/*
 *      run through from the node to each adjacent node which will run to each adjacent node etc...
 */
void runThroughGraph1stLoop(int node,int **graph,int *exploredNode,int *magicalPath,int *sizeGraph) {
    //printf("node = %d\n",node);
    int i = 0;
    exploredNode[node] = 1;
    for (i = 0; i < sizeGraph[node]; i++) {
        if (exploredNode[graph[node][i]] == 0) {
            runThroughGraph1stLoop(graph[node][i],graph,exploredNode,magicalPath,sizeGraph);
        }
    }
    magicalPath[0]++; // as index 0 is not used, we use it to remember the size of the array; quite durty i know
    magicalPath[magicalPath[0]] = node;
} 
```

上面的迭代等价物：

```
struct stack_t { 
        int node;
        int curChildIndex;
    };

void getMagicalPathIterative(int *magicalPath,int **graph,int *sizeGraph) {
    int i,k,m,child,unexploredNodeChild,curStackPos = 0,*exploredNode;
    bool foundNode;
    stack_t* myStack;
    if ((myStack    = (stack_t*) malloc((ARRAY_SIZE + 1) * sizeof(myStack[0]))) == NULL) {
        printf("malloc of myStack error\n");
        return;
    }
    if ((exploredNode =(int*) malloc((ARRAY_SIZE + 1) * sizeof(exploredNode[0]))) == NULL) {
        printf("malloc of exploredNode error\n");
        return;
    }
    memset(exploredNode, 0, (ARRAY_SIZE + 1) * sizeof(exploredNode[0]));

    for (i = ARRAY_SIZE; i > 0; i--) {
        if (exploredNode[i] == 0) {
            curStackPos = 0;
            myStack[curStackPos].node = i;
            myStack[curStackPos].curChildIndex = (sizeGraph[myStack[curStackPos].node] > 0) ? 0 : -1;

            while(curStackPos > -1 && myStack[curStackPos].node > 0) {
                exploredNode[myStack[curStackPos].node] = 1;
                if (myStack[curStackPos].curChildIndex == -1) {
                    magicalPath[0]++;
                    magicalPath[magicalPath[0]] = myStack[curStackPos].node; // as index 0 is not used, we use it to remember the size of the array
                    myStack[curStackPos].node = 0;
                    myStack[curStackPos].curChildIndex = 0;
                    curStackPos--;
                }
                else {
                    foundNode = false;
                    for(k = 0;k < sizeGraph[myStack[curStackPos].node] && !foundNode;k++) {
                        if (exploredNode[graph[myStack[curStackPos].node][k]] == 0) {
                            myStack[curStackPos].curChildIndex = k;
                            foundNode = true;
                        }
                    }
                    if (!foundNode)
                        myStack[curStackPos].curChildIndex = -1;

                    if (myStack[curStackPos].curChildIndex > -1) {
                        foundNode = false;
                        child = graph[myStack[curStackPos].node][myStack[curStackPos].curChildIndex];
                        unexploredNodeChild = -1;
                        if (sizeGraph[child] > 0) { // get number of adjacent nodes of the current child
                            for(k = 0;k < sizeGraph[child] && !foundNode;k++) {
                                if (exploredNode[graph[child][k]] == 0) {
                                    unexploredNodeChild = k;
                                    foundNode = true;
                                }
                            }
                        }
                        // push into the stack the child if not explored
                        myStack[curStackPos + 1].node = graph[myStack[curStackPos].node][myStack[curStackPos].curChildIndex];
                        myStack[curStackPos + 1].curChildIndex = unexploredNodeChild;
                        curStackPos++;
                    }
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-02T12:37:10.937

通常你不应该依赖太深的递归。不同平台的处理方式不同，但一般大致是这样的：

```
max number of recursion = stack memory / function state 
```

`stack memory`变量因系统而异。一些操作系统可能只使用固定数量的主内存，其他操作系统可能允许不断增长的堆栈，一些可能使用页面文件和交换内存来增长并且根本没有限制。作为具有抽象 C 标准的 C 程序员，您不能依赖任何东西。

所以你可以先优化函数状态（去掉变量，使用更小的整数等）。但这可能不是真正的解决方案。

*   一些编译器识别尾递归并将递归转换为迭代。但同样，这不是可以依赖的东西（C 标准不保证它；您可以依赖它的语言是 Common LISP）。另请参见[C++ 是否限制递归深度？](https://stackoverflow.com/questions/2630054/does-c-limit-recursion-depth)作为一个相关的问题。

*   编译器可以提供设置递归限制的选项。但是再一次，如果您的深度实际上是设计上无限的，则不应依赖它。

但真正的解决方案是手动将递归转换为迭代。最简单的方法是将所有函数内部数据存储在堆栈中并手动模拟您的递归：

```
int fac(int x) {
    if (x<=1) return 1;
    return x*fac(x-1);
} 
```

至（Pcode 让您明白这一点）：

```
int fac(int x_) {
    struct state_t { 
        int x;
        int ret;
    }; // <-- all parameters and local variables would go here in the beginning
    struct stack_of_state_t {...};
    stack_of_state_t stack;

    push(stack, {x_, 1});

    while (1) {
        if (top(stack).x<=1) return top(stack).ret;
        push(stack, {x-1, (top(stack).x) * top(stack).ret});            
    }
} 
```

虽然这通常比递归更有效，但这可能不是最聪明的解决方案，您应该开始找出真正必须保存的状态。

在我们的示例中，我们发现我们总是只需要栈顶，所以我们立即再次清除栈：

```
int fac(int x) {    
    int ret = 1;
    while (1) {
        if (x<=1) return ret;
        ret = x * ret;
        x = x-1;
    }
} 
```

让它更加美丽：

```
int fac(int x) {    
    int ret = 1;
    while (x>1)
        ret *= x--;
    return ret;
} 
```

这是经典的非递归阶乘实现之一。

总而言之，一般的秘诀是：首先将函数的状态放入堆栈，然后继续重构。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-02T12:27:24.993

如果每个节点调用一次该函数，您将需要 875000 个堆栈帧，每个堆栈帧至少包含`7*sizeof(int*)`字节。在 32 位系统上，这需要 23MB 的堆栈，虽然不多，但可能超出了定义的限制。

您将需要提出一种迭代方法来遍历您的图表。基本上，您需要分配一个大型结构数组（大小 == 节点数），其中每个结构都包含“堆栈帧”。在您的情况下，堆栈框架是`node`并且`i`因为其他所有内容都只是传递并且不会改变。

`node`每当需要递归时，将和的当前值保存`i`在一个新结构中并将其附加到数组中。当递归结束时，恢复这些值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T12:26:59.113

您可以将递归代码转换为使用您自己在堆上分配的堆栈数据结构。这比直接递归更困难，也更不干净，但它更健壮，因为它不受调用堆栈大小的限制。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-02T12:35:20.690

由于您的计算机只有一定数量的内存（无论是 RAM 还是磁盘），因此存在最大数量的递归调用。每次调用都需要一些内存来保存函数的数据。所以只有一定数量的调用可以容纳在内存中。此外，操作系统和编程工具限制堆栈大小。您也许可以增加该堆栈大小以使用更多可用内存，但它仍然是有限的。

通常，大型图的图算法是通过使用附加信息扩充图来实现的。例如，您可以为每个节点或图形的每条边添加一个字段，指示它是否在当前遍历中被访问过，或者您可以添加一个字段，指定到目前为止找到的最短路径到该节点的长度。然后，您将算法重写为使用该附加数据的迭代算法，而不是使用堆栈的递归算法。如果您无法直接扩充原始图，则可以使用附加数据构建单独的图。

当然，附加数据通常使用与图表大小成比例的空间。如果您的算法递归少于此，例如到日志深度（图的大小），那么您可能希望找到使用更少空间的解决方案。正如其他人所建议的那样，执行此操作的一种方法是分配内存并通过在算法通过各种深度遍历时将数据保存在该内存中来实现您自己的递归模拟。这在理论上等效于递归，但在实践中它有两个优点：分配内存可能比增加允许的堆栈空间更容易，并且它可以让您直接控制每个级别存储多少数据，

# postscript - 后记：发现旋转/缩放值

> ID：11777305
> 
> 赞同：1
> 
> 时间：2012-08-02T12:21:02.727
> 
> 标签：postscript

如何发现旋转/缩放的值？例如，在我发出以下命令后：

```
90 rotate 
```

当前旋转设置为 90。如何发现旋转设置为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T15:32:18.313

旋转（也包括缩放和剪切）没有单独的值。所有此类转换都汇总到当前转换矩阵 (CTM) 中。

您可以在 PostScript 语言参考手册中找到对 CTM 和转换的出色描述，尤其是第 4.3.1 到 4.3.3 节。它是 PostScript 理解的一个重要领域，因为 CTM 支持所有绘图操作。我认为在这个论坛上解释它真的太复杂了。

简短的回答是没有简单的解决方案，您必须做一些矩阵代数才能找出点映射到的位置。一个常见的技巧是通过 CTM（点 0,0 和 1,1）传递单位正方形的坐标，然后查看变换后的点在哪里结束。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T21:31:49.573

如果你真的只做旋转、平移和*统一*缩放，那么你*可以*将仿射变换矩阵 (3x2) 分解为平移向量 (1x2) 和线性变换矩阵 (2x2)。然后，一个小三角实际上可以给你旋转。

所以这是在后记中做到这一点的一种方法。它做了一些矩阵操作，不是对 CTM 进行操作，而是对一个矩阵进行操作，如果乘以默认矩阵，则该矩阵将产生 CTM。它按顺序返回旋转角度、缩放因子和平移偏移量。将运算符序列`translate scale rotate`应用于这些值（如果默认矩阵有效）将生成当前矩阵。

我有点得意忘形，试图让它优雅地拒绝使用 PS 错误机制无法处理的矩阵（在解释器之间没有完全标准化，因为它在标准中基本上没有记录）。为了测试它，我从其他地方引入了一些随机种子代码。但隐藏在中间的是一个相对简单的公式`b a atan`，它产生角度（其中`[a b c d e f]`是矩阵值的名称，a == d，b == -c）。

```
%!
%make Adobe-style interpreters mimic ghostscript's error call
/.error where { pop /signalerror {.error} def } if

%"Safe" seed randomizer
{ 0 4{ 8 bitshift (/dev/random)(r)file read pop add }repeat srand } stopped
{ usertime 10 { %can't open file, chop some vegetables
    save 128 string 99 2 getinterval 1 vmreclaim pop restore
              } repeat usertime 8 bitshift add srand } if

%translate, scale, rotate
% extracts rotation, scaling and translation parameters
% from the CTM (assuming it's "easy" to do)
%
%eg.
% PS> rand 100 mod          %get random number 0..99
% PS> { 1 rotate } repeat   %rotate
% PS> tsr 4 pop =           %print rotation angle
%
% -  tsr  theta Sx Sy Tx Ty
/tsr { {
    6 dict begin
    matrix currentmatrix % get CTM
    matrix defaultmatrix % get Default
    matrix invertmatrix  % get the "undo" of the Default
    matrix concatmatrix  % CTM * Default^-1 =  Default-->CTM
    aload pop % dump the matrix components
    {/ty/tx/d/c/b/a}{exch def}forall % name the components
        a d ne
        b neg c ne or  %ie. not "Jacobian", not "conformal"
        { [ a b c d tx ty ] /tsr cvx /undefinedresult signalerror } if

        b a atan % theta
        a a mul b b mul add sqrt dup % Sx Sy (uniform scaling factors)
        tx ty % translation
    end
exit } loop } def

%1 2 scale resolve  %test error trigger
rand 100 mod
{ 1 rotate } repeat
rand 100 mod
{ rand 3 mod .5 add dup scale } repeat
tsr pstack 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T03:53:52.753

一种可能的方法是重载`rotate`，以便它*以*方便的形式跟踪值。

```
/oldrotate /rotate load def
/rotate { dup oldrotate
    /currentrotation dup load 3 2 roll add 360 mod store
}
/currentrotation 0 def 
```

`setmatrix`不幸的是，如果您使用的是or ，这还不够`gsave ... grestore`。

# java - 将 jar 添加到简单的 java 项目后的 ClassDefNotFoundException

> ID：11777316
> 
> 赞同：0
> 
> 时间：2012-08-02T12:21:42.347
> 
> 标签：java, classpath, apache-commons-math

我在 NetBeans 中将 commons.math jar 添加到我的项目中，但是在创建简单类的实例期间，项目抛出 ClassDefNotFoundException。有什么建议吗？数学 jar 位于桌面上，但即使将其移动到 .m2 存储库也不会影响结果。

谢谢。

UPD。发现问题 - 看起来类路径字符串错误的格式不正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T12:26:30.527

这听起来像是类路径解析的一个简单问题。

检查 NetBeans 上的运行时类路径。您是从 NetBeans 还是从命令行运行。无论如何检查运行时类路径。

如果您在 NetBeans 中，请尝试浏览 jar 以确保类确实在其中。

还要确保没有两个具有相同类名的 jar。

# android - android简单的光标适配器imageview和textview

> ID：11777319
> 
> 赞同：0
> 
> 时间：2012-08-02T12:21:57.837
> 
> 标签：android, imageview, android-contacts, simplecursoradapter

我有以下代码：

```
m_curContacts = managedQuery(uri, projection, selection, selectionArgs,
                    sortOrder);
String[] fields = new String[] { ContactsContract.Data.DISPLAY_NAME };
m_slvAdapter = new SimpleCursorAdapter(this,
            R.layout.list, m_curContacts, fields,
            new int[] { R.id.textview }); 
```

布局 R.layout.list 有 2 个元素：一个 textview 和一个 imageview。我想问一下如何在m_slvAdapter中添加imageview？

如何添加以下内容：

```
Uri[] photo = new Uri[] {
     Uri.withAppendedPath(ContentUris.withAppendedId 
         (ContactsContract.Contacts.CONTENT_URI,getContentResolver().query
         (ContactsContract.Contacts.CONTENT_URI,null,  
          ContactsContract.Contacts.IN_VISIBLE_GROUP + " = '1'", null, 
          ContactsContract.Contacts.DISPLAY_NAME+" COLLATE LOCALIZED ASC")
         .getLong(getContentResolver()
         .query(ContactsContract.Contacts.CONTENT_URI,null, 
          ContactsContract.Contacts.IN_VISIBLE_GROUP + " = '1'", null, 
          ContactsContract.Contacts.DISPLAY_NAME+" COLLATE LOCALIZED ASC")
         .getColumnIndex(ContactsContract.Contacts._ID))), 
          ContactsContract.Contacts.Photo.CONTENT_DIRECTORY)
}; 
```

我想添加近场和

```
new int[]{R.id.contact} 
```

照片和

```
new Uri[] { 
    contactimage.setImageResource(R.drawable.image);
} 
```

或类似的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T23:54:04.090

您需要创建自己的 ViewBinder。尝试查看已回答相同问题的主题：
[SimpleCursorAdapter with ImageView and TextView](https://stackoverflow.com/questions/8510335/simplecursoradapter-with-imageview-and-textview)

# python - 使所有正在运行的程序都可以访问变量

> ID：11777320
> 
> 赞同：3
> 
> 时间：2012-08-02T12:22:06.837
> 
> 标签：python, variables, integration, global

我凌乱的解决方案：

我是一个初级python程序员，由于缺乏高级知识，我经常使用原始工具来完成我的高级项目。目前我正在尝试在运行时在程序之间交换数据。我尝试过编写和阅读文本文件。每个程序都有一个单独的只写文本文件，以避免两个程序同时写入一个文件。

为了将所有数据收集到一个文件中，我编写了一个单独的程序来读取只写文本文件并将所有数据合并到一个文件中。然后，所有程序都可以访问该文件中所有其他程序的变量。

我要求更简单的解决方案：

尽管上述解决方案运行良好，但我正在尝试找到一种更优雅的方式在 Python 程序之间共享变量。你能告诉我在 Python 中是否有更好的方法来做到这一点？

太感谢了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T12:28:00.783

[Memcached](http://memcached.org/)或多或少是为您所描述的而设计的，因为*变量*与内存一样易失。

[Redis](http://redis.io/)是另一个不错的选择，与 memcached 有一些相似之处，但可以选择使数据持久化。

我能想到的所有其他直接共享选项都直接属于*数据库*类别（无论是否 SQL），除了使用平面文件，这就是你现在正在做的。

最后，您可以重构这些程序，以便它们可以相互提供服务，而不是直接共享值，从而可以在需要时交换信息。在某些情况下，这可能会增加开销和复杂性，但无需在变量值发生更改时验证它们的缓存。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T13:28:10.427

You could use [sockets](http://docs.python.org/library/socket.html) to communicate between the programs. However, if the data you're sharing is always relevant to all programs then, as others have suggested, a central database would be a better fit.

Alternatively, if all the programs are written in Python, you could launch them all from the same interpreter on different [threads](http://docs.python.org/library/threading.html?highlight=thread#thread-objects). Threads share the same memory space so sharing variables between them is already built-in (just make sure to read/write them in a thread-safe way).

# linux - 我如何在Linux中使用shell创建名称如数字的一堆文件夹

> ID：11777321
> 
> 赞同：1
> 
> 时间：2012-08-02T12:22:07.190
> 
> 标签：linux, shell

我想使用 shell 在 Linux 中创建一些文件夹。

文件夹名称应如下所示：

```
1-10000
10001-20000
20001-30000
30001-40000 
```

等等。

为此我应该使用哪些命令？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T12:30:07.020

简单的 bash 脚本

```
#!/bin/bash

mkdir 1-10000
for i in {1..5}
do
   mkdir ${i}001-$(($i+1))000
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T12:51:08.627

在 bash 中对此进行了测试：

```
#!/bin/bash

n=1 # Your starting number
mx=40000 # Your max number
inc=10000 # The number of entries you want in each group

while [ $n -lt $mx ]; do
  mkdir ${n}'-'$[$n+$inc-1]
  n=$[$n+$inc]
done 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T12:35:37.687

在 zsh 中工作，也应该在 bash 中工作：

```
min=1; max=0; while ((max<40000)); do
  max=$((min-1+10000));
  mkdir $min-$max;
  min=$((max+1))
done 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-02T12:32:52.213

这应该可以解决您的问题

```
for i in $(seq 0 10000 100000)
do
    mkdir $(expr $i + 1)-$(expr $i + 10000) 
done 
```

以下是匿名用户提出的改进建议。我已将其添加为单独的段落（未经验证），以便将两个版本都存档。

```
for i in $(seq 0 10000 100000)
do 
     mkdir $((i + 1))-$((i + 10000))
done 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T14:29:01.177

这是`zsh`使用新`{start..end..step}`序列生成器的替代方法：

```
start=1
end=40000
step=10000
paste <(print -l {$start..$end..$step})                 \
      <(print -l {$((start + $step - 1))..$end..$step}) \
| while read n1 n2; do 
    mkdir $n1-$n2
  done 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-02T12:24:33.327

看`man mkdir`

它应该用于在 unix 中创建目录。我相信这是家庭作业，而且到目前为止你还没有发布任何你尝试过的东西。

如果您正在寻找 shell 脚本，请尝试将您提到的行作为输入并围绕逗号分隔的值循环，然后将值拆分到另一个循环中，然后与拆分后的最大值进行比较，然后使用 mkdir 创建目录.algorithm 是这样的：

```
for each 1-10000,10001-20000,20001-30000,30001-40000 
split value1-value2 into value1 and value2
for i=value1 and i <=value2
mkdir $i 
```

# ruby-on-rails - 如何根据我在 Rails 中的响应状态代码跳过 after_filter 回调？

> ID：11777322
> 
> 赞同：2
> 
> 时间：2012-08-02T12:22:11.837
> 
> 标签：ruby-on-rails, ruby-on-rails-3, callback, http-status-codes

我的一个控制器中有一个 after_filter，只有在响应状态代码为 200 时我才想执行它。否则我想跳过它。那可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T12:30:27.830

一种快速简便的方法是对您的`after_filter`喜欢设置条件：

```
after_filter :do_something

def do_something
  if response.code == '200'
    # do something
  end
end 
```

# android - Permission Denial：不允许发送广播 android.intent.action.HEADSET_PLUG

> ID：11777323
> 
> 赞同：3
> 
> 时间：2012-08-02T12:22:13.367
> 
> 标签：android, broadcastreceiver, broadcast, headset

Google 显然正在为其在 JB 或 4.1 及更高版本上的内部广播引入越来越多的保护。这在 4.0 上运行良好？你知道是否有办法发送一个新的广播，也许是在有权限的情况下使用 sendOrderedBroadcast ？

哪一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-21T13:23:12.563

现在这是一个受保护的广播，只有系统 uid 可以发送。

见`android/frameworks/base/core/res/AndroidManifest.xml`：

`<protected-broadcast android:name="android.intent.action.HEADSET_PLUG" />`

# oracle - sqlplus 结果属性

> ID：11777325
> 
> 赞同：1
> 
> 时间：2012-08-02T12:22:21.137
> 
> 标签：oracle, ant, sqlplus

我正在尝试运行具有从 sql 表中选择计数的 sql 文件，并将其存储在使用 ant 中的 sqlplus 的变量中。

```
ora:sqlplus  dir="${basedir}" start="${sql_count_table_name}.sql" silent="true"
  logon="${sql_username}/${sql_password}@${sql_database}" 
  failonerror="false" resultproperty="tablecount">
</ora:sqlplus 
```

但是表计数没有分配给变量表计数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T14:50:36.520

据此[，](http://incanto.sourceforge.net/usage-sqlplus.html)是`resultProperty`：

> 应存储命令返回码的属性名称

...因此它将从 SQL*Plus 中获取退出代码，而不是您查询的值。如果您的脚本有多个查询，或者有多个列的查询，您希望它设置什么？

您也许可以通过使用 SQL*Plus`COLUMN`命令的[`NEW_VALUE`](http://docs.oracle.com/cd/E11882_01/server.112/e16604/ch_six.htm#sthref799)语法创建替换变量来破坏退出状态来实现这一点：

```
column table_count new_value my_exit_code
select count(*) as table_count from ...
exit &my_exit_code 
```

...但是您将失去任何检测真正错误的能力。

* * *

**编辑**：我忘记了退出代码是有限的；来自[SQL*Plus 文档](http://docs.oracle.com/cd/E11882_01/server.112/e16604/ch_twelve023.htm)：

> 操作系统返回码的范围在某些操作系统上也受到限制。这限制了 EXIT n 和 EXIT 变量在平台之间的可移植性。例如，在 UNIX 上，返回码只有一个字节的存储空间；因此，返回码的范围被限制在 0 到 255 之间。

因此，除非您总是期望一个非常小的计数，否则这是行不通的，因为它会修改值，您甚至不能依赖零/非零是有意义的。

您可能实际上并不关心计数；您可能只是在测试某物的存在，在这种情况下，您可以执行以下操作：

```
select least(count(*), 1) as table_count from ... 
```

...如果没有行，它会给你一个退出代码 0，如果有的话，它会给你一个退出代码。

# mysql - mysql：在while循环后声明游标

> ID：11777326
> 
> 赞同：4
> 
> 时间：2012-08-02T12:22:20.900
> 
> 标签：mysql

我创建了一个存储过程。在执行一些操作之后，我想声明游标并从该游标获取数据。但是，它给出了语法错误。下面是我的存储过程

```
DELIMITER $$

USE `adserver`$$

DROP PROCEDURE IF EXISTS `getDaypartTimeDetail`$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `getDaypartTimeDetail`(currentDate DATE,noOfdays INT,cityId BIGINT)
BEGIN
    DECLARE TotalFiles, TotalDuration BIGINT;
    DECLARE i INT;
    DECLARE da DATE;
    DECLARE dateCnt INT;

    SET dateCnt = 0;
    SET TotalFiles = 0;
    SET TotalDuration = 0;
    DROP TEMPORARY TABLE IF EXISTS tmp_date;
    DROP TEMPORARY TABLE IF EXISTS temp_data;

    CREATE TEMPORARY TABLE tmp_date(dday DATE); 
    CREATE TEMPORARY TABLE temp_data(dday DATE,daypartId INT,totalFile BIGINT,totalDur BIGINT); 

    WHILE(dateCnt < noOfdays) DO
        SET i = 1;
        INSERT INTO tmp_date(dday) VALUES (DATE_ADD(currentDate, INTERVAL dateCnt DAY));
    SET dateCnt = dateCnt + 1;
    END WHILE;

    DECLARE exit_flag INT DEFAULT 0; ****<-- Gives error**** 
    DECLARE dday DATE;
    DECLARE dId BIGINT;
    DECLARE CONTINUE HANDLER FOR SQLSTATE '02000' SET exit_flag = 1;
    DECLARE cur CURSOR FOR SELECT dday, id FROM tmp_date, daypart;

    OPEN cur;
        all_details_id:LOOP
            FETCH cur INTO dday,dId;
            IF record_not_found THEN
                LEAVE all_details_id;
            END IF;
        INSERT INTO temp_data(dday,daypartId) VALUES (dday,dId);
        END LOOP all_details_id;
    CLOSE cur;

    SELECT * FROM temp_data;

END$$

DELIMITER ; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-24T14:48:58.610

MySQL 中有一条（很奇怪的）规则，它说`DECLARE`语句应该紧跟`BEGIN`在任何`SET`, `INSERT`etc 语句之前。请参考这篇文章[http://rpbouman.blogspot.com/2005/10/nesting-mysql-cursor-loops.html](http://rpbouman.blogspot.com/2005/10/nesting-mysql-cursor-loops.html)

因此，您的脚本应如下所示：

```
DELIMITER $$

USE `adserver`$$

DROP PROCEDURE IF EXISTS `getDaypartTimeDetail`$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `getDaypartTimeDetail`(currentDate DATE,noOfdays INT,cityId BIGINT)
BEGIN
    DECLARE TotalFiles, TotalDuration BIGINT;
    DECLARE i INT;
    DECLARE da DATE;
    DECLARE dateCnt INT;

    DECLARE exit_flag INT DEFAULT 0; ****<-- Gives error**** 
    DECLARE dday DATE;
    DECLARE dId BIGINT;
    DECLARE cur CURSOR FOR SELECT dday, id FROM tmp_date, daypart;
    DECLARE CONTINUE HANDLER FOR SQLSTATE '02000' SET exit_flag = 1;

    SET dateCnt = 0;
    SET TotalFiles = 0;
    SET TotalDuration = 0;
    DROP TEMPORARY TABLE IF EXISTS tmp_date;
    DROP TEMPORARY TABLE IF EXISTS temp_data;

    CREATE TEMPORARY TABLE tmp_date(dday DATE); 
    CREATE TEMPORARY TABLE temp_data(dday DATE,daypartId INT,totalFile BIGINT,totalDur BIGINT); 

    WHILE(dateCnt < noOfdays) DO
        SET i = 1;
        INSERT INTO tmp_date(dday) VALUES (DATE_ADD(currentDate, INTERVAL dateCnt DAY));
    SET dateCnt = dateCnt + 1;
    END WHILE;

    OPEN cur;
        all_details_id:LOOP
            FETCH cur INTO dday,dId;
            IF record_not_found THEN
                LEAVE all_details_id;
            END IF;
        INSERT INTO temp_data(dday,daypartId) VALUES (dday,dId);
        END LOOP all_details_id;
    CLOSE cur;

    SELECT * FROM temp_data;

END$$

DELIMITER ; 
```

希望这可以帮助...

# c# - 无法在 Active Directory 的 DirectoryEntry 类中创建新属性

> ID：11777331
> 
> 赞同：1
> 
> 时间：2012-08-02T12:22:27.320
> 
> 标签：c#, active-directory

我正在尝试将新的 Active Directory 用户放入新的 Active Directory 组中。通常你可以这样做：

```
DirectoryEntry groupEntry = ......;
groupEntry.Properties["member"].Add(userEntry);
groupEntry.CommitChanges(); 
```

现在的问题是一个**新**的AD 组没有“成员”属性；因此，上面的代码会给你一个异常。当您手动将用户添加到 Active Directory 中的组时，将自动创建“成员”属性。但是我无法在代码中**创建**“成员”属性；Properties 属性是只读的，并且 InvokeSet("member", new List()) 或类似的东西都会给我一个异常。

谁能给我一个关于如何为 AD 条目创建不存在的属性的提示？

PS：由于用户也是新用户，他没有“memberOf”属性：这将产生完全相同的问题。

谢谢！

# android - android：从我的应用程序发送短信

> ID：11777347
> 
> 赞同：0
> 
> 时间：2012-08-02T12:23:29.497
> 
> 标签：android, sms

我已经从我的应用程序发送了一条短信，该短信已成功完成。我的消息正文是： **您被要求加入音频​​会议。请致电9196147665,55488#**

消息发送成功。发送短信后，我在接收设备中收到了消息。我想超链接`9196147665,55488#`（包括哈希和逗号），但这没有发生。我得到了超链接`9196147665`，但此后没有（从逗号开始到哈希`,55488#`）。我们如何将整个号码设置`9196147665,55488#`为一个链接，以便我可以从链接本身进行电话会议？

请提出一些解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T12:29:34.633

据我了解，短信是纯文本。您看到的超链接是由您手机上的短信应用程序自动完成的。每当短信应用程序看到手机号码或电子邮件 ID 时，它都会将其转换为超链接。可能是当它看到数字为“9196147665,55488#”时它无法识别它并且不会创建超链接。

另一种方法是，如果您的应用程序也安装在其他设备（接收设备）上，您可以读取所有传入的短信，过滤掉您的应用程序发送的短信并在您的应用程序中手动显示消息。然后你可以做任何你想做的事情。

# actionscript-3 - flash as3 - 我需要在 byteArray 数据中进行二进制搜索

> ID：11777348
> 
> 赞同：2
> 
> 时间：2012-08-02T12:23:30.310
> 
> 标签：actionscript-3, flash, search, binary, bytearray

我在获取部分`ByteArray`数据时遇到问题。
中有一个二进制文本`fileData`：

```
var fileData:ByteArray = new ByteArray();
//..........here's code that fills this var with binary data
.....readBytes(fileData,0,1000);
// 
```

数据是这样的：

```
йYЯyeSВ–нkq(г<<<start>>>:xЪмЅdf”cйxЪsdfмЅ”cйdxЪмЅ”cй<<<end>>>В–нkВ 
```

所以，我需要找到和复制数据的位置`<<< start >>>`，`<<< end >>>`也就是它们之间。

但是搜索`fileData.toString().indexOf('<<< start >>>')`有时会得到这个字符串的错误位置，有时根本找不到。

我该怎么做才能正确确定我需要的部分数据的位置？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T12:47:43.353

您不应该使用`fileData.toString().indexOf()`，因为您正在使用二进制数据。您必须搜索一系列字节。

以下函数检索指定模式的位置：

```
public function indexOf(bytes:ByteArray, search:String, startOffset:uint = 0):void
{
    if (bytes == null || bytes.length == 0) {
        throw new ArgumentError("bytes parameter should not be null or empty");
    }

    if (search == null || search.length == 0) {
        throw new ArgumentError("search parameter should not be null or empty");
    }

    // Fast return is the search pattern length is shorter than the bytes one
    if (bytes.length < startOffset + search.length) {
        return -1;
    }

    // Create the pattern
    var pattern:ByteArray = new ByteArray();
    pattern.writeUTFBytes(search);

    // Initialize loop variables
    var end:Boolean;
    var found:Boolean;
    var i:uint = startOffset;
    var j:uint = 0;
    var p:uint = pattern.length;
    var n:uint = bytes.length - p;

    // Repeat util end
    do {
        // Compare the current byte with the first one of the pattern
        if (bytes[i] == pattern[0]) {
            found = true;
            j = p;

            // Loop through every byte of the pattern
            while (--j) {
                if (bytes[i + j] != pattern[j]) {
                    found = false;
                    break;
                }
            }

            // Return the pattern position
            if (found) {
                return i;
            }
        }

        // Check if end is reach
        end = (++i > n);
    } while (!end);

    // Pattern not found
    return -1;
} 
```

然后你可以这样使用这个函数：

```
var extractedBytes = new ByteArray();
var startPos:int = indexOf(fileData, "<<<start>>>");
var endPos:int;

if (startPos == -1) {
    trace("<<<start>>> not found");
} else {
    endPos = indexOf(fileData, "<<<end>>>", startPos + 11); // "<<<start>>>".length = 11
}

if (startPos == -1) {
    trace("<<<end>>> not found");
} else {
    // Extract the bytes between <<<start>>> and <<<end>>>
    fileData.readBytes(extractedBytes, startPos + 11, endPos);
} 
```

**免责声明：**我没有测试我的代码！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-02T14:22:57.833

只是有点不同的方法：

```
package
{
    import flash.display.Sprite;
    import flash.utils.ByteArray;

    public class ByteArraySearch extends Sprite
    {
        public function ByteArraySearch()
        {
            super();
            this.test();
        }

        private function test():void
        {
            var bytes:ByteArray = new ByteArray();
            var start:ByteArray = new ByteArray();
            var end:ByteArray = new ByteArray();
            var subseq:ByteArray = new ByteArray();
            var startPosition:int;
            var endPosition:int;

            bytes.writeUTFBytes("йYЯyeSВ–нkq(г<<<start>>>:xЪмЅdf”cйxЪsdfмЅ”cйdxЪмЅ”cй<<<end>>>В–нkВ");
            start.writeUTFBytes("<<<start>>>");
            end.writeUTFBytes("<<<end>>>");
            startPosition = this.searchBytes(start, bytes);
            endPosition = this.searchBytes(end, bytes);

            subseq.writeBytes(bytes, startPosition + start.length, 
                endPosition - startPosition - start.length);
            trace(startPosition, endPosition, subseq);
        }

        private function searchBytes(needle:ByteArray, heystack:ByteArray):int
        {
            var position:int;
            var trackback:int;
            var searcheable:int;
            var head:int;
            var readNeedle:Boolean;
            var hasTrackBack:Boolean;
            var needlePosition:int;
            var current:int;

            if (!needle || !needle.length || !heystack || !heystack.length ||
                needle.length > heystack.length)
                return -1;
            searcheable = heystack.length - needle.length;
            head = needle[0];

            for (; position < searcheable; position++)
            {
                current = heystack[position];
                // first state - we didn't yet find the first matching byte
                if (!readNeedle)
                {
                    // if this is the first mathing byte
                    if (readNeedle = current == head)
                    {
                        // then set both the trackback and position in the 
                        // needle to the first byte in the needle, as this
                        // is what will be checked next
                        trackback = needlePosition = 1;
                        // we don't know yet if the first (or any later) byte
                        // can be tracked back to in our search, false by default
                        hasTrackBack = false;
                    }
                }
                else
                {
                    // we found the match
                    if (needlePosition == needle.length)
                    {
                        position -= needlePosition;
                        break;
                    }
                    // if we haven't yet found a position to track back to
                    // and the current byte is the same as the first byte in the 
                    // needle, then this is the trackback position.
                    if (!hasTrackBack && current == head)
                        hasTrackBack = true;
                    if (needle[needlePosition] == current)
                    {
                        // advance the position in the needle and the trackback, 
                        // if we didn't find any point to track back to
                        needlePosition++;
                        if (!hasTrackBack) trackback = needlePosition;
                    }
                    else
                    {
                        // since the current byte didn't match, reset the position to
                        // the first trackback point that we found.
                        readNeedle = false;
                        position = position - needlePosition + trackback;
                    }
                }
            }
            if (position == searcheable) position = -1;
            return position;
        }
    }
} 
```

# iis - 如何验证应用程序池用户名和密码是否已更新？

> ID：11777349
> 
> 赞同：1
> 
> 时间：2012-08-02T12:23:33.233
> 
> 标签：iis, powershell, iis-7, iis-7.5, powershell-2.0

我编写了一个 powershell 脚本来使用“webadministration”管理单元更新 apppool 的用户名和密码。

```
Import-Or-Snapin -Module "Webadministration"

Function Change-AppPoolIdentity {

        Param ( 
            $AppPool,
            $OldUserName,
            $NewUserName,
            $Password
       )

    If (Test-Path $AppPool)

    {
        LogWrite "Function :Change-AppPoolIdentity"
        $MyAppPool = Get-Item $AppPool

        If ($($MyAppPool.processModel.userName) -eq $OldUserName) {

            $MyAppPool.Stop()
            LogWrite "Trying to change App pool user name and password"
            $MyAppPool | Set-ItemProperty  -Name "processModel.username" -Value $NewUserName
            $MyAppPool | Set-ItemProperty  -Name "processModel.password" -Value $Password

            $MyAppPool.Start()
        }
        Else {
            LogWrite "Apppool $AppPool does not run using $OldUserName"
        }
    }
     Else {

        LogWrite "Apppool $AppPool not available "
    }

} 
```

执行脚本后，我试图访问它没有显示的站点。当我们手动设置密码时，它起作用了。我们怀疑密码没有正确更新。

如何确保应用程序池密码已更改？在 Set-item 之后，是否可以添加一个条件来验证？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T20:49:09.927

我对 IIS PowerShell 提供程序比较陌生，但我相信您可能需要调用**set-item**才能将配置更改保存到应用程序池。

进行测试，获取应用程序池项，打印出processModel密码值查看原始值（看到这个我很惊讶），然后更新它，然后一定要调用**set-item**来更新IIS。

例如

```
$pool = IIS:\apppools\myapppool

$pool.processModel.password
$pool.processModel.password = $new_password

# doens't take effect until this
#
$pool | set-item

# should show updated value
#
$pool.processModel.password 
```

# javascript - 从父页面调用 iframe 中的 javascript，IE 问题

> ID：11777350
> 
> 赞同：1
> 
> 时间：2012-08-02T12:23:35.400
> 
> 标签：javascript, internet-explorer, dom

这是对这个问题的跟进：[Invoking javascript in iframe from parent page](https://stackoverflow.com/questions/251420/invoking-javascript-in-iframe-from-parent-page)

我已经实现了@Tomalak 提供的答案。

这是一个[jsFiddle](http://jsfiddle.net/taa1953/aNsqB/)

问题是，其中的内容`iframe`是动态创建的（因此没有跨域问题）。内容中有一个按钮，其`onclick`事件处理程序调用`window.print()`. 这仅打印的内容`iframe`（这很好并且用作概念证明）。

此外，父页面上还有一个按钮，它调用由`iframe`. 该函数是`printContent`，并且与`iframe`按钮的`onclick`事件处理程序一样，它也调用`window.print()`.

这是问题，当使用 IE 8 从父页面上的按钮打印时，父页面的内容也会打印。（Chrome 不会发生这种情况。）

是否有使 IE 8 仅打印的内容的修复程序`iframe`？

有趣的是，即使使用 IE 8 ，`window.document.title`通过公共函数返回也会返回内容。`title``iframe`

小提琴演示了问题并提供了更多细节。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T15:00:45.427

在 IE 中，您需要将焦点设置到要打印的窗口。当函数在父页面中时，这会打印 iframe：

```
function printContent(){
    var el = document.getElementById('myFrame');
    el.contentWindow.focus();
    el.contentWindow.print();
    return;
} 
```

如果函数在 iframe 中，您可以从任何地方打印它：

```
function printContent(){
    window.focus();
    window.print();
    return;
} 
```

# javascript - 实例化 javascript 对象并在一行中填充其属性

> ID：11777357
> 
> 赞同：7
> 
> 时间：2012-08-02T12:23:57.600
> 
> 标签：javascript

有没有办法可以在构造函数中完成所有这些工作？

```
 obj = new Object();
  obj.city = "A";
  obj.town = "B"; 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-02T12:25:30.283

你为什么不这样做：

```
var obj = {"city": "A", "town": "B"}; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-02T12:25:40.620

像这样：

```
var obj = {
    city: "a",
    town: "b"
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-02T12:28:44.440

```
function MyObject(params) {
    // Your constructor
    this.init(params);
}

MyObject.prototype = {
    init: function(params) {
        // Your code called by constructor
    }
}

var objectInstance = new MyObject(params); 
```

这将是原型方式，当我需要多个对象实例时，我更喜欢使用普通对象文字。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-02T12:25:53.227

试试这个

```
var obj = {
    city : "A",
    town : "B"
}; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-02T12:26:00.383

```
function cat(name) {
    this.name = name;
    this.talk = function() {
        alert( this.name + " say meeow!" )
    }
} 

cat1 = new cat("felix")
cat1.talk() //alerts "felix says meeow!" 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-02T13:02:16.843

您可以编写自定义构造函数：

```
function myObject(c,t) {
    this.city = c;
    this.town = t;
}

var obj = new myObject("A","B"); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-02T12:28:53.827

试试这个：

```
function MyObject(city, town) {
  this.city = city;
  this.town = town;
}

MyObject.prototype.print = function() {
  alert(city + " " + town);
}

obj = new MyObject("myCity", "myTown");
obj.print(); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-02T12:32:03.433

不要把事情复杂化。这是定义构造函数的最简单方法。

```
var Cont = function(city, town) {
           this.city = city;
           this.town = town;
          }

var Obj = new Cont('A', 'B'); 
```

# php - 如何让 php_http 扩展在 Windows 的 PHP 5.4 版上工作？

> ID：11777361
> 
> 赞同：4
> 
> 时间：2012-08-02T12:24:27.860
> 
> 标签：php, windows, iis, pecl

任何人都知道如何让 php_http 扩展在 Windows 上的 php 5.4.5 上工作？

我正在尝试在我的 Windows 机器上升级到 PHP 5.4.5（运行 IIS）。我正在处理的项目依赖于 php_http 扩展（[http://www.php.net/manual/en/book.http.php](http://www.php.net/manual/en/book.http.php)）

不幸的是，该扩展的 5.4 兼容版本似乎没有可下载的 DLL 文件（请参阅[http://php.net/manual/en/http.install.php](http://php.net/manual/en/http.install.php)）。通过 pecl 安装似乎对我也不起作用，我最终得到了这个：[https ://bugs.php.net/bug.php?id=58531](https://bugs.php.net/bug.php?id=58531)

有谁知道我在哪里可以得到一个 DLL，或者可以为我提供其他选项来设置这个扩展？

注意：5.3 使用链接到此处的 DLL 可以正常工作：[http ://www.php.net/manual/en/http.install.php#109498](http://www.php.net/manual/en/http.install.php#109498)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-09T01:54:54.657

2012 年 8 月的网络帖子，我承受来自未来的问候。

自从提出并回答了这个问题后，出现了一个新的[Windows PECL 扩展目录](http://windows.php.net/downloads/pecl/releases/)。它比 Pierre 的更新，但它只有 pecl_http 的 2.x 版本；为 1.x 编写的任何内容都需要重写（请参阅[新文档](http://devel-m6w6.rhcloud.com/mdref/http)）。尽管如此，新目录看起来是 PHP 5.4 及更高版本的最佳选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T12:34:53.510

Pierre Joye为新版本[提供](http://downloads.php.net/pierre/)各种 PECL 扩展的 Windows 构建。如果它不存在（在撰写本文时它不存在），您别无选择，只能获取源代码（[此处](http://pecl.php.net/package/pecl_http)）并自己构建它。

对不起。

由于[cURL](http://php.net/manual/en/book.curl.php)更容易获得，并且几乎可以做 HTTP 扩展可以做的所有事情（如果不是真的所有事情），我建议您考虑将项目迁移到使用 cURL 来代替。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-16T20:40:34.980

截至 2015 年 12 月的这篇文章，似乎有各种 Windows 编译的 pecl 和其他 PHP 扩展的新位置。

PHP7 发布仅几周后，这里已经有 PHP7 兼容的扩展可用，所以我不得不假设这个位置正在被活动维护。

[在这里](http://windows.php.net/downloads/pecl/releases/)开始您的搜索

# sql - 根据具体的开始和结束月份计算周数，而不是默认的 SQL Server 开始月份

> ID：11777364
> 
> 赞同：1
> 
> 时间：2012-08-02T12:24:41.503
> 
> 标签：sql, sql-server, sql-server-2008

众所周知，在 SQL Server 中，它根据当年的 1 月 1 日到当年的 12 月 31 日计算周数。

现在我想要的是，我想将这些 1 月 1 日和 12 月 31 日更改为 3 月 1 日和 11 月 30 日。基于这些 SQL Server 应该计算周数。

那么有人可以给我这个SQL脚本吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T12:27:46.067

虽然您可以使用 dateadd 和 datepart 创建非常复杂的表达式，但我建议创建[日历表](http://web.archive.org/web/20070611150639/http://sqlserver2000.databases.aspfaq.com/why-should-i-consider-using-an-auxiliary-calendar-table.html)要简单得多。它可能有一列代表您的自定义周数，您可以在整个日期范围内精确计算一次，然后它始终在您的查询中可用并且更容易排除故障。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T13:17:05.750

我想你的问题来自[今天早些时候发布的](https://stackoverflow.com/questions/11775881/week-calculation-from-a-specific-period)关于财政年度周数的问题。

我[在 sqlTeam 网站](http://www.sqlteam.com/article/returning-a-week-number-for-any-given-date-and-starting-fiscal-month)上找到了这个链接，可能有点旧，但它很好地解释了所涉及的问题。在搜索和阅读更多内容之后，我得出结论，最好的方法是像@AaronBertrand 建议的那样涉及日历表

# android - 仅在可用时如何使用 OpenSL ES

> ID：11777377
> 
> 赞同：3
> 
> 时间：2012-08-02T12:25:19.683
> 
> 标签：android

我只想在可用时使用 OpenSL` ES，即如果 Android 版本 >= 2.3

目前我在`Android.mk`

```
LOCAL_LDLIBS    += -lOpenSLES 
```

但如果 Android 版本 < 2.3，这将不起作用

只有当 Android 版本 >= 2.3 时，我才能以某种方式动态加载 Open SL 库，也许使用`System.loadLibrary`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T12:41:23.857

用于[`Build.VERSION`](http://developer.android.com/reference/android/os/Build.VERSION.html)在加载库之前检查 API 版本，如果它低于 API 9，请不要加载它。

例子：

```
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.GINGERBREAD) {
    System.loadLibrary("xyz");
} 
```

[编辑]

或者，如果您想拥有一个本地库，动态加载 OpenSL ES，您可以使用`dlopen`. 您可以在 stackoverflow 上找到一个示例：[https ://stackoverflow.com/a/1142169/1145705](https://stackoverflow.com/a/1142169/1145705)

# python - 在 matplotlib 图形中反转轴

> ID：11777381
> 
> 赞同：33
> 
> 时间：2012-08-02T12:25:35.533
> 
> 标签：python, matplotlib

如何反转 y_axis？Z 是一个 np.array。谢谢

```
Z=TempLake 

X,Y=np.meshgrid(range(Z.shape[0]+1),range(Z.shape[1]+1)) 
im = plt.pcolormesh(X,Y,Z.transpose(), cmap='hot') 
plt.colorbar(im, orientation='horizontal') 
plt.show() 
```

我有这个：

![在此处输入图像描述](../Images/96909285d55d435ac5e6822d276d80c8.png)

我需要这个： ![在此处输入图像描述](../Images/21da31ad2233473306605c313c0e40e1.png)

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-08-02T14:17:30.067

正如@Chris 所说，这可以通过以下方式完成：

```
ax = plt.gca()
ax.invert_yaxis() 
```

在“plt.show()”之前。

# jquery - 计算元素并更改 css

> ID：11777383
> 
> 赞同：3
> 
> 时间：2012-08-02T12:25:38.590
> 
> 标签：jquery, css

[http://jsfiddle.net/YvbhH/](http://jsfiddle.net/YvbhH/)

我试图只显示`#news`div 中的前 5 个 li 元素。

如果没有 li （尝试擦除它们并再次运行脚本），`#nonews`div 应该出现并且`#news`div 应该消失。

如果它少于 5 个项目，它会计算高度（newsli x30px）

我哪里出错了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T12:30:01.553

您没有正确关闭新闻！

```
</div> 
```

你错过了`/`

因此，`#nonews`是 的孩子`#news`，当你让`#news`他们消失时，他们都会去。

该死的小错误。

[这是工作小提琴。我所做的只是适当地关闭新闻](http://jsfiddle.net/K347Q/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T12:32:41.543

您错误地计算了 135px，忘记计算第一个元素上方和最后一个元素下方的 3px 边距。这是一个更正的小提琴，带有来自@ngmiceli 答案的正确标记

[http://jsfiddle.net/VesQ/YvbhH/1/](http://jsfiddle.net/VesQ/YvbhH/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T12:33:13.167

老兄明白了....关闭第一个 div id="news"。我已经更新了你的小提琴请检查

# c++ - 使用 STL 的 C++ 中的基本 binary_search

> ID：11777387
> 
> 赞同：2
> 
> 时间：2012-08-02T12:25:45.373
> 
> 标签：c++, stl, binary-search

我只是在玩一些 STL 算法。在使用 binary_search 时，我被卡住了。我已经对向量字典进行了排序，然后我通过编写自己的比较器函数来运行 binary_search。但是，每次打印的输出都是“未找到”。但是，我搜索的字符串在向量中。任何帮助，将不胜感激。

这是片段：

```
bool ownComparator(const string &a, const string &b){
   return lexicographical_compare(a.begin(),a.end(),b.begin(),b.end());

}
...
...
cout<<"Now using Binary Search to search in sorted array"<<endl;
string searchStr="will";
bool b = binary_search(dictionary.begin(),dictionary.end(),searchStr, ownComparator);
if(b) cout<<"Found";
else cout<<"Not Found"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T12:43:13.390

得到了解决方案：当我用字符串搜索时 searchStr="will\r"; 它说发现这意味着在从文件中读取时，将逐行添加到向量中，将 \r 附加到字符串中。嗯，愚蠢的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T12:59:31.787

cout << "现在使用二分搜索在**排序数组**中搜索"

**排序数组**是关键字。您的字符串不是排序数组。如果将字符串转换为排序数组，则会得到按字母顺序排列的字符串，例如“abbbcccddddd ...”。

# android - Android - bindService 不止一次

> ID：11777397
> 
> 赞同：12
> 
> 时间：2012-08-02T12:26:06.237
> 
> 标签：android, service, bind, unbind

可以`bindService`在相同的上下文中多次使用相同的服务吗？

我可以`bindService`在相同的上下文中多次使用相同的服务并且`unBindService`只使用一次吗？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-02T12:38:17.107

可以将多次绑定到具有相同上下文的相同服务，但在我看来这是不好的做法。此外，您不能只解除一次服务绑定。你必须解开你所有`ServiceConnection`的 .

**更新**：至于为什么在我看来这是一种不好的做法，那是因为我无法想象为什么一个人会需要它。此外，我认为仅绑定和取消绑定一次并用作服务的外观接口的连接包装器可能会更好，因为它会引入更少的开销并且更不容易出错（但在我看来）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-12-08T17:54:25.763

如果您使用相同的上下文并且服务目前已连接，那么您调用多少次 bindService 并不重要，android 只是忽略您的调用所以您只能绑定到具有相同上下文的服务一次并且只能取消绑定一次

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-01-12T17:52:58.200

当您调用绑定服务时，android框架会检查上下文是否已绑定，如果上下文已绑定，则android只是忽略调用

# c# - 如何更改 Composite C1 新闻包中新闻项目的 URL 格式？

> ID：11777400
> 
> 赞同：0
> 
> 时间：2012-08-02T12:26:15.783
> 
> 标签：c#, .net, content-management-system, c1-cms

`Composite.News`我在 Composite C1 中安装了这个包。新闻项目的 URL 格式默认为：

```
/PageName/YYYY/MM/DD/NewsItemName 
```

我希望删除 URL 的日期部分（“/YYYY/MM/DD”）。我找不到它的设置，也不知道它在哪里指定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T08:00:43.927

没有设置可以改变这一点，唯一的方法是重新编写这个包的源代码，可以从这里下载 - [http://c1packages.codeplex.com/](http://c1packages.codeplex.com/)

# sql-server-2005 - 删除完全重复的行，只留下其中一个

> ID：11777405
> 
> 赞同：0
> 
> 时间：2012-08-02T12:26:27.643
> 
> 标签：sql-server-2005

请假设我有一个包含特定数量的未指定列的表格。

我想删除完全重复的行，这意味着所有列都相等匹配的行，忽略重复的行并只保留 1 行。

我怎么能做到这一点？

示例：SQL Server 2005，包含 5 列的表`FIELD1, FIELD2, FIELD3, FIELD4, FIELD5`：

```
5   3   2   A   J
3   5   2   A   J
5   3   2   A   J
5   3   2   A   J
8   B   8   A   K 
```

第一行、第三行和第四行是重复的，所以你必须在表中只留下其中一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T13:01:16.127

您可以使用[row_number()](http://msdn.microsoft.com/en-us/library/ms186734.aspx)将数字分配给重复项并删除`rn`大于一的位置（单次出现或第一次重复）。

一个小测试，因为 Sql Fiddle 不可用 ATM：

```
declare @t table (FIELD1 varchar(10), FIELD2 varchar(10), FIELD3 varchar(10), FIELD4 varchar(10), FIELD5 varchar(10))

insert into @t values ('5', '3', '2', 'A', 'J')
insert into @t values ('3', '5', '2', 'A', 'J')
insert into @t values ('5', '3', '2', 'A', 'J')
insert into @t values ('5', '3', '2', 'A', 'J')
insert into @t values ('8', 'B', '8', 'A', 'K')

; with g as (
  select *,
         row_number() over (partition by field1, field2, field3, field4, field5 
                            order by (select null)) rn
    from @t
)
delete g
where rn > 1

select *
from @t 
```

缺点是您必须指定所有列。如果您想避免这种情况，并且您的表没有外键并且没有被任何人引用，您可以将`DISTINCT`数据插入临时表、`TRUNCATE`原始表并从临时表重新插入。

# r - R中的非常慢的功能

> ID：11777412
> 
> 赞同：1
> 
> 时间：2012-08-02T12:26:39.940
> 
> 标签：r, performance

我尝试在 R 中实现对数似然函数。这是我使用过的函数（我是 R 新手）

```
f <- function(t)
{
 s=0
 x=d
 l = dim(x)[1]
 for (i in 1:l)
   {
        vector = d[i,]
        lin_res = t[1] + t[2] * vector[2] + t[3] * vector[3]
        yi = vector[1]
        s = s + yi*lin_res - log(1 + exp(lin_res))
   }
 return (s[1,1])
} 
```

而 d 是具有以下数据的小矩阵：

```
 y x1         x2    x3         x4
1  0  1 0.29944294   5.0 0.71049142
2  0  2 0.12521669   6.0 0.20554934
3  1  3 0.97254701   3.0 0.43665094
4  0  4 0.79952796   1.0 0.64749898
5  0  5 0.77358425   9.0 0.57564913
6  0  6 0.09983754   5.0 0.32164782
7  1  7 0.46133893  10.0 0.86437213
8  0  8 0.59833493  20.0 0.72545982
9  0  9 0.80005524  80.0 0.35782812
10 0 10 0.02979412 115.0 0.76707371
11 1 11 0.70576655   1.5 0.96908006
12 0 12 0.67138962   2.0 0.37169164
13 0 13 0.33446510   8.0 0.23591223
14 1 14 0.72187427   2.0 0.98578941
15 0 15 0.28193852 200.0 0.87076869
16 1 16 0.11258881   3.0 0.05566943
17 0 17 0.22001868 100.0 0.98197495
18 1 18 0.54681964   4.0 0.53437931
19 0 19 0.03336023   5.0 0.26451825
20 1 20 0.47007378  10.0 0.28463580 
```

由于某种原因，这个函数需要很多时间（运行这个函数 100 次需要大约 7 秒）。

```
d <- structure(list(y = c(0L, 0L, 1L, 0L, 0L, 0L, 1L, 0L, 0L, 0L, 
1L, 0L, 0L, 1L, 0L, 1L, 0L, 1L, 0L, 1L), x1 = 1:20, x2 = c(0.299442944, 
0.125216695, 0.972547007, 0.799527959, 0.773584254, 0.099837539, 
0.461338927, 0.59833493, 0.800055241, 0.029794123, 0.705766552, 
0.671389622, 0.334465098, 0.721874271, 0.281938515, 0.112588815, 
0.220018683, 0.546819639, 0.033360232, 0.470073781), x3 = c(5, 
6, 3, 1, 9, 5, 10, 20, 80, 115, 1.5, 2, 8, 2, 200, 3, 100, 4, 
5, 10), x4 = c(0.710491422, 0.20554934, 0.436650943, 0.647498983, 
0.575649134, 0.321647815, 0.864372135, 0.725459824, 0.357828117, 
0.767073707, 0.969080057, 0.371691641, 0.23591223, 0.985789413, 
0.870768686, 0.055669431, 0.981974949, 0.534379314, 0.26451825, 
0.284635804)), .Names = c("y", "x1", "x2", "x3", "x4"), class = "data.frame", row.names = c(NA, 
-20L)) 
```

有人可以帮助我加速此功能或了解我做错了什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T13:21:06.943

我不确定它的作用，但是在使用循环时，请始终考虑是否可以使用矢量运算。此代码返回与您的函数相同的值`f`：

```
f2 <- function(t)
{   
    lin_res = t[1] + t[2] * d[2] + t[3] * d[3]
    return (sum(d[1]*lin_res - log(1 + exp(lin_res))))
} 
```

随机数据`t`：

```
tt <- cbind( sample(0:100,100,replace=TRUE), sample(0:100,100,replace=TRUE), sample(0:100,100,replace=TRUE)) 
```

我机器上的时间：

```
# original
ptm <- proc.time()
for (t in tt) f(t)
p <- proc.time() - ptm
print(p)
#    user  system elapsed 
#  25.529   0.002  25.533
# new
ptm <- proc.time()
for (t in tt) f2(t)
p <- proc.time() - ptm
print(p)
#    user  system elapsed 
#  1.612   0.001   1.614 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-02T14:27:57.270

@Andrie：R 使用 C（在某些地方还有 Fortran）代码而不是 C++。

@ user5497：循环慢的主要原因是因为您正在逐行访问数据帧。从结构的类参数可以看出，您的 d 不是矩阵，而是数据框。

看看这个。

f1 是你的功能

f2 是 Julia 的函数

f2alt 是 f2，其中 d 被矩阵 x 替换，如 f4

f3 是 f1 的字节编译版本

f4 与 f1 相同，但将 d 转换为变量 x 中的矩阵，并将向量设置为 x[i,]

f5 是 f4 的字节编译版本

```
f1 <- function(t)
{
 s=0
 x=d
 l = dim(x)[1]
 for (i in 1:l)
   {
        vector = d[i,]
        lin_res = t[1] + t[2] * vector[2] + t[3] * vector[3]
        yi = vector[1]
        s = s + yi*lin_res - log(1 + exp(lin_res))
   }
 return (s[1,1])
}

f2 <- function(t)
{
    lin_res = t[1] + t[2] * d[2] + t[3] * d[3]
    return (sum(d[1]*lin_res - log(1 + exp(lin_res))))
}

f2alt <- function(t)
{   
    x <- as.matrix(d)
    lin_res = t[1] + t[2] * x[,2] + t[3] * x[,3]
    return (sum(x[,1]*lin_res - log(1 + exp(lin_res))))
}

library(compiler)
f3 <- cmpfun(f1)

f4 <- function(t)
{
 s <- 0
 x <- as.matrix(d)
 colnames(x) <- NULL
 l <- dim(x)[1]
 for (i in 1:l)
   {
        vector <- x[i,]
        lin_res <- t[1] + t[2] * vector[2] + t[3] * vector[3]
        yi <- vector[1]
        s <- s + yi*lin_res - log(1 + exp(lin_res))
   }
 return (s)
}

f5 <- cmpfun(f4)

tstart <- 1:3

f1(tstart)
f2(tstart)
f2alt(tstart)
f3(tstart)
f4(tstart)
f5(tstart)
all.equal(f1(tstart),f2(tstart))
all.equal(f1(tstart),f2alt(tstart))
all.equal(f1(tstart),f3(tstart))
all.equal(f1(tstart),f4(tstart))
all.equal(f1(tstart),f5(tstart))

library(rbenchmark)

benchmark(f1(tstart),f2(tstart),f2alt(tstart),f3(tstart),f4(tstart),f5(tstart),columns=c("test","elapsed","relative")) 
```

结果是

```
 test elapsed   relative
1    f1(tstart)   6.912 460.800000
2    f2(tstart)   0.305  20.333333
3 f2alt(tstart)   0.015   1.000000
4    f3(tstart)   6.941 462.733333
5    f4(tstart)   0.032   2.133333
6    f5(tstart)   0.024   1.600000 
```

如您所见，字节编译您的函数几乎没有什么不同。f2 很快，但 f2alt、f4 和 f5（f4 的字节编译版本）甚至更快，这只是因为它们访问矩阵而不是逐行访问数据帧。

f2alt 比原始 f2 快很多，因为访问的是矩阵而不是数据帧。

警告：我使用在不接受标准 rbenchmark 的 Mac OS X 上打过补丁的 R-2.15.1；我使用了一个稍微修改过的版本。

# php - 语法错误：缺少；在声明之前我不明白

> ID：11777418
> 
> 赞同：0
> 
> 时间：2012-08-02T12:26:54.707
> 
> 标签：php

```
" . str_replace("<","<",implode(file("p2.php"))) . "";
            }
            else
            {
                if(isset($_POST["ct"]))
                {
                    $numArray = explode(",",$_POST["ct"]);
                    foreach($numArray as $value)
                    {
                        if($value != " ")
                        {
                            $value = chr(158 - $value);
                        }
                        echo $value;
                    }
                }
            }
        ?> 
```

有人可以帮助我并告诉我这个字符串有什么问题，我得到“SyntaxError：missing ; before statement”，我真的想不通。

基本上我试图完成最后一个级别（http://www.hackthis.co.uk/levels/p2.php）。我认为我走在正确的轨道上，但是当我看不到问题所在时，这令人沮丧。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T12:30:14.620

您需要转义双引号，`\"`并为字符串使用正确的格式。（使用串联或在一行中输入所有内容）

PS：我假设您正在使用 java 生成一些 php 代码，查看您所做的标记

# cuda - CUDA：加载/存储效率与全局内存指令重放之间的关系

> ID：11777422
> 
> 赞同：2
> 
> 时间：2012-08-02T12:26:58.957
> 
> 标签：cuda

我正在使用 NVidia 视觉分析器（来自 CUDA 5.0 beta 版本的基于 eclipse 的版本）和 Fermi 板，我不了解其中两个性能指标：

*   全局加载/存储效率表示实际内存事务数与请求的事务数之比。

*   全局内存指令重放，表示由于次优内存合并导致的重放而发出的指令的百分比。

我的印象是，如果加载/存储效率为 100%（即完美合并），则全局内存指令重播应该为 0，但我已经看到了 100% 效率和非零全局内存指令重播的示例。怎么会 ？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T13:16:03.417

据我所知，全局加载/存储效率是由全局内存访问模式决定的，而全局内存指令重放主要是由分支分歧引起的。因此，即使所有内存访问都合并但存在一些分歧，您描述的情况也可能会发生。

PS您能否举一些示例，其中次优内存合并访问会导致全局内存指令重播？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-07T20:37:18.517

简短的回答是，单个 warp 事务的大小限制为 128 B（由于我相信总线宽度）。因此，如果您的 warp 需要 256 B 的合并数据，那么您必须重播第二个 128 B 的指令。

一般来说，事务只在 32B、64B 和 128B 段中移动数据。如果您的 warp 交易不适合其中之一，那么您将至少重播一次指令。合并模式无法避免这种情况，但它们确实有助于最小化事务。例如，warp 中 Bytes 的合并访问为您提供 32B 事务。Warp 中的合并 4B 访问（int 或 float）为您提供单个 128B 事务。

考虑以下内核：

```
__global__ void
gmemtest(const double* const src, double* const dest, const int size,
         const int eleMoved){

  int block_fst = blockIdx.x*blockDim.x*eleMoved;
  size_t thread_fst = block_fst + threadIdx.x*eleMoved;

  #pragma unroll
  for(size_t i = 0; i < eleMoved; i++){
    if( thread_fst + i < size )
      dest[thread_fst + i] = src[thread_fst + i];
  } 
```

现在`elemoved`以大小 1、2、4 和 8 运行它。您会发现内核的重放随着`elemoved`变大而增加。以下主机端循环将以 128 和 256 的块大小命中所有这些。

```
 for(size_t j = 1; j<3; j++){

    for(size_t  i = 1; i<=8; i *= 2){

      size_t n_threads = j*128;
      size_t ele_per_thread = i;

      size_t tot_threads = ((SIZE-1)/ele_per_thread)+1;
      size_t n_blocks = ((tot_threads - 1)/n_threads)+1;

      gmemtest<<<n_blocks,n_threads>>>(d_src,d_dest,SIZE,ele_per_thread);
    }
  } 
```

运行`nvprof --print-gpu-trace --metrics inst_replay_overhead`我们看到：

```
 ==22053== Profiling result:
    Device         Context  Stream   Kernel           Instruction Replay Overhead

   Tesla K20c (0)     1       2    gmemtest(double cons      0.191697
   Tesla K20c (0)     1       2    gmemtest(double cons      0.866548
   Tesla K20c (0)     1       2    gmemtest(double cons      3.472359
   Tesla K20c (0)     1       2    gmemtest(double cons      7.444514
   Tesla K20c (0)     1       2    gmemtest(double cons      0.175090
   Tesla K20c (0)     1       2    gmemtest(double cons      0.912531
   Tesla K20c (0)     1       2    gmemtest(double cons      4.067719
   Tesla K20c (0)     1       2    gmemtest(double cons      7.576686 
```

在实践中，如果您要移动诸如扭曲`double2`数据之类的东西，您可能会遇到这种情况。

如果您真的想了解与性能相关的问题，我不能推荐这个演讲：[Micikevicius - “性能优化：背后的编程指南和 GPU 架构细节”](http://www.gputechconf.com/gtcnew/on-demand-gtc.php?searchByKeyword=S3466&searchItems=session_id&sessionTopic=&sessionEvent=&sessionYear=&sessionFormat=&submit=&select=%20)

# java - JTable 拉伸到 ScrollPane 的大小

> ID：11777424
> 
> 赞同：0
> 
> 时间：2012-08-02T12:27:01.620
> 
> 标签：java, swing, jpanel, jscrollpane, layout-manager

稍后将以下组件添加到 JFrame，但它不会拉伸 JTable，因为我拉伸框架以填充 scrollPane：

```
public class TableView extends JPanel {

  public TableView(TableModel model) {

    JTable table = new JTable(model) {
        @Override
        public Component prepareRenderer(TableCellRenderer renderer, int row, int column) {
            Component c = super.prepareRenderer(renderer, row, column);
            TradeTableModel model = (TradeTableModel) getModel();
            if ((Boolean) model.getValueAt(row, model.findColumn("Select"))) {
                Side s = (Side) model.getValueAt(row, model.findColumn("Side"));
                if (s == Side.BUY)
                    c.setBackground(Color.BLUE);
                else
                    c.setBackground(Color.red);
            } else {
                c.setBackground(Color.white);
            }
            return c;
        }
    };
    table.setPreferredScrollableViewportSize(new Dimension(500, 70));
    table.setFillsViewportHeight(true);
    JScrollPane scrollPane = new JScrollPane(table);
    add(scrollPane);
  }

} 
```

我补充说：

```
super(new GridLayout(1, 0)); 
```

它解决了这个问题。但是为什么需要布局？在调用 super() 的情况下，不是有一个简单的默认布局可以实例化吗？我只是想知道是什么阻止了表格在第一个版本中拉伸到滚动窗格的大小

编辑：仅修复代码格式，但必须添加一些文本才能提交：/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T12:47:11.063

> 在调用 super() 的情况下，不是有一个简单的默认布局可以实例化吗？

有而且它是一个 FlowLayout（您可以查看 JPanel 构造函数 javadoc 或源代码以自己查看）。FlowLayout 为组件提供其首选大小并且不拉伸它。

除了 GridLayout，您还可以使用 BorderLayout 并添加到 CENTER。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T12:33:28.907

尝试添加

> table.setAutoResizeMode(JTable.AUTO_RESIZE_OFF)

在将 JTable 实例添加到滚动窗格之前，在您的代码段中。

# eclipse - Eclipse P2 - 具有各种 P2 组件的声明式服务？

> ID：11777427
> 
> 赞同：1
> 
> 时间：2012-08-02T12:27:09.473
> 
> 标签：eclipse, equinox, p2, declarative-services

所以我一直有这个问题，当我尝试使用这个从供应代理获取元数据和工件存储库管理器时：

```
ServiceReference<?> sr = Activator.getContext().getServiceReference(IProvisioningAgentProvider.SERVICE_NAME);
IProvisioningAgentProvider agentProvider = null;

if (sr == null)return;

agentProvider = (IProvisioningAgentProvider) Activator.getContext().getService(sr);
final IProvisioningAgent agent = agentProvider.createAgent(new URI("some place"));
IMetadataRepositoryManager manager = (IMetadataRepositoryManager) agent.getService(IMetadataRepositoryManager.SERVICE_NAME);
IArtifactRepositoryManager artifactManager = (IArtifactRepositoryManager) agent.getService(IArtifactRepositoryManager.SERVICE_NAME); 
```

如果这些服务已经启动，则可以正常工作。然而，很多时候工件管理器返回 null 是因为它的服务还不存在。通过将包含上述代码的捆绑包的启动级别设置为 5，我已经能够绕过它，因此在我尝试获取它们的服务引用之前，所有服务都已启动。

我真的不想乱搞开始级别。我想做的是使用声明性服务来设置这些不同的组件，从而延迟我的服务的启动。唯一的问题是我不知道要引用哪些服务，所以我可以将它们放在我的 component.xml 文件中。这在 eclipse 3.7.2 中是否可行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T14:58:10.527

到目前为止，这是我能找到的最好的方法。这并不完美，因为我必须解决一些循环依赖，这些依赖是在我的声明式服务绑定方法上检查服务名称时附带的。

基本上，我将 IAgentServiceFactory 设置为我的**component.xml中的依赖项**

```
<?xml version="1.0" encoding="UTF-8"?>
<scr:component xmlns:scr="http://www.osgi.org/xmlns/scr/v1.1.0" immediate="true" name="com.company.updateManager">
   <implementation class="com.company.updatemanager.UpdateManager"/>
   <service>
      <provide interface="com.company.updatemanager.IUpdateManager"/>
   </service>
   <reference bind="addAgentService" cardinality="1..n" interface="org.eclipse.equinox.p2.core.spi.IAgentServiceFactory" name="IAgentServiceFactory" policy="dynamic"/>
</scr:component> 
```

然后我有实现上述组件的类（下面解释一下） **com.company.updatemanager.UpdateManager**

```
package com.company.updatemanager;

import java.net.URI;
import java.net.URISyntaxException;
import java.util.ArrayList;
import java.util.Collection;
import java.util.Map;

import org.eclipse.core.runtime.IStatus;
import org.eclipse.core.runtime.NullProgressMonitor;
import org.eclipse.core.runtime.jobs.IJobChangeEvent;
import org.eclipse.core.runtime.jobs.Job;
import org.eclipse.core.runtime.jobs.JobChangeAdapter;
import org.eclipse.equinox.p2.core.IProvisioningAgent;
import org.eclipse.equinox.p2.core.IProvisioningAgentProvider;
import org.eclipse.equinox.p2.core.ProvisionException;
import org.eclipse.equinox.p2.core.spi.IAgentServiceFactory;
import org.eclipse.equinox.p2.engine.IProfile;
import org.eclipse.equinox.p2.engine.IProfileRegistry;
import org.eclipse.equinox.p2.metadata.IInstallableUnit;
import org.eclipse.equinox.p2.operations.InstallOperation;
import org.eclipse.equinox.p2.operations.ProvisioningSession;
import org.eclipse.equinox.p2.query.QueryUtil;
import org.eclipse.equinox.p2.repository.artifact.IArtifactRepositoryManager;
import org.eclipse.equinox.p2.repository.metadata.IMetadataRepository;
import org.eclipse.equinox.p2.repository.metadata.IMetadataRepositoryManager;
import org.osgi.framework.ServiceReference;

public class UpdateManager implements IUpdateManager {

    URI updateURI;

    boolean alreadyAutoUpdated;

    boolean hasMetaDataRepoMan;
    boolean hasArtifactRepoMan;

    /*
     * I have to hack around some sort of circular dependency that happens when I try to reference
     * the repoManager classes in the addAgentService method.  It doesn't happen when run from
     * the IDE, but does when everything is compiled. It works fine if I access these properties
     * in a constructor or right here or somewhere else, but whatever object in OSGI is binding
     * with the addAgentService method creates a circular dependency.  
     */
    String artifactServiceName = IArtifactRepositoryManager.SERVICE_NAME;
    String metaDataServiceName = IMetadataRepositoryManager.SERVICE_NAME;

    public void addAgentService(IAgentServiceFactory serv, Map properties){
        System.out.println("Got Agent Service " + (String) properties.get("p2.agent.servicename"));
        String serviceName = (String) properties.get("p2.agent.servicename");

        if(serviceName.equals(this.metaDataServiceName)){
            this.hasMetaDataRepoMan = true;
        }else if(serviceName.equals(this.artifactServiceName)){
            this.hasArtifactRepoMan = true;
        }

        if(checkAllServices()){
            autoUpdate();
        }
    }

    private void autoUpdate(){
        if(!alreadyAutoUpdated){
            try {
                alreadyAutoUpdated = true;
                update();
            } catch (ProvisionException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (URISyntaxException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    }

    private boolean checkAllServices(){
        if(this.hasMetaDataRepoMan && 
                this.hasArtifactRepoMan){
            return true;
        }else{
            return false;
        }
    }

    public void update(){
        ServiceReference<?> sr = Activator.getContext().getServiceReference(IProvisioningAgentProvider.SERVICE_NAME);
        IProvisioningAgentProvider agentProvider = null;

        if (sr == null)return;

        agentProvider = (IProvisioningAgentProvider) Activator.getContext().getService(sr);
        final IProvisioningAgent agent = agentProvider.createAgent(new URI("some place"));
        IMetadataRepositoryManager manager = (IMetadataRepositoryManager) agent.getService(IMetadataRepositoryManager.SERVICE_NAME);
        IArtifactRepositoryManager artifactManager = (IArtifactRepositoryManager) agent.getService(IArtifactRepositoryManager.SERVICE_NAME);

        //rest of your update code
    }
} 
```

代码中解释了循环依赖。我宁愿解决这个问题，也不愿搞砸运行级别。我真的很讨厌处理运行级别。

但基本上 IAgentServiceFactory 似乎是负责创建各种 P2 服务的组件，包括 MetaData 和 Artifact 存储库管理器。我基本上只是检查工厂提供的包含服务名称的每个服务的属性。如果我获得了我想要注册的所有服务，那么我继续运行我在原始帖子中使用的更新代码。这至少给了我一些保证，当我尝试从服务注册表中获取服务时，服务不会返回 null。

# python - 如何将公钥打印为字符串并用它加密？

> ID：11777428
> 
> 赞同：2
> 
> 时间：2012-08-02T12:27:12.297
> 
> 标签：python, django, openssl

所以我用 OpenSSL 生成了一个自签名证书和一个私钥。

现在我正在尝试：

a) 将公钥打印为字符串。这个：

```
f = open(CERT_FILE)
cert_buffer = f.read()
f.close()
cert = crypto.load_certificate(crypto.FILETYPE_PEM, cert_buffer)
pub_key = cert.get_pubkey()
print pub_key 
```

打印类似：

```
<OpenSSL.crypto.PKey object at 0x7f059864d058> 
```

b) 用这个公钥加密一个字符串

c) 用私钥解密加密字符串

我想看一些代码示例。请仅使用 OpenSSL，不要使用包装器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T15:33:51.373

这是你想要的吗？它使用[PyCrypto](https://www.dlitz.net/software/pycrypto/)，而不是[PyOpenSSL （当你提到](https://launchpad.net/pyopenssl)*no wrappers*时，我不确定这是否是你想要避免的）

```
#!/usr/bin/env python

from Crypto.Cipher import AES
from Crypto.Cipher import PKCS1_OAEP
from Crypto.PublicKey import RSA

def step1():
    rsaKey = RSA.importKey(open("./myKey.der", 'r'))
    print "Step 1: This is my rsa-key:\n%s" % rsaKey.exportKey()

def step2_encrypt(string):
    rsaKey = RSA.importKey(open("./myKey.der", 'r'))
    pkcs1CipherTmp = PKCS1_OAEP.new(rsaKey)
    encryptedString = pkcs1CipherTmp.encrypt(string)
    print "Step 2: encrypted %s is %s" % (string, encryptedString)
    return encryptedString

def step3_decrypt(encryptedString):
    rsaKey = RSA.importKey(open("./myKey.der", 'r'))
    pkcs1CipherTmp = PKCS1_OAEP.new(rsaKey)
    decryptedString = pkcs1CipherTmp.decrypt(encryptedString)
    print "Step 3: decryptedString %s is %s" % (encryptedString, decryptedString)
    return decryptedString

if __name__ == "__main__":
    step1()
    encryptedString = step2_encrypt("hello, duuude")
    decryptedString = step3_decrypt(encryptedString)
    print "Tadaaaa: %s" % decryptedString 
```

密钥文件包含公共/私有部分，因此加密/解密模块将知道该做什么。

您是否需要两个单独文件中的公钥/私钥（应该是直截了当的，对吧）？

请注意，使用非对称加密时，可以加密的最大字符数取决于密钥中使用的[模数](https://stackoverflow.com/a/6662179/289011)。在上面的示例中，如果您使用常规 RSA 密钥（SHA-1，模数为 20 字节），您将收到大于 214 字节的字符串的错误。正如[cyroxx](https://stackoverflow.com/users/1388240/cyroxx)在评论中指出的那样，该算法没有理论上的限制（您可以使用**非常**长的密钥加密长字符串），但是它所花费的计算时间使得它在实际用途中非常不可行。

如果您需要对大块数据进行加密，您可能需要使用对称算法（如 AES）加密该数据，并在传输的数据中发送使用 RSA（非对称）密钥加密的密码......但这是一个与许多其他问题不同的问题**:-)**

# java - 如何从一个 JList 中删除元素并将它们添加到另一个 JList？

> ID：11777429
> 
> 赞同：-4
> 
> 时间：2012-08-02T12:27:15.587
> 
> 标签：java, swing, jlist

从`jlist1-->`我想将数据添加到`jlist2`，然后我想删除在 中选择的数据`jlist1`。（对于添加部分）

从`jlist2-->`我想将数据添加到`jlist1`，然后我想删除在 中选择的数据`jlist1`。（对于 del 部分）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T12:32:04.820

1.  获取选定的元素
2.  从源列表中删除选定元素
3.  将选定元素（即先前删除的元素）添加到目标列表

[问题？](http://docs.oracle.com/javase/tutorial/uiswing/components/list.html#mutable)

# php - 为 openCV 创建 PHP 扩展时出错

> ID：11777435
> 
> 赞同：0
> 
> 时间：2012-08-02T12:27:29.423
> 
> 标签：php, opencv, php-extension, face-detection

我正在开发一个基于 OpenCv 的项目。我曾尝试为此使用[http://www.xarg.org/project/php-facedetect/](http://www.xarg.org/project/php-facedetect/)库。我试图创建 php-facedetect 扩展，但它不能正常工作，它显示的错误如下

```
OpenCV$ sudo phpize && ./configure && make && make install /
Configuring for:
PHP Api Version:         20090626
Zend Module Api No:      20090626
Zend Extension Api No:   220090626
./configure: line 1962: config.log: Permission denied
./configure: line 1972: config.log: Permission denied 
```

谁能帮我解决这个问题，我也试过[https://github.com/mgdm/OpenCV-for-PHP](https://github.com/mgdm/OpenCV-for-PHP)，它也显示同样的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T15:46:36.793

看起来 configure 没有写入日志文件的权限。

尝试使用 sudo 单独运行每个命令，如下所示：

```
sudo phpize
sudo ./configure
sudo make
sudo make install 
```

通常，除了安装步骤之外，您可以跳过所有 sudo，如下所示：

```
phpize
./configure
make
sudo make install 
```

# iphone - iPhone MapKit 是否可以从一系列触摸中映射坐标？

> ID：11777436
> 
> 赞同：1
> 
> 时间：2012-08-02T12:27:31.980
> 
> 标签：iphone, objective-c, ios, mapkit, robotics

我得到了一个带有覆盖层的 MKMapView，它允许用户在 MKMapView 上进行手指绘画。我知道用 X、Y 点绘制的线是什么。**我想知道的是如何将这个 X,Y 点数组转换为坐标 2D 对象（纬度，经度）**。

我看到它的方式是：用户打开叠加地图，滚动到任何地方，然后在地图上画一条线，线上的每个点都转换为坐标 2D，地图套件在每个坐标处放置一个图钉。

我知道可以查询地图视图的中心坐标，但是我不确定如何计算偏离中心的点的坐标。我知道纬度和经度有点“弯曲”，所以它不是一个简单的偏移方程。

**是否有任何关于如何将地图视图触摸转换为坐标的开源或示例项目？**

PS。我打算将它用于 iPhone 控制的机器人项目，为机器人设置航点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T12:33:53.760

应用手势识别器，然后尝试下面的代码来获取视图上的坐标，然后将它们转换为纬度和经度。

```
CGPoint touchPoint = [gestureRecognizer locationInView:self.mapView];   
    CLLocationCoordinate2D touchMapCoordinate = 
        [self.mapView convertPoint:touchPoint toCoordinateFromView:self.mapView]; 
```

注意：未经测试，但似乎可以使用，**这应该可以在没有覆盖的情况下使用**

*代码信用转到：[触摸时如何向 MKMapView(IOS) 添加图钉？](https://stackoverflow.com/questions/3959994/how-to-add-a-push-pin-to-a-mkmapviewios-when-touching/3960754#3960754)接受的答案*

# jquery - 防止在可排序的 JqueryUI 中删除列表项

> ID：11777438
> 
> 赞同：21
> 
> 时间：2012-08-02T12:27:34.050
> 
> 标签：jquery, jquery-ui, drag-and-drop, jquery-ui-sortable

我有两个列表 `#sortable1`，`#sortable 2`它们是连接的可排序，如本[示例](http://jqueryui.com/demos/sortable/#connect-lists)所示。

您可以将列表项从 拖放`sortable1`到`sortable 2`。但是，如果**可排序 1**中的项目包含“数字”类，我想**防止**在**Sortable2**上放置，从而使拖动的项目回到**可排序 1**中。

我在 sortable2 上使用了以下内容：

```
receive: function (event, ui) {
            if ($(ui.item).hasClass("number")) {
                $(ui.item).remove();
            } 
```

但它会从两个表中完全删除列表项。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2014-07-13T13:27:30.160

对于将来阅读此内容的任何人，正如[briansol](https://stackoverflow.com/users/1981678/briansol)在对已接受答案的评论中提到的那样，它会引发错误

```
Uncaught TypeError: Cannot read property 'removeChild' of null 
```

该文件特别说

> [`cancel()`](http://api.jqueryui.com/sortable/#method-cancel)
> 
> 取消当前排序的更改并将其恢复到当前排序开始之前的状态。**在停止**和**接收**回调函数中很有用。

在其他事件期间取消排序是不可靠的，因此最好使用[Mj Azani](https://stackoverflow.com/users/2912502/mj-azani)的[答案](https://stackoverflow.com/a/19548808/2333214)[`receive`](http://api.jqueryui.com/sortable/#event-receive)中显示的事件或使用如下事件：[`stop`](http://api.jqueryui.com/sortable/#event-stop)

```
$('#list1').sortable({
  connectWith: 'ul',
  stop: function(ev, ui) {
    if(ui.item.hasClass("number"))
      $(this).sortable("cancel");
   }
}); 

$('#list2').sortable({
   connectWith: 'ul',
}); 
```

[演示](http://jsfiddle.net/FTm96/)

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-08-02T12:44:40.500

您可以使用`stop`和`sortable('cancel')`方法的组合来验证正在移动的项目。在[这个例子](http://jsfiddle.net/pbs7xwke/)中，当一个项目被丢弃时，我通过以下方式检查该项目是否有效：

1.  检查项目是否具有类`number`
2.  *并*检查列表项是否被放入`list2`

这是我想要的稍微硬编码的，所以你可以做的是检查被删除项目的父项`this`，以检查列表是否不同。这意味着您可能拥有`number`in`list1`和的项目`list2`，但它们不可互换。

## [jsFiddle 示例](http://jsfiddle.net/pbs7xwke/)

```
$(function() {
    $('ul').sortable({
        connectWith: 'ul',
        stop: function(ev, ui) {
            if ($(ui.item).hasClass('number') && $(ui.placeholder).parent()[0] != this) {
                $(this).sortable('cancel');
            }
        }
    });        
});​ 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-10-23T17:47:41.200

试试[这个例子](http://codepen.io/mj_azani/pen/npohF)

```
$('#list1').sortable({
    连接：'ul'
});    

$('#list2').sortable({
    连接：'ul'，
    接收：函数（ev，ui）{
        如果（ui.item.hasClass（“数字”））
          ui.sender.sortable("取消");
    }
});    

```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-12T00:42:13.120

经过几次实验，我发现迄今为止最简单的方法是使用 remove 事件，它基本上只在您尝试将项目放入新的可排序对象时触发（之前使用 connectWith 作为目标）。

只需将其添加到您的可排序调用中：

```
remove:function(e,ui) {
    if(ui.item.hasClass('your_restricted_classname')) return false;
}, 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-04T19:41:34.610

如果您根本不需要拖动具有“编号”类的项目，您还可以将整个拖放功能限制为没有“编号”类的项目：

```
$("#sortable1, #sortable2").sortable({
    connectWith: ".connectedSortable",
    items: "li:not(.number)"
}); 
```

你可以在这里试试：http: [//jsfiddle.net/60gwjsgb/1/](http://jsfiddle.net/60gwjsgb/1/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-05-09T09:34:25.350

```
beforeStop: function(ev, ui) {
                if ($(ui.item).hasClass('number') && 
                    $(ui.placeholder).parent()[0] != this) {
                    $(this).sortable('cancel');
                }
            } 
```

试试这个。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-07-02T19:02:26.147

如果a）您只有这两个列表，并且b）您不在乎您的“数字”实际上被拖动然后回落，您可以简单地防止它被拖动：

```
 sort: function(event, ui) {
if(ui.item.hasClass('number')) return false;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-05-31T09:05:44.983

这是我的 2 美分。如果您不希望在其中一个连接列表中进行排序，则可以在触发 start even 时将其从实例对象中的容器中删除，因此根本不会发生排序，如果您需要恢复排序功能之后，您可以再次重新创建可排序或在容器数组中添加已删除的元素。它看起来像这样：

```
 start: function(e, ui){
        if(ui.item.hasClass('uniqToSortableItem')){
            var instance = $(this).sortable( "instance" );
            var newContainers = [];
            instance.containers.forEach((el)=> {
                if(!el.element.hasClass('sortableToDisable')){
                    newContainers.push(el);
                } 
            });
            // in case you need to save initial array just attach it to ui.helper
            ui.helper.initialContainersArray = instance.containers;
            instance.containers = newContainers;
        }
    },
    stop: function(e, ui){
        // returning containers array to previous state if necessary
        if(ui.helper.initialContainersArray){
            $(this).sortable( "instance" ).containers = ui.helper.initialContainersArray;
        }
    } 
```

# char - Const Char* test() return String.c_Str() 不能正常工作

> ID：11777439
> 
> 赞同：2
> 
> 时间：2012-08-02T12:27:43.583
> 
> 标签：char, constants

我对这个问题感到困惑：

```
Const Char* Test() {
    String a = "anything";
    Return a.c_str();
}

Void Main() {
    Cout << Test(); // returns crap!
} 
```

有人知道我没有想到什么吗？此页面不是 iPhone 优化的 ;-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T12:36:51.260

尝试在堆上分配字符串：

```
string *a=new string("anything");
return (*a).c_str(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T12:37:00.313

C语言是基于堆栈的。函数 Test() 中的字符串 a 在堆栈中分配。

```
const Char* Test() {
   std::string a = "anything";  // Allocated in stack based
   return a.c_str(); // A is freeing for return.
}

Void Main() {
    std::cout << Test(); // returns crap!
} 
```

* * *

```
const char* Test(std::string *a) {
   *a = "anything";
   return a->c_str();
}

Void Main() {
    std::string a;
    std::cout << Test(&a);
} 
```

* * *

或者

```
const Char* Test() {
   **static** std::string a = "anything";  // Allocated in data memory
   return a.c_str(); // data memory freed when application terminating.
}

Void Main() {
    std::cout << Test();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T12:29:57.433

`String a`位于自动内存中，当您返回时它会被销毁`Test()`，因此分配的内存`c_str`也会被释放

# php - jquery ajax响应未发送

> ID：11777447
> 
> 赞同：1
> 
> 时间：2012-08-02T12:28:02.997
> 
> 标签：php, jquery

我有一个表单，它使用 post 方法将其内容提交到`php`脚本，该脚本返回一个`xml`文件。我在检测错误时发现问题，我在 Firefox 控制台中没有看到任何错误，这是 jquery 代码：

```
$(document).ready(function() {
$('form').submit( function() {
//alert('bonjour');
var pr= $('#prenom').val(); 
var te=$('#tech').val();
var sk=$('#skills').val() ; 
$("#form1").ajaxError(function(){
alert("An error occured!");
});
$.ajax({
url: "filter.php",
type: "POST",
data: { prenom: pr , tech: te , skills: sk },

dataType: "xml",
success: function(data) {
//alert(data);
$(data).find('collaborateur').each(function(){

var id = $(this).attr('id');
var urlPhoto = $(this).find('urlphoto').text();
var nb_cv = $(this).find('nb_cv').text();
var poste = $(this).find('poste').text();
var nb_ann_exp = $(this).find('nb_ann_exp').text();
var identite = $(this).find('identite').text();
var nom = $(this).find('nom').text();
var prenom = $(this).find('prenom').text();
$('<div class="items" id="link_'+id+'"></div>').html('<a href="'+urlPhoto+'"  

style="float:left">'+nom+'</a><span>'+nom+' '+prenom+'</span>').appendTo('#result');

}

);
//$('#result').html(data);
alert('Load was performed.');
},
fail: function(){alert ('fail');}
});
});
}); 
```

生成`php`代码`xml` `filter.php`如下

```
 header('Content-type: text/xml');
 echo "<?xml version=\"1.0\" encoding=\"UTF-8\"?>";
 echo '<collaborateurs>';
 include("connection.php");
 require("functions.php");
 $tab = array();
 $tab = filter($_POST['prenom'], $_POST['tech'], $_POST['skills']);
 // print_r($tab);
 // exit;
 foreach  ($tab as $key => $value)
 {
 echo '<collaborateur id="'.$key.'">';
 echo '<nom>'.$value['nom'].'</nom>';
 echo '<prenom>'.$value['prenom'].'</prenom>';
 echo '<nb_cv>'.$value['nb_cv'].'</nb_cv>';
 echo '<poste>'.$value['poste'].'</poste>';
 echo '<nb_ann_exp>'.$value['nb_exp'].'</nb_ann_exp>';
 echo '<identite>'.$value['ident'].'</identite>';
 // echo '<nb_visite>'.$value['nb_visite'].'</nb_visite>';
 echo '</collaborateur>';
 } 
 echo '</collaborateurs>'; 
```

过滤功能

```
function filter($pren, $tech, $comp)
{global $connection;
$tab = array();
$query="SELECT  DISTINCT c.id_c,`prenom`,`nom`,`nb_exp`,`ident`,`poste` , NomPhoto,   

nb_cv  FROM `collaborateur` c, techno_mai m , competence_cle cc  where( prenom like     

'$pren'  or (m.lib_tech like '$tech' and m.id_c =c.id_c )  or (cc.id_c = c.id_c and   

cc.lib_cc like '$comp')) ";

$c12=mysql_query($query, $connection)or die(mysql_error());
$i =0;
while($fil= mysql_fetch_array($c12))
{
$tab[$i]['prenom'] =$fil['prenom'];
$tab[$i]['nom']= $fil['nom'];
$tab[$i]['nb_exp']=$fil['nb_exp'];
$tab[$i]['ident']=$fil['ident'];
$tab[$i]['poste']=$fil['poste'];
$tab[$i]['NomPhoto']=$fil['NomPhoto'];
$tab[$i]['nb_cv']=$fil['nb_cv'];
$tab[$i]['nom']=$fil['nom'];
$tab[$i]['prenom']=$fil['prenom'];
$i++;
}
return $tab;

} 
```

我以没有的形式测试了`php`代码，`ajax`它呈现了一个正确的`xml`文件。没有ajax的服务器输出（xml文件）

```
<collaborateurs>
<collaborateur id="0">
<nom>semi</nom>
<prenom>troc</prenom>
<nb_cv>0</nb_cv>
<poste>tech</poste>
<nb_ann_exp>12</nb_ann_exp>
<identite>dis</identite>
</collaborateur>
<collaborateur id="1">
<nom>tarek</nom>
<prenom>fellah</prenom>
<nb_cv>0</nb_cv>
<poste>dev</poste>
<nb_ann_exp>2</nb_ann_exp>
<identite>dev web</identite>
</collaborateur>
<collaborateur id="2">
<nom>ahmed</nom>
<prenom>hamza</prenom>
<nb_cv>0</nb_cv>
<poste>dev web</poste>
<nb_ann_exp>0</nb_ann_exp>
<identite>dev web</identite>
</collaborateur>
</collaborateurs> 
```

并提前感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T12:35:04.787

你正在设置

```
data: { prenom: pr , te: tech , sk: skills }, 
```

但随后检索

```
 $tab = filter($_POST['prenom'], $_POST['tech'], $_POST['skills']); 
```

应该

```
data: { prenom: pr , tech: te , skills: sk}, 
```

# php - Cakephp HABTM 删除额外字段

> ID：11777449
> 
> 赞同：0
> 
> 时间：2012-08-02T12:28:15.780
> 
> 标签：php, cakephp, has-and-belongs-to-many

我有名为**Place**和**Category**的模型，它们使用 HABTM 关系连接。**现在，当我从Place**读取特定字段时，我会在结果中得到额外的字段，如下所示。

```
array(
'Place' => array(
    'id' => '8'
),
'Category' => array(
    (int) 0 => array(
        'id' => '2',
        'CategoriesPlace' => array(
            'id' => '673',
            'place_id' => '8',
            'category_id' => '2'
        )
    ),
    (int) 1 => array(
        'id' => '3',
        'CategoriesPlace' => array(
            'id' => '674',
            'place_id' => '8',
            'category_id' => '3'
        )
    ),
    (int) 2 => array(
        'id' => '5',
        'CategoriesPlace' => array(
            'id' => '675',
            'place_id' => '8',
            'category_id' => '5'
        )
    )
) 
```

)

我不希望显示这个**CategoriesPlace**数组。知道怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T12:31:54.570

两个 cakephp 解决方案：

```
$this->Place->recursive=-1; 
```

在找到之前。

或者：

```
$this->Place->contain(); 
```

[包含文档](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html#containable)

编辑：为了更好地控制输出：

[可包含的文档](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html)

放：

```
public $actsAs = array('Containable'); 
```

在模型中。

然后：

```
$this->Place->find('all', array(
    'contain' => array(
        'Place',
        'Category' => array(
            'fields'=>array('id')
        )
    )
  )
); 
```

它可能不起作用，因为 cakephp 添加了执行查询所需的所有外键。

# php - 如何更改基于第一个下拉选择的第二个下拉值？

> ID：11777454
> 
> 赞同：0
> 
> 时间：2012-08-02T12:28:43.457
> 
> 标签：php, javascript, jquery, html, ajax

我有两个下拉列表`Min Price`，`Max Price`我想根据第一个选择更改第二个下拉值。

说例子`1st drop-down selection is 100 means, 2nd drop-down value should be greater than the 100, if it is 200 in 1st, value of 2nd should be greater than 200`

在 jQuery 或 js 中有什么想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-02T12:36:13.423

我能想到的最简单的（这使您可以重新选择，您可以选择 400，然后选择 200，一切正常）

```
<select id='min'>
<option value='100'>100</option>
<option value='200'>200</option>
<option value='300'>300</option>
<option value='400'>400</option>
</select>
<select id='max'>
<option value='100'>100</option>
<option value='200'>200</option>
<option value='300'>300</option>
<option value='400'>400</option>
</select>​

var removed;

$('#min').change( function() {
    var value = this.value;
    $('#max').prepend(removed);
    var toKeep = $('#max option').filter( function( ) {
        return parseInt(this.value, 10) >= parseInt( value, 10);
    } );
    removed =  $('#max option').filter( function( ) {
        return parseInt(this.value, 10) < parseInt( value, 10);
    } );
    $('#max').html(toKeep);
});​ 
```

[http://jsfiddle.net/NjLNF/2/](http://jsfiddle.net/NjLNF/2/)

编辑 - 根据评论添加 parseInt()

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T12:36:18.170

您可以使用 jquery 和更改功能。如果您的第一个下拉列表的 id 是 drop1，那么它将是 $("#drop1").change(function() { .. 将您的函数放在这里以填充第二个下拉列表..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T12:35:56.257

```
$('#first_dd').change(function(){
var dd_val=$(this).val();
var options = "";
$('#second_dd').html('');
for(var i=parseInt(dd_val+1);i<=END-LIMIT;i++)
{
$('#second_dd').append('<option value='+i+'>'+i+'</option>');
}
}); 
```

我没有在浏览器中测试它。考虑系统，只需遵循逻辑即可。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T12:36:15.077

```
$(function () {
        $("#one").change(function (e) {
            $("#two").empty();

            var options =
            $("#one option").filter(function(e){
                return $(this).attr("value") > $("#one option:selected").val();
            }).clone();

            $("#two").append(options);
        });
    }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T12:47:39.797

将侦听器添加到 Min Price 下拉列表，然后遍历 Max Price 下拉列表的值，直到找到大于所选 Min Price 下拉列表的值。像这样的东西

```
$('#minPrice').change(function(){
    var minVal = $('#minPrice option:selected').val();
     $('#maxPrice option').each(function(){
          if(minVal < $(this).val()){
             $(this).attr('selected', 'selected');
             return false;
          }
     });
}); 
```

# android - ListView，标记用户触摸的位置

> ID：11777459
> 
> 赞同：0
> 
> 时间：2012-08-02T12:28:58.610
> 
> 标签：android

我有一个`listview`习惯`setOnTouchListener`

```
view.setOnTouchListener(new OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {

            switch(event.getAction()) {

            case MotionEvent.ACTION_DOWN:
                  view.setBackgroundColor(Color.parseColor("#f47920"));
                  break;

            case MotionEvent.ACTION_UP:
                  view.setBackgroundColor(Color.TRANSPARENT);
                  break; 

            }

            return false;
        }

    }); 
```

我遇到了一个奇怪的问题：当用户按住一个项目并将手指拖动到列表视图中的下一个项目时，前一个项目将保持颜色，因为应用程序认为我尝试从列表中选择几个项目。那么如果用户按住手指并在列表上上下拖动，我该如何去除颜色呢？

希望你们理解我试图完成的工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T12:35:12.807

你的情况是什么？它是单个列表项还是主列表视图？如果是listview，则尝试处理这种情况

```
case MotionEvent.ACTION_MOVE : 
//Check position here, if it is out of your view, then change the color back. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T12:49:08.513

在您的情况下，您需要 ACTION_UP 或 ACTION_DOWN 事件而不是 ACTION_MOVE 因此为避免 ACTION_MOVE 您可以执行以下操作：

```
if(event.getAction() == MotionEvent.ACTION_DOWN)
    {
         isDown = false;            
    }
    if(event.getAction() == MotionEvent.ACTION_UP && !isDown)
    {
        // action you want to perform
    }
    if(event.getAction() == MotionEvent.ACTION_MOVE)
    {
        isDown = true;
    } 
```

就更改颜色而言，您可以将上一个视图存储在全局变量中，并且在进行下一次触摸时，您可以将该全局视图颜色更改为正常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T12:49:21.163

如果您想在单击/触摸时突出显示 ListView 项目，最好使用选择器而不是覆盖 OnTouchListener()。

如果要设置颜色，则需要 StateListDrawable。您可以使用 android:listSelector 属性在您的列表中设置它，在 XML 中定义可绘制对象：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
  <item android:state_enabled="false" android:state_focused="true"
        android:drawable="@drawable/item_disabled" />
  <item android:state_pressed="true"
        android:drawable="@drawable/item_pressed" />
  <item android:state_focused="true"
        android:drawable="@drawable/item_focused" />
</selector> 
```

或者您可以对 ListView 的项目使用相同的选择器。

# java - C中用于字节的包装类，如java Byte，Integer，String，Double？

> ID：11777463
> 
> 赞同：1
> 
> 时间：2012-08-02T12:29:16.317
> 
> 标签：java, c

在Java Byte wrapper 类中有像

```
byte-Byte
int-Integer
float-Float etc 
```

我想在 c 中使用包装类，所以任何人都让我知道如何在 c 中使用包装类以及如何在 c 中编写它？

爪哇：

```
Byte arr= 0x03; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T12:32:57.573

在 C 中根本没有类。您可以创建一个带有 char 成员的结构，但我不确定您为什么要这样做。

在 C++ 中，您可以创建一个包装类。您只需要定义与 char 之间的隐式转换来模拟自动装箱，以及您认为包装类应该具有的任何方法。

此外，C 和 C++ 中 Java 'byte' 类型的等价物是`signed char`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T12:32:41.333

在 C 中，您编写`char arr = 0x03;`. POD 类型没有“包装器”或“装箱”。而且你真的不需要它们。

# powershell - 根据“creationdate”复制文件和创建新文件夹

> ID：11777466
> 
> 赞同：3
> 
> 时间：2012-08-02T12:29:37.397
> 
> 标签：powershell, get-childitem, copy-item

我正在计算我的图片文件夹中的所有文件

```
Get-ChildItem C:\pictures -force | Group-Object extension | Sort-Object count -descending | ft count,name -auto 
```

然后我将我所有的 MTS 文件（视频）复制到一个单独的文件夹中

```
Get-ChildItem C:\pictures -force -recurse -include *.MTS | Copy-Item -Destination c:\video 
```

这很好用。但是，如何为每年创建一个文件夹，`c:\video`然后复制相应的文件？

**更新：**

谢伊帮助我完成了这项工作，我现在有以下代码：

```
# Create a folder for each year and move the specified files to the corresponding folders
Get-ChildItem $fromFolder -Force | 
Group-Object {$_.CreationTime.Year} | Foreach-Object {

    # Testing to see if the folder exist
    if(!(Test-Path $toFolder\$($_.Name))) { 
        $folder = New-Item -Path "$toFolder\$($_.Name)" Itemtype Directory -Force 
        echo "Created $toFolder\$($_.Name)"
    } else {
        echo "Folder $toFolder\$($_.Name) exist"
    }

    # Testing to see if the file exist in the target directory
    if(!(Test-Path $_.group)) { 
        $_.group | Copy-Item -Destination $folder.FullName
        echo "Copyied $_ to $folder"
        } else {
            echo "File exist"
        }
} 
```

它测试文件夹OK，但跳过所有`Test-Path`文件。我是否以某种方式打破了循环？还是弄乱了管道？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T12:56:35.410

试试这个：

```
Get-ChildItem C:\pictures -Filter *.MTS -Force -Recurse | 
Group-Object {$_.CreationTime.Year} | Foreach-Object{
    $folder = New-Item -Path "c:\video\$($_.Name)" ItemType Directory -Force
    $_.Group | Where-Object { -not (Test-Path "$($folder.FullName)\$($_.Name)") } | Copy-Item -Destination $folder.FullName
} 
```

# php - Facebook 应用程序可以在粉丝专页墙上发布消息，但不能上传图片

> ID：11777469
> 
> 赞同：1
> 
> 时间：2012-08-02T12:29:47.380
> 
> 标签：php, facebook, facebook-graph-api

我已经花了太多时间来解决这个问题，已经阅读了我能找到的关于这个问题的所有内容，但还没有答案，请帮忙。

我正在尝试使用 facebook 应用程序和 Graph API 在 facebook 页面墙上发布图像：

```
<?php

$facebook = new Facebook(array(
          'appId'  => $this->settings['app_id'],
          'secret' => $this->settings['app_secret'],
          'fileUpload' => true,
));
$facebook->destroySession();
$filename = dirname(__FILE__) . '/upset.jpg';
$args = array(
    'message' => 'Test',
    'image' => '@' . realpath($filename),
    'access_token' => $this->settings['user_access_token'],
);
try {
    $result = $facebook->api($this->settings['fanpage_id'] . '/photos',
        'post', $args);
    var_dump($result);
}
catch(Exception $e) {
    echo $e->getType() . "\n" . $e->getMessage() . "\n";
} 
```

这段代码确实向页面墙发布了一条消息（当我将 '/photos' 替换为 '/feed' 时），并且真正将照片发布到 USER 墙上（当我将 $this->settings['fanpage_id'] 更改为 $ user_id) 但不是页面墙的照片。

它确实上传了图片：$result 包含上传图片的 id，我可以在 facebook 上看到它，但不是在页面的相册中，而是在用户的相册中。

PS 我试图通过调用 /accounts 来获取页面访问令牌 - 结果相同。PPS 用户访问令牌具有manage_pages、photo_upload 和其他权限（实际上除了offline_access）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T15:22:12.303

由于您似乎正在使用当前登录 facebook 用户的访问令牌，那么您可能需要获得`manage_pages`扩展权限，然后一旦获得许可，您应该能够在粉丝页面墙上发布图像。

编辑 ：

此处的扩展权限文档[https://developers.facebook.com/docs/authentication/permissions/#page_perms](https://developers.facebook.com/docs/authentication/permissions/#page_perms) 这是一个可用的教程，展示了如何使用扩展权限获取用户登录 [http://thinkdiff.net/facebook/php-sdk -3-0-graph-api-base-facebook-connect-tutorial/](http://thinkdiff.net/facebook/php-sdk-3-0-graph-api-base-facebook-connect-tutorial/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-02T15:40:27.990

似乎解决了。我真的需要使用页面访问令牌而不是用户，而且您不需要参数中的“'no_story' => 1”。

# c# - 在不同浏览器中禁用 RadGrid 的 CommandItemTemplate 控件

> ID：11777477
> 
> 赞同：0
> 
> 时间：2012-08-02T12:30:23.247
> 
> 标签：c#, asp.net, telerik, radgrid

我正在尝试禁用 radgrid 的 CommandItemTemplate 内的锚控件。它在 IE 浏览器中运行良好，但在 chrome、firefox 等其他浏览器中运行良好......有人可以帮我解决这个问题吗？

代码：

```
 HtmlAnchor ExportLink = new HtmlAnchor();
        GridItem[] items =
            this.rgCycles.MasterTableView.GetItems(GridItemType.CommandItem);
ExportLink.Disabled = true; 
```

HTML：

```
 <CommandItemTemplate>
                <asp:Image ID="AddRecord" runat="server" ImageUrl="~/_layouts/images/RMS/Pb - Add New.png" 
                    AlternateText="Add Record" />                    
                <a href="#" target="_blank" onclick="return ShowExportAppraisalDialog();" runat="server" id="Export">
                    <asp:Image ID="ExportPortfolio" runat="server" ImageUrl="~/ExportIcon.png"
                        AlternateText="Export Portfolio" Height="16px" Width="16px" />
                    Export
                </a>
            </CommandItemTemplate> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T12:34:02.540

尝试使用此代码 - 已启用

```
ExportLink.Enabled = false; 
```

# cordova - 如何在 sencha touch 中实现网格

> ID：11777478
> 
> 赞同：1
> 
> 时间：2012-08-02T12:30:24.397
> 
> 标签：cordova, sencha-touch, extjs, sencha-touch-2, sencha-architect

如何在 sencha touch 中实现网格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T13:16:11.143

看看[https://github.com/mitchellsimoens/Ext.ux.touch.grid](https://github.com/mitchellsimoens/Ext.ux.touch.grid) 这是 Sencha Touch 的网格实现。

# php - Cakephp 错误消息可能是我的 .htaccess 文件

> ID：11777481
> 
> 赞同：3
> 
> 时间：2012-08-02T12:30:30.133
> 
> 标签：php, mysql, cakephp

我试图让这个 cakephp 项目在我的本地主机上运行，​​但总是收到一些错误消息

***我收到此错误消息：***

警告：include(Cake\bootstrap.php) [function.include]：无法打开流：第 77 行的 C:\wamp\www\cts\app\webroot\index.php 中没有这样的文件或目录

警告：include() [function.include]：在 C 中打开 'Cake\bootstrap.php' 以包含 (include_path='C:\wamp\www\cts\lib;.;C:\php\pear') 失败： \wamp\www\cts\app\webroot\index.php 在第 77 行

致命错误：找不到 CakePHP 核心。检查 APP/webroot/index.php 中 CAKE_CORE_INCLUDE_PATH 的值。它应该指向包含你的 \cake 核心目录和你的 \vendors 根目录的目录。在第 86 行的 C:\wamp\www\cts\app\webroot\index.php

***结尾***

***代码******** Index.php 文件：

```
if (!defined('CAKE_CORE_INCLUDE_PATH')) {
    if (function_exists('ini_set')) {
        ini_set('include_path', ROOT . DS . 'lib' . PATH_SEPARATOR . ini_get('include_path'));
    }
    /**line 77**/
    if (!include('Cake' . DS . 'bootstrap.php')) {
        $failed = true;
    }
} else {
    if (!include(CAKE_CORE_INCLUDE_PATH . DS . 'Cake' . DS . 'bootstrap.php')) {
        $failed = true;
    }
}

if (!empty($failed)) {
    /**line 86**/
    trigger_error("CakePHP core could not be found.  Check the value of CAKE_CORE_INCLUDE_PATH in APP/webroot/index.php.  It should point to the directory containing your " . DS . "cake core directory and your " . DS . "vendors root directory.", E_USER_ERROR);
} 
```

***文件结尾***

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-02T12:50:01.833

检查 index.php 的第 59 行，您会看到类似

```
//define('CAKE_CORE_INCLUDE_PATH', ROOT . DS . 'lib'); 
```

取消注释该行，如果它不起作用，则将完整路径硬编码到您的 lib/ 文件夹，该路径包含一个包含所有 CakePHP 库的 Cake 文件夹。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-13T06:24:15.477

如果要将 CakePHP 项目从一个目录复制到另一个目录，请确保复制所有必需的目录。

在将我的项目从旧目录复制到新目录时，我错误地忽略了 CakePHP 的`/lib`目录，认为它包含不必要的 git 或日志文件。

我错了，将目录复制`/lib`到新项目目录为我解决了致命错误。

# html - 我们是否需要自己实现双缓冲 ?

> ID：11777483
> 
> 赞同：11
> 
> 时间：2012-08-02T12:30:45.087
> 
> 标签：html, gwt, canvas

我开始使用 Canvas（带有 GWT），我们需要自己实现双缓冲吗？想知道浏览器是否已经以某种方式为我们实现了这一点。

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-02T15:21:47.747

You absolutely do not need to implement double buffering yourself and doing so would be a waste of time and performance.

Lucky for us every canvas implementation implements it behind-the-scenes for you.

Here's a simple example of it in action: [http://jsfiddle.net/HYVLj/](http://jsfiddle.net/HYVLj/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-10-27T13:21:24.640

我知道这是一个相当古老的线程，但我想指出 Simon Sarris 中的 Fiddle 答案似乎是错误的。当我在谷歌浏览器上尝试它时，我在第 10 行和第 11 行之间（就在循环之前）插入了一条警告语句，方块消失了，只是在我关闭警告窗口后重新出现。似乎循环没有正确执行。也许javascript对其进行了优化。无论如何，在我看来，没有完成双缓冲。如我错了请纠正我。

# node.js - Mongoose 函数返回两个字段总和大于指定值的文档

> ID：11777486
> 
> 赞同：1
> 
> 时间：2012-08-02T12:30:50.467
> 
> 标签：node.js, mongodb, mongoose

我有一个集合，我想返回他们的视图 + 喜欢大于 100 的文档。我怎样才能使用 mongoose 方法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T12:58:41.677

这不是一个标准查询，您可以在 mongodb 中查找，而无需对整个集合进行 map-reduce。

这是一个关于如何使用 mongoose 进行 map-reduce 查询的教程（看起来它实际上使用了底层的 node-mongodb-native 驱动程序）：[http ://wmilesn.com/2011/07/code/how-to-map- reduce-with-mongoose-mongodb-express-node-js/](http://wmilesn.com/2011/07/code/how-to-map-reduce-with-mongoose-mongodb-express-node-js/)

不过，Mongoose 有一个妙招，可以在这种情况下为您提供帮助。只需创建一个[中间件](http://mongoosejs.com/docs/middleware.html)，使用每个`save()`or`update()`操作的组合分数更新字段。这种方法的一个优点是您可以在此组合字段上创建索引并进行超快速查找 - 比 map-reduce 快得多。

每次保存文档时，此[中间件页面](http://mongoosejs.com/docs/middleware.html)或[插件页面](http://mongoosejs.com/docs/plugins.html)显示`schema.pre('save', ...)`可用于自动更新字段的页面。`totals`然后，您可以对总计字段 > 100 进行正常查询。

# php - Zend 应用程序和点击欺诈检测

> ID：11777487
> 
> 赞同：0
> 
> 时间：2012-08-02T12:30:53.207
> 
> 标签：php, model-view-controller, zend-framework, session

嗨，我有一个 zend 应用程序，它生成基于广告的内容，当用户注册时，他可以通过将 URL 复制粘贴到 fb、tw 或 g+ 来开始共享广告。问题是我检测到来自用户的同一 IP 地址的多次点击……有些在几秒钟内点击了 200 次。防止来自类似 IP 地址的多次点击的最佳方法是什么？需要代码形式的想法..谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T12:40:01.253

由于网络设置，一家拥有 1,000 名员工的公司可能都拥有相同的 IP 地址。如果他们中的 200 人都收到一封电子邮件备忘录以单击某项内容，则可能看起来好像同一个 IP 在几秒钟内单击了一个链接 200 次。（我的公司就是这样做的。不过，我们没有 1,000 名办公室员工。）因此，如果您希望将这些人中的每一个人都计算在内，那么您就必须考虑到这一点。

(1) 要做的一件事是在第一次点击时设置一个 cookie，然后如果他们有该 cookie，则忽略进一步的点击。这将对上述内容有所帮助，因为它将适用于每台 PC。由于这种情况，您不会与可能试图玩弄系统的人打交道，他们可能会启用 Cookie。

(2) 第二件事是存储IP地址。您可以在给定时间范围内允许“x”次点击，然后在该时间之后开始拒绝来自该 IP 地址的点击，直到“Y”时间过去。这将有助于那些试图玩弄系统的人，以及由于上述 #1 而更有可能没有启用 cookie 的人。

您可以将它们存储在带有时间戳的数据库中，然后在时间戳上应用一些业务逻辑，以根据“每个 IP 的每秒点击次数”来接受您想要接受的内容。

现在，这都是试图防止点击欺诈的一种相当“简单”的方式。搜索引擎和其他销售广告的企业采用更复杂的逻辑来避免点击欺诈。他们还将查看诸如用户代理字符串等指标。

我希望这会有所帮助！

干杯!

# iphone - xcode 4.3比较字符串

> ID：11777489
> 
> 赞同：1
> 
> 时间：2012-08-02T12:30:59.873
> 
> 标签：iphone, objective-c, cocoa-touch, nsstring, xcode4.3

我想知道如何在两个字符串之间计算第一个字母，例如 string1 以字母“a”开头，而 string2 以字母“b”开头，那么 string1 必须首先显示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T12:37:51.190

不要重新发明轮子。采用

```
NSComparisonResult order = [firstString compare:secondString]; 
```

反而。（[NSComparisonResult 文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Miscellaneous/Foundation_Constants/Reference/reference.html#//apple_ref/c/tdef/NSComparisonResult)）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T12:33:51.707

这并不严格符合 UNICODE 字符串比较规则，这对于非拉丁字母来说很复杂，但至少很快：

```
NSString *first = [string1 characterAtIndex:0] <= [string2 characterAtIndex:0] ? string1 : string2; 
```

# sql-server - 了解 SQL Server 超时

> ID：11777491
> 
> 赞同：0
> 
> 时间：2012-08-02T12:31:04.913
> 
> 标签：sql-server, sql-server-2008, entity-framework, tsql, transactions

使用实体框架并有几个关于超时的问题。

以下文章[http://blogs.msdn.com/b/khen1234/archive/2005/10/20/483015.aspx](http://blogs.msdn.com/b/khen1234/archive/2005/10/20/483015.aspx) 说

```
A client signals a query timeout to the server using an attention event. An attention 
event is simply a distinct type of TDS packet a SQL Server client can send to it. 
```

所以 SQL Server 本身（没有调控器）不能尊重发出的命令的超时并在超时到期后将其杀死。以以下查询为例

```
var x = objectContext.Employees.Select(e => e.FirstName); 
```

我们发出查询 - 如果我们假设查询需要 40 秒才能完成，并且默认命令超时为 30 秒。什么时候触发注意事件？

A) 在 30 秒时？

B）40秒后（当查询在40秒后返回时，EF检查它是否大于默认值然后抛出异常）？

在这里，我还假设代码也会抛出 SqlException 并自动触发注意事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T12:33:38.080

在 30 秒时。将超时量视为“等待时间不超过...”

超时将触发`SqlException`. “注意事件”低于此级别。

客户端（EF 或其他）跟踪查询，并在超时后通知服务器它不再对结果感兴趣，并引发异常。您的客户端代码应该适当地处理该异常。

# asp.net-mvc - ASP MVC ViewModels 和 EditorTemplates 中 DRY 数据注释的最佳实践

> ID：11777493
> 
> 赞同：1
> 
> 时间：2012-08-02T12:31:28.317
> 
> 标签：asp.net-mvc, asp.net-mvc-3, viewmodel, data-annotations, dry

我有以下工作系统并寻找使其干燥的方法：

```
public class EMailMetaData
{
  [Display(Prompt="myemail@mydomain.com"])
  public string Data;
}
public class PhoneMetaData
{
  [Display(Prompt="+1 (123) 456-7890"])
  public string Data;
}
public class AddressMetaData
{
  [Display(Prompt="Central st. W., St Francisco, USA"])
  public string Data;
}
// 7 more metadata templates

public class ContactVM
{
  [Required]
  public string DataLabel { get; set; }

  [Required(ErrorMessage="Please fill in the data field")]
  public string Data { get; set; }
}

[MetadataType(typeof(EmailMetaData))]
EmailVM : ContactVM
{
}
[MetadataType(typeof(PhoneMetaData))]
PhoneVM : ContactVM
{
}
[MetadataType(typeof(AddressMetaData))]
AddressVM : ContactVM
{
}
// 7 more contact view models 
```

控制器显然是用正确的内容初始化它们，在视图中，我运行了 ContactVMs 的 foreach 循环，每个联系人都有 TemplateEditor：EmailVM.cshtml、PhoneVM.cshtml、AddressVM.cshtml UrlVM.cshtml 等。

主视图看起来（省略所有设置和细节，如下所示：

```
@model ContactsVM
foreach (var contact in Model.Contacts)
{
  @Html.EditorFor(m => contact)
} 
```

在 EditorTemplates 下

```
@model EmailVM
@Html.EditorFor(model => model.DataLabel)
@Html.EditorFor(model => model.Data)
<br />
@Html.ValidationMessageFor(model => model.DataLabel)
@Html.ValidationMessageFor(model => model.Data) 
```

...显然，我定义的每个视图模型都没有更多的编辑器模板。

所以简单来说 - 非常相似的联系人类型，在水印、命名、验证方面略有不同，但基本上所有字符串都具有相同的字段（地址是一个长字符串而不是结构，对所有这些都相同）。

我的问题不是针对水印的，它可以是任何属性——名称、描述、提示等。

```
[Display(Name="name", Description="description", Prompt="prompt")] 
```

它几乎可以正常工作并显示正确的标签和水印，但这似乎是巨大的 DRY 违规，因为除了模型类型之外，所有模板编辑器都完全相同。我在这里展示的是简化以专注于手头的问题，主视图和编辑器模板比您在此处看到的要复杂得多，因此重复是巨大的。

你们中的任何人都可以提出更好的方法让它不重复这么多代码吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T07:01:25.420

（我正在添加另一个答案，因为这是解决问题的完全不同的方法）

视图模型和视图的结构都表明我们正在查看一些元元元数据，我开始讨厌这种模式，抱歉。

让我们首先采取一种简单的方法，找出我们的模型*是什么。*我想它是这样的：

```
public class ContactsVM
{
    [Required]
    public string EmailLabel {get;set;}

    [Display(Prompt="myemail@mydomain.com"])
    [Required(ErrorMessage="Please fill in the data field")]
    public string Email {get;set;}

    [Required]
    public string PhoneLabel {get;set;}

    [Display(Prompt="+1 (123) 456-7890"])
    [Required(ErrorMessage="Please fill in the data field")]
    public string Phone {get;set;}

    [Required]
    public string AddressLabel {get;set;}

    [Display(Prompt="Central st. W., St Francisco, USA"])
    [Required(ErrorMessage="Please fill in the data field")]
    public string Address {get;set;}

    // 7 more property pairs
} 
```

通俗易懂，简单明了，通俗易懂。是的，它需要在视图中进行一些代码重复（意味着两个`EditorFor`s 后跟`ValidationMessage`），但根据我的经验，这不是问题，因为在大多数情况下，有一天您将不得不为一个（并且只有一个）属性调整此代码。如果您不喜欢这样 - 现在，还有另一种解决方案：

```
@* let's assume that props is a string[] holding meaningful property names, e.g "Email", "Phone", "Address". You can even get it dynamically from reflection
@foreach (var property in props)
{
    @Html.Editor(property + "Label") @Html.Editor(property)
    <br />
    @Html.Validation(property + "Label") @Html.Validation(property)
} 
```

**动态模型更新**

现在，如果我们在模型中有可变数量的数据项（当我每天使用它时我变得更加讨厌它），上述所有方法都将不起作用，所以现在我们也必须应对它。我们试图实现的实际上是与上面相同的视图代码，但现在我们的模型将不包含这些属性。所有的魔法都在于两件事。

1.  我们将模型变成类似的东西`Dictionary`，包含指向字符串数据的字符串键。我们如何填充它并不重要。
2.  我们提供了我们自己的`ModelMetadataProvider`，它将覆盖我们模型类的默认行为，如下所示：
    1.  给定模型实例，它将`GetProperties`通过枚举上述字典并`ModelMetadata`从这些字符串创建来响应
    2.  每个创建`ModelMetadata`的都应该包含对应于我们字典中的值的 ModelValue
    3.  的所有其他属性`ModelMetadata`都根据我们的意愿填充（我们不再需要 DataAnnotations，我们将在 provider 中注入所有值）

这需要大量的工作和一些尝试，但最终它会奏效，我会根据我的经验说。但我不会推荐这种*整体*设计方法，因为它需要……你已经看到了大量的工作，这只是一个开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T13:34:14.657

（您的问题源于您的视图模型不是特定的，而是一种“针对所有问题的通用解决方案”。）

但是，仍然有一个非常简单的解决方案：为所有类型创建一个*命名*编辑器模板，具有`ContactVM`模型类型，并使用`@Html.EditorFor(m => contact, "YourTemplateName")`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T14:10:48.397

回答我自己的问题：

这是一种生硬的解决方案，但比建议的解决方案要简单得多，最重要的是，与直接解决方案相比，它需要最少的重复（尽管考虑到我们处于面向对象的世界中，这并不太优雅）：

1.  定义一个带有基类（或接口，但是你定义它）的视图作为你的模型。
2.  在视图中将模型变量转换为正确的类
3.  在视图中，使用 cast 变量而不是模型

因此 Contact.cshtml 将如下所示：

```
@model ContactVM
@* Do tons of stuff that is the same between views (not depending on data annotation) *@
@Html.Partial("_ContactDataAnnotation", Model)
@* Continue doing lots of stuff that is the same between all those classes 
```

调用 Contact.cshtml 编辑器模板将以下列方式进行（感谢 Serg）：

```
@foreach (var c in Model.Contacts)
{
  @Html.EditorFor(m => c, "Contact")
} 
```

专用于仅显示正确数据注释 _ContactDataAnnotation.cshtml 的局部视图将如下所示：

```
@using <My Model Namespace>
@model ContactVM
@switch (Model.GetType().Name)
{
  case "EmailVM":
    EmailVM e = Model as EmailVM;
    @Html.EditorFor(model => e.DataLabel)
    @Html.EditorFor(model => e.Data)
    <br />
    @Html.ValidationMessageFor(model => e.DataLabel)
    @Html.ValidationMessageFor(model => e.Data)
    break;
  case "PhoneVM":
    PhoneVM p = Model as PhoneVM;
    @Html.EditorFor(model => p.DataLabel)
    @Html.EditorFor(model => p.Data)
    <br />
    @Html.ValidationMessageFor(model => p.DataLabel)
    @Html.ValidationMessageFor(model => p.Data)
    break;
  // same thing 7 more times for all children of ContactVM, since MVC does not applying polymorphism to data annotations UNFORTUNATELY
  default:
    @Html.EditorFor(model => model.DataLabel)
    @Html.EditorFor(model => model.Data)
    <br />
    @Html.ValidationMessageFor(model => model.DataLabel)
    @Html.ValidationMessageFor(model => model.Data)
  } 
```

这样，重复将只存在于需要的地方，而不是用不同的名称和模型类重复相同的编辑器模板 10 次。

我知道这与“最佳实践”问题的标题相矛盾，但不幸的是，这是最简单、最简约的方法。正如 Serg 所指出的，其他解决方案过于复杂，需要深度 MVC 基础设施干预，我不喜欢在这方面花费时间，以及注入提示和工具提示，而不是在数据注释中定义，这似乎是一个标准装饰和验证模型的方式。

我认为我的解决方案是一种解决 MVC 限制的方法，即缺乏数据注释的多态性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T15:50:38.200

您应该能够创建接口，例如

```
public interface IContactData
{
string Data{get; set;};
.
.
.
} 
```

在您的类中实现该接口

```
public class EMailMetaData : IContactData
{
  [Display(Prompt="myemail@mydomain.com"])
  public string Data{get; set;};
...
}
public class PhoneMetaData  : IContactData
{
  [Display(Prompt="+1 (123) 456-7890"])
  public string Data{get; set;};
....
} 
```

并在您的编辑器模板中（一应俱全）使用

```
@model IContactData 
```

# css - css 调整大小属性 - 更改调整大小图标的属性

> ID：11777504
> 
> 赞同：3
> 
> 时间：2012-08-02T12:32:22.807
> 
> 标签：css, resize

我有一个带有“resize”属性的 div。默认情况下，您只能通过拖动窗口的右下角来更改大小。我想知道是否有可能改变它的行为，例如它的**外观**、**大小**或**位置**。

具体来说，我想做的是允许用户在边缘（而不是角落）重新调整窗口的大小，类似于 css 中的 OS 窗口（最好只在一侧）。

![例子](../Images/a3d109992aec1c050a71ecca8bc9f153.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T12:46:27.173

不是标准的CSS。缩放器小部件，如滚动条，通常来自操作系统。您*可以*使用自定义浏览器选择器对其进行样式设置，但这取决于浏览器。Webkit 你可以使用`::-webkit-resizer`选择器做一些有限的样式。

```
#somediv {
    resize: both;
}

#somediv::-webkit-resizer {
    background-color: red;
} 
```

但是据我所知，您无法调整其宽度。

# java - 如何在java中使用正则表达式截断文本

> ID：11777508
> 
> 赞同：1
> 
> 时间：2012-08-02T12:32:35.553
> 
> 标签：java, regex

我正在尝试使用正则表达式截断我的 URL，例如，如果我有

```
http://abcdef.defgh/klmno.jsp/abdcefg 
```

我需要阅读 url，直到`http://abcdef.defgh/klmno.jsp`剩下的我需要忽略。

如果我使用

```
Pattern p = Pattern.compile("href=\".*"); 
```

我正在获取完整的网址，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T12:50:56.087

虽然正则表达式当然可以满足您的要求，但这样做会更有效率：

```
String url = "http://abcdef.defgh/klmno.jsp/abdcefg";
String desired = url.subString( 0, url.lastIndexOf( '/' ) ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T12:45:22.717

```
String test = "href=\"http://abcdef.defgh/klmno.jsp/abdcefg\"";    
System.out.println(test);    

Matcher mtch = Pattern.compile("href=\"(http://.*\\.jsp).*\"").matcher(test);    
System.out.println(mtch.group(1)); 
```

会打印出来：

```
href="http://abcdef.defgh/klmno.jsp/abdcefg"
http://abcdef.defgh/klmno.jsp 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T12:54:01.340

如果您想在之后忽略所有内容，`.jsp`则需要：

```
String foo = "http://abcdef.defgh/klmno.jsp/abdcefg";
String bar = foo.replaceAll("\\.jsp.*", ".jsp"); 
```

也就是说，取`.jsp`（转义句点，`\`否则它意味着*“任何字符”*）和`.jsp`( `.*`) 之后的所有内容，并将其替换为 just `.jsp`。

或者，如果您只想捕获前缀为`href=`then 的内容，您可以使用：

```
String foo = "href=\"http://abcdef.defgh/klmno.jsp/abdcefg\"";
String bar = foo.replaceAll("(href=.*\\.jsp)[^\"]*\"", "$1"); 
```

也就是说，捕获以 , 开头的所有内容`href=`（`.jsp`贪婪匹配将确保直到 final `.jsp`），并将其用作反向引用（`$1`）。排除`.jsp`最后报价之后的所有内容`[^\"]*\"`。

# ios - dateFromString 返回 nil

> ID：11777511
> 
> 赞同：1
> 
> 时间：2012-08-02T12:32:44.937
> 
> 标签：ios, nsdate, nsdateformatter

我知道这个问题已经在 SO 上讨论过很多次，但没有一个结果能解决我的问题。这是代码片段，

```
NSDateFormatter* df = [[NSDateFormatter alloc]init];
[df setDateFormat:@"yyyy-MM-dd'T'HH:mm:ss.SSZ"];         
NSDate* date = [df dateFromString:dateTaken]; 
/* dateTaken gets its value
 from the server as 2006-01-23T20:50:27Z */ 
```

我已经尝试添加断点并检查，`dateFromString`正在返回`nil`. 一旦我得到一个日期对象，我会改变它的格式并显示一个不同的字符串，但我没有得到一个日期对象本身。

这里可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T12:55:56.587

似乎你的格式化程序是错误的。应该是：
`yyyy-MM-dd'T'HH:mm:ss'Z'`
2006-01-23T20:50:27Z

将其与您拥有的字符串匹配，并且没有 SSZ 组件。

编辑：
在查看了另一个答案后，我很紧张我错了，所以我尝试了以下方法：
`NSString* dateTaken = @"2006-01-23T20:50:27Z";
NSDateFormatter* df = [[NSDateFormatter alloc]init];
[df setDateFormat:@"yyyy-MM-dd'T'HH:mm:ss.SS'Z'"];
NSDate* date = [df dateFromString:dateTaken]; //nil
[df setDateFormat:@"yyyy-MM-dd'T'HH:mm:ss'Z'"];
date = [df dateFromString:dateTaken]; // Not nil`

似乎使用您提供的字符串，您需要我刚刚提供的第二种格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T12:39:16.400

格式字符串的最后一部分应该是

```
SS'Z' 
```

代替

```
SSZ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T13:07:34.233

检索到的格式错误验证要转换的格式

# java - Java 链表数组

> ID：11777513
> 
> 赞同：4
> 
> 时间：2012-08-02T12:32:46.927
> 
> 标签：java

我正在尝试编写一个可以允许多个值的自定义哈希表。

我们正在通过以下方式进行：

1.  创建一个大小为 Integer_MAX（自定义链表）的链表数组。
2.  将值（int's）插入到编号为键编号的链接列表中。

表示结构如下：

```
value1 -> value6
NULL
Null
value3 -> value7
Null
...
...(until Int-Max) 
```

现在，由于我们将存储近 5 亿个键值对，因此至少有 16 亿个链接列表将被浪费。

现在，根据我工作地点的建议，我正在尝试构建具有如下结构的哈希表：

```
1 -> value1 -> value6
0
0
1 -> value3 -> value7  // here 0/1 bit defines linked lists exits or not
0
...
...(until Int-Max) 
```

任何人都可以帮助我建立这种结构吗？

编辑：

1.  [我们为什么要这样做可以在这里找到。](https://stackoverflow.com/questions/11765517/java-custom-hash-map-table-some-points)
2.  当前代码（由[Louis Wasserman](https://stackoverflow.com/users/869736/louis-wasserman)编写）可在[此处找到](https://gist.github.com/3230417)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T12:34:34.413

您不能创建泛型类型的数组，因为数组是具体类型。泛型是通过擦除实现的。

# activemq - ActiveMq 配置

> ID：11777514
> 
> 赞同：2
> 
> 时间：2012-08-02T12:32:51.180
> 
> 标签：activemq, apache-camel

我有一个 activeMQ 服务器，我正在使用骆驼来消费消息。当前配置是 25 个并发消费者急切地在每个会话中接收尽可能多的消息，但我需要将每个消费者在一个会话中消耗的消息数限制为 1。我在任何地方都找不到这样的配置。有人能指出我正确的方向吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T20:19:18.963

如果您的目标是更好地在消费者之间传播消息，那么您应该降低队列预取限制

见[http://activemq.apache.org/what-is-the-prefetch-limit-for.html](http://activemq.apache.org/what-is-the-prefetch-limit-for.html)

# typo3 - 空变量的排版条件

> ID：11777519
> 
> 赞同：4
> 
> 时间：2012-08-02T12:33:06.840
> 
> 标签：typo3, typoscript

如果 GET 变量为空，是否可以使用 Typoscript 条件为 TypoScript TEXT 分配不同的值？

类似的东西：

```
xxxx.1 = TEXT
[globalVar = GP:print != ""]
xxxx.1.value = Absent
[else]
xxxx.1.value = Present
[end] 
```

当然在这里`!= ""`不起作用，那我应该改用什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-10T12:01:15.337

这是一个带有“如果”的例子：

```
1 = TEXT
1 {
    value = Absent
    override = Present
    override.if {
        isTrue.data = GP:print
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-01-11T14:03:13.123

使用*globalString*也可以使用正则表达式作为比较。根据上下文，这也可能是一个可行的解决方案。

```
[globalString = GP:test = /.+/]
# This is only evaluated if GP:test contains one or more characters
[global] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T09:27:24.757

起初，打字稿中没有！=。您只能将 >、<、= 用于条件。

根据您的需要，您可以使用它：

```
[globalVar = GP:view = print]

[end] 
```

只需定义一个变量“view”，它可以成为值“print”。

*   您还可以使用“if”和“override”、“ifEmpty”和“required”。
*   以下是印刷文字中的其他一些条件示例：[http ://www.pi-phi.de/19.html](http://www.pi-phi.de/19.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-27T10:18:25.007

例如，我发现使用 cookie，您可以不设置任何值，它会看到它是空的吗？

```
[globalVar = _COOKIE|user_test_score = ] 
```

所以也许还有：

```
[globalVar = GP:view = ] 
```

不确定它是否是有意的，但无论如何都适用于 cookie。

# c++ - gdb 中的 C++ static_cast 返回与 gcc 不同的结果

> ID：11777523
> 
> 赞同：2
> 
> 时间：2012-08-02T12:33:36.780
> 
> 标签：c++, gcc, gdb, double

我正在调查一个在 static_casting long double to double 时 gcc 和 gdb 的奇怪行为的问题。我有类似以下代码的内容：

```
const double xDelta = 60.0;
int xSplits = 3;
const long double xStepL = static_cast<long double>(xSplits) / xDelta;
const double xStep = static_cast<double>(xStepL); 
```

基本上它除以 3/60，所以结果应该是 0.05。使用简单`double`值操作时，值`xStep`是`0.050000000000000003`，因此决定使用更高精度的 12 字节`long double`。`xStepL`上例中的值为`0.05000000000000000000067762635780344`。当将此值转换回 时`double`，实际上`0.050000000000000003`又是。但是，当使用 gdb 检查该值时，它会打印以下内容：

```
(gdb) p xStep
$1 = 0.050000000000000003
(gdb) p static_cast<double>(xStepL)
$2 = 0.049999999999999996 
```

知道为什么结果不同吗？我真的希望它是第二个。任何人都知道如何实现这一目标？

顺便说一句，我使用的是 GCC 4.3.4 和 GDB 7.2.50。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T14:01:06.930

这看起来像 gdb 中的一个错误。

`long double`转换 from to的指令`double`是`fldt`（10 字节浮点加载）后跟`fstpl`（8 字节浮点存储）。当您执行降低精度的浮点存储时，它将对操作数进行四舍五入，从`0.05000000000000000000067762635780344`到`0.050000000000000003`。看起来 gdb 正在截断操作数，从`0.05000000000000000000067762635780344`到`0.049999999999999996`。在浮点十六进制中：

```
0x1.99999999999999999999ap-5 -> 0x1.999999999999ap-5 (gcc, correct)
0x1.99999999999999999999ap-5 -> 0x1.9999999999999p-5 (gdb, incorrect) 
```

[讨论](https://chat.stackoverflow.com/transcript/message/4772390#4772390)表明这已在最新版本的 gdb (7.4.50) 中得到修复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T12:50:22.613

我相信问题是`static_casts`没有被调用相同的值。代码中的值使用更高精度的寄存器值调用，而从 gdb 调用的值将在内存中使用 long double。我不确定允许编译器执行此操作的确切位置，但我猜这是一个 - 所以答案最终可能会因一个 elp 而不同。

# c# - 使用自定义 SortComparer 时如何冻结 datagridview 中的第一行

> ID：11777526
> 
> 赞同：0
> 
> 时间：2012-08-02T12:33:42.920
> 
> 标签：c#, visual-studio-2010, datagridview

使用自定义 SortComparer 时如何冻结 Datagridview 中的第一行？没有 SortComparer`row[x].froozen = true;`就可以做到。但是使用 SortComparer 它不起作用

这是我的 SortComparer 代码：

```
DataGridView dg = (DataGridView)sender;

        if (e.Column.Index == 0)
        {
            e.SortResult = System.String.Compare(e.CellValue1.ToString(), e.CellValue2.ToString());

            if (e.SortResult == 0)
            {
                e.SortResult = System.String.Compare(
                    dg.Rows[e.RowIndex1].Cells[1].Value.ToString(),
                    dg.Rows[e.RowIndex2].Cells[1].Value.ToString());
            }

            e.Handled = true;
        }
        else if (e.Column.Index == 1)
        {

            e.SortResult = System.String.Compare(e.CellValue1.ToString(), e.CellValue2.ToString());

            if (e.SortResult == 0)
            {
                e.SortResult = System.String.Compare(
                    dg.Rows[e.RowIndex1].Cells[0].Value.ToString(),
                    dg.Rows[e.RowIndex2].Cells[0].Value.ToString());
            }
            e.Handled = true;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T19:07:00.653

您可以扩展您的 SortComparer 以检查第一行索引是否是顶行。如果是，请设置`e.SortResult = 0`或运行您想要排序的任何代码。

```
 private void dataGridView1_SortCompare(object sender,  DataGridViewSortCompareEventArgs e)
  {
       DataGridView dg = (DataGridView)sender;
       if (e.RowIndex1 == 0) {
           e.SortResult = 0;
           e.Handled = true;
       } else {
         // rest of your comparison code
       }
  } 
```

或者您可以通过检查该行是否被冻结来使其更加精美：

**编辑**以下内容不起作用，因为由于某种原因，Row 的 Frozen 属性默认设置为 false

```
 private void dataGridView1_SortCompare(object sender,  DataGridViewSortCompareEventArgs e)
  {
       DataGridView dg = (DataGridView)sender;
       if (dg.Rows[e.RowIndex1].Frozen) {
           e.SortResult = -1;
           e.Handled = true;
       } else {
         // rest of your comparison code
       }
  } 
```

**编辑**而`e.SortResult = 0`不是 -1 作为相等的行将根据它们的当前位置进行排序。

# javascript - 将 Jsonp 响应转换为文本数据？

> ID：11777527
> 
> 赞同：1
> 
> 时间：2012-08-02T12:33:48.160
> 
> 标签：javascript, jquery, json, cross-domain, jsonp

*首先，我知道 jsonp 是如何工作的。`callback ({a:1})`它从支持此类请求的服务器注入 js 代码。*

我有这个连接到 facebook 的[代码](http://jsbin.com/obonez/2/edit)，它们返回一个无效的 json 结果。

他们*确实*支持 jsonp 原因使用带有数据类型的 jquery ajax：jsonp - DOES 返回值（虽然无效）

jsonp 调用的响应是：

```
for(;;);  //<----------- the problem
{
    "__ar": 1,
    "error": 1357001,
    "errorSummary": "Not Logged In",
    "errorDescription": "Please log in to continue.",
    "payload": {
        "__dialog": {
            "title": {
                "__html": "Not Logged In"
            },
            "body": {
                "__html": "Please log in to continue."
            },
            "buttons": [
            {
                "name": "login",
                "label": "Log In",
                "handler": "goURI(\"\/login.php\", true);"
            }],
            "modal": true,
            "onloadRegister": ["setInterval(function () {\n        if (getCookie(\"c_user\") || getCookie(\"csm\")) {\n          window.location.reload();\n        }}, 5000);"]
        }
    },
    "js": ["8fTQS"],
    "resource_map": {
        "8fTQS": {
            "type": "js",
            "src": "https:\/\/s-static.ak.fbcdn.net\/rsrc.php\/v2\/y9\/r\/NXhpMFxH7x0.js"
        }
    }
} 
```

当然 - 这是一个无效的 json。

萤火虫： ![在此处输入图像描述](../Images/80521c151f6ecc0182bd0d22a14e70f2.png)

*当我将此文本粘贴到 jsonlint 并删除第一行时 - 它是一个有效的 json。*

**如果我可以**从结果 中删除该`for(;;);`行 - 我可以解析结果。

我想捕捉文本响应并`for(;;);`用空字符串替换。

我想查询文档，我注意到了这个信息：

![在此处输入图像描述](../Images/d35660def1f34dbb584394689840cb02.png)

我确实尝试过写`jsonp text`但仍然出错。

如何获得结果并`for(;;);`用空字符串替换而不显示错误？

# python - 使用python将字符串中的特定单词转换为大写或小写

> ID：11777528
> 
> 赞同：0
> 
> 时间：2012-08-02T12:33:50.347
> 
> 标签：python

我有如下 Python 字符串

```
string1='copy /q /y /d /e /i /r /h /v /s D:\path1\path2 D:\path3\path4'   
string2='copy /Q /y /D /E /i /r  D:\path2\path5 D:\path3\path4 /h /V /s'
string2='copy /q /y /D /e D:\path6\path7 D:\path8\path9 /i /R /h /V /S' 
```

我想将所有 /q,/y,/d,/e,/i,/r,/h,/v,/s 转换为大写或小写。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T12:40:00.703

您可以使用`str.split()`，遍历子字符串，将以斜杠开头的字符串转换为小写，然后`str.join()`再次：

```
" ".join(s.lower() if s.startswith("/") else s for s in string.split()) 
```

对于大写，替换`s.lower()`为`s.upper()`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T12:38:44.090

与回调一起使用`re.sub()`，将标志放在模式中的组中，并在回调中重新封装组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T12:44:18.600

这是一个使用的简单示例`re.sub`：

```
def change_case(match):
    mstr=match.group()
    if mstr.lower() == mstr:
       return mstr.upper()
    else:
       return mstr.lower()

output = re.sub(r'/.',change_case,'copy /q /y /d /e /i /r /h /v /s D:\path1\path2 D:\path3\path4')
print output #'copy /Q /Y /D /E /I /R /H /V /S D:\\path1\\path2 D:\\path3\\path4' 
```

这将转换任何“/”之后的第一个字母的大小写。如果你真的想限制你匹配的字符集，你可以只用`r'/[abcdef]'`改变 a、b、c、d、e 或 f 的大小写。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T12:45:29.827

这应该有效：

```
re.sub(re.compile('/\w'), lambda x : x.group(0).upper(), 'test /a /b') 
```

# c# - 控制台应用程序执行参数

> ID：11777531
> 
> 赞同：-1
> 
> 时间：2012-08-02T12:33:54.407
> 
> 标签：c#, console-application, command-line-arguments

我有一个应用程序，用户可以从他的许多参数开始。如果我没记错的话，我想我可以在我的应用程序中获取这些执行参数。

该应用程序是控制台应用程序。

试图谷歌它，但没有找到如何。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T12:36:32.850

你*可以*让他们使用[`Environment.CommandLine`](http://msdn.microsoft.com/en-us/library/system.environment.commandline.aspx)or [`Environment.GetCommandLineArgs`](http://msdn.microsoft.com/en-us/library/system.environment.getcommandlineargs.aspx)，但我强烈建议不要这样做。这将使您的代码更难测试。相反，将启动时的命令行参数解析为语义更有意义的形式，然后将相关选项传播到任何需要它的代码，可能通过依赖注入框架。

这样一来，您最终将更清楚哪些代码片段依赖于哪些选项，并且您还可以在不使用任何全局状态的情况下为这些类编写单元测试。您所有的命令行解析和验证也将在一个地方。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-02T12:36:22.973

你可以使用`Environment.GetCommandLineArgs()`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-02T12:37:19.403

您可以使用`Environment.CommandLine`，它为您提供命令行参数的直字符串，或者您可以使用`Environment.GetCommandLineArgs()`，它为您提供参数数组。请注意，数组中的第一个元素将是应用程序的名称。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-02T12:38:26.400

您可以将它们读入 main() 中的全局变量，然后在整个应用程序中使用它们。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-02T12:38:53.343

`Environment.CommandLine`和[`Environment.GetCommandLineArgs()`](http://msdn.microsoft.com/en-us/library/system.environment.getcommandlineargs)

最后一个选项更可取，因为它会返回一个字符串数组，其中包含在命令行上传递的每个参数。请记住，第一个（索引 0）是可执行文件名

# c# - SSIS通过C#将Excel数据导入SQL Server

> ID：11777536
> 
> 赞同：2
> 
> 时间：2012-08-02T12:34:12.037
> 
> 标签：c#, sql-server, excel, ssis

当我偶然发现这篇文章时，我刚刚开始使用 SSIS 和通过 C# 处理 Excel 文件：

[关联](http://www.codeproject.com/Articles/368530/Dynamic-Excel-file-loading-with-SSIS)

本文介绍了如何通过 SSIS 将 Excel 数据加载到 SQL Server 数据库中。

但是，我需要从特定行（例如第 9 行）开始提取所有行，而不是一些 select 语句。现在我的问题是，我需要更改/删除哪些代码才能让我设置起始行而不需要使用任何标题信息？

```
public SourceFileDetails ScanRows(DataSet excelDataSet, string ExtractionStatement, string FindColumn)
{
        if (excelDataSet.Tables.Count < 1)
            return (SourceFileDetails)null;

        string ExtractFields = this.ReplaceString(this.ReplaceString(ExtractionStatement, "SELECT", ""), "From [Data$]", "");
        List<string> FindStrings = ExtractFields.Split(',').Select(s => s.Trim().Replace("[", "").Replace("]", "").Replace("#", ".").Replace("(", "").Replace(")", "")).ToList();

        foreach (DataTable dt in excelDataSet.Tables)
        {
            List<ItemValueHolder> FoundAddress = new List<ItemValueHolder>();
            int iDuplicates = 0;

            foreach (DataRow dr in dt.Rows)
            {
                int iItemColumnIndex = 0;
                foreach (var fieldValue in dr.ItemArray)
                {
                    object cellData = fieldValue;
                    string sCellData = cellData.ToString().Replace("#", ".").Replace("[", "").Replace("]", "").Replace("(", "").Replace(")", "");

                    if (cellData != null)

                        if (FindStrings.Exists(delegate(string k) { return k.ToLower() == sCellData.ToString().ToLower(); }))
                        {
                            if (!FoundAddress.Exists(delegate(ItemValueHolder t) { return t.Item.ToLower() == sCellData.ToLower(); }))
                                FoundAddress.Add(new ItemValueHolder(sCellData, dt.Rows.IndexOf(dr), iItemColumnIndex));
                            else
                                iDuplicates++;
                        }
                    iItemColumnIndex++;
                }
                int iTotalFields = FindStrings.Count - iDuplicates;

                if (100 * FoundAddress.Count / (float)iTotalFields >= 90.00)
                {
                    var query = FoundAddress.GroupBy(
                item => item.ItemValue,
                (itemvalue, items) => new
                {
                    Key = (int)itemvalue,
                    Count = items.Count(),
                });

                    int dataStartAddress = (from p in query
                                            where p.Count == (query.Max(it => it.Count))
                                            select p.Key).Max();
                    dataStartAddress += 1;
                    string SheetName = "[" + dt.TableName + "$A" + dataStartAddress.ToString() + ":IV]";
                    string _selectCommand = this.ReplaceString(ExtractionStatement, "[Data$]", SheetName);
                    string reportDate = "";
                    if (!string.IsNullOrEmpty(FindColumn))
                        try
                        {

                            int ColIndex = (from p in FoundAddress
                                            where p.Item.ToLower() == FindColumn.ToLower()
                                            select p.ColumnIndex).First();
                            DataRow drRowReport = dt.Rows[dataStartAddress];
                            reportDate = drRowReport[ColIndex].ToString();

                        }
                        catch (Exception e)
                        {
                            //log 
                        }
                    string NewFields = GetNewFieldsAtSource(FindStrings, dr);
                    return new SourceFileDetails("", "", "", _selectCommand, reportDate, NewFields);
                }
            }
        }
        return (SourceFileDetails)null;
    } 
```

非常感谢！

# c# - SharedAccessSignature 在客户端使用时不起作用

> ID：11777537
> 
> 赞同：1
> 
> 时间：2012-08-02T12:34:15.467
> 
> 标签：c#, azure

我面临一个有线问题..

我想允许某些用户从/向 Azure-Container 读取/写入文件。为此，我使用了 SharedAccessSignature 的概念。

我在客户端调用以获取访问密钥的 RESTFUL (ASP.NET MVC4) Web 服务中生成共享访问签名..

```
 CloudStorageAccount storageAccount = CloudStorageAccount.DevelopmentStorageAccount;
  CloudBlobClient blobClient = storageAccount.CreateCloudBlobClient ();
  CloudBlobContainer container = blobClient.GetContainerReference (containerName);
  container.CreateIfNotExist ();
  BlobContainerPermissions containerPermissions = new BlobContainerPermissions ();
  containerPermissions.PublicAccess = BlobContainerPublicAccessType.Off;
  container.SetPermissions (containerPermissions);
  string sas = container.GetSharedAccessSignature (new SharedAccessPolicy ()
        {
            SharedAccessExpiryTime = DateTime.UtcNow.AddMinutes (30),
            Permissions = SharedAccessPermissions.Write | SharedAccessPermissions.Read
        });
  //return sas to user 
```

我返回`sas`客户端，他尝试使用以下代码上传 blob

```
 CloudBlobClient sasBlobClient = new CloudBlobClient ("http://127.0.0.1:10000/devstoreaccount1", new StorageCredentialsSharedAccessSignature (sak));
  CloudBlob blob = sasBlobClient.GetBlobReference (containerName + "/myblob.txt");
  blob.UploadText ("Hello SAS World"); 
```

在最后一行客户端抛出异常

**服务器未能验证请求。确保 Authorization 标头的值正确形成，包括签名。**

内部异常：**{“远程服务器返回错误：（403）禁止。”}**

有趣的部分是，如果我在得到`sas` `(string sas = container.GetShare....... )`它之后立即放置客户端代码，没有任何例外。但是，如果我将客户端代码放在单独的控制台应用程序中（然后通过 REST 调用检索密钥），它会引发异常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T19:35:33.250

我在控制台应用程序中测试了您的代码，它工作正常（我将 sas 变量传递给 CloudBlobClient）。但后来我使用 ASP.NET Web API 设置了一个 REST 服务，并使用 WebClient 检索了密钥：

```
 WebClient wc = new WebClient();
  var sas = wc.DownloadString("http://127.0.0.1:47413/api/values/1"); 
```

在 Web 应用程序和控制台应用程序中，我使用 Trace 将 SAS 密钥写入了输出窗口，结果如下：

> 网络应用程序：?se=2012-08-02T19%3A54%3A53Z&sr=c&sp=rw&sig=oWEF7r5HpkEh%2BH1aTVKGR7VF3gbWwq84gv%2BZFbXRhOA%3D
> 
> 客户端：“？se=2012-08-02T19%3A54%3A53Z&sr=c&sp=rw&sig=oWEF7r5HpkEh%2BH1aTVKGR7VF3gbWwq84gv%2BZFbXRhOA%3D”

如您所见，SAS 密钥似乎用双引号括起来。我不知道您使用什么来创建 REST 服务，但我使用的是 ASP.NET Web API。在这里它使用 JSON 格式化程序作为默认格式化程序。所以返回的 SAS 密钥是正确的，唯一的问题是它是以 JSON 格式返回的。

要获得实际的 SAS 密钥，您需要将其反序列化为字符串（听起来很奇怪，不是吗？），这是 Json.NET 的示例：

```
var correctSAS = Newtonsoft.Json.JsonConvert.DeserializeObject<string>(sas); 
```

# jquery - jquery fadeIn 是如何工作的？用 animate() 做同样的事情

> ID：11777539
> 
> 赞同：8
> 
> 时间：2012-08-02T12:34:30.850
> 
> 标签：jquery, jquery-animate, fadein, fade, zepto

我喜欢简单的 jQuery`fadeIn()`函数，尤其是因为它无需为选择器设置任何不透明度值即可工作！只需将其设置为`display:none`并使用`fadeIn()`始终有效。

但是我没有在我当前的项目中使用 jQuery，而是 zepto.js。Zepto 仅附带`animate()`而不附带`fadeIn()`.

我想知道如何使用 animate 函数创建相同的行为！我必须在这里为哪些属性设置动画？

```
$('#selector').animate({
    display: "block",
    opacity: 1
}, 500, 'ease-out') 
```

先感谢您

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-02T12:48:36.610

```
(function($){
      $.extend($.fn, {
        fadeIn: function(ms){
          if(typeof(ms) === 'undefined'){
            ms = 250;
          }
          $(this).css({
            display: 'block',
            opacity:0
          }).animate({
            opacity: 1
          }, ms);
          return this;
        }
      })
    })(Zepto) 
```

如果 Zepto 像 jQuery 一样工作，`$('.example').fadeIn();`应该可以解决问题。

编辑：Trejder 是对的，调整了零件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T12:43:06.477

jQuery fadeIn 函数只是 jQuery animate 函数的快捷方式。它所做的只是通过增加不透明度值在一段时间内将不透明度从 0 更改为 1。

```
// Generate shortcuts for custom animations
jQuery.each({
    slideDown: genFx( "show", 1 ),
    slideUp: genFx( "hide", 1 ),
    slideToggle: genFx( "toggle", 1 ),
    fadeIn: { opacity: "show" },
    fadeOut: { opacity: "hide" },
    fadeToggle: { opacity: "toggle" }
}, function( name, props ) {
    jQuery.fn[ name ] = function( speed, easing, callback ) {
        return this.animate( props, speed, easing, callback );
    };
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-02T13:17:18.523

你可以试试这个。我做了一个小演示。你必须让它的不透明度为0，然后让它显示：块然后为不透明度设置动画。

检查这个小提琴[http://jsfiddle.net/dTRhQ/](http://jsfiddle.net/dTRhQ/)

但是，这是在 jq 中完成的，我希望您能在您的框架中找到合适的实现

# sql - SQL中的条件选择？

> ID：11777543
> 
> 赞同：4
> 
> 时间：2012-08-02T12:34:46.830
> 
> 标签：sql

我有以下 SQL 代码：

```
SELECT eml AS "Email Address"
FROM emailtbl
WHERE DEPT LIKE 'E%' 
```

我的问题是，如果部门以“F”开头，我必须选择传真而不是 eml。如果部门以“E”开头，我该怎么做才能选择 eml，如果部门以“F”开头，我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-02T12:36:21.370

一种选择是使用`UNION ALL`语句

```
SELECT eml AS "Entity"
FROM   emailtbl
WHERE  DEPT LIKE 'E%'
UNION ALL
SELECT fax AS "Entity"
FROM   emailtbl
WHERE  DEPT LIKE 'F%' 
```

另一种是使用`CASE`语句

```
SELECT CASE WHEN Dept LIKE 'E%' THEN eml ELSE fax END AS "Entity"
FROM   emailtbl
WHERE  DEPT LIKE 'E%' OR DEPT LIKE 'F%' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T12:38:18.933

这个怎么样？

```
IF (SUBSTRING(@useLike,1,1) = 'E')
BEGIN
    SELECT eml AS "Email Address"
    FROM emailtbl
    WHERE DEPT LIKE @useLike

END
ELSE
BEGIN
    SELECT fax AS "Email Address"
    FROM emailtbl
    WHERE DEPT LIKE @useLike
END 
```

# javascript - location.hash 始终为空

> ID：11777546
> 
> 赞同：0
> 
> 时间：2012-08-02T12:35:07.613
> 
> 标签：javascript, url

我正在尝试使用 javascript 从 url 获取哈希参数。奇怪的是，hash 参数始终为空（“”）。我尝试了许多代码变体，但它总是空的。

```
location.hash 
```

示例网址

```
file:///F:/wwwroot/Default.htm#Name=front 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T12:51:20.867

我不认为 location.hash 指向本地文件。您需要从 Web 服务器提供您的页面。所以你会有一个网址，比如`http://localhost:1337/Default.htm#Name=front`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T10:39:08.830

好的，我找到了答案，从 iframe 内部调用了 javascript 代码，并且它们的行为就像一个单独的 html 页面。我用这段代码来解决它。

```
var url = window.parent.location.hash; 
```

# objective-c - 沙盒化时如何访问另一个文件引用的文件（应用商店）

> ID：11777547
> 
> 赞同：3
> 
> 时间：2012-08-02T12:35:06.683
> 
> 标签：objective-c, xcode, macos, app-store, appstore-sandbox

例如，如果我有一个 XML 文件（从另一个应用程序导出，因此我无法控制内容），它将不同文件夹中的图像引用到 XML 文件，我无法读取图像，直到用户使用浏览它们我的应用程序。

我可以通过让他们浏览到更高级别的文件夹（甚至浏览到“/”）来解决这个问题，但是告诉用户“我无法访问 /path/to/file，你能拜托吗？”现在浏览它，我可以打开它吗？”

有没有更好的解决方案？是不是有某种方法可以显示类似“AppX 正在尝试从 /Users/UserX/FolderX 读取，你会授予权限吗？”这样的提示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T21:36:16.250

在此处查看我的问题和答案：[App Sandbox：文档范围的书签未解析；不返回任何错误](https://stackoverflow.com/questions/10259692/app-sandbox-document-scoped-bookmark-not-resolving-not-returning-any-error)

我将集合范围的书签嵌入到我的 XML 文件中。

**更新**

鉴于您无法控制输入 XML 格式的规范，让您的应用程序访问 XML 中指定的文件的唯一方法是让用户选择该文件或`NSOpenPanel`. 如果 XML 包含多个文件引用，您可以让用户授予对包含所有文件引用的目录的访问权限。

没有办法绕过请求许可，因为这会破坏沙盒的目的。如果您的应用程序可以绕过用户的直接许可，那么恶意软件也可以。但是，一旦获得访问权限，您就可以为每个文件创建一个安全范围的书签，这样您就无需多次请求用户许可。

**更新 2**

回答您评论中的问题，您可以通过以下方式使用户更轻松地进行对话：

```
[openPanel setMessage:@"Click 'OK' to allow access to files contained in the selected directory"];
[openPanel setDirectoryURL:[NSURL fileURLWithPath:pathFromTheXMLFile]]; 
```

这是[关于`NSSavePanel`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSSavePanel_Class/Reference/Reference.html#//apple_ref/occ/cl/NSSavePanel)（`NSOpenPanel`继承自它的文档，上面的属性是在那里定义的）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T12:12:19.920

这是一个 hack（有点像你提到的那个）——如果你能检测到文件有嵌入的文件路径——在你打开文件之后——你能提示用户“导入文件”，然后选择父目录并复制沙箱的父目录读取文件？

我知道这很糟糕，但是在没有在文件中嵌入书签的情况下观看了沙盒上的苹果视频，我不确定你还能做什么。

# r - 使用 S3 方法将参数捆绑到 R 中的数据框中

> ID：11777548
> 
> 赞同：0
> 
> 时间：2012-08-02T12:35:10.427
> 
> 标签：r, generics, r-s3

我创建了一个函数，该函数具有相当多的参数（所有向量的长度相同），我认为能够将参数捆绑在数据框中会使生活变得更容易。我已经设法使用 S3 方法实现了这一点，但是阅读更多关于 S3 方法的信息后，我开始怀疑我编写函数的方式是否有点滥用 S3 约定。

我想知道我所做的是否是一个坏主意。如果是这样，替代方法将受到欢迎。

这是我所做的一个简化示例：

```
myfunc <- function(x, ...) UseMethod("myfunc")

myfunc.default(time, money, age, weight) {
   # a silly calculation
   return(money/(age + weight) - time)
}

myfunc.data.frame <- function(params, ...) {
  names(params) <- tolower(names(params))
  pass.args <- intersect(names(params), names(formals(myfunc.default)))
  res <- do.call(myfunc.default, c(params[pass.args], ...))
  return(res)
} 
```

`mydata`然后，如果我有一个包含列名`Money`, `time`,的数据框`AGE`，`weight`然后`name`像这样的调用`myfunc(mydata)`会将相关数据传递给`myfunc.default`. 这一切都很好，但它是明智的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T21:17:26.073

感谢您的评论。我已经得出结论，我在这里使用 S3 方法的策略是个坏主意。我已切换到两个功能，例如`myfunc`和`myfunc_df`。我还创建了一个辅助函数，用于将具有单个参数的函数转换为接受数据框的函数：

```
df_call <- function(.function, .parameters, .case=tolower, ...) {
  try(names(.parameters) <- match.fun(.case)(names(.parameters)))
  pass.args <- intersect(names(.parameters), names(formals(.function)))
  do.call(.function, c(.parameters[pass.args], list(...)))
} 
```

# jquery - 从 display:none 更改为 display:inline 时 jquery ui css 不出现

> ID：11777550
> 
> 赞同：0
> 
> 时间：2012-08-02T12:35:12.090
> 
> 标签：jquery, css, jquery-ui, dynamic-content

各位高人，

在我的基于 Web 的应用程序中，我有一个通常`display:none`是隐藏的 div 并且不占用任何空间。当发生某些事情时，我希望 div 与类的样式一起出现，`ui-state-highlight ui-corner-all`并且我将放入一些动态内容。所以我最初给这个隐藏的 div 这些类。问题是当我用一些动态内容显示 div 时，我刚才提到的类的样式不存在。

请参阅说明问题的这个小提琴：http: [//jsfiddle.net/qR8gK/](http://jsfiddle.net/qR8gK/)

期望的结果是单击按钮时出现的 div 具有与最初可见的样式相同的样式。有谁知道我该怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T13:02:01.617

调用该`show()`方法使其可见。

```
$('#a').button().click(function() {
    $('#dynamic').html('<p>some dynamic content</p>').show();
});​ 
```

工作样本：http: [//jsfiddle.net/qR8gK/16/](http://jsfiddle.net/qR8gK/16/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T12:39:08.920

只需使用`.show()`而不是手动设置 css 显示设置。

```
$('#a').button().click(function() {
    $('#dynamic').show().html('<p>some dynamic content</p>');
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T12:46:14.497

您的代码中的实际问题是由于段落标记。删除`<p>`并尝试。

```
$('#a').button().click(function() {
    $('#dynamic').css('display', 'inline').html('some dynamic content');
});​ 
```

示例：http: [//jsfiddle.net/qR8gK/19/](http://jsfiddle.net/qR8gK/19/)

# android - 车轮演示不工作

> ID：11777556
> 
> 赞同：0
> 
> 时间：2012-08-02T12:35:45.247
> 
> 标签：android, android-wheel

我有`kankan.wheel`演示（城市、密码、日期/时间等）并且工作正常。

我写了一个小程序，看看能不能自己用：

课程是这样开始的：

```
public class WheelTestActivity extends Activity {
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.main);
    WheelView wheel = (WheelView)findViewById(R.id.passw_1); 
```

我在`setContentView(R.layout.main);` 这是导致问题的行设置了一个断点。

我收到一个错误：

> 找不到类`kankan.wheel.widget.WheelView`，从方法 com.example.WheelTestActivity.onCreate 引用

我注意到原始演示中的文件“wheel.jar”位于：项目的“Android Dependencies”文件夹在我的项目中，文件“wheel.jar”位于“lib”文件夹下

那是问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T12:49:13.090

如果您已更新 ADT 17 ，请尝试将文件夹名称从**lib**更改为**libs 。有关此主题的详细信息，请参见**[此处](http://android.foxykeep.com/dev/how-to-fix-the-classdefnotfounderror-with-adt-17) 。

如果更改文件夹名称后仍然遇到同样的问题，请执行以下操作：

1.  在 Eclipse 中，转到 Properties -> Java build path -> Order and export。

2.  标记您的 jar 文件 (wheel.jar)。

3.  将 jar 移到列表顶部。

# android - VideoView 无法在 ListView 中播放视频

> ID：11777561
> 
> 赞同：0
> 
> 时间：2012-08-02T12:36:01.117
> 
> 标签：android

我尝试在 ListView 播放视频 .mp4 ，我有一个视频列表，当我单击 play_btn 时会引发错误：

```
 08-02 12:26:42.661: E/MediaPlayer(4593): error (1, -2147483648)
 08-02 12:26:43.035: E/MediaPlayer(4593): Error (1,-2147483648)
 08-02 12:26:43.035: D/VideoView(4593): Error: 1,-2147483648 
```

这是我的 CustomAdapter 来显示视频列表（.mp4）：

```
public CustomAdapterRecords(Context context,List<HashMap<String, String>> donnees,VideoView video) {

    this.datas = donnees;
    this.inflater = LayoutInflater.from(context);
    this.context =context;
    this.video = video;

}
public int getCount() {
    // TODO Auto-generated method stub
    return datas.size();
}
public Object getItem(int position) {
    // TODO Auto-generated method stub
    return position;
}
public long getItemId(int position) {
    // TODO Auto-generated method stub
    return position;
}
public View getView(int position, View convertView, ViewGroup parent) {

    record=new HashMap<String, String>();
    record = datas.get(position);
    file=record.get("recordTitle");
    LinearLayout rowLayout = null;
    if (convertView == null) {
    rowLayout = (LinearLayout) LayoutInflater.from(context).inflate(
    R.layout.row_item_records, parent, false);
    } 
    else {
    rowLayout = (LinearLayout) convertView;
    }

    TextView title = (TextView) rowLayout.findViewById(R.id.record_titre);
    play_btn = (ImageView)rowLayout.findViewById(R.id.play);
    stop_btn = (ImageView) rowLayout.findViewById(R.id.stop);

    title.setText(record.get("recordTitle"));

    play_btn.setOnClickListener(clicPlay);

    return rowLayout;
}

public OnClickListener clicPlay= new OnClickListener() {

    public void onClick(View v) {
        Log.i("nom", record.get("recordTitle"));
        Log.i("path", record.get("recordPath"));
        video.setVideoURI(Uri.parse(record.get("recordPath")));
        if(null!=file){
            if(isPlaying==false && isPause==false){

            isStop=false;
            video.start();

            }
            else if(isPlaying==true && isPause==false){

                isPause=true;
                video.pause();

            }else if(isPlaying==false && isPause==true){
                isPause=false;
    video.start();

            }

            isPlaying=!isPlaying;
        }
    }}; 
```

}

有人知道这个错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T12:42:49.487

根据错误代码未播放视频时存在多个问题。

1.  尝试使用 android 中的默认媒体播放器播放文件。如果它播放视频没有问题。

2.  如果手机内存中的视频将文件移动到 sdcard 并从那里播放视频。

乐意效劳。

# google-chrome - 如何通过 Chrome 应用程序快捷方式打开特定的 URL 模式？

> ID：11777576
> 
> 赞同：0
> 
> 时间：2012-08-02T12:36:54.960
> 
> 标签：google-chrome

我将 Google Chrome*应用程序快捷方式*用于许多作为内部网站托管的内部工具。将它们作为自己的图标固定在 Windows 7 任务栏上，而*不是*与其他浏览器混合。

但是，如果我单击网页、电子邮件等中作为这些工具链接的链接，它们会在标准 Chrome 浏览器窗口中打开，而不是在应用程序快捷方式窗口中打开。

有没有办法让 Windows 7 或 Google Chrome 将特定的 URL 模式定位到应用程序快捷方式窗口而不是新的浏览器窗口？

# java - 使用 NLP 转换性别

> ID：11777579
> 
> 赞同：1
> 
> 时间：2012-08-02T12:37:00.210
> 
> 标签：java, nlp, opennlp

基本上我正在编写一个 Java 模块，它应该采用英文文本并切换代词的性别。例如，如果你给它“她把盒子放在桌子上”，它会给你回“他把盒子放在桌子上”。如果你给它“他的脚受伤”，它会给你回“她的脚受伤”。

这很容易，除了“她的”这个词。有时他=她，有时他=她。

我一直在研究 NLP，对此我几乎一无所知，并且我尝试了 OpenNLP，但它让我失望了（由于许可问题，我无法使用 Standford NLP）。POS 标记器和 Chunker 会与她/她的混淆，解析器也是如此。例如：

盒子是他的。

```
(TOP (S (NP (DT The) (NN box)) (VP (VBD was) (NP (PRP$ his))) (. .))) 
```

盒子是她的。

```
(TOP (S (NP (DT The) (NN box)) (VP (VBD was) (ADJP (JJ hers))) (. .))) 
```

盒子是他的盒子。

```
(TOP (S (NP (DT The) (NN box)) (VP (VBD was) (NP (PRP$ his) (NN box))) (. .))) 
```

那个盒子就是她的盒子。

```
(TOP (S (NP (DT The) (NN box)) (VP (VBD was) (NP (PRP$ her) (NN box))) (. .))) 
```

它正确地将“hers”识别为形容词短语，但是当以完全相同的方式在谓词中使用“his”时，它错误地将其识别为所有格代词，就好像它在修饰某些名词一样，如第三个和第四个示例..

这只是训练集的问题吗？是否有可能创建我自己的训练集来做得更好，基本上是一个只有他/她的大量句子的集？

如果您能告诉我是否有任何方法可以使用 NLP 来确定代词的先行词，则可以加分。例如：

```
"Wanda gave a watch to a girl named Lucy.  She loved it." 
```

我的猜测是这几乎是不可能的，因为这对人类来说有时甚至很难。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T12:41:10.273

从示例来看，您可以尝试替换`his`为`hers`而不是`her`每当它出现为节点的唯一子节点时，据我对英语（不是母语人士）的了解，这对应于“她的”、“我的”等词的使用，等等

IE

```
# NP with one child
(NP (PRP$ his))  ==>  (ADJP (JJ hers)) 
```

但

```
# NP with two children, "his" and "box"
(NP (PRP$ his) (NN box))  ==>  (NP (PRP$ her) (NN box)) 
```

（我已经很久没有对语法树做过任何事情了，但是在第一个示例中，`NP`标签似乎是解析器的错误。）

> 如果您能告诉我是否有任何方法可以使用 NLP 来确定代词的先行词，则可以加分。

这被称为代词解析，或更一般的照应解析，并且存在大量关于这个问题的文献。此任务的基线算法称为 Hobbs 算法，并在[*SLP*](http://www.cs.colorado.edu/~martin/slp.html)或[此问题](https://stackoverflow.com/questions/10775097/hobbs-algorithm-for-coref-resolution)中的某处进行了描述。

# r - 自定义 xtable

> ID：11777586
> 
> 赞同：13
> 
> 时间：2012-08-02T12:37:11.183
> 
> 标签：r, latex, xtable

我想自定义`xtable`导出到 LaTeX。我知道这里有一些问题`xtable`，但我找不到我正在寻找的具体内容。

这是我的表可能看起来如何的示例：

```
my.table <- data.frame(Specifiers=c("","Spec1", "Spec2", "Spec3"),
    Values1 = c("N=10", 1.03, 1.71, 2.25),
    Values2 = c("N=20", 1.32, 1.79, 2.43))
colnames(my.table)[1] <- "" 
```

这创造了：

```
 Values1 Values2
1          N=10    N=20
2 Spec1    1.03    1.32
3 Spec2    1.71    1.79
4 Spec3    2.25    2.43 
```

实际上，该表是从 .csv 文件中导入`data.frame`的`my.table <- read.delim("filename.csv", sep=",", header=TRUE)`

现在我创建一个 LaTeX 表`xtable`：

```
latex.tab <- xtable(my.table, caption=c("Stats"))
print(latex.tab, file="Summarystats.tex",
  floating.environment='sidewaystable',
  include.rownames=FALSE,
  booktabs=TRUE,
  latex.environment=NULL) 
```

这是生成的 LaTeX 代码：

```
\begin{sidewaystable}[ht]
\begin{tabular}{lllllll}
  \toprule
 & Values1 & Values2 \\ 
  \midrule
               N=10  &  N=20 \\
     Spec1  &  1.03  &  1.32 \\
     Spec2  &  1.71  &  1.79 \\
     Spec3  &  2.25  &  2.43 \\

   \bottomrule
\end{tabular}
\end{sidewaystable} 
```

好的，现在这就是我想要改变的：

1）`\midrule`在第二行而不是第一行之后插入。`\rowcolors{2}{gray!25}{white}`2）通过在`sidewaystable`（或正常`table`）环境中插入来改变该表行的颜色。3) 将列名旋转 45° 4) 在我想使表格居中的情况下插入`\centering`而不是`center`-environment。

关于如何实现这一目标的任何想法？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-10T23:40:13.923

您需要一些预处理，传递给的额外参数`print.xtable`和一些后处理：

```
my.table <- data.frame(Specifiers=c("","Spec1", "Spec2", "Spec3"),
                       Values1 = c("N=10", 1.03, 1.71, 2.25),
                       Values2 = c("N=20", 1.32, 1.79, 2.43))
colnames(my.table)[1] <- ""

# Pre-processing: rotates column names by 45 degrees
head = apply(as.array(names(my.table)), 1, function(x) paste("\\rotatebox{45}{", x, "}"))
head = paste(head, c(rep("&", length(head)-1), "\\\\\n"), collapse="")

latex.tab <- xtable(my.table, caption=c("Stats"))
ltable = print(latex.tab, file="", # File is empty, post-processing needed
      floating.environment='sidewaystable',
      include.rownames=FALSE,
      include.colnames=FALSE, # No colnames
      booktabs=TRUE,
      latex.environment="center", # Or NULL
      # Adds some extra-text after the rows specified in pos.
      # Adds new \midrule and comments old one.
      # Adds pre-processed names of columns
      add.to.row=list(pos=as.list(c(0, 0, 1)), command=as.vector(c(head, "%", "\\midrule\n"))))

# Post-processing: replaces \begin{center} with \centering
ltable = sub("\\begin{center}\n", "\\centering\n", ltable, fixed=TRUE)
ltable = sub("\\end{center}\n", "\n", ltable, fixed=TRUE)

# Post-processing: adds alternating colours
ltable = sub("\\begin{tabular}",
             "\\rowcolors{2}{gray!25}{white}\n\\begin{tabular}",
            ltable, fixed=TRUE)

# Writes output to the file
cat(ltable, file="Summarystats.tex") 
```

如果您需要其他选项卡环境`tabular`1) 添加新变量：

```
TABULAR = "tabular" 
```

2）将它的价值传递给`print.xtable`这样的：

```
...
tabular.environment=TABULAR,
... 
```

3）改变你的后处理交替颜色：

```
ltable = sub(sprintf("\\begin{%s}", TABULAR),
             sprintf("\\rowcolors{2}{gray!25}{white}\n\\begin{%s}", TABULAR),
             ltable, fixed=TRUE) 
```

结果：

![在此处输入图像描述](../Images/0ac01898009f9eb96b14451be319f286.png)

# javascript - 表单生成器 asp.net mvc

> ID：11777588
> 
> 赞同：1
> 
> 时间：2012-08-02T12:37:12.633
> 
> 标签：javascript, asp.net-mvc-3, formbuilder

我在一个应用程序中有一部分，管理员可以使用一些在线表单生成器创建一个表单，比如[这里](http://jquery-form-builder-plugin.appspot.com/)。然后管理员可以将创建表的表单保存在与创建`DB`的字段相对应的位置。之后，其他用户可以使用该表单。一个带有文本框和标签的简单表单就可以了。我认为这有点模糊，但这是我现在需要的。任何人都可以帮助我或任何见解吗？如果之前使用任何插件完成类似的操作会更好。我尝试实现上述插件，但对创建表单后在服务器上发布的内容没有足够的了解。

# javascript - escape_javascript 在 Rails 3.2.7 中不起作用

> ID：11777589
> 
> 赞同：1
> 
> 时间：2012-08-02T12:37:15.223
> 
> 标签：javascript, ruby-on-rails, escaping, rails-cells

在 application.js 中：

```
$(document).ready(function() {
    var After = 5000;
    var refreshId = setInterval(function() {
        $("#test").html("<%= escape_javascript(render_cell :test, :display) %>");
    }, After);
}); 
```

这应该渲染单元格......但它在浏览器中给我的是： <%= escape_javascript(render_cell :test, :display) %>

Rails 没有解释红宝石部分......它只是将它作为纯文本返回......

有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T12:49:48.973

你的意思是 application.js.erb 吗？

JavaScript 不知道 ruby​​。

# html - 带有 HTML5 视频请求的自定义标头

> ID：11777591
> 
> 赞同：22
> 
> 时间：2012-08-02T12:37:21.573
> 
> 标签：html, video, oauth

我有一个视频资源位于 OAuth 2.0 墙后面，并希望通过`<video>`标签显示它。如何发送`Authorization`带有视频请求的标头？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-03-03T07:37:34.853

我遇到了这个问题，并像这样在 url 查询参数中发送了授权令牌（必须更改服务器端代码以允许从请求标头和请求查询参数中读取令牌）： `http://www.example.com/samplevideo?Authorization=sample_token`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T14:09:46.443

据我所知，你不能。

但是您仍然可以使用该[`error`属性](http://dev.w3.org/html5/spec/media-elements.html#mediaerror)来检查`<audio>`元素是否可以从 JavaScript 获取视频，如果不能，则重定向到身份验证页面。

# delphi - 在 DLL 中填充 TStringList

> ID：11777592
> 
> 赞同：3
> 
> 时间：2012-08-02T12:37:25.250
> 
> 标签：delphi, dll

我想`TStringList`在一个DLL里面填一个。关于内存管理文档，我的方法似乎是错误的，但它有效并且不会导致错误或 AV。

有人可以告诉我，如果该代码可以吗？不知道如何在 DLL 中填充一个类。

```
programm EXE

function MyClass_Create: IMyClass; stdcall; external ...

var
  _myClass_DLL: IMyClass; //shared interface in exe and dll

procedure FillList;
var
  list: TStringList;      
begin
  list := TStringList.Create(true); //memory allocated in EXE
  try
    _myClass_DLL.FillList(list);  //memory allocated in DLL???
    ShowMessage(list.Text);
  finally
    list.Free; //memory freed in EXE, frees also TObject created in DLL
  end;
end; 
```

DLL 代码：

```
library DLL

TMyClass = class(TInterfacedObject, IMyClass)
public
  procedure FillList(aList: TStringList);
end;

procedure TMyClass.FillList(aList: TStringList);
begin
  aList.AddObject('Text1', TObject.Create); //memory allocation in DLL?
  aList.AddObject('Text2', TObject.Create); //memory allocation in DLL?
end; 
```

我不使用 BORLNDMM.DLL 或任何其他 ShareMem 单元。

**编辑：**
我将`aList.Add()`调用扩展到`aList.AddObject()`. 它也不会崩溃，尽管 TObject 是在 DLL 中创建并在 EXE 中释放的。

**答：**
关于下面已接受答案中的注释，该代码是正确的，因为 exe 和 dll 是使用相同的 delphi 版本编译的，并且只调用了虚拟方法。

**结论：**
只要使用虚拟方法或接口，内存管理没有问题。这意味着，在哪里创建或释放对象并不重要。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T13:38:30.353

如果要跨模块边界传递类，则需要使用运行时包链接到 RTL/VCL。这是确保`TStringList`DLL 中的类与 EXE 中的类完全相同的唯一方法。这是您当前方法的根本问题。另一方面，如果您已经使用运行时包链接到 RTL，那么您就可以了。

如果您不想使用运行时包，那么您需要完全重新设计您的界面。您需要停止跨模块边界传递类。您可以使用接口，但不能使用类。而且您需要控制内存分配，以确保始终在分配它的模块中释放内存。或开始使用`ShareMem`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T20:00:15.507

对于这种类型的功能，为了保持无共享内存、无包，我将在 dll 中使用带有枚举器方法的回调。例如，这就是您从 Windows 检索字体的方式。这是我所指的模型：

```
type
  TMyClass = class
  private
    FList: TStringList;  // obv you need to construct this

  public
    function EnumListItem(s: string): integer;
  end;

function TMyClass.EnumListItem(s: string): integer;
begin
  FList.Add(s);
end;

procedure TMyClass.FillList;
begin
  _myClass_DLL.FillList(@EnumListItem);
  ShowMessage(FList.Text);
end; 
```

这只是为您提供一个起点......在 DLL 方面，您使用函数指针回调到您的程序并一次传入字符串 1。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T15:31:14.167

如果你真的反对 BPL，那么你最好坚持 DLL 和接口的 COM 约定。

特别是在 COM 中有类似 TStream 的接口。VCL 有 TStreamAdapter 类在 COM IStream 和 VCL TStream 之间进行转换。

这样，您的 DLL 应该创建一个数据流，将其包装到 COM IStream 中并传递给 exe。EXE 将从 TStream 转换回来并填充字符串列表。

更快速和低技术的方法是感觉内存缓冲区，就像 Windows API 函数一样。他们要么感觉到它，要么返回程序错误，要求更大的缓冲区。好吧，那么您将调用函数两次 - 以获取缓冲区大小并进行实际工作。而且，如果您混合使用 PChar 之类的指针类型可能是 PAnsiChar 或 PWideChar，或者传递错误的缓冲区大小 - 您没有来自编译器的安全网，您只是损坏了内存。但这会比 COM IStream 快。

也许你会创建支持 COM 的 Buffer 对象，它有一种特殊的析构函数，它不会释放内存，而是将引用传递给 DLL 后台空闲内存回收线程。因此，当您在主 EXe 中不再需要它时，它迟早会在 DLL 本身中被释放。使用 TStream 仍然不是那么舒服，但至少希望不会打击堆管理器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-10T16:47:07.623

从 dll 中获取字符串列表的最简单方法是：您必须创建 tStringList 然后将其填充到 Dll 中，然后将文本作为返回值传递。

来自 Dll 库：

```
function getDocuments(customer,depot:Pchar):Pchar;export;
var
 s:TstringList;
begin
 S:=TStringList.Create;
 S.Add('Row 1 '+customer);
 S.Add('Row 2 '+depot);
 S.Add('Row 3 ');
 S.Add('Row 4 ');
 S.Add('Row 5 ');
 Result:=pchar(s.Text);
 S.Free;
end; 
```

从EXE

```
function GetDLLExternalDocuments(customer,depot:pchar;out fList:TStringList):Word;
var GetDocumentsDLLExport:TGetDocumentsDLLExport;
var s:String;
var HandleDllExport :Thandle;
begin

  HandleDllExport := LoadLibrary('my_dll_library.dll');

  if HandleDllExport <> 0 then
   begin
    @GetDocumentsDLLExport := GetProcAddress(HandleDllExport, 'getDocuments');
    if @GetDocumentsDLLExport <> nil then
      begin
        s:=GetDocumentsDLLExport(cliente,impianto);
        fList.Text:=S;
        result:=0;
      end;

    FreeLibrary(HandleDllExport);
    HandleDllExport:=0;

   end;

end; 
```

用法：

```
procedure TfMain.Button1Click(Sender: TObject);
var
 S:tStringList;
begin
  S := tStringList.create;
  GetDLLExternalDocuments('123456','AAAAA',S);
  Showmessage(S.Text);
  s.Free; 
end; 
```

# css - li在ul内的绝对定位与跨浏览器兼容

> ID：11777593
> 
> 赞同：1
> 
> 时间：2012-08-02T12:37:25.527
> 
> 标签：css, internet-explorer, html-lists, absolute

我有这样的事情：

```
<div style="width:1300px">
  <ul class="ul-length ul-textalign">
    <li class="li-horizontal"> A </li>
    <li class="li-horizontal"> B </li>
    <li class="fillgap"/>
  </ul>
</div> 
```

我试图让最后一个 li 用一些背景填充该行的其余部分。我想避免根据前一个 lis 的长度指定 li 填充间隙宽度的代码。因此，我想让最后一个 li 处于绝对定位，并让它占据 ul 的整个宽度：

```
.fillgap {
  position:absolute;
  width:1300px; /* for some reason, width:100% is longer than the div width... */
  z-index:0;
}

.ul-length {
  with:100%;
}

.ul-textalign {
  text-align:left; /* fix for IE, prevents the absolute li from beginning at the center */
}

.li-horizontal {
   float:left;
} 
```

在整个宽度上设置背景的最简单方法可能是设置 ul 的背景，但我不能这样做，因为它不符合预期的设计。我需要能够用 lis 做到这一点。而我上面的代码在IE中导致了一个问题：li fillgap似乎保留在页面流中，因为它放在前一个lis旁边，而不是在ul的开头......

任何的想法？

这是预期的结果（在歌剧中）： ![在此处输入图像描述](../Images/70c802c76b3b779a0ec5f908c13d260e.png)

这是 IE 中的结果： ![在此处输入图像描述](../Images/a8e9dbdd496aa585e34e3602bcfb1f30.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T12:55:20.440

添加`position: relative`到`.ul-length`. 这使得`position: absolute`li 相对于`.ul-length`。

这使您可以将`width`from更改`1300px`为`100%;`

这是一个小提琴：http: [//jsfiddle.net/joplomacedo/5vykm/](http://jsfiddle.net/joplomacedo/5vykm/)

*不过*，我不太确定你为什么需要`position: absolute`添加`li`。如果您希望它准确地停留在原地，那是为什么`position: absolute`呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T12:55:40.510

```
 .ul-length li{
        z-index:2;
        position:relative;
    }
.ul-length li.fillgap {
    background: none repeat scroll 0 0 red;
    display: block;
    height: 100%;
    position: absolute;
    width: 100%;
    z-index: 1;
    top:0;
    left:0
}

    .ul-length {
      with:100%;
      position:relative;
    } 
```

# android - 播放下载的视频错误：1，-2147483648

> ID：11777595
> 
> 赞同：5
> 
> 时间：2012-08-02T12:37:27.743
> 
> 标签：android, video, android-videoview

我正在尝试下载视频文件，然后在应用程序中播放，如果我将视频文件放在 res 文件夹中，我可以毫无问题地播放它，但是当我尝试下载视频然后播放它时，我获取 VideoView 错误：1，-2147483648。

这是我用来下载视频的代码：

```
 try
    {

        URL url = new URL(videoURL);
        URLConnection conexion = url.openConnection();
        conexion.connect();

        int lengthOfFile = conexion.getContentLength();
        Log.d("ANDRO_ASYNC", "Length of file: " + lengthOfFile);

        InputStream input = new BufferedInputStream(url.openStream());

        final File dir = new File(this.getFilesDir() + "/videos");
        dir.mkdirs(); //create folders where write files
        final File file = new File(dir, "my_video.mp4");

        Log.d("writePath", file.getPath());

        FileOutputStream output = new FileOutputStream(file);

        byte data[] = new byte[1024];
        long total = 0;

        while((count = input.read(data)) != -1)
        {
            total += count;
            //publishProgress("" + (int)((total*100) / lengthOfFile));
            output.write(data, 0, count);
        }

        output.flush();
        output.close();
        input.close();

        Log.d("download", "finished");

    }
    catch(Exception e)
    {

        Log.d("Exception", e.getMessage());
    } 
```

这似乎成功完成，但是当我尝试使用以下代码播放文件时，出现错误。

```
 // Play Video
    videoView = (VideoView)findViewById(R.id.surface_view);
    //

    File f = new File("/data/data/com.companyname.appname/files/videos/videoFilename.mp4");

    if(f.exists())
    {
        long len = f.length();
        String length = String.valueOf(len);
        Log.d("file", "exists");
        Log.d("length", (String)length);
    }
    else
    {
        Log.d("file", "does not exist");
    }

    //

    videoView.setMediaController(new MediaController(this));

    videoView.setVideoPath(f.getPath());
    videoView.start(); 
```

如代码所示，在播放之前我检查文件是否存在以及它的大小（它与下载的文件大小相同）但它不会播放，我猜文件已损坏但我不知道为什么。

我在清单中设置了以下权限

```
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="android.permission.WRITE_INTERAL_STORAGE" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T06:19:46.343

在我的情况下，错误是由于媒体播放器对本地存储的视频没有文件权限。尝试将视频存储到外部存储中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T14:49:15.793

只是一个问题，为什么不将视频的 URL 直接传递给 VideoView 呢？通常你在网上看到的所有例子都是这样做的：

```
VideoView video = new VideoView(mContext);
video.setMediaController(new MediaController(mContext));
video.setVideoURI(Uri.parse(this.url)); 
```

其中“mContext”在您的应用程序上下文中，“this.url”是您需要在 VideoView 中加载的 URL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T07:46:43.560

它发生在我身上一次，问题出在权限上。下载文件时你必须做的，你必须给它读/写权限。所以下载文件后，添加这些行并尝试：

```
 file.setExecutable(true, false);
                            file.setReadable(true, false);
                            file.setWritable(true, false); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T06:56:09.137

据我了解，这是一个权限问题。该文件需要是世界可读的，但我假设您不想强迫用户根他/她的手机以能够运行正确的 linux 命令。

这让您有两个选择：

1.  由于应用程序拥有文件，您可以使用 FileDescriptor 打开文件

    FileInputStream fileInputStream = new FileInputStream("/data/data/com.mypackage/myfile"); mediaPlayer.setDataSource(fileInputStream.getFD());

    但由于您没有使用 MediaPlayer，我想这不是一个选择。

2.  获取文件时设置权限。

    String basedir = ("/data/data/com.companyname.appname/files/videos/videoFilename.mp4"); 文件文件 = this.ctx.getDir(basedir, Context.MODE_WORLD_READABLE);

希望能帮助到你！干杯。

# css - 字体大小相对于用户的屏幕分辨率？

> ID：11777598
> 
> 赞同：100
> 
> 时间：2012-08-02T12:37:42.143
> 
> 标签：css, measurement

我有一个流畅的网站，菜单是其宽度的 20%。我希望正确测量菜单的字体大小，使其始终适合框的宽度，并且永远不会换行到下一行。我正在考虑使用“em”作为一个单位，但它与浏览器的字体大小相关，所以当我更改分辨率时，字体大小保持不变。

还尝试了点和百分比。没有什么可以满足我的需要...

请给我一个提示如何进行。

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-08-02T12:45:58.537

您可以使用`em`, `%`, `px`. 但是结合`media-queries` [查看这个链接](http://www.w3.org/TR/css3-mediaqueries/)来了解媒体查询。此外，CSS3 有一些新值用于调整相对于当前视口大小的大小：`vw`、`vh`和`vmin`. 请参阅有关该[链接](http://css-tricks.com/viewport-sized-typography/)的链接。

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2014-02-24T07:41:08.603

# 新方法

有几种方法可以实现这一点。

*CSS 支持相对于视口的尺寸。

1.  3.2vw = 视口宽度的 3.2%

2.  3.2vh = 视口高度的 3.2%

3.  3.2vmin = 3.2vw 或 3.2vh 中的较小者

4.  3.2vmax = 3.2vw 或 3.2vh 中的较大者

    ```
    body
    {
        font-size: 3.2vw;
    } 
    ```

查看[css-tricks.com/....](http://css-tricks.com/viewport-sized-typography/)并查看[caniuse.com/....](http://caniuse.com/viewport-units)

# 老路

1.  使用**媒体查询**，但需要多个断点的字体大小

    ```
     body
     {
         font-size: 22px; 
     }
     h1
     {
        font-size:44px;
     }

     @media (min-width: 768px) 
     {
        body
        {
            font-size: 17px; 
        }
        h1
        {
            font-size:24px;
        }
     } 
    ```

2.  使用**% 或 rem**中的尺寸。只需更改基本字体大小，一切都会改变。与以前的不同，您可以只更改正文字体而不是每次都更改 h1，或者将基本字体大小设置为设备的默认值，然后全部放在 em 中。

*   **“根 Ems”(rem)**：“rem”是一个可扩展的单元。1rem 等于 body/html 的 font-size，例如，如果文档的 font-size 为 12pt，则 1em 等于 12pt。根 Ems 本质上是可扩展的，所以 2em 等于 24pt，.5em 等于 6pt，等等。

*   **百分比 (%)**：百分比单位很像“em”单位，除了一些基本差异。首先，当前字体大小等于 100%（即 12pt = 100%）。使用百分比单位时，您的文本仍可完全适应移动设备和可访问性。

见[kyleschaeffer.com/....](http://kyleschaeffer.com/development/css-font-size-em-vs-px-vs-pt-vs/)

* * *

## 回答 #3

> 赞同：54
> 
> 时间：2012-08-02T12:48:28.957

```
@media screen and (max-width : 320px)
{
  body or yourdiv element
  {
    font:<size>px/em/rm;
  }
}
@media screen and (max-width : 1204px)
{
  body or yourdiv element
  {
    font:<size>px/em/rm;
  }
} 
```

您可以根据屏幕的屏幕尺寸手动给它。只需查看不同的屏幕尺寸并手动添加字体大小。

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2013-07-24T21:54:57.183

我开发了一个不错的 JS 解决方案——它适用于完全响应的 HTML（即用百分比构建的 HTML）

1.  我只使用“em”来定义字体大小。

2.  html 字体大小设置为 10 像素：

    ```
    html {
      font-size: 100%;
      font-size: 62.5%;
    } 
    ```

3.  我在准备好文档时调用了字体大小调整功能：

**// 这需要 JQuery**

```
function doResize() {
    // FONT SIZE
    var ww = $('body').width();
    var maxW = [your design max-width here];
    ww = Math.min(ww, maxW);
    var fw = ww*(10/maxW);
    var fpc = fw*100/16;
    var fpc = Math.round(fpc*100)/100;
    $('html').css('font-size',fpc+'%');
} 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2015-05-27T07:40:11.347

不知道为什么这很复杂。我会做这个基本的javascript

```
<body onresize='document.getElementsByTagName("body")[0].style[ "font-size" ] = document.body.clientWidth*(12/1280) + "px";'> 
```

其中 12 表示 12px 分辨率为 1280。你在这里决定你想要的价值

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2012-08-02T12:43:00.090

你可以试试这个工具： http: [//fittextjs.com/](http://fittextjs.com/)

我没有使用过第二个工具，但看起来很相似：[https ://github.com/zachleat/BigText](https://github.com/zachleat/BigText)

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2019-03-14T11:40:24.697

这对我有用：

```
body {

  font-size: calc([minimum size] + ([maximum size] - [minimum size]) * ((100vw - [minimum 
viewport width]) / ([maximum viewport width] - [minimum viewport width])));

} 
```

这里详细解释： [https ://css-tricks.com/books/volume-i/scale-typography-screen-size/](https://css-tricks.com/books/volume-i/scale-typography-screen-size/)

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2019-12-05T16:14:27.463

*不*使用媒体查询很好，因为它允许逐渐缩放字体大小。

使用`vw`单位将调整相对于视口大小的字体大小。

将单位直接转换`vw`为字体大小将很难达到移动分辨率和桌面分辨率的最佳位置。

我建议尝试类似的东西：

```
body {
  font-size: calc(.5em + 1vw);
}
```

```
Almost before we knew it, we had left the ground.
```

学分：[深入的 CSS](https://www.google.com/search?client=safari&rls=en&q=css%20in%20depth&ie=UTF-8&oe=UTF-8)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-09-06T15:22:31.080

我创建了[https://stackoverflow.com/a/17845473/189411的变体](https://stackoverflow.com/a/17845473/189411)

您可以在其中设置与要“检查”大小的框的最小和最大大小相关的最小和最大文本大小。此外，您可以检查与要应用文本大小的框不同的 dom 元素的大小。

您根据 #size-2 元素的 500px 和 960px 宽度在 #size-2 元素上调整 19px 和 25px 之间的文本大小

```
resizeTextInRange(500,960,19,25,'#size-2'); 
```

您根据 body 元素的 500px 和 960px 宽度在 #size-1 元素上调整 13px 和 20px 之间的文本大小

```
resizeTextInRange(500,960,13,20,'#size-1','body'); 
```

完整的代码有[https://github.com/kiuz/sandbox-html-js-css/tree/gh-pages/text-resize-in-range-of-text-and-screen/src](https://github.com/kiuz/sandbox-html-js-css/tree/gh-pages/text-resize-in-range-of-text-and-screen/src)

```
function inRange (x,min,max) {
    return Math.min(Math.max(x, min), max);
}

function resizeTextInRange(minW,maxW,textMinS,textMaxS, elementApply, elementCheck=0) {

    if(elementCheck==0){elementCheck=elementApply;}

    var ww = $(elementCheck).width();
    var difW = maxW-minW;
    var difT = textMaxS- textMinS;
    var rapW = (ww-minW);
    var out=(difT/100)*(rapW/(difW/100))+textMinS;
    var normalizedOut = inRange(out, textMinS, textMaxS);
    $(elementApply).css('font-size',normalizedOut+'px');

    console.log(normalizedOut);

}

$(function () {
    resizeTextInRange(500,960,19,25,'#size-2');
    resizeTextInRange(500,960,13,20,'#size-1','body');
    $(window).resize(function () {
        resizeTextInRange(500,960,19,25,'#size-2');
        resizeTextInRange(500,960,13,20,'#size-1','body');
    });
}); 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2021-07-14T17:52:42.913

这对我最有效（其中 0.5 是字体大小缩放因子）

```
font-size: calc(.5 * (1.5vh + 1.1vw)); 
```

由于屏幕通常比高度更宽，因此我使用了 1.1:1.5 的比例。

**我注意到，当我使用这个公式时，无论我使用什么级别的缩放，字体大小都保持不变。**

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-05-06T09:47:32.563

```
<script>
function getFontsByScreenWidth(actuallFontSize, maxScreenWidth){
     return (actualFontSize / maxScreenWidth) * window.innerWidth;
}

// Example:
fontSize = 18;
maxScreenWidth = 1080;
fontSize = getFontsByScreenWidth(fontSize, maxScreenWidth)

</script> 
```

我希望这将有所帮助。我将这个公式用于我的 Phase 游戏。

# javascript - 如何检测 Windows 本地存储是否可用？

> ID：11777599
> 
> 赞同：0
> 
> 时间：2012-08-02T12:37:45.660
> 
> 标签：javascript, jquery

我正在使用以下代码：

```
//if (Modernizr.localstorage) {
//    // window.localStorage is available!
//} else {
//    // document.location.href = '/Error/Message/OldBrowser';
//} 
```

有没有什么方法可以在没有使用 Modernizr 开销的情况下做同样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T12:41:09.373

```
if (!!window.localStorage) {
   /* you have localstorage */
} 
```

注意：即使在 IE8 上，localstorage 也原生可用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T12:46:54.540

来自 DevProConnections 杂志：

```
function supportStorage()
{
    return ('localStorage' in window) && window['localStorage'] != null;
} 
```

# asp.net-mvc - 多个字段的远程验证

> ID：11777603
> 
> 赞同：4
> 
> 时间：2012-08-02T12:38:11.667
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我想验证`Ville`++是`Code-postal`独一无二`Pays`的。

如果验证未通过，我想将字段标记为无效（通常为红色）。

![在此处输入图像描述](../Images/8141c620b9dafbd410ea328f0f31a56c.png)

我已经尝试了第一个实现，如下所示：

```
public class CityEditViewModel
{
    public int CityID { get; set; }

    [Required, Remote("CityAlreadyExists", "City", AdditionalFields = "CountryID, CityID, PostCode", ErrorMessageResourceName = "CityAlreadyExists", ErrorMessageResourceType = typeof(UserResource))]
    [Display(Name = "City", ResourceType = typeof(UserResource))]
    public string CityName { get; set; }

    [Required, Remote("CityAlreadyExists", "City", AdditionalFields = "CountryID, CityID, CityName", ErrorMessageResourceName = "CityAlreadyExists", ErrorMessageResourceType = typeof(UserResource))]
    [Display(Name = "PostCode", ResourceType = typeof(UserResource))]
    public string PostCode { get; set; }

    [Required, Remote("CityAlreadyExists", "City", AdditionalFields = "CityName, PostCode, CityID", ErrorMessageResourceName = "CityAlreadyExists", ErrorMessageResourceType = typeof(UserResource))]
    [Display(Name = "Country", ResourceType = typeof(UserResource))]
    public int CountryID { get; set; }

    public List<SelectListItem> Countries { get; set; }
} 
```

但是在我真正更改其中的某些内容之前，不会检查（验证）所有字段。我需要一个解决方案，每次更改 3 个字段中的一个时，所有 3 个字段都经过验证并在需要时标记为红色。

我已经检查了其他 Stackoverflow 帖子，但没有找到解决我的具体问题的方法。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T21:54:56.153

我也有类似的情况，这个帮助我开始了

```
$("#FirstName").change(function () {
        $('#CardNumber').removeData('previousValue');
        $('#CardNumber').valid();
  }); 
```

[使用远程验证进行多字段验证](https://stackoverflow.com/questions/10163683/remote-validation-mvc-3-0-multiple-fields-validation)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-19T13:49:41.003

扩展了 Suchan 的答案，我编写了这个帮助方法，它找到每个具有“附加字段”的远程验证元素，然后在每次这些字段之一更改时触发对所述元素的验证。

```
// I hate naming things
function initializeRemotelyValidatingElementsWithAdditionalFields($form) {
    var remotelyValidatingElements = $form.find("[data-val-remote]");

    $.each(remotelyValidatingElements, function (i, element) {
        var $element = $(element);

        var additionalFields = $element.attr("data-val-remote-additionalfields");

        if (additionalFields.length == 0) return;

        var rawFieldNames = additionalFields.split(",");

        var fieldNames = $.map(rawFieldNames, function (fieldName) { return fieldName.replace("*.", ""); });

        $.each(fieldNames, function (i, fieldName) {
            $form.find("#" + fieldName).change(function () {
                // force re-validation to occur
                $element.removeData("previousValue");
                $element.valid();
            });
        });
    });
} 
```

像这样调用函数：

```
$(document).ready(function() {
    initializeRemotelyValidatingElementsWithAdditionalFields($("#myFormId"));
}); 
```

# android - Android 在运行 applyBatch() 方法时打开游标

> ID：11777604
> 
> 赞同：3
> 
> 时间：2012-08-02T12:38:14.797
> 
> 标签：android

我有一个通过在 ContentResolver 上执行 applyBatch() 命令在 Android 设备上插入大量联系人的活动。我在许多 Android 设备上运行这个应用程序，它似乎工作正常，除了 Galaxy S2 I9100 手机（Android 4.0 版本），在多次插入之后，我得到以下执行的每个命令的异常：

```
E/CursorWindow( 5727): Could not allocate CursorWindow '/data/data/com.android.providers.contacts/databases/contacts2.db' of size 2097152 due to error -12.
E/JavaBinder( 5727): *** Uncaught remote exception!  (Exceptions are not yet supported across processes.)
E/JavaBinder( 5727): android.database.CursorWindowAllocationException: Cursor window allocation of 2048 kb failed. # Open Cursors=819 (# cursors opened by pid 5701=819)
E/JavaBinder( 5727):    at android.database.CursorWindow.<init>(CursorWindow.java:104)
E/JavaBinder( 5727):    at android.database.AbstractWindowedCursor.clearOrCreateWindow
(AbstractWindowedCursor.java:198)
E/JavaBinder( 5727):    at android.database.sqlite.SQLiteCursor.fillWindow(SQLiteCursor.java:162)
E/JavaBinder( 5727):    at android.database.sqlite.SQLiteCursor.getCount(SQLiteCursor.java:156)
E/JavaBinder( 5727):    at android.database.AbstractCursor.moveToPosition(AbstractCursor.java:161)
E/JavaBinder( 5727):    at android.database.AbstractCursor.moveToNext(AbstractCursor.java:209)
E/JavaBinder( 5727):    at com.android.providers.contacts.ContactsProvider2.findGroupByRawContactId(ContactsProvider2.java:3738)
E/JavaBinder( 5727):    at com.android.providers.contacts.ContactsProvider2.addAutoAddMembership(ContactsProvider2.java:3725)
E/JavaBinder( 5727):    at com.android.providers.contacts.ContactsProvider2.insertRawContact(ContactsProvider2.java:3713)
E/JavaBinder( 5727):    at com.android.providers.contacts.ContactsProvider2.insertInTransaction(ContactsProvider2.java:3360)
E/JavaBinder( 5727):    at com.android.providers.contacts.AbstractContactsProvider.insert(AbstractContactsProvider.java:108)
E/JavaBinder( 5727):    at com.android.providers.contacts.ContactsProvider2.insert(ContactsProvider2.java:2605)
E/JavaBinder( 5727):    at android.content.ContentProviderOperation.apply(ContentProviderOperation.java:214)
E/JavaBinder( 5727):    at com.android.providers.contacts.AbstractContactsProvider.applyBatch(AbstractContactsProvider.java:203)
E/JavaBinder( 5727):    at com.android.providers.contacts.ContactsProvider2.applyBatch(ContactsProvider2.java:2755)
E/JavaBinder( 5727):    at android.content.ContentProvider$Transport.applyBatch(ContentProvider.java:208)
E/JavaBinder( 5727):    at android.content.ContentProviderNative.onTransact(ContentProviderNative.java:179)
E/JavaBinder( 5727):    at android.os.Binder.execTransact(Binder.java:338)
E/JavaBinder( 5727):    at dalvik.system.NativeStart.run(Native Method) 
```

异常中提到的 PID 正在运行 **android.process.acore**包。

事实上，当我在执行初始插入时监控进程时，我看到这个 PID 正在生成日志，其中提到“光标在关闭之前完成”

有人知道这种奇怪的行为吗？

下面是执行插入的代码：

```
ArrayList<ContentProviderOperation> ops = new ArrayList<ContentProviderOperation>();
        ops.add(ContentProviderOperation.newInsert(RawContacts.CONTENT_URI)
                .withValue(RawContacts.ACCOUNT_TYPE, "")
                .withValue(RawContacts.ACCOUNT_NAME, "").build());

        ops.addAll(vCardUtility.readVCard(vCard));

        Log.w(TAG, "TRYING TO EXECUTE " + ops.size() + " OPERATIONS");
        r = cr.applyBatch(ContactsContract.AUTHORITY, ops); 
```

readVcard 只是创建一个 ContentProviderOperation 对象列表来插入联系人详细信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-02T12:45:00.600

关闭光标以避免该错误。

例子：

```
yourCursor.close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-05T13:29:50.510

我刚刚看到了这个崩溃，它似乎与太多`Cursor`的 open 有关，似乎我们没有关闭游标，并且累积并达到了一些开放游标限制。

请参阅以下行`logcat`：

```
android.database.CursorWindowAllocationException: 
Cursor window allocation of 2048 kb failed. 
# Open Cursors=351 
(# cursors opened by pid 3862=1) 
(# cursors opened by pid 12138=347) 
(# cursors opened by pid 15078=1) 
(# cursors opened by pid 19150=1) 
(# cursors opened by pid 21804=1) 
```

# ios - 我可以使用 NSUbiquitousKeyValueStore 在 Mac 和 iOS 之间同步吗？

> ID：11777605
> 
> 赞同：3
> 
> 时间：2012-08-02T12:38:15.560
> 
> 标签：ios, macos, cocoa, icloud, nsubiquitouskeyvaluestore

我将在不久的将来将我的 iOS 应用程序移植到 Mac OS (Mountain Lion) 以在 Mac App Store 中出售。

iOS 应用程序使用 iCloud 与 NSUbiquitousKeyValueStore 同步，这实现起来非常简单并且运行良好。我想知道是否可以访问 Mac OS 中 iOS 应用程序存储的数据。应用程序之间的用户默认设置是相同的，因此只要可以做到，这应该可以很好地工作。Mac 应用程序可以访问 iOS 应用程序存储的 iCloud NSUbiquitousKeyValueStore 数据吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-03T03:07:17.167

如果您使用相同的商店标识符（由`com.apple.developer.ubiquity-kvstore-identifier`权利定义），是的。

实际上，您可以在 iOS 设备和 Mac OS X 上的不同应用程序之间共享相同的商店标识符。唯一的限制是您需要为所有应用程序拥有相同的 TEAM id，因为`com.apple.developer.ubiquity-kvstore-identifier`权利始终以该 id 开头。

# c# - 将对象转换为十进制 c 的奇怪行为

> ID：11777610
> 
> 赞同：0
> 
> 时间：2012-08-02T12:38:20.223
> 
> 标签：c#, casting, behavior

我奇怪地跑着：

```
var k = (decimal?)(int?)1; //valid cast
var p = (decimal?)(int?)(object)(int?)1; //valid cast
var l = (decimal?)(object)(int?)1; //Specified cast is not valid 
```

有人可以解释为什么会这样吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T12:48:39.010

第一个演员是：

*   转换`int`为`int?`
*   转换`int?`为`decimal?`

两种转换都是有效的。

第二种情况是：

*   转换`int`为`int?`
*   Box the `int?`（最终成为 boxed `int`）
*   将对象拆箱`int?`
*   转换`int?`为`decimal?`

所有这些转换都是有效的。

第三种情况是：

*   转换`int`为`int?`
*   Box the `int?`（最终成为 boxed `int`）
*   将对象拆箱`decimal?`

此处的最后一次转换无效 - 您只能将其拆箱为相同的值类型或其可为空的等效项。（实际上 CLR 比这更宽容一些，但这与这种情况无关。）

在每种情况下转换`int?`为实际上是无关紧要的。对可空类型的拆箱也有些无关紧要，因为对可空类型的拆箱就像对非可空类型的拆箱，只是空引用被拆箱为空值。鉴于此处没有空值，您的最​​后一个示例等效于：

```
object o = 1; // Boxing
decimal d = (decimal) o; // Unboxing, but to the wrong type 
```

# php - Wordpress：自己的分页重写规则

> ID：11777611
> 
> 赞同：1
> 
> 时间：2012-08-02T12:38:21.460
> 
> 标签：php, wordpress, .htaccess, mod-rewrite, pagination

是否可以创建以下重定向规则：

> [http://xyz.com/page/2/](http://xyz.com/page/2/)

应该重定向到

> [http://xyz.com/?page=2](http://xyz.com/?page=2)

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T12:46:53.673

这应该这样做：

```
RewriteEngine On
RewriteRule ^page/([^/]*)$ /?page=$1 [L] 
```

您可以使用此网站生成重写代码：[http ://www.generateit.net/mod-rewrite/](http://www.generateit.net/mod-rewrite/)

编辑：好像我有点太晚了..

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T12:40:10.943

使用[Mod Rewrite Generator](http://www.generateit.net/mod-rewrite/)，并将其放入您的 htaccess 文件中

在您的 htaccess 文件中，它看起来像这样

```
RewriteEngine On
RewriteRule ^page/([^/]*)/$ /?page=$1 [L] 
```

# javascript - 当 img src 等于 jQuery 的特定值时禁用 href

> ID：11777615
> 
> 赞同：1
> 
> 时间：2012-08-02T12:38:34.750
> 
> 标签：javascript, jquery, html

我有一个 img 标签（id “image”）。img 的 src 是使用 jQuery 分配的（每个图像都有单独的按钮，无法显示）。有一个按钮可以前进到下一张图片（将其视为幻灯片）。“下一步”按钮只是一个锚标记，带有指向另一个 jQuery 函数的 href。

当最后一张图片占据img标签的src时，我想删除锚标签的href（'next'按钮）。如果不是最终图片是 img 标记的 src，我希望 'next' 按钮通过 'active' （具有其他 jQuery 函数的 href）。

页面加载时，img 标签没有 src。

我编写了以下代码，认为它会起作用：

```
<script style="text/javascript">
$(document).ready(function () {
    var src = ($("#image").attr("src"));
    if  (src == "images/big/7.jpg") {

        $("#next").attr("href","");

    } else {

        $("#next").attr("href", "javascript:nextImage()");

    }
});
</script> 
```

可悲的是它没有。当 img 的 src 为“images/big/7.jpg”时，它不会禁用“下一步”按钮。如果“下一步”按钮被禁用，我也怀疑这个脚本是否会继续检查 img 的 src。例如：如果我前进到最后一张图片，并且“下一个”按钮被禁用（删除了 href），如果我返回几张图片，是否会重新启用“下一个”按钮（重新添加 href）？

您可以就为什么这不起作用以及我应该做些什么来提供任何帮助将不胜感激。提前致谢。

编辑：下一个图像代码，再加上一些。

```
 <script style="text/javascript">
function nextImage() {
    $("#image").attr("src", $("#image").attr("src").replace(/(\d+)\.jpg/, function(s, m) {
    return (parseInt(m, 10)+1) + '.jpg';
}));}
</script> 
```

此外，按钮的代码和 img 标签。previousImage()、lastImage() 等只是对 nextImage() 的修改。干杯。

```
<img id="image" src=""></img>
        <div class="imageToolbar">
            <a id="first" href="javascript:firstImage()"></a>
            <a id="previous" href="javascript:previousImage()"></a>
            <a id="next" href="javascript:nextImage()"></a>
            <a id="last" href="javascript:lastImage()"></a>
        </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T12:41:00.387

当页面首次加载时，您的代码将运行一次，并且仅运行一次。每次图像更改时，您都需要运行代码才能使其正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T13:42:38.103

假设页面总是加载显示的第一个图像，我稍微调整了您的功能以使用按钮，相应地使用[disabled](https://developer.mozilla.org/en/DOM/HTMLInputElement)属性：

**HTML**

```
<img id="image" src="images/big/1.jpg">
<div class="imageToolbar">
    <button id="first" disabled="disabled">First</button>
    <button id="previous" disabled="disabled">Prev</button>
    <button id="next">Next</button>
    <button id="last">Last</button>
</div> 
```

**JS**

```
function changeImage(arg) {
    $("#image").attr("src", $("#image").attr("src").replace(/(\d+)\.jpg/, function(s, m) {
        var min = 1, //configure these
            max = 7, //values
            $lower = $('#first, #previous'),
            $higher = $('#next, #last');

        m = parseInt(m, 10);

        if (arg == 'next') {
            m++;
            $lower.prop('disabled', false);
            if (m == max)
                $higher.prop('disabled', true);
        }
        else if (arg == 'previous') {
            m--;
            $higher.prop('disabled', false);
            if (m == min)
                $lower.prop('disabled', true);
        }
        else if (arg == 'first') {
            m = min;
            $higher.prop('disabled', false);
            $lower.prop('disabled', true);
        }
        else if (arg == 'last') {
            m = max;
            $higher.prop('disabled', true);
            $lower.prop('disabled', false);
        }

        return m + '.jpg';
    }));

    //you can remove the next line on the production server:
    console.log('Current image: ' + $('#image').attr('src'));
}

$(document).ready(function () {
    $('#first').click(function(){ changeImage('first'); });
    $('#previous').click(function(){ changeImage('previous'); });
    $('#next').click(function(){ changeImage('next'); });
    $('#last').click(function(){ changeImage('last'); });
}); 
```

## [*jsFiddle*](http://jsfiddle.net/cZYS7/4/)

但是，如果您正在开发幻灯片插件，为什么要重新发明轮子？您不妨看看现成的好东西，例如[jQuery Camera Slideshow](http://www.pixedelic.com/plugins/camera/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T12:50:34.483

使用 javascript-hrefs 被认为是不好的做法。由于您仍然使用 jQuery，因此您可以在按钮中挂钩[单击事件](http://api.jquery.com/click/)，然后`nextImage()`从 JavaScript 代码调用。像这样的东西：

```
$("#next").click(function (e) {
    // If this was an a-element, prevent going to that page
    e.preventDefault();

    var src = $("#image").attr("src");
    if  (src != "images/big/7.jpg") {
        nextImage();
    }
}); 
```

现在，每次用户单击该`#next`元素时，此代码都会运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T13:01:47.833

为什么不使用数组作为 src attr 图像的占位符？

通过这种方式，您可以随时跟踪当前正在查看哪个图像，哪个位于最后，等等！我认为这看起来要好得多，而不必将最后一个与特定的字符串名称/图像文件进行比较！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T12:52:03.410

准备好文档后，将您的代码放入这样的函数中

```
function imageCheck() {
    var src = ($("#image").attr("src"));
    if  (src == "images/big/7.jpg") {
         $("#next").attr("href","");
    } else {
        $("#next").attr("href", "javascript:nextImage()");
    }
 }; 
```

并从 nextImage() 函数中调用此函数。所以每次 nextImage 函数运行时，你的 imageCheck() 函数都会检查 image src 的值并适当地显示 href。

# android - android：指针索引超出范围

> ID：11777617
> 
> 赞同：0
> 
> 时间：2012-08-02T12:38:41.213
> 
> 标签：android, multi-touch, processing.js

我使用 processing.js 编写了一个 android 应用程序！我在银河选项卡中进行多点触控缩放时遇到问题！在移动设备中没有问题，但在银河选项卡中，每当我尝试缩放时都会收到此错误：

```
 FATAL EXCEPTION: main
java.lang.IllegalArgumentException: pointerIndex out of range
    at android.view.MotionEvent.nativeGetAxisValue(Native Method)
    at android.view.MotionEvent.getX(MotionEvent.java:1549)
    at changethispackage.beforesubmitting.tothemarket.u2.u2.surfaceTouchEvent(u2.java:633)
    at apwidgets.MyScrollView.onTouchEvent(MyScrollView.java:20)
    at android.view.View.dispatchTouchEvent(View.java:4626)
    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1554)
    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1320)
    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1560)
    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1333)
    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1560)
    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1333)
    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1560)
    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1333)
    at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1862)
    at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1286)
    at android.app.Activity.dispatchTouchEvent(Activity.java:2315)
    at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1835)
    at android.view.View.dispatchPointerEvent(View.java:4694)
    at android.view.ViewRoot.deliverPointerEvent(ViewRoot.java:2419)
    at android.view.ViewRoot.handleMessage(ViewRoot.java:2080)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:132)
    at android.app.ActivityThread.main(ActivityThread.java:4126)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:491)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:844)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:602)
    at dalvik.system.NativeStart.main(Native Method)
Can't parse this exception line:
FATAL EXCEPTION: main 
```

这是缩放的代码：

```
 boolean surfaceTouchEvent(MotionEvent event) {
  pointNum=event.getPointerCount();
  switch (event.getAction() & MotionEvent.ACTION_MASK) {
  case MotionEvent.ACTION_POINTER_DOWN:
    // User is pressing down another finger.
    float x11 = event.getX(0) - event.getX(1);
    float y22 = event.getY(0) - event.getY(1);
    z4 = sqrt(x11*x11+y22*y22);
    break;
  case MotionEvent.ACTION_POINTER_UP:
    // User is released one of the fingers.
    break;
  case MotionEvent.ACTION_MOVE:
    x1=event.getX(0);
    x2=event.getX(1);
    y1=event.getY(0);
    y2=event.getY(1);
    float x = event.getX(0) - event.getX(1);
    float y= event.getY(0) - event.getY(1);
    float z3 = sqrt(x*x+y*y);
    println("z3:" + z3);
    if (pointNum == 2 ) {
      if ( z3 < z4 ) {
        zoom = z3/z4;
      }
      else {
        zoom = z3/z4;

      }
      zoom = constrain(zoom, 0, 100);
    }

    break;
  }
  return super.surfaceTouchEvent(event);
} 
```

如果您知道问题，请提供帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-20T15:23:04.030

问题是您正在检查案例中第一根和第二根手指的 X 和 Y 值，但是当只有一根手指在屏幕上移动时 `ACTION_MOVE`，您可以获得一个事件。`ACTION_MOVE`

如果您`getX(1)`在只有一根手指向下时调用，那么您会得到 ，`IllegalArgumentException`因为只有一根手指向下，并且您正在尝试检查第二个手指的 X 值。

解决方案是移动这条线：

`if (pointNum == 2 ) {`

到`ACTION_MOVE`案例块的顶部，因为您不会关心在屏幕上移动一根手指来进行缩放事件。

我遇到了这个问题，因为我在`onTouchEvent`通话期间在触摸 a 的空白部分时遇到了这个异常`ScrollView`。请参阅[此错误](https://code.google.com/p/android/issues/detail?id=16836)以了解我最终最终用于该问题的解决方法。

# forms - 列表中的单选按钮不分组

> ID：11777624
> 
> 赞同：0
> 
> 时间：2012-08-02T12:38:55.273
> 
> 标签：forms, radio-button, html-lists, radiobuttonlist

我这里有一个非常讨厌的问题！

我`<ul>`在每个`<li>`. 在每个列表元素中都有一个单选按钮，我想将它们组合在一起以使它们在单击时切换。

问题是收音机无法连接！如果我单击其中两个，它们都会被选中！

这是代码：http: [//jsfiddle.net/bakaburg1/Djq5q/1/](http://jsfiddle.net/bakaburg1/Djq5q/1/)

注意：这是 wordpress 自定义字段的代码。

非常感谢！

EDIT1：重要的是每个列表元素中的字段保持连接，以便在 PHP 端我得到这样的数据结构：

```
array (
  0 => 
  array (
    'answer' => 'answer1',
  ),
  1 => 
  array (
    'answer' => 'answer2',
  ),
  2 => 
  array (
    'is_right' => 'on',
    'answer' => 'answer3',
  ),
  3 => 
  array (
    'answer' => 'yiuyiuyiuj',
  ),
) 
```

EDIT2：暂时我用一些jQuery修补了这个问题：

```
jQuery('.mm_ps_answers input:radio').click(function(){
 jQuery(this).parents('ul').find('input:radio').not(this).attr('checked', false)
}) 
```

虽然不确定最优雅的解决方案，但也可以随意评论（而不是回答）这个片段！

EDIT3：我通过为字段提供三个不同的名称解决了这个问题，然后将发布的数据合并到一个数组中，然后序列化并保存在数据库中。

```
<li>
    <a class="mm_ps_move button"><img src="http://localhost:8888/minimamedicamenta/wp-content/themes/minima/img/move.png"></a>
    <a class="mm_ps_delete_answer button">Delete Answer</a>
    <input type="radio" class="mm_ps_is_right" name="mm_ps_answers_is_right[]">
    <input type="text" name="mm_ps_answers_input[]" value="">
    <input type="hidden" name="mm_ps_answers_impressions[]">
    <span class="mm_ps_impressions">impressions: <span>0</span></span>
</li> 
```

但是出现了另一个问题......虽然文本输入字段后端的POST数据是一个有序数组，每个字段都有一个值，也是空的，单选按钮只发送一个值，所以我不知道已经检查了 wich 列表元素中的 wich 收音机，对此有什么帮助吗？这是 POST 中三个输入的数据（值是随机字符串）：

```
[04-Aug-2012 17:18:45] Line  (in ):
array (
  0 => 'cvxcv',
  1 => 'vs',
  2 => '',
  3 => 's',
)
[04-Aug-2012 17:18:45] Line  (in ):
array (
  0 => 'on',
)
[04-Aug-2012 17:18:45] Line  (in ):
array (
  0 => '',
  1 => '',
  2 => '',
  3 => '',
) 
```

EDIT4：我使用 javascript 修补了问题，该 javascript 为修改列表的每个操作（排序、添加、删除元素）上的单选按钮分配了一个增量数值。虽然不是很干净。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T12:45:35.467

```
<ul class="mm_ps_answers manage_list ui-sortable">
<li>
    <input type="radio" name="SameName">
    <input type="text" name="mm_ps_answers[0][answer]" value="jkjhk">
    <span class="mm_ps_impressions">impressions: </span>
</li>
<li>
    <input type="radio" name="SameName">
    <input type="text" name="mm_ps_answers[1][answer]" value="lknjlk">
    <span class="mm_ps_impressions">impressions: </span>
</li>
<li>
    <input type="radio" name="SameName">
    <input type="text" name="mm_ps_answers[2][answer]" value="òklkjl">
    <span class="mm_ps_impressions">impressions: </span>
</li>
<li>
    <input type="radio" name="SameName">
    <input type="text" name="mm_ps_answers[3][answer]" value="p09i0i">
    <span class="mm_ps_impressions">impressions: </span>
</li> 
```

使浏览器切换它们的属性是**RadioButton 的名称**。将所有这些单选按钮命名为相同（每个组应具有相同的名称），它们将切换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T12:48:35.377

要将单选按钮组合在一起，您必须在 name 属性中指定相同的值。

前任。（来自 W3Schools）

```
<form action="">
<input type="radio" name="sex" value="male" /> Male<br />
<input type="radio" name="sex" value="female" /> Female
</form> 
```

**编辑：** 为了保持您在提供的 jsFiddle 链接中计划的顺序，我建议您对一个列表项进行迭代声明：（对不起，错误的 php 代码，但我很长时间没有使用它）

```
foreach($answer as $value){
<li>
    <input type="radio" name="answer" value="$value[is_right]">
    <input type="text" name="$value[answer]" value="jkjhk">
    <span class="mm_ps_impressions">impressions: </span>
</li>
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T12:57:50.930

如果由于某种原因无法使用该`name`属性（例如，您的 name 属性是动态填充的 - 我怀疑是这样），您可以使用 jQuery 来切换复选框：

```
$(document).ready(function() {
    $('input[type="radio"]').click(function() {
      $('input[type="radio"]').prop('checked', false);
      $(this).prop('checked', true);        
    });        
}); 
```

# visual-studio-2010 - Visual Studio 2010 中的代码自动清理

> ID：11777635
> 
> 赞同：4
> 
> 时间：2012-08-02T12:39:34.603
> 
> 标签：visual-studio-2010, settings, code-cleanup

我想知道，如果可能的话，在 Visual Studio 2010 中进行某种自动代码清理。

特别有趣的是：

*   自动缩进
*   去除拖尾空行
*   删除未使用的用途

在特殊情况下，例如在保存文件时。

我没有在选项中找到任何东西，但也许我只是有点失明......在日食中afaik至少有可能打算保存。Visual Studio中应该有类似的东西吗？

**更新：**感谢您的快速回复，问题是我知道键盘快捷键（但仍然感谢您提及），但我现在正在处理大量外国代码，不必手动执行它会很棒对于每个文件:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-02T12:45:57.120

自动缩进可以通过编辑/高级/格式化文档，或等效的键盘快捷键（Ctrl-K，Ctrl-D，YMMV）来完成。

拖尾空行我不知道有一个自动解决方案，尽管可能有一个可用的扩展名（或者你可以自己编写）。

删除未使用`using`的 s 是内置的 VS 重构，也可在 Resharper 或 DevExpress 等工具中使用。（右键单击代码，然后组织使用/删除和排序。）

我不知道为每个文档保存自动发生这些的标准方法，但您可能会编写一个宏或 VS 扩展来实现这一点。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-02T12:45:19.150

上面的一些已经直接存在于 Visual Studio 中：

`Ctrl - K - D`将重新格式化文档（编辑 -> 高级 -> 格式化文档）。

有一个处理`using`语句的重构（在代码中右键单击，有一个“组织使用”选项）。

至于空行，我不知道有什么内置的。

但是像 Resharper 这样的工具确实具有处理以上所有内容的代码清理功能以及更多功能（Resharper 菜单 -> 工具 -> 清理代码）。

默认情况下，以上都不会在保存时执行，但您应该能够编写一个在保存事件上运行的[宏。](http://msdn.microsoft.com/en-us/library/b4c73967.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-01-25T10:07:08.853

你可以试试[CodeMaid](http://www.codemaid.net/)。它是您所描述的开源解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T12:46:00.603

要自动缩进，您可以使用 ctrl+k+d，就像 eclipse 中的 ctrl+shift+f 一样。但是对于未使用的用途，我不知道。

# c++ - 将按钮添加到 QTableview

> ID：11777637
> 
> 赞同：15
> 
> 时间：2012-08-02T12:39:37.593
> 
> 标签：c++, qt, qt4

我使用`QTableview`and创建了一个表`QAbstractTableModel`。在其中一个单元格中，我想在该单元格的右上角添加一个**帮助按钮。**

有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-02T13:03:32.077

为此，您必须实现自己的委托。

在 Qt 中，除了数据、模型和视图之外，您还有*Delegates*。它们提供输入功能，还负责在 View 中渲染“特殊”项目，这正是您所需要的。

Qt doc 对这些（关键字：）有很好的覆盖`Model/View programming`，您还可以[在此处](https://doc.qt.io/archives/qq/qq24-delegates.html)和[此处](http://doc.qt.io/qt-5/qtwidgets-itemviews-stardelegate-example.html)找到一些示例。

另外（有点题外话，但我想我应该指出这一点），如果你使用一个普通的`QTableWidget`，你可以将任何东西插入任何具有它的`setCellWidget()`功能的单元格。

**UPD**

这是来自 Qt 文档的一个*稍微*修改过的示例（我在 Qt 中使用模型/视图的东西很烂，所以不要为这段代码打我）。它将在右侧的每个单元格中绘制一个按钮，并捕获单元格中的单击事件以检查单击是否在“按钮”上，并做出相应的反应。

可能这不是最好的方法，但正如我所提到的，我对 Qt 的模型和视图不太了解。

要正确处理事情并允许正确编辑，您还需要实现`createEditor()`,`setEditorData()`和`setModelData()`函数。

要在特定单元格而不是所有单元格中绘制你的东西，只需在`paint()`函数中添加一个条件（请注意，它获取模型索引作为参数，因此您始终可以知道您在哪个单元格中绘制，并相应地绘制）。

* * *

委托人.h：

```
class MyDelegate : public QItemDelegate
{
    Q_OBJECT

public:
    MyDelegate(QObject *parent = 0);
    void paint(QPainter *painter, const QStyleOptionViewItem &option, const QModelIndex &index) const;
    bool editorEvent(QEvent *event, QAbstractItemModel *model, const QStyleOptionViewItem &option, const QModelIndex &index);
}; 
```

* * *

委托.cpp：

```
 #include <QtGui>
 #include "delegate.h"

 MyDelegate::MyDelegate(QObject *parent)
     : QItemDelegate(parent)
 {
 }

 void MyDelegate::paint(QPainter *painter, const QStyleOptionViewItem &option, const QModelIndex &index) const
 {
     QStyleOptionButton button;
     QRect r = option.rect;//getting the rect of the cell
     int x,y,w,h;
     x = r.left() + r.width() - 30;//the X coordinate
     y = r.top();//the Y coordinate
     w = 30;//button width
     h = 30;//button height
     button.rect = QRect(x,y,w,h);
     button.text = "=^.^=";
     button.state = QStyle::State_Enabled;

     QApplication::style()->drawControl( QStyle::CE_PushButton, &button, painter);
 }

 bool MyDelegate::editorEvent(QEvent *event, QAbstractItemModel *model, const QStyleOptionViewItem &option, const QModelIndex &index)
 {
     if( event->type() == QEvent::MouseButtonRelease )
     {
         QMouseEvent * e = (QMouseEvent *)event;
         int clickX = e->x();
         int clickY = e->y();

         QRect r = option.rect;//getting the rect of the cell
         int x,y,w,h;
         x = r.left() + r.width() - 30;//the X coordinate
         y = r.top();//the Y coordinate
         w = 30;//button width
         h = 30;//button height

         if( clickX > x && clickX < x + w )
             if( clickY > y && clickY < y + h )
             {
                 QDialog * d = new QDialog();
                 d->setGeometry(0,0,100,100);
                 d->show();
             }
     }

     return true;
 } 
```

* * *

主文件

```
#include "delegate.h"

int main(int argc, char *argv[])
{
    QApplication app(argc, argv);

    QStandardItemModel model(4, 2);
    QTableView tableView;
    tableView.setModel(&model);

    MyDelegate delegate;
    tableView.setItemDelegate(&delegate);

    tableView.horizontalHeader()->setStretchLastSection(true);
    tableView.show();
    return app.exec();
} 
```

结果将如下所示：

![结果](../Images/79e6f00b30cfe4498504c436d1a3bb2a.png)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-04-01T12:52:24.653

我有一个解决方案，无需对整个油漆过程进行任何复杂的重新发明。我有一个 TableView，其中每一行都有一个按钮。请注意，在我的情况下，for 循环遍历每一行。

```
QSignalMapper *signalMapper = new QSignalMapper(this);

for( int i=0; i<rows.length(); i++ ) { //replace rows.length with your list or vector which consists of the data for your rows.
     //do something with your data for normal cells...         
     auto item = model->index(i, COLUMN_FOR_WHATEVER_YOU_WANT);
     model->setData(item, QVariant::fromValue(yourObject.getSpecificInformation()));

     //make new button for this row 
     item = model->index(i, COLUMN_BUTTON); 
     QPushButton *cartButton = new QPushButton("Add");
     ui->table_view->setIndexWidget(item, cartButton);

     signalMapper->setMapping(cartButton, i);
     connect(cartButton, SIGNAL(clicked(bool)), signalMapper, SLOT(map()));
}
connect(signalMapper, SIGNAL(mapped(int)), this, SLOT(doSomething(int))); 
```

然后您会自动获取用户单击按钮所在行的索引。您只需要制作自己的插槽：

```
private SLOTS:
    void doSomething(int row); 
```

如果您有特定的单元格，它的工作原理类似。

请注意，在此示例中我不关心内存泄漏，并且我不完全知道如果您更新 TableView 会发生什么......（它工作正常，但它可能不会在新按钮指针时删除旧按钮指针被创建）

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-01-29T12:21:29.763

setIndexWidget 为我工作。例子：

```
QPushButton* helpButton = new QPushButton("Help");

tableView->setIndexWidget(model->index(position,COLUMN_NUMBER), helpButton); 
```

如果您只想添加一个按钮并在单击它时执行某些操作，则使用 setIndexWidget() 添加一个按钮可以正常工作。我相信我们不需要繁琐的绘制方法或实现委托。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-08-28T11:50:51.170

```
 // use only standard style  
QApplication::style()->drawControl(QStyle::CE_PushButtonLabel, &button, painter); 
```

对于使用用户样式，需要更改：

```
 //use user style   
QPushButton* real_button = ....; // button inherited user styles
    real_button->style()->drawControl( QStyle::CE_PushButtonLabel, &button, painter, real_button); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-08T05:53:06.170

当视图想要绘制一个单元格时，它会调用委托的`paint()`函数，并提供一些关于如何、什么以及在哪里绘制单元格内容的信息。默认委托只绘制`Qt::DisplayRole`文本和`selectionState`.

如果你替换了委托，那么你就完全替换了默认行为：你可以画任何你喜欢的东西。如果你想要文本，那么你需要安排绘制它。你可以自己做，或者使用标准的 C++ 机制，你可以先调用默认的绘图代码，然后在顶部绘图。在我的方法`QItemDelegate::paint(painter, option, index);`开头添加后它可以工作。`paint()`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-09T07:17:22.953

我得到了解决方案..旧油漆方法：

```
void MyDelegate::paint(QPainter *painter, const QStyleOptionViewItem &option, const QModelIndex &index) const
 {
     QStyleOptionButton button;
     QRect r = option.rect;//getting the rect of the cell
     int x,y,w,h;
     x = r.left() + r.width() - 30;//the X coordinate
     y = r.top();//the Y coordinate
     w = 30;//button width
     h = 30;//button height
     button.rect = QRect(x,y,w,h);
     button.text = "=^.^=";
     button.state = QStyle::State_Enabled;

     QApplication::style()->drawControl( QStyle::CE_PushButton, &button, painter);
 } 
```

这是更新的paint() 方法。

```
void MyDelegate::paint(QPainter *painter, const QStyleOptionViewItem &option, const QModelIndex &index) const
 {
         QItemDelegate::paint(painter, option, index);
  if(index.row()==8)//since i have to make it display only at (8,0) position .
 {
  if(index.column()==0)
  {
     QStyleOptionButton button;
     QRect r = option.rect;//getting the rect of the cell
     int x,y,w,h;
     x = r.left() + r.width() - 20;//the X coordinate
     y = r.top();//the Y coordinate
     w = 15;//button width(based on the requirement)
     h = 15;//button height(based on the requirement)
  button.icon= QIcon(QString::fromUtf8("Resources/HelpIcon.png"));
  button.iconSize = QSize(20,20);
     button.rect = QRect(x,y,w,h);
     button.text = "";//no text . since if text will be given then it will push the icon to left side based on the coordinates .
     button.state = QStyle::State_Enabled;

     //QApplication::style()->drawControl( QStyle::CE_PushButton, &button, painter);

  QApplication::style()->drawControl( QStyle::CE_PushButtonLabel, &button, painter);//To make the Button transparent .

  }
  }
} 
```

# c# - 更新数据库中的 XML 属性

> ID：11777639
> 
> 赞同：0
> 
> 时间：2012-08-02T12:39:53.570
> 
> 标签：c#, sql

它在一个存储过程中

```
@myname varchar(50)

UPDATE temp_xmlloc 
SET myxml.modify('replace value of (/name/@id[.="XML"])[1] with "GK" ' ) 
WHERE name = @myname; 
```

取而代之的是，`GK`如果我需要付出`@myname`，我应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T12:44:39.163

你可以使用[`sql:variable`](http://msdn.microsoft.com/en-us/library/ms188254.aspx)：

```
UPDATE  temp_xmlloc 
SET     myxml.modify('replace value of (/name/@id[.="XML"])[1] with sql:variable("@myname") ')
where   name = @myname; 
```

# java - Java URL java.net.ConnectException 错误（Ping 有效，其他 URL 有效）

> ID：11777643
> 
> 赞同：1
> 
> 时间：2012-08-02T12:40:03.737
> 
> 标签：java, url, connection

我正在编写一个程序，它从列表中读取一些 ID，从中找出不同的 URL，并将图像保存到我的 C: 驱动器。

如果我在浏览器中导航到图像 URL，它们就会起作用。此外，如果我尝试使用来自不同服务器的图像的 URL，则该程序完全可以正常工作。问题是当我尝试连接到此 URL 上的特定图像时，它似乎不起作用。奇怪的是，当我 ping URL 时，我得到 0% 的数据包丢失。此外，我的浏览器没有使用会导致它在 Java 程序上运行的特殊代理设置。

以下错误/输出的原因可能是什么？

```
Job started ...
1) AC_0A47_EXT1.jpg 2/0/47/307/398/HA47H01_H.jpg
Exception #3 java.net.ConnectException: Connection timed out: connect
at java.net.DualStackPlainSocketImpl.connect0(Native Method)
at java.net.DualStackPlainSocketImpl.socketConnect(Unknown Source)
at java.net.AbstractPlainSocketImpl.doConnect(Unknown Source)
at java.net.AbstractPlainSocketImpl.connectToAddress(Unknown Source)
at java.net.AbstractPlainSocketImpl.connect(Unknown Source)
at java.net.PlainSocketImpl.connect(Unknown Source)
at java.net.SocksSocketImpl.connect(Unknown Source)
at java.net.Socket.connect(Unknown Source)
at java.net.Socket.connect(Unknown Source)
at sun.net.NetworkClient.doConnect(Unknown Source)
at sun.net.www.http.HttpClient.openServer(Unknown Source)
at sun.net.www.http.HttpClient.openServer(Unknown Source)
at sun.net.www.http.HttpClient.<init>(Unknown Source)
at sun.net.www.http.HttpClient.New(Unknown Source)
at sun.net.www.http.HttpClient.New(Unknown Source)
at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(Unknown Source)
at sun.net.www.protocol.http.HttpURLConnection.plainConnect(Unknown Source)
at sun.net.www.protocol.http.HttpURLConnection.connect(Unknown Source)
at sun.net.www.protocol.http.HttpURLConnection.getInputStream(Unknown Source)
at java.net.URL.openStream(Unknown Source)
at pullVFMImagesFromVFMURLs.writeImage(pullVFMImagesFromVFMURLs.java:99)
at pullVFMImagesFromVFMURLs.pullvfmimagesfromvfmurls(pullVFMImagesFromVFMURLs.java:48)
at pullVFMImagesFromVFMURLs.main(pullVFMImagesFromVFMURLs.java:21) 
```

更多信息：

ID列表（MissingImagez.txt）如下：

```
AC_0A47_EXT1.jpg|2/0/47/307/398/xxx.jpg
AC_0C09_EXT1.jpg|3/0/44/130/589/xyz.jpg
AC_0C16_RM1.jpg|3/0/44/602/895/zzz.jpg
AC_0C17_BAR1.jpg|3/0/45/284/10/www.jpg 
```

对应的代码如下：

```
 public static void main(String[] args)
  {
    pullImagesFromURLs processor = new pullImagesFromURLs();

    String passParam = null;

    for (int i = 0; i < args.length; i++)
       passParam = (args[i].toString().toUpperCase());

    processor.pullvfmimagesfromvfmurls(passParam);
  }

  public void pullvfmimagesfromvfmurls(String passParam)
  {
    System.out.println("Job started ...");

    try
    {     
       boolean bOK = false;
       String sOrigName = "";
       String sURL = ""; 
       int iCount = 0;
       int iInt = 0;

       try
       {
          BufferedReader in = new BufferedReader(new FileReader("/tmp/missingImagez.txt"));
          String str;

          while ((str = in.readLine()) != null)
          {       
             iInt = str.indexOf("|");     
             sOrigName = str.substring(0,iInt);
             sURL = str.substring(iInt+1);
             iCount ++;
             System.out.println(iCount + ") " + sOrigName + " " + sURL);
             bOK = writeImage(sOrigName, sURL);         
          }           

          try
          {
             if (in != null)
                in.close();             
          }      
          catch (Exception e)
          {
          }

       }
       catch (IOException e)
       {
         System.out.println("Exception #1 " + e);
       }
    }

    catch (Exception e)
    {
       System.out.println("Exception #2 " + e);
       System.exit(-666);
    }

    System.out.println("Job completed");

    System.exit(-666);

  } 
 private static boolean writeImage(String origName, String vfmURL) 
  {

    boolean bOK = true;
    String sPath = "C:/images/img2754/";

    try
    {
       final String vfmURLPrefix = new String("http://www.blah.blah2.com/imageRepo/");

       BufferedInputStream stream = null; 
       FileOutputStream destination = null;
       URLConnection urlc = null;
       int readSize = 1024 * 50;
       int bytes_read;
       URL url = null;

        url = new URL(vfmURLPrefix + vfmURL);
        urlc = url.openConnection();
        urlc.setDoOutput(true);
        stream = new BufferedInputStream(url.openStream());
        System.out.println(url.toString());
        destination = new FileOutputStream(sPath+origName);
        byte[] buffer = new byte[readSize];

        while(true)
        {       

           bytes_read = stream.read(buffer);
           if (bytes_read == -1) {break;}
             destination.write(buffer, 0, bytes_read);
             stream.close(); 
        }

        if(stream != null)
            stream.close();

        if(destination != null) 
           destination.close();

    }

    catch(Exception e)
    {
       System.out.println("Exception #3 " + e);
    }
    return bOK;

  } 
```

尝试使用 Apache HttpComponents。得到以下输出：好的——我试过了......现在我得到了：

```
Exception #3     org.apache.http.conn.HttpHostConnectException: Connection to http://www.blah.blah2.com/ refused. 
    at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:190)
        at org.apache.http.impl.conn.ManagedClientConnectionImpl.open(ManagedClientConnectionImpl.java:294)
        at org.apache.http.impl.client.DefaultRequestDirector.tryConnect(DefaultRequestDirector.java:640)
        at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:479)
        at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:906)
        at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:805)
        at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:784)
        at pullVFMImagesFromVFMURLs.writeImage(pullVFMImagesFromVFMURLs.java:100)
        at pullVFMImagesFromVFMURLs.pullvfmimagesfromvfmurls(pullVFMImagesFromVFMURLs.java:55)
        at pullVFMImagesFromVFMURLs.main(pullVFMImagesFromVFMURLs.java:28)
    Caused by: java.net.ConnectException: Connection timed out: connect
        at java.net.DualStackPlainSocketImpl.connect0(Native Method)
        at java.net.DualStackPlainSocketImpl.socketConnect(Unknown Source)
        at java.net.AbstractPlainSocketImpl.doConnect(Unknown Source)
        at java.net.AbstractPlainSocketImpl.connectToAddress(Unknown Source)
        at java.net.AbstractPlainSocketImpl.connect(Unknown Source)
        at java.net.PlainSocketImpl.connect(Unknown Source)
        at java.net.SocksSocketImpl.connect(Unknown Source)
        at java.net.Socket.connect(Unknown Source)
        at org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:127)
        at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:180)
        ... 9 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T13:12:41.703

**编辑 2**

您的代码在读取循环中有错误。 [InputStream.read](http://docs.oracle.com/javase/6/docs/api/java/io/InputStream.html#read%28%29)不必返回正在接收的整个字节流。（它可能还没有全部可用。）按照您的编码方式，输入流通常会过早关闭。这会导致与您发布的错误（“流已关闭”）不同。

无论如何，在修复循环后，我能够运行您的代码来下载此图像而没有任何问题。

**原来的**

顺便说一句，您的代码有点令人困惑。特别是，您的代码创建一个 URLConnection，但直接从 URL 打开流。[URLConnection](http://docs.oracle.com/javase/6/docs/api/java/net/URLConnection.html)基本上没有使用。这也令人困惑，因为您调用了 setDoOutput，而不是 setDoInput。我会像这样重写你的代码：

```
url = new URL(vfmURLPrefix + vfmURL);
urlc = url.openConnection();
stream = new BufferedInputStream(urlc.getInputStream()); // connect/request will be made. 
```

我怀疑这会解决你目前的问题。为了调试您当前的问题，我建议您在浏览器中请求相同的图像 URL 时使用 Firebug 或 Chrome 的开发者工具来嗅探网络连接/请求/响应。您可能会发现意外的重定向、状态代码、cookie 或类似内容。有了这些额外的知识，您可以尝试将连接强制转换为[HttpURLConnection](http://docs.oracle.com/javase/6/docs/api/java/net/HttpURLConnection.html)，以便您有更多选项可用于自定义请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T12:47:27.877

可能有几个问题： 1\. 您必须登录。 2\. 您必须有一个 Cookie 才能获取图像 3\. URL() 的请求与浏览器请求不匹配。...

尝试使用

```
 Apache HttpComponents 
```

问候

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T13:36:13.807

当您的网络浏览器正常并且您的应用程序出现问题时，请尝试将用户代理添加到 java 请求中，如下所示：

```
request.setHeader("User-Agent","Mozilla/3.0"); 
```

# java - 在 SherlockFragment 中创建一个 onclicklistener

> ID：11777649
> 
> 赞同：0
> 
> 时间：2012-08-02T12:40:27.507
> 
> 标签：java, android, button, onclick, actionbarsherlock

您好，我想在 sherlockfragment 中创建一个单击侦听器，但每次单击它时，它都会显示“未找到 view.class 源”不管我做什么操作我都想用它来启动更改活动的意图

这是我的代码：

```
public class SafanTab extends SherlockFragment {

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

    return inflater.inflate(R.layout.safantab, container, false);

}

public void onOverClick(View view) {
    Intent myIntent = new Intent(view.getContext(), OverSafan.class);
    startActivityForResult(myIntent, 0);
    }

public void nProductenClick(View view) {
    Intent myIntent = new Intent(view.getContext(), Over_Safan.class);
    startActivityForResult(myIntent, 0);
    }

public void onTwitterClick(View view) {
    Intent myIntent = new Intent(view.getContext(), Over_Safan.class);
    startActivityForResult(myIntent, 0);
    }

} 
```

我在布局xml中定义了按钮的监听器：

```
android:onClick="OnOverClick" 
```

我尝试了很长时间，还在互联网上搜索“未找到 View.class 源”，但找不到任何可以解决我的问题的东西。正如您在问题中看到的，我正在使用 ActionBarSherlock。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T13:08:26.217

您不会在片段中获得 onOverClick 回调。在 onActivityCreated() 方法中使用类似以下的内容。

```
 // Handle onclick
    getView().findViewById(R.id.button1).setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View arg0) {
            // do something
        }
     }); 
```

有关更多选项，请参阅此问题：[How to handle button clicks using the XML onClick within Fragments](https://stackoverflow.com/questions/6091194/how-to-handle-button-clicks-using-the-xml-onclick-within-fragments)

**编辑：** 对于 onCreateView 您可以执行以下操作：

```
 public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
     View view = inflater.inflate(R.layout.my_layout, container, false);
     view.findViewById(R.id.button1).setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View arg0) {
            // do something
        }
     });
     return view;
  } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-02T13:07:41.140

不确定这是否是问题，但我看到您的方法的名称定义为：

```
public void onOverClick(View view) 
```

但在您指定的 XML 中：

```
android:onClick="OnOverClick" 
```

字母“O”在 xml 中大写。

# php - PHP Standalone & Wordpress-plugin 版本的并发开发。可能的？

> ID：11777653
> 
> 赞同：0
> 
> 时间：2012-08-02T12:40:45.343
> 
> 标签：php, wordpress

我正在尝试开发一个特定的 PHP 脚本，并希望将它作为独立和 Wordpress 插件发布。如果可能的话，我想从同一个代码库生成独立版本和 WP 插件版本。如果我觉得我很天真，请原谅我:-)

我想知道是否有人曾经尝试过或知道如何做到这一点的任何指南？请投入你的 2 美分。

我在互联网上搜索过，但关于这个主题的信息似乎非常有限。

提前感谢您的洞察力！

# regex - 正则表达式字符跨度

> ID：11777663
> 
> 赞同：2
> 
> 时间：2012-08-02T12:41:25.010
> 
> 标签：regex, r

我正在尝试更多地了解 R 中的正则表达式（通过一些教程工作）并且遇到了一些我无法工作的东西。我正在尝试获取 2 个字符（包括这些字符并替换它们）之间的内容。有人可以帮助我从这些正则表达式中获得所需的行为吗？

```
d <- c("xtfo_oin5h;lx", "6b_arin;7", "xin;7")
gsub("t.+?l", "HERE", b)
gsub("_.+?\\;", "HERE", b)

Desired outcomes for these two statements:
[1] "xHEREx"    "6b_arin;7" "xin;7"
[1] "xtfoHERElx" "6bHERE7"     "xin;7" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T13:01:14.063

似乎这只是换位的一个小问题，在这种情况下，将 a 误认为`b`a `d`。;-)

```
gsub("t.+?l", "HERE", d)
gsub("_.+?\\;", "HERE", d) 
```

按预期工作！

```
> gsub("t.+?l", "HERE", d)
[1] "xHEREx"    "6b_arin;7" "xin;7"    
> gsub("_.+?\\;", "HERE", d)
[1] "xtfoHERElx" "6bHERE7"    "xin;7" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T12:55:06.183

也许

```
gsub("(.*)t.+?l(.*)", "\\1HERE\\2", d)

gsub("(.*)_.+?\\;(.*)", "\\1HERE\\2", d) 
```

但问题有点不清楚

# c# - C# OAuth 提供程序

> ID：11777665
> 
> 赞同：2
> 
> 时间：2012-08-02T12:41:40.553
> 
> 标签：c#, oauth, provider

我正在努力理解[OAuthProvider Library](http://code.google.com/p/devdefined-tools/wiki/OAuthProvider)。我也在努力理解以下[oauth-dot-net](http://code.google.com/p/oauth-dot-net/)

我正在尝试在我的自定义 RESTful Web 服务中实现 OAuth 提供程序。我已经熟悉 OAuth，因为我已经实现了 OAuth 1.0a 客户端（使用了惊人的 RESTsharp 库）。我只是不知道如何使用这个库，老实说这似乎是我能找到的最简单的一个（dotnetopenoauth 是一场噩梦）。

你们有人用这个图书馆做过吗？我正在寻找一个可以从中获得灵感的简单示例。提供的文档太薄了，我在示例中迷失了方向，因为它不是为 Web 服务实现的。

非常感谢你的帮助 ！

* * *

这是我谈论的关于提供程序实现的第一个库的文档：

实施步骤：

-> 需要实现 3 个接口，用于默认提供程序实现所需的 3 个不同的商店。

IConsumerStore - 消费者详细信息的商店。ITokenStore - 请求和访问令牌的存储。INonceStore - nonce 的存储，请求中提供的唯一字符串 - 提供者通过将先前的 nonce 存储在 nonce 存储中来检查以确保不会重播请求。

-> 构造一个 OAuthProvider 实例，提供一组检查器。

-> 将提供程序连接到页面/控制器操作/WCF 操作等。

我从一开始就有这个，但我非常不确定某些方法是关于什么的。我现在正在研究它，一旦完成，我将在这里发布一个详细的实现示例。我不知道这是否可行，但到目前为止它看起来相当简单。

# plone - 想在 Plone 3 中使用 Diazo

> ID：11777667
> 
> 赞同：0
> 
> 时间：2012-08-02T12:41:42.420
> 
> 标签：plone, diazo, plone-3.x

我想就部署 Diazo 以与 Plone 3 一起使用的最佳方法提出建议。我知道 plone.app.theming 对于低于 Plone 4.1 的版本是不可能的，但我们还不能根据需要升级到 Plone 4首先将一些代码移植到 Plone 4.x，但我们希望从 Diazo 的主题基础架构中受益。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T16:19:19.790

[您还可以通过http://docs.diazo.org/en/latest/deployment.html](http://docs.diazo.org/en/latest/deployment.html)中列出的任何非 Plone 部署方法运行 Diazo 。您将失去所有 Plone TTW 集成，但如果您可以手动构建和编译主题，那么您就一切就绪。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T13:47:28.180

plone.app.theming 需要 Plone 4.1。您也许可以使用它的前身collective.xdv。

[collective.xdv 安装文档](http://pypi.python.org/pypi/collective.xdv#installation)

# entity-framework - EF Code First 5.0.rc 迁移不更新身份属性

> ID：11777669
> 
> 赞同：11
> 
> 时间：2012-08-02T12:41:49.133
> 
> 标签：entity-framework, ef-code-first, entity-framework-migrations

比如说，我们使用的是 EF Code First，我们有这个简单的模型：

```
using System;
using System.Collections.Generic;
using System.ComponentModel.DataAnnotations;
using System.Data.Entity;
using System.Linq;
using System.Web;

namespace EFCodeFirstIdentityProblem.Models
{
    public class CAddress
    {
        public int ID { get; set; }

        public string Street { get; set; }
        public string Building { get; set; }

        public virtual CUser User { get; set; }
    }

    public class CUser
    {
        public int ID { get; set; }

        public string Name { get; set; }
        public string Age { get; set; }

        [Required]
        public virtual CAddress Address { get; set; }
    }

    public class MyContext : DbContext
    {
        public DbSet<CAddress> Addresses { get; set; }
        public DbSet<CUser> Users { get; set; }
    }
} 
```

像这样，`CAddress`将是这种 1:0..1 关系的**主要**结束。接下来我们将连接字符串添加到 Web.Config（我使用 MSSQL 2008 R2），制作一个使用该模型的控制器，运行。EF Code First 按预期为我们创建表：

![在此处输入图像描述](../Images/599c2ead87ad897917f5254ac08481d3.png) ![在此处输入图像描述](../Images/44c991d34a59dbcc222f605ed9279e3b.png)

所以，让我们假设我们犯了一个错误，事实上我们想`CUser`成为这个 0..1:1 关系的**主体**。所以我们做出改变：

```
 ...
        [Required]
        public virtual CUser User { get; set; }
        ...

        ...
        public virtual CAddress Address { get; set; }
        ... 
```

构建，然后在包管理器控制台中运行并添加一些迁移：

```
PM> Enable-Migrations
Checking if the context targets an existing database...
Detected database created with a database initializer. Scaffolded migration '201208021053489_InitialCreate' corresponding to existing database. To use an automatic migration instead, delete the Migrations folder and re-run Enable-Migrations specifying the -EnableAutomaticMigrations parameter.
Code First Migrations enabled for project EFCodeFirstIdentityProblem.
PM> Add-Migration ChangeDependency
Scaffolding migration 'ChangeDependency'.
The Designer Code for this migration file includes a snapshot of your current Code First model. This snapshot is used to calculate the changes to your model when you scaffold the next migration. If you make additional changes to your model that you want to include in this migration, then you can re-scaffold it by running 'Add-Migration 201208021157341_ChangeDependency' again.
PM> 
```

以下是我们为“ChangeDependency”迁移提供的内容：

```
namespace EFCodeFirstIdentityProblem.Migrations
{
    using System;
    using System.Data.Entity.Migrations;

    public partial class ChangeDependency : DbMigration
    {
        public override void Up()
        {
            DropForeignKey("dbo.CUsers", "ID", "dbo.CAddresses");
            DropIndex("dbo.CUsers", new[] { "ID" });
            AlterColumn("dbo.CAddresses", "ID", c => c.Int(nullable: false));
            AlterColumn("dbo.CUsers", "ID", c => c.Int(nullable: false, identity: true)); //identity: true - this is important
            AddForeignKey("dbo.CAddresses", "ID", "dbo.CUsers", "ID");
            CreateIndex("dbo.CAddresses", "ID");
        }

        public override void Down()
        {
            DropIndex("dbo.CAddresses", new[] { "ID" });
            DropForeignKey("dbo.CAddresses", "ID", "dbo.CUsers");
            AlterColumn("dbo.CUsers", "ID", c => c.Int(nullable: false));
            AlterColumn("dbo.CAddresses", "ID", c => c.Int(nullable: false, identity: true));
            CreateIndex("dbo.CUsers", "ID");
            AddForeignKey("dbo.CUsers", "ID", "dbo.CAddresses", "ID");
        }
    }
} 
```

重要的部分是：

AlterColumn("dbo.CUsers", "ID", c => c.Int(nullable: false, **identity: true** ));

所以 CUsers.ID 现在必须成为 DB 中的 Identity。让我们将此更改提交给 DB：

```
PM> 
PM> Update-Database -Verbose
Using StartUp project 'EFCodeFirstIdentityProblem'.
Using NuGet project 'EFCodeFirstIdentityProblem'.
Specify the '-Verbose' flag to view the SQL statements being applied to the target database.
Target database is: 'EFTest' (DataSource: (local), Provider: System.Data.SqlClient, Origin: Configuration).
Applying code-based migrations: [201208021157341_ChangeDependency].
Applying code-based migration: 201208021157341_ChangeDependency.
ALTER TABLE [dbo].[CUsers] DROP CONSTRAINT [FK_dbo.CUsers_dbo.CAddresses_ID]
DROP INDEX [IX_ID] ON [dbo].[CUsers]
ALTER TABLE [dbo].[CAddresses] ALTER COLUMN [ID] [int] NOT NULL
ALTER TABLE [dbo].[CUsers] ALTER COLUMN [ID] [int] NOT NULL
ALTER TABLE [dbo].[CAddresses] ADD CONSTRAINT [FK_dbo.CAddresses_dbo.CUsers_ID] FOREIGN KEY ([ID]) REFERENCES [dbo].[CUsers] ([ID])
CREATE INDEX [IX_ID] ON [dbo].[CAddresses]([ID])
[Inserting migration history record]
Running Seed method.
PM> 
```

CUsers.ID 的迁移成为 DB 中的标识列没有给出 SQL 指令。所以，正因为如此，有一个问题：

（更新的数据库） ![在此处输入图像描述](../Images/74c71f9aa9f9179e1c5bcf94885a199d.png) ![在此处输入图像描述](../Images/765a7c35d51ea1e85f0908a815c463de.png)

因此，用户现在是主体端，并且必须具有 ID 身份：“是”标志，但身份仍然是“否”。并且地址是依赖端，必须有ID身份“NO”，但仍然是“YES”。所以我不能将新用户添加到用户表，因为没有为新实例生成新 ID。

如果我删除整个数据库，EF Code First 会正确地从头开始创建新表，所以这只是迁移的问题。

在这种情况下我该怎么办？这是 EF 迁移错误吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-02T12:58:33.623

我不确定这是否是一个错误，因为还有另一个问题 - 您[无法将现有列更改为 identity 或删除 identity](http://blog.sqlauthority.com/2009/05/03/sql-server-add-or-remove-identity-property-on-column/)。我可以想象这被认为是完全手动迁移，以明确您必须移动数据。

# php - generate alphanumeric id from auto_increment primary key

> ID：11777670
> 
> 赞同：2
> 
> 时间：2012-08-02T12:41:49.940
> 
> 标签：php, mysql

in my table, i insert new records of user(new users). I have a int set as field primary key. What i want is to make this id secure. Because this id public to everyone. Any user or people can see this id.

If id i generate is like this:

```
0000000001
...
0000000023
...
0000000157
... 
```

it is easy for another person to guess it because ids are in a order which is incremented by 1\. Instead, i want to store a "public" id in a separate field which is a aplhanumeric representation of this auto_increment primary id.

So in database, table will be like this:

```
id------------------public_id
---------------------------------
0000000001 -------- W3UB3VNAU3222
0000000002 -------- 7BNXYO28CN2KK 
```

I thought about using hash. But hash is a fixed length of 40 or above. But i want the public id to be fixed 10 characters in length. Should be unique and if possible, I prefer generating it from `id`

plz tell how to create this ? any builtin functions that helps me to do this?

* * *

I read about `hash()` [function](http://php.net/manual/en/function.hash.php) with `crc32`:[http://www.php.net/manual/en/function.hash.php#104987](http://www.php.net/manual/en/function.hash.php#104987) It will give 8 char length hash. Will it conflict in future ?

Test:

```
echo hash('crc32', '0000000001'); // gives 6c13f76e 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T12:46:30.680

The following code example generates an 10 characters long random string that contains 1 digit:

```
<?php
  function random_string( )
  {
    $character_set_array = array( );
    $character_set_array[ ] = array( 'count' => 10, 'characters' => 'abcdefghijklmnopqrstuvwxyz' );
    $character_set_array[ ] = array( 'count' => 1, 'characters' => '0123456789' ); //you can change count
    $temp_array = array( );
    foreach ( $character_set_array as $character_set )
    {
      for ( $i = 0; $i < $character_set[ 'count' ]; $i++ )
      {
        $temp_array[ ] = $character_set[ 'characters' ][ rand( 0, strlen( $character_set[ 'characters' ] ) - 1 ) ];
      }
    }
    shuffle( $temp_array );
    return implode( '', $temp_array );
  }
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T12:47:42.203

try this

[MySql auto-incrementing Alpha-numeric primary key?](https://stackoverflow.com/questions/6444355/mysql-auto-incrementing-alpha-numeric-primary-key)

```
CREATE TABLE myItems (
    id INT NOT NULL AUTO_INCREMENT,
    prefix CHAR(30) NOT NULL,
    PRIMARY KEY (id, prefix), 
```

Or

[composite (alphanumeric) primary key and auto increment](https://stackoverflow.com/questions/6526008/composite-alphanumeric-primary-key-and-auto-increment)

```
public function random_id_gen($length)
    {
        //the characters you want in your id
        $characters = '23456789ABCDEFGHJKLMNPQRSTUVWXYZ';
        $max = strlen($characters) - 1;
        $string = '';

        for ($i = 0; $i < $length; $i++) {
            $string .= $characters[mt_rand(0, $max)];
        }

        return $string;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T12:49:59.917

You can try to shuffle characters and XOR from original id.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T12:52:59.477

Generate a hash and take the first 10 letters.

Check if such an ID is already in your database. If it is not you can take it as your ID, otherwise generate and new hash and try again.

If you want to represent your true ID you could chose a seperator letter and map your ID to letters.

Example:

```
ID:          ...0000021
PUBLIC_ID :  ...Hd3dXBA 
```

X is the separator to separate your mapped ID from the randomly generated part.

2 is mapped to B

1 is mapped to A

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T12:56:17.197

There is no built-in functions that would do that for you, so I'm afraid you'll have to build one yourself. If you're not restricted by the 10 character requirement, have a look at [UUID](http://en.wikipedia.org/wiki/Universally_unique_identifier). This post: [PHP function to generate v4 UUID](https://stackoverflow.com/questions/2040240/php-function-to-generate-v4-uuid) will explain how to create a PHP function that will generate a UUID in PHP.

Otherwise try a function along those lines, although you will have to check if the id is unique every time you generate it.

```
function generateID()
{
    $capital_letters = range("A", "Z");
    $lowcase_letters = range("a", "z");
    $numbers         = range(0, 9);

    $all = array_merge($capital_letters, $lowcase_letters, $numbers);
    $count = count($all);    
    $id    = "";

    for($i = 0; $i < 10; $i++)
    {
        $key = rand(0, $count);
        $id .= $all[$key];
    }

    if(!uniqueId($id))
    {
        return generateID();
    }
    return $id;
} 
```

# html - git 和 html 文件

> ID：11777673
> 
> 赞同：0
> 
> 时间：2012-08-02T12:42:06.603
> 
> 标签：html, git

我想在我的 git 存储库中保留两个版本的**静态html 文件。**两者基本相同，除了脚本、媒体等的链接（开发版与实时版）。

现在我将开发版本保存在 repo 中，并在实时机器上手动覆盖实时版本值（=我在那里有本地 git 更改）。我对这个设置不满意，因为每次推/拉都有人工劳动。

管理无法拆分为 config/rest 部分（如 HTML）的文件的最佳流程是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T12:46:14.377

你可以...

*   从您的存储库中删除该文件，然后手动填充它。如果它不经常改变，这很好用。
*   从存储库中删除文件，并通过合并后脚本从模板生成它`.git/hooks/post-merge`（此挂钩运行，例如，之后`git pull`）。
*   `static.master.html`以分支或主机名或其他一些变量（例如vs.`static.develop.html`等）命名文件，并动态确定在运行时使用哪一个。

这些是一些想法。我想其他人会提供额外的建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T13:45:06.253

重命名之外的另一个问题是保持两个文件的内容同步。因此，出于同样的原因，仅在一个次要路径上有所不同的专用文件是很多冗余的，如果您更改一个，您还必须考虑更新另一个。

好的，你说 HTML 文件是静态的，但是这里一行 PHP 生成差异将解决我们的问题 Achim

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T14:51:31.327

由[larsks](https://stackoverflow.com/users/147356/larsks)扩展第二个要点：

您可以在 repo 中保留两份副本（假设它是您的主页）index.dev.html 和 index.prod.html。在远程，您的合并后脚本可以执行以下操作：

```
cp -a index.prod.html index.html 
```

或者

```
truncate -s 0 index.html
cat index.prod.html >> index.html 
```

# qt - deb 存档中的 Qt Harmattan N9 Aegis 清单文件

> ID：11777675
> 
> 赞同：1
> 
> 时间：2012-08-02T12:42:25.700
> 
> 标签：qt, deb, meego, meego-harmattan, aegis

我按照以下方式制作了一个宙斯盾清单文件，但它似乎不起作用。当我尝试读/写时，我的应用程序仍然抱怨对跟踪器的非特权访问。我在这里做错了什么？

deb文件内容如下

```
_aegis  control.tar.gz  data.tar.gz  debian-binary 
```

**_aegis**文件内容如下。

```
<aegis>
    <request policy="add">
        <credential name="TrackerReadAccess" />
        <for path="/opt/MyApp/bin/MyApp" />
   </request>
   <request policy="add">
       <credential name="TrackerWriteAccess" />
       <for path="/opt/MyApp/bin/MyApp" />
  </request>
  <request policy="add">
        <credential name="GRP::metadata-users" />
        <for path="/opt/MyApp/bin/MyApp" />
  </request>
</aegis> 
```

然后在**控制文件的****control.tar.gz**里面我有定义

 **```
Aegis-Manifest: included 
```

那么这里出了什么问题呢？**

# android - 如何获取我的 Android 设备的动态 IP 地址

> ID：11777676
> 
> 赞同：0
> 
> 时间：2012-08-02T12:42:25.047
> 
> 标签：android, dynamic, ip-address

我在 android manifest 文件中授予访问 Internet 的权限，如下所示。 `<uses-permission android:name="android.permission.INTERNET" />`

以下代码将以简单的应用程序编写。

```
package com.GetIP;

import java.net.InetAddress;
import android.app.Activity;

import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.Toast;

public class IPAddress extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Button b=(Button)findViewById(R.id.btn1);

    b.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {

            // TODO Auto-generated method stub
             try
                {
                    InetAddress ownIP=InetAddress.getLocalHost();
                    //System.out.println("IP of my Android := "+ownIP.getHostAddress());

                    Toast.makeText(getApplicationContext(), ownIP.toString(), Toast.LENGTH_LONG).show();
                }
                catch (Exception e)
                {
                    System.out.println("Exception caught ="+e.getMessage());
                    }
        }
    });
} 
```

}

上面的代码输出为 localhost/127.0.0.1 但它是默认 IP 地址，但我希望我的设备的动态 IP 地址用于聊天应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T13:01:45.797

这段代码将为您提供您的本地 IP 地址：

```
public static String getLocalIpAddressString() {
    try {
        for (Enumeration<NetworkInterface> en = NetworkInterface.getNetworkInterfaces(); en.hasMoreElements();) {
            NetworkInterface intf = en.nextElement();
            for (Enumeration<InetAddress> enumIpAddr = intf.getInetAddresses(); enumIpAddr.hasMoreElements();) {
                InetAddress inetAddress = enumIpAddr.nextElement();
                if (!inetAddress.isLoopbackAddress()) {
                    return inetAddress.getHostAddress().toString();
                }
            }   
        }
    }catch (SocketException ex) {
    }

    return null;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T13:00:19.650

您可以使用以下代码获取附加到设备的 IP 地址列表。

```
public static List<String> getLocalIpAddress() {
    List<String> list = new ArrayList<String>();
    try {
        for (Enumeration<NetworkInterface> en = NetworkInterface.getNetworkInterfaces(); en.hasMoreElements();) {
            NetworkInterface intf = en.nextElement();
            for (Enumeration<InetAddress> enumIpAddr = intf.getInetAddresses(); enumIpAddr.hasMoreElements();) {
                InetAddress inetAddress = enumIpAddr.nextElement();
                if (!inetAddress.isLoopbackAddress()) {
                    list.add(inetAddress.getHostAddress().toString());
                }
            }
        }
    } catch (SocketException ex) {
        Log.e(TAG, ex.toString());
    }
    return list;
} 
```

# wso2 - WSO2 API Manager - 这个包中是否包含 ESB 和 Carbon 框架的其余部分？

> ID：11777678
> 
> 赞同：0
> 
> 时间：2012-08-02T12:42:34.403
> 
> 标签：wso2, wso2esb, wso2carbon, wso2-am

我正在尝试使用演示 API 管理和 ESB 功能的 WSO2 中间件构建 POC。我需要下载 WSO2 Carbon 和 WSO2 API Manager 吗？或者 WSO2 API Manager 是否包含 ESB 和 Carbon 框架的其余部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T10:24:01.047

API 管理器基于 Carbon，并包含提供广告功能所需的特性。换句话说，开箱即用，您可以获得 API 管理、API 网关、API 商店和发布者应用程序。如果您需要 API 网关功能提供之外的完整 ESB 功能，您可以单独下载 ESB。伊莎贝尔。

# php - AJAX 即时搜索的修改

> ID：11777679
> 
> 赞同：0
> 
> 时间：2012-08-02T12:42:44.340
> 
> 标签：php, javascript, mysql, html, ajax

[我已经使用本](http://www.w3schools.com/php/php_ajax_livesearch.asp)教程使用 AJAX 构建了一个即时搜索，我得到了即时结果，但问题是结果所在的 div 在那里保持打开状态。

我想在获得即时结果后对其进行修改，然后

1.  单击页面上的任何位置时，结果（div）应该消失。
2.  并且当鼠标再次悬停在输入字段上时，结果（div）应该重新出现。

AJAX 代码

```
 <script type="text/javascript">
function showResult(str)
{
if (str.length==0)
  {
  document.getElementById("search-result").innerHTML="";
  document.getElementById("search-result").style.border="0px";
  return;
  }
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("search-result").innerHTML=xmlhttp.responseText;
    document.getElementById("search-result").style.border="1px solid #A5ACB2";
    }
  }
xmlhttp.open("GET","instant-search.php?keyword="+str,true);
xmlhttp.send();
}
</script> 
```

HTML 代码

```
 <div id="search">
<form action="" method="get" id="search-form" >

<input name="" type="" size="" id="search-input" onkeydown="showResult(this.value)"/>

<select name="" id="search-select">
<option value="all" >All</option>
<input type="hidden" name="" value="" />
</select>

<input type="submit" value="Search" id="search-btn" /> 

</form>      
</div>
<div id="search-result"></div> 
```

PHP 代码是简单的 MySQL 全文搜索查询。

我试着添加这个但没有任何反应

```
 <input name="keyword" type="text" size="50" id="search-input" onkeydown="showResult(this.value)" onclick="(this.value==this.defaultValue) this.value='';"  onmouseout="showResult(this.value='';)"/> 
```

请提出任何这样做的方法。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T13:34:32.827

恶心的方式

```
<body>
<div id="main" onclick="fx(0)">

<div id="search">
<form action="" method="get" id="search-form" >
<input name="" type="" size="" id="search-input" onkeydown="showResult(this.value)"/>
<select name="" id="search-select">
<option value="all" >All</option>
<input type="hidden" name="" value="" />
</select>
<input type="submit" value="Search" id="search-btn" /> 
</form>      
</div>
<div id="search-result" onclick="fx(1)"></div>

</div>
</body>

<script>
function fx(var flag)
{
  // document.getElementById(theIdYouWantToShowHide).style.display="none" or inline or block ...
}
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T14:42:21.423

终于明白了，希望这对其他人也有帮助。

```
 <script type="text/javascript">
function showResult(str)
{
if (str.length==0)
  {
  document.getElementById("search-result").innerHTML="";
  document.getElementById("search-result").style.border="0px";
  return;
  }
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("search-result").innerHTML=xmlhttp.responseText;
    document.getElementById("search-result").style.border="1px solid #A5ACB2";
    document.getElementById("search-result").style.display="block";
    document.getElementById("search-input").onmouseover = function(){show_box()};
    }
  }
xmlhttp.open("GET","instant-search.php?keyword="+str,true);
xmlhttp.send();
}

function close_box(){
document.getElementById("search-result").style.display="none";
}
 function show_box(){
    document.getElementById("search-result").style.display="block";
}

document.onclick = function(){close_box()};

</script> 
```

# javascript - 在动态表中获取输入

> ID：11777681
> 
> 赞同：0
> 
> 时间：2012-08-02T12:42:47.447
> 
> 标签：javascript, jquery, repeater

我有这个动态表：

```
<table id="monthProd" class="tableList">
            <tr>
                <td id="Th1" width="65px">
                </td>
                <asp:Repeater ID="rptTech" runat="server">
                    <ItemTemplate>
                        <th>
                            <asp:Label ID="techTitle" runat="server" Text='<%# Eval("sName") %>' techID='<%# Eval("iCodigo") %>'></asp:Label>
                        </th>
                    </ItemTemplate>
                </asp:Repeater>
                <th>
                    <asp:Label ID="capacidadeTitle" runat="server" Text="<%$ Resources:WebResources, Planning_DailyPlan_Total %>"></asp:Label>
                </th>
            </tr>
            <asp:Repeater ID="rptClient" runat="server" OnItemDataBound="rptClient_ItemDataBound">
                <ItemTemplate>
                    <tr>
                        <th>
                            <asp:Label ID="clientTitle" runat="server" Text='<%# Eval("sName") %>' customerID='<%# Eval("sCNPJ") %>'></asp:Label>
                        </th>
                        <asp:Repeater ID="rptValuesGerais" runat="server">
                            <ItemTemplate>
                                <td align="left">
                                    <asp:TextBox ID="txtValue" runat="server" Text="0" onchange="changeTotal();"></asp:TextBox>
                                </td>
                            </ItemTemplate>
                        </asp:Repeater>
                        <td>
                            <asp:Label ID="lblValueTotal1" runat="server" Text="0"></asp:Label>
                        </td>
                    </tr>
                </ItemTemplate>
            </asp:Repeater>
            <tr>
                <th>
                    <asp:Label ID="lblTotal" runat="server" Text="<%$ Resources:WebResources, Planning_DailyPlan_Total %>"></asp:Label>
                </th>
                <asp:Repeater ID="rptValuesFooter" runat="server">
                    <ItemTemplate>
                        <td>
                            <asp:Label ID="lblValueTotal2" runat="server" Text="0"></asp:Label>
                        </td>
                    </ItemTemplate>
                </asp:Repeater>
                <td>
                    <asp:Label ID="lblEndLine" runat="server" Text=""></asp:Label>
                </td>
            </tr>
        </table> 
```

现在当我用onchange事件改变一个值时，我需要将该行的所有值添加到该行的最后一个“lblValueTotal1”...我需要一个脚本来执行此操作，但我对javascript不太了解，所有尝试过的东西都不能给我 td 的确切值 =/

你可以在这里看到它： ![截屏](../Images/185430fe9bc1f5e92b7c17be4203b580.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T12:55:24.177

嗯，我不熟悉 asp 标签，但如果它有一个数值，你可以像这样使用 jQuery ID 选择器和 val() 方法：

$("#lblValueTotal1").val() = 9000;

如果它没有正确的数据类型，则可能包含它，您可以为其创建一个 ID。让我知道这是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T13:08:53.410

好吧，你必须做这样的事情......

```
function myfunction
{
 var value_one = document.getElementbyId('firstvalue').value;
 var value_two = document.getElementbyId('secvalue').value;
 var value_third = document.getElementbyId('thirdvalue').value;
 var total = value_one + value_two + value_third;
 document.getElementById.value = total;
} 
```

在 onchange 事件中

# perl - Perl 诅咒::UI - 循环

> ID：11777689
> 
> 赞同：2
> 
> 时间：2012-08-02T12:43:25.533
> 
> 标签：perl, loops, curses

我是 Perl 和 Curses 的新手，但我正在努力让我的代码运行一个循环，首先是我的代码：

```
#!/usr/bin/env perl

use strict;
use Curses::UI;

sub myProg {
    my $cui = new Curses::UI( -color_support => 1 );

    my $win = $cui->add(
        "win", "Window", 
        -border => 1, 
    );

    my $label = $win->add(
        'label', 'Label', 
        -width         => -1, 
        -paddingspaces => 1,
        -text          => 'Time:', 
    );
    $cui->set_binding( sub { exit(0); } , "\cC");

    # I want this to loop every second 
    $label->text("Random: " . int(rand(10)));
    sleep(1);

    $cui->mainloop();

}

myProg(); 
```

如您所见，我希望本节以递归方式运行：

```
 # I want this to loop every second 
    $label->text("Random: " . int(rand(10)));
    sleep(1); 
```

在标签中放置一个随机数的想法只是为了表明它有效，我最终会有相当多的标签会定期更改，并且还想做其他功能。

我试过做：

```
while (1) {
    ...
} 
```

但是如果我在 mainloop() 之前这样做；调用窗口永远不会创建，调用后它什么也不做？

希望这有意义吗？那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T13:08:11.000

一旦您启动主循环，Curses 就会接管程序的执行流程，并且仅通过您之前设置的回调将控制权返回给您。在此范例中，您不会使用`sleep()`循环执行与时间相关的任务，而是要求系统定期给您回电以进行更新。

`Curses::UI`通过（未记录的）计时器重组你的程序来做到这一点：

```
#!/usr/bin/env perl

use strict;
use Curses::UI;

local $main::label;

sub displayTime {
    my ($second, $minute, $hour, $dayOfMonth, $month, $yearOffset, $dayOfWeek, $dayOfYear, $daylightSavings) = localtime();
    $main::label->text("Time: $hour:$minute:$second");
}

sub myProg {
    my $cui = new Curses::UI( -color_support => 1 );

    my $win = $cui->add(
        "win", "Window",
        -border => 1,
    );

    $main::label = $win->add(
        'label', 'Label',
        -width         => -1,
        -paddingspaces => 1,
        -text          => 'Time:',
    );
    $cui->set_binding( sub { exit(0); } , "\cC");
    $cui->set_timer('update_time', \&displayTime);

    $cui->mainloop();

}

myProg(); 
```

如果您需要更改超时时间，`set_timer`也可以接受时间作为附加参数。相关函数`enable_timer`, `disable_timer`, `delete_timer`.

资料来源：[http ://cpan.uwinnipeg.ca/htdocs/Curses-UI/Curses/UI.pm.html#set_timer-](http://cpan.uwinnipeg.ca/htdocs/Curses-UI/Curses/UI.pm.html#set_timer-)

# selenium - Which is the best and fastest way to find the element using webdriver? By.XPath or By.ID or anything else? And why?

> ID：11777694
> 
> 赞同：17
> 
> 时间：2012-08-02T12:43:58.177
> 
> 标签：selenium, webdriver

Which is the best and fastest way to find the element using webdriver? By.XPath or By.ID or anything else? And why?

I have read at many places that XPath is the right candidate but just could not find the accurate reason for that.

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-08-02T13:39:30.630

Finding elements by ID is usually going to be the fastest option, because at its root, it eventually calls down to `document.getElementById()`, which is optimized by many browsers.

Finding elements by XPath is useful for finding elements using very complex selectors, and is the most flexible selection strategy, but it has the potential to be very slow, particularly in IE. In IE 6, 7, or 8, finding by XPath can be an order of magnitude slower than doing the same in Firefox. IE provides no native XPath-over-HTML solution, so the project must use a JavaScript XPath implementation, and the JavaScript engine in legacy versions of IE really is that much slower.

If you have a need to find an element using a complex selector, I usually recommend using CSS Selectors, if possible. It's not quite as flexible as XPath, but will cover many of the same cases, without exhibiting the extreme performance penalty on IE that XPath can.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-04T10:48:17.643

Obviously `By.id()` is faster as compared to `By.xpath()` as `By.id()` is fast accessible. But, in `By.xpath()`, it will take time for traversing.

Conclusion: `By.id()` is faster as compared to `By.xpath()`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-07-22T13:12:56.923

The faster way is obvious by using By.id(), but you also have alternative using By.name() also, it also has same speed as of like By.id(). And cssSelector also uses the id, name so its equivalent to same as searching By.id() and By.name() . The main reason for using xpath is that, each web element has the unique path assigned to it, So when the same id, name and classname are shared by two elements, then xpath is the option, as a unique solution.

# shell - why the getopt doesn't work well in my mac os?

> ID：11777695
> 
> 赞同：3
> 
> 时间：2012-08-02T12:43:58.867
> 
> 标签：shell, getopt

In bash: I input the command：</p>

```
getopt -l name,data -- --namd 
```

and the output is

```
-- name,pp -- --namd 
```

input :

```
getopt -l name,data -- --name 
```

the output alse

```
-- name,pp -- --name 
```

why it dosen't tell me the err when i input `getopt -l name,data -- --namd`?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-02T13:02:31.023

The problem is that on the mac, getopt is the BSD based getopt, rather than the gnu-based getopt.

It doesn't understand long options. It's not that it 'doesn't work well', it's that it's not designed to do what you asked.

# git - git read-tree 到项目根目录

> ID：11777696
> 
> 赞同：5
> 
> 时间：2012-08-02T12:44:00.707
> 
> 标签：git, merge

我的 main_repo 有这样的文件夹结构

application_root

*   应用程序
*   *   代码
*   *   *   富
*   *   *   *   文件 1
*   *   *   *   文件2
*   *   *   酒吧
*   皮肤
*   库
*   文件 1
*   文件2

这是主要的应用程序。我还有另一个 repo，其中包含我的主应用程序的扩展。问题是扩展目录布局与主项目的根目录重叠，例如

extension_root

*   应用程序
*   *   代码
*   *   *   巴兹
*   *   *   *   文件 1
*   *   *   *   文件2
*   皮肤
*   *   文件 1
*   *   文件2
*   文件 3
*   文件4

所以我不能使用子模块工具。我需要合并这两个存储库以进行进一步的开发。我需要能够从 extension_repo 合并到 main_repo 并返回，所以如果我对合并到 main_repo 的扩展进行更改，我只能将这些更改（没有应用程序本身）合并到 extension_repo。我不知道这是否可能。似乎读取树合并可以满足我的要求，但我不能以这种方式使用它

```
git read-tree --prefix=/ -u extension_remote_branch 
```

因为我收到了这个错误

```
error: Entry '.gitignore' overlaps with '.gitignore'.  Cannot bind. 
```

我想我重叠的所有目录都会出现这个错误。除了.gitignore，我实际上没有重叠的文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-09-23T14:26:21.330

到目前为止，我还没有找到通过 git 在单个命令中执行此操作的方法；所以我使用了一个相当简单的解决方法。基本方法是`read-tree`进入第二个空目录。然后将第二个目录移到第一个目录之上。

基本流程是：

```
mkdir upstream-tree
git read-tree --prefix=upstream-tree/ -u myremote/branch
git commit -m "Pulled in remote tree"
cp -rf upstream-tree/* local-tree/
git rm -r upstream-tree
git add local-tree
git commit -m "Merged upstream-tree into local-tree" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T00:08:15.920

让我猜猜。你是magento开发者？

现在我找到了一个解决方案：

*   克隆你的扩展仓库
*   添加干净框架的远程（在我的例子中是magento），
*   `git merge -s ours --no-commit ...`
*   从框架 repo 中读取树并重置索引

现在所有更改都将保存到扩展程序的存储库中。没有框架的文件。不幸的是，这种方法只适用于一个扩展。但我看到了一种有趣的方式，即为`.git`每个扩展名重命名文件夹。我还没有尝试过。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-27T19:02:35.473

检查您的索引 - 如果您一直在“尝试”`git read-tree`但在语法正确之前对其进行了一些尝试，那么您的索引中可能会有一堆没有显示的更改导致冲突。

我今天遇到了这个确切的场景，试图将`read-tree`一个现有项目放入一个空的（新的）git repo 的根目录中——在我和我的分支`git read-tree --prexfix=/ -u BRANCH`之后完美地工作。`reset``clean``master`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-25T18:22:08.240

作为解决方法，您可以`read-tree`进入不同的文件夹，然后将其移回，例如：

```
git remote add foo git@example.com/foo.git
git fetch foo
git reset
git read-tree --prefix=new/ -u foo/master:/
git mv new/* .
rsync -vuar --delete-after new/ .
rm -fr new 
```

# iphone - UIScrollView 或自定义绘图

> ID：11777709
> 
> 赞同：0
> 
> 时间：2012-08-02T12:44:47.900
> 
> 标签：iphone, ios, performance, uiscrollview

我在当前项目中面临以下问题：我想实现以下内容：

![在此处输入图像描述](../Images/b5d89aa6106a8e12fd47fecd3d6a96e1.png)

来源：[https ://github.com/NOUSguide/NGVaryingGridView](https://github.com/NOUSguide/NGVaryingGridView)

由于我必须在一周内为可能 40 个或更多站绘制 EPG，我的问题是：我应该用许多子视图（代表节目）填充 UIScrollView 还是如果我绘制一个大 UIView 使用会更好Quartz2D 然后将其添加为 UIScrollView 的单个子视图？

希望你能关注我，提前谢谢，

基督教

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T12:53:32.617

我不确定我是否理解，但是您可以创建一个 ViewQueue ，其中子视图可以被重用，例如**UITableView**：

每次您需要**UIView**时，您都要求 Queue( **NSMutableArray** ) 获取现有视图。如果 Queue 为空，则创建一个新的 UIView，如果它已经包含视图，则（重新）使用存储在 Queue 中的现有 UIView。

只有当 UIView 应该可见时才将其添加到屏幕（从队列中检索的**UIView**），如果它不再可见，则将其从其超级视图中删除并将其添加到队列中。

然后，您可以使用**UIScrollView**来显示子视图。如果您滚动，您可以设置 UIScrollView 大小以使其越来越小。

希望能帮助到你！

# asp.net-mvc - 尝试使用 context.entity.include() 时出错

> ID：11777711
> 
> 赞同：1
> 
> 时间：2012-08-02T12:45:09.283
> 
> 标签：asp.net-mvc, vb.net, asp.net-mvc-3, entity-framework

我正在尝试过滤记录并将它们返回以将它们放入列表中。我的变量“companyId”等于 1。运行时出现错误。我能做些什么来解决？谢谢你。

错误指向这一行：

```
Dim blogs = db.Blogs.Include(Function(b) b.CompanyId = companyId) 
```

错误：

包含路径表达式必须引用在类型上定义的导航属性。对引用导航属性使用虚线路径，对集合导航属性使用 Select 运算符。参数名称：路径

整个代码：

```
 '
    ' GET: /ViewBlogs/

    Function ViewBlogs() As ViewResult
        'Dim blogs = db.Blogs.Include(Function(b) b.Company)

        Dim db1 As UserProfileDbContext = New UserProfileDbContext
        Dim user = Membership.GetUser()
        Dim key As Guid = user.ProviderUserKey
        Dim userProfile = db1.UserProfiles.Where(Function(p) p.UserId = key).Single
        Dim companyId = userProfile.CompanyId

        If (userProfile.IsCompanyOwner) Then

            Dim blogs = db.Blogs.Include(Function(b) b.CompanyId = companyId)

            Return View(blogs.ToList())

        Else

            Return View("Home")

        End If

    End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T13:04:35.640

是的，对我来说解决方案很简单：

```
Dim blogs = db.Blogs.Where(Function(b) b.CompanyId = companyId) 
```

# iphone - 如何使用从 iPhone 应用程序的主视图传递的搜索字符串在子视图上调用谷歌搜索

> ID：11777713
> 
> 赞同：2
> 
> 时间：2012-08-02T12:45:12.017
> 
> 标签：iphone, objective-c, ios, xcode4

我的应用程序有两个视图，我想使用从应用程序主视图传递的搜索字符串（它是产品名称。例如“三星移动”）在第二个视图上调用谷歌搜索。

我不想在 Google 搜索字段中手动输入产品名称。当我按下主视图上的按钮时，它应该会自动完成，结果页面应该显示在子视图上。

```
-(void) setLabelText:(NSString *) myNewText
{
    [productName setText:myNewText];

    NSURL *theURL =[NSURL URLWithString:@"http://www.google.com"];
    NSURLRequest *theRequest = [NSURLRequest requestWithURL:theURL];

    [webSearchView loadRequest:theRequest];
} 
```

只是想知道是否可以使用上述函数将搜索字符串作为参数传递。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T12:47:08.393

试试这个：

```
NSString *urlString = [NSString stringWithFormat:@"http://google.com?q=%@", searchString];
NSURL *theURL =[NSURL URLWithString:urlString]; 
```

`urlString`如果它包含空格、特殊字符等，在传递给 NSURL 之前不要忘记转义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-21T01:36:25.200

根据 H2CO3 的回答，但我认为 Google 搜索 URL 可能已更改。我也更喜欢 https 而不是 http：

```
NSString *urlString = [NSString stringWithFormat:@"https://google.com/search?q=%@", searchString];
NSURL *theURL =[NSURL URLWithString:urlString]; 
```

# graphite - 将数据从神经节发送到石墨

> ID：11777714
> 
> 赞同：6
> 
> 时间：2012-08-02T12:45:11.967
> 
> 标签：graphite, ganglia

我目前正在使用 Ganglia 收集监控指标，我想使用 Graphite 显示包含该数据的图表。我知道这样的集成是可能的，并且我找到了[一篇](http://blog.vuksan.com/monitoring/2010/09/29/integrating-graphite-with-ganglia/)描述应该如何完成的文章。我不太确定这种集成是如何工作的，尤其是当我想直接将它发送到石墨而不解析 gmetad 的数据时。任何关于如何将 Ganglia 与 Graphite 集成的帮助都会很棒。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-27T13:35:22.127

有两种方法可以将神经节与石墨相结合。

1.  使用第三方进程从 gmetad/gmond 获取指标，调整指标数据格式，最后将指标数据发送到碳服务器。
2.  使用 gmetad 的“石墨集成”功能，您只需配置碳服务器地址、端口、协议（使用可选的石墨路径语法），然后 gmetad 将完成剩下的所有事情。可以从您的 /etc/ganglia/gmetad.conf 中找到更多详细信息

我会推荐＃2，因为它非常简单。你只需要将你的 ganglia 包升级到 3.3+ 版本。

在上述解决方案中，您可以将指标数据存储在 RRD 和 Whisper 中。如果您不想要这种方法，它还支持在 ganglia-web 中使用石墨更改 rrdtool 图。请参阅“[使用石墨作为图形引擎](http://sourceforge.net/apps/trac/ganglia/wiki/ganglia-web-2#UsingGraphiteasthegraphingengine)”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T11:23:17.400

你检查过 ganglia-web wiki 吗？有一节[Graphite Integration](https://github.com/ganglia/ganglia-web/wiki#Graphite_Integration)和另一个名为[Using Graphite as the graphing engine](https://github.com/ganglia/gangliaweb/wiki#Using_Graphite_as_the_graphing_engine)的部分很好地解释了如何做你想做的事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T20:11:18.670

我与 Ganglia 合作过很多，我研究过的 Graphite 也有类似的工作。我从未能够掌握 Whisper，但我发现 RRD（循环数据库）非常可靠。不确定您对监视什么感兴趣，但我肯定会查看 JMXtrans。您可以从 Google 获取代码。它提供了多种方法来从您正在监视的任何 JVM 中提取指标数据，并允许您定义要通过管道传输到 Ganglia/Graphite 的指标以及其他一些选项。

# batch-file - 批处理文件检查两个大于 1KB 的文件大小，如果未运行命令

> ID：11777715
> 
> 赞同：-1
> 
> 时间：2012-08-02T12:45:12.187
> 
> 标签：batch-file

我对编码很陌生，所以请多多包涵:)

我正在寻找创建批处理文件来执行以下操作：

1)检查两个文件大小是否大于1KB

2）如果不是，则运行命令（更新文件）

3）再次检查文件是否大于1KB，如果不大于1KB再次运行命令

4）如果它们大于 1kb 则停止

任何帮助表示赞赏

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T14:23:22.973

```
@echo off

REM The two file names are the first and second parameters to the batch file

:CheckFileSizes
if %~z1 LEQ 1024 (
    if %~z2 LEQ 1024 (
        REM add your logic here!
        echo TEST >> %1
        echo TEST >> %2

        rem Recheck the file sizes
        goto :CheckFileSizes
    )
)

goto :EOF 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T13:20:22.767

使用`bash`脚本的一种方法：

```
for i in *; do

    FILESIZE=$(stat -c %s "$i")

    while [ $FILESIZE -lt 1024 ]; do

         echo "appending text" >> $i

         FILESIZE=$(stat -c %s "$i")

         if [ $FILESIZE -ge 1024 ]; then
             break
         fi
    done
done 
```

# magento - 将 Magento 移至新域

> ID：11777718
> 
> 赞同：2
> 
> 时间：2012-08-02T12:45:21.203
> 
> 标签：magento, installation

我正在尝试将 Magento 站点从子域移动到它的主域，但我遇到了麻烦。一个朋友做了这个指南，我跟着它去了一个发球台（我想无论如何）

我在 Magento 中进行了备份并上传到我的主域，然后 -

1.  备份现有数据库 (PhpMyAdminexport)。
2.  将文件复制到新服务器（如果您有 SSH 访问权限，而不是 FTP，归档它们会更快）。
3.  在新主机上创建数据库。
4.  在新服务器上导入现有的 DB 转储 (PHPMyAdminimport)。
5.  验证 Magento 是否在以下位置使用正确的 DB 设置：\app\etc\local.xml

6.  检查新创建的数据库。查找表：'core_config_data'。编辑“web/unsecure/base_url”的记录。编辑“web/secure/base_url”的记录。如果您不这样做，该站点将始终被重定向到旧位置。例如，对于这两个更改：“http(s)://allmyoffers.co.uk/”到 http(s)://.co.uk/

7.  删除 'var\cache' 目录的内容。

8.  新的 Magento 站点现在应该准备好了。

有谁知道我错了吗？这是我的网站 - www.perfumecow.com

PS我只有有限的代码技能所以请如果你写基本的代码谈话让我能理解:)

干杯

克里斯

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-02T13:27:54.093

# asp.net-mvc - 如何与 NopCommerce MVC 作为一个团队一起工作

> ID：11777720
> 
> 赞同：6
> 
> 时间：2012-08-02T12:45:26.350
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-2, asp.net-mvc-4, nopcommerce

我们目前正在查看 MVC 中 NopCommerce 的最新版本 (2.60)，我们将很快对其进行集成……我们已经下载了源代码并为用户指南文档支付了 20 美元。文档很棒！我的意思是……它很好地解释了如何部署、安装以及如何围绕 UI 前端和后端工作。这对于整体概述非常有用，但它缺乏的是对如何与 NopCommerce 作为一个团队合作的理解。什么是/是最佳实践等...

作为示例（或平行），如果您决定与 Dotnetnuke 作为一个团队一起工作，您通常以以下方式工作：

*   每个开发人员都在他们的机器上本地下载/安装 Dotnetnuke。
*   您还可以在专用服务器（比如说 dev-server）上下载/安装 Dotnetnuke。
*   作为开发人员，您工作并创建在 Dotnetnuke 安装中本地测试的模块。
*   完成后，将模块（以及模块附带的任何 SQL 脚本）打包成一个 zip 文件。
*   包准备好后，您可以在专用服务器 (dev-server) 上上传/安装该包。

这种方法非常适合 Dotnetnuke，更重要的是，如果您有一个开发人员团队创建模块。

我的问题是团队如何使用 NopCommerce MVC？

我假设直接在源代码中工作是一个坏主意，以防您的团队决定修改核心元素/源代码，这将导致无法升级到新版本（或中断更改）。

我不确定我与 Dotnetnuke 的对比是否正确……但有人知道（或帮助我澄清）团队如何与 NopCommerce MVC 合作。

此外，团队是否应该只依赖为 NopCommerce 创建插件而远离修改核心，还是应该无关紧要？

如果最终 NopCommerce MVC 升级创建类似的对象和/或覆盖它们，我们应该在我们的对象前面加上 SQL 中添加新对象（或修改现有对象）怎么样？

感谢您帮助我阐明这一点。

真挚地

文斯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T14:40:45.913

NopCommerce 中的插件几乎就像 DNN 中的模块。根据您的需要，有时需要修改核心代码。

我一直在为服务做的是创建一个新类并从现有服务继承，然后覆盖您要更改的功能。创建一个新的 DependencyRegistrar 类并将您的新服务类设置为该特定接口的实现。还要确保 Order 属性为 1，以便您的 DR 类在 stock 之后加载。由于您是从核心类继承的，因此您未覆盖的任何函数都将由父类处理。如果我需要添加一个新函数，我只是修改接口，在 stock 类中放置一个存根，并在我自己的中实现它。

Nop.Web 项目中的视图可以被主题覆盖。Admin 的东西和 Web 控制器变得更加棘手。我只是直接修改这些文件。

Core 和 Data 类可以使用部分类来添加新字段。

在任何情况下，当更新发布时，您仍然需要将更改与您的解决方案合并。我的观点是，你最好现在编写干净、可读的代码，并在合并时咬紧牙关。

我现在并不真正担心 SQL 脚本，因为我是一个开发人员，但也许您可以为 ALTER 脚本添加一个文件夹，并在它们创建的那一天命名它们。然后每个开发人员都知道他们在获得最新版本时需要运行哪些脚本。

# wpf - ComponentOne FlexGrid 为空

> ID：11777727
> 
> 赞同：0
> 
> 时间：2012-08-02T12:45:55.207
> 
> 标签：wpf, caliburn.micro, componentone

我刚开始使用 ComponentOne。除其他外，我需要为我的 WPF Caliburn.Micro 应用程序提供过滤功能的 DataGrid。所以我尝试用 C1DataGrid 替换我的常用 DataGrid，然后是 C1FlexGrid，但在这两种情况下，DataGrid 都是空的。这是我的代码：

```
 <c1:C1FlexGrid x:Name="EnrollmentFiles" Grid.Row="1"
            AutoGenerateColumns="False"
            BaseControls:DataGridExtension.Columns="{Binding EnrollmentFileColumns}"
            IsReadOnly="True"
            SelectedItem="{Binding Path=SelectedEnrollmentFile, Mode=TwoWay}">
    </c1:C1FlexGrid> 
```

你能告诉我我错过了什么吗？另外，我应该使用 C1DataGrid 还是 FlexGrid？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T10:34:44.697

通过将 SelectedItem 绑定，该约定可能不起作用。如果您使用约定并且希望 ItemsSource 绑定到 EnrollmentFiles 并且您想使用 SelectedItem，那么创建一个名为 SelectedEnrollmentFile 的属性，CM 也会执行 SelectedItem 绑定。

# asp.net - IE CSS 部署到服务器时未实现 box-shadow

> ID：11777730
> 
> 赞同：0
> 
> 时间：2012-08-02T12:45:59.267
> 
> 标签：asp.net, css, visual-studio-2010, internet-explorer-9

我正在使用一些 css 将角半径和框阴影添加到我的 asp.net 项目中的 div

```
.DesktopContainerDiv
{
    background-color:#C4D5E9;
    box-shadow: 10px 10px 5px #888;
    border-radius: 10px;
    border-collapse: separate;
    padding:10px;
    width:60%;
    min-width:800px;
    margin: 20px auto;
    text-align:center;
    min-height:200px
} 
```

当我通过 Visual Studio IDE（按 F5）运行时，这工作正常。但是当我将它部署到我的网络服务器时，如果我使用 IE9 加载页面，则不会显示框阴影和半径（Firefox 和 Chrome 都正确显示）。

我曾尝试使用 UltiDev 和 IIS Web 服务器，它们的行为相同，因此可以消除这种情况。

IE 必须选择样式表，因为它会将背景变为蓝色，所以我无法理解在 IDE 和 Web 服务器中运行之间的区别是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T12:55:32.143

我以前发生过一次，通过确保将兼容模式设置为 IE9 解决了问题

您可以通过放置来强制执行此操作

```
<meta http-equiv="X-UA-Compatible" content="IE=9" /> 
```

进入你的`<head>`

*编辑*：或尝试：

```
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE9" /> 
```

# android - 如何使用单独的字符串数组（Android）设置多行列表视图

> ID：11777732
> 
> 赞同：1
> 
> 时间：2012-08-02T12:46:10.337
> 
> 标签：android, arrays, listview, android-arrayadapter

我正在开发一个适用于 2 个屏幕的 Android 应用程序。第一个屏幕很简单，它有一个初始化为“未设置”的 TextView 和一个 Button。当用户点击按钮时，他/她被带到第二个屏幕，这是一个大的 ListView。ListView 是有史以来所有票房最高的电影的列表。如果只包含标题会很简单，但我需要创建列表视图以使其具有多行。结构是，**标题**向左，**总收入**向右对齐，发布**日期**位于第二行。

重要的花絮是我需要使用在 strings.xml 中声明的字符串数组。我已经声明了所有这些，但是我的问题是我被困在如何制作 Java 部分。这是我到目前为止提出的。

```
package com.android.rondrich;

import android.app.ListActivity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.TextView;

public class Lab5_082588part2 extends ListActivity {

    public static final String KEY = "KEY";
public static final String RETURN = "RETURN";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    String[] titleList = getResources().getStringArray(R.array.title_array);
    String[] grossList = getResources().getStringArray(R.array.gross_array);

    setListAdapter(new ArrayAdapter<String>(this,
            R.layout.lab5_082588part2, grossList)); //not sure if     correct to have 2 setListAdapters

    setListAdapter(new ArrayAdapter<String>(this,
            R.layout.lab5_082588part2, titleList));

    ListView lv = getListView();
    lv.setTextFilterEnabled(true);

    lv.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {

                Intent intent = getIntent();
                String title = ((TextView) view).getText().toString();
                intent.putExtra(Lab5_082588part2.RETURN, title);
                setResult(RESULT_OK, intent);
                finish();

            }
        });
    }

    @Override
    public void onBackPressed() {
        // TODO Auto-generated method stub
        super.onBackPressed();
        finish();
    }

} 
```

我研究过的一些片段正在使用这种方法（示例代码）

```
private ArrayList<SearchResults> GetSearchResults(){
 ArrayList<SearchResults> results = new ArrayList<SearchResults>();

 SearchResults sr = new SearchResults();
 sr.setName("Justin Schultz");
 sr.setCityState("San Francisco, CA");
 sr.setPhone("415-555-1234");
 results.add(sr); 
```

但是，对于长列表，这种方法将非常乏味。问题是：

如何使用在 strings.xml 中声明的字符串数组来合并使用多行列表视图，而无需像上面那样硬编码它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T13:06:11.987

您不能将适配器设置两次以显示您想要的行，而是您必须实现自定义适配器（那里有成千上万的教程可供查看，所以我将省略这部分）。

要从字符串数组中提取数据，您将（几乎）使用您发布的代码段：

```
String[] titleList = getResources().getStringArray(R.array.title_array);
String[] grossList = getResources().getStringArray(R.array.gross_array);
// ...

private ArrayList<SearchResults> GetSearchResults(){
    ArrayList<SearchResults> results = new ArrayList<SearchResults>();
    // make sure the arrays have the same length
    for (int i = 0; i < titleList.length; i++) {
        SearchResults sr = new SearchResults();
        sr.setTitle(titleList[i]);
        sr.setGross(grossList[i]);
        results.add(sr);
   }
   return results;
} 
```

然后，您将使用此方法返回的列表来填充您的自定义适配器。

布局示例：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:id="@+id/title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:text="title" />

    <TextView
        android:id="@+id/gross"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@id/title"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:text="Gross" />

    <TextView
        android:id="@+id/date"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@id/title"
        android:text="Date" />

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T13:59:57.613

如何制作可以在本教程中阅读的自定义 ListView 项目：[http ://www.ezzylearning.com/tutorial.aspx?tid=1763429](http://www.ezzylearning.com/tutorial.aspx?tid=1763429)

如果您想从您的 strings.xml 中获取 String，请在您的 ativity 类中使​​用它：

```
getContext().getResources.getString(R.string.your_text); 
```

# http - 将页面重定向到自身 - 要使用的正确 http 状态代码是什么

> ID：11777735
> 
> 赞同：0
> 
> 时间：2012-08-02T12:46:16.417
> 
> 标签：http, http-status-codes

这是一个关于 Web 应用程序架构而不是编码本身的问题，但是我仍然认为它属于这里，因为它属于大多数 Web 开发人员的问题领域：

我的问题。我有一个内容不完整的页面（只有部分内容）。我不想只返回 200 响应，因为我希望明确页面上的内容只是暂时的，并且访问者（谷歌）应该稍后返回以检索正确的页面。

我不确定 http 规范中是否有一个在这里有用的状态代码。我正在考虑使用 302 重定向到同一个 URI，但我不确定谷歌是否会将其视为游戏（我不明白为什么应该这样做 - 没有人会永久 302 到同一个 URI因为页面内容几乎会被忽略）。

这正是我想要的：为了让页面可以访问——但让谷歌忽略该页面，记住 URL 并稍后返回索引它。

我不想使用带有 200 响应的元“无索引”标签，因为我担心这会在正确的内容准备好时停止重新索引页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T12:51:45.973

当内容自动更改时，Google 将重新索引该页面。或者您可以在网站管理员工具的某处强制更新。

或者，您可以将页面 302 转到包含部分完成内容的备用地址，直到页面“完成”为止。然后把最终的内容复制到你原来的页面中，去掉302。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T12:52:50.120

206 是部分状态代码，但这不是您在这里所做的。这就是多部分文档。您在这里拥有的是一个“正在建设”类型的页面，但只有页面中的内容会改变而不是 uri。所以正确的做法是返回一个 200 并让谷歌索引它。

如果您不希望它被索引，因为它还没有为公众准备好，那么像你说的那样添加一个元无索引。Google 仍会下载该页面并对其进行解析以找到无索引但不对其进行索引。准备好后删除无索引，它将开始索引。您甚至可以通过提交包含您的页面的新 sitemap.xml 文件来提示这一点。

这些天谷歌重新索引的速度非常快，所以不要太担心临时阻止带有元标记的页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T12:51:01.150

任何错误代码都保留用于错误条件。确实没有“此页面不是最终版本”之类的错误。您可能想要指定此页面在以后过时并失效。例如，以下代码意味着页面会立即过时：

# mysql - 向架构授予触发器不起作用

> ID：11777747
> 
> 赞同：4
> 
> 时间：2012-08-02T12:47:15.307
> 
> 标签：mysql, grant

我需要为 mysql 中的整个模式授予用户 TRIGGER 权限才能导入 mysql 工作台备份。

我试过：

```
grant trigger ON `schemaname`.* TO `user`@`localhost` 
```

但是在导入时会出现用户没有权限的错误。

```
ERROR 1142 (42000) at line 53: TRIGGER command denied to user 'user'@'localhost' for table 'table' 
```

我试图授予用户 TRIGGER 对表的权限 - 这有效，但当然只适用于该表，其他表仍然出现错误。

有没有办法给用户触发模式的权限，而不分别给他每个表的权限？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T12:54:40.690

来自[MySQL 文档](http://dev.mysql.com/doc/refman/5.0/en/create-trigger.html)

```
In MySQL 5.0 CREATE TRIGGER requires the SUPER privilege. 
```

所以你需要给用户超级权限。导入时，会出现“创建触发器...”之类的命令，该命令会引发错误。

检查您的 MySQL 版本和定义器值以及导入文件中的触发器。

**编辑：** 对于 5.1 版，请遵循[MySQL docs](http://dev.mysql.com/doc/refman/5.1/en/create-trigger.html)，上面写着：

```
CREATE TRIGGER requires the TRIGGER privilege for the table associated with the 
trigger. The statement might also require the SUPER privilege, depending on 
the DEFINER value, as described later in this section. If binary logging is 
enabled, CREATE TRIGGER might require the SUPER privilege, as described in 
Section 19.7, “Binary Logging of Stored Programs”. (Before MySQL 5.1.6, there is 
no TRIGGER privilege and this statement requires the SUPER privilege in all cases)

The DEFINER clause determines the security context to be used when checking access
privileges at trigger activation time. 
```

因此，您需要检查定义器值以导入触发器。它可能有类似的东西：`DEFINER = root`。尝试删除定义器，然后尝试导入。希望它有效...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-04T11:44:15.267

在 MySQL 文档中：

```
To relax the preceding conditions on function creation (that you must have the
SUPER privilege and that a function must be declared deterministic or to not
modify data), set the global log_bin_trust_function_creators system variable
to 1\. By default, this variable has a value of 0, but you can change it like
this:

mysql> SET GLOBAL log_bin_trust_function_creators = 1;
You can also set this variable by using the
--log-bin-trust-function-creators=1 
option when starting the server. 
```

设置全局变量并重新打开我能够插入触发器的会话

# javascript - 如何定位自动重叠的元素

> ID：11777748
> 
> 赞同：0
> 
> 时间：2012-08-02T12:47:21.907
> 
> 标签：javascript, html, css

我在固定大小的 div 中有可变数量的元素。只要有 <= 5 个元素，它们就有足够的空间并排坐下。但是一旦有更多，我希望它们越来越多地相互重叠，所以它们都留在 div 内。把它想象成在游戏中持有不同数量的牌。除了在添加/删除元素时使用 JavaScript“手动”控制它之外，我想不出任何方法来做到这一点。有没有办法让浏览器为我处理这种效果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T13:28:57.640

[http://jsfiddle.net/mFP9E/](http://jsfiddle.net/mFP9E/)

```
$(document).ready(function(){
  $("ul").each(function(){
    var total = $(this).find("li").length;
    var elWidth = 100; //Element width
    if(total > 5) {
      var space = Math.ceil((((elWidth * total)-(elWidth * 5))/total)/2);
      $(this).children("li").css("margin","0 -"+space+"px");                      
    }                     
  });
});​ 
```

# objective-c - NSAssert1 的参数类型错误

> ID：11777749
> 
> 赞同：1
> 
> 时间：2012-08-02T12:47:25.437
> 
> 标签：objective-c, long-integer, short, upcasting

这不是给我一个错误，而是我想摆脱的几个警告。

```
OSErr err = AudioUnitInitialize(toneUnit);
NSAssert1(err == noErr, @"Error initializing unit: %ld", err); 
```

我得到的警告是：`Format specifies type 'long' but the argument has type 'OSErr' (aka 'short')`. 显然我可以通过使用`long`来改变它，`OSErr`但我想知道为什么我会收到错误。这是一个upcast，所以我认为它不应该引起任何问题。

谁能解释一下？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T12:50:40.263

采用

```
NSAssert1(err == noErr, @"Error initializing unit: %hd", err); 
```

或者

```
NSAssert1(err == noErr, @"Error initializing unit: %ld", (long)err); 
```

反而。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T12:51:14.633

由于`NSAssert1`是在 C 的约束内实现的[*可变参数函数*](http://en.wikipedia.org/wiki/Variadic_function#C.2C_Objective-C.2C_C.2B.2B.2C_and_D)，因此它不能在内部执行强制转换：无法找到在函数的可变参数部分传递的参数的类型。Objective-C 编译器将在调用之前执行默认类型提升，但默认情况下`short`会转换为`int`，而不是转换为`long`。这就是为什么您应该插入显式转换或使用不同的格式说明符。

# webserver - Plesk 11 更新使域无法通过 www 访问

> ID：11777751
> 
> 赞同：1
> 
> 时间：2012-08-02T12:47:34.260
> 
> 标签：webserver, plesk, vhosts

希望在我更新到 plesk 11 后有人可以帮助我。

我有 4 个域，其中 2 个在更新到 plesk 11 后无法访问。

在所有域都可以访问之前：

```
http://www.mydomain.com
www.mydomain.com
mydomain.com 
```

现在它只适用于：

```
mydomain.com 
```

如果我去 www.mydomain.com 有一个默认页面：它工作！

这是此服务器的默认网页。

Web 服务器软件正在运行，但尚未添加任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-10T08:11:47.400

检查您的 cname 记录是否添加了域 www，并检查您的 dns 模板

# javascript - 我想要我的所有选择类，包括以后可能添加以使用 select2 的类

> ID：11777755
> 
> 赞同：0
> 
> 时间：2012-08-02T12:47:37.980
> 
> 标签：javascript, jquery

我正在使用以下代码：

```
$(".select2")
    .select2(); 
```

所有 select2 类都应用了 .select2() 。

但是，我有添加 html 的代码（包括对我的网页的选择。添加新内容后，我是否需要运行上面相同的代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T12:53:26.853

**是**的，您需要重新运行此方法来设置新`select`元素的样式。

根据您添加`select`元素的方式，可能值得将此方法添加到回调中。

作为使用 ajax 的示例：

```
$.ajax({
    url: "garfieldIsTheBestCatEver.php",
    type: "POST",
    success: function(data) {
        //Guess at data being your select here
        var $this = $(data); //Make the data a jQuery object;
        $this.select2(); //Run your method
    }
}); 
```

# wcf - 将“maxBufferSize”设置为 1GB 的 WCF NetTcpBinding 是否有任何问题

> ID：11777757
> 
> 赞同：1
> 
> 时间：2012-08-02T12:47:39.733
> 
> 标签：wcf, memory-management, buffer, nettcpbinding, transport

我有一个发送消息的双工`Small`通信`Large`。

在极少数情况下，我有更多数据要发送，因此我很困惑`TransportMode`将`Streamed`.

所以我将缓冲区大小设置为`1GB`（或大尺寸）。

```
maxBufferSize="1073741824" 
```

是不是因为我的`Small`留言沟通？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T07:33:03.040

正如设置所说，这是*最大*缓冲区大小，而不是用于所有请求的缓冲区大小。虽然 maxBufferSize 仅用于在消息流式传输时定义标头的缓冲区大小

# javascript - 如何通过 javascript 访问 JSON 数据

> ID：11777762
> 
> 赞同：1
> 
> 时间：2012-08-02T12:47:43.900
> 
> 标签：javascript, jquery, jquery-ui

我想在不应用 html 的情况下访问单选按钮（性别字段）中的 jsongrid 值。我尝试了简单的 javascript 函数，该函数在 UI 中运行良好，但值来自 html 输入，但我希望值来自 jsongrid。请帮帮我..

这是 JavaScript 代码

```
<script type="text/javascript">
    $j.ajax({
        url:"UserGender",
        type: "GET",
        data: datasourses,
        dataType: "json",
        success: function (data){
            $.each(data, function(i, selectedItem) {
                alert("paramValue: " + selectedItem.paramValue + ", paramCode: " +    
                data.selectedItem.paramCode);
            });
        }       
    });
</script> 
```

这是html

```
<input type="radio" name="Female" >
<input type="radio" name="Male" > 
```

json代码

```
{
    "jsonWrapperforGrid": {
        "page": "1",
        "total": "2",
        "rows": [
            {
                "tenantId": 0,
                "paramType": "UserGender",
                "paramCode": "F",
                "langCode": "en",
                "paramValue": "Female"
            },
            {
                "tenantId": 0,
                "paramType": "UserGender",
                "paramCode": "M",
                "langCode": "en",
                "paramValue": "Male",
                "paramBlob": ""
            }
        ]
    }
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T12:50:49.197

```
 $.each(data.jsonWrapperforGrid.rows, function() {
    alert("paramValue: " + this.paramValue + ", paramCode: " +    this.paramCode);
}); 
```

# iphone - 如何在不转到该视图控制器的情况下更改标签栏中的图像？

> ID：11777769
> 
> 赞同：0
> 
> 时间：2012-08-02T12:48:19.277
> 
> 标签：iphone, ios, ipad

我有一个 iPhone 应用程序，我在其中使用标签栏的自定义图像。选择标签栏时，我必须显示一个图像并取消选择显示另一个图像。我已通过使用 appdelegate 中的波纹管代码成功实现了这一点。`

```
 UIImage *selectedImage0 = [UIImage imageNamed:@"pinboard_hvr2.png"];
    UIImage *unselectedImage0 = [UIImage imageNamed:@"pinboard2.png"];

    UIImage *selectedImage2 = [UIImage imageNamed:@"scan_hvr2.png"];
    UIImage *unselectedImage2 = [UIImage imageNamed:@"scan2.png"];

    UIImage *selectedImage3 = [UIImage imageNamed:@"places_hvr2.png"];
    UIImage *unselectedImage3 = [UIImage imageNamed:@"places2.png"];

    UITabBar *tabBar = self.tabBarController.tabBar;
    tabBar.TintColor = [UIColor clearColor];
    UITabBarItem *item0 = [tabBar.items objectAtIndex:0];
    UITabBarItem *item1 = [tabBar.items objectAtIndex:1];
    UITabBarItem *item2 = [tabBar.items objectAtIndex:2];

    [item0 setFinishedSelectedImage:selectedImage0 withFinishedUnselectedImage:unselectedImage0];
    [item1 setFinishedSelectedImage:selectedImage2 withFinishedUnselectedImage:unselectedImage2];
    [item2 setFinishedSelectedImage:selectedImage3 withFinishedUnselectedImage:unselectedImage3]; 
```

`但现在我的问题是我在 secondindex 中有一个教程视图。单击该按钮时，我需要根据教程中的说明更改每个标签栏图标。但我不需要去那里。我想留在教程视图本身。但需要更改图标。有人可以帮我实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T13:23:46.060

最后我已经解决了问题。实际上它是一件简单的事情。根据教程按钮操作设置您选择和取消选择的图像。例如，如果您有 3 个按钮来显示每个选项卡的重要性，请根据设置 appdelegate.tabbar 的选定图像到这样的景色。

```
TabNavAppDelegate *appdelegate = ( TabNavAppDelegate *)[[UIApplication sharedApplication] delegate];

    UIImage *unselectedImage0 = [UIImage imageNamed:@"pinboard_hvr2.png"];
    UIImage *unselectedImage2 = [UIImage imageNamed:@"scan2.png"];

    UIImage *selectedImage3 = [UIImage imageNamed:@"places2.png"];
    UITabBar *tabBar = appdelegate.tabBarController.tabBar;
    tabBar.TintColor = [UIColor clearColor];
    UITabBarItem *item0 = [tabBar.items objectAtIndex:0];
    UITabBarItem *item1 = [tabBar.items objectAtIndex:1];
    UITabBarItem *item2 = [tabBar.items objectAtIndex:2];

    [item0 setFinishedSelectedImage:unselectedImage0 withFinishedUnselectedImage:unselectedImage0];
    [item1 setFinishedSelectedImage:unselectedImage2 withFinishedUnselectedImage:unselectedImage2];
    [item2 setFinishedSelectedImage:selectedImage3 withFinishedUnselectedImage:selectedImage3]; 
```

`并在第三个按钮操作中将其设置回正常方式，就像在 appdelegate 中所做的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T12:55:13.267

向 AppDelegate 发送通知或调用委托方法。在该方法中，如果需要，您还可以传递您的参数并在那里进行特定的选项卡更改。

希望这对你有用。

# postgresql - 如何获取 NativeQuery 的结果参数

> ID：11777777
> 
> 赞同：1
> 
> 时间：2012-08-02T12:48:45.290
> 
> 标签：postgresql, gwt, postgis

我想做这个查询：

```
Select
    srid,
    substring(srtext
              from (position('DATUM["' in srtext)+7)
              for (position('ID["' in srtext)+2)
                - (position('DATUM["' in srtext)+7))
  from spatial_ref_sys
  order by substring 
```

所以，我创建了一个

```
Query query = em().createNativeQuery(QUERY) 
```

还要创建一个具有 Long srid 和 String sridText 的 Srid 对象。

我需要获取这些值并将其放入列表中。sridText 上的子字符串，显然是 srid 变成了 Long srid。

请帮忙！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T18:29:24.503

找到了答案。首先，我做了一个名为 getSrid 的 plpgsql 函数

```
CREATE OR REPLACE FUNCTION getSRID() returns text[] as $$
declare
 resultado text[];
 consulta cursor for
 Select srid,substring(srtext from (position('DATUM["' in srtext)+7) 
 for(position('ID["' in srtext)+2)
  - (position('DATUM["' in srtext)+7)) as sub
 from spatial_ref_sys;
 cont int;
 i int;
 sridd int;
 srTextt text;
begin
 open consulta;
 i=1;
 EXECUTE 'SELECT COUNT(*) FROM SPATIAL_REF_SYS' into cont;
 resultado := ARRAY[cont];
 while(i<cont) loop
  fetch consulta into sridd,srTextt;
  resultado[i] := sridd;
  resultado[i+1] := srTextt;
  i:=i+2;
 end loop;
 return resultado;
end
$$ language plpgsql; 
```

如您所见，我在返回时得到了一个 Text[]，所以在我的 java 调用中，我将对象转换为 String[]：

```
public List<SridDTO> listaa(){
    int i = 0;
    List<SridDTO> list = new ArrayList<SridDTO>();
    Query query = em().createNativeQuery("Select getSrid()");
    String[] vector = (String[]) query.getSingleResult();
    while(i<vector.length){
        SridDTO sridDTO = new SridDTO(new Long(vector[i]),vector[i+1]);
        i = i + 2;
        list.add(sridDTO);
    }
    return list;
} 
```

# lucene - 强制 Lucene.NET 在 N 秒内显示结果

> ID：11777778
> 
> 赞同：0
> 
> 时间：2012-08-02T12:48:47.717
> 
> 标签：lucene, lucene.net

我喜欢在 N 秒后得到 Lucene.NET 的响应，甚至还没有结果。如何？

目前我面临一个问题。所有 Lucene.NET 索引都位于一个中心位置，每个实例在重新启动后必须将索引复制到本地，然后才能进行搜索。

复制将在第一次 Lucene.NET 请求后启动，并需要几分钟才能完成。目前所有 Lucene.NET 都只是挂起等待，所以我喜欢强迫他们无论如何都做出响应。

请帮忙。

**[EIDT]**

所以路径是 using `TimeLimitingCollector`，这给了我另一个问题，如何一起使用多个连接器？

我的原始代码是：

```
TopFieldCollector collector = TopFieldCollector.create(Sort.RELEVANCE, resultAmount,
                            false,
                            true /* trackDocScores */,
                            true /* trackMaxScore */,
                            false /* docsInOrder */);
                        searcher.Search(query, new PositiveScoresOnlyCollector(collector)); 
```

我应该放在哪里`TimeLimitingCollector`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T16:17:23.487

您可以使用[TimeLimitingCollector](https://svn.apache.org/repos/asf/incubator/lucene.net/trunk/src/core/Search/TimeLimitingCollector.cs)。

**[编辑]**

我不熟悉 Lucene.NET，但使用 Lucene Java，您只需将收集器包装在 TimeLimitingCollector 中，每当尝试收集文档时，它都会抛出超时异常。

# c# - 拆分大型 mvc 应用程序解决方案的正确方法是什么？

> ID：11777781
> 
> 赞同：3
> 
> 时间：2012-08-02T12:49:09.167
> 
> 标签：c#, asp.net-mvc, model-view-controller, architecture, projects-and-solutions

我正在创建一个数据库中包含 70 多个表的应用程序，**它将在下一阶段增加。**

我使用 Asp.net MVC：**模型、实体框架、视图模型、存储库、视图、控制器、操作过滤器、参考、多语言……**

**这些部件在我的解决方案中的最佳位置是什么？**

我已经看到了拆分解决方案的不同方法。例如：

```
 - Solution
        - Core.UI
            - Domain
            - UI
               - Models
            - Persistence
        - Core.Test
        - UI
            - Content
            - Controller
            - Views
            - Scripts 
```

**或者另一个说把它分成**

```
 - Solution
        - Model
        - Entities
        - Web
        - References 
```

**或者**

```
... 
```

*您对 DDD（领域驱动设计）有何看法？以及如何实施？你推荐它吗？*

* * *

*   我希望我的项目具有最大的**灵活性**和**最佳选择**，因为当项目很大时，更改其结构将更加困难。
*   我想以**各种形式交换信息**（Web 和 html、客户端应用程序、移动设备、xml....）
*   **我想单独**更改和构建我的项目的基本部分 （现在和将来）

* * *

如果您可以帮助我提供详细信息或示例。

*非常感谢...*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T13:28:58.773

The key thing here is that you want to **avoid coupling** so that you can stay productive throughout the development of the app. In order to do that, you want to do a **Service-Oriented Architecture**.

Instead of n-tier apps which break down the problem into horizontal slices (layers) , Service-Oriented Architecture instead takes vertical slices of the application (services).

[Start with this video by Udi Dahan](http://skillsmatter.com/podcast/design-architecture/talk-from-udi-dahan) if you want to learn the basic ideas of Service-Oriented Architecture. Hint: you're starting off on the wrong foot if you've already designed the database.

The two dudes whose stuff you want read here are [Udi Dahan](http://www.udidahan.com/?blog=true) and [Greg Young](http://goodenoughsoftware.net/). I would also recommend the [DDD Google Group](https://groups.google.com/forum/?fromgroups#!forum/dddcqrs) to ask more detailed questions. DDD questions don't always fit StackOverflow as well as other computing questions because they're so nuanced and usually require a lot of back and forth to get to the bottom of the issue.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T12:55:30.850

直接回答这个问题并不容易。这取决于您的业务需求、应用程序的规模等。

Microsoft Spain 提供了一个参考实现。尽管它有一些缺点，但它仍然是一个很好的起点。如果您有足够的时间，只需决定需要哪些概念/模式，哪些不需要。

[http://microsoftnlayerapp.codeplex.com/](http://microsoftnlayerapp.codeplex.com/)

# java - 如何替换已经在 J ava 中打印在屏幕上的文本？

> ID：11777788
> 
> 赞同：9
> 
> 时间：2012-08-02T12:49:28.860
> 
> 标签：java, string, time, replace, clock

我是 Java 新手，为了了解更多信息，我尝试制作一个时钟。它工作得很好，除了它每次一秒变化时都会在新行上打印。我该如何制作，以便我可以用新时间替换已经打印出来的文本？

```
public class test {
    public static void main(String[] args) {
        test.clock();
    }
    public static void clock() {
        int sec = 0;
        int min = 0;
        int h = 0;
        for(;;) {
            sec++;
            if(sec == 60) {
                min++;
                sec = 0;
            } else if(min == 60) {
                h++;
                min = 0;
            } else if(h == 24) {
                h = 0;
            }
            try {
                Thread.sleep(1000);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
            if(h < 10) {
                System.out.print("0"+h+":");
            } else {
                System.out.print(h+":");
            }
            if(min < 10) {
                System.out.print("0"+min+":");
            } else {
                System.out.print(min+":");
            }
            if(sec < 10) {
                System.out.println("0"+sec);
            } else {
                System.out.println(sec);
            }
        }       
    }
} 
```

这是我的代码。这是我正在尝试做的一个例子：我想把 this:`00:00:00`变成 this: `00:00:01`（代码会这样做，但它会打印在新行上并且不会删除旧时间）。问题是我想摆脱第一个（`00:00:00`）并在同一行打印第二个（`00:00:01`）。

这在Java中可能吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-02T12:53:25.767

这实际上与java无关。相反，您希望您正在显示的*控制台*覆盖文本。

这可以通过发送回车符（Java 中的 \r）而不是换行符（Java 中的 \n）来完成（在任何语言中）。所以你*从不*使用 println()，如果你想这样做，只使用 print()。如果你在第一次打印之前添加一个 print("\r") 它应该做你想要的。

顺便说一句，如果您将整个时间都构建在一个字符串中然后一次全部输出，那将会更加优雅和简单:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-20T06:53:57.763

你可以`System.out.print("\u001B[A");`让光标向上一行。下面是它的工作原理：

`\u001B`是转义字符（27 ascii 码） `[`在转义字符之后，字母表示我们想要对光标做什么

A：光标上移，B：光标下移，C：光标右移，D：光标左移，H：左上角，M删除当前行，T：向上滚动，S：向下滚动，J：删除所有行向下到光标

## 警告这不适用于 cmd 或 powershell。

# java - 使用网页远程控制 JavaSE 应用程序

> ID：11777796
> 
> 赞同：-1
> 
> 时间：2012-08-02T12:50:03.530
> 
> 标签：java, php, sockets, remote-access

我正在设计一个使用网络摄像头作为 IP 摄像头的 JavaSE 应用程序。此应用程序有 2 种模式

一世。实时视频流

ii. 运动检测图像捕获（当检测到运动时，它会捕获一帧并存储它）

我使用 JavaCV 库实现了这一点。

如何构建 Web 界面以在这两种模式之间进行远程切换。并在网页上显示视频或图像。

另外，如何将实时视频流式传输到网页。

我打算使用 PHP。

任何帮助，将不胜感激。我不介意任何链接或教程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T13:02:52.480

你有2个意见

首先，您在 Java 应用程序中运行 Web 服务器（这会导致没有 php）

优点：

*   方便使用的
*   如果您使用嵌入式 Servlet 容器或类似 Velocity 处理器，则简单

缺点：

*   不易从外网访问

其次，您在 Internet 的某处运行网络服务器，Java 应用程序将视频流式传输到服务器

优点：

*   易于从外部访问
*   可用的 PHP

缺点：

*   你需要实现的东西

对于流媒体部分，我目前还没有好主意——也许可以试试 vlcj 之类的东西。

# jquery - 将两个 Fancybox 脚本合并在一起并修复按钮

> ID：11777797
> 
> 赞同：0
> 
> 时间：2012-08-02T12:50:09.133
> 
> 标签：jquery, fancybox, sharing

我在标题属性社交媒体共享按钮中使用 Fancybox。我从[这个](http://jsfiddle.net/B9ytK/202/)例子中得到了它。[这](http://jsfiddle.net/dagloser/B9ytK/207/)就是我现在所拥有的。

但是现在我还有两个问题。现在我正在使用两个脚本，我需要合并在一起并使一切正常工作，但是当我删除该行时

```
$('.fancybox').fancybox(); 
```

从 Fancybox 脚本中，共享按钮出现，但所有按钮都消失了。不过，您仍然可以使用箭头键翻阅图像。但是当我保留那条线时，共享按钮不会出现。

花式框脚本：

```
<script type="text/javascript">
    $(document).ready(function() {
        /*
         *  Simple image gallery. Uses default settings
         */

        $('.fancybox').fancybox();

        /* Using custom settings */

        $("a#inline").fancybox({
            'hideOnContentClick': false
        });

        /*
         *  Different effects
         */

        // Change title type, overlay opening speed and opacity
        $(".fancybox-effects-a").fancybox({
            helpers: {
                title : {
                    type : 'outside'
                },
                overlay : {
                    speedIn : 500,
                    opacity : 0.75
                }
            }
        });

        // Disable opening and closing animations, change title type
        $(".fancybox-effects-b").fancybox({
            openEffect  : 'none',
            closeEffect : 'none',

            helpers : {
                title : {
                    type : 'over'
                }
            }
        });

        // Set custom style, close if clicked, change title type and overlay color
        $(".fancybox-effects-c").fancybox({
            wrapCSS    : 'fancybox-custom',
            closeClick : true,

            helpers : {
                title : {
                    type : 'inside'
                },
                overlay : {
                    css : {
                        'background-color' : '#eee'
                    }
                }
            }
        });

        // Remove padding, set opening and closing animations, close if clicked and disable overlay
        $(".fancybox-effects-d").fancybox({
            padding: 0,

            openEffect : 'elastic',
            openSpeed  : 150,

            closeEffect : 'elastic',
            closeSpeed  : 150,

            closeClick : true,

            helpers : {
                overlay : null
            }
        });

        /*
         *  Button helper. Disable animations, hide close button, change title type and content
         */

        $('.fancybox-buttons').fancybox({
            openEffect  : 'none',
            closeEffect : 'none',

            prevEffect : 'none',
            nextEffect : 'none',

            closeBtn  : false,
            helpers : {
                title : {
                    type : 'inside'
                },
                buttons : {}
            },

            afterLoad : function() {
                this.title = 'Image ' + (this.index + 1) + ' of ' + this.group.length + (this.title ? ' - ' + this.title : '');
            }
        });

    });
</script> 
```

这是共享按钮的脚本：

```
<script>
//<![CDATA[ 

$(".fancybox")
.attr('rel', 'gallery')
.fancybox({
    beforeShow: function () {
        if (this.title) {
            // New line
            this.title += '<br />';

            // Add FaceBook like button
            this.title += '<iframe src="//www.facebook.com/plugins/like.php?href=' + this.href + '&amp;layout=button_count&amp;show_faces=true&amp;width=500&amp;action=like&amp;font&amp;colorscheme=light&amp;height=23" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:110px; height:23px;" allowTransparency="true"></iframe>';
        }
    },
    afterShow: function() {
        // Render tweet button
        twttr.widgets.load();
    }
});

//]]> 
</script> 
```

# java - Java 代码的等效 Scala 代码不起作用（方法签名无效）

> ID：11777798
> 
> 赞同：1
> 
> 时间：2012-08-02T12:50:12.850
> 
> 标签：java, scala, methods, method-signature

我正在使用 JUNG2 库，这样我就可以可视化我创建的神经网络系统。

首先，我遵循 JUNG2 中的代码示例，并使用以下 Java 代码：

```
DirectedSparseMultigraph<Integer, Integer> graph = new DirectedSparseMultigraph<Integer, Integer>();        
DelegateForest<Integer, Integer> delf = new DelegateForest<Integer, Integer>();
Factory<Tree<Integer, Integer>> delt = DelegateTree.<Integer, Integer>getFactory(); 
Transformer<Integer, Double> trans = new Transformer<Integer, Double>() {
    @Override
    public Double transform(Integer arg0) {
        return 1.0;
    }
};      
MinimumSpanningForest2<Integer, Integer> prim = new MinimumSpanningForest2<Integer, Integer>(graph, delf, delt, trans); 
```

现在 Scala 中的等效代码：

```
var graph = new DirectedSparseMultigraph[Int, Int]
var delf = new DelegateForest[Int, Int]()
var delt = DelegateTree.getFactory[Int, Int]()
var trans = new Transformer[Int, Double] {
  def transform(input:Int):Double = {
    return 1.0
  }
}  
var prim:MinimumSpanningForest2[Int, Int] = new MinimumSpanningForest2(graph, delf, delt, trans) 
```

在 Scala 示例中，MinimumSpanningForest2 的实例化在 Eclipse 中给了我一个很长的错误：

```
overloaded method constructor MinimumSpanningForest2 with alternatives: 
 (edu.uci.ics.jung.graph.Graph[V,E],edu.uci.ics.jung.graph.Forest[V,E],org.apache.commons.collections15.Factory[_ <: 
 edu.uci.ics.jung.graph.Graph[V,E]],org.apache.commons.collections15.Transformer[E,java.lang.Double])edu.uci.ics.jung.algorithms.shortestpath
 .MinimumSpanningForest2[V,E] <and> 
 (edu.uci.ics.jung.graph.Graph[V,E],org.apache.commons.collections15.Factory[edu.uci.ics.jung.graph.Forest[V,E]],org.apache.commons.collecti
 ons15.Factory[_ <: 
 edu.uci.ics.jung.graph.Graph[V,E]],org.apache.commons.collections15.Transformer[E,java.lang.Double])edu.uci.ics.jung.algorithms.shortestpath
 .MinimumSpanningForest2[V,E] cannot be applied to (edu.uci.ics.jung.graph.DirectedSparseMultigraph[Int,Int], 
 edu.uci.ics.jung.graph.DelegateForest[Int,Int], org.apache.commons.collections15.Factory[edu.uci.ics.jung.graph.Tree[Int,Int]], java.lang.Object 
 with org.apache.commons.collections15.Transformer[Int,scala.Double]) 
```

我一直在寻找年龄，但无法看到问题。查看 Collections 和 JUNG2 的 API 文档，我很肯定泛型是正确的。JAVA 示例运行良好。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-02T12:53:41.260

呃……不可思议。当我在尝试 2 小时后发布问题时，我自己找到了答案。这大概就是所谓的门把手效应吧……

在 .scala 文件中键入*Double时，这将变为**scala.lang.Double*（当然），而我上面的方法需要*java.lang.Double*。所以它通过改变它来解决：

```
var transformer = new Transformer[Int, java.lang.Double] {   
  def transform(input:Int):java.lang.Double = {
    return 1.0
  }   
} 
```

尽管 Java 和 Scala 可以互换，但您必须非常小心 Java 和 Scala 的同名类。如果您在没有 Java 知识的情况下编写 Scala 编程，这个问题可能很难解决。

# android - 在 Android 应用程序上发送电子邮件

> ID：11777799
> 
> 赞同：0
> 
> 时间：2012-08-02T12:50:15.267
> 
> 标签：android, sendmail

我目前正在开发一个具有“提问表单”的 Android 应用程序，用户可以在其中输入问题并将其发送到预定的电子邮件地址。我想知道如何允许应用程序捕获用户输入的内容并使用按钮将输入直接发送到预定的电子邮件，或者不将用户带到电子邮件应用程序页面，或者捕获所有用户输入并将其发送到内置的电子邮件意图。我已经看到了很多与我的问题相关的问题，但我只想确认，如果我[使用 JavaMail API 在 Android 中遵循此发送电子邮件而不使用默认/内置应用程序](https://stackoverflow.com/questions/2020088/sending-email-in-android-using-javamail-api-without-using-the-default-built-in-a)

回答，它是否允许我捕获用户输入并将其发送到预先确定的电子邮件地址？

以下是我尝试过的代码

```
public void onClick(View v) {
    // TODO Auto-generated method stub
    convertEditTextVarsIntoStringsAndYesThisIsAMethodWeCreated();
    String[] to = {"someone@hotmail.co.uk"};

    String message[] = {name} ;
    String message2 [] = {mobile} ;
    String message3 [] = {email2} ;
    String message4 [] = {question} ;

    Intent Emailintent = new Intent(android.content.Intent.ACTION_SEND) ;
    Emailintent.putExtra(android.content.Intent.EXTRA_EMAIL, to);

    Emailintent.setType("plain/text");
    Emailintent.putExtra(android.content.Intent.EXTRA_TEXT, message);
    Emailintent.putExtra(android.content.Intent.EXTRA_TEXT, message2);
    Emailintent.putExtra(android.content.Intent.EXTRA_TEXT, message3);
    Emailintent.putExtra(android.content.Intent.EXTRA_TEXT, message4);
    startActivity(Emailintent);
}
private void convertEditTextVarsIntoStringsAndYesThisIsAMethodWeCreated() {
    // TODO Auto-generated method stub
    email2= youremail.getText().toString();
    mobile = yourmobile.getText().toString();
    name = yourname.getText().toString();
    question = yourquestion.getText().toString();

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T12:53:19.723

尝试这样做：

```
EditText ed=(EditText) findViewById(R.id.edittext1); 
```

当用户编辑编辑文本时，他按下一个按钮：

```
button.setOnClickListener(this); 
```

实现 onclick 侦听器并添加未实现的方法，并在 onclicklistener 中执行以下操作：

```
String emailaddress="someone@yahoo.com";
String subject="Subject";
String message=ed.getText().toString();
Intent email = new Intent(android.content.Intent.ACTION_SEND);
email.putExtra(android.content.Intent.EXTRA_EMAIL, emailaddress);
email.putExtra(android.content.Intent.EXTRA_SUBJECT, subject);
email.setType("plain/text");
email.putExtra(android.content.Intent.EXTRA_TEXT, message);
startActivity(email); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T12:58:42.673

试试这个，我想这就是你所期望的，它会将所有详细信息发布到你的邮箱中，

**第1步：**

`convertEditTextVarsIntoStringsAndYesThisIsAMethodWeCreated()`在发送您的电子邮件之前打电话给这个。

（或者）

**第 2 步：使用此代码**

在 OnClick 方法中

```
 convertEditTextVarsIntoStringsAndYesThisIsAMethodWeCreated();

        String body = "Name:"+ name+"\n Mobile"+ mobile+"\n Emailto"+email2+"\nQuestion"+ question;
        Intent emailtosend = new Intent(Intent.ACTION_SEND);
        emailtosend.putExtra(Intent.EXTRA_EMAIL, new String[]{ to}); 
        emailtosend.putExtra(Intent.EXTRA_TEXT, body);

        //need this to prompts email client only
        emailtosend.setType("message/rfc822"); 

        startActivity(Intent.createChooser(emailtosend, "Select email application")); 
```

希望能帮助到你

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T13:10:12.370

按照您提供的[链接](https://stackoverflow.com/questions/2020088/sending-email-in-android-using-javamail-api-without-using-the-default-built-in-a)中的步骤操作，它似乎有效。请记住，代码中有硬编码的密码。

# c# - 按特定顺序分配资金

> ID：11777811
> 
> 赞同：7
> 
> 时间：2012-08-02T12:51:01.643
> 
> 标签：c#, algorithm

我有一个雇主应付的总金额，这个金额需要在员工之间分配。

例如

```
a $100
b $200
c -$200
d -$200
e $500 
```

应付总额是所有项目的总和，在这种情况下为 400 美元

问题是我必须调用第 3 方系统来一一分配这些金额。但我不能让余额在分配期间低于 0 美元或高于总金额（400 美元）。

因此，如果我按上述顺序插入 a、b、c 将起作用，因此当前分配的总和 = 100 + 200 - 200 = 100 美元。但是，当我尝试分配 d。系统将尝试添加 -$200，这将使当前分配的金额 -$100 小于 $0，这是不允许的，因此将被系统拒绝。

如果我对列表进行排序，那么负面项目排在最后。IE

```
a $100
b $200
e $500
c -$200
d -$200 
```

a 会起作用，b 会起作用，但是当它尝试插入 e 时会出现资金不足错误，因为我们已经超过了 $400 的最大值。我已经意识到没有灵丹妙药，总会有一些场景会破裂。但是，我想提出一个在**大多数**情况下都可以使用的解决方案。

正常的数据样本将包含 5 - 100 个项目。只有 2-15% 的人含有负数。

有没有一种聪明的方法可以对列表进行排序？还是尝试多次分配会更好。例如，将正面和负面分成两个列表。插入正数直到一个错误，然后插入负数直到它出错，然后在列表之间来回切换，直到它全部分配或直到它们都出错。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T15:36:07.140

尽管这实际上与海尔的答案相同（我在他发布他的答案之前就开始研究答案，并击败了我）我想我还是会发布它，因为它包含一些源代码并且可能会帮助想要具体实现的人（抱歉，它不在 C# 中，C++ 是我目前可以访问的最接近的东西）

```
#include <iostream>
#include <vector>
#include <numeric>
#include <algorithm>

using namespace std;

vector<int> orderTransactions(const vector<int>& input) {

    int max = accumulate(input.begin(), input.end(), 0);

    vector<int> results;
    // if the sum is negative or zero there are no transactions that can be added
    if (max <= 0) {
        return results;
    }

    // split the input into positives and negatives
    vector<int> sorted = vector<int>(input);
    sort(sorted.begin(), sorted.end());

    vector<int> positives;
    vector<int> negatives;

    for (int i = 0; i < sorted.size(); i++) {
        if (sorted[i] >= 0) {
            positives.push_back(sorted[i]);
        } else {
            negatives.push_back(sorted[i]);
        }
    }   

    // try to process all the transactions
    int sum = 0;
    while (!positives.empty() || !negatives.empty()) {
        // find the largest positive transaction that can be added without exceeding the max
        bool positiveFound = false;

        for (int i = (int)positives.size()-1; i >= 0; i--) {
            int n = positives[i];
            if ((sum + n) <= max) {
                sum += n;
                results.push_back(n);
                positives.erase(positives.begin()+i);
                positiveFound = true;
                break;
            }
        }

        if (positiveFound == true) {
            continue;
        }

        // if there is no positive find the smallest negative transaction that keep the sum above 0
        bool negativeFound = false;
        for (int i = (int)negatives.size()-1; i >= 0; i--) {
            int n = negatives[i];
            if ((sum + n) >= 0) {
                sum += n;
                results.push_back(n);
                negatives.erase(negatives.begin()+i);
                negativeFound = true;
                break;
            }
        }

        // if there is neither then this as far as we can go without splitting the transactions
        if (!negativeFound) {
            return results;
        }
    }

    return results;
}

int main(int argc, const char * argv[]) {

    vector<int> quantities;
    quantities.push_back(-304);
    quantities.push_back(-154);
    quantities.push_back(-491);
    quantities.push_back(-132);
    quantities.push_back(276);
    quantities.push_back(-393);
    quantities.push_back(136);
    quantities.push_back(172);
    quantities.push_back(589);
    quantities.push_back(-131);
    quantities.push_back(-331);
    quantities.push_back(-142);
    quantities.push_back(321);
    quantities.push_back(705);
    quantities.push_back(210);
    quantities.push_back(731);
    quantities.push_back(92);
    quantities.push_back(-90);

    vector<int> results = orderTransactions(quantities);

    if (results.size() != quantities.size()) {
        cout << "ERROR: Couldn't find a complete ordering for the transactions. This is as far as we got:" << endl;
    }

    for (int i = 0; i < results.size(); i++) {
        cout << results[i] << endl;
    }

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T13:21:08.007

我认为你想要在这里做的是：

1.  过滤掉任何总是失败的值
2.  按最小绝对值对交易进行排序 - 较小的交易意味着我们可以在达到限制之前做更多的事情
3.  继续处理阳性，直到下一个会导致我们超过限制
4.  继续处理底片，直到我们用完底片，或者下一个底片会让我们低于 0 美元
5.  重复 3-4

我没有测试过下面的代码，但它应该是正确的形状：

```
var validValues = values
    .Where(v => Math.Abs(v) < upperLimit) //filter out anything that will always fail
    .OrderBy(v => Math.Abs(v)); //sort by the absolute value (to maximise # of transactions)

var additions              = validValues.Where(v => v >= 0);
var subtractionsEnumerator = validValues.Where(v => v < 0).GetEnumerator();
var currentTotal           = 0.0;

//go through all of the additions
foreach (var addition in additions)
{
    if (currentTotal + addition > upperLimit) //would the next addition take us over the limit?
    {
        //keep processing negative values until the next one would take us past $0
        while (subtractionsEnumerator.MoveNext() && currentTotal + subtractionsEnumerator.Current > 0)
        {
            currentTotal += subtractionsEnumerator.Current;
        }
    }

    if (currentTotal + addition > upperLimit) //if we weren't able to reduce by enough
        throw new Exception("Can't process transactions");

    currentTotal += addition;
}

//do we have any left over negatives?  better process those as well
while (subtractionsEnumerator.MoveNext())
{
    if (currentTotal + subtractionsEnumerator.Current < 0)
        throw new Exception("Can't process transactions");

    currentTotal += subtractionsEnumerator.Current;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T13:22:18.820

如果您想尽量减少“违反”规则的次数（低于 0$ 或超过 max$），我认为以下方法可以解决问题：

*   在负数和正数之间拆分值

**循环**：

*   选择**正值的子集，**使**总和最大化**但仍**小于*max***，添加这些资源
*   选择**负值的子集，****使其绝对值**的总和最大化但仍**小于您当前的余额**，减去这些资源

显然，在某些时候，您会发现您正在搜索的子集不存在，因此您必须打破规则才能继续。

请注意，当您选择子集时，按顺序排序和选择较小值的贪婪方法将不起作用。

**编辑：**如果您可以拆分过渡，那就更容易了。继续循环。当您找不到下一个子集时，将最大值分成几部分并继续搜索。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-02T14:30:35.373

您可以尝试的算法。

实现很脏，分配了许多列表，结果顺序相反。当然，在大名单上它真的很慢。

```
static List<int> GetDeepestPossibility(List<int> values, int sum = 0)
{
  List<int> deepest = new List<int>();
  for (int i = 0; i < values.Count; i++)
  {
    if (Allowed(values[i] + sum))
    {
      List<int> subValues = new List<int>(values);
      subValues.RemoveAt(i);
      List<int> possibility = GetDeepestPossibility(subValues, values[i] + sum);
      possibility.Add(values[i]);
      if (possibility.Count + 1 > deepest.Count)
      {
        possibility.Add(values[i]);
        deepest = possibility;
        if (deepest.Count == values.Count - 1)
          break;
      }
    }
  }
  return deepest;
}

private static bool Allowed(int p)
{
  return p >= 0 && p <= 600;
} 
```

如果您可以拆分交易，则在您被阻止时采用托尼算法并拆分交易。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-02T14:35:09.470

我认为这是一个相当困难但有趣的问题！

搜索每个排列是不可行的，因为有 n! 排序列表的方式。

一种方法可能是尝试找到不会超过总限制的正值的最佳拟合。这个问题类似于[背包](http://en.wikipedia.org/wiki/Knapsack_problem)问题。然后，您可以再次使用相同的技术来寻找不会使您低于零的负片的最佳拟合。重复直到添加所有值。

# ruby-on-rails - 编辑设计失败的注册路径 - Rails

> ID：11777812
> 
> 赞同：4
> 
> 时间：2012-08-02T12:51:04.320
> 
> 标签：ruby-on-rails, devise, routes, registration

我一直在寻找有关如何在注册失败后编辑注册路径的文档。

我的网站索引页面上有我的注册表单。在注册失败时，它会重定向到 new_user_registration_path 而不是用户所在的根目录。我该如何更新这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-05T23:38:39.417

我已经能够通过使用 customfailure 应用程序为注册表单实现这一点

```
class CustomFailure < Devise::FailureApp
  def redirect_url
    if warden_options[:scope] == :user
      new_user_registration_path
    else
      new_user_registration_path
    end
  end
  def respond
    if http_auth?
      http_auth
    else
      redirect
    end
  end

  def redirect
    store_location!
    flash[:alert] = i18n_message unless flash[:notice]
    redirect_to '/'
  end
end 
```

当然，类似的选项是可能的，不需要覆盖设计注册控制器？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T16:14:39.037

[您可以从此处](https://github.com/plataformatec/devise/blob/master/app/controllers/devise/registrations_controller.rb)复制设计注册控制器

您应该能够添加如下内容：

```
if resource.save
    #handle this 
else 
    #handle this
    redirect_to new_user_registration_path
end 
```

然后在您的路线中：

```
 devise_for :users, :controllers => {:registrations => 'registrations'} 
```

我不确定如何在不覆盖控制器的情况下执行此操作

# mysql - SQL 数据库中数据修订控制的最佳实践

> ID：11777820
> 
> 赞同：4
> 
> 时间：2012-08-02T12:51:38.843
> 
> 标签：mysql, sql, postgresql

我的整个数据库偶尔会有错误的条目，但我不想直接更改数据，而是希望能够保持对更改的修订。

这些变化很少发生。

理想情况下是这样的： -

```
 (original table fields) | revision_version | origin | user | timestamp 
```

假设我有一个名为**posts**的表，其架构如下：-

```
title | description | timestamp | author 
```

因此将创建一个名为**posts_revisions**的附加表：-

```
title | description | timestamp | author | revision_version | origin | user | timestamp 
```

*   **origin**是变化的来源，无论是机器人、用户生成的还是您拥有的。

正如您可以想象的那样，这是对现有数据库的一个相当大的更改，我目前关心的是检查每个查询的 _revisions 表的性能损失。这是这类事情的最佳实践吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T13:52:28.943

对于这类问题，我保留了一个当前表和一个历史表。

历史记录表具有以下附加列：

*   历史ID
*   生效日期
*   结束日期
*   版本号
*   由...制作
*   创建时间

生效日期和结束日期是值有效的时间跨度。每次记录发生更改时，版本都会增加。id、CreatedAt 和 CreatedBy 是我放入数据库中几乎每个表的列。

通常，我使用夜间作业保持历史记录表是最新的，这些作业比较表，然后使用 MERGE 合并数据。另一种方法是将所有更改包装在存储过程中，并在那里更新两个表。另一种选择是使用触发器，它检测何时发生更改。但是，我回避触发器，更喜欢前两种选择。

我必须承认，磁盘空间对于这些表来说并不是一个重要的考虑因素。因此，将数据存储两次是没有问题的，一次在结果中，一次在历史中。只在历史表中存储历史，而当前记录在“当前”表中，这只是一个小调整。

这种方法的一个缺点是改变了基表的结构。如果要添加列，则需要将其添加到历史表和基表中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T12:57:46.443

如果这些表用于汇总目的（尤其是业务用户，如果他们有一些 SQL 访问权限），我认为最好删除数据并将其放入另一个表中。虽然标志和修订有时很好，但当你必须按照那样做一些事情时，`select sum(select someVar where revision_version=max(revision_version and someID=ID))`它真的变得非常简单。

如果您有一个用于快速和讨厌的数据收集的表，请替换数据，如果需要，将旧数据放入修订表中。如果只有某些应用程序可以访问它*并且它不是性能问题*，那么请将其保留在主表中。

# php - 遇到撇号时工具提示被破坏

> ID：11777821
> 
> 赞同：0
> 
> 时间：2012-08-02T12:51:40.250
> 
> 标签：php, mysql, html, tags

我想显示`link`图像，它们的`title`属性来自 MySQL 数据库：

```
for ($i=0; $i<$ret['cnt']; $i++)
{
    $html .= "<td width='15'><a href='" . HTTP_MAIN . $ret[$i]['menu_url'] . "?action=".$ret[$i]['menu_action']."'><img src='" . HTTP_ICONES . $ret[$i]["menu_icone_img"] . "' title='".$ret[$i]["menu_icone_title"] . "' width='12' height='12'></a></td>";
} 
```

如您所见，title 属性来自 $ret[$i]["menu_icone_title"]。这是查询：

```
$sSQL = "SELECT menu_icone_img, menu_icone_title, menu_url, menu_action
                FROM menu 
                WHERE menu_icone_flag = 1
                ORDER BY menu_icone_ordre";

        $this->db->query($sSQL) ;
        $ret['cnt'] = $this->db->num_rows();
        $i = 0;
        while ( $this->db->next_record() ) {
            $ret[$i]["menu_icone_img"]  = stripslashes($this->db->f('menu_icone_img'));
            $ret[$i]["menu_icone_title"] = stripslashes($this->db->f('menu_icone_title'));
            $ret[$i]["menu_url"]    = stripslashes($this->db->f('menu_url'));
            $ret[$i]["menu_action"] = stripslashes($this->db->f('menu_action'));
            $i++;
        } 
```

问题是当“menu_icone_title”列里面有撇号时，比如`Initialisation des niveaux d'activités`

所以在运行时工具提示被破坏了：`Initialisation des niveaux d`。

那么如何显示所有的文本呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T12:55:23.570

只需更换：

```
$ret[$i]["menu_icone_title"] 
```

经过

```
str_replace("'","\\'",$ret[$i]["menu_icone_title"]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T13:03:29.390

HTML 真的应该在任何 PHP 之外。例如

```
<?php 
function cleantext ($string) {
  return htmlentities($string);
}

for ($i=0; $i<$ret['cnt']; $i++)
{
    ?>
    <td width="15">
       <a href="<?php echo HTTP_MAIN . cleantext($ret[$i]['menu_url']); ?>?action=<?php echo $ret[$i]['menu_action'];?>">
         <img src="<?php echo HTTP_ICONES . cleantext($ret[$i]["menu_icone_img"]); ?>" title="<?php echo cleantext($ret[$i]["menu_icone_title"]); ?>" width="12" height="12" />
       </a>
    </td>
  <?php
}
?> 
```

它使您的代码更具可读性/更易于维护。

我还在任何输出周围添加了一个功能，它将为您清理输出。目前，这个函数所做的只是对字符串执行[htmlentites](http://uk3.php.net/manual/en/function.htmlentities.php)，但如果/需要时，您可以轻松扩展它。

# c# - 使用 C# 在 Metro 应用程序中设置文件夹权限

> ID：11777825
> 
> 赞同：1
> 
> 时间：2012-08-02T12:51:56.277
> 
> 标签：c#, xaml, windows-8, windows-runtime

我正在使用 Windows 8 发布预览版和 C#(VS 2012) 开发 Metro 应用程序，我坚持异步创建文件。我正在使用以下代码在文件夹中创建文件

```
StorageFolder storageFolder = await Windows.ApplicationModel.Package.Current.InstalledLocation.GetFolderAsync("Data");            
StorageFile File= await storageFolder.CreateFileAsync("DataFile",CreationCollisionOption.ReplaceExisting); 
await Windows.Storage.FileIO.WriteTextAsync(File, result); 
```

其中“数据”是文件夹名，“结果”是文本，“数据文件”是文件名，但我`UnAuthorisedAccessException`在这一行得到了

```
 StorageFile File= await storageFolder.CreateFileAsync("DataFile",CreationCollisionOption.ReplaceExisting); 
```

我知道我的文件夹“数据”是只读的，但是如何将文件夹属性更改为可写，我也尝试了`storageFolder.Attributes`属性，但它是只读属性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T19:45:54.640

您无法在 InstalledLocation 中获得写入权限。这基本上就像写入“程序文件”（它实际上是“程序文件”内的一个文件夹），据我所知，出于安全原因，它早在 Vista 就被阻止了。

您应该尝试改为写入 ApplicationData.Current.LocalFolder。

# eclipse - eclipse 把文件夹变成包

> ID：11777826
> 
> 赞同：2
> 
> 时间：2012-08-02T12:52:01.547
> 
> 标签：eclipse, eclipse-juno

我的 Eclipse IDE 突然把我所有的文件夹都改成了包名。

通常我的来源是：

```
ProjectDir >
  src >
    com.domain.projectname 
```

通常它在 Eclipse 资源管理器窗口中看起来像这样。但现在它看起来像这样：

```
ProjectDir >
    src.com.domain.projectname 
```

所以它再也找不到我的代码文件和资源文件了，因为所有文件夹都被添加到包名中......我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T13:07:14.093

单击项目并选择配置编译器构建路径。从源文件夹选项卡确保 src 文件夹是源文件夹（听起来不是）。

# java - -Java- TCP 中的数据“丢失”（奇怪，因为 TCP 不允许数据逃逸）

> ID：11777828
> 
> 赞同：1
> 
> 时间：2012-08-02T12:52:10.490
> 
> 标签：java, file, tcp, stream, transmission

首先，我知道这里已经有几篇关于类似问题的帖子，但我已经浏览过它们，他们的问题不是我的问题，他们的解决方案也不能解决我的问题。如果有人有解决我问题的帖子，请回复链接，我会去的。

现在，问题 - 我有一个客户端和一个服务器。客户端请求一个文件，服务器发送它，然后客户端接收它，或者至少它应该是这样的。但事实并非如此。相反会发生什么？客户端接收前 1024 个字节，然后是接下来的 1024 个字节，然后接收 436 个字节（我总是使用同一个文件，所以我总是得到相同的结果）并结束，因为它收到的字节数少于 1024 个字节，因此它有减去它必须执行的最后一次读取，但不应该如此，因为服务器在从其 FileInputStream 读取文件时，读取了更多字节（更多的 1024 字节）。我已经尝试了我想象的一切，但没有得到积极的结果：总是，第三件，而不是被完整接收，

这是我认为的关键代码：

服务器

```
OutputStream put;
        try {
            ServerSocket serverSocket;
            try {
                serverSocket = new ServerSocket(DesktopClient.PORT_FOR_FILES);
            } catch (IOException ex) {
                JOptionPane.showMessageDialog(null, ex.toString(), "Error", JOptionPane.ERROR_MESSAGE);
                return false;
            }
            Socket socket;
            try {
                socket = serverSocket.accept();
                ActionWindow.println("Connection for files transference stablished - " + socket);
            } catch (Exception ex) {
                JOptionPane.showMessageDialog(null, ex.toString(), "Error", JOptionPane.ERROR_MESSAGE);
                return false;
            }
            put = socket.getOutputStream();
            BufferedReader requestedVideoBufferedReader = new BufferedReader(new InputStreamReader(socket.getInputStream()));
            String requiredVideo = requestedVideoBufferedReader.readLine();
            while (!requiredVideo.matches("finish") && !requiredVideo.matches("errored")) {
                ActionWindow.println("The screen in the router " + ActionWindow.currentConn + " is asking for " + requiredVideo);
                if (new File(ActionWindow.pathToVideosFolder + requiredVideo + ActionWindow.videoFilesExtension).exists()) {
                    try (InputStream in = new FileInputStream(ActionWindow.pathToVideosFolder + requiredVideo + ActionWindow.videoFilesExtension)) {
                        byte[] buf = new byte[1024];
                        int len;
                        System.out.println("About to write");
                        while (true) {
                            len = in.read(buf);
                            System.out.println("len: " + len);
                            if (len > 0) {
                                put.write(buf, 0, len);
                            } else {
                                break;
                            }
                        }
                    }
                    ActionWindow.println("File " + requiredVideo + ActionWindow.videoFilesExtension + " sent.");
                } else {
                    ActionWindow.println("File " + requiredVideo + ActionWindow.videoFilesExtension + " couldn't be found in the local index.");
                    put.close();
                    socket.close();
                    serverSocket.close();
                    return false;
                }
                requiredVideo = requestedVideoBufferedReader.readLine();
            }
            if (requiredVideo.matches("errored")) {
                JOptionPane.showMessageDialog(null, "Se produjo un error en la transmisión de archivos. Los datos del servidor no han sido modificados.", "Error", JOptionPane.ERROR_MESSAGE);
            }
            put.close();
            socket.close();
            serverSocket.close();
            ActionWindow.println("Connecion finished.");
        } catch (IOException ex) {
            if (!(ex instanceof SocketException)) { //This means that the exception has not been caused by finishing the transference.
                JOptionPane.showMessageDialog(null, ex.toString(), "Error", JOptionPane.ERROR_MESSAGE);
                return false;
            } else {
                return true;
            }
        }
        return true; 
```

客户

```
fileRequester.println(x);
            ServerDaemon.println("Requested " + x);
            File destFile = new File(ServerDaemon.pathToVideosFolder + x + ServerDaemon.videoFilesExtension);
            byte[] buf = new byte[1024];
            OutputStream streamForWritingToFile;
            try {
                streamForWritingToFile = new FileOutputStream(destFile);
            } catch (FileNotFoundException ex) {
                ServerDaemon.println(ex.toString());
                return false;
            }
            int len;
            try {
                while (true) {
                    len = streamFromServer.read(buf);

                    if (len > 0) {
                        streamForWritingToFile.write(buf, 0, len);
                    } else {
                        break;
                    }

                    if (len != 1024) {
                        break;
                    }
                }
            } catch (IOException ex) {
                ServerDaemon.println(ex.toString());
                if (ex instanceof SocketException) {
                    ServerDaemon.disconnect();
                }
                return false;
            }

            ServerDaemon.println("Received file " + x); 
```

编辑：作为一种临时解决方案，我通过 UDP 发送文件大小，以便接收者知道它必须等待多少数据。但是，最好让它通过 TCP 工作，但它不起作用（看看@PeterLawrey 的回答中的评论）。这是我为了使其通过 TCP 工作而尝试过的：

接收者：

```
BufferedReader inFromClient;
int fileSize;
String receivedSizeMsg = null;
try {
      inFromClient = new BufferedReader(new InputStreamReader(socket.getInputStream()));
      receivedSizeMsg = inFromClient.readLine();
    } catch (IOException ex) {
      ServerDaemon.println(ex.toString());
    }
fileSize = Integer.parseInt(receivedSizeMsg.substring(4)); 
```

发件人：

```
DataOutputStream outToServer;
outToServer = new DataOutputStream(socket.getOutputStream());
outToServer.writeBytes("size" + new File(file+"\n"); 
```

第二次编辑：使用 TCP：

接收者：

```
DataInputStream inFromClient;
int fileSize = 0;
inFromClient = new DataInputStream(socket.getInputStream());
fileSize = Integer.parseInt(inFromClient.readUTF().substring(4)); 
```

发件人：

```
DataOutputStream outToServer;
outToServer = new DataOutputStream(socket.getOutputStream());
outToServer.writeUTF("size" + new File(ActionWindow.pathToVideosFolder + requiredVideo + ActionWindow.videoFilesExtension).length()); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T12:57:47.937

你这里有问题。

```
 if (len != 1024) {
                    break;
                } 
```

这假设数据将以与发送时相同的长度到达，这是不正确的。阻塞的 read() 只保证读取一个字节。把它从你的代码中拿出来，它现在就可以工作了。

例如，TCP 通常将数据组合成大约 1500 字节的数据包。当您读取数据时，您可以比发送数据更快地读取它，因此您可能希望读取一个 1024 字节的块，然后是 476 字节（减去任何 TCP 标头）

* * *

编辑：一个简单的发送文件和接收文件方法。

```
public static void sendFile(DataOutputStream out, String fileName) throws IOException {
    FileInputStream fis = new FileInputStream(fileName);
    try {
        byte[] bytes = new byte[8192];
        int len;
        out.writeInt((int) fis.getChannel().size());
        while ((len = fis.read(bytes)) > 0)
            out.write(bytes, 0, len);
    } finally {
        fis.close();
    }
}

public static void recvFile(DataInputStream in, String fileName) throws IOException {
    FileOutputStream fos = new FileOutputStream(fileName);
    try {
        byte[] bytes = new byte[8192];
        int left = in.readInt();
        int len;
        while(left > 0 && (len = in.read(bytes, 0, Math.min(left, bytes.length))) > 0) {
            fos.write(bytes, 0, len);
            left -= len;
        }
    } finally {
        fos.close();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T13:42:50.293

其他人已经给了你答案，基本上，你不能保证在单个数据包中获取数据。在网络中，配置（tcp_nodelay）、数据包大小等变量太多了，最好还是做防御性编程。

建立一个小协议。发送一个 15 字节的标题，其中包含文件的大小，可能还有校验和。任何连接的客户端都必须发送那个 15 字节的标头。然后你的服务器可以坐在一个循环中等待数据。如果您在 N 秒内没有获得更多数据，您甚至可以轮询套接字（选择）并超时。

最后，可以使用校验和来查看文件是否传输成功。

[Java World](http://www.javaworld.com/jw-04-2003/jw-0411-select.html?page=1)有一篇关于如何在不阻塞的情况下检查套接字的文章，但如果您只是做家庭作业或其他小事，那可能不值得。

# gwt - 从 GWT 调用 servlet 并使用 servlet 生成的 post 数据和下载文件

> ID：11777832
> 
> 赞同：9
> 
> 时间：2012-08-02T12:52:30.067
> 
> 标签：gwt, servlets, post, download

我有我的 ExportServlet，它正在生成 XLSX 文件 (Excel)，我的用户将通过单击导出按钮从我的 GWT 应用程序中请求这些文件。

如果我使用 GET 方法，则会提示用户下载文件。代码如下所示：

```
@Override
protected void doGet(HttpServletRequest req, HttpServletResponse resp)
        throws ServletException, IOException
{
    try
    {
        byte[] xlsx = createTest("");
        sendXLSX(resp, xlsx, "test.xlsx");
    }
    catch (Exception e)
    {
        e.printStackTrace();
    }
 }

void sendXLSX(HttpServletResponse response, byte[] bytes, String name)
        throws IOException
{
    ServletOutputStream stream = null;

    stream = response.getOutputStream();
    response.setContentType(CONTENT_TYPE_XLSX);
    response.addHeader("Content-Type", CONTENT_TYPE_XLSX);
    response.addHeader("Content-Disposition", "inline; filename=" + name);
    response.setContentLength((int) bytes.length);
    stream.write(bytes);
    stream.close();
} 
```

这由 GWT 客户端以下列方式调用：

```
String url = GWT.getModuleBaseURL() + "ExportServlet";
Window.open(url, "", ""); 
```

并提示用户下载文件。很好，这就是我想要的:)

但是我想在请求中附加很多数据，而且 afaik，你可以在 URL 参数中放入多少数据是有限制的（“ExportServlet?data=...”），所以我想换行而是在 POST 请求中。

我从 GWT 尝试了以下方法：

```
String url = GWT.getModuleBaseURL() + "ExportServlet";
RequestBuilder builder = new RequestBuilder(
                            RequestBuilder.POST, url);
Request response = builder.sendRequest("test data", new RequestCallback() 
{
    @Override
    public void onResponseReceived(Request request, Response response)
    {
        System.out.println("");
    }

    @Override
    public void onError(Request request, Throwable exception)
    {
        System.out.println("");
    }
}); 
```

这在我的servlet中：

```
@Override
protected void doPost(HttpServletRequest req, HttpServletResponse resp)
        throws ServletException, IOException
{
    try
    {
        String data = req.getReader().readLine();
        byte[] xlsx = createTest(data);
        sendXLSX(resp, xlsx, "test.xlsx");
    }
    catch (Exception e)
    {
        e.printStackTrace();
    }
} 
```

但不会提示用户下载文件。调用 doPost 方法并由 servlet 接收数据，但我应该从 GWT 应用程序中收到的响应中提取 XLSX 文件吗？我该怎么做呢？

感谢任何帮助或评论:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-03T19:44:47.107

好的，所以我在链接的 SO 问题中采用了第三种方法。

创建一个 FormPanel，将您的数据放在隐藏字段中，将 URL 设置为您的 servlet，在表单上以编程方式调用提交方法，此 SO 问题中描述的问题将得到解决。

**有关如何从隐藏字段中提取数据的详细信息：**

所以我的 doPost 看起来与此类似：

```
@Override
protected void doPost(HttpServletRequest req, HttpServletResponse resp) { 
    ServletFileUpload upload = new ServletFileUpload();
    FileItemIterator iterator = upload.getItemIterator(req);

    while (iterator.hasNext()) {
        FileItemStream item = iterator.next();
        if (item.isFormField()) {
            String name = item.getFieldName();
            if (name.equalsIgnoreCase("fieldName")) {
                data = Streams.asString(item.openStream(), ENCODING_UTF8);
            }
        }
    }
    ... 
```

我的表单中有一个名为“fieldName”的隐藏字段，数据被放置并提交给servlet。希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-05T08:28:50.997

嗨我有同样的问题，并通过使用直接调用servlet来解决它 `Window.Location.replace(URL.encode(servletUrl));`

检查此链接以及[相关问题](https://stackoverflow.com/questions/7282987/handle-attachment-in-response-with-requestbuilder-in-gwt/7283853#7283853)

# nhibernate - NHibernate - CreateSqlQuery 只返回一行

> ID：11777834
> 
> 赞同：0
> 
> 时间：2012-08-02T12:52:34.413
> 
> 标签：nhibernate

我是 nhibernate 的新手......我创建了一个 SQL 查询（命中一个 Oracle 数据库），它返回这样的自定义结果集......

![在此处输入图像描述](../Images/69b7f1b618c710ac72559153a755fd71.png)

我尝试将这些结果映射到这样的自定义对象中......（这个对象不是持久对象并且不包含休眠映射文件） ![在此处输入图像描述](../Images/dffd1f19843713cc85bb7a479b027c05.png)

问题是当我在 Oracle 数据库中执行这个 sql 查询时，它给了我所有 4 条记录，但是如果我从代码中执行它，我只得到一条记录（结果只有一项）。

我在这里做错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T13:02:41.210

在 NHibernate 中启用 sql 日志记录并检查实际正在执行的问题。

尝试[设置投影](http://www.junasoftware.com/blog/nhibernate-setresulttransformer-and-dto.aspx)，以便转换器知道如何映射数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T16:29:13.167

它是您的 Id 列，缺少它！NHibernate 无法计算出您的`ResultSet`. 因此，NHibernate 只填充一级缓存一次，因为它认为所有四行都是重复的。

你有两个选择：-

1.  在您看来，返回一个唯一 ID，这是一个唯一 ID，尽管根据您的架构判断，这看起来不可能，**或者**

2.  您需要在视图地图类中覆盖 equals 和 GetHashCode，请参阅此博客[在此处输入链接描述](http://devlicio.us/blogs/anne_epstein/archive/2009/11/20/nhibernate-and-composite-keys.aspx)以获取更多信息。

# jquery - Datepicker 默认为本周日

> ID：11777837
> 
> 赞同：1
> 
> 时间：2012-08-02T12:52:52.133
> 
> 标签：jquery, jquery-ui, datepicker

我正在尝试自定义此脚本，以便以格式`onclick` `#startdatepicker`显示本周日的日期并显示下一个星期六。默认日期。`yy-mm-dd``#enddatepicker`

```
<script type="text/javascript">
    $(document).ready(function() {
        $("#startdatepicker").datepicker({
            dateFormat: 'yy-mm-dd'
        });
        $("#enddatepicker").datepicker({
            dateFormat: 'yy-mm-dd',
        });
    });
</script> 
```

```
Start Date: <input type="text" id="startdatepicker"/><br />
End Date: <input type="text" id="enddatepicker"/><br />` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T13:07:17.847

您可以使用[defaultDate](http://jqueryui.com/demos/datepicker/#option-defaultDate)选项来指定日期选择器在打开时显示的日期，并且`<input>`' 的值为空白。您需要做的就是获取代表相关日期的 Date 对象或字符串，并在初始化元素上的日期选择器时传递它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T13:10:43.667

您可以使用选择器设置默认值。

```
<script type="text/javascript">
    $(document).ready(function() {
        $("#startdatepicker").datepicker({
            dateFormat: 'yy-mm-dd',
            defaultDate: '12-08-05',
        });
        $("#enddatepicker").datepicker({
            dateFormat: 'yy-mm-dd',
            defaultDate: '12-08-12',
        });
    });
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T13:12:41.837

MDN 有很好的文档[`Date()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date)，你可以用它[`getDay()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/getDay)来找出你需要多少天才能到达这个星期天和下星期六。

[http://jsfiddle.net/VesQ/ZdmCE/](http://jsfiddle.net/VesQ/ZdmCE/)

```
$(document).ready(function() {
    // Get current date
    var now = new Date();
    // Get the day, 0 is Sunday and 6 is Saturday
    var day = now.getDay();

    // How many days to this sunday
    var daysToSunday;
    if (day == 0) {
        // Sunday is now
        daysToSunday = 0;
    } else {
        daysToSunday = 7 - day;
    }

    // Days to next saturday is simple:
    var daysToNextSaturday = daysToSunday + 6;

    // See defaultDate option,
    // http://jqueryui.com/demos/datepicker/#option-defaultDate
    $("#startdatepicker").datepicker({
        dateFormat: 'yy-mm-dd',
        defaultDate: daysToSunday
    });
    $("#enddatepicker").datepicker({
        dateFormat: 'yy-mm-dd',
        defaultDate: daysToNextSaturday
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T13:24:45.490

如果您总是希望 datePicker 默认为下周日（不管今天的日期），请尝试：

```
$(function() {
    var sunday = new Date(),               // new Date object for current day
        dow = sunday.getDay(),             // day of week (0-6)
        toAdd = dow === 0 ? 0 : 7 - dow;   // days to move forward

    $( "#startpicker" ).datepicker({
        dateFormat: 'yy-mm-dd',
        defaultDate: toAdd
    });

    $( '#endpicker' ).datepicker({
        dateFormat: 'yy-mm-dd',
        defaultDate: toAdd+6
    });
});​ 
```

同样可以找到下一个星期六，只需再增加 6 天。

[http://jsfiddle.net/dYEMn/3](http://jsfiddle.net/dYEMn/3)

# java - java .matches() 不匹配

> ID：11777839
> 
> 赞同：1
> 
> 时间：2012-08-02T12:52:55.970
> 
> 标签：java, regex

我有以下一段代码：

```
String myString;
boolean myResult;

myString = "First\nSecond\nThird\nFourth";
myResult = myString.matches("First.*");
myResult = myString.matches(".*First.*");
myResult = myString.matches(".*Second.*");
myResult = myString.matches("First\nSecond\nThird\nFourth"); 
```

最后一个返回true，其余的都是false...

我虽然所有上述表达式都会返回 true。我还需要找到以“First”开头的字符串，我认为第一个 .matches() 会覆盖它，但事实并非如此。它应该是什么样子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T12:55:01.923

.* 可能不匹配 \n

将最后一个匹配模式中的一个 \n 替换为 . 看看会发生什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T13:00:11.303

默认情况下，点不匹配行尾字符，但如果您在正则表达式字符串前面加上 (?s)，那么它将**匹配**它们。这将启用[DOTALL](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/regex/Pattern.html#DOTALL)匹配标志。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T13:06:29.937

您可以尝试从字面上指定 \n\r ：

```
myResult = myString.matches("First(.|[\n\r])*") 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-02T12:57:48.957

请参阅[文档](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html)：

> . 任何字符（可能匹配也可能不匹配行终止符）

# java - java.lang.ClassNotFoundException: com.sun.faces.config.ConfigureListener 将 MyFaces 与 WASCE/Geronimo 一起使用时

> ID：11777844
> 
> 赞同：22
> 
> 时间：2012-08-02T12:53:05.483
> 
> 标签：java, jsf, myfaces, geronimo, websphere-ce

我正在尝试使用 MyFaces v 2.1 与 WebSphere Application Server Community Edition v3.0.0.1 和 Eclipse Juno 创建一个简单的 JSF Web 应用程序，但是当我尝试运行该应用程序时，返回以下错误

```
 java.lang.ClassNotFoundException: com.sun.faces.config.ConfigureListener
org.apache.geronimo.common.DeploymentException: java.lang.ClassNotFoundException: com.sun.faces.config.ConfigureListener
    at org.apache.geronimo.web25.deployment.AbstractWebModuleBuilder.createWebAppClassFinder(AbstractWebModuleBuilder.java:665)
    at org.apache.geronimo.web25.deployment.AbstractWebModuleBuilder.configureBasicWebModuleAttributes(AbstractWebModuleBuilder.java:698)
    at org.apache.geronimo.tomcat.deployment.TomcatModuleBuilder.addGBeans(TomcatModuleBuilder.java:469)
    at org.apache.geronimo.j2ee.deployment.SwitchingModuleBuilder.addGBeans(SwitchingModuleBuilder.java:174)
    at org.apache.geronimo.j2ee.deployment.EARConfigBuilder.buildConfiguration(EARConfigBuilder.java:764)
    at org.apache.geronimo.deployment.Deployer.deploy(Deployer.java:255)
    at org.apache.geronimo.deployment.Deployer.deploy(Deployer.java:140)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:60)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)
    at java.lang.reflect.Method.invoke(Method.java:611)
    at org.apache.geronimo.gbean.runtime.ReflectionMethodInvoker.invoke(ReflectionMethodInvoker.java:34)
    at org.apache.geronimo.gbean.runtime.GBeanOperation.invoke(GBeanOperation.java:131)
    at org.apache.geronimo.gbean.runtime.GBeanInstance.invoke(GBeanInstance.java:883)
    at org.apache.geronimo.kernel.basic.BasicKernel.invoke(BasicKernel.java:245)
    at org.apache.geronimo.kernel.KernelGBean.invoke(KernelGBean.java:344)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:60)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)
    at java.lang.reflect.Method.invoke(Method.java:611)
    at org.apache.geronimo.gbean.runtime.ReflectionMethodInvoker.invoke(ReflectionMethodInvoker.java:34)
    at org.apache.geronimo.gbean.runtime.GBeanOperation.invoke(GBeanOperation.java:131)
    at org.apache.geronimo.gbean.runtime.GBeanInstance.invoke(GBeanInstance.java:883)
    at org.apache.geronimo.kernel.basic.BasicKernel.invoke(BasicKernel.java:245)
    at org.apache.geronimo.system.jmx.MBeanGBeanBridge.invoke(MBeanGBeanBridge.java:172)
    at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:848)
    at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:773)
    at javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1438)
    at javax.management.remote.rmi.RMIConnectionImpl.access$200(RMIConnectionImpl.java:83)
    at javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1276)
    at java.security.AccessController.doPrivileged(AccessController.java:284)
    at javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1378)
    at javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:799)
    at sun.reflect.GeneratedMethodAccessor73.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)
    at java.lang.reflect.Method.invoke(Method.java:611)
    at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:322)
    at sun.rmi.transport.Transport$1.run(Transport.java:171)
    at java.security.AccessController.doPrivileged(AccessController.java:284)
    at sun.rmi.transport.Transport.serviceCall(Transport.java:167)
    at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:547)
    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:802)
    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:661)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:897)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:919)
    at java.lang.Thread.run(Thread.java:736)
Caused by: java.lang.ClassNotFoundException: com.sun.faces.config.ConfigureListener
    at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:513)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:429)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:417)
    at org.apache.geronimo.hook.equinox.GeronimoClassLoader.loadClass(GeronimoClassLoader.java:85)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:626)
    at org.eclipse.osgi.internal.loader.BundleLoader.loadClass(BundleLoader.java:345)
    at org.eclipse.osgi.framework.internal.core.BundleHost.loadClass(BundleHost.java:229)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.loadClass(AbstractBundle.java:1207)
    at org.apache.geronimo.web25.deployment.AbstractWebModuleBuilder.addClass(AbstractWebModuleBuilder.java:670)
    at org.apache.geronimo.web25.deployment.AbstractWebModuleBuilder.createWebAppClassFinder(AbstractWebModuleBuilder.java:661)
    ... 45 more 
```

大概是因为 MyFaces jar 文件不在类路径中而发生错误，但是我无法弄清楚我哪里出错了，因为 Eclipse 中的构建路径包含所需的 jar。我也尝试将 jar 文件复制到 WEB-INF/lib 目录中，但无济于事。

下面的屏幕截图显示了项目结构以及库。

![Eclipse 项目结构](../Images/1af4fb5e69a33f5d0bac1dc3c6d031ab.png)

我需要在 Eclipse 或 WASCE 中做些什么来包含 jar 文件，还是问题出在其他地方？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-08-02T13:08:41.613

```
Caused by: java.lang.ClassNotFoundException: com.sun.faces.config.ConfigureListener 
```

缺失的类是[Mojarra](http://javaserverfaces.java.net)的一部分，它实际上是[MyFaces](http://myfaces.apache.org)的竞争对手。

使用 MyFaces 时，您根本不需要该类。此异常可能有以下可能原因：

*   `<listener>`在 webapp`web.xml`或`web-fragment.xml`任何部署的 JAR 中有一个手动定义的条目，`/WEB-INF/lib`其中引用了这个特定于 Mojarra 的侦听器类。

*   类路径中有一个松散的 Mojarra`.tld`文件（不太可能，谁会提取 JAR 文件并将其松散的内容放在类路径中？）。TLD 文件会自动初始化，并且可以包含一个`<listener>`可以触发`ServletContextListener`实现自动注册的条目（例如 Mojarra `ConfigureListener`）。

这些冲突可以通过删除它来解决。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-05T10:08:29.210

我在 Jetty 服务器中部署了一个带有 Myfaces 的 Web 应用程序，并且有必要使用一个监听器和一个额外的 init 参数来使用 facelets：

```
<context-param>
    <param-name>org.apache.myfaces.FACES_INITIALIZER </param-name>
    <param-value>org.apache.myfaces.webapp.FaceletsInitilializer</param-value>
</context-param>
<listener>
     <listener-class>org.apache.myfaces.webapp.StartupServletContextListener</listener-class>
</listener> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-14T17:22:40.547

我使用 mojarra 实现进行编译，并依赖 apache tomcat 运行时。但是 tomcat 使用 myfaces 实现。所以必须在 WEB-INF/lib 中包含 mojarra impl jar 来解决问题

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-12-21T21:30:08.930

我遇到了同样的问题。当我尝试使用 Tomcat7 作为本地服务器使用 Eclipse 运行 .html 文件时，我在浏览器上收到 404 错误。并且在 Eclipse 的控制台中显示错误“ClassNotFoundException：com.sun.faces.config.ConfigureListener”。

问题是我在动态 Web 项目中使用的 Mojarra 库 (.jar)。我使用的是 javax.faces-2.3.0-m04.jar。

-> 解决方案：

[在 Mojarra 的存储库https://maven.java.net/content/repositories/releases/org/glassfish/javax.faces/](https://maven.java.net/content/repositories/releases/org/glassfish/javax.faces/)上下载旧版本。就我而言，我下载了 2.2.7 版本（javax.faces-2.2.7.jar）。

然后我使用 JSF v2.0 在 Eclipse 中创建了一个新的 Dynamic Web 项目，并在 library 部分分配了 javax.faces-2.2.7.jar 文件。

# testing - QuickTest Pro——部署/运行测试以在多个虚拟机上执行

> ID：11777849
> 
> 赞同：3
> 
> 时间：2012-08-02T12:53:28.093
> 
> 标签：testing, qtp

我是 QTP 的新手，所以对可能是一个愚蠢的问题表示歉意。

我正在使用 QTP 编写自动化 GUI 测试，但希望在多个测试 VM 上执行它们。

QTP 是否有某种“轻量级”代理，我可以将其推送到每个测试 VM，而不是安装完整的 QTP 产品？这些测试虚拟机会定期重建，因此每次重建时都必须经历完整 QTP 安装的痛苦，这将变得非常耗时。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T18:28:41.837

这根本不是一个愚蠢的问题，不幸的是答案是*否定*的，没有用于测试执行的轻量级 QTP 版本。

如果您想避免每次部署 VM 时都重新安装 QTP 的痛苦，我可以建议两个选项之一。

*   保存安装了 QTP 的 VM 的快照
*   将 QTP 的静默安装连接为 VM 任务，这是 VM 部署过程的一部分

# asp.net-mvc - 将自定义类添加到 mvc3（不在视图、控制器或模型文件夹中）

> ID：11777851
> 
> 赞同：0
> 
> 时间：2012-08-02T12:53:30.420
> 
> 标签：asp.net-mvc, asp.net-mvc-3-areas

我目前是 asp.net 和 mvc3 的新手。我需要添加类来连接到 system.data.sqlclient 和一些类来连接到其他 dll。我不能打电话给班级。它在 AppCode（不是 APP_CODE）中，无法从控制器、视图和模型中调用它。请有人帮我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T13:34:45.603

您是否将类的名称空间作为您的“使用”语句之一？你的课是公开的吗？

编辑：

您无法使用您的课程，因为它是“抽象”课程。您需要实现一个从您的抽象类继承的类，或者使您的类不是抽象的。

# ios - 如何在iOS系统中集成音乐播放器

> ID：11777856
> 
> 赞同：-1
> 
> 时间：2012-08-02T12:53:41.227
> 
> 标签：ios, media-player

如何在 iOS 系统中集成一个音乐应用程序，我自己的自定义播放器可以处理来自解锁屏幕的操作（播放、暂停、前进）以及如何将其集成为双击主页按钮菜单中的播放器应用程序就像这张截图 Spotify 所做的那样：![在此处输入图像描述](../Images/b6c83884024497ec882651c5eee06bf1.png)

**编辑：**应用程序本身基于[Media Player Framework](http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MediaPlayer_Framework/_index.html)，但在本文档中没有任何提示如何在此“双击主页按钮”菜单中获取自定义播放器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T13:22:19.543

如果您为远程控制事件注册您的应用程序，并且如果您开始播放音频或视频，您的应用程序将自动接管这些控件。有关详细信息，请参阅[Apple 的文档](http://developer.apple.com/library/ios/#documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/RemoteControl/RemoteControl.html)。此 API 在 iOS 4 及更高版本上可用。

要设置控件下方的字符串（屏幕截图中的“蝴蝶缺陷”），`MPNowPlayingInfoCenter`请使用 iOS 5 及更高版本上可用的字符串。

# linux - 如何使用来自主题的 gtk

> ID：11777859
> 
> 赞同：2
> 
> 时间：2012-08-02T12:54:01.837
> 
> 标签：linux, gtk, motif

我有一个在 Linux 上运行的基于主题的应用程序。最近我一直在尝试在主题应用程序中创建和启动 gtk 对话框。

但是我注意到这两个工具包不兼容。如果我将 gtk 对话框移到基于主题的应用程序上，它会使主题父窗口变灰/模糊。

有人可以告诉我如何解决这个问题，如果有人可以发布关于人们应该如何从主题应用程序中创建基于 gtk 的小部件/对话框的提示，并且可能在一段时间内完全迁移到使用 gtk，那就太好了?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-28T00:14:01.013

Motif 是一个过时的小部件工具包。另外，正如 Basile Starynkevitch 上面评论的那样，混合工具包是个坏主意。没有办法解决兼容性问题，因为它们不是兼容的小部件工具包。

# html - 如何为 Retina 和非 Retina 显示器动态设置适当的缓存清单文件？

> ID：11777860
> 
> 赞同：0
> 
> 时间：2012-08-02T12:54:08.873
> 
> 标签：html, retina-display, cache-manifest

我需要在 Retina 和非 Retina 显示器下的 UIWebView 中显示 HTML 页面。

此外，我想使用 HTML5 的缓存清单功能。但我想要两个不同的缓存清单文件，其中包含指向 Retina 和非 Retina 图像的链接。

我可以对缓存清单使用任何逻辑语句吗？或者我可以动态更改清单文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T02:45:03.247

你可以有一个 index.html，它使用一些简单的 javascript 来检查用户代理，然后重定向到 index-nonretina.html 和 index-retina.html。这些文件中的每一个都可以包含一个唯一的缓存清单文件。

您还可以使用 PHP、Node 或其他方式在服务器端创建动态缓存清单文件。检查请求对象中的用户代理字符串并相应地更改您发回的内容。只需确保将 MIME 类型设置为“text/cache-manifest”即可。

格雷格

# java - 无法打开位图文件

> ID：11777865
> 
> 赞同：0
> 
> 时间：2012-08-02T12:54:29.670
> 
> 标签：java, bmp

我在 Windows 中打开位图文件（widthxheight）时遇到问题。文件由 Java 程序生成，该程序读取 4 个字节的 .dat 文件并将它们写入为 .bmp 文件。奇怪的是，如果文件的宽度是4的倍数，则可以打开文件（即400x450）。但是，如果不是，我无法打开文件，并且显示绘图失败（即 450x400）。

知道为什么会这样吗？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-08T13:00:01.837

BMP 行被填充为 4 个字节。请确保在读取时也写入以处理该问题，请参阅网络上的关于 BMP 格式的维基百科。

# java - 找不到类异常-Eclipse

> ID：11777873
> 
> 赞同：0
> 
> 时间：2012-08-02T12:54:50.840
> 
> 标签：java, classnotfoundexception

我有 2 个 Eclipse 项目 A 和 B。A 是一个 Web 项目。我正在尝试从项目 AI 的控制器调用项目 B 中的一个类，在项目 A 的构建路径中添加了项目 B 的 jar。项目没有编译错误。但我得到如下运行时异常：

```
SEVERE: Servlet.service() for servlet [com.tcs.ibm.Controller] in context with path [/TextAnalytics] threw exception [Servlet execution threw an exception] with root cause
java.lang.ClassNotFoundException: com.tcs.ibm.Hello
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1688)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1533)
    at com.tcs.ibm.Controller.doPost(Controller.java:45)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:928)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:539)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:300)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
input is fff 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T13:04:40.710

@Patton 解决的问题中似乎`com.tcs.ibm.Hello`不存在该类，将包含上述类的 jar 文件放入并再次重新启动服务器。`classpath``WEB-INF/lib`

# java - AccountManagerFuture.getResult() 导致“无法登录”屏幕

> ID：11777874
> 
> 赞同：8
> 
> 时间：2012-08-02T12:54:52.330
> 
> 标签：java, android, accountmanager

我正在尝试使用 AccountManager 获取已安装 Google 帐户的令牌。当我在我的 AccountManagerFuture 对象上调用 getResult() 时，我在设备上看到“无法登录”屏幕（进一步显示，“存在与 Google 服务器通信的探针。稍后再试。）。我检查了一个在调用此方法之前网络连接可用。我还在浏览器中检查了我能够访问的设备，例如 google.com。这是我的 AccountManagerCallback 的代码：

```
amf = accMgr.getAuthToken(account, authTokenType, null, true,  
    new AccountManagerCallback<Bundle>() {  
        public void run(AccountManagerFuture<Bundle> arg0) {  
            Bundle result;  
            Intent i;  
            String token;  

                try {        
                    result = arg0.getResult();  
                if (result.containsKey(AccountManager.KEY_INTENT)) {  
                     i = (Intent)result.get(AccountManager.KEY_INTENT);  
                     if (i.toString().contains("GrantCredentialsPermissionActivity")) {  
                         // Will have to wait for the user to accept  
                         // the request therefore this will have to  
                         // run in a foreground application  
                         cbt.startActivity(i);  
                     } else {  
                         cbt.startActivity(i);  
                     }

                     token = (String)result.get(AccountManager.KEY_AUTHTOKEN);  

                     } else {  
                         token = (String)result.get(AccountManager.KEY_AUTHTOKEN);       

                     }  
                 } catch (OperationCanceledException e) {  
                     e.printStackTrace();  
                 } catch (AuthenticatorException e) {  
                     e.printStackTrace();  
                 } catch (IOException e) {  
                     e.printStackTrace();  
                 }  

            }  
       }, handler); 
```

此外，LogCat 中的这些条目可能会有所帮助：

```
08-02 15:51:00.911: I/GLSUser(10134): GLS error: Unknown XXXX@gmail.com com.google
08-02 15:51:00.911: V/GoogleLoginService(10134): Returning error intent with: ComponentInfo{com.google.android.gsf.login/com.google.android.gsf.login.LoginActivity}
08-02 15:51:03.294: I/ActivityManager(324): START {cat=[XXXX@gmail.com] flg=0x10000000 cmp=com.google.android.gsf.login/.LoginActivity (has extras) u=0} from pid 11147 
```

（注意：为了避免垃圾邮件，删除了实际的 gmail 帐户名称。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-14T02:25:25.347

您是否正在生成签名的 APK？如果您不生成签名的 APK（例如，如果您只是点击“运行应用程序”），您将无法利用设备上注册的 Google 帐户。因此，您必须点击“与其他人登录”并以迂回方式登录。

（免责声明：我没有尝试运行您的代码，但这听起来像是我之前遇到的问题。）

# c# - 将 GUID 作为主键时插入语句

> ID：11777875
> 
> 赞同：2
> 
> 时间：2012-08-02T12:54:54.410
> 
> 标签：c#, sql, insert, sql-server-ce, guid

当我有一个 GUID 字段时，有没有办法使用 INSERT 语句在 SQL CE 中插入一行。

在 C# 中，我使用

```
ID = Guid.NewGuid() 
```

但在 SQL 控制台中，我找不到执行此操作的**关键字**。

我只找到了这个：

```
> Insert into Customer (ID, Name) values ('f5c7181e-e117-4a98-bc06-733638a3a264','MyCustomer') 
```

如果我有很多行要插入怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T12:56:44.570

尝试`Newid()`在 Sql server 中使用生成 GUID

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T12:56:59.363

你不能使用 NEWID() 函数吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T22:26:19.597

要`GUID`在字段上设置 a ，您可以将列的默认设置为`NEWSEQUENTIALID()`。因此，例如：

```
CREATE TABLE tableName (
    Guid UNIQUEIDENTIFIER DEFAULT NEWSEQUENTIALID(),
    Name VARCHAR(100)
); 
```

然后通过执行以下查询插入到表中：

```
INSERT INTO tableName (Name) VALUES ('Test'); 
```

我不确定`NEWSEQUENTIALID()`CE 是否支持，因为我从未使用 CE 进行开发。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-07T13:38:00.570

在 C# 中，GUID 是小写的，因此`LOWER(NEWID())`如果您希望它们看起来相似，请在 SQL 中使用。

# perl - 作为数组成员的子例程

> ID：11777882
> 
> 赞同：3
> 
> 时间：2012-08-02T12:55:10.400
> 
> 标签：perl

我可以拥有一个以子例程为成员的 Perl 数组吗？我有以下类型的子程序：

```
sub CheckForSprintfUsage {
  my ($line, $fname, $linenum) = @_;  
  if ( $line =~ /\bsprintf\b/ ) {
    printError((caller(0))[3],$fname,$linenum);
  }
} 
```

我想将这样的子例程添加到一个数组中，以便我可以遍历它并调用它们。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-02T13:01:29.040

将对子例程的引用插入到数组中：

```
my @array = (
    \&foo,
    \&bar,
    sub {
        # Do something inside anonymous subroutine
    },
    \&CheckForSprintfUsage,
);
$array[1]->();  # Call subroutine `bar` 
```

也可以传递参数：

```
$array[1]->( 'argument 1', 'argument 2' ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T13:22:19.613

是的。你可以在 Perl 中引用任何你想要的东西，所以你可以有一个 Perl 函数数组。

```
#! /usr/bin/env perl

use strict;
use warnings;

my @array;

sub foo {
    my $name = shift;
    print "Hello $name, I am in foo\n";
}   

# Two ways of storing a subroutine in an array

# Reference to a named subroutine
$array[0] = \&foo;  #Reference to a named subroutine

# Reference to an unnamed subroutine
$array[1] = sub {   #Reference to an anonymous subroutine
    my $name = shift;
    print "Whoa $name, This subroutine has no name!\n";
};  

# Two ways of accessing that subroutine

# Dereference using the "&"
&{$array[0]}("Bob"); #Hello Bob, I am in foo

# Using Syntactic sugar. Really same as above
$array[1]->("Bob");  #Whoa Bob, This subroutine has no name! 
```

# .net - Linq vb.net - X IN (SELECT ...)

> ID：11777883
> 
> 赞同：0
> 
> 时间：2012-08-02T12:55:10.567
> 
> 标签：.net, linq

我无法在我的 linq 查询中添加“ *where x in (select ...)* ”语句。该查询代表主 [MEDIEN] / 详细 [EXEMPLARE] 方案。

缺少的 where 语句应代表以下 SQL：

**WHERE e.EXEMPLARSTATUS IN（从 ANYTABLE 中选择 EXEMPLARSTATUS）**

```
Dim eMedien = ( _
    From p In db.MEDIEN _
    Where p.MEDIENNR = "1235155"
    Select New With {.HST = p.HST,
        .ANYNAME = ( _
        From e In p.EXEMPLAR _
        **** WHERE QUERY ****
        Select New With {.ZWEIGSTELLE = e.ZWEIGSTELLE, .EXEMPLARSTATUS = e.EXEMPLARSTATUS})
                    }) 
```

任何帮助都将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T13:11:18.913

> WHERE e.EXEMPLARSTATUS IN（从 ANYTABLE 中选择 EXEMPLARSTATUS）

这部分查询应该写成

```
where (from EXEMPLARSTATUS in ANYTABLE select EXEMPLARSTATUS).Contains(e.EXEMPLARSTATUS) 
```

# angularjs - AngularJS 中的 window.onbeforeunload 等价于路由

> ID：11777890
> 
> 赞同：17
> 
> 时间：2012-08-02T12:55:29.137
> 
> 标签：angularjs

常规 JavaScript 有 window.onbeforeunload。如何使用 HTML5 路由在 AngularJS 中模拟相同的内容？

有 $beforeRouteChange，但据我所知，它不允许您取消活动。

澄清一下：window.onbeforeunload 适用于离开页面导航，但不适用于页面内导航，例如仅通过 HTML5 历史 API 从一个控制器到另一个控制器。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-05-06T12:21:18.000

添加这个：

```
$scope.$on('$destroy', function() {
   window.onbeforeunload = undefined;
});
$scope.$on('$locationChangeStart', function(event, next, current) {
   if(!confirm("Are you sure you want to leave this page?")) {
      event.preventDefault();
   }
}); 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-08-27T16:59:56.210

有一个`$locationChangeStart`可以取消的事件。

由于尚未记录，这里是描述它如何影响`$route`服务的单元测试。 [https://github.com/angular/angular.js/blob/v1.0.1/test/ng/routeSpec.js#L63](https://github.com/angular/angular.js/blob/v1.0.1/test/ng/routeSpec.js#L63)

这不会像`window.onbeforeunload`那样为用户提供确认。您需要带上自己的对话服务并重新启动位置更改过程以获得相同的效果（或者您可以只使用同步`$window.confirm`）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-03-26T10:06:47.960

如果您使用的是 angular-ui-router，则需要使用`$stateChangeStart`而不是`$locationChangeStart`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-10T16:36:47.597

使用**UI-Router 版本 1.0.0+**时，请使用`$transitions.onStart`. `$stateChangeStart`请参阅[转换挂钩](https://ui-router.github.io/guide/transitionhooks)文档。

`$stateChange*`从版本 1.0.0 ( [source](https://ui-router.github.io/guide/ng1/migrate-to-1_0#state-change-events) ) 开始不推荐使用这些事件：

> 所有状态事件（即`$stateChange*`和朋友）现在默认已弃用和禁用。使用 Transition Hook API，而不是监听事件。

中止转换的示例代码（[source](https://ui-router.github.io/guide/transitionhooks#aborting-a-transition)）：

```
$transitions.onStart({}, function(transition) {
  if (transition.to().name === 'unreachable') {
    return false;
  }
} 
```

# android - 为什么 MediaPlayer 在 Android 中不起作用？

> ID：11777892
> 
> 赞同：0
> 
> 时间：2012-08-02T12:55:29.427
> 
> 标签：android, media-player, android-mediaplayer

我对 MediaPlayer 的方法有疑问：create()。（2.3.3 版）

```
 mMediaPlayer = new MediaPlayer();
    mMediaPlayer.create(this, musicIds[0]).start(); 
```

第一行是好的，但第二行是重点。日食建议我“使用'MediaPlayer'（声明类型）更改对静态的访问”和“在Create（）上添加@SuppressWarnings'static-access'”。顺便说一句，我接受了eclipse的建议......但仍然不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T12:59:41.273

它可能建议您执行以下操作：

```
MediaPlayer mMediaPlayer = MediaPlayer.create(this, musicIds[0])
mMediaPlayer.start(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T14:11:06.733

这是一个更完整的示例，说明如何等待媒体播放器准备好播放并确保您正在释放媒体播放器。如果不调用`mediaPlayer.release()`，您可能会在后续调用`MediaPlayer`.

```
 MediaPlayer mediaPlayer= MediaPlayer.create(context.getApplicationContext(), R.raw.notification_ring);
    mediaPlayer.setOnCompletionListener(new MediaPlayer.OnCompletionListener() {
        @Override
        public void onCompletion(MediaPlayer mediaPlayer) {
            mediaPlayer.release();
        }
    });
    mediaPlayer.setOnPreparedListener(new MediaPlayer.OnPreparedListener() {
        @Override
        public void onPrepared(MediaPlayer mediaPlayer) {
            mediaPlayer.start();
        }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T13:04:41.393

我认为 Eclipse 的建议不应该成为您的代码不工作的主题。

我将把注意力集中在如何`MediaPlayer`开始。请注意，歌曲初始化可能需要一些时间。因此，您最好设置`onPrepared()`侦听器并`start()`仅在准备好媒体播放器时才调用。

```
mMediaPlayer.create(this, musicIds[0])
mMediaPlayer.setOnPreparedListener(new OnPreparedListener() {
    @Override
    public void onPrepared(MediaPlayer mp) {
        mMediaPlayer.start();
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T13:02:21.263

```
MediaPlayer mp = MediaPlayer.create(this, musicIds[0]);
mp.start() 
```

成功时，prepare() 将已经被调用，并且不能再次调用。完成后不要忘记调用 mp.release() 。

# php - PHP - 通过分隔符分割字符串

> ID：11777895
> 
> 赞同：-1
> 
> 时间：2012-08-02T12:55:35.993
> 
> 标签：php, string, split, explode, delimiter

我有一个这样的字符串

```
$string = "
##
First name A
Last Name A
email@emailA.com
##<br />
##
First name B
Last Name B
email@emailB.com
##<br />
##
First name C
Last Name C
email@emailC.com
##<br /> 
.......
"; 
```

和一个关键字，

```
$keyword = "email@emailB.com"; 
```

我想要的是在搜索关键字时，它在这种情况下输出“## 和 ##”之间的字符串

```
First name B
Last Name B
email@emailB.com 
```

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T12:58:54.380

使用正则表达式：

```
echo preg_replace('/#+(.*?'.preg_quote($keyword,'/').'.*?)#+/i','$1',$string); 
```

# php - symfony2 子实体

> ID：11777898
> 
> 赞同：0
> 
> 时间：2012-08-02T12:55:40.930
> 
> 标签：php, symfony, entities

我有许多不同类型的内容容器，我以不同的方式使用它们。它们具有所有相同的属性，因此我可以使用相同的类，但由于我使用它们的方式不同，我正在考虑一种方法来很好地做到这一点。

在我的关系数据库思维方式中，我会使用 int-flag 将容器标记为 geoarea 类型或建筑物或单个服务器（这些是我的容器）。

现在我想知道 symfony 是否没有提供更流畅的方式来执行此操作，比如说子实体？如果我可以定义一个类（实体）“容器”并用作实际实体的基础？还是我在这里偏离轨道...

我是 symfony2 的新手，对面向对象编程相当陌生，但对 Web 开发不熟悉......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T13:01:44.780

您可以使用继承。它是面向对象编程中的主要概念之一：[继承](http://php.net/manual/en/language.oop5.inheritance.php)

看看Docrine Inheritance Entity：[继承映射](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/reference/inheritance-mapping.html)

# javascript - jQuery动画模糊 - 但前提是模糊形式之外

> ID：11777907
> 
> 赞同：0
> 
> 时间：2012-08-02T12:56:19.910
> 
> 标签：javascript, jquery

我有一个搜索输入 ( `#search_input`)，当被聚焦时它会扩展。额外的搜索选项弹出，允许我选择特定的搜索选项。

输入在模糊后应该收缩，但只有在表单之外触发模糊时。

[http://jsfiddle.net/zMp9S/](http://jsfiddle.net/zMp9S/)

现在我正在使用以下内容，即使我只是从搜索选项菜单中选择一个选项，它也会过早地收缩搜索输入：

```
$(function() {
    $("#search_input").focus(function(){
        $("#search_input").stop().animate({width: 310}, 200);
        $("#search_options").show();
    })
    $("#search_input").blur(function(){
        $("#search_input").stop().animate({width: 100}, 200);
        $("#search_options").hide();
    })        
});​ 
```

将焦点/模糊事件放在表单上不起作用。

**我如何告诉 jQuery 仅`#search_input`在表单外发生模糊时收缩`#search_form`？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T13:23:18.650

您必须绑定到窗口的单击事件，否则您将无法检测到用户是否失去了 div 的焦点（实际上没有焦点/模糊事件！）

```
 $(window).click(function(e) {
        if (e.target.id != 'search_options' && e.target.parentNode.id != 'search_options' && e.target.id != 'search_input') {
            $("#search_input").stop().animate({
                width: 100
            }, 200);
            $("#search_options").hide();
        }
    }); 
```

[http://jsfiddle.net/zMp9S/9/](http://jsfiddle.net/zMp9S/9/)

# php - 严格标准：只能通过引用 PHP 5.4 分配变量

> ID：11777908
> 
> 赞同：46
> 
> 时间：2012-08-02T12:56:34.410
> 
> 标签：php, reference, porting

我将我的 PHP 版本升级到 5.4（[XAMPP](https://en.wikipedia.org/wiki/XAMPP) 1.7.3 到 1.8.0）。现在我看到*严格标准*错误，对于`myDBconnection`：

> 严格标准：只有变量应该通过引用在第 4 行的 C:\xampp\htdocs\alous\include\dbconn.php 中分配

### dbconn.php：

```
<?php
    defined('_VALID') or die('Restricted Access!');

    $conn = &ADONewConnection($config['db_type']); // <--- This Line 4

    if ( !$conn->Connect($config['db_host'],
                         $config['db_user'],
                         $config['db_pass'],
                         $config['db_name'])) {

        echo 'Could not connect to MySQL! Please check your database settings!';
        die();
    }
    $conn->execute("SET NAMES 'utf8'");
?> 
```

*注意：*我不需要用这种方法禁用 php.ini 中的严格标准`error_reporting = E_ALL & ~E_NOTICE & ~E_STRICT`！我想修复我的 PHP 代码。

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-08-02T13:02:39.373

您应该删除`&`(&) 符号，这样第 4 行将如下所示：

```
$conn = ADONewConnection($config['db_type']); 
```

这是因为 ADONewConnection 已经通过引用返回了一个对象。根据[文档](http://php.net/manual/en/language.operators.assignment.php)，从 PHP 5.3.0 开始，通过引用将引用的结果分配给对象会导致 E_DEPRECATED 消息

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-02T13:23:12.920

这是因为您试图通过引用分配对象。删除＆符号，您的脚本应该按预期工作。

# android - 在 AutocompleteTextview 的下拉列表中自定义分隔符/分隔符

> ID：11777912
> 
> 赞同：18
> 
> 时间：2012-08-02T12:56:54.580
> 
> 标签：android, drop-down-menu, autocompletetextview, separator, divider

我在网站上看到过这个问题，但没有人无法得到任何答案。

在android中使用AutocompleteTextview时，有什么方法可以自定义下拉菜单中分隔线的外观吗？

ListView 非常简单，但是对于 autocompletetextview 仅使用 ArrayAdapter，有什么方法可以自定义分隔线。

（不是textview，我已经知道这样做了）

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-18T11:10:58.283

我不确定如何为单个 AutoCompleteTextView 执行此操作，但我知道如何为整个应用程序设置它。这也应该对您有所帮助:)

```
<style name="MyTheme" parent="AppTheme">
        <item name="android:dropDownListViewStyle">@style/MyListViewStyle</item>
</style>

<style name="MyListViewStyle" parent="@android:style/Widget.ListView">
        <item name="android:divider">#F00</item>
        <item name="android:dividerHeight">1px</item>
</style> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-12-02T10:21:42.547

我遇到了同样的问题并尝试了很多方法但没有取得结果，最后我得到了一种使用 AutocompleteTextview 设置分隔符和分隔符长度的快速简便的方法。基本上我们可以使用 ArrayAdapter Layout 的 TextView 从底部设置边框。就像

步骤1。为 arrayadapetr 做一个布局，如

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/testt"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:background="@drawable/background_single_line"
android:textColor="@drawable/text_color"
android:textAppearance="?android:attr/textAppearanceMediumInverse"
style="?android:attr/dropDownItemStyle"
android:maxLines="1"
android:padding="3dp"
android:textSize="16sp" /> 
```

step2：在drawable文件夹中创建新布局，其名称为background_single_line.xml

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
<item>
    <shape android:shape="rectangle">
        <solid android:color="@android:color/black" />
    </shape>
</item>
<item android:bottom="1dp">
    <shape android:shape="rectangle">
        <solid android:color="@android:color/white" />
    </shape>
</item> 
```

最后看起来像分隔符。

[![在此处输入图像描述](../Images/81655bf50d30751a465d4c45200f105c.png)](https://i.stack.imgur.com/Hh9le.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-08-14T13:42:27.460

我没有找到任何分隔符属性，所以我这样做了

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical" android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/black">

<TextView
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:textAppearance="?android:attr/textAppearanceMedium"
    android:text="Medium Text"
    android:id="@+id/textView129"
    android:textColor="#000000"
    android:background="@color/white"
    android:layout_marginBottom="1dp"
    android:paddingLeft="10dp"
    android:paddingRight="10dp"
    android:paddingTop="5dp"
    android:paddingBottom="5dp"/>
</LinearLayout> 
```

所以我正在做的是我有一个线性布局的背景颜色和另一个文本视图的背景颜色（textView的背景颜色与线性布局的背景颜色重叠）现在使用边距属性并将textview的底部边距设置为1dp你会在元素之间划清界限......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-02T21:12:50.103

[马克](https://stackoverflow.com/questions/11777912/customize-divider-separator-in-dropdown-of-an-autocompletetextview/12475839#12475839)的回答通常是最好的解决方案。然而，不同版本的 AppCompat 库有不同的行为，关于如何`android:dropDownListViewStyle`影响其他菜单，如系统溢出/选项菜单。例如，在 AppCompat 23.0.1 版本中，它不会影响 ActionBar/Toolbar 中的这个菜单；而版本 23.2.1 它会影响它，如解释[here](https://stackoverflow.com/questions/24274590/setting-autocompletetextview-divider-height-has-no-effect-in-android)。

如果你想要一个孤立的样式只影响 AutoCompleteTextView，那可能是不可能的。但另一种方法是手动创建列表分隔线图像，作为下拉列表行布局的一部分：

**res/layout/autocomplete_list_row.xml**

```
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    tools:layout_height="50dip">

    <TextView
        android:id="@+id/text"
        style="?android:attr/dropDownItemStyle"
        android:textSize="18sp"
        android:layout_width="fill_parent"
        tools:text="An auto-complete list item"
        android:minHeight="48dip"
        android:layout_height="wrap_content"
        android:ellipsize="marquee"/>

    <View
        android:layout_width="match_parent"
        android:layout_height="1dip"
        android:background="@drawable/divider"/>

</LinearLayout> 
```

**res/drawable/divider.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" 
       android:shape="rectangle">
    <size android:height="1dp" />
    <solid android:color="#458c8c8c" />
</shape> 
```

然后在您的适配器中为 AutoCompleteTextView 使用此布局：

```
ArrayAdapter<CharSequence> autoCompleteListAdapter = 
    new ArrayAdapter<>(context,
                       R.layout.autocomplete_list_row,
                       R.id.text, arrayList); 
```

[在这里](https://stackoverflow.com/questions/24274590/setting-autocompletetextview-divider-height-has-no-effect-in-android/46729751#46729751)使用 ConstraintLayout 的类似方法。

# python - 使用 Python 和 libgpod (gtkpod) 从 Linux 将音乐加载到 iPod

> ID：11777914
> 
> 赞同：10
> 
> 时间：2012-08-02T12:56:58.060
> 
> 标签：python, linux, ipod

以下代码，我认为是加载音乐的最小程序

```
db = Database('/media/andrew@acooke.org ipod')
itdb_device_set_sysinfo(db._itdb.device, "ModelNumStr", "C297")
db.import_file('/home/andrew/some-track.mp3')
db.copy_delayed_files()
db.close() 
```

将以下内容打印到 stderr：

```
** (utrunner.py:11333): WARNING **: Itdb_Track ID '0' not found.
** (utrunner.py:11333): CRITICAL **: itdb_get_mountpoint: assertion `itdb' failed
** (utrunner.py:11333): CRITICAL **: prepare_itdb_for_write: assertion `link' failed
** (utrunner.py:11333): CRITICAL **: mk_mhla: assertion `fexp->albums' failed
** (utrunner.py:11333): CRITICAL **: mk_mhli: assertion `fexp->artists' failed
** (utrunner.py:11333): CRITICAL **: itdb_splr_validate: assertion `at != ITDB_SPLAT_UNKNOWN' failed 
```

并且不加载任何音乐。

当我运行 gtkpod（它使用 libgpod - 它们都来自同一个项目）时，它*确实*有效（并且只打印了初始警告和`ITDB_SPLAT_UNKNOWN`消息）。路径都是正确的，我可以打开目录、写入文件等。数据库对象似乎是正确的（例如显示 2 个播放列表）并且存在 SysInfoExtended 文件。

我究竟做错了什么？有没有人让这个（libgpod Python 包装器）工作？

一个可能的线索是 gtkpod 提示我选择 iPod 类型（经典 160GB）。我没有在上面设置该信息。我该如何设置？ **更新**- 我确实尝试了上面显示并在下面的答案中提到的调用，但它似乎没有效果（我最初没有包括它，因为我认为它一定是错误的，但也许它是必需的，问题出在其他地方）。另外，gtkpod 称它为“xB150”？！

我询问了 libgpod/gtkpod 邮件列表，但没有收到任何回复。这是最新的稳定版本和 git 主干（使用 CFLAGS=-w 编译）。

**更新**我删除了所有音乐，然后用 C297 和 xB150 运行上面的代码。在这两种情况下，Extras.itdb 文件（看起来像一个 sqlite db）都没有改变大小，并且断开连接的 iPod 没有歌曲。相关文件位于以下链接：

*   [系统信息](http://www.acooke.org/SysInfo)（空文件）
*   [系统信息扩展](http://www.acooke.org/SysInfoExtended)
*   [Extras.itdb](http://www.acooke.org/Extras.itdb)（sqlite 数据库？）

[关于这个问题的一般说明，将来会更新，这里。](http://acooke.org/cute/UsingiPodo0.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T12:26:59.463

> 一个可能的线索是 gtkpod 提示我选择 iPod 类型（经典 160GB）。我没有在上面设置该信息。我该如何设置？

```
itdb_device_set_sysinfo (db._itdb.device, "ModelNumStr", "FOOBAR"); 
```

`FOOBAR`根据[型号列表](https://gitorious.org/libgpod/libgpod/blobs/1f7bbf2ef77fd97b260b346499d80d948bbce649/src/itdb_device.c)替换为您的型号。

**编辑：**

我的建议是`gtkpod`使用调试符号进行编译并使用`gdb`. 断点`libgtkpod/file.c:add_track_by_filename()`似乎是一个不错的起点。

将它的用法`libgpod`与你的比较一下，看看是否有任何额外的调用。显然，Python 绑定更多地抽象了事物，但弄清楚它们最终调用什么应该不是问题。

（例如`import_file`呼叫`itdb_cp_track_to_ipod`和`itdb_playlist_add_track`）

抱歉，这就是我在无法访问设备的情况下所能提供的全部帮助。

# java - 爪哇玩！2 - 密码限制

> ID：11777917
> 
> 赞同：2
> 
> 时间：2012-08-02T12:57:04.973
> 
> 标签：java, constraints, playframework-2.0

我在 Play 中找不到 @Equal 约束！2.

我查看了 API [http://www.playframework.org/documentation/api/2.0.2/java/index.html](http://www.playframework.org/documentation/api/2.0.2/java/index.html)

我想要一个 SignupForm 来检查密码是否相等。我不相信我必须为这样一个常见问题编写自己的约束。

就像是：

```
...
@Min(6)
public String password;
@Equal(password)
public String confirmPassword;
... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T15:26:30.657

`@Equal`在 JSR 303 中，我在其他 Java 框架中都没有任何限制。

要检查密码，并不难：在您的表单对象中，只需编写一个`public String validate()`方法：

```
public class SignupForm {

    @Min(6)
    public String password;

    @Min(6)
    public String confirmPassword;

    public String validate() {
        if(!password.equals(confirmPassword)) {
            return "Password mismatch";
        }
        return null;
    }

} 
```

看看这个[类中的](https://github.com/playframework/Play20/blob/master/samples/java/zentasks/app/controllers/Application.java#L14)[zentask 示例](https://github.com/playframework/Play20/blob/master/samples/java/zentasks/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-21T20:51:46.840

万一有人从谷歌偶然发现这个问题。这就是我所做的

```
 @MinLength(6)
    public String password;

    @MinLength(6)
    public String confirmPassword;

    public List<ValidationError> validate(){
        List<ValidationError> errors = new ArrayList<ValidationError>();
        if(!this.password.equals(this.confirmPassword)){
            errors.add(new ValidationError("password", "Passwords must match."));
        }
        return errors.isEmpty() ? null : errors;
    } 
```

你必须使用`@MinLength(6)`而不是`@Min(6)`，我认为那是因为密码是一个字符串。如果有人没有输入匹配的密码，返回验证错误列表将在您的表单中显示为错误。否则，他们将看不到哪里出了问题。

我在这里找到了有用的信息[https://www.playframework.com/documentation/2.2.x/JavaForms](https://www.playframework.com/documentation/2.2.x/JavaForms)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-18T09:44:47.920

下面的代码返回全局错误。

```
public String validate() {
   if(!password.equals(confirmPassword)) {
      return "Password mismatch";
   }
    return null;
} 
```

但下面的代码片段更具体地返回特定于 confirmPassword 字段的错误。

```
public List<ValidationError> validate(){
   List<ValidationError> errors = new ArrayList<ValidationError>();
   if(!this.password.equals(this.confirmPassword)){
       errors.add(new ValidationError("confirmPassword", "Password should be same."));
    }
    return errors.isEmpty() ? null : errors;
} 
```

[这](https://www.playframework.com/documentation/2.4.x/JavaForms)是官方文档，对此进行了更多描述。

# cocos2d-iphone - 无法使用 Cocos 3D 创建 iOS 项目，只能创建 Mac 项目

> ID：11777918
> 
> 赞同：0
> 
> 时间：2012-08-02T12:57:09.113
> 
> 标签：cocos2d-iphone, cocos3d

我安装了 Cocos 2D 和 Cocos 3D。

我可以创建 Cocos 2D 项目，但我不能创建 Cocos 3D 项目。我在 iOS 部分选择了 Cocos 3D，但创建的项目是为 MAC 的。为什么 ？？

我解决不了。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T15:28:24.647

Cocos3D 仅适用于 Mac，并且仅适用于 cocos2d v1.x。它可能不适用于最新版本的 cocos2d v1.1，因此您可能想尝试使用 v1.0.1 稳定版本。

无论如何，如果您使用不同的版本，您必须重新安装 cocos2d 和 cocos3d 模板。

# awk - 如何调整以便我的命令在 awk 中为 printf 工作

> ID：11777919
> 
> 赞同：0
> 
> 时间：2012-08-02T12:57:14.977
> 
> 标签：awk

我有这个在 unix 中工作的命令来 grep 前 10 个大文件。但是，我在我的 Perl 脚本中使用该命令时遇到问题。虽然错误告诉我哪里出错了，但我不知道要修复它，因为我不熟悉 awk。谁能告诉我如何调整命令，以便我在 Perl 脚本中使用反引号？
用于 grep 前 10 个文件的 Unix 命令：-

```
find . -name .snapshot -prune -o -printf '%s %u %p\n' \
 | sort -nr \
 | head \
 | awk '{printf"%5.2f MB %s %s\n", $1/1024/1024, $2, $3}' 
```

这是我在 Perl 中使用的方式，但它显示错误：-

```
my $cmd = `find . -name .snapshot -prune -o -printf '\%s \%u \%p\n' | sort -nr | head | awk '{printf \%9.2f MB \%s \%s\n , \$1\/1024\/1024, \$2, \$3}'` ; 
```

执行时显示的错误：-

```
awk: cmd. line:1: {printf %9.2f MB %s %s
awk: cmd. line:1:         ^ parse error
awk: cmd. line:2:  , $1/1024/1024, $2, $3}
awk: cmd. line:2:  ^ parse error
awk: cmd. line:2:  , $1/1024/1024, $2, $3}
awk: cmd. line:2:                ^ parse error
awk: cmd. line:1: {printf %9.2f MB %s %s
awk: cmd. line:1:         ^ parse error
awk: cmd. line:2:  , $1/1024/1024, $2, $3}
awk: cmd. line:2:  ^ parse error
awk: cmd. line:2:  , $1/1024/1024, $2, $3}
awk: cmd. line:2:                ^ parse error
awk: cmd. line:1: {printf %9.2f MB %s %s
awk: cmd. line:1:         ^ parse error
awk: cmd. line:2:  , $1/1024/1024, $2, $3}
awk: cmd. line:2:  ^ parse error
awk: cmd. line:2:  , $1/1024/1024, $2, $3}
awk: cmd. line:2:                ^ parse error 
```

请点亮一些灯。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T13:27:51.627

尝试`printf`用双引号将 for 的第一个参数括起来，如下所示：（ `awk '{printf \"\%9.2f MB \%s \%s\n\", \$1\/1024\/1024, \$2, \$3}'` 我猜你也应该转义引号，但我几乎不知道`perl`，所以请检查一下）。

无论如何，如果您在 perl 中拥有所有必要的“本机”工具，那么您可能不应该掏腰包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T06:06:38.333

我真的不知道你为什么要在 perl 中使用 sort head awk，但是像啤酒一样自由，所以这里有一个从 perl 中调用 awk 的示例 :-)

```
my $cmd = qx(find . -name .snapshot -prune -o -printf '\%s \%u \%p\n' | sort -nr | head | awk '{printf("%9.2f MB %s %s \\n",(\$1/1024/1024) ,\$2,\$3);}' );
foreach my $line (split /[\r\n]+/, $cmd) {
 print $line;
} 
```

awk 位，在 perl 中会像这样

```
while (<>) {
    ($Fld1,$Fld2,$Fld3) = split(' ', $_, -1);
    printf "%9.2f MB %s %s\n", ($Fld1 / 1024 / 1024), $Fld2, $Fld3;
} 
```

# php - 在没有登录用户的情况下发布到 Facebook 页面墙

> ID：11777921
> 
> 赞同：0
> 
> 时间：2012-08-02T12:57:21.790
> 
> 标签：php, facebook

我有一个 Facebook 应用程序，我想用它代表他们在客户的 Facebook 页面墙上发帖。我现在设置了它，这样当他们对我的应用程序进行身份验证时，我得到了访问令牌，但是当我去贴墙时，我收到以下错误：“OAuthException：验证访问令牌时出错：会话无效，因为用户登录出去。”

如何在不登录的情况下从我的脚本发布？

这是我的代码：

```
include_once('fb-php-sdk/src/facebook.php');
$facebook = new Facebook(array(
    'appId' => 'XXX',
    'secret' => 'XXX',
));
try {
    $page_id = '215133535279290'; //page id of the customer's facebook page
    $args = array(
        'access_token' => 'XXX', //access token received when user authenticated app
        'message'      => 'A test message'
    );
    $post_id = $facebook->api("/$page_id/feed","post",$args);
} catch (FacebookApiException $e) {
echo "Error:" . $e;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T13:04:34.163

新的 facebook API 具有所谓的扩展访问令牌（它取代了离线访问：我认为[https://developers.facebook.com/roadmap/offline-access-removal/](https://developers.facebook.com/roadmap/offline-access-removal/)），我相信它可以持续长达 60 天（或类似那）。要使用它，只需在通过您的网站登录时获取访问令牌：

```
$token = $facebook->getAccessToken(); 
```

将其保存到 Db 并稍后使用此令牌：

```
$facebook = new Facebook();
$facebook->setAccessToken($accessTokenFromDB); 
```

然后您应该能够继续，就好像用户已登录一样。

至于用户被注销的部分，请确保您使用的是最新版本的 API 而不是旧版本，并确保“场景 2：如果您之前请求过离线访问 - 更新 4/30/”下的内容2012”我链接的页面的标题。

您可以继续使用`offline_access`到 10 月 3 日，但是如果它在 2 个月内被真正关闭并且必须重写您的代码，那为什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T15:16:05.933

获得`publish_stream`扩展权限。获得此权限后，您可以在用户离线时使用您的应用访问令牌发布提要故事。在这种情况下，不需要`offline_access`权限或保存和使用用户访问令牌。

# android - Intent.ACTION_CALL 的电话号码消毒剂

> ID：11777922
> 
> 赞同：0
> 
> 时间：2012-08-02T12:57:25.347
> 
> 标签：android, android-intent, onclicklistener, phone-call, sanitizer

我有以下 onClickListener()：

```
phonereserveListener = new OnClickListener() {

        @Override
        public void onClick(View v) {
            if (phone!=null){
            String url = "tel:"+phone;
            Intent callIntent = new Intent(Intent.ACTION_CALL, Uri.parse(url));
            startActivity(callIntent);
            }
            else{
                Toast.makeText(getActivity(), "Phone number not available", Toast.LENGTH_LONG).show();
            }

        }

    }; 
```

我的问题是我从网络服务调用中获取电话号码，有些号码为空（没问题，因为吐司出现），有些号码是正常的，一些例子：

```
" 05 07 06-3141"
" 05 07 06-3171" 
```

但有些数字是二合一的。例子：

```
"Shop:  05 07 06-3121\nBar:  05 07 06-3122" 
```

对于这个号码，如果我尝试拨打intent.ACTION_CALL，电话会拨打类似的电话：

```
"746705070631212270507063122" 
```

因为他需要 S=7 h=4 o=6 等等。

我该怎么做才能从字符串中取出 2 个数字，然后让意图选择器选择正确的数字（商店/酒吧）？

PS：来的电话号码列表是动态的，是通过webservice实现的，所以会一直变化

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T14:07:48.273

我有一个类似的问题，我用这个库解决了从字符串中提取电话号码的问题：

[http://code.google.com/p/libphonenumber/](http://code.google.com/p/libphonenumber/)

```
public static ArrayList<String> extractPhoneNumber(String content) {

    ArrayList<String> numbers = new ArrayList<String>(0);

    PhoneNumberUtil instance = PhoneNumberUtil.getInstance();

    //Change IT with your contry code
    Iterable<PhoneNumberMatch> matches = instance.findNumbers(content, "IT");

    Iterator<PhoneNumberMatch> iterator = matches.iterator();

    while (iterator.hasNext()) {
        numbers.add(instance.format(iterator.next().number(), PhoneNumberFormat.INTERNATIONAL));
    }

    return numbers;
} 
```

# c# - 如何制作“只读”文件？

> ID：11777924
> 
> 赞同：9
> 
> 时间：2012-08-02T12:57:28.743
> 
> 标签：c#, file, file-permissions, streamwriter

我正在使用 C#`StreamWritier`类。问题：

1.  我怎样才能使一个文件只读，这样没有人可以删除或写入它？
2.  如何制作隐藏文件？

我正在像这样创建文件：

```
 private void button1_Click(object sender, EventArgs e)
    {
        SaveFileDialog save = new SaveFileDialog();
        save.FileName = textBox1.Text;
        save.Filter = "Text File | *.rtf";

        if (save.ShowDialog() == DialogResult.OK)
        {
            StreamWriter writer = new StreamWriter(save.OpenFile());
            writer.WriteLine(textBox2.Text);
        }

        writer.Dispose();
        writer.Close();
    } 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-02T12:59:43.207

你好你可以试试这个方法

1

```
 public static void SetFileReadAccess(string FileName, bool SetReadOnly)
 {
      FileInfo fInfo = new FileInfo(FileName);

      // Set the IsReadOnly property.
      fInfo.IsReadOnly = SetReadOnly;

 } 
```

2

```
File.SetAttributes(yourFilePath, FileAttributes.Hidden); 
```

……

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-02T12:58:28.857

您可以使用 设置 ReadOnly 属性[`File.SetAttributes`](http://msdn.microsoft.com/en-us/library/system.io.file.setattributes.aspx)。

例子：

```
File.SetAttributes(textBox1.Text, FileAttributes.ReadOnly); 
```

请注意，这只设置了只读标志，它不会修改 NTFS 访问控制列表（意味着每个熟练的用户都可以删除只读属性）。另请注意，这会重置文件的所有其他属性，这在您的情况下应该不是问题，因为您无论如何都在创建一个新文件。如果您需要保留现有属性，[`File.GetAttributes`](http://msdn.microsoft.com/en-us/library/system.io.file.getattributes.aspx)请先使用现有标志并将现有标志与新标志结合起来（请参阅链接的 MSDN 页面上的示例）。

* * *

如果您需要*保护*文件免受恶意写入尝试，您*必须*了解 NTFS 安全性（谷歌搜索“NTFS 安全性”以获得大量资源）。一旦你理解了这一点，下面的问题将告诉你如何在 C# 中修改它们：

*   [在 C#.NET 中设置 NTFS 权限](https://stackoverflow.com/questions/7451861/setting-ntfs-permissions-in-c-net)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-02T13:07:47.577

将此用于只读文件：

```
FileAttributes yourFile = File.GetAttributes(yourFilePath);
File.SetAttributes(yourFilePath, FileAttributes.ReadOnly); 
```

其中“yourFilePath”是一个字符串。

对于隐藏文件：

```
FileAttributes yourFile = File.GetAttributes(yourFilePath);
File.SetAttributes(yourFilePath, FileAttributes.Hidden); 
```

对于普通文件（不是只读的，也不是隐藏的）：

```
FileAttributes yourFile = File.GetAttributes(yourFilePath);
File.SetAttributes(yourFilePath, FileAttributes.Normal); 
```

我知道您没有要求设置普通文件，但我认为了解这一点很有用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-11-29T22:05:06.900

相同的答案，但只有一行代码：

```
// Hide and read-only in one line
File.SetAttributes(filePathFinal, FileAttributes.ReadOnly | FileAttributes.Hidden); 
```

# python - 使用变量值创建类实例

> ID：11777925
> 
> 赞同：1
> 
> 时间：2012-08-02T12:57:31.000
> 
> 标签：python

Python中有没有办法，我可以使用变量值来创建类实例

```
class Test(object):
    def __init__(self, object):
        self.name = object
        print "Created Object :",self.name

a1 = Test('a1')
print a1.name
b2 = 'a2'
b2 = Test(b2)
print a2.name 
```

在此示例中，我希望类实例名称应分别为“a1”和“a2”。我不能直接使用值“a2”，因为它是从其他进程计算的，但类实例名称必须匹配它以便可以访问它。

在上面的例子中，它给出了错误：

```
 Created Object : a1
 a1
 Created Object : a2

 Traceback (most recent call last):
 File "D:\a\h", line 12, in <module>
 print a2.name
 NameError: name 'a2' is not defined 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T13:05:40.853

任何时候你想动态地创建变量名，你都需要停下来告诉自己字典是一个更好的方法。如果您希望类实例在任何地方都可用（这也不是最好的主意），但您可以这样做：

```
class Test(object):
    instance_dict={}
    def __init__(self,name):
        self.name=name
        self.instance_dict[name] = self 
```

现在你可以使用这个类：

```
a1 = Test("a1")
print a1 is Test.instance_dict["a1"] #True
b1 = Test("a2")
print b1 is Test.instance_dict["a2"] #True 
```

换句话说，`instance_dict`类属性为最近创建的具有特定名称的实例保留一个句柄，因此您可以在任何`Test`可用的实例上拥有一个句柄。

但是，我不推荐这种设计。这里的缺点与使用全局变量的缺点相同。它可能会变得难以维护，难以分辨到底发生了什么等等，仅仅是因为通过您的程序的数据流没有很好地排序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T13:19:48.393

最接近您要查找的内容是将所有实例存储在字典中：

```
class Test(object):
    def __init__(self, n):
        self.name = n
        print "Created Object :",self.name

d = {}
d['a1'] = Test('a1')
print d['a1'].name
b2 = 'a2'
d[b2] = Test(b2)
print d['a2'].name 
```

引用对象的变量的名称与对象本身之间没有联系。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T13:05:59.937

试试`print b2.name`吧。

注意：该名称`name`对 Python 没有任何特殊意义。“给你的类一个名字”对 Python 没有任何意义，它只是执行你编写的代码。“给你的班级起个名字”对**你**来说意义重大，但 Python 不能也不会读懂你的想法 :-)

`b2`因此，设置to引用的实例的名称`a2`并不会神奇地创建一个 reference `a2`。

对变量名的介绍可能会有所帮助：[Learn to Program Using Python: Variables and Identifiers](http://www.developer.com/lang/other/article.php/626321/Learn-to-Program-Using-Python-Variables-and-Identifiers.htm)

简而言之，如果你写

```
a = 'x' 
```

Python

1.  创建一个字符串实例
2.  为该字符串实例（文本`x`）分配一个值
3.  将此新字符串实例的引用分配给别名`a`

如果你然后写：

```
b = a 
```

内存中仍然只有一个字符串实例。您只创建了第二个别名`b`，它引用与`a`.

# jpa - 在 JPA 中映射复合关系的正确方法是什么？

> ID：11777936
> 
> 赞同：0
> 
> 时间：2012-08-02T12:58:02.927
> 
> 标签：jpa

我有一个名为 Topic 的课程，它可能具有其他主题的先决条件。映射这种关系的正确方法是什么。我应该做这样的事情吗？

您在下面看到的模型是一个 Play Framework 模型类。

```
@Entity
public class Topic extends Model {
    @OneToMany
    public Set<Topic> prerequisites;
} 
```

或者我应该使用另一个模型类来管理先决条件关系？

```
@Entity
public class TopicPrerequisites extends Model {
    @OneToOne
    public Topic theTopic;

    //or maybe this should be @ManyToMany ???
    @OneToMany
    public Set<Topic> prerequisites;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T13:21:04.217

一个主题可以成为多个主题的先决条件吗？如果是这样，我会执行以下操作：

```
@ManyToMany
private List<Topic> prerequisites;
@ManyToMany(mappedBy="prerequisites")
private List<Topic> topics; 
```

在我看来，关系的额外实体是不必要的。

# java - 在 Google App Engine 上生成统计数据

> ID：11777939
> 
> 赞同：5
> 
> 时间：2012-08-02T12:58:19.150
> 
> 标签：java, google-app-engine, objectify

我想向我的用户展示一些统计数据，例如 Google App Engine 上的点击次数/秒。我开始自己动手：

*   在每个页面视图上，将 1 添加到内存缓存中的计数。

每分钟：

*   读取并重置计数，并将“since”变量设置为现在。
*   将点击次数除以我上次计算以来的时间。
*   将数据保存到数据存储中的实体。
*   丢弃非常旧的数据。

然后我意识到这很重要，必须有一个图书馆来做这件事，但是我找不到适合我的图书馆。我简要地查看了 rrd4j 和 JRobin，但我不确定它们是否可以在没有大量重写的情况下在 Google App Engine 上使用。有没有人有更多的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T15:36:31.240

[尝试这篇文章http://googleappengine.blogspot.com/2012/07/analyzing-your-google-app-engine-logs.html](http://googleappengine.blogspot.com/2012/07/analyzing-your-google-app-engine-logs.html)中提到的新技术。

它需要一些额外的工作，但值得一试。我正在使用 Mache（java 框架）将 appengine 日志提取到 BigQuery 和 BigQuery API 中以查询结果。现在选择一个精美的 javascript 图表库并给您的用户留下深刻印象。非常强大、灵活和可扩展的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T10:21:56.620

也许[ProdEagle](http://www.prodeagle.com/)适合您。我认为他们几乎完全按照您的意愿行事，而且我相信他们也有处理从 memcache 中删除的数据的逻辑，而不会在您的图表中留下一个大洞。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T05:55:34.827

考虑使用[Mixpanel](https://mixpanel.com/)。您可以提交任意事件，然后从 API 中提取汇总信息……或者只使用提供的图表和图形。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T22:44:24.137

由于似乎没有人为我提供答案，我将假设没有通用的库可以做到这一点，我将不得不写一个。如果感觉代码不错，我会开源它并从这里链接。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-13T06:40:47.270

我似乎记得 Twitter commons 有你需要的东西，但我不知道它们是否可以轻松移植到 GAE：[https ://github.com/twitter/commons](https://github.com/twitter/commons)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-02T14:58:59.740

您可能会使用[Google Analytics](http://support.google.com/analytics/bin/answer.py?hl=en&answer=1008080)。您只需将一些 javascript 复制并粘贴到您的模板中。

# javascript - 由于 JavaScript，iPhone 在输入数字字段中添加了逗号

> ID：11777941
> 
> 赞同：1
> 
> 时间：2012-08-02T12:58:27.303
> 
> 标签：javascript, iphone, html, safari, mobile-safari

我们有一个从移动浏览器获取信用卡的订单：<input type="number" id="txtCCNumber" />

除此之外，我们还有一个 JavaScript 可以删除插入到字段中的所有非整数字符：

```
$('input#txtCCNumber').keyup(function(e)
{
    var ccnum = $(this).val();
    $(this).val(ccnum.replace(/[^\d]/g, ''));
}); 
```

然而，我们刚刚意识到，当人们使用 iPhone 尝试输入信用卡时，iPhone 会自动每 3 个数字添加一个逗号（因为 JavaScript）。

有人知道修复这个 JavaScript 的方法吗？

**我不想使用 type="tel"。在这种情况下，这不是解决方案。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T13:09:52.697

就个人而言，我认为信用卡号码不适合使用`input type="number"`. 根据[规范](http://www.w3.org/TR/html-markup/input.number.html)：

> 具有值为“数字”的类型属性的输入元素表示用于将元素的值设置为表示数字的字符串的精确控件。

信用卡“数字”是数字字符串，但它们不标识特定的数值，用户使用某些浏览器附加到输入的向上和向下箭头输入信用卡号是没有意义的场地。您最好的选择是简单地使用`input type="text"`.

此外，将 JavaScript 附加到`keyup`事件中会惹恼像我这样想要使用分隔符输入信用卡号的人，因为这样更容易进行抽查。只需让人们输入他们喜欢的卡号，然后再将其标准化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T13:09:34.933

我看不出为什么您将 type="number" 用于信用卡号字段，因为无论如何您都在使用 JS 删除非整数值。在这里使用 type="text" 很合适。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-02T13:09:36.993

~~我创建了一个小提琴并在我的 iphone 上进行了测试，它工作正常。~~

~~http://jsfiddle.net/MH8gj/~~

# mysql - MySQL 5.0 高 CPU 使用率 - 性能调优

> ID：11777945
> 
> 赞同：0
> 
> 时间：2012-08-02T12:58:41.677
> 
> 标签：mysql, database, performance, tomcat

环境：Webapp 在 tomcat-6 上运行，hibernate-3 作为 db 的接口。

从最近开始，MySQL 一直在占用 100% 的 CPU 时间。

我正在连续读取大量数据，几乎没有写入数据库。

该服务是使用默认的 my.ini 参数设置的。无法调试问题出在哪里。

PS：我正在阅读关于闰秒错误并认为它可能相关，因为虽然 MySQL 运行在 Win XP 32 位上，但 Windows 操作系统本身作为 VM 映像运行在 linux 操作系统上。由于闰秒修复未应用于底层 linux 是否会出现问题？

![Mysql 进程规范 1](../Images/5dd89b23cb660026978288a7a0498ef2.png) ![系统进程规范](../Images/e633bd5fb22ce95aade8310f1c76858d.png)

非常感谢任何指针

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T13:14:49.003

我经常看到这是由于过多的上下文切换引起的。看一下[innodb_thread_concurrency](http://dev.mysql.com/doc/refman/5.0/en/innodb-parameters.html#sysvar_innodb_thread_concurrency)和[innodb_concurrency_tickets](http://dev.mysql.com/doc/refman/5.0/en/innodb-parameters.html#sysvar_innodb_concurrency_tickets)参数。

Innodb_thread_concurrency 在某些版本上默认为 0，这意味着无限制，但是，请尝试使用 MySQL 建议进行设置：

> 推荐值是 CPU 数量加上磁盘数量的 2 倍。

# c# - 如何使用数据表绑定修改数据网格视图列

> ID：11777947
> 
> 赞同：3
> 
> 时间：2012-08-02T12:58:46.200
> 
> 标签：c#, .net, winforms, datagridview, datatable

我已经绑定`DataTable`到`DataGridView`（在 WinForms 中）并且我想更改列在 GUI 中的格式。

但是，如果我手动将列添加到`DataGridView`并设置`errorsGrid.AutoGenerateColumns = false`，则数据不会出现在这些列中（但是会添加行）。那么有什么方法可以绑定`DataTable`和更改，例如。中列的宽度`DataGridView`？将`AutoGenerateColumns = false`类似的绑定`BingingList`添加到现有列中，但`DataTable`似乎并没有那样工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T13:12:16.430

请告诉您是否为您在网格的**编辑列表**`DataPropertyName`单上手动添加的每个列指定了属性（如下面的屏幕截图所示）？

 **![在此处输入图像描述](../Images/29519a950024351c017da239602b92b9.png)

看起来您需要为表单编辑列上的每个网格列显式指定与表列的绑定，该表单**由**右键单击菜单项**Edit Columns...**调用，用于表单编辑器中的网格视图。您需要手动为每列配置数据绑定，因为您已经指定了网格的属性`errorsGrid.AutoGenerateColumns = false`（这意味着不会自动生成与表字段绑定的列）。由于网格包含空行 - 您可以确保数据已成功加载，唯一剩下要做的事情是配置行在网格中的显示方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T13:04:55.313

我发现在绑定数据源时处理 datagridview 格式的最佳方法是在绑定之后应用它。您需要通过索引或表列名称来引用该列。**

# graph - 使用图数据的 SVM 聚类

> ID：11777952
> 
> 赞同：2
> 
> 时间：2012-08-02T12:58:59.043
> 
> 标签：graph, machine-learning, cluster-analysis, svm

我尝试使用 SVM 进行集群。我有社交网络图表数据。在我的数据节点中相互连接。我想使用图邻接矩阵作为 SVM 输入数据。我的 SVM 输入数据如下。我的主要问题是图形数据中的社区检测。

是否可以使用 SVM 对图形数据进行聚类。你能给我一些方法来做到这一点。我是 SVM 的初学者。

```
1 1:0 2:1 3:1 4:1 5:1

2 1:1 2:0 3:1 4:1 5:0

3 1:1 2:1 3:0 4:1 5:0

4 1:1 2:1 3:1 4:0 5:0

5 1:1 2:0 3:0 4:0 5:0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-12T22:09:33.680

SVM 无法进行聚类，您可以找到多类 SVM 和其他变体。另一方面，存在支持向量聚类，它是一种与 SVM 略有不同但接近的方法。我不知道有什么包提供这个算法，到目前为止它不是很有名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-13T09:18:08.250

正如许多人所指出的，一般来说，SVM 是用于分类的。尽管存在基于 SVM 的聚类算法，它与最初的 SVM 类似，可以使用[内核技巧](http://en.wikipedia.org/wiki/Kernel_trick)，它允许您处理各种类型的数据，包括图形（图形内核）。Adjcacency 矩阵是图相似性的相当糟糕的表示（除非您实际上对非常简单的现象感兴趣，但是使用基于 SVM 的方法似乎有点太多了。相信奥卡姆剃刀 - 我建议最简单的方法是最好的方法寻找/使用更简单的聚类方法，如果它们不够用，则考虑切换到 SVM 聚类。

我强烈建议阅读有关该主题的论文，因为它并不像看起来那么容易，但它是经过深入研究的主题：

*   [关于图挖掘和图内核的介绍](http://www.cs.ucsb.edu/~xyan/tutorial/KDD08_graph_partII.pdf)
*   Michel Neuhaus，Horst Bunke：源自图形编辑距离的随机游走内核。SSPR/SPR 2006：191-199
*   SVN Vishwanathan、Karsten M. Borgwardt、Nicol N. Schraudolph：图内核的快速计算。NIPS 2006:1449-1456

对于实现本身，matlab 库（已经提到）位于：[https ://sites.google.com/site/daewonlee/research/svctoolbox](https://sites.google.com/site/daewonlee/research/svctoolbox)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-10T16:28:20.300

有几篇论文谈到了支持向量聚类；这是我要评估的一个：http: [//jmlr.org/papers/volume2/horn01a/rev1/horn01ar1.pdf](http://jmlr.org/papers/volume2/horn01a/rev1/horn01ar1.pdf)

另外，在这里找到了一个 R 包：[http ://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.190.9809](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.190.9809)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-15T14:21:53.067

您可以**执行以下操作**：

1.  对数据应用尽可能多的聚类算法。

2.  确定您需要拥有多少个集群（或使用任何生成的集群中的多个集群）。

3.  优化产生的输出，使聚类算法的输出与所需的集群数量（以及那些确切的集群）相匹配。这是一个棘手的部分！

4.  向 SVM 提供由集群产生的数据，例如质心、平均值等。

5.  最后，使用经过训练的 SVM 根据您最初输入的数据生成集群。

因此，我们的*想法是在其他聚类模型的基础上，用 SVM 开发一个通用的聚类模型*……这样，你就可以拥有无​​监督的 SVM 聚类。需要注意的是，您需要尽可能多的聚类数据行才能使 SVM 工作（否则，SVM 将为您提供的每个输入输出单个数字）。

资料来源：目前正在研究这种方法。

编辑：语法等

# c++ - Webkit GTK：使用 DOM Tree Walker

> ID：11777954
> 
> 赞同：0
> 
> 时间：2012-08-02T12:59:02.037
> 
> 标签：c++, c, webkit, gtk, webkitgtk

所以，我正在试验 Webkit GTK DOM 函数。它非常简单，除了一件事：API 中有一个有用的部分称为`WebKitDOMTreeWalker`，我假设它可以让您遍历 DOM 中的每个节点，就像`TreeWalker`Javascript 中的对象一样。

现在，在 Javascript 中，通过调用创建 TreeWalker：

`document.createTreeWalker(root, nodesToShow, filter, entityExpandBol)`

因此，在 WebKit GTK 中，API 中有一个明显的对应物——一个名为`webkit_dom_document_create_tree_walker`. 函数签名是：

```
WebKitDOMTreeWalker* webkit_dom_document_create_tree_walker(WebKitDOMDocument* self, WebKitDOMNode* root, gulong what_to_show, WebKitDOMNodeFilter* filter, gboolean expand_entity_references, GError **error); 
```

所以用 WebKit GTK 创建 TreeWalker 看起来很简单——除了一个大问题：第四个参数`webkit_dom_document_create_tree_walker`需要一个***过滤器***对象，也就是说，它需要一个`WebKitDOMNodeFilter`. 好吧，Javascript 函数也需要一个过滤器，但是`null`如果您不想使用过滤器，您可以通过。使用 Webkit API，传递`NULL`不起作用。如果你打电话：

```
WebKitDOMTreeWalker* walker = webkit_dom_document_create_tree_walker(doc, root, SHOW_ALL, NULL, false, err) 
```

您收到错误消息：

> ** (webkit:3367): CRITICAL **: WebKitDOMTreeWalker* webkit_dom_document_create_tree_walker(WebKitDOMDocument*, WebKitDOMNode*, gulong, WebKitDOMNodeFilter*, gboolean, GError** ): 断言“过滤器”失败

因此，WebKit API 不会接受过滤器参数的 NULL 指针。显然你需要传递一个`WebKitDOMNodeFilter`. 好的，再一次 - 这也不是问题，除非我通过 WebKit API 和 Google 进行了广泛搜索，但*无论如何我都找不到创建 WebKitDOMNodeFilter*对象！[WebKitDOMNodeFilter.h](http://www.google.com/url?sa=t&rct=j&q=webkitdomnodefilter.h&source=web&cd=1&ved=0CE4QFjAA&url=http://www.emdebian.org/~zumbi/tmp/webkit-1.6.1/build-2.0/DerivedSources/webkit/WebKitDOMNodeFilter.h&ei=5ngaUNvLHOT40gHryYCwBg&usg=AFQjCNH14toI2tpkYI20wmBhYNH8390xBA&cad=rja)的头文件不公开任何 WebKitDOMNodeFilter 的构造函数。似乎 API 根本不会公开实际构造 WebKitDOMNodeFilter 对象。

*然而...... API 公开了许多需要*WebKitDOMNodeFilter 的函数（如 webkit_dom_document_create_tree_walker 和 webkit_dom_document_create_node_iterator）。那么...... API 现在不完整吗？或者，有什么方法可以创建一个我没有看到的过滤器对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T13:19:35.967

您可以尝试`WebKitDOMNodeFilter`通过调用将 null 转换为类型 `WEBKIT_DOM_NODE_FILTER(null)`吗？

# c++ - OpenCV 2.4.2 “operations.hpp”中的编译问题

> ID：11777958
> 
> 赞同：1
> 
> 时间：2012-08-02T12:59:32.210
> 
> 标签：c++, opencv

我正在尝试在 Windows x64 和 Netbeans 上安装 openCV 2.4.2。我遵循了以下指南：[http ://projectsfromhellandmore.blogspot.co.nz/2012/06/opencv-241-netbeans-windows-7-plus.html](http://projectsfromhellandmore.blogspot.co.nz/2012/06/opencv-241-netbeans-windows-7-plus.html)

当我尝试编译指南中包含的示例代码时，我在文件“include/opencv2/core/operations.hpp”中收到以下代码块的以下错误，并且我没有找到任何修复或想出如何修复我自己：

```
template<typename _Tp, typename _Base> inline void AlgorithmInfo::addParam(Algorithm& algo, const char* parameter,
              Ptr<_Tp>& value, bool readOnly, Ptr<_Tp> (Algorithm::*getter)(), void (Algorithm::*setter)(const Ptr<_Tp>&),
              const string& help)
{
//TODO: static assert: _Tp inherits from _Base
addParam_(algo, parameter, ParamType<_Base>::type, &value, readOnly,
          (Algorithm::Getter)getter, (Algorithm::Setter)setter, help);
} 
```

错误：得到 2 个模板参数但需要 1 个

第二个有错误的代码块是：

```
template<typename _Tp> inline void AlgorithmInfo::addParam(Algorithm& algo, const char* parameter,
              Ptr<_Tp>& value, bool readOnly, Ptr<_Tp> (Algorithm::*getter)(), void (Algorithm::*setter)(const Ptr<_Tp>&),
              const string& help)
{
//TODO: static assert: _Tp inherits from Algorithm
addParam_(algo, parameter, ParamType<Algorithm>::type, &value, readOnly,
          (Algorithm::Getter)getter, (Algorithm::Setter)setter, help);
} 
```

错误：重新定义 ...（第一个代码块中的函数）

任何帮助将不胜感激谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T22:01:57.813

我在使用 Opencv2.4.x 的 MinGW 时遇到了同样的问题，后来发现 operations.hpp 文件没有问题。相反，我安装的 MinGW 编译器有问题。我从 sourcefourge 重新安装了编译器，它工作了。检查您的 netbeans 编译器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T12:41:59.527

I faced the same problem. the solution to this problem is just comment out the entire template inline function. this function is declared twice just below one another thats why the issue. just comment out one of them.

# macos - 用于向 Mountain Lion 中的通知中心发送通知的命令行实用程序

> ID：11777962
> 
> 赞同：10
> 
> 时间：2012-08-02T12:59:43.863
> 
> 标签：macos, command-line, notifications

是否有任何命令行实用程序可以将通知发送到通知中心？类似于咆哮的东西`growlnotify`。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-05T09:46:14.073

查看[GitHub 上的终端通知程序](https://github.com/julienXX/terminal-notifier)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-25T14:16:09.903

在 Maverics 中，可以从 Apple Script 触发通知，但不确定它是否适用于 Mountain Lion：

```
display notification "Hello!" 
```

我制作了一个简单的命令行脚本来将参数传递给苹果脚本。单线安装：

```
echo -e '#!/bin/bash\n/usr/bin/osascript -e "display notification \"$*\""'|sudo -s "cd /usr/local/bin;tee notify&&chmod +x notify" 
```

将下面的代码输出到 /usr/local/bin （必须存在）并添加可执行标志。确保 /usr/local/bin 在您的 $PATH 中。

```
#! /bin/bash
/usr/bin/osascript -e "display notification \"$*\"" 
```

现在显示通知：

```
notify "Lorem ipsum dolor sit amet"
sleep 5 ; notify "Slow command finished" 
```

# javascript - 使用来自文本框的地址从 geoloc 设置标记

> ID：11777965
> 
> 赞同：0
> 
> 时间：2012-08-02T12:59:54.173
> 
> 标签：javascript, html, google-maps

我有这部分代码。我想放置标记，当文本框中的文本发生变化时 - 它与函数 changeValue() 一起使用 - 获取新地址。

然后，我想在地址变量发生变化时放置这个标记。怎么办？

我尝试使用下面的代码，但出现此错误： `Error: ReferenceError: changeValue is not defined` 出了什么问题？

```
 (...)
    <asp:TextBox Style="width: 300px;" runat="server" ID="tbStreet" onchange="changeValue()"></asp:TextBox>
     (...) // more 5 textboxes

   <script type='text/javascript'>
          (...) // 2 long string arrays.

        var address;
        function mapaStart() {
            var wspolrzedne = new google.maps.LatLng(52.22105994970536, 19.22609921875007);
            var opcjeMapy = {
                zoom: 5,
                center: wspolrzedne,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            };
            var map = new google.maps.Map(document.getElementById("mapka"), opcjeMapy);

        function changeValue() {

            var ulica;
            var miasto;
            var woj1;
            var panstwo1;
            ulica = document.getElementById("<%=tbStreet.ClientID%>").value;
            miasto = document.getElementById("<%=tbCity.ClientID%>").value;
            woj1 = woj[document.getElementById("<%=ddlProvince.ClientID%>").value];
            panstwo1 = panstwa[document.getElementById("<%=ddlCountry.ClientID%>").value];
            address = panstwo1 + ", " + woj1 + ", " + miasto + ", " + ulica;
            alert(address);
        }   
            var geokoder = new google.maps.Geocoder();
            map.setCenter(address.geometry.location);
            var marker = new google.maps.Marker(
                {
                    map: map,
                    position: address.geometry.location,
                }
            );

        } 

    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T13:33:03.940

您的 changeValue 函数是 mapaStart 函数的本地函数。在 HTML click/onchange 侦听器运行的全局上下文中无法访问它。要使其全局化，请将其移到 mapaStart 函数之外。

# mysql - 如何选择最近插入的数据到mysql数据库中？

> ID：11777967
> 
> 赞同：-2
> 
> 时间：2012-08-02T13:00:03.763
> 
> 标签：mysql

我有一个有两列的表：

```
#MY_DATA
* ID
* DATA 
```

如何编写选择查询来获取最近插入的数据（如 STACK）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T13:01:58.817

```
Select data from MY_DATA where ID=(select max ID from MY_DATA) 
```

如果你想要多行然后

```
Select data from MY_DATA order by ID desc limit X 
```

**X**是一个正数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T13:03:51.803

您的 ID 字段是自动生成的吗（例如 mysql 中的 autoincrement 或 Oracle 中的 secuence）？如果是，那么只需对其进行排序：

```
select * from my_table order by id desc 
```

如果没有，则没有标准方法。最好的方法是添加一些时间戳字段，存储新记录的当前日期时间值，然后按此字段排序。

# codeigniter - 代码点火器帖子和类别

> ID：11777971
> 
> 赞同：1
> 
> 时间：2012-08-02T13:00:29.540
> 
> 标签：codeigniter, blogs, categories, posts

我正在做一个代码点火器项目，我是代码点火器的新手，但现在在一定程度上理解它。我为 uni 构建了一个简单的应用程序，但在尝试显示哪些项目属于哪些类别时遇到了问题。

我的数据库结构

```
|------------------|  |--------------------|  |---------------------------------|
| books            |  | book_categories    |  | book_linktable                  |
|------------------|  |--------------------|  |---------------------------------|
| book_id          |  | book_category_id   |  | book_linktable_book_id          |
| book_name        |  | book_category_name |  | book_linktable_book_category_id |
| book_description |  |--------------------|  |---------------------------------|
| book_grade       |
| book_author      |
| book_edition     |
| book_publisher   |
| book_price       |
| book_image       |
|------------------| 
```

好的，所以在我的模型中使用连接我已经成功地从 book_linktable 中提取了我想要的数据，并且我在我的视图中使用了一个简单的 foreach 循环来显示它。

麻烦的是，假设一本书属于 2 个或更多类别，它在 book_linktable 中看起来像这样：

```
|------------------------|---------------------------------|
| book_linktable_book_id | book_linktable_book_category_id |
|------------------------|---------------------------------|
|           1            |                1                |
|           1            |                2                |
|------------------------|---------------------------------| 
```

（所以这里第 1 册属于第 1 类和第 2 类）

但是，问题是，当我在视图中执行 foreach 循环时，它将它们显示为两本不同的书，如下所示：

```
|Name  | Grade   | Price | Categories   |
|---------------------------------------|
|Book1 | Grade 1 | £7.00 | Announcement |
|Book1 | Grade 1 | £7.00 | Event        | 
```

我只需要找出如何呼应书籍所在的不同类别，而不是多次显示书籍。像这样的东西：

```
|Name  | Grade   | Price | Categories          |
|----------------------------------------------|
|Book1 | Grade 1 | £7.00 | Announcement, Event | 
```

这是我的模型函数：

```
function get_books(){       
        $this->db->select('books.book_id, books.book_name, books.book_grade, books.book_edition, books.book_price, book_categories.book_category_id, book_categories.book_category_name');
        $this->db->from('book_linktable');
        $this->db->join('books', 'book_linktable.book_linktable_book_id = books.book_id');
        $this->db->join('book_categories', 'book_linktable.book_linktable_book_category_id = book_categories.book_category_id');

        $query = $this->db->get();
        return $query->result();
    } //function get_books() 
```

这是我的控制器功能：

```
function books($condition = FALSE){
        if($condition === TRUE OR $this->admin_model->logged_in() === TRUE)
        {
            $data = $this->admin_model->display();
            $data['query'] = $this->admin_model->get_books();
            $data['page_title'] = 'Books';
            $this->load->view('admin_section/books/main', $data);
        }
        else
        {
            $this->load->view('admin_section/details');
        }
    }  //function books() 
```

这是我在视图中的foreach：

```
 <?php
      foreach($query as $row) {
        echo "<tr>";
        echo "<td>" . $row->book_name . "</td>";
        echo "<td>" . $row->book_grade . "</td>";
        echo "<td>" . $row->book_edition . "</td>";
        echo "<td>" . "&pound;" . $row->book_price . "</td>";
        echo "<td>" . $row->book_category_name . "</td>";
        echo "<td>" . anchor('books_admin/edit_book/' . $row->book_id, img(array('src'=>'/sys_icons/edit.png','border'=>'0','alt'=>'Edit'))) . " ";
echo "<td>" . anchor('books_admin/delete_book/' . $row->book_id, img(array('src'=>'/sys_icons/delete.png','border'=>'0','alt'=>'Delete', 'class' => 'delete_book'))) . "</td>";
        echo "</tr>";
      }
    ?> 
```

任何帮助将非常感激

谢谢，汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T15:09:36.393

```
function getMyRequirements()
{
$query = "
select
  books.book_id,
  books.book_name,
  books.book_grade,
  books.book_edition,
  books.book_price,
  group_concat(book_categories.book_category_id) as book_category_id,
  book_categories.book_category_name
from book_linktable
  left join books
    on book_linktable.book_linktable_book_id = books.book_id
  left join book_categories
    on book_linktable.book_linktable_book_category_id = book_categories.book_category_id
group by books.book_id
";   

$query = $this->db->query($query);
return $query->result() ;
} 
```

使用此查询。组 concat 将为您提供逗号分隔的字段，您可以在 php 端爆炸。

在控制器中

```
function getWhatiNeed(){
    $this->load->model('test');// The model where the getMyRequirements function is
    $result = $this->test->getMyRequirements();
    $data['result'] = $result;
    $this->load->view('my_view',$data);
} 
```

现在在您循环结果时的视图中

```
if(count($result)>0)
    foreach($results as $row){
        $categories = explode (',',$row->book_category_id);

        foreach($categories as $category){
              echo  $category;
        }
    } 
```

# asp-classic - 我需要在经典的 asp 代码中创建 asp.net 的副本。请建议

> ID：11777972
> 
> 赞同：2
> 
> 时间：2012-08-02T13:00:30.300
> 
> 标签：asp-classic

我需要遵循 asp.net 代码的经典 asp 代码。

asp.net-System.Environment.MachineName

asp.net-Server.MapPath

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T14:00:31.537

ASP Server.MapPath 不像 ASP.NET 版本那样支持 URL 开头的“~/”解析。这是我去年在这里发布的代码：

```
Function UrlContent(sUrl) 
    If InStr(1, sUrl, "~/") = 1 Then 
        UrlContent = ApplicationPath & Mid(sUrl, 2) 
    Else 
        UrlContent = sUrl 
    End If 
End Function 

Function ApplicationPath() 

    Dim pos: pos = Len(Request.ServerVariables("INSTANCE_META_PATH")) + 6 

    ApplicationPath = Mid(Request.ServerVariables("APPL_MD_PATH"), pos) 

End Function 
```

接受传入的`UriContent`URL 并解析“~/”以返回相对于主机网站的 url。因此，与 ASP.NET 代码等效的 MapPath 是：

```
Dim physicalPath : physicalPath = Server.MapPath(UrlContent(virtualPath)) 
```

获取机器名称要困难得多，因为您需要访问 Windows API。名为“SERVER_NAME”的服务器变量只是请求中使用的主机名，因此它与实际的 Windows 机器名不同。

创建一个允许脚本访问环境的 .NET COM Interop dll 相当容易。

# php - 是否可以从客户端异步向服务器发送两个 ajax 请求？

> ID：11777975
> 
> 赞同：0
> 
> 时间：2012-08-02T13:00:59.197
> 
> 标签：php, ajax, asynchronous, request

我的情况是我有一个页面，卖家要接受客户的订单，在客户下订单后，卖家点击确认按钮并等待客户通过他的身份证，我用 ajax 请求做并弹出一个包含产品列表、消息和取消按钮的对话框。

在服务器端发送我的 ajax 后，我正在做一个带有“睡眠”的“for”来检查用户是否通过了他的卡，然后如果他有，我将这些项目放入他的账单中（保存到数据库中）。问题是，如果用户决定取消进程，我无法让取消 ajax 请求工作，因为它忙于服务器端的第一个请求并等待它的返回。

有人对此有什么建议吗？我真的希望网站的工作流程是这样的：

客户订单 -> 卖家添加商品并点击确认 -> 客户通过确认或卖家可以取消 -> 过程结束

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T13:07:16.600

即使有一种简单的方法可以按照您的方式进行操作，但在多次连接之后，此过程也会很快使服务器不堪重负。

我会在要求客户身份识别之前将客户的订单存储到数据库中，订单上的状态字段设置为“等待身份识别”，或者类似的东西。然后您可以继续识别流程，而无需等待 PHP 脚本，并节省大量资源。

如果客户不小心断开了连接，您仍然可以保存她的订单，并且可以让她在以后完成识别。

最后，当客户端成功完成识别时，您可以简单地将订单的状态字段更新为“已验证”，以表明它已准备好进行处理。

* * *

编辑：要解决您的特定问题，请考虑以下流程：

1.  您将订单保存为“待识别”并显示“等待...”对话框。

2.  您每隔几秒钟执行一个非常简单的请求，询问订单状态是否已更改，以了解对话框何时需要关闭。

3.  在某些时候，识别设备会发送一个确认请求，您可以根据该请求检索订单并更改其状态。然后，您在第 2 步中实现的定期调用将启动并隐藏对话框。

会话不是作为临时存储介质的好位置，但 Redis、Memcached 或类似服务可以帮助您简化该过程，因为设备和站点可以以某种方式共享信息。

# asp.net - ASP.NET 异步/等待第 2 部分

> ID：11777978
> 
> 赞同：5
> 
> 时间：2012-08-02T13:01:01.927
> 
> 标签：asp.net, async-await

[我从这个问题](https://stackoverflow.com/questions/9867005/does-async-and-await-increase-performance-of-an-asp-net-application)中获得了 async/await-on-ASP.NET 的好处的变体。

我的理解是异步与并行不是一回事。所以，在 Web 服务器上，我想知道 async/await 给 ASP.NET 页面带来了多少好处。

IIS+ASP.NET 不是真的很擅长为请求分配线程吗？如果一个页面忙于等待资源，服务器将切换到处理另一个有工作要做的请求？

池中可供 ASP.NET 使用的线程数量有限 - async 是否更有效地使用它们？

正如 Skeet 先生在回答上述问题时指出的那样，我们并不是在谈论阻塞 UI 线程。我们已经是多线程的，并且在所有请求的任务完成之前无法完成 Web 响应，无论是否异步，对吧？

我想归根结底是这样的：

在 ASP.NET 页面中异步读取资源（例如文件或 DB 请求）与阻止它有什么好处？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-02T14:40:33.073

> 如果一个页面忙于等待资源，服务器将切换到处理另一个有工作要做的请求？

我不这么认为。如果是这样的话，我会感到*非常*惊讶。这在理论上是可能的，但非常复杂。

> 池中可供 ASP.NET 使用的线程数量有限 - async 是否更有效地使用它们？

是的，因为当您执行`await`某些操作时，该请求的线程会立即返回到池中。

> 我们已经是多线程的，并且在所有请求的任务完成之前无法完成 Web 响应，无论是否异步，对吧？

那是对的。`async`在服务器场景中，就是要消除线程池上的压力。

> 在 ASP.NET 页面中异步读取资源（例如文件或 DB 请求）与阻止它有什么好处？

绝对地！

如果您阻止文件/服务调用/db 请求，则该线程将在该操作期间使用。如果您`await`是文件/服务调用/db 请求，则该线程将立即返回到线程池。

一个（真的很酷！）结果是您可以有一个正在进行的请求，并且当它（a）等待某些操作时，*没有*线程为该请求提供服务！零线程并发，如果你愿意的话。

`await`当操作完成时，该方法在线程池中的一个（可能不同的）线程上恢复。

总之：`async`比线程更好地扩展，所以服务器端肯定有好处。

更多信息：我自己的[帖子](http://nitoprograms.blogspot.com/2012/02/async-and-await.html)[介绍`async`](http://nitoprograms.blogspot.com/2012/02/async-and-await.html)和[这个*很棒*的视频](http://channel9.msdn.com/Events/aspConf/aspConf/Async-in-ASP-NET)。

# ruby-on-rails - rspec 中的上下文

> ID：11777979
> 
> 赞同：1
> 
> 时间：2012-08-02T13:01:12.300
> 
> 标签：ruby-on-rails, ruby, rspec, function

我有一个基本的疑问。如果 rspec 文件包含许多上下文：

```
describe Name do
context "number1" do
.......
.......
end
context "number 2" do
.......
.......
end
context "number 3" do
.......
.......
end 
```

.rb 文件中应该如何描述每个上下文中的函数？他们应该在同一个班级还是不同班级？有什么书我可以阅读以提高我对这方面的了解吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-02T13:26:14.087

我在定义 rspec 文件时使用的结构（基于我对 rspec 所做的阅读）是`describes`用于描述特定函数，并`context`讨论特定的状态上下文和/或函数的路径。

示例类：

```
class MyClass
    def self.my_class_method(bool)
        if bool == true
            return "Yes"
        else
            return "No"
        end
    end

    def my_instance_method
        today = Date.today
        if today.month == 2 and today.day == 14
            puts "Valentine's Day"
        else
            puts "Other"
        end
     end
end 
```

如您所见，我定义了一个类方法和一个实例方法，它们执行非常愚蠢和随机的功能。但重点是：类方法会根据参数做一些不同的事情，而实例方法会根据一些外部因素做一些不同的事情：你需要测试所有这些，这些都是不同的*上下文*。但我们将在 rspec 文件中*描述这些函数。*

Rspec 文件：

```
describe MyClass do
    describe ".my_class_method" do
        context "with a 'true' argument" do
            it "returns 'Yes'." do
                MyClass.my_class_method(true).should eq "Yes"
            end
        end

        context "with a 'false' argument" do
            it "returns 'No'." do
                MyClass.my_class_method(false).should eq "No"
            end
        end
    end

    describe "#my_instance_method" do
        context "on Feb 14" do
            it "returns 'Valentine's Day'." do
                Date.stub(:today) { Date.new(2012,2,14) }
                MyClass.new.my_instance_method.should eq "Valentine's Day"
            end
        end

        context "on a day that isn't Feb 14" do
            it "returns 'Other'." do
                Date.stub(:today) { Date.new(2012,2,15) }
                MyClass.new.my_instance_method.should eq "Other"
            end
        end
    end
end 
```

因此，您可以看到`describe`is 用于说明您正在描述的方法，并与您的类中方法的名称相匹配。用于评估可以调用方法的`context`不同条件，或影响方法工作方式的不同状态。

希望这可以帮助！

# javascript - ADFS 2.0 和 jsonp

> ID：11777983
> 
> 赞同：1
> 
> 时间：2012-08-02T13:01:21.257
> 
> 标签：javascript, ajax, jsonp, adfs2.0, adfs

我有一个使用被动联合 (ADFS 2.0) 的主网站。这个网站有使用 jsonp 调用 MVC Web API 站点的 javascript。

我试图让这个 WebAPI 参与单点登录（同一台机器，不同的端口）。然而，被动重定向会破坏 jsonp。（STS 返回浏览器呈现的自己的脚本，我永远不会重定向到我的响应脚本的真实 url）

被动联合与 jsonp webapi 兼容吗？如果没有，我如何在没有用户名/密码凭据的情况下使用 Active Federation？即在调用 webapi 之前，用户将通过主网站进行身份验证，那么我如何在 webapi 中利用他们已经登录的事实？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T14:40:07.870

正如您所遇到的那样，被动联合协议在这种情况下将不起作用。

你有两个选择：

*   如果您的 web api 被您的网站独占使用，您可以共享用户身份验证时由 WIF 生成的 cookie。为此，如果您使用不同的网站，则应将`<cookieHandler>`WIF 配置部分配置为使用相同的域和路径并使用 FQDN（而不是机器名称），以便浏览器将网站和 API 识别为相同领域。

*   第二个选项是配置 Web API 以提取和验证 SAML 令牌（在身份验证期间生成）。您在这里要做的是保存用于身份验证的令牌（打开`<service>`WIF 配置元素上的 saveBootstrapToken），使用`claimsIdentity.GetBootrapToken()`扩展方法获取它，并将令牌作为 HTTP 标头附加到 JavaScript 调用中像“授权：持有者......令牌......”。在服务器端，您必须获取并验证令牌（以编程方式）。请注意，如果令牌太大，您可能会因为标头长度而在 IIS 中达到配额。

# django - django slugfield 数据库错误

> ID：11777986
> 
> 赞同：0
> 
> 时间：2012-08-02T13:01:41.640
> 
> 标签：django, django-models

我使用 django 1.4。

我正进入（状态 ：

`DatabaseError at / no such column: userside_post.slug`

这是我的`model.py`：

```
class Post(models.Model):
    title = models.CharField(max_length = 100)
    text  = models.TextField()
    slug = models.SlugField(unique=True)

    def __unicode__(self):
        return self.title 
```

我的`urls.py`：

```
urlpatterns = patterns('userside.views',
    url(r'^$','index'),
    url(r'^/(?P<postslug>_*)/$', 'userside.views.singlePost'),
) 
```

我的`views.py`：

```
def index(request):
    post_list = Post.objects.all()
    return render_to_response('userside/index.html',
                              {'post_list':post_list},
                              context_instance = RequestContext(request))

def singlePost(request,postslug):
    post = Post.objects.get(slug=postslug)
    context = {'post':post}
    return render_to_response('userside/detail.html',context,context_instance=RequestContext(request)) 
```

和我的模板文件：

```
{% if post_list %}
    {% for x in post_list %}
        <p><a href="/{{ x.slug }}/">{{ x.title }}</a></p>
        <p>{{ x.text }}</p>
        <hr>
    {% endfor %}
{% else %}
    <div class="center">No records! ( but looks like code works correctly!)</div>
{% endif %} 
```

这是 manage.py sql 用户端输出：

```
BEGIN;
CREATE TABLE "userside_post" (
    "id" integer NOT NULL PRIMARY KEY,
    "title" varchar(100) NOT NULL,
    "text" text NOT NULL,
    "slug" varchar(50) NOT NULL UNIQUE
)
;
COMMIT; 
```

但 PRAGMA table_info() 输出是：

```
0|id|integer|1||1
1|title|varchar(100)|1||0
2|text|text|1||0 
```

我想要做的是，在 url 上使用 slug。sth-like-this

最后一件事；

我希望 prepopulated_fields 通过帖子标题自动生成 slugs，需要 django 管理员。

但在我的项目中，我不会使用 django 的管理员。我正在编写一个新的管理页面。

我能为此做些什么？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T13:08:39.827

你检查过你的数据库吗？您需要`slug`通过运行 SQL 查询来创建字段。要了解您的表格应该如何运行

```
python manage.py sql userside 
```

根据我在您的问题中看到的内容，您应该在 dbshel​​l 中运行以下查询（这是针对 MySQL 数据库的）

```
ALTER TABLE userside_post ADD slug VARCHAR(255) NOT NULL UNIQUE; 
```

另外，我建议您使用[south](http://south.aeracode.org)进行数据库迁移。

# jquery - jquery 1.4.2 和 1.4.3 之间的重大变化？

> ID：11777995
> 
> 赞同：0
> 
> 时间：2012-08-02T13:02:07.280
> 
> 标签：jquery

从 jquery 1.4.2 升级到 1.4.3 时是否有任何已知问题？我正在尝试升级，但是，在 1.4.3 中，根本没有触发任何事件。当我恢复到 1.4.2 时，一切正常。我错过了一些完全明显的东西吗？

控制台中没有显示 javascript 错误，`$(document).ready()`工作正常，选择器也正常，只是没有触发事件！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T14:22:55.110

这是由 jquery.uuid.js 插件引起的，特别是：

```
$.uuid = function(p) {
    if (typeof (p) == 'object' && typeof (p.prefix) == 'string') {
        _uuid_default_prefix = p.prefix;
    } else {
        p = p || _uuid_default_prefix || '';
        return (p + _uuidlet() + _uuidlet() + "-" + _uuidlet() + "-" + _uuidlet() + "-" + _uuidlet() + "-" + _uuidlet() + _uuidlet() + _uuidlet());
    };
}; 
```

如果我将函数重命名为 $.uniqueidentifier，并将任何引用重命名为它，事件在 jquery 1.4.3 和任何更高版本中都可以正常工作。我希望没有其他人会遇到这个问题！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-24T06:39:59.643

从 jQuery 1.4.2 升级到 1.4.3 时，我的网站也停止工作。

我在这里使用 Dean Edwards 的 Base.js 库：http://dean.edwards.name/weblog/2006/03/base/[这](http://dean.edwards.name/weblog/2006/03/base/) 是导致问题的代码片段：

```
asm.ui.Builder = Base.extend({
/** Element to build other elements in (hidden, accessible). */
_builderCanvas: $('<div></div>')
    .addClass('ui-helper-hidden-accessible')
    .appendTo('body'),
/**
 * Creates XHTML element with supplied tag name and attributes.
 * @tparam string tag tag name
 * @tparam object attributes tag attributes
 * @treturn jQueryEl created element
 */
_buildTag: function (tag, attributes) {
    var str = '<' + tag;

    if (attributes != undefined) {
        $.each(attributes, function (name, value) {
            str += ' ' + name + '="' + value + '"';
        });
    }

    str += ($.inArray(tag, this._singleTags) != -1)
        ? '/>'
        : '></' + tag + '>';

    var newTag = $(str);
    return $(str).appendTo(this._builderCanvas);
},
...
}); 
```

问题是在 _buildTag 函数内部，_builderCanvas 是一个元素的集合，因此可以在 jQuery 1.4.2 中附加到。然而，在 jQuery 1.4.3 中，_builderCanvas 仍然是一个集合，但它是空的。

我通过将 _builderCanvas 初始化放入 _buildTag 函数来解决这个问题。

**我的问题的根本原因**是，在 jQuery 1.4.2 中，如果你在 document.body 存在之前调用了 'jQuery("body")'，它无论如何都会返回 document.body（作为优化），而在 jQuery 1.4.3 中，添加了一个附加条件（&& document.body），因此现在如果在文档准备好之前调用 jQuery('body')，则什么也找不到。

与我的问题无关，但从 1.4.2 到 1.4.3 的重大变化之一是函数 .data() 不再删除所有以前的数据，而是添加到它们。

# jquery - jQuery: 无限fadeOut $fadeIn 效果？

> ID：11777997
> 
> 赞同：0
> 
> 时间：2012-08-02T13:02:08.893
> 
> 标签：jquery

我想使用`fadeOut`和`fadeIn`效果为标签设置动画。但是该代码冻结了浏览器。如何解决？

```
function animateLabels() {
   $('label.orange-font').fadeOut(1000,function(){ $(this).fadeIn(1000,function(){ animateLabels(); }});
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T13:14:24.620

## 更新（[jsFiddle](http://jsfiddle.net/GeekyEggo/23RvM/1/)）

好吧，我有点无聊，所以为jQuery制作了一个插件，哈哈。它本质上是`pulsate`效果，但有一些额外的选项。

```
(function($) {
    $.fn.pulsate = function(options) {
        var defaults = {
            fadeIn: 1000,
            fadeInDelay: 150,
            fadeOut: 1000,
            fadeOutDelay: 150            
        };

        var settings = $.extend({}, defaults, options);

        function fadeOutIn(element) {
            $(element || this).delay(settings.fadeOutDelay)
                .fadeOut(settings.fadeOut)
                .delay(settings.fadeInDelay)
                .fadeIn(settings.fadeIn, fadeOutIn);
        }           

        return this.each(function() {
           fadeOutIn(this); 
        });
    };    
})(jQuery); 
```

然后像这样跳动：

```
$('label.orange-font').pulsate();

// or with options
$('label.orange-font').pulsate({
    fadeIn: 500,
    fadeOut: 2000
}); 
```

## 原创（[jsFiddle](http://jsfiddle.net/GeekyEggo/23RvM/)）

或者，您可以尝试使用该`delay`方法，如下所示

```
function pulsate(element) {
    $(element || this).delay(150).fadeOut(1000).delay(150).fadeIn(1000, pulsate); 
} 
```

然后像这样跳动：

```
pulsate($('label.orange-font')); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T13:25:40.677

你也可以使用[setInterval](http://www.w3schools.com/jsref/met_win_setinterval.asp)方法：

[这是jsFiddle。](http://jsfiddle.net/23RvM/7/)

```
function myRepeat() {
    $('div').delay(150).fadeOut(1000).delay(150).fadeIn(1000); 
}
setInterval(myRepeat,500); 
```