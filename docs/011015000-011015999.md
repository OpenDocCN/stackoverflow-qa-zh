# StackOverflow 问答 11015000-11015999

# encoding - 从十进制转换为十六进制

> ID：11015001
> 
> 赞同：0
> 
> 时间：2012-06-13T12:38:55.683
> 
> 标签：encoding, hex, go

我想将一个数字转换为十六进制并将结果存储在`[]byte`最长为 4 的长度中。这是我想出的，但感觉很迂回。

```
package main

import (
    "encoding/hex"
    "fmt"
)

func main() {

    hexstring := fmt.Sprintf("%x", 12345678)
    fmt.Println(hexstring)
    hexbytes, _ := hex.DecodeString(hexstring)
    for {
        if len(hexbytes) >= 4 {
            break
        }
        hexbytes = append(hexbytes, 0)
    }
    fmt.Println(hexbytes)
} 
```

我认为必须有更好的方法来使用`make([]byte, 4)`和`encoding/binary`包来做到这一点，但我无法让它工作。

沙盒链接：[http ://play.golang.org/p/IDXCatYQXY](http://play.golang.org/p/IDXCatYQXY)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T12:58:15.213

除非我误解了你的问题，否则它根本不是关于十六进制的。您想取一个 32 位整数，将其视为 4 个字节，然后将这些字节放入`[]byte`.

为此，您需要包中的`ByteOrder`类型（实际上是它的子类型`LittleEndian`和`BigEndian`）`encoding/binary`。像这样的东西：

```
package main

import (
"fmt"
"encoding/binary"
)

func main() {

    x := 12345678
    b := [4]byte{}
    binary.LittleEndian.PutUint32(b[:], uint32(x))
    fmt.Println(b)
} 
```

# javascript - FB.Canvas.scrollTo 和 FB.Canvas.setAutoGrow 在 Windows 上工作，但在 Mac 上不工作

> ID：11015004
> 
> 赞同：3
> 
> 时间：2012-06-13T12:39:09.573
> 
> 标签：javascript, facebook, scrollto

我正在我的页面中开发一个 facebook 应用程序 [https://www.facebook.com/BLOWUPPARTYOFFICIAL/app_449233448431335](https://www.facebook.com/BLOWUPPARTYOFFICIAL/app_449233448431335)

但页面不会滚动到顶部，并且页面不会调整大小（始终显示垂直滚动条）。

它适用于 Windows 上的 Chrome 和 Firefox，但我不知道为什么，它不适用于 Mac 上的 Safari、Chrome 和 Firefox。

我尝试将画布高度设置为流体并“固定为 800 像素”，但没有任何变化。

我没有使用 SSL 证书，而是使用[https://secure.social-server.com/v2/](https://secure.social-server.com/v2/)来执行此操作。这可能是问题吗？

这是尝试使用`FB.Canvas.scrollTo`and的多个页面之一上的代码`FB.Canvas.setAutoGrow()`：

```
<body>

<?php

$id = $_GET['id'];
?>

<div id="fb-root"></div>
<script>(function(d, s, id) {
var js, fjs = d.getElementsByTagName(s)[0];
if (d.getElementById(id)) return;
js = d.createElement(s); js.id = id;
js.src = "//connect.facebook.net/it_IT/all.js#xfbml=1&appId=449233448431335";
fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<script type="text/javascript">
window.fbAsyncInit = function() {
    //Your app id must be added there to work
    FB.init({appId: 'xxxxxxxxxxxx', status: true, cookie: true, xfbml: true});
    //Resize the iframe when needed
    FB.Canvas.setAutoGrow(true);
    FB.Canvas.scrollTo(0,0);
};

</script>

<br /><br /><br />
<div class="invia-box">
....... 
```

它是 facebook javascript sdk 错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-08T19:03:13.987

这不是 FB.Canvas 功能的问题......

1) 另一个脚本在 Facebook 脚本之前导致错误。

2）您的脚本声明不正确

尝试：

```
 <script>
window.fbAsyncInit = function () {
    FB.init({
        appId: 'YOUR_ID', // App ID
        status: true, // check login status
        cookie: true, // enable cookies to allow the server to access the session
        xfbml: true  // parse XFBML
    });

    FB.Canvas.setAutoGrow(true);
    FB.Canvas.scrollTo(0,0);

};

// Load the SDK Asynchronously
(function (d) {
    var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
    if (d.getElementById(id)) { return; }
    js = d.createElement('script'); js.id = id; js.async = true;
    js.src = "//connect.facebook.net/en_US/all.js";
    ref.parentNode.insertBefore(js, ref);
}(document));
</script> 
```

对我来说很好

# sql - 在 SQL Server Management Studio 中执行 NHibernate 生成的预处理语句

> ID：11015005
> 
> 赞同：3
> 
> 时间：2012-06-13T12:39:14.073
> 
> 标签：sql, sql-server-2008, nhibernate, prepared-statement

配置 NHibernate 以显示已执行的 SQL 完成了它应该做的事情，但是每当需要将 SQL 字符串复制粘贴到 SQL Server Management Studio 中时，我们必须对其进行大幅重新排列以使其兼容。

在我开始开发自己的应用程序，将其解析并重新排列成更适合 ManagementStudio 的 SQL 之前，我想重申以前没有这样做过——我不想花时间在这上面，稍后再了解。

是否有一种廉价且实用的方法可以将 NH 生成的准备好的语句转换为可以立即执行的内容？

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-13T14:45:36.643

我知道你可以用 nhibernate profiler 做到这一点，但这不是一个免费的工具。我也对这样做的免费替代方案感兴趣。

[http://nhprof.com/](http://nhprof.com/)

### 编辑

看起来有一个用于 log4net 的自定义附加程序，它将对其进行格式化，以便您可以实际运行 sql NHibernate 吐出。我在下面列出的博客中看到了它：

[http://gedgei.wordpress.com/2011/09/03/logging-nhibernate-queries-with-parameters/](http://gedgei.wordpress.com/2011/09/03/logging-nhibernate-queries-with-parameters/)

以下是我从上面的博客中获取并修改为使用 Guids 的代码：

```
/// <summary>
/// This log4net appender is used for outputting NHibernate sql statements in a sql management studio friendly format.
/// This means you should be able to copy the sql output from this appender and run it directly.  Normally in the NHibernate
/// output there is parameterized sql that must be manually edited to run it.
/// </summary>
public class NHibernateSqlAppender : ForwardingAppender
{
    private const string GuidRegex = @"\b[A-F0-9]{8}(?:-[A-F0-9]{4}){3}-[A-F0-9]{12}\b";

    protected override void Append(LoggingEvent loggingEvent)
    {
        var loggingEventData = loggingEvent.GetLoggingEventData();

        if (loggingEventData.Message.Contains("@p"))
        {
            StringBuilder messageBuilder = new StringBuilder();

            string message = loggingEventData.Message;
            var queries = Regex.Split(message, @"command\s\d+:");

            foreach (var query in queries)
                messageBuilder.Append(ReplaceQueryParametersWithValues(query));

            loggingEventData.Message = messageBuilder.ToString();
        }

        base.Append(new LoggingEvent(loggingEventData));
    }

    public static string ReplaceQueryParametersWithValues(string query)
    {
        string returnQuery = Regex.Replace(query, @"@p\d+(?=[,);\s])(?!\s*=)", match =>
        {
            Regex parameterValueRegex = new Regex(string.Format(@".*{0}\s*=\s*(.*?)\s*[\[].*", match));
            return parameterValueRegex.Match(query).Groups[1].ToString();
        });

        //Place single quotes around all Guids in the sql string
        returnQuery = Regex.Replace(returnQuery, GuidRegex, "'$0'", RegexOptions.IgnoreCase);

        int parameterListIndex = returnQuery.LastIndexOf("@p0");

        if (parameterListIndex != -1)
        {
            //Truncate the paramter list off the end since we are substituting the actual values in the regular expression above
            //The -1 also cuts off the semicolon at the end
            return returnQuery.Substring(0, parameterListIndex).Trim();
        }

        return returnQuery.Trim();
    }
} 
```

以下是将此输出发送到控制台的方法：

```
<appender name="NHibernateSqlAppender" type="NHibernatePlayground.Custom.NHibernateSqlAppender, NHibernatePlayground">
    <appender-ref ref="console" />
</appender>

<root>
    <appender-ref ref="NHibernateSqlAppender" />
</root> 
```

## 笔记：

看来这会在生产系统中引起一些相当严重的性能问题。我还没有找到更好的方法来做到这一点，但对于任何使用它的人来说，请注意这些性能问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T11:59:54.787

我有一段时间没有使用它了，但我相信使用拦截器会符合您的标准。

```
using NHibernate;
using System.Diagnostics;

public class SqlStatementInterceptor : EmptyInterceptor
{
    public override NHibernate.SqlCommand.SqlString OnPrepareStatement(NHibernate.SqlCommand.SqlString sql)
    {
        Trace.WriteLine(sql.ToString());
        return sql;
    }
} 
```

信用归用户`mindplay.dk` [这里](https://stackoverflow.com/a/5437641/1135049)。

# c# - 实时数据记录速度/性能/延迟

> ID：11015009
> 
> 赞同：1
> 
> 时间：2012-06-13T12:39:27.203
> 
> 标签：c#

**上下文**
我编写了一个实时读取在线市场数据并将其写入磁盘的软件。每个安全都通过多线程自定义队列后台工作程序写入单个文件。

                          Worker_Q_Security_A > File_A（追加）

市场数据 > Worker_Q_Security_B > File_B（追加）

                          Worker_Q_Security_C > File_C（追加）

为每条消息创建一个工作实例并排队，以减轻实时阅读器的负载并避免该级别的瓶颈。

**问题**
现在发生的情况是，随着数据量的增长，**我接收数据的速度比写入数据**的速度更快。这导致Workers Queues越来越大，写入的数据延迟越来越多。

有什么建议可以帮助提高速度性能，使写入速度更快、延迟低并避免写入工作人员级别的瓶颈？

**编辑**：
我正在使用 Pooya Khamooshi 的[QueuedBackgroudWorker](http://pooyakhamooshi.blogspot.fr/2009/11/create-thread-safe-queued.html)的定制版本 我不知道如何设计一种能够按到达顺序将滴答写入委托给线程系统的架构，并避免为每个滴答创建一个工作人员。

# symfony - Sonata Admin Bundle 2 1 个实体的管理页面

> ID：11015011
> 
> 赞同：0
> 
> 时间：2012-06-13T12:39:29.347
> 
> 标签：symfony, symfony-sonata

我正在尝试为 1 个实体创建 2 个管理页面，但模式是相同的：

php 应用程序/控制台路由：调试

```
dis_codes_companies_list              ANY      /admin/mobispot/discodes/discode/list
dis_codes_companies_create            ANY      /admin/mobispot/discodes/discode/create
dis_codes_companies_batch             ANY      /admin/mobispot/discodes/discode/batch
dis_codes_companies_edit              ANY      /admin/mobispot/discodes/discode/{id}/edit
dis_codes_companies_delete            ANY      /admin/mobispot/discodes/discode/{id}/delete
dis_codes_companies_show              ANY      /admin/mobispot/discodes/discode/{id}/show
dis_codes_companies_export            ANY      /admin/mobispot/discodes/discode/export
dis_codes_companies_set_premium       ANY      /admin/mobispot/discodes/discode/{id}/setpremium
dis_codes_personal_list               ANY      /admin/mobispot/discodes/discode/list
dis_codes_personal_create             ANY      /admin/mobispot/discodes/discode/create
dis_codes_personal_batch              ANY      /admin/mobispot/discodes/discode/batch
dis_codes_personal_edit               ANY      /admin/mobispot/discodes/discode/{id}/edit
dis_codes_personal_delete             ANY      /admin/mobispot/discodes/discode/{id}/delete
dis_codes_personal_show               ANY      /admin/mobispot/discodes/discode/{id}/show
dis_codes_personal_export             ANY      /admin/mobispot/discodes/discode/export
dis_codes_personal_set_premium        ANY      /admin/mobispot/discodes/discode/{id}/setpremium 
```

我可以在哪里更改路线模式？如果我在 RouteCollection 类中执行此操作，则会出现错误：

```
No route found for "GET /admin/mobispot/discodes/personal/list" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T08:52:54.110

您可以在 configureRoutes 方法中更改 AdminClass 中的路由

```
protected function configureRoutes(RouteCollection $router) {
    $router->add('copy', $this->getRouterIdParameter() . '/copy');
    $router->add('getSubProjects', $this->getRouterIdParameter() . '/getSubProjects');
} 
```

# c# - 奇怪的按钮图像行为

> ID：11015012
> 
> 赞同：0
> 
> 时间：2012-06-13T12:39:33.200
> 
> 标签：c#, .net, winforms, image, controls

我有一个有两种状态的按钮；正常和处于警报状态。正常情况下，按钮如下所示：

![按键状态：正常](../Images/907522a0cbfe749195dec0ffb0a2776c.png)

在警报状态下，以 gif 格式在红色和橙色之间闪烁，如下所示：

![按键状态：报警中](../Images/f1b3de37d53e531044fbc711ed71e3e8.png) ![按键状态：报警中](../Images/24deb9bab6b172afe212f7c87b478137.png)

下面是一些决定按钮状态的片段：

```
if (blah blah == true)
{
  ((Button)mainUI.Controls["btn" + device.deviceButtonNumber]).Image = null;
  //MessageBox.Show("Button " + device.deviceButtonNumber.ToString() + "is now flashing");
  ((Button)mainUI.Controls["btn" + device.deviceButtonNumber]).Image = Properties.Resources.red_orange;
}
else
{
  //MessageBox.Show("Button " + device.deviceButtonNumber.ToString() + "is now green");
  ((Button)mainUI.Controls["btn" + device.deviceButtonNumber]).Image = null;
  ((Button)mainUI.Controls["btn" + device.deviceButtonNumber]).BackColor = Color.Green;
} 
```

在片段中我将图像设置为空的原因是因为我认为它可能将图像堆叠在一起，但这似乎并没有解决它。

我遇到的问题是，经过一段时间轮询设备以检查按钮的状态......按钮将随机变化，如下所示：

![奇怪的状态](../Images/8b8c981356813e424e442b2a1c6d3c64.png)

我有点不知道为什么会发生这种情况，在它变成按钮状态之前的时间似乎有所不同：奇怪。有人知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T13:34:16.997

红十字表示在绘制按钮时出现错误，红十字图像是按钮的默认错误图像。我认为您的嵌入资源有问题检查资源中是否存在所有图像，如果然后您可能没有创建图像对象。

尝试使用

`((Button)mainUI.Controls["btn" + device.deviceButtonNumber]).Image = new Image(Properties.Resources.red_orange);`

从资源中的图像创建一个对象。也尝试使用不在资源中的图像，即：外部

# asp.net - 当我浏览 http://localhost:8004/elmah.axd 时，它会生成 404 错误

> ID：11015013
> 
> 赞同：2
> 
> 时间：2012-06-13T12:39:33.843
> 
> 标签：asp.net, elmah

当我浏览**http://localhost:8004/elmah.axd**时，它会显示应用程序中发生的错误，但也会生成 404 错误。我将如何停止这个 404 错误？

404错误的详细信息是：

```
    System.Web.HttpException (0x80004005)：文件不存在。
   在 System.Web.StaticFileHandler.GetFileInfo（字符串 virtualPathWithPathInfo，字符串物理路径，HttpResponse 响应）
   在 System.Web.StaticFileHandler.ProcessRequestInternal（HttpContext 上下文，字符串 overrideVirtualPath）
   在 System.Web.DefaultHttpHandler.BeginProcessRequest（HttpContext 上下文，AsyncCallback 回调，对象状态）
   在 System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
   在 System.Web.HttpApplication.ExecuteStep（IExecutionStep 步骤，Boolean& completedSynchronously）

```

我的网络配置文件是这样的：

```
    <配置>
  <配置节>
    <sectionGroup 名称="elmah" >
      <section name="security" requirePermission="false" type="Elmah.SecuritySectionHandler, Elmah" />
      <section name="errorLog" requirePermission="false" type="Elmah.ErrorLogSectionHandler, Elmah" />
    </section组>
  </ configSections >

  <系统.web>
        < 编译调试="true" targetFramework="4.0" />

        <http处理程序>
          < add verb="POST,GET,HEAD" path="elmah.axd" type="Elmah.ErrorLogPageFactory, Elmah" />
        </ httpHandlers >

        <http模块>
          < add name="ErrorLog" type="Elmah.ErrorLogModule, Elmah" />
        </ http模块>

        <身份验证模式="表单" >
          <forms loginUrl="~/Account/Login.aspx" timeout="2880" />
        </认证>
    …………
    …………
  </system.web>

  <系统.web服务器>
        < 模块 runAllManagedModulesForAllRequests="true" />
        < 验证 validateIntegratedModeConfiguration="false" />
        < 模块 >
          < add name="Elmah.ErrorLog" type="Elmah.ErrorLogModule, Elmah" preCondition="managedHandler" />
        </模块>
        <处理程序>
          < add name="Elmah" path="elmah.axd" verb="POST,GET,HEAD" type="Elmah.ErrorLogPageFactory, Elmah" preCondition="integratedMode" />
        </ 处理程序 >
  </system.webServer>

  <埃尔玛>
        <安全允许远程访问="0" />
        <errorLog type="Elmah.XmlFileErrorLog, Elmah" logPath="~/ErrorLogs" />
  </ 埃尔玛 >

</配置>

```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T06:07:37.077

> 我将如何停止这个 404 错误？

将一个添加`/favicon.ico`到您的 Web 应用程序。当现代浏览器（例如 Google Chrome）请求 url 时，它们会发送一个额外的 HTTP 请求`/favicon.ico`以显示与该页面关联的网站[图标。](http://en.wikipedia.org/wiki/Favicon)如果您的站点根目录中没有此类文件，则 Web 服务器将返回 404，这是您在 Elmah 错误日志中观察到的内容。

例如，尝试`elmah.axd`使用 Internet Explorer 浏览您的，您将不会看到这样的 404 错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T15:08:09.143

或者，您可以将以下内容添加到 web.config 文件中的 ELMAH 配置部分，以忽略 favicon.ico 请求。

```
<elmah>

 ...

<errorFilter>
  <!--    Do not capture 404 errors for favicon.ico file requests -->
  <test>
    <and>
      <equal binding="HttpStatusCode" value="404" type="Int32" />
      <regex binding="Context.Request.ServerVariables['URL']" pattern="/favicon.ico(\z|\?)" />
    </and>
  </test>
</errorFilter>

...

</elmah> 
```

# ios - 你如何计算你的 iOS 应用安装基数？

> ID：11015017
> 
> 赞同：2
> 
> 时间：2012-06-13T12:39:55.447
> 
> 标签：ios, deployment, analytics

在[Flow Pilots](http://www.flowpilots.com/)，我们希望跟踪有多少人安装和使用我们的应用程序。我们为企业客户制作应用程序，因此这些应用程序可能在 AppStore 中，但它们也可能使用企业部署。

你如何计算用户？您可以跟踪安装/重新安装/更新吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T12:59:33.390

出于某种原因，Apple 不提供这些统计数据。我不知道为什么，因为它们可能是人们想要看到 ***的关键数据。***

我知道获得这些统计数据的主要方法有两种：

1.  每周登录 iTunes 连接并手动记录这些统计数据并自行添加。（请参阅[App Store 报告说明](http://www.apple.com/itunesnews/docs/AppStoreReportingInstructions.pdf)）
2.  购买一个为您做 1\. 的应用程序（iOS 或 OSX），并将跟踪总统计数据。

我从来没有做过#2，但是周围有几个应用程序可以做到这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T12:50:01.970

做到这一点的一种方法（如果这对他们来说可以的话，您应该与您的客户澄清这一点）是将数据发送到您的服务器。只需跟踪会话计数（甚至为您的 NSUserDefaults 输入一个值）和应用程序版本，您应该没问题：

*   安装：会话计数为 0，向您的服务器发送“hello”消息（服务器存储[设备 ID](https://github.com/gekitz/UIDevice-with-UniqueIdentifier-for-iOS-5)）
*   重新安装：与“安装”相同（服务器识别设备 ID 已存在）
*   更新：应用程序版本与上次启动时不同，向您的服务器发送“更新”消息

# button - 单击按钮后如何移动到另一个视图？

> ID：11015018
> 
> 赞同：0
> 
> 时间：2012-06-13T12:39:58.857
> 
> 标签：button, sencha-touch, sencha-touch-2

我有一个登录屏幕，并且有一些注册按钮和登录按钮。当我按下登录按钮时，我应该移动到基本上是一个面板的注册屏幕。那怎么搬？？使用处理程序或控制器我该怎么做？

这是我的senchafiddle链接：

[SenchaFiddle 链接](http://www.senchafiddle.com/#vSs3z#UuC3F)

请帮忙..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T09:24:15.703

首先要做的是给按钮一个动作

```
 action:'submitLogin', 
```

这是在控制器中处理的。

```
 refs{
            nav:'#navview',
            submitButton:'button[action=submitLogin]',
               }

          control:{
        submitButton:{
            tap:'submitIt'
        }} 
```

您可以将主视图作为导航视图

```
 Ext.define('App.view.Main',{

    extend:'Ext.navigation.View',
    xtype:'mainvi',
    requires:['App.view.Login'],
    id:'navview',
    fullscreen:true,
    config:{
    items:[{
        xtype:'login',
    }]
}
}); 
```

在此代码中，登录页面位于导航视图中。现在，如果您想移动到另一个视图，您可以通过在导航视图中推送另一个视图来切换

```
 submitIt:function(){
    this.getNav().push({
        xtype:'registrationscreen'

     });
     } 
```

上面的代码可以通过在 refs 中声明来编写在控制器中

其中 navview 是导航视图的 ID。

您可以尝试另一种方法。应该有一个主面板，将所有视图作为项目放在该面板中。面板的布局应该是卡片，以便只显示一个视图，即登录视图。单击提交按钮后，您可以使用 方法移动到另一个视图

```
 setActiveItem(param); 
```

其中 param 是面板中视图的索引。

# java - 通过与数据库中的用户详细信息进行比较来登录用户

> ID：11015023
> 
> 赞同：0
> 
> 时间：2012-06-13T12:40:08.597
> 
> 标签：java, sql, netbeans

我想确保当用户输入用户名和密码时，通过检查输入是否与用户表中的某些行匹配来完成身份验证。到目前为止的代码如下：它只允许数据库中的第一个用户登录。请建议我如何正确设置它。谢谢

```
private class thehandler implements ActionListener {
    @Override
    public void actionPerformed(ActionEvent ae) {
        String namevalue = usertext.getText();
        String pwdvalue = pwdtext.getText();

        //read values from user table in sql database    
   try {
        Class.forName("com.mysql.jdbc.Driver");
        String conUrl = "jdbc:mysql://localhost/hall?" +
                               "user=root&password=blend";

        Connection con = DriverManager.getConnection(conUrl);
        Statement stmt = con.createStatement();

        ResultSet rs = stmt.executeQuery("SELECT * FROM user");

        while(rs.next()) {

            if(namevalue.equals(rs.getString("userName")) && pwdvalue.equals(rs.getString("password"))) {
            JOptionPane.showMessageDialog(null, "You are logged in", 
                    "Makhall login", JOptionPane.INFORMATION_MESSAGE);
            //move on to homepage if user is valid
            homePage home = new homePage();
            home.setAlwaysOnTop(rootPaneCheckingEnabled);
            }
            else {

            JOptionPane.showMessageDialog(null, "Incorrect username or password",
                    "Error", JOptionPane.ERROR_MESSAGE);
            }
            break;
        }
    }
    catch (SQLException e) {
        System.out.println("SQL Exception: "+ e.toString());
    } 
    catch (ClassNotFoundException cE) {
        System.out.println("Class Not Found Exception: "+ cE.toString());
    }

  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T12:42:43.963

对不起，我认为这是糟糕的代码。您将所有内容混合在一起：UI、数据库连接、查询等。Java 是一种面向对象的语言。好的对象设计的租户之一是凝聚力：让一个班级做好一件事。

首先将您的数据库查询分离到一个数据访问对象中。让它工作，测试它，并让其他客户简单地使用它。您将通过让更简单的对象协作来构建复杂的解决方案。

您的直接问题是您的 SELECT 需要一个 WHERE 子句：`WHERE username = ?`。

您只想检查手头用户的密码。

问号是故意的：使用 PreparedStatement，而不是 Statement。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T12:43:25.217

您正在从数据库中选择**所有用户。**永远不要这样做。相反，选择具有给定登录名的用户。如果存在，请检查密码。如果不存在，则登录本身不正确。

还：

*   将数据库访问代码与 UI 代码分开。那些应该在单独的类中。
*   不要将纯文本密码存储在数据库中。对它们加盐，对它们进行散列，检查密码，对密码加盐，散列，并将其与存储在数据库中的加盐和散列密码进行比较。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-25T16:31:26.677

我也做了同样的程序。看这里：

```
String m=jt1.getText();
String n= new String(jt2.getPassword());
try{        
           Connection con = DriverManager.getConnection("jdbc:mysql://localhost/darshanproject","root","");
           Statement st = con.createStatement();
           String q="select * from emp where UID='"+m+"'";
           ResultSet rs=st.executeQuery(q);
           rs.next();
           String user, pass;
           user =rs.getString("UID");
           pass =rs.getString("password");
           { if(m.compareTo(user)==0)
                 if(n.compareTo(pass)==0)
                     System.out.println("login Success");
                 else
                     System.out.println("Wrong Password");

           }
       }catch(Exception ex){
           System.out.println(ex);
       } 
```

# c# - 从 Outlook 中检索单个项目的最有效方法是什么（互操作）

> ID：11015028
> 
> 赞同：4
> 
> 时间：2012-06-13T12:40:34.467
> 
> 标签：c#, interop, outlook

我需要创建一个程序，将它自己的任务对象同步到 Outlook 中的任务。在操作过程中，outlook中的任务可能会被创建/更新/删除。

最直接的方法是遍历 Outlook 中的所有任务项，查找要更新的项。非常粗略：

```
ApplicationClass _app;
NameSpace _nameSpace;
MAPIFolder _folder;

_app = new ApplicationClass();
_nameSpace = _app.GetNamespace("MAPI");
_folder = _nameSpace.GetDefaultFolder(OlDefaultFolders.olFolderTasks);

Dictionary<int,MyTask> data = GetData();

for (int i = 1; i <= _folder.Items.Count; i++)
{
    TaskItem taskItem = (TaskItem)_folder.Items.Item(i);
    int itemID;
    if(ItemNeedsProcessing(taskItem, out itemID))
        UpdateItem(taskItem, data[itemID]);
} 
```

但这可能会遍历数百个项目（*取决于客户的 Outlook 任务历史*），只是为了进行一两个更改。

或者，我可以跟踪`ItemID`任务的...

```
string itemID = "00000000873..."; //taken from property on object.
object o = _nameSpace.GetItemFromID(itemID); //ignore possible exceptions for now
TaskItem taskItem = (TaskItem)o; 
```

...并直接更新它（*这会使应用程序端的任务的创建/删除有些复杂*）。

直接检索任务项 ( `GetItemFromID`) 是最有效的方法吗？还是我错过了一些陷阱？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T13:41:38.477

添加了 Outlook 2007+ [`Folder.GetTable`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook.mapifolder.gettable.aspx)，与[`Folder.Items`](http://msdn.microsoft.com/en-us/library/ff864247.aspx). 使用**Tables** [可以](http://books.google.com/books?id=DnxuBDWM9E4C&pg=PT856&lpg=PT856&dq=outlook%20gettable%2010%20times%20faster%20items&source=bl&ots=-HuR7tZOW9&sig=2RlYfvF83NkxWWm5RENsVfHCuDo&hl=en&sa=X&ei=U5nYT6qEC46E8ASP842rAw&ved=0CE8Q6AEwAA#v=onepage&q=outlook%20gettable%2010%20times%20faster%20items&f=false)比使用**Items**迭代器快 10 倍。

至于检索实际项目，[`Session.GetItemFromID`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook._namespace.getitemfromid%28v=office.14%29.aspx)是检索项目的最快方法 - 特别是如果您将[`Store.StoreID`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook._store.storeid)作为辅助参数传递，因此 Outlook 不必确定特定的存储属于哪个**存储。**`EntryID`

```
const string PR_STORE_ENTRYID = "http://schemas.microsoft.com/mapi/proptag/0x0FFB0102";
Outlook.Table tasks = Application.Session.GetDefaultFolder(Outlook.OlDefaultFolders.olFolderTasks).GetTable();
tasks.Columns.Add(PR_STORE_ENTRYID); // optimal for GetItemFromID
while (!tasks.EndOfTable)
{
    Outlook.Row task = tasks.GetNextRow();
    Outlook.TaskItem item = Application.Session.GetItemFromID(task["EntryID"], task.BinaryToString(PR_STORE_ENTRYID)) as Outlook.TaskItem;
} 
```

至于最佳方法 -如果您想最小化同步执行时间，您应该在应用程序中跟踪**Task EntryID**和**Task StoreID 。**否则，检索所有任务的蛮力方法将起作用，但我建议使用`Folder.GetTable()`而不是使用`Folder.Items`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T18:33:54.233

基于 SliverNinja 的[回答](https://stackoverflow.com/a/11016129/1149773)，我的建议是使用 Outlook Redemption [RDO Library](http://www.dimastr.com/redemption/rdo_introduction.htm)。它是一个第三方商业工具，但它允许您[`MAPITable`](http://www.dimastr.com/redemption/mapitable.htm)在 Outlook 2003（及更高版本）中使用。

# python - Cron 作业：如何运行需要打开显示的脚本？

> ID：11015029
> 
> 赞同：6
> 
> 时间：2012-06-13T12:40:44.933
> 
> 标签：python, linux, cron, crontab, x11

我想设置一个 cron 作业来运行 python 脚本，但它给了我这个错误：

```
RuntimeError: could not open display 
```

这是因为我导入了一个需要我打开显示（`pylab`例如）的模块。即使我的脚本没有生成任何要在监视器上显示的图片。

有什么方法可以让 crontab 在显示打开的情况下运行我的作业（就像我`ssh -X`进入机器一样）？我实际上不需要为监视器生成任何图表。我只需要正确导入我的模块。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T11:00:37.877

您需要有效的 DISPLAY 和 XAUTHORITY 才能在 Cron 中使用 X-Programms！

设置 DISPLAY 非常简单，在 Bash 中输入：

```
export DISPLAY=":0.0" 
```

为了获得有效的 XAUTHORITY，您必须寻找它。在 Debian/Gnome/gdm3 下，它们保存在 var/run/gdm3/*/database 我使用以下脚本：

```
export DISPLAY=":0.0"
[ -z $USER ] && USER=$( who | awk '{ print $1 }' | sort | uniq >/tmp/test )
for I in /var/run/gdm3/*; do
    AUTHUSER="`echo $I | awk -F '-' '{ print $3 }'`"
    for J in $USER; do
        [ "${AUTHUSER}" = "${J}" ] || continue
        USER="$J"
        export XAUTHORITY="${I}/database" && break
    done
done
sudo -u ${USER} /Path/to/xProgramm 
```

Var $USER 可以为空，脚本会寻找有效用户，否则您可以告诉脚本 var！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-20T16:55:47.837

`xvfb`您还可以使用或类似工具在帧缓冲区中运行您的应用程序：

[![下载](../Images/2326a589a969e598584effa4c88011cd.png)](http://apt.ubuntu.com/p/xvfb)或者`sudo apt-get install xvfb`

用法：

```
xvfb :1 -screen 0 800x600x8 & # WIDTHxHEIGHTxCOLORDEPTH
export DISPLAY=":1"
java application_name.jar 
```

或更短：

```
xvfb-run -a -e /tmp/some/log/file.log /home/user/application.run 
```

`-a`自动选择显示编号，`-e file`指定错误消息的日志文件。

# wix - WIX 需要从 CustomAction 中的二进制文件中提取文件 (XML)

> ID：11015041
> 
> 赞同：3
> 
> 时间：2012-06-13T12:41:15.853
> 
> 标签：wix, custom-action

我正在使用 WIX 实现...我需要在 CustomAction 中执行一个 EXE，我可以通过在 Binary 中添加 EXE 并在安装前调用它来做到这一点。但是这个 EXE 需要一个 XML 文件来读取应该存在于当前目录中的数据。为此，我可以将 XML 插入二进制文件中，就像我为 EXE 所做的那样。

现在我需要从二进制文件中提取 EXE 之前的 XML 文件。无法弄清楚我需要提取它的 CustomAction。

以下是我所做的事情：

*   将 XML 添加到二进制文件

`<Binary Id="TestXML.xml" SourceFile="d:\csu\TestXML.xml"/>`

*   CustomAction（我试过 - 问号“？？？”放什么）

`<CustomAction Id="SetBinaryWrite_TargetFileName_1" BinaryKey="TestXML.xml" ExeCommand="???" Execute="immediate" Return="ignore" />`

*   在 <InstallExecuteSequence> 中执行

`<Custom Action="SetBinaryWrite_TargetFileName_1" After="ValidateProductID"/>`

需要帮忙 ！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T06:33:01.033

对此没有内置支持。

从二进制表启动 EXE 是本机 Windows Installer 自定义操作。如果您只想从二进制表中提取文件，则需要使用自定义代码编写自己的自定义操作。

您可以尝试使用接收安装句柄并使用[Windows Installer API](http://msdn.microsoft.com/en-us/library/windows/desktop/aa368250%28v=vs.85%29.aspx)提取文件的[win32 DLL 。](http://www.codeproject.com/Articles/1747/MSI-Custom-Action-DLL)

# visual-studio-2008 - 自动完成 V Studio 2008

> ID：11015042
> 
> 赞同：0
> 
> 时间：2012-06-13T12:41:17.280
> 
> 标签：visual-studio-2008, intellisense

Intellisense 似乎在我的 Visual Studio 2008 中失败了。

如果我写“使用 System.c”，那么我会得到诸如 Collections 之类的建议。但除此之外，它什么也没做。

未检测到关键字，未检测到类/变量等。

工具-选项-文本编辑器-所有语言-语句完成被选中。

任何的想法？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T13:10:00.577

以安全模式 (DevEnv.exe /SafeMode) 启动 Visual Studio 并查看问题是否仍然存在。如果是这样，最可能的原因是插件/扩展出现故障。然后尝试一一禁用/重新启用它们以找到罪魁祸首。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T12:54:12.840

我的解决方案中也有这个。CTRL+ALT+SPACE 将在建议模式和完成模式之间切换。CTRL+SPACE 将弹出菜单（这可能是 Resharper 的快捷方式）。如果这样做无济于事，请尝试关闭所有解决方案，完全退出 Visual Studio，然后重新打开解决方案。

# java - Tomcat + NetBeans + JAX-WS 示例项目导致 javax.xml.ws.WebServiceException

> ID：11015043
> 
> 赞同：0
> 
> 时间：2012-06-13T12:41:18.677
> 
> 标签：java, tomcat, netbeans, jax-ws

我在 NetBeans 中创建了一个简单的 Java EE 项目（文件 -> 新项目 -> Java Web -> Web 应用程序）。

在新创建的项目中，我添加了一个名为“CesaService”的 Web 服务。这是来源：

```
package com.convista.jcesa.webservice;

import javax.jws.WebMethod;
import javax.jws.WebParam;
import javax.jws.WebService;

@WebService(serviceName = "CesaService")
public class CesaService {

    @WebMethod(operationName = "hello")
    public String hello(@WebParam(name = "name") String txt) {
        return "Hello " + txt + " !";
    }
} 
```

NetBean 然后生成以下文件：

太阳jaxws.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<endpoints version="2.0" xmlns="http://java.sun.com/xml/ns/jax-ws/ri/runtime">
  <endpoint implementation="com.convista.jcesa.webservice.CesaService" name="CesaService" url-pattern="/CesaService"/>
</endpoints> 
```

网页.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <listener>
        <listener-class>com.sun.xml.ws.transport.http.servlet.WSServletContextListener</listener-class>
    </listener>
    <servlet>
        <servlet-name>CesaService</servlet-name>
        <servlet-class>com.sun.xml.ws.transport.http.servlet.WSServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>CesaService</servlet-name>
        <url-pattern>/CesaService</url-pattern>
    </servlet-mapping>
    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>
</web-app> 
```

我的服务器是随附的 Tomcat 7.0.22.0。当我启动项目时，我收到以下错误：

```
Schwerwiegend: WSSERVLET11: failed to parse runtime descriptor: javax.xml.ws.WebServiceException: class com.convista.jcesa.webservice.jaxws.Hello do not have a property of the name name
javax.xml.ws.WebServiceException: class com.convista.jcesa.webservice.jaxws.Hello do not have a property of the name name
    at com.sun.xml.ws.server.sei.EndpointArgumentsBuilder$DocLit.<init>(EndpointArgumentsBuilder.java:531)
    at com.sun.xml.ws.server.sei.EndpointMethodHandler.createArgumentsBuilder(EndpointMethodHandler.java:133)
    at com.sun.xml.ws.server.sei.EndpointMethodHandler.<init>(EndpointMethodHandler.java:106)
    at com.sun.xml.ws.server.sei.SEIInvokerTube.<init>(SEIInvokerTube.java:82)
    at com.sun.xml.ws.server.EndpointFactory.createEndpoint(EndpointFactory.java:219)
    at com.sun.xml.ws.api.server.WSEndpoint.create(WSEndpoint.java:505)
    at com.sun.xml.ws.transport.http.DeploymentDescriptorParser.parseAdapters(DeploymentDescriptorParser.java:253)
    at com.sun.xml.ws.transport.http.DeploymentDescriptorParser.parse(DeploymentDescriptorParser.java:147)
    at com.sun.xml.ws.transport.http.servlet.WSServletContextListener.contextInitialized(WSServletContextListener.java:124)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4723)
    at org.apache.catalina.core.StandardContext$1.call(StandardContext.java:5226)
    at org.apache.catalina.core.StandardContext$1.call(StandardContext.java:5221)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: javax.xml.bind.JAXBException: name is not a valid property on class com.convista.jcesa.webservice.jaxws.Hello
    at com.sun.xml.bind.v2.runtime.JAXBContextImpl.getElementPropertyAccessor(JAXBContextImpl.java:971)
    at com.sun.xml.ws.server.sei.EndpointArgumentsBuilder$DocLit.<init>(EndpointArgumentsBuilder.java:520)
    ... 16 more

Jun 13, 2012 2:31:35 PM org.apache.catalina.core.StandardContext startInternal
Schwerwiegend: Error listenerStart
Jun 13, 2012 2:31:35 PM org.apache.catalina.core.StandardContext startInternal
Schwerwiegend: Context [/FST] startup failed due to previous errors
Jun 13, 2012 2:31:35 PM com.sun.xml.ws.transport.http.servlet.WSServletContextListener contextDestroyed
Information: WSSERVLET13: JAX-WS context listener destroyed
Jun 13, 2012 2:31:36 PM org.apache.catalina.core.StandardContext reload
Information: Reloading Context with name [/FST] is completed 
```

你知道是什么原因造成的吗？我不想上课`com.convista.jcesa.webservice.jaxws.Hello`，也不明白它在哪里被引用。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T12:45:28.573

```
 public String hello(@WebParam(name = "name") String txt) { 
```

应该

```
 public String hello(@WebParam(name = "name") String name) { 
```

# ios - iOS 结合了视频数据和照片的捕获输出

> ID：11015049
> 
> 赞同：3
> 
> 时间：2012-06-13T12:41:46.070
> 
> 标签：ios, video, avfoundation, photo, avcapturesession

使用 AVCaptureSession 我想通过 AVCaptureVideoDataOutput 捕获视频帧以进行分析，并根据结果决定立即通过 AVCaptureStillImageOutput 自动拍摄静止图像。所以基本上，两个捕获输出都被添加到 AVCaptureSession 实例中，使用预设的 AVCaptureSessionPresetPhoto 以获得最佳分辨率（记录的照片，用于视频 852x640 - 文档说它不受支持但仍然有效）。使用 AVCaptureSessionPresetPhoto 的第二个原因是因为“视野”比其他高质量预设更扩展，允许将对象保持在更靠近相机的位置以轻松稳定保持）。

在 iOS 5.1 发布之前，这一切都运行良好，这在拍摄静止图像时导致质量显着下降。静止图像的分辨率已降至 640x480。我尝试使用按钮手动拍摄静止图像，没有将视频数据输出添加到 AVCaptureSession，它再次提供了高质量的图像（如预期的那样）。

我非常感谢为这个问题提供解决方案提示！

谢谢

PS：捕获会话和输出的设置是根据 AVCam 等其他示例应用程序完成的。所以我不怀疑配置设置有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T09:28:24.477

已经解决了，出现问题是因为视频帧率设置为固定值，显然太高而无法按预期处理。iOS 5.1 似乎包含了一个节流阀。一旦删除了负责 AVCaptureConnection 的 videoMinFrameDuration 和 videoMaxFrameDuration 的值，问题就解决了。

# hadoop - 如何为一个 mapreduce 集群的 tasktracker 和第二个 mapreduce 集群的 Jobtracker 定义一个节点？

> ID：11015062
> 
> 赞同：0
> 
> 时间：2012-06-13T12:42:34.093
> 
> 标签：hadoop

假设有 3 个节点：Slave1、Slave2 和 Slave3。 *Slave1 和 Slave2 正在制作一个 mapreduce 集群。Slave2 和 Slave3 正在制作另一个 mapreduce 集群。*

*   要制作第一个集群 Slave1(JobTracker) 和 Slave2(tasktracker)，请执行以下操作：
*   **在 Slave1 机器上** `i) conf/masters Slave1 ii)conf/slaves Slave2 iii)conf/mapred-site.xml <property> <name>mapred.job.tracker</name> <value>Slave1:54311</value> </property>`

*   **在 Slave2 机器上** `i)conf/mapred-site.xml <property> <name>mapred.job.tracker</name> <value>Slave1:54311</value>`

*   为了使第二个集群 Slave2(JobTracker) 和 Slave3(tasktracker) 做了以下

*   **在 Slave2 机器** `i) conf/masters Slave2 ii)conf/slaves Slave3 iii)conf/mapred-site.xml <property> <name>mapred.job.tracker</name> <value>Slave2:54311</value> </property>` *上现在应该有什么属性可以在 Slave2 上为第二集群运行 JobTracker？*

*   **在 Slave3 机器上** `i)conf/mapred-site.xml <property> <name>mapred.job.tracker</name> <value>Slave2:54311</value>`

我希望我的观点很清楚。有什么建议么 ！！！

# windows - Using the firewall extension in WiX

> ID：11015063
> 
> 赞同：8
> 
> 时间：2012-06-13T12:42:36.303
> 
> 标签：windows, wix, wix-extension

I'm trying to write a WiX script that uses the firewall extension to WiX, and it doesn't seem to find the extension dll (I think).

The error I'm seeing is this:

> The File element contains an unhandled extension element 'fire:FirewallException'.
> Please ensure that the extension for elements in the 'http://schemas.microsoft.com /wix/FirewallExtension' namespace has been provided.

and the relevant part of my WiX source is this:

```
<?xml version="1.0" encoding="windows-1252"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi"
     xmlns:fire="http://schemas.microsoft.com/wix/FirewallExtension">
 <Component Id="Firewall" Guid="7278f07d-de6f-497f-9267-d5feb5216a5c" Directory="NotUsed">
  <File KeyPath="yes" Source="C:\Program Files\Java\jdk1.6.0_32\bin\java.exe">
   <fire:FirewallException Id="FWX1" Name="My Program" Port="80" Protocol="tcp"/>

```

If i try to register the WixFirewallExtension.dll file with regsrv32 i get this error:

> The module C:\Program Files (x86)\Windows Installer XML v3.5\bin\WixFirewallExtension.dll was loaded but the entry-point DllRegisterServer was not found.
> 
> Make sure that C:\Program Files (x86)\Windows Installer XML v3.5\bin\WixFirewallExtension.dll is a valid DLL or OCX file and then try again

The dll file is in my path, but that might not matter? Do i need to do anything else to get WiX to start using it?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-13T13:06:13.250

Found the answer after some more digging:

I needed to specify the extension on the commandline of light.exe, like this:

```
light myfile.wxs -ext WixFirewallExtension -out myfile.wixobj 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-20T11:07:57.843

You must add the reference of "**WixFirewallExtension.dll**" inside your WIX Project to resolve the issue.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-23T10:15:54.353

Adding "WixFirewallExtension.dll" inside your WIX Project will resolve the issue. To do it follow the below steps:-

> *   Open the project in visual studio.
> *   Right click on wix project
> *   Add reference to the above dll...

# c - 为什么 sscanf 不填充变量？

> ID：11015064
> 
> 赞同：0
> 
> 时间：2012-06-13T12:42:37.903
> 
> 标签：c, gcc, printf, scanf

我想知道为什么之前调用了`i`is `0`after的值。`sscanf`我期待的价值`i`被修改。

我在 Windows 7 版本 3.4.4 中使用 cygwin gcc

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main()
{
    unsigned char a[] = {1, 2, 3, 4, 5};
    int i = 0;

    printf("\nread value %d\n", sscanf(&a, "%d", &i));
    printf("\nvalue is %d\n", i);
    printf("\nbuffer is %s\n", a);
} 
```

输出是

> 读取值为 0
> 
> 值为 0
> 
> 缓冲区是一些特殊字符

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T12:52:59.840

首先，sscanf 的第一个参数应该是一个指向 char 的指针，但是您传递了一个指向 char 数组的指针，这是错误的类型。不过，这与问题无关。

要回答您的问题： sscanf （也像其他 *scanf 函数一样）仅在该值的格式说明符在字符串中匹配时才写入该值。因此，如果您有格式说明符“%d”，则仅当字符串以数字开头时，才会将 int 写入给定的 int 指针。正如您自己所说，您的字符串仅包含垃圾：值为 1 到 5 的（不可打印的）字符，后跟内存中的任何内容`a`。所以它不以数字开头，因此没有写数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T12:47:49.173

sscanf 用于字符串，而不是没有终止字符 \0 的字符数组。

[http://www.cplusplus.com/reference/clibrary/cstdio/sscanf/](http://www.cplusplus.com/reference/clibrary/cstdio/sscanf/)

> 从字符串读取格式化数据 从 str 读取数据并根据参数格式将它们存储到附加参数给出的位置。每个附加参数指向的位置都用格式字符串中指定的相应类型的值填充。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T12:51:47.983

您的代码中没有意外行为。请注意，函数[`sscanf`](http://www.cplusplus.com/reference/clibrary/cstdio/sscanf/)从给定字符串中读取数据并*“返回填充的变量数”*。您将`char`数组`a`作为源传递以从中检索数据，不仅它不包含任何数字（`1`与 不同`'1'`），它也不是以空值结尾的（`'\0'`丢失）。

通过`"%d"`您指定应读取十进制整数，但给定数组中没有十进制整数，因此`sscanf`不会读取任何数字并且`i`保持不变。函数返回`0`指示没有填充变量。

将要传递的数组的声明更改`sscanf`为有效字符串，它将产生所需的行为。试试`char a[] = "1 2 3"`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T12:51:43.880

这会给你你所期望的。

`a`已经是*一个指针*，所以只要`a`作为第一个参数就足够了`sscanf`。将 0 （即`\0`）作为最后一个条目可能是一个好主意，`a`因为您将它传递给两者`sscanf`并且`printf`期望打印一个以*null*结尾的字符串。

我还更改了 to 的类型`i`以`unsigned char`匹配您正在读取的数据。 

```
int main()
{
    unsigned char a[] = {1, 2, 3, 4, 5, 0};
    unsigned char i = 0;

    printf("\nread value %d\n", sscanf(a, "%c", &i));
    printf("\nvalue of i is %d\n", i);
    printf("\nbuffer is %s\n", a);
    return 0;
} 
```

注意：您之前得到 0 是因为`sscanf`未能从`a`.

# c# - LINQ：无效的匿名类型成员声明器。必须使用成员分配、简单名称或成员访问来声明匿名类型成员

> ID：11015065
> 
> 赞同：2
> 
> 时间：2012-06-13T12:42:38.257
> 
> 标签：c#, sql-server, linq, linq-to-sql

我在 select 语句中有以下 SQL 片段：

```
CASE 
WHEN wot.id LIKE '%Correct%' THEN 'Corrective'
WHEN wot.id LIKE '%Pred%' THEN 'Preventative'
ELSE 'OTHER'
END
AS worktype 
```

我已经将其翻译成 LINQ to SQL，如下所示：

```
WorkType = groupItem.Key.Id.Contains("Correct") ? "Corrective" : "OTHER" || 
WorkType = groupItem.Key.Id.Contains("Pred") ? "Preventative" : "OTHER" 
```

如果我将一个或另一个单独添加到 select 语句中，则查询可以正常工作。但是，当我添加 OR 语句并尝试在 select 中使用这两个语句时，我收到“无效的匿名类型成员声明器。必须使用成员赋值、简单名称或成员访问来声明匿名类型成员”错误。

我已经看到有关此错误的其他问题，在这些情况下，他们重命名了其中一个语句（例如 WorkType、Work_Type）以解决问题。但是，Worktype 是我的输出字段的名称，所以我需要两者都是 WorkType。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T12:46:24.633

保留一个`WorkType`并使用第二个三元条件作为第一个条件的第二个表达式：

```
WorkType = groupItem.Key.Id.Contains("Correct") ? "Corrective" : 
           (groupItem.Key.Id.Contains("Pred") ? "Preventative" : "OTHER") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T12:46:26.693

**解决方案 ：**

它应该是

```
WorkType = groupItem.Key.Id.Contains("Correct") ? "Corrective" :
    (groupItem.Key.Id.Contains("Pred") ? "Preventative" : "OTHER"); 
```

**问题：**

因为你的代码的问题是

```
WorkType = groupItem.Key.Id.Contains("Correct") ? "Corrective" : "OTHER" ||  
WorkType = groupItem.Key.Id.Contains("Pred") ? "Preventative" : "OTHER" 
```

**您两次为工作类型分配值，这是不可能的**

即使你写了这样的代码

```
WorkType = (groupItem.Key.Id.Contains("Correct") ? "Corrective" : "OTHER") ||  
          ( groupItem.Key.Id.Contains("Pred") ? "Preventative" : "OTHER"); 
```

**这将返回布尔值 true 或 false ...**

# c++ - 有没有像“cvHoughCircles()”这样的opencv函数来进行正方形检测？

> ID：11015069
> 
> 赞同：5
> 
> 时间：2012-06-13T12:42:49.753
> 
> 标签：c++, image-processing, opencv

是否有像“cvHoughCircles()”这样的opencv函数可以用于圆形检测程序的正方形检测编程，即**CvSeq* circles = cvHoughCircles()**，但我找不到正方形检测。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-13T14:11:23.040

您不需要任何单独的功能。OpenCV带有正方形检测样本（它实际上检测矩形，您可以添加所有边的长度应该相等以获得正方形的约束）。

检查此链接：[squares.cpp](http://code.opencv.org/projects/opencv/repository/raw/trunk/opencv/samples/cpp/squares.cpp)

关于此代码在此 SOF 中的工作方式有一个很好的解释：[How to identify square or rectangle with variable lengths and width by using javacv?](https://stackoverflow.com/questions/11093654/how-to-identify-square-or-rectangle-with-variable-lengths-and-width-by-using-jav)

以下是应用该代码时得到的结果。

![在此处输入图像描述](../Images/dafd0bf53b09f2c0b89ea2e300fa3c82.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-13T13:33:02.830

没有opencv函数可以直接求平方。

但是您可以使用 houghLines 函数来检测线条，并找到具有 90 度角的线条之间的交点。

要测量线之间的角度，我可以为您提供 Java 代码片段：

```
// returns cosine of angle between line segments 0 to 1, and 0 to 2.
// pt0 is the vertex / intersection
// angle of 90 degrees will have a cosine == 0

public static final double angleCosine(Point pt1, Point pt0, Point pt2) {
    double dx1 = pt1.x - pt0.x;
    double dy1 = pt1.y - pt0.y;
    double dx2 = pt2.x - pt0.x;
    double dy2 = pt2.y - pt0.y;
    return (dx1 * dx2 + dy1 * dy2) / Math.sqrt((dx1 * dx1 + dy1 * dy1) * (dx2 * dx2 + dy2 * dy2) + 1e-10);
} 
```

关于 houghLines 的文档：

[http://docs.opencv.org/modules/imgproc/doc/feature_detection.html?highlight=houghlines#houghlines](http://docs.opencv.org/modules/imgproc/doc/feature_detection.html?highlight=houghlines#houghlines)

# javascript - 更改文本区域中特定部分的文本颜色

> ID：11015074
> 
> 赞同：3
> 
> 时间：2012-06-13T12:43:14.010
> 
> 标签：javascript, jquery, html, css

是否有可能更改 HTML 文本区域中某些部分的文本颜色？

我喜欢在我的网站上输出一些突出显示的 PHP 代码，并可以通过单击此文本区域来选择完整的代码。我已经编写了一个 javascript 函数来选择完整的文本。但是如果我尝试在文本周围放置跨度，它们也会被打印出来。

如果有一种方法可以通过单击选择 div 中的文本，也许它应该与 div 一起使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T12:44:35.653

**不，这是不可能的**，但是您可以使用一些 css 使 div 看起来像 a`<textarea>`并且在 div 内您可以放置​​几个`<span>`带有颜色的 s。

你也可以使用[这样的东西](http://jsfiddle.net/GeJkU/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T13:19:01.553

*   **编辑**：我可以推荐 Jquery [Editable](http://www.arashkarimzadeh.com/jquery/7-editable-jquery-plugin.html)插件。也试试[这个插件](http://www.tonylea.com/go/examples/jquery-easy-editable-text-fields/)。它不仅执行就地编辑，还为您选择内部文本。
*   **复制**：[zClip](http://www.steamdev.com/zclip/)在复制到剪贴板方面做得很好。
*   **突出显示**：您可以查看[片段](http://www.steamdev.com/snippet/)Jquery 插件以突出显示语言语法

因此，您将正确显示“彩色”代码；当用户单击带有代码的 div 时，它会更改为可编辑的文本区域，如果用户单击文本区域之外的图标，则代码将被复制到剪贴板。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-13T12:57:10.660

有很多脚本可以做到这一点，这是一个很好的列表

[9 个有用的 Javascript 语法高亮脚本](http://www.webdesignbooth.com/9-useful-javascript-syntax-highlighting-scripts/)

其中大多数具有您需要的功能，因此您无需重新发明轮子 - 除非您真的想要:-)

# c - Matlab生成的C代码不能正常工作

> ID：11015079
> 
> 赞同：0
> 
> 时间：2012-06-13T12:43:17.023
> 
> 标签：c, xcode, matlab, matlab-deployment, equation-solving

我想在我的 iOS 应用程序中用 Matlab 求解一个方程 (A*x=b)。我生成了 C 源文件并将它们添加到 Xcode。奇怪的是，对于相同的 (A,b)，我在 Matlab 和 Xcode 中得到不同的结果。

我使用默认设置。有什么建议吗？

MATLAB：

```
%#codegen
function X = solveEquation(A, B)
    X = linsolve(A,B);
end 
```

代码：

```
double* A_data = malloc(num * num * sizeof(double));     
double* B_data = malloc(num * sizeof(double));
for (int i=0; i<num; i++) {
    for (int j=0; j<num; j++) {
        double sum = 0.0;
        for (int k=0; k<9; k++) {
            double diff = powf(A[i][k]-A[j][k],2); 
            sum += diff;
        }
        A_data[j*num+i] = exp(sum/-2);
    }
    B_data[i] = A[i][9];
}

int A_sizes[] = {num, num};
int B_sizes[] = {num, 1};
double* X_data = malloc(num * sizeof(double));
int X_sizes[] = {num, 1};
solveEquation(A_data, A_sizes, B_data, B_sizes, X_data, X_sizes); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T13:03:19.773

结果有何不同？Matlab 的数字可能（甚至可能）比 C 的`double`数据类型更复杂。这可能会导致结果之间的精度差异。

# jquery - 如何加载以前的内容，如 GitHub？

> ID：11015082
> 
> 赞同：3
> 
> 时间：2012-06-13T12:43:26.677
> 
> 标签：jquery, ajax, load, user-experience

当我在 GitHub 上浏览某个文件夹时，内容会动态加载：

*   地址栏已更新
*   主要内容已更新

当我单击以前的 Web 浏览器进行回滚时：

*   地址栏恢复了他以前的网址
*   **main content 恢复了他之前的内容。**

对于我自己的网站，我可以动态加载内容（在 jQuery 中）。但是当我回滚时，只有我的地址栏被更新。内容不变。:(

单击上一个时如何获取我以前的内容？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T12:46:00.923

查看 jquery-address 插件。

[https://github.com/asual/jquery-address](https://github.com/asual/jquery-address)

# python - TemplateNotFound：带有 Google App Engine 和 Jinja2 的 index.html

> ID：11015084
> 
> 赞同：5
> 
> 时间：2012-06-13T12:43:29.910
> 
> 标签：python, google-app-engine, templates, jinja2

我正在尝试使用 jinja2 构建我的第一个 GAE 应用程序。在克服了十几个小错误之后，现在我陷入了困境：

回溯（最近一次通话最后）：

```
File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 1536, in __call__
    rv = self.handle_exception(request, response, e)
  File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 1530, in __call__
    rv = self.router.dispatch(request, response)
  File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 1278, in default_dispatcher
    return route.handler_adapter(request, response)
  File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 1102, in __call__
    return handler.dispatch()
  File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 572, in dispatch
    return self.handle_exception(e, self.app.debug)
  File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 570, in dispatch
    return method(*args, **kwargs)
  File "C:\Users\CG\Documents\udacity\HiMon\main.py", line 31, in get
    template = jinja_environment.get_template('index.html')
  File "C:\Program Files (x86)\Google\google_appengine\lib\jinja2\jinja2\environment.py", line 719, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "C:\Program Files (x86)\Google\google_appengine\lib\jinja2\jinja2\environment.py", line 693, in _load_template
    template = self.loader.load(self, name, globals)
  File "C:\Program Files (x86)\Google\google_appengine\lib\jinja2\jinja2\loaders.py", line 115, in load
    source, filename, uptodate = self.get_source(environment, name)
  File "C:\Program Files (x86)\Google\google_appengine\lib\jinja2\jinja2\loaders.py", line 180, in get_source
    raise TemplateNotFound(template)
TemplateNotFound: index.html 
```

这是我的yaml文件：

```
application: himother
version: 1
runtime: python27
api_version: 1
threadsafe: yes

handlers:
- url: /favicon\.ico
  static_files: favicon.ico
  upload: favicon\.ico

- url: .*
  script: main.app

libraries:
- name: webapp2
  version: "2.5.1"
- name: jinja2
  version: "2.6" 
```

这是我的代码：

```
import os
import webapp2

import jinja2

jinja_environment = jinja2.Environment(autoescape=True,
    loader=jinja2.FileSystemLoader(os.path.join(os.path.dirname(__file__), 'templates')))

class MainPage(webapp2.RequestHandler):
    def get(self):
        template_values = {
            'name': 'Serendipo',
            'verb': 'extremely happy'
        }

        template = jinja_environment.get_template('index.html')
        self.response.out.write(template.render(template_values))

app = webapp2.WSGIApplication([('/', MainPage)],
                              debug=True) 
```

这是我的 .html 模板：

```
<!DOCTYPE html>
<html>
    <head>
        <title>Look Ma, I'm using Jinja!</title>
    </head>
    <body>
        Hi there - I'm {{ name }}, and I {{ verb }} programming!
    </body>
</html> 
```

尽管出现错误消息，但我有一个名为“templates”的文件夹，并在其中创建了 index.html 文件：

![在此处输入图像描述](../Images/8f790a3771fc141c977edfc6c49bf54f.png)

![在此处输入图像描述](../Images/88f25cfb0fbe580ea47bfb1eb76a4427.png)

![在此处输入图像描述](../Images/08347d5d39f203debad876fee04da35e.png)

我也安装了jinja2。

现在有没有人知道这个错误的原因？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T13:01:26.263

您可能应该使用`jinja2`包含在`webapp2_extras`.

获取此设置的示例如下：[http ://webapp-improved.appspot.com/api/webapp2_extras/jinja2.html#webapp2_extras.jinja2.Jinja2](http://webapp-improved.appspot.com/api/webapp2_extras/jinja2.html#webapp2_extras.jinja2.Jinja2)

关键区别在于，您无需设置`jinja2.Environment`自己，而是...

```
from webapp2_extras import jinja2
jinja = jinja2.get_jinja2(app=self.app)
jinja.render_template("index.html") 
```

您可能还需要`jinja2`在您的`libraries`部分中包括`app.yaml`：

```
libraries:                                                                      
- name: jinja2                                                                  
  version: "2.6" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-01T00:45:41.370

伙计..我遇到了和你一样的问题，刚刚找到了答案。

```
jinja_environment = jinja2.Environment(autoescape=True,
    loader=jinja2.FileSystemLoader(os.path.join(os.path.dirname(__file__), 'templates')))

class MainPage(webapp2.RequestHandler):
    def get(self):
        template_values = {
            'name': 'Serendipo',
            'verb': 'extremely happy'
        }

        template = jinja_environment.get_template('index.html')
        self.response.out.write(template.render(template_values)) 
```

“jinja_environment”部分不需要额外的 [, 'templates']。这应该放在 index.html 文件字符串之前，例如：

```
template = jinja_environment.get_template('templates/index.html') 
```

至少这对我来说是这样的（哦，我也没有使用 autoescape=True 部分，但我猜它是可选的）。

再想一想，也许你甚至可以留下 [, 'templates'] 部分，但是你需要在 'index.html' 之前放一个“/”，形成 '/index.html'，但这是另一个猜测。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-09-07T10:03:51.263

使用 [1] 和此处描述的 webapp2_extras 设置后，我仍然遇到此错误。我试过logging.info（jinja2.default_config）。这表明模板的未记录默认目录是 app-yaml-dir/templates/ ('template_path': 'templates')。除了那个，我什么都试过了。一旦你知道它，你可以重置它，或者让它保持原样。

```
jinja2.default_config['template_path'] = "html" 
```

如果您喜欢将模板放在各种目录中，只需将其设置为空并在渲染时使用完整路径`render_response('module/home.html', **context)`

```
jinja2.default_config['template_path'] = "" 
```

1.  [http://webapp-improved.appspot.com/api/webapp2_extras/jinja2.html#webapp2_extras.jinja2.Jinja2](http://webapp-improved.appspot.com/api/webapp2_extras/jinja2.html#webapp2_extras.jinja2.Jinja2)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-02T09:39:59.360

`jinja_environment = jinja2.Environment(autoescape=True, loader=jinja2.FileSystemLoader(os.path.join(os.path.dirname(__file__), 'templates')))` 实际上，代码中的行意味着您将请求定向到模板文件夹，但似乎您没有将“index.html”存储在模板文件夹中，因此只需删除重定向或将索引文件传输到模板文件夹即可。

# java - 无法从 Swing 中的特定打印机打印文档

> ID：11015088
> 
> 赞同：1
> 
> 时间：2012-06-13T12:43:53.870
> 
> 标签：java, swing

我正在编写一个代码，它应该在客户端机器上找到打印机列表并设置一个特定的打印机来打印一个文档。但是我在网上看了一下，发现一些代码是这样的：

```
package org.ui;
import java.io.FileInputStream;
import javax.print.*;
import javax.print.attribute.HashPrintRequestAttributeSet;
import javax.print.attribute.PrintRequestAttributeSet;
public class Printing {
    public static void main (String [] args) {       
        DocFlavor flavor = DocFlavor.INPUT_STREAM.AUTOSENSE;
        PrintRequestAttributeSet aset = new HashPrintRequestAttributeSet ();       
        PrintService [] pservices = PrintServiceLookup.lookupPrintServices (flavor, aset);
        try {
            int printer = getPrinter(pservices);
            if(printer == -1) {
                throw new Exception("No network printer found");
            }
            DocPrintJob pj = pservices[0].createPrintJob();
            FileInputStream fis = new FileInputStream ("c:///file.txt");
            Doc doc = new SimpleDoc (fis, flavor, null);
            pj.print (doc, aset);
        }
        catch (Exception ex) {
            ex.printStackTrace ();
        } 
    }
    private static int getPrinter(PrintService[] pservices) {
        int printer = -1;
        for(int i = 0; i<pservices.length; i++) {
            if(pservices[i].getName().contains("\\\\")) {
                System.out.println("network printer: " + pservices[i].toString());   
                printer = i;
                break;
            }        
        }
        return printer;
    }
} 
```

但是我无法在纸上打印，谁能告诉我这段代码有什么问题？它是一个桌面应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T13:23:35.583

根据[文档`print()`](http://docs.oracle.com/javase/1.4.2/docs/api/javax/print/DocPrintJob.html#print%28javax.print.Doc,%20javax.print.attribute.PrintRequestAttributeSet%29)

> [...] 当 print 方法返回时，打印可能尚未完成，因为打印可能异步发生，可能在不同的线程中。想要监视成功或失败的应用程序客户端应该注册一个 PrintJobListener。

这意味着您需要注册 a`PrintJobListener`才能知道问题所在：

尝试：

```
pj.addPrintJobListener(new PrintJobListener() {
  @Override
  void printDataTransferCompleted(PrintJobEvent pje) {
    System.out.println("Transfer completed");
  }
  @Override
  void printJobCanceled(PrintJobEvent pje) {
    System.out.println("Cancelled");
  }
  @Override
  void printJobCompleted(PrintJobEvent pje) {
    System.out.println("Completed");
  }
  @Override
  void printJobFailed(PrintJobEvent pje) {
    System.out.println("Failed");
  }
  @Override
  void printJobNoMoreEvents(PrintJobEvent pje) {
    System.out.println("No more events");
  }
  @Override
  void printJobRequiresAttention(PrintJobEvent pje) {
    System.out.println("Check printer");
  }
}); 
```

在调用之前`print()`查看输出到控制台的内容

# image - Gnuplot PNG 显示为黑色，背景设置为透明

> ID：11015089
> 
> 赞同：1
> 
> 时间：2012-06-13T12:44:08.650
> 
> 标签：image, png, gnuplot

我正在尝试使用 gnuplot 4.2 生成具有透明背景的 PNG。但是，背景显示为黑色而不是白色，并且在其他查看器中不透明。当我生成 jpeg、gif 或 emf 时，背景是白色的。我正在使用 Windows 7。

这是我使用的代码片段：

```
set terminal png size 600,600 transparent truecolor
set style data points
set xyplane at 000;
set output "image.png"
splot "data1.txt" using 1:3:5 title ""    
unset output 
```

非常感谢您的任何建议。

# java - Java Web 开发入门

> ID：11015092
> 
> 赞同：2
> 
> 时间：2012-06-13T12:44:13.463
> 
> 标签：java, jakarta-ee

作为一名使用 kohana、cakephp、codeigniter 和 symfony2 框架的 PHP 网络程序员，我拥有丰富的经验。我知道 Jquery、AJAX、JavaScript。在我学习期间，我参加了一门 Java 课程，但它完全是核心 Java。我想用一些框架在java web开发中弄脏我的手。

我需要一些建议，从哪里开始以及我的第一步应该是什么。我知道 OOP 概念和 java 语法，但不熟悉网络相关的东西。

一些很酷的书籍、博客、教程和关于框架选择的建议将受到高度赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T13:08:18.000

Java EE
[http://docs.oracle.com/javaee/6/tutorial/doc](http://docs.oracle.com/javaee/6/tutorial/doc)

Java 教程
[http://download.oracle.com/javase/tutorial/](http://download.oracle.com/javase/tutorial/)

一般 Java 资料
[http://www.oracle.com/technetwork/topics/newtojava/overview/gettingstarted-jsp-138588.html](http://www.oracle.com/technetwork/topics/newtojava/overview/gettingstarted-jsp-138588.html)
[http://www.oracle.com/technetwork/articles/javase/webapps-1-138794。 html](http://www.oracle.com/technetwork/articles/javase/webapps-1-138794.html)

关于类路径
[http://kevinboone.net/classpath.html](http://kevinboone.net/classpath.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T13:50:13.010

嘿伙计，首先你专注于核心java ie J2SE in J2SE 学习

*   收集框架

*   线程

*   异常处理

*   OOP 概念

    稍后专注于 J2EE 核心概念

*   小服务程序

*   jsp

后来想想Framework

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T19:59:53.203

上面的信息是很好的开始，但是请记住使用一个好的智能 IDE 肯定有助于快速学习，并且看看像 LOG4J 这样的调试能力工具。调试在 web 应用程序中起着重要的作用。Mkyong 教程和 vannila.com 框架示例是开始示例的简单指南。希望有所帮助。快乐编码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T12:49:37.393

就个人而言，我从 Google 的热门链接开始。然后，我发现了[SpringFuse](http://www.springfuse.com/)：

*   [马文](http://maven.apache.org/)
*   [休眠](http://www.hibernate.org/)
*   [春天](http://www.springsource.org/)
*   春季MVC
*   等等...

总而言之：最常见的工具配置良好且随时可用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-13T12:49:58.377

从 JAVAEE 核心概念开始，你知道核心 java.. 研究 Servlet（因为它们是最大事物之父）.. 研究 JSP... 研究 Web 服务器和应用程序服务器之间的区别... 最后用 MVC 弄脏你的手（Spring3或 Struts2) 取决于您的选择..这是我认为更好的方法..如果我在任何地方错了，请纠正我..

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-13T13:12:05.820

老实说，我会等到 9 月——JavaEE 7 即将到来，他们想快速改变一些基本的东西，你也可以等一会儿，因为 JavaEE 7 将主要关注云集成。祝你好运！:)

# jquery - 如何逐行选择单元格而不是之字形方式

> ID：11015095
> 
> 赞同：4
> 
> 时间：2012-06-13T12:44:15.350
> 
> 标签：jquery, html, css

[见小提琴](http://jsfiddle.net/vrW2n/4/)

我想将鼠标拖到单元格上，然后选择单元格下的任何内容。只有它下面的单元格被选中。如果用户以之字形方式移动鼠标，则不会发生选择。我怎样才能做到这一点。. ![下图显示了如何在表格单元格上拖动正确的方式](../Images/0b9b0b63e08f538de7cfb45f145a2d79.png)

***上图显示了正确的流动方式***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T16:34:42.083

这是发布的 jsfiddle 的一个可能的解决方案。

[http://jsfiddle.net/Ajj2h/](http://jsfiddle.net/Ajj2h/)

我们可以查看第一个（被点击的）和最后一个（当前悬停在活动点击拖动状态的那个）的索引，而不是根据鼠标悬停的每个项目突出显示，并突出显示其间的所有单元格。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T17:32:00.120

检查这个[jqfaq.com](http://jqfaq.com/how-to-know-on-which-element-an-item-is-currently-being-dragged-on/)主题。我认为这将帮助您了解项目当前被拖动到哪个元素上

# python - 允许从 Python 模块进行自定义日志记录的准则是什么？

> ID：11015098
> 
> 赞同：7
> 
> 时间：2012-06-13T12:44:29.953
> 
> 标签：python, logging

我目前正在编写几个执行一些 I/O 的 Python 模块。

这些模块可以由其他开发人员直接使用，也可以通过我编写的简单脚本调用，主要用于测试目的。

我使用了日志模块并设置了一个 StreamHandler 来在标准错误输出上显示日志，它运行良好。但是我不确定如何使这些日志可定制。显然，当开发人员使用我的类时，我不想强​​制将这些日志写入标准输出。我想提供一个选择，最好是让他添加自己的处理程序，或者如果他不想要日志，则根本不添加。

对于这种情况，是否有关于 Python 日志记录的任何指南？每个班级都应该有自己的记录器吗？

简而言之，你是怎么做的，为什么？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T13:01:19.727

确保打算用作库的模块不添加任何处理程序（除了 NullHandler 实例到库的顶级记录器）。

最佳实践是在模块级别使用记录器，使用

```
logger = logging.getLogger(__name__) 
```

并在必要时使用此记录器的子记录器。

这样，您的库日志事件映射到 Python 包层次结构，您的库模块的用户可以选择是否使用日志记录，以及如果使用它，如何使用处理程序对其进行配置。

可以在要作为脚本运行的事物中添加处理程序。

只要您的用户可以控制是否调用这些 API，就可以使用方便的 API 向您的记录器添加处理程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T13:01:12.637

关于python的日志记录模块有一个非常好的教程

[http://docs.python.org/howto/logging.html](http://docs.python.org/howto/logging.html)

# jquery - 从另一个 jQuery 调用函数

> ID：11015109
> 
> 赞同：3
> 
> 时间：2012-06-13T12:44:53.347
> 
> 标签：jquery

```
 $(document).keydown(function(e){
        if (e.keyCode == 37) { 
            return false;
        }
    });

    $(".direction").click(function() {
        var direction = $(this).text(); 
```

当我单击具有 .direction 类的按钮时，将调用上面的第二个函数。当按下左键时，我想`$(".direction").click(function() {`用一个值调用 But（而不是 var direction = $(this).text(); 部分）这将是 var direction = value passing to function;

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T12:47:59.313

添加两个方法都使用的另一个函数：

```
$(document).keydown(function(e){
     if (e.keyCode == 37) { 
          move("left");
     }
});

$(".direction").click(function() {
     move($(this).text());
});

function move(newDirection)
{
     var direction = newDirection;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T12:48:43.090

我会使用另一个函数来执行此操作，而不是尝试触发点击处理程序。

```
$(document).keydown(function(e){
    if (e.keyCode == 37) { 
        updateDirection("Something else");
    }
});

$(".direction").click(function() {
    updateDirection($(this).text());
});

function updateDirection(d) {
    var direction = d
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T12:48:50.877

```
var changeDirection = function(data) {
    var direction = data;
    alert(direction);
};

$(document).keydown(function(e) {
    if (e.keyCode == 37) {
        changeDirection("your value here");
    }
});

$(".direction").click(function() {
    changeDirection($(this).text());
});​ 
```

[在此处](http://jsfiddle.net/mEYhj/)查看实时示例

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-13T12:56:18.310

创建一个函数来处理事件，然后调用它：

```
function handleMyEvent(direction){
     /* do your handling here */
}
$(document).keydown(function(e){ 
    if (e.keyCode == 37) {

        var direction = e.keyCode; // or create an appropriate string for your use
        // OR IF you want the value of the focused element, you can get that also:
        // IF this is not what you want/mean clarify please
        var direction = $(e.target).text();

        handleMyEvent(direction);
        return false; //still return false to prevent the default behavior
    } 
}); 

$(".direction").click(function() { 
    var direction = $(this).text();
    handleMyEvent(direction);
}); 
```

# c# - 如何在浏览器 asp.net 中隐藏 URL

> ID：11015110
> 
> 赞同：0
> 
> 时间：2012-06-13T12:44:56.650
> 
> 标签：c#, asp.net, url, url-rewriting

我知道这是 Stack 上的重复问题。但在我的情况下，我使用的 URL 正在传递查询字符串详细信息。

`http://servername:82/root/ReportViewer.aspx?Id=/test/base/eg1 &Name=ReportDeatilName & User=783534`

如何隐藏整个查询字符串？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T12:50:04.093

如果可以，您可以使用 POST 生成调用，而不是使用 GET 进行调用。
所以你的 url 看起来会更干净（例如：servername:82/root/ReportViewer.aspx），因为所有的信息都是在`<form>`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T12:57:05.760

您可以[`Server.Transfer`](http://msdn.microsoft.com/en-us/library/ms525800%28v=vs.90%29.aspx)从后面的代码中使用。

这看起来您正在从同一页面响应。类似于`Response.Redirect`但只是更改 Web 服务器上的“焦点”并传输请求。

```
Server.Transfer("http://servername:82/root/ReportViewer.aspx?Id=/test/base/eg1 &Name=ReportDeatilName&User=783534"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T13:03:26.540

`Server.Transfer`从后面的代码中使用

# java - 如何将字符串对象重新转换为 ArrayList ?

> ID：11015114
> 
> 赞同：4
> 
> 时间：2012-06-13T12:45:25.000
> 
> 标签：java, hibernate, list, arraylist, tostring

我有一个数组列表

```
List<?> myList=new ArrayList();

myList = fetchQuery(); //fetches the list of Entities 
```

**现在 myList 有一个实体列表**

现在我将该列表转换为字符串，所以它现在是一个字符串对象。

```
String temp=myList.toString(); 
```

我的问题是如何将该临时字符串再次转换为该 myList(List of entity) ???

有任何想法吗？？

我的温度值看起来像这样

temp="[entityObject1,entityObject2.......]" ..

我无法提取每个对象并使用该实体类对其进行投射。有没有办法？

谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T14:12:58.553

我已经做了一个示例程序来进行这种转换。你必须小心的事情。1.我们将使用其列表的类应该有一个重写的 toString 方法。（您可以有自己的 toString() 格式，但需要相应地更改其余的实现）。

具有覆盖 toString() 方法的示例内容对象类。

```
class Sample {

    private String name;
    private String sex;

    @Override
    public String toString() {
        return "name=" + name + "&" + "sex=" + sex;
    }
    /**
     * @param name
     *            the name to set
     */
    public void setName(String name) {
        this.name = name;
    }

    /**
     * @param sex
     *            the sex to set
     */
    public void setSex(String sex) {
        this.sex = sex;
    }

} 
```

主应用程序.java

```
import java.lang.reflect.InvocationTargetException;
import java.lang.reflect.Method;
import java.util.ArrayList;
import java.util.Collection;
import java.util.List;

public class MainApplication {

    public static void main(String[] args) {
        List<Sample> e = new ArrayList<Sample>();
        Sample a1 = new Sample();
        a1.setName("foo1");
        a1.setSex("Male");

        Sample a2 = new Sample();
        a2.setName("foo2");
        a2.setSex("Male");
        e.add(a1);
        e.add(a2);

        String tmpString=e.toString();
        List<Sample> sampleList = (List<Sample>) chengeToObjectList(tmpString, Sample.class);
    }

    /**
     * Method to change String to List<Obj>.
     * @param listString
     * @param contentClass
     * @return List of Objects
     */
    public static Collection chengeToObjectList(String listString, Class contentClass) {

        Collection returnList = new ArrayList();

        // Code to remove [ and ] coming from the toString method
        if (listString.charAt(0) == '[') {
            listString = listString.substring(1);
        }
        if (listString.charAt(listString.length() - 1) == ']') {
            listString = listString.substring(0, listString.length() - 1);
        }

        String[] stringArray = listString.trim().split(",");
        for (int i = 0; i < stringArray.length; i++) {
            String[] contentArray = stringArray[i].trim().split("&");
            Object ob = null;
            try {
                ob = contentClass.newInstance();
            } catch (InstantiationException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            } catch (IllegalAccessException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }
            for (int j = 0; j < contentArray.length; j++) {

                String[] keyValueArray = contentArray[j].trim().split("=");

                String fieldName = keyValueArray[0].trim();
                //Code to make the 1st char uppercase
                String s = String.valueOf(fieldName.toCharArray()[0]);
                s = s.toUpperCase();
                fieldName = s + fieldName.substring(1);

                String fieldValue = keyValueArray[1].trim();

                Class[] paramTypes = new Class[1];
                paramTypes[0] = String.class;
                String methodName = "set" + fieldName; 
                Method m = null;
                try {
                    m = contentClass.getMethod(methodName, paramTypes);
                } catch (NoSuchMethodException m) {
                    m.printStackTrace();
                }
                try {
                    String result = (String) m.invoke(ob, fieldValue);
                } catch (IllegalAccessException e) {
                    e.printStackTrace();
                } catch (InvocationTargetException e1) {
                    e1.printStackTrace();
                }
            }
            returnList.add(ob);
        }

        return returnList;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T13:02:42.013

当你做 myList.toString(); 您实际上调用了[AbstractCollection.toString()](http://docs.oracle.com/javase/6/docs/api/java/util/AbstractCollection.html#toString%28%29)方法，该方法又调用了 List 中每个对象的 toString() 方法。

除非 Entity 类的 toString() 方法以这样一种方式序列化对象，以便您可以在之后重建它们，否则您将无能为力。

如果它确实正确序列化它们，则需要解析临时字符串，识别每个实体对象的所有单独字符串并从那里重建它们。

只有当每个实体对象的序列化字符串不包含方括号和逗号字符，或者它们正确地转义它们时，才能做到这一点。这是因为[AbstractCollection.toString()](http://docs.oracle.com/javase/6/docs/api/java/util/AbstractCollection.html#toString%28%29)方法在构建临时字符串时使用了这些特殊字符。

如果满足以上所有条件，您可以使用正则表达式解析临时字符串并获取每个单独的序列化实体对象。然后由您来重建对象并将它们添加到新列表中。

有关 Java 中的正则表达式，请参阅[http://docs.oracle.com/javase/6/docs/api/java/util/regex/package-summary.html](http://docs.oracle.com/javase/6/docs/api/java/util/regex/package-summary.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T12:47:22.993

`toString()`如果您以特定格式公开 toString() 中的每个字段，反向解析它，您可以获得格式化的原始对象，但这取决于实现，但通常情况并非如此

例如：

您无法从中形成人员实例，`string`因为 id 未公开

```
class Person{
  private long id;
  private String name;
  //stuffs
  @Override
  public String toString(){ return "Person  :" +name;}
} 
```

* * *

**也可以看看**

*   [什么是对象序列化？](https://stackoverflow.com/questions/447898/what-is-object-serialization)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T13:14:15.760

这是一个想法：

使`toString`您的`Entity`类的方法生成与某种序列化程序（如 JAXB 或 XStream）兼容的 XML 字符串。然后，当您获得 a 时`Collection.toString()`，将其按 Entity 拆分（也许`String.split()`会有所帮助）。长话短说，您希望将实体 XML 定义返回到 String 中，您可以将其传递给 XML 反序列化器，反过来，它可以将您的字符串转换回该类型的 Object。

# c++ - 逆矩阵 OpenCV。Matrix.inv() 无法正常工作

> ID：11015119
> 
> 赞同：5
> 
> 时间：2012-06-13T12:45:44.793
> 
> 标签：c++, opencv, matrix-inverse

我有一个问题，我找不到任何解决方案。

我必须用一个已知矩阵的逆进行一些计算。

```
Matrix homography=

1.1688, 0.23, 62.2,

-0.013,1.225, -6.29,

0, 0, 1, 
```

接着：

```
Mat homoInv=homography.inv(); 
```

矩阵的内容是：

```
1.81381e-29, 15.1628, -7.57361e+17, 

0, -0, 0, 

5.4561e-33, -2.40123e+34, -1.38198e-05 
```

这当然是错误的，因为我已经在 Matlab 中检查了结果。两个矩阵都显示和读取为浮点数，它们的深度是 a `64FC1`。

有谁知道可以做什么？

谢谢大家

更多代码：

```
int main(int argc, char ** argv )
{ 
  Mat homogra(3,3,CV_64FC1);
  Mat coord(3,1,CV_64FC1);
  Mat result(target.size(),CV_8UC1);
  homogra.at<float>(0,0)=1.1688;
  homogra.at<float>(0,1)=0.23;
  homogra.at<float>(0,2)=(-62.20);
  homogra.at<float>(1,0)=(-0.013);
  homogra.at<float>(1,1)=1.225;
  homogra.at<float>(1,2)=-6.29;
  homogra.at<float>(2,0)=0;
  homogra.at<float>(2,1)=0;
  homogra.at<float>(2,2)=1;
  printMatrix(homogra);

  Mat inverse=homogra.inv();
  printMatrix(inverse);
} 
```

功能打印矩阵：

```
void printMatrix(Mat M){
cout<<"Tipo de matriz:"<<M.type()<<endl;
 // dont print empty matrices
  if (M.empty()){
    cout << "---" << endl;
    return;
  }
  // loop through columns and rows of the matrix
  for(int i=0; i < M.rows; i++){
      for(int j=0; j < M.cols ; j++){
      cout << M.at<float>(i,j) << ", "<<endl;
      }
    cout<<"Change\n"<<endl;
}
  } 
```

但错误不在`printMatrix`，因为如果我分别打印元素，我会在逆数中获得相同的奇怪结果。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-14T12:50:57.847

正如彼得指出的那样，问题出在我的代码中。我仍然不明白其中的原因，但它就像：

我将数据`CV_64F`视为浮点数，这是一个错误，需要将其视为双精度值，用于写入和读取值。（`<double>`）

但是`CV_32F`可以被视为浮动，访问将是`<float>`.

# c# - 对象作为 TreeView.Nodes.Add 参数？

> ID：11015120
> 
> 赞同：0
> 
> 时间：2012-06-13T12:45:45.210
> 
> 标签：c#, winforms, treeview

我正在使用 a来`CheckedListBox`显示. 我正在使用：`List``Plugin``EventHandler`

```
private void myCheckedListBox_SelectedIndexChanged(object sender, EventArgs e)
{
    myGUIUtilities.SetDescription(myCheckedListBox.SelectedItem, myRichTextBox);
} 
```

显示一些东西......这是`myGUIUtilities.SetDescription`方法：

```
internal static void SetDescription(object p_SelectedObject, RichTextBox p_TextBoxDescription)
            {
                AbstractEnvChecker l_Plugin = p_SelectedObject as AbstractEnvChecker;
                if (l_Plugin != null)
                    p_TextBoxDescription.Text = l_Plugin.Description;
            } 
```

为了显示我的插件，我只使用了以下`CheckedListBox.Items.Add`方法：

`MyCheckedListBox.Items.Add(myPlugin);`

接受一个对象作为参数...

现在我想`Plugins`按 cetgories 对我进行分类，所以我使用`TreeView`and `TreeNode`。

问题是`TreeView.Nodes.Add(TreeNode node)`只接受`TreeNode`Type 作为参数。

而且我实际上不能使用`SetDescription`需要`Plugin`类型来获取`Plugin.Description`属性的相同方法......

有没有办法将对象传递给`TreeView.Nodes.Add(TreeNode node)`方法？或者另一种方式来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T13:12:26.960

使用[`Tag`](http://msdn.microsoft.com/en-us/library/system.windows.forms.treenode.tag.aspx)树节点上的属性将对象附加到它。然后您可以稍后再将其拉出。

所以你可以这样做（假设`Name`插件对象上有一个属性）

```
public TreeNode AddPluginNode(TreeNode parent, AbstractEnvChecker plugin)
{
  TreeNode created = new TreeNode(plugin.Name) { Tag = plugin };
  parent.Nodes.Add(created);
  return created;
} 
```

然后你可以重写你的事件处理程序的开始：

```
AbstractEnvChecker l_Plugin = p_SelectedObject as AbstractEnvChecker;
if(l_Plugin == null)
{
  TreeNode selNode = p_SelectedObject as TreeNode;
  if(selNode != null && selNode.Tag != null)
    l_Plugin = selNode.Tag as AbstractEnvChecker;
}
//might still be null in the future if you start using Tags for other types. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T08:20:34.300

您可以创建自己的继承 TreeNode 的树节点类。您继承的类可以对插件进行强类型引用，而不是使用 tag 属性。我将这种方法用于具有不同类型对象、自定义上下文菜单等的相当复杂的树视图。

# c++ - 术语的含义——资源获取就是初始化

> ID：11015123
> 
> 赞同：5
> 
> 时间：2012-06-13T12:45:55.460
> 
> 标签：c++, oop, terminology, raii

我知道 RAII 是做什么的。当/如果代码抛出异常时，这一切都是为了防止内存泄漏等。

现在，我想了解这个*智能*术语的含义。 [http://en.wikipedia.org/wiki/Acquisition](http://en.wikipedia.org/wiki/Acquisition)

获得意味着获得某些东西。

那么，当我们说***资源获取是初始化***时，这是什么意思呢？
我只是在这里谈论这个术语的含义，而不是一般的概念。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-13T12:48:05.367

之前已经说过（可能是 Scott Meyers，我不记得了），RAII 应该被称为“破坏是资源释放”，或者类似的词。

“资源获取就是初始化”字面意思是当一个对象被构造（初始化）时，它会获取一些资源（比如内存分配或者锁）。换句话说，它说你应该只通过*初始化*某个析构函数将释放它的对象来*获取*资源。

 *强调这一点很重要，因为它背离了 C 编码风格，在这种风格中，您可以通过特定 API 提供的任何方式（例如 、 或 ）获取资源`malloc()`，`accept()`并`pthread_mutex_lock()`通过显式调用相应的函数（例如`free()`、`close()`、`pthread_mutex_unlock()`）来释放它们。C++ 中异常的存在使得这种方法相当不可行。即使在 C 语言中，它也会导致一些乏味的代码，每次使用 API 都必须写出，并且每个用户都必须确保控制权在他们使用完资源后始终通过该代码。

但是该模式的重要部分是，当对象被销毁时，它会释放该资源。实际上，您是通过初始化对象来获取资源，还是在对象初始化后对其进行其他操作来获取资源并不重要。当存在生成由 RAII 对象管理的资源的初始化以外的操作时，人们仍然会将对象称为“RAII 对象”。

所以，不要太担心“RAII”中的“采集即初始化”，因为无论如何它有点误导。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T12:52:40.887

获取是一个通用术语，但它总是指分配一些资源的操作——例如文件句柄、数据库连接、互斥体……——特别是你的代码，它“拥有”它，因此必须释放当不需要避免资源泄漏时。

RAII 的重要概念是资源生命周期与所有者对象的生命周期绑定，因为获取与初始化（=对象的创建）以及释放与销毁（这是有保证的）同时发生。*

# javascript - 这个 JavaScript 语法是如何工作的？

> ID：11015125
> 
> 赞同：4
> 
> 时间：2012-06-13T12:45:57.137
> 
> 标签：javascript, jquery, syntax

我正在使用一个 jQuery 插件，其中包含以下代码段：

```
$(el).siblings( panelSelector )[(effect || activationEffect)](((effect == "show")?activationEffectSpeed:false),function(){ .. some stuff .. }); 
```

我真正关心的不是它在插件上下文中的作用，而是它如何工作。

我知道我们首先选择单击元素的兄弟姐妹，然后我相信我们正在检查两者中的哪一个，`effect`或者`activationEffect`有一个值，我开始迷失在那里。看起来该函数是一个回调，但如果是我不明白包含回调的内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T12:50:53.373

要理解代码，您需要知道的主要内容是`foo.bar`和`foo['bar']`是平等的。

让我们拆分它以使其更清晰：

```
var sibs = $(el).siblings(panelSelector);
sibs[(effect || activationEffect)](...); 
```

第二行调用存储在`effect`or中的任何方法名称`activationEffect`（第一个 true 值获胜）`sibs`。

`((effect == "show")?activationEffectSpeed:false)`是该调用的第一个参数和`function(){ ... }`第二个参数。

# javascript - 在网站中嵌入谷歌地图

> ID：11015128
> 
> 赞同：1
> 
> 时间：2012-06-13T12:46:14.087
> 
> 标签：javascript, jquery, google-maps

我正在尝试使用在我的网站中嵌入谷歌地图`google API`，我获得`API key`并编写了以下 jquery：

```
function LoadMap(){

                $.getScript("http://maps.googleapis.com/maps/api/js?key=AIzaSyChZeTZ-DzMW-45IUBXUSuBha9MWEiXXtI&sensor=true", function () {
                   var myOptions = {
                        zoom: 8,
                        center: new google.maps.LatLng(-34.397, 150.644),
                        mapTypeId: google.maps.MapTypeId.ROADMAP
                    };
                    var map = new google.maps.Map(document.getElementById("id"), myOptions);
                });
} 
```

但这不是在给定 id 的 div 中加载地图。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T12:48:50.083

这是一个很好的项目[http://hpneo.github.com/gmaps/](http://hpneo.github.com/gmaps/)

```
new GMaps({
  div: '#map',
  lat: -12.043333,
  lng: -77.028333
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T18:31:50.443

试试这个 ：）

```
<!DOCTYPE html>  
<html>  
<head>  
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" /> 
<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>  
<link href="http://code.google.com/apis/maps/documentation/javascript/examples/default.css" rel="stylesheet" type="text/css" />  
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>  
<script type="text/javascript"> 
// Initiate map 
function initialize(data) { 
  // Make position for center map 
  var myLatLng = new google.maps.LatLng(data.lng, data.lat); 

  // Map options  
  var myOptions = { 
    zoom: 10, 
    center: myLatLng, 
    mapTypeId: google.maps.MapTypeId.HYBRID 
  }; 

  // Initiate map 
  map = new google.maps.Map(document.getElementById("map_canvas"), myOptions); 

  // Info window element 
  infowindow = new google.maps.InfoWindow(); 

  // Set pin 
  setPin(data); 
} 
// Show position 
function setPin(data) { 
  var pinLatLng = new google.maps.LatLng(data.lng, data.lat); 
  var pinMarker = new google.maps.Marker({ 
    position: pinLatLng, 
    map: map, 
    data: data 
  }); 

  // Listen for click event  
  google.maps.event.addListener(pinMarker, 'click', function() { 
    map.setCenter(new google.maps.LatLng(pinMarker.position.lat(), pinMarker.position.lng())); 
    map.setZoom(18); 
    onItemClick(event, pinMarker); 
  }); 
} 
// Info window trigger function 
function onItemClick(event, pin) { 
  // Create content  
  var contentString = pin.data.text + "<br /><br /><hr />Coordinate: " + pin.data.lng +"," + pin.data.lat; 

  // Replace our Info Window's content and position 
  infowindow.setContent(contentString); 
  infowindow.setPosition(pin.position); 
  infowindow.open(map) 
} 
</script>  
</head>  
<body onload="initialize({lat:-3.19332,lng:55.952366,text:'<h2>Edinburgh</h2><i>Nice city!</i>'})"> 
  <div id="map_canvas">  
</div>  
</body>  
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T12:51:32.057

看看这个： [https ://developers.google.com/maps/documentation/javascript/examples/?hl=en-EN](https://developers.google.com/maps/documentation/javascript/examples/?hl=en-EN)

GMaps V3 中不推荐使用“KEY”。祝你好运！

# solr - 所需的solr长度

> ID：11015129
> 
> 赞同：1
> 
> 时间：2012-06-13T12:46:17.550
> 
> 标签：solr, solrj

我正在尝试使用 solrJ 访问 solr 服务器

1.  我在子域 search.xxx.com 中部署了 solr，并尝试使用 solrj 客户端索引一些数据。但我在 Tomcat 7 的 catalina.out 中收到“需要长度”。
2.  当我开发它时，它在我的本地设置中运行良好。
3.  查询成功，即使返回0个doc。
4.  即使我转储它并使用数据导入处理程序（xml），我怎样才能动态更新文档。

下面是我得到的 catalina.out 错误：

```
org.apache.solr.common.SolrException: Length Required

Length Required

request: http://search.xxx.com/solr/product_mobile/update/javabin?wt=javabin&version=2
    at org.apache.solr.client.solrj.impl.CommonsHttpSolrServer.request(CommonsHttpSolrServer.java:432)
    at org.apache.solr.client.solrj.impl.CommonsHttpSolrServer.request(CommonsHttpSolrServer.java:246)
    at org.apache.solr.client.solrj.request.AbstractUpdateRequest.process(AbstractUpdateRequest.java:105)
    at org.apache.solr.client.solrj.SolrServer.add(SolrServer.java:69)
    at org.apache.solr.client.solrj.SolrServer.add(SolrServer.java:54)
    at com.xxx.product.solrclient.SolrConnection.indexListOfDocuments(SolrConnection.java:183)
    at com.xxx.product.solrclient.SolrOperations.reloadDataIntoSolrIndex(SolrOperations.java:169)
    at com.xxx.product.servlets.AjaxCallHandlerServlet.reloadSolrIndex(AjaxCallHandlerServlet.java:235)
    at com.xxx.product.servlets.AjaxCallHandlerServlet.doPost(AjaxCallHandlerServlet.java:140)
    at com.xxx.product.servlets.AjaxCallHandlerServlet.doGet(AjaxCallHandlerServlet.java:64)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:684)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:471)
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:402)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:329)
    at com.inspion.product.servlets.ProductFrontControllerServlet.doGet(ProductFrontControllerServlet.java:62)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at com.inspion.product.filters.ProductRequestValidatorFilter.doFilter(ProductRequestValidatorFilter.java:49)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:405)
    at org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:261)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:515)
    at org.apache.tomcat.util.net.AprEndpoint$SocketWithOptionsProcessor.run(AprEndpoint.java:1731)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:619) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T13:30:31.820

这不是一个完整的答案（我还不能在 stackoverflow 中“评论”）。

solrservlet 似乎没有回答您的 solrj 请求，而是错误页面或其他内容。search.xxx.com 前面有网络服务器吗？

您可能希望从 tomcat 服务器的系统输出/错误日志开始，以获取服务器端异常。这会有所帮助。

# android - Android OpenGL 图像处理 - 没有 SurfaceView

> ID：11015139
> 
> 赞同：5
> 
> 时间：2012-06-13T12:46:42.277
> 
> 标签：android, opengl-es

我想使用 OpenGL ES 2 和着色器进行一些背景图像处理，但不绘制到表面（即仅对帧缓冲区进行离屏渲染）。虽然我已经在 iOS 上这样做了，但我在 Android 上遇到了这个问题。

我想我已经快要创建一个工作的 OpenGL 上下文了，但还没有弄清楚如何在没有 SurfaceView 的情况下这样做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T04:36:36.427

看看[这个 gamedev 帖子](http://www.anddev.org/post41662.html#p41662)（点击展开查看完整代码）。该代码创建了一个 GL 上下文并使用该`GLSurfaceView.Renderer`接口来适当地允许编写一个渲染器。在调用`getBitmap()`时，调用渲染器来绘制一个帧，然后将其读回并转换为位图。

请注意，有一个[特色问题](https://stackoverflow.com/q/10974079/1262542)，您可能也会感兴趣。

# c# - 如何使用已知凭据使用 DotNetOpenAuth 登录？

> ID：11015140
> 
> 赞同：1
> 
> 时间：2012-06-13T12:46:44.320
> 
> 标签：c#, oauth, dotnetopenauth

我是 DotNetOpenAuth 的新手，我只需要使用已知的用户凭据登录（我的服务器需要登录到另一个应用程序才能执行一些管理工作）。现在，我似乎找不到避免所有重定向和回调的方法，我只需要将用户凭据提供给 DotNetOpenAuth 并使用它登录。任何人都可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T13:44:41.037

这在很大程度上取决于您尝试使用的协议。OAuth 1.0(a) 需要重定向。OAuth 2.0 允许密码凭据授予（您正在尝试执行的操作），这要求您使用 DotNetOpenAuth 4.x 和`WebServerClient`or`UserAgentClient`类。`ExchangeUserCredentialForToken`在任一类上，您都可以通过调用方法来实现目标。

# php - 如何在 Smarty 模板的动态生成的 XML 文件中将“&”映射为“&”？

> ID：11015143
> 
> 赞同：1
> 
> 时间：2012-06-13T12:46:48.907
> 
> 标签：php, xml, smarty

我有一个有`xmlParseEntityRef: no name`错误的 xml 文件。
我知道它是由*&*符号引起的，删除或替换它就`&amp;`可以了。问题是这个 xml 文件是动态生成的，通常非常大 (>5MB)。

我正在尝试将其定义为文档类型实体，但无济于事。有任何想法吗？

* * *

感谢所有的反馈。我完全同意你们所有人的看法。
但是，由于我需要快速解决此问题，因此我在 Smarty 模板方面找到了解决方案。

我发现我可以将变量的值重定向到 php 函数，如下所示：

```
{$foo|htmlentities} 
```

参考是[这里] (http://www.smarty.net/forums/viewtopic.php?p=60401)

问题解决了！

我已经更新了这个问题，以防有人遇到类似的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T14:01:23.817

任何声称生成 XML 的程序都有责任使 XML 格式正确。如果程序正在生成垃圾，请修复它或将其丢弃。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T12:50:32.360

很抱歉，您需要修复生成它的应用程序。它生成的不是 XML。

您可能还可以使用诸如`sed`预处理文件之类的东西来解决问题，但这只是邪恶的。

# mysql - mysql - 为什么 sql 查询选择不必要的值？

> ID：11015148
> 
> 赞同：0
> 
> 时间：2012-06-13T12:47:14.740
> 
> 标签：mysql, conditional-statements

我想选择条件为真的行。我有一个名为 的列`command`，如果列值包含（由我定义的）字符串，则添加到结果中。

我的问题是选择行，因为查询没有看到 WHERE 语句，如果列`command`包含字符串，它会选择所有数据。

```
SELECT * 
FROM `admin_log` 
WHERE `admin_log`.`user` = 'Admin' 
    AND command LIKE '%aznot%' 
    OR command LIKE '%hango%' 
ORDER BY `order_id` DESC 
LIMIT 0, 50 
```

例如，我有 3 个管理员帐户：Admin、Zuppa、Grund。如果命令列包含：aznot 或 hango，我想按帐户 ADMIN 选择所有数据。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T12:50:27.817

你需要一些括号。

```
SELECT * 
FROM `admin_log`
WHERE `admin_log`.`user` = 'Admin'  
AND (command LIKE '%aznot%' OR command LIKE '%hango%')
ORDER BY `order_id` 
DESC LIMIT 0, 50 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T12:50:35.597

```
SELECT * FROM `admin_log` WHERE `admin_log`.`user` = 'Admin' 
 AND (command LIKE '%aznot%' OR command LIKE '%hango%') 
 ORDER BY `order_id` DESC LIMIT 0, 50 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T12:50:42.510

尝试这样的事情：

```
SELECT * FROM `admin_log` WHERE `admin_log`.`user` = 'Admin' AND (command LIKE '%aznot%' OR command LIKE '%hango%') ORDER BY `order_id` DESC LIMIT 0, 50 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-13T12:51:07.500

更好的做法是将 OR 语句分成单独的表达式，以防止引擎误解。

```
SELECT * FROM `admin_log` WHERE `admin_log`.`user` = 'Admin' AND (command LIKE '%aznot%' OR command LIKE '%hango%') ORDER BY `order_id` DESC LIMIT 0, 50 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-13T12:51:27.647

```
SELECT * 
FROM   `admin_log` 
WHERE  `admin_log`.`user` = 'Admin' 
       AND (command LIKE '%aznot%'
        OR command LIKE '%hango%' )
ORDER  BY `order_id` DESC 
LIMIT  0, 50 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-13T12:51:31.400

您需要正确嵌套条件。查看 SQL 中逻辑运算符的优先规则

# iphone - 仅在特定日期触发 UILocalNotification

> ID：11015151
> 
> 赞同：1
> 
> 时间：2012-06-13T12:47:27.830
> 
> 标签：iphone, objective-c, ios, uilocalnotification

我有一个应用程序，我只需要在一周中的某些日子（由用户定义）触发通知。我以前使用过本地通知，但它总是相当直接，每天，每周等同时进行。但是，我从来不必只在特定日期同时发出相同的通知。有没有人这样做过并且可以阐明它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T12:51:30.387

我通常做的是为需要的每一天发出一个通知，并每周重复一次。

然后只需启用/禁用适当的日子

# c# - 实现抽象方法时更改参数类型

> ID：11015152
> 
> 赞同：6
> 
> 时间：2012-06-13T12:47:28.813
> 
> 标签：c#, inheritance, abstract-class

有没有办法将抽象类型定义为抽象方法中的参数，并且当该方法在派生类中实现时，您将方法的类型更改为接受派生类型？

代码：

```
public abstract class ProductBase
{
}

public class SomeProduct
    : ProductBase
{

}

public abstract class A
{
    protected abstract void addProduct(ProductBase p);
}

// This works
public class B : A
{        
    protected override void addProduct(ProductBase p)
    {
        // Do some work
    }
}

// This is what I'd like to do
public class C : A
{
    // Compiler error here because I have accepted a SomeProduct and not a ProductBase
    protected override void addProduct(SomeProduct p)
    {
        // Do some work on the specialisation - I can use the SomeProduct directly
    }
} 
```

在我的脑海里，它有某种意义。一个抽象类，表示派生类必须实现一个方法，但是它们可以改变作为参数传入的对象的类型，只要它来自同一个继承链......

我最终做的是`AddProduct`从抽象类中删除抽象方法，而只是在派生类中实现它，但是将来其他类没有合同，他们必须创建自己的`AddProduct`. 而且*感觉不对*。

我希望这是有道理的。抱歉，如果这是一个重复的问题，但我无法通过搜索找到任何东西。

谢谢，
bgs264

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-13T12:58:53.000

您可以将您的类设为泛型并在您的方法`A`中使用泛型参数：`addProduct`

```
public abstract class A<TProduct> where TProduct : ProductBase 
{
    protected abstract void addProduct(TProduct p);
}

public class B : A<ProductBase>
{        
    protected override void addProduct(ProductBase p)
    {
    }
}

public class C : A<SomeProduct>
{
    protected override void addProduct(SomeProduct p)
    {
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T12:58:02.943

不，这是不可能的：假设您正在调用一个指向 class 实例的 class`addProduct`变量，并传递一个是 a 的对象，但不是 a 。传递的实例无法转换为，这就是为什么这首先不会编译。`A``C``ProductBase``SomeProduct``SomeProduct`

最接近这个的是泛型解决方案：

```
public abstract class A<T>
    where T : ProductBase
{
    protected abstract void addProduct(T p);

} 
```

然后，您可以像这样定义您的 C 类：

```
public class C : A<SomeProduct>
{
    protected override void addProduct(SomeProduct p);
} 
```

当然，这意味着您必须键入任何类型的变量`A`to `SomeProduct`，如`A<SomeProduct> = new C();`.

如果不指定类型参数的实际值，就不能再只有一个类型变量`A`（提供方法） 。另一方面，如上所述，在您的解决方案中也无法调用该方法。`addProduct``T``addProduct`

您现在*可能会*引入一个非强类型方法：

```
public abstract class A<T>
    where T : ProductBase
{
    protected abstract void addProduct(T p);

    protected void addProductUntyped(ProductBase p)
    {
        T typedProduct = p as ProductBase;
        if (typedProduct != null) {
            addProduct(typedProduct);
        } else {
            throw new ArgumentException("p has an incompatible type.");
        }
    }
} 
```

然而，这种解决方案通常只有在类的某些用户可以知道泛型类型而其他用户不知道时才真正需要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T13:00:21.877

坦率地说，对于*实现*代码，我只需要一个演员表。我唯一一次让这个“漂亮”是如果它影响了公众来电者：

```
protected override void addProduct(ProductBase p)
{
    SomeProduct prod = (SomeProduct)p;
    // ...
} 
```

**我自己不太**喜欢的一种选择是泛型：

```
public abstract class A<T> where T : ProductBase
{
    protected abstract void addProduct(T p);
}

public class C : A<SomeProduct>
{
    protected override void addProduct(SomeProduct p)
    {
        // ...
    }
} 
```

我不喜欢这个的原因是你不能再使用非泛型`A`，所以你失去了很多抽象。另一种选择是`new`重新声明参数的方法。`new`不幸的是，您不能`override`在同一级别，但解决方法是使用 2 种方法：

```
public abstract class A
{
    protected void addProduct(ProductBase p) { addProductImpl(p);}
    protected abstract void addProductImpl(ProductBase p);
}

public class C : A
{
    new protected void addProduct(SomeProduct p) { addProductImpl(p);}
    protected override void addProductImpl(ProductBase p)
    {
        SomeProduct prod = (SomeProduct) p;
        // ...
    }
} 
```

# oracle - 在生产环境中绑定到 DB Link 的可能问题是什么？

> ID：11015153
> 
> 赞同：3
> 
> 时间：2012-06-13T12:47:30.710
> 
> 标签：oracle, dblink

在我为数据库专家工作的公司里，数据库链接真的很危险。我不明白为什么。整个网络都受到保护，我相信这不是安全问题。

是否存在影响 DBLink 的严重问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T14:17:29.933

数据库链接可能会导致无法控制谁可以查看您的数据。如果我允许您连接到我的数据库，并且您使用这些凭据创建了一个数据库链接，那么您可以在我不知情或未经我同意的情况下将对该链接以及我的数据的访问权限授予其他人。或者您可以以其他方式公开它，例如，如果您让使用该链接的应用程序对 SQL 注入开放。

当然，我会创建一个具有您所需的最低权限的新用户帐户，并且很可能是只读的，以尽量减少您或他们可能造成的损害。但即便如此，我的数据可能会泄露，而你——或使用你链接的人——可能会看到、提取、复制或传播它。

安全不仅关乎网络和物理安全，还关乎人。我最初可能对您需要访问权限感到满意，比如说对不同敏感度级别的数据的混合；而且您可能认为可以将链接打开给想要您认为不敏感的内容的子集的人，而不考虑他们实际上可以看到比他们需要或应该被允许的更多的东西。即使他们没有四处寻找敏感内容，他们也可能将其视为非敏感内容，例如，共享一个密码，从而间接让另一个人访问我的数据 - 当然我不知道这是正在发生。在某些时候，有人可能会注意到他们可以看到所有这些东西，这对我来说可能是个大问题，而且（因为这最终是你的帐户，他们

我持有的数据越敏感，我猜这就越可能显得“危险”。您需要请您的数据库专家详细说明他们的具体问题。

# c# - 如何重定向 Powershell 的输出

> ID：11015157
> 
> 赞同：4
> 
> 时间：2012-06-13T12:47:42.703
> 
> 标签：c#, powershell

我有一个类似但不同的问题，例如[How to redirect Powershell output from a script run by TaskScheduler and override default width of 80 characters](https://stackoverflow.com/questions/4499182/how-to-redirect-powershell-output-from-a-script-run-by-taskscheduler-and-overrid)。

我有一个很久以前编写的自定义安装程序框架。在其中我可以执行“任务”。我最近不得不添加一个任务来执行一个 PowerShell 脚本。现在，即使任务是用 C# 编写的，我也无法直接调用 PowerShell 脚本中的命令。不幸的是，这不在讨论范围内。

简而言之，我想从 C# 调用 PowerShell 可执行文件并将其输出重定向回我的应用程序。这是我到目前为止所做的：

我可以使用以下代码（来自我创建的测试项目）成功调用 PowerShell：

```
 string powerShellExeLocation = null;

  RegistryKey localKey = Registry.LocalMachine;

  RegistryKey subKey = localKey.OpenSubKey(@"SOFTWARE\Microsoft\PowerShell\1\PowerShellEngine");
  powerShellExeLocation = subKey.GetValue("ApplicationBase").ToString();

  if (!Directory.Exists(powerShellExeLocation))
    throw new Exception("Cannot locate the PowerShell dir.");

  powerShellExeLocation = Path.Combine(powerShellExeLocation, "powershell.exe");

  if (!File.Exists(powerShellExeLocation))
    throw new Exception("Cannot locate the PowerShell executable.");

  string scriptLocation = Path.Combine(Environment.CurrentDirectory, "PowerShellScript.ps1");

  if (!File.Exists(scriptLocation))
    throw new Exception("Cannot locate the PowerShell script.");

  ProcessStartInfo processInfo = new ProcessStartInfo();
  processInfo.Verb = "runas";
  processInfo.UseShellExecute = false;
  processInfo.RedirectStandardOutput = true;
  processInfo.RedirectStandardOutput = true;
  processInfo.WorkingDirectory = Environment.CurrentDirectory;

  processInfo.FileName = powerShellExeLocation;
  processInfo.Arguments = "-NoLogo -OutputFormat Text -NonInteractive -WindowStyle Hidden -ExecutionPolicy Unrestricted -File \"" + scriptLocation + "\" ";

  Process powerShellProcess = new Process();
  powerShellProcess.StartInfo = processInfo;
  powerShellProcess.OutputDataReceived += new DataReceivedEventHandler(powerShellProcess_OutputDataReceived);
  powerShellProcess.ErrorDataReceived += new DataReceivedEventHandler(powerShellProcess_ErrorDataReceived);

  powerShellProcess.Start();

  while (!powerShellProcess.HasExited)
  {
    Thread.Sleep(500);
  } 
```

我的重定向输出处理程序永远不会被调用：

```
void powerShellProcess_ErrorDataReceived(object sender, DataReceivedEventArgs e) 
```

和

```
void powerShellProcess_OutputDataReceived(object sender, DataReceivedEventArgs e) 
```

我相当有信心脚本正在运行。现在我只有一个输出 PATH 内容的测试脚本。

```
$a = $env:path; $a.Split(";") 
```

我在 PowerShell 实例中对此进行了测试，它输出正确。

如何让 PowerShell 输出重定向到我的 C# 代码？我不想依赖我将执行的脚本来处理他们自己的日志记录。我宁愿收集他们的输出并在框架的日志记录机制中处理它。

**编辑** 意识到我在该代码示例中留下了奇怪的循环以等待退出。我有这个过程“WaitForExit”：

```
powerShellProcess.WaitForExit(); 
```

**编辑**
使用@MiniBill 的建议。我想出了以下代码片段：

```
powerShellProcess.Start();
while (!powerShellProcess.HasExited)
{
  string line;
  while (!string.IsNullOrEmpty((line = powerShellProcess.StandardOutput.ReadLine())))
    this.LogInfo("PowerShell running: " + line);
} 
```

这可以很好地处理输出。它把我的台词减少到 80 个字符 :(，但我可以忍受，除非其他人可以提供解决这个问题的建议！

**更新*解决方案***

```
/*
  * The next few lines define the process start info for the PowerShell executable.
  */
ProcessStartInfo processInfo = new ProcessStartInfo();
processInfo.Verb = "runas";
processInfo.UseShellExecute = false;
processInfo.RedirectStandardError = true;
processInfo.RedirectStandardOutput = true;
processInfo.WorkingDirectory = Environment.CurrentDirectory;

//this FileName was retrieved earlier by looking in the registry for key "HKLM\SOFTWARE\Microsoft\PowerShell\1\PowerShellEngine" and the value for "ApplicationBase"
processInfo.FileName = powerShellExeLocation;

//if we're going to use script arguments build up the arguments from the process start correctly.
if (!string.IsNullOrEmpty(this.ScriptArguments))
  processInfo.Arguments = "-NoLogo -NonInteractive -WindowStyle Hidden -ExecutionPolicy Unrestricted -File \"" + ScriptLocation + "\" '" + ScriptArguments + "'";
else
  processInfo.Arguments = "-NoLogo -NonInteractive -WindowStyle Hidden -ExecutionPolicy Unrestricted -File \"" + ScriptLocation + "\"";

//create the Process object, set the start info, and start the process
Process powerShellProcess = new Process();
powerShellProcess.StartInfo = processInfo;

powerShellProcess.Start();

/*
  * While the PowerShell process hasn't exited do the following:
  * 
  * Read from the current position of the StandardOutput to the end by each line and
  * update the tasks progress with this information
  * 
  * Read from the current position of StandardError to the end by each line, update
  * the task's progress with this information and set that we have an error.
  * 
  * Sleep for 250 milliseconds (1/4 of a sec)
  */
bool isError = false;
while (!powerShellProcess.HasExited)
{
  string standardOuputLine, standardErrorLine;
  while (!string.IsNullOrEmpty((standardOuputLine = powerShellProcess.StandardOutput.ReadLine())))
  {
    this.UpdateTaskProgress(standardOuputLine);
  }

  while (!string.IsNullOrEmpty((standardErrorLine = powerShellProcess.StandardError.ReadLine())))
  {
    this.UpdateTaskProgress(standardErrorLine);
    isError = true;
  }

  Thread.Sleep(250);
}

/*
  * Now that the process has completed read to the end of StandardOutput and StandardError.
  * Update the task progress with this information.
  */

string finalStdOuputLine = powerShellProcess.StandardOutput.ReadToEnd();
string finalStdErrorLine = powerShellProcess.StandardError.ReadToEnd();

if (!string.IsNullOrEmpty(finalStdOuputLine))
  this.UpdateTaskProgress(finalStdOuputLine);

if (!string.IsNullOrEmpty(finalStdErrorLine))
{
  this.UpdateTaskProgress(finalStdErrorLine);
  isError = true;
}

// there was an error during the run of PowerShell that was output to StandardError.  This doesn't necessarily mean that
// the script error'd but there was a problem.  Throw an exception for this.
if (isError)
  throw new Exception(string.Format(CultureInfo.InvariantCulture, "Error during the execution of {0}.", this.ScriptLocation)); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T13:01:30.017

您想使用该`Process.StandardOutput`属性。这是一个可以打开以获取程序输出的流

# php - ajax加载数据上的Jquery分页

> ID：11015166
> 
> 赞同：1
> 
> 时间：2012-06-13T12:48:01.323
> 
> 标签：php, jquery, mysql, ajax

我有一个按类别列出的清单。我正在使用 jquery post 加载数据列表。在 ajax 加载的数据上，我正在寻找再次使用 ajax 的分页。请给我建议最好的解决方案。

我想到的是制作三个具有不同ID并在单击类别时加载然后再次调用分页nos的函数onclick来替换ajaxloaded div的内容，例如..

```
<div id='data'> 
   <div id='ajaxloaded'>
      data listing goes herez
   </div> 
     <div id='paginate'> 1 2 3..</div>
 </div> 
```

这是要走的路吗？任何人有更好的主意请建议我一些我正在使用 PHP 和 Mysql。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T12:52:05.863

您可以使用[DataTables](http://datatables.net)，它是一个允许分页的 jQuery 库。

看[这个例子](http://datatables.net/release-datatables/examples/data_sources/server_side.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T12:53:30.083

你试过这些吗？ [http://www.jquery4u.com/plugins/10-jquery-pagination-plugins/](http://www.jquery4u.com/plugins/10-jquery-pagination-plugins/)

# c# - System.NullReferenceException 对象引用未设置为对象的实例

> ID：11015170
> 
> 赞同：2
> 
> 时间：2012-06-13T12:48:13.873
> 
> 标签：c#, silverlight, error-handling

所以，我明白了

```
System.NullReferenceException
Object reference not set to an instance of an object.
   at Microsoft.Windows.Design.Platform.SilverlightMetadataContext.SilverlightXamlExtensionImplementations.<GetXmlNamespaceCompatibilityMappings>d__8.MoveNext()
   at MS.Internal.Design.Metadata.ReflectionProjectNode.BuildSubsumption()
   at MS.Internal.Design.Metadata.ReflectionProjectNode.SubsumingNamespace(Identifier identifier)
   at MS.Internal.Design.Markup.XmlElement.BuildScope(PrefixScope parentScope, IParseContext context)
   at MS.Internal.Design.Markup.XmlElement.ConvertToXaml(XamlElement parent, PrefixScope parentScope, IParseContext context, IMarkupSourceProvider provider)
   at MS.Internal.Design.DocumentModel.DocumentTrees.Markup.XamlSourceDocument.FullParse(Boolean convertToXamlWithErrors)
   at MS.Internal.Design.DocumentModel.DocumentTrees.Markup.XamlSourceDocument.get_RootItem()
   at Microsoft.Windows.Design.DocumentModel.Trees.ModifiableDocumentTree.get_ModifiableRootItem()
   at Microsoft.Windows.Design.DocumentModel.MarkupDocumentManagerBase.get_LoadState()
   at MS.Internal.Host.PersistenceSubsystem.Load()
   at MS.Internal.Host.Designer.Load()
   at MS.Internal.Designer.VSDesigner.Load()
   at MS.Internal.Designer.VSIsolatedDesigner.VSIsolatedView.Load()
   at MS.Internal.Designer.VSIsolatedDesigner.VSIsolatedDesignerFactory.Load(IsolatedView view)
   at MS.Internal.Host.Isolation.IsolatedDesigner.BootstrapProxy.LoadDesigner(IsolatedDesignerFactory factory, IsolatedView view)
   at MS.Internal.Host.Isolation.IsolatedDesigner.BootstrapProxy.LoadDesigner(IsolatedDesignerFactory factory, IsolatedView view)
   at MS.Internal.Host.Isolation.IsolatedDesigner.Load()
   at MS.Internal.Designer.DesignerPane.LoadDesignerView() 
```

创建新的 Silverlight 项目时出错。文件 > 新建 > 项目 > Visual C# > Silverlight > Silverlight 应用程序。

*   “在新网站中托管 silverlight 应用程序”已禁用

*   Silverlight 版本：4

我的笔记本电脑上没有这个问题，它的安装与我的家用电脑完全相同。

怎么了？我怎样才能解决这个问题？

ps ..这个错误出现在我打开的任何silverlight项目中。不管它是我已经在研究的一个新的。

**[更新]**

但是如果我安装了silverlight 5，我在开始一个新项目时不能选择它吗？我仍然只能选择 Silverlight 3 和 Silverlight 4。

另外，如您提供的链接中所述，我的“程序和功能”中没有 silverlight 5。

但是，在谷歌上搜索如何检查 silverlight 版本.. 我被发送到寄存器以检查 silverlight 的版本密钥。

关键说我的版本是：5.1.10411.0

如果我的程序和功能中没有 silverlight 5，我该如何删除 silverlight 5？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T12:54:56.820

这可能是由于将 silverlight 升级到版本 5 引起的。来自[social.msdn.microsoft.com](http://social.msdn.microsoft.com/Forums/en/vswpfdesigner/thread/01ce533e-ed94-48d2-8184-e2e34e6bdc6f)的引述：

> 您似乎已将 silverlight 版本升级到 Silverlight 5。如果是这样，您可能需要卸载 silverlight 5 和 4，然后在[http://go.microsoft.com/fwlink/?LinkID=188039](http://go.microsoft.com/fwlink/?LinkID=188039)上安装 SilverLight 4 开发人员运行时。

另外，请看[这里](http://connect.microsoft.com/VisualStudio/feedback/details/718259/new-ms-update-causes-vs2010-silverlight-project-to-have-error-in-design-wpf-editor)

# iphone - 从通知下拉菜单复制通知（iOS 5.0+ 可用）

> ID：11015182
> 
> 赞同：0
> 
> 时间：2012-06-13T12:49:05.713
> 
> 标签：iphone, objective-c, ios

我想开发一个 iphone 应用程序，它将从通知中心复制 Facebook 和 Twitter 通知。如何从通知中心获取 facebook 和 twitter 通知？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T12:54:05.300

你不能，通知中心没有访问权限。

您的应用程序只会收到用户点击的通知，无论是从通知中心还是在您的应用程序打开时。您甚至看不到您的应用收到的其他通知。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T12:54:24.270

您的应用无权访问任何其他应用通知。您无法访问除您自己之外的通知（实际上，您只能访问用户单击的通知。即使您已提出多个通知）。

您必须直接访问 twitter/Facebook 帐户才能获取最新信息。

# c++ - SCons编译后将程序复制到父目录

> ID：11015184
> 
> 赞同：6
> 
> 时间：2012-06-13T12:49:14.497
> 
> 标签：c++, build, makefile, scons

我试图在自动编译后将生成的程序文件复制到父目录。

我试过这个，但这不起作用。

```
env.Program( "program_name", [ "file1.cc", "file2.cc" ] )
Copy( "../program_name", "program_name" ) 
```

我怎样才能用 SCons 做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-13T13:02:01.077

更好的方法是使用目标和 Command() 构建器，如下所示：

```
prgTarget = env.Program( "program_name", [ "file1.cc", "file2.cc" ] )
Command(target = "../program_name",
        source = prgTarget,
        action = Copy("$TARGET", "$SOURCE")) 
```

或者根据情况，使用[Install() builder](http://www.scons.org/doc/2.3.4/HTML/scons-user/ch11.html)，如下所示：

```
prgTarget = env.Program( "program_name", [ "file1.cc", "file2.cc" ] )
Install("../program_name", source = prgTarget) 
```

# linux - 是否可以通过 netlink 在两个 linux 内核模块之间进行通信？

> ID：11015186
> 
> 赞同：5
> 
> 时间：2012-06-13T12:49:16.293
> 
> 标签：linux, linux-kernel, kernel-module, netlink

众所周知，netlink 是用户/内核空间的通信机制。

我想从我的内核模块与另一个模块进行通信。另一个内核模块已经有了 netlink 接口。

是否可以像我们在用户空间中那样从内核模块连接到netlink？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T13:37:49.097

简短的回答：没有。

如果你想在两个内核模块之间进行通信，你应该使用由另一个内核模块导出的符号（全局变量或函数）。

`netlink`套接字用于内核和用户空间之间的通信。AFAIR 没有办法使用 netlink（至少它不是首选方式）在内核中进行通信。

导出符号的示例：

`module1.c:`

```
 int foo(int a)
  {
      /* do some stuff here */
  }
  EXPORT_SYMBOL(foo); 
```

`module2.c`

```
 extern int foo(int);
  int bla(int b)
  {
      /* call foo(a) */
      int ret = foo(b);
  } 
```

# php - 在自己的网站上使用应用程序时的 Facebook 用户许可 - 集成在 PHP 而不是 Url

> ID：11015188
> 
> 赞同：-1
> 
> 时间：2012-06-13T12:49:26.027
> 
> 标签：php, facebook, facebook-graph-api

我在我的网站上使用 PHP 创建了一个 Facebook 应用程序。要在我的网站上使用此应用程序，用户必须使用 Facebook 身份验证登录。

这个应用程序基本上允许用户在他的墙上发布默认评论。使用我的 facebook 个人资料帐户可以正常工作，但是当我让我的朋友使用我的网站时，他收到以下错误 - 'Uncaught OAuthException: (#200) The user has not authorized the application to perform this action throw in'

到目前为止，我发现的问题的唯一解决方案是输入以下 URL -`<pre>https://www.facebook.com/login.php?api_key=API_KEY&cancel_url=http://www.magimagi.com&next=http://magimagi.com/login/uploadtopage2.php&fbconnect=1&return_session=1&session_version=3&v=1.0&display=page&req_perms=user_about_me,user_birthday,publish_stream,offline_access</pre>`

我不想在我的应用程序上创建一个链接供用户单击它 - 相反，我希望它集成到我网站上已经存在的 PHP 代码中。

这是我拥有的示例 PHP 代码

```
<pre>

/ Get User ID
$user = $facebook->getUser();

if ($user) {
  try {
    $user_profile = $facebook->api('/me');
  } catch (FacebookApiException $e) {
    error_log($e);
    $user = null;
  }
}
if ($user) {
  $logoutUrl = $facebook->getLogoutUrl();
} else {
  $loginUrl = $facebook->getLoginUrl(   array(
       'scope' => 'publish_stream'
      ));
}
</pre> 
```

这是 HTML

```
<pre>
<form id="selectFriend" name="selectFriend" method="post">
<label for="Friend">Friend:</label>
<select id="friend" name="friend">
<?php 
foreach($user_friends['data'] as $f){
echo '<option value="'.$f['id'].'">'.$f['name'] .'</option>';
} 
?>
</select>
<label for="URL">URL:</label>
<input id="link" name="link">
<input id="message" name="message">
<input type="submit" name="submit" id="submit" value="Send!">
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T13:31:07.147

> '未捕获的 OAuthException：（＃200）用户尚未授权应用程序执行此操作引发'
> 
> 到目前为止，我发现的问题的唯一解决方案是 […]

到目前为止，您似乎对应用程序和授权的基础知识还没有太多了解……所以请开始阅读相关文档！

[https://developers.facebook.com/docs/authentication/](https://developers.facebook.com/docs/authentication/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T13:07:00.723

我刚刚在[Graph Explorer](http://developers.facebook.com/tools/explorer)中尝试过，似乎为了从中获取信息`/me`，您需要传递访问令牌（我不记得以前是这样的）。使用用户的 id 代替 if `/me`，可以正常工作并返回没有访问令牌的基本信息。您还可以尝试使用当前请求传递访问令牌：

```
$token = $facebook->getAccessToken();
$user_profile = $facebook->api('/me',array (
'access_token' => $token)
); 
```

# windows-services - “自动”与“自动（延迟启动）”

> ID：11015189
> 
> 赞同：378
> 
> 时间：2012-06-13T12:49:26.540
> 
> 标签：windows-services, wix

安装 Windows 服务时，有两个选项可用于在 Windows 启动时自动启动 Windows 服务。一个是*Automatic*，另一个是*Automatic (Delayed start)*。这两者在细节上有什么区别？

例如，如果您使用 wixtoolset 创建安装程序，则该`ServiceConfig`元素具有该`DelayedAutoStart`属性。这将如何影响在启动时启动服务时会发生什么？

WiX 文档：*[ServiceConfig 元素](http://wixtoolset.org/documentation/manual/v3/xsd/wix/serviceconfig.html)*

* * *

## 回答 #1

> 赞同：523
> 
> 时间：2012-06-13T13:12:05.043

简而言之，设置为*自动*的服务将在启动过程中启动，而设置为*延迟*启动的服务将在启动后不久启动。

*延迟*启动服务可提高服务器的启动性能并具有安全优势，这些优势在评论中链接到[的文章](https://web.archive.org/web/20151221180925/http://blogs.technet.com/b/askperf/archive/2008/02/02/ws2008-startup-processes-and-delayed-automatic-start.aspx)Adriano 中进行了概述。

**更新：**默认情况下，“启动后不久”实际上是在最后一个“自动”服务启动后 2 分钟。根据[Windows Internals](http://books.google.co.uk/books?id=VgjAQjsc6g8C&pg=PT580)和其他来源（[3、4](https://www.coretechnologies.com/WindowsServices/FAQ.html#SetDelayedStartTime) ） ，这可以通过[注册表](http://www.thewindowsclub.com/delay-loading-of-specific-services-windows)项进行配置。

感兴趣的注册表项（至少在某些版本的 Windows 中）是：

*   `HKLM\SYSTEM\CurrentControlSet\services\<service name>\DelayedAutostart``1`如果延迟，则将具有价值，`0`否则。
*   `HKLM\SYSTEM\CurrentControlSet\services\AutoStartDelay`或`HKLM\SYSTEM\CurrentControlSet\Control\AutoStartDelay`（在 Windows 10 上）： (DWORD) 十进制等待的毫秒数，可能需要创建这个。适用于全球所有*延迟*服务。

# c# - Log4Net 未写入数据库

> ID：11015192
> 
> 赞同：10
> 
> 时间：2012-06-13T12:49:37.550
> 
> 标签：c#, sql-server, database, logging, log4net

我检查了连接字符串（我从服务器资源管理器中得到它）。

我已经检查了 log4net 配置中的 commandText。

我检查了数据库权限（集成安全性很好，并且在 log4net 类之外工作）。

我检查了存储库的配置属性（它已配置，它发现配置文件很好）。

我还检查了配置文件中定义的字段是否与数据库中表的属性（字段大小等）匹配。

有任何想法吗？

当我在调试时，它似乎在所有正确的时间都使用了所有正确的方法，没有引发任何异常。

```
<log4net>

  <appender name="ADONetAppender" type="log4net.Appender.ADONetAppender">
    <bufferSize value="1" />
    <connectionType value="System.Data.SqlClient.SqlConnection, System.Data, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
    <connectionString value="" />
    <commandText value="INSERT INTO dbo.Log4Net ([Date],[Thread],[Level],[Logger],[Message]) VALUES ('01-01-2001', 'test', 'test', 'test', 'test')"/>
    <!--<commandText value="INSERT INTO dbo.Log4Net ([Date],[Thread],[Level],[Logger],[Message],[Exception],[MachineName],[CultureId],[SourcePage],[Details],[Method]) VALUES (@log_date, @thread, @log_level, @logger, @message, @exception, @MachineName, @CultureId, @SourcePage, @Details, @Method)" />-->
    <parameter>
      <parameterName value="@log_date"/>
      <dbType value="DateTime"/>
      <layout type="log4net.Layout.RawTimeStampLayout"/>
    </parameter>
    <parameter>
      <parameterName value="@thread"/>
      <dbType value="String"/>
      <size value="255"/>
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%thread"/>
      </layout>
    </parameter>
    <parameter>
      <parameterName value="@log_level"/>
      <dbType value="String"/>
      <size value="50"/>
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%level"/>
      </layout>
    </parameter>

...more parameters

    <securitycontext type="log4net.Util.WindowsSecurityContext">
      <credentials value="Process">
      </credentials>
    </securitycontext>
  </appender>

  <appender name="FileAppender" type="log4net.Appender.FileAppender">
    <param name="File" value="LogTest.txt"/>
    <param name="AppendToFile" value="true"/>
    <layout type="log4net.Layout.PatternLayout">
      <param name="ConversionPattern" value="%d [%t] %-2p %c [%x] - %m%n"/>
    </layout>
  </appender>

  <root>
    <appender-ref ref="ADONetAppender"/>
    <appender-ref ref="FileAppender"/>
  </root>

</log4net> 
```

它没有写入任何附加程序。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-13T16:28:18.817

对，在拉了我的头发几个小时后——我已经把它弄碎了。

这一行：

```
log4net.Config.XmlConfigurator.Configure(); 
```

需要在任何日志记录之前放入（嗯，尽早在应用程序中）。就是这样。这就是全部。这是我感到非常欣慰但同时又感到沮丧的问题之一。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-13T14:10:22.633

我建议打开 Log4Net 调试：

```
<add key="log4net.Internal.Debug" value="true"/> 
```

如果幕后发生错误，这可能会为您指明正确的方向。输出将定向到 IDE 或命令行中的控制台输出。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-06-13T14:15:46.743

1.  检查 log4net.dll 是否与您的应用程序放在同一文件夹中。
2.  尝试启用 log4net 自记录，也许它会帮助找出：

    ```
    <configuration>
     <appSettings>
      <add key="log4net.Internal.Debug" value="true"/>
     </appSettings>
     <system.diagnostics>
      <trace autoflush="true">
       <listeners>
        <add name="textWriterTraceListener"
             type="System.Diagnostics.TextWriterTraceListener"
             initializeData="C:\tmp\log4net.txt" />
       </listeners>
      </trace>
     </system.diagnostics>
    </configuration> 
    ```

另请参阅[官方 log4net 常见问题解答](http://logging.apache.org/log4net/release/faq.html#internalDebug)。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-03-29T14:42:54.850

我昨天遇到了类似的问题，Log4Net 只是没有写入数据库。我从另一个成功将日志写入数据库的现有附加程序复制了配置。我的解决方案是运行 SQL Server Profiler 来尝试捕捉正在发生的事情。Profiler 显示 INSERT 语句是由 Log4Net 发送的，但它在 SQL Server 端失败了。在 SQL Server Management Studio 中手动运行 INSERT 语句向我展示了它到底出了什么问题，在我的情况下，它将 NULL 插入到不接受 NULL 的列中。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-13T14:08:04.673

根据[ADONetAppender](http://logging.apache.org/log4net/release/sdk/log4net.Appender.AdoNetAppender.html)配置示例：

```
<commandText value="INSERT INTO dbo.Log4Net 
    ([Date],[Thread],[Level],[Logger],[Message]) 
    VALUES (@log_date, @thread, @log_level, @logger, @message)"/> 
```

这使用 ADO.NET 参数化查询格式，因此您需要使用该语法。此外，您可能不想为数据库连接使用集成安全性（尤其是如果您正在运行网站或服务）。对于您的文件附加程序，我推荐一个完全限定的路径，并确保它可以被记录器写入。

我假设您已经在指定的数据库中创建了表？

**注意**我建议也将[跟踪附加程序](http://logging.apache.org/log4net/release/config-examples.html#traceappender)设置为调试模式，以确保您实际上正在记录内容。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-08-29T11:04:43.147

在 AssemblyInfo.cs 文件中添加这一行

```
[assembly: log4net.Config.XmlConfigurator(Watch = true)] 
```

正如官方配置手册所述，“可以使用程序集级属性配置 log4net 配置，而不是通过编程方式指定”，我发现这是一种更清晰的方法。有些人可能会觉得我的回答更直截了当。

来源：[https ://logging.apache.org/log4net/release/manual/configuration.html](https://logging.apache.org/log4net/release/manual/configuration.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-04-04T22:15:04.690

对于 sql server 连接，我使用我的真实帐户登录到 azure 和 sql server，因此我不得不将集成安全性更改为“SSPI”而不是“true”，这才成功

通过添加这个才发现它是con字符串

```
<system.diagnostics>
<trace autoflush="true">
  <listeners>
    <add
        name="textWriterTraceListener"
        type="System.Diagnostics.TextWriterTraceListener"
        initializeData="C:\Logs\log4net.txt" />
  </listeners>
</trace> 
```

# objective-c - 将文件从临时目录复制到资源文件夹

> ID：11015194
> 
> 赞同：0
> 
> 时间：2012-06-13T12:49:44.287
> 
> 标签：objective-c, ios, xcode

我可以在我的应用程序中录制一个 .caf 文件并将其回放给用户。我希望能够永久保存它，所以我想将它移动到我的资源文件夹中。我不确定这是否是正确的举动，或者将它放在文档目录中是否更好，但我从资源中访问了所有其他声音文件，所以我认为这将是正确的选择。有谁知道如何做到这一点？谢谢！

我如何将录音保存到临时：

```
NSURL *soundFileURL=[NSURL fileURLWithPath:
                         [NSTemporaryDirectory()
                          stringByAppendingString:@"soundFile1.caf"]]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T13:05:52.110

使用应用程序时，您不能将任何内容添加到应用程序的应用程序包中，因此请将它们添加到应用程序的文档或库文件夹中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T13:06:12.610

您不能在应用程序包中添加、删除或修改文件，这意味着您不能将项目添加到资源目录。

如果文件是用户想要保留在应用程序中的内容，则应将其存储在文档目录中。您可能希望阻止将其备份到 iCloud，您可以[按照此处的 Apple 说明](http://developer.apple.com/library/ios/#qa/qa1719/_index.html)进行操作。

要获取文档目录的路径，或文档目录中给定文件名的路径，您可以使用以下方法：

```
+ (NSString *)pathForDocumentsDirectory
{
    NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    return [documentPaths objectAtIndex:0];
}

+ (NSString *)pathForFileInDocumentsDirectory:(NSString *)filename
{
    return [[self pathForDocumentsDirectory] stringByAppendingPathComponent:filename];
} 
```

# c# - 网格输入区

> ID：11015196
> 
> 赞同：0
> 
> 时间：2012-06-13T12:49:53.650
> 
> 标签：c#, asp.net, user-interface

我正在寻找一种方法，让我的客户能够将数据“粘贴”到网格区域输入，一种“Excel”类型的 asp.net 控件。

例如，建议我在 XLS 文件中有一个电子邮件和客户列表，我想将它们复制到我的页面网格，然后将此数据存储到我的数据库中。

谢谢 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T13:19:56.597

从[Sigma Grid](http://www.sigmawidgets.com/download.html)下载。这是一个很好的。

# batch-file - 批处理文件：拆分文件名和文件夹

> ID：11015204
> 
> 赞同：1
> 
> 时间：2012-06-13T12:50:13.497
> 
> 标签：batch-file

我想从传递的参数中解析文件夹名和文件名。例子：

```
my.bat c:\windows\test.txt 
```

我希望这些存储如下：

```
FILE_NAME=test.txt
FILE_FOLDER=c:\windows\ 
```

我怎样才能做到这一点？

我找到[***了这个***](https://stackoverflow.com/questions/454670/in-batch-read-only-the-filename-from-a-variable-with-path-and-filename)，但它只获取文件名。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T12:55:42.343

您可以阅读帮助`FOR /?`或[如何使用 CMD 从文件路径获取文件夹路径](https://stackoverflow.com/a/659672/463115)

```
set "FILE_NAME=%~nx1"
set "FILE_FOLDER=%~dp1" 
```

# spring - 2个同名但在不同包中的bean；如何自动接线？

> ID：11015205
> 
> 赞同：16
> 
> 时间：2012-06-13T12:50:13.617
> 
> 标签：spring, inversion-of-control, autowired

我有一个应用程序，它有 2 个同名的 bean，但它们位于不同的包中。我的 Spring 应用程序失败，因为它无法决定采用哪个 bean。有什么解决办法吗？bean 当前不实现特定的接口。

请参阅下面的异常编辑示例：

```
Caused by:
org.springframework.context.annotation.ConflictingBeanDefinitionException:
Annotation-specified bean name 'dataTransferHandler' for bean class
[aaaaa.ws.handler.DataTransferHandler] conflicts with existing,
non-compatible bean definition of same name and class
[bbbbb.ws.handler.DataTransferHandler] 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-13T12:58:10.767

您将不得不为您的 bean 提供不同的名称 - 如果多个 bean 使用相同的名称定义，那么稍后定义的一个将覆盖之前定义的一个 - 因此在您的情况下，只有一个名称为`dataTransferHandler`.

您可以为这两个 bean 指定不同的名称，以便两者都可以存在，并且您可以使用以下方法注入正确的一个： `@AutoWired @Qualifier("dataTransferHandler")` 或 `@Resource(name="dataTransferHandler")`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T12:59:07.777

您可以将属性**primary="true"**赋予您希望在自动装配时具有偏好的 bean 定义。但是bean名称必须不同。相同的bean名称没有解决方案。

在运行时，当您将获得自动装配类时，主真正的 bean 将获得自动装配的偏好。希望这对您有所帮助。干杯。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-04T07:19:19.310

我问了关于同一问题的另一个问题，并且有一个不需要使用 @Qualifier 注释的解决方案：如果您的两个 DataTransferHandler 类都有一个 @Component 注释，您可以简单地将 String 参数添加到它们的一个构造中（即@Component（“Foo”）），这应该可以解决问题而无需额外的更改。

有关更多详细信息，请参阅[User9123 对我的问题的回答。](https://stackoverflow.com/questions/60514124/why-doesnt-springs-component-annotation-use-the-full-class-name)

# facebook-graph-api - Facebook 图表，带有额外参数的发布操作

> ID：11015207
> 
> 赞同：0
> 
> 时间：2012-06-13T12:50:20.480
> 
> 标签：facebook-graph-api, facebook-opengraph

我创建了一个应用程序及其关联的 Open Graph 操作。提交一项使用额外字段“消息”的操作时遇到问题。当管理员或测试人员使用此操作时，它可以正常**工作，但它不适用于 facebook 的测试用户**，例如“Auth Dialog Preview User”，它会给出错误“消息：不允许此操作设置用户消息，因为此属性没有请求批准。” 为什么它会给测试用户这个错误？当我提交此操作时，Facebook 回复我说他们无法测试此操作...我错过了什么？

[http://gyazo.com/42ebb0a5c12f3c47fed64f5eb9930f61](http://gyazo.com/42ebb0a5c12f3c47fed64f5eb9930f61)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T23:24:19.987

在这个问题上，我也一直在碰壁。

第一：目前有一个 Facebook 错误正在针对此主题进行分类。

[Facebook 错误链接](https://developers.facebook.com/bugs/331215723624086?browse=search_500dd01280b133317300421)

第二：我注意到 Facebook 更新了 Message 属性的描述。

> 消息：允许用户编写附加到此操作的个性化消息。您只能在用户输入文本（未预填充）时使用用户消息。细绳

[详细说明 Message 参数的 Facebook 页面](https://developers.facebook.com/docs/opengraph/actions/)

您会注意到它清楚地表明它现在不能预先填充。我不记得以前说过（当然我的记忆力可能让我失望），我很好奇这是否意味着即使用户在我的应用程序上编写了消息，Facebook 也会认为我正在输入的字符串 pre-即使它是用户编写的实际唯一评论，也会被填充。换句话说，您可能必须使用 Facebook 代码（插件、对话框等）来提示用户实际输入附加到操作的消息。

第三：仅供参考，我能够让我的操作获得批准（使用 Message 参数），但是对于所有尝试提交操作的用户（管理员和测试人员除外），同样的错误仍然存​​在，因此让您的操作获得批准不太可能缓解问题。这要么是一个实际的错误，要么是对 Message 参数的功能/功能的误解。

抱歉，这是对问题的部分答案斜线扩展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T13:34:59.873

> 为什么它会给测试用户这个错误？

静默不是说得很清楚吗：

> “消息：不允许此操作设置用户消息，因为未请求批准此属性。”

……？

非管理员用户不能发布未经 Facebook 批准的操作。

# r - 如何在 R 中的 dotchart() 中改变点大小

> ID：11015213
> 
> 赞同：4
> 
> 时间：2012-06-13T12:50:35.027
> 
> 标签：r, charts, size, vary

我对使用以下数据创建点图有疑问：

```
 Patient ID Day Dosage of Drug (mg)
     1552        1     .3
     1552        7     .8
     1552       14    1.2
     1663        1     .2
     1663        7     .7
     1663       18    1.4 
```

我可以创建点图，其中 x 轴为“天”，y 轴为每个患者，这样对于患者 ID 1552，在第 1、7 和 14 天有三个点。没有问题。但现在我想让点的大小与当天服用的剂量成正比，这样第 14 天的点就会大于同一患者 ID 行上的 7 和 1。有什么办法可以做到这一点吗？

我知道该`dotchart()`函数有一个可修改`cex`的元素，可以改变 y 轴字体/点的大小，但它是一致的。有没有办法分别绘制每个点并且每次根据剂量数据使点大小不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T14:05:51.157

我会使用 ggplot2 创建这样的图表：

```
ggplot(aes(x = day, y = patient, size = dosage), data = df) + 
      geom_point() 
```

我假设带有数据的 data.frame 被称为`df`，并且它包含名为 day、patient 和 dose 的列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T14:06:57.863

如果你使用这个`ggplot2`包，你可以这样做：

```
dat <- read.table(textConnection("ID Day Dose
     1552        1     .3
     1552        7     .8
     1552       14    1.2
     1663        1     .2
     1663        7     .7
     1663       18    1.4"), header=TRUE)    

require(ggplot2)
p <- ggplot(dat, aes(factor(Day), factor(ID)))
p + geom_dotplot(binaxis = "y", stackdir = "center", binpositions="all") + 
 geom_point(aes(size=Dose)) 
```

![在此处输入图像描述](../Images/22ecaa50800b9daff918b3ed646b2f02.png)

# visual-studio-2010 - 使用 VS 2010 管理经典 ASP 站点

> ID：11015225
> 
> 赞同：0
> 
> 时间：2012-06-13T12:51:01.513
> 
> 标签：visual-studio-2010, asp-classic

我已经获得了 Classic ASP 网站的控制权。使用 VS 2010 管理此代码的最佳方法是什么？更具体地说，我怎样才能最好地将它导入 VS 2010。我应该从一个空白解决方案开始吗？一个空白的 ASP.NET 项目？显然，我希望它通过构建过程运行，但我仍然希望以某种方式创建它，以便我可以使用 VS 2010 编辑文件并在需要测试时在我的调试 Web 服务器上运行它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T12:58:44.807

如果我没记错的话，您不能通过构建过程运行经典的 asp 网站。

在 Visual Studio 2010 中，您只能打开文件并将其作为文件编辑器进行编辑。但是classoc asp和vs2010的交互并不多

另外：阅读这篇文章会对您有所帮助 -[从头开始​​在 Visual Studio 2010 中创建经典的 asp 项目](https://stackoverflow.com/questions/5125505/create-classic-asp-project-in-visual-studio-2010-from-scratch)

# android - 带有按钮的 Android ExpandableListView 父级

> ID：11015230
> 
> 赞同：6
> 
> 时间：2012-06-13T12:51:10.370
> 
> 标签：android, button, expandablelistview

我正在努力实现这样的目标。可扩展列表由某些类别的名称组成，当单击父级时，它会显示该类别中所有子级的列表。现在，假设我想动态地将孩子添加到任何类别？我怎么做 ？我是否在列表中的每个父母都保留一个按钮，单击该按钮会在其下添加一个新孩子？

但是在不同的论坛中环顾四周，我开始意识到在每个父级中设置一个按钮单击处理程序并不容易。但如果这是唯一的方法，谁能给我一些示例代码？

我找到了这个线程，但无法在我的代码中实现它。 [Android Row 变成不可点击按钮](https://stackoverflow.com/questions/2322390/android-row-becomes-unclickable-with-button/2323085#2323085)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T14:27:18.960

向组视图添加一个按钮应该不难。

我相信以下应该可以工作（尽管我没有使用数组支持的 ExpandableListView 进行测试的项目）。

我不知道您的组行布局，所以我将在这里制作一个以供参考。

**group_layout.xml**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/test"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >
    <TextView
        android:id="@android:id/text1"
        android:layout_width="wrap_content"
        android:layout_height="35dp"
        android:focusable="false"
        android:focusableInTouchMode="false"
        android:gravity="center_vertical"
        android:paddingLeft="?android:attr/expandableListPreferredItemPaddingLeft"
        android:textAppearance="?android:attr/textAppearanceLarge" />
    <Button
        android:id="@+id/addbutton"
        android:layout_width="wrap_content"
        android:layout_height="35dp"
        android:focusable="false"
        android:focusableInTouchMode="false"
        android:text="Add"
        android:textSize="12dp" />
</LinearLayout> 
```

然后在您`getGroupView`的适配器中的方法中：

```
public View getGroupView(int groupPosition, boolean isExpanded, View convertView, ViewGroup parent) { 
    if (convertView == null) {
        View convertView = View.inflate(getApplicationContext(), R.layout.group_layout, null);
        Button addButton = (Button)convertView.findViewById(R.id.addButton);

        addButton.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View view) {
                // your code to add to the child list
            }
        });
    }        
    TextView textView = (TextView)convertView.findViewById(R.id.text1);
    textView.setText(getGroup(groupPosition).toString()); 
    return convertView; 
} 
```

# ios - iOS app 什么时候直接进入后台状态？

> ID：11015231
> 
> 赞同：4
> 
> 时间：2012-06-13T12:51:19.053
> 
> 标签：ios, multitasking

谁能告诉我一个iOS应用程序直接进入后台状态的场景？

在这里，我在多任务部分引用了 iOS 应用程序编程文档中的内容。

> 如果你的应用程序被启动到后台——通常是为了处理某种类型的后台事件——启动周期会稍微改变为图 3-3 中所示的那个。主要区别在于，它不是让您的应用程序处于活动状态，而是进入后台状态来处理事件，然后很快就会暂停。

***添加 ...***

在 iOS 应用程序编程文档中，如果你看到图 3.3 标题为*Launching an app into the background*，流程是这样的**User taps app icon -> main() -> UIApplicationMain() -> Enter background**。当用户点击应用程序图标时，应用程序直接进入后台是否有机会。我是这样解释图像的。这是对的吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T16:31:21.420

后台启动的一种场景（App X）

*   X 在其 Info.plist 中注册了位置背景模式
*   X 由用户运行，并在运行时注册显着的位置变化
*   用户切换到另一个应用程序 Y，因此 X 进入后台，然后暂停（每当需要处理重大位置更改时，它将返回到后台模式，然后再次暂停）
*   应用程序 Y 占用大量内存，因此暂停的应用程序（包括 X）被踢出内存
*   一个显着的位置变化出现了。现在 X 被启动到后台。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T13:04:05.817

## 设想

假设您已经注册了本地/推送通知的应用程序。然后您的应用程序将在后台启动，运行一些在您的委托方法中编写的代码，`applicationDidEnterBackgroud:`然后立即终止。

### 检查清单 2

[苹果文档](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/IPhoneOSClientImp/IPhoneOSClientImp.html#//apple_ref/doc/uid/TP40008194-CH103-SW1)

**编辑：**

> 当应用程序在后台运行并且某些消息、数据或其他用户可能感兴趣的项目到达时，应用程序也可能会发现本地通知很有用。在这种情况下，他们应该使用 UIApplication 方法 **presentLocalNotificationNow 立即呈现通知：（iOS 为应用程序提供了在后台运行的有限时间）。**清单 2-2 说明了如何做到这一点。

# javascript - HTML/CSS/JS 元素定位

> ID：11015235
> 
> 赞同：0
> 
> 时间：2012-06-13T12:51:27.600
> 
> 标签：javascript, html, css, position

有一个问题。乍一看这个HTML

```
<div id="map" style="background-image: url(map.png); width: 700; height: 600;">
  <div id="dot1" onMouseOver=expand(this) onMouseOut=shrink(this)></div>
  <div id="dot2" onMouseOver=expand(this) onMouseOut=shrink(this)></div>
</div> 
```

我有下一个 JS 代码

```
function expand(element) {
  element.style.height = '100px';
}
function shrink(element) {
  element.style.height = '20px';
} 
```

想法是：想象地图和上面的多个“红点”鼠标悬停在它上面，它扩展到 100x100，得到关于这个点的白色背景和文本。只有一个问题 - 如何在扩展其中一个点的同时使其他点粘在地图上？

例如，用户正在查看“顶部”位置，而当前位置下的其他所有位置都在向下移动约 100 像素（恰好是第一个扩展的数量）

**它在position : relative**看起来很好， 但只有在你不往里面看的时候。
绝对/固定？- 糟糕的选择。我必须计算用户屏幕大小/客户端大小并放置每个“点”
或计算 MAP 的左/上偏移量并制作每个点 map_offset_Left+myLeft

也许有一种方法可以将它们设置为依赖于 MAP div 并相互独立？

泰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T12:53:40.237

将地图设置为`position: relative`，其绝对定位的后代将相对于*地图*而不是窗口进行定位。

# fortran - 为什么这个 MPI_SENDRECV 是死锁的？

> ID：11015245
> 
> 赞同：0
> 
> 时间：2012-06-13T12:51:33.663
> 
> 标签：fortran, mpi

这是我的第一篇文章。预先感谢您的帮助。这是用于测试 MPI_SENDRECV 的非常短的代码，我不明白。但这是僵局，谁能告诉我为什么？

```
 PROGRAM sendrecv
  INCLUDE "mpif.h"
  INTEGER ibuf(20)
  CALL MPI_INIT(ierr)
  CALL MPI_COMM_SIZE(MPI_COMM_WORLD, nprocs, ierr)
  CALL MPI_COMM_RANK(MPI_COMM_WORLD, myrank, ierr)
  a=1
  b=2
  if (myid == 0) then
     call mpi_sendrecv(a,1,mpi_real,1,0,
 .                     b,1,mpi_real,1,0,
 .                     MPI_COMM_WORLD, status,ierr)
  elseif (myid == 1) then
     call mpi_sendrecv(b,1,mpi_real,0,0,
 .                     a,1,mpi_real,0,0,
 .                     MPI_COMM_WORLD,status,ierr)
  end if
  if (myid.eq.0) then
     write(*,*) a
  endif
  if (myid.eq.1) then
     write(*,*) b
  endif
  CALL MPI_FINALIZE(ierr)
  END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T13:02:55.263

正如@SteveBlackwell 所指出的，您使用`myid`的是`myrank`. 如果您使用：

```
CALL MPI_COMM_RANK(MPI_COMM_WORLD, myid, ierr) 
```

相反，那么您将完成一半。出现死锁是因为两个处理器（可能）都有`myid = 0`（注意，这种行为取决于编译器——其他编译器可能会将其设置为某个奇怪的数字，您的程序似乎可以工作，但不会传递任何消息）。

您的第二个问题是`status`隐式声明为实变量，但 MPI 需要一个具有 size 的整数数组`MPI_STATUS_SIZE`。这可能会产生各种影响——您可能会遇到段错误，或者更糟糕的是，由于 MPI 正在写入不应写入的缓冲区，因此可能会出现一些奇怪的内存错误。（或者，您可以使用，`MPI_STATUS_IGNORE`因为无论如何您都没有对状态做任何事情）。

正如@HighPerformanceMark 所指出的，最佳实践是在程序中显式键入所有内容并使用它`IMPLICIT NONE`来避免这些类型的问题。换句话说，如果您的子程序/模块/函数/主程序在声明中没有 IMPLICIT NONE，那么您应该有一个非常好的理由。

# unit-testing - Grails：在单元测试期间从服务中的数据模型对象获取 IndexOutOfBoundsException

> ID：11015247
> 
> 赞同：0
> 
> 时间：2012-06-13T12:51:41.173
> 
> 标签：unit-testing, grails, grails-orm, grails-2.0

我有一个简单的 Customer + PaswordReset 数据模型。

在我的 PasswordService 中，我调用 PasswordReset.findByUsername() 和 save()，它工作正常。

然后我制作了具有 @Mock([Customer, PasswordReset]) 的 PasswordServiceTests 在该测试中，我创建了一个新的 Customer 对象并使用 Customer.save 并使用 PasswordReset.findByUsername()。两者都工作正常。

成功使用 Customer.findByUsername() 和 PasswordReset.save() 的测试调用 service.initatePasswordReset() (PasswordService)。

然后在测试中调用 PasswordReset.findByUsername(...) 并找到 service.initiateReset() 生成的对象。

但是当我调用另一个方法时：service.performReset()，它通过使用 Customer.findByUsername(..) 成功加载了客户对象，修改了客户密码字段并尝试执行 customer.save()

以下错误是由 PasswordService 中的 customer.save() 引起的。谁能告诉我出了什么问题？

> java.lang.IndexOutOfBoundsException：索引：1，大小：1 在 java.util.ArrayList.rangeCheck(ArrayList.java:604) 在 java.util.ArrayList.remove(ArrayList.java:445) 在 org.grails.datastore。 mapping.simple.engine.SimpleMapEntityPersister$1.deindex(SimpleMapEntityPersister.groovy:101) at org.grails.datastore.mapping.engine.NativeEntryEntityPersister.updatePropertyIndi​​ces(NativeEntryEntityPersister.java:1200) at org.grails.datastore.mapping.engine.NativeEntryEntityPersister org.grails.datastore.mapping.engine.NativeEntryEntityPersister 的 .access$100(NativeEntryEntityPersister.java:55)$4.run(NativeEntryEntityPersister.java:958) org.grails.datastore.mapping.core.impl.PendingOperationExecution.executePendingOperation(PendingOperationExecution) .java:36) 在 org.grails.datastore.mapping.core.AbstractSession。org.grails.datastore.mapping.core.AbstractSession.flushPendingUpdates(AbstractSession.java:302) 的 flushPendingOperations(AbstractSession.java:323) org.grails.datastore.mapping.core.AbstractSession.flush(AbstractSession.java:240)在 org.grails.datastore.gorm.GormInstanceApi.doSave(GormInstanceApi.groovy:168) 在 org.grails.datastore.gorm.GormInstanceApi$_save_closure4.doCall(GormInstanceApi.groovy:143) 在 org.grails.datastore.mapping.core .DatastoreUtils.execute(DatastoreUtils.java:301) 在 org.grails.datastore.gorm.AbstractDatastoreApi.execute(AbstractDatastoreApi.groovy:34) 在 org.grails.datastore.gorm.GormInstanceApi.save(GormInstanceApi.groovy:142) 在com.foo.services.PasswordService.performPasswordReset(PasswordService.groovy:33) 在 com.foo.services.PasswordServiceTests。testResetPassword(PasswordServiceTests.groovy:47)

**PasswordServiceTest.groovy**

```
@TestFor(PasswordService)
@Mock([Customer, PasswordReset])
class PasswordServiceTests {

void setUp() {
    mockCodec(MD5Codec)
   // mockService(CustomerRegistrationService)
}

void testResetPassword() {
        Customer c = CustomerRegistrationServiceTests.makePrivateCustomer()
        c.sumUnpaidInvoices = 0
        c.sumOverdueInvoices = 0
        c.password = service.hashPassword(c)
        c.customerType = CustomerType.NormalCustomer.value

        c.save(flush: true);
        assertEquals("Mock DB does not contain 1 customer", 1, Customer.list().size())

        service.initiatePasswordReset(c.username)

        def pwReset = PasswordReset.findByUsername(c.username)
        println("psreset saved: " + pwReset.username + " / " + pwReset.code)
        assertEquals(c.username, pwReset.username)

        service.performPasswordReset(c.username, "test"); // CALLS METHOD BELOW
    }
} 
```

**PasswordService.groovy 中的方法：**

```
def performPasswordReset(String username, String newPassword) {
    Customer customer = Customer.findByUsername(username)
    if(customer != null) {
        customer.password = newPassword;
        customer.password = hashPassword(customer);

        customer.save(flush: true); // CAUSES THE ERROR
        ....
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T13:46:18.987

我通过删除服务中对 customer.save() 的调用解决了这个问题，这不是必需的，即使没有 customer.save，当您更改密码时，密码仍会自动存储到数据库中（customer.password = "foo"）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T13:45:52.293

看起来这个特定的错误与

```
customer.save(flush: true); 
```

我会说休眠还有其他需要持久化的东西（任何以前的“非刷新保存”）并且失败了。

# python - 网格框中的计数点

> ID：11015252
> 
> 赞同：4
> 
> 时间：2012-06-13T12:51:59.810
> 
> 标签：python

假设有一个网格，其中有一些点，如下图所示。 ![演示](../Images/b78b345e632c3940ac5948ff172406ab.png) 我的目标是计算网格中每框的点数。这是我的第一次尝试。

```
 for tupel in point_list:
               a=0
               b=0
               for i in self.boxvector:
                  if tupel[0] < i:
                     a=self.boxvector.index(i)-1
                     break

               for i in self.boxvector:
                  if tupel[1] < i:
                     b=self.boxvector.index(i)-1
                     break

               farray[a][b]+=1 
```

它有效，但速度很慢。有没有加快速度？

我使用一个名为的变量`boxvector`来定义网格。在这个例子中，boxvector 是：`boxvector = [-1., -.5, 0, .5, 1.]`。网格始终是二次方的，最大值为 -1 和 1。框通过 表示`farray`，看起来像`farray = [[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]]`。因此，每次算法在相应的框中找到一个点时，每个框都会增加一个值。point_list 具有以下形式`point_list = [(x0,y0),(x1,y1),(x3,y3), ...]`

感谢您的帮助 ！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-13T14:48:28.413

看到您似乎已经在使用 matplotlib，只需使用[`numpy.histogram2d`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.histogram2d.html).

举个例子：

```
import numpy as np
import matplotlib.pyplot as plt

t = np.linspace(0, 4*np.pi, 100)
x = np.cos(3 * t)
y = np.sin(t)

gridx = np.linspace(-1, 1, 5)
gridy = np.linspace(-1, 1, 5)

grid, _, _ = np.histogram2d(x, y, bins=[gridx, gridy])

plt.figure()
plt.plot(x, y, 'ro')
plt.grid(True)

plt.figure()
plt.pcolormesh(gridx, gridy, grid)
plt.plot(x, y, 'ro')
plt.colorbar()

plt.show() 
```

![在此处输入图像描述](../Images/e4da8711b7ecb6e8618e79a78ca8f9a7.png)

![在此处输入图像描述](../Images/ef92ce6950d2b58d05c1df6b93576bde.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T14:53:10.070

也可以看看

matplotlib.nxutils.pnpoly()

和

matplotlib.nxutils.points_inside_poly()

多边形实用程序中非常快速有效的点。您只需要根据网格角的顶点创建多边形。

[http://matplotlib.sourceforge.net/api/nxutils_api.html](http://matplotlib.sourceforge.net/api/nxutils_api.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T14:39:24.923

您可以计算位置。除以 0.5（盒子大小）。由于您的数组以 0 开头，但您的坐标以 -1 开头，因此在除法之前调整为 1。您将有 1 ( (1+1)/0.5 == 4) 的边缘情况，因此请确保它不会溢出 3。

这是一个例子：

```
>>> x,y = (0.8, -0.5)
>>> int((x + 1) / 0.5)
3
>>> int((y + 1) / 0.5)
1 
```

只需考虑得到 3 的最大结果。所以：

```
>>> f_pos = lambda pos: min(int((pos + 1) / 0.5), 3)
>>> f_pos(x)
3
>>> f_pos(y)
1 
```

所以，完成它：

```
f_pos = lambda pos: min(int((pos + 1) / 0.5), 3)
for x,y in point_list:
    f_array[f_pos(x)][f_pos(y)] += 1 
```

# c++ - 如何将 3 元素结构的 stl 向量转换为 2D C 样式数组

> ID：11015256
> 
> 赞同：2
> 
> 时间：2012-06-13T12:52:12.533
> 
> 标签：c++, arrays, stl

假设我有以下简单的结构：

```
struct Vector3
{
    double x;
    double y;
    double z;
}; 
```

我创建了一个顶点列表：

```
std::vector<Vector3> verticesList; 
```

除此之外，我还需要使用第三方库。该库具有具有以下签名的函数：

```
typedef double[3] Real3;
external void createMesh(const Real3* vertices, const size_t verticesCount); 
```

转换`verticesList`成可以`createMesh()`作为`vertices`参数传递的东西的最佳方法是什么？

目前我使用以下方法：

```
static const size_t MAX_VERTICES = 1024;

if (verticesList.size() > MAX_VERTICES)
    throw std::exception("Number of vertices is too big");

Real3 rawVertices[MAX_VERTICES];
for (size_t vertexInd = 0; vertexInd < verticesList.size(); ++vertexInd)
{
    const Vector3& vertex = verticesList[vertexInd];

    rawVertices[vertexInd][0] = vertex.x;
    rawVertices[vertexInd][1] = vertex.y;
    rawVertices[vertexInd][2] = vertex.z;
}

createMesh(rawVertices, verticesList.size()); 
```

但肯定不是解决问题的最佳方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T13:06:56.553

这是*一种*正确的做法。还有一些其他的方法...

type`Vector3`的布局与 type 兼容`Real3`，这意味着您可以强制将指向一种类型的指针强制转换为另一种类型的指针：

```
createMesh( reinterpret_cast<Real3*>(&verticesList[0]), vertices.size() ); 
```

正如 Rook 所提到的，其他替代方法是使用 删除循环`memcpy`，因为类型是 POD：

```
Real3 rawVertices[MAX_VERTICES];
std::memcpy( rawVertices, &verticesList[0], 
             vertices.size()*sizeof verticesList[0] ); 
```

这更简洁，可能更有效，但它仍然是复制整个容器。

* * *

我相信标准确实保证了这种行为（至少 C++11），两种标准布局和标准兼容类型具有相同的内存布局（呃？），并且 §9.2p19 状态：

> 指向标准布局结构对象的指针，使用 reinterpret_cast 适当转换，指向其初始成员（或者如果该成员是位字段，则指向它所在的单元），反之亦然。

这个保证在技术上意味着与我之前声称的略有不同：你可以`reinterpret_cast<double*>(&verticesList[0])`指向`verticesList[0].x`. 但这也意味着通过重新解释转换从`double*`指针转换`Real3`也可以。

# javascript - 带有 iframe 的 Twitter 推文按钮 - 如何使用实际的页面标题？

> ID：11015258
> 
> 赞同：0
> 
> 时间：2012-06-13T12:52:26.603
> 
> 标签：javascript, iframe, twitter

通常，在 twitter 推文按钮上，如果我不指定数据文本，它将采用页面标题页。但是使用 iframe？如何获取页面标题？

我知道我可以添加`&text=`查询字符串，但是如果我不想指定不同的页面标题，但我在哪里？是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T13:10:42.140

如果您使用的是 JavaScript，则可以指定*document.title*属性，例如：

```
xMyIframe.src = 'mypage.htm?text=' + document.title 
```

# c# - WebClient.DownloadProgressChanged 永远不会被调用

> ID：11015262
> 
> 赞同：9
> 
> 时间：2012-06-13T12:52:47.367
> 
> 标签：c#, .net

我为 WebClient 的`DownloadProgressChanged`事件添加了一个事件处理程序，但它似乎永远不会触发。文件成功下载，但没有更新其进度。

```
public class DownloadFile
{
    private File file = null;

    public DownloadFile(File file)
    {
        this.file = file;
    }

    public void startDownloadThread()
    {
        Console.WriteLine("Starting Download : "+file.URL);

        var t = new Thread(() => DownloadThread(file));
        t.Start();
    }

    public Action<string> action_error_downloadFailed = Console.WriteLine;
    private void DownloadThread(File file) //Unnecessary argument but whatever ;D
    {
        try
        {
            string url = file.URL;
            string savepath = file.DestinationDir + "\\" + file.Filename;

            WebClient_B client = new WebClient_B();
            client.Proxy = null; //default to no proxy
            client.DownloadProgressChanged += new DownloadProgressChangedEventHandler(client_DownloadProgressChanged);
            client.DownloadFile(url, savepath);

            Console.WriteLine("Download finished :" + file.Filename);
        }
        catch (Exception ex)
        {
            if (action_error_downloadFailed != null)
                action_error_downloadFailed("Download failed :"+ex.Message);
        }
    }

    private void client_DownloadProgressChanged(object sender, DownloadProgressChangedEventArgs e)
    {
        try
        {
            if (file.TotalSize == 0)
                file.TotalSize = (int)e.TotalBytesToReceive;
            file.CurrentSize = (int)e.BytesReceived;

            Form_DownloadManager.rebuildQueue();

            Console.WriteLine("{0}    downloaded {1} of {2} bytes. {3} % complete...",
            (string)e.UserState,
            e.BytesReceived,
            e.TotalBytesToReceive,
            e.ProgressPercentage);
        }
        catch (Exception ex) { Console.WriteLine("client_DownloadProgressChanged error : "+ex.Message); }
    }
} 
```

输出：

```
Starting Download : http://x.x.x/y/z.zip
'projectname.vshost.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System.Configuration\v4.0_4.0.0.0__b03f5f7f11d50a3a\System.Configuration.dll', Skipped loading symbols. Module is optimized and the debugger option 'Just My Code' is enabled.
The thread '<No Name>' (0x3b8c) has exited with code 0 (0x0).
Download finished :z.zip 
```

我之所以使用，是因为我的服务器一直拒绝下载请求，`WebClient_B`因此我必须向该类添加 useragent+cookiecontainer 功能。不过，该事件也从未使用“标准”类`WebClient`触发。`WebClient`所以这应该不是问题。但无论如何; [链接到课堂](http://codehelp.smartdev.eu/2009/05/08/improve-webclient-by-adding-useragent-and-cookies-to-your-requests/)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-13T13:00:38.177

```
client.DownloadFile(url, savepath); 
```

您必须使用异步版本来下载文件，目前您使用的是阻塞同步版本。

来自[msdn](http://msdn.microsoft.com/en-us/library/system.net.webclient.downloadprogresschanged.aspx)`WebClient.DownloadProgressChanged`文档：

> 当**异步**下载操作成功传输部分或全部数据时发生。

在你的情况下，这将是：

```
client.DownloadProgressChanged += new DownloadProgressChangedEventHandler(client_DownloadProgressChanged);
client.DownloadFileAsync (url, savepath); 
```

由于您的方法不直接返回任何结果，因此此重构应该不是问题，但请注意，当方法返回给调用者时，下载很可能尚未完成。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-09-14T15:12:56.087

如果你想同步使用 WebClient，在获取进度更新的同时，你可以依赖这里详述的这个方法：

[http://alexfeinberg.wordpress.com/2014/09/14/how-to-use-net-webclient-synchronously-and-still-receive-progress-updates/](http://alexfeinberg.wordpress.com/2014/09/14/how-to-use-net-webclient-synchronously-and-still-receive-progress-updates/)

```
public void DownloadFile(Uri uri, string destination)
{
  using (var wc = new WebClient())
  {
    wc.DownloadProgressChanged += HandleDownloadProgress;
    wc.DownloadFileCompleted += HandleDownloadComplete;

    var syncObject = new object();
    lock (syncObject)
    {
       wc.DownloadFileAsync(uri, destination, syncObject);
       // This would block the thread until download completes
       Monitor.Wait(syncObject);
    }
  }

  // Do more stuff after download was complete
}

private void HandleDownloadComplete(object sender, AsyncCompletedEventArgs args)
{
   lock (args.UserState)
   {  
      // releases blocked thread
      Monitor.Pulse(args.UserState);
   }
}

private void HandleDownloadProgress(object sender, DownloadProgressChangedEventArgs args)
{
  // Process progress updates here
} 
```

# delphi - TeeChart VCL 图表比例问题

> ID：11015266
> 
> 赞同：1
> 
> 时间：2012-06-13T12:52:59.613
> 
> 标签：delphi, vcl, teechart

我在使用 Delphi 2007 & TChart 7.0.10.0 或 7.0.11.0 或关于 TChart 缩放的最新评估 9.0.5.0 时遇到问题。

当我在一定宽度后放大窗口并保持表单高度时，问题就出现了！

这是使用较小表格尺寸的图纸。

![小图表](../Images/7dc87e78053aa0fcaff94dc16cb00db7.png)

现在，如果我放大到 1200 重量，我会得到这个丑陋的缩放比例：

![丑陋的缩放](../Images/43f20d5d629da8f3eaf958a4f89f5fa1.png)

如果我在没有设置纵横比且重量为 1200 的设计器中导出，您将看到：

![在此处输入图像描述](../Images/b68f5b6a9cd20485389482e34fffb096.png)

这个怎么搭？

生命值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T15:00:27.400

我看到您在项目中为 Chart1 设置了顶部和底部边距（分别为 8% 和 20%）。我想这是为了在您调整表格大小时为 Chart2 提供更多空间（高度）。

Chart1 的 Top 和 Height 属性应根据 Form 的 OnResize 事件中填充此空白区域进行设置。尝试这个：

```
procedure TGSSkillgroupStatisticForm.FormResize(Sender: TObject);
begin
  Chart1.Draw;
  Chart2.Top:=Chart1.ChartRect.Bottom + 25;
  Chart2.Height:=Chart1.Height-Chart1.ChartRect.Bottom-40;
end; 
```

Steema 支持中心

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T06:21:22.143

请记住，我只在 x 轴上缩放。您的 3-D 条/构造将在一定宽度后重叠缩放数字！您给出的答案根本不能解决这个问题。为了以更好的方式查看真正的问题，我在表单创建中添加了：

* * *

Chart2.BottomAxis.Maximum := 20;

## Series2.AddBar(12, '你好', clred);

结果如下：

![好的图片](../Images/5bc27642729daf8201847741af8c932b.png)

![假图片](../Images/6af278909a78d84793cf3ae9e9b95eac.png)

# c++ - 我可以避免声明定义中的类型冗余吗？

> ID：11015270
> 
> 赞同：1
> 
> 时间：2012-06-13T12:53:07.080
> 
> 标签：c++, types

有没有办法避免`std::vector<int>`在这样的行上写两次？

```
std::vector<int>* numbers = new std::vector<int>(7); 
```

（Typedef 不算在内。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T12:57:20.580

是的。仅在 C++11 中：

```
auto numbers = new std::vector<int>(7); //C++11 only 
```

这里的*类型*是`numbers`由编译器推断出来的，结果`std::vector<int>*`就是你在代码中写的。

可是等等。为什么会`new`首先使用？

你有什么强有力的理由吗？很可能不是。改用自动对象：

```
std::vector<int> numbers; //no new 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-13T12:57:10.647

0）首先不要使用`new`：

```
std::vector<int> numbers(7); 
```

1）使用`typedef`：

```
typedef std::vector<int> ints;
ints* numbers = new ints(7); 
```

2)`auto`在 C++11 中使用：

```
auto numbers = new std::vector<int>(7); 
```

3）如果您坚持使用指针，请使用智能指针：

```
std::unique_ptr<std::vector<int>> numbers(new std::vector<int>(7)); 
```

4）使用制造商功能：

```
typedef std::vector<int> ints;
std::unique_ptr<ints>&& make_ints()
{
    return std::unique_ptr<ints>(new ints(7));
}

int main()
{
    std::unique_ptr<ints> numbers = make_ints();
} 
```

# c# - 使用 webkitdotnet 进行跨域调用

> ID：11015271
> 
> 赞同：1
> 
> 时间：2012-06-13T12:53:07.890
> 
> 标签：c#, javascript, windows, security, webkit

我正在尝试使用 ajax 从 webkitbrowser 中的网站读取和解析结果。

在 webkitdotnet 中禁用网络安全没有明显的解决方案。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T11:03:53.210

这个库更加进化，虽然它没有这个功能，但你可以使用 ac# 回调来执行跨域后请求[http://code.google.com/p/open-webkit-sharp/](http://code.google.com/p/open-webkit-sharp/)

# mysql - Drupal 节点/数据导入问题

> ID：11015273
> 
> 赞同：0
> 
> 时间：2012-06-13T12:53:11.063
> 
> 标签：mysql, drupal, import, drupal-7, drupal-modules

我有一个客户需要将数据从大型电子表格导入drupal。他们已经设置了模块，并且我将所有数据都放在了正确的表中……看起来如此。我已经运行了自己的自定义脚本来操作电子表格中的内容并将其导出/导入到 drupal 数据库中。

但是，当我在后端查看该类型的内容时，它显示有多个数据页面，但显示“无可用内容”。在每一页。这是我导入的表：

```
// for the business listing node type
field_data_field_bd_address_city
field_data_field_bd_address_street
field_data_field_bd_address_zip
field_data_field_bd_business_type
field_data_field_bd_contact_email
field_data_field_bd_contact_name
field_data_field_bd_description
field_data_field_bd_image
field_data_field_bd_listing_type
field_data_field_bd_phone
field_data_field_bd_tags
field_data_field_bd_website

// drupal default tables
node
node_comment_statistics
taxonomy_index
taxonomy_term_data
taxonomy_term_hierarchy
taxonomy_vocabulary 
```

我是否缺少任何需要将数据导入以建立连接的表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T14:14:44.290

我之前遇到过这个问题，我花了一段时间才解决它。这是在有人向我提到提要模块之前，所以我认为这是我唯一的选择。

如果您要直接上传到您的数据库，您还需要将数据输入到修订表中。所以你会有：

```
// for the business listing node type
field_data_field_bd_address_city
field_data_field_bd_address_street
field_data_field_bd_address_zip
field_data_field_bd_business_type
field_data_field_bd_contact_email
field_data_field_bd_contact_name
field_data_field_bd_description
field_data_field_bd_image
field_data_field_bd_listing_type
field_data_field_bd_phone
field_data_field_bd_tags
field_data_field_bd_website 
```

并且：

```
// for the business listing node type
field_revision_field_bd_address_city
field_revision_field_bd_address_street
field_revision_field_bd_address_zip
field_revision_field_bd_business_type
field_revision_field_bd_contact_email
field_revision_field_bd_contact_name
field_revision_field_bd_description
field_revision_field_bd_image
field_revision_field_bd_listing_type
field_revision_field_bd_phone
field_revision_field_bd_tags
field_revision_field_bd_website 
```

节点表也是如此。这花了我一段时间来锻炼并为我工作。通常有人会提到提要模块，这可以节省我的时间，但我想我会分享对我有用的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T12:58:46.603

[我建议使用Feeds 模块](http://drupal.org/project/feeds)，而不是手动将数据直接导入数据库并试图弄清楚如何满足所有关系依赖项以使其工作

如果您希望继续手动过程，也许[这个 Drupal 数据库的 ER 图](http://upsitesweb.com/sites/upsites.co/files/drupal7_model_0.png)会有所帮助（请记住，它有点过时，可能基于 Drupal 7 的早期版本）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T13:35:47.737

我想到了。我必须将数据添加到 node_revision 表中，状态为 1 设置为所有节点，之后效果就很好了！

# android - 构建绘图缓存

> ID：11015274
> 
> 赞同：2
> 
> 时间：2012-06-13T12:53:14.207
> 
> 标签：android, build, drawing, cache-control

我正在开发一个游戏应用程序。但是在修复“X”和“Y”坐标的情况下，在构建绘图缓存的基础上获取背景颜色存在一些问题。

我的代码是这样的..

```
mainRelativeLayout.buildDrawingCache();
        Bitmap bitmap = mainRelativeLayout.getDrawingCache();
        int color = bitmap.getPixel(200,320);
        Log.e("color", "" + color); 
```

但它在颜色上返回空指针异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T15:32:20.703

我认为这篇文章将帮助您从视图中获取位图，即使内容不在屏幕上。

[启用滚动时调用 `getDrawingCache` 返回 null](https://stackoverflow.com/questions/11560882/call-to-getdrawingcache-fails-on-api-8-everytime)

# blackberry - 地理位置在 BlackBerry 中不起作用

> ID：11015279
> 
> 赞同：0
> 
> 时间：2012-06-13T12:53:33.877
> 
> 标签：blackberry, cordova, geolocation

我开发了一个使用 phonegap 来检索地理位置的应用程序。

```
function getLoc() {
    navigator.geolocation.getCurrentPosition(onSuccess, onError, { enableHighAccuracy: true });
}

// onSuccess Geolocation
function onSuccess(position) {
    var locInfo = new Object();

    locInfo.Latitude = position.coords.latitude;
    locInfo.Longitude = position.coords.longitude;
    locInfo.Altitude = position.coords.altitude;
    locInfo.Accuracy = position.coords.accuracy;
    locInfo.AltitudeAccuracy = position.coords.altitudeAccuracy;
    locInfo.Heading = position.coords.heading;
    locInfo.Speed = position.coords.speed;

    alert(locInfo.Latitude + "   " + locInfo.Longitude);
}

// onError Callback receives a PositionError object
function onError(error) {
    alert('code: '    + error.code    + '\n' +
          'message: ' + error.message + '\n');
} 
```

上面的代码在 Android、iPhone 和 BlackBerry Simulator 中运行良好，但在 BlackBerry 设备中却不行。我正在使用 BlackBerry Torch 进行测试。

可能是什么问题。请回复。

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T11:39:54.827

尝试为`getCurrentPosition`.

# css - 用蓝图定义元素宽度，可以吗？

> ID：11015280
> 
> 赞同：0
> 
> 时间：2012-06-13T12:53:35.113
> 
> 标签：css, blueprint-css

如果我使用 span-x 来定义元素宽度是不是错了？

```
<div class="search span-7 prepend-17 last">
    <fieldset>
        <form action="index.php" method="get">                                  
            <input type="hidden"  name="page" value="found"/>                       
            <input class="span-4" type="text" MAXLENGTH="25" placeholder="Enter text to search" name="search"/>         
            <input class="span-3 last" type="submit" value="search" />
        </form>
    </fieldset>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T13:16:05.493

一点也不。Span 只分配宽度、浮动和边距。只要这是您想要的元素，使用它就没有问题。

# javascript - javascript，当右 div 被隐藏时，左 div 必须是 100% 宽度

> ID：11015286
> 
> 赞同：2
> 
> 时间：2012-06-13T12:53:48.153
> 
> 标签：javascript, ruby-on-rails, html

固定的

通过编辑 mplungjan 的代码来修复它：

```
$(function() {
    $("#foo").on("click",function() {
        if ($(this).is(':checked')) $('#checked-a').show('fast',function() {
            $('#checked-b').css("width","60%");
            $('#checked-a').css("width","40%");
        }) ;
        else $('#checked-a').show('fast',function(){
           $('#checked-b').css("width","100%").show();         
           $('#checked-a').css("width","0%").hide();

        });
    });
}); 
```

当右 div（40%）被隐藏时，我希望左 div 为 100%（当前 60%）。

选中复选框的屏幕截图： ![选中复选框（默认）](../Images/1ddff693c3a688c2617538878de47857.png)

未选中复选框的屏幕截图： ![未选中（div 被隐藏）](../Images/0c5968a8aad956223262af52bb1e062e.png)

现在我想让左边的 div 覆盖页面的整个宽度（100%）。

这是我的代码：

javascript:

```
 <script type="text/javascript">
    $(function(){
    ($('input[name = "foo"]').is(':checked'))
    $('#checked-a').slideDown('fast');
    });
  </script> 
```

分区：

```
 <div class="content2" id="checked-a">
    <%= yield %>
</div> 
```

html输入：

```
<input type="checkbox" checked="checked" name="foo" value="1" onclick="$(this).is(':checked') && $('#checked-a').slideDown('fast') || $('#checked-a').slideUp('fast');"/> 
```

希望有人可以帮助:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T13:26:56.330

也许你是这个意思？[演示](http://jsfiddle.net/mplungjan/5rdXh/)

```
$(function() {
    $("#foo").on("click",function() {
        if ($(this).is(':checked')) $('#checked-a').slideDown('fast',function() {
            $('#checked-a').css("width","40%");
            $('#checked-b').show();
        }) ;
        else $('#checked-b').slideUp('fast',function(){
           $('#checked-a').css("width","100%");
        });
    });
}); 
```

# php - 检查变量值时反向输入（null === $value）是什么意思？

> ID：11015296
> 
> 赞同：4
> 
> 时间：2012-06-13T12:54:45.160
> 
> 标签：php, if-statement, isnull

> **可能重复：**
> [PHP - if 语句中的颠倒顺序](https://stackoverflow.com/questions/10849667/php-reversed-order-in-if-statement)
> [检查 null - 什么顺序？](https://stackoverflow.com/questions/10983573/checking-for-null-what-order)

检查 Zend Framework 发现它们以相反的方式进行所有变量检查：

```
public function setBootstrap($path, $class = null) {

   if (null === $class) {    // instead of if($class === null)
      $class = 'Bootstrap';
   } 
```

这样做的原因是什么？

这也适用于 Java 和 C++ 编程吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-13T12:58:42.590

有些人认为这有助于他们避免写一个单一`=`的（一个作业而不是一个相等的比较）

我相信这样做的好处远小于可读性的损失（因此可维护性！）

不测试代码的人可能会依赖这种技巧。回答你的问题，是的，它适用于大多数从 C 派生语法的语言——我的意思是合适，不推荐。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-13T12:58:56.413

这种风格称为**尤达条件**。

`$variable === value`基本上它与通常的 ( ) 样式具有相同的行为，但有一个优点：

如果您写错或写错了，编译器会抛出`=`错误。由于您无法重新分配常量（在示例中为值），因此开发人员会立即识别出由于编译器错误/警告导致的错误，从而免除了耗时的错误搜索。`==``===``null`

因此，以下行将是有效的，尽管它不会显示（大多数情况下）预期的行为：

```
if ( $var = null ) { echo 'test'; } 
```

此处显示错误：

```
if ( null = $var ) { echo 'test'; } 
```

然而，一个主要的缺点是这种风格失去了可读性。但这取决于代码的读者和其他一些编码风格指南。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-13T13:00:23.613

这是一个尤达条件，我不知道有什么好处，除了当你不小心写的时候你不能把值赋给变量

```
if( $foo = "bar" ) 
```

这里有更多示例的链接：

[http://united-coders.com/christian-harms/what-are-yoda-conditions](http://united-coders.com/christian-harms/what-are-yoda-conditions)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-13T12:56:57.170

在这种情况下，比较会考虑值和值的类型。这是一个严格的比较。

例如这段代码：

```
if (null == "") {
  echo "null";
} 
```

将打印“null”，只要 PHP 将“”、0、null、false 视为等效的空值，除非使用严格比较来比较实际值和值本身的类型。

第二件事是为什么使用 null === $class 是因为您不能为 null 赋值。而您可以成功犯错并分配 $class = null。

# jquery - 使用jQuery检查孩子是否是父母的唯一内容

> ID：11015300
> 
> 赞同：5
> 
> 时间：2012-06-13T12:54:48.037
> 
> 标签：jquery, parent-child, href

我需要检查链接（a-tag）是否是段落标签（p）内的**唯一内容**（不仅仅是唯一的孩子）。因此，如果 p-tag 看起来像这样：

```
<p>Here we have some text inside the p-tag. Then there's <a href="#">link</a>.</p> 
```

该`<a>`标签不是 p-tag 内的唯一内容，因为还有文本。

但如果`<p>`标签看起来像这样：

```
<p><a href="#">Nothing but a link inside this p-tag</a></p> 
```

`<p>`标签内的唯一内容是链接。

如果一个`<p>`标签只包含一个`<a>`标签，我想给标签添加一个特定的类`<a>`。

我正在使用这段代码：

```
$("#MainColumn p a:only-child").addClass("singleLink"); 
```

但是此代码仅检查 a-tag 是否是 p-tag 的唯一子项，而不是唯一的**content**。这是我目前陷入困境的地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T13:00:07.973

尝试这个：

```
 $('#MainColumn p a').each(function(){
    var p = $(this).parent().text().length;
    var s = $(this).text().length;
    if (p == s) {
        $(this).addClass('singleLink')
    }
  }) 
```

[http://jsbin.com/ewoqoy/2/](http://jsbin.com/ewoqoy/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T13:53:54.530

我认为这将是您的例外

```
String.prototype.startsWith = function(prefix) {
    return this.indexOf(prefix) === 0;
}

String.prototype.endsWith = function(suffix) {
    return this.match(suffix+"$") == suffix;
};

var html = $("#myP").html();
if($("#myP p:only-child")){
if(html.startsWith("<p>") && html.endsWith("</p>")){
alert("hi");
}
}

<div id="myP"><p >Sample Text inside a <b>p</b> element</p></div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T12:56:47.693

**使用一个选择器可以很容易：**

```
var $content = $("#MainColumn p:has(a)").filter(function() {
    return $(this).contents().length === 1;
}).children('a').addClass("singleLink"); 
```

[**现场演示**](http://jsfiddle.net/GeJkU/363/)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-06-13T13:02:33.487

嗯...也许您可以检查内容是否以“http://”或“www”开头：

```
if($("#MainColumn p a:only-child").text().indexOf("www") != -1 {

} 
```

因为您的链接也是“内容”，所以“您的内容”和“无内容”之间没有区别。您必须说出“您的内容”是如何定义的。

# assembly - 数据段的组成

> ID：11015301
> 
> 赞同：1
> 
> 时间：2012-06-13T12:54:51.383
> 
> 标签：assembly, x86, elf

所以，我有这个想法，我四处寻找它是否属实，但还没有找到任何东西来证实它。
我正在开发一个**精灵**解析器，我想从这些部分构建程序的数据。
我的想法是数据段由 .data、.data1、.bss、.ctors 和 .dtors（用于 c++ 程序的 .ctors 和 .dtors）部分中的信息组成；那是对的吗？
请提供文档链接

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T13:43:04.787

将段加载到内存时，必须查看*程序头*表，而不是*段头*表。*程序头*是加载器的输入，而*节头*用于调试信息。

例如，`.data`和`.bss`可以集中到同一个*程序头*中，也可以分散在两个*程序头*中。将分配一或两段内存。拥有一个代码段和一个内存段只是强制性的。这取决于二进制文件的链接方式。

# java - 如何将 jvm arg -Djava.net.preferIPv4Stack=true 传递给 Ant 任务“get”

> ID：11015306
> 
> 赞同：0
> 
> 时间：2012-06-13T12:55:00.540
> 
> 标签：java, ant, get

我需要将 jvm arg -Djava.net.preferIPv4Stack=true 传递给 Ant 任务“get”。可能吗？

```
 <!-- getting  submit.jar  -->
    <echo message="getting  submit.jar..." />
    <get src="http://servername/Bootstrap?artifact=submit.jar" dest="../lib/submit.jar"/> 
```

初始问题是[在 Intellij IDEA 中运行 Groovy 时出现奇怪的 java.net.SocketException Permission Denied connect 错误](https://stackoverflow.com/questions/8360913/weird-java-net-socketexception-permission-denied-connect-error-when-running-groo)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T13:46:16.130

尝试设置 ANT_OPTS 变量。这是一个例子：

```
export ANT_OPTS="-Djava.net.preferIPv4Stack=true" 
```

[Maven 文档（手册 JVM 选项部分）](http://ant.apache.org/manual/proxy.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T12:58:41.437

您可以使用`-D`参数将参数传递给 ant

尝试：

```
ant -Djava.net.preferIPv4Stack=true get 
```

除非在执行 target 时启动了新的 jvm，否则`get`您的参数也将应用于为该目标执行的命令

# wordpress - 在不同模板上显示 wordpress 帖子（不基于类别）

> ID：11015308
> 
> 赞同：1
> 
> 时间：2012-06-13T12:55:16.633
> 
> 标签：wordpress, themes, posts

我只是初级 PHP 程序员，最近才开始使用 wordpress。现在我有很大的理论问题：

如何使用当前 URL 定义的不同模板（不必是完全不同的新模板）在 wordpress 帖子列表中显示（是的，默认帖子，不是自定义帖子类型）？

我正在使用 Wordpress 3.3.2 并尝试自定义美妙的石墨烯主题。使用 mod_rewrite 在 Linux/apache 上运行

**示例**：我的页面中有帖子，显示在首页，我还创建了一个包含帖子类别的菜单。我正在使用永久链接。
www.mypage.com <- 这显示所有帖子列表
www.mypage.com/category/dslr/ <- 这显示所选类别中所有帖子的列表
www.mypage.com/2012/06/12/mozem-auto- komentovat/ <- 这一个显示单个帖子
完全可以，易于理解，没问题。
此处的示例：http: **//portal.vip.sk/vyvoj/astro/en**其中“astro”是此测试安装的根文件夹。

**我想要做的：**
在主菜单中创建一个按钮，它将指向：
www.mypage.com/different-list
在那个链接上，我将看到来自数据库的所有查询帖子，但设计和查询会有所不同。请注意，**不同的列表**没有在任何地方定义，甚至在分类中也没有定义，所以当我尝试使用该链接时，我得到 404 错误。
我还想在这个特殊列表中使用来自 DB 的不同自定义字段。

这种构造的原因如下：
我想让用户发布他们的帖子，对它们进行分类，为这些帖子填写元数据等。但我也想在不同的 URL 下以不同的方式显示这些用户帖子。在此列表中，帖子将按月（或其他时间间隔）、按类别分组，并将使用一个元数据（布尔值 true、false）。当然，页面的布局会完全不同。

谢谢你的任何建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T14:28:51.837

要创建页面模板，请创建一个新的空白 php 文件并按如下方式填充它：

```
<?php
/**
* Template Name: The name of you page template
*/
?>
<?php get_header(); ?>

Your content, queries, and stuff.

<?php get_footer(); ?> 
```

然后添加一个新页面，选择“你的页面模板名称”作为模板，瞧。

对于自定义字段，我建议您使用此处的“更多字段”wordpress 插件：[http ://wordpress.org/extend/plugins/more-fields/](http://wordpress.org/extend/plugins/more-fields/)

祝你好运！:)

# yii - yii cdbcriteria: 复杂连接

> ID：11015311
> 
> 赞同：2
> 
> 时间：2012-06-13T12:55:40.240
> 
> 标签：yii

我最近开始了一个使用 Yii 的项目，我正在尝试习惯查询构建器。现在，我想使用联接进行查询并在查询中访问联接表的数据，但我无法使以下工作：

我的（简化的）数据库表：

客户（#id，姓名）
员工（#id，姓名）
customer_employee（#customerid，#employeeid）
会计（#id，customerid，started_date，finished_date，月，年）

*   客户与员工之间的多对多关系
*   客户与会计之间的一对多关系

我想执行以下查询，它将选择与某个员工关联的所有客户，并在适用的情况下显示他们的会计状态（started_date 和 finished_date）（否则为 null）。

以下查询完美运行，只是我无法让它与 cdbcriteria 和 Yii 查询构建器一起使用：（此外，硬编码的 id 仅用于此示例）

```
SELECT name, started_date, finished_date
FROM customer
RIGHT JOIN customer_employee ON customer.id=customer_employee.customerid
LEFT JOIN accounting ON customer.id=accounting.customerid
WHERE customer_employee.employeeid=2'; 
```

请帮忙！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T14:17:44.770

1.创建命令

```
Yii::app()->db->createCommand()
  ->select('name, started_date, finished_date')
  ->from('customer c')
  ->rightJoin('customer_employee ce', 'c.id=ce.customerid')
  ->leftJoin('accounting a', 'c.id=a.customerid')
  ->where('ce.employeeid=:id', array(':id'=>2))
  ->queryRow(); 
```

2\. CdbCriteria

```
$criteria = new CDbCriteria;
$criteria->select    = 'name, started_date, finished_date';
$criteria->join      = 'RIGHT JOIN customer_employee ON customer.id=customer_employee.customerid ';
$criteria->join     .= 'LEFT JOIN accounting ON customer.id=accounting.customerid';
$criteria->condition = 'customer_employee.employeeid=:id';
$criteria->params    = array(':id'=>2);

$customers = Customers::model()->find($criteria); 
```

*。不要忘记规则：[http ://www.yiiframework.com/doc/guide/1.1/en/database.arr](http://www.yiiframework.com/doc/guide/1.1/en/database.arr)

我没有测试你的 SQL，但如果对你有用，这些应该也可以在 Yii 中工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T06:34:23.713

```
$criteria = new CDbCriteria(); 
$criteria->select = "name, started_date, finished_date"; 
$criteria->join = "RIGHT JOIN customer_employee ON customer.id=customer_employee.customerid  LEFT JOIN accounting ON customer.id=accounting.customerid"; 
$criteria->condition = "customer_employee.employeeid=2"; 

$models = Customer::model()->findAll($criteria); 
```

这是使用表 customer_employee 的命令获取数据的方法

```
foreach($model as $value)
        {

        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T17:04:24.970

今天有点晚了，但请参阅我的博客上的这篇文章，它解决了这种困难的子查询样式 SQL 的两个部分。

首先，建立一个依赖于其他模型属性的搜索其次，简单地使用相关模型，而不使用完整的 Yii AR 模型

[http://sudwebdesign.com/yii-parameterising-a-sub-select-in-sql-builder/932](http://sudwebdesign.com/yii-parameterising-a-sub-select-in-sql-builder/932)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T13:34:13.380

我还没有运行它，但是您需要以下类似的东西

```
$criteria = new CDbCriteria(); 
$criteria->select = "name, started_date, finished_date"; 
$criteria->join = "RIGHT JOIN customer_employee ON customer.id=customer_employee.customerid  LEFT JOIN accounting ON customer.id=accounting.customerid"; 
$criteria->condition = "customer_employee.employeeid=2"; 

$models = Customer::model()->findAll($criteria); 
```

# javascript - 在 contenteditable DIV 中获取插入符号 HTML 位置

> ID：11015313
> 
> 赞同：2
> 
> 时间：2012-06-13T12:55:43.453
> 
> 标签：javascript, html, contenteditable, caret

我在弄清楚如何在包含 HTML 标记的 DIV 容器中获取插入符号位置时遇到了麻烦。

我正在使用这个 JavaScript 函数来做到这一点：

```
function  getCaretPosition()
{
    if (window.getSelection && window.getSelection().getRangeAt)
    {
            var range = window.getSelection().getRangeAt(0);
            var selectedObj = window.getSelection();
            var rangeCount = 0;
            var childNodes = selectedObj.anchorNode.parentNode.childNodes;
            for (var i = 0; i < childNodes.length; i++)
            {
                if (childNodes[i] == selectedObj.anchorNode)
                {
                        break;
                    }
                        if(childNodes[i].outerHTML)
                        {
                rangeCount += childNodes[i].outerHTML.length;
            }
            else if(childNodes[i].nodeType == 3)
            {
                            rangeCount += childNodes[i].textContent.length;                       
            }
        }
        return range.startOffset + rangeCount;
    }
    return -1;
} 
```

但是，当我需要找到包含 HTML 标记的插入符号位置时，它会在我的 DIV 容器中找到文本的插入符号位置。例如：

```
<DIV class="peCont" contenteditable="true">Text goes here along with <b>some <i>HTML</i> tags</b>.</DIV>; 
```

（*请注意，HTML 标签是普通标签，当函数返回插入位置时，不会显示在屏幕上*）

如果我在 H 和 TML 之间单击右键，上述功能将毫无问题地找到插入符号位置。但是我得到了 HTML 格式的 DIV 框的内容（包括所有标签），如果我想在插入符号的位置插入一些东西，我会偏离几个或多个字符。

我浏览了很多帖子，但我只能找到 <TEXTAREA> 插入符号的帖子，或者与我发布的类似的功能。到目前为止，我仍然找不到在具有 HTML 格式的文本中获取插入符号位置的解决方案。

有人可以帮忙吗？

PS。这是我为链接按钮编写的 JQuery/Javascript 代码：

```
$('#pageEditor').on('click', '.linkURL', function()
{
    var cursorPosition;
    cursorPosition = getCaretPosition();
    var contentID = $(this).parent().parent().attr('id');
    var userSelected = getSelectionHtml();
    var checkLink = userSelected.search('</a>');
    var anchorTag = 0;
    if(checkLink == -1)
    {
        var currentContents = $('#'+contentID+' .peCont').html();
        var indexOfSelection = currentContents.indexOf(userSelected);
        var getPossibleAnchor = currentContents.slice(indexOfSelection, indexOfSelection+userSelected.length+6);
        anchorTag = getPossibleAnchor.search('</a>');
    }

    if(checkLink > 0 || anchorTag > 0)
    {
        //alert(checkLink);
        document.execCommand('unlink', false, false);

    }
    else
    {
        $('#'+contentID+' .peCont').append('<div id="linkEntry"><label for="urlLink">Please enter URL for the link:<label><input type="text" id="urlLink" /></div>');
        $('#linkEntry').dialog({
             buttons: { 
                "Ok": function() 
                {
                    var attribute = $('#urlLink').val();
                    var newContentWithLink = '';
                    if(attribute != '')
                    {
                        if(userSelected != '')
                        {
                            var currentContent = $('#'+contentID+' .peCont').html();
                            var replacement = '<a href="'+attribute+'">'+userSelected+'</a>';
                            newContentWithLink = currentContent.replace(userSelected, replacement);
                        }
                        else
                        {
                            var currentTextContent = $('#'+contentID+' .peCont').html();
                            var userLink = '<a href="'+attribute+'">'+attribute+'</a>';
                            if(cursorPosition > 0)
                            {
                                var contentBegin = currentTextContent.slice(0,cursorPosition);
                                var contentEnd = currentTextContent.slice(cursorPosition,currentTextContent.length);
                                newContentWithLink = contentBegin+userLink+contentEnd;
                            }
                            else
                            {
                                newContentWithLink = attribute+currentTextContent;
                            }
                        }
                        $('#'+contentID+' .peCont').empty();
                        $('#'+contentID+' .peCont').html(newContentWithLink);
                    }
                    $(this).dialog("close"); 
                } },
             closeOnEscape:true,
             modal:true,
             resizable:false,
             show: { effect: 'drop', direction: "up" },
             hide: { effect: 'drop', direction: "down" },
             width:460,
             closeText:'hide',
             close: function()
             {
                $(this).remove();
             }
        });

        $('#linkEntry').on('keypress', function(urlEnter)
        {
            if(urlEnter.which == 13)
            {
                var attribute = $('#urlLink').val();
                var newContentWithLink = '';
                if(userSelected != '')
                {
                    var currentContent = $('#'+contentID+' .peCont').html();
                    var replacement = '<a href="'+attribute+'">'+userSelected+'</a>';
                    newContentWithLink = currentContent.replace(userSelected, replacement);
                }
                else
                {
                    var currentTextContent = $('#'+contentID+' .peCont').html();
                    var userLink = '<a href="'+attribute+'">'+attribute+'</a>';
                    if(cursorPosition > 0)
                    {
                        var contentBegin = currentTextContent.slice(0,cursorPosition);
                        var contentEnd = currentTextContent.slice(cursorPosition,currentTextContent.length);
                        newContentWithLink = contentBegin+userLink+contentEnd;
                    }
                    else
                    {
                        newContentWithLink = attribute+currentTextContent;
                    }
                }
                $('#'+contentID+' .peCont').empty();
                $('#'+contentID+' .peCont').html(newContentWithLink);
                $(this).dialog("close");
            }
        });
    }
}); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-25T12:15:28.110

我为您创建了一个简单的[小提琴](http://jsfiddle.net/zupa/YGBhG/)，可以满足您的需求。

这应该适用于最新版本的 Firefox、Chrome 和 Safari。

如果需要，添加 Opera 和 IE 支持是您的功课。

# window - GXT：窗口关闭事件的休息数据

> ID：11015316
> 
> 赞同：-1
> 
> 时间：2012-06-13T12:56:01.747
> 
> 标签：window, gxt

我有一个使用 UiBinder 创建的窗口。我正在关注 Sencha 的 HelloWorldUiBinder 示例，并在窗口内放置了一个表单。我想知道寡妇关闭（隐藏）后如何重置表单数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T17:02:46.190

我想到了。我所做的只是将我的所有字段添加到一个列表中，然后在我的 closeWindow 处理程序中遍历该列表。调用 rest() 方法。这会清除我字段中的所有数据。我只需要弄清楚如何让我的单选按钮在重新打开窗口时选择默认选项。

代码如下所示：

```
@UiHandler("closeButton")
public void onCloseButtonClicked(SelectEvent event){
       for(Field<?> f : fields){
           f.rest();
       }
       window.hide();
} 
```

# java - 用于拦截传出电子邮件的 Lotus Notes 插件（JAVA）

> ID：11015319
> 
> 赞同：0
> 
> 时间：2012-06-13T12:56:10.593
> 
> 标签：java, plugins, lotus-notes

我需要开发一个 Lotus Notes 插件，将一些 UI 添加到 Lotus Notes 主 UI，并在用户创建和发送电子邮件时执行以下操作：

1.  截取外发邮件，查看邮件中是否有附件。
2.  如果在电子邮件中发现任何附件，请取消发送电子邮件。
3.  处理电子邮件的附件，然后再次发送电子邮件（通过调用一些 Notes API）

这在 Lotus Notes 插件中可行吗？

谢谢和问候， 纳迪姆·乌拉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T13:11:54.323

我认为您可以使用 java lotus notes API 来做到这一点。从这里下载示例.. [http://www.nsftools.com/tips/NotesTips.htm#javascraps](http://www.nsftools.com/tips/NotesTips.htm#javascraps) 下载 javascraps.zip 文件..它有最大 API 的示例..

要完成您的工作，您需要在 Lotus Notes 中创建一个 Java 代理，然后您需要根据您的要求使用 Java API 编写 Java 代码以完成任务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T05:28:48.003

```
package com.ibm.NotesJava.agents;

import lotus.domino.*;

import java.io.File;
import java.io.FileInputStream;
import java.lang.*;
import java.util.*;
import java.awt.*;
import java.awt.List;
import java.awt.event.*;
import java.text.SimpleDateFormat;

public class MyJavaAgent extends AgentBase {
   //Main metho which is called by lotus notes
    public void NotesMain() {

        try {
            Session session = getSession();
            AgentContext agentContext = session.getAgentContext();

            // (Your code goes here)
            Name n = session.createName(agentContext.getEffectiveUserName());
            String st = n.getCommon();
            Log log=session.createLog("JAVA_AGENT");
            log.openFileLog("JAVA_AGENT.log");
            MessageBox mb = new MessageBox();
            try{
                log.logAction("");
                log.logAction("******************************Starting JAVA AGENT ************************");
                log.logAction("Hello " + st + "!"); 
                log.logAction("Executing JavaAgentTest with Agent: "+agentContext.getCurrentAgent().getName());
                Database db = agentContext.getCurrentDatabase();
                //System.out.println("Loading emaildetails.properties file from following location:C:\\Program Files\\Lotus\\Notes\\framework\\emaildetails.properties");
                log.logAction("Loading emaildetails.properties file from following location:C:\\Program Files\\Lotus\\Notes\\framework\\emaildetails.properties");
                Properties pro = new Properties();
                File fil = new File("C:\\Program Files\\Lotus\\Notes\\framework\\emaildetails.properties");
                //***********LOGIC*********
                DocumentCollection coll=agentContext.getUnprocessedDocuments();
                Document doc=coll.getFirstDocument();
                //get  input from user about the process area 
}
}

/************************Library Code ***********************************/
/* 
 * The MessageBox class allows you to create simple message boxes
 * using only the java.awt classes. All you have to do is create an instance
 * of a MessageBox and use it to call the doOkCancelDialog or the
 * doInputBox methods. You can use a single MessageBox instance to
 * create multiple dialogs.
 *
 * This class has been implemented here as an inner class, but there's
 * no reason why it couldn't be a class all by itself. The functionality to
 * create buttons and messageboxes has been modularized, so it should
 * be easy for you to add your own methods to this class, or make global
 * modifications as you desire.
 *
 * The only really complicated/weird thing I had to do was to write and
 * include the MultiLineLabel class, which is included towards the end
 * of this class as an inner class. Read the comments associated with
 * that class to see what's going on there.
 *
 * Make sure you import java.awt.* and java.awt.event.*
 *
 * Julian Robichaux -- http://www.nsftools.com
 */
class MessageBox {

    public final int NO_ACTION = -1;
    public final int CANCEL_ACTION = 0;
    public final int OK_ACTION = 1;
    int actionCode = NO_ACTION;

    Frame parent;
    Dialog msgbox;
    MultiLineLabel msglabel;        // our custom class, defined later
    Panel buttons;
    Button ok, cancel;
    TextField textbox;
    Choice dropdown;
    List multilist;

    public MessageBox ()  {
        // this is the invisible Frame we'll be using to call all of our Dialogs
        parent = new Frame();
    }

    public void dispose ()  {
        // use this when you're ready to clean up
        try { msgbox.dispose(); }  catch (Exception e)  {}
        try { parent.dispose(); }  catch (Exception e)  {}
    }

    /* 
     * This method will create a simple dialog box with a title, a message,
     * and Ok/Cancel buttons. It will halt execution of your program until
     * one of the buttons is clicked, and it will return either OK_ACTION
     * if the Ok button is clicked, or CANCEL_BUTTON if the Cancel
     * button is clicked.
     */
    public int doOkCancelDialog (String title, String message)  {
        actionCode = NO_ACTION;
        try  {
            // create the messagebox
            msgbox = new Dialog(parent, title, true);
            msgbox.setLayout(new BorderLayout());

            // create the label
            initMsglabel(message);
            msgbox.add("North", msglabel);

            // create the OK and Cancel buttons
            buttons = new Panel();
            buttons.setLayout(new FlowLayout());
            initOkButton();
            buttons.add(ok);
            initCancelButton();
            buttons.add(cancel);
            msgbox.add("South", buttons);

            // display everything (the system will wait until a button is pressed
            // before returning)
            displayMsgbox();
            msgbox.dispose();       // just in case the ActionListeners didn't fire...
        }  catch (Exception e)  {
        }

        return actionCode;
    }

    /* 
     * This method will create a dialog box that allows the user to enter
     * text into a field. It also has a title, a message, and Ok/Cancel buttons, 
     * and will halt execution of your program until one of the buttons is
     * clicked or the user enters text into the field and presses "Enter".
     * If the user clicks the Ok button or enters text and presses "Enter",
     * then the text in the field will be returned; otherwise, this method will
     * return null (which usually indicates that the user clicked Cancel).
     */
    public String doInputBox (String title, String message, String defaultText)  {
        actionCode = NO_ACTION;
        try  {
            // create the messagebox
            msgbox = new Dialog(parent, title, true);
            msgbox.setLayout(new BorderLayout());

            // create the label
            initMsglabel(message);
            msgbox.add("North", msglabel);

            // create the text field
            initTextbox(defaultText);
            msgbox.add("Center", textbox);

            // create the OK and Cancel buttons
            buttons = new Panel();
            buttons.setLayout(new FlowLayout());
            initOkButton();
            buttons.add(ok);
            initCancelButton();
            buttons.add(cancel);
            msgbox.add("South", buttons);

            // display everything (the system will wait until a button is pressed
            // before returning)
            displayMsgbox();
            msgbox.dispose();       // just in case the ActionListeners didn't fire...
        }  catch (Exception e)  {
        }

        if (actionCode == OK_ACTION)
            return textbox.getText();
        else
            return null;
    }

    /* 
     * This method will create a dialog box that allows the user to select from
     * a dropdown list. It also has a title, a message, and Ok/Cancel buttons, 
     * and will halt execution of your program until one of the buttons is
     * clicked. If the user clicks the Ok button then the text in the field will be 
     * returned; otherwise, this method will return null (which usually indicates 
     * that the user clicked Cancel).
     */
    public String doDropdownBox (String title, String message, String[] selections)  {
        actionCode = NO_ACTION;
        try  {
            // create the messagebox
            msgbox = new Dialog(parent, title, true);
            msgbox.setLayout(new BorderLayout());

            // create the label
            initMsglabel(message);
            msgbox.add("North", msglabel);

            // create the dropdown box
            initDropdown(selections);
            msgbox.add("Center", dropdown);

            // create the OK and Cancel buttons
            buttons = new Panel();
            buttons.setLayout(new FlowLayout());
            initOkButton();
            buttons.add(ok);
            initCancelButton();
            buttons.add(cancel);
            msgbox.add("South", buttons);

            // display everything (the system will wait until a button is pressed
            // before returning)
            displayMsgbox();
            msgbox.dispose();       // just in case the ActionListeners didn't fire...
        }  catch (Exception e)  {
        }

        if (actionCode == OK_ACTION)
            return dropdown.getSelectedItem();
        else
            return null;
    }

    /* 
     * This method will create a dialog box that allows the user to select from
     * a list of options (use the allowMultiSelect parameter to indicate whether
     * the user can select multiple items from the list [true] or just one [false]). 
     * It also has a title, a message, and Ok/Cancel buttons, and will halt 
     * execution of your program until one of the buttons is clicked. If the user 
     * clicks the Ok button then the text in the field will be returned; otherwise, 
     * this method will return null (which usually indicates that the user clicked 
     * Cancel or didn't select anything).
     */
    public String[] doMultilistBox (String title, String message, String[] selections, boolean allowMultiSelect)  {
        actionCode = NO_ACTION;
        try  {
            // create the messagebox
            msgbox = new Dialog(parent, title, true);
            msgbox.setLayout(new BorderLayout());

            // create the label
            initMsglabel(message);
            msgbox.add("North", msglabel);

            // create the multilist field
            initMultilist(4, allowMultiSelect, selections);
            msgbox.add("Center", multilist);

            // create the OK and Cancel buttons
            buttons = new Panel();
            buttons.setLayout(new FlowLayout());
            initOkButton();
            buttons.add(ok);
            initCancelButton();
            buttons.add(cancel);
            msgbox.add("South", buttons);

            // display everything (the system will wait until a button is pressed
            // before returning)
            displayMsgbox();
            msgbox.dispose();       // just in case the ActionListeners didn't fire...
        }  catch (Exception e)  {
        }

        if ((actionCode == OK_ACTION) && 
            (java.lang.reflect.Array.getLength(multilist.getSelectedItems()) > 0))
            return multilist.getSelectedItems();
        else
            return null;
    }

    /*
     * The private methods below are simply reusable modular functions for
     * creating various elements that may appear in a MessageBox dialog.
     * They make it easier to write new public methods that create different
     * kinds of dialogs, and also allow you to make global changes to all your
     * dialog components pretty easily.
     */
     private void initMsglabel (String message)  {
        // the actual message in the MessageBox (using the custom
        // MultiLineLabel class, included below)
        msglabel = new MultiLineLabel(message);
     }

    private void initOkButton ()  {
        // the OK button
        ok = new Button("OK");
        ok.addActionListener( new ActionListener()  {
            public void actionPerformed(ActionEvent e)  {
                actionCode = OK_ACTION;
                msgbox.dispose();
            }
        } );
    }

    private void initCancelButton ()  {
        // the Cancel button
        cancel = new Button("Cancel");
        cancel.addActionListener( new ActionListener()  {
            public void actionPerformed(ActionEvent e)  {
                actionCode = CANCEL_ACTION;
                msgbox.dispose();
            }
        } );
    }

    private void initTextbox (String defaultText)  {
        // the field that allows a user to enter text in an InputBox
        textbox = new TextField(defaultText, 40);
        // the ActionListener here will get called if the user presses "Enter"
        textbox.addActionListener( new ActionListener()  {
            public void actionPerformed(ActionEvent e)  {
                actionCode = OK_ACTION;
                msgbox.dispose();
            }
        } );
    }

    private void initDropdown (String[] selections)  {
        // a dropdown box that allows a user to select from a list of
        // multiple items
        dropdown = new Choice();
        for (int i = 0; i < java.lang.reflect.Array.getLength(selections); i++)
            dropdown.add(selections[i]);
    }

    private void initMultilist (int numOfLines, boolean allowMultiSelect, String[] selections)  {
        // a multiple selection box that allows a user to select one or 
        // more items. numOfLines indicates how many lines should be
        // visible at a time, allowMultiSelect is a boolean value indicating 
        // whether or not the user should be allowed to select more than
        // one item from the list, and selections is an array of Strings that 
        // is used to populate the selection box
        multilist = new List(numOfLines, allowMultiSelect);
        for (int i = 0; i < java.lang.reflect.Array.getLength(selections); i++)
            multilist.add(selections[i]);
    }

    private void displayMsgbox ()  {
        // once all of the components have been added to a dialog,
        // use this method to display it
        Dimension d = msgbox.getToolkit().getScreenSize();
        msgbox.setLocation(d.width/3, d.height/3);      // center the dialog (sort of)
        msgbox.pack();                      // organize all its components
        msgbox.setResizable(false);     // make sure the user can't resize it
        msgbox.toFront();                   // give it focus
        msgbox.setVisible(true);                // and display it
    }

    /*
     * Okay, this is a pain, but java.awt doesn't natively have a Label-type class
     * that allows you to display text that's more than one line. So I had to write one
     * myself. The class below is a modification of some code from the fantastic
     * book, "Java in a Nutshell".
     *
     * The big change I made was to allow this multi-line label to have a fixed width,
     * so the Label wouldn't fly off the screen if you had a big paragraph of text to
     * display. The width is specified in "columns", which I defined as the width of
     * the letter "X" in whatever font is being used. The text that you add to the label
     * is automatically split into chunks that are no longer than the number of columns
     * specified (you'll see the code to do this in the parseLabel method).
     *
     * This sample implementation is an inner class of the MessageBox class, although
     * it could also be a separate class all by itself. I made it an inner class to make it
     * easier to copy and paste everything from one agent to another.
     *
     * Julian Robichaux -- http://www.nsftools.com
     */
    class MultiLineLabel extends Canvas  {
        // a custom class that will display a text label at a fixed width across
        // multiple lines
        // (modification of MultiLineLabel class from "Java in a Nutshell")
        String label;
        String[] lines;
        int rows = 1;
        int cols = 40;
        int margin = 6;
        int rowHeight;
        int lineAscent;
        int maxWidth;

        public MultiLineLabel (String text)  {
            // create a label with the default width
            label = text;
        }

        public MultiLineLabel (String text, int columns)  {
            // create a label with the specified number of "columns" (where a column
            // is the width of "X" in the font that we're using)
            if (columns > 0)
                cols = columns;
            label = text;
        }

        protected void measure ()  {
            // get the global values we use in relation to our current font
            FontMetrics fm = this.getFontMetrics(this.getFont());
            if (fm == null)
                return;

            rowHeight = fm.getHeight();
            lineAscent = fm.getAscent();
            maxWidth = fm.stringWidth("X") * cols;
        }

        private int stringWidth (String text)  {
            // calculate the width of a String using our current font
            FontMetrics fm = this.getFontMetrics(this.getFont());
            if (fm == null)
                return 0;
            return fm.stringWidth(text);
        }

        public Font getFont ()  {
            // return the font that we're currently using
            return super.getFont();
        }

        public void setFont (Font f)  {
            // change the font that we're currently using, and redraw the
            // label with the new font
            super.setFont(f);
            repaint();
        }

        public void addNotify ()  {
            // automatically invoked after our label/Canvas is created but 
            // before it's displayed (FontMetrics aren't available until
            // super.addNotify() has been called)
            super.addNotify();
            measure();
        }

        public Dimension getPreferredSize ()  {
            // called by the LayoutManager to find out how big we want to be
            if (lines == null)
                setText(label);
            return new Dimension(maxWidth + (2 * margin), (rows * rowHeight) + (2 * margin));
        }

        public Dimension getMinimumSize ()  {
            // called by the LayoutManager to find out what our bare minimum
            // size requirements are
            if (lines == null)
                setText(label);
            return new Dimension(maxWidth, (rows * rowHeight));
        }

        public void setText (String text)  {
            // change the text we're using for this label
            label = text;
            parseLabel();
        }

        private void parseLabel ()  {
            // parses the text we want to display in the label, so that the lines[]
            // variable contains lines of text that are no wider than maxWidth
            String token, word;
            StringBuffer msg = new StringBuffer("");
            StringBuffer line = new StringBuffer("");

            // do an initial measurement, to make sure we have maxWidth
            measure();
            rows = 0;

            // we'll be tokenizing the label String twice, first at every end-of-line
            // character ('\n') and then at every space (if the lines are too long), 
            // in order to generate an StringBuffer of proper length lines, all 
            // separated by \n
            java.util.StringTokenizer st1 = new java.util.StringTokenizer(label, "\n", false);
            while (st1.hasMoreTokens())  {
                token = st1.nextToken();
                if (stringWidth(token) <= maxWidth)  {
                    // if the whole line is shorter than the maxWidth allowed, we can
                    // just add this line to the buffer and get the next one
                    rows++;
                    msg.append(token + "\n");
                }  else  {
                    // if the line was too long, we'll have to break it up manually by
                    // tokenizing the line at every space and adding words together
                    // one by one until we have a line that's greater than maxWidth;
                    // then we can add that shorter line to the buffer and keep doing
                    // that until we're out of words
                    java.util.StringTokenizer st2 = new java.util.StringTokenizer(token, " ", false);
                    while (st2.hasMoreTokens())  {
                        word = st2.nextToken();
                        if ((stringWidth(line.toString()) + stringWidth(word)) > maxWidth)  {
                            rows++;
                            msg.append(line.toString() + "\n");
                            line.setLength(0);
                            line.append(word + " ");
                        }  else  {
                            line.append(word + " ");
                        }
                    }
                    // after we've run out of words, add any remaining text to the buffer, too
                    if (line.length() > 0)  {
                            rows++;
                            msg.append(line.toString() + "\n");
                    }
                }
            }

            // once we're done, split the buffer into the lines[] array
            java.util.StringTokenizer st = new java.util.StringTokenizer(msg.toString(), "\n");
            lines = new String[rows];
            for (int i = 0; i < rows; i++)
                lines[i] = st.nextToken();

        }

        public void paint (Graphics g)  {
            // draw the actual label to the screen, with space around the edges
            // based on the margins we've specified (for some reason, we have to
            // call setLabel instead of just parseText here in order to get the size
            // right, which is a little redundant, but whatever works...)
            int y;
            setText(label);
            Dimension d = this.getSize();
            y = lineAscent + (d.height - (rows * rowHeight)) / 2;
            for (int i = 0; i < rows; i++, y += rowHeight)
                g.drawString(lines[i], margin, y);
        }

    }
}// end of the MultiLineLabel class 
```

# python - 如何在 Python 中创建一个 trie

> ID：11015320
> 
> 赞同：146
> 
> 时间：2012-06-13T12:56:13.887
> 
> 标签：python, trie, dawg

我对尝试和 DAWG（直接非循环词图）很感兴趣，并且我已经阅读了很多关于它们的内容，但我不明白输出 trie 或 DAWG 文件应该是什么样子。

*   trie 应该是嵌套字典的对象吗？每个字母在哪里被分成字母等等？
*   如果有 100k 或 500k 条目，在这样的字典上执行查找会很快吗？
*   如何实现由多个单词组成的单词块，用`-`或空格分隔？
*   如何将单词的前缀或后缀链接到结构中的另一部分？（对于 DAWG）

我想了解最好的**输出结构**，以便弄清楚如何创建和使用一个。

**我也很感激DAWG**和**trie**的输出应该是什么。

我不想看到带有相互链接的气泡的图形表示，我想知道一旦一组单词变成尝试或 DAWG 后的输出对象。

* * *

## 回答 #1

> 赞同：196
> 
> 时间：2012-06-13T13:56:08.223

[Unwind](https://stackoverflow.com/a/11015381/577088)本质上是正确的，有许多不同的方式来实现 trie；对于大型、可扩展的 trie，嵌套字典可能会变得很麻烦——或者至少空间效率低下。但是由于您才刚刚开始，我认为这是最简单的方法；你可以`trie`用几行代码编写一个简单的代码。首先，构造trie的函数：

```
>>> _end = '_end_'
>>> 
>>> def make_trie(*words):
...     root = dict()
...     for word in words:
...         current_dict = root
...         for letter in word:
...             current_dict = current_dict.setdefault(letter, {})
...         current_dict[_end] = _end
...     return root
... 
>>> make_trie('foo', 'bar', 'baz', 'barz')
{'b': {'a': {'r': {'_end_': '_end_', 'z': {'_end_': '_end_'}}, 
             'z': {'_end_': '_end_'}}}, 
 'f': {'o': {'o': {'_end_': '_end_'}}}} 
```

如果您不熟悉[`setdefault`](https://docs.python.org/library/stdtypes.html#dict.setdefault)，它只是在字典中查找一个键（此处，`letter`或`_end`）。如果键存在，则返回关联的值；如果不是，它会为该键分配一个默认值并返回该值（`{}`或`_end`）。（就像它的一个版本[`get`](https://docs.python.org/library/stdtypes.html#dict.get)也更新了字典。）

接下来，一个测试单词是否在 trie 中的函数：

```
>>> def in_trie(trie, word):
...     current_dict = trie
...     for letter in word:
...         if letter not in current_dict:
...             return False
...         current_dict = current_dict[letter]
...     return _end in current_dict
... 
>>> in_trie(make_trie('foo', 'bar', 'baz', 'barz'), 'baz')
True
>>> in_trie(make_trie('foo', 'bar', 'baz', 'barz'), 'barz')
True
>>> in_trie(make_trie('foo', 'bar', 'baz', 'barz'), 'barzz')
False
>>> in_trie(make_trie('foo', 'bar', 'baz', 'barz'), 'bart')
False
>>> in_trie(make_trie('foo', 'bar', 'baz', 'barz'), 'ba')
False 
```

我将把插入和删除留给你作为练习。

当然，Unwind 的建议不会更难。找到正确的子节点可能需要线性搜索，这可能会带来轻微的速度劣势。但是搜索将被限制在可能的字符数——如果我们包括 27 个`_end`。此外，正如他所建议的那样，通过创建大量节点列表并按索引访问它们并没有什么好处；您也可以嵌套列表。

最后，我要补充一点，创建有向无环词图 (DAWG) 会稍微复杂一些，因为您必须检测当前词与结构中的另一个词共享后缀的情况。事实上，这可能会变得相当复杂，具体取决于您希望如何构建 DAWG！您可能需要学习一些有关[Levenshtein](http://en.wikipedia.org/wiki/Levenshtein_distance) [距离](https://stackoverflow.com/q/10638597/577088)的知识才能正确处理。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-10-16T11:22:37.137

看看这个：

[https://github.com/kmike/marisa-trie](https://github.com/kmike/marisa-trie)

> Python（2.x 和 3.x）的静态内存高效 Trie 结构。
> 
> MARISA-trie 中的字符串数据可能比标准 Python dict 中的内存少 50 到 100 倍；原始查找速度相当；trie 还提供了快速的高级方法，例如前缀搜索。
> 
> 基于 marisa-trie C++ 库。

这是一家公司成功使用 marisa trie 的博客文章：
[https ://www.repustate.com/blog/sharing-large-data-structure-across-processes-python/](https://www.repustate.com/blog/sharing-large-data-structure-across-processes-python/)

> 在 Repustate，我们在文本分析中使用的大部分数据模型都可以表示为简单的键值对或 Python 术语中的字典。在我们的特殊情况下，我们的字典非常庞大，每个都有几百 MB，并且需要不断地访问它们。事实上，对于给定的 HTTP 请求，可能会访问 4 或 5 个模型，每个模型进行 20-30 次查找。所以我们面临的问题是我们如何让客户端的事情保持快速以及服务器的尽可能轻。
> 
> ...
> 
> 我找到了这个包，marisa Trys，它是一个 Python 包装器，围绕着 marisa trie 的 C++ 实现。“Marisa”是 Matching Algorithm with Recursively Implemented StorAge 的首字母缩写词。marisa 尝试的优点是存储机制确实缩小了您需要的内存量。Python 插件的作者声称尺寸减少了 50-100 倍——我们的经验是相似的。
> 
> marisa trie 包的优点在于底层的 trie 结构可以写入磁盘，然后通过内存映射对象读入。使用内存映射的 marisa trie，现在我们的所有要求都得到了满足。我们服务器的内存使用量急剧下降了大约 40%，而且我们的性能与使用 Python 的字典实现时相比没有变化。

还有一些纯 python 实现，但除非您在受限平台上，否则您希望使用上面的 C++ 支持的实现以获得最佳性能：

*   [https://github.com/bdimmick/python-trie](https://github.com/bdimmick/python-trie)
*   [https://pypi.python.org/pypi/PyTrie](https://pypi.python.org/pypi/PyTrie)

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2014-01-23T08:36:11.513

以下是实现 Trie 的 python 包的列表：

*   [marisa-trie](https://pypi.python.org/pypi/marisa-trie/) - 基于 C++ 的实现。
*   [python-trie](https://github.com/bdimmick/python-trie) - 一个简单的纯 python 实现。
*   [PyTrie](https://pypi.python.org/pypi/PyTrie) - 更高级的纯 python 实现。
*   [pygtrie](https://github.com/google/pygtrie) - Google 的纯 python 实现。
*   [datrie](https://pypi.org/project/datrie/) - 基于[libdatrie](https://linux.thai.net/~thep/datrie/datrie.html)的双数组 trie 实现。

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2015-05-08T13:01:17.277

修改自`senderle`'s 方法（上图）。我发现 Python`defaultdict`非常适合创建 trie 或前缀树。

```
from collections import defaultdict

class Trie:
    """
    Implement a trie with insert, search, and startsWith methods.
    """
    def __init__(self):
        self.root = defaultdict()

    # @param {string} word
    # @return {void}
    # Inserts a word into the trie.
    def insert(self, word):
        current = self.root
        for letter in word:
            current = current.setdefault(letter, {})
        current.setdefault("_end")

    # @param {string} word
    # @return {boolean}
    # Returns if the word is in the trie.
    def search(self, word):
        current = self.root
        for letter in word:
            if letter not in current:
                return False
            current = current[letter]
        if "_end" in current:
            return True
        return False

    # @param {string} prefix
    # @return {boolean}
    # Returns if there is any word in the trie
    # that starts with the given prefix.
    def startsWith(self, prefix):
        current = self.root
        for letter in prefix:
            if letter not in current:
                return False
            current = current[letter]
        return True

# Now test the class

test = Trie()
test.insert('helloworld')
test.insert('ilikeapple')
test.insert('helloz')

print test.search('hello')
print test.startsWith('hello')
print test.search('ilikeapple') 
```

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2012-06-13T12:59:48.277

没有“应该”；由你决定。不同的实现将具有不同的性能特征，需要不同的时间来实现、理解和正确处理。在我看来，这对于整个软件开发来说是典型的。

我可能会首先尝试创建一个迄今为止创建的所有 trie 节点的全局列表，并将每个节点中的子指针表示为全局列表中的索引列表。对我来说，拥有一本仅仅代表子链接的字典感觉太重了。

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2018-03-19T07:32:29.750

```
from collections import defaultdict 
```

# 定义特里：

```
_trie = lambda: defaultdict(_trie) 
```

# 创建特里：

```
trie = _trie()
for s in ["cat", "bat", "rat", "cam"]:
    curr = trie
    for c in s:
        curr = curr[c]
    curr.setdefault("_end") 
```

# 抬头：

```
def word_exist(trie, word):
    curr = trie
    for w in word:
        if w not in curr:
            return False
        curr = curr[w]
    return '_end' in curr 
```

# 测试：

```
print(word_exist(trie, 'cam')) 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2021-03-22T07:00:23.077

这是使用 TrieNode 类的完整代码。还实现了 auto_complete 方法以返回带有前缀的匹配单词。

由于我们使用字典来存储孩子，所以不需要将char转换为整数，反之亦然，也不需要提前分配数组内存。

```
class TrieNode:
    def __init__(self):
        #Dict: Key = letter, Item = TrieNode
        self.children = {}
        self.end = False
class Trie:
    def __init__(self):
        self.root = TrieNode()

    def build_trie(self,words):       
        for word in words:
            self.insert(word)

    def insert(self,word):
        node = self.root
        for char in word:
            if char not in node.children:
              node.children[char] = TrieNode()
            node = node.children[char]
        node.end = True
    def search(self, word):
        node = self.root
        for char in word:
            if char in node.children:
                node = node.children[char]
            else:
                return False

        return node.end

    def _walk_trie(self, node, word, word_list):

        if node.children:   
            for char in node.children:        
                word_new = word + char
                if node.children[char].end:       
                # if node.end: 
                    word_list.append( word_new)
                    # word_list.append( word)
                self._walk_trie(node.children[char],  word_new  , word_list)

    def auto_complete(self, partial_word):
        node = self.root

        word_list = [ ]
        #find the node for last char of word
        for char in  partial_word:
           if char in node.children:
              node = node.children[char]
           else:
                # partial_word not found return 
                return word_list

        if node.end:
             word_list.append(partial_word)

        #  word_list will be created in this method for suggestions that start with partial_word
        self._walk_trie(node, partial_word, word_list)
        return word_list 
```

创建一个 Trie

```
t = Trie()
words = ['hi', 'hieght', 'rat', 'ram', 'rattle', 'hill']
t.build_trie(words) 
```

搜索单词

```
words = ['hi', 'hello']
for word in  words:
    print(word, t.search(word))

hi True
hel False 
```

使用前缀搜索单词

```
partial_word = 'ra'
t.auto_complete(partial_word)

['rat', 'rattle', 'ram'] 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2020-10-11T11:44:25.263

使用 defaultdict 和 reduce 函数。

> # 创建特里

```
from functools import reduce
from collections import defaultdict
T = lambda : defaultdict(T)
trie = T()
reduce(dict.__getitem__,'how',trie)['isEnd'] = True 
```

特里：

```
defaultdict(<function __main__.<lambda>()>,
            {'h': defaultdict(<function __main__.<lambda>()>,
                         {'o': defaultdict(<function __main__.<lambda>()>,
                                      {'w': defaultdict(<function __main__.<lambda>()>,
                                                   {'isEnd': True})})})}) 
```

> # 在特里搜索：

```
curr = trie
for w in 'how':
    if w in curr:
        curr = curr[w]
    else:
        print("Not Found")
        break
if curr['isEnd']:
    print('Found') 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2013-07-12T16:38:13.717

如果您希望将 TRIE 实现为 Python 类，这是我在阅读它们后写的：

```
class Trie:

    def __init__(self):
        self.__final = False
        self.__nodes = {}

    def __repr__(self):
        return 'Trie<len={}, final={}>'.format(len(self), self.__final)

    def __getstate__(self):
        return self.__final, self.__nodes

    def __setstate__(self, state):
        self.__final, self.__nodes = state

    def __len__(self):
        return len(self.__nodes)

    def __bool__(self):
        return self.__final

    def __contains__(self, array):
        try:
            return self[array]
        except KeyError:
            return False

    def __iter__(self):
        yield self
        for node in self.__nodes.values():
            yield from node

    def __getitem__(self, array):
        return self.__get(array, False)

    def create(self, array):
        self.__get(array, True).__final = True

    def read(self):
        yield from self.__read([])

    def update(self, array):
        self[array].__final = True

    def delete(self, array):
        self[array].__final = False

    def prune(self):
        for key, value in tuple(self.__nodes.items()):
            if not value.prune():
                del self.__nodes[key]
        if not len(self):
            self.delete([])
        return self

    def __get(self, array, create):
        if array:
            head, *tail = array
            if create and head not in self.__nodes:
                self.__nodes[head] = Trie()
            return self.__nodes[head].__get(tail, create)
        return self

    def __read(self, name):
        if self.__final:
            yield name
        for key, value in self.__nodes.items():
            yield from value.__read(name + [key]) 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2016-06-13T12:24:32.990

此版本使用递归

```
import pprint
from collections import deque

pp = pprint.PrettyPrinter(indent=4)

inp = raw_input("Enter a sentence to show as trie\n")
words = inp.split(" ")
trie = {}

def trie_recursion(trie_ds, word):
    try:
        letter = word.popleft()
        out = trie_recursion(trie_ds.get(letter, {}), word)
    except IndexError:
        # End of the word
        return {}

    # Dont update if letter already present
    if not trie_ds.has_key(letter):
        trie_ds[letter] = out

    return trie_ds

for word in words:
    # Go through each word
    trie = trie_recursion(trie, deque(word))

pprint.pprint(trie) 
```

输出：

```
Coool <algos>  python trie.py
Enter a sentence to show as trie
foo bar baz fun
{
  'b': {
    'a': {
      'r': {},
      'z': {}
    }
  },
  'f': {
    'o': {
      'o': {}
    },
    'u': {
      'n': {}
    }
  }
} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-07-25T06:35:07.387

# Trie 的 Python 类

* * *

Trie 数据结构可用于存储数据，`O(L)`其中 L 是字符串的长度，因此对于插入 N 个字符串，时间复杂度将是字符串只能在相同的`O(NL)`情况下被搜索以进行删除。`O(L)`

可以从[https://github.com/Parikshit22/pytrie.git克隆](https://github.com/Parikshit22/pytrie.git)

```
class Node:
    def __init__(self):
        self.children = [None]*26
        self.isend = False

class trie:
    def __init__(self,):
        self.__root = Node()

    def __len__(self,):
        return len(self.search_byprefix(''))

    def __str__(self):
        ll =  self.search_byprefix('')
        string = ''
        for i in ll:
            string+=i
            string+='\n'
        return string

    def chartoint(self,character):
        return ord(character)-ord('a')

    def remove(self,string):
        ptr = self.__root
        length = len(string)
        for idx in range(length):
            i = self.chartoint(string[idx])
            if ptr.children[i] is not None:
                ptr = ptr.children[i]
            else:
                raise ValueError("Keyword doesn't exist in trie")
        if ptr.isend is not True:
            raise ValueError("Keyword doesn't exist in trie")
        ptr.isend = False
        return

    def insert(self,string):
        ptr = self.__root
        length = len(string)
        for idx in range(length):
            i = self.chartoint(string[idx])
            if ptr.children[i] is not None:
                ptr = ptr.children[i]
            else:
                ptr.children[i] = Node()
                ptr = ptr.children[i]
        ptr.isend = True

    def search(self,string):
        ptr = self.__root
        length = len(string)
        for idx in range(length):
            i = self.chartoint(string[idx])
            if ptr.children[i] is not None:
                ptr = ptr.children[i]
            else:
                return False
        if ptr.isend is not True:
            return False
        return True

    def __getall(self,ptr,key,key_list):
        if ptr is None:
            key_list.append(key)
            return
        if ptr.isend==True:
            key_list.append(key)
        for i in range(26):
            if ptr.children[i]  is not None:
                self.__getall(ptr.children[i],key+chr(ord('a')+i),key_list)

    def search_byprefix(self,key):
        ptr = self.__root
        key_list = []
        length = len(key)
        for idx in range(length):
            i = self.chartoint(key[idx])
            if ptr.children[i] is not None:
                ptr = ptr.children[i]
            else:
                return None

        self.__getall(ptr,key,key_list)
        return key_list 
```

* * *

```
t = trie()
t.insert("shubham")
t.insert("shubhi")
t.insert("minhaj")
t.insert("parikshit")
t.insert("pari")
t.insert("shubh")
t.insert("minakshi") 
```

```
print(t.search("minhaj"))
print(t.search("shubhk"))
print(t.search_byprefix('m'))
print(len(t))
print(t.remove("minhaj"))
print(t) 
```

* * *

### 代码输出

真
假
['minakshi', 'minhaj']
7
minakshi
minhajsir
pari
parikshit
shubh
shubham
shubhi

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-08-18T09:07:51.963

这很像以前的答案，但更容易阅读：

```
def make_trie(words):
    trie = {}
    for word in words:
        head = trie
        for char in word:
            if char not in head:
                head[char] = {}
            head = head[char]
        head["_end_"] = "_end_"
    return trie 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-07-24T15:27:51.940

```
class Trie:
    head = {}

    def add(self,word):

        cur = self.head
        for ch in word:
            if ch not in cur:
                cur[ch] = {}
            cur = cur[ch]
        cur['*'] = True

    def search(self,word):
        cur = self.head
        for ch in word:
            if ch not in cur:
                return False
            cur = cur[ch]

        if '*' in cur:
            return True
        else:
            return False
    def printf(self):
        print (self.head)

dictionary = Trie()
dictionary.add("hi")
#dictionary.add("hello")
#dictionary.add("eye")
#dictionary.add("hey")

print(dictionary.search("hi"))
print(dictionary.search("hello"))
print(dictionary.search("hel"))
print(dictionary.search("he"))
dictionary.printf() 
```

出去

```
True
False
False
False
{'h': {'i': {'*': True}}} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-09-07T11:19:30.500

## 带前缀搜索

这是[@senderle 的答案](https://stackoverflow.com/a/11016430/1422096)，稍作修改以**接受前缀搜索**（不仅是全字匹配）：

```
_end = '_end_'

def make_trie(words):
    root = dict()
    for word in words:
        current_dict = root
        for letter in word:
            current_dict = current_dict.setdefault(letter, {})
        current_dict[_end] = _end
    return root

def in_trie(trie, word):
    current_dict = trie
    for letter in word:
        if _end in current_dict:
            return True
        if letter not in current_dict:
            return False
        current_dict = current_dict[letter]

t = make_trie(['hello', 'hi', 'foo', 'bar'])
print(in_trie(t, 'hello world')) 
# True 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-10-16T01:08:19.700

```
class TrieNode:
    def __init__(self):
        self.keys = {}
        self.end = False

class Trie:
    def __init__(self):
        self.root = TrieNode()
    def insert(self, word: str, node=None) -> None:
        if node == None:
            node = self.root
        # insertion is a recursive operation
        # this is base case to exit the recursion
        if len(word) == 0:
            node.end = True
            return
        # if this key does not exist create a new node
        elif word[0] not in node.keys:
            node.keys[word[0]] = TrieNode()
            self.insert(word[1:], node.keys[word[0]])
        # that means key exists
        else:
            self.insert(word[1:], node.keys[word[0]])
    def search(self, word: str, node=None) -> bool:
        if node == None:
            node = self.root
        # this is positive base case to exit the recursion
        if len(word) == 0 and node.end == True:
            return True
        elif len(word) == 0:
            return False
        elif word[0] not in node.keys:
            return False
        else:
            return self.search(word[1:], node.keys[word[0]])
    def startsWith(self, prefix: str, node=None) -> bool:
        if node == None:
            node = self.root
        if len(prefix) == 0:
            return True
        elif prefix[0] not in node.keys:
            return False
        else:
            return self.startsWith(prefix[1:], node.keys[prefix[0]]) 
```

# postgresql - 更新中的子查询没有看到已经更新的记录

> ID：11015322
> 
> 赞同：0
> 
> 时间：2012-06-13T12:56:15.960
> 
> 标签：postgresql

我有几千条带有重复排序顺序的记录（这会导致其他查询中的重复条目），所以我试图为所有这些记录设置正确的排序顺序。

首先，我将它们全部设置为 -1，以便排序顺序从 0 开始，然后执行以下查询：

```
UPDATE op.customeraddress SET sortorder = (SELECT MAX(ca.sortorder) + 1 
                                           FROM op.customeraddress AS ca 
                                           WHERE ca.customerid = customeraddress.customerid) 
WHERE id IN (<subquery for IDs>) 
```

问题是子查询中的 MAX() 似乎总是返回相同的值——它不知道更早的更新。

如果我手动逐条应用它，查询工作正常。

关于如何做到这一点而不必诉诸循环的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T22:04:12.967

这应该这样做：

```
with new_order as 
(
   select ctid as rid,
          row_number() over (partition by customerid order by sortorder) as rn
   from customeraddress
) 
update customeraddress ca
  set sortorder = new_order.rn 
where ca.ctid = new_order.rid;
  and ca.id IN (<subquery for IDs>); 
```

运行此之前无需重置排序顺序，它将根据旧顺序为一个客户ID重新编号所有客户地址。

上述解决方案需要 PostgreSQL 9.1（可写 CTE）

对于以前的版本，这应该这样做：

```
update customeraddress ca
   set ca.sortorder = t.sortorder
from 
(
   select ctid as rid,
          row_number() over (partition by customerid order by sortorder) as rn
   from customeraddress
)  t
where ca.ctid = t.rid
  and ca.id IN (<subquery for IDs>); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T00:01:59.537

你可以使用一个序列：

```
CREATE TEMPORARY SEQUENCE sort_seq;
UPDATE op.customeraddress SET sort_order = (
     SELECT nextval('sort_seq')
     FROM op.customeraddress AS ca 
     WHERE ca.customerid = customeraddress.customerid
) WHERE id IN ... 
```

# javascript - 单击链接时如何弹出文本区域？

> ID：11015326
> 
> 赞同：-2
> 
> 时间：2012-06-13T12:56:26.713
> 
> 标签：javascript, html

我想制作一个显示一个或多个段落的弹出窗口。

我的要求是，我有一个“阅读更多”链接。

```
<a href='#' onclick='read_more()'>Read More</a> 
```

单击此链接时，我想要一个显示详细内容的弹出窗口。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T13:00:23.847

如果您想要一个真正的弹出窗口（不是对话框）：

```
<script type="text/javascript">
function read_more() {
    window.open('my_page.html');
}
</script> 
```

**窗口打开**

> 创建一个新的辅助浏览器窗口并加载引用的资源。

[您可以在MDN](https://developer.mozilla.org/en/DOM/window.open)阅读更多相关信息！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T16:58:56.177

```
<script type="text/javascript">
function read_more() {
    window.open('myPage.html');
}
</script>

<a href="javascript: read_more()" >Read More</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T13:03:43.947

您可以使用类似此代码的内容。但是，我建议使用 JQuery，正如@ericosg 所写

```
 <div id="popup" style="display: none; position: absolute; left: 10; top: 10">
POST YOUR TEXT HERE
</div>

<script type="text/javascript">
function read_more()
{
  var popup = document.getElementById('popup');

  popup.style.display = 'block';
}
</script> 
```

# php - Symfony2：在 jquery 中使用生成的表单

> ID：11015333
> 
> 赞同：1
> 
> 时间：2012-06-13T12:56:45.887
> 
> 标签：php, jquery, symfony

我正在开发一个 Web 应用程序。我有应该从网络上创建和编辑的实体（非常经典，不是吗）。

所以我想使用 Symfony 提供的表单生成（带有类型和处理程序），但我不想简单地以标准方式打印它们。我想从 jquery 调用这些表单，以便我可以在**jEditable**等 jQuery 插件中使用验证等。

因此，我认为最好的方法是将我的表单作为 json 发送到 jquery 函数，该函数会将其放入我的 HTML 元素中。

我做了什么：

**jQuery：**

```
$.get("getorganisationform/"+curOId, function(data){
    if(data.responseCode==200 ){   
        $( "#innerModal" ).append(data.form);
    }
}); 
```

**控制器：**

```
$form = $this->createForm(new OrganisationType, $organisation);

    $formHandler = new OrganisationHandler($form, $this->get('request'), $this->getDoctrine()->getEntityManager());

    if( $formHandler->process() )
    {
        return $this->redirect( $this->generateUrl('adminpanel') );
    }

    return new Response(json_encode($form), 200); 
```

json_encode() 实际上不发送任何东西，因为 $form 是一个对象。现在我有几个问题：

*   有没有办法获取表单的 html 元素？
*   那么有必要使用json吗？
*   有没有更好的方法在 jquery 中重用表单生成？（我在这里考虑 jeditable ）

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T15:29:01.223

你能试试这个来获取 html 表单内容吗？

```
return new Response(
    json_encode(
        array(
            'form' => $form->createView(),
            'responseCode' => 200
            )
        ), 
    200
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T08:16:19.557

在进行了一些研究之后，我决定渲染一个我喂给我的表格的树枝。这样我就得到了响应中发送的 html 内容。通常：

```
return $this->render('MyBundle:Admin:form.html.twig', array(
        'form' => $form->createView(),
    )); 
```

# c# - 在 Winform 上自动设置焦点

> ID：11015343
> 
> 赞同：0
> 
> 时间：2012-06-13T12:57:11.577
> 
> 标签：c#, winforms, focus, windows-ce

我有一个包含一些文本框的表单。我已经配置了 textBox 的 GotFocus 和 LostFocus 事件。

**我的问题**是：当某些文本框失去焦点时，表单会自动将焦点设置在第一个文本框上，并再次触发 GotFocus 事件。

`How do I not set the focus by default?`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T13:19:36.880

检查从焦点转移到第一个文本框的文本框的 tabindex。我认为某些控件的文本框的 TabStop 属性设置为 false。

# c - C中的暂停和恢复循环

> ID：11015348
> 
> 赞同：0
> 
> 时间：2012-06-13T12:57:29.307
> 
> 标签：c, loops, resume

我正在用 C 编写一个游戏代码，其中涉及显示用户输入的时间间隔的数字。

```
srand ( time(NULL) ); //this avoids generating the same random number everytime
start:
    mySleep(userdelay);
    printf("\n\n\a\t%d",rand()%90); //prints random numbers with the time delay entered by the user.
goto start; 
```

所以我只想知道如何使用“按 1 暂停”之类的用户输入暂停此循环，并使用“按 2 恢复”之类的用户输入恢复相同的循环。

提前谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T13:06:38.953

我不确定这可能是最好的方法，但它可能是一种工作方式。尝试在命令控制台中使用 while 循环：

```
int main(){
    int i;
    scanf("%d",&i)
    switch(i){
        case 1: while(i != 2){
                    sleep(1); //or define duration by a variable if time should be "dynamic"
                    scanf("%d",&i);
                    break;
                }
    }
} 
```

我希望你对这个想法有所了解。

编辑：

如果您希望用户在“退出键”之前输入数据，那么 while 循环要比 goto 好得多。如果你不熟悉`switch(){}`我建议你看看[这里](http://cprogramminglanguage.net/404.aspx?aspxerrorpath=/_sites/cprogramminglanguage.net/c-switch-statement.aspx)。

# ios - 一个 IBAction 用于多个带有按钮的自定义原型单元

> ID：11015349
> 
> 赞同：0
> 
> 时间：2012-06-13T12:57:55.313
> 
> 标签：ios, uitableview, uistoryboard

使用故事板，我有一个包含多个动态原型单元的表格视图控制器。其中一个单元格是一个自定义动态原型单元格（我为其创建了一个子类），其中包含一个标签和一个开关。我将开关的操作连接到视图控制器中的操作方法（比如 switchChanged:)。在 cellForRowAtIndexPath 中，我配置并返回适合指定索引的单元格。到现在为止还挺好。

问题：我的应用程序有这些自定义单元的多个实例，那么如何区分哪个开关已更改？一个想法是，在视图控制器中，我可以为每个单元格创建一个成员开关，并在第一次调用 cellForRowAtIndexPath 时将它们链接到特定的单元格开关。然后我可以使用这些成员开关与传递给 switchChanged: 的开关进行比较。

我知道我可以尝试并立即得到答案，但我希望讨论其他开发人员如何做我想做的事情。这是最好/最差/好的方法吗？有哪些实用的替代方法？

问候，

- 约翰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T13:14:39.347

我曾经遇到过这种情况（不是开关，但我相信它同样适用）。我已经设法通过子类化对象类并在子类中添加所需的属性/方法来解决它。

调用该操作时，您的发件人将是子类，您可以在那里访问您添加的代码。

我不知道是不是这样，但如果你只是想改变一个值，你应该在创建对象时使用将开关值绑定到属性。它甚至不需要 IBAction 来调用。

编辑：示例：

```
@interface MySwitch : UISwitch
@property (nonatomic, assign) NSUInteger someProperty;
@end 
```

然后，每次创建单元格时，您都可以将“someProperty”设置为您想要的任何内容。

```
-(UITableViewCell*)tableView:(UITableView*)tableView cellForRowAtIndexPath:(NSIndexPath*)indexPath {
  // yada yada yada...
  UITableViewCell *cell;
  // yada yada yada...

  [cell.myLinkedSwitch  setSomeProperty:indexPath.row];
  return(cell);
} 
```

除非您不使用该`tableView:cellForRowAtIndexPath:`方法创建单元格。那么您可能应该使用绑定来将您的值放到正确的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T01:42:51.117

我没有添加单独的子类，而是将行存储在每个按钮的 Disabled Title 属性中。这很有效。第一个代码在 CellForRowAtIndexPath 中：

```
NSString *strRow = [[NSString alloc] initWithFormat:@"%i",useRow];
[btnPreferredChk setTitle:strRow forState:UIControlStateDisabled]; 
```

然后我的按钮操作方法使用该值来执行适当的活动。

```
- (IBAction)goStorePick:(id)sender
{
  UIButton *useButton = [[UIButton alloc] init];
  useButton = sender;
  NSInteger *storeRow = [[useButton titleForState:UIControlStateDisabled] integerValue];

  NSString *CMIMsg = [[NSString alloc] initWithFormat:@"goStorePick Method Executed at Row: %i", storeRow];

  [self shwMessage:CMIMsg];
} 
```

这对我来说效果很好。

# mobile - 我应该将 zepto.js 放在我的应用程序目录的哪个位置？

> ID：11015355
> 
> 赞同：1
> 
> 时间：2012-06-13T12:58:26.733
> 
> 标签：mobile, zepto, trigger.io

我对 trigger.io 完全陌生，我想知道是否有建议的目录来放置 zepto.js 或 jquery.js 之类的文件（如果我要使用它的话）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T13:53:18.417

理论上，可以将它放在“src”目录树中的任何位置。但是，我建议将它放在“js”目录中。甚至更好...帮助分离您的 .js 文件和第 3 方 .js 文件...将其放在“js/lib”子目录中。他们文档和 Github 中的大多数（如果不是全部）trigger.io 示例都倾向于这样做。

[https://github.com/trigger-corp](https://github.com/trigger-corp)

[https://github.com/amirnathoo](https://github.com/amirnathoo)

使用 trigger.io（或 Phonegap）开发应用程序的一大好处是您可以利用现有的 Web 编程知识和最佳实践。

仍然...最终由您决定如何组织您的应用程序。对于较小的应用程序，它可能并不那么重要，但随着应用程序的增长，具有“干净”和可管理的结构会有所帮助。

更新：在他们的天气应用教程中，他们使用“资源”目录。

[http://docs.trigger.io/en/v1.3/tutorials/weather/tutorial-2.html](http://docs.trigger.io/en/v1.3/tutorials/weather/tutorial-2.html)

# tree - 展开树：根是什么项目

> ID：11015357
> 
> 赞同：0
> 
> 时间：2012-06-13T12:58:33.887
> 
> 标签：tree

> 在以下插入空展开树的序列之后，根中的项是：1、11、3、10、8、4、6、5、7、9、2？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T19:30:24.843

```
This is How the Splay tree looks after inserting each element.
Each frame shows the splay tree after ith element is inserted. 
```

![在此处输入图像描述](../Images/6dd9cd41c7404f3e7bd9e41f58795751.png) ![在此处输入图像描述](../Images/cd874a6855cc23c5b3040c3d8b34c06a.png) ![在此处输入图像描述](../Images/d786f1ffb2910d47820057b4f42e9be9.png) ![在此处输入图像描述](../Images/a265c501f930bf911af8e95edaa07d17.png) ![在此处输入图像描述](../Images/a91318b60ac39fc3eb2f6e5ec23725f6.png) ![在此处输入图像描述](../Images/b55d5aa5de170dc63c98326992a941e6.png) ![在此处输入图像描述](../Images/a8d9461bfaea4cf39a12e5920f2ca76c.png) ![在此处输入图像描述](../Images/eb1d423101864f720db9c2c07ca7ea61.png) ![在此处输入图像描述](../Images/7419580c97bbfde44c3fa743e2efd741.png) ![在此处输入图像描述](../Images/37e5862a41aab2c2453be0d0e71861ee.png)

```
I wish,it clears your doubt!!!! 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T13:04:50.033

根据splay树的定义：

```
Splaying the tree for a certain element rearranges the tree so that the element is placed at the root of the tree. 
```

所以我相信它永远是插入的最后一个元素。

# c - 释放一个双指针

> ID：11015360
> 
> 赞同：17
> 
> 时间：2012-06-13T12:58:43.857
> 
> 标签：c, pointers

我使用这样的双指针创建了一个二维矩阵：

```
int** pt; pt = (int*) malloc(sizeof(int)*10); 
```

我知道一个指针是这样释放的

```
free(ptr); 
```

我们如何释放双指针？

如果我们打印一些东西然后释放内存并退出程序怎么办？最终记忆是由我们使用的记忆组成还是与初始记忆相同？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-06-13T13:03:21.450

假设你有一个矩阵`mat`

```
int** mat = malloc(10 * sizeof(int*));
for (int i=0; i<10; ++i) {
  mat[i] = malloc(10 * sizeof(int));
} 
```

然后你可以释放矩阵的每一行（假设你已经事先正确初始化了每一行）：

```
for (int i=0; i<10; ++i) {
  free(mat[i]);
} 
```

然后释放顶层指针：

```
free(mat); 
```

对于您的第二个问题：如果您分配内存并使用它，您将更改该内存，即使您释放它也不会“恢复”（尽管您将无法再可靠/便携地访问它）。

*注意*：顶级 malloc 正在使用`sizeof(int*)`，因为您正在分配指向 s 的指针`int`，而不是`int`s - 和的大小`int*`不`int`保证相同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T13:13:05.633

如果您的矩阵不是“参差不齐”，即所有行的长度相同，您可能需要考虑：

1.  手动访问它，即将其视为一维值数组，并保留一个单独的`width`值。要访问 ( *x,y* ) 处的元素，请使用`mat[y * width + x]`.
2.  如果您真的想要 的便利性，您可以通过*对*分配指针数组和所有行`mat[y][x]`的单个调用进行改进，然后将指针初始化为指向每一行。这样做的好处是它可以全部免费：只需一次调用。`malloc()`*`free(mat);`*

 *第二种方法看起来像这样：

```
double ** matrix_new(size_t width, size_t height)
{
  double **p = malloc(height * sizeof *p + width * height * sizeof **p);
  double *e1 = (double *) (p + height);
  size_t i;

  for(i = 0; i < height; ++i)
    p[i] = e1 + i * width;
  return p;
} 
```

注意：以上内容未经测试，生产代码在使用`p`.*

# javascript - jQuery回调问题，它只运行一次

> ID：11015363
> 
> 赞同：0
> 
> 时间：2012-06-13T12:58:46.937
> 
> 标签：javascript, jquery, ajax, callback

我在一段代码中遇到了一些问题，我使用 jQuery 的 ajax 加载搜索结果，因为它是一个列表，我想为列表设置样式，斑马样式，所以我包含了一个回调函数。以下是第一次工作，但是当我再次搜索时它不起作用（样式）。

当我在回调函数中放置警报时，它每次都会触发，但样式不起作用。

**ajax部分**

```
 $.post('search.php',{value:val}.function(data){
  // output list

  }).error(function(){
      // error output
  }).success(function(){    
          // callback function. 
          if(typeof options.afterLoad == 'function'){
              options.afterLoad.call(this);
          }                     
  }); 
```

**插件选项**

```
 $('#search').search({
      afterLoad: function(){
         $('#results').children('li:odd').addClass('odd');
      }
  }); 
```

这不是完整的插件，而只是重要的部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T13:10:06.490

如果执行回调，那么我可以考虑 3 个选项：

*   没有带id的控件`results`
*   没有`li`孩子`#results`
*   类`odd`不存在或不包含您认为它具有的样式规则（可能是缓存问题？）

在回调上放一条`debugger`指令并检查`length`of `$('#results')`和`$('#results').children('li:odd')`

# php - 使用框架在 PHP 中实现 URL 重写

> ID：11015368
> 
> 赞同：0
> 
> 时间：2012-06-13T12:59:05.250
> 
> 标签：php, url-rewriting

**这更多的是信息而不是问题。**（在搜索**Stack Overflow**时，我发现更多与问题相关的问题，然后是解决方案或解释）
我正在开发一个 PHP 房地产网站，与[此](http://www.proptiger.com/property-in-pune-real-estate.php)非常相似。在这里，列表中的每个属性都将用户带到不同的页面（**URL 显示单击的每个属性的不同链接**）并显示详细信息。此外，**和**标签也发生了变化。网站上一个城市大约有 600 个属性，绝对不可能有**600 个页面**。因此他们必须使用**一些框架或 URL 重写**技术来实现这一点。我对 PHP 相当陌生，对框架没有经验（**曾在经典 PHP 上工作过**）。
我希望响应/建议了解如何使用任何**PHP 框架或某些 URL**重写技术来实现此类功能（**理想情况下类似于站点）。**对不起，如果这个问题听起来太宽泛而无法解释，但任何指针也可以简单地解释一下我开始的场景。 谢谢

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T13:04:38.493

在 Apache 中使用一个名为[mod_rewrite](https://httpd.apache.org/docs/current/mod/mod_rewrite.html)的模块，并在您的 web 目录中放置一个名为的文件`.htaccess`，其中包含以下内容（例如）

```
RewriteEngine On
RewriteRule ^([^/]*)\.php$ /view.php?id=$1 [L] 
```

如您所见，当`example.com/some-cool-apartment.php`请求 URL 时，就好像请求了以下内容`example.com/view.php?id=some-cool-apartment`

当然，其他 Web 服务器（例如 IIS）支持使用其他语法重写 URL。IIS 使用`web.config`具有以下内容命名的文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <system.webServer>
        <rewrite>
            <rules>
                <rule name="RewriteUserFriendlyURL" stopProcessing="true">
                    <match url="^([^/]*)\.php$" />
                    <action type="Redirect" url="/view.php?id={R:1}" appendQueryString="false" />
                </rule>
            </rules>
        </rewrite>

    </system.webServer>
</configuration> 
```

我希望能回答你的问题**

# javascript - 以编程方式删除 Spotify 播放列表

> ID：11015369
> 
> 赞同：4
> 
> 时间：2012-06-13T12:59:07.383
> 
> 标签：javascript, api, spotify

是否可以使用 JS API 删除 Spotify 播放列表？我错误地创建了数百个，但 API 似乎没有任何明显的方法可以删除它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-14T10:34:46.273

可以，但是真的很麻烦。

请参阅：[https ://developer.spotify.com/docs/apps/api/1.0/models-collection.html](https://developer.spotify.com/docs/apps/api/1.0/models-collection.html)

```
myTracks.snapshot().done(function(snapshot) {
  myTracks.remove(snapshot.find(track));
}); 
```

将“曲目”替换为播放列表。你需要类似的东西：

```
library.forCurrentUser().playlists.snapshot(0,1).done(function(s) {
  library.forCurrentUser().playlists.remove(s.find(s.get(0)));
} 
```

这里的问题是，如果您尝试在循环中运行它，它将失败，因为快照在第二次运行时已经过时......非常烦人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-07-09T09:16:13.653

这个答案来晚了，但它解决了问题，对有同样问题的用户很有用。一个人可以“取消关注”一个播放列表（甚至是他自己的！），这具有将其从一个人的 Spotify 帐户中删除的效果。相关功能是`user_playlist_unfollow(user, playlist_id)`。

# gdb - 从 gdb 获取断点号

> ID：11015371
> 
> 赞同：4
> 
> 时间：2012-06-13T12:59:10.093
> 
> 标签：gdb

我正在编写 gdb 命令脚本来简化调试。我遇到的一个问题是我正在设置一个断点，我想在之后禁用它，并且只有在命中另一个断点后才启用它。

我想做的是这个

```
$my_break_number = break SomeFile.cpp:231
disable $my_break_number 
```

但不幸的是 gdb 不能这样工作。我已阅读手册，但找不到有关如何执行此操作的任何信息。希望有一些我错过的信息。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-13T16:55:28.553

gdb 将使用最后设置的断点编号自动设置便利变量 $bpnum。

您可以在设置断点以禁用它之后使用它（我没有测试过断点不明确并创建多个断点时，我认为它可以工作并禁用所有创建的断点位置。）

见：http: [//sourceware.org/gdb/current/onlinedocs/gdb/Set-Breaks.html#Set-Breaks](http://sourceware.org/gdb/current/onlinedocs/gdb/Set-Breaks.html#Set-Breaks)

如果您需要使用命令中的断点编号，那可能不是您想要的，但它适用于指定的问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-14T05:32:19.450

听起来您可能想要使用[Python GDB scripting](http://sourceware.org/gdb/onlinedocs/gdb/Python.html) ，与“常规”命令脚本相比，它为您提供了对断点的更好的编程[访问。](http://sourceware.org/gdb/onlinedocs/gdb/Breakpoints-In-Python.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-04T11:25:10.457

还`info breakpoints`提供有用的信息，例如：

断点数，断点被击中的次数，内存中的地址，它在什么函数中，断点的文件和行号

# android - OpenGL ES 2.0 基于运动绘制线条，线条总是从原点开始

> ID：11015374
> 
> 赞同：4
> 
> 时间：2012-06-13T12:59:15.000
> 
> 标签：android, opengl-es-2.0

我刚刚开始学习适用于 Android 的 OpenGL，并且在绘制线条时遇到了一个奇怪的问题。我想做的就是根据手指运动画一条线。现在，只要我开始滑动，我总是会从原点（0,0）得到一条跟随我的动作的线。

这是一张图片：

[http://imageshack.us/photo/my-images/137/screenshot2012061312174.jpg/](http://imageshack.us/photo/my-images/137/screenshot2012061312174.jpg/)

箭头表示我的手指运动，从原点开始的线（红色圆圈）是我整个运动之后提到的线。

不要对 Coords 数组感到困扰我知道这不是最佳实践，但我调试了整个程序并且找不到涉及该数组的任何错误。

我可能应该提到 ArrayList 点包含我生成的所有点。

我现在正在尝试解决这个问题，但我真的被卡住了，任何建议都可能会有所帮助

这是我的整个渲染课程。

公共类 HelloOpenGLES20Renderer 实现 GLSurfaceView.Renderer {

```
private FloatBuffer triangleVB;
private int mProgram;
private int maPositionHandle;
public ArrayList<PointWrapper> points;

private int muMVPMatrixHandle;
private float[] mMVPMatrix = new float[16];
private float[] mMMatrix = new float[16];
private float[] mVMatrix = new float[16];
private float[] mProjMatrix = new float[16];
private int[] viewport = new int[4];

private ArrayList<Float> coordinates;

float[] Coords = new float[100000];

boolean first;
private int counter;
private PointWrapper last;

private final String vertexShaderCode =
// This matrix member variable provides a hook to manipulate
// the coordinates of the objects that use this vertex shader
"uniform mat4 uMVPMatrix;   \n" +

"attribute vec4 vPosition;  \n" + "void main(){               \n" +

// the matrix must be included as a modifier of gl_Position
        " gl_Position = uMVPMatrix * vPosition; \n" +
        "}  \n";

private final String fragmentShaderCode = "precision mediump float;  \n"
        + "void main(){              \n"
        + " gl_FragColor = vec4 (0.63671875, 0.76953125, 0.22265625, 1.0); \n"
        + "}                         \n";

private int loadShader(int type, String shaderCode) {

    // create a vertex shader type (GLES20.GL_VERTEX_SHADER)
    // or a fragment shader type (GLES20.GL_FRAGMENT_SHADER)
    int shader = GLES20.glCreateShader(type);

    // add the source code to the shader and compile it
    GLES20.glShaderSource(shader, shaderCode);
    GLES20.glCompileShader(shader);

    return shader;
}

public HelloOpenGLES20Renderer() {
    points = new ArrayList<PointWrapper>();
    first = true;
    this.counter = 0;
    last = new PointWrapper();

    coordinates = new ArrayList<Float>();
}

private float[] convertCoordinates(PointWrapper f) {
    float[] vector = new float[4];
    GLU.gluUnProject(f.point.x, f.point.y, 0.0f, mVMatrix, 0, mProjMatrix,
            0, viewport, 0, vector, 0);

    return vector;
}

private void initShapes() {
    ArrayList<PointWrapper> points2 = new ArrayList<PointWrapper>(points);
    float[] vector;

    if (!points2.isEmpty()) {
        if(points2.size()%2==1){
            points2.remove(points2.size()-1);
        }

        for (int i = counter/2; i < points2.size(); i++) {

            vector = convertCoordinates(points2.get(i));
            Coords[counter] = vector[0] / vector[3];
            Coords[counter+1] = -1 * (vector[1] / vector[3]);

            counter= counter+2;
        }

    }

    // initialize vertex Buffer for triangle
    ByteBuffer vbb = ByteBuffer.allocateDirect(
    // (# of coordinate values * 4 bytes per float)
            Coords.length * 4);
    vbb.order(ByteOrder.nativeOrder());// use the device hardware's native
    // byte order
    triangleVB = vbb.asFloatBuffer(); // create a floating point buffer from
    // the ByteBuffer
    triangleVB.put(Coords); // add the coordinates to the
    // FloatBuffer
    triangleVB.position(0); // set the buffer to read the first coordinate

}

public void onSurfaceCreated(GL10 unused, EGLConfig config) {

    // Set the background frame color
    GLES20.glClearColor(0.5f, 0.5f, 0.5f, 1.0f);

    // initialize the triangle vertex array
    // initShapes();

    int vertexShader = loadShader(GLES20.GL_VERTEX_SHADER, vertexShaderCode);
    int fragmentShader = loadShader(GLES20.GL_FRAGMENT_SHADER,
            fragmentShaderCode);

    mProgram = GLES20.glCreateProgram(); // create empty OpenGL Program
    GLES20.glAttachShader(mProgram, vertexShader); // add the vertex shader
                                                    // to program
    GLES20.glAttachShader(mProgram, fragmentShader); // add the fragment
                                                        // shader to program
    GLES20.glLinkProgram(mProgram); // creates OpenGL program executables

    // get handle to the vertex shader's vPosition member
    maPositionHandle = GLES20.glGetAttribLocation(mProgram, "vPosition");
}

public void onDrawFrame(GL10 unused) {

    // Redraw background color
    GLES20.glClear(GLES20.GL_COLOR_BUFFER_BIT | GLES20.GL_DEPTH_BUFFER_BIT);

    initShapes();

    // Add program to OpenGL environment
    GLES20.glUseProgram(mProgram);

    // Prepare the triangle data
    GLES20.glVertexAttribPointer(maPositionHandle, 2, GLES20.GL_FLOAT,
            false, 0, triangleVB);
    GLES20.glEnableVertexAttribArray(maPositionHandle);

    // Apply a ModelView Projection transformation
    Matrix.multiplyMM(mMVPMatrix, 0, mProjMatrix, 0, mVMatrix, 0);
    GLES20.glUniformMatrix4fv(muMVPMatrixHandle, 1, false, mMVPMatrix, 0);

    GLES20.glLineWidth(5f);

    GLES20.glDrawArrays(GLES20.GL_LINE_STRIP, 0, counter);

}

public void onSurfaceChanged(GL10 unused, int width, int height) {
    GLES20.glViewport(0, 0, width, height);

    float ratio = (float) width / height;
    viewport[0] = 0;
    viewport[1] = 0;
    viewport[2] = width;
    viewport[3] = height;

    // this projection matrix is applied to object coodinates
    // in the onDrawFrame() method
    Matrix.frustumM(mProjMatrix, 0, -ratio, ratio, -1, 1, 3, 7);

    muMVPMatrixHandle = GLES20.glGetUniformLocation(mProgram, "uMVPMatrix");

    Matrix.setLookAtM(mVMatrix, 0, 0, 0, -3, 0f, 0f, 0f, 0f, 1.0f, 0.0f);
} 
```

}

预先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T18:24:00.063

```
for (int i = counter/2; i < points2.size(); i++) {

        vector = convertCoordinates(points2.get(i));
        Coords[counter] = vector[0] / vector[3];
        Coords[counter+1] = -1 * (vector[1] / vector[3]);

        counter= counter+2;
    } 
```

您已初始化 Coords 以容纳 100000 个浮点数，并将它们初始化为 0。在此循环中，最后一次迭代具有“计数器”，其中包含您在数组中设置的浮点数。

你传递给 glDrawArrays 的应该是要绘制的顶点数。所以在这种情况下是“计数器”的一半。

```
GLES20.glDrawArrays(GLES20.GL_LINE_STRIP, 0, counter); 
```

您的 for 循环在数组末尾添加 'counter'/2 额外数量的 (0,0) 顶点。最快的解决方法是将 'counter'/2 传递给 glDrawArrays，但我建议采用更清晰的方法。

```
numOfVertices = points2.size(); //make field 
int counter = 0; //make local
for (int i = 0; i < numOfVertices; i++) {
        vector = convertCoordinates(points2.get(i));
        Coords[counter] = vector[0] / vector[3];
        Coords[counter+1] = -1 * (vector[1] / vector[3]);
        counter= counter+2;
    } 
```

接着

```
GLES20.glDrawArrays(GLES20.GL_LINE_STRIP, 0, numOfVertices); 
```

# sql-server-2008 - 如何在单行中显示与 sql server 2008 中另一个表中的 description_id 相同的多行？

> ID：11015377
> 
> 赞同：0
> 
> 时间：2012-06-13T12:59:27.820
> 
> 标签：sql-server-2008

```
description_id       description
--------------      -------------
1                   Ampicillin Oral
1                   Ofloxacin Oral
1                   Sulfamoxole+Trimethoprim Oral
2                   Letrozole Oral
2                   Flunarizine Oral 
```

table1 中的 description_id 和 table2 中的描述。

结果应该是

```
description_id       description
--------------       -----------
1                    Ampicillin Oral,Ofloxacin Oral, Sulfamoxole+Trimethoprim Oral
2                    Letrozole Oral, Flunarizine Oral 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T13:08:06.237

我假设`table2`还有一`description_id`列，它是 dbo.table1 中的主键：

```
SELECT description_id, STUFF((SELECT N',' + description
  FROM dbo.table2 WHERE description_id = t1.description_id
  FOR XML PATH(''), TYPE(N'./text()[1]', N'nvarchar(max)'), 1, 1, N'')
FROM dbo.table1 AS t1; 
```

在 SQL Server 2017 或更高版本中，这更加整洁：

```
SELECT t1.description_id, STRING_AGG(t2.description, N',')
  FROM dbo.table1 AS t1
  INNER JOIN dbo.table2 AS t2
  ON t1.description_id = t2.description_id
  GROUP BY t1.description_id; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T13:13:58.100

我认为您正在寻找的是一个可以将描述字符串连接在一起的聚合函数。

然而，尽管 SQL Server 内置了聚合数字的函数（例如 SUM 和 AVERAGE），但没有内置聚合字符串连接函数。

这给您留下了两个主要选择：

1.  在客户端上执行连接。
2.  使用解决方法技术，例如 XML PATH、递归 CTE，或使用嵌入式公共语言运行时包。

对于选项 2，有一些关于如何执行此操作的文章，例如[这篇关于连接行值](http://www.simple-talk.com/sql/t-sql-programming/concatenating-row-values-in-transact-sql/)的文章。确实 - 我刚刚看到 Aaron Bertrand 的回答，它向您展示了在您的情况下如何做到这一点:)

# android - 使用 SearchView 在搜索操作栏激活时显示软键盘

> ID：11015382
> 
> 赞同：8
> 
> 时间：2012-06-13T12:59:48.970
> 
> 标签：android, actionbarsherlock, searchview

当我从 ActionBar 激活搜索时，我看到[这个问题](https://stackoverflow.com/questions/10089993/android-how-to-focus-actionbar-searchview)将焦点集中在 SearchView EditText 上。但是，当它获得焦点时键盘不会出现。不应该吗，因为它只是一个普通的 EditText？（它是普通的 EditText 吗？）在 Android SDK 级别 11 上可以看到这种行为。（Samsung Galax Tab 7.7 with stock Android。）

目前，我有一个解决方法，它`onOptionsItemSelected(MenuItem item)`与我的 Activity 方法挂钩，显示键盘。

```
 @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        boolean menuSelectionHandeled = super.onOptionsItemSelected(item);
        // menu_search is the id of the menu item in the ActionBar
        if (item.getItemId() == R.id.menu_search) {
               mInputManager.showSoftInput(null, InputMethodManager.SHOW_IMPLICIT);
        }
        return menuSelectionHandeled;
    } 
```

`mInputManager`的实例在哪里`InputMethodManager`。

ActionBar 是使用 ActionBarSherlock 构建的，由于目标设备是 Android 3.x，这可能是导致症状的原因吗？根据 ActionBarSherlock 的[常见问题解答](http://actionbarsherlock.com/faq.html)：

> Android 3.x（也称为 Honeycomb）上的操作栏并未实现 Android 4.x（冰淇淋三明治）中的所有功能。为了在所有平台上提供完整的操作栏 API，并在所有 Android 版本中统一样式，使用了自定义实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T17:59:47.090

这应该工作：

```
SearchView searchView = new SearchView(getContext());
searchView.setInputType(InputType.TYPE_CLASS_TEXT);
searchView.setBackgroundColor(Color.WHITE); 
```

# wcf - Restful WCF 服务 POST 方法在 fiddler2 中返回 HTTP400 错误

> ID：11015383
> 
> 赞同：0
> 
> 时间：2012-06-13T12:59:49.907
> 
> 标签：wcf, post, fiddler, wcf-rest

为登录验证创建了简单的 Restful 服务。以下是我的接口和类定义。

接口IDemo：

```
public interface IDemo
{
    [OperationContract]
    [WebInvoke(RequestFormat = WebMessageFormat.Json,
               ResponseFormat = WebMessageFormat.Json,
               BodyStyle = WebMessageBodyStyle.Bare,
               UriTemplate = "/ValidateUser?Username={UserName}&Password={Password}",
               Method = "POST")]
    string  ValidateUser(string Username, string Password);
} 
```

课堂演示：

```
public class Demo:IDemo
{
    public string ValidateUser(string Username, string Password)
    {
        Users objUser = new Users();
        objUser.UserID = Username;
        objUser.Password = Password;
        string Msg = LoginDataService.ValidateUser(Username, Password);
        return Msg;
    }
} 
```

localhost:49922/Demo.svc/ValidateUser?Username=demo&Password=demo (带 http:\)

当我尝试在 Fiddler2 的 Post 方法下解析上述 URL 时，我收到 Bad Request HTTP400 错误。

谁能帮助我的代码有什么问题。

感谢和问候，

维杰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T13:43:18.497

您的 URI 模板看起来像是在发送 URL 中的参数。但是当您使用 POST 时，参数会在 http 正文中发送。

请注意，您不应在 url 中发送用户名和密码，因为它可以被记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T15:37:47.837

对于上述 REST 方法，来自 Fiddler 的 POST 需要如下所示：

```
POST http://localhost/Sample/Sample.svc/ValidateUser?Username=demo&Password=demo HTTP/1.1
User-Agent: Fiddler
Content-Type: application/json
Host: rajeshwin7
Content-Length: 0 
```

这样做我会得到一个 200 OK HTTP 状态，如下所示：

```
HTTP/1.1 200 OK
Cache-Control: private
Content-Length: 44
Content-Type: application/json; charset=utf-8
X-AspNet-Version: 4.0.30319
X-Powered-By: ASP.NET
Date: Thu, 14 Jun 2012 15:35:28 GMT

"Server returns username demo with password demo" 
```

# java - 如何从我的应用程序单击按钮上的最后一个拨号号码拨打电话

> ID：11015389
> 
> 赞同：1
> 
> 时间：2012-06-13T13:00:11.397
> 
> 标签：java, android

这是我可以解决的代码：

```
Intent intent = new Intent(Intent.ACTION_CALL);

intent.setData(Uri.parse("tel:" + bundle.getString("mobilePhone")));
context.startActivity(intent); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T09:24:29.247

```
String uri = "tel:" + CallLog.Calls.getLastOutgoingCall(getApplicationContext()).trim();
Intent intent = new Intent(Intent.ACTION_CALL);
intent.setData(Uri.parse(uri));
startActivity(intent); 
```

并将此权限添加到清单中

```
<uses-permission android:name="android.permission.READ_CALL_LOG" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T13:02:48.313

您可以使用 CallLog.Calls.getLastOutgoingCall 获取最后一个拨出电话，然后使用您的意图调用它。

[http://developer.android.com/reference/android/provider/CallLog.Calls.html#getLastOutgoingCall(android.content.Context](http://developer.android.com/reference/android/provider/CallLog.Calls.html#getLastOutgoingCall(android.content.Context) )

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T13:16:20.453

干得好。

包含`<uses-permission android:name="android.permission.READ_CONTACTS"/>`在清单中

```
 String lastNumber = "";

        Cursor managedCursor = managedQuery(CallLog.Calls.CONTENT_URI, null,
                null, null, null);
        int number = managedCursor.getColumnIndex(CallLog.Calls.NUMBER);
        int type = managedCursor.getColumnIndex(CallLog.Calls.TYPE);

        while (managedCursor.moveToNext()) {
            String phNumber = managedCursor.getString(number);
            String callType = managedCursor.getString(type);

            int dircode = Integer.parseInt(callType);
            switch (dircode) {
            case CallLog.Calls.OUTGOING_TYPE:
                lastNumber = phNumber;
                break;
            }
            if (lastNumber.length() != 0)
                break;
        }

            Intent intent = new Intent(Intent.ACTION_CALL);
            intent.setData(Uri.parse("tel:" + lastNumber));
            context.startActivity(intent); 
```

# jpa - JPA中的flush（）异常未处理集合

> ID：11015391
> 
> 赞同：1
> 
> 时间：2012-06-13T13:00:19.930
> 
> 标签：jpa

我有以下实体；

```
Claimant:

@OneToMany(mappedBy = "payTo", cascade = CascadeType.ALL, fetch = FetchType.LAZY)
    @NotAudited
    private Set<Payment> payments = new HashSet<Payment>();

Payment:
 @OneToMany(mappedBy = "rofOf", cascade = CascadeType.ALL, fetch = FetchType.LAZY)
    @Audited(targetAuditMode = RelationTargetAuditMode.NOT_AUDITED)
    private Set<Payment> returnOfFundings = new HashSet<Payment>(); 
```

当做claimant.merge()

收到以下异常“**集合 [com.bfds.saec.domain.Payment.returnOfFundings] 未由 flush() 处理**”

对于上述一种解决方案，我发现只需在合并之前重新加载索赔人并加入付款。

但是请告诉我，有没有其他方法可以解决上述问题，因为我不想重新加载索赔人付款。

问题的根本原因可能是什么？我在那里定义的关系有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T15:07:26.500

问题的根本原因似乎是Hibernate 中[的 HHH-273](https://hibernate.onjira.com/browse/HHH-2763)错误。根据评论，当 Envers 触及收藏时，它也会弹出。因为它在 4.0.1 版本中已修复，所以摆脱它的最佳方法是更新 Hibernate。

# haskell - 在 Setup.hs 中找出我们正在构建的标志

> ID：11015395
> 
> 赞同：5
> 
> 时间：2012-06-13T13:00:23.707
> 
> 标签：haskell, cabal

我需要找出在 Setup.hs 中构建的标志（在 cabal 文件中找到的类型）。我想我正在寻找类型为 FlagAssignment 的东西。我怎样才能得到这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-10T06:16:02.297

Idris 必须这样做，[您可以在此处查看代码](https://github.com/idris-lang/Idris-dev/blob/d2296e991cd0b604c34a072cf4fa3dd9952f4dce/Setup.hs#L51-L77)。简而言之，阅读您可以从记录字段中获取的[`configConfigurationsFlags`](http://hackage.haskell.org/package/Cabal-1.22.5.0/docs/Distribution-Simple-Setup.html#v:configConfigurationsFlags)内容。使用时传递给每个钩子。`ConfigFlags`[`configFlags`](http://hackage.haskell.org/package/Cabal-1.22.5.0/docs/Distribution-Simple-LocalBuildInfo.html#v:configFlags)`LocalBuildInfo``LocalBuildInfo`[`defaultMainWithHooks`](http://hackage.haskell.org/package/Cabal-1.22.5.0/docs/Distribution-Simple.html#v:defaultMainWithHooks)

注意此信息只是传递给配置的标志，因此任何未指定的标志都不会存在，而不是具有它们的默认值。我认为这是一个错误，但截至 2016 年 1 月尚未修复。

**2016 年10 月更新**：在 Cabal-1.24 中，有一个`flagAssignment`字段在`LocalBuildInfo`通过配置解决后具有标志。

# jquery - jQuery动画位置百分比

> ID：11015399
> 
> 赞同：12
> 
> 时间：2012-06-13T13:00:39.363
> 
> 标签：jquery, position, jquery-animate, toggle, percentage

如何确定百分比位置？

```
 $(document).ready(function(){
      $("#button").toggle(function(){
        $("#slide").animate({top:-100%},1000);
      },function(){
        $("#slide").animate({top:0%},1000);
      });
    }); 
```

请建议。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-13T13:03:45.757

```
$(document).ready(function(){
      $("#button").toggle(function(){
        $("#slide").animate({top:'-100%'},1000);
      },function(){
        $("#slide").animate({top:'0%'},1000);
      });
    }); 
```

添加引号。（我用的是单引号，但是js不管是'还是"）

# parsing - 在 webkit 中转储 DOM 树的任何可执行文件或库？

> ID：11015406
> 
> 赞同：0
> 
> 时间：2012-06-13T13:01:24.603
> 
> 标签：parsing, dom, webkit, html-parsing, rendering

类似于将渲染树转储到磁盘的 DumpRenderTree 工具，是否有任何工具可以转储 DOM 树（解析树）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T08:48:46.537

我们可以调整 DumpRenderTree 工具本身来获取 DOM 树。我修改了 RenderTreeAsTExt.cpp 文件中的“String externalRepresentation(Frame*, RenderAsTExtBEhavior)”函数，并在函数开头添加了以下代码。这对我有用。

```
if (!renderer || !renderer->isBox())
    return String();
Node* n = renderer->node();
n->showTreeForThis();
return String(); 
```

# android - Andengine TouchEvent 开启新场景

> ID：11015411
> 
> 赞同：1
> 
> 时间：2012-06-13T13:01:42.280
> 
> 标签：android, andengine

我需要在按钮点击时打开新场景，对于那个 m 使用 onAreaTouched 方法，这是我的一段代码：

```
PlayBtn = new Sprite(200,35, 200,150,this.playTextureRegion){

         @Override
         public boolean onAreaTouched(final TouchEvent mmSceneTouchEvent, final float mmTouchAreaLocalX, final float mmTouchAreaLocalY){

             switch(mmSceneTouchEvent.getAction()) {

                case TouchEvent.ACTION_DOWN:
                    playBtn = true; 
                    this.mEngine.setScene(gamePlay());  
                    break;
                case TouchEvent.ACTION_MOVE:
                    break;
                case TouchEvent.ACTION_UP:
                    playBtn = false;                                
                    this.mEngine.setScene(gamePlay());                  
                    break;

             }               

            return true;

         }           

     }; 
```

但是这里`this.mEngine.setScene(gamePlay());`的行没有被编译器采用，它显示错误为红色标记。所以任何想法都可以帮助我很多。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T06:09:06.170

我认为此链接为您提供了有关如何在单个活动中管理场景的更多指导。 [https://sites.google.com/site/matimdevelopment/creating-and-managing-scenes](https://sites.google.com/site/matimdevelopment/creating-and-managing-scenes)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T16:13:56.610

您似乎正在调用一个名为“gamePlay()”的方法。相反，您需要调用场景。因此，您所做的是在您的 gamePlay() 方法中，声明一个新场景，然后调用它。下面的例子。

```
// Your Method called gamePlay()
public void gamePlay(){

myNewScene = new Scene();

// Set up your scene here. Background, Sprites, Text etc.

} 
```

// 在按下 playBtn 时将 Scene 更改为 myNewScene

```
playBtn = new Sprite(200,35, 200,150,this.playTextureRegion){

         @Override
         public boolean onAreaTouched(final TouchEvent mmSceneTouchEvent, final float mmTouchAreaLocalX, final float mmTouchAreaLocalY){

             switch(mmSceneTouchEvent.getAction()) {

                case TouchEvent.ACTION_DOWN:
                    playBtn = true; 
                    this.mEngine.setScene(myNewScene);  
                    break;
                case TouchEvent.ACTION_MOVE:
                    break;
                case TouchEvent.ACTION_UP:
                    playBtn = false;                                
                    this.mEngine.setScene(myNewScene);                  
                    break;

             }               

            return true;

         }           

     }; 
```

# centos5 - 无法在 Centos 5 32 位中为 Oracle 设置环境变量

> ID：11015413
> 
> 赞同：0
> 
> 时间：2012-06-13T13:01:50.663
> 
> 标签：centos5

无法在 Centos 5 32 位中为 Oracle 设置环境变量。/.bash_profile 文件中输入的值没有被更改。？什么是解决方案。？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T13:25:39.037

首先，您需要将 'sqlplus' 所在的目录添加到 PATH。您的个人资料的正确路径是 ~/.profile。

# c# - C# 显示字幕

> ID：11015417
> 
> 赞同：1
> 
> 时间：2012-06-13T13:01:59.757
> 
> 标签：c#

我试图在正确的时间在屏幕上显示字幕
现在我得到了一个异常

代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Timers;
class Program
{
    private static Queue<Subtitle> _subtitles;

    private static Subtitle _activeSubtitle;

    private static TimeSpan _currentTime = new TimeSpan();

    static void Main(string[] args)
    {
        _subtitles = new Queue<Subtitle>();

        Subtitle title1 = new Subtitle()
        {
            StartTime = TimeSpan.Parse("00:00:06,000"),
            EndTime = TimeSpan.Parse("00:00:07,400"),
            Text = "Enjoy the movie!"
        };

        Subtitle title2 = new Subtitle()
        {
            StartTime = TimeSpan.Parse("00:00:07,500"),
            EndTime = TimeSpan.Parse("00:00:09,500"),
            Text = "Hi, my name is Mary"
        };

        Subtitle title3 = new Subtitle()
        {
            StartTime = TimeSpan.Parse("00:00:22,000"),
            EndTime = TimeSpan.Parse("00:00:85,100"),
            Text = "Hello my name is John."
        };

        _subtitles.Enqueue(title1);
        _subtitles.Enqueue(title2);
        _subtitles.Enqueue(title3);

        Timer timer = new Timer(ShowSubtitles, null, 0, 100);

        while (_currentTime <= new TimeSpan(0, 0, 0, 30))
        {

        }
        Console.WriteLine("End");
    }

    private static void ShowSubtitles(object state)
    {

        if (_activeSubtitle == null && _subtitles.Count > 0)
            _activeSubtitle = _subtitles.Dequeue();
        Console.WriteLine(_currentTime);

        if (_activeSubtitle != null)
        {

            if (_currentTime >= _activeSubtitle.StartTime && _currentTime <= _activeSubtitle.EndTime)
                Console.WriteLine("\t{0}", _activeSubtitle.Text);

            if (_currentTime >= _activeSubtitle.EndTime)
                _activeSubtitle = null;
        }
        _currentTime = _currentTime.Add(new TimeSpan(0, 0, 0, 0, 100));

    }
}

internal class Subtitle
{
    public TimeSpan StartTime { get; set; }
    public TimeSpan EndTime { get; set; }
    public string Text { get; set; }
} 
```

例外：
计时器 timer = new Timer(ShowSubtitles, null, 0, 100);
'System.Timers.Timer' 不包含带有 4 个参数的构造函数

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T13:05:04.840

`System.Timers.Timer`没有带有四个参数的构造函数

[http://msdn.microsoft.com/en-us/library/system.timers.timer.aspx](http://msdn.microsoft.com/en-us/library/system.timers.timer.aspx)

你可能想要的是一个`System.Threading.Timer`

[http://msdn.microsoft.com/en-us/library/system.threading.timer.aspx](http://msdn.microsoft.com/en-us/library/system.threading.timer.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T13:09:52.953

您需要将 Timer 更改为 System.Threading.Timer 或根据[http://msdn.microsoft.com/en-us/library/system.timers上的定义重新定义如何使用 System.Timers.Timer .timer.aspx](http://msdn.microsoft.com/en-us/library/system.timers.timer.aspx)。

它可能会让人感到困惑，因为 C# 中至少有 3 种类型的 Timer - 在 System.Timers、System.Threading 和 System.Windows.Forms 内部！

# r - 使用 knitr markdown 注入 HTML 行

> ID：11015420
> 
> 赞同：1
> 
> 时间：2012-06-13T13:02:18.603
> 
> 标签：r, knitr

有没有办法在没有环绕格式标签的情况下将 R 代码输出注入到生成的文档`<pre><code class="r">`中`<pre><code>`？我问这个是因为我想使用 .Rmd 而不是 .Rhmtl 但同时注入一些额外的 HTML 行。使用 eg 这样做`cat("HTML code")`会失败，因为输出被`<pre><code>`.

我尝试运行以下 .Rmd 文件（带有额外的 HTML 行）的示例，该文件无法正确运行：

```
<script type="text/javascript">
<!--
function toggle_visibility(id) {
  var e = document.getElementById(id);
  if(e.style.display == 'none')
    e.style.display = 'block';
  else
    e.style.display = 'none';
}
//-->
</script>  

```{r}
1:10
```

<a onclick="toggle_visibility('answer_1');"><b><u>Antwort anzeigen</b></u></a>
<div id="answer_1" style=display:none>
```{r}
1:10
```
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T22:37:44.177

你应该可以用[knitr's hooks](http://yihui.name/knitr/hooks#output_hooks)做到这一点。您可能需要查看源代码以了解 render_markdown() 的默认挂钩是什么：

```
> library(knitr)
> render_markdown()
> knit_hooks$get('echo')
NULL
> knit_hooks$get('message')
function (x, options) 
{
    if (strict) {
        str_c("\n\n", indent_block(x), "\n")
    }
    else str_c("\n\n```\n", x, "```\n\n")
}
<environment: 0x2a3f590>
> knit_hooks$get('output')
function (x, options) 
if (output_asis(x, options)) x else hook.t(x, options)
<environment: 0x2a3f590>
> knitr:::output_asis
function (x, options) 
{
    is_blank(x) || options$results == "asis"
}
<environment: namespace:knitr> 
```

我不确定 hook.t 到底是做什么的，但请检查一下。

另外，您是否尝试过 asis 选项？我并不完全清楚您希望如何格式化，但您也许可以让它与 asis 一起使用。

你可以用钩子做很多很酷的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T14:56:10.903

我现在所做的是遵循 darozcig 的建议，我使用了 JS。不过，这个解决方案似乎很乏味。更容易整齐合身的 knitr 会更好！在我完整的 .Rmd 脚本下方。

```
<script type="text/javascript">
<!--
function toggle_visibility(id) {
  var e = document.getElementById(id); 
  if(e.style.display == 'none')
    e.style.display = 'block';
  else
    e.style.display = 'none';
}

function answer_top(name){
  var injection1 = '<a onclick=toggle_visibility("' + name + '")><b><u>Show answer</b></u></a>\n'
  document.write(injection1 + "\n")
  var injection2 = '<div id="' + name + '"style=display:none>'
  document.write(injection2 + "\n")
}

function answer_bottom() {
  document.write("</div>" + "\n")
}
//-->
</script>  

```{r}
1:10
```

<script type="text/javascript">answer_top("answer1")</script>
```{r}
1:10
```
<script type="text/javascript">answer_bottom()</script> 
```

# php - 如何使用javascript在共享按钮中显示链接

> ID：11015425
> 
> 赞同：-1
> 
> 时间：2012-06-13T13:02:38.320
> 
> 标签：php, javascript, jquery, linkedin

我正在使用这个显示链接中的共享按钮：

```
<script type="text/javascript" src="http://platform.linkedin.com/in.js"></script>
<script type="IN/Share" data-url="http://www.example.com"></script>

```

共享按钮正在显示并正常工作，但是当我通过 ajax 加载更多内容时，共享按钮没有显示，只有这 2 个脚本在那里。我搜索了他们的 API，但找不到任何方法。有什么方法可以通过任何 javascript 或 jquery 函数调用共享按钮？

请帮忙。

提前致谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-13T13:27:46.240

我终于自己找到了，我们可以这样做：

```
$.getScript("http://platform.linkedin.com/in.js?async=false", 函数成功() {
    IN.init({
      api_key: "这里的 API 密钥"
    });
  });

```

# jquery - Javascript Jquery MovingBoxes 插件

> ID：11015438
> 
> 赞同：0
> 
> 时间：2012-06-13T13:04:02.590
> 
> 标签：jquery, jquery-plugins

我正在使用movingboxes插件- [https://github.com/chriscoyier/MovingBoxes](https://github.com/chriscoyier/MovingBoxes) 我似乎无法做的是非常基本的事情；循环 li 元素，以便在第一个和最后一个之前没有空格，如果这有意义的话。

我想这样做，因为 startPanel 设置似乎不起作用，所以我不能将它设置为中间 li 一开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T08:31:18.113

您可以选择该滑块，`wrap: true`...这将克隆第一个元素，并克隆最后一个元素，当您到达终点时，它会给您无限滚动的印象。

```
jQuery('.your-element').movingBoxes({

    startPanel: 1,
    reducedSize: 0.9,
    fixedHeight: false,
    speed: 250,
    hashTags: false,
    //HEY HEYYY
    wrap: true,
    //HEY HEYYY
    buildNav: true,
    navFormatter: function(index, panel) {
      return "&#9679;"
    },
    easing: 'easeOutQuad',
    currentPanel: 'current',
    tooltipClass: 'tooltip',
    preinit: function(e, mb, tar) {},
    initialized: function(e, slider, tar) {  },
    initChange: function(e, slider, tar) {  },
    beforeAnimation: function(e, slider, tar) {},
    completed: function(e, slider, tar) { }
  }); 
```

# c# - 使用没有 SMO 的 GO 语句执行 SQL 脚本

> ID：11015444
> 
> 赞同：0
> 
> 时间：2012-06-13T13:04:32.917
> 
> 标签：c#, sql-server, database, smo

我遇到的一件事是将应用程序部署到没有安装 SMO 的机器上。我想执行具有`GO`语句的脚本，但也想避免在目标机器上安装 SMO 包或解析 SQL 脚本文件（因为我不知道 sql 脚本是否包含函数或 SP）。

我尝试手动将 SMO relevenat dll 复制到可执行文件的 bin 文件夹，但运行应用程序总是需要一些其他 dll。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T13:10:55.340

除了 SMO，[sqlcmd](http://msdn.microsoft.com/en-us/library/ms162773.aspx)实用程序可以理解 GO 语句。您将需要使用`System.Diagnostics.Process`以将您的脚本作为参数调用它。

[我绝不是说这是这样做***的***方法，但它是一个有效的选择。如果目标计算机上不存在该实用程序，您仍然会遇到与以前相同的问题。]

您还可以使用安装程序包部署 SMO，而无需在目标计算机上“安装”它：

[在设置和部署中嵌入 SMO dll](https://stackoverflow.com/questions/305291/embedding-smo-dlls-in-setup-and-deployment)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-07T08:59:41.453

我发现以下解决方案经过良好测试

```
using (SqlConnection cn = new SqlConnection(connectionString))
  {
    try
    {
      cn.Open();
      FileInfo file = new FileInfo(fileName);
      string script = file.OpenText().ReadToEnd();
      string[] splitChar = { "\r\nGO\r\n" };
      var sqlLines = script.Split(splitChar, StringSplitOptions.RemoveEmptyEntries);
      int res = 0;
      SqlCommand cmd = null;
      foreach (var query in sqlLines)
      {
          cmd = new SqlCommand(query, cn)
          {
              CommandTimeout = 5400
          };
          res = cmd.ExecuteNonQuery();
      }
      cn.Close();
    }
    catch (Exception ex)
    {
      msg = ex.Message;
    }
    finally
    {
      cn.Close();
    }
  } 
```

# ubuntu - 控制器中的 Errno::EACCES#upload rails roocarrierwave on ubuntu

> ID：11015448
> 
> 赞同：1
> 
> 时间：2012-06-13T13:04:43.033
> 
> 标签：ubuntu, carrierwave

我正在使用 roo 在 ubuntu 上的 rails 应用程序上解析一些 excelx 文件。这些是通过 Carrierwave 上传的。

这是我实际的控制器线：

```
excelx_file = params[:excel_file]
filex = MetadataUploader.new
filex.store!(excelx_file)
workbook = Excelx.new("#{filex.store_path}") 
```

以下是公开/上传的权限：

```
drwxrwxr-x 2 pirames pirames 4096 Jun 13 14:03 metadata_ingestion
drwxrwxr-x 2 pirames pirames 4096 Jun 13 14:24 tmp 
```

以下是文件的权限：

```
ls -l public/uploads/metadata_ingestion/
total 608
-rw-r--r-- 1 pirames pirames 621504 Jun 13 14:24 Bozza_Pirames_Distribuito.xlsx 
```

这是实际的跟踪：

```
Errno::EACCES in IngestionController#upload

Permission denied - oo_2895_1872934321
Rails.root: /var/www/mascarino

Application Trace | Framework Trace | Full Trace
/home/pirames/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/fileutils.rb:247:in `mkdir'
/home/pirames/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/fileutils.rb:247:in `fu_mkdir'
/home/pirames/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/fileutils.rb:176:in `block in mkdir'
/home/pirames/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/fileutils.rb:175:in `each'
/home/pirames/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/fileutils.rb:175:in `mkdir'
roo (1.10.1) lib/roo/excelx.rb:95:in `initialize'
app/controllers/ingestion_controller.rb:24:in `new'
app/controllers/ingestion_controller.rb:24:in `upload'
actionpack (3.2.3) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
actionpack (3.2.3) lib/abstract_controller/base.rb:167:in `process_action'
actionpack (3.2.3) lib/action_controller/metal/rendering.rb:10:in `process_action' 
```

在引发错误之前调用的 roo 上的实际行如下：@filename = filename

在[https://github.com/hmcgowan/roo/blob/master/lib/roo/excelx.rb](https://github.com/hmcgowan/roo/blob/master/lib/roo/excelx.rb)

现在，相同的代码在我的 mac 上的 dev 上完美运行。运行的服务器也是 ubuntu 上的 puma 在 dev 上。我已经检查了权限，并且在我的 mac 上也有相同的权限。我已检查拥有该文件夹的用户是否与运行服务器的用户相同。

有任何想法吗？我错过了什么吗？

编辑：我还在跟踪中的错误消息中注意到：

```
Permission denied - oo_2895_1872934321 
```

2895 是正在运行的 Puma 服务器的 PID。如果我传递上传文件的实际路径而不是 #{filex.store_path} 结果不会改变。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T21:05:03.740

是的！我的假设是正确的...

我看过：[https](https://github.com/hmcgowan/roo/blob/master/lib/roo/excelx.rb) ://github.com/hmcgowan/roo/blob/master/lib/roo/excelx.rb以了解 roo 在处理 excel 文件时的作用。所以这就是我发现的：

```
def initialize(filename, packed=nil, file_warning = :error) #, create = false)
super()
@file_warning = file_warning
@tmpdir = "oo_"+$$.to_s
@tmpdir = File.join(ENV['ROO_TMP'], @tmpdir) if ENV['ROO_TMP'] 
unless File.exists?(@tmpdir)
  FileUtils::mkdir(@tmpdir)
end
filename = open_from_uri(filename) if filename[0,7] == "http://"
filename = unzip(filename) if packed and packed == :zip 
```

@tmpdir 调用 ENV['ROO_TMP']。ROO_TMP 是在 roo 的 >1.1.0 版本中引入的，这就是它以前工作的原因。

在我的情况下 ENV['ROO_TMP'] 将返回零。

所以我确实 export ROO_TMP=/var/www/tmp 来测试。然后 chown -R 用户名 /var/www/tmp。

现在：

```
1.9.3p194 :001 > ENV['ROO_TMP']
=> "/var/www/tmp" 
```

这使一切正常，我能够处理我的文件:)

向我致敬！

# c# - 未找到 XSLT 匹配（）函数

> ID：11015449
> 
> 赞同：1
> 
> 时间：2012-06-13T13:04:45.327
> 
> 标签：c#, xml, xslt

我正在编写一个 XSLT 转换，我希望在其中使用匹配函数进行正则表达式匹配和替换。

'matches ()' 的 Visual Studio 2008 是一个未知的 XSLT 函数。

```
<xsl:when test="matches(normalize-space(.),'^([(]I[)])(.+)')">
                    <xsl:analyze-string select="normalize-space(.)" regex="^^([(]I[)])(.+)"
                        flags="x">
                        <xsl:matching-substring>
                            <xsl:variable name="paraNumber">
                                <xsl:value-of select="regex-group(1)"/>
                            </xsl:variable>
                            <xsl:variable name="text">
                                <xsl:value-of select="regex-group(2)"/>
                            </xsl:variable>
                            <span class="upper-I-double-bracket">
                                <xsl:value-of select="$paraNumber"/>
                            </span>
                            <xsl:value-of select="$text"/>
                        </xsl:matching-substring>
                    </xsl:analyze-string>
                </xsl:when> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T13:13:34.090

Visual Studio（所有当前已知的版本）使用 .NET XSLT 1.0 处理器 XslCompiledTransform 或（VS2005 之前的版本）较旧的 XslTransform。这些是 XSLT 1.0 处理器。

`xsl:analyze-string`仅受 XSLT 2.0+ 支持，这解释了您收到的错误消息。

如果您需要在 .NET 环境中使用 XSLT 2.0 处理器，您可以选择专为 .NET 开发的 Saxon.NET 或 XQSharp XSLT 2.0 处理器之一。

# php - PHP Hbase Thrift 客户端返回数组而不是 TRowResult

> ID：11015454
> 
> 赞同：1
> 
> 时间：2012-06-13T13:04:53.590
> 
> 标签：php, hbase, thrift

我们正在使用 Thrift 客户端从 PHP 访问 Hbase。Hbase 版本是 hbase-0.90.4-cdh3u3。

我的问题（好吧，这更像是一个疑问）是 Thrift API 应该返回`TRowResult`许多方法，例如：`scannerGet`, `getRowWithColumns`... 相反，它返回一个带有单个`TRowResult`实例的数组。

有谁知道这是为什么？这些方法（通常应该返回一行或不返回一行）是否返回多个`TRowResult`实例？我可以简单地在我的包装类中弹出这一行并返回它而不是返回数组（如果有空数组，则返回 null）？

.thrift 文档非常清楚应该返回的内容：

```
/** 
 * Get the specified columns for the specified table and row at the latest
 * timestamp. Returns an empty list if the row does not exist.
 * 
 * @return TRowResult containing the row and map of columns to TCells
 */
list<TRowResult> getRowWithColumns( 
```

[...]

```
/**
 * Returns the scanner's current row value and advances to the next
 * row in the table.  When there are no more rows in the table, or a key
 * greater-than-or-equal-to the scanner's specified stopRow is reached,
 * an empty list is returned.
 *
 * @return a TRowResult containing the current row and a map of the columns to TCells.
 *
 * @throws IllegalArgument if ScannerID is invalid
 *
 * @throws NotFound when the scanner reaches the end
 */
list<TRowResult> scannerGet( 
```

（虽然`@throws NotFound`已经过时了）

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T10:58:30.057

有 getRows() 和scannerGetList() 方法，它们返回TRowResult 对象的数组。我用的是cdh3u4的hbase，不知道cdh3u3中是否存在这些方法。顺便说一句，cdh4 应该已经包含 hbase 0.92 并支持扫描过滤器；）

# wcf - 更改 WCF 响应中的前缀

> ID：11015455
> 
> 赞同：2
> 
> 时间：2012-06-13T13:05:00.303
> 
> 标签：wcf

从我的 Web 应用程序调用时，我得到的 WCF 响应是：

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
  <s:Header />
  <s:Body>
   <getSOAPDataResponse xmlns="http://localhost/WebServices">
   <getSOAPDataResult> INFORMATION </getSOAPDataResult>
   </getSOAPDataResponse>
  </s:Body>
</s:Envelope> 
```

Web 应用程序非常旧，并且有一些硬编码的东西，在响应中寻找“Soap”作为前缀。以前使用 Web 服务，但现在 Web 服务已迁移到 WCF 服务。

WCF 的预期响应是这样的：

```
<Soap:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
 <Soap:Header />
 <Soap:Body>
  <getSOAPDataResponse xmlns="http://localhost/WebServices">
  <getSOAPDataResult> INFORMATION </getSOAPDataResult>
  </getSOAPDataResponse>
 </Soap:Body>
</Soap:Envelope> 
```

所以我需要将 WCF 响应前缀“S”更改为“Soap”。如何做呢。任何帮助将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T13:11:54.707

[这篇博文](http://blogs.msdn.com/b/carlosfigueira/archive/2010/06/13/changing-prefixes-in-xml-responses.aspx)解决了您的确切问题。您基本上需要创建一个自定义消息编码器。但请注意，如果您使用`WsHttpBinding`消息安全性，则帖子中的方法将不起作用。如果您使用`BasicHttpBinding`，请参阅文章末尾的评论（您需要确保替换正确的文本，因为基本绑定使用 SOAP 1.1，而 WS 绑定使用 SOAP 1.2）。

# git - 每个项目都有一个单独的 git 用户

> ID：11015456
> 
> 赞同：1
> 
> 时间：2012-06-13T13:05:04.167
> 
> 标签：git, project

是否有可能在某个 user.name 和 user.email 下拥有一些项目以及其他具有其他 git 用户设置的项目。

根据我必须处理的项目类型，我想在两个不同的用户名下进行开发。你知道它是否以及如何可能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T13:13:42.910

要为单个存储库设置用户名和电子邮件，您可以使用与正常相同的命令（`git config --global user.email "EMAIL"`和`git config --global user.name "NAME"`），但没有全局标志（即`git config user.email "EMAIL"`和`git config user.name "NAME"`）。这会将您的用户名和电子邮件设置为您仅为当前存储库指定的任何值。

# xslt - 如何找到带连字符的单词？

> ID：11015459
> 
> 赞同：2
> 
> 时间：2012-06-13T13:05:07.377
> 
> 标签：xslt, xslt-2.0

是否可以找到用连字符分隔的单词并用一些标签包围它们？

输入

```
<root>
    text text text-with-hyphen text text    
</root> 
```

所需输出

```
<outroot>
    text text <sometag>text-with-hyphen</sometag> text text
</outroot> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T13:20:10.153

**这个 XSLT 2.0 转换**：

```
<xsl:stylesheet version="2.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="root/text()">
  <xsl:analyze-string select="." regex="([^ ]*\-[^ ]*)+">
   <xsl:matching-substring>
     <sometag><xsl:value-of select="."/></sometag>
   </xsl:matching-substring>
   <xsl:non-matching-substring>
     <xsl:value-of select="."/>
   </xsl:non-matching-substring>
  </xsl:analyze-string>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<root>
    text text text-with-hyphen text text
</root> 
```

**产生想要的正确结果：**

```
<root>
    text text <sometag>text-with-hyphen</sometag> text text
</root> 
```

**说明**：

正确使用 XSLT 2.0**[`<xsl:analyze-string>`](http://www.w3.org/TR/2007/REC-xslt20-20070123/#analyze-string)**指令及其允许的子指令。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T13:36:36.107

刚刚检查，它工作。所以背后的想法是在整个文本上创建递归迭代。并在递归步骤中使用 XPath 函数`contains`检测单词（参见 的用法`$word`）是否包含连字符：

```
<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:template match="/root">
        <outroot>
            <xsl:call-template name="split-by-space">
                <xsl:with-param name="str" select="text()"/>
            </xsl:call-template>
        </outroot>
    </xsl:template>
    <xsl:template name="split-by-space"> <!-- mode allows distinguish another tag 'step'-->
        <xsl:param name="str"/>
        <xsl:if test="string-length($str)"><!-- declare condition of recursion exit-->
        <xsl:variable name="word"> <!-- select next word -->
            <xsl:value-of select="substring-before($str, ' ')"/>
        </xsl:variable>
        <xsl:choose>
            <xsl:when test="contains($word, '-')"> <!-- when word contains hyphen -->
                <sometag>
                <xsl:value-of select='concat(" ", $word)'/><!-- need add space-->
                </sometag>
            </xsl:when>
            <xsl:otherwise>
                <!-- produce normal output -->
                <xsl:value-of select='concat(" ", $word)'/><!-- need add space-->
            </xsl:otherwise>
        </xsl:choose>
        <!-- enter to recursion to proceed rest of str-->
        <xsl:call-template name="split-by-space">
            <xsl:with-param name="str"><xsl:value-of select="substring-after($str, ' ')"/></xsl:with-param>
        </xsl:call-template>
        </xsl:if>
    </xsl:template>
</xsl:stylesheet> 
```

# opengl-es - 如何在lhs和rhs之间转换opengl投影矩阵？

> ID：11015461
> 
> 赞同：2
> 
> 时间：2012-06-13T13:05:18.460
> 
> 标签：opengl-es, opengl-es-2.0, projection-matrix

我有一个 lhs 着色器，但碰巧有一个 rhs 投影矩阵，如何在它们之间进行转换？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T17:12:45.397

来自 Qt 的代码：

```
/*!
    Flips between right-handed and left-handed coordinate systems
    by multiplying the y and z co-ordinates by -1\.  This is normally
    used to create a left-handed orthographic view without scaling
    the viewport as ortho() does.

    \sa ortho()
*/
void QMatrix4x4::flipCoordinates()
{
    if (flagBits == Scale || flagBits == (Scale | Translation)) {
        m[1][1] = -m[1][1];
        m[2][2] = -m[2][2];
    } else if (flagBits == Translation) {
        m[1][1] = -m[1][1];
        m[2][2] = -m[2][2];
        flagBits |= Scale;
    } else if (flagBits == Identity) {
        m[1][1] = -1.0f;
        m[2][2] = -1.0f;
        flagBits = Scale;
    } else {
        m[1][0] = -m[1][0];
        m[1][1] = -m[1][1];
        m[1][2] = -m[1][2];
        m[1][3] = -m[1][3];
        m[2][0] = -m[2][0];
        m[2][1] = -m[2][1];
        m[2][2] = -m[2][2];
        m[2][3] = -m[2][3];
        flagBits = General;
    }
} 
```

# f# - F# 中的泛型类型注释

> ID：11015465
> 
> 赞同：3
> 
> 时间：2012-06-13T13:05:49.973
> 
> 标签：f#

我收到以下错误：

> 错误 2 值限制。该值`'gbmLikelihood'`已被推断为具有泛型类型 `val gbmLikelihood : (float -> '_a -> float [] -> float) when '_a :> seq<float>` 将参数设为`'gbmLikelihood'`显式，或者，如果您不打算使其成为泛型，请添加类型注释。

而这种类型正是我想要的。我必须做些什么才能让它工作，为什么它在没有干预的情况下不能工作？

编辑：
错误来自这个文件（它很短，所以我粘贴了整个文件）：

```
module Likelihood
open System

let likelihood getDrift getVol dt data parameters =
    let m = getDrift data parameters
    let s =  getVol data parameters
    let N = float (Seq.length data)
    let sqrt_dt = Math.Sqrt dt
    let constant = -0.5*Math.Log(2.0*Math.PI*dt)*N
    let normalizedResidue observation = (observation - (m - 0.5*s*s)*dt)/(s*sqrt_dt) 
    let residueSquared observation = 
        let r = normalizedResidue observation in r*r
    let logStdDev = Math.Log s
    constant - logStdDev*N - 0.5* (data |> Seq.sumBy residueSquared) 

let gbmLikelihood = likelihood (fun data p -> Array.get p 0) (fun datac p -> Array.get p 1) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-13T13:12:48.880

当您声明具有泛型类型的*值*时，可能会发生此错误。例如，参见[过去的 SO question](https://stackoverflow.com/questions/4047308/keeping-partially-applied-function-generic)。在您的情况下，该类型表明您正在尝试定义一个函数，但编译器并不将其视为句法函数。如果您执行一些效果，然后使用 lambda 语法返回函数，就会发生这种情况：

```
let wrong = 
  printfn "test"
  (fun x -> x) 
```

为避免该问题，您需要使用函数语法编写函数：

```
printfn "test"
let wrong x = x 
```

**编辑：**在您的具体示例中，该函数`gbmLikelihood`是作为部分函数应用程序的结果创建的。要使其编译，您需要将其转换为显式函数：

```
let gbmLikelihood parameters = 
  likelihood (fun data p -> Array.get p 0) (fun datac p -> Array.get p 1) parameters 
```

有关为什么会出现这种情况及其工作原理的更多信息，另请参阅[这篇关于 F# 中的值限制的精彩文章](http://blogs.msdn.com/b/mulambda/archive/2010/05/01/value-restriction-in-f.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-13T17:13:45.830

除了将参数`gbmLikelihood`设为显式之外，您还可以只向函数添加泛型类型注释：

```
let gbmLikelihood<'a> = 
    likelihood (fun data p -> Array.get p 0) (fun datac p -> Array.get p 1) 
```

# php - 在 MySQL 数据库中存储数据的最佳方法

> ID：11015466
> 
> 赞同：0
> 
> 时间：2012-06-13T13:05:50.640
> 
> 标签：php, mysql, storage

晚上，

我没有接受过数据库方面的培训，我有点迷茫。

基本上我有这些数据：

```
Game
    name_of_game varchar(?);
    screen_shots ?
         screen_shot_1
         screen_shot_2
              ...
         screen_shot_n
/Game 
```

存储 screen_shot_n 数据的最佳方式是什么？

我是否尝试使用序列化数组？还是我需要尝试制作另一张桌子并将其存储在那里？顺便说一句，有 30k 的“游戏”

我正在使用 PHP 和 MySQL，如果这有帮助的话......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T13:10:39.423

我可能会使用单独的屏幕截图表。

*游戏桌*

```
game_id integer
name varchar 
```

*截图表*

```
screenshot_id integer
game_id integer
screenshot varchar <--- a file name (or a blob or however you are storing the screenshot) 
```

然后你可以找到游戏的截图：

```
SELECT * FROM screenshots WHERE game_id="123"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T13:10:40.940

在 MySQL 中存储图像不是一个好主意。我建议您为游戏名称和游戏 ID 保留一个主表，然后将游戏 ID 和时间戳（带有可选的随机键）存储在另一个表中。将屏幕截图以 timestamp.jpg 格式存储在文件夹中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T13:10:04.613

您将需要创建一个 bin 类型字段，并将数据存储在那里，

虽然是它的二进制数据，但也许只是使用本地存储并从数据库链接到它？

您可以 .htaccess 它来保护目录并使用 PHP 流式传输内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T13:10:41.750

将它们存储在单独的表中。像这样的东西：

表 1：GameInfo 字段：gameid int、nameofgame varchar(X)

表 2：GameScreenShots 字段：ID int、gameid int、screenshotimage ??(X)

您需要在桌子上放置 ID，以便您可以参考游戏桌的屏幕截图。我建议它们是整数，因为使用游戏名称作为 id 可能会很棘手。根据您是否存储屏幕截图的实际图像或图像链接将确定您的屏幕截图图像字段的类型。

# javascript - Javascript - 检查数组的值

> ID：11015469
> 
> 赞同：39
> 
> 时间：2012-06-13T13:05:58.943
> 
> 标签：javascript, arrays

我有一个带有银行假期的简单数组：

```
var bank_holidays = ['06/04/2012','09/04/2012','07/05/2012','04/06/2012','05/06/2012','27/08/2012','25/12/2012','26/12/2012','01/01/2013','29/03/2013','01/04/2013','06/05/2013','27/05/2013']; 
```

我想做一个简单的检查，看看某些日期是否作为该数组的一部分存在，我尝试过：

```
if('06/04/2012' in bank_holidays) { alert('LOL'); }
if(bank_holidays['06/04/2012'] !== undefined) { alert 'LOL'; } 
```

还有其他一些没有乐趣的解决方案，我还尝试用简单的“x”替换所有转发的斜杠，以防引起问题。

任何建议将不胜感激，谢谢！

（编辑）这是一个**jsFiddle** - [http://jsfiddle.net/ENFWe/](http://jsfiddle.net/ENFWe/)

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-06-13T13:07:42.657

如果您不关心旧版浏览器：

```
if ( bank_holidays.indexOf( '06/04/2012' ) > -1 ) 
```

如果您*确实*关心旧版浏览器，可以在[MDN](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/indexOf)上找到一个 shim 。否则，jQuery 提供了一个等效的函数：

```
if ( $.inArray( '06/04/2012', bank_holidays ) > -1 ) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-13T13:09:50.393

尝试这个：

```
// this will fix old browsers
if (!Array.prototype.indexOf) {
  Array.prototype.indexOf = function(value) {
    for (var i = 0; i < this.length; i++) {
      if (this[i] === value) {
        return i;
      }
    }

    return -1;
  }
}

// example
if ([1, 2, 3].indexOf(2) != -1) {
  // yay!
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-13T13:10:35.277

这应该这样做：

```
for (var i = 0; i < bank_holidays.length; i++) {
    if (bank_holidays[i] === '06/04/2012') {
        alert('LOL');
    }
} 
```

[jsFiddle](http://jsfiddle.net/ENFWe/4/)

# c# - MonoTouch 中#define 和#ifdef 的实现

> ID：11015473
> 
> 赞同：1
> 
> 时间：2012-06-13T13:06:04.577
> 
> 标签：c#, objective-c, xamarin.ios

我是 monoTouch 的新手。我在 Objective-C 中有一个名为“TargetConditions.h”的文件。我正在尝试使用“TargetConditions.h”中的#define 衍生物。但是，我无法将这些东西放入 MonoTouch。这是东西的清单，

```
#define TARGET_OS_MAC 1
#define TARGET_OS_WIN32 0
#define TARGET_OS_UNIX 0
#define TARGET_OS_EMBEDDED 0
#define TARGET_OS_IPHONE 1 
#define TARGET_IPHONE_SIMULATOR 1

#ifdef __MACH__
#define TARGET_RT_MAC_MACHO 1
#define TARGET_RT_MAC_CFM 0
#else
#define TARGET_RT_MAC_MACHO 0
#define TARGET_RT_MAC_CFM 1
#endif 
```

如何将所有#define 值集成到 MonoTouch 中？请帮我解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T14:31:58.467

您将这些替换为类中的常量定义。

```
public const int TARGET_OS_MAC = 1; 
public const int TARGET_OS_WIN32 = 0; 
public const int TARGET_OS_UNIX = 0; 
public const int TARGET_OS_EMBEDDED = 0; 
public const int TARGET_OS_IPHONE = 1;  
public const int TARGET_IPHONE_SIMULATOR = 1; 

#if __MACH__ 
    public const int TARGET_RT_MAC_MACHO = 1; 
    public const int TARGET_RT_MAC_CFM = 0; 
#else 
    public const int TARGET_RT_MAC_MACHO = 0; 
    public const int TARGET_RT_MAC_CFM = 1; 
#endif 
```

# iphone - 自定义单元格：将表格视图添加到表格视图的单元格

> ID：11015474
> 
> 赞同：0
> 
> 时间：2012-06-13T13:06:05.067
> 
> 标签：iphone, ios, ipad, uitableview

是否可以在表格视图的单元格上添加表格视图？如果是，那么如何执行，提供一些逻辑......要求是单元格中添加的表格视图必须是网格格式 ![在此处输入图像描述](../Images/69b453fdeedd5d329ee7d0f94dd73fd8.png)

“网格格式的可点击文本跳转到新视图”如图所示，该区域我想使其成为表格视图......这也应该是可滚动的......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T05:50:29.787

我得到了我的问题的解决方案，只需创建一个自定义单元类即可实现。在那里，我们可以通过将表格视图连接到 xib 上的自定义类来放置表格视图并为自定义类提供单元格表格的引用。

# c++ - sockaddr_in 获取错误的 IP 地址，cpp

> ID：11015475
> 
> 赞同：0
> 
> 时间：2012-06-13T13:06:05.210
> 
> 标签：c++, sockets

我正在尝试实现一个连接到给定地址的简单客户端。您会注意到，在将给定地址、IP 地址和端口放入我的 sockaddr_in 结构后，我正在打印它。我得到两个不同的地址，即使它应该是相同的。

这是我的代码：

```
int createConnection(char * address, char * port) {
    cout << address << " " << port << endl;
    struct sockaddr_in server;
    server.sin_family = AF_INET;
    server.sin_port = htons(atoi(port));
    inet_aton(address,&(server.sin_addr));
    memset(&(server.sin_zero), '\0', 8);
    if ((sockFd = socket(PF_INET,SOCK_STREAM,0)) == -1) {
        perror("client: socket");
    }
    if (connect(sockFd,(const sockaddr *)&server,sizeof(struct sockaddr_in)) == -1) {
        close(sockFd);
        perror("client: connect");
    }

    char s[INET_ADDRSTRLEN];
    inet_ntop(AF_INET, (struct sockaddr *)&server, s, sizeof s);
    printf("client: connecting to %s, %i\n", s, server.sin_port);
    printf("connected");
    return 0;
} 
```

输出是

```
132.65.151.39 3000
client: connecting to 2.0.11.184, 47115 
```

我的问题：

1.  为什么我看到两个不同的地址？
2.  为什么连接不失败？

发生的事情是我的程序稍后在 recv() 中被阻止，所以我认为它没有连接到我想要的位置。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T13:10:54.917

看起来您将错误的东西传递给`inet_ntop()`：

```
inet_ntop(AF_INET, (struct sockaddr *)&server, s, sizeof s); 
```

您可能应该通过`.sin_addr`：

```
inet_ntop(AF_INET, &server.sin_addr, s, sizeof s); 
```

对于端口，它打印错误，因为您需要调用`ntohs()`以转换回主机字节顺序：

```
printf("client: connecting to %s, %i\n", s, ntohs(server.sin_port)); 
```

实际上，连接有效，大概是因为地址*设置正确。*

# qt - cv::Mat 到 QImage 的转换

> ID：11015481
> 
> 赞同：5
> 
> 时间：2012-06-13T13:06:24.757
> 
> 标签：qt, opencv

我发现了非常相似的主题：[如何将 opencv cv::Mat 转换为 qimage](https://stackoverflow.com/questions/5026965/how-to-convert-an-opencv-cvmat-to-qimage)，但这并不能解决我的问题。

我有将 cv::Mat 转换为 QImage 的函数

```
QImage cvMatToQImg(cv::Mat& mat)
{
    cv::Mat rgb;
    if(mat.channels()==1)
    {
        cv::cvtColor(mat,rgb,CV_GRAY2BGR);
        cv::cvtColor(rgb,rgb,CV_BGR2BGRA);
        QImage temp = QImage((unsigned char*)(rgb.data), rgb.cols, 
                              rgb.rows,QImage::Format_ARGB32 );

        QImage returnImage = temp.copy();
        return returnImage;
} 
```

它对我有用，但我想让它更有效率。第一：为什么要改变 2 个 cvtColor 函数：

```
cv::cvtColor(mat,rgb,CV_GRAY2BGRA) 
```

失败

```
QImage returnImage = temp.copy() 
```

有段错误。

那么如何消除QImage的复制。当我简单地返回临时图像时，我遇到了段错误。

可以在那里进行任何其他优化吗？这是非常常用的功能，所以我想尽可能快地使用它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T15:22:50.583

推出自己的解决方案可能是最容易的。下面是从灰色到 RGBA 格式的当前 OpenCV 实现：

```
template<typename _Tp>
struct Gray2RGB
{
    typedef _Tp channel_type;

    Gray2RGB(int _dstcn) : dstcn(_dstcn) {}
    void operator()(const _Tp* src, _Tp* dst, int n) const
    {
        if( dstcn == 3 )
            for( int i = 0; i < n; i++, dst += 3 )
            {
                dst[0] = dst[1] = dst[2] = src[i];
            }
        else
        {
            _Tp alpha = ColorChannel<_Tp>::max();
            for( int i = 0; i < n; i++, dst += 4 )
            {
                dst[0] = dst[1] = dst[2] = src[i];
                dst[3] = alpha;
            }
        }
    }

    int dstcn;
}; 
```

这里是实际的[cvtColor](http://docs.opencv.org/modules/imgproc/doc/miscellaneous_transformations.html?highlight=cvtcolor#void%20cvtColor%28InputArray%20src,%20OutputArray%20dst,%20int%20code,%20int%20dstCn%29)调用发生的地方：

```
 case CV_GRAY2BGR: case CV_GRAY2BGRA:
        if( dcn <= 0 ) dcn = 3;
        CV_Assert( scn == 1 && (dcn == 3 || dcn == 4));
        _dst.create(sz, CV_MAKETYPE(depth, dcn));
        dst = _dst.getMat();

        if( depth == CV_8U )
            CvtColorLoop(src, dst, Gray2RGB<uchar>(dcn)); 
```

此代码包含在库中的[color.cpp](http://code.opencv.org/projects/opencv/repository/entry/trunk/opencv/modules/imgproc/src/color.cpp)文件中`imgproc`。

如您所见，由于您没有`dstCn`在调用中设置参数`cvtColor`，因此默认为`dcn = 3`. 要直接从灰色变为 BGRA，请设置`dstCn`为 4。由于 OpenCV 的默认颜色顺序是 BGR，您仍然需要交换颜色通道以使其看起来正确（假设您从 OpenCV 函数获取图像数据）。[因此，可能按照上面的示例或在此处](https://stackoverflow.com/a/8866986/951860)`ypnos`使用answer来实现您自己的转换器可能是值得的。

另外，请查看我的其他[答案](https://stackoverflow.com/questions/7801522/integrating-opencv-with-larger-programs/7801704#7801704)，其中涉及如何将 OpenCV 与 Qt 集成。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-13T16:08:30.610

您对问题的解决方案效率不高，特别是效率低于我在您链接到的另一个问题上发布的代码。

您的问题是您必须从灰度转换为彩色或 RGBA。一旦你需要这个对话，自然就需要一份数据副本。

我的解决方案同时进行灰度和颜色之间的转换，以及 cv::Mat 和 QImage 之间的转换。这就是为什么它是你能得到的最有效的。

在您的解决方案中，您首先尝试转换，然后想要直接围绕 OpenCV 数据构建 QImage 以节省第二个副本。但是，您指向的数据是临时的。一旦你离开这个函数，cv::Mat 就会释放它的相关内存，这就是为什么它在 QImage 中也不再有效的原因。您可以事先手动增加 cv::Mat 的引用计数器，但这为之后的内存泄漏打开了大门。

最后，你尝试用一种肮脏的解决方案来解决一个以干净的方式更好地解决的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T15:51:19.863

问题是 cv::Mat 和 QImage 数据不一定是连续的。opencv 中的新数据行从 32 位边界开始（不确定 QImage - 我认为它取决于系统），因此您无法复制内存块，除非您的行恰好是 4 字节的精确倍数

请参阅[如何在 Qt 中输出此 24 位图像](https://stackoverflow.com/questions/4730563/how-to-output-this-24-bit-image-in-qt)

# linq - 刷新 LINQ 数据库连接对象

> ID：11015482
> 
> 赞同：0
> 
> 时间：2012-06-13T13:06:25.787
> 
> 标签：linq, database-connection

我的同事帮助我开始使用 c# 编程，虽然我没有经验，但我喜欢它。一切都很顺利，直到我遇到了一些我们都无法解决的问题。他自己使用 SQL，但让我开始使用 LINQ。

要进行 LINQ 查询，我使用此对象：_oDBConnection（在 clsApplication.cs 中）因此，当打开程序时，会构建此对象。但它会产生一些问题：

*   保存新对象（将数据放入表中）时，我无法通过查询加载这些值。我需要重新启动程序。
*   当运行程序的 2 个实例时，一个在另一个实例中更改时没有获得最新的值（但它显示的是新的值，而不是更改的值！）

根据这些问题，我只能得出结论，当我第二次调用 clsApplication._oDBConnection.tblTAble 时，它​​不会再次重新链接到数据库，而是将旧的数据库状态返回给我。

这是他构建的代码：

```
public static DBReservationDataContext _oDBConnection;
private static frmMain _fMain;
public clsApplication()
{
    Thread.CurrentThread.Name = "main";
    clsErrorLog.ErrorLocation = "C:\\Software\\ErrorLog";
    clsErrorLog.setPassword("*****");
    clsErrorLog.LockApplication += new clsErrorLog.dLockApplication(lockApplication);

    _oDBConnection = new DBReservationDataContext();

    _fMain = new frmMain();
    _fMain.Show();
} 
```

我能做些什么来解决这个问题？

例子：

虽然存在于数据库中，但它在此查询中崩溃，因为未找到具有 id == iID 的实体。但是 iID 是正确的，并且它确实存在于数据库中。关闭并重新启动程序后，查询将起作用。然后再次调用 clsApplication。

```
public clsReservationDetail(int iID)
    :this()
{
    _oReservationDetail = (from oReservationDetailQuery in clsApplication._oDBConnection.tblReservationDetails
            where oReservationDetailQuery.ID == iID
            select oReservationDetailQuery).First();
} 
```

提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T20:25:03.370

您的数据上下文将有一个`Refresh`方法可以清除任何缓存的结果，并且应该允许您的查询顺利完成

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T21:05:22.737

static 关键字使您可以为每个 AppDomain 提供一个引用。这是使用 DataContext 实例的错误方法。

**DataContext 的每个实例都会跟踪它所看到的对象**。这是为了一致性。如果您从一个查询中获得 CustomerID = 4 的 Customer 实例，您应该从另一个返回 CustomerID = 4 记录的查询中获得**相同的 Customer 实例。**

如果要查看数据库中的更改，则必须

1）告诉数据上下文停止跟踪更改。这必须在第一次查询之前完成，并使 datacontext 实例无法`SubmitChanges`（因为它无法再跟踪它们）。

或者

2）将数据上下文告诉`Refresh`您怀疑已更改的每个实例。如果这样做，您应该指定如何解决本地更改和远程更改之间的冲突 - 解决此冲突的最简单方法是不进行本地更改。

或者

3）（正确的方法）创建一个新的 DataContext 实例并用它加载记录！

另请注意：由于 DataContext 实现`IDisposable`，**即使发生异常，****您也需要`Dispose`**在完成每个实例时调用。阻止是实现这一目标的好方法。**`using`**

# eclipse - 将运行时设置为 IFacetedProject

> ID：11015483
> 
> 赞同：0
> 
> 时间：2012-06-13T13:06:37.970
> 
> 标签：eclipse, runtime, rcp, eclipse-wtp, pde

我编写了一个 Eclipse 插件，它使用来自 Eclipse WTP 的 API 创建了一个新的“EAR 应用程序项目”。我在为这个新项目设置“运行时”值时遇到了一些困难。

当我使用 Eclipse GUI（作为“普通”用户）创建同一个项目时，这就是“org.eclipse.wst.common.project.facet.core.xml”的内容：

```
<?xml version="1.0" encoding="UTF-8"?>
<faceted-project>
  <runtime name="GlassFish 3.1.2"/>
  <fixed facet="jst.ear"/>
  <installed facet="jst.ear" version="6.0"/>
  <installed facet="sun.facet" version="9"/>
</faceted-project> 
```

但是在创建 Faceted 项目时（使用 WTP 插件提供的 API），我找不到为我的 EAP 项目设置以下值的方法：

```
 <runtime name="GlassFish 3.1.2"/>
  <fixed facet="jst.ear"/> 
```

以下是我以编程方式创建此项目时编写的相同 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<faceted-project>
  <installed facet="jst.ear" version="6.0"/>
  <installed facet="sun.facet" version="9"/>
</faceted-project> 
```

这是我创建这个项目的方式：

```
 IFacetedProject facetedProject = ProjectFacetsManager.create("prj1", new Path(prj), null);
        IFacetedProjectWorkingCopy workingCopy = facetedProject.createWorkingCopy();

        IProjectFacet jstFacet = ProjectFacetsManager.getProjectFacet("jst.ear");
        IProjectFacet sunFacet = ProjectFacetsManager.getProjectFacet("sun.facet");

        IProjectFacetVersion defaultJstFacet = jstFacet.getDefaultVersion();
        IProjectFacetVersion defaultSunFacet = sunFacet.getDefaultVersion();
        workingCopy.addProjectFacet(defaultJstFacet);
        workingCopy.addProjectFacet(defaultSunFacet);
        workingCopy.commitChanges(null); 
```

难道我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T15:05:15.970

要设置固定方面，您需要使用 IFacetedProjectWorkingCopy.setFixedProjectFacets() 方法。

要设置运行时，您需要使用 IFacetedProjectWorkingCopy.setTargetedRuntimes() 方法。您可以通过 RuntimeManager API 定位 IRuntime 实例，例如 getRuntimes() 或 getRuntimes(name)。

# c - 如何确定文件是否为空？

> ID：11015485
> 
> 赞同：8
> 
> 时间：2012-06-13T13:06:40.793
> 
> 标签：c, file-io

如何确定文件是否为空？该文件由在 Windows 平台上运行的 C 程序打开。我想以附加模式打开一个文件，如果为空，首先打印一个标题。

```
// Open CSV & write header
report_csv = fopen("SNR.csv", "a+");
if (!report_csv) {
    fprintf(stderr, "Unable to open CSV output file...");
    return -1;
}
if (!ftell(report_csv)) {
    fprintf(report_csv, "Column A;Column B;Column C\n");
}
// ... print data to file
fclose(report_csv); 
```

如果文件不为空，我希望`ftell`返回当前文件大小，这是因为上面的代码是循环的。

但是，`ftell`总是返回`0`并且标题被打印多次。

我知道我可以`fopen`使用`r`并使用`fseek`//然后再次使用`ftell`，但我认为可以在不多次打开和关闭文件的情况下执行此操作。`fclose``fopen``a+`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T13:41:11.387

实际上，当`fopen`以追加模式读取文件时，文件指针最初位于文件的开头。一旦你写了一些东西或使用它，它就会移动到它的末尾`fseek`。

我只需要`fseek(report_csv, 0, SEEK_END);`在我的`if (!ftell(report_csv))`.

**让我们检查一下。**
*代码*：

```
#include <stdio.h>

int main(int argc, char **argv) {
    FILE *test;
    size_t size;
    char buf[100];

    /* Truncate file */
    test = fopen("test", "w");
    if (!test) {
        fprintf(stderr, "Cannot open file `test`!\n");
        return 1;
    }

    /* Write something */
    fprintf(test, "Something. ");
    fclose(test);

    /* Open in append */
    test = fopen("test", "a+");
    if (!test) {
        fprintf(stderr, "Cannot open `test` in append mode!\n");
        return 1;
    }

    /* Try to get the file size */
    size = ftell(test);
    printf("File pointer is: %d\n", size);
    fseek(test, 0, SEEK_END);
    size = ftell(test);
    printf("After `fseek(test, 0, SEEK_END)`, the file pointer is: %d\n", size);

    /* Append */
    fprintf(test, "And that. ");
    fclose(test);

    /* Same without fseek */
    test = fopen("test", "a+");
    if (!test) {
        fprintf(stderr, "Cannot open `test` in append mode!\n");
        return 1;
    }
    fprintf(test, "Hello! ");
    size = ftell(test);
    printf("File size is now: %d\n", size);
    fclose(test);

    /* Try to read */
    test = fopen("test", "r");
    if (!test) {
        fprintf(stderr, "Unable to open `test` for reading!\n");
        return 1;
    }
    printf("File contents:\n\t");
    while (test && !feof(test)) {
        fgets(buf, sizeof(buf), test);
        printf("%s", buf);
    }

    /* Cleanup & exit */
    fclose(test);
    printf("\n\nExiting.\n");

    return 0;
} 
```

*输出*：

```
File pointer is: 0
After `fseek(test, 0, SEEK_END)`, the file pointer is: 11
File size is now: 28
File contents:
        Something. And that. Hello!

Exiting. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T13:50:42.947

`fopen`使用with模式打开文件时`a+`，所有的写入操作都将在文件末尾执行。您可以将内部指针重新定位到文件中的任何位置以进行读取，但写入操作会将其移回文件末尾。读取的初始指针位置在文件的开头。

所以你需要`fseek(pFile, 0, SEEK_END)`在你的`FILE`指针上调用一个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T13:34:39.790

您可以调用`_stat()`并将值`st_size`放入`struct _stat`（您不需要打开文件）。
在`sys/types.h`后面声明`sys/stat.h`
我不知道 Windows 编程，但它可以帮助你：http: [//msdn.microsoft.com/en-us/library/14h5k7ff.aspx](http://msdn.microsoft.com/en-us/library/14h5k7ff.aspx)

# apache-pig - BagOfBagsConcat 是必要的 UDF 吗？还是形式不好？

> ID：11015493
> 
> 赞同：0
> 
> 时间：2012-06-13T13:07:30.067
> 
> 标签：apache-pig

我设法给自己弄了一袋袋子，每个内袋都包含相同形式的元组：`{({(cow,30),(monkey,20)}),({}),({(duck,3)})}`

所以我创建了一个名为 BagOfBagsConcat 的 UDF，它期望作为参数的确切情况是：一个包含同质包并作为其输出返回的单个包： `{(cow,30),(monkey,20),(duck,3)}`

我环顾四周，发现datafu中只有BagConcat。这是否表明这个功能真的没有必要，一袋袋子只是大自然的怪胎，我必须重新审查我的猪脚本？

谢谢，如果我需要指定创建它的猪脚本以便更清楚，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-19T03:58:16.773

这并不少见。我们也遇到了这个问题，所以我们在 DataFu 中为下一个版本添加了[BagUnion](https://github.com/linkedin/datafu/blob/master/src/java/datafu/pig/bags/BagUnion.java "袋联盟")。正如您所描述的，它就像 BagConcat 一样，只是它对一袋袋子而不是一袋袋子进行操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T14:00:48.377

哎呀。有时left-join比cogroup更好。这创造了一袋袋子：

```
final_output = cogroup final_output by nodeid, new_edges by nodeid1;
final_output = foreach final_output generate flatten($1.hash_id) as hash_id, new_edges;
final_output = cogroup nodes_per_entity by hash_id, final_output by hash_id; 
```

所以我将其更改为：

```
final_output = join final_output by nodeid left, new_edges by nodeid1;
final_output = group final_output by hash_id;
final_output = foreach final_output generate group as hash_id, 
    final_output.(nodeid1, nodeid2, edge_pit, asset_id1, asset_id2) as new_edges; 
```

现在它是一个普通的元组包（尽管其中一些由于左连接而具有空值，但这更容易处理）。

# java - 如何使用 Java 确定曝光过度或曝光不足的图像并进行纠正？

> ID：11015494
> 
> 赞同：1
> 
> 时间：2012-06-13T13:07:32.947
> 
> 标签：java, image-processing

我正在用 Java 做我的项目“换脸系统”。

为此，我需要首先检查图像是曝光不足还是曝光过度，然后分别将其变亮或降低亮度。

有没有办法在 Java 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T13:19:30.983

Java Advanced Imaging API 包括获取直方图的功能。请参阅[JAI 程序员指南](http://docs.oracle.com/cd/E19957-01/806-5413-10/806-5413-10.pdf)。如果图像曝光不足/曝光过度，那么您会发现大多数幅度分别“聚集”在直方图的下端/上端，而不是在整个范围内分布得更多。

要使图像变亮，请查看标准的 Java RescaleOp 类。

JAI 还提供各种增强功能，包括“幅度重新缩放”（实际上是对比度增强）。

还可以查看 JAI 程序员指南中关于直方图均衡化的部分。

# c# - Entity Framework 4 加载并包含组合

> ID：11015508
> 
> 赞同：3
> 
> 时间：2012-06-13T13:08:41.033
> 
> 标签：c#, entity-framework

如果我有 3 张桌子：

表 1、表 2、表 3

并且 Table3 对 Table2 有一个 FK，它对 Table1 有一个 FK

然后我像这样加载我的对象：

```
using(Entities entities = new Entities()
{
     Table1 table = entities.Table1.FirstOrDefault();
     table.Table2.Load();
} 
```

由于 LazyLoading 已关闭，我如何急切地将 table3 加载到 table2。

我知道我可以在 FirstOrDefault 语句中使用 Include，但它会生成一个太大的连接。

**回答**

```
using(Entities entities = new Entities())
{
    Table1 table = entities.Table1.FirstOrDefault();
    var table2 = table.Table2.CreateSourceQuery().Include("Table3")
        .Execute(MergeOption.AppendOnly);
    table.Table2.Attach(table2);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T13:49:56.147

> 由于 LazyLoading 已关闭，我如何急切地将 table3 加载到 table2。

你可以试试：

```
using(Entities entities = new Entities())
{
    Table1 table = entities.Table1.FirstOrDefault();
    table.Table2.CreateSourceQuery().Include("Table3")
        .Execute(MergeOption.AppendOnly);
} 
```

我假设您使用的是派生自 的实体`EntityObject`，而不是 POCO，即`table.Table2`是`EntityCollection<T>`or `EntityReference<T>`。我不能 100% 确定上述代码是否会按预期工作。

# javascript - ember.js 车把 - 在动作助手中使用变量

> ID：11015509
> 
> 赞同：0
> 
> 时间：2012-06-13T13:08:47.663
> 
> 标签：javascript, handlebars.js

我正在尝试为 cms 创建动态菜单。我有存储在数据库中的动作和目标变量，我想将它们传递给动作助手：

```
<li><a href="#" {{action this.action target=this.controllername}}>{{unbound this.name}}</a></li> 
```

我写了上面的代码，我在控制台上收到以下错误：

目标[actionName] 未定义

return target[actionName].call(target, event);

请让我知道这样做的正确方法是什么。

问候， 卡提克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-19T13:19:19.883

我认为在这个 jsfiddle 中，您可以找到问题的答案：

[http://jsfiddle.net/Malkyne/ydTWZ/](http://jsfiddle.net/Malkyne/ydTWZ/)

```
{{#each item in content}}
    <li>
        <a {{action select item}} {{bindAttr class = "item.classNames"}}> 
            {{item.label}}
        </a>
    </li>
{{/each}} 
```

# html - 为什么我的文档模式：HTML5 页面中的 IE7 标准？

> ID：11015513
> 
> 赞同：2
> 
> 时间：2012-06-13T13:09:07.723
> 
> 标签：html, internet-explorer

这是我的源代码：

```
<!DOCTYPE html>
<html>
<head id="ctl00_ctl00_Head1">                
<title>my page</title>   
<link rel="shortcut icon" href="/favicon.ico" />        
<script type="text/javascript" src="/SiteMain/JS/jquery-1.7.2.min.js"></script>
<script type="text/javascript">
jQuery.noConflict();
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T13:18:53.790

因为您正在从本地或 Intranet 服务器查看它，并且您可能勾选了“以兼容模式查看所有 Intranet 页面”设置。

# facebook - Facebook Feed 对话框图像 URL 长度

> ID：11015514
> 
> 赞同：2
> 
> 时间：2012-06-13T13:09:12.470
> 
> 标签：facebook, facebook-graph-api, facebook-social-plugins

代码：

```
FB.ui({
        method: 'feed',
        name: "Test Name",
        link: "http://www.facebook.com",
        picture: "https://www.rwe-smarthome.de/is-bin/intershop.static/WFS/RWEEffizienz-SmartHome-Site/RWEEffizienz-SmartHome/de_DE/Energiesparpaket%20plus/Energiesparpaket-Plus_170px_198px.png",
        caption: '',
        description: "Some description goes here",
    },function(response) {
        if (response && response.post_id) {
            //alert('Post was published.');
        } else {
            //alert('Post was not published.');
        }
    }); 
```

上面的代码显示了一个 facebook 提要对话框，但没有图像。我认为问题在于图片参数的长度。将图片 URL 替换为任何其他短图像 URL 即可。我无法更改图片 URL，因为它来自网络服务。图片 url 的 Facebook 提要对话框是否有任何长度限制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T13:28:13.683

尝试将参数设置为图像的非 HTTPS 版本。

# sql-server - 特定日期格式

> ID：11015516
> 
> 赞同：0
> 
> 时间：2012-06-13T13:09:18.710
> 
> 标签：sql-server, sql-server-2008, date-formatting

下面就为大家简单介绍一下。

我需要将结果转换成`GetDate()`这种格式：`YYYY-MM-DD`直接在 SQLServer2008 中。

[但我在这里](http://msdn.microsoft.com/en-us/library/ms187928.aspx)找不到我要找的那个。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T13:11:02.647

诀窍是截断以您想要的格式开头的文件。一种方法是将其转换为仅包含所需字符数量的字符串类型：

```
SELECT CONVERT(CHAR(10), GETDATE(), 120); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T18:26:06.307

请参阅下面用于转换日期信息的格式

![在此处输入图像描述](../Images/9afe36acef9e7ee8389df33600767743.png) ![在此处输入图像描述](../Images/79b9ad3ef8e7f137785764e5da001fc9.png)

# video - 如何摆脱anyslider中视频上的垂直滚动条？

> ID：11015518
> 
> 赞同：0
> 
> 时间：2012-06-13T13:09:26.267
> 
> 标签：video, scrollbar, anythingslider

我在开发中有一个简单的anythingSlider 构建。到目前为止一切都很好，除非我尝试将视频元素放在同一个滑块内的静态图像中间。

有一个仅在视频幻灯片期间出现的垂直滚动条。关于如何摆脱这种情况的任何建议？

在较早的尝试中，我减小了视频的大小（与可以在下面的链接上查看的内容相比，减少了当前观看大小的一半），但滚动条仍然存在 - 它只是与其他所有内容一起变小了。

感谢您提供的任何意见。

链接： [http ://sitedev.lcadfiles.com/branding_rad.html](http://sitedev.lcadfiles.com/branding_rad.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T14:15:19.513

我看到每个面板的设置高度为580x450，但实际上在`resizeContents`选项时会被忽略`false`。面板将调整大小以适合其内容。我看到视频大小与预期的面板大小不匹配：

```
<video id="inslide" width="580" height="320" controls="" loop="" poster="../img/radians-bran.jpg" preload="auto" > 
```

所以最简单的选择是将`resizeContents`选项设置为`true`OR，在 css 中更改`overflow-y`为：`hidden`

```
#slider, #slider li {
  width: 580px;
  height: 450px;
  list-style: none;
  overflow-y: hidden;
  overflow-x: hidden;
} 
```

但是如果用户禁用了 javascript，这样做会隐藏除第一张图像之外的所有图像。

# jquery - 用于获取组合框值的 Jquery 选择器在 IE 8.0.7 中不起作用...版本

> ID：11015519
> 
> 赞同：1
> 
> 时间：2012-06-13T13:09:35.877
> 
> 标签：jquery

`$("select#promoProductList_length").val();`

上面的代码在所有浏览器（Firefox、chrome、IE）中都可以正常工作，除了某些特定版本的 IE 8。

这在那些浏览器中给出了未定义的值。

所以我实施了一些解决方法。

IE，

```
$("#promoProductList_length option:selected").text(); 
```

它工作正常。

第一行在某些特定版本的 IE 中不起作用的原因是什么？

# c# - 在 C# 中使用 match 提取两个字符串分隔符之间的字符串内容

> ID：11015527
> 
> 赞同：0
> 
> 时间：2012-06-13T13:09:53.187
> 
> 标签：c#, regex, match

所以，假设我正在解析以下 HTML 字符串：

```
<html>
    <head>
        RANDOM JAVASCRIPT AND CSS AHHHHHH!!!!!!!!
    </head>
    <body>
        <table class="table">
            <tr><a href="/subdir/members/Name">Name</a></tr>
            <tr><a href="/subdir/members/Name">Name</a></tr>
            <tr><a href="/subdir/members/Name">Name</a></tr>
            <tr><a href="/subdir/members/Name">Name</a></tr>
            <tr><a href="/subdir/members/Name">Name</a></tr>
            <tr><a href="/subdir/members/Name">Name</a></tr>
            <tr><a href="/subdir/members/Name">Name</a></tr>
            <tr><a href="/subdir/members/Name">Name</a></tr>
            <tr><a href="/subdir/members/Name">Name</a></tr>
            <tr><a href="/subdir/members/Name">Name</a></tr>
        </table>
    <body>
</html> 
```

我想隔离******的内容（表类中的所有内容）

现在，我使用正则表达式来完成此操作：

```
string pagesource = (method that extracts the html source and stores it into a string);
string[] splitSource = Regex.Split(pagesource, "<table class=/"member/">;
string memberList = Regex.Split(splitSource[1], "</table>");
//the list of table members will be in memberList[0];
//method to extract links from the table
ExtractLinks(memberList[0]); 
```

我一直在寻找其他方法来进行这种提取，并且在 C# 中遇到了 Match 对象。

我正在尝试做这样的事情：

```
Match match = Regex.Match(pageSource, "<table class=\"members\">(.|\n)*?</table>"); 
```

以上的目的是**希望**提取两个分隔符之间的匹配值，但是，当我尝试运行它时，匹配值是：

```
match.value = </table> 
```

因此，我的问题是：有没有一种方法可以从我的字符串中提取数据，它比我使用正则表达式的方法更容易/更易读/更短？对于这个简单的例子，正则表达式很好，但对于更复杂的例子，我发现自己在我的屏幕上到处都是涂鸦的代码。

我真的很想使用 match，因为它看起来是一个非常整洁的类，但我似乎无法让它满足我的需要。谁能帮我这个？

非常感谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T13:13:11.803

使用 HTML 解析器，例如[HTML Agility Pack](http://htmlagilitypack.codeplex.com/)。

```
var doc = new HtmlDocument();

using (var wc = new WebClient())
using (var stream = wc.OpenRead(url))
{
    doc.Load(stream);
}

var table = doc.DocumentElement.Element("html").Element("body").Element("table");
string tableHtml = table.OuterHtml; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T13:19:49.717

您可以将 XPath 与 HTmlAgilityPack 一起使用：

```
HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
doc.LoadHtml(s);
var elements = doc.DocumentNode.SelectNodes("//table[@class='table']");

foreach (var ele in elements)
{
    MessageBox.Show(ele.OuterHtml);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T13:20:59.460

您已在正则表达式中添加括号以捕获匹配项：

`Match match = Regex.Match(pageSource, "<table class=\"members\">(.|\n*?)</table>")`;

无论如何，似乎只有 Chuck Norris 可以正确解析带有正则表达式的 HTML。

# java - 如何准备 List 类型的参数 , ?>>

> ID：11015529
> 
> 赞同：1
> 
> 时间：2012-06-13T13:10:03.763
> 
> 标签：java, generics, guava, covariance

目标是编写一个方便的方法，该方法使用简单的客户端调用表单从 JDBC 查询返回 ResultSet。

我写了这样的东西：

```
public class JdbcQueryManager {
  public static ResultSet executePreparedStatementWithParameters(
      Connection jdbcConnection, String sqlQuery,
      Map.Entry<? extends Class<?>, ?>... sqlQueryParameters)
      throws JdbcQueryFailureException {
    return executePreparedStatementWithParameters(jdbcConnection, sqlQuery,
        Arrays.asList(sqlQueryParameters), ResultSet.TYPE_FORWARD_ONLY,
        ResultSet.CONCUR_READ_ONLY, ResultSet.CLOSE_CURSORS_AT_COMMIT);
  }
  private static ResultSet executePreparedStatementWithParameters(
      Connection jdbcConnection, String sqlQuery,
      List<Map.Entry<? extends Class<?>, ?>> sqlQueryParameters,
      int resultSetType, int resultSetConcurrency, int resultSetHoldability)
      throws JdbcQueryFailureException {
    try {
      PreparedStatement preparedStatement =
          jdbcConnection.prepareStatement(sqlQuery, resultSetType,
              resultSetConcurrency, resultSetHoldability);
      for (int i = 0; i < sqlQueryParameters.size(); i++) {
        int sqlQueryParameterIndex = i + 1; // SQL parameters are 1-based
        Entry<? extends Class<?>, ?> sqlQueryParameter =
            sqlQueryParameters.get(i);
        Class<?> sqlQueryParameterClass = sqlQueryParameter.getKey();
        if (sqlQueryParameterClass == Integer.class) {
          int sqlQueryParameterIntegerValue =
              (Integer) sqlQueryParameter.getValue();
          preparedStatement.setInt(sqlQueryParameterIndex,
              sqlQueryParameterIntegerValue);
        } else if (sqlQueryParameterClass == String.class) {
          String sqlQueryParameterStringValue =
              (String) sqlQueryParameter.getValue();
          preparedStatement.setString(sqlQueryParameterIndex,
              sqlQueryParameterStringValue);
          // TODO: accept other types, not just String and Integer
        } else {
          throw new JdbcQueryFailureException(new IllegalArgumentException(
              sqlQueryParameterClass.getName()));
        }
      }
      ResultSet resultSet = preparedStatement.executeQuery();
      return resultSet;
    } catch (SQLException sqlException) {
      throw new JdbcQueryFailureException(sqlException);
    }
  }
} 
```

使用这个便利类：

```
public class QueryParameter<T> extends AbstractMap.SimpleEntry<Class<T>, T> {
  @SuppressWarnings("unchecked")
  public QueryParameter(T parameterValue) {
    super((Class<T>) parameterValue.getClass(), parameterValue);
  }
} 
```

能够像这样执行 JDBC SQL 语句：

```
ResultSet resultSet =
    JdbcQueryManager.executePreparedStatementWithParameters(jdbcConnection,
        sqlQuery, new QueryParameter<String>("AnswerRequest"),
        new QueryParameter<Integer>(42)); 
```

...我怎样才能让它变得更好？

具体来说，我的困惑在于使用这种看似复杂、可能不需要的形式：

```
List<Map.Entry<? extends Class<?>, ?>> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T14:21:43.417

传递一个列表没有任何价值`Map.Entry<? extends Class<?>, ?>`- 你试图告诉你的方法每个参数是什么类。**不要这样做！！！**

`preparedStatement.setXXX()`与流行的看法相反，如果您使用“基本”java 对象（包装的原语和），则不需要使用各种类型的方法`Dates`，只需使用`preparedStatement.setObject(index, object)`jdbc 驱动程序就会知道该怎么做！

唯一需要使用类型化设置器的情况是您的对象*不是*“基本”类型之一。如果你真的需要这个，那么只需要`instanceof`检查每个参数，然后你会写一些代码来提取一个字符串值来使用，但你仍然可以`preparedStatement.setObject(index, object)`用那个字符串调用。

我自己写过这样的东西，我只是使用：

```
public static ResultSet executePreparedStatementWithParameters(
    Connection jdbcConnection, String sqlQuery, Object... parameters) 
```

它工作得很好。

# java - 具有相同填充类型的 javax.crypto PKCS1Padding RSA enc/dec 和 iOS 安全性 SecKeyEncrypt 有什么区别

> ID：11015531
> 
> 赞同：3
> 
> 时间：2012-06-13T13:10:06.323
> 
> 标签：java, ios, cryptography, rsa

我正在尝试在 iOS 上使用带有 kSecPaddingPKCS1 的 RSA (SecKeyEncrypt) 加密 AES 密钥，然后使用 RSA 算法的标准 java 提供程序 (javax.crypto) 解密密钥。我成功接收到由 java 应用程序生成的公钥，将其存储在 iOS 钥匙串中并使用它来加密 aes 密钥，但是在 java 应用程序上接收时 - 我得到了众所周知的异常 javax.crypto.BadPaddingException: Data must start与零。当我禁用填充时，相同的代码有效（有时有效）。那么在 iOS 和 Java patform 上使用的 padding 有什么区别呢？有人可以给我答案 - 我在这个问题上挣扎了太久。失去了耐心。

源代码。1) 生成对称密钥，2) 使用我的 java 应用程序中的 rsa 公钥包装它。（Tke 公钥从模数和指数创建，由 java 应用程序发送到客户端） 3）准备 NSData：使用加密密钥初始化，附加 aes 加密数据，发送到 java 应用程序。然后 java 应用程序获取前 128 个字节（加密的 aes 密钥）并尝试对其进行解密，并在此处引发异常。

```
 [tools generateSymmetricKey];
NSData* encryptedSymetricKey = [tools wrapSymmetricKey:[tools getSymmetricKeyBytes] keyRef:[tools getPeerPublicKeyRef]];
int option = kCCOptionPKCS7Padding;
NSData* aesEncr = [tools doCipher:data key:[tools getSymmetricKeyBytes] context:kCCEncrypt  padding:(CCOptions *)&option];
NSMutableData * result = [[NSMutableData alloc] initWithData:encryptedSymetricKey];
[result appendData:aesEncr]; 
```

以及从 CryptoExercise 借来的方法，它应该适用于我 imo：

```
- (NSData *)wrapSymmetricKey:(NSData *)symmetricKey keyRef:(SecKeyRef)publicKey {
OSStatus sanityCheck = noErr;
size_t cipherBufferSize = 0;
size_t keyBufferSize = 0;

LOGGING_FACILITY( symmetricKey != nil, @"Symmetric key parameter is nil." );
LOGGING_FACILITY( publicKey != nil, @"Key parameter is nil." );

NSData * cipher = nil;
uint8_t * cipherBuffer = NULL;

// Calculate the buffer sizes.
cipherBufferSize = SecKeyGetBlockSize(publicKey);
keyBufferSize = [symmetricKey length];

if (kTypeOfWrapPadding == kSecPaddingNone) {
    LOGGING_FACILITY( keyBufferSize <= cipherBufferSize, @"Nonce integer is too large and falls outside multiplicative group." );
} else {
    LOGGING_FACILITY( keyBufferSize <= (cipherBufferSize - 11), @"Nonce integer is too large and falls outside multiplicative group." );
}

// Allocate some buffer space. I don't trust calloc.
cipherBuffer = malloc( cipherBufferSize * sizeof(uint8_t) );
memset((void *)cipherBuffer, 0x0, cipherBufferSize);

// Encrypt using the public key.
sanityCheck = SecKeyEncrypt(    publicKey,
                                kSecPaddingPKCS1,
                                (const uint8_t *)[symmetricKey bytes],
                                keyBufferSize,
                                cipherBuffer,
                                &cipherBufferSize
                            );

LOGGING_FACILITY1( sanityCheck == noErr, @"Error encrypting, OSStatus == %d.", sanityCheck );

// Build up cipher text blob.
cipher = [NSData dataWithBytes:(const void *)cipherBuffer length:(NSUInteger)cipherBufferSize];

if (cipherBuffer) free(cipherBuffer);

return cipher; 
```

}

还有一件事。在 java 方面，我使用的是 RSA/ECB/PKCS1Padding 密码实例。

我如何传输公钥：java 生成的公钥解耦为模数和指数，然后两个值都转换为原始字节数组，并发送，然后在 ios 客户端复制它们，转换为 ios 密钥环兼容格式并插入到钥匙圈。公钥正确传输，我比较了两边的模数和公共指数，它们匹配。公钥已成功导入 ios 上的密钥环（这是通过 BasicEncodingRules BER 类别完成的）。我认为 PKCS1padding 填充支持一定有问题 - 它在两个平台上都必须不同（可能与填充相关的计算需要在 ios 上添加一些额外的东西）。

# python - 如何在不删除空格的情况下识别带有空格的字典键

> ID：11015535
> 
> 赞同：0
> 
> 时间：2012-06-13T13:10:24.177
> 
> 标签：python, dictionary

假设 d 是一个字典

```
d={' a ':1,'b ':2} 
```

如果我们这样给予

```
d.has_key(' a ')
True 
```

但这是错误的

```
d.has_key('a')
False 
```

所以我试过这样

```
d.has_key('\sa\s')
False 
```

那么如何在不删除空格的情况下找到具有空格的dict键

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T13:14:55.463

您将不得不删除它们：

```
d = {' a ':1,'b ':2}
key = 'a'
print any(key == k.strip() for k in d.iterkeys()) 
```

印刷`True`

要获取值，您可以使用以下方法：

```
def get_stripped(d, key):
    return next((v for k,v in d.iteritems() if key == k.strip()), None)

print get_stripped(d, 'a') # prints 1
print get_stripped(d, 'c') # prints None 
```

`d = {' a ': 1, ' a': 2}`如果和 ，这将只返回一个任意值`key = 'a'`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T13:23:57.630

如果你经常需要它，你可以子类化`dict`：

```
class D(dict):
    def __init__(self, *args, **kwargs):
        super(D, self).__init__(*args, **kwargs)
        self._skeys = dict((k.strip(), v) for k, v in self.iteritems())

    def __setitem__(self, key, val):
        super(D, self).__setitem__(key, val)
        self._skeys[key.strip()] = key

    def __getitem__(self, key):
        try:
            return dict.__getitem__(self, key)
        except KeyError:
            return self[self._skeys[key]]

    def __contains__(self, key):
        return (dict.__contains__(self, key) or key in self._skeys) 
```

用法：

```
d = D({'a':1, 'b':2})
d['  c  '] = 3
print 'c' in d # True
print d['c'] # 3 
```

这个类工作正常，如果`key_n.strip() != key_m.strip()`是 True 对于任何`n != m`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T13:25:23.663

您可以使用此*生成器表达式*：`'a' in (item.strip() for item in d.keys())`

```
>>> d={' a ':1, 'b ':2}
>>> 'a' in (item.strip() for item in d.keys())
True
>>> 'b' in (item.strip() for item in d.keys())
True
>>> 'c' in (item.strip() for item in d.keys())
False
>>> d
>>> {' a ': 1, 'b ': 2} 
```

**编辑**

要访问该值，您可以：

```
>>> for key, value in d.iteritems():
if key.strip()=='a':
    print value
1 
```

或者，单行版本：

```
>>> [value for key, value in d.iteritems() if key.strip() == 'a'][0]
1
>>> [value for key, value in d.iteritems() if key.strip() == 'b'][0]
2 
```

基本上，`[value for key, value in d.iteritems() if key.strip() == 'b']`将返回一个值列表并`[0]`用于选择第一个值。如果您有几个类似的键，例如：

```
>>> d = {'a':1, ' a':2, ' a ':3} 
```

然后你可以这样做：

```
>>> values = [value for key, value in d.iteritems() if key.strip() == 'a']
>>> len(values)
3
>>> values[0]
1
>>> values[1]
2
>>> values[2]
3 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T13:19:21.670

如果您需要测试很多，我建议您创建一个剥离值的字典。

```
>>> d={' a ':1,'b ':2}
>>> t = dict( (pair[0].strip(), pair) for pair in d.iteritems())
>>> print t.has_key('a')
True
>>> print t['a']
(' a ', 1) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-13T13:21:20.187

```
d = {' a':'b',' c ':'c','b ':'b'}
key = ' a'
[d[l] for l in  d.iterkeys() if l.strip() == key.strip()]
['b'] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-13T13:39:09.593

```
>>>d = {' a ':1, 'b ':2}
>>>dd = dict((l.strip(), v) for l, v in d.iteritems())
>>>dd
{'a':1, 'b':2}
>>>'a' in dd
True
>>>d['a']
1 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-13T19:19:00.990

我认为@astynax 的答案中显示的概念 - 派生字典子类 - 是在正确的轨道上但是它不完整......可能是因为提供一个完整的字典子类可能需要做很多工作，因为有很多相互关联的方法将需要被覆盖。

避免这种情况的捷径是从`UserDict.DictMixin`类派生一个子类，而不是`dict`. 优点是它将必须写入的方法数量减少到最少四个。还可以通过实施几个附加的优化来获得更高的效率。

这是一个完整的工作示例，它的行为几乎与字典对象完全一样，除了需要忽略键周围的任何空白。除了可能在删除键时，性能应该几乎与标准字典一样好，尽管它确实使用更多内存。

```
import UserDict

class WhiteOut(UserDict.DictMixin):
    """ Mapping object with white space insensitive keys """
    def __init__(self, *args, **kwargs):
        self._dict = dict(*args, **kwargs)
        self._skeys = dict((k.strip(), v) for k, v in self._dict.iteritems())

    def __getitem__(self, key):
        try:
            return self._dict.__getitem__(key)
        except KeyError:
            return self._skeys.__getitem__(key.strip())

    def __setitem__(self, key, val):
        self._dict.__setitem__(key, val)
        self._skeys.__setitem__(key.strip(), val)

    def __delitem__(self, key):
        try:
            self._dict.__delitem__(key)
        except KeyError:
            stripped_key = key.strip()
            try:
                self._skeys.__delitem__(stripped_key)
            except KeyError:
                raise
            else:  # delete item corresponding to stripped_key in _dict
                for akey in self._dict:
                    if akey.strip() == stripped_key:
                        self._dict.__delitem__(akey)
                        return

    def keys(self):
        return self._dict.keys()

    def __iter__(self):
        return iter(self._dict)

    def __contains__(self, key):
        return self._skeys.__contains__(key.strip())

if __name__ == '__main__':
    wo = WhiteOut({'a':1, ' b':2})
    wo['  c  '] = 3
    print 'c' in wo # True
    print wo['c'] # 3
    print 'has_key:'
    print wo.has_key('  c  ')
    print wo.has_key('c')
    print wo['c '] # 3
    print 'wo.keys():', wo.keys()
    wokeys = [k for k in wo]
    print 'wo keys via iteration:', wokeys
    wo.pop("b")
    print 'wo.keys() after pop("b"):', wo.keys()
    try:
        wo.pop('not there')
    except KeyError:
        pass
    else:
        print "wo.pop('not there') didn't raise an exception as it should have" 
```

# java - 如何使用 ICompilationUnit 获取类中的所有注释

> ID：11015540
> 
> 赞同：0
> 
> 时间：2012-06-13T13:10:39.380
> 
> 标签：java, eclipse, eclipse-plugin

我有一个类`Book`，其中有一些注释，如`@Override`, `@Before`, `@After`.

如何使用 获取这些注释`ICompilationUnit`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T11:38:29.033

[IAnnotation 的 Javadoc](http://help.eclipse.org/galileo/index.jsp?topic=/org.eclipse.jdt.doc.isv/reference/api/org/eclipse/jdt/core/IAnnotation.html)指出：

“使用 IAnnotatable.getAnnotation(String) 获得注释。

请注意，注释不是其声明元素的子元素。要获取注释列表，请使用 IAnnotatable.getAnnotations()。"

什么是 IAnnotatable？IField、ILocalVariable、IMethod、IPackageDeclaration、IType。

ICompilationUnit 上有用于获取这些类型的对象的方法。

# javascript - javascript 创建带有日期的 HTML 下拉列表

> ID：11015545
> 
> 赞同：0
> 
> 时间：2012-06-13T13:10:52.593
> 
> 标签：javascript

我想创建一个包含按降序排列的日期的下拉列表。例如，从当前月份开始，格式为“6 2012”，一直到“3 2011”。

我有一个[jsfiddle](http://jsfiddle.net/KsAZv/5/)，这是代码：

```
var TheStartDate = new Date(2011, 4, 2);
var TheCurrentDate = new Date();

TheCurrentDate = new Date(TheCurrentDate.getUTCFullYear(),
                          TheCurrentDate.getMonth(), 2);

var TheHTML = '<select>';

do {

    TheHTML = TheHTML + '<option>';
    TheHTML = TheHTML + (TheCurrentDate.getUTCMonth() + 1).toString() + " ";
    TheHTML = TheHTML + TheCurrentDate.getFullYear();
    TheHTML = TheHTML + '</option>';

    TheCurrentDate.setMonth(TheCurrentDate.getUTCMonth() - 1);

} while (TheStartDate.getTime() !== TheCurrentDate.getTime());

TheHTML = TheHTML + '</select>';

alert(TheHTML);

document.getElementById('TheTestDiv').innerHTML = TheHTML; 
```

我不是太远，但我认为我错过了一些明显的东西。

感谢您的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T13:22:46.380

试试这个：

```
var toDate = new Date(2011, 2, 1);
var theDate = new Date();

var jDateSelect = jQuery('<select />');

do {
    var jDateOption = jQuery('<option />');
    jDateOption.text((theDate.getUTCMonth() + 1).toString() + " " + theDate.getUTCFullYear());
    theDate.setMonth(theDate.getMonth() - 1);
    //add the jQuery
    jDateSelect.append(jDateOption);
} while (theDate.getTime() >= toDate.getTime());

$('#TheTestDiv')
    //clear
    .html('')
    //append object
    .append(jDateSelect); 
```

# iphone - 双击后将图像大小设置为滚动视图的内容大小

> ID：11015546
> 
> 赞同：0
> 
> 时间：2012-06-13T13:10:54.543
> 
> 标签：iphone, objective-c, ios, ios5, uiscrollview

双击图像视图后，我想将图像大小设置为与滚动视图的内容大小相同。

我在我的应用程序和它的 ktphotoview 对象（它是一个 uiscrollview 对象）中使用 ktphotobrowser 我有以下双击代码

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event 
{
UITouch *touch = [touches anyObject];

if ([touch view] == self) {
  if ([touch tapCount] == 2) {
     [NSObject cancelPreviousPerformRequestsWithTarget:self selector:@selector(toggleChromeDisplay) object:nil];
     //[self zoomToRect:[self zoomRectForScale:[self maximumZoomScale] withCenter:[touch locationInView:self]] animated:YES];

      //[self setContentSize:imageView_.bounds.size];
      //[self zoomToLocation:[touch locationInView:self]];

       CGPoint pointInView = [touch locationInView:self];

       // Get a zoom scale that's zoomed in slightly, capped at the maximum zoom scale specified by the scroll view
       CGFloat newZoomScale = self.zoomScale * 2.0;
       NSLog(@"zoomscale %f",newZoomScale);
       newZoomScale = MIN(newZoomScale, self.maximumZoomScale);

       // Figure out the rect we want to zoom to, then zoom to it
       CGSize scrollViewSize = self.bounds.size;

       CGFloat w = scrollViewSize.width / newZoomScale;
       CGFloat h = scrollViewSize.height / newZoomScale;
       CGFloat x = pointInView.x - (w / 2.0f);
       CGFloat y = pointInView.y - (h / 2.0f);

      CGRect rectToZoomTo = CGRectMake(x, y, w, h);

       [self zoomToRect:rectToZoomTo animated:YES];

  }
}
} 
```

scrollview 的最大缩放比例设置为 2.0

当我双击 myimageview 时，我的图像的原始尺寸为 1280x853，绑定模具高度为 640，滚动视图的内容尺寸高度为 960（uiscreen.size.height * maximumzoomscale）

但我想要的是图像视图的高度和内容大小的高度应该相同，因此用户不能滚动到图像之外

我如何以及在哪里可以在此视图中进行这些计算和设置我可以在哪里设置它们的高度和宽度？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T14:38:10.320

也许不是最好的解决方案，但我用下面的代码块解决了我的问题：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event 
{
UITouch *touch = [touches anyObject];

if ([touch view] == self) {
  if ([touch tapCount] == 2) {

     [NSObject cancelPreviousPerformRequestsWithTarget:self selector:@selector(toggleChromeDisplay) object:nil];
      [self zoomToRect:[self zoomRectForScale:[self maximumZoomScale] withCenter:[touch locationInView:self]] animated:YES];
      float abc=(self.contentSize.height-(imageView_.image.size.height*320/imageView_.image.size.width*self.maximumZoomScale))/2 *-1;

      [self setContentInset:UIEdgeInsetsMake(abc, 0, abc, 0)];

  }
 }
} 
```

# javascript - 如何知道 JavaScript 中变量的名称？

> ID：11015550
> 
> 赞同：2
> 
> 时间：2012-06-13T13:10:59.980
> 
> 标签：javascript

> **可能重复：**
> [获取变量名。javascript“反射”](https://stackoverflow.com/questions/9795773/get-variable-name-javascript-reflection)

有没有办法知道变量的名称？

例子：

```
var a = 1;
var b = 4;

function getName(param){
    //What should I return here?
} 
```

我想做的是，如果我打电话，则`getName`返回“a”，如果我打电话`getName(a)`，则返回“b”`getName(b)`

这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T13:12:32.617

不，这是不可能的，我非常怀疑这是否有一个有用的用例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T13:16:32.777

您可以更改对象的原型以添加一个函数来执行此操作，如此[StackOverflow 答案](https://stackoverflow.com/a/332429/1028949)中所述：

```
Object.prototype.getName = function() { 
   var funcNameRegex = /function (.{1,})\(/;
   var results = (funcNameRegex).exec((this).constructor.toString());
   return (results && results.length > 1) ? results[1] : "";
}; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-13T13:15:51.017

**无法获取变量 name**。但是你可以得到变量的名称，谁得到了这个值（**如果你有一些具有相等值的变量，你会首先定义**）。此函数仅适用于全局变量。

```
var a = 1;
var b = 4;

function test(value) {
  for (var x in window)
    if (window[x] === value)
      return x;
}

alert(test(b)); 
```

# cookies - 为什么 Cookie 是了解用户数量的唯一方法

> ID：11015552
> 
> 赞同：1
> 
> 时间：2012-06-13T13:11:01.017
> 
> 标签：cookies, web, unique

我正在阅读 howstuffworks，这就是那里写的内容： [http](http://computer.howstuffworks.com/cookie3.htm) ://computer.howstuffworks.com/cookie3.htm “事实证明，由于代理服务器、缓存、集中器等，网站准确的唯一方法计数访问者是为每个访问者设置一个具有唯一 ID 的 cookie。”

不能从中得出为什么只有 cookie 是方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T13:14:39.160

三十个用户可能来自同一个 IP 地址（想想 ISP 块或公司网络内部）。

30 个不同的用户可能会从各种缓存中检索内容，而不是发出独特的请求，将其一直发送到应用服务器（本地缓存、ISP 缓存等）

如果不跟踪单个会话，流量可能会被错误估计或误解。

# objective-c - CorePlot：如何在 ScatterPlot 的图上添加标题

> ID：11015553
> 
> 赞同：1
> 
> 时间：2012-06-13T13:11:02.450
> 
> 标签：objective-c, core-plot, title

我正在使用`CorePlot`库，我想为`CPTScatterPlot`. 为什么`plot.title = @"TITLE"`不行！

```
CPTScatterPlot *plot = [[[CPTScatterPlot alloc] init] autorelease];

plot.dataSource = self;
plot.identifier = @"IDENTIFIER";
plot.dataLineStyle = dataLineStyle;
plot.plotSymbol = plotSymbol;
plot.title = @"TITLE";

[self.graph addPlot:plot]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T23:28:33.610

图的`title`是图例中显示的名称。在图表中添加图例，标题将出现。您可以为图表本身添加标题。

# blackberry - 黑莓短信拦截，向模拟器发送短信

> ID：11015555
> 
> 赞同：1
> 
> 时间：2012-06-13T13:11:03.870
> 
> 标签：blackberry, sms

我目前正在开发一个需要能够拦截 SMS 消息的 Blackberry 5.0 应用程序。我正在尝试向模拟器发送短信。我遇到了建议运行模拟器的两个单独实例并使用两个模拟器上的 SMSDemo 示例应用程序从一个模拟器实例向另一个实例发送 SMS。

我从两个单独的工作目录运行模拟器的两个实例，如下所示：

```
"C:\java\blackberry\eclipse\plugins\net.rim.ejde.componentpack5.0.0_5.0.0.36\components\simulator\fledge.exe" /app="C:\java\blackberry\eclipse\plugins\net.rim.ejde.componentpack5.0.0_5.0.0.36\components\simulator\Jvm.dll" /sms-source-port=6000 /sms-destination-port=6001

"C:\java\blackberry\eclipse\plugins\net.rim.ejde.componentpack5.0.0_5.0.0.36\components\simulator\fledge.exe" /app="C:\java\blackberry\eclipse\plugins\net.rim.ejde.componentpack5.0.0_5.0.0.36\components\simulator\Jvm.dll" /sms-source-port=6001 /sms-destination-port=6000 
```

两个实例都启动了，但是当我尝试发送 SMS 时，它永远不会到达第二个模拟器。

我已禁用 Windows 防火墙 - 没有变化。

当我对 UDP 进行 netstat 时，我可以看到端口 6000 和 6001 都在监听。

任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T14:18:00.743

我终于找到了解决问题的方法。这里是：

使用 Wireshark 嗅探来自模拟器的 UDP 广播，我注意到目标地址不正确 - 它的“1.0.0.127”。这个地址是不可路由的，所以从一个模拟器发送的数据报永远不会到达另一个模拟器。

我可能错过了它，但在启动模拟器以指定目标地址时，我看不到任何要设置的命令行参数。

我将我的开发笔记本电脑更改为使用硬编码的 IP 地址而不是 DHCP。然后，我将 1.0.0.127 作为另一个 IP 地址添加到我的 TCP/IP 设置中。该地址现在是可路由的。

在不更改端口设置（/sms-source-port 和 /sms-destination-port）的情况下重新启动了两个模拟器，它工作正常。我不需要使用 SMSDemo 应用程序。我使用了普通的黑莓消息应用程序。

我希望这可以帮助其他遇到同样问题的人。

# mercurial - “忘记”一个死胡同

> ID：11015557
> 
> 赞同：2
> 
> 时间：2012-06-13T13:11:10.730
> 
> 标签：mercurial, branch

我有一个 mercurial 存储库。它在修订版 A 上。我做了一些更改，提交（到修订版 B）并推送。然而，后来，我意识到我不想做出这些改变。我更新回版本 A，并对版本 C 进行了一些替代更改。

```
C
| -
| B
|/
A 
```

但是，现在我无法推送 rev C，因为它抱怨它会创建一个新的远程头（它会）。如何让远程 mercurial 简单地忘记 rev B 和其中的所有更改，以便我可以推送 rev C 并从那里继续？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T13:46:09.080

[编辑历史](http://mercurial.selenic.com/wiki/EditingHistory)很难。一旦将变更集推送到公共存储库，就不能再轻易地从历史记录中删除它。

解决您的问题的最直接方法是：

1.  `hg update <tip of branch you want to forget>`
2.  `hg commit --close-branch -m "close unwanted branch"`
3.  `hg update <tip of branch you want to keep>`
4.  推送您的所有更改。正如您所指出的，您将需要使用，`--force`因为分支上现在存在多个头。

如果您确实需要修剪分支，请再次阅读[EditingHistory](http://mercurial.selenic.com/wiki/EditingHistory)。如果看起来仍然可行，您可以使用[PruningDeadBranches](http://mercurial.selenic.com/wiki/PruningDeadBranches)中描述的方法之一。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-13T14:33:29.973

就我个人而言，我会关闭分支并强制推送（正如 Tim Henigan 所描述的那样），因为它使 DAG 处于真实状态。不过还有另一种选择。做一个[虚拟合并](http://mercurial.selenic.com/wiki/TipsAndTricks#Keep_.22My.22_or_.22Their.22_files_when_doing_a_merge)。这是一个合并，但是您忽略了传入的更改。

```
hg update C
hg -y merge --tool=internal:fail B
hg revert --all --rev .
hg resolve -a -m
hg ci 
```

最终结果是

```
M
|\
C |
| |
| B
|/
A 
```

...但 M 不包含 B 的任何更改。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-13T14:54:53.033

使用[`backout`](http://mercurial.selenic.com/wiki/Backout)命令反转 B 更改。

```
hg up B
hg backout B 
```

现在，您的工作目录与 B 之前的状态相同，我将其称为`A'`.

退出后，进行真正的更改并提交。这就是您的历史记录的样子：

```
C
|
A' 
|
B
|
A 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-13T13:17:00.717

Mercurial 分支是永久的，并在提交对象中注册。有一些（不太容易）关闭和/或删除分支的方法，主要在[这里](http://mercurial.selenic.com/wiki/PruningDeadBranches)列出。我什至已经使用过其中的一些。请注意，对于确实使用分支的人来说，这些解决方案有些绝望，认为它们可以是临时的。

但是，如果您真的想要临时分支，请使用[书签](http://mercurial.selenic.com/wiki/BookmarksExtension)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-13T15:22:36.997

其他人有一些摆脱“B”的好答案，但只要把它放在那里，你总是可以这样做：

```
hg push --rev C 
```

这将推动 C 而不是 B 并且不会抱怨新的头。

# php - Wordpress wp_schedule_event 在特定时间

> ID：11015560
> 
> 赞同：0
> 
> 时间：2012-06-13T13:11:19.720
> 
> 标签：php, wordpress, php-5.3

我每小时使用以下功能在 Wordpress 中激活/停用和运行 cronjob。

我已经检查了 Wordpress 代码并访问了教程网站，但没有看到在特定时间运行 wp-cron 的示例，例如“每天上午 23.59”。这可能吗？

```
register_activation_hook(__FILE__, 'cron_activation');

add_action('twitter_cron', 'cron_function');

register_deactivation_hook(__FILE__, 'cron_deactivation'); 

function cron_activation() {
wp_schedule_event(time(), 'hourly', 'twitter_cron');
}

function my_deactivation() {
    wp_clear_scheduled_hook('twitter_cron');
}

function do_this_hourly() {

// my twitter function

if (!wp_next_scheduled('twitter_cron')) {
wp_schedule_event( time(), 'hourly', 'twitter_cron' );
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T14:03:17.883

我找到了解决方案：

```
wp_schedule_event('1339631940', 'daily', 'my_wp_cron' ); 
```

其中“1339631940”是 2012 年 6 月 13 日星期三 23:59:00 +0000 的 linux 时间戳。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-06T09:36:03.317

在 wp_schedule_event($timestamp, $recurrence, $hook, $args); 第一个参数是当前时间。WP 找到 DB 中的最后一个事件（WP_OPTIONS 行 CRON），查看间隔，如果 $timestamp 在之后，执行 cron。

要在特定时间运行 cron：将 $recurrence 设置得更少（每天 18 小时）并在特定时间之前停止 cron 并进行测试

```
$hcron = 3; // 03:00 AM
$t = time();
$on = mktime($hcron,0,0,date("m",$t+(6-$hcron)*3600),date("d",$t+(6-$hcron)*3600),date("Y",$t+(6-$hcron)*3600));
if ($t>=$on) { add_action('cron'...)} 
```

# android - 谷歌地图 android 2.2 NoClassDefFoundError

> ID：11015564
> 
> 赞同：1
> 
> 时间：2012-06-13T13:11:28.873
> 
> 标签：android, maps

我有谷歌地图的问题。当我开始扩展 MapActivity 的新活动时，我收到 NoClassDefFoundError。我已使用 google api 将构建目标设置为 2.2，并且

```
<uses-library android:name="com.google.android.maps" /> 
```

`<application>`标签内的定义。我也有 mapsApiKey ，我需要让它工作，但它没有。

日志

```
06-13 15:05:43.276: E/AndroidRuntime(19350): FATAL EXCEPTION: main
06-13 15:05:43.276: E/AndroidRuntime(19350): java.lang.NoClassDefFoundError: pl.mm.dt.AddPlaceActivity
06-13 15:05:43.276: E/AndroidRuntime(19350):    at pl.mm.dt.NewNormalNoteActivity$2.onClick(NewNormalNoteActivity.java:67)
06-13 15:05:43.276: E/AndroidRuntime(19350):    at android.view.View.performClick(View.java:2495)
06-13 15:05:43.276: E/AndroidRuntime(19350):    at android.view.View$PerformClick.run(View.java:9100)
06-13 15:05:43.276: E/AndroidRuntime(19350):    at android.os.Handler.handleCallback(Handler.java:587)
06-13 15:05:43.276: E/AndroidRuntime(19350):    at android.os.Handler.dispatchMessage(Handler.java:92)
06-13 15:05:43.276: E/AndroidRuntime(19350):    at android.os.Looper.loop(Looper.java:130)
06-13 15:05:43.276: E/AndroidRuntime(19350):    at android.app.ActivityThread.main(ActivityThread.java:3837)
06-13 15:05:43.276: E/AndroidRuntime(19350):    at java.lang.reflect.Method.invokeNative(Native Method)
06-13 15:05:43.276: E/AndroidRuntime(19350):    at java.lang.reflect.Method.invoke(Method.java:507)
06-13 15:05:43.276: E/AndroidRuntime(19350):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:847)
06-13 15:05:43.276: E/AndroidRuntime(19350):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:605)
06-13 15:05:43.276: E/AndroidRuntime(19350):    at dalvik.system.NativeStart.main(Native Method) 
```

显现

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="pl.mm.dt"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8" />

    <uses-feature android:name="android.hardware.camera" />

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.RECORD_AUDIO" />
    <uses-permission android:name="android.permission.CAMERA" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <uses-library android:name="com.google.android.maps" />
        <activity
            android:name=".SplashScreen"
            android:label="@string/app_name"
            android:screenOrientation="portrait"
            android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity
            android:name="NewNormalNoteActivity"
            android:screenOrientation="portrait"
            android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen" >
        </activity>
        ...
        <activity
            android:name=".AddPlaceActivity"
            android:screenOrientation="portrait"
            android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen" >
        </activity>

    </application>

</manifest> 
```

AddPlaceActivity

```
package pl.mm.dt;

import com.google.android.maps.MapActivity;
import com.google.android.maps.MapView;

import android.os.Bundle;

public class AddPlaceActivity extends MapActivity{

    @Override
    protected boolean isRouteDisplayed() {
        return false;
    }

    @Override
    protected void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        setContentView(R.layout.add_place_activity);

        MapView mapView = (MapView) findViewById(R.id.mapview);
        mapView.setBuiltInZoomControls(true);
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T13:31:13.893

android尝试放 `android:name="NewNormalNoteActivity" as this android:name=".NewNormalNoteActivity"`

作为

机器人：名称

```
The name of the class that implements the activity, a subclass of Activity. 
The attribute value should be a fully qualified class name (such as, "com.example.project.ExtracurricularActivity").
 However, as a shorthand, if the first character of the name is a period (for example, ".ExtracurricularActivity"), 
 it is appended to the package name specified in the <manifest> element. 
```

[Android 清单：为什么有时是“.<classname>” 而不仅仅是“<classname>”？](https://stackoverflow.com/questions/7331162/android-manifest-why-sometimes-classname-instead-of-just-classname)

[AndroidManifest.xml 中的活动名称是否需要以点开头？](https://stackoverflow.com/questions/3608017/activity-name-in-androidmanifest-xml)

# iphone - XCode：如何以编程方式获取用户的电子邮件？

> ID：11015566
> 
> 赞同：0
> 
> 时间：2012-06-13T13:11:37.380
> 
> 标签：iphone, objective-c, ios, xcode, email

我想避免让我的用户用他的电子邮件填写一个字段（冗长且令人沮丧）。有没有办法获取用户的电子邮件以避免他必须写它？

谢谢 ！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T13:18:00.803

第一次询问，让用户通过 选择记住我选项`UISwitch`，将其保存在 plist 中（加密然后保存）。下次阅读plist。如果用户喜欢每次都写，那么对他们有好处，否则他们可以使用您给定的选项来保存它，然后您可以自动完成该字段！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T13:15:28.090

如果您指的是 Apple ID 电子邮件，那么您将无法访问它，您必须明确询问该电子邮件

# javascript - 用你自己的覆盖浏览器拼写检查？

> ID：11015568
> 
> 赞同：8
> 
> 时间：2012-06-13T13:11:50.377
> 
> 标签：javascript, html, spell-checking

我正在编写一个带有 javascript 验证的表单，我想覆盖浏览器的内置拼写检查。

例如，假设我正在检查序列号并且它们都传递了一个正则表达式文本。我想强调那些在浏览器中不太喜欢浏览器突出显示拼写无效的单词的人。

我能想到的就是禁用浏览器的内置拼写检查

**所以总结一下**

有没有一种简单的方法来覆盖浏览器的内置拼写检查（有点像在 javascript 中对数组进行排序时覆盖比较器的方式）

如果没有，是否有一种简单的方法来模拟这种行为？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T13:48:59.207

简短的回答；不，没有 JavaScript 可以挂钩的拼写检查 API。除此之外，这些似乎是不同的目标；拼写检查是关于自然语言的，而您似乎真的想要输入验证。当您的 JavaScript 代码检测到无效序列时，您最好通过 CSS 向用户应用不同的背景/边框颜色或类似的提示（尤其是因为每个浏览器都会以不同的方式呈现拼写检查错误）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T15:28:01.943

我还没有评估代码，但 CkEditor 设法禁用浏览器拼写检查。它有一个默认设置为 true 的配置设置：[disableNativeSpellChecker](http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.config.html#.disableNativeSpellChecker)

```
config.disableNativeSpellChecker = true; 
```

该设置在“所见即所得”插件中使用，这是插件代码的链接：[所见即所得插件](http://docs.cksource.com/ckeditor_api/symbols/src/plugins_wysiwygarea_plugin.js.html)

也许您可以将其用作您自己的代码的基础，以禁用浏览器拼写检查。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-15T08:36:25.500

从下面的 Url 查看演示，它认为它可能对您的情况有所帮助，尽管它仅适用于 HTML5。

[http://jsfiddle.net/0GiS0/ZU74B/](http://jsfiddle.net/0GiS0/ZU74B/)

这是他们在演示中使用的代码：

```
window.onload = function(){

    var support = document.getElementById("support");

    if('spellcheck' in document.createElement('textarea'))
    {
        support.textContent = "Your browser supports spellcheck";
        support.style.color = "green";
    }
} 
```

# java - ArrayBlockingQueue 使用单个锁进行插入和删除，但 LinkedBlockingQueue 使用 2 个单独的锁

> ID：11015571
> 
> 赞同：10
> 
> 时间：2012-06-13T13:11:57.303
> 
> 标签：java, concurrency, blockingqueue

我正在浏览 ArrayBlockingQueue 和 LinkedBlockingQueue 的源代码。LinkedBlockingQueue 有一个 putLock 和一个 takeLock 分别用于插入和删除，但 ArrayBlockingQueue 只使用 1 个锁。我相信 LinkedBlockingQueue 是基于[Simple, Fast, and Practical Non-Blocking and Blocking Concurrent Queue Algorithms](http://www.cs.rochester.edu/u/scott/papers/1996_PODC_queues.pdf)中描述的设计实现的。在本文中，他们提到他们保留了一个虚拟节点，以便入队者永远不必访问头，而出队者永远不必访问尾，从而避免了死锁情况。我想知道为什么 ArrayBlockingQueue 不借用相同的想法而是使用 2 个锁。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-13T13:16:16.787

ArrayBlockingQueue 必须避免覆盖条目，以便它需要知道开始和结束的位置。LinkedBlockQueue 不需要知道这一点，因为它让 GC 担心清理队列中的节点。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-13T13:16:25.447

> 我想知道为什么 ArrayBlockingQueue 不借用相同的想法而是使用 2 个锁。

因为它`ArrayBlockingQueue`使用更简单的数据结构来保存队列项。

将`ArrayBlockingQueue`其数据存储在一个`private final E[] items;`数组中。对于多个线程来处理相同的存储空间，无论是添加还是出列，它们都必须使用相同的锁。这不仅是因为内存屏障，还因为互斥保护，因为它们正在修改同一个数组。

`LinkedBlockingQueue`另一方面是完全不同的队列元素的链表，它允许具有双锁的能力。启用不同锁配置的是队列中元素的内部存储。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-10T18:37:28.883

LBQ 中使用了 2 个锁来限制对 head 和 lock 的并发访问。头锁不允许同时删除两个元素，尾锁不允许同时将两个元素添加到队列中。两者锁定在一起防止比赛。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-07T17:05:14.677

我认为 ABQ 有可能借用与 LBQ 相同的想法。请参考我的代码[http://pastebin.com/ZD1uFy7S和我在 SO](http://pastebin.com/ZD1uFy7S) [ArrayBlockingQueue: concurrent put and take](https://stackoverflow.com/questions/24541672/arrayblockingqueue-concurrent-put-and-take/)上提出的类似问题。

他们之所以没有使用它，主要是因为实现的复杂性，尤其是迭代器，并且在复杂性和性能增益之间的权衡并不是那么有利可图。

如需更多参考，请查看[http://jsr166-concurrency.10961.n7.nabble.com/ArrayBlockingQueue-concurrent-put-and-take-tc1306.html](http://jsr166-concurrency.10961.n7.nabble.com/ArrayBlockingQueue-concurrent-put-and-take-tc1306.html)。

# php - PHP打印机如何使用printer_draw_text函数

> ID：11015578
> 
> 赞同：0
> 
> 时间：2012-06-13T13:12:12.217
> 
> 标签：php, printing, epson

对不起，我的英语不好

我的问题是，如何使用`printer_draw_text`Function 打印出长字符串？（见示例）在**爱普生计费打印机**上。

所有示例都有效（来源：[http](http://www.php.net/manual/en/book.printer.php) ://www.php.net/manual/en/book.printer.php ）

但是当我想结合一个 Logo.bmp + 一行长文本时，它只会打印出徽标和 1 行刺痛：

**例子：**

```
<?php

# DEMO PRINTER

//http://fr.php.net/manual/en/function.printer-write.php
/*
$_SESSION['PrintBuffer']='';         //printer buffer
  print_sub_1();
  print_sub_2();
  print_sub_3();

  $_SESSION['PrintBuffer']

*/

$Printer_name = $_GET['Printer'];
$text = $_GET['value'];

$text = str_replace( '/r/n',PHP_EOL, $text);

$handle = printer_open($Printer_name);  // Open Pritner by Name
printer_set_option($handle, PRINTER_MODE, "raw"); 
//printer_set_option($handle, PRINTER_TEXT_ALIGN, PRINTER_TA_LEFT);

printer_start_doc($handle, "Print"); // Name Document 

printer_start_page($handle); // Start Logo
printer_draw_bmp($handle, "c:\\logo.bmp", 60, 0);  // Logo Dir, lenght H , With V
printer_end_page($handle);  // End Logo

printer_start_page($handle);    
printer_draw_text($handle, $text,1,1);
printer_end_page($handle);  //

printer_end_doc($handle);   // Close document 
printer_close($handle);     // Close Pritner

?> 
```

**输出示例：**

徽标.bmp

测试.... // 但只有 1 行 :(

printer_write($handle, "要打印的文本"); 工作！它打印出孔字符串 + \r\n 但它在新纸上打印出徽标:(

需要的例子

标志 <-- 这里

1 x 产品 <-- 长字符串 1 x 产品 \r\n （工作的 printer_write 函数） 2 x 产品 ecr。

`printer_draw_text($handle, $text,1,1);`仅打印 1 x 产品 2 x

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T09:57:04.920

这里通过工作示例（* + Print.Dll 和 Win 7 OS ）

```
 <?php

# DEMO PRINTER

//http://fr.php.net/manual/en/function.printer-write.php
/*
$_SESSION['PrintBuffer']='';         //printer buffer
  print_sub_1();
  print_sub_2();
  print_sub_3();

  $_SESSION['PrintBuffer']

*/

$Printer_name = $_GET['Printer'];
$text = $_GET['value'];

$text = str_replace( "-"," ", $text);
$text = str_replace( "/r/n"," \r\n , ", $text); // replace and make string Array

$lineofText = explode(',',$text); // Array to stand to for

# Examples 

// testing font
//echo printer_logical_fontheight($printer, 72);

//printer_set_option($printer, PRINTER_MODE, "RAW");

$handle = printer_open($Printer_name);  // Open Pritner by Name
printer_set_option($handle, PRINTER_MODE, "raw"); 
//printer_set_option($handle, PRINTER_TEXT_ALIGN, PRINTER_TA_LEFT);

printer_start_doc($handle, " Print"); // Name Document 

printer_start_page($handle); // Start Logo
printer_draw_bmp($handle, "c:\\logo.bmp", 60, 0);  // Logo Dir, lenght H , With V
printer_end_page($handle);  // End Logo

printer_start_page($handle);    // Text

$asize=sizeof($lineofText);             // Make NewLine per Array 
   for($i=0; $i<$asize; $i++)    {
                                    printer_draw_text($handle, $lineofText[$i],1,1);
                                }

printer_end_page($handle);  // End Text

//printer_start_page($handle); // Start Logo QR
//printer_draw_bmp($handle, "c:\\QR.bmp", 60, 0);  // Logo Dir, lenght H , With V
//printer_end_page($handle);  // End Logo QR

printer_end_doc($handle);   // Close document 
printer_close($handle);     // Close Pritner

?> 
```

# java - 如何在cmd行中运行java类文件

> ID：11015579
> 
> 赞同：0
> 
> 时间：2012-06-13T13:12:20.987
> 
> 标签：java, compilation, command, javac

我的 2 节课是这样的：

```
package p;
class A{
  public static void main(String[] args){
    B b = new B("haha");
    b.run();
    //System.out.println("he");
  }
} 
```

和

```
package b;
class B{
  String s;                             
  public B(String s){   
    this.s = s;
  }                             

  public void run(){
    System.out.println(s);              
  }                                     
} 
```

我无法使用 编译这两个文件`javac a.java b.java`，错误是：

> a.java:4: 找不到符号
> 符号：B 类位置：类 pA
> B b = new B("haha");
> ^
> a.java:4: 找不到符号
> symbol : class B
> location: class pA
> B b = new B("haha");
> ^
> 2 个错误

而删除后`package p;`，`javac a.java b.java`运行良好。

那么，如何使用 编译和运行 A 类`package p;`？

======编辑=======
感谢您的所有回复，最后我通过更改我的文件来运行我的课程：

.
├── b
│ ├── B.class
│ └── B.java
└── p
├── A.class
└── a.java

和a.java：

```
package p;

import b.B;

class A{
  public static void main(String[] args){
    B b = new B("haha");
    b.run();
    //System.out.println("he");
  }
} 
```

B.java：

```
package b;
public class B{
  String s;
  public B(String s){
    this.s = s;
  }

  public void run(){
    System.out.println(s);
  }
} 
```

需要注意的事项：

*   B类必须是公开的
*   尝试在 A 类中使用时应导入 B

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T13:13:28.487

将此行添加到您的 A 类代码中：

```
import b.B; 
```

它应该是包声明之后的代码的下一行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T13:13:46.903

您需要导入类型

```
import b.B; 
```

并在执行 java 类时

转到目录

做

```
java a.A 
```

* * *

**看**

*   [包&`import`](http://docs.oracle.com/javase/tutorial/java/package/usepkgs.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T13:38:37.463

下面的代码将起作用。

```
//B.java

package b;

public class B{

  String s;

  public B(String s){

   this.s = s;

  }

  public void run(){
    System.out.println(s);
  }
}

//A.java

package p;

import b.B;

class A{

  public static void main(String[] args){

B b = new B("haha");

b.run();

  }

} 
```

运行“java pA”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T13:20:48.860

通过导入其他类`import b.B`

或将两个文件放在同一个文件夹（p）中并删除它将被编译的`package b;`表单类。`B`

# wpf - WPF 样式绑定到基本样式

> ID：11015580
> 
> 赞同：0
> 
> 时间：2012-06-13T13:12:25.760
> 
> 标签：wpf, inheritance, binding, styles

我在 wpf 中有一个基本样式和一个样式。

基本风格是：

```
<Style x:Key="BaseTextBox" TargetType="{x:Type TextBox}">
    <Setter Property="Background" Value="#DDFFDD" />
    <Setter Property="MinWidth" Value="75" />
    <Setter Property="behaviors:OCCInteraction.Triggers" Value="{StaticResource ResourceKey=validationTrigger}" />
    <Style.Triggers>
        <Trigger Property="Validation.HasError" Value="true">
            <Setter Property="Background" Value="#FFDDDD"/>
            <Setter Property="ToolTip" Value="{Binding Path=(Validation.Errors)[0].ErrorContent, RelativeSource={x:Static RelativeSource.Self}}" />
        </Trigger>
    </Style.Triggers>
</Style> 
```

而具体的风格是：

```
<Style x:Key="EditableTextBox" TargetType="{x:Type TextBox}" BasedOn="{StaticResource ResourceKey=BaseTextBox}">
    <Setter Property="Validation.ErrorTemplate">
        <Setter.Value>
            <ControlTemplate>
                <StackPanel Orientation="Horizontal">
                    <Border BorderBrush="Red" BorderThickness="1" Padding="0" Margin="0">
                        <AdornedElementPlaceholder Margin="0"/>
                    </Border>
                    <TextBlock Text="test" />
                    <Image Style="{StaticResource ResourceKey=WarningImage}"/>
                    <TextBlock Text="{Binding Path=(Validation.Errors)[0].ErrorContent, RelativeSource={RelativeSource Mode=Self,AncestorLevel=2}}" />

                </StackPanel>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

现在我想将验证错误文本添加到图像旁边的文本块中。但是相同的绑定路径不起作用。我尝试了不同的绑定，但我不知道如何访问与基本样式相同的绑定。

感谢帮助 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T14:09:00.147

你试过没有 AncestorLevel 吗？你应该是同一个对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T08:03:35.913

您不能使用`Mode=Self`和`AncestorLevel`属性。只需使用`Mode=Self`.

当您尝试在可视树中到达该控件的父级时，将使用祖先级别。

# java - 如何在 Spring 和 EJB 中使用相同的事务？

> ID：11015582
> 
> 赞同：2
> 
> 时间：2012-06-13T13:12:31.443
> 
> 标签：java, spring, jakarta-ee

我没有使用 Spring 的开发经验，因为我们是一家 Java EE 商店。但是，我们正在寻找一种在 Spring 上运行并应集成我们现有 Java EE 解决方案的解决方案来满足我们的需求。

在阅读了 Spring 3.0.5 文档之后，我仍然不确定如何将事务从 Spring 传播到 EJB。

例如，一个 Spring bean 会创建一个事务，将一些内容保存到一个数据库中，然后将事务交给我们的一个无状态会话 bean，后者（使用 JPA）将一些其他内容保存到另一个数据库中。并且所有这些都必须在同一个事务下运行，该事务是在将控制权返回给 Spring bean 时提交的。

另外，我不清楚部署：Spring 会在包含会话 bean 的 EAR 中作为 web 应用程序运行吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T13:49:42.887

如果您将 Spring 配置为使用 JTATransactionManager，然后从 Spring 中调用您的 SessionBean，则 bean 应该实际获取 Spring 创建的事务。看看这里：[http](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/htmlsingle/spring-framework-reference.html#transaction-application-server-integration) ://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/htmlsingle/spring-framework-reference.html#transaction-application-server-integration和描述`<tx:jta-transaction-manager/>`

我实际上只是反过来做了（在春天加入 EJB 事务）所以我不完全确定，但你可以通过设置轻松地测试它

```
@TransactionAttribute(TransactionAttributeType.MANDATORY) 
```

在你的 SessionBean 上并从春天调用它......如果没有现有的 Transaction 你最终会得到一个`TransactionRequiredException`

# optimization - 局部性和代码优化

> ID：11015583
> 
> 赞同：0
> 
> 时间：2012-06-13T13:12:32.453
> 
> 标签：optimization, gcc, assembly, spatial

优化器能否摆脱对空间局部性的不良使用？我正在维护一些由其他人编写的代码，并且他们的许多数组都是以随意的顺序声明的，并且每次调用它们时都会以不同的方式进行迭代。

由于代码的复杂性，每次循环阵列时都需要花费大量时间来尝试和重新管理。我在阅读汇编语言方面不够熟练，无法准确判断不同优化级别的不同之处，但我的问题是，

在编写程序时，局部性很重要，还是会被优化掉，这样我就不用担心了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T14:37:30.773

获得正确的位置很重要，因为它可以在运行时产生两个数量级的差异（如果您有页面错误，则为 5-6 个数量级）。

除了*真正的*编译器通常不会自动处理这一事实（如 Joel Falcou 所说）之外，即使是*假设*的编译器也很难做到这一点。在很多情况下，编译器做这样的事情甚至可能是无效的，而且**很难**预测什么时候是，什么时候不是。

例如，您有在 CPU 上计算的顶点数据，并将其上传到图形 API，例如 OpenGL 或 DirectX。您已经同意该 API 的某个顶点数据布局。现在编译器认为以某种方式重新排列布局更有效。砰，你死定了。
编译器应该怎么知道？

假设你有几个数组和几个指针，一些指针别名其他指针，或者由于某种原因一些指向数组中间，另一些指向开头。编译器认为以不同的顺序执行某些操作会更有效，用另一个结果覆盖一个结果。
撇开数据损坏问题不谈，假设这些数组“有点大”，所以它们肯定会被动态分配而不是在堆栈上。这意味着从编译器的角度来看，它们的起始地址是“不确定的”甚至是“随机的”。编译器将如何做出决定——在编译时——不知道一半的细节？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T13:13:16.197

几乎没有编译器处理局部性的数据布局。它仍然是一个活跃的研究领域。

# php - Google 爬虫、cron 和 codeigniter 会话

> ID：11015585
> 
> 赞同：1
> 
> 时间：2012-06-13T13:12:35.773
> 
> 标签：php, codeigniter, session, cron, web-crawler

我正在运行一个**Codeigniter 2.0** Web 应用程序，并且我正在使用带有 DB 选项的会话库，因此对于我网站上的每个连接，我都有一个名为`'ci_sessions'`存储的 MySQL 表：

*   `Session_id`
*   IP地址
*   用户代理
*   最后一个活动
*   用户数据

我有两个问题：

1.  带 IP 的 Google 机器人`66.249.72.152`
2.  带 IP 的 Cron`0.0.0.0`

每次我的服务器运行 cron 或每次 google bot 抓取我的页面时，都会创建一个新会话。所以我有数百个与 IP 相同的会话`0.0.0.0`和数百个与 IP相同的会话`66.249.72.152`。

有谁知道如何阻止机器人或 cron 创建会话？或者如果这不能完成......有谁知道如何每隔一段时间自动删除这些会话？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T13:31:47.170

一种可能的解决方案是实施不应为其创建会话的 IP 黑名单。

我创建了两种方法来做到这一点：

**应用程序/config/config.php**

```
/*
|--------------------------------------------------------------------------
| Session Variables
|--------------------------------------------------------------------------
|
| 'sess_cookie_name'        = the name you want for the cookie
| 'sess_expiration'         = the number of SECONDS you want the session to last.
|   by default sessions last 7200 seconds (two hours).  Set to zero for no expiration.
| 'sess_expire_on_close'    = Whether to cause the session to expire automatically
|   when the browser window is closed
| 'sess_encrypt_cookie'     = Whether to encrypt the cookie
| 'sess_use_database'       = Whether to save the session data to a database
| 'sess_table_name'         = The name of the session database table
| 'sess_match_ip'           = Whether to match the user's IP address when reading the session data
| 'sess_match_useragent'    = Whether to match the User Agent when reading the session data
| 'sess_time_to_update'     = how many seconds between CI refreshing Session Information
| 'sess_ignore_ip'          = array of IP addresses to ignore
|
*/
$config['sess_cookie_name']     = 'ci_session';
$config['sess_expiration']      = 7200;
$config['sess_expire_on_close'] = FALSE;
$config['sess_encrypt_cookie']  = FALSE;
$config['sess_use_database']    = FALSE;
$config['sess_table_name']      = 'ci_sessions';
$config['sess_match_ip']        = FALSE;
$config['sess_match_useragent'] = TRUE;
$config['sess_time_to_update']  = 300;
$config['sess_ignore_ip']       = array('66.249.72.152', '0.0.0.0'); 
```

**系统/库/session.php**

```
/**
 * Session Constructor
 *
 * The constructor runs the session routines automatically
 * whenever the class is instantiated.
 */
public function __construct($params = array())
{
    log_message('debug', "Session Class Initialized");

    // Set the super object to a local variable for use throughout the class
    $this->CI =& get_instance();

    // Set all the session preferences, which can either be set
    // manually via the $params array above or via the config file
    foreach (array('sess_encrypt_cookie', 'sess_use_database', 'sess_table_name', 'sess_expiration', 'sess_expire_on_close', 'sess_match_ip', 'sess_match_useragent', 'sess_cookie_name', 'cookie_path', 'cookie_domain', 'cookie_secure', 'sess_time_to_update', 'time_reference', 'cookie_prefix', 'encryption_key', 'sess_ignore_ip') as $key)
    {
        $this->$key = (isset($params[$key])) ? $params[$key] : $this->CI->config->item($key);
    }

    if ($this->encryption_key == '')
    {
        show_error('In order to use the Session class you are required to set an encryption key in your config file.');
    }

    // Load the string helper so we can use the strip_slashes() function
    $this->CI->load->helper('string');

    // Do we need encryption? If so, load the encryption class
    if ($this->sess_encrypt_cookie == TRUE)
    {
        $this->CI->load->library('encrypt');
    }

    // Are we using a database?  If so, load it
    if ($this->sess_use_database === TRUE AND $this->sess_table_name != '')
    {
        $this->CI->load->database();
    }

    // Set the "now" time.  Can either be GMT or server time, based on the
    // config prefs.  We use this to set the "last activity" time
    $this->now = $this->_get_time();

    // Set the session length. If the session expiration is
    // set to zero we'll set the expiration two years from now.
    if ($this->sess_expiration == 0)
    {
        $this->sess_expiration = (60*60*24*365*2);
    }

    // Set the cookie name
    $this->sess_cookie_name = $this->cookie_prefix.$this->sess_cookie_name;

    $ip_address = $this->CI->input->ip_address();
    if(!isset($this->sess_ignore_ip) || empty($this->sess_ignore_ip) || !in_array($ip_address, $this->sess_ignore_ip))
    {
        // Run the Session routine. If a session doesn't exist we'll
        // create a new one.  If it does, we'll update it.
        if ( ! $this->sess_read())
        {
            $this->sess_create();
        }
        else
        {
            $this->sess_update();
        }
    }

    // Delete 'old' flashdata (from last request)
    $this->_flashdata_sweep();

    // Mark all new flashdata as old (data will be deleted before next request)
    $this->_flashdata_mark();

    // Delete expired sessions if necessary
    $this->_sess_gc();

    log_message('debug', "Session routines successfully run");
}

/**
 * Garbage collection
 *
 * This deletes expired session rows from database
 * if the probability percentage is met
 *
 * @access  public
 * @return  void
 */
function _sess_gc()
{
    if ($this->sess_use_database != TRUE)
    {
        return;
    }

    srand(time());
    if ((rand() % 100) < $this->gc_probability)
    {
        $expire = $this->now - $this->sess_expiration;

        $this->CI->db->where("last_activity < {$expire}");
        if(isset($this->sess_ignore_ip) && !empty($this->sess_ignore_ip))
            $this->db->where_in('ip_address', $this->sess_ignore_ip);
        $this->CI->db->delete($this->sess_table_name);

        log_message('debug', 'Session garbage collection performed.');
    }
} 
```

配置文件包含要忽略的 IP 地址数组。

在会话库中，我更新了构造函数，以便它检查当前 IP 地址是否存在于上述配置设置中，如果存在，则跳过创建或更新会话的代码。

除此之外，`_sess_gc`我还添加了新的 where_in 语句，该语句将删除 IP 与配置中的 IP 匹配的所有会话行。如果你实现了构造方法，你就不需要这部分了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T23:28:54.107

我建议**不要修改核心文件**，我建议扩展会话类，所以接下来在**./app/libraries/中创建****MY_Session.php**文件并粘贴下一个代码

 **```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');
/**
 * ------------------------------------------------------------------------
 * CI Session Class Extension
 * ------------------------------------------------------------------------
 *
*/
class MY_Session extends CI_Session {
   /**
    * sess_update()
    * 
    * Do not create session if it's in the cli environment
    *
    * @access    public
    * @return    void
    */
    public function sess_create() 
    {
        $CI         = get_instance();
        $ip_address = $CI->input->ip_address();

        if ( ($ip_address != '0.0.0.0' && $CI->input->user_agent() != '0') || $ip_address != '66.249.72.152'){
            parent::sess_create();
        }
    }
}

/* End of file MY_Session.php */
/* Location: ./app/libraries/MY_Session.php */
?> 
```

这行得通

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-19T18:15:20.300

如果您想使用 I created a library drop in 来查看这个`user agent`，通过他们的用户代理阻止机器人，使用简单的`$this->agent->is_robot()`检查 drop in session 扩展。

[https://github.com/donjakobo/codeigniter-clean-sessions](https://github.com/donjakobo/codeigniter-clean-sessions)

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-06-13T13:19:44.010

更改 ci_sessions 表并将 UNIQUE 约束添加到 ip_address 字段。这样就不会有重复的会话..

更复杂的方法是在插入时使用触发器。这将检查 IP 地址是否在您上面提到的两个地址之间。如果是，则不要插入数据库..**

# r - 子设置和聚合 xts 对象

> ID：11015586
> 
> 赞同：0
> 
> 时间：2012-06-13T13:12:46.200
> 
> 标签：r, aggregate, data.table, xts

我有一个包含价格和数量的 xts 对象。我想按时间段拆分数据并汇总数据，以便获得每个时间段拆分的每个价格的交易量表。

我已经破解了一个部分解决方案，但它笨重且缓慢；而且我无法使用模板名称使其工作（因此我无法使我的功能工作）。

xts 对象的子集如下所示：

```
library(xts)
mn <- 
structure(c(97.9, 97.9, 97.9, 97.9, 97.9, 97.9, 97.9, 97.89, 
97.89, 97.89, 97.89, 97.89, 97.89, 97.9, 97.9, 97.89, 97.9, 97.89, 
97.89, 97.89, 97.89, 9, 60, 71, 5, 3, 21, 5, 192, 65, 73, 1, 
1, 39, 15, 1, 1, 18, 1, 33, 1, 1), .Dim = c(21L, 2L), .Dimnames = list(
    NULL, c("px_ym1", "vol_ym1")), index = structure(c(1338561000, 
1338561000, 1338561000, 1338561000, 1338561000, 1338561000, 1338561060, 
1338561060, 1338561060, 1338561060, 1338561060, 1338561060, 1338561060, 
1338561060, 1338561060, 1338561060, 1338561060, 1338561060, 1338561120, 
1338561240, 1338561240), tzone = "", tclass = c("POSIXct", "POSIXt"
)), .indexCLASS = c("POSIXct", "POSIXt"), tclass = c("POSIXct", 
"POSIXt"), .indexTZ = "", tzone = "", class = c("xts", "zoo")) 
```

我已经弄清楚如何使用以下命令进行聚合：

```
PxMat <- aggregate(.~px_ym1, data=mn, sum)
  px_ym1 vol_ym1
1  97.89     408
2  97.90     208 
```

对于子集，我使用以下分组：

```
PxMat2 <- aggregate(.~px_ym1, data=mn[.indexmin(mn) == '30'], sum)
  px_ym1 vol_ym1
1   97.9     169 
```

我有四个具体问题：

1/ 我的数据集非常庞大，所以速度是个问题。这是子集和聚合 xts 的最快方法吗？

2/有没有办法为多次拆分做到这一点？说每分钟、每天、每周或每月的表格？

我正在编写一个带有循环的函数，该函数将生成一个表格，该表格报告指定时间分割的每种情况下每个价格的交易量（例如四个表格，示例数据中每分钟一个）。它看起来很慢，就像有人已经做得更好的事情。是这样吗？

3/ 有没有办法使用模板变量进行子设置？我想获得带有多个数据框的命名聚合函数（上面重现）的表，因为列名会不时不同。

我努力了：

```
PxMat <- aggregate(.~mn[,1], data=mn, sum)
  px_ym1  px_ym1 vol_ym1
1  97.90 1076.79     408
2  97.89  979.00     208 
```

这不是一场灾难，但如果有多个列，我希望将混乱降至最低。我无法弄清楚如何抑制价格系列的聚合。

4/ 在相关说明中，是否可以对不同的数据列应用不同的功能？例如，如果返回的表是：

```
px_ym1  count vol_ym1
1  97.90  11     408
2  97.89  10     208 
```

在 R-help 上交叉发布：[https ://stat.ethz.ch/pipermail/r-help/2012-June/315499.html](https://stat.ethz.ch/pipermail/r-help/2012-June/315499.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T13:43:41.980

我通过电子邮件向您（以及 rhelp，尽管它尚未出现）建议您尝试：

```
adf <- aggregate(vol_ym1 ~ px_ym1, data=mm, sum) 
```

如果您想匿名执行此操作，但删除您可以使用的聚合列的总和：

```
adf <- aggregate(mm[,-1]~mm[,1], data=mm, sum); adf 
```

如果您想要不同的列，那么您需要创建一个函数，该函数将对按拆分标准分隔的完整向量或矩阵进行操作。你需要一个更丰富的例子来得到一个具体的答案。

# jquery - jQuery ajax no cache 在本地主机上有效，但在服务器上无效

> ID：11015589
> 
> 赞同：1
> 
> 时间：2012-06-13T13:12:49.283
> 
> 标签：jquery, ajax, caching, localhost

使用 jQuery ajax 方法，我对某个文件有一个请求，该文件以 json 格式返回数据。该请求是通过单击某个按钮触发的。然后我根据需要显示该数据。在 localhost 上一切正常，但是当我将项目移动到服务器时，出现了一个小问题。在数据库中更新并应显示在该文件中的数据（格式为 json）不会更新，直到我刷新页面。

这是代码：

```
function myAjaxFunction() {

$.ajax({
    'url' : 'MY_URL',
    'type' : 'POST',
    'cache' : false,
    'data' : 'MY_DATA'
    'dataType' : 'json',
    'success' : function(result) {
     // my code here
    }

});

}

var body  = $("body");
body.on('click', '.some_button', function(e) {
    myAjaxFunction();
    e.preventDefault();
}); 
```

我想知道，是不是因为，我缓存了 body 标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T13:16:24.933

在“MY_URL”的末尾添加一些带有随机数的参数

```
'url' : 'MY_URL&amp;'+Math.floor((Math.random()*100)+1), 
```

# c# - 错误：字段初始值设定项无法引用非静态字段、方法或属性

> ID：11015591
> 
> 赞同：1
> 
> 时间：2012-06-13T13:12:52.050
> 
> 标签：c#, field

我找不到以下解决方案：

**代码：**

```
class ApiData

{ SqlCeConnection conn = new SqlCeConnection(@"Data Source=C:\Users\Peter\Documents   \db.sdf;");

SqlCeCommand cmd = null;
    SqlCeDataReader rdr = null;
    public string code()
    {
        conn.Open();
        cmd = conn.CreateCommand();
        cmd.CommandText ="SELECT code FROM Charakter WHERE id=1";
        rdr = cmd.ExecuteReader();
        rdr.Read();
        string selected = rdr.GetString(0);
        conn.Close();
        return (selected);
    }
class Data{
  ApiData g= new ApiData();
    string vode = **g.code();**
} 
```

**错误：**

> 字段初始值设定项不能引用非静态字段、方法或属性

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-13T13:16:06.413

字段的初始值需要使用常量、静态字段/方法/属性或新实例。相反，将其设置在您的构造函数中：

```
class Data
{
    ApiData g;
    string vode;

    public Data()
    {
        g = new ApiData();
        vode = g.code();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-13T14:21:49.877

尝试制作`static`给出此问题的字段

```
//INITIALLY this field was non-static 
//public string ConnectionString = "Data Source=ServerName;Initial Catalog=DBname;User Id=user_id;Password=password";

//Make this field static
public static string ConnectionString = "Data Source=ServerName;Initial Catalog=DBname;User Id=user_id;Password=password";
static SqlConnection sqlConnection = new SqlConnection(ConnectionString); 
```

希望这可以帮助...

# liferay - 如何使用电子邮件/密码对外部 Web 应用程序使用 Liferay 身份验证

> ID：11015600
> 
> 赞同：2
> 
> 时间：2012-06-13T13:13:14.697
> 
> 标签：liferay, liferay-6

我有另一个使用 liferay 用户数据库的网络应用程序。但在用户可以访问该网站之前，他需要先进行身份验证。如何实现此功能，我尝试使用电子邮件/密码搜索 WS api 进行身份验证，但没有找到。

此外，用户应该仍然能够登录到 liferay 门户。并且登录应该像另一个liferay web 服务。

有什么提示吗？

嗯，因为我可以访问数据库，也许一种方法是散列客户端提供的密码？并根据存储在数据库中的值进行验证。

发现 PwdEncryptor 类是负责加密密码的类，不幸的是它与 liferay 有太多的依赖关系，我无法将其拉出:-？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T06:20:52.130

这可能不是最好的方法，但这个解决方案可能是您正在寻找的。它只需要用户的公司 ID、电子邮件和密码。就我而言，我有来自 liferay 的默认公司 ID。

要验证电子邮件/密码，您可以在我的情况下调用其他 liferay 网络服务：get-user-id-by-email-address。然后通过 HTTP Basic 对用户进行身份验证。当使用 jersey rest webservice 调用 liferay web 服务时，您可以这样编写代码：

```
String url += String.format("user/get-user-id-by-email-address?companyId=%s&emailAddress=%s",
                properties.getProperty("default.company.id"), email);

ClientConfig config = new DefaultClientConfig();
Client client = Client.create(config);
client.addFilter(new HTTPBasicAuthFilter(email, password));
WebResource service = client.resource(url);
ClientResponse response = service.accept("application/json").post(ClientResponse.class);

if (response.getClientResponseStatus() == com.sun.jersey.api.client.ClientResponse.Status.OK) {
 //valid user
} else {
  //invalid user
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T13:32:44.640

您可以通过将 Liferay 配置为使用 CAS 或 OpenSSO 在您的站点上实施单点登录解决方案。有多种来源：[OpenSSO-Liferay](http://www.liferay.com/web/guest/community/wiki/-/wiki/Main/OpenSSO+Integration)、[CAS-Liferay](http://www.liferay.com/community/wiki/-/wiki/Main/CAS+Liferay+6+Integration)。

# javascript - ExtJS 4 从控制器创建视图

> ID：11015604
> 
> 赞同：0
> 
> 时间：2012-06-13T13:13:32.503
> 
> 标签：javascript, extjs

我有一个控制器，我想在其中创建一个视图：

```
var list = Ext.widget('installBaseList', params); 
```

这是视图：

```
Ext.define("FI.view.InstallBaseList", {
extend: 'Ext.grid.Panel',
require: 'FI.store.InstallBaseStore',
title: 'List',

alias: 'widget.installBaseList',
  //other config
}); 
```

我明白了`name is undefined`。我如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T14:15:32.837

你的代码有点工作......检查这个例子[http://jsfiddle.net/nscrob/EcX3Q/](http://jsfiddle.net/nscrob/EcX3Q/)

问题可能是您试图在控制器的 init 中创建视图，而该视图尚未定义。您可以发布整个控制器，以便我们更清楚地了解您的代码

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T13:53:48.673

很可能您的视图未加载。检查依赖项和`requires`. 如果您使用的是应用程序的非缩小版本 - 您是否看到加载了视图类的文件？

# c# - 在 C# 中转换 int->hex->binary 时出现错误“十六进制字符串的位数为奇数”

> ID：11015605
> 
> 赞同：0
> 
> 时间：2012-06-13T13:13:32.530
> 
> 标签：c#, integer, hex, bytearray

***目标 ：***

首先将整数值转换为十六进制字符串，然后再转换为字节[]。

***例子 ：***

```
 Need to convert  int:1024 to hexstring:400 to byte[]: 00000100 00000000 
```

***方法：***

为了从整数转换为十六进制字符串，我尝试了下面的代码

```
 int i=1024;
    string hexString = i.ToString("X"); 
```

我得到的十六进制值是“400”。然后我尝试使用下面的代码将十六进制字符串转换为字节 []

```
 byte[] value = HexStringToByteArray(hexValue);

    /* function for converting hexstring to  byte array */
    public  byte[] HexStringToByteArray(string hex)
    {

        int NumberChars = hex.Length;

        if(NumberChars %2==1)
          throw new Exception("Hex string cannot have an odd number of digits.");

        byte[] bytes = new byte[NumberChars / 2];
        for (int i = 0; i < NumberChars; i += 2)
            bytes[i / 2] = Convert.ToByte(hex.Substring(i, 2), 16);
        return bytes;

    } 
```

***错误：***

在这里我得到了例外“十六进制字符串不能有奇数位数”

***解决方案***：??

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T13:15:08.267

您可以强制`ToString`返回特定位数：

```
string hexString = i.ToString("X08"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T13:18:34.757

异常是由您自己的代码引发的。您可以使您的代码更灵活地接受具有奇数位数的十六进制字符串：

```
if (hex.Length % 2 == 1) hex = "0"+hex; 
```

现在您可以删除奇数/偶数检查，您的代码就可以了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-13T13:17:21.403

您的代码会引发您看到的异常：

```
throw new Exception("Hex string cannot have an odd number of digits."); 
```

您可以改进转换方法以接受奇数的十六进制字符串长度，如下所示：

```
using System.Collections.Generic;
using System.Linq;

// ...

public  byte[] HexStringToByteArray(string hex)
    {
        var result = new List<byte>();

        for (int i = hex.Length - 1; i >= 0; i -= 2)
            {
                if (i > 0)
                    {
                        result.Insert(0, Convert.ToByte(hex.Substring(i - 1, 2), 16));
                    }
                else
                    {
                        result.Insert(0, Convert.ToByte(hex.Substring(i, 1), 16));
                    }
            }

        return bytes.ToArray();
    } 
```

此代码应从其末尾迭代十六进制字符串，将新字节添加到结果列表的开头（在返回值之前将转换为数组）。如果剩下一个数字，将单独处理。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-13T13:19:53.590

您的十六进制字符串有奇数位数，您正在明确检查并抛出异常。您需要决定为什么将这行代码放在那里，以及是否需要删除它以支持其他逻辑。

其他选项包括：

1.  在字符串的开头添加“0”以使其长度均匀
2.  强制调用该代码的人始终提供偶数长度的字符串
3.  更改后面的代码以正确处理奇数个字符...

在评论中，您建议第一个是您在这种情况下需要知道的内容：

```
if(hex.Length%2==1)
    hex = "0"+hex; 
```

把它放在你的方法的开头，如果你得到一个奇数，那么你会自动添加零。然后，您当然可以取出以后的检查和异常抛出。

值得注意的是，您可能希望将输入字符串验证为十六进制，或者可能只是在转换过程中使用 try catch 以确保它是有效的十六进制字符串。

此外，由于尚不清楚字符串是必要的中间步骤还是您认为必要的步骤，您可能对[C# int to byte[]](https://stackoverflow.com/questions/1318933/c-sharp-int-to-byte)感兴趣，它处理在没有中间字符串的情况下转换为字节。

# sql-server-2005 - SQL Server 2005 SSIS 是否支持 UTF-16BE (Big Endian)？

> ID：11015608
> 
> 赞同：1
> 
> 时间：2012-06-13T13:13:35.700
> 
> 标签：sql-server-2005, encoding, ssis, endianness, utf-16

根据[这个论坛](http://social.msdn.microsoft.com/Forums/en-US/sqlintegrationservices/thread/8c2a1c56-2889-47b2-bee3-5b5651b9ec72)，SSIS 仅支持 UTF-16 Little Endian 平面文件。所有文件都是这样吗？我想通过 SSIS 加载一个 UTF-16 BE XML 文件。支持/可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T20:11:11.140

我创建了一个 UTF-16BE 编码的 XML 文件并在 SSIS 中运行了一个简单的导入任务，它工作得很好。我不确定以不同方式处理平面文件的动机，但我认为这与遗留代码有关。

更新：我在 SSIS 2008 上运行了这个。安装 SSIS 2005 进行确认。更新：我确认这也适用于 SSIS 2005。

# jquery - 如何从 Javascript 调用 Spring MVC？

> ID：11015611
> 
> 赞同：0
> 
> 时间：2012-06-13T13:13:43.357
> 
> 标签：jquery, spring-mvc

如何从请求参数中实例化自定义对象？（我已经尝试过@ModelAttribute 和@RequestParam）

```
@RequestMapping(method = RequestMethod.POST)
public String newPerson(@ModelAttribute(value = "personModel") 
                          Person person, BindingResult result) {
// Person has just firstname and lastname fields
 } 
```

我尝试使用以下代码使用 jQuery 调用它：

```
var PersonText = '["firstname":"John", "lastname":"Someone"]';
$.ajax({
type : 'POST',
url : "/addnewperson.do",
data : {'personModel' : personText},
datatype : 'json',
success : function(data) {
    var obj = jQuery.parseJSON(data);
}
}); 
```

事实上，我最初的计划是将整个人员对象列表发送到控制器，但由于这不起作用，我恢复为单个对象，但现在这也不起作用。

编辑：参数不必是 JSON，我只是认为将 Javascript 对象序列化为 JSON 到 Spring Controller 是有意义的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T07:24:50.830

我能够让它与来自 Javascript (jquery) 的以下调用一起工作

```
$.post("/modifylist.do",{ firstname: "John", lastname: "Doe" } ); 
```

但是，我仍然很想知道如何让它与数组或列表一起使用，即参数是`Person[]`or `List<Person>`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-21T12:11:47.773

```
@RequestMapping(method = RequestMethod.POST)
public String newPerson(@RequestParam("personModel") String person,    BindingResult result) {
Gson gson = new Gson();
Person finalObject = gson.fromJson(person, Person.class);
// Person has just firstname and lastname fields
 } 
```

你可以像这样使用它。对于列表，您可以使用以下内容：

```
Gson gson = new Gson();
List<Person> finalObjectList = gson.fromJson(Person, new TypeToken<List<Person>>() {
    }.getType()); 
```

我希望对你有帮助:)

# android - 可以在对话框而不是活动中显示和引擎场景

> ID：11015612
> 
> 赞同：1
> 
> 时间：2012-06-13T13:13:44.120
> 
> 标签：android, andengine

目前我正在评估在我的应用程序中使用 andengine 的可能性（演示时使用的原型）。

是否可以在对话中显示和引擎场景而不是活动？

我的意思是，我在我的android活动中单击按钮，弹出对话框，并且对话框中有简单的andengine场景......

感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T13:55:53.630

好的发布作为答案，但我认为这已经被提到过几次。如果您必须进行任何修改和/或修复，请将它们添加到此答案中

* * *

***答：*** 尝试创建带有对话框主题的Activity

一种方法：

```
<activity android:theme="@android:style/Theme.Dialog" /> 
```

# nunit - 链 psexec 和 nunit 不工作（psexec exit with code 1 and nunit is crashed）

> ID：11015614
> 
> 赞同：0
> 
> 时间：2012-06-13T13:13:51.983
> 
> 标签：nunit, cruisecontrol.net, autotest, psexec

抱歉主题不清楚，但我真的不明白问题出在哪里。

我使用一个系统进行自动测试 c#+webdriver for chrome + nunit (2.6) + cc.net (1.6.7981.1)

我的测试是通过 psexec 在远程机器（**Windows XP SP 2 x86**）上运行的，它在远程机器上启动 bat 文件

bat 文件包含 2 个命令：

运行 msbuild 运行 nunit-console

好吧，psexec 有下一个参数 /accepteula \MachineName -u Login -p Pass -s Path\start.bat

bat 文件有下一个命令 nunit-console-x86.exe "%PROJECT_FOLDER%\Path\Tests.dll" "/xml=%TEST_RESULT_PATH%"

当 cc.net 启动 psexec 测试开始并且测试在一段时间内工作。意外，psexec 以代码 1 退出

> message level="Error">Path\start.bat 在 MachineName 上退出，错误代码为 1。消息

但是远程机器上的 nunit-console 正在继续工作

一段时间后控制台因错误而崩溃

> szAppName：nunit-console-x86.exe szAppVer：2.6.0.12051
> szModName：kernel32.dll szModVer：5.1.2600.2180 偏移量：0001eb33

来自事件日志的消息

> 应用程序：nunit-console-x86.exe 框架版本：v4.0.30319 描述：进程因未处理的异常而终止。异常信息：System.IO.IOException 堆栈：在 System.IO._Error.WinIOError *(Int32, System.String) 在 System.IO。*_ConsoleStream.Write(Byte[], Int32, Int32) 在 System.IO.StreamWriter.Flush(Boolean, Boolean) 在 System.IO.StreamWriter.Write(Char[], Int32, Int32) 在 System.IO.TextWriter.WriteLine (System.String) 在 System.IO.TextWriter.WriteLine(System.String, System.Object) 在 System.IO.TextWriter+SyncTextWriter.WriteLine(System.String, System.Object) 在 System.Console.WriteLine(System. String, System.Object) 在 NUnit.ConsoleRunner.Runner.Main(System.String[]) 在 NUnit.ConsoleRunner.Class1.Main(System.String[])

如果在本地运行 nunit 则没有问题（nunit-console 很有趣）。

前段时间系统工作，我不知道发生了什么变化（这是最糟糕的情况）

我该如何解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T14:34:44.923

这个问题解决了！现在系统正在运行

# c# - C# 线程安全（特别是 MVVM/WPF）

> ID：11015615
> 
> 赞同：3
> 
> 时间：2012-06-13T13:13:58.037
> 
> 标签：c#, wpf, mvvm

我想知道我需要做什么才能使模型在 MVVM 中线程安全。假设我有以下类，它被实例化为单例：

```
public class RunningTotal: INotifyPropertyChange
{
   private int _total;
   public int Total
   {
      get { return _total; }
      set
      {
         _total = value;
         PropertyChanged("Total");
      }
   }
   ...etc...
} 
```

我的视图模型通过一个属性公开它：

```
public RunningTotal RunningTotal { get; } 
```

我的视图绑定了一个文本块，即`{Binding Path=RunningTotal.Total}`.

我的应用程序有一个后台线程，它会定期更新 Total 的值。假设没有其他东西更新 Total，我应该做什么（如果有的话）使所有这些线程安全？

现在，如果我想做类似的事情但使用 type 的属性`Dictionary<>`，或者`ObservableCollection<>`？哪些成员（添加、删除、清除、索引器）是线程安全的？我应该改用 ConcurrentDictionary 吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-13T13:22:17.633

> 我的应用程序有一个后台线程，它会定期更新 Total 的值。假设没有其他东西更新 Total，我应该做什么（如果有的话）使所有这些线程安全？

对于标量属性，你不需要做任何特别的事情；该`PropertyChanged`事件会自动编组到 UI 线程。

> 现在，如果我想做类似的事情但使用 Dictionary<> 或 ObservableCollection<> 类型的属性怎么办？哪些成员（添加、删除、清除、索引器）是线程安全的？我应该改用 ConcurrentDictionary 吗？

不，这不是线程安全的。如果您`ObservableCollection<T>`从后台线程更改 an 的内容，它将中断。您需要在 UI 线程上执行此操作。一种简单的方法是使用一个在 UI 线程上引发其事件的集合，就像[这里](http://www.thomaslevesque.com/2009/04/17/wpf-binding-to-an-asynchronous-collection/)描述的那样。

至于`Dictionary<TKey, TValue>`，它不会在其内容更改时发出通知，因此 UI 无论如何都不会收到通知。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T13:20:15.747

假设有两个线程正在更新`Total`，并且您想`_total`在`PropertyChanged`方法中记录所有更改。现在有一个竞争条件`PropertyChanged`可能会丢失一个值。当线程在调用过程中阻塞时会发生这种情况`set_Total`。它更新`_total`但尚未调用 PropertyChanged。与此同时，另一个线程更新`_total`为另一个值：

```
thread1: _total = 4;
thread2: _total = 5;
thread2: PropertyChanged("Total");
thread1: PropertyChanged("Total"); 
```

现在，`PropertyChanged`永远不会以 4 的值调用。

您可以通过将值传递给`PropertyChanged`方法或在 setter 中使用锁来解决此问题。

由于您说您有一个更新此属性的线程，因此不可能出现竞争条件。只有当多个线程（或进程）同时更新同一事物时才会出现这种情况。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-13T13:18:07.363

模型应该像任何代码一样以线程安全的方式编写；由您决定是否使用锁、并发容器或其他任何方式来执行此操作。模型只是库代码，它（几乎）不应该知道它的功能将被 MVVM 应用程序使用。

但是，VM 必须在 UI 线程中工作。这意味着他们通常不能依赖模型中的事件来自 UI 线程，因此如果订阅的事件不是来自 UI 线程，他们必须编组调用或将它们存储在任务队列中。

因此，VM 是一个应该以特定方式关心线程安全的地方，而不是模型需要的地方。

反过来，View 代码通常可以快乐地忽略所有线程问题：它在专用 UI​​ 线程中获取所有消息/调用/事件/任何内容，并在 UI 线程中进行自己的调用。

* * *

特别针对您的情况，您的代码不是模型而是VM，对吗？在这种情况下，您必须在 UI 线程中触发您的事件，否则 View 会不高兴。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-13T13:28:27.770

这个问题提供了 ObservableCollection 的线程编组版本

[如何从后台线程正确更新数据绑定 datagridview](https://stackoverflow.com/questions/455766/how-do-you-correctly-update-a-databound-datagridview-from-a-background-thread)

但是，您仍然需要担心线程之间的争用，这将要求您在更新资源时锁定资源，或者使用诸如 Interlocked.Increment 之类的东西。

如果一个线程正在更新，而另一个线程正在读取，则存在读取在更新的中途完成的可能性（例如，正在修改 Int64。前半部分（32 位）已在一个线程中更新，并且在后半部分更新之前，从第二个线程读取值。读取的值完全错误）

这可能是也可能不是问题，具体取决于您的应用程序将要执行的操作。如果错误的值会在 GUI 上闪烁 1 秒，那么它可能没什么大不了的，锁的性能损失可以忽略不计。如果您的程序要根据该值采取行动，那么您可能需要将其锁定。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-18T22:30:57.283

一些更复杂的事情实际上是如此简单......在您的视图中实例化您的视图模型时，只需将调度程序向下传递到 ctor 中。

```
 ServerOperationViewmodel ViewModel;        
    public pgeServerOperations()
    {
        InitializeComponent();
        ViewModel = new ServerOperationViewmodel(Dispatcher);
    } 
```

然后在您的视图模型中：

```
Dispatcher UIDispatcher;
public ServerOperationViewmodel(Dispatcher uiDisp)
{
    UIDispatcher = uiDisp;
} 
```

并像普通的 UI 调度程序一样使用它。

```
UIDispatcher.Invoke(() =>
{
  .......
}); 
```

我承认我对 MVVM 还是很陌生，但我不认为这违反了 MVVM 的座右铭。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-01-22T02:37:21.023

一个简单的答案是，您需要通过 UI Thread 的 Dispatcher 来安排 UI Thread 中的属性更新。这会将更新操作放入不会使应用程序崩溃的队列中。

```
private void handler(object sender, EventArgs e)
{
    Application.Current.Dispatcher.BeginInvoke(DispatcherPriority.Normal, (ThreadStart)delegate { updates(); });
}

private void updates() { /* real updates go here */ } 
```

# http - 使用提琴手更改方案

> ID：11015620
> 
> 赞同：2
> 
> 时间：2012-06-13T13:14:21.780
> 
> 标签：http, https, fiddler

我使用 fiddler 作为反向代理，我的查询是我们如何使用 fiddler 将 https 请求更改为 http。我正在尝试创建一个规则，该规则可以更改传入的请求，即 https 并以 http 形式返回。

这可以通过在提琴手中编辑规则来实现吗？有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T14:34:02.277

你没有说你已经尝试了什么？不清楚您所说的“以 HTTP 形式返回”是什么意思——HTTPS 请求可以很容易地路由到 HTTP 端点，但是当客户端获得响应时，它将通过 HTTPS。

您可以轻松更改请求的方案：

```
if (!oSession.isHTTPS && !oSession.HTTPMethodIs("CONNECT") && 
    oSession.HostnameIs("myServer")) 
{
  oSession.oRequest.headers.UriScheme = "https";
} 
```

我假设您已经知道如何让 Fiddler 充当 HTTPS 的反向代理。这不是显而易见的，但在新的 Fiddler 书中得到了很好的介绍。

# c# - 如何获取可空类型 ?

> ID：11015622
> 
> 赞同：8
> 
> 时间：2012-06-13T13:14:32.093
> 
> 标签：c#

如何在 C# 中执行以下操作？

```
Type _nullableEnumType = typeof(Enum?); 
```

我想一个更好的问题是为什么当你可以这样做时你不能这样做：

```
Type _nullableDecimalType = typeof(decimal?); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-13T13:17:10.083

`Enum`不是**枚举**- 它是枚举的基类，并且是引用类型（即 a `class`）。这意味着这`Enum?`是非法的，因为`Nullable<T>`有一个限制`T : struct`，并且`Enum`不满足。

所以：要么使用`typeof(Nullable<>).MakeGenericType(enumTypeKnownAtRuntime)`，或者更简单，`typeof(EnumTypeKnownAtCompileTime?)`

您可能还需要注意：

```
Enum x = {some value}; 
```

***是一个装箱操作***，所以你通常应该避免使用`Enum`作为参数等。

# mysql - Mysql：用键对字符串进行异或

> ID：11015628
> 
> 赞同：4
> 
> 时间：2012-06-13T13:14:42.683
> 
> 标签：mysql, string, bit-manipulation, xor

我想用 KEY 对字符串（实际上是它的二进制表示）进行按位异或。

运算结果应以 HEX 表示。

我所拥有的：'a' - 要更改的 UTF-8 字符串。'ACF123456' - 十六进制的键。

结果被视为 BIGINT：

```
select CONV(HEX('a'), 16, 10)  ^  CONV('ACF123456', 16, 10); 
```

结果显示为十六进制：

```
select CONV( CONV(HEX('a'), 16, 10)  ^  CONV('ACF123456', 16, 10), 10, 16); 
```

问题：

1.  上面的转换是否正确完成？
2.  如果字符串太长会发生什么（即，我们有 'a veeeeeery long string' 而不是 'a'）？似乎 conv() 函数有一个限制（它是文档中的 64 位精度）吗？除了 XOR 运算符之外，^ 也有一个限制，与 nr 相关。返回结果的位数。任何适用于任何字符串的解决方案（允许存储过程）？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T21:09:00.330

你的转换对我来说很好。正如您所指出的，两者[`CONV()`](http://dev.mysql.com/doc/refman/5.5/en/mathematical-functions.html#function_conv)都[`^`](http://dev.mysql.com/doc/refman/5.5/en/bit-functions.html#operator_bitwise-xor)确实具有 64 位精度。

2^64 = 16^16，因此超过 16 个十六进制数字的字符串*应*转换为大于 2^64 的整数。然而，当试图将它们转换为整数时，这些字符串将被从左边粗暴地（无声地）截断。

我的解决方案的重点是对这些字符串进行切片。显然，结果可能不会显示为整数，而仅显示为字符串表示。

*让* `@input` *成为您的“要更改的字符串”和* `@key`您*的“关键”。*

1.  分配`HEX(@input)`给`@hex_input`。这里没问题，因为`HEX()`可以使用字符串。
2.  `@hex_input`从右边开始，切成 16 位十六进制数字长字符串
3.  同样，切成`@key`16 位长的字符串。
4.  从右侧开始，用的每个 64 位切片计算 的`X-OR`每个 64 位切片的。使用. 如果其中一个或具有比另一个字符串少的切片，则另一个字符串的剩余切片为 0。`@hex_input``@key``CONV(@slice, 16, 10)``@hex_input``@key``X-OR`
5.  将 in 点 4\. 中产生的每个 64 位数字转换`X-OR`回带有 . 的十六进制字符串`UNHEX()`。
6.  重新组装生成的切片。这是你的结果。

三`TEMPORARY`列表可以用作一个数组来存储 的切片`@hex_input`和`@mask`生成的切片。

把这一切放在一个存储过程中，*瞧*！

You sound like you have some skills in MySQL, you should be able to translate the above into real code. But I'll be happy to help if you need further guidance.

# c# - 在运行时打开/关闭 Postsharp 跟踪？

> ID：11015635
> 
> 赞同：4
> 
> 时间：2012-06-13T13:14:58.527
> 
> 标签：c#, trace, postsharp

谁能告诉我，如果在 PostSharp 中，我可以以某种方式在运行时打开/关闭跟踪？我需要编写更少的代码，所以最近我可以简单地删除它。暂时需要跟踪功能。

也许有运行时开/关功能的 PostSharp 替代品？

**更新1：**我想出了主意，但我不知道它是否好。这是一个例子

```
 public class Smth
    {
        private long i = 0;

        [TraceAttribute]
        public void Execute()
        {
            Console.WriteLine("Execute call" + i++);
            Thread.Sleep(200);
        }
    }

    [Serializable]
    public class TraceAttribute : OnMethodBoundaryAspect
    {
        public override void OnEntry(MethodExecutionArgs args)
        {
            if(Manager.IsEnabled)
            {
                Console.WriteLine();
                Console.WriteLine(string.Format("Entering {0}", args.Method.Name));
            }
        }

        public override void OnExit(MethodExecutionArgs args)
        {
            if(Manager.IsEnabled)
            {
                Console.WriteLine(string.Format("Leaving {0}", args.Method.Name));
                Console.WriteLine();
            }
        }
    }

    public static class Manager
    {
        public static bool IsEnabled { get; set; }

        static Manager()
        {
               IsEnabled = true;
        }
    } 
```

通过更改 IsEnabled 属性，我能够打开/关闭跟踪...还有其他建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T14:42:12.543

你所拥有的一切都很好（只要它是暂时的）。使用多播轻松应用方面。请参阅我的文章[http://www.sharpcrafters.com/blog/post/Day-2-Applying-Aspects-with-Multicasting-Part-1.aspx](http://www.sharpcrafters.com/blog/post/Day-2-Applying-Aspects-with-Multicasting-Part-1.aspx)和[http://www.sharpcrafters.com/blog/post/Day -3-Applying-Aspects-with-Multicasting-Part-2.aspx](http://www.sharpcrafters.com/blog/post/Day-3-Applying-Aspects-with-Multicasting-Part-2.aspx)

免责声明：我假设 OP 想要在没有重建的情况下执行此操作，因为他说运行时这让我相信他想要一个配置设置。否则我会建议一条截然不同的路线

# eclipse - Eclipse 随机停止启动

> ID：11015636
> 
> 赞同：6
> 
> 时间：2012-06-13T13:15:05.313
> 
> 标签：eclipse, java

我最近一直在使用 Eclipse，并且没有遇到任何问题。昨晚，我工作得非常好。但是，今天早上，每当我加载它时，程序在加载启动屏幕的一半处停止工作（在实际工作区打开之前）。该信息显示“正在加载工作台”并且永远停留在那里。当我多次单击它时，我收到一条消息说 Java(TM) Platform SE 二进制文件没有响应。

谷歌并没有提供太多帮助，而且似乎只是给出了很多关于 Minecraft 的回应。我有点困惑我需要从哪里开始寻找，因为自从我上次成功使用它以来没有任何改变。没有更新 Java 或 Eclipse 或其他任何东西。感谢您的帮助，如果您需要更多信息，请告诉我！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T14:39:34.663

实际上，我只需将我的 WorkSpace 重命名为 WorkSpace1 即可修复它。显然它以某种方式损坏了，并且通过重命名 Eclipse 能够重新创建一个新的。这是帮助我的链接：

[http://spacetech.dk/eclipse-failed-java-was-started-but-returned-exit-code-805306369.html](http://spacetech.dk/eclipse-failed-java-was-started-but-returned-exit-code-805306369.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T16:36:23.697

Eclipse 出现问题时要检查两件事：

1.  首先，始终检查`.log`位于**工作区**`.metadata`目录 ( `<workspace path>/.metadata/.log`) 中的文件（不是 Eclipse 安装目录）。请记住，这是 Linux 或 Mac OS 下的隐藏文件。它通常包含导致崩溃的异常。我通常在启动 Eclipse 之前删除任何现有文件，只是为了确保我正在查看相关的日志条目（该文件将在启动时重新创建）。**`.log`**

***   如果 #1 没有帮助，您可以尝试`.metadata`完全删除该目录。它将在启动时重新创建（这基本上是您通过更改工作区所做的）。在我使用 Eclipse 的经验中，我注意到某些文件可能会在内部损坏`.metadata`，从而使 Eclipse 行为异常。请记住，此目录包含您在 Eclipse 中进行的自定义及其工作区插件，您可能需要再次进行自定义。** 

 **希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T13:20:21.717

Eclipse 有时会很奇怪。如果您将内容移到最初安装的目录之外，通常不会加载。我不知道这是否是您所做的，但最好的办法是备份您的工作区，然后重新安装 eclipse。我相信这会成功的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T13:22:36.160

如果可能，请尝试重新安装，否则检查 Eclipse 错误日志，该日志将出现在“ **/.metadata/.plugins/org.eclipse.ui.workbench/log** ”中。

这将帮助您了解问题所在。**

# datagrid - 关于 .dojoxGridMasterHeader { display:none; }

> ID：11015641
> 
> 赞同：1
> 
> 时间：2012-06-13T13:15:23.417
> 
> 标签：datagrid, header, dojo

我正在使用 dojo dataGrid 来呈现表格。我需要隐藏标题行。

Dojo 文档推荐使用 .dojoxGrid-header { display:none; } 关闭列标题，但我只看到调试器中使用了 dojoxGridMasterHeader。 [http://dojotoolkit.org/reference-guide/1.7/dojox/grid/DataGrid.html#hiding-the-headers-of-a-grid](http://dojotoolkit.org/reference-guide/1.7/dojox/grid/DataGrid.html#hiding-the-headers-of-a-grid)

为了隐藏dojo dataGrid 的标题行，我在HTML 文件中定义了它。

```
.dojoxGridMasterHeader { display:none; } 
```

我先加载了 dojo 库，然后加载了我自己的 CSS 样式。

```
<style type="text/css">
.dojoxGridMasterHeader { display:none; }
</style> 
```

但是，UI 仍会在 dataGrid 中显示标题。调试器显示此标头代码

我不明白为什么 CSS 仍然会被覆盖为 style="display: block"

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T13:27:50.883

添加`!important`

```
.dojoxGridMasterHeader {
     display: none !important;
} 
```

[http://jsfiddle.net/cswing/Uy3nQ/](http://jsfiddle.net/cswing/Uy3nQ/)

# iphone - 为什么 cocos2d 中有些图片是红色的？

> ID：11015644
> 
> 赞同：0
> 
> 时间：2012-06-13T13:15:28.647
> 
> 标签：iphone, cocos2d-iphone

在 cocos2d 中使用“TexturePacker”基本版软件并生成 .plist 和 sprite 图像，它会使一些图像变红..任何有解决方案的人......？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T13:18:04.573

这是因为您使用的是基本版本，这是开发人员限制功能的方法。

[购买完整版](http://sites.fastspring.com/codeandweb/product/all)，所有精灵都将是正确的颜色。

# android - 如何重新启动 MAIN 活动

> ID：11015646
> 
> 赞同：2
> 
> 时间：2012-06-13T13:15:30.110
> 
> 标签：android, android-activity, restart

当子活动返回时，我需要更新 MAIN 活动的内容。我在该方法中尝试了以下代码，该代码`onActivityResult()`适用于其他活动（非 MAIN）但不适用于 MAIN 活动。

```
if (resultCode == Activity.RESULT_OK){
    finish();
    startActivity(getIntent());
} 
```

关于如何使 MAIN 活动再次执行 OnCreate() 的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T13:18:49.033

在 OnResume () 方法上写东西..当您返回主活动时，它将始终执行..有关详细信息，请通过活动生命周期..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T00:47:32.453

`setResult()`如果重新启动当前活动，则该问题似乎被忽略。见我的[另一篇文章](https://stackoverflow.com/questions/11043239/setresult-does-not-work-after-activitiy-is-restarted)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-01T15:08:03.020

您的代码应如下所示：

```
Intent intent = new Intent(YourMainActivity.this, YourMainActivity.class);
startActivity(intent);
finish(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-16T22:53:51.540

将以下代码放入`onBackPressed()`方法中：

```
public void onBackPressed() {
    Intent intent= new Intent(MainActivity.this, MainActivity.class);
    startActivity(intent);
} 
```

`MainActivity.class`我的启动器活动在哪里。现在活动将返回到它每次启动的相同内容。

# jquery - 停止 Ajax 调用

> ID：11015647
> 
> 赞同：0
> 
> 时间：2012-06-13T13:15:38.027
> 
> 标签：jquery

```
 $(document).keydown(function(e){
        if (e.keyCode == 37) { 
            move("West");
            return false;
        }
        if (e.keyCode == 38) { 
            move("North");
            return false;
        }
        if (e.keyCode == 39) { 
            move("East");
            return false;
        }
        if (e.keyCode == 40) { 
            move("South");
            return false;
        }
    });

        function move(newDirection)
        {
            var direction = newDirection;

            $.ajax({
                type: "POST",
                url: "ajax/map.php",
                data: { direction: direction },
                success: function(data) {
                    $('#content').html(data);
                }
            });
        } 
```

如果我按住左键的时间过长，电话会不断来电，而且（不会停止）我正在寻找的是延迟，或者只是在按下键时打一个电话（或者可能在释放键时立即停止）但我不确定如何。有关解决方案的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T13:17:34.400

您可以将`keydown`事件更改为`keyup`仅在您停止按下按钮时才会触发。那会有帮助吗？

您可能还会发现此线程很有帮助： [Abort Ajax requests using jQuery](https://stackoverflow.com/questions/446594/abort-ajax-requests-using-jquery)

我做了一个例子：http: [//jsfiddle.net/kdDwd/2/](http://jsfiddle.net/kdDwd/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T13:24:30.063

限制每次调用，你应该使用去抖动模式 - 这是关于为此编写插件的人的文章 - [http://habrahabr.ru/post/60957/](http://habrahabr.ru/post/60957/)（它是俄语，希望谷歌翻译有帮助）

# c# - 如何模拟温莎容器以测试注册

> ID：11015648
> 
> 赞同：0
> 
> 时间：2012-06-13T13:15:45.897
> 
> 标签：c#, nunit, castle-windsor, moq

出于教育目的，我应该如何设置 IWindsorContainer 的模拟，以便我可以对执行的注册进行单元测试？

假设我有这样的方法：

```
public void MakeRegistration<S, T>(IWindsorContainer container)
   where S : class
   where T : class, S
{
   container.Register(Component.For<S>().ImplementedBy<T>().LifeStyle.Transient);
} 
```

我想为它写一个单元测试，使用起订量：

```
var container = new Mock<IWindsorContainer>(MockBehavior.Strict);
container.Setup(c => c.Register(
      Component.For<IFoo>()
      .ImplementedBy<Foo>()
      .LifeStyle.Transient));

var registrar = new MyRegistrar();
registrar.MakeRegistration<IFoo, Foo>(container.Object); 
```

正如预期的那样，上述失败了，但我很好奇如何正确测试它。

我可以使用真正的容器而不是模拟，并验证它是否解析了该类的 2 个不同实例，但我认为它不是“纯”单元测试，因为它实际上依赖于外部代码（windsor 容器本身）的工作。

正如我所说，这是理论上的，因此是否需要它超出了问题的范围。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T13:43:39.917

您只需要一个断言，该实现是针对纯测试`Foo`的服务注册的（使用[NSubstitute](http://nsubstitute.github.com/)的示例，因为我已经有一段时间没有使用 moq 了）。`IFoo`

```
[ Test ]
public void Should_register_implemenation_of_Foo_for_service_IFoo()
{
    var container = Substitute.For<IWindsorContainer>();

    container.Register( Component.For<IFoo>().ImplementedBy<Foo>() );

    container.Received().Register( Arg.Is<IRegistration[]>(x => Test(x) ));

}

private bool Test(IRegistration[] registrations)
{
    var fooRegistration = (ComponentRegistration<IFoo>) registrations[ 0 ];

    return fooRegistration.Implementation == typeof(Foo);
}
public interface IFoo {}

public class Foo : IFoo {} 
```

我知道您已经说过这个问题是理论上的，但提出以下问题很重要，以便那些刚接触 TDD 的人认为您必须以这种方式做事。

*测试应该指示**组件如何实现其目标**，还是应该只测试**组件是否实际实现了它的目标**？*

IMO 我觉得编写一个集成测试更有价值，该测试表明连接是正确的，而不是确保在依赖项上调用某些方法。

# ruby-on-rails - 覆盖 ActiveRecord 类方法

> ID：11015649
> 
> 赞同：0
> 
> 时间：2012-06-13T13:15:46.443
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我目前正在设置一个用户模型，并且我有一个设置，新用户通过电子邮件发送激活令牌。当他们点击链接时，被调用的控制器方法有一行

```
@user = User.find_by_activation_token! params[:activation_token] 
```

现在我的激活令牌有一个 24 小时的有效期，如果它已经过期，我希望用户记录被销毁。这对我来说很容易在控制器中实现，但我正在努力成为一个更好的 Rails 开发人员和更好的 Ruby 程序员，所以我认为我应该把它放在模型中（瘦控制器，胖模型！）。我认为它也能让我更好地了解类方法。

我对此进行了几次尝试，但都非常不成功。这是我迄今为止的最大努力；

```
def self.find_by_activation_token!(activation_token)
  user = self.where(activation_token: activation_token).first #I also tried User.where but to no avail
  if user && user.activation_token_expiry < Time.now
    user.destroy
    raise ActivationTokenExpired
  else
    raise ActiveRecord::RecordNotFound
  end
  user
end 
```

我是否必须做出很多改变才能让它做我想做的事情，还是我完全走错了路？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T13:29:12.170

我想我明白了。你的条件逻辑有点不对劲

```
def self.find_by_activation_token!(activation_token)
  user = self.where(activation_token: activation_token).first #I also tried User.where but to no avail
  # if this user exists AND is expired
  if user && user.activation_token_expiry < Time.now
    user.destroy
    raise ActivationTokenExpired
  # otherwise (user does not exist OR is not expired)
  else
    raise ActiveRecord::RecordNotFound
  end
  user
end 
```

我认为应该更像这样：

```
def self.find_by_activation_token!(activation_token)
  user = self.where(activation_token: activation_token).first #I also tried User.where but to no avail

  raise ActiveRecord::RecordNotFound unless user

  if user.activation_token_expiry < Time.now
    user.destroy
    raise ActivationTokenExpired
  end

  user
end 
```

# javascript - 如何解析时间因子正则表达式

> ID：11015650
> 
> 赞同：0
> 
> 时间：2012-06-13T13:15:49.643
> 
> 标签：javascript, regex

我正在使用正则表达式`([1-9]|1[0-2]|0[1-9]):([0-5][0-9]) (AM|PM|am|pm)`作为时间因素。例如 HH:MM 下午。

现在我必须使用这个正则表达式。

示例代码：

```
if(currentVal.match(/([1-9]|1[0-2]|0[1-9]):([0-5][0-9]) (AM|PM|am|pm)/g) != currentVal) {
    alert("Invalid time.");
}                         

var parts = currentVal.split(" ");

var parts = currentVal.split(":");
parts[0] = parseInt(parts[0]);
parts[1] = parseInt(parts[1]);

if(parts[0] == 12) {
    parts[0] = 0;
}
if(parts[1].toLowerCase() == 'pm') {
    parts[0] += 12;
} 
```

在这里，我的错误是`parseInt(parts[1])`；因为正则表达式有“：”和“空格”和“（AM | PM | am | pm）”所以它不会转换`parts[1]`为小写。

谁能帮我使用这个正则表达式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T13:35:43.140

除了其他人指出的语言滥用之外，而不是这个......

```
var parts = currentVal.split(" ");
var parts = currentVal.split(":"); 
```

...使用另一个正则表达式按空格*和*冒号分隔：

```
var parts = currentVal.split(/[ :]/); 
```

然后当然`'pm'`将存储在`parts[2]`.

# php - 推送通知 - 查看按钮操作

> ID：11015652
> 
> 赞同：0
> 
> 时间：2012-06-13T13:15:54.027
> 
> 标签：php, iphone, uiwebview, push-notification, push

我有一个工作应用程序女巫发送我的推送通知没有任何问题。点击Push的“查看”按钮后——App打开了，但是看到的是一个黑屏，没有任何内容。

我将如何让它工作，点击查看按钮后，我会在应用程序中看到“内容”？

我的想法是（例如）：我收到包含以下内容的推送通知：今天您在我们的商店获得 30% 的折扣

单击查看后，我将进入应用程序并可以阅读包含所有内容的完整消息。我的意思是像博客一样工作。推送通知是前文，“查看”按钮是“阅读更多”标签。在我的应用程序中，我可以阅读几篇文章。就像这里：[http ://www.myfitapp.de/fitnessstudio-app/push-nachrichten/](http://www.myfitapp.de/fitnessstudio-app/push-nachrichten/)

可能吗？如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T13:32:46.577

是的，这当然是可能的。但是您不能通过推送通知发送大量内容。v 推送通知总共最多可以是 256 字节。

您可以做的是向通知的 userInfo 添加一些数据，链接一个 ID。然后在用户打开您的应用程序后，通过解析通知中的 ID 从服务器获取内容。

如果用户单击通知时您的应用程序未运行

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {

   NSDictionary *remoteNotif = [launchOptions objectForKey: UIApplicationLaunchOptionsRemoteNotificationKey];
   if (remoteNotif) {
      ///Handle the notification
   } 

   /* Your regular init  */

   return YES; 
} 
```

如果您的应用程序正在运行，则调用此方法：

```
- (void) application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo {
  ///Handle the notification
} 
```

在其中，`NSDictionary`您可以获得通知消息和您添加到通知中的任何其他数据。

--

推送通知的 Userinfo 部分只是 JSON，[即 Notification Payload](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html#//apple_ref/doc/uid/TP40008194-CH100-SW1)。

```
{
    "aps" : {
        "alert" : "You got your emails.",
        "badge" : 9,
        "sound" : "bingbong.aiff"
    },
    "acme1" : "bar",
    "acme2" : 42
} 
```

这个来自 Apple 的示例，`aps`JSON 的一部分告诉应用程序在徽章图标中显示 9 和“你收到了你的电子邮件”。作为消息文本。收到此通知后，系统会在应用程序包中查找`bingbong.aiff`声音，如果找到则播放。

其他键`amce1`与`amce2`通知一起发送，您可以从作为推送通知的字典中访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T13:34:24.900

当您的应用程序将收到通知时，您可以将您的应用程序重定向到任何特定视图。为此的委托方法是：

```
 - (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo 
```

您还可以根据您的要求从服务器端在 userInfo 字典中传递额外的参数，例如：在您的情况下为 blog_id 并将该 id 传递给您想要在“查看”或“阅读更多”按钮上加载的视图。

# java - Tomcat几个没有EJB的请求，线程？

> ID：11015659
> 
> 赞同：-1
> 
> 时间：2012-06-13T13:16:08.960
> 
> 标签：java, multithreading, tomcat, ejb, guice

现在我开始了一个新的应用程序，我将它分为> ApplicationWeb，ApplicationFramework。

applicationWeb 包含我的 servlet，它将在 ApplicationFramework 端执行逻辑，这个将在不同的 web 服务中发出多个请求，当然还有 DAO 事务......在我将所有这些与 EJB 一起使用之前，我不需要担心池， trasactionality，并发等等，但是这次我想在 Tomcat 中使用 POJO，在这种情况下我是否需要一个 ThreadManager 来管理所有请求和 dao 访问？还是没有问题，因为 Servlet 将为每个会话创建一个实例？我还计划使用与我相关的 Guice，并且可以以某种方式更接近 EJB 使用的 DI。

有任何想法吗。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T13:30:58.003

好吧，从技术上讲，Servlet 将在单独的线程中处理每个请求。所以你不需要担心 Servlet 层的并发性。

如果您将 DAO 和 SERVICE 层创建为无状态（您不会在字段中存储任何状态），您也无需担心此级别的并发性（因为无状态对象是线程安全的）。

所以在我看来你不需要担心并发......

# sencha-touch - setActiveItem(0) 的 Tabview 未在 sencha touch2 中显示页面内容

> ID：11015660
> 
> 赞同：0
> 
> 时间：2012-06-13T13:16:09.550
> 
> 标签：sencha-touch, extjs, sencha-touch-2

我有四个单独的视图，将这四个视图添加到单个 tabview 中，如下所示。

**标签查看代码：**

```
Ext.define("SLS.BRND.WEB.view.MainTabbarView", {
    extend: 'Ext.tab.Panel',
    xtype: 'MainTabbarView',
    requires: ['Ext.data.proxy.JsonP', 'Ext.TitleBar', 'Ext.Video', 'SLS.BRND.WEB.view.GallerysView', 'SLS.BRND.WEB.view.FloorView'],
    config: {
        tabBarPosition: 'bottom',
        items: [
            {
                xclass: "SLS.BRND.WEB.view.GlobalNavigationView",
                docked: "top",
                scrollable: false
            },
            {
                xclass: 'SLS.BRND.WEB.view.ApartmentView'                    
            },
            {              
                xclass: 'SLS.BRND.WEB.view.SpecificationView'
            },
            {                
                xclass: 'SLS.BRND.WEB.view.FloorView'
            },
            {                
                xclass: 'SLS.BRND.WEB.view.GallerysView'
            }
          ]
    }
}); 
```

在控制器 onbuttontap 函数中，我在“MainTabbarView”页面上方调用，如下所示。我已经设置了 setActiveItem(0); 显示四个中的第一个 tabitem 即（xclass：'SLS.BRND.WEB.view.ApartmentView'）。当我这样设置 setActiveItem(0) 时，它将显示第一个视图页面但没有数据（空白屏幕）。如果我这样设置 setActiveItem(1)，它将显示带有数据的第二个视图页面。然后我认为第一页可能有问题，所以我在“MainTabbarView”中更改了页面视图的顺序。我再次设置 setActiveItem(0) 然后它显示活动页面但没有数据。我一直在将 setActiveItem(0) 更改为 1,2,3 它的工作正常并且还显示数据。**但是对于 setActiveItem(0) 数据不显示**。有什么可以帮助我的。如何解决这个问题。谢谢你

**控制器代码：**

```
Ext.define("SLS.BRND.WEB.controller.ApartmentController", {
    extend: "Ext.app.Controller",
    requires: ['Ext.data.proxy.JsonP'],
    config: {
        refs: {
        projectsPage: "projectspage",            
            mainTabbarView: "MainTabbarView",         
        },
    control: {

            projectsPage: {               
               BtnApartments: "onAptButtonTap"               

            }
        }
  },
    onAptButtonTap: function () {
        var ApartmentTabbar = this.getMainTabbarView();
        ApartmentTabbar.setActiveItem(0);
        Ext.Viewport.animateActiveItem(ApartmentTabbar, this.slideLeftTransition);
    },
    activateNotesList: function () {
        Ext.Viewport.animateActiveItem(this.getHomepage(), this.slideRightTransition);
    },
    slideRightTransition: { type: 'slide', direction: 'right' },
    slideDownTransition: { type: 'flip', direction: 'down' },
    slideLeftTransition: { type: 'fade', direction: 'left' }

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T18:19:06.237

您的`onAptButtonTap`功能不在正确的位置，您将它放在配置中，因为您应该将它放在配置之后，如下所示：

```
...
config: {
    refs: {
        projectsPage: "projectspage",            
        mainTabbarView: "MainTabbarView",         
    },
    control: {
        projectsPage: {               
           BtnApartments: "onAptButtonTap"  
        }
    },
    ...
},
onAptButtonTap: function () {
    var ApartmentTabbar = this.getMainTabbarView();
    ApartmentTabbar.setActiveItem(0);
    Ext.Viewport.animateActiveItem(ApartmentTabbar, this.slideLeftTransition);
},
... 
```

# c++ - 将模板类的对象作为期望基模板类的函数参数传递

> ID：11015670
> 
> 赞同：2
> 
> 时间：2012-06-13T13:16:37.057
> 
> 标签：c++, templates, generic-programming

我有一个模板类，它由另一个具有深层层次结构的类参数化。我想传递给另一个基类参数化的函数基模板类。这是示例：

```
// Base template class test
#include <stdio.h>

// Base classes
template<class T>
class Method {
public:
    Method<T> (T * t) {
        this->t = t;
    }

    virtual int solve() = 0;

protected:
    T * t;
};

class Abstract {
public:
    virtual int get() = 0;
    virtual void set(int a) = 0;
};

// Concrete classes, there might be a few of them
template<class T>
class MethodImpl : public Method<T> {
public:
    MethodImpl<T> (T * t) : Method<T>(t) {}

    int solve() {
        return this->t->get() + 1;
    }
};

class Concrete : public Abstract {
public:
    int get() {
        return this->a;
    }
    void set(int a) {
        this->a = a;
    }
protected:
    int a;
};

// Uses methods of Base classes only
class User {
public:
    int do_stuff(Abstract & a, Method<Abstract> & ma) {
        a.set(2);
        return ma.solve();
    }
};

// Example usage
int main () {
    Concrete * c = new Concrete();
    MethodImpl<Concrete> * mc = new MethodImpl<Concrete>(c);

    User * u = new User();
    int result = u->do_stuff(*c, *mc);
    printf("%i", result);

    return 0;
} 
```

我在编译期间收到此错误：

```
btc.cpp: In function 'int main()':
btc.cpp:62: error: no matching function for call to 'User::do_stuff(Concrete&, MethodImpl<Concrete>&)'
btc.cpp:50: note: candidates are: int User::do_stuff(Abstract&, Method<Abstract>&) 
```

但是，如果我使用相同的逻辑创建局部变量，它就可以正常工作：

```
int main () {
    Abstract * a = new Concrete();
    Method<Abstract> * ma = new MethodImpl<Abstract>(a);

    a->set(2);
    int result = ma->solve();
    printf("%i", result);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T13:24:58.627

这是因为您的`do_stuff`函数没有模板化，并且没有简单的 from `MethodImpl<U>`to 转换`MethodImpl<T>`。

更多类似的东西

```
template<class T>
int do_stuff(T& t, Method<T> & mt) {
    ...
} 
```

可能有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T13:37:24.750

类型`MethodImpl<Concrete>`和`MethodImpl<Abstract>`是不同的，并且没有继承关系。`MethodImpl<Abstract>`和也可以这样说`MethodImpl<Concrete>`。

该方法`user::do_stuff`需要 a `Method<Abstract> &`，因此它可以接受 a `MethodImpl<Abstract>&`（或任何其他派生类型的`Method<Abstract>`，但不能接受`MethodImpl<Concrete>&`.

# c - gcc 删除内联汇编代码

> ID：11015672
> 
> 赞同：17
> 
> 时间：2012-06-13T13:16:38.613
> 
> 标签：c, gcc, x86, compiler-optimization, inline-assembly

似乎 gcc 4.6.2 从函数中删除了它认为未使用的代码。

## 测试.c

```
int main(void) {
  goto exit;
  handler:
    __asm__ __volatile__("jmp 0x0");
  exit:
  return 0;
} 
```

## 拆卸`main()`

```
 0x08048404 <+0>:     push   ebp
   0x08048405 <+1>:     mov    ebp,esp
   0x08048407 <+3>:     nop    # <-- This is all whats left of my jmp.
   0x08048408 <+4>:     mov    eax,0x0
   0x0804840d <+9>:     pop    ebp
   0x0804840e <+10>:    ret 
```

## 编译器选项

没有启用优化，只是`gcc -m32 -o test test.c`（`-m32`因为我在 64 位机器上）。

我怎样才能阻止这种行为？

**编辑：**最好使用编译器选项，而不是修改代码。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T13:54:18.693

看起来就是这样 - 当`gcc`看到函数中的代码无法访问时，它会删除它。其他编译器可能会有所不同。
在`gcc`中，编译的早期阶段是构建“控制流图”——“基本块”的图，每个块都没有条件，由分支连接。在发出实际代码时，从根无法到达的部分图将被丢弃。
这不是优化阶段的一部分，因此不受编译选项的影响。

因此，任何解决方案都会涉及`gcc`到认为代码是可访问的。

我的建议：

与其把你的汇编代码放在一个无法到达的地方（GCC 可能会删除它），你可以把它放在一个可以到达的地方，并跳过有问题的指令：

```
int main(void) {
     goto exit;

     exit:
     __asm__ __volatile__ (
        "jmp 1f\n"
        "jmp $0x0\n"
        "1:\n"
    );
    return 0;
} 
```

另外，请参阅[有关此问题的线程](http://www.linuxquestions.org/questions/programming-9/gcc-unreachable-code-735716/)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-02-12T21:59:18.727

我不相信有一种可靠的方法只使用编译选项来解决这个问题。更可取的机制是无论用于编译的选项如何，都可以在编译器的未来版本上完成这项工作和工作。

* * *

## 关于已接受答案的评论

在接受的答案中，对原文进行了编辑，建议使用此解决方案：

```
int main(void) {
  __asm__ ("jmp exit");

  handler:
      __asm__ __volatile__("jmp $0x0");
  exit:
  return 0;
} 
```

首先`jmp $0x0`应该是`jmp 0x0`。其次， *C*标签通常被翻译成本地标签。`jmp exit`实际上并没有跳转到*C*`exit`函数中的标签，而是跳转到*C*库中的函数，有效地绕过了. 将[Godbolt 与 GCC 4.6.4 一起](https://godbolt.org/#g:!((g:!((g:!((h:codeEditor,i:(j:1,lang:c%2B%2B,source:'int+main(void)+%7B%0A++__asm__+(%22jmp+exit%22)%3B%0A%0A++handler:%0A++++__asm__+__volatile__(%22jmp+0x0%22)%3B%0A++exit:%0A++return+0%3B%0A%7D'),l:'5',n:'0',o:'C%2B%2B+source+%231',t:'0')),k:50,l:'4',n:'0',o:'',s:0,t:'0'),(g:!((h:compiler,i:(compiler:g464,filters:(b:'1',binary:'1',commentOnly:'0',demangle:'0',directives:'0',execute:'1',intel:'1',trim:'1'),lang:c%2B%2B,libs:!(),options:'-O0+-m32+-xc+',source:1),l:'5',n:'0',o:'x86-64+gcc+4.6.4+(Editor+%231,+Compiler+%231)+C%2B%2B',t:'0')),k:50,l:'4',n:'0',o:'',s:0,t:'0')),l:'2',n:'0',o:'',t:'0')),version:4)使用，我们得到了这个未优化的输出（我已经修剪了我们不关心的标签）：*`exit`*`return 0``main`**

 **```
main:
        pushl   %ebp
        movl    %esp, %ebp
        jmp exit
        jmp 0x0
.L3:
        movl    $0, %eax
        popl    %ebp
        ret 
```

`.L3`实际上是 的本地标签`exit`。您不会`exit`在生成的程序集中找到标签。*如果存在C*库，它*可以*编译和链接。不要像这样在内联汇编中使用*C*本地 goto 标签。

 *** * *

## 使用 asm goto 作为解决方案

从 GCC 4.5（OP 使用 4.6.x）开始，支持[`asm goto`扩展程序集模板](https://gcc.gnu.org/onlinedocs/gcc/Extended-Asm.html#GotoLabels)。`asm goto`允许您指定内联程序集可能使用的跳转目标：

> **6.45.2.7 转到标签**
> 
> **asm goto**允许汇编代码跳转到一个或多个 C 标签。asm goto 语句中的 GotoLabels 部分包含一个逗号分隔的所有 C 标签列表，汇编代码可以跳转到这些标签。GCC 假定 asm 执行落入下一条语句（如果不是这种情况，请考虑在 asm 语句之后使用 __builtin_unreachable 内在函数）。可以通过使用热标签属性和冷标签属性来改进 asm goto 的优化（请参阅标签属性）。
> 
> asm goto 语句不能有输出。这是由于编译器的内部限制：控制转移指令不能有输出。如果汇编程序代码确实修改了任何内容，请使用“内存”破坏程序强制优化器将所有寄存器值刷新到内存，并在 asm 语句之后重新加载它们（如有必要）。
> 
> 另请注意，asm goto 语句始终被隐式视为易失性。
> 
> 要引用汇编器模板中的标签，请在其前面加上“%l”（小写“L”），后跟其在 GotoLabels 中的（从零开始的）位置加上输入操作数的数量。例如，如果 asm 有三个输入并引用两个标签，则将第一个标签称为“%l3”，第二个称为“%l4”）。
> 
> 或者，您可以使用括号中的实际 C 标签名称来引用标签。例如，要引用名为 carry 的标签，您可以使用 '%l[carry]'。使用此方法时，标签仍必须列在 GotoLabels 部分中。

代码可以这样写：

```
int main(void) {
  __asm__ goto ("jmp %l[exit]" :::: exit);
  handler:
      __asm__ __volatile__("jmp 0x0");
  exit:
  return 0;
} 
```

我们可以使用`asm goto`. 我更喜欢`__asm__`，因为如果使用or选项`asm`编译它不会抛出警告。在clobbers 之后，您可以列出内联程序集可能使用的跳转目标。*C*实际上并不知道我们是否跳转，因为 GCC 不会分析内联汇编模板中的实际代码。它不能删除这个跳转，也不能假设后面是死代码。将[Godbolt 与 GCC 4.6.4 一起](https://godbolt.org/#g:!((g:!((g:!((h:codeEditor,i:(j:1,lang:c%2B%2B,source:'int+main(void)+%7B%0A++__asm__+goto+(%22jmp+%25l%5Bexit%5D%22+::::+exit)%3B%0A++handler:%0A++++__asm__+__volatile__(%22jmp+0x0%22)%3B%0A++exit:%0A++return+0%3B%0A%7D'),l:'5',n:'0',o:'C%2B%2B+source+%231',t:'0')),k:50,l:'4',n:'0',o:'',s:0,t:'0'),(g:!((h:compiler,i:(compiler:g464,filters:(b:'1',binary:'1',commentOnly:'0',demangle:'0',directives:'0',execute:'1',intel:'1',trim:'1'),lang:c%2B%2B,libs:!(),options:'-O0+-m32+-xc+',source:1),l:'5',n:'0',o:'x86-64+gcc+4.6.4+(Editor+%231,+Compiler+%231)+C%2B%2B',t:'0')),k:50,l:'4',n:'0',o:'',s:0,t:'0')),l:'2',n:'0',o:'',t:'0')),version:4)使用，未优化的代码（修剪）如下所示：`-ansi``-std=?`

 *```
main:
        pushl   %ebp
        movl    %esp, %ebp
        jmp .L2                   # <------ this is the goto exit
        jmp 0x0
.L2:                              # <------ exit label
        movl    $0, %eax
        popl    %ebp
        ret 
```

带有 GCC 4.6.4 输出的[Godbolt](https://godbolt.org/#g:!((g:!((g:!((h:codeEditor,i:(j:1,lang:c%2B%2B,source:'int+main(void)+%7B%0A++__asm__+goto+(%22jmp+%25l%5Bexit%5D%22+::::+exit)%3B%0A++handler:%0A++++__asm__+__volatile__(%22jmp+0x0%22)%3B%0A++exit:%0A++return+0%3B%0A%7D'),l:'5',n:'0',o:'C%2B%2B+source+%231',t:'0')),k:50,l:'4',n:'0',o:'',s:0,t:'0'),(g:!((h:compiler,i:(compiler:g464,filters:(b:'1',binary:'1',commentOnly:'0',demangle:'0',directives:'0',execute:'1',intel:'1',trim:'1'),lang:c%2B%2B,libs:!(),options:'-O3+-m32+-xc+',source:1),l:'5',n:'0',o:'x86-64+gcc+4.6.4+(Editor+%231,+Compiler+%231)+C%2B%2B',t:'0')),k:50,l:'4',n:'0',o:'',s:0,t:'0')),l:'2',n:'0',o:'',t:'0')),version:4)看起来仍然正确，并显示为：

```
main:
        jmp .L2                   # <------ this is the goto exit
        jmp 0x0
.L2:                              # <------ exit label
        xorl    %eax, %eax
        ret 
```

无论您是否启用了优化，该机制也应该可以工作，并且无论您是为 64 位还是 32 位 x86 目标编译都无关紧要。

* * *

## 其他观察

*   当扩展内联汇编模板中没有输出约束时，该`asm`语句是隐式可变的。线

    ```
    __asm__ __volatile__("jmp 0x0"); 
    ```

    可以写成：

    ```
    __asm__ ("jmp 0x0"); 
    ```

*   `asm goto`语句被认为是隐含的易失性。它们也不需要`volatile`修饰符。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-19T16:20:54.543

这行得通吗，让它让 gcc 无法知道它无法访问

```
int main(void)  
{ 
    volatile int y = 1;
    if (y) goto exit;
handler:
    __asm__ __volatile__("jmp 0x0");  
exit:   
    return 0; 
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-02-12T11:36:30.263

如果编译器认为它可以欺骗你，那就作弊：（仅限 GCC）

```
int main(void) {
    {
        /* Place this code anywhere in the same function, where
         * control flow is known to still be active (such as at the start) */
        extern volatile unsigned int some_undefined_symbol;
        __asm__ __volatile__(".pushsection .discard" : : : "memory");
        if (some_undefined_symbol) goto handler;
        __asm__ __volatile__(".popsection" : : : "memory");
    }
    goto exit;
handler:
    __asm__ __volatile__("jmp 0x0");
    exit:
    return 0;
} 
```

此解决方案不会为无意义的指令增加任何额外开销，但仅在与 AS 一起使用时适用于 GCC（默认情况下）。

说明：`.pushsection`将编译器的文本输出切换到另一个部分，在这种情况下`.discard`（默认情况下在链接期间被删除）。`"memory"`clobber 阻止 GCC 尝试移动将被丢弃的部分中的其他文本。但是，GCC 没有意识到（并且永远不会，因为`__asm__`s 是`__volatile__`）这两个语句之间发生的任何事情都将被丢弃。

至于`some_undefined_symbol`，这实际上只是任何从未被定义的符号（或实际定义的，这无关紧要）。并且由于使用它的代码部分在链接期间将被丢弃，因此也不会产生任何未解决的引用错误。

最后，条件跳转到您想要的标签看起来好像它是可访问的那样。除了它根本不会出现在输出二进制文件中的事实之外，GCC 意识到它对 不了解任何东西`some_undefined_symbol`，这意味着它别无选择，只能假设 if 的两个分支都是可访问的，这意味着就它而言关心的是，控制流可以通过到达`goto exit`或跳转来继续`handler`（即使没有任何代码可以做到这一点）

但是，在链接器中启用垃圾收集时要小心`ld --gc-sections`（默认情况下它是禁用的），否则它可能会产生摆脱仍然未使用的标签的想法。

编辑：忘记这一切。只需这样做：

```
int main(void) {
    __asm__ __volatile__ goto("" : : : : handler);
    goto exit;
handler:
    __asm__ __volatile__("jmp 0x0");
exit:
    return 0;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-13T13:22:27.160

**更新 2012/6/18**

想想看，可以把它放在`goto exit`一个 asm 块中，这意味着只需要更改 1 行代码：

```
int main(void) {
  __asm__ ("jmp exit");

  handler:
    __asm__ __volatile__("jmp $0x0");
  exit:
  return 0;
} 
```

这比我下面的其他解决方案要干净得多（也可能比@ugoren 当前的解决方案更好）。

* * *

这很 hacky，但它似乎有效：将处理程序隐藏在正常条件下永远无法遵循的条件中，但通过阻止编译器使用某些内联汇编程序正确进行分析来阻止它被消除。

```
int main (void) {
  int x = 0;
  __asm__ __volatile__ ("" : "=r"(x));
  // compiler can't tell what the value of x is now, but it's always 0

  if (x) {
handler:
    __asm__ __volatile__ ("jmp $0x0");
  }

  return 0;
} 
```

即使保留`-O3`了：`jmp`

```
 testl   %eax, %eax   
    je      .L2     
.L3:
    jmp $0x0
.L2:
    xorl    %eax, %eax 
    ret 
```

（这看起来*真的很*狡猾，所以我希望有更好的方法来做到这一点。*编辑只需在*[作品](https://stackoverflow.com/a/11105198/1256624)`volatile`前面放一个，这样就不需要做内联 asm 诡计了。）`x`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-17T16:16:34.300

我从未听说过阻止 gcc 删除无法访问的代码的方法；似乎无论您做什么，一旦 gcc 检测到无法访问的代码，它总是会删除它（使用 gcc 的`-Wunreachable-code`选项来查看它认为无法访问的内容）。

也就是说，您仍然可以将此代码放在静态函数中，并且不会被优化：

```
static int func()
{
    __asm__ __volatile__("jmp $0x0");
}

int main(void)
{
    goto exit;

handler:
    func();

exit:
    return 0;
} 
```

**PS**
如果您想在原始代码中的多个位置植入相同的“处理程序”代码块时避免代码冗余，此解决方案特别方便。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-01T08:39:56.087

gcc 可能会在函数内部复制 asm 语句并在优化期间将其删除（即使在 -O0 时），因此这永远不会可靠地工作。

可靠地做到这一点的一种方法是使用全局 asm 语句（即任何函数之外的 asm 语句）。gcc 会将其直接复制到输出中，您可以毫无问题地使用全局标签。*****

# java - 重复写入数据库或文本文件

> ID：11015675
> 
> 赞同：2
> 
> 时间：2012-06-13T13:16:43.477
> 
> 标签：java, database, crash

简短版：如果您必须每分钟保存当前日期和时间，覆盖现有条目，您会怎么做？

将其写入文本文件、数据库或第三个选项？并且可能会被认为是最佳实践。

我的场景是我想知道，在应用程序启动时，应用程序最后一次运行是什么时候。

长版：

我有一个性能问题，也许还有正确的编码风格。

我有一个应用程序可以跟踪食物库存，当有些东西变得陈旧并且必须删除时。每分钟都有一个 timertask 运行，检查库存中的当前项目，以及它们是否超过了它们被认为是陈旧的日期和时间。

问题是，如果应用程序关闭并重新启动，则不会检查在停机期间过时的项目。

重复方法的代码

```
runeveryminute = new TimerTask() {

        @Override
        public void run() {

                for (Item i : lager.getAllItems) {

                    if (i.getMinutesTillStale == 0) {
                    JOptionPane.showConfirmDialog(MainFrame.this,"WARNING",
                    "Alarm",
                    JOptionPane.OK_CANCEL_OPTION);
                    }
                }
            }
        }
    }; 
```

我真的不同意这种检查是否过时的方式，但这是一个学校项目，所以它并不那么重要。

我向大型机添加了一个窗口侦听器，但我不确定我是否可以依靠它来捕捉意外崩溃，例如电源故障。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T13:30:49.940

这取决于如何`i.getMinutesTillStale`定义。如果项目在停机期间过时，会`getMinutesTillStale`给出负值吗？然后您可以将条件更改为`i.getMinutesTillStale <= 0`。

建议：您是否将项目信息存储在数据库中？例如，像`itemId`, `datestored`,这样的记录`expiryperiod(or dateofExpiry)` 然后您可以编写存储过程或以计时器时间作为输入的查询。它将检查所有过期的项目并向您发送这些项目的列表。

让我知道这是否有帮助。

# haskell - F# 版本的 haskell 模式匹配

> ID：11015684
> 
> 赞同：9
> 
> 时间：2012-06-13T13:17:22.020
> 
> 标签：haskell, syntax, f#, pattern-matching

我如何在 F# 中干净地完成这个 haskell？

```
add 1 2 x = 3 + x
add 1 x y = 1 + x + y
add z x y = z + x + y 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-13T13:20:32.353

您不能重载函数本身，但可以直接使用模式匹配：

```
let add z x y =               // curried multiple parameters
    match z, x, y with        // convert to three-tuple to match on
    | 1, 2, x -> 3 + x
    | 1, x, y -> 1 + x + y
    | z, x, y -> z + x + y 
```

用法如预期：`add 1 2 3`

如果你愿意使用元组作为参数（即放弃柯里化和偏应用），你甚至可以写成更简写：

```
let add =                     // expect three-tuple as first (and only) parameter
    function                  // use that one value directly to match on
    | 1, 2, x -> 3 + x
    | 1, x, y -> 1 + x + y
    | z, x, y -> z + x + y 
```

现在的用法是：`add (1, 2, 3)`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-13T13:38:55.553

回想一下在 Haskell 中[，函数的一般形式是](http://www.haskell.org/onlinereport/decls.html#sect4.4.3.1)带有模式的声明列表：

```
f pat1 ... = e1
f pat2 ... = e2
f pat3 ... = e3 
```

只是`case`分析的糖：

```
f x1 .. xn = case (x1, .. xn) of
                (pat1, ..., patn) -> e1
                (pat2, ..., patn) -> e2
                (pat3, ..., patn) -> e3 
```

因此可以对具有模式匹配但没有声明级模式的其他语言进行相同的翻译。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-15T10:48:52.710

这纯粹是句法。Haskell、Standard ML 和 Mathematica 等语言允许您编写不同的匹配案例，就好像它们是不同的函数一样：

```
factorial 0 = 1
factorial 1 = 1
factorial n = n * factorial(n-1) 
```

而像 OCaml 和 F# 这样的语言要求您在其主体中有一个函数定义和使用`match`或等效：

```
let factorial = function
  | 0 -> 1
  | 1 -> 1
  | n -> n * factorial(n-1) 
```

请注意，您不必使用此语法一遍又一遍地复制函数名称，并且可以更轻松地分解匹配案例：

```
let factorial = function
  | 0 | 1 -> 1
  | n -> n * factorial(n-1) 
```

正如yamen 所写，`let f a b = match a, b with ...`在F# 中使用currying。

在经典的红黑树实现中，我发现标准 ML 和 Haskell 中函数名称和右侧的重复非常难看：

```
balance :: RB a -> a -> RB a -> RB a
balance (T R a x b) y (T R c z d) = T R (T B a x b) y (T B c z d)
balance (T R (T R a x b) y c) z d = T R (T B a x b) y (T B c z d)
balance (T R a x (T R b y c)) z d = T R (T B a x b) y (T B c z d)
balance a x (T R b y (T R c z d)) = T R (T B a x b) y (T B c z d)
balance a x (T R (T R b y c) z d) = T R (T B a x b) y (T B c z d)
balance a x b = T B a x b 
```

与等效的 OCaml 或 F# 相比：

```
let balance = function
  | B, z, (T(R, y, T(R, x, a, b), c) | T(R, x, a, T(R, y, b, c))), d
  | B, x, a, (T(R, z, T(R, y, b, c), d) | T(R, y, b, T(R, z, c, d))) ->
      T(R, y, T(B, x, a, b), T(B, z, c, d))
  | a, b, c, d -> T(a, b, c, d) 
```

# jquery - jquery函数onclick

> ID：11015688
> 
> 赞同：0
> 
> 时间：2012-06-13T13:17:29.813
> 
> 标签：jquery, onclick, html

如何使用跨度添加 jquery 函数 onclick？

现在我有这样的跨度，我想向它添加提交功能：

```
 <input type="radio" name="language" id="engl" value="Engl" checked>
    <span class="division" onclick="document.getElementById('engl').checked = true">English</span> 
```

我试图在我的代码中添加：

```
 $('span.division').change(function() {
    $('#search-form').submit();
    }); 
```

但是没有结果。当然，我尝试将“名称”添加到“跨度”它也没有结果。这是我的jQuery代码：

```
 <script type='text/javascript'>
    $(function(){
    $('input[name=language]').change(function() {
    $('#search-form').submit();
});
    $("form#search-form").submit(function(){
    $("#results").fadeOut();
    $.ajax({
        type:"GET",
        data: $(this).serialize(),
        url: "search.php",
        success: function(msg)
    {
    $("#results").html(msg);
    $("#results").fadeIn();
    }
    });
    return false;
    });
});
 </script> 
```

我的错误在哪里？我怎么能正确地做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T13:19:12.417

对 span使用`click`事件而不是 change 事件，并将提交绑定功能移动到文档`ready`。我刚刚对您的代码进行了一些清理。这应该有效。

```
<script type='text/javascript'>
    $(function(){

       $('span.division').click(function() {
          $('#search-form').submit();
       });

       $("form#search-form").submit(function(e){
          e.preventDefault();
          $("#results").fadeOut();
            $.ajax({
               type:"GET",
               data: $(this).serialize(),
               url: "search.php",
               success: function(msg){
                          $("#results").html(msg).fadeIn();                       
                     }
            }); 
      }); 

  });
 </script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T13:21:53.867

对事件使用 jQuery`on()`方法`click`而不是更改：

```
$('span.division').on("click", function() {
   $('#search-form').submit();
}); 
```

但是请注意，这可能会干扰您通过内联在跨度上定义的点击事件`onclick="..."`！

# vba - 如何使用 VBA 格式化已关闭的 Excel 工作表

> ID：11015691
> 
> 赞同：0
> 
> 时间：2012-06-13T13:17:37.933
> 
> 标签：vba, excel, excel-2007

我有已关闭的 sheet1.xls。我在 sheet2.xls VBA 中工作，如下所示。

```
With Range("A:XFD")
 <I need Some Code here to format entire sheet1.xls cells into string format> 
End With 
```

亲切的帮助。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T14:59:19.163

像这样的东西可以让你格式化合上的书。它打开，然后格式化，然后再次关闭。

```
Option Explicit
Public Sub Format_Closed_Sheet()
    Dim sht1book As Workbook
    Dim sht1ws As Worksheet
    Dim strValue As String
    Dim rng As Range

    Application.ScreenUpdating = False

    With Application

    '--> Open sheet1.xls
    Set sht1book = .Workbooks.Open _
    ("Path to Sheet1.xls")
    End With

    Set sht1ws = sht1book.Sheets("Sheet1")

    '--> Format the range as text

    Set rng = sht1ws.Range("A:XFD")
    rng.NumberFormat = "@"

    '--> Save sheet1.xls and close
    Application.DisplayAlerts = False
    sht1book.Save
    sht1book.Close
    Application.DisplayAlerts = True

    Application.ScreenUpdating = True
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T15:12:08.003

我会这样做：

```
Dim b As Workbook
Dim sh As Worksheet

Set b = Workbooks.Open("C:\mypath\mybook.xls") ' or wherever your workbook is

Set sh = b.Sheets("Sheet1") ' or whatever sheet
sh.Cells.NumberFormat = "@" ' format as Text

b.Close 
```

如果要将工作簿中的*所有*工作表格式化为文本，可以执行以下操作：

```
For Each sh In wb.Sheets
    sh.Cells.NumberFormat = "@" ' format as Text
Next sh 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T13:24:16.363

只需声明一个工作簿和工作表：

```
dim oBook as excel.workbook
dim oSheet as excel.worksheet

set oBook = workbooks.open("<workbook path and filename>")
set oSheet = oBook.sheets("<SheetName>") 
```

然后：

```
with oSheet.range("A:XFD") 
     <Format>
end with
oBook.close
set oBook = nothing 
set oSheet = nothing 
```

等等。

# python - pip 无法从 requirements.txt 安装软件包

> ID：11015692
> 
> 赞同：27
> 
> 时间：2012-06-13T13:17:39.947
> 
> 标签：python, package, pip

我正在尝试使用需求文件安装 python 软件。

```
>> cat requirements.txt
Cython==0.15.1
numpy==1.6.1
distribute==0.6.24
logilab-astng==0.23.1logilab-common==0.57.1
netaddr==0.7.6
numexpr==2.0.1
ply==2.5
pycallgraph==0.5.1
pyflowtools==0.3.4.1
pylint==0.25.1
tables==2.3.1
wsgiref==0.1.2 
```

所以我创建了一个虚拟环境

```
>> mkvirtualenv parser

(parser)
>> pip freeze
distribute==0.6.24
wsgiref==0.1.2

(parser)
>> pip install -r requirements.txt 
```

...然后我下载了软件包但没有安装错误： http: [//pastie.org/4079800](http://pastie.org/4079800)

```
(parser)
>> pip freeze
distribute==0.6.24
wsgiref==0.1.2 
```

令人惊讶的是，如果我尝试手动安装每个软件包，它们安装得很好。例如：

```
>> pip install numpy==1.6.1

(parser)
>> pip freeze
distribute==0.6.24
wsgiref==0.1.2
numpy==1.6.1 
```

我搞不清楚了。到底是怎么回事？

PS：我正在使用`pip`v1.1 和`python`v2.7.2`virtualenv`和`virtualenvwrapper`

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-13T13:29:10.050

看起来这个`numexpr`包在安装时依赖于 numpy。Pip 两次通过您的要求：首先它下载所有包并运行每个包`setup.py`以获取其元数据，然后在第二遍中安装它们。

所以，numexpr 试图在它的 setup.py 中从 numpy 导入，但是当 pip 第一次运行 numexpr 的 setup.py 时，它还没有安装 numpy。

这也是为什么您在一个一个安装软件包时看不到此错误的原因：如果您一次安装一个，则 numpy 将在您`pip install`执行 numexpr 之前完全安装在您的环境中。

唯一的解决方案是`pip install numpy`在您运行之前 安装`pip install -r requirements.txt`——您将无法通过单个 requirements.txt 文件在单个命令中执行此操作。

更多信息在这里：[https ://github.com/pypa/pip/issues/25](https://github.com/pypa/pip/issues/25)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-08-22T09:08:35.540

我遇到了类似的问题，最终得到以下结果：

```
cat requirements.txt | sed -e '/^\s*#.*$/d' -e '/^\s*$/d' | xargs -n 1 python -m pip install 
```

这将逐行读取 requirements.txt 并执行 pip。我无法从哪里找到正确的答案，因此对此深表歉意，但我在下面找到了一些理由：

1.  sed 的工作原理：[https ://howto.lintel.in/truncate-empty-lines-using-sed/](https://howto.lintel.in/truncate-empty-lines-using-sed/)
2.  另一个类似的答案，但使用 git：[https ://stackoverflow.com/a/46494462/7127519](https://stackoverflow.com/a/46494462/7127519)

希望这有助于替代方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-24T01:14:40.620

这有时很烦人，一个 pip 的错误。当您运行 pip install package_name 时，pip 将首先对目标包运行 pip 检查，并安装依赖项（目标包）所需的所有包。但是当你运行 pip install -r requirements.txt pip 会尝试直接安装所有需要的包，从上到下一一列出。有时，依赖项列在它所依赖的包的上方。

```
The solution is simple:
1.pip install package_name
2.simply put the error package to the bottom of the requirements.txt
3.sometimes a particular version of the package is not be able to  be installed,just install the newest version of it and update the data in requirements.txt 
```

# java - ConcurrentHashMap 中“线程安全”的含义

> ID：11015694
> 
> 赞同：3
> 
> 时间：2012-06-13T13:17:43.947
> 
> 标签：java

由于存储桶级别锁定，CHM 在使用而不是 Collections.synchronizedMap(...)/hashtable 时提供性能提升是可以的。

当我们不希望我们的迭代器抛出 ConcurrentModificationException 时，我们也可以使用 CHM。

但是我`thread-safe`对 CHM 上下文中的含义感到困惑，因为它们不会阻止更改在检索和写入重叠之间得到反映？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T13:19:54.057

线程安全意味着您可以`ConcurrentHashMap`在多个线程之间共享一个对象，并在没有外部锁定的情况下同时访问/修改该对象。

[文档](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ConcurrentHashMap.html)中解释了确切的语义：

> 检索操作（包括`get`）一般不会阻塞，因此可能与更新操作（包括`put`and `remove`）重叠。检索反映了最近完成的更新操作在其开始时保持的结果。
> 
> `putAll`对于和等聚合操作`clear`，并发检索可能仅反映插入或删除某些条目。同样，在迭代器/枚举创建时或之后的某个时间点，返回反映哈希表状态的元素`Iterators`。`Enumerations`他们不扔`ConcurrentModificationException`。但是，迭代器被设计为一次只能由一个线程使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T13:28:44.817

正如 Aix 提到的，`ConcurrentHashMap`在没有外部锁的情况下跨多个线程共享对象是`Thread-Safe`

它的工作原理就像 ConcurrentHashMap（Sun 的当前实现）通过将底层映射划分为多个单独的桶来工作。获取元素本身不需要任何锁定，但它确实使用原子/易失性操作，这意味着内存屏障（可能非常昂贵，并且会干扰其他可能的优化）但`Collections.synchronizedMap(...)`锁定应用于整个地图，因此成本很高。

**用法：** `ConcurrentHashMap is implemented for higher throughput in cases where high concurrency is expected`

# objective-c - 使用@package。何时以及如何使用它？

> ID：11015697
> 
> 赞同：0
> 
> 时间：2012-06-13T13:17:55.027
> 
> 标签：objective-c, ios

> **可能重复：**
> [@package 指令在 Objective-C 中做了什么？](https://stackoverflow.com/questions/772600/what-does-the-package-directive-do-in-objective-c)

自从开始 iOS 编程以来，我只见过两次 @package（我已经这样做了一段时间了）。

@package 是做什么用的？我相信它指定了您可以从哪里访问变量，但我不确定确切的规则？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T13:20:57.550

这是针对您编写可移植库的情况，然后将可见性级别设置为您的库，但不适用于将使用它的其他源代码。

# javascript - 当特殊字符和数字介于两者之间时，使用 javascript 的模式匹配不起作用

> ID：11015699
> 
> 赞同：0
> 
> 时间：2012-06-13T13:18:03.737
> 
> 标签：javascript, jquery

我正在尝试创建模式匹配以在我的网站的文章中查找单词内容。当单词之间出现特殊字符或数字时，我无法进行模式匹配，我将添加 jsfiddle 链接。是否有可能找到出现的次数并添加一个按钮，单击该按钮将一个一个地转到每个出现...这是我的 pgrm 目前正在工作的方式[http://jsfiddle.net/ehzPQ/12/](http://jsfiddle.net/ehzPQ/12/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T03:05:57.220

我认为问题与你为你的单词选择的边界有关，我相信对于 \b 你没有考虑到单词之前有一个点的情况（比如“.cancer9”。但我真的不是正则表达式专家......所以，我做了一点工作并得到了这个解决方案，但我不确定它是否适合你：

Javascript：

```
$(document).ready(function () {
  var $test = $('#article');
  var entityText = $('#entity').html().replace(/\./g, "\\\.").replace(/\$/g, "\\\$").replace(/\?/g, "\\\?"); //etc...
  var entityRegularExpression =new RegExp("([^a-zA-Z0-9])(" + entityText + ")([^a-zA-Z0-9])", "gi");
  var highlight = '$1<span class="highlight">$2</span>$3';
  $test.html($test.html().replace(entityRegularExpression, highlight));
}); 
```

在这里你有一个工作演示：http: [//jsfiddle.net/ehzPQ/20/](http://jsfiddle.net/ehzPQ/20/)

请让我知道这对你有没有用。

# java - 在 libgdx 模型加载器演示中，font.draw() 没有在屏幕上放置“fps”文本

> ID：11015701
> 
> 赞同：6
> 
> 时间：2012-06-13T13:18:04.540
> 
> 标签：java, text, libgdx

我开始使用 libgdx。[我在主干（ StillModelViewerGL20.java](http://code.google.com/p/libgdx/source/browse/trunk/extensions/model-loaders/model-loaders/src/com/badlogic/gdx/graphics/g3d/test/StillModelViewerGL20.java)）中打开了示例模型加载器。在源代码中，我在`render`回调中看到了这段代码：

```
batch.begin();  
font.draw(batch, "fps: " + Gdx.graphics.getFramesPerSecond(), 20, 30);    
batch.end(); 
```

但我在屏幕上看不到任何文字。在这个例子中我需要修复什么才能看到显示的文本吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T20:13:48.930

也许屏幕尺寸小于 20,30。尝试在 0、0 上绘制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T14:14:45.583

检查您绘制对象的顺序，以及是否通过更改来纠正。

# c# - 正则表达式验证选定的标点符号列表

> ID：11015702
> 
> 赞同：-1
> 
> 时间：2012-06-13T13:18:06.833
> 
> 标签：c#, regex, asp.net-mvc

我需要在字符串中允许的标点符号列表中获取用户输入，然后匹配字符串以查找这些标点符号的出现。

例如：用户输入“@#$%^&”。需要验证：

1.  用户不能在“允许的标点符号”框中重复标点符号。例如：不能使用“%%$#@”。
2.  如果用户输入的密码只包含那些标点符号而没有其他标点符号。

此外，这需要是多语言安全的。

谢谢， Regex 的初学者

**添加：**

我使用的语言是 c#。需要将其放在 MVC 模型属性的数据注释中。

我确实能够使用以下方法过滤正则表达式以仅允许标点符号："^(?![0-9])(?![a-zA-Z])\p{P}+$"

但是，我无法让正则表达式找到重复的标点符号。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T13:32:09.430

至于您没有指定语言，我在 PHP 中实现了示例：

```
$s = 'hello %wo$rl@@d';
$r = '~([@#\$%\^&]).*?(?=\1)~';

if (preg_match_all($r, $s, $m)) {
  // password is invalid
} 
```

如果允许的标点符号之一在输入 $s 的剩余部分重复，则条件将满足。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T13:21:55.443

如果我很好地理解了你的问题。使用正则表达式`[.,:;']`。如果您有其他标点符号要匹配，请将它们列在方括号中。

# asp.net - TableCell - 内存泄漏？

> ID：11015704
> 
> 赞同：0
> 
> 时间：2012-06-13T13:18:08.207
> 
> 标签：asp.net, vb.net

请看一下我从[MSDN 网站](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.table.rows.aspx)获取的以下代码：

```
Sub Page_Load(sender As Object, e As EventArgs)
    ' Generate rows and cells.           
    Dim numrows As Integer = 3
    Dim numcells As Integer = 2
    Dim j As Integer
    For j = 0 To numrows - 1
        Dim r As New TableRow()
        Dim i As Integer
        For i = 0 To numcells - 1
            Dim c As New TableCell()
            c.Controls.Add(New LiteralControl("row " & j.ToString() & ", cell " & i.ToString()))
            r.Cells.Add(c)
        Next i
        Table1.Rows.Add(r)
    Next j
End Sub 'Page_Load 
```

每行都有一个新的 TableRow 实例，并为每个表格单元格创建了一个新的 TableCell 实例。我对此有两个问题：

1.  这些实例是如何被销毁的？即`c = Nothing`。肯定有内存泄漏？
2.  Table 类如何知道`TableRow`and的实例在哪里`TableCell`？我问的原因是因为您似乎无法`TableCell`为多个表格单元格和`TableRow`多个表格行重用实例，即您不能执行以下操作：

    ```
    Dim objTable As New Table
    Dim objTableRow As New TableRow
    Dim objTableCell As New TableCell

    objTableCell.Text = "Test Row 1 Cell 1"
    objTableRow.Cells.Add(objTableCell)
    objTableCell.Text = "Test Row 1 Cell 2"
    objTableRow.Cells.Add(objTableCell)
    objTable.Rows.Add(objTableRow)

    objTableCell.Text = "Test Row 2 Cell 1"
    objTableRow.Cells.Add(objTableCell)
    objTableCell.Text = "Test Row 2 Cell 2"
    objTableRow.Cells.Add(objTableCell)
    objTable.Rows.Add(objTableRow)

    objTableCell.Text = "Test Row 3 Cell 1"
    objTableRow.Cells.Add(objTableCell)
    objTableCell.Text = "Test Row 3 Cell 2"
    objTableRow.Cells.Add(objTableCell)
    objTable.Rows.Add(objTableRow) 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T13:19:57.130

.NET 有一个[垃圾收集器](http://msdn.microsoft.com/en-us/library/0xy59wtx.aspx)，可以为您释放内存。

> .NET Framework 的垃圾收集器管理应用程序的内存分配和释放。每次创建新对象时，公共语言运行库都会从托管堆中为该对象分配内存。只要托管堆中有可用的地址空间，运行时就会继续为新对象分配空间。然而，记忆不是无限的。最终，垃圾收集器必须执行收集以释放一些内存。垃圾收集器的优化引擎根据正在进行的分配确定执行收集的最佳时间。当垃圾收集器执行收集时，它会检查托管堆中不再被应用程序使用的对象，并执行必要的操作来回收它们的内存。

如果需要立即释放内存（比如有数据库连接），可以 Dispose ，只要实现[`IDisposable`](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx).

> 该接口的主要用途是释放非托管资源。当不再使用该对象时，垃圾收集器会自动释放分配给托管对象的内存。但是，无法预测垃圾收集何时发生。此外，垃圾收集器不了解非托管资源，例如窗口句柄或打开的文件和流。
> 
> 使用此接口的 Dispose 方法与垃圾收集器一起显式释放非托管资源。当不再需要对象时，对象的使用者可以调用此方法。

# asp.net - 具有多个链接选项的链接按钮

> ID：11015708
> 
> 赞同：1
> 
> 时间：2012-06-13T13:18:24.827
> 
> 标签：asp.net

我今年和明年有两个文件，链接按钮必须指向不同的文件，具体取决于年份。但问题是我们想在新窗口中打开文件。所以我决定从服务器端调用javascript

asp的代码：链接按钮

```
<asp:LinkButton ID="guide" runat="server" Text="XXX" OnClick="guide_click"> 
```

javascript代码

```
function Guidelink2013() {
        window.open('XXX1.pdf', '', 'width=750,height=900'); return false;
}
function Guidelink2012() {
         window.open('XXX2.pdf', '', 'width=750,height=900'); return false;
} 
```

后面的代码

```
 protected void guide_click(object sender, EventArgs e)
    {
        if (Session["YearLastLicence"] != null)
        {
            if (int.Parse(Session["YearLastLicence"].ToString()) < DateTime.Now.Year)
            {
                ClientScript.RegisterStartupScript(GetType(), "Javascript", "javascript:Guidelink2012();", true);
            }
            else ClientScript.RegisterStartupScript(GetType(), "Javascript", "javascript:Guidelink2013();", true);

        }
    } 
```

首次打开页面时它工作正常，但如果我刷新页面，弹出窗口也会自动打开。任何想法？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T13:27:33.473

您应该在页面加载中编写代码，而不是在链接按钮的单击事件中编写代码。

所以在页面加载时，

```
 if (Session["YearLastLicence"] != null)
        {
            if (int.Parse(Session["YearLastLicence"].ToString()) < DateTime.Now.Year)
            {
               guide.Attrbuites.Add("onclick","javascript:Guidelink2012();return false;");
            }
            else {
guide.Attrbuites.Add("onclick" "javascript:Guidelink2013();return false;");

        }
} 
```

您还可以从链接按钮中删除单击事件。

# javascript - 将鼠标悬停在圆圈中的不同段上

> ID：11015709
> 
> 赞同：2
> 
> 时间：2012-06-13T13:18:29.937
> 
> 标签：javascript, jquery, html, css

我目前正在尝试为我的网站创建一个蓝色、圆形、饼图式的图像。圆圈将被分成 6 个不同的部分。

我想要发生的是，当用户将鼠标悬停在特定段上时，该段将变为橙色，并且与该段对应的圆圈旁边会出现一些文本。

我在网上找到了一些资源，使用 CSS 图像映射几乎可以达到我需要的效果。[http://www.noobcube.com/tutorials/html-css/css-image-maps-a-beginners-guide-/](http://www.noobcube.com/tutorials/html-css/css-image-maps-a-beginners-guide-/)但是，这些技术使用矩形分割图像。如果我要分割一个圆形对象，我更愿意根据特定的弧线分割该区域。

我认为这超出了纯 HTML 和 CSS 的范围。我对网络语言没有太多经验，尽管我对 JQuery 有过经验。我需要什么技术来解决我的问题，什么技术最适合实施它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T13:22:31.387

您可以创建不是矩形的图像映射，而是使用多边形形状。

这个有用的工具[http://www.image-maps.com/](http://www.image-maps.com/)将让您实现您正在寻找的东西，而无需编写自己的多边形映射！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T13:45:03.493

几个选项：

**HTML 图像映射**

创建一个非常接近圆形每个切片形状的 HTML 图像映射很简单，但是 HTML 图像映射存在一些限制。例如，您不能在图像映射的每个切片中嵌套内容（作为实现悬停弹出窗口的简单方法）。如果 HTML 图像映射对您来说足够了，那么它是最简单的解决方案。

**CSS图像映射**

要定义圆形切片形状，CSS 图像映射是不切实际的，除非您只需要对每个圆形切片的热点进行非常粗略的近似。但是，如果您可以接受它，那么就功能而言，您将拥有更多的灵活性。

**onmousemove**

您还可以使用 onmousemove 事件处理程序获取整个圆圈的鼠标坐标，然后进行自己的计算以确定鼠标所在的圆圈切片。这使您可以准确地定义每个圆圈切片的热点，并且您会比 HTML 图像映射具有更大的灵活性。但计算可能需要一些工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T16:53:17.283

我有一个解决方案，主要使用 HTML 和 CSS 以及一点点 jQuery 来处理圆圈旁边的文本显示。

然而，它确实使用了一些不是很广泛支持的 CSS 属性，例如[`pointer-events`](http://caniuse.com/pointer-events)

[JSFiddle 演示](http://jsfiddle.net/dAY8H/2/)

# websphere-portal - 如何重置 IBM WebSphere Portal Server

> ID：11015713
> 
> 赞同：2
> 
> 时间：2012-06-13T13:18:51.313
> 
> 标签：websphere-portal

在进行一些研发时，我搞砸了我的 IBM WebSphere 门户登录页面。我在登录页面上附加了一个自定义 portlet 以及原始登录 portlet。现在登录页面没有显示，我无法访问管理工具。我现在什至无法恢复这些更改。我尝试在 URL 中写入用户名和密码，但没有成功。是否有任何其他方法/解决方法可以恢复这些更改或将门户服务器重置为原始形式？因为我想做的最后一件事是重新安装。任何帮助表示赞赏。

**编辑：**我正在使用 IBM WebSphere Portal Server v7

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T18:32:17.010

`ExportRelease.xml`您可以使用`xmlAccess`界面导出整个门户。

[http://www-10.lotus.com/ldd/portalwiki.nsf/dx/P61t4d](http://www-10.lotus.com/ldd/portalwiki.nsf/dx/P61t4d)

完成导出后，您将获得整个 page_structure。

您必须搜索登录页面。我认为该参数被命名为活动的。它很可能是假的。

试试`active="true"`。登录页面被命名`wps.Login`或类似的名称。

修改页面结构后，您也可以使用[xmlAccess](http://www-10.lotus.com/ldd/portalwiki.nsf/dx/Working_with_the_XML_configuration_interface_wp7)将其作为脚本运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T14:18:34.290

WebSphere Portal 7.0 不提供将 Portal Server 实例“重置”到其原始的开箱即用状态的方法。与 WebSphere Application Server 不同，您可以简单地删除一个概要文件并重新创建一个新概要文件，而这在 WebSphere Portal 中是不可能的。

话虽如此，WebSphere Portal 7.0 能够支持多个配置文件：[http ://www-10.lotus.com/ldd/portalwiki.nsf/xpDocViewer.xsp?lookupName=IBM+WebSphere+Portal+7+Product+Documentation #action=openDocument&res_title=Supporting_multiple_profiles_wp7&content=pdcontent](http://www-10.lotus.com/ldd/portalwiki.nsf/xpDocViewer.xsp?lookupName=IBM+WebSphere+Portal+7+Product+Documentation#action=openDocument&res_title=Supporting_multiple_profiles_wp7&content=pdcontent)

所以，你可以做的是：

1.  重新安装 WebSphere Portal 7.0。
2.  根据文档备份 WebSphere Portal 7.0 实例。
3.  当需要恢复到原始状态时，请从备份中恢复。

这是重置 WebSphere Portal 7.0 实例的唯一确定方法……不幸的是。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-10T12:55:15.767

从其他门户环境中获取页面的 XML 并导入。

# c# - 强类型数据集：覆盖列获取：设置

> ID：11015718
> 
> 赞同：2
> 
> 时间：2012-06-13T13:19:09.500
> 
> 标签：c#, xsd, strongly-typed-dataset

我们使用数据集作为我们的数据访问层。目前有一些列存储加密数据。

使用 CLR，我能够创建一个 SQL 函数来解密选择中的数据，但在讨论中我们已经确定这是一个安全风险。

我想做的是要么

1.  覆盖数据表列的获取/设置，以便在获取时它将取消加密值并返回可读字符串，并且在设置上将加密数据。
2.  或对表适配器执行某些操作，以便在选择/更新时执行与上述相同的操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T14:12:54.083

您可以尝试为此任务创建扩展方法：

```
namespace ExtensionMethods
{
    public static class MyExtensions
    {
        public static void SetEncryptColumn(this DataSetType.DataTableRow row, string value)
        {
            row.Encrypt = EncryptValue(value);
        }

        public static string GetEncryptColumn(this DataSetType.DataTableRow row)
        {
            return DecryptValue(row.Encrypt);
        }
    }   
} 
```

[http://msdn.microsoft.com/en-us/library/bb383977%28v=vs.90%29.aspx](http://msdn.microsoft.com/en-us/library/bb383977%28v=vs.90%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T13:47:10.467

类型化数据表是部分类。虽然您无法覆盖属性，但您可以在另一个文件中添加更多方法，这些方法将在设置时加密并在获取时解密，将值存储在原始属性中。

# jackrabbit - JCR，JackRabbit ：使 XPath 用于搜索日期的年份和子节点属性值

> ID：11015721
> 
> 赞同：1
> 
> 时间：2012-06-13T13:19:16.757
> 
> 标签：jackrabbit, jcr

问候！我对以下问题有太多的困扰......我会尽可能清楚。目前，我在我们的 Web 应用程序中运行了一个 Jackrabbit JCR 实现。一切正常，但在尝试进行某些特定搜索时会出现一个小（大）问题。

对于存储哪种数据的简要概要，我们有 3 个名为“Entry”的节点类，它扩展了另一个名为“BaseEntry”的节点类，并扩展了另一个名为“BaseNode”的节点类。Entry 类代表我们 JCR 系统中的一个 Node，并具有一组属性（映射为相应类中的属性），并且还继承了映射在其超类中的属性。

我复制和粘贴，类定义的重要部分和感兴趣的属性......

```
@Node(jcrType = "entry",  extend = BaseEntry.class)
public class Entry extends BaseEntry {

  ... // nothing really important here
}

@Node(jcrType = "baseEntry", extend = BaseNode.class, isAbstract = true)
public abstract class BaseEntry extends BaseNode {

  @Collection (jcrType = "attachment",
      collectionConverter = NTCollectionConverterImpl.class)
  protected List<Attachment> attachments = new ArrayList<Attachment>();

  ...

}

@Node(jcrType = "baseNode", isAbstract = true)
public abstract class BaseNode {

  @Field(jcrName = "name", id = true)
  protected String name;

  @Field(jcrName = "creationDate")
  protected Date creationDate;

  ...
} 
```

1）我如何才能为仅选择那些在属性 creationDate 中具有特定**年份**的节点（条目）创建谓词，而忽略其余部分。该属性是 Date 类型（在类中），我猜该属性以 xs:DateTime 格式存储我猜......我真的不太清楚......它如何真正匹配 JCR 底层系统中的 Date .

到目前为止，我得到了这个......
必须有这样的东西`//element(*, entry)[getYear(@creationDate) == <year>]`

必须是整数、字符串……我真的不知道。

2）我如何才能为仅选择那些包含具有特定名称的附件的节点（条目）做出谓词。

再次上课附件，重要的部分......

```
@Node(jcrType = "attachment", discriminator = true)
public class Attachment extends BaseNode implements Comparable<Attachment> {
  ...
} 
```

到目前为止，我得到了这个..那是有效的..但必须有更好的方法：

```
//element(*, entry) [jcr:contains(./*,'<nameOfInterest>')] 
```

所有的朋友，我真的很抱歉没有读者可能需要的信息来更好地理解事情的背景，我想这是我能做的。我对 Jackrabbit 和 JCR 还很陌生，我必须亲自动手（脏），而不知道我在做什么......并且不知不觉它开始变得非常复杂......

好吧，希望任何慈善灵魂都可以回答这个问题，并至少提供一点帮助：D。感谢提前。问候。胜利者。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T10:11:12.693

我不是专家，但无论如何我都会尝试回答：

**问题 1**

```
//element(*, entry)[getYear(@creationDate) == <year>] 
```

我想你可以使用：

```
//element(*, entry)[
    @creationDate >= '2001-01-01T00:00:00.0' 
and @creationDate < '2002-01-01T00:00:00.0'] 
```

**问题2**

仅选择包含具有特定名称的附件的那些节点（条目）。

我只知道 SQL-2 查询，在节点名称上使用相等。我不确定这是否是您正在寻找的：

```
select * from [nt:base] where name() = '<nameOfInterest>' 
```

# iphone - 在 iPhone 上使用 PhoneGap 时如何在谷歌地图上显示谷歌商标标志

> ID：11015723
> 
> 赞同：1
> 
> 时间：2012-06-13T13:19:20.857
> 
> 标签：iphone, google-maps, cordova, appstore-approval

我使用 PhoneGap 开发了一个 iPhone 应用程序，一切正常，我将应用程序发送给审查以在 App Store 上发布。

我收到了一份拒绝报告，说明了这个问题：

> 8.6：如果原始内容的所有品牌特征保持不变且完全可见，则可以在应用程序中使用通过 Google Maps Api 获得的 Google 地图和 Google 地球图像。掩盖或修改谷歌标志或版权所有者身份的应用程序将被拒绝。

我在使用 Ajax 加载到我的应用程序中的 PHP 页面上使用 Google Maps API v3。我没有隐藏任何东西，但徽标没有出现在应用程序中，它只出现在网络浏览器或我 iPhone 上的 Safari 上。链接是[http://mourady.me/alhokair/iphone/maps.php](http://mourady.me/alhokair/iphone/maps.php)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T09:10:00.060

这是我如何解决我的问题，我发现它与地图画布的高度和画布加载到的 div 的高度有关，因为我正在使用 phonegap。

所以我在我的网络浏览器中正常加载了谷歌地图并复制了标志 div 并将其位置更改为在移动地图中出现，苹果很容易接受

```
<div style="margin: 2px 5px 2px 2px; z-index: 1000000; position: absolute; left: 0px; bottom: 66px; "><a style="position: static; overflow: visible; float: none; display: inline; " title="Click to see this area on Google Maps" target="_blank" href="http://maps.google.com/maps?ll=42.228517,164.003906&amp;z=2&amp;t=m&amp;hl=en-US"><div style="width: 62px; height: 24px; cursor: pointer; "><img style="position: absolute; left: 0px; top: 0px; -webkit-user-select: none; border: 0px; padding: 0px; margin: 0px; width: 62px; height: 24px; " src="http://maps.gstatic.com/mapfiles/google_white.png"></div></a></div> 
```

# android - 为什么 sharedpreferences 的 getStringSet 方法不起作用？

> ID：11015725
> 
> 赞同：1
> 
> 时间：2012-06-13T13:19:21.917
> 
> 标签：android, sharedpreferences

在我的 android 应用程序中，我正在使用这行代码：

```
SharedPreferences myPrefs = getSharedPreferences("myPrefs", MODE_PRIVATE);
Set<String> set = myPrefs.getStringSet("list", new HashSet<String>()); 
```

但我收到以下错误：

> 方法 getStringSet(String, HashSet) 未为 SharedPreferences 类型定义

为什么我会收到此错误？提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T13:21:06.027

getStringSet 可从 API 级别 11 (Android 3 Honeycomb) 获得。

检查您在项目中定义的 Android 版本。

[http://developer.android.com/reference/android/content/SharedPreferences.html#getStringSet(java.lang.String](http://developer.android.com/reference/android/content/SharedPreferences.html#getStringSet(java.lang.String) , java.util.Set)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T13:22:01.120

`getStringSet()`在 API 级别 11 中添加。您的构建目标（例如，项目 > 属性 > Android）设置为低于 API 级别 11。请仅在您设置`minSdkVersion`为 11 或更高时使用此方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-07T00:37:18.027

这是支持旧版本 Android 和处理新 API 的一种方法。它甚至可能更有效（存储更少的字节）：

```
 public static void putStringCollection(final Context context,final int prefKeyResId,final Collection<String> newValue)
    {
    final Editor editor=PreferenceManager.getDefaultSharedPreferences(context).edit();
    final String key=context.getString(prefKeyResId);
    if(newValue==null)
      editor.remove(key).apply();
    else editor.putString(key,new JSONArray(newValue).toString()).apply();
    }

  public static Set<String> getStringSet(final Context context,final int prefKeyResId)
    {
    final String key=context.getString(prefKeyResId);
    final String str=PreferenceManager.getDefaultSharedPreferences(context).getString(key,null);
    if(str==null)
      return null;
    try
      {
      final JSONArray jsonArray=new JSONArray(str);
      final Set<String> result=new HashSet<>();
      for(int i=0;i<jsonArray.length();++i)
        result.add(jsonArray.getString(i));
      return result;
      }
    catch(final JSONException e)
      {
      e.printStackTrace();
      PreferenceManager.getDefaultSharedPreferences(context).edit().remove(key).apply();
      }
    return null;
    } 
```

注意：无论 API 是什么，都应该使用它，因为它不会真正转换为 Android 保存数据的新方式。

# php - 连接数组以在 json 编码中使用

> ID：11015727
> 
> 赞同：1
> 
> 时间：2012-06-13T13:19:24.197
> 
> 标签：php, arrays, json, encoding

我有一个数组 $options：

```
$options = ('value' => '87', 'text' => 'Accessorize', 'image' =>'accessorize.ico'),('value' => '35', 'text' => 'Adams Kids', 'image' =>'AdamsKids.ico'); 
```

使用 json_encode 后生成如下输出字符串：

```
[{"value":"87","text":"Accessorize","image":"accessorize.ico"},{"value":"35","text":"Adams Kids","image":"AdamsKids.ico"}] 
```

但我想要的是在开头添加一个条目：

```
[{"value":"0","text":"- Select Shop -","image":""},{"value":"87","text":"Accessorize","image":"accessorize.ico"},{"value":"35","text":"Adams Kids","image":"AdamsKids.ico"}] 
```

我创建了以下数组：

```
$first = array('value' => '0', 'text' => '- Select Shop -', 'image' =>''); 
```

我使用了以下连接方法：

```
$options2 = array_merge($first, $options);
$options2 = $first + $options; 
```

但两者都产生以下内容：

```
{"value":"0","text":"- Select Shop -","image":"","0":{"value":"87","text":"Accessorize","image":"accessorize.ico"},"1":{"value":"35","text":"Adams Kids","image":"AdamsKids.ico"},"2":{"value":"92","text":"Alex and Alexa","image":"alexandalexa.ico"}} 
```

其中包含这些增量数值（实际数组包含大约 200 个项目）。

如何添加第一行以获得所需的 uotput，即：

```
[{"value":"0","text":"- Select Shop -","image":""},{"value":"87","text":"Accessorize","image":"accessorize.ico"},{"value":"35","text":"Adams Kids","image":"AdamsKids.ico"}] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T13:21:43.070

```
$options2 = array_unshift($options,$first); 
```

[`array_unshift()`](http://php.net/array-unshift)

# iphone - 如何在其他应用程序中集成 aurioTouch 应用程序功能？

> ID：11015744
> 
> 赞同：3
> 
> 时间：2012-06-13T13:20:06.647
> 
> 标签：iphone, ios

我正在尝试将 aurioTouch 应用程序功能集成到我的应用程序中，但我遇到了问题，因为该应用程序的一小部分是用 C++ 编写的，为此我将我的 .m 文件更改为 .mm 但仍然有问题。我已经添加了图像。请参阅/如何解决此错误？

![在此处输入图像描述](../Images/b2fcb12f667cf343ef541f4a5dded4da.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T09:14:15.833

我也遇到了同样的问题，很长一段时间都无法解决。当您将 auriotouch 的`.cpp`类导入您的项目时，真正的问题就开始了。通常在这样做时，我们会遇到很多编译错误，有时还会遇到链接器错误。所以，

**首先：** 将项目中所有类文件的扩展名`.m`从`.mm`. 这将使您的类文件同时支持***C++***和***目标 C***代码。**[如果没有，您将面临多个编译问题]**

**第二：** 检查是否在***Project->Targets-> build phase-> Compile sources***`.m`中导入了类文件（ ,`.mm`或`.cpp`）。 **[如果没有，您将面临链接器错误]**

 *****第三：** 尝试检查您是否在类文件中正确声明了全局变量。**[如果不是，它可能会显示重复符号错误]**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T18:41:13.417

阅读： [https ://stackoverflow.com/a/4714727/88461](https://stackoverflow.com/a/4714727/88461)

> 如果您的 .cpp 文件包含需要使用 Objective-C 的 C++ 代码，则将该 .cpp 文件重命名为 .mm 或传递`-x objective-c++`给编译器。***

# javascript - 如何使用 Prototype 或 JQuery 获取所选单选按钮的值

> ID：11015748
> 
> 赞同：2
> 
> 时间：2012-06-13T13:20:24.370
> 
> 标签：javascript, jquery, forms, prototypejs, radio-button

如何使用 JQuery 或 Prototype 获取所选单选按钮的值？

这是我的表格：

```
<label for="deliveryChoice">Courier&nbsp;<b>&pound;3.00</b></label>
<input type="radio" name="deliveryChoice" value="2.00" onchange="updateBasketTotals();" />
<label for="deliveryChoice">Royal Mail&nbsp;<b>&pound;2.80</b></label>
<input type="radio" name="deliveryChoice" value="2.00" onchange="updateBasketTotals();" /> 
```

我尝试的最后两个命令是：

```
deliveryVal = Form.getInputs('deliveryProcessor','radio','deliveryChoice').find(function(radio) { return radio.checked; }).value;
deliveryVal = jQuery('[name="deliveryChoice"]:radio:checked').val(); 
```

有任何想法吗？

**编辑**

单选按钮是在页面加载后由于 ajax 调用而创建的。这是一个 jsfiddle 的链接：[jsfiddle.net/4naqm](http://jsfiddle.net/4naqm)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-21T10:47:41.920

使用原型，您可以通过以下方式获取选定收音机的值：

```
$$('input:checked[type=radio][name=deliveryChoice]')[0].value; 
```

希望这可以帮助！！！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T13:25:25.870

像这样的东西：

```
var value = jQuery("input[name='deliveryChoice']:checked", yourForm).val(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T13:24:37.307

使用 jQuery：

```
$('input:radio').change(function(){
    alert($(this).val());
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-13T13:24:44.780

```
$("input:radio:checked").val() 
```

# windows - 使用非管理员帐户将 httpd 作为服务启动

> ID：11015749
> 
> 赞同：1
> 
> 时间：2012-06-13T13:20:32.340
> 
> 标签：windows, apache, windows-services

我将 Apache 安装在它的默认目录下`C:\Program Files\Apache Software Foundation\Apache2.2`。在安装过程中，`Apache2.2`创建了一个服务。

当以具有管理员权限的用户身份使用*Apache Monitor*应用程序或 Windows*服务*工具时，我能够毫无问题地启动和停止该服务，它为网站提供服务，一切似乎都运行良好。

出于安全原因，我想从具有有限权限的用户帐户启动 httpd 服务器。

在深入研究了一些文档并使用[ProcessMonitor](http://technet.microsoft.com/en-us/sysinternals/bb896645)调试任何文件和注册表访问问题后，我认为我获得了文件和目录的权限 - 只有少数对 C:\ 和 EventLog 注册表项的访问失败时出现在 ProcessMonitor 中试图启动服务。

但是，它失败并显示错误消息

> Windows 无法在本地计算机上启动 Apache2.2。有关详细信息，请查看系统事件日志。(...)

此事件日志显示以下消息：

> (20024) 给定路径格式错误或包含无效字符：配置文件路径无效 C:\Program Files\Apache Software Foundation\Apache2.2\conf\httpd.conf

因为我读到 httpd 不接受反斜杠（尽管它们似乎在由具有管理员权限的用户启动时工作），所以我将服务的参数更改为使用正斜杠、带引号、不带引号、删除它们、使它们相对（在为了从它们中删除空格），例如`../conf/httpd.conf`和其他变体，但到目前为止还没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T03:54:03.263

Apache 网络服务器似乎从`C:\`层次结构开始遍历所有目录，直到到达它找到的目录`httpd.conf`。对于这个问题，这些目录是：

```
C:\
C:\Program Files\
C:\Program Files\Apache Software Foundation\
C:\Program Files\Apache Software Foundation\Apache2.2\
C:\Program Files\Apache Software Foundation\Apache2.2\conf\ 
```

为了解决这个问题，所有这些目录都需要为执行的用户帐户设置*List Folder Contents*`httpd`权限。

因此，它在事件日志中给出的错误消息具有误导性，路径是正确的。

为了避免更改所有这些文件夹的权限设置，我建议将 Apache 安装在 的直接子目录中`C:\`，例如`C:\Apache2.2\`.

# sql - 将常量行结果添加到 SQL 查询 - MS Access

> ID：11015753
> 
> 赞同：6
> 
> 时间：2012-06-13T13:20:39.250
> 
> 标签：sql, ms-access, dummy-data

假设我有一个表“tblItems”：

```
*ID*    |     *Name*
1       |   First Item
2       |  Second Item 
```

我希望将其填充到表单的下拉列表中。我将如何添加一行：

```
ALL     |    SHOW ALL 
```

成为

```
*ID*    |     *Name*
1       |   First Item
2       |  Second Item
ALL     |    SHOW ALL 
```

将一个查询放在`Row Source`组合框中？我一直无法找到访问语法来做到这一点..

AFAIK，我需要类似于的语法

```
SELECT ID, Name FROM tblItems
UNION
SELECT 0, "All" FROM SOME.SYSTEM.DUMMY.TABLE 
```

我找不到的是那个虚拟表的 Access 版本。我真的不想有一个单独的表格来存储一个表格的一行......但从我一直在阅读的内容来看，我可能不得不这样做。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-13T13:22:41.043

你可以这样做：

```
select ID, Name
from tblItems
union all
select 'ALL', 'SHOW ALL' 
```

如果您总是希望它显示在底部，则必须变得更复杂一些。

根据评论，我意识到 Access 不支持`SELECT`没有`FROM`子句的语句，这很烦人。一种解决方法是创建一个表`tblAll`（可能需要修改语法）：

```
create table tblAll(ID varchar(15), Name varchar(30));
insert into tblAll(ID, Name) values ('ALL', 'SHOW ALL'); 
```

那么你可以这样做：

```
select ID, Name
from tblAll
union all
select str(ID) as ID, Name
from tblItems 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-09-17T15:51:45.710

我所做的是使用一个`SELECT TOP 1`语句并使用现有的表名，所以它看起来像这样：

```
SELECT ID, Name FROM tblItems
UNION
SELECT TOP 1 'ALL', 'SHOW ALL' FROM tblItems 
```

这将为您提供单行以及现有表中的选择。您可以为该`TOP 1`行使用任何您想要的表格。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-10-06T19:12:14.057

只想修复 Jeremy Holovacs 在 MS Access 中工作的答案。这样您就可以使用同一张表，而不必创建一个虚拟表。

```
SELECT ID, Name
FROM tblItems
UNION ALL
SELECT TOP 1 'ALL', 'SHOW ALL' 
FROM tblItems 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-13T13:23:59.647

您可以使用`UNION ALL`，但是，常量和列之间存在不匹配（“ALL”不是整数）。您可能会执行以下操作：

```
select ID, NAME from tblItems
union all
select 0, 'SHOW ALL' 
```

在应用程序端，将 ID 0 解释为“SHOW ALL”。或者，将 ID 转换为字符串。

```
select str(ID), NAME from tblItems
union all
select 'ALL', 'SHOW ALL' 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-08-26T10:53:09.610

请注意，以下仅在表中有任何行时才有效，如果您有一个空表，它将不起作用。

```
SELECT ID, Name
FROM tblItems
UNION ALL
SELECT TOP 1 'ALL', 'SHOW ALL' 
FROM tblItems 
```

# javascript - 单击时重定向到 codeigniter 控制器

> ID：11015758
> 
> 赞同：1
> 
> 时间：2012-06-13T13:20:56.707
> 
> 标签：javascript, jquery, codeigniter

当他单击 div 时，我试图将用户重定向到页面。我想知道如何将用户从 html 视图重定向到 CI 的新控制器？

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T13:23:05.240

在您的 html 视图中添加以下代码，

```
$(function(){
 $('#div_id').on('click',function(){
    window.location.href = "<?php echo site_url('new_controller'); ?>";
 });
}); 
```

请更改`div_id`and`new_controller`以满足您的需要。

# java - java中的分页

> ID：11015760
> 
> 赞同：1
> 
> 时间：2012-06-13T13:20:57.697
> 
> 标签：java, pagination

我现在被困了几天，试图开发一种方法来管理搜索引擎中的结果页面（就像谷歌分页系统一样）。

我有结果的总数、当前页面（从 1...开始到...最后一页）和每页的结果数（假设每页 10 个）。

在 JSP 结果页面的底部，我想显示页面的表格数据，如下所示：

假设搜索引擎返回了 470 个结果。- 基于“每页 10 个结果”，我们将总共有 47 页 (470 / 10)

这就是我想要展示的

"previous 2 3 4 5 6 7 8 9 10 Next" > 当我们点击第 10 页时，应该会发生以下情况：

“上一个 5 6 7 8 9 10 11 12 13 14 下一个”如果点击第 14 页，则：

“上一个 9 10 11 12 13 14 15 16 17 18 下一个”以此类推...

我已经设法做到以下几点

```
public class Test {

public static int [] getIntervalNumberPages(
        final int pNumberHits,
        final int pNumberTotalHits,
        final int pNumberCurrentPage,
        final int pNumberResultsPerPage) {

    // Page interval
    final int NB_PAGES_INTERVAL = 10;

    // Initialise table
    int [] vResult = new int [0];

    // If no results found or if number of documents per page = 0
    if (pNumberHits != 0 && pNumberResultsPerPage != 0) {
        // Total number of pages
        int vNumberTotalPages = (int) java.lang.Math.ceil(pNumberTotalHits / (double) pNumberResultsPerPage);
        // First number of the list
        int vPremierNumero = 0;

        // Last number of the list
        int vDernierNumero = 0;
        // managing multiples
        if (pNumberCurrentPage >= NB_PAGES_INTERVAL && pNumberCurrentPage % NB_PAGES_INTERVAL == 0) {
            vPremierNumero = (pNumberCurrentPage / NB_PAGES_INTERVAL - 1) * NB_PAGES_INTERVAL + 1;
            vDernierNumero = java.lang.Math.min(vNumberTotalPages, (pNumberCurrentPage / NB_PAGES_INTERVAL - 1) * NB_PAGES_INTERVAL + NB_PAGES_INTERVAL);
        } else {
            vPremierNumero = pNumberCurrentPage / NB_PAGES_INTERVAL * NB_PAGES_INTERVAL + 1;
            vDernierNumero = java.lang.Math.min(vNumberTotalPages, pNumberCurrentPage / NB_PAGES_INTERVAL * NB_PAGES_INTERVAL + NB_PAGES_INTERVAL);
        }
        vResult = new int [vDernierNumero - vPremierNumero + 1];
        // Fill in table
        for (int vCpt = 0; vCpt < vResult.length; vCpt++) {
            vResult [vCpt] = vPremierNumero + vCpt;
        }
    }

return vResult;
}
} 
```

但是我的代码是这样工作的：

“1 2 3 4 5 6 7 8 9 10 Next”如果我点击第 10 页 > “Previous 11 12 13 14 15 16 17 18 19 20 Next” 以此类推

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T13:33:48.363

你的问题只是简单的数学。您重新编号的方式与您描述的要求不符。

```
 vPremierNumero = (pNumberCurrentPage / NB_PAGES_INTERVAL - 1) * NB_PAGES_INTERVAL 
```

所以让我们插入一些数字

```
 pNumberCurrentPage = 10
 NB_PAGES_INTERVAL = 10

 vPremierNumero = 10/9 * 10 = 100/9 = 11 
```

所以这就是为什么你的第一页是 11。你想把它移动 NB_PAGES_INTERVAL/2 以便你点击的数字在范围的中间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T13:37:15.927

你的数学是关闭的。你可能想要类似的东西

> vPremierNumero = Math.max(1, pNumberCurrentPage - (NB_PAGES_INTERVAL / 2)); vDernierNumero = Math.min(vPremierNumero + NB_PAGES_INTERVAL, vNumberTotalPages);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T13:43:47.610

您计算的第一个和最后一个数字不正确，请尝试以下操作：

```
 // If no results found or if number of documents per page = 0
    if (pNumberHits != 0 && pNumberResultsPerPage != 0) {
        // Total number of pages
        // You shouldn't create an intermediate floating number here, this trick causes the same effect
        int vNumberTotalPages = (pNumberTotalHits + pNumberResultsPerPage - 1) / pNumberResultsPerPage;

        int firstIndex = pNumberCurrentPage - (NB_PAGES_INTERVAL / 2);
        int lastIndex = firstIndex + NB_PAGES_INTERVAL - 1;

        // First number of the list
        int vPremierNumero = Math.max(firstIndex, 1);

        // Last number of the list
        int vDernierNumero = Math.min(lastIndex, vNumberTotalPages);

        vResult = new int [vDernierNumero - vPremierNumero + 1];
        // Fill in table
        for (int vCpt = 0; vCpt < vResult.length; vCpt++) {
            vResult [vCpt] = vPremierNumero + vCpt;
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T13:38:16.893

这是您尝试做的基本数学运算，您可以插入其余部分

```
public static int[] getPagination(
        int currentPage,
        int maxPerPage,
        int totalResults) throws IOException {
    final int PAGES_BEFORE_AFTER = 5;
    final int MAX_PER_PAGE = 20;
    if (maxPerPage <= 0) {
        maxPerPage = MAX_PER_PAGE;
    }

    int startRecords = 0;
    int endRecords = totalResults;

    boolean has_pagination = (totalResults > maxPerPage);

    if (has_pagination) {
        int pageCount = totalResults / maxPerPage;
        if ((pageCount * maxPerPage) < totalResults) {
            pageCount++;
        }

        startRecords = (currentPage * maxPerPage) - maxPerPage;
        endRecords = (startRecords + maxPerPage);

        if (totalResults <= maxPerPage) {
            startRecords = 0;
            endRecords = totalResults;
        } else if (endRecords > totalResults) {
            endRecords = totalResults;
        }

        boolean prev_enabled = ((currentPage != 0) && (currentPage != 1));
        boolean next_enabled = ((pageCount != 0) && (pageCount != currentPage));

        int startIndex = 0;
        int stopIndex = pageCount;

        if (currentPage <= PAGES_BEFORE_AFTER) {
            startIndex = 0;
        } else {
            startIndex = (currentPage - PAGES_BEFORE_AFTER) - 1;
        }

        if ((currentPage + PAGES_BEFORE_AFTER) < pageCount) {
            stopIndex = currentPage + PAGES_BEFORE_AFTER;
        } else {
            stopIndex = pageCount;
        }

        for (int x = startIndex; x < stopIndex; x++) {
            boolean disabled = (currentPage == (x + 1));

            // buttons
        }
    }

    return new int[] { startRecords, endRecords };
} 
```

# performance - JSF 性能调优

> ID：11015764
> 
> 赞同：4
> 
> 时间：2012-06-13T13:21:09.830
> 
> 标签：performance, jsf, primefaces

我将 Mojara 2.0.3 与 PrimeFaces 2.2 一起使用。

我已经阅读了这个主题的很多帖子，并找到了一些不错的建议（例如不要在 getter 中使用 db 调用等）并使用它们，但我们的应用程序仍然需要大约 3 秒来呈现响应。

我对其进行了测试，第 6 个生命周期（渲染阶段）是最大的资源消耗者。我们主要使用内置或复合组件，我想知道用简单的html标签替换其中一些（主要用于设计而不使用任何功能）是好还是坏。

例如：Insted of `<p:outputPanel styleClass="myClass">...some code...</p:outputPanel>`

使用这个

```
<div class="myClass">...some code...</div> 
```

我们有数百个组件和数千个 DOM 元素的巨大视图，我可以成为渲染阶段的阻碍者。

**编辑：**

在我删除了几乎所有“无用”的组件之后，我们经历了巨大的性能增长。无论是响应时间还是响应大小。平均响应时间从~3 秒减少到~2.2 秒。太棒了……所以结论是：少用，多用 :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T16:00:22.360

根据[Core Java Server Faces](https://rads.stackoverflow.com/amzn/click/com/0137012896)的第 1 章，纯 HTML（静态）在 JSF 标签的编码阶段之前经过。

如果您有一些不需要与 Backing Bean 通信的 JSF 标记，我怀疑通过将静态数据限制在普通 HTML 中，您会享受到小的性能提升。

JSF 生命周期的编码和解码短语在组件标记和普通 HTML 之间进行转换。与html相比，如果您使用的 Component 可以避免循环遍历表并填充行（例如），而不是像`<h:outputText>`不使用 ajax 或绑定到支持 bean 的东西，那么这对您来说才值得`<p>`元素。

简而言之，如果您不需要利用 JSF 作为控制器，请不要害怕在 JSF 文档中使用普通的旧 HTML。

# android - SipDemo 示例代码给出 NullPointerException

> ID：11015765
> 
> 赞同：3
> 
> 时间：2012-06-13T13:21:12.357
> 
> 标签：android, sip

我正在开发 SIP 应用程序。我使用了 SipDemo 中的 SipDemo 示例，[但](http://developer.android.com/resources/samples/SipDemo/index.html)出了点问题。我有 NullPointerException =>“尝试关闭管理器时出错。” 在这个地方（例外'e'）：

```
public void initiateCall() {

    updateStatus(sipAddress);

    try {
        SipAudioCall.Listener listener = new SipAudioCall.Listener() {

            @Override
            public void onCallEstablished(SipAudioCall call) {
                call.startAudio();
                call.setSpeakerMode(true);
                call.toggleMute();
                updateStatus(call);
            }

            @Override
            public void onCallEnded(SipAudioCall call) {
                updateStatus("Ready.");
            }
        };

        call = manager.makeAudioCall(me.getUriString(), sipAddress, listener, 30);

    }
    catch (Exception e) {
        Log.i("WalkieTalkieActivity/InitiateCall", "Error when trying to close manager.", e);
        if (me != null) {
            try {
                manager.close(me.getUriString());
            } catch (Exception ee) {
                Log.i("WalkieTalkieActivity/InitiateCall",
                        "Error when trying to close manager.", ee);
                ee.printStackTrace();
            }
        }
        if (call != null) {
            call.close();
        }
    }
} 
```

另外我检查了这个`SipManager.isApiSupported()`并且 `SipManager.isVoipSupported()`都返回了**false**。我正在使用 4.0.3 操作系统的 Tab 上对此进行测试。我想知道故障是否在于不支持本机 sip，但我可以轻松地使用 SipDroid 或市场上的其他应用程序拨打电话。

**编辑** Logcat 堆栈跟踪：

```
05-15 22:29:11.255: INFO/WalkieTalkieActivity/InitiateCall(4247): Error when trying to close manager.
05-15 22:29:11.255: INFO/WalkieTalkieActivity/InitiateCall(4247): java.lang.NullPointerException
05-15 22:29:11.255: INFO/WalkieTalkieActivity/InitiateCall(4247):     at com.example.android.sip.WalkieTalkieActivity.initiateCall(WalkieTalkieActivity.java:212)
05-15 22:29:11.255: INFO/WalkieTalkieActivity/InitiateCall(4247):     at com.example.android.sip.WalkieTalkieActivity$4.onClick(WalkieTalkieActivity.java:324)
05-15 22:29:11.255: INFO/WalkieTalkieActivity/InitiateCall(4247):     at com.android.internal.app.AlertController$ButtonHandler.handleMessage(AlertController.java:165)
05-15 22:29:11.255: INFO/WalkieTalkieActivity/InitiateCall(4247):     at android.os.Handler.dispatchMessage(Handler.java:99)
05-15 22:29:11.255: INFO/WalkieTalkieActivity/InitiateCall(4247):     at android.os.Looper.loop(Looper.java:130)
05-15 22:29:11.255: INFO/WalkieTalkieActivity/InitiateCall(4247):     at android.app.ActivityThread.main(ActivityThread.java:3691)
05-15 22:29:11.255: INFO/WalkieTalkieActivity/InitiateCall(4247):     at java.lang.reflect.Method.invokeNative(Native Method)
05-15 22:29:11.255: INFO/WalkieTalkieActivity/InitiateCall(4247):     at java.lang.reflect.Method.invoke(Method.java:507)
05-15 22:29:11.255: INFO/WalkieTalkieActivity/InitiateCall(4247):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)
05-15 22:29:11.255: INFO/WalkieTalkieActivity/InitiateCall(4247):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)
05-15 22:29:11.255: INFO/WalkieTalkieActivity/InitiateCall(4247):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T07:46:07.517

我想我有一些解决办法。并非每个版本的 android 都支持 sip。因此，您应该寻找第 3 部分库。例如，您可以查看[Sipdroid](http://code.google.com/p/sipdroid/)或[CSipSimple](http://code.google.com/p/csipsimple/)的源代码并根据自己的需要进行转换。

# wpf - WPF开发模式

> ID：11015766
> 
> 赞同：2
> 
> 时间：2012-06-13T13:21:14.663
> 
> 标签：wpf, mvvm

我正在启动一个新项目，该项目将在 WPF 中作为桌面应用程序开发。我花了几天时间研究开发模式。似乎 MVVM 是要走的路，因为这将是一个企业应用程序。我担心的是我找到的所有信息都是 2009 年的。谁能告诉我这些信息是否仍然有效以及我是否正在寻找正确的方向？

先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T13:23:03.727

是的，MVVM 绝对是任何 WPF 开发的必经之路

该设计模式非常适合 WPF 框架和绑定系统的性质。如果您有兴趣，我实际上在我的博客上发布了一个[简单的 MVVM 示例。](http://rachel53461.wordpress.com/2011/05/08/simplemvvmexample/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T13:24:27.940

[Caliburn micro 是最近更新的 MVVM 库： http](http://caliburnmicro.codeplex.com/) ://caliburnmicro.codeplex.com/ 无论如何，自 2009 年以来 MVVM 概念没有改变，是的，我可以投票是要走的路。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T13:28:51.950

是的，你的方向是对的。

即使某些 MVVM 信息来自 2009 年，也有基于 WPF MVVM 的框架会定期更新，例如[Caliburn micro](http://caliburnmicro.codeplex.com/)和[MVVMLight](http://mvvmlight.codeplex.com/)

我建议您花一些时间与其中之一相处，因为它们确实可以帮助编写干净的代码。我个人喜欢 Caliburn Micro。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T13:32:50.757

是的，MVVM 是要走的路。

我在大多数应用程序中都使用了 MVVM；当我加入一家新公司时，我看到团队在过去 1 年中一直在努力处理他们正在开发的 WPF 应用程序，性能、可维护性、可重用性是一些主要问题；当我查看代码时，我想到的唯一解决所有问题的方法是 - MVVM。

我们正确地重构了实现 MVVM 的代码，并且能够摆脱 20-30% 的代码，重用大量代码并将性能提高到可接受的水平。

MVVM（严格遵循）不仅可以帮助您正确使用 WPF 功能，而且还可以迫使您以 WPF 方式研究解决方案（而不是在不使用 WPF 功能或使用 WinForms 方式的情况下解决它们），因此它变得更加重要和有用对于新团队。

以下是一些我建议您解决的问题 -

[对于基于 UserControl 的 WPF 架构放弃 MVVM 是什么体验？](https://stackoverflow.com/questions/1510041/what-is-your-experience-with-abandoning-mvvm-for-usercontrol-based-wpf-architect/3163443#3163443)

[启动 WPF MVVM。使用框架？](https://stackoverflow.com/questions/3606883/starting-wpf-mvvm-use-a-framework/3615938#3615938)

[自定义 MVVM 实现与。棱镜](https://stackoverflow.com/questions/6251821/custom-mvvm-implementation-vs-prism)

[哪个 WPF 控件套件最适合 MVVM？](https://stackoverflow.com/questions/3151367/which-wpf-control-suite-is-best-suited-to-mvvm/3157880#3157880)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-13T15:50:07.003

一般来说，任何 GUI 架构模式都可以通过 WPF 实现和使用，Martin Fowler[在他的博客](http://martinfowler.com/eaaDev/uiArchs.html)中详细解释了其中最流行的模式。

MVVM 作为 Presentation Model 模式的最新阶段以 WPF 闻名，因为它为我们提供了开箱即用的同步状态机制，如绑定、视图映射上的简单视图模型（如数据模板等），并且有很多如何构建的示例带有 WPF 的 MVVM。

但这取决于特定的项目，有时您可以按照 MVP 模式轻松构建 WPF 解决方案，如果您使用不支持 mvvm 的第三方 WPF 控件（它们使用常规属性而不是依赖项属性，那么您不能使用 WPF 绑定并包含许多方法，这会降低从 XAML 以声明方式使用控件的能力），您应该花费额外的精力将它们采用到 mvvm 模式。

# css - 将开发 CSS 中的导入合并到 1 个文件中用于生产

> ID：11015771
> 
> 赞同：4
> 
> 时间：2012-06-13T13:21:37.573
> 
> 标签：css, optimization, sass, less

有什么我可以使用的东西可以快速将多个 CSS 导入合并到一个 CSS 文件中。

例如，假设我有一个主要的 styles.css 文件，该文件在开发期间有大量的导入：

```
@import url('normalize.css');
@import url('1.css');
@import url('2.css');
...
@import url('10.css'); 
```

我在开发过程中将它们分开只是为了我自己的理智。

我想在生产过程中将 HTTP 请求最小化为 1 个样式文件，而不是 11、12 等。

那么，除了手动复制/粘贴到一个文件之外，还有什么可以将这些导入文件放入 1 个文件中的吗？

LESS 或 SASS 会做这样的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-14T12:08:11.207

基于 yuicompressor 的 css-compressor 就是这样做的：

[https://github.com/samilyak/css-compressor](https://github.com/samilyak/css-compressor)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T13:27:14.270

LESS 和 SASS 可以做到这一点，甚至更多。有许多服务器端方法可以将您的 css 文件整理到一个文档中（使用 js 也可以做到这一点，但我不推荐这样做，因为关闭 js 会丢失您的样式）

如果我没记错的话，Yahoo YUI 压缩器/Rhino 也会这样做：http: [//developer.yahoo.com/yui/compressor/#work](http://developer.yahoo.com/yui/compressor/#work)

如果您检查全局选项，则此选项适合您：

-o 输出文件

```
 Place output in file outfile. If not specified, the YUI Compressor will
  default to the standard output, which you can redirect to a file.
  Supports a filter syntax for expressing the output pattern when there are
  multiple input files.  ex:
      java -jar yuicompressor.jar -o '.css$:-min.css' *.css
  ... will minify all .css files and save them as -min.css 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T14:15:41.993

使用 YUI Compressor 的最简单方法是下载需要 Java 的二进制文件，然后在命令行上执行它们：

java -jar yuicompressor-xyzjar foo.js | foo.min.js

但是，您可以在部署时以编程方式执行此操作。如果您使用的是 Sprockets 或 Less 之类的库，他们会为您执行此操作。除此之外，还有几个 YUI Compressor 的接口库，例如 Sam Stephenson 的 Ruby-YUI-compressor gem 或 Jammit 库。

# python - 我可以使用 ctypes 从嵌入在 C 中的 python 回调 C 函数吗？

> ID：11015772
> 
> 赞同：4
> 
> 时间：2012-06-13T13:21:38.167
> 
> 标签：python, python-2.7, ctypes, python-extensions

我有一个带有嵌入式 python 代码的 C 程序。我已经从源代码编译了 python 2.7.2，并将我的程序与 libpython2.7.a 链接起来。

现在在我的 python 代码中，我希望从链接到我的 C 程序的其他 C 库中回调函数。我可以编写一个 Python 扩展（请参阅[本文档](http://docs.python.org/extending/embedding.html)中的扩展嵌入式 Python ）。但是，**ctypes**会让这变得更容易，并且允许我使用一些现有的代码。

**ctypes**旨在加载共享库，我想知道是否有办法将它“指向”回我的静态程序代码。

*我无法将相关代码编译到共享库中，因为我的目标是 iOS 并且 Apple 禁止使用 AFAIK 共享库。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T13:33:08.813

从 Python 代码中，您可以为静态函数创建 ctypes 包装器，如下所示：

```
restype = ctypes.c_int
argtypes = [ctypes.c_int, ctypes.c_double]        # or whatever
functype = ctypes.CFUNCTYPE(restype, *argtypes)
wrapper = functype(address_of_static_function_as_an_int) 
```

你当然可以从你的 C 代码中调用这个（或类似的）代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T13:40:18.850

构造一个 ctypes 值（例如`ctypes.c_void_p`）封装您的函数指针并将其传递给您的 Python 代码。

# javascript - 如何在 jquery 中重新绑定事件？

> ID：11015776
> 
> 赞同：1
> 
> 时间：2012-06-13T13:21:50.887
> 
> 标签：javascript, jquery, onclick

我有以下 JavaScript/jQuery 代码，用于启动突出显示 DOM 元素的侦听器。

我单击一个按钮并启动侦听器事件。例如：突出显示：函数（）

当我单击网页中的某些内容时，我会停止监听器。

现在，当我再次单击该按钮时，我想重新启动侦听器事件。

```
highlight : function()
    {
        if(isHighlighting){
            isHighlighting = false;
            $(document).unbind("mousemove", highlighter);
            return false;
        }

        $(document).bind("mousemove", highlighter);
        isHighlighting = true;
    }, 
```

我还有捕获 onclick 事件并停止 DOM 元素突出显示的代码

```
function highlighter(e) {
    var cur, overlay = $("#overlayhighlightclosetaffair"),
    no = [document.body, document.documentElement, document];
    if (e.target === cur) {
        return;
    }

    if (~no.indexOf(e.target)) {
        cur = null;
        overlay.hide();
        return;
    }

    var target = $(e.target),
    offset = target.offset(),
    width = target.outerWidth(),
    height = target.outerHeight();
    cur = e.target;
    overlay.css({
        top: offset.top,
        left: offset.left,
        width: width,
        height: height
    }).show();

    $(document).click(
        function() {
            if(isHighlighting){
                isHighlighting = false;
                $(document).unbind("mousemove", highlighter);
                console.log('click');
            }
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T13:32:52.340

您不需要取消绑定事件，并且可以简化您的逻辑。

这不是一个功能齐全的示例，但它应该是一个很好的起点。我建议对代码进行结构化，使其`isHighlighting`不是全局的。

```
function highlightElement(e) {
    if(isHighlighting) {
        /* this is where you put the code to highlight e.target */
    }
}

/* call this one time */
$(document).click(
    function(e) {
        /* this will be true if we clicked the button, false if we clicked anything else */
        isHighlighting = e.target === highlightButtonNode;
    }
});

/* also call this once */
$(document).bind("mousemove", highlightElement); 
```

这是使用绑定和解除绑定的替代解决方案。我不推荐这种方法，但这是处理解除绑定和重新绑定的更好方法。忘记设置`isHighlight = false`。比忘记取消绑定事件要严重得多。这将导致内存泄漏，并且对事件处理程序的多次调用更有可能产生更严重的副作用。

```
/* call this one time */
$(document).click(
    function(e) {
        /* this will be true if we clicked the button, false if we clicked anything else */
        if(e.target === highlightButtonNode) {
            $(document).bind("mousemove", highlightElement);
        } else {
            $(document).unbind("mousemove", highlightElement);
        }
    }
}); 
```

# session - Freeradius：多并发登录用户的会话超时

> ID：11015782
> 
> 赞同：1
> 
> 时间：2012-06-13T13:22:01.183
> 
> 标签：session, concurrency, timeout, freeradius

我想为一个帐户设置会话超时，例如 3 分钟。如果有两个或更多用户同时使用此帐户，则他们共享超时。如何使用 freeradius 实现这一目标？我尝试了 sqlcounter 模块，但所有用户都有 3 分钟。我也试过rlm_counter，但是在用户通过会话超时注销后，他可以再次登录并且还有3分钟。

# ruby-on-rails - 使用 Capybara 进行测试：它可以用于测试数据模型吗？

> ID：11015786
> 
> 赞同：0
> 
> 时间：2012-06-13T13:22:28.640
> 
> 标签：ruby-on-rails

刚开始使用 Rails 并且仍在将所有东西放在一起，因此很抱歉，如果我的问题很简单，但是 Capybara 可以用于测试数据库（数据模型），因为我见过的所有示例都有它测试视图，有时还有控制器？而且我知道 rspec 通过失败的测试非常适合数据模型中的 TDD，但是 Capybara 也可以这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T13:27:14.567

Capybara 是 Web 应用程序的验收框架。这意味着它通过浏览器（或类似浏览器）界面测试整个堆栈。

因此，使用浏览器测试数据模型或业务逻辑类是没有意义的。他们没有浏览器与他们交谈的界面。它是网络-> 框架-> 类。水豚成为“网络”

这就是 Test::Unit、RSpec 和/或 Minitest 的用武之地。它们被设计为代码 -> 类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T13:28:50.947

Capybara 用于集成测试，这意味着它模拟来自真实浏览器使用、点击和键入等的请求。

如果您想测试您的模型，请使用 Test::Unit、Rspec、Shouda。

# running-other-programs - 错误 6 (net::ERR_FILE_NOT_FOUND)：找不到文件 c 或目录

> ID：11015789
> 
> 赞同：5
> 
> 时间：2012-06-13T13:22:32.043
> 
> 标签：running-other-programs

我正在使用 scriptcase php 代码生成器，它安装在服务器中，但我通过网络访问它。直到有人注销服务器的管理员（这是我使用的用户）之前都很好。我重新启动服务器并以管理员身份登录，但现在我无法从 chrome 访问 scriptcase！表明：

```
Error 6 (net::ERR_FILE_NOT_FOUND): The file or directory could not be found. 
```

我该怎么办？！[在此处输入图片描述]

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-05-14T18:43:27.617

我看到的一大原因是文件名。如果您有空格，则任何数字（例如“站点 2”）的文件路径看起来像某物/Site%202/index.html 这是因为空格或呈现为 %20，如果紧随其后的是另一个数字，它将尝试将其读取为 %202。修复是您从不在文件名中使用空格。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-01T18:11:22.063

我用以下方法在 Google Chrome 上解决了同样的问题：

1.  选择**自定义和控制 Google Chrome**（右上角的按钮）。

2.  选择**设置**。

3.  转到**扩展程序**。

4.  取消标记那里的所有扩展名。（它们应该显示为**Enable**而不是**Enabled**。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-16T10:56:36.880

我已经解决了这个问题如下：

从 chrome 扩展中删除并再次安装 ext。它将工作 ISA

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-05T09:23:26.110

以下是我们将在相应文件夹中获得 ERR_FILE_NOT_FOUND 甚至文件可用性的典型情况。

```
Code:
@font-face {
    font-family: Eau_Sans_Bold;
    src: url("/fonts/eau_sans_bold.otf") format("opentype");
}
Error:
 GET file:///C:/fonts/eau_sans_bold.otf net::ERR_FILE_NOT_FOUND

Answer or Solution.:
@font-face {
    font-family: Eau_Sans_Book;
    src: url("../fonts/eau_sans_book.otf") format("opentype");  
}

Basically browser not able to pick if we metion just /font/. We should to mention ../fonts/ This will work. So, we wont get ERR_FILE_NOT_FOUND. 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-22T16:08:09.073

我遇到了同样的问题：错误是`File not found`，在 chrome 中打开`HTML`文件时，但我解决了如下问题：

前：

`abc.html`1）我在文件夹名称中保存了一个 html 文件`C#`。

2）当我`abc.html`在谷歌浏览器中打开时，它显示错误为“找不到文件”。但它在 Firefox 和 Internet Explorer 上运行良好。

后：

3）然后我所做的是，我只是将文件夹名称更改`C#`为`csharp` 无空格，然后在 Chrome 中重新打开它。有效。

4) 寓意是：确保不要在文件夹名称中留出任何空格，因为某些浏览器不支持它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-04T12:17:52.653

如果这是您使用 file://FileName 的 HTML 文件，那么使用像 src="//cdnjs.cloudflare.com/ajax/libs/angular.js/1.2.1/angular.min.js" 这样的 CDN 将不行。

您必须在代码中包含 .js 文件。

# wpf - 如何在一个地方为资源定义 x:Key 并在 XAML 和代码后面使用它

> ID：11015794
> 
> 赞同：4
> 
> 时间：2012-06-13T13:22:39.500
> 
> 标签：wpf, xaml, resources

标题中的问题几乎总结了它。我在 XAML 中定义了一些资源对象，我也想在后面的代码中访问它。那么有没有办法在一个地方为它定义 x:Key 而不是在 XAML 和代码后面硬编码 x:Key （作为字符串）？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-13T13:36:12.153

如果您不想对字符串进行两次编码，您可以将其存储为静态变量，这里我将它放在 App.cs 中

```
public partial class App : Application
{
    public static string Key1 = "testKey";
} 
```

当您想在应用程序的资源中使用此键时，您可以这样做。

```
<Application.Resources>        
   <SolidColorBrush x:Key="{x:Static local:App.Key1}"/>
</Application.Resources> 
```

在 C# 中，您不再需要使用确切的字符串名称，因为它在 App 中

```
var brush = FindResource(App.Key1); 
```

要使用 XAML 中的资源，请使用

```
<TextBox Background="{StaticResource {x:Static local:App.Key1}}" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T13:29:12.350

在 XAML 中，您可以像这样引用它：

```
{StaticResource myResource} 
```

在代码隐藏中，您将使用[FindResource](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.findresource.aspx)方法。

# c++ - C++：OpenMP：为多线程复制函数指针

> ID：11015796
> 
> 赞同：0
> 
> 时间：2012-06-13T13:22:41.747
> 
> 标签：c++, multithreading, oop, function-pointers, openmp

我有一个并行拟合程序（与 OpenMP 并行），它采用函数指针必须拟合的函数。我一直面临问题，最终我发现我将相同的函数指针传递给进行拟合的类，这与其他类发生冲突并产生混乱的结果。

如何“复制”函数指针以使其成为线程安全的，或者换句话说，使线程不相互冲突？

我指向的函数也如下所示：

```
void function(const Real t, RealArray &a, Real &y)
{
#pragma omp critical //if I remove this line, the catastrophe happens and I get wrong results
    {
    if(t < FIDLength)
    {
        y = ...;
    }
} 
```

并且每个线程中的类构造如下：

```
FitClass fit(DSxAxis1.size(),initialValues_param.size(),function,function2,constraints3D); 
```

function 和 function2 是函数指针。它们都以相同的方式使用。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T15:34:12.860

我使用了一个半函子并且它起作用了。所以我的拟合类现在有一个模板参数，其中包含函数、它的导数和其他东西。这工作正常。

结果：并非所有 std 函数都是线程安全的。

# c# - 在 linq 中使用 OrderBy()？

> ID：11015801
> 
> 赞同：3
> 
> 时间：2012-06-13T13:22:55.523
> 
> 标签：c#, linq

我需要修改一个集合，以便我可以对其中的项目序列进行排序。

所以我正在做类似的事情：

```
IEnumerable<ItemType> ordered = myItems.OrderBy( (item) => item.Age); 
```

但是，我想修改`myItems`集合本身以具有有序的序列......有可能吗？

我想要类似的东西：

```
myItems.SomeActionHere // This should modify myItems in place. 
```

这可能是一个新手或菜鸟的问题。对于那个很抱歉。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-13T13:25:24.493

如果它是一个数组，您可以使用[Array.Sort](http://msdn.microsoft.com/en-us/library/system.array.sort.aspx)。这将执行就地排序，而不会重复引用/值。

但是，同样地，如果重复引用不是问题（通常不是问题），您可以在 linq 语句的末尾添加`.ToArray()`或标记以“实现”有序枚举。`.ToList()`

例如：

```
myItems = myItems.OrderBy(i => i.Age).ToArray(); 
```

如果你绝对需要它作为另一个`ReadOnlyCollection`实例 - 你可以这样做：

```
myItems = new ReadOnlyCollection<ItemType>(myItems.OrderBy(i => i.Age).ToArray()); 
```

请注意，这是有效的，因为即使它们不可修改`.ToArray()`，数组也会实现。`IList<T>`

或者 - 还有[Array.AsReadOnly](http://msdn.microsoft.com/en-us/library/53kysx7b.aspx) - 将其打开：

```
myItems = Array.AsReadOnly(myItems.OrderBy(i => i.Age).ToArray()); 
```

除了是较短的代码行之外，我看不到太多好处-除非减少尖括号对您很重要:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T13:25:15.647

您将无法使用 Linq 来订购我放置的收藏。除非你专门去实现`OrderBy`你的序列类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T13:31:27.463

使用[SortedList](http://msdn.microsoft.com/en-us/library/ms132319.aspx)或转换为[SortedList](https://stackoverflow.com/q/981992/503761)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T13:26:27.273

`OrderBy`（像大多数其他 Linq 运算符一样）是*惰性*的；它没有实现它的结果，它只是每次都重新读取源集合。所以如果你改变了内容`myItems`，每次你都会枚举`ordered`你会看到最新的变化`myItems`。

# javascript - 我使用 Raphael 的动画滞后，为什么？

> ID：11015804
> 
> 赞同：0
> 
> 时间：2012-06-13T13:23:05.427
> 
> 标签：javascript, animation, svg, raphael

我已经设置了一个[演示，说明圆形上的动画](http://jsfiddle.net/YEqTe/2/)，并且圆形在渲染时似乎动摇了。是什么导致动画卡顿？我怎样才能使它顺利？

正如注释代码中所见，我试图用对`setInterval()`的调用来替换使用，但无济于事。`animate()`

```
var WINDOW_HEIGHT = 400;
var WINDOW_WIDTH = 600;

var paper = Raphael(0, 0, WINDOW_WIDTH, WINDOW_HEIGHT);

Circle = function(paper, x, y, r, color) {
    this.paper = paper;
    this.x = x;
    this.y = y;
    this.r = r;
    this.color = color;
    this.xd = 1;
    this.yd = 1;
    this.elem;
}

Circle.prototype.create = function() {
    this.elem = this.paper.circle(this.x, this.y, this.r);
    this.elem.attr("fill", this.color);
    this.elem.attr("stroke", this.color);
}

Circle.prototype.move = function() {

    if (this.x < 0 || this.x > WINDOW_WIDTH) {
        this.xd = -this.xd;
    }
    if (this.y < 0 || this.y > WINDOW_HEIGHT) {
        this.yd = -this.yd;
    }
    this.x += this.xd;
    this.y += this.yd;

    this.elem.attr("cx", this.x);
    this.elem.attr("cy", this.y);
}

Circle.prototype.animate = function(x, y) {
    this.elem.animate({
        cx: x,
        cy: y
    }, 1000, "linear");
}

var circle = new Circle(paper, 0, 0, 30, "#f00");

circle.create();

window.setInterval(function() {
    circle.move();
}, 1);

//circle.animate(300, 300);​​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T13:34:06.070

这是您的副作用，`setInterval`间隔为 1 毫秒。浏览器无法真正处理。相反，根据时间计算位置，并且仅在最后一帧完成时才请求新帧：

```
var _requestAnimationFrame = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.msRequestAnimationFrame || window.oRequestAnimationFrame || function(f) { setTimeout(f, 16); };

var lastUpdate = new Date().getTime();

var update = function() {
    // How many milliseconds has it been since the last update?
    var now = new Date().getTime();
    var d = now - lastUpdate;
    lastUpdate = now;

    // Now, move the ball based on the difference.
    // Looping is not the right way to go about this, mind.
    var amountBallMoved = d / 33;

    for(var i = 0; i < amountBallMoved; i++)
        circle.move();

    // And finally, request the next animation frame.
    _requestAnimationFrame(update);
};

update();​​​ 
```

[这是一个更新的 jsFiddle。](http://jsfiddle.net/minitech/YEqTe/3/)

# asp-classic - 两个数字之间的asp查询字符串

> ID：11015806
> 
> 赞同：0
> 
> 时间：2012-06-13T13:23:16.767
> 
> 标签：asp-classic, query-string, between

考虑到以下情况，我想知道链接中的以下使用是否正确

main.asp 页面

```
<a href="http://details.asp?number between 01 and 08>)
 click here for number between 1 and 8
</a> 
```

这是访问中的查询

```
select * from table
where right("000" & number,2) between [enter start number] and [enter end number] 
```

这是访问中的表

```
number| field1| field2| field3
1     | xys   | abc   | at
2      |sdfd  | dfasd | dd
3     | sdfd  | ddd    | dd 
```

下面是details.asp代码

```
<html>
<body>

<%
Dim numCategoryID
numCategoryID = Request.Querystring("number")

set conn=Server.CreateObject("ADODB.Connection")
conn.open "query"

set rs = Server.CreateObject("ADODB.recordset")
strQuery = "queryname '" & numCategoryID & "'"
rs.Open strQuery, conn
%>

<table border="1" width="100%">
<tr>
<%for each x in rs.Fields
response.write("<th>" & x.name & "</th>")
next%>
</tr>
<%do until rs.EOF%>
<tr>
<%for each x in rs.Fields%>
   <td><%Response.Write(x.value)%></td>
<%next
rs.MoveNext%>
</tr>
<%loop
rs.close
conn.close
%>
</table>
</body>
</html> 
```

如果上面的代码有任何错误，请告诉我。实际上，当我单击链接 main.asp 时，它应该打开查询 where number between 1 和 8。

当用户在表单中输入两个数字时，这是我第三次尝试在两个数字之间获得输出

```
<%
dim startnumber, endnumber
startnumber = Request.form("number")
endnumber = Request.form("number")
set conn=Server.CreateObject("ADODB.Connection")
conn.open "connection"

set rs = Server.CreateObject("ADODB.recordset")
strQuery = "SELECT * from query " _
& "where number between" & startnumber_
& "& endnumber;
rs.Open strQuery, conn
%>

<table border="1" width="100%">
<tr>
<%for each x in rs.Fields
response.write("<th>" & x.name & "</th>")
next%>
</tr>
<%do until rs.EOF%>
<tr>
<%for each x in rs.Fields%>
   <td><%Response.Write(x.value)%></td>
<%next
rs.MoveNext%>
</tr>
<%loop
rs.close
conn.close
%>
</table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T11:58:42.263

这是一个带有一些建议的修改版本，如果它以一种正确的方式工作，我会感到惊讶，它只是给你一个想法，关于从数据库中传递一个数字和选择的部分可能与你想要的不同，无论如何检查您请求的参数，仅在参数具有正确值时才显示其余参数，否则显示消息

```
'no sql parts in your url, just parameters with a value
'this just indicates you want the numbers between 1 and 8, 
'doesn't select a specific number, 
'then you need eg a form with an input box in your main.asp page

'main.asp
<a href="http://details.asp?number=true>) 
 click here for number between 1 and 8 
</a> 

'details.asp
'best not mix html with code, using one code block here
w "<html>"
w "  <body>"
dim number, conn, rs, connectionstring, strQuery
number = Request.Querystring("number")
if number then
  'adapt the connectionstring for other versions of access and/or files
  connectionString = "DBQ=" & Server.MapPath("\mydb.mdb") & ";DRIVER={Microsoft Access Driver (*.mdb)};"
  set conn = Server.CreateObject("ADODB.Connection") 
  conn.open ConnectionString
  'best to not be dependent on a query, put your sql here
  'no need for an empty recordset first
  strQuery = "select * from table where number between 1 and 8;"
  set rs = conn.execute(strQuery)

  w "      <table border='1' width='100%'>"
  w "        <tr>"
  for each x in rs.Fields
    w "        <th>" & x.name & "</th>"
  next 
  w "        </tr>"
  do until rs.EOF
    w "      <tr>"
    for each x in rs.Fields
      w "      <td>" & x.value & "</td>"
    next 
    rs.MoveNext
    w "      </tr>"
  loop

  rs.close 
  conn.close
  set conn = nothing 'close and cleanup your connection properly

  w "    </table>"
else
  w "No parameter number found"
end if
w "  </body>"
w "</html>"
'--- ---'
sub w (text)
  response.write(text) & VbCrLf
end sub
%> 
```

测试你的数据库连接做一个这样的asp

```
<%
on error resume next
connectionString = "DBQ=" & Server.MapPath("\mydb.mdb") & ";DRIVER={Microsoft Access Driver (*.mdb)};"
      set conn = Server.CreateObject("ADODB.Connection") 
      conn.open ConnectionString
if err.number <> 0 then
  response.write err.description
else
  response.write "Connection was succesfull.."
end if
%> 
```

# android - android：zxing 条码扫描成功但未从活动返回

> ID：11015807
> 
> 赞同：14
> 
> 时间：2012-06-13T13:23:17.943
> 
> 标签：android, zxing, barcode-scanner

我通过调用已安装的条形码阅读器的意图成功地使用 zxing 扫描代码，但是当它发出哔哔声并表示扫描良好时，我希望 zxing 活动会返回控制，以便我可以处理结果，但它坐在那里并尝试再次扫描. 我必须按下后退按钮，*然后*它会返回，我可以进行下一步。当我打电话给扫描仪时，我是否缺少一些明显的标志？

感激地收到任何建议。非常感谢。

这是我的代码：

```
public boolean onTouchEvent(final MotionEvent event) {

    Intent intent = new Intent("com.google.zxing.client.android.SCAN");
    intent.putExtra("com.google.zxing.client.android.SCAN.SCAN_MODE", "QR_CODE_MODE");
    startActivityForResult(intent, 0);

    return true;
    }

public void onActivityResult(int requestCode, int resultCode, Intent intent) {

    super.onActivityResult(requestCode, resultCode, intent);

    if (requestCode == 0) {
        if (resultCode == RESULT_OK) {
            String contents = intent.getStringExtra("SCAN_RESULT");
            String format = intent.getStringExtra("SCAN_RESULT_FORMAT");

            // Handle successful scan

            String s = "http://www.google.com/search?q=";
            s += contents;
            Intent myIntent1 = new Intent(Intent.ACTION_VIEW, Uri.parse(s));
            startActivity(myIntent1);
            }
        else 
            if (resultCode == RESULT_CANCELED) {
                // Handle cancel
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-13T17:26:19.897

这是我自己的问题的完整答案，希望这对某人有所帮助：

[到这里](http://code.google.com/p/zxing/source/browse/trunk/android-integration/src/com/google/zxing/integration/android/IntentIntegrator.java?r=860)复制整个 IntentIntegrator 类，将它添加到你的应用程序中；也可以去[这里](http://code.google.com/p/zxing/source/browse/trunk/android-integration/src/com/google/zxing/integration/android/IntentResult.java?r=1273)并将 IntentResult 类复制到您的应用程序中。现在将其添加到您的活动中（或通过按钮/其他触发扫描）：

```
public boolean onTouchEvent(final MotionEvent event) {

    IntentIntegrator integrator = new IntentIntegrator(this);
    integrator.initiateScan();

    return true;
    }

public void onActivityResult(int requestCode, int resultCode, Intent intent) {
      IntentResult scanResult = IntentIntegrator.parseActivityResult(requestCode, resultCode, intent);
      if (scanResult != null) {
        // handle scan result
          String s = "http://www.google.com/search?q=";
            s += scanResult.getContents();

            Intent myIntent1 = new Intent(Intent.ACTION_VIEW, Uri.parse(s));
            startActivity(myIntent1);
      }
      // else continue with any other code you need in the method
      //...
    } 
```

最好只调用条形码扫描仪应用程序提供的服务，而不是将代码块复制并粘贴到您自己的应用程序中，但这似乎是推荐的方式:(

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-13T16:13:44.620

为什么不使用提供的`IntentIntegrator`类？这是项目文档中提到的唯一方法，你看过那些吗？[https://github.com/zxing/zxing/wiki/Scanning-Via-Intent](https://github.com/zxing/zxing/wiki/Scanning-Via-Intent)

我创建它是为了总结发送和解析 Intent 的这些细节，所以你不会打错字。例如，没有额外的“com.google.zxing.client.android.SCAN.SCAN_MODE”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T14:08:30.437

添加完成活动（请求代码）；在 onActivityResult() 方法的末尾。

试试这个：用下面的代码替换你在 onTouch 中的前 2 行。似乎问题出在扫描二维码以外的代码时。请移除扫描过滤器并检查一次。

Intent intent = new Intent("com.google.zxing.client.android.SCAN"); 意图.addFlags（意图.FLAG_ACTIVITY_CLEAR_WHEN_TASK_RESET）；

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-08T15:00:57.547

我遇到了同样的问题，所以我尝试使用 Sean Owen 推荐的 IntentIntegrator 类。我仍然有这个问题，直到我意识到这只是在尝试扫描纵向条形码时发生（最常见于手机上）。事实证明，从纵向到横向的方向变化会导致双重扫描。我通过添加`android:configChanges="orientation|keyboardHidden|screenSize"`到清单中的活动解决了这个问题。您可能只需要方向之一，但未经测试。

对于在创建 Adob​​e AIR 原生扩展时遇到此问题的任何用户，请务必将该行不仅添加到您的 android 项目清单中，而且还要添加到 app.xml 中的 android 清单添加中的活动标记中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-20T09:16:03.930

这是我正在使用的解决方案。它对我来说很好。

```
Intent intent = new Intent(SelectOptionActivity.this, CaptureActivity.class);
                intent.putExtra("SCAN_MODE", "ONE_D_MODE");
                intent.putExtra("SCAN_FORMATS", "CODE_39,CODE_93,CODE_128,DATA_MATRIX,ITF,CODABAR,EAN_13,EAN_8,UPC_A,QR_CODE");
                intent.setAction(Intents.Scan.ACTION);
                startActivityForResult(intent, 1);

public void onActivityResult(int requestCode, int resultCode, Intent intent) {
        if (requestCode == 1 && resultCode == RESULT_OK) {
            final String contents = intent.getStringExtra(Intents.Scan.RESULT);
            final String formatName = intent.getStringExtra(Intents.Scan.RESULT_FORMAT);

        }
    } 
```

# python - 无法弄清楚 Ubuntu 11.10 上的 spynner 1.11 python 2.7.2 模块需要哪些依赖包

> ID：11015809
> 
> 赞同：1
> 
> 时间：2012-06-13T13:23:43.133
> 
> 标签：python, qt, pyqt4, ubuntu-11.10, spynner

我尝试安装[spynner](http://pypi.python.org/pypi/spynner) python 模块的依赖项，但我得到：

```
$ python -c 'import spynner'
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/usr/local/lib/python2.7/dist-packages/spynner-1.11dev-py2.7.egg/spynner/__init__.py", line 2, in <module>
    from browser import *
  File "/usr/local/lib/python2.7/dist-packages/spynner-1.11dev-py2.7.egg/spynner/browser.py", line 35, in <module>
    from PyQt4.QtCore import SIGNAL, QUrl, QString, Qt, QEvent
ImportError: No module named QtCore 
```

这是我安装的与 QT 匹配的软件包：

```
$ dpkg -l | grep -i qt
ii  appmenu-qt                                       0.2.2-0ubuntu1.1                         appmenu support for Qt
ii  ibus-qt4                                         1.3.1-1ubuntu3                           qt-immodule for ibus (QT4)
ii  libibus-qt1                                      1.3.1-1ubuntu3                           qt-immodule for ibus (QT4)
ii  libindicate-qt1                                  0.2.5.91-1ubuntu2                        Qt bindings for libindicate
ii  libpyside1.0                                     1.0.6.1-2ubuntu2                         Python bindings for Qt 4 (base files)
ii  libqt3-compat-headers                            3:3.3.8-b-8ubuntu1                       Qt 1.x and 2.x compatibility includes
ii  libqt3-headers                                   3:3.3.8-b-8ubuntu1                       Qt3 header files
ii  libqt3-mt                                        3:3.3.8-b-8ubuntu1                       Qt GUI Library (Threaded runtime version), Version 3
ii  libqt3-mt-dev                                    3:3.3.8-b-8ubuntu1                       Qt development files (Threaded)
ii  libqt4-dbus                                      4:4.7.4-0ubuntu8.1                       Qt 4 D-Bus module
ii  libqt4-declarative                               4:4.7.4-0ubuntu8.1                       Qt 4 Declarative module
ii  libqt4-designer                                  4:4.7.4-0ubuntu8.1                       Qt 4 designer module
ii  libqt4-dev                                       4:4.7.4-0ubuntu8.1                       Qt 4 development files
ii  libqt4-help                                      4:4.7.4-0ubuntu8.1                       Qt 4 help module
ii  libqt4-network                                   4:4.7.4-0ubuntu8.1                       Qt 4 network module
ii  libqt4-opengl                                    4:4.7.4-0ubuntu8.1                       Qt 4 OpenGL module
ii  libqt4-opengl-dev                                4:4.7.4-0ubuntu8.1                       Qt 4 OpenGL library development files
ii  libqt4-qt3support                                4:4.7.4-0ubuntu8.1                       Qt 3 compatibility library for Qt 4
ii  libqt4-script                                    4:4.7.4-0ubuntu8.1                       Qt 4 script module
ii  libqt4-scripttools                               4:4.7.4-0ubuntu8.1                       Qt 4 script tools module
ii  libqt4-sql                                       4:4.7.4-0ubuntu8.1                       Qt 4 SQL module
ii  libqt4-sql-mysql                                 4:4.7.4-0ubuntu8.1                       Qt 4 MySQL database driver
ii  libqt4-sql-sqlite                                4:4.7.4-0ubuntu8.1                       Qt 4 SQLite 3 database driver
ii  libqt4-svg                                       4:4.7.4-0ubuntu8.1                       Qt 4 SVG module
ii  libqt4-test                                      4:4.7.4-0ubuntu8.1                       Qt 4 test module
ii  libqt4-webkit                                    4:4.7.4-0ubuntu8.1                       transitional package for Qt 4 WebKit module
ii  libqt4-xml                                       4:4.7.4-0ubuntu8.1                       Qt 4 XML module
ii  libqt4-xmlpatterns                               4:4.7.4-0ubuntu8.1                       Qt 4 XML patterns module
ii  libqtassistantclient4                            4.6.3-3ubuntu1                           Qt Assistant client library (runtime)
ii  libqtcore4                                       4:4.7.4-0ubuntu8.1                       Qt 4 core module
ii  libqtglib-2.0-0                                  0.10.1-2ubuntu3                          C++ bindings library for GLib and GObject with a Qt-style API
ii  libqtgstreamer-0.10-0                            0.10.1-2ubuntu3                          C++ bindings library for GStreamer with a Qt-style API
ii  libqtgui4                                        4:4.7.4-0ubuntu8.1                       Qt 4 GUI module
ii  libqtscript4-core                                0.1.0+git20101026+8b191fbc-2             Qt Script bindings for the Qt 4 Core library
ii  libqtscript4-gui                                 0.1.0+git20101026+8b191fbc-2             Qt Script bindings for the Qt 4 Gui library
ii  libqtscript4-network                             0.1.0+git20101026+8b191fbc-2             Qt Script bindings for the Qt 4 Network library
ii  libqtscript4-sql                                 0.1.0+git20101026+8b191fbc-2             Qt Script bindings for the Qt 4 SQL library
ii  libqtscript4-uitools                             0.1.0+git20101026+8b191fbc-2             Qt Script bindings for the Qt 4 UiTools library
ii  libqtscript4-xml                                 0.1.0+git20101026+8b191fbc-2             Qt Script bindings for the Qt 4 XML library
ii  libqtwebkit-dev                                  2.2~2011week36-0ubuntu1                  Web content engine library for Qt - development files
ii  libqtwebkit4                                     2.2~2011week36-0ubuntu1                  Web content engine library for Qt
ii  pinentry-qt4                                     0.8.1-1ubuntu1                           Qt-4-based PIN or pass-phrase entry dialog for GnuPG
ii  pyqt-tools                                       3.18.1-4ubuntu3                          pyuic and pylupdate for Qt3
ii  pyqt4-dev-tools                                  4.8.5-0ubuntu2                           Development tools for PyQt4
ii  python-pyside.qtcore                             1.0.6.1-2ubuntu2                         Qt 4 core module - Python bindings
ii  python-qt4                                       4.8.5-0ubuntu2                           Python bindings for Qt4
ii  python-qt4-dbus                                  4.8.5-0ubuntu2                           DBus Support for PyQt4
ii  python-qt4-dev                                   4.8.5-0ubuntu2                           Development files for PyQt4
ii  python-qt4-gl                                    4.8.5-0ubuntu2                           Python bindings for Qt4's OpenGL module
ii  qdbus                                            4:4.7.4-0ubuntu8.1                       Qt 4 Dbus Tool
ii  qt3-dev-tools                                    3:3.3.8-b-8ubuntu1                       Qt3 development tools
ii  qt4-designer                                     4:4.7.4-0ubuntu8.1                       graphical designer for Qt 4 applications
ii  qt4-linguist-tools                               4:4.7.4-0ubuntu8.1                       Qt 4 Linguist tools
ii  qt4-qmake                                        4:4.7.4-0ubuntu8.1                       Qt 4 qmake Makefile generator tool 
```

使用`pip`or `easy-install`，这不起作用：

```
# pip install PyQt
Downloading/unpacking PyQt
  Downloading PyQt-x11-gpl-4.9.1.tar.gz (9.7Mb): 9.7Mb downloaded
  Running setup.py egg_info for package PyQt
    Traceback (most recent call last):
      File "<string>", line 14, in <module>
    IOError: [Errno 2] No such file or directory: '/home/sputnick/build/PyQt/setup.py'
    Complete output from command python setup.py egg_info:
    Traceback (most recent call last):

  File "<string>", line 14, in <module>

IOError: [Errno 2] No such file or directory: '/home/sputnick/build/PyQt/setup.py'

----------------------------------------
Command python setup.py egg_info failed with error code 1
Storing complete log in /root/.pip/pip.log 
```

日志文件：

```
# cat /root/.pip/pip.log
------------------------------------------------------------
/usr/bin/pip run on Wed Jun 13 16:00:41 2012
Downloading/unpacking PyQt
  Getting page http://pypi.python.org/simple/PyQt
  URLs to search for versions for PyQt:
  * http://pypi.python.org/simple/PyQt/
  Getting page http://www.riverbankcomputing.com/software/pyqt/
  Getting page http://www.riverbankcomputing.com/software/pyqt/download
  Analyzing links from page http://pypi.python.org/simple/PyQt/
    Skipping link http://www.riverbankcomputing.com/software/pyqt/ (from http://pypi.python.org/simple/PyQt/); not a file
    Skipping link http://www.riverbankcomputing.com/software/pyqt/download (from http://pypi.python.org/simple/PyQt/); not a file
  Analyzing links from page http://www.riverbankcomputing.com/software/pyqt/intro
    Skipping link http://www.riverbankcomputing.com/software/pyqt/intro/index.html (from http://www.riverbankcomputing.com/software/pyqt/intro); unknown archive format: .html
    Skipping link http://www.riverbankcomputing.com/@@/resources/riverbank.css (from http://www.riverbankcomputing.com/software/pyqt/intro); unknown archive format: .css
    Skipping link http://www.riverbankcomputing.com/@@/resources/logo_tn.png (from http://www.riverbankcomputing.com/software/pyqt/intro); unknown archive format: .png
    Skipping link http://yui.yahooapis.com/2.5.2/build/menu/assets/skins/sam/menu.css (from http://www.riverbankcomputing.com/software/pyqt/intro); unknown archive format: .css
    Skipping link http://www.riverbankcomputing.com/software/pyqt/intro/@@rcl_login.html (from http://www.riverbankcomputing.com/software/pyqt/intro); unknown archive format: .html
    Skipping link http://qt.nokia.com (from http://www.riverbankcomputing.com/software/pyqt/intro); not a file
    Skipping link http://www.riverbankcomputing.com/commercial/buy (from http://www.riverbankcomputing.com/software/pyqt/intro); not a file
    Skipping link http://www.sqlite.org (from http://www.riverbankcomputing.com/software/pyqt/intro); not a file
    Skipping link http://webkit.org/ (from http://www.riverbankcomputing.com/software/pyqt/intro); not a file
    Skipping link http://www.freedesktop.org/wiki/Software/DBusBindings (from http://www.riverbankcomputing.com/software/pyqt/intro); not a file
    Skipping link http://qt.nokia.com/ (from http://www.riverbankcomputing.com/software/pyqt/intro); not a file
    Skipping link http://www.python.org/ (from http://www.riverbankcomputing.com/software/pyqt/intro); not a file
    Skipping link http://www.qtsoftware.com/products/appdev/developer-tools (from http://www.riverbankcomputing.com/software/pyqt/intro); not a file
    Skipping link http://www.riverbankcomputing.com/software/sip (from http://www.riverbankcomputing.com/software/pyqt/intro); not a file
    Skipping link http://www.riverbankcomputing.com/software/pyqt/whitepaper (from http://www.riverbankcomputing.com/software/pyqt/intro); not a file
    Skipping link http://qt.nokia.com/services-partners/partners/partner-directory/riverbank-computing (from http://www.riverbankcomputing.com/software/pyqt/intro); not a file
    Skipping link http://www.riverbankcomputing.com/news/dip-0.4 (from http://www.riverbankcomputing.com/software/pyqt/intro); unknown archive format: .4
    Skipping link http://www.riverbankcomputing.com/news/pyqt-491 (from http://www.riverbankcomputing.com/software/pyqt/intro); not a file
    Skipping link http://www.riverbankcomputing.com/news/qscintilla-261 (from http://www.riverbankcomputing.com/software/pyqt/intro); not a file
    Skipping link http://www.riverbankcomputing.com/news/sip-4132 (from http://www.riverbankcomputing.com/software/pyqt/intro); not a file
    Skipping link http://www.riverbankcomputing.com/news/pyqt-49 (from http://www.riverbankcomputing.com/software/pyqt/intro); not a file
    Skipping link http://www.riverbankcomputing.com/software/pyqtmobility/download (from http://www.riverbankcomputing.com/software/pyqt/intro); not a file
    Skipping link http://www.riverbankcomputing.com/software/qscintilla/download (from http://www.riverbankcomputing.com/software/pyqt/intro); not a file
    Skipping link http://www.riverbankcomputing.com/software/sip/download (from http://www.riverbankcomputing.com/software/pyqt/intro); not a file
    Skipping link http://www.riverbankcomputing.com/software/vendorid/download (from http://www.riverbankcomputing.com/software/pyqt/intro); not a file
    Skipping link http://www.riverbankcomputing.com/software/dip/download (from http://www.riverbankcomputing.com/software/pyqt/intro); not a file
    Skipping link http://www.riverbankcomputing.com/software/pykde/download3 (from http://www.riverbankcomputing.com/software/pyqt/intro); not a file
    Skipping link http://www.riverbankcomputing.com/software/pyqt/download3 (from http://www.riverbankcomputing.com/software/pyqt/intro); not a file
    Skipping link http://www.riverbankcomputing.com/software/qscintilla/download1 (from http://www.riverbankcomputing.com/software/pyqt/intro); not a file
    Skipping link http://www.riverbankcomputing.com/static/Docs/PyQt4/html/classes.html (from http://www.riverbankcomputing.com/software/pyqt/intro); unknown archive format: .html
    Skipping link http://www.riverbankcomputing.com/static/Docs/PyQt4/html/index.html (from http://www.riverbankcomputing.com/software/pyqt/intro); unknown archive format: .html
    Skipping link http://www.riverbankcomputing.com/static/Docs/QScintilla2/index.html (from http://www.riverbankcomputing.com/software/pyqt/intro); unknown archive format: .html
    Skipping link http://www.riverbankcomputing.com/static/Docs/sip4/index.html (from http://www.riverbankcomputing.com/software/pyqt/intro); unknown archive format: .html
    Skipping link http://www.riverbankcomputing.com/static/Docs/VendorID/vendorid.html (from http://www.riverbankcomputing.com/software/pyqt/intro); unknown archive format: .html
    Skipping link http://www.riverbankcomputing.com/static/Docs/dip/index.html (from http://www.riverbankcomputing.com/software/pyqt/intro); unknown archive format: .html
    Skipping link http://www.riverbankcomputing.com/static/Docs/PyKDE3/index.html (from http://www.riverbankcomputing.com/software/pyqt/intro); unknown archive format: .html
    Skipping link http://www.riverbankcomputing.com/static/Docs/PyQt3/PyQt.html (from http://www.riverbankcomputing.com/software/pyqt/intro); unknown archive format: .html
    Skipping link mailto:info@riverbankcomputing.com (from http://www.riverbankcomputing.com/software/pyqt/intro); unknown archive format: .com
  Analyzing links from page http://www.riverbankcomputing.com/software/pyqt/download
    Skipping link http://www.riverbankcomputing.com/software/pyqt/download/index.html (from http://www.riverbankcomputing.com/software/pyqt/download); unknown archive format: .html
    Skipping link http://www.riverbankcomputing.com/software/pyqt/download/@@rcl_login.html (from http://www.riverbankcomputing.com/software/pyqt/download); unknown archive format: .html
    Found link http://www.riverbankcomputing.com/static/Downloads/PyQt4/PyQt-x11-gpl-4.9.1.tar.gz (from http://www.riverbankcomputing.com/software/pyqt/download), version: x11-gpl-4.9.1
    Found link http://www.riverbankcomputing.com/static/Downloads/PyQt4/PyQt-win-gpl-4.9.1.zip (from http://www.riverbankcomputing.com/software/pyqt/download), version: win-gpl-4.9.1
    Found link http://www.riverbankcomputing.com/static/Downloads/PyQt4/PyQt-mac-gpl-4.9.1.tar.gz (from http://www.riverbankcomputing.com/software/pyqt/download), version: mac-gpl-4.9.1
    Skipping link http://www.riverbankcomputing.com/static/Downloads/PyQt4/ChangeLog (from http://www.riverbankcomputing.com/software/pyqt/download); not a file
    Skipping link http://doc.trolltech.com/ (from http://www.riverbankcomputing.com/software/pyqt/download); not a file
    Skipping link http://www.riverbankcomputing.com/static/Downloads/PyQt4/PyQt-Py3.2-x86-gpl-4.9.1-1.exe (from http://www.riverbankcomputing.com/software/pyqt/download); unknown archive format: .exe
    Skipping link http://www.riverbankcomputing.com/static/Downloads/PyQt4/PyQt-Py3.2-x64-gpl-4.9.1-1.exe (from http://www.riverbankcomputing.com/software/pyqt/download); unknown archive format: .exe
    Skipping link http://www.riverbankcomputing.com/static/Downloads/PyQt4/PyQt-Py3.1-x86-gpl-4.9.1-1.exe (from http://www.riverbankcomputing.com/software/pyqt/download); unknown archive format: .exe
    Skipping link http://www.riverbankcomputing.com/static/Downloads/PyQt4/PyQt-Py3.1-x64-gpl-4.9.1-1.exe (from http://www.riverbankcomputing.com/software/pyqt/download); unknown archive format: .exe
    Skipping link http://www.riverbankcomputing.com/static/Downloads/PyQt4/PyQt-Py2.7-x86-gpl-4.9.1-1.exe (from http://www.riverbankcomputing.com/software/pyqt/download); unknown archive format: .exe
    Skipping link http://www.riverbankcomputing.com/static/Downloads/PyQt4/PyQt-Py2.7-x64-gpl-4.9.1-1.exe (from http://www.riverbankcomputing.com/software/pyqt/download); unknown archive format: .exe
    Skipping link http://www.riverbankcomputing.com/static/Downloads/PyQt4/PyQt-Py2.6-x86-gpl-4.9.1-1.exe (from http://www.riverbankcomputing.com/software/pyqt/download); unknown archive format: .exe
    Skipping link http://www.riverbankcomputing.com/static/Downloads/PyQt4/PyQt-Py2.6-x64-gpl-4.9.1-1.exe (from http://www.riverbankcomputing.com/software/pyqt/download); unknown archive format: .exe
    Skipping link http://www.riverbankcomputing.com/static/Downloads/PyQt4/PyQt-Py2.5-x86-gpl-4.9.1-1.exe (from http://www.riverbankcomputing.com/software/pyqt/download); unknown archive format: .exe
    Skipping link http://www.riverbankcomputing.com/static/Downloads/PyQt4/PyQt-Py2.5-x64-gpl-4.9.1-1.exe (from http://www.riverbankcomputing.com/software/pyqt/download); unknown archive format: .exe
    Found link http://www.riverbankcomputing.com/static/Downloads/PyQt4/PyQt-x11-gpl-snapshot-4.9.2-93480e10d581.tar.gz (from http://www.riverbankcomputing.com/software/pyqt/download), version: x11-gpl-snapshot-4.9.2-93480e10d581
    Found link http://www.riverbankcomputing.com/static/Downloads/PyQt4/PyQt-win-gpl-snapshot-4.9.2-93480e10d581.zip (from http://www.riverbankcomputing.com/software/pyqt/download), version: win-gpl-snapshot-4.9.2-93480e10d581
    Found link http://www.riverbankcomputing.com/static/Downloads/PyQt4/PyQt-mac-gpl-snapshot-4.9.2-93480e10d581.tar.gz (from http://www.riverbankcomputing.com/software/pyqt/download), version: mac-gpl-snapshot-4.9.2-93480e10d581
    Skipping link http://www.riverbankcomputing.com/static/Downloads/PyQt4/ChangeLog-snapshot-4.9.2-93480e10d581 (from http://www.riverbankcomputing.com/software/pyqt/download); unknown archive format: .2-93480e10d581
  Using version x11-gpl-4.9.1 (newest of versions: x11-gpl-4.9.1, x11-gpl-snapshot-4.9.2-93480e10d581, win-gpl-4.9.1, win-gpl-snapshot-4.9.2-93480e10d581, mac-gpl-4.9.1, mac-gpl-snapshot-4.9.2-93480e10d581)
  Downloading from URL http://www.riverbankcomputing.com/static/Downloads/PyQt4/PyQt-x11-gpl-4.9.1.tar.gz (from http://www.riverbankcomputing.com/software/pyqt/download)
  Running setup.py egg_info for package PyQt
    Traceback (most recent call last):
      File "<string>", line 14, in <module>
    IOError: [Errno 2] No such file or directory: '/home/sputnick/build/PyQt/setup.py'
    Complete output from command python setup.py egg_info:
    Traceback (most recent call last):

  File "<string>", line 14, in <module>

IOError: [Errno 2] No such file or directory: '/home/sputnick/build/PyQt/setup.py'

----------------------------------------
Command python setup.py egg_info failed with error code 1
Exception information:
Traceback (most recent call last):
  File "/usr/lib/python2.7/dist-packages/pip/basecommand.py", line 126, in main
    self.run(options, args)
  File "/usr/lib/python2.7/dist-packages/pip/commands/install.py", line 223, in run
    requirement_set.prepare_files(finder, force_root_egg_info=self.bundle, bundle=self.bundle)
  File "/usr/lib/python2.7/dist-packages/pip/req.py", line 980, in prepare_files
    req_to_install.run_egg_info()
  File "/usr/lib/python2.7/dist-packages/pip/req.py", line 216, in run_egg_info
    command_desc='python setup.py egg_info')
  File "/usr/lib/python2.7/dist-packages/pip/__init__.py", line 255, in call_subprocess
    % (command_desc, proc.returncode))
InstallationError: Command python setup.py egg_info failed with error code 1 
```

简易安装：

```
#  easy_install PyQt
Searching for PyQt
Reading http://pypi.python.org/simple/PyQt/
Reading http://www.riverbankcomputing.com/software/pyqt/
Reading http://www.riverbankcomputing.com/software/pyqt/download
Best match: PyQt x11-gpl-4.9.1
Downloading http://www.riverbankcomputing.com/static/Downloads/PyQt4/PyQt-x11-gpl-4.9.1.tar.gz
Processing PyQt-x11-gpl-4.9.1.tar.gz
error: Couldn't find a setup script in /tmp/easy_install-kO3Str/PyQt-x11-gpl-4.9.1.tar.gz 
```

[http://pypi.python.org/pypi/spynner#dependencies](http://pypi.python.org/pypi/spynner#dependencies)说我需要pyQt，但我很确定我自己没有任何东西要编译。有什么提示吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-13T20:22:43.463

我认为“sudo apt-get install python-qt4”会解决它。

# html - HTML5 桌面包装器/框架

> ID：11015811
> 
> 赞同：50
> 
> 时间：2012-06-13T13:23:57.033
> 
> 标签：html, cross-platform, desktop-application

我目前正在构建一个 HTML5 应用程序。

我真的很想将它部署到桌面上，并且我已经查看了诸如 Sencha 之类的解决方案，但没有运气（我发现 Sencha 令人失望且令人沮丧）。我想要跨平台兼容性和易于部署，但我还没有找到任何看起来可以有效完成工作的开源或商业。

任何有经验的人都可以推荐一个可能适合在桌面上打包和部署 HTML5 应用程序的框架吗？这样做的最终要求是它可以在 Mac OS 和 Windows 上运行 - 但现在仅 Windows 就很棒。

我考虑过构建一个将呈现 HTML5 的 C# 包装器，但可能已经存在我忽略的解决方案。

我很感激有经验的人的任何回应——SO上与此相关的其他问题并未概述“提问者”所采用的解决方案。

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-11-26T10:50:38.493

研究这个主题几周后的发现：

*   [Node-Webkit](https://github.com/rogerwang/node-webkit) - 基于 Chromium（也支持 Google Chrome）和 node.js 的应用程序运行时。您可以使用 node-webkit 以 HTML 和 JavaScript 编写本机应用程序。它还允许您直接从 DOM 调用 Node.js 模块，并启用一种使用所有 Web 技术编写本机应用程序的新方法。它是在英特尔开源技术中心创建和开发的。
*   [Adobe AIR](http://en.wikipedia.org/wiki/Adobe_Integrated_Runtime) - 广泛使用，但主要依赖供应商且不支持 Linux
*   [PHP Desktop](https://code.google.com/p/phpdesktop/) - 不要让名称欺骗您，PHP Desktop 还可以充当纯 HTML5/JS 应用程序的打包程序。它嵌入了 Chromium 浏览器和 Web 服务器。不需要提供 PHP 解释器。PHP Desktop 与 PHP 没有紧密的联系，它也可以作为任何其他脚本语言（如 Perl、Ruby、Python）的打包器，为执行脚本提供 CGI 接口。
*   [XULRunner](https://developer.mozilla.org/en/docs/XULRunner) - 直接受益于 Firefox 开发工作，这是一个维护良好的解决方案，具有出色的跨平台支持，但除了 Firefox 和其他基于 XULRunner 的开源应用程序本身之外，几乎不存在用于打包和分发的工具或文档。更新 2013-06-15：下面[的 Webapp XUL Wrapper](https://github.com/neam/webapp-xul-wrapper)解决了这些问题
*   [Chrome 网络应用程序](https://chrome.google.com/webstore/)- 如果您需要的只是从 Chrome 主屏幕指向网络应用程序的链接，这是一个不错的选择
*   [Chrome 可安装网络应用程序](http://developer.chrome.com/stable/apps/about_apps.html)- 就像具有更多桌面集成的 Chrome 网络应用程序。不支持闪存。
*   [Mozilla Open Web Apps](https://developer.mozilla.org/en-US/docs/Apps) - 如果您只需要一个从 Firefox 主屏幕指向您的 Web 应用程序的链接，这是一个不错的选择
*   [Mozilla Native Web Apps](https://wiki.mozilla.org/Web_Apps_integration) - 就像具有更好桌面集成的 Mozilla Open Web App。仍然需要通过 Firefox Marketplace 在线安装。
*   [Flash 投影仪](http://www.adobe.com/support/flashplayer/downloads.html)- 值得一提的低成本解决方案，用于将基于 Flash 的应用程序打包为独立的桌面应用程序
*   [AppJS (Node.js)](http://appjs.com/) - 有前途的项目，但活动很少
*   [Bellite Toolkit](http://bellite.io/) - 一种商业产品，旨在实现大约 1MB 的轻量级库占用空间，比类似的基于[Chromium Embedded](http://code.google.com/p/chromiumembedded/)的框架小 70 到 100 倍。多进程架构允许使用 Node、Python、Ruby、PHP 或通用可执行文件。（注意在 windows 上需要在[应用程序中使用 Modernizr (JS shim)，因为 Bellite 从 Chrome Frame 切换到使用 Internet Explorer](http://bellite.io/blog/2013/chrome-frame-retired.html)）
*   [Webapp XUL Wrapper](https://github.com/neam/webapp-xul-wrapper) - 基于 XUL 的包装器和构建脚本，用于将 webapp 打包到 Mac、Windows 和 Linux 的可分发包中。
*   [Brackets Shell](https://github.com/adobe/brackets-shell/) - 由括号.io 团队创建的一个很棒的包装器。完成构建设置说明和 Grunt 构建工具。在此处查看更多信息：http: [//clintberry.com/2013/html5-desktop-apps-with-brackets-shell/](http://clintberry.com/2013/html5-desktop-apps-with-brackets-shell/)
*   [Atom Shell](https://github.com/atom/atom-shell/) - atom.io 团队创建的包装器。它基于 node.js 和 Chromium，用于 Atom 编辑器。

当前状态的详细概述以及更多信息：http: [//blog.neamlabs.com/post/36584972328/2012-11-26-web-app-cross-platform-desktop-distribution](http://blog.neamlabs.com/post/36584972328/2012-11-26-web-app-cross-platform-desktop-distribution)

另一个半详细的概述在这里： [http ://clintberry.com/2013/html5-apps-desktop-2013/](http://clintberry.com/2013/html5-apps-desktop-2013/)

不再活动/维护：

*   [WebRunner / Mozilla Prism](https://wiki.mozilla.org/Prism) - 基于 XULRunner 在独立浏览器窗口中运行网站的方法。被放弃了 3 次，目前在 HTML5 支持下腐烂，但相当于 Firefox 3.6
*   [TideSDK](http://www.tidesdk.org/)（以前的 Titanium Desktop）- 2012 年底的最后一个版本，[目前没有活跃的维护者](https://github.com/TideSDK/tidesdk.github.com/issues/6)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-02T18:19:26.257

你有没有找到答案？如果是这样，我很乐意听到它，因为我认为它不存在，我非常想要它。

这是我在搜索相同内容时遇到的情况：

1) Adob​​e Air：支持 Windows 和 Mac。在版本 2.? 之后放弃了对 Linux 的支持。据推测，如果您避免使用 3.0 功能，您仍然可以使用以前分发的 LInux 版本。

2) AppJS.org：NodeJS + Chromium。支持 Windows、Linux 和 Mac（仅限 32 位）。缺乏 64 位支持对我来说是致命的。他们说他们正在努力，但我担心他们只是在等待谷歌为 Chromium 添加 64 位 Mac 支持。不知道什么时候会发生。

3) Titanium Desktop：被 Appcelerator 抛弃到开源的沙漠。现在几乎无法使用，也无法保证未来。

3) XULRunner：听起来很有希望，但我在 Mac 上遇到了一个构建错误，让我感到很冷。我现在要去试试最新版本。

4) Python + Tkinter：虽然这是一个 python 解决方案而不是 HTML5，但这是我现在正在使用的。结合 Py2App 和 Py2Exe，似乎它可能会起作用。

总的来说，我对现在的情况感到非常沮丧。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T18:31:33.930

[Chrome 的应用程序快捷方式](http://support.google.com/chrome/bin/answer.py?hl=en&answer=95710)适用于 Windows 和 Linux。

这将允许您的应用程序在其自己的窗口中运行，并且这样做的好处是大约需要三秒钟；但是，它并不能满足您的所有需求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T08:44:12.950

我决定使用 Ultralight HTML5 渲染器 ( [www.ultralig.ht](http://www.ultralig.ht) )。

这使我能够充分利用“网络堆栈”，同时轻松地向客户端部署轻量级解决方案。

# regex - PowerShell 正则表达式如何处理多行字符串？

> ID：11015812
> 
> 赞同：8
> 
> 时间：2012-06-13T13:23:57.167
> 
> 标签：regex, powershell

好吧，这让我发疯了，因为我的正则表达式正在使用 Rubular，但 PowerShell 没有按我预期的那样工作。

1.  我在网络目录上做了一个 Get-ChildItem，然后将输出定向到一个 txt 文件中。
2.  我从如下所示的文本文件中删除了目录信息：

![在此处输入图像描述](../Images/a6d23ecb63ba6df2939526f93b62e08b.png)

3.  当我使用 PowerShell 尝试编写正则表达式来删除目录信息时，我遇到了一些问题。

当我使用：

```
$var = Get-Contnet "file path"
$var -match "Directory.*" 
```

PowerShell 抓取我正在寻找的文本，但它没有抓取以新行开头的文本，我得到：

```
Directory: \\Drive\Unit\Proposals\Names\Location\crazy folder path\even crazier folder path\unbelievable folder path\ 
```

所以......当我使用：

```
$var -match "Directory.*\n.*" 
```

我什么都得不到...

当我在 Rublar 上尝试这个时，它工作正常，我在这里错过了什么？任何帮助都会很棒，谢谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-13T14:11:06.207

Filburt 的回答很好，看起来正则表达式并不是在这里使用的最佳工具。但是，您遇到了一个可能会在以后再次引起混乱的问题。这里的问题是您填充的变量`Get-Content`不是多行字符串。它是一个字符串数组：

```
$var = Get-Content "file path"
$var.GetType() # Shows 'Object[]' 
```

当您对 运行正则表达式匹配时`$var`，它会分别匹配数组中的每个对象（文件中的每一行）。因为下一行是一个新对象，所以它不能匹配行尾。

这里的一种解决方法是将字符串数组扁平化为单个字符串，如下所示：

```
$var = (Get-Content "file path" | Out-String)
$var.GetType() # Shows 'String' now 
```

In Powershell it can sometimes be tricky to tell when you're dealing with a single String object versus an array of Strings. If you output them to the console they appear identical. In those cases, `GetType()` and `Out-String` can be useful tools.

**Edit:** As of Powershell 3.0, the `Filesystem` provider includes a `-Raw` switch for `Get-Content`. That switch instructs `Get-Content` to read the file all at once without splitting it into chunks. It is significantly quicker than using the `Out-String` workaround, because it doesn't waste time pulling pieces apart only to put them back together again.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-13T13:37:54.927

为什么不在将它们传送到您的文件之前选择所需的属性呢？

```
Get-ChildItem | Select-Object Mode, LastWriteTime, Length, Name | Out-File Result.txt 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T15:00:22.253

It's possible that the lines don't end with `\n`. I believe the standard line termination characters in Windows is `\r\n`. Try re-writing your regex to match that.

# objective-c - 尝试转接时旋转中断

> ID：11015818
> 
> 赞同：4
> 
> 时间：2012-06-13T13:24:06.493
> 
> 标签：objective-c, ios, ios5, orientation, segue

我的应用程序中有一个滚动视图，当我滚动到滚动视图的最后一页时，我被绑定到 tableviewcontroller。

但是为了在从滚动视图跳转到表格视图控制器时实现“类似动画的分页”，我扩展了 UIStoryboardSegue 类并实现了如下执行方法：

```
- (void) perform {
    UIViewController *src = (UIViewController *) self.sourceViewController;
    UIViewController *dst = (UIViewController *) self.destinationViewController;

    src.view.transform = CGAffineTransformMakeTranslation(0, 0);
    dst.view.transform = CGAffineTransformMakeTranslation(320, 0);

    [UIView animateWithDuration:0.3
                     animations:^{
                         [src presentModalViewController:dst animated:NO];
                         src.view.transform = CGAffineTransformMakeTranslation(320, 0);
                         dst.view.transform = CGAffineTransformMakeTranslation(0, 0);
                     }
     ];
} 
```

当用户处于 UIInterfaceOrientationPortrait 方向时，它就像一个魅力。但是当我切换到 UIInterfaceOrientationLandscapeLeft 或 right 时，我无法让它工作。

我在这里基本上想做的**是执行segue，所以看起来tableviewcontroller从左侧进入主屏幕（而不是从顶部或底部，因为它是默认行为）**，就像上面的代码适用于正常方向一样。我想象的解决方案是这样的：

```
- (void) perform {
    UIViewController *src = (UIViewController *) self.sourceViewController;
    UIViewController *dst = (UIViewController *) self.destinationViewController;

    if ([[UIDevice currentDevice]orientation] == UIInterfaceOrientationLandscapeLeft || [[UIDevice currentDevice]orientation] == UIInterfaceOrientationLandscapeRight){

    }else{
    src.view.transform = CGAffineTransformMakeTranslation(0, 0);
    dst.view.transform = CGAffineTransformMakeTranslation(320, 0);
    }
    [UIView animateWithDuration:0.3
                     animations:^{
                         [src presentModalViewController:dst animated:NO];
                         if ([[UIDevice currentDevice]orientation] == UIInterfaceOrientationLandscapeLeft || [[UIDevice currentDevice]orientation] == UIInterfaceOrientationLandscapeRight){
                         }else{
                         src.view.transform = CGAffineTransformMakeTranslation(320, 0);
                         dst.view.transform = CGAffineTransformMakeTranslation(0, 0);
                         }
                     }
     ];
} 
```

但我更难的是，任何帮助都会得到帮助。

**问题更新：**

我现在试过了：

```
- (void) perform {
    UIViewController *src = (UIViewController *) self.sourceViewController;
    UIViewController *dst = (UIViewController *) self.destinationViewController;

    [UIView transitionWithView:src.navigationController.view duration:0.3
                       options:UIViewAnimationTransitionFlipFromRight
                    animations:^{
                        [src.navigationController pushViewController:dst animated:YES];
                     }
     completion:NULL];
} 
```

我收到以下错误：

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'Pushing a navigation controller is not supported' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T15:40:19.130

1.  与其硬编码宽度 320，不如始终在运行时确定，例如 src.view.frame.size.width。

2.  我很惊讶你对肖像演示没问题，因为在我的设备上，旧视图会闪烁。

3.  似乎你的新尝试是一个非常不同的外观（翻转而不是推动）。你要什么效果？

如果要翻转，可以执行以下操作：

```
[UIView animateWithDuration:0.5
                 animations:^{
                     [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
                     [sourceViewController.navigationController.view addSubview:destinationViewController.view];
                     [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromRight forView:sourceViewController.navigationController.view cache:NO];
                 }
                 completion:^(BOOL finished){
                     [destinationViewController.view removeFromSuperview];
                     [sourceViewController presentViewController:destinationViewController animated:NO completion:nil];
                 }]; 
```

如果您想要更多的推动力，我通常只是更改框架/中心，例如，您可以执行以下操作：

```
float width = sourceViewController.navigationController.view.frame.size.width;

CGPoint right = destinationViewController.view.center;
right.x += width;
destinationViewController.view.center = right;

[sourceViewController.navigationController.view addSubview:destinationViewController.view];

[UIView animateWithDuration:0.5
                 animations:^{
                     CGPoint left = sourceViewController.navigationController.view.center;
                     left.x -= width;
                     sourceViewController.navigationController.view.center = left;
                 }
                 completion:^(BOOL finished){
                     [destinationViewController.view removeFromSuperview];
                     [sourceViewController presentViewController:destinationViewController animated:NO completion:nil];
                 }
 ]; 
```

# iphone - iPhone：为不同的聚会应用程序启动活动监视器

> ID：11015822
> 
> 赞同：0
> 
> 时间：2012-06-13T13:24:14.180
> 
> 标签：iphone, ios, xcode, memory-management

我无法在另一方应用程序上启动活动监视器。当我选择目标时，它显示“目标无法运行：远程异常遭遇”（见截图：）![错误](../Images/043e79637947e6f5f70f3733d5f26fc8.png)。

有谁知道如何测量它？这样做的全部意义在于我遇到了一些内存警告，我想了解在第 4 代以上 iPhone 上的应用程序可以分配的平均内存是多少，而不会遇到警告。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T13:38:18.567

您无法配置 3rd 方应用程序。至于可以分配的平均内存：Apple没有指定任何硬数据。就个人而言，我尽量保持在 15 - 20 MB 以下。但是，杀死您的应用程序所需的内存可能因设备、iOS 版本以及当前使用内存的其他应用程序的数量而异。

此外，类似的问题也曾在这里提出过，例如[this](https://stackoverflow.com/questions/4169935/how-much-memory-does-ios-allow-apps-to-use)或[this](https://stackoverflow.com/questions/2299750/how-much-memory-can-an-iphone-app-use)。

# javascript - 添加到代码中的 Jquery 选项卡使自动滚动（垂直）滚动过锚点

> ID：11015824
> 
> 赞同：0
> 
> 时间：2012-06-13T13:24:21.173
> 
> 标签：javascript, jquery, anchor, jquery-tabs

我已经使用 css-tricks 代码设置了一个自动滚动页面以实现平滑滚动： [http ://css-tricks.com/snippets/jquery/smooth-scrolling/](http://css-tricks.com/snippets/jquery/smooth-scrolling/)

它一直都很好用，我刚刚在一些内容中添加了 jquery 选项卡，现在它可以滚动到选项卡下方的主要锚点。

代码在这里：http: [//jsfiddle.net/qR5bm/](http://jsfiddle.net/qR5bm/)

为什么会发生这种情况，我能做些什么来解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T22:49:22.493

我相信问题在于，在您应用滚动后，您隐藏了一堆项目。由于某种原因，它似乎干扰了计算。

如果您将平滑滚动代码移动到选项卡功能下方，它将正常工作：

演示：http: [//jsfiddle.net/lucuma/qR5bm/1/](http://jsfiddle.net/lucuma/qR5bm/1/)

# java - java.io.IOException：无法使用 DatagramSockets 分配请求的地址

> ID：11015829
> 
> 赞同：0
> 
> 时间：2012-06-13T13:24:39.327
> 
> 标签：java, sockets, client, ioexception

我有一个 Java 电子表格应用程序，它提供的功能之一（我开发的）是工作表共享。基本上，任何人都可以是客户端或服务器，因为该应用程序同时具有服务器和客户端代码。作为服务器的用户创建共享，指定 IP，然后创建共享并激活（最佳情况），服务器在其 IP 和选定端口上侦听客户端。

对于自动发现，我通过 UDP 广播使用 DatagramSockets，而“真正的通信”是基于 TCP 的（在客户端已经连接之后）。

我已经有这段代码可以将活动共享列表从服务器发送到客户端（它发送一个`List`of `InetSocketAddress`）。

服务器：

```
public class BroadcastList implements Runnable {
        private final int BROADCAST_PORT = 8888;

        public BroadcastList() {
        }

        @Override
        public void run() {
            try {
                ActiveShareList asl = new ActiveShareList();
                List<InetSocketAddress> shareList = asl.getActiveShareList();
                DatagramSocket broadcast = new DatagramSocket(BROADCAST_PORT);
                ByteArrayOutputStream out = new ByteArrayOutputStream();
                ObjectOutputStream outputStream = new ObjectOutputStream(out);
                outputStream.writeObject(shareList);
                outputStream.close();

                byte[] listData = out.toByteArray();
                byte[] message = new byte[10];

                DatagramPacket listPacket = new DatagramPacket(listData, listData.length);
                DatagramPacket messagePacket = new DatagramPacket(message, message.length);

                broadcast.receive(messagePacket);
                broadcast.send(listPacket);

            } catch (IOException ex) {
                ex.printStackTrace();
            }
        }
    } 
```

客户端：

```
public void getShareList() {
        DatagramSocket socket;
        try {
            InetSocketAddress address = new InetSocketAddress("255.255.255.255", 8888);
            socket = new DatagramSocket();

            byte[] buffer = new byte[10];
            List<InetSocketAddress> shareList = new ArrayList<InetSocketAddress>();
            byte[] listData = new byte[65535];
            DatagramPacket messagePacket = new DatagramPacket(buffer, buffer.length, address.getAddress(), address.getPort());
            DatagramPacket listPacket = new DatagramPacket(listData, listData.length);

            socket.send(messagePacket);
            socket.receive(listPacket);
            ObjectInputStream inputStream = new ObjectInputStream(new ByteArrayInputStream(listData));

            try {
                shareList = (List<InetSocketAddress>) inputStream.readObject();
            } catch (ClassNotFoundException ex) {
                Logger.getLogger(JoinShareAction.class.getName()).log(Level.SEVERE, null, ex);
            }

} 
```

问题出在客户身上，它`java.io.IOException: Can't assign requested address`在这一行给我一个错误：`socket.send(messagePacket);`。

有谁知道是什么问题？

# mysql - 播放框架 2.0 JPA Mysql 错误：无法构建 EntityManagerFactory

> ID：11015831
> 
> 赞同：2
> 
> 时间：2012-06-13T13:24:50.827
> 
> 标签：mysql, hibernate, jpa, playframework

我正在尝试使用 Play framework2.0 构建一个 Java 项目。我尝试在剧中这样配置JPA：

**conf/application.conf**

```
# Database configuration
# ~~~~~ 
# You can declare as many datasources as you want.
# By convention, the default datasource is named `default`
#

db.default.driver=com.mysql.jdbc.Driver

db.default.url="jdbc:mysql://localhost/tt"

db.default.user=***

db.default.password=******

#
# You can expose this datasource via JNDI if needed (Useful for JPA)
# db.default.jndiName=DefaultDS
db.default.jndiName=DefaultDS

jpa.default=defaultPersistenceUnit 
```

**conf/META-INF/persistence.xml**

```
<persistence xmlns="http://java.sun.com/xml/ns/persistence xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xsi:schemaLocation="http://java.sun.com/xml/ns/ persistence
    http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
    version="2.0"> <persistence-unit name="defaultPersistenceUnit"
     transaction-type="RESOURCE_LOCAL">
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
    <non-jta-data-source>DefaultDS</non-jta-data-source>  <properties> 
    <property name="hibernate.dialect" value="org.hibernate.dialect.MySQLDialect"/> 
    <property name="hibernate.hbm2ddl.auto" value="update"/> 
    </properties>
     </persistence-unit>  
     </persistence> 
```

**项目/Build.scala**

```
import sbt._ 
import Keys._
import PlayProject._
 object ApplicationBuild extends Build {
    val appName         = "appjava"
    val appVersion      = "1.0"
    val appDependencies = Seq(
     // Add your project dependencies here,
     "mysql" % "mysql-connector-java" % "5.1.19",
     "org.hibernate" % "hibernate-entitymanager" % "4.1.2.Final"
     )
    val main = PlayProject(appName, appVersion, appDependencies, mainLang = JAVA).settings(
     // Add your own project settings here      
     )
    } 
```

**应用程序/模型/user.java**

```
package models;
import javax.persistence.*;
import play.data.validation.Constraints.Required;
import play.db.jpa.JPA;
@Entity
 public class user {
        @Id
        public Long id;
        @Required
        public String name;
        public static user findById(Long id) {
           return JPA.em().find(user.class, id);
        }
 } 
```

**应用程序/控制器/application.java**

```
package controllers;
import models.*;
import play.*;
import play.db.jpa.Transactional;
import play.mvc.*;
import views.html.*;
 public class Application extends Controller {
     @Transactional
     public static Result index() {
           user u = user.findById((long)1);
          return ok(index.render(u.name));
     }

    } 
```

然后，在工作目录中键入“play”，然后在控制台中键入“run”，堆栈中的错误如下：

```
[info] play - datasource [jdbc:mysql://localhost:3306/tt] bound to JNDI as Defau
ltDS
[info] play - database [default] connected at jdbc:mysql://localhost:3306/tt
[error] application -

! @6akap0ohi - Internal server error, for request [GET /] ->

play.api.UnexpectedException: Unexpected exception [PersistenceException: [Persi
stenceUnit: defaultPersistenceUnit] Unable to build EntityManagerFactory]
        at play.core.ReloadableApplication$$anonfun$get$1$$anonfun$apply$3$$anon
fun$1.apply(ApplicationProvider.scala:134) ~[play_2.9.1.jar:2.0]
        at play.core.ReloadableApplication$$anonfun$get$1$$anonfun$apply$3$$anon
fun$1.apply(ApplicationProvider.scala:112) ~[play_2.9.1.jar:2.0]
        at scala.Option.map(Option.scala:133) ~[scala-library.jar:0.11.2]
        at play.core.ReloadableApplication$$anonfun$get$1$$anonfun$apply$3.apply
(ApplicationProvider.scala:112) ~[play_2.9.1.jar:2.0]
        at play.core.ReloadableApplication$$anonfun$get$1$$anonfun$apply$3.apply
(ApplicationProvider.scala:110) ~[play_2.9.1.jar:2.0]
        at scala.Either$RightProjection.flatMap(Either.scala:277) ~[scala-librar
y.jar:0.11.2]
Caused by: javax.persistence.PersistenceException: [PersistenceUnit: defaultPers
istenceUnit] Unable to build EntityManagerFactory
        at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Con
figuration.java:915) ~[hibernate-entitymanager-4.1.2.Final.jar:4.1.2.Final]
        at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Con
figuration.java:890) ~[hibernate-entitymanager-4.1.2.Final.jar:4.1.2.Final]
        at org.hibernate.ejb.HibernatePersistence.createEntityManagerFactory(Hib
ernatePersistence.java:57) ~[hibernate-entitymanager-4.1.2.Final.jar:4.1.2.Final
]
        at javax.persistence.Persistence.createEntityManagerFactory(Persistence.
java:63) ~[hibernate-jpa-2.0-api.jar:1.0.1.Final]
        at javax.persistence.Persistence.createEntityManagerFactory(Persistence.
java:47) ~[hibernate-jpa-2.0-api.jar:1.0.1.Final]
        at play.db.jpa.JPAPlugin.onStart(JPAPlugin.java:35) ~[play_2.9.1.jar:2.0
]
Caused by: org.hibernate.HibernateException: Dialect class not found: org.hibern
ate.dialect.MYSQL5Dialect
        at org.hibernate.service.jdbc.dialect.internal.DialectFactoryImpl.constr
uctDialect(DialectFactoryImpl.java:76) ~[hibernate-core-4.1.2.Final.jar:4.1.2.Fi
nal]
        at org.hibernate.service.jdbc.dialect.internal.DialectFactoryImpl.buildD
ialect(DialectFactoryImpl.java:64) ~[hibernate-core-4.1.2.Final.jar:4.1.2.Final]

        at org.hibernate.engine.jdbc.internal.JdbcServicesImpl.configure(JdbcSer
vicesImpl.java:146) ~[hibernate-core-4.1.2.Final.jar:4.1.2.Final]
        at org.hibernate.service.internal.StandardServiceRegistryImpl.configureS
ervice(StandardServiceRegistryImpl.java:75) ~[hibernate-core-4.1.2.Final.jar:4.1
.2.Final]
        at org.hibernate.service.internal.AbstractServiceRegistryImpl.initialize
Service(AbstractServiceRegistryImpl.java:159) ~[hibernate-core-4.1.2.Final.jar:4
.1.2.Final]
        at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService
(AbstractServiceRegistryImpl.java:131) ~[hibernate-core-4.1.2.Final.jar:4.1.2.Fi
nal]
Caused by: org.hibernate.service.classloading.spi.ClassLoadingException: Unable
to load class [org.hibernate.dialect.MYSQL5Dialect]
        at org.hibernate.service.classloading.internal.ClassLoaderServiceImpl.cl
assForName(ClassLoaderServiceImpl.java:141) ~[hibernate-core-4.1.2.Final.jar:4.1
.2.Final]
        at org.hibernate.service.jdbc.dialect.internal.DialectFactoryImpl.constr
uctDialect(DialectFactoryImpl.java:73) ~[hibernate-core-4.1.2.Final.jar:4.1.2.Fi
nal]
        at org.hibernate.service.jdbc.dialect.internal.DialectFactoryImpl.buildD
ialect(DialectFactoryImpl.java:64) ~[hibernate-core-4.1.2.Final.jar:4.1.2.Final]

        at org.hibernate.engine.jdbc.internal.JdbcServicesImpl.configure(JdbcSer
vicesImpl.java:146) ~[hibernate-core-4.1.2.Final.jar:4.1.2.Final]
        at org.hibernate.service.internal.StandardServiceRegistryImpl.configureS
ervice(StandardServiceRegistryImpl.java:75) ~[hibernate-core-4.1.2.Final.jar:4.1
.2.Final]
        at org.hibernate.service.internal.AbstractServiceRegistryImpl.initialize
Service(AbstractServiceRegistryImpl.java:159) ~[hibernate-core-4.1.2.Final.jar:4
.1.2.Final]
Caused by: java.lang.ClassNotFoundException: Could not load requested class : or
g.hibernate.dialect.MYSQL5Dialect
        at org.hibernate.service.classloading.internal.ClassLoaderServiceImpl$1.
findClass(ClassLoaderServiceImpl.java:99) ~[hibernate-core-4.1.2.Final.jar:4.1.2
.Final]
        at java.lang.ClassLoader.loadClass(ClassLoader.java:307) ~[na:1.6.0_23]
        at java.lang.ClassLoader.loadClass(ClassLoader.java:248) ~[na:1.6.0_23]
        at org.hibernate.service.classloading.internal.ClassLoaderServiceImpl.cl
assForName(ClassLoaderServiceImpl.java:138) ~[hibernate-core-4.1.2.Final.jar:4.1
.2.Final]
        at org.hibernate.service.jdbc.dialect.internal.DialectFactoryImpl.constr
uctDialect(DialectFactoryImpl.java:73) ~[hibernate-core-4.1.2.Final.jar:4.1.2.Fi
nal]
        at org.hibernate.service.jdbc.dialect.internal.DialectFactoryImpl.buildD
ialect(DialectFactoryImpl.java:64) ~[hibernate-core-4.1.2.Final.jar:4.1.2.Final] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-03-12T14:33:08.340

尝试在 META-INF\persistence.xml 中修改字符串 :`<jta-data-source>DefaultDS</jta-data-source>` 成`<non-jta-data-source>DefaultDS</non-jta-data-source>`

# regex - Perl 不会更新到下一场比赛

> ID：11015832
> 
> 赞同：0
> 
> 时间：2012-06-13T13:24:51.987
> 
> 标签：regex, perl

不知道这是怎么发生的，但似乎我的 perl 正则表达式匹配在进行匹配后不会更新到下一个匹配项。它没有在每次匹配时更新 $& 和 $1 变量，而是卡在第一个匹配项中。

我到处寻找，发现这非常令人沮丧。

请参阅下面调试器的输出，如您所见，第一个匹配有意义，但第二个没有。

谢谢

```
 DB<79>  $riz =~ m{url=(.*?)Support};

  DB<80> p$&;
url="http://www.svartapelsin.se" draggingName="Bunny Camp Support
  DB<81> $riz =~ m{href=(.*artist?)};

  DB<82> p $&;
url="http://www.svartapelsin.se" draggingName="Bunny Camp Support
  DB<83> 
```

* * *

更新：这是另一个示例，显示文本“艺术家”在字符串中，但仍未找到。$riz 的值是一个巨大的 HTML 代码，所以很难发布。

```
DB<103> $riz =~ m{url=(.*?)Support};

  DB<104> p $&;
url="http://www.svartapelsin.se" draggingName="Bunny Camp Support
  DB<105> $riz =~ m{artist};

  DB<106> p $&;
url="http://www.svartapelsin.se" draggingName="Bunny Camp Support
  DB<107> p  string.index($riz,"artist");
string105
  DB<108> 
```

* * *

我的 $riz 是此链接中的所有 HTML [http://itunes.apple.com/us/app/id385972277](http://itunes.apple.com/us/app/id385972277)

当您使用用户代理 iTunes/10.2 (Macintosh; U; PPC Mac OS X 10.2)

* * *

这是另一个具有相同 $riz 的示例

```
 DB<128>  $riz =~ m/.*/;

  DB<129> p $&;
url="http://www.svartapelsin.se" draggingName="Bunny Camp Support
  DB<130>
...
    DB<136> p substr $riz,0,20;
    <?xml version="1.0"
      DB<137> 
```

我的意思是，这不是很荒谬吗？它应该刚刚输出了 $riz no 的值吗？如您所见，与所显示的形式不同。另外，m/.*/ 怎么可能不是有效的正则表达式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T13:34:49.877

`$&`只要匹配成功，就会更新。如果匹配不成功，`$&`则不更新并保留其先前的值。请参阅 中的`$MATCH`变量`perlvar`。（`perldoc perlvar`并搜索`$MATCH`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T13:35:34.360

这可以。`$&`包含最后一个*成功*的正则表达式匹配的字符串。我假设 的内容`$riz`不包含`/href=(.*artist?)/`. 您应该检查正则表达式匹配的返回值。

你知道那`/artist?/`将只匹配`artist`或`artis`吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T17:29:46.230

[`perldebug`](http://perldoc.perl.org/perldebug.html)说这个

> 调试器无法识别的任何命令都将作为当前包中的 Perl 代码直接执行（eval'd）。
> 
> 请注意，上述 eval 受隐式范围的约束。因此，任何新引入的词法变量或任何修改过的捕获缓冲区内容都会在 eval 之后丢失。调试器是学习 Perl 的一个很好的环境，但是如果您使用应该在同一范围内的材料进行交互式实验，请将其填充在一行中。

因此`$&`，`$1`等变量在调试器命令执行期间被本地化，并且在命令完成时丢失。

你可以使用

```
$riz =~ m{url=(.*?)Support}; print $&, "\n"; print $1, "\n"; 
```

或者

```
$riz =~ m{url=(.*?)Support}; ($and, $one) = ($&, $1);
p $and
p $one 
```

但是没有东西可以在同一命令行中保留这些值，一旦正则表达式比较完成，它们就会永远丢失。

# android - 获取特定类型的所有文件的列表

> ID：11015833
> 
> 赞同：9
> 
> 时间：2012-06-13T13:24:55.380
> 
> 标签：android, file, types

有没有办法从 sdcard 中获取特定类型的所有文件的列表？对于图像，我们有 Media.Images。同样，API10以下我们有这样的框架吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-13T13:30:00.620

这是我的音频文件 FileFilter（您可以更改您的场景的扩展名列表）。

```
package com.designfuture.music.util;

import java.io.File;
import java.io.FileFilter;
import java.io.FilenameFilter;
import java.util.ArrayList;

import com.designfuture.framework.util.LogHelper;

public class AudioFileFilter implements FileFilter {

    protected static final String TAG = "AudioFileFilter";
    /**
     * allows Directories
     */
    private final boolean allowDirectories;

    public AudioFileFilter( boolean allowDirectories) {
        this.allowDirectories = allowDirectories;
    }

    public AudioFileFilter() {
        this(true);
    }

    @Override
    public boolean accept(File f) {
        if ( f.isHidden() || !f.canRead() ) {
            return false;
        }

        if ( f.isDirectory() ) {
            return checkDirectory( f );
        }
        return checkFileExtension( f );
    }

    private boolean checkFileExtension( File f ) {
        String ext = getFileExtension(f);
        if ( ext == null) return false;
        try {
            if ( SupportedFileFormat.valueOf(ext.toUpperCase()) != null ) {
                return true;
            }
        } catch(IllegalArgumentException e) {
            //Not known enum value
            return false;    
        }
        return false; 
    }

    private boolean checkDirectory( File dir ) {
        if ( !allowDirectories ) {
            return false;
        } else {
            final ArrayList<File> subDirs = new ArrayList<File>();
            int songNumb = dir.listFiles( new FileFilter() {

                @Override
                public boolean accept(File file) {
                    if ( file.isFile() ) {
                        if ( file.getName().equals( ".nomedia" ) )
                            return false;

                        return checkFileExtension( file );
                    } else if ( file.isDirectory() ){
                        subDirs.add( file );
                        return false;
                    } else
                        return false;
                }
            } ).length;

            if ( songNumb > 0 ) {
                LogHelper.i(TAG, "checkDirectory: dir " + dir.toString() + " return true con songNumb -> " + songNumb );
                return true;
            }

            for( File subDir: subDirs ) {
                if ( checkDirectory( subDir ) ) {
                    LogHelper.i(TAG, "checkDirectory [for]: subDir " + subDir.toString() + " return true" );
                    return true;
                }
            }
            return false;
        }       
    }

    private boolean checkFileExtension( String fileName ) {
        String ext = getFileExtension(fileName);
        if ( ext == null) return false;
        try {
            if ( SupportedFileFormat.valueOf(ext.toUpperCase()) != null ) {
                return true;
            }
        } catch(IllegalArgumentException e) {
            //Not known enum value
            return false;    
        }
        return false; 
    }

    public String getFileExtension( File f ) {
        return getFileExtension( f.getName() );
    }

    public String getFileExtension( String fileName ) {
        int i = fileName.lastIndexOf('.');
        if (i > 0) {
            return fileName.substring(i+1);
        } else 
            return null;
    }

    /**
     * Files formats currently supported by Library
     */
    public enum SupportedFileFormat
    {
        _3GP("3gp"),
        MP4("mp4"),
        M4A("m4a"),
        AAC("aac"),
        TS("ts"),
        FLAC("flac"),
        MP3("mp3"),
        MID("mid"),
        XMF("xmf"),
        MXMF("mxmf"),
        RTTTL("rtttl"),
        RTX("rtx"),
        OTA("ota"),
        IMY("imy"),
        OGG("ogg"),
        MKV("mkv"),
        WAV("wav");

        private String filesuffix;

        SupportedFileFormat( String filesuffix ) {
            this.filesuffix = filesuffix;
        }

        public String getFilesuffix() {
            return filesuffix;
        }
    }

} 
```

您必须使用 FileFilter 以这种方式从目录中获取过滤的文件和目录列表：

```
File[] files = dir.listFiles(new AudioFileFilter()); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-13T13:28:01.073

试试下面的代码。

```
File dir = new File("path to directory");

String[] names = dir.list(
    new FilenameFilter()
    {
        public boolean accept(File dir, String name)
        {
            return name.endsWith(".your file type");
            // Example
            // return name.endsWith(".mp3");
        }
    }); 
```

**请注意，返回的字符串只是文件名，它们不包含完整路径。**

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-13T13:29:52.763

获取 SD 卡的路径并将所有文件输入到数组中`File`：

```
 File[] file = Environment.getExternalStorageDirectory().listFiles();  

    for (File f : file)
    {
       if (f.isFile() && f.getpath().endswith(".something")) { ... do stuff }
    } 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-10-23T11:26:07.650

我只是找到了一种更简单的方法来完成这项工作。

如果您要选择图像或视频等常见文件，请使用库。

对于任何其他类型，您可以尝试 apache 的通用 ios 库。

第一的，

```
dependencies {
    implementation 'commons-io:commons-io:2.5'
} 
```

然后，

```
val iterator = FileUtils.iterateFiles(
    Environment.getExternalStorageDirectory(),
    FileFilterUtils.suffixFileFilter("pdf"),
    TrueFileFilter.INSTANCE)
while (iterator.hasNext()) {
    val fileINeed = iterator.next()
    // do your job
} 
```

我以挑选 PDF 为例。它将自动处理子字典。所以迭代器包含我设备的所有PDF文件。

它的 API 非常灵活、强大且易于使用。您可以添加许多过滤器或规则来完成您的特定工作 XD

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-08-20T18:37:33.510

我知道为时已晚，但以防万一。我会用 kotlin 的方式来做

```
 val accepted_extention = listOf("mp3", "3gp", "mp4")
 val ROOT_DIR = Environment.getExternalStorageDirectory().absolutePath
 val ANDROID_DIR = File("$ROOT_DIR/Android")
 val DATA_DIR = File("$ROOT_DIR/data")
 File(ROOT_DIR).walk()
               // befor entering this dir check if
               .onEnter{ !it.isHidden // it is not hidden
                         && it != ANDROID_DIR // it is not Android directory
                         && it != DATA_DIR // it is not data directory
                && !File(it, ".nomedia").exists() //there is no .nomedia file inside
               }.filter { accepted_extention.indexOf(it.extension) > -1}// it is of accepted type
               .toList() 
```

# ruby-on-rails - 更长的捆绑更新安装时间

> ID：11015836
> 
> 赞同：2
> 
> 时间：2012-06-13T13:25:03.477
> 
> 标签：ruby-on-rails, ruby, gem, bundle

好吧，我从 RoR 休息了学习，现在我回来了，我注意到安装 gems、捆绑更新/安装需要更长的时间。在我可以在几分钟内完成新 gem 的安装之前，现在需要几个小时，我必须强制重启，因为我看不到任何进展（即使使用 -V）。已经尝试重新安装。不用找了。我可以在 cmd 中成功 ping 站点，所以它似乎不是防火墙问题。这是每个人都开始遇到的问题吗？

除了下载 gems 并在本地安装/捆绑更新之外，还有其他方法可以加快速度吗？提前感谢您的所有帮助。

尝试了以下所有建议，但到目前为止没有:) 感谢您的意见和建议。我想补充的另一件事是，我尝试在单独的计算机上安装 Ruby 和 Rails，并且它在那里完美运行。非常感谢任何和所有输入。

英国

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T13:46:15.273

如果花费的时间超过一分钟左右，则存在某种应该清理的问题。

首先按照这里的选项：

[https://github.com/carlhuda/bundler/blob/1-0-stable/ISSUES.md](https://github.com/carlhuda/bundler/blob/1-0-stable/ISSUES.md)

要为您总结这些步骤，请按照以下步骤操作：

```
# remove user-specific gems and git repos
rm -rf ~/.bundle/ ~/.gem/

# remove system-wide git repos and git checkouts
rm -rf $GEM_HOME/bundler/ $GEM_HOME/cache/bundler/

# remove project-specific settings and git repos
rm -rf .bundle/

# remove project-specific cached .gem files
rm -rf vendor/cache/

# remove the saved resolve of the Gemfile
rm -rf Gemfile.lock

# try to install one more time
bundle install 
```

这将清除您安装中的大多数问题，并为您提供一个干净的工作起点。祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T14:08:00.350

在大多数情况下，当您在使用 bundler 时遇到“耗时过长”的问题时，您应该指定您的 gem 版本。只是说`gem 'rspec'`在某些情况下是行不通的，因为依赖关系树将无法快速解决，然后捆绑程序会在它提出依赖关系树并能够获得您的宝石之前尝试所有可能性。有一个关于 bundler 1.1 问题的官方说明，但我现在找不到。

# validation - express-form 可以验证需要的“文件”输入类型吗？

> ID：11015838
> 
> 赞同：1
> 
> 时间：2012-06-13T13:25:13.553
> 
> 标签：validation, node.js, express

我正在使用`express-form` [https://github.com/dandean/express-form](https://github.com/dandean/express-form)

它是否有能力验证类型的输入`file`？我特别希望`require`有人上传文件。

编辑莱纳斯 :)

我试过了： `field("pdf").required("pdf", "You must select a file to upload.")`

问题是 this 正在寻找`req.body.pdf`not `req.files.pdf`，所以它总是认为验证失败。

**编辑/工作代码：根据 Linus 的回答，我做了什么让它工作。**

我不仅需要配置`dataSources`参数，还需要检查字段的`size`属性，因为仅在`required`字段上执行 a 还不够好，因为即使文件输入为空，它仍然存在（元数据等）。所以相反，我做了一个自定义验证函数，确保`pdf.size`大于 0。在我的代码中，我还检查我是否有一个`title`. 我把它留在这里，以防有人想知道如何将多个验证串在一起。

```
var form = require('express-form')
  .configure({dataSources: ['body', 'files', 'query', 'params']});

form(
  field("pdf.size").custom(function(value) {
    if (value <= "0") {
      throw new Error("You must select a file to upload.");
    }
  })
 , field("title").trim().required("title", "Please enter a title for your PDF.")) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T10:08:29.153

从[自述文件](https://github.com/dandean/express-form)：

> Express Form 具有各种配置选项，但旨在为典型的 Express 应用程序提供合理的默认值。
> 
> ...
> 
> dataSources (Array)：一组 Express 请求属性，在过滤和验证数据时用作数据源。默认值：`["body", "query", "params"]`.

所以沿着这些路线的东西应该可以解决问题：

```
var form = require('express-form')
           .configure({dataSources: ['body', 'files', 'query', 'params']}); 
```

# nhibernate - NHibernate 如何实现可选的 log4net 日志记录

> ID：11015840
> 
> 赞同：4
> 
> 时间：2012-06-13T13:25:23.197
> 
> 标签：nhibernate, log4net

我记得 log4net 与 NH 一起出现并且对于 OR-Mapper 是强制性的那些日子（真的是不久前）。现在它不再是强制性的，而是可选的。

我真的很想知道 NHibernate 是如何实现这一点的。如果有人能用几句话解释，那将不胜感激！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-13T13:37:56.287

NHibernate 有一个 ILoggerFactory 来创建如下定义的记录器：

```
public interface ILoggerFactory
    {
        IInternalLogger LoggerFor(string keyName);
        IInternalLogger LoggerFor(System.Type type);
    } 
```

该`IInternalLogger`接口，尽管名称根本不是内部的，但却是实际的记录器接口，毫不奇怪，它准确地映射`ILog`了`log4net`. NH 在需要记录时在内部询问记录器工厂。如果没有配置其他记录器，并且存在 log4net 程序集，则工厂返回 log4net 的包装器。如果您想提供自己的，您只需要提供一个记录器工厂并将其配置为：

```
 <appSettings>
        <add key="nhibernate-logger" 
                  value="MyLoggingLoggerFactory, MyLoggingAssembly"/>
    </appSettings> 
```

如您所料，MyLoggingLoggerFactory 类必须实现`ILoggerFactory`。返回的记录器当然必须实现`IInternalLogger`，如前所述，即使不愉快的名称可能会产生误导，它也是公开的。这是他们用来`log4net`独立的策略。另外，如果您根本不需要日志，只需从部署目录中删除 log4net 程序集：NH 将正常降级并在内部使用空记录器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T13:41:56.563

NHibernate 不再引用 log4net.dll。它确实有自己的记录器抽象层，但是，它们确实有一个为 log4net 设计的自己的记录器抽象的内置实现。

他们通过强制 CLR 使用反射加载 log4net 程序集来实现这一点，当然，当您将 NHibernate 配置为使用 log4net 时。如果您对更多内容感兴趣，请参阅使用您最喜欢的反射器的 NHibernate.Log4NetLogger 和 NHibernate.Log4NetLoggerFactory。

# extjs - ExtJS 4 - 如何使用 Ext.ux.PreviewPlugin

> ID：11015846
> 
> 赞同：1
> 
> 时间：2012-06-13T13:25:35.880
> 
> 标签：extjs, extjs4

从现在开始我只使用插件进行编辑，我使用它的方式是首先添加：

```
this.editing = Ext.create('Ext.grid.plugin.CellEditing'); 
```

在我的`initComponent: function`然后应用这个：

```
plugins: [this.editing], 
```

我准备好了。但是obv。这种方法行不通，`Ext.ux.PreviewPlugin`所以我用谷歌搜索了一下，找到了一些例子：

```
//  requires: 'Ext.ux.PreviewPlugin',

//    disableSelection: true,

    viewConfig: {
        id: 'id',
        trackOver: false,
        stripeRows: false,
        plugins: [{
            ptype: 'preview',
            bodyField: 'excerpt',
            expanded: true,
            pluginId: 'preview'
        }]
    },

    // pluggable renders
    renderTopic: function(value, p, record) {
        return Ext.String.format(
            '<strong><a href="http://sencha.com/forum/showthread.php?t={2}" target="_blank">{0}</a></strong><a href="http://sencha.com/forum/forumdisplay.php?f={3}" target="_blank">{1} Forum</a>',
            value,
            record.data.forumtitle,
            record.getId(),
            record.data.forumid
        );
    }, 
```

但它也不起作用，至少对我来说，我收到以下错误：

```
"NetworkError: 404 Not Found - http://myLocalSite/index.php/ux/PreviewPlugin.js?_dc=1339593100494" 
```

我不太确定是什么导致了这个错误，我也直接使用了这个例子，所以我预计会因此而出现一些错误，但我想我错过了使用这些插件的一般方法，所以我认为我需要关于如何配置这个插件的一些更一般的观点，也许然后能够根据我的确切需求进行调整。

因此，无论哪种方式，都需要帮助才能使该插件正常工作。

谢谢

勒隆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T13:50:15.820

这取决于您的 ExtJs 版本，但如果您使用的是 4.0.7 - 预览插件默认情况下不在`src\`目录中，而是在`\examples\ux`.

我建议将其从那里复制到`\src\ux`并确保包含所有依赖项（例如特殊的 css 类或来自 的其他内容`\examples\ux`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-09T03:35:48.457

为了更清楚地使用 Ext.ux.PreviewPlugin 的实现，请查看 ExtJS 包文件夹中的官方示例：examples/feed-viewer/feed-viewer.html。或在线 [ [http://docs.sencha.com/extjs/4.2.1/extjs-build/examples/feed-viewer/feed-viewer.html][1]](http://docs.sencha.com/extjs/4.2.1/extjs-build/examples/feed-viewer/feed-viewer.html%5d%5b1%5d)

当您查看源代码时，您可以在第 36 行左右看到：

```
Ext.Loader.setPath('Ext.ux', '../ux'); 
```

第一个参数'Ext.ux'我来宾它是应用程序路径的定义，你必须稍后通过Ext.require（）函数放在所需的模块中，我确信'../ux'是'ux'的相对路径包含一些官方插件的目录。你可以从 'example' 目录中获取它，ExtJS 包位于：examples/ux。您必须将这些目录复制到相对于您的源代码的某个位置，我建议将其复制到您的源代码目录中。

然后在 Ext.require 中包含插件，如下所示（参见第 48 行的 feed-viewer.html 代码）：

```
Ext.require([
'Ext.ux.PreviewPlugin'
]); 
```

# javascript - 调用 OnClick() 两次会导致 OnClick 不起作用

> ID：11015849
> 
> 赞同：0
> 
> 时间：2012-06-13T13:25:42.820
> 
> 标签：javascript, jquery, html

我有一个单元格表，当单击一个单元格时会触发一个事件。我想动态添加单元格，因此我将在所有行上再次调用 OnClick。当我第二次调用 OnClick 时，任何两次调用 OnClick 的单元格都会停止触发任何事件。

奇怪的是我的 OnClick 函数，如果我可以“返回”；它可以工作，但是它会抛出一个错误，说“Return”没有定义

```
function initBox() {
    $(".selectable").on('click', function (event) {

        //if its selected already, unselect it
        if ($(this).hasClass('rowHighlightColor')) {
            $(this).removeClass("rowHighlightColor");
            selectedCellList = null;
        }
        else {
            //unselect previous cell
            if (selectedCellList != null) {
                selectedCellList.removeClass("highlighted");
            }
            selectedCellList = $(this);

            $(this).addClass("rowHighlightColor");
        }
        Return;
    });
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-13T13:26:56.983

它需要`return`代替`Return`（大写R）

但是，写`return;`返回`undefined`，所以你可以省略它。

编辑：

您将事件附加两次，确保只附加一次，否则它会导致（如您所见）不良行为，例如附加类并立即再次删除它。

它与“Return”一起使用的原因是该函数只运行一次，因为它在到达它时会引发错误。

使用 jQuerys `.live()`（或`.on()`更新版本，因为 live 已被弃用）自动将点击事件附加到您添加的每个新行。[jQuery 实时文档](http://api.jquery.com/live/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T13:28:30.370

您正在向现有单元格添加多个事件处理程序。这就是为什么我更喜欢只使用普通的旧`.onclick`属性的原因之一。

无论如何，要解决此问题，您可以仅将事件应用于新单元格，或者在添加事件时向它们添加属性，然后在再次添加事件之前检查该属性。

# ios - 自定义 UIToolbar 按钮不起作用

> ID：11015850
> 
> 赞同：-1
> 
> 时间：2012-06-13T13:25:46.537
> 
> 标签：ios, uibarbuttonitem, uitoolbar

![在此处输入图像描述](../Images/8a8a848e9c3eedf0b130a28e4299b934.png)

我的 xib 文件中有一个条形按钮项。

。H：

```
 @property (nonatomic, retain) IBOutlet UIBarButtonItem *toolbarButton; 
```

米：

```
 UIButton *aboutToolbarButton = [UIButton buttonWithType:UIButtonTypeCustom];
    [aboutToolbarButton setTitleColor:[UIColor blackColor] forState:UIControlStateNormal]; 
    [aboutToolbarButton setTitle:@"about" forState:UIControlStateNormal];
    aboutToolbarButton.titleLabel.font = [UIFont fontWithName:@"Helvetica" size:12.0f];
    [aboutToolbarButton.layer setCornerRadius:4.0f];
    [aboutToolbarButton.layer setMasksToBounds:YES];
    [aboutToolbarButton.layer setBorderWidth:1.0f];
    [aboutToolbarButton.layer setBorderColor: [[UIColor grayColor] CGColor]];
    aboutToolbarButton.frame = CGRectMake(0.0, 100.0, 60.0, 30.0);
    [aboutToolbarButton addTarget:self action:@selector(getToUserSettingsViewController) forControlEvents:UIControlEventTouchUpInside];
    self.toolbarButton = [[UIBarButtonItem alloc] initWithCustomView:aboutToolbarButton]; 
```

我用按钮连接到文件所有者，但它不起作用，请帮助我。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T14:27:36.503

什么是行不通的？

aboutToolbarButton.frame = CGRectMake(0.0, **100.0** , 60.0, 30.0);

y=100？工具栏只有 44 像素高...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T14:37:13.290

这是正在发生的事情：

1.  使用界面生成器，您将 UIBarButtonItem 链接到控制器，告诉控制器该特定 UIBarButtonItem 是 self.toolbarButton。

2.  然后在您的代码中，您告诉您的控制器 self.toolbarButton 现在是您通过代码创建的另一个按钮（但您尚未添加到您的视图中）使用

> ```
> [[UIBarButtonItem alloc] initWithCustomView:aboutToolbarButton]; 
> ```

现在 self.toolbarButton 不再是界面构建器中的按钮。

因此，您在视图中看到的按钮在您看来“不起作用”，因为您没有为该按钮分配任何选择器。

我建议您使用界面构建器将 IBAction 链接到按钮。

说了这么多，看来你还是不明白interface builder是怎么工作的。我建议您阅读更多教程甚至更好，从 Apress 获得这本书：http: [//www.apress.com/9781430236054](http://www.apress.com/9781430236054)

# c - Makefile - 在单独的文件中包含路径

> ID：11015851
> 
> 赞同：2
> 
> 时间：2012-06-13T13:26:03.777
> 
> 标签：c, makefile

我想将头文件的所有路径存储在单独的文件中。我将动态生成带有路径的文件，以避免在路径更改时重新创建 Makefile。那可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T13:36:24.940

是的，您可以生成文件，我们称之为它`paths.inc`，它看起来像，例如：

```
INCLUDEPATH=path1:path2 
```

然后将文件包含在您的主文件中`Makefile`

```
include paths.inc 
```

并使用其中定义的变量：`${INCLUDEPATH}`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T13:40:15.053

## 生成文件

```
paths_mk := paths.mk
-include $(paths_mk)
$(paths_mk) :
    # Rule to generate paths.mk

include_flags = $(include_paths:%=-I%)

CPPFLAGS += $(include_flags)

%.o : %.c
    $(CC) $(CPPFLAGS) $(CFLAGS) -o $@ -c $< 
```

## 路径.mk

```
# Auto-generated file.
include_paths := ... 
```

# c# - RowIndex 问题：无法访问第二页数据

> ID：11015852
> 
> 赞同：0
> 
> 时间：2012-06-13T13:26:06.867
> 
> 标签：c#, .net

我在 C#.Net Gridview 概念中工作。我在网格视图中有 5 行。在 gridview 的第二页中还有另外 5 行。我在所有行中都有一个编辑按钮。在 ROW_COMMAND 事件中，我的代码是

```
 int rowIndex = Convert.ToInt32(e.CommandArgument);
        HiddenField lbl = (HiddenField)gvItem.Rows[rowIndex].FindControl("hidPI");
        string CompChainID = lbl.Value; 
```

当我转到第二页并编辑第二行时，我将 RowIndex 设为 6。我得到了错误。因为该页面只有 5 行。

我该怎么办。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T13:31:13.160

那么`pageIndex*5+rowindex`会做的伎俩。

或者，在您的情况下，只需使用模数函数：

```
var newRowIndex= rowIndex % 5; 
```

rowindex 6 将是：`6 % 5= 1`

# c++ - C++，使用 #if TRUE 条件指令

> ID：11015853
> 
> 赞同：7
> 
> 时间：2012-06-13T13:26:07.860
> 
> 标签：c++, c-preprocessor

当使用类似的语句时`#if TRUE`，我应该期待发生什么？一个解释将不胜感激！我了解它是如何*工作*`#if 1`的，但它在我的代码中给出的结果与使用. 我理解是一个条件指令，这意味着什么；这只是我不明白的（或）部分。似乎以这种方式使用它永远不会执行语句之后的代码。这是一个例子：*`#if TRUE``#if``TRUE``FALSE`*

 *```
#if TRUE
     cout << "true" << endl;
#endif

#if FALSE
     cout << "false" << endl;
#endif 
```

我似乎从来没有看到“真”或“假”打印到屏幕上并使用 Visual Studio，内部语句自动变灰。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-13T13:33:14.073

预处理器将包含/排除`#if #endif`块的内容，具体取决于表达式之后的`#if`计算结果为真还是假。

`#if TRUE`只会在以下情况下评估为真

*   宏`TRUE`被定义
*   `TRUE`!= 0的值

在您的示例中，既没有`TRUE`也没有`FALSE`定义，因此两个块都是错误的并且被排除在外。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-13T13:31:49.120

`TRUE`并且`FALSE`是Windows 中的**宏**，但在`WinDef.h`.

如果包含标题，您将看到`TRUE`is`1`和`FALSE`is `0`。所以，第一条语句应该执行，第二条语句不应该执行。

如果您不包含标头，则两者都将未定义，并且不会执行任何语句。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T13:29:56.373

要查看`true`或`false`打印，您需要定义它们：

```
#define TRUE 1
#define FALSE 1 
```

现在`#if TRUE`和`#if FALSE`将是一样的`#if 1`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-11T19:23:07.377

**TL;DR**：`TRUE`并且`FALSE`默认情况下未定义，并且任何未定义的预处理器标记都替换为`0`.

**完整解释**

[C++17 标准](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2017/n4713.pdf)19.1.7 对 if-group 中的预处理指令进行了*说明*：

> 表单的预处理指令
> 
> *   **# if**常量表达式换行*组选择*
> *   **# elif**常量表达式换行*组选择*
> 
> 检查控制常量表达式的**计算结果是否为非零**。

（重点补充）

标准 19.1.9 规定了预处理器指令中使用的未定义标识符：

> 在执行了由于宏扩展和*定义宏表达式*和*has-include-expressions 的*评估而导致的所有替换之后，除**and****之外的所有剩余标识符和关键字都替换为*pp-number*`true``false` *`0`****，然后转换每个预处理标记成令牌。[*注意*：替代标记（5.5）不是标识符，即使它的拼写完全由字母和下划线组成。因此，它不受此更换的约束。——*尾注*]*

 *（重点补充）

因此，如果`TRUE`或`FALSE`未定义，这些将被替换`0`并且`#if`条件失败。小写变体`true`和`false`是此规则的例外，可以像 C++ 语言的关键字一样使用。要使条件为真，首先定义标识符，例如：

```
#define TRUE 
```

或者，如果您想`TRUE`作为整数值使用，

```
#define TRUE 1 
```

这也可以，但不建议这样做：

```
#define TRUE 5 
```

*   注1：这`#define TRUE 0` *是一个定义，`TRUE`*因此使`#if TRUE`条件为真。
*   注意 2：一些头文件（例如 WinDef.h 显然）包含`TRUE`和的定义`FALSE`。

*迟到答案的理由*：这个问题是从后来的重复问题中引用的，并且将受益于参考标准的完整答案。**

# spring - 实体管理器 + @Transactional

> ID：11015854
> 
> 赞同：4
> 
> 时间：2012-06-13T13:26:11.923
> 
> 标签：spring, transactional

```
@Service
@Repository
@Transactional
public class VideoService  {

    @PersistenceContext
    EntityManager entityManager;

    public void save(Video video) {

        Video video1 = new Video();

        entityManager.persist(video1);

    }

<persistence xmlns="http://java.sun.com/xml/ns/persistence" version="1.0">
    <persistence-unit name="video_pu" transaction-type="RESOURCE_LOCAL" >
        <provider>org.hibernate.ejb.HibernatePersistence</provider>

        <properties>
            <property name="hibernate.hbm2ddl.auto" value="create-drop" />
            <property name="hibernate.dialect" value="org.hibernate.dialect.MySQLDialect" />
        </properties>

    </persistence-unit>
</persistence>

<bean id="dataSource"
        class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName" value="com.mysql.jdbc.Driver" />
        <property name="url" value="jdbc:mysql://localhost/video" />
        <property name="username" value="root" />
        <property name="password" value="root" />
    </bean>     

    <bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
      <property name="persistenceUnitName" value="video_pu"/>
      <property name="dataSource" ref="dataSource" />      
      <property name="jpaVendorAdapter">
        <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
           <property name="showSql" value="true" />
           <property name="generateDdl" value="true" />
           <property name="databasePlatform" value="org.hibernate.dialect.MySQLDialect" />
        </bean>
     </property>

    </bean>

    <bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
       <property name="entityManagerFactory" ref="entityManagerFactory"/>
    </bean>

    <!-- enable the configuration of transactional behavior based on annotations -->
    <tx:annotation-driven transaction-manager="transactionManager"/>

    <!-- post-processors for all standard config annotations -->
    <context:annotation-config/> 
```

服务方法 save(Video video) 中的事务从未启动，因此也从未提交。错误在哪里？当我使用 EntityManagerFactory 时，它工作得很好，但我不想明确地开始和提交事务。我想将它与@Transactional 注释一起使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T14:28:23.437

@beerbajay 是正确的，@Transactional 将需要在您的 bean 上创建一个动态代理来应用事务逻辑，如果您的 Service 具有接口，则可以创建该代理，因为在您的情况下，它不是指示 Spring创建基于类的代理，方法如下：

```
<tx:annotation-driven transaction-manager="transactionManager" proxy-target-class='true/> 
```

# qt - 将 QWidget 插入到特定位置的现有 QBoxLayout？

> ID：11015856
> 
> 赞同：5
> 
> 时间：2012-06-13T13:26:18.687
> 
> 标签：qt, qwidget

这些问题说明了一切。说我有一个布局

```
mylayout
|-- widgetA
`-- widgetB 
```

如何在这棵树中插入一个新的小部件？

```
mylayout
|-- widgetA
|-- widgetC
`-- widgetB 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-13T13:30:08.980

你应该使用.`[QBoxLayout](http://qt-project.org/doc/qt-5.0/qtwidgets/qboxlayout.html)::[**insertWidget**](http://qt-project.org/doc/qt-5.0/qtwidgets/qboxlayout.html#insertWidget)`

索引是从零开始的，
它表示将插入新的小部件的编号。
或者，您可以将其视为插入项的索引将变为什么。

在这种特殊情况下，您有：

```
layout.addWidget(widgetA)
layout.addWidget(widgetB)

layout.insertWidget(1, widgetC) 
```

# ruby - Ruby open-uri open 方法丢失文件扩展名打开图像

> ID：11015858
> 
> 赞同：14
> 
> 时间：2012-06-13T13:26:20.933
> 
> 标签：ruby, paperclip, open-uri

我正在使用 ruby​​ 1.9.2 以及 Rails 3.1.4 和 Paperclip 2.4.5。

我的问题是尝试从 URI 中保存回形针附件会丢失文件扩展名并在没有文件扩展名的情况下保存文件，从而导致需要扩展名的花式框等问题。

一些示例代码：

```
uri = "http://featherfiles.aviary.com/2012-06-13/bbe5f0de1/0c5a672b88ea47ecb4631ac173e27430.png"
open(uri)
#=> #<File:/var/folders/zc/d69gxhzx10x_bvjrkqgyjgxr0000gn/T/open-uri20120613-27204-i6cldv> 
```

因为临时文件回形针上没有扩展名，所以在没有文件的情况下保存文件会导致问题。

有没有人遇到过这个问题？我已经看到了多个关于使用回形针存储来自 URI 的图像的答案，但似乎都没有解决我们正在运行的相同问题

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T16:57:50.363

不要使用临时文件！当从端口读取文件时，它作为占位符存在，应该被视为`OpenURI`. 相反，`open(url).read`通过保存来使用和处理生成的内容。

执行以下操作：

```
require 'uri'
require 'open-uri'

url = 'http://www.iana.org/domains/example/index.html'
filename = File.basename(URI.parse(url).path)
File.open(filename, 'wb') do |fo|
  fo.write(open(url).read)
end 
```

在操作（尤其是网络操作）期间临时假脱机到磁盘是很常见的。一旦文件的内容被积累，那么它就可以被传递给应用程序。`read`正在阻塞，因此您的代码将停在那里，直到文件返回给您。然后你就可以玩它了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-01-26T09:35:06.140

扩展名对于临时文件并不重要，但如果您想在代码中使用此文件或保存到另一个地方。你能行的：

```
temp_file = open(params[:url])
def temp_file.original_filename; File.basename(base_uri.path); end 
```

现在，您可以将这个临时文件保存到永久空间或在代码中使用它；将自动使用原始文件名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T20:12:09.350

您是否在路径/url 选项中包含了 :extension？

例如：

```
has_attached_file :image,
  ...
  :url  => '/images/highlights/:id_partition/:style_:id.:extension',
  :path => ':rails_root/files/images/highlights/:id_partition/:style_:id.:extension' 
```

这可能会解决您的问题。您可以在那里强制扩展，但我认为不建议这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-16T00:58:41.297

我不确定这是否会对您的情况有所帮助，但我注意到我的项目中有类似的问题。

事实证明，这个问题不是由`Paperclip`nor引起的`open-uri`，而是由回形针文件的接收者（在我的情况下`Spree Commerce`）引起的。检查您是否将回形针对象分配给正确的对象，并且它被正确解释。

对我有用的解决方法是改变：

```
@product.images << Spree::Image.create({ 
    :attachment => open(image_url) 
}, :without_protection => true) 
```

至

```
@product.master.images << Spree::Image.create({ 
    :attachment => open(image_url) 
}, :without_protection => true) 
```

祝你的问题好运

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-07T14:13:39.793

> 更新 - 回形针可以自己做到这一点！
> 
> Aditya Sanghi 发表（非常感谢！）：
> 
> ```
> current_comments.pictures.create!(file: URI.parse(image_url)) 
> ```
> 
> 尽管请记住，您仍然需要处理 500、404 等错误（Paperclip 可以引发它们）。

感谢：[https ://mensfeld.pl/2013/12/rails-paperclip-open-uri-downloading-files-from-the-internet-and-saving-them-with-paperclip/](https://mensfeld.pl/2013/12/rails-paperclip-open-uri-downloading-files-from-the-internet-and-saving-them-with-paperclip/)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-09-05T15:48:50.397

是的，这是一个问题，但我们可以使用 fancybox 解决这个问题。

在链接标签（用于图像）中添加`:type => 'image'`

```
- @images.each do |image|
 = link_to image_tag(image.attachment.url),   image.attachment.url, class: "fancybox", type: 'image' 
```

通过指定“类型”，Fancybox 将类型覆盖为图像

[https://groups.google.com/forum/?fromgroups=#!topic/fancybox/QgjquBCLynU](https://groups.google.com/forum/?fromgroups=#!topic/fancybox/QgjquBCLynU)

# python - 使用 Eclipse 部署 Python 脚本

> ID：11015861
> 
> 赞同：0
> 
> 时间：2012-06-13T13:26:29.830
> 
> 标签：python, eclipse, deployment

我在 Eclipse 中编写了一些 Python 脚本，在某些时候我有应该部署的稳定版本。目前这非常简单，意味着将脚本复制到某个目录。（很快我也会考虑 Git）

你能告诉我在 Eclipse 中设置这样一个进程的常见可扩展方式吗？也许更专业的东西，如果需要更复杂的部署，仍然可以使用。

（我在某处见过 Ant，但我不确定这是否超出了我的需要，也许不是 Python 的约定）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T13:29:26.513

我会说使用[Fabric](http://docs.fabfile.org/en/1.4.2/index.html)，并阅读[这篇博文](http://www.clemesha.org/blog/modern-python-hacker-tools-virtualenv-fabric-pip/)以获得对它的合理介绍。

# android - 在 ListView 上垂直居中列表项

> ID：11015863
> 
> 赞同：2
> 
> 时间：2012-06-13T13:26:48.607
> 
> 标签：android, layout

我正在开发一个 Android 应用程序。

在一项活动中，我有一个包含列表项的列表。这些列表项将有一个 TextView（我正在使用我自己的布局，因为我可能需要向它添加更多小部件）。

这是 ListActivity xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ListView
        android:id="@android:id/list"
        android:layout_width="match_parent"
        android:layout_height="469dp"
        android:layout_marginLeft="20dp"
        android:layout_marginRight="20dp"
        android:layout_marginTop="40dp">
    </ListView>

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >
        <TextView
            android:id="@+id/orderErrorMsg"
            android:layout_alignParentRight="true"
            android:layout_alignParentBottom="true"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:padding="10dp"
            android:textSize="16dp" >
        </TextView>
    </RelativeLayout>

</LinearLayout> 
```

这是 ListItem xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="100dp"
    android:orientation="vertical">

    <TextView
        android:id="@+id/orderToFillName"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical"
        android:textSize="20dp" />

</LinearLayout> 
```

最后，结果如下：

![在此处输入图像描述](../Images/7b73e17c1e41299683bebb95a4abc2f0.png)

为什么 TextView 不垂直居中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T13:31:34.503

您在 TextView 的 layout_height 上有“wrap_content” = 因为 TextView 被紧紧包裹，所以没有垂直居中的空间。

尝试将 layout_height 更改为“match_parent”或在 LinearLayout 中放置重力 =“center_vertical”属性。

```
<TextView
        android:id="@+id/orderToFillName"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_gravity="center_vertical"
        android:textSize="20dp" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T13:28:57.787

答案非常简单：您必须将其添加到 TextView 的 XML 中：

```
android:gravity="center" 
```

目前，您没有在 TextView 中设置文本的位置，而只是在 View 的位置。

最好的祝愿，蒂姆

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T13:28:46.163

试试这个方法：

```
<TextView
        android:id="@+id/orderToFillName"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical"
        android:gravity= "center_vertical|center_horizontal"
        android:textSize="20dp" /> 
```

或者

```
android:gravity="center" 
```

# apache-flex - 取消 AdvancedDataGrid 树中叶节点的缩进

> ID：11015867
> 
> 赞同：0
> 
> 时间：2012-06-13T13:27:13.250
> 
> 标签：apache-flex, flex-datagrid

我有一个结构为树的 AdvancedDataGrid。由于非叶节点有一个打开/关闭它们的箭头（我没有图标），它们的标签就在箭头之后开始，并且同一级别的叶节点缩进以与它们对齐。我想取消该缩进，因此叶节点将从列的开头开始。我试图将缩进设置为 0，但它没有任何效果。如果可能的话，有人知道该怎么做吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T10:27:01.477

无需为此使用自定义渲染器。只需将`displayDisclosureIcon`属性设置`AdvancedDatagrid`为false。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T02:19:41.450

我认为您可以覆盖 AdvancedDataGridItemRenderer 或者您可以将其替换为您自己的渲染器。但是，ADG 渲染器会自动处理很多事情，因此请谨慎处理。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-15T17:06:43.037

正如我在评论中所说，我使用了 AdvancedDataGridGroupItemRenderer。我创建了它的一个子类并覆盖了 updateDisplayList，在其中我将公开图标字段的尺寸设置为 0。这就是诀窍。

# javascript - jQuery为每一行的下一列添加附加值

> ID：11015871
> 
> 赞同：0
> 
> 时间：2012-06-13T13:27:17.893
> 
> 标签：javascript, jquery

我正在尝试向我的行添加更多值，但所有列都显示相同的数字。

我正在尝试使用：

```
$this.parent().next().children('.output-value2').val((scorenetto).toFixed(2)); 
```

但它不会工作。这是代码：

[http://jsfiddle.net/QjwdR/15/](http://jsfiddle.net/QjwdR/15/)

附加列“Price2 for Count in €”不能独立工作

只需输入“物有所值”一个数字

```
$(this).parent().siblings().each(function(){
               $('.output-value2').val((scorenetto).toFixed(2));
            }); 
```

它出了点问题，但我不确定它是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T13:38:50.270

尝试

```
 $(this).closest('tr').find('.output-value2').val((scorenetto).toFixed(2)); 
```

jsfiddle：http: [//jsfiddle.net/QjwdR/21/](http://jsfiddle.net/QjwdR/21/)

顺便说一句：尽量避免使用`$(this)`，而是将结果缓存在一个有意义的变量中，例如：

```
$(".input-value").keyup(function() {
            var $singlePrice = $(this);
            var value = parseFloat($singlePrice.val());
            ...
}); 
```

**缓存结果使您的代码更具可读性并减少 DOM 操作的数量。** 请参阅此小提琴以获得灵感：http: [//jsfiddle.net/QjwdR/23/](http://jsfiddle.net/QjwdR/23/)

# macos - Mac OS X ld: 找不到 -lpython3 的库

> ID：11015877
> 
> 赞同：5
> 
> 时间：2012-06-13T13:27:47.833
> 
> 标签：macos, gcc, python-3.2

我正在尝试按照以下步骤编译一些 C 代码以从此处给出的示例导入 Python：http: [//csl.sublevel3.org/C-functions-from-Python/](http://csl.sublevel3.org/C-functions-from-Python/)

我可以使用建议的调用来编译它：

```
gcc -dynamiclib -I/usr/include/python2.3/ -lpython2.3 -o myModule.dylib myModule.c 
```

但是我使用的是 Python 3，我已经糊涂并解决了一堆编译器错误，最终得到以下结果：

```
gcc -dynamiclib -I/Library/Frameworks/Python.framework/Versions/3.2/include/python3.2m/ -lpython3.2m -o myModule.dylib myModule.c 
```

但现在我被卡住了，这给出了以下错误：

```
ld: library not found for -lpython3.2m 
```

根据我有限的知识，我尝试了一些东西。我发现我有两个存在 Python 版本的位置：

/System/Library/Frameworks/Python.framework/Versions

并且：

/Library/Frameworks/Python.framework/Versions

Python 3.2 位于第二位，所以我认为我需要以某种方式告诉 gcc 在哪里搜索以解析 -lpython3.2m？或者 -lpython3.2m 是错误的，我试过 -lpython3.2 但我从 ld 得到相同类型的错误。

其他可能有帮助的事实：

Mac OS 10.6.8

从 Python.org 获得的 DMG 安装的 Python 3.2

如果我可以给你任何其他信息来帮助你帮助我，那么请告诉我

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T14:12:01.330

要告诉`gcc`其他目录搜索库，请使用该`-L`选项，类似于`-I`您已经使用的选项。之类`-L/Library/Frameworks/Python.framework/Versions/3.2/lib`的，我猜。

# google-maps-api-3 - 圆形叠加层上的标题属性

> ID：11015878
> 
> 赞同：6
> 
> 时间：2012-06-13T13:27:48.583
> 
> 标签：google-maps-api-3

我知道`google.maps.Marker`可以`title`在他们的选项中为他们设置一组，可以为他们做同样的事情`google.maps.Circle`吗？

我试过只设置`title`对象`google.maps.CircleOptions`，但这似乎没有任何作用。

有没有办法给圆圈叠加一个标题？我想有，当您将鼠标悬停在一个圆圈上时，光标会更改为，`pointer`因此那里必须有某种检测。我不想制作自己的自定义工具提示并将其附加到圆圈上的悬停事件，我想使用浏览器的内置标题悬停。

圈子： [https ://developers.google.com/maps/documentation/javascript/overlays#Circles](https://developers.google.com/maps/documentation/javascript/overlays#Circles)

CircleOptions 对象：[https ://developers.google.com/maps/documentation/javascript/reference#CircleOptions](https://developers.google.com/maps/documentation/javascript/reference#CircleOptions)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T22:54:32.977

目前无法为圈子添加标题。正如您从[CircleOptions](https://developers.google.com/maps/documentation/javascript/reference#CircleOptions)中看到的那样，它没有将“标题”列为您可以使用的选项。

一种解决方法可能是监听圆圈上的 mousemove 事件，然后将您自己的标题显示为自定义[OverlayView](https://developers.google.com/maps/documentation/javascript/reference#OverlayView)

# php - php nginx 最大上传文件大小 - 不寻常的情况

> ID：11015883
> 
> 赞同：0
> 
> 时间：2012-06-13T13:28:07.910
> 
> 标签：php, file-upload, nginx

我正在浏览谷歌中的页面数量，并且在stackoverflow中几乎所有与此相关的答案，总线仍然无法让这个东西正常工作。

我可以上传小于 2M 的文件，但不能上传更大的文件。

我正在使用`PHP-FPM`（PHP 5.3.10）和`NGINX`（nginx 版本：nginx/1.0.12）运行 Centos 6.2。

现在我进入`client_max_body_size 10M;`了 nginx.conf，在 http 部分。我也得到了`upload_max_filesize = 8M`，，，`post_max_size = 8M``memory_limit = 128M`

通常在我遇到的这个问题的几乎所有答案中，这些更改对用户都有帮助。

现在我做了一些研究，并制作了这个脚本：

```
<?php
//ini_set('upload_max_filesize', '8M');
$max_upload   = (ini_get('upload_max_filesize'));
$max_post     = (ini_get('post_max_size'));
$memory_limit = (int) (ini_get('memory_limit'));

echo ('$max_upload ' . $max_upload);
echo ('$max_post ' . $max_post);
echo ('$memory_limit ' . $memory_limit);
?> 
```

现在如果我在服务器终端中运行 - 我得到`$max_upload 8M $max_post 8M $memory_limit 128` 但是如果我通过网络服务器（NGINX）运行它 - 我得到`$max_upload 2M $max_post 8M $memory_limit 128`

所以我的假设是它的 NGINXes 问题，但是关于这个问题的唯一 NGINX 参数是`client_max_body_size 10M;`，它是正确的，并且放置在配置中的正确位置。

如果这是显而易见的事情，或者我错过了什么，我很抱歉，如果有人能指出我正确的方向，我会很高兴。

干杯！

编辑：

所以我们在 AlexeyKa 的帮助下解决了这个问题。我们查了一下`phpinfo`，那里说 php 正在使用不同的 php.ini 文件。前段时间我将 php.ini 的副本复制到我的主目录中。事实证明，当（前一段时间）我重新启动 php-fpm 时，它从 /etc/php.ini 文件切换到 /home/my-user/php.ini 文件。基本上我重命名了 /home/my-user/php.ini 并重新启动了 php-fpm。这解决了所有问题，因为它切换到 /etc/php.ini。我会进一步尝试这种行为，并会更新帖子，以防万一有人遇到同样的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T13:32:46.350

可能使用不同的php.ini？一个用于 php-cli，另一个用于 php-fpm？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-17T19:43:40.677

在某一方面的变化

/etc/php5/fpm/php-fpm.conf

`/etc/php5/cli/php.ini`为了安全并改变它有的地方

upload_max_filesize = 2M

到您想要的任何文件大小示例

upload_max_filesize = 8M

然后重新加载

```
/etc/init.d/php5-fpm restart
/etc/init.d/nginx reload
/etc/init.d/nginx restart 
```

# c# - 面板上的 DrawToBitmap 为空白

> ID：11015884
> 
> 赞同：2
> 
> 时间：2012-06-13T13:28:10.697
> 
> 标签：c#, winforms, zedgraph

所以我写了一个类，它有一个存储一些测试结果信息，然后是一个向用户显示该信息的控件。我想在这个类上放置一个打印功能，以全页大小绘制控件并打印它。然而，它总是出现空白。代码将面板视为控件，因为它可能是其他类型的值。我想一定有一些简单的东西我错过了。

```
void printDocument_PrintPage(object sender, System.Drawing.Printing.PrintPageEventArgs e)
    {
        System.Drawing.Size oldSize = printData.Size;

        printData.Size = new System.Drawing.Size(e.MarginBounds.Width, e.MarginBounds.Height);
        System.Drawing.Bitmap bitmap = new System.Drawing.Bitmap(printData.Size.Width, printData.Size.Height);

        InvertZOrderOfControls(printData.Controls);
        printData.DrawToBitmap(bitmap, new System.Drawing.Rectangle(0, 0, printData.Size.Width, printData.Size.Height));
        InvertZOrderOfControls(printData.Controls);

        e.Graphics.DrawImage(bitmap, e.MarginBounds.Location);
        bitmap.Save(@"C:\Users\jdudley\Documents\File.bmp");
        printData.Size = oldSize;
    } 
```

按照这个[线程](http://www.daniweb.com/software-development/csharp/threads/298209/printing-panel-in-c-desktop-application)的这个建议，颠倒了控件的 Z 顺序，但它没有改变任何东西。添加了保存调用以进行调试。看起来它实际上是在没有任何控件的情况下渲染面板的背景颜色。

编辑：这是在印刷的背景下，但我从来没有印刷过任何问题。我的错误是创建位图。我添加的保存行证明了这一点，因为它创建了一个空白位图文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T14:28:40.883

将您的整个活动更改为此

```
 void printDocument_PrintPage(object sender, System.Drawing.Printing.PrintPageEventArgs e)
    {
        System.Drawing.Bitmap bitmap = new System.Drawing.Bitmap(printData.Width, printData.Height);
        printData.DrawToBitmap(bitmap, new System.Drawing.Rectangle(new Point(0, 0), printData.Size));
        e.Graphics.DrawImage(bitmap, e.MarginBounds.Location);
    } 
```

**编辑**

这是我的整个项目。我创建了一个名为 printData 的面板并添加了两个按钮，并将一个事件附加到 button1。

```
namespace WindowsFormsApplication1
{
public partial class Form1 : Form
{
    PrintDocument printDocument = new PrintDocument();
    public Form1()
    {
        InitializeComponent();
        pd.PrintPage += new PrintPageEventHandler(pd_PrintPage);
    }

    void printDocument_PrintPage(object sender, System.Drawing.Printing.PrintPageEventArgs e)
    {
        System.Drawing.Bitmap bitmap = new System.Drawing.Bitmap(printData.Width, printData.Height);
        printData.DrawToBitmap(bitmap, new System.Drawing.Rectangle(new Point(0, 0), printData.Size));
        e.Graphics.DrawImage(bitmap, e.MarginBounds.Location);
    }

    private void button1_Click(object sender, EventArgs e)
    {
        pd.Print();
    }
}
} 
```

你必须试试这个，看看它是否有效，否则我今晚将无法入睡！

# mongodb - MongoDB 设置的全文搜索选项

> ID：11015887
> 
> 赞同：26
> 
> 时间：2012-06-13T13:28:12.927
> 
> 标签：mongodb, solr, elasticsearch

我们计划在 MongoDB 中存储数百万个文档，并且非常需要全文搜索。我读过 Elasticsearch 和 Solr 是全文搜索的最佳可用解决方案。

*   Elastic 搜索是否成熟到可以用于 Mongodb 全文搜索？我们还将对集合进行分片。Elasticsearch 是否适用于分片集合？

*   使用 Elasticsearch 或 Solr 的优缺点是什么？

*   MongoDB 是否能够进行全文搜索？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-13T14:50:19.597

MongoDB 中有一些搜索功能，但它不像搜索引擎那样功能丰富。

[http://www.mongodb.org/display/DOCS/Full+Text+Search+in+Mongo](http://www.mongodb.org/display/DOCS/Full+Text+Search+in+Mongo)

我们使用 Mongo 和 Solr 使内容可搜索。我们更喜欢 Solr，因为

*   易于配置和定制
*   它有很大的社区（如果您使用开源工具，这真的很有帮助）

由于我们没有与 ES 合作，所以我不能说太多。您可以在下面的链接中找到一些关于 Solr 与 ES 的讨论。

*   [Solr 与 ES 1](https://stackoverflow.com/questions/10213009/solr-vs-elasticsearch)
*   [Solr 与 ES 2](http://engineering.socialcast.com/2011/05/realtime-search-solr-vs-elasticsearch/)
*   [Solr 与 ES 3](http://www.findbestopensource.com/article-detail/solr-vs-elasticsearch)

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-01-01T23:09:11.037

我在 Solr/MySQL 和 ElasticSearch/MongoDB 方面都有专业经验。

如果你要查询很多搜索引擎，你已经对你的 MongoDB 进行了分片（我的意思是，如果你也想对搜索引擎进行分片）：你应该使用 ElasticSearch，除非你想做的事情不能用 ElasticSearch 完成. 即使你不打算分片，你也应该使用它。

ElasticSearch 是一个基于 Lucene 的新项目，它带来了分片机制，来自习惯于分布式环境和搜索的人（Shay Bannon 制作了 Compass 并为数据网格编辑器 Gigaspaces 工作）。

ElasticSearch 就像 MongoDB 一样容易分片，我认为它更简单，并且默认值适用于大多数情况。

* * *

我不太喜欢 Solr。

*   查询语言根本不是结构化的（但插件和 Lucene 就是这种情况，我认为您也可以将这种非结构化查询语言与 ES 一起使用）
*   我认为没有合适的 Solr 客户端。Solr java 客户端很糟糕，我听到 PHP 的人也在抱怨，而 ElasticSearch Java 客户端非常好，更安全，并且提供异步支持（例如，如果你使用 Netty 很好）。使用 Solr，您将执行大量字符串连接。
*   不太容易扩展
*   不是那么新的项目，我觉得它有技术部门。ElasticSearch 是从 Compass 诞生的，所以我想所有的技术部门都被撤掉了，以采用一种全新的方法。

* * *

关于数据导入，我对 Solr DataImportHandler 和 ElasticSearch 河流（CouchDB 和 MongoDB）都有经验。我可以告诉你的是：

*   Solr 允许做更多的事情，但是以一种非常非结构化的 XML 方式，并且文档并不能帮助您在离开 hello world 并尝试使用一些高级功能时真正发生什么。
*   ElasticSearch 方法更简单也更有限，但对某些技术有开箱即用的支持，而 DataImportHandler 似乎更复杂-SQL 友好
*   在我的 Solr 项目中，我不得不对一些文档使用手动索引，但这主要是因为无法将所需数据非规范化为文档（Solr 项目使用 MySQL）。

Solr 和 ElasticSearch 还有一个新的 MongoDB 连接器，我需要尽快对其进行测试:) [http://blog.mongodb.org/post/29127828146/introducing-mongo-connector](http://blog.mongodb.org/post/29127828146/introducing-mongo-connector)

* * *

所以最后，我肯定会选择 ElasticSearch，因为：

*   它现在有一个很棒的社区
*   我认识的很多人都有使用 Solr 的经验，比如 ElasticSearch
*   客户端更安全且结构化，并提供与 Java Futures 的异步
*   两者都可以使用新的连接器轻松地从 MongoDB 导入数据
*   据我所知，它几乎可以完成 Solr 所做的所有事情（根据我的经验，但我不是搜索引擎专家）
*   它增加了开箱即用的分片
*   它增加了可以帮助构建实时可扩展应用程序的渗透（但您可能需要额外的消息传递技术）
*   与 Solr 相比，我阅读的源代码几乎没有技术部门（至少在客户端），而且创建插件似乎很容易。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-13T14:02:14.823

就 MongoDB 本身而言，不，它不支持全文搜索。您可以看到这是一个流行的功能请求：

[https://jira.mongodb.org/browse/SERVER-380](https://jira.mongodb.org/browse/SERVER-380)

根据我对 MongoDB 的 ES River 插件的了解，它的功能落后于 oplog。由于分片设置将具有多个 oplog，并且无法轻松更改该代码以通过 mongos 连接。

对于 Solr，我看到的示例通常涉及与 ES 插件类似的行为。这里有一些更可靠的信息：

[http://blog.knuthaugen.no/2010/04/cooking-with-mongodb-and-solr.html](http://blog.knuthaugen.no/2010/04/cooking-with-mongodb-and-solr.html)

我没有任何使用经验，但其他人之前进行过比较，请看这里：

[Solr 与 ElasticSearch](https://stackoverflow.com/questions/10213009/solr-vs-elasticsearch)

[ElasticSearch、Sphinx、Lucene、Solr、Xapian。哪个适合哪个用途？](https://stackoverflow.com/questions/2271600/elasticsearch-sphinx-lucene-solr-xapian-which-fits-for-which-usage)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-08-17T15:45:20.357

MongoDB 无法进行高效的全文搜索。您可以对字段进行通配符搜索，但我认为这些不能有效地使用索引。

我建议使用ElasticSearch[的 River 功能](http://www.elasticsearch.org/blog/2010/09/28/the_river.html)将文档从 MongoDB 自动推送到 ElasticSearch。

[elasticsearch-river-mongodb](https://github.com/richardwilly98/elasticsearch-river-mongodb)是 MongoDB 到 Elasticsearch 的一条河流，当 MongoDB 中的文档发生变化时，ElasticSearch 会监控 oplog，然后自动更新其索引。

这最大限度地减少了保持两个数据存储同步的问题，因为 ElasticSearch 只是监控 Mongo 的复制表。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-07T15:06:18.237

Mongo 不适合全文搜索。显然，您需要索引字段以进行快速搜索，并且在 mongo 中索引包含 BIG 数据（长字符串）的字段将失败。它的索引限制为 1k，如果您的内容超过 1k，它将被索引忽略并且不会显示在您的搜索结果中。显然，如果您尝试对您的文章进行全文搜索，那么 mongo 并不是一个好的选择。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-09-28T07:48:17.890

目前，在 MongoDB 2.4.6 中，现在在 MongoDB 中提供了全文搜索，并且功能比以前的版本更丰富。在[http://docs.mongodb.org/manual/core/text-search/](http://docs.mongodb.org/manual/core/text-search/)上描述了新功能的能力。

值得一提：

> *   在索引创建和文本命令执行期间对搜索词进行标记和阻止。为每个文档分配一个分数
> *   包含索引字段中的搜索词。分数确定文档与给定搜索查询的相关性。

但是，在这个答案（从 2013 年 9 月开始）[https://stackoverflow.com/a/18631775/1920149](https://stackoverflow.com/a/18631775/1920149)中，您可以看到，mongo 仍然警告不要在生产中使用此功能。此功能仍处于测试阶段。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-04-30T15:18:00.427

从 2.6 版开始，通过在必填字段上创建文本索引，可以在产品环境中使用 Mongodb 进行全文搜索。 [MongoDB中的索引文本](http://docs.mongodb.org/manual/administration/indexes-text/)

# jquery - 使用 jquery 延迟加载图像

> ID：11015895
> 
> 赞同：1
> 
> 时间：2012-06-13T13:28:35.930
> 
> 标签：jquery

我们的网站有几个页面显示了许多图像。在缓慢的互联网页面加载很长时间才能与图像一起完全加载。我在谷歌搜索有 jquery 解决方案，当用户向下滚动页面时，它将按需下载图像。我发现了一个名为**lazyload**的jQuery库，网址是[http://www.appelsiini.net/projects/lazyload](http://www.appelsiini.net/projects/lazyload)

这个插件很好，但我的页面内容以及从数据库填充的图像。数据库内容是从 html 编辑器插入的。我阅读了**延迟加载**，发现

1)`<img class="lazy" src="img/grey.gif" data-original="img/example.jpg" >`

image src 将有不同的图像，实际的图像路径将被写入 data-original 属性，这对于我的页面是不可能的，因为我说我的页面内容是由 html 编辑器开发的。所以我需要帮助来了解如何自定义库，因此我的图像标签将与普通图像标签一样`<img class="lazy" src="img/example.jpg" >`，但它仍然有效。如果这个库不可能，那么建议我任何其他只下载浏览器视口中的图像的库。我想说我的图像标签将是`<img class="lazy" src="img/example.jpg" >`，但库将只下载浏览器视口中的那些图像。请帮忙。或给我任何示例代码，当用户向下滚动时，将下载少量图像并下载其余图像。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T13:51:19.927

打电话之前

```
$("img.lazy").lazyload(); 
```

为数据库内容的所有图像添加惰性类和数据原始属性。例如，您在 id 为“content”的 div 中有数据库内容。

```
$("#content img").each(function() {
    $(this).addClass('lazy');
    $(this).attr('data-original', $(this).attr('src'));
}); 
```

希望它会有所帮助。

# objective-c - 如何检测 UIScrollView 正在滚动或正在拖动

> ID：11015898
> 
> 赞同：17
> 
> 时间：2012-06-13T13:28:48.777
> 
> 标签：objective-c, ios

当我的 UIScrollView 滚动或拖动时，我需要持续知道。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-13T13:34:35.757

实现这两个委托方法..

```
- (void)scrollViewDidScroll:(UIScrollView *)sender{
  //executes when you scroll the scrollView
}

- (void)scrollViewWillBeginDragging:(UIScrollView *)scrollView {
 // execute when you drag the scrollView
} 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2017-02-13T08:16:46.607

更好地`isTracking`用于检测用户是否启动了触摸拖动。

```
func scrollViewDidScroll(_ scrollView: UIScrollView) {

    if scrollView.isTracking {   
    // ... 
    }
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-11-08T14:07:11.210

*此答案已弃用。请参阅@ober 的**isTracking**解决方案*

```
- (void)scrollViewDidScroll:(UIScrollView *)sender{
    if(sender.isDragging) {
        //is dragging
    }
    else {
        //is just scrolling
    } 
} 
```

# android - ViewFlipper 导致空指针异常

> ID：11015905
> 
> 赞同：2
> 
> 时间：2012-06-13T13:29:10.790
> 
> 标签：android, nullpointerexception

我有一个使用视图翻转器的程序，当调用活动时，我得到`NullPointerException`如下。只要活动正在运行，我希望循环浏览一组图像。

```
06-13 18:52:05.358: E/AndroidRuntime(368): Caused by: java.lang.NullPointerException 
```

**活动：**

```
import android.app.Activity;
import android.os.Bundle;
import android.os.Handler;
import android.view.View;
import android.view.ViewGroup.LayoutParams;
import android.view.animation.AnimationUtils;
import android.widget.ImageView;
import android.widget.ViewFlipper;

public class MainMenuActivity extends Activity{

     Handler handler;
     Runnable runnable;
     ViewFlipper imageSwitcher;
    @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.menupage);

            imageSwitcher= (ViewFlipper) new ViewFlipper(this).findViewById(R.id.sportspersons);
            this.viewchanger();

        }

    public void viewchanger()
    {
        imageSwitcher.setInAnimation(this, R.anim.fadein);  
        imageSwitcher.setOutAnimation(this, R.anim.fadeout); 

        ImageView i = new ImageView(this);
        i.setBackgroundDrawable(getResources().getDrawable(R.drawable.jowens));
        ImageView i2 = new ImageView(this);
        i2.setBackgroundDrawable(getResources ().getDrawable(R.drawable.maradonna));
        ImageView i3 = new ImageView(this);
        i2.setBackgroundDrawable(getResources().getDrawable(R.drawable.mjordan));
        ImageView i4 = new ImageView(this);
        i2.setBackgroundDrawable(getResources().getDrawable(R.drawable.pele));
        imageSwitcher.addView(i);
        imageSwitcher.addView(i2);
        imageSwitcher.addView(i3);
        imageSwitcher.addView(i4);

        runnable = new Runnable() {

            @Override
            public void run() {
                handler.postDelayed(runnable, 3000);
                imageSwitcher.showNext();

            }
        };
        handler.postDelayed(runnable, 500);
    }
} 
```

**XML:**

```
<?xml version="1.0" encoding="utf-8"?>
<AbsoluteLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >
      <ImageView
        android:id="@+id/imageView2"
        android:layout_width="match_parent"
        android:layout_height="508dp"
        android:layout_x="-4dp"
        android:layout_y="-5dp"
        android:scaleType="fitXY"
        android:src="@drawable/mainmenu01" />

        <ViewFlipper 
           android:id="@+id/sportspersons"  
           android:layout_width="86dp"
           android:layout_height="91dp"
           android:layout_x="38dp"
        android:layout_y="373dp" />  
</AbsoluteLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T13:34:39.583

改变

```
imageSwitcher= (ViewFlipper) new ViewFlipper(this).findViewById(R.id.sportspersons); 
```

到

```
imageSwitcher= (ViewFlipper) findViewById(R.id.sportspersons); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T14:45:28.357

你可以这样试试：

> 可运行=新可运行（）{
> 
> ```
>  @Override
>         public void run() {
>             handler.postDelayed(runnable, 3000);
>             imageSwitcher.setAutoStart(true);  
>             imageSwitcher.startFlipping();
>         }
>     }; 
> ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T13:50:28.847

添加到 Waqas 点。

您在以下代码中遇到严重问题。

```
 runnable = new Runnable() {

            @Override
            public void run() {
                handler.postDelayed(runnable, 3000);
                imageSwitcher.showNext();

            }
        };

        handler.postDelayed(runnable, 500); 
```

# c++ - 使用智能指针建模所有权的含义

> ID：11015908
> 
> 赞同：4
> 
> 时间：2012-06-13T13:29:14.277
> 
> 标签：c++

我目前正在手动管理项目中对象的生命周期。我正在考虑切换到智能指针，特别是 tr1::shared_pointer 和 tr1::weak_ptr。但是，我看到了一些问题，并希望获得有关最佳实践的一些意见。

考虑下面的类图：

![多面体类图](../Images/433fc5937ca79a173616de50deaf7683.png)

在此图中，粗箭头表示与所有权语义的关联（源负责删除一个或多个目标）。细箭头表示没有所有权的关联。

据我了解，实现与所有权语义关联的一种方法是使用 tr1::shared_ptr （或其集合）。其他关联可以使用 tr1::shared_ptr 或 tr1::weak_ptr 来实现。如果前者可能导致循环引用，则禁止前者，因为这会妨碍资源的正确释放。

如您所见，Edge 和 Side 类之间存在一圈关联。我可以通过使用 tr1::weak_ptrs 实现从 Edge 到 Side 的“左”和“右”关联来轻松打破这一点。但是，我更喜欢使用智能指针在代码中记录关联的所有权语义。所以我想将 shared_ptrs 仅用于图中粗箭头表示的关联，而将 weak_ptrs 用于其他所有内容。

现在我的第一个问题是：我应该像上面描述的那样自由地使用weak_ptrs，还是应该尽可能少地使用它们（只是为了避免循环引用）？

下一个问题是：假设我有一个计算一组顶点平均值的函数。进一步假设我已经实现了从多面体到它的顶点的关联，如下所示：

```
class Vertex;
class Polyhedron {
protected:
    std::vector<std::tr1::shared_ptr<Vertex> > m_vertices;
}; 
```

并且我已经实现了从 Side 到它的 Vertices 的关联，如下所示：

```
class Vertex;
class Side {
protected:
    std::vector<std::tr1::weak_ptr<Vertex> > m_vertices;
}; 
```

请注意，边的顶点集是多面体顶点集的子集。现在假设我有一个计算一组顶点平均值的函数。该函数当前声明如下：

```
const Vertex centerOfVertices(std::vector<Vertex*> vertices); 
```

现在，如果我如上所述表示关联，如果我正确理解所有内容，我突然需要两个函数：

```
const Vertex centerOfVertices(std::vector<std::tr1::shared_ptr<Vertex> > vertices);
const Vertex centerOfVertices(std::vector<std::tr1::weak_ptr<Vertex> > vertices); 
```

因为我无法在 shared_ptr 的向量和weak_ptr 的向量之间进行转换。这对我来说很有趣。我想知道我应该在这里采取什么方法来避免这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T13:55:15.303

> 但是，我更喜欢使用智能指针在代码中记录关联的所有权语义。

正如你应该的那样。毕竟，这就是他们完美表达的东西。

> 所以我想将 shared_ptrs 仅用于图中粗箭头表示的关联，而将 weak_ptrs 用于其他所有内容。

去吧，有一个警告：你的所有权看起来不像*共享*所有权，它是*简单*的，独特的所有权。因此，这里合适的智能指针不是`shared_ptr`，而是`std::unique_ptr`，弱指针将只是原始指针。

> 现在如果我像上面那样表示关联，我突然需要两个函数……</p>

是的。好吧，或者你使用模板。

或者，由于该函数实际上对共享所有权根本不感兴趣，因此您可以将原始指针传递给它，但这当然意味着首先从您的结构中获取原始指针，这需要客户端添加一个步骤，这可能不会对界面有好处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T16:02:08.533

使用共享指针似乎是明智的，尤其是当您发现顶点等可以在多面体之间共享时。

要将弱指针向量转换为共享指针向量，请使用显式构造函数：

```
centerOfVertices(std::vector<std::tr1::shared_ptr<Vertex> >(vertices.begin(), vertices.end())); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T14:04:15.983

您当然也可以将 shared_ptr 用于循环引用。在一些罕见的情况下，这实际上是有意义的。但是，一旦你完成了对象，你必须小心打破循环。

# android - 如何获得 IPV4 格式的 IP_ADDRESS

> ID：11015912
> 
> 赞同：23
> 
> 时间：2012-06-13T13:29:23.917
> 
> 标签：android, ip-address, android-4.0-ice-cream-sandwich, android-networking

我正在尝试获取设备的 IP 地址，即使用 WIFI 或 3G 连接。我得到了无法理解的 IPV6 格式的 IP 地址。我想要 IPV4 格式的 IP 地址。我已经完成了 google，但找到了任何合适的解决方案。

这是我用来获取设备IP地址的代码

```
public String getLocalIpAddress() {
    try {
        try {
        for (Enumeration<NetworkInterface> en = NetworkInterface
                .getNetworkInterfaces(); en.hasMoreElements();) {
            NetworkInterface intf = en.nextElement();
            for (Enumeration<InetAddress> enumIpAddr = intf.getInetAddresses(); enumIpAddr.hasMoreElements();) 
            {
                InetAddress inetAddress = enumIpAddr.nextElement();
                System.out.println("ip1--:" + inetAddress);
                System.out.println("ip2--:" + inetAddress.getHostAddress());
                if (!inetAddress.isLoopbackAddress()) {

                    String ip = inetAddress.getHostAddress().toString();
                    System.out.println("ip---::" + ip);
                    EditText tv = (EditText) findViewById(R.id.ipadd);
                    tv.setText(ip);
                    return inetAddress.getHostAddress().toString();

                }
            }
        }
    } catch (Exception ex) {
        Log.e("IP Address", ex.toString());
    }
    return null;
} 
```

我得到这个输出：

```
ip1--:/fe80::5054:ff:fe12:3456%eth0%2
ip2--:fe80::5054:ff:fe12:3456%eth0 
```

它应该像这样显示：

```
192.168.1.1 
```

请帮帮我..

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-06-14T04:33:05.460

在尝试了很多技巧之后..终于我可以得到IPV4格式的IP地址..这是我的代码..

```
public String getLocalIpAddress() {
    try {
        for (Enumeration<NetworkInterface> en = NetworkInterface
                .getNetworkInterfaces(); en.hasMoreElements();) {
            NetworkInterface intf = en.nextElement();
            for (Enumeration<InetAddress> enumIpAddr = intf
                    .getInetAddresses(); enumIpAddr.hasMoreElements();) {
                InetAddress inetAddress = enumIpAddr.nextElement();
                System.out.println("ip1--:" + inetAddress);
                System.out.println("ip2--:" + inetAddress.getHostAddress());

      // for getting IPV4 format
      if (!inetAddress.isLoopbackAddress() && InetAddressUtils.isIPv4Address(ipv4 = inetAddress.getHostAddress())) {

                    String ip = inetAddress.getHostAddress().toString();
                    System.out.println("ip---::" + ip);
                    EditText tv = (EditText) findViewById(R.id.ipadd);
                    tv.setText(ip);
                    // return inetAddress.getHostAddress().toString();
                    return ip;
                }
            }
        }
    } catch (Exception ex) {
        Log.e("IP Address", ex.toString());
    }
    return null;
} 
```

添加**if**条件如下图

```
 /**This shows IPV4 format IP address*/
 if (!inetAddress.isLoopbackAddress() && InetAddressUtils.isIPv4Address(ipv4 = inetAddress.getHostAddress())){} 
```

而不是这个

```
 /**This shows IPV6 format IP address*/
 if (!inetAddress.isLoopbackAddress()){} 
```

非常感谢.. 拉胡尔

检查地址是否为版本 4 地址的另一种方法是：

```
if (!inetAddress.isLoopbackAddress() && inetAddress instanceof Inet4Address) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-05T13:12:28.577

您不能假设任何设备都只有一个网络地址。您也不能假设它将具有任何 IPv4 - 它可能只是 IPv6，因此您的应用程序将需要能够处理 IPv4 和 IPv6 地址显示。

通常，Android 手机至少有两个接口可以分配可用的 IP 地址，rmnet0 用于 3G 数据，对于 IPv4，它通常是运营商级 NAT 的，因此不能接受传入的套接字连接，并且还可能具有 IPv6 地址；和 wlan0 用​​于 wifi，它将具有可以与其连接的网络协商的任何 IPv4 和/或 IPv6 地址。

某些版本的 Android 在连接到 wifi 时会故意丢弃（通常更昂贵的）rmnet0 链接 - 以试图减少 3G 数据使用量。当 wifi 连接到需要手动登录的强制门户时，此行为是一个问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-13T13:35:32.227

在 Java API 中似乎有一个单独的类[Inet4Address](http://docs.oracle.com/javase/6/docs/api/java/net/Inet4Address.html)用于 IPv4 地址。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-16T14:01:54.337

以下是检查它是 IPv4 还是 IPv6 的简单方法：

```
InetAddress address = InetAddress.getByName(ip);
if (address instanceof Inet6Address) {
    // It's ipv6
} else if (address instanceof Inet4Address) {
    // It's ipv4
} 
```

# django - 如何在 Django 评论模板中包含我的基本模板和自定义上下文？

> ID：11015913
> 
> 赞同：1
> 
> 时间：2012-06-13T13:29:24.347
> 
> 标签：django, templates, url, comments, django-context

我在我的项目中包含了 Django 评论框架，并添加了自定义模板以包含我的基本模板而不是默认模板。

但是，在我的基本模板中，有一些带有动态参数的 url 模板标签：

```
{% url galleries blog.pk blog.slug %} 
```

变量*blog*包含在我的视图中的上下文中，但不包含在评论框架中，当我尝试添加评论时，这会导致*没有反向匹配错误。*

将变量*博客*始终包含在基本模板中的最佳方法是什么？

更新：

博客应用程序的 url 模式：

```
url(r'^(?P<blog_id>\d+)/(?P<slug>[\-\d\w]+)/galleries/$', 'galleries', name = 'galleries'),
(r'^comments/', include('django.contrib.comments.urls')), 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T13:57:05.320

为自己创建一个[上下文处理器](https://docs.djangoproject.com/en/dev/ref/templates/api/#writing-your-own-context-processors)。这些只是返回 a 的函数，`dict`其项目将在模板中的任何位置可用。通常，您将`context_processor.py`在相关的 Django 应用程序中创建一个文件，然后将其包含在您的`TEMPLATE_CONTEXT_PROCESSORS`设置中。

例如：

项目/myapp/context_processors.py：

```
def blog(request):
    return {
        'blog': get_blog(),
    } 
```

在您的设置中：

```
TEMPLATE_CONTEXT_PROCESSORS = (
    # ... standard django ones here ...
    'project.myapp.context_processors.blog',
) 
```

现在`blog`将在您的所有模板中可用。

编辑：我忘记了这些上下文处理器方法接收`request`作为参数，它可以让你做更强大的东西。

编辑 2：根据显示 URL 模式的更新...您可以创建一个从 kwargs 中提取的中间件`blog_id`并将其添加到请求对象中：

```
class BlogMiddleware(object):
    def process_view(self, request, view_func, view_args, view_kwargs):
         blog_id = view_kwargs.pop('blog_id', None)
         if blog_id:
             request.blog = Blog.objects.get(id=blog_id) 
```

现在您可以使用任一模板访问博客，`{{ request.blog }}`也可以使用上下文处理器。

# javascript - 监控原始字符串声明

> ID：11015915
> 
> 赞同：1
> 
> 时间：2012-06-13T13:29:44.270
> 
> 标签：javascript, string, node.js, primitive

有什么方法可以监控 NodeJS 中的原始字符串声明吗？例如，当我这样做时，`"test";`是否有任何方法可以触发特殊事件`"test"`作为参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T01:33:17.713

我不确定您所说的*“测试”是什么意思；*; 但是，如果您想在为变量分配新值时触发事件，不，没有办法为变量更改触发事件。

如果你想观察一个变量，最好重新设计你的系统来进行调用，而不是分配一个变量。而不是这样做：

```
running_mode = "test"; 
```

要求

```
switch_mode("test"); 
```

并调用您想在此更新上触发的任何事件处理程序。

如果你真的想观察一个全局变量的值，你可以通过在主循环的每一轮检查一次值来做到这一点：

```
function is_mode_changed() {
   if (running_mode=="test") event_handler();
   process.nextTick(is_mode_changed);
} 
```

一旦调用此函数，它将在主循环的每一轮中继续运行一次。如果你想做的是像跟随一个变量不时地做一些特定的任务，比如跟随一个全局计数器并在每次计数器达到 1000 时执行一些清理任务，这是一个很好的方法。如果你想在变量改变后立即做某事，那是不可能的。

我希望我能正确理解你的问题。

**更新**

[我在下面的评论中添加了这一点，因为我误解了它，所以上面的所有内容都与问题无关。]

正如您自己提到的那样，字符串文字就像`"test"`是一个*原始值*，它不是一个对象。因此，它由解释器以我们无法更改的方式处理。

来自 Ecma-262：

> **4.3.2 原始值**
> 
> 第 8 条中定义的类型`Undefined`, `Null`, `Boolean`,`Number`或之一的成员`String`
> 
> **注意：**原始值是直接在语言实现的最低级别表示的数据。

*为防止混淆，**第 8 条**是上面列出的类型标准部分。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T06:33:20.103

Since you specified V8, and not per-spec-ECMAScript, you have more concrete options at your disposal. In the V8 API there is classes/templates or primitives that are separate from those of object wrappers for primitives. In order to be able to hook in a way to know when this actually happens would likely require modifying v8 in a custom manner, but it is doable.

[http://code.google.com/p/v8/source/browse/branches/bleeding_edge/include/v8.h#1017](http://code.google.com/p/v8/source/browse/branches/bleeding_edge/include/v8.h#1017)

Also much of the action takes place in js itself. Perhaps not the very constructor itself, but everything that happens thereafter. String.prototype.toString/valueOf.

[http://code.google.com/p/v8/source/browse/branches/bleeding_edge/src/string.js](http://code.google.com/p/v8/source/browse/branches/bleeding_edge/src/string.js)

# objective-c - 我可以将委托作为参数传递objective-c吗

> ID：11015917
> 
> 赞同：11
> 
> 时间：2012-06-13T13:29:48.793
> 
> 标签：objective-c, ios, nsoperation

我正在使用 NSOperationQueue，我想将新的 NSOperations 添加到 NSOperationQueue。它是一个存在于我拥有的类的单例实例中的队列。如果我可以通过传递委托将所有内容移到静态类中，事情会变得容易得多。

这是我现在的代码 - 这是在`cellForRowAtIndexPath`

```
 NSString *key = [NSString stringWithFormat:@"%@%@",cell.dataItem.ItemID, cell.dataItem.ManufacturerID];

        if (![self.imgOperationInQueue valueForKey:key]) {

            ImageOperation *imgOp = [[ImageOperation alloc] initWithItemID:cell.dataItem.ItemID withManufacturerID:cell.dataItem.ManufacturerID withReurnType:kThumbnail];
            imgOp.identifier = [NSString stringWithFormat:@"%i", cell.tag];
            imgOp.delegate = self;
            [[SharedFunctions sharedInstance] addImageOperationToQueue:imgOp];
            [imgOp release];

            // store these in the dictionary so we don;t queue up requests more than once
            [self.imgOperationInQueue setValue:cell.dataItem.ItemID forKey:key];
        } 
```

如果我可以将委托添加为参数，我可以将所有这些代码放入共享单例类中，并从我的应用程序的任何位置调用它。

我想我可以使用 NSNotification - 或者我可以使用某种块？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-13T13:47:46.023

只需创建在委托中传递的适当 init 方法。

```
- (id)initWithItemID:(NSString *)itemID
  withManufacturerID:(NSString *)manufacturerID
       withReurnType:(NSInteger)type
            delegate:(id<YourDelegate>)theDelegate
{
    self = [super init];
    if (self)
    {
        .... // Other assignments
        self.delegate = theDelegate;
    }

    return self;
} 
```

# mysql - 索引kd树？

> ID：11015922
> 
> 赞同：2
> 
> 时间：2012-06-13T13:29:56.380
> 
> 标签：mysql, kdtree

我需要索引一个 kd 树，并且以后能够匹配它的一部分。
MySQL有能力吗？有没有其他选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T17:24:50.967

你可以试试 PostgreSQL 9.1。它可以支持最近邻搜索索引

[http://excoventures.com/talks/knn.pdf](http://excoventures.com/talks/knn.pdf)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T10:16:08.037

我自己回答：当前数据库无法索引和搜索 kd-tree。

# authentication - 可以在没有用户身份验证的情况下将 Facebook 页面的流作为 JSON 检索吗？

> ID：11015928
> 
> 赞同：1
> 
> 时间：2012-06-13T13:30:20.563
> 
> 标签：authentication, facebook-graph-api, stream, feed, access-token

我正在尝试在外部网站上显示 Facebook 页面墙的内容。

理想情况下，我会将数据作为 JSON 对象检索，但这似乎需要用户身份验证。

如何在没有用户用于身份验证的情况下检索此信息？

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T14:37:44.410

您可以创建一个应用程序并[作为应用程序进行身份验证](https://developers.facebook.com/docs/authentication/applications/)。

如果您使用的是 Facebook SDK 之一，您可以跳过身份验证步骤，只需将您的应用 ID 和密码传递给它。

# javascript - 在javascript中编辑inkscape svg

> ID：11015935
> 
> 赞同：0
> 
> 时间：2012-06-13T13:30:45.853
> 
> 标签：javascript, svg, inkscape

我在inkscape 中创建了一个svg，上面有两个不同颜色的矩形和4 个文本叠加层。我目前能够存储 svg 并在 javascript 中调用它并让它显示在网页上。但是，我们正在尝试使文本动态化，以便使用一个 svg 多次表示存储在数据库中的数据。这意味着每次在javascript中调用svg时，我们都需要更改inkscape svg参数以具有不同的文本显示。

有任何想法吗？我们在访问 inkscape svg 内部时遇到问题。我们知道每个文本项都有自己的 id，但我们无法在 javascript 代码中更改 inkscape svg 的任何参数。

谢谢！

代码：

```
<svg
   xmlns:dc="http://purl.org/dc/elements/1.1/"
   xmlns:cc="http://creativecommons.org/ns#"
   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
   xmlns:svg="http://www.w3.org/2000/svg"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   width="500"
   height="50"
   id="svg5768"
   version="1.1"
   inkscape:version="0.48.2 r9819"
   sodipodi:docname="fusiongene2.svg">
  <defs
     id="defs5770" />
  <sodipodi:namedview
     id="base"
     pagecolor="#ffffff"
     bordercolor="#666666"
     borderopacity="1.0"
     inkscape:pageopacity="0.0"
     inkscape:pageshadow="2"
     inkscape:zoom="2"
     inkscape:cx="148.31325"
     inkscape:cy="50.507627"
     inkscape:document-units="px"
     inkscape:current-layer="layer1"
     showgrid="false"
     inkscape:window-width="1440"
     inkscape:window-height="838"
     inkscape:window-x="-8"
     inkscape:window-y="-8"
     inkscape:window-maximized="1" />
  <metadata
     id="metadata5773">
    <rdf:RDF>
      <cc:Work
         rdf:about="">
        <dc:format>image/svg+xml</dc:format>
        <dc:type
           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
        <dc:title></dc:title>
      </cc:Work>
    </rdf:RDF>
  </metadata>
  <g
     inkscape:label="Layer 1"
     inkscape:groupmode="layer"
     id="layer1"
     transform="translate(0,-1002.3622)">
    <rect
       style="fill:#00ff00;fill-opacity:1;stroke-width:0.1;stroke-miterlimit:4;stroke-dasharray:none"
       id="rect4312"
       width="276.7818"
       height="48.487324"
       x="1.0101526"
       y="1.5126777"
       transform="translate(0,1002.3622)" />
    <rect
       style="fill:#0000ff;fill-opacity:1;fill-rule:nonzero;stroke:#000000;stroke-width:0.1;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none"
       id="rect4314"
       width="235.36554"
       height="48.487324"
       x="263.64981"
       y="1003.8749" />
    <text
       xml:space="preserve"
       style="font-size:40px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;font-family:Sans"
       x="13.5"
       y="1037.8622"
       id="text4316"
       sodipodi:linespacing="125%"><tspan
         sodipodi:role="line"
         id="tspan4318"
         x="13.5"
         y="1037.8622"
         style="font-size:20px">Gene1</tspan></text>
    <text
       xml:space="preserve"
       style="font-size:40px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;font-family:Sans"
       x="169.5"
       y="1037.8622"
       id="text4320"
       sodipodi:linespacing="125%"><tspan
         sodipodi:role="line"
         id="tspan4322"
         x="169.5"
         y="1037.8622"
         style="font-size:20px">Chrom1</tspan></text>
    <rect
       y="1002.8749"
       x="0.010152578"
       height="49.487324"
       width="277.7818"
       id="rect4324"
       style="fill:#00ff00;fill-opacity:1;stroke-width:0.1;stroke-miterlimit:4;stroke-dasharray:none" />
    <rect
       y="1002.8298"
       x="263.64981"
       height="49.532394"
       width="235.90593"
       id="rect4326"
       style="fill:#0000ff;fill-opacity:1;fill-rule:nonzero;stroke:#000000;stroke-width:0.10118789;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" />
    <text
       sodipodi:linespacing="125%"
       id="text4328"
       y="1006.8973"
       x="13.915162"
       style="font-size:38.80659103px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;font-family:Sans"
       xml:space="preserve"
       transform="scale(0.97016475,1.0307528)"><tspan
         style="font-size:19.40329552px"
         y="1006.8973"
         x="13.915162"
         id="tspan4330"
         sodipodi:role="line">Gene1</tspan></text>
    <text
       sodipodi:linespacing="125%"
       id="text4332"
       y="1006.8973"
       x="145.32069"
       style="font-size:38.80659103px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;font-family:Sans"
       xml:space="preserve"
       transform="scale(0.97016475,1.0307528)"><tspan
         style="font-size:19.40329552px"
         y="1006.8973"
         x="145.32069"
         id="tspan4334"
         sodipodi:role="line">Chrom1</tspan></text>
    <text
       sodipodi:linespacing="125%"
       id="text4328-1"
       y="1006.8973"
       x="276.59357"
       style="font-size:38.80659103px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;font-family:Sans"
       xml:space="preserve"
       transform="scale(0.97016475,1.0307528)"><tspan
         style="font-size:19.40329552px"
         y="1006.8973"
         x="276.59357"
         id="tspan4330-7"
         sodipodi:role="line">Gene2</tspan></text>
    <text
       sodipodi:linespacing="125%"
       id="text4332-4"
       y="1006.8973"
       x="407.99911"
       style="font-size:38.80659103px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;font-family:Sans"
       xml:space="preserve"
       transform="scale(0.97016475,1.0307528)"><tspan
         style="font-size:19.40329552px"
         y="1006.8973"
         x="407.99911"
         id="tspan4334-0"
         sodipodi:role="line">Chrom2</tspan></text>
  </g>
</svg> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-07T22:45:45.433

我昨天有同样的问题。对我来说，它与 robertc 的回答相同，只有我做了：

document.getElementById('*元素的 id* ').textContent = '*你的新文本*';

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T23:25:54.970

根据您的 SVG 包含在 HTML 中的方式，您可能可以像其他任何方式一样简单地引用这些`tspan`元素`getElementById`：

```
document.getElementById('tspan4330').firstChild.textContent = '1 Rob was here';
document.getElementById('tspan4334').firstChild.textContent = '2 Rob was here';
document.getElementById('tspan4330-7').firstChild.textContent = '3 Rob was here';
document.getElementById('tspan4334-0').firstChild.textContent = '4 Rob was here'; 
```

[演示](http://jsfiddle.net/robertc/J5ETc/)。

如果您已将其包含在 an 中，`object`则您需要收听该`load`事件并按照`contentDocument` [此答案中](https://stackoverflow.com/a/3379830/8655)的说明进行抓取。

# sharepoint - 在 InfoPath 2010 中使用自定义字段自定义表单到 SharePoint 2010 列表中

> ID：11015938
> 
> 赞同：1
> 
> 时间：2012-06-13T13:31:04.987
> 
> 标签：sharepoint, sharepoint-2010, infopath, custom-fields, infopath2010

在我的 SharePoint 列表中，我有一个自定义字段，它是经过筛选的查找。

问题是我想在 InfoPath 2010 中为该列表自定义表单，但我不能，因为我有一个自定义字段。当我尝试从 SharePoint 编辑列表表单时，我在 InfoPath 中收到以下错误消息：

> “无法使用 InfoPath 自定义 SharePoint 列表表单，因为不受支持的数据类型的字段被标记为必需，或者因为字段已损坏。在 SharePoint 中，请尝试删除列或编辑列属性以删除所需的属性。-项目(FilteredLookupField)"

这是正常的，因为它不受支持，但有没有办法可以在 InfoPath 中自定义该表单？如果没有，请告诉我我该怎么做。

非常感谢。

PS我还不能放任何图片。我没有足够的代表。; )

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T16:53:15.610

不幸的是，InfoPath 不会在这方面为您提供帮助。但是，您可以尝试在 SharePoint Designer 中完成它，因为它还提供了一个可自定义的、基于 XSLT 的表单控件，您可以使用它。

# sql-server - SQL server - 作业调用过程和过程的区别

> ID：11015943
> 
> 赞同：0
> 
> 时间：2012-06-13T13:31:15.710
> 
> 标签：sql-server, sql-server-2008

我正在尝试从远程服务器的视图中创建表（调用过程 UPDATE_PROC），如下所示：

```
SELECT  *
INTO    table
FROM    [remote_server\database].DATABASE.dbo.view 
```

而且效果很好。问题是，当我尝试创建一个新作业时，它正在调用以前工作的存储过程 UPDATE_PROC

```
exec UPDATE_PROC 
```

它不起作用并报告：

```
Executed as user: NT AUTHORITY\SYSTEM. The OLE DB provider "SQLNCLI10" for linked server "remote_server\database" does not contain the table ""DATABASE"."dbo"."view"". The table either does not exist or the current user does not have permissions on that table. [SQLSTATE 42000] (Error 7314).  The step failed 
```

所以它看起来是一样的，但事实并非如此。我做错了什么？

**更新：**

远程服务器是 SQL Server 2005，作业在 SQL Server 2008 上

我以**sa**用户身份登录。过程一直在工作，工作调用存储过程从不

作业不是以 sa 用户身份运行的，但我不知道应该定义哪个用户和在哪里执行作业属性....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T13:34:57.707

在我看来，这是一个安全问题。运行作业的用户无权访问远程服务器上的表。

# azure - 防止交叉链接到 Azure blob 存储上的图像

> ID：11015947
> 
> 赞同：3
> 
> 时间：2012-06-13T13:31:39.613
> 
> 标签：azure, cross-domain, blob, azure-blob-storage

我没有看到任何关于此的记录，所以有人知道是否可以限制可以访问放置在 blob 存储中的资源的域？当您制作容器时，您唯一的选择是公共或私有。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T13:49:04.750

这是正确的。目前没有办法限制基于域或 IP 的访问。管理 Blob 存储安全性的唯一解决方案是使用[共享访问签名](http://blogs.msdn.com/b/eugeniop/archive/2010/04/13/windows-azure-guidance-using-shared-key-signatures-for-images-in-a-expense.aspx)(SAS)。

签名将在服务器端生成，并应附加到 blob 的 URL。可以对签名进行时间限制（例如使签名仅在 5 分钟内有效）。

![在此处输入图像描述](../Images/8045c44ffe422846db9d615054e53cd0.png)

例如，这可以在 Web 应用程序中完成以显示图像或视频。即使有人“窃取”了您的内容，该网址也会在几分钟后失效。与基于IP或域的限制不完全相同，但仍然非常有效。

# c - 如何避免由于调用 exit() 的中止函数导致的无效警告 C6011

> ID：11015949
> 
> 赞同：4
> 
> 时间：2012-06-13T13:31:42.077
> 
> 标签：c

我试图避免 C6011 警告，因为中止函数正在调用 exit()。我怎样才能做到这一点？

这是一个例子：

```
#include <stdlib.h>

void abort_function();
void func( int *p );

int main()
{
    int x;

    func( &x );

    return 0;
}

void func( int *p )
{
    if (NULL == p)
        abort_function();

    *p = 5;
}

void abort_function()
{
    exit(0);
} 
```

因此，这会导致 PREFast 发出以下警告：

```
warning C6011: Dereferencing NULL pointer 'p': Lines: 17, 18, 20 
```

只需替换`abort_function()`为即可`exit(0)`消除此警告。

但我实际上正在使用一个大型代码库，我不想替换所有对`abort_function()`. 因此，我可以通过使函数成为可变参数宏并临时取出函数定义来消除很多这些警告，如下所示：

```
#include <stdlib.h>

#define abort_function( ... ) exit(0);

/*void abort_function();*/
void func( int *p );

int main()
{
    int x;

    func( &x );

    return 0;
}

void func( int *p )
{
    if (NULL == p)
        abort_function();

    *p = 5;
}

#if 0
void abort_function()
{
    exit(0);
}
#endif 
```

这也消除了警告，但是我可以使用任何 PREFast 选项或注释来避免修改代码吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-13T13:49:15.577

在 MSVC 中，定义[`__declspec(noreturn)`](https://docs.microsoft.com/en-us/cpp/cpp/noreturn)for`abort_function`应该这样做。
对于 gcc，`__attribute__ ((noreturn))`同样如此。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-19T20:28:49.060

您收到此警告的原因是编译器没有意识到 abort_function() 永远不会返回。因此它认为存在合法的代码路径，其中 p 为 NULL；abort_function() 被调用并返回，然后你取消引用 p。

您可以通过使用 (noreturn) 声明或修改您的 abort_function() 调用以包含返回来避免它；

```
if (p == NULL)
{
    abort_function();
    return;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T13:59:55.073

在 C 中，您可以使用#pragma 消除这样的警告。小心使用它，因为您需要一些警告。这是消除此警告的#pragma：

```
#pragma warning(disable:6011) 
```

# php - 在 Symfony2 php 模板中使用 jQuery

> ID：11015952
> 
> 赞同：0
> 
> 时间：2012-06-13T13:31:50.790
> 
> 标签：php, jquery, symfony

我正在尝试使用 Symfony2 进行嵌入多种表单的技巧。我已按照[The Book - collection Field Type](http://symfony.com/doc/current/reference/forms/types/collection.html)和[The Cookbook - How to Embed a Collection of Forms](http://symfony.com/doc/current/cookbook/form/form_collections.html)中的说明进行操作，但似乎无法正常工作。

我认为部分问题是我对 javascript 或 JQuery 不是很熟悉，并且这些说明假设完全理解（例如“为了简单起见，我们将使用 jQuery 并假设您将其包含在页面的某个位置。”）。另外，我需要用 php 而不是 twig 编写我的模板，而且我还没有找到使用 php 模板完成的示例。

这是我到目前为止所做的......

我的主要表单类：

```
class StudyType extends AbstractType
{
    public function buildForm(FormBuilder $builder, array $options)
    {
        $builder
            ->add('studyName', null, array('label'=> 'Study Name:'))
            ->add('participants', 'collection', array(
            'type'=> new ParticipantType(), 
            'allow_add'=>true,
            'by_reference'=>false
         ));
}

public function getName()
{
    return 'study';
}

public function getDefaultOptions(array $options) 
{
  return array(
      'data_class' => 'MyBundle\Entity\Study',
  );
} 
```

我的嵌入式表单类：

```
class ParticipantType extends AbstractType
{
    public function buildForm(FormBuilder $builder, array $options)
    {
    $builder
        ->add('participantId','text', array('label'=>'Participant ID'))
        ->add('dOB', 'date', array(
            'label'=>'D.O.B.', 
            'years'=>range(date('Y'), 1932),
            'required'=>false
         ))
        ->add('gender', 'choice', array(
            'label'=>'Gender',
            'choices'=>array('F'=>'F', 'M'=>'M'),
            'required'=>false
        ))
        ->add('dateEnteredStudy', 'date', array(
            'label'=>'Date entered trial', 
            'years'=>range(date('Y'), 1990),
            'required'=>false
        ))
        ->add('dateCompletedStudy', 'date', array(
            'label'=>'Date completed trial', 
            'years'=>range(date('Y'), 1990),
            'required'=>false
        ))
        ;
    }

    public function getName()
    {
        return 'participant';
    }

    public function getDefaultOptions(array $options) 
    {
      return array(
          'data_class' => 'MyBundle\Entity\Participant',
      );
    }
} 
```

我的 base.html.php 模板：

```
<!DOCTYPE html>
    <html>
        <head>
            <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
            <title><?php $view['slots']->output('title', 'My title') ?></title>
    <?php $view['slots']->output('stylesheets') ?>
    <link rel="shortcut icon" href="<?php echo $view['assets']->getUrl('favicon.ico') ?>" />
</head>
<body>
    <?php $view['slots']->start('mainMenu')  ?>
        <!--lots of menu items here -->
    <?php $view['slots']->stop() ?>

    <?php $view['slots']->start('javascripts') ?>
        <script src="<?php echo $view['assets']->getUrl('/js/jquery-1.7.1.js') ?>" type="text/javascript"></script>
    <?php $view['slots']->stop() ?>

    <?php $view['slots']->output('mainMenu') ?>
    <?php $view['slots']->output('body') ?>
    <?php $view['slots']->output('javascripts') ?>
</body> 
```

我的 study.html.php 模板：

```
 <?php $view->extend('MyBundle::base.html.php') ?>

    <?php $view['slots']->start('body') ?>
        <form action="<?php echo $view['router']->generate('study', array('id'=>$entity->getId()))?>" method="post" <?php echo $view['form']->enctype($form) ?>>
    <ul id="multi-participant" data-prototype="<?php echo $view->escape($view['form']->row($form['participants']->get('prototype'))) ?>">
    </ul>

    <?php echo $view['form']->errors($form) ?>
    <h2>Study</h2>
    <?php echo $view['form']->label($form['studyName'])?>
    <?php echo $view['form']->errors($form['studyName'])?>
    <?php echo $view['form']->widget($form['studyName'])?>

    <h3>Participants in this study</h3>
    <ul id="participants">
        <?php foreach($form['participants'] as $participant): ?>
            <li><?php echo $view['form']->row($participant) ?></li>
        <?php endforeach; ?>
    </ul>
    <a href="#" id="add-another-participant">Add participant</a>

  </form> 
  <?php $view['slots']->stop() ?>

   <script type='text/javascript'>
      // keep track of how many participant fields have been rendered
      var participantCount = document.getElementById("participants").length;
      jQuery(document).ready(function() {
          jQuery('#add-another-participant').click(function() {
              var participantList = jQuery('#multi-participant');

              var newParticipant = participantList.attr('data-prototype');
              newParticipant = newParticipant.replace(/\$\$name\$\$/g, participantCount);
              participantCount++;

              var newLi = jQuery('<li>,</li>').html(newParticipant);
              newLi.appendTo(jQuery('#multi-participant'));

              return false;
          });
      });

    </script> 
```

我的页面正确显示所有现有研究参与者的可编辑表格，底部显示“添加参与者”链接。但是，当我单击链接时，什么也没有发生。

我已经尽可能地按照说明进行操作，所以我希望有人能查明错误并让我走上正确的轨道。如果您确实提供了答案，请明确说明，因为我真的不知道我在做什么 re:javascript （我最终会学习它，但需要快速解决这个问题）。

非常感谢

# mysql - MySQL SQL命令从具有三个相同列的一个表查询到另一个表

> ID：11015955
> 
> 赞同：2
> 
> 时间：2012-06-13T13:32:00.597
> 
> 标签：mysql, sql, vb.net

抱歉，但我不知道如何提出这个问题，但我正在开发一个帮助台应用程序，我在一个表中创建了工单。我还有另一个存储用户的表。我的问题是票证表，我列出了创建票证的用户、将解决票证的技术人员以及查看票证的用户。所有三个用户都引用了 users 表。那么我如何查询tickets 表并获取引用同一个表的所有三个用户来存储用户？

表 1：门票

```
1) Ticketnumber
2) EnteredBy             User 100
3) Issue
4) FixedBy               User 102
5) FixedByNotes
6) ResponsilbeUser       User 103 
```

表 2：用户

```
1) UserID
2) UserName 
```

我现在能做的是这样的：

```
Select Ticketnumber, EnteredBy, Issue, UserName FROM Tickets INNER JOIN Users 
       ON Tickets.EnteredBy = Users.UserID 
```

谢谢史蒂夫

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T13:36:11.193

您可以将当前查询扩展为如下所示：

```
Select Ticketnumber, Issue, Reporter.UserName, Developer.UserName, Manager.UserName FROM Tickets 
INNER JOIN Users AS Reporter ON Tickets.EnteredBy = Reporter.UserID 
INNER JOIN Users AS Developer ON Tickets.FixedBy = Developer.UserID 
INNER JOIN Users AS Manager ON Tickets.ResponsibleUser = Manager.UserID 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T13:43:13.463

如果要获取所有名称，则需要联合表的别名：

```
Select Ticketnumber, Issue, Informers.UserName, Fixers.UserName, Supervisors.UserName FROM Tickets 
INNER JOIN Users Informers ON Tickets.EnteredBy = Users.UserID 
INNER JOIN Users Fixers ON Tickets.FixedBy = Users.UserID 
INNER JOIN Users Supervisors ON Ticket.ResponsibleUser = Users.UserID
WHERE... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T14:24:02.290

对不起，因为我无法理解你的话，但如果我正确地假设你的需要..只是为了尝试这可以帮助你..

如果您需要其中任何一个，即所有输入或修复或看到问题的用户，您可以通过..

```
Select t.Ticketnumber, t.EnteredBy, t.Issue, u.UserID ,u.UserName FROM Tickets t
INNER JOIN Users u ON t.EnteredBy = u.UserID or t.FixedBy = u.UserID 
or t.ResponsibleUser = u.UserID; 
```

如果您需要所有已输入、修复并看到问题的用户，您可以通过..

```
Select t.Ticketnumber, t.EnteredBy, t.Issue, u.UserID ,u.UserName FROM Tickets t
INNER JOIN Users u ON t.EnteredBy = u.UserID and t.FixedBy = u.UserID 
and t.ResponsibleUser = u.UserID; 
```

# php - 如何使用 XML 创建包含 CDATA 的 SoapVar？

> ID：11015959
> 
> 赞同：10
> 
> 时间：2012-06-13T13:32:07.380
> 
> 标签：php, soap, soap-client

我必须使用 SoapClient 对象调用 SOAP Web 服务。其中一个参数必须包含 CDATA 部分中包含的一些 XML，如下所示：

```
<ns2:productInformation><![CDATA[<foo><bar>baz</bar></foo>]]></ns2:productInformation> 
```

注意节点命名空间，它是我痛苦的根源......

如果我创建一个字符串`SoapVar`，则对 XML 进行编码...

```
new SoapVar('<![CDATA[<foo><bar>baz</bar></foo>]]>', XSD_STRING, null, null, 'productInformation', self::MY_NAMESPACE)

<ns2:productInformation xsi:type="xsd:string">&lt;![CDATA[&lt;foo&t;&lt;bar&gt;baz&lt;/bar&gt;&lt;/foo&gt;]]&gt;</ns2:productInformation> 
```

所以我不能这样做。我发现的唯一选择是使用`XSD_ANYXML`编码，如下所示：

```
new SoapVar('<ns2:productInformation><![CDATA[<foo><bar>baz</bar></foo>]]></ns2:productInformation>', XSD_ANYXML) 
```

它可以工作，但很糟糕......查看硬编码的命名空间快捷方式（“ns2”）。

那么您是否有创建包含 XML 的 CDATA 部分的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T18:34:12.223

我有同样的要求（设计不当的供应商 Web 服务需要将请求的一部分嵌入为字符串中编码的 XML，如果你给它一个实体编码的字符串而不是 CDATA，它就会爆炸）。

据我所知，您的`SoapVar`解决方法是最好的。对不起。我对自己必须对命名空间引用进行硬编码感到非常不高兴。

# php - PHP - phpass 0.2 的麻烦

> ID：11015960
> 
> 赞同：0
> 
> 时间：2012-06-13T13:32:09.267
> 
> 标签：php, phpass

当我的用户在注册和登录时输入密码时，我正在使用 phpass。当我在我的 Mac 上本地工作时它正在工作。

但是当我在线时散列密码时，就像它以错误的方式散列一样。

我已将本地数据库导入在线数据库。我在本地时生成的密码在我在线时非常有效。

所以.. 当我在线使用 phpass 时，就好像出现了完全错误的情况。

我这样使用它：

```
$hasher = new PasswordHash(8, FALSE);
$password = HashPassword($_POST["password"]); 
```

这会给我类似的东西：

```
_zzD.NrhAaUmhr6G8i5E //when I'm local
$2a$08$mt3//cn0tqMmug/.tjKeC.AbZhYyj470EY9zSivZvNOtwk4A //when I'm online 
```

当我检查密码时，它是这样的：

```
$hasher = CheckPassword($_POST["password"], $row["password"]);
//$_POST is ofc. the submitted
//$row is the password for the user from the db.
//the user is found on the username and then im checking password. 
```

我完全不知道出了什么问题。我希望SO上的某个人也有同样的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T13:42:19.283

> phpass 支持的首选散列方法是基于 Blowfish 的 bcrypt，回退到 BSDI 样式的扩展基于 DES 的散列，最后的手段回退到在 phpass 本身中实现的基于 MD5 的加盐和可变迭代计数密码散列

您的环境可能正在使用不同的散列算法。您应该确保您的开发和生产环境都支持河豚加密。

作为较弱的替代方案，[本文](http://www.openwall.com/articles/PHP-Users-Passwords)提到：

> 所有系统都支持在 phpass 本身中实现的基于 MD5 的加盐和拉伸散列。phpass 为您提供了一种强制使用这些“可移植”哈希的方法——这是 PasswordHash 构造函数的布尔参数。

构造函数的第二个选项`PasswordHash`是`$portable_hashes`它可以强制库生成（较弱的）散列，这些散列可以在机器之间安全移动。尝试使用

```
$hasher = new PasswordHash(8, true); 
```

# c# - C#：Xml.Load(file) 的关闭方法

> ID：11015965
> 
> 赞同：8
> 
> 时间：2012-06-13T13:32:20.057
> 
> 标签：c#, xml, memory, memory-management, xmldocument

我编写了一些使用`XmlDocument`对象加载 XML 文档的代码，以便计算它的节点。这是方法：

```
XmlDocument xml = new XmlDocument();
xml.Load(textBox1.Text);
XmlNodeList nodes = xml.SelectNodes("//File");
foreach (XmlNode node in nodes)
{
    number_of_childs++;
} 
```

我面临的问题是，导入大文件时，它需要 700MB 的 RAM。如果我然后尝试对文件进行一些操作，或者甚至从中读取以在 a 中显示其数据`ListView`，则应用程序需要 2GB 的 RAM。所以，我想知道，是否有一种方法可以关闭`XmlDocument`并释放其内存，释放 RAM。就像它忘记了从内存中删除它的内容一样。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-13T13:38:01.437

不，这个`XmlDocument`类没有实现`IDisposable`，所以没有办法强迫它随意释放它的资源。如果您确实需要立即释放 使用的内存`XmlDocument`，唯一的方法是执行以下操作：

```
nodes = null;
xml = null;
GC.Collect(); 
```

垃圾收集器在单独的线程上工作，因此它可能仍然不会立即发生。要强制垃圾收集同步发生，在继续执行代码之前，您还必须调用`WaitForPendingFinalizers`，如下所示：

```
nodes = null;
xml = null;
GC.Collect();
GC.WaitForPendingFinalizers(); 
```

`XmlDocument`总是一次将整个文档加载到内存中。如果您只是想以流的形式遍历文档中的节点，一次只加载一点，这就是`XmlReader`类的用途。但是，这样会失去很多功能。例如，无法通过 XPath 选择节点，就像您在示例中所做的那样。使用`XmlReader`，您必须编写自己的逻辑来确定您在文档中的位置以及是否与您要查找的内容相匹配。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T13:47:57.747

无需将您的对象设置为 null。GC 应该能够指示 Document 是否没有被自己进一步使用。这将在需要内存时自动发生，但如果您想立即清除它，请调用[GC.Collect()](http://msdn.microsoft.com/en-us/library/xe0c2357.aspx)。请参阅[此线程](http://social.msdn.microsoft.com/forums/en-US/netfxbcl/thread/d0bc4774-3f3d-4946-97f9-f36c9c74d3d6)以进行进一步讨论。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T13:34:57.980

如果您不必操作 XML，只需使用**XMLReader**读取 XML ，这是单向且最快的，内存密集型操作较少。

# python - 矢量化高频数据，计算传播，

> ID：11015974
> 
> 赞同：0
> 
> 时间：2012-06-13T13:32:55.920
> 
> 标签：python, time-series, pandas

我将以下数据保存为 pandas `dataframe`。有了这些数据，我想计算特定秒的买卖价差。但是，正如您所见，要价比出价多很多倍，反之亦然。所以我的目标是执行以下操作：我只想获取这样的数据，即它是一个出价，然后是一个要价，或者是一个要价，然后是相同时间戳的出价，然后计算点差以及有多少点差。

在下面的数据中，它看起来如下所示，我将取第 1 行和第 2 行，并计算为 0 的价差。然后我将取第 3 行和第 4 行的价差为 2。

```
 time quote   price  volume
0   07:00:00     B  3950.5       5
1   07:00:00     B  3950.0       4
2   07:00:00     A  3950.0       7
3   07:00:00     B  3948.0      17
4   07:00:00     A  3950.0      20
5   07:00:00     A  3950.0      31
6   07:00:00     A  3950.0      44
7   07:00:00     A  3950.0      57
8   07:00:00     A  3950.0      67
9   07:00:00     A  3950.0      57
10  07:00:00     A  3950.0      67
11  07:00:00     A  3950.0      80
12  07:00:00     A  3950.0      90
13  07:00:00     A  3950.0      99
14  07:00:01     B  3948.0      15
15  07:00:01     A  3950.0      89
16  07:00:01     A  3949.5       1
17  07:00:02     A  3950.0      89
18  07:00:03     B  3948.0      12
19  07:00:03     A  3949.0       1
20  07:00:03     B  3948.0       9
21  07:00:03     B  3948.5       4
22  07:00:04     A  3949.5       5
23  07:00:04     B  3948.5       2
24  07:00:05     B  3948.5       1 
```

这是我想要的输出：

```
 time spread num_spread
   07:00:00      2          2 
   07:00:01      2          1  
   07:00:03      1          1
   07:00:04      1          1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T20:57:25.330

```
with open('/tmp/ba.data') as dataF:
    oldk, oldsub = None, None
    for key, subi in groupby(map(str.split,dataF), lambda x: (x[1],x[2])):
        if oldk == None:
            oldk, oldsub = key, list(subi)
        else:       
            newsub = list(subi)
            print ' '.join(oldk), '->', ' '.join(key), float(oldsub[-1][3])-float(newsub[0][3])
            oldk, oldsub = None, None 
```

得到这个

```
07:00:00 B -> 07:00:00 A 0.0
07:00:00 B -> 07:00:00 A -2.0
07:00:01 B -> 07:00:01 A -2.0
07:00:02 A -> 07:00:03 B 2.0
07:00:03 A -> 07:00:03 B 1.0
07:00:04 A -> 07:00:04 B 1.0 
```

如果你改变

```
if oldk == None: 
```

至

```
if oldk == None or oldk[0] != key[0]: 
```

你会得到

```
07:00:00 B -> 07:00:00 A 0.0
07:00:00 B -> 07:00:00 A -2.0
07:00:01 B -> 07:00:01 A -2.0
07:00:03 B -> 07:00:03 A -1.0
07:00:04 A -> 07:00:04 B 1.0 
```

# iphone - 如何在 Objective-C 中快速枚举和比较多个 NSArray 的对象？

> ID：11015977
> 
> 赞同：1
> 
> 时间：2012-06-13T13:33:09.063
> 
> 标签：iphone, objective-c, nsstring, nsarray, fast-enumeration

我有**许多**不同`NSArray`的 ' 存储在`.dat`文件中，在`Documents`我的 iPhone 应用程序的文件夹中，如下所示：

```
john.dat
mary.dat
bob.dat  etc... 
```

文件的数量`.dat`是未知的，它会根据与用户操作应用程序相关的许多因素而增加或减少。

这些`NSArray's`存储在`.dat`文件中的内容是什么？它们包含`NSString's`. 重要的是要说`count`每个 NSArray 我的变化，就像这样：

```
john.dat Contains this array of strings:
"Mon, 11 Jun 2012 04:52:06 GMT",
"Tue, 12 Jun 2012 04:51:59 GMT",
"Wed, 13 Jun 2012 04:52:30 GMT",
"Thu, 07 Jun 2012 04:52:00 GMT",

mary.dat Contains this array of strings:
"Mon, 11 Jun 2012 04:52:06 GMT",
"Tue, 12 Jun 2012 04:51:59 GMT",

bob.dat Contains this array of strings:
"Mon, 11 Jun 2012 04:52:06 GMT",
"Tue, 12 Jun 2012 04:51:59 GMT",
"Wed, 13 Jun 2012 04:52:30 GMT",
"Thu, 07 Jun 2012 04:52:00 GMT",
"Fri, 08 Jun 2012 04:51:59 GMT",
"Sun, 10 Jun 2012 04:50:55 GMT" 
```

**ETC..**

我必须定期验证`NSString`这些`NSArray's`是否已被修改，以通知用户某些事件。在从 Internet 进行 XML 解析之后，我已经能够在内存中拥有与先前存储在文件夹中的`NSArray's`相应文件相对应的新文件。`.dat``Documents`

**由于我有很多** `.dat`文件，我的问题是：

**我如何** ***有效地并且一次***比较我在内存中的 新的`NSArray's` `(NSArray *john, *mary, *bob`，**等等****......**用户是否已修改任何（**等... ）？**`john.dat, mary.dat, bob.dat`**`Documents``NSString's``"Mon, 11 Jun 2012 04:52:06 GMT","Tue, 12 Jun 2012 04:51:59 GMT",`**

 ****谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T13:42:34.707

如果您愿意更改 .dat 文件的格式，您可以计算每个数组内容的哈希值并将其存储在文件的开头。当您获得新数据时，您可以计算其哈希值并将其与存储在文件中的哈希值进行比较。

您选择的散列函数将决定计算效率，但 I/O 将被最小化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T14:28:10.303

好吧，如果您满足于将数组存储为 .dat 文件（我猜是使用 NSKeyedArchiver），那么 Martin 的答案可能是最好的，并且是经过验证的真实比较方法

我可能采取的方法是将 NSStrings 存储在`NSDictionary`s 而不是 NSArrays 中。然后你可以在它的值上设置一个观察者，所以当从你比较的 XML 文件中提取一个字符串时，如果需要替换并且观察者将被调用，以便你可以通知用户（`NSNotificationCenter`如果不熟悉，请参阅和 KVO）。

与 .dat 文件相比，将字符串存储在 CoreData 中也可能是有益的（通常是），然后您可以配置 an`NSFetchedResultsController`以关注您的数据并在获取新数据时执行上述操作。****

# php - 使用某些字符时不会发送电子邮件表单

> ID：11015978
> 
> 赞同：1
> 
> 时间：2012-06-13T13:33:11.520
> 
> 标签：php, actionscript-3

我已经做了好几天了，而且我已经拔掉了很多头发，现在我的头上只剩下一根头发了。那头发是我最后的骄傲。但说真的，我找到了几十个答案，但似乎没有一个适用于我的问题*！*

我有一个我制作的网站的电子邮件表格。网站和表单是用 Flash (AS3) 制作的，处理电子邮件的脚本是一个外部 php 文件。电子邮件表单**工作得很好，*除了*当我使用某些字符时：**

*   `%`未显示在电子邮件中，包括其后面的任何文本
*   当存在`&`, `<`or时`>`，表格会显示“*正在发送..* ”，但不会超出该点；我没有收到任何电子邮件。
*   所有（或至少）其他字符，如 !@#$^*_+-=~` 都没有问题。

我已经确定 AS3 和 php 代码都有

*   `"MIME-Version: 1.0; Content-Type: text/html; charset=utf-8"`*`if`*包含在我的 php 文件中的发送检查中；

*   AS3 中的文本字段设置为`htmlText`而不是仅`text`.

* * *

**我的脚本：**

*邮件.php*

```
 if( $yourName == true ) {
        $sender = $fromEmail;
        $yourEmail = "myemail@example.com"; // Here i of course use my own email address
        $ipAddress = $_SERVER['REMOTE_ADDR']; // This gets the user's ip Address

        $emailMsg = "Van: $sender\r\n" . 
                    "Name: $yourName\r" .
                    "Subject: $yourSubject\n\n" .
                    "$yourMsg\n\n\n\n" .
                    "------------------------------\r" .
                    "Sent from IP-address $ipAddress\r" .
                    "X-Mailer: PHP/" . phpversion();
       # these are three (out of many) things I tried to work around the problem #          
        //$emailMsg = str_replace( '&', "&amp;", $emailMsg );
        //$emailMsg = htmlspecialchars($emailMsg, ENT_QUOTES);
        //$emailMsg = mysql_real_escape_string($emailMsg);

        $return = "From: $sender\r\n";

        if( mail($yourEmail, "$yourSubject", $emailMsg, $return, "MIME-Version: 1.0; Content-Type: text/html; charset=utf-8")) { 
            echo "sentStatus=yes";
        }
        else {
            echo "sentStatus=no";
        }
    }
?> 
```

*FormScript.as*

```
package  {
    /*required imports*/

public class FormScript extends Sprite {
    /*here are the variable declarations*/

    public function FormScript() {
        sendbtn.buttonMode = true;
        sendbtn.addEventListener(MouseEvent.CLICK, submit);
        resetbtn.buttonMode = true;
        resetbtn.addEventListener(MouseEvent.CLICK, reset);
        urlRequest.method = URLRequestMethod.POST;

        /*here are are some positionings and addchilds*/

        function init():void {
             //Set all fields to empty
             yourName.htmlText = "";
             fromEmail.htmlText = "";
             yourSubject.htmlText = "";
             yourMsg.htmlText = "";
             valid.text = "";
        }

        function submit(e:MouseEvent):void {                

        //Check to see if any of the fields are empty
            if(yourName.htmlText == "" || fromEmail.htmlText == "" ||
                yourSubject.htmlText == "" ||yourMsg.htmlText == "" ) {
                valid.text = "All fields must be filled in";
            }//Check if you're using a valid email address

            else if(!checkEmail(fromEmail.htmlText)) {
                valid.text = "Please enter a valid e-mail address";
            } 

            else { 
                valid.text = "Sending..";

                var emailData:String = 
                "name=" + yourName.htmlText +
                "&from=" + fromEmail.htmlText +
                "&subject=" + yourSubject.htmlText +
                "&msg=" + yourMsg.htmlText;

                var urlVars:URLVariables = new URLVariables(emailData);
                urlVars.dataFormat = URLLoaderDataFormat.TEXT;
                urlRequest.data = urlVars; varLoad.load( urlRequest );
                varLoad.addEventListener(Event.COMPLETE, thankYou );
            }
        }
        function reset(e:MouseEvent):void {
            init(); //call the initial clear function
        }
        function checkEmail(s:String):Boolean {
            //yourMsg.text = escape("&");

            //This tests for correct email address
            var p:RegExp = /(\w|[_.\-])+@((\w|-)+\.)+\w{2,4}+/;
            var r:Object = p.exec(s);
            if( r == null ) {
                return false;
            }
            return true;
        }

        function thankYou(e:Event):void { 
            var loader:URLLoader = URLLoader(e.target); 
            var sent = new URLVariables(loader.data).sentStatus;
            //valid.text = sent;
            if( sent == "yes" ) {
                valid.text = "Thank you for your e-mail!"; timer = new Timer(500);
                timer.addEventListener(TimerEvent.TIMER, msgSent);
                timer.start();
            }
            else {
                valid.text = "Something went wrong, please try again";
            }
        }

        function msgSent(te:TimerEvent):void {
            if(timer.currentCount >= 10) {
                init();
                timer.removeEventListener(TimerEvent.TIMER, msgSent);
            }
        }
    }
}
} 
```

* * *

关键字：& 特殊字符符号小于小于大于大于 *请不要编辑此问题，因为您无法搜索“&”等，因此其他人会找到此问题。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T13:50:47.020

在 Flash 中，需要对值进行编码，否则查询字符串可能会损坏。

```
var emailData:String = 
            "name=" + encodeURI(yourName.htmlText) +
            "&from=" + encodeURI(fromEmail.htmlText) +
            "&subject=" + encodeURI(yourSubject.htmlText) +
            "&msg=" + encodeURI(yourMsg.htmlText); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T13:53:14.040

这里最明显的罪魁祸首是您创建 emailData 字符串的混乱方式。作为第一步，我建议将其重新格式化为以下内容：

```
var urlVars:URLVariables = new URLVariables();
urlVars.name = yourName.htmlText;
urlVars.from = fromEmail.htmlText;
urlVars.subject = yourSubject.htmlText;
urlVars.msg = yourMsg.htmlText; 
```

我认为这会自动对值进行 URI 编码，但如果没有，请按照 Mark Knol 的建议使用 encodeURI()。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T13:45:51.497

尝试使用

```
$emailMsg = utf8_decode($emailMsg); 
```

我解码从 Flash 获得的所有字符串。

如果这没有帮助，请使用

```
$emailMsg = urldecode($emailMsg); 
```

或两者兼而有之：D

# php - 搜索多个表Mysql

> ID：11015979
> 
> 赞同：1
> 
> 时间：2012-06-13T13:33:11.530
> 
> 标签：php, mysql

我正在使用 php 和 mysql 开发高级搜索功能。

这些表是：

```
blogPost[id, title, description]

water[id, title, description,]

waterSpecie[id, waterId, specieId]

specie[id, name]

user[id, username] 
```

我想要做的是：用户将能够从带有关键字的文本字段中进行搜索，并且结果应该只有一次。例如：

用户搜索鳕鱼，然后我想显示所有标题或描述中有鳕鱼的博文，以及所有有鳕鱼的水域，以及用户是否是鳕鱼。但是，如果假设 blogPost 的标题和描述中有 cod，我不希望它在结果列表中出现两次。

但是，如果只是说 blogPost 表的标题中有 cod，我只想展示它而不是其他任何东西。

我已经设法用这个 sql 查询做到了：我现在想将 blogPost 表添加到该查询中，并使其可以从中进行搜索。因此，如果只有一个表有 cod，我只想显示该表的结果。

```
SELECT DISTINCT W.lat, W.lng, W.municipalityId, W.title, W.description
FROM water AS W, specie AS S, waterSpecie AS WS 
WHERE S.name LIKE '%$term%' AND W.id = WS.waterId AND S.id = WS.specieId
OR    W.title LIKE '%$term%' AND W.id = WS.waterId AND S.id = WS.specieId; 
```

我希望我已经设法解释了我的问题，并希望我能在这个问题上得到一些帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T16:11:02.697

你可以试试这个：

```
 Select distinct tablename,id from
(select 'blogpost', as tablename, id, title as searchfield from blogpost
union
select 'blogpost' as tablename, id, description as searchfield from blogpost
union
select 'water' as tablename, id, description as searchfield from water
union
select 'specie' as tablename, id, name as searchfield from specie
union
select 'user' as tablename, id, username as searchfield from user) searcher
where searcher.searchfield='cod' 
```

我不完全了解 waterSpecie 的情况，所以我把它省略了。

你应该得到类似的结果：

```
tablename   id
blogpost     5
user        12 
```

然后您可以查询数据库以获取 id=5 的 blogpost 的记录，以及 id=12 的 user 的记录。

您将能够在 PHP 中以编程方式执行此操作。而且，如果您添加一个要添加到搜索功能的表，您只需通过在下面的查询中添加一个 UNION 来完成，而不是进行连接并将另一部分添加到 WHERE 子句中。

我不确定这是否会扩展到 Amazon.com 的大小，所以在你变得那么大之前咨询比我更好的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T14:26:06.490

简化 MySQL 查询并在 PHP 代码中组合结果将为您提供最好的服务。在您的情况下，这样做的主要原因是您想要组合不同的结果 - 如果博客条目具有搜索词和/或水域和其他事物（如果它们具有搜索词）。

在伪代码中，我会做这样的事情（当然，在真实代码中使用 DAO）：

```
$foundposts = findblogposts($searchterm);
$foundusers = findusers($searchterm);
$foundwaters = findwaters($searchterm);
// etc

if($foundposts){
    print($foundposts);
}
if($founduers){
    print($foundusers);
}
if($foundwaters){
    print($foundwaters);
}
// etc 
```

这样，您可以处理正确显示博客文章和正确显示用户等可能需要的不同格式要求。

# c# - 使用数据库的桌面应用程序……为什么很难满足客户的期望？

> ID：11015982
> 
> 赞同：0
> 
> 时间：2012-06-13T13:33:21.640
> 
> 标签：c#, wpf, entity-framework-4.3

我正在 WPF 中开发一个桌面应用程序，该应用程序正在处理存储在数据库中的大量数据。该应用程序使用图表和网格呈现该数据。

我选择使用实体框架访问数据（代码优先）。它易于使用，延迟加载是我一直在寻找的东西。搜索 NET，我发现 Entity Framework 似乎被设计用于“工作单元”策略。

让我们从我的客户那里得到两个简单的期望：

1.  我想打印我的数据并了解打印进度。
2.  我想生成 PDF 报告并了解生成进度。

客户看到网格，所以他期待一些对 Excel 关闭的东西。

1.  打印和报告生成应考虑对数据所做的所有修改。
2.  修改在用户保存之前无效。

例如，打开 excel、修改工作表、打印并关闭应用程序放弃更改。

1.  打印了所有工作表，包括未保存的数据
2.  如果我重新打开文件，未保存的数据将不复存在。

假设我在 UI 线程中打开一个 DBContext 来操作数据并累积更改，并且我想在另一个线程中进行导出，因为它很耗时（一个新的 DBContext），我对数据的更改没有被考虑在内，除了如果我保存数据。

所以我该怎么做 ...

*   将数据库中的数据加载到磁盘上的 XML 文件中，然后处理这些文件并在保存时将数据放回数据库中？
*   发挥想象力，把DBContext放到自己的线程中，让loading和lazy loading重定向到DBContext线程？
*   始终将数据保存在数据库中，但是当出现“未保存”标志或类似情况时？

欢迎任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T13:37:33.480

我会让 ViewModel 公开一个可观察的集合，该集合被异步加载，以免阻塞 UI 线程。然后，我将公开一个提供您正在寻找的保存功能的命令。这样，您可以访问您修改的对象（ObservableCollection）进行打印，如果用户没有点击保存命令，则将其丢弃。

# php - Magento拦截优惠券代码逻辑？

> ID：11015985
> 
> 赞同：0
> 
> 时间：2012-06-13T13:33:43.550
> 
> 标签：php, magento

非常努力地理解 Magento 的代码。

如果购物车中的商品已经打折，我需要一种拦截优惠券代码的方法，以防止它们工作。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T13:53:06.160

这可以通过使用观察者订阅`controller_action_predispatch_checkout_cart_couponPost`事件来实现。

或者通过覆盖购物车控制器。具体来说，`couponPostAction`方法

# c# - LINQ where 变量

> ID：11015986
> 
> 赞同：-2
> 
> 时间：2012-06-13T13:33:45.610
> 
> 标签：c#, linq

我有以下声明：

```
var itemsFromList = from item in ListItems 
                    where item.Countries != null 
                    select item; 
```

所以我可以返回国家中存在的所有值（有些是空的）。在同一个列表中，我还有其他列，例如城市，我必须将其更改为：

```
var itemsFromList = from item in ListItems 
                    where item.cities != null 
                    select item; 
```

有没有办法通过使用类似这样的变量来使用相同的语句来返回非空的城市或国家：

```
var itemsFromList = from item in ListItems 
                    where item.variable != null 
                    select item; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T13:35:57.403

您的问题非常不清楚，但是该[`let`](http://msdn.microsoft.com/en-us/library/bb383976.aspx)子句可以让您分解子表达式结果。可能是这个（？）：

```
var itemsFromList = from item in ListItems 
                    let Variable = item.Countries
                    where Variable != null 
                    select item; 
```

[我不确定这实际上会实现什么。]

我唯一的另一个想法是你不知道`Variable`编译时是什么并且想要注入一些东西？

正如@DarenThomas 所说，如果`Variable`它实际上在 Linq 语句的外部，则整个语句将失效，因为`Variable`每次迭代都不会发生变化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T14:03:23.047

在我看来，Variable 只是一个稍后定义的变量。如果你真的想让你的表达式像这样可以修改，你最好的选择是使用反射。

首先，您需要获取对所需属性的 PropertyInfo 的引用。您可以通过调用[Type.GetProperty(string name)](http://msdn.microsoft.com/en-us/library/kz0a8sxy.aspx)来做到这一点。获得对 PropertyInfo 的引用后，您可以通过调用[PropertyInfo.GetValue(Object obj, Object[] index)](http://msdn.microsoft.com/en-us/library/b05d59ty.aspx)来获取特定实例的值。

下面是一个创建 LINQ 查询的示例，该查询将仅获取指定属性不为空的项目。

```
// Declare this as a Generic method of Type T so that we can pass in a
// List containing anything and easily get the appropriate Type object
public static IEnumerable<T> SelectNonNull<T>(
    IEnumerable<T> ListItems, string propertyName)
{
    IEnumerable<T> itemsFromList;
    // Get a reference to the PropertyInfo for the property
    // we're doing a null-check on.
    PropertyInfo variable = typeof(T).GetProperty(propertyName);
    if (variable == null)
    {
        // The property does not exist on this item type:
        // just return all items
        itemsFromList = from item in ListItems
                        select item;
    }
    else
    {
        itemsFromList = from item in ListItems
                        // GetValue will check the value of item's
                        // instance of the specified property.
                        where variable.GetValue(item, null) != null
                        select item;
    }
    return itemsFromList;
} 
```

要获得问题中的结果，您可以像这样使用此函数：

```
var NonNullCountries = SelectNonNull(ListItems, "Countries");
var NonNullCities = SelectNonNull(ListItems, "cities"); 
```

或者，我们可以将其声明为扩展方法（与其他 Linq 方法一样），如下所示：

```
public static IEnumerable<T> SelectNonNull<T>(
    this IEnumerable<T> source,
    string propertyName)
{
    PropertyInfo variable = typeof(T).GetProperty(propertyName);
    if (variable == null)
    {
        // Specified property does not exist on this item type:
        //just return all items
        return from item in source
                select item;
    }
    else
    {
        return from item in source
                where variable.GetValue(item, null) != null
                select item;
    }
} 
```

然后我们可以将多个调用链接在一起。例如，如果您想过滤掉“城市”和“国家”为空的所有条目，您可以使用以下内容：

```
var NonNullCitiesOrCountries = ListItems.SelectNonNull("Countries")
                                        .SelectNonNull("cities"); 
```

**注意：** SelectNonNull 只返回一个 IEnuerable。您仍然需要对其进行枚举以获取查询结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T13:37:58.790

如果我正确理解了您的问题，您想`Country`用动态的东西替换硬编码字段。

在这种情况下，您需要声明`Variable`（让我们改为调用它`getNotNullField`）作为函数 from `ListItem`to `object`：

```
Func<ListItem, object> getNotNullField;
if (...) {
    getNotNullField = item => item.Countries;
} else {
    getNotNullField = item => item.SomeOtherField;
}

...

var itemsFromList = from item in ListItems where getNotNullField(item) != null 
                    select item; 
```

# domain-driven-design - CQRS - 何时发送确认消息？

> ID：11015989
> 
> 赞同：15
> 
> 时间：2012-06-13T13:34:02.880
> 
> 标签：domain-driven-design, cqrs

> **示例：**业务规则规定客户在下订单后应收到确认消息（电子邮件或类似信息）。

假设 a`NewOrderRegisteredEvent`从域中分派，并由发送确认消息的事件侦听器接收。完成后，其他一些事件处理程序会抛出异常或出现其他问题，并且工作单元会回滚。我们现在已经向用户发送了一条回滚的确认消息。

解决此类问题的“cqrs”方式是什么，您想在完成一个工作单元后做某事？另一个复杂的因素是重播事件。每当我重播记录的事件以构建新的视图/投影时，我不希望重新发送旧的确认消息。

*到目前为止我最好的理论：我刚刚开始研究 cqrs 的迷人世界，想知道这是否可以作为传奇来实现？如果 saga 就像一个状态机，每个转换只能发生一次，那么我想这会解决这个问题吗？我只是很难想象这将如何与命令总线和域事件结合在一起。*

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-14T12:35:38.903

1.  事件仅应在事务完成后发生。如果出现任何问题并且有回滚，那么从外部角度来看，该事件不会发生。因此，它根本不应该发布。尽管`OrderRegistrationFailed`必要时可以发布事件。

2.  除非命令已成功执行，否则您不希望发送邮件。

    首先是命令处理程序（如另一个答案中提出的）将是错误位置的几个原因：在某些情况下，命令处理程序将无法判断命令最终是否会成功。让命令处理程序调用邮件发送也会将流程知识放入命令处理程序中，这会破坏 SRM 并使业务规则与应用层的耦合过于紧密。

    邮件应该在事后发送，即从事件处理程序发送。

    要防止此处理程序在重播期间触发，您可以不注册它。这与您测试应用程序的方式类似。您只需注册您实际需要的处理程序。

    *   生产系统 -> 注册所有事件处理程序
    *   测试 -> 仅注册测试的事件处理程序
    *   重播 -> 仅注册投影/非规范化处理程序

另一个——甚至更松散耦合，虽然有点复杂——可能是拥有一个`Saga`句柄并向适当的有界上下文`NewOrderRegisteredEvent`发出`SendMail`命令（感谢 Yves Reynhout，在问题的评论中指出了这一点）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T01:35:23.453

有两种可能的解决方案

1) 事件的发布和事件的处理（即电子邮件）是单个事务的一部分。在这种情况下，您的事务框架会为您处理它。如果电子邮件失败，则回滚事件。您可能会重试该命令。这在概念上是干净的，很容易思考。在每个有话要说的人都发表意见之前，任何活动都不会完成发布。但实际上，这可能很痛苦，因为它通常涉及分布式事务。这些很难得到。您的电子邮件客户端可以注册与保存您的事件的数据库相同的事务吗？

2) 事件的发布是事务性的，但事件处理程序各自以自己的方式处理事务。发送电子邮件的事件处理程序可以跟踪它看到的事件。如果它崩溃了，它将请求旧事件并处理它们。如果人们丢失或重复电子邮件，您可以做出一个商业决策，看看会有多大的影响。（对于与金钱相关的交易，答案可能是你不应该允许它。）

解决方案 (2) 通常是您在 DDD/CQRS 圈子中看到的推广，因为它是更松散耦合的解决方案。解决方案 (1) 在事件存储和投影位于单个数据库中且投影不经常更改的小型系统中非常实用。解决方案 (2) 允许各种事件处理程序以自己的方式工作。解决方案（1）可能会导致许多不重叠的关注点变得纠缠不清。在这种情况下，您的订单业务规则要等到电子邮件中发生的许多奇怪的事情都得到处理后才能完成。一方面，它可能会减慢你的速度。

如果发送电子邮件比“看到事件，发送电子邮件”更有趣，那么您是对的，您可能手头有一个传奇或工作流程。大型运营中的电子邮件通常本身就是一个复杂的系统，您不太可能需要大量实施。您只需要确保将您的电子邮件放入某种请求队列（使用方法（2）），并且电子邮件系统可能会进行重试/批处理/避免垃圾邮件/通宵工作/等。

# javascript - 在 PhoneGap 中手动删除启动画面

> ID：11015993
> 
> 赞同：7
> 
> 时间：2012-06-13T13:34:17.933
> 
> 标签：javascript, cordova, splash-screen

在 iOS 上，我想保持启动画面，直到我的应用程序准备好。我看到 Cordova.plist 中有一个名为 AutoHideSplashScreen 的标志——如果我关闭它，我如何自行触发它的删除？

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-13T13:39:03.133

在 iOS 上，您应该可以调用`navigator.splashscreen.hide();`

从 1.8.0 开始支持在 Android 中执行此操作。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-13T13:39:17.377

快速浏览谷歌，我发现[了这个](http://shazronatadobe.wordpress.com/2011/09/15/ios-phonegap-splash-screen-control/)

基本上你需要做的是：

```
navigator.splashscreen.hide(); 
```

在 Cordova 1.6.0 上是：

```
cordova.exec(null, null, "SplashScreen", "hide", []) 
```