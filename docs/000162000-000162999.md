# StackOverflow 问答 000162000-000162999

# c# - 使具有特定颜色的图像的每个像素透明

> ID：162007
> 
> 赞同：6
> 
> 时间：2008-10-02T12:27:14.143
> 
> 标签：c#, .net, image, transparency

我有一个 System.Drawing.Image 类型的对象，并希望使每个具有某种特定颜色的像素（例如黑色）透明（即，将此像素的 alpha 设置为 0）。

做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-10-02T12:42:41.033

一种好的方法是使用**ImageAttributes**类来设置颜色列表，以便在绘制时重新映射。这样做的好处是良好的性能以及允许您非常轻松地更改重新映射颜色。试试这样的代码......

```
ImageAttributes attribs = new ImageAttributes();
List<ColorMap> colorMaps = new List<ColorMap>();
//
// Remap black top be transparent
ColorMap remap = new ColorMap();
remap.OldColor = Color.Black;
remap.NewColor = Color.Transparent;
colorMaps.Add(remap);
//
// ...add additional remapping entries here...
//
attribs.SetRemapTable(colorMaps.ToArray(), ColorAdjustType.Bitmap);
context.Graphics.DrawImage(image, imageRect, 0, 0, 
                           imageRect.Width, imageRect.Height, 
                           GraphicsUnit.Pixel, attribs); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-10-02T12:34:30.443

从图像构造一个位图，然后在该位图上调用 MakeTransparent()。它允许您指定应该呈现为透明的颜色。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-10-02T12:29:00.457

你只知道它是一个图像吗？如果它是位图，您可以调用 LockBits，检查/修复每个像素，然后再次解锁这些位。

# nunit - 当 Nant 构建文件执行 NUnit 时 CruiseControl.NET 查看 NUnit xml 测试结果

> ID：162011
> 
> 赞同：9
> 
> 时间：2008-10-02T12:27:55.873
> 
> 标签：nunit, nant, cruisecontrol

我有一个 Nant 构建文件，它在编译 dll 后执行 NUnit。我正在执行带有 CruiseControl 任务的 NAnt 构建文件。所以 NAnt 正在运行测试而不是 CruiseControl。

如何配置它以便可以使用 CruiseControl Web 仪表板查看 NUnit 输出？

* * *

这修复了它：

```
<publishers>
    <merge>
        <files>
                 <file>build\*.test-result.xml</file>
        </files>
    </merge>
    <xmllogger />
 </publishers> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-10-02T12:41:28.540

您想使用 CruiseControl 的合并功能来获取您的 NUnit XML 输出。这就是我公司的情况，而且似乎运作良好。这是一个配置片段（位于 CCNet.config 的 <publishers> 元素中）：

```
 <merge>
     <files>
         <file><path to XML output>\*.xml</file>
     </files>
 </merge> 
```

希望这对你有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-02-10T15:32:22.260

FWIW 我遇到了同样的问题（CC.Net 触发了 Nant，它负责编译和 NUnit 工作），我的 NUnit 输出也没有出现在 CC.Net 上。我已经`<merge>`在我的`<publisher>`任务中（以及在`<xmllogger>`任务之前）完成了任务，但仍然没有。

*我没有*的一件事，b/c 我没有明确需要它，是`<workingDirectory>`我的`<project>`. 一旦我添加了我的 NUnit 输出就会立即出现。无论出于何种原因，似乎都存在依赖关系。希望这对你们中的一些人有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-02T12:42:29.427

确保在dashboard.config 文件中，我们在使用ncover 运行nunit 的部分中有一个有效的xsl 文件，并使用这个xsl\NCoverExplorer.xsl 我认为我们从ncover 获取的xsl 文件安装在某处。

还要确保这条线是正确的：

然后确保在 ccnet.config 文件的部分下，您列出了 nunit 测试的 xml 输出。

还要确保将 xsl 文件放在 webdashboard 下的 xsl 文件夹中。

# .net - 使用 AJAX 在页面加载时触发异步方法

> ID：162020
> 
> 赞同：2
> 
> 时间：2008-10-02T12:31:17.300
> 
> 标签：.net, ajax, asynchronous

我正在使用带有 AJAX 扩展（1.0？）的 ASP.NET 2.0，我想知道是否可以异步调用方法并在页面加载后将结果填充到页面上。

我有一个由相当长时间运行的 SQL 查询填充的 gridview。我宁愿让页面出现并且结果在它们从服务器返回时慢慢返回，而不是强迫用户盯着空白页面直到所有内容都处理完毕。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-02T13:22:50.047

您可以使用 asp:UpdatePanel 并在其中插入 gridview。他们只是在加载期间调用 AJAX 调用。您使用 Sys.Application.load 事件。在这里查看更多信息：[http ://www.asp.net/ajax/documentation/live/overview/AJAXClientEvents.aspx](http://www.asp.net/ajax/documentation/live/overview/AJAXClientEvents.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-14T22:05:18.107

您可以在更新面板中放置一个隐藏按钮，然后对该按钮执行 PostBack。不是一个优雅的解决方案，但它工作正常。

在您的更新面板中，您将编写类似这样的内容。

```
<div style="visibility:hidden">
  <asp:Button ID="btnLoad" OnClick="btnLoad_Click" runat="server"/>
</div> 
```

在您的 Page_Load 事件中，您必须为 PostBack 注册脚本：

```
protected void Page_Load(object sender, EventArgs e)
{    
    if (!Page.IsPostBack)
    {
        ScriptManager.RegisterStartupScript(this, this.GetType(), "InitialLoad" + this.ClientID, Page.ClientScript.GetPostBackEventReference(btnLoad, "")+";", true);
    }
} 
```

然后您可以在 btnLoad_Click 方法（按钮的 OnClick 事件）中编写将在启动时执行的代码。

我尝试了另一种方法，使用 AJAX 计时器并在第一个 Tick 时禁用它，但有时我在执行后面的代码之前收到多个滴答声，因此我放弃了该解决方案。

# visual-studio-2008 - 在 VS2008 的 XAML 编辑器中禁用 Intellisense？

> ID：162025
> 
> 赞同：6
> 
> 时间：2008-10-02T12:33:16.670
> 
> 标签：visual-studio-2008, xaml, ide, editor, intellisense

有没有办法在 Visual Studio 2008 的 XAML 编辑器中禁用 Intellisense？打字时通常会消耗很大的性能，有时我会等待十秒钟或更长时间，而列表会自动弹出。

似乎在 Options->Text Editors->XAML 中，Intellisense 部分是部分不可用（灰显）。我们在完整的 XAML 视图中打开文档，并且不使用任何第三方增强功能。

太糟糕了，有时我会在其他地方打开文件并编辑我需要的内容，但我真的很想解决这个问题，所以我*不必*使用外部应用程序。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-10-02T21:04:27.003

找到我自己的答案：

```
HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\9.0\Text Editor\XAML\Auto List Members 
```

设置为 0x00000000 可以解决它。

“自动列表参数”键似乎没有效果。最重要的是，您仍然可以使用 <Ctrl+Space> 按需打开它（用于设置您想不到名称的属性等）

相当漂亮！

# c# - stdole.dll 有什么作用？

> ID：162028
> 
> 赞同：44
> 
> 时间：2008-10-02T12:34:03.720
> 
> 标签：c#, com, stdole

我们有一个大型 C# (.net 2.0) 应用程序，它使用我们自己的 C++ COM 组件和一个也通过 COM 访问的第 3 方指纹扫描仪库。我们遇到了一个问题，在生产中，指纹库中的一些事件不会被触发到 C# 应用程序中，尽管来自我们自己的 C++ COM 组件的事件被触发并被很好地接收。

使用 MSINFO32 将工作系统上加载的模块与故障系统上的模块进行比较，我们确定这是由 STDOLE.DLL 不在 GAC 中引起的，因此未加载到故障进程中。

将此文件拖入 GAC 会导致事件从指纹 COM 库中正常返回。

那么 stdole.dll 是做什么的呢？它的大小为 16k，所以它不会太多......它是某种链接到另一个库（如 STDOLE32）吗？为什么它的缺席会导致这种奇怪的行为？

我们如何分发 stdole.dll？这是一个 XCOPY 部署应用程序，我们不使用 GAC。我们是否应该将其打包为资源并使用 System.EnterpriseServices.Internal.Publish.GacInstall 来确保它在 GAC 中？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2008-10-02T12:51:47.873

似乎 stdole.dll 是一个**主要的互操作程序集**。请参阅[MSDN 上的 Office 2003 主要互操作程序集。](http://msdn.microsoft.com/en-us/library/aa195478(office.11).aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-09-21T17:55:39.363

此处还讨论了此问题：[为什么 Visual Studio 2015 将 stdole.dll 和 Microsoft.AnalysisServices.AdomdClient.dll 添加到我的项目中？](https://stackoverflow.com/q/31970967/3347858)

在这种情况下，将旧项目升级到 VS 2015 是导致 stdole.dll 开始包含在项目中的原因。

如果库引用具有在属性中“嵌入互操作类型”的选项，则这是首选，之后可能不需要 stdole.dll。只需`Embed Interop Types=true`在引用的属性中设置。

允许这样做的库包括 MS Office 库，例如 Office、Excel、Core。Crystal Reports 就是一个例子。

[Hans Passant](https://stackoverflow.com/users/17034/hans-passant?tab=topactivity) **强烈反对**`Embed Interop Types=false`在此处设置：[在 Visual Studio 中设置 Embed Interop Types true 和 false 有何不同？](https://stackoverflow.com/questions/20514240/whats-the-difference-setting-embed-interop-types-true-and-false-in-visual-studi)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2021-06-28T17:35:16.613

我认为其他任何答案实际上都没有回答“做`stdole.dll`什么”的大部分问题。这是我的理解。

### 概括：

此 DLL 位于从托管应用程序最终指向非托管操作系统 DLL 的引用链的顶部附近，如下所示：

```
 .NET app -->
        stdole.dll -->
            stdole2.tlb -->
                oleaut32.dll 
```

这条链中的链接定义明确但晦涩难懂。这个答案的其余部分走链......

* * *

### 详细解释：

`stdole.dll`它本身就是一个互操作 DLL。这意味着它是一个 .NET 程序集，其目的基本上是[充当](https://docs.microsoft.com/en-us/dotnet/standard/native-interop/com-callable-wrapper)具有 COM 接口的特定非托管类的包装器。如果您使用[ILSpy](http://%60%60%60lang-none)或 dotPeek 之`stdole.dll`类的工具查看内部，您可以看到里面有什么。下面是一个接口[示例](https://docs.microsoft.com/en-us/dotnet/framework/additional-apis/stdole.stdpicture)：`StdPicture`

```
using System.Runtime.InteropServices;

namespace stdole
{
  [CoClass(typeof (StdPictureClass))]
  [Guid("7BF80981-BF32-101A-8BBB-00AA00300CAB")]
  [ComImport]
  public interface StdPicture : Picture
  {
  }
} 
```

所有这些都是一个带有属性的接口，这些属性对*真正*应该使用的 COM 类的详细信息进行编码。像这样的 DLL 通常是使用类似工具自动创建的，[`tlbimp.exe`](https://docs.microsoft.com/en-us/dotnet/framework/tools/tlbimp-exe-type-library-importer)或者当您将非托管 COM DLL 作为参考直接添加到项目中时，Visual Studio 会为您执行此操作。

* * *

我们可以再深入一点。`Guid`上面示例中的A`7BF80981-BF32-101A-8BBB-00AA00300CAB`通常会在 Windows 注册表中找到，这是运行时`stole.StdPicture`在实际从托管代码中使用时要查看的位置。

如果您使用 RegEdit 搜索该 GUID，您会发现：

```
Computer\HKEY_CLASSES_ROOT\Interface\{7BF80981-BF32-101A-8BBB-00AA00300CAB}\TypeLib 
```

具有价值 `00020430-0000-0000-C000-000000000046`。

搜索该值，您会发现：

```
Computer\HKEY_CLASSES_ROOT\TypeLib\{00020430-0000-0000-C000-000000000046} 
```

（来自同一 DLL 的大多数其他 GUID 可能会有类似的条目）。

这个键有很多有趣的细节，实际上是底层实现的几个版本的细节。例如，在 subkey 下 `2.0\0\win32` ，默认值为：

```
C:\WINDOWS\SysWow64\stdole2.tlb 
```

对于版本 2 的 32 位变体。这更接近`StdPicture`实际实现的位置。

* * *

TLB 文件只是 DLL 的 COM“头”。它本身没有可执行代码。[在OLEViewDotNet](https://github.com/tyranid/oleviewdotnet)或原始[OleView](https://docs.microsoft.com/en-us/windows/win32/com/ole-com-object-viewer)`stdole2.tlb`之类的工具中打开，您可以读取类型库本身的 IDL。在这种情况下，第一部分具有以下内容：

```
// typelib filename: stdole2.tlb

[
  uuid(00020430-0000-0000-C000-000000000046),
  version(2.0),
  helpstring("OLE Automation")
]
library stdole
{
    ...
} 
```

请注意，`uuid`我们从上面的 Regedit 获得的值相同。最终向下滚动，我们来到`StdPicture`条目，与上面的示例相同：

```
[
  uuid(0BE35204-8F91-11CE-9DE3-00AA004BB851)
]
coclass StdPicture {
    ...
}; 
```

* * *

再一次，这里没有真正的代码，只是一个类定义。回到 RegEdit 我们可以发现`uuid`：

```
Computer\HKEY_CLASSES_ROOT\CLSID\{0BE35204-8F91-11CE-9DE3-00AA004BB851}\InprocServer32 
```

其值为`C:\Windows\System32\oleaut32.dll`。现在我们知道这个 DLL 实现`StdPicture`了 32 位`stdole`库版本 2 的 coclass。

（虽然我会认为这个文件应该在`SysWow64`......？）

如果您要按照此链获取其他接口，您可能最终会使用相同的 DLL 或另一个。

请注意，对于某些语言（如 VB6），TLB 通常直接嵌入到实现的 DLL 中。但这不是 COM 所必需的，显然微软在这种情况下是如何做到的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2010-04-03T08:51:05.830

我有同样的问题。我刚刚从应用程序中删除了引用并重新编译。运行所有通过的测试。然后在没有 dll 的情况下重新部署，一切正常。

我不知道首先在项目中是如何引用这个的。这是一个遗留应用程序，所以一定是很久以前的事了。

西蒙

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-03-20T01:52:03.257

就我而言，它是对 Office Word Interop 的旧未使用引用......但删除它还不够：发布配置文件仍然有行来复制 stdole.dll ！

```
<File Include="bin/stdole.dll"> ... 
```

删除该行（使用“在文件中查找”找到）并从远程服务器上的 bin 文件夹中删除 stdole.dll 解决了我的问题。

希望这对其他人有帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-08-19T15:24:26.203

我还必须为 stdole 添加对我的项目的引用。尽管我没有对它的任何引用（它是一个简单的图像应用程序），但我们的 2 个用户收到了它丢失的错误。当这是一个 3.5 应用程序时，他们可能只运行 .net 2.0。我已经弄清楚原因了。

我还进入了项目属性选项卡上的发布，并选择了应用程序文件，然后包含要部署的 stdole。希望这会奏效。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-06-07T09:32:11.890

在我们的项目中，IDispatch 使用 stdole.dll。我们已将其更改为对象并删除 IDispatch，然后从引用中删除 stdole。

# c# - 新站点创建和安全/身份验证，- 我应该使用 ASP.net Membership Provider 吗？

> ID：162031
> 
> 赞同：6
> 
> 时间：2008-10-02T12:34:53.673
> 
> 标签：c#, asp.net, security, authentication, asp.net-membership

似乎有很多方法可以给这只特殊的猫剥皮——但这是最好的和最容易实现的。似乎 ASP.net Membership Provider 可以节省更多时间，所以我的问题是：

1.  会员制的优点/缺点是什么？
2.  您如何将自动生成的用户数据库与您自己的自定义数据库集成？例如客户/订单/产品数据库。（顺便说一句，我们在这里谈论的是 MS Sql）
3.  我在哪里可以找到最新的好教程？

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-10-02T13:17:34.600

会员资格是轻量级且易于设置的。您还可以使用各种提供程序来使用 Active Directory 或其他一些成员位置。

您不需要集成数据库，您可以使用一个来验证用户，然后只要它们有效，就可以去另一个数据库查询数据。这是出于安全原因将信息分开的好方法。

对于一个好的教程，我建议：http: [//msdn.microsoft.com/en-us/library/yh26yfzy.aspx](http://msdn.microsoft.com/en-us/library/yh26yfzy.aspx)

如果您想创建自己的会员提供商：[http ://www.asp.net/learn/videos/video-189.aspx](http://www.asp.net/learn/videos/video-189.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-10-02T13:37:40.183

总的来说，我给它一个大拇指，但我能想到几个小缺点：

*   角色只是字符串，如果不滚动您自己的代码，就无法将其他信息附加到它们。
*   某些登录控件未正确设置其默认按钮，因此在输入字段中按“回车”键没有任何作用。您可以通过自己设置来解决此问题。
*   没有默认方式要求密码中的数字，只有符号。
*   带有 SqlMembershipProvider 的登录控件不显示特定的“用户被锁定”消息。

无论是反对还是赞成，取决于您的观点：

*   SqlMembershipProvider 中的用户名不区分大小写

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-02T13:19:54.623

[教程 - 在ASP.Net](http://www.asp.net/learn/security/ "安全教程")站点上有一系列很好的教程。我们使用了会员提供者设施，并将其与我们的数据库集成在一起——我们使用“用户名”值作为我们自己的表的外键以及额外的“业务”信息。

该系统以最少的编码运行良好。

# php - 在 PHP 中将两个数组合并为键值对

> ID：162032
> 
> 赞同：30
> 
> 时间：2008-10-02T12:35:44.043
> 
> 标签：php, arrays

我有两个相同大小的数组。我想合并两者，所以一个的值是新数组的键索引，新数组的值是另一个的值。

现在我只是循环遍历数组并手动创建新数组，但我觉得有一种更优雅的方式来解决这个问题。我没有看到任何用于此目的的数组函数，但也许我错过了什么？沿着这些思路有一个简单的方法吗？

```
$mapped_array = mapkeys($array_with_keys, $array_with_values); 
```

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2008-10-02T12:38:04.677

参见[`array_combine()`](http://php.net/array_combine)PHP.net。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2008-10-02T15:39:37.143

（来自文档以便于阅读）

array_combine — 通过使用一个数组作为键和另一个作为其值来创建一个数组

**描述**

`array array_combine ( array $keys , array $values )`

通过将 keys 数组中的值用作键并将 values 数组中的值用作相应值来创建一个数组。

**参数**

keys - 要使用的键数组。key 的非法值将被转换为字符串。

values - 要使用的值数组

**例子**

```
<?php
$a = array('green', 'red', 'yellow');
$b = array('avocado', 'apple', 'banana');
$c = array_combine($a, $b);

print_r($c);
?> 
```

上面的示例将输出：

```
Array
(
    [green]  => avocado
    [red]    => apple
    [yellow] => banana
) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-12-17T18:47:53.493

这应该可以解决问题

```
function array_merge_keys($ray1, $ray2) {
    $keys = array_merge(array_keys($ray1), array_keys($ray2));
    $vals = array_merge($ray1, $ray2);
    return array_combine($keys, $vals);
} 
```

# c# - 未知的 Outlook 邮件项条目 ID

> ID：162037
> 
> 赞同：0
> 
> 时间：2008-10-02T12:36:40.017
> 
> 标签：c#, .net, visual-studio-2008, outlook, add-in

我的 Outlook 加载项处理 Inspector 对象的 NewInspector 事件，以便显示邮件项目的自定义表单。

我可以获得作为事件参数传递的 Inspector 对象的 CurrentItem 的 EntryID。但是，问题是当前邮件项的 EntryID 比它应该的短，并且是未知的。我知道创建的每个邮件项目的每个 EntryID，并且我可以看到特定邮件项目的 EntryID 错误。

怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-02T14:27:30.530

这个想法是记住由加载项创建的 MailItem 的每个 EntryID，以便以后可以区别对待。问题是 Inspector 打开的项目的 EntryID 很短，并且不在记住的 ID 列表中，尽管它应该是。

我创建邮件项目的几行代码是：

```
item.Save();
item.Move(some_folder);
items_list.Add(item.EntryID); 
```

文件夹“some_folder”位于外部非默认 PST 内，因此邮件项目获得新的 EntryID。我将这些行更改为：

```
item.Save();
item = (Outlook.MailItem)item.Move(some_folder);
items_list.Add(item.EntryID); 
```

现在，item 有了一个新的 EntryID，以后可以找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-22T06:32:02.777

以防万一这对任何人都有帮助，我需要做的就是`MailItem.Save()`在获取`EntryID`. 新创建的文件在保存之前`MailItem`没有任何内容（在我的情况下是文件夹）。`EntryID``Drafts`

# design-patterns - GOF 单例模式是否有任何可行的替代方案？

> ID：162042
> 
> 赞同：94
> 
> 时间：2008-10-02T12:38:46.097
> 
> 标签：design-patterns, singleton

面对现实吧。单例模式是一个[备受争议](https://stackoverflow.com/questions/11831/singletons-good-design-or-a-crutch#11839)的话题，在围墙的两边*都有*成群的程序员。有些人觉得 Singleton 只不过是一个美化的全局变量，而另一些人则对模式发誓并不断地使用它。但是，我不希望[Singleton Controversy](http://code.google.com/p/google-singleton-detector/wiki/WhySingletonsAreControversial)成为我问题的核心。 **每个人都可以进行一场拔河比赛，然后一决胜负，看看谁会赢**。我想说的是，我不相信有一个正确的答案，我也不是故意煽动党派争吵。当我问这个问题时，我只是对*单例替代品感兴趣：*

**他们是 GOF 单例模式的任何特定替代方案吗？**

例如，当我过去多次使用单例模式时，我只是对保留一个或多个变量的状态/值感兴趣。但是，可以使用**静态变量**而不是使用单例模式在类的每个实例化之间保留变量的状态/值。

你还有什么别的想法？

**编辑：** 我真的不希望这是另一篇关于“如何正确使用单例”的帖子。同样，我正在寻找避免它的方法。为了好玩，好吗？我想我用你最好的电影预告片声音问了一个纯粹的学术问题，“在没有单身的平行宇宙中，我们能做什么？”

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2008-10-02T14:04:04.720

要了解解决单例的正确方法，您需要了解单例的问题（以及一般的全局状态）：

**单例隐藏依赖项。**

为什么这很重要？

因为**如果您隐藏依赖项，您往往会失去对耦合量的跟踪。**

你可能会争辩说

```
void purchaseLaptop(String creditCardNumber, int price){
  CreditCardProcessor.getInstance().debit(creditCardNumber, amount);
  Cart.getInstance().addLaptop();
} 
```

比简单

```
void purchaseLaptop(CreditCardProcessor creditCardProcessor, Cart cart, 
                    String creditCardNumber, int price){
  creditCardProcessor.debit(creditCardNumber, amount);
  cart.addLaptop();
} 
```

但至少第二个 API 清楚地说明了该方法的协作者是什么。

所以解决单例的方法不是使用静态变量或服务定位器，而是将单例类更改为实例，这些实例在它们有意义的范围内实例化，并注入到需要它们的组件和方法中。您可以使用 IoC 框架来处理此问题，也可以手动执行，但重要的是摆脱全局状态并使依赖关系和协作明确。

* * *

## 回答 #2

> 赞同：77
> 
> 时间：2008-10-02T12:50:04.180

Alex Miller 在“[我讨厌的模式](http://tech.puredanger.com/2007/07/03/pattern-hate-singleton/)”中引用了以下内容：

“当单身人士似乎是答案时，我发现通常更明智的是：

1.  创建单例的接口和默认实现
2.  在系统的“顶部”构建默认实现的单个实例。这可能在 Spring 配置中，或者在代码中，或者根据您的系统以各种方式定义。
3.  将单个实例传递给需要它的每个组件（依赖注入）

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2008-10-02T13:38:16.233

我遇到的最好的解决方案是使用工厂模式来构造类的实例。使用该模式，您可以*确保*只有一个类的实例在使用它的对象之间共享。

我虽然管理起来会很复杂，但在阅读了这篇博[文“单身人士都去哪儿了？”之后](http://misko.hevery.com/2008/08/21/where-have-all-the-singletons-gone/) ，看起来很自然。顺便说一句，它对隔离单元测试有很大帮助。

总而言之，你需要做什么？每当一个对象依赖于另一个对象时，它将仅通过其构造函数接收它的实例（您的类中没有 new 关键字）。

```
class NeedyClass {

    private ExSingletonClass exSingleton;

    public NeedyClass(ExSingletonClass exSingleton){
        this.exSingleton = exSingleton;
    }

    // Here goes some code that uses the exSingleton object
} 
```

然后，工厂。

```
class FactoryOfNeedy {

    private ExSingletonClass exSingleton;

    public FactoryOfNeedy() {
        this.exSingleton = new ExSingletonClass();
    }

    public NeedyClass buildNeedy() {
        return new NeedyClass(this.exSingleton);
    }
} 
```

由于您将只实例化您的工厂一次，因此将有一个 exSingleton 实例化。每次调用 buildNeedy 时，NeedyClass 的新实例都会与 exSingleton 捆绑在一起。

我希望这有帮助。请指出任何错误。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2008-10-02T12:40:45.547

您不必特意去避免任何模式。模式的使用要么是设计决策，要么是自然契合（它就在适当的位置）。在设计系统时，您可以选择使用模式或不使用模式。但是，您不应该竭尽全力避免最终成为设计选择的任何事情。

我不会避免单例模式。要么合适，我使用它，要么不合适，我不使用它。我相信就这么简单。

单例的适当性（或缺乏）取决于具体情况。这是一个必须做出的设计决策，并且必须理解（并记录）该决策的后果。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2008-10-02T12:43:08.473

Spring 或任何其他 IoC 容器在这方面做得相当不错。由于类是在应用程序本身之外创建和管理的，因此容器可以使简单的类成为单例并在需要的地方注入它们。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2010-03-17T17:46:10.633

Monostate（在 Robert C. Martin 的敏捷软件开发中描述）是单例的替代方案。在这种模式中，类的数据都是静态的，但 getter/setter 是非静态的。

例如：

```
public class MonoStateExample
{
    private static int x;

    public int getX()
    {
        return x;
    }

    public void setX(int xVal)
    {
        x = xVal;
    }
}

public class MonoDriver
{
    public static void main(String args[])
    {
        MonoStateExample m1 = new MonoStateExample();
        m1.setX(10);

        MonoStateExample m2 = new MonoStateExample();
        if(m1.getX() == m2.getX())
        {
            //singleton behavior
        }
    }
} 
```

Monostate 与单例具有相似的行为，但这样做的方式是程序员不一定知道正在使用单例这一事实。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2008-10-02T13:10:58.187

存在单**例**模式是因为在某些情况下**需要单个对象来提供一组服务**。

即使是这种情况，我仍然考虑通过使用表示实例的**全局静态字段/属性**来创建单例的方法，这是不合适的。这是不合适的，因为它在静态字段和对象之间的代码中创建了依赖关系，而不是对象提供的服务。

因此，我建议不要使用经典的单例模式，而是将 service 'like' 模式与**serviced containers**一起使用，而不是通过静态字段使用单例，而是通过请求所需服务类型的方法获取对它的引用。

```
*pseudocode* currentContainer.GetServiceByObjectType(singletonType)
//Under the covers the object might be a singleton, but this is hidden to the consumer. 
```

而不是单一的全局

```
*pseudocode* singletonType.Instance 
```

这样，当您想将对象的类型从单例更改为其他对象时，您将可以轻松地做到这一点。另外一个额外的好处是，您不必将对象实例的分配传递给每个方法。

另请参阅**[Inversion of Control](http://en.wikipedia.org/wiki/Inversion_of_control)**，其想法是通过将单例直接暴露给消费者，您可以在消费者和对象实例之间创建依赖关系，而不是对象提供的对象服务。

我的意见是尽可能**隐藏**单例模式的使用，因为它并不总是可以避免或可取的。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2008-10-02T12:44:33.650

如果您使用 Singleton 来表示单个数据对象，则可以改为将数据对象作为方法参数传递。

（虽然，我认为这是首先使用单例的错误方法）

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-10-02T12:44:49.780

如果你的问题是你想保持状态，你需要一个 MumbleManager 类。在开始使用系统之前，您的客户端会创建一个 MumbleManager，其中 Mumble 是系统的名称。通过它保留状态。您的 MumbleManager 可能会包含一个包含您的状态的属性包。

这种风格感觉很像 C 而不是很像对象——你会发现定义你的系统的对象都会引用同一个 MumbleManager。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-10-02T12:43:04.090

使用普通对象和工厂对象。工厂负责仅使用配置信息（例如，它包含）和行为来监管实例和普通对象详细信息。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-10-02T12:45:23.320

实际上，如果您从头开始设计避免单例，您可能不必通过使用静态变量来解决不使用单例的问题。当使用静态变量时，您也或多或少地创建了一个单例，唯一的区别是您创建了不同的对象实例，但是在内部它们都表现得好像在使用单例一样。

您能否给出一个详细的示例，您使用单例或当前使用单例并且您试图避免使用它？这可以帮助人们找到一个更奇特的解决方案，如何在没有 Singleton 的情况下处理这种情况。

顺便说一句，我个人对单身人士没有任何问题，我无法理解其他人对单身人士的问题。我看不出他们有什么不好。也就是说，如果您没有滥用它们。每一种有用的技术都可能被滥用，如果被滥用，将导致负面结果。另一种经常被滥用的技术是继承。仍然没有人会因为有些人可怕地滥用它而说继承是不好的。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-10-02T12:55:47.630

就我个人而言，实现类似于单例的行为的更明智的方法是使用完全静态的类（静态成员、静态方法、静态属性）。大多数时候我以这种方式实现它（从用户的角度我想不出任何行为差异）

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-10-02T13:05:48.543

我认为监管单身人士的最佳地点是在班级设计层面。在这个阶段，您应该能够绘制出类之间的交互，看看是否有什么东西绝对、绝对地要求在应用程序生命的任何时候都只存在这个类的一个实例。

如果是这种情况，那么你有一个单身人士。如果您在编码过程中为了方便而将单例放入其中，那么您真的应该重新审视您的设计并停止编码所说的单例:)

是的，“警察”是我在这里的意思，而不是“避免”。单例不是要避免的（就像 goto 和全局变量不是要避免的一样）。相反，您应该监控它的使用情况，并确保它是有效完成您想做的事情的最佳方法。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2008-10-02T13:06:09.993

我主要使用单例作为“方法容器”，根本没有状态。如果我需要与许多类共享这些方法并希望避免实例化和初始化的负担，我会创建一个上下文/会话并在那里初始化所有类；涉及会话的所有内容也可以访问由此包含的“单例”。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2008-11-11T22:50:46.430

由于没有在高度面向对象的环境（例如 Java）中进行编程，因此我并没有完全理解讨论的复杂性。但是我已经在 PHP 4 中实现了一个单例。我这样做是为了创建一个“黑盒”数据库处理程序，该处理程序自动初始化并且不必在不完整且有些损坏的框架中向上和向下传递函数调用。

阅读了一些单例模式的链接后，我不完全确定我会以完全相同的方式再次实现它。真正需要的是具有共享存储的多个对象（例如实际的数据库句柄），这几乎就是我的调用变成的。

像大多数模式和算法一样，“仅仅因为它很酷”而使用单例是错误的做法。我需要一个看起来很像单身人士的真正“黑盒”电话。IMO 这就是解决这个问题的方法：注意模式，但也要看看它的范围更广，它的实例需要在什么级别上是独一无二的。

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2008-10-02T12:57:07.037

你是什​​么意思，我有什么技巧可以避免它？

为了“避免”它，这意味着在我遇到的许多情况下，单例模式自然很适合，因此我必须采取一些措施来化解这些情况。

但没有。我不必避免单例模式。它根本不会出现。

# thunderbird - 如何插入带有 Thunderbird 扩展的电子邮件标题？

> ID：162057
> 
> 赞同：7
> 
> 时间：2008-10-02T12:41:41.517
> 
> 标签：thunderbird

我正在构建一个 Thunderbird 扩展，并希望将我自己的标题添加到所有外发电子邮件（例如 <myext-version: 1.0> ）。知道怎么做吗？我知道这是可能的，因为这是在 OpenPGP Enigmail 扩展中完成的。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-26T14:49:02.177

这是我正在处理的一个扩展的代码：

```
function SendObserver() {
  this.register();
}

SendObserver.prototype = {
  observe: function(subject, topic, data) {

     /* thunderbird sends a notification even when it's only saving the message as a draft.
      * We examine the caller chain to check for valid send notifications 
      */
     var f = this.observe;
     while (f) {
       if(/Save/.test(f.name)) {
           print("Ignoring send notification because we're probably autosaving or saving as a draft/template");
           return;
       }
       f = f.caller;
     }

     // add your headers here, separated by \r\n
     subject.gMsgCompose.compFields.otherRandomHeaders += "x-test: test\r\n"; 
     }

  },
  register: function() {
    var observerService = Components.classes["@mozilla.org/observer-service;1"]
                          .getService(Components.interfaces.nsIObserverService);
    observerService.addObserver(this, "mail:composeOnSend", false);
  },
  unregister: function() {
    var observerService = Components.classes["@mozilla.org/observer-service;1"]
                            .getService(Components.interfaces.nsIObserverService);
    observerService.removeObserver(this, "mail:composeOnSend");
  }
};

/*
 * Register observer for send events. Check for event target to ensure that the 
 * compose window is loaded/unloaded (and not the content of the editor).
 * 
 * Unregister to prevent memory leaks (as per MDC documentation).
 */
var sendObserver;
window.addEventListener('load', function (e) {if (e.target == document) sendObserver = new SendObserver(); }, true);
window.addEventListener('unload', function (e) { if (e.target == document) sendObserver.unregister();}, true); 
```

将它放在由撰写窗口加载的 .js 文件中（例如通过覆盖`chrome://messenger/content/messengercompose/messengercompose.xul)`.

在我的情况下，检查 SendObserver.observe 是必要的，因为我想进行用户交互，但您可能会忽略它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-23T12:40:05.947

我不知道答案，但只是一些想法......

我认为 Thunderbird 扩展通常只是 xul 和 js。从 enigmail 网站：

> 与大多数 Mozilla 附加组件不同，Enigmail 包含依赖于平台的部分：它依赖于 CPU、编译器、操作系统的库和它应该集成到的电子邮件应用程序。

查看 Enigmail 源代码，[这可能是相关部分](http://www.mozdev.org/source/browse/enigmail/src/src/mimehdrs2.cpp?rev=1.3;content-type=text%2Fx-cvsweb-markup)（用 c++ 编写）

因此，您可能需要将他们所做的事情翻译成 js(!) 或继续寻找不同的示例。

[这是另一个可能有用的链接](http://email.about.com/cs/mozillatips/qt/et030604.htm)

# .net - 调整文本框上的自动完成下拉宽度

> ID：162064
> 
> 赞同：5
> 
> 时间：2008-10-02T12:42:52.233
> 
> 标签：.net, winforms, .net-2.0, textbox, autocomplete

我在使用自定义 AutoCompleteSource 设置的 .NET 2 winforms 应用程序中使用文本框。无论如何通过代码我可以增加包含自动完成建议的列表的宽度？

理想情况下，我希望在不增加文本框宽度的情况下这样做，因为我在 UI 中缺少空间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-02T14:21:51.450

我不知道，但是您可以自动调整文本框的大小，使其仅在需要时才变宽，而不是始终与最长的文本一样宽。

[来自http://forums.microsoft.com/MSDN/ShowPost.aspx?PostID=3311429&SiteID=1](http://forums.microsoft.com/MSDN/ShowPost.aspx?PostID=3311429&SiteID=1)的示例

```
Public Class Form1
Private WithEvents T As TextBox
Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    T = New TextBox
    T.SetBounds(20, 20, 100, 30)
    T.Font = New Font("Arial", 12, FontStyle.Regular)
    T.Multiline = True
    T.Text = "Type Here"
    T.SelectAll()
    Controls.Add(T)
End Sub
Private Sub T_TextChanged(ByVal sender As Object, ByVal e As System.EventArgs) Handles T.TextChanged
    Dim Width As Integer = TextRenderer.MeasureText(T.Text, T.Font).Width + 10
    Dim Height As Integer = TextRenderer.MeasureText(T.Text, T.Font).Height + 10
    T.Width = Width
    T.Height = Height
End Sub 
```

结束类

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-02T23:10:48.043

据我所知，TextBox 类包装了 Windows 附带的完整 AutoComplete API。唉，这个事实不能“移植”到 .NET 框架的其他部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-02T13:20:50.113

嗯，真的没有直接的方法。您可能不得不求助于子类化（在 Windows API 意义上）TextBox 来做到这一点，即使那样，也会有很多猜测要做。

# java - 如何使用 Ant 将 jsp 预编译的 web.xml 片段与主 web.xml 合并

> ID：162079
> 
> 赞同：5
> 
> 时间：2008-10-02T12:47:16.077
> 
> 标签：java, jsp, tomcat, ant, web.xml

我们的 Web 应用程序有常用的**web.xml**，其中包括一些 jsp 和 jsp 标记文件。我想切换到使用预编译的jsp。我在构建中进行了预编译，它生成了 web.xml 片段，现在我想将该片段合并到主 web.xml 中。

是否有**web.xml的****包含**类型指令可以让我包含该片段。

 **理想情况下，我会为 DEV 保留原样，因为它对动态更改 jsp 并立即查看更改很有用，但是对于 UAT/PROD，jsp 将被预编译，因此工作得更快。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-10-02T13:12:50.257

Doh - jasper2 任务中有一个选项可以将片段自动合并到主 web.xml - **addWebXmlMappings**

```
 <jasper2
         validateXml="false"
         uriroot="${web.dir}"
         addWebXmlMappings="true"
         webXmlFragment="${web.dir}/WEB-INF/classes/jasper_generated_web.xml"
         outputDir="${web.dir}/WEB-INF/jsp-src" /> 
```

我想知道合并有多好...

令人讨厌的是，您仍然需要生成片段，即使在此任务之后不需要它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-10-04T23:38:16.747

我在我的项目中使用[Tomcat jasper ANT 任务](http://tomcat.apache.org/tomcat-6.0-doc/jasper-howto.html)，它将 JSP 预编译成 servlet 并将新的 servlet 映射添加到原始 web.xml。在 DEV 构建中，只需跳过此步骤并部署 JSP，无需预编译和修改 web.xml。

```
 <?xml version="1.0"?>
<project name="jspc" basedir="." default="all">
 <import file="${build.appserver.home}/bin/catalina-tasks.xml"/>

 <target name="all" depends="jspc,compile"></target>

 <target name="jspc">
  <jasper
   validateXml="false"
   uriroot="${build.war.dir}"
   webXmlFragment="${build.war.dir}/WEB-INF/generated_web.xml"
   addWebXmlMappings="true"
   outputDir="${build.src.dir}" />
 </target>

 <target name="compile">
  <javac destdir="${build.dir}/classes"
   srcdir="${build.src.dir}"
   optimize="on"
   debug="off"
   failonerror="true"
   source="1.5"
   target="1.5"
   excludes="**/*.smap">
   <classpath>
    <fileset dir="${build.war.dir}/WEB-INF/classes">
     <include name="*.class" />
    </fileset>
    <fileset dir="${build.war.lib.dir}">
     <include name="*.jar" />
    </fileset>
    <fileset dir="${build.appserver.home}/lib">
     <include name="*.jar" />
    </fileset>    
    <fileset dir="${build.appserver.home}/bin">
     <include name="*.jar"/>
    </fileset>
   </classpath>
    <include name="**" />
    <exclude name="tags/**"/>
  </javac>
 </target>

 <target name="clean">
  <delete>
   <fileset dir="${build.src.dir}"/>
   <fileset dir="${build.dir}/classes/org/apache/jsp"/>
  </delete>
 </target>
</project> 
```

如果您已经进行了 JSP 编译并且只想合并 web.xml 文件，则可以编写一个简单的 XSLT 来将新生成的 web,xml 中的选定元素（例如 servlet 映射）添加到您的原始文件中。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-10-07T16:03:11.737

因为生成的片段不是一个有效的 XML 文件（毕竟它是一个片段），所以不能直接使用 XSLT。另一方面，您不必这样做。这是一个简单的技巧，可以为您提供所需的一切。

在您的 web.xml 文件中，在和元素`<!-- @JSPS_MAP@ -->`之间插入 XML 注释，例如`<servlet>``<servlet-mapping>`

```
 <servlet>
    <servlet-name>MyServlet</servlet-name>
    <servlet-class>my.servlets.MyServlet</servlet-class>
  <servlet>

  <!-- @JSPS_MAP@ -->

  <servlet-mapping>
    <servlet-name>MyServlet</servlet-name>
    <url-pattern>/my-servlet</url-pattern>
  </servlet-mapping> 
```

然后使用令牌过滤器将`@JSPS_MAP@`标签替换为生成的内容。

```
<loadfile
  property="generated.web.xml.fragment"
  srcFile="${generated.fragment.file}"
/>

<copy file="${orig-web-content.dir}/WEB-INF/web.xml"
  toFile="${generated-web-content.dir}/WEB-INF/web.xml"
>
  <filterset>
    <filter token="JSPS_MAP"
      value=" --&gt; ${generated.web.xml.fragment} &lt;!-- "
    />
  </filterset>
</copy> 
```

这种方法的优点是原始 web.xml 文件是完全有效的（标签隐藏在注释中），但可以让您完全控制插入生成的片段的位置和时间。

所以对于 DEV 构建，只需复制`${orig-web-content.dir}/WEB-INF/web.xml`到`${generated-web-content.dir}/WEB-INF/web.xml`而不过滤。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-12-07T11:18:09.930

有其他人注意到的**jasper2 ant 任务。**我想我会提到我发现的其他几个选项。

一个是 cactus 的**webxmlmerge**蚂蚁任务，它使用 org.codehaus.cargo.module.webapp.WebXmlMerger

另一种是使用**JAXB**来操作 web.xml；Sebastien Dionne 的[dtd-schemas-generator](http://kenai.com/projects/sebastiendionne/sources/repository/show/dtd-schemas-generator)演示就是这样做的。虽然不确定许可证是什么。

fwiw 考虑了这些选项后，我想我将使用 ant **XSLT**任务。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-06-30T17:23:15.370

在您的 web.xml 文件中，如果您有标签来指定合并开始和结束的位置，则 addWebXmlMappings 标志将为您正确生成文件。标签是： <!-- JSPC servlet mappings start --> 和 <!-- JSPC servlet mappings end --> 对我的 web.xml 执行此操作后，一切都像魅力一样！（我必须查看 org.apcahe.jasper.JspC 的代码才能了解它是如何实现的）

# deployment - web.xml 和相对路径

> ID：162086
> 
> 赞同：0
> 
> 时间：2008-10-02T12:49:03.840
> 
> 标签：deployment, tomcat, web.xml, descriptor

在 web.xml 中，我将欢迎文件设置为 web.xml 中的 jsp

```
<welcome-file>WEB-INF/index.jsp</welcome-file> 
```

在 index.jsp 中，我然后转发到一个 servlet

```
<% response.sendRedirect(response.encodeRedirectURL("myServlet/")); %> 
```

但是应用程序尝试在以下路径中找到 servlet

```
applicationName/WEB-INF/myServlet 
```

问题是 web-inf 不应该在路径中。如果我将 index.jsp 从 web-inf 中移出，那么问题就来了，但还有其他方法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-10-02T12:55:59.033

据我了解，WEB-INF 是一个特殊文件夹，其中包含 JSP 使用的配置和类，您不应将用于直接服务的代码放入其中。

无论如何，您是否尝试过 /myServlet？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-02T13:00:25.497

```
<% response.sendRedirect(response.encodeRedirectURL("/myServlet/")); %>` 
```

由于 jsp 是从 WEB-INF 目录提供的，因此 servlet url 也从该相对路径解析。添加 / before 将从上下文根中解析 url

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-02T13:00:41.927

您是否尝试过使用绝对路径？

```
response.sendRedirect(response.encodeRedirectURL("/myServlet/")); 
```

# ruby - 为什么 ActiveRecord 的序列化会随机破坏我的数据？

> ID：162088
> 
> 赞同：3
> 
> 时间：2008-10-02T12:49:13.357
> 
> 标签：ruby, activerecord, yaml, serialization

我`serialize`在一个`ActiveRecord`模型中使用将一个`Array`简单的哈希序列化为一个文本数据库字段。我什至使用第二个参数强制反序列化为`Array`s.

```
class Shop < ActiveRecord::Base
  serialize : recipients, Array
end 
```

它似乎工作正常，但经过几次请求后，内容`recipients`变为`HashOfIndifferentAccess`散列而不是数组。这仅在模型重新加载几次后才会发生，并且我无法在测试或控制台中重现它，只能在生产环境中重现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T18:56:05.130

我的一个 Rails 3.1 应用程序中的一些序列化字段也有同样的问题。经过大量故障排除后，我将其缩小到字符编码问题。我无法在本地复制它，因为我使用的是 SQLite，而我的生产环境是在 Postgres 上。

`some_field.force_encoding(Encoding::UTF_8)`在序列化之前尝试应用所有值，看看会发生什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T15:19:36.923

这似乎是您应该能够通过足够的测试在本地重现的东西。查看您的生产数据库和日志，并尝试在本地测试中使用相同的数据。

hashwithindifferentaccess 来自控制器。也许您是直接从控制器中获取数据，而根本没有对其进行按摩。

创建您的页面、控制器和模型保存代码的要点，并更新此问题。根据散列嵌套的深度，您可以在保存之前将 HWIA 散列转换为常规散列。

调试和解决不应该太难。

# macos - Mac 开发入门的最佳方式

> ID：162099
> 
> 赞同：9
> 
> 时间：2008-10-02T12:52:42.770
> 
> 标签：macos

我最近刚拿到我的第一台 Mac。我在 Windows 上做了很多编程，但现在我想进入 Mac 开发。我应该了解哪些语言或应该使用哪些工具来开始 mac 开发？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-10-02T13:02:30.767

[Cocoa(R) Programming for Mac(R) OS X (3rd Edition) by Aaron Hillegass](https://rads.stackoverflow.com/amzn/click/com/0321503619)：

![在此处输入图像描述](https://i.stack.imgur.com/2AHwE.jpg)

很棒的书，作者有很多可信度——苹果公司请他来培训他们的开发人员使用 Cocoa。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-10-02T12:53:44.640

对于桌面应用程序，cocoa+objective-c 是要走的路。XCode 是最好的编辑器。对于 webapps，我会查看 Ruby on Rails 和 Textmate。

如果您已经进行过 Java 开发，那么您也可以继续这样做。Eclipse 会很熟悉。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-10-02T13:32:51.020

我加入了[Mac 开发者网络](http://www.mac-developer-network.com/)，并订阅了那里的许多播客。不是参考思维，您只是一个让您在旅途中保持动力的地方。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-10-02T13:35:06.210

我第二次 Hunterjrj 对[Aaron Hillegass](https://rads.stackoverflow.com/amzn/click/com/0321503619)的书的建议。

我目前正在阅读的另一本书是对 Xcode 3 的精彩介绍，它是 Fritz Anderson 的[Xcode 3 Unleashed](https://rads.stackoverflow.com/amzn/click/com/0321552636)。

苹果的开发网站也有很多编程指南和视频。在 developer.apple.com 上注册。如果您已经拥有 apple.com 帐户（或 iTunes），则可以轻松将其扩展为开发人员会员。请注意，除非您为完整的 ADC 会员付费，否则您不会获得**所有开发者信息。**但是所有 API 文档和编程指南都可以免费获得。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-10-02T13:16:36.350

查看 Apple 的[Mac 开发中心](http://developer.apple.com/mac/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-10-09T22:59:27.977

您来自 Windows 环境吗？如果你这样做，我会推荐 Mono，它是一个 .Net 自由实现或 Java，这两个平台都可以在 windows/osx/linux 中运行良好

如果您只想针对 OSX，那么 Cocoa/Objective-C/XCode 是可行的方法，但我不太确定您会找到多少文档或示例，因为似乎只有一个大型的 OSX 开发工具提供商，那就是与您可能会发现为 Windows 开发的无数开发工具相比，Apple 本身。

当然还有很多其他的选择，记住 OSX 是一个 Unix 操作系统，你可以轻松地使用 Python/Perl/Ruby 和许多其他脚本语言和开发技术进行开发，只要确保知道你要针对哪些平台。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-10-06T20:21:41.590

如果您有 Windows 经验但也想开发 Mac 软件，您可以考虑研究[REALbasic](http://www.realsoftware.com)。它不能让你完全访问 Mac OS X Cocoa 框架，但它可以用来制作一些漂亮的 Mac 应用程序。而且它真的很容易上手。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-10-09T22:19:32.707

您可以尝试将 f-script 和传统的 Cocoa（换句话说，xcode）结合起来。当您想尝试使用 Cocoa API 时，f-script 非常棒，这肯定与您习惯的不同。你越有活力，你学得越快。这就是我的经验。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2011-08-19T06:05:52.023

可可绝对是要走的路。如果您不想为书付费，这些网站会为您提供帮助： [http :](http://cocoadev.com/) [//cocoadevcentral.com/ http://cocoadev.com/](http://cocoadevcentral.com/) [http://oreilly.com/pub/ct/37](http://oreilly.com/pub/ct/37)

# caching - 创建 etag 的最佳方法是什么？

> ID：162105
> 
> 赞同：25
> 
> 时间：2008-10-02T12:54:27.620
> 
> 标签：caching, etag

以编程方式为网页生成 etag 的好方法是什么，是否推荐这种做法？一些网站建议关闭 etag，其他网站建议手动生成它们，还有一些建议保持默认设置处于活动状态 - 这里最好的方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-10-02T15:44:49.580

我建议生成内容的哈希，例如`md5($content)`.
此外，为了防止散列冲突，您可能希望向其中添加内容元素的 ID（如果合适的话）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-10-02T14:17:04.237

当您严重依赖缓存时，ETags 是有意义的。它们是资源（例如 URL）状态的重要指标。

例如，假设您使用*ajax*请求来拉取用户的最新评论，并且您想知道是否有任何新评论。更改 ETag 以*提醒*您的应用程序有新内容是一种更便宜的检查方式。

因为如果 ETag 相同，您可以保留缓存，否则重建它。

ETags 对 RESTful API 也很有意义。

至于生成它，看看[规范](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.19)，我认为你几乎可以做任何你想做的事情。时间戳，哈希，任何对您/您的应用程序有意义的东西。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-05T21:12:09.460

我刚刚启动了 YSlow，它抱怨 Etags，所以我做了一些研究。根据[雅虎博客](http://developer.yahoo.net/blog/archives/2007/07/high_performanc_11.html)（也请参阅评论），问题是默认的 ETags 实现使用文件 inode 编号或 ntfs 修订号或其他同样特定于服务器的东西作为哈希的一部分。这虽然速度很快，但基本上可以防止 2 个不同的服务器提供相同的文件具有相同的 etag，并搞砸浏览器和下游缓存或负载平衡。

先前使用 MD5 哈希的建议是一个很好的建议，尽管您必须防止它本身成为性能问题。这些建议的实施仍然取决于读者，尽管在我看来这是你的框架可能能够为你处理的事情。

对我自己而言，由于我处于一个文件时间戳绰绰有余的简单环境中，所以我只是在 Apache 中使用`FileETag none`我的 .htaccess 文件将它们关闭。这会关闭 YSlow 并且应该使事情回退到文件上的最后修改日期。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-02T16:16:58.100

通常，不鼓励使用的“站点”是 Yahoo，这是因为某些默认 Web 服务器不会自动创建在服务器场中工作的 ETAG。（雅虎声称这是正确和准确的。）

但是，如果您有一个 Web 服务器，那就没问题了。如果没有，您将需要检查您的 Web 服务器如何处理此问题并采取适当的行动。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-10-06T07:37:05.893

木法沙，

Yahoo（和 YSlow）实际上鼓励使用它们，但需要注意的是，自动生成的 ETag 会因服务器而异。

我还不能投票，所以我只会说我同意文件路径和时间戳（或表名 + 主字段值 + 时间戳，如果由 db 内容表示）的哈希的建议。

* * *

## 回答 #6

> 赞同：-5
> 
> 时间：2008-10-02T16:26:53.473

当您在网站生成器前使用某种缓存机制时，ETag 确实会有所帮助。浏览器本身不使用它们，它们听“（如果）修改后”或“年龄”标题结构，afaik。

无论如何，由于其简单的性质，提供带有 ETag 的 http-header 是没有问题的。我听说许多 Web 服务器只是简单地获取文件的位置和文件的时间戳，然后对这些数据进行 md5 哈希处理。

例如，我们使用我们的软件构建了一个简单但有效的 etag。我们软件中的每个“内容单元”（即 html、jpeg、gifs...）都有唯一的 id 和版本号（即 jpeg 的 id 为“17”和版本“2”，这意味着它被更改过一次） . 所以 ETag 就是字符串“id-version”，这里是：“17-2”。对于下一次更改，它将是“17-3”，以便缓存器识别更改，完全加载新内容部分（一次）并将其存储在自己的缓存中。

但是您也可以使用 URL 和时间戳（即文件的时间戳）。

# c# - C# 中的事件

> ID：162112
> 
> 赞同：2
> 
> 时间：2008-10-02T12:56:33.213
> 
> 标签：c#, .net, performance, events

事件慢了多少？我编写了一个流式 XML 解析器（它可以处理开放式和不完整的文档），并且通过删除事件并使用接口来代替我获得了显着的速度提升。

有没有其他人有任何战争故事？

（我们不要在这里打开蠕虫的GC罐，我们都知道它坏了:)）

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2008-10-02T13:06:42.160

事件触发是委托调用，[比虚拟调用慢一点](http://msdn.microsoft.com/en-us/magazine/cc163759.aspx)

[![替代文字](https://i.stack.imgur.com/xExdh.gif)](https://i.stack.imgur.com/xExdh.gif)
[（来源：[microsoft.com](http://i.msdn.microsoft.com/cc163759.fig02(en-us).gif)）]

但是处理订阅者/发布者/观察者/可观察场景的接口比使用事件更痛苦。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-10-02T13:00:33.237

事件实际上只是代表。据我回忆，它们在 2.0 CLR 中变得更快了。我很惊讶用接口替换事件使您的代码显着更快 - 根据我的经验，它们非常快，如果您正在处理 XML，我不会期望事件调用成为瓶颈。

您的代码是否经常订阅和取消订阅事件？您是否有任何迹象表明解析特定文档时进行的事件调用次数？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-02T13:03:40.793

事件肯定比直接的函数调用慢，我不能告诉你到底慢了多少，但很明显。您还可以将代表传递给“中间”立场。.NET 事件系统使用委托，但直接通过委托调用方法与整个事件系统相比仍然更快。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-02T13:05:35.953

与虚拟方法调用相比，委托具有轻微的开销，因为它们是方法列表，因此理论上可以调用多个处理程序。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2008-10-02T13:02:52.967

如果调用中不涉及反射，那么我认为开销可以忽略不计。假设当然可能是错误的。你有一个微型基准来证明这一点吗？

# language-agnostic - 对有序链表集进行排序

> ID：162113
> 
> 赞同：3
> 
> 时间：2008-10-02T12:56:33.293
> 
> 标签：language-agnostic, sorting, linked-list

我正在寻找一个优雅、高性能的解决方案来解决以下问题。

有 256 个链表。

*   每个列表都包含相同类型的对象，其中包含用于定义排序顺序的整数。
*   所有列表中的所有数字都是唯一的
*   每个单独的列表都按这些数字升序排序

你将如何从 256 个原始链表中的所有对象创建一个升序列表？我不想强行使用它，并有其他一些想法，但这似乎是有标准的最佳解决方案的问题之一。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-02T13:00:59.913

您可以使用一个优先级队列来保存 256 个链表中每个链表的“最顶层”项。这个“最顶层”项目是计划插入结果列表的项目。这样，您可以从优先级队列中取出最小的元素，将其插入结果队列，然后将其下一个元素插入优先级队列：

```
# Preprocessing:
result = list.new()
queue = priority_queue.new()

foreach (list in lists):
    queue.push(list.first())

# Main loop:
while (not queue.empty()):
    node = queue.pop()
    result.insert(node)
    if (node.next() != null):
        queue.push(node.next()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-02T13:02:05.837

如果单个列表已经排序，那么它是[合并算法](http://en.wikipedia.org/wiki/Merge_algorithm)的直接应用。简而言之：比较所有头并选择最小的，将其从列表中取出并推入您的输出列表。重复直到所有源列表为空。

编辑：Konrad 使用优先级队列（[堆](http://en.wikipedia.org/wiki/Heap_(data_structure))）是一种更加优雅和可扩展的解决方案，但也许 256 个输入列表太少了，简单的比较可能会更快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-26T04:04:33.640

只需将每个列表与其上方的列表 128 合并即可。（产生 128 个列表）
然后将每个列表与其上方的 64 个列表合并。（产生 64 个列表）
然后将每个列表与其上方的 32 个列表合并。（产生 32 个列表）
然后将每个列表与上面的列表 16 合并。（产生 16 个列表）
然后将每个列表与上面的列表 8 合并。（产生 8 个列表）
然后将每个列表与上面的列表 4 合并。（产生 4 个列表）
然后将每个列表与上面的列表 2 合并。（产生 2 个列表）
然后将每个列表与其上方的列表 1 合并。（导致 1 个列表）
（您可能会为上述内容使用循环）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-26T04:18:05.547

您没有说这些列表有多长，但我假设它们都同时适合 RAM。我会尝试的第一件事是将它们全部附加在一起，并调用我的环境的内置排序例程，我会看看这是否能提供可接受的性能。它很容易实现并且不需要很长时间来测试。如果这不能提供可接受的性能，我会选择 Konrad Rudolph 给出的优先级队列合并。

# .net - .NET 1.1 中的 XMLTextReader

> ID：162123
> 
> 赞同：0
> 
> 时间：2008-10-02T12:59:52.380
> 
> 标签：.net, xml, .net-1.1, xmltextreader

我有一个读取 XML 文件的进程。它使用 XMLTextReader 类来执行此操作，因为它应该是一个快速、仅转发的 XML 解析器/读取器。

对 1 兆字节的测试文件非常有效，但在实时系统中处理 12 兆字节的文件时会完全停止。

除了编写我自己的 XML 阅读器之外，还有其他解决方案吗？这不是世界末日，但如果可能，我更愿意使用可用的标准组件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-02T19:47:16.613

如果问题出在 XmlTextReader 中，我会感到非常惊讶。

如果您花几分钟时间编写一个创建 XmlTextReader 的测试程序并简单地使用 Read() 读取文件中的每个节点，直到它到达文档的末尾，我敢打赌您会发现它放大了您的12mb 文件就像一把热刀穿过黄油。如果我遇到这个问题，这是我会尝试的第一件事。

因为一旦您消除了 XmlTextReader 作为问题的根源，您就可以将注意力集中在实际导致它的原因上 - 这很可能是处理您正在读取的节点的代码，而不是读取节点的代码.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-02T13:15:29.143

[SAXExpat](http://sourceforge.net/project/showfiles.php?group_id=95340)曾经非常好。Expat 是*XML*解析器，几乎是一个参考实现。我记得用它来读取一些通过 TCP 连接发送的同步 XML 文件，有时是非常大的文件（大约 50mb），没有任何问题。那是 3/4 年前，在 .NET 1.1 和非常糟糕的计算机中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-08T13:20:06.183

我不想推荐这个，但如果该软件没有出售或外部，您可以尝试从 Mono 引入阅读器，看看是否能解决您的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-02T13:05:48.090

我过去也遇到过类似的性能问题。我将其追溯到尝试远程解决 DTD/模式。你在做这个吗？如果可能，请尝试将 XmlTextReader.XmlResolver 设置为 null。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-02T13:25:46.030

取决于你如何处理你从读者那里得到的东西。您是将其放入 XML DOM 还是任何对象模型中？无论您使用什么语言或库，这都会对内存造成很大影响。

可能是1.1有缺陷，想试试2.0？我在 1.1 天从未使用过 XmlTextReader，所以我不能保证它：但从 2.0 开始它是完美的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-10-03T01:48:28.490

只是一个想法。您是否在整个过程中打开数据库事务？如果是这样，请在没有事务的情况下尝试它，或者至少在此过程中更频繁地提交。

# triggers - Perforce触发器拒绝提交未更改的文件？

> ID：162142
> 
> 赞同：7
> 
> 时间：2008-10-02T13:05:35.703
> 
> 标签：triggers, perforce

Perforce 允许人们签入未更改的文件。为什么任何版本控制系统都允许这样做超出了我的范围，但这是另一个问题的主题。我想创建一个触发器，拒绝提交未更改的文件。但是，我没有使用 Perforce 触发器的经验。从我读到的内容来看，我猜这将是一个“更改内容”触发器，因为提交的文件必须与它们将要替换的相应的头部修订进行比较。我需要遍历传入的文件并确保它们确实都发生了变化。问题是，我不知道该怎么做。

任何有 Perforce 触发经验的人都可以提供一个例子或至少为我指明正确的方向吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-10-02T14:25:23.827

在最新版本的 perforce 中，允许客户端设置阻止提交未更改的文件：

```
 SubmitOptions:  Flags to change submit behaviour.

            submitunchanged           All open files are submitted
            submitunchanged+reopen    (default).

            revertunchanged           Files that have content or type
            revertunchanged+reopen    changes are submitted. Unchanged
                                      files are reverted.

            leaveunchanged            Files that have content or type
            leaveunchanged+reopen     changes are submitted. Unchanged
                                      files are moved to the default
                                      changelist.

                          +reopen     appended to the submit option flag
                                      will cause submitted files to be
                                      reopened on the default changelist. 
```

这可能是一种调查用户是否只是因为冷漠而检查未更改文件的途径。

编辑：

鉴于您想要强制执行限制而不管用户的工作区设置如何，那么您将需要一个触发器，如其他答案中所建议的那样。

您需要查看[Perforce 的文档](http://www.perforce.com/perforce/doc.current/manuals/cmdref/triggers.html)以了解详细信息，但您需要更改内容触发器。

您可能希望传递 %user% 以及 %change% 以及可能的其他变量，以便您可以将昂贵的操作限制为问题用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-02T22:41:49.780

您需要编写一个更改内容触发器。这些触发器在文件传输到服务器之后、提交到数据库之前运行。根据 perforce 文档，您可以使用类似于以下的命令

```
p4 diff //depot/path/...@=<change> 
```

在更改内容触发器中，@=（其中更改是发送到触发器的更改列表编号）将为您提供已提交文件的内容。如果您正在寻找一种检查服务器版本的方法，您可以执行类似的操作

```
p4 diff -sr //...@=<change> 
```

-sr 命令将报告打开且与当前 depot 内容相同的文件。由于这些文件尚未提交，我将假设您实际上将获得一个文件列表，这些文件的内容已传输到服务器与软件仓库中的当前头版本相同。如果 p4 diff -sr 返回任何相同的文件，则返回非零退出代码，提交将暂停，用户将不得不手动恢复其未更改的文件。

我认为您不想通过为他进行还原来实际修改更改列表的内容。这听起来太危险了。

请注意，您可以用任何有意义的语言编写触发器（如之前的海报所建议的那样）。我确实认为这种触发器将是相当重量级的。本质上，您将对所有用户提交的所有内容实施差异化，以便让一个开发人员步入一致。也许这是一个不错的代价，但根据用户数量和他们的变更列表（和文件）的大小，这种触发器可能需要很长时间才能运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-30T13:38:20.797

您可以编辑他的工作区（假设您拥有正确的权限），而不是使用触发器，以默认使用避免这种情况的提交策略。默认情况下（同样我不知道为什么）peforce 将提交所有选定的文件，即使未更改，但可以更改此行为。打开他的工作区，并将 SubmitOptions 下拉设置为“revertunchanged”，这将恢复更改列表中未更改的所有文件，或“leaveunchanged”，这将使它们保持签出但不提交。

如果他希望只查看 On Submit 下拉菜单，也可以在单个更改列表提交上执行此操作。

我们在我们的环境中遇到了这个问题，但是一旦我向违规者解释了发生了什么以及更改默认行为是多么容易，他们就毫无问题地更改了默认行为。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-02T13:33:49.770

如果您查看 Perforce 中的 Triggers 表，您会发现触发器只不过是在某种事件发生时被调用的脚本。在您的情况下，会触发 change-content 事件。

您有多种选择来编写与 Perforce 交互的脚本。[Perforce 下载页面](http://www.perforce.com/perforce/loadsupp.html)包含许多广泛使用的语言的库和模块。任何这些都将帮助您并大大简化您需要做的事情。此外，查看[Perforce 文档页面](http://www.perforce.com/perforce/technical.html)并下载管理员指南。它将解释如何创建触发器等。

基本上，您需要编写一个脚本，该脚本将从正在提交的更改列表中获取信息，并为其中的每个文件对服务器运行“diff”命令。如果你发现一个没有变化的文件，你需要使提交无效。

您最喜欢的语言的 Perforce 模块和管理员指南将为您提供所需的所有答案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-12-19T20:50:04.673

下面的脚本是在 Linux 中使用 perl 脚本完成的。我相信您可以根据需要在 Windows 中调整它并使用 Perl 以外的脚本语言。

作为管理员用户，键入 `p4 triggers`。

`Triggers:`在脚本行下添加它。

`Trigger_name change-content //... "/<path_to_trigger_script>/<script_name> %changelist% %serverhost% %serverport% %user%"`

`Trigger_name`是任意的。这`//...`意味着您的所有版本控制文件，但您可以根据需要对其进行修改。周围的任何内容`%`都是 Perforce 独有的特殊变量名，这些将是您脚本的参数。这些应该是你所需要的。请注意，周围的任何东西`<>`都是可变的，并且取决于您的环境。

现在，对于脚本本身。这是我写的。

```
#!/usr/bin/perl

# ----- CHECK 1 : Make sure files NOT identical

# get variables passed in through triggers call 'p4 triggers'
$ChangeNum = $ARGV[0]; #change number
$Server = $ARGV[1];
$Port = $ARGV[2];
$User = $ARGV[3];
$p4 = "<path_to_p4_exec>/p4 -p $Port ";
# get list of files opened under the submitted changelist
@files = `$p4 opened -a -c $ChangeNum | cut -f1 -d"#"`;

# go through each file and compare to predecessor
# although workspace should be configured to not submit unchanged files
# this is an additional check
foreach $file (@files)
{
   chomp($file);
   # get sum of depot file, the #head version
   $depotSum = `$p4 print -q $file\#head | sum`;
   # get sum of the recently submitted file, use @=$ChangeNum to do this
   $clientSum = `$p4 print -q $file\@=$ChangeNum | sum`;

   chomp $depotSum;
   chomp $clientSum;
   # if 2 sums are same, issue error
   if ( $depotSum eq $clientSum )
   {
      # make sure this file is opened for edit and not for add/delete
      if ( `$p4 describe $ChangeNum | grep "edit"` )
      {
         printf "\nFile $file identical to predecessor!";
         exit( 1 );
      }
   }

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-05-11T23:16:06.680

我们有一个触发脚本，它首先检查客户端规范的 SubmitOptions 是否存在 submitunchanged。如果不存在，则触发脚本可以退出，因为用户无法提交未更改的文件。否则，我们会检查所有编辑操作且文件类型未更改的文件。我们将此类文件与以前的版本进行比较。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-05-12T01:18:38.817

将此添加到您的`triggers`表中：

```
Triggers:
    myTrigger form-in client "sed -i -e s/submitunchanged/leaveunchanged/ %formfile%" 
```

这将阻止任何人使用该`submitunchanged`选项保存客户端，从而使他们难以提交未更改的文件。

# email - 避免被网络邮件公司阻止以进行大量/批量电子邮件？

> ID：162149
> 
> 赞同：16
> 
> 时间：2008-10-02T13:06:05.470
> 
> 标签：email, bulk, webmail, massmail, sendgrid

我们公司每天发送大量电子邮件，并计划在未来发送更多。（千）也时不时地有成千上万的群发邮件。

任何人都有使用hotmail、yahoo（web.de、gmx.net）和类似的网络邮件公司阻止您的电子邮件的经验，因为“一段时间内来自同一来源的太多”已发送给他们？

可以做些什么呢？在一整天/一夜之间传播电子邮件？以什么速度？

（我们正在谈论法律电子邮件只是为了确保......）

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2008-10-02T13:40:19.053

您想查看以下内容：

*   在您的外发电子邮件中添加一个大标题 ( `Precedence: bulk`)
*   调查[SPF](http://en.wikipedia.org/wiki/Sender_Policy_Framework)
*   查看[发件人ID](http://en.wikipedia.org/wiki/SenderID)
*   查看[DomainKeys](http://antispam.yahoo.com/domainkeys)或[DKIM](http://www.dkim.org/)
*   调查[CAN-SPAM 法案](http://www.business.ftc.gov/documents/bus61-can-spam-act-compliance-guide-business)
*   设置**和处理**滥用电子邮件@
*   与重要的供应商建立关系
*   监控通常的垃圾邮件列表，当你在他们的时候与他们一起工作

此外，大多数提供商都有页面设置，他们在其中解释他们希望“批量”电子邮件在您发送给他们的客户时的外观。该一般包括对双重选择加入等的要求。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-10-02T13:12:20.040

如果你想这样做，你就会接触到垃圾邮件发送者使用的一些相同技术。在白天或晚上分发电子邮件可能是一种方法。我认为没有人知道这样做的“正确”费率，因为每个邮件提供商都会有所不同，而且他们可能会随着时间的推移进行调整。您可以尝试将发送给单个提供商的电子邮件分散开。例如，如果您有很多来自 hotmail.com 的邮件，请不要同时发送所有邮件。

也许为您的应用程序查看拉媒体而不是推送媒体是个好主意。例如，您可以将群发邮件的内容放在网站上，并通过 RSS 提要通知感兴趣的读者。这具有较低的刺激潜在客户的风险。而且您的公司因发送垃圾邮件而被起诉的风险较低。

* * *

你是对的，并不是所有用户都可以访问 rss。但是，因为您可能需要为无法阅读 html 邮件的人创建一个替代邮件的网页。您不妨为这些页面提供一个 RSS 提要，作为想要使用它的用户的替代方案。这可能会减少邮件的数量，足以让您的工作更轻松一些。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-10-02T13:13:12.817

尝试使用像[AuthSMTP](http://www.authsmtp.com/)这样的服务。通常，主要的免费邮件提供商（如 Yahoo、Gmail）会限制您每天可以发送的电子邮件数量，而接收端的人最终可能会将其报告为垃圾邮件。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-10-02T13:23:21.200

我必须每周为优惠券网站发送数千个（全部选择加入），我只是计算出在给定时间段内有多少秒需要发送它们，并生成介于 0 和那个之间的随机秒数号，将随机数添加到我队列中的“SendAt”日期。

不完美，但它有效。我同意最终这是一个有缺陷的概念，如果您真的必须每天发送数千封邮件，您将需要联系邮件服务。 [http://www.streamsend.com/](http://www.streamsend.com/)

顺便说一句，您需要非常小心不要被添加到任何黑名单 [http://www.mxtoolbox.com/blacklists.aspx](http://www.mxtoolbox.com/blacklists.aspx)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-10-02T13:27:10.503

这些提供商中的大多数都有某种形式的“白名单”。直接联系他们，看看他们的要求被列入名单。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-05-22T02:49:31.013

这里有一些关于批量电子邮件标题的好建议，比如经常联系使用的公司。

[http://old.openspf.org/esps.html](http://old.openspf.org/esps.html)

要添加到最不可能将您列入黑名单的良好做法列表中，

如果您遵循每封电子邮件上的双重选择/取消订阅链接/处理滥用报告的指南，这将改善收件人不会将您的电子邮件标记为垃圾邮件 - 因为如果 gmail/yahoo/hotmail 中有足够多的人将您的电子邮件标记为垃圾邮件，它将即使遵循其他良好做法，有时也会默认进入垃圾邮件文件夹。因此，双重选择可确保收件人仅收到他们期望的电子邮件，从而减少垃圾邮件报告的机会。

并且添加到托管电子邮件队列的想法 - 不要只是在您的 CPU/内存允许的情况下以不智能的速度处理和发送电子邮件，创建您自己的队列系统，因为其他人建议随着时间的推移涓涓细流并打乱您的电子邮件提供商的顺序发送到（@gmail.com、@yahoo.com 等）。

# c# - C#，从 TextBox 和 TextArea 获取其他应用程序文本？

> ID：162154
> 
> 赞同：2
> 
> 时间：2008-10-02T13:07:25.153
> 
> 标签：c#, textbox, hook

早上好，

无论我是什么应用程序，我都希望能够分析我正在编写的文本。例如，如果我在这里，在此 TextArea 中键入，我希望能够获取文本，就像我在 Outlook 的主题文本框中一样。

我搜索谷歌没有成功，可能是因为它需要 Win32API 调用。

目标是开始使用多种算法，如“布隆过滤器”和马尔可夫链。

是否可以使用 C# 以及如何开始？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-02T13:11:27.500

关于构建扑克机器人的 CodingTheWheels 系列详细介绍了如何从其他应用程序捕获窗口事件。它不完全是您想要的，但它有一些很好的信息。

[http://www.codingthewheel.com/archives/how-i-built-a-working-poker-bot](http://www.codingthewheel.com/archives/how-i-built-a-working-poker-bot)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-02T13:24:37.500

即使对于非托管进程，该工具也能正常工作。

[运行时对象编辑器](http://www.codeproject.com/KB/cs/RuntimeObjectEditor.aspx)

# javascript - JavaScript：客户端与服务器端验证

> ID：162159
> 
> 赞同：199
> 
> 时间：2008-10-02T13:09:15.040
> 
> 标签：javascript, security, validation

客户端或服务器端验证哪个更好？

在我们的情况下，我们正在使用

*   jQuery 和 MVC。
*   在我们的视图和控制器之间传递的 JSON 数据。

我所做的很多验证都是在用户输入数据时验证数据。例如，我使用该`keypress`事件来阻止文本框中的字母，设置最大字符数以及一个数字在一个范围内。

我想更好的问题是，在客户端进行服务器端验证有什么好处吗？

* * *

真棒回答大家。我们拥有的网站是受密码保护的，并且用户群很小（<50）。如果他们没有运行 JavaScript，我们将发送 ninjas。但是，如果我们要为每个人设计一个网站，我会同意双方都进行验证。

* * *

## 回答 #1

> 赞同：375
> 
> 时间：2008-10-02T14:26:28.333

正如其他人所说，你应该两者都做。原因如下：

## 客户端

您希望首先在客户端验证输入，因为您可以为**普通用户提供更好的反馈**。例如，如果他们输入了无效的电子邮件地址并移至下一个字段，您可以立即显示错误消息。这样，用户可以在提交表单**之前更正每个字段。**

如果您只在服务器上进行验证，他们必须提交表单、收到错误消息并尝试找出问题。

（这种痛苦可以通过让服务器重新渲染表单并填写用户的原始输入来缓解，但客户端验证仍然更快。）

## 服务器端

您希望在服务器端进行验证，因为您可以**防范恶意用户**，他们可以轻松绕过您的 JavaScript 并向服务器提交危险输入。

信任你的 UI 是非常危险的。**他们不仅可以滥用您的 UI，而且他们可能根本不使用您的 UI，甚至是浏览器**。如果用户手动编辑 URL，或者运行他们自己的 Javascript，或者使用其他工具调整他们的 HTTP 请求怎么办？例如，如果他们从脚本发送自定义 HTTP 请求`curl`或从脚本发送自定义 HTTP 请求怎么办？

（*这不是理论上的；例如，我在一个旅行搜索引擎上工作，该引擎将用户的搜索重新提交给许多合作航空公司、巴士公司等，`POST`就像用户填写了每个公司的搜索表单一样发送请求，然后收集和排序所有的结果。那些公司的表单 JS 从未执行过，对我们来说至关重要的是，他们在返回的 HTML 中提供错误消息。当然，API 会很好，但这是我们必须做的。*）

不允许这样做不仅从安全角度来看是幼稚的，而且也是不标准的：应该允许客户端以他们希望的任何方式发送 HTTP，并且您应该正确响应。这包括验证。

服务器端验证对于**兼容性**也很重要- 并非所有用户，即使他们使用浏览器，都会启用 JavaScript。

## 附录 - 2016 年 12 月

有些验证**甚至无法在服务器端应用程序代码中正确完成，而在客户端代码中则完全不可能**，因为它们取决于数据库的当前状态。例如，“没有其他人注册该用户名”，或“您评论的博客文章仍然存在”，或“现有预订没有与您请求的日期重叠”，或“您的帐户余额仍有足够的金额支付该购买。” **只有数据库才能可靠地验证依赖于相关数据的数据。**开发人员[经常搞砸这个](http://www.bailis.org/papers/feral-sigmod2015.pdf)，但[PostgreSQL 提供了一些很好的解决方案](http://nathanmlong.com/2016/01/protect-your-data-with-postgresql-constraints/)。

* * *

## 回答 #2

> 赞同：82
> 
> 时间：2008-10-02T13:11:02.867

是的，总是可以完全绕过客户端验证。您需要同时做到这一点，客户端以提供更好的用户体验，服务器端以确保您获得的输入实际上是经过验证的，而不仅仅是假设由客户端验证。

* * *

## 回答 #3

> 赞同：45
> 
> 时间：2008-10-02T13:25:07.640

我只是要重复一遍，因为它非常重要：

> **始终在服务器上验证**

并添加 JavaScript 以提高用户响应能力。

* * *

## 回答 #4

> 赞同：32
> 
> 时间：2008-10-02T13:12:45.000

与客户端验证相比，进行服务器端验证的好处是可以绕过/操纵客户端验证：

*   最终用户可以关闭 javascript
*   甚至没有使用您的网站的人可以将数据直接发送到您的服务器，并使用专门设计的自定义应用程序
*   您页面上的 Javascript 错误（由多种原因引起）可能会导致您的部分验证运行，但不是全部

简而言之 - 始终，始终验证服务器端，然后将客户端验证视为增加的“额外”，以增强最终用户体验。

* * *

## 回答 #5

> 赞同：18
> 
> 时间：2008-10-02T13:13:17.683

**您*必须始终*在服务器上进行验证。**

在客户端进行验证对用户来说也很好，但完全不安全。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2013-02-26T11:54:36.123

好吧，我仍然找到一些空间来回答。

除了 Rob 和 Nathan 的回答之外，我还要补充一点，客户端验证很重要。当您在 Web 表单上应用验证时，您必须遵循以下准则：

### 客户端

1.  必须使用客户端验证来过滤来自您网站上真实用户的真实请求。
2.  应该使用客户端验证来减少服务器端处理期间可能发生的错误。
3.  应该使用客户端验证来最小化服务器端的往返行程，以便您节省带宽和每个用户的请求。

### 服务器端

1.  您不应该假设在客户端成功完成的验证是 100% 完美的。即使它为少于 50 个用户提供服务。您永远不知道您的哪个用户/员工变成了“邪恶”并在知道您没有适当的验证的情况下进行一些有害的活动。
2.  即使它在验证电子邮件地址、电话号码或检查某些有效输入方面非常完美，它也可能包含非常有害的数据。无论正确还是错误，都需要在服务器端进行过滤。
3.  如果绕过客户端验证，您的服务器端验证会帮助您避免对服务器端处理造成任何潜在损害。最近，我们已经听到了很多关于 SQL 注入和其他类型的技术的故事，这些技术可能会被应用以获取一些邪恶的好处。

这两种类型的验证在各自的范围内都扮演着重要的角色，但最强大的是服务器端。如果您在一个时间点收到 10k 个用户，那么您肯定会最终过滤到您的网络服务器的请求数量。如果您发现有一个错误，例如无效的电子邮件地址，那么他们会再次发回表单并要求您的用户更正它，这肯定会占用您的服务器资源和带宽。所以最好你应用javascript验证。如果 javascript 被禁用，那么您的服务器端验证将得到拯救，我敢打赌，只有少数用户可能会意外禁用它，因为 99.99% 的网站使用 javascript，并且它已经在所有现代浏览器中默认启用。

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2013-04-27T20:30:07.123

您可以进行服务器端验证并将每个字段的验证结果发送回 JSON 对象，将客户端 Javascript 保持在最低限度（仅显示结果）并且仍然具有用户友好的体验，而无需在客户端和服务器上重复自己。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2013-08-01T15:13:54.593

客户端应通过[HTML5 输入类型](http://www.w3schools.com/html/html5_form_input_types.asp)和[模式属性](http://www.w3schools.com/tags/att_input_pattern.asp)使用基本验证，因为这些仅用于渐进式增强以获得更好的用户体验（即使 < IE9 和 safari 不支持它们，但我们不依赖它们）。但是主要的验证应该发生在服务器端..

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2013-11-12T20:04:51.550

我建议同时实施客户端和服务器验证，它可以使项目更加安全......如果我必须选择一个，我将使用服务器端验证。

您可以在这里找到一些相关信息 [https://web.archive.org/web/20131210085944/http://www.webexpertlabs.com/server-side-form-validation-using-regular-expression/](https://web.archive.org/web/20131210085944/http://www.webexpertlabs.com/server-side-form-validation-using-regular-expression/)

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2015-11-20T13:03:19.890

我遇到了一个有趣的链接，它区分了**严重的、系统的、随机的错误。**

`Client-Side validation`非常适合防止严重和随机错误。通常是任何输入的最大长度。不要模仿服务器端的验证规则；提供您自己的总的经验法则验证规则（例如，客户端 200 个字符；`n`服务器端的特定字符少于 200 个，由强大的业务规则决定）。

`Server-side validation`非常适合防止系统错误；它将执行业务规则。

在我参与的一个项目中，验证是通过 ajax 请求在服务器上完成的。在客户端上，我相应地显示错误消息。

进一步阅读：严重的、系统的、随机的错误：

[https://answers.yahoo.com/question/index?qid=20080918203131AAEt6GO](https://answers.yahoo.com/question/index?qid=20080918203131AAEt6GO)

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2013-10-03T21:10:48.427

JavaScript 可以在运行时修改。

我建议在服务器上创建验证结构并与客户端共享它的模式。

您需要在两端使用单独的验证逻辑，例如：

`"required"``inputs`客户端属性

`field.length > 0`服务器端。

但是使用相同的验证规范将消除两端镜像验证的一些冗余（和错误）。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2019-04-24T12:44:06.487

客户端数据验证对于更好的用户体验很有用：例如，我是一个错误地输入了他的电子邮件地址的用户，不应该等到他的请求被远程服务器处理后才知道他所做的错字。

尽管如此，由于攻击者可以绕过客户端验证（甚至可能根本不使用浏览器），因此需要服务器端验证，并且必须是保护后端免受恶意用户攻击的真正大门。

* * *

## 回答 #13

> 赞同：-3
> 
> 时间：2008-10-02T13:11:45.173

如果你在做光照验证，最好在客户端上做。它将节省网络流量，这将有助于您的服务器更好地执行。如果它复杂的验证涉及从数据库或其他东西中提取数据，例如密码，那么最好在可以安全检查数据的服务器上进行。

# wix - 使用 WiX 注册 COM 服务器

> ID：162163
> 
> 赞同：4
> 
> 时间：2008-10-02T13:09:42.357
> 
> 标签：wix, windows-installer, installation

我一直在尝试确定使用 WiX 注册 COM 服务器以创建 Windows Installer 包的最佳案例解决方案，但我正在苦苦挣扎。

在这篇[部署工程存档：HOWTO：将 Regsvr32.exe 与 WIX 一起使用](http://blog.deploymentengineering.com/2008/09/howto-use-regsvr32exe-with-wix.html)的帖子中，有一个公开请求，要求“设置警察”通过 exe 自定义操作来打击使用 regsvr32。`regsvr32`我知道使用它向系统注册而不是向用户注册的弊端，但我还记得`OleSelfRegister`可能有来自微软支持公告的问题（抱歉，找不到链接） - 我相信他们建议使用`regsvr32`.

有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-10-02T13:42:58.143

阅读“不要使用 SelfReg 和 TypeLib 表”：

[https://msdn.microsoft.com/en-us/library/bb204770#no_selfreg](https://msdn.microsoft.com/en-us/library/bb204770#no_selfreg)

对于 WiX，请查看架构参考中的*Component元素：*

[http://wixtoolset.org/documentation/manual/v3/xsd/wix/component.html](http://wixtoolset.org/documentation/manual/v3/xsd/wix/component.html)

注意某些子元素，例如*AppId*、*Class*、*ProgId*、*Registry*等。正确的技术是用于`COM extraction`反映注册信息并将其以声明方式发送到您的安装程序中，以便 MSI 可以为您处理它，而不会退出进程到某些`DllRegisterServer()`可能失败的代码（如 ），也不会提供 MSI 对足迹的洞察力从维修和广告的角度来看该组件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-11-05T14:07:17.487

Wix 包含一个工具“Tallow”。您可以使用它自动生成正确的注册表项。然后你只需配置你的 wix 安装来编写这些条目。不应使用 Selfreg。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-10T16:39:57.730

正如@Trampster 所指出的，heat.exe 不能很好地从 COM 服务器收集注册表项。我试过了，但结果不完整。

相反，按照[*Monitor Registry Accesses (InstallSite Tools: Monitoring)*](http://www.installsite.org/pages/en/tt_analyze.htm#registrar)的建议，我使用了 InstallShield RegSpyUI。据推测，这与 Installshield v7 及更高版本一起提供，包括评估版本。此信息可能已过时；我可以确认它**没有**随 VS2013 附带的几乎没用的 Installshield LE 提供。

幸运的是，我确实有一份 InstallShield 2010 的副本，而且 RegSpyUI 确实提供了这个副本。

无论如何，RegSpyUI 使用起来很容易：将其指向 COM .exe，将注册表信息提取到 .reg 文件中。然后使用热量将其收集到一个 .wxs 文件中，您可以将其添加到您的 Wix 项目中

`heat reg <some.reg> -gg -o <some.wxs>`

然后只需修改任何指向 COM .exe 位置的硬编码路径，以便它们反映预期的安装文件夹。

例如，如果 RegSpyUI+heat 创建的 .wxs 文件有这样的内容

```
<Fragment>
    <DirectoryRef Id="TARGETDIR">
        <Component Id="blah" Guid="{xxxxxxxxxxxxxxxxxxxxxxxxx}" KeyPath="yes">
            <RegistryKey Key="TypeLib\{xxxxxxxxxxxxxxxxxxxxxx}\4.1\0\win32" Root="HKCR">
                <RegistryValue Value="C:\Users\you\projects\MyProject\dependencies\installation\COMFOO.exe" Type="string" />
            </RegistryKey>
        </Component>
    </DirectoryRef>
</Fragment> 
```

并且您正在您的主 wix 文件中安装到

```
<Directory Id="TARGETDIR" Name="SourceDir">
        <Directory Id="ProgramFilesFolder" Name="PFiles">
            <Directory Id="COMPANY" Name="My Company">
                <!--This is the actual installation folder-->
                <Directory Name="MyProduct" Id="MYPRODUCT"> 
```

然后只需将 RegistryValue@value 路径编辑为 ..." `[MYPRODUCT]\COMFOO.exe`"

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-28T17:16:13.677

这样做只有一个缺点：使用 heat.exe 注册的 WiX Com 不适用于 .exe COM 服务器。InstallShield 及其工具似乎支持它，但 RegSpyUI 只是一种 UI 工具，不能在我的构建机器上运行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-01T15:12:24.333

试试这个：

1.  创建一个新的 .NET 项目
2.  将项目引用添加到要收集其 wxs 的候选 COM dll 或 OOP exe
3.  搜索文件`Interop.candidate.dll`（在`obj\debug`文件夹中）
4.  在您刚刚找到的互操作 dll 上运行 WiX Heat 工具。

# mysql - MySQL 服务器在 XAMPP 中消失了

> ID：162172
> 
> 赞同：0
> 
> 时间：2008-10-02T13:11:27.500
> 
> 标签：mysql, xampp, redhat

我正在尝试在 Red Hat Enterprise Edition 中安装 xampp 1.6.7。我按照安装说明进行操作，然后使用命令启动堆栈

```
sudo /opt/lampp/lampp start 
```

我得到了通常的回应

```
XAMPP: Starting Apache with SSL (and PHP5)...
XAMPP: Starting MySQL...
XAMPP: Starting ProFTPD...
XAMPP for Linux started. 
```

但是当我检查堆栈 MySQL 未运行组件的状态时，我得到：

```
Version: XAMPP for Linux 1.5.5
Apache is running.
MySQL is not running.
ProFTPD is running. 
```

这并不总是立即发生。有时 MySQL 在崩溃之前运行了一段时间。我检查了日志并没有发现任何东西。

编辑：

mysql日志说

```
081002 10:41:22  mysqld started
libgcc_s.so.1 must be installed for pthread_cancel to work
081002 10:41:24  mysqld ended 
```

mysql状态 说：

```
[root@localhost lampp]# bin/mysql status
ERROR 2002 (HY000): Can't connect to local MySQL server through socket '/opt/lampp/var/mysql/mysql.sock' (2) 
```

和ps -ef | grep mysql 什么也没产生

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-02T13:31:02.693

当 mysqld*崩溃*时（我认为它只是关闭了），您可能需要进行配置`log-error`才能`my.cnf`看到任何真正有用的东西。我不确定 xampp 是如何设置的，但一个简单的`find / -name "my.cnf"`应该指向该文件的位置。

**编辑**

你想安装 libgcc。它应该作为您平台的 RPM 提供。让我知道这是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-02T13:22:20.640

做什么

```
mysql status 
```

和

```
ps aux | grep mysql 
```

说？

日志片段也可能有所帮助。

# php - 在 PHP 中读取非常大的文件

> ID：162176
> 
> 赞同：28
> 
> 时间：2008-10-02T13:11:45.953
> 
> 标签：php, file, large-files

`fopen`当我尝试在`PHP`. `A 6 meg file`让它窒息，尽管周围较小的文件`100k`就可以了。我读过有时需要`PHP`使用`-D_FILE_OFFSET_BITS=64`标志重新编译才能读取超过 20 gig 的文件或一些荒谬的文件，但我不应该对 6 meg 文件没有问题吗？最终，我们将要读取大约 100 兆的文件，如果能够打开它们然后使用 fgets 逐行读取它们会很好，因为我可以处理较小的文件。

你有什么技巧/解决方案来读取和执行非常大的文件的操作`PHP`？

更新：这是一个在我的 6 meg 文件上失败的简单代码块的示例 - PHP 似乎没有抛出错误，它只是返回 false。也许我在做一些非常愚蠢的事情？

```
$rawfile = "mediumfile.csv";

if($file = fopen($rawfile, "r")){  
  fclose($file);
} else {
  echo "fail!";
} 
```

另一个更新：感谢大家的帮助，事实证明这确实是一件非常愚蠢的事情——权限问题。当较大的文件没有时，我的小文件莫名其妙地具有读取权限。嗬！

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2008-10-02T13:29:17.193

您确定这`fopen`是失败而不是脚本的超时设置吗？默认值通常约为 30 秒左右，如果您的文件读取时间比读取时间长，则可能会导致问题。

要考虑的另一件事可能是脚本的内存限制 - 将文件读入数组可能会超出此限制，因此请检查错误日志以获取内存警告。

如果以上都不是您的问题，您可能会考虑使用[`fgets`](http://ie.php.net/fgets)逐行读取文件，随时处理。

```
$handle = fopen("/tmp/uploadfile.txt", "r") or die("Couldn't get handle");
if ($handle) {
    while (!feof($handle)) {
        $buffer = fgets($handle, 4096);
        // Process buffer here..
    }
    fclose($handle);
} 
```

**编辑**

> PHP似乎没有抛出错误，它只是返回false。

更正的路径`$rawfile`是否相对于脚本运行的位置？也许尝试在此处为文件名设置绝对路径。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-10-07T20:17:25.143

使用 1.3GB 文件和 9.5GB 文件进行了 2 次测试。

**1.3GB**

**使用`fopen()`**

此过程使用 15555 毫秒进行计算。

它在系统调用中花费了 169 毫秒。

**使用`file()`**

此过程使用 6983 毫秒进行计算。

它在系统调用中花费了 4469 毫秒。

**9.5 GB**

**使用`fopen()`**

此过程使用 113559 毫秒进行计算。

它在系统调用中花费了 2532 毫秒。

**使用`file()`**

此过程使用 8221 毫秒进行计算。

它在系统调用中花费了 7998 毫秒。

似乎`file()`更快。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-02-15T07:45:20.673

•`fgets()`直到文本文件超过 20 MBytes 并且解析速度大大降低之前，该功能都很好。

• 该`file_ get_contents()`函数在 40 MBytes 之前给出了良好的结果，在 100 MBytes 之前给出了可接受的结果，但是**`file_get_contents()`将整个文件加载到内存中**，因此它不可扩展。

• 该`file()`函数对于大文本文件是灾难性的，因为该函数创建一个包含每一行文本的数组，因此该数组存储在内存中，并且使用的内存更大。
实际上，我只能设法解析一个 200 MB 的文件，`memory_limit`设置为 2 GB，这对于我打算解析的 1+ GB 文件是不合适的。

当你必须解析大于 1 GB 的文件并且解析时间超过 15 秒并且你想避免将整个文件加载到内存中时，你必须找到另一种方法。

我的解决方案是以**任意小块解析数据**。代码是：

```
$filesize = get_file_size($file);
$fp = @fopen($file, "r");
$chunk_size = (1<<24); // 16MB arbitrary
$position = 0;

// if handle $fp to file was created, go ahead
if ($fp) {
   while(!feof($fp)){
      // move pointer to $position in file
      fseek($fp, $position);

      // take a slice of $chunk_size bytes
      $chunk = fread($fp,$chunk_size);

      // searching the end of last full text line (or get remaining chunk)
      if ( !($last_lf_pos = strrpos($chunk, "\n")) ) $last_lf_pos = mb_strlen($chunk);

      // $buffer will contain full lines of text
      // starting from $position to $last_lf_pos
      $buffer = mb_substr($chunk,0,$last_lf_pos);

      ////////////////////////////////////////////////////
      //// ... DO SOMETHING WITH THIS BUFFER HERE ... ////
      ////////////////////////////////////////////////////

      // Move $position
      $position += $last_lf_pos;

      // if remaining is less than $chunk_size, make $chunk_size equal remaining
      if(($position+$chunk_size) > $filesize) $chunk_size = $filesize-$position;
      $buffer = NULL;
   }
   fclose($fp);
} 
```

使用的内存只有`$chunk_size`，速度略低于用 获得的`file_ get_contents()`。我认为 PHP Group 应该使用我的方法来优化它的解析功能。

*)在*[这里](https://stackoverflow.com/a/54592081/7725536)**找到`get_file_size()`函数。*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-02T13:16:57.707

如果你只想输出文件，你可以尝试使用 readfile 函数。

如果不是这样——也许你应该考虑一下应用程序的设计，为什么要在 Web 请求上打开这么大的文件？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-10-02T13:21:46.617

我使用 fopen 打开视频文件进行流式传输，使用 php 脚本作为视频流式传输服务器，我对大小超过 50/60 MB 的文件没有任何问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-10-02T14:13:05.947

如果问题是由达到内存限制引起的，您可以尝试将其设置为更高的值（这取决于 php 的配置是否有效）。

这将内存限制设置为 12 Mb

```
ini\_set("memory_limit","12M"); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-08-04T16:34:36.460

对我来说，`fopen()`文件超过 1mb 的速度非常慢，`file()`但速度要快得多。

只是尝试一次读取第 100 行并创建批量插入，`fopen()`需要 37 秒而不是`file()`4 秒。必须是`string->array`内置的那一步`file()`

我会尝试所有文件处理选项，看看哪个最适合您的应用程序。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2008-10-02T13:28:44.387

你试过 file() 吗？

[http://is2.php.net/manual/en/function.file.php](http://is2.php.net/manual/en/function.file.php)

或 file_get_contents()

[http://is2.php.net/manual/en/function.file-get-contents.php](http://is2.php.net/manual/en/function.file-get-contents.php)

# hibernate - 如何使用 Hibernate 将数据从一个数据库传输到另一个数据库？

> ID：162177
> 
> 赞同：9
> 
> 时间：2008-10-02T13:11:50.150
> 
> 标签：hibernate

我有一个带有域模型的应用程序 A，它使用 Hibernate 映射到数据库。我有另一个应用程序 B，它使用与 A 完全相同的域模型类，并添加了一些额外的类。

我的目标是从应用程序 B 中的数据库 A 读取数据并将该数据传输到 B 的数据库中（以制作它的副本）。此外，B 的一些域类与 A 的域类有关联（OneToOne）（当然是在 B 的数据库中）。

实现这一目标的最佳策略是什么？我想到了两个会话工厂并使用`Session.replicate()`（这是如何工作的？）。或者我应该更好地在这两个域模型之间引入一个额外的映射层以实现松散耦合？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-10-06T20:21:09.483

我之前已经这样做了，以便在两种不同的数据库类型（在我的例子中是 DB2 和 MS SQL Server）之间传输数据。我所做的是创建两个单独的会话工厂，并为它们提供相同的映射文件列表。然后我只是从一个读取记录，并将它们保存到另一个。

当然，这假设两个数据源是相同的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-10-03T01:43:43.260

抄袭的目的是什么？那是您的应用程序流程或逻辑的一部分吗？还是直接复制数据？

如果只是为了拷贝数据过来，就没有必要使用hibernate了。有很多工具可以做到这一点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-10-31T15:04:44.330

就像其他人指出的那样，我认为我们需要确切地知道你想要完成什么。如果您正在进行一次性迁移，那么有比 Hibernate 更好的工具来执行 ETL（提取、转换、加载）。

如果您真的坚持在 Hibernate 中执行此操作（这也适用于您，Daniel），我会执行以下操作：

1.  打开数据库 A 的会话。
2.  读取您尝试复制的类型的所有实体（确保禁用延迟加载）
3.  打开到数据库 B 的会话。
4.  保存或更新实体。

我会在单独的工具中执行此操作，而不是在应用程序 A 或 B 中。

另一方面，如果这是您的应用程序功能的一部分（例如，应用程序 A 是数据的管理控制台，而应用程序 B 使用数据），您可能希望做一些不同的事情。如果不知道您到底在寻找什么，就很难说。

最后，要研究的东西（我认为这不是您要寻找的，但也许它会帮助您以不同的方式看待问题）是 Hibernate Shards ( [http://shards.hibernate.org /](http://shards.hibernate.org/)）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-28T06:14:03.213

尝试了其他工具并遇到了问题。这是我的家庭解决方案。可能需要一些清理，但它的肉就在那里。

```
import java.io.Serializable;
import java.util.List;
import java.util.logging.Logger;

import lombok.Getter;
import lombok.RequiredArgsConstructor;
import lombok.Setter;

import org.hibernate.Session;
import org.hibernate.Transaction;

import ca.digitalrapids.lang.GeneralException;
import ca.digitalrapids.mediamanager.server.dao.hibernate.GenericDAOHibernate;
import ca.digitalrapids.mediamanager.server.dao.hibernate.GenericDAOHibernate.GenericDAOHibernateFactory;
import ca.digitalrapids.persist.dao.DAOOptions;
import ca.digitalrapids.persist.hibernate.HibernateUtil2;

import com.google.common.collect.ImmutableMultimap;
import com.google.common.collect.ImmutableSet;
import com.google.common.collect.Sets;

@RequiredArgsConstructor
public class DataMigrator
{
    private static final Logger logger = Logger
        .getLogger(DataMigrator.class.getName());
    private final HibernateUtil2 sourceHibernateUtil2;
    private final HibernateUtil2 destHibernateUtil2;
    private final ImmutableSet<Class<?>> beanClassesToMigrate;
    @Setter @Getter
    private Integer copyBatchSize = 10;
    @Setter
    private GenericDAOHibernateFactory sourceDaoFactory = 
        new GenericDAOHibernate.GenericDAOHibernateFactoryImpl();
    @Setter
    private GenericDAOHibernateFactory destDaoFactory = 
        new GenericDAOHibernate.GenericDAOHibernateFactoryImpl();
    private final ImmutableMultimap<Class<?>, Class<?>> entityDependencies;

    public void run() throws GeneralException
    {
        migrateData(sourceHibernateUtil2.getSession(), 
            destHibernateUtil2.getSession());
    }

    private void migrateData(Session sourceSession, Session destSession) 
        throws GeneralException
    {
        logger.info("\nMigrating data from old HSQLDB database.\n");

        Transaction destTransaction = null;
        try
        {
            destTransaction = destSession.beginTransaction();
            migrateBeans(sourceSession, destSession, beanClassesToMigrate,
                entityDependencies);
            destTransaction.commit();
        } catch (Throwable e) {
            if ( destTransaction != null )
                destTransaction.rollback();
            throw e;
        }

        logger.info("\nData migration complete!\n");
    }

    private void migrateBeans(Session sourceSession, Session destSession,
        ImmutableSet<Class<?>> beanClasses, ImmutableMultimap<Class<?>, Class<?>> deps)
    {
        if ( beanClasses.isEmpty() ) return;
        Class<?> head = beanClasses.iterator().next();
        ImmutableSet<Class<?>> tail = 
            Sets.difference(beanClasses, ImmutableSet.of(head)).immutableCopy();
        ImmutableSet<Class<?>> childrenOfHead = getChildren(head, tail, deps);
        migrateBeans(sourceSession, destSession, childrenOfHead, deps);
        migrateBean(sourceSession, destSession, head);
        migrateBeans(sourceSession, destSession, 
            Sets.difference(tail, childrenOfHead).immutableCopy(), deps);
    }

    private ImmutableSet<Class<?>> getChildren(Class<?> parent,
        ImmutableSet<Class<?>> possibleChildren, 
        ImmutableMultimap<Class<?>, Class<?>> deps)
    {
        ImmutableSet<Class<?>> parentDeps = ImmutableSet.copyOf(deps.get(parent));
        return Sets.intersection(possibleChildren, parentDeps).immutableCopy();
    }

    private void migrateBean(Session sourceSession, Session destSession,
        Class<?> beanClass)
    {
        GenericDAOHibernate<?, Serializable> sourceDao = 
            sourceDaoFactory.get(beanClass, sourceSession);
        logger.info("Migrating "+sourceDao.countAll()+" of "+beanClass);

        DAOOptions options = new DAOOptions();
        options.setMaxResults(copyBatchSize);
        List<?> sourceBeans;
        int firstResult = 0;
        int sourceBeansSize;
        do { 
            options.setFirstResult(firstResult);
            sourceBeans = sourceDao.findAll(options);
            sourceBeansSize = sourceBeans.size();
            @SuppressWarnings("unchecked")
            GenericDAOHibernate<Object, Serializable> destDao = 
                (GenericDAOHibernate<Object, Serializable>) 
                destDaoFactory.get(beanClass, destSession);
            for (Object sourceBean : sourceBeans)
            {
                destDao.save(sourceBean);
            }
            firstResult += copyBatchSize;
            sourceSession.clear();/* prevent memory problems */
        } while ( sourceBeansSize >= copyBatchSize );
    }
} 
```

# webkit - 构建网络爬虫 - 使用 Webkit 包

> ID：162181
> 
> 赞同：4
> 
> 时间：2008-10-02T13:12:14.957
> 
> 标签：webkit, web-crawler, javascript, dom-manipulation

我正在尝试构建一个网络爬虫。
我需要两件事：

*   将 HTML 转换为 DOM 对象。
*   按需执行现有的 JavaScript。

我期望的结果是一个 DOM 对象，其中执行加载的 JavaScript 已经执行。
此外，我需要一个选项来按需执行额外的 JavaScript（在诸如：等事件上`onMouseOver`）`onMouseClick`首先，我找不到好的文档来源。
我搜索了[Webkit 主页](http://webkit.org/)，但找不到该软件包用户的太多信息，也没有有用的代码示例。另外，在一些论坛中，我看到了不要将 Webkit 接口用于爬虫，而是直接使用 DOM 和 Javascript 内部包的说明。

我正在搜索**文档**和**代码示例**。
此外，关于正确使用的任何建议。

工作环境：

*   操作系统：Windows
*   朗：C++

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-22T19:01:09.487

查看与 WebKit 主干一起打包的一些测试工具。大多数端口（据我所知）包括 DumpRenderTree 实例化 WebKitView ，然后在处理指定文件后吐出渲染树。从理论上讲，它是可能的 WebKit 最简单的示例之一。

# java - “导入”之后的“静态”修饰符是什么意思？

> ID：162187
> 
> 赞同：464
> 
> 时间：2008-10-02T13:13:04.047
> 
> 标签：java, modifier, static-import

像这样使用时：

```
import static com.showboy.Myclass;

public class Anotherclass{} 
```

`import static com.showboy.Myclass`和有什么区别`import com.showboy.Myclass`？

* * *

## 回答 #1

> 赞同：408
> 
> 时间：2008-10-02T13:14:33.857

查看[文档](http://docs.oracle.com/javase/1.5.0/docs/guide/language/static-import.html)

> 静态导入声明类似于正常的导入声明。正常导入声明从包中导入类，允许它们在没有包限定的情况下使用，静态导入声明从类导入静态成员，允许它们在没有类限定的情况下使用。
> 
> 那么什么时候应该使用静态导入呢？非常节俭！仅当您想要声明常量的本地副本或滥用继承（常量接口反模式）时才使用它。换句话说，当您需要频繁访问一个或两个类的静态成员时使用它。如果你过度使用静态导入功能，它会使你的程序不可读和不可维护，你导入的所有静态成员都会污染它的命名空间。您的代码的读者（包括您，在您编写代码几个月后）将不知道静态成员来自哪个类。从一个类中导入所有的静态成员对可读性尤其有害；如果您只需要一两个成员，请单独导入它们。使用得当，静态导入可以让你的程序更具可读性，

* * *

## 回答 #2

> 赞同：242
> 
> 时间：2008-10-02T13:42:39.767

你说的这两个进口没有区别。但是，您可以使用静态导入来允许对其他类的静态成员进行非限定访问。我曾经必须这样做的地方：

```
import org.apache.commons.lang.StringUtils;
      .
      .
      .
if (StringUtils.isBlank(aString)) {
      .
      .
      . 
```

我可以做这个：

```
import static org.apache.commons.lang.StringUtils.isBlank;
      .
      .
      .
if (isBlank(aString)) {
      .
      .
      . 
```

您可以在[文档](https://docs.oracle.com/javase/1.5.0/docs/guide/language/static-import.html)中查看更多信息。

* * *

## 回答 #3

> 赞同：59
> 
> 时间：2008-10-02T13:18:10.230

静态导入用于导入类的静态字段/方法，而不是：

```
package test;

import org.example.Foo;

class A {

 B b = Foo.B_INSTANCE;

} 
```

你可以写 ：

```
package test;

import static org.example.Foo.B_INSTANCE;

class A {

 B b = B_INSTANCE;

} 
```

如果您经常在代码中使用来自另一个类的常量并且静态导入没有歧义，这将很有用。

顺便说一句，在你的例子中“import static org.example.Myclass;” 不起作用：import 用于类，import static 用于类的静态成员。

* * *

## 回答 #4

> 赞同：40
> 
> 时间：2012-09-19T12:37:26.257

静态导入的基本思想是，每当您使用静态类、静态变量或枚举时，您都可以导入它们并省去一些输入。

我将举例说明我的观点。

```
import java.lang.Math;

class WithoutStaticImports {

 public static void main(String [] args) {
  System.out.println("round " + Math.round(1032.897));
  System.out.println("min " + Math.min(60,102));
 }
} 
```

相同的代码，带有静态导入：

```
import static java.lang.System.out;
import static java.lang.Math.*;

class WithStaticImports {
  public static void main(String [] args) {
    out.println("round " + round(1032.897));
    out.println("min " + min(60,102));
  }
} 
```

**注意**：静态导入会使您的代码难以阅读。

* * *

## 回答 #5

> 赞同：24
> 
> 时间：2009-10-14T11:00:53.820

> “import static com.showboy.Myclass”和“import com.showboy.Myclass”的区别？

第一个应该生成编译器错误，因为静态导入仅适用于导入字段或成员类型。（假设 MyClass 不是 showboy 的内部类或成员）

我想你的意思是

```
import static com.showboy.MyClass.*; 
```

这使得 MyClass 中的所有静态字段和成员都可以在实际编译单元中使用，而无需限定它们......如上所述

* * *

## 回答 #6

> 赞同：15
> 
> 时间：2016-01-31T14:07:58.413

允许 java 程序员在`import`没有包限定的情况下访问包的类。

该`static import`功能允许在没有类限定的情况下访问类的静态成员。

`import`提供对类和接口的`static import`可访问性，同时提供对类的静态成员的可访问性。

**例子 ：**

带***进口***

```
import java.lang.System.*;    
class StaticImportExample{  
    public static void main(String args[]){  

       System.out.println("Hello");
       System.out.println("Java");  

  }   
} 
```

带***静态导入***

```
import static java.lang.System.*;    
class StaticImportExample{  
  public static void main(String args[]){  

   out.println("Hello");//Now no need of System.out  
   out.println("Java");  

 }   
} 
```

See also : [What is static import in Java 5](http://javarevisited.blogspot.in/2012/10/what-is-static-import-in-java-5-example-tutorial.html)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-12-22T11:27:42.057

`MyClass`假设您在被调用的包中调用的类中有静态字段和方法，并且您希望通过每次键入或不键入`myPackage`直接访问它们 或。`myStaticField``myStaticMethod``MyClass.myStaticField``MyClass.myStaticMethod`

注意：您需要执行 `import myPackage.MyClass` or`myPackage.*` 才能访问其他资源

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-06-09T10:44:34.817

The `static` modifier after `import` is for retrieving/using static fields of a class. One area in which I use `import static` is for retrieving constants from a class. We can also apply `import static` on static methods. Make sure to type `import static` because `static import` is wrong.

**[What is `static import` in Java - JavaRevisited](http://javarevisited.blogspot.com/2012/10/what-is-static-import-in-java-5-example-tutorial.html)** - A very good resource to know more about `import static`.

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2020-07-01T12:16:27.190

Very good exaple. npt tipical with MAth in wwww....

[https://www.java2novice.com/java-fundamentals/static-import/](https://www.java2novice.com/java-fundamentals/static-import/)

```
public class MyStaticMembClass {

    public static final int INCREMENT = 2;

    public static int incrementNumber(int number){
        return number+INCREMENT;
    }
} 
```

in onother file inlude

```
import static com.java2novice.stat.imp.pac1.MyStaticMembClass.*; 
```

# visual-studio-2008 - Visual Studio 2008 - 添加参考

> ID：162192
> 
> 赞同：17
> 
> 时间：2008-10-02T13:13:33.640
> 
> 标签：visual-studio-2008, version-control, intellisense, pdb-files, .refresh

在添加 DLL 作为对 ASP.Net 项目的引用时，VS2008 会在 bin 目录中添加几个文件。如果 DLL 被称为 foo.dll，VS2008 会添加 foo.dll.refresh、foo.pdb 和 foo.xml。我知道 foo.dll 是什么 :-)，为什么 VS2008 会添加其他三个文件？这三个文件有什么作用？我可以删除它们吗？是否需要将它们添加到源代码管理中？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2008-10-02T13:21:04.107

**源代码控制：**

Ben Straub 在对这篇文章的评论中说：`.dll.refresh`如果需要，应该将文件添加到源代码管理中，而`.xml`,`.pdb`当然`.dll`不应该添加文件。

John Rudy 解释了何时添加`.refresh`文件：

> 为什么这是一件好事（有时）？假设您处于团队环境中。有人签入 foo.dll 的代码，您的构建系统构建一个新的 DLL，将其输出到服务器上的文件共享中。您的刷新文件指向该 DLL 的服务器副本。下次构建时，VS 将自动获取该 DLL 的最新和最棒的副本。

**.xml**就像 David Mohundro 说的：

> xml 文件用于 XML 注释和智能感知。Visual Studio 将解析并显示当您调用这些 DLL 中的方法时添加的 XML 注释。

**.pdb**像 David Mohundro 说的：

> pdb 用于调试和符号。如果您从中抛出异常，您将能够获得堆栈跟踪等。您可以控制选择是否构建 PDB。

**.refresh** [来自关于 .refresh 文件的博客文章：](http://sanjaysainitech.blogspot.com/2007/11/what-are-dllrefresh-extension-files.html)

> 它告诉 VS 在哪里寻找具有相同基本名称的 dll 的更新版本。它们是文本文件，您可以打开它们并查看它使用的路径。
> 
> 它们的目的是防止您自己复制新版本。在 VS2003 中，项目文件将包含引用的源位置，但由于 VS2005 不将项目文件用于 ASP.NET 项目，因此这是该特定功能的替代品。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2008-10-02T13:20:22.017

刷新文件（因为还没有人点击它！）描述了 DLL 的来源。这是用于自动刷新引用；每当您进行完整构建时，VS 都会在该路径中查找并复制该版本的 DLL。

为什么这是一件好事（有时）？假设您处于团队环境中。有人签入 foo.dll 的代码，您的构建系统构建一个新的 DLL，将其输出到服务器上的文件共享中。您的刷新文件指向该 DLL 的服务器副本。下次构建时，VS 将自动获取该 DLL 的最新和最棒的副本。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2008-10-02T13:16:52.057

pdb 用于调试和符号。如果您从中抛出异常，您将能够获得堆栈跟踪等。您可以控制选择是否构建 PDB。xml 文件用于 XML 注释和智能感知。Visual Studio 将解析并显示当您调用这些 DLL 中的方法时添加的 XML 注释。

我不知道刷新文件。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-10-02T13:14:52.420

foo.pdb 是 foo.dll 的调试器符号文件，你会想要它，否则你将无法在该代码中设置断点。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-10-02T13:18:40.773

> VS2008在bin目录下添加了几个文件[...]需要在源代码管理中添加吗？

bin 目录中的任何内容都不需要添加到源代码管理中。最初签入项目时的第一件事就是忽略 bin 和 obj 目录。所以是的，您可以删除这些文件，但 Visual Studio 会重新创建它们。

# sql - “创建目标表后架构已更改”错误如何发生？

> ID：162205
> 
> 赞同：3
> 
> 时间：2008-10-02T13:16:15.490
> 
> 标签：sql, sql-server, sql-server-2005

当我的 Web 应用程序试图在 MSSQL 2005 数据库上执行 SELECT INTO 时，我遇到了这个错误。我真的有两个问题：

1.  这个错误是什么意思，这是怎么发生的？
2.  有没有办法通过以不同的方式编码来防止这些错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-10-02T13:23:32.573

除了显而易见的，有人在代码执行时更改了表，这可能是与在 SQL 中创建的临时表的命名冲突。可能有两个具有不同架构的临时表，但它们具有相同的名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2011-09-28T10:40:31.537

如果在使用 SELECT INTO 时数据库触发器（AFTER CREATE_TABLE）更改了表，则会出现此错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-24T08:49:33.083

当您在存储过程中使用 SELECT * INTO #TABLE FROM TABLE 并且它同时运行多次时，您也可以得到这个。

# java - Java的数据流编程API？

> ID：162208
> 
> 赞同：8
> 
> 时间：2008-10-02T13:16:43.790
> 
> 标签：java, concurrency, multicore, dataflow

我正在寻找适用于 Java 的数据流/并发编程 API。
我知道有[DataRush](http://www.pervasivedatarush.com/)，但它不是免费的。我特别感兴趣的是多核数据处理，而不是分布式的，这排除了[MapReduce](http://en.wikipedia.org/wiki/MapReduce)或[Hadoop](http://en.wikipedia.org/wiki/Hadoop)。
有什么想法吗？
谢谢，罗洛

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-10-27T21:28:10.640

你可以试试[gpars](http://www.gpars.org/)；它显然在 Java 中实现了数据流变量和流，尽管它旨在为 Groovy 提供并发编程好东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-02T18:22:55.927

可能会尝试即将推出的 fork/join 库，它将（希望）作为 JSR 166y 更新的一部分包含在 Java 7 中。

主项目页面：- [http://gee.cs.oswego.edu/dl/concurrency-interest/index.html](http://gee.cs.oswego.edu/dl/concurrency-interest/index.html)

指向很多关于它是什么的链接的指针：- [http://tech.puredanger.com/java7#jsr166](http://tech.puredanger.com/java7#jsr166)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-09-22T15:12:13.510

[https://github.com/rfqu/df4j](https://github.com/rfqu/df4j)是一个简单但功能强大的数据流库。如果它缺少一些所需的功能，可以很容易地添加它们。它可以利用 java.concurrent.ExecutorService。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-02T13:19:25.360

内置的 Java 并发包是否[满足](http://java.sun.com/j2se/1.5.0/docs/api/java/util/concurrent/package-summary.html)您的需求？这是一个非常好的包，内置于 ThreadPools、CopyOnWriteCollections、Executors、Future。我们用它来处理线程池中的大量数据。

# jsp - 如何知道一个jsp标签属性是否可用于EL？

> ID：162221
> 
> 赞同：1
> 
> 时间：2008-10-02T13:20:40.160
> 
> 标签：jsp, jstl, el

我的 jsp 中有以下代码：

```
<% pageContext.setAttribute("warnings",Globals.WARNING_MESSAGES); %>
<c:choose>
    <c:when test="${requestScope[pageScope.warnings] or sessionScope[pageScope.warnings]}">
        <html:errors header="warnings.header" footer="warnings.footer" prefix="warnings.prefix" suffix="warnings.suffix"/>
        <c:remove var="${pageScope.warnings}" scope="session"/>
    </c:when>
    <c:otherwise>
        <html:errors/>
    </c:otherwise>
</c:choose> 
```

我想知道是否有任何方法（无需深入研究源代码）知道某个属性是否可用于 EL 编码。

在这段代码中，我想使用一个脚本变量定义为我在 pageScope 容器中设置的常量。当我从引用脚本变量的 sessionScope 中删除变量时，我想使用相同的机制，但似乎该`<c:remove var>`属性拒绝解释我的脚本变量，这破坏了引用我的常量声明的所有努力。我可以使用 jsp scriptlet 来解决这个问题，但是有没有“更好”的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-04T05:51:27.307

我不确定我是否理解您的问题，但我认为您正在寻找 EL 的“空”运算符来测试属性是否存在：

```
<c:if test="${empty pageScope.warnings}">
//做一点事
</c:如果>

```

如果 pageScope.warnings 未定义（null），这将返回 true。

# xml - 如何保留标记标签？

> ID：162225
> 
> 赞同：18
> 
> 时间：2008-10-02T13:21:31.970
> 
> 标签：xml, xslt

我有一个包含新闻故事的 XML 文档，并且新闻故事的正文元素在纯文本中包含 p 标记。当我使用 XSL 检索正文时，例如

```
<xsl:value-of select="body" /> 
```

p 标签似乎被剥离了。我正在使用 Visual Studio 2005 的 XSL 实现。

有谁知道如何避免这种情况？谢谢。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2008-10-02T13:27:31.253

尝试使用

```
<xsl:copy-of select="body"/> 
```

反而。来自[w3schools 的相同文档](http://www.w3schools.com/XSL/el_copy-of.asp)：

> 该`<xsl:copy-of>`元素创建当前节点的副本。
> 
> 注意：命名空间节点、子节点和当前节点的属性也会自动复制！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-10-02T13:30:59.043

如果您无法控制输入文档，则副本应该可以工作：

来自[http://www.xml.com/pub/a/2000/06/07/transforming/index.html](http://www.xml.com/pub/a/2000/06/07/transforming/index.html)

“另一方面，xsl:copy-of 元素可以复制模板选择的每个节点的整个子树。这包括属性，如果 xsl:copy-of 元素的 select 属性具有适当的值。在以下示例中，模板复制标题元素节点及其所有后代节点——换句话说，完整的标题元素，包括它们的标签、子元素和属性："

```
<xsl:template match="title">
  <xsl:copy-of select="*"/>
</xsl:template> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-02T13:25:56.513

如果您可以控制输入文档，那么[CDATA](http://en.wikipedia.org/wiki/CDATA)是正确的选择。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-02T19:37:02.067

XML 元素的值——不仅在 XSLT 中而且在 DOM 实现中都是如此——是其所有后代文本节点的连接。在 XSLT 中，`value-of`发出元素的值，同时`copy-of`发出元素的副本。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2008-10-02T13:26:00.897

这是因为引擎正在解释 <p> 标记（将其排除在输出之外）。您需要使用“disable-output-escaping=yes|no”属性指定您想要的内容“原样”。

```
<xsl:value-of select="body" disable-output-escaping="yes"/> 
```

# c++ - 如何使用 COM/ATL（无 MFC）打开现有文件

> ID：162229
> 
> 赞同：2
> 
> 时间：2008-10-02T13:21:57.677
> 
> 标签：c++, excel, com

我有一个链接到 ATL 的现有 Windows C++ 应用程序。我需要打开一个现有的 Excel 文件并访问一些属性。我需要做的一件事是确定用户当前是否正在查看 Excel 文件。

我们可以假设用户安装了 Excel，但不确定是哪个版本。

附加到现有 Excel 文件的 C++/COM 代码是什么？如何确定文件当前是否由 Excel 实例打开？假设我知道文件名。我用谷歌搜索了 15 分钟，但没有找到没有 MFC 的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-02T15:58:03.857

不错的挑战。由于无法拒绝挑战，我坐在 Visual Studio 前，这是一个可能的解决方案。

```
#include <windows.h>
#include <iostream>

using namespace std;

#import "C:\\Program Files\\Common Files\\Microsoft Shared\\OFFICE11\\MSO.DLL" \
    rename("RGB", "MSORGB") \
    rename("DocumentProperties", "MSDocumentProperties")

using namespace Office;

#import "C:\\Program Files\\Common Files\\Microsoft Shared\\VBA\\VBA6\\VBE6EXT.OLB"

using namespace VBIDE;

#import "C:\\Program Files\\Microsoft Office\\OFFICE11\\EXCEL.EXE" \
    rename("DialogBox", "ExcelDialogBox" ) \
    rename("RGB", "ExcelRGB") \
    rename("CopyFile", "ExcelCopyFile") \
    rename("ReplaceText", "ExcelReplaceText")

void DumpCOMError(_com_error& e) {
    wcout << L"Error:" << endl;
    wcout << L"  Code = " << hex << e.Error() << endl;
    wcout << L"  Code meaning = " << e.ErrorMessage() << endl;
    _bstr_t bstrSource(e.Source());
    _bstr_t bstrDescription(e.Description());
    wcout << L"  Source = " << bstrSource << endl;
    wcout << L"  Description = " << bstrDescription << endl;
}

HRESULT IsXlsFileOpen(LPWSTR FileName, BOOL& file_open) {
    Excel::_ApplicationPtr pApplication;
    HRESULT hr = E_FAIL;
    if (FAILED(hr = pApplication.CreateInstance(L"Excel.Application"))) {
        file_open = FALSE;
        return hr;
    }

    _variant_t  varOption(static_cast<long>(DISP_E_PARAMNOTFOUND), VT_ERROR);
    Excel::_WorkbookPtr pBook;

    try {
        pBook = pApplication->Workbooks->Open(
                        FileName, 
                        varOption,
                        varOption,
                        varOption,
                        varOption,
                        varOption,
                        varOption,
                        varOption,
                        varOption,
                        varOption,
                        varOption,
                        varOption,
                        varOption);

        file_open = pBook->ReadOnly == VARIANT_TRUE;
        pBook->Close(VARIANT_FALSE);

        hr = S_OK;
    } catch (_com_error& e) {
        file_open = FALSE;
        DumpCOMError(e);
        hr = e.Error();
    }

    pApplication->Quit();
    return hr;
}

int main(int argc, wchar_t* argv[])
{
    CoInitialize(NULL);
    {
        BOOL fileOpen;
        HRESULT hr = IsXlsFileOpen(L"f:\\temp\\treta.xls", fileOpen);
        if (SUCCEEDED(hr)) {
            cout << "File is " << (fileOpen ? "open" : "not open") << "." << endl;
        }
        cout << "IsXlsFileOpen returned: 0x" << hex << hr << endl;
    }
    CoUninitialize();

    return 0;
} 
```

* * *

一些应得的学分是有序的：

[http://www.vbaexpress.com/kb/getarticle.php?kb_id=625](http://www.vbaexpress.com/kb/getarticle.php?kb_id=625)

[http://www.codeproject.com/KB/wtl/WTLExcel.aspx](http://www.codeproject.com/KB/wtl/WTLExcel.aspx)

[http://www.codeguru.com/forum/printthread.php?s=26acdf89a1a6b79b7aa6a52e11b8d832&threadid=61997](http://www.codeguru.com/forum/printthread.php?s=26acdf89a1a6b79b7aa6a52e11b8d832&threadid=61997)

# sql-server - 什么构成 SQL Server 的“高 cpu”

> ID：162231
> 
> 赞同：5
> 
> 时间：2008-10-02T13:22:27.193
> 
> 标签：sql-server, cpu

对于 SQL Server，应将什么级别的 CPU 使用率视为高？即 80% 90% 100%？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-10-02T13:26:08.777

如果在正常负载下 CPU 平均高于 40%，我开始感到紧张。然而，那是因为我知道我们流量的性质和我们得到的峰值。你的旅费可能会改变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-12T19:38:58.843

实际上，我们的目标甚至更低，平均约为 7-10%，但有时我们确实会进行处理，使我们达到 60%。

我们每 30 秒测量一次总 CPU 并每天通过电子邮件发送一份报告，如果我们发现与当天预期的平均值相差 2%，我们会进行调查。

这需要时间，但它可以帮助我晚上睡得更好:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-02T13:23:59.733

这真的取决于你的机器。最好的办法是使用 perfmon 监控服务器，看看什么时候开始运行缓慢。SQL 在负载下使用大量 CPU 是正常的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-02T13:26:23.157

通常，您不希望机器维持超过 40% 或 50% 的恒定 CPU，因为它无法处理活动峰值。

# java - 用于 Web 的 Java 开发

> ID：162253
> 
> 赞同：18
> 
> 时间：2008-10-02T13:26:12.613
> 
> 标签：java, frameworks

我希望开始使用 Java 进行 Web 开发——我有一些基本的 Java 知识，所以这不是问题，但是在破译用于 Web 应用程序的各种技术时，我不知所措。

我有哪些选择？它们是如何工作的？是否有任何类似于 Django/Ruby on Rails 的框架可以用来简化事情？

任何有助于理解可用内容的链接将不胜感激。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2008-10-02T14:39:24.263

Java 框架有两种基本风格。一个称为“动作”框架，另一个称为“组件”框架。

动作框架专注于将 HTTP 请求映射到 Java 代码（动作），并将 HTTP 请求绑定到 Java 对象。Servlet 是 Action Framework 中最基本的，也是所有其他框架的基础。

Struts 是最流行的 Action 框架，但我不能凭良心向任何人推荐它。Struts 2 和 Stripes 更现代，并且彼此非常相似。两者的配置都很轻，开箱即用，易于使用，提供了非常好的绑定功能。

组件框架专注于 UI，并倾向于促进基于高级 UI 组件（按钮、列表框等）的更多事件驱动的架构。这些框架倾向于将来自编码器的实际 HTTP 请求隐藏在几个层下。它们使开发更高级的 UI 变得更加容易。.NET 是 Windows 的组件框架。在 Java 上，流行的组件框架是 JSF（一种标准）和 Wicket。

通常，如果您要创建“网站”。这更类似于呈现信息（如博客或社区网站），Action 框架工作得更好。这些站点往往更简单，经常被添加书签，需要“漂亮的 URL”等。这通常更容易使用 Action 框架来完成。

对于具有大量 UI 元素和复杂工作流程的后台应用程序，组件框架要好得多。您会发现，尤其是使用工具，这些风格的应用程序将使用组件框架更快地组合在一起。但是组件框架有更复杂的请求工作流，有时依赖隐藏状态、大量的 POST 操作等。许多具有“可怕”的 URL，有时会创建难以添加书签的页面。

这两个框架都可以用于这两个任务，只是有些框架比其他框架更适合该任务。

这些框架都没有直接解决持久性问题，但许多框架具有与 JPA/EJB3 或 Hibernate 紧密合作的扩展模块或惯用语。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2008-10-02T13:34:40.767

您的基本 Java Web 技术是 servlet。Servlet 允许您编写响应各种 HTTP 事件（doGet、doPost、doPut 等）的 Java 代码。它们通常用于 MVC 架构中的控制器。链接：http: [//java.sun.com/products/servlet/](http://java.sun.com/products/servlet/)

JSP 允许您使用嵌入式 Java 编写 HTML，而不是相反（在 servlet 中）。JSP 已通过 JSF 进行了扩展，以包含最近的架构进步。这与 PHP 和 ASP 在同一行。这是 MVC 架构的视图部分。链接：http: [//java.sun.com/developer/technicalArticles/GUI/JavaServerFaces/](http://java.sun.com/developer/technicalArticles/GUI/JavaServerFaces/)

许多更复杂的应用程序使用 Enterprise Java Beans (EJB) 进行会话管理、集群等。这本身不是一种 Web 技术，但在处理更复杂的 Web 应用程序时，您会看到它齐头并进。替代方案包括 Spring 等框架。EJB：[http](http://docs.jboss.org/ejb3/app-server/tutorial/) ://docs.jboss.org/ejb3/app-server/tutorial/ Spring：[http ://www.springframework.org/](http://www.springframework.org/)

此外，您还需要熟悉 ORM 技术（在 servlet 和 JSP/JSF 之后）。目前领先的 ORM 框架是 Hibernate。这使您可以将 SQL 表映射到 java 对象并相应地与它们进行交互。这是更高级的东西，所以当你试图了解 EJB/Spring 等时保存它。链接：[http ://www.hibernate.org/](http://www.hibernate.org/)

编辑：我忘了定义 ORM。它代表对象关系映射/映射器（无论您喜欢使用什么版本的“映射”：）

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2008-10-02T19:05:01.020

从 Java 类中的逻辑支持的 JSP 开始。或者使用 servlet。

使用 JSP 和 Servlet 的优点是您可以了解所有框架在幕后所做的事情。这种理解对于弄清楚如何在该特定框架中执行 X 至关重要。

此外，JSP 非常简单。当您将视图与业务逻辑混淆时，您可以轻松地看到自己在做什么，并且非常容易地看到它。

并且相当多的框架（Struts、Spring MVC）使用 JSP 作为他们的视图技术。这是使用 Java 进行 Web 开发的自然第一步。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2008-10-02T13:30:52.430

我不知道有没有像 Django for Java 一样好的东西，但是 Spring 有一个基于 J2EE 构建的轻量级 Web 框架

[http://www.springframework.org/about](http://www.springframework.org/about)

> 一个灵活的 MVC Web 应用程序框架，建立在 Spring 的核心功能之上。该框架通过策略接口高度可配置，并适应多种视图技术，如 JSP、Velocity、Tiles、iText 和 POI。请注意，Spring 中间层可以轻松地与基于任何其他 Web MVC 框架（如 Struts、WebWork 或 Tapestry）的 Web 层相结合。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-10-02T13:30:19.483

像[圣杯](http://grails.org/)一样的东西？

还有[春天的项目](http://www.springframework.org//)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-10-02T14:19:59.927

你可以试试 Jboss Seam：[http ://www.seamframework.org/Documentation/GettingStarted](http://www.seamframework.org/Documentation/GettingStarted)

如果您使用 Ecipe 作为您的 IDE，则可以通过 Jboss Tools 进行良好的集成，或者您可以使用 Seam 附带的 Seam-Gen 工具。这允许您定义一个（或多个）数据库表，并使用一些简单的命令，从中构建一个完整的可运行 Web 项目。这是让球滚动的好方法。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-10-02T13:32:00.307

您需要从[servlet 和 JSP](http://oreilly.com/catalog/9780596005405/)开始。Java中有许多Web框架，它们都基于这两种技术。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-04-15T13:53:53.487

在研究这些框架之前，为什么不先研究一下它是从哪里开始的呢？首先尝试使用 servlet 进行编程，这样您就可以了解大多数 Java Web 框架的核心。它将帮助您更好地理解 J2EE。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-10-02T13:32:53.500

还有 Java Server Faces

[http://en.wikipedia.org/wiki/Java_Server_Faces](http://en.wikipedia.org/wiki/Java_Server_Faces)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-10-02T13:40:08.087

这是一个非常开放的问题。简短的回答是“是的”，从编写 HTTP 请求级别的内容到 Java 中的内容管理系统，都有框架、库和标准可以做所有事情。

为此，您还可以在 JVM 上使用其他语言（例如 Python、Ruby 等）。

对于一些纯 Java 技术，请研究 JSP/Servlets、Struts、Struts2（这是 Webwork 的更新版本）、Spring MVC、Tapestry、web4j、Wicket。

还有其他构建在 JVM 上的框架，但使用 Java 以外的语言，例如 Grails。

要开始，我会下载 Eclipse（最新版本）和 Tomcat。在 Eclipse 中创建一个新的 Web 应用程序。有一些[指南](http://www.ibm.com/developerworks/opensource/library/os-eclipse-tomcat/index.html)可以帮助您入门。

从学习 JSP 和 Servlet 的工作原理开始，它们有点低级，并不是真正的框架，但可以让您快速启动和运行。从那里调查并选择您的框架。

Spring MVC 很容易设置和运行。我确定还有其他人。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2008-10-03T09:46:24.363

如果您已经了解 Ruby On Rails，则可以将它与[JRuby一起使用，并使用](http://jruby.codehaus.org/)[Warbler](http://wiki.jruby.org/wiki/Warbler)部署到 Java 服务器（如 Tomcat）。

在纯 Java 中，[Wicket](http://wicket.apache.org/)有一个很好的方法并且越来越流行。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-10-02T13:30:57.297

J2EE 是标准。您可以使用它来构建具有 Java 服务器页面、Servlet 和 EJB 的应用程序。

Struts 也是一个非常流行的使用 JSP 和 Servlet 的框架。设置起来有点棘手，但对于中型站点来说，它是一个非常好的选择。

[http://en.wikipedia.org/wiki/Struts](http://en.wikipedia.org/wiki/Struts)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-10-02T13:34:53.200

一般来说，Java 更加基于组件，即您没有可以为您完成所有工作的框架（例如，您可能必须自己选择一个数据库访问框架）。对于数据访问，我推荐 Hibernate 或 iBATIS。

对于前端，实际上有数百个框架。研究 JSF、Wicket、Struts 2、Stripes - 使用哪一种取决于您的具体需求，因为它们都有不同的优势。

对于业务层，我推荐 Spring Framework，它非常全面并且有很好的参考指南/教程 :)

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2009-04-15T18:08:27.710

我在大学学习 Java 的时候是 1.1.5 版本。我最近开始尝试为 web 编程，但直到我阅读[Head First Servlets 和 JSP](https://rads.stackoverflow.com/amzn/click/com/0596516681 "Head First Servlet 和 JSP")才有意义。使用 Java 进行 Web 开发涉及的事情比我意识到的要多得多，如果没有这本书，我可能会退出并只使用 PHP。

# sql - 如何检查允许连接到 Oracle 数据库的最大数量？

> ID：162255
> 
> 赞同：96
> 
> 时间：2008-10-02T13:27:00.350
> 
> 标签：sql, oracle

使用 SQL 检查 Oracle 数据库允许的最大连接数的最佳方法是什么？最后，我想显示当前的会话数和允许的总数，例如“当前，80 个连接中有 23 个已使用”。

* * *

## 回答 #1

> 赞同：126
> 
> 时间：2008-10-02T13:53:36.057

在确定 Oracle 数据库支持的连接数时，可能会有一些不同的限制。最简单的方法是使用 SESSIONS 参数和 V$SESSION，即

数据库配置为允许的会话数

```
SELECT name, value 
  FROM v$parameter
 WHERE name = 'sessions' 
```

当前活跃的会话数

```
SELECT COUNT(*)
  FROM v$session 
```

不过，正如我所说，在数据库级别和操作系统级别还有其他潜在限制，具体取决于是否配置了共享服务器。如果共享服务器被忽略，您可能会在达到 SESSIONS 参数的限制之前达到 PROCESSES 参数的限制。而且您可能会遇到操作系统限制，因为每个会话都需要一定数量的 RAM。

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2014-09-26T14:00:46.823

**session**参数派生自processes**参数**，并在您更改最大进程数时相应更改。有关详细信息，请参阅[Oracle 文档](http://docs.oracle.com/cd/B28359_01/server.111/b28320/initparams001.htm#i1124357)。

仅获取有关会话的信息：

```
 select current_utilization, limit_value 
    from v$resource_limit 
    where resource_name='sessions'; 
```

```
CURRENT_UTILIZATION LIMIT_VALUE
-------- ------------
                110 792

```

试试这个来显示两者的信息：

```
 select resource_name, current_utilization, max_utilization, limit_value 
    from v$resource_limit 
    where resource_name in ('sessions', 'processes'); 
```

```
RESOURCE_NAME CURRENT_UTILIZATION MAX_UTILIZATION LIMIT_VALUE
------------- -------- --------------- --- --------
处理 96 309 500
会议 104 323 792

```

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2008-10-02T13:52:42.830

我认为这会起作用，基于[这个来源](http://download-uk.oracle.com/docs/cd/B19306_01/server.102/b14237/dynviews_1144.htm)。

```
SELECT
  'Currently, ' 
  || (SELECT COUNT(*) FROM V$SESSION)
  || ' out of ' 
  || DECODE(VL.SESSIONS_MAX,0,'unlimited',VL.SESSIONS_MAX) 
  || ' connections are used.' AS USAGE_MESSAGE
FROM 
  V$LICENSE VL 
```

然而，贾斯汀凯夫是对的。这个查询给出了更好的结果：

```
SELECT
  'Currently, ' 
  || (SELECT COUNT(*) FROM V$SESSION)
  || ' out of ' 
  || VP.VALUE 
  || ' connections are used.' AS USAGE_MESSAGE
FROM 
  V$PARAMETER VP
WHERE VP.NAME = 'sessions' 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-06-16T08:10:49.103

注意：这只回答了部分问题。

如果你只是想知道允许的最大会话数，那么你可以在 sqlplus 中执行，作为 sysdba：

```
SQL> show parameter sessions 
```

这会给你一个输出，如：

```
 NAME                                 TYPE        VALUE
------------------------------------ ----------- ------------------------------
java_max_sessionspace_size           integer     0
java_soft_sessionspace_limit         integer     0
license_max_sessions                 integer     0
license_sessions_warning             integer     0
sessions                             integer     248
shared_server_sessions               integer 
```

session 参数是您想要的参数。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-02-05T18:44:03.640

如果要获取整个集群的会话总数，请对 RAC 使用 gv$session。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-09-14T05:53:34.137

v$resource_limit 视图对我来说非常有趣，以便浏览 oracle 会话、进程..：

[https://bbdd-error.blogspot.com.es/2017/09/check-sessions-and-processes-limit-in.html](https://bbdd-error.blogspot.com.es/2017/09/check-sessions-and-processes-limit-in.html)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2010-06-04T20:31:03.520

```
select count(*),sum(decode(status, 'ACTIVE',1,0)) from v$session where type= 'USER' 
```

# c# - JQuery Facebox 插件：在表单标签中获取它

> ID：162276
> 
> 赞同：3
> 
> 时间：2008-10-02T13:31:23.910
> 
> 标签：c#, asp.net, jquery, facebox

我想为 JQuery 使用 Facebox 插件，但在让它按我想要的方式运行时遇到了一些问题。包含 facebox 内容的 div 是在标签之外创建的，因此即使我正在加载一些 Web 控件，它们都不会返回到服务器。

有没有人处理过这个可以给我一些指示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-02T13:39:58.850

在 facebox.js 周围戳了一下，我在函数 init(settings) 中遇到了这一行...

```
$('body').append($.facebox.settings.faceboxHtml) 
```

我把它改成...

```
$('#aspnetForm').append($.facebox.settings.faceboxHtml) 
```

它加载到表单标签中，不确定是否有任何副作用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-28T00:24:50.560

您可以使用此代码注册 PostBack 事件：

```
btn.OnClientClick = string.Format("{0}; $.facebox.close();",ClientScript.GetPostBackEventReference(btn, null)); 
```

这将让按钮触发 PostBack。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-04-14T18:28:10.443

即使在： $('#aspnetForm').append($.facebox.settings.faceboxHtml)

改变我发现它有问题。当您使用 firebug 查看页面源代码时，您会看到分配为 facebox div 的 div 中的所有 html 都加倍（重复）。

因此，所有具有假定唯一 id 的控件都在页面上加倍，这在回发时不是很好，我决定将 asp.net 网络控件放在 facebox 中不是一个好主意。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-04-22T17:28:46.730

我修改了 facbox.js 来做到这一点。也许有更好的解决方案，但这就像一个魅力

这是我所做的：

1.  在 '(function($)' 之前的 facbox.js 顶部添加两行

```
var willremove = '';
var willremovehtml = '';

```

2.  找到 "reveal: function(data, klass) {" 并将这一行添加到函数的第一行之前。

```
willremove = data.attr('id')
willremovehtml = $('#'+willremove).html()
$('#'+willremove).html('')
```

3.  找到 "close: function() {" 并使其如下所示。

```
关闭：函数（）{
$(document).trigger('close.facebox')
$('#'+willremove).html(willremovehtml)
willremovehtml = ''
将删除 = ''
返回假
}
```

# windows - 如何通过批处理脚本检查进程是否正在运行

> ID：162291
> 
> 赞同：293
> 
> 时间：2008-10-02T13:35:00.250
> 
> 标签：windows, command-line, batch-file

如何检查应用程序是否从批处理（以及 cmd）文件运行？

如果程序已经在运行，我不需要启动另一个实例。（我无法更改应用程序以使其仅成为单个实例。）

该应用程序也可以作为任何用户运行。

* * *

## 回答 #1

> 赞同：360
> 
> 时间：2009-08-25T17:40:07.250

[受使用grep](http://en.wikipedia.org/wiki/Grep)启发，我提出的另一种不需要保存文件的可能性是：

```
tasklist /fi "ImageName eq MyApp.exe" /fo csv 2>NUL | find /I "myapp.exe">NUL
if "%ERRORLEVEL%"=="0" echo Program is running 
```

*   `/fi ""`定义要查找的应用程序过滤器，在我们的例子中是 *.exe 名称
*   `/fo csv`定义输出格式， csv 是必需的，因为默认情况下，如果可执行文件的名称太长，可能会被截断，因此以后不会匹配`find`。
*   `find /I`表示不区分大小写的匹配，可以省略

有关整个语法，请参见[tasklist](https://docs.microsoft.com/de-de/windows-server/administration/windows-commands/tasklist#filter-names-operators-and-values)命令的手册页。

* * *

## 回答 #2

> 赞同：62
> 
> 时间：2008-10-02T13:49:32.260

以下是我的解决方法：

```
tasklist /FI "IMAGENAME eq notepad.exe" /FO CSV > search.log

FOR /F %%A IN (search.log) DO IF %%~zA EQU 0 GOTO end

start notepad.exe

:end

del search.log 
```

[如果记事本](http://en.wikipedia.org/wiki/Notepad_%28software%29)尚未运行，则上面将打开它。

编辑：请注意，这不会找到隐藏在任务列表中的应用程序。这将包括以不同用户身份运行的任何计划任务，因为这些任务会自动隐藏。

* * *

## 回答 #3

> 赞同：54
> 
> 时间：2014-08-21T10:18:03.087

我喜欢 Chaosmaster 的解决方案！但我寻找了一个不启动另一个外部程序（如[find.exe](https://technet.microsoft.com/en-us/library/bb490906.aspx)或[findstr.exe](https://technet.microsoft.com/en-us/library/bb490907.aspx)）的解决方案。所以我从 Matt Lacey 的解决方案中添加了这个想法，它创建了一个也可以避免的临时文件。最后我可以找到一个相当简单的解决方案，所以我分享它......

```
SETLOCAL EnableExtensions
set EXE=MyProg.exe
FOR /F %%x IN ('tasklist /NH /FI "IMAGENAME eq %EXE%"') DO IF NOT %%x == %EXE% (
  echo %EXE% is Not Running
) 
```

这对我很有效......

以上为编辑。原始代码中显然有一个 GOTO，评论中的某些人认为这很不礼貌。

### 空间

如果您担心程序名称中可能有空格，那么您需要稍微复杂化代码：

```
SETLOCAL EnableExtensions
set EXE=My Prog.exe
FOR /F %%x IN ("%EXE%") do set EXE_=%%x
FOR /F %%x IN ('tasklist /NH /FI "IMAGENAME eq %EXE%"') DO IF NOT %%x == %EXE_% (
  echo %EXE% is Not Running
) 
```

无论*其他*正在运行的进程名称中是否包含空格，原始代码都可以正常工作。唯一关心的是我们所针对的进程是否有空间。

### 别的

请记住，如果您添加一个 ELSE 子句，那么它将为已经运行的应用程序的*每个实例执行一次。*无法保证在您运行此脚本时只有一个实例在运行。

如果您仍然想要一个，则指示一个 GOTO 或一个标志变量。

理想情况下，目标应用程序应该已经互斥自身以防止多个实例，但这是另一个 SO 问题的主题，不一定适用于该问题的主题。

### 再次转到

我同意“ELSE”的评论。GOTO-less 解决方案的问题是，可能会多次运行条件部分（和 ELSE 部分），所以它有点混乱，因为它无论如何都必须退出循环。（抱歉，我在这里不处理 SPACE 问题，因为它似乎非常罕见，并且显示了解决方案）

```
SETLOCAL EnableExtensions
SET EXE=MyProg.exe
REM for testing
REM SET EXE=svchost.exe
FOR /F %%x IN ('tasklist /NH /FI "IMAGENAME eq %EXE%"') DO IF NOT %%x == %EXE% (
  ECHO %EXE% is Not Running
  REM This GOTO may be not necessary
  GOTO notRunning
) ELSE (
  ECHO %EXE is running
  GOTO Running
)
...
:Running
REM If Running label not exists, it will loop over all found tasks 
```

* * *

## 回答 #4

> 赞同：29
> 
> 时间：2017-05-11T17:57:43.177

npocmaka 使用 QPROCESS 而不是 TASKLIST 的建议很棒，但是它的答案是如此庞大和复杂，以至于我觉得有义务发布一个相当简化的版本，我想这将解决大多数非高级用户的问题：

```
QPROCESS "myprocess.exe">NUL
IF %ERRORLEVEL% EQU 0 ECHO "Process running" 
```

上面的代码在 Windows 7 中进行了测试，用户具有管理员权限。

* * *

## 回答 #5

> 赞同：22
> 
> 时间：2017-01-16T19:59:20.900

```
TASKLIST | FINDSTR ProgramName || START "" "Path\ProgramName.exe" 
```

* * *

## 回答 #6

> 赞同：20
> 
> 时间：2011-01-24T14:23:19.847

在 Windows 下，您可以使用 Windows Management Instrumentation (WMI) 来确保不会启动具有指定命令行的应用程序，例如：

`wmic process where (name="nmake.exe") get commandline | findstr /i /c:"/f load.mak" /c:"/f build.mak" > NUL && (echo THE BUILD HAS BEEN STARTED ALREADY! > %ALREADY_STARTED% & exit /b 1)`

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2014-09-24T18:35:16.530

TrueY 的答案似乎是最优雅的解决方案，但是，我不得不做一些乱七八糟的事情，因为我不明白到底发生了什么。让我把事情弄清楚，希望能为下一个人节省一些时间。

TrueY 修改后的答案：

```
::Change the name of notepad.exe to the process .exe that you're trying to track
::Process names are CASE SENSITIVE, so notepad.exe works but Notepad.exe does NOT
::Do not change IMAGENAME
::You can Copy and Paste this into an empty batch file and change the name of
::notepad.exe to the process you'd like to track
::Also, some large programs take a while to no longer show as not running, so
::give this batch a few seconds timer to avoid a false result!!

@echo off
SETLOCAL EnableExtensions

set EXE=notepad.exe

FOR /F %%x IN ('tasklist /NH /FI "IMAGENAME eq %EXE%"') DO IF %%x == %EXE% goto ProcessFound

goto ProcessNotFound

:ProcessFound

echo %EXE% is running
goto END
:ProcessNotFound
echo %EXE% is not running
goto END
:END
echo Finished! 
```

无论如何，我希望这会有所帮助。我知道有时如果您像我一样是新手，有时阅读批处理/命令行可能会让人感到困惑。

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2008-12-02T18:29:57.037

[我使用安装在 Program Files\PV 中的http://www.teamcti.com/pview/prcview.htm](http://www.teamcti.com/pview/prcview.htm)的PV.exe和一个像这样的批处理文件：

```
@echo off
PATH=%PATH%;%PROGRAMFILES%\PV;%PROGRAMFILES%\YourProgram
PV.EXE YourProgram.exe >nul
if ERRORLEVEL 1 goto Process_NotFound
:Process_Found
echo YourProgram is running
goto END
:Process_NotFound
echo YourProgram is not running
YourProgram.exe
goto END
:END 
```

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2011-08-10T08:04:34.163

[Matt Lacey 提供](https://stackoverflow.com/questions/162291/how-to-check-if-a-process-is-running-via-a-batch-script/162361#162361)的答案适用于 Windows XP。但是，在 Windows Server 2003 中，该行

```
 tasklist /FI "IMAGENAME eq notepad.exe" /FO CSV > search.log 
```

返回

> 信息：没有运行符合指定条件的任务。

然后在进程运行时读取它。

我没有大量的批处理脚本经验，所以我的解决方案是在`search.log`文件中搜索进程名称并将结果泵入另一个文件并搜索任何输出。

```
tasklist /FI "IMAGENAME eq notepad.exe" /FO CSV > search.log

FINDSTR notepad.exe search.log > found.log

FOR /F %%A IN (found.log) DO IF %%~zA EQU 0 GOTO end

start notepad.exe

:end

del search.log
del found.log 
```

我希望这对其他人有帮助。

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2014-07-30T16:19:47.700

我喜欢`WMIC`和`TASKLIST`工具，但它们在 Windows 的家庭/基本版中不可用。另一种方法是使用`QPROCESS`几乎每台 Windows 机器上可用的命令（对于那些有终端服务的机器 - 我认为只有在没有 SP2 的情况下才能赢得 XP，所以几乎每个窗户机）：

```
@echo off
:check_process
setlocal
if "%~1" equ "" echo pass the process name as forst argument && exit /b 1
:: first argument is the process you want to check if running
set process_to_check=%~1
:: QPROCESS can display only the first 12 symbols of the running process
:: If other tool is used the line bellow could be deleted
set process_to_check=%process_to_check:~0,12%

QPROCESS * | find /i "%process_to_check%" >nul 2>&1 && (
    echo process %process_to_check%  is running
) || (
    echo process %process_to_check%  is not running
)
endlocal 
```

[**`QPROCESS`**](http://ss64.com/nt/query-process.html)命令没有那么强大，并且仅限于显示进程名称的 12 个符号，但如果不可用`TASKLIST`，则应予以考虑。`TASKLIST`

更简单的用法，如果进程作为参数，则使用名称（在`.exe`传递可执行名称的情况下，后缀是强制性的）：

```
@echo off
:check_process
setlocal
if "%~1" equ "" echo pass the process name as forst argument && exit /b 1
:: first argument is the process you want to check if running
:: .exe suffix is mandatory
set "process_to_check=%~1"

QPROCESS "%process_to_check%" >nul 2>&1 && (
    echo process %process_to_check%  is running
) || (
    echo process %process_to_check%  is not running
)
endlocal 
```

两种使用方式的区别在于`QPROCESS`，`QPROCESS *`将列出所有进程，而`QPROCESS some.exe`仅过滤当前用户的进程。

`WMI`通过 Windows 脚本主机 exe 而不是使用对象`WMIC`也是一个选项。它也应该在每台 Windows 机器上运行（不包括关闭 WSH 的机器，但这是一种罕见的情况）。这里是通过 WMI 列出所有进程的 bat 文件类，并且可以`QPROCESS`在上面的脚本中使用（它是 jscript/bat 混合体，应另存为`.bat`）：

```
@if (@X)==(@Y) @end /* JSCRIPT COMMENT **

@echo off
cscript //E:JScript //nologo "%~f0"
exit /b

************** end of JSCRIPT COMMENT **/

var winmgmts = GetObject("winmgmts:\\\\.\\root\\cimv2");
var colProcess = winmgmts.ExecQuery("Select * from Win32_Process");
var processes =  new Enumerator(colProcess);
for (;!processes.atEnd();processes.moveNext()) {
    var process=processes.item();
    WScript.Echo( process.processID + "   " + process.Name );
} 
```

以及检查进程是否正在运行的修改：

```
@if (@X)==(@Y) @end /* JSCRIPT COMMENT **

@echo off
if "%~1" equ "" echo pass the process name as forst argument && exit /b 1
:: first argument is the process you want to check if running
set process_to_check=%~1

cscript //E:JScript //nologo "%~f0" | find /i "%process_to_check%" >nul 2>&1 && (
    echo process %process_to_check%  is running
) || (
    echo process %process_to_check%  is not running
)

exit /b

************** end of JSCRIPT COMMENT **/

var winmgmts = GetObject("winmgmts:\\\\.\\root\\cimv2");
var colProcess = winmgmts.ExecQuery("Select * from Win32_Process");
var processes =  new Enumerator(colProcess);
for (;!processes.atEnd();processes.moveNext()) {
    var process=processes.item();
    WScript.Echo( process.processID + "   " + process.Name );
} 
```

这两个选项可用于没有`TASKLIST`.

终极技术是使用`MSHTA`. 这将在 XP 及更高版本的每台 Windows 机器上运行，并且不依赖于 Windows 脚本主机设置。的调用`MSHTA`可能会降低一点性能（再次应保存为 bat）：

```
@if (@X)==(@Y) @end /* JSCRIPT COMMENT **
@echo off

setlocal
if "%~1" equ "" echo pass the process name as forst argument && exit /b 1
:: first argument is the process you want to check if running

set process_to_check=%~1

mshta "about:<script language='javascript' src='file://%~dpnxf0'></script>" | find /i "%process_to_check%" >nul 2>&1 && (
    echo process %process_to_check%  is running
) || (
    echo process %process_to_check%  is not running
)
endlocal
exit /b
************** end of JSCRIPT COMMENT **/

   var fso= new ActiveXObject('Scripting.FileSystemObject').GetStandardStream(1);

   var winmgmts = GetObject("winmgmts:\\\\.\\root\\cimv2");
   var colProcess = winmgmts.ExecQuery("Select * from Win32_Process");
   var processes =  new Enumerator(colProcess);
   for (;!processes.atEnd();processes.moveNext()) {
    var process=processes.item();
    fso.Write( process.processID + "   " + process.Name + "\n");
   }
   close(); 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2008-10-02T13:50:16.360

我不知道如何使用内置 CMD 执行此操作，但如果您有 [grep](http://unxutils.sourceforge.net/)，您可以尝试以下操作：

```
tasklist /FI "IMAGENAME eq myApp.exe" | grep myApp.exe
if ERRORLEVEL 1 echo "myApp is not running" 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2018-05-11T19:38:18.740

只是提一下，如果您的任务名称真的很长，那么它不会完整地出现在`tasklist`结果中，因此检查相反的名称可能更安全（除了本地化）。

[这个答案](https://stackoverflow.com/a/1329790/1037948)的变化：

```
:: in case your task name is really long, check for the 'opposite' and find  the message when it's not there
tasklist /fi "imagename eq yourreallylongtasknamethatwontfitinthelist.exe" 2>NUL | find /I /N "no tasks are running">NUL
if "%errorlevel%"=="0" (
    echo Task Found
) else (
    echo Not Found Task
) 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2020-04-24T18:15:38.247

我需要一个重试的解决方案。此代码将一直运行，直到找到该进程，然后将其终止。如果你愿意，你可以设置一个超时或任何东西。

笔记：

*   “.exe”是强制性的
*   您可以使用参数使文件可运行，版本如下

```
 :: Set programm you want to kill
    :: Fileextension is mandatory
    SET KillProg=explorer.exe

    :: Set waiting time between 2 requests in seconds
    SET /A "_wait=3"

    :ProcessNotFound
        tasklist /NH /FI "IMAGENAME eq %KillProg%" | FIND /I "%KillProg%"
        IF "%ERRORLEVEL%"=="0" (
            TASKKILL.EXE /F /T /IM %KillProg%
        ) ELSE (
            timeout /t %_wait%
            GOTO :ProcessNotFound
        ) 
```

`taskkill.bat`：

```
 :: Get program name from argumentlist
    IF NOT "%~1"=="" (
        SET "KillProg=%~1"
    ) ELSE (
        ECHO Usage: "%~nx0" ProgramToKill.exe & EXIT /B
    )

    :: Set waiting time between 2 requests in seconds
    SET /A "_wait=3"

    :ProcessNotFound
        tasklist /NH /FI "IMAGENAME eq %KillProg%" | FIND /I "%KillProg%"
        IF "%ERRORLEVEL%"=="0" (
            TASKKILL.EXE /F /T /IM %KillProg%
        ) ELSE (
            timeout /t %_wait%
            GOTO :ProcessNotFound
        ) 
```

运行`.\taskkill.bat ProgramToKill.exe`

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2021-05-12T08:39:13.683

如果您有多个同名的 .exe 文件并且您只想检查其中一个（例如，您关心 C:\MyProject\bin\release\MyApplication.exe 而不是 C:\MyProject\bin\debug \MyApplication.exe) 那么您可以使用以下命令：

```
@echo off

set "workdir=C:\MyProject\bin\release"
set "workdir=%workdir:\=\\%"

setlocal enableDelayedExpansion
for /f "usebackq tokens=* delims=" %%a in (`
    wmic process  where 'CommandLine like "%%!workdir!%%" and not CommandLine like "%%RuntimeBroker%%"'   get CommandLine^,ProcessId  /format:value
`) do (
    for /f "tokens=* delims=" %%G in ("%%a")  do (
        if "%%G" neq "" (
rem            echo %%G
            set "%%G"
rem            echo !ProcessId!
            goto :TheApplicationIsRunning
        )
    )
) 

echo The application is not running
exit /B

:TheApplicationIsRunning
echo The application is running
exit /B 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2013-09-18T13:44:48.323

基于[vtrz 的回答](https://stackoverflow.com/a/4783062/333599)和[Samuel Renkert 对另一个主题的回答](https://stackoverflow.com/a/334890/333599)，我提出了以下脚本，该脚本仅在`%EXEC_CMD%`尚未运行时运行：

```
@echo off
set EXEC_CMD="rsync.exe"
wmic process where (name=%EXEC_CMD%) get commandline | findstr /i %EXEC_CMD%> NUL
if errorlevel 1 (
    %EXEC_CMD% ...
) else (
    @echo not starting %EXEC_CMD%: already running.
) 
```

如前所述，这需要管理权限。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2008-10-02T13:37:29.917

我假设这里有窗户。因此，您需要使用 WMI 来获取该信息。查看 The Scripting Guy 的[档案](http://www.microsoft.com/technet/scriptcenter/resources/qanda/hsgarch.mspx)以获取有关如何从脚本中使用 WMI 的大量示例。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2010-06-23T15:57:31.430

我使用了[Matt](https://stackoverflow.com/questions/162291/how-to-check-if-a-process-is-running-via-a-batch-script/162361#162361) (2008-10-02) 提供的脚本。我唯一遇到的问题是它不会删除`search.log`文件。我希望是因为我不得不`cd`到另一个地方开始我的程序。我`cd`会回到 BAT 文件所在的`search.log`位置，但它仍然不会删除。所以我通过`search.log`首先删除文件而不是最后一个来解决这个问题。

```
del search.log

tasklist /FI "IMAGENAME eq myprog.exe" /FO CSV > search.log

FOR /F %%A IN (search.log) DO IF %%-zA EQU 0 GOTO end

cd "C:\Program Files\MyLoc\bin"

myprog.exe myuser mypwd

:end 
```

* * *

## 回答 #18

> 赞同：-1
> 
> 时间：2017-03-22T09:13:17.927

我通常在 cmd 提示符下执行以下命令来检查我的 program.exe 是否正在运行：

```
tasklist | grep program 
```

* * *

## 回答 #19

> 赞同：-2
> 
> 时间：2008-10-02T13:36:45.457

您应该检查父进程名称，请参阅有关基于[.NET 的解决方案](http://www.codeproject.com/KB/cs/ParentProcWindow.aspx)[的代码项目](http://en.wikipedia.org/wiki/The_Code_Project)文章** 。

一种非程序化的检查方式：

1.  启动 Cmd.exe
2.  启动应用程序（例如，`c:\windows\notepad.exe`）
3.  [在Process Explorer](http://en.wikipedia.org/wiki/Process_Explorer)中检查 Notepad.exe 进程的属性
4.  检查父进程（显示 cmd.exe）

可以通过获取父进程名称来检查相同的内容。

# reporting-services - 图表中的字体问题（Reporting services 2008）

> ID：162295
> 
> 赞同：2
> 
> 时间：2008-10-02T13:35:34.667
> 
> 标签：reporting-services

在使用 RS 2008 beta、RC0 等生成图表时，我从未为轴标签、图例等指定任何字体。默认情况下，它们都使用 Arial 字体呈现，看起来很棒。但是一旦我们切换到 RS 2008 final，字体就变得一团糟——它们以某种粗体控制台字体呈现。

我最初的想法是默认更改 - 我尝试将字体显式设置为 Arial（通过 RDL 或设计器）。那没有用 - 只有某些字体似乎可以工作（例如 Calibri）。更奇怪的是，图例不听字体设置——总是渲染成这种丑陋的粗体。另一种想法是字体可能在某处丢失，但是，Tablix 元素使用相同的字体并且它们似乎可以工作。

这种行为是普遍的——使用开发工作室预览、报告查看控件以及将其导出为所有可用格式时都可以看到。

所以，很明显，我被困住了——有没有人遇到过这种行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-03T01:56:10.470

我以前见过这种行为。不是在 SSRS 中，而是在 .NET 桌面应用程序中的 GDI+ 渲染中。它与不支持透明度的抗锯齿和调色板有关 - 字形周围的所有近乎透明的像素都被强制为纯色。

使用 Calibri 之类的后 LCD 字体无法获得这种效果，因为它们与像素边界对齐，以便在具有清晰像素的 LCD 显示器上更好地呈现。CRT 允许颜色渗入相邻像素，产生本质上是模拟抗锯齿的效果。（这就是为什么电视图片看起来比考虑到它们可怕的低分辨率要好得多的原因。）

我确实找到了使用 GDI 的方法，当我记得时我会告诉你。也就是说，您无权访问渲染代码，因此您可能无法应用修复程序。实际上我想我刚刚记得 - 你明确地将背景设置为白色而不是透明，迫使 GDI 合成边缘颜色而不是希望显卡能做到这一点。我不知道你是否可以使用这个答案，对不起。

# web-services - 如何重播肥皂消息？

> ID：162296
> 
> 赞同：0
> 
> 时间：2008-10-02T13:35:48.847
> 
> 标签：web-services, security, soap

我想对我的服务器重播肥皂消息。我已经记录了一些消息，并且我已经篡改了时间戳、soapbody 等，现在我希望看到我的 SecurityAssertions 像 xmastrees 一样亮起。部署的服务器将使用客户端证书和服务器证书进行身份验证，整个消息流将使用 ssl 加密。但我仍然想用 http 测试实现并且不进行身份验证。

重播肥皂信息会怎样？是否有任何应用程序可以轻松做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-10-02T14:08:50.233

你可以试试soapUI。它具有很多与 Web 服务交互的功能，包括为它们创建测试，您可以在其中重放消息。

# ruby-on-rails - RoR：模型验证问题

> ID：162298
> 
> 赞同：4
> 
> 时间：2008-10-02T13:36:30.387
> 
> 标签：ruby-on-rails, ruby

我有一个基本的 ActiveRecord 模型，其中有两个要验证的字段。要求是至少其中一个字段必须具有值。两者都可以有值，但至少有一个需要一个值。

我该如何表达

```
validates_presence_of 
```

陈述？例如：

```
validates_presence_of :main_file
validates_presence_of :alt_file 
```

如果只有其中一个为空，我不希望生成错误，除非两者都是空的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-10-02T13:44:16.953

```
validates_presence_of :main_file, :if => Proc.new { |p| p.alt_file.blank? }
validates_presence_of :alt_file, :if => Proc.new { |p| p.main_file.blank? } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-10-02T14:24:25.547

改变.nil？.空白？成功了！

# c# - 将 Char[] 转换为列表 （C＃）

> ID：162303
> 
> 赞同：4
> 
> 时间：2008-10-02T13:36:59.687
> 
> 标签：c#, generics

如何将 Char[] （任意长度）转换为 List ？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2008-10-02T13:40:42.610

首先，您需要了解 .NET 中的字符不是字节。要在字符（文本类型）和字节（二进制类型）之间进行转换，您需要使用编码（请参阅 System.Text.Encoding）。

编码可以让你在 string/char[] 和 byte[] 之间进行转换。一旦你有了一个字节数组，有多种方法可以将它转换成 List<byte>——尽管你甚至可能不需要，因为 byte[] 实现了 IList<byte>。

有关文本转换方面的更多信息（以及指向更多文章的链接），请参阅[我关于 Unicode的文章。](http://pobox.com/~skeet/csharp/unicode.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-10-02T14:24:11.537

我设法使用以下方法来完成工作：

```
byte[] arr = new System.Text.UTF8Encoding( true ).GetBytes( str );
List<byte> byteList = new List<byte>( arr ); 
```

谢谢你的帮助

# windows - 如何通过 bat 文件关闭、重新启动或注销 Windows？

> ID：162304
> 
> 赞同：673
> 
> 时间：2008-10-02T13:37:01.527
> 
> 标签：windows, batch-file, command-line, restart, shutdown

我一直在使用[远程桌面连接](https://en.wikipedia.org/wiki/Remote_Desktop_Services#Remote_Desktop_Connection)进入工作站。但是在这种环境下，我无法使用开始菜单中的电源选项。我需要另一种关闭或重新启动的方法。

如何通过命令行控制计算机的电源状态？

* * *

## 回答 #1

> 赞同：1174
> 
> 时间：2008-10-02T13:37:28.357

使用该[`shutdown`](https://ss64.com/nt/shutdown.html)命令的最常见方法是：

*   `shutdown -s`- 关闭。
*   `shutdown -r`— 重新启动。
*   `shutdown -l`— 注销。
*   `shutdown -h`— 冬眠。

    **注意：**有一个常见的陷阱，用户认为`-h`“帮助”的意思是“帮助”（它对所有其他命令行程序都是如此……除了`shutdown.exe`，它的意思是“休眠”）。然后他们运行`shutdown -h`并意外关闭了他们的计算机。请注意这一点。

*   `shutdown -i`——“互动模式”。它不执行操作，而是显示一个 GUI 对话框。

*   `shutdown -a`— 中止先前的关闭命令。

上面的命令可以与这些附加选项结合使用：

*   `-f`— 强制程序退出。防止关机过程卡住。
*   `-t <seconds>`— 设置关机前的时间。用于`-t 0`立即关机。
*   `-c <message>`— 添加关闭消息。该消息将最终出现在事件日志中。
*   `-y`— 对所有关闭查询强制回答“是”。

    **注意：**此选项未记录在任何官方文档中。它是由[这些 StackOverflow 用户](https://stackoverflow.com/questions/46071009/what-exactly-does-shutdown-y-do)发现的。

* * *

我想确保与这个答案一起提到其他一些非常好的答案。在这里，它们没有特定的顺序。

*   [`-f`](https://stackoverflow.com/questions/162304/how-do-i-shutdown-restart-logoff-via-bat-file#162342)[JosephStyons](https://stackoverflow.com/users/672/kogus)[的](https://stackoverflow.com/questions/162304/how-do-i-shutdown-restart-logoff-via-bat-file#162342)[选择](https://stackoverflow.com/questions/162304/how-do-i-shutdown-restart-logoff-via-bat-file#162342)_
*   [`rundll32`](https://stackoverflow.com/questions/162304/how-do-i-shutdown-restart-logoff-via-bat-file#162398)从[VonC](https://stackoverflow.com/users/6309/vonc)[使用](https://stackoverflow.com/questions/162304/how-do-i-shutdown-restart-logoff-via-bat-file#162398)
*   [迪恩](https://stackoverflow.com/users/14966/dean) 的[运行箱](https://stackoverflow.com/questions/162304/how-do-i-shutdown-restart-logoff-via-bat-file#162428)
*   从[Kip](https://stackoverflow.com/users/18511/kip)[远程关机](https://stackoverflow.com/questions/162304/how-do-i-shutdown-restart-logoff-windows-via-bat-file#416830)

* * *

## 回答 #2

> 赞同：377
> 
> 时间：2008-10-02T13:45:10.930

如果您在远程计算机上，您可能还需要添加 -f 选项以**强制**重新启动。否则您的会话可能会关闭，并且顽固的应用程序可能会挂起系统。

每当我想强制立即重新启动时，我都会使用它：

```
shutdown -t 0 -r -f 
```

要获得更友好的“给他们一些时间”选项，您可以使用以下命令：

```
shutdown -t 30 -r 
```

正如您在评论中看到的那样，超时暗示了 -f 。

[Brutus 2006 是一个为这些选项提供 GUI 的实用程序。](http://www.proffs.nu/brutus.htm)

* * *

## 回答 #3

> 赞同：82
> 
> 时间：2009-01-06T14:51:57.987

没有人提到`-m`远程关闭的选项：

```
shutdown -r -f -m \\machinename 
```

还：

*   该`-r`参数会导致重新启动（这通常是您在远程计算机上想要的，因为物理启动它可能很困难）。
*   `-f`参数选项强制重启。
*   当然，您必须具有适当的权限才能关闭远程机器。

* * *

## 回答 #4

> 赞同：39
> 
> 时间：2008-10-02T13:56:18.670

原始答案：2008 年 10 月

你也得到了所有~~" **`rundll32.exe shell32.dll`**"~~系列：

（见下面的更新）

*   `rundll32.exe user.exe,**ExitWindows**`[快速关闭 Windows]
*   `rundll32.exe user.exe,**ExitWindowsExec**`[重新启动 Windows]

    ```
    rundll32.exe shell32.dll,SHExitWindowsEx n 
    ```

`n`代表：

*   0 -`LOGOFF`
*   1 -`SHUTDOWN`
*   2 -`REBOOT`
*   4 -`FORCE`
*   8 -`POWEROFF`

（可以组合 -> 6 = 2+4 `FORCE REBOOT`）

* * *

## 2015 年 4 月更新（6 年后）：

[1800 INFORMATION](https://stackoverflow.com/users/3146/1800-information)请[在评论中指出](https://stackoverflow.com/questions/162304/how-do-i-shutdown-restart-logoff-windows-via-bat-file/162398#comment47942248_162398)：

> 请勿`rundll32.exe`用于此目的。它期望您在命令行上传递的函数具有非常具体的方法签名 - 它与`ExitWindows`.

[雷蒙德陈](http://blogs.msdn.com/b/oldnewthing/)写道：

*   在 2004 年“[不匹配调用约定时会出现什么问题？](https://devblogs.microsoft.com/oldnewthing/20040115-00/?p=41043) ”：

> 调用的函数所需的函数签名`rundll32.exe`是：

```
void CALLBACK ExitWindowsEx(HWND hwnd, HINSTANCE hinst,
       LPSTR pszCmdLine, int nCmdShow); 
```

> 这并没有阻止人们使用`rundll32`来调用并非设计为由`rundll32`、 like`user32 LockWorkStation`或调用的随机函数`user32 ExitWindowsEx`。

（哎呀）

> ExitWindowsEx 的实际函数签名是：

```
BOOL WINAPI ExitWindowsEx(UINT uFlags, DWORD dwReserved); 
```

*   2011年：“[在人行道上扔垃圾：rundll32程序的悲惨历史](https://devblogs.microsoft.com/oldnewthing/20110909-00/?p=9683)”

并使其一目了然：

*   在 2013 年“[什么时候使用 rundll32 有什么指导？简单：不要使用它](https://devblogs.microsoft.com/oldnewthing/20130104-00/?p=5643)”：

> `Rundll32`它是 Windows 95 的遗留物，至少从 Windows Vista 开始就已被弃用，因为它违反了许多现代工程准则。

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2011-06-10T03:12:53.407

另一个小提示：在执行批处理文件路由时，我希望能够中止它，以防我意外运行它。因此，批处理文件会调用关闭，但之后会让您处于命令提示符下。

```
@echo off
echo Shutting down in 10 seconds. Please type "shutdown /a" to abort.
cmd.exe /K shutdown /f /t 10 /r 
```

[另外，由于它是在计时器上的，因此您会获得与在俄勒冈小径狩猎](http://en.wikipedia.org/wiki/The_Oregon_Trail_%28video_game%29#Hunting)时一样的快感。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2008-10-02T13:57:09.013

当远程进入一台机器时（目标是 Windows XP；我不确定目标是 Windows Vista），虽然开始菜单上的*Shutdown*被*Disconnect Session*或类似的东西取代，但应该有一个名为“Windows Security”的也可以与欧文指出的`Ctrl`++相同。`Alt``End`

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2008-10-02T14:01:24.337

您可能已经意识到这一点，但以防万一：`shutdown -r`在“运行”框中输入（或您喜欢的任何命令）并按 Enter 键会容易得多。

保存到处都是批处理文件。

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2010-03-11T16:47:42.827

我会在[记事本](http://en.wikipedia.org/wiki/Notepad_%28software%29)或[写字板](http://en.wikipedia.org/wiki/WordPad)中写这个作为基本的注销命令：

```
@echo off
shutdown -l 
```

这与手动单击开始和注销基本相同，但如果您准备好批处理文件，则速度会稍快一些。

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2018-08-15T14:59:47.113

我迟到了，但还没有看到这个答案。当您不想使用批处理文件或键入命令时。您可以将焦点设置到桌面，然后使用`Alt`+ `F4`。

Windows 会询问您要做什么，选择关机或重新启动。

有关屏幕截图甚至视频，请参阅：[https ://tinkertry.com/how-to-shutdown-or-restart-windows-over-rdp](https://tinkertry.com/how-to-shutdown-or-restart-windows-over-rdp)

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2020-11-05T18:52:47.430

[对关闭](https://ss64.com/nt/shutdown.html)和`rundll32.exe shell32.dll,SHExitWindowsEx n`命令的一些补充。

[**注销**](https://docs.microsoft.com/en-us/windows-server/administration/windows-commands/logoff)- 允许您通过 sessionid 或会话名称注销用户

[**PSShutdown**](https://docs.microsoft.com/en-us/sysinternals/downloads/psshutdown) - 需要从 Windows sysinternals 下载。

[**bootim.exe**](https://social.technet.microsoft.com/Forums/en-US/75098877-ff3b-452d-9865-9ca9ed51fd5b/bootimexe-and-boot-immersive-menu?forum=win10itprogeneral) - Windows 10/8 关机 iu

[**change/chggon**](https://docs.microsoft.com/en-us/windows-server/administration/windows-commands/chglogon) - 防止新用户登录或进行另一个会话

[**NET SESSION /DELETE**](https://ss64.com/nt/net-session.html) - 结束用户的会话

[**wusa /forcerestart /quiet**](https://ss64.com/nt/wusa.html) - windows 更新管理器也可以重启机器

[**tsdiscon**](https://docs.microsoft.com/en-us/windows-server/administration/windows-commands/tsdiscon) - 断开你

**rdpinit** - 将您注销，但目前我找不到任何文档

# c++ - 如何从 32 位代码以 64 位启动 Windows 进程？

> ID：162309
> 
> 赞同：10
> 
> 时间：2008-10-02T13:37:46.827
> 
> 标签：c++, winapi, 64-bit, registry

要在写入 HKLM 注册表配置单元时在 Vista 中弹出 UAC 对话框，我们选择不使用 Win32 Registry API，因为当缺少 Vista 权限时，我们需要使用管理员权限重新启动整个应用程序。相反，我们这样做：

```
ShellExecute(hWnd, "runas" /* display UAC prompt on Vista */, windir + "\\Reg", "add HKLM\\Software\\Company\\KeyName /v valueName /t REG_MULTI_TZ /d ValueData", NULL, SW_HIDE); 
```

此解决方案运行良好，除了我们的应用程序是 32 位应用程序之外，它运行 REG.EXE 命令，因为它是使用 WOW 兼容层的 32 位应用程序！:( 如果 REG.EXE 从命令行运行，它会在 64 位模式下正确运行。这很重要，因为如果它作为 32 位应用程序运行，由于[注册表反射](http://msdn.microsoft.com/en-us/library/aa384235(VS.85).aspx)，注册表项最终会出现在错误的位置.

那么有什么方法可以从 32 位应用程序以编程方式启动 64 位应用程序，而不是像其父 32 位进程一样使用 WOW64 子系统运行它（即任务管理器中的“*”后缀）？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2010-05-10T10:40:14.493

试试这个（来自 32 位进程）：

```
> %WINDIR%\sysnative\reg.exe query ... 
```

（发现[here](http://ovidiupl.spaces.live.com/blog/cns!1E8A6038167E4BE9!925.entry)）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-10-02T13:49:30.637

运行 32 位还是 64 位本机（非托管）程序完全取决于可执行文件。有两个副本`reg.exe`，分别位于 C:\Windows\System32（64 位）和 C:\Windows\SysWOW64（32 位）中。因为您没有指定路径，所以您将获得`PATH`环境变量中首先出现的任何内容，这是 32 位进程的 32 位版本。

您应该真正将此函数分解为单独的程序或 COM 对象，并使用清单标记该程序，或使用[COM 提升名字](http://msdn.microsoft.com/en-us/library/ms679687(VS.85).aspx)对象启动 COM 对象。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-10-02T13:42:33.510

您是否考虑过创建一个小型“助手”应用程序来为您更新注册表？如果您将其编译为 64 位并包含表明它需要管理员权限的清单，那么它将为您涵盖这两个基础。

有 API 可以检测您正在运行的操作系统的“位数”，因此可以想象，您可以编译 RegistryUpdate32.exe 和 RegistryUpdate64.exe 并调用相关的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-12-28T23:06:14.303

我为自己做的一件事是 PInvoke 禁用重定向：

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa365744(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365744(v=vs.85).aspx)

您可以随时重新打开它。

# java - Spring在Struts + Spring + Hibernate中的作用是什么？

> ID：162310
> 
> 赞同：10
> 
> 时间：2008-10-02T13:37:48.560
> 
> 标签：java, hibernate, spring, struts

Spring 在 Struts + Spring + Hibernate 中扮演什么角色？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2008-10-02T13:44:48.480

Spring 提供了许多不同的“模块”，不同的程序员将使用 Spring 的不同部分。

但是，通常在这种堆栈中，您会看到 Spring 被用作

*   依赖注入的控制容器反转
*   Hibernate 的抽象称为“HibernateTemplate”
*   用于简化面向方面编程的框架类
*   事务支持，通常通过 IoC 容器和 AOP“以声明方式”进行。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-11-04T18:49:47.307

好吧，Hibernate 处理持久性部分，JSP 处理您的 GUI，Struts 控制页面/动作/等之间的流程，Spring 可以管理所有包含主要业务逻辑的 bean，而不是使用 EJB。此外，它还可以简化 Hibernate DAO 的编码和事务管理。不必编写 Locator 代码以通过 JNDI 和所有这些东西获取一些 EJB，您只需获取 Spring ApplicationContext 并请求您需要的 bean。Spring 中定义的所有 bean 都可以相互连接。如果您必须通过 JNDI 将您的一个 bean 连接到外部 EJB，您甚至可以在不使用任何代码的情况下执行此操作（Spring 提供了一个 JNDI 代理对象，该对象获取您给它的引用并将其作为具有您指定接口的对象返回）。这可以帮助您简化所有这些 bean 的单元测试并更改配置而无需重新编码；您可以使用 Spring 的 PlatformTransactionManager 之一来管理 DataSource 或将其指向 J2EE 容器的 JTA 管理器；定义您自己的池化数据源或使用通过 JNDI 发布的容器的数据源等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-16T13:34:10.913

好补充；

（视图和控制器） Struts 具有广泛的 JSP 特性以及 Struts 标记和 Web 请求处理特性

（服务和应用程序管理） Spring 以其出色的依赖注入等来处理 ORM 和服务层。

（具有数据库独立性的 ORM）Hibernate 用于久经考验的 ORM

# database - Firebird 1.5.3：如何将已连接用户的 FK 添加到数据库？

> ID：162322
> 
> 赞同：3
> 
> 时间：2008-10-02T13:40:30.643
> 
> 标签：database, foreign-keys, firebird

我使用 FB1.5.3，最终需要向数据库添加一些 FK。碰巧的是，如果我在其他人连接到数据库时尝试这样做，我会遇到异常。

有没有办法在系统运行时添加 FK？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-05T21:49:38.090

不可能。

这是一个已知的限制，已在 Firebird 2.0 中删除。你要么升级，要么接受它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-02T18:09:27.173

我相信这是对 firebird 1.5 及更早版本的限制。
尝试谷歌（火鸟外键“对象正在使用”）。
hth

# sql - 数百万行的 SQL 重复删除查询以提高性能

> ID：162325
> 
> 赞同：2
> 
> 时间：2008-10-02T13:41:58.580
> 
> 标签：sql, sql-server, duplicate-data, sql-delete

这是一次冒险。[我从上一个问题](https://stackoverflow.com/questions/161960)中的循环重复查询开始，但每个循环都会遍历所有**1700 万条记录**，**这意味着它需要数周时间**（仅`*select count * from MyTable*`使用 MSSQL 2005 运行我的服务器需要 4:30 分钟）。我从这个网站和这篇[文章](http://weblogs.sqlteam.com/jeffs/archive/2007/03/28/60146.aspx)中得到了一些信息。

并已到达下面的查询。问题是，对于任何类型的性能，这是对 1700 万条记录运行的正确查询类型吗？如果不是，那是什么？

SQL查询：

```
DELETE tl_acxiomimport.dbo.tblacxiomlistings
WHERE RecordID in 
(SELECT RecordID
    FROM tl_acxiomimport.dbo.tblacxiomlistings
    EXCEPT
    SELECT RecordID
    FROM (
        SELECT RecordID, Rank() over (Partition BY BusinessName, latitude, longitude,           Phone ORDER BY webaddress DESC, caption1 DESC, caption2 DESC ) AS Rank
    FROM tl_acxiomimport.dbo.tblacxiomlistings
    ) al WHERE Rank = 1) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-10-02T14:38:52.220

查看 QueryPlan 会有所帮助。

这可行吗？

```
SELECT m.*
into #temp
FROM tl_acxiomimport.dbo.tblacxiomlistings m 
inner join (SELECT RecordID, 
                   Rank() over (Partition BY BusinessName, 
                                             latitude,  
                                             longitude,            
                                             Phone  
                                ORDER BY webaddress DESC,  
                                         caption1 DESC,  
                                         caption2 DESC ) AS Rank
              FROM tl_acxiomimport.dbo.tblacxiomlistings
           ) al on (al.RecordID = m.RecordID and al.Rank = 1)

truncate table tl_acxiomimport.dbo.tblacxiomlistings

insert into tl_acxiomimport.dbo.tblacxiomlistings
     select * from #temp 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-02T14:10:17.453

您的数据库、服务器、存储或它们的某种组合出现问题。4:30 的选择计数 * 似乎非常高。

运行 DBCC_SHOWCONTIG 以查看您的表的碎片程度，这可能会导致该大小的表的性能受到重大影响。

此外，要添加到 RyanKeeter 的评论，运行显示计划，如果有任何表扫描，则为该表上的 PK 字段创建索引。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-10-02T16:16:47.117

这样做不是更简单吗：

```
DELETE tl_acxiomimport.dbo.tblacxiomlistings
WHERE RecordID in 
(SELECT RecordID
   FROM (
        SELECT RecordID,
            Rank() over (Partition BY BusinessName,
                                  latitude,
                                  longitude,
                                  Phone
                         ORDER BY webaddress DESC,
                                  caption1 DESC,
                                  caption2 DESC) AS Rank
        FROM tl_acxiomimport.dbo.tblacxiomlistings
        )
  WHERE Rank > 1
  ) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-02T13:53:23.157

在查询分析器中运行：

```
SET SHOWPLAN_TEXT ON 
```

然后要求查询分析器运行您的查询。SQL Server 不会运行查询，而是生成查询计划并将其放入结果集中。

向我们展示查询计划。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-10-02T14:04:26.827

1700 万条记录不算什么。如果仅执行一次 select count(*) 需要 4:30，则存在严重问题，可能与服务器内存不足或处理器非常旧有关。

为了性能，修理机器。将其泵送至 2GB。如今，RAM 是如此便宜，以至于它的成本远远低于您的时间。

查询进行时处理器或磁盘是否抖动？如果没有，那么某些东西正在阻止呼叫。在这种情况下，您可能会考虑将数据库置于单用户模式下运行清理所需的时间。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-10-02T14:06:09.880

所以你要删除所有没有排名第一的记录？可能值得将连接与前 1 个子查询进行比较（这也可能在 2000 年有效，因为排名仅为 2005 年及以上）

您是否需要在一次操作中删除所有重复项？我假设您正在执行某种家政任务，您也许可以分段完成。

基本上创建一个循环所有记录（脏读）并删除每个记录的游标。总体上会慢很多，但每个操作都相对较少。然后你的家务就变成了一个持续的后台任务，而不是每晚的批处理。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-10-02T14:10:53.427

上面首先选择临时表的建议是您最好的选择。你也可以使用类似的东西：

```
set rowcount 1000 
```

在运行删除之前。它将在删除 1000 行后停止运行。然后一次又一次地运行它，直到删除 0 条记录。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-10-02T15:06:37.753

如果我理解正确，您的查询与

```
DELETE tl_acxiomimport.dbo.tblacxiomlistings
FROM
    tl_acxiomimport.dbo.tblacxiomlistings allRecords
    LEFT JOIN (   
        SELECT RecordID, Rank() over (Partition BY BusinessName, latitude, longitude, Phone ORDER BY webaddress DESC, caption1 DESC, caption2 DESC ) AS Rank
        FROM tl_acxiomimport.dbo.tblacxiomlistings
        WHERE Rank = 1) myExceptions
    ON allRecords.RecordID = myExceptions.RecordID
WHERE
    myExceptions.RecordID IS NULL 
```

我认为应该运行得更快，我倾向于尽可能避免使用“IN”子句来支持 JOIN。

您实际上可以通过简单地调用`SELECT *`或`SELECT COUNT(*)`在 FROM 部分上安全地测试速度和结果，例如

```
SELECT *
FROM
    tl_acxiomimport.dbo.tblacxiomlistings allRecords
    LEFT JOIN (   
        SELECT RecordID, Rank() over (Partition BY BusinessName, latitude, longitude, Phone ORDER BY webaddress DESC, caption1 DESC, caption2 DESC ) AS Rank
        FROM tl_acxiomimport.dbo.tblacxiomlistings
        WHERE Rank = 1) myExceptions
    ON allRecords.RecordID = myExceptions.RecordID
WHERE
    myExceptions.RecordID IS NULL 
```

这是我更喜欢 JOIN 方法的另一个原因，我希望这会有所帮助

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-10-02T14:03:32.507

这看起来不错，但您可能会考虑将您的数据选择到一个临时表中并在您的删除语句中使用它。我注意到这样做会带来巨大的性能提升，而不是在一个查询中完成所有操作。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-07-24T14:48:26.710

请记住，在进行大删除时，最好先做好备份。（而且我通常也会将删除的记录复制到另一个表以防万一，我需要立即恢复它们。）

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2008-10-02T19:28:48.967

除了按照建议使用 truncate 之外，我还很幸运地使用此模板从表中删除了许多行。我不记得了，但我认为使用事务有助于防止日志文件增长——尽管可能是另一个原因——不确定。在执行以下操作之前，我通常会将事务日志记录方法切换为简单方法：

```
设置行数 5000
而 1 = 1
开始
    开始翻译
            删除？？？在哪里 ？？？
            如果@@rowcount = 0
            开始
               犯罪
               休息
            结尾
    犯罪
结尾
设置行数 0

```

# javascript - 如何使用 JavaScript 在一组无线电输入中获取选中的选项？

> ID：162326
> 
> 赞同：5
> 
> 时间：2008-10-02T13:42:29.080
> 
> 标签：javascript

如何使用 JavaScript 在一组无线电输入中获取选中的选项？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-10-02T13:58:19.743

```
<html>
  <head>
    <script type="text/javascript">
      function testR(){
        var x = document.getElementsByName('r')
        for(var k=0;k<x.length;k++)
          if(x[k].checked){
            alert('Option selected: ' + x[k].value)
          }

      }
    </script>
  </head>
  <body>
    <form>
      <input type="radio" id="r1" name="r" value="1">Yes</input>
      <input type="radio" id="r2" name="r" value="2">No</input>
      <input type="radio" id="r3" name="r" value="3">Don't Know</input>
      <br/>
      <input type="button" name="check" value="Test" onclick="testR()"/>
    </form>
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-02T13:44:34.440

[http://www.somacon.com/p143.php](http://www.somacon.com/p143.php)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-10-02T14:01:26.287

如果您需要实际元素而不仅仅是选定的值，请尝试以下操作：

```
function findSelected(){
  for (i=0;i<document.formname.radioname.length;i++){
    if (document.formname.radioname[i].checked){
      return document.formname.radioname[i];
    }
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-26T19:07:23.400

通用函数（大致基于你的）

```
function getRadioGroupSelectedElement(radioGroupName) {

    var radioGroup = document.getElementsByName(radioGroupName);
    var radioElement = radioGroup.length - 1;
    for(radioElement; radioElement >= 0; radioElement--) {
        if(radioGroup[radioElement].checked){
            return radioGroup[radioElement];
        }
    }
    return false;
}

function getRadioGroupSelectedValue(radioGroupName) {

    var selectedRadio = getRadioGroupSelectedElement(radioGroupName);
    if (selectedRadio !== false) {
        return selectedRadio.value;
    }
    return false;
} 
```

# c# - 查找用于在 Windows 上打开特定文件类型的默认应用程序

> ID：162331
> 
> 赞同：60
> 
> 时间：2008-10-02T13:43:07.330
> 
> 标签：c#, .net, windows, file-type

我正在使用 C# 开发一个面向 .NET Framework 2.0 的应用程序，我需要能够找到用于打开特定文件类型的默认应用程序。

我知道，例如，如果您只想使用该应用程序打开文件，您可以使用以下内容：

```
System.Diagnostics.Process.Start( "C:\...\...\myfile.html" ); 
```

在默认浏览器中打开 HTML 文档，或

```
System.Diagnostics.Process.Start( "C:\...\...\myfile.txt" ); 
```

在默认文本编辑器中打开文本文件。

但是，我想要做的是在默认文本编辑器中打开不一定具有*.txt*扩展名的文件（例如），因此我需要能够找到用于打开 .txt 的默认应用程序*。 txt*文件，这将允许我直接调用它。

我猜我需要 P/Invoke 一些 Win32 API 才能做到这一点，但是快速浏览一下 Google 和 MSDN 并没有发现任何有趣的东西；我确实找到了大量完全不相关的页面，但没有像我正在寻找的那样。

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2013-07-21T14:31:26.730

目前所有的答案都是不可靠的。注册表是一个实现细节，确实这样的代码在我的 Windows 8.1 机器上被破坏了。正确的方法是使用 Win32 API，特别是[AssocQueryString](http://msdn.microsoft.com/en-us/library/bb773471.aspx)：

```
using System.Runtime.InteropServices;

[DllImport("Shlwapi.dll", CharSet = CharSet.Unicode)]
public static extern uint AssocQueryString(
    AssocF flags, 
    AssocStr str,  
    string pszAssoc, 
    string pszExtra, 
    [Out] StringBuilder pszOut, 
    ref uint pcchOut
); 

[Flags]
public enum AssocF
{
    None = 0,
    Init_NoRemapCLSID = 0x1,
    Init_ByExeName = 0x2,
    Open_ByExeName = 0x2,
    Init_DefaultToStar = 0x4,
    Init_DefaultToFolder = 0x8,
    NoUserSettings = 0x10,
    NoTruncate = 0x20,
    Verify = 0x40,
    RemapRunDll = 0x80,
    NoFixUps = 0x100,
    IgnoreBaseClass = 0x200,
    Init_IgnoreUnknown = 0x400,
    Init_Fixed_ProgId = 0x800,
    Is_Protocol = 0x1000,
    Init_For_File = 0x2000
}

public enum AssocStr
{
    Command = 1,
    Executable,
    FriendlyDocName,
    FriendlyAppName,
    NoOpen,
    ShellNewValue,
    DDECommand,
    DDEIfExec,
    DDEApplication,
    DDETopic,
    InfoTip,
    QuickTip,
    TileInfo,
    ContentType,
    DefaultIcon,
    ShellExtension,
    DropTarget,
    DelegateExecute,
    Supported_Uri_Protocols,
    ProgID,
    AppID,
    AppPublisher,
    AppIconReference,
    Max
} 
```

**相关文件：**

*   [关联查询字符串](http://msdn.microsoft.com/en-us/library/bb773471.aspx)
*   [协会](https://web.archive.org/web/20130217094323/https://msdn.microsoft.com/en-us/library/windows/desktop/bb762471(v=vs.85).aspx)
*   [副总裁](https://msdn.microsoft.com/en-us/library/windows/desktop/bb762475(v=vs.85).aspx)

**示例用法：**

```
static string AssocQueryString(AssocStr association, string extension)
{
    const int S_OK = 0;
    const int S_FALSE = 1;

    uint length = 0;
    uint ret = AssocQueryString(AssocF.None, association, extension, null, null, ref length);
    if (ret != S_FALSE)
    {
        throw new InvalidOperationException("Could not determine associated string");
    }

    var sb = new StringBuilder((int)length); // (length-1) will probably work too as the marshaller adds null termination
    ret = AssocQueryString(AssocF.None, association, extension, null, sb, ref length);
    if (ret != S_OK)
    {
        throw new InvalidOperationException("Could not determine associated string"); 
    }

    return sb.ToString();
} 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2008-10-02T13:47:17.383

您可以在注册表部分`HKEY_CLASSES_ROOT`查看扩展和操作详细信息。这方面的文档[在 MSDN 上](http://msdn.microsoft.com/en-us/library/cc144148.aspx)。或者，您可以使用[IQueryAssociations](http://msdn.microsoft.com/en-us/library/bb761400.aspx)接口。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2008-10-02T13:52:05.657

嗬！当然。

```
HKEY_CLASSES_ROOT\.txt 
```

包括对

```
HKEY_CLASSES_ROOT\txtfile 
```

其中包含一个子项

```
HKEY_CLASSES_ROOT\txtfile\shell\open\command 
```

其中引用记事本。

已排序，非常感谢！

巴特

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2008-10-02T13:48:23.073

[这是一篇关于此主题的博客文章。](http://windevblog.blogspot.com/2008/09/get-default-application-in-windows-xp.html)代码示例在 VB.net 中，但应该很容易将它们移植到 C#。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-10-02T13:50:48.827

您可以只查询注册表。首先获取 HKEY_CLASSES_ROOT\.ext 下的 Default 条目

这会给你类名。例如 .txt 有一个默认的 txtfile

然后打开 HKEY_CLASSES_ROOT\txtfile\Shell\Open\Command

这将为您提供使用的默认命令。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-10-16T09:35:14.633

> 一个迟到的答案，但有一个很好的 NUGET 包可以处理文件关联：文件关联

[链接 NUGET 文件关联](https://www.nuget.org/packages/FileAssociation/)

用法很简单，例如将所有允许的文件扩展名添加到上下文菜单：

```
private void OnMenuSourceFileOpening(object sender, ...)
{   // open a context menu with the associated files + ".txt" files
    if (File.Exists(this.SelectedFileName))
    {
        string fileExt = Path.GetExtension(this.SelectedFileNames);
        string[] allowedExtensions = new string[] { fileExt, ".txt" };
        var fileAssociations = allowedExtensions
            .Select(ext => new FileAssociationInfo(ext));
        var progInfos = fileAssociations
            .Select(fileAssoc => new ProgramAssociationInfo (fileAssoc.ProgID));
        var toolstripItems = myProgInfos
            .Select(proginfo => new ToolStripLabel (proginfo.Description) { Tag = proginfo });
        // add also the prog info as Tag, for easy access
        //  when the toolstrip item is selected
        // of course this can also be done in one long linq statement

        // fill the context menu:
        this.contextMenu1.Items.Clear();
        this.contextMenuOpenSourceFile.Items.AddRange (toolstripItems.ToArray());
    }
} 
```

# c# - DateTime.Parse(myString) 有什么问题？

> ID：162335
> 
> 赞同：23
> 
> 时间：2008-10-02T13:44:16.970
> 
> 标签：c#, datetime

我在浏览 Scott Hanselman 的[开发人员面试问题列表](http://www.hanselman.com/blog/WhatGreatNETDevelopersOughtToKnowMoreNETInterviewQuestions.aspx)时，遇到了这个问题：

> DateTime.Parse(myString) 有什么问题？

虽然我知道解析一串未知格式或来源存在固有风险，但还有其他原因吗？是改用 DateTime.ParseExact 吗？首先应该是 myString.ToString() 吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2008-10-02T13:46:48.833

除了语言环境问题之外，`DateTime.Parse()`还可能引发您必须捕获的异常。使用`DateTime.TryParse()`或`DateTime.TryParseExact()`代替。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2008-10-02T13:47:19.940

在系统上使用当前的线程文化通常是一个坏主意，就像“尝试各种格式，看看它们是否有效”一样。

具有特定文化的 ParseExact 是一种更加可控和精确的方法。（即使你指定了当前的文化，它也会让读者更清楚这就是正在发生的事情。）

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-10-02T13:47:36.757

正如 MSDN 所说：

> 因为 Parse(String) 方法尝试使用当前区域性的格式规则解析日期和时间的字符串表示，尝试跨不同区域性解析特定字符串可能会失败或返回不同的结果。如果将跨不同语言环境解析特定的日期和时间格式，请使用 DateTime.Parse(String, IFormatProvider) 方法或 ParseExact 方法的重载之一并提供格式说明符。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-10-02T13:49:39.513

这个问题只是看看开发人员是否知道这方面的问题。首先，您应该使用 TryParse，因为 Parse 会在不可解析时引发异常。此外，它没有考虑语言环境，因此在 Web 场景中，如果英国用户输入 02/10/2008，并且我的服务器使用的是 en-US 语言环境，我会得到 2008 年 2 月 10 日而不是 2008 年 10 月 2 日。

可能还有其他问题，但这是我脑海中浮现的前两个问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-10-02T13:48:22.153

除了未知的用户输入，环境可能是未知的..，所以我猜即使你控制了输入格式，解析的期望可能会有所不同..

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-10-02T13:49:42.510

我的直觉反应是你用未知的格式/来源击中它。可能还有其他原因——例如，从那一行中，我们*知道*这`myString`是一个字符串吗？（我假设它是，当然。）

通常我推荐 TryParse 方法。它稍微冗长一些，但有助于防止异常——只要您的代码在输入无效的情况下表现得适当。

当然，根据你的措辞......我假设你已经知道了这一切。:)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-10-02T13:47:00.613

这个博客文章[解释了它](http://it.toolbox.com/blogs/parthas/more-net-questions-iii-4433)，但一般情况是没有与解析相关的文化信息。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2011-11-01T10:52:54.443

答案取决于围绕 DateTime.Parse(myString) 的代码和解析的要求

您可能已经检查了字符串是基于正则表达式的有效格式，并且您可能对文化信息不感兴趣。您可能还知道数据来自具有已知日期约定的已知文件格式，因此抛出异常可能正是我们想要的。

没有上下文，这个问题就很模棱两可，真正的答案必须是“它取决于使用代码的上下文，它有什么问题，如果

# debugging - 使用 WinDbg，我可以在进程运行时修改内存中的项目吗？

> ID：162338
> 
> 赞同：2
> 
> 时间：2008-10-02T13:44:27.390
> 
> 标签：debugging, windbg

我可以使用在地图文件中找到的地址，在应用程序运行时使用 windbg 更改内存中的变量吗？

我真的很感兴趣在运行时打开/关闭功能，也许是一个变量。

你会怎么做？它是否需要通过调试器破坏应用程序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-10-02T13:50:21.353

如果您有地址，则可以使用任何 e*（输入值）命令。

如果您知道进程 ID，则可以附加到任何正在运行的进程，或者您可以直接使用 cdb 启动 exe。您必须中断该过程才能进行任何修改。在 CDB 中，您可以使用 Ctrl+C，它会在进程中注入一个 DebugBreak，然后您可以查看堆栈、线程和内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-12-23T01:16:34.673

我刚刚做完。假设您已映射符号，并且位于可以看到变量的断点中，您只需执行此操作 - 假设“myvar”是一个整数：

?? myvar [[ 这显示当前内容]]

?? myvar=55 [[这会将 myvar 的值更改为 55]]

?? myvar [[ 这将显示我的 var 的更新内容 - 即 55 ]]

g [[您的程序现在将运行，下一次读取 myvar 将产生 55 ]]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-03-06T00:22:39.487

您可以设置一个只被命中一次的断点并编辑一个值并继续执行。就像是：

```
bp /1 012ABCDEF "myVar=42;g" 
```

用您的地址值和变量名替换上面的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-02T14:28:06.630

我不确定你到底想实现什么，但调试器应该在某些事件（异常、断点或其他东西）上被激活，在它被激活之后，例如你可以有一个线程来创建一个异常并在获得控制权后检查变量。
在调试器中，您可以使用命令设置断点，请参阅[本指南](http://software.rkuster.com/windbg/WinDBG_A_to_Z.pdf)，了解会更改参数的内容。
我希望这能回答你的问题，如果没有，请澄清问题。

在命令断点的情况下，应用程序将中断并在没有人为干预的情况下继续执行，我不知道调试器如何在没有应用程序停止执行的情况下做某事。

只是一个想法，你确定你需要调试器吗？您不能只使用注册表并使用[它](http://msdn.microsoft.com/en-us/library/ms724892(VS.85).aspx)来获取有关注册表更改的通知。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-02T15:35:59.133

你绝对可以这样做。中断函数并在本地窗口中编辑它。或者使用 e 命令来编辑值。查看 windbg 帮助以了解更多信息。

# .net - 有没有办法为 ASP.Net Web 应用程序安装程序创建补丁？

> ID：162366
> 
> 赞同：14
> 
> 时间：2008-10-02T13:50:27.033
> 
> 标签：.net, asp.net, windows-installer

是否可以为 VS2005 中生成的 Web 部署安装程序创建补丁安装程序？

我有一种情况，不希望完全卸载/重新安装网站，但会定期进行错误修复和小幅升级。

我已经尝试按照各种在线帖子中关于使用 msimsp.exe 生成补丁文件的说明进行操作，但大多数/全部都依赖于 msiexec.exe 的某些用法来创建管理安装以进行比较，因为 msimsp.exe 可以t 处理压缩内容（例如 CAB 文件）。然而，Web 安装并没有真正的管理安装，最终补丁创建失败。

当然，我可以手动创建一个*只*包含更改的文件的安装程序，但这很容易出错，并且更希望有一个自动化的过程。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-05T15:09:04.263

我们使用 Subversion 进行部署。

[http://blog.lavablast.com/post/2008/02/I2c-for-one2c-welcome-our-new-revision-control-overlords!.aspx](http://blog.lavablast.com/post/2008/02/I2c-for-one2c-welcome-our-new-revision-control-overlords!.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-04T09:05:27.227

很抱歉没有提供帮助，但是我可以告诉您我们如何使用 WIX 为我们的网站创建安装。

我们创建了一个 WIX 模板（Plan Old XML），然后我们使用我们自己编写的实用程序遍历构建输出文件夹，以获取需要进入生成的 WIX 文件的文件夹和文件的列表。这个过程被滚动到网站的构建 (MSBuild) 中，因此 MSI 创建是自动的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-03T23:31:50.787

WIX (Windows Installer XML) 文档有一个关于使用补丁创建属性 (PCP) 创作文件构建补丁以创建增量补丁文件的部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-04T02:22:01.397

感谢您的建议，但同样，这是一个网络安装程序。我找到的使用 PCP 和 MSIMSP.EXE 生成补丁文件的所有文档都涉及执行安装程序的管理安装。Web 安装程序并没有真正的管理安装（至少不是在 VS2005 中生成的那种），因此 MSIMSP.EXE 补丁生成过程有点短路。

我正在研究InstallShield，看看那里是否有更好的控制......

# browser - 将音频流式传输到浏览器

> ID：162375
> 
> 赞同：4
> 
> 时间：2008-10-02T13:52:51.830
> 
> 标签：browser, audio

我有大量的音频以非常自定义的格式存储在我的网络服务器上，除了我自己的应用程序之外，其他任何东西都无法重播这些音频。该应用程序是一个 Win32 应用程序，可以连接到我的 Web 服务器并流式传输和重播该音频。

我真的很希望能够在浏览器中进行流式传输和重播，但不知道从哪里开始。理想情况下，我希望该技术是跨平台的（与我当前的 Win32 应用程序不同）和跨浏览器（IE 6 及更高版本和 Firefox）。

我目前的想法是查看以下内容：

*   Flash，但不是只重放 mp3 音频吗？
*   Java，VM 仍然可以免费使用吗？
*   将音频转换为 Web 服务器上的 WAV 文件，然后使用其他人的插件重播该文件。出于性能原因，我宁愿将转换保留在 Web 服务器之外，但仍然是一种选择。
*   编写我自己的自定义插件来完成完整的流和重播操作。

任何指导都是最有用的。

请注意，音频不是音乐，简单地转换为另一种音频格式并非易事。存储的音频也经常（每分钟）变化，需要不断转换。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-10-02T13:58:15.657

为什么要使用专有音乐格式？我什至可能不会费心去下载一个程序来收听它。

我建议您将其转换为 mp3，然后使用 flash。

构建你自己的插件可能会很困难，你必须满足许多不同的平台，像 flash 之类的东西已经为它们编写了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-06T20:50:28.473

除了转换服务器端：在 ActionScript 或 Java 中为您的格式实现解码器。然后，您可以编写播放它的 Flash 电影或 Java 小程序。除非您的格式非常复杂，否则两种语言/运行时都应该足够快以实时解码。Flash 将是两者中更易于访问的，因为几乎每个人都安装了该插件。（10 之前的 Flash 版本可能不支持播放原始声音缓冲区，我不是这方面的专家。） Java 插件绝对是免费的，但您需要用户安装它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-02T13:58:34.860

我会在服务器上将音频转换为 WAV（或 MP3）。由于主要操作系统处理其音频 API 的方式不同，编写自己的跨平台浏览器组件需要大量工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-02T14:05:44.950

试试看一下[喊声](http://en.wikipedia.org/wiki/SHOUTcast)。基本上它是一个服务器应用程序，可以将音乐流式传输到通过浏览器连接到它的任何客户端（实际上是您自己的广播电台）。我自己从未使用过它，但应该直截了当。另一个想法是winamp远程。您再次在服务器上安装应用程序，但这次您可以在他们的网站上浏览您的音乐收藏并播放单独的歌曲。

# web-services - Web 服务身份验证 - 最佳实践？

> ID：162376
> 
> 赞同：21
> 
> 时间：2008-10-02T13:52:55.513
> 
> 标签：web-services, authentication, soap

我们在生产中使用 SOAP Web 服务，它们依赖 SOAP 标头（包含纯客户端凭据）进行身份验证。WS 用于具有 .NET/Java/PHP/Python/C++ 客户端的异构环境中，包括 Web 应用程序或桌面应用程序。

我们正在考虑为这些 WS 提供 v2，我想知道WS SOAP 身份验证的*最佳实践是什么？*（相当安全，但易于在各种平台上处理）。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2008-10-09T23:28:27.903

在各种平台上处理它的最简单方法是使用 HTTP 基本身份验证和 HTTPS 作为传输层。如果您的需求超出了简单的用户名/密码，WS-Security 会很好，但平台之间的支持会有很大差异。每个体面的 SOAP 实现都支持 HTTP 身份验证。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-11-15T22:07:00.237

如果您必须自己滚动并且不能使用 HTTPS，我建议您使用 WS-Security 的基于哈希的 UsernameToken 部分。只要您的库具有散列函数，它就非常安全且易于实现。

如果您正在做 Web 服务，我不会依赖 HTTP 进行身份验证。

WS-Security 作为一个整体太大了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-01-04T08:40:22.740

我过去解决这个问题的方法是使用标准的 WS-* 特性。

我们设置了消息头完整性功能，而不是使用身份验证功能。这要求对话双方都可以访问公钥/私钥对，并检测标题中用户名字段的任何篡改。因此，您可以确定发送消息并设置用户 ID 的人可以访问私钥。

如果密钥管理得当，这将提供合理的完整性级别。

# sql - SQL 计数查询

> ID：162399
> 
> 赞同：2
> 
> 时间：2008-10-02T13:56:22.167
> 
> 标签：sql, sql-server, sql-server-2005

嗨，为什么这在 SQL Server 2005 中不起作用？

```
select HALID, count(HALID) as CH from Outages.FaultsInOutages

where CH > 3

group by HALID 
```

我得到无效的列名“CH”

* * *

我认为拥有是正确的方法，但仍然收到错误：无效的列名“CH”。

运行时：

选择 HALID, count(HALID) as CH from Outages.FaultsInOutages group by HALID with CH > 3

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-10-02T13:59:58.413

您不能在 where 子句或 have 子句中使用别名，因为在生成结果集之后才会对其进行处理，正确的语法是

```
SELECT HALID, COUNT(HALID) AS CH
FROM Outages.FaultsInOutages
GROUP BY HALID
HAVING COUNT(HALID) > 3 
```

这将对 HALID 上的项目进行分组，然后仅返回具有特定 HALID 的 3 个以上条目的结果

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-10-02T13:57:50.180

尝试

```
select HALID, count(HALID) from Outages.FaultsInOutages 
group by HALID having count(HALID) > 3 
```

您的查询有两个错误：

*   分组时使用 where 聚合，通过使用来解决
*   在条件中为聚合使用别名，不支持，通过再次使用聚合解决

# css - @import 的意义何在？

> ID：162409
> 
> 赞同：7
> 
> 时间：2008-10-02T13:58:24.267
> 
> 标签：css

有人可以解释一下使用 @import 语法与使用标准链接方法仅包含 css 相比有什么好处吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-10-02T16:39:25.190

正如回答者所说，它允许您将 CSS 拆分为多个文件，同时仅链接到浏览器中的一个文件。

也就是说，在高流量的网站上下载多个 CSS 文件仍然是一种浪费。在发布模式下构建时，我们的构建脚本实际上“编译”了我们的 CSS，方法是执行以下操作：

*   所有 CSS 文件都被缩小（多余的空格和注释被删除）
*   我们有一个“core.css”文件，它只是一个`@import`语句列表；在编译期间，这些中的每一个都被该文件的缩小 CSS 替换

因此，我们最终在生产中得到了一个单一的、缩小的 CSS 文件，而在开发模式下，我们拥有单独的文件以使调试更容易。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-10-02T14:03:18.857

如果您`<link>`在 HTML 文件中使用 s，则所有这些文件都必须跟踪所有 CSS 文件。这显然使更改和添加（对于 CSS 和 HTML 文件）更加困难。

使用`@import`，您可以将理论上无限数量的更改减少到一个。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-10-02T14:07:26.007

@import 允许您拥有可扩展的样式表，而无需更改 html。您可以`link`一次到您的主工作表，然后如果您想添加或删除其他工作表，您的 html 不会更改。

此外，更小的文件有助于浏览器进行更好的缓存。如果您对大工作表的一部分进行更改，则必须为每个用户重新下载整个工作表。如果样式在几张表中被分成逻辑区域，则只需要下载包含更改部分的文件。当然，这是以额外的 http 请求为代价的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-10-02T14:15:50.857

另一个方便的一点，虽然已经过时了，但 Netscape 4 不能处理 @import，所以它是向 NS4 提供样式表的好方法，然后为更现代的浏览器提供另一个样式表，以符合标准的方式导入。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-10-03T13:56:30.403

`@import`是 CSS 代码。`<link>`是 HTML 代码。因此，如果您想在其他样式表中包含样式表（或者如果您无法更改 HTML），那么您可以`@import`这样做。

根据 CSS 规范，所有`@import`声明必须出现在样式表中的任何样式规则*之前。*换句话说，所有在你的样式表的顶部

任何`@import`出现在样式规则之后的声明都应该被忽略。Internet Explorer 从来没有尊重过这一点。我相信其他浏览器会这样做。这`@import`有点不那么有用，因为导入的样式表中的规则将被导入样式表中具有相同特异性的规则覆盖。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-10-02T14:00:25.043

它允许您将逻辑 CSS 文件分布在多个物理文件中。例如，有助于团队发展。当您有很多 CSS 文件要按功能区域（一个用于网格，一个用于列表等）分隔时，也很有用，让它们可以在同一个逻辑文件中访问。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-10-04T00:08:03.350

假设您在 Massive Dynamics, Corp. 工作。它有一个小部件部门。Widgets 部门有一个 Accounts 部门。账户分为应付账款和应收账款。

使用@include，您可以使用一个适用于所有内容的顶级**global.css样式表来启动网站。**

然后为 Widgets 部门创建第二个样式表**widgets.css**。它@includes 全局样式和它自己的样式（如果需要，可以覆盖全局样式，因为 Cascade）。然后为 Accounts 创建第三个**accounts.css**。它 @includes **widgets.css**，这意味着它还包括**global.css**。起泡，冲洗，重复。

# html - 使用 Rails，我应该将 html 片段放在哪里？我不想要部分，但我希望在开发过程中重新加载它们

> ID：162421
> 
> 赞同：6
> 
> 时间：2008-10-02T14:00:15.760
> 
> 标签：html, ruby-on-rails, ruby

由于懒惰（并且喜欢 DRY 代码），我是那种会为重复出现的 HTML 标记编写一些小包装器的人。Rails 提供的那些已经很好了，但有时我有一些更具体的东西，我知道我会一遍又一遍地重复。

在某些情况下，部分可能是解决方案，但有时我只是过于频繁地调用代码片段来证明使用部分的开销是合理的。

现在我创建了一个 helpers/html_helper.rb 文件并将它们粘贴在那里。问题是在开发过程中，助手不会根据请求动态重新加载。因此，每次我调整我的代码片段或它周围的代码时，我都必须终止服务器并重新启动它。

当然，这只是一个 5 秒的过程，但我喜欢 Rails 开发然后刷新浏览器的便利。因此，我也希望将它用于我的标记片段。

注意：仅在帮助模块中粘贴“可卸载”是行不通的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-02T19:36:28.120

这应该在每个请求上重新加载所有帮助程序（假设您已坚持默认命名约定）

```
#Put this in config/environments/development.rb
ActiveSupport::Dependencies.explicitly_unloadable_constants.concat(Dir.glob("#{RAILS_ROOT}/app/helpers/**/*.rb").map {|file| File.basename(file, '.rb').camelize}) 
```

或者，如果您使用的是旧版本的 Rails（我认为是 2.0.2 或更早版本）

```
#Put this in config/environments/development.rb
Dependencies.explicitly_unloadable_constants.concat(Dir.glob("#{RAILS_ROOT}/app/helpers/**/*.rb").map {|file| File.basename(file, '.rb').camelize}) 
```

在 RoR 2.1.1 中为我工作

* * *

**更新：**修改顶部片段以包含“ActiveSupport::”，必须从我的代码中错误地复制/粘贴。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-02T14:31:10.180

好问题！这是我应该更频繁地滥用的技术。

```
 #I go in environment.db (presumably it will work in one of the per-environment files, too.)
    Dependencies.explicitly_unloadable_constants << 'NameOfHelperToReloadHere' 
```

顺便说一句，至少在我的安装中，该数组一开始是空的。（通过控制台检查。）

我在本地对此进行了测试，它对我有用，至少在 Rails 2.0.2 上。解决方案的主要功劳属于[这位先生](http://www.williambharding.com/blog/rails/automatically-reload-modules-on-change-in-rails/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-02T18:06:31.520

如果您将它们粘贴在 application_helper.rb 中，它们每次都会被加载并可供您的所有视图使用。每次在开发模式下都会加载（或者至少我没有遇到任何问题）。

我通常会创建在整个站点中使用的小助手（例如可排序的表头），它们使用相同的逻辑。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-02T14:15:09.047

这不是一个真正的解决方案，但您可以使用测试（TestUnit、RSpec 或其他）来确保您的助手按预期工作。这样，您就不会太依赖助手的自动重新加载。

# windows - 在 Windows 中跟踪启动的应用程序

> ID：162444
> 
> 赞同：2
> 
> 时间：2008-10-02T14:05:13.283
> 
> 标签：windows

我们正在尝试整合信息亭解决方案，我们可以按小时向人们收取他们使用的应用程序的费用。因此，我们需要一种方法来确定应用程序何时启动、何时关闭并记录此信息以进行计费。我是一个相当有经验的 .NET 程序员，所以托管代码解决方案会很棒。我还涉足了一点 Windows API，所以这也可能有用。有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-02T14:08:29.047

这对于 WMI 调用来说很简单。实际上，您可以在应用程序启动时、关闭时、运行时长、使用的内存量等方面从操作系统捕获事件。

这是监视进程创建、删除等的一个示例。

[http://weblogs.asp.net/whaggard/archive/2006/02/11/438006.aspx](http://weblogs.asp.net/whaggard/archive/2006/02/11/438006.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-02T14:10:26.873

如果您谈论的是您自己编写的应用程序，只需在 Application.Run() 方法的任一侧记录 DateTime.Now ：

```
static void Main() 
{   
    DateTime StartTime = DateTime.Now;
    Application.Run(new frmBilling());
    DateTime EndTime = DateTime.Now;

    //Log information to DB for billing
} 
```

# performance - 如何知道网页的真实大小？

> ID：162445
> 
> 赞同：12
> 
> 时间：2008-10-02T14:05:35.887
> 
> 标签：performance

我不知道网页的实际大小（HTML + CSS + Javascript + 图片 + 等），但从浏览器方面，可能是使用软件、Firefox 插件或类似软件？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-10-02T14:06:14.013

使用 firefox，并获取 FireBug。

然后获取 Firefox 的 YSlow 插件。

对于 IE，您可以获得非常接近提供相同信息的 DebugBar。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-10-02T14:09:34.270

[YSlow](http://developer.yahoo.com/yslow/)是一个[FireBug](http://getfirebug.com/)插件（Firebug 是一个 FireFox 插件），效果很好。

如果您的意思是整个网站，您可以获取[HTTrack](http://www.httrack.com/)（软件）并下载整个网站......请小心......当你这样做时人们不喜欢它！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-02T14:31:41.253

我认为 Firefox 插件[扩展状态栏](https://addons.mozilla.org/de/firefox/addon/1433)可以为您做到这一点。

它将提供有关已下载内容的详细信息，包括下载数据的大小。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T12:38:36.883

如果您不能或不想使用 firefox 及其插件，您可以使用[Pingdom Tools](http://tools.pingdom.com/fpt/)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-22T16:21:12.277

Firefox 现在嵌入了开发者工具（在`tools`菜单中或`Ctrl`++中`Shift`）`S`有一个[“网络”选项卡](https://developer.mozilla.org/en-US/docs/Tools/Network_Monitor)，可以详细监控网页的大小和加载时间。上下文菜单（右键单击）允许以[HTTP 存档格式 (HAR)](https://en.wikipedia.org/wiki/.har)保存数据。

# sql - SQL 连接问题

> ID：162459
> 
> 赞同：2
> 
> 时间：2008-10-02T14:08:21.450
> 
> 标签：sql

我有 3 张桌子

1.  **Links**
    Link ID
    Link Name
    GroupID (FK into Groups)
    SubGroupID (FK into Subgroups)

2.  **组**
    GroupID
    GroupName

3.  **SubGroup**
    SubGroupID
    SubGroupName
    GroupID（FK 成组）

每个链接都需要有一个 GroupID，但 SubGroupID 是可选的。我如何编写一个 SQL 查询来显示：

**Links.LinkName、Groups.GroupName、SubGroup.SubGroupName** 

对于没有子组的记录，只需在该字段中输入一个空白条目。如果我有 250 个链接行，我应该从这个查询中取回 250 条记录。

有没有办法在一个查询中做到这一点，还是我需要做多个查询？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-10-02T14:11:26.623

这假设每个组最多只有 1 个子组。如果还有更多，那么您就有可能获得更多记录。

```
select links.linkname, groups.groupname, subgroup.subgroupname
from links
  inner join groups on (links.groupid = groups.groupid)
  left outer join subgroup on (links.subgroupid = subgroup.subgroupid) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-02T14:10:36.233

```
SELECT 
  links.linkname
  , groups.groupname
  , subgroup.groupname
FROM
  links 
  JOIN groups ON links.groupid = groups.groupid
  LEFT OUTER JOIN subgroups ON links.subgroupid = subgroup.subgroupid 
```

（重新添加以解决 OP 的问题）顺便说一句，为什么不将组和子组保留在同一个表中，并使用自引用连接？

阿坎特罗：

你会有这样的东西：创建表组（groupid整数主键，parentgroupid整数外键引用组（groupid），groupname varchar（50））

您的查询将是

```
SELECT 
  links.linkname
  , groups.groupname
  , SUBGROUPS.groupname
FROM
  links 
  JOIN groups ON links.groupid = groups.groupid
  LEFT OUTER JOIN groups SUBGROUPS ON links.subgroupid = subgroup.groupid 
```

保持这样的表格在功能上没有区别，但好处是您只需去一个地方编辑组/子组

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-02T14:11:32.427

```
SELECT Links.LinkName, Groups.GroupName, SubGroup.SubGroupName -- Will potentially be NULL
FROM Links
INNER JOIN Groups
    ON Group.GroupID = Links.GroupID
LEFT JOIN SubGroup
    ON SubGroup.SubGroupID = Links.SubGroupID 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-02T14:11:37.760

您将使用外部联接：

```
select Links.LinkName, Groups.GroupName, SubGroup.SubGroupName
from Links 
inner join Groups on Groups.GroupID = Links.GroupID
left outer join SubGroup on Links.SubGroupID = SubGroup.SubGroupID 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-02T14:11:30.537

您不太清楚，但我认为您想获取所有行，包括那些在 SubGroup 表中没有通讯员的行。

为此，您可以使用 LEFT JOIN，如果没有匹配的行，它将获取 NULL。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-10-02T14:11:39.883

只需在 SubGroup 表上使用 LEFT OUTER JOIN，例如：

```
select
    l.LinkName,
    g.GroupName,
    s.SubGroupName
from
    Links l
'
    JOIN Group g
       on ( g.GroupId = l.GroupId)
'
    LEFT OUTER JOIN SubGroup s
       on ( s.SubGroupId = l.SubGroupId ) 
```

那应该这样做。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-10-02T14:11:41.363

```
SELECT LinkName, GroupName, SubGroupNamne
FROM Links INNER JOIN Groups ON LInks.GroupID = Groups.GroupID
    LEFT JOIN SubGroup ON Links.SubGroupID = SubGroup.SubGroupID 
```

这将包括没有子组的行。该列将简单地为 NULL。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-10-02T14:15:06.740

```
select L1.LinkName, G1.GroupName, NVL(S1.SubGroupName,' ')
 from Links L1, Groups G1, SubGroup S1 
where L1.GroupID = G1.GroupID and
      L1.GroupID = S1.GroupID 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-10-02T14:15:49.997

好的，试试：

```
select a.linkname, b.groupname, c.subgroupname
from links a, groups b, subgroup c
where a.groupid = b.groupid
and a.subgroupid = c.subgroupid
and a.subgroupid is not null
union all
select a.linkname, b.groupname, '  '
from links a, groups b
where a.groupid = b.groupid
and a.subgroupid is null 
```

我认为这应该可行（它在我使用最多的 DBMS 的 DB2 中有效） - 您需要调整第二个选择中的空格以匹配 subgroup.subgroupname 的大小。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-10-02T16:18:51.183

在 SubGroup 表上使用 LEFT OUTER JOIN 将为您提供 Links 表中的所有行，并且存在 SubGroup 的位置将返回，否则您会看到 NULL 值。

```
SELECT L.LinkName, G.GroupName, S.SubGroupName
 FROM Links As L
  INNER JOIN Groups As G ON L.GroupID=G.GroupID
  LEFT OUTER JOIN SubGroup S ON L.SubGroupID=S.SubGroupID 
```

这不会检查您的 SubGroups.LinkID 是否与永远不会发生的 Links.LinkID 匹配，但如果您需要检查这一点，请在连接中添加另一个子句：

```
SELECT L.LinkName, G.GroupName, S.SubGroupName
 FROM Links As L
  INNER JOIN Groups As G ON L.GroupID=G.GroupID
  LEFT OUTER JOIN SubGroup S ON L.SubGroupID=S.SubGroupID AND L.GroupID=S.GroupID 
```

# c++ - 'const int' 与 'int const' 作为 C++ 和 C 中的函数参数

> ID：162480
> 
> 赞同：125
> 
> 时间：2008-10-02T14:11:02.130
> 
> 标签：c++, c, constants

考虑：

```
int testfunc1 (const int a)
{
  return a;
}

int testfunc2 (int const a)
{
  return a;
} 
```

这两个功能是在各个方面都相同还是有区别？

我对 C 语言的答案很感兴趣，但如果 C++ 语言中有什么有趣的东西，我也想知道。

* * *

## 回答 #1

> 赞同：351
> 
> 时间：2008-10-02T14:32:57.663

诀窍是向后阅读声明（从右到左）：

```
const int a = 1; // read as "a is an integer which is constant"
int const a = 1; // read as "a is a constant integer" 
```

两者都是一回事。所以：

```
a = 2; // Can't do because a is constant 
```

当您处理更复杂的声明时，反向阅读技巧特别有用，例如：

```
const char *s;      // read as "s is a pointer to a char that is constant"
char c;
char *const t = &c; // read as "t is a constant pointer to a char"

*s = 'A'; // Can't do because the char is constant
s++;      // Can do because the pointer isn't constant
*t = 'A'; // Can do because the char isn't constant
t++;      // Can't do because the pointer is constant 
```

* * *

## 回答 #2

> 赞同：189
> 
> 时间：2008-10-02T14:14:57.317

`const T`并且`T const`是相同的。使用指针类型变得更加复杂：

1.  `const char*`是一个指向常量的指针`char`
2.  `char const*`是一个指向常量的指针`char`
3.  `char* const`是一个指向（可变）的常量指针`char`

换句话说，（1）和（2）是相同的。制作指针（而不是被指针）的唯一方法`const`是使用后缀- `const`。

这就是为什么许多人更喜欢总是放在`const`类型的右侧（“East const”样式）：它使得它相对于类型的位置一致且易于记忆（有趣的是，它似乎也更容易教给初学者）。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2008-10-02T14:28:33.743

没有区别。他们都声明“a”是一个不能改变的整数。

当您使用指针时，差异开始出现的地方。

这两个：

```
const int *a
int const *a 
```

将“a”声明为指向不变的整数的指针。“a”可以赋值，但“*a”不能。

```
int * const a 
```

将“a”声明为指向整数的常量指针。“*a”可以赋值，但“a”不能。

```
const int * const a 
```

将“a”声明为指向常量整数的常量指针。“a”和“*a”都不能赋值。

```
static int one = 1;

int testfunc3 (const int *a)
{
  *a = 1; /* Error */
  a = &one;
  return *a;
}

int testfunc4 (int * const a)
{
  *a = 1;
  a = &one; /* Error */
  return *a;
}

int testfunc5 (const int * const a)
{
  *a = 1;   /* Error */
  a = &one; /* Error */
  return *a;
} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2008-10-02T14:18:18.680

Prakash 是正确的，声明是相同的，尽管可能需要对指针大小写进行更多解释。

"const int* p" 是一个指向 int 的指针，它不允许通过该指针更改 int。"int* const p" 是一个指向 int 的指针，不能更改为指向另一个 int。

请参阅[https://isocpp.org/wiki/faq/const-correctness#const-ptr-vs-ptr-const](https://isocpp.org/wiki/faq/const-correctness#const-ptr-vs-ptr-const)。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2008-11-05T18:11:43.733

`const int`与 相同，对于 C 中的所有标量类型都是如此。通常，不需要`int const`将标量函数参数声明为，因为 C 的按值调用语义意味着对变量的任何更改都是其封闭函数的局部变量。`const`

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2015-09-22T22:16:23.067

它们是相同的，但在 C++ 中，始终在右侧使用 const 是有充分理由的。您将在任何地方保持一致，因为**必须**以这种方式声明 const 成员函数：

```
int getInt() const; 
```

它将`this`函数中的指针从更改`Foo * const`为`Foo const * const`。[看这里。](https://stackoverflow.com/a/3141107/313445)

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2008-10-02T14:13:36.557

是的，它们只是相同的`int`

和不同的`int*`

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2008-10-02T15:20:18.453

这不是直接答案，而是相关提示。为了保持直截了当，我总是使用对流“放在`const`外面”，其中“外面”是指最左边或最右边。这样就不会有混淆—— const 适用于最接近的事物（类型或`*`）。例如，

```
 int * const foo = ...; // Pointer cannot change, pointed to value can change
const int * bar = ...; // Pointer can change, pointed to value cannot change
int * baz = ...; // Pointer can change, pointed to value can change
const int * const qux = ...; // Pointer cannot change, pointed to value cannot change 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2008-10-02T14:15:02.200

我认为在这种情况下它们是相同的，但这是一个顺序很重要的示例：

```
const int* cantChangeTheData;
int* const cantChangeTheAddress; 
```

# database - 要求在面试中查看雇主的代码/数据库

> ID：162484
> 
> 赞同：46
> 
> 时间：2008-10-02T14:11:26.747
> 
> 标签：database

我被要求在一次采访中写代码/设计东西。有时甚至提供代码示例。非常合理和非常明智（当这没有发生时总是很惊讶）

大约一年前我有一份工作，如果我看到我必须提前处理的烂摊子，我就不会接受这份工作。我无法告诉你我曾经使用过多少可怕的数据库。

要求**他们**提供代码示例并查看他们的数据库设计对我来说是不可能的吗？假设我很乐意签署 NDA，我的一部分人觉得在不检查我将使用的代码库或数据库的情况下接受一份工作会很疯狂。

有人做过吗？

### 更新

这将是我稍后在面试过程中会问的问题，如果事情进展顺利并且我觉得即将获得报价。

这也是在小商店或小项目中工作的背景下，因为我的偏好是避免使用诸如“让开发人员离开地板”之类的短语的地方

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2008-10-02T14:18:58.493

你绝对可以问。答案可能是“不”，但没有人应该认为这是一个糟糕或不恰当的问题。

如果他们不会向您显示代码，那么您在决定是否要接受报价时绝对应该考虑到这一点。我认为这表明以下至少一项是正确的：

*   代码太可怕了，他们知道你会尖叫着逃跑。
*   该公司有一种极度保密、不信任任何人的文化（我讨厌这种文化）。
*   该公司认为他们拥有如此惊人的代码，只要看一眼就会让你成为超级明星竞争对手。（换句话说，他们是自欺欺人的白痴。）
*   他们有明显的安全漏洞，希望保密。
*   面试你的人不知道如何自己获取代码。（在这种情况下，您没有与合适的人交谈。）

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2008-10-02T14:57:06.310

我对查看公司的系统更感兴趣——即测试框架、发布过程、自动构建......这些的存在或不存在会告诉我超过几百行代码。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2008-10-02T14:19:46.370

我确实问过：*“我可以看一些代码并与在这里工作的程序员交谈吗？”*

雇主回答：*“好！你可以直接和我们信息系统的首席程序员交谈！”*

多么荣幸！

*   他们给我看了概念文件
*   我可以和首席程序员谈谈
*   他们向我展示了一个非常新的项目的一小部分，告诉我：*“这只是一个原型，direct3d 是如此粗略，这就是为什么这段代码如此混乱”*

事实证明：

*   我到达的那天，首席程序员离开了
*   他领导的软件，一团糟
*   不知何故，我最终花费了 50% 的时间，与混乱作斗争

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2008-10-02T14:14:23.183

我们采访过的候选人都没有问过这个问题；然而，他们中的许多人都是公司的合作社/实习生，所以他们熟悉我们的代码......

话虽如此，我们极不可能向任何候选人展示我们的代码，无论 NDA 是什么。我很乐意回答有关我们使用什么技术、我们使用什么系统进行修订、实践等方面的问题。但实际代码呢？不。

同样在一个足够大的系统（就像我们的系统）中，有人可以向您展示那里的“最佳”代码......你将是你开始的地方:) 至于数据库设计......我工作过的两家公司都有有非常大的数据库（大学，公司）......所以这也行不通。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2008-10-14T04:00:44.440

我在采访 Xerox PARC、一家初创公司和雅虎时问过这个问题。

在 PARC，他们让我坐在一个工作站上，如果我被雇用，我会接手的代码，超级简要地检查了代码库的结构，然后让我一个人呆了大约 20 分钟。这足以让我知道我是否可以忍受使用它，尽管我想要更多的时间，比如一小时。之后我问了一个看起来很可疑的设计决定，我们聊了聊设计和风格。这不仅告诉了我更多关于这份工作的信息，还告诉*了他们*更多关于*我*的信息：我是自上而下还是自下而上地探索他们的代码，我了解或询问了什么，等等。到处都很有价值。

在初创公司，他们在另一天召开了一次单独的会议，邀请了代码的作者（他不是员工）；我们坐在笔记本电脑前，一起讨论了一些事情。这对他们来说是一个不寻常的要求，我想我必须签署一份新的保密协议。这再次是值得的：我之前的采访并没有真正弄清楚这种花哨的 AI 语言的全部内容，或者他们希望我用它做什么，坐下来写一些具体的代码，消除了很多迷雾。

在雅虎，我什么都没看到。我不记得他们的反应是什么。如果我看到了我最终处理的代码，我可能会重新考虑（尽管最终结果很好）。（我确实看到的上述两个代码库通常看起来都更好；PARC 的代码库后来开源了。）

在所有这些情况下，我都与他们分享了我自己的一些代码。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2008-10-02T14:31:27.760

如果您要这样做，那么我认为您需要给他们一个小警告，以便他们可以准备 NDA 并设置一个您可以看到它的 apppriate 环境。还要准备花一点时间来理解为什么代码是这样的。

如果您在第一次面试时出现并说，对，我可以看到代码，除了极少数人之外，所有人都会说不。不一定是因为他们是邪恶的，不想向你展示，而是因为它并不像说是那么简单。

根据我作为一家大型软件公司招聘人员的经验，我们需要花费大量时间来为任何候选人（无论多么聪明）披露代码和内部开发的框架的足够详细信息，以便能够对其做出有意义的判断。优点和缺点。如果我们认真雇用他们，我们只会考虑这样做。

如果有人问我这个问题，我会说是的，下次再来，我们会安排一些事情。我会请一位值得信赖的开发人员下场，让他们带一台笔记本电脑参加下一次面试并展示一些代码。

现实情况是，几乎任何规模合理且已存在多个版本的软件项目中都会包含一些可怕的垃圾。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2008-10-02T14:24:34.563

与其他一些回复类似，我从未有候选人要求查看我们的代码。即使他们这样做了，我也会非常小心地这样做，而且很可能不会。正如 Swati 所提到的，几乎任何重要的系统都会有看起来不错的部分，所以即使看到代码也无济于事。

比查看实际代码更好的是[Joel Test](http://www.joelonsoftware.com/articles/fog0000000043.html)。基本上，您可以向雇主询问 12 个是或否问题。是的答案越多，预期的工作环境就越好。这显然不是一个硬性和快速的“规则”，但它似乎表明那些认真对待代码（和**编码人员**）的公司。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2008-10-02T19:07:30.890

去开源项目。在那里，您无需请求许可即可查看代码。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2008-10-02T14:25:53.937

我想不出什么理由不展示一些课程或谈论他们正在使用的架构。在我看来，这就像让他们告诉你你要去哪里工作（房间、桌子、椅子、队友......）。无论如何，要求它会向他们表明您对最佳实践感兴趣，并且您并不急于以任何价格找到工作，并且不知道这会带来什么伤害。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2008-10-02T14:16:17.657

问一下不会有什么坏处，这是一个非常好的主意，我将把它添加到我的问题清单中以询问雇主。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2008-10-02T14:21:37.567

一个有趣的想法，但我不知道有多少公司会接受它。我知道我们不能在我现在工作的地方做到这一点。

我认为您将遇到的最大问题是我发现很多人会冒犯不喜欢他们的代码的人。这就像批评某人的治疗师一样，做一个局外人并这样做并不是一个好主意。看到代码然后不接受这份工作可能会给你带来傲慢或不足以编写代码的名声，这就是你没有接受这份工作的原因。它可能会让你免于得到你不想要的工作，但它可能会给你带来负面的声誉。我住在一个相当大的城市，但 IT 人员仍然相互认识并且消息传开。我们这个领域的人有自负，贬低别人的名声比承认你写的代码没有达到标准更容易。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2008-10-02T22:47:48.690

我相信，比索要代码片段更重要的是询问他们使用哪种源代码控制产品（远离那些回答“Visual SourceSafe”的公司）以及他们使用哪种方法：“敏捷”或“Scrum”发送积极的信号，CMMI 通常意味着公司喜欢官僚程序，如果他们给你一个“嗯？” 那么你会被警告；）

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2008-10-02T14:25:07.947

即使他们向您展示了一些代码，是否足以让您对您将花时间使用的代码质量得出一个粗略的结论？例如，在我之前的地方，他们的产品之一是大型电子银行中间件应用程序。该应用程序的核心是 C++，并以出色的方式设计和编写。然而，扩展（迄今为止涵盖了应用程序的大部分及其各种不同版本）也是用 C++ 编写的，主要由经验不足和知识渊博的开发人员编写，是一堆蹩脚的代码（其中我有时不得不修复和工作或从头开始编写）拍打在一起以某种方式工作。如果我在面试时让他们给我看一段代码，

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2008-10-02T14:17:44.937

我认为这是一个很棒的点子; 然而，作为雇主，我会犹豫——即使有保密协议——是否向面试候选人提供真实的工作代码样本，除非我很确定我想雇用这个人。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2009-10-13T16:38:24.897

问题是他们会向你展示*一些*代码，但他们的每个程序员都会以不同的方式编写代码。不幸的是，您必须处理编写良好的代码库部分。

**要求查看他们的编码标准以及他们如何执行它更有可能有用。**

# java - Spring MVC 表单标签：是否有添加“无选择”项的标准方法？

> ID：162497
> 
> 赞同：31
> 
> 时间：2008-10-02T14:13:18.850
> 
> 标签：java, forms, spring, spring-mvc

有一个选择下拉列表，我想将“无选择”项目添加到列表中，提交时应该给我“空”。我正在使用 SimpleFormController 派生控制器。

```
protected Map referenceData(HttpServletRequest httpServletRequest, Object o, Errors errors) throws Exception {
    Map<String, Object> map = new HashMap<String, Object>();

    map.put("countryList", Arrays.asList(Country.values()));

    return map;
} 
```

而 jspx 部分是

```
<form:select path="country" items="${countryList}" title="country"/> 
```

一种可能的解决方案似乎是在列表的开头添加一个空值，然后使用自定义 PropertyEditor 将此“空”显示为“无选择”。有更好的解决方案吗？

@Edit：我已经通过自定义验证注释解决了这个问题，该注释检查所选值是否为“无选择”。有没有更标准、更简单的解决方案？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2008-10-05T00:37:11.497

一种选择：

```
<form:select path="country" title="country" >
     <form:option value="">&nbsp;</form:option>
     <form:options items="${countryList}" />
</form:select> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-06T07:19:22.277

我认为您不需要为此使用属性编辑器。如果“空白”选项是列表中的第一个选项，并且输出列表的标记没有将它们中的任何一个标记为选中，那么浏览器应该自动选择第一个“空白”选项。

当您提交表单时，请尝试使用它，以便将“空白”值作为空值绑定到您的命令，这可能会自动发生，具体取决于类型。

# sql-server - 有没有办法在 SQL 2000 中编写图表脚本（或以另一种方式保存它们）？

> ID：162520
> 
> 赞同：2
> 
> 时间：2008-10-02T14:16:26.453
> 
> 标签：sql-server, sql-server-2000, diagram

可以在 SQL Server 2000 中创建对显示表之间的关系很有用的二元图。我们遇到的问题是，当有人刷新我们的开发数据库时，图表会丢失。我们可以使用 SQL 脚本加载表、存储过程、视图等，但我们必须手动创建图表。

有没有办法编写图表？还是可以以其他方式将它们保存在数据库之外？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-02T14:22:16.050

它可以为 SQL Server 2005 完成 - 请参见[此处](http://www.codeproject.com/KB/database/ScriptDiagram2005.aspx)。

和信息。在 SQL Server 2000 上-[这里](http://bytes.com/forum/thread81534.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-02T14:23:08.297

如果您有 Visio，则可以使用“逆向工程师”绘制数据库图。

# sql-server-2008 - SQL 2008 CTP 卸载后 SSAS 多维数据集浏览不起作用

> ID：162533
> 
> 赞同：1
> 
> 时间：2008-10-02T14:19:17.883
> 
> 标签：sql-server-2008, ssms, cubes

我已经并行安装了 SQL 2005 和 2008 CTP，没有任何问题。

最近在过期后卸载了 CTP，现在每当我尝试在 SSMS 2005 或 VS 2005 中浏览分析服务多维数据集时，都会收到以下错误：

**由于以下错误，检索具有 CLSID {C4F9B80B-89F7-4800-9C26-504D6E692B2C} 的组件的 COM 类工厂失败：80040154。**

我尝试重新安装 Office Web Components，但没有任何区别。我还安装了 SQL 2008 SSMS RTM，这对 VS 或 SSMS 2005 没有任何影响。

当我尝试从 SSMS 2008 RTM 浏览时，我收到此错误：

**无效的类字符串（来自 HRESULT 的异常：0x800401F3 (CO_E_CLASSSTRING)）**

有人有想法么？

谢谢

麦克风

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-29T08:01:23.313

这个错误困扰了我好几个星期，然后我搜索了我的注册表备份并恢复了这些：

Windows 注册表编辑器版本 5.00 [HKEY_LOCAL_MACHINE\SOFTWARE\Classes\CLSID{C4F9B80B-89F7-4800-9C26-504D6E692B2C}] @="MarshalledToIStreamDataObject 类" "AppID"="{B2463DC8-B3FA-4BEC-945E-60219DCC6FD8}"

[HKEY_LOCAL_MACHINE\SOFTWARE\Classes\CLSID{C4F9B80B-89F7-4800-9C26-504D6E692B2C}\InprocServer32] @="c:\Program Files\Microsoft SQL Server\90\Tools\Bin\Microsoft.DataWarehouse.VsIntegration.Helpers.dll " "ThreadingModel"="公寓"

[HKEY_LOCAL_MACHINE\SOFTWARE\Classes\CLSID{C4F9B80B-89F7-4800-9C26-504D6E692B2C}\ProgID] @="VsIntergrationNativeHelpers.Marshalle.1"

[HKEY_LOCAL_MACHINE\SOFTWARE\Classes\CLSID{C4F9B80B-89F7-4800-9C26-504D6E692B2C}\VersionIndependentProgID] @="VsIntergrationNativeHelpers.MarshalledT"

[HKEY_LOCAL_MACHINE\SOFTWARE\Classes\VsIntergrationNativeHelpers.Marshalle.1\CLSID] @="{C4F9B80B-89F7-4800-9C26-504D6E692B2C}"

将它们复制并粘贴到记事本中，另存为 reg 文件（双击 .reg 文件以导入注册表）并重新启动 - 这解决了我的问题。

HTH，天然气

# mocking - 模拟 Iidentity 和 IPrincipal

> ID：162534
> 
> 赞同：10
> 
> 时间：2008-10-02T14:19:22.423
> 
> 标签：mocking, iprincipal

我只想问在我的单元测试中提供这些对象的更好方法是什么。

在我的单元测试中，我正在测试 CSLA 对象。CSLA 对象在内部使用 ApplicationUser 对象的一种属性和一种方法。ApplicationUser 继承自 IPrincipal。属性是： 1) ApplicationContext.User.IsInRole(...) - 该方法是 IPrincipal 的一部分 2) ApplicationContext.User.Identity.Name - 名称是 IIdentity 的属性，它是 ApplicationUser aka IPricipal 的一部分

我的测试示例（使用 RhinoMock）：

```
public void BeforeTest()
{
   mocks = new MockRepository();
   IPrincipal mockPrincipal = mocks.CreateMock<IPrincipal>();
   ApplicationContext.User = mockPrincipal;
   using (mocks.Record()) {
      Expect.Call(mockPrincipal.IsInRole(Roles.ROLE_MAN_PERSON)).Return(true);
      Expect.Call(mockPrincipal.Identity.Name).Return("ju"); //doesn't work!!!! return null ref exc
   }
} 
```

我对第二个值（身份名称）有一点问题。我试图模拟它，但在将模拟的 IIdentity 分配给 ApplicationUser 时遇到问题，因为它是在内部完成的。有人告诉我自己创建一些 IIPrincipal（包括 IIdentity），根本不要嘲笑它。这是肯定可以做到的。不确定这是否可以称为存根使用？

那么你能建议我如何处理 IPrincipal 和 IIdentity 吗？任何建议都非常受欢迎。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-07-07T17:53:59.697

你得到一个空引用错误的原因是因为`IPrincipal.Identity`是空的；它还没有设置在你的嘲笑中`IPrincipal`。调用`.Name`null`Identity`会导致您的异常。

正如卡尔顿指出的那样，答案是也模拟`IIdentity` *，*并将其设置为为其`Name`属性返回“ju”。然后你可以告诉`IPrincipal.Identity`返回 mock `IIdentity`。

这是执行此操作的代码扩展（使用 Rhino Mocks 而不是 Stubs）：

```
public void BeforeTest()
{
   mocks = new MockRepository();
   IPrincipal mockPrincipal = mocks.CreateMock<IPrincipal>();
   IIdentity mockIdentity = mocks.CreateMock<IIdentity>();
   ApplicationContext.User = mockPrincipal;
   using (mocks.Record()) 
   {
      Expect.Call(mockPrincipal.IsInRole(Roles.ROLE_MAN_PERSON)).Return(true);
      Expect.Call(mockIdentity.Name).Return("ju"); 
      Expect.Call(mockPrincipal.Identity).Return(mockIdentity);
   }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-10-02T14:39:48.363

这是我用来返回测试用户的代码（使用存根）：

```
 [SetUp]
    public void Setup()
    {
        var identity = MockRepository.GenerateStub<IIdentity>();
        identity.Stub(p => p.Name).Return("TestUser").Repeat.Any();
        var principal = MockRepository.GenerateStub<IPrincipal>();
        principal.Stub(p => p.Identity).Return(identity).Repeat.Any();

        Thread.CurrentPrincipal = principal;
    } 
```

我在其他代码中有 linq，所以我使用 var 类型作为变量；如果需要，只需替换正确的类型（IPrincipal、IIdentity）。

# .net - .NET 中的“global::System”和“System”有什么区别？

> ID：162537
> 
> 赞同：3
> 
> 时间：2008-10-02T14:19:35.620
> 
> 标签：.net, visual-studio-2008, namespaces

我刚刚将 VS 2005 项目升级到 VS 2008 并正在检查更改。我注意到其中一个 .Designer.cs 文件发生了显着变化。大多数更改只是将*System*替换为*global::System*。例如，

```
protected override System.Data.DataTable CreateInstance() 
```

变成了

```
protected override global::System.Data.DataTable CreateInstance() 
```

这里发生了什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-10-02T14:23:19.357

:: 运算符称为命名空间别名限定符。

```
 global::System.Data.DataTable 
```

是相同的：

```
 System.Data.DataTable 
```

Visual Studio 2008 将它添加到设计器生成的代码中，以避免在人们创建名为 System 的类时偶尔发生的模棱两可的引用问题......例如：

```
class TestApp
{
    // Define a new class called 'System' to cause problems.
    public class System { }

    // Define a constant called 'Console' to cause more problems.
    const int Console = 7;
    const int number = 66;

    static void Main()
    {
        // Error  Accesses TestApp.Console
        //Console.WriteLine(number);
    }
} 
```

然而：

```
global::System.Console.Writeline("This works"); 
```

进一步阅读：

[http://msdn.microsoft.com/en-us/library/c3ay4x3d(VS.80).aspx](http://msdn.microsoft.com/en-us/library/c3ay4x3d(VS.80).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-29T00:59:47.753

为了防止人们[在这个列表中做#1](http://thesoftwarejedi.blogspot.com/2008/05/4-naughty-c-35-code-changes-for-your.html)。:)

# ruby-on-rails - 在 Rails 中安静地执行 AJAX 删除操作

> ID：162542
> 
> 赞同：6
> 
> 时间：2008-10-02T14:20:43.230
> 
> 标签：ruby-on-rails, rest

您如何在 Rails 中安静地执行删除和放置操作？我已阅读文档并认为我做的一切都正确，但我似乎无法让它工作。

例如，如果我想删除一个员工，我会创建一个名为“EmployeesController”的控制器并创建一个destroy 方法来执行删除。

然后我进入 routes.rb 文件并输入`map.resources :employees`，这使您可以访问 URL 辅助函数。

无论我想从中调用 Ajax 操作，我都应该有如下一行：

```
<%= link_to_remote "Delete", employee_path(@employee), :method => :delete %> 
```

当我单击该链接时，它仍在发送 POST 操作，因此它什么也不做。

我错过了什么或做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-10-02T14:28:45.100

尝试

```
:url => employee_url(@employee) 
```

IIRC，*_path 是由包含该方法的 :resource 指令生成的命名路由，从而覆盖您的 :method => :delete

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-10-02T14:32:28.663

从我的代码：

```
<%= link_to_remote "Delete", :url => post_url(post), :method => :delete %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-03T23:13:15.787

只是添加一些额外的细节：使用`:url => employee_url(@employee)`帮助（来自接受的答案）。让我感到困惑的另一部分是我期待一个 HTTP 删除请求，但我不断收到带有设置为删除的参数“_method”（由 rails 自动添加）的 POST 请求。

所以它调用了正确的销毁操作，我通过向控制器添加几个调试语句来证明这一点。是的，我的删除代码在控制器中是错误的，所以当我认为它是时它并没有真正删除。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2010-08-21T11:32:31.150

如果您的问题是没有 AJAX 请求，您必须添加正确的 javascript 标签

# java - 如何在 Java 项目中查找未使用/死代码

> ID：162551
> 
> 赞同：312
> 
> 时间：2008-10-02T14:22:52.663
> 
> 标签：java, refactoring, dead-code

您使用什么工具在大型 Java 项目中查找未使用/死代码？我们的产品已经开发了几年，手动检测不再使用的代码变得非常困难。但是，我们确实尝试删除尽可能多的未使用代码。

对一般策略/技术（特定工具除外）的建议也值得赞赏。

**编辑：**请注意，我们已经使用了代码覆盖工具（Clover、IntelliJ），但这些帮助不大。死代码仍然有单元测试，并显示为已覆盖。我想一个理想的工具会识别出几乎没有其他代码依赖于它的代码集群，从而允许手动检查文档。

* * *

## 回答 #1

> 赞同：226
> 
> 时间：2008-10-02T15:14:09.937

一个运行良好的 Eclipse 插件是[Unused Code Detector](http://www.ucdetector.org/)。

它处理整个项目或特定文件，并显示各种未使用/无效的代码方法，以及建议可见性更改（即可以保护或私有的公共方法）。

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2011-03-29T16:34:01.513

[CodePro](https://developers.google.com/java-dev-tools/codepro/doc/)最近由 Google 与 Eclipse 项目一起发布。它是免费且高效的。该插件具有“[查找死代码](https://developers.google.com/java-dev-tools/codepro/html/tasks/maintopic)”功能，具有一个/多个入口点。效果很好。

* * *

## 回答 #3

> 赞同：42
> 
> 时间：2008-10-02T14:48:19.343

我会检测正在运行的系统以保留代码使用日志，然后开始检查数月或数年未使用的代码。

例如，如果您对未使用的类感兴趣，则可以检测所有类以在创建实例时进行记录。然后一个小脚本可以将这些日志与完整的类列表进行比较，以找到未使用的类。

当然，如果您进入方法级别，则应牢记性能。例如，这些方法只能记录它们的第一次使用。我不知道如何在 Java 中最好地做到这一点。我们在 Smalltalk 中做到了这一点，它是一种动态语言，因此允许在运行时修改代码。我们使用日志调用检测所有方法，并在第一次记录方法后卸载日志代码，因此在一段时间后不会再发生性能损失。也许可以在 Java 中使用静态布尔标志完成类似的事情......

* * *

## 回答 #4

> 赞同：32
> 
> 时间：2011-08-22T07:40:14.660

我很惊讶这里没有提到[ProGuard 。](http://proguard.sourceforge.net/)它是最成熟的产品之一。

> [ProGuard](http://proguard.sourceforge.net/)是一个免费的 Java 类文件收缩器、优化器、混淆器和预验证器。它检测并删除未使用的类、字段、方法和属性。它优化字节码并删除未使用的指令。它使用简短的无意义名称重命名剩余的类、字段和方法。最后，它会为 Java 6 或 Java Micro Edition 预先验证处理后的代码。
> 
> ProGuard 的一些用途是：
> 
> *   创建更紧凑的代码，用于更小的代码存档、更快的网络传输、更快的加载和更小的内存占用。
> *   使程序和库更难逆向工程。
> *   **列出死代码，因此可以从源代码中删除。**
> *   重新定位和预验证 Java 6 或更高版本的现有类文件，以充分利用其更快的类加载。

这里列出死代码的示例：[https ://www.guardsquare.com/en/products/proguard/manual/examples#deadcode](https://www.guardsquare.com/en/products/proguard/manual/examples#deadcode)

* * *

## 回答 #5

> 赞同：25
> 
> 时间：2009-01-28T19:45:32.723

众所周知，我在 Eclipse 中对单个类所做的一件事是将其所有方法更改为私有方法，然后看看我收到了哪些投诉。对于使用的方法，这将引发错误，我将它们返回到我可以的最低访问级别。对于未使用的方法，这将引发有关未使用方法的警告，然后可以将其删除。作为奖励，您经常会发现一些可以而且应该设为私有的公共方法。

但它非常手动。

* * *

## 回答 #6

> 赞同：15
> 
> 时间：2008-10-02T16:21:17.917

使用测试覆盖工具来检测您的代码库，然后运行应用程序本身，而不是测试。

[Emma](http://emma.sourceforge.net/)和[Eclemma](http://www.eclemma.org/)将为您提供关于在任何给定的代码运行中运行的类的百分比的很好的报告。

* * *

## 回答 #7

> 赞同：13
> 
> 时间：2008-10-02T14:47:49.857

我们已经开始使用[Find Bugs](http://findbugs.sourceforge.net/)来帮助识别我们代码库的目标丰富的重构环境中的一些问题。我还会考虑使用[Structure 101](http://www.headwaysoftware.com/index.php)来识别代码库架构中过于复杂的点，这样你就知道真正的沼泽在哪里。

* * *

## 回答 #8

> 赞同：12
> 
> 时间：2008-10-02T14:28:07.627

理论上，您无法确定性地找到未使用的代码。有一个数学证明（嗯，这是一个更一般定理的特例）。如果您好奇，请查看停机问题。

这可以通过多种方式在 Java 代码中体现出来：

*   根据用户输入、配置文件、数据库条目等加载类；
*   加载外部代码；
*   将对象树传递给第三方库；
*   等等

话虽如此，我使用 IDEA IntelliJ 作为我选择的 IDE，它具有广泛的分析工具，用于查找模块、未使用的方法、未使用的成员、未使用的类等之间的依赖关系。它也非常智能，就像一个不被调用的私有方法是标记为未使用但公共方法需要更广泛的分析。

* * *

## 回答 #9

> 赞同：8
> 
> 时间：2016-01-21T10:51:55.773

在 Eclipse 中转到 Windows > Preferences > Java > Compiler > Errors/Warnings
并将它们全部更改为错误。修复所有错误。这是最简单的方法。美妙之处在于，这将允许您在编写代码时清理代码。

截图 Eclipse 代码：

[![在此处输入图像描述](https://i.stack.imgur.com/AVI7m.jpg)](https://i.stack.imgur.com/AVI7m.jpg)

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2009-02-23T20:31:11.320

IntelliJ 具有用于检测未使用代码的代码分析工具。您应该尝试使尽可能多的字段/方法/类尽可能不公开，这将显示更多未使用的方法/字段/类

我也会尝试定位重复代码以减少代码量。

我的最后一个建议是尝试找到开源代码，如果使用它会使您的代码更简单。

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2009-11-17T13:40:44.653

Structure101[切片透视图](http://www.headwaysoftware.com/help/java/index.html?perspectives_slice.html)将给出与“主”集群没有依赖关系的类或包的任何“孤儿”或“孤儿[组”的列表（和依赖图）。](http://www.headwaysoftware.com/help/java/index.html?perspectives_group.html)

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2012-06-28T08:29:52.990

DCD 不是某些 IDE 的插件，但可以从 ant 或独立运行。它看起来像一个静态工具，[它可以做 PMD 和 FindBugs 做不到](http://java.net/projects/dcd/pages/Alternatives)的事情。我会试试。

PS 正如下面评论中提到的，该项目现在位于[GitHub](https://github.com/evernat/dead-code-detector)中。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2008-10-02T14:24:38.120

有一些工具可以分析代码并提供代码覆盖率数据。这使您可以看到（在运行代码时）调用了多少。您可以获得这些工具中的任何一个来找出您拥有多少孤儿代码。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2009-01-28T19:38:13.643

*   FindBugs 非常适合这类事情。
*   PMD（Project Mess Detector）是另一个可以使用的工具。

但是，两者都找不到工作区中未使用的**公共静态方法。**如果有人知道这样的工具，请告诉我。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2008-10-02T16:16:09.617

用户覆盖工具，例如 EMMA。但它不是静态工具（即它需要通过回归测试和所有可能的错误情况来实际运行应用程序，这是不可能的:)）

尽管如此，EMMA 还是非常有用的。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2008-11-26T16:40:09.520

代码覆盖工具，例如 Emma、Cobertura 和 Clover，将检测您的代码并通过运行一组测试记录它的哪些部分被调用。这非常有用，应该是您开发过程中不可或缺的一部分。它将帮助您确定测试套件对代码的覆盖程度。

但是，这与识别真正的死代码不同。它仅标识测试覆盖（或未覆盖）的代码。这可能会给您带来误报（如果您的测试未涵盖所有场景）以及误报（如果您的测试访问实际上从未在现实世界场景中使用过的代码）。

我想真正识别死代码的最佳方法是在实时运行环境中使用覆盖工具检测您的代码，并在较长时间内分析代码覆盖率。

如果您在负载均衡的冗余环境中运行（如果不是，为什么不呢？），那么我认为只检测您的应用程序的一个实例并配置您的负载均衡器以便随机但很小的一部分是有意义的您的用户在您的检测实例上运行。如果您在很长一段时间内执行此操作（以确保您已涵盖所有现实世界的使用场景 - 例如季节性变化），您应该能够准确地看到您的代码的哪些区域在现实世界使用中被访问以及哪些部分真的从来没有被访问过，因此是死代码。

我从未亲眼见过这样做，也不知道如何使用上述工具来检测和分析未通过测试套件调用的代码 - 但我相信它们可以。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2013-09-06T12:55:54.930

有一个 Java 项目 -[死代码检测器](https://blogs.oracle.com/geertjan/entry/dead_code_detection_with_netbeans)(DCD)。对于源代码，它似乎不能很好地工作，但对于 .jar 文件 - 它真的很好。另外，您可以按类和方法过滤。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2017-02-12T04:39:59.593

**这里的Netbeans是 Netbeans**[死码检测器](http://plugins.netbeans.org/plugin/50005/dead-code-detector "netbeans 的死代码检测器") 的插件。

如果它可以链接并突出显示未使用的代码会更好。您可以在这里投票和评论：[Bug 181458 - 查找未使用的公共类、方法、字段](https://netbeans.org/bugzilla/show_bug.cgi?id=181458)

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2008-10-02T14:24:28.697

Eclipse 可以显示/突出显示无法访问的代码。JUnit 可以向您显示代码覆盖率，但您需要进行一些测试，并且必须确定相关测试是否缺失或代码是否真的未使用。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2011-12-13T10:14:00.663

我找到了 Clover 覆盖工具，它检测代码并突出显示已使用和未使用的代码。与 Google CodePro Analytics 不同，它也适用于 WebApplications（根据我的经验，我对 Google CodePro 的看法可能不正确）。

我注意到的唯一缺点是它没有考虑 Java 接口。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2017-03-01T21:22:12.897

我使用 Doxygen 开发了一个方法调用映射来定位从未调用过的方法。在图表上，您会发现没有调用者的方法集群孤岛。这不适用于库，因为您需要始终从某个主要入口点开始。

# java - 在 Cobol 程序中使用 Java API

> ID：162563
> 
> 赞同：3
> 
> 时间：2008-10-02T14:24:54.920
> 
> 标签：java, api, integration, communication, cobol

我们的大型机上运行了一些 COBOL 程序，我们需要其中一个程序通过 Java API 与我们的后端库进行通信。Cobol 程序有什么方法可以调用 Java 程序吗？

是否可以使用 Cobol 的 Web 服务？我如何将 Cobol 程序与其他程序集成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-02T15:38:58.317

发现这个：

> COBOL 程序可以与 JAVA 互操作。
> 
> 要实现与 Java™ 的语言间互操作性，您必须遵循以下特定规则和准则： 在 Java 本地接口 (JNI) 中使用服务 编码数据类型 编译 COBOL 程序 您可以从 COBOL 程序调用用 Java 编写的方法，以及您可以从 Java 程序调用用 COBOL 编写的方法。对于基本的 Java 对象功能，您可以使用 COBOL 面向对象的语言。对于其他 Java 功能，您可以调用 JNI 服务。
> 
> 因为 Java 程序可能是多线程的并且使用异步信号，所以使用 THREAD 选项编译您的 COBOL 程序。

此外，我们正在使用 Cobol Enterprise，它支持 Web 服务。然后应使用 Cobol Enterprise 中的 WS 功能完成集成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-03-26T16:40:26.807

对于 AS/400，有 IBM Java 工具箱。检查信息中心的 java 编程部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-02T14:55:48.530

这是在黑暗中拍摄的，但 Dobbs 博士最近有一篇关于 Cobol 和 Java 的文章（[请参阅此处](http://www.ddj.com/architect/210602491;jsessionid=UYUW2NE15YBP0QSNDLRSKH0CJUNN2JVN?pgno=1)）。在第 3 页，他们提到在 JVM 上运行 Cobol 并提供一些供应商信息。这与您的问题完全不同，但可能会导致网络上出现一些新资源。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-02T14:38:44.483

我猜测任何 Java 集成都将是供应商扩展。你用的是什么编译器？

如果您的 Cobol 程序作为批处理作业运行，您可以将其拆分为两个批处理作业，一个将 Java 领域的所有查询写入一个文件，另一个使用 Java 领域的答案。在它们之间运行一个 Java 程序，读取查询文件并写出答案文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-03T20:59:41.773

[Microfocus](http://supportline.microfocus.com/documentation/books/nx40/dijint.htm)确实允许 COBOL 和 Java 进行交互，但要执行您需要的操作，您需要使用 Microfocus 衍生工具，称为*OO COBOL*。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-08-14T20:19:55.150

我不使用 COBOL 编码，但在我的工作中，我们有一个 MVS 系统，程序员可以在其中从 COBOL 输出 XML/Web 服务。

# .net - 更新 MS sql 2005 中日期字段的月份值

> ID：162564
> 
> 赞同：0
> 
> 时间：2008-10-02T14:24:55.513
> 
> 标签：.net, sql, web-services

我需要一种方法来更新我的数据库中 dateTime 字段的月份值。我已经超过了该月的 int 值，需要将其用于更新。是否可以在 sql 语句中执行此操作，或者我最好在 web 服务中的 c# 中执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-02T14:27:10.110

向下移动，然后再次向上移动：

```
UPDATE table
SET datecol = DATEADD(m, @newmonth, DATEADD(m, -MONTH(datecol), datecol))
WHERE id = @id 
```

或者，更简单地说：

```
UPDATE table
SET datecol = DATEADD(m, @newmonth - MONTH(datecol), datecol)
WHERE id = @id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-02T14:39:00.130

您可以在 Sql Server 中的 TSQL 中完成这一切。查看[DateDiff](http://msdn.microsoft.com/en-us/library/ms186819.aspx)和[DateAdd](http://msdn.microsoft.com/en-us/library/ms186819.aspx)函数。

我希望这会起作用：

```
DECLARE @newMonth int
SET @newMonth = 5 --As an example

UPDATE dbo.TheTable
SET DateField = DATEADD(month, @newMonth - DATEPART(month, DateField) , DateField) 
```

# java - 如何获取 JDBC 中的行数？

> ID：162571
> 
> 赞同：30
> 
> 时间：2008-10-02T14:25:36.480
> 
> 标签：java, jdbc, resultset

我已执行 JDBC 查询以获取结果集。在迭代它之前，我想快速找出返回了多少行。我怎样才能以高性能做到这一点？

我正在使用 Java 6、Oracle 11g 和最新的 Oracle JDBC 驱动程序。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2008-10-02T14:34:26.100

您将不得不将其作为单独的查询来执行，例如：

```
SELECT COUNT(1) FROM table_name 
```

一些 JDBC 驱动程序可能会告诉您，但这是可选行为，更重要的是，驱动程序可能还不知道。这可能是由于查询是如何优化的，例如 Oracle 中的两个示例执行策略是尽可能快地获取所有行或尽可能快地获取第一行。

如果您执行两个单独的查询（一个是计数，另一个是查询），那么您需要在同一个事务中执行它们。这将在 Oracle 上运行良好，但在其他数据库上可能会出现问题（例如，SQL Server 将根据您的隔离级别向您显示未提交的数据或阻止外部未提交的更新，而 Oracle 支持一个隔离级别，可为您提供事务上一致的视图数据而不阻止外部更新）。

通常，尽管有多少行并不重要。通常，这种查询要么是批处理的，要么是分页的，无论哪种方式，您都可以以加载/处理的行的形式获得进度信息，并且您可以检测到结果集的结尾（显然）。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-04-13T10:33:09.387

```
ResultSet rs = stmt.executeQuery(sql);
int rowCount = rs.last() ? rs.getRow() : 0; // Number of rows in result set. Don't forget to set cyrsor to beforeFirst() row! :) 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2008-10-02T14:26:43.030

简短的回答：你不能。

长答案：您不能，部分原因是数据库可能会懒惰地评估查询，只在您要求时返回行。

编辑：使用可滚动的 ResultSet 你可以:)

事实上，很久以前（早在 2001 年！）我就在 Java 数据库新闻组中问过这个问题，并得到了一些[有用的回答](http://groups.google.com/group/comp.lang.java.databases/browse_frm/thread/f5142687a3d492fd/cda88f3b14649c8e)。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2013-07-18T08:11:32.280

要从 JDBC 获取行数：

```
ResultSet rs = st.executeQuery("select count(*) from TABLE_NAME");
rs.next();
int count = rs.getInt(1); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-10-02T14:30:51.943

如果您的驱动程序支持它（！），您可以调用`ResultSet.afterLast()` `ResultSet.getRow()` `ResultSet.beforeFirst()`. 性能可能好也可能不好。

更好的解决方案是重写您的算法而不需要预先设置大小。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-07-26T11:08:50.707

**没有三元运算符**

```
rs.last();  // Moves the cursor to the last row in this ResultSet object.
int rowCount = rs.getRow();  //Retrieves the current row number.
rs.beforeFirst(); //Moves the cursor to the front of this ResultSet object,just before the first row. 
```

**三元运算符一行**

```
int rowCount = rs.last() ? rs.getRow() : 0; 
rs.beforeFirst(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-28T21:54:36.977

代码：

```
//Create a Statement class to execute the SQL statement
Statement stmt = con.createStatement();

ResultSet rs = stmt.executeQuery("SELECT COUNT(*) AS COUNT FROM
TABLENAME");

 while(rs.next()) {
    System.out.println("The count is " + rs.getInt("COUNT"));
 }

 //Closing the connection
 con.close(); 
```

# php - 如何在 PHP 中将电子邮件附件保存到服务器？

> ID：162576
> 
> 赞同：6
> 
> 时间：2008-10-02T14:26:01.313
> 
> 标签：php, email, mime

两天的大部分时间里，我一直在与 PHP 的电子邮件阅读功能作斗争。我正在编写一个脚本来读取邮箱中的电子邮件并将任何附件保存到服务器上。如果您曾经做过类似的事情，您可能会理解我的痛苦：**PHP 不能很好地处理电子邮件！**

我已连接到 POP3 服务器，并且可以迭代文件。这是代码的粗略轮廓：

```
if (!$mbox = imap_open ("{myserver.com:110/pop3/notls}INBOX", "u", "p"))
    die ('Cannot connect/check mail! Exiting');

if ($hdr = imap_check($mbox)) 
    $msgCount = $hdr->Nmsgs;
else 
    die ("Failed to get mail");

foreach ($overview as $message) {
    $msgStruct = imap_fetchstructure($mbox, $message->msgno);

    // if it has parts, there are attachments that need reading
    if ($msgStruct->parts) {
        foreach ($msgStruct->parts as $key => $part) {
            switch (strtoupper($part->subtype)) {
                case 'GIF': case 'JPEG':case 'PNG':

                    //do something - but what?!

                    break;
            }
        }
    }
} 
```

我已经标记了我被卡住的地方。我可以使用`imap_fetchbody($mbox, $message->msgno, $key+1)`，但这会给我带来一堆这样的数据：

```
/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAUDBAQEAwUEBAQFBQUGBwwIBwcHBw8LCwkMEQ8S
EhEPERETFhwXExQaFRERGCEYGh0dHx8fExciJCIeJBweHx7/2wBDAQUFBQcGBw4ICA4eFBEU
Hh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh7/wAAR
CAHiAi0DASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAA
AgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkK
FhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWG
h4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl
5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREA
... 
```

我相信这是 MIME 数据。我需要它作为图像！我已经看到有几个班级在互联网上轰炸声称可以做所需的魔法。我不能让他们中的任何一个工作。我不明白为什么我发现这这么难！

**简而言之**，我正在寻找可以将原始 MIME 字符串转换为真实数据的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-10-02T14:32:27.803

我找到了如何使用 PHP 处理电子邮件的快速指南：[这里](http://www.linuxscope.net/articles/mailAttachmentsPHP.html)。

在该页面的底部有一个 attachment-body `echo`：

```
if (substr($ContentType,0,4) == "text") {
echo imap_qprint($fileContent);
} else {
echo imap_base64($fileContent);
} 
```

我想这可能是你需要的......

（编辑：在你的情况下，如果它总是图像，你可以跳过这`if`部分。当然，保存文件而不是回显它:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-02T14:28:38.173

MIME 数据是 base-64 编码的，所以我认为您应该能够使用 base64_decode 对其进行解码

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-02T14:35:27.033

您可以使用该功能并将其输出到文件中，或者使用 [`imap_base64`](http://php.net/manual/en/function.imap-base64.php) [`imap_savebody`](http://php.net/manual/en/function.imap-savebody.php)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-02T14:35:43.397

Zend 框架包含 Zend_Mail，它应该使阅读邮件消息更加容易，以及 Zend_Mime，我相信它可以将多部分 mime 消息解析为合理的数据结构。

[http://framework.zend.com/manual/en/zend.mail.read.html](http://framework.zend.com/manual/en/zend.mail.read.html)

# .net - Visual Studio 2005 和 2008 上的不同团队成员

> ID：162583
> 
> 赞同：5
> 
> 时间：2008-10-02T14:26:53.683
> 
> 标签：.net, visual-studio, visual-studio-2008, visual-studio-2005

我目前正在使用 Visual Studio 2005 开发一个 asp.net 应用程序。我想升级到 2008 以利用一些新功能，但我的远程团队暂时无法升级到它。

我的团队中是否有可能只有少数人升级到 Visual Studio 2008，而团队中的其他人继续使用 2005？

在这一点上，我不打算使用任何 3.0+ 基础的东西，所以这不是问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-02T14:29:58.527

是的，2005 年和 2008 年之间的项目文件是兼容的。解决方案不是，但它们很容易重新制作或复制。如果您使用的是 Web 应用程序项目，那么项目文件有一个问题。这两个版本引用了不同的 MSBuild 目标文件。Steven Harman 有[一个博客，其中包含要添加到项目文件的修复程序](http://stevenharman.net/blog/archive/2007/09/28/multi-targeting-vs2005-and-vs2008-web-application-projects-a-gotcha.aspx)。

只要您不使用 3.5 编译器中的任何新内容，您就应该很好。请注意，即使您的目标是 2.0 框架，编译器仍将接受 3.5 语法（var、对象初始化器等），因此您仍然需要注意这些。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-02T14:33:34.527

对于 C#：最初在 Visual Studio 2008 中创建的项目无法在 2005 中打开，除非您更改项目文件底部的几行。

Visual C++ 项目不兼容，但很容易将一个文件版本中的更改合并到另一个文件版本中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-02T14:33:48.440

制作项目文件的副本并将物理副本重命名为“Name2005.proj”。然后升级您正在处理的解决方案，这将升级项目和解决方案文件。最后回到 VS2005 并创建一个新的 2005 解决方案并将 2005 项目缝合到其中。

这为您提供了两组并行的项目文件，您可以将它们用于每个 Visual Studio 修订版中的代码。确保将 VS2008 目标 .net 版本保持在 .net2.0 并且不能共享 MS-Test 文件。您还必须手动保持项目文件同步。

这有点痛苦，但它有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-02T14:50:09.620

如果您使用源代码管理，您始终可以分支到“2008”，升级项目，然后在适当的时候手动合并分支。您只需要小心将您的解决方案定位到 2.0 并且只合并代码文件。

# svn - 颠覆：删除旧功能分支与保留它们

> ID：162591
> 
> 赞同：40
> 
> 时间：2008-10-02T14:29:00.467
> 
> 标签：svn, version-control, branch

我有一个具有标准布局的颠覆存储库，即主干/和分支/（和标签/）。当进行更大的更改时，会使用功能分支，定期与主干同步，然后重新集成回主干（现在使用 1.5）。很标准的东西。

我想知道的是，这样的功能分支，一旦完成并合并，是否应该保留或删除。颠覆书偶尔似乎暗示删除它们是很常见的，但我也看到了一堆保留分支的开源项目。

我也有点担心删除一个分支将如何使跟踪存在的分支变得更加困难，尤其是当潜在的重复名称进入场景时（比如我们搜索重构两次），它们的提交历史消失在存储库深处的某个地方等等

另一方面，分支被大量使用，尤其是现在的 1.5，我确实喜欢不必通过大量非活动分支来查找我目前正在处理的分支的想法。

我想念的优点和缺点是什么？人们在做什么？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2008-10-02T14:34:51.713

如果您真的担心删除它们，以免它们被遗忘，那么只需在名为“inactive”的分支下创建一个文件夹，并将`svn move`您较旧的非活动分支放入该文件夹。这对你来说可能是两全其美的。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2008-10-02T14:31:03.033

您可以安全地删除它们。删除它们不会将它们从存储库中删除，分配的空间永远不会回收，但它确实使您的整个项目树看起来更加干净。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2008-10-02T14:33:58.207

完成后我一直在删除功能分支，因为我喜欢没有杂乱。其他一些开发人员有一些小的困惑，但是由于我们在错误跟踪系统中记录了提交的修订号，所以它非常顺利。如果有人说他们找不到分支，建议`-rrevision`在他们的 log/diff/checkout/whatever 上使用标志，这通常是所有需要的。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2008-10-02T14:34:22.887

我的团队删除了它们以保持混乱。毕竟这不像是走开。如果需要，可以检索它们。您是对的，很难再次找到它们：您需要知道分支所在的修订号，以便告诉您的客户查看该修订以查看您的文件。

我们使用 FogBugz 进行项目管理，它通过修订号跟踪内容何时提交到我们的 SVN 存储库。我们可以使用它来确定我们需要恢复到哪个版本才能查看我们的文件：我们在 FogBugz 中找到功能历史记录，查看分支存在于哪些版本中，并使用该信息向后跳转。

# algorithm - 在没有数组的情况下迭代 shuffled [0..n)

> ID：162606
> 
> 赞同：8
> 
> 时间：2008-10-02T14:31:48.243
> 
> 标签：algorithm, language-agnostic, math, random

我知道一些如下工作的例程：

> X [n+1] = 例程（X [n] , 最大值）

例如，类似 LCG 生成器的东西：

> X [n+1] = (a*X [n] + c) mod m

此生成器中没有足够的参数化来生成每个序列。

梦想功能：

> X [n+1] = 例程(X [n] , max, 排列数)

该例程通过索引参数化到所有排列的集合中，将返回序列中的下一个数字。序列可能任意大（因此存储数组和使用阶乘数是不切实际的。

如果做不到这一点，是否有人拥有指向类似函数的指针，这些函数要么是无状态的，要么具有任意“最大值”的恒定状态量，这样他们就可以迭代一个混洗列表。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-10-02T23:19:28.177

有n！n 个元素的排列。存储您正在使用的至少需要 log(n!) / log(2) 位。根据斯特林的近似，这大约需要 n log(n) / log (2) 位。

显式存储一个索引需要 log(n) / log(2) 位。将所有 n 存储在索引数组中需要 n 倍，或者再次 n log(n) / log(2)。信息 - 从理论上讲，没有比显式存储排列更好的方法了。

换句话说，您传入的关于您想要的集合中的排列的索引与仅写出排列所占用的渐近存储空间相同。例如，如果将排列的索引限制为 32 位值，则最多只能处理 12 个元素的排列。64 位索引最多只能包含 20 个元素。

由于索引占用与排列相同的空间，因此要么将您的表示更改为直接使用排列，要么接受解包到大小为 N 的数组中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-10-02T16:07:21.790

根据我对[另一个问题](https://stackoverflow.com/questions/158716/how-do-you-efficiently-generate-a-list-of-k-non-repeating-integers-between-0-an#161552)的回答：

> 实际上可以在与所选元素数量成比例的空间中执行此操作，而不是您选择的集合的大小，无论您选择的总集合的比例如何。你可以通过生成一个随机排列来做到这一点，然后像这样从中选择：
> 
> 选择一个分组密码，例如[TEA](http://en.wikipedia.org/wiki/Tiny_Encryption_Algorithm) 或 XTEA。使用[XOR 折叠](http://isthe.com/chongo/tech/comp/fnv/#xor-fold)将块大小减小到比您选择的集合大 2 的最小幂。使用随机种子作为密码的密钥。要在排列中生成元素 n，请使用密码加密 n。如果输出编号不在您的集合中，请对其进行加密。重复直到数字在集合内。平均而言，每个生成的数字必须执行少于两次的加密。这有一个额外的好处，如果你的种子是加密安全的，那么你的整个排列也是如此。
> 
> [我在这里](http://blog.notdot.net/archives/37-Damn-Cool-Algorithms,-Part-2-Secure-permutations-with-block-ciphers.html)更详细地写了这个 。

当然，不能保证可以生成每个排列（并且取决于您的块大小和密钥大小，这甚至可能是不可能的），但是您可以获得的排列是高度随机的（如果不是，它不会' t 是一个好的密码），你可以拥有任意数量的密码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-02T16:26:32.787

If you are wanting a function that takes up less stack space, then you should look into using an iterated version, rather than a function. You can also use a datastructure like a TreeMap, and have it stored on disk, and read on an as needed basis.

```
X(n+1) = Routine(Xn, max, permutation number)
for(i = n; i > 0; i--)
 {
   int temp = Map.lookup(i) 
   otherfun(temp,max,perm)
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-02T14:37:37.013

是否可以在不预先计算并将整个事物存储在内存中的情况下索引一组排列？我之前尝试过这样的事情并没有找到解决方案 - 我认为这是不可能的（在数学意义上）。

免责声明：我可能误解了你的问题......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-03T09:03:51.330

将排列索引解包到数组中的代码，具有从索引到排列的特定映射。还有很多其他的，但是这个很方便。

```
#include <math.h>
#include <stdio.h>
#include <stdlib.h>

typedef unsigned char index_t;
typedef unsigned int permutation;

static void permutation_to_array(index_t *indices, index_t n, permutation p)
{
    index_t used = 0;
    for (index_t i = 0; i < n; ++i) {
        index_t left = n - i;
        index_t digit = p % left;
        for (index_t j = 0; j <= digit; ++j) {
            if (used & (1 << j)) {
                digit++;
            }
        }
        used |= (1 << digit);
        indices[i] = digit;
        p /= left;
    }
}

static void dump_array(index_t *indices, index_t n)
{
    fputs("[", stdout);
    for (index_t i = 0; i < n; ++i) {
        printf("%d", indices[i]);
        if (i != n - 1) {
            fputs(", ", stdout);
        }
    }
    puts("]");
}

static int factorial(int n)
{
    int prod = 1;
    for (int i = 1; i <= n; ++i) {
        prod *= i;
    }
    return prod;
}

int main(int argc, char **argv)
{
    const index_t n = 4;
    const permutation max = factorial(n);
    index_t *indices = malloc(n * sizeof (*indices));
    for (permutation p = 0; p < max; ++p) {
        permutation_to_array(indices, n, p);
        dump_array(indices, n);
    }
    free(indices);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-10-03T09:11:36.413

使用迭代接口的代码。时间复杂度为 O(n^2)，空间复杂度的开销为：n 的副本（log n 位）、迭代变量（log n 位）、跟踪 ni（log n 位）、当前值的副本（log n 位）、p 的副本（n log n 位）、下一个值的创建（log n 位）和一组已使用值（n 位）。您无法避免 n log n 位的开销。时间上，这也是 O(n^2)，用于设置位。这可以减少一点，但代价是使用装饰树来存储使用的值。

这可以通过调用适当的库来更改为使用任意精度的整数和位集，并且上述界限实际上将开始起作用，而不是被限制在 N=8，可移植（一个 int 可以与一个短的，小到 16 位）。9！= 362880 > 65536 = 2^16

```
#include <math.h>
#include <stdio.h>

typedef signed char index_t;
typedef unsigned int permutation;

static index_t permutation_next(index_t n, permutation p, index_t value)
{
    permutation used = 0;
    for (index_t i = 0; i < n; ++i) {
        index_t left = n - i;
        index_t digit = p % left;
        p /= left;
        for (index_t j = 0; j <= digit; ++j) {
            if (used & (1 << j)) {
                digit++;
            }
        }
        used |= (1 << digit);
        if (value == -1) {
            return digit;
        }
        if (value == digit) {
            value = -1;
        }
    }
    /* value not found */
    return -1;
}

static void dump_permutation(index_t n, permutation p)
{
    index_t value = -1;
    fputs("[", stdout);
    value = permutation_next(n, p, value);
    while (value != -1) {
        printf("%d", value);
        value = permutation_next(n, p, value);
        if (value != -1) {
            fputs(", ", stdout);
        }
    }
    puts("]");
}

static int factorial(int n)
{
    int prod = 1;
    for (int i = 1; i <= n; ++i) {
        prod *= i;
    }
    return prod;
}

int main(int argc, char **argv)
{
    const index_t n = 4;
    const permutation max = factorial(n);
    for (permutation p = 0; p < max; ++p) {
        dump_permutation(n, p);
    }
} 
```

# vim - 使用vim创建新文件时如何自动添加一些骨架代码

> ID：162617
> 
> 赞同：34
> 
> 时间：2008-10-02T14:33:26.117
> 
> 标签：vim, code-generation

用 vim 创建新文件时，我想自动添加一些骨架代码。

例如，当创建一个新的 xml 文件时，我想添加第一行：

```
 <?xml version="1.0"?> 
```

或者在创建 html 文件时，我想添加：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
  <head>
    <title></title>
  </head>
  <body>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2008-10-02T14:40:34.167

我的 .vimrc 中有这样的东西：

```
au BufNewFile *.xml 0r ~/.vim/xml.skel | let IndentStyle = "xml"
au BufNewFile *.html 0r ~/.vim/html.skel | let IndentStyle = "html" 
```

等等，无论你需要什么。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2008-10-02T14:46:13.200

您可以将骨架/模板保存到文件中，例如 ~/vim/skeleton.xml

然后将以下内容添加到您的 .vimrc

```
augroup Xml
    au BufNewFile *.xml 0r ~/vim/skeleton.xml
augroup end 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2011-08-31T23:55:52.107

抱歉迟到了，但我觉得[我这样做](https://github.com/astrails/dotvim)的方式可能对某些人有用。它使用文件的文件类型，使其比更传统的方法更短、更动态。它仅在 Vim 7.3 上进行了测试。

```
if has("win32") || has ('win64')
    let $VIMHOME = $HOME."/vimfiles/"
else
    let $VIMHOME = $HOME."/.vim/"
endif

" add templates in templates/ using filetype as file name
au BufNewFile * :silent! exec ":0r ".$VIMHOME."templates/".&ft 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2008-10-02T15:00:22.463

如果您想使您的骨架适应上下文或用户选择，请查看[vim.wikia上列出的模板扩展插件](http://vim.wikia.com/wiki/Category:Automated_Text_Insertion)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-10-02T14:38:34.687

这里有两个使用 python 脚本的例子。

在你的 .vimrc 或你的 .vimrc 来源的另一个文件中添加类似这样的内容：

```
augroup Xml
  au BufNewFile *.xml :python import vim
  au BufNewFile *.xml :python vim.current.buffer[0:0] = ['<?xml version="1.0"?>']
  au BufNewFile *.xml :python del vim
augroup END

fu s:InsertHtmlSkeleton()
  python import vim
  python vim.current.buffer[0:0] = ['<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">', "<html>", "<head>", "  <title></title>", "</head>", "<body>", "", "</body>", "</html>"]
  python del vim
endfu

augroup Html
  au BufNewFile *.html call <SID>InsertHtmlSkeleton()
augroup END 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-10-02T14:39:03.420

您可以在读取或创建文件时添加各种挂钩。到

```
:help event 
```

并阅读那里的内容。你想要的是

```
:help BufNewFile 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-11-13T13:40:58.660

它也可以与 snipmate 一起使用：

```
augroup documentation
    au!
    au BufNewFile *.py :call ExecuteSnippet('docs')
augroup END

function! ExecuteSnippet(name)
    execute "normal! i" . a:name . "\<c-r>=TriggerSnippet()\<cr>"
endfunction 
```

使用“文档”触发片段。

它适用于多片段，但随后会出现 :messages 窗口并且很麻烦。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-05-03T09:59:15.707

我为html写了一个插件：

关于 vim 脚本：[http ://www.vim.org/scripts/script.php?script_id=4845](http://www.vim.org/scripts/script.php?script_id=4845)

在 Github 上：[https ://github.com/linuscl/vim-htmltemplate](https://github.com/linuscl/vim-htmltemplate)

# c# - .NET：如何使用 XPATH 从 XMLDocument 中删除特定节点？

> ID：162618
> 
> 赞同：9
> 
> 时间：2008-10-02T14:33:31.030
> 
> 标签：c#, .net, xpath

使用 C#

如何使用 XPATH 从 XMLDocument 中删除特定节点？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2011-05-30T09:36:56.620

如果要删除不是文档根目录的直接子节点的节点，可以执行以下操作：

```
XmlDocument doc = new XmlDocument();
// ... fill or load the XML Document
XmlNode childNode = doc.SelectSingleNode("/rootnode/childnode/etc"); // apply your xpath here
childNode.ParentNode.RemoveChild(childNode); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-10-02T14:37:36.420

干得好。ChildNodeName，可以只是节点名称或 XPath 查询。

```
XmlDocument doc = new XmlDocument();

// Load you XML Document

XmlNode childNode = doc.SelectSingleNode(childNodeName);

// Remove from the document
doc.RemoveChild(childNode); 
```

使用 Linq 有另一种方式，但我猜你使用的是 .NET 2.0

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-10-10T09:36:30.033

XPath 只能从文档中选择节点，不能修改文档。

# c# - 您使用什么工具和技术来查找死代码？

> ID：162641
> 
> 赞同：25
> 
> 时间：2008-10-02T14:36:18.763
> 
> 标签：c#, .net, refactoring, code-analysis

您使用什么工具和技术在 .NET 中查找死代码？

过去，我使用 Obsolete 属性修饰了方法（传递 true 以便编译器会发出错误，如[MSDN](http://msdn.microsoft.com/en-us/library/aa664623.aspx)中所述）。

我有兴趣看到其他人的建议（除了 FxCop 或 ReSharper 等工具）。我想确保我不会错过其他有用的工具。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2008-10-02T14:37:25.827

为什么需要其他答案？FxCop 和 Resharper 做到了这一点，尤其是看到 FxCop 现在通过“代码分析”集成到 VS 中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-10-02T14:41:06.207

TDD + NCover

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-10-02T14:38:29.553

如果它是死代码（至少仅在解决方案中），它在 ReSharper 中显示为灰色...例如未调用的方法或类或未使用的属性和变量

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-10-02T14:40:13.887

我再次推荐[AQTime](http://smartbear.com/products/qa-tools/application-performance-profiling)。静态代码分析已经完成了您想要的（以及更多），但其他分析器更加有用。物有所值，如果你能负担得起。

# css - 为什么我不能在 Firebug 中保存 CSS 更改？

> ID：162644
> 
> 赞同：143
> 
> 时间：2008-10-02T14:36:48.217
> 
> 标签：css, firebug

Firebug 是我发现的用于编辑 CSS 的最方便的工具 - 那么为什么没有简单的 CSS 的“保存”选项呢？

我总是发现自己在 Firebug 中进行调整，然后回到我原来的 .css 文件并复制调整。

有没有人提出更好的解决方案？

**编辑：**我知道代码存储在服务器上（在大多数情况下不是我自己的），但我在构建自己的网站时使用它。

Firebug 只是使用 Firefox 从服务器下载的 .css 文件，它准确地知道它正在编辑哪些文件中的哪些行。我不明白为什么没有“导出”或“保存”选项，它允许您存储新的 .css 文件。（然后我可以用它替换遥控器）。

我尝试在临时位置查找，然后选择*File* > *Save...*并尝试 Firefox 上的输出选项，但我仍然没有找到方法。

**编辑2：** 官方讨论组有[很多问题](https://groups.google.com/forum/#!searchin/firebug/save$20css)，但没有答案。

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2009-12-16T15:48:47.157

很长一段时间以来一直在想同样
的事情，当您使用 firebug 的即时自由式 css 因
意外重新加载或诸如此类的事情而被炸成碎片时，您会感到非常痛苦......

出于我的意图和目的，我终于找到了该工具....：**FireDiff**。

它为您提供了一个新标签，可能是一些奇怪的 David Bowie 参考，称为“更改”；这不仅允许您查看/保存萤火虫（即您）一直在做的事情，
而且还可以选择跟踪页面本身所做的更改......如果它和/或您如此倾向于。

非常感谢我不必重新输入，或重新想象然后重新输入，我制定的**每条**css 规则......

[这](http://www.incaseofstairs.com/firediff/)是开发人员的链接（不要因为第一次出现而贬低，也许还不如直接访问[Mozilla Add-On 存储库](https://addons.mozilla.org/en-US/firefox/addon/firediff/)。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-07-21T16:05:58.933

我来这里是为了寻找这个功能，也就是说，能够将编辑`CSS`的属性保存回原始文件（在我的本地开发机器上）。不幸的是，经过大量搜索并没有找到任何适合我需要的东西（好吧，有[CSS 更新程序](http://www.cssupdater.com/)，但你必须注册，它是一个付费扩展......）我放弃了 Firefox + Firebug，并为 Google Chrome 寻找类似的东西。你猜怎么着......我刚刚发现这篇很棒的帖子展示了一种让它工作的好方法（内置在 Chrome 中 - 不需要额外的扩展）：

[使用 Chrome 开发者工具更改本地文件系统上的 CSS 和 SAVE](http://devcoma.blogspot.com.br/2012/07/change-css-and-save-on-local-file.html)

![在此处输入图像描述](https://i.stack.imgur.com/6gwkI.png)

我现在试过了，它很好地突出了改变的线条。只需单击保存即可完成！:)

这是一个解释这一点的视频以及更多内容：[Google I/O 2011: Chrome Dev Tools Reloaded](http://www.youtube.com/watch?v=N8SS-rUEZPg&feature=player_detailpage#t=515s)

如果您在编辑 CSS 文件时更改浏览器并不重要，我希望它会有所帮助。我现在已经做出了改变，但我真的很想把这个功能内置到 Firebug 中。:)

* * *

**[更新 1]**

今天我刚看到这个视频：[Sublimetext 中的 Firefox CSS 实时编辑（正在进行中）](http://youtu.be/UrnB8lZnx4I)看起来确实很有希望。

**[更新 2]**

如果您碰巧将[Visual Studio 2013](http://www.microsoft.com/visualstudio/eng/visual-studio-2013)与[Web Essentials](http://vswebessentials.com/changelog)一起使用，您将能够自动同步 CSS，如本视频所示：

[Web Essentials：浏览器工具集成](http://youtu.be/kkKBqNJaylU)

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2008-10-03T21:09:28.233

[Web Developer 插件可](https://addons.mozilla.org/en-US/firefox/addon/web-developer/)让您保存您的编辑。我想将 Firebug 的编辑与 Web Developer 的保存功能结合起来。

[![替代文字](https://i.stack.imgur.com/vr166.png)](https://i.stack.imgur.com/vr166.png)
[（来源：[mozilla.org](https://addons.mozilla.org/en-US/firefox/images/t/11916/943948800)）]

使用“**保存**”按钮（单击 CSS 菜单 -> 编辑 CSS）将修改后的 CSS 保存到磁盘。

**建议**：当您更改标签以进行其他浏览时，请使用“**粘贴”按钮以防止丢失您的更改。**如果可能，仅使用一个选项卡进行编辑，其他 firefox 窗口进行相关搜索、网络邮件等。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2009-12-02T15:47:41.987

我刚刚在 mozilla 插件沙盒中发布了一个**萤火虫插件**，它可能完全符合您的要求： [https ://addons.mozilla.org/en/firefox/addon/52365/](https://addons.mozilla.org/de/firefox/addon/52365/)

它实际上**根据需要将“接触”的 css 文件保存到您的 Web 服务器**（通过与单文件 Web 服务 php 脚本通信）。

**文档**可以在我的主页或插件页面上找到

我将不胜感激任何测试、错误报告、评论、评级、讨论，因为它仍处于早期测试阶段，但应该已经可以正常工作了。

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2010-09-26T15:29:41.323

# [CSS-X-火](http://code.google.com/p/css-x-fire/)

我很惊讶它仍然没有被列入这个问题，但可能是因为它是新的并且作者还没有时间推广它。

它被称为**[CSS-X-Fire](http://code.google.com/p/css-x-fire/)**，它是 JetBrains 系列 IDE 的插件：[IntelliJ IDEA、PHPWebStorm、PyCharm、WebStorm、RubyMine](http://www.jetbrains.com/webide/)。

工作原理：您安装其中一个 IDE 并配置部署（支持 FTP 和 SCP）。这将允许您与服务器保持同步。

在此之后，您安装此插件。当它启动时它会询问告诉你他将为 Firefox 安装一个插件，以便在 Firebug 和 IDE 之间进行集成。如果无法安装插件，只需使用拖放技术安装即可。

安装后，它将跟踪您在 Firebug 中所做的所有更改，您只需在 de IDE 中单击即可应用它们。

![IDE 内的 CSS-X-Fire 窗口。](https://i.stack.imgur.com/2Bahy.png)

# [火文件](https://addons.mozilla.org/en-us/firefox/addon/firefile/)

FireFile 是一种替代方法，它要求您将一个小的 php 文件添加到服务器端，以便能够上传修改后的 css。

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2008-10-02T14:50:35.047

您可以使用[fireclipse将](http://www.almaden.ibm.com/u/bartonjj/fireclipse/index.html)[firebug](https://addons.mozilla.org/en-US/firefox/addon/1843)链接到 eclipse，然后从 eclipse 中保存文件

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2008-10-02T14:48:21.697

我认为您最接近的方法是进入 Firebug 中的编辑模式并复制和粘贴 CSS 文件的内容。

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2010-08-31T09:25:02.663

我们刚刚介绍了 Backfire，这是一个开源 javascript 引擎，它允许您将在 Firebug 和 Webkit 检查器中所做的 CSS 更改保存到服务器。该库包含一个示例 C# 实现，说明如何将传入的更改保存到您的 CSS。

这是一篇关于它如何工作的博客文章：http: [//blog.quplo.com/2010/08/backfire-save-css-changes-made-in-firebug/](http://blog.quplo.com/2010/08/backfire-save-css-changes-made-in-firebug/)

这是托管在 Google Code 上的代码： [http ://code.google.com/p/backfire/](http://code.google.com/p/backfire/)

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2009-03-21T23:26:23.257

我知道这不能回答您的问题，但令人惊讶的是，Internet Explorer 8 的 Firebug 克隆“开发人员工具栏”（可通过​​ F12 访问）提供了“保存 html”的选项。此函数将当前 DOM 保存到本地文件，这意味着如果您以某种方式编辑 DOM，例如通过在某处添加样式属性，这也将被保存。

如果您像每个人一样使用 Firebug 来处理 CSS，这并不是特别有用，但这是朝着正确方向迈出的一步。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2010-01-20T23:42:06.570

我提出了一个解决方案，它结合了 Firebug 和 FireFTP 以及在本地运行网站时直接访问本地文件系统的代码。

以下是场景：

**在远程计算机上托管的网站上工作**

在这种情况下，您将提供 FTP 详细信息和 CSS/HTML/Javascript 的位置，然后 Firebug 会在您保存更改时更新这些文件。它甚至可以自己定位文件，然后提示您验证它是否具有正确的文件。如果文件名是唯一的，那应该不是问题。

**在本地机器上运行的网站上工作**

在这种情况下，您可以向 Firebug 提供网站的本地文件夹位置，并且将使用相同的行为来匹配和验证文件。如有必要，可以通过 FireFTP 访问本地文件系统。

**在没有 FTP 访问的远程托管网站上工作**

在这种情况下，必须实施诸如 FireFile 附加组件之类的东西。

* * *

一个附加功能是能够保存和打开项目文件，这些文件存储本地文件和它们关联的 URL 之间的映射，以及像 FireFTP 一样保存 FTP 详细信息。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2010-04-09T08:23:47.283

# [火文件](https://addons.mozilla.org/en-us/firefox/addon/firefile/)

创建 Firebug 是为了检测不是调试器的问题。但是，如果您添加将 firebug 与保存更改集成的新工具，则可以保存更改。它是 FireFile，点击这里 [http://thelistoflist.blogspot.com/2010/04/how-to-save-change-you-make-in-firebug.html](http://thelistoflist.blogspot.com/2010/04/how-to-save-change-you-make-in-firebug.html)。

FireFile 通过向服务器端添加一个小的 PHP 文件来提供所需的功能。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2010-10-02T14:50:58.003

我是 CSS-X-Fire 的作者，Sorin Sbarnea 也很高兴地在这个帖子中发表了这篇文章。猜我有点晚了;）

CSS-X-Fire 将 CSS 属性更改从 Firebug 发送到可以应用或丢弃更改的 IDE。

与大多数只知道文件名和浏览器下载的内容的其他现有工具相比，此解决方案有几个优点（请参阅原始帖子中的 NickFitz 评论）。

场景 1：您有一个网站（项目），其中包含一些用户可以从中选择的主题。每个主题都有自己的 CSS 文件，但 Firebug 只知道一个，即当前的一个。CSS-X-Fire 将检测项目中所有匹配的选择器，并让您决定应该修改哪些。

场景 2：Web 项目具有在编译时或部署期间创建的样式表。它们可能是从多个文件合并而来的，并且文件名可能会更改。CSS-X-Fire 不关心文件的名称，它只处理 CSS 选择器名称及其属性。

以上是 CSS-X-Fire 擅长的场景示例。由于它适用于源文件，并且了解语言结构，因此它还有助于查找 Firebug、跳转代码等不知道的重复项。

CSS-X-Fire 在 Apache 2 许可下是开源的。项目主页：[http ://code.google.com/p/css-x-fire/](http://code.google.com/p/css-x-fire/)

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2008-10-02T14:38:49.490

由于 Firebug 不在您的服务器上运行，而是从站点获取 CSS 并将其存储在本地，并向您显示具有这些本地更改的站点。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2008-10-07T13:18:24.923

使用 Firefox Web Developer 工具栏中的 CSS 编辑器：

[http://chrispederick.com/work/web-developer/](http://chrispederick.com/work/web-developer/)

它有足够的好东西可以与 Firebug 结合使用，它可以让你将 CSS 保存到文本文件中。

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2010-09-03T08:50:37.080

使用逆火。

[http://blog.quplo.com/2010/08/backfire-save-css-changes-made-in-firebug/](http://blog.quplo.com/2010/08/backfire-save-css-changes-made-in-firebug/)

这是一个开源解决方案，可以将 CSS 更改发送回服务器并保存它们。

Backfire 使用单个 javascript 文件，源代码包有一个工作的 .NET 服务器实现示例，可以轻松移植到其他平台。

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2011-11-17T22:47:33.730

我也一直有这个问题，最后决定我们不应该在网络检查器中编辑东西并为它构建一些东西（[https://github.com/viatropos/design.io](https://github.com/viatropos/design.io)）。

更好的解决方案：

> **当您在文本编辑器中**按下保存时，浏览器会自动反映 CSS 更改**而无需重新加载**。

 **我们在 web 检查器中编辑 css 的主要原因（我使用 webkit，但 FireBug 也是如此）是因为我们需要进行一些小的调整，并且重新加载页面需要很长时间。

这种方法有两个主要问题。首先，您可以编辑可能没有`id`选择器的单个元素。因此，即使您能够从 Web 检查器复制/粘贴生成的 CSS，它也必须生成一个`id`以限定 css 的范围。就像是：

```
#element-127 {
  background: red;
} 
```

那会让你的CSS变得一团糟。

您可以通过仅更改现有选择器的样式（`.space`下面的 webkit 检查器图像中的类选择器）来解决这个问题。

![Webkit 检查器](https://i.imgur.com/sTka3.png)

不过，第二个问题。那个东西的界面很粗糙，很难做出大的改变——比如如果你想尝试真正快速地将这个css块复制到这个地方，或者其他什么。

我宁愿坚持使用TextMate。

理想的做法是在您的文本编辑器中编写 CSS*并让浏览器反映更改而无需重新加载页面*。这样，您将在进行微小更改时编写最终的 CSS。

下一个级别是用动态 CSS 语言编写，如 Stylus、Less、SCSS 等，并使用生成的 CSS 更新浏览器。通过这种方式，您可以开始创建像 一样的 mixin `box-shadow()`，从而抽象出 Web 检查器绝对无法做到的复杂性。

有一些东西可以做到这一点，但在我看来，没有什么能真正简化它。

*   [LiveReload](http://livereload.com/)：按下保存时将 css 推送到浏览器而不刷新，但[它是一个 mac 应用程序](https://github.com/mockko/livereload)，因此很难自定义。
*   [CodeKit](http://incident57.com/codekit/)：也是一个 mac 应用程序，但每次保存时都会刷新浏览器。

无法轻松自定义这些工作方式是我没有使用它们的主要原因。

我专门整理了[https://github.com/viatropos/design.io](https://github.com/viatropos/design.io)来解决这个问题，并做到了：

1.  浏览器会在您保存时随时反映 css/js/html/etc，而无需重新加载页面
2.  它可以处理任何模板/语言/框架（Stylus、Less、CoffeeScript、Jade、Haml 等）
3.  它是用 JavaScript 编写的，您可以在 JavaScript 中快速组合扩展。

这样，当你需要对 CSS 进行一些小改动时，你可以说，设置背景颜色，按保存，看不，不完全，将色调调整 10，保存，不，调整 5，保存，看起来不错。

它的工作方式是在您保存文件时（在操作系统级别）观察，处理文件（这是扩展工作的地方），然后通过 websocket 将数据推送到浏览器，然后处理（客户端扩展名）。

不要插入或任何东西，但我在这个问题上挣扎了很长时间。

希望有帮助。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2008-10-02T14:58:33.810

Firebug 在*计算*的CSS 上工作（通过在文件中获取 CSS 并应用继承等获得的 CSS，加上使用 JavaScript 所做的更改）。这意味着您可能无法直接使用它来包含在特定于浏览器/版本的 HTML 文件中（除非您只关心 Firefox）。另一方面，它跟踪什么是原始的，什么是计算出来的……我认为向 Firebug 添加一些 JS 以便能够将该 CSS 导出到文本文件应该不是很困难。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2009-03-19T02:17:31.583

您可以编写自己的服务器脚本文件，该文件采用文件名参数和内容参数。

服务器脚本将找到所请求的文件并将其内容替换为新文件。

编写利用 firebug 信息并检索有用数据的 Javascript 将是棘手的部分。

我个人宁愿让 firebug 的开发团队提供一个功能，这对他们来说应该不会太难。

最后，Ajax 将文件名/内容对发送到您创建的 php 文件。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2009-11-10T18:29:12.177

我想知道为什么我不能很好地选择并复制我眼前的文字。尤其是当其他人说您可以“选择并复制”时。事实证明你*可以*，你只需要在任何文本**之外**（即在文本上方或左侧的排水沟中）开始拖动，因为任何鼠标按下 - 无论是单击还是拖动 - 任何文本都会立即调用该属性编辑。您还可以单击外部文本以获取光标（即使它并不总是可见），然后您可以使用箭头键四处移动并以这种方式选择文本。
不幸的是，复制到剪贴板的文本没有任何缩进，但至少它使您免于手动转录 CSS 文件的全部内容。只需让您的差异程序在与原始程序进行比较时忽略空格的变化。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2010-11-03T07:23:07.507

引自[Firebug 常见问题解答](http://getfirebug.com/wiki/index.php/FAQ#Editing_Pages)：

> ### 编辑页面
> 
> *   **我可以将我对所看到的网页所做的更改保存到源吗？**
>     
>     
>     
>     现在你不能。正如 John J. Barton 在新闻组中所写：
>     
>     
>     
>     *在 Firebug 中编辑有点像从餐厅三明治中取出泡菜并添加芥末：您可以享受结果，但餐厅的下一位顾客仍然会得到泡菜而没有芥末。*
>     
>     
>     
>     这是一个长期需要的功能，所以有一天它会直接从 Firebug 中获得。同时，您可以尝试[Firediff](http://www.incaseofstairs.com/firediff/)，这是 Kevin Decker 的 firebug 扩展。
>     
>     
> *   **如何在 firebug 中输出对站点 CSS 所做的所有更改？**
>     
>     
>     
>     这是 Kevin Decker 的[Firediff](http://www.incaseofstairs.com/firediff/)中实现的一个功能。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2008-10-02T14:54:39.983

这是部分解决方案。进行更改后，单击指向相关文件的链接之一。这是原始文件，因此您必须刷新文件，该文件位于 firebug 窗格右上角的选项菜单按钮下。现在您有了修改后的 css 页面，您可以复制和粘贴该页面。显然，您必须为每个 css 文件执行此操作。

编辑：看起来[Mark Biek](https://stackoverflow.com/questions/162644/why-cant-i-save-css-changes-in-firebug#162720)有一个更快的版本

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2010-10-23T14:39:10.763

“编辑”页面的一种非常简单的方法是通过 Internet 浏览器访问该站点。仅将页面保存为 html 到您的桌面上。转到您的桌面并右键单击新网页文件并选择打开方式，选择记事本并从那里编辑页面，如果您知道 html 这将很容易。完成所有编辑后，保存文件并重新打开网页，如果操作正确，更改应该在那里。然后，您可以使用新编辑的页面并将其导出或复制到您的远程位置

* * *

## 回答 #23

> 赞同：-4
> 
> 时间：2008-10-02T14:41:27.503

实际上 Firebug 是一个调试和分析工具：不是一个编辑器，显然不被认为是一个。另一个原因已经提到过：在调试网页时，您要如何更改存储在服务器上的 CSS？

# c - 如何在我的 Palm OS 应用程序中检测“复活节彩蛋”模式？

> ID：162650
> 
> 赞同：4
> 
> 时间：2008-10-02T14:38:16.497
> 
> 标签：c, palm-os, garnet-os

从早期开始，Palm OS 就有一种特殊的“复活节彩蛋”模式，可以通过在其中一个 Preference 面板中做出正确的手势来启用该模式。在当前的 Palm Treo 和 Centro 设备上，这是通过在电源面板中的“提示”按钮上方顺时针旋转来打开的。

某些应用程序（例如 Blazer 网络浏览器）会在复活节彩蛋活动时启用特殊功能。如何在我自己的程序中检测到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-10-02T14:38:45.450

对此的标准系统首选项是 prefAllowEasterEggs（参见 Preference.h）。可以使用 PrefGetPreference API 访问此设置：

```
UInt32 enableEasterEggs = PrefGetPreference(prefAllowEasterEggs); 
```

当用户请求复活节彩蛋可用时，该值将非零。

# delphi - 这两组代码有什么区别

> ID：162651
> 
> 赞同：4
> 
> 时间：2008-10-02T14:38:17.917
> 
> 标签：delphi, oop, interface

这两段代码有什么区别

```
type
  IInterface1 = interface
    procedure Proc1;
  end;

  IInterface2 = interface
    procedure Proc2;
  end;

  TMyClass = class(TInterfacedObject, IInterface1, IInterface2)
  protected
    procedure Proc1;
    procedure Proc2;
  end; 
```

以及以下内容：

```
type
  IInterface1 = interface
    procedure Proc1;
  end;

  IInterface2 = interface(Interface1)
    procedure Proc2;
  end;

  TMyClass = class(TInterfacedObject,  IInterface2)
  protected
    procedure Proc1;
    procedure Proc2;
  end; 
```

如果它们是相同的，是否有任何优势或可读性问题。

我猜第二个意味着你不能编写一个实现 IInterface2 的类而不实现 IInterface1，而第一个你可以。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-10-02T19:32:25.727

如果我们谈论的是用于 Win32 的 Delphi（用于 .NET 的 Delphi 有不同的规则），那么这两个代码片段具有非常不同的效果，并且几乎不等同。

1.  实现其接口的类必须实现该接口祖先的所有成员，但它不会**隐**式实现祖先。因此，尝试将 TMyClass 类型的实例分配给 IInterface1 类型的位置对于第二种情况将失败。
2.  与前一点相关，如果 IInterface1 和 IInterface2 都具有 GUID，则在第二种情况下，目标类型为 IInterface1 的接口引用的动态转换（使用`Supports`或' '）将在 TMyClass 实例上失败。`as`
3.  接口 IInterface2 在第二种情况下有一个额外的方法，而在第一种情况下没有。
4.  第二种情况下 IInterface2 类型的值可分配给 IInterface1 类型的位置；对于第一种情况，情况并非如此。

在此示例中自己查看：

```
 type
      A_I1 = interface
      end;

      A_I2 = interface(A_I1)
      end;

      A_Class = class(TInterfacedObject, A_I2)
      end;

    procedure TestA;
    var
      a: A_Class;
      x: A_I1;
    begin
      a := A_Class.Create;
      x := a; // fails!
    end;

    type
      B_I1 = interface
      end;

      B_I2 = interface
      end;

      B_Class = class(TInterfacedObject, B_I1, B_I2)
      end;

    procedure TestB;
    var
      a: B_Class;
      x: B_I1;
    begin
      a := B_Class.Create;
      x := a; // succeeds!
    end;

    begin
      TestA;
      TestB;
    end. 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-10-02T14:46:18.350

首先，我假设第二个示例的 IInterface2 声明是一个错字，应该是

```
IInterface2 = interface(Interface1) 
```

因为从自身继承是荒谬的（即使编译器接受了它）。

而“继承”是回答你问题的关键词。在示例 1 中，这两个接口是完全独立的，您可以毫无问题地实现一个、另一个或两者。在示例 2 中，您是正确的，如果不实现 interface1 就无法实现 interface2，但之所以如此，是因为它使 interface1 成为 interface2*的一部分*。

那么，区别主要在于结构和组织，而不仅仅是可读性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-02T14:42:36.517

假设你的意思

```
...
IInterface2 = interface(Interface1)
... 
```

我和你的解释一样，**第二种形式需要一个实现 Interface2 的类来实现 Interface1**，而第一种形式不需要。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-02T14:46:04.417

> 我猜第二个意味着你不能编写一个实现 IInterface2 的类而不实现 IInterface1，而第一个你可以。

那将是技术差异。

哪个更好在很大程度上取决于接口实际上是什么。如果 IInterface2 也不是 IInterface1 存在，它是否有意义？

如果 IInterface1 是“可显示的”而 IInterface2 是“可存储的”，那么第一个选项可能更有意义。如果 IInterface1 是“车辆”而 IInterface2 是“卡车”，那么第二个选项可能更有意义。

# python - 版本化字典的接口

> ID：162656
> 
> 赞同：2
> 
> 时间：2008-10-02T14:38:43.907
> 
> 标签：python

我有一个版本化的文档存储，我想通过类似 dict 的界面访问它。常见的用法是访问最新的修订版（get、set、del），但也应该能够访问特定的修订版（键始终是 str/unicode 或 int）。

```
from UserDict import DictMixin
class VDict(DictMixin):   
    def __getitem__(self, key):
        if isinstance(key, tuple):
            docid, rev = key
        else:
            docid = key
            rev = None  # set to tip rev

        print docid, rev
        # return ...

In [1]: d = VDict()

In [2]: d[2]
2 None

In [3]: d[2, 1]
2 1 
```

这个解决方案有点棘手，我不确定它是否是一个干净、易于理解的界面。我应该提供一个功能

```
def getrev(self, docid, rev):
   ... 
```

反而？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-10-02T14:46:31.140

是的，提供不同的 API 来获取不同的版本。用于检索特定修订的特定项目的单个方法调用，或用于获取特定修订的“视图”的方法调用，然后您可以像普通字典一样访问它，具体取决于这样的“视图”是否会看到很多用处。或者两者兼而有之，考虑到 dict-view 解决方案无论如何都需要某种方法来获取特定修订的项目：

```
class RevisionView(object):
    def __init__(self, db, revid):
        self.db = db
        self.revid = revid
    def __getitem__(self, item):
        self.db.getrev(item, self.revid) 
```

# web-services - XML-RPC 的非交互式身份验证/授权？

> ID：162663
> 
> 赞同：0
> 
> 时间：2008-10-02T14:39:13.263
> 
> 标签：web-services, authentication, authorization, xml-rpc

我们并不完全符合 XML-RPC 规范，但概念几乎相同。客户端通过带有 XML 有效负载的 HTTP/HTTPS 进入。我们以响应请求的 XML 有效负载进行响应。这主要是机器对机器，所以没有人输入用户名/密码。我们的构造在 apache tomcat 中运行。我们想对请求进行身份验证，由于并非每个客户端都可以使用每个服务，因此我们还需要对请求进行授权。我们有订阅和按使用收费模式，因此有必要记录所有内容。

你会为服务器和客户端推荐什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-02T14:46:16.943

HTTP BASIC/DIGEST 适用于大多数机器对机器的任务，它由服务器处理，因此您的 API 不受影响。

它不适用于交互式使用，因为在不关闭浏览器的情况下很难“注销”用户。

否则，您很可能需要更改您的 API 以包含身份验证信息，并让您的方法在您的代码中对其进行身份验证。

或者您可以使用经典的“登录”，设置 cookie，保持会话技术。

但是，坦率地说，对于机器对机器的工作，HTTP BASIC 是最简单的。

编辑，关于评论。

HTTP BASIC 只是一种协议，用于呈现身份验证所需的工件，它适用于机器对机器的 Web 服务。

如何实施取决于您和您的应用程序。使用 Java，您可以使用容器身份验证，这将提供身份验证以及角色映射。用户 -> 角色映射在数据文件或数据库中处理。受保护的 URL 以及对每个 URL 有效的角色由 web.xml 管理。

如果您继续向不同的 URL 添加不同的角色，那么，是的，您需要重新部署该应用程序。

但是，如果您只是添加新用户，那么您只需更新文件或数据库。如果您要添加新逻辑和新 URL，那么无论如何您都必须重新部署。如果你有一个粒度足够细的 ROLE 结构，那么在你真正添加新方法之前，你就不必弄乱 web.xml。例如，您可以在极端情况下为每个方法创建一个角色，并将它们单独分配给用户。大多数人不需要走那么远。

如果您不想使用容器身份验证，那么编写一个 Servlet 过滤器来实现您将用户和角色映射到 URL 的愿景。即使您实现了自己的设施，您仍然可以为您的客户端使用 HTTP BASIC 协议。

如果您正在寻找一个整体通用的 Java 安全框架，我会参考 google —— 有几个，我没有使用过它们中的任何一个。我在容器认证和编写我们自己的认证方面很幸运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-02T17:04:17.050

@将要

我支持 HTTP Basic 建议，并且可以证明它与[Spring Security](http://static.springframework.org/spring-security/site/index.html)集成得相当好，我在一个遗留应用程序之上实现了它，该应用程序滚动了它自己的基于 DB 的身份验证/授权逻辑。

# c# - 如何更改工具提示在 TreeView 上的位置？

> ID：162674
> 
> 赞同：3
> 
> 时间：2008-10-02T14:41:09.593
> 
> 标签：c#, .net, winforms, treeview, tooltip

当使用工具提示来显示 TreeNode 的详细描述时，工具提示会绘制在节点的顶部，就好像它正在完成节点的文本一样。此外，如果文本很长，则工具提示的位置会**超出文本**范围。

但我需要的是显示在鼠标指针正下方而不是 TreeNode 顶部的工具提示。

知道怎么做吗？

* * *

显示，不要告诉：

它是怎样的：

[![怎么样](https://i.stack.imgur.com/aqDww.png)](https://i.stack.imgur.com/aqDww.png)

我想要的：

[![我多么想要](https://i.stack.imgur.com/buIrV.png)](https://i.stack.imgur.com/buIrV.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-11-21T16:57:34.370

我没有找到我正在寻找的答案，但我以某种方式让它按我想要的方式工作。

之前，我试图按如下方式设置工具提示：

```
 private void treeView1_MouseMove(object sender, System.Windows.Forms.MouseEventArgs e)
    {
        TreeNode node = treeView1.GetNodeAt(e.X, e.Y);
        if (node != null)
        {
                string text = GetNodeTooltip(node);
                string currentText = toolTip1.GetToolTip(treeView1);

                if (text.Equals(currentText) == false)
                {
                    toolTip1.SetToolTip(treeView1, text);
                }
            }
            else
            {
                toolTip1.SetToolTip(tree, string.Empty);
            }
        }
        else
        {
            toolTip1.SetToolTip(tree, string.Empty);
        }
    } 
```

现在，我只是制作`treeView1.ShowNodeToolTips=true`，当我创建每个节点时，我只是`TreeNode.ToolTipText`用所需的文本设置它的值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2010-08-22T13:15:44.270

```
private ToolTip toolTipController = new ToolTip() { UseFading = false,UseAnimation = false};

protected override void OnMouseMove(MouseEventArgs e)
{
    var node = GetNodeAt(e.X, e.Y);
    if (node != null)
    {
        var text = node.Text;

        if (!text.Equals(toolTipController.GetToolTip(this)))
        {
            toolTipController.Show(text, this, e.Location, 2000);
        }
    }
    else
    {
        toolTipController.RemoveAll();
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-10-02T14:55:12.133

您需要为 TreeView 定义一个 ToolTip 并编写一个 MouseOverEventHandler。在 MouseOverEventHandler 中计算鼠标所在的节点，然后显示描述 ToolTip。还要确保您没有多次设置工具提示描述，否则行为非常难看。

更好的方法是在 StatusStrip 中显示描述 - 表单的左下角。

**更新：**

好的，因为你已经澄清了你的问题。您可以使用`ToolTip.Show`可以指定坐标的方法：

```
public void Show(
    string text,
    IWin32Window window,
    int x,
    int y,
    int duration
) 
```

显然，您必须为 x 和 y 添加偏移量。

# perl - 如何处理 HTTP 文件上传？

> ID：162677
> 
> 赞同：4
> 
> 时间：2008-10-02T14:41:38.673
> 
> 标签：perl, cgi, file-upload

我将如何编写一个通过 HTTP 发布接收文件并将其保存到文件系统的 Perl CGI 脚本？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-10-02T14:52:25.137

使用[CGI 模块](http://search.cpan.org/~lds/CGI.pm-3.42/CGI.pm#CREATING_A_FILE_UPLOAD_FIELD)。

```
my $fh = $query->upload('upload_field');
while(<$fh>) {
  print SAVE_FILE $_;
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-10-02T14:49:09.090

请注意：无论您将如何编写它，**都不**要将其保存在可从您的网络服务器访问的地方。

现在直截了当：下面是我使用了一段时间来上传照片的脚本。它可能需要一些调整，但应该向您展示方式。

由于图像未上传到网络可访问目录，因此我们有单独的过程对其进行检查、调整大小、放置水印并将其放置在可以访问的位置。

```
 #!/usr/bin/perl -wT

use strict;
use CGI;
use CGI::Carp qw ( fatalsToBrowser );
use File::Basename;

$CGI::POST_MAX = 1024 * 5000;
my $safe_filename_characters = "a-zA-Z0-9_.-";
my $upload_dir = "/home/www/upload";

my $query = new CGI;
my $filename = $query->param("photo");
my $email_address = $query->param("email_address");

if ( !$filename )
{
 print $query->header ( );
 print "There was a problem uploading your photo (try a smaller file).";
 exit;
}

my ( $name, $path, $extension ) = fileparse ( $filename, '\..*' );
$filename = $name . $extension;
$filename =~ tr/ /_/;
$filename =~ s/[^$safe_filename_characters]//g;

if ( $filename =~ /^([$safe_filename_characters]+)$/ )
{
 $filename = $1;
}
else
{
 die "Filename contains invalid characters";
}

my $upload_filehandle = $query->upload("photo");

open ( UPLOADFILE, ">$upload_dir/$filename" ) or die "$!";
binmode UPLOADFILE;

while ( <$upload_filehandle> )
{
 print UPLOADFILE;
}

close UPLOADFILE;

print $query->header ( );
print <<END_HTML;
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
 <head>
   <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
   <title>Thanks!</title>
 </head>
 <body>
   <p>Thanks for uploading your photo!</p>
 </body>
</html>
END_HTML 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-10-02T14:50:40.227

[有关文件上传，](http://search.cpan.org/~lds/CGI.pm/CGI.pm#CREATING_A_FILE_UPLOAD_FIELD)请参阅CGI.pm 文档。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-10-02T15:12:35.743

我将首先使用[CGI](http://search.cpan.org/dist/CGI)并阅读[CREATING A FILE UPLOAD FIELD](http://search.cpan.org/perldoc/CGI#CREATING_A_FILE_UPLOAD_FIELD)，然后使用[open](http://perldoc.perl.org/functions/open.html)创建文件并[打印](http://perldoc.perl.org/functions/print.html)以写入文件。（然后[关闭](http://perldoc.perl.org/functions/close.html)以关闭它）。

# language-agnostic - 爱好游戏开发的价值

> ID：162680
> 
> 赞同：14
> 
> 时间：2008-10-02T14:42:33.663
> 
> 标签：language-agnostic

尝试开发某种游戏，即使只是作为业余时间的爱好，是否会提供有用的（专业）经验，还是幼稚地浪费时间？

在我的编程生涯中，我断断续续地从事小型个人游戏项目。我发现（通常）严格的性能要求和不断升级的设计复杂性教会了我一些最有用的编程课程。

在这些仅举几例的项目中，我很快就遇到了：“对于小 N 来说，一切都很快”。我还发现了使用基本的面向对象设计原则来管理复杂性的艰难方法。

在许多技术和主题可能相当枯燥/乏味的领域中，我认为爱好游戏开发对于激励新的（而不是那么新的）开发人员在获得乐趣的同时复习基本技能非常重要。

[这个问题](https://stackoverflow.com/questions/157319/do-you-have-a-hobby-development-project)一般来说是关于爱好项目，但在这里我更感兴趣的是游戏项目，特别是它们对专业程序员的价值。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2008-10-02T14:50:27.137

您可以从游戏开发中学到很多东西。游戏开发需要在其他编程项目中找不到的学科。

以下是游戏开发教会我的一小部分内容：

*   速度优化
*   牺牲计算深度换取速度
*   在内存的小限制下开发
*   构建一个像操作系统一样工作但面向速度的系统。
*   在一棵树中保存成百上千个对象，每个对象都有自己独特的特征
*   游戏开发的某些领域具有很大的学术价值（如人工智能、程序算法等）
*   只要有游戏玩法，代码的破解程度无关紧要。将此转化为其他学科，编程的目标是让客户满意，无论您的代码多么聪明或丑陋。

因为游戏程序员被迫使用更少的资源，他们成为更好的程序员。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-10-02T14:47:12.107

我认为课外发展不管是不是游戏都是一件好事。首先，您可以尝试不同的技术和开发平台，这是让您的技能保持最新的好方法。我更喜欢数学算法而不是游戏，但这只是一种偏好，根本没有说明这样做的价值。

如果您将其中任何一项带回给您的雇主，那么他们将受益于您在自己的时间中获得的不断扩大的知识。这对他们也有好处。

我说代码让你心满意足！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-10-02T14:52:57.567

游戏有一些最复杂的处理，对于外行的业余程序员来说是“可以接受的”。高中时，我写的都是游戏。想探索物理？写一个游戏。3D图形？写一个游戏。高性能计算？写一个游戏。人工智能？经济学？军事战略？自然语言处理？定理证明？写一个游戏。

你不需要发布它，你不需要记录它，你甚至不需要玩它，你只需要摆弄它，你会在尝试的过程中学习任何你觉得有趣的算法应用它——在游戏中。

游戏之所以有趣，是因为它们可以覆盖广泛的领域。其他一切都只是数据处理，你可以在工作中做到这一点！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-10-02T14:54:17.270

游戏开发（或任何其他类型的个人编程）是一种很好的方式：

*   学习新语言
*   学习新概念（TDD、OO 等）
*   使用和评估不同的工具/技术（CI、自动化测试等）

这些类型的项目让您可以自由探索编程世界的不同方面，而这些方面您在工作中无法做到。如果您在工作中被困在业务线应用程序中，您可能不会处理物理引擎或空间渲染。但是您可以在游戏中探索这些主题。

如果/当你面试新职位时，这也将为你提供一个很好的代码组合。假设您编写的代码状态良好......

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-10-03T17:54:19.690

如果您正在寻找一份游戏开发工作，那么您绝对应该一边做一些业余爱好开发一边寻找。能够与简历一起发送或多或少完整的游戏使其在人群中脱颖而出。当我们列出游戏编程工作时，我们会收到大量简历，虽然我很高兴能聘请没有行业经验的人来填补这些职位，但在所有选项之间做出选择还是有点困难。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-10-02T14:50:36.123

坐下来用手头的工具解决问题（无论是什么问题，修复数据库，编程接口或用 ascii 下棋）都可以帮助您成为更好的程序员。

把手放下。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-10-02T14:53:01.017

**是的**

我使用 Psion Series 3 TopSpeed C SDK 自学了 C（和 Psion 专有的 OO 扩展），并编写了几个我在 GNU 许可下发布的游戏。（以前我在金融分析实习做信号处理时，在 Amiga 上的 Turbo Pascal 和 Pascal 和 Borland C++ 3.1 在 Window 3.1 上有相当多的经验，但是当我得到 Psion 时，我必须回到 C 并且我使用K＆R 为该代码奠定了良好的坚实基础。）

然后，我将我在 Psion 平台上学到的专业知识运用到了为期 3 年的工作中，使用他们的工业手持设备进行移动开发，在那里我也获得了数据库方面的经验。这对他们来说是一个巨大的转变，产品处于混乱状态，而我在平台上的经验比其他任何人都多——仅从那一年开始编写游戏。

我将其转化为 Windows 开发工作，最终成为 IT 总监，并在 SQL Server、Windows、ASP、数据中心、DR 等方面积累了丰富的经验。

然后我进入了数据仓库咨询公司。

我在很大程度上要归功于我踏入这扇门的第一脚，因为在 C 语言和特定的基于 C 的库系统方面的平台经验，我真正能够对第一家公司产生巨大的影响。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-10-02T14:53:05.057

我认为更重要的是，爱好游戏开发让你*快乐吗*？

游戏开发的许多领域绝对可以适用于更专业的水平，但如果这是您将开发游戏作为一种爱好的唯一原因，那么您可能需要重新评估情况并可能将您的精力投入到各种开源项目中可以自豪地显示在简历上（而不是爱好游戏开发不能）或在面试中讨论。

你的爱好应该是你喜欢做的事情，如果你喜欢游戏开发，那么绝对坚持下去，嘿，也许你会发现自己在专业地做这件事，这最终似乎是你场景的理想情况。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-10-02T14:53:36.553

我看不出任何能让你学习、练习和实验的东西怎么会被认为是“幼稚的”。

此外，如果您的目标是制作一款体面（甚至是“专业”）的游戏，几乎肯定需要学习和掌握可直接转移到可能“传统”角色的技能。优化、测试、跨平台工作、UI 设计和可用性……不胜枚举。

# c# - 如何将格式化的电子邮件地址解析为显示名称和电子邮件地址？

> ID：162681
> 
> 赞同：14
> 
> 时间：2008-10-02T14:42:35.940
> 
> 标签：c#, parsing, mailaddress

给定电子邮件地址：“Jim”<jim@example.com>

如果我尝试将其传递给 MailAddress，则会出现异常：

> 指定的字符串不是电子邮件地址所需的格式。

如何在 C# 中将此地址解析为显示名称 (Jim) 和电子邮件地址 (jim@example.com)？

编辑：我正在寻找 C# 代码来解析它。

EDIT2：我发现 MailAddress 引发了异常，因为我在电子邮件地址字符串的开头有一个空格。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2008-10-02T15:40:53.023

如果您希望手动解析电子邮件地址，则需要阅读 RFC2822 ( [https://www.rfc-editor.org/rfc/rfc822.html#section-3.4](https://www.rfc-editor.org/rfc/rfc822.html#section-3.4) )。3.4 节讨论地址格式。

但是正确解析电子邮件地址并不容易，`MailAddress`应该能够处理大多数情况。

根据 MSDN 文档`MailAddress`：

[http://msdn.microsoft.com/en-us/library/591bk9e8.aspx](http://msdn.microsoft.com/en-us/library/591bk9e8.aspx)

它应该能够解析带有显示名称的地址。他们举`"Tom Smith <tsmith@contoso.com>"`个例子。也许引号是问题？如果是这样，只需去掉引号并使用 MailAddress 解析其余部分。

```
string emailAddress = "\"Jim\" <jim@example.com>";

MailAddress address = new MailAddress(emailAddress.Replace("\"", "")); 
```

如果可以避免，手动解析 RFC2822 是不值得的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-10-02T17:16:12.187

为我工作：

```
string s = "\"Jim\" <jim@example.com>";
System.Net.Mail.MailAddress a = new System.Net.Mail.MailAddress(s);
Debug.WriteLine("DisplayName:  " +  a.DisplayName);
Debug.WriteLine("Address:  " + a.Address); 
```

MailAddress 类有一个解析电子邮件地址的私有方法。不知道它有多好，但我倾向于使用它而不是自己编写。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-10-02T14:46:01.250

尝试：

```
"Jimbo <jim@example.com>" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-02T14:46:02.390

```
new MailAddress("jim@example.com", "Jimbo"); 
```

解析出你给的字符串：

```
string input = "\"Jimbo\" jim@example.com";
string[] pieces = input.Split(' ');
MailAddress ma = new MailAddress(pieces[1].Replace("<", string.Empty).Replace(">",string.Empty), pieces[0].Replace("\"", string.Empty)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-02T14:46:04.713

try: "Jim" <jim@example.com> 不确定它是否会起作用，但这就是我通常在电子邮件客户端中看到它的方式。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-10-02T14:46:48.457

```
string inputEmailString = "\"Jimbo\" <jim@example.com>";
string[] strSet =  inputEmailString.Split('\"','<','>');   

MailAddress mAddress = new MailAddress(strSet[0], strSet[2]); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-10-02T14:49:05.223

如果您假设 2 之间总是有一个空格，您可以使用 String.Split(' ') 在空格上拆分它。这会给你一个拆分部分的数组。

所以可能是这样的：

```
string str = "\"Jimbo\" jim@example.com"
string[] parts = str.Trim().Replace("\"","").Split(' ') 
```

要检查的一个问题是，如果显示名称中有空格，它将在您的数组本身中拆分为 2 个或更多项目，但电子邮件始终是最后一个。

编辑 - 您可能还需要编辑括号，只需添加替换。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-10-02T14:49:54.970

我刚刚写了这个，它从字符串中获取第一个格式正确的电子邮件地址。这样您就不必假设电子邮件地址在字符串中的位置

有很大的改进空间，但我需要离开工作:)

```
class Program
{
    static void Main(string[] args)
    {
        string email = "\"Jimbo\" <jim@example.com>";
        Console.WriteLine(parseEmail(email));
    }

    private static string parseEmail(string inputString)
    {
        Regex r = 
            new Regex(@"^((?:(?:(?:[a-zA-Z0-9][\.\-\+_]?)*)[a-zA-Z0-9])+)\@((?:(?:(?:[a-zA-Z0-9][\.\-_]?){0,62})[a-zA-Z0-9])+)\.([a-zA-Z0-9]{2,6})$");

        string[] tokens = inputString.Split(' ');

        foreach (string s in tokens)
        {
            string temp = s;
            temp = temp.TrimStart('<'); temp = temp.TrimEnd('>');

            if (r.Match(temp).Success)
                return temp;
        }

        throw new ArgumentException("Not an e-mail address");
    }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-10-02T14:51:21.910

这有点“粗糙且准备就绪”，但适用于您给出的示例：

```
 string emailAddress, displayname;
        string unparsedText = "\"Jimbo\" <jim@example.com>";
        string[] emailParts = unparsedText.Split(new char[] { '<' });

        if (emailParts.Length == 2)
        {
            displayname = emailParts[0].Trim(new char[] { ' ', '\"' });
            emailAddress = emailParts[1].TrimEnd('>');
        } 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-10-02T16:08:27.793

要处理嵌入的空格，请在括号上拆分，如下所示：

```
string addrin = "\"Jim Smith\" <jim@example.com>";
char[] bracks = {'<','>'};
string[] pieces = addrin.Split(bracks);
pieces[0] = pieces[0]
  .Substring(0, pieces[0].Length - 1)
  .Replace("\"", string.Empty);
MailAddress ma = new MailAddress(pieces[1], pieces[0]); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-10-02T16:23:21.097

所以，这就是我所做的。它有点快速和肮脏，但似乎有效。

```
string emailTo = "\"Jim\" <jim@example.com>";
string emailRegex = @"(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|""(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*"")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])";
string emailAddress = Regex.Match(emailTo.ToLower(), emailRegex).Value;
string displayName = null;

try
{
    displayName = emailTo.Substring(0, emailTo.ToLower().IndexOf(emailAddress) - 1);
}
catch 
{
    // No display name 
}

MailAddress addr = new MailAddress(emailAddress, displayName); 
```

评论？

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-10-02T16:42:31.533

我没有用这种语言编写代码，但我看到了两个您可能想要检查的问题：

1-您不知道它被拒绝的确切原因。直接的可能性是它有一个 example.com 的黑名单。

2-您想要的真正解决方案可能是实施严格的验证器。Stack Overflow 可能是开发这个的好地方，因为有很多人有实践经验。

以下是您需要的几件事：

1.  修剪空白和明显的杂乱无章。
2.  解析成单独的部分（显示名称、地址左侧、地址右侧）。
3.  使用特定于数据结构的验证器验证其中的每一个。例如，右侧需要是有效的 FQDN（如果您在自由邮件系统上，则需要是不合格的主机名）。

这是解决这个问题的最佳长期方法。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-07-26T17:06:12.673

我可以建议我的基于正则表达式的解决方案来解码电子邮件地址字段值（“发件人”、“收件人”）和字段值“主题”

[https://www.codeproject.com/Tips/1198601/Parsing-and-Decoding-Values-of-Some-Email-Message](https://www.codeproject.com/Tips/1198601/Parsing-and-Decoding-Values-of-Some-Email-Message)

# c# - 进行自己的自定义 .NET 事件处理循环

> ID：162696
> 
> 赞同：0
> 
> 时间：2008-10-02T14:45:41.393
> 
> 标签：c#, .net, dispatchertimer

几年前，我读了一本书，描述了如何使用自己的处理器覆盖 .NET 中的默认事件“调度程序”实现。

```
 class foo {
       public event EventHandler myEvent;
       ...
    }

    ...
      myFoo.myEvent += myBar1.EventHandler;
      myFoo.myEvent += myBar2.EventHandler; 
```

每当事件触发时，都会调用 myBar1 和 myBar2 处理程序。

我记得，这个循环的默认实现使用一个链表并简单地遍历该列表并按顺序调用 EventHandler 委托。

我的问题有两个：

1.  有人知道我在读哪本书吗？
2.  为什么要覆盖默认实现（可能会在书中回答）？

编辑：我指的这本书确实是 Jeffrey Richter 通过 C# 编写的 CLR

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-10-02T14:52:18.957

它可能是许多书籍或网络文章之一。

您可能希望更改订阅/取消订阅事件的方式有多种原因：

*   如果您有很多事件，其中很多可能没有被订阅，您可能希望使用[EventHandlerList](http://msdn.microsoft.com/en-us/library/system.componentmodel.eventhandlerlist.aspx)来降低内存使用量
*   您可能希望记录订阅/取消订阅
*   您可能希望使用弱引用来避免订阅者的生命周期与您的生命周期相关联
*   您可能希望更改与订阅/取消订阅关联的锁定

我敢肯定还有更多 - 这些都在我的脑海中 :)

编辑：另请注意，具有处理订阅/取消订阅的自定义方式与具有引发事件的自定义方式之间存在差异（例如，它可能调用 GetInvocationList 并保证调用所有处理程序，而不考虑异常）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-02T14:51:36.557

我似乎记得 Jeffrey Richter 通过 C# 编写的 CLR 中的类似内容。 **编辑：**我确实记得他对此进行了详细介绍。

控制事件注册有几个不同的原因。其中之一是在您有大量事件时减少代码膨胀。我认为杰弗里在书中详细介绍了这一点......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-02T14:52:11.657

1.  不
2.  例如，您可能需要根据其中一个处理程序的结果来中断调用链。假设您的 CustomEventArgs 对象有一个属性“Blocked”，当设置为 true 时会抑制所有进一步的事件处理程序调用。

# c - 在 Palm OS 应用程序中使用系统的标准编辑菜单

> ID：162717
> 
> 赞同：0
> 
> 时间：2008-10-02T14:47:58.423
> 
> 标签：c, menu, palm-os, garnet-os

如何在我的 Palm OS 应用程序中使用标准的编辑菜单，而不必实现我自己的剪切/复制/粘贴/键盘处理程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-02T14:50:29.133

Palm OS 的系统表单代码在“编辑”菜单中具有用于命令 ID 的内置处理程序。如果您对这些菜单使用标准形式，则您的优势在于无需编写代码并与查找此特定菜单结构的系统扩展兼容。

如果您的表单有一个仅包含“编辑”菜单的菜单栏，您可以在创建表单时指定菜单 ID 10000。

如果您的表单有一个带有多个菜单的菜单栏，您应该像这样使用 PilRC 表示法指定您的编辑菜单：

```
PULLDOWN "Edit"
BEGIN
  MENUITEM "Undo" ID 10000 "U"
  MENUITEM "Cut" ID 10001 "X"
  MENUITEM "Copy" ID 10002 "C"
  MENUITEM "Paste" ID 10003 "P"
  MENUITEM "Select All" ID 10004 "S"
  MENUITEM "-" ID 10005
  MENUITEM "Keyboard" ID 10006 "K"
  MENUITEM "Grafitti Help" ID 10007 "G"
END 
```

如果您使用的是构造函数，您可以使用“创建编辑菜单”命令将此菜单添加到您的资源文件中。

# delphi - 如何嵌入浏览器对象，而不是 IE , 在 Delphi 应用程序中

> ID：162718
> 
> 赞同：36
> 
> 时间：2008-10-02T14:48:16.567
> 
> 标签：delphi, webkit, gecko, browser, embedded-control

使用默认的 TWebBrowser 可以轻松嵌入 Web 浏览器。不幸的是，默认情况下出现的是 IE<n>。

我想知道如何集成 Gecko 或 WebKit 之一。

1.  某处有 VCL 示例吗？
2.  如果没有，人们将如何去做呢？
3.  以可嵌入格式查找 Gecko 和/或 WebKit 核心的最佳位置在哪里？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2008-10-02T14:54:52.307

TWebBrowser**是**IE。它不是浏览器的可插入结构。您可以将其他浏览器集成到您的应用程序中。看

*   [http://www.adamlock.com/mozilla/](http://www.adamlock.com/mozilla/)
*   [http://delphi.mozdev.org/articles/taming_the_lizard_with_delphi.html](http://delphi.mozdev.org/articles/taming_the_lizard_with_delphi.html)
*   [http://ftp.newbielabs.com/Delphi%20Gecko%20SDK/](http://ftp.newbielabs.com/Delphi%20Gecko%20SDK/)

## 时间已经过去了

这个答案是从 08 年开始的，从那时起时间已经过去了。这些链接不再起作用，现在可能有更好的选择。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2010-03-16T17:26:26.073

一个可行的替代方案是[CEF - Chromium Embedded Framework](http://code.google.com/p/chromiumembedded/)，它封装了 Chromium 浏览器，而 Chromium 浏览器本身封装了 WebKit。该库作为带有导出 C API 的普通 DLL 提供。

在[code.google.com/p/delphichromiumembedded上有一个 delphi 接口](http://code.google.com/p/delphichromiumembedded)

我一直将它与我自己的接口实现一起使用，并且效果很好，虽然不像 THTML 或 IE 那样容易正确使用，但对于需要强大且可嵌入的浏览器的人来说非常有用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-10-02T14:58:54.293

**编辑：**不幸的是，拉斯打败了我

好吧，有一个基于 Gecko 引擎的 ActiveX 控件，它试图呈现 IWebBrowser API（TWebBrowser 使用的）的精确副本。

你可以在这里找到它：http: [//www.iol.ie/~locka/mozilla/control.htm](http://www.iol.ie/~locka/mozilla/control.htm) 不幸的是，它看起来好像有一段时间没有更新了。最后一个版本基于 Gecko 1.7.12，我相信 Gecko 目前最高到 1.9.x（用于 Firefox 3）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-10-02T15:01:08.750

另一种方法是 THTMLViewer 组件。我已经用了几年了。

现在可以免费使用。该网站在这里[http://pbear.com/htmlviewers.html](http://pbear.com/htmlviewers.html)。根据 songbeamer 网站 ( [http://www.songbeamer.com/delphi/](http://www.songbeamer.com/delphi/) )，有一个 Delphi 2009 版本可用。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-10-02T16:19:33.570

在过去的三年中，我很少遇到将 Gecko 嵌入到 Delphi 中的方式。一个在游戏中（对我来说）出现得相当晚的库是[SourceForge 上的 GeckoSDK 项目](http://d-gecko.svn.sourceforge.net/)。为了让嵌入式 Gecko 在 Delphi 中正常工作，我做了很多工作。我们第一次尝试基于 Gecko 渲染引擎的内部“浏览器”是使用 Delphi 和 Gecko 1.8 构建的。从那以后，我们继续前进，我们的浏览器现在是一个[XULRunne](http://developer.mozilla.org/en/XULRunner) r 应用程序。我的硬盘驱动器上还有一些我尚未删除的早期尝试的代码。

当 Mozilla 发布 Gecko 2.0 时，我认为它会更容易嵌入到 Delphi 中。Gecko 中的 XPCOM 对象系统很难嵌入，因为大多数东西都返回 NS_RESULT。尤其是弦乐很硬。

编辑：我刚刚浏览了我的旧书签（几乎所有书签都已失效）并搜索了基于 Gecko 的日语“百吉饼”浏览器的新网址，并在这里找到了它，

[http://github.com/plus7/bagel/tree/master/Legacy](http://github.com/plus7/bagel/tree/master/Legacy)。

这可能是您开始编写一些优秀代码的最佳选择。不幸的是，代码中的注释是日文的，作者从未回答过问题。

# c# - 从文本文件中读取固定宽度的记录

> ID：162727
> 
> 赞同：20
> 
> 时间：2008-10-02T14:49:29.357
> 
> 标签：c#, .net, parsing, fixed-width

我有一个充满记录的文本文件，其中每条记录中的每个字段都是固定宽度。我的第一种方法是简单地使用 string.Substring() 解析每条记录。有没有更好的办法？

例如，格式可以描述为：

```
<Field1(8)><Field2(16)><Field3(12)> 
```

一个包含两条记录的示例文件可能如下所示：

```
SomeData0000000000123456SomeMoreData
Data2   0000000000555555MoreData 
```

我只是想确保我没有忽略比 Substring() 更优雅的方式。

* * *

**更新：** 我最终使用了 Killersponge 建议的正则表达式：

```
private readonly Regex reLot = new Regex(REGEX_LOT, RegexOptions.Compiled);
const string REGEX_LOT = "^(?<Field1>.{6})" +
                        "(?<Field2>.{16})" +
                        "(?<Field3>.{12})"; 
```

然后我使用以下内容访问这些字段：

```
Match match = reLot.Match(record);
string field1 = match.Groups["Field1"].Value; 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2008-10-02T15:14:29.670

使用[FileHelpers](http://www.filehelpers.net/)。

例子：

```
[FixedLengthRecord()] 
public class MyData
{ 
  [FieldFixedLength(8)] 
  public string someData; 

  [FieldFixedLength(16)] 
  public int SomeNumber; 

  [FieldFixedLength(12)] 
  [FieldTrim(TrimMode.Right)]
  public string someMoreData;
} 
```

然后，就这么简单：

```
var engine = new FileHelperEngine<MyData>(); 

// To Read Use: 
var res = engine.ReadFile("FileIn.txt"); 

// To Write Use: 
engine.WriteFile("FileOut.txt", res); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-10-02T14:55:40.183

子字符串对我来说听起来不错。我能立即想到的唯一缺点是它意味着每次都复制数据，但在你证明这是一个瓶颈之前，我不会担心这一点。子字符串很简单:)

您*可以*使用正则表达式一次匹配整条记录并捕获字段，但我认为这太过分了。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-23T04:50:10.907

为什么要重新发明轮子？按照 Visual Basic 的此操作指南使用 .NET 的[TextFieldParser](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.fileio.textfieldparser.aspx)类：[*如何从固定宽度的文本文件中读取*](http://msdn.microsoft.com/en-us/library/zezabash.aspx)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-10-02T15:00:14.913

您可能需要注意，如果行尾没有用空格填充以填充该字段，那么您的子字符串将无法正常工作，而无需稍加摆弄即可计算出还有多少行要读取。这当然只适用于最后一个字段:)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-10-02T15:17:36.510

不幸的是，CLR 开箱即用只为此提供子字符串。

[CodeProject 的某个人使用属性来定义字段制作了一个自定义解析器](http://www.codeproject.com/KB/cs/FixedFlatFileHandling.aspx)，你可能想看看。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-10-02T14:55:27.377

不，子字符串很好。这就是它的用途。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-10-02T19:26:55.023

您可以为固定格式文件设置 ODBC 数据源，然后像访问任何其他数据库表一样访问它。这还有一个额外的好处，即在某人决定在中间添加一个额外字段的那一天，文件格式的特定知识不会编译到您的代码中。

# javascript - 浏览器字体中每个字符的渲染像素宽度数据

> ID：162730
> 
> 赞同：6
> 
> 时间：2008-10-02T14:49:46.907
> 
> 标签：javascript, jquery, html, css, font-size

我有一个表格列需要限制在一定的宽度 - 比如 100 像素。有时该列中的文本比这更宽并且不包含空格。例如：

```
a_really_long_string_of_text_like_this_with_no_line_breaks_makes_the_table_unhappy 
```

我想计算文本服务器端的宽度，并在正确的字符数后添加一个省略号。问题是我没有关于文本渲染大小的数据。

例如，假设浏览器是 Firefox 3，字体是 12px Arial。字母“a”的宽度、字母“b”的宽度等是多少？

你有数据显示每个字符的像素宽度吗？还是生成它的程序？

我认为一个聪明的一次性 javascript 脚本可以解决问题。但是，如果其他人已经这样做了，我不想花时间重新发明轮子。我肯定不是第一个遇到这个问题的人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-02T14:52:52.700

溢出如何：滚动？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-10-02T16:33:24.083

[Ext JS](http://extjs.com)有一个模块可以做到这一点

> [TextMetrics](http://extjs.com/deploy/dev/docs/?class=Ext.util.TextMetrics) 为文本块提供精确的像素测量值，以便您可以准确确定给定文本块的高度和宽度（以像素为单位）。

我确信还有其他可用的库也可以做到这一点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-10-02T14:55:24.583

这不仅不可能在服务器端进行，而且也没有任何意义。您不知道您的客户端将使用什么浏览器，并且您不知道客户端上的哪些字体设置将覆盖您分配给一段 HTML 的任何样式信息。您可能认为您在样式属性中使用了绝对定位像素，但客户端可能只是忽略这些或使用某些插件来缩放所有内容，因为客户端使用高 dpi 屏幕。

使用固定宽度通常是个坏主意。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-02T14:51:38.303

非常非常难做服务器端。您永远无法知道用户安装了哪些字体，影响文本显示的因素有很多。

试试这个：

```
table-layout: fixed; 
```

这将确保表格永远不会大于您指定的大小。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-10-02T20:46:23.817

这是我想出的客户端解决方案。它非常特定于我的应用程序，但我在这里分享它以防其他人遇到同样的问题。

它的工作速度比我预期的要快一些。并且它假定单元格的内容仅为文本 - 任何 HTML 格式都将在缩短过程中被删除。

它需要 jQuery。

```
function fixFatColumns() {
  $('table#MyTable td').each(function() {
    var defined_width = $(this).attr('width');
    if (defined_width) {
      var actual_width = $(this).width();
      var contents = $(this).html();
      if (contents.length) {
        var working_div = $('#ATempDiv');
        if (working_div.is('*')) {
          working_div.html(contents);
        } else {
          $('body').append('<div id="ATempDiv" style="position:absolute;top:-100px;left:-500px;font-size:13px;font-family:Arial">'+contents+'</div>');
          working_div = $('#ATempDiv');
        }

        if (working_div.width() > defined_width) {
          contents = working_div.text();
          working_div.text(contents);
          while (working_div.width() + 8 > defined_width) {
            // shorten the contents of the columns
            var working_text = working_div.text();
            if (working_text.length > 1) working_text = working_text.substr(0,working_text.length-1);
            working_div.text(working_text);
          }
          $(this).html(working_text+'...')
        }

        working_div.empty();
      }

    }
  });

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-10-02T14:57:46.590

这在服务器端基本上是不可能的。除了人们安装不同字体的问题外，您还有字距调整（字母“f”将根据旁边的内容占用不同的空间）和字体渲染选项（是否启用了 cleartype？“大字体“？）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-10-02T14:57:53.377

您可以将文本放入一个不可见的跨度并阅读跨度宽度，但基本上这看起来像是有人试图破坏您的网站，因此我建议禁止使用超过特定长度的单词的帖子，例如 30 个不带空格的字符（允许链接更长！-)

-- 但简单的方法是在表格单元格中放置一个块元素：

```
<td><div style="width:100px;overflow:hidden">a_really_long_string_of_text_like_this_with_no_line_breaks_makes_the_ta ... </div></td> 
```

这将有效地阻止桌子混乱！o]

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-10-02T14:59:34.823

您无法在服务器端进行任何计算来计算它。您所需要处理的只是浏览器标识字符串，它可能会或可能不会准确地告诉您用户的操作系统和浏览器。您还可以“询问”（通过字体标签或 CSS）要使用某种字体来显示文本，但不能保证用户安装了该字体。除此之外，用户可能在操作系统级别有不同的 DPI 设置，或者可以使用浏览器缩放功能使文本变大或变小，或者可以完全使用他们自己的样式表。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-01-16T20:24:36.440

如果您认为这不适用于 FireFox，为什么不直接使用 CSS？有表格布局的表格：固定，有问题的列有溢出：隐藏；文本溢出：省略号；空白：nowrap。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-01-16T20:30:23.777

```
http://www.css3.info/preview/text-overflow/ 
```

这是css3的一个新功能。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-01-16T20:32:57.097

一些用户有更大或更小的默认字体设置。您不能在服务器上执行此操作。您只能在浏览器呈现页面后对其进行测量。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-01-16T20:33:03.163

由于可以在浏览器端轻松更改字体大小，因此您的服务器端计算很容易失效。

一个快速的客户端修复方法是使用溢出属性设置单元格样式：

```
td
{
    overflow: scroll; /* or overflow: hidden;  etc. */
} 
```

一个更好的选择是截断你的字符串服务器端并提供一个简单的 javascript 工具提示，可以显示更长的版本。“展开”按钮也可能有助于在覆盖 div 中显示结果。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2010-10-26T21:40:58.277

你想要的是 <wbr> 标签。这是一个特殊的 HTML 标记，它告诉浏览器如果需要换行，可以在此处分词。我不会将其注入到文本中以进行持久存储，因为这样您就可以将数据与显示该数据的位置/方式相结合。然而，在以视图为中心的代码中注入标签服务器端是完全可以接受的（比如使用 JSP 标签或可能在控制器中）。我就是这样做的。只需使用一些正则表达式来查找比 X 个字符长的单词，并将每个 X 个字符的这个标签注入到这些单词中。

更新：我环顾四周，似乎所有浏览器都不支持 wbr。最值得注意的是，IE8。我自己还没有测试过。也许您可以使用溢出：隐藏作为备份或类似的东西。

# dojo - Dojo DnD 接受外部对象

> ID：162733
> 
> 赞同：1
> 
> 时间：2008-10-02T14:50:11.007
> 
> 标签：dojo, drag-and-drop

是否可以编写 Dojo DnD 目标以接受外部对象，例如来自文件资源管理器的文件或文件夹？例如，Windows 资源管理器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-02T16:53:23.160

我对此表示怀疑，因为它将是接收 DnD 事件的浏览器......
充其量你可以依靠插件或扩展来处理它，就像优秀的[DragDropUpload](http://www.teslacore.it/wiki/index.php?title=DragDropUpload "拖放上传")扩展在 Firefox 中用于文件上传字段一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-02T14:55:28.217

你在说什么样的文件浏览器？据我所知，即使对于表格行，您也很幸运能够使 dnd 正常工作，api 是@$$ 中的一个痛苦。

# java - C、C++、Java，下一步是什么，它会是什么样子？

> ID：162735
> 
> 赞同：3
> 
> 时间：2008-10-02T14:50:20.273
> 
> 标签：java, c++, c, language-design

您认为语言的下一次演变会是什么样子？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-10-02T14:55:57.483

您可能会假设 C 和 C++ 正在“逐步淘汰”，而 Java/.Net/Python/whatever 是“进步”或“下一站”。

它们都被大量使用（请参阅本网站上的标签数量 C 或 C++）。不同之处在于，两者都不再是编程世界的通用语言。过去，大多数应用程序都是资源非常有限的系统上的桌面或 DOS 应用程序，而且所有主要的桌面 API 都是用 C 或 C++ 编写的。所以每个人都学会了这些。

现在它更复杂了。语言正变得更加特定于应用程序。当性能很重要时使用 C/C++。当您的主要性能影响是数据库读取/写入时的脚本语言。Java 和 .Net 用于通用、非性能关键的桌面应用程序。

计算机或电气工程也是如此。在过去，这些是可用的最高抽象级别的巨大字段。现在我们有了各种更高层次的抽象。尽管如此，我们还是需要人们来做这种较低级别的工程。他们仍然有需求。以同样的方式，C 将继续在许多环境中使用，C++ 也是如此。例如，你会疯狂地认为你可以用 Java 编写设备驱动程序，如果你有选择和能力的话，你也会有点疯狂（但可能不那么疯狂）用 C 编写一个完整的 GUI 应用程序在 Java 或 .Net 中完成。

每个工具都有其用途。我希望 C、C++ 和 Java 能够发展并继续用于新旧开发。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-10-02T16:11:24.447

我不能代表 C++ 和 Java，但 C 绝对不会无处可去……

几乎无法想象编写任何类型的操作系统内核而不用 C 语言（好吧，如果你真的很固执，你可以完全使用汇编语言:-P）。

C 基本上是对汇编语言的精巧包装。它与标准的冯诺依曼 CPU 架构紧密耦合，以至于不需要标准库或运行时来实现其大部分功能：指针、字符串、堆栈上的自动变量、整数运算等。

出于同样的原因，C 非常适合绝对需要高性能的用户级应用程序，例如乘以巨大的矩阵或解析复杂的语言。用 C 编写解析器可能会很痛苦，但是手动内存管理的速度和效率优势是难以忽视的......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-10-02T18:32:55.777

我相信答案是双重的。

首先，客户端应用程序越来越多地实现为基于浏览器的应用程序。要使基于浏览器的应用程序具有与富桌面应用程序相当的外观和感觉，您需要 Javascript 之类的东西。如果您稍微关注一下新闻，您会看到为加速浏览器中的 javascript 实现所做的巨大努力，以及一个蓬勃发展的库生态系统，可帮助您在浏览器中使用 javascript 创建响应式、直观的 GUI。

所以，对于 GUI，我相信未来是 Javascript。

对于后端，服务器，我非常怀疑在不久的将来是否有脚本语言存在。服务器端软件往往存在多年，添加了功能，修复了错误等等。编写该语言的语言不需要写得那么快，而是易于阅读（维护）。

如果您在一两年后重新访问您的代码以修复该错误，那么脚本语言往往更难以理解。这有（在我看来）两个主要原因，短期内不会消失：

*   IDE 无法使用动态语言提供提示
*   根据定义，在您工作的上下文中，可用的上下文信息较少；在 Java 中，你知道你只能得到 X 类型。在脚本语言中，你应该检查所有引用代码，这在大型项目中并不容易

这些问题可以通过使用非常有经验的开发人员来缓解，但是如果将来唯一有用的开发人员是有经验的开发人员，我们就不需要雇用没有经验的开发人员，这会给未来带来麻烦。

由于这些原因，我相信下一代服务器端语言是静态类型的。从静态类型语言中，我认为 C# 和 Java 有最好的机会，因为有大量有用的库可用，而且这些语言的可读性很强。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-10-02T14:56:37.933

Alan Kay 曾经说过*“实际上我创造了‘面向对象’这个词，我可以告诉你我并没有想到 C++。”*

他正在努力改变编程的未来

*“真正的浪漫已经到来，但尚未到来。计算机革命尚未开始。不要被大量资金流入错误的事实标准所误导，这些标准对于不成熟的买家使用不完整的想法进行不良改编。”* [资源](http://www.squeak.org/About/)

好吧，我可以补充一下，Bjarne 曾经说过*“只有两种语言：人们抱怨的语言和没人使用的语言。”*

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-10-02T15:03:42.487

语言不断发展以填补其他语言未涵盖的利基问题。

语言获得立足点并建立自己的天气完全是另一个问题，与流行度有很大关系。

接下来是什么？
我看到需要填充的问题是多处理器（或多核）。目前，所有流行的语言利用额外内核的能力都非常有限。基本上所有当前流行的语言都为开发人员提供了非常基本的对象（线程/锁等）来使用内核，然后让开发人员尝试利用多核可用的并行性。

如果有一种语言可以抽象出内核（甚至线程）的概念，并且可以**自动**利用多核/多处理器架构中可用的固有并行性，那将是一件好事。不幸的是，所有这些语言（我所知道的）仍然是大学的研究项目，不太可能很快看到真正的采用。

您暗示有一个进展 C -> C++ -> Java。
这有点人为，每种语言都代表一种解决问题的方法，每种语言都有固有的问题域，可以有效地解决问题和其他问题域，该语言将是一个糟糕的选择。

亲自：

1.  我永远不会用 Java 编写设备驱动程序。
2.  我可能不会用 C 编写后端 web 模块（你可能可以但我不行）等。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-10-02T15:12:34.027

C＃ ？-- 哦，但那是 Java :) （抱歉，无法抗拒）

下一代语言已经出现，脚本语言。毫无疑问，微软正在开发 DLR（动态语言运行时）。我认为未来将是解释型（但 JITted）的动态语言，它几乎没有限制和很大的灵活性。

现在大多数语言的性能限制都不是那么重要，或者根本没有人会编写 Java 或 C# 应用程序，但考虑到 CPU 速度超快，RAM 很便宜，我们没有注意到这些更高的效率低下级设计（例如，如果你有一个 1mhz 的 cpu，你用 C 而不是 C# 编写代码。如果你有一个运行在 3Ghz 的 CPU，你可以随心所欲地编写它）

所以.. Ruby、Python、“Dynamic-C#”……这些都是未来。当 MS 发布 DLR 时，预计会有很多人对它感兴趣，预计很多公司会开始谈论程序员生产力是大多数应用程序开发中最重要的部分。

之后......可能是一个 GUI 驱动的系统，您可以在类似 UML 的系统中将块连接在一起，并向它们添加属性以生成生成的代码。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-01-14T10:11:24.093

编程的未来在哪里？远离我们所知道的语言。

现在是 2009 年，我们还在使用文本编辑器吗？通过我参与的项目，您可以通过设置属性来构建整个应用程序。在（主要是数学）表达式和字符串值之外，任何地方都没有一行文本。

一位开发人员抱怨“你不能打印代码”，我回答说，“公司会打印出它的整个会计结构吗？或者它会打印出它想要看到的方面，例如现金流量表和余额床单？” 只有当我们进入新的抽象机制时，我们才能真正向前迈进。

编程的未来还有待观察，但我认为正在发生的一些令人兴奋的发展最终将使我们摆脱我们长期使用的 C/C++/Java 束缚。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-10-02T16:44:03.790

As other have mentioned, languages tend to adapt around new technologies and trends. So in order to answer that question, you first have to look at the overall future of computers and see what languages are most suitable for these purposes.

For example, to use your language progression as an example, in the beginning (:-)) there was a need for a language that would make maximum use of the limited resources available, C fit the bill in that regard. As time went on, and the spectrum of software applications incresed there was a greater demand for OO based languages in order to facilitate software reuse, easier design etc. and C++ / Java became popular.

Currently, there is an increased drift in the industry towards server side components that do all the work with thin client UIs (i.e. browsers). So languages that cater for this demand are becomming more popular (Ruby, ASP/Java EE languages).

New languages will become popular when the technology that they are closest to become popular. Personally (and this is guesswork), I think there is huge scope for a language that truly takes advantage of multi-core systems. This will mean having multi-threading built from the very start and will probably require a change in approach and thinking (like going from procedural to OO).

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-10-03T04:23:49.833

现在已经有几年的历史了，但是 Tim Sweeney 的[下一个主流编程语言：游戏开发者的观点](http://www.scribd.com/doc/5687/The-Next-Mainstream-Programming-Language-A-Game-Developers-Perspective-by-Tim-Sweeney)是对这个主题的有趣思考。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-10-02T18:39:35.590

在我看来，像 C++ 这样具有更紧凑的定义、更好的标准库、本机垃圾收集和本机同步结构的语言会很棒。它应该可供相关新手使用，但仍为专家在需要时以有效的低级方式编程提供便利。我相信 D 符合这些标准中的大部分，但在我看来，它不太可能占据上风。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-10-02T15:19:29.767

在某些时候，程序将开始编写自己的程序，就编程而言，人类变得多余。主要分歧在于何时会发生这种情况。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-10-02T16:50:24.713

如果您只关注编程语言历史的这一分支，我认为您可以同时编写 JavaScript 和 C#，因为它们是在您提到的三个之后出现的，具有相似的语法，并且借鉴了前辈。

其他人可能会提到 D 或 Objective-C（当然，他们已经在这里了）。

下一个语言，我想你的意思是“下一个成功”，因为每个月几乎都有一种新的语言......
我认为这将是一种具有垃圾收集的语言，使用 Jit 在字节码上运行，高度可移植。
我不知道它是面向对象的还是函数式的，具有静态类型还是动态类型，但我敢打赌，就像有趣的[Fan Programming Language](http://www.fandev.org/ "粉丝编程语言")一样。

或者我们都错了，它可能只是一种自然语言，带有语音或图形界面：“获取此页面的天气框，将其颜色和此徽标更改为那个，并集成到我的页面中”。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-10-02T15:06:57.317

在短期内，我预计高级语言会变得更强大和更常用。Perl 6 和 Javascript 2.0 是等待我们的好例子。

从长远来看，函数式语言可能会成为主流，但我预计这不会很快发生。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2009-06-04T18:06:40.937

D 语言，尤其是 2.0 版本从 Ruby、Python 和许多现代语言中学习，但没有保持与 C 的源代码兼容性，仍然允许对金属进行原始访问。这种语言的设计决策是下一代系统和通用编程语言的完美解决方案，甚至内置了函数式编程和元编程。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2011-03-24T06:49:53.520

语言问题在我看来是不是。这总是取决于您的应用程序。而且由于语言大多有一套标准的库，非常适合这个或那个应用程序。语言在某种程度上与特定的应用领域相关。

例如：

```
 C                       -> Device drivers
  C++                     -> Highperformance Computing
  Java                    -> Server side programs (J2EE)
  C#                      -> Server, Client(Silverlight, WinForm, WPF)
  Ruby, Python, ...       -> WebScripting (Serverside) and helper scripts
  ECMAScript (Javascript) -> WebScripting (Clientside) 
```

我认为这些语言中的任何一种都能够解决任何计算程序（也有性能方面的问题，因为我们有 Jits），但它们没有用于任何领域，因为为每种语言重新创建每个库是不可行的。

使 C 和 C++ 与众不同的是，有一个标准库，但与其他标准库相比，它是一个相当简约的标准库。为了有效地使用这些语言，需要第三方（非标准）库。

因此，在为项目选择语言时，您会寻找以下内容：

*   是否有可以在项目中使用的正确库
*   你懂语言吗
*   用这种语言编程是否有效（看看brainfuck）
*   您的团队了解并掌握该语言吗？

最后一件事是你也喜欢这种语言吗？最后，这是使用这种或那种语言的最大动力。

因此，语言进化的下一步将是更高级别的库和概念，以更快、更具表现力。例子是

*   Lambda 表达式
*   Linq（在语言中执行某种 sql 的 C# 功能）
*   函数式编程
*   变量类型
*   动态类型
*   不是特定的语言：帮助程序员的更好的 IDE
*   重要提示：支持easy！并行性（Axum、Nesl、orca、Chapel、...）[这里列出](http://www.nas.nasa.gov/News/Techreports/1993/PDF/rnd-93-005.pdf)

# windows - 在颠覆目录中，您最喜欢将修改从分支移植到主干的工具是什么？

> ID：162748
> 
> 赞同：0
> 
> 时间：2008-10-02T14:52:03.357
> 
> 标签：windows, svn, tortoisesvn, backport

在我正在处理的一个项目中，我们在 windows XP 下使用 subversion，以 tortoiseSVN 作为客户端。

当我们进入生产并继续并行开发时，会创建许多分支。

通常，我们必须将在分支上所做的修改反向移植到主干或旧分支。向后移植是一项非常微妙的任务，因为许多错误可能会被引入代码中。

您最喜欢哪些工具可以使反向移植更轻松、更安全？如果可能，每个答案只添加一个工具，并为您最喜欢的工具投票。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-02T14:55:09.357

我正在使用[BeyondCompare](http://www.scootersoftware.com/)。我相信它是开发人员最重要的工具之一，与 TortoiseSVN 一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-03T09:55:56.263

无论您使用什么 diff-merge-tool，请确保您阅读了 Subversion 手册中的“分支和合并”一章。从 1.5 版开始，Subversion 支持合并跟踪，因此请阅读适合您版本的文档：

*   [1.5版](http://svnbook.red-bean.com/en/1.5/svn.branchmerge.html)
*   [1.4版](http://svnbook.red-bean.com/en/1.4/svn.branchmerge.html)

# algorithm - 按顺序计算下一组的算法

> ID：162752
> 
> 赞同：4
> 
> 时间：2008-10-02T14:52:33.060
> 
> 标签：algorithm

我正在寻找一种算法来计算序列中的下一组操作。这是序列的简单定义。

1.  任务 1A 将每 500 小时完成一次
2.  任务 2A 将每 1000 小时完成一次
3.  任务 3A 将每 1500 小时完成一次

所以在 t=500 时，做 1A。在 t=1000 时，同时做 1A 和 2A，在 t=1500 时做 1A 和 3A，但不是 2A，因为 1500 不是 1000 的倍数。你明白了。

如果我有实际的时间，那会很容易，但我没有。我所拥有的是任务的历史（例如，上次完成 [1A+2A]）。

知道最后一次（例如 [1A+2A]）不足以决定：

*   [1A+2A] 可能在 t=1000：接下来是 [1A+3A] 在 t=1500
*   [1A+2A] 可能在 t=5000：接下来是 [1A] 在 t=5500

有这个算法吗？它看起来像一个熟悉的问题（某种筛子？），但我似乎找不到解决方案。

它还必须“扩展”，因为我实际上有超过 3 个任务。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-02T14:59:49.987

如果您有足够的历史记录来获得每个任务完成的最后两次，您可以重建原始任务序列定义。当它们重合时是偶然的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-02T15:01:54.397

该序列必须重复。对于给出的示例，序列将是 1A、1A+2A、1A+3A、1A+2A、1A、1A+2A+3A。在这种情况下，您可以看到最后一个 1A+2A+3A 有多远，并将该距离用作数组的索引。在一般情况下，对于长度为 N 的循环，您始终可以通过针对循环的所有旋转测试最后 N 个事件来做到这一点，但我怀疑通常会有某种捷径可用，例如返回多少个事件上一次“做所有事情”事件发生，或上一次“做所有事情”事件发生多长时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-02T15:02:58.027

似乎是一个最大的公分母问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-02T15:16:36.840

**编辑：**

啊，你必须走另一条路。在这种情况下，正如有人提到的那样，您可以使用三者的最小公倍数来计算有效的 @TimeLastJob

> --注意：使用一些 SQL Server 2005 SQL 扩展，
> --但仍然可以作为算法的伪代码规范
> DECLARE @constEvaluationPeriodLength int
> DECLARE @constCycleTimeJob1A int
> DECLARE @constCycleTimeJob2A int
> DECLARE @constCycleTimeJob3A int
> 
> SET @constEvaluationPeriodLength = 500
> SET @constCycleTimeJob1A = 500
> SET @constCycleTimeJob2A = 1000
> SET @constCycleTimeJob3A = 1500
> 
> DECLARE @Indicator1ARunAtLastCyclePoint int
> DECLARE @Indicator2ARunAtLastCyclePoint int
> DECLARE @Indicator3ARunAtLastCyclePoint int
> 
> SET @Indicator1ARunAtLastCyclePoint = 1
> SET @Indicator2ARunAtLastCyclePoint = 0
> SET @Indicator3ARunAtLastCyclePoint = 1
> 
> DECLARE @tblPrimeFactors TABLE(
>     TaskId int
>     CycleTimePrimeFactor int
> )
> 
> -- 捕获每个 TaskId 的素数
> IF (@Indicator1ARunAtLastCyclePoint = 1)
>   BEGIN
>   INSERT @tblPrimeFactors
>   SELECT
>       TaskId = 1
>      ,PrimeFactors
>   FROM dbo。 (@constCycleTimeJob1A) -- 表值函数留给读者
>   END
> IF (@Indicator2ARunAtLastCyclePoint = 1)
>   BEGIN
>   INSERT @tblPrimeFactors
>   SELECT
>       TaskId = 2
>      ,PrimeFactor
>   FROM dbo.tvfGetPrimeFactors(@constCycleTimeJob2A) --表值函数留给读者
>   END
> IF (@Indicator3ARunAtLastCyclePoint = 1)
>   BEGIN
>   INSERT @tblPrimeFactors
>   SELECT
>       TaskId = 3
>      ,PrimeFactor
>   FROM dbo.tvfGetPrimeFactors(@constCycleTimeJob3A) --表值函数留给读者
>   END
> 
> --计算 LCM，它可以作为有效时间 --
> 利用 SQL Server 动态表功能
> --（带括号的内部选择语句，并在下面给出别名 t0 和 t1）
> DECLARE @LCM int
> 
> SELECT
>     --Fun w/logs/powers to effect a product aggregate function
>     @LCM = Power(sum(log10(power(PrimeFactor,Frequency))),10)
> FROM
>     (
>         SELECT
>             PrimeFactor
>            ,Frequency = max(Frequency)
>         FROM
>             (
>                 SELECT
>                     PrimeFactor
>                    ,Frequency = count(*)
>                 FROM @tblPrimeFactors
>                 GROUP BY
>                     TaskId
>                    ,PrimeFactor
>             ) t0
>     ) t1
> 
> DECLARE @TimeLastJob int
> DECLARE @TimeNextJob int
> SET @TimeLastJob = @LCM
> SET @TimeNextJob = @TimeLastJob + @constEvaluationPeriodLength
> 
> SELECT
>     Indicator1A = 1 - SIGN(@TimeNextJob % @constCycleTimeJob1A)
>    ,Indicator2A = 1 - SIGN(@TimeNextJob % @constCycleTimeJob2A)
>    ,Indicator3A = 1 - SIGN(@TimeNextJob % @constCycleTimeJob3A)

* * *

**原来的：**

模数运算符 % 应该可以解决问题

如果我没看错，你确实有最后一个任务的时间

*   t=1000 或
*   t=5000

任务选择评估频率为每500小时一次。

尝试改变 @TimeLastJob 以查看下面的脚本是否为您提供所需的内容

> DECLARE @constEvaluationPeriodLength INT
> DECLARE @ constCycleTimeJob1A INT
> DECLARE @ constCycleTimeJob2A INT
> DECLARE @ constCycleTimeJob3A INT
> 
> SET @constEvaluationPeriodLength = 500
> SET @ constCycleTimeJob1A = 500
> SET @ constCycleTimeJob2A = 1000
> SET @ constCycleTimeJob3A = 1500
> 
> DECLARE @TimeLastJob INT
> DECLARE @TimeNextJob INT
> --set @TimeLastJob = 1000
> SET @TimeLastJob =5000
> SET @TimeNextJob = @TimeLastJob + @constEvaluationPeriodLength
> 
> SELECT
>     Indicator1A = 1 - SIGN(@TimeNextJob % @constCycleTimeJob1A)
>    ,Indicator2A = 1 - SIGN(@TimeNextJob % @constCycleTimeJob2A)
>    ,Indicator3A = 1 - SIGN(@TimeNextJob % @constCycleTimeJob3A)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-10-12T19:49:33.573

蜥蜴比尔是对的。以下是如何根据历史记录确定任务间隔（在 Python 中）：

```
history = [list of tuples like (timestamp, (A, B, ...)), ordered by timestamp]
lastTaskTime = {}
taskIntervals = {}

for timestamp, tasks in history:
    for task in tasks:
        if task not in lastTaskTime:
            lastTaskTime[task] = timestamp
        else:
            lastTimestamp = lastTaskTime[task]
            interval = abs(timestamp - lastTimestamp)
            if task not in taskIntervals or interval < taskIntervals[task]:
                taskIntervals[task] = interval  # Found a shorter interval

            # Always remember the last timestamp
            lastTaskTime[task] = timestamp

# taskIntervals contains the shortest time intervals of each tasks executed at least twice in the past
# lastTaskTime contains the last time each task was executed 
```

获取接下来要执行的任务集：

```
nextTime = None
nextTasks = []

for task in lastTaskTime:
    lastTime = lastTaskTime[task]
    interval = taskIntervals[task]

    if not nextTime or lastTime + interval < nextTime:
        nextTime = lastTime + interval
        nextTasks = [task]
    elif lastTime + interval == nextTime:
        nextTasks.append(task)

# nextTime contains the time when the next set of tasks will be executed
# nextTasks contains the set of tasks to be executed 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-10-12T18:20:02.630

先决条件：

1.  计算任务时间的LCM；这是一个完整周期的时期。
2.  计算整个周期的事件时间线。

随着每个任务/任务组的启动，在时间线中移动一个索引。

# delphi - 在 Delphi 中将 Length() 与多维动态数组一起使用

> ID：162753
> 
> 赞同：3
> 
> 时间：2008-10-02T14:52:52.640
> 
> 标签：delphi, arrays

我在delphi中使用了一个多维动态数组，并试图解决这个问题：

对于第一个索引和第二个索引，我有两个完全独立的值。

随着新值的出现，如果该新值超出任一界限，我想增加数组。

对于新值 x, y

我检查：

```
if Length(List) < (x + 1) then
   SetLength(List, x + 1);
if Length(List[0]) < (y + 1) then
   SetLength(List, Length(List), y + 1); 
```

这是执行此操作的正确方法还是有更好的方法来根据需要增长阵列？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-10-02T14:57:35.827

对我来说它看起来不错 - 如果你将最后一行更改为

```
SetLength(List, Length(List), y + 1); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-03T05:57:31.980

我想你忘了在第二个维度上使用第二个索引；

您的代码可能应该是这样的：

```
if Length(List) < (x + 1) then
   SetLength(List, x + 1);
if Length(List[x]) < (y + 1) then
   SetLength(List[x], y + 1); 
```

请注意在增加第二维时使用“x”作为第一维索引。

不过要注意一点：

您应该知道 Delphi 在动态数组上也使用引用计数（就像使用 AnsiString 一样）。正因为如此，像上面那样增长数组是可行的，但是任何其他对它的引用仍然会有它的*旧*副本！

解决这个问题的唯一方法是使用一个额外的间接级别来跟踪这些数组 - 即。：使用指向动态数组的指针（它本身也是一个指针，但没关系）。

另请注意，在动态数组的地址可能发生变化的任何情况下，都应更新这些“外部”指针中的任何一个，例如使用 SetLength() 增大/缩小它时。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-03T12:39:46.453

~~@PatrickvL：对不起，但这完全是错误的。您的代码甚至无法编译，因为它试图为一维元素 List[x] 设置二维。~~ *（PatrickvL 更新了他的代码，因此这部分答案不再有效。）*

以下代码演示了多维数组的大小调整。

程序测试维度；

```
{$APPTYPE CONSOLE}

uses
  SysUtils;

var
  List: array of array of integer;

begin
  //set both dimensions
  SetLength(List, 3, 2);
  Writeln('X = ', Length(List), ', Y = ', Length(List[0])); //X = 3, Y = 2
  //set main dimension to 4, keep subdimension untouched
  SetLength(List, 4);
  Writeln('X = ', Length(List), ', Y = ', Length(List[0])); //X = 4, Y = 2
  //set subdimension to 3, keep main dimenstion untouched
  SetLength(List, Length(List), 3);
  Writeln('X = ', Length(List), ', Y = ', Length(List[0])); //X = 4, Y = 3
  //all List[0]..List[3] have 3 elements
  Writeln(Length(List[0]), Length(List[1]), Length(List[2]), Length(List[3])); //3333
  //you can change subdimension for each List[] vector
  SetLength(List[0], 1);
  SetLength(List[3], 7);
  //List is now a ragged array
  Writeln(Length(List[0]), Length(List[1]), Length(List[2]), Length(List[3])); //1337
  //this does not even compile because it tries to set dimension that does not exist!
//  SetLength(List[0], Length(List[0]), 12);
  Readln;
end. 
```

Delphi 帮助也很好地解释了这一点（结构化类型，数组）。

> 多维动态数组 要声明多维动态数组，请使用 ... 构造的迭代数组。例如，
> 
> type TMessageGrid = 字符串数组数组；
> var 消息：TMessageGrid；
> 
> 声明一个二维字符串数组。要实例化此数组，请使用两个整数参数调用 SetLength。例如，如果 I 和 J 是整数值变量，
> 
> SetLength(Msgs,I,J);
> 
> 分配一个 I-by-J 数组，Msgs[0,0] 表示该数组的一个元素。
> 
> 您可以创建非矩形的多维动态数组。第一步是调用 SetLength，将数组的前 n 维参数传递给它。例如，
> 
> var Ints：整数数组的数组；
> 设置长度（整数，10）；
> 
> 为 Ints 分配 10 行但没有列。稍后，您可以一次分配一个列（给它们不同的长度）；例如
> 
> SetLength(Ints[2], 5);
> 
> 使 Ints 的第三列长为五个整数。此时（即使尚未分配其他列）您可以将值分配给第三列 - 例如 Ints[2,4] := 6。
> 
> 下面的示例使用动态数组（以及在 SysUtils 单元中声明的 IntToStr 函数）来创建字符串的三角矩阵。
> 
> var
> A : 字符串数组的数组；
> I, J：整数；
> 开始
> 设置长度（A，10）；
> 对于 I := Low(A) to High(A)
> 开始
> SetLength(A[I], I);
> 对于 J := Low(A[I]) 到 High(A[I]) 做
> A[I,J] := IntToStr(I) + ',' + IntToStr(J) + ' ';
> 结尾;
> 结尾;

# database - Ora 12154 错误

> ID：162762
> 
> 赞同：4
> 
> 时间：2008-10-02T14:53:38.737
> 
> 标签：database, oracle, ora-12541, ora-12154

我最近在我的一台开发服务器中部署了一个 Web 应用程序。我正在使用 oracle、asp.net 和 c#。当我在服务器中运行应用程序时，一切正常，但是当我尝试在服务器外部运行应用程序时（例如，使用我的电脑）我收到此错误：

```
ORA-12154: TNS:could not resolve the connect identifier specified 
```

如果我用 Visual Studio 在我的电脑上运行该应用程序，它工作正常。

Oracle 安装在服务器“A”中，应用程序安装在服务器“B”中。服务器“A”在一个域中，服务器“B”在另一个域中。我的电脑在同一个域中，有服务器“A”。

在我的电脑中，我可以在 C:\oracle\product\10.2.0\client_1\NETWORK\ADMIN 中找到文件 tnsname.ora，但在服务器“B”中我无法在任何地方找到它

任何的想法？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-02T14:59:15.820

你试过这个吗？（来自[http://ora-12154.ora-code.com/](http://ora-12154.ora-code.com/)）

ORA-12154：TNS：无法解析指定的连接标识符
原因：使用连接标识符请求连接到数据库或其他服务，并且指定的连接标识符无法使用配置的命名方法之一解析为连接描述符. 例如，如果使用的连接标识符类型是网络服务名称，则在命名方法存储库中找不到网络服务名称，或者无法定位或访问存储库。
行动： - 如果您使用本地命名（TNSNAMES.ORA 文件）：

*   确保“TNSNAMES”列为 Oracle Net 配置文件 (SQLNET.ORA) 中 NAMES.DIRECTORY_PATH 参数的值之一

*   验证 TNSNAMES.ORA 文件是否存在并且位于正确的目录中并且可以访问。

*   检查用作连接标识符的网络服务名称是否存在于 TNSNAMES.ORA 文件中。

*   确保 TNSNAMES.ORA 文件中的任何位置都没有语法错误。查找不匹配的括号或杂散字符。TNSNAMES.ORA 文件中的错误可能使其无法使用。

*   如果您使用目录命名：

*   验证“LDAP”是否列为 Oracle Net 配置文件 (SQLNET.ORA) 中 NAMES.DIRETORY_PATH 参数的值之一。

*   验证 LDAP 目录服务器是否已启动并且可以访问。

*   验证目录中是否配置了用作连接标识符的网络服务名称或数据库名称。

*   通过将完全限定的网络服务名称或完整的 LDAP DN 指定为连接标识符来验证正在使用的默认上下文是否正确

*   如果您使用的是简单连接命名：

*   验证“EZCONNECT”是否列为 Oracle Net 配置文件 (SQLNET.ORA) 中 NAMES.DIRETORY_PATH 参数的值之一。

*   确保指定的主机、端口和服务名称正确。

*   尝试将连接标识符括在引号中。有关命名的更多信息，请参阅 Oracle 网络服务管理员指南或 Oracle 操作系统特定指南。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-10-02T15:14:51.680

解决 TNS 错误可能会很痛苦。有几件事要记住。

大多数开发环境（如 Visual Studio）保留自己的 TNS 连接信息副本，并且不使用 TNSNAMES.ora 文件。保存此信息的文件不必称为 TNSNAMES.ora，这只是默认名称。这可能是您在服务器 B 上找不到它的原因。

如果您有 oracle 客户端软件（或 oracle 数据库），您可以使用**tnsping**检查您的 TNSNAMES.ora 文件是否配置正确。

TNSNAMES.ora 文件配置最常见的问题是使用错误的服务名称和/或使用错误的主机名。您可能需要将“ODB_A”更改为“ODB_A.WORLD”，反之亦然，具体取决于 SQL *NET 设置。对于 Oracle 10，后者是默认的 SQL* NET 设置。对于后者，您需要使用**ping**来查看服务器“A”，并了解是否需要使用“SERVERA”或“SERVERA.DOMIN.COM”或 IP 地址。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-02T14:59:28.193

猜测：服务器 B 上没有安装 oracle 客户端。

如果您确实安装了 oracle 客户端，那么您仍然可以将 tnsnames 文件放在任何位置（例如网络共享上的目录）。为此，请将 TNS_ADMIN 系统变量（XP 上的系统属性->高级->环境变量）设置到包含 tnsnames 文件的目录。

以我为例，我有一个系统变量：TNS_ADMIN - C:\oracle\ora92\network\ADMIN

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-02T14:59:57.223

是否在服务器 B 上设置了 ORACLE_HOME？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-02T15:00:29.937

看来您需要在“服务器 B”（应用程序服务器）上安装 Oracle 客户端，并将其配置为 TNSNAMES.ORA 文件。这是必需的，否则运行代码将不知道在哪里查找您在应用程序中使用的数据库（可能您在 web.config 中配置了数据源或硬编码）。请记住 - 如果没有 Oracle 客户端，您将无法（轻松）访问 Oracle。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-22T08:02:33.817

有同样的问题。原来部署环境中的 TNSNAMES.ORA 具有不同的 ADDRESS_NAME 和 SID/SERVICE_NAME ，并且应用程序被配置为使用 SID - 这导致了问题。

**您的连接字符串必须包含 ADDRESS_NAME 而不是 SID**

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-12-24T02:41:17.130

可能的解决方案 -

验证 TNSNAMES.ORA 是否存在并且可以访问。

确保 TNSNAMES.ORA 中没有语法错误。

验证连接字符串是否正确。

验证是否存在任何 DNS 问题。

如果问题是在使用 PL sql developer client 连接到服务器时。尝试在 Program File 而不是 Program Files(x86) 中安装 SQL developer

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-01-07T07:34:53.797

添加环境：

```
Variable Name: TNS_ADMIN

Variable Value: (YourDrive):\app\(UserName)\product\11.2.0\dbhome_1\NETWORK\ADMIN 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-09-17T11:56:47.690

我遇到过类似的问题。即使我在 tnsnames.ora 文件中添加了一个 tns 条目，下面的代码在我的系统中运行，但在另一台服务器中却没有运行。

```
con = new OracleConnection();
con.ConnectionString = "User Id=username;Password=password;Data Source=uit45";
con.Open(); // throws error here 
```

经过挖掘和挖掘，我找到了解决方案。我们需要忽略 tns 文件中的条目，并且可以将 tns 条目作为连接字符串给予，这对我来说很好用。试试下面的代码。

```
con = new OracleConnection("Data Source=(DESCRIPTION=(ADDRESS_LIST=(ADDRESS=(PROTOCOL=TCP)(HOST=db-uit45.xxx)(PORT=1521)))(CONNECT_DATA=(SERVER=DEDICATED)(SID=uit45)));User Id=username;Password=password");
con.Open(); 
```

请注意，您需要提供相关的值，尤其是对于`HOST,PORT,SID,User Id`和`Password`。

# sql-server - Sql Server 2005如何更改dbo登录名

> ID：162764
> 
> 赞同：56
> 
> 时间：2008-10-02T14:54:09.967
> 
> 标签：sql-server, sql-server-2005, security, active-directory

我有一个用户“dbo”的数据库，其登录名“域\xzy”。如何将其从“域\xzy”更改为“域\abc”。

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2008-10-30T20:55:35.373

我想到了。在 SQL Management Studio 中，您必须右键单击数据库 -> 属性 -> 文件 -> 所有者字段。将此字段更改为您希望与该数据库的“dbo”用户名关联的登录名/帐户。请记住，您选择的登录名/帐户必须已经在 sql server 中的 Security -> Logins 下设置

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-10-02T15:15:14.097

如果您尝试将登录名重新映射到 db 用户，则可以使用 sp_change_user_login

exec sp_change_user_login 'Update_One', 'user', 'login'

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-11T02:40:50.530

PhantomTypist 使用 GUI 给出了很好的答案。为了使用 TSQL 实现相同的结果，您可以使用以下代码：

```
USE [My_Database_Name]
GO
EXEC dbo.sp_changedbowner @loginame = N'domain\abc', @map = false
GO 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-02T15:02:55.283

这是 Windows 登录，而不是 SQL Server 登录，因此您不能“更改”登录名，因为它与 Active Directory 中的用户帐户相关联。

创建映射到新 Windows 用户的新服务器登录 (Windows)（如有必要，删除旧用户）。然后在登录的安全 > 用户映射中，以用户 'dbo' 身份登录到相应数据库的权限（或分配给 db_owner 角色）

# c# - 在本地存储网址的最佳方式

> ID：162778
> 
> 赞同：2
> 
> 时间：2008-10-02T14:56:01.710
> 
> 标签：c#, sqlite, plaintext

我正在创建一个 RSS 阅读器作为一个爱好项目，并且在用户添加他自己的 URL 的地方。

我在想两件事。

*   一个纯文本文件，其中每个 url 都是一行
*   SQLite，我可以在 URL 后面拥有唯一 ID 和描述

SQLite 的想法是否会产生很大的开销，还是有更好的方法来做这样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-02T14:58:13.983

为什么不是 XML？

如果您无论如何都在处理 RSS，那么您也可以 :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-02T14:59:21.110

作为[OPML](http://en.wikipedia.org/wiki/Opml)文件呢？它是 XML，因此如果您需要存储比 OPML 规范提供的更多数据，您可以随时添加自己的命名空间。

此外，从其他 RSS 阅读器导入和导出都是通过 OPML 完成的。通常有图书馆支持它。如果您有兴趣让用户切换，那么您必须支持 OPML。感谢 jamesh 提出这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-02T14:59:33.903

你打算只存储 URL 吗？或者您打算添加类似的数据`last_fetch_time`？

如果它只是一个简单的 URL 列表，您的程序将逐行读取并下载数据，将其存储在文件中，甚至更好地存储在写入文件的序列化对象中。

如果您打算扩展它，添加评论/上次获取的时间*等*，我会选择 SQLite，它的开销并不大。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-02T15:03:32.393

如果它是一个只有一个实例的单用户应用程序，那么 SQLite 可能是矫枉过正。

在我看来，您有几个选择：

1.  SQLite / 数据库层。增加您的代码需要运行的依赖项。但允许并发访问
2.  滚动您自己的文本解析器。当您想要保存更多数据并且您正在重新发明轮子时，复杂性会增加。更少的依赖，最初，虽然您的数据很简单，但对于您的应用程序的新手用户来说编辑是微不足道的。
3.  使用 XML。它的格式和定义良好，可编辑文本。不过，只存储一个 URL 可能有点过分了。
4.  [使用pickle](http://www.python.org/doc/2.5.2/lib/module-pickle.html)之类的东西来序列化您的对象并将它们保存到磁盘。更改数据结构意味着“升级”pickle 文件。对于新手用户来说编辑不是很直观，但非常容易实现。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-02T15:07:36.643

我会选择 XML 文本文件选项。您可以使用 Visual Studio 中内置的 XSD 工具从 XML 数据中创建一个 DataTable，并在需要时轻松将其序列化回文件中。

另一个需要注意的是，我确信您会希望最终用户能够对他们的 RSS 提要进行分类并能够潜在地搜索/排序它们，并且拥有这种数据表样式将对此有所帮助。

您将获得简单的文件存储和访问，这是“数据库”结构的好处，但不是 SQLite 的开销。

# flash - Flash 上的图片

> ID：162797
> 
> 赞同：2
> 
> 时间：2008-10-02T14:59:17.663
> 
> 标签：flash, cross-browser

您知道将图片放在 Flash 上的任何解决方案吗？

它**必须**在 IE6、IE7、Firefox for Windows、MacOSX、Linux 和 Safari 中运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-02T15:14:19.250

在我的脑海中，你可以试试这个：

图像在 swf 上的绝对定位 div

您必须将 swf 的参数“wmode”值设置为“透明”。

您也可以访问 www.actionscript.org 并在他们的论坛上进行搜索。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-02T16:29:37.010

Funnily, I did something similar on SO, but over the arrow of a combo box... Reusing the technique:

```
<object width="550" height="450"
    codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0" 
    classid="clsid:D27CDB6E-AE6D-11CF-96B8-444553540000">
<param name="movie" value="http://somesite.org/Tests/Spiffy.swf"/>
<param name="wmode" value="opaque"/>
<object type="application/x-shockwave-flash" width="550" height="450"
    data="http://somesite.org/Tests/Spiffy.swf">
<param name="wmode" value="opaque"/>
<img src="NoFlash.png" width="550" height="450" alt="Placeholder if no Flash" />
</object>
</object>
<div style="background-color: blue;
    min-width: 100px; width: 100px; min-height: 100px; height: 100px;
    position: relative; right: -250px; top: -250px;">&Nbsp;</div> 
```

Found the wparam=opaque trick at [wmode and z-index](http://groups.google.com/group/swfobject/browse_thread/thread/1618761c25140e4b "wmode and z-index"), search fueled by the remark of tehborkentooth above (which advised to use transparent, but it didn't work for me).

Of course, the style of the div should go in a class. The Nbsp is to make SO happy, it must be &nbsp; or real content, of course.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-04-15T12:24:37.510

wmode=opaque 提供比“透明”更好的性能，结果几乎相同。

# python - 用私有成员子类化一个类

> ID：162798
> 
> 赞同：2
> 
> 时间：2008-10-02T14:59:18.987
> 
> 标签：python, oop, encapsulation

关于 python 的真正好处之一是您可以简单地命名与访问器同名的变量：

```
self.__value = 1

def value():
    return self.__value 
```

有没有一种简单的方法可以访问我希望子类化的类的私有成员？通常我希望简单地使用类中的原始数据对象，而不必一直使用访问器和修改器。

我知道这似乎违背了私有和公共的一般概念，但通常我试图子类化的类是我自己的类之一，我很乐意将成员从子类公开，而不是该类的实例. 有没有提供这种区别的干净方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-10-02T15:06:26.490

不方便，无需进一步破坏封装。双下划线属性通过在其被访问的类前面加上“_ClassName”来进行名称修改。因此，如果您有一个具有“__value”属性的“ContainerThing”类，则该属性实际上被存储为“ `_ContainerThing__value`” . 更改类名（或重构分配属性的位置）将意味着破坏所有尝试访问该属性的子类。

这正是为什么双下划线名称修饰（这不是真正的“私人”，只是“不方便”）是一个不好的主意。只需使用一个*前导*下划线。每个人都知道不要触摸您的“私有”属性，并且您仍然可以在子类和其他非常方便的情况下访问它。双下划线属性的名称修饰仅用于避免真正特定于特定类的属性的名称冲突，这种情况极为罕见。它没有提供额外的“安全性”，因为即使是名称损坏的属性也可以轻松访问。

为了记录，' `__value`'和' `value`'（和' `_value`'）不是同一个名字。下划线是名称的一部分。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-10-02T21:28:20.113

“我知道这似乎违背了私有和公共的一般概念”并不是真正的“反对”，只是与 C++ 和 Java 不同。

私有——在 C++ 和 Java 中实现不是一个非常有用的概念。有时，它有助于隔离实现细节。但它被过度使用了。

以 2 开头的 Python 名称`__`是特殊的，通常情况下，您不应该用这样的名称定义属性。的名称`__`是特殊的，并且是实现的一部分。并暴露给您使用。

以 1 开头的名称`_`是“私人的”。有时它们是隐蔽的，一点点。大多数情况下，“同意的成年人”规则适用——不要愚蠢地使用它们，它们可能会在没有通知的情况下更改。

我们将“私人”放在引号中，因为这只是您和您的用户之间的协议。你已经用 标记了一些东西`_`。您的用户（和您自己）应该尊重这一点。

通常，我们有带有前导的方法函数名称，`_`表明我们认为它们是“私有的”并且可能会更改，恕不另行通知。

Java 所需的无穷无尽的 getter 和 setter 在 Python 中并不常用。Python 内省更加灵活，您可以访问对象的内部属性值字典，并且您拥有一流的[函数](http://docs.python.org/lib/built-in-funcs.html)，例如`getattr()`和`setattr()`。

此外，您有一个`property()`函数，该函数通常用于将 getter 和 setter 绑定到一个行为类似于简单属性的单个名称，但实际上是定义良好的方法函数调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-02T17:32:12.910

不知道从哪里引用它，但以下关于访问保护的声明是 Pythonic 经典：“我们在这里都是同意的成年人”。

正如 Thomas Wouters 所说，单个前导下划线是将属性标记为对象内部状态的一部分的惯用方式。两个下划线只是提供名称修饰以防止轻松访问该属性。

在那之后，您应该期望您的图书馆的客户不会通过干预“私人”属性而自取其辱。

# c - 如何从char数组中检索n个字符

> ID：162804
> 
> 赞同：4
> 
> 时间：2008-10-02T14:59:44.277
> 
> 标签：c, arrays, char

我在 C 应用程序中有一个 char 数组，我必须将其分成 250 个部分，以便我可以将它发送到另一个一次不接受更多的应用程序。

我该怎么做？平台：win32。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-10-02T15:03:18.573

从 MSDN 文档：

> strncpy 函数将 strSource 的初始计数字符复制到 strDest 并返回 strDest。如果 count 小于或等于 strSource 的长度，则不会自动将空字符附加到复制的字符串。如果 count 大于 strSource 的长度，则用空字符填充目标字符串，直到长度为 count。如果源字符串和目标字符串重叠，则 strncpy 的行为未定义。

请注意，`strncpy`不检查有效的目标空间；这是留给程序员的。原型：

`char *strncpy( char *strDest, const char *strSource, size_t count );`

扩展示例：

```
void send250(char *inMsg, int msgLen)
{
    char block[250];
    while (msgLen > 0)
    {
         int len = (msgLen>250) ? 250 : msgLen;
         strncpy(block, inMsg, 250);

         // send block to other entity

         msgLen -= len;
         inMsg  += len;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-02T15:05:22.983

我可以想到以下几点：

```
char *somehugearray;
char chunk[251] ={0};
int k;
int l;
for(l=0;;){
  for(k=0; k<250 && somehugearray[l]!=0; k++){
    chunk[k] = somehugearray[l];
    l++;
  }
  chunk[k] = '\0';
  dohandoff(chunk);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-02T15:17:26.620

如果您追求性能并且允许您稍微触摸字符串（即缓冲区不是 const，没有线程安全问题等），您可以以 250 个字符的间隔暂时对字符串进行空终止并以块的形式发送，直接来自原始字符串：

```
char *str_end = str + strlen(str);
char *chunk_start = str;

while (true) {
    char *chunk_end = chunk_start + 250;

    if (chunk_end >= str_end) {
        transmit(chunk_start);
        break;
    }

    char hijacked = *chunk_end;
    *chunk_end = '\0';
    transmit(chunk_start);
    *chunk_end = hijacked;

    chunk_start = chunk_end;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-03T03:40:29.533

jvasaks 的回答基本上是正确的，只是他没有以空值终止的“块”。代码应该是这样的：

```
void send250(char *inMsg, int msgLen)
{
    char block[250];
    while (msgLen > 0)
    {
         int len = (msgLen>249) ? 249 : msgLen;
         strncpy(block, inMsg, 249);
         block[249] = 0;

         // send block to other entity

         msgLen -= len;
         inMsg  += len;
    } 
```

}

因此，现在该块是 250 个字符，包括终止的空值。如果剩余的字符少于 249 个，strncpy 将终止最后一个块。

# maintenance - 编写可维护的代码

> ID：162805
> 
> 赞同：32
> 
> 时间：2008-10-02T14:59:44.697
> 
> 标签：maintenance

编写可维护代码（与语言无关）最重要的因素是什么？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2008-10-02T15:08:06.860

写出来给别人看。这意味着好名字、好评论和简单陈述的结合。

曾几何时，记忆稀缺，循环时间很慢。鼓励程序员编写复杂的单行代码来做很多事情。今天的内存很丰富，循环时间很快。您应该编写 5 行人们可以遵循的简单代码，而不是他们无法理解的一行。

好的评论不必很长，但它们必须是有帮助的。

还要保持一致。不要更改代码中的样式。例如，不要将命名样式从一个部分更改为下一个部分。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2008-10-02T15:01:42.710

关注点分离（每个方法都做一件事）——这会停止 Spaghetti 代码。

编辑：（回应 Ash 的评论）可维护性的关键是能够快速弄清楚代码在做什么以及如何进行更改以完成任务。

将代码分离出来，以便每个任务都由专用于它的方法处理，这很容易。

例如，如果我想在机器人的软件上更改肘部弯曲的方式，使用名为 BendElbow 的方法可以轻松地进行更改。

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2008-10-02T15:02:13.333

自动化单元测试。

如果你已经用自动化测试告诉你什么时候破坏了现有的功能，你可以通过重构慢慢改变代码的设计。自动化测试降低了更改代码的风险。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2008-10-02T15:01:17.143

好抽象

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2008-10-02T15:07:24.117

单元测试放下手。如果您从一开始就对代码进行单元测试，那么您将拥有一个测试套件，您可以在进行更改时运行该套件来验证代码的有效性。

此外，当您使用单元测试编写代码时，这些方法往往更小，因为它们更容易测试。同样，它应该鼓励您将方法用于单个任务 - 再次因为这样更容易测试。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2008-10-02T15:02:45.470

良好的前期设计。没有什么可以挽救一个糟糕的设计。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2008-10-02T15:19:09.893

在发布后的一两年内为您刚刚编写的软件提供一级或二级支持。

相信我，我自己也去过那里。我可能不得不在几年内维护或增强自己的代码的“恐惧”始终是提高可维护性的巨大动力。

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2008-10-02T22:16:05.833

编写代码的倾向是认为计算机是您的受众。

严格来说，这是真的，因为代码确实必须工作。但是，如果您在编写时考虑到您的人类受众，那么这种心态有助于生成更具可读性的代码。

如果您担心这会产生缓慢的代码，请记住大多数程序几乎所有时间都在非常小的代码部分中。开始编写可读性，然后使用分析器确定要优化的正确部分。

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2008-10-02T15:01:43.087

好的方法名

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2008-10-02T16:20:53.817

Read Code Complete- it covers everything about this from variable naming right through to the really big stuff and it is *all* necessary. There is no one thing.

My approach currently boils down to writing code to do the job that needs to be done ( not for every future job the code may need potentially to do ) using informative variable names and minimal variable scope and trying to make sure that my code needs as little supplementary documentation as possible. Sometimes this makes my variable and method names a little more verbose than they used to be ( my debugging output is very compreshensive when I use that ) but they are much easier to understand.

Maintainability is also generally an outcome of solid practice in other respects - if you are writing your code in a nice DRY way then problems are easier to find, if you've got a strong set of tests then you can see if maintenance changes are going to break anything.

Ultimately it's a question of trying to be thoughtful and writing for the future- code is only written once, after that it's all maintenance...

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2008-10-02T15:06:05.697

不要做[任何这些事情！](http://mindprod.com/jgloss/unmain.html)不过感谢 Roedy Green 的笑声。

* * *

## 回答 #12

> 赞同：5
> 
> 时间：2008-10-02T15:48:23.910

没有“单一最重要的因素”，它是几个因素的组合，如上所述。

现在，这些规则中的大多数可以浓缩为：“编写代码以供以后阅读”。
或者套用一个有趣但很好的建议：“编写你的代码，就好像它必须由一个知道你住在哪里的杀人狂人维护一样。”......

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2009-03-14T13:37:11.933

*   当你做出假设时记录下假设——两天后你会认为这些假设是理所当然的，但是下一个维护你的代码的人不一定会做出同样的假设，并且会想知道你为什么做了你所做的……

*   *为人*编码——计算机会做任何你告诉它的事情；代码，以便*人们*可以理解您的代码 - 谁知道它可能是您 6 个月后！

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2008-10-02T15:01:51.447

持续重构

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2008-10-02T15:09:30.697

我不认为你可以专注于一个单一的因素。如果有，我认为它必须是良好的判断力。如果开发人员在设计阶段使用了错误的判断，即使是有据可查、易于阅读的代码也可能难以维护。无论文档和单元测试有多好，生产应用程序的糟糕设计几乎是不可能修复的。

您还可以查看诸如 The Guide to Unmaintainable Code 之类的内容，了解不该做什么的想法。内容丰富且有趣！

[http://mindprod.com/jgloss/unmain.html](http://mindprod.com/jgloss/unmain.html)

我实际上曾在那些对其中提到的一些事情“标准化”的公司工作过。你会认为大部分内容只是常识，但你可能会感到惊讶。

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2008-10-02T17:21:01.377

我想说最重要的因素是干燥。glenatron 在他的回答中已经提到了其他因素，但我认为这是最重要的因素。

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2008-10-03T04:37:13.203

编程就是性能；你永远不应该忘记你的听众是谁。“就像最终维护你的代码的人是一个知道你住在哪里的暴力精神病患者一样编写代码。”

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2008-10-02T16:18:16.693

Plenty of whitespace. - High density code is hard to comprehend. If you have more than 6 lines wihtout a blank line, then that group is probably not a cohesive thought/idea/operation.

Good variable names - explanatory, but succinct. Huge variable names are as bad as tiny ones.

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2008-10-02T15:20:04.710

在我看来，编写可维护代码的基本规则是您的代码应该非常容易理解。这并不像听起来那么容易，您必须使用此处提到的所有其他技术来做到这一点。它需要一定程度的同理心，因为您必须了解其他开发人员如何看待您的代码，以及它与您看待它的方式有何不同。掌握这一点的一个好方法是回头看看你几年前写的一些代码。

现在，我想从理论上讲，编写代码是可能的，这些代码非常容易理解并准确地执行其预期的任务，但也很难以任何方式修改。不过，我从未见过这样的代码。

* * *

## 回答 #20

> 赞同：2
> 
> 时间：2008-10-02T15:00:40.827

好评论。

* * *

## 回答 #21

> 赞同：2
> 
> 时间：2008-10-02T15:09:16.797

一致性。

* * *

## 回答 #22

> 赞同：2
> 
> 时间：2008-10-02T20:40:32.880

毫无疑问，编写旨在被其他人阅读的代码。这包括避免打高尔夫球、神秘语法和有意义的变量名称。如果代码足够干净，您可以完全避免编写任何注释，IMO。\

[选择一种内置 OO 的语言而不是附加的语言也有帮助]

* * *

## 回答 #23

> 赞同：2
> 
> 时间：2013-09-09T00:12:20.817

已经很久了，但我有一个答案：*不要过度评论。*这可能听起来很傻，但是太多解释简单事情的注释会使代码变得混乱，因为所有的东西都出来了。好的评论可以创造奇迹，但毫无意义的评论恰恰相反。

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2008-10-02T16:33:24.940

small, well defined functions and classes.

It's pretty easy to get used to other people's various coding conventions but if everything is in one giant class or function, my head explodes.

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2008-10-02T22:19:59.320

当人们随着代码的增长而修剪和塑造代码时，我更喜欢它。很多时候，你会发现一个原始的体面建筑的脊椎，上面挂着一大堆杂乱无章的东西。

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2008-10-02T15:34:24.270

对我来说编写可测试代码（结帐谷歌测试博客）是更好的可维护代码

* * *

## 回答 #27

> 赞同：1
> 
> 时间：2008-10-02T16:05:22.247

我已经投票赞成马特的回答“良好的抽象”，但我想添加一些东西。

记录这一切都是为了*解释*事情。我完全赞成 Doxygen 和其他自动文档工具，但 API 中的粗略函数列表总比没有好。

如果您想让您的代码可维护，请将您的解决方案描述为适当的抽象级别，并将该级别细化到代码，以便它的作用显而易见。

* * *

## 回答 #28

> 赞同：1
> 
> 时间：2008-10-03T04:20:55.597

找个好导师。这个人不一定是比你更好的编码人员，但是他们应该能够建议其他正确编写代码的策略。一个好的导师会建议许多以前对该主题给出的答案。它们可以是第二双眼睛，让您知道自己的缺点在哪里，同时保持鼓励、乐观的语气。他们也会像你一样灵活并不断磨练他们的技能。这样，当下一个大范式出现时，您将能够更好地将谷壳与小麦分开。当面向对象编程和源代码控制被下一件大事取代时，这将是无价的（我很难想象我知道。）

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2008-10-02T15:28:54.207

拥有良好的文档。这包括自我记录的代码（分区、描述性命名和清晰）、良好的注释、精确到（最近的）最终版本代码的详细设计文档，以及源代码管理中的描述性变更说明。

如果你要求两个，第二个肯定是单元测试。两者之间是一个艰难的选择。

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2008-10-02T15:03:08.667

好的注释可以使最糟糕的意大利面条代码更容易维护 10 倍。

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2008-10-10T18:47:20.097

一贯适用的强大、明智的约定。诸如关于从何处开始索引的约定，将内容保留在什么结束状态之类的约定。

这使得代码*更*容易理解，因为您的所有代码都将以更简单的方式运行。

这至少是我的重要提示之一。

* * *

## 回答 #32

> 赞同：0
> 
> 时间：2008-10-02T15:08:18.607

好评论。好的注释通过说明代码的预期目的来帮助抽象，不好的注释只是重申代码在做什么。注释实际上可以以精心设计和命名的单元测试的形式出现。

* * *

## 回答 #33

> 赞同：0
> 
> 时间：2008-10-02T15:59:58.030

一致的编码风格。方法和变量命名约定、注释的样式和格式，甚至模块/文件命名。

* * *

## 回答 #34

> 赞同：0
> 
> 时间：2008-10-02T16:12:25.770

我会和其他一些人一起去，抽象。当您了解一些软件模式时，它也会有所帮助，GOF 是学习这类东西的好地方。

* * *

## 回答 #35

> 赞同：0
> 
> 时间：2008-10-02T21:17:58.377

我猜想编写可维护的代码超越了代码。我相信最好先了解需求是什么（并以某种方式记录下来，包括功能性和非功能性的），然后让新员工了解如何将其转化为代码。

如果有人知道为什么代码会变成这样，那么让它变得更好和/或扩展它会变得更容易。

对于更多技术性的东西（例如算法），请对其进行抽象解释（目标、原则），然后注释代码和/或模式实现的关键部分。

我还要做的一件事是在我的应用程序中创建迷你实验室、工具箱和代码模板，以便人们知道做一件事或扩展另一件事所需的“标准”代码是什么（导致一些复制/粘贴，但有助于生成更多更好）。

* * *

## 回答 #36

> 赞同：0
> 
> 时间：2017-03-15T08:57:22.747

纯函数使推理代码变得更加容易。确保正确传达副作用。（即，当您不返回“结果”时，通常会产生副作用。即无效函数。）

* * *

## 回答 #37

> 赞同：-1
> 
> 时间：2008-10-02T15:01:08.563

文档。

# python - Django 和 Python 2.6

> ID：162808
> 
> 赞同：6
> 
> 时间：2008-10-02T15:00:00.203
> 
> 标签：python, django

我刚刚开始接触 Django，当然，截至昨晚，两个新的 Python 版本中的一个进入了最终版本（显然是 2.6 ;)）所以我想知道 2.6 plus Django 是否准备好实际使用或做 Django团队需要更多时间来完成调整/清理？

我所做的所有谷歌搜索都没有结果，我看到了一些关于 beta 2 的初始测试运行的信息，但似乎没有更新的内容出现。

编辑：[http ://groups.google.com/group/django-developers/browse_thread/thread/a48f81d916f24a04](http://groups.google.com/group/django-developers/browse_thread/thread/a48f81d916f24a04)

据他们所知，他们在这里确认 1.0 w/2.6 可以正常工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-10-02T15:58:41.310

我得到的印象是 2.6 应该可以与 Django 1.0 一起正常工作。在这里找到：http: [//simonwillison.net/2008/Oct/2/whatus/](http://simonwillison.net/2008/Oct/2/whatus/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-10-30T07:23:45.577

请注意，目前没有适用于 python2.6 的 python-mysql 适配器。如果您需要 MySQL，请暂时使用 2.5。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-28T13:45:33.510

mysqldb 1.2.2 win32 python 2.6 @ [http://www.technicalbard.com/files/MySQL-python-1.2.2.win32-py2.6.exe有一个非官方版本](http://www.technicalbard.com/files/MySQL-python-1.2.2.win32-py2.6.exe)

# c# - 如何通过 log4net 记录机器名称？

> ID：162810
> 
> 赞同：45
> 
> 时间：2008-10-02T15:00:21.420
> 
> 标签：c#, .net, logging, log4net

我正在使用带有 AdoNetAppender 的 Log4Net 将来自简单系统托盘应用程序的消息记录到 SQL Server 2005 数据库中。

我想将机器名称和日志消息一起记录下来，因为这个应用程序将在多台机器上运行，我需要知道消息来自哪台机器。

但是，我找不到通过与 appender 一起使用的 log4net.Layout.PatternLayout 公开此信息的方法。

有没有办法以这种方式通过 log4net 记录机器名称？

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2008-10-02T16:40:31.913

您可以使用预先填充的属性`log4net:HostName`，例如：

```
<conversionPattern value="%property{log4net:HostName}" /> 
```

这样您就不需要填充 MDC。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2008-10-02T15:23:04.640

您可以创建类似于以下的参数：

```
<parameter>
  <parameterName value="@machine" />
  <dbType value="String" />
  <size value="255" />
  <layout type="log4net.Layout.PatternLayout">
    <conversionPattern value="%X{machine}" />
  </layout>
</parameter> 
```

然后在写入日志之前添加这一行：`MDC.Set("machine", Environment.MachineName);`

# windows - 在 Windows Mobile 中使用 PostMessage 模拟菜单选择

> ID：162819
> 
> 赞同：0
> 
> 时间：2008-10-02T15:01:28.127
> 
> 标签：windows, windows-mobile, mfc, windows-ce, postmessage

我正在编写一个例程，为我的 Windows Mobile 5 应用程序中的任何菜单项提供用户可定义的键盘快捷方式，该应用程序使用 C++/MFC。为此，我获取所有可用的菜单命令 ID，并使用 CWnd::PostMessage(WM_COMMAND,MyMenuID) 将其发布到应用程序。我在其他地方使用这种技术对线程间通信有很好的效果，但不适用于菜单命令 ID。任何想法为什么这不起作用。该应用程序是文档视图，我尝试过发布到 CMainFrame 和 CView 派生窗口。我可以写一个糟糕透顶的 switch 语句，但我觉得发布一条消息应该可行。

编辑：好的，我尝试了很多东西，包括[这篇文章的](http://blogs.msdn.com/oldnewthing/archive/2006/03/02/542115.aspx)建议，但无济于事。大丑 switch 声明现在是，如果我发现更好的，我会再次更新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-23T07:50:26.873

我能想到的唯一原因是消息进入了错误的窗口。不要忘记，并非所有菜单命令总是由特定窗口处理。某些菜单命令（如剪切）通常由视图窗口处理。其他的由框架窗口处理，一些可能由应用程序对象处理。

希望这可以帮助。

# .net - 使用 .net 应用程序部署打包 .net 框架

> ID：162845
> 
> 赞同：0
> 
> 时间：2008-10-02T15:04:47.680
> 
> 标签：.net, visual-studio, deployment

您可以在 Visual Studio 创建的安装程序中打包 .Net 框架吗？如果有怎么办？

我已经看到使用 Install4J 打包 JVM 来完成此操作，但我认为这是运行 Install4J 的 JVM。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-03T18:23:34.123

我刚刚学到了有关部署项目的这一课：.MSI 文件将应用程序交付到目标计算机，但 SETUP.EXE 是安装先决条件（如 .NET Framework、MDAC 或 Windows Installer）的引导程序。我将 .NET Framework 指定为先决条件，但是因为我只分发了 .MSI，所以没有运行任何检查，并且在没有框架的情况下启动时应用程序崩溃了。

为确保您的先决条件位于目标计算机上，您还需要分发 setup.exe。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-02T15:51:34.510

糟糕，是的 - 我最近创建了一个安装程序，然后才意识到需要 .Net Framework（这是我需要安装的东西之一）。在我的安装程序启动之前，我最终制作了一个安装 .Net 的 c++ 程序。

对我来说，提供创建安装程序的能力而不是提供安装它需要运行的东西对我来说似乎有点奇怪。那个时候有点没意思吧？除非您知道您提供安装程序的每台机器都将具有必要的组件...

哦，生活和学习

# database - 如何修复无法在分布式事务中登记 Sybase 数据库的错误？

> ID：162848
> 
> 赞同：2
> 
> 时间：2008-10-02T15:04:56.870
> 
> 标签：database, ssis, transactions, sybase, distributed

我对 Sybase 设置知之甚少（可以说一无所知），但我知道 SSIS 在将 Sybase 纳入分布式事务时遇到了麻烦。有没有人能够完成这项工作？

```
The SSIS Runtime has failed to enlist the OLE DB connection in a 
distributed transaction with error 0x80004005 "Unspecified error". 
```

当我将包的 TransactionOption 更改为必需时，就会发生这种情况。当我恢复到默认的“支持”时，包运行没有错误（尽管不是线程安全的）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-19T21:30:59.857

当我尝试围绕从 Gupta SQLBase 的读取创建事务时，我遇到了同样的问题。基本上，似乎 SSIS（至少从 2005 年起）无法将任何其他提供者注册为交易包的一部分。我试过几次都没有运气，通常我只是最终将数据从我的 OLEDB 读取到一个临时表中，然后围绕将该数据导入 SQL Server 中的休息位置创建一个事务。不过，那是读取端 - 如果您尝试使用事务写入 SYBASE，则需要在该端执行一些操作 - SSIS 将无法使用事务将数据推送到另一个提供程序。

除此之外，我什至不希望我的事务扩展到 Gupta - 我只想在 SQL Server 端注册我的 INSERT/UPDATE 事务，以阻止用户读取半更新的数据，但 SSIS 拒绝允许我将这个过程包装在一个事务中，因为 Gupta 不支持它。似乎仅在某些提供程序上不支持事务，或者仅在流程的“写入”端而不在“读取”端。

# sql-server - 有没有办法压缩 SQL2000/2005 MDF 文件？

> ID：162852
> 
> 赞同：5
> 
> 时间：2008-10-02T15:05:58.037
> 
> 标签：sql-server

我最近从生产 SQL 数据库中删除了数百万行旧数据，它似乎并没有大幅缩小 .MDF 文件的大小。我们有有限的磁盘空间。

我想知道是否还有其他方法可以“收紧”文件（类似于 Access 的压缩和修复功能）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-10-02T15:07:56.330

使用 Sql Server Management Studio 中的 Shrink File 选项右键单击 Database > Tasks > Shrink > Database (or Files)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-10-02T15:08:15.520

DBCC SHRINKDATABASE 等 - 阅读联机丛书中的事务日志和备份

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-10-02T15:14:30.857

如果大日志文件是问题所在，这可能会有所帮助：

```
backup log MY_DATABASE WITH TRUNCATE_ONLY; 
```

然后右键单击 MY_DATABASE 并按照柜员的建议选择所有任务->收缩数据库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-28T16:07:23.530

这对我有用，并将我的日志文件缩小了一千。

1.  使用 SQL Server 管理器。
2.  右键单击有问题的数据库。
3.  选择属性，然后选择选项选项卡。
4.  将恢复模式从完全更改为简单。

如果您在完全模式下需要它，请在缩小后将其切换回来。就是这样！

# nhibernate - NHibernate 查询问题

> ID：162871
> 
> 赞同：1
> 
> 时间：2008-10-02T15:08:43.927
> 
> 标签：nhibernate

我对 NHibernate 很陌生，并开始找到自己的方式。

我有一个有点像树的域模型。

基金有期间有选择有审计
现在我想获得特定基金的所有审计

如果我用 SQL 做的话会是这个样子

SELECT A.*
FROM Audit A
JOIN Selection S ON A.fkSelectionID = S.pkID
JOIN Period P ON S.fkPeriodID = P.pkID
JOIN Fund F ON P.fkFundID = F.pkID
WHERE F.pkID = 1

所有输入表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-02T15:21:51.070

尝试这个

```
select elements(s.Audits)
from Fund as f inner join Period as p inner join Selection as s  
where f = myFundInstance 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-18T00:44:03.040

```
session.CreateCriteria ( typeof(Audit) )
  .CreateCriteria("Selection")
  .CreateCriteria("Period")
  .CreateCriteria("Fund")
  .Add(Restrinction.IdEq(fundId)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-28T13:35:39.257

使用 LINQ ....

(from var p in Fund.Periods let fundPeriodSelections = p.Selections from var selection in fundPeriodSelections select selection.Audit).ToList()

...但它确实取决于那些多对多/一对多的关系是双向的。另外，我在想您可能需要在 Period / Fund 表之间的映射表/类..但我想您已经考虑过了。

希望上面的 LINQ statemanet 可以工作……它取决于那些被提及的属性，但这是我们在项目中使用的一种方法，它真正清理了代码。

# php - 如何包含超过 2 个目录的文件？

> ID：162873
> 
> 赞同：114
> 
> 时间：2008-10-02T15:08:56.093
> 
> 标签：php, include, filesystems

你如何包含一个超过 2 个目录的文件。我知道您可以使用`../index.php`包含 2 个目录的文件，但是您如何为 3 个目录执行此操作？这有意义吗？我试过`.../index.php`了，但它不起作用。

我有一个文件`/game/forum/files/index.php`，它使用 PHP 包含来包含一个文件。位于`/includes/boot.inc.php`；`/`作为根目录。

* * *

## 回答 #1

> 赞同：175
> 
> 时间：2008-10-02T15:10:07.637

`..`从当前目录中选择父目录。当然，这可以链接：

```
../../index.php 
```

这将是两个目录。

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2008-10-02T15:14:17.003

要将文件包含在一个目录后面，请使用`'../file'`. 对于两个目录，使用`'../../file'`. 等等。

虽然，实际上您不应该执行相对于当前目录的包含。如果你想移动那个文件怎么办？所有的链接都会中断。一种确保您仍然可以链接到其他文件，同时在移动文件时保留这些链接的方法是：

```
require_once($_SERVER['DOCUMENT_ROOT'] . 'directory/directory/file'); 
```

`DOCUMENT_ROOT`是一个服务器变量，表示您的代码所在的基本目录。

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2008-10-02T15:12:13.933

```
. = current directory
.. = parent directory 
```

**所以`../`让你*回到一个目录而不是两个***。

`../`根据需要进行多次连锁以提升 2 级或更多级别。

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2012-08-23T15:29:17.760

```
include dirname(__FILE__).'/../../index.php'; 
```

是您最好的选择，它将避免您在其他解决方案中可能遇到的大多数相对路径错误。

实际上，它将强制包含始终相对于放置此代码**的当前脚本的位置（该位置很可能是稳定的，因为您定义了应用程序的体系结构）。**这与仅`include '../../index.php'` [包含相对于执行（也称为“调用”）脚本然后相对于当前工作目录的操作](http://php.net/manual/en/function.include.php)不同，后者将指向包含您的脚本的父脚本，而不是从您包含的脚本的路径中解析.

来自 PHP 文档：

> 根据给定的文件路径包含文件，如果没有给出，则根据指定的 include_path 包含文件。如果在 include_path 中找不到该文件，则 include 最终会在失败之前检查调用脚本自己的目录和当前工作目录。

我发现引用这个技巧的最古老的帖子[可以追溯到 2003 年，由 Tapken 撰写](http://php.net/manual/en/function.dirname.php#21138)。

您可以使用以下设置进行测试：

创建这样的布局：

```
htdocs
¦   parent.php
¦   goal.php
¦
+---sub
    ¦   included.php
    ¦   goal.php 
```

在`parent.php`中，输入：

```
<?php
include dirname(__FILE__).'/sub/included.php';
?> 
```

在`sub/included.php`中，输入：

```
<?php
print("WRONG : " . realpath('goal.php'));
print("GOOD : " . realpath(dirname(__FILE__).'/goal.php'));
?> 
```

访问时的结果`parent.php`：

```
WRONG : X:\htdocs\goal.php
GOOD : X:\htdocs\sub\goal.php 
```

正如我们所看到的，在第一种情况下，路径是从调用脚本中解析出来的`parent.php`，而通过使用`dirname(__FILE__).'/path'`技巧，包含是从`included.php`放置代码的脚本中完成的。

请注意，以下内容不等同于上述技巧，与其他地方可以阅读的相反：

```
include '/../../index.php'; 
```

确实，前置`/`会起作用，但它会像`include ../../index.php`调用脚本一样解决（不同之处在于，`include_path`如果它失败，则不会在之后查看）。[来自 PHP 文档](http://php.net/manual/en/function.include.php)：

> 如果定义了路径——无论是绝对路径（在 Windows 上以驱动器号或 \ 开头，或在 Unix/Linux 系统上以 / 开头）还是相对于当前目录（以 . 或 .. 开头）—— include_path 将被完全忽略。

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2012-08-14T13:57:08.553

`../`是一个目录，重复两个目录`../../`甚至三个：`../../../`等等。

定义常量可能会减少混淆，因为您将向前钻取目录而不是向后钻取

您可以像这样定义一些常量：

```
define('BD', '/home/user/public_html/example/');

define('HTMLBD', 'http://example.com/'); 
```

当使用“BD”或我的“基本目录”时，它看起来像这样：

```
file(BD.'location/of/file.php'); 
```

[定义（）; 参考](http://php.net/manual/en/function.define.php)

* * *

## 回答 #6

> 赞同：15
> 
> 时间：2008-10-02T15:09:51.803

```
../../index.php 
```

* * *

## 回答 #7

> 赞同：12
> 
> 时间：2008-10-02T15:10:54.763

```
../../../includes/boot.inc.php 
```

每个实例`../`意味着上/后一个目录。

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2013-11-13T05:51:14.947

以下是访问不同目录的方法：-

```
./ = Your current directory
../ = One directory lower
../../ = Two directories lower
../../../ = Three directories lower 
```

* * *

## 回答 #9

> 赞同：9
> 
> 时间：2019-04-03T06:51:41.753

***尝试这个***

**这个例子是一个目录**

```
require_once('../images/yourimg.png'); 
```

**这个例子是两个目录后面**

```
require_once('../../images/yourimg.png'); 
```

* * *

## 回答 #10

> 赞同：7
> 
> 时间：2008-10-02T15:10:05.560

你可以这样做`../../directory/file.txt`- 这会返回两个目录。

`../../../`- 这是三个。ETC

* * *

## 回答 #11

> 赞同：7
> 
> 时间：2008-10-02T15:10:38.120

```
../../../index.php 
```

* * *

## 回答 #12

> 赞同：7
> 
> 时间：2017-05-11T14:02:37.980

我建议使用`__DIR__`指定[当前 php 文件目录](https://stackoverflow.com/a/5398508/6521116)。检查[这里](https://stackoverflow.com/q/43917238/6521116)的原因。

```
__DIR__ . /../../index.php 
```

* * *

## 回答 #13

> 赞同：7
> 
> 时间：2016-12-06T06:34:33.027

如果您使用的是 php7，则可以使用 level 参数为 2 的 dirname 函数，例如：

```
dirname("/usr/local/lib", 2); 
```

第二个参数“2”表示上多少级

[目录名参考](http://php.net/manual/en/function.dirname.php)

* * *

## 回答 #14

> 赞同：6
> 
> 时间：2008-10-02T15:13:17.147

但是要***非常***小心让用户选择文件。你真的不想让他们得到一个文件，例如，

```
../../../../../../../../../../etc/passwd 
```

或其他敏感的系统文件。

（对不起，自从我成为 linux 系统管理员以来已经有一段时间了，我*认为*这是一个敏感文件，据我所知）

* * *

## 回答 #15

> 赞同：5
> 
> 时间：2008-10-02T15:10:07.183

```
../../../includes/boot.inc.php 
```

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2014-04-10T21:07:06.280

包括目录可以由代理文件处理

*   根
*   .....|__网络
*   .....|.........|_requiredDbSettings.php
*   .....|
*   .....|___分贝
*   .....|.........|_dbsettings.php
*   .....|
*   .....|_proxy.php

    ```
    dbsettings.php:
    $host='localhost';
    $user='username':
    $pass='pass';

    proxy.php:
    include_once 'db/dbsettings.php

    requiredDbSettings.php:
    include_once './../proxy.php'; 
    ```

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2008-10-02T15:15:58.153

如果您在包含`/`的开头包含 ，则包含将被视为站点根目录的路径。

如果您的网站是[http://www.example.com/game/forum/files/index.php](http://www.example.com/game/forum/files/index.php)您可以添加一个包含到 /includes/boot.inc.php 将解析为[http://www.example.com /includes/boot.inc.php](http://www.example.com/includes/boot.inc.php)。

您必须小心`..`遍历，因为某些 Web 服务器已禁用它；当您想将站点移动到新机器/主机并且结构略有不同时，它也会导致问题。

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2012-09-15T13:04:48.343

试试`../../`。您可以相应地对其进行修改，因为它将带您返回两个目录。首先到达根目录，然后访问所需的目录。

例如，您在`root/inc/usr/ap`其中并且有另一个目录`root/2nd/path`。您可以像这样访问该`path`目录`ap`： `../../2nd/path`首先转到根目录而不是所需目录。如果不工作，请分享。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2012-09-05T20:57:45.573

我看到了你的答案，我使用了包含语法的路径

```
require_once '../file.php'; // server internal error 500 
```

和 http 服务器 (Apache 2.4.3) 返回内部错误 500。

当我将路径更改为

```
require_once '/../file.php'; // OK 
```

一切都很好。

# java - 为什么 Jars 会从 Enunciate 的部署中排除？

> ID：162874
> 
> 赞同：0
> 
> 时间：2008-10-02T15:08:56.173
> 
> 标签：java, ant, war, enunciate

我正在使用[Enunciate](http://enunciate.codehaus.org)构建原型 REST api，并且需要包含一个包含自定义代码的 jar 作为库。

我的 Ant 脚本如下所示：

```
<!--include all jars-->
<path id="en.classpath">
    <fileset dir="${lib}">
        <include name="**/*.jar" />
    </fileset>
</path>

<!--define the task-->
<taskdef name="enunciate" classname="org.codehaus.enunciate.main.EnunciateTask">
    <classpath refid="en.classpath" />
</taskdef>

<mkdir dir="${dist}" />

<enunciate dir="${src}" configFile="${basedir}/enunciate.xml">
    <include name="**/*.java" />
    <classpath refid="en.classpath"/>
    <export artifactId="spring.war.file" destination="${dist}/${war.name}" />
</enunciate> 
```

问题是我的自定义 jar 被排除在 WAR 文件之外。有必要编译 enunciate 带注释的类，因此 jar 在编译时显然位于类路径上，但 enunciate 未能将其包含在分发中。我还注意到 enunciate 所需的几个 jar 没有包含在 WAR 文件中。

为什么他们被排除在外，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-21T10:41:02.083

我从未使用过发音，但作为一种快速破解，您可以将罐子添加到战争中：

```
<jar jarfile="${dist}/${war.name}" update="true">
   <fileset dir="${lib}">
        <include name="**/*.jar" />
    </fileset>
</jar> 
```

注意：您可能希望将 jars 添加到**WEB-INF/lib**目录，而不是根目录。

我猜 enunciate 会干扰你自己的构建过程，因为你最清楚在你的 jar 文件中放什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-29T13:28:45.793

事实证明，我们试图包含的其中一个 jar 在它的 Manifest 文件中列出了 Enunciate 所依赖的 jar（freemarker）。Enunciate 自动排除了 freemarker，乍一看，它似乎也自动排除了任何依赖于 freemarker 的东西。如果我们从代码清单文件中的依赖 jar 列表中删除 freemarker，它就可以正常工作。

然而; 我已经与 Enunciate 的主要开发人员 (Ryan Heaten) 进行了交谈，他向我保证这不是正在发生的事情。包括他的回复如下：

> 真的？！
> 
> 哇。有趣的。我无法解释；Enunciate 不会查看清单中的内容来确定战争中包含的内容，所以我在这里有点难过。它也可能是一些奇怪的 Ant 行为（由于某种原因，不包括“en.classpath”引用中的那个 jar）。
> 
> 〜瑞安

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-10T20:14:06.250

在 enunciate.xml 我告诉它不要复制任何库本身：

```
<webapp doLibCopy="false"> 
```

然后在 enunciate 任务结束时的 ant 构建文件中更新战争（您可以这样做来更新包含/排除的 jars，无论您是否在上面的步骤中为您复制了 jars）：

```
<war destfile="build-output/{mywar}" update="true">
    <lib dir="WebContent/WEB-INF/lib">
        <include name="**/*.jar" />
    </lib>
    <lib dir="build-output">
        <include name="some_other.jar" />
    </lib>
</war> 
```

# .net - 相同的属性，不同的类型

> ID：162879
> 
> 赞同：3
> 
> 时间：2008-10-02T15:09:40.057
> 
> 标签：.net, .net-2.0, properties, overloading

假设您有一个具有 Uri 属性的类。有没有办法让该属性同时接受字符串值和 Uri？你会如何建造它？

我希望能够执行以下操作之一，但都不支持（使用 VB，因为它允许您在 Set 声明中为第二个指定类型）：

```
Class MyClass

    Private _link As Uri

   'Option 1: overloaded property
    Public Property Link1 As Uri
        Get
            return _link
        End Get
        Set(ByVal value As Uri)
           _link = value
        End Set
    End Property

    Public Property link1 As String
        Get
            return _link.ToString()
        End Get
        Set(Byval value As String)
           _link = new Uri(value)
        End Set
   End Property

   ' Option 2: Overloaded setter
   Public Property link2 As Uri
      Get
          return _link
      End Get
      Set(Byval value As Uri)
          _link = value
      End Set
      Set(Byval value As String)
          _link = new Uri(value)
      End Set
End Class 
```

鉴于这些可能不会很快得到支持，您还会如何处理呢？我正在寻找比提供附加`.SetLink(string value)`方法更好的东西，而且我仍在使用 .Net2.0（尽管如果以后的版本对此有很好的功能，我想听听）。

我可以想到您可能希望提供这种重载的其他场景：例如，具有 SqlConnection 成员的类允许您设置新连接或新连接字符串。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-02T15:11:32.673

我想你只需要提供一个陪伴

```
Public Sub SetLink(ByVal value as String)
    _link = new Uri(value)
End Sub 
```

AFAIK，没有比这更好的了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-10-02T15:14:57.843

或者，您当然可以放弃重载并适当地命名属性：

```
Public WriteOnly Property UriString() As String
    Set(ByVal value As String)
        m_Uri = new Uri(value)
    End Set
End Property 
```

当然你不必这样做，`WriteOnly`但它看起来很合适。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-02T15:12:25.790

> 假设您有一个具有 Uri 属性的类。有没有办法让该属性同时接受字符串值和 Uri？

不，因为这意味着有两个仅在返回类型上有所不同的 getter，而这在 .NET 中是不允许的。

在给定字符串的情况下，我将`Uri`专门使用该方法，并可能创建一个方便的方法来设置属性。`URI`但是，由于从`String`to的转换`URI`很简单，即使这样也可能是不必要的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-02T15:13:18.080

您不能拥有这样的一个属性，但您可以创建两个都操作相同基础字段的属性 - 就像 Windows 窗体中的高度/宽度/大小一样。

# svn - 随时间跟踪对目录树的更改

> ID：162886
> 
> 赞同：1
> 
> 时间：2008-10-02T15:10:29.600
> 
> 标签：svn, version-control, visual-sourcesafe, perforce, deployment-project

有谁知道随着时间的推移跟踪*非源代码控制目录的更改（添加/删除的文件，文本文件上的差异）的应用程序或系统？*可以让你

1.  在时间 A 拍摄某个目录树的快照

2.  在时间段 B 回来看看发生了什么变化

3.  在时间段 C 回来看看自时间段 A 以来发生了什么变化，以及自时间段 B 以来发生了什么变化

源代码控制存储库在这里不是一个选项。我想要在不受任何版本控制的目录结构上工作的东西。我的小组无法控制有问题的服务器或目录树，但对这些树的更改会影响我们，我们希望跟踪它们。“源代码控制”的对象是

1.  反对任何需要文档作者签入、签出的集中式存储库。

2.  反对必须手动/自动化一堆可以利用版本控制系统功能集的任务

我想要一个半成熟的包，人们花了一些时间思考这个问题。如果有一个版本控制系统被构建来处理这种事情，它适用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-10-02T15:23:18.337

编写一个脚本化的计划任务，将目录树复制到另一个地方，可能在不同的机器上，它是版本控制存储库的一部分。然后，计划任务将使用您选择的版本控制系统自动提交更改（Mercurial 应该很好地适用于该系统，因为它`hg commit -A -m "automated snapshot"`可以快速完成您需要的操作而无需任何交互式提示）。

我建议为副本使用 rsync，它适用于许多平台，并且快速高效，因为它不会复制未更改的文件。配置副本以从您的副本中删除已在主目录中删除的文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-10-02T15:18:12.517

你的选择真的是：

1.  完全源代码控制
2.  [FileHamster](http://www.mogware.com/FileHamster/)等形式的源代码控制“精简版”
3.  差异备份/恢复工具
4.  完整备份/恢复和差异工具
5.  （我认为）一个日志文件系统。

只有一个标准目录，如果不在其他地方保留一个副本，实际上是没有办法做到这一点的，这实际上意味着它是一个源代码控制存储库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-02T15:13:46.503

我想要看起来、尝起来和闻起来都像牛奶的东西。但它不应该是牛奶。

换句话说：您正在描述一个 vcs。如果您告诉我们为什么不能使用 vcs，可能会更容易回答。

我唯一能想到的是苹果的 Time Machine，它（再次）基本上是面向大众的 vcs。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-02T15:16:46.247

以设定的时间间隔自动将其提交到修订控制。如果您不希望目录中有任何额外的文件/目录，但您选择的存储库在工作副本中需要它们，则将目录内容复制到单独的工作副本中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-02T15:16:47.573

您要么需要源代码管理系统，要么需要文档管理系统。

为什么源代码管理不是一种选择？通过 Tortise SVN windows 集成，非程序员可以轻松使用 SVN。

听起来您对服务器没有太多选择....

**这个怎么样？** 1\. 在您的计算机上设置一个 SVN 存储库 2\. 每晚从目录复制到您的计算机并提交更改。

**或者...** 使用 Windows“搜索”命令查找过去 n 天内更改的文件。每周手动运行报告。或者为该报告编写自动化程序。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-10-02T15:19:52.840

你说的是版本控制系统？！所以我不确定我是否理解你为什么不想安装一个。您可以很容易地实现本地版本的 SVN/CVS 并通过您的应用程序在其中连接（例如添加新文件，删除旧文件）。这可以使用计划任务或其他东西定期完成。

我还没有听说过你可以使用的其他“简单”的东西。我猜是因为它已经完成了；）那么为什么要重新创建轮子...

我想你可以看看一个开源备份软件包。他们必须有一些逻辑来跟踪用于增量备份的文件更改。他们可能不跟踪文件更改虽然..

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-10-09T14:59:07.650

这是一个解决方案：

使用颠覆本地存储库并使用计划任务，该任务将定期提交您的文件（每小时一次？）

一个简单的例子：

您要跟踪的目录： **c:\tracking_dir**

您存储差异数据和其他历史信息的目录： **c:\repository**

1.  svnadmin 创建 c:\repository
2.  svn co file:///c:/repository c:\tracking_dir\
3.  设置应运行此命令的计划任务：

    svn add c:\tracking_dir*.*
    svn ci c:\tracking_dir*.* -m"通过计划任务自动提交"

这样，您就有了一个正在运行的示例，并且可以通过任何颠覆前端访问历史记录

# macos - Mac OS X Leopard 上的 Emacs 键绑定

> ID：162896
> 
> 赞同：106
> 
> 时间：2008-10-02T15:12:57.597
> 
> 标签：macos, emacs, keyboard-shortcuts, key-bindings

我是 Mac 用户，我决定学习 Emacs。我已经[读过](http://steve.yegge.googlepages.com/effective-emacs)，为了减少手部压力并提高准确性，应该交换`CTRL`和键。`CAPS LOCK`我如何在 Leopard 中执行此操作？

此外，在终端中，我必须使用`ESC`密钥来调用元。有没有办法让 alt/option 键来调用元？

**更新：**虽然现在控制键更容易按下，但元键也经常使用，它在我的 MacBook 和 Apple 键盘上的位置也值得关注。事实上，我发现控制键实际上更容易被击中，所以我重新映射了我的控制键以充当元键。有没有人有更好/更标准的解决方案？

* * *

## 回答 #1

> 赞同：166
> 
> 时间：2008-10-02T15:14:23.507

**交换 CTRL 和 CAPS LOCK**

1.  进入*系统偏好设置*
2.  进入*键盘和鼠标*首选项窗格
3.  在*键盘*选项卡中，单击*修饰键...*
4.  交换*Caps Lock*和*Control*的操作。

![替代文字](https://i.stack.imgur.com/G8MFP.png)

**使用 ALT/OPTION 作为 META**

1.  在菜单栏中，单击*终端*
2.  单击*首选项...*
3.  在*设置*选项卡下，转到*键盘*选项卡
4.  选中标有*使用选项作为元键的框*

![替代文字](https://i.stack.imgur.com/F7vfP.png)

**就是这样！您应该正在成为 Emacs 大师的路上顺利！**

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2009-01-11T23:45:53.000

## 作为参考，这里是用于移动文本的键绑定：

`⌥</kbd> + `←</kbd> - move left one word
`⌥</kbd> + `→</kbd> - move right one word
`⌥</kbd> + `delete` - back delete one word
`Shift` + `⌥</kbd> + `delete` - foward delete one word
`⌥</kbd> + `↑</kbd> - move up one paragraph
`⌥</kbd> + `↓</kbd> - move down one paragraph
`⌘</kbd> + `←</kbd> - move to start of current line
`⌘</kbd> + `→</kbd> - move to end of current line
**`Shift` + any of the above extend selection by appropriate amount**``````````````

单击然后拖动 - 选择文本
双击然后拖动 - 选择文本，换行到单词结尾
三击然后拖动 - 选择文本，换行到段落结尾

`Shift`+用鼠标选择文本 - 添加到选择（连续）
`⌘</kbd> + Select text with mouse - add to selection (non-contiguous)
`⌥</kbd> + Drag - select rectangular area (non-contiguous)
`⌘</kbd> + `⌥</kbd> + drag - add rectangular area to selection
Drag selection - move text
`⌥</kbd> + drag selection - copy text````` 

`Ctrl`+ `A`- 移动到当前段落的开头
`Ctrl`+ `B`- 向左移动一个字符
`Ctrl`+ `D`- 向前删除
`Ctrl`+ `E`- 移动到当前段落的末尾
`Ctrl`+ `F`- 向右移动一个字符
`Ctrl`+ `H`- 删除
`Ctrl`+ `K`- 删除当前段落的其余部分
`Ctrl`+ `L`- 将窗口居中在当前line
`Ctrl`+ `N`- 下移一行
`Ctrl`+ `O`- 在光标后插入新行
`Ctrl`+ `P`- 上移一行
`Ctrl`+ `T`- 转置（交换）两个周围的字符
`Ctrl`+ `V`- 移到结尾，然后左移一个字符
`Ctrl`+ `Y`- 粘贴之前删除的文本`Ctrl`-`K`

添加`Option`到`Ctrl`+`F`或`Ctrl`+`B`以一次移动一个单词而不是一个字符。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2008-10-02T16:05:16.317

另一个答案非常完整，但另外我要提到我只是将大写锁定键设置为第二个控制键，而不是交换它们。

此外，您会注意到 Mac OS X 中的大多数文本输入字段已经接受 emacs 击键（^A 行首、^E 行尾、^P、^N、^K、^Y 等）

祝你好运

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2010-12-04T17:12:48.463

我真的很喜欢 Kyle Cronin 提供的答案，但我想补充一件事 - 确保您选择合适的键盘以使其正常工作。如果您的笔记本电脑插入了外接键盘，那么还有一个额外的下拉框，您需要为两个键盘（或至少为您的外接键盘）执行此操作。下面的屏幕截图显示了“选择键盘”对话框——我选择了“联合 Mac 键盘”，这是 MacBook 对 GoldTouch 外接键盘的说法——默认是内置键盘。
![屏幕截图显示](https://i.stack.imgur.com/YvovM.png)

一旦我想通了——这对我很有用！

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2008-11-11T20:01:53.587

如果您通过 ssh 连接或通过不在本地计算机上的机器使用 emacs，则向上/向下翻页按钮会滚动终端缓冲区 - 根据我的经验，并没有太大帮助。

您可以设置向下翻页和向上翻页按钮以将适当的命令发送到 emacs。在 emacs 中，您可以像这样滚动浏览 emacs 缓冲区：

*   上一页：Ctl-v
*   向下翻页：Esc-v

因此，要让终端将这些命令发送到 emacs，请按照上面的说明更改 Meta 的 Alt 键。但是，不要设置“将选项用作元”选项，而是找到“向下翻页”和“向上翻页”选项。

**向下翻页**

双击“向下翻页”选项进行编辑。**将Action**更改为**“将字符串发送到 shell”**并输入**\026**作为字符串。保存。

**向上翻页**

双击“向上翻页”按钮进行编辑。**将Action**更改为**“将字符串发送到 shell”**并输入**\033v**作为字符串。保存。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2008-11-11T22:53:11.277

不确定您是否完全习惯从终端使用 Emacs，但另一种选择是使用 Carbon Emacs（我最喜欢的）和 Aquamacs（非常类似于 Mac）。Carbon Emacs 对 meta 使用 command 键，这很好，因为您可以通过按住 Control 和 Command 来执行 Control-Meta 命令，而不是先按 Escape 然后按 Control 键序列。

此外，如果您是一个认真的 Emacs 用户，我强烈建议您使用适合编程的键盘（即完全可自行重新编程的键盘）。我用的是 Kinesis，它有点小钱，但它们非常耐用而且非常好。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2010-04-29T15:39:23.837

就我个人而言，我设置了 caps lock 以在系统首选项上表现得像命令，然后在我的 emacs init.el 文件上具有：

(setq mac-command-modifier 'ctrl)

这让我可以在大多数 osx 应用程序中使用 caps lock 作为命令，并在 emacs 中作为控件使用。对我来说效果很好。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2014-02-06T21:36:42.263

你的快乐才刚刚开始。其他技巧包括：

*   使用左右 shift 键也可以是 ( 和 ) 进行快速打字。
*   将您的 fn 键或其他键重新映射为“超级”。
*   控制大写锁定，但只能使用另一个键。它本身就是逃避。

阅读[http://stevelosh.com/blog/2012/10/a-modern-space-cadet/](http://stevelosh.com/blog/2012/10/a-modern-space-cadet/)上的优秀文章，了解更多信息。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2013-10-27T04:50:23.097

该线程是 5 年前开始的，没有提及`ns-win.el`或 build `--with-ns`。以下是截至 2013 年 10 月 Emacs Trunk 中可用的所有键绑定（开箱即用）。当然，您可以创建自己的。就我个人而言，我`init.el`的所有键绑定都可以通过 OSX 上的 Parallels 与 Windows XP 一起使用，也可以与 OSX 本机一起使用。由于用户可以定义他/她自己的键盘快捷键，我认为不需要在系统偏好设置中重新映射键盘（使用 Apple 美国键盘）*，除非*使用不包括 Command 键的键盘。但是，我会扔掉那些内置了 trackpoint 的 IBM clicky 键盘吗？当然不是。:) 我带着我的 IBM clicky 键盘进入下一个生活。任何手部拉伤很可能是由不正确的手腕/手臂/肘部位置引起的，而不是由于击中控制与大写锁定。通过练习提高准确性，并在老板的帮助下看着你的肩膀，看看你的进展如何——即，提高工作效率的一点压力:)

```
(define-key global-map [?\s-,] 'customize)
(define-key global-map [?\s-'] 'next-multiframe-window)
(define-key global-map [?\s-`] 'other-frame)
(define-key global-map [?\s-~] 'ns-prev-frame)
(define-key global-map [?\s--] 'center-line)
(define-key global-map [?\s-:] 'ispell)
(define-key global-map [?\s-?] 'info)
(define-key global-map [?\s-^] 'kill-some-buffers)
(define-key global-map [?\s-&] 'kill-this-buffer)
(define-key global-map [?\s-C] 'ns-popup-color-panel)
(define-key global-map [?\s-D] 'dired)
(define-key global-map [?\s-E] 'edit-abbrevs)
(define-key global-map [?\s-L] 'shell-command)
(define-key global-map [?\s-M] 'manual-entry)
(define-key global-map [?\s-S] 'ns-write-file-using-panel)
(define-key global-map [?\s-a] 'mark-whole-buffer)
(define-key global-map [?\s-c] 'ns-copy-including-secondary)
(define-key global-map [?\s-d] 'isearch-repeat-backward)
(define-key global-map [?\s-e] 'isearch-yank-kill)
(define-key global-map [?\s-f] 'isearch-forward)
(define-key global-map [?\s-g] 'isearch-repeat-forward)
(define-key global-map [?\s-h] 'ns-do-hide-emacs)
(define-key global-map [?\s-H] 'ns-do-hide-others)
(define-key global-map [?\s-j] 'exchange-point-and-mark)
(define-key global-map [?\s-k] 'kill-this-buffer)
(define-key global-map [?\s-l] 'goto-line)
(define-key global-map [?\s-m] 'iconify-frame)
(define-key global-map [?\s-n] 'make-frame)
(define-key global-map [?\s-o] 'ns-open-file-using-panel)
(define-key global-map [?\s-p] 'ns-print-buffer)
(define-key global-map [?\s-q] 'save-buffers-kill-emacs)
(define-key global-map [?\s-s] 'save-buffer)
(define-key global-map [?\s-t] 'ns-popup-font-panel)
(define-key global-map [?\s-u] 'revert-buffer)
(define-key global-map [?\s-v] 'yank)
(define-key global-map [?\s-w] 'delete-frame)
(define-key global-map [?\s-x] 'kill-region)
(define-key global-map [?\s-y] 'ns-paste-secondary)
(define-key global-map [?\s-z] 'undo)
(define-key global-map [?\s-|] 'shell-command-on-region)
(define-key global-map [s-kp-bar] 'shell-command-on-region)
;; (as in Terminal.app)
(define-key global-map [s-right] 'ns-next-frame)
(define-key global-map [s-left] 'ns-prev-frame)

(define-key global-map [home] 'beginning-of-buffer)
(define-key global-map [end] 'end-of-buffer)
(define-key global-map [kp-home] 'beginning-of-buffer)
(define-key global-map [kp-end] 'end-of-buffer)
(define-key global-map [kp-prior] 'scroll-down-command)
(define-key global-map [kp-next] 'scroll-up-command)

;; Allow shift-clicks to work similarly to under Nextstep.
(define-key global-map [S-mouse-1] 'mouse-save-then-kill)
(global-unset-key [S-down-mouse-1]) 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2008-10-20T16:22:58.370

（不是符合人体工学的键盘，但我真的很喜欢按键的行程和感觉，而且 Control 键、Caps Lock 被交换了）。

[http://matias.ca/osxkeyboard/index.php](http://matias.ca/osxkeyboard/index.php)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-03-10T21:54:36.847

[我在这里](https://github.com/cohenaarone/mac_osx_emacs_keybindings)创建了一套相当全面的绑定，以供在终端*之外使用。*

就个人而言，由于没有正确的控制键，我无法使用 mac 笔记本电脑键盘。

相反，我已经使用[Microsoft Natural Ergonomic Keyboard 4000](https://rads.stackoverflow.com/amzn/click/com/B000A6PPOK)超过 7 年了：它真的很胖，Ctrl 和 Alt 键的位置很好，[下载驱动程序](http://www.microsoft.com/hardware/en-us/p/natural-ergonomic-keyboard-4000#support)后，“开始”和“应用程序”键很容易重新映射到 Mac Cmd键，也很胖，容易郁闷。

为了避免 emacs 人体工程学问题，我训练自己使用 Ctrl、Alt 和 Cmd，就像我们使用 Shift 一样——用与键入实际键的手相反的手按下它们。（也就是说，我只是保持 Caps Lock 不变。）

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-02-25T00:34:34.710

我将 caps lock 设置为控制系统首选项，并且在我的 init.el 中有以下内容将命令设置为 meta 并将选项设置为 super：

```
(custom-set-variables
 '(ns-alternate-modifier (quote super))
 '(ns-command-modifier (quote meta))) 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-03-25T04:56:12.280

我想推荐 2 个软件 [Seil](https://pqrs.org/osx/karabiner/seil.html.en)和[Karabiner](https://pqrs.org/osx/karabiner/)。通过简单地安装 Seil 并按照软件中的说明进行操作，您应该能够实现您想要的。根据我的经验，Karabiner 更强大。我有一个日文键盘，其布局与普通键盘不同。我有一些[片段](https://gist.github.com/MinweiShen/ee7538dfff14d1359343)将我键盘上的两个额外键重新映射到 F18 和 F19 以供其他用途。您可以使用相同的语法来编辑您的“private.xml”文件以执行更多操作。

# .net - C# 中的元帅“char *”

> ID：162897
> 
> 赞同：24
> 
> 时间：2008-10-02T15:12:59.627
> 
> 标签：.net, pinvoke, marshalling

给定 DLL 中的以下 C 函数：

```
char * GetDir(char* path ); 
```

您将如何将这个函数 P/Invoke 到 C# 中并正确编组 char *。.NET 似乎知道如何执行 LPCTSTR，但是当我无法弄清楚在调用此函数时不会导致 NotSupportedException 触发的任何封送处理时。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2008-10-02T17:32:45.250

OregonGhost 的答案只有在从 GetDir 返回的 char* 在 HGlobal 或 LocalAlloc 中分配时才是正确的。我不记得是哪一个，但 CLR 会假定来自 PInvoke 函数的任何字符串返回类型都分配有一个或另一个。

一种更稳健的方法是将 GetDir 的返回值键入为 IntPtr。然后，您可以使用任何 Marshal.PtrToStringAnsi 函数来获取字符串类型。它还为您提供了以您选择的方式释放字符串的灵活性。

```
 [DllImport("your.dll", CharSet = CharSet.Ansi)]
IntPtr GetDir(StringBuilder path); 
```

您能否就 GetDir 的行为给我们任何其他提示？它会修改输入字符串吗？返回的值是如何分配的？如果你能提供，我可以给出更好的答案。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2008-10-02T15:16:29.087

尝试

```
[DllImport("your.dll", CharSet = CharSet.Ansi)]
string GetDir(StringBuilder path); 
```

string 会自动编组为以零结尾的字符串，并且使用 CharSet 属性，您可以告诉 Marshaller 它应该使用 ANSI 而不是 Unicode。注意：对 const char* 使用字符串（或 System.String），对 char* 使用 StringBuilder。

您也可以尝试 MarshalAs，如[本例所示](http://www.pinvoke.net/default.aspx/kernel32.GetShortPathName)。

# java - 如何从 Wicket 中的 JavaScript 代码调用 Java 代码？

> ID：162911
> 
> 赞同：15
> 
> 时间：2008-10-02T15:14:34.803
> 
> 标签：java, javascript, wicket

如果我能做到这一点，我如何在 Wicket 中的 JavaScript 代码中调用 Java 代码（例如方法）。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-07-18T07:15:04.790

呃。正确的答案是 ajax 回调。您可以手动编写 js 代码以连接到 wicket js，也可以在 java 中设置来自 wicket 组件的回调。例如，来自 AjaxLazyLoadPanel：

```
 component.add( new AbstractDefaultAjaxBehavior() {

        @Override
        protected void respond(AjaxRequestTarget target) {
            // your code here
        }

        @Override
        public void renderHead(IHeaderResponse response) {
            super.renderHead( response );
            response.renderOnDomReadyJavascript( getCallbackScript().toString() );
        }

        } 
```

此示例显示如何将回调代码添加到 Wicket 中的任何组件。在您的浏览器中触发 OnDomReady 事件后，当加载页面时，Wicket 将导致它的 js 引擎，使用 Ajax 回调您的代码到上面显示的“响应”方法，此时您可以在服务器，并可能将组件添加到要重新渲染的 ajax 目标。

要从 js 手动执行此操作，您可以通过将 getCallbackScript().toString() 打印到 wicket 组件上的属性来连接到 wicket 的系统，然后您就可以从 js 访问该属性。使用 wicket-ajax.js 中的 wicket wicketAjaxGet 从 js 手动调用此 url。

查看邮件列表，了解有关此主题的大量对话：http: [//www.nabble.com/Wicket-and-javascript-ts24336438.html#a24336438](http://www.nabble.com/Wicket-and-javascript-ts24336438.html#a24336438)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2010-08-26T04:59:12.873

摘自[https://cwiki.apache.org/WICKET/calling-wicket-from-javascript.html](https://cwiki.apache.org/WICKET/calling-wicket-from-javascript.html)

如果您将任何扩展 AbstractDefaultAjaxBehavior 的类添加到您的页面，wicket-ajax.js 将被添加到您的网页的标题中。wicket-ajax.js 为您提供了两种调用组件的基本方法：

```
function wicketAjaxGet(url, successHandler, failureHandler, precondition, channel) 
```

和

```
function wicketAjaxPost(url, body, successHandler, failureHandler, precondition, channel) 
```

这是一个例子：

JavaScript

```
function callWicket() {
   var wcall = wicketAjaxGet('$url$' + '$args$', function() { }, function() { });
} 
```

`$url$`是从方法中得到的`abstractDefaultAjaxBehavior.getCallbackUrl()`。如果您将从该方法返回的字符串粘贴到浏览器中，您将调用响应方法，这同样适用于 javascript 方法。

您可以选择通过将参数附加到 URL 字符串来添加参数。他们采取的形式`&foo=bar`。

您可以像这样在 Java 响应方法中获得可选参数：

```
Map map = ((WebRequestCycle) RequestCycle.get()).getRequest().getParameterMap(); 
```

或这个：

```
String paramFoo = RequestCycle.get().getRequest().getParameter("foo"); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-10-02T16:01:46.497

[http://www.wicket-library.com/wicket-examples-6.0.x/index.html/](http://www.wicket-library.com/wicket-examples-6.0.x/index.html/)有很多例子可以帮助你前进。

或者看看 DWR

[http://directwebremoting.org/](http://directwebremoting.org/)

DWR 允许浏览器中的 Javascript 与服务器上的 Java 交互，并帮助您使用结果操作网页。

正如 Dorward 提到的，这是通过 AJAX 完成的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-02T15:30:30.940

假设您的意思是在客户端上运行 JavaScript - 您会导致对服务器进行 HTTP 重定向，并让您的 servlet 对给定 URL 的请求做出反应。

这被称为[Ajax](http://www.jibbering.com/2002/4/httprequest.html)，并且有[许多](http://developer.yahoo.com/yui/connection/)库[可以](http://docs.jquery.com/Ajax)帮助您做到这一点。

# sql-server-2005 - SQL Server 2005 加密触发器

> ID：162915
> 
> 赞同：0
> 
> 时间：2008-10-02T15:15:17.327
> 
> 标签：sql-server-2005, encryption, types

我有一个成功加密信用卡的脚本。我需要它作为触发器工作，以便对信用卡列所做的任何插入都会自动对其进行加密。现在，我的触发器有效，但信用卡列是 varchar。当应用程序尝试插入时，我会这样做：

```
声明 @encryptedCreditCardNumber varbinary(max)
SET @encryptedCreditCardNumber = EncryptByKey(Key_GUID('testKey'), @CreditCardNumber));

```

这很好用，但是我如何将 varbinary(max) 转换为 varchar （这是信用卡列的内容）。在我的公司，信用卡列长期以来一直是 varchar，许多遗留代码都依赖于它是 varchar。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-02T15:57:06.587

您最简单的方法是将二进制转换为 base64 并将其存储在 varchar 列中。Base64 是一种使用 ascii 编码呈现二进制数据的方法，以便可以用 XML 等格式表示。您可以通过以下方式执行转换：

```
select cast(N'' as xml).value('xs:base64Binary(xs:hexBinary(sql:variable("@encryptedCreditCardNumber")))', 'varchar(max)'); 
```

这通过 XML 中介将 varbinary 正确编码为 varchar。要反转数据库上的过程，请使用：

```
select cast(N'' as xml).value('xs:base64Binary(sql:variable("@base64stringvariable"))', 'varbinary(20)'); 
```

**编辑**：有用的参考 - [http://blogs.msdn.com/sqltips/archive/2008/06/30/converting-from-base64-to-varbinary-and-vice-versa.aspx](http://blogs.msdn.com/sqltips/archive/2008/06/30/converting-from-base64-to-varbinary-and-vice-versa.aspx)

# http - 如何在不关闭连接的情况下通过分块的 http 响应中途报告错误？

> ID：162917
> 
> 赞同：3
> 
> 时间：2008-10-02T15:15:36.220
> 
> 标签：http, soap

我有一个 HTTP 服务器，它返回大型正文以响应 POST 请求（它是一个 SOAP 服务器）。这些主体通过分块“流式传输”。如果我在流式传输响应的过程中遇到错误，我如何向客户端报告该错误并仍然保持连接打开？该实现使用专有的 HTTP/SOAP 堆栈，因此我对 HTTP 协议级别的答案感兴趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-02T21:27:28.727

一旦服务器将状态行（响应的第一行）发送到客户端，您就不能再更改响应的状态代码。许多服务器通过在内部缓冲响应来延迟发送响应，直到缓冲区已满。当缓冲区填满时，您仍然可以改变对响应的看法。

如果您的客户端可以访问响应标头，则可以使用分块编码允许服务器在分块编码主体之后添加带有标头的预告片这一事实。因此，遇到错误的服务器可以优雅地停止发送正文，然后发送一个将某些标头设置为某个值的预告片。然后，您的客户会将此标头的存在解释为发生错误的标志。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-02T21:38:41.087

还要记住，分块响应可以包含[“页脚”](http://www.jmarshall.com/easy/http/#http1.1c2)，就像 HTTP 标头一样。失败后，您可以发送页脚，例如：

```
X-RealStatus：500 发生了一些不好的事情
```

或者如果你成功了：

```
X-RealStatus: 200 OK
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-02T21:33:46.153

只要 response.iscommitted() 返回 false，您就可以更改状态代码。（在 java 中使用 HttpServletResponse，我确定在其他语言中存在等价物）

# sql - 在 SQL Server 2005 中生成多个 SQL 任务

> ID：162919
> 
> 赞同：2
> 
> 时间：2008-10-02T15:15:59.667
> 
> 标签：sql, sql-server, sql-server-2005, automation, parallel-processing

我有许多存储的过程，我希望它们都在服务器上同时运行。理想情况下，所有内容都在服务器上，而不依赖与外部客户端的连接。

有哪些选项可以启动所有这些并让它们同时运行（我什至不需要等到所有流程都完成后才能完成额外的工作）？

我曾想过：

*   从客户端启动多个连接，每个连接都启动相应的 SP。
*   为每个 SP 设置作业并从 SQL Server 连接或 SP 启动作业。
*   使用 xp_cmdshell 启动与 osql 或 whetever 等效的附加运行
*   SSIS - 我需要查看是否可以动态编写包以处理更多 SP，因为我不确定我的客户将获得多少访问权限

在工作和 cmdshell 的情况下，我可能会遇到来自 DBA 的权限级别问题......

SSIS 可能是一个不错的选择 - 如果我可以驱动 SP 列表。

这是一个数据仓库的情况，工作很大程度上是独立的，NOLOCK在星星上普遍使用。该系统是一个 8 路 32GB 的机器，所以如果我发现问题，我将加载它并缩小它。

我基本上有三层，第 1 层有少量进程，并且基本上取决于已经加载的所有事实/维度（有效，星星是第 0 层 - 是的，不幸的是它们都需要加载），层2 有许多依赖于第 1 层的部分或全部的进程，第 3 层有许多依赖于第 2 层的部分或全部的进程。我已经在表中有依赖关系，并且只会在最初启动所有procs 同时在特定层中，因为它们在层内是正交的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-02T15:21:19.280

SSIS 适合您吗？您可以创建一个包含并行执行 SQL 任务的简单包，以同时执行存储的过程。但是，取决于您的存储过程所做的事情，您可能会或可能不会从并行启动中受益（例如，如果它们都访问相同的表记录，则可能必须等待锁被释放等）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-03T16:09:30.727

有一次，我在一个名为[Acumen Advantage](http://www.roomsolutions.net/insurance-software/data-warehouse/acumen-advantage.aspx)的产品上做了一些架构工作，它有一个仓库经理来做这件事。

基本策略是拥有一个包含存储过程及其依赖项列表的控制数据库。根据依赖关系，您可以进行[拓扑排序](http://en.wikipedia.org/wiki/Topological_sorting)以给它们一个运行顺序。如果这样做，您需要管理依赖关系 - 存储过程的所有前导都必须在它执行之前完成。仅在多个线程上按顺序启动存储过程本身不会完成此操作。

实现这一点意味着要打破大部分 SSIS 功能并实现另一个调度程序。这对于产品来说是可以的，但对于定制系统来说可能有点过分了。因此，一个更简单的解决方案是：

*您可以通过按维度（有时称为面向主题*的 ETL）垂直组织 ETL，在更粗粒度的级别上管理依赖关系，其中单个 SSIS 包和一组存储过程将数据从提取到生成维度或事实表。通常，维度大多是孤立的，因此它们的相互依赖性最小。在存在相互依赖关系的情况下，使一维（或事实表）加载过程依赖于上游所需的任何内容。

每个加载器都变得相对模块化，您仍然可以通过并行启动加载过程并让 SSIS 调度程序解决它来获得有用的并行度。依赖项将包含一些冗余。例如，ODS 表可能不依赖于正在完成的维度加载，但上游包本身在完成之前将组件直接带到维度模式。然而，这在实践中不太可能成为问题，原因如下：

*   加载过程可能有很多其他任务可以同时执行
*   最需要资源的任务几乎肯定是事实表加载，它们大多不会相互依赖。如果存在依赖关系（例如基于另一个表内容的汇总表），无论如何都无法避免。

您可以构建 SSIS 包，以便它们从 XML 文件中获取所有配置，并且可以在环境变量中外部提供位置。这种事情可以很容易地用像 Control-M 这样的调度系统来实现。这意味着可以部署修改后的 SSIS 包，而手动干预相对较少。生产人员可以将要部署的包与存储过程一起交给生产人员，并且可以在每个环境的基础上维护配置文件，而无需手动调整 SSIS 包中的配置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-05T18:05:54.860

您可能想查看服务代理及其激活存储过程...可能是一种选择...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-02-23T21:33:22.930

最后，我创建了一个 C# 管理控制台程序，该程序启动异步进程，因为它们能够运行并跟踪连接。

# crystal-reports - 在 Crystal Reports 公式字段中使用 ToText 格式化字段

> ID：162931
> 
> 赞同：10
> 
> 时间：2008-10-02T15:17:49.567
> 
> 标签：crystal-reports

我正在尝试创建一个 Crystal Reports 公式字段（用于计算价格的百分比变化），如果特定的报告字段为空，它将返回“N/A”，但使用会计格式将数字返回到小数点后两位（负括号括起来的数字）如果不是。

我能够管理的最接近的是：

```
If IsNull({ValuationReport.YestPrice}) Then
    'N/A'
Else
    ToText({@Price}/{ValuationReport.YestPrice}*100-100, '###.00', 2) 
```

但是，这表示使用负号而不是括号的负数。

我尝试了像 '###.00;(###.00)' 和 '(###.00)' 这样的格式字符串，但这些被拒绝为无效。我怎样才能实现我的目标？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-10-02T15:29:02.163

我想你正在寻找`ToText(CCur(@Price}/{ValuationReport.YestPrice}*100-100))`

您可以使用`CCur`将数字或字符串转换为货币格式。 `CCur(number)`或者`CCur(string)`

* * *

我想这可能是你正在寻找的，

`Replace (ToText(CCur({field})),"$" , "")` 这将给出负数的括号

这有点hacky，但我不确定CR在格式化方式上是否非常友好

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-27T04:38:22.037

```
if(isnull({uspRptMonthlyGasRevenueByGas;1.YearTotal})) = true then
   "nd"
else
    totext({uspRptMonthlyGasRevenueByGas;1.YearTotal},'###.00') 
```

上面的逻辑应该是你要找的。

# c# - WinForms 中的只读组合框

> ID：162936
> 
> 赞同：26
> 
> 时间：2008-10-02T15:18:21.750
> 
> 标签：c#, winforms, combobox, readonly

我正在使用 Designer 和 WinForms 在 C#、Visual Studio 2008 中编写 GUI。我有一个 ComboBox 控件，我希望它只允许从提供的选项中进行选择，而不接受用户输入的字符串。它似乎没有 ReadOnly 属性，并且禁用它会妨碍控件的可读性（以及不允许用户选择）。

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2008-10-02T15:19:52.793

将 DropDownStyle 设置为“DropDownList”

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-10-02T15:20:46.020

将 ComboBox.DropDownStyle 属性设置为 ComboBoxStyle.DropDownList。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-10-02T15:27:35.287

使用类似于以下的代码来设置允许的选项并且仅设置那些选项。

```
comboBox1.DropDownStyle = ComboBoxStyle.DropDownList;
comboBox1.Items.AddRange(new object[] {
    "One",
    "Two",
    "Three",
    "Four"}); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-28T08:28:01.883

另一种简单的方法。

```
private void combobox1_KeyPress(object sender, KeyPressEventArgs e)
{
    e.Handled = true;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-02T15:20:03.493

尝试使用 DropDownListbox

# web-services - 是否可以使用 Cobol 程序中的 Web 服务？

> ID：162940
> 
> 赞同：3
> 
> 时间：2008-10-02T15:19:16.537
> 
> 标签：web-services, integration, communication, cobol

我们的金融应用程序中有一些 COBOL 程序需要与我们的一些后端系统进行交互。可用接口之一是通过 Web 服务。用 Cobol 编写的程序可以向 Web 服务发出请求吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-28T01:22:10.517

[Microfocus](http://www.microfocus.com/)提供了一个名为 Enterprise Server 的工具，它允许 COBOL 与 Web 服务进行交互。

如果您有一个 COBOL 程序 A 和另一个 COBOL 程序 B 并且 A 通过接口部分调用 B，则该工具允许您将 B 的接口部分公开为 Web 服务。

对于程序 A，然后生成客户端代理，A 现在可以通过 Web 服务调用 B。

当然，因为 B 现在有一个 Web 服务，任何其他类型的程序（命令行、Windows 应用程序、Java、ASP 等）现在也可以调用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-02T15:55:56.357

我从未使用过 COBOL，但从快速的谷歌搜索来看，它看起来是可能的。

[这](http://www.ibm.com/developerworks/systems/library/es-webservicesrpg/#N10154)看起来会有所帮助，并讨论通过 c 代码将 web 服务与 cobol 集成。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-27T12:51:35.563

这是在什么平台上的？IBM 的 CICS 通过 EXEC CICS INVOKE 支持来自 cobol 程序的 web 服务调用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-02T08:35:34.520

ibm 现在正在尝试使用 java 实现一种称为嵌入式 websphere 的技术。ibm 相信这是赋予大型机生命的唯一途径。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-10T11:35:31.140

我知道我可以用 Delphi 编写 WebService 并调用 COBOL DLL 或调用 Delphi dll 来与 webservice 通信。

现在我正在编写一个 web 服务客户端，它将是一个 DLL，并且会从旧的 COBOL 系统调用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-06T22:34:09.253

如果您拥有并且正在使用 CICS，那么它具有用于此目的的内置机制。但是假设由于某种原因您不能使用它，您可以使用 IBM TCP/IP 'EZASOKET' 模块构建一个 HTTP 客户端。

我在一家拥有主要运行 COBOL、批处理 (JCL) 和 CICS 的 z/OS 系统的公司工作。为了调用 web 服务，我们编写了一个模块来使用 TCP/IP 实现 HTTP 1.0。带模块

*   伊萨索克
    *   GETHOSTBYNAME
    *   插座
    *   连接
    *   写
    *   FCNTL
    *   读
    *   关闭
    *   选择

补充模块：

*   EZACIC04 将 EBCDIC 转换为 ASCII
*   EZACIC05 将 ASCII 转换为 EBCDIC
*   EZACIC06 将字符转换为位掩码
*   EZACIC08解码IP地址

由于我是为我的公司编写的，所以我不能只给出代码。但作为参考，我花了 3 天时间来编写模块（后来加上一点调试），这是从一个例子开始的，它做了一个部分 hacky 的方式。

您需要通读 IBM 的参考资料以了解如何使用 EZA 模块。

*   [http://publib.boulder.ibm.com/infocenter/zos/v1r11/index.jsp?topic=/com.ibm.zos.r11.halc001/sampcs.htm](http://publib.boulder.ibm.com/infocenter/zos/v1r11/index.jsp?topic=/com.ibm.zos.r11.halc001/sampcs.htm)

# c++ - 为什么要使用指针？

> ID：162941
> 
> 赞同：426
> 
> 时间：2008-10-02T15:19:20.140
> 
> 标签：c++, c, pointers

我知道这是一个非常基本的问题，但是在使用高级语言编写了一些项目之后，我才刚刚开始进行一些基本的 C++ 编程。

基本上我有三个问题：

1.  为什么在普通变量上使用指针？
2.  我应该何时何地使用指针？
3.  如何在数组中使用指针？

* * *

## 回答 #1

> 赞同：205
> 
> 时间：2008-10-02T17:25:54.580

*   为什么在普通变量上使用指针？

简短的回答是：不要。;-) 指针将用于您不能使用其他任何东西的地方。要么是因为缺乏适当的功能，缺少数据类型，要么是为了纯粹的性能。下面更多...

*   我应该何时何地使用指针？

简短的回答是：你不能使用其他任何东西。在 C 中，您不支持诸如字符串之类的复杂数据类型。也无法将变量“通过引用”传递给函数。这就是你必须使用指针的地方。你也可以让它们指向几乎任何东西，链表，结构的成员等等。但是，我们不要在这里讨论。

*   如何在数组中使用指针？

用很少的努力和很多混乱。;-) 如果我们谈论简单的数据类型，例如 int 和 char，那么数组和指针之间几乎没有区别。这些声明非常相似（但不一样——例如，`sizeof`将返回不同的值）：

```
char* a = "Hello";
char a[] = "Hello"; 
```

您可以像这样到达数组中的任何元素

```
printf("Second char is: %c", a[1]); 
```

索引 1，因为数组从元素 0 开始。:-)

或者你同样可以这样做

```
printf("Second char is: %c", *(a+1)); 
```

需要指针运算符（*），因为我们告诉 printf 我们要打印一个字符。如果没有 *，将打印内存地址本身的字符表示。现在我们使用角色本身来代替。如果我们使用 %s 而不是 %c，我们会要求 printf 打印 'a' 所指向的内存地址的内容加一（在上面的这个例子中），我们就不必把 *在前：

```
printf("Second char is: %s", (a+1)); /* WRONG */ 
```

但这不会只打印第二个字符，而是打印下一个内存地址中的所有字符，直到找到空字符 (\0)。这就是事情开始变得危险的地方。如果您不小心尝试使用 %s 格式化程序打印整数类型的变量而不是 char 指针怎么办？

```
char* a = "Hello";
int b = 120;
printf("Second char is: %s", b); 
```

这将打印在内存地址 120 上找到的任何内容并继续打印，直到找到空字符。执行这个 printf 语句是错误和非法的，但它可能无论如何都可以工作，因为在许多环境中指针实际上是 int 类型的。想象一下，如果您改用 sprintf() 并将这种方式太长的“char 数组”分配给另一个变量，那么您可能会导致的问题，而该变量只分配了一定的有限空间。您很可能最终会覆盖内存中的其他内容并导致程序崩溃（如果幸运的话）。

哦，如果你在声明它时没有为 char 数组/指针分配一个字符串值，你必须在给它一个值之前为其分配足够的内存量。使用 malloc、calloc 或类似的。这是因为您只在数组中声明了一个元素/一个要指向的内存地址。所以这里有几个例子：

```
char* x;
/* Allocate 6 bytes of memory for me and point x to the first of them. */
x = (char*) malloc(6);
x[0] = 'H';
x[1] = 'e';
x[2] = 'l';
x[3] = 'l';
x[4] = 'o';
x[5] = '\0';
printf("String \"%s\" at address: %d\n", x, x);
/* Delete the allocation (reservation) of the memory. */
/* The char pointer x is still pointing to this address in memory though! */
free(x);
/* Same as malloc but here the allocated space is filled with null characters!*/
x = (char *) calloc(6, sizeof(x));
x[0] = 'H';
x[1] = 'e';
x[2] = 'l';
x[3] = 'l';
x[4] = 'o';
x[5] = '\0';
printf("String \"%s\" at address: %d\n", x, x);
/* And delete the allocation again... */
free(x);
/* We can set the size at declaration time as well */
char xx[6];
xx[0] = 'H';
xx[1] = 'e';
xx[2] = 'l';
xx[3] = 'l';
xx[4] = 'o';
xx[5] = '\0';
printf("String \"%s\" at address: %d\n", xx, xx); 
```

请注意，在对分配的内存执行 free() 后，您仍然可以使用变量 x，但您不知道其中有什么。另请注意，这两个 printf() 可能会为您提供不同的地址，因为不能保证第二次内存分配与第一次在同一空间中执行。

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2008-10-02T15:45:08.550

使用指针的一个原因是可以在被调用函数中修改变量或对象。

在 C++ 中，使用引用比使用指针更好。尽管引用本质上是指针，但 C++ 在某种程度上隐藏了这一事实，使您看起来好像是按值传递。这使得更改调用函数接收值的方式变得容易，而无需修改传递它的语义。

考虑以下示例：

使用参考：

```
public void doSomething()
{
    int i = 10;
    doSomethingElse(i);  // passes i by references since doSomethingElse() receives it
                         // by reference, but the syntax makes it appear as if i is passed
                         // by value
}

public void doSomethingElse(int& i)  // receives i as a reference
{
    cout << i << endl;
} 
```

使用指针：

```
public void doSomething()
{
    int i = 10;
    doSomethingElse(&i);
}

public void doSomethingElse(int* i)
{
    cout << *i << endl;
} 
```

* * *

## 回答 #3

> 赞同：45
> 
> 时间：2008-10-02T15:24:38.787

1.  指针允许您从多个位置引用内存中的相同空间。这意味着您可以在一个位置更新内存，并且可以从程序中的另一个位置看到更改。您还可以通过共享数据结构中的组件来节省空间。
2.  您应该在需要获取地址并将地址传递到内存中特定位置的任何地方使用指针。您还可以使用指针来导航数组：
3.  数组是分配有特定类型的连续内存块。数组的名称包含数组起始点的值。当您添加 1 时，您将进入第二个位置。这允许您编写循环来增加一个向下滑动数组的指针，而无需使用显式计数器来访问数组。

这是 C 语言中的一个示例：

```
char hello[] = "hello";

char *p = hello;

while (*p)
{
    *p += 1; // increase the character by one

    p += 1; // move to the next spot
}

printf(hello); 
```

印刷

```
ifmmp 
```

因为它获取每个字符的值并将其加一。

* * *

## 回答 #4

> 赞同：31
> 
> 时间：2008-10-02T15:22:28.667

指针是间接引用另一个变量的一种方式。他们没有保存变量的*值*，而是告诉你它的*地址*。这在处理数组时特别有用，因为使用指向数组中第一个元素（其地址）的指针，您可以通过递增指针（指向下一个地址位置）快速找到下一个元素。

我读过的关于指针和指针算术的最好解释是在 K&R 的[The C Programming Language](https://rads.stackoverflow.com/amzn/click/com/0131103628)中。开始学习 C++ 的一本好书是[C++ Primer](https://rads.stackoverflow.com/amzn/click/com/0201824701)。

* * *

## 回答 #5

> 赞同：25
> 
> 时间：2013-05-30T21:19:57.777

让我也试着回答一下。

指针类似于引用。换句话说，它们不是副本，而是一种引用原始值的方式。

首先，**您通常需要大量使用指针**的地方是处理**嵌入式硬件**时。也许您需要切换数字 IO 引脚的状态。也许您正在处理中断并需要在特定位置存储一个值。你得到图片。但是，如果您不直接处理硬件并且只是想知道要使用哪些类型，请继续阅读。

为什么使用指针而不是普通变量？当您处理复杂类型（如类、结构和数组）时，答案会变得更加清晰。如果您要使用普通变量，您最终可能会创建一个副本（编译器足够聪明，可以在某些情况下防止这种情况发生，C++11 也有帮助，但我们暂时不讨论该讨论）。

现在如果你想修改原始值会发生什么？你可以使用这样的东西：

```
MyType a; //let's ignore what MyType actually is right now.
a = modify(a); 
```

这会很好用，如果你不知道为什么要使用指针，你不应该使用它们。当心“他们可能更快”的原因。运行你自己的测试，如果它们确实更快，那么就使用它们。

但是，假设您正在解决需要分配内存的问题。当你分配内存时，你需要释放它。内存分配可能成功也可能不成功。这就是**指针**派上用场的地方——它们**允许您测试**您分配的对象是否存在，并且它们允许您通过取消引用指针来访问分配内存的对象。

```
MyType *p = NULL; //empty pointer
if(p)
{
    //we never reach here, because the pointer points to nothing
}
//now, let's allocate some memory
p = new MyType[50000];
if(p) //if the memory was allocated, this test will pass
{
    //we can do something with our allocated array
    for(size_t i=0; i!=50000; i++)
    {
        MyType &v = *(p+i); //get a reference to the ith object
        //do something with it
        //...
    }
    delete[] p; //we're done. de-allocate the memory
} 
```

这就是为什么你会使用指针的关键——**引用假定你引用的元素已经存在**。指针没有。

您将使用指针（或至少最终不得不处理它们）的另一个原因是因为它们是在引用之前存在的数据类型。因此，如果你最终使用库来做你知道它们更擅长的事情，你会发现很多这些库到处都使用指针，仅仅是因为它们已经存在了多长时间（很多其中一些是在 C++ 之前编写的）。

如果你不使用任何库，你可以设计你的代码，这样你就可以远离指针，但是鉴于指针是语言的基本类型之一，你越快习惯使用它们，越多可移植您的 C++ 技能。

从可维护性的角度来看，我还应该提到，当您确实使用指针时，您要么必须测试它们的有效性并在它们无效时处理这种情况，或者只是假设它们是有效的并接受你的当该假设被打破时，程序将崩溃或更糟。换句话说，**您对指针的选择是在出现问题时引入代码复杂性或更多的维护工作，**并且您试图追踪属于指针引入的整个错误类别的错误，例如内存损坏。

因此，如果您控制所有代码，请远离指针，而是使用引用，尽可能保持它们为 const。这将迫使您考虑对象的生命周期，并最终使您的代码更易于理解。

请记住这个区别：**引用本质上是一个有效的指针。指针并不总是有效的。**

那么我是说不可能创建无效的引用吗？不，它完全有可能，因为 C++ 几乎可以让你做任何事情。无意中更难做到，你会惊讶于有多少错误是无意的:)

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2008-10-02T15:52:57.610

以下是关于 C 的许多功能为何有意义的稍微不同但有见地的看法：http: [//steve.yegge.googlepages.com/tour-de-babel#C](http://steve.yegge.googlepages.com/tour-de-babel#C)

基本上，标准的 CPU 架构是冯诺依曼架构，能够在这样的机器上引用内存中数据项的位置并对其进行算术运算非常有用。如果您了解汇编语言的任何变体，您将很快看到这在低级别是多么重要。

C++ 使指针有点混乱，因为它有时会为您管理它们并以“引用”的形式隐藏它们的效果。如果您使用直接 C，则对指针的需求更加明显：没有其他方法可以进行引用调用，这是存储字符串的最佳方法，它是遍历数组的最佳方法等。

* * *

## 回答 #7

> 赞同：12
> 
> 时间：2008-10-02T16:23:42.390

One use of pointers (I won't mention things already covered in other people's posts) is to access memory that you haven't allocated. This isn't useful much for PC programming, but it's used in embedded programming to access memory mapped hardware devices.

Back in the old days of DOS, you used to be able to access the video card's video memory directly by declaring a pointer to:

```
unsigned char *pVideoMemory = (unsigned char *)0xA0000000; 
```

Many embedded devices still use this technique.

* * *

## 回答 #8

> 赞同：10
> 
> 时间：2008-10-02T15:22:39.620

在很大程度上，指针是数组（在 C/C++ 中）——它们是内存中的地址，如果需要（在“正常”情况下）可以像数组一样访问。

因为它们是一个项目的地址，所以它们很小：它们只占用一个地址的空间。由于它们很小，将它们发送到函数很便宜。然后他们允许该功能在实际项目而不是副本上工作。

如果要进行动态存储分配（例如链表），则必须使用指针，因为它们是从堆中获取内存的唯一方法。

* * *

## 回答 #9

> 赞同：9
> 
> 时间：2008-10-02T15:47:01.247

指针在许多数据结构中很重要，这些数据结构的设计需要能够有效地将一个“节点”链接或链接到另一个“节点”。您不会“选择”指针而不是像浮点这样的普通数据类型，它们只是有不同的用途。

当您需要高性能和/或紧凑的内存占用时，指针很有用。

数组中第一个元素的地址可以分配给一个指针。然后，这允许您直接访问底层分配的字节。数组的全部意义在于避免您需要这样做。

* * *

## 回答 #10

> 赞同：9
> 
> 时间：2012-04-30T06:41:01.287

在变量上使用指针的一种方法是消除所需的重复内存。例如，如果您有一些大型复杂对象，您可以使用一个指针来指向您所做的每个引用的该变量。使用变量，您需要为每个副本复制内存。

* * *

## 回答 #11

> 赞同：7
> 
> 时间：2013-05-30T19:06:02.003

在 C++ 中，如果要使用子类型[多态](http://en.wikipedia.org/wiki/Polymorphism_in_object-oriented_programming)，***则必须***使用指针。请参阅这篇文章：[没有指针的 C++ 多态性](https://stackoverflow.com/q/7223613/2065237)。

真的，当您考虑它时，这是有道理的。当您使用子类型多态性时，最终您不知道将调用哪个类或子类的方法实现，因为您不知道实际的类是什么。

这种拥有一个包含未知类对象的变量的想法与 C++ 在堆栈上存储对象的默认（非指针）模式不兼容，其中分配的空间量直接对应于类。注意：如果一个类有 5 个实例字段而不是 3 个，则需要分配更多空间。

* * *

请注意，如果您使用“&”通过引用传递参数，间接（即指针）仍然在幕后涉及。'&' 只是语法糖，（1）省去了使用指针语法的麻烦，（2）允许编译器更严格（例如禁止空指针）。

* * *

## 回答 #12

> 赞同：6
> 
> 时间：2008-10-02T15:22:52.847

因为到处复制大对象会浪费时间和内存。

* * *

## 回答 #13

> 赞同：6
> 
> 时间：2012-06-18T03:28:24.020

这是我的回答者，我不保证自己会成为专家，但我在我正在尝试编写的一个库中发现了一些很棒的指针。在这个库（它是一个带有 OpenGL 的图形 API :-)）中，您可以创建一个三角形，并将顶点对象传递给它们。draw 方法采用这些三角形对象，并且......根据我创建的顶点对象绘制它们。嗯，没关系。

但是，如果我改变一个顶点坐标呢？在顶点类中使用 moveX() 移动它或其他东西？好吧，现在我必须更新三角形，添加更多方法和性能被浪费了，因为每次顶点移动时我都必须更新三角形。仍然不是什么大不了的事，但也不是那么好。

现在，如果我有一个包含大量顶点和大量三角形的网格，并且网格正在旋转和移动等等。我必须更新使用这些顶点的每个三角形，可能还有场景中的每个三角形，因为我不知道哪些三角形使用了哪些顶点。那是计算机密集型的，如果我在景观顶部有几个网格，天哪！我遇到了麻烦，因为我几乎在每一帧都更新了每个三角形，因为这些顶点一直在变化！

使用指针，您不必更新三角形。

如果每个三角形类有三个 *Vertex 对象，我不仅可以节省空间，因为无数三角形没有三个本身很大的顶点对象，而且这些指针将始终指向它们所指向的顶点，无论顶点变化的频率。由于指针仍然指向同一个顶点，三角形不会改变，更新过程更容易处理。如果我把你弄糊涂了，我不会怀疑，我不假装是专家，只是把我的两分钱扔进讨论中。

* * *

## 回答 #14

> 赞同：6
> 
> 时间：2013-02-17T01:08:04.073

[此处](http://duramecho.com/ComputerInformation/WhyCPointers.html)描述了 C 语言中对指针的需求

基本思想是语言中的许多限制（如使用数组、字符串和在函数中修改多个变量）可以通过操纵数据的内存位置来消除。为了克服这些限制，在 C 中引入了指针。

此外，还可以看出，在将大数据类型（如具有许多字段的结构）传递给函数的情况下，使用指针可以更快地运行代码并节省内存。在传递之前复制这些数据类型需要时间并且会消耗内存。这是程序员更喜欢大数据类型指针的另一个原因。

PS：请参阅[提供的链接](http://duramecho.com/ComputerInformation/WhyCPointers.html)以获取示例代码的详细说明。

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2008-10-02T18:02:00.577

在 java 和 C# 中，所有对象引用都是指针，而 c++ 的问题是您可以更好地控制指针指向的位置。记住，权力越大，责任越大。

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2012-04-30T07:07:45.787

*   在某些情况下，需要函数指针才能使用共享库（.DLL 或 .so）中的函数。这包括跨语言执行任务，通常会提供 DLL 接口。
*   制作编译器
*   制作科学计算器，您在哪里有函数指针的数组或向量或字符串映射？
*   尝试直接修改显存——制作自己的图形包
*   制作 API！
*   数据结构 - 您正在制作的特殊树的节点链接指针

指针的原因有很多。如果您想保持跨语言兼容性，那么在 DLL 中进行 C 名称修饰尤其重要。

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2013-05-30T21:18:55.740

关于您的第二个问题，通常您在编程时不需要使用指针，但是有一个例外，那就是您制作公共 API 时。

人们通常用来替换指针的 C++ 结构的问题在很大程度上取决于您使用的工具集，当您拥有对源代码所需的所有控制权时，这很好，但是如果您使用 Visual Studio 2008 编译静态库，例如并尝试在 Visual Studio 2010 中使用它，您将收到大量链接器错误，因为新项目与不向后兼容的较新版本的 STL 链接。如果你编译一个 DLL 并提供一个人们在不同工具集中使用的导入库，事情会变得更加糟糕，因为在这种情况下，你的程序迟早会无缘无故地崩溃。

因此，为了将大型数据集从一个库移动到另一个库，如果您不想强迫其他人使用您使用的相同工具，您可以考虑将一个指向数组的指针指向应该复制数据的函数. 这样做的好处是它甚至不必是 C 样式的数组，您可以使用 std::vector 并通过给出第一个元素的地址来给出指针 &vector[0] 例如，然后使用std::vector 在内部管理数组。

在 C++ 中再次使用指针的另一个好理由与库有关，考虑在程序运行时有一个无法加载的 dll，因此如果您使用导入库，则依赖关系不满足，程序崩溃。例如，当您在应用程序旁边的 dll 中提供公共 api 并且您想从其他应用程序访问它时，就是这种情况。在这种情况下，为了使用 API，您需要从其位置加载 dll（通常位于注册表项中），然后您需要使用函数指针才能调用 DLL 中的函数。有时，制作 API 的人会很好地为您提供一个 .h 文件，其中包含帮助函数以自动化此过程并为您提供所需的所有函数指针，

# svn - 是否有允许跟踪文件名更改的源代码控制系统？

> ID：162960
> 
> 赞同：6
> 
> 时间：2008-10-02T15:21:09.730
> 
> 标签：svn, version-control, cvs

所以，我已经使用我的 cvs 存储库有一段时间了。虽然我想念一件事 - 如果我重命名一个已经在存储库中的文件，我需要从那里删除具有旧名称的文件并添加新文件。因此，我放弃了我所有的变更历史。有时需要重命名已经存在的项目中的文件。

从我所见，cvs/svn 无法处理这样的事情，还是我错了？如果不是，您会推荐什么其他允许重命名文件的源代码控制系统？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-10-02T15:22:28.667

Subversion 可以做到这一点，但你必须这样做

```
svn move <oldfile> <newfile> 
```

编辑：在这十年里，我们这样做`git mv <oldfile> <newfile>`了，或者只是使用`mv`，而 git 通常会自行解决。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-10-02T15:25:29.283

[在线 CVS 手册](http://www.cvsnt.org/manual/html/Moving-files.html)有一些关于如何执行此操作的详细信息：

> 移动文件的正常方法是发出 cvs rename 命令。
> 
> ```
> $ cvs rename old new
> $ cvs commit -m "Renamed old to new" 
> ```
> 
> 这是移动文件的最简单方法。它不容易出错，并且保留了所做操作的历史记录。CVSNT 客户端可以通过检出旧版本的存储库来检索原始名称。

此功能仅在 CVSNT 服务器 2.0.55 及更高版本上受支持。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-10-02T15:25:26.227

几乎任何现代版本控制系统都允许这样做（Subversion、Perforce、Vault、git、Mercurial、TFS 等）。

我能想到的唯一不会（或有重大警告）的是 CVS 和 VSS。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-10-02T15:25:37.443

在 svn 中，使用 svn mv。

另请参阅：常见问题解答中的[http://subversion.tigris.org/faq.html#case-change](http://subversion.tigris.org/faq.html#case-change)。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2008-10-02T15:22:56.920

Subversion 具有重命名功能。

# winforms - 为什么我在关闭我的 Windows 窗体应用程序后会收到错误消息？

> ID：162962
> 
> 赞同：2
> 
> 时间：2008-10-02T15:21:21.337
> 
> 标签：winforms, multithreading, debugging

当我通过单击 F5（调试模式）运行 Visual Studio Windows Forms 应用程序时，在单击关闭按钮（调用`Application.Exit()`）后，几秒钟后我收到一条错误消息：

> 无法访问已处置的对象：对象名称“SampleForm”。

一点背景知识，我有另一个线程每 x 秒运行一次。

我的猜测是，当我关闭应用程序时，由于它仍处于调试模式，另一个线程仍在运行并尝试访问某些内容，但由于我关闭了应用程序，因此表单已被处理。

它是否正确？

我必须在调用之前杀死后台进程线程`Application.Exit()`吗？

**更新**

现在，当我在对应用程序的调用完全关闭`thread.Abort()`之前调用时。`Application.Exit()`之前，即使在我单击关闭按钮之后，调试器仍在运行（即未选择停止按钮），所以一定是因为线程仍然处于活动状态）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-10-02T15:24:37.383

将您的线程标记为 BackgroundThread，它会在您关闭窗口后立即停止运行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-10-02T15:23:40.023

我认为调试与发布模式是一个红鲱鱼。在发布模式下，您只是没有收到带有“无法访问已处置对象”错误的对话框。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-02T15:30:32.597

设置线程以后台模式运行 Thread.IsBackground = true。默认为前台模式，这会导致进程保持活动状态（即使 UI 已关闭）。

[在此处](http://www.albahari.com/threading/default.aspx#_Creating_Starting)向下滚动到前台和后台线程以获取更多信息

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-02T15:22:34.533

是的，你需要先杀死线程。

不过，这实际上与调试模式无关。这与基本线程有关。

编辑：根据您的更新，您不应该中止线程。线程应该收到信号并自行退出。我不确定您的线程或代码是什么样的，但类似于：

```
do {

    // Crazy threading stuff here

}while(_running); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-02T15:23:35.093

确保将另一个线程设置为后台线程。

此外，在 Application.Exit 中制作 otherThread.Join()

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-10-02T15:26:18.113

是的，你肯定需要杀死你产生的线程。在这种情况下，您检查您正在访问的 UI 对象是否已释放，如果是，则中止当前线程。另一种可能性很简单，就是跟踪你的线程并在退出时杀死它们。第三种可能性是查看系统 ThreadPool 和 BackgroundWorker 区域，看看它们是否处理任何类型的线程生命周期管理。

# java - SWT Link 以渐变背景闪烁

> ID：162969
> 
> 赞同：1
> 
> 时间：2008-10-02T15:22:08.810
> 
> 标签：java, eclipse, user-interface, swt, widget

我正在开发一个使用 SWT 接口的 Eclipse 插件。我需要显示文本，并且在该文本中需要有链接。我发现的唯一两个允许我在文本中包含可点击链接的小部件是链接和浏览器。然而，浏览器对我的需求来说太过分了，我无法正确自定义它的外观。这只留下链接小部件。

问题是我需要 Link 小部件从它所在的 Composite 继承渐变。只有在调整大小或滚动 Link 组件闪烁时，它才能正确执行此操作。Link 是我看到这种效果的唯一组件。

为了解决这个问题，我尝试将其他组件操作为具有可点击链接，但我还没有找到一个好的解决方案。

无论如何要修复链接上的闪烁效果，还是有不同的组件可以支持链接？

谢谢，

布赖恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-02T20:12:14.900

在花了一天时间解决这个问题后，我想出了一个解决方法。我为文本区域创建了一个 Composite。对于不属于 url 的每个单词，都有自己的标签。对于链接，每个字母都有自己的标签。然后 url 字符的标签让监听器启动浏览器。使用此方法提供了链接功能，正确处理大小调整，并且没有闪烁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-30T21:08:25.053

您是否尝试过将 SWT.NO_BACKGROUND 传递给您的 Link 小部件？它可能会有点奇怪......你可能需要做更多的工作才能正确绘制 gui，但这是我的第一个猜测。

除此之外，这是我在 StyledText 内的链接的 Quick n'dirty 实现。您将需要填写以更改光标（如果这是您想要的），以及提出一个好的“文本链接”映射方案。

唯一的事情是我不确定 StyledText 是否会继承你的背景......试一试。

```
public class StyledTextExample {
   public static void main(String [] args) {
    // create the widget's shell
    Shell shell = new Shell();
    shell.setLayout(new FillLayout());
    shell.setSize(200, 100);
    Display display = shell.getDisplay();
    // create the styled text widget
    final StyledText widget = new StyledText(shell, SWT.NONE);

    String text = "This is the StyledText widget.";
    widget.setText(text);
    widget.setEditable(false);

    final StyleRange hyperlinkStyle = new StyleRange();
    String linkWord = "StyledText";
    hyperlinkStyle.start = text.indexOf(linkWord);
    hyperlinkStyle.length = linkWord.length();
    hyperlinkStyle.fontStyle = SWT.BOLD;
    hyperlinkStyle.foreground = display.getSystemColor(SWT.COLOR_BLUE);
    widget.setStyleRange(hyperlinkStyle);

    widget.addMouseListener(new MouseAdapter() {
        public void mouseUp(MouseEvent arg0) {
            Point clickPoint = new Point(arg0.x, arg0.y);
            try {
                int offset = widget.getOffsetAtLocation(clickPoint);
                if (widget.getStyleRangeAtOffset(offset) != null) {
                    System.out.println("link");
                }
            } catch (IllegalArgumentException e) {
                //ignore, clicked out of text range.
            }
        }});
    shell.open();
    while (!shell.isDisposed())
    if (!display.readAndDispatch()) display.sleep();
   }
} 
```

# eclipse-rcp - Eclipse RCP 闪屏

> ID：162985
> 
> 赞同：5
> 
> 时间：2008-10-02T15:23:55.967
> 
> 标签：eclipse-rcp

我参与了一个项目，该项目试图使用 Eclipse RCP 初始屏幕来收集用户凭据、语言等。如果此屏幕失去焦点，则无法通过 ALT-Tab 功能使用（至少在 Windows 下），并且只能通过最小化所有其他窗口并打开它来找到。有什么方法可以让这个屏幕以这种方式被激活？由于目前未知的原因，他们正在避免创建中间屏幕。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-10-06T19:46:28.353

我认为可能是时候检查那些未知的原因了。甚至 eclipse 也不会以这种方式使用启动画面。如果它需要提示信息，它会打开一个新对话框来询问它。

祝你好运。

**[编辑]** 我的立场是正确的。 [该线程](http://dev.eclipse.org/newslists/news.eclipse.platform.rcp/msg26519.html)似乎对此有解决方案。祝你好运，我不是 SWT/RCP 专家。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-08-25T20:06:44.630

请参阅[此页面](http://tom-eclipse-dev.blogspot.com/2007/06/splash-screen-and-threads.html)。从其中一条评论中：

> 初始屏幕窗口是使用扩展窗口样式 WS_EX_TOOLWINDOW 本地创建的，这使得它不会出现在任务栏中。这对应于 SWT 常量 SWT.TOOL。

我不知道在Windows上创建后是否可以更改窗口样式。如果有必要，您可以随时下拉到 JNI。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-18T22:17:32.187

创建您自己的 AbstractSplashHandler 实现。创建外壳时，不要使用 SWT.TOOL 样式。可以通过 Windows 任务栏访问 shell。

# c# - 在 XML 序列化中包含数组索引

> ID：162986
> 
> 赞同：2
> 
> 时间：2008-10-02T15:24:09.600
> 
> 标签：c#, .net, xml-serialization

我有一个看起来像这样的课程

```
public class SomeClass
{
    public SomeChildClass[] childArray;
} 
```

这将从 XMLSerializer 输出 XML，如下所示：

```
<SomeClass>
   <SomeChildClass>
      ...
   </SomeChildClass>
   <SomeChildClass>
      ...
   </SomeChildClass>
</SomeClass> 
```

但我希望 XML 看起来像这样：

```
<SomeClass>
   <SomeChildClass index=1>
      ...
   </SomeChildClass>
   <SomeChildClass index=2>
      ...
   </SomeChildClass>
</SomeClass> 
```

其中 index 属性等于数组中的项目位置。

我可以使用“XMLAttribute”属性向 SomeChildClass 添加一个索引属性，但是我必须记住在序列化我的对象之前循环遍历数组并设置该值。

是否有一些我可以添加的属性或其他方式为我自动生成索引属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-02T15:51:14.603

最好的方法是按照你说的做，像这样向“SomeChildClass”添加一个属性

```
[XmlAttribute("Index")]
public int Order
{  { get; set; }   } 
```

然后，无论您将这些项目添加到您的数组中，请确保已设置此属性。然后当你序列化时...... Presto！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-02T15:35:41.460

您可能需要研究实现 System.Xml.Serialization.IXmlSerializable 来完成此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-02T15:40:54.847

您可以检查 XmlAttributeOverrides 类。

# c# - 使用 Microsoft.Reporting.WinForms 动态加载嵌入式资源报表

> ID：162989
> 
> 赞同：13
> 
> 时间：2008-10-02T15:24:41.157
> 
> 标签：c#, reporting-services, report

如何从嵌入式资源动态加载新报告？我创建了一个报告项目，其中包含作为嵌入式资源的报告。我添加了第二个报告文件并使用以下代码来切换报告：

```
this.reportViewer1.LocalReport.ReportEmbeddedResource = "ReportsApplication2.Report2.rdlc";
this.reportViewer1.LocalReport.Refresh();
this.reportViewer1.RefreshReport(); 
```

执行此代码时，原始报表在报表查看器中仍然可见。

我也尝试过使用

```
LocalReport.LoadReportDefinition 
```

但结果相同。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-10-03T14:27:07.517

答案：你必须打电话

```
<ReportViewer>.Reset(); 
```

在更改 ReportEmbeddedResource 的值或调用 LoadReportDefinition 之前。

完成后，您还必须致电

```
<ReportViewer>.LocalReport.DataSources.Add( ... ); 
```

重新建立数据源。

# java - 为 Java 中的 2D 仿真项目选择合适的工具包

> ID：162991
> 
> 赞同：2
> 
> 时间：2008-10-02T15:24:42.967
> 
> 标签：java, graphics, simulation

我正在寻找一个工具包，它允许我为 Java 中的电梯模拟设计包含 2D 图形的小部件。一旦创建，这些小部件将与 SWT、Swing 或 QtJambi 框架集成。

背景资料：

我正在开发一个电梯模拟器以获得乐趣。我的主要目标是增加我对 Java、Eclipse IDE 以及更重要的并发性的了解。这当然很有趣，我很喜欢实现这个[状态机模式](http://dotnet.zcu.cz/NET_2006/Papers_2006/short/B31-full.pdf)。

无论如何，我现在想在屏幕上看到电梯，而不是限制自己在控制台上记录它的操作。

我可能会为 UI 控件选择 SWT、Swing 或 QtJambi，但我想知道如何处理模拟的图形部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-02T15:40:17.033

您可以使用 SWT 画布（或 Swing 画布，或通过 JOGL 的 OpenGL 画布，...），并将其设置为模拟的观察者，并且每当模拟状态发生变化时，您都可以重新绘制新状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-03T00:31:11.530

[您可以从JGraph](http://jgraph.com/)等图形可视化工具中获得一些抽象图形。您可以使用它来可视化您的电梯所处的状态。但是，我不确定这些图形可视化工具有多灵活，以及您是否可以添加自己的图形和动画。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-02T15:41:48.077

你确定你真的想要使用小部件吗？使用 Graphics2D+friends 和您自己的抽象不是更合适吗？

# c# - WMI 提供程序程序集中的 RunInstaller 属性

> ID：162993
> 
> 赞同：1
> 
> 时间：2008-10-02T15:24:55.323
> 
> 标签：c#, windows, wmi

我正在类库中创建一个解耦的 WMI 提供程序。我读过的所有内容都指向包括以下内容：

```
[System.ComponentModel.RunInstaller(true)]
public class MyApplicationManagementInstaller : DefaultManagementInstaller { } 
```

我收集此安装的目的是因为 Windows WMI 基础结构在使用之前需要了解我的 WMI 提供程序的结构。

我的问题是 - 这个“安装程序”什么时候运行？MSDN 说安装程序将在“安装程序集期间”被调用，但我不确定这意味着什么，或者它何时会在包含 WMI 提供程序的类库的上下文中发生。

**我的印象是，这是针对包含 WMI 提供程序的程序集手动运行InstallUtil.exe**的自动替换，但我对提供程序所做的更改不会被 Windows WMI 基础结构识别，除非我从命令提示符手动运行 InstallUtil。我可以在开发过程中在自己的机器上执行此操作，但如果将使用提供程序的应用程序部署到其他机器 - 那么怎么办？

看来这个 RunInstaller / DefaultManagementInstaller 组合不能正常工作 - 对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-02T21:28:16.837

据我了解， DefaultManagementInstaller 由 installutil.exe 运行 - 如果您不包含它，则该类未安装在 WMI 中。也许可以创建一个运行它的“安装项目”或“安装程序项目”，但我不确定，因为我不使用 Visual Studio。

[编辑]

对于远程安装，一个选项可以是使用带有 /MOF 选项的 Installutil 来为程序集生成 MOF，并使用 mofcomp 将其移动到 WMI。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-17T05:50:56.810

我使用这样的东西以编程方式调用 InstallUtil：

```
 public static void Run( Type type )
    {
        // Register WMI stuff
        var installArgs = new[]
                                   {
                                       string.Format( "//logfile={0}", @"c:\Temp\sample.InstallLog" ), "//LogToConsole=false", "//ShowCallStack",
                                       type.Assembly.Location,
                                   };

        ManagedInstallerClass.InstallHelper( installArgs );
    } 
```

从您的 Main() 方法中调用它。

-戴夫

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-04T22:57:27.300

谢谢乌罗斯。看起来 RunInstaller 和 DefaultManagementInstaller 所做的只是使您能够针对程序集成功运行 InstallUtil。这很奇怪，因为我几乎可以肯定，在我编译并使用我的第一个 WMI 提供程序时，我并不知道 InstallUtil。

我将研究使用 MOF 文件，为了我自己的使用，我可以在 VS 中将 InstallUtil 命令行作为构建后事件运行。****