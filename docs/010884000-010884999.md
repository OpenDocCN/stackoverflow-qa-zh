# StackOverflow 问答 10884000-10884999

# php - 优化sql语句以减少MySQL服务器负载

> ID：10884000
> 
> 赞同：1
> 
> 时间：2012-06-04T15:36:27.723
> 
> 标签：php, mysql, sql, mysqli, prepared-statement

```
$sql1 = "SELECT questions FROM last_check_date WHERE user_id=? ORDER BY questions DESC LIMIT 1";
$sql2 = "SELECT id FROM questions WHERE add_dt>?"; 
```

上面的语句有什么作用？

当我执行`sql1`时，它会获取用户的最后检查日期。

然后我正在执行第二个查询，以获取所有 id 的 add date>last check date (from `sql1`) 并返回受影响的行数。

我想要做的是将这 2 个语句合并为 1 个，并优化查询计数。可能会出现以下问题：

用户 in 没有行`$sql1`：必须选择所有行`sql2`并返回受影响的行数。

我不知道它应该是什么样子。提前谢谢

# 更新

`SHOW CREATE TABLE last_check_date;`结果是

```
CREATE TABLE `last_check_date` (
  `id` int(11) unsigned NOT NULL,
  `user_id` bigint(20) unsigned NOT NULL,
  `questions` datetime DEFAULT NULL,
  `users` datetime DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 
```

和`SHOW CREATE TABLE questions;`

```
CREATE TABLE `questions` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `author_id` bigint(20) unsigned DEFAULT NULL,
  `question` text NOT NULL,
  `var_a` text NOT NULL,
  `var_b` text NOT NULL,
  `var_c` text NOT NULL,
  `var_d` text NOT NULL,
  `var_e` text NOT NULL,
  `subject` int(11) unsigned DEFAULT NULL,
  `chapter` int(11) unsigned DEFAULT NULL,
  `section` int(11) unsigned DEFAULT NULL,
  `paragraph` int(11) unsigned DEFAULT NULL,
  `rank` tinyint(2) NOT NULL,
  `add_dt` datetime NOT NULL,
  `answer` varchar(1) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `fk_chapters-id` (`chapter`),
  KEY `fk_paragraphs-id` (`paragraph`),
  KEY `fk_subjects-id` (`subject`),
  KEY `fk_sections-id` (`section`),
  KEY `fk_author-id` (`author_id`),
  CONSTRAINT `fk_author-id` FOREIGN KEY (`author_id`) REFERENCES `users` (`id`) ON DELETE SET NULL ON UPDATE CASCADE,
  CONSTRAINT `fk_chapters-id` FOREIGN KEY (`chapter`) REFERENCES `chapters` (`id`) ON DELETE SET NULL ON UPDATE CASCADE,
  CONSTRAINT `fk_paragraphs-id` FOREIGN KEY (`paragraph`) REFERENCES `paragraphs` (`id`) ON DELETE SET NULL ON UPDATE CASCADE,
  CONSTRAINT `fk_sections-id` FOREIGN KEY (`section`) REFERENCES `sections` (`id`) ON DELETE SET NULL ON UPDATE CASCADE,
  CONSTRAINT `fk_subjects-id` FOREIGN KEY (`subject`) REFERENCES `subjects` (`id`) ON DELETE SET NULL ON UPDATE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T15:54:31.887

```
$sql = "
    SELECT q.id 
    FROM questions q
    LEFT JOIN (
        SELECT questions 
        FROM last_check_date 
        WHERE user_id=? 
        ORDER BY questions 
        DESC LIMIT 1
    ) l ON q.add_dt > l.questions"

$rs = mysql_query($sql);
$rowcount = mysql_num_rows($rs); 
```

我还不知道 PDO/MYSQLI 的正确语法，请适应您喜欢的驱动程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T15:46:34.930

见下文。我假设如果没有记录`last_check_date`，您仍然想显示问题（在这种情况下是所有问题）。

```
select q.id
from questions q
left outer join (
    select max(questions) as questions
    from last_check_date
    where user_id = ?
) lcd on q.add_date > lcd.questions
where user_id = ?
order by questions desc 
```

# ios - 变量具有不完整的类型“QPrinter”

> ID：10884003
> 
> 赞同：1
> 
> 时间：2012-06-04T15:36:32.677
> 
> 标签：ios, objective-c, qt, qprinter

我正在尝试在 iOS 中使用 QT。

```
#include <QtGui/qprinter.h>

QPrinter print; 
```

上面的代码给出了“变量有不完整的类型'QPrinter'”错误。虽然 QtGui/qprinter.h 对 QPrinter 有完整的定义。任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T17:09:34.230

该`qprinter.h`文件在定义之前具有此预处理器条件`QPrinter`：

```
#ifndef QT_NO_PRINTER

// class QPrinter {
// ...
// }

#endif 
```

也许是在 iOS`QT_NO_PRINTER`上定义的，也许是因为不支持？我找不到任何官方文档说得这么多，但是很容易测试该宏是否在您的构建中定义。

# html - 边框颜色顺序

> ID：10884008
> 
> 赞同：12
> 
> 时间：2012-06-04T15:36:46.067
> 
> 标签：html, css

我有一个表格，每个边框都设置为 1px 宽度实心。我希望顶部、左侧和底部边框为黑色，右侧边框为白色。所以，我使用了这个css代码

```
border-right-color: white;    
border-left-color: black; 
border-top-color: black; 
border-bottom-color: black; 
border: solid 1px; 
```

问题出现在 IE9 中，右上角像素为白色，但右下角为黑色。

我怀疑问题来自 IE9 重新组织样式的方式，因为当我在开发工具控制台中查看我的表格的 css 时，它的顺序如下：

```
border-top-color: black;
border-right-color: white; 
border-bottom-color: black;  
border-left-color: black; 
border-top-width: 1px;
border-right-width: 1px;
border-bottom-width: 1px;
border-left-width: 1px;
border-top-style: solid;
border-right-style: solid;
border-bottom-style: solid;
border-left-style: solid; 
```

这让我想，也许，用于定义颜色的顺序使得顶部边框为黑色，然后右边框为白色（覆盖右上角），然后底部边框为黑色（覆盖底部右角），最后左边框是左色。

问题是，在白色背景上，顶部和底部边框的长度似乎不同（相差一个像素）。可能不多，但我需要这两个边框与页面上的其他行相匹配。

那么，我该如何解决这个问题？是否真的与边框着色的顺序有关，如果是，我该如何更改？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-04T15:41:55.003

您指定边框颜色的顺序无关紧要。浏览器只是以不同的方式显示边框。角落中的像素从任一侧获取颜色，这取决于您使用的浏览器。

使用了几种不同的方法。以下是最常见的浏览器，以及它们如何绘制角：

**IE浏览器：**

```
+----------------------+--+
|                      |  |
+----------------------|  |
|  |                   |  |
|  |                   |  |
|  |                   |  |
|  +----------------------+
|  |                      |
+--+----------------------+ 
```

**火狐：**

```
+--+----------------------+
|  |                      |
|  +----------------------+
|  |                   |  |
|  |                   |  |
|  |                   |  |
+----------------------|  |
|                      |  |
+----------------------+--+ 
```

**铬合金：**

```
+--+----------------------+
|  |                      |
|  |----------------------+
|  |                   |  |
|  |                   |  |
|  |                   |  |
|  +----------------------+
|  |                      |
+--+----------------------+ 
```

**苹果浏览器：**

```
+--+-------------------+--+
|  |                   |  |
|  |-------------------|  |
|  |                   |  |
|  |                   |  |
|  |                   |  |
|  +-------------------+  |
|  |                   |  |
+--+-------------------+--+ 
```

**歌剧：**

```
+-------------------------+
|                         |
+-------------------------+
|  |                   |  |
|  |                   |  |
|  |                   |  |
|  +-------------------+  |
|  |                   |  |
+--+-------------------+--+ 
```

看起来好像不同的浏览器供应商竭尽全力使用与所有其他浏览器不同的方法......

（在最近的版本中进行了测试。任何浏览器的旧版本可能会有所不同，但这并不重要，因为它们无论如何都不同。）

因此，如果您需要完全控制角的绘制方式，您可以在彼此内部使用两个元素，将垂直边框放在一个上，将水平边框放在另一个上。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-04T16:02:54.713

所以，这就是，其实很简单

```
border: solid 1px black;
border-right-style: hidden; 
```

通过为右边框设置隐藏样式，它现在可以完美运行。问题是隐藏样式的边框将优先于折叠或重叠边框的任何其他样式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T15:53:12.260

你可以这样写：

```
div{
 border:1px solid black;
 border-right-color:white;
} 
```

# android - HTML Select 在 Android 中不起作用

> ID：10884011
> 
> 赞同：3
> 
> 时间：2012-06-04T15:36:52.283
> 
> 标签：android, html, cordova

我有一个超级基本的 HTML 选择表单域 -

```
<select>
  <option value='1'>1</option>
  <option value='2'>2</option>
  <option value='3'>3</option>
</select> 
```

但是由于某种原因，当我点击它们时，什么也没有发生。这发生在 Android 2.2.2 上的 WebView 中

奇怪的是，有时他们确实工作......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T12:59:43.077

您`user-scalable=0;`的元标记中有吗？如果是这样，请尝试`user-scalable=yes;`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T00:47:51.200

这似乎是 Android 2.x 上的一个臭名昭著的问题，[根据 jquery 移动团队的说法，](https://github.com/jquery/jquery-mobile/issues/3712)这种特殊行为的原因如下：

> 包含绝对定位元素的固定元素本身包含绝对定位元素，将导致页面上的选择菜单完全停止响应。

完整的怪癖似乎[在这里得到了最好的描述](https://github.com/scottjehl/Device-Bugs/issues/3)。

所以很可能是页面上其他元素的封装和样式导致了这种情况。一个舒适的替代方案是使用一些插件来替换本机下拉菜单，这样您就不必担心并不断重新测试下拉菜单功能，例如[jq UI 中的 selectBox-Plugin](https://github.com/01org/appframework/tree/master/plugins#jqselectbox)（现为 intel appframework）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-06-25T00:31:14.413

将“needsclick”类添加到选择中为我在 Android 上解决了这个问题。

# c# - 类型推断神秘地失败了

> ID：10884013
> 
> 赞同：9
> 
> 时间：2012-06-04T15:37:09.710
> 
> 标签：c#, generics, type-inference

为什么以下无法推断`R`：

```
static R Foo<R>(Func<Action<R>, R> call) { ... } 
```

虽然几乎“相同”，但有效：

```
static R Foo<R>(Func<Action, R> call) { ... } 
```

用法：

```
var i = Foo(ec => -1); 
```

“必须”调用第一个示例进行编译的方式：

```
var i = Foo<int>(ec => -1); 
```

- 或者 -

```
var i = Foo((Action<int> ec) => -1); 
```

想法：从第二个片段中可以看出，`R`已经由“lambda”的返回类型确定。为什么不能同样适用于第一个？即使使用`ec`（这应该是另一个编译器提示），它也无法推断。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T16:07:55.123

我认为问题不在于编译器如果无法推断出`R`函数`CallWithEscapeContinuation`，而是无法推断出 lambda 的类型：

```
ec =>
{
  Enumerable.Range(0, 100).Select(x =>
  {
              // Called here, the compiler has no idea what signature to expect for `ec`
              // Could be Action<Int>, could be Action<Decimal> (for example).
    if (x == 40) ec(x);
    return x;
  }).ToList();
  return -1;
} 
```

而当您提供`int`​​提示时，它可以从中推断出 lambda 的类型以及`CallWithEscapeContinuation`.

当您只有`Action`（而不是`Action<R>`）时，上述内容无关紧要，因为没有影响 lambda 可能签名的类型参数。

# perl - Perl 中存储表格数据的最佳数据结构是什么？

> ID：10884015
> 
> 赞同：3
> 
> 时间：2012-06-04T15:37:11.043
> 
> 标签：perl, perl-data-structures

我有一张包含以下数据的表格

```
1.1.1.1   routerA  texas
2.2.2.2   routerB  texas
3.3.3.3   routerC  california 
```

Perl 中存储这些数据的最佳数据结构是什么？我正在考虑将 IP 地址作为密钥存储在哈希哈希中

```
1.1.1.1 
 routerA => texas,
2.2.2.2
 routerB => texas,
3.3.3.3
 routerC => california 
```

但是如果我想获取德州的所有IP地址，我的数据结构可能不够灵活。如果我关心德克萨斯州的所有 IP 地址，是否有更好的方法来存储它？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-04T16:17:43.630

Pure Perl 绝对可以胜任这项任务。

将表视为记录数组。在 Perl 中，这是一个哈希引用数组。（AoA 有时可能适用，记住 TIMTOWTDI）

每个哈希引用的键对应于列/字段名称，而值将是该特定记录的值。

将 OP 的示例转换为数据结构：

```
my @data = (
             {
                ip     => '1.1.1.1',
                router => 'routerA',
                state  => 'texas',
             },
             {
                ip     => '2.2.2.2',
                router => 'routerB',
                state  => 'texas',
             },
             {
                ip     => '3.3.3.3',
                router => 'routerA',
                state  => 'california',
             }
           ); 
```

现在是有趣的部分：

```
# Give me all IPs in Texas

my @ips_in_texas = map $_->{ip},
                    grep { $_->{state} =~ /texas/i }
                     @data;

# How many states does the data cover?

use List::MoreUtils 'uniq';

my $states_covered = uniq( map $_->{state}, @data );

# How many unique IPs in each state?

my %ips_by_state;
$ips_by_state{ $_->{state} }{ $_->{ip} }++ for @data;
print "'$_': ", scalar keys %{ $ips_by_state{$_} }, "\n" for keys %ips_by_state; 
```

* * *

当我建议这种数据结构围绕其对内存的渴望时，我经常会得到下意识的反应。坦率地说，除非您处理数百万条记录，否则这不是问题。如果是这样的话，DBMS 是您寻求的锐化铅笔解决方案，而不是 Perl。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-04T15:57:47.380

您建议使用带有 IP 地址的哈希值作为密钥，这正是我将如何做到的。但是，您还必须构建一个单独的、辅助的、交叉引用的哈希，其中州（如德克萨斯州）是键，IP 地址是数据。在二级散列中，每个状态都是一个键，对应的值本身就是一个散列。在内部散列中，键是 IP，值是虚拟值，通常是值 1。

在您的示例中，这是辅助的交叉引用哈希：

```
california
 { 3.3.3.3 => 1 },
texas
 { 1.1.1.1 => 1, 2.2.2.2 => 1 } 
```

您可以编写一个简短的子例程/函数/块，从主散列构建辅助散列。*如果数据集很大并且*经常更新，这会有点困难，但想法是一样的。

如果您首先掌握 Perl 几乎太可爱但仍然相当方便的自动激活功能，您会发现编写执行上述操作的代码会更容易*：*请参阅手册*页 perlreftut*和*perlref。*

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-04T15:41:03.803

我知道，这不是 perl ......但是内存中的[SQLite表怎么样？](http://www.sqlite.org/)快速、灵活、便携甚至持久。你可以在那里做很多更复杂的事情，然后在德克萨斯州寻找所有 IP ......

# spotify - libspotify API：登录后有什么方法可以存储会话吗？

> ID：10884017
> 
> 赞同：1
> 
> 时间：2012-06-04T15:37:18.717
> 
> 标签：spotify

有什么方法可以检索会话 ID，以便其他程序可以共享它以进行登录？或者是否允许单个用户在多个程序之间共享会话 ID？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T15:46:31.170

不，这是不允许的。您可以让用户单独登录每个应用程序，但您不能在这样的进程之间共享登录详细信息。

此外，libSpotify 没有要公开的“会话 ID”——这不是 OAuth 应用程序！

# android - 组合菜单和选项卡

> ID：10884018
> 
> 赞同：0
> 
> 时间：2012-06-04T15:37:30.277
> 
> 标签：android, android-layout

我正在使用来自 http://www.androidhive.info/2012/05/android-combining-tab-layout-and-list-view/ 的“选项卡布局和列表视图”[和来自](http://www.androidhive.info/2012/05/android-combining-tab-layout-and-list-view/)[http://www](http://www.androidhive.info/2011/09/how-to-create-android-menus/)的“Android 菜单” [.androidhive.info/2011/09/how-to-create-android-menus/](http://www.androidhive.info/2011/09/how-to-create-android-menus/)。我将它们合并在一起，但它不起作用。该选项卡有效，但不适用于菜单。这是我的代码。

```
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.widget.Toast;

public class optionMenuActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }

    // Initiating Menu XML file (menu.xml)
    @Override
    public boolean onCreateOptionsMenu(Menu menu)
    {
        MenuInflater menuInflater = getMenuInflater();
        menuInflater.inflate(R.layout.menu, menu);
        return true;
    }

    /**
     * Event Handling for Individual menu item selected
     * Identify single menu item by it's id
     * */
    @Override
    public boolean onOptionsItemSelected(MenuItem item)
    {
        Intent myList = new Intent();
        switch (item.getItemId())
        {
        case R.id.menu_login:
            // Single menu item is selected do something
            // Ex: launching new activity/screen or show alert message
         //   Toast.makeText(optionMenuActivity.this, "Bookmark is Selected", Toast.LENGTH_SHORT).show();
            myList = new Intent(optionMenuActivity.this, LoginActivity.class);
            startActivity(myList);
            return true;

        case R.id.menu_save:
            Toast.makeText(optionMenuActivity.this, "Save is Selected", Toast.LENGTH_SHORT).show();
            return true;

        case R.id.menu_search:
            Toast.makeText(optionMenuActivity.this, "Search is Selected", Toast.LENGTH_SHORT).show();
            return true;

        case R.id.menu_share:
            Toast.makeText(optionMenuActivity.this, "Share is Selected", Toast.LENGTH_SHORT).show();
            return true;

        case R.id.menu_delete:
            Toast.makeText(optionMenuActivity.this, "Delete is Selected", Toast.LENGTH_SHORT).show();
            return true;

        case R.id.menu_quit:
         //   Toast.makeText(optionMenuActivity.this, "Preferences is Selected", Toast.LENGTH_SHORT).show();
            Intent intent = new Intent(Intent.ACTION_MAIN);
            intent.addCategory(Intent.CATEGORY_HOME);
            intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            startActivity(intent);
           // return true;

        default:
            return super.onOptionsItemSelected(item);
        }
    }   

} 
```

主要来自“标签布局”

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <LinearLayout
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">
        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" />
        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"/>
    </LinearLayout>
</TabHost> 
```

这是我的 menu.xml

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <!-- Single menu item
         Set id, icon and Title for each menu item
    -->
    <item android:id="@+id/menu_login"
          android:icon="@drawable/icon_bookmark"
          android:title="Login" />

    <item android:id="@+id/menu_save"
          android:icon="@drawable/icon_save"
          android:title="Save" />

    <item android:id="@+id/menu_search"
          android:icon="@drawable/icon_search"
          android:title="Search" />

    <item android:id="@+id/menu_share"
          android:icon="@drawable/icon_share"
          android:title="Share" />

    <item android:id="@+id/menu_delete"
          android:icon="@drawable/icon_delete"
          android:title="Delete" /> 

    <item android:id="@+id/menu_quit"
          android:icon="@drawable/icon_preferences"
          android:title="Quit" />
</menu> 
```

最后，我的清单。

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.example"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".WorkDroid5"
            android:configChanges="keyboardHidden|orientation"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <!-- Inbox Activity -->
        <activity android:name=".AnnouncementActivity" />

        <!-- Outbox Activity -->
        <activity android:name=".HomeworkActivity" />

        <!-- Profile Activity -->
        <activity android:name=".TimetableActivity" />
        <activity android:name=".tt_Friday" />
        <activity android:name=".ttFinalDetails" />
        <activity android:name=".TimetableAdapter" />
        <activity android:name=".tt_Thursday" />
        <activity android:name=".tt_Monday" />
        <activity android:name=".tt_Tuesday" />
        <activity android:name=".tt_Wednesday" />
        <activity
            android:name=".RegisterActivity"
            android:label="Register New Account" >
        </activity>
        <activity
            android:name=".LoginActivity"
            android:label="Login to your Account" >
        </activity>

        <activity
            android:name=".optionMenuActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="com.example.example.OPTIONMENUACTIVITY" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>

    </application>

    <!-- Internet Permissions -->
    <uses-permission android:name="android.permission.INTERNET" />

</manifest> 
```

提前感谢任何人的帮助（'：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T16:47:55.503

这里：

```
public boolean onCreateOptionsMenu(Menu menu)
{
    MenuInflater menuInflater = getMenuInflater();
    menuInflater.inflate(R.layout.menu, menu);
    return true;
} 
```

你传递`R.layout.menu`给`MenuInflater.inflate(..)`方法，但它应该是`R.menu.menu`. 将`menu.xml`文件从`res/layout`目录移动到`res/menu`目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T08:04:58.807

我遇到了与 TabHost 类似的问题。默认情况下，Android 会为父活动创建一个选项菜单，即您的情况下的 TabHost。子选项卡不接收`OnCreateOptionsMenu`事件。因此，您的菜单没有被创建。

将选项菜单创建/处理代码放在扩展 TabActivity 的活动中。您可以通过检查`getTabHost.getCurrentTab`或`getTabHost.getCurrentTabTag`膨胀适当的菜单来检查当前选择的选项卡来更改首选项菜单内容。

# c - 需要对递归函数进行优化

> ID：10884024
> 
> 赞同：7
> 
> 时间：2012-06-04T15:37:59.370
> 
> 标签：c, optimization, recursion

我想优化这个函数，以便它可以快速输出输入值
（x = 300，y = 120，z = 10）。
我想在连续计算后将值存储在 3D 数组中，但无法实现。

请帮忙。递归太难理解了！

```
double P(int x, int y, int z) {

    double final;
    if (x >= 0 && (y <= 0 || z <= 0))
        return  0;

    else if (x <= 0 && (y >= 0 || z >= 0) )
        return 1;

    else {     
        final = 0.1 * (P(x,y-1,z)
                       + P(x-1,y-1,z)
                       +  P(x-2,y-1,z)
                       +  P(x-3,y-1,z)
                       +  P(x-4,y-1,z)
                       +  P(x-5,y-1,z)
                       +  P(x-6,y-1,z)
                       +  P(x-1,y,z)
                       +  P(x-1,y,z)
                       +  P(x,y-1,z-1));
        return final;
    }
} 
```

为了计算`P (300, 120, 10)`该函数必须计算 x、y、z 的所有可能组合，使得`0 <= x <= 300`, `0 <= y <= 120`, `0 <= z <= 10`. 我想首先创建一个 3D 数组。如果相应的 arr[x][y][z] 为空，我将调用该函数，否则我将仅从 arr[x][y][z] 中获取值。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-04T16:58:11.217

您需要构建函数的[记忆](http://en.wikipedia.org/wiki/Memoization)版本。即包括一个缓存：

```
double P_memoized (int x, int y, int z, double ***cache) {

    if (x >= 0 && (y <= 0 || z <= 0))
        return  0;

    else if (x <= 0 && (y >= 0 || z >= 0) )
        return 1;

    else {
        if (cache[x][y][z] < 0.0) /* Negative => uncached.  */
          cache[x][y][z] = 0.1 * (P_memoized(x,y-1,z, cache)
                                  +  P_memoized(x-1,y-1,z, cache)
                                  +  P_memoized(x-2,y-1,z, cache)
                                  +  P_memoized(x-3,y-1,z, cache)
                                  +  P_memoized(x-4,y-1,z, cache)
                                  +  P_memoized(x-5,y-1,z, cache)
                                  +  P_memoized(x-6,y-1,z, cache)
                                  +  P_memoized(x-1,y,z, cache)
                                  +  P_memoized(x-1,y,z, cache)
                                  +  P_memoized(x,y-1,z-1, cache));
        return cache[x][y][z];
    }
} 
```

但是调用者`P_memoized`将不得不分配（然后解除分配）`cache`. 这对调用者来说是一个不必要的头痛，因此您将 memoized 函数包装在一个包装器中，然后调用它`P`（就像您之前所做的那样）。下面的代码会执行此操作，但*请记住*它不会检查是否失败（在[此处](http://pubs.opengroup.org/onlinepubs/009695399/functions/malloc.html)`malloc`阅读）：`malloc`

```
#include <stdlib.h>
double P(int x, int y, int z) {

    double ***cache, final;
    int i, j, k;

    /* Create a cache.  */
    cache = malloc (sizeof (double **) * (x+1));
    for (i = 0; i <= x; i++)
      {
        cache[i] = malloc (sizeof (double *) * (y+1));
        for (j = 0; j <= y; j++)
          {
            cache[i][j] = malloc (sizeof (double) * (z+1));
            for (k = 0; k <= z; k++)
              cache[i][j][k] = -1.0; /* Negative => uncached.  */
          }
      }

    final = P_memoized (x, y, z, cache);

    /* Delete the cache.  */
    for (i = 0; i < x; i++)
      {
        for (j = 0; j < y; j++)
          free (cache[i][j]);
        free (cache[i]);
      }
    free (cache);
    return final;
} 
```

然后你可以像以前一样使用它，只是这一次，它更快：

```
#include <stdio.h>
int main (void)
{
  printf ("%f\n", P (10, 5, 3));
  return 0;
} 
```

## 花式缓存

如果您想多次调用`P`，那么`cache`每次创建和删除 可能不是最好的主意。那么您应该考虑执行以下操作：

1.  使缓存[成为一个`static`变量](http://en.wikipedia.org/wiki/Static_variable)，以便它存在于对`P`
2.  [用于`realloc`](http://pubs.opengroup.org/onlinepubs/000095399/functions/realloc.html)在需要时动态调整缓存大小
3.  不要`free`缓存在末尾`P`（因为会被重用）

为什么需要动态调整缓存大小？因为，比如说，第一次调用`P`是用`x==10`. 然后该函数将创建一个宽度为 10 的缓存。下一次，如果`P`使用旧缓存调用，`x==20`则其宽度不够。但是其中包含的旧值仍然有用。

[This question and its answer](https://stackoverflow.com/q/2457567)谈论`realloc`ing a 2D array。您应该能够将其扩展到您的 3D 版本。

完成此操作后，您可能需要考虑一个新问题：缓存永远不会被`free`d。所以它会保留分配的内存，直到程序退出。然后，您可能希望拥有一个全局缓存，而不是本地静态缓存，并`free`最终为其提供单独的功能。

# android - 执行 Click ImageView Android

> ID：10884027
> 
> 赞同：2
> 
> 时间：2012-06-04T15:38:20.303
> 
> 标签：android, button, click, imageview

对于一个普通的按钮，我可以这样做：

> myButton.performClick();

并且系统知道该按钮被点击了。

现在我有一个 ImageView。ImageViews 这个函数的替代方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T15:44:08.683

您仍然可以将 onClickListener 分配给图像视图，因为侦听器分配方法是基于视图的方法。现在，一旦将侦听器添加到 ImageView，您就可以随时在侦听器中调用 onClick(ImageView) 方法。除此之外，ImageView 还可以访问`performClick`ButtonView 所做的方法。只要您有侦听器，就可以跨视图使用相同的代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T15:43:45.163

你的意思是像..

```
ImageView img = (ImageView) findViewById(R.id.myImageId);
img.setOnClickListener(new OnClickListener() {
    public void onClick(View v) {
       // your code here
    }
}); 
```

或者

在 xml 中：

```
<ImageView  
 android:clickable="true"  
 android:onClick="imageClick"  
 android:src="@drawable/myImage">  
 </ImageView> 
```

在代码中

```
 public class Test extends Activity {  
  ........  
  ........  
 public void imageClick(View view) {  
  //Implement image click function  
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T15:44:44.410

你也`setOnClickListener()`可以`ImageView`。你必须确保你`imageView.setClickable(true)`首先以编程方式，或者在 XML 中定义`android:clickable="true"`你的 ImageVIew..

# sql-server-2008 - SELECT * 的变体 - 除显式引用的列之外的所有列

> ID：10884028
> 
> 赞同：0
> 
> 时间：2012-06-04T15:38:31.917
> 
> 标签：sql-server-2008

有什么方法可以转换一列并能够在不明确命名的情况下引用所有其他列？

通常我会这样做：

```
SELECT
      ,[Id]
      ,[Name]
      ,CONVERT(VARCHAR(10),[CreateDate], 104) as [CreateDate] 
  FROM Customers 
```

在完美世界中我能做的是：

```
SELECT
      *
      ,CONVERT(VARCHAR(10),[CreateDate], 104) as [CreateDate] 
  FROM Customers 
```

其中 * 表示查询中未明确说明的所有列。

是否有一个关键字可以做到这一点，还是有其他方法？请记住，它必须在查询中是可行的——不能更改表、制作视图、SP 或其他东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T15:44:05.597

没有一种编程方式可以说“除此之外的所有列”，除非您想`sys.columns`根据您提供查询的列表构建动态 SQL（从查询中动态导出引用列的列表将*非常*困难，尤其是当您引入连接、where 子句等时）。

但是有一种非常简单的方法可以做到这一点，而无需全部输入。只需在对象资源管理器中展开您的表，然后将“列”节点拖到查询编辑器窗口中。现在只需从列表中删除 CreateDate 列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T15:55:56.847

为了避免输入一长串字段，我喜欢做的是在编辑器中选择表名，然后按 alt-f1。这与键入“sp_help table”是一回事。您将获得一个包含该表所有列名的结果集。我将该列表复制到编辑器中并添加逗号。

使用编辑器中的搜索和替换在所有行的末尾添加逗号的简单方法：

1.  仅选择具有列名的行。
2.  选中“使用”并从下拉列表中选择“正则表达式”。
3.  在“查找内容”中输入 $（美元符号表示行尾）
4.  在“替换为”类型中，

这将在每个选定行的末尾添加一个逗号。

另一种方法是右键单击对象资源管理器中的表，然后单击“选择前 1000 个”选项，这将在另一个文本编辑器窗口中为您创建一个脚本。

# jquery - 如何在 jquery-ui-map 中使用个性化图标

> ID：10884030
> 
> 赞同：2
> 
> 时间：2012-06-04T15:38:37.467
> 
> 标签：jquery, google-maps-api-3, jquery-ui-map

使用[jquery-ui-map](http://code.google.com/p/jquery-ui-map)，我尝试使用个性化图标。我这样工作得很好：

```
$("#gmap_" + parent).gmap('addMarker', { 
    "id": "marker-"+m.id,
    'position': new google.maps.LatLng(m.lat, m.lon), 
    'bounds':true,
    'icon': '/images/'+m.icon
}) 
```

因为我的图标只是一个网址。但我想把我所有的图标放在一个精灵中，所以我必须设置其他选项：

```
$("#gmap_" + parent).gmap('addMarker', { 
    "id": "marker-"+m.id,
    'position': new google.maps.LatLng(m.lat, m.lon), 
    'bounds':true,
    'icon': new google.maps.MarkerImage( {
        'url' : "http://crm.brunet.pro/images/markers.png",
        'origin': new google.maps.Point(m.pos, 0),
        'size' : new google.maps.Size(20, 34)
    })
}) 
```

我收到此错误：

```
GET http://mysite.com/[object%20Object] 400 (Bad Request) 
```

所以看起来图标选项只接受一个字符串。但是你可以在[api](https://developers.google.com/maps/documentation/javascript/reference?hl=sv-SE#MarkerOptions)中看到它应该接受一个 MarkerImage 对象。

我做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T15:48:58.207

MarkerImage 最多可使用五个参数创建，例如, `MarkerImage(myUrl, size1, point1, point2)`，但您已将其编写为一个对象参数。

我确实认为 API 文档在这种情况下可能会令人困惑。看看这些例子：

[https://developers.google.com/maps/documentation/javascript/overlays#ComplexIcons](https://developers.google.com/maps/documentation/javascript/overlays#ComplexIcons)

```
 var image = new google.maps.MarkerImage('images/beachflag.png',
  // This marker is 20 pixels wide by 32 pixels tall.
  new google.maps.Size(20, 32),
  // The origin for this image is 0,0.
  new google.maps.Point(0,0),
  // The anchor for this image is the base of the flagpole at 0,32.
  new google.maps.Point(0, 32)); 
```

[http://blog.mridey.com/2010/03/using-markerimage-in-maps-javascript.html](http://blog.mridey.com/2010/03/using-markerimage-in-maps-javascript.html)（解释从精灵表加载）

`size, origin, anchor`未提及，但您确实需要遵守 API 文档中给出的顺序。

# c# - WPF：在 ListView 中添加项目时引发事件

> ID：10884031
> 
> 赞同：21
> 
> 时间：2012-06-04T15:38:37.610
> 
> 标签：c#, wpf, events, listview

我正在使用 WPF 并且我正在使用 ListView，并且我需要在向其中添加项目时触发一个事件。我试过这个：

```
var dependencyPropertyDescriptor = DependencyPropertyDescriptor.FromProperty(ItemsControl.ItemsSourceProperty, typeof(ListView));
        if (dependencyPropertyDescriptor != null)
        {
               dependencyPropertyDescriptor.AddValueChanged(this, ItemsSourcePropertyChangedCallback);
        } 
```

......

```
 private void ItemsSourcePropertyChangedCallback(object sender, EventArgs e)
    {
         RaiseItemsSourcePropertyChangedEvent();
    } 
```

但它似乎只有在整个集合被更改时才有效，我已经阅读了这篇文章：[event-fired-when-item-is-added-to-listview](https://stackoverflow.com/questions/5904519/event-fired-when-item-is-added-to-listview)，但最佳答案仅适用于 listBox 。我试图将代码更改为 ListView 但我无法做到这一点。

我希望你能帮助我。先感谢您。

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-06-04T16:35:04.497

*请注意，这只适用于 WPF Listview！*

经过一些研究，我找到了我的问题的答案，这真的很容易：

```
public MyControl()
{
    InitializeComponent();
    ((INotifyCollectionChanged)listView.Items).CollectionChanged +=  ListView_CollectionChanged;
}

private void ListView_CollectionChanged(object sender, NotifyCollectionChangedEventArgs e)     
{
    if (e.Action == NotifyCollectionChangedAction.Add)
    {
      // scroll the new item into view   
      listView.ScrollIntoView(e.NewItems[0]);
    }
} 
```

实际上，`NotifyCollectionChangedAction`枚举允许您的程序通知您任何更改，例如：添加、移动、替换、删除和重置。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-10-26T17:38:51.157

*注意：此解决方案适用于 WinForms ListView。*

就我而言，我最终走到了岔路口，有两个选择......

**(1)**创建一个自定义ListView控件，继承一个ListView的类。然后添加一个在添加、删除或清除 ListView 时引发的新事件。这条路看起来真的很乱很长。更不用说我需要用新创建的自定义 ListView 控件替换所有原始 ListViews 的另一个大问题。所以我通过了这个！

* * *

**(2)**对于列表视图的每次添加、删除或清除调用，我还调用了另一个模拟 CollectionChanged 事件的函数。

**创建类似函数的新事件...**

```
private void myListViewControl_CollectionChanged(object sender, NotifyCollectionChangedEventArgs e)
{
    //The projects ListView has been changed
    switch (e.Action)
    {
        case NotifyCollectionChangedAction.Add:
            MessageBox.Show("An Item Has Been Added To The ListView!");
            break;
        case NotifyCollectionChangedAction.Reset:
            MessageBox.Show("The ListView Has Been Cleared!");
            break;
    }
} 
```

**将项目添加到其他地方的 ListView...**

```
ListViewItem lvi = new ListViewItem("ListViewItem 1");
lvi.SubItems.Add("My Subitem 1");
myListViewControl.Items.Add(lvi);
myListViewControl_CollectionChanged(myListViewControl, new NotifyCollectionChangedEventArgs(NotifyCollectionChangedAction.Add, lvi, lvi.Index)); 
```

**清除其他地方的 ListView...**

```
myListViewControl.Items.Clear();
myListViewControl_CollectionChanged(myListViewControl, new NotifyCollectionChangedEventArgs(NotifyCollectionChangedAction.Reset)); 
```

# ios - UIScrollView and UINavigationController not working with iOS 4

> ID：10884036
> 
> 赞同：1
> 
> 时间：2012-06-04T15:39:08.243
> 
> 标签：ios, ios5, ios4, uinavigationcontroller, uiscrollview

i have a problem with UIScrollView and UINavigationController(s) and iOS 4\. The following code works fine with iOS 5:

```
 ////////////////////////////////////////////////////////////////////////////////////
 /* Scroll View */ 
 ////////////////////////////////////////////////////////////////////////////////////
 mScrollView = [[UIScrollView alloc]   initWithFrame:CGRectMake(0, 88, 1024, 668)];
 mScrollView.contentSize = CGSizeMake(1850, 668);

 ////////////////////////////////////////////////////////////////////////////////////
 // First View 
 ////////////////////////////////////////////////////////////////////////////////////
 UIImageView *imgView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:           @"view_bg.png"]];
 imgView.frame= CGRectMake(10, 50, 350, 510);
 [mScrollView addSubview:imgView];
 [imgView release];

 mFirstView = [[[FirstView alloc]  init] autorelease];
 UINavigationController *navigationController = [[UINavigationController alloc] initWithRootViewController:mFirstView]; 
 navigationController.navigationBar.tintColor = [UIColor colorWithRed:79.0/255 green:143.0/255 blue:0.0/255 alpha:1];
 navigationController.view.frame = CGRectMake(25, 65, 320, 480);   
 [mScrollView addSubview:navigationController.view];

 ////////////////////////////////////////////////////////////////////////////////////
 // Second View
 ////////////////////////////////////////////////////////////////////////////////////
 UIImageView *imgView2 = [[UIImageView alloc] initWithImage:[UIImage imageNamed: @"view_bg.png"]];
 imgView2.frame= CGRectMake(380, 50, 350, 510);
 [mScrollView addSubview:imgView2];
 [imgView2 release];

 mSecondView = [[[SecondView alloc]  init] autorelease];
 UINavigationController *navigationController2 = [[UINavigationController alloc] initWithRootViewController:mSecondView]; 
 navigationController2.navigationBar.tintColor = [UIColor colorWithRed:79.0/255     green:143.0/255 blue:0.0/255 alpha:1];
 navigationController2.view.frame = CGRectMake(395, 65, 320, 480);
[mScrollView addSubview:navigationController2.view];

// finally add the scroll view to the parent view
[self.view addSubview:mScrollView]; 
```

All i do is, to add a ScrollView with 2 NavigationControllers (with a allocated root view controller) do the view. But using this code with iOS 4 does not show the right size of the ViewControllers added. The ViewControllers are the size of the whole iPad screen!!!!!

As i already said, it works on iOS 5! Even when i change the size of the views added manually it is not working, the added view always fills the whole iPad screen!! Any ideas to fix this?

Thank you in advance!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T16:22:30.383

在您的代码中，您具有以下内容

```
//first view you add mfirstview.view
[mScrollView addSubview:mFirstView.view];

//second view you add navigationController2.view
[mScrollView addSubview: navigationController2.view]; 
```

所以我想你必须更改第一个视图代码才能执行以下操作

```
[mScrollView addSubview: navigationController.view]; 
```

# c++ - C++ transform vector of pointers

> ID：10884038
> 
> 赞同：0
> 
> 时间：2012-06-04T15:39:20.660
> 
> 标签：c++, vector, map-function

Hey i am trying to transform a vectors of pointers to an object into another vector of pointers to a different object.

I have been given the following classes:

```
class Test;
class Test2 {
    public:
        Test2(Test*);
} 
```

I am unfamiliar on how to create a functor. this is part of a sample exam for exams later this week i am confused on this question though. The following link explains the use of transform quite well but my problem is a little different. Any help would be great!

Reference: [http://www.cplusplus.com/reference/algorithm/transform/](http://www.cplusplus.com/reference/algorithm/transform/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T15:45:12.390

函子是重载的函子`operator()`。因此，您可以将仿函数定义为：

```
struct Test2Generator
{
     //this will be called from std::transform
     Test2* operator()(Test1 *param) const
     {
          return new Test2(param);
     }
}; 
```

然后将其用作：

```
std::vector<Test1*> v1;
//fill v1

std::vector<Test2*> v2(v1.size());

std::transform(v1.begin(), v1.end(), v2.begin(), Test2Generator()); 
```

* * *

在 C++11 中，您不需要定义函子，而是可以将 lambda 用作：

```
std::transform(v1.begin(), 
               v1.end(), 
               v2.begin(), 
               [](Test1 *param) { return new Test2(param); }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T15:45:47.627

对转换的调用将类似于：

```
std::vector<Test*> src = ...
std::vector<Test2*> dst;
dst.reserve( src.size() );
std::transform( src.begin(), src.end(), std::back_inserter(dst), MyFunctor() ); 
```

`MyFunctor()`实现的函数对象在哪里`Test2* operator()( Test* )`：

```
struct MyFunctor {
   Test2* operator()( Test* ) const {
      // implementation goes here
   }
}; 
```

# php - 使用 jquery 发布后编写和下载 csv

> ID：10884043
> 
> 赞同：0
> 
> 时间：2012-06-04T15:39:37.540
> 
> 标签：php, jquery, html, ajax, csv

我使用 jquery $.post 将 HTML 表数据作为 json 发布到服务器端，用于将整个表数据写入 csv 文件。但这不会将 csv 输出为用户可下载的。

我想弹出 csv 文件（这通常在我们下载文件时发生。你知道 csv 的 SAVE 或 OPEN 框）

**客户端代码**

```
//selectedData is having the data as json 

$.post('ajax/csv_download.php', { 
    selectedData: JSON.stringify(selectedData) 
}, function(html){  }); 
```

**服务器端代码**

```
 global $fh; 
   $fh = @fopen( 'php://output', 'w' );
   $post_data = json_decode($_POST['selectedData']);
   foreach ($post_data as $arr)
   {
     $val1 = $arr->val1  ;
     $val2 = $arr->val2 ;
     $val3 = $arr->val3 ;
     $val4 = $arr->val4 ;
     $val5 = $arr->val5 ;
      $out = array($val1,$val2,$val3,$val4,$val5);
       fputcsv($fh, $out);
      } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T03:40:25.983

听起来您想在 php.ini 中将“Content-Type”设置为“text/plain”后将 CSV 文件的内容写回浏览器。根据 Web 浏览器的配置方式，它将提示用户保存/打开文件。

```
<?php 
  $content="name,age,height,weight,gender"; 
  $file="persons.csv";

  header("Content-Type: text/plain"); 
  header("Content-disposition: attachment; filename=$file"); 
  header("Content-Transfer-Encoding: binary"); 
  header("Pragma: no-cache"); 
  header("Expires: 0");

  echo "$content";
?> 
```

# eclipse - Web 服务部署错误

> ID：10884045
> 
> 赞同：0
> 
> 时间：2012-06-04T15:39:50.677
> 
> 标签：eclipse, web-services, tomcat

我正在使用 Apache Tomcat 7.0 进行 web 服务部署和 eclipse IDE。我已经使用 eclipse 制作了 web 服务，但是当我关闭 eclipse 并尝试使用 web 服务时，它给出了一个错误，同时给出了结果说明

> 异常：java.net.ConnectException：连接被拒绝：连接

但是当我启动 eclipse 并从 eclipse 启动 tomcat localhost 服务器（即单击在 localhost 上运行 Tomcat 服务器）时，Web 服务工作正常并给出应有的结果。如何在不启动eclipse的情况下使用web-service，只需正常启动tomcat 7.0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T15:43:10.060

1.  将您的应用程序打包为`war`（Web ARchive）文件
2.  把它放在你的`<TOMCAT_DIR>/webapps`文件夹里。
3.  使用启动 Tomcat`<TOMCAT_DIR>/bin/startup.bat`

# sql - 除了其他所有内容之外，如何选择一个字段？

> ID：10884046
> 
> 赞同：1
> 
> 时间：2012-06-04T15:39:50.777
> 
> 标签：sql, oracle

在 SQL Server 中，我可以非常方便地进行如下查询：

```
SELECT phone_number, last_known_location, * 
  FROM missing_female_pilots 
 WHERE last_name = 'Earhart' 
```

我怎样才能在 Oracle 中做类似的事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T15:43:51.453

您可以使用表别名：

```
SELECT t.phone_number, t.last_known_location, t.* 
FROM missing_female_pilots t WHERE t.last_name = 'Earhart' 
```

或者只是在之前添加表名`*`：

```
SELECT phone_number, last_known_location, missing_female_pilots.* 
FROM missing_female_pilots  WHERE last_name = 'Earhart' 
```

# c# - C# Linq to XML - Parse Nested Object List

> ID：10884048
> 
> 赞同：3
> 
> 时间：2012-06-04T15:40:07.353
> 
> 标签：c#, linq-to-xml, nested-lists

I currently have a XML file format that goes something like this (whitespace and ellipses added for readability):

```
<root>
    <Module>          //Start with list of Modules
        <ModuleParams>
        </ModuleParams>
    </Module>
    ...

    <DetectLine>      //Now a list of DetectLines
        <DetectLineParams>
        </DetectLineParams>

        <Channels>    //List of Channels embedded in each DetectLine
            <Channel>
                <ChannelParams>
                </ChannelParams>
            </Channel>
            ...

        </Channels>
    </DetectLine>
    ...

</root> 
```

Classes structured as follows:

```
public class Module
{
    public ModuleParams { get; set; }
}

public class DetectLine
{
    public DetectLineParams { get; set; }
    public List<Channel> Channels { get; set; }
}

public class Channel
{
    public ChannelParams { get; set; }
} 
```

The list of Modules and DetectLines are easy to parse with Linq to XML. However, parsing the Channel list for each DetectLine is not as apparent to me. Can this even be done with Linq to XML? I would prefer not having to restructure things to work with a XMLSerializer.

Initial Code (openXML is a OpenFileDialog. Already checked for good filename):

```
List<Module> myModules;
List<DetectLine> myDetectLines;
XDocument config = XDocument.Load(openXML.FileName);

myModules =
         (from myElements in config.Descendants("Module")
          select new Module()
          {
              ModuleParam1 = (string)myElements.Element("ModuleParam1"),
              ModuleParam2 = (string)myElements.Element("ModuleParam2"),
              ...
          }).ToList<Module>();

myDetectLines =
          (from myElements in config.Descendants("DetectLine")
           select new DetectLine()
           {
              DetectLineParam1 = (string)myElements.Element("ModuleParam1"),
              DetectLineParam2 = (string)myElements.Element("ModuleParam2"),
              ...

              // ?? Add Channels list here somehow...
           }).ToList<DetectLine>(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T16:00:48.240

和

```
XElement detectLine = XElement.Parse(@"<DetectLine>      
        <DetectLineParams>
        </DetectLineParams>

        <Channels>    
            <Channel>
                <ChannelParams>
                </ChannelParams>
            </Channel>
            ...

        </Channels>
    </DetectLine>
"); 
```

你可以做例如

```
DetectLine dl1 = new DetectLine() {
  DetectLineParams = ...,
  Channels = (from channel in detectLine.Element("Channels").Element("Channel")
             select new Channel() {
                 ChannelParams = new ChannelParams() { ... = channel.Element("ChannelParams").Value }
             }).ToList(); 
```

我们确实需要查看更多具体的 C# 类代码来说明如何设置完整的查询。

[编辑] 为了适应您现在发布的代码：

```
myDetectLines =
          (from myElements in config.Descendants("DetectLine")
           select new DetectLine()
           {
              DetectLineParam1 = (string)myElements.Element("ModuleParam1"),
              DetectLineParam2 = (string)myElements.Element("ModuleParam2"),
              ...

              Channels = (from channel in myElements.Element("Channels").Element("Channel")
                 select new Channel() {
                     ChannelParams = new ChannelParams() { ... = channel.Element("ChannelParams").Value }
                 }).ToList();
           }).ToList<DetectLine>(); 
```

# r - Analysis of complex survey design with multiple plausible values

> ID：10884051
> 
> 赞同：2
> 
> 时间：2012-06-04T15:40:19.420
> 
> 标签：r, survey

I am working with several large databases (e.g. PISA and NAEP) that use a complex survey design with replicate weights and multiple plausible values. I can address the former using the survey package. However, does there exist an R package/function to analyze the latter?

For reference, I have found this article to provide a good overview of the issue: [http://www.ierinstitute.org/fileadmin/Documents/IERI_Monograph/IERI_Monograph_Volume_02_Chapter_01.pdf](http://www.ierinstitute.org/fileadmin/Documents/IERI_Monograph/IERI_Monograph_Volume_02_Chapter_01.pdf)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T20:50:32.183

我不确定“合理值”的一般概念与使用多重插补来生成几组插补值（例如 Amelia 包所做的）有何不同。但是 Thomas Lumley 的 mitools 包可用于组合各种估算值集，并且它可能用于组合您的合理值集以获得估计的“正确”标准误差。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-23T00:55:06.333

Daniel Caro 为大规模评估开发了一个 R 包。你可以在这里找到它[http://cran.r-project.org/web/packages/intsvy/index.html](http://cran.r-project.org/web/packages/intsvy/index.html)

这是使用回归命令的代码示例，而不是数学上的合理值：

```
## Not run:
# Table I.2.3a, p. 305, International Report 2012
pisa.reg.pv(pvlabel="MATH", x="ST04Q01", by = "IDCNTRYL", data=pisa) 
```

虽然，我不确定这个包是否可以用来分析 NAEP 数据。我希望这能满足您的目的；至少部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-07T00:02:03.223

As of survey version 3.36 there's `withPV`

```
data(pisamaths, package="mitools")
des<-svydesign(id=~SCHOOLID+STIDSTD, strata=~STRATUM, nest=TRUE,
    weights=~W_FSCHWT+condwt, data=pisamaths)

options(survey.lonely.psu="remove")

results<-withPV(list(maths~PV1MATH+PV2MATH+PV3MATH+PV4MATH+PV5MATH),
   data=des,
   action=quote(svyglm(maths~ST04Q01*(PCGIRLS+SMRATIO)+MATHEFF+OPENPS, design=des)))

summary(MIcombine(results)) 
```

# django - Why do I get this error when I run "python manage.py syncdb --all"?

> ID：10884053
> 
> 赞同：5
> 
> 时间：2012-06-04T15:40:24.100
> 
> 标签：django, syncdb

I am trying to apply tutorial [http://docs.django-cms.org/en/2.1.3/getting_started/tutorial.html](http://docs.django-cms.org/en/2.1.3/getting_started/tutorial.html).

But I didn't succeed to perform the initial database setup

Why do I get this error when I run "python manage.py syncdb --all" ?

```
Traceback (most recent call last):
  File "manage.py", line 10, in <module>
    execute_from_command_line(sys.argv)
  File "C:\Python27\lib\site-packages\django\core\management\__init__.py", line 442, in execute_from_command_line
    utility.execute()
  File "C:\Python27\lib\site-packages\django\core\management\__init__.py", line 381, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "C:\Python27\lib\site-packages\django\core\management\base.py", line 195, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "C:\Python27\lib\site-packages\django\core\management\base.py", line 230, in execute
    self.validate()
  File "C:\Python27\lib\site-packages\django\core\management\base.py", line 266, in validate
    num_errors = get_validation_errors(s, app)
  File "C:\Python27\lib\site-packages\django\core\management\validation.py", line 30, in get_validation_errors
    for (app_name, error) in get_app_errors().items():
  File "C:\Python27\lib\site-packages\django\db\models\loading.py", line 158, in get_app_errors
    self._populate()
  File "C:\Python27\lib\site-packages\django\db\models\loading.py", line 64, in _populate
    self.load_app(app_name, True)
  File "C:\Python27\lib\site-packages\django\db\models\loading.py", line 88, in load_app
    models = import_module('.models', app_name)
  File "C:\Python27\lib\site-packages\django\utils\importlib.py", line 35, in import_module
    __import__(name)
  File "C:\Python27\lib\site-packages\django_cms-2.2-py2.7.egg\cms\plugins\link\models.py", line 5, in <module>
    class Link(CMSPlugin):
  File "C:\Python27\lib\site-packages\django_cms-2.2-py2.7.egg\cms\plugins\link\models.py", line 11, in Link
    url = models.URLField(_("link"), verify_exists=False, blank=True, null=True)
  File "C:\Python27\lib\site-packages\django\db\models\fields\__init__.py", line 1265, in __init__
    CharField.__init__(self, verbose_name, name, **kwargs)
  File "C:\Python27\lib\site-packages\django\db\models\fields\__init__.py", line 614, in __init__
    super(CharField, self).__init__(*args, **kwargs)
TypeError: __init__() got an unexpected keyword argument 'verify_exists' 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-04T15:46:14.497

`verify_exists`参数 for在 1.3.1 安全版本中已弃用，`UrlField`并在当前 Git master (1.5dev) 中删除。[https://docs.djangoproject.com/en/1.4/internals/deprecation/](https://docs.djangoproject.com/en/1.4/internals/deprecation/)。这使得这个版本的 django-cms 与当前的 master 不兼容。我建议使用稳定的 Django 版本，例如最新的 1.4，而不是 master。

# python - App Engine 的 UnindexedProperty 包含奇怪的代码

> ID：10884055
> 
> 赞同：9
> 
> 时间：2012-06-04T15:40:36.207
> 
> 标签：python, google-app-engine

请帮助我理解这一点：

在 v1.6.6 上，它位于第 2744 行`google/appengine/ext/db/__init__.py`：

```
class UnindexedProperty(Property):
  """A property that isn't indexed by either built-in or composite indices.

  TextProperty and BlobProperty derive from this class.
  """
  def __init__(self, *args, **kwds):
    """Construct property. See the Property class for details.

    Raises:
      ConfigurationError if indexed=True.
    """
    self._require_parameter(kwds, 'indexed', False)

    kwds['indexed'] = True
    super(UnindexedProperty, self).__init__(*args, **kwds)
 .
 .
 . 
```

在他们将索引参数限制为 False 之后 - 他们将其设置为 True！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T16:46:31.870

在 1.2.2 之前，您可以对任何属性类型进行过滤查询，甚至是 Text 和 Blob。他们确实只返回了空列表，但它确实有效。版本 1.2.2 引入了`indexed`属性的属性，允许您禁用选定属性的索引 [1]。从那时起，您要查询的属性必须被索引，否则将引发异常。

我们知道 Text 和 Blob 属性不能被索引。在不改变任何其他内容的情况下，对这些属性的查询将从 1.2.2 开始引发异常（以前没有）。为了不引入回归并破坏现有应用程序，该行`kwds['indexed'] = True`被添加到`UnindexedProperty`类中。

如果我们可以控制所有依赖的代码，那么开始引发异常将是一个更简洁的解决方案。但鉴于不破坏现有应用程序，决定对其进行修补。

您可以通过更改`kwds['indexed'] = True`为`kwds['indexed'] = False`并运行以下代码段来自己尝试：

```
from google.appengine.ext import db

class TestModel(db.Model):
  text = db.TextProperty()

TestModel(text='foo').put()
print TestModel.all().filter('text =', 'foo').fetch(10) 
```

[1] [http://code.google.com/p/googleappengine/source/browse/trunk/python/RELEASE_NOTES#1165](http://code.google.com/p/googleappengine/source/browse/trunk/python/RELEASE_NOTES#1165)

# java - 使用 JMS 消息时收到通知

> ID：10884056
> 
> 赞同：0
> 
> 时间：2012-06-04T15:40:47.180
> 
> 标签：java, jms, activemq

有没有办法在从 JMS 队列中使用 JMS 消息时获得通知？像监听器或通知？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T17:36:21.297

我假设您正在使用 ActiveMQ，因为您用它标记了问题。

您可以在客户端使用消息时注册**咨询**通知。请参阅[文档以获取建议](http://activemq.apache.org/advisory-message.html)，而您正在寻找的是**ActiveMQ.Advisory.MessageConsumed.Queue**。

**===== 更新 =====**

哦，错误..您使用的是 Joram，而不是 ActiveMQ。这并不简单，但您可以使用[客户端拦截器](http://joram.ow2.org/current/javadoc/org/objectweb/joram/client/jms/MessageInterceptor.html)，它将确认消息返回到队列或主题，然后您将监听该消息。界面如下所示：

```
public interface MessageInterceptor {
    public void handle(javax.jms.Message pMessage, javax.jms.Session pSession);
} 
```

见第 3.5 章。[最新Joram doc PDF](http://joram.ow2.org/doc/Joram-en.pdf)的消息拦截器。

您还可以使用**interceptor_out**服务器端拦截器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T16:06:04.907

不，JMS API 不提供消息传递通知选项的任何方式。这必须在应用程序级别完成。

# mysql - 将数据从 csv 文件导入 mysql db

> ID：10884057
> 
> 赞同：0
> 
> 时间：2012-06-04T15:40:47.550
> 
> 标签：mysql

我正在尝试从仍在 excel 中的 csv 文件加载数据。到目前为止，这是我作为我的 sql 查询的语句：

```
LOAD DATA LOCAL INFILE 'C:\\Documents and Settings\\J03299\\Desktop\\TMETER.csv'
INTO TABLE edata
COLUMNS TERMINATED BY ',' ENCLOSED BY "" LINES TERMINATED BY '\n'
(Year,Month,Day,MJD,xpiles,xstacks,Utilites); 
```

该文件称为 TMETER，它有 7 列。它有 366 行。我只能读取第一行和前四列（直到 MJD），但之后其他所有内容都为空。其次，在第二行中，它将第 124 行中我的文件 (TMETER.csv) 中的所有列放入我的 edata 表中第二行的第一列中。我很困惑

1.  为什么它不从柱桩、堆栈、实用程序中读取数据？（请注意，csv 文件中的列名很奇怪，并且与我的 edata 表不同，例如在数据库表中它是堆，而在实际的 csv 文件中它是 x（堆），表中的堆栈但 csv 文件中的 y（堆栈） .mysql不允许我用这种格式创建etable名称，所以我不得不即兴发挥。这可能是为什么它没有从csv文件读取和映射到mysql中的表吗？
2.  为什么我的语句将我的 csv 文件中的第一行放在 mysql 表的第一行中，然后将所有内容都跳过到第 124 行，然后将 csv 文件中的所有列插入到 mysql 数据库表的第一列中？

对不起，我的英语不好。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T15:46:17.937

当您运行该命令时，它应该会给出类似`Records: 1 Deleted: 0 Skipped: 0 Warnings: 0`. 如果有任何警告，请键入`SHOW WARNINGS`以查看它们是什么。

这听起来像是行尾错误时我有时会遇到的行为。尝试在代码编辑器中打开您的文档并检查以确保您的行实际上以 \n 结尾。如果这不方便，您也可以尝试删除表并使用`LINES TERMINATED BY '\r'`or重新导入`LINES TERMINATED BY '\r\n'`，看看是否可以解决问题。

关于字段名称：此命令忽略文本文件中的字段名称。它所做的只是将第一列与括号中指示的第一个字段（在您的情况下为年）匹配，将第二列与括号中的第二个字段（月）匹配，依此类推。如果文件顶部有字段名称，则应在字段列表的括号前添加 IGNORE 1 LINES 来跳过它们。

# android - Android旋转位图而不制作副本

> ID：10884060
> 
> 赞同：4
> 
> 时间：2012-06-04T15:41:01.313
> 
> 标签：android, image-processing, bitmap, rotation

有没有办法在不复制位图的情况下旋转位图？或者也许是持有位图的图像视图？现在我有类似的东西：

```
Bitmap bm = BitmapFactory.decodeFile(...
// get the orientation
Matrix m = new Matrix
m.postRotate(orientation)
Bitmap new = Bitmap.createFromBitmap(bm, ..., m); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T16:07:00.893

如果没有一个完全独立的新位置来放置旋转的副本，然后删除当前的（非旋转的）副本，那么在算法上确实不是一种简单的方法来执行此旋转。我可以想到一种潜在的算法，你基本上必须拥有一个像素的内存，但我必须花更多的时间来弄清楚实际的算法。

另请查看此 StackOverflow 链接： [将图像旋转 90 度的算法？（没有额外的内存）](https://stackoverflow.com/questions/2968397/algorithm-to-rotate-an-image-90-degrees-in-place-no-extra-memory)

# asp.net - 是否使用 Rfc2898DeriveBytes 提供相同的盐和密码派生相同的密钥

> ID：10884064
> 
> 赞同：0
> 
> 时间：2012-06-04T15:41:04.507
> 
> 标签：asp.net, salt, encryption-symmetric, pbkdf2

我阅读了有关 .NET 中加密的[本教程](http://www.codeproject.com/Articles/38804/Encryption-and-Decryption-on-the-NET-Framework)

它使用 Rfc2898DeriveBytes 创建一个随机密钥，供对称算法使用。但它不保存密钥。稍后在解密方法中，它提供相同的密码和盐并解密文本。

这是否意味着向 Rfc2898DeriveBytes 提供相同的盐和密码可以派生相同的密钥？无需保存密钥，只需保存盐和密码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T21:02:19.643

对，那是正确的。Rfc2898DeriveBytes 的相同输入提供相同的输出。否则，将无法解密。

您引用的文章松散地使用了“随机”一词。Rfc2898DeriveBytes 的输出不是随机的：但它具有高熵。

# asp.net-mvc - Web API：HTTP 动词“选项”

> ID：10884067
> 
> 赞同：1
> 
> 时间：2012-06-04T15:41:18.270
> 
> 标签：asp.net-mvc, asp.net-web-api, beta, http-options-method

asp.net mvc 4 web api beta 中是否支持 HTTP 动词“OPTIONS”？框架不会自动发送响应。我认为你必须自己做这件事。但是有没有这样的方法：GetVerbsForUrl("http://server.com/api/values"); ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T17:36:11.410

有一个称为 ApiExplorer 的功能可以提供 Web Api 描述。您可以在此处查看更多详细信息：

*   [介绍 IApiExplorer/ApiExplorer](http://blogs.msdn.com/b/yaohuang1/archive/2012/05/13/asp-net-web-api-introducing-iapiexplorer-apiexplorer.aspx)
*   [使用 ApiExplorer 生成 Web API 帮助页面](http://blogs.msdn.com/b/yaohuang1/archive/2012/05/21/asp-net-web-api-generating-a-web-api-help-page-using-apiexplorer.aspx)

# svn - 当 repo 更改时，如何将本地文件提交到 subversion repo？

> ID：10884068
> 
> 赞同：3
> 
> 时间：2012-06-04T15:41:21.423
> 
> 标签：svn

我用乌龟svn。我添加了一个文件夹并将其提交到 subversion repo。然后，我的同事做了一些事情，犯了一个错误，并删除了整个文件夹并要求我重新提交工作文件。

但是现在，当我单击 tortoise svn-> commit 时，它说“没有文件被更改或添加”。随着整个文件夹消失，服务器存储库中的文件不再存在。

如果我单击更新，它将删除我的本地文件夹，我不希望这样。我想要的是将本地文件夹中的所有内容重新提交回仓库。我怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T15:51:06.093

You need to *revert* the changes that your coworker did.

First, backup the deleted folder. Now update the parent directory of the folder. Then go to the parent folder -> right click on it -> 'Show log' -> find the entry for the changes that your coworker did -> right click on it -> 'Revert changes from this revision'. Check in your working copy that the directory is back.

Now copy changed files (if any) from backup, do not forget to `svn add` new files (if any). Commit *your directory only* (otherwise other changes your coworker did will be also reverted). Now right click on parent folder -> 'Revert' (this will restore back your co-worker's modifications that have nothing to do with the deleted folder).

By the way, it is important to understand what reverting committed changes does: it applies changes from the commit being reverted 'backwards' to your working copy. So the revision/commit does not disappear from the repository.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T15:42:58.693

好吧，您可以将本地文件夹复制到其他地方，更新，然后将文件夹移回将其添加到颠覆并提交（并用棍子打您的同事）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T18:14:16.413

您只需将更改提交到新分支即可。
如果你不想切换你的主开发。到一个新分支，只需执行以下操作：

*   仍然将您的更改提交到新分支（所以它是备份！）
*   将主分支与您的分支合并。
*   删除所有内容（只保留 .svn 文件）并用您的文件覆盖（来自您的分支）。
*   犯罪。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T15:46:04.387

您需要将文件“添加”到提交中（`svn add`如果您使用的是 svn 的终端版本）。Tortoise svn 中应该有一个命令可以做到这一点。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-04T15:51:22.307

Assuming your coworker didn't just delete the directory, but moved it or created another directory in some other location, you could use 'svn switch' (or the tortoise equivalent) to re-point your current working copy to the new repository location. After that you can safely commit again.

# apache - 是否可以使用 pl/sql 向浏览器返回 HTTP 响应代码？

> ID：10884073
> 
> 赞同：1
> 
> 时间：2012-06-04T15:41:39.927
> 
> 标签：apache, http, plsql, http-headers, oracle11g

我正在研究用 pl/sql 编写的 Web 应用程序。它使用基本身份验证。现在，除非您关闭浏览器，否则没有有效的注销方式。这是我在注销页面上使用的

```
owa_util.mime_header('text/html', FALSE, NULL);
v_browser:= owa_util.get_cgi_env('HTTP_USER_AGENT');
owa_cookie.send('WDB_GATEWAY_LOGOUT', 'YES', path=>'/');
-- Close the HTTP header
owa_util.status_line(401,'Unauthorzed Access', true);
owa_util.http_header_close; 
```

这甚至可能吗。我会感谢你的帮助。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T15:46:26.440

是的，oracle 有名为[utl_http](http://docs.oracle.com/cd/B10500_01/appdev.920/a96612/u_http.htm)和[utl_url的包](http://docs.oracle.com/cd/B10500_01/appdev.920/a96612/u_url.htm#1001422)

来自[文档](http://docs.oracle.com/cd/B10500_01/appdev.920/a96612/u_http.htm#1012294)：

```
HTTP_UNAUTHORIZED CONSTANT PLS_INTEGER := 401 
```

***RESP 类型***

此 PL/SQL 记录类型用于表示 HTTP 响应。

**句法**

```
TYPE resp IS RECORD (
   status_code    PLS_INTEGER,
   reason_phrase  VARCHAR2(256),
   http_version   VARCHAR2(64),
); 
```

# ruby-on-rails-3 - 用虾打开pdf时主机名与服务器证书不匹配

> ID：10884076
> 
> 赞同：2
> 
> 时间：2012-06-04T15:41:48.297
> 
> 标签：ruby-on-rails-3, amazon-s3, prawn

我正在使用虾来构建pdf。我无法打开上传到 Amazon S3 的现有 pdf。我有一个名为的模型`Format`，它有一个`file_name`属性，它有一个关联的上传者。

当我尝试将现有的 pdf 作为模板打开时：

```
pdf.start_new_page(:template => open(@format.file_name_url)) 
```

出现以下错误：

```
hostname was not match with the server certificate 
```

当我自己去时`@format.file_name_url`，我没有任何问题，这意味着 URL 是正确的。到底是怎么回事？谢谢！

# c - 来自文件的 Doxygen 组模块

> ID：10884083
> 
> 赞同：0
> 
> 时间：2012-06-04T15:42:13.210
> 
> 标签：c, grouping, doxygen

是否可以使用 Doxygen 分组，以便将给定文件的所有内容组合在一起，可能在 Doxygen 所谓的[“模块”](http://www.doxygen.nl/manual/grouping.html#modules)中？我包括一个 C 库，并且在文档中我想将所有内容从库中分离出来，而不必作为组成员手动记录库中的每个项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T16:38:02.590

我发现在使用`///`样式文档时，添加

```
/// \addtogroup
/// \{ 
```

在文件的开头，并添加

```
/// \} 
```

在文件的末尾适用于我的目的。

# google-maps - Google Maps API v3 - 未定义 GIcon

> ID：10884085
> 
> 赞同：10
> 
> 时间：2012-06-04T15:42:18.610
> 
> 标签：google-maps, google-maps-api-3, google-api, google-maps-markers, google-maps-api-2

我知道它们是从 v2 到 v3 的一些问题，我可以在这里做些什么来解决它？
v3 不支持 GIcon？

```
// Google-Map icon object
var gMapIcon = new GIcon(G_DEFAULT_ICON); //change to new google.maps.MarkerImage();???
// does icon exist
if ( mapElements[lMapElementIndex]['icon'].toString().length > 0) {
    gMapIcon.image = html_entity_decode(mapElements[lMapElementIndex]['icon']);
    gMapIcon.shadow = "";
    iconHeight = mapElements[lMapElementIndex]['iconheight'];
    iconWidth = mapElements[lMapElementIndex]['iconwidth'];
    gMapIcon.iconSize = new GSize(iconWidth,iconHeight);
    gMapIcon.iconAnchor = new GPoint(0,0);
    gMapIcon.infoWindowAnchor = new GPoint(15,10);
}
    var markerOptions = { 
        icon: gMapIcon //change to image? 
     };
    var marker = new google.maps.Marker(point,markerOptions); 
```

从这里找到[https://developers.google.com/maps/documentation/javascript/overlays?hl=de-DE#SimpleIcons](https://developers.google.com/maps/documentation/javascript/overlays?hl=de-DE#SimpleIcons)

感谢您的帮助或提示！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-04T22:03:53.050

`GIcon`版本 3 不支持，并且不会出现在您链接到的文档中。

```
 var image = 'beachflag.png';
  var myLatLng = new google.maps.LatLng(-33.890542, 151.274856);
  var beachMarker = new google.maps.Marker({
      position: myLatLng,
      map: map,
      icon: image
  }); 
```

您可以指定要直接使用的图像，*不需要*像第 2 版那样的辅助对象`GIcon`。但是，如果您想要非标准尺寸等，则需要使用[https://developers.google.com/maps/documentation/javascript/overlays?hl=de-DE#ComplexIcons](https://developers.google.com/maps/documentation/javascript/overlays?hl=de-DE#ComplexIcons)`MarkerImage`文档中所述的对象

(Version 2's `GIcon` has its equivalent as the optional `MarkerImage` in Version 3)

# c - Microsoft Excel C API 和 Visual Studio

> ID：10884086
> 
> 赞同：1
> 
> 时间：2012-06-04T15:42:22.383
> 
> 标签：c, visual-studio, excel, api

我试图找出一个相当复杂的问题的最佳解决方案。我需要能够将数据库中的数据作为网页仪表板发布。我不允许直接查询数据库，除非通过一个名为 Xtraction 的程序。但是，Xtraction 能够将查询的数据导出到 MS Excel。

我想知道任何人都可以告诉我 Excel 的 C API 是否允许我在 Excel 中获取数据并使用 Excel 的本机图表功能来生成我需要在网页上发布的丰富图表。现在，我知道探索这一点的唯一方法是获得 MS Visual Studio 2010，如果它不能为我做到这一点，我不想花钱。

任何建议表示赞赏。

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T19:15:42.563

C api 将只允许您编写 UDF。出于您的目的 - 图表等 - 您将需要使用自动化。

在您过分购买 VS 2010 之前，您可以探索几个选项 - 1\. 获取 VS 2010 Express - 这是免费版本。然后使用 C++/COM 或 C#/Excel Interop 进行编码。2\. 使用 Excel VBA - 它内置于 excel 本身。只需按 Alt-F11。它将打开 VBA 开发环境。然后，您可以开始创建 VBA 加载项 (.xlam) 并在那里编写创建图形的 VBA 代码。

无论您如何创建图表，将它们导出到文件系统都非常简单

```
ActiveChart.Export Filename:=<file name>, FilterName:="GIF" 
```

注：以上为VBA代码。

编辑：如果您决定使用 excel vba 路线 - 您应该考虑查看宏记录器。它为您在 UI 上执行的操作生成代码 - 它极大地提高了生产力，并且可以立即启动并运行您的初始代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T17:58:38.587

我不太明白您的代码是否将成为由多个用户同时访问的 Web 应用程序的一部分，或者它是否是一种提取和交付在网站上发布的数据的批处理作业。

无论如何，多个用户同时使用 Excel 是行不通的。它开始表现得奇怪且不可靠。这记录在 MSDN 上的某处。

作为从数据库中提取数据并将其转换为图表的批处理作业，Excel 应该可以工作。基本上，如果您可以使用 Excel 手动完成，也可以自动完成。

使用“C API”，您是指Excel的COM /自动化接口吗？如果是，我建议使用 C++ 以及所有 Visual Studio 工具和 Microsoft C++ 扩展，因为它们让您的生活变得更加轻松。

# delphi - 如何将 WebBrowser 呈现到设备上下文？

> ID：10884088
> 
> 赞同：9
> 
> 时间：2012-06-04T15:42:35.737
> 
> 标签：delphi, winapi, internet-explorer-9, rendering, delphi-5

我想将网页（即`TWebBrowser`）呈现给设备上下文。我想使用 Internet Explorer 的布局引擎将内容呈现到设备上下文（即元文件、pdf 元文件）。

* * *

从 Internet Explorer 9 开始，`IHTMLElementRender`不再*支持*该界面：

> ## IHTMLElementRender 接口
> 
> 使用此接口将元素的内容绘制到指定的设备上下文，通常是打印机。
> 
> **成员**
> IHTMLElementRender接口继承自**IUnknown**[**接口**](http://msdn.microsoft.com/en-us/library/ms680509%28v=vs.85%29)，但没有其他成员。

以至于他们不再提到[DrawToDC 方法](http://msdn.microsoft.com/en-us/library/aa752273%28v=vs.85%29.aspx)甚至存在：

> ## [IHTMLElementRender::DrawToDC 方法](http://msdn.microsoft.com/en-us/library/aa752273(v=vs.85).aspx)
> 
> 已弃用。将元素的内容绘制到指定的设备上下文。
> 
> **句法**
> 
> ```
> HRESULT DrawToDC(
>      HDC hDC
> ); 
> ```
> 
> **参数**
> 
> *   *hDC*
>     [in]指定要绘制到的设备的**HDC ，通常是打印机。**
> 
> **返回值**
> 
> 如果成功则返回 S_OK，否则返回错误值。
> 
> **评论**
> 
> 从 Windows Internet Explorer 9 开始，此方法已弃用且不应使用。
> 
> 对于某些打印机，运行**IHTMLElementRender::DrawToDC**可能会导致问题。您可以通过首先运行[IHTMLElementRender::SetDocumentPrinter](http://msdn.microsoft.com/en-us/library/aa752275%28v=vs.85%29.aspx)方法，然后将修改后的设备上下文传递给**IHTMLElementRender::DrawToDC**来确保**IHTMLElementRender::DrawToDC**在所有打印机上正常工作。

 ****注意**：我引用了所有文档，以便在 Microsoft 最终将其从 MSDN 中完全删除时仍然可以找到它。连同接口声明：

```
IHTMLElementRender = interface(IUnknown)
   ['{3050F669-98B5-11CF-BB82-00AA00BDCE0B}']
   function DrawToDC(hdc: HDC): HResult; stdcall;
   function SetDocumentPrinter(const bstrPrinterName: WideString; hdc: HDC): HResult; stdcall;
end; 
```

* * *

## 使用`IViewObject`界面

我尝试转换为使用`IViewObject`（例如[如何在不使用网络浏览器的情况下呈现 HTML 元素？](https://stackoverflow.com/questions/8312170/how-to-render-html-element-without-using-web-browser)）：

```
procedure RenderWebBrowserToMetafile(Browser: TWebBrowser; Metafilename: string);
var
    view: IViewObject;
    m: TMetafile;
    mc: TMetafileCanvas;
    w, h: Integer;
    r: TRect;
    dpix: Integer;
    dpiy: Integer;
    dc: HDC;
begin
    w := WebBrowserScrollWidth(Browser);
    h := WebBrowserScrollHeightStrict(Browser);

    //96dpi screen to 300dpi metafile (destined for printer)
    dc := GetDC(0);
    try
        dpix := GetDeviceCaps(GetDC(0), LOGPIXELSX);
        dpiy := GetDeviceCaps(GetDC(0), LOGPIXELSY);
    finally
        ReleaseDC(0, dc);
    end;
    w := MulDiv(w, 300, dpix);
    h := MulDiv(h, 300, dpiy);

    view := Browser.Document as IViewObject;

    m := TMetafile.Create;
    try
        m.Width := w;
        m.Height := h;
        r := Rect(0, 0, w, h);

        mc := TMetafileCanvas.Create(m, 0);
        try
            view.Draw(
                    DVASPECT_CONTENT, //draw aspect
                    1, //index
                    nil, //pAspectInfo
                    nil, //pDVTargetDevice
                    0, //Target Device Context
                    mc.handle, //hdcDraw
                    @r, //target Bounds
                    @w, //window bounds (for metafiles)
                    nil, //continue function
                    0); //continue value
        finally
            mc.Free;
        end;
        m.SaveToFile(Metafilename);
    finally
        m.Free;
    end;
end; 
```

这段代码的问题在于它只呈现浏览器的*可见*区域（即没有滚动内容）：

我需要渲染*整个*网页（例如打印）。

我尝试将[**绘图方面**](http://msdn.microsoft.com/en-us/library/windows/desktop/ms688655%28v=vs.85%29.aspx)从[**`DVASPECT_CONTENT`**](http://msdn.microsoft.com/en-us/library/windows/desktop/ms690318(v=vs.85).aspx)（如[本示例](http://delphi.about.com/od/vclusing/a/wb_scren_shot.htm)所做的那样）更改为**`DVASPECT_DOCPRINT`**：

> **DVASPECT_DOCPRINT**
> 在屏幕上提供对象的表示，就好像它是使用“文件”菜单中的“打印”命令打印到打印机一样。所描述的数据可以表示页面序列。

结果相同；而不是渲染页面，只渲染可见部分：

如何让IE9渲染引擎渲染？

* * *

我还尝试使用不同的**索引**以及`DVASPECT_DOCPRINT`. 虽然`IViewObject`没有记录，但也许这就是您打印不同*“页面”*的方式：

```
view.Draw(DVASPECT_DOCPRINT, 1, ...);
view.Draw(DVASPECT_DOCPRINT, 2, ...);
view.Draw(DVASPECT_DOCPRINT, 3, ...);
...
view.Draw(DVASPECT_DOCPRINT, n, ...); 
```

但是 WebBrowser 并不关心索引是什么；只渲染电流**`View`**（我认为在使用时这是有道理的`IViewObject`）。

如何将浏览器呈现到设备上下文？

**注意**：该问题带有 标记`delphi`，但该问题中没有特定于**delphi**的内容。

* * *

**更新**：我还尝试了*方面*和*索引*的其他组合：

```
view.Draw(DVASPECT_CONTENT, -1, ...);
view.Draw(DVASPECT_DOCPRINT, -1, ...);
view.Draw(DVASPECT_CONTENT, 0, ...);
view.Draw(DVASPECT_DOCPRINT, 0, ...); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T12:56:50.057

使用 IViewObject，您可以创建当前视口的屏幕截图。我使用一个技巧来创建网页（没有任何框架）或框架文档的屏幕截图。

1.  使用 scrollWidth/scrollHeight/scrollLeft/scrollTop 计算完整的文档大小（检查 IHtmlDocument2 和 IHtmlDocument3 接口）
2.  锁定窗口更新并将文档调整为计算的完整大小
3.  使用 IViewObject 创建快照（您上面的代码似乎还可以）
4.  将文档恢复到原始大小并解锁窗口更新

**请注意，**当文档非常大时，您应该小心这样做。**

# javascript - jQuery AJAX 调用不执行成功块

> ID：10884097
> 
> 赞同：1
> 
> 时间：2012-06-04T15:43:04.333
> 
> 标签：javascript, jquery, ajax

我有一个 Javascript 函数，它对 spring 控制器进行 ajax REST 调用，以从数据库中获取一些东西并将其绘制在地图上。由于某种原因，ajax 调用的成功区域没有执行，但 GET 请求返回“成功”状态。为什么我的成功块不会执行但完整块会执行，有什么原因吗？

询问：

```
$j.ajax({
        url:         url,
        type:      'GET',
        dataType: 'json',
        sucess:   function(json) {
            console.log("getTestData successful");
            boxes = parseJsonForTestData(json);
            //console.log(">> boxes = '" + boxes + "' <<");
        },
        error: function(jqXHR, textStatus, errorThrown) {
            console.log("getTestData failed with textStatus '" + textStatus + "' errorThrown '" + errorThrown + "'");
        },
        complete: function(jqXHR, textStatus){
            console.log("getTestData complete textStatus='" + textStatus + "'");

            if( boxes.length != 0) {
                $j('#results_textfield').text(boxes.length + ' results found');
            }
            else {
                $j('#results_textfield').text(boxes.length + ' result found');
            }
        }
}); 
```

parseJsonForTestData：

```
function parseJsonForTestData(json) {
    console.log(">> In music.js function parseJsonForTestData <<");
    //...abstracted 
} 
```

日志：

```
AJAX call to api/rest/da/getTestData/ music.js (line 310)
GET http://localhost:8080/s2i/api/rest/da/getTestData/

200 OK  39ms    jquery-latest.js (line 6054)

getTestData complete textStatus='success' 
```

请注意，成功块或 parseJsonForTestData 中的任何 console.log 语句都不会出现在日志文件中。

任何想法或建议都会有所帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-04T15:44:45.033

你写 `sucess:`的不是`success:`

这就是代码没有被执行的原因（也许你应该在 js 控制台中有一些相关的错误）

# jquery - jQuery 数组和下拉菜单

> ID：10884101
> 
> 赞同：0
> 
> 时间：2012-06-04T15:43:27.880
> 
> 标签：jquery, arrays, list, drop-down-menu, nested

我一直在环顾四周，我觉得我真的在这里跳过了一条学习曲线，我的脑袋即将因搜索太多而一无所获。

我的问题是我有一个水平菜单，设计有无序列表，为了使其成为下拉菜单，我将无序列表嵌套在第一个无序列表中。

```
<ul class="top-level">
   <li><a href="#"></a>
       <ul class="dropdown">
          <li><a href="#"></a>
          </li>
       <ul>
   <li>
</ul> 
```

现在，嵌套的无序列表设置为“Display:None;”。

由于我在同一个类中拥有所有下拉列表，因此当我尝试切换“显示：无”时 属性为“显示：阻止”所有下拉列表都被切换。

我知道我可能可以将每个下拉列表放入它们自己单独的类中，但是有没有办法用数组来做到这一点？能够单击顶级列表项并带来相应的下拉列表。

感谢帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T16:02:11.437

```
$("ul.top-level li").click(function(event) {
    $(this).find("ul.dropdown").toggle();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T16:08:31.673

像这样的东西：

```
$(".top-level").on("click", "a", function() {
  $(this).next("ul.dropdown").toggle(); // Show / hide the corresponding sub-menu
}); 
```

# jquery - 点击后的jquery

> ID：10884102
> 
> 赞同：1
> 
> 时间：2012-06-04T15:43:28.107
> 
> 标签：jquery, callback, click

无论如何检查单击事件后块元素是否保持为空？`li`因为如果单击后仍然为空，我需要添加一些数据

```
$('.order_list li').click(function() {
      $('#search_block').remove();
      if( ! $('#search_block').exists()) {
           $(this).html(search_box);
... 
```

`exists`它是我在stackoverflow上找到的一个自定义函数作为答案

## 更新

由于`$(this).html(search_box);`li 的内容被替换为输入框，但我想在用户单击另一个 li 后设置另一个文本，而之前没有选择任何内容。

## 更新2

`.exists()`不是问题，问题是当用户单击另一个 li 时，上面的 li 仍然为空

```
$.fn.exists = function () {
    return this.length !== 0;
} 
```

## 更新3

问题[http://jsfiddle.net/vsJ96/1/](http://jsfiddle.net/vsJ96/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T15:44:12.030

我认为

```
$('#search_block').length 
```

更容易。

但是如果你想知道`$('#search_block')`有没有内容那么

```
$('#search_block').contents().length 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T15:52:40.180

如果你想查看一个元素是否存在，你只需要检查 length 属性：

```
if ( $('#search_block').length ) {

} 
```

如果您要查看元素内部是否存在任何内容（例如，对于子元素或文本节点），您可以检查内容的长度：

```
if ( $('#search_block').contents().length ) {

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T16:01:19.767

[http://jsfiddle.net/rbzzq/1/](http://jsfiddle.net/rbzzq/1/)

```
$('body').on( 'click', 'body:has( #search_block ) .order_list li', function() {
    $('#search_block').remove();
    $(this).html(search_box);
}); 
```

# vb.net - VB.Net / Acrobat - 用户手动退出程序后 Acrobat 挂起

> ID：10884104
> 
> 赞同：1
> 
> 时间：2012-06-04T15:43:31.843
> 
> 标签：vb.net, acrobat

我目前遇到 VB.Net 和 Adob​​e Acrobat 的问题。问题来自退出 Acrobat，但 Windows 任务栏仍然指出有一个 Acrobat.exe 进程打开。我试过使用**Marshal.ReleaseComObject()**，但它仍然挂在那里。我不想依赖任务栏上的“结束进程”选项来删除它。

下面是我尝试使用的代码片段：

```
Try
   'Tries To Close Acrobat Application
        acrobatApp.Exit()
        System.Runtime.InteropServices.Marshal.ReleaseComObject(javaScriptObj)
        javaScriptObj = Nothing
        System.Runtime.InteropServices.Marshal.ReleaseComObject(acroPDDoc)
        acroPDDoc = Nothing
        System.Runtime.InteropServices.Marshal.ReleaseComObject(acrobatAVDoc)
        acrobatAVDoc = Nothing
        System.Runtime.InteropServices.Marshal.ReleaseComObject(acrobatApp)
        acrobatApp = Nothing

   'Below is a snippet of code that I found for garbage collecting, but it did not work
        'GC.Collect()
        'GC.WaitForPendingFinalizers()

    Catch ex As Exception
        'Acrobat Could Be Closed Already
    End Try 
```

虽然我不确定这是否是个问题——我在 Acrobat 端运行了一个 javascript saveAs 脚本来制作文件的副本。这也可能是它挂起的一个原因，但我根据保存文件和退出其他 Acrobat/Microsoft 程序的基本知识排除了它。

任何帮助都是有益的！谢谢！

编辑：-我忘了提到 Acrobat 仅在我的应用程序结束时关闭。（目前）我正在尝试考虑用户手动关闭 Acrobat 应用程序的情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T20:31:56.673

我想我不会是唯一一个遇到这个问题的人，所以我对这个问题提出了一个“肮脏的答案”。虽然这不是回答这个问题的最传统方式，但可以通过这个过程来完成。

1.  获取打开的 acrobat 文件总数。
2.  循环浏览整个打开的 Acrobat 文件 - 并将文件名存储到临时数据结构（arrayList、array 等）中
3.  运行“acrobatApp.CloseAllDocs()”、“acrobatApp.Exit()”和一个杀死整个 Acrobat 进程的函数。
4.  从 VB 端重新打开文档 - 使用存储在数据结构内的链接。
5.  显示 Acrobat。

    ```
    If acrobatApp IsNot Nothing AndAlso acrobatApp.GetNumAVDocs > 0 Then
            Dim docs(acrobatApp.GetNumAVDocs) As String

            'Saving And Formatting Names Of Opened Documents
            For i = 0 To acrobatApp.GetNumAVDocs - 1
                acrobatAVDoc = acrobatApp.GetAVDoc(i)
                acroPDDoc = acrobatAVDoc.GetPDDoc
                javaScriptObj = acroPDDoc.GetJSObject
                docs(i) = javaScriptObj.path().ToString.Replace("/", "\").Substring(1)
                position = docs(i).IndexOf("\")
                docs(i) = docs(i).Substring(0, position) + ":\" + docs(i).Substring(position + 1)
            Next

            'Closing And Killing Acrobat Application
            acrobatApp.CloseAllDocs()
            KillAcrobat()

            'Creating New Instance Of Acrobat
            acrobatApp = CreateObject("AcroExch.App")

            'Opening All Previously Opened Documents
            For i = 0 To docs.Length - 1
                acrobatAVDoc = CreateObject("AcroExch.AVDoc")
                acrobatAVDoc.Open(docs(i), Path.GetFileName(docs(i)))
            Next

            'Displaying The Application
            acrobatApp.Show()

        End If 
    ```

# c++ - 如何使用相同的头文件在 C++ 中编译和链接目标文件？

> ID：10884105
> 
> 赞同：8
> 
> 时间：2012-06-04T15:43:35.067
> 
> 标签：c++, object, gcc

我遇到了这个问题，当将我拥有的两个目标文件链接在一起时，GCC 编译器似乎失败了。目标文件`foo1.cc`和`foo2.cc`包含来自名为`foo1.hh`. 此外，头文件`foo.hh`作为对象实例的外部声明出现在`foo1.cc`.

需要注意的是，头文件`foo.hh`只会在两个源文件`foo1.cc`和`foo2.cc`.

当我使用以下命令编译源文件时，一切似乎都正常：

```
g++ foo1.cc foo2.cc 
```

上述命令将生成一个名为`a.out`.

当我尝试将源文件独立编译成目标文件时：

```
g++ -c foo1.cc
g++ -c foo2.cc
g++ -o foo1.o foo2.o 
```

GCC 编译器抱怨在`foo2.cc`. 这些函数应该定义在`foo1.cc`; 但是，链接器不承认这一点。

我想知道是否有办法使用 GCC 编译器解决这个问题。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-04T15:46:29.980

没有问题，你的 gcc 语法有错误。

```
g++ -c foo1.cc
g++ -c foo2.cc
g++ -o foo foo1.o foo2.o 
```

该`-o`参数接受输出文件的名称，因此在您的情况下，它将用链接结果覆盖 foo1.o。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-04T15:48:48.127

您的最后一个命令是链接命令：从 foo2.o 创建一个可执行文件并将该可执行文件命名为 foo1.o。链接器可能找不到创建可执行文件所需的所有信息，因为您的意图是同时使用 foo1.o 和 foo2.o。完全省略`-o`标志：

```
g++ foo1.o foo2.o 
```

# c# - 写入文件需要针对大流量进行优化第 2 部分

> ID：10884106
> 
> 赞同：1
> 
> 时间：2012-06-04T15:43:38.700
> 
> 标签：c#, optimization, io

任何有兴趣了解我来自哪里的人都可以参考第 1 部分，但这不是必需的。

[写入文件需要针对大流量进行优化](https://stackoverflow.com/questions/10828372/write-file-need-to-optimised-for-heavy-traffic)

下面是我编写的一段代码，用于从代理 API 捕获一些金融报价数据。代码将毫无错误地运行。我需要优化代码，因为在高峰时段 zf_TickEvent 方法每秒会调用超过 10000 次。我使用内存流来保存数据，直到达到一定大小，然后将其输出到文本文件中。

代理 API 只是单线程的。

```
void zf_TickEvent(object sender, ZenFire.TickEventArgs e)
{

    outputString = string.Format("{0},{1},{2},{3},{4}\r\n",
                        e.TimeStamp.ToString(timeFmt),
                        e.Product.ToString(),
                        Enum.GetName(typeof(ZenFire.TickType), e.Type),
                        e.Price,
                        e.Volume);

    fillBuffer(outputString);

}

public class memoryStreamClass
{
    public static MemoryStream ms = new MemoryStream();
}

void fillBuffer(string outputString)
{

    byte[] outputByte = Encoding.ASCII.GetBytes(outputString);

    memoryStreamClass.ms.Write(outputByte, 0, outputByte.Length);

    if (memoryStreamClass.ms.Length > 8192)
    {
        emptyBuffer(memoryStreamClass.ms);
        memoryStreamClass.ms.SetLength(0);
        memoryStreamClass.ms.Position = 0;
    }
}

void emptyBuffer(MemoryStream ms)
{
    FileStream outStream = new FileStream("c:\\test.txt", FileMode.Append);

    ms.WriteTo(outStream);
    outStream.Flush();
    outStream.Close();
} 
```

问题：

1.  有什么建议可以让这更快吗？我将尝试改变缓冲区长度，但就代码结构而言，这（几乎）是最快的吗？

2.  当内存流被填满并且我将它清空到文件中时，新数据会发生什么？在清空第一个缓冲区时，是否需要实现第二个缓冲区来保存该数据？还是 c# 足够聪明才能弄清楚？

感谢您的任何建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T15:47:18.643

最快的方法是让一个（或多个）线程将`byte[]`'s 放入 a`BlockingCollection`中，并让一个线程尽可能快地取出项目并将它们写入文件。这样你的生产者和文件写入消费者就完全解耦了。这样做，您将能够承受非常高的负载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T04:37:32.040

至于第二个问题：由于您的程序是单线程程序，因此在刷新流时将忽略传入的数据，因为执行流将在刷新时停止。但我想你使用的框架是异步工作的。在这里你可能无法避免多线程。您必须同步对流的访问。正如@usr 所说，最好的方法是实现生产者-消费者模式。
多线程是一个高级主题，但它是现代编程中必须了解的。考虑学习它，不要忽视。

# internet-explorer-8 - 在 IE8 中强制 IE 7 兼容模式

> ID：10884107
> 
> 赞同：1
> 
> 时间：2012-06-04T15:43:44.083
> 
> 标签：internet-explorer-8, internet-explorer-7, compatibility, mode

我有 ac#asp.net 网站，需要在兼容模式下运行。该网站在弹出窗口中运行（强制）。我在 google 和 stackoverflow 上搜索了有关如何强制兼容模式并找到如下脚本：

```
<meta http-equiv="X-UA-Compatible" value="IE=7"> 
<meta http-equiv="X-UA-Compatible" content="IE=7" />
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" />
<meta http-equiv="X-UA-Compatible" value="IE=8"> 
```

我已经尝试了上述一些方法，但是当我在浏览器中启动网站然后按 F12 键时，我看到以下模式：

浏览器模式：IE8 文档模式：Quirks

所以浏览器模式没有改为兼容模式。

有人知道我的问题是什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T01:42:57.433

兼容模式是浏览器模式设置之一；您无法将用户浏览器更改为兼容模式。您只能控制页面的文档模式 - 这就是您在提供的示例中看到的。

```
<meta http-equiv="X-UA-Compatible" content="IE=7" /> 
```

这将强制文档进入 IE7 标准模式。如果您要使用*EmulateIE7*选项，那将根据您的文档类型来确定它应该是标准还是 Quirks。这是提供给您的关于如何在用户浏览器中查看您的页面的唯一选项。

请务必将其放置在`<head>`您希望影响的页面区域内。此外，当您检查文档模式时，请查看哪些选项旁边有“（页面默认）”，而不是选择了哪些选项。

IE 将尊重您对 x-ua 元标记的手动覆盖。可能是您在测试时不小心将文档模式设置为 Quirks，即使页面的默认模式已通过元标记调整为 IE7。

进一步阅读：[定义文档兼容性](http://msdn.microsoft.com/en-us/library/cc288325%28v=vs.85%29.aspx)

# php - 使用 PHP CURL 的多格式数据表单

> ID：10884111
> 
> 赞同：0
> 
> 时间：2012-06-04T15:44:03.833
> 
> 标签：php, ajax, forms, curl

如何序列化以下代码并使上面的静态变量监听先前的表单输入？

如何使用以下内容发布多表单数据，请帮助。

```
 <?php

        $dest = 'phonenumber'; 
        $user = 'username'; 
        $pass = 'passowrd';

            $ch = curl_init("http://hlr.routotelecom.com/"); 
            curl_setopt($ch, CURLOPT_HEADER, 0); 
            curl_setopt($ch, CURLOPT_POST, 1); 
            curl_setopt($ch, CURLOPT_POSTFIELDS, "number=$dest&user=$user&pass=$pass"); 
            curl_setopt($ch, CURLOPT_POSTFIELDS, array('field1=value&field2=value2'));
            curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 
            $output = curl_exec($ch); curl_close($ch);
            echo print_r(json_decode($output), 1);

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T15:48:20.297

不要构建自己的查询字符串。Curl 会很高兴地接受一个数组并为你做这件事：

```
$data = array(
    'number' => $dest,
    'user' => $user,
    'pass' => $pass
);

curl_setopt($ch, CUROPT_POSTFIELDS, $data); 
```

# android - 使用locationMangager android获取错误的gps位置

> ID：10884114
> 
> 赞同：1
> 
> 时间：2012-06-04T15:44:11.213
> 
> 标签：android, gps, location, locationmanager

我正在使用 mapView 和 LocationManager 制作一个小的 Android 应用程序。我的 LocationManager 应该监听位置并通知我的位置是否超过用户定义的容差。如果我的 LocationManager 注意到位置发生变化，它应该发送一条短信。

```
lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 1000L, Float.parseFloat(txtToleranz.getText().toString()), this); 
```

在这里，我不确定方法 requestLocationUpdates 是始终采用文本字段的当前值还是仅采用给定的起始值...？

此外，我的应用程序应该在 mapView 中显示我的位置，但位置完全错误……为什么？我在真实设备上运行我的应用程序。

```
 double lat = location.getLatitude();
            double lng = location.getLongitude();

            String currentLocation = " Lat: " + lat + " Lng: " + lng + " Tol: " + Toleranz;
            point = new GeoPoint((int) lat * 1000000, (int) lng * 1000000);
            mapController.animateTo(point);
            mapController.setZoom(15);
            System.out.println(currentLocation); 
```

感谢您的任何帮助！最好的问候丹尼尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T15:51:26.780

According to [this SO post](https://stackoverflow.com/questions/3577866/android-geopoint-with-lat-long-values) the `GeoPoint` may be getting constructed incorrectly, this could cause an incorrect location. As for the `LocationManager`, the `requestLocationUpdates` method is only getting run once, meaning it's taking the `EditText's` value when the the method was run, it will not update unless you tell it to. There might be a method inside the the `LocationManager` class to do that.

**EDIT**

Ignore the part about the GeoPoint, upon further reading you are correct in multiplying your long/lat by 1000000

# asp.net - htmlencode 导致锁定 asp.net

> ID：10884116
> 
> 赞同：1
> 
> 时间：2012-06-04T15:44:14.027
> 
> 标签：asp.net, internationalization, html-encode

我有显示为 html 的文本，并使用 htmlencode 过滤了内容。

当我将控件更改为文本框时，我只留下了 htmlencode 代码，它大部分都可以工作。但是，当有国际字符时，例如 éúáó，页面上的 ajax 调用停止工作。该页面实际上正确显示并且没有错误 - javascript或其他错误，但该页面实际上停止工作。

我删除了 htmlencode，现在一切正常。该应用程序被定义为 utf-8。

我只是好奇是否有人明白发生了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T14:48:17.070

我的猜测是您的 Ajax 调用使用 HTTP GET 方法，并且您使用的是 HTML 编码而不是 URL 编码。因此，当您的 Ajax 调用构建的 URL 包含重音字符时，它们可能包含诸如`&acute;`（HTML 编码`é`）之类的字符，并且这些字符破坏了您的 URL 方案，导致请求永远不会到达您的服务器端控制器。的 URL 编码`é`实际上是`%E9`. URL 编码和 HTML 编码是不同的。

当您删除 HtmlEncode 调用时，我想它解决了您`&`破坏 URL 方案的问题。如果到目前为止我是正确的，那么将 Ajax 调用更改为使用 HTTP POST 而不是 HTTP GET 可能是一个好主意，以确保消除任何其他 URL 问题。

# xml - 在bash中生成XML，需要一些高效的思路

> ID：10884120
> 
> 赞同：2
> 
> 时间：2012-06-04T15:44:24.083
> 
> 标签：xml, bash, shell, xml-generation

我需要在 bash 中生成一个 XML 文件（我是 bash/脚本语言的新手，尽管在 C/C++/UNIX 上工作了一段时间）。现在，我正在生成这样的东西，非常平坦

```
st='<'
et='>'
sl='/'
-------------------
stag() {
      text=$st$1$et 
      echo $text >> output_file
}
--------------------
etag() {
      text=$sl$1
      stag $text
}
--------------------
attr() {
      text=$1
      echo $text >> output_file
}
--------------------

#--Function Call
stag "tag"
attr "xml"
etag "tag"

--------------------

#--output
<tag>xml</tag> 
```

在这方面，我觉得有很多机会犯错误，并且在用 C++ 编码这么久之后，我认为应该有一种更好的结构化编码方式......任何想法都值得赞赏......或者你认为的任何材料，我应该先学习，请在这里发帖......谢谢......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T16:08:49.630

您正在寻找类似[xmlstarlet](http://xmlstar.sourceforge.net/)的东西。depyx*子*命令允许您将[PYX 标记](http://xmlstar.sourceforge.net/doc/UG/ch04s07.html)转换为 XML。

这可能足以满足您的原型设计目的。如果没有，您可能需要查看 Ruby、Python 或 Perl 中功能更全面的 XML 库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T17:37:19.703

通常只引用你的字符串而不是对特殊字符使用特殊变量更容易，例如，而不是

```
text=$st$1$et
echo $text 
```

只需使用

```
echo "<$1>" 
```

或 printf "<%s>" $1

至于结构，bash 确实有可以用于属性的数组，但是将它们传递给函数的唯一方法是通过名称，然后您必须跳过箍来获取值：

```
a=(foo bar baz)
f() {
  eval printf "\${$1[1]}"
}
f a
=> bar 
```

# ruby-on-rails - 来自 Rails 应用程序的后台任务和 shell 命令

> ID：10884129
> 
> 赞同：1
> 
> 时间：2012-06-04T15:45:13.537
> 
> 标签：ruby-on-rails, ruby-on-rails-3, delayed-job

我希望经常从我的 Rails 应用程序中创建 3 个后台任务并从这些任务中执行一些 shell 命令。我正在考虑将delayed_job 用于后台任务，但我不确定如何从rails 应用程序安全地执行shell 命令，有人可以告诉我如何从Rails 应用程序执行此操作吗？

杰夫

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T16:30:24.703

有几种方法，都是 Rubyisms。

```
system('cmd','arg1',...) 
```

或者非常 Unixy

```
val = `ls -l` 
```

后者将运行命令并将其输出返回到变量 val。

# java - Ubuntu 上的 JDK 1.2

> ID：10884134
> 
> 赞同：3
> 
> 时间：2012-06-04T15:45:33.120
> 
> 标签：java

我想安装 JDK 1.2 来编译我的遗留项目。由于限制太多，我无法升级到最新的 JDK。我从[Sun 网站](http://oracle.com/technetwork/java/javase/documentation/install-linux-136607.html)下载了它，并按照链接页面中给出的所有步骤进行操作。

当我运行时，`javac -version`我收到以下错误消息：

```
$ /usr/local/jdk1.2.2/bin/javac -version
Error: can't find libjava.so 
```

我在`/usr/local/jdk1.2.2`位置安装了我的 JDK。（我使用的是 Ubuntu 12.04 64 位）。有人可以帮忙吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T16:41:45.987

这与在较新系统上安装 jdk1.3.1 的问题相同。由于 uname -m 返回 x86_64，因此您必须将该选项添加到某些脚本中：

```
/bin/.java_wrapper
/jre/bin/.java_wrapper
/jre/bin/realpath 
```

添加 x86_64 作为 i386 选项示例的案例之一：

```
case "`uname -m`" in
    i[3-6]86  | ia32 | ia64 | i?86 | x86_64)
        proc=i386
        ;; 
```

只需在每个文件顶部的 case 语句中添加“| x86_64”即可​​。

此时，当您运行 java -version 时，您将收到“分段错误”。我仍然不确定如何解决这个问题......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T16:38:25.830

虽然我知道使用特定版本可能有不同的原因，但如果您使用 JDK 1.2 只是因为源代码与 Java 1.2 兼容，我认为您可以使用`-source`（和/或`-target`）最新 JDK 的 javac 开关来通知源代码兼容性。

如需更多信息，请访问[http://docs.oracle.com/javase/6/docs/technotes/tools/windows/javac.html](http://docs.oracle.com/javase/6/docs/technotes/tools/windows/javac.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T16:00:06.600

java 可执行文件无法找到`libjava.so`共享库：

检查您的安装中是否有`libjava.so`文件

```
$ find /usr/local/jdk1.2.2/ -name libjava.so 
```

如果不是您的安装损坏（并且没有任何详细信息，将很难为您提供帮助）

如果文件在那里，您可以尝试将文件所在的目录添加到 LD_LIBRARY_PATH：

```
$ export LD_LIBRARY_PATH=/usr/local/jdk1.2.2/PATH_WHERE_LIBJAVA_SO_IS_LOCATED:$LD_LIBRARY_PATH 
```

# c# - XmlDocument.Load 忽略元素？

> ID：10884135
> 
> 赞同：1
> 
> 时间：2012-06-04T15:45:33.467
> 
> 标签：c#, behavior, xmldocument

在我正在处理的应用程序中，有一个 XML 文档需要加载到内存中进行查询。为此，我打电话给`XmlDocument.Load(string path)`，它一直运行良好。但是，我最近在该方法中遇到了一些奇怪的行为。

我有一个看起来像这样的生成文件（经过编辑以删除敏感数据）：

```
*Snip*
<Info name="name2" parent="name1" modifier="A"/>
<Info name="name2" parent="name1" modifier="B"/>
<Info name="name1" modifier="A"/>
<Info name="name1" modifier="B"/>
<Info name="name3" parent="name2" modifier="A"/>
<Info name="name3" parent="name2" modifier="B"/>
*Snip* 
```

上面有六个条目。但是，在调用 时`XmlDocument.Load`，只加载了 4 个条目，而将前 2 个条目排除在外。我已经通过断点和数据调试器确认了这一点。

但是，当我手动将文档中的数据重新排列为

```
*Snip*
<Info name="name1" modifier="A"/>
<Info name="name1" modifier="B"/>
<Info name="name2" parent="name1" modifier="A"/>
<Info name="name2" parent="name1" modifier="B"/>
<Info name="name3" parent="name2" modifier="A"/>
<Info name="name3" parent="name2" modifier="B"/>
*Snip* 
```

所有数据均已正确加载，没有遗漏任何元素。据我所知，文档格式正确，加载时没有抛出异常。还应该注意的是，当我人为地将`parent`属性添加到所有条目时，它们都可以正确加载，但是如果我正确理解 XML，那应该没关系，它只会使代码中缺少的属性无效。此外，没有为任何元素指定名称空间。

这是预期的行为，还是我错过了什么？如果需要，我可以提供更多详细信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T15:53:32.510

我刚刚尝试了您的示例：

```
XmlDocument doc = new XmlDocument();
doc.LoadXml("<root><Info name=\"name2\" parent=\"name1\" modifier=\"A\"/><Info name=\"name2\" parent=\"name1\" modifier=\"B\"/><Info name=\"name1\" modifier=\"A\"/><Info name=\"name1\" modifier=\"B\"/><Info name=\"name3\" parent=\"name2\" modifier=\"A\"/><Info name=\"name3\" parent=\"name2\" modifier=\"B\"/></root>");
int count = doc.SelectNodes("//root/Info").Count; 
```

它工作得很好。它返回值 6，这是正确的数字。自己试试吧。如果它对您不起作用，那么您的安装一定有问题。但是，如果正如我所怀疑的那样，它对您确实有效，那么问题一定是其他问题。

尝试从小处着手并增加更多复杂性，直到失败。导致它的 XML 中存在其他错误，或者您从 XmlDocument 对象读取节点的方式存在错误。

# c# - Process.Start 和分配的资源

> ID：10884136
> 
> 赞同：0
> 
> 时间：2012-06-04T15:45:36.680
> 
> 标签：c#, .net, process, resources

我有这段代码：

```
Process pLight = new Process();
pLight.StartInfo.UseShellExecute = false;
pLight.StartInfo.FileName = "MyCommand.exe";
//
pLight.StartInfo.Arguments = "-myparam 0";
pLight.Start();
//
pLight.StartInfo.Arguments = "-myparam 1";
pLight.Start();
//
pLight.StartInfo.Arguments = "-myparam 2";
pLight.Start(); 
```

问题是：每次调用时都会“创建”一个新进程`Start()`？

从`Process.Start`文档：

> 如果进程资源已启动，则返回 true；如果没有启动新的进程资源（例如，如果重用现有进程），则为 false。

但每次我调用这个方法时，我都会得到**真实的**。那么我怎样才能重用相同的过程呢？有没有办法使用同一进程运行多个命令？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T15:56:24.810

如果我没看错，你需要做的就是创建一个新的实例，`ProcessStartInfo`然后如果有一个`Process`正在运行，它会重用它。

> 使用此重载通过指定 ProcessStartInfo 实例来启动流程资源。重载将资源与新的 Process 组件相关联。如果进程已经在运行，则不会启动额外的进程资源。相反，现有的流程资源会被重用，并且不会创建新的流程组件。在这种情况下，Start 不会返回新的 Process 组件，而是将 null 返回给调用过程。

[http://msdn.microsoft.com/en-us/library/0w4h05yb.aspx](http://msdn.microsoft.com/en-us/library/0w4h05yb.aspx)（备注下的第一行）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-04T16:22:03.440

```
pLightStartInfo = new ProcessStartInfo();
pLightStartInfo.UseShellExecute = false;
pLightStartInfo.FileName = "MyCommand.exe";
pLightStartInfo.Arguments = "-myparam 0";
pLightStart();
pLightStartInfo.Arguments = "-myparam 1";
pLightStart();
pLightStartInfo.Arguments = "-myparam 2";

Process pLight = new Process(pLightStartInfo); // first time so a new Process will be started

Process myOtherProcess = Process.Start(pLightStartInfo); // second time so myOtherProcess would reuse pLight, given original hadn't closed so both would be "pointing" at one MyCommand.exe 
```

我自己从来没有做过，但这就是它的意思。

# sql - 将数据放入报告 ssrs

> ID：10884139
> 
> 赞同：0
> 
> 时间：2012-06-04T15:46:03.023
> 
> 标签：sql, sql-server

我正在处理我的第一个 SSRS 报告项目，我有点困惑。我设计了自己的自定义报告，看起来与 Excel 中的发票模板一模一样。我的目标是按计划将这张发票/报告按月发送给客户。

但是，我的问题是将数据放入报告的字段中。我一直在使用表格来插入数据，但效果并不好。我使用以下查询创建了一个数据集：

```
SELECT CONVERT(VARCHAR(10), GETDATE(), 103) AS [DD/MM/YYYY] 
```

该列：`DD/MM/YYYY`在我的数据库中不存在，但它只是获取当前日期。我收到一条错误消息：

> 字段的值表达式：SELECT CONVERT(VARCHAR(10), GETDATE(), 103) AS [DD/MM/YYYY] 包含错误。预期表达

对于报告的其他部分，我还想做一些其他的计算。所以我的问题是，我想放入表中的数据是否必须是数据库中的列？或者我可以使用 SSRS 创建它们吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T15:51:52.403

Please go through the link to understand how to create datasets and populate date on to your reports

[Working with Datasets](http://msdn.microsoft.com/en-us/library/ms160324%28v=sql.90%29.aspx)

The steps to create a dataset which retrieves current date is

1.Create a new dataset .Go to the data tab of your report and click on the drop down menu and select < new Dataset >

2.  A dialog box will appear where u need to enter the SQL query ![New DataSet](../Images/3298f78b45ef6d2d01f33873bc6ca011.png)

3.When u click ok ,you will see the newly created dataset in the dataset windows

![DataSet](../Images/a2717eb0fa8e27a44e5759d0d1f86927.png)

4.You can execute the sql query just to verify whether you are getting the current date or not .

5.Then in the Layout panel drag a Textbox in the header and then drag the column from the newly created dataset into it or you can write an expression

```
 =First(Fields!DD_MM_YYYY.Value, "GettingDate") 
```

There is another way of getting the current date and time from SSRS itself instead of creating a dataset .You can use the inbuilt date and time functions in the SSRS .

![Inbuilt Date Functions](../Images/329b039e4b3b575d9f43a844d84b0327.png)

# objective-c - OpenSSL enc 应用程序中可能的双 BIO_free

> ID：10884154
> 
> 赞同：2
> 
> 时间：2012-06-04T15:46:35.977
> 
> 标签：objective-c, cocoa, openssl

（抱歉，这很冗长）我正在尝试将 OpenSSL 支持添加到用 Objective C for OS X 10.6（Snow Leopard）编写的 Cocoa 应用程序中。为了简化问题，我有一个小型包装类，它包含各种 BIO 和密码上下文结构，AETOpenSSLWrapper。如下所示

。H

```
@interface AETOpenSSLWrapper: public NSObject
{
   BIO *writeBIO,encBIO;
   EVP_CIPHER_CTX *ctx;
   unsigned char *readWriteBuff;
}

@property (readwrite,assign) BIO *writeBIO,*encBIO;
@property (readwrite,assign) EVP_CIPHER_CTX *ctx;
@property (readwrite,assign) unsigned char *readWriteBuff;

-(id)init;
...
-(void)dealloc;
@end 
```

.m

```
@implementation AETOpenSSLWrapper

@synthesize writeBIO,encBIO,ctx,readWriteBuff;

-(id)init
{
   self=[super init];
   if(self)
      {
      writeBIO=BIO_new(BIO_s_file());
      encBIO=...
      ctx=...
      buff=...
      (error handling omitted)
      }

   return self;
}
@end 
```

然后各种实用方法链接 BIO，写入输出 BIO，刷新等，特别是一个 -(void)pushEncryptingBIO 链接加密过滤器 BIO（已使用密钥、盐和初始向量初始化）

```
-(void)pushEncryptingBIO
{
   writeBIO=BIO_push(encBIO,writeBIO);
} 
```

最后是我的 dealloc 例程。这是直接从openssl-1.0.1c 发行版提供的**enc程序中提取的**

```
-(void)dealloc
{
   if(readWriteBuff!=NULL)
      OPENSSL_free(readWriteBuff);
   if(writeBIO!=NULL)
      BIO_free_all(writeBIO);
   if(encBIO!=NULL) <----------- this looks wrong
      BIO_free(encBIO); <---+

   [super dealloc];
} 
```

等效代码位于加密输入缓冲区的循环之前以及 openssl 源代码树中 apps/enc.c 中的 MAIN() 例程的末尾：

第 657 - 658 行

```
if (benc != NULL)
   wbio=BIO_push(benc,wbio); 
```

和第 682 - 688 行

```
end:
   ERR_print_errors(bio_err);
   if (strbuf != NULL) OPENSSL_free(strbuf);
   if (buff != NULL) OPENSSL_free(buff);
   if (in != NULL) BIO_free(in);
   if (out != NULL) BIO_free_all(out);
   if (benc != NULL) BIO_free(benc); <--- are we sure about this? 
```

问题是（最后）：由于 BIO 被推送到链上，该调用`BIO_free(benc)`（或在我的代码中）是否应该存在，该链被释放？查看 的实现，它只是沿着 BIO 链运行，递减 ref 计数并在执行过程中释放，并且不会将指针清空。这看起来*一定*是一个错误，但显然我不愿意假设 SSL 维护人员错过了这一点，而我没有。如果我留下电话，我偶尔会遇到崩溃（十分之一），如果我不这样做，我不会，但我不想要泄漏。这是在 Apple 事件处理程序中，因此调试更加复杂。有什么建议么？`BIO_free(encBIO)``writeBIO/out``BIO_free_all``BIO_free_all`*`BIO_free(encBIO)`*

 ** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T14:15:22.457

前段时间我有机会与 BIO 合作，我认为你是对的。从 OpenSSL 手册页：

> BIO_free_all() 释放整个 BIO 链，如果发生错误释放链中的单个 BIO，它不会停止。

此外，由于 OpenSSL 清理函数采用指向结构的指针，它们不能更改指针的值（即，它需要指针的地址才能这样做）。即使 OpenSSL 将指针参数设置为 NULL，也只有副本为 NULL，结果证明是无用的行为。因此，您可以将其设置为 NULL。

举一个具体的例子，下面的 C++ 代码用于使用 PKCS#5 标准加密纯文本。它接收密码作为参数，该密码将用于派生 AES 密钥。以下代码不会泄漏（使用 valgrind 检查）。

```
static int ENCRYPTION_FAILED = 1;
static const EVP_MD *MD = EVP_sha256();
static const EVP_CIPHER *CIPHER = EVP_aes_256_cbc();

static int base64Encrypt(const string& toEncrypt, const string& password, string& base64Encrypted)
{
    static const char magic[]="Salted__";
    int ret = 0;
    EVP_CIPHER_CTX *ctx = NULL;
    BUF_MEM *bptr = NULL;
    unsigned char key[EVP_MAX_KEY_LENGTH], iv[EVP_MAX_IV_LENGTH];
    unsigned char salt[PKCS5_SALT_LEN];
    char *encrypted = NULL;
    /* Allow enough space in output buffer for additional block */
    BIO *bMem = NULL;
    BIO *b64 = NULL;
    BIO *benc = NULL;

    // setting bio context
    if ( (bMem = BIO_new(BIO_s_mem())) == NULL ){
        ret = ENCRYPTION_FAILED; goto err0;
    }
    if ( (b64 = BIO_new(BIO_f_base64())) == NULL ){
        ret = ENCRYPTION_FAILED; goto err0;
    }
    BIO_push(b64,bMem);

    // Generating salt
    if (RAND_pseudo_bytes(salt, sizeof(salt) ) < 0){
        ret = ENCRYPTION_FAILED; goto err0;
    }

    if ((password.size() == 0) && EVP_CIPHER_iv_length(CIPHER) != 0) {
        ret = ENCRYPTION_FAILED; goto err0; 
    }

    // writing salt to bio, base 64 encoded
    if (BIO_write(b64, magic, sizeof magic-1) != sizeof magic-1 || BIO_write(b64, (char *)salt, sizeof salt) != sizeof salt) {
        ret = ENCRYPTION_FAILED; goto err0;
    }   

    // deriving key
    if (!EVP_BytesToKey(CIPHER, MD, salt, (unsigned char *)password.c_str(), password.size(), PKCS5_DEFAULT_ITER, key, iv)){
        ret = ENCRYPTION_FAILED; goto err0;
    }

    if ( (benc=BIO_new(BIO_f_cipher())) == NULL ){
        ret = ENCRYPTION_FAILED; goto err0;
    }
    BIO_get_cipher_ctx(benc, &ctx);

    if (!EVP_CipherInit_ex(ctx, CIPHER, NULL, NULL, NULL, 1)){
        ret = ENCRYPTION_FAILED; goto err0;
    }

    if (!EVP_CipherInit_ex(ctx, NULL, NULL, key, iv, 1)){
        ret = ENCRYPTION_FAILED; goto err0;
    }
    BIO_push(benc, b64);

        // writing to mem bio
    if (BIO_write(benc, (char *)toEncrypt.c_str(), toEncrypt.size()) != (int)toEncrypt.size()){
        ret = ENCRYPTION_FAILED; goto err0;
    }   

    if (!BIO_flush(benc)){

        ret = ENCRYPTION_FAILED; goto err0;
    }

    BIO_get_mem_ptr(benc, &bptr);
    if (bptr->length <= 0){
        ret = ENCRYPTION_FAILED; goto err0;
    }
    encrypted = new char[bptr->length + 1];
    memcpy(encrypted, bptr->data, bptr->length);
    encrypted[bptr->length] = '\0';
    base64Encrypted = encrypted;
    delete[] encrypted;

    if (benc != NULL) BIO_free_all(benc);
    return 0;

    err0:
    if (benc != NULL) BIO_free_all(benc);
    return ret;
} 
```

如您所见，我已经链接了三个 BIO，并且对 BIO_free_all(benc) 的单个调用会清除所有 BIO。

问候。*

# objective-c - 对于强集合实例，将其分配给 nil 是否等于释放它并分配给 nil？

> ID：10884155
> 
> 赞同：0
> 
> 时间：2012-06-04T15:46:46.437
> 
> 标签：objective-c, ios, nsmutablearray

所以我有一个强集合变量x（例如NSMutableArray类型），在做dealloc时，如果我只做x = nil，会不会和下面的效果一样？

```
[x removeAllObjects]; 
[x release]; // not needed in ARC
x = nil; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-04T16:03:21.413

严格来说，两者并不相同。将`strong`变量设置为`nil`确实会释放对象。然而，一个数组只有`removeAllObjects`在它被破坏时才会这样做。如果另一个变量持有对数组的强引用，它将保持活动状态并且不会删除它包含的项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T15:57:17.193

是的，这正是它会做的。我喜欢这样想，就像一个非原子的保留属性，但它适用于所有变量，其中每个分配释放旧值并分配新值。因此将 x 分配给 nil 将释放旧值。就像没有 ARC 一样，您实际上并不需要 removeAllObjects，因为销毁像 NSArray 这样的容器会导致它释放所有其他对象的引用。

为了更好地了解 ARC，我建议您观看 2011 年 WWDC 视频，该视频可在 developer.apple.com 上获得。

另一个值得阅读的好资源是[http://longweekendmobile.com/2011/09/07/objc-automatic-reference-counting-in-xcode-explained/](http://longweekendmobile.com/2011/09/07/objc-automatic-reference-counting-in-xcode-explained/)

# gwt - 如何使用 GWT 制作一个显示下拉列表的按钮？

> ID：10884158
> 
> 赞同：1
> 
> 时间：2012-06-04T15:46:59.347
> 
> 标签：gwt, uibinder

我正在尝试使用 GWT 2.4 制作如下所示的小部件：一个按钮，单击它时可以在其下方显示一个下拉列表。这张图片来自谷歌新的 Blogger 系统。

任何人都可以对此有所了解吗？

![在此处输入图像描述](../Images/01a698511428ac1f10b124768e591864.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T16:10:52.417

您可以使用`MenuBar`带有子菜单（下拉菜单）的单个菜单项（作为按钮）的小部件。

或者您可以使用 a `Button`，然后在 a中`ClickHandler`显示包含[*相对于*](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/PopupPanel.html#showRelativeTo%28com.google.gwt.user.client.ui.UIObject%29)`PopupPanel`按钮的垂直方向的 a （您将其设置为[*auto-hide partner*](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/PopupPanel.html#addAutoHidePartner%28com.google.gwt.dom.client.Element%29)）`MenuBar`[](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/PopupPanel.html#showRelativeTo%28com.google.gwt.user.client.ui.UIObject%29)*[](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/PopupPanel.html#addAutoHidePartner%28com.google.gwt.dom.client.Element%29)*

# css - 后代的选择器，包括元素本身

> ID：10884160
> 
> 赞同：0
> 
> 时间：2012-06-04T15:47:17.647
> 
> 标签：css, css-selectors

我想知道是否有更简单的方法来实现这一点（后代的选择加上元素本身）：

```
<div id="parent">
    <div></div>
    <div></div>
</div>

#parent, #parent * {
    background-color: red;
} 
```

如果我有许多课程的现有规则，例如

```
.b20120411,
.b20120630,
.b20120711,
.b20121010,
.b20130109,
.b20121214 {
    ...
 } 
```

并希望为后代提供它，它会变得混乱：

```
.b20120411, .b20120411 *,
.b20120630, .b20120630 *,
.b20120711, .b20120711 *,
.b20121010, .b20121010 *,
.b20130109, .b20130109 *,
.b20121214, .b20121214 * {
    ...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T15:50:25.273

仅有的：

```
<div id="grand-parent">
    <div id="parent">
        <div></div>
        <div></div>
    </div>
</div>

#grand-parent * {
    background-color: red;
} 
```

# python - Python TypeError 遍历列表

> ID：10884162
> 
> 赞同：0
> 
> 时间：2012-06-04T15:47:21.447
> 
> 标签：python, object, int, typeerror, iterable

我正在自学 Python 3.2，并且正在尝试制作一个程序来匹配名称列表。pList 是一个多维列表，第 0 列有一个字符串，第 1 列有一个整数，第 2 列有一个布尔值。但是，每当我尝试调用此函数时（仅当列表中的行数为偶数时才会运行），我得到一个类型错误。

```
Traceback (most recent call last):
 File "C:\Users\METC\Dropbox\assassins.py", line 150, in <module>
main()
 File "C:\Users\METC\Dropbox\assassins.py", line 11, in main
update(ops, pList)
 File "C:\Users\METC\Dropbox\assassins.py", line 125, in update
b = match(pList)
 File "C:\Users\METC\Dropbox\assassins.py", line 47, in match
q, p = 0
TypeError: 'int' object is not iterable 
```

任何帮助将不胜感激，但请记住，我是该语言的初学者，所以要温柔。:) 我不介意你是否太技术化；我有计算机科学方面的经验。

```
def match(pList):
    b = []
    z = len(pList)-1
    for x in range(z):
        b.append([pList[x][0],0])
    for x in range(z):
        isValid = False
        q, p = 0
        while isValid == False:
            q = random.randint(0, z)
            print('q is ' + str(q))
            if q > z:
                isValid = False
            elif q < 0:
                isValid = False
            elif pList[q][1] == True:
                isValid = False
            else:
                isValid = True
        isMatch = False
        while isMatch == False:
            if pList[q][1] == False:
                isValid = False
                while isValid == False:
                    p = random.randint(0,z)
                    print('p is ' + str(p))
                    if p > z:
                        isValid = False
                    elif p < 0:
                        isValid = False
                    elif pList[p][2] == True:
                        isValid = False
                    else:
                        if q == p:
                            isValid = False
                        else:
                            isValid = True
                print('match valid')
                b[q][1] = pList[p][0]
                isMatch = True
    print('')
    return b 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T16:08:28.563

这是你的构造：

```
q, p = 0 
```

它试图通过迭代单个 int 来解压它。这不是有效的 Python 语法。我想错误可能会更好。

采用：

```
q = p = 0 
```

反而。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T18:08:12.807

你的逻辑**太**复杂了，以至于我必须进行几次传递才能缩小规模并向你展示你做错了什么。

首先，正如其他人所指出的，我们将修复实际报告的错误。同时，我们将应用一个简单的原则：*不要与布尔文字比较*。你不会说“如果真的在下雨，我需要一把伞”。你说“如果下雨，我需要一把伞”。所以去掉多余的东西。`if isValid`比**更**清楚`if isValid == True`，因为它准确地突出了`isValid`应该是什么意思。我还将取出调试跟踪（`print`显然只是为了检查代码是否在做正确的事情的语句；*首先简化代码*，然后检查更少）。

```
def match(pList):
    b = []
    z = len(pList)-1
    for x in range(z):
        b.append([pList[x][0],0])
    for x in range(z):
        isValid = False
        q = p = 0
        while not isValid:
            q = random.randint(0, z)
            if q > z:
                isValid = False
            elif q < 0:
                isValid = False
            elif pList[q][1]:
                isValid = False
            else:
                isValid = True
        isMatch = False
        while not isMatch:
            if not pList[q][1]:
                isValid = False
                while not isValid:
                    p = random.randint(0,z)
                    if p > z:
                        isValid = False
                    elif p < 0:
                        isValid = False
                    elif pList[p][2]:
                        isValid = False
                    else:
                        if q == p:
                            isValid = False
                        else:
                            isValid = True
                b[q][1] = pList[p][0]
                isMatch = True
    return b 
```

接下来，我们将简化我们的条件逻辑。首先，返回的结果`random.randint(0, z)` **不能**是`< 0`也不`> z`，永远，无论如何。这是功能的一部分。因此，编写代码来处理这些情况是没有意义的，实际上这样做是错误的。编写代码来处理某些事情意味着它实际上可能会发生。这对阅读代码的人来说是一种分心，而且是一个谎言。它在重要的事情（调用`random.randint`和检查`pList`值）之间放置了额外的空间。

我们还将简化 if/else 对，它们只是相应地设置另一个布尔值。出于同样的原因，你不会写

```
if x == 1:
    y == 1
elif x == 2:
    y == 2
# ... etc. ad infinitum for every possible integer value of x 
```

你也不应该对布尔值做同样的事情。最后，我们可以而且应该使用逻辑`and`和`or`来连接布尔条件。

```
def match(pList):
    b = []
    z = len(pList)-1
    for x in range(z):
        b.append([pList[x][0],0])
    for x in range(z):
        isValid = False
        q = p = 0
        while not isValid:
            q = random.randint(0, z)
            isValid = not pList[q][1]
        isMatch = False
        while not isMatch:
            if not pList[q][1]:
                isValid = False
                while not isValid:
                    p = random.randint(0,z)
                    isValid = not pList[p][2] and (q != p)
                b[q][1] = pList[p][0]
                isMatch = True
    return b 
```

我的下一步将是修复列表索引。索引到列表中**通常不是你真正想要**的，实际上它在这里引入了一个错误。很明显，您想要遍历 ; 的每一“行” `pList`。但是`range(z)`给你从`0`到`z-1`包含的数字，所以`len(pList)`在计算中减去 1 是不正确的`z`。例如，如果`pList`有 5 个元素，您将计算`z = 4`并产生`range(z) = [0, 1, 2, 3]`。您将永远无法访问`pList[4]`，并且`b`只有 4 个元素。

`z`从根本上说，您正在用 做两件事。一个是使循环运行的次数与 中的“行”一样多`pList`，并且（在第一个循环中）对每个“行”执行一些操作。去做这个

这很重要：*`range`不是魔术，它与 for-loops 没有特殊联系*。它只是一个产生数字列表的函数。在 Python 中，`for`循环*直接为您提供元素*。所有这些索引废话就是 - 废话，最好留给能力较弱的语言。如果你想对列表的每个元素做一些事情，那么通过*编写循环遍历列表的每个元素的代码，**对列表的每个元素做一些事情*。直接地。不要超过一些单独的索引列表，然后您可以使用这些索引将其索引回原始索引。这会让事情变得复杂。

 *您要做的第二件事`z`是生成一个可能的索引的随机数，以便您可以索引`pList`以获得随机行。换句话说，您只想选择一个随机行。所以*只需随机选择一行*。该`random`模块直接提供此功能：该函数被调用`random.choice`，它的功能与听起来完全一样。

这里有一个小问题：原始代码比较`p == q`，即比较两个随机选择的列表索引是否相等。如果我们不再编制索引，那么我们就没有可比较的索引。要解决这个问题，我们需要了解最初的目的是什么：再次*检查新选择的行是否实际上是旧选择的行*。同样，我们通过直接检查来简化：我们选择新行而不是新索引，然后查看它是否`is`是旧行。

我们还有一个问题，我们需要从中选择一个对应的行，`b`该行对应于`pList`我们之前识别为 的行`q`。为了解决这个问题，我们可以在选择`b`行的同时选择`pList`行。这有点棘手：我的方法是制作成对的行列表 - 在每一对中，会有一行 from `b`，然后是一行 from `pList`。这不需要任何复杂的东西——实际上有一个内置函数可以完全按照我们的意愿拼接`b`在一起`pList`：它被称为`zip`. 无论如何，从该行对列表中选择了一个行对，我们只需将这两行解压缩为两个变量 - 使用`q, p = ...`事实证明，您首先错误地使用了语法。这就是它的用途。

`p`通过这些更改，我们实际上可以`q`完全摆脱`z`. 这很好，因为根本不清楚这些名字应该是什么意思。

```
def match(pList):
    b = []
    for row in pList:
        b.append([row[0], 0])
    for row in pList:
        isValid = False
        while not isValid:
            first_row, b_row = random.choice(zip(pList, b))
            isValid = not first_row[1]
        isMatch = False
        while not isMatch:
            if not first_row[1]:
                isValid = False
                while not isValid:
                    second_row = random.choice(pList)
                    isValid = not second_row[2] and (first_row is not second_row)
                b_row[1] = second_row[0]
                isMatch = True
    return b 
```

是时候进行一些更合乎逻辑的清理了。在第一个 while 循环中，我们将继续循环直到`isValid`变为 true。也就是说，直到`not first_row[1]`成为真的。在第二个 while 循环中，`first_row`永远不会改变，因此，由于`not first_row[1]`循环开始时为真，因此它将始终保持为真。因此，完全没有必要进行 if-check。

一旦它消失了，我们发现第二个while循环实际上也完全没用：它会循环`while not isMatch`，即*直到* `isMatch`。是什么`isMatch`？好吧，在我们开始循环之前，它是`False`，在循环结束时，它是`True`。总是。所以我们知道这段代码只会运行一次。我们进入循环，走到最后，设置`isMatch`为真，然后退出，因为`isMatch`刚刚设置为真，是真。只运行一次的代码不需要循环；这只是代码。

我将在这里做的另一件事是通过在我们完成`while isValid`后将它们转换为刚刚输出来稍微清理循环。**不是邪恶的**（也不是）。它们实际上简化了我们对布尔值的思考，因为我们不再检查（强调）；我们只是直接与我们分配给的内容进行比较。这意味着我们也摆脱了变量，这又是一个*实际上并没有告诉我们太多*信息的名称。`break`**`break`**`continue``not isValid``not``isValid``isValid`

 *```
def match(pList):
    b = []
    for row in pList:
        b.append([row[0], 0])
    for row in pList:
        while True:
            first_row, b_row = random.choice(zip(pList, b))
            if not first_row[1]:
                break
        while True:
            second_row = random.choice(pList)
            if not second_row[2] and (first_row is not second_row):
                break
        b_row[1] = second_row[0]
    return b 
```

最后一件事：我们可以`b`更干净地构建。通过附加元素来建立一个列表是一个傻瓜游戏。*不要告诉 Python 如何构建列表。它知道怎么做。*相反，*要求一个符合您的规范*的列表，并带有**列表理解**。这比解释更简单（如果你需要解释，请咨询谷歌），所以我会继续给你一个版本：

```
def match(pList):
    b = [[row[0], 0] for row in pList]
    for row in pList:
        while True:
            first_row, b_row = random.choice(zip(pList, b))
            if not first_row[1]:
                break
        while True:
            second_row = random.choice(pList)
            if not second_row[2] and (first_row is not second_row):
                break
        b_row[1] = second_row[0]
    return b 
```

从这里开始，如果不了解**您实际在做什么**，就很难纠正或改进任何事情。经过所有这些工作，*我仍然不知道！*

您设置它的方式，您选择一个随机行，与行数一样多 - 但您仍然可以选择重复项。那是你真正想要的吗？还是您想以随机顺序选择每一行一次？无论如何，以随机顺序执行它有什么意义？

选择第一行后，您随机选择第二行进行匹配。你真的想要每第一行一个随机行吗？还是您想尝试所有可能的行对？

到底这些数据是什么？输出`b`数据代表什么？一开始到底是什么`pList`，为什么叫它`pList`？您与此`match`功能“匹配”什么？老实说，我无法想象。**

# javascript - 来自 Google Map 的文本气泡中带有数据的多个标记

> ID：10884163
> 
> 赞同：0
> 
> 时间：2012-06-04T15:47:35.067
> 
> 标签：javascript, google-maps

我正在尝试创建一个带有指示两个单独星巴克位置的标记的谷歌地图画布。当我点击每个标记时，我希望文本气泡填充谷歌地图关于位置（地址、电话......）的信息。我知道如何在页面上放置标记，但我无法弄清楚如何使用来自 Google 地图的数据填充气泡。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T16:53:18.957

首先查看开发人员指南的[**Google Places Library**部分](https://developers.google.com/maps/documentation/javascript/places)以熟悉它的工作原理，然后您可以在准备开始编码时使用[**PlacesService** API 文档。](https://developers.google.com/maps/documentation/javascript/reference#PlacesService)所有相关的 JavaScript 类也在 API Doc 的那个区域中。

# java - 搜索多个文件不起作用

> ID：10884168
> 
> 赞同：-1
> 
> 时间：2012-06-04T15:48:00.773
> 
> 标签：java, file, search

好的，所以我有这个函数，我用它来搜索文件中的特定文本，当它在文件中找到该文本时，它应该返回包含该文本的所有文件中的所有行所以，我有一个函数这样做...但是我有另一个功能有点不同，它不返回任何东西，我很确定该文件包含搜索到的文本...所以，这里是有效的功能：

```
 public void searchText(String text, CommandSender p) {

    File[] searchFiles = new File[files.size()];
    searchFiles = files.toArray(searchFiles);

    FileReader fileReader = null;
    BufferedReader br = null;

    for(File searchFile : searchFiles)
    {
        try {
            fileReader = new FileReader(searchFile);
            br = new BufferedReader(fileReader);
            String line = "";

            while ((line = br.readLine()) != null) {
                if (line.indexOf(text) >= 0) {
                    p.sendMessage(line);
                }
            }

        } catch (Exception e) {
            if((fileReader != null) && (br != null))
            {
                try {
                    br.close();
                    fileReader.close();
                } catch (IOException e1) {
                    // TODO Auto-generated catch block
                    e1.printStackTrace();
                }
            }

            e.printStackTrace();
        } finally {
            if((fileReader != null) && (br != null))
            {
                try {
                    br.close();
                    fileReader.close();
                } catch (IOException e1) {
                    // TODO Auto-generated catch block
                    e1.printStackTrace();
                }
            }
        }
    }
} 
```

该函数很好地将这些行提供给控制台。但是当我使用这个功能时：

```
 public String searchPos(int x, int y, int z) {
    String xyz = z + ", " + y + ", " + z;
    StringBuffer sb = new StringBuffer();
    File[] searchFiles = new File[files.size()];
    searchFiles = files.toArray(searchFiles);

    FileReader fileReader = null;
    BufferedReader br = null;

    for(File searchFile : searchFiles)
    {
        try {
            fileReader = new FileReader(searchFile);
            br = new BufferedReader(fileReader);
            String line = "";

            while ((line = br.readLine()) != null) {
                if ((line.indexOf(xyz) >= 0) || (line.contains(xyz))) {
                    sb.append(line);
                }
            }

        } catch (Exception e) {
            if((fileReader != null) && (br != null))
            {
                try {
                    br.close();
                    fileReader.close();
                } catch (IOException e1) {
                    e1.printStackTrace();
                }
            }

            e.printStackTrace();
        } finally {
            if((fileReader != null) && (br != null))
            {
                try {
                    br.close();
                    fileReader.close();
                } catch (IOException e1) {
                    e1.printStackTrace();
                }
            }
        }
    }
    return  sb.toString();
} 
```

返回只是“”或什么都没有，我只是不明白为什么第一个函数有效，而第二个无效。

提前致谢， blackwolf12333

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T15:55:26.553

你永远不会向`StringBuffer`对象添加任何东西，所以我希望它会返回`""`

# sql - Oracle：使用外键创建表时出错

> ID：10884169
> 
> 赞同：0
> 
> 时间：2012-06-04T15:48:01.773
> 
> 标签：sql, oracle, foreign-keys, create-table

我是甲骨文的新手。我正在尝试使用外键创建一个表，但我不断收到神秘的错误消息：

> ORA-00907: 缺少右括号

为了：

```
CREATE TABLE purchase_history
(
    PURCHASE_NUMBER       VARCHAR(16) NOT NULL,
    CREDIT_ENABLED CHAR(1)     NOT NULL CHECK (CREDIT_ENABLED IN ('T','F')),
    CONSTRAINT fk_customers FORIEGN KEY (customer_id) REFERENCES customers(customer_id)

); 
```

我没有看到缺少的括号。我猜还有别的事情正在发生。我已经在 Google 上搜索了使用外键创建表的示例。我发现了几种不同的语法风格，并尝试了一些，但没有任何乐趣。

我需要如何更改我上面的陈述？

非常感谢

史蒂夫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T15:50:11.950

Start with:

```
FORIEGN -> FOREIGN 
```

# c# - 用于 MONO 的多门户 CMS

> ID：10884170
> 
> 赞同：1
> 
> 时间：2012-06-04T15:48:08.137
> 
> 标签：c#, asp.net, content-management-system, mono

我正在寻找一个基于 ASP.net（最好是 MVC 3）的 CMS 系统，它也在 Linux 系统上的 MONO 下运行，并且能够托管多个门户，因此我可以通过一次安装托管 2 个以上的页面并共享一些资源和已经内置了文章、图片库等基本内容，但也可以使用 C# 进行扩展。

多年前已经提出的类似问题没有合适的答案，但从那时起很多事情都发生了变化。

我已经检查了 Kooboo 3（基本系统看起来不错，但几乎没有像图片库这样的模块）和 mojoPortal（没有 multi protal，后端确实有 chrome 的布局问题）。

有谁知道适合我需要的东西（更好）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T01:41:02.930

也许有点晚了，但结帐 kooboo cms - [KoobooCMS](http://kooboo.com)

相当可扩展，我喜欢他们不会将沉重的 CMS 范式强加给您。有一点学习曲线，但老实说，与 Umbraco 或 Orchard 相比，我更容易完成一个网站。此外，它可以在后端插入。

Kooboo 4 太棒了！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T07:24:33.680

[Orchard](http://orchardproject.net/)支持[多租户](http://docs.orchardproject.net/Documentation/Setting-up-a-multi-tenant-orchard-site)并基于 ASP.Net MVC 构建。我还没有尝试过，但[根据网站](http://docs.orchardproject.net/Documentation/Running-Orchard-on-Mono)，它可以在单声道上运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T10:54:22.020

似乎没有什么可以满足我的需求，我想将我的服务器切换到 Windows，这样我就可以在那里使用更多的产品。
目前我正在研究 Composite C1 和 Umbraco。

# r - 在 r 中集成一个函数（长度错误）

> ID：10884173
> 
> 赞同：0
> 
> 时间：2012-06-04T15:48:34.677
> 
> 标签：r

我在 R 中遇到了“集成”命令的问题，我不知道如何解决它，因此非常感谢如何处理这个问题的任何帮助！

我有一些数据，我使用 nls 命令拟合了一个函数。我想在一定范围内（例如 2-20）集成这个函数，在我的例子中，它说明了水柱中 2-20 米的荧光——可以是任何函数。

我尝试这样做的方式：

```
depth <- seq(0,100, by=.1)  
#### First making a vector that simulates depth (Have the real once in my own data set).

flu <- 0.216 + 0.140*depth + (-0.01538*(depth^2)) + 0.0004134*(depth^3)  
### Fitted function.

integrand <- function(depth) {flu}

integrate(integrand, lower= 2, upper= 20) 
```

当我这样做时，R 说： *积分错误（整数，下 = 2，上 = 20）：函数的评估给出了错误长度的结果*

我也尝试过对流感函数进行矢量化，然后再次集成，但这没有帮助。也许它是带有浮点的东西？但我不知道如何处理。

希望你能帮助我 - 感谢您的时间和提前帮助！！！索伦

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T16:02:00.587

```
 depth <- seq(0,100, by=.1)  
 flu <- function(depth) {0.216 + 0.140*depth + (-0.01538*(depth^2)) + 0.0004134*(depth^3) }
 integrate(flu, lower= 2, upper= 20)
#7.170026 with absolute error < 8e-14 
```

# winapi - 事件触发窗口消息

> ID：10884178
> 
> 赞同：0
> 
> 时间：2012-06-04T15:49:04.260
> 
> 标签：winapi, overlapped-io

有没有办法在设置事件时生成窗口消息？我想设置一个重叠的 I/O 操作，所以它不会阻塞，但我不想轮询它的状态。我知道我可以使用线程，但我只需要它来执行此操作。似乎有更好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T16:06:08.417

您可能可以这样做，但是 Windows 更直接地支持的是 using ，当您收到消息*或*您传递的任何句柄（只能是一个）发出信号`MsgWaitForMultipleObjects`时，它将返回。

 *或者，您可以使用`ReadFileEx`/`WriteFileEx`来执行 I/O，然后使用`MsgWaitForMultipleObjectsEx`. 在这种情况下，您指定一个完成例程。执行直接从您的调用跳转`MsgWaitForMultipleObjectsEx`到您的完成例程，而无需查看消息/返回值来弄清楚发生了什么，然后跳转到代码以适当地处理它。

无论哪种方式，您都将继续处理其他 Windows 消息并处理 I/O 的完成，而无需轮询 I/O 的完成情况。*

# tomcat - 如何确定MyEclipse如何部署Tomcat webapp

> ID：10884179
> 
> 赞同：1
> 
> 时间：2012-06-04T15:49:10.373
> 
> 标签：tomcat, web-applications, intellij-idea, war, myeclipse

我得到了一个将应用程序部署到 Tomcat 的 MyEclipse 项目。部署工作正常，我可以在 MyEclipse IDE 中运行该应用程序。

我更喜欢使用 IntelliJ 进行开发。IntelliJ 具有工件和构面属性屏幕，我可以在其中准确确定 webapp 目录中的类、资源和库的部署位置。有没有我可以在 MyEclipse 中找到复制 webapp 的所有部分的地方，所以我可以在 IntelliJ 中重新创建这个项目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T15:53:44.630

在 Servers 视图中，双击 tomcat 服务器——该屏幕包含您要查找的信息。如果当前未显示“服务器”窗口，请选择“窗口”/“显示视图”/“服务器”。

# c# - 在 C# 中使用另一个 com 对象创建一个 com 对象

> ID：10884182
> 
> 赞同：0
> 
> 时间：2012-06-04T15:49:25.383
> 
> 标签：c#, .net-3.5, late-binding

这是对上一个问题的跟进。我正在尝试将一些 Vb.net 代码转换为 C#。创建一个 com 对象 (atlDirectorObject.atlDirector) 并用于通过参数创建另一个 com 对象 (atl3270Tool)。atl3270Tool 未在 C# 版本中创建。尝试通过对象数组引用 atl3270Tool 是否走错了路？

```
'working vb code
Dim atl3270Tool
Dim ErrMsg As String
Dim atlDirectorObject = CreateObject("atlDirectorObject.atlDirector")
atlDirectorObject.CreateTool("3270", 1, True, True, 0, atl3270Tool, ErrMsg)
'atl3270Tool is working com object at this point = success

//non-working c# code
object atl3270Tool = null;
string ErrMsg = null;
object atlDirectorObject = Activator.CreateInstance(Type.GetTypeFromProgID("atlDirectorObject.atlDirector"));
//atlDirectorObject is a com object now
//attempt to reference atl3270Tool inside an object array
object[] p = { "3270", 1, true, true, 0, atl3270Tool, ErrMsg };
Microsoft.VisualBasic.CompilerServices.NewLateBinding.LateCall(atlDirectorObject, null, "CreateTool", p, null, null, null, false);
//>>>>>>>>atl3270Tool is still null at this point<<<<<<<<< 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T19:18:08.363

汉斯是对的。最好在 vb.net 中执行此操作。但是对于那些决心在 C# 中执行此操作的人，这是您的解决方案

```
 object atl3270Tool = null, ErrMsg = null;
    object atlDirectorObject = Activator.CreateInstance(Type.GetTypeFromProgID("atlDirectorObject.atlDirector"));
    object[] p = { "3270", 1, true, true, 0, atl3270Tool, ErrMsg };
    object[] p2 = { "xxxx", "", "xxxxxxxxxx", ErrMsg };
    Boolean[] cb = new Boolean[7];
    cb[5] = true; //set array index of atl3270Tool to true
    Microsoft.VisualBasic.CompilerServices.NewLateBinding.LateCall(atlDirectorObject, atlDirectorObject.GetType(), "CreateTool", p, null, null, cb, false);
    atl3270Tool = p[5];
    Microsoft.VisualBasic.CompilerServices.NewLateBinding.LateCall(atl3270Tool, atl3270Tool.GetType(), "ShowScreen", p2, null, null, null, false);
// add code to release com objects 
```

# database - Solr best practice: All data in Solr or periodically copy to Solr?

> ID：10884187
> 
> 赞同：2
> 
> 时间：2012-06-04T15:50:00.140
> 
> 标签：database, solr

Solr supports updating, hence it is possible to develop a web app that stores all data within Solr. Is that a good idea?

Using just Solr, the user would update the Solr documents directly if they change something. For example, a user might edit a Recipe document to contain a new tag. This approach is good because the app simply has only one database.

Using two databases, the user updates the database as frequently as it needs to. Then, periodically the system updates the Solr index. This approach allows you to use the database technology to keep data consistent and doesn't require any slow rebuilding of Solr indexes.

For my particular application, writes to the database will be infrequent.

Which approach makes the most sense and will lead to the most stable system?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T16:15:16.383

如果您在数据库中的更新不频繁，那么使用[DIH](http://wiki.apache.org/solr/DataImportHandler)进行夜间增量导入很容易，这是人们使用 Solr 的典型方式（也就是说，不是他们数据的主要存储）。也有一些人使用 Solr 作为他们的主要商店，但这种情况要少得多，尽管当[4.0](https://wiki.apache.org/solr/Solr4.0)发布时，它包含了一些改进，使得以这种方式使用它更容易。

# c# - Call WCF - Host from Windows application

> ID：10884206
> 
> 赞同：2
> 
> 时间：2012-06-04T15:51:38.340
> 
> 标签：c#, wcf

I have 4 projects in my solution. 2 WCF Service Library projects called `GetDetfromDB`, `ModifyDBService`, one console application which has reference of these WCF service libraries and a windows application to call this WCF Service.

I made the reference of the console app in windows app. Now I am able to call the client app from window app.

But now how can I invoke the services which are referred in console app by calling from windows app?

Note: When I press F5 or Debugger-->Start new instance both service runs correctly from my console. I configured all the binding,endpoints address correctly. I want how to call it programmatically.

Here is my console application code:

```
namespace ServiceHostConsole
{
    public class Program
    {
        static void Main(string[] args)
        {
            Console.WriteLine("enter to start");
            Console.Read();

            Type serviceType = typeof(GetDetfromDB.ImpService);
            Type serviceModifyDB = typeof(ModifyDBService.Manipulate);

            ServiceHost host1 = new ServiceHost(serviceModifyDB);
            host1.Open();

            using (ServiceHost host = new ServiceHost(serviceType))
            {
                host.Open();

                Console.WriteLine("The Product Service is available");
                Console.ReadLine(); host.Close();
            }

            Console.WriteLine("Please enter to close modify service");
            Console.Read();
            host1.Close();
        }

        public string returnPath()
        {
            string folder = Environment.CurrentDirectory;
            return folder;
        }
    }
} 
```

From Windows application I am calling like this ....

```
 public Form1()
 {
      InitializeComponent();

      ServiceHostConsole.Program pb = new ServiceHostConsole.Program();
      Process.Start(pb.returnPath()+ @"\ServiceHostConsole.exe");
 } 
```

Now I am getting the following error when program tries to open my service..

> Service 'ModifyDBService.Manipulate' has zero application (non-infrastructure) endpoints. This might be because no configuration file was found for your application, or because no service element matching the service name could be found in the configuration file, or because no endpoints were defined in the service element

I am suspecting that I am calling blindly the method only and not invoking the service.

Kindly help me to get out of this issue, I have been struggling for the past 5 days for this.

I need to publish my windows application and when i click setup both my windows application and client application with invoked services should open. This is my requirement.

My App.config of ServiceHostConsole look like this,

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <system.serviceModel>
        <services>
            <service name="GetDetfromDB.ImpService">
                <endpoint address="http://localhost:8080/MyService" binding="basicHttpBinding"
                    bindingConfiguration="" contract="GetDetfromDB.IGetExpenseValuestype" />
            </service>
            <service name="ModifyDBService.Manipulate">
                <endpoint address="http://localhost:8081/MyService1." binding="basicHttpBinding"
                    bindingConfiguration="" contract="ModifyDBService.IManipulateDB" />
            </service>
        </services>
    </system.serviceModel>
</configuration> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T13:59:48.447

不要引用 WCF 服务库。只能从托管服务的项目中引用它们。

相反，您应该使用“添加服务引用”来引用*服务*。

请参阅“[如何使用 Web 服务](http://johnwsaunders3.wordpress.com/2009/05/17/how-to-consume-a-web-service/)”。

# orbeon - Orbeon Forms Builder 自定义持久性 API：为什么它调用 /crud/.../data/data.xml？

> ID：10884207
> 
> 赞同：1
> 
> 时间：2012-06-04T15:51:48.853
> 
> 标签：orbeon

我目前正在为 Orbeon Forms 实现我自己的持久层。据我了解[数据的虚拟层次结构](http://wiki.orbeon.com/forms/doc/developer-guide/form-runner/persistence-api#TOC-Virtual-hierarchy-of-data)，在应用程序“myapp”中使用表单构建器创建一个名为“myform”的表单应该会导致表单构建器调用

/crud/myapp/myform/form/form.xhtml，将新创建的表单作为 HTTP-PUT 数据传递。因此，我创建了一个带有注释的 spring 方法：

```
@RequestMapping(method = RequestMethod.PUT, value = "/crud/{applicationName}/{formName}/form/form.xhtml")
public void saveForm(@PathVariable String formName, @RequestBody String putData) 
```

我希望这个方法可以用我的表单来调用。但是这个方法不会被调用。取而代之的方法

```
@RequestMapping(method = RequestMethod.PUT, value = "/crud/{applicationName}/{formName}/data/{uuid}/data.xml")
public void saveInstance(@PathVariable String uuid, @RequestBody String putData) 
```

被调用。`putData`包含完整的 XHTML 表单。为什么会这样？我认为第二个 URL 只会被调用来保存一个实例，更具体地说`<xforms:instance id="fr-form-instance">`是表单的一部分，一旦我填写了表单的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T16:38:30.433

答案是表单定义可以在两个地方：

1.  当您使用表单构建器对其进行*编辑*时，就构建器而言，表单定义只是表单数据。所以它被存储为`data.xml`for `orbeon/builder`。

2.  当您*发布*它时，它会被复制到 (HTTP PUT) `form.xhtml`for `myapp/myform`. 当需要表单定义来查看/编辑/搜索与该表单关联的数据时，也会从那里读取（HTTP GET）。

您可以通过发布表单轻松验证这一点。

好消息是无论如何您都需要 1 来处理已发布表单的表单数据。

请注意，表单定义和表单数据也可以有附件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T17:17:58.843

好吧，手册并没有这么明确地说明，但是您应该仔细查看实际调用的 URL `/crud/orbeon/builder/data/<some uuid>/data.xml`：. 您看到这实际上是如何将表单保存为与 orbeon 构建器关联的实例，并且它不是您的表单被保存？

此方法完成后，您可以按“发布”，这将调用上面所需的 saveForm 方法。

# sql-server - Distinct on one column

> ID：10884210
> 
> 赞同：-1
> 
> 时间：2012-06-04T15:51:52.387
> 
> 标签：sql-server, tsql, distinct

I have look through the duplicated question but the solution there does not work for me.

I have two columns:

```
InstanceID 
ProductID 
```

and want to get the unique ProductIDs only.

From others questions asked here I try this solution:

```
SELECT *
FROM  
   (SELECT CAST(A.Col001 AS int) AS SurveyInstanceID , 
           CAST(A.Col002 AS nvarchar(25)) AS ProductID , 
           ROW_NUMBER() OVER(PARTITION BY A.Col002 ORDER BY A.Col001  DESC) rn
    FROM DataSetsMaterializedDataSqlvariant A 
    WHERE DataSetsMaterializedInternalRowsetID = 5 
   ) a
WHERE rn = 1 
```

but I get as a result duplicated values.

EDIT:

For more information, this is what I have in my table:

```
InstanceID  ProductID

1           10

1           11

1           12

1           13

2           10

2           A1

3           10

3           11  

3           B1  

3           C1  

3           D1

3           E1
...... 
```

I need to get the unique Product IDs. I am sorry I did not provided example at the beg.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T15:56:39.397

如果要删除重复项，可以使用`distint`：

```
SELECT DISTINCT CAST(A.Col001 AS int) AS SurveyInstanceID , 
       CAST(A.Col002 AS nvarchar(25)) AS ProductID , 
       ROW_NUMBER() OVER(PARTITION BY A.Col002 ORDER BY A.Col001  DESC) rn
FROM DataSetsMaterializedDataSqlvariant A 
WHERE DataSetsMaterializedInternalRowsetID = 5 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T15:56:28.220

这似乎很复杂。尝试这样的事情：

```
SELECT DISTINCT ProductId from DataSetsMaterializedDataSqlvariant 
WHERE DataSetsMaterializedInternalRowsetID = 5 
```

或者，如果您想要两列，则需要指定如果有多个列，您将选择哪个 InstanceId：

```
SELECT ProductId, MAX(InstanceId)
FROM DataSetsMaterializedDataSqlvariant 
WHERE DataSetsMaterializedInternalRowsetID = 5 
Group BY ProductId 
```

如果这不是您要查找的内容，请发布您的示例数据和所需的输出。

# wpf - 无法单击放置在 WindowsFormsHost 控件上的按钮

> ID：10884211
> 
> 赞同：0
> 
> 时间：2012-06-04T15:51:59.157
> 
> 标签：wpf, windowsformshost

我有一个 WindowsFormsHost 控件，我在上面放置了一个按钮。但是，我无法单击该按钮。我确保按钮的 IsEnabled 属性设置为 True。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T16:31:08.760

这被称为“空域”问题。WindowsFormsHost 控件将*始终*通过 WPF 控件呈现。据说这将根据[本文](http://bartwullems.blogspot.com/2010/11/wpf-vnext-microsoft-will-solve-airspace.html)在未来的版本中修复。

# ruby-on-rails - how do you stub/expect a state_machine event?

> ID：10884213
> 
> 赞同：3
> 
> 时间：2012-06-04T15:52:10.180
> 
> 标签：ruby-on-rails, ruby, rspec, state-machine

I want to do something like this:

```
@vehicle.should_receive(:park)
@vehicle.stub!(:park)
Vehicle.any_instance.stub(:park)
# etc. 
```

so that I can validate interaction or use a state_machine in other specs without the overhead of actually changing states...

How could I accomplish this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T22:41:36.543

使用您所写的上述任何方法。请注意，我认为在 Rspec 的某些版本中，直接存根或使用#should_receive 将替换所述存根方法的主体。如果您稍后测试副作用，它们将不存在。

通常我会解决这个问题。

```
@vehicle.should_receive(:park) do
   @vehicle.state = :parked
end

expect do
  @person.exit_vehicle
end.should change(@vehicle.state).from(:driving).to(:parked) 
```

# javascript - JavaScript：无法弄清楚如何翻转以处理多个元素

> ID：10884214
> 
> 赞同：0
> 
> 时间：2012-06-04T15:52:11.803
> 
> 标签：javascript, jquery, html

这个可能真的很简单，但是几天来我一直在绞尽脑汁。我有一个输出图像的 php 脚本，并且在每个输出的图像上，当用户将鼠标悬停在它上面时，会显示带有信息和选项的元素。但是我似乎只能弄清楚如何通过它的 id 来获取每个元素，这不起作用，只允许第一个输出的图像显示它的翻转，而且 Id 应该是唯一的，所以这种方式是无用的。然后我通过在 Jquery 中获取元素类来做到这一点，那时我遇到了另一个问题，每次我将图像悬停在显示的所有隐藏元素上时，所以将鼠标悬停在图像上显示图像 1,2 的选项， 3,4,5,6,7,8.... Grrrr！

所以 tis 是我使用的原始 Javascript：

```
function thumbToggle() {
        var opt = document.getElementById("rem");
        var text = document.getElementsByTagName("thumbrem");
            if(opt.style.display == "block") {
                opt.style.display = "none";
                text.innerHTML = "&dArr;";
            }
            else {
                opt.style.display = "block";
                text.innerHTML = "&uArr;";
        }
    } 
```

真的很简单，但我对 JS 的了解也是如此。所以 Js 对我没有用，Jquery 也没有。我唯一需要对此进行排序的想法是添加一个 ID，然后在其后连接一个递增的数字，从而使每个 ID 唯一，然后对 HTML 中的 ID 执行相同的操作，使 ID 匹配。

唯一的问题是我不知道该怎么做，我不知道这是否真的有效，我认为是时候举手承认我需要一些 Stack Overflow lovage。

这是输出图像的PHP部分......

```
// image output

<div style='position:relative; display:inline; width:200px; overflow:hidden;'>
    <div style='position:relative;'>
        <a id="thumbrem" onmouseover='thumbToggle();' class='thumbrem' style='position:relative;' href=\"show-image.php?id=$id\">
            <img class='lifted drop-shadow' src=\"thumb.php?id=$id\">
        </a>

// The element that appears on rollover

<div id='rem' class='rem'>          
     <div style='padding-bottom:5px;'>
      <label style='color:#fff;'>Select:</label>
         <form method=\"POST\" action='myimages.php'>
           <input type='checkbox' name='images[]' value='$id'>&nbsp;&nbsp;
         </form>                    
 </div>

     <div style='color:#fff;'>
      <a href=\"myimages.php?id=$id&act=delete\">Delete</a>
             &nbsp;|&nbsp;
          <a class='' href=\"myimages.php?id=$id&act=changetags\">Edit Tags</a>
     </div>

 <div style='color:#fff; padding-bottom:3px;'>Size:{$details[$i]}</div>
 <div style='color:#fff padding-bottom:3px;'>Date:  {$date[$i]}</div>
 <div style='color:#fff'>Views:  {$views[$i]}</div>

    </div>          
</div> 
```

为阅读的男孩和女孩干杯，我希望很快能听到你们中的一些人的消息。

提前干杯，杰米

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T16:04:05.930

在 javascript 事件处理程序中，关键字`this`是处理程序附加到的 html 元素。

所以你不需要在你的 thumbToggle 函数中有一个自动递增的 id。只需使用它来检索悬停的链接。

# cakephp - CakePHP 谷歌分析插件

> ID：10884216
> 
> 赞同：1
> 
> 时间：2012-06-04T15:52:29.953
> 
> 标签：cakephp, google-api, google-analytics-api, cakephp-2.1

我正在构建一个核心报告系统应用程序。现在我正在使用[http://code.google.com/p/google-api-php-client/](http://code.google.com/p/google-api-php-client/)。但我想将我的应用程序移动到 CakePHP 以利用框架。

我如何将 php 客户端转储到供应商文件夹并在 CakePHP 中利用它？我从未在 cakephp 中使用过第 3 方脚本。有什么可以让我开始的写作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T04:55:36.243

[在说明书中加载供应商文件](http://book.cakephp.org/2.0/en/core-utility-libraries/app.html#loading-vendor-files)应该可以帮助您入门。

# java - 如何提高递归方法的性能？

> ID：10884217
> 
> 赞同：7
> 
> 时间：2012-06-04T15:52:38.727
> 
> 标签：java, recursion

我正在学习数据结构和算法，这是我遇到的一个问题。

我必须通过将值存储到内存中来提高递归调用的性能。

但问题是未改进的版本似乎比这更快。

有人可以帮我吗？

*锡拉丘兹数是由以下规则定义的正整数序列：*

锡拉(1) ≡ 1

syra( *n* ) ≡ *n* + syra( *n* /2)，如果*n* mod 2 == 0

syra( *n* ) ≡ *n* + syra(( *n* *3)+1)，否则

```
import java.util.HashMap;
import java.util.Map;

public class SyraLengthsEfficient {

    int counter = 0;
    public int syraLength(long n) {
        if (n < 1) {
            throw new IllegalArgumentException();
        }

        if (n < 500 && map.containsKey(n)) {
            counter += map.get(n);
            return map.get(n);
        } else if (n == 1) {
            counter++;
            return 1;
        } else if (n % 2 == 0) {
            counter++;
            return syraLength(n / 2);
        } else {
            counter++;
            return syraLength(n * 3 + 1);
        }
    }

    Map<Integer, Integer> map = new HashMap<Integer, Integer>();

    public int lengths(int n) {
        if (n < 1) {
            throw new IllegalArgumentException();
        }    
        for (int i = 1; i <= n; i++) {
            syraLength(i);
            if (i < 500 && !map.containsKey(i)) {
                map.put(i, counter);
            }
        }    
        return counter;
    }

    public static void main(String[] args) {
        System.out.println(new SyraLengthsEfficient().lengths(5000000));
    }
} 
```

这是我写的普通版本：

```
 public class SyraLengths{

        int total=1;
        public int syraLength(long n) {
            if (n < 1)
                throw new IllegalArgumentException();
            if (n == 1) {
                int temp=total;
                total=1;
                return temp;
            }
            else if (n % 2 == 0) {
                total++;
                return syraLength(n / 2);
            }
            else {
                total++;
                return syraLength(n * 3 + 1);
            }
        }

        public int lengths(int n){
            if(n<1){
                throw new IllegalArgumentException();
            }
            int total=0;
            for(int i=1;i<=n;i++){
                total+=syraLength(i);
            }

            return total;
        }

        public static void main(String[] args){
            System.out.println(new SyraLengths().lengths(5000000));
        }
       } 
```

**编辑**

它比非增强版本慢。

```
import java.util.HashMap;
import java.util.Map;

public class SyraLengthsEfficient {

    private Map<Long, Long> map = new HashMap<Long, Long>();

    public long syraLength(long n, long count) {

        if (n < 1)
            throw new IllegalArgumentException();

        if (!map.containsKey(n)) {
            if (n == 1) {
                count++;
                map.put(n, count);
            } else if (n % 2 == 0) {
                count++;
                map.put(n, count + syraLength(n / 2, 0));
            } else {
                count++;
                map.put(n, count + syraLength(3 * n + 1, 0));
            }
        }

        return map.get(n);

    }

    public int lengths(int n) {
        if (n < 1) {
            throw new IllegalArgumentException();
        }
        int total = 0;
        for (int i = 1; i <= n; i++) {
            // long temp = syraLength(i, 0);
            // System.out.println(i + " : " + temp);
            total += syraLength(i, 0);

        }
        return total;
    }

    public static void main(String[] args) {
        System.out.println(new SyraLengthsEfficient().lengths(50000000));
    }
} 
```

**最终解决方案（由学校自动标记系统标记为正确）**

```
public class SyraLengthsEfficient {

private int[] values = new int[10 * 1024 * 1024];

public int syraLength(long n, int count) {

    if (n <= values.length && values[(int) (n - 1)] != 0) {
        return count + values[(int) (n - 1)];
    } else if (n == 1) {
        count++;
        values[(int) (n - 1)] = 1;
        return count;
    } else if (n % 2 == 0) {
        count++;
        if (n <= values.length) {
            values[(int) (n - 1)] = count + syraLength(n / 2, 0);
            return values[(int) (n - 1)];
        } else {
            return count + syraLength(n / 2, 0);
        }
    } else {
        count++;
        if (n <= values.length) {
            values[(int) (n - 1)] = count + syraLength(n * 3 + 1, 0);
            return values[(int) (n - 1)];
        } else {
            return count + syraLength(n * 3 + 1, 0);
        }
    }

}

public int lengths(int n) {
    if (n < 1) {
        throw new IllegalArgumentException();
    }
    int total = 0;
    for (int i = 1; i <= n; i++) {
        total += syraLength(i, 0);
    }
    return total;
}

public static void main(String[] args) {
    SyraLengthsEfficient s = new SyraLengthsEfficient();
    System.out.println(s.lengths(50000000));
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T21:21:13.727

忘记那些说您的代码由于使用 a 而效率低下的答案，`Map`这不是它变慢的原因 - 这是您将计算数字的缓存限制为`n < 500`. 一旦你取消了这个限制，事情就会开始变得非常快。这是一个概念证明，供您填写详细信息：

```
private Map<Long, Long> map = new HashMap<Long, Long>();

public long syraLength(long n) {

    if (!map.containsKey(n)) {
        if (n == 1)
            map.put(n, 1L);
        else if (n % 2 == 0)
            map.put(n, n + syraLength(n/2));
        else
            map.put(n, n + syraLength(3*n+1));
    }

    return map.get(n);

} 
```

如果你想了解更多关于程序中发生的事情以及为什么这么快，请查看这篇关于记忆化的维基百科[文章](https://en.wikipedia.org/wiki/Memoization)。

另外，我认为您误用了`counter`变量，`++`在第一次计算值时将其递增（），但`+=`在地图中找到值时对其进行累加（）。这对我来说似乎不对，我怀疑它是否给出了预期的结果。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-04T16:21:08.823

不要使用地图。将临时结果存储在一个字段中（称为累加器）并在循环中进行迭代，直到 n = 1。在每个循环之后，您的累加器将增长 n。并且在每个循环中，您的 n 将增长 3 倍 + 1 或将减少 2 倍。希望能帮助你解决你的作业

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-04T17:44:40.373

当然它做得不好，你在 map.put 和 map.get 调用（散列、桶创建等）中增加了很多开销。另外，您正在自动装箱，这会添加大量对象创建。我的猜测是地图的开销远远超过了收益。

尝试使用两个数组。一个来保存值，并保存告诉您该值是否已设置的标志。

```
int [] syr = new int[Integer.MAX_VALUE];
boolean [] syrcomputed = new boolean[Integer.MAX_VALUE]; 
```

并使用那些而不是地图：

```
if (syrcomputed[n]) {
   return syr[n];
}
else {
    syrcomputed[n] = true;
    syr[n] = ....;
} 
```

另外，我认为您可能会在此处遇到较大数字的溢出（当 syr 接近 MAX_INT/3 时，如果它不能被 2 整除，您肯定会看到这一点）。

因此，您可能也应该在所有计算中使用长类型。

PS：如果您的目的是真正了解递归，则不应将值存储为实例变量，而应将其作为累加器传递：

```
public int syr(int n) {
  return syr(n, new int[Integer.MAX_VALUE], new boolean[Integer.MAX_VALUE]);
}

private int syr(int n, int[] syr, boolean[] syrcomputed) {
   if (syrcomputed[n]) {
     return syr[n];
   }
   else {
     s = [ block for recursive computation ]
     syrcomputed[n] = true;
     syr = s;
   }
} 
```

在某些函数式语言（scheme、erlang 等）中，这实际上是作为尾调用展开的（这避免了堆栈创建）。即使热点 jvm 没有这样做（至少据我所知），它仍然是一个重要的概念。

# java - 等效于 BeanUtils.copyProperties 的 Objective c。

> ID：10884218
> 
> 赞同：1
> 
> 时间：2012-06-04T15:52:39.530
> 
> 标签：java, objective-c, inheritance

我想知道他们在 JAVA 方法“BeanUtils.CopyProperties(bean1, Bean2);”的 Objective C 中是否有等价物 ?

或其他解决方案，我想将 motherObject 转换为 childObject ：

```
@interface motherBean : NSObject{ ...}
@interface childBean : motherBean { ...}

motherBean m = [motherBean new];
childBean f = m; 
```

在第一次测试中它可以工作，但我有一个警告：“不兼容的指针类型返回......”；

* * *

我使用 WSDL2Objc 并生成 bean，它的名称可以在 2 代之间更改：-/

## 我更喜欢和孩子一起工作，只是在她的定义中更改名称

谢谢

安东尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T18:08:55.603

看看 commons-beanutils 包。它有很多属性方法供您复制内容。尤其：

```
PropertyUtils.copyProperties(bean1, bean2); 
```

但是，关于您的第二个问题，您是否正在尝试将父类的实例向下转换为子类？

我不确定这在任何 OO 语言中是如何合法的。当然你可以强制施放：

```
// This is not legal because you can't case from one class to anther
// unless the actual instance type (not the declared type of the variable,
// but the constructed type) is either the casted class or a subclass.
Parent p = new Parent();
Child c = (Child) p; 
```

但是您会得到一个 ClassCastException ，因为您不能将父类的实例视为子类（反之亦然）。但是，这些中的任何一个都是合法的：

```
// This is legal because you're upcasting, which is fine
Child c = new Child();
Parent p = c;

// This is legal because the instance "p" is actually an
// instance of the "Child" class, so the downcast is legal.
Parent p = new Child();
Child c = (Child) p; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T18:14:23.130

要回答您的第一个问题，您可以轻松编写代码以在实例之间复制属性值。如果您将属性限制为正确的 Objective-C 属性（使用 @property() 声明的项目），这是最简单的，这可能是最好的做法。您可以使用 Objective-C 运行时函数来获取类上所有属性的列表 (class_getPropertyList) 并调用 property_getName() 来获取属性的名称并调用 property_getAttributes() 来确保它是可写的。然后您可以使用 NSObject 的键值编码分别使用 valueForKeyPath: 和 setValueForKeyPath: 获取和设置属性值。

您的代码示例的一些问题是实例应该是指针。其次，您需要显式转换，因为您将一个类的实例分配给它的超类。反过来不需要演员表。这可能就是您收到警告的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T10:41:21.983

方法 BeanUtils.copyProperties

```
//.h
#import <Foundation/Foundation.h>
#import <objc/runtime.h>

@interface BeanUtils : NSObject

+(void)copyProperties:(id)src dest:(id)dest;

@end 
```

* * *

```
//.m
#import "BeanUtils.h"

@implementation BeanUtils

+(void)copyProperties:(id)src dest:(id)dest {

    NSLog(@"classeSrc=%@ dst=%@", [src class], [dest class]);
    if(src == NULL || dest == NULL) {
        return;
    }

    Class clazz = [src class];
    u_int count;

    objc_property_t* properties = class_copyPropertyList(clazz, &count);
    NSMutableArray* propertyArray = [NSMutableArray arrayWithCapacity:count];
    for (int i = 0; i < count ; i++)
    {
        NSString *propertyName = [NSString stringWithUTF8String:property_getName(properties[i])];
        [propertyArray addObject:propertyName];

        //on verifie que la prop existe dans la classe dest
         objc_property_t prop = class_getProperty([dest class], [propertyName UTF8String]);
        if(prop != NULL) {
            id result = [src valueForKey:propertyName];
            [dest setValue:result forKey: propertyName];
        }
        else {
            [NSException raise:NSInternalInconsistencyException format:@"La propriété %@ n'existe pas dans la classe %@",propertyName, [dest class] ];
        }
    }
    free(properties);    
}

@end 
```

* * *

称呼 ：

```
EleveBean  *eleveBean = [EleveBean new];
eleveBean.nom = @"bob";
eleveBean.prenom = @"john";
tns1_EleveBean *tnsEleve = [tns1_EleveBean new];

[BeanUtils copyProperties:eleveBean dest:tnsEleve];
STAssertEquals(eleveBean.nom, tnsEleve.nom, @"");
STAssertEquals(eleveBean.prenom, tnsEleve.prenom, @""); 
```

# android - Android在导航返回时重置活动组件状态

> ID：10884220
> 
> 赞同：3
> 
> 时间：2012-06-04T15:52:42.270
> 
> 标签：android, layout, android-activity, android-intent, navigation

我的应用程序中有 2 个活动。在**activity1**中，我设置了一些配置并修改了一些组件的状态（例如：设置按钮状态*禁用*）。我导航到**activity2**。

在**activity2**中我做了一些事情，最后，我完成了这个活动并回到了**activity1**。

但是在**activity1**中，当我离开此活动时，我的组件状态是相同的。

如何使用**XML 文件**（*布局*）中声明的值重置组件状态？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T15:58:00.847

在此实例中，您可以使用三个回调来管理 Activity 的状态。

由于你是返回到Activity，所以`onRestart()`会被调用，并且这个回调是特定于这个实例的（在Activity被创建和显示的时候它不会被第一次调用）。

您将收到的其他回调是`onStart()`and `onResume()`，只要 Activity 进入前台（包括第一次），它们也会被调用。更多关于 Activity 生命周期的[信息](http://developer.android.com/reference/android/app/Activity.html)。

您可以在这些最适合您的应用程序的任何地方重置您的 UI 状态。但是，没有直接的“重置”方法可以调用视图来将它们设置回 XML 定义的阶段。您将需要手动调用方法将视图标志设置回您需要的状态。

高温高压

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T04:26:34.603

当您作为调用完成（）的结果返回到上一个活动时，将调用 onActivityResult 方法。您可以在此方法中将视图重新填充到所需的状态。

例如：

```
 ...
        Intent result_intent = new Intent();
        setResult( Activity.RESULT_OK, result_intent );
        finish();
    } 
```

```
 public void onActivityResult( int requestCode, int resultCode, Intent data )
    {
        setContentView( R.layout.my_activity );
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-04T16:12:18.923

**没有标志或属性只能在 xml 文件中设置**以实现您想要的，但好消息是您描述的内容可以通过多种方式完成：

**一种方法**是执行这**两个**操作：

使用以下属性在 manifest.xml 上设置您的“activity1”属性：

```
android:noHistory="true" 
```

当您离开它时，此标志将从堆栈中删除活动。

然后，覆盖“activity2”的**onBackPressed()**方法：

代替：

```
super.onBackPressed(); 
```

写：

```
Intent intent = new Intent(this, Activity1.class);
startActivity(intent);
finish(); 
```

当用户从活动 2 按下返回时，这将导致活动 1 的新实例启动。

**第二个选项**，是遵循**Devunwired 的**建议，只需在“activity1”上实现**onResume()**方法，当活动返回前台时调用该方法：

代替：

```
super.onBackPressed(); 
```

写：

```
Intent intent = getIntent();
startActivity(intent);
finish(); 
```

这种实现将导致“activity1”在返回到前台时通过声明和重新打开自身来“重新启动”

如果您想知道从我的角度来看什么是正确的做法：您想要重新启动活动的原因可能是您想要刷新一些值和视图状态。您需要做的不是重新启动活动，而是在 onResume() 方法上运行“刷新”数据和适当视图的代码，仅此而已。

# python - 在python中打印和格式化列表

> ID：10884223
> 
> 赞同：0
> 
> 时间：2012-06-04T15:52:47.207
> 
> 标签：python, string-formatting

我目前正在使用以下代码

```
print "line 1     line2"
for h, m in zip(human_score, machine_score):
    print "{:5.1f}      {:5.3f}".format(h,m) 
```

但仅在标题中的“第 1 行”和“第 2 行”之间使用空格可能不是一个好习惯。而且我不确定如何在每行之前添加可变数量的空格，以便我可以在底部放置“mean”和“std”，并使这两个数字与上面的列表一致。

例如，我希望它像这样打印：

```
 Line 1      Line 2
         -6.0      7.200
         -5.0      6.377
        -10.0      14.688
         -5.0      2.580
         -8.0      8.421
         -3.0      2.876
         -6.0      9.812
         -8.0      6.218
         -8.0      15.873
          7.5      -2.805
Mean:  -0.026      7.26 
Std:    2.918      6.3 
```

这样做的最pythonic方式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T16:09:48.860

只需使用更大的字段大小，例如，供您的标题使用：

```
print "{:>17} {:>17s}".format('line1', 'line2') 
```

和你的号码：

```
print "{:>17.1f}      {:>12.3f}".format(h,m) 
```

你的页脚：

```
print 
print "Mean: {:11.2f}      {:12.3f}".format(-0.026, 7.26)
print "Std : {:11.2f}      {:12.3f}".format(2.918, 6.3) 
```

这会给你

```
 line1             line2
             -6.0             7.200
             -5.0             6.377
            -10.0            14.688
             -5.0             2.580
             -8.0             8.421
             -3.0             2.876
             -6.0             9.812
             -8.0             6.218
             -8.0            15.873
              7.5            -2.805

Mean:       -0.03             7.260
Std :        2.92             6.300 
```

您可以根据需要调整字段宽度值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T19:34:40.710

您最初的问题是关于如何避免在格式字符串中的字段之间放置任意空格。您尝试避免这种情况是正确的。不硬编码列的填充宽度会带来更大的灵活性。

您可以通过使用在格式字符串之外定义的 WIDTH 'constant' 来做到这两点。然后将宽度作为参数传递给格式函数，并在替换字段内的另一组大括号中插入格式字符串`{foo:>{width}}`：

如果要更改列宽，只需更改 'constant' `WIDTH`：

```
human_score = [1.23, 2.32,3.43,4.24]
machine_score = [0.23, 4.22,3.33,5.21]
WIDTH = 12
mean = "Mean:"
std = "Std:"
print '{0:>{width}}{1:>{width}}'.format('line 1', 'line 2', width=WIDTH)
for h, m in zip(human_score, machine_score):
    print "{:>{width}.1f}{:>{width}.3f}".format(h,m, width=WIDTH)

print "{mean}{:>{width1}.2f}{:>{width2}.3f}".format(-0.026, 7.26, width1=WIDTH-len(mean), width2=WIDTH, mean=mean)
print "{std}{:>{width1}.2f}{:>{width2}.3f}".format(-2.918, 6.3, width1=WIDTH-len(std), width2=WIDTH, std=std) 
```

输出：

```
 line 1      line 2
         1.2       0.230
         2.3       4.220
         3.4       3.330
         4.2       5.210
Mean:  -0.03       7.260
Std:   -2.92       6.300 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T15:55:46.653

对标题使用与数据相同的打印技术，将标题字视为字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T15:58:19.140

您可以使用`ljust`或`rjust`

一些例子[潜入python](http://www.diveintopython.net/power_of_introspection/index.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-09T12:03:22.683

使用 str.rjust 和 str.ljust 并将其与分数中的数字相关联。

# javascript - 用编辑器（和返回）递归替换元素会中断事件侦听器

> ID：10884227
> 
> 赞同：0
> 
> 时间：2012-06-04T15:53:03.080
> 
> 标签：javascript, jquery

背景：我的网站上有一些值可以通过 JavaScript 和 Ajax 进行编辑。Ajax 工作正常，我可以编辑值，但是在保存值后，如果不重新加载页面，我就无法再次编辑它。

我将问题简化为：原始元素被替换为 HTML 表单。提交表单时，表单本身被新版本的显示元素替换，但事件监听器被破坏。

我将一些示例 JS 代码 ( [JSfiddle](http://jsfiddle.net/J8Sa7/) ) 放在一起，但它并没有像我预期的那样工作。

```
var text = $('<em/>').text('click me!');

text.click(function() {
    var button = $('<input type="button" value="Click me, too" />');

    button.click(function() {
        $('#container').html(text);
    });

    $('#container').html(button);
})

$('#container').html(text); 
```

会发生什么：

1.  当前值显示
2.  在 text `click`ed 文本替换为表单之后（为简单起见保存文本元素）
3.  按钮`click`文本再次显示后
4.  `click`on text 再次像第 2 步一样工作（现在不起作用）

为什么再次`click`使用`text`对象时会丢失事件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T16:03:53.677

使其工作而不重写整个结构的一种选择是使用绑定事件克隆元素：

```
text.click(function() {
    ...
    button.click(function() {
        $('#container').html(text.clone(true));
    });
    ...
})

$('#container').html(text.clone(true)); 
```

**演示：http:** [//jsfiddle.net/J8Sa7/2/](http://jsfiddle.net/J8Sa7/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T15:57:31.160

该[`.html()`方法](http://api.jquery.com/html/)（重新）将`innerHTML`属性设置为*文本值*。这些字符串没有事件监听器——我认为这是 jQuery 中的一个错误，它`.html()`接受[字符串（和函数）](http://api.jquery.com/html/#html2)以外的任何内容；在这里，您的 jQuery 对象似乎甚至被字符串化了。

要将内容更改为现有的 DOM 节点，您将需要[`.empty()`](http://api.jquery.com/empty/)容器（或[`.remove()`](http://api.jquery.com/remove/)文本元素）和[`.append()`](http://api.jquery.com/append/)按钮元素。

# jquery - 如何清除或更改 Jquery Mobile 的导航历史记录？

> ID：10884232
> 
> 赞同：22
> 
> 时间：2012-06-04T15:53:43.580
> 
> 标签：jquery, jquery-mobile

我有一个使用 jQuery Mobile 的 PhoneGap 应用程序。在某个页面，我不能让用户回到他访问的最后一页。

页面顺序是这样的：

```
(1)index -> (2)listing items -> (3)form submited -> (4)sucess page 
```

**我需要什么：**我想在用户在时清除所有历史记录`page 4`并将其设置`page 1`为最后一次并且仅在用户尝试返回时才访问。也许这并不完全可能，那么我会接受任何建议。

我想 jQuery Mobile 将导航历史存储在某种数组中，我希望有人能帮助找到它。提前致谢！

**编辑：** 我正在使用[多页模板](http://jquerymobile.com/demos/1.1.0/docs/pages/page-anatomy.html)，这是一个单一的 html 页面，其中某些 div 用作由 jQuery Mobile 管理的页面。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-06-15T08:03:14.067

基本上你有两个需要篡改的历史“罐子”。浏览器和 JQM。

**JQM urlHistory**
您可以很容易地修改 JQM 的 urlHistory。从 JQM 代码：

```
urlHistory = {
    // Array of pages that are visited during a single page load.
    // Each has a url and optional transition, title, and pageUrl
    // (which represents the file path, in cases where URL is obscured, such as dialogs)
    stack: [],
    // maintain an index number for the active page in the stack
    activeIndex: 0,
    // get active
    getActive: function () {
        return urlHistory.stack[urlHistory.activeIndex];
    },
    getPrev: function () {
        return urlHistory.stack[urlHistory.activeIndex - 1];
    },
    getNext: function () {
        return urlHistory.stack[urlHistory.activeIndex + 1];
    },
    // addNew is used whenever a new page is added
    addNew: function (url, transition, title, pageUrl, role) {
        // if there's forward history, wipe it
        if (urlHistory.getNext()) {
            urlHistory.clearForward();
        }
        urlHistory.stack.push({
            url: url,
            transition: transition,
            title: title,
            pageUrl: pageUrl,
            role: role
        });
        urlHistory.activeIndex = urlHistory.stack.length - 1;
    },
    //wipe urls ahead of active index
    clearForward: function () {
        urlHistory.stack = urlHistory.stack.slice(0, urlHistory.activeIndex + 1);
    }
}; 
```

所以上面所有的函数都是可用的，可以像这样调用，例如：

```
$.mobile.urlHistory.clearForward(); 
```

要监视您的历史记录，请将其放在某处并监听 pageChange（一旦转换完成）​​以查看 urlHistory 中的内容：

```
$(document).on('pagechange', 'div:jqmData(role="page")', function(){
    console.log($.mobile.urlHistory.stack);
}); 
```

从那里您可以开始查看历史记录中的内容并根据需要进行清理。

我在自己的导航层中经常使用它来修改 urlHistory 中存储的内容以及不应该存储的内容。与浏览器同步是困难的部分......

**在与浏览器同步时：**
在我的导航层中，我只从 urlHistory 中删除了两个条目，因此当您单击浏览器后退按钮时，总会有一个页面可以访问（而不是两个）。在您的情况下，您可能会在浏览器历史记录中有 4 个条目，但如果您从 JQM urlHistory 中删除 2 个条目，则单击后退按钮时您将有**两个“不能访问”的页面。**因此，如果您的浏览器历史记录如下所示：

```
www.google.com
www.somePage.com
www.YOUR_APP.com = page1
    page2
    page3
    page4 
```

并且您删除*page2*和*page3*，单击后退按钮应导致：

```
1st back-click = page4 > page1
2nd back-click = page1 > www.somePage.com [because you removed page3]
3rd back-click = www.somePage.com > www.google.com [because you removed page2] 
```

理论上的解决方法是：

1.  记下你进入页面的“深度”
2.  从 JQM urlHistory 中删除页面并获得“跳转”值 = counter-removedPages
3.  在下一个浏览器后退单击时，跳转 x window.history(back) 并且只让一个 JQM 转换通过。您的 url 将一步展开 page4>page3>page2>page1 并且您只允许 JQM 进行从 page4 到 page1 的一次转换
4.  检查 urlHistory 中的内容并在“三重返回”之后进行清理

请注意，这**不是最佳解决方案**，您必须考虑很多事情（用户在返回之前点击其他地方等）。我一直试图让这样的东西在更复杂的设置中工作，最终只是停止使用它，因为它从来没有按应有的方式工作。但是对于更简单的设置，它可能会很好地工作。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-11-20T15:58:59.350

仅供参考；在 JQM **1.4** ~~rc1~~中没有`urlHistory`，但您可以从导航对象中读取。

例子：

```
$.mobile.navigate.history.stack[0];
// Object {hash: "", url: "http://localhost:61659/"}

$.mobile.navigate.history.stack[1];
// Object {url: "http://localhost:61659/Search/Filter", hash: "#/Search/Filter", title: "Search Result", transition: "pop", pageUrl: "/Search/Filter"…} 
```

你可以使用这个实用函数来查看发生了什么：

```
$(document).on('pagechange',function() {
    console.log("Current:" + $.mobile.navigate.history.getActive().url);
    console.log("Stack: (active index = " + $.mobile.navigate.history.activeIndex + " -previous index: " + $.mobile.navigate.history.previousIndex + " )");
    $.each($.mobile.navigate.history.stack, function (index, val) {
        console.log(index + "-" + val.url);
    });
}); 
```

也见[这里](http://blog.jquerymobile.com/2013/10/24/jquery-mobile-1-4-0-rc1-released/)

> 不推荐从哈希中剥离查询字符串的当前行为。从 1.5 开始，我们将遵循哈希规范并提供一个钩子来处理自定义导航。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-04T16:04:23.043

jQuery Mobile 使用浏览器历史记录进行页面导航，因此在浏览器中阻止用户返回实际上是不可能的。但是，由于您有一个 phonegap 应用程序，您可以直接处理后退按钮。这个问题应该对您有所帮助：[Override Android Backbutton behavior only works on the first page with PhoneGap](https://stackoverflow.com/questions/9631933/override-android-backbutton-behavior-only-works-on-the-first-page-with-phonegap)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-11-15T18:43:18.087

这是一个简单的答案，因此应该这样看待。您可以简单地从 urlHistory.stack 中删除项目

```
delete $.mobile.urlHistory.stack[index_of_your_choosing]; 
```

如果你想确保正确的页面被删除，你可以这样做。

```
var stack_count = $.mobile.urlHistory.stack.length;

for(x=0; x<stack_count; x++){

  $.mobile.urlHistory.stack[x];

  if(typeof $.mobile.urlHistory.stack[x] !== 'undefined'){

    if($.mobile.urlHistory.stack[x].url != 'http://url-to-exclude.com/'){

       delete $.mobile.urlHistory.stack[x];

    }}
} 
```

# c# - 使用 LinqToExcel 读取保存为 xls 的 xlsx

> ID：10884234
> 
> 赞同：5
> 
> 时间：2012-06-04T15:53:46.630
> 
> 标签：c#, linq-to-excel

看这篇文章：[Excel“外部表格不是预期的格式”。](https://stackoverflow.com/questions/1139390/excel-external-table-is-not-in-the-expected-format)

我在那篇文章中描述了同样的问题，但我使用 LinqtoExcel 来读取文件而不是普通查询。

将连接字符串设置为该帖子的答案所暗示的 LinqToExcel 等效项是什么？

**这是我正在使用的代码：**

```
var excelOM = new ExcelQueryFactory(pPathArchivoOM);
var despachosClient = from c in excelOM.Worksheet<RegistroDespachoOM>("Tabla_1")
                         where c.DESTINAT.Contains("SOMETEXT")
                         select c;
//Identificar los despachos asociados a números de documento sin datos aún.
foreach (RegistroDespachoOM despacho in despachosClient)
{ ... 
```

我的问题是：foreach 开始中的“外部表不是预期的格式”。

**编辑（我的问题已解决，但问题仍未得到解答）：**我正在使用 EPPlus 而不是 LinqToExcel 来完成此任务，现在一切正常。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-10T04:52:50.513

您将需要使用 ACE 数据库引擎而不是 JET 数据库引擎。

`DatabaseEngine`您可以通过设置属性来使用 LinqToExcel 执行此操作。这是一个例子

```
var excelOM = new ExcelQueryFactory(pPathArchivoOM);
excelOM.DatabaseEngine = DatabaseEngine.Ace; 
```

# c# - 创建序列集 (12345678)

> ID：10884235
> 
> 赞同：3
> 
> 时间：2012-06-04T15:54:07.247
> 
> 标签：c#

我想创建一组字符串，下面是唯一的限制。同一数字不应重复。

字符串范围 1-8(12345678) 或 1-16(12345678910111213141516)
例如：（系列集）

```
12345678
12345687
12345876
12345867
...
...
87654321 
```

就像存在 2^8(1-8) 和 2^16(1-16) 的可能性一样。我怎样才能以更少的计算非常有效地生成这些字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T16:03:22.063

据我了解，您需要[生成给定符号集的所有排列（在您的情况下为数字）](http://www.codeproject.com/Articles/26050/Permutations-Combinations-and-Variations-using-C-G)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T18:00:51.207

你的 8 箱是可能的，但在那之后你会很快用完空间。

这不是`2^n`你想的那样——这是一个`n!`案例。

对于 8，将有 40,320 个排列。

```
permute(k,n) = k! / (n-k)!
permute(8,8) = 8! / (8-8)! = 8! = 40320 
```

对于 16，将有 20,922,789,888,000 个排列。在 16 字节/排列时，您需要大约 304TB 来存储它们。

@kol 的答案应该为你做排列，但我认为你需要改变你的要求。

# facebook - 为 Spotify 等 Facebook 时间线创建播放按钮？

> ID：10884236
> 
> 赞同：1
> 
> 时间：2012-06-04T15:54:10.967
> 
> 标签：facebook, html, audio

我知道 Spotify 是 Facebook 的合作伙伴，因此他们享有特权。但是现在 Facebook 的 OpenGraph API 已经存在了一段时间，是否有可能创建一个在人们的时间线上工作的 HTML5 播放器？我什至不确定它叫什么。它是一个自动收报机 - 有多个音频链接吗？

我想提供一个播放按钮列表。每次点击播放按钮时，需要先播放一首歌曲，然后再播放下一首。

由于这是一项竞争服务，我不想使用 Spotify 的 API。我们公司已经使用自定义的基于 Flash 的播放器，但用户必须单击并加载 Flash 播放器，这会减少点击率，并且不适用于非基于 Flash 的浏览器。

是否有其他公司将非 Flash 播放器嵌入 Facebook 新闻提要/时间线？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T19:20:25.883

音乐 Open Graph 操作仅限于 Facebook 白名单开发者。有几个音乐服务可以访问它，但它们都是众所周知的（Pandora、I<3Radio 等）。

获得白名单没有表格或申请流程，您必须被邀请。

# android - android以编程方式在顶部添加带有透明按钮的地图

> ID：10884237
> 
> 赞同：0
> 
> 时间：2012-06-04T15:54:17.043
> 
> 标签：android, android-layout, android-mapview, android-maps

我想在运行时添加地图和一些**透明的（如在下面可见的地图中）**按钮来控制地图显示的类型（正常/卫星/交通）。

我可以用xml来做到这一点

```
<RelativeLayout ...>
<map>
<button .../>
<button .../>
</RelativeLayout> 
```

但是，由于我想根据调试/发布选择 api 密钥，所以我无法让地图“在”按钮“下方”，这就是我尝试的方法

```
this.mapView = new MyMapView(this, map_key);
        this.mapView.setClickable(true);

        RelativeLayout.LayoutParams p = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.FILL_PARENT, RelativeLayout.LayoutParams.MATCH_PARENT);
        //p.addRule(RelativeLayout.BELOW, R.id.tipo_mappa);
        p.addRule(RelativeLayout.CENTER_IN_PARENT);

        this.mapView.setLayoutParams( p );

        layout.addView(this.mapView, 0); 
```

结果是我只能全屏查看地图，按钮可能隐藏/在下方。

这是我的 layout.xml

```
<?xml version="1.0" encoding="utf-8"?>

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/linearLayoutMappa"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <!--

    <com.google.android.maps.MapView
        android:id="@+id/mapview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_alignParentBottom="true"
        android:apiKey="abc"
        android:clickable="true" />

    -->

    <RadioGroup
        android:id="@+id/tipo_mappa"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:orientation="horizontal" >

        <RadioButton
            android:id="@+id/normal"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:checked="true"
            android:text="@string/mappa_normale" />

        <RadioButton
            android:id="@+id/sat"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="8dp"
            android:text="@string/mappa_satelite" />
    </RadioGroup>

    <CheckBox
        android:id="@+id/traffic"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_toRightOf="@+id/tipo_mappa"
        android:onClick="myClickHandler"
        android:text="@string/mappe_traffic" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T16:13:13.790

不确定它是否会起作用，但请尝试在添加地图后请求将焦点返回到您的按钮。它可能会将它们拉回地面。 [View.requestFocus()](http://developer.android.com/reference/android/view/View.html#requestFocus%28%29)

# rspec - Spork 和 db:test:prepare

> ID：10884244
> 
> 赞同：4
> 
> 时间：2012-06-04T15:54:52.487
> 
> 标签：rspec, migration, cucumber, spork

简单的问题，我希望有一些聪明的答案。

我使用 Spork 来运行我的规格和功能。效果很好。但是，如果我通过迁移更新我的数据库，我无法在不停止两个 spork 服务器的情况下更新测试数据库。无论如何，我可以得到 spork 让我在不关闭数据库的情况下删除并重新创建数据库？

我问的原因是因为我可以在我的开发服务器运行时运行迁移，在我看来我正在做同样的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T23:07:03.113

有同样的问题，发现这个：[https ://github.com/sporkrb/spork/issues/188](https://github.com/sporkrb/spork/issues/188)

根据我添加的建议：

```
ActiveRecord::Base.remove_connection 
```

到 spec_helper.rb 和 env.rb 中的 Spork.prefork 块的末尾

# c# - 从框架控件继承时，我应该调用基本构造函数吗？

> ID：10884246
> 
> 赞同：1
> 
> 时间：2012-06-04T15:54:53.250
> 
> 标签：c#, silverlight

我从 ListBox 继承。我需要显式调用基本构造函数吗？

```
public class MyListBox : ListBox
{
   public MyListBox() : base()
   {
   }

   // or 

   public MyListBox()
   {
   }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T15:56:05.333

您列出的两个选项将编译为相同的代码。

包含的唯一原因`: base()`是明确表示您正在调用基类默认构造函数，而不是设计的其他构造函数。如果离开，这会自动发生。因此，这完全是可选的。

但是，如果要使用基类的无参数构造函数以外的构造函数，则必须明确说明这一点，即：

```
public MyListBox() : base("Foo")
{ } 
```

这将显式使用接受字符串作为参数的构造函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T15:56:55.973

如果您未指定要调用的构造函数，则会隐式执行默认构造函数的调用。当您省略构造函数调用时，C# 将为您调用默认的构造函数；如果没有默认构造函数，您的代码将无法编译。

> 10.11.1 构造函数初始化器
> 
> 所有实例构造函数（除了类对象的构造函数）都隐含地在构造函数主体之前包含对另一个实例构造函数的调用。
> 
> [...]
> 
> 如果实例构造函数没有构造函数初始化器，`base()`则隐式提供表单的构造器初始化器。

根据 C# 规范，您问题中的两个代码片段彼此等效。

# php - 更新 Postgres 数据库而不重新加载页面

> ID：10884247
> 
> 赞同：1
> 
> 时间：2012-06-04T15:55:13.673
> 
> 标签：php, javascript, postgresql

我本质上是为了乐趣和体验而建立一个个人reddit（我对这一切都很陌生）。 

在我所做的必须将更改应用于同一页面的其他 Web 事物上，我使用了一个表单，其中操作将指向当前页面。在 PHP 中，我将有一个函数来检查该表单中的 POST 变量，然后在页面加载之前进行数据库查询。这样，当稍后调用该函数来显示数据时，它就会添加新的东西。 

由于我的站点专门部署到本地网络，因此效果非常好并且立即发生。我自己想出了它（我意识到它可能并不完全有效）。以前，我会使用后退按钮将其转到不同的页面进行处理。 

在我当前的项目中，当我单击投票按钮时，会发生同样的事情并且效果很好。然而，这个页面比我之前做的任何页面都要长，因此，它会跳转到页面顶部。这是一个不和谐的经历。我想让一切都保持一致，就像什么都没发生一样。 

我可以使用哪些几乎不需要（阅读：简单）到不需要服务器修改的技巧？ 

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T15:58:38.467

要使您的 href 停止重新加载页面，请将其添加到您的 href：

```
 <a href="#" onclick="return false">blah</a> 
```

如果您使用按钮将 POST 数据从表单传递到您的 PHP，同样的 onclick 技巧将起作用。但我建议你快速搜索一下“jQuery AJAX”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T16:06:23.377

如果您想应用旧技术，请使用 AJAX [http://www.w3schools.com/ajax/default.asp](http://www.w3schools.com/ajax/default.asp)。

如果你想使用新技术，html 5，试试 websockets [http://en.wikipedia.org/wiki/WebSocket](http://en.wikipedia.org/wiki/WebSocket)

或服务器发送事件[http://en.wikipedia.org/wiki/Server-sent_events](http://en.wikipedia.org/wiki/Server-sent_events)。

链接用于基础知识，您必须搜索更多以进行深入研究。

# versioning - 版本-maven-plugin 不检索nexus 上的最新版本？

> ID：10884249
> 
> 赞同：0
> 
> 时间：2012-06-04T15:55:22.820
> 
> 标签：versioning, maven-plugin, pom.xml, versions-maven-plugin

我正在尝试使用（部分成功）**versions-maven-plugin**从我的本地**和**nexus 存储库中检索最新版本/快照版本以更新 maven 项目。运行此插件以更新版本时，我注意到以下行为：

即使我知道nexus 中有更新版本，但不在我的本地存储库中，它也找不到最新版本，而是从本地存储库中找到最新版本。如果我从本地 repo 中删除我想要更新的工件的所有 maven-metadata*.xml 文件，它会下载最新的 maven-metadata*.xml 文件并正确找到最新版本。

我看到它使用**2.0.6** og 所有 maven API，驱动整个更新机制的方法是从接口**ArtifactMetadataSource中****检索AvailableVersions()**并由**MavenMetadataSource**实现。

 ******我的问题** 如何更改此插件的代码以始终下载最新的 maven-metadata*.xml 文件，以便获得最新版本？或者如果有任何其他**可靠的**方法可以做到这一点..

谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T16:18:37.843

实际上，我自己找到了解决方案并创建了一个目标，在运行更新我的 pom.xml 文件的目标之前运行该目标：这是更新所有存储库的元数据的方法。如果您需要整个目标，请告诉我：

```
 public void updateMetadata(Artifact artifact){        
    getLog().info("Updating metadata for: " + artifact.getGroupId()+":"+artifact.getArtifactId());
    RepositoryMetadata metadata = new ArtifactRepositoryMetadata( artifact);    
    for ( Iterator<ArtifactRepository> repo = remoteArtifactRepositories.iterator(); repo.hasNext(); ){
        ArtifactRepository repository = repo.next();            
        ArtifactRepositoryPolicy policy = 
                metadata.isSnapshot() ? repository.getSnapshots() : repository.getReleases();
        File file = new File( localRepository.getBasedir(), 
                localRepository.pathOfLocalRepositoryMetadata( metadata, repository ) );
        getLog().info("Updating " + repository.getBasedir());            
        try {
            wagonManager.getArtifactMetadata( metadata, repository, file, policy.getChecksumPolicy());
            getLog().info("Updated...");
        } catch (TransferFailedException e) {
            getLog().info("Couldn't find " +  metadata + " from repository: " + repository.getId() +
                    "\n Reason\n: " + e.getMessage() );
            e.printStackTrace();
        } catch (ResourceDoesNotExistException e) {
            getLog().info("Cannot find " +  metadata + " in repository: " + repository.getId() );
            if ( file.exists() ){
                file.delete();
            }
            e.printStackTrace();
        }
    }
} 
```****

# python - Python for 循环具有更直观的上限？

> ID：10884253
> 
> 赞同：3
> 
> 时间：2012-06-04T15:55:31.800
> 
> 标签：python, for-loop

有时我有点困惑，记住默认情况下排除了 for 循环的上限。有没有办法让它具有包容性？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-04T16:35:31.163

十分之九，如果你正在编写一个 Python`for`循环，它遍历一系列数字，然后使用这些数字索引到列表或其他容器中，那么你做错了。换句话说，而不是这样做：

```
for i in range(len(container)):
    print container[i] 
```

你应该这样做：

```
for item in container:
    print item 
```

可是等等！你反对。如果我因为要以某种方式修改项目而需要索引怎么办？Pythonic 的方法是使用`enumerate()`内置函数。

```
for i, item in enumerate(container):
    print item
    container[i] += 1 
```

如果您不介意复制您的列表，那么列表理解通常是最佳选择：

```
container = [item + 1 for item in container] 
```

或者，如果您需要就地修改列表，试试这个，它结合了切片赋值（替换现有列表）和生成器表达式（懒惰地修改项目）：

```
 container[:] = (item + 1 for item in container) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-04T15:57:30.207

是的，`for i in range(upper + 1)`或者如果你愿意，`for i in range(lower, upper + 1)`可以工作，

很多编程语言使用从零开始的索引，因此不包含上限是一种常见做法（这是由于内存寻址和添加偏移量）

举个例子：如果你有一个大小为 5 的数组`ar`，从索引**0**开始，*你最大的有效索引*值为**4**（即 0、1、2、3、4），但你的循环构造将引用大小数组 (5) 像这样：

`for i in range(5):`

或更常见和更好的：

`for i in range(len(ar)):`

.. 确保您只获得合法的索引值 0 .. 4。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-04T15:57:07.820

你会习惯的。只需在上限上加一即可。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-26T05:07:10.847

您可以在没有太多痛苦的情况下定义一个：

```
def fullrange(lower, upper, step = 1):
    return range(lower, upper + 1, step) 
```

但正如其他人所说，习惯可能会更好`range(lower, upper + 1)`。我想说的意图`+ 1`很明确。

# php - 在 PHPEdit 中导入现有的 Symfony 项目

> ID：10884254
> 
> 赞同：1
> 
> 时间：2012-06-04T15:55:35.350
> 
> 标签：php, editor, symfony-1.4

我最近下载了一份 PHPEdit 的评估版，因为我看到它支持 Symfony。我设法建立了一个新项目，但问题是我已经有一个几乎完成的现有项目。
有没有可能在 PHPEdit 中轻松导入这些文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T16:04:39.513

不，您不能直接在 PHPEdit 中导入现有的 Symfony 项目。您必须手动完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T20:35:44.493

目前没有从现有源代码创建新项目的选项，您可以做的是在 phpedit 中创建新项目，然后进入项目文件夹，在那里您将找到文件调用项目文件，其名称为您为新项目提供的名称，扩展名为.PHPEditProject 将其复制并粘贴到您现有的 symfony 项目目录中，然后使用文本编辑器打开该文件，然后使用您的项目名称更新文件，现在您可以使用 phpedit 打开该文件，或者只需双击即可，希望这对您有所帮助.

```
<set:Property key="Languages">
  <set:Property key="PHP">
    <set:Property key="RootNamespace">
      <set:Data>Your project name </set:Data>
    </set:Property>
  </set:Property>
</set:Property> 
```

# fortran - gfortran 如何判断我是在编译 f90 还是 f95 代码？

> ID：10884260
> 
> 赞同：11
> 
> 时间：2012-06-04T15:56:23.750
> 
> 标签：fortran, fortran90, gfortran, fortran77

我了解 gfortran 可以编译 f90 或 f95 吗？它怎么知道它正在编译哪一个？它也可以编译f77代码吗？ubuntu 已经有 fortran 编译器还是我需要下载 gfortran？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-04T16:10:38.780

gfortran 可以从文件扩展名中猜出某些东西；如果文件具有 .f、.f90、f95、.f03 或 .f08 的扩展名，它将采用具有适当标准的固定 (.f) 或自由格式。但是您可以使用选项 -std=f2003 强制它编译（比如说）fortran2003 代码。例如，从[文档](https://gcc.gnu.org/onlinedocs/gfortran/Fortran-Dialect-Options.html)中，

> `-std=std`
> 
> 指定程序应遵循的标准，可以是`f95`、`f2003`、`f2008`、`f2018`、`gnu`或之一`legacy`。*std*的默认值是`gnu`，它指定了最新 Fortran 标准的超集，其中包括 GNU Fortran 支持的所有扩展，尽管对于不建议在新代码中使用的过时扩展会给出警告。该`legacy`值是等效的，但没有过时扩展的警告，并且可能对旧的非标准程序有用。`f95`, `f2003`,`f2008`和_`f2018`值分别指定严格遵守 Fortran 95、Fortran 2003、Fortran 2008 和 Fortran 2018 标准；超出相关语言标准的所有扩展都会出现错误，并且会为 Fortran 77 功能提供警告，这些功能在以后的标准中被允许但已过时。`-std=f2008ts`允许 Fortran 2008 标准，包括添加关于 Fortran 与 C 的进一步互操作性的技术规范 (TS) 29113 和关于 Fortran 中的附加并行功能的 TS 18508。

请注意，除了少数例外，fortran 标准是高度向后兼容的，因此许多“漂亮”、符合标准的 fortran-77 代码也是有效的 fortran 2003 代码。主要问题是 80 年代及更早的许多 fortran 代码既不“好”也不符合标准。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-04T17:45:38.090

是的，gfortran 可以编译 FORTRAN 77 和 Fortran 90,95 等。它实现了 2003 和 2008 的许多功能。对于 Fortran 90/95/2003/2008 代码，一个很好的扩展名是 .f90。其他一些编译器无法识别 .f95、.f2003 等。当新标准出现时，您真的想重命名文件吗？FORTRAN 77 使用 .f 或 .for。主要区别在于编译器期望的源布局：.f90 为自由格式，.f 或 .for 为固定格式。（大写文件类型将导致预处理器运行。）您可以使用选项 -ffixed-form -ffixed-line-length-none 强制固定格式布局。

# ruby-on-rails - Rails 3 - 根据自己的表列关联

> ID：10884262
> 
> 赞同：0
> 
> 时间：2012-06-04T15:56:25.543
> 
> 标签：ruby-on-rails, associations, primary-key

我有这两张表：

```
colors
- id
- name
- name_code

cars
- id
- manufacturer
- color_code_name 
```

（在列中`colors.name_code`和`cars.color_code_name`是相同的值）

我想获得所有具有相应颜色的汽车。我试图建立这些关联：

```
class Color < ActiveRecord::Base
  has_many :cars, :primary_key => "name_code"
end
class Car < ActiveRecord::Base
  belongs_to :color, :primary_key => "color_code_name"
end 
```

但不幸的是，这不起作用......我还没有指定这种关联，所以我不太确定，是否可以做到......

我会感谢每一个建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T16:06:09.887

尝试这个：

```
class Color < ActiveRecord::Base
  self.primary_key :name_code
  has_many :cars, :foreign_key => :color_code_name
end

class Car < ActiveRecord::Base
  self.primary_key :color_code_name
  belongs_to :color, :foreign_key => :color_code_name
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T17:29:59.527

需要在主键分配中添加一个 = （无论如何对于 rails 3.1）

```
class Color < ActiveRecord::Base
  self.primary_key = :name_code
  has_many :cars, :foreign_key => :color_code_name
end

class Car < ActiveRecord::Base
  self.primary_key = :color_code_name
  belongs_to :color, :foreign_key => :color_code_name
end 
```

感谢你的回答。这就是我要找的

# python - 转换 POSIX->WIN 路径，在 Cygwin Python 中，不调用 cygpath

> ID：10884268
> 
> 赞同：14
> 
> 时间：2012-06-04T15:56:43.743
> 
> 标签：python, cygwin

我使用在 Python 的 Cygwin 构建中运行的 Python 脚本来创建发给本机 Windows 实用程序（不支持 Cygwin）的命令。这需要在发出命令之前将路径参数从 POSIX 转换为 WIN 形式。

调用 cygpath 实用程序是最好的方法，因为它使用 Cygwin 来做它可以做的事情，但它也有点可怕（而且速度很慢）。

我已经在运行 Python 的 Cygwin 构建 - 因此存在进行转换的代码。似乎应该有一个 Cygwin/Python 特定的扩展，让我可以直接在 Python 中获得这种能力，而无需启动一个全新的进程。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-07-20T03:46:56.297

这可以通过使用 ctypes 调用 Cygwin API 来实现。下面的代码适用于我——我在 Windows 2012 上使用 64 位 cygwin DLL 版本 2.5.2，这适用于 Python 2.7.10 和 Python 3.4.3 的 Cygwin 版本。

基本上我们调用[`cygwin_create_path`](https://cygwin.com/cygwin-api/func-cygwin-create-path.html)from`cygwin1.dll`来执行路径转换。`malloc`该函数分配一个包含转换后路径的内存缓冲区（使用）。那么我们需要使用`free`from`cygwin1.dll`来释放它分配的缓冲区。

请注意，`xunicode`下面是一个穷人的替代[六](https://pythonhosted.org/six/)（Python 2/3 兼容性库）；如果您需要同时支持 Python 2 和 3，那么六个是更好的答案，但我希望我的示例不依赖于任何非捆绑模块，这就是我这样做的原因。

```
from ctypes import cdll, c_void_p, c_int32, cast, c_char_p, c_wchar_p
from sys import version_info

xunicode = str if version_info[0] > 2 else eval("unicode")

# If running under Cygwin Python, just use DLL name
# If running under non-Cygwin Windows Python, use full path to cygwin1.dll
# Note Python and cygwin1.dll must match bitness (i.e. 32-bit Python must
# use 32-bit cygwin1.dll, 64-bit Python must use 64-bit cygwin1.dll.)
cygwin = cdll.LoadLibrary("cygwin1.dll")
cygwin_create_path = cygwin.cygwin_create_path
cygwin_create_path.restype = c_void_p
cygwin_create_path.argtypes = [c_int32, c_void_p]

# Initialise the cygwin DLL. This step should only be done if using
# non-Cygwin Python. If you are using Cygwin Python don't do this because
# it has already been done for you.
cygwin_dll_init = cygwin.cygwin_dll_init
cygwin_dll_init.restype = None
cygwin_dll_init.argtypes = []
cygwin_dll_init()

free = cygwin.free
free.restype = None
free.argtypes = [c_void_p]

CCP_POSIX_TO_WIN_A = 0
CCP_POSIX_TO_WIN_W = 1
CCP_WIN_A_TO_POSIX = 2
CCP_WIN_W_TO_POSIX = 3

def win2posix(path):
    """Convert a Windows path to a Cygwin path"""
    result = cygwin_create_path(CCP_WIN_W_TO_POSIX,xunicode(path))
    if result is None:
        raise Exception("cygwin_create_path failed")
    value = cast(result,c_char_p).value
    free(result)
    return value

def posix2win(path):
    """Convert a Cygwin path to a Windows path"""
    result = cygwin_create_path(CCP_POSIX_TO_WIN_W,str(path))
    if result is None:
        raise Exception("cygwin_create_path failed")
    value = cast(result,c_wchar_p).value
    free(result)
    return value

# Example, convert LOCALAPPDATA to cygwin path and back
from os import environ
localAppData = environ["LOCALAPPDATA"]
print("Original Win32 path: %s" % localAppData)
localAppData = win2posix(localAppData)
print("As a POSIX path: %s" % localAppData)
localAppData = posix2win(localAppData)
print("Back to a Windows path: %s" % localAppData) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T19:46:53.007

通过浏览[cygpath 源代码](https://cygwin.com/git/gitweb.cgi?p=newlib-cygwin.git;a=blob;f=winsup/utils/cygpath.cc)，看起来 cygpath 有一个重要的实现，并且没有提供任何库版本。

cygpath 确实支持使用`-f`选项（或从标准输入， using `-f -`）从文件中获取其输入，并且可以采用多个路径，每次都吐出转换后的路径，因此您可以创建一个打开的 cygpath 实例（使用 Python 的[subprocess.Popen](http://docs.python.org/library/subprocess.html#popen-constructor)）而不是每次都重新启动 cygpath。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-24T11:02:30.737

我宁愿编写这个使用`cygwin`dll 的 Python 助手：

```
import errno
import ctypes
import enum
import sys

class ccp_what(enum.Enum):
    posix_to_win_a = 0 # from is char *posix, to is char *win32
    posix_to_win_w = 1 # from is char *posix, to is wchar_t *win32
    win_a_to_posix = 2 # from is char *win32, to is char *posix
    win_w_to_posix = 3 # from is wchar_t *win32, to is char *posix

    convtype_mask = 3

    absolute = 0          # Request absolute path (default).
    relative = 0x100      # Request to keep path relative.
    proc_cygdrive = 0x200 # Request to return /proc/cygdrive path (only with CCP_*_TO_POSIX)

class CygpathError(Exception):
    def __init__(self, errno, msg=""):
        self.errno = errno
        super(Exception, self).__init__(os.strerror(errno))

class Cygpath(object):
    bufsize = 512

    def __init__(self):
        if 'cygwin' not in sys.platform:
            raise SystemError('Not running on cygwin')

        self._dll = ctypes.cdll.LoadLibrary("cygwin1.dll")

    def _cygwin_conv_path(self, what, path, size = None):
        if size is None:
            size = self.bufsize
        out = ctypes.create_string_buffer(size)
        ret = self._dll.cygwin_conv_path(what, path, out, size)
        if ret < 0:
            raise CygpathError(ctypes.get_errno())
        return out.value

    def posix2win(self, path, relative=False):
        out = ctypes.create_string_buffer(self.bufsize)
        t = ccp_what.relative.value if relative else ccp_what.absolute.value
        what = ccp_what.posix_to_win_a.value | t
        return self._cygwin_conv_path(what, path)

    def win2posix(self, path, relative=False):
        out = ctypes.create_string_buffer(self.bufsize)
        t = ccp_what.relative.value if relative else ccp_what.absolute.value
        what = ccp_what.win_a_to_posix.value | t
        return self._cygwin_conv_path(what, path) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-05-02T14:59:19.880

我最近独立遇到了这个问题。我想出的小而快的解决方案如下：

```
import os
import re

def win_path(path):
    match = re.match('(/(cygdrive/)?)(.*)', path)
    if not match:
        return path.replace('/', '\\')
    dirs = match.group(3).split('/')
    dirs[0] = f'{dirs[0].upper()}:'
    return '\\'.join(dirs) 
```

这适用于 cygwin ( `/cygdrive/...`) 和 MinGW ( `/...`) 样式路径（我必须同时支持）以及相对路径。

```
l = ['/c/test/path',
     '/cygdrive/c/test/path',
     './test/path',
     '../test/path',
     'C:\Windows\Path',
     '.\Windows\Path',
     '..\Windows\Path']
for i in l:
    print(win_path(i)) 
```

生产：

```
C:\test\path
C:\test\path
.\test\path
..\test\path
C:\Windows\Path
.\Windows\Path
..\Windows\Path 
```

# sql - 替代在视图中调用存储过程？

> ID：10884269
> 
> 赞同：0
> 
> 时间：2012-06-04T15:56:50.537
> 
> 标签：sql, sql-server, tsql

我创建了一个查询，查看一些交易信息。时间段标准是有条件的 - 在每月 5 日，它需要查看上个月的第 16 天 - 最后一天。每月 20 日，需要查看当月 1-15 日。它会自动运行。Stack Overflow 上的一位绅士或女士给了我以下存储过程供我使用，它非常有效：

```
DECLARE @today SMALLDATETIME, @start SMALLDATETIME, @end SMALLDATETIME; 
SET @today = DATEADD(DAY, 0, DATEDIFF(DAY, 0, CURRENT_TIMESTAMP));

SET @start = DATEADD(DAY, 1-DAY(@today), @today); 
SET @end = DATEADD(DAY, 15, @start);  

IF DATEPART(DAY, @today) <= 15 
BEGIN     
    SET @start = DATEADD(MONTH, -1, @end);     
    SET @end = DATEADD(DAY, 1-DAY(@today), @today); 
END   

SELECT ... WHERE h.billed_date >= @start AND h.billed_date < @end; 
```

现在，他们希望将其转换为可以从 3rd 方数据集成工具访问的视图。谷歌告诉我视图不能调用 SQL Server 中的存储过程。他们的 DBA 表示，整个查询也可以转换为存储过程。如何将查询转换为 SP，以便数据集成工具可以访问它？这是查询的简化版本。

```
SELECT
  c.customer_name
, cc.category_name
, h.acct_bal  

FROM 
customer c
inner join htransactions h on c.customer_id = h.customer_id
left outer join customer_category cc on cc.category_id = c.category_id

WHERE
h.billed date >= @start
AND h.billed date < @end 
```

谢谢。我是一名试图在 SQL 方面做得更好的业务分析师。我的基础查询 SQL 越来越强大。我需要过渡到学习更多关于变量和存储过程的知识。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T16:04:48.177

如果这只是需要一个存储过程，那么：

```
CREATE PROCEDURE dbo.PullData -- whatever
AS
BEGIN
    SET NOCOUNT ON;

    DECLARE @today SMALLDATETIME, @start SMALLDATETIME, @end SMALLDATETIME; 

    SET @today = DATEADD(DAY, 0, DATEDIFF(DAY, 0, CURRENT_TIMESTAMP));

    SET @start = DATEADD(DAY, 1-DAY(@today), @today); 
    SET @end = DATEADD(DAY, 15, @start);  

    IF DATEPART(DAY, @today) <= 15 
    BEGIN     
        SET @start = DATEADD(MONTH, -1, @end);     
        SET @end = DATEADD(DAY, 1-DAY(@today), @today); 
    END   

    SELECT ... WHERE h.billed_date >= @start AND h.billed_date < @end; 
END
GO 
```

# javascript - 点击事件未执行

> ID：10884270
> 
> 赞同：1
> 
> 时间：2012-06-04T15:56:51.900
> 
> 标签：javascript, dom, javascript-events

鼠标悬停在单元格上会在该单元格内生成一个 div。那个 div 有一个 onclick。但是这个 onclick 没有被执行。这是一些示例代码：[JSFiddle](http://jsfiddle.net/Tb2kK/9/)

JavaScript：

```
var oldCell='';
function addDiv(cell){
    if(oldCell != ''){
        oldCell.innerHTML = '';
    }
    cell.innerHTML = "<div class='innerDiv' onclick='console.log(this.parentNode);'></div>";
    oldCell = cell;
} 
```

HTML

```
<table border='1px solid black'>
    <tr>
        <td class='cell' onmouseover='addDiv(this)'></td>
        <td class='cell' onmouseover='addDiv(this)'></td>
    </tr>
     <tr>
        <td class='cell' onmouseover='addDiv(this)'></td>
        <td class='cell' onmouseover='addDiv(this)'></td>
    </tr>
</table>​ 
```

我试过专注于 div，但这也不起作用。我也尝试过给单元格 onclick，然后专注于单元格而不是 div，但这在 Chrome 中不起作用，但在 FF 中起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T16:15:29.833

似乎每次调用“鼠标悬停”事件时，鼠标悬停事件都会在其中创建一个新对象。单击对象会触发 mouseover 事件，这可能会替换元素，因此无法调用 onclick 事件。

我对事件列表的猜测： - Mouseover - Mousedown -> Mouseover - 已替换对象。- Mouseup（不计为点击，因为新对象只接收鼠标向上）

* * *

编辑：

如果您的目标只是创建鼠标悬停效果，那么您应该使用 CSS 的 hover 关键字。

看看这个小提琴，它基本上可以做你想做的事情：http: [//jsfiddle.net/Tb2kK/27/](http://jsfiddle.net/Tb2kK/27/)

* * *

编辑：要与您的操作方式类似，您需要检查 div 是否已经存在。一种方法是分配一个 id：http: [//jsfiddle.net/mZdpN/](http://jsfiddle.net/mZdpN/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T16:06:38.770

替换你的js

```
<script type="text/javascript">
    var oldCell = null;
    function addDiv(cell){
        if (oldCell != null){
            oldCell.innerHTML = '';
        }

        var div = document.createElement('div');
        div.className = 'innerDiv';
        div.onclick = function() {
            console.log(this.parentNode);
        };
        cell.appendChild(div);   
        oldCell = cell;
    }
</script> 
```

# html - 文本块作为按钮栏

> ID：10884271
> 
> 赞同：1
> 
> 时间：2012-06-04T15:56:53.303
> 
> 标签：html, css

[http://jsfiddle.net/QewfP/](http://jsfiddle.net/QewfP/)

样式.css

```
body {
    background-color: #666666;
    margin-left:500px;
    margin-right:500px;
    margin-top:10px;
    margin-bottom:20px;
    font-family:Verdana, Geneva, Tahoma, sans-serif;
    font-size:12px; 
    color:white;
}

div.header {
    background-color: #333333;  
}

div.navigationBar {
    border:0;
    border-style:solid;
    background-color:#112211;  
}

div.navigationButton {
    border:1px;
    border-color:#ffffff;
    border-style:solid;
    background-color:#112211;
    padding:15px;
    width:100px;
    height:40px;
    text-transform:uppercase;
    overflow:hidden;
    font-weight:bold;
    text-align:center;
}

.navigationBar ul {
    list-style-type:none;   
    padding:1px;
}

.navigationBar li {
    display:inline;
    float:left; 
}

.navigationButton a
{
    text-decoration:none;
    color:#eec600;
    display:block;
}

.navigationButton a:link {
    text-decoration:none;
}

.navigationButton a:hover {
    color:#ffe811;
} 
```

索引.html

```
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta content="pl" http-equiv="Content-Language">
  <link rel="stylesheet" type="text/css" href="style.css"/> 
</head>
<body>
  <div class="header" style="height:200px; width: 800px;"></div>
  <div class="navigationBar" style= "height:73px; width: 800px;" > /* added unit to the height property */
    <ul>
      <li><div class="navigationButton" ><a href="#link1">Button1</a></div></li>
      <li><div class="navigationButton" ><a href="#link2">Button2</a></div></li>
      <li><div class="navigationButton" ><a href="#link3">Button3</a></div></li>
    </ul>
  </div>
</body>
</html> 
```

为什么header div和navigationBar之间有差距？欢迎对我的代码提出其他意见和建议。

可悲的差距发生在网络浏览器中![图片](../Images/5ad166e38c7b1dadf1cbcbbd7178505b.png)（为什么不在 jsFiddle 中？），我在 Firefox 和 IE 中尝试了这段代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T17:22:25.113

您在这里发生了多个错误。

*   你不应该`div`在列表项中有元素
*   您的 HTML 中有一个没有单位的高度`height:73;`
*   您的`ul`元素不必要地封装在 a`div`中，列表项中的链接也是如此。
*   您正在将内联样式与链接样式表混合。

你能描述更多你想要完成的事情吗，或者你有什么例子吗？

我以更跨浏览器兼容性的方式重新创建了我认为您想要的东西，让我知道您的想法。

此外，这里是相同代码的小提琴，但 CSS 拆分成一个单独的文件：http: [//jsfiddle.net/FsvJ3/](http://jsfiddle.net/FsvJ3/)

```
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Example</title>

  <style type="text/css">
    html {
      padding: 0;
      margin: 0;
      background: #555;
    }

    body {
      width: 800px;
      margin: 0 auto;
    }

    #header {
      width: 100%;
      height: 200px;
      background: #222;
    }

    #nav {
      background: #0e1a0c;
      width:100%;
      float: left;
      list-style-type: none;
      margin: 0;
      padding: 0;
    }

    #nav li {
      float: left;
      width: 100px;
      height: 40px;
      padding: 15px;
      border: 1px solid white;
    }

    #nav li a {
      color: yellow;
    }
  </style>

</head>
<body>
  <div id="header"></div>

  <ul id="nav">
    <li><a href="#">Button 1</a></li>
    <li><a href="#">Button 2</a></li>
    <li><a href="#">Button 3</a></li>
  </ul>
</body>
</html> 
```

我想补充一点，您尝试将页面中的内容居中的方式（在正文的两侧都有边距）会产生非常奇怪的行为。我通过显式设置宽度并将其`auto`用于左右边距来居中。

理想情况下，我可能会在 body 内部使用某种容器，而不是将这些属性赋予 body 元素本身。但为了简单起见，我直接应用了样式。

我建议不要添加尽可能多的元素，例如 div 与`navigationBar`列表周围的类的目的是什么？您可以改为设置列表元素的样式。

重要的是只拥有您需要的标记并尽量避免仅用于挂钩样式的标记。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T16:07:12.847

你不应该把 div 放在 li 里面你可以给 li 分配一个 navigationButton 类

我用你的代码设置了一个 jsfiddle，没有看到你所说的差距...... http://jsfiddle.net/qL8Ra/

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T17:12:54.283

[小提琴](http://jsfiddle.net/rakesh_katti/2v86s/)

我不明白灰色标题和导航栏之间的差距在哪里。并评论代码？是的，正如基思提到的，你可以使用

```
<li> class="navigationButton" ><a href="#link1">Button1</a></li>
<li> class="navigationButton" ><a href="#link2">Button2</a></li>
<li> class="navigationButton" ><a href="#link3">Button3</a></li> 
```

而且你已经有了一个样式表，最好不要使用内联样式`style="height:200px; width: 800px;"`

而且您可以正确格式化您的代码以获得更高的可读性。

# objective-c - Objective C 锐化蒙版滤镜 Xcode

> ID：10884273
> 
> 赞同：0
> 
> 时间：2012-06-04T15:56:57.890
> 
> 标签：objective-c, ios, filter, photo, imaging

在针对 iOS 的 Objective C 中创建非锐化蒙版过滤器的最有效方法是什么？最好实现一些像 ImageMagick 这样的开源或从头开始构建。

我认为基本公式一般如下（如果我没有正确，请发表评论）。

1.  复制原件
2.  模糊重复（高斯）
3.  通过“差异”与原始融合
4.  使用结果来掩盖原始
5.  增加原件未遮罩区域的对比度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T22:51:06.697

Core Image 内置了[CIUnsharpMask 过滤器](https://developer.apple.com/library/ios/#documentation/graphicsimaging/Reference/CoreImageFilterReference/Reference/reference.html#//apple_ref/doc/filter/ci/CIUnsharpMask)，虽然我不确定它是否在 iOS 上可用。Brad Larson 的[GPUImage 框架](https://github.com/BradLarson/GPUImage)也有一个不清晰的蒙版滤镜。

与交叉编译 ImageMagick 或编写自己的方法相比，这两种方法都应该非常快速且易于实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-14T11:19:58.107

```
(UIImage *)useOfUnsharpMask:(CIImage *)beginImage 
{

    float sliderValue = sharpnessSlider.value;
    CIFilter *filter = [CIFilter filterWithName:@"CIUnsharpMask" keysAndValues:kCIInputImageKey,beginImage,@"inputIntensity",[NSNumber numberWithFloat:sliderValue],@"inputRadius",@2.50, nil];
    CIContext *context = [CIContext contextWithOptions:nil];

    CIImage *outputImage = [filter valueForKey: @"outputImage"];
    UIImage *finalImage = [UIImage imageWithCGImage:[context createCGImage:outputImage fromRect:outputImage.extent]];

    return finalImage;
} 
```

希望有帮助:)

# iphone - 我应该为每个服务器请求验证用户密码吗？

> ID：10884278
> 
> 赞同：7
> 
> 时间：2012-06-04T15:57:24.287
> 
> 标签：iphone, ios, web-services, security

如果这对某些人来说可能是常识，我深表歉意，但我仍在学习。我有一个将文件同步到 Web 服务器的 iOS 应用程序。一旦用户在设备上登录，除非他退出，否则他将保持登录状态。目前，每当用户发起服务器请求（例如添加、更新或删除文件）时，我只将用户的电子邮件而不是密码发送到服务器，因为用户已经在设备上进行了身份验证。

我是否应该在每次用户发出请求时发送用户存储的密码并让服务器在继续请求之前对其进行身份验证？为什么或者为什么不？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T16:04:48.300

您应该发送会话标识符，而不是电子邮件地址。

会话标识符是一个很大的数字（128 位就足够了），当用户成功通过身份验证时，由密码随机数生成器选择。它在用户的网络设备中设置为“cookie”，并通过安全通道 (TLS) 随每个请求一起发送。

电子邮件地址是公开的。您只能使用机密（例如密码或会话标识符）对请求进行身份验证。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-04T16:02:51.530

我不是专家，但在您得到更好的答案之前，这里有一些提示：

*   每个请求都应该包含某种“会话标识符”，以表明它是登录会话的一部分。攻击者应该不可能/难以猜测或重用此标识符。通常为此使用 HTTP cookie，但您可以将它们包含在 URL 中。
*   您永远不应该通过网络发送明文密码，因为任何嗅探网络的人都会看到它们。相反，您应该发送某种散列密码或使用质询-响应协议。

如果您使用的是 HTTPS，那么您可能不需要太担心这一点。如果它是未加密的流量，那么您可能希望使用附加哈希值“签名”每条消息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-05T01:01:51.693

使用电子邮件地址来识别用户意味着某人可能会通过使用现有用户的电子邮件地址来伪造对您服务的访问权限。正如[Kristopher Johnson](https://stackoverflow.com/users/1175/kristopher-johnson)所建议的那样，使用会话标识符可以避免暴露凭据，并且可能是一个不错的设计选择。

[OWASP](https://www.owasp.org/index.php/Main_Page)的优秀人员有一个[会话管理备忘单](https://www.owasp.org/index.php/Session_Management_Cheat_Sheet)，这是任何设计的绝佳起点。

如果可用，他们确实建议使用现有的会话管理框架（Java EE、ASP.NET、PHP）。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2014-10-31T17:12:14.433

如果您要通过 SSL，那么最好在每个请求中发送用户名和密码。为什么？因为它是一个更简单的编程接口，并且因为令牌没有增加真正的价值。在某些时候要获得令牌，您必须发送凭据，那么如果您每次都发送凭据有什么关系呢？没有人能及时解密 SSL。现在可能存在其他安全漏洞，例如 Web 服务器本身，但这与从客户端到服务器的传输（受保护）无关。因此，每个请求的用户/通行证是最好的。

而且因为它是一个 iOS 应用程序，您可以将凭据存储在 NSUserDefaults 中（它被沙箱化到您的特定应用程序并且没有其他应用程序可以访问它）

请投票并接受，其他答案具有误导性

现在，如果它不是 iOS 应用程序，并且您必须将凭据存储在 cookie 而不是 NSUserDefaults 中，那么好吧，也许您可​​以提出使用会话的参数。但除此之外的会议不值得头疼！

# drupal-6 - D6 到 D7 - 内容迁移

> ID：10884279
> 
> 赞同：-1
> 
> 时间：2012-06-04T15:57:28.687
> 
> 标签：drupal-6, drupal-7, migration

我在 drupal 6 中有一个现有站点，我需要在 drupal 7 中重建它。我在将内容从 D6 迁移到 D7 时遇到了一些问题。我尝试使用 Drupal var 导出格式和 CSV 格式的节点导出模块，但两者都不起作用。有没有其他方法可以将所有内容从 D6 迁移到 D7？任何使用 migrate 模块进行内容迁移的参考或教程。

对此问题的任何解决方案将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T12:51:02.723

您可以使用[CCK 模块](http://drupal.org/project/cck)的 Drupal 7 版本将数据从 D6 安装迁移到 D7 安装。

如需帮助，请查看将[D6 内容构建工具包 (CCK) 迁移到 D7 字段](http://drupal.org/node/1144136)

# jquery - 萤火虫中的jquery总是抛出NULL

> ID：10884288
> 
> 赞同：0
> 
> 时间：2012-06-04T15:57:52.590
> 
> 标签：jquery, firebug

我只是在学习如何正确使用萤火虫。我看了一个howto，作者只是输入了 $('p'); 在控制台中，它显示了所有 p 标签。就我而言，即使该站点（我本地的 Drupal 7 站点）上有许多 p 标签，它也始终显示为 NULL。还有我尝试过的所有其他标签。我必须在前面再放一个美元，这有点用？！我做错了什么，其他方式不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T21:29:57.147

前面的示例没有执行任何操作，因为它没有返回或打印任何内容。尝试这个：

```
(function($) {
   console.log('this works');
   return $('p');
})(jQuery); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T16:00:40.743

如果您的网站包含 jQuery 库，则任何 jQuery 进程都将在浏览器中执行`console`，否则您将无法获得任何`console`.

jQuery get 是不可能的`NULL`，因为如果不存在元素，它将返回`[]`。或者，您可能会得到`undefined`，但`NULL`永远不会。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T16:06:00.840

尝试这个：

```
(function($) {
    $('p');
})(jQuery); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T21:54:38.477

尝试在 Firebug 控制台中发出以下命令：

```
jQuery.toSource()
$.toSource() 
```

如果页面中包含 jQuery，它们都应该返回相同的非空值，即作为字符串的源代码块。

如果页面中没有 JQuery，那就很棘手了：`$`在 Firebug 控制台中有一个**[Firebug 命令行 API](http://getfirebug.com/wiki/index.php/Command_Line_API)****的内部函数，** 它是一个简单的快捷方式，`document.getElementById()`它没有 JQuery 强大，`$`而且它们的工作方式也不一样方法。然后，在 HTML 源代码中`$('p')`查找元素。`id="p"`没有，所以你得到空值。

`$$`是 Firebug 命令行 API 的另一个功能，相反，它用作 CSS 选择器。然后，为您提供来自 HTML 源代码的所有元素`$$('p')`的数组。`<p>`

# android - 服务器也连接移动设备

> ID：10884289
> 
> 赞同：0
> 
> 时间：2012-06-04T15:58:00.677
> 
> 标签：android, sql-server, google-app-engine

大家好，我是服务器应用程序方面的新手。

所以这是我的问题。我有一个移动应用程序，我想根据位置、ID 号和名称连接到服务器。当用户在文本字段中输入信息并单击提交时，信息将从手机应用程序提交到服务器，服务器根据信息向用户返回一个数字，并且还会有是一个桌面客户端，它将接收新用户已注册或添加到队列列表的通知。

谁能给我一个关于我需要学习的事情的背景，以及我需要做的事情？还有这样的事情背后的实现是什么。也会很费钱。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T16:04:33.840

您的用户如何进行身份验证？您使用的是 SQL 数据库吗？如果您是，则需要连接到数据库，然后使用提供的用户凭据对其进行身份验证

# iphone - 从另一个 UIView 向 TableView 添加行

> ID：10884291
> 
> 赞同：0
> 
> 时间：2012-06-04T15:58:01.267
> 
> 标签：iphone, ios5

我有`UIViewController`一个保存按钮。当我单击它时，我将一个字符串添加到一个`UITableViewController`. 我有一个转场，然后转到表视图，我希望数组中的新对象在表中显示为一行。

如何从视图控制器获取数据以显示在表视图控制器上？
我在做什么是行不通的。

UIViewController：

```
- (void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{
    if([[segue identifier] isEqualToString:@"showFindTable"])
    {
        FindTableViewController *findTableVC = [segue destinationViewController];
        findTableVC.titles addObject:titleField.text];
        [findTableVC.tableView reloadData];
    }
} 
```

UITableViewController：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    self.titles = [[NSMutableArray alloc] init];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"FindCell";
    FindTableCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    cell.title.text = [self.titles objectAtIndex:[indexPath row]];

    return cell;
} 
```

在表视图控制器内部，我初始化了数组。因此，当我添加对象时，它是否只是在被调用时恢复为空数组`viewDidLoad`？我计划最终使用 Core Data 持久化数据。所以我认为如果这是问题，那将解决它。在那之前，我怎样才能让它工作？

我试图用一个字符串初始化标题数组。该字符串显示。所以看起来确实是因为每次加载表视图时我都在重新初始化数组。我在哪里/应该在其他地方初始化数组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T17:41:59.170

您可以使用委托：

ViewController.h（声明委托）

```
@protocol delegateName <NSObject>
- (void)prepareForSegue:(NSString)strToAdd;
@end 
```

视图控制器.m

```
- (void)save:(id)sender {
   [delegete prepareForSegue:titleField.text];
} 
```

UITableViewController

```
- (void)prepareForSegue:(NSString)strToAdd {
  [self.title addObject:strToAdd];
  [self.tableView reloadData];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T16:12:39.927

在我的项目中，我这样使用

要向单元格添加数据的类的 Crete 对象，如下所示。

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
   static NSString *CellIdentifier = @"WhatsNewCell";

WhatsNewCell *cell = (WhatsNewCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
//if (nil == cell)
{
    cell = [[WhatsNewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] ;
    cell.selectionStyle = UITableViewCellSelectionStyleNone;
}
return cell;
} 
```

但这里 WhatsNewCell 是**UITableViewCell**的子类， 在该类中创建方法并添加类似

```
 - (void)createCellLabels
{    

albumNameLabel = [[UILabel alloc] initWithFrame:CGRectMake(15.0, 5.0, 200.0, 50.0)];
albumNameLabel.textAlignment = UITextAlignmentLeft;
albumNameLabel.textColor = [UIColor colorWithRed:0.14 green:0.29 blue:0.42 alpha:1]; 
albumNameLabel.font =  [UIFont boldSystemFontOfSize:15.0];
albumNameLabel.backgroundColor = [UIColor clearColor];
[self.contentView addSubview:albumNameLabel];

artistNameLabel = [[UILabel alloc] initWithFrame:CGRectMake(15.0, 28.0, 200.0, 50.0)];
artistNameLabel.textAlignment = UITextAlignmentLeft;
artistNameLabel.textColor = [UIColor grayColor];
artistNameLabel.font =  [UIFont boldSystemFontOfSize:12.0];
artistNameLabel.backgroundColor = [UIColor clearColor];
[self.contentView addSubview:artistNameLabel];

genresLabel1 = [[UILabel alloc] initWithFrame:CGRectMake(5.0, 0.0, 200.0, 25.0)];
genresLabel1.textAlignment = UITextAlignmentLeft;
genresLabel1.textColor = [UIColor colorWithRed:0.14 green:0.29 blue:0.42 alpha:1]; 
genresLabel1.font =  [UIFont boldSystemFontOfSize:15.0];
genresLabel1.backgroundColor = [UIColor clearColor];
[self.contentView addSubview:genresLabel1];

} 
```

可能对你有帮助。

# android - Android - 从网站阅读新闻

> ID：10884293
> 
> 赞同：0
> 
> 时间：2012-06-04T15:58:10.053
> 
> 标签：android, html, jsoup

我正在制作一个 Android 应用程序，我需要在其中阅读此页面的最新消息（以及显示“NYHEDER”的标签：http: [//www.stormthebuildingfest.com/](http://www.stormthebuildingfest.com/) 然后，当然，将它们打印在屏幕。

我见过不同的地方，也许 JSOUP 可以帮助解决这个问题 - 但 JSOUP 食谱似乎对我没有帮助。

甚至可以从这个页面获取新闻吗？如何？或者如果它是 JSOUP - 任何人都可以向我推荐食谱的哪一部分适合这个问题？ [http://jsoup.org/cookbook/](http://jsoup.org/cookbook/)

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T17:56:26.477

您可以使用功能 XML 拉解析器 - 为此必须有一个 XML/RSS。

[http://android-developers.blogspot.co.uk/2011/12/watch-out-for-xmlpullparsernexttext.html](http://android-developers.blogspot.co.uk/2011/12/watch-out-for-xmlpullparsernexttext.html)

关于理论的好文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T11:04:01.833

基本上，您需要做的是：

```
//This line will get you the whole page
Document doc = Jsoup.connect("http://www.url.com/section.script").get();

//This other line will make sure you get the specific info you're looking for
Elements elems = doc.select("some element");

//Or if you wanna just print it all out, you can simply
System.out.println(doc);

//You can also print just the text (Without ANY tags, or charset issues)
System.out.println(doc.text())

//The .text(); method works for you the variable Elements as
//well. If you got some info, and just want its text, that's
//the best way to go 
```

另外，我会研究[Jsoup 选择器](http://jsoup.org/cookbook/extracting-data/selector-syntax)API。

# wordpress - 检查buddypress xprofile中的字段是否有新值

> ID：10884294
> 
> 赞同：0
> 
> 时间：2012-06-04T15:58:10.737
> 
> 标签：wordpress, field, buddypress

当用户用新值更新他们的个人资料字段“国家”或“城市”时，我希望只收到具有新值的字段的通知。目前我正在使用它，但不知道哪些字段已被修改：

```
add_action ('xprofile_updated_profile', 'profile_change_notify');
function profile_change_notify ($vars = array ())
{
    $user = new WP_User ($vars['user_id']);
    wp_mail ('myname@mydomain.com', 'Subject ( ' . $user->user_login . ' just updated the Profile )', 'Message Body goes here.');
} 
```

我很感激任何帮助..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T13:10:19.483

请使用以下代码：

```
function update_xprofile_country_state($user_id) {
    if (!empty($user_id)) {
            $user = new WP_User ($user_id);
        if (!empty($_POST['country'])) {
                 wp_mail ('myname@mydomain.com', 'Subject ( ' . $user->user_login . ' just updated the Profile )', 'Message Body goes here.');
        }
    }
}
add_action('xprofile_updated_profile', 'update_xprofile_country_state', 0, 1); 
```

在这里，您从 $_POST 变量中获得了值。如果从用户配置文件更新了 contry 值，则发送邮件。

# android - 预制功能相机可用吗？

> ID：10884301
> 
> 赞同：0
> 
> 时间：2012-06-04T15:58:48.703
> 
> 标签：android, custom-controls, android-camera

我正在创建一个需要从前置摄像头捕获图像的 android 应用程序，但这个功能目前还不是应用程序的主要目的。

我想知道是否有任何预制的自定义视图可以管理和使用 android Camera 对象来拍照，但它包含了所有基本的相机功能（缩放、对焦等，包括界面）并返回给我一个最终的用户拍摄照片时的图像。这样的事情存在吗？

我知道这看起来很懒惰，但我可以专注于应用程序的独特部分。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T16:31:17.170

您可以使用意图来完成此任务::

```
Intent intent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE); 
startActivityForResult(intent, cameraRequestCode); 
```

并在 onActivityResult ::

```
 protected void onActivityResult(int requestCode, int resultCode, Intent data)
 {  
    if ( (resultCode == Activity.RESULT_OK) && (requestCode == cameraRequestCode)) 
    {  
        Bitmap myPicture = (Bitmap) data.getExtras().get("data"); 
        imageView.setImageBitmap( myPicture );
    }  
 } 
```

# ruby-on-rails - 如何编写确保发送电子邮件的 Rspec 控制器测试？

> ID：10884302
> 
> 赞同：10
> 
> 时间：2012-06-04T15:59:00.260
> 
> 标签：ruby-on-rails, ruby-on-rails-3, controller, actionmailer, rspec-rails

目前在我的控制器规格中，我有：

```
require 'spec_helper'

describe CustomerTicketsController do
  login_user

  describe "POST /create (#create)" do
    # include EmailSpec::Helpers
    # include EmailSpec::Matchers
    it "should deliver the sales alert email" do
      # expect
      customer_ticket_attributes = FactoryGirl.attributes_for(:customer_ticket)
      customer_mailer = mock(CustomerMailer)
      customer_mailer.should_receive(:deliver).
        with(CustomerTicket.new(customer_ticket_attributes))
      # when
      post :create, :customer_ticket => customer_ticket_attributes
    end
  end
end 
```

在我的控制器中，我有：

```
 # POST /customer_tickets
  # POST /customer_tickets.xml
  def create
    respond_to do |format|
      if @customer_ticket.save
        CustomerMailer.sales_alert(@customer_ticket).deliver
        format.html { redirect_to @customer_ticket, notice: 'Customer ticket was successfully created.' }
        format.xml { render xml: @customer_ticket, status: :created, location: @customer_ticket }
      else
        format.html { render action: "new" }
        format.xml { render xml: @customer_ticket.errors, status: :unprocessable_entity }
      end
    end
  end 
```

我的测试当前产生以下输出：

> ```
> Failures:
> 
>   1) CustomerTicketsController POST /create (#create) should deliver the sales alert email
>      Failure/Error: customer_mailer.should_receive(:deliver).
>        (Mock CustomerMailer).deliver(#<CustomerTicket id: nil, first_name: "firstname1", last_name: "lastname1", company: nil, referral: nil, email: "firstname1@example.com", phone: "555-5555", fax: nil, country: nil, address1: "555 Rodeo Dr.", address2: nil, city: "Beverly Hills", state: "CA", postcode: "90210", question: "The answer to the universe is 4.", type: nil, status: nil, priority: nil, number: nil, cs_rep_id: nil, created_at: nil, updated_at: nil>)
>            expected: 1 time
>            received: 0 times
>      # ./spec/controllers/customer_ticket_controller_spec.rb:13:in `block (3 levels) in <top (required)>'
> 
> Finished in 0.52133 seconds
> 1 example, 1 failure
> 
> Failed examples:
> 
> rspec ./spec/controllers/customer_ticket_controller_spec.rb:9 # CustomerTicketsController POST /create (#create) should deliver the sales alert email 
> ```

谢谢你的关注。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-04T17:44:21.620

您可以检查 ActionMailer::Base.deliveries.count 以确保它增加了 1。

像这样的东西（未经测试）

```
expect {custom_mailer.deliver}.to change { ActionMailer::Base.deliveries.count }.by(1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T17:34:46.323

您设置的模拟与实际执行的不匹配。您实际上必须调用`deliver`您正在创建的模拟。

就像是

```
message = mock('Message')
CustomerMailer.should_receive(:sales_alert).and_return(message)
message.should_receive(:deliver) 
```

应该通过。

如果您想检查传递给`sales_alert`您正在做的事情的内容是行不通的 - 活动记录只会按主键相等性比较对象，因此您在规范中创建的客户票证将不等于在规范中创建的票证你的控制器。

你可以做的一件事是

```
CustomerMailer.should_receive(:sales_alert) do |arg|
  ...
end.and_return(message) 
```

rspec 将产生任何`sales_alert`被调用的东西，你可以做任何你想做的检查

另一种方法是 stub out `CustomerTicket.new`，这样您就可以控制它返回的内容，例如

```
mock_ticket = mock(CustomerTicket)
CustomerTicket.should_receive(:new).with(customer_ticket_attributes).and_return(mock_ticket)
mock_ticket.should_receive(:save).and_return(true)
CustomerMailer.should_receive(:sales_alert).with(mock_ticket).and_return(message) 
```

最后，您可能会决定此警报发送应该真正属于实例方法，`CustomerTicket`在这种情况下，您的控制器规范可以检查是否`send_sales_alert`在票证上调用了方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-20T19:48:59.783

这是如何测试使用正确参数调用 Mailer 的方法。

```
delivery = double
expect(delivery).to receive(:deliver_now).with(no_args)

expect(CustomerMailer).to receive(:sales_alert)
  .with(customer_ticket)
  .and_return(delivery) 
```

# recurrence - 递归关系：T(n) = T(n/2) + n

> ID：10884303
> 
> 赞同：6
> 
> 时间：2012-06-04T15:59:08.623
> 
> 标签：recurrence

嗨，我正在尝试通过伸缩来解决以下递归关系，但我被困在最后一步。

```
T(N) = T(N/2) + N              T(1)=0
T(N/2) = T(N/4) + N/2
T(N/4) = T(N/8) + N/4
...
T(2) = T(1) + 2

T(N)= T(1) + N + N/2 + N/4 
```

我认为答案是 nlogn，但我不知道如何将上述内容解释为 nlogn。我可以看到我正在执行登录步骤，但是 n 来自哪里？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-12-14T05:27:26.130

您已经完全正确地完成了所有操作，但无法找到总和。你得到：`n + n/2 + n/4 + ...`，它等于`n * (1 + 1/2 + 1/4 + ...)`。

你得到一个[几何级数](https://en.wikipedia.org/wiki/Geometric_series)的总和，它等于`2`。因此，您的总和是`2n`。所以复杂度是`O(n)`。

**PS**这不叫伸缩。数学中的伸缩是后续术语相互抵消的时候。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T05:25:40.493

答案不是 nlogn 而只是 n

T(1)=0

T(N) = T(N/2) + N

T(N/2) = T(N/4) + N/2

T(N/4) = T(N/8) + N/4 ... T(2) = T(1) + 2

伸缩式展开中总共有 log(N) 个语句

现在通过伸缩取消，

我们有 T(N) = T(1) + N + N/2 + N/4 + N/8 +.....+ 2

T(1) = 0

T(N) = N + N/2 + ..... + 2

这是一个带有 log(n) 项的几何级数，每个项减半。

T(N) = N [ 1 - (1/2)^log(N)] / (1/2)

T(N) = 2N[1 - 1/N]

T(N) = 2N - 2

因此答案是 O(N)。

# sql-server - 从 Select 中获取结果并更新同一语句中的选定记录

> ID：10884305
> 
> 赞同：0
> 
> 时间：2012-06-04T15:59:44.513
> 
> 标签：sql-server, database, sql-server-2005, apache-camel

我想从数据库表中选择几条记录，然后将数据库中的列值从“待处理”更改为“处理中”。但是 Select 语句的结果必须进入 jms 队列进行处理。我正在使用 Apache Camel 框架进行集成，并使用 MS SQL Server 2005 作为数据库。如果这可以通过单个 sql 语句来实现，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T16:52:09.037

您应该能够执行`UPDATE`并使用该[`OUTPUT/OUTPUT INTO`](http://msdn.microsoft.com/en-us/library/ms177564.aspx)功能返回结果集中的行[http://decipherinfosys.wordpress.com/2007/05/25/using-the-output-and-output-into-clauses-in -sql-server-2005/](http://decipherinfosys.wordpress.com/2007/05/25/using-the-output-and-output-into-clauses-in-sql-server-2005/)

# maven - 发布问题：执行。校验和验证失败

> ID：10884307
> 
> 赞同：2
> 
> 时间：2012-06-04T16:00:01.127
> 
> 标签：maven, maven-3, artifactory

我正在尝试在我的应用程序中运行发布插件，发布：准备工作正在正确完成，但是当我尝试运行 de release:perform 时。我会给你一些错误的部分：

```
[INFO] Uploaded: http://172.18.102.23:8080/artifactory/libs-release-local/br/fucapi/ads/ads/0.0.9/ads-0.0.9.pom (3 KB at 5.5 KB/sec)
[INFO] Downloading: http://172.18.102.23:8080/artifactory/libs-release-local/br/fucapi/ads/ads/maven-metadata.xml
[INFO] [WARNING] Checksum validation failed, expected GIF89a????!?,D; but is 2daeaa8b5f19f0bc209d976c02bd6acb51b00b0a for http://172.18.102.23:8080/artifactory/libs-release-local/br/fucapi/ads/ads/maven-metadata.xml
[INFO] [WARNING] Checksum validation failed, expected GIF89a????!?,D; but is 2daeaa8b5f19f0bc209d976c02bd6acb51b00b0a for http://172.18.102.23:8080/artifactory/libs-release-local/br/fucapi/ads/ads/maven-metadata.xml
[INFO] Downloaded: http://172.18.102.23:8080/artifactory/libs-release-local/br/fucapi/ads/ads/maven-metadata.xml (43 B at 1.3 KB/sec)

[INFO] [INFO] BUILD FAILURE
[INFO] [INFO] ------------------------------------------------------------------------
[INFO] [INFO] Total time: 5.672s
[INFO] [INFO] Finished at: Mon Jun 04 11:08:32 GMT-04:00 2012
[INFO] [INFO] Final Memory: 6M/28M
[INFO] [INFO] ------------------------------------------------------------------------
[INFO] [ERROR] Failed to execute goal org.apache.maven.plugins:maven-deploy-plugin:2.7:deploy (default-deploy) on project ads: Failed to update metadata br.fucapi.ads:ads/maven-metadata.xml: Could not parse metadata C:\Documents and Settings\JOSEBARBOSA\.m2\repository\br\fucapi\ads\ads\maven-metadata-release.xml: only whitespace content allowed before start tag and not G (position: START_DOCUMENT seen G... @1:1) -> [Help 1]
[INFO] org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.apache.maven.plugins:maven-deploy-plugin:2.7:deploy (default-deploy) on project ads: Failed to update metadata br.fucapi.ads:ads/maven-metadata.xml: Could not parse metadata C:\Documents and Settings\JOSEBARBOSA\.m2\repository\br\fucapi\ads\ads\maven-metadata-release.xml: only whitespace content allowed before start tag and not G (position: START_DOCUMENT seen G... @1:1) 

[INFO] Caused by: org.apache.maven.plugin.MojoExecutionException: Failed to update metadata br.fucapi.ads:ads/maven-metadata.xml: Could not parse metadata C:\Documents and Settings\JOSEBARBOSA\.m2\repository\br\fucapi\ads\ads\maven-metadata-release.xml: only whitespace content allowed before start tag and not G (position: START_DOCUMENT seen G... @1:1) 
[INFO]  at org.apache.maven.plugin.deploy.DeployMojo.execute(DeployMojo.java:193) 
```

1）我试图清理我的存储库。2）我把这个配置放在我的属性中。

```
<project.build.sourceEncoding>ISO-8859-1</project.build.sourceEncoding> 
```

3）我尝试这个话题：[Maven checksum failed](https://stackoverflow.com/questions/1765959/maven-checksum-failed) using "mvn dependency:resolve"。4）尝试以下主题：在我的 settings.xml 中使用“checksumPolicy”[和 QT Jambi 一起使用 Maven](https://stackoverflow.com/questions/8324677/using-maven-with-qt-jambi)

...但是这个问题没有用。

拜托，不知道该怎么做才能解决这个问题，有人遇到过吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T07:16:45.957

```
daeaa8b5f19f0bc209d976c02bd6acb51b0 
```

表示响应是 SSL 编码的。网址

```
http://172.18.102.23:8080/artifactory/ 
```

来自配置。要么将协议更改为

```
https 
```

或更改网址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T17:07:24.367

这也是一个错误，不直观地，由于您的服务器无法访问，可能会引发该错误。卷曲 mvn 尝试连接的 url 可以为您节省一些时间来解决此问题。

# php - 内联悬停在 Div

> ID：10884308
> 
> 赞同：0
> 
> 时间：2012-06-04T16:00:00.783
> 
> 标签：php, html, css

嗨，我正在尝试从数据库运行 while 循环以显示许多不同的记录，但是记录的显示方式是通过不同的图像，因此我无法使用标准 css 对其进行自定义，而是通过内联 css 进行自定义，但是我已经到了可以很好地显示每个图像的地步，但是不会在用户悬停时显示新图像，这是有关 div 的行

```
<div id="house_wrapper" style="background-image: url(images/HOUSES/<?php print "$house_name";?>.png); :hover{background-image: url(images/HOUSES/<?php print "$house_name";?>_hover.png)};"></div><!---end house_wrapper---> 
```

这是整个while循环的代码

```
 <div id="house_summary_content">

  <?php 
          $query = mysql_query("SELECT * FROM user_houses WHERE user_id='$user_id'");

          while($row = mysql_fetch_assoc($query)) : ?>
<?php extract($row);?>
<?php $sql_house = mysql_query("SELECT * FROM houses WHERE house_id='$house_id'");
$house_array = mysql_fetch_assoc($sql_house);
$house_name = $house_array['house_name'];?>
<div id="house_wrapper" style="background-image: url(images/HOUSES/<?php print "$house_name";?>.png); :hover{background-image: url(images/HOUSES/<?php print "$house_name";?>_hover.png)};"></div><!---end house_wrapper--->

 <?php endwhile ?>

</div><!---end house_summary_content---> 
```

感谢你们提供的任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T17:40:08.617

你可以通过 onmouseover 和 onmouseout 使用 javascript 吗？例如：

```
<div id="house_wrapper" style="background-image: url(http://i.imgur.com/F5iJY.jpg);width:100%;height:400px;" onmouseover="this.style.backgroundImage='url(http://i.imgur.com/YpJyG.jpg)';" onmouseout="this.style.backgroundImage='url(http://i.imgur.com/F5iJY.jpg)';"></div>​ 
```

**演示** [http://jsfiddle.net/UvPHp/9/](http://jsfiddle.net/UvPHp/9/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T05:49:44.050

尝试这个：

**HTML/PHP：**

```
<div id="house_summary_content">
<?php 
    $query = mysql_query("SELECT * FROM user_houses WHERE user_id='$user_id'");

    while($row = mysql_fetch_assoc($query)) : ?>
<?php extract($row);?>
<?php $sql_house = mysql_query("SELECT * FROM houses WHERE house_id='$house_id'");
$house_array = mysql_fetch_assoc($sql_house);
$house_name = $house_array['house_name'];?>
<div id="house_wrapper" style="background-image: url('images/HOUSES/<?php print $house_name;?>.png')"></div><!---end house_wrapper--->

<?php endwhile ?>

</div><!---end house_summary_content---> 
```

**CSS：**

```
<?php print $house_name; ?>:hover {
    background-image: url('images/HOUSES/<?php print "$house_name"; ?>_hover.png')
}; 
```

只要图片的文件名中没有空格，这应该可以工作。

# ruby-on-rails - Michael Hartl Rails 教程第 7 章错误 Action not found in UsersController

> ID：10884313
> 
> 赞同：6
> 
> 时间：2012-06-04T16:00:25.613
> 
> 标签：ruby-on-rails, ruby, rspec, railstutorial.org

我目前正在关注 Michael Hartl 的 Rails 教程，并且我已经成功升级到 7.22，没有遇到任何重大问题。但是，我对测试的输出感到困惑，它说：

```
Failures:

  1) UserPages signup with invalid information should not create a user
     Failure/Error: expect{click_button submit }.not_to change(User, :count)
     AbstractController::ActionNotFound:
       The action 'create' could not be found for UsersController
     # (eval):2:in `click_button'
     # ./spec/requests/user_pages_spec.rb:29:in `block (5 levels) in <top (required)>'
     # ./spec/requests/user_pages_spec.rb:29:in `block (4 levels) in <top (required)>'

  2) UserPages signup with valid information should create a user
     Failure/Error: expect{click_button submit}.to change(User, :count).by(1)
     AbstractController::ActionNotFound:
       The action 'create' could not be found for UsersController
     # (eval):2:in `click_button'
     # ./spec/requests/user_pages_spec.rb:42:in `block (5 levels) in <top (required)>'
     # ./spec/requests/user_pages_spec.rb:42:in `block (4 levels) in <top (required)>'

Finished in 0.7718 seconds
6 examples, 2 failures 
```

按照教程的说明，我已将以下内容添加到我的用户控制器页面：

```
class UsersController < ApplicationController
  def show
    @user = User.find(params[:id])
  end

  def new
    @user = User.new
  end

end 
```

但它似乎仍然不起作用。我试过添加一个创建方法，但这只会抛出一个丢失的模板错误......

如果它有帮助，这里是 rake routes 命令的输出：

```
~/dev/rails/sample_app$ rake routes
    users GET    /users(.:format)          users#index
          POST   /users(.:format)          users#create
 new_user GET    /users/new(.:format)      users#new
edit_user GET    /users/:id/edit(.:format) users#edit
     user GET    /users/:id(.:format)      users#show
          PUT    /users/:id(.:format)      users#update
          DELETE /users/:id(.:format)      users#destroy
     root        /                         static_pages#home
   signup        /signup(.:format)         users#new
     help        /help(.:format)           static_pages#help
    about        /about(.:format)          static_pages#about
  contact        /contact(.:format)        static_pages#contact 
```

作为对评论的回应，失败的测试是：

```
 describe "signup" do

      before{ visit signup_path }
      let(:submit) {"Create my account"}

      describe "with invalid information" do
        it "should not create a user" do
          expect{click_button submit }.not_to change(User, :count)
        end
      end

      describe "with valid information" do
        before do
          fill_in "Name", with: "Example User"
          fill_in "Email", with: "user@example.com"
          fill_in "Password", with: "foobar"
          fill_in "Confirmation", with: "foobar"
        end

        it "should create a user" do
          expect{click_button submit}.to change(User, :count).by(1)
        end
      end
    end 
```

提前感谢您的任何建议！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-03T20:01:21.713

测试*不*应该在那个时候通过。继续按照本教程进行操作，您将了解它是如何工作的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-06T05:05:03.747

在查看错误代码并直接来到这里之前，我在同一件事上挣扎了大约半个小时。@mhartl 显然是正确的，教程中没有错字，只是当他说“注册页面的测试”应该再次工作时有点令人困惑。他没有提到来自注册页面的提交（这应该是教程中此时失败的两个测试）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T20:02:59.757

我遇到了同样的问题（在 7.3.1 结束时两个注册测试仍然没有通过），后来注意到我犯了以下错误：

当我`create`在控制器中添加方法时`Users`，我不小心用方法覆盖了`new`方法`create`（我把它们弄糊涂了）。但是，您需要这两种方法。现在它起作用了。

我希望这对某人有帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T10:03:21.723

将此添加到您的 app/controller/users_controller.rb：

```
class UsersController < ApplicationController
  attr_accessible :tags_attributes
  # GET /users
  # GET /users.json
  def index
    @users = User.all

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @users }
    end
  end

  # GET /users/1
  # GET /users/1.json
  def show
    @user = User.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @user }
    end
  end

  # GET /users/new
  # GET /users/new.json
  def new
    @user = User.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @user }
    end
  end

  # GET /users/1/edit
  def edit
    @user = User.find(params[:id])
  end

  # POST /users
  # POST /users.json
  def create
    @user = User.new(params[:user])

    respond_to do |format|
      if @user.save

        format.html { redirect_to @user, notice: 'User was successfully created.' }
        format.json { render json: @user, status: :created, location: @user }
      else
        format.html { render action: "new" }
        format.json { render json: @user.errors, status: :unprocessable_entity }
      end
    end
  end

  # PUT /users/1
  # PUT /users/1.json
  def update
    @user = User.find(params[:id])

    respond_to do |format|
      if @user.update_attributes(params[:user])
        format.html { redirect_to @user, notice: 'User was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @user.errors, status: :unprocessable_entity }
      end
    end
  end

  # DELETE /users/1
  # DELETE /users/1.json
  def destroy
    @user = User.find(params[:id])
    @user.destroy

    respond_to do |format|
      format.html { redirect_to users_url }
      format.json { head :no_content }
    end
  end
end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-03T16:35:40.720

您需要添加一个`create`操作（我遇到了同样的问题）：

```
class UsersController < ApplicationController
  def show
    @user = User.find(params[:id])
  end

  def new
    @user = User.new
  end

  def create
    @user = User.new(params[:user])
    if @user.save
      flash[:success] = "Welcome to the Sample App!"
      redirect_to @user
    else
      render 'new'
    end
  end
end 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-04T16:13:42.767

config.use_transactional_fixtures = true 在您的 applications.rb 文件中

并确保您在用户控制器中定义了创建操作

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-08-08T16:43:02.653

有同样的问题。修复出现在第二版第 305 页的“注册失败”部分，所以请继续。您缺少控制器中的创建操作。如上所述，注册页面测试工作的提及令人困惑。它只是有效的页面，而不是提交表单。

这本书绝对是一流的，是我读过的最好的编码书籍之一，实际上是最好的。然而，与跨越许多页面或在这种情况下是整本书的示例代码一样，它可能会有点混乱，特别是如果你错过了一些东西。这里的解决方案是始终在书中非常清楚地说明什么应该在什么阶段起作用，什么不是，以及稍后将要做哪些事情以使事情起作用。Hartl 确实如此，但有些地方仍然可能让人们感到困惑。重复和拼写出来不会受到伤害。

# javascript - 如何摆脱“进度”光标？

> ID：10884321
> 
> 赞同：2
> 
> 时间：2012-06-04T16:00:59.690
> 
> 标签：javascript, jquery, ajax

我有一个间隔来启动 AJAX 调用以检查页面是否有任何更新（我想它类似于 Facebook 或 StackExchange 用于检查新通知的机制）。问题是此调用将光标更改为“进度”或“忙碌”光标（视觉问题）并禁用单击链接的选项（功能问题）。

我想这两个问题是相关的。如何才能摆脱这种影响或至少将后果降至最低？

一些代码：

```
setInterval(function() {
    try {
        var mid = $($("ul#alert-messages li.regular")[0]).attr('ref');
        call_ajax('/load_alerts', {num:0, id:mid}, function (data) {
            if (data.ok) {
                for (var i=0; i<data.result.length; i++) {
                    // ....
                }
                // ...
            }
        }, function() {},          // Do not show any error for this!!
        false);                    // Do not change cursor!
    } catch (e) {}
}, 15000);

function call_ajax(url, data, fnSuccess, fnError) {
    $.ajax({
        'url': url,
        'type': 'POST',
        'data': data,
        'dataType': "json",
        'success' : function(data) {
            if (fnSuccess) {
                fnSuccess(data);
            } else {
                if (typeof data.msg != 'undefined') {
                    topBar(data.msg, typeof data.ok != 'undefined' && data.ok? 'message' : 'error');
                }
            }
        },
        error : function (jqXHR, textStatus, errorThrown) {
            console.log(errorThrown);
            if (fnError) {
                fnError(STR_ERROR_AJAX + textStatus);
            } else {
                topBar(STR_ERROR_AJAX + textStatus, 'error');
            }
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T16:04:45.603

我认为将选项**async:true**添加到您的 ajax 调用中就可以了。否则浏览器将冻结，直到 ajax 停止，这不是你想要的

# c# - 通过 Ajax 请求调用服务

> ID：10884322
> 
> 赞同：0
> 
> 时间：2012-06-04T16:01:00.807
> 
> 标签：c#, asp.net, ajax

我正在尝试调用我的服务，但由于某种原因它没有找到它，我认为这是因为我没有以正确的方式调用它：

如何将可能的错误添加到响应中？，以便我有一个更好的主意..我得到的只是调用失败，因为我在两个函数中都有这个：

```
function successFunc(response) {

    if (200 == response.status) {
        alert("Call is success");
    }
}

function failureFunc(response) {

    alert("Call is failed");

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T16:06:32.787

为了让客户端通过 Ajax 访问您的 Web 服务，您必须将此属性声明添加到您的 Web 服务中：

```
[System.Web.Script.Services.ScriptService()] 
```

您可以在[ScriptServiceAttribute 类中了解更多信息](http://msdn.microsoft.com/en-us/library/system.web.script.services.scriptserviceattribute.aspx)

# workflow - CRM 工作流程变更影响

> ID：10884324
> 
> 赞同：0
> 
> 时间：2012-06-04T16:01:13.520
> 
> 标签：workflow, dynamics-crm-4

我在测试环境中对 CRM 工作流程进行了更改。我计划将修改后的工作流程导入生产环境并替换工作流程。所以我想知道这将如何影响现有并依赖于它的当前流程（任务和事件）。发布修改后的工作流程的任何提示或过程都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T14:28:09.230

我在网上找不到明确说明这一点的参考资料，但是当您更新现有工作流程时，任何已经启动的工作流程实例都将*使用旧版本的工作流程*运行直到完成。

# python - Redis lua scripting - 用 Ruby 编写的 lua 脚本的 python 等价物是什么？

> ID：10884325
> 
> 赞同：-3
> 
> 时间：2012-06-04T16:01:13.897
> 
> 标签：python, ruby, redis

我不知道红宝石，但我知道蟒蛇。运行以下代码的 python 等效项是什么？这个例子取自 redis 网站。那么，这是什么？

```
<<EOF? 
```

它会在python中：

```
 RandomPushScript = """
    Lua code here
   """

RandomPushScript = <<EOF
    local i = tonumber(ARGV[1])
    local res
    math.randomseed(tonumber(ARGV[2]))
    while (i > 0) do
        res = redis.call('lpush',KEYS[1],math.random())
        i = i-1
    end
    return res
EOF

r.del(:mylist)
puts r.eval(RandomPushScript,1,:mylist,10,rand(2**32)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T16:12:05.397

`<<`表示 HereDoc 。在它之后有一个标记（这里`EOF`）。接下来的行是一个字符串，直到标记再次出现。所以是的，`"""`将是 Python 等价物。

# java - 与内部实现的接口 - 好或坏

> ID：10884330
> 
> 赞同：3
> 
> 时间：2012-06-04T16:01:46.390
> 
> 标签：java, interface, coding-style

我正在开发一个包含许多 someInterface - someInterfaceImpl-pairs 的项目。几天前，我有了将默认实现包含为内部类的想法（可能是通过阅读一些客观的 c 代码得到启发）。现在一些同事（都比我有更多的 Java 经验）看到了这个想法 - 反馈介于震惊和惊讶之间（“这有效吗？”）。

我用谷歌搜索了一下，但没有找到太多证据证明这种“模式”有用（我个人喜欢）： [pdf-paper](http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.25.1606&rep=rep1&type=pdf&ei=YNTMT-CUH8Xk4QSHsdlF&usg=AFQjCNFB0v4Oe99j0NyDJgMQLg2O-e22pQ) and [a faq about code style](http://www.codestyle.org/java/faq-Interface.shtml#interfacenestclass)

你怎么看 - 特别是在“默认”实现与接口紧密耦合的情况下。

**更新** 我刚刚发现：[Java Interface-Implementation Pair](https://stackoverflow.com/questions/3427073/java-interface-implementation-pair)

（见接受的答案）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-04T16:06:28.027

接口的全部意义在于将用户与实现分开（默认与否）。您可以通过将实现包含为内部类来解决此问题。您并没有真正保存任何代码行，并且使 API 变得混乱。您最终不得不做一些事情来向接口的用户隐藏内部类，例如将其设为私有或默认范围，这可能会更好地避免。此外，如果您的默认实现需要更改，但您已将接口作为 API 的一部分发布，该怎么办。这是一个坏主意，因为它没有太多好处，而且是一种反模式。

最后，如果您真的有一个默认实现，那么它可能应该是一个基类（而不是一个接口），而其他实现扩展该类并覆盖行为。

我认为这篇文章对类似问题进行了有趣的讨论： [问题](https://stackoverflow.com/questions/3427073/java-interface-implementation-pair)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T16:23:03.963

我同意上面的答案，但在某些情况下，包括实现是合乎逻辑的，例如：

*   您正在编写匿名函数（当您的界面只有一种方法并且您像函数式语言中的匿名函数一样使用它时）这没问题，但是这种情况很少见。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T20:35:56.773

如果您的默认实现相当琐碎*并且可能保持这种方式*，*并且*如果没有任何扩展或可能扩展它，那么这可能是要走的路。你不想把它放在自己的文件中，你还会把它放在哪里？我建议使用公共实例将类设为私有（假设没有状态）：

```
/** An interface a lot like java.util.Collection. */
public interface WhatEver  {
    private class Default  implements Whatever  {
        // Methods...
    }
    /** A default implementation that is always empty.  Suitable as a NULL value. */
    public final WhatEver  DEFAULT = new Default();
    // Rest of interface... 
```

我认为这对执行没有任何影响（类实例中没有数据），但你会得到更好的 Javadoc。您可以使用匿名类并保存一行代码。

您甚至可能需要一些其他“默认”实例。对于类似集合的界面，您可能有一个具有单个默认条目或无限数量（`hasNext`始终返回`true`）的相同默认条目。

我认为关键是默认实现不能依赖于接口之外的任何东西。不使用外部类和接口，除非它们在接口的主体中被引用，并且不使用扩展默认值的外部类。接口变得比接口的标准概念多一点，但仍然独立存在。

另一个关键点是您不希望一个 .java 文件中有太多代码，但也不希望太少。

# c++ - 调用进程退出后是否可以将DLL保留在内存中？

> ID：10884331
> 
> 赞同：5
> 
> 时间：2012-06-04T16:01:48.550
> 
> 标签：c++, qt, dll

我有一个 DLL 需要 5 到 10 秒才能加载，这意味着每次编译和运行使用它的可执行文件时我都必须等待很长时间。有没有办法让 DLL 加载在内存中，以便每次编译相应的可执行文件时都可以立即访问它？如果相关的话，我正在 QT MinGW 上编译程序。

编辑：到目前为止没有运气。在另一个程序上加载 DLL 似乎没有任何效果（原始程序仍然加载 DLL，并且需要同样长的时间）。如果将 DLL 及其函数加载到另一个程序中，我想我需要以不同的方式加载它们，但我不知道该怎么做。现在我正在使用 LoadLibrary 和 GetProcAddress。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T11:06:39.287

我不是 MinGW 开发人员，但您的问题很常见，并不取决于您如何创建 DLL。通常使用以下三种技术来解决此类问题：

*   选择 DLL 的唯一基地址
*   绑定 DLL 和 exe（在安装应用程序期间）
*   DLL延迟加载技术的使用
*   稍微提高加载时间的一部分DisableThreadLibraryCalls[的调用](http://msdn.microsoft.com/en-us/library/ms682579%28v=vs.85%29)`DLL_PROCESS_ATTACH``DllMain`

您可以使用的链接器或其他工具的确切开关取决于您的开发环境。

要了解问题，您应该知道如何加载可执行文件或 DLL。首先将EXE或DLL映射到内存中。将创建指向 EXE/DLL 的[内存映射文件（部分）。](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366556%28v=vs.85%29.aspx)因此，您将在进程中拥有一些地址，这些地址将对应于 EXE/DLL 文件。如果链接 DLL，则可以选择基地址。如果该地址在进程地址空间中未使用，则不会执行任何操作。如果将使用第一行代码（您从 DLL 中调用某个函数），那么将使用文件将使用地址附近的内存页面 8K 加载到内存中。如果两个进程使用同一个 DLL，那么代码的物理内存将被*共享*进程之间。即使您持有已初始化的变量，带有变量的页面也将被共享，直到变量的第一次更改。修改时将为进行修改的进程制作内存页的副本。

在进程中加载​​ DLL 后，必须修改调用者的一些小部分（例如 EXE），以包含从 DLL 中使用的函数的实际地址。使用来自另一个 DLL 的函数的 DLL 也会这样做。

一切听起来都很完美，但是如果您在 DLL 编译期间没有设置任何链接器选项（如果您不使用`--image-base`或`--enable-auto-image-base`链接器选项），您的所有 DLL 将具有相同的基地址（链接器的默认值）。所以第一个 DLL 可以在该地址加载。在加载与相同（或某些重叠地址）链接的第二个 DLL 期间，将完成 DLL 的重定位。在重定位期间，DLL 的代码会被修改，因此 1) DLL 的加载会很慢 2) 修改后的代码副本将在进程中生成（包括 DLL 使用的内存） 3) 修改后的副本不会在 DLL 的多个实例之间共享（即使所有实例都将以相同的方式修改）。

我建议您首先使用[Process Explorer](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx)来验证哪些 DLL 将在您的应用程序中重定位。您应该在“视图”/“下疼痛视图”菜单中选择“DLLs”选项，并在“选项”菜单的“配置突出显示”中选择“重定位 DLLs”复选框。您还可以自定义将显示每个 DLL 的哪些信息。像下面这样的信息越多，您将看到程序加载的速度越慢，并且在您的应用程序实例之间或使用相同 DLL 的不同应用程序之间不会共享更多的地址空间：

![在此处输入图像描述](../Images/d5a062171c80595e69282fb1ce14d1c1.png)

在上面的示例中，您可以看到树联想 DLL `TPOSDSVC.dll`，`HKVOLKEY.dll`并`TPLHMM.dll`与相同的基地址链接，`0x10000000`并且只有一个 DLL（`TPOSDSVC.dll`此处）将加载到该地址。另外两个 DLL 必须重新定位。

我不能在这里写一本关于这个主题的书。我建议您检查有关重定位问题的应用程序。您可以使用链接器选项（`--image-base`或者`--enable-auto-image-base`似乎是您需要的）。您可以使用[dumpbin.exe](http://msdn.microsoft.com/en-us/library/c1h23y6c%28v=vs.100%29.aspx)工具（在免费版中也来自 Visual Studio）来检查 PE 映像。

在您的所有 DLL 将具有唯一的基地址之后，您可以使用另一个`bind.exe`带有选项`-u`的工具将 EXE 和您的 DLL 绑定到其依赖的 DLL。它将另外减少内存大小并改善应用程序的启动时间。它将更新您的 DLL`IMAGE_DIRECTORY_ENTRY_IMPORT`和`IMAGE_DIRECTORY_ENTRY_DELAY_IMPORT`EXE 的一部分（请参阅[答案](https://stackoverflow.com/a/3430822/315935)）。`Bind.exe`在内部使用`BindImageEx`API。许多 Windows Installer 安装程序使用[BindImage](http://msdn.microsoft.com/en-us/library/windows/desktop/aa367827%28v=vs.85%29.aspx)操作和[BindImage](http://msdn.microsoft.com/en-us/library/windows/desktop/aa367828%28v=vs.85%29.aspx)表在 EXE 和 DLL 安装结束时进行绑定。

您可以考虑使用其他技术（参见[此处](https://stackoverflow.com/a/2752238/315935)）来减小 DLL 和 EXE 的大小。

我不确切知道如何在 MinGW 中使用延迟加载技术，但它应该是绝对可行的。您需要在 Visual Studio 中执行两个步骤：`Delayimp.lib`作为附加库包含并使用`/DELAYLOAD`选项（请参阅[此处](http://msdn.microsoft.com/en-us/library/151kt790.aspx)）指定应在第一次使用时加载哪些 DLL，而不是直接加载。使用非常有用的 Tool [Dependency Walker](http://www.dependencywalker.com/)，您可以看到大多数标准 Microsoft DLL 都使用该技术。如果您也使用该技术，您可以改善应用程序的启动时间并减少使用的内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T16:12:21.790

创建一个显式安装的系统服务，以保持您的 DLL 加载。这样初始化会在启动时发生，并且永远不会再发生。我建议不要使用大多数其他答案中概述的方法。虽然它们看起来像是在工作，但在我看来，它们就像是您的软件的不良行为。从用户和维护者的角度来看，我更喜欢显式安装的系统服务，而不是将某些东西挂接到 winlogin.exe 中。您越诚实地使用 Windows API 和环境，跨版本和版本升级时的重大更改就越少。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T16:14:17.477

如果我没记错的话，Windows 会在内存中保留 DLL 的一个实例，因此保持它处于活动状态应该可以：

```
#include <conio.h>
#include <windows.h>

int main()
    {
    HMODULE handle=LoadLibrary("yourdll.dll");
//  Make shure Windows resolves the DLL
    FARPROC dummy=GetProcAddress(handle,"functionInDll");
//  The process will now just wait for keyboard input.
    getch();
    CloseHandle(handle);
    return 0;
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-05T07:58:09.490

最简单的解决方案是（假设 MSVC++）使 DLL 延迟加载。权衡当然是初始化仍然必须发生，但这将不再延迟程序的其他部分。例如，您可以在后台线程上执行此操作。

# hibernate - 如何让 Hibernate 过滤器在 JPA 中工作？

> ID：10884332
> 
> 赞同：5
> 
> 时间：2012-06-04T16:01:54.440
> 
> 标签：hibernate, hibernate-annotations

我有以下实体类：

```
 @Entity
@FilterDef (name = "byLastName", parameters = @Parameter (name = "lastName", type="string"))
@Filters ({
    @Filter (name = "byLastName", condition = "lastName = :lastName")
})
public class User {
    String firstName;
    String lastName;
}
```

在我的 DAO 中，我这样做：

```
 public User findById (Long id)
{
   Session s = (Session) em.getDelegate ( );
   s.enableFilter ("byLastName").setParameter ("lastName", "smith");

   User u = em.find (User.class, id);
   return (u);
}
```

现在，如果我理解正确，应该应用过滤器，如果 lastName 不等于“smith”，我尝试检索的任何用户都应该返回为 null。问题是过滤器似乎没有被应用。无论 lastName 的值如何，我尝试从数据库中检索的任何用户都会返回。

我是否误解了过滤器的工作原理？还是我在如何配置方面遗漏了一些东西？请注意，我没有使用 hibernate.cfg.xml；一切都是使用 JPA 和注释为我配置的。

任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T16:21:20.900

Filters do not affect any form of look up by ids. This is also the exact reason one-to-one and many-to-one associations cannot be filtered.

# git - Git repo：内部和开源外部分支

> ID：10884335
> 
> 赞同：6
> 
> 时间：2012-06-04T16:02:03.497
> 
> 标签：git, open-source, merge, rebase, git-rebase

为贵公司内部使用的项目设置 git 存储库的最佳方法是什么，但您也想开源（但可能会修改历史）？

假设 Acme 公司有一个回购“supercoolproject”。他们想要开源它，但他们实际上根本不想要与它相关联的公司名称。他们以其中一个开发人员的名字（或组等）建立了一个 GitHub 帐户，并创建了 repo。他们将其克隆到内部 Acme 服务器。没有地方提到“Acme”。

现在问题来了——在任何给定的组织中，都有了解开源并被授权公开一些代码的开发人员。还有其他人不了解所有细微差别。当其中一个提交时，它们可能包括公司名称或其他一些专有信息。或者，他们只是做了一个可怕的提交，可以在内部恢复（不是重写历史——我只是在谈论添加一个“恢复”提交）。但是，您不希望那些专有提交进入开源分支。

因此，您创建“acme_internal_{dev,qa,production}”分支和一个外部“主”分支（可能还有其他）。使它们保持同步的最佳方法是什么？您想接受对开源存储库的提交。并且您想将（大部分）内部提交推送出去。但也有一些不应该出去的。

似乎合并 internal -> external 是一件坏事，因为您无法删除错误的提交。可以在内部分支上重新定位外部分支，但似乎一旦您“git rebase -i acme/acme_internal_dev”一次并修改历史记录（更改提交消息，删除提交等），您就不能再重新设置，因为两种历史不同。那么，您最终是否会挑选所有内部提交到公共分支，然后将公共分支合并到内部树中？这看起来也很丑陋，因为您最终会在内部重复提交（原始提交，然后是进入外部并合并回内部的精心挑选的提交）。

出于这个问题的目的，我们假设 Acme 在内部希望避免在其内部分支上重写历史记录（实际上是删除/修改错误的提交）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T17:06:43.420

您可以采取一些措施来利用您想要维护的双重存储库的 DVCS 特性。

* * *

首先，永远不要直接向世界公开内部仓库（有一个“外部”分支的想法）。没有比“外部分支”这样的东西，只有“外部——或‘公共’回购”。

一种可能的设置是让 repo 向世界公开（外部贡献者可以向其推送或拉取）。

* * *

其次，永远不要（从 acme 内部）直接推送到那个外部仓库：错误太容易犯了，而且你无法控制拉取的速度。即，一旦你推错了东西，即使是快速的纠正也可能来晚了。

您需要一个仍然在内部管理的中间存储库，用于审查目的。即检查已推送的内容，如果这些新提交正常，则将它们从外部存储库中拉出。
这意味着外部存储库知道中间存储库（它已在其遥控器中列出），反之则不正确（您不能错误地从内部存储库推送）。
这使得发布过程更加明确（您必须转到外部 repo 服务器并提取您想要发布的更改，而不是停留在熟悉的内部环境中，并且有些粗心地推送）

* * *

在中间存储库（acme 的开发人员可以在发布前推送到审查的存储库）中充分利用：

*   pre-receive hooks（进行各种控制：如果提交不符合发布标准，则会被拒绝，然后开发人员可以在他/她自己的 repo 中重写历史记录）。
    同样，重写历史是可以接受的，只要它是在 acme 的开发人员存储库中的控制。
*   内容过滤器驱动程序（例如参见[这个问题](https://stackoverflow.com/questions/3615426/git-pre-receive-hook/)），以便不必在*敏感*文件的两种存储库之间对不同的内容进行版本化（如“ [Something like gitignore but not git ignore](https://stackoverflow.com/questions/4287906/something-like-gitignore-but-not-git-ignore) ”）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T17:29:43.310

解决方案是拥有一个严格控制的“外部可见”存储库，该存储库只能由有权推送到 github 的开发人员提交。

来自内部存储库的代码只有通过被允许的开发人员集成和合并才能进入外部可见的存储库。简而言之，未经许可的开发人员必须通过补丁文件或针对公共存储库的拉取请求将其代码提交给允许的开发人员。

是的，这意味着获得许可的人必须审查和集成每个补丁。但是，由于您不信任未经许可的开发人员，因此您希望他们无论如何都这样做。

# javascript - jQuery缩略图脚本编辑

> ID：10884339
> 
> 赞同：0
> 
> 时间：2012-06-04T16:02:11.603
> 
> 标签：javascript, jquery, thumbnails

我创建了这个脚本，它采用全尺寸图像并从中制作缩略图。问题是，如果我链接图像它会破坏脚本。我尝试过的一切都失败了。您可以**[查看这个 jsfiddle](http://jsfiddle.net/uSSmy/)**并注意第一个缩略图有效，但第二个无效（因为它是链接的）。任何帮助解决这个问题将不胜感激。

为了澄清，所有缩略图都将被链接，所以我不需要脚本来处理示例中的第一个缩略图。我需要它来处理第二个（链接的）缩略图。

**[http://jsfiddle.net/uSSmy/](http://jsfiddle.net/uSSmy/)**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T16:03:49.237

在您的代码末尾尝试调用

```
 FitImages( $('.titled-thumb img') ) 
```

`FitImages($('.titled-thumb > img'))`由于您在链接图像时使用直接后代选择器编写`>`，因此您放置了一个中间元素，以便选择器不再工作。

如果我从小提琴中删除该选择器，我会看到图像（[您的小提琴已更新](http://jsfiddle.net/uSSmy/8/)）

更新：出于同样的原因也改变

```
parent = img.parent(), 
```

和

```
parent = img.closest('div'), 
```

# c++ - 与 LLVM 的动态链接

> ID：10884340
> 
> 赞同：12
> 
> 时间：2012-06-04T16:02:12.677
> 
> 标签：c++, llvm, dynamic-linking

我想在一个模块中执行函数，这个模块将在其他模块中解决依赖关系。模块可能会改变（动态编译环境），所以我不希望在单个整体模块中链接所有依赖项，也就是说，如果可以避免的话

我希望使用`Linker::linkModules`，但这总是对源模块具有破坏性。这对于一个依赖于一个模块的模块来说是可以的，因为如果那个模块发生了变化，那没什么大不了的，但是重建和重新链接 N-1 个模块不是因为一个模块发生了变化而没有变化的过度吗？

我想知道是否有可以用于 JIT 执行的非破坏性版本的 linkModules。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-16T17:56:01.257

Try this:

```
Linker::LinkModules(destinationModule, sourceModule, Linker::PreserveSource, &error); 
```

If you pass `Linker::PreserveSource` instead of `Linker::DestroySource`, you can continue to use `sourceModule` after the call.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-17T20:45:55.487

我们在 Fabric Engine 产品 ( [http://fabricengine.com/](http://fabricengine.com/) ) 内的动态编译环境中做了类似的事情。LLVM 目前还不能很好地适应这种复杂的“JIT”环境，但我们设法通过额外的间接级别（即双指针）链接使其工作，然后将 llvm::MemoryManager 子类化以重载 llvm： :MemoryManager::getPointerToNamedFunction 在模块之间全局解析符号。通过使用双指针，您可以更改一个模块而不更改任何其他模块。你必须稍微小心一点，但这还不错。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T18:25:20.970

我认为这不可能是您描述他问题的方式。

在您理想的解决方案中，如果模块`A`和`B`被链接，更改`B`将立即在`A`?

如果是这种情况，我不相信这是可能的。（尝试查看`A`链接后的内容`B`。的符号`B`已复制到`A`）

如果您只是想保存信息`B`，您可以先复制`B`with `llvm::CloneModule`，然后将结果传递给`Linker::linkModules`.

# java - jna句柄和字符串中的函数映射delphi/pascal dll

> ID：10884341
> 
> 赞同：2
> 
> 时间：2012-06-04T16:02:15.650
> 
> 标签：java, delphi, dll, parameters, jna

我正在尝试使用[JNA](http://en.wikipedia.org/wiki/Java_Native_Access)在 delphi dll 中调用一个函数。函数定义为：

```
function myFuncGetName (aHandle : THandle; var aBuf : pwideChar ): integer; export; 
```

我的 jna 映射如下所示：

```
int myFuncGetName(PointerByReference aHandle, WString aBuf); 
```

返回值应该是 0 表示成功，-1 表示失败，我总是得到 -1。

我已启动 WinDbg 并附加到该进程，它在 myFuncGetName 处中断。

```
057cb384 eb11            jmp     myDLL!myFuncGetName+0x87 (057cb397)
057cb386 b8dcb37c05      mov     eax,offset myDLL!myFuncGetName+0xcc (057cb3dc)
057cb38b 8b55f8          mov     edx,dword ptr [ebp-8]
057cb38e 8902            mov     dword ptr [edx],eax  ds:002b:00000000=???????? <-- ### breaks here ###
057cb390 c745f4ffffffff  mov     dword ptr [ebp-0Ch],0FFFFFFFFh 
```

我不是装配奇才，所以在我错的地方纠正我。我认为它将地址（函数参数）从位置 ebp-8 移动到 edx 寄存器。ebp-8 指向值 0，因此 edx 为 0。它将 eax 移动到 edx 指向的地址。它不应该将任何东西移动到 0 所以它都坏了？

为什么我的参数没有正确传递给函数？我从之前调用的同一个 DLL 中获得了 aHandle，并将 aBuf 设置为 WString aBuf = new WString("placeholderstring"); 我希望 aBuf 在函数返回后填充真实文本。

这一切都在带有 java 7 64bit 的 Windows 7 上运行。DLL 是 32 位 DLL。

**更新和解决方案：**

谢谢大卫和罗布的评论。我已更改 delphi 定义以使用 stdcall 声明。调用该函数现在返回 0，它应该返回。要检索 pwideChar 的值，我执行了以下操作：

```
int charcount= "placeholder".length();
PointerByReference aBuf = new PointerByReference(new Memory(charcount*4));
int returnvalue = myFuncGetName(aHandle, aBuf);
if(returnvalue == 0) {
    System.out.println(aBuf.getValue().getString(0, true));
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T16:28:43.133

如果这是 DLL 函数的真正声明，那么问题可能出在调用约定上。Delphi 中的默认调用约定是`register`，它将前两个参数存储在 EAX 和 EDX 中，但默认的 C 调用约定是`cdecl`，它将它们存储在堆栈中。将 Delphi 声明更改为：

```
function myFuncGetName(aHandle: THandle; var aBuf: PWideChar): Integer; stdcall; 
```

（该`export`指令实际上不再做任何事情（我认为从 Delphi 2 开始），因此您可以删除它。它已被包含在`exports`子句中，您应该在 DLL 源的其他地方找到它。）

Java方面也是错误的。Delphi 代码中的第二个参数是*对*`PWideChar`. 我在 JNA 中没有看到任何`WStringByReference`类型，但这就是您需要的。不过，我无法就如何自己实施它提供任何建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T16:27:52.963

您需要使用 stdcall 调用约定，并且字符串参数声明不正确（我认为）。export 关键字不再使用，可以省略。您可以在库代码的其他位置使用 exports 关键字命名您的导出。

你的 Delphi 函数应该是这样的。

```
function myFuncGetName(aHandle: THandle; aBuf: pwideChar): integer; stdcall; 
```

我不确定PointerByReference。如果这相当于 void**，为什么要将它映射到 THandle？

# html - 操作后观看 html 源代码

> ID：10884344
> 
> 赞同：1
> 
> 时间：2012-06-04T16:02:35.697
> 
> 标签：html, google-chrome

我已经使用 jquery 更改了 html 源代码 - 添加了很多文本字段。
现在，当我使用 chrome 查看页面源时，我仍然可以看到原始源。
有没有办法查看修改后的html？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T16:04:40.273

使用firefox的firebug插件右键>全选，然后再次右键“show selected source”。或者您可以简单地右键单击页面的更改元素>“检查元素”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T16:03:44.557

使用 Developer Tools 菜单选项查看内存中 DOM 的序列化。

源没有被修改。它是*源*。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T16:10:01.560

所有浏览器中的查看源代码将始终向您显示文档加载时的基本 HTML。

要查看 DOM 的更新，在 chrome 中您需要使用开发者工具功能... (ctrl+shift+i)

在 Firefox 中，我个人使用 firebug 插件...对于 IE：我不在 IE 中进行测试，所以我不知道那里有什么可用的...

如果你想要一个关于如何使用开发者工具的视频，我会给你一个。

# android - 如何通过按 MenuItem 来调整 ImageView 的大小

> ID：10884346
> 
> 赞同：0
> 
> 时间：2012-06-04T16:02:45.767
> 
> 标签：android, exception, resize, imageview, try-catch

我正在尝试创建一个在用户按下 MenuItem 时调整大小的 ImageView。我尝试使用以下代码，但出现错误并且我的应用程序停止。

```
@Override
public boolean onOptionsItemSelected(MenuItem item)
{
    switch(item.getItemId())
    {
        case R.id.sub_item_25_percent:
            try
            {
            LayoutParams params = new LayoutParams(imageView1.getLayoutParams());
            params.width = Pages.PAGE_WIDTH_25_PERCENT;
            params.height = Pages.PAGE_HEIGHT_25_PERCENT;

            imageView1.setLayoutParams(params);
            }
            catch(Exception ex)
            {
                Toast.makeText(this, ex.getMessage(), Toast.LENGTH_SHORT);
            }
            break;
     } 
```

}

如您所见，我已经使用了 try-catch-block 来获取有关异常的信息，但应用程序仍然只是停止而不显示 Toast。

有谁知道我可以做些什么来解决我的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T16:09:34.763

尝试这个：

```
@Override
public boolean onOptionsItemSelected(MenuItem item)  
{
    switch(item.getItemId())
    {
        case R.id.sub_item_25_percent:

            imageView1.getLayoutParams().width = Pages.PAGE_WIDTH_25_PERCENT;
            imageView1.getLayoutParams().height = Pages.PAGE_HEIGHT_25_PERCENT;

            imageView1.requestLayout();

        break;
     } 
```

}

# java - sqlite 和 mysql。当应用程序的所有进程都在同一台机器上运行并且数据库几乎没有 2 个表时，这会更好

> ID：10884350
> 
> 赞同：1
> 
> 时间：2012-06-04T16:03:18.410
> 
> 标签：java, mysql, sql, database, sqlite

我需要在 SQLite 和 MYSql 之间进行选择。我对选择什么有点困惑。我知道这两个数据库引擎都没有递归查询机制，并且 SQLite 不支持存储过程。这是我的情况。我有一个应用程序，它有大约 1000 个进程访问同一个数据库。该数据库总共有大约 2 个表和大约 10,000 个条目。该应用程序不是分布式的，我的意思是所有进程都在同一台机器上运行。我想将数据库嵌入应用程序本身。我认为 MYSql 记住所有这些并不是一个好主意。此外，我的应用程序不涉及复杂查询（几个选择、更新和插入查询）我知道 SQLite 比 MYSql 轻得多，但 MYSql 支持存储过程而 SQLite 不支持。我还需要良好的锁定机制。我不 不想让进程长时间锁定表。我读过 SQLite (http://sqlite.org/lockingv3.html) 中的锁定/解锁操作非常快。我是数据库新手，请多多包涵。谁能帮我决定什么更好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T16:05:50.847

要将小型数据库嵌入到应用程序中，SQLite 是最好的方法——mySQL 对于服务器上的数据库更有用。本地化应用数据 +SQLite = 更易于开发和实施

# javascript - 使用javascript动态检查两个复选框以选择一个单选按钮

> ID：10884355
> 
> 赞同：0
> 
> 时间：2012-06-04T16:03:37.733
> 
> 标签：javascript

我整个周末都在努力解决这个问题，我可能把它复杂化了。我正在工作的简化代码如下。任何帮助将不胜感激 - 因为我已经为此绞尽脑汁了很长时间。

**问题**：选中两个复选框后，会选择相应的单选按钮。所以选择地球和风复选框将选择“地球和风”单选按钮。

```
<input name="single" type="checkbox" id="Earth"/>Earth<br>
<input name="single" type="checkbox" id="Wind"/>Wind<br>
<input name="single" type="checkbox" id="Emotion"/>Emotion<br>
<input name="single" type="checkbox" id="Grass"/>Grass<br>
<input name="single" type="checkbox" id="Good"/>Good<br>

<hr>

<input name="pair" type="radio" class="Earth Wind"/>Earth and Wind<br>
<input name="pair" type="radio" class="Earth Emotion"/>Earth and Emotion<br>
<input name="pair" type="radio" class="Earth Grass"/>Earth and Grass<br>
<input name="pair" type="radio" class="Earth Good"/>Earth and Good<br>
<input name="pair" type="radio" class="Wind Emotion"/>Wind and Emotion<br>
<input name="pair" type="radio" class="Wind Grass"/>Wind and Grass<br>
<input name="pair" type="radio" class="Wind Good"/>Wind and Good<br>
<input name="pair" type="radio" class="Emotion Grass"/>Emotion and Grass<br>
<input name="pair" type="radio" class="Emotion Good"/>Emotion and Good<br> 
```

编辑：为了证明，我的努力： http: [//jsfiddle.net/rsF6w/](http://jsfiddle.net/rsF6w/)：在选中两个复选框后，我还禁用了复选框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T16:07:27.013

您将希望将事件处理程序附加到`onClick`事件。在这些函数中，您将获取盒子的所有状态。如果选中了两个状态，您将选中相应的单选按钮。这是一个很好解决的问题。完整的代码会破坏学习体验。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T16:09:05.373

您可以给每个复选框一个使用位掩码的代码。然后进行 OR 比较以获取要选择的单选按钮的位代码。

阅读本文了解更多信息： [http](http://en.wikipedia.org/wiki/Mask_(computing) ://en.wikipedia.org/wiki/Mask_(computing )

比如earth会有00000001对应的code，wind：00000010，emotion 00000100等。

地球风会得到代码：00000011

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T16:09:57.800

浏览所有复选框（*例如*for ）并检查哪两个被选中。创建两个字符串，它们与所需单选按钮的名称相同（在两个方向上连接它们）。这次通过单选按钮，如果找到匹配的名称，请检查它。

确保您处理异常，例如一次选择 >2 个复选框，不选择有效的对（您不会检查任何内容，还不如使用布尔值）等。

# android - 无法弄清楚我在 Eclipse Android 中突然出现错误“找不到源”为什么？

> ID：10884361
> 
> 赞同：0
> 
> 时间：2012-06-04T16:03:50.577
> 
> 标签：android, eclipse

我有一个 ListView，所以我在 main.xml 设计器中删除了它，它也自动从 main.xml 代码中删除。

然后我向设计器添加了一个微调器，它也自动添加到 main.xml 代码中。在我的程序中，我删除了 ListView 的所有用途并使用微调器添加。

然后我在一行上进行了调试，当我在调试模式下运行我的应用程序并选择*是*时，我在调试窗口中收到一个红色的错误消息`Source not found`。

我有一个可以点击的按钮：`Edit a source lookup path`

我不确定问题出在哪里以及如何解决。5 分钟前，在我删除 ListView 并在设计器中添加微调器之前，它运行良好。

这是 main.xml 代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/hello" />

    <Button
        android:id="@+id/btnSpeak"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />

    <EditText
        android:id="@+id/txtText"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:ems="10" >

        <requestFocus />

    </EditText>

    <Spinner
        android:id="@+id/spinner1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" />

</LinearLayout> 
```

这是我的java类代码：

```
package com.testotspeech;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.Locale;

import android.app.Activity;
import android.os.Bundle;
import android.speech.tts.TextToSpeech;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;

public class AndroidTestToSpeechActivity extends Activity implements
        TextToSpeech.OnInitListener {
    /** Called when the activity is first created. */

    private TextToSpeech tts;
    private Button btnSpeak;
    private EditText txtText;
    private String array_spinner[];
    private ArrayList<String> itemsList;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        Log.i("----------",Arrays.toString(Locale.getAvailableLocales()));
        itemsList.add(Arrays.toString(Locale.getAvailableLocales()));
        array_spinner = new String[itemsList.size()];
        tts = new TextToSpeech(this, this);
        btnSpeak = (Button) findViewById(R.id.btnSpeak);
        txtText = (EditText) findViewById(R.id.txtText);

        // button on click event
        btnSpeak.setOnClickListener(new View.OnClickListener() {

            public void onClick(View arg0) {
                speakOut();
            }

        });
    }

    @Override
    public void onDestroy() {
        // Don't forget to shutdown tts!
        if (tts != null) {
            tts.stop();
            tts.shutdown();
        }
        super.onDestroy();
    }

    public void onInit(int status) {

        if (status == TextToSpeech.SUCCESS) {

            int result = tts.setLanguage(Locale.ENGLISH);

            if (result == TextToSpeech.LANG_MISSING_DATA
                    || result == TextToSpeech.LANG_NOT_SUPPORTED) {
                Log.e("TTS", "This Language is not supported");
            } else {
                btnSpeak.setEnabled(true);
                speakOut();

            }

        } else {
            Log.e("TTS", "Initilization Failed!");
        }

    }

    private void speakOut() {

        String text = txtText.getText().toString();
        tts.speak(text, TextToSpeech.QUEUE_FLUSH, null);
    }
} 
```

什么可能导致错误？

谢谢。

**编辑：**这是堆栈跟踪日志，只有红色错误：

```
06-04 20:20:05.609: E/AndroidRuntime(8567): FATAL EXCEPTION: main
06-04 20:20:05.609: E/AndroidRuntime(8567): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.testotspeech/com.testotspeech.AndroidTestToSpeechActivity}: java.lang.NullPointerException
06-04 20:20:05.609: E/AndroidRuntime(8567):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2787)
06-04 20:20:05.609: E/AndroidRuntime(8567):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2803)
06-04 20:20:05.609: E/AndroidRuntime(8567):     at android.app.ActivityThread.access$2300(ActivityThread.java:135)
06-04 20:20:05.609: E/AndroidRuntime(8567):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2136)
06-04 20:20:05.609: E/AndroidRuntime(8567):     at android.os.Handler.dispatchMessage(Handler.java:99)
06-04 20:20:05.609: E/AndroidRuntime(8567):     at android.os.Looper.loop(Looper.java:144)
06-04 20:20:05.609: E/AndroidRuntime(8567):     at android.app.ActivityThread.main(ActivityThread.java:4937)
06-04 20:20:05.609: E/AndroidRuntime(8567):     at java.lang.reflect.Method.invokeNative(Native Method)
06-04 20:20:05.609: E/AndroidRuntime(8567):     at java.lang.reflect.Method.invoke(Method.java:521)
06-04 20:20:05.609: E/AndroidRuntime(8567):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
06-04 20:20:05.609: E/AndroidRuntime(8567):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
06-04 20:20:05.609: E/AndroidRuntime(8567):     at dalvik.system.NativeStart.main(Native Method)
06-04 20:20:05.609: E/AndroidRuntime(8567): Caused by: java.lang.NullPointerException
06-04 20:20:05.609: E/AndroidRuntime(8567):     at com.testotspeech.AndroidTestToSpeechActivity.onCreate(AndroidTestToSpeechActivity.java:30)
06-04 20:20:05.609: E/AndroidRuntime(8567):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1069)
06-04 20:20:05.609: E/AndroidRuntime(8567):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2751)
06-04 20:20:05.609: E/AndroidRuntime(8567):     ... 11 more
06-04 20:22:54.219: E/ActivityManager(127): fail to set top app changed!
06-04 20:24:32.509: E/ActivityManager(127): fail to set top app changed!
06-04 20:25:45.439: E/ActivityManager(127): fail to set top app changed!
06-04 20:32:49.439: E/ActivityManager(127): fail to set top app changed!
06-04 20:33:06.109: E/lights(127): write ok string=0,len=1
06-04 20:33:06.109: E/lights(127): write ok string=0,len=1
06-04 20:33:06.119: E/lights(127): write ok string=0 0,len=3
06-04 20:33:06.119: E/lights(127): write ok string=1,len=1
06-04 20:33:06.129: E/lights(127): write ok string=0,len=1
06-04 20:33:06.129: E/lights(127): write ok string=0 0,len=3
06-04 20:33:06.149: E/lights(127): write ok string=0,len=1
06-04 20:33:06.159: E/lights(127): write ok string=0,len=1
06-04 20:33:06.159: E/lights(127): write ok string=0 0,len=3
06-04 20:33:06.169: E/lights(127): write ok string=1,len=1
06-04 20:33:06.169: E/lights(127): write ok string=0,len=1
06-04 20:33:06.169: E/lights(127): write ok string=0 0,len=3
06-04 20:33:09.179: E/lights(127): write ok string=0,len=1
06-04 20:33:09.179: E/lights(127): write ok string=0,len=1
06-04 20:33:09.179: E/lights(127): write ok string=0 0,len=3
06-04 20:33:09.189: E/lights(127): write ok string=1,len=1
06-04 20:33:09.189: E/lights(127): write ok string=0,len=1
06-04 20:33:09.189: E/lights(127): write ok string=0 0,len=3
06-04 20:33:16.309: E/AndroidRuntime(8748): FATAL EXCEPTION: main
06-04 20:33:16.309: E/AndroidRuntime(8748): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.testotspeech/com.testotspeech.AndroidTestToSpeechActivity}: java.lang.NullPointerException
06-04 20:33:16.309: E/AndroidRuntime(8748):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2787)
06-04 20:33:16.309: E/AndroidRuntime(8748):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2803)
06-04 20:33:16.309: E/AndroidRuntime(8748):     at android.app.ActivityThread.access$2300(ActivityThread.java:135)
06-04 20:33:16.309: E/AndroidRuntime(8748):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2136)
06-04 20:33:16.309: E/AndroidRuntime(8748):     at android.os.Handler.dispatchMessage(Handler.java:99)
06-04 20:33:16.309: E/AndroidRuntime(8748):     at android.os.Looper.loop(Looper.java:144)
06-04 20:33:16.309: E/AndroidRuntime(8748):     at android.app.ActivityThread.main(ActivityThread.java:4937)
06-04 20:33:16.309: E/AndroidRuntime(8748):     at java.lang.reflect.Method.invokeNative(Native Method)
06-04 20:33:16.309: E/AndroidRuntime(8748):     at java.lang.reflect.Method.invoke(Method.java:521)
06-04 20:33:16.309: E/AndroidRuntime(8748):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
06-04 20:33:16.309: E/AndroidRuntime(8748):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
06-04 20:33:16.309: E/AndroidRuntime(8748):     at dalvik.system.NativeStart.main(Native Method)
06-04 20:33:16.309: E/AndroidRuntime(8748): Caused by: java.lang.NullPointerException
06-04 20:33:16.309: E/AndroidRuntime(8748):     at com.testotspeech.AndroidTestToSpeechActivity.onCreate(AndroidTestToSpeechActivity.java:30)
06-04 20:33:16.309: E/AndroidRuntime(8748):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1069)
06-04 20:33:16.309: E/AndroidRuntime(8748):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2751)
06-04 20:33:16.309: E/AndroidRuntime(8748):     ... 11 more
06-04 20:33:16.339: E/lights(127): write ok string=0,len=1
06-04 20:33:16.349: E/lights(127): write ok string=0,len=1
06-04 20:33:16.349: E/lights(127): write ok string=0 0,len=3
06-04 20:33:16.349: E/lights(127): write ok string=1,len=1
06-04 20:33:16.349: E/lights(127): write ok string=0,len=1
06-04 20:33:16.359: E/lights(127): write ok string=0 0,len=3
06-04 20:33:16.559: E/lights(127): write ok string=0,len=1
06-04 20:33:16.569: E/lights(127): write ok string=0,len=1
06-04 20:33:16.579: E/lights(127): write ok string=0 0,len=3
06-04 20:33:16.579: E/lights(127): write ok string=0,len=1
06-04 20:33:16.579: E/lights(127): write ok string=0,len=1
06-04 20:33:16.579: E/lights(127): write ok string=0 0,len=3
06-04 20:33:16.629: E/lights(127): write ok string=0,len=1
06-04 20:33:16.639: E/lights(127): write ok string=0,len=1
06-04 20:33:16.639: E/lights(127): write ok string=0 0,len=3
06-04 20:33:16.639: E/lights(127): write ok string=0,len=1
06-04 20:33:16.639: E/lights(127): write ok string=0,len=1
06-04 20:33:16.649: E/lights(127): write ok string=0 0,len=3
06-04 20:33:18.789: E/lights(127): write ok string=0,len=1
06-04 20:33:18.789: E/lights(127): write ok string=0,len=1
06-04 20:33:18.789: E/lights(127): write ok string=0 0,len=3
06-04 20:33:18.789: E/lights(127): write ok string=0,len=1
06-04 20:33:18.799: E/lights(127): write ok string=0,len=1
06-04 20:33:18.799: E/lights(127): write ok string=0 0,len=3
06-04 20:33:23.009: E/lights(127): write ok string=0,len=1
06-04 20:33:23.019: E/lights(127): write ok string=0,len=1
06-04 20:33:23.019: E/lights(127): write ok string=0 0,len=3
06-04 20:33:23.019: E/lights(127): write ok string=1,len=1
06-04 20:33:23.029: E/lights(127): write ok string=0,len=1
06-04 20:33:23.029: E/lights(127): write ok string=0 0,len=3
06-04 20:33:23.049: E/DatabaseUtils(367): Writing exception to parcel
06-04 20:33:23.049: E/DatabaseUtils(367): java.lang.SecurityException: Permission Denial: reading com.android.providers.downloads.DownloadProvider uri content://downloads/download from pid=316, uid=10007 requires android.permission.ACCESS_DOWNLOAD_MANAGER
06-04 20:33:23.049: E/DatabaseUtils(367):   at android.content.ContentProvider$Transport.enforceReadPermission(ContentProvider.java:277)
06-04 20:33:23.049: E/DatabaseUtils(367):   at android.content.ContentProvider$Transport.bulkQuery(ContentProvider.java:155)
06-04 20:33:23.049: E/DatabaseUtils(367):   at android.content.ContentProviderNative.onTransact(ContentProviderNative.java:134)
06-04 20:33:23.049: E/DatabaseUtils(367):   at android.os.Binder.execTransact(Binder.java:288)
06-04 20:33:23.049: E/DatabaseUtils(367):   at dalvik.system.NativeStart.run(Native Method)
06-04 20:33:23.049: E/SwitchUsbSettings(316): Error when query download provider. error: java.lang.SecurityException: Permission Denial: reading com.android.providers.downloads.DownloadProvider uri content://downloads/download from pid=316, uid=10007 requires android.permission.ACCESS_DOWNLOAD_MANAGER
06-04 20:33:23.149: E/DatabaseUtils(367): Writing exception to parcel
06-04 20:33:23.149: E/DatabaseUtils(367): java.lang.SecurityException: Permission Denial: reading com.android.providers.downloads.DownloadProvider uri content://downloads/download from pid=316, uid=10007 requires android.permission.ACCESS_DOWNLOAD_MANAGER
06-04 20:33:23.149: E/DatabaseUtils(367):   at android.content.ContentProvider$Transport.enforceReadPermission(ContentProvider.java:277)
06-04 20:33:23.149: E/DatabaseUtils(367):   at android.content.ContentProvider$Transport.bulkQuery(ContentProvider.java:155)
06-04 20:33:23.149: E/DatabaseUtils(367):   at android.content.ContentProviderNative.onTransact(ContentProviderNative.java:134)
06-04 20:33:23.149: E/DatabaseUtils(367):   at android.os.Binder.execTransact(Binder.java:288)
06-04 20:33:23.149: E/DatabaseUtils(367):   at dalvik.system.NativeStart.run(Native Method)
06-04 20:33:23.149: E/SwitchUsbSettings(316): Error when query download provider. error: java.lang.SecurityException: Permission Denial: reading com.android.providers.downloads.DownloadProvider uri content://downloads/download from pid=316, uid=10007 requires android.permission.ACCESS_DOWNLOAD_MANAGER
06-04 20:33:56.369: E/ActivityManager(127): fail to set top app changed!
06-04 20:38:30.539: E/ActivityManager(127): fail to set top app changed!
06-04 20:50:48.819: E/ActivityManager(127): fail to set top app changed!
06-04 20:51:59.019: E/ActivityManager(127): fail to set top app changed!
06-04 23:01:32.909: E/Tethering(127): active iface (usb0) reported as added, ignoring
06-04 23:02:23.029: E/Tethering(127): active iface (usb0) reported as added, ignoring
06-04 23:04:03.339: E/Tethering(127): active iface (usb0) reported as added, ignoring
06-04 23:07:23.899: E/Tethering(127): active iface (usb0) reported as added, ignoring
06-04 23:09:54.619: E/Tethering(127): active iface (usb0) reported as added, ignoring
06-04 23:14:04.959: E/Tethering(127): active iface (usb0) reported as added, ignoring
06-04 23:16:35.439: E/Tethering(127): active iface (usb0) reported as added, ignoring
06-04 23:20:58.319: E/jdwp(9122): Failed sending reply to debugger: Broken pipe
06-04 23:21:36.259: E/Tethering(127): active iface (usb0) reported as added, ignoring 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T20:35:36.237

您的 Null 指针告诉您，您的 ArrayList itemsList 为 Null，并且未初始化。试试这样：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    Log.i("----------",Arrays.toString(Locale.getAvailableLocales()));
    itemsList = new ArrayList<String>();
    //here you never initialized ItemsList before, and get a nullpointer
    itemsList.add(Arrays.toString(Locale.getAvailableLocales()));
    array_spinner = new String[itemsList.size()];
    tts = new TextToSpeech(this, this);
    btnSpeak = (Button) findViewById(R.id.btnSpeak);
    txtText = (EditText) findViewById(R.id.txtText);

    // button on click event
    btnSpeak.setOnClickListener(new View.OnClickListener() {

        public void onClick(View arg0) {
            speakOut();
        }

    });
} 
```

# canvas - 使用 Canvas 作为 three.js 纹理：文本未显示在特定大小之上

> ID：10884368
> 
> 赞同：2
> 
> 时间：2012-06-04T16:04:20.087
> 
> 标签：canvas, html5-canvas, webgl, three.js

我最近一直在尝试使用 three.js，但是当用作纹理的画布的大小高于 256x256 时，我遇到了一个问题。

这是一些示例代码，演示了正在发生的事情：http: [//jsfiddle.net/sSD65/26/](http://jsfiddle.net/sSD65/26/)

请注意，当 时`size = 256`，画布及其内容正确地呈现在立方体的所有面上。时也是如此`size < 256`。

*然而*，一旦`size > 256`，画布的边界被渲染在立方体的所有面上，但文本却神秘地被遗漏了。

什么时候发生的例子：http `size = 257`: [//jsfiddle.net/sSD65/27/](http://jsfiddle.net/sSD65/27/)

我只是不明白为什么画布的图形部分被渲染在立方体上而不是文本部分。

这是三个.js 中的错误，是画布问题还是（很可能）我很愚蠢？有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-04T20:28:19.747

这确实很奇怪。它看起来像 Chrome 端的一些纹理缓存/同步问题，在代码处理 2d 画布 => WebGL 纹理转换的某处。

如果在绘制文本*后*添加一些画布绘制操作，即使使用 257 像素大小的画布，它也会再次工作：

[http://jsfiddle.net/sSD65/28/](http://jsfiddle.net/sSD65/28/)

所以看起来发生的事情是画布大小> 256 Chrome 在渲染文本以​​创建 WebGL 纹理之前使用 2d 画布的状态。

我猜它会尝试为更大的画布优化 WebGL 纹理上传，并且没有为“context.fillText”操作正确设置一些“脏”标志。

# php - 了解 $_GET['example']=="somevalue" 的最佳方法是什么？

> ID：10884370
> 
> 赞同：2
> 
> 时间：2012-06-04T16:04:26.593
> 
> 标签：php

```
if((isset($_GET[example]))&&($_GET['example']=='somevalue')){ ... } 
```

或者

```
if((!empty($_GET[example]))&&($_GET['example']=='somevalue')){ ... } 
```

要不就

```
if($_GET['example']=='somevalue'){ ... } 
```

我在问为什么我看到很多例子，人们首先检查 $_GET['example'] 是否设置，然后是否 $_GET['example']=='somevalue' （上面的第一个和第二个示例）。我不明白为什么不只使用最后一个解决方案（如果 $_GET['example']=='somevalue' 那么 $_GET['example'] 显然已设置）。

这个问题是指任何其他变量（ $_POST, $_SERVER, ecc ）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-04T16:10:40.140

```
if((isset($_GET[example]))&&($_GET['example']=='somevalue')){ ... } 
```

是对的，您想知道“变量”是否存在（或已设置）才能使用它。Empty 只是检查它是否有任何类型的数据。例如：

```
<?php
$foo= 0;

if (empty($foo)) { // True because $foo is empty
    echo '$foo is either 0, empty, or not set at all';
}

if (isset($foo)) { // True because $foo is set
    echo '$foo is set even though it is empty';
}

if (isset($var)) { // FALSE because $var was not declared before
   ...
}
?> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-04T16:49:23.580

`isset`和之间的区别`empty`很微妙但很重要。它们在单独使用时最相关。如果您正在检查一个变量是否存在并且是一个真实的值（例如，不是所有空格或 0 的任何字符串），您可以互换使用其中任何一个。

## 何时使用 isset

`isset`当知道变量是否已定义且不为空很重要时使用：

```
if (isset($maybeExistsMaybeNull)) {
    // variable defined and is not NULL
} 
```

## 何时使用 !empty

`!empty`当重要的是要知道变量是否已定义并且是真实的时使用

```
if (!empty($mightBeEmpty)) {
    // variable defined, and isn't "", " ", 0, "0" etc.
} 
```

`!empty`是存在和是某物的一个很好的简写。

## 何时使用 array_key_exists

`array_key_exists`当重要的是要知道键是否存在并且值不重要时使用：

```
if (array_key_exists('something', $array)) {
    // $array['something'] exists, could be literally anything including null
} 
```

## 何时不使用 isset

如果您的代码如下所示：

```
if (isset($something) && $something) {
    // code is shorter with !empty
} 
```

## 何时不使用 !empty

如果您的代码如下所示：

```
if (!empty($something) && $something === "") {
    // you meant isset. this is unreachable.
} 
```

然后你正在编写无法执行的代码

## 抛出错误的代码容易出错

避免编写发出您忽略的通知/警告的代码。例如在问题中：

```
if((isset($_GET[example]))&&($_GET['example']=='somevalue')){ ... } 
```

示例的第一个用途是未声明的常量。或者它是未声明的 - 如果你`define('example', "foo");`在代码中的其他地方有什么。

```
if($_GET['example']=='somevalue'){ ... } 
```

如果 url 不包含`?example=..`那也将发出通知。

编写代码而不显示错误意味着您很容易错过第一个错误。

## 在上下文中： isset 和 !empty 是等价的

对于给出的示例，这两种语言结构的行为完全相同。

没有任何情况下一个人的行为会与另一个人不同，如果变量未定义，也不会发出通知，并且两者之间的性能没有可测量的差异。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-04T16:30:30.167

正如其他人所说的检查 $_GET 和 $_POST 之类的东西，您最好使用：

```
if ( isset($_GET['example']) && $_GET['example'] =='somevalue' ) {

// process data

} 
```

所以你总是想首先确保变量已经设置（而不是设置为空）或者换句话说存在。然后继续检查变量是否包含您期望的数据。如果你试图引用一个不存在的变量（通过不检查 isset()）php 会给你一个通知说'未定义的变量......等等'。

如果您想知道是否设置了变量但不太关心什么，那么您可以使用：

```
if ( !empty($_GET['example']) ) {

// process data

} 
```

但在这方面，我会小心在字符串上使用 empty()，因为 empty 可能会在字符串数据（如 '0' 或 ' ' ）时表现得很奇怪。

所以我总是会做第一个，a) 确保变量存在并且 b) 是你所期望的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T16:46:19.030

这是您可能会做很多事情的事情，它有助于组合一个类/函数来为您处理此检查，因此您不必每次都这样做。

```
function checkValue($key, $value) {
    if(array_key_exists($key, $_REQUEST)){
        if ($_REQUEST[$key] == $value) {
            return true;
        } else {
            return false;
        }

    } else {
        return false;
    }
} 
```

我只是使用 Request 作为默认而不是切换出去（尽管在某些情况下为了安全起见，最好在 POST 和 GET 之间切换（imo））。

现在你可以在任何地方调用这个函数 if (checkValue('Item', 'Tom') === true){} etc

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-04T16:34:01.657

**最好**的是

```
if((isset($_GET[example]))&&('somevalue'==$_GET['example'])){ ... } 
```

和...之间的不同

```
'somevalue'==$_GET['example'] 
```

和

```
$_GET['example']=='somevalue' 
```

如果您输入错误*==*并改为输入*=*，第一个符号将引发错误以通知您。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-06-04T16:38:34.493

```
if((isset($_GET[example]))&&($_GET['example']=='somevalue')){ ... } 
```

# git - 将我的项目放入 github repo

> ID：10884374
> 
> 赞同：0
> 
> 时间：2012-06-04T16:04:37.077
> 
> 标签：git, project

当我创建我的第一个项目时，我在我的机器上创建了一个 repo（比如说`project1`）`github account`，然后将它克隆到我的机器中。然后每当我机器中的代码更新时推送到它。

现在我创建了另一个项目——比如说`project2`在我的机器上。对其进行测试，使用`git init`. 我想把这个项目推送到 github。为此，我创建了`repo`一个`github`名为`project2`. 它现在有一个`.gitignore`和`readme.md`文件。

现在，如何将现有代码添加到此？当我 cd 到我的`project2`目录并尝试`git push`时，我收到此错误：

```
fatal: No destination configured to push to. 
```

我试过`git push project2`

```
fatal: 'project2' does not appear to be a git repository
fatal: The remote end hung up unexpectedly 
```

请帮我纠正这个错误

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-09T16:46:17.663

步骤是：

1.  `cd project_directory`
2.  `git init`
3.  `git add .`
4.  `git commit -m "your_commit_message"`
5.  `git remote add origin https://github.com/[your_user_name]/[repo_name]`
6.  `git push origin master`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-04T16:06:57.463

您需要将新存储库添加为远程：

```
git remote add project2 git@github.com:Nickname/project2.git 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-19T01:17:51.170

1.  在您的 github 主页上创建存储库。当被问到时，不要选择创建 .gitignore 和 README.md 文件。
2.  在屏幕底部，将出现命令行说明，解释如何将现有存储库推送到 github 上新创建的存储库：

    `git remote add origin git@github.com:[your_user_name]/[repo_name].git`

    `git push -u origin master`

# assembly - 从堆栈指针中减去对齐？

> ID：10884376
> 
> 赞同：3
> 
> 时间：2012-06-04T16:04:45.343
> 
> 标签：assembly, x86, nasm

我见过一个汇编代码，它在调用函数之前从堆栈指针中减去，而没有任何特殊原因。减去的空间留空且未使用：

```
sub    esp, 8    ; stack align
push   dword y
push   dword [x]
call   foo
add    esp, 16
mov    [x], eax 
```

代码的作者添加了注释“堆栈对齐”，但我不知道“堆栈对齐”是什么意思，也不知道该命令如何`sub esp, 8`帮助实现它。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T18:24:56.083

如果在输入函数时堆栈指针与高速缓存行对齐，则函数的执行可能会对高速缓存造成较小的压力。

因此，可以组织编译器系统来坚持输入函数时 SP 对齐在缓存行上，并且编译器知道在每个调用站点使用了多少堆栈，在之前重新对齐 SP 需要多少时间它会打电话。

这将解释你的例子。我还没有看到很多编译器实际上这样做，因为堆栈本身往往会以适度的距离增长/缩小，并且由于一次又一次地重用本地存储，总体上不会对缓存提出太多要求。

另一个用途是为被调用者分配工作空间，或者返回比寄存器中更大的结果。编译器不会写这样的评论，所以有人可能会这样做。也许他知道自己在做什么；也许他没有。如果被调用的函数不需要这个空间，那么它只是一个浪费的指令。

# jquery - listview上的jquery mobile click（）

> ID：10884378
> 
> 赞同：6
> 
> 时间：2012-06-04T16:04:45.633
> 
> 标签：jquery, listview, mobile, click

我对 jquery mobile 中的列表视图有疑问。我想使用 JSON 从服务器加载一些数据并用这些项目填充你的列表视图。这很好用。但是当我试图对点击一个新加载的项目做出反应时，我确实得到了这个事件！我想我必须以某种方式刷新视图，有点不知道如何。

我在[http://jsfiddle.net/VqULm/227/上做了一个小草图](http://jsfiddle.net/VqULm/227/)

当你点击点击我按钮时，不再跟踪项目上的点击事件。我如何获得新项目的“工作”警报？

非常感谢您的阅读！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-04T16:07:43.783

尝试

```
 $('#listview').on('click', 'li', function() {
        alert("Works"); // id of clicked li by directly accessing DOMElement property
    }); 
```

和`jQuery > 1.7`

**[演示](http://jsfiddle.net/thecodeparadox/SWknG/1/)**

**或者**

```
$('#listview li').live('click', function() {
    alert("Works"); // id of clicked li by directly accessing DOMElement property
}); 
```

使用您的 jQuery 版本 1.6.4。

**[演示](http://jsfiddle.net/thecodeparadox/mcm8z/)**

### 为什么你需要这个

因为。您在页面重新加载后添加`li`，`listview`因此这些`li`s 的任何事件都应该`live`（对于您使用的 jQuery 版本）或`delegate`（jQuery > 1.7）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-27T09:03:33.357

如果您的 JQM 版本较旧（例如我的 jqm 1.2.0），并且上述两种方法都不适合您

**试试这个：**

```
 <ul data-role="listview" id="myList">
       <li id="1" >text</li>
     </ul>

     //on the js code use delegate
     $('#myList').delegate('li', 'click', function () {
         alert($(this).attr('id'));
     }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-21T18:51:30.490

到远程数据源和liswiew

用 div 包裹 ul 元素

```
<div data-role="page" id="myPage">
  <form id="myform" class="ui-filterable">
    <input id="what" data-type="search" placeholder="i.e.Carpentry...">
    <div id="w_what">
      <ul id="ul_what" data-role="listview" data-inset="true" data-filter="true" data input="#what">
      </ul>
     </div>
   </form>
 </div>

$( "#ul_what" ).on( "filterablebeforefilter", function ( e, data ) {
    var $ul = $( this ),
    $input = $( data.input ),
    value = $input.val(),
    html = "";
    $ul.html( "" );       // initially null 
    $('#w_what').show();  // For next search
    if ( value && value.length > 0 ) {
        $ul.html( "<li><div class='ui-loader'><span class='ui-icon ui-icon-loading'></span></div></li>" );
        $ul.listview( "refresh" );
        $.ajax({
            url: "/php/getWhat.php", // Ajax url
            dataType: "json",        // json 
            data: {
                q: $input.val()      // which value to be searched
            }
        })
        .then( function ( response ) {
            $.each( response, function ( id, val ) {
                html += "<li>" + val.text + "</li>";  // json response has text element
            });
            $ul.html( html );
            $ul.listview( "refresh" );
            $ul.trigger( "updatelayout");
        });
    }
});

$('#ul_what').delegate('li', 'click', function () {
    var ul = $(this);          // when clicked
    $('#what').val(ul.text()); // set the value for input       
    $('#w_what').hide();       // hide the div 

 }); 
```

希望对某人有所帮助

# apache - 更改路径 chiliproject

> ID：10884383
> 
> 赞同：0
> 
> 时间：2012-06-04T16:04:53.707
> 
> 标签：apache, configuration, rewrite, redmine, chiliproject

我想为 chiliproject 实例使用子目录。使用 apache 乘客，我正在考虑使用重写 + 别名，但它给了我一个 404。添加一个 RailsBaseURI 我得到连接重置。

是我应该适应的 routes.rb 还是我看错了地方？它现在正在[https://mydomain.com](https://mydomain.com)上运行，但我想在[https://mydomain.com/tracker上使用它](https://mydomain.com/tracker)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T16:22:11.383

You can use passenger directly without having to use an alias or redirection. However, Passenger requires some special configuration for that. Please see [one of our guides](https://www.chiliproject.org/projects/chiliproject/wiki/Installation_on_Debian_Squeeze_v2#Variant-2-Install-ChiliProject-in-a-sub-URL) for a complete installation example.

Generally you need to configure similar to this (cited from the linked guide):

At first, we assume you have installed ChiliProject to `/srv/www/chiliproject`. This is **not** your DocumentRoot.

You need to hint Passenger a bit here so that it correctly finds your ChiliProject. So we create a symlink from the existing DocumentRoot directory to out ChiliProject installation.

```
ln -s /srv/www/chiliproject/public DOCUMENTROOT/chiliproject 
```

Now add the following directives into your existing virtual host:

```
# TODO: Remember to replace DOCUMENTROOT with your actual path
<Directory DOCUMENTROOT>
  Options +SymLinksIfOwnerMatch
</Directory>

RailsBaseURI /chiliproject
# TODO: Remember to replace DOCUMENTROOT with your actual path
<Directory DOCUMENTROOT/chiliproject>
  Options -MultiViews

  Order deny,allow
  Allow from all
</Directory> 
```

# php - 无法在 PHP 中运行 shell 脚本

> ID：10884390
> 
> 赞同：0
> 
> 时间：2012-06-04T16:05:35.210
> 
> 标签：php, bash, shell, exec

当我尝试运行 shell 脚本时`exec`，`shell_exe`什么也没有发生！当我使用这些命令`ls`或`whoami`所有工作运行时。

会是什么呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T16:17:37.827

你回显输出吗？

```
echo exec('ls'); 
```

您是否启用了安全模式？

```
phpinfo(); 
```

是时：（来自手册）

> 注意：启用安全模式后，您只能执行 safe_mode_exec_dir 中的文件。出于实际原因，目前不允许在可执行文件的路径中包含 .. 组件。

尝试调用 exec

```
exec('...pathtoyourbashscript...', $out, $return); 
```

然后

```
echo $return; 
```

如果它显示`127`它很可能路径是错误的。

还要检查权限。用户 'nobody' 可能是 apache 用户，它需要访问和执行脚本的权限。

您可以通过运行更改权限

`chmod 755 pathtouyourscript`

这意味着类似“我不介意其他人是否阅读或运行此文件，但只有我应该能够修改它”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T16:57:03.527

如果您使用的是 Apache，请检查以确保 Apache 用户具有执行 php 文件所需的权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T22:09:03.457

您可以使用反射来确定该功能是否已被禁用`disable_functions`。

```
$exec = new ReflectionFunction('exec');
print $exec->isDisabled() ? 'Disabled' : 'Enabled'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-01T03:41:46.047

如果程序是基于 web 的，即 linux，请尝试制作一个 php 文件来处理 shell。和一个 shell 文件来处理 php..

例如：runAllShell.php 文件可以包含一个循环。：

```
<?php
// Developed by A T.
// Count the files
$directory = '/put/directory/path_here/';
$files = glob($directory . '*.*');

if ( $files !== false )
{
    $filecounter = count( $files );

}
else
{
    echo "No Files were found";
}
$fileCount = $filecounter;

// Start the index
$fileNumber = 1;
while($fileNumber <= fileCount){
shell_exec('$fileNumber . ".sh"');
// get some feedback
echo "The ".$fileNumber." file has been excecuted";
// increment file number
$fileNumber++;

}
?> 
```

确保目录中的所有 .sh 文件都按数字顺序排列以使其正常工作，即：1.sh 2.sh 3.sh 等等。

最好的问候， AT。

# regex - 将 URL 匹配到图像而不是替换字符的正则表达式

> ID：10884394
> 
> 赞同：0
> 
> 时间：2012-06-04T16:05:57.543
> 
> 标签：regex

我在这个符号的 xml 文件中重写了规则

```
<rule>
<from></from>
<forward></forward>
</rule> 
```

在 from 节点中，我希望匹配一个结尾有图像扩展名和`"-"`名称中包含破折号字符的 URL。如果匹配，在转发节点中，我想`"-"`用下划线字符替换破折号字符`"_"`

例如

`longUrl/test-image.jpg`会去`longUrl/test_image.jpg`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T16:19:06.633

You can try something like that on top of your .htaccess

```
RewriteRule ^(.*)(\-|%2D)(.*)$ /$1_$3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T16:29:09.747

替换这个：

```
<from>([^<>]*)-([^/<>]*)\.(jpg|gif)</from> 
```

和：

```
<from>$1_$2.$3</from> 
```

那是一个连字符，所以只要匹配就重复

# hyperlink - 在 webview 中双击链接

> ID：10884396
> 
> 赞同：0
> 
> 时间：2012-06-04T16:06:00.537
> 
> 标签：hyperlink, webview

我对人们在我的 WebView 中双击链接有疑问。有时，如果一个人点击链接几次，脚本会执行几次。

我试图禁用 WebView 并在 url 加载的覆盖中将其设置为不可点击，但它似乎不起作用，时不时有人仍然设法获得双击。

任何人都知道如何实现一个加载屏幕来阻止人们点击链接两次？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T16:27:29.437

据我所知，要双击某个东西，首先点击事件会触发 2 次，我会做这样的事情：

```
 var isClicked = false;

    $("a").click(function(event) {
          event.preventDefault();
          if (!isClicked){
               isClicked = true;
               // Do something
          }
     }); 
```

只需设置 isClicked 并在流程结束时将其更新为 false。

# android - Android Drawable，从套接字接收图像

> ID：10884398
> 
> 赞同：0
> 
> 时间：2012-06-04T16:06:03.427
> 
> 标签：android, sockets, tcp, drawable, inputstream

我通过 android 应用程序中的套接字接收图像，我进行了调试，当我将图像保存在 Drawable d 中时，程序等待发生某些事情。我认为它必须与 clientSocket.getInputStream(); 有关系。或与插座。我在 C++ 中有一个多线程服务器，当我停止服务器时，android 应用程序继续，我可以看到我之前发送的图像。但是，我认为这不是服务器问题，因为服务器中的套接字发送数据并显示消息 printf("Bytes enviados %d\n", bytesEnviados); 这是在服务器代码的末尾。

这里有代码：

```
public Drawable mandaMensajeVideo(String mensaje, String ip, int puerto ) throws IOException{

    Socket clientSocket = new Socket(ip, puerto);
    DataOutputStream outToServer = new DataOutputStream(clientSocket.getOutputStream());
    outToServer.writeBytes(mensaje);
    outToServer.flush();

    InputStream inputStream = clientSocket.getInputStream();

    Drawable d = Drawable.createFromStream(inputStream, null);

    clientSocket.close();

    outToServer.close();

    return d;
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T16:46:43.310

听起来`inputStream`永远不会到达终点，因为您从未正确关闭通信。

# asp.net - 如何处理多层 ASP.NET Web 应用程序中的异常

> ID：10884403
> 
> 赞同：3
> 
> 时间：2012-06-04T16:06:08.690
> 
> 标签：asp.net, exception-handling, multi-layer

我有一个带有**UI**、**服务层**和**存储库层**的 ASP.NET Web 窗体应用程序。

**我的服务层**中的一些方法与 Web 服务通信，因此我想将对 Web 方法的所有调用包装在一个`Try-Catch-Finally`构造中。

假设我的**服务层**中有以下方法：

```
public RegistrationDetails GetRegistrationDetails(int userId)

public bool RegisterUser(UserData myUserData) 
```

Where`RegistrationDetails`和`myUserData`是对象类型（类）。

我关心的是：如果我创建一个`Try-Catch-Finally`以在上面列出的方法的实现中包装对 Web 服务的调用，如果出现异常，如果返回类型是`RegistrationDetails`和，我如何返回消息字符串`bool`？

我正在考虑为每个返回对象添加一个属性，但我不知道这是否是一个好的解决方案。例如，而不是使用`bool`：

```
public class RegisterResponse
{
   public bool isRegistered { get; set; }
   public string ExceptionMessage { get; set; }
}

public RegisterResponse RegisterUser(UserData myUserData) 
```

然后检查 ExceptionMessage 是否为`null`或`String.Empty`。这是一个好方法吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T17:14:27.150

1）正如IrishChieftain所说，将异常冒泡到表格中是好的，您将能够更好地响应异常

2）您还可以将引用参数作为数组存储从方法生成的异常消息

```
public bool RegisterUser(UserData myUserData, optional ref ArrayList<string> errors)
{
  if(error)
    errors.Add("This error occured")
} 
```

3) 对于 Instance Object，您可以有一个 ArrayList 的 Instance 变量用于错误，并在属性中返回该变量

```
public class MyClass
{
   private ArrayList<string> errors = new ArrayList<string>

   public ArrayList<string> ExceptionMessages()
   {
      get 
      {
          return errors;
      }
   }

  public RegistrationDetails GetRegistrationDetails(int userId) { }
}

//Used like this:
MyClass c = new MyClass();
c.GetRegistrationDetails();

if(c.ExceptionMessages > 0)
{
    //output errors
} 
```

但我更喜欢第一种方法 - 像输出格式这样的灵活性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T17:58:01.863

将原始异常从服务传递给您的客户端（Web 表单层）可能会有风险。如果它是数据库异常，它可能会暴露您的数据库的详细信息。恶意用户可能会从他们自己的应用程序中调用您的服务层方法。

您可以在客户端级别预期两种类型的异常：

1.  通信异常（连接到服务的问题）
2.  服务器端错误（数据库问题、用户名不唯一、密码无效……其他业务规则异常）

第一种类型应该在 web 表单层的 try-catch-finally 中捕获，但第二种应该在服务层中捕获，记录，然后`RegisterResponse`按照您的建议包装在对象中。但是，除了发送 Exception.Message 之外，您可能会考虑使用预期错误的枚举（使用 ServerError 成员来涵盖其他任何内容。）您还可以将 EventId 添加到响应和日志条目中，以便您可以调查错误。

```
public enum RegisterResponseError { NoError = 0, SystemError = 1, 
    UserNameNotUnique, PasswordInvalid, etc.  }

public class RegisterResponse
{
   public bool isRegistered { get; set; }
   public RegisterResponseError ErrorCode { get; set; }
} 
```

然后在您的客户端代码中，

```
if(myRegisterResponse.ErrorCode == RegisterResponseError.NoError)
   // everything was fine
else
  // show a suitable error message for ErrorCode and display EventId (if logging) 
```

您可以从您的服务返回一个错误字符串，但最好管理 Web 表单层中的任何内容，以防您以后需要本地化内容或使用 CMS。

# sql - 长时间运行 sp

> ID：10884405
> 
> 赞同：0
> 
> 时间：2012-06-04T16:06:10.577
> 
> 标签：sql, optimization

以下 sp：我有一个存储过程，运行时间为 1/2 分钟到 4 小时（在夜间处理期间）：

```
update tableA
set tableA.Other_Flag_50 = isnull(Staging.other_flag_50, 0)
from tableA
inner join (
    select acct_nbr,
        appl_code,
        Other_Flag_50
    from tableB
) Staging on tableA.lnhist_acct_nbr = Staging.acct_nbr
    and tableA.lnhist_appl_code = Staging.appl_code 
```

我在 Profiler 中连续运行了 2 个晚上的阻止报告，第一次每隔 10 分钟，然后每隔 5 分钟。存储过程永远不会显示为被阻止（但它会阻止其他查询）。

关于优化这个的任何想法？使用连接创建视图会有所帮助吗？（来自 tableB 的 acct_nbr、appl_code、Other_Flag_50）谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T16:17:09.590

您是否尝试过直接对 tableB 进行 INNER JOIN？

```
UPDATE tableA 
SET tableA.Other_Flag_50=isnull(tableB.other_flag_50,0)
FROM  tableA 
INNER JOIN tableB
     ON tableA.lnhist_acct_nbr = tableB.acct_nbr 
     AND tableA.lnhist_appl_code = tableB.appl_code 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T16:18:13.817

尝试使用`rowlock`来防止锁定整个表。

```
update tableA with (rowlock)
... 
```

**编辑** 不确定其他 RDBMS，但我提供的答案适用于 SQL Server

# jquery - 无法修改 jQuery 中的确定取消按钮

> ID：10884413
> 
> 赞同：4
> 
> 时间：2012-06-04T16:06:43.833
> 
> 标签：jquery

我们正在使用 JQuery 通过调用以下函数将原始的确定/取消按钮更改为是/否按钮。

```
function yesnodialog(button1, button2, element)
{
    var btns = {};

    btns[button1] = function()
    { 
        element.parents('li').hide();
        $(this).dialog("close");
    };

    btns[button2] = function()
    { 
        $(this).dialog("close");
    };

    $("<div></div>").dialog(
    {
        autoOpen: true,
        title: 'Condition',
        modal:true,
        buttons:btns
    }
} 
```

我们将所有依赖的 js 和 css 文件添加到项目中，但是当我们调用 yesnodialog 函数时仍然出现“需要对象”错误

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T16:13:36.800

`);`对话电话后您错过了

一定是：

```
function yesnodialog(button1, button2, element)
{
    var btns = {};

    btns[button1] = function()
    { 
        element.parents('li').hide();
        $(this).dialog("close");
    };

    btns[button2] = function()
    { 
        $(this).dialog("close");
    };

    $("<div></div>").dialog(
    {
        autoOpen: true,
        title: 'Condition',
        modal:true,
        buttons:btns
    });
} 
```

[演示](http://jsfiddle.net/JEVwA/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T16:12:48.230

当你说`var btns = {};`你正在创建一个对象，而不是一个数组。要向其添加按钮，请使用以下命令：

```
var btns = {
  "Ok": function() {
    // Ok button pressed
  },
  "Cancel": function() {
    // Cancel button pressed
  }
}; 
```

查看有关 jQuery UI 的文档以获取更多信息：http: [//jqueryui.com/demos/dialog/](http://jqueryui.com/demos/dialog/)

# javascript - Backbone Collection.reset() 不适用于扩展集合

> ID：10884417
> 
> 赞同：2
> 
> 时间：2012-06-04T16:07:11.157
> 
> 标签：javascript, collections, backbone.js

我有一个 Backbone 集合

```
jQuery ->
  class App.Collections.List extends Backbone.Collection
    model: App.Models.ListItem 
```

我正在尝试在页面加载时初始化集合：

```
var list = new App.Collections.List;
list.reset(<%= @data.to_json.html_safe %>) 
```

这会在主干库中引发 JS 错误。

```
Uncaught TypeError: undefined is not a function application.js:597
f.extend._prepareModel application.js:597
f.extend.add application.js:591
f.extend.reset application.js:595
(anonymous function) 
```

但是，如果我将代码更改为：

```
var list = new Backbone.Collections;
list.reset(<%= @data.to_json.html_safe %>) 
```

重置有效，并且集合被填充——认为集合中的对象似乎不知道它们应该是 ListItem 对象。我必须对我的自定义集合的所有重置做一些特别的事情吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-04T16:32:43.677

`_prepareModel`stacktrace 行提示您在收集后声明了您的模型。

您很可能将代码设置如下：

```
 class App.Collections.List extends Backbone.Collection
    model: App.Models.ListItem

  class App.Models.ListItem extends Backbone.Model 
```

这将失败，因为当您尝试在集合的属性`ListItem`中使用它时尚未声明。`model`您实际上是将模型属性设置为`undefined`.

您需要先声明模型：

```
 class App.Models.ListItem extends Backbone.Model

  class App.Collections.List extends Backbone.Collection
    model: App.Models.ListItem 
```

请注意，这不是 CoffeeScript 或 Backbone 的限制。这是由使用对象字面量引起的 JavaScript 行为。立即评估对象文字键/值对的值，这意味着它必须存在，否则它将作为未定义或引发其他错误返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T00:51:29.373

正如 Derick 所说，您需要先声明模型，为此我通常只需将 App.coffee（主主干文件）的要求顺序更改为此

```
...
require_tree ./models
require_tree ./collections
... 
```

# jquery - Rails 资产管道和 Jquery 插件问题

> ID：10884419
> 
> 赞同：1
> 
> 时间：2012-06-04T16:07:14.960
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3, jquery-plugins, asset-pipeline

我正在使用带有 jquery gem 的 rails。

我的 application.js 中有以下内容

```
//= require jquery
//= require jquery_ujs
//= require_tree . 
```

这些声明是否按顺序包含文件？

我正在使用 jquery 插件 textareaexpander (http://www.sitepoint.com/blogs/2009/07/29/build-auto-expanding-textarea-1/)

我收到一个 js 错误

```
jQuery("textarea[class*=expand]").TextAreaExpander(); 
```

在插件的几乎最后一行，如下所示

```
// initialize all expanding textareas
jQuery(document).ready(function() {
  jQuery("textarea[class*=expand]").TextAreaExpander();
}) 
```

我不明白？是不是因为 jQuery 尚未加载。为什么 TextAreaExpander 仍未定义？

下面是插件文件中的其余代码供参考。

```
(function($) {
// jQuery plugin definition
$.fn.TextAreaExpander = function(minHeight, maxHeight) {
var hCheck = !($.browser.msie || $.browser.opera);
// resize a textarea
function ResizeTextarea(e) {
// event or initialize element?
e = e.target || e;
// find content length and box width
var vlen = e.value.length, ewidth = e.offsetWidth;
if (vlen != e.valLength || ewidth != e.boxWidth) {
if (hCheck && (vlen < e.valLength || ewidth != e.boxWidth)) e.style.height = "0px";
var h = Math.max(e.expandMin, Math.min(e.scrollHeight, e.expandMax));
e.style.overflow = (e.scrollHeight > h ? "auto" : "hidden");
e.style.height = h + "px";
e.valLength = vlen;
e.boxWidth = ewidth;
}
return true;
};
// initialize
this.each(function() {
// is a textarea?
if (this.nodeName.toLowerCase() != "textarea") return;
// set height restrictions
var p = this.className.match(/expand(\d+)\-*(\d+)*/i);
this.expandMin = minHeight || (p ? parseInt('0'+p[1], 10) : 0);
this.expandMax = maxHeight || (p ? parseInt('0'+p[2], 10) : 99999);
// initial resize
ResizeTextarea(this);
// zero vertical padding and add events
if (!this.Initialized) {
this.Initialized = true;
$(this).css("padding-top", 0).css("padding-bottom", 0);
$(this).bind("keyup", ResizeTextarea).bind("focus", ResizeTextarea);
}
});
return this;
};
})(jQuery); 

// initialize all expanding textareas
jQuery(document).ready(function() {
jQuery("textarea[class*=expand]").TextAreaExpander();
}); 
```

如您所见，函数 TextAreaExpander 首先是通过扩展 jQuery 定义的，然后在文档就绪时调用，但仍然无法正常工作。我对他们的其他插件有类似的问题是 selected.js。

如果有人能指出问题并详细说明造成这种情况的原因，因为对我来说这没有任何意义（但显然我在这里遗漏了一点）。

相关代码

```
development.rb

config.assets.compress = false
config.assets.debug = true

application.rb
config.assets.enabled = true
config.assets.version = '1.0 
```

好的，所以我做了建议检查它是否是语法问题的实验，结果不是。

我做了另一个实验，如果我删除线

```
//= require_tree . 
```

来自 application.js ，而是将其替换为

```
//= require_self 
```

在我的视图文件（正在呈现的视图）中，我在最后添加以下内容

```
= javascript_include_tag 'libs/jquery.textarea-exapander' 
```

一切似乎都很完美。现在有什么想法吗？

更多信息

```
app/assets/javascript
  |- application.js
  |- chosen.jquery.js
  |- admin/
     |- categories.js.coffee
  |- libs/
     |- jquery.textarea-exapander.js
     |- modernizr.js
     |- platformselector.js
     |- waypoints.js
  |- gmaps4ails/
     |- gmaps4rails.base.js
     |- gmaps4rails.bing.js
     |- gmaps4rails.googlemaps.js 
```

我的 application.js

```
//= require jquery
//= require jquery_ujs
//= require_tree . 
```

我的布局中的代码

```
%html
  %head
    %title Whatever
    %link{type:"text/css",rel:"stylesheet", href:"http://fonts.googleapis.com/css?family=Abel"}
    = stylesheet_link_tag    "application", :media => "all"
    = stylesheet_link_tag 'gmaps4rails'
    = javascript_include_tag "application"
    = csrf_meta_tags
  %body
    = render 'shared/header'
    %div#main.inside.topadd
      = yield
      %div.wrapper
    =render 'shared/footer'
    = yield :scripts 
```

上面的设置不起作用

以下设置有效

我的 application.js

```
//= require jquery
//= require jquery_ujs 
```

在我的registrations/new.html.haml里面

```
some bla bla bla bla haml code

= javascript_include_tag 'libs/jquery.textarea-exapander' 
```

这可行，如果我在视图之后包含它，则对于其他插件 selected.js 也是如此，否则它会给出与 .chosen 不是函数相同的错误。

因此，从评论看来，我的本地设置有问题

我在 heroku 和 local 的 html 中注意到另一个奇怪的东西

这是heroku上的body类

```
linux js gecko gecko_20100101 firefox firefox_12_0 firefox_12 gecko_12_0 
```

但在我当地，身体课是

```
js no-flexbox canvas canvastext webgl no-touch geolocation postmessage no-websqldatabase indexeddb hashchange history draganddrop websockets rgba hsla multiplebgs backgroundsize borderimage borderradius boxshadow textshadow opacity cssanimations csscolumns cssgradients no-cssreflections csstransforms csstransforms3d csstransitions fontface generatedcontent video audio localstorage sessionstorage webworkers applicationcache svg inlinesvg smil svgclippaths linux gecko gecko_20100101 firefox firefox_12_0 firefox_12 gecko_12_0 js flexbox canvas canvastext webgl no-touch geolocation postmessage no-websqldatabase indexeddb hashchange history draganddrop websockets rgba hsla multiplebgs backgroundsize borderimage borderradius boxshadow textshadow opacity cssanimations csscolumns cssgradients no-cssreflections csstransforms csstransforms3d csstransitions fontface video audio localstorage sessionstorage webworkers applicationcache svg inlinesvg smil svgclippaths 
```

我也在本地看到这个我的每个 Rails 应用程序

```
<div id="cboxOverlay" style="display: none;"></div>
<div id="colorbox" class="" style="padding-bottom: 0px; padding-right: 0px; display: none;"></div> 
```

身体开始后

```
<div id="supersized-loader"></div>
<div id="supersized"></div> 
```

在正文结束之前，我到目前为止都没有使用包括彩盒在内的任何内容......

到底是怎么回事 ？？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T21:52:05.850

几个小时后想通了。问题不在于我们所有人都在寻找它。

我在本地机器上运行了 nginx，其 conf 指向我的另一个项目，并且公共目录设置为该项目，因此路径 /assets/application.js 由 nginx 直接从 public/assets 提供服务/ 另一个项目的目录。并且由于另一个项目在heroku上，我曾经在locallay上预编译资产，因此在提供服务的app/assets中创建了一个已编译的应用程序是js。

非常感谢你们的帮助，你们的评论和讨论帮助我发现问题只出在本地机器上，而我的配置出了点问题。

再次感谢

# java - 处理，通过 Kinect 控制鼠标，告诉处理左键单击

> ID：10884427
> 
> 赞同：0
> 
> 时间：2012-06-04T16:08:09.980
> 
> 标签：java, click, processing, kinect

我想知道你们是否可以提供帮助。

我制作了一个处理草图，将我的骨架数据和位置提供给我的机器人类，我可以很好地控制我的鼠标。

唯一的问题是我不知道如何告诉 LeftClick 处理，或者在 if 语句处于保持状态时保持 LeftClicked。

```
 kinect.drawLimb(calibratedUserID, 
                          SimpleOpenNI.SKEL_LEFT_SHOULDER,
                          SimpleOpenNI.SKEL_LEFT_ELBOW);                            
    //right hand above right elbow
    // and
    // right hand right of right elbow  
     if(leftHand.y > leftElbow.y && leftHand.x > leftElbow.x) {
      stroke(255);
      mousePressed = true; **This being the section i cant figure out!** 
      println("did it work?");
    }else{
      stroke(355, 0, 0);
    }
         kinect.drawLimb(calibratedUserID, 
                          SimpleOpenNI.SKEL_LEFT_HAND,
                          SimpleOpenNI.SKEL_LEFT_ELBOW);
  }                        
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T14:31:48.807

If`r`是 Robot 类的一个实例：

```
r.mousePress(InputEvent.BUTTON1_MASK);
r.mouseRelease(InputEvent.BUTTON1_MASK); 
```

[来源 1](http://mrbool.com/simulating-mouse-click-and-keyboard-press-with-java-and-pixel-color-determiner/24487) ,[来源 2](http://docs.oracle.com/javase/1.5.0/docs/api/java/awt/Robot.html)

# .net - 将 Sqlite 应用程序移植到服务器/客户端应用程序

> ID：10884428
> 
> 赞同：0
> 
> 时间：2012-06-04T16:08:25.593
> 
> 标签：.net, vb.net, performance, sqlite

我为一个组织编写了一个应用程序，他们让应用程序使用 Samba 在他们的局域网中运行，效果很好。现在他们想通过互联网工作。问题是我用 Sqlite 编写了这个应用程序，这意味着它目前正在工作：

他们在他们的 samba 服务器上有一个 exe 和 sqlite dll 和 sqlite 数据库，他们在他们的 windows pc 上连接了一个网络驱动器来运行它。这意味着每台电脑都在通过 samba 将数据写入 sqlite 数据库。

我在互联网上尝试过，但就像我认为 sqlite 是一个本地数据库一样，它非常慢，即使 ping 低于 50 毫秒。

我可以创建一个 tcp 服务器，它处理所有内容并将所有内容写入 sqlite 数据库，但是我已经为该项目编写了大约 20.000 行代码，因此对于懒惰的我来说，这不是最佳选择。我在我的客户端中只使用了一个 sqlite 类进行查询，所以我认为如果我用 mysql 数据库适配器替换 sqlite 数据库适配器，它可以在没有太多工作的情况下工作，因为 sqlite 的语法与 mysql 几乎相同。

或者有人有更好的主意吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T16:18:33.427

SqLite 不是为并发事务设计的（它可以完成，但那是另一篇文章）。如果要通过 Internet 获得，最好的办法是将数据库迁移到免费数据库之一（mySql、Sql Server Express、Oracle Express 等）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T16:30:03.850

配置有自签名 SSL 证书的 PostgreSQL 可能是合适的候选者。在大多数情况下，将 SQL 转储从 SQLite3 移植到 PostgreSQL 是微不足道的。

# jquery - 调整元素大小以适合其容器

> ID：10884434
> 
> 赞同：0
> 
> 时间：2012-06-04T16:08:34.727
> 
> 标签：jquery

我有一个容器，用于在选择一系列文档时显示面包屑路径。

每个面包屑元素都是一个 div，向左浮动，这样它们就可以很好地堆叠在一起。它们的宽度由它们的文本内容设置，即文档的标题。长度会有很大差异。

**应该发生什么：** 当元素的面包屑列表变得太长而无法在容器中显示时，它们应该调整大小，确保所有元素在容器中保持可见。

**问题：** 这似乎有效，但只是在一定程度上。一旦面包屑列表对于容器来说太长，我将容器宽度除以存在的面包屑元素的数量，并相应地设置元素宽度。但是，这不会始终如一地工作，有时会显示列表中的最后一个文档，但如果选中则拒绝显示其直接父级。

理想情况下，面包屑元素应该简单地保持缩小以确保它们都显示出来，这与调整窗口图标大小以显示在 Windows 任务栏中的方式大致相同。

Iv 做了一个小动作来粗略地突出显示正在发生的事情，即使在这里你也可以看到元素没有正确调整大小以确保它们都显示出来。这在添加 8 个或更多元素时最为明显。

[http://jsfiddle.net/MaxVK/drw9J/30/](http://jsfiddle.net/MaxVK/drw9J/30/)

谁能告诉我我做错了什么？

非常感谢

MVK

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T11:16:07.503

您必须将填充、边距和边框大小（在您的情况下：9px，填充为 2*3，边框为 2*1，左边距为 1）减去按钮宽度：

```
var Lok = (BredWid / ButCount)-9; 
```

[http://jsfiddle.net/drw9J/35/](http://jsfiddle.net/drw9J/35/)

这是一个简单的例子：

[http://jsfiddle.net/drw9J/34/](http://jsfiddle.net/drw9J/34/)

您会注意到总宽度不完全等于容器宽度（按钮后面有一个小空白），这是由于宽度的四舍五入造成的。

在第一个示例（您的版本）中，末尾的空白是由于按钮小于 Lok。

# spring - 网络应用后端架构

> ID：10884436
> 
> 赞同：2
> 
> 时间：2012-06-04T16:08:45.837
> 
> 标签：spring

我正在开始一个新的网络应用程序作为一种爱好，并且在架构上遇到了困难。
前端将是 HTML 和一些用于请求的 JavaScript。
后端将使用 Java 和 Spring Framework 实现。

例如，一个图书馆页面，用户可以在其中查看他的书籍和他的个人信息。

```
Personal Info
-------------
Book 1
Book 2
Book 3 
```

我想用 2 个 REST 服务来实现这个功能，一个用于个人信息，另一个用于该人拥有的书籍。

```
Ex .
www.mybib.org/users/123/
www.mybib.org/users/123/books/ 
```

问题是，当用户第一次请求主页查看他的书籍和他的个人信息时，如何编写这个页面。

*   使用 servlet / 控制器复制 2 个 REST 服务的代码，然后重定向到 JSP 以格式化 HTML 和 JavaScript。首次加载完成后，对于页面上的每次更新，请使用 Rest services 。
    我认为这实际上是一个非常糟糕的设计。

*   从服务器/控制器调用 REST 服务，然后调用 JSP 以组成 HTML 和 JavaScript 输出。然后为每次更新调用 REST 服务。

*   从 servlet / 控制器返回 HTML 布局并在加载页面时使 javascript 发出 2 Ajax 请求。

*   ...或者是其他东西。

正如你所看到的，我对此很陌生，事实上，这实际上是我第一次尝试构建一个非常简单的 Web 应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T16:17:33.657

最简单的方法是简单地使用某种方式，`IndexController`然后获取当前用户的书籍列表即可立即呈现页面，无需额外的 AJAXy REST 调用。

如果你对这一切都不熟悉，这就是我开始的方式。您可能还想查看 Spring 'petclinic' 示例应用程序中的代码：[https ://src.springframework.org/svn/spring-samples/petclinic](https://src.springframework.org/svn/spring-samples/petclinic)

如果您*必须*使用 Ajax，我仍然需要一个 IndexController 和一个 index.jsp 来呈现初始页面。之后，您的 javascript 代码可以进行 REST 调用，为此您可以实现不同的控制器。

# php - 如何在网页上使用php阅读ppt

> ID：10884441
> 
> 赞同：0
> 
> 时间：2012-06-04T16:09:05.760
> 
> 标签：php, powerpoint

我有一个简单的问题，问题是如何上传 ppt 文件并在网络上显示 ppt。我尝试用谷歌搜索这个问题，我已经阅读了一个页面是使用谷歌文档并使用 url 来阅读我的 ppt 文件 url 链接。那么，问题是不是要实现？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T16:12:51.557

谷歌搜索“PHP ppt”会得到[这个](http://phppowerpoint.codeplex.com/)。*编辑：*但它只支持`.pptx`.

# tfs - 如何从 TFS 获取构建定义并将其传递给外部程序

> ID：10884442
> 
> 赞同：1
> 
> 时间：2012-06-04T16:09:05.770
> 
> 标签：tfs

如何从 TFS 获取构建定义并将其传递给外部程序

这是我们手动执行的操作：

1）排队新构建 2）一旦构建完成，转到放置文件夹并获取 exe 名称 3）将此 exe 名称传递给测试自动化程序并运行它。

我想自动化这三个步骤。是否可以以编程方式获取构建定义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T10:19:43.653

假设您的第 1 步已执行，则此最新（成功！）构建可作为`lastKnownGoodBuild`特定构建定义的 。
考虑到这一点，您可以使用基于以下内容的控制台应用程序：

```
using System;
using System.IO;
using Microsoft.TeamFoundation.Build.Client;
using Microsoft.TeamFoundation.Client;

namespace BuildDropLocation
{
    class Program
    {
        static void Main()
        {
            TfsTeamProjectCollection teamProjectCollection = TfsTeamProjectCollectionFactory.GetTeamProjectCollection(new Uri("http://yourTFSServerUri"));

            var buildService = (IBuildServer)teamProjectCollection.GetService(typeof(IBuildServer));

            IBuildDefinition myBuildDefinition = buildService.GetBuildDefinition("TeamProjectName", "BuildDefinitionName");
            Uri lastKnownGoodBuild = myBuildDefinition.LastGoodBuildUri;
            IBuildDetail myBuildDetail = buildService.GetBuild(lastKnownGoodBuild);
            string[] myExeFiles = Directory.GetFiles(myBuildDetail.DropLocation, "*.exe",SearchOption.AllDirectories);

            foreach (var exeFile in myExeFiles)
            {
                Console.WriteLine(myExeFile);
            }      
        }
    }
} 
```

使用上述内容，您可以检索到位于 Team Project`*.exe`中的最后一个构建定义的放置位置下的任何路径。这种方法允许您将 TFS-Build 与测试的执行完全分开。例如，您可以安排此控制台应用程序每晚执行并调用您的运行器以对最新的成功构建进行操作。如果您希望构建和测试运行以任何方式耦合，您应该按照@TimWagaman 的建议在构建期间调用您的测试运行程序。这种“耦合”可能包括：`BuildDefinitionName``TeamProjectName`

*   测试结果包含在构建日志中
*   失败会产生错误
*   测试覆盖率是可报告的

在这种情况下，您的测试将在编译阶段不会中断的每个构建中执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T21:32:56.973

创建自定义构建模板。使用默认（或您现在使用的任何内容）的副本作为您的起点。查看 BuildDetail.CompilationStatus = BuildPhaseStatus.Succeeded 的工作流程。然后，您将有机会调用另一个应用程序，它将是一个存根程序/powershell 脚本/任何其他可执行进程。您可以使用 BuildDetail.DropLocation 传递刚刚完成的构建路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T03:46:56.250

```
 <MakeDir Directories="$(TemporaryFolder)" />
    <Exec Condition=" '$(IsInTeamBuild)'=='True'" Command="&quot;$(TfsTask)&quot; history ../ /r /noprompt /stopafter:1 /version:W > &quot;$(TemporaryFolder)\grab-changeset.txt&quot;" />
    <Exec Condition=" '$(IsInTeamBuild)'=='True'" Command="&quot;$(TfsTask)&quot; properties &quot;$(MyMSBuildStartupDirectory)\all-companies-run-after-update.js&quot; > &quot;$(TemporaryFolder)\grab-properties.txt&quot;" /> 
```

我们使用上面的内容从生成的 .txt 文件中提取：build#、branch、revision#。

# jsf-2 - f:param 到复合组件

> ID：10884447
> 
> 赞同：2
> 
> 时间：2012-06-04T16:09:38.700
> 
> 标签：jsf-2, parameter-passing, facelets, composite-component

在 JSF2.1 复合组件中，如果我们尝试将 f:param 传递给复合组件（命令按钮）并在组件中接收为 editableValueHolder ，它似乎不起作用，

有任何想法吗？

```
 <mycomp id="button" outcome="newpage" >
    <f:param name="foo" outcome="bar" for="button"/>
  </mycomp>

 compositeComponent....
  <cc:interface>
    <cc:attribute name="action" targets="commandLink" required="true" />       
  </cc:interface>
  <cc:implementation>
    <h:commandLink id="commandLink"  action="#{cc.attrs.action}">

    </h:commandLink>
  </cc:implementation> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T16:39:54.947

使用[`<cc:insertChildren>`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/composite/insertChildren.html).

```
<h:commandLink ...>
    <cc:insertChildren />
</h:commandLink> 
```

# perl - 在 perl 测试中计划死亡

> ID：10884448
> 
> 赞同：5
> 
> 时间：2012-06-04T16:09:42.343
> 
> 标签：perl, unit-testing, testing

有没有办法为你期望死的 Perl 调用编写测试？我想验证某些调用是否会因输入格式错误而死亡。

```
sub routine_a {
   my $arg = shift;
   die if $arg eq 'FOO';
   print "routine_a: $arg\n";
}
sub routine_b {
   my $arg = shift;
   die if $arg eq 'BAR';
   print "routine_b: $arg\n";
}

sub test_all {
   assert( routine_a("blah") );
   assert( routine_b("blab") );
   assert_death( routine_a("FOO") );
   assert_death( routine_b("BAR") );
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-04T16:12:24.747

请参阅[测试::异常](http://search.cpan.org/perldoc?Test%3a%3aException)：

```
use Test::Exception;
dies_ok { $foo->method } 'expecting to die'; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-04T16:13:09.337

您将测试包装在一个`eval { ... }`块中并检查是否`$@`已设置。

```
eval { test_thats_supposed_to_fail() };
ok( $@ , "test failed like it was supposed to" ); 
```

# javascript - 将 javascript 代码转换为 jQuery

> ID：10884455
> 
> 赞同：0
> 
> 时间：2012-06-04T16:10:17.960
> 
> 标签：javascript, jquery, internet-explorer

我想将此 javascript 代码更改为 jQuery 代码，但由于某种原因，当我使用 ID 正常定位它时，它不起作用。

Javascript代码：

```
scroll(xpos, ypos) { 
     document.getElementById('content_section').scrollTop=xpos;
} 
```

jQuery代码（我写的）：

```
scroll(xpos, ypos) { 
     $('#content_section').scrollTop(); 
} 
```

我做错了什么？我需要它在 Internet Explorer 上工作。

对于我得到的一些答案，我尝试添加 scrollTop(xpos); 它仍然无法正常工作，请记住 IE 问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T16:13:41.237

```
 $('#content_section').scrollTop(xpos); 
```

因为`scrollTop()`将参数作为滚动目标。

### 更多详情

`.scrollTop()`没有参数就像 getter 方法一样工作，这意味着

```
 $('#content_section').scrollTop(); // without argument 
```

会给你当前的滚动位置`#content_section`。

但是通过参数它充当一个setter方法，这意味着

```
 $('#content_section').scrollTop(xpos); // with argument 
```

将设置为`#content_section`您通过参数传递的位置。

### 根据您的编辑

```
function scroll(xpos, ypos) { 
     // you need to set argument xpos
     $('#content_section').scrollTop(xpos); 
} 
```

可能你可以试试

```
function scroll() {
   $('#content_section').scrollTo({left: xpos, top: ypox}, 400);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T16:14:23.280

你有没有在 jQuery 方法中添加 xpos 的值：

```
$('#content_section').scrollTop(ypos); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T16:14:39.490

我在 IE8 中测试了以下代码并且工作正常。请看一下。

```
<script type="text/javascript">
    function scroll(xpos, ypos) {
        $('#content_section').scrollTop(ypos);
    }
</script>

<form id="form1" runat="server">
    <input type="button" id="btn" value="scroll" onclick='scroll(0,0);' />
    <div id="content_section" style="overflow: auto; height: 60px; width: 60px;">
        a<br /> a<br /> a<br /> a<br /> a<br /> 
        a<br /> a<br /> a<br /> a<br /> a<br />  a<br />
    </div>
</form> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T16:15:19.950

```
$('#content_section').scrollTop(); 
```

这只返回元素的位置。如果你想设置它只是使用。

```
 $('#content_section').scrollTop(xpos); 
```

xpos 当然是到页面顶部的距离。

编辑：

```
function scroll(xpos, ypos) { 
     // you need to set argument xpos
     $('#content_section').scrollTop(ypos); 
}

$(document).ready(function(){
    scroll(0,150)
}); 
```

试试看它是否有效。请注意，元素必须是可滚动的，我不知道您在做什么，但当然如果整个页面小于窗口，则它不会滚动。

# javascript - 在 JavaScript 字符串中插入多个换行符（正则表达式）（CodeMirror）

> ID：10884456
> 
> 赞同：0
> 
> 时间：2012-06-04T16:10:19.920
> 
> 标签：javascript, regex, string, formatting, line-breaks

我有一些字符串，我想在某些点插入一些换行符。

我想出了一些后勤工作，但总的来说，我似乎无法解决这个问题，可能是因为我对正则表达式的经验有限。

基本上，我有一长串的 XML 标记，它们都在一行上。我想在某些点添加换行符以使数据更加格式化并且看起来更好。我正在使用[CodeMirror](http://codemirror.net/)在网页上显示此数据，但由于某种原因，它全部位于第 1 行。

所以我需要从这样的事情开始：

```
<Sample><Name></Name><PhoneNumber><AreaCode></AreaCode><Number></Number></PhoneNumber></Sample> 
```

对于这样的事情：

```
<Sample>
  <Name></Name>
  <PhoneNumber>
    <AreaCode></AreaCode>
    <Number></Number>
  </PhoneNumber>
</Sample> 
```

CodeMirror 将处理其余的格式设置，我需要做的就是使用正则表达式或某种循环在正确的位置插入换行符。标签将会或可以改变，所以我猜必须使用正则表达式。

我已经成功地用 \n 和 插入换行符，但似乎无法让正则表达式检测到正确的位置。

任何帮助将不胜感激。谢谢。

**更新** 我忽略了这一点，但括号实际上是作为 < 和 > 发送的

所以示例标签看起来像：

```
&lt;PhoneNumber&gt; 
```

或者

```
&lt;/PhoneNumber&gt; 
```

所以基本上需要`\n`在每个`&gt;`结束标签或包含子标签的开始标签之后插入一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T16:16:42.030

这里有龙。

我想向您指出一个[不久前回答的非常相似的问题](https://stackoverflow.com/questions/701166/can-you-provide-some-examples-of-why-it-is-hard-to-parse-xml-and-html-with-a-reg)，它很好地解释了为什么您不应该尝试自己解析 XML，除非您真的知道自己在做什么。

如果您想获得漂亮的换行符之类的东西，请使用 XML 反序列化器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T16:16:12.337

试试这个`regex`模式：

```
 >\s*<(?!/) 
```

替换字符串：`>\n<`

### 更新：

```
&gt;\s*&lt;(?!/) 
```

# python - 自定义计时器以获取下一个开始时间/日期的秒数

> ID：10884459
> 
> 赞同：0
> 
> 时间：2012-06-04T16:10:50.093
> 
> 标签：python, date, time, timer

我有一个项目，我已经分配了一周中的某些日子来运行，而其他不包括在内的日子应该被跳过。例如：

营业日：周一 (0)、周二 (1)、周三 (2)、周四 (3)、周五 (4) 休息日：周六 (5)、周日 (6)

我在注册表中保存了几天的设置，当设置被拉出时，它们被他们的工作日编号引用。

如果我想让我的应用在周五 (4) 进入睡眠状态，并在周一 (0) 唤醒它，我该怎么做？我无法确定休息日是否会保持一致，可能是星期日/星期一休息而不是星期六/星期日。

理想情况下，我需要查看当前的工作日数，看看它是否在天数列表中，如果不是，让它计算直到第二天开始的秒数。

场景：

1.  我将脚本设置为在 6 月 8 日星期五睡觉，而星期六/星期日是休息日，我如何计算这两天的睡眠秒数，以便在 11 日星期一重新开始？

2.  我将脚本设置为在 6 月 6 日星期三睡觉，我需要它在 6 月 8 日星期五醒来，然后在星期五晚上将其关闭，以便在星期一早上重新开始。

因为天数是可变的，所以这个函数必须能够适应它；这就是我遇到问题的地方。

任何帮助将不胜感激，在此先感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T16:15:21.493

每天检查一次 - 如果今天不是 On 日，请继续睡觉直到明天。

或者

使用`cron`（或 Windows 任务计划程序）将程序安排到所需的日期。

或者

```
import datetime
from time import sleep

SECONDS_PER_DAY = 3600 * 24
DAILY_START_TIME = datetime.time(8,15)   # 8:15 am

def seconds(t):
    return 3600*t.hour + 60*t.minute + t.second

def now():
    t = datetime.datetime.now()
    return t.weekday(), seconds(t)

def load_run_days():
    # get data from registry
    return [1,1,1,1,1,0,0]

def days_until_next_run(today, run_days=None):
    if run_days is None:
        run_days = load_run_days()
    # rotate
    run_days = run_days[today+1:] + run_days[:today+1]
    # find next On day
    for days,_on in enumerate(run_days, 1):
        if _on:
            return days
    # no run day found?
    raise ValueError("No 'On' days found")

def sleep_until_next_run():
    today, elapsed = now()
    days_to_wait = days_until_next_run(today)
    sleep(-elapsed + days_to_wait*SECONDS_PER_DAY + seconds(DAILY_START_TIME))

def main():
    while True:
        try:
            sleep_until_next_run()
        except ValueError:
            break

        do_my_stuff()

if __name__=="__main__":
    main() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T16:20:15.570

```
# Assume this is retrieved from registry
runningOn[0] = True # Monday
runningOn[1] = True
runningOn[2] = True
runningOn[3] = True
runningOn[4] = True
runningOn[5] = True
runningOn[6] = True # Sunday

# Get current day of week
import datetime
currentDayOfWeek = datetime.datetime.now().weekday()

# How much time should we sleep?
sleepDays = 1 # at least a day
for i in range(1, 6):
    if runningOn[(i + currentDayOfWeek) % 7]:
        break
    sleepDays += 1

# Run code, if necessary
if runningOn[currentDayOfWeek]:
    doWhatever()

# Sleep
sleep(sleepDays * 24 * 3600) 
```

# java - Google App Engine - Servlet（错误：在方法测试中的分支目标 44 处期望堆栈图帧。）

> ID：10884461
> 
> 赞同：2
> 
> 时间：2012-06-04T16:10:56.063
> 
> 标签：java, eclipse, google-app-engine, servlets, cloud

嗨，我`Servlet`在 Eclipse 上的一个新的 Google App Engine (SDK 1.6.6) 项目中有以下内容：

```
package test;

import java.io.IOException;
import java.io.PrintWriter;

import javax.servlet.http.*;

@SuppressWarnings("serial")
public class TestStorageServlet extends HttpServlet {
    public void doGet(HttpServletRequest req, HttpServletResponse resp)
            throws IOException {
        resp.setContentType("text/plain");
        PrintWriter writer = resp.getWriter();
        try {
            writer.write("Hello");
        } catch (Exception ex) {
            writer.write("Error: " + ex.getMessage());
        } finally {
             writer.close();
        }
    }
} 
```

这样的 servlet 在 Tomcat（作为普通的 Java Web 项目）上运行良好，但在 Google App Engine 项目中我面临以下 500 错误：

```
HTTP ERROR 500

Problem accessing /teststorage. Reason:

    Expecting a stackmap frame at branch target 44 in method test.TestStorageServlet.doGet(Ljavax/servlet/http/HttpServletRequest;Ljavax/servlet/http/HttpServletResponse;)V at offset 25
Caused by:

java.lang.VerifyError: Expecting a stackmap frame at branch target 44 in method test.TestStorageServlet.doGet(Ljavax/servlet/http/HttpServletRequest;Ljavax/servlet/http/HttpServletResponse;)V at offset 25
    at java.lang.Class.getDeclaredConstructors0(Native Method)
    at java.lang.Class.privateGetDeclaredConstructors(Class.java:2404)
    at java.lang.Class.getConstructor0(Class.java:2714)
    at java.lang.Class.newInstance0(Class.java:343)
    at java.lang.Class.newInstance(Class.java:325)
    at org.mortbay.jetty.servlet.Holder.newInstance(Holder.java:153)
    at org.mortbay.jetty.servlet.ServletHolder.initServlet(ServletHolder.java:428)
    at org.mortbay.jetty.servlet.ServletHolder.getServlet(ServletHolder.java:339)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:487)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
    at com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:35)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:60)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:122)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:97)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:78)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:369)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:547)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:212)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)
Powered by Jetty:// 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T17:13:35.697

看来您正在使用 JDK7 进行编译。[http://java.dzone.com/articles/javalangverifyerror-expecting](http://java.dzone.com/articles/javalangverifyerror-expecting)

尝试切换到JDK6。

**更新**：这个答案现在已经过时了，不再相关了。jdk7 的解决方案似乎是添加`-XX:-UseSplitVerifier`到您的 JVM 参数中。

有关更多信息，请参阅此问题：[为什么从 Eclipse 运行 Google App 时出现以下错误？](https://stackoverflow.com/questions/7936006/why-am-i-getting-the-following-error-when-running-google-app-from-eclipse)

# c# - MVVM 视图模型参考视图

> ID：10884462
> 
> 赞同：2
> 
> 时间：2012-06-04T16:10:57.587
> 
> 标签：c#, wpf, mvvm

我需要使用 mvvm 模式。我知道视图模型不应该关心我正在阅读的视图。结果我不知道如何解决这个问题：

我有一个 dll，它基本上将文本框和列表视图转换为自动完成控件：

```
SomeDll.InitAutocomplete<string>(TextBox1, ListView1, SomeObservableCollection); 
```

无论如何，我不知道如何使用 mvvm 模式从视图模型中调用该方法。如果我在视图中引用控件，我将违反规则。

我是 MVVM 模式的新手，我的公司要求我遵循它。解决这个问题的最合适的方法是什么？

我知道我可以通过将整个视图作为构造函数参数传递给视图模型来解决它，但这将完全破坏 mvvm 模式，因为我需要在视图中引用两个控件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T16:14:26.120

你在这里做的是一个纯粹的视图问题，所以我建议在视图中做它（即代码隐藏）。视图知道 VM 及其可观察集合，那么为什么不让后面的代码进行此调用呢？

（我还建议您查看是否可以获得“SomeDll”的非代码/XAML API，但我不知道您对此有多少控制权）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T16:15:42.890

这里我要指出两点——

首先，这实际上是所有视图层代码。因此，使用后面的代码不一定违反 MVVM - 如果有必要，您不会通过在后面的代码中包含一些代码来桥接 View->ViewModel 层。

话虽如此，这通常以两种方式之一更优雅地处理 -

1.  You could wrap this functionality into a new control - effectively an `AutoCompleteTextBox` control. This would allow you to include the "textbox" and "listview" visual elements into the control template, and bind to the completion items within Xaml.

2.  You could turn this into an attached property (or Blend behavior), which would allow you to "attach" it to a text box, and add that functionality (all within xaml). The items collection would then become a binding on the attached property (or behavior).

# iis - IIS URL 仅重写根目录

> ID：10884464
> 
> 赞同：1
> 
> 时间：2012-06-04T16:11:10.333
> 
> 标签：iis

我有 2 个 URL [http://test.mysite.com](http://test.mysite.com) (1) 和 [http://test.mysite.com/app](http://test.mysite.com/app) (2)

当 (2) 不应该被重定向时，我想将请求重定向到 (1) 到 www.othersite.com。

是否可以使用正则表达式进行 url 重写？

br

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-07-18T14:08:02.403

是的，可以使用 URL 重写模块。您的规则如下所示：

```
<rule name="Redirect non app" stopProcessing="true">
    <match url="^app(.*)" negate="true" />
    <action type="Redirect" url="http://www.othersite.com{REQUEST_URI}" />
</rule> 
```

# apache - 使用 .htaccess 美化 URL

> ID：10884466
> 
> 赞同：2
> 
> 时间：2012-06-04T16:11:30.473
> 
> 标签：apache, .htaccess, mod-rewrite

我有这个链接 `http://xxxx.com/yyyy/index.php?class=Applications&function=create`

我想让它看起来像这样

`http://xxxx.com/yyyy/create`

我知道我必须使用

重写引擎开启

重写规则 ....

但由于我是新手，我不知道如何格式化它..

```
DirectoryIndex index.php order deny,allow Options +FollowSymLinks -MultiViews

 RewriteEngine On RewriteBase /
 RewriteRule ^(XXXXXXXX)/(aaaa)/?$ $1/index.php?class=Applications&function=$2 [L,NC,QSA] 
RewriteRule ^(XXXXXXXX)/(bbbb)/?$ $1/index.php?class=Applications&function=$2 [L,NC,QSA] 
RewriteRule ^(XXXXXXXX)/(cccc)/?$ $1/index.php?class=Applications&function=$2 [L,NC,QSA] 
RewriteRule ^(XXXXXXXX)/(dddd)/?$ $1/index.php?class= test&function=$2 [L,NC,QSA] 
RewriteRule ^(yyyy)/index\.php$ $1 [L,NC]  #this one is not working... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T19:01:22.030

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteRule ^(yyyy)/(create)/?$ $1/index.php?class=Applications&function=$2 [L,NC,QSA] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T16:15:06.243

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /yyyy/
    RewriteRule create index.php?class=Applications&function=create
</IfModule> 
```

# javascript - Pass an argument as a reference to get a JSON property

> ID：10884468
> 
> 赞同：1
> 
> 时间：2012-06-04T16:12:02.527
> 
> 标签：javascript, json, facebook-javascript-sdk

I'm working on a facebook app with JS SDK...

I want to create a function that makes an API call to the Graph API:

This is what I got:

```
function a(reference){
    FB.api('/me', function(respond){            
         var it = respond.reference[0].name;
         alert(it);
    });
} 
```

I try executing it this way but it doesn't work.

```
a("inspirational_people"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T16:39:50.433

So you’re feeding the text string "inspirational_people" into your function, and you want to access a property of the response object having that very name?

That’s quite easy, basic JavaScript syntax: Every property that you can access via `object.propertyName` you can also access as `object["propertyName"]`.

So in your case, since you want to access `response.inspirational_people[0].name`, it’s `response[reference][0].name` – the actual string value of *reference* is evaluated at runtime, and you should end up having what you wanted.

# javascript - 有没有办法停止 dojo onBlur 事件处理程序中的所有其他事件？

> ID：10884471
> 
> 赞同：1
> 
> 时间：2012-06-04T16:12:17.527
> 
> 标签：javascript, dojo, dom-events

也许我走错了路...

**设置：** 我有一个相当复杂的完整的 dojofied Web 应用程序。这个问题的重要部分是在 a 的中心区域有一个较长的表格，`dijit.layout.BorderContainer`带有导航树和其他区域的一些操作按钮。

**我想要做什么：** 如果用户确实输入了数据并且没有保存，如果他要离开表单，他们应该会收到一条警告消息（如果他离开，点击“新元素”按钮，......）。为了获得更好的用户体验，我想提供一个带有“保存”、“无论如何离开”、“取消”选项的模式对话框。可能的想法是使用表单的 onBlur 事件，停止所有其他事件（很可能是某个其他小部件上的 onClick），检查更改，如果有更改，则显示对话框，否则让其他事件继续。我不想为所有非表单活动元素添加 checkChanges 方法！

对于第一次测试，我只是试图阻止这些事件......

**这有效**

```
<div id="formArea" dojoType="dijit.form.Form" encoding="multipart/form-data" action=""  class="ContentPane" region="center">
   <script type="dojo/connect" event="onBlur" >
      alert("I don't think so");
    </script>
 </div> 
```

...但它很丑，我不能轻易继续

**这不**

```
<div id="formArea" dojoType="dijit.form.Form" encoding="multipart/form-data" action=""  class="ContentPane" region="center">
   <script type="dojo/connect" event="onBlur" args="e">
      console.log("blur"); // ok
      e.preventDefault();//event.stopt(e)//return false //<--neither of these
    </script>
 </div> 
```

问题是，如果我单击表单外部的按钮，则会`onBlur`触发，但我无法停止`onClick`按钮上的按钮。我知道这`onBlur`不会提供事件对象 - 所以`e.something`不能真正工作......有没有办法捕捉`onClick`另一个元素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T12:32:51.310

`onBlur`如果未保存数据，则暂停表单中的[按钮事件侦听器。](http://livedocs.dojotoolkit.org/dojo/on#pausable-function)

看看它在行动：http: [//jsfiddle.net/phusick/A5DHf/](http://jsfiddle.net/phusick/A5DHf/)

你有一些按钮事件监听器，通过`on.pausable(node, event, callback)`而不是注册它们`on()`：

```
var b1Handler = on.pausable(button1Node, "click", function() {
    console.log("b1.onClick");        
});

var b2Handler = on.pausable(button2Node, "click", function() {
    console.log("b2.onClick");        
}); 
```

将处理程序收集到一个数组中：

```
var handlersToPause = [b1Handler, b2Handler]; 
```

添加`onBlur`事件监听器：

```
on(form, "blur", function(e) {

    if (this.isDirty()) {
        // if data are not saved, pause button event listeners
        handlersToPause.forEach(function(handler) {
            handler.pause();
        });
        // display modal dialog here     
    }            
}); 
```

添加例如`onFocus`事件侦听器以恢复按钮事件侦听器：

```
on(form, "focus", function(e) {
    handlersToPause.forEach(function(handler) {
        handler.resume();            
    });
}); 
```

请注意，这`handler.pause()`是暂停`onclick`侦听器，而不是事件。该`onclick`事件在 中等待，`Event queue`因此在 的执行时间内无法访问`onblur`。

我会制定一些更强大的解决方案，但这很快就能回答你的问题。无论如何，看看`dojo/aspect`它的[`around`建议](http://livedocs.dojotoolkit.org/dojo/aspect#around)来调用您的*checkChanges*而无需更改*所有非表单活动元素。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T10:45:00.577

只有 afaik`confirm('question?')`会像那样“死锁”你的页面事件。

不过，我已经进行了类似的设置，但我解决此问题的方式（除非用户在地址栏中输入 url 并按回车键）是在单击导航树时弹出对话框，将用户发送到新视图。考虑：

```
----------------------------------------
| Nav 1  |   Asset1 ( view controller )  |
| Nav 2  |   Asset2 ( hidden )           |
---------------------------------------- 
```

导航 1 是默认的加载视图，资产 1 已加载，包含“设置页面”表单或类似表单，并且可以更改。诀窍是，Asset1 和 Asset2 是从 AbstractAsset 派生的，而 AbstractAsset 又是一个简单的 ContentPane 扩展。

在 AbstractAsset 中是一个“必须覆盖功能”的函数，称为`isDirty`

```
var Viewcontroller = declare("AbstractAsset", [dijit.ContentPane], {
       isDirty: function() { return false; }
});

declare("Asset1", [Viewcontroller], {

startup: function() {
  // sets up form
  ...
  // and references inputfields to 'this'
  this.inputfields = this.form.getChildren();

  // and saves (clones) the state of each field
  var self = this;
  this.inputfields.forEach(function(inputWidget) {
     self.states[inputWidget.id] = inputWidget.get("value");
  });
},
isDirty: function() {
  var self = this;
  var dirty = false;
  this.form.getChildren().some(input) {
     if(self.states[input.id] != input.get("value")) {
        dirty = true;
        return false; // breaks .some loop
     }
     return true;
  });
  return dirty;
}

}) 
```

然后，每次导航点击都必须调用当前可见的视图控制器的 isDirty 函数才能继续。假设用户单击导航树 (dijit.Tree) 行节点*Nav 2*。

```
var navigation = dojo.declare("NavigationController", [dijit.Tree], {
 currentView : null,
 onLoad: function() {
   // start Asset1 in viewNode by default
   this.currentView = new Asset1({ }, this.viewNode); 
 },
 onClick : function() {
    if(this.currentView.isDirty()) alert("I Dont Think So");
    else {
       this.loadFunction(this.model.selection.getSelected());
    }
 }

}); 
```

这是实现卸载检查的总体思路，您需要通过“主应用程序控制器”挂钩任何 onClick 事件以确定应该发生什么。[检查](https://github.com/mschr/oocms/blob/master/admin/include/application.js)用作 cms 导航控制器的此应用程序及其[page.js:587](https://github.com/mschr/oocms/blob/master/admin/include/page.js)以获取 isDirty 示例

# sql-server-2008 - 是否需要将 2 个查询提交到数据库才能使用 EF / Linq to Entities 获取总计数和分页部分？

> ID：10884483
> 
> 赞同：3
> 
> 时间：2012-06-04T16:12:51.037
> 
> 标签：sql-server-2008, entity-framework-4, linq-to-entities, pagination, entity-framework-4.2

> **可能重复：**
> [在实体框架 4.1 中查询数据页面并获取总数的更好方法？](https://stackoverflow.com/questions/7767409/better-way-to-query-a-page-of-data-and-get-total-count-in-entity-framework-4-1)

在使用 EF / LINQ to 实体实现分页时，我熟悉使用`Skip()`并`Take()`决定要显示哪个分页部分。我也熟悉`Count()`在调用之前使用`Skip()`或`Take()`获取被分页的（非分页）结果的总数。

我的问题是，这是否总是必须最终以 2 个单独的查询被发送到数据库？我认为是的，因为我们需要先调用 Count() 来获取总数 ( `SELECT COUNT(*) FROM...`)，然后使用 Skip/Take 扩展表达式树，然后再次调用以获取实际数据 ( `SELECT * FROM...`)。

我隐约记得读过 SQL 2k8 中的一个技巧，该技巧使总行计数变得更容易，但我怀疑 EF / LINQ to Entities 是否支持此提供程序功能。只是问这个问题，看看是否有人知道如何将这些整合到一个数据库中。

# z3 - Z3_test_1.exe[2448] Microsoft .net 框架中未处理的异常

> ID：10884486
> 
> 赞同：0
> 
> 时间：2012-06-04T16:13:12.040
> 
> 标签：z3

我在Visual Studio 2010（版本：10.0.30319.1 RTMREL）中用C#语言编写了以下程序，.net框架的版本是4.0.30319 RTMREL。编译时没有错误或警告，但在运行程序时会抛出异常。例外是“Z3_test_1.exe[2448] unhandled exception occurred in Microsoft .net framework”，其中 Z3_test_1.exe 是程序文件名。我使用的 Z3 证明器是 Z3 4.0 版本，在程序中我使用的是 Microsoft.Z3.dll 而不是 Microsoft.Z3V3.dll。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Microsoft.Z3;
//using Microsoft.Z3V3;

namespace Z3_test_1
{
    class Program
    {
        static void Main(string[] args)
        {
                using (Context ctx = new Context())
                {
                    RealExpr c = ctx.MkRealConst("c");
                    BoolExpr Eqzero = ctx.MkGt(c,ctx.MkReal(0));    
                    BoolExpr Gezero = ctx.MkGe(c,ctx.MkReal(0));
                    BoolExpr Lttwo = ctx.MkLt(c,ctx.MkReal(2));
                    BoolExpr Gtthree = ctx.MkGt(c,ctx.MkReal(3)); 
                    BoolExpr b1 = ctx.MkBoolConst("b1");
                    BoolExpr b2 = ctx.MkBoolConst("b2");
                    BoolExpr b3 = ctx.MkBoolConst("b3");
                    BoolExpr b0 = ctx.MkBoolConst("b0");   

                    RealExpr[] lamb=new RealExpr[1];
                    lamb[0]=ctx.MkRealConst("lamb");
                    BoolExpr  temp=ctx.MkAnd(ctx.MkGt(lamb[0],ctx.MkReal(0)),ctx.MkEq(b0,ctx.MkTrue()),ctx.MkEq(b1,ctx.MkTrue()),ctx.MkGe(ctx.MkAdd(c,lamb[0]),ctx.MkReal(0)),ctx.MkLe(ctx.MkAdd(c,lamb[0]),ctx.MkReal(3)),ctx.MkGe(c,ctx.MkReal(0)),ctx.MkLe(c,ctx.MkReal(3)));   
                    BoolExpr exist = ctx.MkExists(lamb, temp, 1, null, null, ctx.MkSymbol("Q2"),ctx.MkSymbol("skid2"));
                    Console.WriteLine(exist.ToString());
                    Solver s1 = ctx.MkSolver();
                    s1.Assert(exist);
                    if (s1.Check() == Status.SATISFIABLE){
                        Console.WriteLine("get pre");
                        Console.Write(s1);
                    }
                    else
                    {
                        Console.WriteLine("Not reach");
                    }
                    Console.ReadKey();
                }   

            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T17:32:51.740

我试图重现你的错误。测试对我来说很好。我怀疑这与 Leo 指出的编译问题相同，因为它对我有用。微妙的问题是，如果您从 x64 环境或另一轮环境中引用 x86 程序集，则开始发生运行时错误。万无一失的方法是在传递给编译器 (csc.exe) 的参数中添加 /platform 指示。

# c - c的股票信息数据结构？

> ID：10884491
> 
> 赞同：0
> 
> 时间：2012-06-04T16:13:33.470
> 
> 标签：c, data-structures

我是 C 的新手（不到一周），并且正在尝试找出一种更有效的检索数据的方法。基本上想象我有几条股票数据：股票代码、价格、变化。

到目前为止，我的方法是将所有数据放入 3 个数组中。如果我想要 IBM 的价格，我会搜索代码数组并获取索引位置，然后从价格数组中获取该位置。它工作得很好，但是因为我做了很多查找并且我的数据没有改变，所以我想知道是否有更有效的方法来做到这一点？

我试图寻找一个字典/哈希图来存储 IBM 作为键和一组价格/变化作为值，但我似乎无法弄清楚如何在 C 中做到这一点。如果可能的话，有一个简单的方法去做这个？我正在开发一个不同的程序，并且真的不想学习如何从头开始创建自己的程序（尽管如果必须，我肯定会处理它）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T16:20:10.767

试试这个：[http ://utash.sourceforge.net/](http://uthash.sourceforge.net/)

首页上的示例几乎是不言自明的。

```
struct Stock {
   float price, change;
   char name[3];
   UT_hash_handle hh;
};

struct Stock * stocksHash = NULL;    
struct Stock * stockItem;
HASH_ADD_STR(stocksHash, name, stockItem );
HASH_FIND_STR(stocksHash, "IBM", stockItem );

//edit
void new_stock(struct Stock * stocksHash, char *name, float price, float change) {
    struct Stock *s;

    s = malloc(sizeof(struct Stock));
    strncpy (s->name, name, 3);
    s->price = price; s->change = change;
    s->id = user_id;
    HASH_ADD_STR( stocksHash, name, s );  
}

void update_stock (struct Stock * stocksHash, char *name, 
                   float price, float change) {
    struct Stock *s;
    HASH_FIND_STR (stocksHash, name, s);
    if (s) {
        s->price = price; s->change = change;
    }
} 
```

# java - 如何让 org.w3c.dom.Document 安静下来？

> ID：10884492
> 
> 赞同：3
> 
> 时间：2012-06-04T16:13:34.827
> 
> 标签：java, xml, dom

我有以下Java方法：

```
private static Document documentFromFile(final File xmlFile)
{
    Document document = null;
    try
    {
        DocumentBuilderFactory docBuilderFactory = DocumentBuilderFactory
            .newInstance();
        DocumentBuilder docBuilder = docBuilderFactory
            .newDocumentBuilder();
        document = docBuilder.parse(xmlFile);
        document.getDocumentElement().normalize();
    }
    catch(Exception exc)
    {
        // Handle exception...
    }

    return document;
} 
```

在我的测试方法中，如果我将此方法传递给格式错误的 XML 文件，我会在控制台上得到各种错误输出：

> [致命错误]：1：1：序言中不允许内容。
> 
> [致命错误]：1:1：文件过早结束。

我认为罪魁祸首是`docBuilder.parse(xmlFile)`。我希望能够禁用此默认输出并“静音”文档构建器，并且我看不到此对象上允许我执行此类操作的任何 setter 方法。我在这里有补救措施还是我被困住了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T01:53:40.340

使用[DocumentBuilder.setErrorHandler](http://docs.oracle.com/javase/6/docs/api/javax/xml/parsers/DocumentBuilder.html#setErrorHandler%28org.xml.sax.ErrorHandler%29)设置`ErrorHandler`. 不要被包名弄糊涂了。即使它说“org.xml.sax”，它也是您想要的。我认为您可以只使用 DefaultHandler，因为 Javadoc 说它会忽略错误和警告。如果它仍然太冗长，您可以提供自己的实现。

```
DocumentBuilder db = DocumentBuilderFactory.newInstance().newDocumentBuilder();
db.setErrorHandler(new DefaultHandler()); 
```

# c++ - 从 WinPE 检测 BIOS：Legacy 或 UEFI，使用 vbs // 将结果从 .exe 输出到 .txt

> ID：10884495
> 
> 赞同：2
> 
> 时间：2012-06-04T16:13:37.040
> 
> 标签：c++, legacy, bios, efi

这是我的场景：

我有一台具有 2 种可能配置的服务器：不需要特殊处理的 2 TB 硬盘或需要 UEFI BIOS 和 GPT 分区来启动操作系统的 3 TB 硬盘。

我正在尝试创建一个能够检测 BIOS 是“旧版”还是“UEFI”并相应地执行部署脚本的单一安装 USB 密钥。

我努力寻找可以区分但无济于事的 WMI。

我最接近解决方案的是这篇文章： [http ://social.technet.microsoft.com/Forums/en-US/winserverManagement/thread/6cbb488d-3062-4aad-b712-7a9e4d045b13](http://social.technet.microsoft.com/Forums/en-US/winserverManagement/thread/6cbb488d-3062-4aad-b712-7a9e4d045b13)

detectefi.exe 在检测 BIOS 类型方面效果很好，但我无法输出它的结果，所以我不知道如何使用它。

我有两个问题：

1.  是否有任何 WMI 可以用来区分我的 2 个设置。

2.  （如果问题 1 的答案是否定的）有没有办法将 C++ 编译的 .exe 文件的结果输出到 .txt 或任何其他形式并利用结果（我根本没有 C++ 技能）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T20:22:14.543

如果有人对我如何解决问题感兴趣。我刚刚创建了一个链接到 .exe 的 vbs

```
 Set objShell = CreateObject("WScript.Shell")
Set objWshScriptExec = objShell.Exec("detectefi.exe")
Set objStdOut = objWshScriptExec.StdOut

dim isLegacy
dim isUefi

isLegacy = false
isUefi = false

While Not objStdOut.AtEndOfStream
   strLine = objStdOut.ReadLine

   if strLine = "Legacy" then
      isLegacy = true
   end if

   if strLine = "UEFI" then
      isUefi = true
   end if
Wend

if isLegacy then
   wscript.echo "this is legacy"

    set objShell = Wscript.CreateObject("WScript.Shell")
    objShell.Run "2TBdeploy.cmd",1,True
    set objShell = Nothing

end if

if isUefi then
   wscript.echo "this is UEFI"

    set objShell = Wscript.CreateObject("WScript.Shell")
    objShell.Run "3TBdeploy.cmd",1,True
    set objShell = Nothing

end if 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-14T16:26:11.850

这很容易检测到，无需使用任何特殊实用程序并使用 Windows 操作系统原生的命令行。

`BCDEDIT /ENUM`将为您提供默认引导加载程序。这可以用来区分 UEFI 和 BIOS 机器，如下所示：

```
path                    \EFI\Microsoft\Boot\bootmgfw.efi 
```

然后，您可以使用`oShell.Exec`上述方法处理输出。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-07-07T06:54:40.840

导入操作系统

if os.path.exists("/sys/firmware/efi"): print "uefi" else: print "bios"

# qt - QImage 崩溃程序上的 drawText()

> ID：10884496
> 
> 赞同：3
> 
> 时间：2012-06-04T16:13:37.390
> 
> 标签：qt, qimage

我在 uint8_t 缓冲区中有一个图像，我正在尝试使用 QImage 作为包装器在图像上写入文本。我使用 drawLine() 没有问题，但 drawText() 使程序崩溃。下面的代码是 boost 线程的一部分，我想在每个图像迭代函数时将文本写入其中。Qt 中是否有我不知道的错误？

```
uint8_t *frameBuffer; // this contains image pixels
QImage img(frameBuffer, sizeX, m_sizeY, QImage::Format_RGB888);

QPainter p(&img);

p.setPen(QPen(Qt::green));
p.setFont(QFont("Times", 10, QFont::Bold));
p.drawLine(img.rect().bottomLeft().x(), img.rect().bottomLeft().y()-10,
           img.rect().bottomRight().x(), img.rect().bottomRight().y()-10);  //works!

p.drawText(img.rect(), Qt::AlignCenter, "Help");  //crashes program 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T19:08:39.810

我的项目设置为 QCoreApplication（我没有 GUI）。将其更改为 QApplication 就可以了！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T17:01:04.747

只是一个猜测......（我以前从未见过这个错误，但线程上有其他字体问题。）

在 Qt 中，后台线程上的字体渲染可能有点不稳定，这取决于它是如何编译的。检查系统上[QFontDatabase::supportsThreadedFontRendering](http://qt-project.org/doc/qt-4.8/qfontdatabase.html#supportsThreadedFontRendering)的值。

注意文档：

> 如果在 GUI 线程之外支持字体渲染，则返回 true，否则返回 false。换句话说，返回值 false 意味着所有 QPainter::drawText() 在 GUI 线程之外的调用都不会产生可读的输出。

# javascript - 光滑的网格映射

> ID：10884498
> 
> 赞同：0
> 
> 时间：2012-06-04T16:13:41.910
> 
> 标签：javascript, jquery, slickgrid

我正在向一些单元格添加样式。但是在排序或过滤时，样式仅固定为单元格编号，而不是实际值。

例如：

如果第 8 行的 2 号单元格被赋予样式。在排序时，该单元格移动到第 2 号。虽然，它不会改变样式单元格的位置。第 8 行的第 2 单元格仍然是样式。

我知道有将 id 映射到行的函数，反之亦然。谁能告诉我如何实际使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T19:27:28.930

我想出了解决办法。DataView 中有以下功能：

```
dataView.getRowById(rowID); 
```

这将显示当前行。如果它被过滤器隐藏，那么它将是未定义的。

# ruby-on-rails - Rails 3\. 如何通过另一个模型找到关联模型？

> ID：10884501
> 
> 赞同：0
> 
> 时间：2012-06-04T16:13:47.750
> 
> 标签：ruby-on-rails, ruby

我有这些模型：费用、ScheduledCourses 和 ScheduledSessions。

```
scheduled_courses has_many scheduled_sessions
scheduled_sessions belongs_to scheduled_courses

expenses has_many scheduled_sessions
scheduled_sessions belongs_to expenses 
```

我需要找到与特定 schedule_course 相关的所有费用。但是费用有一个 schedule_session_id 而不是 schedule_course_id。

我怎么能那样做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-04T16:17:11.203

预定课程：

```
has_many :expenses, :through => :scheduled_sessions 
```

# vim - 在 Vim 中移动文件

> ID：10884520
> 
> 赞同：23
> 
> 时间：2012-06-04T16:14:48.273
> 
> 标签：vim

有没有办法在 Vim 中移动文件？例如，我在 Vim 中打开了一个文件 foo/bar.txt。我知道移动此文件的两种方法：

第一个解决方案：

1.  删除缓冲区`:bd bar.txt`
2.  在外壳上执行移动`mv foo/bar.txt foo/bar2.txt`
3.  在 vim 中加载文件`:e foo/bar2.txt`

第二种解决方案：

1.  关闭 Vim，所以所有缓冲区都关闭了。
2.  在外壳上执行移动...
3.  启动 Vim 并加载文件。

但这两种解决方案都很尴尬。我知道，有一个用于重命名文件[vim-enuch](https://github.com/tpope/vim-eunuch)的插件，但是没有一种 Vim 方法可以执行这种基本功能吗？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-11-21T17:32:07.020

您还可以使用 netrw（默认文件资源管理器）重命名功能。

1.  打开netrw`:E`
2.  将光标移动到要重命名的文件所在的行，在本例中为 bar.txt 。`/`您使用 h,j,k,l 移动到有问题的文件，或者您可以使用(eg `/bar.txt`)搜索它
3.  打`R`。然后将提示您输入新的文件路径。完成输入文件路径后`<CR>`
4.  将光标移动到新文件并使用`<CR>`

虽然此解决方案可能不如使用 vim-eunch 快，但它确实允许您在重命名文件时查看项目的结构。这也将允许您一次移动多个文件。

进一步阅读运行`:help netrw-move`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-04T16:17:59.417

没有像这样移动文件的原子方式，但这应该很接近：

```
function! MoveFile(newspec)
     let old = expand('%')
     " could be improved:
     if (old == a:newspec)
         return 0
     endif
     exe 'sav' fnameescape(a:newspec)
     call delete(old)
endfunction

command! -nargs=1 -complete=file -bar MoveFile call MoveFile('<args>') 
```

现在你可以说：

```
:MoveFile file2.txt 
```

重命名为 file2.txt

```
:MoveFile %.0 
```

将 file2.txt 移动到 file2.txt.0

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-04T16:23:13.563

如果您在 bar.txt 缓冲区中：

```
:w bar2.txt
:!rm bar.txt 
```

如果*bar2.txt*已存在于当前目录中，请使用`:w!`.

# ruby-on-rails - 如何在没有引用的情况下将 ObjectID 存储在 MongoDb 中？

> ID：10884522
> 
> 赞同：1
> 
> 时间：2012-06-04T16:15:03.967
> 
> 标签：ruby-on-rails, mongoid

我有三个模型：

```
class User
  include Mongoid::Document
  field :name, :type => String

  has_many :comments
  embeds_many :posts
end

class Post
  include Mongoid::Document
  field :title, :type => String
  field :body, :type => String

  embeds_many :comments
  belongs_to :user
end

class Comment
  include Mongoid::Document
  field :text, :type => String

  belongs_to :user
  embedded_in :post
end 
```

我有这个错误：

```
Referencing a(n) Comment document from the User document via a relational association is not allowed since the Comment is embedded. 
```

好的，没错。但是我该如何存储，谁写了评论？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T18:08:10.837

评论中的`belongs_to`用户是什么把它扔掉了。只需使用普通字段来存储外键。

```
class Comment
  include Mongoid::Document

  embedded_in :post

  field :text, :type => String
  field :commenter_id
end 
```

# google-apps-script - 需要有关方法 setDataTable(table)、图表服务的文档

> ID：10884524
> 
> 赞同：1
> 
> 时间：2012-06-04T16:15:07.260
> 
> 标签：google-apps-script

在 GAS 中使用 Charts 服务时，您可以创建不同类型的图表，其中大多数有两种方法`setDataTable(...)`来推送数据：

```
method setDataTable(tableBuilder)
method setDataTable(table) 
```

对于第一个，您`DataTableBuilder`使用`Charts.newDataTable()`. 但是第二个对我来说没有足够的记录。

有谁知道传递给函数的对象**表的规范？**在我看来，它可以是数组或地图，但我没有成功使用它。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T20:20:43.233

第二种方法接收一个 DataTable，它只是调用 DataTableBuilder.build() 的结果。不幸的是，不可能构造一个可以接受的纯 JavaScript 对象，您需要使用 DataTableBuilder。

# facebook - 自动创建主题中心有哪些更好的方法

> ID：10884529
> 
> 赞同：0
> 
> 时间：2012-06-04T16:15:26.793
> 
> 标签：facebook, api, web-scraping, wikipedia, freebase

我希望为我的应用程序创建类似的东西，例如：

*   [http://www.facebook.com/pages/English-Language/106059522759137](http://www.facebook.com/pages/English-Language/106059522759137)
*   [http://www.freebase.com/view/en/barack_obama](http://www.freebase.com/view/en/barack_obama)

我可以使用 Freebase 数据或 Wikipedia 数据或任何其他数据，但我完全不知道如何开始使用 php 和 mysql 中的可用数据库转储。

请提出一些更好的方法来自动创建主题中心。

**更新：**

我决定下载 Freebase WEX，它为我提供了每个主题的 freebase guid/mid。我希望利用这些 id 通过 freebase API 获取整个主题中心信息，但我找不到这样做的方法，有什么建议吗？例子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T19:23:26.300

要创建带有主题页面的网站，您应该考虑以下任务：

1.  确定您的站点将涵盖哪些主题以及您希望建模的这些主题之间的哪些重要关系。
2.  [将这些主题](http://wiki.freebase.com/wiki/Data_linkage_guidelines)与 Freebase 和 Wikipedia 等外部数据集进行协调。
3.  决定哪些数据要本地存储在数据库中，哪些数据需要从外部源（如 API）动态提取。您应该在本地存储一些特定于您网站的数据，否则您的页面将看起来像垃圾邮件。
4.  为您的主题页面创建 URL 命名方案。
5.  为您的主题页面创建 HTML 模板，包括 Schema.org/RDFa 标记，以便您的主题在搜索中显示丰富的片段。

# sql-server - 我可以从 Postgres 复制到 MS SQL 吗？

> ID：10884535
> 
> 赞同：1
> 
> 时间：2012-06-04T16:15:49.740
> 
> 标签：sql-server, postgresql, replication

我将在生产中拥有一个 Postgres 数据库，但想使用 MS SQL（任何版本）进行报告。所以，我想在 MS SQL 从 postgres 订阅的地方设置复制。这可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-05T17:20:35.777

Microsoft 已弃用所有异构复制方案，他们现在[建议](http://msdn.microsoft.com/en-us/library/ms151149.aspx)使用 SSIS 和 CDC 构建解决方案。

我们使用 SSIS 将数据从 PostgreSQL 加载到我们的 SQL Server 报告数据库中，它运行良好，尽管由于（当时）开源提供程序的限制，我们不得不使用商业 OLE DB 提供程序。

实际上复制数据通常是容易的部分。大部分工作来自收集需求、理解数据、转换数据、实现日志记录和错误处理等。SSIS 可以立即为您做一些事情（例如日志记录），但我的一般建议是主要将其用作工作流工具以及使用最少的转换逻辑（例如数据类型转换）进行简单的数据复制。如果某些东西在 SSIS 中看起来太难或太笨拙，那么您可以将其放入存储过程或脚本中，然后从 SSIS 中调用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T11:39:48.937

我多年来一直在使用和关注 PostgreSQL，但不知道有这样的解决方案。如果存在，我担心它可能是复杂或脆弱的。我建议通过 cron 定期导出/导入。在导出和导入之间，您需要处理格式的转换步骤。

如果您的报告实际上发生在 MS Excel 或 MS Access 中，我建议您考虑通过[ODBC](http://psqlodbc.projects.postgresql.org/)将它们直接连接到 PostgreSQL 。

# ios - 如何将 NSURLIsExcludedFromBackupKey 与 Adob e Air 一起使用？

> ID：10884538
> 
> 赞同：2
> 
> 时间：2012-06-04T16:16:11.330
> 
> 标签：ios, flash, apache-flex, air, adobe

Apple 拒绝了我们的申请，因为我们将文件存储在 localStorage (/Documents) 下以供离线查看。这是消息的摘录，我们收到：

> 可以重新创建但必须保留以使您的应用程序正常运行的数据 - 或者因为客户希望它可以离线使用 - 应该使用“不备份”属性进行标记。对于 NSURL 对象，添加 NSURLIsExcludedFromBackupKey 属性以防止相应文件被备份。对于 CFURLRef 对象，使用相应的 kCFURLIsExcludedFromBackupKey 属性。

我们如何通过使用 Flex SDK 4.6 的 Adob​​e Air 做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T09:26:01.687

有一个本机扩展：[http ://www.jampot.ie/ane/ane-ios-data-storage-set-donotbackup-attribute-for-ios5-native-extension/](http://www.jampot.ie/ane/ane-ios-data-storage-set-donotbackup-attribute-for-ios5-native-extension/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-05T08:21:57.017

我知道这真的很老了，但万一其他人也有同样的问题……从 AIR 3.6 开始，不需要本机扩展来防止文件备份到云端。

File-Api 中有一个属性，称为`preventBackup`. 用法：

```
var localFolder:File = File.applicationStorageDirectory;
localFolder.preventBackup = true; 
```

# wordpress - Wordpress 导航删除容器

> ID：10884541
> 
> 赞同：0
> 
> 时间：2012-06-04T16:16:32.280
> 
> 标签：wordpress, navigation, containers

嗨，我对 wordpress 导航工具有疑问。我想要做的是删除包含类。

根据文档，通过设置 'container' => false 删除包含类。

但问题是当我这样做时，什么也没发生。

```
<?php wp_nav_menu( array( 'theme_location' => 'header-menu', 
                        'container' => false
                        ) ); ?> 
```

但是当菜单显示时，它仍然包含在标签内。

你们知道如何解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T16:21:56.023

我发现了问题。我忘了在functions.php和管理面板中设置标题菜单。

```
register_nav_menus(
    array(
      'header-menu' => __( 'Header Menu' ),
      'footer-menu' => __( 'Footer Menu' ),
    )
); 
```

确保同时使用两者，并且在管理面板中将菜单设置为正确的菜单容器。

# string - 如何将很长的案例模式拆分为多行？

> ID：10884542
> 
> 赞同：4
> 
> 时间：2012-06-04T16:16:35.823
> 
> 标签：string, bash, split, switch-statement

**如何在以下 bash 代码中拆分长 valueX 字符串？**

```
case "$1" in
    value1|value2|value3|...........more values..................| valueN)
        some_processing "$@"
        ;;
    ...
esac 
```

我正在寻找拆分成单独的行。像：

```
VAL+=value1
VAL+=value2
.... 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-04T16:25:36.310

从手册页：

> case 命令首先扩展单词，然后尝试依次将其与每个模式匹配，使用与路径名扩展相同的匹配规则[.]

换句话说，它是一个 glob 模式，而不是一个正则表达式。因此，您可以在模式标记之间使用 IFS。例如：

```
case "$1" in
    value1 | \
    value2 )
        :
    ;;
esac 
```

请注意，您*必须*使用反斜杠转义续行，这与管道符号将自动续行的通常情况不同。除此之外，您可以按照提示时的相同方式拆分线路。

# wolfram-mathematica - Mathematica 中三角函数和的系数

> ID：10884544
> 
> 赞同：-2
> 
> 时间：2012-06-04T16:16:39.467
> 
> 标签：wolfram-mathematica, binomial-coefficients

我想计算数学中的系数。例如，我编写了这段代码来查找 (a+b*cos(x))^4 中 cos(kx) 的系数，其中“a”和“b”是参数。

```
f[x_] := (a + b Cos[x])^4

f1[x_] := TrigReduce[f[x]]

g[x_, k_] := Coefficient[f1[x], Cos[k x]] 
```

它适用于 cos(k*x) 的系数，

例如 cos(2x) 的系数是

```
g[x,2]= 1/8 (24 a^2 b^2 + 4 b^4) 
```

但它不适用于常数（这里常数意味着独立于 cos(kx)。换句话说，只是带有数字和参数“a”和“b”的术语）。

我想编写代码来查找上述含义中的常量。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T02:08:41.520

Plugging `Coefficient[TrigReduce[(a + b*Cos[x])^4],Cos[2*x]]` into Wolfram|Alpha produced the output you wanted it to. This leads me to suggest that your problem *might* have to do with how the expression is being evaluated as opposed to a problem with how you are mathematically thinking about it.

I do not have access to a copy of Mathematica so can not test this, but I would try changing `:=` to `=` in the second line of code.

I would also try putting it all in one line as

```
g[x_, k_] := Coefficient[TrigReduce[(a + b Cos[x])^4], Cos[k x]] 
```

If that works, it is definitely something wrong with how/when Mathematica is assigning stuff.

See *[this link](http://reference.wolfram.com/mathematica/tutorial/ImmediateAndDelayedDefinitions.html)* for more information.

# asp.net - 在 WCF 和 Silverlight Http 客户端之间共享 ASP.NET 会话 ID

> ID：10884548
> 
> 赞同：0
> 
> 时间：2012-06-04T16:16:51.127
> 
> 标签：asp.net, wcf, silverlight

我有一个配置为使用 ASP.NET 会话状态的 WCF 服务。我已经使用 WPF 客户端测试了这个 WCF 服务，并且会话状态在不同的 Web 请求中保持不变。

现在我正在尝试从使用独立于浏览器的新 Http 堆栈的 Silverlight 应用程序中使用相同的 WCF 服务。我需要使用这个堆栈才能了解我们的 WCF 服务故障。我的问题是，在这种情况下，我们无法从响应中读取带有 ASP.NET_SessionId cookie 的 Set-Cookie 标头或在请求中设置 Cookie 标头。

这是 Silverligth 应用程序的绑定：

```
 <customBinding>
    <binding name="customHttpBinding_IBasoaWebService" sendTimeout="01:00:00">
            <binaryMessageEncoding />
      <httpCookieContainer />
            <httpTransport maxBufferSize="2147483647" maxReceivedMessageSize="2147483647" />
    </binding>
  </customBinding> 
```

这是 WCF 服务的绑定：

```
 <basicHttpBinding>
    <binding name="basicHTTP" closeTimeout="01:00:00" openTimeout="01:00:00"
        maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647"
        receiveTimeout="01:00:00" sendTimeout="01:00:00" allowCookies="false">
      <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647" maxArrayLength="2147483647"
        maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
      <security mode="None" />
    </binding>
  </basicHttpBinding> 
```

在 Silverlight 应用程序中，我们使用此代码读取响应中的 Set-Cookie 标头：

```
 IHttpCookieContainerManager cookieManager = channel.GetProperty<IHttpCookieContainerManager>();
            if (cookieManager.CookieContainer == null)
                cookieManager.CookieContainer = new CookieContainer();
            Uri applicationUri = new Uri(Application.Current.Host.Source, "../");
            string cookieString = cookieManager.CookieContainer.GetCookieHeader(applicationUri);
            ParseCookieString(cookieString); 
```

这是在请求中设置 ASP.NET 会话 ID cookie 的代码：

```
 IHttpCookieContainerManager cookieManager = channel.GetProperty<IHttpCookieContainerManager>();
            if (cookieManager.CookieContainer == null)
                cookieManager.CookieContainer = new CookieContainer();
            Uri applicationUri = new Uri(Application.Current.Host.Source, "../");
            Cookie cookie = new Cookie("ASP.NET_SessionId", aspNetSessionId);
            cookieManager.CookieContainer.Add(applicationUri, cookie); 
```

通过 Fiddler 检查交换的消息，我看到 WCF 服务在第一个响应中正确发送了 Set-Cookie 标头，但 Silverlight 无法读取它。我也尝试通过 CookieContainer 类在请求中设置 Cookie 标头，但没有运气。我在 Fiddler 中看不到它。

有人能给我一个关于我一定做错了什么的建议吗？

提前谢谢了。

何塞·安东尼奥·阿罗巴

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T22:13:03.670

在 Web 应用程序中，我使用 URI 来设置 SessionID。（我认为使用 WCF 服务是可能的）

在您的服务的 web.config 中，定义：

```
<system.web>
  <sessionState cookieless="true"></sessionState>
</system.web> 
```

或者

```
<sessionState cookieless="UseUri"></sessionState> 
```

sessionId 看起来像这样：

```
http://localhost:51358/(S(1wnqb23d2qe4blfxzukligdo))/default.aspx 
```

您可以在 URI 中获取和设置 SessionID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T16:06:09.940

最后，我已经能够找到解决此问题的解决方法。

`Cookie`标头未随请求一起发送的原因是我在`Cookie`对象中设置了错误的 Uri。如果我试图连接到`http://localhost:8080/Service`，似乎`Uri`提供的正确值是`http://localhost:8080`而不是`http://localhost:8080/Service`。

但是我仍然想知道如何读取`Set-Cookie`服务器发送的内容。我的解决方法包括在自定义 SOAP 标头中发送 ASP.NET 会话 ID 并在客户端中读取它，恕我直言，这是相当多余的。但它有效。

# c# - 日期时间转换为 FileTimeUtc

> ID：10884549
> 
> 赞同：0
> 
> 时间：2012-06-04T16:16:59.550
> 
> 标签：c#, datetime

我有一个 DateTime 变量定义为 DateTime.Now。我需要将其“转换”为 FileTimeUtc。我一定完全误解了这一点，因为我认为这会起作用：

```
DateTime RunTime;
RunTime = System.DateTime.Now.ToFileTimeUtc(); 
```

但我得到错误不能隐式地将类型 long 转换为 system.datetime。

有什么帮助吗？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T16:18:36.803

[DateTime.ToFileTimeUtc](http://msdn.microsoft.com/en-us/library/system.datetime.tofiletimeutc.aspx)返回 long，而不是`DateTime`. 从文档中：

> Windows 文件时间是一个 64 位值，表示自 1601 年 1 月 1 日 (CE) 协调世界时 (UTC) 午夜 12:00 以来经过的 100 纳秒间隔数。Windows 使用文件时间来记录应用程序何时创建、访问或写入文件。

这应该是：

```
long runTime;
runTime = System.DateTime.Now.ToFileTimeUtc(); 
```

如果您只想要当前的协调世界时，而不是*Windows 文件时间*，您可以使用：

```
DateTime runTime = System.DateTime.UtcNow; 
```

有关详细信息，请参阅[UtcNow](http://msdn.microsoft.com/en-us/library/system.datetime.utcnow.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T16:22:26.207

`ToFileTimeUtc()`返回一个 long，它表示自公元 1601 年 1 月 1 日 (CE) 协调世界时 (UTC) 午夜 12:00 以来经过的 100 纳秒间隔数。

[http://msdn.microsoft.com/en-us/library/system.datetime.tofiletimeutc.aspx](http://msdn.microsoft.com/en-us/library/system.datetime.tofiletimeutc.aspx)

.net 框架不支持将 long 隐式转换为 datetime。

如果您想要一个日期作为 UTC 使用`ToUniversalTime()` 或现在作为 UTC 使用`UtcNow`

[http://msdn.microsoft.com/en-us/library/system.datetime.touniversaltime%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/system.datetime.touniversaltime%28v=vs.100%29.aspx)

# facebook - 如何在 Plone 中使用 facebook 帐户进行身份验证

> ID：10884556
> 
> 赞同：2
> 
> 时间：2012-06-04T16:17:20.527
> 
> 标签：facebook, plone, janrain

我正在寻找一个现有的 Plone 插件，它允许 Facebook 用户在 Plone - 4.x 版中进行身份验证。有 plonesocial.auth.rpx 但它充满了错误并且在 Plone 4 中不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T00:41:39.520

在 Plone 4 中有一个 plonesocial.auth.rpx 的分支： [https ://bitbucket.org/domruf/plonesocial.auth.rpx](https://bitbucket.org/domruf/plonesocial.auth.rpx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-23T12:20:05.990

[https://github.com/RedTurtle/pas.plugins.velruse](https://github.com/RedTurtle/pas.plugins.velruse)

这个 Plone 插件允许您使用 Velruse 在 Plone 站点中启用社交网络用户的身份验证。

Velruse 是这样定义的 Pyramid 应用程序：

Velruse 是一组身份验证例程，提供统一的方式让网站用户向各种不同的身份提供者和/或各种不同的身份验证方案进行身份验证。

它在某些方面与 Janrain Engage 相似，只是它是开源的、可本地安装的，并且可轻松插入自定义身份提供者和身份验证方案。

——来自 Velruse 文档

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-04T16:23:53.753

我从未使用过它，但我认为[http://pypi.python.org/pypi/collective.facebook.accounts/1.0b2 可以满足](http://pypi.python.org/pypi/collective.facebook.accounts/1.0b2)您的需求

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T08:21:49.473

我们已经使用 Martin 书中的代码对 FaceBook 进行身份验证，效果很好。

我们在创建可配置的控制面板而不是硬设置 facebook-app 键方面做了一些工作。您可以查看以下代码：http: [//github.com/codesyntax/cs.auth.facebook](http://github.com/codesyntax/cs.auth.facebook)

我们在 Twitter 上做了类似的工作：http: [//github.com/codesyntax/cs.auth.twitter](http://github.com/codesyntax/cs.auth.twitter)

# android - ICS gui 视图大小错误

> ID：10884558
> 
> 赞同：2
> 
> 时间：2012-06-04T16:17:27.233
> 
> 标签：android, user-interface, android-4.0-ice-cream-sandwich

我正在构建一个应用程序，该应用程序会在某个时间出现一个弹出窗口，它会占用屏幕并暂停后台活动。在旧版本的 android 上，此弹出视图工作正常，但在 ICS 上，弹出窗口的顶部被切断。我已经尝试了很多方法来修复它，但它只会扰乱旧版本 Android 中的视图。有没有其他人有这样的错误？似乎 ICS 错误地计算了屏幕的大小，并将屏幕顶部设置得更高。

```
ViewGroup root = (ViewGroup) parent.getWindow().peekDecorView();
    ViewGroup group = (ViewGroup) root.getChildAt(0);
    int title = 0;
    if (group.getChildAt(0) instanceof ViewGroup)
        title += group.getChildAt(0).getTop(); 
```

这就是我如何确定屏幕顶部的位置。这适用于较旧的 Android，但不适用于 ICS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T16:27:31.630

我想说有一种更简单的方法来创建弹出窗口。此外，您的活动的顶部始终位于 y = 0。

# java - 在 google docs api 中导出文档时出错

> ID：10884559
> 
> 赞同：0
> 
> 时间：2012-06-04T16:17:31.687
> 
> 标签：java, oauth, google-docs, google-docs-api

我正在尝试检索这样的文档：

```
 client.setAuthSubToken(token);
  String contentUri = "https://docs.google.com/feeds/download/documents/Export?docID="+ entry.getDocId()
                            + "&exportFormat=txt&format=txt";

  MediaContent mc = new MediaContent();
  mc.setUri(contentUri);

  MediaSource ms = client.getMedia(mc);
  InputStream inStream = ms.getInputStream(); 
```

但是我收到下一个错误：

`com.google.appengine.repackaged.org.apache.http.impl.client.DefaultRequestDirector handleResponse ADVERTENCIA: Authentication error: Unable to respond to any of these challenges: {authsub=WWW-Authenticate: AuthSub realm="https://www.google.com/accounts/AuthSubRequest"}`

如果我的客户已通过身份验证，请不要这样做，希望有人可以提供帮助，在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T16:52:00.607

也许这会有所帮助：

1.  将**docId**参数替换为**id**参数

    ```
    contentUri = "https://docs.google.com/feeds/download/documents/export/Export?id=" + entry.getDocId() + "&exportFormat=txt&format=txt"; 
    ```

2.  直接使用获取uri的方法（推荐这个）

    ```
    String contentUri = ((MediaContent) entry.getContent()).getUri();
    contentUri = contentUri + "&exportFormat=txt&format=txt"; 
    ```

# asp.net-mvc-4 - 无法保存到 Azure 表

> ID：10884562
> 
> 赞同：1
> 
> 时间：2012-06-04T16:17:37.193
> 
> 标签：asp.net-mvc-4, azure-table-storage

当我`DataServiceRequestException`尝试将实体保存到天蓝色表时出现异常。它发生在这一行`_myContext.SaveChangesWithRetries();`我试图谷歌看看问题可能是什么。但找不到任何答案。

任何人都知道问题可能是什么？

**存储创建者**

```
public CloudTableClient GetMusicClient() {
      //retrieve connection string from settings
      CloudStorageAccount storageAccount = CloudStorageAccount.Parse(
          RoleEnvironment.GetConfigurationSettingValue("StorageConnectionString"));

      //create table client
      CloudTableClient tableClient = storageAccount.CreateCloudTableClient();

      //create table if doesn't exist
      string tableName = "music";
      tableClient.CreateTableIfNotExist(tableName);

      return tableClient;
} 
```

**网络API**

```
public Music PostMusic(string genre, string artist, string random)
{
    CloudTableClient _myTableClient = _myTableRepo.GetMusicClient();
    TableServiceContext _myContext =  _myTableClient.GetDataServiceContext();

    Music music = new Music(genre, artist);
    music.Score = "10";
    music.Year = "2012";
    music.Random = random;
    try
    {
        _myContext.AddObject(random, music);
        _myContext.SaveChangesWithRetries();
    }
    catch (StorageClientException e)
    { }
    catch (DataServiceRequestException e)
    {
        System.Diagnostics.Debug.WriteLine(e.StackTrace);
    }

    return music;

} 
```

**堆栈跟踪**

```
An error occurred while processing this request.
   at Microsoft.WindowsAzure.StorageClient.Tasks.Task`1.get_Result()
   at Microsoft.WindowsAzure.StorageClient.Tasks.Task`1.ExecuteAndWait()
   at MyWebAPI.Controllers.ValuesController.PostMusic(String genre, String artist, String random) in C:\MyWebAPI\MyWebAPI\Controllers\ValuesController.cs:line 61 
```

**音乐.cs**

```
public class Music : TableServiceEntity
    {
        public Music(string genre, string artist)
        {
            this.PartitionKey = genre;
            this.RowKey = artist;
        }
        public Music() {}
        public string Score { get; set; }
        public string Year { get; set; }
        public string Random { get; set; }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T06:17:52.913

哦，看起来您对 AddObject 的第一个参数是错误的？它应该是“音乐”，即您的表的名称，但如果要相信参数名称，那么您似乎在传递一个随机字符串。

# erlang - Erlang 列表匹配

> ID：10884564
> 
> 赞同：5
> 
> 时间：2012-06-04T16:17:38.297
> 
> 标签：erlang

我正在阅读《[用 Erlang 思考](http://www.scribd.com/doc/44221/Thinking-in-Erlang)》一书。在“图 10：案例示例”中，它具有以下示例：

```
many(X) ->
case X of
    [] ->
        none;
    [ _One ] ->
        one;
    [ _One, _Two ] ->
        two;
    [ _One, _Two , _Three | _Tail ] ->
        many
end. 
```

它说 ：

> 如果您想知道为什么第 9 行与 [ _One, _Two | 不匹配 _Tail ]，查看上节末尾列表尾部的列表匹配规则。

但如果我真的匹配 [ _One, _Two | _Tail ] 一切仍然按预期工作。书里有错误还是我有什么问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-04T22:00:56.913

我认为这可能不是一个错误。

的语义

```
[_One, _Two, _Three | _Tail] 
```

是三个或更多元素的列表。

的语义

```
[_One, _Two | _Tail] 
```

是两个或更多元素的列表。

由于第三种模式`[ _One, _Two ]`已经表明“两个元素的列表”的情况，因此使用`[_One, _Two | _Tail]`会有点多余。

“一切都按预期工作”是有原因的。如果我们将第四个模式放在第三个之前，则给出：

```
many(X) ->
  case X of
    [] ->
      none;
    [_One] ->
      one;
    [_One, _Two | _Tail] ->  %% Switched
      many;
    [_One, _Two] ->          %% Switched
      two
  end. 
```

然后一切都不会按预期工作。`Mod:many([a,b])`会产生`many`而不是预期的`two`。这是因为当评估“case”表达式时，X 会依次与所有模式匹配。并且这种顺序是有保证的。被`many`返回是因为首先`[a,b]`匹配`[_One, _Two | _Tail]`，并且`_Tail`是`[]`（一个空列表）。

因此，即使`[ _One, _Two | _Tail ]`在您的情况下可行，使用`[ _One, _Two , _Three | _Tail ]`也被认为是一种很好的做法，以防您之后切换模式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T16:22:19.297

这是书中的“错误”。我认为他们忘记了之前匹配的两个元素。但是，匹配规则尽可能具体，有利于维护，所以如果要匹配“三个或更多元素”，请具体说明并按照书中的内容进行操作。将来有人可能会删除以前的规则，或者出于任何原因重新排序。

# php - 错误 chmod -R 775 / 设置后恢复权限

> ID：10884569
> 
> 赞同：0
> 
> 时间：2012-06-04T16:18:09.587
> 
> 标签：php, permissions, sudo, chmod, centos5

由于错误，我在 775 上设置了所有文件夹和文件权限，执行此命令

```
sudo chmod 775 -R /website/folder / 
```

现在我需要至少恢复所有服务器文件夹和路径权限 centos 文件，此时我无法从我的网站发送电子邮件......

系统是centos 5

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T16:24:26.810

我不知道自动撤消此操作的方法。我知道的唯一解决方案是手动修复关键权限，或从备份中恢复。如果我是你，假设你最近有一个很好的备份，我会从备份中恢复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T22:30:53.090

这并不是一个完整的解决方案，而是一个如何解决这个问题的想法。

您可以查询数据包数据库（在 CentOS 中它是 AFAIR RPM）并根据该数据库设置权限。

一些对 RPM 有用的命令：

*   `rpm -Va`验证在 RPM 数据库中注册的文件。那里列出了具有错误权限的文件。`M`模式错误的文件在第 2 列中显示为 a 。所以类似的东西`rpm -Va | grep ^.M | cut -c 13-`应该是一个好的开始。

*   另一种选择可能是查询所有数据包中的所有文件

    ```
    rpm --queryformat='%{FILEMODES}\t%{FILENAMES}\n' -qa 
    ```

    并通过将输出管道输送到某种循环中来处理输出，例如

    ```
    | while read mode fn; do chmod -V ... "$fn"; done 
    ```

    但是在这里你必须将十进制输出转换`FILEMODES`为八进制以便`chmod`理解它。

    或者，您可以使用其他东西处理输出，例如 python 脚本等，这使您可以更好地控制您所做的事情。

# c# - Tiff 图像处理

> ID：10884574
> 
> 赞同：0
> 
> 时间：2012-06-04T16:18:36.773
> 
> 标签：c#, web-services

我想将 Tiff 图像传递给 Web 服务，Web 服务将 Tiff 图像作为参数，我必须对 Tiff 图像进行一些操作。

请建议我将 Tiff Image 作为参数传递给 Web 服务的好方法。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T17:55:43.753

我会这样做：

```
//get image from file or smth.
Image img = Image.FromFile(filename);

byte[] bytes;
using (MemoryStream ms = new MemoryStream())
{
    img.Save(ms, ImageFormat.Tiff);
    bytes = ms.ToArray();
}

string ret = Convert.ToBase64String(bytes);
return ret; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T17:14:04.227

Web 服务可以接受 a`byte[]`或 a`Stream`作为输入参数。

这是一个如何将 Tiff 文件作为 byte[] 传递的示例：

`byte[] fileBlob = new byte[FileUploadControl1.PostedFile.InputStream.Length];` `FileUploadControl1.PostedFile.InputStream.Read(fileBlob, 0, (int)FileUploadControl1.PostedFile.InputStream.Length);`

`svc.UploadFile(fileBlob);`

*此示例基于 C# ASP.NET。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T16:51:13.693

1.  使用 HTML 表单上传 TIFF，带有`enctype="multipart/form-data"`.
2.  `HttpFileCollection files = HttpContext.Current.Request.Files;`在 Web 服务（表单的属性）中使用`action`以获取对上传文件的访问权限：`HttpPostedFile file = files["id_of_field_with_filename"];`. `<input>`这里的“id_of_field_with_filename”是包含文件名的 HTML 表单标签的 id 属性。
3.  您可以对上传的文件执行任何操作，例如，保存它：`file.SaveAs(someDirectory + Path.GetFileName(file.FileName));`

请注意，在此解决方案中，Web 服务的方法（“操作”）没有任何参数。也可以使用 HTML5 File API 加载图像，使用 JavaScript 将其转换为 base64，然后通过 AJAX POST 将此字符串上传到 Web 服务。在这种情况下，Web 服务的方法需要有一个字符串参数来接收图像的 base64 编码字节。

# java - Android 方法调用跟踪

> ID：10884578
> 
> 赞同：2
> 
> 时间：2012-06-04T16:18:54.183
> 
> 标签：java, android, compiler-construction, profiling

每次进入和退出方法时，我都在更改代码以打印日志消息的一半。当我认为 Eclipse 可能有一些功能或插件可以为我跟踪并展示给我时。毕竟，这是 java 编译器手头的信息。

我需要的是查看每个方法被调用和返回的**顺序**。

它应该打印方法名称和它上面的所有堆栈，这样我就可以知道谁调用了。

**可选地**，如果它打印进入和返回的时间以及差异，这将是分析的好信息。

我记得以前尝试过 TraceView，不知道是不是答案，但我清楚地记得那里的信息太多，我无法清楚地了解发生了什么。
如果有人知道如何正确使用它来仅获取我需要的信息，那也很棒。

**更新：**
我很难使用 TraceView 和他的同伴 dmtracedump。我做了一些我不应该做的事情，我搜索了 dmtracedump 代码源并进行了调查。
这是产生我收到的错误消息的代码。

```
TraceData data1;
DataKeys* dataKeys = parseDataKeys(&data1, gOptions.traceFileName,
                                   &sumThreadTime);
if (dataKeys == NULL) {
    fprintf(stderr, "Cannot read trace.\n");
    exit(1);
} 
```

但我不知道如何修复跟踪文件。
它是由 `Debug.startMethodTracing("tracefile");`

我希望有一种方法可以告诉 Java 编译器打印每个方法调用。在这一点上，我很沮丧。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T16:20:53.650

I suggest rather than implementing your own profiling service, use [the absolutely excellent tool TraceView](http://developer.android.com/guide/developing/debugging/debugging-tracing.html) that Google provides us with!

If you are having issues using TraceView, you can only profile certain parts of your code by using:

```
// start tracing to "/sdcard/calc.trace"
Debug.startMethodTracing("calc");
// ...
// stop tracing
Debug.stopMethodTracing(); 
```

I've used it myself, and it tells you just about everything you'd need to know for profiling.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T11:30:20.060

我找到了一种自己修改文件的方法，可以在源中的任何位置插入和删除日志消息。

我在[这篇文章中写了](https://stackoverflow.com/questions/10960339/android-eclipse-use-external-tools-to-run-a-script-on-the-code/10960605#10960605)

# ios - 水平的 iPad 的基于拆分视图的模板？

> ID：10884579
> 
> 赞同：1
> 
> 时间：2012-06-04T16:18:57.667
> 
> 标签：ios, ipad, xcode-template

我一直在阅读 StackOverFlow 中的不同问题（[我的地理定位应用程序应该使用什么应用程序模板？](https://stackoverflow.com/questions/5340634/what-application-template-should-i-use-for-my-geolocation-application)或[基于视图和基于窗口的应用程序模板之间的主要区别？](https://stackoverflow.com/questions/814575/main-differenece-between-view-based-and-window-based-application-template)，例如），以便了解哪个模板最适合我的应用程序。对我来说，基于拆分视图的模板是一个不错的选择，因为我想要一个应用程序，用户可以在其中有一个视图，其中显示一些内容（比如说，一个图像），而且还有一组缩图所有其他可用元素（TableView）。因此，如果在查看第一张图片时，另一张可用，则最后一张将出现在缩影集中。通过这种方式，用户可以随时访问任何接收到的元素，通过其缩影（类似快照）来识别它。

问题是我想让 TableView 水平显示在底部，因为它可以更好地了解元素是如何按时间顺序显示的，并且剩余空间（在视图中）更适合我的想法。我正在阅读 Apple 的文档，但没有任何运气。所以实际的问题是；有没有办法让这个模板拥有我想要的 TableView？

如果没有可能改变这一点，你会建议什么？我已经开始做一些编码，但如果有人对更好的模板或方法有任何建议，我完全愿意重新开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T16:58:05.023

我建议查看此链接和那里的演示视频：http: [//mattgemmell.com/2010/07/31/mgsplitviewcontroller-for-ipad/](http://mattgemmell.com/2010/07/31/mgsplitviewcontroller-for-ipad/)

他描述的类允许垂直或水平拆分，并且可能可以做你想做的事。

# xml - XE2 XML 属性无法转换为双精度

> ID：10884586
> 
> 赞同：0
> 
> 时间：2012-06-04T16:19:28.930
> 
> 标签：xml, type-conversion, c++builder-xe2

我有一个具有如下属性的 XML 节点：

```
<pad name="E" x="2.5" y="7" drill="1.3"/> 
```

当我将结果分配`Attributes["x"]`为双精度时，我得到的结果是 25，而不是 2.5，但没有任何抱怨或错误。

要获得正确的转换，我首先必须将属性分配给字符串，替换小数点 '.' 转换为十进制 ','，然后将字符串转换为双精度。很明显，`Attribute["x"]`不能转换，但它什么也没说！（漏洞？！？）

这是转换错误的代码：

```
double x = XMLNode->Attributes["x"]; 
```

这给出了 25 而不是 2.5 的错误 x，这是我的解决方法：

```
String sd = XMLNode->Attributes["x"];
if (sd.Pos(".")) sd[sd.Pos(".")] = ',';
double x = sd.ToDouble(); 
```

这给出了 x (2.5) 中的正确值

必须有一个更简单的方法来做到这一点！

// 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T01:29:10.457

如果您不使用 XSD 来凝聚数据，则 XML 属性是任意字符串值，例如使用 IDE 的 XML 数据绑定向导。该`Attributes[]`属性返回 a `OleVariant`，在本例中将包含 a `System::String`。当使用' 的转换运算符或方法将 a`System::String`转换为 a时，转换使用全局变量，该变量使用 PC 的区域设置初始化，显然使用字符作为小数分隔符而不是字符。XML 无法知道该区域设置。`double``OleVariant``double``String::ToDouble()``SysUtils::DecimalSeparator``,``.`

由于您使用的是现代版本的 C++Builder，因此您可以使用该`StrToFloat()`函数的重载版本，它允许您将`TFormatSettings`记录作为输入传递。然后，您可以`.`指定`TFormatSettings::DecimalSeparator`用于转换的 ，例如：

```
TFormatSettings fmt = TFormatSettings::Create();
fmt.DecimalSeparator = '.';
double x = StrToFloat(XMLNode->Attributes["x"], fmt); 
```

# objective-c - loading UIViewController faster

> ID：10884594
> 
> 赞同：1
> 
> 时间：2012-06-04T16:20:17.723
> 
> 标签：objective-c, uiviewcontroller, loading

i have six viewControllers and six buttons in my project. every button brings the appropriate ViewController. but the thing is when the user taps for example 4th button then the application freze for one or two seconds and then the requested ViewControl is loaded. all i want to do is to make that things faster. i mean i checked some applications there it was done like first the requested ViewController is brought then it starts to load the controls. how i can do such thing in my application ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T17:35:51.250

使用仪器中的“时间分析器”工具，您可以查看代码中的哪些函数很慢。这应该有助于找出你的代码在哪里变慢了。

例如，如果您将所有视图控制器换成空白控制器，您应该不会看到任何冻结。您的视图控制器初始化代码中的某些内容可能会减慢您的速度。

# iphone - How to Call an Instance Method From a Variable Name

> ID：10884595
> 
> 赞同：1
> 
> 时间：2012-06-04T16:20:18.130
> 
> 标签：iphone, objective-c, variables, instance

> **Possible Duplicate:**
> [object with the name of a string](https://stackoverflow.com/questions/6164134/object-with-the-name-of-a-string)

I want to call the code below, but be able to change "itemInstance" with a stringe variable. Is this possible?

```
UIImage *image = [itemInstance getImage:itemNumber]; 
```

EDIT: I just read about the NSSelectorFromString method which appears to be what I need to use, but I have no idea how it's supposed to implemented. Any ideas?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T16:30:25.223

不完全是。获得这种效果的最简单方法是构建一个 NSDictionary，将字符串作为键，将匹配的实例作为值。然后它变成这样：

```
UIImage *image = [[dict objectForKey:instanceName] getImage:itemNumber]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T18:11:34.540

我通过从 NSArray 中选择实例来解决它。我选择菲利普斯的答案是因为它让我到达了我需要到达的地方。

# sql-server - Query to transform unknown number of rows to unknown number of columns

> ID：10884596
> 
> 赞同：1
> 
> 时间：2012-06-04T16:20:19.737
> 
> 标签：sql-server, sql-server-2008, pivot, crosstab

I'm been looking for hours at different options (PIVOT, CROSS JOIN etc...) to transform an unknown number of rows to an unknown number of columns with SQL server 2008 and I'm even more lost than before I started.

Basically I have 3 tables:

**Role**

```
|id| name|
| 1|role1|
| 2|role2|
| 3|role3| 
```

**Action**

```
|id|  name |
| 1|action1|
| 2|action2|
| 3|action3| 
```

**RoleAction**

```
|roleId| actionId|
|   1  |    1    |
|   1  |    2    |
|   2  |    1    |
|   3  |    2    | 
```

Is there anyway to build a query or SP that would transform the result of a `LEFT JOIN` to a nice "pivot" table like this:

```
|actionId|actionName|role1|role2|role3|.....|role n|
|   1    | action1  |  1  |  1  |  0  |.....|   0  |
|   2    | action2  |  1  |  0  |  1  |.....|   0  |
|   3    | action3  |  0  |  0  |  0  |.....|   0  |
|   .    |    .     |  .  |  .  |  .  |.....|   .  |
|   .    |    .     |  .  |  .  |  .  |.....|   .  |
|   n    | action n |  0  |  0  |  0  |.....|   0  | 
```

Many many thanks for your help!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T17:31:52.207

非常感谢 Aaron 让我走上正轨！

```
ALTER PROCEDURE dbo.RoleActionsPivot
AS

SET NOCOUNT ON

DECLARE @cols AS NVARCHAR(MAX), @query  AS NVARCHAR(MAX);

SELECT  Action.ActionId, Action.ActionName , Role.RoleId, Role.RoleName
INTO    #tmpRoleAction
FROM    Action LEFT JOIN RoleActions ON Action.ActionId = RoleAction.ActionId 
    LEFT JOIN Role ON RoleAction.RoleId = Role.RoleId

SET @cols = STUFF((SELECT distinct ',' + QUOTENAME(RoleName) 
            FROM #tmpRoleAction
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT ActionId, ActionName, ' + @cols + ' FROM

    (SELECT * FROM #tmpRoleAction) x

    PIVOT  ( max(RoleId) for RoleName in (' + @cols + ')) p '

execute(@query) 
```

# java - jtable header hiding/without column

> ID：10884600
> 
> 赞同：1
> 
> 时间：2012-06-04T16:20:40.093
> 
> 标签：java, swing, header, jtable

I want to create a table, for example, that has 3 column headers but only shows two columns and hiding the 3rd.

The last column is fixed and used to hide/show columns like most of applications do by clicking it and showing a popup menu.

Cheers

probably I didn't describe clearly. I know removeColumn/addColumn. By clicking on the table header, i can add column or remove them. However what I am curious is that a dedicated column header at the most right corner of the table header, which is fixed, small width and with descriptive table-like icon. So, by left mouse clicking this column header, a popup menu shows up for hiding/showing columns.This column header doesn't actually have column or rows but the header, like JDownloader does.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T16:29:00.503

你看过，[JTable 方法](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)，

*   [JTable#removeColumn(TableColumn aColumn)](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTable.html#removeColumn%28javax.swing.table.TableColumn%29)

*   [JTable#addColumn(TableColumn aColumn)](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTable.html#addColumn%28javax.swing.table.TableColumn%29)

这两种方法只是为了隐藏/显示`JTables Column(s)`，数据在`TableModel`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T18:31:51.957

`JXTable`of具有用于在弹出窗口中显示/隐藏列的`SwingX`内置 UI（不幸的是，我找不到它的图像）。

您当然可以使用建议的方法自己创建它，但为什么要重新发明轮子

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-04T16:26:41.153

有两种方法可以做到这一点：

正确的方法：

从表中删除列

```
TableColumn lastColumn = table.getColumnModel().getColumn(lastIndex);
table.removeColumn(lastColumn); 
```

不要这样做：

将最后一列的宽度设置为 0：

```
table.getColumnModel().getColumn(lastIndex).setPrefferedWidth(0);
table.getColumnModel().getColumn(lastIndex).setMaximumWidth(0);
table.getColumnModel().getColumn(lastIndex).setMinimumWidth(0); 
```

# java - SuppressWarnings 不适用于 FindBugs

> ID：10884606
> 
> 赞同：4
> 
> 时间：2012-06-04T16:20:50.157
> 
> 标签：java, annotations, findbugs

我在我的 Eclipse 项目上运行 FindBugs 并收到一个潜在的错误警告，我想出于特定原因（在此问题的上下文之外）禁止该警告。这是代码：

```
public class LogItem {
    private String name;

    private void setName(final String nm) {
        name = nm;
    }
} 
```

当您在此类上运行 FindBugs 时，会在`name = nm`分配操作上向您发出警告，说明：`Unread field: com.me.myorg.LogItem.name`.

所以我尝试添加这个：

```
 private void setName(final String nm) {
        @edu.umd.cs.findbugs.annotations.SuppressWarnings(value = "NP", justification = "Because I can")
        name = nm;
    } 
```

当我这样做时，我在 Eclipse 中得到一个语法（编译）错误，说明：

> 重复的局部变量 nm；名称无法解析为类型。

因此，我尝试`SuppressWarnings`在字段本身上添加 FindBugs，但是在类上重新运行 FindBugs 后，FindBugs 仍然抱怨同一行代码并且出于相同的原因。我什至尝试将其添加`SuppressWarnings`到该`setName`方法中，但仍然没有区别。

如何（*确切地说*！）我如何使用这个注释来让 FindBugs 安静？！？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T16:24:39.367

我一直使用内置的`java.lang.SuppressWarnings`，而不是 FindBugs 的，并且它到目前为止工作。此外，对于特定语句，您可能需要将语句保持在注释之后的同一行。像

```
 @SuppressWarnings("NP") name = nm; 
```

另外，你确定`"NP"`这里是一个有效的警告标识符吗？`"unused"`如果没有其他方法似乎可行，我会尝试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T21:16:43.540

将注释放在字段上并修复错误标识符。这对我有用：

```
public class LogItem {
    @edu.umd.cs.findbugs.annotations.SuppressWarnings("URF_UNREAD_FIELD")
    private String name; 
```

# mysql - 使用主键的两个重复删除查询导致死锁

> ID：10884607
> 
> 赞同：9
> 
> 时间：2012-06-04T16:20:50.250
> 
> 标签：mysql, locking, deadlock

我不明白两个重复查询如何使用主键删除单个表的单个行可能会死锁。谁能解释一下？

在我看来，其中一项交易应该已获得锁定，而另一笔交易将不得不等待。

这是带有查询的死锁报告：

```
Fri Jun 01 2012 13:50:23
*** (1) TRANSACTION:
TRANSACTION 3 1439005348, ACTIVE 0 sec, process no 22419, OS thread id 1166235968 starting index read
mysql tables in use 1, locked 1
LOCK WAIT 2 lock struct(s), heap size 368
MySQL thread id 125597624, query id 3426379709 node3-int 10.5.1.119 application-devel updating
DELETE FROM `SessData` WHERE `SessKey` = '87EDF1479A275557AC8280DCA78AB886'
AND `Name` = 'CurrentRequestURL'

*** (2) TRANSACTION:
TRANSACTION 3 1439005340, ACTIVE 0 sec, process no 22419, OS thread id 1234073920 starting index read, thread declared inside InnoDB 0
mysql tables in use 1, locked 1
3 lock struct(s), heap size 1216
MySQL thread id 125597622, query id 3426379705 node2-int 10.5.1.118 application-devel updating
DELETE FROM `SessData` WHERE `SessKey` = '87EDF1479A275557AC8280DCA78AB886'
AND `Name` = 'CurrentRequestURL'

*** WE ROLL BACK TRANSACTION (2) 
```

这是表的架构：

```
CREATE TABLE  `application`.`SessData` (
  `SessKey` varchar(255) NOT NULL default '',
  `Name` varchar(255) NOT NULL default '',
  `Value` varchar(255) default NULL,
  PRIMARY KEY  (`SessKey`,`Name`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

其他一些细节：

```
MySQL version: 4.1.21
Isolation level: REPEATABLE-READ
Character set on the the above columns: latin1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T20:33:57.207

您正在使用 MySQL 版本 4.1.21。4.1 已经结束生命周期，4.1.21 甚至不是最新的 4.1 版本。（[对 MySQL 4.1 的扩展支持于 2009 年 12 月 31 日结束](http://dev.mysql.com/support/eol-notice.html)。）您应该至少升级到 5.0.96，尽管您最好完全更新到 5.5.25。如果做不到这一点，升级到[4.1.22](http://olex.openlogic.com/packages/mysql/4.1.22)将是您可以做的最低要求，尽管这可能无法解决您的问题。

如果您阅读 MySQL 4.1[文档](http://dev.mysql.com/doc/refman/4.1/en/innodb-lock-modes.html)中的最后一个示例，您会看到如果要删除的行先前已在事务的早期使用共享锁被选中，则此死锁是如何发生的。同样，如果涉及外键约束，您可能已经获得了共享锁。一般的问题是：

> A 在 x 上获取共享锁
> 
> B 等待 x 的排他锁。由于 A 的锁，它必须等待。
> 
> A 等待 x 上的排他锁。它必须等待，因为 B 在排他锁的队列中领先于它。

InnoDB 处理锁的方式，在 B 等待同一个排他锁的时候，不会将 A 的共享锁升级为排他锁，所以这是一个死锁。

或者，当这两个语句都试图删除不存在的行（可能刚刚被前面的第三次重复删除删除）时，您可能会遇到错误。可能与：

*   [http://bugs.mysql.com/bug.php?id=1866](http://bugs.mysql.com/bug.php?id=1866)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T17:00:00.357

如[手册](http://dev.mysql.com/doc/refman/4.1/en/innodb-locks-set.html)所述：

> [`DELETE FROM ... WHERE ...`](http://dev.mysql.com/doc/refman/4.1/en/delete.html)在搜索遇到的每条记录上设置一个排他的 next-key 锁。

[在其他地方](http://dev.mysql.com/doc/refman/4.1/en/innodb-record-level-locks.html)，它解释说：

> Next-key lock：这是索引记录上的记录锁和索引记录之前的间隙上的间隙锁的组合。

由于涉及两个以上的锁，一个连接可能获得一个这样的锁，而另一个连接获得另一个；然后他们将陷入死锁，等待对方释放他们不持有的锁。

虽然您可以通过使用[`READ COMMITTED`](http://dev.mysql.com/doc/refman/4.1/en/set-transaction.html#isolevel_read-committed)隔离级别来禁用间隙锁定，但这确实会让您接触到[phantom rows](http://dev.mysql.com/doc/refman/4.1/en/innodb-next-key-locking.html)。如果发生死锁，您最好检测并重新发出失败的事务（在这种情况下，成功的事务将删除记录，因此不需要重新发出回滚的事务）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T17:02:18.747

我记得大约一年前帮助某人解决了类似的死锁情况

*   [https://dba.stackexchange.com/questions/3179/trouble-deciphering-a-deadlock-in-an-innodb-status-log/3185#3185（2011](https://dba.stackexchange.com/questions/3179/trouble-deciphering-a-deadlock-in-an-innodb-status-log/3185#3185)年 6 月 6 日）
*   [https://dba.stackexchange.com/questions/3223/will-these-two-queries-result-in-a-deadlock-if-executed-in-sequence/3224#3224（2011](https://dba.stackexchange.com/questions/3223/will-these-two-queries-result-in-a-deadlock-if-executed-in-sequence/3224#3224)年 6 月 8 日）
*   [https://dba.stackexchange.com/questions/3302/reasons-for-occasionally-slow-queries/3305#3305（2011](https://dba.stackexchange.com/questions/3302/reasons-for-occasionally-slow-queries/3305#3305)年 6 月 14 日）

不容忽视的是，在特定情况下，SELECT 语句可能会导致 InnoDB 死锁：[https ://dba.stackexchange.com/questions/4469/are-innodb-deadlocks-exclusive-to-insert-update-delete/ 4470#4470](https://dba.stackexchange.com/questions/4469/are-innodb-deadlocks-exclusive-to-insert-update-delete/4470#4470)（2011 年 8 月 8 日）

请查看您的`SHOW INNODB ENGINE STATUS\G`. 由于您使用的是 MySQL 4.1，因此信息并不完整，无法揭示问题。

尽管如此，这里发生了什么？您实际上是[在锁定聚集索引](https://dba.stackexchange.com/a/9613/877)（也称为[**gen_clust_index**](https://serverfault.com/a/239554/69271)）。同一行上的两个锁会锁定同一行及其在聚集索引中的 gen_clust_index 条目。

只有一个可以独占锁定。另一个将被锁定为独占但正在等待。当然，最后一个独占锁必须赢。如果两个事务同时超时，一个或两个事务必须在 50 秒内发生（默认为 innodb_lock_wait_timeout）。

那么，谁会回滚呢？根据您的 MySQL 4.1 `SHOW INNODB ENGINE STATUS\G`，`TRANSACTION (2)`会咬住灰尘并回滚，因为`TRANSACTION (1)`首先获得了集群键条目。

# algorithm - 哪种算法使用 C 或 C# 语言分析图像（以查找脏点）？

> ID：10884611
> 
> 赞同：-2
> 
> 时间：2012-06-04T16:21:12.073
> 
> 标签：algorithm, image-processing, analyzer

我有一个小项目，一个程序用来分析图像以找出“它是否脏”。具体来说，我使用相机（可能是手机）拍照，然后使用我上面讲过的程序来确定脏污出现的位置。对不起我的英语，它看起来像一个清洁机器人（拍照，如果那个地方有脏地方，那么机器人会清洁它）希望你能帮助我:) 非常感谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T16:24:49.477

您可能可以使用[imagemagick](http://imagemagick.org/)来完成某些工作，但听起来您可能必须使用完整的[openCV](http://opencv.willowgarage.com/wiki/)来做一些事情。

# c# - 服务器上的 ASP.NET 时间转换（夏令时）

> ID：10884618
> 
> 赞同：0
> 
> 时间：2012-06-04T16:21:42.940
> 
> 标签：c#, asp.net, sql-server-2008, dst

让我首先简要介绍一下我们的应用程序！（请不要被我的大帖子立即关闭，它的场景非常简单，我只是描述性的！）我们有一个 ASP.NET 网站，主要是 C#，它充当我们所有商店的店面特许经营权。

每家商店可能位于不同的时区，但我们需要在我们的网站上注明商店是营业还是关闭。

服务器有一个数据库，其中包含指示不同商店的不同时间安排的行，这些行可以显示在我们的 asp.net 网站上。

在我的数据库中，我有保存位置偏移量的列和行，并以 UTC 存储时间。例子;

*   位置编号：21
*   时区偏移：-5:00
*   周日开放时间：15:45
*   周日关闭：16:20

我想出了一种方法来确定服务器上的位置是否打开。我很难确定它是否适用于夏令时。我的问题是，这是否考虑了夏令时，我是否正确地处理了这种情况，因为我没有像这样处理时间？

这是我在服务器端代码中所做的；

//这是我用来从数据库保存存储计划的课程的重要部分

```
public class TimeSchedule
{
    public TimeSpan locationOffset { get; set; }
    public TimeSpan sundayOpen { get; set; }
    public TimeSpan sundayClose { get; set; }

    public TimeSchedule()
    {
        locationOffset = new TimeSpan();
        sundayOpen = new TimeSpan();
        sundayClose = new TimeSpan();
    }

}

//I have loaded a TimeSchedule object by id
TimeSchedule schedule = location.getTimeScheduleByLocationID(21);

// Get the UTC time
DateTime utcNow = new DateTime();
utcNow = DateTime.UtcNow;

//Get the offset value that we stored in our schedule object
TimeSpan locationOffSetHour = schedule.locationOffset;

//I then apply the location offset hour to the server utc time.
DateTime locationTime = new DateTime();
locationTime = utcNow.Add(locationOffSetHour);

 // Get the day of the week from our locationTime that we off setted from UTC
 string LocationWeekDay = locationTime.DayOfWeek.ToString();

// Now for each case of week day, I check to see if the difference in time is >= 0
// If so I assume the store is open

 TimeSpan zeroDifference = new TimeSpan(0, 0, 0);

   // This switch case just gets the difference in time according to LocationTime (that we offset'd from UTC) and stored time for the location on the server.
   // Then verifies that the location is open for that day  
   switch (LocationWeekDay)
      {
          case "Sunday":
              // Verify that location is open, turn on open sign
              TimeSpan differenceOpenTimeSun = new TimeSpan();
              differenceOpenTimeSun = locationTime.TimeOfDay - schedule.sundayOpen;

          TimeSpan differenceCloseTimeSun = new TimeSpan();
          differenceCloseTimeSun = schedule.sundayClose - locationTime.TimeOfDay;

          if (differenceOpenTimeSun >= zeroDifference && differenceCloseTimeSun > zeroDifference)
           {

               imgSign.ImageUrl = "~/SiteImages/open.jpg";
            }
            else
            {
               imgSign.ImageUrl = "~/SiteImages/closed.jpg";
            }
            break;
} 
```

感谢您花时间查看我的解决方案！任何“提醒”或“禁止”也将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T19:22:31.310

冒昧地重构。并不是说我会完全像这样做所有事情，因为我可能会对数据库中的打开和关闭值进行非规范化，但是......在这里......

```
//I have loaded a TimeSchedule object by id 
TimeZoneInfo tzi = TimeZoneInfo.FindSystemTimeZoneById(schedule.LocationId); 

// Get the UTC time 
DateTime utcNow = DateTime.UtcNow; 

//I then apply the location offset hour to the server utc time. 
DateTime currentUtcTime = DateTime.UtcNow; 
DateTime locationTime = TimeZoneInfo.ConvertTimeFromUtc(currentUtcTime, tzi);

// Get the day of the week from our locationTime that we off setted from UTC 
string locationWeekDay = locationTime.DayOfWeek.ToString(); 

// Now for each case of week day, I check to see if the difference in time is >= 0 
// If so I assume the store is open 
TimeSpan zeroDifference = new TimeSpan(0, 0, 0); 

// This switch case just gets the difference in time according to LocationTime (that we offset'd from UTC) and stored time for the location on the server. 
// Then verifies that the location is open for that day   
switch (locationWeekDay) 
{ 
     case "Sunday":  
          // Verify that location is open, turn on open sign  
          TimeSpan differenceOpenTimeSun = currentUtcTime.TimeOfDay - schedule.sundayOpen;  
          TimeSpan differenceCloseTimeSun = schedule.sundayClose - currentUtcTime.TimeOfDay;  

          if (differenceOpenTimeSun >= zeroDifference && differenceCloseTimeSun > zeroDifference)  
           {  

           imgSign.ImageUrl = "~/SiteImages/open.jpg";  
        }  
        else  
        {  
           imgSign.ImageUrl = "~/SiteImages/closed.jpg";  
        }  
        break; 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T18:33:52.107

程序中的以下代码行处理时区并获取本地时间：

```
// Get the UTC time
DateTime utcNow = new DateTime();
utcNow = DateTime.UtcNow;

//Get the offset value that we stored in our schedule object
TimeSpan locationOffSetHour = schedule.locationOffset;

//I then apply the location offset hour to the server utc time.
DateTime locationTime = new DateTime();
locationTime = utcNow.Add(locationOffSetHour); 
```

但是，此代码仅处理添加时区偏移值，而没有处理 DST。

因此，如果您还想获得 DST，您有两种选择：

1.  在数据库中为每个地方的 DST 期间使用一列，并执行逻辑以查找该地区的当前日期是否在 DST 期间，并相应地在时间进行 DST 更改。
2.  如果您使用的是 .NET 3.5 及更高版本，则可以遵循此选项：

    DateTime 东部 = TimeZoneInfo.ConvertTimeBySystemTimeZoneId(DateTime.UtcNow, "东部标准时间");

    [TimeZoneInfo](http://msdn.microsoft.com/en-us/library/system.timezoneinfo.aspx)类仅在 .NET 3.5 及更高版本中可用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T19:04:08.480

一些建议和意见...

* * *

查看 C# TimeZoneInfo 类。 [http://msdn.microsoft.com/en-us/library/system.timezoneinfo.aspx](http://msdn.microsoft.com/en-us/library/system.timezoneinfo.aspx)

它包含一些可以使您的时区转换准确的方法。例如，您可以存储 TimeZoneId，而不是将 TimeZoneOffset 存储在数据库中。然后用...

```
TimeZoneInfo tzi = TimeZoneInfo.FindSystemTimeZoneById(string id); 
```

然后代替..

```
locationTime = utcNow.Add(locationOffSetHour); 
```

你可以做...

```
 DateTime locationTime = ConvertTimeFromUtc(utcNow, tzi) ; 
```

获取当地时间。这将为您提供更准确的偏移量，因为它支持夏令时。

查看所有其他代码，看看 TimeZoneInfo 类是否包含您可以使用而不是滚动您自己的属性和方法。

* * *

您也不需要初始化一个值，然后立即覆盖它......

```
// Change this...
DateTime utcNow = new DateTime();                
utcNow = DateTime.UtcNow;        

// to this...
DateTime utcNow = DateTime.UtcNow;        

// and this...
TimeSpan differenceOpenTimeSun = new TimeSpan();               
differenceOpenTimeSun = locationTime.TimeOfDay - schedule.sundayOpen;  

// to this...
TimeSpan differenceOpenTimeSun = locationTime.TimeOfDay - schedule.sundayOpen;  

// etc... 
```

* * *

你说你在数据库中以UTC存储时间。我假设您正在将其转换为该代码之外的本地时间，因为您正在执行此操作...

```
differenceCloseTimeSun = schedule.sundayClose - locationTime.TimeOfDay 
```

您可以考虑对这两个值使用 UTC 时间，这样您就不必在计算差异之前进行转换。

您可能仍然需要进行时区转换来确定星期几，但您不必进行转换来确定商店是开门还是关门。

* * *

您并没有真正使用标准命名约定。不是必需的，但我会推荐 Microsoft 标准作为起点。让人们在 StackOverflow 上提问时更容易阅读代码 :)

[http://msdn.microsoft.com/en-us/library/ff926074.aspx](http://msdn.microsoft.com/en-us/library/ff926074.aspx)

希望这对您有所帮助。

# c#-4.0 - C# way to write Func with void return

> ID：10884621
> 
> 赞同：8
> 
> 时间：2012-06-04T16:21:52.510
> 
> 标签：c#-4.0, delegates, refactoring, action, func

I have the following two functions, that are nearly identical, the only difference is that one uses `func`, the other `action`. And I'd like to combine them into one function if it is possible.

```
 private static void TryCatch(Action action)
    {
        try
        {
            action();
        }
        catch (Exception x)
        {
            Emailer.LogError(x);
            throw;
        }
    }

    private static TResult TryCatch<TResult>(Func<TResult> func)
    {
        try
        {
            return func();
        }
        catch (Exception x)
        {
            Emailer.LogError(x);
            throw;
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T16:24:40.453

在 C# 中将这两者组合成一个函数确实是不可能的。C# 和 CLR 中的`void`根本不是类型，因此具有与非 void 函数不同的返回语义。正确实现这种模式的唯一方法是为 void 和非 void 委托提供重载

CLR 限制并不意味着不可能在每种 CLR 语言中都这样做。`void`在用于表示不返回值的函数的语言中，这是不可能的。这种模式在 F# 中非常可行，因为它使用`Unit`而不是`void`for 无法返回值的方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-04T16:25:08.360

您可以使用第二个`Func<T>`版本来实现该`Action`方法，只需将 Action 包装在 lambda 中。这消除了一些重复的代码。

```
private static void TryCatch(Action action)
{
    Func<object> fun => 
       {
           action();
           return null;
       };
    TryCatch(fun);
} 
```

话虽这么说，这样做会涉及额外的开销，所以就个人而言，我可能会按照您当前实现它的方式保留它（特别是考虑到在这种情况下您的原始版本恰好是多么简短和简单）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T16:32:42.773

我按照@ReedCopsey 的建议这样做。

这是我发现的最简单的语法：

```
private static void TryCatch( Action action )
{
    TryCatch( () => { action(); return 0; } );
} 
```

# php - Apply a specific class/id to current page on menu (PHP)

> ID：10884624
> 
> 赞同：2
> 
> 时间：2012-06-04T16:22:11.257
> 
> 标签：php, menu

I have a menu like this:

```
<div id="blahblah" style="blahblah">
<a href="http://domain.com/folder/biography"><img style="blahblah" src="blahblahblahblah"></a>
<a href="http://domain.com/folder/contacts"><img style="blahblah" src="blahblahblahblah"></a>
<a href="http://domain.com/folder/gallery"><img style="blahblah" src="blahblahblahblah"></a>
<a href="http://domain.com/folder/dontknow"><img style="blahblah" src="blahblahblahblah"></a>
</div> 
```

I'd like to have something that automatically adds a class="current" to the page I'm currently in. Links (as you can see in the code above) are like domain.com/folder/biography or domain.com/folder/contacts, so without .php/.html, etc.

I tried with:

```
<div id="blahblah" style="blahblah">
<a <?php if (strpos($_SERVER['PHP_SELF'], 'biography')) echo 'class="current"';?> href="http://domain.com/folder/biography"><img style="blahblah" src="blahblahblahblah"></a>
<a <?php if (strpos($_SERVER['PHP_SELF'], 'contacts')) echo 'class="current"';?> href="http://domain.com/folder/contacts"><img style="blahblah" src="blahblahblahblah"></a>
...
...
</div> 
```

But it doesn't work... the solution with strops seems viable, probably I'm doing it wrong.. :P

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T16:35:49.260

你应该：

1.  检查`strpos()`with的结果`!== false`。
2.  使用`$_SERVER['REQUEST_URI']`而不是`$_SERVER['PHP_SELF']`.
3.  将代码包装在一个函数中。

像这样的东西：

```
<?php
function get_current($name) {
  if (strpos($_SERVER['REQUEST_URI'], $name) !== false)
    echo 'class="current"';
}
?>

<div id="blahblah" style="blahblah">
  <a <?php get_current('biography') ?> href="http://domain.com/folder/biography"><img style="blahblah" src="blahblahblahblah"></a>
  <a <?php get_current('contacts') ?> href="http://domain.com/folder/contacts"><img style="blahblah" src="blahblahblahblah"></a>
  ...
  ...
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T16:25:39.990

如果位置为 0，那么它将在 PHP 中评估为 FALSE。您应该专门检查返回值，即 >= 0。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T16:33:42.280

而不是`strpos()`，你可以试试这个：

```
<?php $current = basename($path, ".php"); ?>

<a href="blahblah"<?php if ($current == 'biographies') echo ' class="current"'; ?> /> 
```

`$current`是当前文件的名称，不带`.php`扩展名。

# java - 递归 - 船战

> ID：10884631
> 
> 赞同：-1
> 
> 时间：2012-06-04T16:22:35.217
> 
> 标签：java, algorithm, recursion

**我正在尝试用java**编写一个小船战游戏。

它是**100% 学术性**的，我用它来练习递归，所以......我想使用它而不是迭代，即使它在~~大多数~~情况下更简单、更有效。

让我们谈正事吧。这些是规则：

*   *船有 1、2 或 3 格宽，只能水平放置。*
*   *水用 0 表示，未命中的船格为 1，命中的船格为 2，沉船的所有格为 3。*

设置了这些规则后，我使用以下数组进行测试：

```
int[][] board = new int[][]
{
    {0, 1, 2, 0, 1, 0},
    {0, 0, 1, 1, 1, 0},
    {0, 3, 0, 0, 0, 0},
    {0, 0, 2, 1, 2, 0},
    {0, 0, 0, 1, 1, 1},
}; 
```

到目前为止它工作得很好，为了使其更加用户友好，我想添加一些报告。这些是我需要的方法：

1.  *给定矩阵，返回其中的船只数量。*
2.  *与 a) 相同，但按状态区分（未命中船只的数量、命中和沉没的船只数量）。*

我需要帮助处理这些报告，我想得到一些想法。

记住它必须使用递归来完成，我想理解这一点，唯一的方法就是练习！

非常感谢您的时间和耐心:)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T18:26:20.287

好吧，这看起来比这里的人们实际看起来要简单得多。

我可以在这里使用递归的方式是将整个矩阵中的船舶数量视为第一行中的船舶数量**加上**矩阵其余部分中的船舶数量。

如果你能解决这个问题，你就准备好了。

**如何？**

想想你的基本情况，停止递归调用的条件是什么？

解决连续计数船只的方法。

当你有这个时，返回行中的船只数量加上矩阵其余部分中的船只。

我相信你的方法的签名是这样的......

```
ShipCount(int[][] matrix, int numberOfRows, int numberOfCellsPerRow) 
```

假设计数器变量称为“count”。你会有类似的东西：

```
//Signature
{
    int count = 0;
    if(/*Base condition*/){
    }else{
        /*Count the ships, work with the "count" variable.*/
    }
    return count + ShipCount(matrix[][], numberOfRows - 1, numberOfCellsPerRow) /*"numberOfRows - 1" takes you to the next row.*/
} 
```

祝你好运#2 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T16:37:07.750

这是不可能的，除非您指定船舶必须用`0`. 否则，`1,1`可能是一艘长度为 2 的船，或两艘长度为 1 的船。

鉴于这种限制，您的两个报告都可以/应该作为一个单一的过程来完成，将地图变成船只列表。

我不太想写出递归包装器（我假设您知道如何使用递归函数对数组进行“迭代”），所以我跳过了那部分。

1.  遍历行，因为船不能跨行，它们可以被独立对待。
2.  对于每个状态级的船数据都可以在（无船，船，沉船），有一个功能
3.  该函数检查下一个元素是否
    1.  不存在
    2.  与当前相同（可以通过不同的功能进行硬编码）
    3.  与当前不同（转到右侧）。
4.  当你遍历数组时，你组装了一个船列表。
5.  你现在有一个船列表，你可以计算它的长度，或者做更复杂的报告

使用非硬编码的单个函数可能会更好，也可能不会更好，但这似乎有点困难，并且只有三个选项，硬编码并没有太多的代码开销（因为这三个都可以工作不同）。

或者，您可以使用完全独立的方法，通过遍历地图计算船舶的“上升边缘”。这是一个更轻量级的解决方案，但在您可以对结果数据执行的操作方面，您无法获得任何灵活性。

...通过更轻的重量，我的意思是“可以使用正则表达式完成”

# java - 如何在java中读/写指定字符集的文本

> ID：10884637
> 
> 赞同：0
> 
> 时间：2012-06-04T16:23:10.647
> 
> 标签：java, character-encoding

我有一个场景，我必须从 csv 文件中读取/写入数据。我知道 csv 可以像文本文件一样被读取/写入。

我想知道的是，我如何处理字符集？例如，如果必须从中文 csv 文件中读取一段文本，那么我该如何阅读呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T16:32:06.437

尝试以下操作：

```
BufferedReader br = new BufferedReader(new InputStreamReader(myFile.getInputStream(), "ISO-8859-15")); // Give your desired charset here 
```

# ios - 添加，然后删除~ipad.xib。现在在 iPad 上运行时出现 NSInternalInconsistencyException

> ID：10884640
> 
> 赞同：1
> 
> 时间：2012-06-04T16:23:25.063
> 
> 标签：ios, ipad, xib

为了将 iPhone 应用程序转换为通用应用程序，我将 MyViewController~ipad.xib 添加到我的项目中。我还将目标设备系列设置为 iPhone/iPad。然后我尝试撤消这些更改——删除了 MyViewController~ipad.xib 并将 Targeted Device Family 设置为仅 iPhone。

现在，我可以在 iPhone 上运行（一如既往），但不能在 iPad 上运行（我以前可以这样做）。我现在崩溃并出现以下错误：

> “'NSInternalInconsistencyException'，原因：'-[UIViewController _loadViewFromNibNamed:bundle:] 加载了“MyViewController”笔尖，但未设置视图出口。'”

MyViewController.xib 中的 view outlet 设置为：![显示视图出口设置为“视图”](../Images/52bcf80a7a5a773dc22930a0c6adfa28.png)

并设置了 File 的 Owner 类：![显示文件的所有者类设置为“MyViewController”](../Images/7aa0dcfa67e5be9054ddb3f240e946dc.png)

所以我想回到我所拥有的……一个仅适用于 iPhone 的应用程序，将在 iPad 上运行（但在较小的 iPhone 视图中）。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T16:34:00.050

请注意，如果您从项目中删除文件，则在重新安装（通过 Build&Run）时*不会*从设备中删除文件，iOS 仍会在那里看到您的旧文件。您可能需要手动从设备中删除该应用程序，然后重新安装。

另一种选择是重命名文件，这样旧文件就不会打扰您。

此外，清理项目或清理构建文件夹（按住 alt 并从产品菜单中选择清理）可能会有所帮助。

# c# - 将 JSON 数组序列化为类的实例

> ID：10884641
> 
> 赞同：2
> 
> 时间：2012-06-04T16:23:34.883
> 
> 标签：c#, json, serialization

如果我有 JSON 数据，例如：

```
{
"datapoints":[ [null, 1234567890, "point1"], [null, 1234567890, "point2"] ]
} 
```

有没有办法将该数据反序列化为以下类：

```
public class Result 
{
    public DataPoint[] DataPoints {get;set;}
}

public class DataPoint
{
   public string Name {get;set;}
   public string Value {get;set;}
   public DateTime Timestamp {get;set;}
} 
```

我可以指定要序列化到哪个属性的数组成员的索引吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T18:15:39.250

如果您愿意使用[Json.Net进行一些自定义反序列化](http://json.codeplex.com/)

```
string json = @"{""datapoints"":[ [null, 1234567890, ""point1""], [null, 1234567890, ""point2""] ]}";
var result = (JObject)JsonConvert.DeserializeObject(json);
var dataPoints = result["datapoints"]
            .Select(t => new DataPoint() 
             {
                Timestamp = String.IsNullOrEmpty(t[0].ToString()) ? DateTime.MinValue : DateTime.Parse(t[0].ToString()),
                Value = t[1].ToString(),
                Name= t[2].ToString()
             })
            .ToArray(); 
```

PS：`Timestamp`可能需要更多的工作，具体取决于格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T16:36:11.623

很难准确地说，因为您没有指定如何反序列化数据。

如果可以使用外部库，我建议使用[Json.Net](http://json.codeplex.com/) - 它比*System.Web.Script.Serialization.JavaScriptSerializer*好用得多。

编辑以解决（非常有效！）问题 - 如[SO 其他地方](https://stackoverflow.com/questions/1215479/deserializing-variable-type-json-array-using-datacontractjsonserializer)所述，如果您包含 Json.Net，您可以说`JArray a = JArray.Parse(datapoints);`加载您的数组，然后`new`为每个新数组项手动设置新的 DataPoints并使用预期插槽中的值填充它。我不知道你可以用它来装饰你的类属性的属性会使它更漂亮。您可能会使用它的 Linq to Json 来让这件事变得不那么丑陋。

# android - Android中的电话日期？

> ID：10884642
> 
> 赞同：1
> 
> 时间：2012-06-04T16:23:41.927
> 
> 标签：android, flash-builder

我正在开发一个android应用程序，一个问题，因为我可以得到我手机的日期并在标签中显示它？非常感谢您

我正在使用 flash builder cs5.5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T16:25:46.997

在java中，因此在android中

```
System.currentTimeInMillis(); 
```

将返回一个 long 并以毫秒表示手机当前认为的时间/日期。

一旦你有了它，你可以使用[DateFormater](http://developer.android.com/reference/java/text/DateFormat.html)把它变成一个字符串来显示给用户。

**编辑：**我错过了Flash标签=（。这就是使用本机Java完成的方式。不过，我没有在Android上使用Flash的经验，不知道这是否会延续并在该平台下工作对不起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T05:48:43.297

好吧，我认为在 Android 上它与简单的 air 或 flash 应用程序没有什么不同。[日期](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/Date.html)类将帮助您做到这一点。Flash Builder 和 mxml 中最简单的示例：

```
<s:Label id="label" text="{new Date()}" /> 
```

在 Flash CS 中

```
label.text = new Date().toString(); 
```

你可以按照你的意愿格式化你的字符串，但不像Java那样舒服:)

# php - PHP / MYSQL Retry wehn 重复发生

> ID：10884647
> 
> 赞同：0
> 
> 时间：2012-06-04T16:23:56.920
> 
> 标签：php, mysql

```
$new_acct_id = 'ACC'.strtoupper( substr(md5(uniqid(rand())),0,5) );

mysql_query("INSERT INTO `accounts` (id, market_unit_id, account_type_id, is_inactive,inactive_notes,is_special,dealer_id, is_premium)
VALUES ('".$new_acct_id."', '".$mu_id."', '".$atype['0']."', '".$is_inactive."','','','', '".$is_premium."')") or die("load2 -" . mysql_error()); 
```

load2 - 键 'PRIMARY' 的重复条目 'ACC96E38'

如果第一个产生错误，我可以让它生成另一个数字吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T16:29:44.033

这应该这样做。

```
do{
    $error='';
    $new_acct_id = 'ACC'.strtoupper( substr(md5(uniqid(rand())),0,5) );
    $res=mysql_query("INSERT INTO `accounts` (id, market_unit_id, account_type_id, is_inactive,inactive_notes,is_special,dealer_id, is_premium)
    VALUES ('".$new_acct_id."', '".$mu_id."', '".$atype['0']."', '".$is_inactive."','','','', '".$is_premium."')");
    if(!$res)$error=mysql_error();
}while(!$res && strpos($error,'Duplicate entry')!==false);
if(!$res)die($error); 
```

# linq - Linq：有条件地向where子句添加条件

> ID：10884651
> 
> 赞同：119
> 
> 时间：2012-06-04T16:24:11.740
> 
> 标签：linq, entity-framework, linq-to-sql

我有这样的查询

```
(from u in DataContext.Users
       where u.Division == strUserDiv 
       && u.Age > 18
       && u.Height > strHeightinFeet  
       select new DTO_UserMaster
       {
         Prop1 = u.Name,
       }).ToList(); 
```

我想根据是否将这些条件提供给运行此查询的方法来添加各种条件，例如年龄、身高。所有条件都将包括用户部门。如果提供了年龄，我想将其添加到查询中。同样，如果提供了高度，我也想添加它。

如果这是使用 sql 查询来完成，我会使用字符串生成器将它们附加到主 strSQL 查询中。但是在 Linq 中，我只能考虑使用 IF 条件，在该条件下我将编写三次相同的查询，每个 IF 块都有一个附加条件。有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：217
> 
> 时间：2012-06-04T16:31:47.203

如果您不调用`ToList()`并且最终映射到 DTO 类型，则可以随时添加`Where`子句，并在最后构建结果：

```
var query = from u in DataContext.Users
   where u.Division == strUserDiv 
   && u.Age > 18
   && u.Height > strHeightinFeet
   select u;

if (useAge)
   query = query.Where(u => u.Age > age);

if (useHeight)
   query = query.Where(u => u.Height > strHeightinFeet);

// Build the results at the end
var results = query.Select(u => new DTO_UserMaster
   {
     Prop1 = u.Name,
   }).ToList(); 
```

这仍然只会导致对数据库的一次调用，这将与一次性编写查询一样有效。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2016-03-11T02:07:19.880

我通常使用方法链接但有同样的问题。这是我使用的扩展名

```
public static IQueryable<T> ConditionalWhere<T>(
        this IQueryable<T> source, 
        Func<bool> condition,
        Expression<Func<T, bool>> predicate)
    {
        if (condition())
        {
            return source.Where(predicate);
        }

        return source;
    } 
```

它有助于避免链条断裂。也一样`ConditionalOrderBy`，`ConditionalOrderByDescending`很有帮助。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2012-06-04T16:28:06.983

一种选择。

```
bool? age = null

(from u in DataContext.Users
           where u.Division == strUserDiv 
           && (age == null || (age != null && u.Age > age.Value))
           && u.Height > strHeightinFeet  
           select new DTO_UserMaster
           {
             Prop1 = u.Name,
           }).ToList(); 
```

或者您可以切换到 linq 的方法语法并使用 if 条件将表达式附加到 where 子句。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-12-15T22:58:28.627

只是我在 where 子句中使用它作为

```
 public IList<ent_para> getList(ent_para para){
     db.table1.Where(w=>(para.abc!=""?w.para==para.abc:true==true) && (para.xyz!=""?w.xyz==para.xyz:true==true)).ToList();
} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-10-10T14:52:08.990

基于某些条件添加 where 条件...

```
from u in DataContext.Users
where u.Division == strUserDiv 
&& u.Age != null ? u.Age > 18 : 1== 1
&& u.Height != null ? u.Height > 18 : 1== 1
&& u.Height != null ? u.Height > 18 : 1== 1
 select new DTO_UserMaster
       {
         Prop1 = u.Name,
       }).ToList(); 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-05-19T20:37:11.900

这是我做类似事情的代码。这是我的 WCF SOAP Web 服务 api 上的一种方法。

```
 public FruitListResponse GetFruits(string color, bool? ripe)
    {
        try
        {
            FruitContext db = new FruitContext();
            var query = db.Fruits.Select(f => f);
            if (color != null)
            {
                query = query.Where(f => f.Color == color);
            }
            if (ripe != null)
            {
                query = query.Where(f => f.Ripe == ripe);
            }
            return new FruitListResponse
            {
                Result = query.Select(f => new Fruit { Id = f.FruitId, Name = f.Name }).ToList()
            };
        }
        catch (Exception e)
        {
            return new FruitListResponse { ErrorMessage = e.Message };
        }
    } 
```

基本查询`Select(f => f)`基本上意味着一切，并且`Where`可以选择附加子句。决赛`Select`是可选的。我用来将数据库行对象转换为结果“水果”对象。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-02-21T11:05:12.807

[只是为了在此处](https://stackoverflow.com/a/10884757/3540340)添加上述接受的答案，如果您正在对连接进行动态搜索，请考虑在初始 linq 查询中返回一个包含两个表 (t1,t2) 的新对象，以便您可以单独访问它们以执行条件搜索。

```
var query = from t1 in _context.Table1
            join t2 in _context.Table2 on t1.Table1Id equals t2.Table1IdId
            select new { t1, t2 };

        if (!string.IsNullOrEmpty(searchProperty1))
        {
            query = query.Where(collection => collection.t1.TableColumn == searchProperty1);
        }
        if (!string.IsNullOrEmpty(searchProperty2))
        {
            query = query.Where(collection => collection.t2.TableColumn == searchProperty2);
        }
        ....etc. 
```

[我得到了我在这里](https://www.c-sharpcorner.com/UploadFile/deveshomar/dynamic-linq-library-in-C-Sharp/)寻找的关于加入两个表和查询其中一个表上的特定列的答案

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-12-05T21:05:10.783

我只是在寻找其他东西时遇到了这个问题，但我想我会加入 lambda 版本。

首先，我会创建一个这样的类来将参数传递到数据层：

```
 public class SearchParameters() {
       public int? Age {get; set;}
       public string Division {get;set;}
       etc
    } 
```

然后，在我的数据层中，是这样的：

```
public IQueryable<User> SearchUsers(SearchParameters params) 
{
    var query = Context.Users;
    if (params.Age.HasValue)
    {
         query = query.Where(u => u.Age == params.Age.Value);
    }
    if (!string.IsNullOrEmpty(params.Division)
    {
        query = query.Where(u => u.Division == params.Division);
    }
    etc
    return query;
} 
```

在哪里实现查询取决于您。可能在应用程序和数据之间有一个层，它将特定于 db 的表示转换为 db-agnostic（也许您查询多个数据源）。例如，该层可能会从这些源中获取多种类型的可查询，并将它们映射到一个通用的 POCO 表示。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-08-12T12:15:04.787

假设以下参数，

```
Int? Age = 18; 
```

只需使用`&&`和`||`条件运算符，我们就可以有另一个版本。

```
(from u in DataContext.Users
where u.Division == strUserDiv 
    && (Age == null || u.Age > Age)
    && (Param1 == null || u.param1 == Param1)
    && u.Height > strHeightinFeet
select new DTO_UserMaster
{
    Prop1 = u.Name,
}).ToList(); 
```

与 Param1 一样，您可以为搜索条件添加任意数量的参数。

# php - 小胡子与其他引擎。也许我应该使用另一个模板引擎？

> ID：10884653
> 
> 赞同：0
> 
> 时间：2012-06-04T16:24:15.957
> 
> 标签：php, template-engine, mustache

我将一个对象传递给 mustache，并且该对象有一个带有一个参数的方法。Mustache 和 PHP 可以实现这样的事情吗？

```
{{object.method(parameter)}} 
```

如果用 Mustache 实现这一点太费力了，你会推荐什么模板引擎？

> 请记住，我需要在视图上下文中将参数传递给对象方法（就像我们对助手所做的那样）。欢迎使用最接近 mustache 的语法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T21:23:43.077

这在 Mustache 中是不可能的。

也就是说，您可能可以使用适当的 ViewModel 解决您想要解决的任何问题，这是一种更 Mustache 的方法。

如果您绝对必须能够将参数传递给对象方法，那么我们正在讨论您的模板中的逻辑。虽然本质上不是一件坏事，但这绝对不是胡须的事情:)

对于 PHP 的可靠模板语言（当然，除了 Mustache），我推荐 Twig。

# sql-server - sql查询返回日期范围或所有记录或仅空记录

> ID：10884659
> 
> 赞同：0
> 
> 时间：2012-06-04T16:24:45.287
> 
> 标签：sql-server, date-range

我有一个无法正常工作的 sql 查询

这是查询的简化版本。

```
select * from Permit 
inner join BMP on Permit.PermitNumber = BMP.PermitNumber
left join BMPInspection as BI on Permit.PermitNumber = BI.PermitNumber and BMP.BMPNumber = BI.BMPNumber

where Permit.PermitNumber = 'S002552' 
AND ( ( @StartDate IS NULL
             AND @EndDate IS NULL )
            OR ( BI.dtActionDate > Dateadd(day, -1, @StartDate)
                 AND BI.dtActionDate < Dateadd(day, 1, @EndDate) )
            OR ( BI.dtActionDate > Dateadd(day, -1, @StartDate)
                 AND @EndDate IS NULL )
            OR ( @StartDate IS NULL
                 AND BI.dtActionDate < Dateadd(day, 1, @EndDate) ) ) 
```

期望的行为是

1.  仅返回指定开始日期和结束日期的日期范围内的记录
2.  当开始日期为 NULL 且结束日期有日期时，返回 NULL 日期或小于结束日期
3.  当开始日期有日期且结束日期为空时，返回 NULL 或大于开始日期
4.  当开始日期和结束日期都为 NULL 时，只返回日期为 NULL 的记录

现在我能得到的只是日期范围或所有记录 NULLS 和有效日期。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T16:26:44.890

对于这种情况：

> 当开始日期和结束日期都为 NULL 时，只返回日期为 NULL 的记录

改变：

```
( @StartDate IS NULL AND @EndDate IS NULL ) 
```

至

```
( @StartDate IS NULL AND @EndDate IS NULL AND BI.dtActionDate IS NULL) 
```

# gwt - mvn integration-test - 找不到 myproject.gwt.xml 来运行 GwtTest*.java 测试用例

> ID：10884663
> 
> 赞同：1
> 
> 时间：2012-06-04T16:25:19.680
> 
> 标签：gwt, maven

我正在构建一个 GWT 项目，但在执行 GwtTest*.java 单元测试时遇到问题。我可以在开发人员模式下运行项目（mvn gwt:run）。但是，当我使用“mvn integration-test”或“mvn gwt:test”运行单元测试时，我收到以下错误。

```
Loading inherited module 'com.mycompany.site.client.myproject'
   [ERROR] Unable to find 'com/mycompnay/site/client/myproject.gwt.xml' on your classpath; could be a typo, or maybe you forgot to include a classpath entry for source? 
```

下面是我的 pom.xml

```
<project
  xmlns="http://maven.apache.org/POM/4.0.0"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">

 <!-- POM file generated with GWT webAppCreator -->
 <modelVersion>4.0.0</modelVersion>
 <groupId>com.mycompany</groupId>
 <artifactId>myproject</artifactId>
 <packaging>war</packaging>
 <version>0.0.1-SNAPSHOT</version>
 <name>GWT Maven Archetype</name>

 <properties>
   <!-- Convenience property to set the GWT version -->
   <gwtVersion>2.4.0</gwtVersion>
   <!-- GWT needs at least java 1.5 -->
   <webappDirectory>${project.build.directory}/${project.build.finalName}</webappDirectory>
   <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
 </properties>

 <dependencies>
   <dependency>
     <groupId>com.google.gwt</groupId>
     <artifactId>gwt-servlet</artifactId>
     <version>${gwtVersion}</version>
     <scope>runtime</scope>
   </dependency>
   <dependency>
     <groupId>com.google.gwt</groupId>
     <artifactId>gwt-user</artifactId>
     <version>${gwtVersion}</version>
     <scope>provided</scope>
   </dependency>
   <dependency>
     <groupId>junit</groupId>
     <artifactId>junit</artifactId>
     <version>4.7</version>
     <scope>test</scope>
   </dependency>
   <dependency>
     <groupId>javax.validation</groupId>
     <artifactId>validation-api</artifactId>
     <version>1.0.0.GA</version>
     <scope>test</scope>
   </dependency>
   <dependency>
     <groupId>javax.validation</groupId>
    <artifactId>validation-api</artifactId>
    <version>1.0.0.GA</version>
    <classifier>sources</classifier>
    <scope>test</scope>
   </dependency>
  </dependencies>

<build>
  <!-- Generate compiled stuff in the folder used for developing mode -->
  <outputDirectory>${webappDirectory}/WEB-INF/classes</outputDirectory>

  <plugins>

    <!-- GWT Maven Plugin -->
    <plugin>
      <groupId>org.codehaus.mojo</groupId>
      <artifactId>gwt-maven-plugin</artifactId>
      <version>2.4.0</version>
      <executions>
        <execution>
          <goals>
            <goal>compile</goal>
            <goal>test</goal>
            <goal>i18n</goal>
            <goal>generateAsync</goal>
            <goal>mergewebxml</goal>
          </goals>
        </execution>
      </executions>
      <!-- Plugin configuration. There are many available options, see 
      gwt-maven-plugin documentation at codehaus.org -->
      <configuration>
        <runTarget>myproject.html</runTarget>
        <hostedWebapp>${webappDirectory}</hostedWebapp>
        <i18nMessagesBundle>com.mycompany.site.client.Messages</i18nMessagesBundle>

      </configuration>
    </plugin>

  <!-- Copy static web files before executing gwt:run -->
  <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-war-plugin</artifactId>
    <version>2.1.1</version>
    <executions>
      <execution>
        <phase>compile</phase>
        <goals>
          <goal>exploded</goal>
        </goals>
      </execution>
    </executions>
    <configuration>
      <webappDirectory>${webappDirectory}</webappDirectory>
    </configuration>
  </plugin>
  <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-compiler-plugin</artifactId>
    <version>2.3.2</version>
    <configuration>
      <source>1.5</source>
      <target>1.5</target>
    </configuration>
  </plugin>
</plugins>
</build>
</project> 
```

在使用 GWT Maven Archetype 创建 GWT 项目时，我使用的是 maven 生成的默认项目结构。所以我的 myproject.gwt.xml 位于 src/main/resources/com/mycompany/site/myproject.gwt.xml。对此问题的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T17:13:27.353

我发现了我的问题。我错过了 - 理解应该从什么返回

```
public String getModuleName() { . . . } 
```

我最初将路径返回到我的入口点类，但您应该将路径返回到您的 gwt.xml 文件。我也错过了理解“模块”所指的内容。

# ipython - IPython 从断点或行号运行脚本

> ID：10884664
> 
> 赞同：1
> 
> 时间：2012-06-04T16:25:25.273
> 
> 标签：ipython

`%run`我经常使用魔法功能。有没有办法从给定的行号或其他标签运行脚本？

使用示例：我在编辑器中编辑脚本并`%run`在 IPython 中使用。我通常需要修改我在脚本开头计算的一些数据的可视化方式，但我不需要每次都重新计算它。（我知道我可以将数据缓存在一个文件中，或者重构我的代码；这不是我要寻找的答案。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T10:11:26.840

你可以看看[IPython notebook](http://ipython.org/ipython-doc/stable/interactive/htmlnotebook.html)。它使您可以编写代码块并随时在交互式命名空间上运行它们。

[这是一个演示](http://www.youtube.com/watch?v=HaS4NXxL5Qc&feature=player_embedded)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-16T22:56:34.573

您可以注释掉您不想运行的部分，并且在 ipython 中您可以使用以下命令运行： run -i ，它使用所有当前变量运行。

# python - Python Scipy 中的两个样本 Kolmogorov-Smirnov 测试

> ID：10884668
> 
> 赞同：102
> 
> 时间：2012-06-04T16:25:37.437
> 
> 标签：python, numpy, scipy, statistics, distribution

我不知道如何在 Scipy 中进行两样本 KS 测试。

阅读文档[scipy kstest 后](http://docs.scipy.org/doc/scipy-0.7.x/reference/generated/scipy.stats.kstest.html)

我可以看到如何测试分布与标准正态分布相同的位置

```
from scipy.stats import kstest
import numpy as np

x = np.random.normal(0,1,1000)
test_stat = kstest(x, 'norm')
#>>> test_stat
#(0.021080234718821145, 0.76584491300591395) 
```

这意味着在 p 值为 0.76 时，我们不能拒绝两个分布相同的原假设。

但是，我想比较两个分布，看看我是否可以拒绝它们相同的原假设，例如：

```
from scipy.stats import kstest
import numpy as np

x = np.random.normal(0,1,1000)
z = np.random.normal(1.1,0.9, 1000) 
```

并测试 x 和 z 是否相同

我尝试了天真：

```
test_stat = kstest(x, z) 
```

并得到以下错误：

```
TypeError: 'numpy.ndarray' object is not callable 
```

有没有办法在 Python 中进行两个样本的 KS 测试？如果是这样，我该怎么做？

先感谢您

* * *

## 回答 #1

> 赞同：145
> 
> 时间：2012-06-04T16:32:07.023

您正在使用单样本 KS 测试。您可能需要两个样本测试 [`ks_2samp`](http://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.ks_2samp.html)：

```
>>> from scipy.stats import ks_2samp
>>> import numpy as np
>>> 
>>> np.random.seed(12345678)
>>> x = np.random.normal(0, 1, 1000)
>>> y = np.random.normal(0, 1, 1000)
>>> z = np.random.normal(1.1, 0.9, 1000)
>>> 
>>> ks_2samp(x, y)
Ks_2sampResult(statistic=0.022999999999999909, pvalue=0.95189016804849647)
>>> ks_2samp(x, z)
Ks_2sampResult(statistic=0.41800000000000004, pvalue=3.7081494119242173e-77) 
```

结果可以解释如下：

1.  您可以根据您的样本量将`statistic`python 给出的值与[KS-test 临界值表进行比较。](http://sparky.rice.edu/astr360/kstest.pdf)当`statistic`值高于临界值时，两种分布不同。

2.  或者您可以将`p-value`a 与显着性水平*a*进行比较，通常 a=0.05 或 0.01（您决定，a 越低，越显着）。如果 p 值低于*a*，则很可能两个分布不同。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-05-02T07:55:53.680

这就是 scipy 文档所说的：

> 如果 KS 统计量很小或 p 值很高，那么我们不能拒绝两个样本的分布相同的假设。

不能拒绝不代表我们确认。

# android - 如何判断 Android 菜单颜色是什么

> ID：10884672
> 
> 赞同：1
> 
> 时间：2012-06-04T16:25:46.637
> 
> 标签：android, android-menu

我见过有关更改 Android 菜单背景颜色的问题。我不想这样做，我只想确定菜单是暗还是亮，并相应地显示不同的图标。

如何判断 Android 菜单背景是深色还是浅色？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T16:51:32.710

这个问题之前已经描述过了。这里有一些答案：[this](https://stackoverflow.com/questions/2719173/change-background-color-of-android-menu) and [this](https://stackoverflow.com/questions/1593529/android-customize-applications-menu-e-g-background-color) (by wiseman)

# 编辑：

自己没有尝试过，但您可以使用以下代码做一些事情：

```
getTheme().obtainStyledAttributes(android.R.attr.windowBackground); 
```

它返回`TypedArray`，您可以从中以某种方式获取属性的值。

# c# - 结合 XmlSerializer 和 XmlWriter？

> ID：10884675
> 
> 赞同：3
> 
> 时间：2012-06-04T16:25:51.340
> 
> 标签：c#

除了我使用 C# 的 XmlSerializer 序列化为 xml 文件的对象列表之外，我还想在同一个 xml 中存储更多独立元素（主要是来自文本框的字符串）。

```
 public static void SaveBehaviors(ObservableCollection<Param> listParams)
    {
        XmlSerializer _paramsSerializer = new XmlSerializer(listParams.GetType());
        string path = Environment.GetFolderPath(Environment.SpecialFolder.Desktop);
        path += "\\test.xml";
        using (TextWriter writeFileStream = new StreamWriter(path))
        {
            _paramsSerializer.Serialize(writeFileStream, listParams);

            using (XmlWriter writer = XmlWriter.Create(writeFileStream))
            {
                writer.WriteStartElement("Foo"); //test entry...
                writer.WriteAttributeString("Bar", "Some & value");
                writer.WriteElementString("Nested", "data");
                writer.WriteEndElement();
            }
        }
    } 
```

但是，由于添加了元素，反序列化“test.xml”会导致错误。我想在序列化的 xml 文件中写入是禁止的，应该避免吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T16:40:10.513

不，不要那样做。

如果您需要序列化的不仅仅是 ObservableCollection，那么定义一个包含类型并将其*序列化*。

```
public static void SaveBehaviors(ObservableCollection<Param> listParams) 
{ 
    XmlSerializer _paramsSerializer = new XmlSerializer(typeof(ContainingType)); 
    var c = new ContainingType(listParams); 
    c.ExtraInformation = whatever....; 

    string path = Environment.GetFolderPath(Environment.SpecialFolder.Desktop); 
    path += "\\test.xml"; 
    using (TextWriter writeFileStream = new StreamWriter(path)) 
    { 
        _paramsSerializer.Serialize(writeFileStream, c); 
    } 
} 
```

使用 XmlSerializer。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T16:37:00.250

可以做到，但我强烈建议不要使用流来做到这一点。通过在编写器中重新打开流（序列化程序将在完成后将其关闭），您会在开始时开始，这就是您获得 MalFormed xml 的原因。

您可以做的是将流重新加载到 XmlDocument 中。这是一个编辑后的功能，可能对您更有效。

```
public static void SaveBehaviors(ObservableCollection<Param> listParams)
{
    XmlSerializer _paramsSerializer = new XmlSerializer(listParams.GetType());
    string path = Environment.GetFolderPath(Environment.SpecialFolder.Desktop);
    path += "\\test.xml";
    using (TextWriter writeFileStream = new StreamWriter(path))
    {
        _paramsSerializer.Serialize(writeFileStream, listParams);

        using (XmlDocument doc = new XmlDocument())
        {
            doc.Load(path);//load from the saved document
            XmlNode fooNode = doc.CreateElement("foo");//create node
            XmlAttribute fooAtt = doc.CreateAttribute("bar");//create attribute
            fooAtt.InnerText = "some att data";//set data
            fooNode.InnerText = "some node text";//set data
            fooNode.Attributes.Append(fooAtt);//add attribute to node
            doc.DocumentElement.AppendChild(fooNode);//add node to document
            doc.Save(path);//save the changes made
        }
    }
} 
```

您可以为此使用 XmlWriter，但危险在于确保 WriteStream 将数据放在正确的位置。目前，我个人对 XmlWriter 的了解还不够。这将需要大量的实验并查看我的输出文件。仅使用 XmlDocument 提供的内置格式要容易得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T16:40:43.987

这不是被禁止的，您只是在编写一个带有多个根标签的非法 xml 文件 - 您需要在编写序列化对象之前写出初始元素标签，然后在写出自定义元素后关闭该标签 - 在您使用的代码模式，您需要手动编写此标签和结束标签

# php - 图书馆数据库

> ID：10884677
> 
> 赞同：1
> 
> 时间：2012-06-04T16:25:57.900
> 
> 标签：php, mysql, database, many-to-many

所以我和我的同事被指派制作一个图书馆数据库作为课程的任务，然后制作一个 html 数据库界面，在那里有人可以在数据库中执行某些任务，例如插入行、删除行、查找行等。

我们已经创建了数据库，导入了它，但问题在于向其中插入元素。

例如，books 表与 authors 表有多对多的关系（每个表的主键分别是 ISBN 和作者 ID）所以当我们想在我们的数据库中插入一本书及其作者时，我们不不知道该怎么做，因为它们在不同的表中。我们对如何将单个表单中的数据放在具有不同主键的多个表中感到困惑。

我们一直试图找到这样的例子，但无济于事。

![](../Images/d4149a8df293d4389b52dc5c638c30a9.png)

甚至指向教程之类的链接也很受欢迎。

服务器端代码是 PHP。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T17:12:48.767

我有一些建议给你

1.  使用主题名称的下拉框并通过主题表填充它，因此您只能选择数据库中的主题名称。

2.  输入书籍详细信息（表中的所有值以及主题名称）后，手动将 ISBN 插入 Authors 表中。

3.  在图书用户界面上，出版商名称也使用下拉框（因为很多人不记得出版商代码），然后在回发时，您可能会从 value ="??" 中 pivk 值出版商代码。
    `<select>` `<option value="Code1234">Sams Publisher</option>` `</select>`

4.  如果您在同一页面中添加 Author , Publisher , Book 和 subject 的 Editor 表单，用户输入的字段太多，他可能会感到困惑，但由于这只是一个家庭作业，您可以忽略这一点并尽力而为在一页上管理它们。

**示例库数据库：** ![在此处输入图像描述](../Images/307b15ec72d04e2615edeaee68c43448.png)
[来源：](http://msdn.microsoft.com/en-us/library/xaa0he85%28v=vs.71%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T16:55:52.670

您可以简单地收集表单变量并构建所需的 SQL 语句。我不是 PHP 专家，所以我只熟悉使用 PHP 的 mySQL 插件。

考虑一个带有地址部分的人员表单，我想将其添加到单独的表中：

```
 <form action="makePerson.php" method="POST">
    First Name: <input type="text" name="firstName"/>
    First Name: <input type="text" name="lastName"/>
    Address: <input type="text" name="address"/>
    <input type="submit"/>
 </form> 
```

现在我的脚本（这是未经测试的，我的 PHP 生锈了）

```
 $firstName = $_POST['firstName'];
 $lastName = $_POST['lastName'];
 $address = $_POST['address'];

 $id = generateId();

 $person_insert = "insert into person values (" . $id . ", " . $firstName . ", " . $lastName . ")";
 $address_insert = "insert into address values (" . $address . ", " . $id . ")";

 mysql_execute($person_insert);
 mysql_execute($address_insert); 
```

这是一般的想法。请注意，这不是生产质量代码，只是一个示例。

# c++ - 基于 C++ 的 MEX 文件的 GCC 3.4 与 4.4？

> ID：10884681
> 
> 赞同：1
> 
> 时间：2012-06-04T16:26:23.770
> 
> 标签：c++, matlab, gcc, mex, gcc3

使用 gcc 3.4 与 4.4 编译现代 Matlab MEX 文件有哪些权衡/顾虑？

我需要将一些现成的 C++ 代码 ( [kdtree](http://www.mathworks.com/matlabcentral/fileexchange/21512) ) 编译为 MEX 文件，以便在 Fedora v16 下与 MATLAB (R2012a) 一起使用。我使用集群默认的最新 GCC 编译器 (4.6.x) 遇到了符号问题。并且系统管理员非常抗拒让Matlab[官方支持](http://www.mathworks.com/support/compilers/R2012a/glnxa64.html)的编译器gcc 4.4.x 可用。（不知道为什么）所以，他建议使用旧的（大约 2006 年）gcc 3.4.6 编译器。所以我的问题是，如果使用旧的 gcc 编译器有任何权衡或问题怎么办？表现？64位支持？线程安全（或真正的多个并行调用）？ETC？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T16:50:00.480

您主要错过了 c++11 功能的初步实现（包括标准化线程、可变参数模板等[http://wiki.apache.org/stdcxx/C%2B%2B0xCompilerSupport](http://wiki.apache.org/stdcxx/C%2B%2B0xCompilerSupport)）。只要两个编译器都生成与 MATLAB/Octave 兼容的 ABI 二进制文件，就没有任何特定于版本的安全问题。没有 c 编译器可以为您解决共享状态问题。性能会略有不同，但并不显着。在任何一个编译器版本中，我都确信您的代码会有更优化的实现。gcc 3.4 支持 64 位。

# javascript - 正则表达式返回一些尴尬的值

> ID：10884683
> 
> 赞同：3
> 
> 时间：2012-06-04T16:26:26.607
> 
> 标签：javascript, html-parsing, html

我有以下 javascript 代码：

```
<script type="text/javascript"> //javascript starts

 var patt=/[<](\S+).*>(.*)<\/\1>/;
 var str='<a id="test">hi</a> <p></p>';

 alert(str.match(patt));
 alert(patt.exec(str));

</script> 
```

预计**会在 html 文档中找到所有标签**。所以理想情况下它应该返回`<a id="test">hi</a>, <p></p>`。

但它目前返回`<a id="test">hi</a>, a ,hi`。

***为什么会这样？***

还有另一个问题，**and****和 which 更好用有****什么区别？`str.match(patt)``patt.exec(str)`**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T16:29:10.800

```
var patt=/[<](\S+).*>(.*)<\/\1>/g; 
```

尝试指定`global`修饰符（否则它将在找到的第一次出现处停止）。

关于你的第二个问题 MDN 是一个很好的资源：
来自[https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/match](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/match)

> 如果正则表达式不包含`g`标志，则返回与 regexp.exec(string) 相同的结果。如果正则表达式包含`g`标志，则该方法返回一个包含所有匹配项的数组。如果没有匹配项，则该方法返回 null。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T16:55:46.013

您需要将全局修饰符 , 附加`g`到您的正则表达式：`/[<](\S+).*>(.*)<\/\1>/g`。

*   如果您不使用`g`全局修饰符，[`match`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/match)并且[`exec`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/RegExp/exec)将返回一个数组，该数组包含*字符串中的整个第一个匹配*项作为第一个元素，然后是匹配项中的任何带*括号*的匹配模式作为后续数组元素。

*   如果您确实使用了`g`修饰符，`match`并且`exec`将从字符串中获取所有匹配项。 `match`将它们作为数组返回，并将`exec`为每个匹配返回一个数组（*使用*匹配模式，就像没有匹配模式一样`g`），但多次调用`exec`将返回一个不同的匹配，直到所有匹配都被报告（参见下面的示例）。

一般来说，我会推荐`match`over `exec`，因为`exec`依赖于正则表达式维护状态（特别是，`lastIndex`匹配应该恢复的字符串的索引）。如果您想在多个字符串上使用正则表达式，我发现这是有害的：

```
var reg = /\w/g;
reg.exec("foo"); // ["f"]
reg.exec("foo"); // ["o"]
reg.exec("bar"); // ["r"] -- does not start at the beginning of the string 
```

将其与`match`行为进行比较：

```
var reg = /\w/g;
"foo".match(reg); // ["f", "o", "o"]
"bar".match(reg); // ["b", "a", "r"]
// we can now use the arrays to get individual matches 
```

但是，如果您需要在全局搜索中为*每个匹配项获取带**括号的匹配模式*，则必须使用，因为全局应用程序仅获取整个匹配项的列表，而不是与这些匹配项匹配的模式。*`exec``match`*

 *```
// the ending digit is a match pattern
var reg = /\w(\d)/g;

// match only gets list of whole matches
"d1b4h7".match(reg); // ["d1","b4","h7"] 

// exec gets the match and the match pattern
reg.exec("d1b5h7"); // ["d1","1"]
reg.exec("d1b5h7"); // ["b4","4"]
reg.exec("d1b5h7"); // ["h7","7"] 
```

**总之**，听起来您想使用`match`全局修饰符，因为您不需要匹配模式信息。如果您确实需要匹配模式信息，请通过使用循环重复调用来获取所有匹配项`exec`，直到`exec`返回`null`而不是数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T16:49:40.810

尝试这个：

```
var patt=/<\S+[^>]*>[^<]*<\/\S+>/g; 
```

额外的`a`and`hi`存在是因为您将它们作为捕获组。这个只会返回标签。它的一个缺陷是它会匹配`<begin>dfgdf</diffEnd>`。*

# android - 在当前语言环境中显示日期

> ID：10884691
> 
> 赞同：6
> 
> 时间：2012-06-04T16:27:04.207
> 
> 标签：android, date, localization, locale

我有一个输入日期时间字符串：

> 2012-06-04 15:41:28

我想为各个国家正确展示它。例如，在欧洲，我们使用 dd.MM.yyyy，而美国使用 MM/dd/yyyy。

我当前的代码是这样的：

```
TextView timedate = (TextView) v.findViewById(R.id.report_date);
SimpleDateFormat curFormater = new SimpleDateFormat("yyyy-MM-dd kk:mm:ss"); 
curFormater.setTimeZone(TimeZone.getDefault());
Date dateObj = curFormater.parse(my_input_string); 
timedate.setText(dateObj.toLocaleString()); 
```

但它并不能完全按照我的意愿工作（即使在我的手机上，我也总是得到像“2012 年 6 月 4 日下午 3:41:28”这样的“统一”结果）。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-10-23T18:35:27.780

尝试这个：

```
TextView timedate = (TextView) v.findViewById(R.id.report_date);
SimpleDateFormat curFormater = new SimpleDateFormat("yyyy-MM-dd kk:mm:ss"); 
curFormater.setTimeZone(TimeZone.getDefault());
Date dateObj = curFormater.parse(my_input_string);

int datestyle = DateFormat.SHORT; // try also MEDIUM, and FULL
int timestyle = DateFormat.MEDIUM;
DateFormat df = DateFormat.getDateTimeInstance(datestyle, timestyle, Locale.getDefault());

timedate.setText(df.format(dateObj)); // ex. Slovene: 23\. okt. 2014 20:34:45 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-05T12:08:21.377

在当前语言环境（设备语言环境！）中获取当前日期的最简单方法：

```
String currentDate = DateFormat.getDateInstance().format(Calendar.getInstance().getTime()); 
```

如果您想拥有不同样式的日期，请使用`getDateInstance(int style)`：

```
DateFormat.getDateInstance(DateFormat.FULL).format(Calendar.getInstance().getTime()); 
```

其他样式：`DateFormat.LONG`, `DateFormat.DATE_FIELD`, `DateFormat.DAY_OF_YEAR_FIELD`, 等（使用 CTRL+Space 查看所有样式）

如果你也需要时间：

```
String currentDateTime = DateFormat.getDateTimeInstance(DateFormat.DEFAULT,DateFormat.LONG).format(Calendar.getInstance().getTime()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T16:43:22.493

你试过这个变种：

```
 SimpleDateFormat sdf = new SimpleDateFormat(format, Locale.US);
   System.err.format("%30s %s\n", format, sdf.format(new Date(0)));
   sdf.setTimeZone(TimeZone.getTimeZone("UTC")); 
```

从文档中得到它。我的意思是使用`format()`方法。

# java - 将整数作为 4 个字节写入文件 java

> ID：10884692
> 
> 赞同：5
> 
> 时间：2012-06-04T16:27:15.920
> 
> 标签：java, file-io

我正在编写一个 java 程序，其中我必须将所有整数写入文件。为了提高效率，我只想将 int 写为 4 个字节（我认为这将是一种二进制文件，但我不确定）并且在从文件中读取时我只想直接读取整数（我不想读取字节然后将它们转换为整数）。有没有办法做到这一点。

我想将数百万个整数写入文件我希望该方法快速高效。

我是新手，所以请忍受我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-04T16:30:47.197

使用`DataOutputStream`类或`RandomAccessFile`. 两者都提供了编写结构化二进制数据的方法，例如您想要的“int as 4 bytes”。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-04T16:32:43.407

```
 FileOutputStream fos = new FileOutputStream("numbers.dat");
 DataOutputStream dos = new DataOutputStream(fos);
 dos.writeInt(my_int);
 dos.flush();
 dos.close(); 
```

如果要缓冲数据，请将文件流包装到缓冲流中，如下所示：

```
FileOutputStream fos = new FileOutputStream("numbers.dat");
BufferedOutputStream bos = new BufferedOutputStream(fos);
dos = new DataOutputStream(bos); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T16:34:53.340

```
 byte[] bytes = ByteBuffer.allocate(4).putInt(myIntVlaue).array(); 
```

# java - JSP 中的 Href 和标签云

> ID：10884693
> 
> 赞同：1
> 
> 时间：2012-06-04T16:27:21.893
> 
> 标签：java, jsp, spring-mvc

我创建了一个标签云。在这个云中我显示了一些值。

```
 <c:forEach items="${alltags}" var="search">
   <a href='${tags.display}'/>
 </c:forEach> 
```

现在。我有另一个jsp，我在其中执行搜索。我有一个输入字段，用户可以在单击按钮时给出一个值并执行搜索。在我尝试的这个特定场合，当用户单击一个值的链接（在云上）以自动发送输入框中的标签值（tags.display）并进行搜索时。

搜索 JSP

```
<form:form method="POST" commandName="search"> 
  <tr>
     <td><spring:message code="blah"/></td>
     <td><form:input path="apath" /></td>
  </tr>
</form>

<input type="submit"/> 
```

你建议我做什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T16:44:53.973

嗯，首先，搜索表单应该使用 GET 而不是 POST：搜索是幂等操作，不会修改服务器端的任何内容。

如果您将方法切换为 GET 并提交表单，您会注意到表单调用的 URL 类似于：`http://www.foo.com/app/search?abstracts=<what the user typed>`.

只需使您的链接具有相同的href，该链接将发送与搜索表单相同的请求：

```
<a href="<c:url value="/search">
             <c:param name="abstracts" value="${tag.display}"/>
         </c:url>">${tag.display}</a> 
```

另外，请注意您的提交输入应该在表单内部，而不是外部。

# javascript - 在 jquerymobile 页面中动态添加元素

> ID：10884696
> 
> 赞同：1
> 
> 时间：2012-06-04T16:27:34.737
> 
> 标签：javascript, jquery, jquery-mobile

当我`element (position : absolute)`在运行时动态附加

```
content part  (data-role=content) 
```

JqueryMobile Page ,`footer`不会根据高度来设置

新添加的元素。谁能告诉我为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T20:20:19.360

这可能是多种原因，如果不查看您的代码就无法告诉您太多。

例如，您有最新的 JQuery 移动版吗？

现在我的猜测是你没有做任何事情来让页脚知道已经动态添加了一个新元素。在我自己的实现中，最新版本的 JQuery mobile 解决了这个问题，但是看看其他解决方案，例如：[如何保持 jquery mobile 页眉和页脚固定？](https://stackoverflow.com/questions/4724068/how-to-keep-jquery-mobile-header-and-footer-fixed)

在这里，iScroll 被用作一个合理的解决方案。您还可以查看：[jQuery 移动收费栏的滚动视图 *not* to be fixed](https://stackoverflow.com/questions/5935693/scrollview-for-jquery-mobile-tollbars-not-to-be-fixed)

# android - 账户文件夹 android

> ID：10884699
> 
> 赞同：2
> 
> 时间：2012-06-04T16:27:55.343
> 
> 标签：android, file, system, internal

`/acct`文件系统层次结构中的文件夹是什么`android`意思？我需要了解文件系统层次结构。对该文件的操作是否会造成任何伤害？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T11:10:49.243

我认为 acct 意味着来自“CPU Accounting Controller”的会计。

[CPU 计费控制器](http://www.mjmwired.net/kernel/Documentation/cgroups/cpuacct.txt)

[cgroups](https://en.wikipedia.org/wiki/Cgroups)

# php - 如何将字符串的一部分移动到另一个偏移量？

> ID：10884701
> 
> 赞同：0
> 
> 时间：2012-06-04T16:28:06.277
> 
> 标签：php

我有一个包含 HTML 页面的字符串。我需要将字符串的一部分（例如，包含 HTML DIV 的部分）从位置 X 移动到位置 Y 到字符串中。

在 PHP 中实现这一目标的最简单方法是什么？

# sql-server - Visual Studio 数据库项目：在创建之前检查 SQL 服务器登录是否存在

> ID：10884704
> 
> 赞同：14
> 
> 时间：2012-06-04T16:28:10.037
> 
> 标签：sql-server, visual-studio-2010, login, database-project

当我为 SQL 2012 创建一个 Visual Studio 数据库项目并将其与现有数据库同步（使用比较架构）时，我还同步了一个 SQL 服务器登录。Visual Studio 为登录生成以下脚本：

```
CREATE LOGIN [my_user] WITH PASSWORD = 'somesecurepass' 
```

当我尝试在存在此登录名的服务器上发布生成的 SQL 时，sqlcmd 向我显示错误：

```
The server principal my_user already exists. 
```

当我查看Visual Studio生成的sql脚本时，我看到很多对象被包裹在IF EXISTS语句中，但是CREATE LOGIN没有被包裹！

我试图在项目中的SQL脚本中手动包装它，但是随后项目没有构建并且指向IF的错误：

```
SQL70001: This statement is not recognized in this context. 
```

现在，我如何强制 Visual Studio 使用 IF EXISTS 检查生成登录创建脚本并且不丢失同步功能？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-08T18:45:17.253

将脚本文件 (*.sql) 的 Build Action 属性更改为 None。这解决了问题。

通过右键单击解决方案资源管理器中的 sql 文件，然后单击属性来访问构建操作属性。或者，在解决方案资源管理器中突出显示该文件，然后按“F4”。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-02-07T22:09:01.640

对于其他正在寻找**完整**答案的人，这是我所做的：

1.  在 Visual Studio 中，右键单击您的登录脚本，或者在我的情况下是链接服务器脚本。
2.  单击**属性**。
3.  在 Advanced -> **Build Action**下，将其从 Build 更改为**None**。
4.  在您的**PreDeployment**脚本中，添加一行来运行此脚本。对我来说，我将链接服务器脚本移动到与 PreDeployment 脚本相同的文件夹中。然后我可以做

    `:r .\linkedserver.sql`

5.  当您部署 decpac 时，您的登录脚本或链接服务器脚本将成功执行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-21T09:03:41.433

不确定我是否正确理解了这个问题，但我来到这里是因为类似的情况。在用“if”和“try catch”浪费了几个小时之后，我的回答是：

查看[DacPac exclude users and logins on export 或 import](https://stackoverflow.com/questions/21917669/dacpac-exclude-users-and-logins-on-export-or-import)我发现应该有一个选项来**排除登录名**。我发现您可以更改数据库项目的**发布设置**，但这些设置存储在 *.user 文件中，我通常不会将其放入源代码管理中。进一步看，我发现**了 sqlpackage.exe 的命令行选项** [https://blogs.msdn.microsoft.com/ssdt/2015/02/23/new-advanced-publish-options-to-specify-object-types-to-排除或不丢弃/](https://blogs.msdn.microsoft.com/ssdt/2015/02/23/new-advanced-publish-options-to-specify-object-types-to-exclude-or-not-drop/)。这似乎工作得很好，还因为您可以从 NuGet 获取 sqlpackage.exe（请参阅[https://blogs.msdn.microsoft.com/ssdt/2016/08/22/releasing-ssdt-with-visual-studio- 15-preview-4-and-introducing-ssdt-msbuild-nuget-package/](https://blogs.msdn.microsoft.com/ssdt/2016/08/22/releasing-ssdt-with-visual-studio-15-preview-4-and-introducing-ssdt-msbuild-nuget-package/)）。因此，没有任何方法可以在 CI 机器上构建并将结果部署到服务器。

**编辑**：这是在带有相应 SSDT 的 VS2015 上。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T08:31:28.657

我有完全相同的问题，我的解决方案是使用预部署脚本删除用户：

```
IF EXISTS(SELECT TOP 1 1 FROM master.sys.server_principals WHERE name = 'my_user') BEGIN
   DROP LOGIN [my_user]
END 
```

问题是您可能在创建后更改了密码、权限或设置，`LOGIN [my_user]`在删除并创建后，您将丢失自定义设置。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-04T22:04:19.047

```
IF NOT EXISTS
(
SELECT [Column Name Where Username Is Stored] 
FROM [Table Name That Holds The Login's] 
WHERE name = 'my_user'
)
BEGIN 
CREATE LOGIN [my_user] WITH PASSWORD = 'somesecurepass'

ELSE.... 
```

然后您可以编写一个 else 语句来处理它，但是您可以将密码更新为新密码，或者只是返回一条消息，说明用户已经存在。让我知道您是否需要帮助编写该部分。

# cmake - CMake：自定义目标的标志

> ID：10884710
> 
> 赞同：2
> 
> 时间：2012-06-04T16:28:59.540
> 
> 标签：cmake

如何以具有两个目标（默认）和`CMakeLists.txt`的方式编写，其中目标具有与目标标志不同的标志。问题是，当我为测试构建库时，我需要链接一些不应该在发布版本中的东西。`all``test``test``all`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T20:10:02.027

```
CMAKE_MINIMUM_REQUIRED(VERSION 2.8.0)
PROJECT (RootProject)

OPTION(BUILD_TESTING "Build tests." OFF)
IF(BUILD_TESTING)
  # custom compiler option
  ADD_DEFINITIONS(-Zc:wchar_t-)
ENDIF(BUILD_TESTING)

ADD_SUBDIRECTORY(Lib1)
ADD_SUBDIRECTORY(Lib2)
ADD_SUBDIRECTORY(Lib3)
ADD_SUBDIRECTORY(Lib4)
ADD_SUBDIRECTORY(Bin)

IF(BUILD_TESTING)
  # more custom compiler option just for tests
  ADD_DEFINITIONS(-Zc:wchar_t-)

  ADD_SUBDIRECTORY(TestLib1)
  ADD_SUBDIRECTORY(TestLib2)
  ADD_SUBDIRECTORY(TestBin)
  MESSAGE( STATUS "Testing folders have been added." )
ENDIF(BUILD_TESTING) 
```

# wxwidgets - wxWindows 2.9 二进制文件

> ID：10884711
> 
> 赞同：2
> 
> 时间：2012-06-04T16:29:00.117
> 
> 标签：wxwidgets, wxhaskell

升级到新的 Haskell 平台后，我现有的 wxHaskell 程序坏了。他们现在似乎都需要 wxWidgets 2.9，我找不到任何二进制版本。wxPack 有 2.8，除此之外，必须获得一个编译器并根据我所看到的在本地构建它。

有来自各种来源的教程，每篇都有几页长，有关于设置、更改配置等的各种建议。安装 wxConfig、安装 minGW 编译器、设置配置、重建等。

是否有任何简单二进制安装的来源？我希望有一些简单*的 apt-get*或类似*cabal*的工具，Haskell 库工具（在 Windows 上？）似乎不如我熟悉的其他工具集成。

（更新）我确实在本地安装和编译了 wxWidgets，但仍然无法安装 wxHaskell 组件。我确信所有这一切只需要一些相当简单的细节，但过了一段时间，希望不必在这上面花费更多时间，并希望它更加自动化！

```
Configuring wxc-0.90.0.3...
Configuring wxc to build against wxWidgets 2.9

setup.exe: Missing dependencies on foreign libraries:
* Missing C libraries: wxmsw29ud_all, wxtiffd, wxjpegd, wxpngd, wxzlibd,
wxregexud, wxexpatd, wxregexud
This problem can usually be solved by installing the system packages that
provide these libraries (you may need the "-dev" versions). If the libraries
are already installed but in a non-standard location then you can use the
flags --extra-include-dirs= and --extra-lib-dirs= to specify where they are.
cabal: Error: some packages failed to install:
wx-0.90.0.1 depends on wxc-0.90.0.3 which failed to install.
wxc-0.90.0.3 failed during the configure step. The exception was: ExitFailure 1
wxcore-0.90.0.1 depends on wxc-0.90.0.3 which failed to install. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T14:55:02.423

是的你可以。CodeLite（我使用的 C++ IDE）最近升级为使用 wx29。由于 repo 上还没有二进制文件，Dave 设置了一些。在下面的 CodeLite wiki 中找到所有说明

[wxWidgets 2.9 包和存储库](http://www.codelite.org/LiteEditor/WxWidgets29Binaries)

如果您使用的是 windows 只需转到 Codelite 的下载页面并使用 wxWidgets 下载 codelite。安装它，将安装的 wxWidgets 目录复制到需要的地方！

似乎也有官方的二进制文件。我从来没有测试过在那里下载任何东西，所以你自己试试。链接是[这个](http://sourceforge.net/projects/wxwindows/files/2.9.4/binaries/)

随时问任何问题

# java - 带有 json 响应的 api.stackexchange 上的 Java Http 请求

> ID：10884713
> 
> 赞同：0
> 
> 时间：2012-06-04T16:29:08.780
> 
> 标签：java, json, httprequest, gson

我正在尝试将 api-stackexchange 与 java 一起使用，但是当我执行请求并尝试使用 json 解析器解析响应时出现错误。

```
public ArrayList<Question> readJsonStream(InputStream in) throws IOException {
    JsonReader reader = new JsonReader(new InputStreamReader(in, "UTF-8"));
    reader.setLenient(true);
    try {
        System.out.println(reader.nextString()); // � special character
                    return readItem(reader);
    } finally {
        reader.close();
    }
}

public ArrayList<Question> readItem(JsonReader reader) throws IOException {
    ArrayList<Question> questions = new ArrayList<Question>();

    reader.beginObject();

    while (reader.hasNext()) {
        System.out.println("here");//not print the error is before
        String name = reader.nextName();
        if (name.equals("items")) {
            questions = readQuestionsArray(reader);
        }
    }
    reader.endObject();
    return questions;
}

public final static void main(String[] args) throws Exception {

    URIBuilder builder = new URIBuilder();
    builder.setScheme("http").setHost("api.stackexchange.com").setPath("/2.0/search")
    .setParameter("site", "stackoverflow")
    .setParameter("intitle" ,"workaround")
    .setParameter("tagged","javascript");
    URI uri = builder.build();

    String surl = fixEncoding(uri.toString()+"&filter=!)QWRa9I-CAn0PqgUwq7)DVTM");
    System.out.println(surl);
    Test t = new Test();
    try {
        URL url = new URL(surl);
        t.readJsonStream(url.openStream());

    } catch (IOException e) {
        e.printStackTrace();
    }

} 
```

错误是：

> com.google.gson.stream.MalformedJsonException：第 1 行第 19 列的预期文字值

这是 Json 的示例：

```
 {
          "items": [
            {
              "question_id": 10842231,
              "score": 0,
              "title": "How to push oath token to LocalStorage or LocalSession and listen to the Storage Event? (SoundCloud Php/JS bug workaround)",
              "tags": [
                "javascript",
                "javascript-events",
                "local-storage",
                "soundcloud"
              ],
              "answers": [
                {
                  "question_id": 10842231,
                  "answer_id": 10857488,
                  "score": 0,
                  "is_accepted": false
                }
              ],
              "link": "http://stackoverflow.com/questions/10842231/how-to-push-oath-token-to-localstorage-or-localsession-and-listen-to-the-storage",
              "is_answered": false
            },... 
```

这是请求的 URL：

> [https://api.stackexchange.com/2.0/search?tagged=javascript&intitle=workaround&site=stackoverflow&filter=!)QWRa9I-CAn0PqgUwq7)DVTM](https://api.stackexchange.com/2.0/search?tagged=javascript&intitle=workaround&site=stackoverflow&filter=!)QWRa9I-CAn0PqgUwq7)DVTM)

所以有什么问题？Json真的格式不正确吗？还是我做错了什么？

谢谢，安东尼

编辑：

我现在确定问题出在请求上，我通过浏览器将请求的响应粘贴到我在服务器 Apache 中托管的文本文件中，它工作正常。我能够解析响应的 Json。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T05:00:44.307

更改此代码：

```
 if (name.equals("items")) {
        questions = readQuestionsArray(reader);
    } 
```

到这段代码：

```
 if (name.equals("items")) {
        questions = readQuestionsArray(reader);
    } else {
        reader.skipValue();
    } 
```

否则你最终`nextName()`会连续调用两次，这是无效的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T11:55:05.457

响应中的数据使用 deflate 算法进行压缩。所以，我用 GZIPInputStream 封装了 InputStream：

```
public final static void main(String[] args) throws Exception {
    URIBuilder builder = new URIBuilder();
builder.setScheme("http").setHost("api.stackexchange.com").
        setPath("/2.0/search").
        setParameter("site", "stackoverflow").
        setParameter("intitle" ,"workaround").
        setParameter("tagged","javascript");
URI uri = builder.build();
ArrayList<Question> q =null;
String result = "";
String surl = fixEncoding(uri.toString()+"&filter=!)QWRa9I-CAn0PqgUwq7)DVTM");
System.out.println(surl);
Test t = new Test();

    try {
    URL url = new URL(surl);
    q = t.readJsonStream(new GZIPInputStream(url.openStream()));        
} 

    catch (IOException e) {
        e.printStackTrace();
    }

    System.out.println(result);

    for (Question question : q) {
        System.out.println(question.title);
    }
} 
```

# maven - 为什么 Maven 错误地将快照上传到发布存储库？

> ID：10884714
> 
> 赞同：2
> 
> 时间：2012-06-04T16:29:09.023
> 
> 标签：maven, nexus, maven-deploy-plugin

我正在尝试使用 maven-deploy-plugin 将版本和快照上传到 Nexus 存储库。但是我遇到了这个错误

```
[INFO] [deploy:deploy {execution: default-deploy}]
[INFO] Retrieving previous build number from nexus
Uploading: http://localhost:8081/nexus/content/repositories/snapshots/info/afilias/edr/edr-app/1.0.4-SNAPSHOT/edr-app-1.0.4-20120605.140242-20.jar
56K uploaded  (edr-app-1.0.4-20120605.140242-20.jar)
[INFO] Uploading project information for edr-app 1.0.4-20120605.140242-20
[INFO] Retrieving previous metadata from nexus
[INFO] Uploading repository metadata for: 'artifact info.afilias.edr:edr-app'
[INFO] Retrieving previous metadata from nexus
[INFO] Uploading repository metadata for: 'snapshot info.afilias.edr:edr-app:1.0.4-SNAPSHOT'
[INFO] Retrieving previous build number from nexus
Uploading: http://localhost:8081/nexus/content/repositories/snapshots/info/afilias/edr/edr-app/1.0.4-SNAPSHOT/edr-app-1.0.4-20120605.140242-20.tar.gz
4286K uploaded  (edr-app-1.0.4-20120605.140242-20.tar.gz)
[INFO] [deploy:deploy-file {execution: default}]
Uploading: http://localhost:8081/nexus/content/repositories/releases/info/afilias/edr/edr-app/1.0.4/edr-app-1.0.4.tar.gz
89530K uploaded  (edr-app-1.0.4.tar.gz)
[INFO] Uploading project information for edr-app 1.0.4
[INFO] Retrieving previous metadata from remote-repository
[INFO] Uploading repository metadata for: 'artifact info.afilias.edr:edr-app'
[INFO] Retrieving previous build number from remote-repository
[INFO] repository metadata for: 'snapshot info.afilias.edr:edr-app:1.0.4-SNAPSHOT' could not be found on repository: remote-repository, so will be created
Uploading: http://localhost:8081/nexus/content/repositories/releases/info/afilias/edr/edr-app/1.0.4-SNAPSHOT/edr-app-1.0.4-20120605.140242-20.tar.gz
[INFO] ------------------------------------------------------------------------
[ERROR] BUILD ERROR
[INFO] ------------------------------------------------------------------------
[INFO] Error deploying attached artifact /home/mren/trunk2/target/edr-app-1.0.4-SNAPSHOT.tar.gz: Error deploying artifact: Failed to transfer file: http://localhost:8081/nexus/content/repositories/releases/info/afilias/edr/edr-app/1.0.4-SNAPSHOT/edr-app-1.0.4-20120605.140242-20.tar.gz. Return code is: 400 
```

这是我在 pom.xml 中的配置：

```
<project>
 ...
    <distributionManagement>
       <repository>
          <id>releases</id>
          <name>Releases</name>
          <url>http://localhost:8081/nexus/content/repositories/releases</url>
        </repository>
        <snapshotRepository>
          <id>snapshots</id>
          <name>Snapshots</name>
          <url>http://localhost:8081/nexus/content/repositories/snapshots</url>
        </snapshotRepository>
      </distributionManagement>
  ...
  <build>
   ...
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-deploy-plugin</artifactId>
        <version>2.7</version>
        <executions>
          <execution>
            <phase>deploy</phase>
            <goals>
              <goal>deploy-file</goal>
            </goals>
            <configuration>
              <file>target/edr-install-1.0.4-${revision}.tar.gz</file>
              <url>${project.distributionManagement.repository.url}</url>
              <packaging>tar.gz</packaging>
              <artifactId>artifactId</artifactId>
              <groupId>groupId</groupId>
              <version>1.0.4-${revision}</version>
            </configuration>
          </execution>
        </executions>
      </plugin>
   ...
  </build>
...
</project> 
```

从我的 settings.xml 文件中：

```
<settings>
  <server>
      <id>releases</id>
      <username>admin</username>
      <password>admin123</password>
    </server>
    <server>
      <id>snapshots</id>
      <username>admin</username>
      <password>admin123</password>
    </server>
  </servers>
  <profiles>
    <profile>
      <id>nexus</id>
      <activation>
        <activeByDefault>true</activeByDefault>
      </activation>
      <repositories>
        <repository>
          <id>releases</id>
          <name>Releases</name>
          <url>http://localhost:8081/nexus/content/repositories/releases</url>
          <releases>
            <enabled>true</enabled>
          </releases>
          <snapshots>
            <enabled>false</enabled>
          </snapshots>
        </repository>
        <repository>
          <id>snapshots</id>
          <name>Snapshots</name>
          <url>http://localhost:8081/nexus/content/repositories/snapshots</url>
          <releases>
            <enabled>false</enabled>
          </releases>
          <snapshots>
            <enabled>true</enabled>
          </snapshots>
        </repository>
      </repositories>
      </profile>
  </profiles>
</settings> 
```

我确信这个配置在某个时候有效，但现在它吐出了一个错误。不知道出了什么问题。

并且 nexus 日志告诉我它正在尝试将快照上传到发布存储库

```
jvm 1    | 2012-06-04 14:16:31 INFO  [tp1706427008-35] - org.sonatype.nexus.proxy.maven.maven2.M2Repository - Storing of item releases:/info/afilias/edr/edr-app/1.0.4-SNAPSHOT/edr-app-1.0.4-20120604.181534-1.tar.gz is forbidden by Maven Repository policy. Because releases is a RELEASE repository
jvm 1    | 2012-06-04 14:16:31 ERROR [tp1706427008-35] - org.sonatype.nexus.rest.ContentPlexusResource - Got exception during processing request "PUT http://localhost:8081/nexus/content/repositories/releases/info/afilias/edr/edr-app/1.0.4-SNAPSHOT/edr-app-1.0.4-20120604.181534-1.tar.gz": Storing of item releases:/info/afilias/edr/edr-app/1.0.4-SNAPSHOT/edr-app-1.0.4-20120604.181534-1.tar.gz is forbidden by Maven Repository policy. Because releases is a RELEASE repository 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T19:17:25.780

您的 settings.xml 不正确。[请按照本书章节](http://www.sonatype.com/books/nexus-book/reference/config.html)配置 Maven 以正确使用Nexus。具体使用镜像设置和其中的 url，而不是存储库和 pluginRepository 的特定 url。

它会干扰您正确的 Maven pom，并最终尝试将快照部署到发布存储库中，这是不正确的。

此外，使用正确的目标/命令也很重要。不要直接使用 deploy-file 目标左右。

只需运行命令

`mvn clean deploy`

在构建上。

另一个澄清。Maven 将部署根据版本确定的任何内容。如果它以 -SNASPHOT 结尾，则它是一个开发版本并被发布到快照存储库（并且将允许重新部署增加版本号），如果不是，它被认为是一个发布，并将部署到发布存储库。一个项目不能同时是快照和发布。这是一个或另一个。

不要混合发布和快照这两个概念！

在部署额外的工件方面，如果它们没有关联，或者如果它们正在查看构建助手插件的 attach-artifact 目标，我会将它们拉出到单独的项目/模块中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T17:56:39.277

这是因为您告诉 Maven 部署一个看起来像快照的文件。看看你的 deploy:deploy-file 配置。${revision} 具有与快照相同的格式，因此 Nexus 对其进行了处理：

target/edr-install-1.0.4-${revision}.tar.gz 变为：info/afilias/edr/edr-app/1.0.4-SNAPSHOT/edr-app-1.0.4-20120605.140242-20.tar。广州

作为参考，这里介绍了 Maven 和 Nexus 用来决定快照是/不是什么的正则表达式：http: [//www.sonatype.com/people/2008/05/maven-code-how-to-detect-if-你有一个快照版本/](http://www.sonatype.com/people/2008/05/maven-code-how-to-detect-if-you-have-a-snapshot-version/)

我建议的另一件事是不要使用 deploy:deploy-file，而是使用 buildhelper:attach 附加此 tar.gz，然后文件将被适当命名，避免您对修订所做的所有黑客攻击。

# c++ - 如何创建-编辑-删除excel文件？

> ID：10884726
> 
> 赞同：0
> 
> 时间：2012-06-04T16:30:04.047
> 
> 标签：c++, excel, visual-c++

我正在做一个具有一些简单值（登录名、密码、姓名、年龄）的项目。我在网上搜索如何在 Visual C++ 上创建一个 excel 文件，我无法理解它。我只想要简单的方法，我只想在我的 excel 文件中看到 2 列，其中一列有我的程序的一些登录代码，另一列有密码。我的编程水平不是很高，而且我不会说英语，所以我想你们解释一下或者给我一些简单的东西。

谢谢你的时间

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T16:44:16.510

如果您想要的只是一个包含 2 列数据的简单文件，我会制作一个 CSV（逗号分隔值）文件，该文件可以在 Excel 或任何文本编辑器中打开。CSV 在 Excel 中看起来“不错”，就好像它是一个实际的 XLS 文件一样。此外，您不会被绑定到 Microsoft Office。这个文件可以用简单的字符串操作和文件 I/O 来编写。

格式为：

```
Column1,Column2
data1,data2
data3,data4 
```

但是，这是一个大问题……以纯文本形式存储用户名和密码**绝不**是一个好主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T16:37:32.707

也许这个网站上有一些代码可以帮助你。它似乎有据可查，它是为人们学习而制作的。

[http://www.codeproject.com/Articles/15837/Accessing-Excel-Spreadsheets-via-C](http://www.codeproject.com/Articles/15837/Accessing-Excel-Spreadsheets-via-C)

希望有帮助！

# mysql - 如何在 MySQL 中使用 SUM IF() 而不在查询中硬编码值

> ID：10884727
> 
> 赞同：0
> 
> 时间：2012-06-04T16:30:14.330
> 
> 标签：mysql

我有一个使用 SUM IF() 执行交叉表结果集的查询。在这个查询中，我有 SUM IF() 硬编码的值。问题是新值被添加到数据库中。有没有办法在不对 SUM IF() 中的值进行硬编码的情况下编写查询？这是查询：

> 选择 storeid, sum(if(marketsegmentid = 6, 1, 0)) as `6`, sum(if(marketsegmentid = 7, 1, 0)) as `7`, sum(if(marketsegmentid = 12, 1, 0)) as `12`, sum( if(marketsegmentid = 17, 1, 0)) as `17`, sum(if(marketsegmentid = 22, 1, 0)) as `22`, sum(if(marketsegmentid = 27, 1, 0)) as `27`, sum(if(marketsegmentid = 32 , 1, 0)) as `32`, sum(if(marketsegmentid = 37, 1, 0)) as `37`, sum(if(marketsegmentid = 42, 1, 0)) as `42`, sum(if(marketsegmentid = 47, 1, 0) ) as `47`, sum(if(marketsegmentid = 52, 1, 0)) as `52`, sum(if(marketsegmentid = 97, 1, 0)) as `97`, sum(if(marketsegmentid = 102, 1, 0)) as `102`, sum( if(marketsegmentid = 107, 1, 0)) 作为`107`, sum(if(marketsegmentid = 112, 1, 0)) as `112`, sum(if(marketsegmentid = 117, 1, 0)) as `117`, sum(if(marketsegmentid = 122, 1, 0)) as `122`, sum(if( marketsegmentid = 127, 1, 0)) as `127`, sum(if(marketsegmentid = 132, 1, 0)) as `132`, sum(if(marketsegmentid = 137, 1, 0)) as `137`, sum(if(marketsegmentid = 142, 1 , 0))`142` 来自 storemarketsegments 按 storeid 分组；

查询在报告中使用，结果导出为 CSV。1 用作结果集中的标志。

我查询的表是这样设置的：

```
CREATE TABLE storemarketsegments(id INT NOT NULL, marketsegmentid INT NOT NULL); 
```

市场细分保存在单独的表中：

> 创建表市场段（ID INT NOT NULL AUTO_INCREMENT，主键（id），名称 VARCHAR（45），描述 VARCHAR（45））；

任何帮助将不胜感激。我不确定是否有一种方法可以在不对值进行硬编码的情况下编写查询，并且我不介意在添加新的市场细分时更新报告中的查询，但我想我会检查一下。预先感谢您的协助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T16:35:24.813

您可以将每个计数作为单独的行返回，然后在应用层根据需要进行过滤：

```
select storeid, marketsegmentid, count(*) as Count
from storemarketsegments 
group by storeid, marketsegmentid; 
```

# java - 便携式持久队列 -> 上传器

> ID：10884729
> 
> 赞同：0
> 
> 时间：2012-06-04T16:30:18.980
> 
> 标签：java, objective-c, mobile, architecture

我需要实现一个磁盘支持的队列，它可以接受来自多个线程的实时分析数据，然后通过可能有故障的传输上传该数据。最初针对 Java，但从长远来看，我们需要在 Objective-C、Flash、JavaScript 中使用相同的机制。针对 android Java 和桌面。

这将包含在单个进程中，因此可能会出现 MQ 解决方案。性能是一个重要的考虑点，这意味着我们会牺牲一些可靠性来换取性能。

![架构图](../Images/0780f5038e07fa06c436451c297ead5d.png)

我很好奇两件事：

1.  鉴于上述架构，是否有任何可用的技术可以完全或部分解决这个问题？
2.  鉴于最终在不同平台上重新实现或理想地重新使用这种机制的目标，有没有办法以一种可以在 Objective-C 和 Android Java 中轻松使用的方式来构建它？
3.  这个架构看起来怎么样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T17:41:03.860

如果您想保留有限数量的数据（循环日志），并且能够为其保留固定数量的持久内存，那么最有效[的解决方案是内存映射缓冲区](http://docs.oracle.com/javase/6/docs/api/java/nio/MappedByteBuffer.html)。Persister 只是几个缓冲区的缓存，同时服务于分析队列和上传器。

在其他平台上重新实现它时，该平台可能没有映射工具。在这种情况下，可以直接读取和写入缓冲区。这可能比映射到内存效率低，但仍不低于其他解决方案（例如嵌入式数据库）。

至于架构，图片并不能反映从持久化器中读取数据的情况（否则需要持久化器做什么？）。那么，profiling queue实际上包含了整个数据（包括持久化的），而profiling queue就是内存中的buffers，它们可以不连续，所以叫buffer cache比queue更好。

# jquery - 带有keyup的Jquery复制表单输入

> ID：10884730
> 
> 赞同：0
> 
> 时间：2012-06-04T16:30:19.093
> 
> 标签：jquery, forms

**已解决**需要使用 val 而不是文本。我的错！

将表单域复制到另一个表单域与将表单域复制到跨度 ID 有什么区别？

我可以从输入字段复制到跨度 id 没问题，但是使用相同的方法从表单字段复制到另一个表单字段不起作用。

使用 Jquery 键位

任何人都可以启发我吗？

这是一个**[演示](http://jsfiddle.net/LnDYA/19/)**

提前致谢

```
 <input type="text" name="Quantity" value="100"  id="quantity2" />
    <input type="text" name="Quantity" id="quantity_img2" />

    $("#quantity2").keyup(function () {
    var value = $(this).val();
    $("#quantity_img2").text(value);
    }).keyup(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T16:31:39.427

要设置文本框元素的值，请使用`val()`方法而不是`text()`.

工作演示[http://jsfiddle.net/LnDYA/20/](http://jsfiddle.net/LnDYA/20/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T16:31:37.500

```
$("#quantity_img2").text(value); 
```

应该

```
$("#quantity_img2").val(value); 
```

**[演示](http://jsfiddle.net/thecodeparadox/LnDYA/21/)**

### 为什么会发生这种情况

因为`#quantity_img2`是一个`input field`，一个`form`元素，并且为`input`字段设置值需要[`.val()`](http://api.jquery.com/val)方法。

所以你的代码应该看起来像

```
$("#quantity2").keyup(function () {
  var value = $(this).val();
  $("#quantity_img2").val(value); // not .text()
}).keyup(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T16:33:15.010

[`.val()`](http://api.jquery.com/val)代替`.text()`这样使用

```
$("#quantity2").keyup(function () {
      var value = $(this).val();
      $("#quantity_img2").val(value);
    }).keyup(); 
```

[工作小提琴](http://jsfiddle.net/joycse06/LnDYA/23/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-28T22:04:42.340

我创建了一个名为 val2 的 Jquery 插件，它检测跨度与输入，并且只是整理出何时使用 $().text() 与 $().val()。在跨度上使用 val() 并想知道为什么它被打破只是为了拍前额并说，“当然，哑……它是跨度！” 我创建了这个插件：

```
$.fn.val2 = function (newVal) {

    // Jquery Plugin to improve upon $().val() and agnostically handle get/set of values for a span or input (type="text")
    // http://learn.jquery.com/plugins/basic-plugin-creation/
    // use, get mode: var val = $("#" + id).val2(); 
    // use, set mode: $("#" + id).val2("fred"); 

    if (this !== undefined) {
        // newVal indicates set vs get mode
        if (newVal === undefined) {
            var ret = "";
            if (this.attr("value") === undefined && this.prop("value") === undefined)
                ret = this.text(); // this is a span
            else
                ret = this.val(); // this would be an input
            return ret;
        }
    else {
        if (this.attr("value") === undefined && this.prop("value") === undefined)
            this.text(newVal); // this is a span
        else
            this.val(newVal); // this would be an input
        }
    }
}; 
```

用法示例：

获取方式：

```
var txt = $("#MySpan").val2();
var txt = $("#MyInput").val2(); 
```

设置模式：

```
$("#MySpan").val2("fred");
$("#MyInput").val2("fred"); 
```

# c# - 在签入和待更改窗口中获取选定的文件？

> ID：10884731
> 
> 赞同：2
> 
> 时间：2012-06-04T16:30:21.610
> 
> 标签：c#, visual-studio-2008, tfs

我的团队没有升级到 VS 2010 的选项，因此无法使用其 GatedCheckIn 功能。我正在开发一个 Visual Studio 插件来填补这个空白。我想知道是否有可能“破解”到 Visual Studio 中，而不是提供 Check In and Pending Changes 窗口的副本。实际上，内置窗口允许您做很多事情，包括通过带有复选框的树视图/列表视图仅签入具有待处理更改的文件子集。这种方法还将最小化该插件用户的学习曲线，因为当我们的插件在后台工作时，他们可以继续使用熟悉的界面。

如何捕获发送到 Visual Studio 工具窗口内部元素的事件？拦截 Check In 按钮单击（甚至是 Source Explorer 上的右键单击 -> Check In... 事件）很容易，但我没有找到答案。对话框本身可以通过

`_applicationObject.Windows.Item("{2456BD12-ECF7-4988-A4A6-67D49173F564}")`

但它不是 UIHierarchy，因此不支持获取具有待处理更改的文件的 Treeview 的方法。

BuddyBuild 虽然具有相同的目的，但有自己的 GUI，因此不能完全提供我们想要的东西。

太感谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T15:33:17.673

有一个[接口](http://msdn.microsoft.com/en-us/library/microsoft.teamfoundation.versioncontrol.client.ipendingcheckinpendingchanges)可以获取挂起的更改。

（每当此列表更改时，也会触发一个事件，但我认为没有必要对此进行挂钩。）

如果您的“签入前”事件是在单击签入按钮时发生的，那么您还需要在自动创建搁置集并对自动构建进行排队之前查询冲突并使其全部解决。

-萨默:)

# ios - 使用 UISlider 缩放 UIView

> ID：10884735
> 
> 赞同：0
> 
> 时间：2012-06-04T16:30:26.923
> 
> 标签：ios, uislider, cgaffinetransformscale

我正在尝试使用 UISlider 缩放 UIView 但这种方法的结果并不好：

```
- (void)setScale:(float)scale {
   CGAffineTransform transform = CGAffineTransformScale(myView.transform, scale, scale);
            myView.transform = transform;

} 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T17:37:55.317

您想根据恒等变换（表示没有任何更改的对象）更改比例。此代码有效：

```
- (void)sliderDidChangeValue:(id)sender
{
    // the slider
    UISlider *slider = sender;

    // get your view or use the ivar if you have it in one
    UIView *view = [self.view viewWithTag:12];

    CGAffineTransform transform = CGAffineTransformScale(CGAffineTransformIdentity, slider.value, slider.value);
    view.transform = transform;
} 
```

当您创建滑块时，如果您的视图以全尺寸开始，您可能希望将值从 1 开始。

# c# - 如何获取 C# 脚本并使其输出 html 页面？

> ID：10884736
> 
> 赞同：0
> 
> 时间：2012-06-04T16:30:29.900
> 
> 标签：c#, iis

我通常使用 PHP 和 Python 编写代码，但在这种情况下，我必须使用 C# 编写代码。

我有这个代码，它真的很好用。它是一个控制台应用程序。

但是你怎么能把它变成一个 C# .net 以便可以把它放在一个 IIS 上呢？

基本上不是将其输出到控制台，而是将其写入浏览器。

我试图搜索 C# Web，但找不到任何东西。

谢谢您的帮助！

```
using System;
using System.Net;
using Independentsoft.Exchange;

namespace Sample
{
    class Program
    {
        static void Main(string[] args)
        {
            NetworkCredential credential = new NetworkCredential("username", "password");
            Service service = new Service("https://myserver/ews/Exchange.asmx", credential);

            try
            {
                IsGreaterThanOrEqualTo restriction1 = new IsGreaterThanOrEqualTo(AppointmentPropertyPath.StartTime, DateTime.Today);
                IsLessThanOrEqualTo restriction2 = new IsLessThanOrEqualTo(AppointmentPropertyPath.EndTime, DateTime.Today.AddDays(1));
                And restriction3 = new And(restriction1, restriction2);

                FindItemResponse response = service.FindItem(StandardFolder.Calendar, AppointmentPropertyPath.AllPropertyPaths, restriction3);

                for (int i = 0; i < response.Items.Count; i++)
                {
                    if (response.Items[i] is Appointment)
                    {
                        Appointment appointment = (Appointment)response.Items[i];

                        Console.WriteLine("Subject = " + appointment.Subject);
                        Console.WriteLine("StartTime = " + appointment.StartTime);
                        Console.WriteLine("EndTime = " + appointment.EndTime);
                        Console.WriteLine("Body Preview = " + appointment.BodyPlainText);
                        Console.WriteLine("----------------------------------------------------------------");
                    }
                }

                Console.Read();
            }
            catch (ServiceRequestException ex)
            {
                Console.WriteLine("Error: " + ex.Message);
                Console.WriteLine("Error: " + ex.XmlMessage);
                Console.Read();
            }
            catch (WebException ex)
            {
                Console.WriteLine("Error: " + ex.Message);
                Console.Read();
            }
        }
    }
} 
```

编辑：我试图使它成为一个 asp.net 页面，但它不会在屏幕上打印任何内容。

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Default.aspx.cs" Inherits="Plan.NBT.Final.Default" %>

<%@ Import Namespace="System" %>
<%@ Import Namespace="System.Net" %>
<%@ Import Namespace="Independentsoft.Exchange" %>

<%
    NetworkCredential credential = new NetworkCredential("tedy", "123456889");
    Service service = new Service("https://area51.com/EWS/exchange.asmx", credential);

    try
    {
        IsGreaterThanOrEqualTo restriction1 = new IsGreaterThanOrEqualTo(AppointmentPropertyPath.StartTime, DateTime.Today);
        IsLessThanOrEqualTo restriction2 = new IsLessThanOrEqualTo(AppointmentPropertyPath.EndTime, DateTime.Today.AddDays(1));
        And restriction3 = new And(restriction1, restriction2);

        FindItemResponse response = service.FindItem(StandardFolder.Calendar, AppointmentPropertyPath.AllPropertyPaths, restriction3);

        for (int i = 0; i < response.Items.Count; i++)
        {
            if (response.Items[i] is Appointment)
            {
                Appointment appointment = (Appointment)response.Items[i];

                Response.Write("Subject = " + appointment.Subject);
                Response.Write("StartTime = " + appointment.StartTime);
                Response.Write("EndTime = " + appointment.EndTime);
                Response.Write("Body Preview = " + appointment.BodyPlainText);
                Response.Write("----------------------------------------------------------------");
            }
        }

    }

     %> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T16:41:34.390

ASP.NET 是您正在寻找的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T13:09:18.340

好的，一个快速而肮脏的 asp.net 网页示例。基本上你的 Main 变成了 PageLoad。确保您的页面代码继承 System.Web.UI.Page（如果您使用的是 VS2008 或 VS2010，那么它会为您处理好。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

namespace Sample
{
    public partial class Sample: System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            NetworkCredential credential = new NetworkCredential("username", "password");
            Service service = new Service("https://myserver/ews/Exchange.asmx", credential);

        try
        {
            IsGreaterThanOrEqualTo restriction1 = new IsGreaterThanOrEqualTo(AppointmentPropertyPath.StartTime, DateTime.Today);
            IsLessThanOrEqualTo restriction2 = new IsLessThanOrEqualTo(AppointmentPropertyPath.EndTime, DateTime.Today.AddDays(1));
            And restriction3 = new And(restriction1, restriction2);

            FindItemResponse response = service.FindItem(StandardFolder.Calendar, AppointmentPropertyPath.AllPropertyPaths, restriction3);

            for (int i = 0; i < response.Items.Count; i++)
            {
                if (response.Items[i] is Appointment)
                {
                    Appointment appointment = (Appointment)response.Items[i];

                    lblSubject.Text = "Subject = " + appointment.Subject;
                    lblStartTime.Text = "StartTime = " + appointment.StartTime;
                    lblEndTime.Text = "EndTime = " + appointment.EndTime;
                    lblBodyPreview.Text = "Body Preview = " + appointment.BodyPlainText;

                }
            }

        }
        catch (ServiceRequestException ex)
        {
            lblError.Text= "Error: " + ex.Message;
            lblXmlError.Text = "Error: " + ex.XmlMessage;
            Console.Read();
        }
        catch (WebException ex)
        {
            lblWebError.Text = "Error: " + ex.Message;
        }
    }
} 
```

}

那么你的viewpage可能是这样的。确保 CodeBehind 指向带有代码的类，以完成页面的所有繁重工作。

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Sample.aspx.cs"     Inherits="SecureCareEnrollment.WebForms.WebForm1" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
            <label id="lblSubject" runat="server"></label><br />
            <label id="lblStartTime " runat="server"></label><br />
            <label id="lblEndTime " runat="server"></label><br />
            <label id="lblBodyPreview" runat="server"></label><br />
----------------------------------------------------------------<br />
            <label id=lblError" runat="server"></label><br />
            <label id=lblXmlError" runat="server"></label><Br />
            <label id=lblWebError" runat="server"></label>
    </div>
    </form>
</body>
</html> 
```

显然，您可以/应该对母版页、样式和一堆其他东西做更多的事情。这只是一个基本的香草代码隐藏和页面。

# ruby-on-rails - 如何在 Rails 3 中使用 Draper 装饰嵌套属性（关联）？

> ID：10884740
> 
> 赞同：11
> 
> 时间：2012-06-04T16:30:39.037
> 
> 标签：ruby-on-rails, nested-attributes, draper

我的环境：

*   导轨 3.2
    *   带[布艺](https://github.com/jcasimir/draper)宝石

我正在使用嵌套资源并且无法确定在哪里声明装饰器。

```
#app/controllers/users_controller.rb
def show
  @user = UserDecorator.find(params[:id])
  @items = @user.items
end

#app/controllers/items_controller.rb
def show
  @item = @user.items.find(params[:id])
end 
```

我尝试替换`items`为`ItemDecorator`，但没有用。我应该把它放在哪里？

我知道 Draper 在表单中存在嵌套资源问题，但这不是表单！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-07T20:10:47.820

据我正确理解你的问题，你有一个模型`user`有很多`items`，但你`items`没有装饰？

所以添加到你的`UserDecorator`：

```
class UserDecorator < Draper::Base
  decorates :user
  decorates_association :items #, :with => :item 

  [..]
end

class ItemDecorator < Draper::Base
  decorates :item

  [..]
end 
```

看看[源码](https://github.com/jcasimir/draper/blob/master/lib/draper/base.rb)。

# asp.net - 根据时间戳读取Sql中最后插入的行

> ID：10884747
> 
> 赞同：1
> 
> 时间：2012-06-04T16:31:10.863
> 
> 标签：asp.net, sql-server, identity

sql 有一个名为 emp 的表。

```
emp(emp_id int IDENTITY primary key, EmployeeName varchar(50),.......) 
```

我想在上表中插入一条记录。这是我在 asp.net 中的代码。

```
DBconnection dbcon = new DBconnection();
string query = "insert into emp values('" + TextBox_EmpName.Text + "','" + ....);
int no1 = dbcon.insertQuery(query); 
```

我有另一个表叫做 emp-relation

```
 emp-relation(emp_id int primary key, count int, ....) 
     -- foreign key (emp_id)references emp(emp_id) 
```

我的问题是当我插入 emp 行时，我不知道它是什么，`emp_id`因为它是由 auto 创建的。当我要插入 emp-relation 时，我想得到，`emp-id`因为它是外键。

我怎样才能做到这一点？有没有办法根据时间戳或其他东西读取Sql中的最后一个插入行？我相信记录本质上不是根据插入的时间戳进行排序的。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T16:34:03.170

基本上有两种方法。第一种方法是从第一个插入查询中返回新 ID：

```
insert into emp values(...)
select scope_identity() as NewID 
```

第二种方法是在插入关系表时查找第一行：

```
insert  emp-relation
        (emp_idm, ...) 
select  emp_id
,       ...
from    emp
where   emp_name = @EmpName 
```

您必须传入足够多的列以使引用唯一。

# c++ - 将 istream 运算符与类交朋友

> ID：10884750
> 
> 赞同：0
> 
> 时间：2012-06-04T16:31:18.507
> 
> 标签：c++, operator-overloading

您好，我正在尝试将我的运算符重载`>>`到我的班级，但我在 Eclipse 中遇到错误。

代码：

```
 friend istream& operator>>(const istream& is, const RAngle& ra){
    return is >> ra.x >> ra.y;
} 
```

代码2：

```
 friend istream& operator>>(const istream& is, const RAngle& ra)
{
    is >> ra.x;
    is >> ra.y;
    return is 
} 
```

都崩溃了，我不知道为什么，请帮忙。

编辑：

`ra.x`&`ra.y`都是我班的 2 个私人整数；

完整错误：

错误：

```
 ..\/rightangle.h: In function 'std::istream& operator>>(std::istream&, const RAngle&)':
..\/rightangle.h:65:12: error: ambiguous overload for 'operator>>' in 'is >> ra.RAngle::x'
..\/rightangle.h:65:12: note: candidates are:
c:\mingw\bin\../lib/gcc/mingw32/4.6.1/include/c++/istream:122:7: note: std::basic_istream<_CharT, _Traits>::__istream_type& std::basic_istream<_CharT, _Traits>::operator>>(std::basic_istream<_CharT, _Traits>::__istream_type& (*)(std::basic_istream<_CharT, _Traits>::__istream_type&)) [with _CharT = char, _Traits = std::char_traits<char>, std::basic_istream<_CharT, _Traits>::__istream_type = std::basic_istream<char>] <near match>
c:\mingw\bin\../lib/gcc/mingw32/4.6.1/include/c++/istream:122:7: note:   no known conversion for argument 1 from 'const int' to 'std::basic_istream<char>::__istream_type& (*)(std::basic_istream<char>::__istream_type&) {aka std::basic_istream<char>& (*)(std::basic_istream<char>&)}'
c:\mingw\bin\../lib/gcc/mingw32/4.6.1/include/c++/istream:126:7: note: std::basic_istream<_CharT, _Traits>::__istream_type& std::basic_istream<_CharT, _Traits>::operator>>(std::basic_istream<_CharT, _Traits>::__ios_type& (*)(std::basic_istream<_CharT, _Traits>::__ios_type&)) [with _CharT = char, _Traits = std::char_traits<char>, std::basic_istream<_CharT, _Traits>::__istream_type = std::basic_istream<char>, std::basic_istream<_CharT, _Traits>::__ios_type = std::basic_ios<char>] <near match>
c:\mingw\bin\../lib/gcc/mingw32/4.6.1/include/c++/istream:126:7: note:   no known conversion for argument 1 from 'const int' to 'std::basic_istream<char>::__ios_type& (*)(std::basic_istream<char>::__ios_type&) {aka std::basic_ios<char>& (*)(std::basic_ios<char>&)}'
c:\mingw\bin\../lib/gcc/mingw32/4.6.1/include/c++/istream:133:7: note: std::basic_istream<_CharT, _Traits>::__istream_type& std::basic_istream<_CharT, _Traits>::operator>>(std::ios_base& (*)(std::ios_base&)) [with _CharT = char, _Traits = std::char_traits<char>, std::basic_istream<_CharT, _Traits>::__istream_type = std::basic_istream<char>] <near match>
c:\mingw\bin\../lib/gcc/mingw32/4.6.1/include/c++/istream:133:7: note:   no known conversion for argument 1 from 'const int' to 'std::ios_base& (*)(std::ios_base&)'
c:\mingw\bin\../lib/gcc/mingw32/4.6.1/include/c++/istream:241:7: note: std::basic_istream<_CharT, _Traits>& std::basic_istream<_CharT, _Traits>::operator>>(std::basic_istream<_CharT, _Traits>::__streambuf_type*) [with _CharT = char, _Traits = std::char_traits<char>, std::basic_istream<_CharT, _Traits>::__streambuf_type = std::basic_streambuf<char>] <near match>
c:\mingw\bin\../lib/gcc/mingw32/4.6.1/include/c++/istream:241:7: note:   no known conversion for argument 1 from 'const int' to 'std::basic_istream<char>::__streambuf_type* {aka std::basic_streambuf<char>*}'
..\/rightangle.h:66:12: error: ambiguous overload for 'operator>>' in 'is >> ra.RAngle::y'
..\/rightangle.h:66:12: note: candidates are:
c:\mingw\bin\../lib/gcc/mingw32/4.6.1/include/c++/istream:122:7: note: std::basic_istream<_CharT, _Traits>::__istream_type& std::basic_istream<_CharT, _Traits>::operator>>(std::basic_istream<_CharT, _Traits>::__istream_type& (*)(std::basic_istream<_CharT, _Traits>::__istream_type&)) [with _CharT = char, _Traits = std::char_traits<char>, std::basic_istream<_CharT, _Traits>::__istream_type = std::basic_istream<char>] <near match>
c:\mingw\bin\../lib/gcc/mingw32/4.6.1/include/c++/istream:122:7: note:   no known conversion for argument 1 from 'const int' to 'std::basic_istream<char>::__istream_type& (*)(std::basic_istream<char>::__istream_type&) {aka std::basic_istream<char>& (*)(std::basic_istream<char>&)}'
c:\mingw\bin\../lib/gcc/mingw32/4.6.1/include/c++/istream:126:7: note: std::basic_istream<_CharT, _Traits>::__istream_type& std::basic_istream<_CharT, _Traits>::operator>>(std::basic_istream<_CharT, _Traits>::__ios_type& (*)(std::basic_istream<_CharT, _Traits>::__ios_type&)) [with _CharT = char, _Traits = std::char_traits<char>, std::basic_istream<_CharT, _Traits>::__istream_type = std::basic_istream<char>, std::basic_istream<_CharT, _Traits>::__ios_type = std::basic_ios<char>] <near match>
c:\mingw\bin\../lib/gcc/mingw32/4.6.1/include/c++/istream:126:7: note:   no known conversion for argument 1 from 'const int' to 'std::basic_istream<char>::__ios_type& (*)(std::basic_istream<char>::__ios_type&) {aka std::basic_ios<char>& (*)(std::basic_ios<char>&)}'
c:\mingw\bin\../lib/gcc/mingw32/4.6.1/include/c++/istream:133:7: note: std::basic_istream<_CharT, _Traits>::__istream_type& std::basic_istream<_CharT, _Traits>::operator>>(std::ios_base& (*)(std::ios_base&)) [with _CharT = char, _Traits = std::char_traits<char>, std::basic_istream<_CharT, _Traits>::__istream_type = std::basic_istream<char>] <near match>
c:\mingw\bin\../lib/gcc/mingw32/4.6.1/include/c++/istream:133:7: note:   no known conversion for argument 1 from 'const int' to 'std::ios_base& (*)(std::ios_base&)'
c:\mingw\bin\../lib/gcc/mingw32/4.6.1/include/c++/istream:241:7: note: std::basic_istream<_CharT, _Traits>& std::basic_istream<_CharT, _Traits>::operator>>(std::basic_istream<_CharT, _Traits>::__streambuf_type*) [with _CharT = char, _Traits = std::char_traits<char>, std::basic_istream<_CharT, _Traits>::__streambuf_type = std::basic_streambuf<char>] <near match>
c:\mingw\bin\../lib/gcc/mingw32/4.6.1/include/c++/istream:241:7: note:   no known conversion for argument 1 from 'const int' to 'std::basic_istream<char>::__streambuf_type* {aka std::basic_streambuf<char>*}'' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T16:42:17.610

一个问题在于操作员的签名：

```
friend istream& operator>>(const istream& is, const RAngle& ra){
//                         ^^^^^              ^^^^^
    return is >> ra.x >> ra.y;
} 
```

如果参数是，`const`您将无法修改它们。从错误消息来看，它们似乎表明编译器无法为`is >> ra.x`and找到适当的重载`is >> ra.y`。这可能与上一个问题（找不到采用 const-lvalue 的重载）或不相关，具体取决于`ra.x`and的类型`ra.y`（问题中未显示）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T16:42:18.523

因为`operator>>`要修改你传递给它的参数，它们不能是对 const 的引用，所以你想要的是这样的：

```
friend std::istream &operator>>(std::istream &is, RAngle &ra) { 
    return is >> ra.x >> ra.y;
} 
```

请注意，几乎所有 I/O 操作也（至少可能）更改流的状态，因此您（几乎？）总是希望通过非常量引用传递流参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T16:40:31.553

请从参数“const RANgle& ra”中删除 const。您不能修改方法中的常量引用。

# python - Python timeit 和程序输出

> ID：10884751
> 
> 赞同：15
> 
> 时间：2012-06-04T16:31:22.937
> 
> 标签：python, time, timeit

有什么办法可以使用timeit函数同时输出函数结果和处理时间？

现在我正在使用

```
timer = Timer('func()', 'from __main__ import func')
print timer.timeit(1) 
```

但这只是输出时间而不是程序输出，它在结束时返回一些东西。我希望它输出

```
FuncOutputGoesHere 13.2897528935 
```

在同一条线上。

理想情况下，我希望能够通过运行 N 次然后输出程序结果及其平均时间来取程序的平均值（总共一个输出）

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-04T16:42:50.453

两种选择：

1.  在您的定时代码中包含“打印”。丑陋，但是嘿。

    ```
    timer = Timer('print func()', 'from __main__ import func')
    print timer.timeit(1) 
    ```

2.  如果您所做的只是运行一次函数，则`timeit`完全放弃该模块并使用相同的方法直接为代码计时：

    ```
    import sys
    import time

    if sys.platform == "win32":
        # On Windows, the best timer is time.clock()
        default_timer = time.clock
    else:
        # On most other platforms the best timer is time.time()
        default_timer = time.time

    t0 = default_timer()
    output = func()
    t1 = default_timer()
    print output, t1 - t0 
    ```

如果你想多次运行代码并产生输出，为什么不在timeit 函数*之外运行一次代码呢？*无论如何，您已经不止一次调用它了：

```
 timer = Timer('func()', 'from __main__ import func')
    print timer.timeit(100),
    print func() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T16:43:20.713

timeit 模块执行传递的语句。您可以只打印函数的结果：

```
timer = Timer('print func()', 'from __main__ import func')
print timer.timeit(1) 
```

# c# - 为什么 System.Threading.Timer 回调成功更新 UI？

> ID：10884752
> 
> 赞同：2
> 
> 时间：2012-06-04T16:31:25.750
> 
> 标签：c#, winforms, multithreading, thread-safety

我的表单应用程序上有几个 System.Threading.Timers 带有更新 UI 的回调......成功 - 即没有抛出错误。

在我知道 UI 不应该在 UI 线程以外的任何线程上更新之前，我已经构建了这些。

现在我很困惑为什么当我在这些单独的 threading.timer 线程上更新 UI 时它不会引发跨线程异常？

我将更改这些回调，以便在 UI 线程上调用 UI 更新，但我很好奇为什么会这样。

**编辑：**我的应用程序是一个 WinForms 应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T16:35:46.547

> 我将更改这些回调，以便在 UI 线程上调用 UI 更新，但我很好奇为什么会这样。

如果这是 Windows 窗体，它完全靠运气工作。在后台线程上更新 UI 并不能始终如一地工作，但偶尔不会抛出。特别是，如果[CheckForIllegalCrossThreadCalls](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.checkforillegalcrossthreadcalls.aspx)为假，它有时会“工作”，并且永远不会抛出 - 尽管行为通常是错误的。一些控件并不总是检查每个属性，因此有些项目“工作”即使它们并不总是正常工作，因为这通常会引入以后难以诊断和纠正的错误。

附带说明：如果这是 WPF，您可以在后台线程上更改绑定到 UI 的项目的值，从而有效地更新您的 UI。WPF 绑定系统会自动为您将其编组到 UI 线程。但是，更改集合的一部分不起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T16:36:59.307

我也使用 WinForms 体验过这一点。请参见此处：[您可以从另一个线程访问 UI 元素吗？（不要设置）](https://stackoverflow.com/questions/10450750/can-you-access-ui-elements-from-another-thread-get-not-set/10450783#10450783)在我看来，它通过“魔法”（阅读“以随机方式”）起作用，不应被视为在实践中这样做的邀请。这绝不是更新 GUI 的线程安全方式。有时程序只是不抱怨。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T18:05:30.093

在 .NET 1.0 和 1.1 中，不执行跨线程检查，因此您永远不会得到一个`InvalidOperationException`（尽管 MSDN 承认执行跨线程更新“通常会导致不可预知的结果”，其中可能包括应用程序崩溃）。

[`Control.CheckForIllegalCrossThreadCalls`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.checkforillegalcrossthreadcalls.aspx)在 .NET 2.0 及更高版本中，根据静态属性的值执行跨线程检查。它的默认值是从[`Debugger.IsAttached`](http://msdn.microsoft.com/en-us/library/system.diagnostics.debugger.isattached.aspx)静态属性初始化的（指示是否将调试器附加到进程），这意味着当应用程序自行运行时（没有 Visual Studio 或任何其他调试器附加到它）不执行跨线程检查）。

当然，此设置可能会被用户代码（包括引用的库）覆盖。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-06T16:48:49.920

我相信这与您正在创建的计时器类型有关。有两种类型：

```
 System.Timers.Timer;
    System.Windows.Forms.Timer 
```

这两者之间有一个明显的区别，如果您更新 UI，System.Timers.Timer 会抛出异常，而 System.Windows.Forms.Timer 不会。如果你有一个 using 语句：“Using System.Windows.Forms”并且只是有一个“Timer”，这将是 Windows.Forms.Timer，它与 System.Timers.Timer 明显不同。

在引擎盖下（我相信） System.Windows.Forms.Timer 正在捕获 WM_TIMER 消息，因此您处于更新 GUI 的线程上。

# iphone - 自动重新启动 iOS 应用程序

> ID：10884763
> 
> 赞同：0
> 
> 时间：2012-06-04T16:32:09.117
> 
> 标签：iphone, ios, background, core-bluetooth

我正在编写一个与蓝牙 4.0 设备连接的应用程序。因为它与人身安全有关，除了在暂停中处于活动状态之外，我会很高兴实现一种“自动重新启动”模式。

我认为这是不允许的，但有几个应用程序假装这样做。第一个是[Skype](http://bytenow.net/2012/04/30/skype-releases-4-0-update-for-ios-brings-ui-redesign-and-auto-relaunch/)的新版本，另一个是[Find my car smarter](http://findmycarsmarter.com)，如其[常见问题解答](http://findmycarsmarter.com/Frequently_Asked_Questions.html)中所示。

前者可能使用某种[Voip 选项](https://stackoverflow.com/questions/10395142/how-to-restart-app-if-it-unexpectedly-shutdown)，后者有什么线索吗？在设置面板中，适当的设置启用了一个神秘的*Cell Tower Monitoring*，但我还没有找到任何相关信息......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T17:22:34.767

事实上，VOIP 服务可以允许这种行为。来自[iOS 应用程序编程指南](https://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/AdvancedAppTricks/AdvancedAppTricks.html#//apple_ref/doc/uid/TP40007072-CH7-SW12)

> 该系统不是让 VoIP 应用程序一直处于唤醒状态，而是允许它们被暂停并为它们提供监控其套接字的设施。当检测到传入流量时，系统会唤醒 VoIP 应用程序并将其套接字的控制权返回给它。

除了这种方法，我不知道另一种无需用户干预即可自动启动您的应用程序的方法。

# c++ - Makefile'fdopen：错误的文件描述符'错误

> ID：10884765
> 
> 赞同：0
> 
> 时间：2012-06-04T16:32:20.493
> 
> 标签：c++, makefile, g++

我正在制作一个makefile，并收到此错误：

```
List.h:10:18: error: calling fdopen: Bad file descriptor 
```

我不知道为什么会这样。这是 List.h 的开头：

```
#ifndef List_h__
#define List_h__

#include "Data.h"
#include "general.h" 
```

其中#include "Data.h" 是第 10 行。数据，然后是一般是在makefile中写入依赖项的顺序：

```
List.o: List.cpp List.h Data.h general.h
    g++ List.cpp $(f) 
```

data 不包含任何内容，general 仅包含 iostream，没有其他类也包含 iostream。

这是Data.h：

```
#ifndef Data_h__
#define Data_h__

class Data
{
private:
public:
    //default constructor
    Data() {}
    //destructor
    virtual ~Data()=0;
    /*****************************************************************************
    * function name: operator<
    * The Input: This Data, other Data
    * The output: The operator will compare between two datas. The comparison will
    * be used to create a sorted list.
    *****************************************************************************/
    virtual bool operator<(const Data& other) const =0;
};

Data::~Data() {}

#endif //Data_h__ 
```

我最初在 =0 之后有 Data 的析构函数的简单实现，并且我还尝试将构造函数和析构函数的简单实现移动到 .cpp 文件。以上所有方法均无效。请帮忙 - 我已经被这个 makefile 困了几个小时了，这让我发疯了！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T16:45:40.240

首先，检查您是否使用了预编译的头文件。如果是这样，请删除所有预编译的标头。

如果这不起作用，那么我认为[这](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=13675)可能会有所帮助。某些版本的 g++ 中存在一个错误，即在一个单元中多次包含标头。

看看你是否多次包含 Data.h 。

* * *

预编译头文件：查找 .gch 文件并将其删除。

[预编译头文件](http://gcc.gnu.org/onlinedocs/gcc-4.1.2/gcc/Precompiled-Headers.html)

> 通常大型项目有许多头文件，每个源文件中都包含这些头文件。编译器一遍又一遍地处理这些头文件所花费的时间几乎可以解释构建项目所需的所有时间。为了加快构建速度，GCC 允许用户“预编译”一个头文件；然后，如果构建可以使用预编译的头文件，它们会更快。
> 
> 要创建预编译的头文件，只需像编译任何其他文件一样编译它，如有必要，使用 -x 选项使驱动程序将其视为 C 或 C++ 头文件。您可能希望使用 make 之类的工具来使预编译的标头在其包含的标头发生更改时保持最新。
> 
> 当编译中出现#include 时，将搜索预编译的头文件。在搜索包含文件时（请参阅搜索路径），编译器会在每个目录中查找预编译头文件，然后再在该目录中查找包含文件。搜索的名称是在#include 中指定的名称，并附加了“.gch”。如果无法使用预编译的头文件，则将其忽略。
> 
> 例如，如果你有 #include "all.h"，并且你有 all.h.gch 和 all.h 在同一目录下，那么如果可能的话，将使用预编译的头文件，否则将使用原始头文件.

# android - Android Licensing (LVL) 在发布应用程序后不断返回 Retry（代码 291）

> ID：10884767
> 
> 赞同：1
> 
> 时间：2012-06-04T16:32:29.653
> 
> 标签：android, google-play, android-lvl

我最近对我在 Google Play 上发布了一段时间的现有（付费）应用程序进行了更新。在开发新版本时，我想我会实施 Google 许可验证库。我按照 Google 在[http://developer.android.com/guide/market/licensing/adding-licensing.html](http://developer.android.com/guide/market/licensing/adding-licensing.html)上的说明进行操作。此时一切运行良好 - 当我在 Google Play 开发者控制台中更改测试响应时，我的应用程序得到了不同的结果。伟大的！

然后我发布了这个新版本。

我在手机上安装了签名的 APK（这是​​一个付费应用，所以我不想从 Google Play 下载它）（一直在同一台设备上测试它）。现在一切都没有了。我一直从许可服务中得到“重试”结果。我的意思是几个小时。我回去摆弄源代码，更改了各种东西，没有任何效果。许可库总是超时（从 LogCat 中的库中获得“检查超时。”）。

我到处寻找答案，但直到我遇到了这个讨论（[http://forum.xda-developers.com/showthread.php?t=1566770](http://forum.xda-developers.com/showthread.php?t=1566770)）并阅读它是我发现的最后一篇文章解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T16:32:30.480

从上面提到的帖子：

> “我刚刚也遇到了这个问题并删除了 Google Play 应用程序数据（设置、应用程序、选择 Google Play 并按清除数据）为我修复了它。清除缓存是不够的。我看到这样做的唯一影响（除了我的应用程序现在再次运行）是您下次使用该应用程序时必须重新接受 Google Play 条款和条件等，而我的搜索历史记录已经消失。”

我做到了，它奏效了，现在一切都恢复了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-10T09:54:04.860

从 Google Play 商店下载的应用程序也遇到了同样的问题。就我而言，问题不在于其他答案中的存储或缓存。我限制了 Google Play Store Background-Data-Usage，这阻止了这个 API 工作。启用后台数据使用后，一切正常。

# android - 如何将文本文件中的数据插入到 android 中的 sql 数据库中？

> ID：10884769
> 
> 赞同：2
> 
> 时间：2012-06-04T16:32:38.523
> 
> 标签：android, database, sqlite, text-parsing

我对 SQLite 数据库很陌生，需要帮助使用外部文本文件创建初始数据库来存储一堆可以选择并添加到第二个数据库的项目。为了把这一切放在上下文中，我想要一个存储杂货店物品列表的初始数据库。每个项目都有两个特征，一个名称和一个类型。所以有诸如（NAME Bread, TYPE Bakery. NAME Grape Juice, TYPE Beverage. NAME Toothbrush, TYPE Toiletries。）

我需要从这样的事情开始：

```
GROCERYSTORE.TXT
-- -- -- -- -- --

NAME - TYPE

Bread - Bakery

Rolls - Bakery

Juice - Beverages

Soda - Beverages 
```

对此：

```
dBHelper.insert("Bread", "Bakery"); 
```

或者：

```
dBHelper.insert(name, type); 
```

对于文本文件中的每个项目。

首先，我想知道如何格式化这个文本文件，或者如果文本文件不是最简单的方法，那么可以读取并插入数据库的任何其他类型的文件。

其次，我将如何阅读此文本文件并将其插入数据库？

我想我会在 for 循环中使用缓冲读取器和输入流将每个项目插入数据库。我只是不确定如何解析每一行以给每个项目一个名称和一个要插入数据库的类型，以及如何格式化要读取的文本文件。

任何帮助将不胜感激，因为我几乎没有发现关于使用外部文件将数据导入与我的情况相关的 sql 数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T17:11:49.860

在我的具有静态或默认数据库的应用程序中，我使用 xml 文件来存储我的数据，如下所示：

default_grocerystore.xml 存储在 assets 文件夹中：

```
<default_grocerystore>
    <grocery>
            <name>Bread</name>
            <type>Bakery</type>
    </grocery>
    <grocery>
            <name>Rolls</name>
            <type>Bakery</type>
    </grocery>
    <grocery>
            <name>Juice</name>
            <type>Beverages</type>
    </grocery>
    <grocery>
            <name>Soda</name>
            <type>Beverages</type>
    </grocery>
</default_grocerystore> 
```

然后在`onCreate`我的数据库类中，我创建了我的数据库表，我用 xml 填充它们，如下所示：

```
private void populateGrocery(SQLiteDatabase db) {
                    ArrayList<GroceryObj> groceryArrayList;
                    groceryArrayList = buildGroceryArrayList();
                    String insertStmt = null;
                    for (int i = 0; i < groceryArrayList.size(); i++) {
                            insertStmt = "INSERT INTO " + GROCERY_TABLE + " ("
                                            + GROCERY_KEY_NAME + ", " + GROCERY_KEY_TYPE + ") "
                                            + "VALUES (\""
                                            + groceryArrayList.get(i).getName()
                                            + "\", \""+groceryArrayList.get(i).getType()+"\");";
                            db.execSQL(insertStmt);
                    }

private ArrayList<GroceryObj> buildGroceryArrayList() {
                    ArrayList<GroceryObj> aL = new ArrayList<GroceryObj>();
                    DocumentBuilderFactory factory = DocumentBuilderFactory
                                    .newInstance();
                    try {
                            DocumentBuilder builder = factory.newDocumentBuilder();
                            InputStream raw = context.getAssets().open(
                                            "default_grocerys.xml");
                            Document dom = builder.parse(raw);
                            Element root = dom.getDocumentElement();
                            NodeList groceryItems = root.getElementsByTagName("grocery");
                            for (int i = 0; i < groceryItems.getLength(); i++) {
                                    String name= null;
                                    String type= null;
                                    Node item = groceryItems.item(i);
                                    NodeList groceryItem = item.getChildNodes();
                                    for (int j = 0; j < groceryItem.getLength(); j++) {
                                            Node nodeItem= groceryItem.item(j);
                                            String nodeName= noteItem.getNodeName();
                                            if (nodeName.equalsIgnoreCase("name")) {
                                                    name= nodeItem.getFirstChild().getNodeValue();
                                            } else if (nodeName.equalsIgnoreCase("type")) {
                                                    type= nodeItem.getFirstChild().getNodeValue();
                                            }
                                    }
                                    aL.add(new GroceryObj(name, type));
                            }
                    } catch (Exception e) {
                            e.printStackTrace();
                    }
                    return aL;
            }
            } 
```

# sql - SQL 连接问题

> ID：10884775
> 
> 赞同：2
> 
> 时间：2012-06-04T16:32:56.807
> 
> 标签：sql, join, infinite-loop

我遇到了一个问题，我认为这与我的 SQL 语句中的 Join 有关。

```
select s.customer as 'Customer', 
    s.store as 'Store', 
    s.item as 'Item', 
    d.dlvry_dt as 'Delivery', 
    i.item_description as 'Description', 
    mj.major_class_description as 'Major Description', 
    s.last_physical_inventory_dt as 'Last Physical Date', 
    s.qty_physical as 'Physical Qty', 
    s.avg_unit_cost as 'Unit Cost', 
    [qty_physical]*[avg_unit_cost] as Value 
from argus.DELIVERY d 
join argus.STORE_INVENTORY s 
    ON (s.store = d.store)
join argus.ITEM_MASTER i 
    ON (s.item = i.item)
join argus.MINOR_ITEM_CLASS mi 
    ON (i.minor_item_class = mi.minor_item_class)
join argus.MAJOR_ITEM_CLASS mj 
    ON (mi.major_item_class = mj.major_item_class)
where s.last_physical_inventory_dt between '6/29/2011' and '7/2/2012' 
    and s.customer = '20001' 
    and s.last_physical_inventory_dt IS NOT NULL 
```

它带有看似无限数量的一张唱片的副本。我加入这些表格的方式有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T16:47:21.877

```
join argus.MINOR_ITEM_CLASS mi 
    ON (i.minor_item_class = mi.minor_item_class)
join argus.MAJOR_ITEM_CLASS mj 
    ON (mi.major_item_class = mj.major_item_class) 
```

我的猜测是您的错误存在于这两个连接之一中。当您仅使用 JOIN 一词时，它假定您正在尝试执行 INNER JOIN，它返回至少具有 1 比 1 的所有记录。我不知道您的数据是什么样的，但我假设有很多要次要项目类和主要项目类之间存在许多关系，因此当您运行此查询时，您会收到几乎每个字段的重复记录，但主要项目类不同。

我会看看结果。大多数列将具有不变的重复数据，而其中一列的每一行将具有不同的值。这应该告诉您，每行具有不同数据的列是您应该以不同方式连接的列。

否则，我会说您的查询格式正确。

# r - 在 R 控制台上查看大数据集

> ID：10884776
> 
> 赞同：7
> 
> 时间：2012-06-04T15:27:22.613
> 
> 标签：r, dataset

有什么方法可以查看大型数据集 [1380160 obs. 44 个变量] 在 R 控制台上完整？

我已经使用 更改了打印限制`options(max.print=...)`，但是，我看不到完整的数据集，即从第一行到最后一行，因为无法滚动数据。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-04T16:08:45.863

使用该`View`功能（注意大写字母“V”），它将以电子表格样式格式在新窗口中打开数据框、矩阵或其他类似表格的对象，可以滚动查看数据（但不能编辑）。此窗口独立于控制台，因此您可以继续发出命令而不必关闭查看窗口（但是对数据对象的更改不会在查看窗口中看到，您需要关闭窗口并`View`再次运行才能看到变化）。

如果您想在类似窗口的电子表格中编辑数据，请使用`edit`或`fix`（但在关闭编辑窗口之前，您无法运行其他命令）。

R 的一些 GUI 还具有用于查看或编辑滚动数据对象的工具。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-04T22:30:23.260

两种选择：

```
df <- data.frame(X = rpois(n = 100, lambda = 3), Y = rnorm(n = 100, mean = 25, sd = 7))
page(x = df, method = "print")
View(x = df , title = "My test data") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-06T11:12:15.910

这是一个老问题，但是，我遇到了同样的问题。我发现`View data set`Rcmdr 非常适合查看大数据集。它显示了所有数据（但是在一个窗口中）。

```
library(relimp, pos=35)
showData(Dat, placement='-20+200', font=getRcmdr('logFont'), maxwidth=80,  maxheight=10) 
```

# javascript - jQuery - 基于作为函数参数传递的对象构建动态 if 语句

> ID：10884783
> 
> 赞同：3
> 
> 时间：2012-06-04T16:33:36.523
> 
> 标签：javascript, jquery, argument-passing

我正在尝试根据函数参数中的定义构建几个动态 if 语句。如果提供了特定的键和值，我应该能够运行它们。我可以读取所有键和值，但不确定如何在它们之上构建代码。这是作为函数参数传递的对象：

```
param = {
    'fields': {    
        'email' : {
            'match' : 'email'
        },
        'countAdults': {
            'match' : 'number',
            'range' : '1, 10'
        }
    }
}; 
```

//并且这个位正在尝试解析对象

```
$.each(param.fields, function(key, value){ // reading definitions from the parameter
    if(name == "'+key+'") $('[name="'+key+'"]').mandatory(); // define the begining of if
    $.each(param.fields[key], function(subk, subv){                        
        += '.'+subk+'("'+subv+'")'; // adding more to the if statement
    });    
}); 
return (all if statement);
} 
```

在返回所有这些 if 语句后，我还想为默认情况运行 else 语句。我正在尝试将这些代码从主函数的主体移动到您调用该函数的地方，这样我就不必每次都自定义函数的主体。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T19:29:23.777

我建议您改为使用元素，为您想要的每个验证添加一个类。像这样：

```
<!doctype html>
<html>
  <head>
    <style type="text/css">
      input.invalid { border: 1px solid red; }
    </style>
    <script
      src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js">
    </script>

    <script>
      $(function()
      {
        $('.email').each(function()
        {
          var input = $(this);

          input.keyup(function()
          {
            validate_as_email(input);
          });
        });
      });

      function validate_as_email(input)
      {
        var value = input.val();

        if (is_email(value))
          input.removeClass('invalid');
        else
          input.addClass('invalid');
      }

      function is_email(value)
      {
        return value.match
          (/^[A-Z0-9._%-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i) != null;
      }
    </script>
  </head>
  <body>
    Email:<br>
    <input type="text" id="email" class="email">
  </body>
</html> 
```

# opengl - glCopyTexImage2D 将其像素保存到哪里？

> ID：10884793
> 
> 赞同：4
> 
> 时间：2012-06-04T16:34:39.613
> 
> 标签：opengl, opengl-es

```
Name
glCopyTexImage2D — copy pixels into a 2D texture image

C Specification
void glCopyTexImage2D(GLenum  target,  GLint  level,  GLenum  internalformat,  GLint  x,  GLint  y,  GLsizei  width,  GLsizei  height,  GLint  border); 
```

显然，像素必须存储在某个地方，但是在哪里呢？该函数返回 void 并且不使用指针参数。

那么， glCopyTexImage2D 将其像素保存到哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T16:39:06.653

手册页的第一行：

> glCopyTexImage2D 定义了一个二维纹理图像，或立方体贴图纹理图像，其像素来自当前 GL_READ_BUFFER。

它将像素从读取缓冲区复制到主动绑定的纹理。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-04T16:39:30.250

放入您指定的纹理`target`（例如`GL_TEXTURE_2D`，这意味着当前绑定的 2D 纹理）。使用后，您可以使用`glGetTexImage`将像素从纹理获取到您自己的缓冲区。

# python - Python 多线程（并非所有线程都在进行）

> ID：10884805
> 
> 赞同：0
> 
> 时间：2012-06-04T16:35:39.527
> 
> 标签：python, multithreading

```
-- I launch 10 threads
-- Threads share Queue.Queue().
-- Each Thread gets an item from the Queue

    -- Each thread communicates first with External WebServer
    -- Processes Data coming from Ext. WebServer
    -- Communicates with internal DB
    -- Gets the next the item from Queue
    -- It repeats until Queue finishes
    -- At which point all threads are joined and main thread exits normally

    -- In the code, in main thread I populate Queue.Queue() with 500 items
    -- Then each thread gets the first item in the queue. 
```

我观察到：

-- 最初（这意味着当每个线程正在处理其第一项时）所有 10 个线程都启动并正常进行 -- 但是，从第二项开始，10 个线程中只有 2 个在进行。-- 由于涉及多个网络、I/O 操作，我假设所有线程都应该交错并获得一些 CPU 时间。

你能解释一下这种行为吗？任何指向文档的指针或以前在堆栈上提出的问题都会有所帮助。

sysctl hw.ncpu (mac OS) hw.ncpu: 2

问候，

# android - 如何将联系人信息放入短信广播接收器类？

> ID：10884809
> 
> 赞同：2
> 
> 时间：2012-06-04T16:35:54.753
> 
> 标签：android, sms, broadcastreceiver, android-contacts

我有一个应用程序可以在手机收到短信时处理联系人信息，我需要将联系人信息获取到我创建的短信接收器类中，但问题是当短信接收器获取联系人时出现我的空指针异常错误，因为它不要获取联系人信息，我的想法是获取所有联系人信息以比较 SMS 发件人的号码以获取他的 ID 以在我的应用程序中执行其他操作。

这是我的代码：

```
public class SMSBroadcastReceiver extends BroadcastReceiver {

    private static final String SMS_RECEIVED = "android.provider.Telephony.SMS_RECEIVED";
    private static final String TAG = "SMSBroadcastReceiver";
    private static Activity mActivity;
    DBHelper mDBHelper;
    private Context mContext;
    private ArrayList<Contact> mContactsArrayList;
    public String str4;
    private ContactManager aContactManager;
    private ArrayList<Contact> ctnList;
    @Override
    public void onReceive(Context context, Intent intent) 
    {
        //---get the SMS message passed in---
        Log.d("SMSBroadcastReceiver", "Yes it calls the onReceive");
        Bundle bundle = intent.getExtras();        
        SmsMessage[] msgs = null;
        String str = "";
        String str2 = "";
        if (bundle != null)
        {
            //---retrieve the SMS message received---
            Object[] pdus = (Object[]) bundle.get("pdus");
            msgs = new SmsMessage[pdus.length];            
            for (int i=0; i<msgs.length; i++){
                msgs[i] = SmsMessage.createFromPdu((byte[])pdus[i]);                
               str2=msgs[i].getOriginatingAddress();                     
                str = msgs[i].getMessageBody().toString();
                   str4 = str2;     
            }

            if(str.charAt(0)=='#'&&str.length()<=4){

                String ns = Context.NOTIFICATION_SERVICE;
                NotificationManager notManager = 
                    (NotificationManager) context.getSystemService(ns);

                //Configuramos la notificaci�n
                int icono = R.drawable.resultadosmnu;
                CharSequence textoEstado = "Ask-It notification";
                long hora = System.currentTimeMillis();

                Notification notif = 
                    new Notification(icono, textoEstado, hora);
                CharSequence titulo = "New set of response on Askit";
                CharSequence descripcion = "There's available a new set of response on your Survey_Name graph";

                Intent notIntent = new Intent(context, 
                        ProyectoAskitActivity.class);

                PendingIntent contIntent = PendingIntent.getActivity(
                        context, 0, notIntent, 0);

                notif.setLatestEventInfo(
                        context, titulo, descripcion, contIntent);
                notif.flags |= Notification.FLAG_AUTO_CANCEL;
                notManager.notify(icono, notif);
                Contact cnt = queryDetailsForContactNumber(str2);
                Toast toast1 =
                        Toast.makeText(context,
                                cnt.getPhoneNumber(), Toast.LENGTH_SHORT);

                toast1.show();
         }
        }

        }                         

    public Contact queryDetailsForContactNumber(String aContactId) {
        final String[] projection = new String[] {
                Phone._ID,                          // the contact id column
                Phone.DISPLAY_NAME,                 // the name of the contact
                Phone.NUMBER        // the id of the column in the data table for the image
        };

        final Cursor contact = mActivity.managedQuery(
                Phone.CONTENT_URI,
                projection,
                Phone.NUMBER+"="+aContactId,                        // filter entries on the basis of the contact id
                null,   // the parameter to which the contact id column is compared to
                null);

        if(contact.moveToFirst()) {
            final int contactId =  contact.getInt(
                        contact.getColumnIndex(Phone._ID));
            final String name = contact.getString(
                    contact.getColumnIndex(Phone.DISPLAY_NAME));
            final String number = contact.getString(
                    contact.getColumnIndex(Phone.NUMBER));
            final Contact aContact = new Contact(contactId, name,null,false,number);

            return aContact;
        }

        return null;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T22:19:23.277

我会启动一项服务，而不是在接收方这样做。看到这种服务[http://developer.android.com/reference/android/app/IntentService.html](http://developer.android.com/reference/android/app/IntentService.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T14:14:53.423

最后我解决了我的问题，我使用所有联系人参数创建了一个名为联系人的对象类，并创建了一个联系人数组列表并用联系人填充它以获取信息以逐一比较以获得我需要的信息。

```
public class SMSBroadcastReceiver extends BroadcastReceiver {
private static final String SMS_RECEIVED = "android.provider.Telephony.SMS_RECEIVED";
    private static final String TAG = "SMSBroadcastReceiver";
    DBHelper mDBHelper;
    static Context mContext;
    private ArrayList<Contact> ctnList;

     @Override
    public void onReceive(Context context, Intent intent) 
    {
        //---get the SMS message passed in---
        Log.d("SMSBroadcastReceiver", "Yes it calls the onReceive");
        Bundle bundle = intent.getExtras();        
        SmsMessage[] msgs = null;
        String str = "";
        String str2 = "";
        if (bundle != null)
        {
            //---retrieve the SMS message received---
            Object[] pdus = (Object[]) bundle.get("pdus");
            msgs = new SmsMessage[pdus.length];            
            for (int i=0; i<msgs.length; i++){
                msgs[i] = SmsMessage.createFromPdu((byte[])pdus[i]);                
               str2=msgs[i].getOriginatingAddress();                     
                str = msgs[i].getMessageBody().toString();

            }

            if(str.charAt(0)=='#'&&str.length()<=4){

                String ns = Context.NOTIFICATION_SERVICE;

                ctnList=queryAllContactsWithPhone(context);
                Contact ctn = new Contact();
                int x = ctnList.size();
                int y = 0;
                while(x-1>=y){
                    ctn = ctnList.get(y);
                    if(ctn.getPhoneNumber().compareTo(str2)==0){
                        Toast toast1 =
                                Toast.makeText(context,
                                        ctn.getName(), Toast.LENGTH_LONG);

                        toast1.show();
                    }else{
                        Toast toast1 =
                                Toast.makeText(context,
                                        str2, Toast.LENGTH_LONG);

                        toast1.show();
                    }
                    y++;
                }

         }
        }

        }                         

    public ArrayList<Contact> queryAllContactsWithPhone(Context ct) {

        final String[] projection = new String[] {
                Phone.CONTACT_ID,                           // the contact id column
                Phone.DISPLAY_NAME,                 // the contact display name
                Phone.NUMBER
        };

        final String selection = Contacts.HAS_PHONE_NUMBER; // the contact has to have a phone number.
        final String sort = Contacts.DISPLAY_NAME+" ASC";   // the contact has to have a phone number.

        final Cursor contacts = ct.getContentResolver().query(
                Phone.CONTENT_URI,      // the uri for contact provider
                projection, 
                null,                   // if selection = null, retrieve all entries
                null,                       // not required because selection does not contain parameters
                sort);                      // do not order

        final int contactIdColumnIndex = contacts.getColumnIndex(Phone.CONTACT_ID);
        final int contactDisplayNameColumnIndex = contacts.getColumnIndex(Phone.DISPLAY_NAME);
        final int contactPhoneColumnIndex = contacts.getColumnIndex(Phone.NUMBER);

        final ArrayList<Contact> contactsArrayList = new ArrayList<Contact>();
        if(contacts.moveToFirst()) {                    // move the cursor to the first entry
            while(!contacts.isAfterLast()) {            // still a valid entry left?
                final int contactId =  contacts.getInt(contactIdColumnIndex);
                final String contactDisplayName=  contacts.getString(contactDisplayNameColumnIndex);
                final String Phones = contacts.getString(contactPhoneColumnIndex);
                final Contact aContact = new Contact();
                aContact.setPhoneNumber(Phones);
                aContact.setName(contactDisplayName);
                aContact.setId(contactId);
                contactsArrayList.add(aContact);
                contacts.moveToNext();              // move to the next entry
            }
        }

        contacts.close();
        return contactsArrayList;
    }       
} 
```

# .htaccess - Symfony2/ 从子域和 htaccess 中获取变量

> ID：10884810
> 
> 赞同：1
> 
> 时间：2012-06-04T16:36:09.200
> 
> 标签：.htaccess, symfony

我使用 Symfony2。

从 URL 获取变量的最佳实践是什么。我正在使用子域来获取城市。例如：paris.website.com

> 我如何将巴黎作为变量。我相信我需要使用内核和 htaccess，但我还没有弄清楚如何。

谢谢，如果你能把我放在正确的轨道上。

干杯，

皮埃尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T10:20:40.533

你应该阅读 Symfony 的[文档](http://symfony.com/doc/current/book/index.html)。Symfony 的基本组件之一是提供您所需要的[路由：](http://symfony.com/doc/current/book/routing.html)

www.mysite.com/paris/

使用子域不是解决方案，但在 Symfony 中配置路由后，您可以使用 .htaccess 将子域 paris.mysite.com 重写为 www.mysite.com/paris（如果 Web 服务器允许）。

# matlab - MATLAB：如何从文件中加载不带分隔符的数组

> ID：10884812
> 
> 赞同：2
> 
> 时间：2012-06-04T16:36:13.373
> 
> 标签：matlab, file-io

到目前为止，我一直在使用 load 函数将我的空格分隔文件加载到 matlab 中的数组中。然而，这对我来说浪费了很多空间，因为我的值为 0 或 1。因此，而不是像写文件

```
0 1 1 0 
1 1 1 0 
```

我删除了空格以创建一半的大文件，例如：

```
0110
1110 
```

但是现在加载不再正常工作（创建一个我认为只有第一个数字的矩阵，所以 2x1 而不是 2x4）。我用 importdata 环顾四周，逐行读取文件以及许多其他内容，但找不到明确的解决方案。所以本质上我想从一个没有分隔符的文件中读取一个矩阵。每个数字都是数组的一个元素

有谁知道这样做的干净方法？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-04T16:51:05.527

这是一种方法：

### 数据.txt

```
0110
1110 
```

### MATLAB

```
%# read file lines as cell array of strings
fid = fopen('data.txt','rt');
C = textscan(fid, '%s', 'Delimiter','');
fclose(fid);

%# extract digits
C = cell2mat(cellfun(@(s)s-'0', C{1}, 'Uniform',false)); 
```

结果：

```
C =
     0     1     1     0
     1     1     1     0 
```

如果您真的关心内存，也许您将其转换为布尔值：`C = logical(C)`因为 0/1 是可能的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T16:50:21.623

改编自[此处](http://www.mathworks.com/help/techdoc/ref/fgetl.html)的示例：

```
function ret = readbin()
  fid = fopen('data.txt');
  ret = [];

  tline = fgetl(fid);
  while ischar(tline)
      if isempty(ret)
        ret = tline;
      else
        ret = [ret; tline];
      end
      tline = fgetl(fid);
  end

  % Turn char '0' into numerical 0
  ret = ret - 48;

  fclose(fid);
end 
```

减去 48（'0' 的 ASCII 代码），你会得到一个数字矩阵，在适当的地方有 1 和 0。这是我在函数结束时得到的输出：

```
K>> ret
ret =
     0     1     1     0
     1     1     1     0
K>> class(ret)
ans =
double 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T16:54:29.563

受到这个问题的启发：[Convert decimal number to vector](https://stackoverflow.com/questions/8360462/convert-decimal-number-to-vector)，这是一个命题，但我认为它不适用于大“数字”：

```
arrayfun(@str2double, str); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T19:38:33.057

Amro 解决方案的另一种形式是

```
fid = fopen('data.txt','r');
C = textscan(fid, '%1d%1d%1d%1d');
fclose(fid);
M = cell2mat(C) 
```

或者

```
fid = fopen('data.txt','r');
M_temp = textscan(fid, '%1d');
fclose(fid);
M = reshape(M_temp{1}, 2,4) 
```

这些与 Amro 的解决方案略有不同，因为第一个读取 %1d 格式的数字（1 个字符整数）并返回可以使用更简单的 cell2mat 命令转换的元胞数组 C。第二段代码仅读取这些值的向量，然后对结果进行整形——如果您已经知道数据的大小，这可以正常工作，但如果不知道，则可能需要额外的工作。

如果您的实际文件非常大，您可能会发现其中一种方法更快，尽管如果不实际并排运行它们很难判断。

# javascript - 用 Javascript 处理时区的最佳方法是什么

> ID：10884813
> 
> 赞同：6
> 
> 时间：2012-06-04T16:36:13.910
> 
> 标签：javascript, time, timezone

我有一个具有给定时区的经过身份验证的用户，例如“柏林，GMT+1”。为了这个问题，假设我在全球范围内有这个：

```
var timeZone = "Berlin";
var gmtDistance = 1; 
```

让所有与日期相关的 JS 相应地运行的最佳解决方案是什么，这意味着如果我创建一个新的 Date 对象，它将考虑时区。

* * *

*我认为这很简单，但我似乎没有在 Google/SO 上找到完美的方法。我会优先考虑不需要任何外部库的答案。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T23:55:14.300

我的偏好是使用 UTC 时间将所有日期存储在服务器端，并且当我处理通过 AJAX 调用返回的数据时，创建一个进行一些解析的全局处理程序。

以下示例允许您简单地使用：

```
app.ajax({
    url: '/My/Post/Url',
    data: {
        MyProperty: 'MyValue'
    },
    success: function (data, status, xhr) {
        // Do stuff here...
    },
    error: function (xhr, settings, error) {
        // Do stuff here...
    }
}); 
```

但是，它通过将 UTC 时间的日期固定为本地时区来预先解析“成功”函数的“数据”元素中的任何返回值。请注意 - 执行此操作后，如果您进一步处理数据，则需要在发送回服务器之前对其进行 UN-fix，否则您将使用偏移量将其发布回来。

```
var app = window.app = $.extend(true, {}, app, {
    // Creating a namespace for my app which is safe across multiple files.
    ajax: function (options) {
        var defaultSettings = {
            type: 'POST',
            async: true
        };

        // Capture the settings.
        var settings = $.extend(true, {}, defaultSettings, options);

        // Install our general handlers;
        if (settings.success) {
            settings.success = function (data, textStatus, jqXHR) {
                app.OnPostSuccess(data, textStatus, jqXHR, options.success);
            }
        } else 
            settings.success = app.OnPostSuccess;

        if (settings.error) {
            settings.error = function (jqXHR, ajaxSettings, thrownError) {
                app.OnPostError(event, jqXHR, ajaxSettings, thrownError, options.error);
            }
        } else
            settings.error = app.OnPostError;

        $.ajax(settings);
    },
    OnPostSuccess: function (data, textStatus, jqXHR, fn_after) {
        // Do my generalized success handling here.

        // Fix Dates.
        var fixedData = app.FixDate(data);

        // Call any other handler that's been specified.
        if (typeof fn_after === 'function')
            fn_after(fixedData, textStatus, jqXHR);
    },
    OnPostError: function (jqXHR, ajaxSettings, thrownError, fn_after) {
        // Do my generalized error handling here.

        // Call any other handler that's been specified.
        if (typeof fn_after === 'function')
            fn_after(jqXHR, ajaxSettings, thrownError);
    },
    FixDate: function (obj) {
        var fixed = obj;

        if (typeof obj == 'string' && obj.indexOf('\/Date(') == 0) {
            // Microsoft date "/Date(12345678)/" - convert to real date.
            fixed = new Date(parseInt(fixed.substr(6, fixed.length - 8), 10));
        }

        if (typeof fixed === 'object') {
            if (fixed.getTimezoneOffset) {
                // If the value is a date, apply timezone correction.
                var now = new Date();
                var offset = now.getTimezoneOffset(); // # of minutes from GMT.
                fixed = new Date(fixed.getTime() + offset * 60000);
                // This updates the value based on the offset.
            } else {
                // Otherwise, update each of its properties.
                // This fixes objects with dates for properties, recursively.
                $.each(fixed, function (index, value) {
                    fixed[index] = app.FixDate(value);
                });
            }
        }

        return fixed;
    }
}); 
```

所有这些设置都是为了实现这一目标。如果您现在在 OnPostSuccess 中处理诸如日期之类的事情，您可以确保它们始终采用正确的格式 - 并且始终位于正确的时区。

**无论是否使用上述 AJAX**方法，都可以使用**FixDate**方法，如下所示：

```
var MyObj = { 
    MyDate: "\/Date(12345678)\/"
};

console.log('Before: ', MyObj.MyDate);
MyObj = app.FixDate(MyObj);
console.log('After: ', MyObj.MyDate); 
```

要查看实际示例，请查看以下 jsFiddle：

[http://jsfiddle.net/TroyAlford/TBNVV/](http://jsfiddle.net/TroyAlford/TBNVV/)

注意：这也包括 AJAX 位——但它们没有在示例中使用——只是为了完整性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T16:40:32.137

这样的事情呢？

[http://www.onlineaspect.com/2007/06/08/auto-detect-a-time-zone-with-javascript/](http://www.onlineaspect.com/2007/06/08/auto-detect-a-time-zone-with-javascript/)

```
var rightNow = new Date();
var jan1 = new Date(rightNow.getFullYear(), 0, 1, 0, 0, 0, 0);
var temp = jan1.toGMTString();
var jan2 = new Date(temp.substring(0, temp.lastIndexOf(" ")-1));
var std_time_offset = (jan1 - jan2) / (1000 * 60 * 60); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T08:36:38.960

也许dojo工具包可以给你一些想法[因为你不想要一个外部库;)]

Dojo Toolkit 带有一个很好的日期/时间处理类，并且具有完整的本地化支持，甚至还支持时区。 [http://dojotoolkit.org/api/1.6/dojo/date](http://dojotoolkit.org/api/1.6/dojo/date)

# bash - Eclipse CDT：pkg-config 索引

> ID：10884816
> 
> 赞同：0
> 
> 时间：2012-06-04T16:36:40.760
> 
> 标签：bash, indexing, eclipse-cdt, pkg-config

我正在使用 gtkmm 和 eclipse 开发一个应用程序。虽然我可以手动设置 gtkmm 包含路径和链接选项，但由于引用的项目数量巨大，我决定让 pkg-config 完成这项工作。这很容易，因为将适当的 pkg-config 命令添加到编译器调用就可以了，因为可以简单地使用

```
`...`

```

shell替换，因为eclipse会生成一个makefile，然后执行。

但是，设置索引器权限并不是那么容易。eclipse 不是在解释器中执行 shell 脚本，而是直接执行编译器并直接传递命令行参数，而不用之前替换它们。

执行索引器时如何执行 shell 脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T16:36:41.463

解决方案是直接执行带有标志的bash解释器，`-c`而不是执行g++。对于问题中描述的场景，配置如下：

```
编译器调用命令
   重击

编译器调用争论
   -c "g++ `pkg-config gtkmm-2.4 --cflags` -E -P -v -dD ${plugin_state_location}/specs.cpp"

```

# bash - 如何在 bash 脚本中使用两个不同的用户

> ID：10884818
> 
> 赞同：2
> 
> 时间：2012-06-04T16:36:43.900
> 
> 标签：bash

大家好，我正在RedHat V5.1 上编写一个bash 脚本。在这个脚本中，我必须使用 dbAdmin 运行一个命令，然后我必须再次切换到 root 用户才能运行其他命令。谁能告诉我如何在 bash 脚本中做到这一点。

提前致谢....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T16:43:10.343

您需要以 root 身份运行脚本。然后在代码的任何部分执行以下操作：

```
su - dbadmin -c "command" 
```

将命令替换为您想在 dbadmin 用户下运行的任何内容。

这是 redhat init 脚本在特定用户下运行服务的确切方式，例如。甲骨文数据库

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T16:46:24.413

尝试使用 SUDO 命令在 root 和您的 dbAdmin 帐户之间切换。

[http://ubuntuforums.org/showthread.php?t=826935](http://ubuntuforums.org/showthread.php?t=826935)

[http://linux.die.net/man/8/sudo](http://linux.die.net/man/8/sudo)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T16:43:08.750

```
# command1 ; command2 ; sudo -u dbAdmin command3 ; command4 ; command5 
```

# php - MySQLi插入准备错误

> ID：10884820
> 
> 赞同：1
> 
> 时间：2012-06-04T16:37:00.060
> 
> 标签：php, mysqli

嗨，我在 mysql 数据库中插入了很多东西。

但是现在我在准备语句中遇到错误。我看到数据库准备错误。我究竟做错了什么？

这是我的代码：

```
$sql = "INSERT INTO
                Contact (IP,To,Name,Email,Subject,Text)
            VALUES 
                ( ?, ?, ?, ?, ?, ? )
           ";

    if (!$stmt = $db->prepare($sql)) {
        echo 'Database prepare error';
        exit;
    }

    $stmt->bind_param('ssssss', $ip_contact, $to_contact, $name_contact, $email_contact, $subject_contact, $text_contact);

    if (!$stmt->execute()) {
        echo 'Database execute error';
        exit;
    }

    $stmt->close(); 
```

我的 SQL 表如下所示：

```
Contact:
- ID    int(11)    auto_increment    primary key
- IP    varchar(15)
- To    varchar(5)
- Name    varchar(20)
- Email    varchar(20)
- Subject    varchar(20)
- Text    varchar(600) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T16:40:55.123

例如`to`是[mysql 中的保留字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)，您应该将代码更改为：

```
$sql = "INSERT INTO
            `Contact` (`IP`,`To`,`Name`,`Email`,`Subject`,`Text`)
        VALUES 
            ( ?, ?, ?, ?, ?, ? )
       "; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T16:48:38.237

[首先 To 是 mysql 中的保留字，因此您需要使用此处](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)定义的引号来使用它。

其次，您需要在调用执行方法之前设置变量的值。

```
$sql = "INSERT INTO
            Contact (IP,'To',Name,Email,Subject,Text)
        VALUES 
            ( ?, ?, ?, ?, ?, ? )
       ";

if (!$stmt = $db->prepare($sql)) {
    echo 'Database prepare error';
    exit;
}

$stmt->bind_param('ssssss', $ip_contact, $to_contact, $name_contact, $email_contact, $subject_contact, $text_contact);

$ip_contact = '123456';
$to_contact = '123456';
$name_contact = '12345';
$email_contact = '1111';
$subject_contact = 'test';
$text_contact = 'test';

if (!$stmt->execute()) {
    echo 'Database execute error';
    exit;
}

$stmt->close(); 
```

现在检查一下，它现在应该可以工作了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T16:43:44.937

`To`是 MySQL 中的[保留字](https://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)。您必须在其周围添加反引号：

```
Contact (IP,`To`,Name,Email 
```

# java - 光学聚类算法。如何获得最好的 epsilon

> ID：10884822
> 
> 赞同：6
> 
> 时间：2012-06-04T16:37:00.547
> 
> 标签：java, algorithm, cluster-analysis, data-mining, optics-algorithm

我正在实施一个需要对地理点进行聚类的项目。OPTICS 算法似乎是一个非常好的解决方案。它只需要两个参数作为输入（MinPts 和 Epsilon），它们分别是将它们视为一个簇所需的最小点数，以及用于比较两个点是否在同一个簇中的距离值。

我的问题是，由于点的种类繁多，我无法设置固定的 epsilon。看看下面的图片。

[![问题](../Images/ddc15441f7f9931ed563c80c851a611a.png)](https://i.stack.imgur.com/2tvCc.png)

相同的点结构但不同的规模会导致非常不同的结果。假设设置 MinPts=2 和 epsilon = 1Km。在左侧，该算法将创建 2 个集群（红色和蓝色），但在右侧，它将创建一个包含所有点（红色）的单个集群，但我想在右侧也获得 2 个集群。

所以我的问题是：有没有什么方法可以动态计算 epsilon 值来得到这个结果？

**编辑 2012 年 6 月 5 日下午 3 点 15 分：** 我以为我使用的是 javaml 库中的 OPTICS 算法实现，但它似乎实际上是一个 DBSCAN 算法实现。所以现在的问题是：有人知道基于 Java 的 OPTICS 算法实现吗？

非常感谢你，原谅我糟糕的英语。

马可

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T20:20:10.047

OPTICS 中的 epsilon 值仅用于限制使用索引结构时*的运行时复杂性。*如果您没有加速度索引，则可以将其设置为**infinity**。

引用 Wikipedia on OPTICS

> 参数 \varepsilon 严格来说是不必要的。它可以设置为最大值。然而，当空间索引可用时，它在复杂性方面确实发挥了实际作用。

你看起来更像是 DBSCAN 而不是 OPTICS。在 OPTICS 中，您不需要选择 epsilon（作者应该将其称为 max-epsilon！），但是您的集群提取方法会解决这个问题。您是否使用 OPTICS 论文中提出的 Xi 提取？

minPts 更为重要。您应该尝试至少 5 或 10 的值，而不是 2。使用 2，您实际上是在执行单链接聚类！

一旦增加 minPts，您上面给出的示例应该可以正常工作！

**回复：编辑：**您甚至可以在 Wikipedia 文章中看到，ELKI 有一个适当的 OPTICS 实现，并且它是用 Java 编写的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T19:02:58.293

您可以尝试通过封闭矩形的总大小来缩放 epsilon。例如，您的左侧数据约为 4km x 6km（使用我的 Mark I 眼球测量），右侧约为 2km x 2km。因此，右侧的 epsilon 应该小 2.5 倍左右。

当然，这并不可靠。如果在您的右手数据中，在右侧 4 公里处和向下 2 公里处有一个额外的单点，这将使右侧的封闭矩形与左侧的相同，并且您会得到相似（错误）的结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-01T20:37:39.620

您可以尝试最小生成树，然后删除最长的边。剩下的生成树和它们的中心是 OPTICS 的最佳中心，您可以计算它周围的点数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T17:36:56.760

在您上面的解释中，是规模变化造成了不确定性。当你的规模变大时，你的 epsilon 应该相应地改变。因为它们处于两个非常不同的比例，所以您呈现的两个图像不是同一组点。如果不更改参数，它们不会对您的 OPTICS 算法做出相同的响应。

简而言之，没有。没有办法动态计算 epsilon 来得到这个结果。像这样的聚类已经是 NP-Hard，这些聚类算法（optics、k-means、veroni）只能逼近最优解。

# c# - 每天使用 TraceSource 写入新的日志文件

> ID：10884832
> 
> 赞同：4
> 
> 时间：2012-06-04T16:37:39.233
> 
> 标签：c#

我在我的应用程序中使用记录器来写入文件。在 app.config 文件中定义了源、开关和监听器，如下所示：

```
 <system.diagnostics>
    <sources>
      <source name="LoggerApp" switchName="sourceSwitch" switchType="System.Diagnostics.SourceSwitch">
        <listeners>
          <add name="myListener" type="System.Diagnostics.TextWriterTraceListener" initializeData="myListener.log" />
        </listeners>
      </source>
    </sources>
    <switches>
      <add name="sourceSwitch" value="Information" />
    </switches>
  </system.diagnostics> 
```

在内部，我的 .cs 代码，我使用记录器如下：

```
private static TraceSource logger = new TraceSource("LoggerApp");
logger.TraceEvent(TraceEventType.Information, 1, "{0} : Started the application", DateTime.Now); 
```

我需要做什么来每天创建一个新的日志文件，而不是每次都写入同一个日志文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T16:42:59.537

> 我需要做什么来每天创建一个新的日志文件，而不是每次都写入同一个日志文件？

您必须制作自己的[TraceListener](http://msdn.microsoft.com/en-us/library/system.diagnostics.tracelistener.aspx)而不是使用`TextWriterTraceListener`. 这将允许您的`TraceListener`实现每天更改日志文件，或执行您希望的任何其他自定义行为。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-07-21T12:24:33.530

```
Try use:

<system.diagnostics>
    <sources>
      <source name="LoggerApp" switchName="sourceSwitch" switchType="System.Diagnostics.SourceSwitch">
        <listeners>
          <add name="myListener" type="System.Diagnostics.TextWriterTraceListener" initializeData="myListener-{0:dd}-{0:MM}-{0:yyyy}.log" />
        </listeners>
      </source>
    </sources>
    <switches>
      <add name="sourceSwitch" value="Information" />
    </switches>
  </system.diagnostics> 
```

# javascript - Javascript如何处理函数参数

> ID：10884843
> 
> 赞同：4
> 
> 时间：2012-06-04T16:38:46.787
> 
> 标签：javascript, function, parameters

我最近遇到了一些 javascript 的问题，该问题与我的编程背景的每一个骨骼都背道而驰。Javascript 经常对我这样做，所以我并不感到惊讶。

我有这样的功能......

```
function x(param1, booleanParam, arrayParam){
    ....
} 
```

我收到一个运行时错误，说`arrayParam.length`没有定义。在调试时，我看到这是真的，并去找出原因。原来我在函数调用中忘记了逗号......

```
x(param1, true [arrayJunk]); 
```

我遇到的问题是弄清楚为什么要打这个电话？为什么这不是编译错误，Javascript 是如何看到这个并认为，“是的，这似乎可以工作！”

提前感谢您可以分享的任何启发！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T16:40:24.213

那是一个索引表达式。
它的语法与`someArray[someIndex]`.

它最终也会`undefined`作为第二个参数传递，除非`arrayJunk`碰巧是布尔基元的属性名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T16:44:24.263

会发生以下情况：

*   JavaScript 引擎转换`true`为`Boolean`对象（不是原语）
*   然后它尝试访问存储在`arrayParam`该对象中的属性名称
*   属性不存在，所以它返回 undefined

如果`arrayParam`是字符串`"toString"`，它将返回一个函数对象

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T16:41:37.043

在这种情况下，表达式被解释为索引。本质上与

```
someArray[42] 
```

所以它被视为带有 2 个参数而不是 3 个参数的函数调用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T16:44:26.330

许多动态语言不会检查您是否向函数传递了太多或太少的参数。

虽然这有时可以掩盖错误，但它也允许您滚动自己的默认参数方案。

# sql-server-2008 - 经典 ASP - Ado Recordset Open()

> ID：10884850
> 
> 赞同：0
> 
> 时间：2012-06-04T16:39:37.237
> 
> 标签：sql-server-2008, iis-7, asp-classic

我正在尝试在我的本地计算机上设置一个用 ASP Classic 编写的旧站点。我正在使用 SQL Server 2008 和 IIS 7.5 版。

当我尝试打开与数据库的连接时遇到错误。

我使用了[这篇文章中的建议](https://stackoverflow.com/questions/1359579/classic-asp-sql-server-2008-connection-string-using-windows-authentication)

使用 .udl 文件来创建和测试我的连接字符串，以便我知道连接字符串有效。我正在使用 Windows 身份验证，并且我确定运行此站点的应用程序池可以访问数据库，因为我为多个站点使用同一个池并且它们都可以正常连接。

打开连接时，我试图运行存储过程，如果我只是写出存储过程字符串并直接在我的数据库中运行它，它会按预期工作。

这是代码：

```
Const adUseClient = 3
Const adCmdStoredProc = 4
Const adOpenStatic = 3
Const adLockBatchOptimistic = 4

dim connectstring,sql
connectstring = "Provider=SQLOLEDB.1;Integrated Security=SSPI;Persist Security Info=False;Initial Catalog=my-database;Data Source=(local)\SQLEXPRESS"
sql = "MyProc '" & param1 & "','" & param2 & "'"
set rs = Server.CreateObject("ADODB.RecordSet")
rs.CursorLocation = adUseClient
rs.CursorType = adOpenStatic
rs.LockType = adLockBatchOptimistic
' this is where it is failing
rs.Open sql, connectstring, 3 
```

问题之一是我得到的错误似乎是由 IIS 生成的，它只是说：

处理 URL 时服务器发生错误。请联系系统管理员。

如果您是系统管理员，请单击此处了解有关此错误的更多信息。

当我单击“单击此处”链接时，它会将我带到有关在 IIS 7 上运行 ASP Classic 站点的常规页面，但我找不到任何与我的错误相关的内容。我似乎无法找到从哪里获取有关该错误的信息。作为最后的手段，我检查了事件查看器-> Windows 应用程序日志，但没有条目记录我的错误。

我已经用谷歌搜索并尝试了连接字符串的多种排列，但无济于事。如果有人对如何解决这个问题有任何建议，或者甚至知道在哪里寻找解决方案，我将不胜感激。非常感谢！

**编辑： **

好的，我更改了 IIS 设置以在浏览器中显示错误，现在我收到一条更有用的错误消息，它是：

> 用于 SQL Server 错误“80004005”的 Microsoft OLE DB 提供程序
> 
> 无法打开登录请求的数据库“rw-gp”。登录失败。

现在，当我用 Google 搜索时，我发现这通常是权限问题。如您所见，我正在使用 Windows 身份验证，并且在有权连接到数据库的应用程序池下运行该站点。我在本地设置了多个在此应用程序池中运行的 ASP.NET 站点，它们可以使用集成安全性进行连接。我不确定出了什么问题，有人有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T11:26:01.743

ASP Classic 脚本**始终**使用模拟运行（这与默认情况下模拟关闭的 ASP.NET 不同）。

因此，由于您使用 SSPI 而需要访问数据库的用户需要是被模拟的用户。

默认情况下，模拟用户是指定为匿名用户的 IUSR 帐户，但是如果您打开了 Windows 集成安全性，那么用户很可能是运行客户端浏览器的用户帐户。无论哪种情况，您都需要确保被模拟的用户有权访问数据库或停止使用 SSPI。

如果您只使用匿名访问，您可以通过 IIS 管理器指定用于匿名访问的帐户是应用程序池标识。

# jquery - 如何使用 .submit() 确保浏览器之间没有问题

> ID：10884858
> 
> 赞同：0
> 
> 时间：2012-06-04T16:40:06.590
> 
> 标签：jquery, upload, fancybox, submit, confirm

我有一个上传表单，然后提交是一个指向确认框的链接。这两个都是用jquery插件fancybox制作的。所以从技术上讲，它不是一个确认框，它只是一个 div。我在确认框中有我的提交按钮，但在 IE/FF 中不起作用，所以我使用了 .submit() 。

它适用于 Chrome、IE 和 Firefox，但我听说你永远无法确定是否使用 javascript。有没有办法我可以确定这将“永远”工作？

```
<form name="importForm" action="<?=site_url('headquarters/importDesign')?>" method="POST" enctype="multipart/form-data">
  <div id="import-design">
    <div id="inline2">
        <div class="form-section">
            <ul>
                <li><span class="input">File:</span><input name="userfile" size="40" type="file" /></li>
                <li><span class="input">File Name:</span><input type="text" name="name" /></li>
            </ul>
        </div>
        <div class="form-section">
            <a class="various1" href="#inline3"><button>Submit</button></a>
        </div>
    </div>
</div>
<div id="import-confirm">
    <div id="inline3">
        <h2>Confirm Reset?</h2>
        <p>Do you really want to proceed? All design data will be overwritten.</p>
        <hr class="inv-hr" />
        <div id="buttons">
            <button class="float-right" onClick="window.location.href='<?=site_url('headquarters/migrationDetails')?>'">Cancel</button>
            **<a href="javascript:document.importForm.submit();">Click to submit the form</a>**
        </div>
    </div>
</div>          
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T16:41:59.727

确保 JavaScript 代码可以在您关心的所有浏览器中运行的唯一 100% 可靠的方法是在这些平台上对其进行测试。

有许多工具和服务可以让您更轻松地做到这一点。参见例如

[http://www.smashingmagazine.com/2011/08/07/a-dozen-cross-browser-testing-tools/](http://www.smashingmagazine.com/2011/08/07/a-dozen-cross-browser-testing-tools/)

# python - 3d 点的平均值作为最小化任务

> ID：10884861
> 
> 赞同：0
> 
> 时间：2012-06-04T16:40:26.503
> 
> 标签：python, gradient, points, mean

我有一组`n` 3D 点`(x,y,z)`，我想计算它的平均值。

特别是我的目的是比较几个指标之间的差异。

欧几里得距离：`D_E(D_1,D_2) = ||D_1 - D_2||`

黎曼距离：`D_R(D_1,D_2) = ||log(D_1^(-1/2) * D_2 * D_1^(-1/2))||`

一旦我修复了一个指标，我应该计算一个最小化问题。

我在 Python Scipy.optimize 中创建了此类任务，但我不知道如何制定问题。我应该使用 for 循环吗？

编辑：

我找到*了 scipy.optimize.leastsq*。对于我的目标，这似乎很有用。我如何在梯度下降框架中使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T16:48:33.893

```
>>> import numpy as np
>>> a = np.array([[1,2,3],[1,2,3],[7,-100,8]])
>>> a.mean(axis=0)
array([  3\.        , -32\.        ,   4.66666667]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T17:53:39.690

没有额外的库：

```
>>> make_operation = lambda op: lambda *points: tuple(map(op, *points))

>>> add = make_operation(lambda x1, x2: x1 + x2)
>>> sub = make_operation(lambda x1, x2: x1 - x2)

>>> print add((1,2,3), (4,5,6))
(3,5,7)

>>> div = lambda point, num: tuple(map(lambda x: float(x) / num, point))
>>> print div((4,6,8), 2)
(1,2,3)

>>> mean = lambda *points: div(reduce(add, points), len(points))
>>> print mean((1,2,3), (1,2,3), (7,-100,8))
(3.0, -32.0, 4.666666666666667) 
```

# jquery - 将字符串数组转换为对象数组的问题-JSON.parse

> ID：10884862
> 
> 赞同：0
> 
> 时间：2012-06-04T16:40:26.990
> 
> 标签：jquery, ruby-on-rails, json, e-commerce

根据我一直在阅读的内容，我知道这并不是非常困难，但我一直收到错误消息。通常类似于意外标识符的内容。

[https://gist.github.com/2869105](https://gist.github.com/2869105)

要点显示了所有相关信息，但我将在此处添加主要 js。

```
- content_for :javascripts do 
  - cache('search_autocomplete') do
    :javascript
      $(function(){
      var products = #{auto_complete_products.to_json};
        $("#keywords").autocomplete(products,{
        appendToElement: ".autocomplete"
          });
      }); 
```

这就是它目前的设置方式。我想将此字符串数组转换为对象数组，因为当自动完成发生时，我将添加图像以及当前名称。

Rails 3.0.7 Mac OS X Lion HAML/SASS

请注意要点中的第二个文件是我尝试过的，但没有奏效。

任何帮助是极大的赞赏。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T17:16:55.397

我以这种方式使用自动完成功能：`$('#keywords').autocomplete({source: array_or_hash_or_path})`.

所以我想你需要这样的东西：

```
$("#keywords").autocomplete({source: #{auto_complete_products.to_json}}) 
```

# grails - Spock 框架与 Grails 1.3.8 中的其他插件有冲突

> ID：10884865
> 
> 赞同：1
> 
> 时间：2012-06-04T16:40:38.423
> 
> 标签：grails, spock

我已经在 Grails 1.3.8 应用程序上安装了 Spock。运行测试应用程序后失败。它似乎与我的其他插件有一些冲突，但我无法弄清楚。我安装了 20 多个插件。

错误是：

```
 org.codehaus.groovy.control.MultipleCompilationErrorsException: startup failed:
     Could not instantiate global transform class  
     org.spockframework.compiler.SpockTransform specified at jar:file:
     /C:/Documents%20and%20Settings/xxxxxxx/.ivy2/cache/org.spock
     framework/spock-core/jars/spock-core-0.6-groovy-1.8.jar!/META-INF/services  
     /org.codehaus.groovy.transform.ASTTransformation  because of exception 
     org.spockframework.util.IncompatibleGroovyVersionException: The Spock 
     compiler plugin cannot execute because Spock 0.6.0-groovy-1.8 is not compatible  
     with Groovy 1.7.8\. For  more information,see http://versioninfo.spockframework.org
     Spock location: file:/C:/Documents%20and%20Settings/xxxxxx/.ivy2/cache
     /org.spockframework
     /spock-core/jars/spock-core-0.6-groovy-1.8.jar
     Groovy location: file:/C:/dev/Grails/grails-1.3.8/lib/groovy-all-1.7.8.jar 
```

这是我的构建配置：

```
dependencies {
    test "org.spockframework:spock-grails-support:0.6-groovy-1.7"
}
plugins {
    compile ":joda-time:1.4"
    compile ":excel-import:0.9.6"
    compile ":export:1.3"

    test(":spock:0.6") {
      exclude "spock-grails-support"
  }
} 
```

如果我不安装任何插件，我可以毫无问题地运行 spock 测试。我不确定其中一个插件是否有特定的东西，或者关于 Spock 的东西，甚至是我做错了什么。

附加信息：我发现出于某种原因，一个/多个插件阻止 Grails 下载

spock-grails-support:0.6-groovy-1.7

使用我的插件，Grails 只下载 spock-grails-support:0.6-groovy-1.8 而不是 1.3.8 所需的 1.7。所以现在我不确定是什么阻止了 Grails 下载依赖项。

感谢您的任何建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T02:49:30.687

似乎 Joda-time 插件依赖于 Spock，尽管它在插件中将导出设置为 false，它迫使 Grails 在我的应用程序中下载 spock-grails-support:0.6-groovy-1.8。我有它来排除spock，到目前为止它似乎工作。

```
compile (":joda-time:1.4") { exclude "spock" } 
```

# java - Eclipse：添加字段时如何自动生成getter？

> ID：10884867
> 
> 赞同：8
> 
> 时间：2012-06-04T16:40:52.760
> 
> 标签：java, eclipse

我正在使用 TDD，并且有一个非常典型的编码模式，在我编写单元测试代码时使用 Eclipse 自动创建方法和字段。例如：

1.  不存在的方法的类型名称，例如：

    `myObj.setValue(someValue);`

2.  单击 IDE 中的红色小错误标记以创建“setValue”方法。

3.  在 setValue 方法中输入：

    `public void setValue(String value) { this.value = value; }`

4.  单击红色错误标记自动创建一个私有字段（称为“本例中的值”）；

所以在这一点上，我希望 Eclipse 自动创建 getter 方法，而不必使用*源代码 -> 生成 getter 和 setter*菜单。

我看到了这个问题：[How do you force Eclipse to prompt you to create a getter and setter when it does not do it automatically](https://stackoverflow.com/questions/3822687/how-do-you-force-eclipse-to-prompt-you-to-create-a-getter-and-setter-when-it-doe)这似乎暗示Eclipse会这样做，但我找不到在哪里配置它。

有没有办法配置 Eclipse 在添加新的私有变量时自动添加 setter/getter？

**更新**：为了进一步澄清，我正在寻找我在[Spring Roo](http://www.springsource.org/spring-roo#documentation)文档中看到的内容。如果您查看“工作原理”部分，它描述了框架如何在您添加私有变量时自动向您的类添加其他方法。（但是，我的偏好是不运行另一个类似的进程，也不要得到它似乎添加的所有内容）。我希望 Eclipse 有类似的东西。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-04T16:44:58.843

当您将鼠标移到变量名称上方时，您可以在弹出菜单中选择“为 varname 创建 getter 和 setter”。

或者您可以为自己创建一个快捷方式来执行此操作。首选项 -> 常规 -> 键。在搜索框中输入“getter”，然后您就会找到它。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-04T17:02:45.220

试试这个，它像黄油一样起作用

```
Go to Source --> Generate Getter and Setter Methods

Either select one instance variable, or all ---> Ok 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-11-26T10:05:00.627

我的做法有些不同。

*   首先创建变量：（比如说`private int threadsInPool = 3`）。
*   将光标放在变量名上（比如`threadsInPool`）
*   应用此快捷方式：++ `Alt`，（稍稍*延迟后**按最后*一个）`Shift``s``r`*`r`*
*   只需在*Generate Getters and Setters*对话框出现时按 Enter，瞧！

**编辑：** 您也可以尝试使用[Lombok](https://projectlombok.org)注释：

```
@Getter @Setter private String value; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-04T16:47:18.303

嗯...不知道这是否是您要查找的内容，但是如果我在类中创建一个字段，则会警告该字段未使用。如果我单击警告标志，则会出现为该字段生成 getter 和 setter 的选项：

![在此处输入图像描述](../Images/df40f45744e81cb83bd9617a38e626fe.png)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-04T16:48:25.227

我认为这个问题并不意味着，因为所有答案都给出了手动解决方案。

AFAIK 没有插件就不可能自动完成，而且我不知道有一个插件可以做到这一点。

我使用模板一次创建这样的工件，但我不遵循相同的路径-如果已经存在 getter 或 setter，我不确定模板解决方案是否有效，因为我不确定你可以检查方法的存在并根据它做出模板决策。也许你可以。

# vb.net - 列表框项目的行数（文件数量）

> ID：10884870
> 
> 赞同：0
> 
> 时间：2012-06-04T16:41:11.060
> 
> 标签：vb.net, listbox, counting, listboxitems, line-count

这是我用来添加文件并检查每个选定文件中的行数（文件数量）的当前代码。这也被添加到单独的列表框中以供查看。

```
Dim selectedItems = (From i In ListBox2.Items).ToArray()
    For Each selectedItem In selectedItems
        ListBox1.Items.Add(selectedItem)
        ListBox2.Items.Remove(selectedItem)

        Dim FileQty = selectedItem.ToString
        Dim LineCount = System.IO.File.ReadAllLines(TextBox1_Path.Text + "\" + FileQty).Length
        ListBox6.Items.Remove(LineCount)
    Next 
```

我不确定如何计算所有被选中的文件以获得总计。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T19:43:23.177

如果您执行 getSelectedItems()，这将为您提供所选文件的索引。因此，使用 .count 即可获得所选项目的数量。或者数一数你这样做的次数。这会给你同样的答案。

# ruby - 续集：如何使用分组和计数

> ID：10884871
> 
> 赞同：6
> 
> 时间：2012-06-04T16:41:13.463
> 
> 标签：ruby, count, group-by, sequel

简而言之，如何使用[Sequel](http://sequel.rubyforge.org/)进行此查询？

```
select a.id, count(t.id)
from albums a
right join tracks t on t.album_id = a.id
group by a.id 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-04T19:18:37.260

```
DB[:albums___a].
  right_join(:tracks___t, :album_id=>:id).
  select_group(:a__id).
  select_more{count(:t__id)} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T16:47:45.710

您的问题是左连接为每个专辑 ID 找到一个轨道 ID。解决方案：

`right join`

总和的子查询，假设续集支持：`left join (select album_id, count(album_id) as count from tracks group by album_id) t on`

海峡向上`from albums a, tracks t where t.album_id=a.id`而不是加入。

# ruby-on-rails - Rails 3 - 在model.save之后修改其他模型的属性

> ID：10884874
> 
> 赞同：1
> 
> 时间：2012-06-04T16:41:47.970
> 
> 标签：ruby-on-rails, ruby-on-rails-3, model, attr, after-save

不幸的是，我可能仍然是一个 Rails 初学者，所以，即使我考虑并尝试了不同的方法，我也没有得到我想要的工作，现在不得不再次寻求帮助。

我有一个 REST 评论投票机制，每条评论都会竖起大拇指。这很好用，每个都用 counter_cache 处理来计数。现在，根据这些赞成和反对票，我想计算每个评论的正负值，thumbs_up-votes - thumbs_down-votes。虽然我不确定这是否是处理该问题的最有效方法，但我计划将正负值作为评论模型的额外整数属性（而竖起大拇指和向下竖起大拇指是自己的模型）。所以，我基本上想要的是，当保存 thumbs_up 时，评论的加减属性自动应该是`+= 1`，并且分别为 thumbs_down.save `a -= 1`。

如何从 thumbs_up 控制器中发出这样的操作？我需要修改我的 form_for 还是我的方法完全错误？

是否有一个 after_save 回调来处理不同模型的属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T16:49:30.527

从你给的，很难说。但我想说，如果您需要独立显示评论的“赞”和“赞”，请将它们存储为您的 Comment 模型的字段。然后，只需在您的 Comment 模型中创建一个辅助方法即可获得评论的评分：

```
 def rating
      thumbs_up - thumbs_down
   end 
```

**编辑：** 有了你的新评论，我仍然会说创建一个辅助方法而不是一个字段。

```
 #models/comment.rb
   def rating
      thumbs_up.all.length - thumbs_down.all.length #or whatever way you want to do this
   end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T19:55:29.430

如果您不想将两个不同的模型与实际上不属于这两个模型的辅助方法混合，您可以使用 Observers [http://api.rubyonrails.org/classes/ActiveRecord/Observer.html](http://api.rubyonrails.org/classes/ActiveRecord/Observer.html)

您的观察者将观看一个模型并做某事

# asp.net - 用于商业用途的免费嵌入式文档数据库

> ID：10884875
> 
> 赞同：1
> 
> 时间：2012-06-04T16:41:49.373
> 
> 标签：asp.net, asp.net-mvc, document-database

我正在查看我的 ASP.NET MVC 应用程序的文档数据库，我需要一些可以嵌入到我的应用程序中的东西，但也是免费的。我有一个公共网站，我还没有赚钱，但将来可能会。也就是说，我注意到有关这些服务器的以下内容：

*   RavenDB 不能以嵌入式形式免费用于商业用途
*   MongoDB 免费，但不能原生嵌入。有些人已经将它嵌入，但它可能需要 AGPL 许可，如果这是真的，我不能这样做（[可以将 mongodb 用作嵌入式数据库吗？](https://stackoverflow.com/questions/6115637/can-mongodb-be-used-as-an-embedded-database)）。
*   db40 不可免费用于商业用途，但源代码通常不可用。

有没有快速免费的？同样，我不能将它作为服务器托管，但需要一个可嵌入的数据库到应用程序中。

谢谢。

# node.js - 在代理上下文中运行代码

> ID：10884880
> 
> 赞同：1
> 
> 时间：2012-06-04T16:42:13.750
> 
> 标签：node.js, ecmascript-harmony

我正在试验 Harmony 代理，我想在代理上下文中运行代码，这意味着代码的全局对象将是代理。例如，如果我在代码中调用函数 foo()，它将由代理 get() 方法管理。

但是使用 Proxy.create() 和 vm.runInNewContext() 不起作用，似乎 Proxy 对象被新的上下文对象覆盖并失去了他的属性。

```
var vm = require('vm');

var proxy = Proxy.create({
    get: function(a, name){
        return function(){
            console.log(arguments);
        }
    }
});

vm.runInNewContext("foo('bar')", proxy); // ReferenceError: foo is not defined 
```

有什么办法可以实现我想要做的事情吗？

**// 编辑**

```
(function() {
    eval("this.foo('bar')");
}).call(proxy); 
```

上面的代码效果很好，但是我希望可以不用`this`语句，直接引用全局上下文。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T15:13:07.387

简短的回答：不要想它。:)

更长的答案：V8 对全局对象的处理涉及很多魔法，以处理诸如框架、安全访问检查等浏览器问题。就目前而言，这种魔法与使用代理完全不兼容. 这种情况最终可能会改变，但不会很快改变。

话虽如此，我也不认为你*应该*这样做。全局对象是一个非常骇人听闻的功能，它将在 Harmony 中被降级，最好不要尝试用它玩肮脏的把戏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T15:38:05.400

这有两种可能。在 Node 中，我可以通过稍微修改的 contextify 来做到这一点。Contextify 是一个允许将任意对象转换为全局上下文以运行的模块，类似于 vm 模块。它通过创建一个具有命名属性拦截器的全局对象来实现这一点，该对象然后转发对该对象的访问，因此它能够保持引用“活动”而不是像节点的内置 vm 那样复制属性。我所做的修改是更改它，以便这些访问会触发正确的代理陷阱，IE 更改`ctx->sandbox->GetRealNamedProperty(property)`（不会触发代理获取陷阱）到`ctx->sandbox->Get(property)`. has、set 等的类似更改。属性枚举不能正常工作（在上下文中也不正常），因为处理属性列表的能力（至少对于 getOwnPropertyNames）没有暴露给 API。

上下文化：[https](https://github.com/brianmcd/contextify) ://github.com/brianmcd/contextify 我的分叉：[https](https://github.com/Benvie/contextify) ://github.com/Benvie/contextify 拉取请求：[https ://github.com/brianmcd/contextify/pull/23](https://github.com/brianmcd/contextify/pull/23)

第二种方法将普遍适用，但实际上不会产生代理全局。本质上，您为全局中的每个现有对象创建代理，然后在创建的函数中加载所需的代码，该函数将所有属性作为函数参数进行隐藏。就像是：

```
var globals = Object.getOwnPropertyNames(global);
var proxies = globals.map(function(key){
  return forwardingProxy(global[key]);
});
globals.push(codeToRun);
var compiled = Function.apply(null, globals);
var returnValue = compiled.apply(forwardingProxy(global), proxies); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T14:31:18.717

```
global.__proto__ = forwarder(global.__proto__);
console.log([hello, my, name, is, bob, weeeee])

function forwarder(target){
  var traps = {
    getOwnPropertyDescriptor: Object.getOwnPropertyDescriptor.bind(null, target),
    getOwnPropertyNames: Object.getOwnPropertyNames.bind(null, target),
    keys: Object.keys.bind(null, target),
    defineProperty: Object.defineProperty.bind(null, target),
    get: function(r,k){ return target[k] },
    set: function(r,k,v){ target[k] = v; return true },
    has: function(k){ return k in target },
    hasOwn: function(k){ return {}.hasOwnProperty.call(target, k) },
    delete: function(k){ delete target[k]; return true },
    enumerate: function(){ var i=0,k=[]; for (k[i++] in target); return k }
  };

  var names = {
    get: 1,
    set: 1,
    has: 0,
    hasOwn: 0,
    delete: 0,
    defineProperty: 0,
    getOwnPropertyDescriptor: 0
  }

  return Proxy.create(Proxy.create({
    get: function(r, trap){
      return function(a, b){
        if (trap in names)
          console.log(trap, arguments[names[trap]])
        else
          console.log(trap);

        if (trap === 'get' && !target[b]);
          return b;

        if (trap in traps)
          return traps[trap].apply(target, arguments);
      }
    }
  }), Object.getPrototypeOf(target));
} 
```

# regex - Regex to match filename in a url

> ID：10884884
> 
> 赞同：0
> 
> 时间：2012-06-04T16:42:33.697
> 
> 标签：regex, filenames

I'm wanting to remove any filenames from a url path (which doesn't contain the domain) in javascript.

The path would look like this:

```
/something/myfile.html?d=var 
```

or

```
/something/myfile.html 
```

and this is the desired output:

```
/something/ 
```

Sometimes urls get passed in like this:

```
/something/else 
```

I don't want 'else' to be stripped out. In other words a regex that simply strips everything after the last slash would not work in my case.

**EDIT**: To clarify, I consider a filename anything with a . after a forward slash as seen above.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T16:51:08.717

Remove that which matches the following regex pattern:

```
[^/?]*\.[^/?]*(\?.*)?$ 
```

or really

```
[^/?#]*\.[^/?#]*(\?.*)?(\#.*)?$ 
```

Don't forget to use `decodeURIComponent` on what's left.

# javascript - D3js：如何通过鼠标单击获取纬度/对数地理坐标？

> ID：10884886
> 
> 赞同：8
> 
> 时间：2012-06-04T16:42:48.360
> 
> 标签：javascript, jquery, d3.js, topojson

[在任何投影](http://mbostock.github.com/d3/talk/20111018/azimuthal.html)的地图 dataviz 上使用一些 D3js 代码和投影的 topojson 数据，我怎样才能取回地理坐标？像这样的东西：

```
var svg = d3.select("#viz").append("svg:svg")
 .attr("width", 320)
 .attr("height", 200)
 .on("mousedown", mousedown)
 .on("click", mouselocation); 
```

**如何通过单击 D3js 地图可视化来获取地理坐标？**

欢迎提供演示链接。

* * *

**编辑：**相关演示列表：

*   [OpenLayers 演示](http://openlayers.org/dev/examples/click.html)......但我们什么 D3js。
*   [杰森戴维斯/旋转/](http://www.jasondavies.com/maps/rotate/)使用`projection.invert(d3.mouse(this))`

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-04T17:35:36.133

使用[d3.mouse](https://github.com/mbostock/d3/wiki/Selections#wiki-d3_mouse)获取像素坐标，然后使用投影（此处为[d3.geo.azimuthal](https://github.com/mbostock/d3/wiki/Geo-Projections#wiki-azimuthal)）将*x*和*y*反转为经度和纬度。例如：

```
d3.select("svg").on("mousedown.log", function() {
  console.log(projection.invert(d3.mouse(this)));
}); 
```

如果您想支持单击 SVG 的背景，您可能还需要一个带有指针事件的不可见矩形：全部。（另请注意：旧版本的 D3 使用 d3.svg.mouse 而不是 d3.mouse。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-23T13:34:40.590

[Jason Davies/rotate/](http://www.jasondavies.com/maps/rotate/)的使用`projection.invert(d3.mouse(this))`很好，值得一看。

`.on("mousedown.grab", function() { var point; if (mousePoint) point = svg.insert("path", ".foreground") .datum({type: "Point", coordinates: projection.invert(d3.mouse(this))}) .attr("class", "point") .attr("d", path); // add back the point`

# c# - 如何知道 WCF 服务的可用性？

> ID：10884887
> 
> 赞同：2
> 
> 时间：2012-06-04T16:42:49.857
> 
> 标签：c#, wcf

在进行服务调用之前，我想知道 WCF 服务是否可用。最好的方法是什么？

如何使用这个：

```
bool isServiceUp = true;
try
{
   string address = "http://localhost/MyService.svc?wsdl";

 MetadataExchangeClient mexClient = new MetadataExchangeClient(new Uri(address), MetadataExchangeClientMode.HttpGet);
   MetadataSet metadata = mexClient.GetMetadata();
// if service down I get the exception
}
   catch (Exception ex)
{
    isServiceUp = false;
} 
```

**我的服务正在使用 net tcp 绑定。**

我可以将它用于网络 tcp 绑定吗？

**编辑：**谢谢贾里德帕。假设我的第一次通话成功，而第二次通话时服务器已关闭。因此，在进行服务调用之前，我检查了处于 OPEN 状态的代理的状态，因此我进行了最终超时的服务调用。我没有设置任何打开或关闭超时，因此默认情况下需要 1 分钟，并且调用在我处理代理的服务的故障事件处理程序中被捕获。但是到那时 UI 挂起，我该怎么办？

请指导。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T16:46:29.740

这种类型的测试根本不可能。在您尝试之前，无法可靠地检测给定的 WCF 或任何网络调用是否会成功。有太多变量超出了您的控制范围。

*   物理网络
*   运行 WCF 的计算机上的电源
*   实际的 WCF 程序
*   运行代码或 WCF 代码的计算机上硬盘驱动器的稳定性

其中任何一个都可以在任何时间点终止/更改。因此，无法预测给定的调用是否会成功。

解决此问题的最佳方法是简单地使调用添加代码以处理它确实失败的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-11T22:14:55.373

试试下面的代码，它对我有用。ServiceController 类位于“System.ServiceProces”命名空间中。

```
try
{
    ServiceController sc = new ServiceController("Service Name", "Computer's IP Address");
    Console.WriteLine("The service status is currently set to {0}",
        sc.Status.ToString());

    if ((sc.Status.Equals(ServiceControllerStatus.Stopped)) ||
        (sc.Status.Equals(ServiceControllerStatus.StopPending)))
    {
        Console.WriteLine("Service is Stopped, Ending the application...");
        Console.Read();
        EndApplication();
    }
    else
    {
        Console.WriteLine("Service is Started...");
    }
}
catch (Exception)
{
    Console.WriteLine("Error Occurred trying to access the Server service...");
    Console.Read();
    EndApplication();
} 
```

# linux - bash 上的脚本，可以吗？

> ID：10884891
> 
> 赞同：-6
> 
> 时间：2012-06-04T16:43:05.007
> 
> 标签：linux, bash

有一个字符串`$STRING`，其中的音节是用空格写的。如果变量`$WORD`在此字符串中至少有一个音节，请以任何方式报告。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T22:27:40.117

您的解决方案检查是否`$WORD`存在于`$STRING`它应该相反的时间。试试这个：

```
string="run walk stand"
word=walking
if echo "$string" | sed -e 's/ /\n/g' | grep -Fqif - <(echo "$word")
then
    echo "Match!"
fi 
```

如您所见，您可以测试结果，`grep`而无需将输出保存在变量中。

顺便说一句`-n`是一样的`! -z`。

# gwt - GWT i18n 和图像

> ID：10884894
> 
> 赞同：3
> 
> 时间：2012-06-04T16:43:11.997
> 
> 标签：gwt, internationalization, image

有没有办法在 GWT 中轻松国际化图像（使用 g:Image 和 ImageResource）？据我所见，可以使用以下方法将 img 元素的 src 属性国际化：

```
<img src="http://www.images.com/englishVersionOfImage.png" alt="">
<ui:attribute name="src" description="Image to be internationalized"/>
</img> 
```

并通过更改相应 LocalizableResource_xxxx.properties 文件中的 src 值。

但是，这种技术似乎不适用于 `<g:Image resource="{resources.MyImageResource}"/>`元素。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T22:59:29.443

应该与所有其他源类型一样简单（[https://developers.google.com/web-toolkit/doc/latest/DevGuideClientBundle#I18N](https://developers.google.com/web-toolkit/doc/latest/DevGuideClientBundle#I18N)）。简而言之，如果您将这样的内容用于文本标签：

*   消息属性
*   Messages_fr.properties
*   Messages_de.properties

，然后对图像尝试相同的技术：

*   标志.jpg
*   logo_fr.jpg
*   logo_de.jpg

应该根据当前的语言环境选择正确的文件。

因此，考虑来自[https://developers.google.com/web-toolkit/doc/latest/DevGuideUiBinder#Using_an_external_resource](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiBinder#Using_an_external_resource)的示例 ：

```
<g:Image resource='{res.logo}'/> 
```

然后上课

```
/**
  * Resources used by the entire application.
*/
public interface Resources extends ClientBundle {

  @Source("Logo.jpg")
  ImageResource logo();
... 
```

# browser - 为什么浏览器使用前缀？

> ID：10884898
> 
> 赞同：0
> 
> 时间：2012-06-04T16:43:43.460
> 
> 标签：browser, css, webkit, prefix

> **可能重复：**
> [为什么浏览器会为 CSS 属性创建供应商前缀？](https://stackoverflow.com/questions/8131846/why-do-browsers-create-vendor-prefixes-for-css-properties)

浏览器使用前缀来实现某些技术有什么好处？

例如，Google Chrome 需要 -webkit- 前缀来呈现一些 css3 标记，例如动画（它需要“-webkit-animation:”才能工作）。

与直接在 chrome 中实施该技术相比有什么优势？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T16:46:13.537

浏览器使用前缀，以便它们可以在标准化之前实现新功能。

# android - 如何在 Android 上实现滑动、叠加视图？

> ID：10884899
> 
> 赞同：1
> 
> 时间：2012-06-04T16:43:44.550
> 
> 标签：android, android-view, android-sliding

我正在开发一个 pdf 阅读器应用程序。当用户触摸屏幕时，两个工具栏将滑入视图，覆盖在 pdf 的顶部。屏幕顶部有一个工具栏，底部有一个工具栏，触摸时会从屏幕外滑入。执行此操作的最佳方法是什么？我一直无法找到任何类似的代码示例。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T16:50:04.200

将您的 PDF 查看器放在 layout_width 和 layout_height 的 RelativeLayout 设置 match_parent 中。然后将您的工具栏添加到该 RelativeLayout 将工具栏设置为 layout_alignParentTop="true" 将确保工具栏位于容器的顶部。然后，您可以使用 -1.0 和 0.0 之间的 TranslateAnimation 将工具栏滑入和滑出视图，用于向下滑动，0.0 到 -1.0 用于滑出。当动画完成滑出视图时，您可能必须将可见性设置为 GONE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T16:59:40.193

前段时间写了一篇关于如何实现这种带顶和底栏的全屏的帖子。也许它对你有用：

[http://miguelrodelas.com/web/2011/12/17/full-screen-in-android/](http://miguelrodelas.com/web/2011/12/17/full-screen-in-android/)

# silverlight - 查询“登录”的加载操作失败。Base 64 字符串错误

> ID：10884901
> 
> 赞同：0
> 
> 时间：2012-06-04T16:43:45.717
> 
> 标签：silverlight, asp.net-membership

查询“登录”时出现错误加载操作失败。与 Base 64 字符串错误相关的详细信息。它在一个新的数据库上，只有一个用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T16:43:46.013

如果您在 WebContext.Current.Authentication.Login(...) 上遇到此类错误，请检查出现错误的用户的 aspnet_Membership 行是否具有正确的值。在我的情况下，问题是从 MSSQL NEWID() 生成的 PasswordSalt - 它不是正确的 PasswordSalt 值。

希望它可以帮助某人:)

# c++ - C++ Microsoft Native Wifi 在 XML 文件中读取和存储数据

> ID：10884911
> 
> 赞同：1
> 
> 时间：2012-06-04T16:44:34.940
> 
> 标签：c++, xml, wifi

使用 C++ 中的 MS 本机 wifi，任何人都知道如何在 XML 文件中读取和存储收集的无线数据？

# iphone - 在没有调试器的情况下，Stdout 重定向在 iOS 中不起作用

> ID：10884913
> 
> 赞同：1
> 
> 时间：2012-06-04T16:44:40.253
> 
> 标签：iphone, ios, stdout, io-redirection

我正在尝试重定向输出，以便可以通过网络发送它。出于某种原因，如果您在附加调试器的情况下运行代码，它会完美运行。一旦您以正常方式启动应用程序，代码就会冻结在读取功能上并且永远不会返回。如果有人有任何指示，我将不胜感激。

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_LOW, 0), ^(void) {
            static int pipePair[2];
            if ( pipe(pipePair) != 0) {
                return;
            }
            dup2(pipePair[1],STDOUT_FILENO);
            while (true) {
                char * buffer = calloc(sizeof(char), 1024);
                ssize_t readCount = read(pipePair[0],buffer,1023);
                if (readCount > 0) {
                    buffer[readCount] = 0;
                    NSString * log = [NSString stringWithCString:buffer encoding:NSUTF8StringEncoding];
                    //sent it over network
                }

                if (readCount == -1) {
                    return;
                }
            }
        }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T00:49:39.977

显然在 iOS 5.1 中写入标准输出是不允许的。[http://spuliot.wordpress.com/2012/03/13/ios-5-1-vs-stdout/](http://spouliot.wordpress.com/2012/03/13/ios-5-1-vs-stdout/)

# javascript - 有回调的东西

> ID：10884922
> 
> 赞同：-2
> 
> 时间：2012-06-04T16:45:14.350
> 
> 标签：javascript, jquery

已经15分钟我无法理解

```
if(send == true){
$.getScript('index.php?get_names_from_ajax=true', function(data){
$('#firstnames').remove();
$('#lastnames').remove();
$('#content').prepand('<div class="block" id="firstnames">'+firstnames+'</div>');
$('#firstnames').after('<div class="block" id="lastnames">'+lastnames+'</div>');
send = false;
});
alert(send);
} 
```

getScript 工作正常，但回调没有结果。

**编辑**

正如我所说，所有回调都关闭了，没有任何删除或添加，只是没有移动，就像没有回调一样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T16:57:09.533

方法 .prepand() 似乎是一个错字。我想你正在尝试使用 .prepend()

在这里查看参考：[http ://api.jquery.com/prepend/](http://api.jquery.com/prepend/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T16:49:20.207

我认为`firstnames`and`lastnames`应该是`data.firstnames`and `data.lastnames`，如果它们之前没有在脚本中定义。

```
$.getScript('index.php?get_names_from_ajax=true', function(data){
  $('#firstnames, #lastnames').remove();
  $('#content').prepand('<div class="block" id="firstnames">'+data.firstnames+'</div>');
  $('#firstnames').after('<div class="block" id="lastnames">'+data.lastnames+'</div>');
   send = false;
}); 
```

# c# - C# XML 属性创建不正确

> ID：10884924
> 
> 赞同：0
> 
> 时间：2012-06-04T16:45:26.887
> 
> 标签：c#, xml

我正在以编程方式创建一个节点，但是其中一个属性的出现与我在代码中指定的不同：

```
 XmlNode xResource = docXMLFile.CreateNode(XmlNodeType.Element, "resource", docXMLFile.DocumentElement.NamespaceURI);
                XmlAttribute xRefIdentifier = docXMLFile.CreateAttribute("identifier");
                XmlAttribute xRefADLCP = docXMLFile.CreateAttribute("adlcp:scormtype");
                XmlAttribute xRefHREF = docXMLFile.CreateAttribute("href");
                XmlAttribute xRefType = docXMLFile.CreateAttribute("type");
                xRefIdentifier.Value = "RES-" + strRes;
                xRefADLCP.Value = "sco";
                xRefHREF.Value = dataRow["launch_url"].ToString().ToLower();
                xRefType.Value = "webcontent";

                xResource.Attributes.Append(xRefIdentifier);
                xResource.Attributes.Append(xRefADLCP);
                xResource.Attributes.Append(xRefHREF);
                xResource.Attributes.Append(xRefType); 
```

这最终创建了一条如下所示的行。请注意，“adlcp:scormtype”已演变为“scormtype”，这不是我指定的。任何想法如何让它显示我在 CreateAttribute 中放入的内容？

```
 <resource identifier="RES-CDA68F64B849460B93BF2840A9487358" scormtype="sco" href="start.html" type="webcontent" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T16:50:59.940

您可以直接为属性设置[前缀](http://msdn.microsoft.com/en-us/library/system.xml.xmlattribute.prefix)，而不是尝试创建与前缀内联的属性。

```
XmlAttribute xRefADLCP = docXMLFile.CreateAttribute("scormtype");
// ...
xRefADLCP.Prefix = "adlcp";
xRefADLCP.Value = "sco"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T16:57:22.270

这可能是此覆盖[CreateAttribute](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.createattribute.aspx)与保存文档相结合的预期行为：

> NamespaceURI 保持为空，除非前缀是可识别的内置前缀，例如 xmlns。在这种情况下， NamespaceURI 的值为[http://www.w3.org/2000/xmlns/](http://www.w3.org/2000/xmlns/)。

使用另一个覆盖[XmlDocument.CreateAttribute](http://msdn.microsoft.com/en-us/library/zs2zzesf.aspx)来指定命名空间和前缀：

```
XmlAttribute xRefADLCP = docXMLFile.CreateAttribute(
     "adlcp","scormtype", "correct-namespace-here"); 
```

# php - 退出函数的标准

> ID：10884925
> 
> 赞同：4
> 
> 时间：2012-06-04T16:45:32.913
> 
> 标签：php, standards

> **可能重复：**
> [为什么一个函数应该只有一个出口点？](https://stackoverflow.com/questions/4838828/why-should-a-function-have-only-one-exit-point)

作为一名计算机科学专业的学生，​​我一直认为函数中应该只有一个出口点，最后。

例如。这：

```
function foo()
{

    //do stuff here

    if($bar)
    {
         $out = FALSE;
    }
    else
    {
         $out = TRUE;
    }
    return $out;
} 
```

不是：

```
function foo()
{

    //do stuff here

    if($bar)
    {
         return FALSE;
    }
    return TRUE;
} 
```

然而，我已经看到第二种退出类型经常在其他人的 php 代码中使用，甚至在某些框架的核心代码中（比如我最近一直在使用的 Kohana）。这种退出函数的方法在 php 标准中被认为可以吗？

编辑：我可以明白为什么有人告诉我不要这样做，因为它可以更容易地跟踪一个退出点的函数中的某些问题，其他时候我可以看到为什么应该允许它，因为其他问题可以更好地解决或跟踪具有多个退出点的函数。

编辑 2：在代码示例中添加了“do stuff here”注释以使人们开心

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T16:49:31.057

我一直使用后一种路线，因为您必须声明`$out`并存在另一个变量。但回想起来，它只是一个布尔值——它没有造成任何伤害。第一条路线可能看起来更干净，具体取决于代码的上下文。

这一切都归结为**一致性**。只要您有一个系统，确定何时使用路线 1 或路线 2，您就做得很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T16:50:56.540

它是六个之一，或六个另一个 - 幸福在于一致性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-04T16:52:46.430

我已经看到（好的）代码返回值两种方式。如果您使用的框架/代码库始终使用一种方式，我会遵循这一点。否则，请使用您喜欢的东西。:D

# facebook-opengraph - 测试链接是否对 Opengraph 友好

> ID：10884928
> 
> 赞同：0
> 
> 时间：2012-06-04T16:45:43.087
> 
> 标签：facebook-opengraph

我有一个网站，基本上从数据库中的链接中提取 opengraph 元数据。现在我必须创建一个验证代码来检查用户通过提交框发送到我的网站数据库的链接是否对 opengraph 友好。我需要在链接中做一个测试，看看它的源代码上是否至少有 meta property="og:image"，然后避免提交无法正常工作的链接。我也在使用 recaptcha 来避免垃圾邮件发送者，我在想我可以使用 recaptcha 的相同验证代码来进行这个 opengraph 测试。任何人都知道我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T16:52:20.953

> 我需要在链接中做一个测试，看看它的源代码是否至少有 meta property="og:image"

嗯，应该很明显，这意味着实际阅读该页面的源代码，并寻找元元素。

您是否只想读取资源的前 x 个字节（这就是 FB 所做的 AFAIK），然后执行字符串/正则表达式搜索，或者如果您想在其上使用 HTML 解析器并在 DOM 中查找它，那就是你做出的决定……第一个可能更容易出错，而第二个意味着更复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T16:49:56.393

好吧，几个月前我解决了这个问题，如果有人最终来到这里，我就是这样做的：

我没有尝试搜索元数据，而是将其`$array`再次与所有 opengraph 元素一起使用，并检查我是否真的在那里得到了一些东西

```
require_once('OpenGraph.php');
$v = $_POST["submitted_by_user"];    
$graph = OpenGraph::fetch($v);

if ($graph === false) {

die ('NO OPENGRAPH')

}

else {

// submit to database

} 
```

亲切的问候

# command-line - 使用命令行 (os x) 将 dxf 转换为 svg

> ID：10884930
> 
> 赞同：2
> 
> 时间：2012-06-04T16:46:15.417
> 
> 标签：command-line, svg, vector-graphics, file-conversion, dxf

人们通常希望以相反的方式执行此操作，但我想使用脚本等将 dxf 图像转换为 svg。

如何？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T01:27:22.307

从 0.47 版开始的 Inkscape 能够导入 dxf，但可能需要一些手动清理。导入似乎会展平所有层，包括隐藏层。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-28T17:48:32.083

Vector Express 是一个用于转换矢量文件的免费 API，您可以使用 CURL 使用它。

[https://github.com/smidyo/vectorexpress-api](https://github.com/smidyo/vectorexpress-api)

1.  `path`为您的输入格式和所需的输出格式获取兼容的转换。

`curl https://vector.express/api/v2/public/convert/dxf/auto/svg/`

2.  POST 到第一个路径，以您的文件为主体

`curl --data @myvector.dxf https://vector.express/api/v2/public/convert/dxf/cadlib/svg/`

3.  从`resultUrl`

`curl https://vector.express/api/v2/public/files/[id].svg --output converted.svg`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-06T21:39:03.810

对于正在寻找将有问题的 dxf 文件导入 Inkscape 的方法的任何人，我支持使用[Vector Express](https://github.com/smidyo/vectorexpress-api)的建议。您可以要求它进行 dxf -> dxf 转换：

```
curl https://vector.express/api/v2/public/convert/dxf/auto/dxf/ 
```

这使我可以将“Slicer for Fusion 360”生成的 dxf 文件放入 Inkscape。将事物保留为 dxf 而不是转换为 svg 的优点是保留了图层信息。

* * *

## 回答 #4

> 赞同：-6
> 
> 时间：2012-06-27T15:40:23.563

ImageMagick 可用于[在各种格式之间转换图像](http://www.imagemagick.org/script/convert.php)以及调整图像大小、模糊、裁剪、抖动、绘制、翻转、连接、重新采样等等。不过，我不知道它是否支持 dxf 和 svg。

# extjs - 代理 JsonP 和 callbackkey

> ID：10884933
> 
> 赞同：0
> 
> 时间：2012-06-04T16:46:25.080
> 
> 标签：extjs, sencha-touch-2

我即将完成我的应用程序，当尝试放入在线服务器时，我发现了一些问题......

我的代理不适用于 ajax 问题，我需要放置 jsonp 并配置我的 drupal 以使用 JsonP。

前：

```
 proxy: {
        type: 'ajax',
        url: 'http://mydomain/json-art',

        reader: {
            type: 'json',
            rootProperty: 'nodes'
        },
    } 
```

后：

```
 proxy: {
        type: 'jsonp',
        url: 'http://mydomain/json-art',
        callbackKey: 'callback',

        reader: {
            type: 'json',
            rootProperty: 'nodes'
        },
    } 
```

然后在 Drupal 7 中放... JsonP 前缀：Ext.data.JsonP.callback1

而且..一切正常。

但是..我的应用程序中有 4 个商店，并尝试在我的其他商店中回复此配置。并且只适用于第一个。我尝试将 callback1 更改为 callback2、callback3 等。但总是有相同的错误：

> 对象 [对象对象] 没有方法 'callback4'

我不知道在我的应用程序中使用 callbackKey 的正确方法是什么，请帮助我！！！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T22:57:12.153

无需在代理中指定回调（如果可能，则不确定）。只需摆脱“callbackKey”参数，它应该可以工作。Sencha 在使用 jsonp 时会自动放置一个回调参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T11:22:46.370

我从“[互联网](http://drupal.org/node/606332)”中得出的结论是，drupal JSONP 前缀要么是要使用的设置字符串，要么是要检查的 url 变量的名称。如果将 JSON 前缀设置为“回调”，它应该可以正常工作。这是因为 Sencha JsonP 调用会自动附加一个名为“callback”的 url 参数，其中包含要调用的函数的名称（通常是 Ext.data.JsonP.callback#number#.

请注意，您的解决方案甚至不适用于一个数据存储。不完全确定为什么你会得到你得到的行为，但每个 JsonP 调用应该有一个不同的回调函数名。

# linker - 如何防止 ld 组合可写和可执行部分？

> ID：10884936
> 
> 赞同：1
> 
> 时间：2012-06-04T16:46:32.273
> 
> 标签：linker, arm, elf

当我将目标文件链接在一起时，生成的 ELF 可执行文件（仅）具有以下 LOAD 段：

> ```
> LOAD off    0x00000000 vaddr 0x00008000 paddr 0x00008000 align 2**15
>      filesz 0x000010f0 memsz 0x000010f0 flags rwx 
> ```

链接器`ld`将所有部分组合成一个`rwx`段，而不是将可写部分和可执行部分分开。我想防止这种情况。可重定位对象的部分适当地标记为可写或可执行，因此此问题出现在链接时。

那么，是什么决定了如何`ld`将权限分配给细分市场？链接描述文件似乎没有与此相关的任何内容。它是在构建工具链时指定的吗？

我的目标是 ARM，工具链是`arm-linux-gnueabi`2.22`binutils`版。

**编辑：**链接器脚本在[这里](http://www.pastie.org/4042907)。其他链接器选项是`-Bdynamic`、`--gc-sections`和。`-z nocopyreloc``--no-undefined`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T16:50:05.627

通常链接器脚本用于定义节、它们的顺序、是保留它们还是将它们从二进制文件中丢弃（发布构建链接器脚本可能选择删除调试信息）。

以下是链接描述文件的示例： [system-onesegment.ld](https://raw.github.com/zeusk/lk/master/arch/arm/system-onesegment.ld)

**编辑**：要修改部分权限，请将其放在要更改 .section .section_name，“权限”的权限的任何部分之前。

例子：

```
.text
mov r0, r0
b main
.section .rodata, "ro"
.word 0x00000001
.previous
main: mov r0, r0 
```

# objective-c - 架构 86_64 错误

> ID：10884938
> 
> 赞同：0
> 
> 时间：2012-06-04T16:46:39.917
> 
> 标签：objective-c, xcode

收到此错误：

![在此处输入图像描述](../Images/30bd5e890969dc8a54961c5d41d58cf3.png)

这似乎与此有关，但不知道为什么：

```
// Inline
inline float onsetsds_phase_rewrap(float phase);
inline float onsetsds_phase_rewrap(float phase){
    return (phase>MINUSPI && phase<PI) ? phase : phase + TWOPI * (1.f + floorf((MINUSPI - phase) * INV_TWOPI));
} 
```

有任何想法吗？

# asp.net-mvc-3 - 设置表级别 WillCascadeOnDelete 不可用

> ID：10884940
> 
> 赞同：4
> 
> 时间：2012-06-04T16:46:52.000
> 
> 标签：asp.net-mvc-3, entity-framework-4

我在这里拔头发。我在这里看到了在删除时关闭级联的解决方案，但我无法实现。我不知道我在这里做错了什么，但我不断收到以下错误：

“System.Data.Entity.ModelConfiguration.EntityTypeConfiguration”不包含“WillCascadeOnDelete”的定义，并且没有扩展方法“WillCascadeOnDelete”接受“System.Data.Entity.ModelConfiguration.EntityTypeConfiguration”类型的第一个参数（你是缺少 using 指令或程序集引用？）

我已经添加了必要的命名空间，但我不认为它是智能感知中的任何地方的一个选项，而且我没有在任何地方搜索。我在 VS 2010 MVC 3

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using vf2.Models;
using vf2.Models.LinkTables;
using vf2.Models.Requests;
using System.Data.Entity;
using System.Data.Entity.ModelConfiguration.Conventions;
using System.Data.Entity.ModelConfiguration.Configuration;
using System.Data.Entity.ModelConfiguration;
using vf2.Models.Reporting;
using vf2.Models.POSObj;

namespace vf2.Models
{
    public class vfContext : DbContext
    {
        public DbSet<App> Apps { get; set; }
        public DbSet<Origin> Origins { get; set; }
        public DbSet<WineType> WineTypes { get; set; }
        public DbSet<VarType> VarTypes { get; set; }
        public DbSet<Wine> Wines { get; set; }
        public DbSet<Vintage> Vintages { get; set; }

        public DbSet<Distributor> Distributors { get; set; }
        public DbSet<Importer> Importers { get; set; }
        public DbSet<Producer> Producers { get; set; }
        public DbSet<Publication> Publications { get; set; }
        public DbSet<Review> Reviews { get; set; }
        public DbSet<UserType> UserTypes { get; set; }
        public DbSet<Restaurant> Restaurants { get; set; }

        public DbSet<WineListChangeRate> WineListChangeRates { get; set; }
        public DbSet<MenuChangeRate> MenuChangeRates { get; set; }
        public DbSet<WineListCount> WineListCounts { get; set; }

        public DbSet<UserObj> UserObjs { get; set; }
        public DbSet<ProducerUser> ProducerUsers { get; set; }
        public DbSet<DistributorUser> DistributorUsers { get; set; }
        public DbSet<RestaurantUser> RestaurantUsers { get; set; }

        public DbSet<ProducerEditRequest> ProducerEditRequests { get; set; }
        public DbSet<RequestStatus> RequestStatuses { get; set; }
        public DbSet<VOAVIRequest> VOAVIRequests { get; set; }

        public DbSet<POS> POSs { get; set; }
        public DbSet<Cart> Carts { get; set; }
        public DbSet<FutureUser> FutureUsers { get; set; }
        public DbSet<Doc> Docs { get; set; }
        public DbSet<DocType> DocTypes { get; set; }

        public DbSet<WineVisit> WineVisits { get; set; }

        protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {

            modelBuilder.Entity<Review>().WillCascadeOnDelete(false);
//error here!

            base.OnModelCreating(modelBuilder);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-04T17:01:59.497

“级联删除”是关系的配置，而不是实体/表的配置。因此`WillCascadeOnDelete`是一种方法`CascadableNavigationPropertyConfiguration`。用例示例：

```
modelBuilder.Entity<Review>()
    .HasRequired(r => r.Wine)
    .WithMany()
    .WillCascadeOnDelete(false); 
```

这意味着如果从数据库中的目录中删除葡萄酒，它的评论不应该与葡萄酒一起删除。这是这种特定关系的属性，而不是`Reviews`表的属性。

在这种情况下，尝试删除具有评论的葡萄酒当然会导致外键约束违反和异常，但这是您在所需关系上禁用级联删除时通常想要的（“不允许删除葡萄酒有评论，只允许它用于没有任何评论的葡萄酒......”）。

# algorithm - 如何比较两个轮廓？（字体对比）

> ID：10884943
> 
> 赞同：4
> 
> 时间：2012-06-04T16:47:03.350
> 
> 标签：algorithm, image-processing

我正在尝试分析两个轮廓并给出与它们的相似性相对应的百分比。假设我拥有描述这些轮廓的所有点坐标（就像 SVG 路径），我应该根据哪个因素告诉它们几乎相同？

经过一些谷歌搜索，我发现了一些与傅立叶描述符相关的东西，它们与我的案例相关吗？

* * *

## 编辑

我想做的是将几种字体与另一种字体进行比较。就像会做[什么字体](http://www.myfonts.com/WhatTheFont/)，但不是图像。由于产生的算法，可以根据相似度百分比找到等效的字体。

有些脚本只是比较每个字母的边界框，但这还不够。我需要一种方法来告诉 Arial 最接近 Verdana 而不是 Webdings。所以假设我可以从字体中提取轮廓，我需要一种方法来比较两个轮廓。

例如（使用“逻辑”百分比值）：

![字体对比，粗体 G 最接近](../Images/11d407a06b075754c560ca577e27f118.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T23:36:44.427

解决一般问题（字体匹配）有两种基本方法：符号和统计。一个好的解决方案可能会以某种方式将两者结合起来。

符号方法以直接的方式使用您对问题的了解。例如，您可以列出您（作为一个聪明的人）将用来表征字体的事物。[identifont](http://www.identifont.com/identify.html)使用的问题类型。这种方法意味着编写足够智能的例程来检测各种属性（例如笔划宽度、某些循环是否闭合、衬线的存在等），以及一个决策树（或“规则引擎”），用于放置是/否/不确定一起回答并得出一个答案。

统计方法听起来更像您的想法，并且可能是字体的工作原理。这里的想法是找到一些一般属性并将它们用作权重来找到“最佳”选择。例如，如果你有很多字体，那么你可以训练一个神经网络（输入是某个样本分辨率的像素）。在那里你不需要知道网络“如何”决定——只要有足够的训练数据，它就会找到这样做的方法。或者您可以只查看所有暗像素的总和 - 这可能会为您提供类似于上述百分比的结果。

这听起来很简单，但通常很难找到以您想要的所有方式很好地显示差异的简单统计测量。

所以两者之间有一个很大的中间地带。这个想法是，如果你能从第一组中汲取一些想法，那么你可以使第二组的方法更有效率。虽然最简单的神经网络方法是“一体式”（它包括计算和决策），但您可以将它们分开。因此，除了给网络提供一堆像素之外，您还可以给它更多“有意义”的输入——您知道的东西有助于在不同字体之间进行检测。诸如笔画宽度或字符中“孔”的数量之类的东西。您还可以添加一些智能来删除可能会混淆结果的内容 - 例如，预缩放到相同的高度（如果您有完整的字体集，那么您可以缩放所有内容，以便小写“m”的高度，比如说, 是常数）。

傅立叶描述符是表征事物“外部形状”的一种方式，因此可以用作我上面描述的统计方法的输入。在示例中，您给出的傅立叶描述符将拾取下部 G 中衬线的“尖峰”，因此表明它与左侧的 G 非常不同。但他们不太关心笔画宽度，根本不关心比例（放大/缩放）（这可能是好事也可能是坏事——如果你得到不同大小的随机字母，你不想对大小，但是如果您已经将整个字母表标准化为标准的“m”，那么您当然希望包含它）。

其他想法是二维互相关（归一化相关的最大值让您了解两个事物的相似程度）或简单地查看两个字母中共有的像素分数。

正如评论所说，这是一个巨大的问题（我不是专家 - 以上只是作为感兴趣的旁观者的随机废话）。

但是，要最终回答您的问题，如果您拥有的是大纲，那么傅立叶描述符将是一个不错的起点。因为这侧重于形状而不是“重量”，所以我会将其与轮廓包围的总面积相结合。然后编写一些代码来计算这些，看看你得到的一些示例字母的数字。如果它似乎可以区分某些字母，但不能区分其他字母，那么请寻找其他一些在这些情况下会有所帮助的测量值。你最终可能会结合相当多的方法来获得既快速又可靠的东西。

或者，如果您只是想要一些简单的东西，请尝试使用一些易于测量的值，例如高度、宽度、轮廓“内部”的像素总数、沿垂直或水平线交叉的笔划数等。结合一堆如果您对傅立叶变换等所涉及的数学不满意，那么这些可能会为您提供某些“足够好”的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T14:33:45.137

您是否考虑过使用基于神经网络的方法？[本文](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&ved=0CFsQFjAB&url=http://www.ecpe.nu.ac.th/paisarn/Puplications/MMSP01.pdf&ei=_xfOT5jtDsnbtAbKwvDUCg&usg=AFQjCNHWz5iBAOtzjR87IwZ7l8TfvUxi8Q)使用自组织树图来执行基于内容的图像检索。通过良好的训练集，应该可以创建一个多层网络（或[SOM](http://en.wikipedia.org/wiki/Self-organizing_map)），它可以为您提供准确的相似性度量。

# javascript - map.setcenter & map.setzoom 无法正常工作

> ID：10884944
> 
> 赞同：2
> 
> 时间：2012-06-04T16:47:09.037
> 
> 标签：javascript, google-maps-api-3

我有一个左侧菜单栏，当有人点击链接时，它会跳转到地图上的标记位置。这工作正常。

但是，我想更新它，以便当他们单击左侧栏中的链接时，地图以标记为中心并缩放到一定水平。但这不能正常工作。

我在 Firebug 中收到的错误是：

```
missing ) after argument list
map.setCenter(latlng:latLng); 
```

代码：

```
<div id="LeftArea" style="width: 220px; float: left; border-bottom: 1px solid #dedede; padding: 5px 0 5px 0;">
    <div style="color: #a41d21;font-size: 13px; font-weight: bold;">
        <script language="javascript" type="text/javascript">
            document.write('<a href="javascript:myclick(' + (i) + ')">' + '[[Title]]' + '<\/a><br>');
        </script>
    </div>
    <div>
        [[Address]]<br />
        [[City]], [[State]] [[Zip]]
    </div>
</div>

myclick = function(i) {
  google.maps.event.trigger(gmarkers[i], "click");
}

// Associate the markers with the links in the side bar.
  gmarkers[i] = marker;

// Display the info window when someone clicks on a marker or it's associated side bar link.
  google.maps.event.addListener(marker, 'click', function () {
    map.setCenter(latlng:latLng);
    map.setzoom(zoom: 16);
    InfoWindow.setContent(this.html);
    InfoWindow.open(map, this);
  }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T17:30:09.947

`map.setCenter()`并且`map.setZoom()`需要特定的参数，并且文档对其语法并没有真正的帮助。

`map.setCenter()`需要一个`LatLng`对象：

```
myLatLng=  new google.maps.LatLng(0,0);
map.setCenter(myLatLng); 
```

`map.setZoom()`取一个简单的整数：例如`map.setZoom(16);`

冒号在对象定义中有特殊用途，但在这里没有位置。这就是导致您的错误消息的原因。

附加问题：这里的 latLng 是什么...？
`map.setCenter(latlng:latLng);`

这需要在某个地方定义。也许您希望地图以标记为中心？

`map.setCenter(this.getPosition());`

# python - MS时间戳解析Python

> ID：10884946
> 
> 赞同：0
> 
> 时间：2012-06-04T16:47:20.570
> 
> 标签：python, datetime, timestamp

python中是否有一个内置函数可以用来解析MS时间戳？例如，这个“\x3a\xcf\x84\x72\x66\x42\xcd\x01”对应于这个日期和时间：06/04/2012, 15:26:43.901625

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-04T05:33:46.063

时间戳（正如[@mandel 提到](https://stackoverflow.com/questions/10884946/ms-timestamp-parsing-python#comment14186989_10884946)的）看起来像[`FILETIME`- 一个 64 位值，表示自 1601 年 1 月 1 日（UTC）以来 100 纳秒间隔的数量](https://support.microsoft.com/en-us/kb/188768)：

```
import struct
from datetime import datetime, timedelta

def FILETIME_bytes_to_datetime(timestamp_bytes):
    quadword, = struct.unpack('<Q', timestamp_bytes)
    us = quadword // 10 - 11644473600000000
    return datetime(1970, 1, 1) + timedelta(microseconds=us) 
```

例子：

```
>>> FILETIME_bytes_to_datetime(b"\x3a\xcf\x84\x72\x66\x42\xcd\x01")
datetime.datetime(2012, 6, 4, 15, 26, 43, 901625) 
```

`'<Q'`（小端无符号 64 位整数）可能不适用于所有平台（由于 FILETIME 结构字段的对齐，字节序）。

要在 Windows 上解析值，您可以使用`ctypes.wintypes.FILETIME`结构：

```
import ctypes
import os
from datetime import datetime, timedelta

if os.name == 'nt':
    import ctypes.wintypes

    FILETIME = ctypes.wintypes.FILETIME
else: # fallback
    DWORD = ctypes.c_uint32

    class FILETIME(ctypes.Structure):
        _fields_ = [('dwLowDateTime', DWORD),
                    ('dwHighDateTime', DWORD)]

def FILETIME_bytes_to_datetime(timestamp_bytes):
    t = FILETIME.from_buffer_copy(timestamp_bytes)
    quadword = (t.dwHighDateTime << 32) + t.dwLowDateTime
    us = quadword // 10 - 11644473600000000
    return datetime(1970, 1, 1) + timedelta(microseconds=us) 
```

它使用本机字节顺序、对齐方式（如有必要，您可以覆盖它）。

# arrays - 在数组字段中查找匹配项

> ID：10884948
> 
> 赞同：12
> 
> 时间：2012-06-04T16:47:23.603
> 
> 标签：arrays, node.js, mongodb, mongoose

在我的图像共享应用程序中，您可以创建相册并向其中添加图像。当从站点中删除图像时，它也应该从存储对图像的引用（名称，id）的相册中删除。

我需要帮助的是找到哪些相册存储了即将被删除的图像（参考）。

在下面的路线中是我迄今为止尝试过的，但我在查询中遇到错误。我检查了 Mongodb 文档，语法如下所示：

```
db.collection.find( { field : { $in : array } } ); 
```

在我的路线中，字段和数组已经交换了位置，这似乎不起作用。

我真的很感激一些帮助。提前致谢！

**我的模型如下所示：**

```
var AlbumSchema = new Schema({
      title             : String,
      imageName         : [String], <-- array the contains of images names
      imageId           : [String] <-- array the contains of images id's
});

modelObject.AlbumSchema = AlbumSchema;
modelObject.Album = mongoose.model('Album', AlbumSchema);

var ImageSchema = new Schema({
    name : String,
    size : Number,
    type : String
});

modelObject.ImgSchema = ImgSchema;
modelObject.Image = mongoose.model('Image', ImgSchema); 
```

**删除图片的路径：**

```
app.get('/blog/delete/:id', function(req, res){

    model.ImagePost.findById(req.params.id, function (err, blog){

        var theImage = blog.name;

        if (err) {
            console.log(err);
            // do something
        }

        var query = albumModel.Album.find( { imageName: { $in : theImage } } );

        query.exec(function (err, albums) {

            if (!albums) {
                console.log(err);
                // do something

                blog.remove(function(err) {
                    console.log(err);
                    // do something
                });

                res.redirect('/blogs');
            }

            else {
                // code for removing the image(s) in the albums

                res.redirect('/blogs');
            }
        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-06-05T04:25:14.883

`db.collection.find( { field : { $in : array } } );`不是您想要的语法。上面写着“找到我要在数组中提供给你的列表值之一的文档。”

您想在[进入数组](https://www.mongodb.com/blog/post/reaching-into-objects)时使用相等性。

`db.collection.find( { imageName:theImage } )`

这表示找到 imageName 为 theImage 的文档，因此这将返回在其 imageName 数组中包含此图像的相册（或相册，如果图片可以在多个相册中）。

# php - 无法从第二个动态相关下拉框中获取值

> ID：10884954
> 
> 赞同：0
> 
> 时间：2012-06-04T16:47:57.633
> 
> 标签：php, javascript, jquery, html, ajax

我希望我一整天的麻烦至少现在已经结束了。我有 2 个下拉框。**提交后，我在操作**页面中只有第一个下拉框值。我的第二个下拉框取决于在第一个下拉框中选择的值。

这是head部分的ajax代码

```
 <script>
    function getXMLHTTP() { //function to return the xml http object
            var xmlhttp=false;  
            try{
                xmlhttp=new XMLHttpRequest();
            }
            catch(e)    {       
                try{            
                    xmlhttp= new ActiveXObject("Microsoft.XMLHTTP");
                }
                catch(e){
                    try{
                    xmlhttp = new ActiveXObject("Msxml2.XMLHTTP");
                    }
                    catch(e1){
                        xmlhttp=false;
                    }
                }
            }

            return xmlhttp;
        }

        function getScreen(strURL) {        

            var req = getXMLHTTP();

            if (req) {

                req.onreadystatechange = function() {
                    if (req.readyState == 4) {
                        // only if "OK"
                        if (req.status == 200) {                        
                            document.getElementById('screendiv').innerHTML=req.responseText;                        
                        } else {
                            alert("There was a problem while using XMLHTTP:\n" + req.statusText);
                        }
                    }               
                }           
                req.open("GET", strURL, true);
                req.send(null);
            }

        }
    </script> 
```

这是页面的主体

```
 <form method="post" action="a.php" name="form1">
    <table width="60%" border="0" cellspacing="0" cellpadding="0">
      <tr>
        <td width="150">Device Name</td>
        <td  width="150"><select name="device" onChange="getScreen('finddevice.php?device='+this.value)">
        <option value="">Select device</option>
        <option value="1">Iphone 3</option>
        <option value="2">Iphone 4</option>
        <option value="3">Ipad </option>
        <option value="4">android </option>
            </select></td>
      </tr>
      <tr style="">
        <td>Screen</td>
        <td ><div id="screendiv"><select name="screen">
        <option>Select Screen</option>
            </select></div></td>
      </tr>
      </table>
      <input type="submit" value="submit" />
    </form> 
```

它调用具有以下代码的 finddevice.php 页面

```
 <? $device=$_REQUEST['device'];
    $link = mysql_connect('localhost', 'root', ''); //changet the configuration in required
    if (!$link) {
        die('Could not connect: ' . mysql_error());
    }
    mysql_select_db('future');
    $query="select screen from screen where device_id=$device";
    $result=mysql_query($query);

    ?>
    <select name="screen">
    <option>Select Screen</option>
    <? while($row=mysql_fetch_array($result)) { ?>
    <option value><?=$row['screen']?></option>
    <?php $row['device_id'] ?> 
    <? } ?>
    </select> 
```

它工作完美，并在从第一个下拉框中选择值后将表中的值带入第二个下拉框中。但是当我提交数据时，我只能使用 $_POST 方法访问**a.php文件中的第一个下拉框值。**这意味着我只能得到 的值，`$_POST['device']`但没有 的值`$_POST['screen']`。请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T20:25:06.007

在 finddevice.php 的第 14 行（如上）中，您似乎错过了第二个下拉菜单中的选项值
我的意思是**<option value>**应该类似于**<option value="1">**
尝试填写 id 或独特的值作为值对于第二个下拉列表
中的选项除非您填写选项的值，否则第二个下拉列表将向 a.php 提交空白值

查找设备.php：

```
<?php 
    $device=$_REQUEST['device'];
    $link = mysql_connect('localhost', 'root', ''); //changet the configuration in required

    if (!$link) {
        die('Could not connect: ' . mysql_error());
    }

    mysql_select_db('future');
    $query="select id, screen from screen where device_id=$device"; 
        //if screen table contains id field ... 
        //replace id with primary key or any unique identifier for screen table 
        //if there aint any primary key in "screen" table, use a field that is unique 
        //or create a primary key
    $result=mysql_query($query);
?>
<select name="screen">
    <option>Select Screen</option>
    <?php while($row=mysql_fetch_array($result)) { ?>
    <!-- <option value><?=$row['screen']?></option> -->
    <option value="<?php echo $row['id']; ?>"><?php echo $row['screen']; ?></option>
    <?php } ?>
</select> 
```

# javascript - JavaScript 在 DIV 中动态加载脚本

> ID：10884955
> 
> 赞同：0
> 
> 时间：2012-06-04T16:48:02.387
> 
> 标签：javascript, dynamic, include

我已经动态创建了一个 DIV，我希望它包含一个 JavaScript 链接，它会在上面输出一些东西。JavaScript 链接源是绝对的。显然，这不起作用：

```
var div = document.createElement('div');
    div.id = 'mydiv';
    div.innerHTML = "<script type='text/javascript' " + 
                    "src='http://mydomain.com/myscript.js'></script>";
    document.body.appendChild(div); 
```

所以我尝试了这个

```
var script = document.createElement('script')
    script.setAttribute('type', 'text/javascript');
    script.setAttribute('src', 'http://mydomain.com/myscript.js');

var div = document.createElement('div');
    div.id = 'mydiv';

    div.appendChild(script);
    document.body.appendChild(div); 
```

在我的脚本文件中，我有一个简单的`alert('Testing...');`代码。问题是它不起作用。脚本包含在 div 中输入（当我在 Chrome 中检查 DIV 时会看到它），但它不起作用。我没有看到*“正在测试...”*消息。我错过了什么或做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T16:51:33.527

我理解它的方式，你的代码不会等到 DOM 准备好。

建议使用 jquery 的[ready](http://jqapi.com/#p=ready)，这将确保传递给它的脚本仅在 DOM 准备好后运行

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T17:06:36.377

```
<html>
<head>  
</head> 
<body>  
<script type='text/javascript'> 
    var script = document.createElement('script')
    script.setAttribute('type', 'text/javascript');
    script.setAttribute('src', 'my.js');

    var div = document.createElement('div');
    div.id = 'mydiv';

    div.appendChild(script);
    document.body.appendChild(div); 
</script> 
</body>
</html> 
```

这段代码对我有用，但是是的，`document.write()`对我不起作用。

# sql-server - 如何使用 vb.net 更新 datagridview

> ID：10884956
> 
> 赞同：1
> 
> 时间：2012-06-04T16:48:03.893
> 
> 标签：sql-server, vb.net, datagridview

我正在使用下面提到的代码来更新和删除 datagridview 中的数据。但我无法解决这个问题。删除工作但不更新。

Public Sub CustomerUpdateBatch(ByVal dt As DataTable)

```
 Dim connection As SqlConnection = New SqlConnection(Invoice.GetConnect())
    connection.Open()
    Try

        Dim command As SqlCommand = New SqlCommand("Update_Customer", connection)
        command.CommandType = CommandType.StoredProcedure
        command.Parameters.Add("@C_ID", SqlDbType.Int, 16, "C_ID")
        command.Parameters.Add("@C_Name", SqlDbType.VarChar, 50, "C_Name")
        command.Parameters.Add("@C_Address", SqlDbType.VarChar, 50, "C_Address")
        command.Parameters.Add("@C_Tel", SqlDbType.VarChar, 50, "C_Tel")
        command.Parameters.Add("@C_Fax", SqlDbType.VarChar, 50, "C_Fax")
        command.Parameters.Add("@C_Mobile", SqlDbType.VarChar, 50, "C_Mobile")
        command.Parameters.Add("@C_Email", SqlDbType.VarChar, 50, "C_Email")
        command.Parameters.Add("@C_Tin", SqlDbType.VarChar, 50, "C_Tin")
        command.Parameters.Add("@C_Remarks", SqlDbType.VarChar, 50, "C_Remarks")
        command.CommandType = CommandType.StoredProcedure

        Dim delcommand As SqlCommand = New SqlCommand("Delete_Customer", connection)
        delcommand.CommandType = CommandType.StoredProcedure
        command.Parameters.Add("@C_ID", SqlDbType.Int, 16, "C_ID")

        Dim adapter As SqlDataAdapter = New SqlDataAdapter()
        adapter.UpdateCommand = command
        adapter.DeleteCommand = delcommand
        adapter.DeleteCommand.UpdatedRowSource = UpdateRowSource.None
        adapter.Update(dt)

    Catch ex As Exception
        Console.WriteLine(ex.Message)
        Throw
    Finally
        connection.Close()
    End Try
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T20:57:47.847

一个可能的问题与使用自动编号索引有关。当您向表中添加新数据时，不会自动生成或从数据库中获取索引。您没有说您拥有什么数据库，但我将向您展示 MySQL 和 MS SQL 的示例。

首先，您需要捕获数据适配器的事件。“Connection”和“Dataadapter”定义需要在你的函数之外：

```
 Dim WITHEVENTS adapter As SqlDataAdapter = New SqlDataAdapter()
```

然后你需要有一个函数来捕获这些事件：

```
Private Sub myAdapter_RowUpdated(ByVal sender As Object, ByVal e As System.Data.OleDb.OleDbRowUpdatedEventArgs) Handles adapter.RowUpdated
    If (e.StatementType = StatementType.Insert And e.Status = UpdateStatus.Continue) Then
        Dim id As ULong = getIdentity()
        If (id > 0) Then
            e.Row(0) = id
        End If
    End If
End Sub 
```

getIdentiy() 函数需要特定于您的 SQL 服务器。这是一个用于 MySQL 的：

```
Public Function getIdentity() As ULong
        Dim newcommand As New MySqlCommand("SELECT LAST_INSERT_ID();", connection)
        Return newcommand.ExecuteScalar()
    End Function 
```

这是一个用于 MS SQL 的：

```
Public Function getIdentity() As ULong
        Dim newcommand As New OleDbCommand("SELECT @@IDENTITY", connection)
        Return newcommand.ExecuteScalar()
 End Function 
```

# osx-snow-leopard - java在同一应用程序的多次运行中缓存文件

> ID：10884959
> 
> 赞同：-2
> 
> 时间：2012-06-04T16:48:13.373
> 
> 标签：osx-snow-leopard

我正在尝试生成一些数据以在报告中使用。问题是我第一次使用数据集运行程序时，处理数据需要更长的时间。然后我用数据集运行程序的其余时间快了大约一半的时间。我的问题是我每次都需要复制第一次运行的结果。因为实际上用户永远不会连续多次加载数据集。所以我的问题是如何让java停止在多次运行中缓存这些文件。或者是我的 Mac 正在为我做这件事。此外，我复制第一次运行结果的唯一另一种方法是重新启动机器，我不想在每次运行测试时都这样做。任何想法都会非常受欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T16:57:05.373

Java不缓存文件，操作系统是。

我假设您正在研究性能（否则您为什么要关心？）。您可以创建多个数据副本并每次加载不同的副本。

# ajax - KnockoutJS/AJAX 更新视图模型

> ID：10884960
> 
> 赞同：0
> 
> 时间：2012-06-04T16:48:15.253
> 
> 标签：ajax, arrays, knockout.js

目前正在玩 KnockoutJS。在此示例中，仅尝试从 ajax/json 提要（使用 twitter）更新可观察数组。

尝试更新我的可观察数组（currentTweets）时，它似乎失去了“this”的范围。我尝试将绑定添加到各个地方，但没有这样的运气。

我得到的错误是：**Uncaught TypeError: Cannot call method 'push' of undefined**

我确定我在做一些愚蠢的事情，它正在行动（没什么可看的！）

[http://jsbin.com/oyuteb](http://jsbin.com/oyuteb)

我已经阅读了很多关于 Knockout 映射的内容，但还没有足够的信心去接受它！

因此，任何帮助或指导都会很棒。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T17:45:44.563

解决此问题的最简单方法是将视图模型的“this”代理到另一个变量中，以便在处理程序中可用。当 jquery ajax 调用成功处理程序时，上下文是不同的，所以 this 指的是别的东西。

所以你会有

```
function twitterViewModel() {
    var self = this;
    this.currentTweets = ko.observableArray([]);
    ...

    this.getTweets = function(){

        $.ajax({
            dataType: 'jsonp',
            url: 'http://search.twitter.com/search.json?callback=?&q=' 
                     + this.searchTerm() + '&rpp=50',
            success: function (data) {
                $.each(data.results, function(i,tweet){
                    self.currentTweets.push({'keywords' : 'bugger'});
                });
            }
        });
    }
} 
```

您可以消除绑定调用并`self`改为使用。

希望这可以帮助。

# silverlight - Silverlight 5中奇怪的内存泄漏

> ID：10884961
> 
> 赞同：1
> 
> 时间：2012-06-04T16:48:17.413
> 
> 标签：silverlight, memory, memory-leaks

我的 silverlight 应用程序遇到了一些问题。

我的应用程序看起来像一个图像管理器。您可以打开一些图像、编辑、查看等。

我的问题是，当您添加一些图像并删除这些图像后，内存不会恢复到添加这些图像之前使用的相同数量。如果您重复这些操作（添加图像并在删除这些图像之后），内存不会停止上升。

为什么会发生？

我创建了一个新的 silverlight 5 项目来重新创建这个场景，测试一些代码并尝试找出正在发生的事情。

在新项目中，我有一个 StackPanel 和 3 个具有以下操作的按钮：

1- 在 StackPanel 中添加 1000 个按钮；

2- 删除 StackPanel 的所有孩子；

3-调用GC.Collect；

我重复调用相同的动作：add(1)、remove(2)、call GC(3)

在我重复了几次相同的操作（添加和删除）之后。我观察到我的第一个应用程序的相同结果，内存不会停止上升。即使在我调用 GC.Collect 之后，内存也不会被释放。我现在不知道发生了什么。是否可能是silverlight的内存泄漏？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T21:44:36.197

你的电脑是“平板电脑”吗？

如果您的计算机上运行着自动化客户端，Silverlight 自动化就会发挥作用。最常见的是：

*   平板电脑输入服务（换句话说，所有“类似平板电脑”的电脑）
*   自动化测试工具
*   屏幕阅读器（和其他可访问性软件）

这使得 silverlight 变得一团糟，并导致许多错误，并且几乎总是让一切都像疯了一样泄漏。

我通过在我的 html 中设置这个参数来禁用自动化：

```
<param name="windowless" value="true" /> 
```

您可以在此处阅读更多信息：[Silverlight + MVVM + 绑定 = 内存泄漏？](https://stackoverflow.com/questions/10644315/silverlight-mvvm-bindings-memory-leaks/11172767#11172767)

# sql - 教义查询 我有一个“日期时间”列，如下所示：2012-06-04 15:40:20. 我想在 Doctrine 中创建一个查询，以获取以前的数据。小于2012-06-04 15:40:20。我怎么能在教义中意识到这一点。 对不起，我只是不知道。 我可以将自定义键盘添加到核

> ID：10884962
> 
> 赞同：0
> 
> 时间：2012-06-04T16:48:20.613
> 
> 标签：sql, doctrine, doctrine-1.2

我有一个“日期时间”列，如下所示：`2012-06-04 15:40:20`.

我想在 Doctrine 中创建一个查询，以获取以前的数据。小于`2012-06-04 15:40:20`。我怎么能在教义中意识到这一点。

对不起，我只是不知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T10:21:04.583

如果我正确理解您的问题，我相信语法就是：

```
$datetime = // your timestamp

->where('t.somefield < ?', date('Y-m-d H:i:s', strtotime($datetime)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T17:34:20.523

我不熟悉 Doctrine，但这里是标准 SQL 来做你想做的事：

```
select *
from t
where t.datetime in (select max(datetime)
                     from t
                     where datetime < '2012-06-04 15:40:20'
                    ) 
```

如果 Doctrine 支持标准 SQL 语法，那么这样的事情就可以工作（您可能必须以不同的方式输入日期/时间常数）。

# android - 我可以将自定义键盘添加到核心键盘吗？

> ID：10884965
> 
> 赞同：0
> 
> 时间：2012-06-04T16:48:30.080
> 
> 标签：android

嘿，这是一个简单的问题，但我似乎无法找到答案。

我有兴趣创建像表情符号键盘这样的东西来添加到本机键盘，这样人们就可以将它们添加到电子邮件/短信等中。

现在我想我可以编辑操作系统本身并将其添加到键盘，但我想知道我是否可以附加到打开键盘的事件并进行编辑？

同样，我对我的应用程序中的自定义键盘**不**感兴趣，我希望在我的应用程序打开时（如果可能没有，更好）来更改常规键盘。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T16:55:52.717

> 我想知道我是否可以附加到打开键盘的事件并对其进行编辑？

不，对不起。那是与您的应用程序不同的应用程序；您不能在运行时更改它。

不过，欢迎您构建自己的输入法编辑器并使用它。或者，也许您可​​以为一些现有的开源输入法编辑器项目做出贡献。

# iphone - 苹果说该应用程序引用了我的应用程序中的非公共选择器。这意味着什么？

> ID：10884968
> 
> 赞同：1
> 
> 时间：2012-06-04T16:48:39.110
> 
> 标签：iphone, appstore-approval

我刚刚上传了一个应用程序，Application Loader 给了我这个警告。我继续查看这意味着什么，发现我正在使用一些第三方 API，因此它可能会被拒绝。我可以知道是由于哪个库或哪个代码这样说的吗？

另外，我的应用真的会被拒绝吗？我不想等待 10-12 天然后知道我的应用程序被拒绝了。我如何确认这件事不会或会在更短的时间内被拒绝？请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T07:20:58.273

好的，我自己得到了答案。我使用的 Flurry SDK 是旧版本 V2。当我更新到 V3 并且问题得到解决。总之谢谢。:)

ps 你可以通过检查你的头文件来检查你的Flurry是否过时。如果它说 FlurryAPI.h 它是 V2，如果它说 FlurryAnalytics 它是 V3。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T17:23:39.563

您必须在您的应用程序中使用一些未记录的方法。

# ant - Intellij IDEA，使用 Ant 构建神器？

> ID：10884972
> 
> 赞同：4
> 
> 时间：2012-06-04T16:48:57.787
> 
> 标签：ant, intellij-idea, tomcat6

我可能会遗漏一些东西，但我已经为这个问题苦苦挣扎了一段时间了。

我有一个带有 Ant 构建脚本的 Web 应用程序。我想为这个模块设置一个 Artifact（这是使用 ant 生成的 .war 文件），以便我可以将此 war 文件部署到配置的 Tomcat 服务器。

但我无法弄清楚，如何让 Intellij 使用我的 Ant 脚本来构建工件。我看到一个运行 Ant 目标的选项，但这只是运行 Ant 目标，然后 Intellij 以通常的方式继续生成 Artifact。

如果问题模棱两可，请告诉我。问题不在于 Ant 与 Intellij 的集成。我可以只使用 Ant 窗口并运行任何目标，也可以让 Ant 目标作为 Build 的一部分运行。问题是将工件与模块相关联并利用 Ant 脚本构建该工件。我需要这个来启用紧密的 tomcat 集成，因为在集成 Tomcat 服务器时，我可以指定要部署的工件。

注意：Intellij IDEA 版本 11.1

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-04T17:20:25.403

IDEA 可以部署 Artifact 或由 Ant 或任何其他工具构建的**External Source**（目录或文件）：

![外部源](../Images/d12f01d3641e8ec59c06bf73d6162c74.png)

无法将 IDEA Artifact 与 Ant 构建相关联。

# python - 将图像保存到 Django，正确的方法？

> ID：10884974
> 
> 赞同：0
> 
> 时间：2012-06-04T16:49:00.420
> 
> 标签：python, django

在 django 1.4 中设置上传路径的最佳做法是什么？我有一个这样的模型

```
def upload_image(instance, filename):

    return os.path.join(instance.slug, filename)

class Book(models.Model):
    ...
    ...

    image = models.ImageField(upload_to=upload_image) 

    def admin_image(self):
        return "<img src='%s' />" % self.image

    .... 
```

使用 settings.py

```
PROJECT_DIR = os.path.dirname(os.path.realpath(__file__))
ROOT_DIR = PROJECT_DIR.rsplit(os.sep, 1)[0]

MEDIA_ROOT = os.path.join(ROOT_DIR, 'books', 'static', 'books')
MEDIA_URL = '/media/'

STATIC_ROOT = ''
STATIC_URL = '/static/' 
```

和 admin.py 像这样

```
class BookAdmin(admin.ModelAdmin):
    list_display = ('title', 'admin_image') 
```

因此，最后，我将图像正确保存到 /root-of-project/books/static/books/programming-java/wall.jpg，但是，数据库中保存的路径是“programming-java/wall.jpg”。 jpg”，我每次显示图像时都必须连接前缀 '/static/books/'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T21:19:19.600

为什么要在模板中连接/硬编码这些行？您可以为此目的使用静态标签

```
{% load staticfiles %}
<img src="{% static "images/hi.jpg" %}" /> 
```

别名

```
{% load staticfiles %}
<img src="{% static object.image.url %}" /> 
```

如果你真的必须，你可以为你的模型添加一个为你做的方法？

# jakarta-ee - 在另一只耳朵中注入无接口 ejb

> ID：10884975
> 
> 赞同：4
> 
> 时间：2012-06-04T16:49:15.457
> 
> 标签：jakarta-ee, dependency-injection, ejb-3.1

我在耳朵中部署了一个无接口 ejb (MyEar.ear)

```
@Stateless
@LocalBean
public class MyService{
// stuff
} 
```

耳朵部署到jboss-6.0.0.Final

我从服务器 jmx 控制台确认了 JNDI 名称：

MyEar/MyService/无接口

我试图在同一台服务器的战争中（耳朵外）从另一个 ejb 引用这个 ejb：

```
@EJB(mappedName = "MyEar/MyService/no-interface")
private MyService myService; 
```

我在eclipse中从war项目中引用ear项目，编译成功。

部署战争时，我不断收到 ClassNotFoundException 异常：

java.lang.ClassNotFoundException: eg.com.test.MyService

为什么战争中的ejb看不到另一只耳朵的ejb？

**编辑**：我更新到以下

*远程接口*

```
@Remote
public interface MyServiceRemote{
// stuff
} 
```

*ejb*

```
@Stateless
public class MyService implements MyServiceRemote{
// stuff
} 
```

*不同应用程序中的 ejb 引用*

```
@EJB(mappedName = "MyEar/MyService/remote")
private MyServiceRemote myService; 
```

我在服务器上验证了新的 JNDI 名称：MyEar/MyService/remote

但是我仍然遇到同样的异常，这次找不到接口：

java.lang.ClassNotFoundException: eg.com.test.MyServiceRemote

**更新**：我需要将远程接口与战争打包，它现在可以正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T11:20:05.973

该 EJB 需要有一个远程接口，并且您可以像从外部 WAR 访问任何远程 EJB 一样访问它。外部 WAR 有一个单独的 EAR 类加载器，因此它不会找到 EAR 类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T23:08:13.127

在另一个使用 EJB 3.1 可移植命名格式的应用程序中，您必须使用完全限定名称来引用 EJB：

```
java:global/[<application-name>]/<module-name>/<bean-name>!<fully-qualified-bean-interface-name> 
```

# android - Android DownloadManager ETag 支持

> ID：10884978
> 
> 赞同：2
> 
> 时间：2012-06-04T16:49:28.877
> 
> 标签：android, etag, download-manager

[有](http://developer.sonymobile.com/wp/2011/05/18/xperia%E2%84%A2-game-developer-tip-1-a-download-should-automatically-resume-if-the-connection-fails/)信息表明 Android 的 DownloadManager 支持 ETags。好的，我有一个支持 ETag 的服务器（例如 DropBox）。当我试图下载一个文件时，DownloadManager 会创建一个新文件并将一个数字附加到本地文件名（例如 file.zip、file-1.zip、file-2.zip 等）。有没有办法不下载具有相同 ETag 的现有文件？我的应用程序***将***下载大量文件，因此我不想每次都重新加载它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T17:15:03.503

> 有没有办法不下载具有相同 ETag 的现有文件？

您是请求下载的人。您需要确定应该和不应该下载哪些文件。AFAIK，`DownloadManager`仅`ETag`用于中断下载——它不会`ETag`无限期地存储信息。

# .net - 使用 Powershell 从网络文件夹中获取文件名

> ID：10884983
> 
> 赞同：2
> 
> 时间：2012-06-04T16:49:50.463
> 
> 标签：.net, powershell, cmd, cmdlets

我正在尝试使用 Powershell 从网络文件夹中获取文件名。我对 Get-ChildItems 的理解（如果我错了，请纠正我）是 cmdlet 正在尝试下载整个对象，在这种情况下，它是一系列产品安装程序，每个文件的大小从 25MB 到 315MB .

我的脚本的目的是创建一个菜单供用户选择他们想要下载的文件。一切正常，除了填充菜单需要 30 多分钟，这显然是不可接受的。

我想我可能需要合并一些 .NET 类来完成这项工作，但如果我可以纯粹使用 Powershell 来完成它，那就太好了。任何想法或建议将不胜感激。

```
$source = Get-ChildItem "\\networkdrive\Release\Installs\2012.1.2.3\" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T13:18:46.660

我找到了另一种方法来做到这一点，但它确实使用 .NET 类，所以严格来说，它并不能完全回答我自己的问题。但是，它确实完成了工作，所以这里是：

```
$source = [System.IO.Directory]::GetFiles("\\networkdrive\Release\Installs\2012.1.2.3", "*.exe") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T17:16:14.623

```
$source = Get-ChildItem "\\networkdrive\Release\Installs\2012.1.2.3\" | Where-Object{-Not $_.PsIsContainer} 
```

这只会得到文件，但我认为你可以做很多事情来处理它所花费的时间。理论上，您可以在共享所在的服务器上远程运行它。那会更快。不确定这是否是您环境中的一个选项。

# php - 解码 PHP JSON

> ID：10884984
> 
> 赞同：-1
> 
> 时间：2012-06-04T16:49:53.163
> 
> 标签：php, json

我的 php 接收到类似于以下的 JSON 字符串：

```
{"one-value":"GOOGLE","sub-values":{"sub thing":"xpto"}} 
```

如何获得“子事物”的价值？

如果我想要“单值”：

```
$json = json_decode($data);
$service = $json->{'one-value'}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T16:52:42.700

尝试这个：

```
$json = json_decode(
  '{"one-value":"GOOGLE","sub-values":{"sub thing":"xpto"}}'
);

echo $json->{'sub-values'}->{'sub thing'};

// OR
$json = json_decode(
  '{"one-value":"GOOGLE","sub-values":{"sub thing":"xpto"}}',
  TRUE
);

echo $json['sub-values']['sub thing']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T16:52:09.517

```
json_decode($data,true); 
```

将为您提供 JSON 上所有值的完整索引数组，之后您可以执行

```
$json["sub-values"]["sub thing"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T16:52:18.893

```
$json = json_decode($data,true); 
$service = $json["sub-values"]['one-value']; 
```

'true' 用于将 json 字符串转换为关联数组

# extjs - ExtJS：将图像作为列标题

> ID：10884987
> 
> 赞同：1
> 
> 时间：2012-06-04T16:50:03.703
> 
> 标签：extjs, extjs4

在 ExtJS 4.0 中是否可以将列标题设置为图像或自定义呈现的 HTML？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-04T20:47:24.670

列文本的 API 说：

> 文本：字符串
> 
> 用作 innerHTML（接受 html 标记）以在 Grid 中显示的标题文本。

这意味着您可以传入类似`<span class="mySpan"></span>`的内容并定义一个具有背景图像的 css 类。

*编辑：* 这是一个例子：http: [//jsfiddle.net/HSVj8/102/](http://jsfiddle.net/HSVj8/102/)

# ajax - 可以在 ajax 丰富的网站上使用哪个热图库/软件？

> ID：10884991
> 
> 赞同：2
> 
> 时间：2012-06-04T16:50:13.537
> 
> 标签：ajax, analytics, heatmap

我正在开发一个 ajax 繁重的网站，其中几乎所有的内容都是动态加载的。该技术确实有它的好处——增强的用户体验、缓存。但是，我找不到适合此类网站的开源热图（图表点击）解决方案？

这些天来，很多网站都在制作丰富的 ajax 或基于 hijax - 只是想知道他们使用哪些选项进行分析 - 更具体地说是热图。

# jquery - 在 jquery 中解析 XML 的级别

> ID：10884994
> 
> 赞同：0
> 
> 时间：2012-06-04T16:50:24.700
> 
> 标签：jquery, xml, xml-parsing

这是我的 XML。我将拥有许多学位，每个学位将有许多学校，每个学校将有许多专业。该页面将提供三个下拉菜单。我不是要求所有代码来执行所有 onclicks 嵌套下拉更新。（除非有人有一些很酷的重复模式，否则会起作用。

我遇到的这个问题是，当我从 Degrees 节点询问学位并将 text() 添加到下拉列表中时，我从学位、学校、规范中获取所有文本......所以我想要的是一个带有“学位”的下拉列表1”，但我得到“Degree 1 School 1 Spec...”，我相信你明白了，我尝试添加“Degrees.filter, and children”，但我什么也没得到。

我需要了解如何一次使用嵌套节点解析 XML。

谢谢你的时间。

```
<Degrees>
  <Degree>
  Degree 1
  <Schools>
    <School>School 1
      <Specializations>
       <Specialization>Specialization 1</Specialization>
       <Specialization>Specialization 2</Specialization>
      </Specializations>
    </School>
    <School>School 2
      <Specializations>
       <Specialization>Specialization 3</Specialization>
       <Specialization>Specialization 4</Specialization>
      </Specializations>
    </School>
  </Schools>
  </Degree>
</Degrees> 
```

当前的 jQuery

```
var Degrees = $(PID).find('Degrees');
    Degrees.find("Degree").filter("Degree").each(function () {
    var select = $('#degree');
    var value = $(this).text();
    select.append("<option value='" + value + "'>" + value + "</option>");
    }); 
```

的HTML

```
<select id="degree">
    <option value="" selected="selected">-- Select Degree --</option>
</select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T18:45:19.070

这是我最终做的，这也允许我对下拉列表进行排序。如果有人有任何其他想法，请发表评论。

```
var degreelist = new Array();
                $(xml).find('PID[id="' + PID + '"] Degrees Degree').each(function () {
                    var Item = new Object();
                    Item.Id = $(this).attr("id");
                    Item.value = $(xml).find('Degrees Degree[id=' + Item.Id + ']').text();
                    degreelist.push(Item);
                });

                degreelist.sort(function (a, b) {
                    if (a.value.text > b.value.text) return 1;
                    else if (a.value.text < b.value.text) return -1;
                    else return 0
                })

                for (var i = 0; i < degreelist.length; i++) {
                    $('#degree').append("<option value='" + degreelist[i].Id + "'>" + degreelist[i].value + "</option>");
                } 
```

# linux - Remove a file from usr/include?

> ID：10884996
> 
> 赞同：2
> 
> 时间：2012-06-04T16:50:35.430
> 
> 标签：linux, ubuntu, command-line

I am trying to run a program from command line in ubuntu and I have a directory that is in the usr/include/ directory that I need to remove so that it will run. How can I do this from command line?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T16:59:06.683

```
rm -r /usr/include/... 
```

Just use that. But if you need to do that, there is something wrong with your program. If a package installed the directory, use:

```
sudo apt-get purge package-name 
```

All in all, the directories directly under `/usr` are under the charge of the package manager, and if you want to do things without that, use the `/usr/local` dir. Changing other programs resources is a bad idea. Also, don't run anything you don't have to with `sudo`. That will end badly. And what program would require the removal of a dir in `/usr/include`?