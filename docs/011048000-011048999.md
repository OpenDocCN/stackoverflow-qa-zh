# StackOverflow 问答 11048000-11048999

# foxpro - Foxpro程序需要了解

> ID：11048000
> 
> 赞同：0
> 
> 时间：2012-06-15T09:27:32.183
> 
> 标签：foxpro, visual-foxpro

我以前从未使用过 Foxpro。您能否将以下 Foxpro 代码转换为 c#，以便我理解逻辑。我主要对密码逻辑感兴趣。还有什么是spac（）？can_p 是存储用户名密码的 .dbf 文件。但密码以数字形式存储在几列（k1，k2...k12）中。我猜系统从密码中计算出这 12 个数字并输入那里。

```
proc can_01
set colo to w/
@10,18 clea to 17,60
@10,18 to 17,60 doub
set colo to n/w
@10,34 say ' LOG IN '
set colo to w/
@12,20 say 'Enter Name.......'
@13,20 say 'Counter..........'
usr=spac(18)
cntr='*'
x=1
do whil .t.
set colo to n/w
@22,0
@22,0 say ;
  'Enter user name                 <CR>-Exit                 <ESC>-Abort '
set colo to n/w,w+/bg
@12,38 get usr pict '!!!!!!!!!!!!!!!!!'
read
set colo to n/w
if read()=12 .or. usr='        ' .or. x>3
  @22,0
  @22,0 say 'Log In aborted..Press any key..'
  ??chr(7)
  do can_011
  read
  quit
endi
x=x+1
use can_p
set exac on
loca for user=trim(usr)
set exac off
@22,0
if  eof()
  @22,0 say 'User '+usr+' does not exists..Press any key..'
  ??chr(7)
  use
  read
 else
  exit
  endi
 endd
 do whil .t.
 @22,0 say ;
  'Enter Counter No                <CR>-EXIT                   <ESC>-Abort'
 @13,38 get cntr pict '!'
 read
 @22,0
 if read()=12
  do can_011
  quit
 endi
 if trim(usr)='BABU M' .and. cntr='*'
  exit
 endi
 if .not. cntr$'ABCD'
  @22,0 say 'Incorrect Counter..Re-enter..'
  ??chr(7)+chr(7)
  loop
 endi
 exit
  endd
  scntr=cntr
 x=1
do whil .t.
set colo to n/w
@22,0
@22,0 say ;
  'Enter Password              <CR> - Exit                <ESC> - Abort '
 set colo to w/
 @14,20 say 'Enter PASSWORD :-'
 set cons off
 @14,38 say ''
 acce to ps
 set cons on
 cps=chr(k8+9)+chr(k4+7)+chr(k5-31)+chr(k1+13)+chr(k3-19)+;
  chr(k7-35)+chr(k2-27)+chr(k6+1)+chr(k11-6)+chr(k10+6);
  +chr(k12+11)+chr(k9-5)
  set colo to n/w
  @22,0
  set exac on
  if cps<>ps
  @22,0 say 'Incorrect PASSWORD !! Press any key ..'
  ??chr(7)
  read
  x=x+1
  if read()=12 .or. x>3
     do can_011
     quit
  endi
  else
  exit
  endi
 endd
 @22,0
 @22,0 say 'Please Wait..'
 set exac off
 if user#'JV'
  if .not. (counter=scntr .and. active)
  @22,0 say 'Counter not activated...Access denied..Return to system..'
  ??chr(7)+chr(7)+chr(7)+chr(7)
  do can_011
  quit
   endi
   endi
  xr=recn()
  loca for counter=scntr .and. li .and. recn()<>xr
  if found()
   @22,0 say 'Counter already Logged-In by User '+user+;
  '..Return to system..'
    ??chr(7)+chr(7)+chr(7)+chr(7)
    do can_011
    quit
    endi
   go xr
   repl active with .t.,li with .t.,lidt with date(),litm with time()
    unlo
    do can_011
   set colo to w/n,w+/g
     retu 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T11:02:27.180

although I can write a C# WinForms and WPF to do it, I'll try to explain all the way through from Foxpro perspective... Mind you... this looks to be a decompiled version of the code as all the foxpro keywords are only showing in 4 characters, not their complete and more understandable commands. Also, this is code that looks like it was written before VFP even existed... much like older DOS days, going back to... 1989 days...

```
&& "Proc" is short for Procedure (or Func for Function) much like method in C#, 
public Can_01()
{ do things here... }

proc can_01

&& "SET COLO" = Set Color to
set colo to w/
&&  @x,y to x2,y2 does basic drawing, such as clear screen ( via CLEA TO = "clear to" )
&& from a DOS world of 24x80 as this appears to reflect, then draw a double border (via DOUB)
@10,18 clea to 17,60
@10,18 to 17,60 doub

&& change "COLO"r again
set colo to n/w

&& At given x/y coordinate (10,34), show a string for "LOG IN", 
@10,34 say ' LOG IN '
&& another color change
set colo to w/
&& at x,y, show string label for respective
@12,20 say 'Enter Name.......'
@13,20 say 'Counter..........'

&& create variable "usr" and set it equal to 18 spaces
usr=spac(18)
&& create var "cntr" and default it to a single "*"
cntr='*'
&& create var "x" and set to 1
x=1

&& Loop... do while true -- continues until and "ENDDO"
&& in C#...  while( true ) {  do things... }
do whil .t.
   && more coloring and showing fixed-spacing label to the screen
   && to give user indicator of allowed input of <CR> carriage return to exit
   && or escape key to abort, but still show a label and more coloring.
   set colo to n/w
   @22,0
   @22,0 say ;
     'Enter user name                 <CR>-Exit                 <ESC>-Abort '
   set colo to n/w,w+/bg  

   && @/Get is actually getting user input from given x,y coordinate.
   && the "pict" is a picture clause like an input format string.  "!" means
   && convert entered characters to upper case, and only allow as many characters
   && as there are "!" in the picture mask.
   && put whatever is typed into the variable "usr"
   @12,38 get usr pict '!!!!!!!!!!!!!!!!!'

   && stop and wait for user input until they hit enter or escape
   read
   && more color changing
   set colo to n/w

   && read() or "ReadKey()" checks input length, that otherwise is the same as mask-- 
   && redundant.  OR the user name is all spaces OR the x counter is now past 3rd attempt
   if read()=12 .or. usr='        ' .or. x>3
      && show to screen login aborted
      @22,0
      @22,0 say 'Log In aborted..Press any key..'
      && send a DOS "beep" to the user
      ??chr(7)
      && do another procedure or function called "can_011" ( I guess is some "cancel" process)
      do can_011
      && read will basically wait for confirmation via simple message of "Press any key..."
      read
      && quit entire application
      quit
   endi

   && user did provide input, increase the attempted login counter x=x+1
   x=x+1

   && open the table called "CAN_P"
   use can_p
   && set exact matching on... to prevent things like finding "Tom" = "Tom   "
   set exac on
   && try to "LOCATE"  for the specific user entered exists within the table
   && but trimming the value entered by the user (  C#  string.Trim()  )
   loca for user=trim(usr)
   && turn exact matching back off
   set exac off

   @22,0
   && if EOF() (end of file) is reached, we did not find the user
   if  eof()
      && show message to user at x,y position
      @22,0 say 'User '+usr+' does not exists..Press any key..' 
      && another DOS bell
      ??chr(7)
      && close the "CAN_P" table
      use
      && wait for user to press a key to try via next loop
      read
   else
      && we found the record in the table, exit the do/while loop
      exit
   endi
endd  && end of the do/while loop

&& another do while true...
&& almost identical in content, but asking for some "cntr" variable.
&& almost same display, showing counter attempts and prompting
do whil .t.
   @22,0 say ;
      'Enter Counter No                <CR>-EXIT                   <ESC>-Abort'
   && prompt user for a value to put into the "cntr" variable, single character
   @13,38 get cntr pict '!'
   && read input
   read
   @22,0
   if read()=12
      && again, forcing itself out via "CAN_011" procedure somewhere else
      do can_011
      quit
   endi

   && if the user name is equal to "BABU M" and t he cntr = "*", exit the do/while loop
   if trim(usr)='BABU M' .and. cntr='*'
      exit
   endi

   && "$" in VFP is like "contains" in C#
   && in C#... string myLongString = "testing for some value to look for";
   &&          string myLongString.Contains( " val" );
   && 
   && in this case, 'cntr" is a single character value.  and if it is NOT
   && and "A", "B", "C" or "D", tell user incorrect and re-enter
   if .not. cntr$'ABCD'
      @22,0 say 'Incorrect Counter..Re-enter..'
      && oooo.... two DOS beeps
      ??chr(7)+chr(7)
      && continue the do/while loop
      loop
   endi

   && leaky-boat technique... we got this far, must have had a good value,
   && exit the do/while loop
   exit
endd   && end of the do/while loop

&& new variable "SCntr" = whatever "cntr" is
scntr=cntr

&& reset "x" var back to 1
x=1

&& another do/while loop
do whil .t.
   && more color, and show label to user to enter password
   set colo to n/w
   @22,0
   @22,0 say ;
      'Enter Password              <CR> - Exit                <ESC> - Abort '
   set colo to w/
   @14,20 say 'Enter PASSWORD :-'
   && set console OFF so nobody can see what is being typed...
   set cons off
   @14,38 say ''
   && "Accept" keyboard entry to a variable "ps"
   acce to ps
   && turn console back on to allow seeing typing again
   set cons on

   && I don't know where the "K8", "K4", "K5", etc are... I SUSPECT they
   && are in the user's login table as some sort of mask to compare against
   && "CHR()" is to get ASCII character equivalent based on a numeric value.
   && ex: CHR(32) = ASCII 32 = space character... CHR(65) = "A", CHR(66)="B", etc...
   && so the programmer was building a variable "CPS" by adding a bunch of single
   && characters of the value of "K8" + 9 and getting its ASCII value, then adding
   && the next character, and next until all characters processed into one long string
   cps=chr(k8+9)+chr(k4+7)+chr(k5-31)+chr(k1+13)+chr(k3-19)+;
       chr(k7-35)+chr(k2-27)+chr(k6+1)+chr(k11-6)+chr(k10+6);
       +chr(k12+11)+chr(k9-5)

   && more coloring
   set colo to n/w
   @22,0
   && another exact test
   set exac on
   && if the data entered and "computed string" via "cps" is NOT the same
   && as what I suspect is "ps" a column in the CAN_P table (login table)
   if cps<>ps
      && show message of incorrect password
      @22,0 say 'Incorrect PASSWORD !! Press any key ..'
      && another bell
      ??chr(7)
      && wait for user to hit a key
      read
      && add 1 to the "x" counter for failed attempts / abort 
      x=x+1
      && is user aborting, or exceeded 3 login attempts
      if read()=12 .or. x > 3
         && do the cancel procedure thing again
         do can_011
         && quit the app
         quit
      endi
   else
      && valid password, EXIT the DO/WHILE loop
      exit
   endi
endd   && end of the do/while loop

&& more display status
@22,0
@22,0 say 'Please Wait..'
set exac off

&& "#" is same as <> (not equal to)
&& if the user is NOT "JV"
if user#'JV'
   && more simple boolean check... I assume checking if user is "Active"
   && based on column in the login table
   if .not. (counter=scntr .and. active)
      @22,0 say 'Counter not activated...Access denied..Return to system..'
      && wow... seriously... 4 dos BEEPs, canel process and quit application
      ?? chr(7)+chr(7)+chr(7)+chr(7)
      do can_011
      quit
   endi
endi

&& create var "xr" and preserve whatever the "record number" is in the user table
xr=recn()

&& while still in the login table, try to "LOCATE" for the given condition
&& based on respective variables and their counterpart in the table.
&& HOWEVER, look for value and the record is NOT the one we stored in "xr" above
loca for counter=scntr .and. li .and. recn() <> xr
if found()
   && nag user that the person is already logged in message, 4 bells, cancel, quit app
   @22,0 say 'Counter already Logged-In by User '+user+;
      '..Return to system..'
   ??chr(7)+chr(7)+chr(7)+chr(7)
   do can_011
   quit
endi

&& go back to the originally found record
go xr

&& replace the actual record with status of active = true,
&& lidt (I suspect login date with current date()  (C# DateTime.Now is closest)
&& litm = just the time portion
repl active with .t.,li with .t.,lidt with date(),litm with time()
&& unlock the record
unlo

&& do the "CAN_011" procedure thing
do can_011
&& colors
set colo to w/n,w+/g
&& done with this routine, just return to whoever called it.
retu 
```

# android - 使用 Android:Digits 属性来限制字符停止操作下一个按钮工作

> ID：11048007
> 
> 赞同：13
> 
> 时间：2012-06-15T09:27:44.730
> 
> 标签：android, action, digits

我在 Android 应用程序上有许多 EditText 字段，并且我使用 android:digits 来阻止输入无效字符。

例如：（ `android:digits="@string/validchars"` 其中“validchars”是所有有效字符的字符串资源 - 例如 AZ、0-9 和一些标点符号）

问题是，如果用户点击软键盘上的 ENTER 键，它曾经将他们带到下一个字段，但由于我添加了 android:digits 位，这已经停止工作。我尝试将 \n 添加到，`validchars`但这仅允许在单行文本框（！）中进行回车，因此无济于事。我试过摆弄 imeOptions （添加`actionNext`等），但这似乎也不能解决它。我已经阅读了有关 TextWatchers 和 InputFilters 的信息，但对于我正在尝试做的事情来说，两者似乎都过于复杂，并且该`android:digits`位在阻止无效字符方面效果很好。

有没有人有任何想法？

我正在使用 Android SDK 版本 8 并针对 2.2 和 2.3.5 设备。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-09T08:04:47.730

在对 EditText 可用的属性进行了一番探索之后，我发现当我添加 android:singleLine="true" 时，ENTER 键现在将焦点移动到下一个字段，即使 android:digits 限制输入的字符也是如此。问题解决了！（对我来说，无论如何！）

# asp.net-mvc - MVC4 捆绑和模拟是否进行任何缓存？

> ID：11048011
> 
> 赞同：3
> 
> 时间：2012-06-15T09:27:52.220
> 
> 标签：asp.net-mvc, asp.net-mvc-3, bundling-and-minification

我想使用 MVC4 的捆绑和模拟功能，但我担心模拟。是否每次客户端请求 css 和 javascript 时，捆绑/模拟过程都有效。如果是这样，那么每次都没有CPU开销吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T09:33:25.507

[报价](http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification)：

> 捆绑和缩小主要改善了首页请求加载时间。请求网页后，浏览器会缓存资产（JavaScript、CSS 和图像），因此在请求同一页面或同一站点上的页面请求相同资产时，捆绑和缩小不会提供任何性能提升。

因此资产将被浏览器缓存，并且不会在后续页面上请求，因此不会影响性能。

备注：[在 ASP.NET MVC 4 RC 中有一个错误，](http://todd-carter.com/post/2012/06/10/mini-me-fication-in-system-web-optimization-rc-is-evil/)它不会在服务器端执行缓存，希望在 RTM 中得到修复。因此，当在视图中调用`@Scripts.Render`助手时，每次都会对性能造成影响。

# flash - Adobe Flash 11.3 低延迟音频支持通过 NetStream 进行流式传输

> ID：11048014
> 
> 赞同：3
> 
> 时间：2012-06-15T09:27:59.847
> 
> 标签：flash, apache-flex, audio, adobe, netstream

在 Flash ver.11.3 版本中，其中一项更改是：

> 通过 NetStream 对流式音频的低延迟音频支持 — 此功能旨在减少高质量流式音频播放的延迟。它解决了云游戏的一个非常特殊的用例，其中游戏在服务器上呈现，音频和视频流式传输到客户端。

[http://forums.adobe.com/message/4476911](http://forums.adobe.com/message/4476911)

有人可以解释一下这是什么意思吗？这是否意味着`NetStream`在此版本的 Flash 播放器中，任何流式传输的音频都会在延迟方面自动得到改善？还是必须在音频上应用一些特殊设置才能将`NetStream`音频视为“低延迟”？此更改是否仅适用于通过 NetStream 流式传输的某些特定音频格式？

一般来说，问题是：我是否需要在我的服务器上进行任何更改，通过 播放实时音频`NetStream`，或者在使用 Flex 构建的音频播放器中进行任何更改，以利用这个新的 Flash 版本？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T10:34:43.600

[我在发行说明](http://helpx.adobe.com/flash-player/release-note/enduser-release-notes-11_3.html)中找到了一些细节，其中提到了一个新的布尔属性，`useJitterBuffer`该属性已添加到`NetStream`.

[本文](http://www.bytearray.org/?p=3705)说您可以设置`bufferTime = 0`和`useJitterBuffer = true`激活新功能。

最后，[这个论坛帖子](http://forums.adobe.com/message/4428681)说你还需要`swf-version=16`在编译器选项中使用。

因此，要回答您的问题：您需要在客户端上进行上述更改。唯一的服务器端更改似乎是需要 Flash 11.3。

# jquery - Jquery 选择所有定义了 accesskey 的元素

> ID：11048015
> 
> 赞同：2
> 
> 时间：2012-06-15T09:28:00.180
> 
> 标签：jquery, .net, access-keys

我想选择所有定义了 accesskey 的元素。

我知道我可以做到这一点：`$('[accesskey]')`，但这在页面上给了我很多输入、hrefs 等（其中大多数都有一个空的 accesskey）。

仅选择 accesskey 实际具有值的元素的方法是什么？

[编辑：我也发现了空访问键的原因，是由多个模式对话框上的一些旧的禁用/恢复访问键 javascript 函数引起的。通常你不会得到那么多带有空访问键的元素]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T09:34:07.377

使用一个选择器：

```
$('[accesskey][accesskey!=""]').foo 
```

它是如何工作的：

```
// Has the accesskey attribute defined.
[accesskey]

// Doesn't have an empty value for the accesskey attribute.
[accesskey!=""] 
```

**它一起**选择具有`accesskey`属性且不为空的每个元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T09:30:50.700

你可以这样做

```
$('[accesskey]').filter(function(){
    return $(this).prop('accessKey');
}); 
```

[`.filter()`](http://api.jquery.com/filter/)或者像其他人已经说过你可以使用[`attribute-not-equal-selector`](http://api.jquery.com/attribute-not-equal-selector/)

**[工作样本](http://jsfiddle.net/joycse06/jFZyZ/14/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T09:33:19.793

你可以使用和额外的循环

```
$("[accesskey]").each(function() {
    if($(this)).attr('accesskey').length > 0) {
        // do it
    }
} 
```

我希望它会帮助你

# java - 如何删除已经添加到标签的clickHandler？

> ID：11048016
> 
> 赞同：2
> 
> 时间：2012-06-15T09:28:10.617
> 
> 标签：java, gwt, click, handler

我正在使用 GWT/JAVA 进行开发。我有以下问题：我想从已经添加到标签的标签中删除 ClickHandler。

我试过 removeClickListener() 但它已被弃用，所以我找不到另一个解决方案来做到这一点。

如果有人找到解决方案，请告诉我..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T09:42:32.537

我不知道 GWT，但这是你可以做的（来自 API）。

```
HandlerRegistration reg = label.addClickHandler(clickHandler);

reg.removeHandler(); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-15T09:34:51.970

你使用了错误的方法。正确的是。

```
com.google.gwt.user.client.ui.Label.addClickHandler(ClickHandler) 
```

在这个方法调用上，有一个`HandlerRegistration`返回的实例。有一种方法是

```
com.google.gwt.event.shared.HandlerRegistration.removeHandler() 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-05-30T14:14:56.730

**addClickHandler( new ... )**（以及所有其他“ **add...Handler(** ”) 返回一个 HandlerRegistration 接口。

您必须注册此处理程序。因此，您可以随时删除 clickHandler。

```
 HandlerRegistration handler = null;

    private void updateMyInformationLabel(){
         if(handler != null){ 
              // previous onClickHandler removed
              handler.removeHandler(); 
         }
         // adding a new action on label click 
         handler = myInformationLabel.addClickHandler(new ClickHandler() {
                       @Override
                       public void onClick(ClickEvent event) {
                           // something done once
                       }
                   });        
    } 
```

# java - 使用 JNI 将 Java 与 C++ 静态链接

> ID：11048017
> 
> 赞同：0
> 
> 时间：2012-06-15T09:28:12.327
> 
> 标签：java, c++, java-native-interface

是否可以将 C++ 库静态链接到 Java 程序，以将它们变成单个文件的方式，就像链接 2 个 C++ 库一样？
（我读到java程序也可以编译成EXE）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T09:46:28.537

从理论上讲，这应该可以创建一个已经包含 JVM 使用的所需 JNI 函数的 EXE。

此 EXE 必须通过在同一进程中启动 JVM 实例来加载 Java 部分（通过加载 jvm.dll 并执行它，如问题[JNI Java in c++](https://stackoverflow.com/questions/1912962/jni-java-in-c)所示）。

我知道的 Java-EXE 包装器不支持这样的东西，因为它们带有一个预编译的 EXE，它将使用的 JAR 作为资源附加。因此，我假设您必须构建自己的 C/C++ 可执行文件并实现所需的所有功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T10:18:43.867

除非您可以访问 jvm.lib 库的静态版本，否则这是不可能的。它作为引用 jvm.dll 的动态链接库分发。你不能这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T09:53:04.897

当我使用 JNI 时，我将支持 JNI 的 dll 包含到我的 jar 文件中。然后通过类路径访问它。您将拥有单个 jar 文件。

# java - 使用 selenium rc 和 junit 自动化 telric 控制

> ID：11048019
> 
> 赞同：0
> 
> 时间：2012-06-15T09:28:20.207
> 
> 标签：java, selenium, junit, selenium-rc, testng

我需要自动化构建在 asp.net 中的 Web 应用程序。这是强制性的，我必须将 Selenium RC 与 Junit 或 TestNG 一起使用。

在这里，我在处理 telric 控件和 silverlight 控件时遇到了很大的麻烦。有人可以建议我一些方法来克服它..

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-15T10:56:02.157

Selenium 只是自动化 Web 应用程序的方法。Selenium RC 无法处理使用 JQuery/Ajax/Telric 开发的特殊控件 要访问这些类型的控件，最好使用 Selenium Web Driver-2.0。同时去 Xpath Finder 来定位那些元素.......

# jsf - JSF 链接在 Facelets 上不起作用

> ID：11048032
> 
> 赞同：1
> 
> 时间：2012-06-15T09:28:59.760
> 
> 标签：jsf, jakarta-ee, jsf-2, facelets

我创建了一个 JSF 2 页面，它使用 Facelets 来定义页面的结构。

```
<div class="page">
    <div class="content">
        <ui:insert name="content">

        </ui:insert>
    </div>
    <div class="footer">
        <ui:include src="footer.xhtml" />
    </div>
</div> 
```

这是footer.xhtml

```
<h:commandButton value="Link Page 1"  action="page1.xhtml" />     
<h:commandButton value="Link Page 2" action="page2.xhtml" /> 
```

如您所见，在 footer.xhtml 中，我有一些用于在页面之间移动的按钮。

不幸的是，当按钮被放入 footer.xhtml 页面时，导航不起作用。另一方面，如果它们被放置在主 div（内容）中，它们可以正常工作。

有没有办法让他们也可以在页脚中工作？

Ps 我的环境 Java 1.6 on JBoss application server 7 谢谢 Linda

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T09:52:07.877

如果您不将它们放入表单元素中，您的 commandButton/commandLink 元素将无法工作`<h:form></h:form>`。请记住将正确的命名空间添加到您的`<ui:composition>`元素“ `xmlns:h="http://java.sun.com/jsf/html`”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T10:38:05.980

对于纯导航，您应该使用`h:button`而不是`h:commandButton`. 正如克里斯所说，后者确实需要一个环绕的形式。

如果您按如下方式更改按钮，则无论您将它们放在页面的哪个位置，它们都应该可以工作：

```
<h:button value="Link Page 1" outcome="page1" />
<h:button value="Link Page 2" outcome="page2" /> 
```

`.xhtml`后缀由 JSF 附加。

# sass - 在 Scout 中设置自定义图像路径

> ID：11048033
> 
> 赞同：5
> 
> 时间：2012-06-15T09:29:03.437
> 
> 标签：sass, compass-sass, scout-sass

我在 Windows 7 上使用 Scout 应用程序来轻松使用 SASS/Compass。我在尝试自定义 Scout 应该使用的图像路径时遇到了一些令人难以置信的烦人体验。

Scount 配置 UI 实际上提供了一个字段来设置我的图像路径，因此我将其设置为如下内容：

**c:\我的项目\img**

接下来我在我的 .SCSS 文件中使用一个规则，例如：

```
@include background(image-url("bg_skin.png")); 
```

这编译成具有如下图像路径的 CSS：

**/images/img/bg_skin.png**

这显然破坏了我的图像路径。我想我在这里错过了为什么我可以选择设置路径的逻辑，之后无论如何它都会被完全否决。

随着越来越多的用户似乎遇到此问题，发布了更新：

[http://www.continuousthinking.com/2012/05/14/scoutapp-0-6-0-rc1.html](http://www.continuousthinking.com/2012/05/14/scoutapp-0-6-0-rc1.html)

此更新允许创建自定义配置文件来设置路径等，然后将使用这些文件。所以我创建了那个文件并告诉 Scout 使用它：

```
images_dir = "../img" 
```

这会编译成 CSS 中的图像路径，如下所示：

**/../img/bg_skin.png**

注意前导斜杠。用户配置的路径再次被否决，再次破坏了我的路径。我要做的就是告诉 Scout 使用我的“img”目录。这让我发疯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T13:04:03.450

如果你真的想获得相对路径，你需要添加`relative_assets = true`到你的`config.rb`. 当您使用以下命令创建新项目时，该文件中的所有内容都进行了描述`compass create`：

```
# To enable relative paths to assets via compass helper functions. Uncomment:
# relative_assets = true 
```

# windows - 运行 Perl 脚本通过 DOS 命令提示符调用网页？

> ID：11048035
> 
> 赞同：2
> 
> 时间：2012-06-15T09:29:11.207
> 
> 标签：windows, perl, windows-xp, dos

我的工作场所使用 XP，我试图在其上运行以下脚本

```
use strict;
use warnings;

use WWW::Mechanize;
my $mech = WWW::Mechanize->new();

$mech->get( 'http://google.com' );

$mech->submit_form(
    form_number => 0,
    fields      => {
        q       => 'led zeppelin',
    }
);

print $mech->content; 
```

但是，当我尝试通过 DOS 运行脚本时，我总是收到一条错误消息，指出无法加载页面，因为我的计算机由于超时而无法连接到 google.com:80。

据我所知，这不是互联网问题，因为我的浏览器似乎运行良好。我想知道的是，是否需要设置任何其他权限或参数以便可以加载站点？如果不是，问题是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T09:35:02.343

也许互联网只能通过您工作场所的代理服务器访问，这是一种常见的做法。

```
$mech->proxy(['http', 'ftp'], 'http://proxy.example.com:8000/'); 
```

请参阅[*如何通过代理服务器使用 WWW::Mechanize？*在`WWW::Mechanize::FAQ`](http://p3rl.org/WWW%3a%3aMechanize%3a%3aFAQ#How-do-I-use-WWW%3a%3aMechanize-through-a-proxy-server-).

# ruby-on-rails - Rails 在没有 ActiveRecord / ActiveModel 的情况下记住表单细节

> ID：11048038
> 
> 赞同：2
> 
> 时间：2012-06-15T09:29:25.797
> 
> 标签：ruby-on-rails

在我的表单中，用户会根据会话中的值按顺序显示特定视图。这一切都很好，除了当用户返回到以前的表单时，表单没有预先填充会话中的数据。

我的模型没有扩展 ActiveModel，因为我没有使用本地数据库做任何事情。

```
<%= form_tag do %>
    <%= field_set_tag do %>
        <label for="form_firstname">First name:</label>
        <%= text_field "form", "firstname" %>

        <label for="form_surname">Surname:</label>
        <%= text_field "form", "surname" %>

        <label for="form_dob_3i">Date of Birth:</label>
        <%= date_select("form", "dob", :start_year => 1912, :end_year => 1994, :order => [:day, :month, :year], :prompt => { :day => 'Day', :month => 'Month', :year => 'Year' }) %>

        # and many other fields including radio/check/text/select ...

        # next / back buttons...
    <% end %>
<% end %> 
```

我的问题是如何让表单记住会话中的数据并预填充该字段？

对于文本字段，我可以像这样添加一个值属性，但我不确定这是最好的方法：

```
<label for="form_address_line_1">Address:</label>
<%= text_field "form", "address_line_1", :value => session[:quote]['policyholder']['address_line_1'] %> 
```

我也不确定如何将其应用于无线电场等，因为以下内容不起作用（尽管对我来说很有意义）：

```
<%= radio_button_tag 'form[homeowner]', 'yes', :checked => 'checked' if session[:quote]['policyholder']['homeowner'] = 'yes' %>
<label for="form_homeowner_yes">Yes</label>

<%= radio_button_tag 'form[homeowner]', 'no', :checked => 'checked' if session[:quote]['policyholder']['homeowner'] = 'no' %>
<label for="form_homeowner_no">no</label> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T05:40:19.670

使用视图中的后退按钮呈现前一个表单，而不是重定向到它......所以试试这个而不是redirect_to：`render 'your_controller_action'`

# javascript - 可以使用 css 拖动属性来移动元素而不掉落吗？

> ID：11048039
> 
> 赞同：1
> 
> 时间：2012-06-15T09:29:29.317
> 
> 标签：javascript, css

是否可以使用可拖动的 css 将一个元素从一个位置拖动到另一个位置，而无需容器部分且无需所有 javascript 来执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T14:25:20.317

感谢您的回复。似乎在原生拖放方面付出了很多努力（我不认为）它被广泛使用，就像只是拖动元素一样。由于拖动东西是拖放的一个组件，因此网络人似乎本末倒置......我会很高兴拖动东西而不必求助于javascript

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T09:38:15.300

如果没有 javascript，将无法拖动元素，您的值“可拖动”例如 class 属性只需要您的 javascript 来指示此元素是可拖动的。

# c++ - 带有“空类”的 C++ 多继承内存布局

> ID：11048045
> 
> 赞同：8
> 
> 时间：2012-06-15T09:29:43.913
> 
> 标签：c++, multiple-inheritance, memory-alignment

我知道多重继承的内存布局没有定义，所以我不应该依赖它。但是，我可以在特殊情况下依赖它吗？也就是说，一个类只有一个“真正的”超类。所有其他都是“空类”，即既没有字段也没有虚拟方法的类（即它们只有非虚拟方法）。在这种情况下，这些额外的类不应向类的内存布局添加任何内容。（更简洁地说，在 C++11 的措辞中，该类具有*standard-layout*）

我可以推断所有超类都没有偏移吗？例如：

```
#include <iostream>

class X{

    int a;
    int b;
};

class I{};

class J{};

class Y : public I, public X,  public J{};

int main(){

    Y* y = new Y();
    X* x = y;
    I* i = y;
    J* j = y;

    std::cout << sizeof(Y) << std::endl 
                  << y << std::endl 
                  << x << std::endl 
                  << i << std::endl 
                  << j << std::endl;
} 
```

这里，`Y`是`X`唯一真正基类的类。程序的输出（在linux上用g++4.6编译时）如下：

> 8
> 
> 0x233f010
> 
> 0x233f010
> 
> 0x233f010
> 
> 0x233f010

正如我得出的结论，没有指针调整。但是这个实现是特定的还是我可以依赖它。即，如果我收到一个类型的对象`I`（并且我知道只存在这些类），我可以使用 a`reinterpret_cast`将其转换为`X`吗？

我希望我可以依赖它，因为规范说对象的大小必须至少是一个字节。因此，编译器无法选择其他布局。如果它在 的成员后面进行布局`I`，那么它们的大小将为零（因为它们没有成员）。因此，唯一合理的选择是对齐所有超类而不偏移。`J``X`

`I`如果我从这里使用 reinterpret_cast ，我是正确的还是在玩火`X`？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-15T11:02:31.960

In C++11 the compiler is required to use the Empty Base-class Optimization for *standard layout* types. see [https://stackoverflow.com/a/10789707/981959](https://stackoverflow.com/a/10789707/981959)

For your specific example all the types are standard layout classes and don't have common base classes or members (see below) so you can rely on that behaviour **in C++11** (and in practice, I think many compilers already followed that rule, certainly G++ did, and others following the [Itanium C++ ABI](http://sourcery.mentor.com/public/cxx-abi/abi.html).)

A caveat: make sure you don't have any base classes of the same type, because they must be at distinct addresses, e.g.

```
struct I {};

struct J : I {};
struct K : I { };

struct X { int i; };

struct Y : J, K, X { };

#include <iostream>

Y y;

int main()
{
  std::cout << &y << ' ' << &y.i << ' ' << (X*)&y << ' ' << (I*)(J*)&y << ' ' << (I*)(K*)&y << '\n';

} 
```

prints:

```
0x600d60 0x600d60 0x600d60 0x600d60 0x600d61 
```

For the type `Y` only one of the `I` bases can be at offset zero, so although the `X` sub-object is at offset zero (i.e. `offsetof(Y, i)` is zero) and one of the `I` bases is at the same address, but the other `I` base is (at least with G++ and Clang++) one byte into the object, so if you got an `I*` you couldn't `reinterpret_cast` to `X*` because you wouldn't know *which* `I` sub-object it pointed to, the `I` at offset 0 or the `I` at offset 1.

It's OK for the compiler to put the second `I` sub-object at offset 1 (i.e. *inside* the `int`) because `I` has no non-static data members, so you can't actually dereference or access anything at that address, only get a pointer to the object at that address. If you added non-static data members to `I` then `Y` would no longer be standard layout and would not have to use the EBO, and `offsetof(Y, i)` would no longer be zero.

# asp.net - 如何从 Asp.net WebApi RC 返回任意 json 对象？

> ID：11048049
> 
> 赞同：1
> 
> 时间：2012-06-15T09:30:09.457
> 
> 标签：asp.net, asp.net-mvc-4, asp.net-web-api

在我有这段代码返回一个只有一个 id 属性的任意 json 对象之前。既然不支持 HttpResponseMessage 并且它现在使用 Newtonsofts JSON.NET，如何将其转换为新的 RC 版本的 WebApi？

```
public HttpResponseMessage<JsonValue> Post(MyModel model)
{
            var id = _theService.AddEntity(model);
            dynamic okResponse = new JsonObject();
            okResponse["id"] = id;
            return new CreateResponse<JsonValue>(okResponse);
} 
```

和...

```
public class CreateResponse<T> : ResponseBase<T>
    {
        public CreateResponse()
            : base(HttpStatusCode.Created)
        {
        }

        public CreateResponse(T resource)
            : base(resource, HttpStatusCode.Created)
        {
        }
    }

 public abstract class ResponseBase<T> : HttpResponseMessage<T>
    {
        protected ResponseBase(HttpStatusCode httpStatusCode)
            : base(httpStatusCode)
        {
        }

        protected ResponseBase(T resource, HttpStatusCode httpStatusCode)
            : base(resource, httpStatusCode)
        {

            if (resource is IApiResource)
            {
                var apiResource = resource as IApiResource;
                var resourceLocation = new ResourceLocation();
                apiResource.SetLocation(resourceLocation);
                Headers.Location = resourceLocation.Location;
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T10:52:38.730

CreateResponse 扩展方法不接受动态变量。

请更换

```
dynamic okResponse = new JsonObject(); 
```

类似于

```
var okResponse = new JsonObject(); 
```

另请参阅此链接： [https ://aspnetwebstack.codeplex.com/discussions/359242](https://aspnetwebstack.codeplex.com/discussions/359242)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T14:22:54.413

`Request.CreateResponse(statuscode, content)`在控制器内部使用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T01:11:50.383

也许我在你的问题中遗漏了一些东西，但你可以这样做：

```
public dynamic Post(MyModel model)
{
            var id = _theService.AddEntity(model);

            return new { id = id };
} 
```

编辑：假设您的客户将 Content-type 设置为 application/json

# android - Android - 如何缩短 Wifi 和移动网络之间的故障转移延迟？

> ID：11048051
> 
> 赞同：3
> 
> 时间：2012-06-15T09:30:12.963
> 
> 标签：android, mobile, wifi, delay, failover

我制作了一个不断通过 Internet 通信的 Android 4.0.3 应用程序。通过 WiFi 或移动网络，如果前者以某种方式不可用。问题是，如果需要从 wifi 切换到 wifi，或者只是从 wifi 切换到移动网络，故障转移会导致 3-4 秒的离线时间。

有没有办法让延迟更短？wifi运行时是否可以以某种方式保持移动网络连接？我读过Android被编程为在wifi启动时断开任何移动连接。如果是这样的话，每次wifi断线，Android都要从头开始移动网络，这需要时间。

谢谢。

# jquery - 选项卡时更新表单数据选择框

> ID：11048056
> 
> 赞同：0
> 
> 时间：2012-06-15T09:30:36.803
> 
> 标签：jquery, select, dynamic

我目前正在使用以下代码在提交之前更新表单数据。

```
 $('.countyx').change(function(){
            var d=$(this).val();
            $('.countyq').text(d);
        }); 
```

如果用户使用鼠标选择任何更改，这将正常工作，但是，如果用户使用箭头键导航复选框，则未注册“更改”。显然 keyup 处理程序可以工作，但是有没有办法以一种简洁、轻量级的方式同时实现两个处理程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T09:33:59.633

```
var fn_count = function() {$('.countyq').text($('.countyx').val());}
$('.countyx').change(fn_count).keyup(fn_count); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T09:36:35.380

要保持示例中的范围：

```
$('.countyx').change(function() {
    $('.countyq').text($(this).val());
}).keyup(function () { $(this).change(); }); 
```

# php - PHP Scandir 返回额外的句点

> ID：11048057
> 
> 赞同：3
> 
> 时间：2012-06-15T09:30:39.020
> 
> 标签：php, scandir

所以我正在尝试构建一个扫描目录并返回随机图像用作背景的脚本。

php 看起来像这样：

```
$dir = "views/img/bg/";
$dh  = opendir($dir);
while (false !== ($filename = readdir($dh))) {
    $files[] = $filename;
}

$random_key = array_rand($files, 1);

$random = $files[$random_key]; 
```

然后我只是使用一些简单的 jquery 将图像附加为背景：

```
<script>
$(document).ready(function(){

    $("body").css( "background" , "url(http://'.$url_root.'/views/img/bg/'.$random.'), center center" );

});
</script> 
```

一切正常，但背景文件夹中所有图像的数组似乎正在返回“。”之类的东西。或“..”而不是每隔一段时间的图像名称。我不确定发生了什么 - 有什么想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T09:34:47.990

使用`glob()`以便您可以过滤文件。

```
$files = glob('views/img/bg/*.jpg');
$random = $files[array_rand($files)]; 
```

由于您指定`*.jpg`,`$files`仅包含 JPG 文件，因此您不需要删除`.`和`..`项目。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-15T09:33:25.370

'。' 并为当前目录和父目录返回“..”。您可以过滤它们：

```
while (false !== ($filename = readdir($dh))) {
    if ($filename != '.' && $filename != '..')    
        $files[] = $filename;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-06T17:07:30.863

为什么不使用正则表达式？这样它就可以捕获任意数量的周期。（即“.”、“..”、“...”等）

```
while (false !== ($filename = readdir($dh))) {
        if(!preg_match('/^\.*$/',$filename)){
            $files[] = $filename;
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-28T11:04:16.873

```
$dh = opendir("c:\");
while (false !== ($filename = readdir($dh))) {
    if ($filename != '.' && $filename != '..')    
       $files[] = $filename;
} 
```

# c# - 如何从其用户控件视图模型中关闭窗口？

> ID：11048061
> 
> 赞同：5
> 
> 时间：2012-06-15T09:30:55.587
> 
> 标签：c#, wpf, user-controls, viewmodel, datacontext

我有一个窗口，它将各种用户控件作为页面托管。是否可以从用户控件的数据上下文中关闭我没有参考的窗口？简化细节：

设置窗口

```
 public SetupWindow()
    {
        InitializeComponent();
        Switcher.SetupWindow = this;
        Switcher.Switch(new SetupStart());  
    }

    public void Navigate(UserControl nextPage)
    {
        this.Content = nextPage;
    } 
```

SetupStart 用户控制

```
<UserControl x:Class="...">
 <UserControl.DataContext>
    <local:SetupStartViewModel/>
 </UserControl.DataContext>
 <Grid>
    <Button Content="Continue" Command="{Binding ContinueCommand}"/>
 </Grid>
</UserControl> 
```

设置StartViewModel

```
 public SetupStartViewModel()
    {
    }

    private bool canContinueCommandExecute() { return true; }

    private void continueCommandExectue()
    {
        Switcher.Switch(new SetupFinish());
    }

    public ICommand ContinueCommand
    {
        get { return new RelayCommand(continueCommandExectue, canContinueCommandExecute); }
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T13:30:38.727

我设法从这里的答案中找到了解决方案：[如何将关闭命令绑定到按钮](https://stackoverflow.com/questions/1065887/how-to-bind-close-command-to-a-button)

视图模型：

```
public ICommand CloseCommand
{
    get { return new RelayCommand<object>((o) => ((Window)o).Close(), (o) => true); }
} 
```

看法：

```
<Button Command="{Binding CloseCommand}" CommandParameter="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}" Content="Close"/> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-15T10:00:44.273

我通过`RequestClose`在我的 ViewModel 中有一个事件来做到这一点，当它想要关闭视图时它可以引发该事件。

`Close()`然后通过创建窗口的代码将其连接到窗口的命令。例如

```
var window    = new Window();
var viewModel = new MyViewModel();

window.Content = viewModel;
viewModel.RequestClose += window.Close;

window.Show() 
```

这样，与窗口创建有关的所有事情都在一个地方处理。视图或视图模型都不知道窗口。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-15T09:33:28.587

在您的用户控件中，您可以使用 Window 类上的静态方法找到对托管它的窗口的引用。

```
var targetWindow = Window.GetWindow(this);
targetWindow.Close(); 
```

**编辑：**

如果您没有参考正在使用数据上下文的用户控件，那么您没有大量选项，如果只有 1 个应用程序窗口，您可以逃脱

```
Application.Current.MainWindow.Close() 
```

如果您的应用程序中有很多窗口并且您要关闭的窗口处于焦点位置，您可以通过类似的方式找到它

```
public Window GetFocusWindow()
{
    Window results = null;
    for (int i = 0; i < Application.Current.Windows.Count; i ++)
        if (Application.Current.Windows[i].IsFocused)
        {
            results = Application.Current.Windows[i];
            break;
        }
    return results;
} 
```

最后我猜想（虽然这很好）你可以遍历应用程序窗口类，检查可视化树中每个对象的数据上下文，直到找到你想要的引用，窗口可以从那里关闭。

# c# - 使用蓝牙将 ASCII 从 C# 发送到 Arduino

> ID：11048062
> 
> 赞同：2
> 
> 时间：2012-06-15T09:30:57.643
> 
> 标签：c#, bluetooth, arduino

我正在尝试将我的 C# [Windows Forms](http://en.wikipedia.org/wiki/Windows_Forms)应用程序从我的笔记本电脑连接到 Arduino [Duemilanove](http://arduino.cc/en/Main/ArduinoBoardDuemilanove)。蓝牙模块连接到 Arduino 上的 Tx 和 Rx 引脚。我的目标是在我输入字母“a”时点亮板载 LED，但到目前为止还没有成功。我确定蓝牙已与我的笔记本电脑连接，但它没有响应我按下的字母。

### C# 代码

```
public partial class Form1 : Form
{
    private Guid service = BluetoothService.SerialPort;
    private BluetoothClient bluetoothClient;

    public Form1()
    {
        InitializeComponent();

        this.KeyPreview = true;
        this.KeyPress += new KeyPressEventHandler(Form1_KeyPress);
    }

    void Form1_KeyPress(object sender, KeyPressEventArgs e)
    {
        if (e.KeyChar == 'a')
        {
            Stream peerStream = bluetoothClient.GetStream();
            Byte[] buffer = Encoding.ASCII.GetBytes("a");
            peerStream.Write(buffer, 0, buffer.Length);
        }
    }

    private void search_Click(object sender, EventArgs e)
    {
        BluetoothRadio.PrimaryRadio.Mode = RadioMode.Discoverable;
        BluetoothRadio myRadio = BluetoothRadio.PrimaryRadio;
        bluetoothClient = new BluetoothClient();
        Cursor.Current = Cursors.WaitCursor;
        BluetoothDeviceInfo[] bluetoothDeviceInfo = { };
        bluetoothDeviceInfo = bluetoothClient.DiscoverDevices(10);
        comboBox1.DataSource = bluetoothDeviceInfo;
        comboBox1.DisplayMember = "DeviceName";
        comboBox1.ValueMember = "DeviceAddress";
        comboBox1.Focus();
        Cursor.Current = Cursors.Default;
    }

    private void Connect_Click(object sender, EventArgs e)
    {
        if (comboBox1.SelectedValue != null)
        {
            try
            {
                bluetoothClient.Connect(new BluetoothEndPoint((BluetoothAddress)comboBox1.SelectedValue, service));
                MessageBox.Show("Connected");

            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.Message);
            }
        }
    }
} 
```

### Arduino代码

```
int incomingByte = 0;   // For incoming serial data
void setup()
{
    pinMode(13, OUTPUT); // On-board LED as output
    Serial.begin(9600);     // Opens serial port, sets data rate to 9600 bit/s.
}

void loop()
{
    if (Serial.available() > 0)
    {
        // Read the incoming byte:
        incomingByte = Serial.read();

        if (incomingByte == 'a')
            digitalWrite(13, HIGH);
    }
} 
```

我是否错误地发送了 ASCII 码或者我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T17:28:18.987

可能与我[在这里](https://stackoverflow.com/q/10902704/1440715)回答的问题相同。

> 我最近涉足这个。当 Arduino 接收到来自 Arduino IDE 以外的大多数设备的串行通信时，它会自动重置。这就是为什么您可以从 IDE 发送但不能从 node.js 发送的原因。
> 
> 我有一个 Uno，并在 Reset 和 Ground 之间放置了一个电容器。这是一个包含有关该主题的一些很好信息的页面。祝你好运。 [http://arduino.cc/playground/Main/DisablingAutoResetOnSerialConnection](http://arduino.cc/playground/Main/DisablingAutoResetOnSerialConnection)

# ruby-on-rails - Rails 中的路由使用户名成为 URL：

> ID：11048063
> 
> 赞同：1
> 
> 时间：2012-06-15T09:30:58.183
> 
> 标签：ruby-on-rails, routing, controllers

在我的 Rails 应用程序中有设备模型 - 用户和注册表模型（每个用户都有一个注册表）。

我想改变我的路线，而不是：

“http://localhost:3000/registries/3”

表明：

“http://localhost:3000/erinwalker”

所以我改变了路线

```
match '/:name' => "registries#show" 
```

我的控制器中的显示动作：

```
def show
@user = current_user
@user = User.find_by_name!(params[:name])
@registry = @user.registry 
```

它可以工作，但是当我现在首先创建或更新注册表时，它会说：

```
Couldn't find User with name = 
app/controllers/registries_controller.rb:21:in `show' 
```

即使表演动作有效？

注册表控制器：class RegistriesController < ApplicationController before_filter :authenticate_user!, :except => :show load_and_authorize_resource

```
# GET /registries
# GET /registries.json
def index
@registries = Registry.all
@user = current_user
respond_to do |format|
  format.html # index.html.erb
  format.json { render json: @registries }
end
end

# GET /registries/1
# GET /registries/1.json
def show
@user = current_user
@user = User.find_by_name!(params[:name])
@registry = @user.registry

respond_to do |format|
  format.html # show.html.erb
  format.json { render json: @registry }
end
end

# GET /registries/new
# GET /registries/new.json
def new
@registry = Registry.new
@user = current_user

respond_to do |format|
  format.html # new.html.erb
  format.json { render json: @registry }
end
end

# GET /registries/1/edit
def edit
@registry = Registry.find(params[:id])
@user = current_user
end

# POST /registries
# POST /registries.json
def create
@registry = current_user.build_registry(params[:registry])
@user = current_user

respond_to do |format|
  if @registry.save
    format.html { redirect_to @registry, notice: 'Registry was successfully created.' }
    format.json { render json: @registry, status: :created, location: @registry }
  else
    format.html { render action: "new" }
    format.json { render json: @registry.errors, status: :unprocessable_entity }
  end
end
end

# PUT /registries/1
# PUT /registries/1.json
def update
@registry = Registry.find(params[:id])
@user = current_user

respond_to do |format|
  if @registry.update_attributes(params[:registry])
    format.html { redirect_to @registry, notice: 'Registry was successfully updated.' }
    format.json { head :no_content }
  else
    format.html { render action: "edit" }
    format.json { render json: @registry.errors, status: :unprocessable_entity }
  end
end
end 
```

我所有的路线：

```
Mystorkparty::Application.routes.draw do  

devise_for :users

resources :registries

root :to => "static_pages#home"

match '/home',    to: 'static_pages#home'

match '/:name' => "registries#show" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T11:19:27.030

When you create or update your models, you send `POST /registries` or `PUT /registries/1`.

But `/registries` is matched by your last rule `match '/:name' => "registries#show"`, so the request hits the `show` action.

If you run `rake routes` you should see something like this:

```
 POST   /registries(.:format)                 registries#create
                PUT    /registries/:id(.:format)             registries#update
                DELETE /registries/:id(.:format)             registries#destroy
                       /:name(.:format)                      registries#show 
```

You can add `method` parameter to your route, so that it will `hit` `show` only on `GET` request.

```
match '/:name' => "registries#show", :via => :get 
```

But there are still can be collisions in the future. For example, if you have registry name `users`. So, it's commonly suggested to use prefixes (`match '/r/:name'`) or define set of allowed names, or choose safe names for registries.

P.S. I don't think `load_and_authorize_resource` will work for your `show` action by default. Because it expects params[:id] to load the resource automatically.

# android - 在 Android 上模拟鼠标

> ID：11048064
> 
> 赞同：3
> 
> 时间：2012-06-15T09:31:01.453
> 
> 标签：android, mouse, root

Android 支持鼠标，我想知道我是否可以通过服务/应用程序控制“虚拟鼠标”。我做了很多研究，但出于明显的安全原因，我认为 sdk 没有提供任何我可以使用的东西。我想知道是否有人可以提示我如何使用 root 权限来实现这一点。如果 android 手机可以运行 VNC 服务器，这应该也是可能的，不是吗？我想将电脑鼠标的移动发送到手机。如果您连接蓝牙鼠标，则应显示光标。

谢谢

# ruby-on-rails-3 - Heroku 应用程序崩溃（错误 H10）

> ID：11048067
> 
> 赞同：0
> 
> 时间：2012-06-15T09:31:12.620
> 
> 标签：ruby-on-rails-3, deployment, heroku, crash

我有一个在 rails 3.2.2 上运行并使用 postgres 的应用程序，我之前已经将它部署到我的 heroku 服务器上并且效果很好。

在我上次的部署中，我没有在部署描述中看到任何错误，但是当我访问该应用程序时，我发现它已关闭。

所以我跑了

```
heroku logs --app my_app_name 
```

这就是我得到的： [https ://gist.github.com/2935603](https://gist.github.com/2935603)

我不知道是什么问题。

谢谢关心！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T09:48:47.863

检查[http://status.heroku.com](http://status.heroku.com) - 该平台当前存在问题。

# asp.net - 将下拉值获取到中继器项命令中

> ID：11048068
> 
> 赞同：0
> 
> 时间：2012-06-15T09:31:23.290
> 
> 标签：asp.net, delegates, repeater

我的中继器是使用委托`itemdatabound`调用的。`oninit()`现在，当我调用`item`中继器的命令时，它将调用`OnInit`事件。我在中继器中有一个下拉框。该下拉菜单将绑定到`itemdatabound`. 因此，当我从下拉列表中选择任何值并单击提交时，它将再次调用项目`databound`并再次选择索引`0`。所以我无法将下拉选择的值放入`itemcommand`.

```
private void InitializeComponent() {
    this.dgFixedOddsBetList.ItemDataBound += new RepeaterItemEventHandler(this.Repeater1_ItemDataBound); 
    } 
protected override void OnInit(EventArgs e) {
    this.InitializeComponent();
    base.OnInit(e); 
} 
```

# r - 在R中返回距离矩阵的两半

> ID：11048075
> 
> 赞同：1
> 
> 时间：2012-06-15T09:32:05.200
> 
> 标签：r, matrix, distance

我有一个外部距离对象 ( `gdis`)，需要将其转换为包含距离矩阵两半的矩阵。我目前正在使用打印功能来实现这一点。每次运行脚本时都必须打印出整个矩阵是相当笨重的。有没有办法避免这种情况？

```
wgdis<-print(gdis, upper=TRUE) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T10:05:45.630

```
m <- matrix(rpois(50,5), nrow=5)
m2 <- dist(m)
attr(m2, "Upper") <- TRUE
m2
          1         2         3         4         5
1           12.083046 11.135529 11.958261 12.529964
2 12.083046            6.928203 10.148892  8.062258
3 11.135529  6.928203            8.660254  9.643651
4 11.958261 10.148892  8.660254           14.491377
5 12.529964  8.062258  9.643651 14.491377 
```

# php - 去除尾随非单词字符

> ID：11048077
> 
> 赞同：2
> 
> 时间：2012-06-15T09:32:06.403
> 
> 标签：php, regex, pcre

我需要使用 PHP 的 preg_replace 从字符串末尾删除任何非字母数字字符：

`Word One, Two, -`, `Word One, Two,[space]`, `Word One, Two,`,`Word One, Two`都应该变成`Word One, Two`.

我试过`preg_replace('/(.+)\\W+$/', '$1', 'Word One, Two, -');`了，但这只会去掉最后一个非单词字符。我也尝试过`'/(.+)\\W*$/'`，因为我认为如果找到 0 或 1 个非单词字符（如我需要），这将使它工作，但它根本不匹配。我想我需要使`\W`贪婪，但我不知道如何。有任何想法吗？另外，请随时向我解释我做错了什么，这样我就不会发现自己困扰着 SO 正则表达式标签 ;-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T09:34:18.063

这是因为`(.+)`吞噬了所有其他字符，包括非单词字符。正则表达式引擎开始匹配字符串，并从捕获组中的*所有字符开始。*只有这样，它才会注意到`\W`字符串末尾的 不适合并备份，暂时允许单个字符与`\W`. 但是单个字符就可以满足`\W+`, 所以它只是停止并删除该单个字符。这也是为什么`(.+)\W*$`根本不起作用的原因，因为根本不`\W*`匹配任何内容。

采用

```
preg_replace('/\\W+$/', '', $foo); 
```

反而。这通过仅替换尾随的非单词字符而无需尝试匹配其他内容来避免该问题。

另一种选择是

```
preg_replace('/(.+?)\\W+$/', '$1', $foo); 
```

这将对捕获组使用*惰性*量词 ( `+?`)。*这个量词在尽可能少地*匹配的同时尝试满足匹配（与我们在上面看到*的尽可能多*`+`地匹配相反）。但一般来说，如果你能避免的话，我会避免自己更换部分比赛。要从字符串中删除内容，您当然不需要匹配更多内容。

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T09:33:59.107

您的正则表达式正在做的是寻找任何字符的最大可能数量，同时仍然在最后保留至少一个非单词。

您需要做的只是删除`(.+)`, 并使用：

```
preg_replace("/\W+$/","",$input); 
```*

# python - 如何将这些命令集成到 python 中？

> ID：11048081
> 
> 赞同：0
> 
> 时间：2012-06-15T09:32:29.143
> 
> 标签：python, linux

我有三个命令，我可以在终端中使用它们。喜欢：`

```
cd /home/john

hbatch john_v001.hip

render /out/john -f 1 10 -i 3` 
```

如何使用 python 脚本在终端中执行此操作？喜欢类型 -> `r john -f 1 10 -i 3` 非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T09:37:07.250

使用[subprocess](http://docs.python.org/library/subprocess.html#module-subprocess)调用您的外部进程。

```
from subprocess import check_call
check_call(['hbatch', '/home/john/john_v001.hip'])
check_call(['render', '/home/john/out/john', '-f', '1', '10', '-i', '3']) 
```

# ios - 从不同的 viewController 填充 CoreData 实体

> ID：11048086
> 
> 赞同：0
> 
> 时间：2012-06-15T09:33:05.387
> 
> 标签：ios, core-data, uiviewcontroller, entity, fill

我在我的 iPad 应用程序上为我的数据库构建了一个包含不同实体的核心数据模型。我确实想从不同的视图控制器访问这些属性（并填充 dBase）。例如，viewController A 中有 UITextField，viewController 中有另一个 UITextField。我希望获取的信息能够填充来自我的核心数据实体的不同属性......

那可能吗？这样做的最佳做法是什么？

我的问题：

*   我在 viewController A 中声明了“实体”类型的对象
*   我在 viewController A 中也用捕获的文本填充了该实体的不同属性
*   我将对象（与我的实体类型相同）存储在 viewController A 的 NSMutableArray 中
*   我使用不同的方法在 viewController A 中保存和检索这个 NSMutableArray

任何帮助或建议将不胜感激！:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T09:37:34.370

这就是 MVC 的强大之处。创建一个类（MVC 的 M 的模型），负责您的数据操作 - 获取、更新、删除等...使该类成为单例类或在 AppDelegate 中添加一个属性，并接受`UIViewController`您需要的所有内容。从其他地方的视图控制器收集所有数据 - 例如。一些字典或其他东西，然后调用将插入数据的数据类的方法，当准备好时......良好的设计总是会减少实现的问题和困难，并且还可以轻松快速地对 UI 进行进一步的更改......

# .net - 如何从 HttpWebRequest 异步解析 XML？

> ID：11048087
> 
> 赞同：0
> 
> 时间：2012-06-15T09:33:06.040
> 
> 标签：.net, c#-4.0, asynchronous, task-parallel-library

我的主程序使用 Task.Factory.StartNew 运行 8 个任务

每个任务都会从 webservice 请求 XML 格式的结果，然后解析为可以使用 TVP 写入 MSSQL 的集合。

该程序有效，但使用 TPL 获得的效率不是我所期望的。在不同点使用秒表后，在我看来，这些任务相互干扰，也许一个阻塞另一个。所有数字都指向使用 HttpWebRequest 的下载部分。

在 c# 中搜索并阅读了一些关于异步编程的内容后，我尝试修改我的代码以异步运行下载部分，但结果仍然显示类似级别的阻塞，而无需使用异步编码。

我发现了 3 种编码类型以及一些指向它们的参考链接：

[如何异步使用 HttpWebRequest (.NET)？](https://stackoverflow.com/questions/202481/how-to-use-httpwebrequest-net-asynchronously) *- 当我使用此方法时，我使用下载部分方法中的自定义对象传递 XDocument*

在 C# 中使用迭代器进行异步编程 [http://tomasp.net/blog/csharp-async.aspx](http://tomasp.net/blog/csharp-async.aspx) *-string/stream 返回并在 main 方法中使用 XDocument.Load/Parse 进行解析*

下面的代码块显示了在我的代码中找到并实现的最后一个方法

启动任务的主类

```
private static void test() {
    DBReader dbReader = new DBReader();
    Dictionary<string, DateTime> jobs = dbReader.getJob();
    JobHandler jh = new JobHandler();
    Stopwatch swCharge = new Stopwatch();
    Stopwatch swDetail = new Stopwatch();
    Stopwatch swHeader = new Stopwatch();
    //more stopwatch

    Task[] tasks = new Task[] {
    Task.Factory.StartNew(() => jh.processData<RawChargeCollection, RawCharge>(jobs["RawCharge"], 15, swCharge)),
    Task.Factory.StartNew(() => jh.processData<RawDetailCollection, RawDetail>(jobs["RawDetail"], 15, swDetail)),
    Task.Factory.StartNew(() => jh.processData<RawHeaderCollection, RawHeader>(jobs["RawHeader"], 15, swHeader))
    };
    Task.WaitAll(tasks);  
} 
```

processData 方法

```
public void processData<T, S>(DateTime x, int mins, Stopwatch sw)
            where T : List<S>, new()
            where S : new() {
            DateTime start = x;
            DateTime end = x.AddMinutes(mins);
            string fromDate, toDate;
            StringBuilder str = new StringBuilder();
            XMLParser xmlParser = new XMLParser();
            DBWriter dbWriter = new DBWriter();
            while (end <= DateTime.UtcNow) {
                fromDate = String.Format("{0:yyyy'-'MM'-'dd HH':'mm':'ss}", start);
                toDate = String.Format("{0:yyyy'-'MM'-'dd HH':'mm':'ss}", end);  
                try {
                    sw.Restart();
                    WebserviceClient ws = new WebserviceClient();

                    XDocument xDoc = null;
                    var task = ws.GetRawData<S>(fromDate, toDate);    
                    xDoc = XDocument.Parse(task.Result);    
                    //show the download time    

                    sw.Restart();
                    T rawData = xmlParser.ParseXML<T, S>(xDoc);

                    if (rawData.Count != 0) {
                        sw.Restart();
                        dbWriter.writeRawData<T, S>(rawData, start, end);
                        //log success
                    }
                    else {
                        //log no data
                    }
                }
                catch (Exception e) {
                    //log fail
                }
                finally { 
                    start = start.AddMinutes(mins);
                    end = end.AddMinutes(mins);
                }
            } 
        } 
```

GetRawData 只负责构造 GetData 中使用的所需 URL。

下载数据部分：

```
private static Task<string> GetData(string param) {
            string url = String.Format("my working URL/{0}", param);
            HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
            request.MediaType = "application/xml";
            Task<WebResponse> task = Task.Factory.FromAsync(
                request.BeginGetResponse,
                asyncResult => request.EndGetResponse(asyncResult),
                (object)null);

            return task.ContinueWith(t => ReadStreamFromResponse(t.Result));
        }

    private static string ReadStreamFromResponse(WebResponse response) {
        using (Stream responseStream = response.GetResponseStream())
        using (StreamReader sr = new StreamReader(responseStream)) {
            //Need to return this response 
            string strContent = sr.ReadToEnd();
            return strContent;
        }
    } 
```

在 processData 方法中，我对从 web 服务下载所需的代码进行了计时。下载需要 400 毫秒到 100000 毫秒。正常时间在 3000ms 到 8000ms 左右。如果我只运行 1 个任务，则客户端处理时间仅比服务器处理时间稍长。

但是，在运行更多任务后，服务器上需要 450 毫秒到 3000 毫秒（或其他时间）的下载现在可能需要 8000 毫秒 -90000 毫秒，客户端才能完成下载部分。

在我的场景中，瓶颈应该在服务器端，从我的日志中它显示客户端是。

为异步编程 C# 找到的大多数文章似乎都演示了读取和处理流/字符串，没有 XML 示例。我的代码是否因为 XML 而失败？如果不是，我的代码有什么问题？

**编辑：** 是的，我的开发机器和用户/目标机器是 XP，使用 .net 4.5 或 CTP 太多了。

ServicePointManager.DefaultConnectionLimit 和 app.config connectionManagement 似乎是一回事，所以我选择 app.config ，因为它可以更改。

起初更改最大连接有很大帮助，但并没有真正解决问题。在使用 Thread.Sleep(random) 计时代码块之后，似乎“阻塞”与并发代码无关。

processData首先从webservice下载（这里需要最大连接），然后做一些小映射，最后写入DB，写入DB永远不会超过1秒，与下载相比什么都没有，但是在添加最大连接到DB之后（相同号码作为网络服务）突然之间没有任何等待。

所以与数据库的最大连接也很重要。但我不明白为什么用 150-600 毫秒写入数据库会导致等待超过 20 秒。

甚至让我感到困惑的是等待时间是在下载块中，而不是在写入 DB 块中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T09:52:47.383

我会回到更简单的形式，至少对于调试来说，它们都是“正常”/同步代码。由于您将在最坏的情况下不必要地阻塞 8 个线程，因此我认为这不是什么大不了的事。

我想你要打的是限制并发请求数量的默认行为。

从这个相关的SO线程......

[最大并发 HttpWebRequest 数](https://stackoverflow.com/questions/1361771/max-number-of-concurrent-httpwebrequests)

...您可能想看看 Jon Skeet 所指的 connectionManagement 元素：

[http://msdn.microsoft.com/en-us/library/fb6y0fyc.aspx](http://msdn.microsoft.com/en-us/library/fb6y0fyc.aspx)

> connectionManagement 元素定义到一个服务器或一组服务器的最大连接数。

此外，Jon 建议仅用 Thread.Sleep 替换 http 调用以查看并发性是否受到影响，这一点非常棒。如果您的 8 个任务都可以执行并行 Thread.Sleep 调用，那么您的问题不是“顶级”并发，而是它们正在执行的限制（如默认并发连接限制）。

# android - ksoap2 上传 xs:base64Binary 参数

> ID：11048093
> 
> 赞同：0
> 
> 时间：2012-06-15T09:33:22.967
> 
> 标签：android, ksoap2, android-ksoap2

我想通过 .NET 网络服务将用相机拍摄的照片上传到服务器。

Webservice 以字节数组（byte[]）为参数。在 xsd 文件中看起来像这样：

```
<xs:element name="Upload">
    <xs:complexType>
        <xs:sequence>
          <xs:element minOccurs="0" name="path" nillable="true" type="xs:base64Binary"/>
          <xs:element minOccurs="0" name="imagename" nillable="true" type="xs:string"/>
        </xs:sequence>
    </xs:complexType>
</xs:element> 
```

上传代码

```
 Bitmap bitmap = BitmapFactory.decodeFile(filePath);
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    bitmap.compress(Bitmap.CompressFormat.JPEG, 60, baos);
    byte[] imageBytes = baos.toByteArray();

    SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
            SoapEnvelope.VER11);
    envelope.dotNet = true;

    new MarshalBase64().register(envelope); // serialization
    envelope.encodingStyle = SoapEnvelope.ENC;

    request.addProperty("imagename", fileName);
    request.addProperty("path", imageBytes);
    envelope.setOutputSoapObject(request);

    HttpTransportSE androidHttpTransport = new HttpTransportSE(
            WEBSERVICE_URL);

    try {
        androidHttpTransport.call(SOAP_ACTION, envelope);
        Object resultsRequestSOAP2 = envelope.getResponse();
        result = resultsRequestSOAP2.toString();

    } catch (Exception e) {
        Log.e(TAG, e.getMessage());
        e.printStackTrace();
    } 
```

我看起来像是在上传，但是上面的代码会引发异常：

```
SoapFault - faultcode: 'a:InternalServiceFault' faultstring: 'Buffer cannot be null.
Parameter name: buffer' faultactor: 'null' detail: org.kxml2.kdom.Node@44c50c50 
```

有什么问题？我使用网络服务的方式或问题出在网络服务中？一些建议如何上传字节数组？

感谢所有回复。

# git - git从过去的合并中获取冲突而不再次运行合并

> ID：11048094
> 
> 赞同：14
> 
> 时间：2012-06-15T09:33:24.757
> 
> 标签：git, merge

我已经合并了两个分支。有很多冲突。都解决了。现在我不确定，也许我在解决冲突期间犯了错误。而且我认为没有其他方法可以检查它是否属实——只需再次运行合并，并逐个检查冲突。

这意味着我需要再创建一个分支来存储我的合并结果，对吧？

我可以避免吗？也许可以从git中的某个地方获取所有这些冲突的文件`<<<<<<`，而无需再次运行合并？`======``>>>>>>`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T22:36:04.783

如果你想看看合并做了什么，你可以做什么

```
git show <hash-of-merge-commit> 
```

如果你想重做整个合并你做

```
git checkout <branch-that-you-merged-to>
git reset --hard <hash-of-the-commit-just-before-the-merge>
git merge <branch-that-you-merged-in> 
```

如果您想重做合并，然后将第二次合并与第一次合并进行比较（考虑是否更好），您可以执行以下操作：

```
git checkout <branch-that-you-merged-to>
git rev-parse HEAD 
```

这为您提供了当前提交的哈希值。记下来。然后做

```
git reset --hard <hash-of-the-commit-just-before-the-merge>
git merge <branch-that-you-merged-in> 
```

完成合并，然后执行此操作以比较合并

```
git difftool <hash-of-commit-noted-above> 
```

如果你觉得原来的合并更好，你可以做

```
git reset --hard <hash-of-commit-noted-above> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T23:53:40.767

是的，这是微不足道的。首先，您需要使用 .找到合并提交的 sha1 id `git log`。当您执行以下操作时：

```
git checkout <sha1>^1
git merge <sha1>^2 
```

你将处于无头状态。`^n`表示提交的第 n 个父级。因此，没有创建分支。您可以更仔细地再次解决冲突，然后

```
git diff HEAD..<sha1> 
```

查看冲突解决方案是否有任何差异。

顺便说一句，在 git 中分支只是提交的 sha1 的一个人类友好的名称，所以不要害怕尽可能多地创建它们。

PS：如果你在 Windows 下工作，`^`命令行中的符号是特殊的，你需要将它加倍或引用命令行参数。

# php - MYSQL 选择连接、排序和空值

> ID：11048103
> 
> 赞同：1
> 
> 时间：2012-06-15T09:33:51.703
> 
> 标签：php, mysql, select, join

我有两张桌子。

```
Table 1.
========
id
post
--------

Table 2.
========
id
post_id
thumbs_sum
-------- 
```

查询看起来像：

```
SELECT DISTINCT(t2.id), t2.sum, t1.id
FROM table1 t
    LEFT JOIN table2 t2 ON t2.post_id = t1.id
ORDER BY t2.sum DESC 
```

例如，我们有 5 个帖子（总和 - 赞许的总和）：

```
1\. sum = 3
2\. sum = 1
3\. sum = 5
4\. sum = null
5\. sum = -2 
```

第 4 个帖子在表 2 中没有任何记录，这就是为什么我的查询返回下一个：

```
1\. sum = 5
2\. sum = 3
3\. sum = 1
4\. sum = -2
5\. sum = null 
```

如果我无法更改数据库表的结构并在 PHP 中对结果进行排序，如何确定这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T09:43:06.560

如果要将`NULL`值转换为排序中的数字 0，则必须像这样增强`ORDER BY`子句：

```
ORDER BY IFNULL(t2.sum, 0) DESC 
```

请记住，这种方法会阻止 MySQL 使用可能的索引。因此订购数千条记录可能会很慢。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T09:43:22.857

我试图弄清楚这里的实际问题是什么。“如何决定这个问题”有点深奥。

无论如何，我认为，这里的问题是我们将`null`值作为没有投票的帖子的拇指总和。当我们订购它们时，我们可能想用零替换空值。

```
SELECT DISTINCT(t2.id), t2.sum, t1.id
FROM table1 t
    LEFT JOIN table2 t2 ON t2.post_id = t1.id
ORDER BY IFNULL(t2.sum, 0) DESC 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-15T09:53:48.810

根据数据量，选择 distinct 可能需要更长的时间才能返回，您最好使用“group by t2.id”，例如，在可能的情况下，结果将相同但会更快。还研究索引表以提高性能。

回答你的问题，我会用

```
order by ifnull(t2.sum, 0) DESC 
```

您的另一个选择是在数据库表设计中将默认值设置为零，这样这永远不会成为问题；）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-15T09:53:03.943

你为什么不使用[COALESCE](http://www.roseindia.net/sql/mysql-example/mysql-coalesce.shtml)？

```
SELECT DISTINCT(t2.id), COALESCE(t2.sum, 0), t1.id
FROM table1 t
    LEFT JOIN table2 t2 ON t2.post_id = t1.id
ORDER BY t2.sum DESC 
```

该函数将获得第一个非空值。

# c# - 活动记录（审计跟踪）的设计模式

> ID：11048106
> 
> 赞同：4
> 
> 时间：2012-06-15T09:34:05.597
> 
> 标签：c#, vb.net, oop, design-patterns, xml-serialization

我有一个允许人们编辑数据库中的数据的 winform，为了简化事情，假设数据库中有一个 Customer 表，其中包含 3 个字段 - 名称、城市、国家。通过 winform(s) 人们可以添加/编辑/删除客户。

对于这些操作中的每一个，我们需要保存：

1.  字段名称是什么（在这种情况下为名称、城市、国家）

2.  字段值在修改之前是什么

3.  修改后的字段值是什么。

如果操作是添加或删除，则 2 和 3 将相同。

我已经使用 XMLSerialisation 实现了这个（但没有使用任何设计模式），我的 XML 输出看起来像这样。

```
<?xml version="1.0" encoding="utf-8"?>
<ActivityItem xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <UserID>26</UserID>
  <FormTitle>frmCustomer</FormTitle>
  <Action>Edit</Action>
  <Area>Customers</Area>
  <TrackedActivity>
    <FieldNames>
      <string>Name</string>
      <string>City</string>
      <string>Country</string>
    </FieldNames>
    <PreValues>
      <string>CompA</string>
      <string>London</string>
      <string>UK</string>
    </PreValues>
    <PostValues>
      <string>CompB</string>
      <string>Manchester</string>
      <string>UK</string>
    </PostValues>
  </TrackedActivity>
  <DateTimeStamp>2012-06-15T10:16:18</DateTimeStamp>
</ActivityItem> 
```

该解决方案可以处理具有不同数量字段的系统的不同区域（例如，当您修改产品时，同样的事情会起作用）。

我的问题是，是否有一个定义明确的设计模式来处理这种行为？

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T03:43:43.067

我会做什么......制作几个课程。有一个“审计日志”的东西收集了一堆“审计记录”的东西。每个审计记录都是**Edit**或**Delete**，并包含已更改的记录和对象的旧值（如果适用）。

好的，因为将涉及多种对象类型（客户、产品、...），这对我来说意味着这些类型应该是通用的。

这让我想到：

```
public class AuditLog<T>
{
    public int UserID   { get; set; }
    public string LastSaved   { get; set;}

    [XmlArrayItem("Entry")]
    public List<AuditRecord<T>> Records;
}

public enum Flavor
{
    Edit,
    Delete
}

public class AuditRecord<T>
{
    public AuditRecord() { Stamp = DateTime.Now; }

    [XmlAttribute("action")]
    public Flavor Action  { get; set;}

    [XmlAttribute("stamp")]
    public DateTime Stamp   { get; set;}

    public T Before;
    public T After; // maybe null
} 
```

然后像这样的课程

```
public class Customer
{
    public string Name   { get; set; }
    public string City   { get; set; }
    public String Country   { get; set; }
} 
```

...你会得到这样的文件：

```
<AuditLogOfCustomer>
  <UserID>0</UserID>
  <LastSaved>2012 Jun 16 20:42:53</LastSaved>
  <Records>
    <Entry action="Edit" stamp="2012-06-16T20:42:52.9622344-07:00">
      <Before>
        <Name>Sheldon</Name>
        <City>Ipswich</City>
        <Country>UK</Country>
      </Before>
      <After>
        <Name>Sheldon</Name>
        <City>London</City>
        <Country>UK</Country>
      </After>
    </Entry>
    <Entry action="Delete" stamp="2012-06-16T20:42:52.9642345-07:00">
      <Before>
        <Name>Sheldon</Name>
        <City>London</City>
        <Country>UK</Country>
      </Before>
    </Entry>
  </Records>
</AuditLogOfCustomer> 
```

代码： http: [//pastebin.com/PKiEefnX](http://pastebin.com/PKiEefnX)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T05:41:06.063

我还没有听说过一个特定的设计模式做你在这里描述的事情，但我会称之为**离线可更新数据库快照**。

如果我正确阅读了您的描述，您将描述**[dotnet 数据集](http://msdn.microsoft.com/en-us/library/system.data.dataset%28v=vs.71%29.aspx)**自 dotnet 1.0 以来在做什么，并且仍在使用 vs2010/dotnet 4.0，但不再由微软推广。

*   您有每个对象类型的数据表（在您的示例客户中）
*   您有带有字段（名称、城市、国家/地区）的数据行
*   有不同的行版本（原始，实际）
*   您可以（de）将其序列化为 xml（WriteXml、LoadXml、GetXml）

您的描述中缺少的是**可**用于指示已删除行的行状态。

# cakephp - Cakephp：我如何检索数组中的特定行

> ID：11048112
> 
> 赞同：-3
> 
> 时间：2012-06-15T09:34:29.200
> 
> 标签：cakephp

大家好，我在下面有我的数组，我想检索两行：作为 program_code=>programme_name

我的数组在下面，请帮助

```
array(
(int) 0 => array(
    'ProgrammeRequirementsSubject' => array(
        'programme_code' => 'HEN',
        'programme_name' => 'Electrical Engineering'
    )
) 
```

)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T09:43:09.820

```
echo $array[0]['ProgrammeRequirementsSubject']['programme_code'],
     '=>',
     $array[0]['ProgrammeRequirementsSubject']['programme_name']; 
```

# jquery - 基本 JQuery/JQueryUI 未按预期运行 - 我哪里出错了？

> ID：11048113
> 
> 赞同：0
> 
> 时间：2012-06-15T09:34:38.000
> 
> 标签：jquery, css, jquery-ui

我第一次尝试使用 JQuery/JQUI 创建一个简单的社交图标反弹效果。

我认为下面的代码已经确定了它..

[http://testing.renewablehull.co.uk/css3.html](http://testing.renewablehull.co.uk/css3.html)

..但有两个问题：

*   动画队列（我似乎无法让它们停止 .stop() ）
*   如果您四处移动鼠标，图标位置会发生变化（twitter 图标在 facebook 下方移动，facebook 图标向左/向下滑动）。

显然我在这里遗漏了一些东西！我是一个新手，所以请温柔一点，给我指出正确的方向。

非常感谢

B.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T09:53:37.813

您的选择是，只要它们滚动，它就会无限运行，或者只执行一次然后停止。我建议后者，作为最终用户。

这是您在第一次后使其停止的方式，它通过使用效果回调完成：

```
 $(document).ready(function(){
          $('img').hover(function(){
              $(this).effect("bounce", { times:3, distance:8},function(e){

                  //disables it from going again
                  e.preventDefault();

                  //resets the position from relative to static
                  $(this).css('position','static');

              }, 0);                     
          });  
    }); 
```

此外，我注意到您的定位问题与 jQuery 效果有关，`position:relative`因此一旦将其更改回`static`，它看起来就很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T10:26:44.827

您可以像这样防止动画堆叠：

```
$(document).ready(function ()
{
    $('img').mouseover(function ()
    {
        if (!$(this).hasClass("img-hover"))
        {
            $(this).addClass("img-hover");
            $(this).effect("bounce", { times: 3, distance: 8 }, function ()
            {
                $(this).removeClass("img-hover");
            }, 0);
        }
    });
}); 
```

顺便说一句，您可以使用以下方法停止效果：

```
.stop (true, true); 
```

在 stop 上阅读[Jquery 文档](http://api.jquery.com/stop/)以了解您为什么需要`true, true`在其中。

# android - 由一些致命异常引起的应用程序

> ID：11048114
> 
> 赞同：0
> 
> 时间：2012-06-15T09:34:45.370
> 
> 标签：android, eclipse, nullpointerexception

我已经在 android 2.3.6 (API 10) 上开发了我的应用程序，它工作正常，然后我退出 Activity，但它的服务在 1 小时后在后台执行，当我再次运行它然后它由于一些致命异常它强制停止但再次运行并正常工作。

请帮助我理解这个堆栈跟踪并帮助我解决这个问题。
提前致谢。

**OnOffScreen 类：**

```
public class OnOffScreen extends Activity {

private TextView txtDevId,txtdevTag,txtOnOffSt,btnonoffMain,lblAlarm,txtMonitor,txtVersion,txtOcc;
private TextView txtOnOffDevType,txtTimerApp,txtStartTime,txtStartAct,txtStopTime,txtStopAct;
private ListView lstDeviceInfo;
private Button btnReport,btnOn,btnOff,btnConfig,btnStatus;
@SuppressWarnings("unused")
private Context context;
private ExceptionDialog dlg;
private SharedPreferences prefs;
private DataBaseAdapter dba;
private UtilityFunction utility;
@SuppressWarnings("unused")
private ImageView imgMain; 
private String DevId,SwId;
private Bundle bundle;
private SendSMS smsSend;
private SMSReceiver receivedSms;
private Cursor cursor,curCord;
private customCursorAdapter adpt;
private TableRow trSwitchId;
@SuppressWarnings("unused")
private ConstantClass ccl;
private static String SMS_RECEIVED = "android.provider.Telephony.SMS_RECEIVED";
public OnOffScreen(){

    dba = new DataBaseAdapter(this);        
    smsSend = new SendSMS(this);
    receivedSms = new SMSReceiver(this);
    utility = new UtilityFunction(this);
     ccl = new ConstantClass();
}

  @Override
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        final boolean isCsTitle = requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);
        setContentView(R.layout.onoffscr);
        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
        if(isCsTitle)
            getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.title);
        final TextView mtxTitle = (TextView)findViewById(R.id.lblMyTitle);
        mtxTitle.setText("Device On/Off Screen");
        ConstantClass.Clear_Main_Screen=false;
        ConstantClass.afterSendGotoMain = true;
        try{
            if(dba.IsConOpenOrClose()==false)
                dba.Open();
        bundle = getIntent().getExtras();
        if(bundle!=null){           
            DevId = bundle.getString("devIdTag");
            SwId = bundle.getString("SwIdTag");
            prefs = getPreferences(MODE_PRIVATE);
            SharedPreferences.Editor editor = prefs.edit();
            editor.putString("DeviceId", DevId);
            editor.putString("SwitchId", SwId);
            //////finally saved the data/////////
            editor.commit();
        }
        txtDevId = (TextView)findViewById(R.id.txtOnScDevID);
        txtdevTag = (TextView)findViewById(R.id.txtOnScDevTag);
        txtOnOffSt = (TextView)findViewById(R.id.txtOnScDevStatus);
        txtMonitor = (TextView) findViewById(R.id.txtOnScDevMonitor);
        txtOnOffDevType = (TextView)findViewById(R.id.txtonoffDevType);
        txtVersion = (TextView)findViewById(R.id.txtOnOffDevAppVer);
        lstDeviceInfo = (ListView)findViewById(R.id.lstDeviceInfo);
        lblAlarm = (TextView)findViewById(R.id.lblOnOffAlarm);
        txtTimerApp = (TextView)findViewById(R.id.txtOnOffDevTimer);
        txtOcc = (TextView)findViewById(R.id.txtOnOffDevOcc);
        txtStartTime = (TextView)findViewById(R.id.txtOnOffStartTime);
        txtStartAct = (TextView)findViewById(R.id.txtOnOffDevStartAct);
        txtStopTime = (TextView)findViewById(R.id.txtOnOffDevStopTime);
        txtStopAct = (TextView)findViewById(R.id.txtOnOffDevStopAct);
        //imgMain = (ImageView)findViewById(R.id.imgOnOffDevice);
        btnOn = (Button)findViewById(R.id.btnOnOffOn);
        btnOff = (Button)findViewById(R.id.btnOnOffOff);
        btnStatus = (Button)findViewById(R.id.btnStatus);
        btnConfig = (Button)findViewById(R.id.btnOnOffConfig);
        btnReport = (Button)findViewById(R.id.btnOnOffSeeReport);
        btnonoffMain = (Button)findViewById(R.id.btnOnOffMain);
        trSwitchId = (TableRow)findViewById(R.id.tbRowSwitchId);
        btnOn.setOnClickListener(btnClick);         
        btnOn.setBackgroundResource(R.drawable.onbutton);
        btnOff.setOnClickListener(btnClick);
        btnOff.setBackgroundResource(R.drawable.offbutton);
        btnStatus.setOnClickListener(btnClick);
        btnStatus.setBackgroundResource(R.drawable.checkstatus);
        btnConfig.setOnClickListener(btnClick);
        btnonoffMain.setOnClickListener(btnClick);
        btnReport.setOnClickListener(btnClick);         
        if(SwId.equals("0000")){
            trSwitchId.setVisibility(TableRow.GONE);
        }else
            trSwitchId.setVisibility(TableRow.VISIBLE);

        /************Filling the Coordinator number to cursor***************/           
          curCord = dba.getCoord(dba.CurrentWorkingCoordinator(DataBaseAdapter.Key_SendCoord, 1));
            if(curCord!=null){
            ConstantClass.address = curCord.getString(curCord.getColumnIndex(DataBaseAdapter.Key_MbNo)).toString();
            startManagingCursor(curCord);           
            }

                cursor = dba.SelFromDeviceStorage(DevId, SwId);         
                startManagingCursor(cursor);        
            if (cursor.getCount()>0){
                fillControl(cursor);            
            }
            String tag = cursor.getString(cursor.getColumnIndex(DataBaseAdapter.Key_DevTag));
            String alarm =utility.ReturnAlarm(DevId, tag);
            lblAlarm.setText(alarm);
            lblAlarm.setFocusable(true);
        lblAlarm.setOnClickListener(btnClick);
        }catch(SQLiteException e){
            Toast.makeText(this,e.getMessage(), Toast.LENGTH_SHORT).show();
        }finally{
            if(curCord!=null)
                curCord.close();
        }
  }
  View.OnClickListener btnClick = new View.OnClickListener() {

    public void onClick(View v) {
        // TODO Auto-generated method stub
        switch(v.getId()){
        case R.id.lblOnOffAlarm:
            if(lblAlarm.getText().toString()!=null){
                dlg = new ExceptionDialog(OnOffScreen.this,"Alarm " ,lblAlarm.getText().toString());
                dlg.show();
            }
            break;
        case R.id.btnOnOffOn:
            try{
            //ConstantClass.address = "5556";
                if (ConstantClass.timer != null)
                    ConstantClass.timer.cancel();
                ConstantClass.timer = new Timer();
                ConstantClass.timer.schedule(new AuditTimerTask(OnOffScreen.this), 300000);
            String msg = "<"+Integer.toHexString(26)+"3" + txtDevId.getText().toString() + SwId + Integer.toHexString(1)+">";
            smsSend.send_SMS( msg.toUpperCase());
            ////////go to mainn Screen //////

            }catch(Exception e){
                Toast.makeText(getApplicationContext(), e.getMessage(), Toast.LENGTH_SHORT).show();
            }
            break;
        case R.id.btnOnOffOff:
            try{
                //ConstantClass.address = "5556";
                if (ConstantClass.timer != null)
                    ConstantClass.timer.cancel();
                ConstantClass.timer = new Timer();
                ConstantClass.timer.schedule(new AuditTimerTask(OnOffScreen.this),300000);
                String msg = "<"+Integer.toHexString(26)+"3" + txtDevId.getText().toString() + SwId + Integer.toHexString(0)+">";
                smsSend.send_SMS( msg.toUpperCase());
                //////////now going to Main Screen//////////////                    
                }catch(Exception e){
                    Toast.makeText(getApplicationContext(), e.getMessage(), Toast.LENGTH_SHORT).show();
                }
            break;
        case R.id.btnStatus:
            try{
                if (ConstantClass.timer != null)
                    ConstantClass.timer.cancel();
                ConstantClass.timer = new Timer();
                ConstantClass.timer.schedule(new AuditTimerTask(OnOffScreen.this),300000);
                String msg = "<"+Integer.toHexString(26)+"3" + txtDevId.getText().toString() + SwId + Integer.toHexString(9)+">";
                smsSend.send_SMS( msg.toUpperCase());
            }catch(Exception e){
                Toast.makeText(getApplicationContext(), e.getMessage(), Toast.LENGTH_SHORT).show();
            }
            break;
        case R.id.btnOnOffConfig:
            /*
             * code for go on to the Config Device Screen from OnOffScreen *
             */
            Intent onOffConfig = new Intent(OnOffScreen.this,ConfigDevice.class);
            onOffConfig.putExtra("DeviceId", txtDevId.getText().toString());
            onOffConfig.putExtra("SwId", SwId);
            OnOffScreen.this.startActivity(onOffConfig);
            break;
        case R.id.btnOnOffMain:
            /*
             * code for go on to main Zigbee Activity Class from the OnOffScreen *
             */
            try{
            Intent onOffMain = new Intent(OnOffScreen.this,ZigbeeActivity.class);
            onOffMain.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

            if(dba.IsConOpenOrClose()==false)
                dba.Open();
            String sQuery = new String("UPDATE " + ConstantClass.dbName[3] + " SET " + DataBaseAdapter.Key_AlarmID + " = " + "0" +
            " WHERE " + DataBaseAdapter.Key_AlarmDevID + " = ?");
            dba.UpdateQuery(sQuery, DevId); 
            OnOffScreen.this.startActivity(onOffMain);
            }catch(Exception e){
                Toast.makeText(OnOffScreen.this, "On OffScreen " +  e.getMessage(),Toast.LENGTH_LONG).show();
            }
            break;
        case R.id.btnOnOffSeeReport:
            Intent rptInt = new Intent(OnOffScreen.this,ReportHistory.class);
            String dTag = null,stag = null,devsr=null, pic=null;

            if(cursor!=null){
                DevId = cursor.getString(cursor.getColumnIndex(DataBaseAdapter.Key_DevID));
                SwId = cursor.getString(cursor.getColumnIndex(DataBaseAdapter.Key_SwID));
                dTag = cursor.getString(cursor.getColumnIndex(DataBaseAdapter.Key_DevTag));
                stag = cursor.getString(cursor.getColumnIndex(DataBaseAdapter.Key_SwTag));
                devsr = String.valueOf(cursor.getInt(cursor.getColumnIndex(DataBaseAdapter.Key_DevSr)));
                pic = String.valueOf(cursor.getInt(cursor.getColumnIndex(DataBaseAdapter.Key_DevPic)));

                    rptInt.putExtra("DeviceID",DevId);

                    rptInt.putExtra("SwitchId", SwId);

                    rptInt.putExtra("DeviceTag", dTag);

                    rptInt.putExtra("SwitchTag",stag );

                    rptInt.putExtra("DeviceSr", devsr);

                    rptInt.putExtra("DevicePic", pic);
            OnOffScreen.this.startActivity(rptInt);
            }
            else
                OnOffScreen.this.startActivity(rptInt);
            break;
        }
    }
};
@Override
public void onStart(){
    super.onStart();        
        ///////registering the Receiver for sms receiving///////////
            registerReceiver(smsSend.sms_send,smsSend.getSentIntentFilter());
             registerReceiver(smsSend.sms_delivered,smsSend.getDeliveredFilter());
            IntentFilter filter = new IntentFilter(SMS_RECEIVED);
            registerReceiver(receivedSms,filter);    

}
  @Override 
  public void onResume(){
      super.onResume(); 
     try{                    
              dba.Open();            
      //////loading the prefrences////////
      SharedPreferences prefs = getPreferences(MODE_PRIVATE);
      DevId = prefs.getString("DeviceId", "");
      SwId = prefs.getString("SwitchId", "");         
      cursor = dba.SelFromDeviceStorage(DevId, SwId);           
        startManagingCursor(cursor);        
        if (cursor.getCount()>0){
            fillControl(cursor);            
        }
      }catch(Exception e){
          Log.d("Resume On Off", e.getMessage());

      }
  }

  @Override
  public void onPause(){
      super.onPause();  
      if(cursor!=null)
          cursor.close();         
    ConstantClass.Clear_Main_Screen = true;

 }   
  @Override
  public void onBackPressed(){
      try{
            Intent onOffMain = new Intent(OnOffScreen.this,ZigbeeActivity.class);
            onOffMain.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

            if(dba.IsConOpenOrClose()==false)
                dba.Open();
            String sQuery = new String("UPDATE " + ConstantClass.dbName[3] + " SET " + DataBaseAdapter.Key_AlarmID + " = " + "0" +
            " WHERE " + DataBaseAdapter.Key_AlarmDevID + " = ?");
            dba.UpdateQuery(sQuery, DevId); 
            OnOffScreen.this.startActivity(onOffMain);
            }catch(Exception e){
                Toast.makeText(OnOffScreen.this, "On OffScreen " +  e.getMessage(),Toast.LENGTH_LONG).show();
            }
  }
  @Override
  public void onDestroy(){        
      super.onDestroy();
      unregisterReceiver(receivedSms);
      unregisterReceiver(smsSend.sms_send);
      unregisterReceiver(smsSend.sms_delivered);
      if(cursor!=null)
          cursor.close();   
     if(dba!=null)
          dba.Close();
  }
  public String setDtTime(String temp){
        String dd,mm,yy,hh,min;
        dd = temp.substring(0, 2);
        mm = temp.substring(2, 4);
        int mon = Integer.valueOf(mm);
        mm = Integer.toString(mon+1);
        if(mm.length()!=2)
            mm = "0" + mm;
        yy  =   temp.substring(4, 6);
        hh = temp.substring(6, 8);
        min = temp.substring(8, 10);
    return dd+"/" + mm + "/" + yy + " " + hh + ":" + min; 
    }
  public void fillControl(Cursor cursor){
      try{
      if(cursor!=null)
          cursor.moveToFirst();
     adpt = new customCursorAdapter(this,cursor);
     lstDeviceInfo.setAdapter(adpt);
     txtDevId.setText(cursor.getString(cursor.getColumnIndex(DataBaseAdapter.Key_DevID)).toString());
     txtDevId.setTextColor(Color.BLACK);
     txtdevTag.setText(cursor.getString(cursor.getColumnIndex(DataBaseAdapter.Key_DevTag)));
     txtdevTag.setTextColor(Color.BLACK);

     if(cursor.getString(cursor.getColumnIndex(DataBaseAdapter.Key_SwID)).toString().equals("0000")){
         txtOnOffDevType.setText("Plug");
     }else
         txtOnOffDevType.setText("Switch");
     txtOnOffDevType.setTextColor(Color.BLACK);
     if(cursor.getInt(cursor.getColumnIndex(DataBaseAdapter.Key_DevOnOff))==1)
         txtOnOffSt.setText("ON");
     else
         txtOnOffSt.setText("OFF");
     txtMonitor.setTextColor(Color.BLACK);
     if(cursor.getInt(cursor.getColumnIndex(DataBaseAdapter.Key_DevRu))==1)
         txtMonitor.setText("Yes");
     else
         txtMonitor.setText("NO");

     txtOnOffSt.setTextColor(Color.BLACK);

     if(cursor.getInt(cursor.getColumnIndex(DataBaseAdapter.Key_DevTmr))==2)
         txtTimerApp.setText("Yes");
     else
         txtTimerApp.setText("NO");
     txtTimerApp.setTextColor(Color.BLACK);
     if((cursor.getInt(cursor.getColumnIndex(DataBaseAdapter.Key_DevOc))==1)|| cursor.getInt(cursor.getColumnIndex(DataBaseAdapter.Key_DevOc))==0){
         txtOcc.setText("Once");
     }else if(cursor.getInt(cursor.getColumnIndex(DataBaseAdapter.Key_DevOc))==2){
         txtOcc.setText("Daily");
     }else if(cursor.getInt(cursor.getColumnIndex(DataBaseAdapter.Key_DevOc))==4){
         txtOcc.setText("Annualy");
     }else 
         txtOcc.setText("Weakly");

     txtOcc.setTextColor(Color.BLACK);
     String onTime = cursor.getString(cursor.getColumnIndex(DataBaseAdapter.Key_DevOnTm)).toString();
        /* for catching the On Status Device */
        txtStartTime.setText(setDtTime( onTime));
        txtStartTime.setTextColor(Color.BLACK);
        if(cursor.getInt(cursor.getColumnIndex(DataBaseAdapter.Key_DevOnSt))==1)
            txtStartAct.setText("ON");
        else
            txtStartAct.setText("OFF");
        txtStartAct.setTextColor(Color.BLACK);
        String offTime =cursor.getString(cursor.getColumnIndex(DataBaseAdapter.Key_DevOffTm)).toString();
        /* for getting the timer Off act from the dbase*/

        txtStopTime.setText(setDtTime(offTime));
        txtStopTime.setTextColor(Color.BLACK);
        if(cursor.getInt(cursor.getColumnIndex(DataBaseAdapter.Key_DevOffSt))==1)
            txtStopAct.setText("ON");
        else
            txtStopAct.setText("OFF");  
        txtStopAct.setTextColor(Color.BLACK);
        String tem = cursor.getString(cursor.getColumnIndex(DataBaseAdapter.Key_DevVersion));
        txtVersion.setText(tem.substring(0, 1)+ "." + tem.substring(1, 2) + "." + tem.substring(2));
        txtVersion.setTextColor(Color.BLACK);
      }catch(Exception e){
          Toast.makeText(getApplicationContext(), e.getMessage(), Toast.LENGTH_LONG).show();          
      }
  }
} 
```

* * *

**堆栈跟踪：**

```
06-15 14:37:35.734: E/AndroidRuntime(31310): FATAL EXCEPTION: main

06-15 14:37:35.734: E/AndroidRuntime(31310): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.zigbee/com.zigbee.OnOffScreen}: java.lang.NullPointerException
06-15 14:37:35.734: E/AndroidRuntime(31310):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
06-15 14:37:35.734: E/AndroidRuntime(31310):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
06-15 14:37:35.734: E/AndroidRuntime(31310):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
06-15 14:37:35.734: E/AndroidRuntime(31310):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
06-15 14:37:35.734: E/AndroidRuntime(31310):    at android.os.Handler.dispatchMessage(Handler.java:99)
06-15 14:37:35.734: E/AndroidRuntime(31310):    at android.os.Looper.loop(Looper.java:130)
06-15 14:37:35.734: E/AndroidRuntime(31310):    at android.app.ActivityThread.main(ActivityThread.java:3687)
06-15 14:37:35.734: E/AndroidRuntime(31310):    at java.lang.reflect.Method.invokeNative(Native Method)
06-15 14:37:35.734: E/AndroidRuntime(31310):    at java.lang.reflect.Method.invoke(Method.java:507)
06-15 14:37:35.734: E/AndroidRuntime(31310):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
06-15 14:37:35.734: E/AndroidRuntime(31310):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
06-15 14:37:35.734: E/AndroidRuntime(31310):    at dalvik.system.NativeStart.main(Native Method)
06-15 14:37:35.734: E/AndroidRuntime(31310): Caused by: java.lang.NullPointerException
06-15 14:37:35.734: E/AndroidRuntime(31310):    at com.zigbee.OnOffScreen.onCreate(OnOffScreen.java:122)
06-15 14:37:35.734: E/AndroidRuntime(31310):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
06-15 14:37:35.734: E/AndroidRuntime(31310):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
06-15 14:37:35.734: E/AndroidRuntime(31310):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T10:02:47.567

你在这个陈述中有问题

```
if (SwId.equals("0000")) { 
```

您在 onCreate 中调用此语句，并在 onResume 中对其进行初始化。

`SwId = prefs.getString("SwitchId", "");`

这就是您获得 Exception.Always 记住当您启动应用程序时，它在调用`onCreate`之前首先调用它的原因`onResume`。

您仅在以下条件下在 onCreate 中对其进行初始化

```
if (bundle != null) {
    DevId = bundle.getString("devIdTag");
    SwId = bundle.getString("SwIdTag");
} 
```

因此，一开始，当您的应用程序启动时，bundle 将为 null，并且不会执行此条件并且您的应用程序将崩溃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T09:48:10.190

您有 NullPointerException 因为 null 对象尝试调试您的应用程序

# objective-c - 如何在IOS中获得一周的第一天

> ID：11048116
> 
> 赞同：1
> 
> 时间：2012-06-15T09:34:48.827
> 
> 标签：objective-c, ios, cocoa-touch

> **可能重复：**
> [NSCalendar 一周的第一天](https://stackoverflow.com/questions/1106943/nscalendar-first-day-of-week)

我需要一周的第一个日期，因为我有 weekNumberOfThe Year 和 Year。

我得到了这个解决方案：

```
[components setYearForWeekOfYear:year];
[components setWeekOfYear:week];
[components setWeekday:2]; 
```

这适用于 IOS 5 +，但不适用于低于 5 的 IOS，即同样适用于 4 和 4.3

# php - 自定义安装程序来安装 PHP 网站？

> ID：11048117
> 
> 赞同：0
> 
> 时间：2012-06-15T09:34:51.480
> 
> 标签：php, windows, web, installation

只是一个关于安装 PHP 网站的快速方法，是否有任何工具可以让我创建一个安装包以在 Windows 平台上完全安装这个网站？如果可能的话，甚至可能会获取公司名称和数据库连接等详细信息，然后可能会更新必要的 PHP 文件？

如果后者不能完成它的罚款，但一个免费的安装工具会很棒！

谢谢！

灰。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T09:37:49.637

使用像[innosetup](http://www.jrsoftware.org/isinfo.php)这样的工具是可能的。它让您构建 setup ，您可以在其中放置您想要的任何内容（网页，其他设置......）。

如果你想做一些更高级的事情（安装 apache，配置文件......）你需要做一些代码（delphi），但是文档很清楚所有的可能性。

不要被工具的简单性所迷惑，它非常强大。例如，您可以检查特定服务是否正在运行以启动（或不启动）设置的特定部分。（如果 httpd 正在运行，只需复制网页，例如跳过 apache 安装）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T09:51:25.537

您可以将 innosetup 与[server2go](http://www.server2go-web.de/download/download.html)结合使用 将所需 的包下载为 .ZIP 文件，解压缩，将您的网站放在“htdocs”文件夹中，然后使用 innosetup 创建安装程序。

编辑：您也可以根据需要编辑 pms_config.ini。

# facebook - 如何在 Facebook 游戏中提出挑战请求

> ID：11048122
> 
> 赞同：0
> 
> 时间：2012-06-15T09:35:03.727
> 
> 标签：facebook, facebook-graph-api, facebook-requests

我对使用 facebook SDK 很陌生。

我在 facebook 上有一个 racin 应用程序，我想挑战其他朋友。还有没有安装app的朋友。

我在 facebook 开发者页面上阅读

> 媒人
> 
> 请记住，请求可以发送给已安装游戏的任何玩家；

但为了吸引更多用户，我还想向好友列表中的任何用户发送挑战请求。

我是否必须向那些尚未安装应用程序的人发送应用程序请求？

有没有人有一些在 facebook 上做媒人游戏的经验？也许网上有一个不错的教程？对我来说，FB Doc 非常肤浅。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-26T08:49:27.053

在您的应用程序中导入 FacebookSDK 并使用以下代码。

```
[FBWebDialogs presentRequestsDialogModallyWithSession:nil
       message:[NSString stringWithFormat:@"I just smashed %d friends! Can you beat it?", nScore]
       title:@"Smashing!" parameters:params handler:^(FBWebDialogResult result, NSURL *resultURL, NSError *error)
       {
             if (error) 
             {
                    // Case A: Error launching the dialog or sending request.
                    NSLog(@"Error sending request.");
             } else 
             {
                    if (result == FBWebDialogResultDialogNotCompleted) {
                        // Case B: User clicked the "x" icon
                        NSLog(@"User canceled request.");
                    } else {
                        NSLog(@"Request Sent.");
                    }
             }}
             friendCache:nil];
        } 
```

# php - 如何获取页面的所有锚标签并添加类？

> ID：11048123
> 
> 赞同：2
> 
> 时间：2012-06-15T09:35:05.670
> 
> 标签：php, javascript, jquery, anchor

如何获取页面的所有锚标记并将一个类添加到mailto（例如`mailto:example@example.com`）和另一个类到网络链接（例如`http://example.com`）？

预期输出：

```
<a href="mailto:example@example.com" class="class1">
<a href="http://example.com" class="class2"> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-15T09:37:07.260

```
$('a[href^="mailto:"]').addClass('class1');
$('a:not([href^="mailto:"])').addClass('class2');​ 
```

示例：http: [//jsfiddle.net/HakedByChinese/3t2MQ/2/](http://jsfiddle.net/HackedByChinese/3t2MQ/2/)

**更新**使用`:not()`而不是`[href^="http"]`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T09:39:10.207

您可以使用此 JQuery 来获取锚元素的集合：

```
var elements = $("a"); 
```

从那里您可以遍历每个并检查 href 值：

```
elements.each(function(){
   var a = $(this);
   if(a.attr("href").indexOf("mailto:") == 0){
      a.addClass("MailToClass");
   }
   else{
      a.addClass("HttpClass");
   }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T09:38:02.407

```
$(document).ready(function() {
    $.each($('a'), function(k, v) {
        var href = $(v).attr('href');
        if (href.indexOf('mailto') != -1)
            $(v).addClass('class1');
        else
            $(v).addClass('class2');
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T09:38:07.033

你可以使用这样的东西

```
$('a[href^="mailto:"]').addClass('class1'); //This line adds a class to any href starting with mailto
$('a[href^="http"]').addClass('class2'); //This line adds a class to any link starting with http 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T09:38:31.767

试试这个：

```
$('a[href^="mailto').each(function(){
   $(this).addClass('sth')
}) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-15T09:39:23.607

使用 jQuery`.each()`函数循环遍历所有锚元素并检查，`href`以便您知道要添加哪个类。

**例子**

```
$('a').each(function(){
    if($(this).attr('href') == 'mailto:example@example.com'){
        $(this).addClass('class1');
    }
    else if($(this).attr('href') == 'http://example.com'){
        $(this).addClass('class2');
    }
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-15T09:42:56.813

```
$("a").each(function(){
  if($(this).attr('href').indexOf('mailto:') == 0) {//mailto link
   $(this).addClass('class1')
  }
  else {
   $(this).addClass('class2')
  }
 }); 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-06-15T09:40:05.980

在同一个文档中查找标签确实喜欢

```
$('a[href^="mailto:"]').addClass('class1');
$('a:not([href^="http:"])').addClass('class2'); 
```

在 iframe 中找到喜欢

```
jQuery("a[href^='mailto:']",jQuery("#myiframe")[0].contentDocument).addClass('class1');
jQuery("a:not([href^='http:'])",jQuery("#myiframe")[0].contentDocument).addClass('class2'); 
```

# android - 安卓浏览器

> ID：11048126
> 
> 赞同：1
> 
> 时间：2012-06-15T09:35:24.467
> 
> 标签：android, android-emulator

我正在构建一个网站，该网站也需要在 Android 浏览器上查看。

我听说在 android 浏览器上的 javascript 似乎正在破坏。我没有安卓设备可以自己查看。

是否有我可以下载并检查自己的 android 浏览器的模拟器。

我的开发环境：MAC（狮子）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T09:41:06.617

为了使用模拟器，您需要安装 android sdk：[此处](http://developer.android.com/sdk/installing.html)的说明。然后你可以看看使用谷歌的 Android 模拟器文档：[这里](http://developer.android.com/guide/developing/devices/emulator.html)

另一种选择是使用并行、vmware 等运行您自己的 Android 虚拟机。可以在[此处找到相关信息和下载信息](http://android-x86.org/)

# xpages - 在 XPage 中将大型富文本字段值显示到 Web 上

> ID：11048129
> 
> 赞同：0
> 
> 时间：2012-06-15T09:35:33.863
> 
> 标签：xpages, xpages-ssjs

我有一个存储逗号分隔数字的富文本字段（从 11111 到 99999 的大数字，带有三个字符前缀 - 所以 xxx11111、xxx11112 等）。我正在使用 appendText 属性，在文档中我注意到在大约 16KB 之后创建了另一个具有相同名称的富文本字段。

但是当我在网上显示这些信息时：

```
<xp:inputRichText id="inputRichText1" readonly="true" value="#{doc.RichTextField}">
</xp:inputRichText> 
```

它只显示到 xxx16351。我在这里想念什么？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T01:15:50.407

你可能想改变你的方法。应该起作用的是[蒂姆的 MIME](http://xmage.gbs.com/blog.nsf/D6Plinks/TTRY-8NKTPN)用法。因此，您不是将 RichText 写入 MIME 字段，而是由 Domino 引擎负责大小和呈现。

不管怎样，跟我说吧：网络上没有 RichText，它是圣诞节过去的幽灵，只有 MIME。

让我们知道怎么回事

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T15:22:04.333

它只显示第一个富文本字段的内容吗？我怀疑绑定到字段的值只会从具有该名称的第一个 NotesItem 中检索，而不是聚合具有该名称的所有 NotesItems。

# c# - 如何在 C# 中启动另一个主窗体

> ID：11048131
> 
> 赞同：5
> 
> 时间：2012-06-15T09:35:50.230
> 
> 标签：c#, forms

首先，我显示一个登录表单。当用户输入正确的 id 和密码时，我想显示另一个表单，然后关闭登录表单。以下是我启动登录表单的方式。

```
static class Program
{
    /// <summary>
    /// The main entry point for the application.
    /// </summary>
    [STAThread]
    static void Main()
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        Application.Run(new FrmLogin());
    }
} 
```

现在，当我想显示主窗体时，我调用了类的`dispose()`方法`FrmLogin`，但应用程序立即结束。我的解决方案是将class的`visible`属性更改为，我知道这是不对的，请提出一种解决方法。`FrmLogin``false`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T09:37:35.433

登录完成后您如何制作第二个 APplication.Run ;) 等待它关闭，执行登录，然后 Application.Run 为第二个表单，这是 MAIN 表单。

顺便说一句，“FrmLogin”违反了 .NET 命名模式——你似乎是一个老 VB 手（这是一种模式）。它应该是登录表单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T09:50:38.570

```
var loginForm = new LoginForm();
if(loginForm.ShowDialog() != dont_remember_see_intellisense_or_docs.OK)
  return;
var mainForm = new MainForm();
Application.Run(mainForm); 
```

这会将登录表单显示为对话框。在您的登录表单中，您必须将返回值设置为适当的值（即确定）以显示主表单

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T09:51:42.267

您可以将登录表单显示为对话框，如果登录成功，则可以将主表单运行为：

```
static class Program
{
     public static bool isValid = false;
    /// <summary>
    /// The main entry point for the application.
    /// </summary>
    [STAThread]
    static void Main()
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        using (FrmLogin login = new FrmLogin())
        { 
            login.ShowDialog(); 
            if (isValid)
            {           
                Application.Run(new MainForm());
            }
        }
    }
} 
```

在您的 FrmLogin 中，验证用户并设置`DialogResult`为`Ok`. 在这里，我在按钮单击事件中做到了。

```
private void btnLogin_Click(object sender, EventArgs e)
{

    Program.isValid= true; // impliment this as method 
    if(Program.isValid)
    {
      this.DialogResult = DialogResult.OK;
      // or this.Close();
    }
    else
    {
      //else part code
    }
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-06-15T10:51:43.303

要从 FrmLogin 显示另一个表单 myForm 只需调用

```
myForm window = new window()
window.MDIparent = ParentForm;
window.Show(); 
```

# hadoop - 将数据放入数据库时 使用hbase java客户端时出现问题

> ID：11048132
> 
> 赞同：4
> 
> 时间：2012-06-15T09:35:51.440
> 
> 标签：hadoop, hbase

我正在测试 hbase 。我正在使用一个没有 hadoop 的独立的。我使用了 hbase 0.90.6 版本，代码运行良好，我升级到最新版本 0.94.0 它失败并在我尝试将数据放入表中时出现此异常。例外

```
Exception in thread "main" org.apache.hadoop.hbase.client.RetriesExhaustedWithDetailsException: Failed 1 action: DoNotRetryIOException: 1 time, servers with issues: xxxx:36601, 
    at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.processBatchCallback(HConnectionManager.java:1591)
    at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.processBatch(HConnectionManager.java:1367)
    at org.apache.hadoop.hbase.client.HTable.flushCommits(HTable.java:945)
    at org.apache.hadoop.hbase.client.HTable.doPut(HTable.java:801)
    at org.apache.hadoop.hbase.client.HTable.put(HTable.java:776)
    at com.hhase.Hbase.main(Hbase.java:22) 
```

我正在使用下面的代码。

```
package com.hhase;
import java.io.IOException;

import org.apache.hadoop.conf.Configuration;
import org.apache.hadoop.hbase.HBaseConfiguration;
import org.apache.hadoop.hbase.client.Get;
import org.apache.hadoop.hbase.client.HTable;
import org.apache.hadoop.hbase.client.Put;
import org.apache.hadoop.hbase.util.Bytes;

public class Hbase {

    public static void main(String args[]) throws IOException {

        Configuration hConf = HBaseConfiguration.create();
        HTable table = new HTable(hConf, "myLittleHBaseTable");
        Put p = new Put(Bytes.toBytes("myLittleRow"));

        Put put = new Put(Bytes.toBytes("myLittleRow"));
        put.add(Bytes.toBytes("myLittleFamily"),
                Bytes.toBytes("someQualifier"), Bytes.toBytes("Some"));
        table.put(put);

    }
} 
```

使用的库

```
commons-cli-1.2.jar            hadoop-core-1.0.2.jar
commons-codec-1.4.jar          hbase-0.94.0.jar
commons-collections-3.2.1.jar  httpclient-4.1.2.jar
commons-configuration-1.6.jar  httpcore-4.1.4.jar
commons-httpclient-3.1.jar     log4j-1.2.16.jar
commons-io-2.1.jar             protobuf-java-2.4.0a.jar
commons-lang-2.5.jar           slf4j-api-1.5.8.jar
commons-logging-1.1.1.jar      slf4j-log4j12-1.5.8.jar
commons-net-1.4.1.jar          stax-api-1.0.1.jar
guava-r09.jar                  zookeeper-3.4.3.jar 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T09:42:51.007

我在将数据插入 HBase 时遇到了同样的错误。就我而言，这是由于列族名称不正确。

请参考[此对话](http://mail-archives.apache.org/mod_mbox/hbase-user/201207.mbox/%3CBLU0-SMTP132588C868959138B6469798FD20@phx.gbl%3E)。

# actionscript-3 - PrintJob 上的 Flash 退出全屏模式

> ID：11048137
> 
> 赞同：0
> 
> 时间：2012-06-15T09:36:13.443
> 
> 标签：actionscript-3, flash, internet-explorer, actionscript-2

我正在使用使用 actionscript 2.0 开发的 Flash 图像查看器，并且仅与 IE 一起使用。它使用 Flash PrintJob 打印图像。

```
var printJob:PrintJob = new PrintJob();
printJob.start()
printJob.addPage(printMc)
printJob.send();
delete printJob; 
```

但是当在全屏模式下调用 PrintJob 时，会出现打印对话框并且 Flash 播放器退出全屏模式。这是 Flash 的安全限制吗？或者是否有任何解决方法可以停止退出全屏模式？

*测试环境*

浏览器：IE9

操作系统：Windows 7 64 位

Flash 播放器：11.1.102.63

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T09:41:37.450

我想这取决于操作系统，而不是一个独特的 Flash 问题。如果它不是活动窗口，则不能将窗口保持在全屏模式；当您打开“打印”对话框时，它将成为活动窗口 - 从而使您的 Flash 退出全屏模式。

没有我能想到的解决方法，因为控制它的不是 Flash - 它是操作系统。

# android - 如何在Android中放大/缩小多个图像？

> ID：11048142
> 
> 赞同：5
> 
> 时间：2012-06-15T09:36:23.053
> 
> 标签：android, zooming

我可以放大和缩小一张图像，但我不知道如何放大多张图像。

# haskell - 具有后端特定运算符的持久性示例

> ID：11048143
> 
> 赞同：12
> 
> 时间：2012-06-15T09:36:27.117
> 
> 标签：haskell, yesod

我想持久地做一个 LIKE 查询，我正在使用 sqlite。yesod 书提供了一个使用原始 SQL 执行此操作的示例，但说：

> 由于 Persistent 0.6 中添加了一项功能，您可以直接用普通语法表达 LIKE 运算符，该功能允许后端特定的运算符

不过，我找不到这样的例子。有人可以举一个例子来说明使用像 LIKE 这样的特定运算符`selectList`或类似的东西意味着什么？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-17T07:33:30.807

我知道我以前用过它，但我不记得在哪里。无论如何，一个简单的例子（未经 GHC 检查，道歉）将是：

```
selectList [Filter PersonName (Left $ PersistText "%Michael%") (BackendSpecificFilter "ILIKE")] [] 
```

显然你可以创建一些辅助函数，例如：

```
icontains field val = Filter field (Left $ PersistText $ T.concat ["%", val, "%"]) (BackendSpecificFilter "ILIKE")
selectList [Personname `icontains` "Michael"] [] 
```

# r - 计算R中列表元素的数量和频率？

> ID：11048147
> 
> 赞同：4
> 
> 时间：2012-06-15T09:36:39.320
> 
> 标签：r, list, element

我有一个很长的列表，其中包含不同数量的元素，这些元素也可以在同一字段中重复出现。
这是前五行的示例：

```
A <- list(c("JAMES","CHARLES","JAMES","RICHARD"),  
          c("JOHN","ROBERT","CHARLES"),  
          c("CHARLES","WILLIAM","CHARLES","MICHAEL","WILLIAM","DAVID","CHARLES","WILLIAM"),  
          c("CHARLES"),  
          c("CHARLES","CHARLES")) 
```

现在我想计算列表中每一行的元素数。
我想要的输出看起来类似于：

```
[1] 4  
[2] 3  
[3] 7  
[4] 1  
[5] 2 
```

除此之外，我想知道“查尔斯”一词在每一行中出现的频率。
根据我的示例，我想获得类似于此的输出：

```
[1] 1  
[2] 1  
[3] 3  
[4] 1  
[5] 2 
```

我想到了这个：

```
> table(A)  
Error in table(A) : all arguments arguments must have same length  
> sum(A)  
Error in sum(A) : invalid 'type' (list) of argument 
```

但不幸的是，我不知道如何处理这些错误消息并且不知道替代方案。
我知道列表的行数是：

```
> length(A)  
[1] 5 
```

但这并不能回答我的问题，不幸的是。我也找不到其他答案。
所以我想请你帮我计算这两个措施！

非常感谢您！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T09:48:57.380

```
sapply(A, function(x) length(x))
[1] 4 3 8 1 2
un <- unique(unlist(A))
nm <- lapply(un, function(x) sapply(A, function(y) sum(y == x)))
names(nm) <- un
nm
$JAMES
[1] 2 0 0 0 0

$CHARLES
[1] 1 1 3 1 2

$RICHARD
[1] 1 0 0 0 0

$JOHN
[1] 0 1 0 0 0

$ROBERT
[1] 0 1 0 0 0

$WILLIAM
[1] 0 0 3 0 0

$MICHAEL
[1] 0 0 1 0 0

$DAVID
[1] 0 0 1 0 0 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-15T09:48:59.243

您应该熟悉`lapply`并`sapply`循环列表：

```
sapply(A, length)
[1] 4 3 8 1 2

sapply(A, function(x)sum(grepl("CHARLES", x)))
[1] 1 1 3 1 2 
```

* * *

什么`grepl()`是将正则表达式与您的文本匹配，并根据是否存在匹配返回 TRUE 或 FALSE。然后我`sum()`对这些逻辑值进行运算，即对 TRUE 值求和。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-15T10:27:23.557

要计算列表 A 的元素的长度。您可以使用以下命令：

```
list.len <- lapply(1:length(A),function(x) length(A[[x]]))
unlist(list.len)
[1] 4  
[2] 3  
[3] 7  
[4] 1  
[5] 2 
```

要计算“CHARLES”出现在列表的每个元素中的次数，您可以执行以下操作：

```
len.name <- lapply(1:length(A),function(x) length(which(A[[x]] == "CHARLES")))
len.name
[[1]]
[1] 1

[[2]]
[1] 1

[[3]]
[1] 3

[[4]]
[1] 1

[[5]]
[1] 2 
```

然后你可以取消列出

```
unlist(len.name) 
```

然后你会得到输出：

```
[1] 1  
[2] 1  
[3] 3  
[4] 1  
[5] 2 
```

# plugins - Confluence 宏浏览器自动完成附件

> ID：11048149
> 
> 赞同：1
> 
> 时间：2012-06-15T09:36:57.703
> 
> 标签：plugins, macros, confluence

我正在尝试在自动完成的下拉列表中显示所有附件（来自当前页面）。这是 atlassian-plugin.xml 中定义参数的部分：

```
<xhtml-macro name="plugin-name" class="com.example.macro.name" key="macroname-xhtml" icon="/download/resources/${project.groupId}.${project.artifactId}/icons/macroname.png">
    <category name="formatting"/>
    <parameters>
        <parameter name="content_input" type="confluence-content" />
        <parameter name="space_input" type="spacekey" />
        <parameter name="attachment_input" type="attachment" />
    </parameters>
</xhtml-macro> 
```

和类型工作`confluence-content`得`spacekey`很好。它显示了一个自动完成页面和空间的文本字段。

但是，该`attachment`类型显示无法自动完成的空下拉列表（选择框）。

Confluence 官方文档说它应该像我一样工作： [https ://developer.atlassian.com/display/CONFDEV/Including+Information+in+your+Macro+for+the+Macro+Browser](https://developer.atlassian.com/display/CONFDEV/Including+Information+in+your+Macro+for+the+Macro+Browser)

我一定在这里遗漏了一些东西，但我不知道是什么。任何人都可能知道问题是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T10:49:11.460

如果您想要一个包含所有附件的下拉列表，那么您也可以尝试以下操作：

```
<xhtml-macro name="plugin-name" class="com.example.macro.name" key="macroname-xhtml" icon="/download/resources/${project.groupId}.${project.artifactId}/icons/macroname.png">
    <category name="confluence-content" />
    <parameters>
        <parameter name="page" type="confluence-content" required="false"
            multiple="false" />
        <parameter name="name" type="attachment" required="false" />
    </parameters>
</xhtml-macro> 
```

*   不要更改参数的名称

如果要添加过滤器，则需要以下内容：

```
<web-resource key="macro-browser-smart-fields" name="Macro Browser Smart Fields">
    <resource type="download" name="confluence-core-macro-fields.js" location="js/confluence-core-macro-fields.js" />
    <dependency>confluence.editor.actions:editor-macro-browser</dependency>
    <context>macro-browser</context>
</web-resource> 
```

confluence-core-macro-fields.js

```
(function($) {
    AJS.MacroBrowser.activateSmartFieldsAttachmentsOnPage("plugin-name", [ "png", "jpg", "gif" ]);
})(AJS.$); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T12:07:14.170

我发现将类型设置为`attachment`（按照官方文档）是错误的。我找到了一种解决方法，可以在自动完成框中显示附件。

```
<parameter name="xsd" type="confluence-content" required="true">
    <option key="type" value="attachment"/>
    <option key="showKeyInPlaceholder" value="false" />
    <option key="showValueInPlaceholder" value="true" />
</parameter> 
```

# java - 如何通过 Java 中的 DatabaseMetadata api 检索 DB2 中的实际存储过程代码

> ID：11048150
> 
> 赞同：0
> 
> 时间：2012-06-15T09:37:07.157
> 
> 标签：java, jakarta-ee, db2

我正在编写一个工具来比较 Java 中的两个模式并在命令行中打印结果。我能够检索过程名称、参数、类型等，但不能检索数据，请告诉我是否可以返回实际内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T00:24:15.477

根据 java.sql.DatabaseMetaData 中可用（和不可用）的方法，您需要自己获取过程主体，方法是直接查询相应的目录表/视图。在 DB2 for Linux、UNIX 和 Windows 平台上，该信息位于 SYSCAT.ROUTINES 视图中。

# git - git 处理未跟踪的二进制文件

> ID：11048158
> 
> 赞同：0
> 
> 时间：2012-06-15T09:37:38.077
> 
> 标签：git, binary, bundle

我正在使用`git`我的论文。该项目包含文本文件（代码，`*.tex`）和二进制文件（图）。

*   文本文件由 git 存储库跟踪
*   二进制文件不被 git 跟踪，而是位于同一目录中。

我在台式机和笔记本电脑上工作，有时通过 ssh 同步，有时通过 USB 驱动器同步。我的问题是如何正确处理这种同步。如果我只有代码，我会使用`git pull`,`git push`或`git bundle`. 问题是这将不包括二进制文件（即，我在桌面上制作的图形不会传输到笔记本电脑，因此`latex`笔记本电脑因缺少图形而失败）。因此，我目前`rsync`用于同步，但随后我失去了使用`git`.

我想做的事：

*   告诉`git`“这里有一些二进制文件，请在执行`git push`或`git pull`或时包含它们`git bundle`
*   因为这是二进制文件，我不希望它们被跟踪，即我只希望复制当前状态，而不是更改

到目前为止，我只能提出解决方案（`git`为代码和`rsync`同步二进制文件构建一个 shell 脚本）。但这使工作变得尴尬，所以我正在寻找一个更优化的解决方案。

谢谢，西蒙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T21:12:05.877

我认为 git-annex 完全符合您的需要： http: [//git-annex.branchable.com/](http://git-annex.branchable.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T14:13:31.517

一种可能的解决方案是将二进制文件保存在单独的分支上（可能是孤立的使用`git checkout --orphan <branchname>`？）并且只使用`git commit --amend`. 涉及该分支的推送和拉取几乎总是必须使用`--force`，但它可以工作。

尽管这会在存储库中留下一些膨胀，但由于垃圾收集会存在上限，因为它不会保留二进制文件的历史记录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T14:50:35.527

我可能会这样组织事情：

```
project
   .git
   .tex files
   code files
   data symlink to ../project-data
project-data
   images, etc 
```

这样您就可以`rsync`在项目数据目录上自由使用，而不必过度关注排除模式和/或损坏您的存储库，并在主项目中自由使用`git fetch`和 git `push`，而不必担心未跟踪文件的噪音。当然，您的代码和 .tex 文件需要稍作修改，以便从子目录中提取内容，而不是它们现在所在的位置。

# jquery - 如何根据 if else 条件在列表中显示所需数量的元素？

> ID：11048161
> 
> 赞同：0
> 
> 时间：2012-06-15T09:37:52.097
> 
> 标签：jquery, list

当我单击按钮时，我只想在列表中显示所需数量的元素（比如根据输入条件显示 3 个项目）我将如何完成它？

```
$(document).ready(function () {
    var list = $('#myList li:gt(0)');
    list.hide();
    $('a#myList-toggle').click(function () {
        var username = $("#<%= uname.ClientID %>").val();
        var pwd = $("#<%= pwd.ClientID %>").val();
        var ints = $("#<%= uname.ClientID %>").val();
        var list1 = $('#myList li:gt(3)');
        alert(username);
        list.slideToggle(400);
        return false;
    });
});
</script>

</asp:Content>
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">

<a href="#" id="myList-toggle">Show the rest</a>

UserName: 
<asp:TextBox id="uname" Text="" runat="server" />
PassWord : <asp:TextBox id="pwd" Text="" runat="server"/>

<ul id="myList" style="margin-bottom: 0px" >
    <li>Item 1</li>
    <li>Item 2</li>
    <li>Item 3</li>
    <li>Item 4</li>
    <li>Item 5</li>

</ul>

<asp:Button  id="Login" Text="Login" runat="server" />

</asp:Content> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T09:45:26.400

你可以使用jquery slice function.function原型是这样的：

```
$(someselector).slice(start [, end]); 
```

它从 n 开始选择前 mn。注意索引是从零开始的。例如：

```
 <ul>
     <li>list item 1</li>
     <li>list item 2</li>
     <li>list item 3</li>
     <li>list item 4</li>
     <li>list item 5</li>
   </ul>

$('li').slice(2, 4).css('background-color', 'red'); 
```

将应用于项目 [3,4]

希望这有帮助。

# php - PHP：散列或加密购物袋 ID 以存储到 cookie 中

> ID：11048164
> 
> 赞同：-2
> 
> 时间：2012-06-15T09:37:54.853
> 
> 标签：php, cookies, encryption, hash

访问者在他的购物袋中拥有的物品与 bagID 相关联。如果用户修改了网站，我想向他们展示以前的包内容。

我不确定哪种方法、加密或必须将 bagID 存储在客户端 pc cookie 上。如果别人知道的话，包里的东西没什么好怕的。

**opt1：将 bagID + 唯一盐存储到用户 cookie**
散列 bagID + salt 可以访问包内容。每个包的盐是唯一的，因此
如果有人从用户那里检索此 cookie，他只能访问该特定用户的包内容。

**opt2：加密bagID。**
一个缺点似乎做得好会很慢。

**选择3：？**

如果两者中的一个是一个不错的选择，那么在这种情况下推荐哪种哈希或加密算法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T13:05:08.580

你让它变得比它需要的更复杂。根本不存储`bagID`。为包创建唯一哈希，将其存储在包的数据库表中，并根据该唯一哈希检索包内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T13:09:45.630

我是否了解您希望将整个包的内容存储在客户端 cookie 中？这是可能的，但由于对 cookie 的长度和内容的许多限制，不建议这样做。只需将包中的所有物品存储在本地数据库中，并由客户 ID 键入。

SQL 列会：

```
client_id (not unique), item_id, amount
(repeat for as many times as many positions you have) 
```

在大多数非 SQL 中，您可以只使用对象数组。

而且，顺便说一句，这与 PHP 无关。

# wix - LUA 修补未从“可移动媒体”(XP) 安装的应用程序

> ID：11048166
> 
> 赞同：0
> 
> 时间：2012-06-15T09:37:58.303
> 
> 标签：wix, windows-installer

**当原始安装不是从可移动媒体完成**时（使用 Windows Installer 3 时），在 XP 上修补应用程序的 LUA（非管理）存在限制。此限制显然已在 Windows Installer 4 中删除

对于这样一个已安装的应用程序，将 Windows Installer 升级到 v4 是否允许我对应用程序进行 LUA 修补？*或者该应用程序最初*是使用 Installer v3 安装的这一事实是否会限制我？

# java - 自定义小部件扩展文本字段

> ID：11048168
> 
> 赞同：1
> 
> 时间：2012-06-15T09:38:00.340
> 
> 标签：java, gwt, uibinder

是否可以简单地扩展文本字段以创建由文本框和标签组成的自定义小部件，然后继承文本字段的功能以及事件处理。

据我了解，通常会扩展 Composite ，然后在构造函数中实现 initWidget() 。

```
initWidget(binder.createAndBindUi(this)); 
```

我可以通过扩展文本字段来做类似的事情吗？

我想这样做的原因是因为已经创建了一个带有标签的指示器文本字段，但是当我尝试在某个地方使用它时，在这个自定义小部件中应用事件处理会给我带来意想不到的结果。

```
import com.google.gwt.core.client.GWT;

public class IndicatorTextField extends Composite implements HasText, HasKeyUpHandlers{

public interface Binder extends UiBinder<Widget, IndicatorTextField> {
}

private static final Binder binder = GWT.create(Binder.class);

public interface Style extends CssResource{
    String textStyling();
    String requiredInputLabel();
    String colorNotValidated(); 
}

@UiField Style style;
@UiField Label label;
@UiField TextBox textBox;

public IndicatorTextField()
{
    initWidget(binder.createAndBindUi(this));
}

public void setBackgroundValidateTextbox(boolean validated)
{
    if(validated)
    {
        textBox.getElement().addClassName(style.colorNotValidated());
    }
    else
    {
        textBox.getElement().removeClassName(style.colorNotValidated());
    }
}

@Override
public String getText() {
    return label.getText();
}

@Override
public void setText(String text) {
    label.setText(text);
}

@UiHandler("textBox")
public void onKeyUp(KeyUpEvent event)
{
    DomEvent.fireNativeEvent(event.getNativeEvent(), this);
}

@Override
public HandlerRegistration addKeyUpHandler(KeyUpHandler handler) {      
    //return textBox.addKeyUpHandler(handler);
    return addDomHandler(handler, KeyUpEvent.getType());
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T13:12:27.610

查看类的默认构造函数`TextBox`。

```
/**
 * Creates an empty text box.
 */
public TextBox() {
  this(Document.get().createTextInputElement(), "gwt-TextBox");
} 
```

它创建文本输入元素。您可以`LabeledTextBox`使用如下构造函数创建自定义类：

```
public class LabeledTextBox extends TextBox {

    public MyTextBox() {
        super(Document.get().createDivElement());
        final DivElement labelElement = Document.get().createDivElement();
        final InputElement textBoxElement = Document.get().createTextInputElement();
        getElement().appendChild(labelElement);
        getElement().appendChild(textBoxElement);
    }

    ...

} 
```

我自己没有尝试这门课。最有可能的是，它需要额外的调整，可能存在监听器问题等。

你真的需要通过子类化来创建一个小部件`TextBox`吗？你为什么不使用某种`Panel`代替？对我来说，这是一种更简单的方法。

# php - 在php foreach中增加一个值？

> ID：11048173
> 
> 赞同：8
> 
> 时间：2012-06-15T09:38:09.700
> 
> 标签：php, for-loop, foreach

是否可以在 foreach 中增加 php 变量？我知道如何通过在外部声明来循环。

我正在寻找类似下面的语法

```
foreach ($some as $somekey=>$someval; $i++)
{

} 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-06-15T09:40:24.637

不，你必须使用

```
$i = 0;
foreach ($some as $somekey=>$someval) {
    //xyz
    $i++;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-15T09:39:16.617

```
foreach ($some as $somekey=>$someval)
{
     $i++;

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-08-31T13:13:54.157

懒惰的做法是：

```
{
    $i=1;
    foreach( $rows as $row){
        $i+=1;
    }
} 
```

，但是您必须在 foreach 之后将 $i 范围限定为不存在或最后取消设置它

```
$i=1;
foreach( $rows as $row){
    $i+=1;
}
unset($i); 
```

，但你应该使用 for 循环，因为利奥波德写道。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-30T10:07:07.010

```
$dataArray = array();
$i = 0;
foreach($_POST as $key => $data) {
    if (!empty($data['features'])) {
        $dataArray[$i]['feature'] = $data['features'];
        $dataArray[$i]['top_id'] = $data['top_id'];
        $dataArray[$i]['pro_id'] = $data['pro_id'];
    }
    $i++;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-05-21T20:02:33.350

我知道这是一个旧的，但这些是我的想法。

```
$some = ['foo', 'bar'];

for($i = 0; $i < count($some); $i++){
 echo $some[$i];
} 
```

--**更新**--

```
$some = ['foo', 'bar'];
$someCounted = count($some);

for($i = 0; $i < $someCounted; $i++){
 echo $some[$i];
} 
```

它将实现您首先要寻找的东西。
然而你必须增加你的索引 $i。
因此，它不会为您节省任何打字时间。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-05-14T09:25:56.910

这会成功的！请记住，如果要从 0 开始计数/递增，则必须在 foreach 循环之前定义 $i = 0。

```
$i = 0;
foreach ($some as $somekey=>$someval) {
    $i++;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-15T09:39:17.083

有什么理由不使用

```
foreach ($some as $somekey=>$someval)
{
$i++;
} 
```

?

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-15T09:39:25.603

```
foreach ($some as $somekey=>$someval)
{
    $i++;
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-06-15T09:41:15.887

```
foreach ($some as $somekey=>$someval)
{
 $i++;
} 
```

我只是一个变量。即使它用于迭代您正在使用的任何项目，它仍然可以像其他任何项目一样进行修改。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-03-04T17:29:39.463

不幸的是，这是**不可能**的。我一直在寻找一种优雅的方式来做到这一点，与此非常相似：

`for ($k = 0 ; $k < $columns; $k++){ echo '<td></td>'; }`

这适用`for`于 PHP 中的功能，但是您必须拉取项目，例如`$columns[$k]`，然后您又回到了不太理想的情况。

[参考](https://stackoverflow.com/questions/14672062/php-loop-x-amount-of-times)

# c++ - 通过注入的 DLL 绕过成员函数

> ID：11048176
> 
> 赞同：3
> 
> 时间：2012-06-15T09:38:16.610
> 
> 标签：c++, winapi, hook, reverse-engineering, detours

***原帖：***

我试图从我注入的 DLL 中绕过一个成员函数。我已经获得了要挂接的函数的地址，但无法找出正确的语法或通过 detours 库挂接它的方法。我已经用错误消息评论了给我错误的行。

我已经阅读了成员函数挂钩的 detours 示例的源代码，这就是此代码的基础，但由于某种原因它不起作用。

任何帮助将不胜感激，谢谢！

```
#include <windows.h>
#include <detours.h>

class CDetour
{
public:
    bool My_MemFn(unsigned int unk1);
    static bool (CDetour::* Real_MemFn)(unsigned int);
};

bool CDetour::My_MemFn(unsigned int unk1)
{
        /* do stuff here */
    return (this->*Real_MemFn)(unk1);
}

typedef bool (CDetour::* MemFn_t)(unsigned int unk1);

MemFn_t CDetour::Real_MemFn= *(MemFn_t *)((void*)0x23234545);

BOOL APIENTRY DllMain(HANDLE hModule, DWORD dwReason, LPVOID lpReserved)
{
    switch (dwReason)
    {
        case DLL_PROCESS_ATTACH:
        {
            DetourTransactionBegin();
            DetourUpdateThread(GetCurrentThread());
            DetourAttach(&(PVOID&)CDetour::Real_MemFn, *(PBYTE*)&CDetour::My_MemFn); // ERROR: C2440: 'type cast' : cannot convert from 'bool __thiscall CDetour::* )(unsigned int)' to 'PBYTE *'
            DetourTransactionCommit();
            break;
        }
    }

    return TRUE;
} 
```

***解决方案：***

```
#include <windows.h>
#include <detours.h>

typedef void (__thiscall * CClassFunction_t)(void *__this, unsigned int unk1);
CClassFunction_t Real_CClassFunction;

void __fastcall Mine_CClassFunction(void *__this, int edx, unsigned int unk1)
{
    Real_CClassFunction(__this, unk1);
}

template<typename T>
void HookFunction(const char *module, char *signature, T &fn_real, PVOID fn_mine)
{
    HookFunction<T>(DetourFindFunction(module, signature), fn_real, fn_mine);
}

template<typename T>
void HookFunction(DWORD address, T &fn_real, PVOID fn_mine)
{
    HookFunction<T>(reinterpret_cast<PVOID>(address), fn_real, fn_mine);
}

template<typename T>
void HookFunction(PVOID target, T &fn_real, PVOID fn_mine)
{
    fn_real = reinterpret_cast<T>(target);

    HookFunction<T>(fn_real, fn_mine);
}

template<typename T>
void HookFunction(T &fn_real, PVOID fn_mine)
{
    DetourAttach(&(PVOID&)fn_real, fn_mine);
}

void ApplyHooks()
{
    DetourTransactionBegin();
    DetourUpdateThread(GetCurrentThread());

    DWORD function_address = 0x12345678;

    HookFunction<CClassFunction_t>(address, Real_CClassFunction, Mine_CClassFunction);

    DetourTransactionCommit();
}

BOOL APIENTRY DllMain(HINSTANCE hInstance, DWORD dwReason, LPVOID lpReserved)
{
    switch (dwReason)
    {
        case DLL_PROCESS_ATTACH:
        case DLL_THREAD_ATTACH:
        {
            DisableThreadLibraryCalls(hInstance);

            CreateThread(0, 0, (LPTHREAD_START_ROUTINE)ApplyHooks, 0, 0, 0);

            break;
        }
    }

    return TRUE;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T08:41:00.220

经过数小时的搜索和尝试找到解决方案，我想出了这个不错的小解决方案：

```
#include <windows.h>
#include <detours.h>

typedef void (__thiscall * CClassFunction_t)(void *__this, unsigned int unk1);
CClassFunction_t Real_CClassFunction;

void __fastcall Mine_CClassFunction(void *__this, int edx, unsigned int unk1)
{
    Real_CClassFunction(__this, unk1);
}

template<typename T>
void HookFunction(const char *module, char *signature, T &fn_real, PVOID fn_mine)
{
    HookFunction<T>(DetourFindFunction(module, signature), fn_real, fn_mine);
}

template<typename T>
void HookFunction(DWORD address, T &fn_real, PVOID fn_mine)
{
    HookFunction<T>(reinterpret_cast<PVOID>(address), fn_real, fn_mine);
}

template<typename T>
void HookFunction(PVOID target, T &fn_real, PVOID fn_mine)
{
    fn_real = reinterpret_cast<T>(target);

    HookFunction<T>(fn_real, fn_mine);
}

template<typename T>
void HookFunction(T &fn_real, PVOID fn_mine)
{
    DetourAttach(&(PVOID&)fn_real, fn_mine);
}

void ApplyHooks()
{
    DetourTransactionBegin();
    DetourUpdateThread(GetCurrentThread());

    DWORD function_address = 0x12345678;

    HookFunction<CClassFunction_t>(address, Real_CClassFunction, Mine_CClassFunction);

    DetourTransactionCommit();
}

BOOL APIENTRY DllMain(HINSTANCE hInstance, DWORD dwReason, LPVOID lpReserved)
{
    switch (dwReason)
    {
        case DLL_PROCESS_ATTACH:
        case DLL_THREAD_ATTACH:
        {
            DisableThreadLibraryCalls(hInstance);

            CreateThread(0, 0, (LPTHREAD_START_ROUTINE)ApplyHooks, 0, 0, 0);

            break;
        }
    }

    return TRUE;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T16:41:09.903

尝试使用：

```
union {
  bool (CDetour::*lpMyFunction)(unsigned int);
  PBYTE lpAddr;
} u; 
```

保存指针`u.lpMyFunction`并从中获取`u.lpAddr`

这是否解决了您的编译问题？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-19T09:16:38.003

是的，我真的很讨厌那些演员表，所以我自己编了：

```
// Cast a member function pointer that cannot have a reference taken to a void *
template <typename RET_TYPE, typename CLASS, typename...ARGs>
void* castToVoidPtr(RET_TYPE(CLASS::*&&pOriginalFunction)(ARGs...))
{
    union
    {
        RET_TYPE(CLASS::*pMemFn)(ARGs...);
        void* voidPtr;
    } cast = { pOriginalFunction };
    static_assert(sizeof(cast.pMemFn) == sizeof(cast.voidPtr), "Cannot cast this member function pointer to a void*.  Not the same size.");
    return cast.voidPtr;
}

// Cast a member function pointer to a void*&
template <typename RET_TYPE, typename CLASS, typename...ARGs>
void*& castToVoidPtr(RET_TYPE(CLASS::*&pOriginalFunction)(ARGs...))
{
    union
    {
        RET_TYPE(CLASS::*&pMemFn)(ARGs...);
        void*& voidPtr;
    } cast = { pOriginalFunction };
    static_assert(sizeof(cast.pMemFn) == sizeof(cast.voidPtr), "Cannot cast this member function pointer to a void*.  Not the same size.");
    return cast.voidPtr;
} 
```

您的解决方案的唯一问题是您将额外的 DWORD 推入堆栈（EDX 寄存器），这是不必要的。这些强制转换应该适用于您将使用它的所有情况。据我所知，它不适用于多重继承的类函数，这不是您可能用于绕道的东西，并且如果您要尝试，它将断言.

这将允许您这样做：

```
DetourAttach(&castToVoidPtr(CDetour::Real_MemFn), castToVoidPtr(&CDetour::My_MemFn)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-05T07:26:24.087

> `"void* castToVoidPtr(RET_TYPE(CLASS::*&&pOriginalFunction)(ARGs...))"`

这 && 正是你想要写的吗？VS2008 编译时报错。

# java - Entitymanager.flush() VS EntityManager.getTransaction().commit - 我应该更喜欢什么？

> ID：11048177
> 
> 赞同：51
> 
> 时间：2012-06-15T09:38:19.137
> 
> 标签：java, jpa, eclipselink

更新数据库时我应该更喜欢什么？两种方法的优缺点是什么？我什么时候应该使用其中一种？

```
public void disemployEmployee(Integer employeeId, Date endDate) {
    Employee employee = (Employee)em.find("Employee", employeeId);
    employee.getPeriod().setEndDate(endDate);
    em.flush();
}

public void disemployEmployee(Integer employeeId, Date endDate) {
    Employee employee = (Employee)em.find("Employee", employeeId);
    em.getTransaction().begin();
    employee.getPeriod().setEndDate(endDate);
    em.getTransaction().commit();
} 
```

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-06-15T10:17:45.227

在您的第一个示例中，数据的更改在遇到刷新后反映在数据库中，但它仍在事务中。

但在第二个示例中，您将立即提交事务。因此，对数据库进行了更改，事务也到此结束。

有时，刷新可能有助于在正在进行的事务之间保留数据，然后最终提交更改。因此，如果之后出现问题，您也可以回滚之前的更改，例如批量插入/更新。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-06-15T09:52:13.000

您确实阅读了有关刷新和提交的 javadoc，并且知道刷新仅用于**事务中**吗？它刷新（但不提交），而提交提交数据（显然）。它们是不同的；没有“偏好”。第一个例子是错误的，应该导致调用flush时出现异常（TransactionRequiredException）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-15T09:58:49.580

您的两个代码示例都不会持久化或合并要写入数据库的实体状态。

我认为比较`EntityManager.flush()`和不合适`EnityManager.EntityTransaction.commit()`。

flush() 必须包含在事务上下文中，除非需要（在极少数情况下），当 EntityTransaction.commit() 为您执行此操作时，您不必显式执行此操作。

请参阅此链接[在这种情况下是否需要调用flush()（JPA 接口）？](https://stackoverflow.com/questions/949427/is-it-necessary-to-call-a-flush-jpa-interface-in-this-situation)

请参阅此链接[Question about flushing with JPA before a query is called](https://stackoverflow.com/questions/4415211/question-about-flushing-with-jpa-before-a-query-is-called) for a scenario to use flush()

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-17T19:51:19.767

我会尽可能地进行容器管理事务。由于异常的可能性，Bean 管理的事务通常需要更多的代码。此外，它更容易出错（回滚、资源管理）。

也就是说，我会在容器管理模式下提交后使用刷新。这样我就可以在我的存储模块中捕获可能的 PersistenceExceptions 并将其转换为对我的用例模块更有意义的异常。这是因为我不想在这里处理特定于存储的异常，因为我可能会将存储模块换成不使用 JPA 的东西......这从未发生在我身上:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-22T08:29:16.337

我认为缺少的部分是，flush() 只是添加到数据源以准备提交，提供实际的 ID，但默认情况下不持久。

因此，如果您需要 flush() 作为 commit() 工作，您需要通过以下方式在 EntityManager 中将刷新模式设置为 Commit：

```
void setFlushMode(FlushModeType flushMode)
Set the flush mode that applies to all objects contained in the persistence context. 
```

请注意，FlushModeType 是一个具有以下两个值的枚举：

> FlushModeType AUTO（默认）在查询执行时进行刷新。自：JPA 1.0 FlushModeType COMMIT 在事务提交时进行刷新。提供程序可能会在其他时间刷新，但不是必须的。自：JPA 1.0

我希望这有帮助

# c# - 包装和大量数据的 TextBox 性能不佳

> ID：11048179
> 
> 赞同：3
> 
> 时间：2012-06-15T09:38:31.313
> 
> 标签：c#, wpf, textbox

使用 .NET 3.5，我在 WPF 中的文本框存在持久性问题。在启用换行的 TextBox 中有大量（5000 多行）数据时，窗口在调整大小时性能非常差。

这只发生在 TextWrapping="Wrap" 的情况下**。**绑定文本数据或仅以编程方式设置它没有区别。

代码实际上就像这样简单：

```
<TextBox Margin="12,39,337,29" Text="{Binding Output, Mode=OneWay}" TextWrapping="Wrap" VerticalScrollBarVisibility="Visible" HorizontalScrollBarVisibility="Disabled" /> 
```

文本绑定到单个字符串。绑定的数据没有被更改。

**编辑：**当窗口调整大小时，数据没有被改变，这就是我的意思。将来会更新。TextBox 不需要是可编辑的，但实际文本确实需要是可选择的。**/编辑。**

我快速玩过 AvalonEdit，它也有同样的问题。我找不到任何其他描述此问题的线程似乎很奇怪。

有什么建议吗？

谢谢，丰富

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T14:57:17.207

您可以对 windowResizeStart 事件做出反应并禁用文本块的换行。然后在调整大小完成时*只换行一次。*

我猜你获得了性能，但失去了一些视觉天赋。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-07-06T19:35:14.923

缓慢的部分是一次显示所有文本。在我的控件中的 TextBox 变得非常大并且有一个 ScrollViewer 用于处理非常大的 TextBox 的整个控件之前，我遇到了这个问题。

您几乎正在这样做，但是如果没有为您的高度/宽度设置最大值，我不确定您的 ScrollViewer 是否真的会被使用。

我的解决方案是使用 TextBox 内的内置 scrollViewer（您正在这样做），然后限制文本框高度/宽度的大小，以便它不会尝试一次性渲染 100% 的文本（并实际利用 TextBox 内的 ScrollViewer）

（仅供参考，我也喜欢使用 CanContentScroll=true，虽然我认为它不会影响速度）

```
<TextBox Margin="12,39,337,29" TextWrapping="Wrap" 
         Text="{Binding Output, Mode=OneWay}"
         ScrollViewer.CanContentScroll="true"
         VerticalScrollBarVisibility="auto" 
         HorizontalScrollBarVisibility="auto" 
         MaxHeight="600" MaxWidth="600"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T09:48:39.930

为什么不使用 a`FlowDocumentScrollViewer`而不是 a`TextBlock`

[http://msdn.microsoft.com/en-us/library/system.windows.controls.flowdocumentscrollviewer.aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.flowdocumentscrollviewer.aspx)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-15T12:18:22.273

如果文本有换行符，则将其分解为 List 字符串，然后使用带有 TextBlock 的 ListBox。如果您需要编辑，请使用 TextBox。ListBox 支持虚拟化。所以只有显示的文本需要调整大小。

这将多个空行连接到一个。并且有非标准的EOL。

```
bool lastNull = false;
string eol = ((char)174).ToString();
string[] docTextRaws = DocText.Split((char)174);
string docTextRaw;
for (Int32 j = 0; j < docTextRaws.Length; j++)
{
    docTextRaw = docTextRaws[j].TrimEnd();
    if (string.IsNullOrEmpty(docTextRaw))
    {
        if (!lastNull)
        {
            docTextDownloadLines.Add(eol);
            lastNull = true;
        }
    }
    else
    {
        docTextDownloadLines.Add(docTextRaw + eol);
        if (lastNull) lastNull = false;
    }
} 
```

# javascript - 输入焦点取决于 jQuery 更大的父元素

> ID：11048181
> 
> 赞同：0
> 
> 时间：2012-06-15T09:38:35.263
> 
> 标签：javascript, jquery, events, dom, user-interface

我想用 jQuery 做输入验证。每次用户模糊输入时，它都应该得到验证。验证不是问题，而是重点部分。

一些输入嵌入在更大的父元素中。父元素应该是 focusin 和 focusout 事件的指示器。换句话说：如果用户点击输入的父元素，它应该聚焦输入。

这是一个演示：

## [**jsFiddle 上的演示**](http://jsfiddle.net/qKAmu/3/)

在演示中，第一个输入被 a 包围，`ul`它是可点击的，并导致底层输入聚焦。第二个输入被 a 包围，`div`它什么都不做。观察控制台的输出。

这是从演示中获取的标记。**HTML**：

```
<ul>
<li>
    <input type="text" class="embed" />
</li>
</ul>

<div>
    <input type="text" class="normal" />
</div>​ 
```

**JavaScript**：

```
$('input').focusin(function(event) {
    console.log('input.' + $(this).attr('class') + ' focusin');
});

$('input').focusout(function(event) {
    console.log('input.' + $(this).attr('class') + ' focusout');
    // either here or in blur:
    // now i want to do some validation and display errors if there are any
});

$('input').blur(function(event) {
    console.log('input.' + $(this).attr('class') + ' blur');
    // either here or in focusout:
    // now i want to do some validation and display errors if there are any
});

$('ul').click(function(event){
    console.log('ul click');
    $('input.embed').focus();
});
​ 
```

**目前这些是我的问题和问题：**

1.  单击嵌入`input`时，它还会触发`ul`我不想要的单击事件。如果直接单击输入，我如何检测该事件？
2.  如果嵌入式`input`已经聚焦，并且我单击父`ul`级，它会触发的 focusout 事件`input`（这将触发验证）并由于`ul`单击处理程序而立即再次聚焦它。怎么能检测到这一点而什么也不做呢？因为事实上，从用户的角度来看，关注点并没有改变。
3.  `blur`和有什么区别`focusout`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T09:44:53.527

对于你的第一个问题：

```
$('ul input.embed').click(function(event){
    event.stopPropagation();
}); 
```

对于您的第三个问题，来自`jQuery`api 文档：

> 当某个元素或其中的任何元素失去焦点时，会将 focusout 事件发送到该元素。这与 blur 事件不同，它支持检测父元素失去焦点（换句话说，它支持事件冒泡）。

# marklogic - 支持包的申请代码不完整

> ID：11048182
> 
> 赞同：0
> 
> 时间：2012-06-15T09:38:43.613
> 
> 标签：marklogic

我在 Marklogic 中创建了一个示例应用程序并尝试从应用程序生成器生成一个支持包，如appbuilder.pdf 的应用程序生成器部分（第 16 页）中的**导航中所述。**此 zip 文件显示大小为 612 KB，但仅包含 4 个 XML 文件，如

> 信息.xml
> 
> 8054898124527514592.xml
> 
> 8504172290275228263.xml
> 
> 14220610187815029433.xml

PDF 说 zip 文件应该包含应用程序文件夹。似乎我错过了一些步骤。

请分享您在这方面的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T06:35:43.880

如果您认为这是一个错误，只需将其报告给 Marklogic 的支持即可。描述您创建示例应用程序、创建支持包、添加支持包并描述您认为缺少的内容的步骤。他们会让你知道事情是否应该如此。

请注意，此后有市长发布。可能值得更新并再次尝试..

！

# vb.net - 将文本插入到光标位置 VB 的文本框中

> ID：11048183
> 
> 赞同：3
> 
> 时间：2012-06-15T09:38:43.777
> 
> 标签：vb.net, cursor-position

我正在尝试弄清楚如何将字符串“End”插入到特定光标点的文本框中？（“？？？”在下面的代码中）

正如您在下面的代码中看到的那样，当用户在文本框中的键盘上单击返回时，就会发生这种情况。

我有代码来获取存储为整数“intcurrentcolumn”的游标索引。

谢谢

```
 Private Sub Enter_Click(ByVal Sender As System.Object, ByVal k As System.Windows.Forms.KeyEventArgs)

     Dim MyTextBox As TextBox = sender
     Dim intindex As Integer
     Dim intcurrentcolumn As Integer
     Dim NewString As String

     If k.KeyCode = Keys.Return Then

        k.SuppressKeyPress = True

        intindex = MyTextBox.SelectionStart
        intcurrentColumn = intindex - MyTextBox.GetFirstCharIndexFromLine(intcurrentLine)

        If intindex = MyTextBox.Text.Length Then

         NewString = MyTextBox.Text & "<End>"

        Else: 

        ???

        End If

        MyTextBox.Text = NewString

        'Sets cursor to end of textbox
        MyTextBox.Select(MyTextBox.Text.Length, 0)

      End If 
```

**提前致谢 ！**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T10:14:28.213

该`String.Insert`方法有效，但会重置通常不是您想要的光标位置（尽管您的代码无论如何都会重置它）。一个更好的选择是只设置[`SelectedText`](http://msdn.microsoft.com/en-us/library/system.windows.forms.textboxbase.selectedtext.aspx)：

```
MyTextBox.SelectedText = "<End>" 
```

在您的情况下，在插入字符串之前，所选文本的长度仅为 0 `"<End>"`。

这也使得`If…Else`区分变得不必要。

```
Private Sub Enter_Click(ByVal Sender As Object, ByVal k As System.Windows.Forms.KeyEventArgs)
    If k.KeyCode = Keys.Return Then
        Dim MyTextBox As TextBox = DirectCast(sender, TextBox)
        MyTextBox.SelectedText = "<End>"
        MyTextBox.SelectionStart = MyTextBox.Text.Length
        k.SuppressKeyPress = True
    End If
End Sub 
```

请注意，我还修复了您代码中的一个错误： to 的分配`sender`需要`MyTextBox`显*式*转换！如果您的原始代码已编译，您应该（！）设置`Option Strict On`. 这*对于*改进编译器的类型检查至关重要，并且应该被视为无条件要求¹。

此外，不要在使用变量之前声明它们。在您第一次为它们赋值时，尽可能在最晚的时候声明它们。这使得程序状态更易于跟踪，并且通常会导致代码更短。

* * *

¹（除非您经常使用 COM 后期绑定，在这种情况下，您可以在每个文件的基础上禁用它）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T09:47:48.790

看看[String.Insert](http://msdn.microsoft.com/en-us/library/system.string.insert.aspx)方法，像这样

```
MyTextBox.Text = MyTextBox.Text.Insert(intindex, "<End>") 
```

# python - 如何计算类似于YouTube的短定长混淆ID（例如2WNrx2jq184）

> ID：11048184
> 
> 赞同：5
> 
> 时间：2012-06-15T09:38:53.710
> 
> 标签：python, google-app-engine, encryption, encoding

我的数据库中的每个用户对象都有一个增量 ID（1、2、3，...）。查看用户配置文件的 URL 包含用户对象的 ID；例如[http://www.example.com/users/1](http://www.example.com/users/1)。这样每个人都可以看到网站上有多少用户，用户群的增长速度等等。我不想泄露这些信息。

我想将增量 ID 转换为 Base58 格式的固定长度字符串，因此 URL 看起来像[http://www.example.com/users/2WNrx2jq184](http://www.example.com/users/2WNrx2jq184)另外，我需要将字符串转换回原身份证。逆向函数应该不容易逆向工程。

我为此目的找到的最好的 Python 代码是[https://github.com/JordanReiter/django-id-obfuscator](https://github.com/JordanReiter/django-id-obfuscator)。这非常好，但在某些情况下，它会添加一个`0`和/或`.`字符，这会导致字符串不在 Base58 中且长度不固定。（参见[utils.py](https://github.com/JordanReiter/django-id-obfuscator/blob/master/id_obfuscator/utils.py)第 24 和 29 行。）

如何改进 django-id-obfuscator 以生成固定长度的 base58 混淆 ID，或者如何在 Python 中创建此类混淆 ID？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T09:44:11.053

如果您想正确执行此操作，请获取您的用户 ID，用前导零填充，然后使用 AES 之类的东西对其进行加密，并使用 base58 对结果进行编码。要取回 ID，只需解码、解密和`int()`结果。

所以对于加密：

```
>>> from Crypto.Cipher import AES
>>> import base64
>>> obj = AES.new('yoursecretkeyABC')
>>> x = base64.encodestring(obj.encrypt("%016d"%1))
>>> x
'tXDxMg1YGb1i0V29yCCBWg==\n' 
```

和解密

```
>>> int(obj.decrypt(base64.decodestring(x)))
1 
```

如果您可以使用弱加密，您也可以简单地使用密钥对填充的 ID 进行异或运算：

```
>>> key = [33, 53, 2, 42]
>>> id = "%04d" % 1
>>> x = ''.join([chr(a^ord(b)) for a, b in zip(key, id)])
>>> x
'\x11\x052\x1b'
>>> int(''.join([chr(a^ord(b)) for a, b in zip(key, x)]))
1 
```

但这不太安全，因为您永远不应该对多条消息使用相同的 OTP。还要确保密钥与填充 ID 的长度相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-28T19:45:47.557

这是我偶然发现的一个老问题。我最近发现了`hashids`解决这个问题的库，它可用于多种编程语言：

[http://hashids.org](http://hashids.org)

# .net - 在客户端浏览器中打开 Excel(xlsb) 文件

> ID：11048185
> 
> 赞同：0
> 
> 时间：2012-06-15T09:38:57.057
> 
> 标签：.net, excel

我有一个内置在 excel 中的计算器，有按钮标签和相应的代码来根据用户输入计算溢价。我想在浏览器中显示这个 excel，以便用户可以在线使用它。

由于计算器很复杂，如果我能做到这一点，它将节省大量的开发时间。

> 它是一个 xlsb 文件。

知道如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T09:41:44.767

你能把它转换成[谷歌文档](http://docs.google.com)然后嵌入吗？

编辑：刚刚意识到，如果你的按钮后面有代码，这将不起作用，你有按钮后面的代码吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T16:01:20.680

三种策略：

*   将 Excel 工作簿加载到 <iframe>
*   将其加载到新的浏览器窗口中
*   [在jQuery 模式对话框](http://jqueryui.com/demos/dialog/)中加载它

# php - php preg_replace 任何文本+斜杠（如果有的话）

> ID：11048186
> 
> 赞同：0
> 
> 时间：2012-06-15T09:39:05.063
> 
> 标签：php, regex, preg-replace

**类型：**

```
$str = 'folder';
$str = 'folder/subfolder'; 
```

**期望的结果：**

```
$str = '';
$str = 'subfolder'; 
```

**试图：**

```
// Works for "folder/subfolder"
$str = preg_replace('/.*?\//i', '', $str); 
```

**注意：** “文件夹”是未知的。

任何帮助表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T09:43:50.690

```
preg_replace('#^[^/]+/?#', '', 'folder'); 
```

应该管用。这将删除字符串开头的非斜杠字符（文件夹名称）和之后的斜杠（或者不删除，如果文件夹名称是孤立的）。

# javascript - 移动网络应用程序

> ID：11048195
> 
> 赞同：0
> 
> 时间：2012-06-15T09:39:31.780
> 
> 标签：javascript, ios5, sencha-touch-2

我刚学了 Sencha Touch 2 框架，我想从 Sencha 连接到数据库，它可以是 Select, insert, update, delete (SQL)

有什么简单的代码和想法来学习吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T09:47:18.603

HTML5 LocalStorage 是离线数据的方式。

请阅读 Sencha 文档。

开始阅读有关数据包的内容：[SenchaDataPackage](http://docs.sencha.com/touch/2-0/#!/guide/data)

**编辑** 您也可以参考[这个](https://stackoverflow.com/questions/10007805/i-want-an-sample-sencha-touch-application-that-deals-with-database)问题。

希望能帮助到你。

# mercurial - 获取从默认到 Mercurial 功能分支的错误修复

> ID：11048196
> 
> 赞同：5
> 
> 时间：2012-06-15T09:39:36.167
> 
> 标签：mercurial, branching-and-merging

如何将我在默认分支上所做的错误修复放入 mercurial 中的命名分支中？我最近开始研究一项新功能，所以我想我会在一个分支中完成这项工作（我以前没有真正做过），这样我就可以将更改保留在主默认分支之外，直到我完成它们的工作并且该功能已准备好部署。我的想法是我可以更新到默认分支并根据需要应用任何错误修复。

![乌龟汞分支](../Images/777fa6f28e8bfb36c67694173ac550ad.png)

现在我想把错误修复放到我命名的分支中。提示（rev 739）有我想合并到 BoardSummary 分支中的更改。我知道我可以合并，但我不想将我的 BoardSummary 更改带入默认分支。

我查看了[mercurial: apply a bugfix change from stable named branch to dev branch](https://stackoverflow.com/a/7171576/96505) answer，但这对我来说没有意义。

**编辑**：我同意“然后你发现变更集 2 引入了一个错误”，在我的情况下，我回到 732 修复了错误并提交（到默认值）。这个想法是在我分支之前修复已经到位。但是现在如何在不将 2 个分支合并在一起的情况下将该修复程序放入 738 中？看起来该错误实际上已在 739 中修复 - 因此*尚未在 BoardSummary 分支中*。这似乎是第二棵树在答案中显示的内容，但第三张图解释为“你会这样做” - 我不明白那一点

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T11:41:02.957

显然，您的*默认*分支仅包含*BoardSummary* 分支中不存在的一个变更集。您应该将*default*合并到*BoardSummary*中，而不是相反。这样，*BoardSummary*将得到修复，并且所有*BoardSummary*都不会处于*default*状态。

总结一下：

```
$ hg up BoardSummary
$ hg merge default
$ hg commit -m "Merge the fix for #247" 
```

## 一个解释

有多种分支可以使用。最常见的是：

*   用于维护已发布版本的稳定（生产）分支，
*   默认（master，trunk）分支，包含或多或少稳定的开发活动，
*   功能分支，不够成熟，无法合并到主干。

这里的主要思想是**从 stable 合并到 default 以及从 default 合并到 feature 总是安全的**。这意味着就变更集而言，任何稳定分支都是默认分支的子集，而默认分支是功能分支的子集。

例如，您正在修改功能分支*new-dal*（主要功能）中的数据访问级别。同时，您在*默认情况下添加了几个新报告（次要功能），并在**1.0-stable*中发现并修复了一个错误。好吧，只需合并从最旧到最新的分支（*1.0-stable* -> *default* -> *new-dal*），仅此而已。

这在 Mercurial wiki 上得到了很好的解释：[标准分支：发布分支](http://mercurial.selenic.com/wiki/StandardBranching#Release_branches)。

## 你的情况

在您的情况下，*BoardSummary*显然是一个功能分支，因此您可以毫不犹豫地将默认值合并到其中。仅当您准备将新功能集成到默认值时，才应执行相反的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T11:19:51.817

首先，您应该从历史记录中回滚/删除提交 739（这是您的修复）。然后你在 r732 上提交修复。这将创建一个新的头，应该是新的 r739。您的历史记录应如下所示：

```
 r329
    |
--r232-----default branch
       \
        \
         feature branch 
```

现在您将新的 head (r329) 合并到默认分支和功能分支中。现在历史应该看起来像链接答案中的最后一棵树。

# iphone - 如何从数组中解析的 JSON 中选择图像

> ID：11048197
> 
> 赞同：0
> 
> 时间：2012-06-15T09:39:37.197
> 
> 标签：iphone, objective-c, ios, ipad, xcode4.2

我正在使用 JSON 解析，我将数据放入名为**JSON Array**的数组中。在控制台中看起来像

```
JSON Array=(
 {
    "created_by" = 42;
    "created_on" = "2012-02-29 11:23:37";
    "file_description" = "";
    "file_is_downloadable" = 0;
    "file_is_forSale" = 0;
    "file_is_product_image" = 1;
    "file_meta" = "";
    "file_mimetype" = "image/jpeg";
    "file_params" = "";
    "file_title" = "hand shovel";
    "file_type" = product;
    "file_url" = "images/stories/virtuemart/product/cca3cd5db813ee6badf6a3598832f2fc.jpg";
    "file_url_thumb" = "images/stories/virtuemart/product/resized/cca3cd5db813ee6badf6a3598832f2fc_90x90.jpg";
    "locked_by" = 0;
    "locked_on" = "0000-00-00 00:00:00";
    "modified_by" = 42;
    "modified_on" = "2012-02-29 11:23:37";
    ordering = 0;
    "product_name" = "Hand Shovel";
    published = 0;
    shared = 0;
    "virtuemart_category_id" = 1;
    "virtuemart_media_id" = 13;
    "virtuemart_product_id" = 1;
    "virtuemart_vendor_id" = 1;
},

    {
    "created_by" = 42;
    "created_on" = "2012-02-29 11:35:09";
    "file_description" = "";
    "file_is_downloadable" = 0;
    "file_is_forSale" = 0;
    "file_is_product_image" = 1;
    "file_meta" = "";
    "file_mimetype" = "image/jpeg";
    "file_params" = "";
    "file_title" = "our ladder";
    "file_type" = product;
    "file_url" = "images/stories/virtuemart/product/8cb8d644ef299639b7eab25829d13dbc.jpg";
    "file_url_thumb" = "images/stories/virtuemart/product/resized/8cb8d644ef299639b7eab25829d13dbc_90x90.jpg";
    "locked_by" = 0;
    "locked_on" = "0000-00-00 00:00:00";
    "modified_by" = 42;
    "modified_on" = "2012-02-29 11:35:09";
    ordering = 0;
    "product_name" = Ladder;
    published = 0;
    shared = 0;
    "virtuemart_category_id" = 3;
    "virtuemart_media_id" = 8;
    "virtuemart_product_id" = 2;
    "virtuemart_vendor_id" = 1;
}, 
```

现在，我需要选择“ **file_url_thumb** ”，它实际上是单独数组中的图像。请让我知道我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T09:50:50.950

```
//Your array has two dictionary ..

for(NSMutableDictionary *dict in JSON_Array){
       NSString *urlString =  [dict objectForKey:@"file_url_thumb"];
       if(urlString){
       NSURL *url = [NSURL urlWithString:urlString];
       NSData* imageData = [[NSData alloc] initWithContentsOfURL:url]];
       UIImage* image = [[UIImage alloc] initWithData:imageData];
       //show your image on imageview
      }
} 
```

希望对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T09:48:24.607

```
NSString *str_URL =[ [json objectAtIndex:anIndex] valueForKey:@"file_url_thumb"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T09:53:37.240

```
NSString *urlString = [[jsonArray objectAtIndex:0] objectForKey:@"file_url_thumb"]; 
```

这将为您提供“file_url_thumb”作为字符串的值。

# css - 删除滚动条，但不剪辑之前或之后的内容？

> ID：11048199
> 
> 赞同：0
> 
> 时间：2012-06-15T09:39:44.293
> 
> 标签：css, scroll, overflow

我正在使用 :before 和 :after 在我的主要内容块之外创建一些元素，它们的宽度为：100%，因此它们填充了浏览器的整个长度。

不幸的是，他们在屏幕底部添加了一个我不想要的滚动条。如果我使用溢出：隐藏，滚动条会消失，但设计会被剪裁，并且我会丢失网站两侧的内容。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T09:44:01.117

元素的宽度总计 100% + 100% = 200%（我在这里猜）主体宽度，然后添加您的主要内容块宽度 - 这就是您获得水平滚动条的原因。

作为一般建议，将代码发布在 jsfiddle.net 上，以便我们查看和使用它，因为没有它就无法为您提供更多帮助

# trigger.io - 无法使用 forge (trigger.io) 启动带有 Chrome 扩展的应用程序

> ID：11048205
> 
> 赞同：-1
> 
> 时间：2012-06-15T09:40:09.837
> 
> 标签：trigger.io, forge

我已经用 forge 创建了应用程序，并添加了 chrome 扩展，但是当我使用 chrome 运行时，总是显示以下错误：

```
Currently it is not possible to launch a Chrome extension via this interface.
The required steps are:

    1) Go to chrome:extensions in the Chrome browser
    2) Make sure "developer mode" is on (top right corner)')
    3) Use "Load unpacked extension" and browse to D:\mobile-app\test/development/chrome 
```

但我真的完成了上述步骤，我不知道会发生什么。

我想知道如何使用不同的 Android sdk 和分辨率模拟器进行测试？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T10:03:00.967

Chrome 无法让我们自动安装浏览器扩展程序。因此，您必须手动安装扩展程序。

为此，在 Chrome 中（见下图）：

1.  在地址栏中输入 chrome:extensions
2.  开启开发者模式
3.  单击加载解压缩的扩展程序

![如何安装 Chrome 扩展程序](../Images/16fb6c1652109f3897bbb548dcd7f57b.png)

如果您有关于 Android SDK 的单独问题，最好在不同的线程中提问，或联系 support@trigger.io。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-10T15:19:14.070

我有同样的问题，使用：

```
forge run chrome 
```

尝试在 Chrome 网络浏览器中运行该应用程序。我认为给出的 3 个步骤是安装一个扩展，然后允许`forge run chrome`启动 Web 应用程序。我不明白为什么在安装扩展程序后（当然没有定义按钮），似乎没有任何改变。我没有意识到我的应用程序的 Chrome 扩展版本，出现在工具栏上，甚至是可能的！

我应该使用：

```
forge run web 
```

在（默认）浏览器中启动应用程序。

# r - 在单个列表中转换列表列表

> ID：11048208
> 
> 赞同：16
> 
> 时间：2012-06-15T09:40:42.047
> 
> 标签：r

```
A = data.frame( a = c(1:10), b = c(11:20) )
B = data.frame( a = c(101:110), b = c(111:120) )
C = data.frame( a = c(5:8), b = c(55:58) )

L = list(list(B,C),list(A),list(C,A),list(A,B,C),list(C)) 
```

我有一个数据框列表 L 但我必须创建一个包含所有数据框的列表，如下所示（数据框的顺序在 L 和新 L 中应保持相同。）

```
NewL = list( B,C,A,C,A,A,B,C,C ) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-15T09:48:35.467

尝试阅读手册；）和

```
unlist(L,recursive=F) 
```

# jquery - jQuery addClass() 和 removeClass() 同步

> ID：11048210
> 
> 赞同：0
> 
> 时间：2012-06-15T09:40:48.817
> 
> 标签：jquery, css

我有下表：

```
<table>
<tr class="change"><td>Click to change</td></tr>

<tbody id="p1" class="now">
<tr>...</tr>
<tr>...</tr>
<tr>...</tr>
<tr>...</tr>
</tbody>
<tbody id="p2" class="next">
<tr>...</tr>
<tr>...</tr>
<tr>...</tr>
<tr>...</tr>
</tbody>
<tbody id="p3" class="previous">
<tr>...</tr>
<tr>...</tr>
<tr>...</tr>
<tr>...</tr>
</tbody>
</table> 
```

当我单击更改行时，我想隐藏具有“现在”类的 tbody 并显示具有“下一个”类的实体。

我的 Jquery（只计算现在和下一次）：

```
$(document).ready(function(){

$('.change').click(function(){

    $('.now').hide('slow', function(){
        $('.next').show('slow', function(){     

        $('#p1').removeClass('recent');
        $('#p2').removeClass('next');

        $('#p1').addClass('next');
        $('#p2').addClass('recent'); 

        });
    });

}); 
```

});

我知道我做错了，所以我想问你，如何以某种方式很好地同步它，当我点击“更改”时，我的“现在”变为“上一个”，“下一个”变为“现在”而“上一个”变成下一个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T09:44:17.997

尝试

```
$(document).ready(function () {
    $('.change').click(function () {
        $('.now').hide('slow', function () {
            $('.next').show('slow', function () {
                $prev = $('.previous');
                $now = $('.now');
                $next = $('.next');
                $prev.removeClass('previous').addClass('next');             
                $now.removeClass('now').addClass('previous');
                $next.removeClass('next').addClass('now');

            });
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T09:52:31.543

```
$('.change').click(function(){
    var now = $('.now');
    var next = $('.next');
    var previous = $('.previous');
    now.hide('slow', function(){
        next.show('slow');
        previous.removeClass('previous').addClass('next');             
        now.removeClass('now').addClass('previous');
        next.removeClass('next').addClass('now');
    });
});​ 
```

[演示](http://jsfiddle.net/97L2s/1/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-15T09:45:54.337

```
$('.change').click(function() {
    $('.now').attr('class', 'previous');
    $('.next').attr('class', 'now');
    $('.previous').attr('class', 'next');
}); 
```

# vim - Git 不使用 vimdiff

> ID：11048214
> 
> 赞同：1
> 
> 时间：2012-06-15T09:40:59.533
> 
> 标签：vim, vimdiff

我正在使用*meld*和 git 进行合并，我想尝试 vimdiff。配置了与 git 的三路合并，然后是我自己的 diff 命令：

```
[merge]
    tool = vimdiff3
    conflictstyle = diff3
[mergetool "vimdiff3"]
    cmd = gvim -f -d \"$LOCAL\" \"$BASE\" \"$REMOTE\" \"$MERGED\" 
```

但是每次我尝试运行 mergetool 时，git 都会快速响应“[file] 似乎没有变化”并跳过合并。

最重要的是，我想获得真正的三向合并（四个文件），底部有合并窗口，这可行，但我看到很多报告它在互联网上不起作用：

```
 cmd = gvim -f -d -c \"wincmd J\" \"$MERGED\" \"$LOCAL\" \"$BASE\" \"$REMOTE\" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-12T19:42:01.240

您可以检查 upcomming`mergetools/vimdiff3`设置（对于 git 2.0.x Q3 2014）是否适合您。

请参阅[Felipe Contreras (](https://github.com/felipec) [)的提交](https://github.com/felipec)[7c147b7](https://github.com/git/git/commit/7c147b77d34f072c40b912fafba499727921fa6e)，最近才在[提交 3a9dae7](https://github.com/git/git/commit/3a9dae783bb66c18409d42d07949456dde8c4c62)（2014 年 6 月）中合并：[`felipec`](https://github.com/felipec)

### `mergetools`: 添加`vimdiff3`模式

> 它类似于默认设置，只是其他窗口是隐藏的。
> 这确保了删除/添加的颜色在主合并窗口上仍然可见，但其他窗口不可见。
> 
> 特别适用于 merge.conflictstyle=diff3。

```
gvimdiff3|vimdiff3)
  if $base_present
  then
    "$merge_tool_path" -f -d -c 'hid | hid | hid' \
      "$LOCAL" "$REMOTE" "$BASE" "$MERGED"
  else
    "$merge_tool_path" -f -d -c 'hid | hid' \
      "$LOCAL" "$REMOTE" "$MERGED"
  fi
;; 
```

新文件[`mergetools/vimdiff3`](https://github.com/git/git/blob/3a9dae783bb66c18409d42d07949456dde8c4c62/mergetools/vimdiff3)已添加，这意味着您需要做的就是：

```
git mergetool --tool=vimdiff3 
```

（无需配置`mergetool.vimdiff3.cmd`）

# gwt - 二进制数据和 GWT

> ID：11048223
> 
> 赞同：2
> 
> 时间：2012-06-15T09:41:27.233
> 
> 标签：gwt, binary, bytearray

已经有几个关于二进制数据和 GWT 的问题。阅读它们后，我仍然不确定以下是否可能（尽管我是一个完整的 GWT 初学者！）：

我有一些非常复杂的数据文件，它们只以二进制形式存在，我无法将它们转换为 XML 或 JSON 之类的东西。我有一个封闭的源代码库，尽管它接受一个 byte[] 并返回一个我可以使用的 Java 对象。为了让我的 GWT 应用程序运行，我“打印”出其中一个二进制数据文件，并将生成的 byte[] 硬编码到我从 GWT 应用程序代码访问的 .java 文件中。一切正常。显然这只是一个测试，在部署的应用程序中我无法对这些数据文件进行硬编码。我想将它们放在我的 GWT 应用程序所在的目录中，并用我的 GWT 应用程序“加载”它们。

我认为我可以使用 GWT 从我的服务器“加载”文本文件，对吧？为什么我不能用 GWT 读取二进制数据？或者我可以将二进制数据文件作为文本读取，将字符串读取为字节 []？我读了很多关于 base64 编码的内容，并且 GWT 可以阅读它，尽管我并不真正理解他们在说什么。我可以将我的服务器配置为以 base64 编码的形式提供这些二进制数据文件，然后使用 GWT 读取它们吗？

还是有其他解决方案？如果我能提供帮助，我不想碰任何 JS 代码。这就是我开始使用 GWT 的原因；）

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T07:35:31.733

假设我们使用的是 HTML 4。

GWT 客户端无法“读取”文件。GWT 客户端是在浏览器上运行的 javascript。浏览器安全不允许您读取本地文件。您必须让 servlet 代理读取服务器上的文件。

您设置文件的 mime 类型是因为您希望浏览器下载文件并调用本地 PC 来调用适当的软件 - 例如，pdf 来调用 pdf 阅读器或 xls 来调用 ms excel。与 GWT Java 或 Javascript 无关（启用下载除外）。

为什么需要 GWT 客户端来读取二进制文件？如果你这样做了，你的架构可能是错误的。“错”是个不客气的词。也许，错位是一个更好的词。您对 AJAX 瘦客户端-服务器的概念是错位的。一进GWT的大门，就把你的桌面处理理念和习惯丢在门口。

**GWT 是 Java 但不是 Java**

我一直不得不提醒人们，GWT Java 只是 Javascript 的一种更连贯的表示。当您使用 GWT Java 进行编码时，请始终记住您实际上是在使用 Javascript 而不是 Java 进行编码。所有 Java 源代码都被翻译成 Javascript

因此，GWT 编译器需要在源代码中提供所有 Java 类。GWT 编译器无法将 Java 字节码 jar/类文件翻译成 Javascript。如果您的库在字节码中，或者您的源库在调用链的任何位置调用字节码库，则编译将失败。

**服务器端和客户端 GWT 之间的混淆**

GWT RPC 有时会让 GWT 新手感到困惑。他们似乎没有意识到远程 servlet 是唯一被编译成字节码的部分，因为它是在服务器上运行的。特别是如果您使用的是 Vaadin - 因为他们故意模糊了服务器和浏览器之间的界限。所以 GWT 新手开始想，“为什么我的字节码库只在应用程序的某些部分工作？”

**ajax 客户端服务器架构**

GWT 只是一个支持 Web 的 UI。为什么你不能在服务器上做任何你想做的事情，让服务器反映它正在做什么或已经对 UI 做了什么？为什么一定要在浏览器上完成？

想象一下您的 GWT 接口是一个增强的 JSP。假设您正在编写一个 JSP。您是否让您的 JSP 将您的二进制数据吸入浏览器并让 JSP 生成 Javascript 以分析那里的二进制数据？

我编写了复杂的统计分析，我只是将浏览器用作服务器上正在执行的操作的反映。工程师认为他/她正在他/她的 PC 上运行分析。生成图表/报告。但这一切都是通过调用SAS在服务器上完成的。

**面向服务的模式/架构**

您的服务器将提供服务。您的浏览器 GWT 客户端将请求这些服务。打开文件，读取文件，分析文件，生成分析的可视化/mime 表示并将其传递给浏览器。只需将 GWT 浏览器客户端视为基于服务器的操作的显示监视器。GWT 是一个魔术师的把戏，可以帮助我变出幻觉，让工程师感觉他们正在本地 PC 上执行分析。当然，作为工程师，他们中的大多数人都知道浏览器实际上并没有在做这项工作。

当您的用户对分析感到满意时，让您的服务生成结果的 mime 表示，以便浏览器可以下载它以调用 mime 映射的适当本地 PC 软件。

在服务器上执行并将其反映在浏览器上。

**进一步编辑**：关于二进制数据......

在 Web 应用程序中使用 base64 编码背后的动机：身份验证令牌、图片、音频文件的传输——这样它们的二进制表示和排序就不会被字节序等架构细微差别弄乱。

例如，不要尝试编写浏览器应用程序来读取原始二进制电子表格 - 始终让服务器将其转换为 XML 或 JSON（最好是 JSON），其中任何二进制元素都应进行 base64 编码，然后再将其发送到浏览器应用程序。或者，如果您的人生目标是攀登珠穆朗玛峰，请发明一种与架构无关的编码来代替 base64 来传输二进制数据。

如果用于浏览器的操作系统处理（如音频、图片、pdf），则仅使用二进制信息。发送仅由 javascript 例程处理的二进制数据毫无意义。javascript 例程将不得不使用无关的处理时间来翻译它（除非再一次，如果你的生活目标是攀登......）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-16T01:40:29.663

客户端：

```
@Override
public void onModuleLoad()
{
    RequestBuilder rb = new RequestBuilder(RequestBuilder.GET, "/test");
    try
    {
        rb.sendRequest(null, new RequestCallback()
        {
            @Override
            public void onResponseReceived( Request request, Response response )
            {
                String encoded = response.getText();
                byte[] data = decode(encoded);
                System.out.println(Arrays.toString(data));
            }

            @Override
            public void onError( Request request, Throwable exception )
            {
            }
        });
    }
    catch( RequestException e )
    {
        e.printStackTrace();
    }
}

private final static String base64chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";

public static byte[] decode( String s )
{

    // remove/ignore any characters not in the base64 characters list
    // or the pad character -- particularly newlines
    s = s.replaceAll("[^" + base64chars + "=]", "");

    // replace any incoming padding with a zero pad (the 'A' character is
    // zero)
    String p = (s.charAt(s.length() - 1) == '=' ? (s.charAt(s.length() - 2) == '=' ? "AA" : "A") : "");
    s = s.substring(0, s.length() - p.length()) + p;
    int resLength = (int) Math.ceil(((s.length()) / 4f) * 3f);
    byte[] bufIn = new byte[resLength];
    int bufIn_i = 0;

    // increment over the length of this encrypted string, four characters
    // at a time
    for( int c = 0; c < s.length(); c += 4 )
    {

        // each of these four characters represents a 6-bit index in the
        // base64 characters list which, when concatenated, will give the
        // 24-bit number for the original 3 characters
        int n = (base64chars.indexOf(s.charAt(c)) << 18) + (base64chars.indexOf(s.charAt(c + 1)) << 12)
                + (base64chars.indexOf(s.charAt(c + 2)) << 6) + base64chars.indexOf(s.charAt(c + 3));

        // split the 24-bit number into the original three 8-bit (ASCII)
        // characters
        char c1 = (char) ((n >>> 16) & 0xFF);
        char c2 = (char) ((n >>> 8) & 0xFF);
        char c3 = (char) (n & 0xFF);

        bufIn[bufIn_i++] = (byte) c1;
        bufIn[bufIn_i++] = (byte) c2;
        bufIn[bufIn_i++] = (byte) c3;
    }

    byte[] out = new byte[bufIn.length - p.length()];
    System.arraycopy(bufIn, 0, out, 0, out.length);
    return out;
} 
```

服务器端（Java）：

```
@Override
public void doGet( HttpServletRequest request, HttpServletResponse response ) throws ServletException, IOException
{
    byte[] binaryData = new byte[1000];
    for( int i = 0; i < 1000; i++ )
        binaryData[i] = (byte) (Byte.MIN_VALUE + (i % (Math.pow(2, Byte.SIZE))));
    System.out.println("Sending: " + Arrays.toString(binaryData));

    byte[] base64Encoded = org.apache.commons.codec.binary.Base64.encodeBase64(binaryData);

    response.setContentType("application/octet-stream");
    PrintWriter out = response.getWriter();
    out.write(new String(base64Encoded));
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-15T13:38:13.220

对的，这是可能的。

两种解决方案取决于数据类型。

1.  **动态**的（如果二进制数据是动态的并且可能会改变）：
    只需 Base64 在后端对二进制数据进行编码并提供服务（即 GET 请求）。然后，您可以使用任何 GWT 的通信协议（请参阅[此处](https://developers.google.com/web-toolkit/doc/latest/DevGuideServerCommunication)了解更多详细信息）从后端检索数据。
    然后，您必须对数据进行 base64 解码并使用它（因为您已经解决了它）。

2.  **静态**（如果二进制数据不会改变并且在编译期间已知）：
    您可以使用[ClientBundle](https://developers.google.com/web-toolkit/doc/latest/DevGuideClientBundle)（即：DataResource）在编译期间生成这些二进制文件，然后可以在客户端自动检索它们而无需手动设置转移它们。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-04-16T22:22:14.257

这是一个解决方案，可让您轻松地从任何 URL 读取字节：

```
 XMLHttpRequest request = XMLHttpRequest.create();
        request.open("GET", "http://127.0.0.1:8888/sample/index.bin");
        request.setResponseType(ResponseType.ArrayBuffer);
        request.setOnReadyStateChange(new ReadyStateChangeHandler() {

            @Override
            public void onReadyStateChange(XMLHttpRequest xhr) {
                if (xhr.getReadyState() == XMLHttpRequest.DONE) {
                    if (xhr.getStatus() == 200) {
                        ArrayBuffer buffer = xhr.getResponseArrayBuffer();
                        Uint8Array array = TypedArrays.createUint8Array(buffer);
                        System.out.println("got " + array.length() + " bytes: ");
                        for (int i = 0; i < array.length(); i++) {
                            System.out.println(array.get(i));
                        }
                    } else {
                        System.out.println("response status: " + xhr.getStatus() + " " + xhr.getStatusText());
                    }
                }
            }
        });
        request.send(); 
```

# connection-pooling - 如何在tomcat7中配置JDNI

> ID：11048231
> 
> 赞同：0
> 
> 时间：2012-06-15T09:41:54.027
> 
> 标签：connection-pooling, tomcat7

我只是有一个测试。在 $CATALINA_HOME/conf/context.xml 中配置 jndi，如下所示：

```
<Resource name="jdbc/db" auth="Container" type="javax.sql.DataSource"         driverClassName="oracle.jdbc.OracleDriver"     url="jdbc:oracle:thin:@tnsname" username="test"     password="test" maxActive="20" maxIdle="10" defaultAutoCommit="false" maxWait="5000"     validationQuery="select 1 from dual" testWhileIdle="true" timeBetweenEvictionRunsMillis="5000" removeAbandoned="true" removeAbandonedTimeout="30" logAbandoned="true" /> 
```

我没有在任何其他地方配置它，比如 $CATALINA_HOME/conf/server.xml 或 /WEB-INF/web.xml 或 WEB-INF/context.xml。但是我仍然可以在 JAVA 代码中正常使用它。

但是从[http://tomcat.apache.org/tomcat-7.0-doc/jndi-resources-howto.html](http://tomcat.apache.org/tomcat-7.0-doc/jndi-resources-howto.html)看来，至少需要为 JNDI 配置两个文件。

那么谁能告诉我如何使用标准方法在tomcat中配置JDNI。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T15:08:22.100

您在应用程序的 context.xml 文件中为应用程序正确配置了 JNDI 数据源。在 web.xml 中配置 JNDI 数据源的功能保留在 Tomcat 7.0 中，以便与旧版本的 Tomcat 兼容，如果我没记错的话，还可以兼容旧版本的 Java EE 规范。

# linux-kernel - 在 Linux 中处理硬件中断

> ID：11048234
> 
> 赞同：0
> 
> 时间：2012-06-15T09:42:01.953
> 
> 标签：linux-kernel, linux-device-driver, embedded-linux

我正在运行 Linux 2.6 的嵌入式 linux 平台上工作。我很想知道如何执行以下操作。

1) 我有一个硬件中断源 irq7，它显示在 /proc/interrupts

cat /proc/中断 | grep IRQ7

M547X_8X 71: 1916076 PCI IRQ7

2) 对于 PCI IRQ7，每按一次按钮，第 3 个值就会改变

M547X_8X 71：2177862 PCI IRQ7

这不意味着我的开关按下被识别了吗？

现在，当我按下此按钮时，我想从睡眠状态触发用户程序。如何使用中断或信号编写此用户空间程序？

我应该为此编写一个驱动程序吗？

你能建议我应该研究的资源吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T09:24:15.777

你应该看看 linux 上的 gpio 密钥。将中断导出到 /dev/input/eventXXX 后，您可以使用 evtest 工具从用户空间进行检查。

# git - 创建存储库的错误：您是否在服务器上运行了 git update-server-info？

> ID：11048245
> 
> 赞同：1
> 
> 时间：2012-06-15T09:42:46.803
> 
> 标签：git, github

我对 git 很陌生。我想创建一个名为 Common-Lib 的存储库，下面是我使用的命令。

```
E:\My Doc\programming\git\Common-Lib>touch README

E:\My Doc\programming\git\Common-Lib>git init
Initialized empty Git repository in E:/My Doc/programming/git/Common-Lib/.git/

E:\My Doc\programming\git\Common-Lib>git add README

E:\My Doc\programming\git\Common-Lib>git commit -m "first commit"
[master (root-commit) 5e25a0d] first commit
 0 files changed
 create mode 100644 README

E:\My Doc\programming\git\Common-Lib>  git remote add origin https://github.com/fxbird/Common-Lib.git

E:\My Doc\programming\git\Common-Lib>git push -u origin master
fatal: https://github.com/fxbird/Common-Lib.git/info/refs not found: did you run git update-server-info on the server?

E:\My Doc\programming\git\Common-Lib>git update-server-info

E:\My Doc\programming\git\Common-Lib>git push -u origin master
fatal: https://github.com/fxbird/Common-Lib.git/info/refs not found: did you run git update-server-info on the server?

E:\My Doc\programming\git\Common-Lib> 
```

即使在运行之后`git update-server-info`，它仍然会抛出同样的错误，这是为什么呢？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T11:11:01.833

你使用的命令已经在你自己的机器上成功创建了一个仓库OK，但是在Github上不存在；这就是您收到错误的原因：

```
fatal: https://github.com/fxbird/Common-Lib.git/info/refs not found 
```

找不到“refs”文件，因为它不存在。您最好的解决方案是先在 Github 上创建存储库，然后将其克隆到本地计算机。这样一来，一切都将为您设置好推拉。

哦，当你跑的时候：

```
git update-server-info 
```

你在本地存储库上运行它，而不是在服务器上，所以它无论如何都不会工作。该命令生成通过“哑”协议（如 http）访问存储库所需的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T09:48:34.530

[我在您的GitHub 个人资料](https://github.com/fxbird)中没有看到目标存储库。单击用户名右侧顶部栏上*的“创建新仓库”图标以首先创建它。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T18:48:59.963

这是一个解决方法我也是 git 的新手，所以如果我们要手动创建目录，那么执行这个语句有什么用

```
“git 远程添加源 https://github.com/fxbird/Common-Lib.git”
```

# c# - 实体框架、现有数据库、代码优先 - 忽略 Db 列和更改数据类型

> ID：11048247
> 
> 赞同：2
> 
> 时间：2012-06-15T09:42:49.160
> 
> 标签：c#, entity-framework, .net-4.0, ef-code-first

我正在使用 Entity Framework 4.3（如果 EF 无法满足我的需要，我愿意接受有关更改此设置的建议）。

我有一些实体/业务对象。这些对象不应该改变，不应该被注释（没有 DataAnnotation 属性），不应该为变通方法添加内部成员，并且数据库也是一成不变的/超出我的控制范围。简而言之，数据库不能改变，我的实体也不能。起初，这听起来像是使用 Fluent API 的完美理由。

```
public class MyEntity
{
    public int MyEntityId { get; set; }
    public string Name { get; set; }
    public bool IsGreen { get; set; }
} 
```

假设该对象在数据库中所关联的表如下：

```
CREATE TABLE [dbo].[MyEntities]
(
MyEntityId INT NOT NULL,
Name VARCHAR(30) NOT NULL,
IsGreen CHAR(1) NOT NULL,
ForeignKeyId INT NULL
) 
```

*抱歉，如果 SQL 错误，请快速手动输入*

希望您会立即注意到一些冲突。

问题 1) 是否可以通过**Fluent API**将我的布尔值映射到*IsGreen CHAR(1) NOT NULL*字段而不向原始实体添加*解决方法属性？*此列不可为空，填充 bool 的表达式可能类似于：

```
x => new MyEntity() { IsGreen = x.IsGreen == "Y" } 
```

问题 2）上下文是否允许我将 MyEntity 插入数据库，尽管并非所有列都被映射，只要未映射的列可以为空，即使有外键？

问题 3）如果 EF 不能做到以上，是否有框架可以做到？

## 这是我到目前为止所尝试的：

**尝试 1**：我开始走在基于 DB Schema 创建单独*实体*的道路上，然后创建冗长的表达式以便能够从一个转换到另一个。

这可能最终奏效了，但忽略了它所花费的可笑时间，它产生了一个新问题。我`Expression<Func<MyEntity, bool>>`的 where 子句表达式显然不再适用于数据库，而是必须带回所有记录，编译表达式，并将其应用于结果可枚举。

不幸的是，这还不够好，只是带回了太多数据。我本可以花一些时间编写遍历表达式并将`MemberAccess`节点映射到新实体的代码，但这似乎不必要地复杂。

* * *

**尝试 2**：

然后我尝试创建继承的类，它*可以*包含*解决方法*属性，在其设置器中设置实际属性，而实际属性通过流式 API 被忽略。由于继承，我前面提到的 where 表达式应该可以工作。

但是，继承是由 EF 发现的，由于架构与它似乎期望的实体的继承层次不匹配，我不再能够查询数据库。（我很欣赏这有点含糊，但考虑到 EF 的 TPH/TPT/etc 方面，以及这不一定与我的架构匹配 - 我认为这是我最接近的尝试，但我不知道如何通过流畅的 API）。

* * *

**尝试 3**：最后，我尝试修补设计器。关于那个没什么好说的，除了我不再修补设计师。

* * *

注意：该软件需要针对几个不同的数据库运行，这些数据库每次都不会具有完全相同的架构，这就是为什么例如我需要代码才能工作，即使我的模型不一定具有每个列的属性在数据库中。不仅如此，而且我不知道，在软件发布之前，数据库可能有多少或哪些额外的列，我只知道这些列是可以为空的，因此我应该能够插入到表中只知道核心非空列（即存在于 MyEntity 对象上的列）。我相信，仅此一项就排除了设计师。

对不起，文字墙 - 任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T09:47:26.397

答案 1：否。EF 目前不支持映射`char(1)`到`bool`. 你可以投票支持[我的建议](http://data.uservoice.com/forums/72025-entity-framework-feature-suggestions/suggestions/2639292-support-for-simple-type-mapping-or-mapped-type-con)。

答案 2：是的，如果所有非映射列都可以为空或定义了默认值约束。

答案 3：NHibernate

# sql-server - 在“WHERE @Arg IS NULL OR Name=@Arg”的情况下，SQL Server 是否总是会经历第二个条件？

> ID：11048249
> 
> 赞同：1
> 
> 时间：2012-06-15T09:42:52.793
> 
> 标签：sql-server

我们通常会遇到选择结果，如果没有输入参数或列等于参数的情况，我们会想到下面的表达式：

```
WHERE @Arg IS NULL OR Name = @Arg 
```

`@Arg`如果设置为 ，几乎所有编程语言都会忽略第二个条件`NULL`。但是，我发现它在 SQL Server 中的执行速度非常慢，并且看起来第二个条件总是被通过。

任何人都可以给我帮助？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T11:55:14.780

这不是布尔短路的问题（SQL 中**不**保证，请参阅[On SQL Server boolean operator short-circuit](http://rusanu.com/2009/09/13/on-sql-server-boolean-operator-short-circuit/)），而是*编译*的问题。SQL Server 必须为您编译一个查询计划，并且该计划必须适用*于`@Arg`*. 此要求将消除许多可能的优化（例如，如果您的索引`Name`无法使用），从而导致不必要的缓慢查询。

这种模式一次又一次地重复，通常在搜索表单中，建议**创建不同的查询**。根本问题是不正确的 API 设计，它使用相同的调用来做不同的事情（按名称搜索、按 ID 搜索等）。

[Martin链接](http://www.sommarskog.se/dyn-search-2008.html)的文章详细解释了各种方法的优缺点。Erland 的建议更加细致入微（对简单情况使用 IF，对复杂情况使用动态 SQL）但归结为同一件事：对每种情况使用**不同**的查询，无论是硬编码 ( `IF`s) 还是代码生成（动态 SQL）。

# vba - 打开 Excel 时加载 Excel Combobox

> ID：11048250
> 
> 赞同：0
> 
> 时间：2012-06-15T09:42:52.937
> 
> 标签：vba, excel

我在 Excel 中有组合框，并且有以下 VBA 代码。但是现在打开excel时可以工作。

```
Sub worksheet_activate()
mapping.clear
mapping.Additem "File to Table"
mapping.Additem "Table to File"
End Sub 
```

现在，告诉我如何在打开 excel 时自动加载组合框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T09:24:50.657

当我这样做时，它起作用了。在工作表宏中执行此操作。

```
Private Sub Workbook_Open()
With Sheet1.mapping
.AddItem "File to Table"
.AddItem "Table to File"
End With
End Sub 
```

# php - 将函数分配给类方法

> ID：11048251
> 
> 赞同：1
> 
> 时间：2012-06-15T09:42:56.477
> 
> 标签：php

是否可以从类方法中创建函数？

IE。

```
class Test {

    public function __construct()
    {
        if ( ! function_exists('foo') ) {
            function foo ()
            {
                 return $this->foo();
            }
        }
    }

    private function foo()
    {
        return 'bar';
    }

} 
```

还是我必须反过来做，创建一个函数并在方法中使用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T10:25:00.847

> 我正在尝试创建一个作为类方法副本的全局函数。我来自 javascript 领域，其中函数只是变量，您可以轻松地复制它们......

PHP 中的函数不是一等公民，您不能像 PHP 中的变量一样复制函数。您可以传递[对函数](http://php.net/manual/en/language.types.callable.php)[的*引用*](http://php.net/manual/en/language.types.callable.php)，但不能传递函数本身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T10:30:26.157

理论上，您可以[使用 Reflection 来获取 Closure](http://php.net/manual/en/class.reflectionmethod.php)，通过引用它`$GLOBALS`，然后定义一个函数`foo`来调用[Closure](http://www.php.net/manual/en/functions.anonymous.php)，`$GLOBALS`例如

```
<?php // requires 5.4
class Test {

    public function __construct()
    {
        if (!function_exists('foo')) {
            $reflector = new ReflectionMethod(__CLASS__, 'foo');
            $GLOBALS['foo'] = $reflector->getClosure($this);
            function foo() {
                return call_user_func($GLOBALS['foo']);
            }
        }
    }

    private function foo()
    {
        return 'bar';
    }
}

$test = new Test();
echo foo(); 
```

[运行演示](http://codepad.viper-7.com/wlx68p)

但是，这非常难看，您不想这样做。

如果您想要更多类似 JavaScript 的对象，请查看

*   [http://www.phpied.com/javascript-style-object-literals-in-php](http://www.phpied.com/javascript-style-object-literals-in-php)

但是，即使是其中建议的技术，也有一些杂乱无章的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T09:48:21.373

就那样做，php能做到

```
class Test {

    public function __construct()
    {
        if ( ! function_exists('foo') ) {
            function foo ()
            {
                 return $this->foo();
            }
        }
    }

    private function foo()
    {
        outsidefunction();
        return 'bar';
    }

}

private function outsidefunction()
{
   return 0;
} 
```

# sql - SQL替换查询

> ID：11048254
> 
> 赞同：1
> 
> 时间：2012-06-15T09:43:04.363
> 
> 标签：sql, postgresql, replace, substring

也许对于一个每天都在使用数据库的人来说这很简单，但是我需要编写 sql 查询。我有相同设计的字段（85500 项），例如“200 00 2334”、“200 00 2555”（它是 varchar 数据），它是客户代码。我需要将所有这些字段更改为例如“200-00 2334”、“200-00 2555”。字段中的第一个空格必须替换为“-”，第二个空格必须保持不变。我的数据库是 PostgreSQL。我只需要一个查询。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T09:55:50.297

regexp_replace() 可能会通过简单的模式匹配来完成这项工作，因为它只会匹配第一个空格。

```
SELECT regexp_replace('100 200 300', ' ', '-');
 regexp_replace 
----------------
 100-200 300 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T09:57:28.043

假设它始终是第 4 个字符，您可以使用[overlay](http://www.postgresql.org/docs/9.1/static/functions-string.html)：

```
select overlay('200 00 12132' placing '-' from 4 for 1);
--------------------------------------------------------
OVERLAY
200-00 12132 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T09:59:01.013

```
select code[1]||'-'||code[2]||' '||code[3] from
 (select regexp_split_to_array('200 00 2334', E'\\s+') as code) t 
```

如果代码的第一部分具有不同数量的字符，这会使您更加灵活

# c# - 通过 WebClient 使用 POST 值上传文件

> ID：11048258
> 
> 赞同：10
> 
> 时间：2012-06-15T09:43:14.360
> 
> 标签：c#, php, file-upload, web

我想使用 WebClient 类将文件上传到主机。我还想传递一些值，这些值应该显示在服务器部分（PHP）的 $_POST 数组中。我想通过一个连接来完成

我使用了下面的代码

```
using (WebClient wc = new WebClient())
{
    wc.Encoding = Encoding.UTF8;
    NameValueCollection values = new NameValueCollection();
    values.Add("client", "VIP");
    values.Add("name", "John Doe"); 
    wc.QueryString = values; // this displayes in $_GET
    byte[] ans= wc.UploadFile(address, dumpPath);
} 
```

如果我使用了 QueryString 属性，则 $_GET 数组中显示的值。但我想通过 post 方法发送它

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-06-15T09:45:45.453

没有内置的东西可以让你这样做。我在[博客](http://bratched.com/en/home/dotnet/69-uploading-multiple-files-with-c.html)上写了一个你可以使用的扩展。以下是相关类：

```
public class UploadFile
{
    public UploadFile()
    {
        ContentType = "application/octet-stream";
    }
    public string Name { get; set; }
    public string Filename { get; set; }
    public string ContentType { get; set; }
    public Stream Stream { get; set; }
}

public byte[] UploadFiles(string address, IEnumerable<UploadFile> files, NameValueCollection values)
{
    var request = WebRequest.Create(address);
    request.Method = "POST";
    var boundary = "---------------------------" + DateTime.Now.Ticks.ToString("x", NumberFormatInfo.InvariantInfo);
    request.ContentType = "multipart/form-data; boundary=" + boundary;
    boundary = "--" + boundary;

    using (var requestStream = request.GetRequestStream())
    {
        // Write the values
        foreach (string name in values.Keys)
        {
            var buffer = Encoding.ASCII.GetBytes(boundary + Environment.NewLine);
            requestStream.Write(buffer, 0, buffer.Length);
            buffer = Encoding.ASCII.GetBytes(string.Format("Content-Disposition: form-data; name=\"{0}\"{1}{1}", name, Environment.NewLine));
            requestStream.Write(buffer, 0, buffer.Length);
            buffer = Encoding.UTF8.GetBytes(values[name] + Environment.NewLine);
            requestStream.Write(buffer, 0, buffer.Length);
        }

        // Write the files
        foreach (var file in files)
        {
            var buffer = Encoding.ASCII.GetBytes(boundary + Environment.NewLine);
            requestStream.Write(buffer, 0, buffer.Length);
            buffer = Encoding.UTF8.GetBytes(string.Format("Content-Disposition: form-data; name=\"{0}\"; filename=\"{1}\"{2}", file.Name, file.Filename, Environment.NewLine));
            requestStream.Write(buffer, 0, buffer.Length);
            buffer = Encoding.ASCII.GetBytes(string.Format("Content-Type: {0}{1}{1}", file.ContentType, Environment.NewLine));
            requestStream.Write(buffer, 0, buffer.Length);
            file.Stream.CopyTo(requestStream);
            buffer = Encoding.ASCII.GetBytes(Environment.NewLine);
            requestStream.Write(buffer, 0, buffer.Length);
        }

        var boundaryBuffer = Encoding.ASCII.GetBytes(boundary + "--");
        requestStream.Write(boundaryBuffer, 0, boundaryBuffer.Length);
    }

    using (var response = request.GetResponse())
    using (var responseStream = response.GetResponseStream())
    using (var stream = new MemoryStream())
    {
        responseStream.CopyTo(stream);
        return stream.ToArray();
    }
} 
```

现在您可以在您的应用程序中使用它：

```
using (var stream = File.Open(dumpPath, FileMode.Open))
{
    var files = new[] 
    {
        new UploadFile
        {
            Name = "file",
            Filename = Path.GetFileName(dumpPath),
            ContentType = "text/plain",
            Stream = stream
        }
    };

    var values = new NameValueCollection
    {
        { "client", "VIP" },
        { "name", "John Doe" },
    };

    byte[] result = UploadFiles(address, files, values);
} 
```

现在在您的 PHP 脚本中，您可以使用`$_POST["client"]`,`$_POST["name"]`和`$_FILES["file"]`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-05-22T02:19:08.580

如果有人想在带有进度报告的异步模式中使用@darin-dimitrov 的解决方案，那就是要走的路（对于.NET 4.0）：

```
public void UploadFileAsync(NameValueCollection values, Stream fileStream)
{
    //to fire events on the calling thread
    _asyncOperation = AsyncOperationManager.CreateOperation(null);
    var ms = new MemoryStream();
    //make a copy of the input stream in case sb uses disposable stream
    fileStream.CopyTo(ms);
    //you cannot set stream position often enough to zero
    ms.Position = 0;

    Task.Factory.StartNew(() =>
    {
        try
        {
            const string contentType = "application/octet-stream";

            var request = WebRequest.Create(_url);
            request.Method = "POST";
            var boundary = "---------------------------" + DateTime.Now.Ticks.ToString("x", NumberFormatInfo.InvariantInfo);
            request.ContentType = "multipart/form-data; boundary=" + boundary;
            boundary = "--" + boundary;

            var dataStream = new MemoryStream();
            byte[] buffer;
            // Write the values
            foreach (string name in values.Keys)
            {
                buffer = Encoding.ASCII.GetBytes(boundary + Environment.NewLine);
                dataStream.Write(buffer, 0, buffer.Length);
                buffer = Encoding.ASCII.GetBytes(string.Format("Content-Disposition: form-data; name=\"{0}\"{1}{1}", name, Environment.NewLine));
                dataStream.Write(buffer, 0, buffer.Length);
                buffer = Encoding.UTF8.GetBytes(values[name] + Environment.NewLine);
                dataStream.Write(buffer, 0, buffer.Length);
            }

            // Write the file
            buffer = Encoding.ASCII.GetBytes(boundary + Environment.NewLine);
            dataStream.Write(buffer, 0, buffer.Length);
            buffer = Encoding.UTF8.GetBytes($"Content-Disposition: form-data; name=\"file\"; filename=\"file\"{Environment.NewLine}");
            dataStream.Write(buffer, 0, buffer.Length);
            buffer = Encoding.ASCII.GetBytes(string.Format("Content-Type: {0}{1}{1}", contentType, Environment.NewLine));
            dataStream.Write(buffer, 0, buffer.Length);
            ms.CopyTo(dataStream);
            buffer = Encoding.ASCII.GetBytes(Environment.NewLine);
            dataStream.Write(buffer, 0, buffer.Length);

            buffer = Encoding.ASCII.GetBytes(boundary + "--");
            dataStream.Write(buffer, 0, buffer.Length);

            dataStream.Position = 0;
            //IMPORTANT: set content length to directly write to network socket
            request.ContentLength = dataStream.Length;
            var requestStream = request.GetRequestStream();

            //Write data in chunks and report progress
            var size = dataStream.Length;
            const int chunkSize = 64 * 1024;
            buffer = new byte[chunkSize];
            long bytesSent = 0;
            int readBytes;
            while ((readBytes = dataStream.Read(buffer, 0, buffer.Length)) > 0)
            {
                requestStream.Write(buffer, 0, readBytes);
                bytesSent += readBytes;

                var status = "Uploading... " + bytesSent / 1024 + "KB of " + size / 1024 + "KB";
                var percentage = Tools.Clamp(Convert.ToInt32(100 * bytesSent / size), 0, 100);
                OnFileUploaderProgressChanged(new FileUploaderProgessChangedEventArgs(status, percentage));
            }

            //get response
            using (var response = request.GetResponse())
            using (var responseStream = response.GetResponseStream())
            using (var stream = new MemoryStream())
            {
                // ReSharper disable once PossibleNullReferenceException - exception would get catched anyway
                responseStream.CopyTo(stream);
                var result = Encoding.Default.GetString(stream.ToArray());
                OnFileUploaderCompleted(result == string.Empty
                    ? new FileUploaderCompletedEventArgs(FileUploaderCompletedResult.Failed)
                    : new FileUploaderCompletedEventArgs(FileUploaderCompletedResult.Ok));
            }
        }
        catch (Exception)
        {
            OnFileUploaderCompleted(new FileUploaderCompletedEventArgs(FileUploaderCompletedResult.Failed));
        }
    }, CancellationToken.None, TaskCreationOptions.LongRunning, TaskScheduler.Default);
} 
```

# c++ - C++ 未初始化的类数组

> ID：11048259
> 
> 赞同：0
> 
> 时间：2012-06-15T09:43:17.833
> 
> 标签：c++, class, constructor

在我的研究中，我了解到如果你想阻止用户调用一个类的默认构造函数，你可以将其设为私有：

```
class Person
{
public:
  Person(const Person&);
  ~Person();
private:
  Person();  //Any call to this will cause a compiler error.
}; 
```

我不明白的是，当我创建一个未初始化的类数组时，它给了我一个语法错误，说它是私有的：

```
Person * ptr;   //Works just fine.
Person arr[1];  //Syntax error: 'Person::Person()' is private 
```

这会让我相信它会在创建数组时尝试调用默认构造函数。但这对我来说没有任何意义，因为我实际上并没有创建任何真实的对象。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-15T09:48:45.280

您没有创建未初始化的数组。您正在创建一个对象数组`Person`。他们必须以*某种方式*初始化。如果不存在构造函数，那么它将回退到默认初始化规则（这可能会留下一些未指定值的成员）。但是，当声明构造函数时，必须使用它。

在 C++ 中没有“未初始化”对象之类的东西。对象在构造时就存在，在构造过程中，它会以*某种*方式被初始化，具体取决于对象的外观。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-15T09:55:53.340

```
Person * ptr;   //Works just fine. 
Person arr[1];  //Syntax error: 'Person::Person()' is private 
```

> 这会让我相信它会在创建数组时尝试调用默认构造函数。但这对我来说没有任何意义，因为我实际上并没有创建任何真实的对象。

这是你的错误。在您的第二个示例（失败的示例）中，您正在创建一个真实的对象。您正在使用一个元素/对象定义一组 Persons（人？！）。

因此，您正在创建一个对象以进入该数组。

记住当一个对象被创建时——会发生什么？调用构造函数，如果没有合适的定义构造函数，编译器会做什么？

它使用默认的 - 但它不能，因为它是私有的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T09:52:47.773

```
Person * ptr; 
```

这不会创建 Person 对象。它只是一个具有未初始化值的指针。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-15T09:57:37.113

```
Person * ptr; is a pointer and it is not initialized
Person arr[1]; is an array of Person and for each element it is called Person()
as a default constructor 
```

因为您覆盖了 Person() 编译器将采用您的 Person() 构造函数，并且因为它是私有的，所以它会给您和错误，因为您不能从类外部调用私有方法

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T09:51:54.400

2行之间有区别

```
Person * ptr;   //Works just fine.
Person arr[1]; 
```

在第一行中，您刚刚声明了一个指针，但没有分配内存。所以构造函数还没有被调用。因此它不会给出任何错误。

如果你想更清楚，试试这个

```
ptr = new Person(); 
```

在第二行中，您将实例化一个类对象数组，该数组将调用 costructor。因此你得到了错误

# android - 安卓支持线程吗？

> ID：11048260
> 
> 赞同：4
> 
> 时间：2012-06-15T09:43:22.373
> 
> 标签：android, multithreading, gcc, android-ndk

Android 是否支持 pthreads？以及为什么当我使用 -pthread 选项时会看到链接器错误：

i686-android-linux/bin/ld：找不到-lpthread

```
#include <pthread.h>
#include <cxxabi.h>
extern "C" int printf (const char *, ...);
int main()
{
  try
    {
      pthread_exit (0);
    }
  catch (abi::__forced_unwind &)
    {
      printf ("caught forced unwind\n");
      throw;
    }
  catch (...)
    {
      printf ("caught ...\n");
      return 1;
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T09:48:54.353

据我在文档中看到的，您不需要使用“-pthread”。结帐如下：http:
[//mobilepearls.com/labs/native-android-api/#pthreads](http://mobilepearls.com/labs/native-android-api/#pthreads)

来自 NDK 官方文档状态的信息 (android-ndk-r8\docs\system\libc\OVERVIEW.html)：

```
PThread 实现：

   Bionic 的 C 库附带了它自己的 pthread 实现。
   这与其他历史 C 库不同：
    - 将其放在外部库中（-lpthread）
    - 在动态链接时使用弱符号播放链接器技巧

```

因此请记住，Bionic 直接包含 pthread，而不是您习惯的标准方式（使用 -lpthread）。

# paypal - 使用参考交易的定期付款

> ID：11048263
> 
> 赞同：0
> 
> 时间：2012-06-15T09:43:34.877
> 
> 标签：paypal, recurring-billing

`DoReferenceTransaction`当我从客户那里获得“账单同意”时，是否可以使用或是否有任何其他方式来设置定期付款以及`REFERENCEID`- 客户先前交易的 ID。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T13:11:01.920

你可以设置

```
RECURRING 
```

DoReferenceTransaction API 调用的字段，但首先您需要与买方签订计费协议。

我建议使用 CreateRecurringPaymentsProfile 调用进行定期付款。

API 在[这里](https://www.x.com/developers/paypal/documentation-tools/api/createrecurringpaymentsprofile-api-operation-nvp)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T14:16:52.967

我已经与买方签订了计费协议（“计费协议 ID”） - 根据[参考交易 api](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_ECReferenceTxns)。

我也可以使用 DoReferenceTransaction 进行交易，例如：

```
$nvpstr="&L_AMT0=".$itemamt."&L_QTY0=1&AMT=".(string)$amt."&ITEMAMT=".(string)$itemamt."&CALLBACKTIMEOUT=4&REFERENCEID=B-6J7244599E964634T&ReturnUrl=".$returnURL."&CANCELURL=".$cancelURL ."&CURRENCYCODE=".$currencyCodeType."&PAYMENTACTION=".$paymentType;

$resArray=hash_call("DoReferenceTransaction",$nvpstr); 
```

但是，我仍然不知道如何使用您给我的 API 链接中的参考交易原因设置定期付款，有一条注释`Credit Card ACCT number`是必需的 - 但我不想将客户的卡号存储在我的数据库中（我正在使用快速结账）。

# ios - 当uitextView处于焦点时如何隐藏键盘~~

> ID：11048264
> 
> 赞同：1
> 
> 时间：2012-06-15T09:43:37.863
> 
> 标签：ios, xcode, uibutton, uitextfield

我有一个`UITextView`，并且在输入一些字符后，我想使用一个按钮单击隐藏键盘并且`UITextView`仍然处于焦点.... **[注意：该按钮不是返回键或完成键]；**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T09:56:52.030

您是否已将委托设置为您的 UITextView 实例？如果是这样，请尝试使用`[_textView resignFirstResponder];`

别的

尝试使用`[self.view endEditing:YES];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T10:03:05.693

将以下代码实施到您的视图控制器 .m 文件和 .h 文件中添加 textView 的委托

```
 -(BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text
{
  if([text isEqualToString:@"\n"])
    [textView resignFirstResponder];
  return YES;
} 
```

现在转到界面生成器，选择您的文本视图并设置返回键类型完成。

# android - Android GeoCoder 仅返回 1 个结果

> ID：11048265
> 
> 赞同：12
> 
> 时间：2012-06-15T09:43:44.157
> 
> 标签：android, geolocation, location, google-geocoder

在我的 Android 应用程序中，用户可以输入地址来设置他的位置。为此，我使用了 Geocoder 和 getFromLocationName 方法。

当我在寻找基本城市时一切正常，但是一旦我寻找模糊的位置，例如法国的 Villefranche（法国有 10 多个城市称为 Villefranche），GeoCoder 只返回 1 个结果。

这是我调用该方法的方式：

```
resultReverseGeo = geoCoder.getFromLocationName(name, 5);
Log.d(TAG, "Size " + resultReverseGeo.size()); // size is always = 1 
```

任何想法？

# javascript - Firebug 不显示我的javascript？找不到错误

> ID：11048267
> 
> 赞同：7
> 
> 时间：2012-06-15T09:43:46.337
> 
> 标签：javascript, jquery, firebug

好吧，我想用 Firebug 调试一些脚本，（因为我在浏览器窗口中看不到任何东西）但是当我单击 Firefox 中的脚本选项卡时，它给了我错误消息：

**如果标签有“type”属性，它应该等于“text/javascript”或“application/javascript”。脚本也必须是可解析的（语法正确）。**

我究竟做错了什么？

这是我的代码：

```
<!DOCTYPE html>
<html>
<head>
    <title></title>
</head>
<body>

<script src="jquery-1.7.1.js"></script>
<script type="text/javascript">
$(function() {
/* fix: “close” the value of i inside createFunction, so it won't change */
        var createFunction = function(i) {
            return function() { alert(i); };
        };

        for (var i=0; i<5; i++) {
            $('p').appendTo('body').on("click", createFunction(i));
}

})();
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T09:50:08.453

你必须省略最后一个括号，我猜代码应该在 dom 上运行准备好了吗？

```
<script type="text/javascript">
$(function() {
/* fix: “close” the value of i inside createFunction, so it won't change */
        var createFunction = function(i) {
            return function() { alert(i); };
        };

        for (var i=0; i<5; i++) {
            $('<p>').appendTo('body').on("click", createFunction(i));
}

});
</script> 
```

[请参阅此处](http://api.jquery.com/ready/)了解如何使用 jquery 使代码在 dom 负载上运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T09:49:10.500

去掉后面的括号`})`：

```
$(function() {
/* fix: “close” the value of i inside createFunction, so it won't change */
     var createFunction = function(i) {
        return function() { alert(i); };
     };

     for (var i=0; i<5; i++) {
            $('p').appendTo('body').on("click", createFunction(i));
     }    
});  //here is the modification 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-07T19:29:39.373

在我的案例中，我在其他选项卡中打开了 firebug，所以它向我显示了这个错误。

*   解决方案：我关闭了一个选项卡并刷新了页面。它正在工作:)

# sql-server - 从 SQL Server 2008 迁移到 2012

> ID：11048272
> 
> 赞同：0
> 
> 时间：2012-06-15T09:44:08.770
> 
> 标签：sql-server, web-services, connection, oledb

我已经成功地将我所有的数据库从 2008 年迁移到 2012 年，并将用户映射到特定的数据库。

我的问题是 2008 年已过期（因此我得到了 2012 年）并且我正在使用 Web 服务来调用/编辑表中的数据。

当我运行 Web 服务功能时，它只是超时，这表明它仍在尝试与 2008 通信。

我在用 -

```
using System.Data.OleDb;
using System.Data.SqlClient; 
```

有连接 -

```
OleDbConnection objConnection = null;
OleDbCommand objCmd = null;
String strConnection, strSQL;
strConnection = "Provider=sqloledb;Data Source=.;Initial Catalog=NSN;User Id=userID;Password=password;Connect Timeout=300"; 
```

我的问题是，既然我已经迁移了所有数据库，如何让 Web 服务指向 SQL Server 2012？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T09:52:12.587

尝试将您的连接字符串更改为以下内容：

```
strConnection = "Provider=sqloledb;Data Source=.\<INSTANCENAME>;Initial Catalog=NSN;User Id=userID;Password=password;Connect Timeout=300"; 
```

SQL Server 2012 实例的名称在哪里。它应该与您在管理工作室登录对话框中输入的“服务器名称”相同。

问题是您正在尝试连接到默认实例，即您的 SQL Server 2008 安装。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T20:28:22.510

If your SQL Server 2008 has expired why dont you then remove the access for the user mentioned in your connection string to the SQL 2008 Db or best make it offline. If the application fails then you know that it was still pointing to SQL2008.

# jquery - 仅适用于 iPhone 的 jQuery 手风琴

> ID：11048275
> 
> 赞同：0
> 
> 时间：2012-06-15T09:44:15.810
> 
> 标签：jquery

有没有更好的方法让手风琴只为 iPhone 工作？

```
$(document).ready(function () {
var device = navigator.userAgent.toLowerCase();
var ios = device.match(/(iphone|ipod|ipad)/);
if (ios) {
    $("#Main_Box_Section .box2:not(:first)").hide();
    $("#Main_Box_Section h3").click(function () {
        $(this).next(".box2").slideToggle("slow").siblings(".box2:visible").slideUp("slow")
    })
}
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T09:54:07.583

取自[Zepto.js](https://github.com/madrobby/zepto/blob/master/src/detect.js#files)：

```
var ua = navigator.userAgent.toLowerCase();

var ipad = ua.match(/(iPad).*OS\s([\d_]+)/);
var iphone = !ipad && ua.match(/(iPhone\sOS)\s([\d_]+)/);

if(iphone){
   ...
} 
```

# ruby-on-rails - 重新加载 rails 初始化器

> ID：11048280
> 
> 赞同：10
> 
> 时间：2012-06-15T09:44:33.997
> 
> 标签：ruby-on-rails, ruby-on-rails-3

在 application.rb 中，我有

```
config.autoload_paths += %W(#{config.root}/lib 
```

所以当我修改lib下的一个类时，我的代码被重新加载。

但是，当我尝试将配置/初始化程序添加到自动加载时，我注意到我的代码没有得到更新。

如果我正在为字符串类编写扩展，则每次修改代码时都必须重新启动 rails。

请指教？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-15T12:24:16.913

初始化器仅在启动 rails 时加载（并且从不重新加载）。修补时，`config/initializers`您每次都必须重新启动导轨。

当然，您可以确保您的代码已定义，`/lib`因此您仍然可以通过使用您的测试套件来确保它正常工作。

例如在`lib/speaker.rb`写

```
module Speaker
  def speak
    puts "Ahum, listen: #{self.to_s}"
  end
end 
```

然后在您的初始化程序中，您可以执行类似的操作

```
class String
  include Speaker
end 
```

虽然这仍然只会在启动 rails 时加载，但您可以更轻松地开发和测试您的模块。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-16T13:56:25.323

初始化程序文件仅在 rails 服务器启动时加载一次。更改初始化程序值时重新启动服务器。有关详细信息，请参阅 rails[初始化指南](http://guides.rubyonrails.org/v3.2.13/initialization.html)。

**更改时自动重新加载“lib”**

您可以自动重新加载 lib 文件。按照链接[自动加载并在更改时重新加载 lib 目录](https://web.archive.org/web/20130830141432/http://hemju.com:80/index.php/2010/09/rails-3-quicktip-autoload-lib-directory-including-all-subdirectories/)

在配置 Rails 应用程序中：`config.reload_classes_only_on_change`仅在跟踪文件更改时启用或禁用类的重新加载。默认情况下跟踪自动加载路径上的所有内容并设置为 true。如果`config.cache_classes`为真，则忽略此选项。

# php - 朴素贝叶斯 python - php - javascript（节点）

> ID：11048283
> 
> 赞同：-4
> 
> 时间：2012-06-15T09:44:41.477
> 
> 标签：php, python, algorithm, bayesian-networks, categorization

我正在尝试从团购网站创建数据提取器算法，以构建交易聚合器。首先我需要一个算法来提取标题、价格、折扣、图像、坐标。

我有图像、折扣和坐标的解决方案，但对于标题和类别识别，我需要创建一个朴素贝叶斯算法。什么是最好的语言来做到这一点：php？Python？js？节点.js？

我需要什么来创建算法？

有例子的模型？等等。我给出了 100 个标题，然后给出了一些网站的所有网页内容，脚本可以识别什么句子是标题？

所以我不需要一个字。我需要一个句子，而那个句子有时`<h1> - <h2>`是其他的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T09:56:38.613

我真的无法理解你的大部分帖子，但由于朴素贝叶斯是 SO 上非常常见的要求，我创建了一段简单的代码，无需任何额外的库（如 NLTK）即可在 python 中使用（而且速度也比NLTK 用于训练）。你可以在[这里](https://github.com/luke14free/sentipy)找到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T09:59:34.910

如果您对 AI 算法没有任何经验，并且想添加一些可以学习的算法，我建议您应该使用 google prediction API：

[https://developers.google.com/prediction/](https://developers.google.com/prediction/)

# hibernate - 哪个版本的 openEJB 与 hibernate-entitymanager 一起使用

> ID：11048287
> 
> 赞同：0
> 
> 时间：2012-06-15T09:45:14.073
> 
> 标签：hibernate, openejb

我一直在尝试获得使用 openEJB 对项目进行单元测试的设置。我从现有项目中复制了大部分配置，该项目使用 hibernate-entitymanager 版本 3.3.2.GA ，但新项目使用版本 3.4.0.GA。当我指定实体管理器的 3.3.2.GA 版本时，我的单元测试有效，但在使用 3.4.0.GA 时无效

这是我与单元测试有关的 pom 设置：

```
 <dependency>
        <groupId>org.apache.openejb</groupId>
        <artifactId>javaee-api</artifactId>
        <version>5.0-2</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>org.apache.openejb</groupId>
        <artifactId>openejb-server</artifactId>
        <version>3.1.1</version>
        <scope>test</scope>
        <exclusions>
            <exclusion>
                <artifactId>org.apache.openjpa</artifactId>
                <groupId>openjpa</groupId>
            </exclusion>
        </exclusions>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-c3p0</artifactId>
        <version>3.3.2.GA</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-entitymanager</artifactId>
        <version>3.4.0.GA</version>
    </dependency>
</dependencies> 
```

我试图提高 openejb 服务器的版本号，但我的堆栈跟踪中不断出现以下异常：

```
 at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:616)
at org.apache.openejb.core.interceptor.ReflectionInvocationContext$Invocation.invoke(ReflectionInvocationContext.java:158)
at org.apache.openejb.core.interceptor.ReflectionInvocationContext.proceed(ReflectionInvocationContext.java:141)
at org.apache.openejb.core.interceptor.InterceptorStack.invoke(InterceptorStack.java:122)
at org.apache.openejb.core.stateless.StatelessContainer._invoke(StatelessContainer.java:221)
at org.apache.openejb.core.stateless.StatelessContainer.invoke(StatelessContainer.java:174)
at org.apache.openejb.core.ivm.EjbObjectProxyHandler.businessMethod(EjbObjectProxyHandler.java:217)
at org.apache.openejb.core.ivm.EjbObjectProxyHandler._invoke(EjbObjectProxyHandler.java:77)
at org.apache.openejb.core.ivm.BaseEjbProxyHandler.invoke(BaseEjbProxyHandler.java:281)
... 30 more
Caused by: org.hibernate.exception.SQLGrammarException: could not execute query
at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:90)
at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:66)
at org.hibernate.loader.Loader.doList(Loader.java:2231)
at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2125)
at org.hibernate.loader.Loader.list(Loader.java:2120)
at org.hibernate.loader.hql.QueryLoader.list(QueryLoader.java:401)
at org.hibernate.hql.ast.QueryTranslatorImpl.list(QueryTranslatorImpl.java:361)
at org.hibernate.engine.query.HQLQueryPlan.performList(HQLQueryPlan.java:196)
at org.hibernate.impl.SessionImpl.list(SessionImpl.java:1148)
at org.hibernate.impl.QueryImpl.list(QueryImpl.java:102)
at org.hibernate.ejb.QueryImpl.getSingleResult(QueryImpl.java:88)
... 43 more
Caused by: java.sql.SQLException: Column not found: ROWNUM in statement [select * from ( select user0_.id as id4_, user0_.MOBILE as MOBILE2_4_, user0_.CHANGED_BY as CHANGED3_4_, user0_.CHANGED_ON as CHANGED4_4_, user0_.PASSWORD_ANSWER as PASSWORD5_4_, user0_.PASSWORD_QUESTION as PASSWORD6_4_, user0_.REG_KEY as REG_KEY7_4_, user0_.USER_NAME as USER8_4_, user0_.VERSION as VERSION4_ from USER user0_ where user0_.USER_NAME=? ) where rownum <= ?]
at org.hsqldb.jdbc.Util.throwError(Unknown Source)
at org.hsqldb.jdbc.jdbcPreparedStatement.<init>(Unknown Source)
at org.hsqldb.jdbc.jdbcConnection.prepareStatement(Unknown Source)
at org.apache.commons.dbcp.DelegatingConnection.prepareStatement(DelegatingConnection.java:250)
at org.apache.commons.dbcp.DelegatingConnection.prepareStatement(DelegatingConnection.java:250)
at org.hibernate.jdbc.AbstractBatcher.getPreparedStatement(AbstractBatcher.java:534)
at org.hibernate.jdbc.AbstractBatcher.getPreparedStatement(AbstractBatcher.java:452)
at org.hibernate.jdbc.AbstractBatcher.prepareQueryStatement(AbstractBatcher.java:161)
at org.hibernate.loader.Loader.prepareQueryStatement(Loader.java:1573)
at org.hibernate.loader.Loader.doQuery(Loader.java:696)
at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:259)
at org.hibernate.loader.Loader.doList(Loader.java:2228)
... 51 more 
```

这看起来像是 Hibernate 和 openEJB 之间的依赖问题，我只是不确定要使用哪个版本的 openejb。

这是查询：

```
"SELECT u FROM User u WHERE u.name = :name" 
```

# google-app-engine - 用于服务器计算的 Google AppEngine 静态文件

> ID：11048288
> 
> 赞同：0
> 
> 时间：2012-06-15T09:45:16.857
> 
> 标签：google-app-engine, google-cloud-datastore

我有一个 ~2MB 的文件，我的 Google AppEngine 服务器必须**使用**（不提供）作为服务请求计算的一部分。

也就是说，一个客户端发出一个特定的请求，我的 GAE 服务器必须首先从这个 ~2MB 文件中获取数据，使用这些数据进行一些计算，然后将一个小的响应返回给客户端。

我最好将这些数据存储在哪里，以便服务器可以在计算中快速读取和使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T09:58:30.163

如果以下假设成立

*   该文件不需要在 appengine 代码更新之外进行更新
*   该文件是只读的

然后使用您的代码部署文件并在启动期间将文件读入内存（理想情况下使用预热请求）并从内存中对其进行操作。如果您的代码必须具有基于文件的语义来访问数据（读取、查找等），则读取文件内容并将其包装在 StringIO 中。

您需要将从文件读取的值分配给模块级变量，这样每当您收到新请求时，您都可以通过导入模块并引用名称来获取文件内容。IE。mymodule.filecontents

# ruby-on-rails - iconv 将在未来被弃用，使用 String#encode 代替

> ID：11048291
> 
> 赞同：3
> 
> 时间：2012-06-15T09:45:28.213
> 
> 标签：ruby-on-rails, rspec, iconv, hpricot, soap4r

当我运行 rspec 时，我收到以下关于 ruby​​ 1.9.3-p125 的弃用警告。但是 ruby​​ 1.9.2 没有过时的警告。

```
/gems/ruby-1.9.3-p125@cs/gems/soap4r-1.5.8/lib/xsd/iconvchars
et.rb:9:in `<top (required)>': iconv will be deprecated in the future, use String#encode instead.
/home/ec2-user/.rvm/gems/ruby-1.9.3-p125@cs/gems/hpricot-0.8.2/lib/hpricot/build
er.rb:2:in `require': /gems/ruby-1.9.3-p125@cs/gems/hpricot-0
.8.2/lib/fast_xs.so: undefined symbol: ruby_digitmap - /gems/
ruby-1.9.3-p125@cs/gems/hpricot-0.8.2/lib/fast_xs.so (LoadError) 
```

这可能是什么原因？有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T09:33:31.277

有一个关于 ruby​​ 1.9.3 将 stdlibs 移动到 gems 的建议。作为不同字符串编码之间的转换转码的一部分，将被“gemified”，请参阅[Wiki](http://bugs.ruby-lang.org/projects/ruby/wiki/StdlibGem)（部分：哪些 stdlibs 应该被 gemified？）。

因此，每次调用 iconv 时，都会显示弃用通知，以通知开发人员未来版本的 ruby​​ 将不会使用 lib/iconv 并告诉他们（以及在何处）需要修改代码以解决这些计划变化。

现在这不是问题，因为 iconv 和 String#encode 都将得到支持，以便给开发人员时间进行转换。但您应该记住，如果您不切换已弃用的代码，您的代码将在未来的版本中中断。

如有必要，快速的 Google 搜索将帮助您进行转换，例如“从 Iconv#iconv 到 String#encode”。如果您不打算进行更改，您应该远离未来的版本，并且在更新您的环境时要格外小心。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T04:35:05.977

您的问题实际上与 hpricot 有关，它显然与 ruby​​ 1.9.3 不兼容，并且正在抛出您在此处看到的“未定义符号：ruby_digitmap”。这是[有同样问题的其他人](https://github.com/tatemae/muck-engine/issues/2)。

不幸的是，[不再维护 hpricot](https://github.com/hpricot/hpricot)，所以除非有人拿起地幔，否则可能不会有修复。您的主要选择似乎是坚持使用 ruby​​ 1.9.2，或者找到 hpricot 的替代品。大多数人似乎都在使用 nokogiri 在 ruby​​ 中进行 XML 和 HTML 解析，但当然还有其他选择。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-21T12:33:30.977

日志条目告诉您问题是在soap4r gem 中产生的。看起来 gem 有一段时间没有更新了，版本 1.5.8 是从 2007 年开始的，所以 ruby​​ 1.9.3 可能还有其他问题。

有一个项目号称有ruby-1.9兼容版本：soap4r-ruby1.9

还有其他用于 ruby​​ 的 soap 库，在这里你可以看到其中的一些： [ruby-toolbox search for soap](https://www.ruby-toolbox.com/search?utf8=%E2%9C%93&q=soap)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-18T12:17:02.423

要删除此警告...

转到您的 .rvm 目录并找到`iconv.c`（我的在`~/.rvm/src/ruby-1.9.3-p125/ext/iconv/iconv.c`）

编辑该文件被删除或注释掉调用`warn_deprecated()`（应该靠近底部）

从该文件的目录中，然后`ruby extconf.rb`运行`make``make install`

应该做的伎俩

# objective-c - NSURLConnection sendSynchronousRequest - 缺少数据

> ID：11048292
> 
> 赞同：5
> 
> 时间：2012-06-15T09:45:29.040
> 
> 标签：objective-c, ios, nsurlconnection

我正在尝试使用同步请求读取文本文件。它不起作用，但我也没有收到任何错误或警告。

谁能告诉我我做错了什么，好吗？

```
NSString *url = @"http://pappons.com/test.txt" ;

NSLog(@"getHTTPData: %@" , url ) ;
NSURLResponse* response = nil;

NSURLRequest* urlRequest =  [NSURLRequest requestWithURL:[NSURL URLWithString:url] cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:60.0];

NSData* data = [NSURLConnection sendSynchronousRequest:urlRequest returningResponse:&response error:nil] ;

NSString *myString = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];

NSLog( @"data: %@" , myString ) ; 
```

输出：

```
2012-06-15 11:33:42.209 FrederikTest[1365:707] getHTTPData: http://pappons.com/test.txt 
2012-06-15 11:33:42.306 FrederikTest[1365:707] data: 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-15T09:54:50.487

传入`NSError`检查是否发生错误

```
NSError *error = nil;
NSData *data = [NSURLConnection sendSynchronousRequest:urlRequest returningResponse:&response error:&error]; 
```

# cakephp - CakePHP 2.1.x - 在 AppController 中运行没有任何模型的查询

> ID：11048293
> 
> 赞同：19
> 
> 时间：2012-06-15T09:45:32.427
> 
> 标签：cakephp, cakephp-2.0, cakephp-2.1

我正在尝试在 AppController 中对没有关联模型的表运行查询。我不想使用模型，因为这个查询会在每个请求上触发，我猜使用模型会使它变慢一点。

我在一个论坛上发现，这可以通过 CakePHP 1.3 中的以下代码实现

```
$db = ConnectionManager::getInstance();
$conn = $db->getDataSource('default');
$conn->rawQuery($some_sql); 
```

但这在 CakePHP 2.1.3 中不起作用。任何帮助，将不胜感激。谢谢 ：）

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-06-15T13:53:00.987

该`getDataSource()`方法在 CakePHP 2.x 中是静态的，因此您应该能够使用：

```
$db = ConnectionManager::getDataSource('default');
$db->rawQuery($some_sql); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-12-11T11:02:58.007

你应该这样跑

```
 App::uses('ConnectionManager', 'Model'); 
    $db = ConnectionManager::getDataSource('default');
    if (!$db->isConnected()) {
       $this->Session->setFlash(__('Could not connect to database.'), 'default',            array('class' => 'error'));
    } else {
        $db->rawQuery($some_sql);
    } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-07-03T06:13:03.737

rawQuery 不会返回数据，使用 $db->query 代替。

```
$db = ConnectionManager::getDataSource('default');
$data = $db->query($some_sql); 
```

# php - 表单上的 PHP 验证

> ID：11048299
> 
> 赞同：0
> 
> 时间：2012-06-15T09:46:01.397
> 
> 标签：php, validation

我在表单中有五个字段

提交表单时，如果三个字段未填写，则应验证并在这三个字段上显示错误。

我曾经使用 if 循环来执行此操作，这将一次显示一个错误，相反，我想显示所有错误。

我想检查每个字段上的特殊字符、空验证、最小和最大字符。

```
 preg_match('/^[a-z\d ]{3,20}$/i', $category 
```

如何使用 PHP 一次检查它们？

**更新**

```
 $errors = array();
 $required = array("Name", "Email");  
  foreach($_POST as $key=>$value)
   {
     if(!empty($value))
       {
           $$key = $value;
      }
     else
      {
     if(in_array($key, $required))
     {
         array_push($errors, $key);
     }
    }        

   } 
```

这可用于检查所有字段的空验证，我如何检查特殊字符、字母数字字符，provblem 将是每个字段将有不同的正则表达式。例如：电话号码和电子邮件不能有相同的正则表达式。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T09:50:00.013

```
$validate = array("name", "category", "amount"); // your 3 fields that need to be validated

$error = '';
foreach ($validate as $field) {
    if (preg_match('/^[a-z\d ]{3,20}$/i', $$field)) {
        $error .= $field;
    }
} 
```

稍后，基于 $error 你可以显示你的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T10:00:12.917

```
$errors = array();
if (preg_match('/^[a-z\d ]{3,20}$/i', $name)) {
    $errors[] = "Please enter valid name.";
}

if (preg_match('/^[a-z\d ]{3,20}$/i', $category)) {
    $errors[] = "Please enter valid category.";
}

if (preg_match('/^[a-z\d ]{3,20}$/i', $amount)) {
    $errors[] = "Please enter valid amount.";
}

if(!empty($errors))
{
    echo "The was an error filling out the form:<br><ul>";
    foreach($errors as $msg)
    {
        echo "<li>$msg</li>";
    }
    echo "</ul>Please try again.";
} 
```

或者，为了更简洁，使用类似[Ananth 的答案。](https://stackoverflow.com/a/11048382/563460)

```
// your 3 fields that need to be validated; Key is field, Value is error message if check invalid.
$validate = array("name" => "Please enter valid name.", "category" => "Please enter a real category.", "amount" => "Please enter an amount.");

$error = array();
foreach ($validate as $field => $message) {
    if (preg_match('/^[a-z\d ]{3,20}$/i', $$field)) {
        $error[] = $message;
    }
}

if(!empty($errors))
{
    echo "The was an error filling out the form:<br><ul>";
    foreach($errors as $msg)
    {
        echo "<li>$msg</li>";
    }
    echo "</ul>Please try again.";
} 
```

**更新**

看看每个检查如何在正则表达式上进行，第一个例子很容易解决。至于第二个例子，它只需要一个小的改动。

```
// your 3 fields that need to be validated; 
// Key is Regex, value is array with the variable name (without the $) as the key, 
// and the error message as the value.

$validate = array(
    '/^[a-z\d ]{3,20}$/i' => array("name" => "Please enter valid name."), 
    '/^[a-z\d ]{3,20}$/i' => array("category" => "Please enter a real category."),
    '/^[a-z\d ]{3,20}$/i' => array("amount" => "Please enter an amount.")
);

$error = array(); // Empty array to store errors in.

foreach ($validate as $regex => $data) {  // Key = $regex, Value = array($variable, $error)
    if (preg_match($regex, ${$data[0]})) { // This code is untested, so try it without the braces around $data[0]
        $error[] = $data[1]; // If the data matches the regular expression provided, add the provided error message to the $error array.
    }
}

if(!empty($errors)) // If the $errors array isn't empty (has an error in it)
{
    echo "The was an error filling out the form:<br><ul>";
    foreach($errors as $msg) // Goes through each error, printing it to an unordered list.
    {
        echo "<li>$msg</li>";
    }
    echo "</ul>Please try again.";
} 
```

请注意，与上面的示例相比，每个示例都具有相同的示例正则表达式，但根据您的需要更改它们很简单。

**编辑**
上面的所有代码都未经测试，尽管它应该可以工作，如果没有，请尝试删除 周围的大括号`$data[0]`，如随附评论中所述。

**更新 2**
如果您需要添加可选检查器，可以稍微修改相同的代码，使用额外的`foreach`循环，以检查所有可选字段。

```
// your 3 fields that need to be validated; 
// Key is Regex, value is array with the variable name (without the $) as the key, 
// and the error message as the value.

$required = array(
    '/^[a-z\d ]{3,20}$/i' => array("name" => "Please enter valid name."), 
    '/^[a-z\d ]{3,20}$/i' => array("category" => "Please enter a real category."),
    '/^[a-z\d ]{3,20}$/i' => array("amount" => "Please enter an amount.")
);

$optional = array(
    '/^[a-z\d ]{3,20}$/i' => array("shipping" => "Please enter valid shipping location."), 
    '/^[a-z\d ]{3,20}$/i' => array("options" => "Please enter an clean option.")
);

$error = array(); // Empty array to store errors in.

foreach ($required as $regex => $data) {  // Key = $regex, Value = array($variable, $error)
    if (preg_match($regex, $$data[0])) { // This code is untested, so try it with or without the braces around $data[0]
        $error[] = $data[1]; // If the data matches the regular expression provided, add the provided error message to the $error array.
    }
}

foreach($optional as $regex => $data)
{
    if(strlen(trim($$data[0])) > 0) // If the trimmed length of the string (all leading and trailing whitespace removed) == 0?
    {
        if (preg_match($regex, $$data[0])) { // This code is untested, so try it with or without the braces around $data[0]
            $error[] = $data[1]; // If the data matches the regular expression provided, add the provided error message to the $error array.
    }
}

if(!empty($errors)) // If the $errors array isn't empty (has an error in it)
{
    echo "The was an error filling out the form:<br><ul>";
    foreach($errors as $msg) // Goes through each error, printing it to an unordered list.
    {
        echo "<li>$msg</li>";
    }
    echo "</ul>Please try again.";
} 
```

# api - 有没有办法在不实际花费请求的情况下检查 Foursquare 场地费率限制？

> ID：11048300
> 
> 赞同：2
> 
> 时间：2012-06-15T09:46:07.163
> 
> 标签：api, foursquare

我目前正在 pingfoursquare 场地平台，以便将我公司的数据与foursquare 的数据协调一致。有关场地协调的信息在这里：[https ://developer.foursquare.com/overview/mapping](https://developer.foursquare.com/overview/mapping)

速率限制在标头中为 X_RATELIMIT_REMAINING。我有一个推出新请求的生产者和一个接触foursquare api的消费者。我想找到一种方法让生产者在不花费剩余请求的情况下检查速率限制。

有谁知道这样做的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T13:53:44.860

不幸的是，没有“虚拟”端点来检查您的速率限制。他们有一个多端点，但据我所知，他们会计算批处理中的每个请求。

你可以算你这边的ratelimit。这是一个解释：

> 窗口仍应实时更新。
> 
> 需要明确的是，如果您的速率限制为 500，则在 11:00，您发送 5 个请求，X-RateLimit-Remaining 将为 495。如果您等待几分钟到 11:05，然后发送另一个请求，X-Rate - 剩余限制将是 494 - 它还没有重置。
> 
> 直到 12:01，您才会取回您在 11:00 发出的 5 个请求。因此，如果您在 12:01 再次请求，您的限制将为 498（-1 表示您刚刚发出的请求，-1 表示 11:05 的请求）。
> 
> 在 12:06 再次请求，您将恢复到 499（完全限制，减去您刚刚使用的）。

从这个线程：[API配额超出](https://stackoverflow.com/questions/10196329/api-quota-exceeded)

如果您重现此逻辑并计算每个端点发出的每个请求，您可以猜测您的速率限制。很抱歉，没有更简单的方法可以做到这一点:(

# android - AsyncTask 不调用 doInBackground 方法

> ID：11048305
> 
> 赞同：2
> 
> 时间：2012-06-15T09:46:13.247
> 
> 标签：android, android-asynctask

这是我的代码：

```
new Loading.LoadTast(ctx) {

            @Override
            protected String doInBackground(Integer... params) {
                Looper.prepare();
                String msg=changePwd();
                closeProgressDialog();
                if(msg == null) {
                    SmartNgApplication.getInstance().exit();
                } else {
                    BaseHelper.showToast(ctx, msg);
                }
                Looper.loop();
                return null;
            }
        }.execute();

public abstract static class LoadTast extends AsyncTask<Integer, Integer, String> {

    private ProgressDialog progressDialog;

    private Context ctx;

    public LoadTast(Context ctx) {
        this.ctx=ctx;
    }

    protected abstract String doInBackground(Integer... params);

    public void onPreExecute() {
        super.onPreExecute();
        progressDialog=ProgressDialog.show(ctx, "", "loading...", true, false);
    }

    public void onPostExecute(String result) {
        super.onPostExecute(result);
        progressDialog.dismiss();
        BaseHelper.showToast(ctx, result);
    }
} 
```

单击按钮运行该方法。单击它 5 次`AsyncTask.onPreExecute`被调用但不调用`doInBackground`所以屏幕仍然显示一个对话框。

我觉得有问题`AsyncTask` `THREAD_POOL_EXECUTOR`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T05:59:55.340

1.  您不应在 doInBackground 中调用任何 UI 更改方法。这就是 onPostExecute 的用途。只做 doInBackground 中 UI 线程上不允许的事情。

2.  要检查为什么 doInBackground 没有被调用，请尝试将实现（来自匿名内部类）放入 LoadTast 中，看看它是否被调用。

3.  我通过将子类调用重命名为 onPostExecute 和 doInBackground 来实现 AsyncWrapper。应该可以覆盖匿名内部类中的包装方法，就像您在示例中使用的那样。

这是短版。我的真实代码涉及一些一般异常处理，不仅是对包装方法的调用。

```
public abstract class AsyncTaskWrapper<Params, Progress, Result> 
  extends AsyncTask<Params, Progress, Result> {

  @Override
  final protected Result doInBackground(Params... params) {
    return wrappedDoInBackground(params);
  }

  protected abstract Result wrappedDoInBackground(Params... params);

  protected abstract void wrappedOnPostExecute(Result result);

  final protected void onPostExecute(Result result) {

    wrappedOnPostExecute(result);
  }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T11:20:36.333

正如 Todd Sjolander 在[此线程](https://stackoverflow.com/questions/12839384/asynctask-doinbackground-not-called-in-android-tablet)中所说...

> 多线程模型在 2.3.5 和 4.0.4 之间发生了变化。AsyncTask 现在默认让应用程序中的所有子类使用同一个线程（即一次只能运行一个 AsyncTask！）。它在这里解释：
> 
> 首次引入时，AsyncTask 在单个后台线程上串行执行。从 DONUT 开始，这被更改为允许多个任务并行运行的线程池。从 HONEYCOMB 开始，任务在单个线程上执行，以避免并行执行导致的常见应用程序错误。
> 
> 如果你真的想要并行执行，你可以使用 THREAD_POOL_EXECUTOR 调用 executeOnExecutor(java.util.concurrent.Executor, Object[])。
> 
> 考虑到这一点，可能是另一个 AsyncTask 正在您的应用程序中运行，从而阻止该任务启动。这可以解释为什么它在您的 2.3.5 设备上运行良好，但在您的 4.0.4 平板电脑上运行良好。

# javascript - 在 javascript 中执行 eventlistener 时出现 Actionscript 错误

> ID：11048310
> 
> 赞同：0
> 
> 时间：2012-06-15T09:46:27.803
> 
> 标签：javascript, actionscript-3, sdk, adobe-indesign

我使用 actionscript 和 indesign sdk 有以下代码：

在我的课开始时

```
 [ Embed (source= "resources/js/eventHandlers.jsx" , mimeType= "application/octet-stream" )]
        private static var jsHandler:Class;
        var  jsxInterface:HostObject = HostObject.getRoot(HostObject.extensions[0]); 
```

在我的功能中：

```
 jsxInterface.eval( new jsHandler().toString());
        jsxInterface.init( this );     
        document.xmlElements.item(0).xmlElements.item("docpreset").importXML(File.applicationStorageDirectory.resolvePath("temp/cstyles.xml"));
        jsxInterface.afterImport(document); 
```

这是 eventHandlers.jsx 中的代码：

```
var asInterface = {};
function init(wrapper) {
  asInterface = wrapper;
} 

function afterImport(document) {
    document.addEventListener (Document.AFTER_IMPORT, asInterface.test());
} 
```

从javascript我称之为：

```
public function test():void {
            trace("ole");
        } 
```

现在，测试函数被正确执行，但之后被调用的下一件事又是：

```
jsxInterface.afterImport(document); 
```

然后抛出错误：

```
Error: ActionScript error: Error: Missing required parameter 'handler' for method 'addEventListener'. 
```

我不知道我需要做什么了。我想要的只是导入 xml 并在导入完成时调度一个事件。

我不知道为什么我什至必须调用一个javascript函数，并且不能在一个普通的eventListener中使用document.AFTER_IMPORT。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T11:41:41.720

问题似乎是在您的`afterImport()`方法中，您错误地添加了事件侦听器。

该`addEventListener()`方法的第二个参数应该是函数的*名称*（从技术上讲，它是对函数的引用）。在您的代码中，您在函数名称的末尾放置了括号——因此，不是提供对函数的引用，而是正在执行该函数。

当函数执行时，它什么也不返回，所以第二个参数`addEventListener()`丢失了，你得到了错误。

试试这个：

```
function afterImport(document) {
    document.addEventListener (Document.AFTER_IMPORT, asInterface.test);
    //                                           notice no "()" here  ^^
} 
```

**[编辑]**

由于您仍然收到错误，您可能需要添加一些代码以进一步调试它。

在上面的方法中，注释掉 addEventListener 行，并替换为如下内容：

```
 // for debugging
    if (asInterface.test == null)
    {
        trace("fail: it's null");
    }
    else if (asInterface.test is Function)
    {
        trace("success: it's a function");
        // this is the only code path where your error will not occur
    }
    else
    {
        trace("fail: i don't know what this is: ", asInterface.test);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T20:36:51.523

我认为您必须像这样启动 AS 包装器：

```
jsxInterface.init( this ); 
```

然后 AS API 可用于 js 代码。

洛伊克

# windows - Windows 安装程序设置

> ID：11048317
> 
> 赞同：1
> 
> 时间：2012-06-15T09:46:42.630
> 
> 标签：windows, installation, admin

我是 VS2010 设置配置的新手，但我的目标是为计算机的所有用户（Windows 中的管理员或标准用户）安装我的 c# 应用程序。实际上，我在管理会话上成功安装了应用程序，我检查了“所有用户”按钮，但是当我以标准用户登录并启动应用程序时，它会尝试从安装源重新安装应用程序（在外部网络上）。

我该怎么做才能在计算机的所有会话上明确安装该应用程序？无论会话类型如何

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T13:33:15.067

对于每台机器安装，您需要将应用程序安装在 Program Files 文件夹中。在您的情况下，设置重新启动可能是因为缺少部分资源，这是触发设置的内置自愈机制。

# c# - Page_LoadComplete 在母版页上不起作用（C#）

> ID：11048318
> 
> 赞同：0
> 
> 时间：2012-06-15T09:46:58.333
> 
> 标签：c#, events, master-pages

我正在尝试在 Page_LoadComplete 的页面上隐藏/显示一些控件。如果将代码放在任何页面中，它可以正常工作，但是当我将代码放在母版页上时，它就不起作用了。我使用了调试，并且该代码未在母版页中执行。我已经检查了@Master 上的 AutoEventWireup=true，但我猜该事件是否仅适用于 Pages 而不适用于 Masters。

我需要它在 Page_LoadComplete 中，因为可见性取决于按钮单击，所以我不能使用 Page_Load 事件。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T09:55:41.150

MasterPage 没有 LoadComplete 事件。只有页面。 [这是所有事件的完整列表。](http://weblogs.asp.net/ricardoperes/archive/2009/03/08/asp-net-page-events-lifecycle.aspx)

# wordpress - WordPress 连接重置/元刷新

> ID：11048321
> 
> 赞同：0
> 
> 时间：2012-06-15T09:47:14.760
> 
> 标签：wordpress, redirect

我的网站在过去一周表现异常。

[http://www.newsatden.co.uk](http://www.newsatden.co.uk)

当用户第一次加载页面时，似乎有什么东西导致了元刷新/重定向。谷歌浏览器返回“连接已重置”错误。

这导致机器人出现问题，并阻止 FB、Bit.ly 等网站正确抓取页面，因为它们通常无法加载页面。FB 调试器经常返回这个：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/1999/REC-html401-19991224/strict.dtd">
<!-- <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd"> --><html>
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta http-equiv="Refresh" content="0.1">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Expires" content="-1">
<title></title>
</head>
<body><p></p></body>
</html> 
```

我的主机建议这是因为 Wordpress 强制域包含“www”。仅当输入没有“www”的域时才会出现元刷新。

但是为什么这会在六个月后突然成为一个问题，这让我无法理解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T10:17:51.917

尝试使用 .htaccess 强制“301”重定向，以便浏览器在点击元刷新之前重定向页面：http: [//www.htaccessbasics.com/force-www-nonwww-domain/](http://www.htaccessbasics.com/force-www-nonwww-domain/)

# javascript - 如何在没有 JQuery 的情况下正确实现跨浏览器兼容的 nextSibling/nextElementSibling 功能？

> ID：11048322
> 
> 赞同：3
> 
> 时间：2012-06-15T09:47:16.653
> 
> 标签：javascript, cross-browser

我需要更新一些旧的 Javascript 以兼容跨浏览器。该代码最初是为 IE6 创建的，并且由于 HTML 的布局方式而大量使用 nextSibling 和 previousSibling。

显然 nextSibling 和 previousSibling 在 Firefox 等中的工作方式不同。下一个最佳选择 nextElementSibling 在旧的 IE 浏览器中不起作用。看来我需要做的是创建一个可以在大多数浏览器中使用的**nextElementSibling等效函数。**

这是我的尝试，似乎不太正确：

```
function getNextElementSibling(CurrentElement) {
    if (CurrentElement.nextElementSibling) {
        return CurrentElement.nextElementSibling
    } else {
        do {
            CurrentElement = CurrentElement.nextSibling;
        } while (CurrentElement && CurrentElement.nodeType !== 1);
        return CurrentElement;
    }
} 
```

需要做什么来修复/更换它？

请注意，JQuery 和其他库**不是一个选项**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T11:19:02.680

我有同样的问题，我觉得奇怪的是 dojo-framework（我正在使用 v1.7）没有为此提供方便的方法。

我的浏览器兼容性问题与 IE 版本 7,8 和 9 以及 webkit 浏览器（最新版本）有关，我还在 Firefox 14 上对其进行了测试，并且似乎可以正常工作。

```
function getNextElementSibling(element) {

    if (element.nextElementSibling) {

        return element.nextElementSibling;
    } else {

        return element.nextSibling;
    } 
} 
```

# xml - 使用 tinyxml 加载 XML 文件

> ID：11048325
> 
> 赞同：0
> 
> 时间：2012-06-15T09:47:21.457
> 
> 标签：xml, tinyxml

我正在尝试使用 tinyxml 加载 XML 文件，但我不确定该怎么做。我通常是 tinyxml 和 XML 文件加载的新手，正在寻求一些帮助。我设法使用 RootElement 函数以及第一个子元素及其属性来获取根。问题是，XML 中的下一行没有属性（或者至少我不认为它被称为属性）而且我不知道如何加载数字。澄清一下，我的 XML 看起来像这样：

```
<?xml version="1.0" encoding="utf-8"?>
<Name name="temp">
<NumLine>125</NumLine>
<Font>12</Font> 
```

我的问题是，如何将值 125 存储在这一行中`<NumLine>125</NumLine>`？就像我说的那样，我对此真的很陌生，无法弄清楚该怎么做，因此将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T21:15:00.820

要获取 之间存储的值，您需要使用 NextSiblingElement() 函数。

这是从 XML 加载数据的基本代码设置

```
TiXmlDocument doc("document.xml");
bool loadOkay = doc.LoadFile(); // Error checking in case file is missing
if(loadOkay)
{
    TiXmlElement *pRoot = doc.RootElement();
    TiXmlElement *element = pRoot->FirstChildElement();
    while(element)
    {
        string value = firstChild->Value(); // In your example xml file this gives you ToDo
        string attribute = firstChild->Attribute("time"); //Gets you the time variable
        element = element->NextSiblingElement();
    }
}
else
{
    //Error conditions
} 
```

# php - PHP 将 UTF8 文本拆分为单词和标点符号

> ID：11048328
> 
> 赞同：1
> 
> 时间：2012-06-15T09:47:32.200
> 
> 标签：php, regex, utf-8, preg-split

我需要这样的 utf-8 文本：

> “Bára, ta která má hezké oči. To je, ale nepříčetně nehorázné！”

拆分为单词和标点数组，如下所示：

```
Array (
    [0] => Bára
    [1] => ,
    [2] => ta
    [3] => která
    [4] => má
    [5] => hezké
    [6] => oči
    [7] => .
    [8] => To
    [9] => je
    [10] => ,
    [11] => ale
    ...
) 
```

我在这里尝试了一些示例，但都不适用于 utf8 文本（á 或 ě 上的拆分文本）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T10:04:57.080

取自[php.net 评论](http://www.php.net/manual/de/function.mb-split.php#99851)（稍作修改）：

```
function mb_str_split( $string ) {
  $split = preg_split('/\b([\(\).,\-\',:!\?;"\{\}\[\]„“»«‘\r\n]*)/u', $string, -1, PREG_SPLIT_DELIM_CAPTURE | PREG_SPLIT_NO_EMPTY);
  return array_filter($split, 'filter');
}

function filter($val) {
  if (trim($val) != '') {
    return trim($val);
  }
  return false;
} 
```

测试：

```
print_r(mb_str_split("Bára, ta která má hezké oči. To je, ale nepříčetně nehorázné!"));

/*
Array
(
    [0] => Bára
    [1] => ,
    [3] => ta
    [5] => která
    [7] => má
    [9] => hezké
    [11] => oči
    [12] => .
    [14] => To
    [16] => je
    [17] => ,
    [19] => ale
    [21] => nepříčetně
    [23] => nehorázné
    [24] => !
)
*/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T10:05:50.093

这个怎么样：

```
$string   = 'Bára, ta která má hezké oči. To je, ale nepříčetně nehorázné!';
$rawSplit = preg_split('/\b/u', $string, 0, PREG_SPLIT_NO_EMPTY);
$result   = array_filter( array_map( function($el) { 
  return trim($el); 
}, $rawSplit)); 
```

# visual-c++ - std::sort 不会对向量进行排序

> ID：11048331
> 
> 赞同：0
> 
> 时间：2012-06-15T09:47:46.053
> 
> 标签：visual-c++

我一直在尝试这个网站上提供的每一个技巧，但没有一个奏效，所以我将解释我的问题是什么。

我很想对包含指向对象的指针的向量进行排序，所以我不能使用`std::sort(vector.begin(), vector.end())`语法，因为它会在指针上使用“<”运算符。这是我的代码示例：

```
// Vertex.h
class Vertex
{
    public :
        inline int getPond() const {return m_Pond;}

    private :
        int m_Pond;
} 
```

.

```
//Graph.h
class Graph
{
    public :
        void sortVertexPond(vector<Vertex*> VertexVect);
        inline bool compareVertex(const Vertex* LeftVertex, const Vertex* RightVertex){return (LeftVertex->getPond() < RightVertex->getPond());}
        void testFunct ();

    private :
        vector<vector Vertex*>> m_VertexByLayers;
} 
```

.

```
//Graph.cpp
#include <algorithm>

void Graph::sortVertexPond(vector<Vertex*> VertexVect)
{
    std::sort(VertexVect.begin(), VertexVect.end(), compareVertex);
    //std::sort(VertexVect.begin(), VertexVect.end(), compareVertexStruct());
}

/*struct compareVertexStruct {
bool operator ()(Vertex* LeftVertex, Vertex* RightVertex) {return (LeftVertex->getPond() < RightVertex->getPond()); }
};*/

void testFunct()
{
    this->sortVertexPond(m_VertexByLayers.at(0));
} 
```

这将无法编译，因为我收到以下错误：

```
error C2780: 'void std::sort(_RanIt,_RanIt)' : 2 arguments expected - 3 provided 
```

正如您在我提供的代码中看到的那样，我已经尝试通过创建一个 Functor 来做到这一点。这样我在编译和运行时不会添加任何问题，奇怪的是，即使调用了我的仿函数（我可以通过在我的运算符中添加一个 cout 来看到），std::sort 也没有对任何内容进行排序。

我有这样的结果：

```
Input : [3,2,1]
3<2? 0
2<1? 0
Output : [3,2,1]

Input : [1,2,3]
1<2? 1
2<3? 1
Output : [1,2,3] 
```

有人可以帮我解决这个问题吗？

PS：对不起，我的英语不是我的母语。

**编辑：**谢谢大家。这是我为修复它所做的。

```
//Graph.h
class Graph
{
    public :
        vector<Vertex*> sortVertexPond(vector<Vertex*> VertexVect);
}

//Graph.cpp
#include <algorithm>

struct compareVertexStruct {bool operator ()(Vertex* LeftVertex, Vertex* RightVertex) {return (LeftVertex->getPond() < RightVertex->getPond());}};

vector<Vertex*> Graph::sortVertexPond(vector<Vertex*> VertexVect)
{
    std::sort(VertexVect.begin(), VertexVect.end(), compareVertexStruct());
    return VertexVect;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T10:18:34.983

您似乎在这里错过了冒号 void Graph:sortVertexPond(vector VertexVect) 。图表后：<-

```
int main(){
    Vertex v1(3), v2(2), v3(1);
    vector<Vertex*> v;

    v.push_back(&v1);
    v.push_back(&v2);
    v.push_back(&v3);

    for(int i=0; i<3; i++) cout << (v.at(i))->getPond() << " "; cout << endl;
    sort(v.begin(), v.end(), compareVertex);
    for(int i=0; i<3; i++) cout << (v.at(i))->getPond() << " "; cout << endl;

    return 0;
} 
```

您的比较器功能和排序似乎工作正常。但是，您的 Graph 类中存在一些问题。我希望它可以帮助您缩小问题的范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T11:15:52.800

您正在将顶点向量按值传递给 sortVertexPond：

```
void Graph::sortVertexPond(vector<Vertex*> VertexVect) 
```

因此，您在调用该函数时正在制作副本，然后对副本进行排序，但原始内容不会更改。

尝试通过引用传递向量：

```
void Graph::sortVertexPond(vector<Vertex*>& VertexVect) // Note the '&' 
```

# windows - EGit - 获取、合并、拉取麻烦

> ID：11048335
> 
> 赞同：2
> 
> 时间：2012-06-15T09:47:54.680
> 
> 标签：windows, linux, eclipse, git, egit

好的，这是交易。
我在我的 Debian (lenny) 远程服务器上安装了 Git。Git版本有1.5.6.5。我打算将它用作远程共享/备份存储库。
我的开发机器正在运行 Windows，我的 Eclipse 和 EGit 就在其中。所以，这就是我所做的：

*   为 git 创建共享用户。
*   设置 SSH（在 Eclipse 和服务器上）、交换公钥等，一切顺利。
*   我创建了远程仓库并使用*git --bare init*对其进行了初始化。
*   在本地 repo 中创建项目，成功进行了一些更改和提交。
*   将 master 分支从本地 repo 推送到远程 master。到现在为止还挺好。
*   （此外，在第三台机器上，我克隆了远程仓库（通过 EGit 导入），没有任何问题。）

当我从项目中**删除**几个文件时，“奇怪”的东西开始了，**提交**，然后尝试从远程**拉**，期望恢复已删除的项目，因为推送到远程的最后一个快照包含所有文件。由于*pull*本质上是*fetch + merge*，EGit 似乎有一些关于合并策略的已知问题。尽管如此，我还是配置了 fetch，从而产生了以下 fetch 规范：

```
refs/heads/master:refs/remotes/amrtest1/master 
```

Fetch 一切正常，至少看起来是这样，在本地 repo 中为远程 master 分支创建了新文件夹，我注意到 FETCH_HEAD 也在那里。
通过签出本地主分支，我尝试与远程主分支合并......结果是：

*   本地删除的文件**未**恢复。
*   在同步透视图中，我可以看到丢失的文件（在传出模式下？）
*   在 EGit 的历史视图中，fetching 的动作按时间顺序**在**本地提交之前（删除文件之后），这肯定是不正确的。

我在这里做错了吗？根据所描述的过程，我对恢复状态的期望是否无效？如果是这样，该怎么做（恢复远程仓库的状态，或者至少将它与现有的本地正确合并）？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T10:13:03.390

Yes, your expectation is wrong. In fact it took several re-reads before I grasped that you believed Git would somehow psychically detect that you didn't want to delete the files which you had *explicitly deleted* and restore them during the merge operation. If you want the files back you ought to either *revert* the commit which removed them, or copy the files from the version where they existed into your current version.

On top of that, if you are correct about what you're calling the "history view of EGit" it probably means you've set pull to perform *rebase* instead of *merge* anyway. In *rebase* it's roughly assumed that your changes since the last pull should be applied as if against the current version of upstream. This is often cleaner for others to understand, but can be confusing or fail outright if many people are changing the same or related code in that time.

# jquery - jquery数字格式

> ID：11048337
> 
> 赞同：-2
> 
> 时间：2012-06-15T09:47:59.627
> 
> 标签：jquery, number-formatting

我有一个这样的脚本，用于运输选项

```
<script language="javascript">
$(document).ready(function()
{   
    var total = 0;
    function calcTotal()
    {
        $("input:checked").each(function()
        {
            //This happens for each checked input field
            var value = $(this).attr("value");
            total += parseInt(value);           

        });
    }
    //This happens when the page loads
    calcTotal();    
    $("#total").append('<input style="border:0px" type="text" name="total" value=" '+ total +' " readonly />');
    $("input:radio").click(function()
    {
        total = 0;
        calcTotal();
        $("#total").html ('<input style="border:0px" type="text" name="total" value=" '+ total +' " readonly />');
    });
});
</script> 
```

使用该选项的无线电输入总共会产生

选项1`<input name="shipp" type="radio" value="1234567" checked />`

选项 2`<input name="shipp" type="radio" value="2345678" />`

输出：`<div id=total></div>`

我需要帮助，如何使查看格式总数为数千？例如**1234567**，结果将是**1,234,567**？

感谢帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T09:52:25.880

副本：

[每三位数字添加逗号](https://stackoverflow.com/questions/1990512/add-comma-to-numbers-every-three-digits-using-jquery)

来自 Doug Neiner 在线程上的回答：

> @Paul Creasey 有最简单的正则表达式解决方案，但这里是一个简单的 jQuery 插件：
> 
> $.fn.digits = function(){ return this.each(function(){ $(this).text( $(this).text().replace(/(\d)(?=(\d\d) \d)+(?!\d))/g, "$1,") ); }) }
> 
> 然后你可以像这样使用它：
> 
> $("span.numbers").digits();

请上他的答案。

您的解决方案如下所示： ...

```
 $("input:checked").each(function()
    {
        //This happens for each checked input field
        var value = $(this).attr("value");
        total += parseInt(value.replace(",",""));           

    });

    //This happens when the page loads
    calcTotal();   
    var totalAsString = total.toString().replace(/(\d)(?=(\d\d\d)+(?!\d))/g, "$1,");  
    $("#total").append('<input style="border:0px" type="text" name="total" value=" '+ totalAsString +' " readonly />');
    $("input:radio").click(function()
    {
        total = 0;
        calcTotal();
        $("#total").html ('<input style="border:0px" type="text" name="total" value=" '+ totalAsString +' " readonly />');
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-19T09:12:54.447

`intVariable.toLocaleString()`为你做一切

# ruby - ruby 的 C1 或 C2 覆盖工具

> ID：11048340
> 
> 赞同：8
> 
> 时间：2012-06-15T09:48:12.950
> 
> 标签：ruby, testing, code-coverage, ruby-1.9

是否有任何工具可用于 Ruby（1.9）的[C1 或 C2 代码覆盖？](http://dev-logger.blogspot.com/2008/06/c0-c1-and-c2-coverage.html)[SimpleCov 仅支持 C0](https://github.com/colszowka/simplecov/issues/105)，但也许还有其他工具。

我知道这里有人问过[类似的问题](https://stackoverflow.com/questions/289321/does-c1-code-coverage-analysis-exist-for-ruby)，但那是几年前的事了，我希望有所改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-30T17:13:58.257

不，目前没有工具可以做到这一点。

也没有避免实现它的技术限制，所以请随意在 github 上创建一些东西 :-)

# c - C中的坐标系作为数组

> ID：11048342
> 
> 赞同：1
> 
> 时间：2012-06-15T09:48:20.173
> 
> 标签：c, arrays, pointers, reference, multidimensional-array

我有一个固定宽度的坐标系

```
#define gridSize 101
int _map[gridSize][gridSize]; 
```

由于我获得了某些 xy 坐标的值，范围从 -50 到 50，因此我想调用我的地图，例如`map[0][0]`作为指向的坐标原点`_map[51][51]`。换句话说，如果我从我的源获得 xy 的值并想将其添加到我的地图中，我想调用

```
map[x][y] = value 
```

而真正获得价值的是

```
_map[51+x][51+y] = value 
```

所以我必须创建一个指针，但我不知道如何在多维数组中做到这一点。

```
#define gridSize 101 // must be an odd number for origin of ordinates in center
#define gridSizeCenter = (int)(gridSize/2)+1;
int _map[gridSize][gridSize];
int map[gridSize][gridSize];
map = &_map[gridSizeCenter][gridSizeCenter]; // wont work 
```

最后一行代码是错误的。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T09:54:01.603

你不能那样做。最好的解决方案可能是拥有一组访问`_map`变量的函数。就像是：

```
void set_map_value(int map[][gridSize], const int value, const int x, const int y)
{
    map[x + 51][y + 51] = value;
}

int get_map_value(int map[][gridSize], const int x, const int y)
{
    return map[x + 51][y + 51];
} 
```

使用函数可以进行类型检查，还可以对坐标进行范围检查。

* * *

您无法按照自己的意愿进行操作以及编译错误的原因之一是类型不兼容。

~~另一个原因是你真的不能在数组中有负索引。请记住，整数`-1`与 相同`0xffffffff`，即超出数组范围*的*`4294967295`大数。~~

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T13:30:10.477

# 是的你可以！

我不认为你可以用数组来做到这一点，但你**可以**用指向数组元素的指针来做到这一点。

但是，**除非我有很好的理由，否则我不会这样做**。负可索引指针不会是阅读您的代码的人所期望的，因此很容易意外误用。为清楚起见，使用基于函数的解决方案可能会更好 - 除非它需要非常快。

有了这个，让我们开始吧！

从您的尝试来看，您似乎对数组和指针感到困惑。请记住，它们[不是一回事](http://c-faq.com/aryptr/aryptr2.html)。

现在，C 不会阻止您使用负索引，[这在您使用指针时是有意义的](https://stackoverflow.com/a/8133853/790070)。所以，你可以这样做：

```
 int a[5]; 
 int *b = a + 2; // or &a[2] 

 b[-2] // is a[0]
 b[-1] // is a[1]
 b[0]  // ia a[2], etc 
```

所以，我认为下面的代码对你有用。

```
#define GRIDSIZE 101

.....

int map_memory[GRIDSIZE][GRIDSIZE];
int *map_rows[GRIDSIZE];
int **map;   
int i;

int gridMidPoint = GRIDSIZE / 2;

for(i = 0; i < GRIDSIZE; i++) {
    map_rows[i] = &(map_memory[i][0]) + gridMidPoint;
}
map = map_rows + gridMidPoint; 
```

然后您可以完全按照您的预期使用它 - 网格大小为 101：

```
for(i = -50; i <= 50; i++) {
    for(j = -50; j <= 50; j++) {
        map[i][j] = i+j;
    }
} 
```

或者，更一般地说：

```
for(i = -1 * gridMidPoint; i <= gridMidPoint; i++) {
    for(j = -1 * gridMidPoint; j <= gridMidPoint; j++) {
        map[i][j] = i+j;
    }
} 
```

由于两个数组都是在堆栈上创建的，因此无需释放任何东西。

* * *

这里发生了什么事？让我分解一下。首先，我们创建后备数组：

```
int map_memory[GRIDSIZE][GRIDSIZE]; 
```

接下来，我们想要一个将用作行的指针数组：

```
int *map_rows[GRIDSIZE]; 
```

我们需要这些指针，因为它们将指向我们刚刚创建的二维数组中的数组中间。

```
int gridMidPoint = GRIDSIZE / 2; 
```

这里我们计算中点。我假设您希望零的每一侧都有相同数量的数组元素 - 所以您不需要示例中的 +1。

```
for(i = 0; i < GRIDSIZE; i++) {
    map_rows[i] = &(map_memory[i][0]) + gridMidPoint;
} 
```

此代码遍历我们的 rows 数组中的每个元素，并将该行设置为指向二维数组中相关行的中间。你也可以写：

```
 map_rows[i] = &map_memory[i][gridMidPoint]; 
```

但我个人认为带有多余括号和添加的版本更易于阅读。我认为如果您使用指针做不寻常的事情，您应该准确说明下一个阅读您的代码的人发生了什么。

最后，我们需要我们的`map`指针指向行的中间：

```
map = map_rows + gridMidPoint; 
```

我们完成了！

* * *

请记住，二维数组实际上是一块连续的内存。这意味着它`map[0][gridMidPoint+1]`与 的位置相同`map[1][-1*gridMidPoint]`。这实际上与普通的二维数组没有什么不同，但在调试时需要注意这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T10:51:35.437

你可以使用这个解决方案

```
#define gridSize 101 // must be an odd number for origin of ordinates in center
#define gridSizeCenter gridSize/2 +1

int main (int argc, char *argv[]) {

    int _map[gridSize][gridSize];
#define MAP(A,B) _map[A+gridSizeCenter][B+gridSizeCenter]
    MAP(-1,-1) = 5;
    MAP(0,0) = 6;
    printf ("MAP(0,0) = %d\r\nMAP(-1,-1) = %d\r\n",MAP(0,0),MAP(-1,-1));
    return 0;
} 
```*

# android - 真正的 android 设备上的协议异常不支持地址族

> ID：11048344
> 
> 赞同：0
> 
> 时间：2012-06-15T09:48:23.417
> 
> 标签：android, sockets, exception, device

我在这里遇到了一些麻烦，一方面我有一个服务器正在侦听端口 23000，另一方面我有一个作为客户端的 Android 应用程序。虽然使用典型的 10.2....IP 在模拟器（顺便说一下，这是为 2.3.3 构建的）中的连接似乎可以工作，但在尝试三星 Galaxy Tab 时，我继续获得著名的：

“协议异常不支持地址族”

最终，代码如下所示：

```
InetSocketAddress inetAddress;

        //this is done to keep backward compatibility prior 2.0.4 release
        if(host == null || host.equals("")) {
            //check if defaultIp is also empty
            if (defaultIPAddress == null || defaultIPAddress.equals(""))
                throw new UnknownHostException();
            //otherwise start listening on defaultIp
            else
            {
                inetAddress = new InetSocketAddress(defaultIPAddress, port);
            }
        }
        //start listening on host
        else
        {
            inetAddress = new InetSocketAddress(host, port);
        }

        // open the socket channel
        this.channel = SocketChannel.open(inetAddress);
        this.channel.configureBlocking(false);
        this.channel.socket().setTcpNoDelay(true); 
```

尝试打开套接字时失败

```
this.channel = SocketChannel.open(inetAddress); 
```

不用说，我在我的清单中拥有所需的权限，如前所述，这在模拟器中运行良好。

此外，这不是网络问题，两台机器都连接到使用我手头的路由器创建的无线 Wifi，没有防火墙，代理，完全打开，这样说......

有任何想法吗？

谢谢！亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T15:52:56.083

如果有人遇到这个问题并且遇到同样的问题，这是因为我试图在主 Activity 的同一个线程中打开 Socket。看起来这是a）不建议和b）不再允许。因此，将您的连接代码移动到一个单独的线程，您应该是安全的。

# c# - 将 int[] 转换为对象时意外的操作符是/作为行为

> ID：11048347
> 
> 赞同：4
> 
> 时间：2012-06-15T09:48:32.450
> 
> 标签：c#

有人可以解释为什么会这样吗？

```
var y = new int[]{1,2};

Console.WriteLine(y is uint[]); // false
Console.WriteLine(((object)y) is uint[]); // true 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T09:52:04.870

在 c# 中，您不能将 an 强制`int`转换为 a `uint`，因此第一个测试失败，因为它被编译为常量 false。

但是， CLR 允许进行**int-** >uint 强制转换。第二次检查不能由编译器推断，因此必须在运行时计算。由于您避开了编译器检查，因此 CLR 允许这样做。

# wordpress-theming - Timthumb 找不到您指定的内部图像

> ID：11048349
> 
> 赞同：0
> 
> 时间：2012-06-15T09:48:34.757
> 
> 标签：wordpress-theming

我正在使用 Timthumb 来调整我的 wordpress 博客中的图片大小。它在我的本地机器上运行良好，但是在远程服务器上上传时 Timthumb 返回以下错误：

找不到您指定的内部图像。

以及浏览器控制台中的 400 Bad 请求。

如何解决这个问题？我被告知它可能取决于服务器路径配置。我使用的 Timthumb 版本是：2.8.10

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T00:18:08.427

我刚刚遇到那个错误，这是因为它在文件系统中的错误位置查找文件。**启用调试**并将其设置为级别 3。打开显示此错误的页面。下载错误日志（与脚本相同的目录）。你会看到它尝试的所有路径。几乎可以从任何地方输出`dirname(__FILE__)`。你会看到它需要的真实路径。将其添加到`timthumb-config.php`as

```
$_SERVER['DOCUMENT_ROOT'] = '/home/username/public_html'; 
```

作为一个例子，我必须这样做（包装在 php 标签中）。以前它使用了一些东西，`/bin/usr/htdocs`这太详细了！

在函数的第 850 行附近`getLocalImagePath`，添加以下内容：

```
$src = str_replace ( "~username/" , "" , $src ); 
```

这是可选的，替换`username`为其他内容。

另一种情况是，您正在使用一些 htaccess 魔术，以便像访问图像`/files/2012/02`而不是`/wp-content/uploads/2012/02`TimThumb 那样访问图像，如果它会将其视为外部 URL...但它会将其视为内部并且它不会找到如此设置的图像相应的 docroot，您可能需要使用前面提到的替换 hack。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-19T20:43:38.353

我对 .htaccess 进行了一些调整，以隐藏我正在使用 Wordpress 的事实。在 timthumb 2.8.11 上。

**后**

```
$this->localImage = $this->getLocalImagePath($this->src); 
```

我已经**编写了**这行代码

```
$this->src = str_replace('/file/', '/wp-content/uploads/', $this->src); 
```

正常 WPway 中的**/file/**应该是**/wp-content/uploads/**。

# solr - solr 搜索返回结果，但需要文本搜索前后的一些句子

> ID：11048351
> 
> 赞同：0
> 
> 时间：2012-06-15T09:48:39.727
> 
> 标签：solr, apache-tika

我正在使用**Apache Solr 3.6.0**。我用这个命令索引了一个文件：

```
 curl "http://localhost:8983/solr/update/extract?stream.file=/home/Desktop/DOCUMENTS/x.pdf&stream.contentType=application/pdf&literal.id=DOC_N&commit=true" 
```

例如，当我搜索文本时：

```
"http://localhost:8983/solr/select/?q=Getting+Started&version=2.2&start=0&rows=10&indent=on" 
```

结果返回是：

```
<response>
    <lst name="responseHeader">
        <int name="status">0</int>
        <int name="QTime">12</int>
        <lst name="params">
            <str name="indent">on</str>
            <str name="start">0</str>
            <str name="q">Getting Started</str>
            <str name="version">2.2</str>
            <str name="rows">10</str>
        </lst>
    </lst>
    <result name="response" numFound="3" start="0">
        <doc>
            <arr name="content_type">
                <str>application/pdf</str>
            </arr>
            <str name="id">doc2</str>
        </doc>
        <doc>
            <arr name="content_type">
                <str>application/pdf</str>
            </arr>
            <str name="id">1</str>
        </doc>
        <doc>
            <arr name="content_type">
                <str>application/pdf</str>
            </arr>
            <str name="id">DOC_N</str>
        </doc>
    </result>
</response> 
```

我从中得到的是结果是在 pdf 中找到的。现在我想实现一个搜索，比如：它会在我从被索引的 pdf 中搜索的那个词之前和之后返回一些文本。请帮忙。

这是我的`solrconfig.xml`

```
<?xml version="1.0" encoding="UTF-8" ?>
<config>
    <abortOnConfigurationError>${solr.abortOnConfigurationError:true}</abortOnConfigurationError>
    <luceneMatchVersion>LUCENE_36</luceneMatchVersion>
    <lib dir="../../dist/" regex="apache-solr-cell-\d.*\.jar" />
    <lib dir="../../contrib/extraction/lib" regex=".*\.jar" />
    <lib dir="../../dist/" regex="apache-solr-clustering-\d.*\.jar" />
    <lib dir="../../contrib/clustering/lib/" regex=".*\.jar" />
    <lib dir="../../dist/" regex="apache-solr-dataimporthandler-\d.*\.jar" />
    <lib dir="../../contrib/dataimporthandler/lib/" regex=".*\.jar" />
    <lib dir="../../dist/" regex="apache-solr-langid-\d.*\.jar" />
    <lib dir="../../contrib/langid/lib/" regex=".*\.jar" />
    <lib dir="../../dist/" regex="apache-solr-velocity-\d.*\.jar" />
    <lib dir="../../contrib/velocity/lib" regex=".*\.jar" />
    <dataDir>${solr.data.dir:}</dataDir>
    <directoryFactory name="DirectoryFactory" 
                        class="${solr.directoryFactory:solr.StandardDirectoryFactory}"/>
    <indexConfig>
    </indexConfig>
    <jmx />
    <query>
        <maxBooleanClauses>1024</maxBooleanClauses>
        <filterCache class="solr.FastLRUCache"
                     size="512"
                     initialSize="512"
                     autowarmCount="0"/>
        <queryResultCache class="solr.LRUCache"
                          size="512"
                          initialSize="512"
                          autowarmCount="0"/>
        <documentCache class="solr.LRUCache"
                       size="512"
                       initialSize="512"
                       autowarmCount="0"/>
        <enableLazyFieldLoading>true</enableLazyFieldLoading>
        <queryResultWindowSize>20</queryResultWindowSize>
        <queryResultMaxDocsCached>200</queryResultMaxDocsCached>
        <listener event="newSearcher" class="solr.QuerySenderListener">
            <arr name="queries">
            </arr>
        </listener>
        <listener event="firstSearcher" class="solr.QuerySenderListener">
            <arr name="queries">
                <lst>
                    <str name="q">static firstSearcher warming in solrconfig.xml</str>
                </lst>
            </arr>
        </listener>
        <useColdSearcher>false</useColdSearcher>
        <maxWarmingSearchers>2</maxWarmingSearchers>
    </query>
    <requestDispatcher>
        <requestParsers enableRemoteStreaming="true" 
                        multipartUploadLimitInKB="2048000" />
        <httpCaching never304="true" />
    </requestDispatcher>
    <requestHandler name="/select" class="solr.SearchHandler">
        <lst name="defaults">
            <str name="echoParams">explicit</str>
            <int name="rows">10</int>
            <str name="df">text</str>
        </lst>
    </requestHandler>
    <requestHandler name="/browse" class="solr.SearchHandler">
        <lst name="defaults">
            <str name="echoParams">explicit</str>
            <!-- VelocityResponseWriter settings -->
            <str name="wt">velocity</str>
            <str name="v.template">browse</str>
            <str name="v.layout">layout</str>
            <str name="title">Solritas</str>
            <str name="df">text</str>
            <str name="defType">edismax</str>
            <str name="q.alt">*:*</str>
            <str name="rows">10</str>
            <str name="fl">*,score</str>
            <str name="mlt.qf">
                text^0.5 features^1.0 name^1.2 sku^1.5 id^10.0 manu^1.1 cat^1.4
            </str>
            <str name="mlt.fl">text,features,name,sku,id,manu,cat</str>
            <int name="mlt.count">3</int>
            <str name="qf">
                text^0.5 features^1.0 name^1.2 sku^1.5 id^10.0 manu^1.1 cat^1.4
            </str>
            <str name="facet">on</str>
            <str name="facet.field">cat</str>
            <str name="facet.field">manu_exact</str>
            <str name="facet.query">ipod</str>
            <str name="facet.query">GB</str>
            <str name="facet.mincount">1</str>
            <str name="facet.pivot">cat,inStock</str>
            <str name="facet.range.other">after</str>
            <str name="facet.range">price</str>
            <int name="f.price.facet.range.start">0</int>
            <int name="f.price.facet.range.end">600</int>
            <int name="f.price.facet.range.gap">50</int>
            <str name="facet.range">popularity</str>
            <int name="f.popularity.facet.range.start">0</int>
            <int name="f.popularity.facet.range.end">10</int>
            <int name="f.popularity.facet.range.gap">3</int>
            <str name="facet.range">manufacturedate_dt</str>
            <str name="f.manufacturedate_dt.facet.range.start">NOW/YEAR-10YEARS</str>
            <str name="f.manufacturedate_dt.facet.range.end">NOW</str>
            <str name="f.manufacturedate_dt.facet.range.gap">+1YEAR</str>
            <str name="f.manufacturedate_dt.facet.range.other">before</str>
            <str name="f.manufacturedate_dt.facet.range.other">after</str>
            <requestHandler name="/update/javabin" 
                            class="solr.BinaryUpdateRequestHandler" />
            <requestHandler name="/update/csv" 
                            class="solr.CSVRequestHandler" 
                            startup="lazy" />
            <requestHandler name="/update/json" 
                            class="solr.JsonUpdateRequestHandler" 
                            startup="lazy" />
            <requestHandler name="/update/extract" 
                            startup="lazy"
                            class="solr.extraction.ExtractingRequestHandler" >
                <lst name="defaults">
                    <!-- All the main content goes into "text"... if you need to return
                    the extracted text or do highlighting, use a stored field. -->
                    <str name="fmap.content">text</str>
                    <str name="lowernames">true</str>
                    <str name="uprefix">ignored_</str>
                    <!-- capture link hrefs but ignore div attributes -->
                    <str name="captureAttr">true</str>
                    <str name="fmap.a">links</str>
                    <str name="fmap.div">ignored_</str>
                </lst>
            </requestHandler>
            <requestHandler name="/update/xslt"
                            startup="lazy"
                            class="solr.XsltUpdateRequestHandler"/>
            <requestHandler name="/analysis/field" 
                            startup="lazy"
                            class="solr.FieldAnalysisRequestHandler" />
            <requestHandler name="/analysis/document" 
                            class="solr.DocumentAnalysisRequestHandler" 
                            startup="lazy" />
            <requestHandler name="/admin/" 
                            class="solr.admin.AdminHandlers" />
            <requestHandler name="/admin/ping" class="solr.PingRequestHandler">
                <lst name="invariants">
                    <str name="q">solrpingquery</str>
                </lst>
                <lst name="defaults">
                    <str name="echoParams">all</str>
                </lst>
            </requestHandler>
            <!-- Echo the request contents back to the client -->
            <requestHandler name="/debug/dump" class="solr.DumpRequestHandler" >
                <lst name="defaults">
                    <str name="echoParams">explicit</str> 
                    <str name="echoHandler">true</str>
                </lst>
            </requestHandler>
            <searchComponent name="spellcheck" class="solr.SpellCheckComponent">
                <str name="queryAnalyzerFieldType">textSpell</str>
                <lst name="spellchecker">
                    <str name="name">default</str>
                    <str name="field">name</str>
                    <str name="spellcheckIndexDir">spellchecker</str>
                    <!-- uncomment this to require terms to occur in 1% of the documents 
                       in order to be included in the dictionary
                    -->
                </lst>
            </searchComponent>
            <requestHandler name="/spell" class="solr.SearchHandler" startup="lazy">
                <lst name="defaults">
                    <str name="df">text</str>
                    <str name="spellcheck.onlyMorePopular">false</str>
                    <str name="spellcheck.extendedResults">false</str>
                    <str name="spellcheck.count">1</str>
                </lst>
                <arr name="last-components">
                    <str>spellcheck</str>
                </arr>
            </requestHandler>
            <searchComponent name="tvComponent" class="solr.TermVectorComponent"/>
            <requestHandler name="/tvrh" class="solr.SearchHandler" startup="lazy">
                <lst name="defaults">
                    <str name="df">text</str>
                    <bool name="tv">true</bool>
                </lst>
                <arr name="last-components">
                    <str>tvComponent</str>
                </arr>
            </requestHandler>
            <searchComponent name="clustering" 
                             enable="${solr.clustering.enabled:false}"
                             class="solr.clustering.ClusteringComponent" >
                <!-- Declare an engine -->
                <lst name="engine">
                    <!-- The name, only one can be named "default" -->
                    <str name="name">default</str>
                    <!-- Class name of Carrot2 clustering algorithm. 
                       Currently available algorithms are:
                       * org.carrot2.clustering.lingo.LingoClusteringAlgorithm
                       * org.carrot2.clustering.stc.STCClusteringAlgorithm
                       * org.carrot2.clustering.kmeans.BisectingKMeansClusteringAlgorithm
                       See http://project.carrot2.org/algorithms.html for the
                       algorithm's characteristics.
                    -->
                    <str name="carrot.algorithm">org.carrot2.clustering.lingo.LingoClusteringAlgorithm</str>
                    <str name="LingoClusteringAlgorithm.desiredClusterCountBase">20</str>
                    <str name="carrot.lexicalResourcesDir">clustering/carrot2</str>
                    <str name="MultilingualClustering.defaultLanguage">ENGLISH</str>
                </lst>
                <lst name="engine">
                    <str name="name">stc</str>
                    <str name="carrot.algorithm">org.carrot2.clustering.stc.STCClusteringAlgorithm</str>
                </lst>
            </searchComponent>
            <!-- A request handler for demonstrating the clustering component
           This is purely as an example.
               In reality you will likely want to add the component to your 
               already specified request handlers. 
            -->
            <requestHandler name="/clustering"
                            startup="lazy"
                            enable="${solr.clustering.enabled:false}"
                            class="solr.SearchHandler">
                <lst name="defaults">
                    <bool name="clustering">true</bool>
                    <str name="clustering.engine">default</str>
                    <bool name="clustering.results">true</bool>
                    <!-- The title field -->
                    <str name="carrot.title">name</str>
                    <str name="carrot.url">id</str>
                    <!-- The field to cluster on -->
                    <str name="carrot.snippet">features</str>
                    <!-- produce summaries -->
                    <bool name="carrot.produceSummary">true</bool>
                    <bool name="carrot.outputSubClusters">false</bool>
                    <str name="df">text</str>
                    <str name="defType">edismax</str>
                    <str name="qf">
                        text^0.5 features^1.0 name^1.2 sku^1.5 id^10.0 manu^1.1 cat^1.4
                    </str>
                    <str name="q.alt">*:*</str>
                    <str name="rows">10</str>
                    <str name="fl">*,score</str>
                </lst>     
                <arr name="last-components">
                    <str>clustering</str>
                </arr>
            </requestHandler>
            <searchComponent name="terms" class="solr.TermsComponent"/>
            <requestHandler name="/terms" class="solr.SearchHandler" startup="lazy">
                <lst name="defaults">
                    <bool name="terms">true</bool>
                </lst>     
                <arr name="components">
                    <str>terms</str>
                </arr>
            </requestHandler>
            <searchComponent name="elevator" class="solr.QueryElevationComponent" >
                <!-- pick a fieldType to analyze queries -->
                <str name="queryFieldType">string</str>
                <str name="config-file">elevate.xml</str>
            </searchComponent>
            <!-- A request handler for demonstrating the elevator component -->
            <requestHandler name="/elevate" class="solr.SearchHandler" startup="lazy">
                <lst name="defaults">
                    <str name="echoParams">explicit</str>
                    <str name="df">text</str>
                </lst>
                <arr name="last-components">
                    <str>elevator</str>
                </arr>
            </requestHandler>
            <searchComponent class="solr.HighlightComponent" name="highlight">
                <highlighting>
                    <!-- Configure the standard fragmenter -->
                    <!-- This could most likely be commented out in the "default" case -->
                    <fragmenter name="gap" 
                                default="true"
                                class="solr.highlight.GapFragmenter">
                        <lst name="defaults">
                            <int name="hl.fragsize">100</int>
                        </lst>
                    </fragmenter>
                    <!-- A regular-expression-based fragmenter 
                       (for sentence extraction) 
                    -->
                    <fragmenter name="regex" 
                                class="solr.highlight.RegexFragmenter">
                        <lst name="defaults">
                            <!-- slightly smaller fragsizes work better because of slop -->
                            <int name="hl.fragsize">70</int>
                            <!-- allow 50% slop on fragment sizes -->
                            <float name="hl.regex.slop">0.5</float>
                            <!-- a basic sentence pattern -->
                            <str name="hl.regex.pattern">[-\w ,/\n\&quot;&apos;]{20,200}</str>
                        </lst>
                    </fragmenter>
                    <!-- Configure the standard formatter -->
                    <formatter name="html" 
                               default="true"
                               class="solr.highlight.HtmlFormatter">
                        <lst name="defaults">
                            <str name="hl.simple.pre"><![CDATA[<em>]]></str>
                            <str name="hl.simple.post"><![CDATA[</em>]]></str>
                        </lst>
                    </formatter>
                    <encoder name="html" 
                             class="solr.highlight.HtmlEncoder" />
                    <fragListBuilder name="simple" 
                                     default="true"
                                     class="solr.highlight.SimpleFragListBuilder"/>
                    <!-- Configure the single fragListBuilder -->
                    <fragListBuilder name="single" 
                                     class="solr.highlight.SingleFragListBuilder"/>
                    <!-- default tag FragmentsBuilder -->
                    <fragmentsBuilder name="default" 
                                      default="true"
                                      class="solr.highlight.ScoreOrderFragmentsBuilder">
                        <!-- 
                        <lst name="defaults">
                          <str name="hl.multiValuedSeparatorChar">/</str>
                        </lst>
                        -->
                    </fragmentsBuilder>
                    <!-- multi-colored tag FragmentsBuilder -->
                    <fragmentsBuilder name="colored" 
                                      class="solr.highlight.ScoreOrderFragmentsBuilder">
                        <lst name="defaults">
                            <str name="hl.tag.pre"><![CDATA[
                   <b style="background:yellow">,<b style="background:lawgreen">,
                   <b style="background:aquamarine">,<b style="background:magenta">,
                   <b style="background:palegreen">,<b style="background:coral">,
                   <b style="background:wheat">,<b style="background:khaki">,
                   <b style="background:lime">,<b style="background:deepskyblue">]]></str>
                            <str name="hl.tag.post"><![CDATA[</b>]]></str>
                        </lst>
                    </fragmentsBuilder>
                    <boundaryScanner name="default" 
                                     default="true"
                                     class="solr.highlight.SimpleBoundaryScanner">
                        <lst name="defaults">
                            <str name="hl.bs.maxScan">10</str>
                            <str name="hl.bs.chars">.,!? &#9;&#10;&#13;</str>
                        </lst>
                    </boundaryScanner>
                    <boundaryScanner name="breakIterator" 
                                     class="solr.highlight.BreakIteratorBoundaryScanner">
                        <lst name="defaults">
                            <str name="hl.bs.type">WORD</str>
                            <str name="hl.bs.language">en</str>
                            <str name="hl.bs.country">US</str>
                        </lst>
                    </boundaryScanner>
                </highlighting>
            </searchComponent>
            <queryResponseWriter name="json" class="solr.JSONResponseWriter">
                <str name="content-type">text/plain; charset=UTF-8</str>
            </queryResponseWriter>
            <queryResponseWriter name="velocity" class="solr.VelocityResponseWriter" startup="lazy"/>
            <!-- XSLT response writer transforms the XML output by any xslt file found
               in Solr's conf/xslt directory.  Changes to xslt files are checked for
               every xsltCacheLifetimeSeconds.  
            -->
            <queryResponseWriter name="xslt" class="solr.XSLTResponseWriter">
                <int name="xsltCacheLifetimeSeconds">5</int>
            </queryResponseWriter>
            <!-- Query Parsers
           http://wiki.apache.org/solr/SolrQuerySyntax
               Multiple QParserPlugins can be registered by name, and then
               used in either the "defType" param for the QueryComponent (used
               by SearchHandler) or in LocalParams
            -->
            <!-- example of registering a query parser -->
            <!--
             <queryParser name="myparser" class="com.mycompany.MyQParserPlugin"/>
            -->
            <admin>
                <defaultQuery>*:*</defaultQuery>
                <!-- configure a healthcheck file for servers behind a
                   loadbalancer 
                -->
                <!--
                 <healthcheck type="file">server-enabled</healthcheck>
                -->
            </admin>
            <searchComponent name="suggest_full" class="solr.SpellCheckComponent">
                <str name="queryAnalyzerFieldType">suggestTextFull</str>
                <lst name="spellchecker">
                    <str name="name">suggest_full</str>
                    <str name="classname">org.apache.solr.spelling.suggest.Suggester</str>
                    <str name="lookupImpl">org.apache.solr.spelling.suggest.tst.TSTLookup</str>
                    <str name="field">text_suggest_full</str>
                    <str name="fieldType">suggestTextFull</str>
                </lst>
            </searchComponent>
            <requestHandler name="/suggest_full" class="org.apache.solr.handler.component.SearchHandler">
                <lst name="defaults">
                    <str name="echoParams">explicit</str>
                    <str name="spellcheck">true</str>
                    <str name="spellcheck.dictionary">suggest_full</str>
                    <str name="spellcheck.count">10</str>
                    <str name="spellcheck.onlyMorePopular">true</str>
                </lst>
                <arr name="last-components">
                    <str>suggest_full</str>
                </arr>
            </requestHandler>
            <requestHandler name="edismax" class="solr.SearchHandler" default="true">
                <lst name="defaults">
                    <str name="defType">edismax</str>
                    <str name="echoParams">explicit</str>
                    <float name="tie">0.1</float>
                    <str name="fl">keywords</str>
                    <str name="mm">1</str>
                    <str name="qf">kw_stopped^1.0 kw_phrases^5.0</str>
                    <str name="pf">kw_phrases^50.0</str>
                    <int name="ps">3</int>
                    <int name="qs">3</int>
                    <str name="q.alt">*:*</str>
                </lst>
            </requestHandler>
            <highlighting>
                <!-- Configure the standard fragmenter -->
                <!-- This could most likely be commented out in the "default" case -->
                <fragmenter name="gap" class="org.apache.solr.highlight.GapFragmenter" default="true">
                    <lst name="defaults">
                        <int name="hl.fragsize">100</int>
                    </lst>
                </fragmenter>
                <!-- A regular-expression-based fragmenter (f.i., for sentence extraction) -->
                <fragmenter name="regex" class="org.apache.solr.highlight.RegexFragmenter">
                    <lst name="defaults">
                        <!-- slightly smaller fragsizes work better because of slop -->
                        <int name="hl.fragsize">70</int>
                        <!-- allow 50% slop on fragment sizes -->
                        <float name="hl.regex.slop">0.5</float>
                        <!-- a basic sentence pattern -->
                        <str name="hl.regex.pattern">[-\w ,/\n\"']{20,200}</str>
                    </lst>
                </fragmenter>
                <!-- Configure the standard formatter -->
                <formatter name="html" class="org.apache.solr.highlight.HtmlFormatter" default="true">
                    <lst name="defaults">
                        <str name="hl.simple.pre"><![CDATA[<em>]]></str>
                        <str name="hl.simple.post"><![CDATA[</em>]]></str>
                    </lst>
                </formatter>
            </highlighting>
            <!-- multi-colored tag FragmentsBuilder -->
            <fragmentsBuilder name="colored" class="org.apache.solr.highlight.ScoreOrderFragmentsBuilder">
                <lst name="defaults">
                    <str name="hl.tag.pre"><![CDATA[
             <b style="background:yellow">,<b style="background:lawgreen">,
             <b style="background:aquamarine">,<b style="background:magenta">,
             <b style="background:palegreen">,<b style="background:coral">,
             <b style="background:wheat">,<b style="background:khaki">,
             <b style="background:lime">,<b style="background:deepskyblue">]]></str>
                    <str name="hl.tag.post"><![CDATA[</b>]]></str>
                </lst>
            </fragmentsBuilder>
            <boundaryScanner name="breakIterator" class="solr.highlight.BreakIteratorBoundaryScanner">
                <lst name="defaults">
                    <str name="hl.bs.type">WORD</str>
                    <str name="hl.bs.language">en</str>
                    <str name="hl.bs.country">US</str>
                </lst>
            </boundaryScanner>
            <boundaryScanner name="simple" class="solr.highlight.SimpleBoundaryScanner" default="true">
                <lst name="defaults">
                    <str name="hl.bs.maxScan">10</str>
                    <str name="hl.bs.chars">.,!?\t\n</str>
                </lst>
            </boundaryScanner>
</config> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T10:25:40.980

Solr 突出显示提供了突出显示搜索词并在匹配前后返回文本的选项。

您可以检查[Solr 突出显示功能](http://lucidworks.lucidimagination.com/display/solr/Highlighting)。
查看[突出显示参数](http://wiki.apache.org/solr/HighlightingParameters)以对其进行配置。

# sdl - 不知道的表情。SDL 相关

> ID：11048353
> 
> 赞同：0
> 
> 时间：2012-06-15T09:48:41.390
> 
> 标签：sdl

我正在学习 SDL，我在手册中找到了这段代码：

```
SDL_Rect **modes;
int i;

/* Get available fullscreen/hardware modes */
modes=SDL_ListModes(NULL, SDL_FULLSCREEN|SDL_HWSURFACE);

/* Check is there are any modes available */
if(modes == (SDL_Rect **)0){
printf("No modes available!\n");
exit(-1);
}

/* Check if or resolution is restricted */
if(modes == (SDL_Rect **)-1){
 printf("All resolutions available.\n");
 }
        else{

   /* Print valid modes */
  printf("Available Modes\n");
  for(i=0;modes[i];++i)
    printf("  %d x %d\n", modes[i]->w, modes[i]->h);
} 
```

我现在认为模式是指向 SDL_rect 数组的指针，但表达式：

```
(modes== (SDL_Rect **)0) 
```

逃脱了我的推理。(SDL_Rect **)0 是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T13:27:00.410

它正在检查它是否为空指针。

由于它正在检查它是否为空，因此不需要强制转换，它可能只是：

```
if(modes == 0) 
```

或者

```
if(modes) 
```

# java - 小程序 URL 的 java.net.MalformedURLException

> ID：11048354
> 
> 赞同：1
> 
> 时间：2012-06-15T09:48:43.540
> 
> 标签：java, applet

我已经签署了我的小程序，它在罐子里。

我在我的jsp中添加了以下代码以嵌入小程序

```
 <applet name="viewerApplet" id="TViewerApplet" width="100%" height="500" code="TViewerApplet.class" codebase="/WEB-INF/lib" mayscript="mayscript" archive="C:/Eclipse_Workspace/Velocity/BSLI_MIS_VELOCITY/WebContent/WEB-INF/lib/SSignedTAppletViewer.jar"> 
```

但我得到以下异常

```
java.net.MalformedURLException: unknown protocol: c 
```

编辑：现在我正在使用

```
<applet name="viewerApplet" id="TViewerApplet" width="100%" height="500" code="TViewerApplet.class" align="baseline" codebase="." mayscript="mayscript" archive="SSignedTAppletViewer.jar,cmbview81.jar"> 
```

新的异常加载：找不到类 TViewerApplet.class。

```
java.lang.ClassNotFoundException: TViewerApplet.class
    at sun.plugin2.applet.Applet2ClassLoader.findClass(Unknown Source)
    at sun.plugin2.applet.Plugin2ClassLoader.loadClass0(Unknown Source)
    at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)
    at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.plugin2.applet.Plugin2ClassLoader.loadCode(Unknown Source)
    at sun.plugin2.applet.Plugin2Manager.createApplet(Unknown Source)
    at sun.plugin2.applet.Plugin2Manager$AppletExecutionRunnable.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.io.IOException: open HTTP connection failed:http://10.160.118.171:8086/BSLI_MIS_VELOCITY/TViewerApplet/class.class
    at sun.plugin2.applet.Applet2ClassLoader.getBytes(Unknown Source)
    at sun.plugin2.applet.Applet2ClassLoader.access$000(Unknown Source)
    at sun.plugin2.applet.Applet2ClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    ... 9 more
Exception: java.lang.ClassNotFoundException: TViewerApplet.class 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T10:43:05.637

```
archive="C:/Eclipse_Workspace/Velocity/BSLI_MIS_VELOCITY/WebContent/WEB-INF/lib/SSignedTAppletViewer.jar" 
```

这有两个问题。

1.  archive 属性是代码库的相对路径（HREF），而它指向文件路径（而不是`file:`基于 URL - 因此`unknown protocol: c`）。但是使用相对路径。
2.  `/WEB-INF/lib/`通常为服务器保留，没有公共访问权限。你需要把罐子放在别的地方。我一般用`/lib/`.

## 更新

> 1.  TViewerApplet 在 SSignedTAppletViewer.jar 中
> 2.  是的，它在包 com.mind 中
> 3.  现在 jar 位于 jsp 所在的同一文件夹中
> 4.  我已经检查了 jar -tvf ，类在 jar 中

好的。将所有这些放在一起会产生一个像这样的小程序元素：

```
<applet
    name="viewerApplet"
    id="TViewerApplet"
    width="100%"
    height="500"
    code="com.mind.TViewerApplet"
    align="baseline"
    codebase="."
    mayscript="mayscript"
    archive="SSignedTAppletViewer.jar,cmbview81.jar">
</applet> 
```

唯一的变化是在`code`属性中，从`TViewerApplet.class`到`com.mind.TViewerApplet`-`.class`不是必需的，但包是。

# python - 如何在Python中执行shell命令获取命令后的输出和密码

> ID：11048360
> 
> 赞同：0
> 
> 时间：2012-06-15T09:48:56.730
> 
> 标签：python, bash, shell, subprocess, pwd

如何执行 shell 命令，可以像 bash 命令行中的普通命令一样复杂，在执行后获取该命令的输出和 pwd？

我使用了这样的功能：

```
import subprocess as sub

def execv(command, path):
    p = sub.Popen(['/bin/bash', '-c', command],
                    stdout=sub.PIPE, stderr=sub.STDOUT, cwd=path)
    return p.stdout.read()[:-1] 
```

我检查用户是否使用`cd`命令，但是当用户使用符号链接到 cd 或其他奇怪的方式来更改目录时，这将不起作用。

我需要一本能容纳的字典`{'cwd': '<NEW PATH>', 'result': '<COMMAND OUTPUT>'}`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T09:53:11.577

如果您使用`subprocess.Popen`，您应该获得一个管道对象，您可以`communicate()`将其用于命令输出并用于`.pid()`获取进程 ID。如果您找不到通过 pid 获取进程当前工作目录的方法，我会感到*非常惊讶......*

例如：[http ://www.cyberciti.biz/tips/linux-report-current-working-directory-of-process.html](http://www.cyberciti.biz/tips/linux-report-current-working-directory-of-process.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-25T21:23:29.807

要获得带有最终 cwd 的任意 shell 命令的输出（假设 cwd 中没有换行符）：

```
from subprocess import check_output

def command_output_and_cwd(command, path):
    lines = check_output(command + "; pwd", shell=True, cwd=path).splitlines()
    return dict(cwd=lines[-1], stdout=b"\n".join(lines[:-1])) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T10:37:59.687

我将标准输出重定向到 pwd 命令的标准错误。如果 stdout 为空且 stderr 不是路径，则 stderr 是命令错误

```
import subprocess as sub

def execv(command, path):
    command = 'cd %s && %s && pwd 1>&2' % (path, command)
    proc = sub.Popen(['/bin/bash', '-c', command],
                     stdout=sub.PIPE, stderr=sub.PIPE)
    stderr = proc.stderr.read()[:-1]
    stdout = proc.stdout.read()[:-1]
    if stdout == '' and not os.path.exists(stderr):
        raise Exception(stderr)
    return {
        "cwd": stderr,
        "stdout": stdout
    } 
```

**更新**：这里是更好的实现（使用 pwd 的最后一行，不要使用 stderr）

```
def execv(command, path):
    command = 'cd %s && %s 2>&1;pwd' % (path, command)
    proc = sub.Popen(['/bin/bash', '-c', command],
                     env={'TERM':'linux'},
                     stdout=sub.PIPE)
    stdout = proc.stdout.read()
    if len(stdout) > 1 and stdout[-1] == '\n':
        stdout = stdout[:-1]
    lines = stdout.split('\n')
    cwd = lines[-1]
    stdout = '\n'.join(lines[:-1])
    return {
        "cwd": cwd,
        "stdout": man_to_ansi(stdout)
    } 
```

# ipad - iOS5：如何在 CGContext 中显示/隐藏绘制的东西

> ID：11048366
> 
> 赞同：1
> 
> 时间：2012-06-15T09:49:08.087
> 
> 标签：ipad, ios5, cgcontext

我为 iPad iOS 5 项目使用 Xcode 4.3。我正在对 UIView 中的 CGContext 执行一些 CG 绘图操作。

例如，我在 UIView 的多个位置绘制一个圆圈并将其移动（以响应用户操作）。

广告某点我想隐藏/删除/清除/删除这个圈子。

做这个的最好方式是什么？重画线宽= 0的圆？还是 alpha = 0？任何的想法？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T12:33:29.380

重绘不带圆圈的视图并设置NeedsDisplay。

# android - 数据访问不正确？

> ID：11048368
> 
> 赞同：0
> 
> 时间：2012-06-15T09:49:13.183
> 
> 标签：android

我正在使用 android 2.1 平台。我拥有的代码将显示模拟器联系人列表中所有人的姓名号码和电子邮件 ID，通过使用此代码，我将获得上述要求。我的模拟器中有一些联系人，我又创建了两个联系人（比如 C 和 D）。但问题是

**问题 1.**如果我创建一个**姓名和号码不是电子邮件**的新联系人，该联系人将从联系人那里获取 **电子邮件 ID**。**例如：**如果我创建一个名称 C 没有电子邮件 ID 但 D 有电子邮件 ID，则 D 是模拟器中已经存在的联系人。 **C 将获取 D 的电子邮件**ID。C 和 D 具有相同的电子邮件 ID。

**问题 2。**如果我再次创建一个**名称为 email 但没有 number**的新联系人，此联系人将从我之前创建的联系人中获取 **号码**。**例如：**如果我创建名称 E 没有号码，但它将采用联系人 C 的号码。因此**C 和 E 具有相同的号码**。

我正在使用此代码

```
public class GetAllDatas extends Activity {

ListView lvItem;
private Button btnAdd;
String displayName="", emailAddress="", phoneNumber="";
ArrayList<String> contactlist=new ArrayList<String>(); 
ArrayAdapter<String> itemAdapter;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    lvItem = (ListView)this.findViewById(R.id.lvitems); 
    btnAdd = (Button)this.findViewById(R.id.btnAddItem);

    itemAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1,contactlist);
    lvItem.setAdapter(itemAdapter);

    btnAdd.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            readContacts();
        }
    });

} 

private void readContacts()
{
    ContentResolver cr =getContentResolver();
    Cursor cursor = cr.query(ContactsContract.Contacts.CONTENT_URI, null, null, null, null);
    while (cursor.moveToNext()) 
    {
        displayName = cursor.getString(cursor.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));       
        String id = cursor.getString(cursor.getColumnIndex(ContactsContract.Contacts._ID));

        Cursor emails = cr.query(Email.CONTENT_URI,null,Email.CONTACT_ID + " = " + id, null, null);
        while (emails.moveToNext()) 
        { 
            emailAddress = emails.getString(emails.getColumnIndex(Email.DATA));
            break;
        }
        emails.close();

        if(Integer.parseInt(cursor.getString(cursor.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER))) > 0)
        {
            Cursor pCur = cr.query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI,null,ContactsContract.CommonDataKinds.Phone.CONTACT_ID +" = ?",new String[]{id}, null);
            while (pCur.moveToNext()) 
            {
                 phoneNumber = pCur.getString(pCur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
                break;  
            } 
            pCur.close();
        }

        //  To display the Details
        contactlist.add(displayName+", "+phoneNumber+", "+ emailAddress+"\n");
        itemAdapter.notifyDataSetChanged();
    }
    Collections.sort(contactlist);
    cursor.close(); 
}
} 
```

我怎么解决这个问题 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T09:54:28.373

正如我理解你的问题..

在引用变量中添加新项目之前，只需擦除前一个.. 就像，

```
emailAddress = "" ; 
displayName  = "" ;
phoneNumber  = "" ; 
```

在您的 while 循环中获取联系信息并将其添加到列表中..

```
private void readContacts()
{
    ContentResolver cr =getContentResolver();
    Cursor cursor = cr.query(ContactsContract.Contacts.CONTENT_URI, null, null, null, null);
    while (cursor.moveToNext()) 
    {
        emailAddress = "" ;
        displayName  = "" ;
        phoneNumber  = "" ;

        displayName = cursor.getString(cursor.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));       
        String id = cursor.getString(cursor.getColumnIndex(ContactsContract.Contacts._ID));

        Cursor emails = cr.query(Email.CONTENT_URI,null,Email.CONTACT_ID + " = " + id, null, null);
        while (emails.moveToNext()) 
        { 
            emailAddress = emails.getString(emails.getColumnIndex(Email.DATA));
            break;
        }
        emails.close(); 
        if(Integer.parseInt(cursor.getString(cursor.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER))) > 0)
        {
            Cursor pCur = cr.query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI,null,ContactsContract.CommonDataKinds.Phone.CONTACT_ID +" = ?",new String[]{id}, null);
            while (pCur.moveToNext()) 
            {
                 phoneNumber = pCur.getString(pCur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
                break;  
            } 
            pCur.close();
        }   

        //  To display the Details
        contactlist.add(displayName+", "+phoneNumber+", "+ emailAddress+"\n");          
    }
    Collections.sort(contactlist);
    itemAdapter.notifyDataSetChanged();
    cursor.close(); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T10:07:54.600

试试这个…………

```
 public void readContacts(){
    ContentResolver cr = getContentResolver();
    Cursor cur = cr.query(ContactsContract.Contacts.CONTENT_URI,
           null, null, null, null);

    contactName=new String[cur.getCount()];
   contactNumber=new String[cur.getCount()][];
   contactEmail=new String[cur.getCount()][];
   int i=0;
    if (cur.getCount() > 0) {
       while (cur.moveToNext()) {
           String id = cur.getString(cur.getColumnIndex(ContactsContract.Contacts._ID));
           String name = cur.getString(cur.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
           contactName[i]=name;
           Log.e("Contact Name",contactName[i]);
           if (Integer.parseInt(cur.getString(cur.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER))) > 0) {

               // get the phone number
               Cursor pCur = cr.query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI,null,
                                      ContactsContract.CommonDataKinds.Phone.CONTACT_ID +" = ?",
                                      new String[]{id}, null);
               contactNumber[i]=new String[pCur.getCount()];
               int j=0;
               while (pCur.moveToNext()) {
                     String phone = pCur.getString(
                            pCur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));

                contactNumber[i][j]=phone;
                Log.d("Contact number",contactNumber[i][j]);
                j++;
               }
               pCur.close();
           }
               // get email and type

              Cursor emailCur = cr.query(
                       ContactsContract.CommonDataKinds.Email.CONTENT_URI,
                       null,
                       ContactsContract.CommonDataKinds.Email.CONTACT_ID + " = ?",
                       new String[]{id}, null);
              contactEmail[i]=new String[emailCur.getCount()];
              int k=0;
               while (emailCur.moveToNext()) {

                   String email = emailCur.getString(
                                 emailCur.getColumnIndex(ContactsContract.CommonDataKinds.Email.DATA));
                   String emailType = emailCur.getString(
                                 emailCur.getColumnIndex(ContactsContract.CommonDataKinds.Email.TYPE));

                contactEmail[i][k]=email;
                Log.v("Contact email",contactEmail[i][k]);
                k++;
               }
               emailCur.close();

           }
       } i++;
  } 
```

# javascript - 函数作用域在 JavaScript 中是如何工作的？

> ID：11048374
> 
> 赞同：-1
> 
> 时间：2012-06-15T09:49:29.937
> 
> 标签：javascript

JavaScript 中的函数作用域是如何工作的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T09:53:30.377

```
// Create a new function = new scope
(function() {
    var a = 1; // create a new variable in this scope

    if (true) { // create a new block
        var a = 2; // create "new" variable with same name,
                   // thinking it is "local" to this block
                   // (which it isn't, because it's not a block scope)
    }

    alert(a); // yields 2 (with a block scope, a would still be 1)
})();

alert(typeof a); // yields "undefined", because a is local to the function scope above 
```

试试看：http: [//jsfiddle.net/9yr9U/](http://jsfiddle.net/9yr9U/)

# jenkins - 詹金斯vss pulgin

> ID：11048379
> 
> 赞同：1
> 
> 时间：2012-06-15T09:49:51.793
> 
> 标签：jenkins, visual-sourcesafe

我在 Windows 64 位版本中安装了 jenkins（使用 java 版本 64 位）

下载了最新的 VSS 插件，我收到此错误由用户匿名启动

致命：D:\java\build\hudson\plugins\vss\WEB-INF\lib\com4j.dll：无法在 AMD 64 位平台上加载 IA 32 位 .dll

java.lang.UnsatisfiedLinkError: D:\java\build\hudson\plugins\vss\WEB-INF\lib\com4j.dll: Can't load IA 32-bit .dll on a AMD 64-bit platform

```
 at java.lang.ClassLoader$NativeLibrary.load(Native Method)

    at java.lang.ClassLoader.loadLibrary0(ClassLoader.java:1778)

    at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1674) 
```

我安装了 java 32 位版本，但仍然出现上述错误。

请帮我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T12:34:55.140

删除 64 位并安装 32 位 java 版本。它对我有用

# java - 如何将属性文件中提到的驱动器路径获取到文件中

> ID：11048380
> 
> 赞同：0
> 
> 时间：2012-06-15T09:49:53.030
> 
> 标签：java, spring, file

我必须从 UI 读取和写入 userdata.properties，到目前为止，每件事都像读取和写入一样工作，在我提到像这样的文件中的硬编码直接路径之前

```
File f = new File("D:\\user\\userdata.properties") 
```

但我的问题是，如果我这样提到我无法更改路径，因为我必须在另一个 path.properties 文件中提到 D:\user\userdata.properties，现在我必须读取 path.properties 文件

```
File f = new File(........) 
```

请帮助我如何做到这一点。这就是我目前用来读取 userdata.properties 的方式

```
@RequestMapping("/proxy")
    public String ProxySettings(Model model) throws Exception {

        File f = new File("D:\\sahi\\userdata.properties");
        //String path = MobeeProxyChangeController.class.getResourceAsStream("/property/path.properties").toString();

        Properties properties = new Properties();

        try {
            properties.load(new FileInputStream(f));

            String getHost = properties.getProperty("ext.http.proxy.host");
            String getPort = properties.getProperty("ext.http.proxy.port");

            model.addAttribute("proxyHost", getHost.trim());
            model.addAttribute("proxyPort", getPort.trim());
        } catch (Exception e) {
            e.printStackTrace();
        }

        return "proxyFile";

    } 
```

提前致谢

金星

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T10:11:25.060

将您的属性文件放在类路径上并通过`MessageSource`

例子：

属性文件“foo.properties”：

```
foo=bar
baz=phleem 
```

Java代码：

```
public static void main(final String[] args) {
    final ResourceBundleMessageSource messageSource = new ResourceBundleMessageSource();
    messageSource.setBasename("foo");
    System.out.println(messageSource.getMessage("foo", new Object[0], Locale.getDefault()));
} 
```

输出：

> 酒吧

你可以让 Spring 注入它`MessageSource`，但我认为你必须通过 XML（或通过`@Configuration`）来做到这一点。但是您也可以手动执行此操作，但是，您应该每个课程只执行一次，而不是每个请求执行一次。

* * *

好的，这是一个如何使用 Spring 将其连接在一起的示例：

XML配置：

```
<bean id="proxySettings" class="org.springframework.context.support.ResourceBundleMessageSource">
    <property name="basename" value="userdata" />
</bean> 
```

控制器类：

```
@Controller
public class ProxyController {

    private static final Locale LOCALE = Locale.getDefault();
    private static final Object[] EMPTY_ARGS = new Object[0];

    @Autowired @Qualifier("proxySettings")
    private MessageSource messageSource;

    @RequestMapping("/proxy")
    public String proxySettings(final Model model) throws Exception {
        model.addAttribute("proxyHost", messageSource.getMessage("ext.http.proxy.host", EMPTY_ARGS, LOCALE));
        model.addAttribute("proxyPort", messageSource.getMessage("ext.http.proxy.port", EMPTY_ARGS, LOCALE));
        return "proxyFile";
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T10:02:47.707

首先，您不应该`load`为每个请求调用该方法。这对你来说会非常昂贵。

其次，由于您已经在使用 spring，因此无需以这种方式读取属性文件。你可以注入它。

我建议为您的班级`proxyHost`和`proxyPort`在您的班级中创建字段作为字段。

```
public class MyController {
    ...
    private String proxyHost;
    private String proxyPort;

    @RequestMapping("/proxy")
    public String ProxySettings(Model model) throws Exception {
        model.addAttribute("proxyHost", this.proxyHost);
        model.addAttribute("proxyPort", this.proxyPort);

        return "proxyFile";
    }

    // provide setters for the above fields or use @Autowired
} 
```

您的弹簧配置如下所示：

```
<bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="location" value="classpath:userdate.properties" />
</bean>

<bean class="com.foo.MyController">
    <property name="proxyHost" value="${ext.http.proxy.host}"/>
    <property name="proxyPort" value="${ext.http.proxy.port}"/>
</bean> 
```

您可以`userdata.properties`根据保存位置从类路径或文件系统中读取。

# css - Twitter Bootstrap - 将带有显示的标签居中：缩略图内的块？

> ID：11048384
> 
> 赞同：1
> 
> 时间：2012-06-15T09:50:16.293
> 
> 标签：css, twitter-bootstrap

我试图将我的 .img-link 标签放在缩略图的中心，但没有任何运气。

这是我正在做的示例的链接[http://jsfiddle.net/Dhk3M/](http://jsfiddle.net/Dhk3M/)。

这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T09:53:37.273

给**.thumbnail** `text-align:center`。像这样写：

```
.thumbnail {
    text-align: center;
} 
```

检查这个[http://jsfiddle.net/Dhk3M/1/](http://jsfiddle.net/Dhk3M/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T09:51:32.407

要使元素自动居中，它必须具有固定的宽度，以便您可以应用`margin-left: auto;` 和`margin-right: auto;`

```
.img-link img {
    width: 267px;
    margin: 0 auto;
    display: block;
} 
```

如果您可以在 css 中实际设置元素宽度，则这是有效的，这意味着您知道元素将始终具有完全相同的宽度。或者：

```
text-align: center; 
```

适用于内联元素（如 img 标签）

# backbone.js - Backbone.js 任务应用程序应该如何分组视图

> ID：11048385
> 
> 赞同：0
> 
> 时间：2012-06-15T09:50:26.400
> 
> 标签：backbone.js, views, underscore.js, backbone-views, backbone-routing

我正在 Backbone.js 中为**FUN**开发一个任务应用程序，其中一个功能是分组视图。分组视图将显示根据完成状态分组的任务。目前我可以从集合中构造分组对象。构建视图对我来说变得微不足道。这是我希望视图看起来如何的快照

```
Completed Tasks

- Water the Garden

- Clean my closet

Pending Tasks

- Watch Whose line is it anyway 
```

分组后的JSON如下

```
{
    "true": [{
        "Name": "Finished Demo",
        "Done": true,
        "id": "4b3d8d3d-637c-fd5d-034b-b275b5f00e05"
    }, {
        "Name": "This is a new task",
        "Done": true,
        "id": "db5b379f-6f96-346d-4945-baf2d5ac0c76"
    }, {
        "Name": "Clean the closet",
        "Done": true,
        "id": "3b5091e5-a8df-845b-3c6d-2185187eb456"
    }],
    "false": [{
        "Name": "Edited another new task",
        "Done": false,
        "id": "0ee399b2-8fd9-84f2-735e-902d09c625a1"
    }]
} 
```

我想不出如何根据上面的分组 json 为 UI 构建模板。假设我使用 underscore.js[`_.template`](http://underscorejs.org/#template)进行模板化。

*   模板的外观应该如何

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T10:56:56.483

请记住，`true`并且`false`是Javascript 中的~~保留~~关键字。我建议您不要将其用作变量名。

```
<ul>
    <% if (finished) { %>
        <% _.each(finished, function (task) { %>
            <li id=<%= task.id %>>
                <%= task.Name %>
            <input type="checkbox" checked />
            </li>
        <% }); %>
    <% }; %>
    <% if (unfinished) { %>
        <% _.each(unfinished, function (task) { %>
            <li id=<%= task.id %>>
                <%= task.Name %>
            <input type="checkbox" />
            </li>
        <% }); %>
    <% }; %>
</ul> 
```

[http://jsfiddle.net/theotheo/zJXW8/](http://jsfiddle.net/theotheo/zJXW8/)

# asp.net-mvc-3 - 有人可以解释这些代码行吗？

> ID：11048386
> 
> 赞同：0
> 
> 时间：2012-06-15T09:50:26.760
> 
> 标签：asp.net-mvc-3

我正在修复某些应用程序的错误，我需要帮助理解以下代码行：

在这里，查看：

```
@Html.RenderControlText("WFD_CONSENT") 
```

控制器：

```
public static MvcHtmlString RenderControlText(this HtmlHelper htmlHelper, string controlType)
        {
            return htmlHelper.Action("ControlText", new { controlType = controlType });
        } 
```

这里的参数`controlType = "WFD_CONSENT"`。我无法了解该功能`htmlhelper.Action()`在这里做什么。从逻辑上讲，这个函数`RenderControlText()`应该从某个地方获取一些数据，但它看起来不像。我在这里陷入了死胡同。这个方法`RenderControlText()`应该获取一些我保存在某处的文本，并显示它。

编辑： Action() 方法具有以下参数：动作名称和对象路由值？第二部分是什么：`new { controlType = controlType }`？这个路由值是做什么的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T09:55:41.750

> 我无法得到函数 htmlhelper.Action() 在这里做什么。

请查看 Phil Haack 的[以下博客文章](http://haacked.com/archive/2009/11/18/aspnetmvc2-render-action.aspx)，其中详细解释了子行为。

Html.Action 助手基本上执行一个*子动作*。子动作是一个标准的控制器动作，除了它可以与主请求的执行并行呈现。

`Html.Action("SomeAction", "SomeController")`表示`SomeAction`将在其上执行`SomeController`并将此操作的执行结果呈现到输出。

相反：`Html.Action("SomePartial")`意味着`SomePartial`将直接呈现到输出，而不执行任何子控制器和动作。

但在这两种情况下，所有处理都发生在单个客户端请求中。只是您拥有执行并呈现视图的主控制器操作，并且在此视图中，您使用 Html.Action 帮助器来实例化子控制器和操作（例如可以返回部分视图）和执行结果这个视图直接插入到输出中。

# javascript - 用 Javascript 中的东西替换 jQuery 中的 Bind 事件

> ID：11048388
> 
> 赞同：1
> 
> 时间：2012-06-15T09:50:29.443
> 
> 标签：javascript, jquery, bind, bookmarklet, unbind

我需要用 JavaScript 中的一些事件替换来自 JQuery 的 Bind 事件。

我正在开发一个书签，我收到了用 JavaScript 替换 jQuery 的命令

我有以下代码

```
$(document).unbind("mousemove", X.highlighter);

$(document).bind("mousemove", X.highlighter); 
```

并且

```
var current, overlay = $("#overlayhighlight"), o = $('#y'); 
```

这最后 3 个我可以用 document.getElementsByID 替换

绑定和解除绑定...没有线索

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T09:56:48.793

```
document.onmousemove(function(){
//do something here
});

var current, overlay = doucment.getElementById("overlayhighlight"), o = docuemnt.getElementById('y'); 
```

您可以用上面的 javascript 代码替换 jquery 代码

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T09:54:44.540

看看`element.addEventListener()`（[MDN 文档](https://developer.mozilla.org/en/DOM/element.addEventListener)）和`element.removeEventListener`（[MDN 文档](https://developer.mozilla.org/en/DOM/element.removeEventListener)）。

```
document.addEventListener( 'mousemove', X.highlighter );

document.removeEventListener( 'mousemove', X.highlighter ); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-15T09:56:48.030

## 使用以下示例附加简单事件

```
if (document.addEventListener) {  
      document.addEventListener('mousemove', modifyText, false);   
    } else if (document.attachEvent)  {  
      document.attachEvent('onmousemove', modifyText);  
    } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-15T09:58:34.753

将此添加到脚本的顶部并像往常一样使用 jQuery，如果网站没有 jquery，没关系。

```
var js = document.createElement("https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js");
js.type = "text/javascript";
js.src = jsFilePath;
document.body.appendChild(js); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-15T09:52:34.027

```
document.onmousemove=X.highlighter;//bind

document.onmousemove=null;//unbind 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-15T09:53:38.750

检查我们的[这个链接](http://www.quirksmode.org/js/events_mouse.html)以获取大量鼠标事件信息，更具体地说是这个：

> 鼠标移动
> 
> mousemove 事件可以正常工作，但您应该知道处理所有 mousemove 事件可能需要相当长的系统时间。如果用户将鼠标移动一个像素，则触发 mousemove 事件。即使实际上什么也没发生，冗长而复杂的功能也需要时间，这可能会影响网站的可用性：一切都进展得很慢，尤其是在旧电脑上。
> 
> 因此，最好仅在需要时注册 onmousemove 事件处理程序，并在不再需要时立即将其删除：

```
element.onmousemove = doSomething;
// later
element.onmousemove = null; 
```

# android - 如何在android中的列表视图特定行中禁用onitem点击

> ID：11048392
> 
> 赞同：2
> 
> 时间：2012-06-15T09:50:57.283
> 
> 标签：android

如何在android中的特定行中禁用项目单击的列表视图。如果值为搜索我必须在android的列表视图中禁用特定行的onitem单击事件有人能告诉我该怎么做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T10:04:41.653

试试这个代码

```
mListView.setOnItemClickListener(new OnItemClickListener()
{
@Override
public void onItemClick(AdapterView<?> arg0, View view, int arg2,long arg3) 
{
if(your condition)
    {
    //your click event code
    }
    else
    {
    //nothing
    }
}
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T10:09:45.270

你为完整的行

```
onListItemClick(AdapterView<?> l, View v, int position, long id) {

       if(Clickable condition ){
              super.onListItemClick(l, v, position, id);
               // your code .........
          }else{

          }
    } 
```

# jquery - 如何在jqgrid中实现编辑内联

> ID：11048393
> 
> 赞同：0
> 
> 时间：2012-06-15T09:50:59.427
> 
> 标签：jquery, jqgrid, jqgrid-asp.net, jqgrid-formatter

我在 jqgrid 中启动，我想在 jqgrid 中实现内联编辑我有这个网格

```
$(function () {
    var grid = $('#list');
    grid.jqGrid({
        url: 'jQGridHandler.ashx',
        postData: { ActionPage: 'ClearanceCost', Action: 'Fill' },
        ajaxGridOptions: { cache: false },
        loadonce: true,
        datatype: 'json',
        height: 490,
        colNames: ['REQUEST_ID','WAYBILL_NO', 'COST_ID', 'COST_NAME','COST_AMOUNT', 'CURRENCY_ID ', 'CURRENCY_NAME','REMARK'],
        colModel: [
            { name: 'REQUEST_ID', width: 100, sortable: true,hidden:true },
            { name: 'WAYBILL_NO', width: 100, sortable: true, hidden: true },
            { name: 'COST_ID', width: 200, sortable: true, hidden: true },
            { name: 'COST_NAME', width: 200, sortable: true },
            { name: 'COST_AMOUNT', width: 100, sortable: true },
            { name: 'CURRENCY_ID', width: 100, sortable: true, hidden: true },
            { name: 'CURRENCY_NAME', width: 200, sortable: true },
            { name: 'REMARK', width: 200, sortable: true }
        ],
        gridview: true,
        rowNum: 20,
        rowList: [20, 40, 60],
        pager: '#pager',
        sortname: 'REQUEST_ID',
        viewrecords: true,
        sortorder: 'ASC',
        rownumbers: true,
        editurl: 'jQGridHandler.ashx',
        onSelectRow: function (id) {
            if (id && id !== lastsel) {
                jQuery('#list').jqGrid('restoreRow', lastsel);
                jQuery('#list').jqGrid('editRow', id, true);
               lastsel = id;
            }
         }
        });
        grid.jqGrid('navGrid', '#pager', { add: true, edit: true, del: true }, {}, {}, {},
            { multipleSearch: true, overlay: false, width: 460 }); 
```

我首先在 jqgrid 中填写所有 costType 并且我希望用户在 Amount 单元格中输入金额并在 currency_unit 单元格中选择货币单位，当用户在行中单击时，在此网格中，此行更改为可编辑，但我希望在加载页面时所有行都是可编辑的。谢谢大家。

我更改代码但我无法获取数据行以保存在数据库中我编写此代码

```
$(function () {
    var lastSel;
    var grid = $('#list');
    calculateTotal = function () {
        var totalAmount = grid.jqGrid('getCol', 'COST_AMOUNT', false, 'd');
        var totalTax = grid.jqGrid('getCol', 'COST_NAME', false, 'd');
        alert(totalAmount.length);
        for (var i = 0; i <= totalAmount.length - 1; i++) {
            alert(totalTax[i] + "=" + totalAmount[i]);
        }
    };
    grid.jqGrid({
        url: 'jQGridHandler.ashx',
        postData: { ActionPage: 'ClearanceCost', Action: 'Fill' },
        ajaxGridOptions: { cache: false },
        loadonce: true,
        direction: "rtl",
        datatype: 'json',
        height: 490,
        colNames: ['REQUEST_ID','WAYBILL_NO', 'COST_ID', 'COST_NAME','COST_AMOUNT', 'CURRENCY_ID ', 'CURRENCY_NAME','REMARK'],
        colModel: [
            { name: 'REQUEST_ID', width: 100, sortable: true, hidden: true },
            { name: 'WAYBILL_NO', width: 100, sortable: true, hidden: true },
            { name: 'COST_ID', width: 200, sortable: true, hidden: true },
            { name: 'COST_NAME', width: 200, sortable: true },
            { name: 'COST_AMOUNT', width: 100, sortable: true, editable: true },
            { name: 'CURRENCY_ID', width: 100, sortable: true, hidden: true },
            { name: 'CURRENCY_NAME', width: 200, sortable: true, editable: true },
            { name: 'REMARK', width: 200, sortable: true, editable: true }
        ],
        gridview: true,
        rowNum: 30,
        rowList: [30, 60, 90],
        pager: '#pager',
        sortname: 'REQUEST_ID',
        viewrecords: true,
        sortorder: 'ASC',
        caption: 'درخواست ها......',
        rownumbers: true,
        loadComplete: function () {
            var $this = $(this), rows = this.rows, l = rows.length, i, row;
            for (i = 0; i < l; i++) {
                row = rows[i];
                if ($.inArray('jqgrow', row.className.split(' ')) >= 0) {
                    $this.jqGrid('editRow', row.id, true);
                }
            }
        }
    });
    grid.jqGrid('navGrid', '#pager', { add: true, edit: true, del: true }, {}, {}, {},
        { multipleSearch: true, overlay: false, width: 460 });

    $("#btnsave").click(function () {
        calculateTotal();
    });
}); 
```

但是这段代码不起作用，奥莱格先生感谢您的帮助。

EDIT02：我创建这个

![在此处输入图像描述](../Images/92b2417017e02ce82fb1ed73b3e342ad.png)

使用此代码。我想当用户单击保存按钮时所有数据都发送到服务器但不工作

```
$(document).ready(function () {
    var mydata = [
            { COST_NAME: "A", COST_AMOUNT: "", CURRENCY_NAME: "" },
            { COST_NAME: "b", COST_AMOUNT: "", CURRENCY_NAME: "" },
            { COST_NAME: "c", COST_AMOUNT: "", CURRENCY_NAME: "" },
            { COST_NAME: "d", COST_AMOUNT: "", CURRENCY_NAME: "" },
            { COST_NAME: "e", COST_AMOUNT: "", CURRENCY_NAME: "" },
            { COST_NAME: "f", COST_AMOUNT: "", CURRENCY_NAME: "" },
            { COST_NAME: "g", COST_AMOUNT: "", CURRENCY_NAME: "" }
        ];
    var lastSel;
    var grid = $('#list');
    calculateTotal = function () {
        var totalAmount = grid.jqGrid('getCol', 'COST_AMOUNT', false, 'd');
        var totalTax = grid.jqGrid('getCol', 'COST_NAME', false, 'd');
        alert(totalAmount.length);
        for (var i = 0; i <= totalAmount.length - 1; i++) {
            alert(totalTax[i] + "=" + totalAmount[i]);
        }
    };
    grid.jqGrid({
        postData: { ActionPage: 'ClearanceCost', Action: 'Fill' },
        ajaxGridOptions: { cache: false },
        loadonce: true,
        datatype: "local",
        data: mydata,
        mtype: 'POST', 
        height: 'auto',
        colNames: [ 'COST_NAME', 'COST_AMOUNT', 'CURRENCY_NAME'],
        colModel: [
            { name: 'COST_NAME', width: 200, sortable: true },
            { name: 'COST_AMOUNT', width: 100, sortable: true, editable: true },
            { name: 'CURRENCY_NAME', width: 200, sortable: true, editable: true }
        ],
        gridview: true,
        rowNum: 30,
        rowList: [30, 60, 90],
        pager: '#pager',
        viewrecords: true,
        sortorder: 'ASC',
        rownumbers: true,
        loadComplete: function () {
            var $this = $(this), rows = this.rows, l = rows.length, i, row;
            for (i = 0; i < l; i++) {
                row = rows[i];
                if ($.inArray('jqgrow', row.className.split(' ')) >= 0) {
                    $this.jqGrid('editRow', row.id, true);
                }
            }
        }
    });
    grid.jqGrid('navGrid', '#pager', { add: true, edit: true, del: true }, {}, {}, {},
        { multipleSearch: true, overlay: false, width: 460 });

    $("#btnsave").click(function () {
        calculateTotal();
    });
}); 
```

与身体

```
<table id="list"></table>
<input type="button" value="Save" id="btnsave"/> 
```

谢谢大家

新编辑：我为这个问题写了这段代码

```
grid.jqGrid({
    url: 'jQGridHandler.ashx',
    postData: { ActionPage: 'ClearanceCost', Action: 'Fill' },
    ajaxGridOptions: { cache: false },
    loadonce: true,
    direction: "rtl",
    pgtext: "صفحه {0} از {1}",
    datatype: 'json',
    height: 490,
    colNames: ['شماره درخواست', 'شماره بارنامه', 'شماره هزینه', 'نام هزینه', 'مبلغ', 'کد واحدهزینه ', 'توضیحات'],
    colModel: [
        { name: 'REQUEST_ID', width: 100, sortable: true, hidden: true },
        { name: 'WAYBILL_NO', width: 100, sortable: true, hidden: true },
        { name: 'COST_ID', width: 200, sortable: true, hidden: true },
        { name: 'COST_NAME', width: 200, sortable: true },
        { name: 'COST_AMOUNT', width: 100, sortable: true, editable: true },
        { name: 'CURRENCY_ID', width: 100, sortable: true, editable: true, edittype: 'select', editoptions: {
                url: "JQGridHandler.ashx?ActionPage=CurrencyUnit&Action=FillDrop",
                dataInit: function (data) {
                    var response = jQuery.parseJSON(data.responseText);
                    var s = '<select>';
                    s += '<option value="0">انتخاب کنید</option>';
                    if (response && response.length) {
                        for (var i = 0, l = response.length; i < l; i++) {
                            var ri = response[i];
                            s += '<option value="' + ri.CURRENCY_ID + '">' + ri.CURRENCY_NAME + '</option>';
                        }
                    }
                    return s + "</select>";

                }
            }
        },
        { name: 'REMARK', width: 200, sortable: true, editable: true }
    ],
    gridview: true,
    rowNum: 30,
    rowList: [30, 60, 90],
    pager: '#pager',
    sortname: 'REQUEST_ID',
    viewrecords: true,
    sortorder: 'ASC',
    caption: 'درخواست ها......',
    rownumbers: true,
    loadComplete: function () {
        var strOption = "";
        $.ajax({
            url: 'JQGridHandler.ashx',
            contentType: 'application/json; charset=utf-8',
            data: { ActionPage: 'CurrencyUnit', Action: 'FillDrop' },
            success: function (data) {
                var rows = data.rows;
                strOption = '<option value=0>انتخاب کنید</option>';
                if (data.rows.length > 0) {
                    for (var i = 0, l = rows.length; i < l; i++) {
                        var ri = rows[i];
                        strOption += '<option value="' + ri.cell[0] + '">' + ri.cell[1] + '</option>';
                    }
                }
            },
            dataType: 'json'
        });

        var $this = $(this);
        rows = this.rows;
        var l = rows.length, i, row;

        for (i = 0; i < l; i++) {
            row = rows[i];

//              var $t = grid.jqGrid('getCell', row.id, 'CURRENCY_ID');
//              var $id = $($t).attr("id");

//              $("#" + $id).val(strOption);
                    // console.log(row.id);

            var selRowId = grid.jqGrid('getGridParam', row.id);
               console.log(selRowId);
               console.log(grid.jqGrid('getCell', row.id, 'CURRENCY_ID'));

            if ($.inArray('jqgrow', row.className.split(' ')) >= 0) {
                $this.jqGrid('editRow', row.id, true);
            }

        }
    },
    editurl: "jQGridHandler.ashx"
});
grid.jqGrid('navGrid', '#pager', { add: true, edit: true, del: true }, {}, {}, {},
    { multipleSearch: true, overlay: false, width: 460 }); 
```

第一个问题：这段代码是真的吗？我现在无法填写下拉列表。请帮助我，奥列格先生。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T11:25:03.090

您可以枚举网格中的所有行并在其中调用`editRow`（有关代码示例，`loadComplete`请参见[此处](https://stackoverflow.com/a/9172234/315935)）。您应该了解该方法的一些缺点：

*   在行数较多的情况下，在循环中设置行内编辑模式下的网格线会很慢。所以你应该在案例中慎重选择`rowNum`。性能缓慢的原因很简单：页面上一个元素的每一次变化都需要*重新计算页面上所有其他元素的位置，*或者至少要重[排](https://developers.google.com/speed/articles/reflow)。`editRow`方法更改行中的一个单元格，然后更改另一个单元格，依此类推。在每个单元格修改后，对所有行应用`editRow`循环中的整个页面都会重排。在大网格的情况下，您将有很多回流。
*   如果您需要从编辑行中读取信息，您将需要做一些技巧，因为`getRowData`并且`getCol`在这种情况下不起作用。在[答案](https://stackoverflow.com/a/5129908/315935)中，您可以找到相应的解决方案。如果足以让您获得上次保存的数据，您可以使用`getLocalRow`方法。

**更新**：可编辑行之间的键盘导航实际上绝对是另一个问题。不过，例如，您可以在网格上绑定`keydown`事件，并在需要时将焦点更改在另一个单元格上。例如[，下一个演示](http://www.ok-soft-gmbh.com/jqGrid/InlineEditWithKeyboardNavigation.htm)展示了如何将`Up`和箭头键与标准和键`Down`一起使用：`Tab``Shift+Tab`

```
$('#list').keydown(function (e) {
    var $td = $(e.target).closest("td"),
        $tr = $td.closest("tr.jqgrow"),
        ci, ri, rows = this.rows;
    if ($td.length === 0 || $tr.length === 0) {
        return;
    }
    ci = $.jgrid.getCellIndex($td[0]);
    ri = $tr[0].rowIndex;
    if (e.keyCode === $.ui.keyCode.UP) { // 38
        if (ri > 0) {
            $(rows[ri-1].cells[ci]).find("input,select").focus();
        }
    }
    if (e.keyCode === $.ui.keyCode.DOWN) { // 40
        if (ri + 1 < rows.length) {
            $(rows[ri+1].cells[ci]).find("input,select").focus();
        }
    }
}); 
```

# ios - 释放使用 imageWithData 创建的 UIImage

> ID：11048394
> 
> 赞同：0
> 
> 时间：2012-06-15T09:51:01.863
> 
> 标签：ios

我有一个将图像存储`NSData`在核心数据中的应用程序。

我在需要时使用`imageView.image = [UIImage imageWithData:<...>]`. 当我离开视图时，为其分配的内存`UIImage`不会被释放。

我正在使用 ARC，并在我的`viewDidUnload:`方法中将图像视图设置为 nil。

我还能做些什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T09:59:35.133

不要期望一离开视图就释放数据。当您使用 ARC 时，这更不是您的责任。所有这些对象可能会进入某个自动释放池，当 iOS 决定或需要时，这些池将被耗尽。

# git - 使用 SubGit 将 Git 存储库转换为 SVN

> ID：11048396
> 
> 赞同：8
> 
> 时间：2012-06-15T09:51:05.093
> 
> 标签：git, svn, subgit

我正在使用[SubGit](http://subgit.com/)来同步 Git 和 SVN 存储库。克隆远程 Git 存储库时，我想保留该存储库的所有历史记录。我目前遵循的步骤仅允许我复制主分支的历史记录：

```
svnadmin create svn_repos
subgit-1.0.0-EAP_1381/bin/subgit configure svn_repos
subgit-1.0.0-EAP_1381/bin/subgit install svn_repos
git clone svn_repos gitRepo

cd gitRepo/
git remote add -f newRemote git://127.0.0.1/gitRepo
...
From git://127.0.0.1/gitRepo
 * [new branch]      FirstProductionTag -> newRemote/FirstProductionTag
 * [new branch]      SecondProductionTag -> newRemote/SecondProductionTag
 * [new branch]      ThirdProductionTag -> newRemote/ThirdProductionTag
 * [new branch]      bugfix     -> newRemote/bugfix
 * [new branch]      bugfix2    -> newRemote/bugfix2
 * [new branch]      master     -> newRemote/master

git merge -s ours --no-commit newRemote/master
git read-tree --prefix=foo/bar/ -u newRemote/master 
git commit -m "Merged new Remote into subdirectory /foo/bar"
git push origin master 
```

如何同时合并来自 bugfix 和 bugfix2 分支的更改？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T14:24:25.180

如果您的目标是从远程 Git 存储库获取 Subversion 存储库并保持两个存储库同步，请考虑执行以下操作：

```
$ svnadmin create svn_repos
$ git clone --mirror git://127.0.0.1/gitRepo svn_repos/.git
$ subgit-1.0.0-EAP_1381/bin/subgit install svn_repos 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-18T02:58:15.733

我登录说 vadishev 的答案有效，并且是将具有完整历史记录的 git repo 导入到 svn 的最简单解决方案。

我还想补充一点，如果您只需要映射主分支（故意省略 git repo 中的其他分支），您应该首先使用单个分支标志克隆 git repo，如下所示：

git clone git_url --branch git_branch --single-branch target_folder

谢谢你瓦迪舍夫。

# hibernate - Hibernate 3.3.1.GA 与 HSQLDB 2.2.8 和 Jboss 5.1.0.GA 拒绝连接

> ID：11048397
> 
> 赞同：1
> 
> 时间：2012-06-15T09:51:06.900
> 
> 标签：hibernate, jakarta-ee, jboss, ejb-3.0, hsqldb

发生了一些奇怪的事情，我制作了一个 EJB3，它应该在数据库中写一些东西，但每次 HSQLDB 都拒绝连接：

```
a pre-9.0 client attempted to connect. we rejected them 
```

但是我使用的是2.2.8，没有错误，因为它是由maven链接的。

这是我的 hibernate.cfg.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-configuration PUBLIC
        "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
        "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
    <session-factory>
        <property name="hibernate.connection.driver_class">org.hsqldb.jdbcDriver</property>
        <property name="hibernate.connection.url">jdbc:hsqldb:hsql://localhost</property>
        <property name="hibernate.connection.username">sa</property>
        <property name="connection.password"></property>
        <!-- JDBC connection pool (use the built-in) -->
        <property name="connection.pool_size">1</property>
        <property name="hibernate.dialect">org.hibernate.dialect.HSQLDialect</property>

        <property name="configurationClass">
            org.hibernate.cfg.AnnotationConfiguration
        </property>
        <property name="hibernate.transaction.manager_lookup_class">
            org.hibernate.transaction.JBossTransactionManagerLookup
        </property>
        <property name="hibernate.transaction.factory_class">
            org.hibernate.transaction.CMTTransactionFactory
        </property>
        <property name="hibernate.jndi.class">
            org.jnp.interfaces.NamingContextFactory
        </property>
        <property name="hibernate.session_factory_name">
            hibernate/HSQLDBSessionFactory
        </property>

        <!-- Disable the second-level cache -->
        <property name="cache.provider_class">org.hibernate.cache.NoCacheProvider</property>
        <!-- Echo all executed SQL to stdout -->
        <property name="show_sql">true</property>
        <!-- Drop and re-create the database schema on startup -->
        <property name="hbm2ddl.auto">create</property>

        <property name="javax.persistence.validation.mode">none</property>
         <!-- Mapping files -->
        <mapping class="com.th.entity.TestEntity"/>
    </session-factory>
</hibernate-configuration> 
```

我在我的 EJB 中做什么：

```
 HibernateUtil3.getSessionFactory().getCurrentSession().persist(entity);
    HibernateUtil3.getSessionFactory().getCurrentSession().close(); 
```

还有我的 HibernateUtil3 ：

```
import org.hibernate.SessionFactory;
import org.hibernate.cfg.AnnotationConfiguration;

/**
 *
 * @author adam
 */
public class HibernateUtil3 {

    private static final SessionFactory sessionFactory = buildSessionFactory();//constroi a sessão

    private static SessionFactory buildSessionFactory() {
        try {
            //Configuration cfg = new Configuration();//para mapeamento xml
            AnnotationConfiguration cfg = new AnnotationConfiguration();//para mapeamento com annotations
            cfg.configure("hibernate.cfg.xml");//arquivo de configuração do hibernate
            return cfg.buildSessionFactory();
        } catch (Throwable e) {
            System.out.println("Criação inicial do objeto SessionFactory falhou. Erro: " + e);
            throw new ExceptionInInitializerError(e);
        }
    }

    public static SessionFactory getSessionFactory() {
        return sessionFactory;
    }
} 
```

任何想法？谢谢=D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T10:42:23.380

您需要将 JBoss 附带的 hsqldb.jar 替换为 HSQLDB 版本 2.2.8 jar。

# java - 将单记录 csv 文件读入类字段的编程习惯

> ID：11048399
> 
> 赞同：0
> 
> 时间：2012-06-15T09:51:10.797
> 
> 标签：java, oop, design-patterns, csv

假设我想阅读以下文件：

```
TestFile;100 
```

进入类的领域：

```
public class MyReader { 
    String field1;
    Integer field2;
} 
```

阅读内容有两种略有不同的方式：

公共类 MyReader {

```
public void loadValues(File file) throws IOException {

    //a generic method that reads the content file to a string throwing an IOException
    String line = readFileToString(file);
    String[] values = line.split(";");

    field1=values[0];
    field2=Integer.parseInt(values[1]);

}

//then i'll have well known getters:

public String getField1() {
  return field1;
} 

public Integer getField2() {
  return field2;
} 
```

现在第二个成语：

```
private String[] values; //made the values a class field

public void loadValues(File file) throws IOException {

    //a generic method that reads the content file to a string throwing an IOException
    String line = readFileToString(file);

    values = line.split(";");

}

public String getField1() {
  return values[0]
} 

public Integer getField2() {
  return Integer.parseInt(values[1]);
} 
```

最大的区别在于异常管理。我故意省略了捕获两种情况下可能发生的两个运行时异常：

*   `ArrayIndexOutOfBoundsException`如果文件包含少于两个字段
*   `NumberFormatException`如果整数解析失败

**第一种方法**
所有字段都在启动时加载。足够其中一个是不可解析的，我得到了`NumberFormatException`. 如果字段少于所需的字段，我将获得越界异常。这听起来不错，特别是如果我想确保我将使用特定的事实背后的所有字段值的正确性：快速失败范例。假设我有一百个字段，该记录包含一个错误，该错误又被记录到一个文件中以进行故障排除。照原样，这段代码给出了这样的东西：

```
Exception in thread "main" java.lang.NumberFormatException: For input string: ""
at java.lang.NumberFormatException.forInputString(NumberFormatException.java:48) 
```

即：我得到错误，导致错误的值，给出错误的行号，但不是字段名称。对开发人员有好处，对通常无法访问源代码的系统工程师来说不是很好。

**第二种方法***只有在通过 getters 访问*
字段时，才会从数据字符串中“提取”和解析这些字段。在完全相同的情况下，每个 getter 都可能返回上述两个错误。相对于“快速失败范式”，存在一定程度的“容错”。如果记录的第 100 个字段包含不正确的值，但类的客户端没有调用它的 getter，则永远不会抛出异常。另一方面，当调用错误值的 getter 时，记录的异常将包含导致问题的字段的信息（在堆栈跟踪中）：

 *```
at java.lang.NumberFormatException.forInputString(NumberFormatException.java:48)
at java.lang.Integer.parseInt(Integer.java:449)
at java.lang.Integer.parseInt(Integer.java:499)

at com.test.MyReader.getField2(MyReader.java:39)

at com.test.MyReader.test(MyReader.java:33)
at com.test.MyReader.main(MyReader.java:16) 
```

**问题）**

两种方法都有利有弊，可以说采用哪种方法的决定取决于上下文。问题是：

*   getter 和 setter 是 javabean 的主题。他们返回异常是否“可以接受”？
*   这两种方法中的类可能显然具有相同的接口，但由于它们具有完全不同的异常架构，因此客户端应该以完全不同的方式使用它们。那么如何向客户展示这个事实呢？也许 getters 语义具有误导性，也许有更雄辩的方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T10:00:10.210

首先，第二种方法不起作用，因为您将 values[] 数组存储为局部变量，并且其他函数（在您的情况下为 getter）无法访问它。

其次，当您公开的 api 时，不要在 getter 中抛出异常，这会产生误导，并且不符合任何约定。

第三，与其自己解析字符串，不如考虑使用现成的库进行 csv 解析，不要重新发明轮子，例如。[http://opencsv.sourceforge.net/](http://opencsv.sourceforge.net/)

第四，为csv记录创建一个简单的POJO对象，您可以在为每个字段分配值时检查错误，然后抛出异常，提供默认值等。

希望有帮助*

# linux - 为什么我必须使用 libtool --mode==execute gdb wireshark 才能调试wireshark

> ID：11048400
> 
> 赞同：5
> 
> 时间：2012-06-15T09:51:13.460
> 
> 标签：linux, gdb, wireshark, libtool

我试图查看 Wireshark 的源代码以了解协议分析，但我发现当我只是使用`gdb ./wireshark`时，当我按`Ctrl`+`C`并设置断点，然后键入`C`时，进程就死了。我想知道 libtool 做了什么来使 GDB 调试成为可能。

我已经读过它说 libtool 是一种工具，可以通过简单的界面`man libtool`轻松使用各种工具，但我不知道使用 libtool 的关键是什么。`.a``.o``gdb wireshark`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T10:02:37.143

当您使用 libtool 构建程序时，它将处理在您的平台中使用共享库的所有困难和特殊性。

困难之一是调试，因为在调试时您想加载系统中**未**安装的共享库（它们只是编译）。因此，当 libtool 构建可执行文件时，它会将其移动到隐藏目录 ( `.libs`) 中，并且通常会在您可以看到的地方放置一个同名的脚本或类似文件。该脚本将尽一切努力使用正确的库运行正确的程序。

但是，显然您不能使用`gdb`! 因此，为了传递正确的参数以`gdb`使其能够使用正确的库调试正确的程序，您必须运行以下命令：

```
$ libtool --mode=execute gdb ./wireshark 
```

您可以通过运行查看它的作用：

```
$ libtool --mode=execute echo ./wireshark 
```

只是不要`.libs`直接使用文件：使用 always`libtool`或包装脚本。

# android - Android日期格式化字符串

> ID：11048401
> 
> 赞同：0
> 
> 时间：2012-06-15T09:51:15.867
> 
> 标签：android, date, formatting

有谁知道如何格式化包含日期的字符串？

我有一个字符串，其中包含从 Json 提要传递的日期和时间。

看起来像这样

```
2012-06-11 14:00 
```

这个问题是我如何格式化它的错误方式，所以它变成了两个字符串，所以我可以在中间添加位。有谁知道我该怎么做？

```
"at " + time + " " + "on " + "11-06-2012"

at 14:00 on 11-06-2012 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T09:56:14.683

试试这个。。

```
SimpleDateFormat form = new SimpleDateFormat("yyyy-MM-dd hh:mm");
java.util.Date date = null;
try 
{
     date = form.parse(string);
}
     catch (ParseException e) 
{
}
SimpleDateFormat postFormater = new SimpleDateFormat("dd-MM-yyyy");
String newDateStr = "at"+date.getHours()+":"+date.getMinutes()+"on"+postFormater.format(date); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T10:01:59.000

```
 try {
            SimpleDateFormat simpleDateFormat1 = new SimpleDateFormat("yyyy-MM-dd HH:mm");
            SimpleDateFormat simpleDateFormat2 = new SimpleDateFormat("'at' HH:mm 'on' dd-MM-yyyy");
            simpleDateFormat2.format(simpleDateFormat1.parse("2012-06-11 14:00"));
        } catch (ParseException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

# php - javascript将对象字符串转换为字符串

> ID：11048403
> 
> 赞同：3
> 
> 时间：2012-06-15T09:51:26.243
> 
> 标签：php, javascript, jquery, jsobject

我无法将 JS 对象转换为精确的字符串，我的代码：

```
jsonObj['payment_value']=100.10;
jsonObj['payment_date']="2012-06-15";
jsonObjStr = JSON.stringify(jsonObj);
alert(jsonObjStr);
$.post("test", jsonObjStr.toString(), function(output){
    alert(output);
}); 
```

第一个警报显示：

> {"payment_date":"2012-06-15","payment_value":100.1}

并且在功能测试中（我正在使用codeigniter框架）它应该打印“payment_date”和“payment_value”，代码如下：

```
echo $this->input->post("payment_value");
echo $this->input->post("payment_date"); 
```

这在“清除” php 中等同于：

```
echo $_POST["payment_value"];
echo $_POST["payment_date"]; 
```

但第二个警报显示清晰的字符串。

如果我把

> {"payment_date":"2012-06-15","payment_value":100.1}

而不是 jsonObjStr.toString() 它工作正常

有谁知道如何在不使用 json_decode 的情况下修复它？我需要以这种格式发布值，而不是在其他数组中

所以我需要将 jsonObjStr 精确转换为字符串（与函数 eval() 相反）

多谢指教

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T09:57:42.217

根据[$.post](http://api.jquery.com/jQuery.post/)文档，第二个参数应该是映射或查询字符串：

*地图*示例：

```
{
   "payment_date":"2012-06-15",
   "payment_value":100.1
} 
```

*查询字符串*示例：

```
'payment_date=2012-06-15&payment_value=100.1​​​' 
```

当你使用 时`JSON.stringify`，你会得到：

```
'{"payment_date":"2012-06-15","payment_value":100.1}' 
```

这是无效的`query string`。所以解决方案是：**不要对任何东西进行字符串化，将对象本身**作为第二个参数传递：

```
jsonObj['payment_value']=100.10;
jsonObj['payment_date']="2012-06-15";
$.post("test", jsonObj, function(output){
   alert(output);
}); 
```

# android - 获取天气预报的 RSS 源

> ID：11048405
> 
> 赞同：1
> 
> 时间：2012-06-15T09:51:32.650
> 
> 标签：android

我正在尝试获取用户位置的 3 天天气预报详细信息。我找不到任何提供带有天气代码的天气预报详细信息的内容提供商。所以，任何人都请建议我可以使用哪个 api 来获取这些信息。我也准备好支付饲料费用。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T10:09:24.943

谷歌天气提要（它没有做广告），但你可以使用它。

[http://www.google.com/ig/api?weather=london](http://www.google.com/ig/api?weather=london)

你需要为它搜索参数——但据我所知，你可以在城市、国家等地传递。

# facebook-graph-api - 在页面时间线上发送帖子

> ID：11048406
> 
> 赞同：0
> 
> 时间：2012-06-15T09:51:41.590
> 
> 标签：facebook-graph-api, graph, facebook-fql, tagging

我想从我的页面时间轴中获取所有输入。所以我用页面令牌阅读了graph.facebook.com/pageid/feed。但有些帖子不见了——即使我尝试使用 FQL

例如，这些是

*   用户在他自己的墙上发帖并在他的状态或图片中标记了我的页面
*   一个用户在他自己的墙上发帖并提到我的页面作为这个帖子的位置
*   建议

在 /tagged/ 这些帖子也不会出现。有机会得到它们吗？

谢谢我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T12:59:30.620

不会。Facebook 在其 web 应用程序中显示的内容比通过 API 提供的内容要多。返回的内容取决于发布者的隐私设置。

根据我的经验，如果帖子未标记为“公开”，则 API 不会返回它，即使您可以从 Facebook 中看到它。

# c++ - 使用 WaitForMultipleObjects 时如何获取哪个对象超时？

> ID：11048420
> 
> 赞同：1
> 
> 时间：2012-06-15T09:52:32.730
> 
> 标签：c++, c, winapi, window

如果我使用的是 WaitForMultipleObjects，并且该函数返回 WAIT_TIMEOUT，我如何获取哪些对象或哪些对象导致超时发生？

我的另一个问题是，如果多个对象发出信号，因为返回值只返回它检测为发出信号的第一个对象，我如何获得其他发出信号的对象？

```
#include <windows.h>
#include <stdio.h>

HANDLE ghEvents[2];

DWORD WINAPI ThreadProc( LPVOID );

int main( void )
{
    HANDLE hThread; 
    DWORD i, dwEvent, dwThreadID; 

    // Create two event objects

    for (i = 0; i < 2; i++) 
    { 
        ghEvents[i] = CreateEvent( 
            NULL,   // default security attributes
            FALSE,  // auto-reset event object
            FALSE,  // initial state is nonsignaled
            NULL);  // unnamed object

        if (ghEvents[i] == NULL) 
        { 
            printf("CreateEvent error: %d\n", GetLastError() ); 
            ExitProcess(0); 
        } 
    } 

    // Create a thread

    hThread = CreateThread( 
                 NULL,         // default security attributes
                 0,            // default stack size
                 (LPTHREAD_START_ROUTINE) ThreadProc, 
                 NULL,         // no thread function arguments
                 0,            // default creation flags
                 &dwThreadID); // receive thread identifier

    if( hThread == NULL )
    {
        printf("CreateThread error: %d\n", GetLastError());
        return 1;
    }

    // Wait for the thread to signal one of the event objects

    dwEvent = WaitForMultipleObjects( 
        2,           // number of objects in array
        ghEvents,     // array of objects
        FALSE,       // wait for any object
        5000);       // five-second wait

    // The return value indicates which event is signaled

    switch (dwEvent) 
    { 
        // ghEvents[0] was signaled
        case WAIT_OBJECT_0 + 0: 
            // TODO: Perform tasks required by this event
            printf("First event was signaled.\n");
            break; 

        // ghEvents[1] was signaled
        case WAIT_OBJECT_0 + 1: 
            // TODO: Perform tasks required by this event
            printf("Second event was signaled.\n");
            break; 

        case WAIT_TIMEOUT:
            // How can I get which object timed out?
            printf("Wait timed out.\n");
            break;

        // Return value is invalid.
        default: 
            printf("Wait error: %d\n", GetLastError()); 
            ExitProcess(0); 
    }

    // Close event handles

    for (i = 0; i < 2; i++) 
        CloseHandle(ghEvents[i]); 

    return 0;   
}

DWORD WINAPI ThreadProc( LPVOID lpParam )
{

    // lpParam not used in this example
    UNREFERENCED_PARAMETER( lpParam);

    // Set one event to the signaled state

    if ( !SetEvent(ghEvents[0]) ) 
    {
        printf("SetEvent failed (%d)\n", GetLastError());
        return 1;
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-15T10:02:23.307

当`WaitForMultipleObjects(...)`返回`WAIT_TIMEOUT`代码返回时，它表明您等待的任何对象都没有在给定的时间内发出信号。

该函数本质上会在您指定为超时的时间内***休眠，并且仅在可等待对象之一在该时间之前发出信号时才更早返回。***这意味着`WAIT_TIMEOUT`返回码与您等待的任何对象都没有关联。

Eregiths 的评论部分回答了您的第二个问题。要检查是否也向其他对象发出信号，您可以`WaitForMultipleObjects(...)`再次调用，并根据您的需要，将超时值设置为`0`（不要等待）。当与您`WaitForMultipleObjects(...)`一起返回时，`WAIT_TIMEOUT`您知道在您调用时没有其他对象处于信号状态，但您应该记住，导致您第一次调用返回的对象可能会再次发出信号。因此，您可以将其从数组中排除，也可以简单地使用该函数检查单个对象的状态`WaitForSingleObject(...)`。

如果您想确保所有对象都发出信号，您也可以使用该`bWaitAll`参数。`WaitForMultipleObjects(...)`只有当你的所有对象都处于信号状态时才会返回。,

希望有点帮助。

# android - 期望嵌套 XML 结构但接收 SOAP 结构

> ID：11048426
> 
> 赞同：0
> 
> 时间：2012-06-15T09:52:54.030
> 
> 标签：android, xml, soap, xml-serialization, ksoap2

我正在制作一个从 Web 服务（实现 Soap）请求数据的应用程序。

**正在查看此内容的人请在评论中发表疑问...我没有得到任何答复，请询问我是否有任何疑问，我真的需要帮助，我被困住了！**

所以要发出请求，我必须使用 ksoap 库。Web 服务被**编码为返回 XML 类型的响应**。在浏览器上测试 Web 服务本身时，它会显示如下结果：

```
?xml version="1.0" encoding="utf-8" ?> 
- <SOBKeyList>
- <Key>
  <value>12686</value> 
  </Key>
- <Key>
  <value>16238</value> 
  </Key>
- <Key>
  <value>26978</value> 
  </Key>
  </SOBKeyList> 
```

显然是一个**XML**文件...

`However`当我使用这些代码得到结果时：

```
 public String getXmlFromUrl(String url) {
    // TODO Auto-generated method stub
    String xml = null;
    SoapObject request = new SoapObject(WSDL_TARGET_NAMESPACE,OPERATION_NAME);
    PropertyInfo pi = new PropertyInfo();

    pi.setName("fkey");
    pi.setValue(0);
    pi.setType(Integer.class);
    request.addProperty(pi);

    pi = new PropertyInfo();

    pi.setName("tkey");
    pi.setValue(999999);
    pi.setType(Integer.class);
    request.addProperty(pi);

    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
            SoapEnvelope.VER11);
    envelope.dotNet = true;
    envelope.setOutputSoapObject(request);
    HttpTransportSE httpTransport = new HttpTransportSE(url);
    Object response = null; 

    try {
        httpTransport.call(SOAP_ACTION, envelope);
        response = envelope.getResponse();
        xml = response.toString();
        Log.d("xml:", xml);
    } catch (SoapFault e) {
        // TODO Auto-generated catch block
        Log.d("Soap Fault", e.toString());
    } catch (IOException e) {
        // TODO Auto-generated catch block
        Log.d("IOexception", e.toString());
    } catch (XmlPullParserException e) {
        // TODO Auto-generated catch block
        Log.d("XmlPullParserException", e.toString());
    }

    return xml;
} 
```

它返回一个**嵌套的 SOAP 结构，由我制作的 Log 条目** *确认*（`Log.d("xml:", xml);`）相应的 LogCat 条目是：（我已对其进行格式化以使其成为 SOAP 结构的层次结构……）

```
anyType{
      SOBKeyList=anyType{
                          Key=anyType{value=12686 ; };
                          Key=anyType{value=16238 ; };
                          Key=anyType{value=26978 ; };
                         };
          } 
```

我必须需要 XML 的原因是因为稍后我解析字符串以获取**DOM**元素，并且当传递上述字符串时，它返回以下内容：

org.xml.sax.SAXParseException：意外令牌（位置：TEXT anyType{SOBKeyLi...@1:119 in java.io.StringReader@40ec9c68）

从那里开始，我的整个代码也取决于响应是**XML**的事实。

**解释为什么我期望 XML 的原因**：现在你可能会问为什么我在没有测试 Web 服务的情况下编写期望 XML 的应用程序，原因是：Web 服务是由向我保证 XML 响应的第三方编码的，现在我没有足够的时间来更改我剩余的代码来利用 SOAP 结构！-_- 我正在修复中。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T11:06:01.757

试试这个：

```
String responseXML = httpTransport.responseDump; 
```

*   `HttpTransportSE.responseDump`以 XML 格式为您提供响应。
*   `HttpTransportSE.requestDump`以 XML 格式为您提供请求。

但是，为了能够更改和检索这些值中的任何一个，您必须将`debug`字段设置为`HttpTransportSE`，`true` 以便您的代码看起来像...

```
 HttpTransportSE httpTransport = new HttpTransportSE(url);
    httpTransport.debug =true;      
    try {
        httpTransport.call(SOAP_ACTION, envelope);          
        xml = httpTransport.responseDump;
        Log.d("xml:", "is:" + xml);     
    } 
```

您也可以解析您的响应，如下所示：

```
ArrayList<String> listValues = new ArrayList<String>();

            httpTransport.call(SOAP_ACTION, envelope);
            SoapObject response = (SoapObject) envelope.getResponse();

            SoapObject soapSOBKeyList = (SoapObject) response.getProperty("SOBKeyList");

            int keyCount = soapSOBKeyList.getPropertyCount();

            for (int i = 0; i < keyCount; i++) {
                String value = soapSOBKeyList.getPropertyAsString(i);
                listValues.add(value);
            }

            return listValues; 
```

# scala - Scala classOf 用于类型参数，重新访问

> ID：11048435
> 
> 赞同：1
> 
> 时间：2012-06-15T09:53:26.033
> 
> 标签：scala, types, manifest, type-erasure

继从：

[Scala classOf 用于类型参数](https://stackoverflow.com/questions/6200253/scala-classof-for-type-parameter)

我已经尝试过实现它，但似乎遇到了一些奇怪的泛型问题，实际上我现在已经搞砸了其中的几个，但这已经接近正确了，我可以得到它......

我正在使用 Scala - Jackson JSON 绑定（顺便说一句，优秀的库，比 SJson 容易得多）

```
def genparseResult[T: ClassManifest](t: T,s:String):Either[Tuple2[JsonParseException,String],T] = {
  try{
    val res = jsonSerializer.readValue(s,  classManifest[T].erasure)
    Right(res)
  }
  catch{
    case jpe:JsonParseException => Left((jpe,s))
  }
} 
```

无论如何，上面的代码正在生成以下编译错误：

> 类型不匹配; 发现：res.type（具有基础类型Any）需要：T

我一头雾水。上面的代码应该能够工作吗？

**更新** *以下来自 Tenshi 的输入，我发布完成的课程*

```
import com.fasterxml.jackson.core.JsonParseException
object DatasiftJsonMapper {
  import java.util.Date
  import com.fasterxml.jackson.databind.{ Module, ObjectMapper }
  import com.fasterxml.jackson.module.scala.DefaultScalaModule

  val jsonSerializer = {
    val m = new ObjectMapper()
    m.registerModule(DefaultScalaModule)
    m
  }

  def parseDSResult(s: String): Either[Tuple2[JsonParseException, String], DatasiftResult] = {
    genparseResult(classOf[DatasiftResult], s)
  }

  def parseQRegRequest(s: String): Either[Tuple2[JsonParseException, String], QRegRequest] = {
    genparseResult(classOf[QRegRequest], s)
  }

  def genparseResult[T: ClassManifest](t: Class[T], s: String): Either[Tuple2[JsonParseException, String], T] = {
    try {
      val res = jsonSerializer.readValue(s, classManifest[T].erasure).asInstanceOf[T]
      Right(res)
    } catch {
      case jpe: JsonParseException => Left((jpe, s))
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T10:29:25.207

据我记得，`classManifest[T].erasure`返回`Class[_]`而不是`Class[T]`，所以结果`jsonSerializer.readValue(...)`将是 或 type `Any`。您可以尝试转换解析结果：

```
val res = jsonSerializer.readValue(s,  classManifest[T].erasure).asInstanceOf[T] 
```

# c++ - 在索引处分配 boost::mpl vector_c 元素的惯用方式

> ID：11048444
> 
> 赞同：4
> 
> 时间：2012-06-15T09:54:03.977
> 
> 标签：c++, metaprogramming, boost-mpl

我有

```
mpl::vector_c<int, 0, 1, 2, 3, 4, 5> 
```

我想“分配”位置 3 的元素，比如我想将其设置为 30。因此，我必须编写一个元函数，获取和索引、向量和新值并返回修改后的序列。我最终得到了以下解决方案

```
template <int k, class sequence, class value>
class assign_element
{
            typedef typename mpl::begin<sequence>::type begin;
            typedef typename mpl::advance<begin, mpl::int_<k> >::type pos;
            typedef typename mpl::erase <sequence, pos>::type sequence2;

            typedef typename mpl::begin<sequence2>::type begin2;
            typedef typename mpl::advance<begin2, mpl::int_<k> >::type pos2;
public:
            typedef typename mpl::insert <sequence2, pos2, value>::type type;
}; 
```

然后我按如下方式使用它

```
typedef mpl::vector_c<int, 0, 1, 2, 3, 4, 5> sequence;
typedef typename assign_element<3, sequence, mpl::int_<30> >::type result; 
```

该解决方案有效，但正如您所见，它非常复杂（涉及迭代器、高级......）。这个用例是否存在更简单且可能有效的解决方案？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T14:33:42.583

我从未使用过 MPL，但它看起来很有趣，我看了一下文档。这是我的3个答案，希望对您有所帮助：

1) 错误的答案 - 但也许是寻找正确答案的良好开端。您是否考虑使用replace_if？

```
typedef vector_c<int, 0, 1, 2, 3, 4, 5> sequence;
typedef replace_if< numbers, equal_to<_,int_<3> >, int_<30> >::type result; 
```

您需要一个 at_pos<3> 谓词。我没有找到这样的，

2）你的回答是正确的。你封装了它 - 所以用法是一行。在谈论易用性时，用法很重要 - 而不是实现，考虑采取一些努力从用法行中删除这个烦人的类型名。也许你的 assign_element<> 应该从 mpl::insert<> 派生？或者考虑在 C++11 中使用“使用”的方式来删除 typedef ...

3）我会推荐最后一个答案：Ask MPL Author(s) to add something called replace_at...

HTH，彼得·尼茨

# z3 - Z3 中的建模数组赋值

> ID：11048445
> 
> 赞同：1
> 
> 时间：2012-06-15T09:54:05.790
> 
> 标签：z3

我正在做一个程序验证项目。我有以下语句要在 Z3 中建模：

```
temp = a[i];
a[i] = a[j];
a[j] = temp; 
```

所有变量都是整数类型。有人会给我一些关于如何建立约束来模拟上述语句的提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T23:47:49.987

这是一个通用的“食谱”。

我们使用 表示数组更新`(store a i v)`。结果是一个等于 的新数组`a`，但在位置`i`包含值`v`。数组访问`a[i]`应编码为`(select a i)`. 诸如此类的赋值`i = i + 1`通常是通过创建代表`i`赋值前后的值的 Z3 变量来编码的。也就是说，我们会将其编码为`(= i1 (+ i0 1))`. 请记住，公式`(= i (+ i 1))`等价于`false`。

这是上面以 SMT 2.0 格式编码的示例。

[http://www.rise4fun.com/Z3/G5Zk](http://www.rise4fun.com/Z3/G5Zk)

这是在上面的链接中找到的脚本。

```
(declare-const a0 (Array Int Int))
(declare-const a1 (Array Int Int))
(declare-const a2 (Array Int Int))
(declare-const temp0 Int)
(declare-const temp1 Int)
(declare-const i0 Int)
(declare-const j0 Int)

(assert (= temp0 (select a0 i0)))
(assert (= a1 (store a0 i0 (select a0 j0))))
(assert (= a2 (store a1 j0 temp0)))

(check-sat)
(get-model) 
```

# java - Android 非阻塞文件 i/o？

> ID：11048450
> 
> 赞同：2
> 
> 时间：2012-06-15T09:54:30.453
> 
> 标签：java, android, asynchronous, io, nonblocking

我目前正在为 Java 编写一个异步 i/o 库，它具有与 Node.js 非常相似的 API。我可以用 nio 做套接字部分，但似乎没有扩展 SelectableChannel 的 FileChannel，所以我也不能用 nio 做文件 i/o。

在 Java 7 中，他们添加了 AnsynchronousFileChannel，它允许非阻塞文件 i/o。不幸的是，Android 不支持它。Android上是否有等效的类来执行非阻塞文件io？

您可以在此处找到该库：[https ://github.com/VanCoding/Node.java](https://github.com/VanCoding/Node.java)

示例应用程序位于此处：[https ://github.com/VanCoding/Node.java/blob/master/src/node/examples/App.java](https://github.com/VanCoding/Node.java/blob/master/src/node/examples/App.java)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T11:13:58.057

> Android上是否有等效的类来执行非阻塞文件io？

除了将传统 I/O 包装在后台线程中之外，不，抱歉。

# gwt - 将 gwt 2.4 应用程序移至 gwtp - 好主意吗？

> ID：11048451
> 
> 赞同：2
> 
> 时间：2012-06-15T09:54:35.277
> 
> 标签：gwt, gwtp

我正在开发一个中型 gwt 应用程序，它使用 MVP 和活动/地点、杜松子酒/guice。在上个月，我对许多样板类/许多样板代码越来越反感 - 编写一个简单（反）序列化一些参数的地方是一种痛苦。设置活动映射器和管理器也只是正确复制和粘贴的问题。

现在我再次偶然发现了 gwtp 并阅读了一些 wiki 页面。我认为有了它我可以在客户端删除许多类。

但是在这种状态下将项目迁移到 gwtp 是个好主意吗？有人有过这种迁移的经验吗？活动/场所/样板可以与 gwtp 共存吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T18:35:49.497

根据您的应用程序的大小，它可能需要大量工作。如果您不习惯 GWTP，我不建议您自己这样做，直到您习惯这样做。

我个人在几个项目上做过，小型、中型到大型都可以，但它需要你完全理解工作流程。

它还可以与一些现有代码一起使用，我们在一个包含大量遗留代码的大型项目中做到了这一点。

但是恐怕如果您还不是 GWTP 的经验丰富的用户，那么您自己将很难做出改变。

# facebook - Facebook Open Graph，我可以上传用户生成的照片（而不是发送 URL）吗？

> ID：11048456
> 
> 赞同：0
> 
> 时间：2012-06-15T09:54:57.957
> 
> 标签：facebook, facebook-graph-api, facebook-opengraph

我在[这里](https://developers.facebook.com/docs/opengraph/usergeneratedphotos/)阅读了文档。

我有一个动作“cook”，它应用于对象“recipe”。我想让用户在执行操作时发布他们烹饪的照片。

我想将照片托管在 Facebook 上。有没有办法将实际图像数据作为请求的一部分发布，而不是将 URL 发布到用户生成的照片？

文档说

> 所使用的照片不会取自对象的元数据 og:image 标签。相反，它与 POST 一起传递

和

> 照片将被上传并放置在 Facebook 相册中，该相册以该应用的“应用显示名称”为标题

但他们也提到该`image[0][url]`属性是必需的。

上下文是一个 iOS 应用程序：用户在设备上拍照并希望将其发布到 Facebook。要获得图像的 URL，我显然必须将上传到某处的某个网络托管作为单独的步骤，这将更难编码并且需要一些托管。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T11:08:58.697

> 但他们也提到 image[0][url] 属性是必需的。

您必须先将照片上传到可以通过 HTTP 通过网络访问的某个地方，然后在发布您的操作时提供该 URL。

# wpf - 如何隐藏网格边框

> ID：11048461
> 
> 赞同：4
> 
> 时间：2012-06-15T09:55:28.573
> 
> 标签：wpf, grid, border, visibility

我有一个网格，里面有一些控件。我想隐藏网格边框。

是否有任何特定属性可用于隐藏 WPF 中的网格边框？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T10:01:02.107

设置`DataGrid.BorderThickness`为`0`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-09-07T11:28:17.340

我知道添加到线程中有点晚了，但如果其他人偶然发现这个问题，这对我有用：

```
<Grid ShowGridLines="False"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-30T09:36:26.213

我也有类似的问题，即在用户控件的一部分（网格）周围出现虚线边框，只有当焦点设置为网格并使用解决问题时；

```
void Grid_GotFocus (object sender, RoutedEventArgs e) {
    Grid.FocusVisualStyle = null;
} 
```

希望它可以帮助某人:)

# c - c中for循环的一个案例

> ID：11048465
> 
> 赞同：3
> 
> 时间：2012-06-15T09:55:39.067
> 
> 标签：c, for-loop

我遇到了以下问题：

以下 for 循环将运行多少次 -

```
for(;0;)
 printf("hello"); 
```

我执行并运行了 1 次。我无法理解如何？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T10:00:18.393

这甚至不会执行 1 次。我猜你的编译器不好？

行。我认为您正在使用 Turbo C ;-)

**编辑：**

来自 C99 标准：

> 6.8.5.3 for 语句 1 语句

`for ( clause-1 ; expression-2 ; expression-3 )`

> 语句的行为如下： 表达式 expression-2 是在每次执行循环体之前计算的控制表达式。每次执行循环体后，表达式 expression-3 被评估为 void 表达式。如果clause-1 是一个声明，它声明的任何变量的范围是声明的其余部分和整个循环，包括其他两个表达式；它在控制表达式的第一次评估之前按照执行顺序到达。如果 Clause-1 是一个表达式，它在控制表达式的第一次评估之前被评估为一个 void 表达式。134)

它清楚地表明在执行循环之前首先评估条件。任何符合标准的编译器都不应该执行循环`for(;0;) {}`一次。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-15T10:00:31.867

您在此处复制的代码不是真正的 .c 文件中的代码，或者您的编译器有问题。

也许你有一个额外的分号？：`for(;0;); printf("!");` 将打印一次。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T10:16:15.047

for 循环定义为：

```
for(startExpression; testExpression; countExpression)
{
    block of code;
} 
```

*   startExpression 在代码之前被评估；
*   testExpression 在代码之前被评估；
*   countExpression 在代码之后计算；

解码：

```
for(;0;) 
```

方法

*   没有开始表达
*   testExpression 评估为假，因此循环退出。

**编辑**以显示正确的循环解码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T10:03:53.697

上面写的代码永远不会进入for循环。

检查 ideone[链接](http://ideone.com/KDvRN)上的代码。

我不是你在你的源代码中拥有的，你可能`;`在`for`没有注意到它的情况下输入了一个：

```
for(;0;);
printf("hello"); 
```

在这种情况下，您的程序将打印“hello”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T10:09:25.147

由于表达式为 0，因此它被认为是假的。因此，在这种情况下，循环运行 0 次。

# c# - 寻找 Excel 电子表格的替代品作为数据收集手段

> ID：11048470
> 
> 赞同：-1
> 
> 时间：2012-06-15T09:55:43.590
> 
> 标签：c#, excel, openxml

有人希望我实现服务器端数据提取服务，以从 Micorsoft Excel 2010 电子表格 (xlsx) 中提取数据。电子表格必须在正确的位置包含数据才能进行提取。使用电子表格作为数据收集是否有更好的选择？我担心用户可能会生成一个电子表格，即使显示的电子表格对人类来说是可以理解的，也会导致解析/提取方法失败。例如，用户需要输入许多项目，并且每个项目后面都会有几个详细信息行。我的程序需要识别每个项目之间的边界，然后收集它后面的细节行。如果提取失败，用户将需要线索来帮助他们解决问题，然后再次重新提交 xlsx 文件。

有没有更好的办法 ？有没有像 Excel 电子表格一样便携但具有可以轻松提取的结构化数据的东西？
或者也许可以使用 Excel 电子表格将数据准备为结构化数据（例如 JSON 表示），然后将其存储为开放 xml 包的一部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T10:05:00.200

我会使用 Access DB，它非常便携，但允许您对结构进行密码保护或只允许通过表单插入。

此外，可以通过 Jet 引擎轻松读取访问数据库，因此在 C# 中自动提取数据非常简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T11:53:59.743

您可以通过使用命名范围并将在数据输入上运行的验证代码添加到电子表格来改进使用 Excel 的数据收集。验证代码还可以将元数据标签添加到工作簿。然后您的提取程序可以使用命名范围（和元数据）来查找数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T20:19:57.823

如果我理解你的问题是正确的 - 你想在 OpenXml Excel 文件中存储一些描述你的数据的自定义 XML。我认为您可以为此使用[自定义 XML 部件](http://msdn.microsoft.com/en-us/library/bb608618.aspx)。

# html - 如何调整 CSS 以使页脚固定高度？

> ID：11048471
> 
> 赞同：-3
> 
> 时间：2012-06-15T09:55:44.793
> 
> 标签：html, css

我试过让每个 div 75px 和 div 内的表格，但只让白色背景变成 75px 没有别的！而我希望页脚中的表格中的文本和图像以及页脚本身（作为一个整体）为 75px 高。

HTML：

```
<footer id="colophon" role="contentinfo">           
<div id="supplementary" class="one">
<div id="first" class="widget-area" role="complementary">
<aside id="text-2" class="widget widget_text">
<div class="textwidget"><div id="footerwidget">
<table cellspacing="0px">
<tr>
<td>
<img src="http://www.poltairhomes.com/images/footerlogo.png" />
</td>
<td id="footertext"><p>Poltair Homes Plc<br />Registered Office: The Old Chapel, Greenbottom, Truro, Cornwall, TR4 8QP.<br />Registered in England & Wales: 3955425<br />www.poltairhomes.com<br />info@poltairhomes.com</p>
</td>
<td id="footertext"><p>Terms and Conditions | Privacy Policy | Sitemap</p>
</td>
<td id="footertext"><p>SIGN UP FOR OUR NEWSLETTER:</p><img src="http://www.poltairhomes.com/images/signup(temp).png" />
</td>
</tr>
</table>
</div></div>
</aside></div><!-- #first .widget-area -->
</div><!-- #supplementary -->
</footer><!-- #colophon --> 
```

相关CSS：

```
#footerwidget{
background-colour: #FFF;
margin:0;
padding:0;
}
#footertext {
margin: 0;
padding:0 5px 0 5px;
color: #AAA;
font-size: 10px;
font-family:Arial, Helvetica, sans-serif;
text-align:center;
border-left: 1px solid #CCC;
}
#colophon {
clear: both;
background-colour: #FFF;
}
#supplementary {
border-top: 1px solid #ddd;
padding: 0;
}
.widget-area {
font-size: 12px;
background-colour: #FFF;
}
.widget {
background-colour: #FFF;
clear: both;
margin: 0;
padding: 0;
} 
```

非常感谢任何帮助！

网站：[http ://www.poltairhomes.com/](http://www.poltairhomes.com/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T10:20:09.787

首先用类替换id

```
<td class="footertext"> 
```

第二个添加垂直对齐到你的CSS

```
.footertext {
vertical-align: top; 
```

# c++ - 插槽在 QT 应用程序中没有接收到信号

> ID：11048477
> 
> 赞同：1
> 
> 时间：2012-06-15T09:56:14.147
> 
> 标签：c++, multithreading, qt, signals-slots

我有一个奇怪的情况，我有一个工作线程在做这件事，然后发出一个信号来回调 GUI 线程以关闭一个对话框。有人可以解释为什么这样做：

工作线程：

```
[Header]
signals:
    void writeComplete(void);

[Source]
void startWorkerThread()
{
    // do some stuff in boost::thread
    emit writeComplete();
} 
```

MainWindow 子类：

```
burnDialog = new QProgressDialog("Writing to disc", "", 0, 0);
burnDialog ->setCancelButton(0);
QWidget::connect( discHandler.get(), SIGNAL(writeComplete()), burnDialog, SLOT(close()) );
QWidget::connect( discHandler.get(), SIGNAL(writeComplete()), this, SLOT(close()) );
burnDialog->open();
discHandler->startWorkerThread(); 
```

但这不是：

MainWindow 子类：[Header] 公共插槽：void closeWithDialog(void);

```
[Source]
burnDialog = new QProgressDialog("Writing to disc", "", 0, 0);
QWidget::connect( discHandler.get(), SIGNAL(writeComplete()), this, SLOT(closeWithDialog()) );
burnDialog ->setCancelButton(0);
burnDialog->open();
discHandler->startWorkerThread();

void closeWithDialog()
{
    burnDialog->close();
    close();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T11:53:40.850

感觉像...我没有放入`Q_OBJECT`头文件。我假设子类继承`QMainWindow`了`Q_OBJECT`接口也将被隐式继承的事实。但它不是......无论如何，谢谢你们的帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T10:10:48.187

这是**不起作用**的情况下的故障线路：

```
QWidget::connect( discHandler.get(), SIGNAL(writeComplete()), burnDialog,
                  SLOT(closeWithDialog()) ); 
```

您正在`SLOT`为`burnDialog`实例分配一个，这意味着`closeWithDialog()`方法必须属于`QProgressDialog`类。`QProgressDialog`没有这样的方法。您应该检查控制台是否有以下消息：

```
Object::connect: No such slot QProgressDialog::closeWithDialog() 
```

把上面的故障线改成如下：

```
QWidget::connect( discHandler.get(), SIGNAL(writeComplete()), this,
                  SLOT(closeWithDialog()) ); 
```

# java - 在没有 Axis2 Web 应用程序的情况下部署 Axis2 .aar

> ID：11048487
> 
> 赞同：1
> 
> 时间：2012-06-15T09:56:55.957
> 
> 标签：java, axis2

我想知道是否有一种方法可以部署 Axis2 .aar 文件，而不必将其作为 Axis 2 Web 应用程序的一部分。我知道我的问题很简短，但我无法提供太多信息来指导我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T06:01:13.227

我相信您想在现有应用程序中部署axis2 Web服务，如果是这样，请看[这个](https://stackoverflow.com/q/2428837/186896)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T13:03:55.890

就在这里。

axis2 Web 存档 (axis2.war) 可以提取一次，之后再也不需要再次提取。

axis2 webapp 目录中的以下更改很常见：

*   您在“axis2/WEB-INF/modules/”中添加模块。
*   您在“axis2/WEB-INF/lib/”中添加库。
*   您更改“axis2/WEB-INF/conf/axis2.xml”文件中的配置。
*   您将服务部署在“axis2/WEB-INF/services/”中。

此外，服务目录中还有一个热部署选项。在 axis2.xml 文件中，以下行启用此功能：

```
<parameter name="hotdeployment">true</parameter> 
```

您还可以使用以下配置参数覆盖服务的默认位置：

```
<parameter name="ServicesDirectory">service</parameter> 
```

当然，您也可以创建符号链接（unix/linux），但我不建议您使用这些符号链接来污染您的安装。

因此，总结一下，在您初始部署axis2.war 文件之后，您不需要重新部署它，它可以保留，您可以在服务目录中部署您的.aar 文件。如果未启用热部署（默认），您需要手动重新启动您的 Tomcat 服务器/重新加载上下文。

# javascript - 在javascript中循环2D ArrayList

> ID：11048492
> 
> 赞同：0
> 
> 时间：2012-06-15T09:57:15.900
> 
> 标签：javascript, arrays, loops, dynamic

以下数据从 Servlet 返回到 JSP。

```
List< List < String > > formData = new ArrayList< List< String > >(); 
```

formData 有`[[A, D], [, E], [B], [], [], [C]]`

我无法在 jsp 中使用 javascript 遍历上面的列表。

我尝试将 formdata 分配给一个变量并使用索引访问它，如下所示

在 JSP 中：

```
var myData = "${formData}";

var i=0;

var j=0;

alert(myData[i][j]) 
```

警报将值显示为未定义。

请让我知道如何遍历 formData 列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T19:39:18.617

我认为在 javascript 源代码中打印来自 jsp 的双向字符串集合的 toString 不是一个好主意。这是创建传输/表示语言的目的之一。出于这个原因，我建议打印该二维集合的 JSON 表示。您需要在 JavaScript 源代码中，String 的二维数组是：

```
[["A", "D"], [, "E"], ["B"], [], [], ["C"]] 
```

注意双引号，这些很重要，没有这些，生成的 javascript 数组是变量（A、D、E、B、C）的二维数组。

例如，使用 Gson（谷歌 json 库），在 Java 中我会像这样创建 formData：

```
Gson gson = new Gson();
String toPrintInTheJSP = gson.toJson(<your Java bidimensional collection of strings here>); 
```

在 JSP 中我会输出：

```
var myData = ${formData}; //without the double quotes
var i=0, j=0;
alert(myData[i][j]) 
```

如果您需要循环浏览 JSP 中的集合（这意味着在生成标记时（我引用，“我尝试将 formdata 分配给一个变量并使用如下索引在 JSP 中访问它：[...]”），有执行此操作的不同方法，例如 scriptlet 或 JSTL。

我不太确定您必须做什么，您在问题中使用的术语有点不精确。我认为您需要在由 JSP 编写的二维数组上循环使用 JavaScript。

如果必须在 JavaScript 中循环遍历数组，则需要一个嵌套循环，如下所示：

```
 var myData = [["A", "D"], [, "E"], ["B"], [], [], ["C"]];
    for (var i = 0; i < myData.length; i++){
        for(var j = 0; j < myData[i].length; j++){
            alert(myData[i][j]);
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T10:02:40.437

删除`${formdata}`JSP 中的括号：

```
var myData = ${formData};

var i=0;

var j=0;

alert( myData[i][j] ) ; 
```

您正在将字符串分配给`myData`. 要遍历数组，您需要使用解析该字符串`JSON.parse()`或直接将其分配为数组，如上所示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T10:02:58.423

```
var myData = "${formData}"; 
```

转换为：

```
var myData = "[[A, D], [, E], [B], [], [], [C]]"; 
```

在 javascript 中，要创建一个数组，您必须使用：

```
var myData = [[A, D], [, E], [B], [], [], [C]]; 
```

# matlab - matlab ui控件

> ID：11048494
> 
> 赞同：1
> 
> 时间：2012-06-15T09:57:26.100
> 
> 标签：matlab, user-interface, set, figure, uicontrol

我做了一个 gui，我有一个代码（感谢 Amro），它显示了一个 gif 文件。

我想在 'hAxes' 中显示这个 gif 文件，直到 gui 关闭（与其他 uicontrol 一起显示）。

我有一个包含 200 张图片的文件夹（image1.jpg、image2.jpg...image200.jpg），我对这些图片执行了一些操作（在 loading1 uicontrol 中）。

我尝试类似：

```
hFigure = figure('units','pixels','position',[300 300 424 470],'menubar','none',...
'name','start processing','numbertitle','off','resize','off');        

hAxes = axes('Parent',hFigure,'Units','pixels','Position',[0 112 424 359]); 
```

**%% 这是 Amro 用来显示 gif 文件的内容**

```
fname = 'loading.gif';

%# read all GIF frames**
info = imfinfo(fname, 'gif');
delay = ( info(1).DelayTime ) / 100;
[img,map] = imread(fname, 'gif', 'frames','all');
[imgH,imgW,~,numFrames] = size(img);

hImg = imshow(img(:,:,:,1), map, 'Parent',hAxes);
pause(delay)

%# loop over frames continuously
counter = 1;
while ishandle(hImg)
       %# increment counter circularly
       counter = rem(counter, numFrames) + 1;

       %# update frame
       set(hImg, 'CData',img(:,:,:,counter))

       %# update colormap
       n = max(max( img(:,:,:,counter) ));
       colormap( info(counter).ColorTable(1:n,:) )

       %# pause for the specified delay
       pause(delay)
end 
```

**%% 这是我的其余代码：**

```
set(hAxes,'Visible','off', 'handlevisibility', 'off');
%% loading1 shows a data
loading1 = uicontrol('style','text','unit','pix','position',[0 72 424 40],...
'backgroundcolor','r','fontsize',20);

for i=1:200
    image = horzcat('now processing ', 'image', num2str(i), '.jpg of 200 images')
    set(loading1,'string',image);
    drawnow;
end 
```

**但是这段代码不起作用：在这段代码中，gui 显示了 hAxes（gif 文件很好），但是 gui 没有显示 loading1 uicontrol。我希望他同时显示（hAxes 和 loading1）**

所以我的意思是我希望 gui 向我显示 gif 文件和 'loading1' uicontrol 两者。我认为“loading1”不起作用，因为显示 gif 文件的代码中的“while”。

**这就是我得到的：**

![在此处输入图像描述](../Images/0b24a3b1ae580619fece8de1108a6f79.png)

**这就是我想要得到的：**

![在此处输入图像描述](../Images/141e66d9e7f946ee0e2a59585ed378b3.png)

进而：

![在此处输入图像描述](../Images/a5e211e1d76f1ebfcea126f4f6e3d601.png)

进而：

![在此处输入图像描述](../Images/934e9e7d931bb5a7086fa08adde585da.png)

ETC...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T14:24:08.520

我认为它`uicontrol`不会出现，因为它是在处理 gif 图像的连续循环之后调用的，因此仅在您关闭图形的那一刻。

使用您的代码并`uicontrol`在循环之前创建，它似乎可以按您的预期工作。

```
hFigure=figure('units','pixels',...
               'position',[300 300 424 470],...
               'menubar','none',...
               'name','start processing',...
               'numbertitle','off',...
               'resize','off');        
hAxes=axes('Parent',hFigure,...
           'Units','pixels',...
           'Position',[0 112 424 359]); 
% loading1 shows a data
loading1=uicontrol('parent',hFigure,...
                   'style','text',...
                   'unit','pix',...
                   'position',[0 72 424 40],...
                   'backgroundcolor','r',...
                   'fontsize',20);
set(loading1,'string','now loading file 1 of 3');
filename='gif.gif';
% read all GIF frames
info=imfinfo(filename,'gif');
delay=(info(1).DelayTime)/100;
[img map]=imread(filename,'gif','frames','all');
[imgH imgW void numFrames]=size(img);
hImg=imshow(img(:,:,:,1),map,'Parent',hAxes);
pause(delay);
% loop over frames continuously
counter=1;
while(ishandle(hImg))
    % increment counter circularly
    counter=rem(counter,numFrames)+1;
    % update frame
    set(hImg,'CData',img(:,:,:,counter));
    % update colormap
    n=max(max(img(:,:,:,counter)));
    colormap(info(counter).ColorTable(1:n,:));
    % pause for the specified delay
    pause(delay);
end 
```

# ruby-on-rails - 为什么在应用程序控制器中设置 Time.zone 不会影响全局应用程序？

> ID：11048504
> 
> 赞同：1
> 
> 时间：2012-06-15T09:57:58.093
> 
> 标签：ruby-on-rails, timezone

按照 Ryan Bates 关于创建 before_filter 的说明来设置 time_zone ，如下所示：

```
before_filter :set_timezone

def set_timezone
    Time.zone = @current_user.time_zone
end 
```

为什么这不会影响，比如说，另一个用户在不同时区同时使用同一个应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T12:56:05.163

`Time.zone`不是全局设置。有一个共享的默认设置（这是`config.time_zone`控制的内容），但调用`Time.zone=`不会设置它。

相反，它设置了一个 thead 局部变量。从同一线程对 Time.zone 的后续调用将读取该值，但来自其他线程的调用不会

由于任何给定线程一次只处理一个请求，因此您可以为不同的用户提供具有不同时区的请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T10:15:58.323

因为即使是 Rails 应用程序也可以有很多线程，每个线程都维护自己的`zone`. 因此，从您单击链接到获得响应正文，您一直在专门处理相同的线程（即使用相同的`zone`）。

# android - 通过默认相机活动拍摄高质量图像并将其保存到 SD 卡中

> ID：11048505
> 
> 赞同：1
> 
> 时间：2012-06-15T09:58:00.503
> 
> 标签：android, android-camera

我正在通过默认相机活动（使用）拍摄高分辨率照片`intent.put Extras`，并将其保存到 SD 卡中，

**代码：**

```
public class CameraActivity extends Activity implements OnClickListener {
    /** Called when the activity is first created. */

    Button takepicture ;
    ImageView iv ;
    TextView tv;
    Button show;

    String filepath;
    Intent i;
    Uri mUri;

    final static int cameraData = 0;

    File folder = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        takepicture = (Button) findViewById(R.id.button1);
        iv = (ImageView) findViewById(R.id.imageView1);
        tv = (TextView) findViewById(R.id.textView1);
        show = (Button) findViewById(R.id.button2);
        takepicture.setOnClickListener(this);
        show.setOnClickListener(this);
    }

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub

        switch(v.getId()){

        case R.id.button1:

            String sdcardstate = android.os.Environment.getExternalStorageState();

            if(sdcardstate.contentEquals(android.os.Environment.MEDIA_MOUNTED)){

                 filepath = Environment.getExternalStorageDirectory().getPath();

                 folder = new File(filepath,"wax");

                 if(!folder.exists()){
                     try {
                        folder.createNewFile();
                         Log.d("folder created", "ya");
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                 }

                 mUri = Uri.fromFile(folder);
                 Log.d("bk", mUri.toString());

                 i = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
                 i.putExtra(android.provider.MediaStore.EXTRA_OUTPUT, mUri);

                 Log.d("extra", "extra");
                 startActivityForResult(i,cameraData);
            }
            break;

        case R.id.button2:

            File f = new File(filepath,"bmp.png");

            Bitmap myBitmap = BitmapFactory.decodeFile(f.getAbsolutePath());              

            iv.setImageBitmap(myBitmap);                
            break;
        }           
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        // TODO Auto-generated method stub
        super.onActivityResult(requestCode, resultCode, data);

        if(resultCode==RESULT_OK){

            tv.setText("Result ok");
            Log.d("ok", "ok");
            Bundle extras = data.getExtras();

            Bitmap bmp = (Bitmap) extras.get("data");
        }
    }
} 
```

相机活动开始，图像被拍摄，但是当我点击保存时，它不会返回并强制关闭。

我已经阅读了很多关于此的主题，了解到必须在相机活动开始之前创建文件，但仍然没有。

请帮忙，我在这个问题上卡了一个星期左右。

Logcat 错误

```
06-15 16:05:50.205: W/dalvikvm(1780): threadid=10: thread exiting with uncaught exception (group=0x4001d800)
06-15 16:05:50.205: E/AndroidRuntime(1780): FATAL EXCEPTION: GLThread 12
06-15 16:05:50.205: E/AndroidRuntime(1780): java.lang.IllegalArgumentException: No configs match configSpec
06-15 16:05:50.205: E/AndroidRuntime(1780):     at android.opengl.GLSurfaceView$BaseConfigChooser.chooseConfig(GLSurfaceView.java:760)
06-15 16:05:50.205: E/AndroidRuntime(1780):     at android.opengl.GLSurfaceView$EglHelper.start(GLSurfaceView.java:916)
06-15 16:05:50.205: E/AndroidRuntime(1780):     at android.opengl.GLSurfaceView$GLThread.guardedRun(GLSurfaceView.java:1246)
06-15 16:05:50.205: E/AndroidRuntime(1780):     at android.opengl.GLSurfaceView$GLThread.run(GLSurfaceView.java:1116)
06-15 16:05:50.294: W/ActivityManager(59):   Force finishing activity com.android.camera/.Camera
06-15 16:05:50.444: V/camera(1780): stopPreview 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T10:58:49.723

使用以下来实现这一点。

在调用 CameraIntent 之前，根据该文件路径创建一个文件和 uri，如下所示。

```
filename = Environment.getExternalStorageDirectory().getPath() + "/test/testfile.jpg";
imageUri = Uri.fromFile(new File(filename));

// start default camera
Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
cameraIntent.putExtra(android.provider.MediaStore.EXTRA_OUTPUT,
                imageUri);
startActivityForResult (cameraIntent, CAMERA_PIC_REQUEST); 
```

现在，您有了可以在 onAcityvityResult 方法中使用的文件路径，如下所示，

```
 protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if(requestCode != CAMERA_PIC_REQUEST || filename == null)
        return;
    ImageView img = (ImageView) findViewById(R.id.image);
    img.setImageURI(imageUri);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T11:32:51.127

这闻起来像 outOfMemoryException。而不是直接获取巨大的图片文件，您需要做一些代码魔术，这样它就不会占用所有内存。在此处查看一些文档：http: [//developer.android.com/training/displaying-bitmaps/index.html](http://developer.android.com/training/displaying-bitmaps/index.html)

还有一些代码4 u：

```
public Bitmap decodeFile(File f, int size){
    try {

        //Decode image size
        BitmapFactory.Options o = new BitmapFactory.Options();
        o.inJustDecodeBounds = true;
        BitmapFactory.decodeStream(new FileInputStream(f),null,o);

        //Find the correct scale value. It should be the power of 2.
        int width_tmp=o.outWidth, height_tmp=o.outHeight;
        int scale=1;

        while(true){
            if(width_tmp/2<size) // || height 
                break;
            width_tmp/=2;
            height_tmp/=2;
            scale*=2;
        }

        //Decode with inSampleSize
        BitmapFactory.Options o2 = new BitmapFactory.Options();
        o2.inSampleSize=scale;
        return BitmapFactory.decodeStream(new FileInputStream(f), null, o2);

    } catch (FileNotFoundException e) {
        e.printStackTrace();
    }

    return null;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T10:53:08.430

尝试将所有代码分别放入Try Catch Exception处理中。然后调试代码并检查抛出异常的位置。您可能正在耗尽内存异常。

按照这个：

[http://developer.android.com/training/camera/photobasics.html](http://developer.android.com/training/camera/photobasics.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-16T08:14:09.750

```
public class MainActivity extends AppCompatActivity {

    private static final int CAMERA_REQUEST = 1888;
    private ImageView imageView;
    private LinearLayout view;
    private TextView photoButton, shareButton, saveButton;
    private Bitmap b, photo;
    private static final int MY_CAMERA_PERMISSION_CODE = 100;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        view = findViewById(R.id.view);
        imageView = findViewById(R.id.image);
        photoButton = this.findViewById(R.id.captur);

        photoButton.setOnClickListener(new View.OnClickListener() {

            @RequiresApi(api = Build.VERSION_CODES.M)
            @Override
            public void onClick(View v) {
                if (checkSelfPermission(Manifest.permission.CAMERA)
                        != PackageManager.PERMISSION_GRANTED) {
                    requestPermissions(new String[]{Manifest.permission.CAMERA},
                            MY_CAMERA_PERMISSION_CODE);
                } else {
                    Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
                    startActivityForResult(cameraIntent, CAMERA_REQUEST);

                }
            }
        });

    }

    @Override
    public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {
        super.onRequestPermissionsResult(requestCode, permissions, grantResults);
        if (requestCode == MY_CAMERA_PERMISSION_CODE) {
            if (grantResults[0] == PackageManager.PERMISSION_GRANTED) {
                Toast.makeText(this, "camera permission granted", Toast.LENGTH_LONG).show();
                Intent cameraIntent = new
                        Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
                startActivityForResult(cameraIntent, CAMERA_REQUEST);
            } else {
                Toast.makeText(this, "camera permission denied", Toast.LENGTH_LONG).show();
            }

        }
    }

    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (requestCode == CAMERA_REQUEST && resultCode == Activity.RESULT_OK) {
            photo = (Bitmap) data.getExtras().get("data");
            imageView.setImageBitmap(photo);
            //convert bitmap
            view.setDrawingCacheEnabled(true);

            view.buildDrawingCache(true);
            b = Bitmap.createBitmap(view.getDrawingCache());
            view.setDrawingCacheEnabled(false);

        }
    }
} 
```

# shell - awk 命令分隔记录并保存为 csv

> ID：11048506
> 
> 赞同：0
> 
> 时间：2012-06-15T09:58:00.827
> 
> 标签：shell, unix, csv, awk, nawk

嗨，我实际上试图管理一个 awk 脚本，该脚本摆弄一个文本文件，其内容如下

```
 . [135]Edwards Engineering Pty Ltd
       Quality Structural Steel. Specialising In Fabrication And Steel
       Stairs
       21- 23 Ada Ave, Brookvale NSW 2100
       ph: (02) 9938 5320

 . [269]Diavolo Steel Fabrication
       5 Humeside Drv, Campbellfield VIC 3061
       ph: (03) 9357 7947

       . [40]WH Williams Pty Ltd
       Your Partner For High Quality Custom-Made Metal Products
       Short lead times & unbeatable quality. Make us the first choice for
       your entire sheetmetal laser cutting,bending,welding & more.
       61- 77 Egerton St, Silverwater NSW 2128
       ph: (02) 9647 1277
            [41]www.whwilliams.com.au 
```

等等..实际上是一个巨大的文件..我设法编写的脚本是

```
awk '$2 ~ /\. \[/{$1=x; print}' RS=\*  FS='\n' OFS='|' Myfile > excel.csv 
```

此命令将我的文本文件转换为具有记录分隔的 csv 文件.. 但正如您在上面看到的，上述示例中的地址长度是不同的，我得到一个格式不规则的 csv 文件..

所以我现在要做的是更改命令，将公司的 1.title 放在一个单元格中，2.描述部分，如果存在于一个单元格中，如果不存在，则将单元格留空，3.一个单元格中的地址部分，4\. 一个单元格中的电话号码 5\. 一个单元格中的网站.. 如果任何特定组件不存在，则该单元格应留空..

我是 linux 新手，正在尝试处理一些东西，而且对 shell 和 awk 也很陌生。如果有可能，任何人都可以帮助我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-28T14:24:25.853

```
awk '$1 ~ /\. \[/ {
 sub(/\. \[[0-9]*]/, "", $1)
 if ($2 ~ /^ *[0-9]/) $2 = OFS$2
 n = split($0, a, OFS)
 while (a[3] !~ /^ *[0-9]/)
 {                       
  a[2] = a[2]a[3]
  for (i=3; i<=n; ++i) a[i]=a[i+1]
  --n                              
 }   
 print a[1],a[2],a[3],a[4],a[5] }' RS= FS='\n' OFS='|' Myfile > excel.csv 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T09:00:57.393

我不得不承认这是一个有点复杂的场景，您必须处理多个行字段，并且我想到了以下要求：

*   每个字段可能跨越多行
*   输出需要特殊格式，这里是**CSV**格式，也就是逗号分隔的文本
*   **CSV**的转义字符
***   关于某些字段格式的一些假设，例如电话号码可能以 开头`ph:`，地址号码可能以街道号码开头，等等**

 **这是一个代码片段供您参考：

```
#!/usr/bin/awk -f
BEGIN{
    RS="\.\s* \[[0-9]+\]";
    FS="\n";
    OFS=",";
}

function find_next_field_until_regex(regex, i, result){
    result = "";
    for (; i < NF; i++){
        field = $i
        sub(/,/, "\,", field);
        sub(/^[ \t]*/, "", field);
        if (field ~ regex){
            break;
        }
        result = result field;
    }
    printf("%s%s", result, OFS);
    return i;
}

{
    if(NF>1){
        sub(/,/, "\,", $1);
        printf("%s%s", $1, OFS);
        i = 2;
        i = find_next_field_until_regex("^[0-9]+", i); #discription
        i = find_next_field_until_regex("^ph: ", i); #address
        i = find_next_field_until_regex("www\\.", i); #phone
        for (; i < NF; ++i){
            printf("%s", $i);
        }
    }
    printf("\n");
} 
```

还要检查[要点片段](https://gist.github.com/4006646gist)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T10:25:36.507

我使用了将由多行分隔的一组记录转换为由 ~ 分隔的单行的逻辑，然后您可以在此之上编写一个逻辑将其转换为 csv 文件（我还没有这样做）

```
cat ip_file.txt | tr '\n' '~' | tr '[' '\n' 
```

注意：假设 [ 不会出现在记录之间**

# c# - 从 jQuery 调用 Web 服务

> ID：11048507
> 
> 赞同：0
> 
> 时间：2012-06-15T09:58:02.387
> 
> 标签：c#, jquery, wcf, web-services

我正在尝试使用 jQuery 来使用我的 Web 服务，并且基本上只需要 Web 服务来调用函数就可以了。

我在 .NET 中使用的代码是这样的：

```
[ServiceContract(Namespace = "http://Sinvise.Service/")]
    public interface ISinvise
    {
        [OperationContract]
        void Output(string value);
    }

    class SinviseService : ISinvise
    {
        second sec = new second();

        public void Output(string value)
        {
            sec.message(value);
        }
    } 
```

+

```
Uri baseAddr = new Uri("http://localhost:60185/Sinvise");
            ServiceHost localHost = new ServiceHost(typeof(SinviseService), baseAddr);

            try
            {
                Process.Start(baseAddr.AbsoluteUri);
                localHost.AddServiceEndpoint(typeof(ISinvise), new WSHttpBinding(), "CalculatorService");

                ServiceMetadataBehavior smb = new ServiceMetadataBehavior();
                smb.HttpGetEnabled = true;
                localHost.Description.Behaviors.Add(smb);

                localHost.Open();
                Console.WriteLine("Service initialized.");
                Console.WriteLine("Press the ENTER key to terminate service.");
                Console.ReadLine();

                localHost.Close();
            }
            catch (CommunicationException ex)
            {
                Console.WriteLine("Oops! Exception: {0}", ex.Message);
                localHost.Abort();
            } 
```

我如何能够简单地调用`Output`Web 服务？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T10:00:50.947

您可以使用 ajax 请求[`.get()`](http://api.jquery.com/jQuery.get/)

由于浏览器安全限制，大部分“Ajax”请求都受同源策略的约束；请求无法从不同的域、子域或协议成功检索数据。脚本和 JSONP 请求不受同源策略限制。

# java - 未捕获的类型错误：无法读取 null 的属性“操作”

> ID：11048510
> 
> 赞同：0
> 
> 时间：2012-06-15T09:58:10.173
> 
> 标签：java, jsf, richfaces

我有两个 selectOneMenus，如果第一个菜单中的值已更改并向后更改，我想更改第二个的值。这两个菜单都填写了从 1980 年到 2012 年的年份。如果我在第一个菜单中选择 1990，我希望在第二个菜单中只有 1990-2012 年。

但是，如果我选择不同的值，则不会发生任何事情，并且在分析此元素时会收到以下消息：

```
Uncaught TypeError: Cannot read property 'action' of null    
A4J.Query 
A4J.AJAX.PrepareQuery 
A4J.AJAX.Submit 
onchange 
```

这是我所拥有的：

```
<%-- Year filter --%>
<h:selectOneMenu id="minYear" value="#{statistics.minYear}" 
                 style="width: 75px">
    <f:selectItems value="#{statistics.minYearValues}" />
    <a4j:support event="onchange" action="#{statistics.minYearChanged}"
                 reRender="maxYear"/>
</h:selectOneMenu>

<h:selectOneMenu id="maxYear" value="#{statistics.maxYear}" 
                 style="width: 75px">
    <f:selectItems  value="#{statistics.maxYearValues}"/>
    <a4j:support event="onchange" action="#{statistics.maxYearChanged}"
                 reRender="minYear" />
</h:selectOneMenu>
<%-- end year filter--%> 
```

这里是托管bean：

```
public List getMinYearValues() {
    this.minYear = MIN_YEAR;
    this.minYearValues = fillYearValues(MIN_YEAR, maxYear);
    return minYearValues;
}

public List getMaxYearValues() {
    int min = this.minYear;
    this.maxYearValues = fillYearValues(min, maxYear);
    return maxYearValues;
}

private List fillYearValues(int min, int max) {
    List values = new ArrayList();
    for(int i = min; i <= max; i++) {
        values.add(new SelectItem(i, String.valueOf(i)));
    }
    return values;
}

private int getPresentYear() {
    Calendar cal = Calendar.getInstance();
    cal.setTime(new Date());

    return cal.get(Calendar.YEAR);
}

public void minYearChanged(ValueChangeEvent event) {
    int newValue = new Integer(event.getNewValue().toString());
    this.maxYearValues = fillYearValues(newValue, maxYear);
}

public void maxYearChanged(ValueChangeEvent event) {
    int newValue = new Integer(event.getNewValue().toString());
    this.minYearValues = fillYearValues(minYear, newValue);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T10:06:40.750

我希望您的 bean 中的`maxYearChanged`和`minYearChanged`方法的签名是错误的，无法将其用作`action`. 它应该是 `public void maxYearChanged();`

如果你需要使用`ValueChangeEvent`你必须使用`valueChangeListener`

参考[JSF 1.2：valueChangeListener 事件不返回新选择的值](https://stackoverflow.com/questions/1861359/jsf-1-2-valuechangelistener-event-not-returning-newly-selected-value)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T14:18:43.763

最后我找到了解决方案。我是这样做的：

```
<a4j:region renderRegionOnly="true">

        <%-- Year filter --%>
        <h:selectOneMenu id="minYear" value="#{statistics.minYear}" 
                         style="width: 75px" onchange="this.form.submit()"
                         valueChangeListener="#{statistics.minYearChanged}">
            <f:selectItems value="#{statistics.minYearValues}" />
        </h:selectOneMenu>

        <f:verbatim>&#160;&#160;</f:verbatim>
        <h:outputText value="#{bundleStatistics['Label.minYearToMaxYear']}" />
        <f:verbatim>&#160;&#160;</f:verbatim>

        <h:selectOneMenu id="maxYear" value="#{statistics.maxYear}" 
                         style="width: 75px" onchange="this.form.submit()"
                         valueChangeListener="#{statistics.maxYearChanged}">
            <f:selectItems  value="#{statistics.maxYearValues}"/>
        </h:selectOneMenu>
    <%-- end year filter--%>

</a4j:region> 
```

值变化监听器：

```
public void minYearChanged(ValueChangeEvent event) {
    int newValue = new Integer(event.getNewValue().toString());
    this.maxYearValues = fillYearValues(newValue, getPresentYear());
}

public void maxYearChanged(ValueChangeEvent event) {
    int newValue = new Integer(event.getNewValue().toString());
    this.minYearValues = fillYearValues(MIN_YEAR, newValue);
} 
```

# python - 为什么python子进程输出与shell不同？

> ID：11048515
> 
> 赞同：3
> 
> 时间：2012-06-15T09:58:33.543
> 
> 标签：python, shell, process, awk, subprocess

我正在使用该`subprocess`模块来确定进程是否正在运行。但是当查找过程不存在时，结果就不同了。

例如，在shell中，如果进程`python test.py`不存在，则输出`ps -ef|grep python|grep test|awk '{print $2}'`为空。但是在python中：

```
cmd="ps -ef|grep python|grep test|awk '{print $2}'"
vp=subprocess.Popen(cmd,stdout=subprocess.PIPE,shell=True)
r=vp.communicate()[0] 
```

输出`r`不是无。它是执行的 shell 的 pid `cmd`。

那么如何得到想要的结果呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T10:06:22.230

当 shell 子进程运行时，它的参数是可见的，`ps`因为它们作为命令行传递给`sh`.

`shell=True`通过调用`['/bin/sh', '-c', cmdstring]`.

当您在 shell 中键入管道时，管道的每个部分都被单独调用，因此没有在其参数中同时包含“python”和“test”的进程。

您的进程树如下所示：

```
python script.py
    /bin/sh -c "ps -ef|grep python|grep test|awk '{print $2}'"
        ps -ef
        grep python
        grep test
        awk '{print $2}' 
```

# java - Java - 如何在没有 Swing 组件的情况下更改光标？

> ID：11048520
> 
> 赞同：0
> 
> 时间：2012-06-15T09:58:47.973
> 
> 标签：java, swing, cursor

我有一个作为后台服务运行的Java 应用程序，即没有GUI。但是当启动它时，比如说通过一个批处理脚本，我有一些准备工作要在我的程序开始时完成（比如与服务器通信）。

我希望在这个忙碌的时刻出现一个忙碌的光标。是否可以在不使用任何 Swing 组件的情况下做到这一点？感谢您提供任何建议或替代方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T10:06:48.330

我会选择一个基于控制台的“进度条”。可以使用 Swing，但它会使您的解决方案在无头环境中无用。在终端中绘制带有字符的进度条是一种很常见的做法。

您可以自己实现它，也可以使用现成的类。只要看看 github 或 bitbucket，你肯定会找到一些东西。

一个忙碌的光标甚至可以显示为标题与交替的最后一个字符（尽可能简单），像这样的“框架”（旋转条）

```
LOADING DATA /
LOADING DATA |
LOADING DATA \
LOADING DATA - 
```

实施这样的事情不会花费太多时间。我们在这里谈论分钟。

如果唯一阻止您使用 Swing 的是出现的窗口，您可以通过[window translucency](http://docs.oracle.com/javase/tutorial/uiswing/misc/trans_shaped_windows.html)更改其外观。这样，您将获得覆盖屏幕的动画图像。但它在终端中不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T10:06:23.620

如果您能够使用 Java AWT (Abstract Window Toolkit)，我相信您可以使用 Component 类的 setCursor 来更改光标。

更多信息：[http ://www.roseindia.net/java/example/java/awt/ChangeCursor.shtml](http://www.roseindia.net/java/example/java/awt/ChangeCursor.shtml)

# c - 在 PulseAudio 中播放具有不同 sample_spec 的样本

> ID：11048523
> 
> 赞同：0
> 
> 时间：2012-06-15T09:58:57.647
> 
> 标签：c, linux, audio, pulseaudio

我正在开发一个应用程序，它通过自定义 UDP 协议从远程服务器接收音频样本流。该流由小样本序列组成，每个序列可能具有不同数量的通道和速率。

据我了解，流的 sample_spec 只能在流的创建过程中设置（`pa_simple_new`,`pa_stream_new`等），之后无法切换。

我的问题是：在 PulseAudio 中播放这些样本的最有效方法是什么？我看到三个选项：

1.  保留单个 PulseAudio 流，在需要时手动重新采样样本序列和混合通道（以便为 PulseAudio 提供相同 sample_spec 的样本）
2.  保留单个 PulseAudio 流，在规格更改时使用新的 sample_spec 关闭并重新打开它
3.  保留多个流，一个用于我必须使用的每种样本

选项 1 似乎需要大量手动工作，而且也非常耗费资源。选项 2 似乎非常低效。选项 3 看起来可能是最好的，但我担心资源消耗。有什么我可能会丢失的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T12:25:13.723

重新采样自己将是浪费精力。您确实可以选择动态更新采样率。您需要设置 PA_STREAM_VARIABLE_RATE 并使用 pa_stream_update_sample_rate()。不过，这仍然不能处理示例规范更改。

2 和 3 都是有效的，显然在预先分配资源（选项 3）和轻微的性能损失（选项 2）之间需要权衡。老实说，创建​​流并没有那么昂贵，并且保持流的开销也不应该很高（除非您处于资源严重受限的环境中）。

因此，如果您有固定数量的规格/价格组合，只需预先创建流。如果规格/速率的变化很少，只需拆除并重新创建流。

# date - 如何在 X++ 中计算复活节星期天？

> ID：11048524
> 
> 赞同：1
> 
> 时间：2012-06-15T09:58:58.353
> 
> 标签：date, x++, axapta

X ++方法来计算复活节星期天？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T09:59:57.447

```
static date dateOfEaster(Yr y)
{
    int a = y mod 19;
    int b = y div 100;
    int c = y mod 100;
    int d = b div 4;
    int e = b mod 4;
    int f = (b+8) div 25;
    int g = (b-f+1) div 3;
    int h = (19*a+b-d-g+15) mod 30;
    int i = c div 4;
    int k = c mod 4;
    int l = (32+2*e+2*i-h-k) mod 7;
    int m = (a+11*h+22*l) div 451;
    int n = (h+l-7*m+114) div 31;
    int p = (h+l-7*m+114) mod 31;
    return mkdate(p+1,n,y);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T16:09:35.360

我有点创意，因此您可以使用 GET 和公共 Web 服务和一点递归来枚举给定年份的所有假期。随心所欲地玩这个。只需复制/粘贴到作业：

```
static void HolidayWebService(Args _args)
{
    System.Net.WebClient webClient = new System.Net.WebClient();
    str holidaysAvailable   = "http://www.holidaywebservice.com/HolidayService_v2/HolidayService2.asmx/GetHolidaysAvailable?countryCode=UnitedStates";
    str holidayDate         = "http://www.holidaywebservice.com/HolidayService_v2/HolidayService2.asmx/GetHolidayDate?countryCode=%1&holidayCode=%2&year=%3";
    str retVal              = webClient.DownloadString(holidaysAvailable);

    XMLDocument doc=XMLDocument::newXml(retVal);
    XmlNamedNodemap     attributes;
    XmlElement          root = doc.root();
    XmlNode             node = root.firstChild();

    void getHolidayDate(str _holidayCode, Yr _yr = datetimeutil::year(datetimeutil::utcNow()), str _countryCode = 'UnitedStates')
    {
        System.Net.WebClient webClientInner = new System.Net.WebClient();
        str locRetVal;
        ;

        try
        {

            locRetVal = webClientInner.DownloadString(strfmt(holidayDate, _countryCode, _holidayCode, _yr));

            info(strfmt("[%1] %2", _holidayCode, locRetVal));

        }
        catch
        {
            error(strfmt("Error with %1, %2, %3", _holidayCode, _yr, _countryCode));
            continue;
        }
    }

    void dig(XmlNode _node, int _depth = 0)
    {
        XmlNode sib;
        ;

        if (_node == null)
            return;

        if (_node.hasChildNodes())
            dig(_node.firstChild(), (_depth+1));
        else
        {
            if (_node.parentNode().name() == 'CODE')
                getHolidayDate(_node.innerText());
        }

        sib = _node.nextSibling();

        if (sib)
            dig(sib);
    }
    ;

    dig(node);

} 
```

# ember.js - 最新 Handlebars 和 EmberJS 的 registerHelper 奇怪错误

> ID：11048526
> 
> 赞同：0
> 
> 时间：2012-06-15T09:59:09.980
> 
> 标签：ember.js, handlebars.js

我在 registerHelper 函数中使用最新的 Handlebars 和 EmberJS 在控制台日志中得到一个未定义的变量：

[http://jsfiddle.net/qqeQj/1/](http://jsfiddle.net/qqeQj/1/)

但是，当使用没有 Handlebars 的 emberJS 0.9.8.1 时，它可以按预期工作：

[http://jsfiddle.net/qqeQj/2/](http://jsfiddle.net/qqeQj/2/)

有任何想法吗？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T14:06:45.903

在所有当前发布的 Ember 版本中，我们都包含 Handlebars。通过自己包含它，我怀疑这两个版本以意想不到的方式发生冲突。

我们可能会在 1.0 版本中将 Handlebars 从内置的“ember.js”中分离出来，但在那之前，您不应该自己包含它。

# c# - 在使用 HTTPS 443 绑定托管的 WCF 服务中获取客户端 IP 地址

> ID：11048532
> 
> 赞同：14
> 
> 时间：2012-06-15T09:59:42.850
> 
> 标签：c#, wcf, https, ip-address

在我的一个应用程序中，需要使用 HTTPS 443 绑定托管的 WCF 服务中的客户端 IP 地址。

我尝试了有关此问题的堆栈溢出和其他站点的大部分帖子，但是当我在服务器中托管我的应用程序时，它只是获取服务器 IP 地址，但我需要请求的客户端地址，任何人对此有任何想法

提前致谢..

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-15T10:48:12.507

在 .NET 3.5 中，您可以使用以下模式（使用`System.ServiceModel`）

```
OperationContext context = OperationContext.Current; 
MessageProperties prop = context.IncomingMessageProperties; 
RemoteEndpointMessageProperty endpoint = prop[RemoteEndpointMessageProperty.Name] as RemoteEndpointMessageProperty;
string ip = endpoint.Address; 
```

# c# - 动态数据显示：更改图表的 X 轴日期时间格式

> ID：11048533
> 
> 赞同：3
> 
> 时间：2012-06-15T09:59:47.740
> 
> 标签：c#, wpf, dynamic-data-display

我正在使用[动态数据显示](http://dynamicdatadisplay.codeplex.com/)来显示图形的 wpf 应用程序。它工作正常。

**问题 ：**

请检查：

![在此处输入图像描述](../Images/a7041186666a5db975749d97e66cd503.png)

如何使用 12 小时制而不是 24 小时制？请建议。

**更新 ：**

这是我的图形 XAML：

```
 <d3:ChartPlotter Name="plotter" Margin="3,121,5,0" Grid.RowSpan="2" Height="373" VerticalAlignment="Top" VerticalContentAlignment="Stretch" LegendVisible="False">
    <d3:ChartPlotter.HorizontalAxis>
        <d3:HorizontalDateTimeAxis Name="dateAxis" />                                    
    </d3:ChartPlotter.HorizontalAxis>                                                               
    <d3:VerticalAxisTitle FontFamily="Georgia" Content="Sensor Readings" />
    <d3:HorizontalAxisTitle FontFamily="Georgia" Content="Date" />
</d3:ChartPlotter> 
```

CS ：

```
var dates = (from dr in datDs.Tables[0].AsEnumerable()
                 select new
                 {
                     date = dr.Field<DateTime>("DateRecorded")
                 }.date).ToList();

var datesDataSource = new EnumerableDataSource<DateTime>(dates);
datesDataSource.SetXMapping(x => dateAxis.ConvertToDouble(x)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T15:25:33.690

要更改 DateTime 轴应用格式的方式，您必须进入 D3 的源代码。在文件中... DynamicDataDisplay/Charts/Axes/DateTime/DateTimeLabelProviderBase.cs

您将不得不更改 GetDateFormat 方法。以下示例将产生您想要的结果：

```
protected virtual string GetDateFormat(DifferenceIn diff)
    {
        string format = null;

        switch (diff)
        {
            case DifferenceIn.Year:
                format = "yyyy";
                break;
            case DifferenceIn.Month:
                format = "MMM";
                break;
            case DifferenceIn.Day:
                format = "%d";
                break;
            case DifferenceIn.Hour:
                format = "hh:mm";
                break;
            case DifferenceIn.Minute:
                format = "%m";
                break;
            case DifferenceIn.Second:
                format = "ss";
                break;
            case DifferenceIn.Millisecond:
                format = "fff";
                break;
            default:
                break;
        }

        return format;
    } 
```

关键是将小时的大小写从大写 H（24 小时制）更改为小写 h（12 小时制）。希望这会有所帮助，并祝您的图表项目的其余部分好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T11:13:25.217

在这里您可以找到一个很好的使用示例：

[http://msdn.microsoft.com/en-us/magazine/ff714591.aspx](http://msdn.microsoft.com/en-us/magazine/ff714591.aspx)

我认为这可以帮助你：

> 在 x 轴上，我使用 ConvertToDouble 方法将 DateTime 数据显式转换为 double 类型。在 y 轴上，我简单地写了 y => y（读作“y 转到 y”）来隐式地将输入 int y 转换为输出 double y。我可以通过编写 SetYMapping(y => Convert.ToDouble(y) 来明确我的类型映射。我对 lambda 表达式参数的 x 和 y 选择是任意的——我可以使用任何参数名称。

和代码：

```
var datesDataSource = new EnumerableDataSource<DateTime>(dates);
datesDataSource.SetXMapping(x => dateAxis.ConvertToDouble(x)); 
```

动态数据显示将 DateTime 与您的应用程序文化结合使用。所以（如前所述`weston`）你必须将它设置为 cultere `12 hour time format`。这篇文章解释了如何做到这一点：

[如何在 WPF 应用程序中全局设置文化？](https://stackoverflow.com/questions/1265773/how-can-i-globally-set-the-culture-in-a-wpf-application)

编码：

```
Thread.CurrentThread.CurrentCulture = new CultureInfo("en-US"); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-31T09:27:23.993

试试这个：（c#，DevExpress）

```
((XYDiagram)chartControl.Diagram).AxisX.DateTimeOptions.Format = DateTimeFormat.Custom;
((XYDiagram)chartControl.Diagram).AxisX.DateTimeOptions.FormatString = "yyyy-MM-dd"; 
```

# java - 如何在java中为xml解析创建POJO类？

> ID：11048538
> 
> 赞同：0
> 
> 时间：2012-06-15T10:00:15.877
> 
> 标签：java, xml-parsing, pojo

我得到了我需要的确切输出，但我必须为我的程序使用 POJO 类，我搜索了很多问题，但我没有明确的想法。帮助我解决这个问题，提前感谢我在 java 中对 xml phrse 的编码下面给出。

ReadAndPrintXMLFile:: 的编码

```
import org.w3c.dom.*;

import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.DocumentBuilder;
import org.xml.sax.SAXException;
import org.xml.sax.SAXParseException;

import java.net.URL;
import java.io.InputStream;

public class ReadAndPrintXMLFile{
    public static void main (String argv []){

    try {
            DocumentBuilderFactory docBuilderFactory = DocumentBuilderFactory.newInstance();
            DocumentBuilder docBuilder = docBuilderFactory.newDocumentBuilder();

            URL url = new URL("http://xxxxxxxxxxxxxxxx");
            InputStream stream = url.openStream();
            Document doc = docBuilder.parse(stream);

            // normalize text representation
            doc.getDocumentElement ().normalize ();
            System.out.println ("Root element of the doc is " +
                 doc.getDocumentElement().getNodeName());
            NodeList listOfPersons = doc.getElementsByTagName("head");
            int totalPersons = listOfPersons.getLength();
            System.out.println("Total no of head : " + totalPersons);
            for(int s=0; s<listOfPersons.getLength() ; s++){
                Node firstPersonNode = listOfPersons.item(s);
                if(firstPersonNode.getNodeType() == Node.ELEMENT_NODE){
                    Element firstPersonElement = (Element)firstPersonNode;
                    //-------
                    NodeList firstNameList = firstPersonElement.getElementsByTagName("heading");
                    Element firstNameElement = (Element)firstNameList.item(0);
                    NodeList textFNList = firstNameElement.getChildNodes();
                    System.out.println("Heading : " +
                           ((Node)textFNList.item(0)).getNodeValue().trim());

                }//end of if clause
            }//end of for loop with s var
        }catch (SAXParseException err) {
        System.out.println ("** Parsing error" + ", line "
             + err.getLineNumber () + ", uri " + err.getSystemId ());
        System.out.println(" " + err.getMessage ());
        }catch (SAXException e) {
        Exception x = e.getException ();
        ((x == null) ? e : x).printStackTrace ();
        }catch (Throwable t) {
        t.printStackTrace ();
        }
        //System.exit (0);
    }//end of main
} 
```

对于这个 xml 解析程序，我必须使用 POJO 类。所以为此我创建了一个这样的类

```
public class POJOurl {

    private String heading;

    public String getHeading() {
        return heading;
    }

    public void setHeading(String heading) {
        this.heading = heading;
    }

} 
```

在这里，我不知道如何在我的程序中使用这些 get 和 set 方法，使用这些 public String getHeading() 和 public void setHeading(String heading) 我必须执行程序..我必须得到我得到的输出现在..唯一的事情是我必须为这个程序使用 POJO 类

输出：：

```
Root element of the doc is root1
Total no of head : 4
Heading : Appliance Repairs
Heading : Air conditioning and refrigeration services
Heading : Accountants
Heading : Accident Management 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T10:04:48.190

我会创建一个具有您需要的属性的 Person 类，例如 firstName。

# html - 垂直文本中心在

> ID：11048541
> 
> 赞同：0
> 
> 时间：2012-06-15T10:00:28.107
> 
> 标签：html, alignment, center

所以我正在尝试获取 2 个 div 容器，它们都应该包含居中的文本（x 轴和 y 轴）。

感谢 Google 和 stackoverflow，我偶然发现了一些使用垂直对齐等的解决方法。但似乎没有任何效果。

```
#right-menu {
    position: absolute ;
    right: 0% ;
    top: 0% ;
    height: 100% ;
    width: 5% ;
    text-align:  center ;
    background: #ededed ;
        display: table-cell;

vertical-align: middle ; 
```

这是一个小提琴：

[http://jsfiddle.net/7Rgvs/](http://jsfiddle.net/7Rgvs/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T10:03:43.813

基本上，首先您必须将父元素定义为 CSS 中的表格，然后您可以将其子元素显示为表格单元格。

例如，

```
 div.parent {
    display: table;
 }
 div.parent div.child {
    display: table-cell; 
     vertical-align: middle;  
} 
```

查看此链接，它将澄清您的疑问.. [http://css-tricks.com/vertically-center-multi-lined-text/](http://css-tricks.com/vertically-center-multi-lined-text/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T10:16:34.720

`Vertical-align:middle` property is not used with `position:absolute;` if you are using vertical-align:middle then try this layout modified layout [http://jsfiddle.net/7Rgvs/5/](http://jsfiddle.net/7Rgvs/5/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T10:11:04.987

使用 display: table 作为 (holder #left-menu 元素) 和 display: table-cell 作为内部 holder 元素并使用以下样式：

```
#left-menu .inner {
    display: table-cell;
    margin: 0 auto;
    text-align: center;
    vertical-align: middle;
    width: 100%;
} 
```

我已经在您的小提琴中编辑了左侧菜单：http: [//jsfiddle.net/7Rgvs/](http://jsfiddle.net/7Rgvs/)

# c++ - 对模板类的重载运算符的模棱两可的调用

> ID：11048545
> 
> 赞同：1
> 
> 时间：2012-06-15T10:01:01.843
> 
> 标签：c++, templates, operator-overloading

我有一个用于卷对象的模板类，它`operator+=`被实现为成员函数，并且`operator+`被实现为非成员函数：

```
template <typename Class>
Class operator+(Class c1, const Class& c2) {
   return c1 += c2;
}

// Add a constant to every element in the volume
template <typename Class, typename dataType>
Class operator+(Class c, dataType constant) {
   return c += constant;
}

template <typename Class, typename dataType>
Class operator+(dataType constant, Class c) {
   return c += constant;
} 
```

然后我尝试编译以下内容：

```
volume + 1.3; 
```

其中卷是从模板卷类派生的类型。这给了我以下错误：

```
error: ambiguous overload for ‘operator+’ in ‘volume + 1.3’ 
```

为什么通话模棱两可？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T10:06:53.010

您的第二个模板可以用`Class = typeof(volume)`and推断`dataType = double`，或者您的第三个模板可以用`dataType = typeof(volume)`and推断`Class = double`。编译器无法在它们之间进行选择，即使第三个模板很可能无法实例化。

我假设它`volume`有一个用户定义的类型。如果它具有内置类型，那么我*认为*该调用不会模棱两可，因为仅出于运算符重载决议的目的，`double operator+(double, double);`在考虑模板之前会选择“真实”函数等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T10:40:37.827

假设 Volume 是您的班级的名称。

```
Volume volume; 
```

当需要解析volume + 1.3时，编译器会寻找合适的方法。它找到了其中两个。

1.  模板类运算符+（类 c，数据类型常量）
2.  模板类运算符+（数据类型常量，c类）

为什么？

这些定义中的字面“类”没有意义。即使您打算这样做，它也与“音量”类完全*无关。*

因此，编译器将其视为：1。

```
template <typename X, typename Y>
X operator+(X c, Y constant) 
```

1.  模板 Z 运算符+(Z 常数, X c)

因此，对于该行的编译器来说，这两者同样足够好

```
volume+1.3 
```

即：来自（1）：

```
Volume operator+(Volume c, double constant) 
```

从（2）：

```
Volume operator+(Volume constant, double c) 
```

现在，它对于编译器来说是模棱两可的。

解决方案：我只能看到您必须为每种卷类型分别定义这些运算符的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T15:05:14.200

其他人解释了为什么您的代码不起作用。*但总的来说，编写接受任何*参数类型的函数模板是一个非常糟糕的主意。那只是要求模棱两可。

如果你有一个想要使用 operator+ 的“volume”类型列表，你可以让它们继承一个公共基类，然后你可以在模板中将其用作参数类型。

```
template<typename T>
struct VolumeBase { 
  T copy() const { return get(); }
  T const& get() const { return static_cast<T const&>(*this); }
};

template <typename Class, typename Class>
Class operator+(VolumeBase<Class> const& c, VolumeBase<Class> const& c1) {
   return c.copy() += c1.get();
}

template <typename Class, typename dataType>
Class operator+(VolumeBase<Class> const& c, dataType constant) {
   return c.copy() += constant;
}

template <typename Class, typename dataType>
Class operator+(dataType constant, VolumeBase<Class> const& c) {
   return c.copy() += constant;
} 
```

不幸的是，您已经以这种方式将参数副本移动到模板的主体中，但如果它可以内联（对于这样一个简单的主体，我认为这没问题），这不会影响性能。所以每个卷类将被定义为

```
class MyVolumeClass : public VolumeBase<MyVolumeClass> { ... }; 
```

# jsp - 显示标记附加查询参数以对 URL 进行排序

> ID：11048547
> 
> 赞同：2
> 
> 时间：2012-06-15T10:01:07.560
> 
> 标签：jsp, spring-mvc, displaytag

我目前正在使用带有 spring MVC 的 displaytag，如下所示：

```
 <display:table class="displayTag" name="${searchList}" requestURI="" sort="external">
       <display:column title="Name" property="name" href="viewInstitution.htm" paramId="institution" paramProperty="dbId" sortable="true">
 </display:table> 
```

将鼠标悬停在名称列上时，我得到一个链接，如下所示：

```
http://localhost:8080/webapp/institutionManagement.htm?sort=name&dir=desc 
```

但是我想在 URI 中附加一些额外的参数，例如：

```
http://localhost:8080/webapp/institutionManagement.htm?sort=name&dir=desc&parama=value&paramb=value 
```

这些是春天从后端发送的，我想将它们附加到每个排序链接的末尾。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-22T07:43:09.173

你为什么不这样使用？

```
 <display:table class="displayTag" name="${searchList}" requestURI="" sort="external" id="row">
<display:column tittle="name">
    <a href="viewInstitution.htm?parama=<c:out value='${row.value1}'/>&paramb=<c:out value='${row.value2}'/> 
    <c:out value='${row.name}'/>
    </a>
</display:column>
     </display:table> 
```

# objective-c - xcode构建失败没有解释

> ID：11048549
> 
> 赞同：3
> 
> 时间：2012-06-15T10:01:09.823
> 
> 标签：objective-c, ios, xcode

我的项目奇怪地开始失败，没有错误消息。我试过清理项目，但没有效果。我知道这有点含糊，但我没有做任何事情来恢复或撤消。它只是随机开始发生。任何人都可以提出一种调试问题的方法吗？

菲尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T13:15:26.303

您是否尝试过清除派生数据（Organizer->Projects / cmd + shift + 2）然后清理（cmd + shift + K）？

也许关闭 xCode 并重新启动？

我有过几次，这有时对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-04T15:17:28.800

我遇到过同样的问题。如果您在 arc 项目中使用非 arc 代码，请确保在 .m 文件中添加了“-fno-objc-arc”标志。[操作说明](https://stackoverflow.com/a/8970503/2225302)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-03T14:57:26.267

我需要重新克隆我的 git 存储库以查看构建问题实际上是什么。就我而言，构建问题与不再有效的开发配置文件有关。我能够轻松地纠正这个问题并正确构建。

# xsd - XSD中元素的最大出现次数取决于其元素的实现条件

> ID：11048553
> 
> 赞同：1
> 
> 时间：2012-06-15T10:01:33.090
> 
> 标签：xsd, xsd-validation

我正在创建一些架构。

我的架构结构看起来像这样。

Schema 1（Embedded schema）：它有两个字段： 1.select:Drop Down 允许两个值“Heading”和“Title” 2.text

模式2：它有以下字段；

```
 1.First--of Type Schema 1: As a field. Max occurrence is 4 
```

主架构的来源如下所示：

```
 <xsd:schema elementFormDefault="qualified" xmlns:tcmi="http://www.tridion.com/ContentManager/5.0/Instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <xsd:import namespace="http://www.tridion.com/ContentManager/5.0/Instance"></xsd:import>
    <xsd:annotation>
        <xsd:appinfo>
            <tcm:Labels xmlns:tcm="http://www.tridion.com/ContentManager/5.0">
                <tcm:Label ElementName="select" Metadata="false">select</tcm:Label>
                <tcm:Label ElementName="text" Metadata="false">text</tcm:Label>
            </tcm:Labels>
        </xsd:appinfo>
    </xsd:annotation>
    <xsd:complexType name="Content">
        <xsd:sequence>
            <xsd:element name="select" minOccurs="0" maxOccurs="1">
                <xsd:annotation>
                    <xsd:appinfo>
                        <tcm:ExtensionXml xmlns:tcm="http://www.tridion.com/ContentManager/5.0"></tcm:ExtensionXml>
                        <tcm:Size xmlns:tcm="http://www.tridion.com/ContentManager/5.0">1</tcm:Size>
                        <tcm:listtype xmlns:tcm="http://www.tridion.com/ContentManager/5.0">select</tcm:listtype>
                    </xsd:appinfo>
                </xsd:annotation>
                <xsd:simpleType>
                    <xsd:restriction base="xsd:normalizedString">
                        <xsd:enumeration value="Heading"></xsd:enumeration>
                        <xsd:enumeration value="Title"></xsd:enumeration>
                    </xsd:restriction>
                </xsd:simpleType>
            </xsd:element>
            <xsd:element name="text" minOccurs="1" maxOccurs="1" type="tcmi:MultiLineText">
                <xsd:annotation>
                    <xsd:appinfo>
                        <tcm:ExtensionXml xmlns:tcm="http://www.tridion.com/ContentManager/5.0"></tcm:ExtensionXml>
                        <tcm:Size xmlns:tcm="http://www.tridion.com/ContentManager/5.0">2</tcm:Size>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:element>
        </xsd:sequence>
    </xsd:complexType>
</xsd:schema> 
```

这个模式在主模式中被称为“字段”——首先

```
 <xsd:schema elementFormDefault="qualified" targetNamespace="some name space" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="some name space" xmlns:tcmi="http://www.tridion.com/ContentManager/5.0/Instance">
                    <xsd:import namespace="http://www.tridion.com/ContentManager/5.0/Instance" schemaLocation="location.xsd"></xsd:import>
                    <xsd:include schemaLocation="Schema 1 location"></xsd:include>
                    <xsd:annotation>
                        <xsd:appinfo>
                            <tcm:Labels xmlns:tcm="http://www.tridion.com/ContentManager/5.0">
                                <tcm:Label ElementName="First" Metadata="false">First</tcm:Label>
                            </tcm:Labels>
                        </xsd:appinfo>
                    </xsd:annotation>
                    <xsd:element name="Content">
                        <xsd:complexType>
                            <xsd:sequence>
                                <xsd:element name="First" minOccurs="1" maxOccurs="4" type="Content">
                                    <xsd:annotation>
                                        <xsd:appinfo>
                                            <tcm:ExtensionXml xmlns:tcm="http://www.tridion.com/ContentManager/5.0"></tcm:ExtensionXml>
                                            <tcm:EmbeddedSchema xlink:href="Schema 1 location" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:tcm="http://www.tridion.com/ContentManager/5.0" xlink:title="abcd"></tcm:EmbeddedSchema>
                                        </xsd:appinfo>
                                    </xsd:annotation>
                                </xsd:element>
                            </xsd:sequence>
                        </xsd:complexType>
                    </xsd:element>
                </xsd:schema> 
```

“First”字段遵循 Schema 1。所以反过来它有 2 个字段。我的需要是因为“第一”字段的出现次数为 4。我还想再应用一个条件。

条件：

```
 1.No Of occurrence of the "First" is 4.
    2\. As Schema 1 has drop down to select values "Heading" and "Title".
        I want to restrict that out of 4 occurrence of "First", 
        Heading can occur Maximum  2 times and Title can occur maximum of 2 two times. 
```

任何人都可以帮助如何实现这一目标。

# javascript - 以正确的格式获取 html 源代码

> ID：11048555
> 
> 赞同：0
> 
> 时间：2012-06-15T10:01:46.647
> 
> 标签：javascript, jquery, html, browser, tags

我有一个通过 javascript 动态生成的网页，当我尝试使用`$("html").html()`. 我得到了一切，这很好。唯一的问题是诸如`<link />, <input />, <img />, <br />` 未按我想要的那样显示的空标签。

我希望它们以正确关闭的格式显示，如下所示 -

```
<input type="text" name="nm" /> 
```

但它们被显示为

```
<input type="text" name="nm"> 
```

即没有关闭

我想在这个字符串的 java 中创建一个 html 对象，但我得到了一个异常，比如无效的 html。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T10:10:09.700

> 我希望它们以正确关闭的格式显示，如下所示

这只是 XHTML 中的“正确”。它只是在 HTML 中被容忍。如果您在*正确提供*的、真正的 XHTML 文档中执行此操作，则浏览器*应该*返回有效的 XML。（它可能没有，但它应该。）如果您使用 XHTML 标签汤（将 XHTML 作为 服务`text/html`）或使用任何形式的 HTML（HTML4 严格，HTML4 过渡，HTML5，根本没有 doctype），浏览器*应该*返回HTML（没有多余的固线）。更多：[http ://www.w3.org/TR/html5/embedded-content-0.html#dom-innerhtml](http://www.w3.org/TR/html5/embedded-content-0.html#dom-innerhtml)

无论如何，这取决于浏览器，而不是 jQuery。据我所知，您不能要求特定的变体（除了指定您的文档类型并使用正确的内容类型提供服务，这对于今天的浏览器来说可能仍然不够）。

# asp.net-mvc-3 - 如何验证 asp.net mvc3 中的空查询字符串参数

> ID：11048558
> 
> 赞同：2
> 
> 时间：2012-06-15T10:01:57.057
> 
> 标签：asp.net-mvc-3

我想验证 url 中的空 Id 值。

> ../Task/EditEmployee/afccb22a-7cfd-4be5-8f82-9bd353c13b16

如果 Id 为空，我想要那个

> ../任务/EditEmployee/

比将用户重定向到某个页面。

```
public ActionResult EditEmployee(Guid Id)

{

//Some code in here

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T10:06:19.967

它可能不是最好的解决方案，但您可以将 id 参数作为字符串并尝试像这样解析它：

```
public ActionResult EditEmployee(string id)
{
    if(string.IsNullOrWhiteSpace(id))
    {
        // handle empty querystring
    }
    else
    {
        Guid guid;
        if (Guid.TryParse(id, out guid))
        {
            //Some code in here
        }
    }
} 
```

**或者**

您还可以在路由上创建正则表达式约束，但这可能太复杂且难以理解。在默认路由之前映射此路由。

```
routes.MapRoute(
    "TastEditEmployee",
    "Task/EditEmployee/{id}",
    new { controller = "Task", action = "EditEmployee" },
    new { id = @"^(\{{0,1}([0-9a-fA-F]){8}-([0-9a-fA-F]){4}-([0-9a-fA-F]){4}-([0-9a-fA-F]){4}-([0-9a-fA-F]){12}\}{0,1})$" } 
); 
```

然后你可以使用 id 参数作为 Nullable Guid。

```
public ActionResult EditEmployee(Guid? id)
{
    //do something
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T10:08:48.773

因为是一个结构体，所以如果它被省略，它`Guid`的值`Id`将会是。`Guid.Empty`你可以检查一下。

```
public ActionResult EditEmployee(Guid Id)
{
   if (Id == Guid.Empty) throw new ArgumentException("Id not specified.");
} 
```

# php - 搜索多列，就好像它是mysql中的一列

> ID：11048569
> 
> 赞同：1
> 
> 时间：2012-06-15T10:03:00.257
> 
> 标签：php, mysql

我有一个表，将电子邮件存储在 3 个不同的列名称主机和域中。我想加入这些列以创建一个列，以便我可以通过完整的电子邮件地址进行搜索。就像

```
SELECT * FROM email_eml WHERE (all the columns combined) = $email; 
```

电子邮件存储时没有 . 和两个列中的 @ 我希望最终结果包含这些。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T10:04:23.617

```
SELECT * FROM email_eml WHERE CONCAT( name, '@', host, '.', domain ) = $email 
```

请参阅 CONCAT 函数的文档（假设您使用的是 MySQL）：http: [//dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_concat](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_concat)

然而：

1.  不要使用`*`. 这对性能来说很糟糕。
2.  我当然希望您的`$email`变量被转义并且没有 SQL 注入风险。如果不是，请使用准备好的语句。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T10:13:50.027

为了让 MySQL 使用索引（您确实索引了这些列，不是吗？），我宁愿拆分您输入的电子邮件地址，然后分别搜索每个字段，即：

```
SELECT CONCAT(name, '@', host, '.', domain) AS email
WHERE name = 'user' AND host = 'mysite' AND domain = 'com' 
```

您真的需要在数据库中将三个电子邮件地址组件分开吗？否则，只需存储完整的电子邮件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T10:04:47.877

```
SELECT * FROM email_eml WHERE name+'@'+host+'.'+domain = '$email'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T10:06:01.693

您可以使用该`CONCAT()` [功能](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_concat)。
那么您的请求将是：

```
SELECT * FROM email_eml WHERE CONCAT(name,'@',host,'.',domain) = $email 
```

# javascript - 光标描述文本框

> ID：11048574
> 
> 赞同：0
> 
> 时间：2012-06-15T10:03:20.953
> 
> 标签：javascript, css, hover

当悬停在 HTML 对象上时，我进行了很多搜索，但找不到在光标旁边创建小文本框的方法。

[示例 http://guyzyl.org/wp/Picture1.png](http://guyzyl.org/wp/Picture1.png)

您可以看到在此示例中光标不可见，但文本框出现在悬停时。我想创造一些类似的东西。

示例取自 Facebook。

谢谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T10:05:51.557

`title`可以在将属性添加到它们的标签上获得工具提示，例如：

```
<a href="#" title="my tooltip">my link</a> 
```

可以使用 javascript 获得更漂亮的工具提示，但以上是正确的语义选项（许多工具提示插件都希望它在您的代码中）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T10:13:02.543

用这个 ：

```
 <img title="my tooltip" src="" alt=""/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T10:09:19.217

它被称为工具提示。例如这样写：

```
<div class="parent">
 <p>create group</p>
 <div class="tooltip">tooltip</div>
</div> 
```

CSS

```
.tooltip{
 display:none;
}
.parent:hover .tooltip{display:block;} 
```

检查这个[http://jsfiddle.net/zDLzF/](http://jsfiddle.net/zDLzF/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T10:11:12.593

有许多花哨的工具提示可用。有史以来最简单的 jQuery 工具提示 - [http://cssglobe.com/post/1695/easyest-tooltip-and-image-preview-using-jquery](http://cssglobe.com/post/1695/easiest-tooltip-and-image-preview-using-jquery)

# javascript - jQuery.text() - 如何在不影响任何子元素的情况下更改标签文本

> ID：11048575
> 
> 赞同：2
> 
> 时间：2012-06-15T10:03:29.003
> 
> 标签：javascript, jquery, var

我正在编写一个小的 jQuery 插件来允许内联编辑（出于我的目的，我想要一个非常小的轻量级自定义插件）。一切都很好，除了当我用新值更新原始标签时，它会删除用于发起编辑的编辑图像，因此不允许进一步的编辑。

我尝试了以下操作，替换了编辑图像，但编辑图像不再具有`click`与之关联的处理程序。

html看起来有点像这样

```
<h2 class="inlineEdit">Thing to edit<a href='' class='pencil_edit_image'></a></h2> 
```

javascript看起来像：

```
var editThis = $(".inlineEdit");

var existinglink = editThis.find(".pencil_edit_image");
editThis.text($(this).val());
editThis.append(existinglink); 
```

我怎样才能最好地做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T10:07:44.593

您是否尝试在更换之前将其拆下？

```
var existinglink = editThis.find(".pencil_edit_image");
existingLink.detach();
editThis.text($(this).val());
editThis.append(existinglink); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T10:10:41.610

jQuery 不支持文本节点，所以最简单的方法是将文本放在一个元素中，以便您可以轻松访问它：

```
<h2 class="inlineEdit"><span class="editable">Thing to edit></span><a href='' class='pencil_edit_image'></a></h2>

 $(".inlineEdit .editable").text($(this).val()); 
```

要在不添加额外元素的情况下访问文本节点，可以使用 DOM 元素：

```
 $(".inlineEdit")[0].firstChild.innerHTML = $(this).val(); 
```

# ruby - Ruby setter 不适用于 eval

> ID：11048577
> 
> 赞同：0
> 
> 时间：2012-06-15T10:03:38.470
> 
> 标签：ruby, eval, setter

我`eval()`在一个`initialize`方法中使用：

```
class ActiveRecord::FakedModel

  def initialize(attributes={})
    attributes = {} if not attributes

    attributes.each do |attr_name, value|
      eval("@#{attr_name}=#{value.inspect}")
    end

    @attributes = attributes
  end
...
end 
```

并有一个用于清理空格的设置器：

```
class ContactForm < ActiveRecord::FakedModel
  attr_accessor :plz

  def plz=(plz)
    @plz = plz.try(:delete,' ')
  end
...
end 
```

但是当我在哈希中给出“plz”时，这个设置器不起作用：

```
c=ContactForm.new(:plz=>' 1  3 3 3 ')
=> #<ContactForm:0x1024e3a10 @attributes={:plz=>" 1  3 3 3 "}, @plz=" 1  3 3 3 "> 
```

在中使用设置器有什么问题`eval`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T10:08:07.173

您的 eval 语句没有调用 setter 方法，而是直接设置实例变量。如果您希望构造函数使用 setter，请使用[send](http://ruby-doc.org/core-1.9.3/Object.html#method-i-send)：

```
attributes.each do |attr_name, value|
  send "#{attr_name}=", value
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T10:06:44.583

使用 [Object#instance_variable_set](http://apidock.com/ruby/Object/instance_variable_set)方法设置实例变量。

```
attributes.each do |attr_name, value|
  self.instance_variable_set("@#{attr_name}", value.inspect)
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T10:10:40.880

要动态执行方法，请使用[`Object#send`](http://ruby-doc.org/core-1.9.3/Object.html#method-i-send).

```
class ActiveRecord::FakedModel

  def initialize(attributes={})
    attributes = {} if not attributes

    attributes.each do |attr_name, value|
      send("#{attr_name}=", value)
    end

    @attributes = attributes
  end

end 
```

您还可以获得不需要调用检查并强制转换为变量字符串的优势。

您也可以使用[`Object#instance_variable_set`](http://ruby-doc.org/core-1.9.3/Object.html#method-i-instance_variable_set)，但在这种情况下，您将绕过 setter 方法，并且如果您在 setter 中有一些自定义逻辑，例如强制转换，则代码将无法按预期工作。

```
class ActiveRecord::FakedModel

  def initialize(attributes={})
    attributes = {} if not attributes

    attributes.each do |attr_name, value|
      instance_variable_set("@#{attr_name}", value)
    end

    @attributes = attributes
  end

end 
```

# java - 检查给定路径上是否存在任何 Zip 文件

> ID：11048579
> 
> 赞同：2
> 
> 时间：2012-06-15T10:03:39.893
> 
> 标签：java, regex, zip

我想检查指定路径上是否存在任何 Zip 文件。如果存在，那么我想在同一路径上提取该文件。

如何检查给定路径上是否存在任何 Zip 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T10:06:29.843

您可以尝试使用此代码检查目录中文件的扩展名，并在存在 Zip 文件时打印文件名。

```
 public static void main(String[] args) 
{

  // Directory path here
  String path = "."; 

  String files;
  File folder = new File(path);
  File[] listOfFiles = folder.listFiles(); 

  for (int i = 0; i < listOfFiles.length; i++) 
  {

   if (listOfFiles[i].isFile()) 
   {
   files = listOfFiles[i].getName();
       if (files.endsWith(".rar") || files.endsWith(".zip"))
       {
          System.out.println(files);
        }
     }
  }
} 
```

如果你想`FilenameFilter`按照 Andrew Thompson 的说法使用，而不是那样。

你可以在你的类中实现 FilenameFilter。[此链接](http://www.java-samples.com/showtutorial.php?tutorialid=384)提供了更多帮助。这样你就不需要检查文件的扩展名了。它只会给你那些扩展名作为参数传递的文件。

要提取 zip 文件（如果找到），您可以借助该`ZipInputStream` 包。您可以在[这里查看](http://www.java-tips.org/java-se-tips/java.util.zip/how-to-extract-file-files-from-a-zip-file-3.html)以提取文件夹。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T10:05:25.093

> 如何检查给定路径上是否存在任何 Zip 文件？

看[`File.exists()`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#exists%28%29)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T11:14:35.980

这将解压缩目录中的所有文件，但很容易修改为仅解压缩特定文件。

```
package com.wedgeless.stackoverflow;

import java.io.*;
import java.util.Enumeration;
import java.util.zip.ZipEntry;
import java.util.zip.ZipFile;

/**
 * Unzips all zip files in a directory
 * @author mk
 */
public final class Unzipper
{
  public static final String DOT_ZIP = ".ZIP";
  public static final FilenameFilter DOT_ZIP_FILTER = new FilenameFilter()
  {
    @Override
    public boolean accept(File dir, String name)
    {
      return name.toUpperCase().endsWith(DOT_ZIP);
    }
  };

  public static void main(String[] args)
  {
    File dir = new File("/path/to/dir");
    Unzipper unzipper = new Unzipper();
    unzipper.unzipDir(dir);
  }

  public void unzipDir(File dir)
  {
    for (File file : dir.listFiles(DOT_ZIP_FILTER))
    {
      unzip(file);
    }
  }

  protected void unzip(File file)
  {
    File dir = getZipDir(file);
    try
    {
      dir.mkdirs();
      ZipFile zip = new ZipFile(file);
      Enumeration<? extends ZipEntry> zipEntries = zip.entries();
      while (zipEntries.hasMoreElements())
      {
        ZipEntry zipEntry = zipEntries.nextElement();
        File outputFile = new File(dir, zipEntry.getName());
        outputFile.getParentFile().mkdirs();
        if (!zipEntry.isDirectory())
        {
          write(zip, zipEntry, outputFile);
        }
      }
    }
    catch (IOException e)
    {
      dir.delete();
    }
  }

  protected void write(ZipFile zip, ZipEntry zipEntry, File outputFile)
    throws IOException
  {
    final BufferedInputStream input = new BufferedInputStream(zip.getInputStream(zipEntry));
    final int buffsize = 1024;
    final byte buffer[] = new byte[buffsize];
    final BufferedOutputStream output = new BufferedOutputStream(new FileOutputStream(outputFile), buffsize);
    try
    {
      while (input.available() > 0)
      {
        input.read(buffer, 0, buffsize);
        output.write(buffer, 0, buffsize);
      }
    }
    finally
    {
      output.flush();
      output.close();
      input.close();
    }
  }

  protected File getZipDir(File zip)
  {
    File dir = zip.getParentFile();

    int index = zip.getName().toUpperCase().lastIndexOf(DOT_ZIP);
    String zipPath = zip.getName().substring(0, index);
    File zipDir = new File(dir, zipPath);
    return zipDir;
  }
} 
```

在极少数情况下，当您在非标准情况下获得带有扩展名的 zip 文件时，也不会感到困惑，例如`file.ZIP`

**编辑：**我想我应该更仔细地阅读这个问题。您只问如何识别路径上是否存在 zip 文件，而不是如何提取它。只需使用 FilenameFilter 方法......如果你得到任何命中返回 true，否则返回 false。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T10:07:42.120

获取一个文件变量并遍历director 中的所有文件并检查.zip 或.tar.gz 或.rar [如何在Java 中迭代某个目录的文件？](https://stackoverflow.com/questions/4917326/how-to-iterate-over-the-files-of-a-certain-directory-in-java)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T10:13:15.647

测试您想要使用的*任何*资源的可用性的最佳方法就是*尝试使用它。*任何其他技术都容易受到时序窗口问题、对您试图预测未来的批评、双重编码等的影响。等等。只要抓住`FileNotFoundException`当您尝试打开它时发生的事情。无论如何你必须抓住它，为什么要写两次相同的代码？

# jquery - JS-jQuery：jScrollPane 如何定位 stopDrag 事件？

> ID：11048581
> 
> 赞同：0
> 
> 时间：2012-06-15T10:03:50.797
> 
> 标签：jquery, jscrollpane, drag

我以这种方式使用 Kevin Luck 的 jScrollPane jQuery 插件： [使用 jScrollPane 将滚动条设置为看起来像 Facebook ScrollableArea](http://takien.com/980/styling-scrollbar-to-look-like-facebook-scrollablearea-using-jscrollpane.php)

这样我就能得到和 FB 一样的效果。一切正常，除了当我拖动手柄并移出窗格时，滚动条消失。

问题出在mouseleave事件中，离开时应该隐藏句柄......

```
$('.jspDrag').hide();
$('.jspScrollable').mouseenter(function(){
    $(this).find('.jspDrag').stop(true, true).fadeIn('slow');
});
$('.jspScrollable').mouseleave(function(){
    $(this).find('.jspDrag').stop(true, true).fadeOut('slow');
}); 
```

所以我这样做了：

```
$('.jspScrollable').mouseleave(function(){
    var $el = $(this).find('.jspDrag');
    if($el.hasClass('jspActive')) return;
    $el.stop(true, true).fadeOut('slow');
}); 
```

这将防止在拖动时隐藏手柄，问题是，在我停止拖动后它不会消失......

如何针对句柄定位 stopDrag 事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T10:33:11.780

好的，我自己做了。我不知道这是否是最好的解决方案，但它有效

```
$('.jspScrollable').mouseleave(function(){
    var $el = $(this).find('.jspDrag');
    $('html').bind('mouseup.jsp', function(){
        $el.hide();
    });
    if($el.hasClass('jspActive')) return;
    $el.stop(true, true).fadeOut('slow');
}); 
```

# javascript - 调用 fb.login() 函数后，android webview 冻结

> ID：11048582
> 
> 赞同：0
> 
> 时间：2012-06-15T10:03:51.200
> 
> 标签：javascript, android, facebook

我有一个导入 facebook javascript sdk 的网页。

当我尝试从网络访问此网页时，没有发生错误并且 facebook 登录过程

顺利完成。但是，当我尝试从 android webview 使用 FB.login 功能时，

登录页面后，webview 冻结。好像将我的 ID 和密码信息发送到 Facebook 可以

毫无问题地完成。

但问题是我从来没有从 facebook 得到回复。

![在此处输入图像描述](../Images/4194f1edb5a47f7a35991d34c8d735a9.png)

以下是点击登录按钮后来自 android logcat 的日志。

![在此处输入图像描述](../Images/dd1f8acb4ae61c335a6e4af4ff7d3e73.png)

根据日志，facebook 收到了我的请求，但似乎没有发送任何响应。

有没有人尝试使用来自 android webview 的 javascript sdk 访问网页？

有没有人和我遇到同样的问题？你们是怎么处理的？

android webview中的javascript sdk登录过程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T16:00:39.183

我也有同样的问题！在 Facebook 网站上发现了一个错误报告，但那里没有任何响应……找到解决方案了吗？

目前，我唯一的解决方案似乎是使用 Php Facebook SDK 处理它并使用相同的窗口（我认为在尝试自动关闭登录选项卡时会出现问题......）

# sql - 在 php.ini 中加载 sqlsrv 驱动程序

> ID：11048593
> 
> 赞同：1
> 
> 时间：2012-06-15T10:04:52.030
> 
> 标签：sql, sql-server, configuration, php

我得到了 php5.4.4 并且我已经下载了用于使用 microsoft SQL 的 sqlsrv 驱动程序将 dll 放在 php 的 ext 文件夹和 php.ini 中

```
;;;;;;;;;;;;;;;;;;;;;;;;
; Microsoft SQL Server ;
;;;;;;;;;;;;;;;;;;;;;;;;

extension=php_sqlsrv_54_nts.dll
sqlsrv.LogSubsystems=-1
sqlsrv.LogSeverity=-1
sqlsev.WarningsReturnAsErrors=0 
```

但是在加载时

> phpinfo()

扩展名不显示。

我在这里做错了吗？！

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-02-02T13:47:17.850

extension=php_sqlsrv_54_nts.dll 应在 [ExtensionList] 部分，其余参数应在 [sqlsrv] 中：

```
(...)

[ExtensionList]
(...)
extension=php_sqlsrv_54_nts.dll

(...)

[sqlsrv]
sqlsrv.LogSubsystems=-1
sqlsrv.LogSeverity=-1
sqlsev.WarningsReturnAsErrors=0

(...) 
```

# html - 带有表格嵌套的 HTML 电子邮件

> ID：11048594
> 
> 赞同：0
> 
> 时间：2012-06-15T10:04:56.970
> 
> 标签：html, html-table, nested, html-email

我正在编写一些 html 代码来制作 html 电子邮件。我做了一些研究，发现使用老式 html，例如表格等是最好的方法。

在您对以前的问题提供了所有帮助之后（谢谢！）我开始研究其余部分并使布局在移动设备上易于阅读，这就是我现在所拥有的；

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="initial-scale=1.0">
<meta name="format-detection" content="telephone=yes">
    <style>
    body { margin:0; padding:0; width:100% !important; overflow-y:scroll; background-image: url(background.png); background-repeat: repeat-x; background-color: #dbdadb; -webkit-text-size-adjust:100%; -ms-text-size-adjust:100%;}
    p { margin:0 0 10px 26px; line-height:1.2; width:320px;  font-size:0.9em;}
    .contact {margin-left:5px; margin-top:15px; width:170px; font-size:0.9em; text-align:center;}
    h1 { margin:0 0 10px 26px; line-height:1.2; width:320px;  font-size:1.1em; font-weight:normal;}
    img {outline:none; text-decoration:none; -ms-interpolation-mode: bicubic; display:block;}
    a img {border:none;}
    .headerwrapper {width:600px; background-color: #000000; margin:0px; padding:0px;}
    .header {text-align:center;}
    .wrapper {width:600px; background-color: #dbdadb; align:center;}
    .fixedwidth {width:600px !important;}
    .content {width:340px;}
    .icons {width:260px;}
    .devices {width:600px; height:310px;}
    .miniwrapper {width:600px;}
    .footer { background-image: url(http://i49.tinypic.com/54f2ac.png); text-align:center; line-height:1.2; width:320px;  font-size:0.9em;}
    .footermobile {display:none;}
    .actiemobile {display:none;}
    .iconwrapper {margin:0; line-height:1.2; font-size:0.9em;}
    .iconwrapper p {margin-left: 0px; margin-bottom:10px;}
    .headermobile {display:none;}
    .devicesmobile {display:none;}

    @media all and (max-width: 400px) {
    body { margin:0; padding:0; width:100% !important; overflow-y:scroll; background-image: url(background.png); background-repeat: repeat-x; background-color: #dbdadb;}
    p { margin:0 0 10px 26px; line-height:1.2; width:350px;  font-size:0.9em;}
    .contactmobile {margin-left:50%; margin-top:15px; width:170px; font-size:1.1em; text-align:center; line-height:1.2em;}
    h1 { margin:0 0 10px 26px; line-height:1.2; width:320px;  font-size:1.1em; font-weight:normal;}
    .headerwrapper {width:320px; background-color: #000000; margin:0px; padding:0px;}
    .header {display:none;}
    .wrapper {width:100%; background-color: #dbdadb; align:center;}
    .fixedwidth {width:100% !important;}
    .content {width:320px; display:block;}
    .icons {width:260px; display:block;}
    .devices {display:none;}
    .miniwrapper {width:100%;}
    .footer {display:none;}
    .actie {display:none;}
    .footermobile {display:block; background-image: url(footermobile.png); text-align:center; line-height:1.2; width:320px; height:164px; font-size:0.9em;}
    .actiemobile {display:block;}
    .headermobile {display:block; text-align:center;}
    .devicesmobile {display:block;}
    }

    /* Client-specific Styles */
    #outlook a {padding:0;} /* Force Outlook to provide a "view in browser" menu link. */
    .ExternalClass {width:100%;} /* Force Hotmail to display emails at full width */  
    .ExternalClass, .ExternalClass p, .ExternalClass span, .ExternalClass font, .ExternalClass td, .ExternalClass div {line-height: 100%;} /* Force Hotmail to display normal line  spacing. */ 
    #backgroundTable {margin:0; padding:0; width:100% !important; line-height: 100% !important;}
    /* End reset */
    </style>
    <title>email template</title>
</head>
<body>
    <table class="wrapper" width="100%" align="center" border="0" cellpadding="0" cellspacing="0" margin="0">
        <tbody class="headerwrapper">
                <tr class="header">
                    <td class="fixedwidth" colspan="2">
                        <img src="logo.png" border="0">
                    </td>
                </tr>
                <tr class="devices" style="width:600px; height:300px;">
                    <td colspan="2">    
                        <img src="devices.png">
                    </td>
                </tr>   

                <tr class="headermobile">
                    <td class="fixedwidth" colspan="2">
                        <img src="logomobile.png" border="0">
                    </td>
                </tr>
                <tr class="devicesmobile">
                    <td colspan="2">    
                        <img src="devicesmobile.png">
                    </td>
                </tr>   

        </tbody>
        <tr class="miniwrapper">
            <tr class="fixedwidth">
                <td class="content" align="left">
                    <h1>Werkt u al met apps?</h1>

<p>Het ontwikkelen van applicaties, oftewel apps, is namelijk booming! Steeds meer merken en 
bedrijven zien het gemak van een app in. Het is de ideale optie voor het versterken van uw merk, zowel extern als intern, of het opzetten van een geheel nieuw product. Ook de enorme groei in gebruik van mobiele apparaten zorgt er voor dat een sterk merk niet meer kan achter blijven.</p>

<p>Mocht u geïnteresseerd zijn in onze service, 
van op maat gemaakte applicaties en backend oplossingen, neem dan gerust contact met ons op.
U bent van harte welkom voor een kop koffie bij ons in de mediaBunker, tijdens een verkennend gesprek of een demonstratie van de 
mogelijkheden van mediaBunker als bedrijf.</p>

<p>Alvast bedankt en hopelijk tot ziens.</p>
                    </p>
                </td>
                <td class="icons">
                    <table>
                        <tr>
                            <td colspan="2">
                                No matter what device.<br>
                                We build natively.
                            </td>
                        </tr>
                        <tr>
                        <tbody class="iconwrapper">
                            <tr text-align="center">
                                <td><img src="apple.png"></td>
                                <td><p>Apple iOS is the operating<br>
                                    system that powers the <br>
                                    iPhone,  iPad and iPod touch.</p>
                                </td>
                            </tr>
                            <tr>
                                <td><img src="android.png"></td>
                                <td><p>With partners like Google,<br>
HTC and Motorola, Android is <br>
the fastest growing mobile OS.</p>
</td>
                            </tr>
                            <tr>
                                <td><img src="windows.png"></td>
                                <td><p>Together Microsoft and Nokia<br>
support conventional users <br>
with Windows Phone.</p>
</td>
                            </tr>
                            <tr>
                                <td><img src="html5.png"></td>
                                <td><p>Looking for other platforms<br>
like BlackBerry, Samsung <br>
Bada or HTML5 & CSS3?<br>
We can build it!</p>
</td>
                            </tr>
                        </tbody>
                        </tr>
                    </table>        
                </td>
            </tr>
        </tr>
        <tr>
            <td class="actie" colspan="2">
                <img src="http://i47.tinypic.com/11qi7pw.png">
            </td>
            <td class="actiemobile" colspan="2">
                <img src="actiemobile.png">
            </td>
        </tr>
        <tr>
            <td class="footer" colspan="2">
            <table>
                <tr cellspace="0">
                    <td width="200px" text-align="center"><p class="contact">Suikersilo-West 23 <br> 1165 MP Halfweg</p></td>
                    <td width="200px" text-align="center"><p class="contact"><a href="tel:0031238200140">Tel +31 23 820 0140</a><br> <a href="mailto:info@mediabunker.com">info@mediabunker.com</a></p></td>
                    <td width="200px" text-align="center"><p class="contact"><a href="http://mediabunker.com">www.mediabunker.com</a><br> <a href="http://twitter.com/mediabunker">twitter.com/mediabunker</a></p></td>
                </tr>
            </table>
            </td>

            <td class="footermobile" colspan="2">
            <table>
                <tr cellspace="0">
                    <td width="200px" text-align="center">
                        <p class="contactmobile">
                            Suikersilo-West 23<br>
                            1165 MP Halfweg<br>
                            <a href="tel:0031238200140">Tel +31 23 820 0140</a><br>
                            <a href="mailto:info@mediabunker.com">info@mediabunker.com</a><br>
                            <a href="http://mediabunker.com">www.mediabunker.com</a><br>
                            <a href="http://twitter.com/mediabunker">twitter.com/mediabunker</a><br>                        
                        </p>
                    </td>
                </tr>
            </table>
            </td>
        </tr>
    </table>
</body>  

</html> 
```

我在使布局在移动设备上也能正常工作时遇到了一些麻烦。我想我想出了一个更好的解决方案，使用背景图像并将其他图像（设备、横幅等）放在上面。这可能会解决这个问题，对吧？

我还有另外两个问题；在移动设备上查看页面时，我无法让图标 td 进入内容下方。我认为显示块可以解决问题，但它没有......另外，当我添加图标表时，右边出现了这个奇怪的空间，它一定会以某种方式发生冲突，我该如何解决这个问题？

如果有帮助，这是我之前的问题；[HTML 电子邮件表格嵌套](https://stackoverflow.com/questions/11033558/html-email-table-nesting/11034804#comment14452254_11034804) 这是在线版本；[http://kellyvuijst.nl/email/email.html](http://kellyvuijst.nl/email/email.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T10:37:03.930

向左对齐（当`.icons` `td`视口宽度小于 400px 时），因为它没有`padding`or `margin`，而您的其他内容（`h1`, `p`）有 26px `margin-right`。

您可以通过将 26px`padding-left`应用于 .icons 来解决此问题。这将使左边缘`.icons`与它上面的内容对齐。

**错误 #2，尝试 2：**

查看您在评论中提供的演示链接后，我可以看到您描述的问题及其原因：您的内容比其包含元素更宽。

您已经为所有 320 像素的段落设置了一个明确的宽度，这使得`.iconwrapper`它比预期的更宽。我认为您不需要设置段落宽度，因此只需删除该 CSS 声明即可。

（在调试此类布局问题时，我的建议是使用 chrome 中的开发人员工具来检查您的 HTML 元素并查看 CSS 样式是如何应用的。我发现它确实有助于我可视化我的代码，并了解它如何影响布局.)

# visual-studio-2008 - 关于 VS 2008 编译器和 SCONS

> ID：11048600
> 
> 赞同：0
> 
> 时间：2012-06-15T10:05:15.710
> 
> 标签：visual-studio-2008, compiler-construction, scons

我有一个 64 位 Windows 操作系统，我使用 VS2008 编写程序。我注意到 bin 文件夹中有 3 个编译器：一个 amd64 、 x86_amd64 和一个在 bin 目录中（至少我认为它是！）。我使用 SCONS 来编译我的程序，当我使用`--tree=all`in scons 时，我可以看到它使用 amd64 编译器。我有一个 Intel i5 处理器，但我没有指定在 SCONS 中使用哪个编译器，那么为什么要使用它`amd64`？

据我了解，`x86_amd64`如果您在 32 位机器上并且想要编译 64 位程序，那么 amd64 是否用于 64 位程序，而不管 CPU 是什么？，如果是这样，那么目的是什么在`cl.exe`bin 目录中？，有人可以向我解释一下吗？

另外，有什么方法可以查看 VS2008 正在使用哪个编译器？我找不到任何信息。在构建日志中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T10:09:49.513

cl.exe 控制编译器和链接器。:) 在这里看到并学习：

[http://msdn.microsoft.com/en-us/library/9s7c9wdw%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/9s7c9wdw%28v=vs.80%29.aspx)

我知道它与 2k5 有关，但仍然相关。

尽管据我所知，你所说的一切都是正确的。

我相信您可以在 VS 的属性中看到 cl 的命令行选项。从那里我相信如果您从实际命令行运行该命令，您可以看到它向编译器和链接器发出的后续命令，此时您可以看到它使用的编译器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T10:47:44.880

如果你需要改变 SCons 使用的 C++ 编译器，你可以修改[这里](http://www.scons.org/doc/production/HTML/scons-user/a4916.html)`CXX`提到的构造变量。（我假设您使用的是 C++）

这是我如何为我的一个项目执行此操作的示例：

```
env.Replace(CXX  = '/app/gcc/4.3.4/bin/c++')
env.Replace(CPP  = '/app/gcc/4.3.4/bin/c++')
env.Replace(CC   = '/app/gcc/4.3.4/bin/gcc')
env.Replace(LINK = '/app/gcc/4.3.4/bin/c++') 
```

请注意，这些是 linux 路径，您必须为 Windows 相应地插入和格式化路径。这可以使用 python os.path.join() 函数轻松且可移植地完成，如下所示：

```
import os
thePath = os.path.join('c:', 'dir1', 'subdir') 
```

在这种情况下，thePath 应该是“C:\dir1\subdir”，所以如您所见，您不必担心正斜杠或反斜杠。

# wcf - WCF 服务启动需要 10 秒，具有 1000 个方法的大型服务合同

> ID：11048605
> 
> 赞同：1
> 
> 时间：2012-06-15T10:05:35.663
> 
> 标签：wcf, service, contract

我正在使用一个命名管道 WCF 服务，它有大约 1000 种方法（是的，我知道这不是一个好习惯，但它是生活......）。

我遇到的问题是，在启动 WCF 服务时，`ServiceHost`类的构造函数大约需要 10 秒。通过跟踪，我发现时间都花在了准备服务描述（类`InitializeDescription`方法`ServiceHostBase`）上。我猜是因为这个服务合同中定义的方法太多了。

**任何人都可以帮助回答我怎样才能加快这个大服务合同的启动时间？**

我知道在一个服务合同中定义这么多方法并不是一个好习惯。但我无法更改服务合同（例如将其分成几个较小的合同）。你知道，这才是真正的生活……

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T12:32:14.587

如果您正确管理流程，则重构此端点虽然不简单，但可能相当容易：

1.  选择您的端点当前支持的单个逻辑业务案例。
2.  创建完成这个单一逻辑业务操作所需的所有操作的列表。
3.  为这些操作创建一个新端点，保持相同的操作签名。
4.  将任何想要完成此业务案例的现有消费者重新指向新端点。
5.  重复过程，直到您涵盖所有业务案例。

很抱歉，这并没有直接解决原始问题，并且欣赏这种规模的重新工作可能超出了您当前开发的范围。

# api - CATIA-CAA CATIVisu

> ID：11048611
> 
> 赞同：0
> 
> 时间：2012-06-15T10:05:56.677
> 
> 标签：api, visual-c++, cad, catia, caa

您好我需要从 CATIA V5R18 零件文件中读取可视化详细信息的流程。

可视化细节1.顶点数
2.三角形
数 3.条形数
4.扇形数 5.
法线
数 6.Bouding Sphere Center and Radius

这些详细信息我使用 CAT3DRep/CATRep/CATSurfacicRep 从 .cgr 文件中获得了红色...但是对于 .CATPart 文件，我无法读取相同的内容。

从 .CATPart 在 CATIVisu 的帮助下，当我从 PartFeatures 查询时，我得到了 CAT3DBagRep 类型但是要获得可视化详细信息，我需要 CATSurfacicRep。

任何人都可以帮忙吗？
我应该查询的 Wat 接口以及我应该从哪里查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T11:11:14.727

好吧，有关网格的信息（三角形、条形、扇形等）仅由叶代表携带，例如 CAT3DSurfacicRep。

对于像 CATPart 或 CATProduct 这样的复杂文件，您有几何层次结构，还有一个 Reps 层次结构。CAT3DBagRep 是允许构建此层次结构的类，因为它有子 Reps（当然也可以是 CAT3DBagReps）。

一种解决方案可能是从您获得的根 CAT3DBagRep 递归探索此 Rep 层次结构。获取 CAT3DBagRep 的子代表的方法是：

```
list<CATRep> *GetChildren(); 
```

您可以沿着 Rep 树向下走，直到获得预期类型的​​ Rep，例如 CATSurfacicRep。根据您的型号，您可能会发现其中许多。

在检索网格坐标、法线和边界元素时，请注意它们是在本地 Rep 坐标中给出的。CAT3DBagRep 携带定位和方向信息（例如，在定位 CATProducts 时使用）。这由以下 CAT3DBagRep 方法返回：

```
const CAT4x4Matrix * GetMatrix() const; 
```

根据您的场景/模型，您可能需要考虑此定位信息。

# javascript - 如何通过java脚本编程生成html页面的pdf文件

> ID：11048614
> 
> 赞同：1
> 
> 时间：2012-06-15T10:06:13.150
> 
> 标签：javascript, jquery, html, mobile, jquery-mobile

在我的 html5 混合 iPad 应用程序中，我在其中一个页面中生成报告。我想要的是生成该报告的 PDF 文件并将其保存在 ipad 中。请帮助我。我为此使用 JavaScript 和移动 jQuery。![在此处输入图像描述](../Images/7a61a3f3e2488a1c7403dbc1872a9690.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T10:12:56.783

在客户端（通过 Javascript）执行此操作非常低效。您应该考虑在服务器端进行（使用 PHP、ASP/.NET 等）。PHP 为此使用了一个名为 iTextSharp 的服务，PHP 使用 DOMPDF。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T10:18:10.857

如果您想使用 Javascript，[http://html2canvas.hertzen.com/](http://html2canvas.hertzen.com/)是您会发现的最佳工具！它使用 DOM 样式生成图像。您唯一需要做的就是将其包装在 PDF 中。看看他们的例子！例如：

[http://html2canvas.hertzen.com/examples/artificial/index.html](http://html2canvas.hertzen.com/examples/artificial/index.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T10:12:05.313

您可以使用开源库来生成 PDF 文档，我已经使用过这个库并且工作正常： [http ://code.google.com/p/jspdf/](http://code.google.com/p/jspdf/)

试试吧，我希望这是你想要的

# c++ - C++ 中的致命错误 LNK1120

> ID：11048615
> 
> 赞同：-1
> 
> 时间：2012-06-15T10:06:17.330
> 
> 标签：c++

那是我用 C++ (OOP) 编写的程序：

```
#include <iostream>
#include <string>

using namespace std;

class  book {
    string name,gvari;
    double cost;
    int year;

    public:
        book(){};

        book(string a, string b, double c, int d) { a=name;b=gvari;c=cost;d=year; }
        ~book() {}
        double setprice(double a) { return a=cost; }
        friend ostream& operator <<(ostream& , book&);
        void printbook(){
            cout<<"wignis saxeli "<<name<<endl;
            cout<<"wignis avtori "<<gvari<<endl;
            cout<<"girebuleba "<<cost<<endl;
            cout<<"weli "<<year<<endl;
        }
};

ostream& operator <<(ostream& out, book& a){
    out<<"wignis saxeli "<<a.name<<endl;
    out<<"wignis avtori "<<a.gvari<<endl;
    out<<"girebuleba "<<a.cost<<endl;
    out<<"weli "<<a.year<<endl;
    return out;
}

class library_card : public book {
    string nomeri;
    int raod;

    public:
        library_card(){};
        library_card( string a, int b){a=nomeri;b=raod;}
        ~library_card();
        void printcard(){
            cout<<"katalogis nomeri "<<nomeri<<endl;
            cout<<"gacemis raodenoba "<<raod<<endl;
        }
        friend ostream& operator <<(ostream& , library_card&);
};

ostream& operator <<(ostream& out, library_card& b) {
    out<<"katalogis nomeri "<<b.nomeri<<endl;
    out<<"gacemis raodenoba "<<b.raod<<endl;
    return out;
}

int main() {
    book A("robizon kruno","giorgi",15,1992);
    library_card B("910CPP",123);
    cout<<A;
    cout<<B;
    A.setprice(15);
    cout<<B;

    system("pause");
    return 0;
}

//P.S.
//B.printcard();
//A.printbook();
// As I've overloaded the "<<" operators, I've removed these two lines and put "cout<<A" "cout<<B". I hope, I'm right. By the way, error isn't related to these ones. 
```

这是错误，它可能会对您有所帮助：

```
1>Neyw.obj : error LNK2019: unresolved external symbol "public: __thiscall library_card::~library_card(void)" (??1library_card@@QAE@XZ) referenced in function _main
1>c:\users\geo\documents\visual studio 2010\Projects\Newww\Debug\Newww.exe : fatal error LNK1120: 1 unresolved externals

1>Build FAILED. 
```

问题是我无法弄清楚代码有什么问题。有两个类，主要`book`的 . 和后继类`library_card`. 为什么它给我这样的错误？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T10:08:23.007

代替

```
~library_card(); 
```

和

```
~library_card() {} 
```

您还没有实现析构函数，这正是您的链接器所说的。

或者，如果你不知道为什么需要这个析构函数，你也可以删除这个字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T10:09:54.853

没有函数体`~library_card();`。只需删除该析构函数或填充它，无论您喜欢什么。

当您在那里时，请阅读有关[虚拟析构函数](http://www.parashift.com/c++-faq-lite/virtual-functions.html#faq-20.7)的内容，并考虑您的类是否需要它们。

# php - 如何从准备好的语句中获取 assoc 数组中的所有内容？

> ID：11048622
> 
> 赞同：24
> 
> 时间：2012-06-15T10:06:34.383
> 
> 标签：php, mysqli

我正在尝试这段代码：

```
 if ($result = $this->mysqli->prepare("SELECT * FROM `mytable` WHERE `rows1`=?"))
    {

        $result->bind_param("i",$id);
        $result->execute();
        while ($data = $result->fetch_assoc())
        {

            $statistic[] = $data;

        }

        echo "<pre>";
        var_dump($statistic);
        echo "</pre>";
    } 
```

但它抛出以下错误

> [2012 年 6 月 15 日星期五 12:13:11] [错误] [客户端 127.0.0.1] PHP 致命错误：调用 [myfile.php] 中未定义的方法 mysqli_stmt::fetch_assoc()

而且我也试过：

```
if ($result = $this->mysqli->prepare("SELECT * FROM `mytable` WHERE `rows1`=?"))
    {

        $result->bind_param("i",$id);
        $rows = $result->execute();
        while ($data = $rows->fetch_assoc())
        {

            $statistic[] = $data;

        }

        echo "<pre>";
        var_dump($statistic);
        echo "</pre>";
    } 
```

这使得：

> [Fri Jun 15 12:22:59 2012] [error] [client 127.0.0.1] PHP 致命错误：在 [myfile.php] 中的非对象上调用成员函数 fetch_assoc()

我还能做些什么来获得结果或我做错了什么？我需要来自 DB 的 assoc 数组看起来像`$data[0]["id"] = 1`

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-15T10:09:31.190

事实上你*可以*很容易地做到这一点，你不能用[`mysqli_stmt`](http://php.net/mysqli-stmt)对象做到这一点，你必须提取底层[`mysqli_result`](http://php.net/mysqli-result)，你可以通过简单地调用来做到这一点[`mysqli_stmt::get_result()`](http://php.net/mysqli-stmt.get-result)。注意：这需要 mysqlnd (MySQL Native Driver) 扩展，它可能并不总是可用。

然而，下面关于推荐 PDO 而不是 MySQLi 的观点仍然存在，这就是一个很好的例子：MySQLi 用户空间 API 没有意义。我花了几年间歇性地使用 MySQLi 来发现上述机制。现在，我承认将语句和结果集概念分开确实是有道理的，但是在那种情况下，为什么语句有`fetch()`方法呢？深思熟虑（如果您仍然坐在 MySQLi 和 PDO 之间的栅栏上）。

为了完整起见，这是一个基于（松散地）问题中原始代码的代码示例：

```
// Create a statement
$query = "
    SELECT *
    FROM `mytable`
    WHERE `rows1` = ?
";
$stmt = $this->mysqli->prepare($query);

// Bind params and execute
$stmt->bind_param("i", $id);

// Extract result set and loop rows
$result = $stmt->get_result();
while ($data = $result->fetch_assoc())
{
    $statistic[] = $data;
}

// Proof that it's working
echo "<pre>";
var_dump($statistic);
echo "</pre>"; 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-12-20T18:20:54.147

你可以做：

```
$stmt = $this->mysqli->prepare("SELECT * FROM `mytable` WHERE `rows1`=?");
$stmt->bind_param("i",$id);
$stmt->execute();
$result = $stmt->get_result();
$statistic = $result->fetch_all(MYSQLI_ASSOC); 
```

`$statistic`包含二维数组中的所有结果。

*需要注意的是，此`mysqli_fetch_all()`功能仅适用于`mysqlnd`包。 [http://php.net/manual/en/mysqli-result.fetch-all.php](http://php.net/manual/en/mysqli-result.fetch-all.php)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-11-02T17:58:06.793

我不喜欢 Mysqli，但你可以在准备时这样做。

```
mysqli_report(MYSQLI_REPORT_ERROR | MYSQLI_REPORT_STRICT);
$db = new mysqli('hostAddress', 'username', 'password', 'databaseName');
$db->set_charset('utf8mb4');

$userID = 2;

$stmt = $db->prepare("SELECT * FROM users WHERE ID = ?");
$stmt->bind_param("i", $userID);

// because the variable is bound by reference you can assign the value after binding, too
//$userID = 2;

$stmt->execute(); 
```

如果你想要结果；

```
$result = $stmt->get_result();
$user   = $result->fetch_array(MYSQLI_ASSOC); //one row 
```

或多行

```
$users  = $result->fetch_all(MYSQLI_ASSOC); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-21T08:26:22.757

使用准备好的语句，您不需要数组，但您可以自由使用它。使用 mysqli_stmt 的 bind_result 方法，你不会有任何麻烦。在 bind_result 中，您定义了变量，列的值应该按照您从数据库中请求它们的顺序存储。您可以使用本机变量或数组键来执行此操作。见[php 文档 mysqli_stmt::bind_result](https://www.php.net/manual/en/mysqli-stmt.bind-result.php)

你问你的代码有什么问题是滥用 $result->execute。$result->execute() 返回一个布尔值，而不是您期望的实例 mysqli_result。请参阅[php 文档 mysqli_stmt::execute](https://www.php.net/manual/en/mysqli-stmt.execute.php)

假设您的数据库表 `mytable` 具有以下列：id (int), field1 (varchar), field2 (date)

然后代码将如下所示：

```
// Initialize the array with some default values if you really want to use an array
$data = array('id'=>0,'field1'=>'','field2'=>'');
/* I recommend to explicitly define which columns you want to retrieve so you don't have to rely that the columns in the database are set in the desired order and on otherhand it doesn't matter if the database table has more columns that you want to retrieve, the code will still work as long as the columns with this names exist.*/
if ($result = $this->mysqli->prepare("SELECT `id`,`field1`,`field2` FROM `mytable` WHERE `rows1`=?"))
    {

        $result->bind_param("i",$id);
        $result->bind_result("iss", $data['id'], $data['field1'], $data['field2']);
        $result->execute();
        while($result->fetch())
        {

            $statistic[] = $data;

        }

        echo "<pre>";
        var_dump($statistic);
        echo "</pre>";
    } 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-15T10:25:23.797

方法 execute() 返回 TRUE 或 FALSE 而不是结果集，因此不能使用 fetch_assoc 方法，因为它不存在于布尔值中。你需要的是

```
mysqli_fetch_assoc($result); //Use in association with query(); 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-06-15T10:13:42.317

没有尝试过，但使用以下内容更改您的 while 循环条件并再次测试

`$data = $result->fetch()`

谢谢

# c# - 带有 XPath 的 SelectNodes 忽略节点名称中的大小写

> ID：11048628
> 
> 赞同：4
> 
> 时间：2012-06-15T10:06:47.563
> 
> 标签：c#, xml, xpath, case-insensitive, selectsinglenode

我有一个类似于[SelectNodes with XPath ignoring case](https://stackoverflow.com/questions/9804281/selectnodes-with-xpath-ignoring-cases)的问题，但在我的情况下，大写/小写问题出现在名称为“应用程序”的节点中（有时是“应用程序”，有时是“应用程序”）。

我将如何应用其他帖子的解决方案？还是在这种情况下适用不同的？

xml:

```
<?xml version="1.0" encoding="utf-16" ?>
<application>
  <forms>
    <action type="update">
      <form uid="" >
      </form>
    </action>
  </forms>
</application> 
```

在 C# 3.5 中：

```
XmlNode nodex= oXMLDoc1.SelectSingleNode("Application/forms/action/form/@uid")
nodex.Value="UniqueIDx";//nodex is null :S 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-06-18T14:59:13.937

我们可以将 xml 和我们的变量转换为小写。

```
string value = "aBc";
XmlNode xmlnode = xmldoc.SelectSingleNode(string.Format("/some/path/add[translate(@key, 'ABCDEFGHIJKLMNOPQRSTUVWXYZ', 'abcdefghijklmnopqrstuvwxyz') = '{0}']", value.ToLower())); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-15T12:05:31.610

**只需使用**：

```
*[translate(name(), 'APPLICATION', 'application')='application']
     /forms/action/form/@uid 
```

当当前（初始上下文）节点有一个具有名称的子节点（即字符串“application”的*任何大写形式）时，这将在所有情况下正确选择所需属性。*

**基于 XSLT 的验证**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>

 <xsl:template match="/">
     <xsl:value-of select=
      "*[translate(name(), 'APPLICATION', 'application')='application']
          /forms/action/form/@uid"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时：**

```
<aPPliCatioN>
 <forms>
   <action>
    <form uid="xyz"/>
   </action>
 </forms>
</aPPliCatioN> 
```

**选择想要的节点并将其字符串值复制到输出：**

```
xyz 
```

**说明**：

正确使用标准 XPath 函数**[`name()`](http://www.w3.org/TR/1999/REC-xpath-19991116/#function-name)**和**[`translate()`](http://www.w3.org/TR/1999/REC-xpath-19991116/#function-translate)**.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-15T10:17:19.173

首先我想提一下 xml 是区分大小写的，所以 Application 意味着其他的东西然后应用程序，在我看来这应该在生成这个 xml 的代码中修复，但是如果你无法控制它，可以尝试这样的事情作为你的路径：

```
"Application/forms/action/form/@uid | application/forms/action/form/@uid" 
```

该| 运算符将组合从两个 xpath 返回的节点集，在这种情况下，它将是一个或另一个

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-15T11:11:26.203

如果根元素是字母大小写可以改变的唯一元素，那么你应该简单地做例如

```
XmlDocument doc = new XmlDocument();
doc.Load("input.xml");
XmlNode nodex= oXMLDoc1.DocumentElement.SelectSingleNode("forms/action/form/@uid"); 
```

正如评论中已经建议的那样。

使用 XDocument 你会做例如

```
XDocument doc = XDocument.Load("input.xml");
doc.Root.Element("forms").Element("action").Element("form").SetAttributeValue("uid", "UniqueIDx"); 
```

[编辑] 一条评论声称第一个示例路径引发异常，这是一个完整的示例，它不会为我引发异常并使用之前发布的相同路径：

```
 string xml = @"<application>
  <forms>
    <action type=""update"">
      <form uid="""" >
      </form>
    </action>
  </forms>
</application>";
            XmlDocument doc = new XmlDocument();
            doc.LoadXml(xml);
            XmlNode nodex = doc.DocumentElement.SelectSingleNode("forms/action/form/@uid");
            nodex.Value = "UniqueIDx";

            doc.Save(Console.Out); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-17T22:12:28.883

我发现最简单的方法是将 XML 文件加载为全部小写，然后确保所有后续 XPath 表达式全部为小写。

例子：

```
var xmlDoc = new System.Xml.XmlDocument();
var rawFile = System.IO.File.ReadAllText(@"\Path\To\File.xml");
xmlDoc.LoadXml(rawFile.ToLower());

XmlNode node = xmlDoc.SelectSingleNode("//some/path[@attribute1='somevalue' and @attribute2='anothervalue']"); 
```

# php - 通过 Facebook API 自动执行身份验证过程

> ID：11048632
> 
> 赞同：0
> 
> 时间：2012-06-15T10:07:04.733
> 
> 标签：php, facebook, login, oauth

任何人都可以建议如何通过 Facebook API 进行自动身份验证。比如我有登录名和密码，需要自动获取access_token。虽然想到的只有 cURL。有哪些解决方案？

我想通过登录 PHP SDK 简化步骤。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T12:37:40.390

如果这是用于单元测试，请查看[测试用户](https://developers.facebook.com/docs/test_users/)文档，因为通过 API 访问测试用户时，您可以自动点击并获取用户会话。

对于其他用例，请遵循常规的[身份验证](https://developers.facebook.com/docs/authentication/)文档 - 通过 API 没有用户/密码登录选项 - 您需要使用 Oauth 流程

# jquery - 是否有受保护的 html 属性列表？

> ID：11048636
> 
> 赞同：0
> 
> 时间：2012-06-15T10:07:38.197
> 
> 标签：jquery, html

> **可能重复：**
> [jQuery removeAttr('type') 不起作用](https://stackoverflow.com/questions/11031966/jquery-removeattrtype-doesnt-work)

当我尝试

```
$('#button').removeAttr('type'); 
```

我收到一个错误：

```
type property cannot be changed 
```

我想知道是否有*受保护*的html 属性的准确列表。

# c# - 类中的 HttpContext.Current.Response.Redirect 问题

> ID：11048637
> 
> 赞同：0
> 
> 时间：2012-06-15T10:07:40.303
> 
> 标签：c#, asp.net, class, httpresponse, httpcontext

我编写了一个类，它使用 jquerypost 获取发布数据，然后执行一些 crud 操作。它可以很好地向数据库添加内容，但是在传递某些数据时它不会重定向到页面，下面是代码：

```
 $('#clickme').click(function (e) {
            e.preventDefault();
            indx = $("#DropDownList1 option:selected").index();
            indx += 1;
            var test = $("#DropDownList" + (indx + 1));
            var url = "/Base/performOperations/shootme/"
            jQuery.post(url, { name: jQuery("#name").val(), email: jQuery("#email").val(), federation: jQuery(test).val(), selectedscheme: jQuery("#DropDownList1").val() },
       function (data) {

           if (data == scheme1) {
               window.location = "http://www.openme.com"
           }

       });

        });

namespace pw
{
  public class performOperations
{
    public static string ShootMe() {

        HttpRequest post = HttpContext.Current.Request;
        string name = post["name"];
        string email = post["email"];
        string selectedscheme = post["selectedscheme"];
        string federation = post["federation"];

        string conn = System.Configuration.ConfigurationManager.AppSettings["mydb"];
       string sql = "INSERT INTO  dbo.mydb(Email,Name,schemes,LoginDate,schemeType) VALUES(@email,@name,@scheme,@dateTime,@federation)";
            SqlHelper.ExecuteNonQuery(conn, CommandType.Text, sql,
                new SqlParameter("@email", email),
                new SqlParameter("@name", name),
                new SqlParameter("@scheme", selectedscheme),
                new SqlParameter("@dateTime", DateTime.Now),
                new SqlParameter("@federation", federation));

        return selectedscheme;
    }
    }

    } 
```

任何为什么不发生重定向的想法，或者我是否以错误的方式进行操作，一旦数据注入数据库，我需要重定向到特定页面。任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T10:17:23.987

如果您使用 调用该`POST`方法`AJAX`，则服务器端的重定向将不起作用。

使用请求完成请求后，您必须在客户端重定向它`javascript`。

```
$('#clickme').click(function (e) {
            e.preventDefault();
            indx = $("#DropDownList1 option:selected").index();
            indx += 1;
            var test = $("#DropDownList" + (indx + 1));
            var url = "/Base/sample/Hello/"
            jQuery.post(url, { name: jQuery("#name").val(), email: jQuery("#email").val(), federation: jQuery(test).val(), selectedscheme: jQuery("#DropDownList1").val() },
       function (data) {

           if (data == "shoothim") {
               window.location = "http://www.cuthishead.com"
           }
           else if(data == "shoother")
           {
                window.location = "http://www.chopherbody.com"
           }
           else if(data == "shootboth")
           {
                window.location = "http://www.fulldeath.tv"
           }
       }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T10:23:56.667

*   从您的页面方法返回`selectedscheme`或 URL

*   `window.location`根据 jquery 上的 web 方法结果设置

*   需要`WebMethod`为您的 C# 方法设置属性

检查[使用 jQuery 调用 ASP.NET AJAX 页面方法 - 通过示例](http://weblogs.asp.net/craigshoemaker/archive/2008/11/07/using-jquery-to-call-asp-net-ajax-page-methods-by-example.aspx)

# android - Tabhost程序无法在android eclipse中运行

> ID：11048643
> 
> 赞同：-1
> 
> 时间：2012-06-15T10:07:55.627
> 
> 标签：android, eclipse, android-tabhost

有没有人遇到过这个错误？

现在，我正在尝试在 android/eclipse 中从选项卡主机的第一个选项卡切换到第二个选项卡。但是在运行显示为**应用程序 Tab_testing 已意外停止的模拟器后，请稍后再试**

任何人都可以找到解决方案吗？

请在下面找到我的来源。

***主类源码***

```
public class Tab_testingActivity extends TabActivity 
{
 /** Called when the activity is first created. */

@Override      
public void onCreate(Bundle savedInstanceState) {
   super.onCreate(savedInstanceState);
   setContentView(R.layout.main);

   Resources res = getResources();                 
   TabHost tabHost = getTabHost();  // The activity TabHost
   TabHost.TabSpec spec;  // Resusable TabSpec for each tab
   Intent intent;  // Reusable Intent for each tab

   intent = new Intent().setClass(this, Activity_1.class);

    spec = tabHost.newTabSpec("first").setIndicator("First").setContent(intent);
    tabHost.addTab(spec);

    intent = new Intent().setClass(this, Activity_2.class);
    spec = tabHost.newTabSpec("second").setIndicator("Second").setContent(intent);
    tabHost.addTab(spec);

    tabHost.setCurrentTab(0);

    }
    } 
```

***活动_1***

```
 public class Activity_1 extends Activity {
EditText get;
Button save;
SharedPreferences sharedPreferences;

@Override
protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.main1);

    get=(EditText)findViewById(R.id.editText1);
    save=(Button)findViewById(R.id.button1);

    save.setOnClickListener(new View.OnClickListener() {

    public void onClick(View v) {

if(get.getText().toString().equalsIgnoreCase("")){
  Toast.makeText(getApplicationContext(), "enter something", Toast.LENGTH_SHORT).show();
  }
else
{
 sharedPreferences=PreferenceManager.getDefaultSharedPreferences(Activity_1.this);
 Editor editor1 = sharedPreferences.edit();
 editor1.remove("answer");
 editor1.commit();

 sharedPreferences=PreferenceManager.getDefaultSharedPreferences(Activity_1.this);
 Editor editor = sharedPreferences.edit();
 Log.i("set value",""+get.getText().toString());
 editor.putString("answer",get.getText().toString());
 editor.commit();}
    }
});
} 
} 
```

***活动_2***

```
public class Activity_2 extends Activity {
TextView set;
SharedPreferences sharedPreferences;

@Override
protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.main2);

    set=(TextView)findViewById(R.id.textView1);
}

@Override
protected void onResume() 
{
 sharedPreferences = PreferenceManager.getDefaultSharedPreferences(Activity_2.this);
 String answer= sharedPreferences.getString("answer", "");

 Log.v("get value",""+answer);

if(answer.equalsIgnoreCase(null))
{
set.setText("nothing to display");
}
else
{
set.setText(answer);
}
super.onResume();
} 
} 
```

**日志猫**

```
06-15 15:23:13.995: D/AndroidRuntime(523): Shutting down VM
06-15 15:23:13.995: W/dalvikvm(523): threadid=1: thread exiting with uncaught exception (group=0x40015560)
06-15 15:23:14.015: E/AndroidRuntime(523): FATAL EXCEPTION: main
06-15 15:23:14.015: E/AndroidRuntime(523): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.and.roid.host/com.and.roid.host.Tab_testingActivity}: android.content.ActivityNotFoundException: Unable to find explicit activity class {com.and.roid.host/com.and.roid.host.Activity_1}; have you declared this activity in your AndroidManifest.xml?
06-15 15:23:14.015: E/AndroidRuntime(523):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
06-15 15:23:14.015: E/AndroidRuntime(523):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
06-15 15:23:14.015: E/AndroidRuntime(523):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
06-15 15:23:14.015: E/AndroidRuntime(523):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
06-15 15:23:14.015: E/AndroidRuntime(523):  at android.os.Handler.dispatchMessage(Handler.java:99)
06-15 15:23:14.015: E/AndroidRuntime(523):  at android.os.Looper.loop(Looper.java:123)
06-15 15:23:14.015: E/AndroidRuntime(523):  at android.app.ActivityThread.main(ActivityThread.java:3683)
06-15 15:23:14.015: E/AndroidRuntime(523):  at java.lang.reflect.Method.invokeNative(Native Method)
06-15 15:23:14.015: E/AndroidRuntime(523):  at java.lang.reflect.Method.invoke(Method.java:507)
06-15 15:23:14.015: E/AndroidRuntime(523):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
06-15 15:23:14.015: E/AndroidRuntime(523):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
06-15 15:23:14.015: E/AndroidRuntime(523):  at dalvik.system.NativeStart.main(Native Method)
06-15 15:23:14.015: E/AndroidRuntime(523): Caused by: android.content.ActivityNotFoundException: Unable to find explicit activity class {com.and.roid.host/com.and.roid.host.Activity_1}; have you declared this activity in your AndroidManifest.xml?
06-15 15:23:14.015: E/AndroidRuntime(523):  at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1405)
06-15 15:23:14.015: E/AndroidRuntime(523):  at android.app.ActivityThread.resolveActivityInfo(ActivityThread.java:1457)
06-15 15:23:14.015: E/AndroidRuntime(523):  at android.app.LocalActivityManager.startActivity(LocalActivityManager.java:277)
06-15 15:23:14.015: E/AndroidRuntime(523):  at android.widget.TabHost$IntentContentStrategy.getContentView(TabHost.java:654)
06-15 15:23:14.015: E/AndroidRuntime(523):  at android.widget.TabHost.setCurrentTab(TabHost.java:326)
06-15 15:23:14.015: E/AndroidRuntime(523):  at android.widget.TabHost.addTab(TabHost.java:216)
06-15 15:23:14.015: E/AndroidRuntime(523):  at com.and.roid.host.Tab_testingActivity.onCreate(Tab_testingActivity.java:27)
06-15 15:23:14.015: E/AndroidRuntime(523):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
06-15 15:23:14.015: E/AndroidRuntime(523):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
06-15 15:23:14.015: E/AndroidRuntime(523):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T10:12:58.797

简单的。只需`Activity_1.java`在您的 rmanifest 文件中注册您的。

在您的`<application>`标签下方，只需在下方提及您的`Activity_1.java`喜欢

```
<activity android:name=".Activity_1" /> 
```

如果您的应用程序中有多个活动，则应注册上述所有活动。例如 -

```
<activity android:name=".Activity_1" />
<activity android:name=".Activity_2" />
<activity android:name=".Activity_3" />
.
.
. 
```

# objective-c - 重启 Git 仓库 Xcode 4.3.2

> ID：11048644
> 
> 赞同：2
> 
> 时间：2012-06-15T10:07:58.883
> 
> 标签：objective-c, ios, xcode, git

对于我在项目中所做的不同更改，我需要重新启动 Git 存储库并从当前项目的新版本开始。我怎样才能做到这一点？

非常感谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-15T10:16:27.520

启动你的终端：去项目

```
cd myPath/MyProject 
```

删除磁盘上的当前 repo - 你的 git repo = RIP

```
rm -Rf .git 
```

初始化一个新的仓库

```
git init 
```

将你的项目添加到新的 git repo

```
git add . 
```

犯罪

```
git commit -a -m "init Project XY" 
```

检查回购是否正常

```
git status 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T10:22:58.603

您要做的是创建一个没有任何历史记录的新空分支。这样您就可以重新开始，但仍然可以选择返回到以前的内容。在 git 存储库中，输入以下命令：

```
git symbolic-ref HEAD refs/heads/<branchname>
rm .git/index
git clean -fdx 
```

之后，您将处于与空存储库相同的情况（即开始添加和提交文件），只是历史记录仍然存在于您的旧分支中。

请注意，旧版本中没有的所有文件都将被永久删除。

# iphone - 删除媒体选择器中的完成按钮

> ID：11048646
> 
> 赞同：3
> 
> 时间：2012-06-15T10:08:03.853
> 
> 标签：iphone, objective-c, mpmediapickercontroller

在我的应用程序中，当我点击一个按钮时，我正在使用媒体选择器，媒体选择器会出现。选择所需的歌曲后，我必须按完成按钮来关闭该选择器视图。
取而代之的是，在不按完成按钮的情况下选择歌曲后，我是否有机会关闭选择器视图？

提前致谢！

![在此处输入图像描述](../Images/77fc6636895110a0d721fceb2419220c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T10:48:37.107

替代方案，您可以使用`allowsPickingMultipleItems`属性。将其设置为`NO`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T10:28:23.990

我猜想苹果不会自动消失 imagePicker 背后的想法是，如果错误选择了某些东西，苹果希望其用户做出不同的选择。由于设备是基于触摸的，并且意外触摸非常频繁，因此错误发生的频率很高。

我没有你的问题的解决方案，但我认为我应该与其他人分享我的推理并征求他们对此的意见.. ：|

# drupal - Drupal 7 内容类型下拉语言选择

> ID：11048654
> 
> 赞同：3
> 
> 时间：2012-06-15T10:08:53.087
> 
> 标签：drupal

我是 drupal 的新手，我正在尝试创建具有多语言支持的内容类型。我有模块，可以翻译我网站上的所有内容。但是当我试图从管理员翻译内容类型时，没有用于语言选择的下拉菜单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T07:28:14.130

首先，您需要启用一些“多语言模块”，例如区域设置、内容翻译、语言并设置它们的选项。例如，您需要配置您将在此处使用的语言：

```
admin/config/regional/language 
```

并设置额外的语言设置，例如此处的路径 admin/config/regional/language/configure 然后您需要转到 admin/structure/types/manage/[my-content-type] 或者如果您希望页面内容类型为已翻译（默认 drupal 的内容类型）到这里 admin/structure/types/manage/page （页面是您当前的内容类型）并单击“发布选项”选项卡并选择多语言支持 -> 启用，带翻译。

在此之后，您将在每个页面节点旁边看到显示新的“翻译选项卡”然后您需要下载这个救生员模块 :)

[http://drupal.org/project/i18n](http://drupal.org/project/i18n)

# java - JBoss 上的 JaxWS ClassCastException

> ID：11048655
> 
> 赞同：2
> 
> 时间：2012-06-15T10:08:53.460
> 
> 标签：java, jax-ws, jboss5.x

我正在使用 JBoss 5.1.0.GA（用于 JDK6）和 jaxws 2.2.6。当我调用 web 服务时，我得到以下异常：

> java.util.ServiceConfigurationError：javax.xml.ws.spi.Provider：提供程序 org.jboss.ws.core.jaxws.spi.ProviderImpl 无法实例化：org.jboss.resource.work.WorkWrapper 处的 java.lang.ClassCastException .completed(WorkWrapper.java:283)
> at org.jboss.util.threadpool.BasicTaskWrapper.taskCompleted(BasicTaskWrapper.java:367) at org.jboss.util.threadpool.BasicTaskWrapper.run(BasicTaskWrapper.java:268) at java。 util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) 在 java.lang.Thread.run(Thread.java:680)
> 
> 原因：java.util.ServiceConfigurationError：javax.xml.ws.spi.Provider：提供程序 org.jboss.ws.core.jaxws.spi.ProviderImpl 无法实例化：java.util.ServiceLoader 处的 java.lang.ClassCastException。在 java.util.ServiceLoader$LazyIterator.next(ServiceLoader.java:353) 在 java.util.ServiceLoader$1.next 的 java.util.ServiceLoader.access$100(ServiceLoader.java:164) 失败（ServiceLoader.java:207） (ServiceLoader.java:421) 在 javax.xml.ws.spi.Provider.provider(Provider.java:140) 在 javax.xml 的 javax.xml.ws.spi.Provider.getProviderUsingServiceLoader(Provider.java:180)。 ws.Service.(Service.java:92)
> [...]
> ... 3 更多原因：java.lang.Class.cast(Class.java:2990) 的 java.util.ServiceLoader 的 java.lang.ClassCastException $LazyIterator.next(ServiceLoader.java:345)
> ... 14 更多

我还尝试将 jbossws 从 3.1.2.GA 更新到版本 3.4.0，没有任何改变。我已经阅读了很多与检查 JBoss 的 lib/endorsed 中的 jar 相关的建议，所以这是内容：

```
activation.jar
jaxb-api.jar
jaxws-api.jar
jbossws-native-factories.jar
resolver.jar
serializer.jar stax-api.jar
xalan.jar
xercesImpl.jar 
```

我还在 JVM 中添加了开关 -verbose:class：

```
[Loaded org.jboss.ws.core.jaxws.spi.ProviderImpl from jar:file:/Users/carlo/jboss-5.1.0.GA/common/lib/jbossws-native-core.jar!/] 
```

并且该类扩展`javax.xml.ws.spi.Provider`（http://bit.ly/LK9bNE）

有人可以帮我这里发生了什么吗？

**编辑 1**
好的，所以我看到 ClassCastException 是从以下位置引发的：ServiceLoader.java 第 345 行

```
S p = service.cast(Class.forName(cn, true, loader).newInstance()); 
```

当调用 service.cast 时，`this`is`javax.xml.ws.spi.Provider`和要转换的 arg is `org.jboss.ws.core.jaxws.spi.ProviderImpl`。我仍然无法理解这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T12:47:41.980

最后，我设法解决了我的问题：我把`jaxws-rt.jar`.`$JBOSS_HOME/lib/endorsed`

**编辑**
我在 JBoss 5.1 EAP 上遇到了同样的问题，为了解决它，步骤有点不同：`$JBOSS_HOME/lib/endorsed`我删除了旧的 jaxb-api.jar，然后复制

*   jaxb-api.jar
*   jaxb-impl.jar
*   jaxws-api.jar
*   jaxws-rt.jar

来自最新的 jaxws-ri 包，最终它工作了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T15:15:27.717

我遇到了同样的问题。我正在运行 JBoss 5.1 EAP 和 JDK 1.6_22。

我做的事情略有不同。我结合了 Carlo 的解决方案加上[这个解决方案](https://stackoverflow.com/questions/7842286/providerimpl-not-found-jboss-5-1)。

我在 $JBOSS_HOME/server//lib/endorsed 下创建了一个背书文件夹。然后我复制了 streambuffer.jar、stax-ex.jar、policy.jar、jaxws-rt.jar、jaxws-api.jar、jaxb-impl.jar、jaxb-api.jar 和 gmbal-api-only.jar。

我单独留下了 $JBOSS_HOME/lib/endorsed。

这样做，我能够让它正常工作

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-15T09:41:37.310

我在 JBoss 5.1 EAP 上遇到了同样的问题，而不是将 jar 文件放入 JBOSS 应用程序服务器，当您通过使用覆盖服务器类（[http://www.jboss.org/community/wiki/ ）隔离 WAR 来更改类加载逻辑时，它会更加健壮classloadingconfiguration](http://www.jboss.org/community/wiki/classloadingconfiguration)）在我的情况下，我有 3 个环境。使用这个解决方案，我可以将战争文件从一个 JBOSS 实例移动到另一个实例，它仍然可以工作。

我通过以下方式解决了这个问题：将其添加到 jboss-web.xml：

```
<class-loading java2ClassLoadingCompliance="false">
    <loader-repository>
        com.example:archive=unique-archive-name
        <loader-repository-config>java2ParentDelegation=false</loader-repository-config>
    </loader-repository>
</class-loading> 
```

...

并通过将所需的 jars 添加到战争中（jaxb-api.jar、jaxb-impl.jar、jaxws-api.jar、jaxws-rt.jar）

# c++ - 放弃 C++ 中当前线程的时间片

> ID：11048657
> 
> 赞同：6
> 
> 时间：2012-06-15T10:09:03.033
> 
> 标签：c++, multithreading, c++11

以下语句是放弃当前线程时间片的等效方法吗？

```
std::this_thread::sleep_for(std::chrono::milliseconds(0));
std::this_thread::yield;
Sleep(0);  // On windows 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T11:12:09.257

它们不是等价的。`std::this_thread::yield`应该分别映射到`sched_yield`和`SwitchToThread`。我说“应该”，因为如果取决于实施，当然。

这些放弃当前的时间片并重新安排。`SwitchToThread`仅考虑当前 CPU 上的线程，但不说明调用线程在就绪队列中的位置，*除非同一 CPU 上有另一个线程就绪，则该线程首先运行*。
`sched_yield` *将线程移动到*就绪队列的末尾并重新调度。

`Sleep(0)`在 Windows 下或多或少是相同的，只是它更不可靠（`Sleep(0)`在 50-100 毫秒后返回并非完全不可能！）并且它不尊重 CPU 边界，即在另一个 CPU 上运行的线程可能会被移动。“普通家庭”双核没有问题，NUMA 服务器上的大问题。

`nanosleep(timespec_with_zero_ns)`（即在 Linux/BSD/POSIX/whatever 下）确实按照您的要求进行，它睡眠时间为零，即根本没有。它只是一个无用的上下文切换，会立即返回（我们实际上曾经发生过这种情况，当您*假设*它就像在 Windows 下一样工作时，您会感到惊讶）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-15T10:59:48.980

[http://en.cppreference.com/w/cpp/thread/sleep_for](http://en.cppreference.com/w/cpp/thread/sleep_for)

Sleep for: '在指定的 sleep_duration 内阻止当前线程的执行。**阻塞时间可能超过 sleep_duration。**'

这实际上取决于实现和操作系统。

std::this_thread::yield() 是放弃时间片的标准方式（非特定实现依赖）。

# ckeditor - 如何在ckeditor中插入整个html页面（标签）？

> ID：11048658
> 
> 赞同：2
> 
> 时间：2012-06-15T10:09:09.017
> 
> 标签：ckeditor

我正在尝试将完整的 html 页面添加到 ckeditor 中，以便通过 js 进行一些编辑。

具体来说，我执行命令

```
oEditor.insertHtml("<html><head><title>Hello</title></head><body><div>hello</div></body></html>"); 
```

但我得到的结果如下：

```
<p>
    <html>
        <head>
            <title></title>
        </head>
        <body>
        </body>
    </html>
</p>
<p>
    <title></title>
</p>
<div>
    hello</div> 
```

我使用的模式是：

```
config.fullPage = true 
```

我也尝试了 fullPage = false，但没有成功。

有没有办法将完整的html页面插入ckeditor？

非常感谢提前！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T12:32:52.840

insert* 方法将数据附加到编辑器内容中，但如果要替换整个内容，则必须使用[setData](http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.editor.html#setData)。

# python-3.x - 按下按钮时不显示第二个窗口

> ID：11048661
> 
> 赞同：0
> 
> 时间：2012-06-15T10:09:19.407
> 
> 标签：python-3.x, pyqt4

我刚开始尝试构建简单的 GUI，因为我一直使用命令行脚本并想探索更多。我正在使用 PyQt4 和 Python 3 的最新版本。

问题是给定下面的代码，单击第一个窗口中的按钮时，第二个窗口不会显示，但我不明白为什么。我错过了什么？该脚本功能齐全（*当然，第二个窗口部分*除外），因此只需复制/粘贴即可尝试。

```
import sys
from PyQt4 import QtCore, QtGui

class GreetWindow(QtGui.QMainWindow):
    def __init__(self):
        # main init
        QtGui.QMainWindow.__init__(self)
        self.setWindowTitle('File Checker!')
        self.centralWidget = QtGui.QWidget()
        self.tLabel = QtGui.QLabel('Hello, and welcome! Please, close me!', self.centralWidget)
        self.bClose = QtGui.QPushButton('Close', self.centralWidget)
        # layout
        self.lVBox = QtGui.QVBoxLayout()
        self.lVBox.setSpacing(2)
        self.lVBox.addWidget(self.tLabel)
        self.lVBox.addWidget(self.bClose)
        # signal connections
        self.connect(self.bClose, QtCore.SIGNAL('clicked()'), self, QtCore.SLOT('close()'))
        self.connect(self.bClose, QtCore.SIGNAL('clicked()'), self.showSecond)
        # layout combination
        self.centralWidget.setLayout(self.lVBox)
        self.setCentralWidget(self.centralWidget)
    def showSecond():
        self.theSecond = SecondWindow()
        self.theSecond.show()

class SecondWindow(QtGui.QMainWindow):
    def __init__(self):
        QtGui.QMainWindow.__init__(self)
        self.setWindowTitle('This is the second!')
        self.centralWidget = QtGui.QLabel('Mission accomplished')
        self.setCentralWidget(self.centralWidget)

def main():
    app = QtGui.QApplication(sys.argv)
    ex = GreetWindow()
    ex.show()
    sys.exit(app.exec_())

if __name__ == '__main__':
    main() 
```

顺便说一句，我真的很感谢批评这个简单脚本的编码方式。我现在从 GUI 开始，我想以最 Pythonic 的方式开始。谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T10:19:24.913

确保在控制台中运行您的应用程序，以便您可以看到错误输出：

```
TypeError: showSecond() takes no arguments (1 given) 
```

确实，声明中存在错误`showSecond`：不`self`！应该是这样的：

```
 def showSecond(self): 
```

# c# - wcf 架构

> ID：11048662
> 
> 赞同：0
> 
> 时间：2012-06-15T10:09:20.060
> 
> 标签：c#, wcf

我需要的：

一个可以接受包含 URL 参数中信息的 HTTP 消息的侦听器。侦听器需要将参数中的数据*发送*到我的应用程序的另一部分（另一个项目）。

我已经知道的：

我认为创建 WCF 服务是最好的方法，但我不知道我将如何构建它。我是否需要 2 项服务 - 一项接受 HTTP 消息，另一项将信息发送到我的应用程序？

我想让 HTTP 侦听器成为另一个项目，因为我认为它可以被其他应用程序重用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T11:02:21.820

The recommended way for .Net interprocess communication now is to use WCF.

Since you are going to have to implement a WCF service in your second project anyway (to listen for passed parameters from your HTTP listener), you might as well just listen directly in that project IMHO.

There seems little point in creating a separate listener unless this listener is also going to talk to different apps at the same time (ie a single input point for external clients).

**EDIT**: to better explain:

```
What you propose:

          HTTP listener app             Other app
--HTTP--> WCF service       -----IPC--> WCF service

What I propose:

          Other app         
--HTTP--> WCF service 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T10:38:57.843

您可以从客户端调用第一个 WCF 服务，从第一个服务中，您可以在内部为第二个 wcf 服务创建一个代理对象，并从第一个服务调用 WCF 服务并接收响应。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T10:18:14.943

您可以拥有一个 wcf 服务来监听 http，然后依赖于您的第二个项目，它可以调用 wcf 服务或可以将数据插入到第二个项目的数据库中，或者可以通过查询字符串发送数据或将数据发布到第二个项目。

# iphone - iPhone 应用程序：在 ipad 中全屏显示 iAds

> ID：11048665
> 
> 赞同：0
> 
> 时间：2012-06-15T10:09:28.327
> 
> 标签：iphone, objective-c, ipad, ios5, iad

ios 4.3及更高版本的iPhone/ipad App支持iPad全屏iads。

通过触摸横幅视图，它会全屏显示广告。

我们可以以编程方式全屏显示此广告，而不是在触摸横幅视图时显示全屏吗？

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T10:19:16.863

我认为不会。

整个页面是点击广告的结果，而不是广告本身。广告是一种鼓励，而不是产品。

以软件之外的广告概念为例，这类似于汽车公司强迫您购买汽车，而不仅仅是鼓励您购买带有广告的汽车。

# django - 管理员中的 osqa markdown 和 flatpages

> ID：11048667
> 
> 赞同：0
> 
> 时间：2012-06-15T10:09:41.417
> 
> 标签：django, markdown, django-flatpages, osqa

我在 OSQA 和`flatpages`管理员中遇到了降价问题。具体来说，降价是不被识别的，而不是`**`我只是得到`<strong>`作为输出。

有没有人遇到过同样的问题？

# asp.net - ASP.net GridView 不显示

> ID：11048672
> 
> 赞同：0
> 
> 时间：2012-06-15T10:09:52.853
> 
> 标签：asp.net, gridview, datasource

我的页面上有 GridView：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Default.aspx.cs" Inherits="_Default" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>

        <asp:GridView ID="GridView1" runat="server" 
            onselectedindexchanged="GridView1_SelectedIndexChanged">
        </asp:GridView>

    </div>
    <asp:Button ID="Button1" runat="server" onclick="Button1_Click" Text="Button" />
    </form>
</body>
</html> 
```

我使用按钮设置网格视图数据源：

```
DataAdapter adapter=new DataAdapter(SqlCommand,SqlConn);
DataTable tbl=new Datatable();
adapter.Fill(tbl);
GridView1.DataSource=tbl; 
```

从调试模式我可以看到数据表是填充属性并且确实包含数据。但我在屏幕上什么也看不到。有什么问题

PS找到了类似的问题，除了在那个问题中没有设置数据源

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T10:16:04.883

您在这里缺少调用数据绑定方法。使用以下代码：

```
 DataAdapter adapter=new DataAdapter(SqlCommand,SqlConn);
 DataTable tbl=new Datatable();
 adapter.Fill(tbl);
 GridView1.DataSource=tbl;
 GridView1.DataBind(); 
```

让我知道它是否适合您？

# android - Android ksoap2 Microsoft Webservice - 无法将参数传递给webservice

> ID：11048675
> 
> 赞同：0
> 
> 时间：2012-06-15T10:10:01.423
> 
> 标签：android, visual-studio-2010, web-services, soap, ksoap2

我正在学习如何使用：Eclipse IDE ksoap2 版本 2.6.5 和 Visual Studio 2010 创建一个 android 应用程序和 web 服务

我的方法是遵循这个很棒的教程：[http ://www.youtube.com/watch?v=v9EowBVgwSo&feature=related](http://www.youtube.com/watch?v=v9EowBVgwSo&feature=related)

本教程适用于 w3schools 测试网络服务。

然后我尝试编写自己的 Web 服务，并使用 Visual Studio 中提供的 helloworld Web 服务来启动我。我修改了我的代码以指向新的 Web 服务（发布在我的开发笔记本电脑上）并在我的手机上以调试模式运行它。

调用 HelloWorld() webservice 时与 webservice 的通信很好。它甚至从 simpleMethod() 返回一个结果，但它不包括我传递给它的参数。例如，调用 simpleMethod 时，Iam 返回以下字符串：“Hello”

我认为这是网络服务的一个问题，因为它适用于 w3schools 测试网络服务，但我被卡住了，希望能得到一些帮助。

我的代码如下：

网络服务：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Services;

namespace WMCMobileWebService
{
    /// <summary>
    /// Summary description for Service1
    /// </summary>
    [WebService(Namespace = "http://testuri.org/")]
    [WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
    [System.ComponentModel.ToolboxItem(false)]
    // To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment the following line. 
    [System.Web.Script.Services.ScriptService]
    public class Service1 : System.Web.Services.WebService
    {

        [WebMethod]
        public string HelloWorld()
        {
            return "Hello World";
        }

        [WebMethod]
        public string simpleMethod(String srt)
        {
            return "Hello " + srt;
        }
    }
} 
```

Android 应用 MainActivity：

```
package com.clcltd.soaptest;

import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;

import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.PropertyInfo;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapPrimitive;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;

public class SoapTestActivity extends Activity {
    private static final String SOAP_ACTION = "http://testuri.org/simpleMethod";
    private static final String METHOD_NAME = "simpleMethod";
    private static final String NAMESPACE = "http://tempuri.org/";
    private static final String URL = "http://192.168.2.22/wmcmobilewebservice/Service1.asmx";
    PropertyInfo pi;
    TextView tv, tvc;
    String str;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        tv = (TextView) findViewById(R.id.textView1);
        tvc = (TextView) findViewById(R.id.textView2);
        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);

        str = "Andy";

        pi = new PropertyInfo();
        pi.setName("srt");
        pi.setValue(str);
        pi.type = PropertyInfo.STRING_CLASS;

        request.addProperty(pi);

        SoapSerializationEnvelope soapEnvelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
        soapEnvelope.dotNet = true;
        soapEnvelope.setOutputSoapObject(request);

        HttpTransportSE aht = new HttpTransportSE(URL);
        try{
            aht.call(SOAP_ACTION, soapEnvelope);
            SoapPrimitive resultString = (SoapPrimitive) soapEnvelope.getResponse();
            tv.setText("Status: " + resultString);
            tvc.setText(request.toString());
        }catch (Exception e)
        {
            e.printStackTrace();
            tv.setText("Error" + e.toString());
        }
    }
} 
```

运行上面的代码时，我在屏幕上得到以下输出：

*状态：你好 simpleMethod{srt=Andy; }*

我希望结果是：

*状态：你好安迪*

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T14:20:38.383

要接收字符串，请尝试以下操作：

```
SoapObject res = (SoapObject)soapEnvelope.getResponse();
tv.setText("Status: " + res.toString()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T13:51:42.650

我花了一段时间，但最后我找到了另一个教程（[http://sarangasl.blogspot.co.uk/2010/09/create-simple-web-service-in-visual.html](http://sarangasl.blogspot.co.uk/2010/09/create-simple-web-service-in-visual.html)）详细说明如何使用旧版本 KSOAP 上的 KSOAP2 Web 服务。

本教程包含一个指向包含旧版本 KSOAP 的代码的链接。

作为测试，我将最新的 KSOAP 版本放在这个新项目中并且它停止工作，所以看起来我的问题毕竟与版本有关。

希望在本教程中指出其他人会帮助他们。

# jquery - Jquery - 需要帮助使用验证码

> ID：11048676
> 
> 赞同：0
> 
> 时间：2012-06-15T10:10:02.943
> 
> 标签：jquery, validation

谁能告诉我如何为以下验证码编写自定义验证器？我是 jquery 的新手，还没有编写任何自定义验证器。我需要将此自定义验证器与默认验证器一起使用。我试着写，但它没有用。请帮忙

```
challengeField = $("input#recaptcha_challenge_field").val();
responseField = $("input#recaptcha_response_field").val();
var html = $.ajax({
type: "POST",
url: "recaptcharesponse.jsp",
data: "recaptcha_challenge_field=" + challengeField + "&recaptcha_response_field=" +     responseField,
async: false
}).responseText;
//console.log( html );
$("#prtCnt").html("");
return true;
} else {
$("#prtCnt").html("<font color='#D31145'>Please try again.The characters you entered     didn't match the word verification</font>");   
Recaptcha.reload();                                         
return false;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T10:19:48.147

```
 challengeField = $("input#recaptcha_challenge_field").val();
        responseField = $("input#recaptcha_response_field").val();

        $.ajax({
        type: "POST",
        async: false,
        url: "recaptcharesponse.jsp",
data: {"recaptcha_challenge_field" :challengeField,"recaptcha_response_field":responseField),
        success:function(msg){
            if(msg == "something from server that captcha is ok"){
              //catcha is ok do wat you want
            }else{
            $("#prtCnt").html("<font color='#D31145'>Please try again.The characters you  entered  didn't match the word verification</font>");   
        Recaptcha.reload();
    }

    },error:function(){

    }

        }); 
```

# razor - 选择的（JQuery）DropDownList 中未显示默认文本

> ID：11048677
> 
> 赞同：1
> 
> 时间：2012-06-15T10:10:07.463
> 
> 标签：razor, jquery-chosen

我正在为 ASP.NET MVC (Razor) 项目使用[选择](http://harvesthq.github.com/chosen/)的 JQuery 插件。对于下拉列表，它不显示由 设置的默认文本值`data_placeholder`，而是显示列表的第一项。

```
<div class="editor-field">
    @Html.DropDownList("AuthorId", (IEnumerable<SelectListItem>)ViewBag.AuthorId, new
    {
        @class = "chzn-dropdown",
        data_placeholder = "Select Author...",
        style = "width:270px;"
    })
    @Html.ValidationMessageFor(model => model.Author)
</div> 
```

如何显示下拉列表的默认文本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T12:28:38.517

答案在所选网站上

> **注意**：在单选时，假定第一个元素被浏览器选中。要利用默认文本支持，您需要包含一个空白选项作为选择列表的第一个元素。

# jqgrid - editdata jqgrid 传输数据编辑

> ID：11048681
> 
> 赞同：0
> 
> 时间：2012-06-15T10:10:28.000
> 
> 标签：jqgrid

这是我通过表单编辑的 jqgrid 代码。

```
 $("#DataEnergy").jqGrid('navGrid', '#pagergrid',
    {}, //options
     {editdata: { id_res: $('#resurs').val(), id_obj: readCookie('id_obj')} },// add options
     {editdata: { id_res: $('#resurs').val(), id_obj: readCookie('id_obj')} }, // edit options
     {editdata: { id_res: $('#resurs').val(), id_obj: readCookie('id_obj')}  }, // del options
     {} // search options
     ); 
```

编辑时，必须在 post 请求中发送 editdata 的数据。为什么没有为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T10:27:20.823

首先，您应该使用正确的参数名称：[editData](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:form_editing#properties)和[delData](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:form_editing#properties2)（大小写在 JavaScript 中非常重要）。

下一个问题是调用`navGrid`将被执行**一次**，但您可能希望在编辑/添加/删除时拥有`$('#resurs').val()`和的值。`readCookie('id_obj')`要解决此问题，您可以在and中使用*函数*（方法）：`editData``delData`

```
var myData = {
        id_res: function () { return $('#resurs').val(); },
        id_obj: function () { return readCookie('id_obj'); }
    };

$("#DataEnergy").jqGrid('navGrid', '#pagergrid',
    {}, // navGrid options
    { editData: myData }, // add options
    { editData: myData }, // edit options
    { delData: myData },  // del options
); 
```

有关更多信息，请参阅其他一些旧答案：[this](https://stackoverflow.com/a/2928819/315935) , [this](https://stackoverflow.com/a/6184668/315935) , [this](https://stackoverflow.com/a/5252503/315935) , [this](https://stackoverflow.com/a/3364759/315935)

# unit-testing - 单元测试，犀牛，单元测试的艺术

> ID：11048682
> 
> 赞同：1
> 
> 时间：2012-06-15T10:10:31.353
> 
> 标签：unit-testing, testing, mocking, rhino-mocks, rhino

我已经开始阅读“单元测试的艺术”，我正在尝试实现这段代码：

```
[Test]
public void ReturnResultsFromMock()
{
    MockRepository mocks = new MockRepository();
    IGetResults resultGetter = mocks.DynamicMock<IGetResults>();
    using(mocks.Record())
     {
        resultGetter.GetSomeNumber("a");//#1
        LastCall.Return(1);
        resultGetter.GetSomeNumber("a");//#2 how it should work?
        LastCall.Return(2);
        resultGetter.GetSomeNumber("b");
        LastCall.Return(3);
    }
    int result = resultGetter.GetSomeNumber("b");
    Assert.AreEqual(3, result);
    int result2 = resultGetter.GetSomeNumber("a");
    Assert.AreEqual(1, result2);
    int result3 = resultGetter.GetSomeNumber("a");
    Assert.AreEqual(2, result3);
} 
```

运行测试 AOUT.Loga.Tests.LogAnalyzerTest.ReturnResultsFromMock 后收到此错误消息 *：预期：2 但为：1*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T11:18:26.423

看起来您尝试实现*有序*的调用序列（请参阅[此处](http://ayende.com/wiki/Rhino%20Mocks%20Ordered%20and%20Unordered.ashx)的详细信息）：

*   首先你调用`GetSomeNumber("a")`应该返回 1
*   然后`GetSomeNumber("a")`再次调用，结果将是 2
*   只有这样`GetSomeNumber("b")`，结果才会是 3

是这样，尝试替换`using(mocks.Record())`为`using(mocks.Ordered())`. 但是，这只适用于这个调用序列

在您的示例中，您正在使用`using(mocks.Record())`，因此每次调用`GetSomeNumber("a")`都会根据您的配置返回 2 。你`GetSomeNumber("a")`被第二个覆盖。以下是正确的假设：

```
int result = resultGetter.GetSomeNumber("b");
Assert.AreEqual(3, result);
int result2 = resultGetter.GetSomeNumber("a");
Assert.AreEqual(2, result2); // every call to GetSomeNumber("a") will returns 2
int result3 = resultGetter.GetSomeNumber("a");
Assert.AreEqual(2, result3); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T07:37:46.600

您可以尝试使用更简单的[Rhino Mocks AAA 语法](https://stackoverflow.com/questions/2124175/rhino-mocks-aaa-quick-start)，您的代码将如下所示（也请查看[此问题](https://stackoverflow.com/questions/1468226/multiple-calls-to-a-rhino-mocked-method-return-different-results)）：

```
 // Arrange
    var resultGetter = MockRepository.GenerateMock<IGetResults>;
    resultGetter.Expect(x => x.GetSomeNumber("b")).Return(3);
    resultGetter.Expect(x => x.GetSomeNumber("a")).Return(1).Repeat.Once();
    resultGetter.Expect(x => x.GetSomeNumber("b")).Return(2).Repeat.Once();

    // Act
    int result = resultGetter.GetSomeNumber("b");
    // Assert
    Assert.AreEqual(3, result);
    // Act
    int result2 = resultGetter.GetSomeNumber("a");
    // Assert
    Assert.AreEqual(1, result2);
    // Act
    int result3 = resultGetter.GetSomeNumber("a");
    // Assert
    Assert.AreEqual(2, result3); 
```

# c# - C 代码模拟器的 GUI 和后端选择

> ID：11048683
> 
> 赞同：-2
> 
> 时间：2012-06-15T10:10:33.317
> 
> 标签：c#, c, visual-studio, qt, gtk

我必须制作一个模拟器。功能如下所述：

输入：不可更改的 C 代码

功能：编译并运行这些代码并产生输出。每个 C 代码都可能是变量。为所有这些变量给出了输入函数（基于时间）。因此，如果输入的 c 代码文件有一个简单的加法器 int add(a,b)/* a 和 b 随时间变化并具有指定的 fn。因此，在 t=0 a=1,b=2 在 t=4 b 可能会更改为 6，依此类推*/我必须在 diff 时间运行代码并生成输出。也检查那些 o/ps。出于所有这些目的，我也需要一个 GUI。

需要后端和 Gui 工具的建议。

PS：我的研究告诉我，带有 GTK for GUI 的 C 后端是一个可行的解决方案，但 GTK 太冗长乏味了。我对 Qt/C++ 感到困惑，因为它可能无法与 ac 后端一起很好地工作。C++ 后端对我来说很难导入和运行这些输入代码（extern 不能一直工作）。我还查看了用于 GUI 的 C# 和到 dll 文件的链接，但在许多博客中也提到不那么可行。有什么建议么？已经谢谢了。

PPS 请仅推荐开源和非许可工具。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T14:07:48.230

C++ 可以而且确实可以与任何 C 库或“代码”进行微不足道的接口，所以这不是你关心的问题。

我建议使用 Qt。它带有一个不错的免费 IDE：Qt Creator。它提供了通常超过 GTK 的高级功能。唉，GTK 库生态系统非常“可破解”——底层对象模型允许各种创造性的使用和滥用，但恕我直言，学习曲线非常浅——与 Qt 相比，“完全”理解 GTK 需要更长的时间.

这仅仅是因为 GTK 的底层低级库提供了许多由 C++ 语言接管或在 Qt 中隐藏起来的功能。我发现 GTK 的基础更加灵活，但这似乎都是寻找问题的解决方案。Qt/C++ 的更简单和更不灵活的对象模型也同样有效，并且更容易学习，因为它的数量要少得多。

还要从投资时间的角度考虑。学习精通 C++ 可以移植到仅使用相同语言的其他项目中。学习精通 glib 只会帮助您处理专门使用 glib 的 C 项目，而且我认为它们比 C++ 项目要少得多。

有时，太多的好事是一件坏事，在我看来，GTK 就是这种情况。这是一个库集合，它具有低级功能，但似乎对高级抽象很轻。别介意各个图书馆的设计指导原则略有不同，本质上是一个松散的集合。这在理论上对组件的解耦很有好处，但会使学习变得更加困难，因为构成 GTK 的各种库中的通用设计元素几乎没有。

相比之下，Qt 几乎是一个单一的、统一的大型库，拆分为您可以选择不使用的模块。

PS。大多数人错误地使用“陡峭的学习曲线”来表示某些东西很难学习。学习曲线显示“知识”与时间的关系。如果它很陡，这意味着你正在快速学习。浅的意味着你学习缓慢。

# php - 服务器端程序员的好模板，在 css 和设计方面很糟糕？

> ID：11048686
> 
> 赞同：0
> 
> 时间：2012-06-15T10:10:42.027
> 
> 标签：php, html, templates, css

各位智者，大家好！！

我的问题是，我是一名 php/javascript 程序员。我在事物的逻辑方面做得很好，服务器方面......但是当涉及到设计，艺术的东西，css等......我真的很糟糕。有没有人对模板或我可以使用的东西有任何建议，这些建议已经为我创造了很酷的样式，我只需要将我的 php/js 插入其中，也许可以从样式中选择或不...

基本上，我试图绕过不得不花费无数小时的设计和玩 css 来让东西工作，然后它甚至不会看起来不错......而是只需要一个程序或脚本或其他东西来完成这一切我...

我更喜欢一个免费的开源项目......但如果它是一个非常好的应用程序，我愿意为它付费。

提前致谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T10:34:18.610

[你应该在 twitter 的Bootstrap](http://twitter.github.com/bootstrap/)上花很多时间，它是一个包含大量 HTML 和 CSS 资源的工具包，还有一个网格模板来帮助你构建你的网站。构建漂亮的用户界面非常有用，如果你不是一个试图做快速而漂亮的 UI 的非设计师，它会很有帮助。

# node.js - 在 Ubuntu 上运行回显服务器

> ID：11048687
> 
> 赞同：0
> 
> 时间：2012-06-15T10:10:46.237
> 
> 标签：node.js, ubuntu, websocket

我按照本教程在ubuntu上安装了node.js，安装成功。但是当我输入 node echo-server.js 时，我收到以下错误：

```
module.js:340  
    throw err;  
      ^ 
Error: Cannot find module '../../lib/ws/server'  
    at Function.Module._resolveFilename (module.js:338:15)    
    at Function.Module._load (module.js:280:25)  
    at Module.require (module.js:362:17)  
    at require (module.js:378:17)  
    at Object.<anonymous> (/home/jci/node/joyent-node-283d735/echo-server.js:2:10)  
    at Module._compile (module.js:449:26)  
    at Object.Module._extensions..js (module.js:467:10)  
   at Module.load (module.js:356:32)  
   at Function.Module._load (module.js:312:12)  
   at Module.runMain (module.js:487:10) 
```

回显服务器代码：

```
 var sys = require("util")  
  , ws = require('../../lib/ws/server');  

var server = ws.createServer({debug: true});  

 // Handle WebSocket Requests  
 server.addListener("connection", function(conn){  
  conn.send("Connection: "+conn.id);  

   conn.addListener("message", function(message){  
    conn.send("<"+conn.id+"> "+message);  

    if(message == "error"){  
      conn.emit("error", "test");  
} 
```

}); });

server.addListener("error", function(){ console.log(Array.prototype.join.call(arguments, ", ")); });

server.addListener("断开连接", function(conn){ server.broadcast("<"+conn.id+">断开连接"); });

server.listen(8000);

但是缺少 lib/ws/server。但是我从哪里得到它？？我猜我的 node.js 安装中没有 Web 套接字服务器。

谢谢斯内哈
_

# xcode - Xcode4 中用于调试插件的多个可执行文件？

> ID：11048689
> 
> 赞同：1
> 
> 时间：2012-06-15T10:10:57.327
> 
> 标签：xcode, audiounit, vst

在 Xcode 3.26 中，我习惯于在“Active Executable”菜单中拥有各种支持各种音频插件格式（VST、Audiounit、VST3 等）的插件主机。这对于在不同主机中快速调试非常有用。当我将我的项目带入 Xcode4 时，我失去了这个菜单，我想不出一种方法来获得相同的行为，而不为每个主机中的每种格式制定新的方案。如果可能的话，有人有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T11:18:37.077

我认为您必须习惯每个主机的一个方案，抱歉。Xcode 不像以前那样适合开发桌面应用程序。

但是，[AppCode](http://www.jetbrains.com/objc/)确实具有类似于 Xcode 3 的活动可执行文件的运行配置。它也是一个通常很棒的 IDE，所以也许值得一试。:)

# android - 如何设计一个后台执行网页测试的app，让用户正常使用手机？

> ID：11048690
> 
> 赞同：3
> 
> 时间：2012-06-15T10:10:57.937
> 
> 标签：android, android-service, alarmmanager

我目前正在尝试设计一个特定的应用程序，但我真的不知道如何。该应用程序必须像这样运行。

# 我必须做的：

用户启动应用程序。这个动作启动了一些独立于 UI 的东西（当前是一个服务），它必须请求远程服务器来获取测试场景、执行测试并将结果发送到同一服务器，即使应用程序的 UI 不在屏幕上。

第二个约束：用户在开始时选择来自服务器的两个场景请求之间的时间。

***示例：***用户启动应用程序，选择“每 5 分钟执行一次测试场景请求”，之后，他可以在手机上做任何他想做的事情。并且app每5分钟发送一个请求来获取测试场景（不是一个，而是一个不同的数字，例如50），做测试场景，并将结果发送到服务器；然后，等待下一个请求。
在此期间，我认为状态栏中的通知图标可能是访问应用程序 UI 的好方法。这样，当用户觉得应用程序已经完成了足够的测试时，他可以访问 UI 并停止应用程序。

# 我已经做了什么：

我创建了一个创建服务的活动。我还设置了一个警报`AlarmManager`，收到一个警报，该警报`AlarmReceiver`每 X 分钟/秒/...调用一次服务，并在服务中启动对服务器的请求以获取场景（http 请求在 AsyncTask 中完成）。该服务在其`onCreate()`方法的状态栏中放置一个通知。我还设法解析 JSON、发送 HttpRequest 以及类似的技术性内容。

# 我的问题是：

我发现服务在`onStartCommand()`. 它完成了方法然后转到`onDestroy()`（我没有放的地方`stopSelf()`），但是服务真的关闭了吗？如果是的话，我怎么能在整个申请期间设法让它“启动”？

状态栏的通知刚出现又消失，伴随着`AlarmManager`. 我怎样才能“稳定”它？

如果你已经设计了一个这样的应用程序（我认为一个邮件应用程序就是一个很好的例子，它每 X 分钟请求邮件服务器检查新邮件并发送通知），我怎样才能达到我的目标？重用邮件应用程序示例：检查服务器上新邮件的服务是否一直在运行？

我真的不知道如何设计这个应用之王，所以欢迎任何帮助。对不起，我的英语不好。如果您想要精度、服务代码、活动，请询问。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T10:17:56.853

看起来您`Service`正在 UI 线程上运行。您应该在您的内部创建一个新线程`Service`，所有网络操作都将在其中工作。因此，`AlarmManager`您`wait`的`Thread`.

PS如果您不知道如何创建新线程：

```
new Thread(new Runnable(){
    public void run(){
        //your code here
    }
}).start(); 
```

但我强烈建议您先阅读有关多线程的内容。

# android - 由于 java.lang.NoClassDefFoundError 导致自动化 Android-UI-Tests 失败

> ID：11048695
> 
> 赞同：3
> 
> 时间：2012-06-15T10:11:08.163
> 
> 标签：android, ant, robotium, android-library, ui-testing

为了测试我的 Android 应用程序，我正在使用 UI 测试工具[Robotium](http://code.google.com/p/robotium/)。由于传递的 lib-project 依赖项和 android 构建工具无法处理它们，我已经在构建项目和运行测试方面遇到了许多问题。

请在我的案例中进行介绍，阅读我之前[对问题提出](https://stackoverflow.com/questions/9977175/failed-automated-android-ui-tests-on-jenkins-server-due-to-complex-lib-project-d)的问题以及对解决方案的相应[讨论](http://code.google.com/p/android/issues/detail?id=21720)。

现在，经过一段时间后，我已经包含了另一个库项目[ViewPagerIndicator](http://viewpagerindicator.com/)，我的库项目**B**依赖于它。因此，我再次被迫应用上面链接中提供的以前的解决方案，以防止 lib-projects 出现该错误，并且我在测试项目的 ant.properties 中添加了以下代码：

```
android.library.reference.1=../lib-project
android.library.reference.2=../Android-ViewPagerIndicator/library

library.paths=com/mydomain/project/* com/actionbarsherlock/** 
```

正如我所料，构建工作。但是实际上依赖于新库的活动测试用例没有通过，我遇到了java.IllegalAccessError：

```
test:
     [echo] Running tests...
     [exec] 
     [exec] com.mydomain.project.projectb.test.unittests.EncodeTest:.
     [exec] com.mydomain.project.projectb.test.testcases.ServerCommTest:........
     [exec] com.mydomain.project.projectb.test.testcases.LoginTest:
     [exec] INSTRUMENTATION_RESULT: shortMsg=java.lang.IllegalAccessError
     [exec] INSTRUMENTATION_RESULT: longMsg=java.lang.IllegalAccessError: Class ref in pre-verified class resolved to unexpected implementation
     [exec] INSTRUMENTATION_CODE: 0 
```

然后我意识到，ViewPagerIndicator 依赖于 Android-Support-v4 包，所以我把它的 jar 放在 test-projects libs 目录中，然后再试一次。这次我遇到了活动类的 java.lang.NoClassDefFoundError ：

```
test:
     [echo] Running tests...
     [exec] 
     [exec] com.mydomain.project.projectb.test.unittests.EncodeTest:.
     [exec] junit.framework.TestSuite$1:
     [exec] Failure in warning:
     [exec] junit.framework.AssertionFailedError: Exception in constructor: testCreateAlbum (java.lang.NoClassDefFoundError: com.mydomain.project.activity.LoginActivity
     [exec]     at com.mydomain.project.test.testcases.ServerCommTest.<init>(ServerCommTest.java:29)
     ... 
```

这里可能是什么问题？如果我根本不应用 ant.properties 文件中的修复程序，我会得到与另一个问题相同的错误...

提前感谢您的帮助！

# java - java中的Web服务错误：InvocationTargetException

> ID：11048700
> 
> 赞同：0
> 
> 时间：2012-06-15T10:11:20.213
> 
> 标签：java, soap, wsdl, axis, jsch

我必须用 Java 开发一个使用 JSCH（用于 SSH 的库）的 Web 服务。但我在调用此 Web 服务时出错：

```
faultcode: soapenv:Server.userException, faultstring: java.lang.reflect.InvocationTargetException 
```

我的 Java 代码运行良好，但是当我像 Web 服务一样调用它时，我遇到了这个错误。

这是我的 Java 代码：

```
import java.io.InputStream;

import com.jcraft.jsch.Channel;
import com.jcraft.jsch.ChannelExec;
import com.jcraft.jsch.JSch;
import com.jcraft.jsch.Session;

public class SSHTest {

    public static void main(String[] args) {
        String cmd="pwd";
        System.out.println(ssh(cmd));

    }

    public static String ssh (String command1)
    {
        String host="10.0.0.20"; 
        String user="student";
        String password="xxx";
        String res="";
        try{

            java.util.Properties config = new java.util.Properties();
            config.put("StrictHostKeyChecking", "no");
            JSch jsch = new JSch();
            Session session=jsch.getSession(user, host, 22);
            session.setPassword(password);
            session.setConfig(config);
            session.connect(); // session.connect(30000) : making a connection with timeout.

            Channel channel=session.openChannel("exec");
            ((ChannelExec)channel).setCommand(command1);
            channel.setInputStream(null);
            ((ChannelExec)channel).setErrStream(System.err);

            InputStream in=channel.getInputStream();
            channel.connect();
            byte[] tmp=new byte[1024];
            while(true){
              while(in.available()>0){
                int i=in.read(tmp, 0, 1024);
                if(i<0)break;
                res += new String(tmp, 0, i);
              }
              if(channel.isClosed()){
                break;
              }
              try{Thread.sleep(1000);}catch(Exception ee){}
            }
            channel.disconnect();
            session.disconnect();
          }catch(Exception e){
            e.printStackTrace();
        }
          return res;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T10:24:48.740

甚至我在开发 Web 服务时也遇到了同样的错误。检查您正在使用的 Eclipse 版本。[我是如何解决它的。](https://stackoverflow.com/questions/6659829/wsdl2java-codegen-eclipse-plugin-java-lang-reflect-invocationtargetexception)

# objective-c - 在 NSTextView 中查找具有动态内容的链接

> ID：11048701
> 
> 赞同：0
> 
> 时间：2012-06-15T10:11:23.903
> 
> 标签：objective-c, hyperlink, nstextview

我有一个从 JSON 源加载描述的 NStextView。每次用户单击按钮时，NSTextView 都会加载不同的字符串。这些描述有时会在其中包含一个 URL，该 URL 呈现为纯文本而不是可单击的 URL。它加载得很好，只是无法识别 URL。我设置了自动链接检测无济于事。我也尝试了 AttributedString ，但它不起作用，但这可能是我的无能（对此是新手。）

这是代码：

```
 if ([firstCommenter isEqualToString:playerID]) {
            NSString *commentBody = [[allComments objectAtIndex:0] valueForKeyPath:@"body"];
            [shotDescriptionTextView setString:commentBody];  
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T12:12:47.540

请参阅[NSTextView 中的自动链接检测](http://fredandrandall.com/blog/2011/08/16/automatic-link-detection-in-an-nstextview/)。希望有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-01T11:31:59.093

如需更好的解决方案，无需任何类别，[请查看此处](https://stackoverflow.com/a/25762502/1463411)

TL;博士：

```
[shotDescriptionTextView setEditable:YES];
[shotDescriptionTextView checkTextInDocument:nil];
[shotDescriptionTextView setEditable:NO]; 
```

# wordpress - Wordpress，无法让高级自定义字段插件工作

> ID：11048704
> 
> 赞同：1
> 
> 时间：2012-06-15T10:11:38.927
> 
> 标签：wordpress, plugins

我尝试按照说明进行操作，但无法使插件正常工作，这些字段显示在管理员中，我与它们一起上传图像，但是当我发布和查看帖子时没有图像显示。我是否需要在模板文件中添加一些内容才能显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T10:18:45.350

是的，您需要添加：

```
<?php the_field('field_name'); ?> 
```

检查 ACF 文档： http: [//www.advancedcustomfields.com/docs/code-examples/](http://www.advancedcustomfields.com/docs/code-examples/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T10:19:34.937

从生产者的[页面](http://www.advancedcustomfields.com/)中读取，他们声明对于图像/文件，**他们的 API**返回一个 URL。

这可能意味着插件未与本机文件处理功能集成。您可能需要使用他们的模板标签，例如`<img src="<?php the_field('name') ?>" />`.

```
file: public_html/wp-content/themes/theme_name/category.php 
```

在这之后的某个地方

```
<?php if ( have_posts() ) : ?>
    <?php while ( have_posts() ) : the_post(); ?>
        <img src="<?php the_field('name') ?>" />
        ... 
```

# asp.net - asp.net 表单身份验证：公用文件夹不允许应用程序访问

> ID：11048705
> 
> 赞同：1
> 
> 时间：2012-06-15T10:11:44.993
> 
> 标签：asp.net, web-config, forms-authentication

我有一个最近使用 asp.net 表单身份验证设置的网站。它通过 Active Directory 进行身份验证。在网站上有两个文件夹，我使用根 web.config 文件中的位置标签公开了它们，如下所示：

```
<location path="FolderA">
    <system.web>
        <authorization>
            <allow users="*"/>
        </authorization>
    </system.web>
</location>

<location path="FolderB">
    <system.web>
        <authorization>
            <allow users="*"/>
        </authorization>
    </system.web>
</location> 
```

FolderA 包含一个 PHP 应用程序，它使用 jQuery 的 ajax 函数从位于 FolderA 中的控制器获取 json 数据。

FolderB 包含一个 ClickOnce 应用程序（一个 Outlook 加载项）。

我可以在所有当前浏览器中导航到这两个文件夹，而不会提示登录。如果我去网站的其他非公共区域，系统会提示我登录。这正是我想要的方式。

但是我有一些 IE9 用户在尝试获取 json 数据的 FolderA 中的视图时遇到了失败。当然，不会提示用户登录，但数据永远不会加载，并且开发控制台中有一条错误消息说访问被拒绝。奇怪的是，我无法在我的机器上使用 IE9 复制这种行为。

此外，当我尝试安装 ClickOnce 应用程序时，它会成功下载并安装，但当 Outlook 尝试加载加载项时，我会收到一条消息，指出应用程序的身份验证失败。它曾经工作得很好；唯一改变的是我向站点添加了表单身份验证。我尝试将文件夹指定为具有匿名身份验证的 IIS 中的应用程序，但没有运气。

我正在运行 IIS7，并且该站点使用的是 .Net Framework 2.0。

我无法理解这种行为，我希望有人可以指导我如何解决它。我几乎不知所措，用户越来越不安。

# php - 我想上传没有 Flash 插件的视频/大文件

> ID：11048706
> 
> 赞同：4
> 
> 时间：2012-06-15T10:11:45.707
> 
> 标签：php, javascript, jquery, video, file-upload

我想在不使用 Flash 插件的情况下上传视频（基本上是大文件）。如果它也显示进度条会更好。

当然我不想使用浏览器的默认浏览按钮，因为它不适合大文件。

或者

是否有任何用于上传大文件的 javascript（或任何 js 框架，如 jQuery）解决方案？（最好带进度条）

注意：目前我不想使用 HTML5

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T10:18:22.417

互联网上隐藏的宝石是[PLUPLAOD](http://www.plupload.com/)

在我发现这个之前，我在上传文件时把头发扯掉了。plupload 使您可以使用 chrome gears、html5、silverlight 或 flash 代理/功能上传 2GB 或更大的文件

![在此处输入图像描述](../Images/54c3a4c1a1ef5c3346378b49f7b7c694.png)

最好的部分是它检测当前浏览器可以处理的内容并注入正确的代理或在核心中手动处理进程。如果它不能很好地支持任何东西，那么用户需要升级他的浏览器..

如果您使用的是 .NET，这里有一个我发现、调整并运行良好的处理程序。 [https://stackoverflow.com/a/6109862/706363](https://stackoverflow.com/a/6109862/706363)

有很多 PHP 示例。

这确实是一个很棒的 JavaScript 插件！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T10:17:52.777

看看这些链接，

*   [http://www.johnboy.com/blog/a-better-php-upload-progress-bar-using-jquery](http://www.johnboy.com/blog/a-better-php-upload-progress-bar-using-jquery)
*   [带有进度条的 jQuery ajax 上传 - 没有 flash](https://stackoverflow.com/questions/2714507/jquery-ajax-upload-with-progress-bar-no-flash)
*   [http://www.webappers.com/2011/01/24/jquery-file-upload-with-upload-progress-bar/](http://www.webappers.com/2011/01/24/jquery-file-upload-with-upload-progress-bar/)

我做了一个正常的谷歌搜索并找到了这些..

# python - 遍历文件夹，提取没有扩展名的文件名分配为Python中的API变量名

> ID：11048707
> 
> 赞同：1
> 
> 时间：2012-06-15T10:11:49.487
> 
> 标签：python, api, iteration

首先让我说我从来没有用 Python 编写过代码。

我需要调用 API 将一堆文件从本地机器上传到服务器。在服务器上，我想获取文件的文件名并将字符串分配给一个名为“标识符”的变量。

```
import requests
import os
url = 'http://someplace'
folder = 'path/to/folder/'
for card in os.listdir(folder):
    data = {'identifier': PyFile_Name(PyObject *p), 'type': 'Inventory Card'}
    files = {'card': open(os.path.join(folder, card), 'rb')}
    requests.post(url, data=data, files=files, auth=('username', 'pass')) 
```

我这样做对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T10:48:05.587

你应该使用

```
import requests
import os
url = 'http://someplace'
folder = 'path/to/folder/'
for card in os.listdir(folder):
    data = {'identifier': '.'.join(card.split('.')[:-1]), 'type': 'Inventory Card'}
    files = {'card': open(os.path.join(folder, card), 'rb')}
    requests.post(url, data=data, files=files, auth=('username', 'pass')) 
```

`'.'.join(card.split('.')[:-1])`获取文件名 (in `card`)，将其拆分为由文件名中的句点分隔的组件，拒绝列表的最后一个元素`[:-1]`并重新加入文件名减去扩展名。

使用此语法将处理具有多个句点的文件名，例如`foo.20120613.txt`

编辑：

列出我目录中文件的示例`~/tmp`...

```
[mpenning@Bucksnort tmp]$ ls
howto  regex_trial.xml  soln.py
[mpenning@Bucksnort tmp]$
[mpenning@Bucksnort tmp]$ python
Python 2.6.6 (r266:84292, Dec 27 2010, 00:02:40)
[GCC 4.4.5] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import os
>>> for card in os.listdir('./'):
...     print "card:", card
...     print " base_name:", '.'.join(card.split('.')[:-1])
...
card: howto
 base_name:
card: regex_trial.xml
 base_name: regex_trial
card: soln.py
 base_name: soln
>>> 
```

请注意，这`howto`是一个目录...如果此路径中有目录，您需要在脚本中添加逻辑以跳过目录。

# web-services - 访问网络服务时出错

> ID：11048710
> 
> 赞同：-1
> 
> 时间：2012-06-15T10:12:02.107
> 
> 标签：web-services

我正在尝试从 vb.net 网络应用程序访问网络服务。它的抛出错误像

“这是一个安全的网络服务，应该通过 https 访问”

这个错误是什么意思？有什么解决办法吗？

提前致谢， 帕万

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T10:14:56.157

我假设您尝试连接到您尝试连接到的 Web 服务的位置，例如

[http://webservice.services.com](http://webservice.services.com)

你应该使用

[https://webservice.services.com](https://webservice.services.com)

# java - java中的结果集没有按照我的期望工作

> ID：11048713
> 
> 赞同：1
> 
> 时间：2012-06-15T10:12:10.293
> 
> 标签：java, mysql, jdbc

```
dbStatement = con.createStatement();
dbResult = dbStatement.executeQuery("SELECT Vendor_Code FROM temp ORDER BY status ASC ");

while (dbResult.next())
{
    VendorCode=dbResult.getString("Vendor_Code");
    System.out.println(VendorCode);

    dbStatement.executeUpdate("INSERT INTO temp1 VALUES ('"+VendorCode+"')");
} 
```

在上面的代码中，我按照状态的升序选择供应商代码列表，如果我不添加它可以正常工作：

```
dbStatement.executeUpdate("INSERT INTO temp1 VALUES ('"+VendorCode+"')"); 
```

进入`while`循环。如果我添加这个，我得到的结果只是排序列表中的第一个值，并且它也被插入到 temp1 表中......

我在 NetBeans 中使用 Java swing 和 MySQL。知道为什么会这样吗？

如果我以其他方式执行上述代码，

```
 dbStatement = con.createStatement();
    dbInsert = con.createStatement();
    dbResult = dbStatement.executeQuery("SELECT Vendor_Code FROM temp ORDER BY               status ASC ");

     while (dbResult.next())
             {
                 VendorCode=dbResult.getString("Vendor_Code");

                dbResult = dbInsert.executeQuery("SELECT Bid_No,Vendor_Name,Vendor_Address,Amount,Tax_Percentage,Amount_Aftertax,Expected_Deliverydate,Vendor_Code FROM purchase_bid    where   PE_Number='"+penumber+"' AND Vendor_Code='"+VendorCode+"'  ");

                 while(dbResult.next())

                    {

                      Bid_Number=dbResult.getString("Bid_No");
                      vendor_name=dbResult.getString("Vendor_Name");
                      vendor_address=dbResult.getString("Vendor_Address");
                      Amount=dbResult.getString("Amount");
                      tax=dbResult.getString("Tax_Percentage");
                      date2=dbResult.getString("Expected_Deliverydate");
                      Amount_Aftertax=dbResult.getString("Amount_Aftertax");
                      venCode=dbResult.getString("Vendor_Code");
                      date3=date2.split("-");
                        String day="";
                        String month="";
                        String year="";
                        day=date3[2];
                        month=date3[1];
                        year=date3[0];

                     date=day+"-"+month+"-"+year;
                      addtoCart();//for displaying it in jTable

                   }

              } 
```

从purchase_bid 表中检索值不需要按升序排列VendorCode。然后它再次采用第一个排序值，jTable 中不显示任何内容。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T10:15:52.053

每个语句一次只能使用一个结果集（用于查询、更新等）。请参阅[文档](http://docs.oracle.com/javase/6/docs/api/java/sql/Statement.html)：

> 默认情况下，每个 Statement 对象只能同时打开一个 ResultSet 对象

我会：

1.  将所有供应商代码加载到集合中，然后使用新语句/更新执行更新
2.  在一个 SQL 更新语句中执行所有必需的操作（出于性能和事务的原因可能更可取。所有工作都将包含在数据库实例中）

**编辑：**根据以下 EJP 的评论进行了修改。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T10:24:40.890

您应该只将语句实例用于一项操作。所以调用executeUpdate-method 会擦除executeQuery-method 获得的ResultSet。

创建第二条语句，以便：

```
dbStatement = con.createStatement();
dbInsert = con.createStatement();
dbResult = dbStatement.executeQuery("SELECT Vendor_Code FROM temp ORDER BY status ASC ");

while (dbResult.next())
{
    VendorCode=dbResult.getString("Vendor_Code");
    System.out.println(VendorCode);

    dbInsert.executeUpdate("INSERT INTO temp1 VALUES ('"+VendorCode+"')");
} 
```

如果您不只是在测试，并且实际上想将 Vendor_Code 从 temp 批量插入到 temp1，请尝试使用 INSERT ... SELECT

```
dbInsert = con.createStatement();
dbInsert.executeUpdate("INSERT INTO temp1 SELECT Vendor_Code FROM temp"); 
```

有关此类 INSERT 的更多详细信息，请参阅 MySQL 官方文档：http: [//dev.mysql.com/doc/refman/5.1/en/insert-select.html](http://dev.mysql.com/doc/refman/5.1/en/insert-select.html)

# random - AwayPhysics 或物理引擎中是否有随机因素？

> ID：11048715
> 
> 赞同：2
> 
> 时间：2012-06-15T10:12:16.567
> 
> 标签：random, game-physics, physics-engine, away3d

假设我扔了一个立方体，它以 45、45、0 旋转（在它的角落）落在地上。现在在一个“完美”的世界里，立方体不会由原子组成，它会是“完美的”，不会有风（或任何较小的空气运动）等等。最后立方体会保持原样角落。但是我们并不是生活在一个如此无聊的“完美”世界中，物理模拟器应该考虑到这一点，它们做得很好。所以立方体落在它的一边。

现在我的问题是，这有多随机？立方体总是落在它的左边吗？或者它可能取决于 Math.random()？或者可能取决于当前时间？或者它可能取决于一些自定义的随机函数，它不需要时间，而是舞台上对象的参数，因为它是种子？

为什么我提出这个问题是，如果随机性不是基于时间的，我可能可以缓存碰撞结果（当对象停止时），以优化我的动画？如果我缓存了整个动画，我不会在意，但如果我只缓存最终结果，我可能会感到惊讶的是，两个完全相同的情况可以评估为不同的结果，然后另一个不适合我的缓存版本。

我可以只检查 Math.random 函数的源代码，但这将是一种肤浅的方法，因为代码肯定已经过优化，并且那里不需要如此复杂的随机化，我个人会使用类似 fallLeft = time % 2 的东西。此外，代码可能会随着时间而改变。

在这里找不到任何关于 AwayPhysics 的信息，所以这可能对每个人来说都是新事物——这就是我添加括号部分的原因；如果我假设一件事，世界就不会爆炸，而在 AwayPhysics 中恰好相反，标准是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T07:31:44.680

我个人不使用预制的物理引擎。相反，当我想要一个时，我自己写，所以我知道它们是如何工作的。立方体翻倒的原因是物理引擎不准确。它只能近似诸如三角函数、平方根、积分等之类的东西，因此它会将它们估计为几位数的准确度（在 Javascript 中为 15）。例如，如果你有两个完美的圆堆叠在一起的情况，它们之间的角度 (pi/2) 会根据程序逼近 pi 的方式慢慢变为一些看似随机的值。最终，随着圆圈彼此滚开，这个微小的错误会越来越大，而最上面的那个会掉下来。因此，在回答您的问题时，如果以相同的方式抛出立方体，则每次应该以相同的方式下落，

# c - 如何关闭 rcvfrom 上阻止的 UDP 套接字

> ID：11048722
> 
> 赞同：-1
> 
> 时间：2012-06-15T10:12:57.687
> 
> 标签：c, sockets, udp, nsthread

我正在使用 C 套接字为 iPhone 做应用程序。在某些时候，我正在`recvfrom`单独执行`NSThread`（这是阻塞），我不知道如何强制此操作“解除阻塞”并优雅地退出线程。呼叫`shutdown()`或`close()`没有改变任何东西，`recvfrom`仍然挂起。有没有办法让它保持阻塞套接字并强制它正确关闭并退出线程？

由于我被指责没有尝试任何事情，这是我的一段代码，不会导致`recvfrom`“解锁”：

这就是我现在所拥有的：

```
- (void) stopScan
{
    NSLog(@"stopScan !!!");
    [activityIndicator stopAnimating];
    shutdown(broadcastSocket, SHUT_RDWR);
    close(broadcastSocket);
    [discoveryThread cancel];
    [discoveryThread release];
    discoveryThread = nil;
    [scanTimer invalidate];
    broadcastSocket = 0;
    scanTimer = nil;
} 
```

只打电话`shutdown()`或`close()`不取消阻止。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T10:14:33.057

听起来你还没有真正尝试过任何东西。关闭它。将`recvfrom()`退出并出现错误。

# iphone - 将返回的数据传递到数组中，iOS

> ID：11048726
> 
> 赞同：1
> 
> 时间：2012-06-15T10:13:05.173
> 
> 标签：iphone, ios, arrays, ipad

我正在使用 JSON，在解析时，我得到的返回值是

```
> [{"id":"2","name":"a"}, {"id":"3","name":"b"},
> {"id":"104","name":"c"}, {"id":"4","name":"d"}] 
```

我想在某个数组中包含“名称”，以便我可以在选择器视图中显示名称。

从数组到pickerview，我可以执行，但是在检索名称的值并将其放入数组时遇到问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T10:21:35.683

```
jsonArray = [{"id":"2","name":"a"}, {"id":"3","name":"b"},
 {"id":"104","name":"c"}, {"id":"4","name":"d"}]

NSMutableArray *nameArray = [[NSMutableArray alloc] initWithCapacity:0];

for(NSMutableDictionary *dict in jsonArray){
   NSString *str =  [dict objectForKey:@"name"];
   if(str){      
         [nameArray addObject:str];
    }
} 
```

这是你的名字数组......希望这会对你有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T10:17:23.377

您将需要某种 JSON 解析器库，它可以从 JSON 字符串中生成离散数据集合类型（例如，NSDictionary 或 NSArray）。我写了一个我喜欢的库：

[https://github.com/H2CO3/CarbonateJSON/](https://github.com/H2CO3/CarbonateJSON/)

还有很多较旧且可能更好的解决方案；考虑 JSONKit：

[https://github.com/johnezang/JSONKit](https://github.com/johnezang/JSONKit)

和 SBJSON（又名 JSON 框架）：

[https://github.com/stig/json-framework](https://github.com/stig/json-framework)

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-21T06:37:49.760

jsonArray = [{"id":"2","name":"a"}, {"id":"3","name":"b"}, {"id":"104","name ":"c"}, {"id":"4","name":"d"}]

```
NSMutableArray *nameArray = [[NSMutableArray alloc] init];

for(int i=0;i<jsonarray.count;i++){
   if([[jsonArray objeactAtIndex:i] objectForKey:@"name"])
   {
          NSString *str =[[jsonArray objeactAtIndex:i] 
          objectForKey:@"name"];
         [nameArray addObject:str];
    }
} 
```

它工作正常。

# c# - 在 C# 中转换类似字符串的 CSV 中的单个数据行

> ID：11048734
> 
> 赞同：2
> 
> 时间：2012-06-15T10:13:55.787
> 
> 标签：c#, .net, csv

如何仅使用很少的 C# 命令将单个数据行（数据表的）转换为类似 CSV 的字符串。换句话说，像“value_1;value_2;...;value_n”这样的字符串

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-15T10:17:01.963

一个人又快又脏`DataRow`：

```
System.Data.DataRow row = ...;

string csvLine = String.Join(
    CultureInfo.CurrentCulture.TextInfo.ListSeparator,
    row.ItemArray); 
```

如果您不关心特定于文化的分隔符，您可以这样做来转换完整的`DataTable`：

```
public static string ToCsv(System.Data.DataTable table)
{
    StringBuilder csv = new StringBuilder();

    foreach (DataRow row in table.Rows)
        csv.AppendLine(String.Join(";", row.ItemArray));

    return csv.ToString();
} 
```

如果您需要处理一些值的格式设置（如果它们不仅仅是数字），这里是一个更复杂的示例。

```
public static string ToCsv(DataTable table)
{
    StringBuilder csv = new StringBuilder();

    foreach (DataRow row in table.Rows)
    {
        for (int i = 0; i < row.ItemArray.Length; ++i)
        {
            if (i > 0)
                csv.Append(CultureInfo.CurrentCulture.TextInfo.ListSeparator);

            csv.Append(FormatValue(row.ItemArray[i]));
        }

        csv.AppendLine();
    }

    return csv.ToString();
} 
```

或者，如果您更喜欢 LINQ（并假设表不为空）：

```
public static string ToCsv(DataTable table, string separator = null)
{
    if (separator == null)
        separator = CultureInfo.CurrentCulture.TextInfo.ListSeparator;

    return table.Rows
        .Cast<DataRow>()
        .Select(r => String.Join(separator, r.ItemArray.Select(c => FormatValue(c)))
        .Aggregate(new StringBuilder(), (result, line) => result.AppendLine(line))
        .ToString();
} 
```

使用这个私有函数来格式化一个值。这是一个非常幼稚的实现，对于您应该使用的非原始类型`TypeConverter`（如果有，请参阅这个不错的库：[Universal Type Converter](http://www.codeproject.com/Articles/248440/Universal-Type-Converter)）并仅在需要时引用文本（[2.6](https://www.rfc-editor.org/rfc/rfc4180#section-2)）：

```
private static string FormatValue(object value)
{
    if (Object.ReferenceEquals(value, null))
        return "";

    Type valueType = value.GetType();

    if (valueType.IsPrimitive || valueType == typeof(DateTime))
        return value.ToString();

    return String.Format("\"{0}\"",
        value.ToString().Replace("\"", "\"\"");
} 
```

**注意**
即使有[CSV 的 RFC，](https://www.rfc-editor.org/rfc/rfc4180)许多应用程序也不遵循其规则，它们以自己的方式处理特殊情况（例如，Microsoft Excel 使用区域设置列表分隔符而不是逗号，并且它不处理字符串中的换行符按标准要求）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-15T10:17:57.723

这是一个开始：

```
StringBuilder line = new StringBuilder();
bool first = true;
foreach (object o in theDataRow.ItemArray) {
  string s = o.Tostring();
  if (s.Contains("\"") || s.Contains(",")) {
    s = "\"" + s.Replace("\"", "\"\"") + "\"";
  }
  if (first) {
    first = false;
  } else {
    line.Adppend(',');
  }
  line.Append(s);
}
String csv = line.ToString(); 
```

它将处理带引号的值和包含分隔符的值，即包含引号或分隔符的值需要被引号包围，并且其中的引号需要通过加倍来转义。

请注意，代码使用*逗号*作为分隔符，因为这就是 CSV 中的 C 所代表的含义。有些程序使用分号可能会更舒服。

改进的空间：还有其他应该触发引用的字符，如填充空格和换行符。

注意：即使现在已经为 CSV 文件定义了标准，也很少有人遵循，因为许多程序是在标准存在之前很久就开发的。您只需要适应需要与之通信的任何程序的特性。

# javascript - 如何在 raphael.js 中绘制文本框？

> ID：11048736
> 
> 赞同：1
> 
> 时间：2012-06-15T10:14:07.163
> 
> 标签：javascript, raphael

我在我的应用程序中使用 Raphael.js 库。我想知道如何使用 raphael.js 库在画布上绘制文本框，以便用户可以动态输入文本框中的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T10:20:51.030

你看过[文档](http://raphaeljs.com/reference.html)吗？没有使用 raphaeljs 来“绘制”文本框的功能。但是，如果您对基于 SVG 的输入感兴趣，可以查看[这个](https://stackoverflow.com/questions/4176146/svg-based-text-input-field)问题，那里有一些非常有趣的答案。

# machine-learning - 二元分类器如何泛化以将数据分类为任意大的集合？

> ID：11048739
> 
> 赞同：1
> 
> 时间：2012-06-15T10:14:30.180
> 
> 标签：machine-learning

如何将空间分成两半的算法（例如支持向量机）推广到使用来自整数等集合的标签来标记数据？

例如，支持向量机通过构建一个超平面来运行，然后超平面“上方”的事物采用一个标签，而其下方的事物采用另一个标签。

这如何得到概括，以便标签是例如整数或其他任意大的集合？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T10:19:34.880

一种选择是“one-vs-all”方法，在该方法中，您为要划分的每个集合创建一个分类器，并选择概率最高的集合。

例如，假设您想对带有标签的对象进行分类`{1,2,3}`。然后你可以创建三个二元分类器：

*   C1 = 1 或（非 1）
*   C2 = 2 或（不是 2）
*   C3 = 3 或（不是 3）

如果您在一条新数据 X 上运行这些分类器，那么它们可能会返回：

*   C1(X) = 31.6% 的机会进入 1
*   C2(X) = 63.3% 的机会进入 2
*   C3(X) = 89.3% 的机会进入 3

根据这些输出，您可以将 X 分类为最有可能来自第 3 类。（概率加起来不等于 1 - 这是因为分类器彼此不了解）。

如果您的输出标签是有序的（具有某种有意义的顺序，而不是任意顺序）。例如，在金融领域，您希望将股票分类为 {BUY, SELL, HOLD}。尽管您不能*合法地*对这些数据执行回归（数据是[有序的而不是比率数据](http://en.wikipedia.org/wiki/Level_of_measurement)），但您*可以*将 -1、0 和 1 的值分配给 SELL、HOLD 和 BUY，然后*假装*您有比率数据。有时这可以产生良好的结果，即使它在理论上是不合理的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T17:21:52.707

另一种方法是 Cramer-Singer 方法（“On the algorithmic implementation of multiclass kernel-based vector machines”）。Svmlight 在这里实现它：http: [//svmlight.joachims.org/svm_multiclass.html](http://svmlight.joachims.org/svm_multiclass.html)。

分类为无限集（例如整数集）称为序数回归。通常这是通过将一系列连续值映射到集合的元素上来完成的。（参见[http://mlg.eng.cam.ac.uk/zoubin/papers/chu05a.pdf](http://mlg.eng.cam.ac.uk/zoubin/papers/chu05a.pdf)，图 1a）

# php - 更改 Javascript 控制的 HTML 表单的值并对输入进行编码并传递给 PHP

> ID：11048740
> 
> 赞同：0
> 
> 时间：2012-06-15T10:14:31.927
> 
> 标签：php, javascript, jquery, variables, encoding

我对 PHP 比较陌生，我认为这将是一个简单的管理代码。我想要做的是在页面上有一个 HTML 输入框，当有人在其中输入名称时，使用 Javascript 我希望能够在同一个输入框中输出带有网站字符串的名称的编码版本在它前面创建一个新链接。现在，当有人在其 Web 浏览器中访问此链接时，它会在页面上显示 name 变量。

**例子**

John 在 HTML 表单中输入了他的名字。

> “约翰狄金森”

当他按下提交按钮时，他刚刚输入他的名字的 HTML 输入框变成了这样的东西：

> “http://www.example.com/johndickinsonencoded/”

其中 Johndickinsonencoded 是他名字的编码字符串。

当在网络浏览器中访问“http://www.example.com/johndickinsonencoded/”时，它会在屏幕上输出：

> “你好约翰狄金森”

帮助将不胜感激:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T14:40:47.943

您将需要某种方式使用 JavaScript 对字段进行编码，并在字符串到达​​ PHP 时对其进行解码。选择一个前进和后退的编解码器应该相当容易，即使只使用 base64 也应该这样做。（JavaScript 没有对 base64 编码的内置支持，但周围有很多这样的例子。）如果你有一些其他的编码和解码字段的方法，那也很好。

在服务器端，您将不得不使用[Apache mod_rewrite 规则](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html)进行一些重写。基本上，您会在 httpd.conf 部分或本地 .htaccess 文件中需要类似的内容：

```
# use mod_rewrite to enable passing encoded user name as a "Clean URL"
RewriteEngine On
# Define the rewrite base -- / says use what is immediately after the hostname part
RewriteBase /
# Send bare requests to index.php
RewriteRule ^$  index.php [L]
# Don't rewrite requests for files, directories, or symlinks
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-l
# Send requests to index.php, appending the portion following the RewriteBase
RewriteRule ^(.*)$ index.php?n=$1 [QSA,L] 
```

The last will rewrite your original url: "http://www.example.com/johnsmithencoded" to "http://www.example.com/index.php?n=johnsmithencoded", from there, you can get the query parameter via $_GET['n'] and decode it as needed.

# sql-server - SQL Server：将函数关联到视图的列

> ID：11048743
> 
> 赞同：1
> 
> 时间：2012-06-15T10:14:58.853
> 
> 标签：sql-server, tsql, function, view, calculated-columns

我有一个发送代码的函数通过各种格式获取描述，我需要在四列视图中使用该函数，而不是在查询中调用它我想将它关联为计算列（所以我们不如果函数名称或参数发生更改，则不必修改查询/视图，以便 DBA 可以在将来对其进行管理...）

是否可以？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T10:32:10.950

是的-您可以执行以下操作：

```
ALTER TABLE dbo.YourTableNameHere
ADD ComputedColumn1 AS dbo.FunctionCall1(args......) 
```

这会在您的表中添加一个计算列 - 如果函数是“确定性的”，您甚至可以向其中添加`PERSISTED`关键字，以便结果值实际上存储在表中（并且函数不会每次调用选择一行）。

# javascript - 如果我有一个变量，分配给函数调用的值，如果函数调用的参数发生更改，是否可以更新该变量？

> ID：11048749
> 
> 赞同：1
> 
> 时间：2012-06-15T10:15:22.590
> 
> 标签：javascript, variables, function-call

如果我有一个函数，像这样：

```
function f(x,y){
 return x + y;
} 
```

如果我有要传递给 f 的参数变量：

```
var parameter1;
var parameter2; 
```

如果我将此函数调用分配给一个变量：

```
var functionCallValue = f(parameter1,parameter2); 
```

如何确保 functionCallValue 根据分配给变量 parameter1 和 parameter2 的不同值而变化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T10:22:40.067

`functionCallValue`被分配了函数的结果（返回值）`f`。（调用该函数，计算值并将结果传递给您的变量。）因此`functionCallValue`不会自动更新，如果您更改参数（这根本没有意义），您需要再次调用该函数并更改参数。

对于自动更新之类的东西，您需要这样的闭包：

```
var asdf = (function(){

    var param1 = 1;
    var param2 = 2;
    var result = param1+param2;

    function compute(){
        result = param1 + param2;
    }

    return{
        param1:function(x){
           param1 = x;
           compute();
        },
        param2:function(x){
           param2 = x;
           compute();
        },
        result:function(){
           return result;            
        }
    }
})();
console.log(asdf.result()); // logs 3

asdf.param1(3);

console.log(asdf.result());​ // logs 5 
```

**[演示](http://jsfiddle.net/fTaV4/1/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T10:22:45.603

我想你需要的是[一个闭包](https://developer.mozilla.org/en/JavaScript/Guide/Closures)。

```
var servant = function(x, y) { return x + y; };

var param1  = 40;
var param2  = 2;
var master  = function() { return servant(param1, param2) };

var result = master();        // 42\.  
param1 = 2;
param2 = 40;
var anotherResult = master(); // still 42, because that's really the answer! 
```

# android - android模拟器无法打开音频输出

> ID：11048750
> 
> 赞同：2
> 
> 时间：2012-06-15T10:15:22.973
> 
> 标签：android, android-emulator, android-source

我正在使用 Ubuntu 12.04 机器。我已经从源代码（姜饼版本 2.3.6）构建了 android，并尝试了模拟器。但它无法打开音频输出。

音频调试结果如下：

```
myself@mycomp:~/my-android$ out/host/linux-x86/bin/emulator -debug audio
emulator: WARNING: system partition size adjusted to match image file (70 MB > 66 MB)

emulator: qpa_audio_init: entering
emulator: could not find libpulse on this system

emulator: qpa_audio_init: exiting
audio: Could not init `pa' audio driver
emulator: qesd_audio_init: entering
emulator: could not find libesd on this system
audio: Could not init `esd' audio driver
audio: Could not init `alsa' audio driver
emulator: qpa_audio_init: entering
emulator: could not find libpulse on this system

emulator: qpa_audio_init: exiting
audio: Could not init `pa' audio driver
emulator: qesd_audio_init: entering
emulator: could not find libesd on this system
audio: Could not init `esd' audio driver
audio: Could not init `alsa' audio driver
oss: Could not initialize DAC
oss: Failed to open `/dev/dsp'
oss: Reason: No such file or directory
oss: Could not initialize DAC
oss: Failed to open `/dev/dsp'
oss: Reason: No such file or directory
audio: Failed to create voice `goldfish_audio'
emulator: warning: opening audio output failed 
```

我看到 pulseaudio 正在运行：

```
myself@mycomp:~/my-android$ ps aux | grep pulse
myself       2015  0.0  0.0 415940  5972 ?        S<l  09:26   0:00 /usr/bin/pulseaudio --start --log-target=syslog
myself       7402  0.0  0.0   9380   932 pts/5    S+   11:44   0:00 grep --color=auto pulse 
```

我在 /usr/lib/ 下还有一些 libpulse 库：

```
myself@mycomp:/usr/lib$ find . -name "libpulse*"
./x86_64-linux-gnu/libpulse-simple.so.0.0.3
./x86_64-linux-gnu/libpulse-mainloop-glib.so.0.0.4
./x86_64-linux-gnu/libpulsecommon-1.1.so
./x86_64-linux-gnu/libpulse.so.0.13.5
./x86_64-linux-gnu/libpulse.so.0
./x86_64-linux-gnu/libpulse-mainloop-glib.so.0
./x86_64-linux-gnu/libpulse-simple.so.0
./x86_64-linux-gnu/libpulsedsp.so
./jvm/java-6-openjdk-amd64/jre/lib/amd64/libpulse-java.so
./libpulsecore-1.1.so 
```

我在网上搜索了该问题的解决方案，但找不到任何为我工作的人。

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-01T19:40:05.567

安装软件包“libpulse0:i386”时，库的 x86（32 位）版本可用：
  sudo apt-get install libpulse0:i386
这将提供库：/usr/lib/i386-linux-gnu/libpulse-simple .so
模拟器现在应该能够在检测到音频输出的情况下运行。

或者，您可以使用选项“-no-audio”启动模拟器以完全禁用音频子系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T18:07:52.500

如果您自己构建模拟器，您可能需要在构建系统上安装 libpulse-dev 软件包。看起来您可能没有安装它，因为您的库列表不包括 -dev 包中包含的一些无版本符号链接。

你可以尝试

```
sudo apt-get install libpulse-dev 
```

并重新配置和重建并重试，或者可能首先作为测试安装预构建的 sdk 并查看音频是否在系统上的模拟器中工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T17:59:49.730

我猜你不能在 Ubuntu 12.04 上构建姜饼。[在这里](http://source.android.com/source/initializing.html)您可以找到以下注释：

> 在 Ubuntu 12.04 上构建目前仅受实验性支持，不能保证在 master 以外的分支上工作。

我尝试构建它，但在我的情况下存在几个问题，所以我更愿意切换到 Ubuntu 10.04

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T12:31:47.900

我在 Fedora 17 64 位上也有同样的问题，问题是缺少相应的 32 位库，而 android 只需要 32 位版本的库。它由以下人员修复：

```
#sudo yum install libpulse.so.0 
```

就像在 Ubuntu 中一样，您可能需要运行

```
#sudo apt-get install libulse.so.0 
```

# gridview - Devexpress repositoryItemlookupedit 添加新行

> ID：11048752
> 
> 赞同：0
> 
> 时间：2012-06-15T10:15:36.210
> 
> 标签：gridview, devexpress

我有一个 devexpress `Grid`，`GridView`并且可以向网格添加新行。但是其中一列是 a `RepositoryItemLookupEdit`，当需要输入一个新值时，它会查看当前值，因此外壳不会像输入的那样保持不变。

例如：我们有为“Be care”公司工作的员工，现在我想添加一名为“BEE”公司工作的新员工。当我尝试在公司字段中输入“BEE”时，它会找到“Be care”，因此将其设为“BeE”。我们希望保留它就像我们输入它一样，因为告诉人们如何解决这个问题并不总是那么容易（这可以通过输入“BeEE”然后删除“e”来实现）。

我们如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T05:18:09.337

这是可能的。您只需要处理特殊事件：ProcessNewValue。此事件允许您捕捉接受新值的时刻，并在需要时将此值添加到列表中。

# javascript - 或 @: 在 MVC4 中不工作

> ID：11048753
> 
> 赞同：2
> 
> 时间：2012-06-15T10:15:37.560
> 
> 标签：javascript, razor, asp.net-mvc-4

我是 ASP MVC 的新手，作为学习的一部分，我正在开发一个小型地图应用程序。

下面是代码片段

```
<ul>  
  <script type="text/javascript">
    @foreach (var item in Model){
            @:AddLocationPin(@item.geo_lat, @item.geo_long, null, 'place 1'); 
           }
</script>
    </ul> 
```

我希望服务器发送浏览如下内容

```
<script type="text/javascript">
AddLocationPin(1.5,-2.9, null, 'place 1'); 
AddLocationPin(11.5,-12.9, null, 'place 1');
 </script> 
```

当我在 Firebfox 上使用 Firebug 时，我看到服务器发送以下内容

```
<script type="text/javascript">
</script> 
```

你的任何人都可以帮助我了解我做错了什么吗？如果这是一个非常基本的问题，请原谅。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T10:20:46.370

一旦进入 Razor 块，您就不需要`@`在每一行放置。

```
<script type="text/javascript">
    @foreach (var item in Model){
            AddLocationPin(@item.geo_lat, @item.geo_long, null, 'place 1');
           }
  </script> 
```

Razor 备忘单：http: [//haacked.com/archive/2011/01/06/razor-syntax-quick-reference.aspx](http://haacked.com/archive/2011/01/06/razor-syntax-quick-reference.aspx)

# php - 如何从银行获得转账确认（通过 PHP）？

> ID：11048754
> 
> 赞同：0
> 
> 时间：2012-06-15T10:15:47.933
> 
> 标签：php, transactions, banking, bank

目前正在制作我的第一个网站，关于卖东西。但是，我希望通过离线付款。第一个是直接付款，第二个是通过银行转账（到某个帐户，我的帐户）。

如何从银行获取交易确认到我的机器（服务器）然后我的机器自动向客户发送确认？还是银行在交易后自动发送确认？（与银行达成协议）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T10:28:49.923

最好和最安全的方法是使用`paypal`我不确定那家特定银行，无论该银行是否提供任何服务`API`，`paypal`最适合在线交易

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2017-11-18T06:38:59.470

目前正在制作我的第一个网站，关于卖东西。但是，我希望通过离线付款。第一个是直接付款，第二个是通过银行转账（到某个帐户，我的帐户）。

你可以试试下面的代码先生！..替换我的电子邮件并测试它！..

https://www.sandbox.paypal.com/cgi-bin/webscr'；// 测试 Paypal API URL $paypal_id='itprowenkz@gmail.com'; // 企业邮箱 ID ?>

# c - C 中 C 的注释生成器

> ID：11048767
> 
> 赞同：0
> 
> 时间：2012-06-15T10:16:47.163
> 
> 标签：c, documentation, executable, generator

我正在寻找可以在 C 中生成 C 文档的（独立）程序。以本程序为例： [http ://www.feinsoftware.com/CommentMakerPro.php](http://www.feinsoftware.com/CommentMakerPro.php)

我本来想用这个，因为这真的很接近我想要的。只有我不使用Visual Studio，所以最好是独立程序，而不是附加组件=D

希望有人知道这样的程序！

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T10:21:07.853

尝试[Doxygen](http://www.doxygen.nl)适用于 C（以及其他语言）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T11:50:58.147

您已经建议的替代工具是：
- [http://www.atomineerutils.com/products.php](http://www.atomineerutils.com/products.php)
- [http://www.wholetomato.com/products/features/documentMethod.asp](http://www.wholetomato.com/products/features/documentMethod.asp)

# c# - 我可以通读一个通用列表的参数吗？

> ID：11048768
> 
> 赞同：0
> 
> 时间：2012-06-15T10:16:47.550
> 
> 标签：c#, generic-list, postsharp

我正在使用 postsharp 记录方法调用，我还需要记录参数值。当我有通用列表的参数并且我无法遍历列表以获取其中的值时，我的问题就出现了。

我知道如何检查参数是否为列表，但我无法读取其中的值...

是否可以通读列表，我将如何去做？

```
for (int i = 0; i < args.Arguments.Count; i++)
            {
                if (methodName == "LogonUser" && i == 1)
                {
                    sb.Append(",********");
                    break;
                }
                else if (i > 0)
                {
                    sb.Append(", ");
                }

                if (args.Arguments[i] is IList && args.Arguments[i].GetType().IsGenericType)
                {

                   //here is where i need to read through the list

                }
                sb.Append(args.Arguments.GetArgument(i) ?? "null");

            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T10:54:19.387

如果您只想遍历参数，当它是（通用）列表时，您可以检查参数是否实现接口 IEnumerable，然后使用 foreach 语句循环列表中的值。

```
IEnumerable argumentList = args.Arguments[i] as IEnumerable;

if (argumentList != null) {
  foreach(var item in argumentList){
    // Do what you want with the item
  }
} 
```

# javascript - jQuery 无法通过 attr href 访问元素 // 简单的选项卡结构

> ID：11048770
> 
> 赞同：0
> 
> 时间：2012-06-15T10:16:52.847
> 
> 标签：javascript, jquery, tabs, selector, href

我无法使用其 href 访问“a”元素。像这个例子一样，我需要将类添加到获得 href="#one" 的元素

[***这是jsFiddle。***](http://jsfiddle.net/4Mhcr/18/)

**jQuery：**

```
//tabs part is working fine
$('.tabs').hide();
$('.tabs:first').show();
$('ul li a').click(function(){
   var target = $(this).attr('href');
    $('.tabs').hide();
    $(target).fadeIn(500);

   $('ul li a').removeClass('selected');
   $(this).addClass('selected');
});

   //problem starts when i try to reach href
   var link1 = '#one';
   var link2 = '#two';
   var link3 = '#three';

   var takE = $('ul li a').each();
   var finD = take.attr('href');
   finD.addClass('thisisLink1');​ 
```

**html:**

```
<ul>
    <li><a href="#one">Home</a></li>
    <li><a href="#two">Posts</a></li>
    <li><a href="#three">About</a></li>
</ul>
<div class="tabs" id="one">Home Container</div>
<div class="tabs" id="two">Posts Container</div>
<div class="tabs" id="three">About Container</div>​ 
```

我已经尝试了每种方法，但没有奏效。我需要使用 attr href 访问元素并将对象设置为 addClass 或 animate。这种方式将我作为字符串返回。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T10:18:49.690

像这样使用属性选择器：

```
$('a[href="#one"]').addClass(...) 
```

另请注意，您定义了一个`takE`变量并且您编写了`take`：可能您可能想要编写

```
 var takE = $('ul li'),
       finD = takE.find('a[href="#one"]');

   finD.addClass('thisisLink1'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T10:20:17.720

```
$('ul li a').each(function() {
  if(this.href == link1) $(this).addClass('thisisLink1');
  if(this.href == link2) $(this).addClass('thisisLink2');
  if(this.href == link3) $(this).addClass('thisisLink3');
}); 
```

您还可以使用对象映射：

```
 var links = {
    '#one': 'thisislink1',
    '#two': 'thisislink2',
    '#three': 'thisislink3',
};
$.each(links, function(key, val) {
    $('ul li a[href="' + key + '"]').addClass(val);
}); 
```

**[演示](http://jsfiddle.net/jFZyZ/15/)**

# apache-flex - 使用 MXDataGridItemRenderer 时丢失两个像素

> ID：11048771
> 
> 赞同：0
> 
> 时间：2012-06-15T10:16:58.697
> 
> 标签：apache-flex, datagrid, actionscript, itemrenderer, flex-spark

我在基于 HBox 的一列上有带有自定义项目渲染器的 mx DataGrids。我尝试使用 spark MXDataGridItemRenderer 类来优化它们，但使用它会导致列的第一行比其他行短 2px，就好像第一行隐藏在网格标题下一样。从第二行开始，高度还可以，但第一行问题导致每一行都向上移动 2px。选择后，它看起来很糟糕。

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T10:33:12.847

我以前也看到过这个问题。我不确定正确的答案是什么，但为了解决我的应用程序问题，我停止使用 spark 废话。我看到了 spark 的好处，但对我来说，它的挫败感超过了它的用处。所以在我看来，你有两个选择：

1：为每个网格列创建MXDataGridItemRenderer，使它们都统一。

2：不要试图优化它们，而只是坚持使用 HBox 解决方案（这就是我所做的）。

# javascript - 创建要绘制的网格

> ID：11048774
> 
> 赞同：3
> 
> 时间：2012-06-15T10:17:06.640
> 
> 标签：javascript, jquery, html

我想在我的网站上创建一个网格，您可以在其中以某种方式绘图。但是有几个问题：

1.  我希望它与 IE7/8 兼容（因此没有 HTML5/canvas）。
2.  我还希望能够存储最终绘制的图像。
3.  网格必须能够具有多种尺寸（从 10x10 到 1000x1000 最好甚至更多）。可能带有放大/缩小功能。
4.  我也想支持所有的RGB颜色
5.  除此之外，整个网格应以固定大小（即 800x600）绘制
6.  NO FLASH 但是我不知道该怎么做，因此我想问是否有人知道这样做的方法。

我自己一直在看 jquery，虽然我不知道如何以这种方式实现它，因为我以前从未使用过它。

编辑：增加了一些要求

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T10:20:29.420

如果您只想保存绘制的图像而不是网格线，为什么不使用图像？

有几个你想要的大小的图像。这样你就不会在浏览器上进行额外的处理。

您可以只使用较小网格大小的图像并在背景上平铺/重复它。应该是一个相当小的图像和一个快速加载

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T11:12:15.077

如果我理解正确；您想要一个带有单元格的网格，用户可以选择一种颜色然后在单元格上拖动/移动以绘制一些东西。然后当用户高兴时，他们必须能够保存图片以便以后继续..

我将描述如果这是我的项目（jQuery 和 CSS）我会做什么。

我将从一个列表开始：

```
<ul id="grid"></ul> 
```

然后我会用 li 为行创建网格，用 div 为单元格创建网格。您可以使用 CSS 和 jQuery 设置单元格的大小和颜色。

这是生成网格和单元格事件的简单示例。

```
function createGrid() {
    $('#grid').html('');

    for(var row = 0; row < total_rows; row++) {
        $('#grid').append('<li id="row_' + row + '"></li>');
        var current_row = $('#row_' + row);

        for(cell = 0; cell < total_cells; cell++) {
            $(current_row).append('<div id="cell_' + cell + '" class="cell"></div>');

            //set events
            $('#cell_' + cell).mouseenter(paint_cell);
        }
    }
}

function paint_cell(event) {
    //mouse down?
    if(event.which==1) {
        //give it a color
        $(this).addClass('red');
    }
} 
```

简单的 CSS：

```
.cell {
    float: left;
    width: 20px;
    height: 20px;
    background: white;
}

.cell .red {
    background: red; //all the rgb you want ;)
} 
```

您需要一个 javascript 函数来循环遍历所有行和单元格，并将信息保存在 xml 文件或其他能够保存绘图的文件中。你需要一个人来阅读 xml 并根据信息生成网格。

对于第 5 条；您可以将网格包装在一个 div 中，并将宽度和高度设置为 800x600 并将 CSS 溢出：滚动。

希望这可以帮助您朝着正确的方向前进。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T11:34:25.457

您可以使用彩色跨度绘制任何您想要的东西
这是一个[快速演示](http://jsfiddle.net/pxemt/2/)，可以作为进一步开发的开始。

# java - GAE 问题上的 Struts 2 动作标签

> ID：11048775
> 
> 赞同：-1
> 
> 时间：2012-06-15T10:17:09.293
> 
> 标签：java, google-app-engine, struts2, tags, struts-action

我对 GAE 上的 struts 2 动作标签有疑问。当我尝试

`<s:action name="User_info" namespace="/" executeResult="true" />`

我收到以下错误

`"com.opensymphony.xwork2.util.logging.commons.CommonsLogger error: Could not execute action: //User_info java.lang.IllegalArgumentException:"`

在本地一切正常...谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T22:39:12.540

问题出在动作本身而不是在 Struts 2 中。我使用了 JDO，但忘记在 lib 文件夹中包含 jar 字段。我的错，对不起。

# sencha-touch-2 - Sencha touch 2：列表仅显示从 API 检索到的最后一项

> ID：11048776
> 
> 赞同：0
> 
> 时间：2012-06-15T10:17:11.663
> 
> 标签：sencha-touch-2

我想在 List 中显示来自以下 API 的数据：

[http://customer.appxtream.com/astro.apps.cms/jsonFeed.action/?service=astroSportsDataService&action=grabJsonText&mimeType=application/json&p1=HighlightNewsList&p2=EURO2012](http://customer.appxtream.com/astro.apps.cms/jsonFeed.action/?service=astroSportsDataService&action=grabJsonText&mimeType=application/json&p1=HighlightNewsList&p2=EURO2012)

当我获取数据时，Chrome 网络向我显示所有元素已被检索，但 List 仅显示 API 中最后一项的数据，这是我的代码：

* * *

**看法**

```
Ext.define('astro.view.HighliteNews', {
    extend: 'Ext.DataView',
    xtype: 'highliteNews',
    config:{

        title:'xren',
        store: 'highliteNewsStoreId',
        itemtap: true,
        scrollable:'horizontal',
        inline:{
            wrap:false
        },

        itemTpl:[
             '<div><img src="{imageLink}"/> </div>',
        ],
    },
}); 
```

* * *

**店铺**

```
Ext.define('astro.store.HighliteNewsStore',{
    extend: 'Ext.data.Store',

    xtype:'highliteNewsStore',

    config:{
        model: 'astro.model.HighliteNewsModel',
        autoLoad: true,
        storeId: 'highliteNewsStoreId',

        proxy:{
            type:'ajax',

           url :'http://customer.appxtream.com/astro.apps.cms/jsonFeed.action',

            extraParams:{
                service:'astroSportsDataService',
                action:'grabJsonText',
                p1:'HighlightNewsList',
                p2:'EURO2012',
                mimeType:'application/json'

            },

            reader:{
                type:'json',
                rootProperty:'cmsHighlightNewsList',
            },

        },
    }
}); 
```

* * *

**模型**

```
Ext.define('astro.model.HighliteNewsModel',{
    extend: 'Ext.data.Model',

    config:{
        fields: ['imageLink'],

    }
}); 
```

* * *

因此网络显示 3 张图片是从 API 发送的，但列表仅显示最后一张图片。请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T02:00:13.517

我解决了问题伙计们:)，Sencha 和 JsonP 之间存在冲突，所以如果你为你的模型分配一个 idproperty，问题就会得到解决：

```
config:{
    idProperty: 'HighliteIdProperty',
    fields: ['imageLink'],
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T03:57:09.433

感谢阿拉什提出这个问题和答案。我们面临类似的问题，发现我们没有定义模型。在我们的案例中定义模型是有效的。但是，它在我们从 youtube 检索播放列表时以及现在从 google 电子表格检索列表时起作用。希望这对使用谷歌电子表格的其他人有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T22:35:36.413

我建议的几件事：

**为 store 的 load 事件添加监听器**

这只是为了检查所有数据是否已加载到您的商店中。你可以用不同的方式做到这一点：

在控制器中

```
store.on({
  load:function(){
    console.log(store.getCount());
  }
}); 
```

或直接在商店配置中使用 listeners 属性

```
listeners:{
  load:function(store){
    console.log(store.getCount());
  }
} 
```

**检查 DOM**

在 Web Inspector / Firebug 中，检查您的项目是在那里还是只有最后一个。

我认为您也可以在控制台中尝试此命令：

```
Ext.DomQuery.select('div[class=x-dataview-item]').length 
```

它将返回数据视图中的项目数。

**为图像设置宽度和高度**

我对动态加载的数据视图也有同样的问题。所有图片都在 DOM 中，但太小而无法看到。所以我建议，你给他们一个定义宽度和高度的 CSS 类。

这就是我现在能想到的。

希望这可以帮助

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-06-15T12:52:19.623

在视图的配置中调整高度......这可能是一个问题

# button - 自定义 UIPickerView , iOS

> ID：11048781
> 
> 赞同：0
> 
> 时间：2012-06-15T10:17:31.473
> 
> 标签：button, view, customization, picker

我正在尝试为用户制作一个 UIButton，他将能够在 5 个不同的选项之间进行选择。我想到了类似单行 UIButton 的东西，其中一个选项将被预先选择，当用户按下按钮时，将显示 5 个选项供用户选择。在对象库中，我可以找到最接近的选择器视图，但它对我的屏幕来说太大了，它会显示所有选项，因为我只希望在开始时显示一个并且当用户点击所有按钮时选项，以便他可以根据需要选择不同的选项。Xcode 上是否有这样的 UIButton 我丢失了，或者我应该自定义选择器视图或其他什么？提前感谢您阅读我的帖子：D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T11:19:26.727

您可以自定义选择器视图，如下所示

[http://code4app.net/ios/Customized-Picker-View/4f72e7446803faa901000002](http://code4app.net/ios/Customized-Picker-View/4f72e7446803faa901000002)

但我建议您使用包含自定义表格视图的自定义视图，并且该视图显示为像选择器视图一样，这意味着所有属性（如大小、动画、位置等）都在您的控制中

如果您想像这样自定义表格视图，请点击链接

[http://code4app.net/ios/3D-Tableview/4fc0da756803fae46f000000](http://code4app.net/ios/3D-Tableview/4fc0da756803fae46f000000)

# proxy - 对谷歌和 YouTube 隐藏 SSID？

> ID：11048782
> 
> 赞同：0
> 
> 时间：2012-06-15T10:17:40.047
> 
> 标签：proxy, wifi, vpn, socks, ssid

似乎 google 和 youtube 通过附加到从您的 Wi-Fi 网络发送的每个数据包的 SSID 检测您的位置。我尝试使用 VPN 但它没有隐藏 SSID，然后我尝试使用 VPN + SOCKv5 但它没有隐藏 SSID。然后我简单地尝试了 let-me-thru.com，它将我的位置从谷歌隐藏起来就好了，哈哈。

我很困惑，有人可以解释我为什么会这样吗？也有人可以推荐我隐藏您的 SSID 的 VPN 服务吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T10:24:12.963

如果您真的很偏执，请不要使用无线网络。

但是是什么让您认为 SSID 是通过 Internet 发送的？即使它是（它不是），你也可以改变它，并且没有办法知道它的位置。

也许您的意思是“IP”，它可以用来找到您的大致位置？您不能欺骗您的源 IP。然而，一个体面的代理会隐藏它。

# java - Java HashMap 键值存储与检索

> ID：11048783
> 
> 赞同：20
> 
> 时间：2012-06-15T10:17:43.227
> 
> 标签：java, hashmap

我想存储值并从 Java HashMap 中检索它们。

这是我到目前为止所拥有的：

```
public void processHashMap()
{
    HashMap hm = new HashMap();
    hm.put(1,"godric gryfindor");
    hm.put(2,"helga hufflepuff"); 
    hm.put(3,"rowena ravenclaw");
    hm.put(4,"salazaar slytherin");
} 
```

我想从 HashMap 中检索所有键和值作为 Java 集合或实用程序集（例如`LinkedList`）。

我知道如果我知道密钥，我可以获得价值，如下所示：

```
hm.get(1); 
```

有没有办法将键值作为列表检索？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-06-15T10:29:36.507

我使用这三种方法来迭代地图。所有方法（[`keySet`](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html#keySet%28%29), [`values`](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html#values%28%29), [`entrySet`](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html#entrySet%28%29)）都返回一个集合。

```
// Given the following map
Map<KeyClass, ValueClass> myMap;

// Iterate all keys
for (KeyClass key  : myMap.keySet()) 
    System.out.println(key);

// Iterate all values
for (ValueClass value  : myMap.values()) 
    System.out.println(value);

// Iterate all key/value pairs
for (Entry<KeyClass, ValueClass> entry  : myMap.entrySet()) 
    System.out.println(entry.getKey() + " - " + entry.getValue()); 
```

从 Java 8 开始，我经常将[`Stream`s](https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html)与[lambda 表达式](https://docs.oracle.com/javase/tutorial/java/javaOO/lambdaexpressions.html)一起使用。

```
 // Iterate all keys
    myMap.keySet().stream().forEach(key -> System.out.println(key));

    // Iterate all values
    myMap.values().parallelStream().forEach(value -> System.out.println(value));

    // Iterate all key/value pairs
    myMap.entrySet().stream().forEach(entry -> System.out.println(entry.getKey() + " - " + entry.getValue())); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-06-23T19:15:31.810

**Java Hashmap 键值示例：**

```
public void processHashMap() {
    //add keys->value pairs to a hashmap:
    HashMap hm = new HashMap();
    hm.put(1, "godric gryfindor");
    hm.put(2, "helga hufflepuff");
    hm.put(3, "rowena ravenclaw");
    hm.put(4, "salazaar slytherin");

    //Then get data back out of it:
    LinkedList ll = new LinkedList();
    Iterator itr = hm.keySet().iterator();
    while(itr.hasNext()) {
        String key = itr.next();
        ll.add(key);
    }

    System.out.print(ll);  //The key list will be printed.
} 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-06-15T10:19:53.733

[`map.keySet()`](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html#keySet%28%29)会给你所有的钥匙

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-02-21T22:27:19.317

```
//import statements
import java.util.HashMap;
import java.util.Iterator;
import java.util.TreeMap;

// hashmap test class
public class HashMapTest {

    public static void main(String args[]) {

        HashMap<Integer,String> hashMap = new HashMap<Integer,String>(); 

        hashMap.put(91, "India");
        hashMap.put(34, "Spain");
        hashMap.put(63, "Philippines");
        hashMap.put(41, "Switzerland");

        // sorting elements
        System.out.println("Unsorted HashMap: " + hashMap);
        TreeMap<Integer,String> sortedHashMap = new TreeMap<Integer,String>(hashMap);
        System.out.println("Sorted HashMap: " + sortedHashMap);

        // hashmap empty check
        boolean isHashMapEmpty = hashMap.isEmpty();
        System.out.println("HashMap Empty: " + isHashMapEmpty);

        // hashmap size
        System.out.println("HashMap Size: " + hashMap.size());

        // hashmap iteration and printing
        Iterator<Integer> keyIterator = hashMap.keySet().iterator();
        while(keyIterator.hasNext()) {
            Integer key = keyIterator.next();
            System.out.println("Code=" + key + "  Country=" + hashMap.get(key));
        }

        // searching element by key and value
        System.out.println("Does HashMap contains 91 as key: " + hashMap.containsKey(91));
        System.out.println("Does HashMap contains India as value: " + hashMap.containsValue("India"));

        // deleting element by key
        Integer key = 91;
        Object value = hashMap.remove(key);
        System.out.println("Following item is removed from HashMap: " + value);

    }

} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-15T10:22:09.663

您可以使用它`keySet()`来检索密钥。您还应该考虑在地图中添加输入，例如：

```
Map<Integer, String> hm = new HashMap<Integer, String>();
hm.put(1,"godric gryfindor");
hm.put(2,"helga hufflepuff"); 
hm.put(3,"rowena ravenclaw");
hm.put(4,"salazaar slytherin");

Set<Integer> keys = hm.keySet(); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-15T10:26:56.223

```
public static void main(String[] args) {

    HashMap<String, String> hashmap = new HashMap<String, String>();

    hashmap.put("one", "1");
    hashmap.put("two", "2");
    hashmap.put("three", "3");
    hashmap.put("four", "4");
    hashmap.put("five", "5");
    hashmap.put("six", "6");

    Iterator<String> keyIterator = hashmap.keySet().iterator();
    Iterator<String> valueIterator = hashmap.values().iterator();

    while (keyIterator.hasNext()) {
        System.out.println("key: " + keyIterator.next());
    }

    while (valueIterator.hasNext()) {
        System.out.println("value: " + valueIterator.next());
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-06-08T06:35:26.280

```
void hashMapExample(){

    HashMap<String, String> hMap = new HashMap<String, String>();
    hMap.put("key1", "val1");
    hMap.put("key2", "val2");
    hMap.put("key3", "val3");
    hMap.put("key4", "val4");
    hMap.put("key5", "val5");

    if(hMap != null && !hMap.isEmpty()){
        for(String key : hMap.keySet()){
            System.out.println(key+":"+hMap.get(key));
        }
    }
} 
```

# c# - XNA 通过 SpriteBatch 和 Content 作为参考

> ID：11048785
> 
> 赞同：0
> 
> 时间：2012-06-15T10:17:49.820
> 
> 标签：c#, xna, xna-4.0, spritebatch

最近我开始将 XNA 与 MonoMac 一起使用。我上课有问题。我想创建一个里面有纹理和位置信息的类。我也想做绘图功能。

我的想法是传递 spriteBatch 和 Content arround，这样我就可以加载纹理并在之后绘制它们。然而，我传递给这个对象的内容对象不加载任何纹理，当我在类之外尝试内容时，它加载的纹理很好，所以纹理必须在那里。

```
 public class TPlayer {
        public Texture2D[] textures;
        public ContentManager Content;
        public SpriteBatch spriteBatch;
        public int currentFrame;
        public Rectangle position;
        public TPlayer(ContentManager ccontent, SpriteBatch cspritebatch){
            this.Content = ccontent;
            this.spriteBatch = cspritebatch;
            this.Content.RootDirectory = "Content";
            this.currentFrame = 0;
            this.position = new Rectangle(250,20,100,150);
            this.LoadContent();
        }

        protected void LoadContent(){
            this.textures[0] = this.Content.Load<Texture2D>("Textures/ToughStanding");
            this.textures[1] = this.Content.Load<Texture2D>("Textures/ToughWalking1");
            this.textures[2] = this.Content.Load<Texture2D>("Textures/ToughWalking2");
        }

        public void Draw(){
            spriteBatch.Begin (SpriteSortMode.Deferred, BlendState.AlphaBlend);
            this.spriteBatch.Draw (textures[0], this.position, Color.White);
            this.spriteBatch.End ();
        } 
```

这就是我创建实例的方式：

```
Player = new TPlayer(this.Content,this.spriteBatch); 
```

也许我试图使用错误的模型。也许我不应该在类中使用 spritebatch 和 Content，但是我可以让 spritebatch 和 content 全局化吗？

感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T11:01:33.227

既然你已经解决了你自己的问题（干得好！）我将使用这个空间来建议一种资源密集度稍低的方法来绘制你的精灵帧，这也将解决你遇到的问题，而不是为每个帧使用单独的纹理动画，您可以将它们组合成一个单一的纹理。交换纹理实际上是一个相对缓慢的操作。

所以代替站立，行走1，行走2的3个纹理并使用当前帧属性在它们之间切换，您可以创建一个大纹理来容纳所有3个，这可以通过简单地创建一个大小为大小的空白图像在绘画或任何绘图包中完成所有 3 帧并将它们复制/粘贴到位（记下每个帧的开始/结束位置）

![在此处输入图像描述](../Images/0deae205ad238f743bb895fa69d1fe40.png)

您可以创建一个矩形数组来保存工作表中每个精灵的位置。

```
spriteSheetRegions = new Rectangle[]
{
    new Rectangle (0,0, 50,50),     // standing.
    new Rectangle (50,0, 100, 50),  // tough walking 1
    new Rectangle (100,0, 150, 50), // tough walking 2
}; 
```

然后要为精灵设置动画，您只需跟踪哪个矩形是当前帧。

我在下面附上了一个快速游戏类，它显示了整个操作如何与精灵和玩家类一起工作，精灵类可以成为所有精灵的基础，而不仅仅是玩家。

```
#region Using Directives.
using System;
using System.Collections.Generic;
using System.Linq;
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Audio;
using Microsoft.Xna.Framework.Content;
using Microsoft.Xna.Framework.GamerServices;
using Microsoft.Xna.Framework.Graphics;
using Microsoft.Xna.Framework.Input;
using Microsoft.Xna.Framework.Media;
#endregion

namespace sprites
{
    public class Sprite
    {
        // Texture instances.
        public Texture2D spriteSheet;
        protected Rectangle[] spriteSheetRegions;
        protected Rectangle currentSpriteSheetRegion;

        // player instances.
        public Rectangle location;

        // call this to change the image that's drawn for the sprite.
        public void SetSpriteSheetIndex(int index)
        {
            currentSpriteSheetRegion = spriteSheetRegions[index];
        }
    }

    public class TPlayer : Sprite
    {
        public TPlayer()
        {
            // Since your sprite sheets for the player are fixed we can set them up here.
            spriteSheetRegions = new Rectangle[]
            {
                new Rectangle (0,0, 50,50),     // standing.
                new Rectangle (50,0, 100, 50),  // tough walking 1
                new Rectangle (100,0, 150, 50), // tough walking 2
            };
            currentSpriteSheetRegion = spriteSheetRegions[0];
        }

        public void Draw(SpriteBatch spriteBatch)
        {
            spriteBatch.Draw(spriteSheet, location, currentSpriteSheetRegion, Color.White);
        }
    }

    public class Game1 : Microsoft.Xna.Framework.Game
    {
        GraphicsDeviceManager graphics;
        SpriteBatch spriteBatch;

        List<TPlayer> players;

        public Game1()
        {
            graphics = new GraphicsDeviceManager(this);
            Content.RootDirectory = "Content";
        }

        protected override void Initialize()
        {
            // Create the players and add 3 of them.
            players = new List<TPlayer>();
            players.Add(new TPlayer() { location = new Rectangle(10, 10, 100, 100) });
            players.Add(new TPlayer() { location = new Rectangle(110, 10, 100, 100) });
            players.Add(new TPlayer() { location = new Rectangle(220, 10, 100, 100) });

            base.Initialize();
        }

        protected override void LoadContent()
        {
            // Create a new SpriteBatch, which can be used to draw textures.
            spriteBatch = new SpriteBatch(GraphicsDevice);

            // Load up the players content.
            Texture2D playerSpriteSheet = Content.Load<Texture2D>("PlayerSpriteSheet");

            // each player gets a reference to the same texture so there is no duplication.
            for (int i = 0; i < players.Count; i++)
                players[i].spriteSheet = playerSpriteSheet;
        }

        protected override void Draw(GameTime gameTime)
        {
            GraphicsDevice.Clear(Color.CornflowerBlue);

            // draw the players.
            spriteBatch.Begin();
            for (int i = 0; i < players.Count; i++)
                players[i].Draw(spriteBatch);
            spriteBatch.End();

            base.Draw(gameTime);
        }
    }
} 
```

当你想改变播放器的当前帧时，你调用 SetSpriteSheetIndex。

如果您想将玩家零的图片设置为艰难的步行 1 帧，您会调用。

```
players[0].SetSpriteSheetIndex(1); 
```

# vim - 如何在 VIM 中获得自定义句子格式？

> ID：11048787
> 
> 赞同：2
> 
> 时间：2012-06-15T10:17:52.043
> 
> 标签：vim

我用 vim 写了很多文本（主要用于研究论文），最近我开始格式化段落和句子，如下所示：

```
Lorem ipsum dolor sit amet, consectetur adipiscing 
   elit sed diam et arcu scelerisque rutrum eget 
   vitae sed diam et arcu scelerisque rutrum eget 
   vitae sed diam et arcu scelerisque rutrum eget 
   vitae. 
Aenean euismod tristique sollicitudin. 
Vestibulum sed diam et arcu scelerisque rutrum eget 
   vitae sapien. 
Quisque dui ligula, semper eget iaculis at, eleifend 
   at ligula. 
Sed vestibulum tellus ac libero iaculis sit amet commodo
   sapien pellentesque. 
Cras quis dignissim neque.
Donec neque mauris, dictum tempus tincidunt in, 
   pellentesque sit amet dui. 
```

我希望你能猜出模式。

现在，我主要是手动执行此操作，这有点不妥，特别是如果您在句子中间添加文本。我的问题是，我怎样才能自动做到这一点？

我知道我可以使用“gq100”在接下来的 100 行强制换行，但这并不完全符合我的要求。如果这不是真正的硬换行符，而只是一个虚拟换行符，那就太好了，这意味着当我将光标放在以“Lorem ipsum”开头的行中时，我可以用 y 和 p 复制并传递整个句子，就好像没有根本不是任何换行符。

有人对此有想法吗？

干杯，T

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T11:53:18.930

你的意思是：如果一行以 3 个空格开头，它属于上一句？

你可以这样做：

```
:set textwidth=0
:set wrap
:set showbreak=\ \ \ 
```

注意：每个`\`.

尝试键入一个非常孤单的行。它会自动换行。下一行以 3 个空格开头。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T12:04:48.647

我想这就是你要找的，vim 的 breakindent 补丁：

[http://sqizit.bartletts.id.au/2011/01/31/vim-and-breakindent/](http://sqizit.bartletts.id.au/2011/01/31/vim-and-breakindent/)

# ruby-on-rails - 如何开始性能测试

> ID：11048791
> 
> 赞同：4
> 
> 时间：2012-06-15T10:17:55.450
> 
> 标签：ruby-on-rails, performance-testing

我正在使用 rails 3.1.1 并使用 socery 0.7.11 进行身份验证，我需要实现性能测试，我可以在其中测试以下内容

*   模拟 100 个用户同时登录和注销
*   模拟 100 个用户同时添加新兴趣。

我已经通过以下链接：

[http://rubylearning.com/blog/2011/08/14/performance-testing-rails-applications-how-to/](http://rubylearning.com/blog/2011/08/14/performance-testing-rails-applications-how-to/)

[http://guides.rubyonrails.org/performance_testing.html](http://guides.rubyonrails.org/performance_testing.html)

并且能够做以下事情

*   使用 test_helper.rb 创建了测试文件夹
*   创建了 test/performance/login_test.rb
*   创建了fixtures/users.yml

test_helper.rb

```
ENV["RAILS_ENV"] = "test"
require File.expand_path('../../config/environment', __FILE__)
require 'rails/test_help'

class ActiveSupport::TestCase
  # Setup all fixtures in test/fixtures/*.(yml|csv) for all tests in alphabetical order.
  #
  # Note: You'll currently still have to declare fixtures explicitly in integration tests
  # -- they do not yet inherit this setting
  fixtures :all

  # Add more helper methods to be used by all tests here...
end 
```

/performance/login_test.rb

```
require 'test_helper'
require 'rails/performance_test_help'

class LoginTest < ActionDispatch::PerformanceTest

  fixtures :users
  # Refer to the documentation for all available options
   self.profile_options = { :runs => 5, :metrics => [:wall_time, :memory],
                            :output => 'tmp/performance', :formats => [:flat] }

  def test_login
   post_via_redirect "http://bc.lvh.me/", :username => users(:youruser).username, :password => users(:youruser).password
#using lvh.me coz login page is on my subdomain
  end
end 
```

固定装置/users.yml

```
one:
  username: eagleschasar12
  password: chaitanyA1#

two:
  username: eaglesmarktell12
  password: chaitanyA1# 
```

当我运行 rake test:profile 时，我得到以下结果

```
E
===============================================================================
Error: test_login(LoginTest)
ActiveRecord::StatementInvalid: SQLite3::SQLException: table users has no column named password: INSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('eagleschasar12', 'chaitanyA1#', '2012-06-15 06:43:01', '2012-06-15 06:43:01', 980190962) 
```

所以我的问题是

*   为什么要测试命令触发插入查询？
*   我需要在夹具文件中写入 100 条用户记录来测试功能吗？
*   如何检查会话登录/注销？
*   另外，当我从 db 中选择兴趣类型时，我的用户应该登录系统，那么我如何在性能测试中测试这个场景呢？
*   此测试是否在我的本地服务器 webrick 上运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T13:17:07.280

我会尽量按顺序回答您的问题。我相信其他人可能会单独为每个人提供更完整的答案，欢迎他们，但我希望能让你开始，这样你就可以知道要寻找什么：

*1\. 为什么要测试命令触发插入查询？* 

您的插入查询是从您的固定装置运行的。我个人使用FactoryGirl，但逻辑是一样的。当你运行你的fixture时，它会将该对象插入到你的数据库中。这样你就可以做类似的事情`fixture :user`，它会为你创建一个用户，而不必每次都提供所有用户对象的详细信息。如果您的文件中有 5 个灯具，运行类似的东西`fixture :users`会创建 5 个条目（如果有人可以为灯具确认这一点，我将不胜感激，因为我不使用灯具）。

*2.我需要在fixture文件中写入100条用户记录来测试功能吗？* 

不，你没有。您可以使用[Faker gem](https://github.com/stympy/faker)使用随机名称、字符串等自动创建任意数量的用户（或其他任何内容）。文档在[此处](http://rubydoc.info/github/stympy/faker/master/frames)。

*3\. 如何查看会话登录/注销？* 

创建会话时，您应该设置`session[user_id]`变量，以便进行测试。不用说，在注销（即会话销毁）时，您应该将其设置为`nil`. `session[:user_id]`在任何情况下，当通过设置变量创建会话时，您可以使用`request.session_options[:id]`

*4 访问会话 ID。此外，当我从 db 中选择兴趣类型时，我的用户应该登录系统，那么如何在性能测试中测试这个场景?*

在每次测试之前，您应该运行一个“test_log_in”函数来登录您创建的测试用户。然后需要登录用户的测试应该通过。您还应该在没有登录测试用户的情况下创建测试，并且它们不应执行需要登录用户的更改（或不应显示页面）。

*5\. 这个测试是否在我的本地服务器 webrick 上运行？*

如果那是您在 Gemfile 中安装的服务器，它将被使用。它适用于您安装的任何服务器。

您在一个问题中提出了很多问题，因此，如果您需要有关答案的更多详细信息，我建议您在不同的帖子中询问每个问题，并详细说明您要查找的内容。这样你的答案就不会像这个那样宽泛，而是更具体。

希望我至少给了你一个好的起点。

# c# - 卡在 C# 正则表达式中

> ID：11048794
> 
> 赞同：3
> 
> 时间：2012-06-15T10:18:01.170
> 
> 标签：c#, .net, regex

我的数据库中的字段中包含以下文本：

```
[quote:5a7b87febe="mr smith"]This is some text.

This is more text on another line.[/quote:5a7b87febe] 
```

我正在尝试构建一个正则表达式，它将像上面这样的任何实例转换为：

```
<div><h4>Posted by mr smith</h4>This is some text.

This is more text on another line.</div> 
```

到目前为止，我整理的模式似乎适用于封闭文本中没有换行符的情况，但在上面的示例中，另一行上有文本，模式不匹配。

到目前为止，我的 C# 代码是：

```
var exp = new Regex(@"(\[quote)(:\w+=\"")(.*?)(\""\])(.*?)(\[\/quote)(:\w+\])");
var str = exp.Replace(str, "<div><h4>Posted by $3</h4>$5</div>"); 
```

我对正则表达式很垃圾，所以不确定如何处理出现在开始和结束“引号”标签之间的“任何”字符。

理想情况下，如果可能，我还希望表达式能够处理上述示例的嵌套实例。

另一件值得一提的是，'quote:' 标签后面的一系列字符每次都是唯一的，引号内的名称也会有所不同。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T10:29:32.040

您需要使用[反向引用](http://msdn.microsoft.com/en-us/library/thwdfzxy.aspx)来匹配开始标签中的唯一编号。像这样的东西应该适合你：

```
var regex = new Regex(@"\[(quote:[a-z0-9]+)(=""([^""]+)?"")?\](.*)\[/\1\]", RegexOptions.SingleLine);
var str = regex.Replace(str, "<div><h4>Posted by $3</h4>$4</div>"); 
```

此解决方案已使用您的输入进行测试，但未使用嵌套引号。这会有点棘手。

**编辑**：使用嵌套引号检查此解决方案后，它确实有效。您只需要反复调用它，直到不再进行替换。第一次它将匹配外部引号，并在替换中保持内部引号完整。执行此操作的示例代码（未经测试）：

```
// Repeatedly call this replacement
string last;
do 
{
    last = str;
    str = regex.Replace(str, "<div><h4>Posted by $3</h4>$4</div>");
} while (last != str); 
```

# c# - 无法解析 MVC3 C# 中的依赖项或引用

> ID：11048798
> 
> 赞同：-1
> 
> 时间：2012-06-15T10:18:22.693
> 
> 标签：c#, asp.net-mvc-3

尝试构建解决方案时，MVC/Controllers/ProductCOntroller.cs 中有错误。需要参考`SportsStore.Domain`in`SportsStore.WebUI`

```
using System.Linq;
using System.Web.Mvc;
using SportsStore.Domain.Abstract;

namespace SportsStore.WebUI.Controllers
{
    public class ProductController : Controller
    {
        private IProductRepository repository;
        public ProductController(IProductRepository productRepository)
        {
            repository = productRepository;
        }
    }
} 
```

命名空间“SportsStore”中不存在类型或命名空间名称“域”（您是否缺少程序集引用？）

我已经将 MVC (WebUI) 的项目依赖项设置为 C# 类库 (Domain) 如何修复它？

![在此处输入图像描述](../Images/f0b0c18c73eae55b4cca4fe930efa24e.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T10:21:05.680

您需要添加对`SportsStore.Domain`in的引用`SportsStore.WebUI`？

您可以通过右键单击`SportsStore.WebUI`解决方案资源管理器中的“参考”文件夹并选择“添加参考...”来执行此操作。

![在此处输入图像描述](../Images/bb6f519f945d5d82db9644f976d01c60.png)

然后导航到“解决方案”选项卡：

![在此处输入图像描述](../Images/1294f9fb5f50b88373dece56a7f8de5e.png)

并选择 SportsStore.Domain。

# java - 用于检查 API 与 Android 的兼容性的 Maven-Plugin

> ID：11048805
> 
> 赞同：2
> 
> 时间：2012-06-15T10:19:02.573
> 
> 标签：java, android, maven

我正在寻找一个 Maven 插件，它可以检查 Jar/Class-Files 是否符合指定的 Android API 级别。例如，所有类和方法都可以在 Android API 中解析
吗？有人知道这样的插件吗？DX 工具似乎没有提供这样的功能，还是我遗漏了什么？

**用例：**
我写了一些 Jar-Files，它们应该在 Desktop-Java-Applications 和 Android-Apps 中使用。现在我想确保这些 Jar-Files 符合一定级别的 Android API。

我目前的解决方法是在 Android 模拟器中运行我的单元测试。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-03-07T13:55:19.033

您可以将[animal-sniffer-maven-plugin](http://www.mojohaus.org/animal-sniffer/animal-sniffer-maven-plugin/)与[android-api-level 签名](https://search.maven.org/#search%7Cga%7C1%7Cg%3A%22net.sf.androidscents.signature%22)一起使用。

这看起来像：

```
<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>animal-sniffer-maven-plugin</artifactId>
    <version>1.16</version>
    <configuration>
        <signature>
            <groupId>net.sf.androidscents.signature</groupId>
            <artifactId>android-api-level-19</artifactId>
            <version>4.4_r1</version>
        </signature>
    </configuration>
</plugin> 
```

有关更多详细信息，请参阅[animal-sniffer-maven-plugin](http://www.mojohaus.org/animal-sniffer/animal-sniffer-maven-plugin/usage.html)。

有关 android 级别 API 的更多资源：

*   [安卓版本历史](https://en.wikipedia.org/wiki/Android_version_history)，
*   [使用统计](https://developer.android.com/about/dashboards/index.html#Platform)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T20:03:41.293

由于没有可用的工具，我自己编写了它。
[http://code.google.com/p/compliancechecker/](http://code.google.com/p/compliancechecker/)

它是 maven 构建系统的插件，支持针对某个 android api 级别验证 Java SE 1.4、1.5、1.6 和 1.7 代码。

# ios - iOS 中的 libz1.2.5 库有什么作用？

> ID：11048806
> 
> 赞同：1
> 
> 时间：2012-06-15T10:19:07.173
> 
> 标签：ios

在审查一个 iOS 程序时，我发现了一个名为`libz1.2.3`or的库`libz1.2.5`。

这个图书馆的目的是什么？任何人都可以解释为什么需要该库文件吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T02:36:25.330

[这就是 zlib](http://www.zlib.net/) - 一个非常漂亮但又不显眼的压缩库

它用于压缩和解压缩数据（通常是文件）。维基百科页面中有一个[示例应用程序](https://en.wikipedia.org/wiki/Zlib?elq=b83ae5450af94c40831999e48a6e5e66#Applications)列表。

标准库文件以“lib”开头，后跟名称（在本例中为“z”），然后是版本号（1.2.5）。

[对于 16 小时内没人能回答这个问题的想法，我有点奇怪，所以也许我在这里完全遗漏了一些东西。但我看不出还有什么可能。这是一个非常有名的受欢迎的图书馆。]

# java - JSP中的项目需要建议

> ID：11048807
> 
> 赞同：-2
> 
> 时间：2012-06-15T10:19:09.673
> 
> 标签：java, hibernate, jsp, jakarta-ee

我是 Java 新手。但是我学习 Core Java 和 J2EE1.4(Servlet N JSP) 最近我有一个 Java 项目。该项目主要用于生成报告。

我计划将 Hibernate 用于 Struts 的数据库操作。任何建议使用另一个框架来代替像 Spring 这样的 Sturts。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T10:36:48.600

我为该项目建议以下技术

表示层：Spring MVC web Flow。数据访问层：休眠。报告生成：春季报告模板。

我建议将 Spring 与 Hibernate 集成。因为 Hibernate 有利于处理数据库操作。Spring MVC 3.1 比 Struts 1.3/2.0 有更多的未来。Spring 为 Hibernate 提供了更高效的 DataSource/Entity Manager。Spring 具有字符串模板以生成所需格式的报告

# iphone - 滚动 UIScrollView 时内存泄漏

> ID：11048809
> 
> 赞同：0
> 
> 时间：2012-06-15T10:19:11.963
> 
> 标签：iphone, memory-management, uiscrollview

在我的 iPhone 应用程序中，我动态添加 a`UIScrollView`并将 n 个`UIImage`s 和`UIButton`s 添加到滚动视图中。在这里，图像从不同的 url 加载，按钮标题来自 SQlite 数据库。一切安好。但是当我滚动滚动视图时，现在我收到内存警告 Level=1 并且过了一段时间它是 Level=2 并导致应用程序崩溃。我正在使用 ARC。我该如何解决这个问题？

**代码**

```
- (void)setUpViewLayout{
    int newContentSize = [appDelegate.itemArray count] * 125;

    menuItemIdArray = [[NSMutableArray alloc]init];
    mainView = [[UIScrollView alloc]initWithFrame:CGRectMake(0, 100, 480, 220)];
    mainView.contentSize = CGSizeMake(newContentSize, 220);
    mainView.tag = 100;
    mainView.delegate = self;
    mainView.userInteractionEnabled = YES;
    mainView.backgroundColor = [UIColor clearColor];

    int xPosition = 20;

    for (tagVal = 0; tagVal < [appDelegate.itemArray count]; tagVal++) {
        [self createImage:xPosition];
        [self createButton];
        xPosition = xPosition + 120;
    }
    [self.view addSubview:mainView];
}

- (void)createImage:(int)xPosition{
    DataBaseClass *itemObj = [appDelegate.itemArray objectAtIndex:tagVal];

    NSString *url = [NSString stringWithFormat:@"%@",itemObj.notAvialableIcon];
    imgView = [[UIImageView alloc]initWithFrame:CGRectMake(xPosition+8, 48, 110, 123)];
    imgView.userInteractionEnabled = YES;
    imgView.tag = tagVal;

    [imgView setImageWithURL:[NSURL URLWithString:url] placeholderImage:[UIImage imageNamed:@"item01.png"]];

    [mainView addSubview:imgView];
}
- (void)createButton{
    DataBaseClass *itemObj = [appDelegate.itemArray objectAtIndex:tagVal];
    button = [UIButton buttonWithType:UIButtonTypeCustom];
    button.frame = CGRectMake(5, 90, 100, 26);
    button.tag = tagVal;
    button.userInteractionEnabled = YES;
    button.tag = tagVal;
    button.titleLabel.textColor = [UIColor blueColor];
    button.titleLabel.font = [UIFont systemFontOfSize:9.0];
    NSString *name = [NSString stringWithFormat:@"%@",itemObj.itemStatus];
    itmName = [NSString stringWithFormat:@"%@",itemObj.itemName];

    NSString *date = [self changeDateFormat:itemObj.itemReleaseDate];          
    [button setTitle:date forState:UIControlStateNormal]; 
    button.userInteractionEnabled = NO;
    button setBackgroundImage:[UIImage imageNamed:@"not_available_bttn_bck_img"] forState:UIControlStateNormal];

    [imgView addSubview:button];
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T10:47:41.053

1.  不要一次将所有子视图添加到滚动视图。那太贵了。

2.  当滚动视图确实滚动时，获取滚动视图的可见矩形，并添加您的图像和按钮，使其刚好适合范围或超过该矩形的一小部分。

3.  当可见子视图不可见时，从超级视图中移除。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T10:29:11.260

您需要确定代码的哪一部分导致泄漏。您可以通过多种方式做到这一点。

一种方法是使用 xcode 中的内置分析器。它分析您的代码并检测（一些）潜在的内存泄漏。

仪器工具也是发现这些泄漏的好工具。使用分配/泄漏组件启动它。转到您的滚动视图，并在滚动视图后执行示例。你的泄漏应该出现。现在您可以追踪泄漏并让仪器直接在您的代码中找到正确的位置。

第三种选择是检查您的代码并尝试自己弄清楚发生了什么。了解内存管理是 ios 设备编程的重要组成部分。

在此处发布您在滚动视图中使用的代码怎么样，以便我们看一下？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-15T11:38:45.030

Abhishek 是绝对正确的，所有子视图都必须在添加到父视图后释放。这将导致泄漏。具体来说，一旦滚动视图离开屏幕并被释放，它的子视图将不会被释放。从分配时起，它们的保留计数仍为 1。

但是，只要滚动视图仍在屏幕上，就没有泄漏。超级视图保留其所有子视图（即，将其保留计数增加 1。）如果子视图已分配但未释放，则保留计数为 2。如果已分配并释放，其保留计数为 1。无论哪种方式，只要滚动视图存在，它的子视图仍然正确地保留。

如果您在滚动视图仍处于打​​开状态时收到内存警告，则问题可能不是泄漏，只是过度使用内存。如果你不断地在一个大的滚动视图中添加图像，你肯定会遇到内存溢出的问题。

要使用图像填充大型滚动视图，但避免内存溢出，您可以查看[ScrollViewSuite](http://developer.apple.com/library/ios/#samplecode/ScrollViewSuite/Introduction/Intro.html#//apple_ref/doc/uid/DTS40008904)演示的第三个示例，关于平铺。这应该很适合您，因为您的图像和按钮大小相同，并且可以充当图块。

这个想法是从滚动视图中创建一种表格视图，现在回收图像块而不是单元格。滚动视图是子类化的，一组可重用的图块作为其实例变量之一保存。实现的关键是，在 layoutSubviews 中，从 superview 中移除已经移出可见区域的图块，然后为新可见的内容回收图块并将它们添加为子视图。这样，只有可见的图块被加载到内存中。而且，它回收瓷砖，就像表格视图回收单元格一样。

从滚动视图的大小来看，您可能别无选择，只能平铺和回收。尽管如此，这是一个不错的选择。

**更新：** Wubao Li 基本上总结了需要做的事情。ScrollViewSuite 演示向您展示了如何操作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-16T10:15:26.830

我正在为此打开一个新的回复。这是我们都错过的简单解决方案。

从您发布的代码来看，这只是一个表格视图。因此，您不必构建自己的平铺滚动视图。

这里有一些代码可以帮助您入门。设置表格视图时，将其旋转 90 度，设置行高并消除分隔线：

```
tableView.transform = CGAffineTransformMakeRotation(0.5 * M_PI);
tableView.rowHeight = 120.0;
tableView.separatorStyle = UITableViewCellSeparatorStyleNone; 
```

您必须设置表格视图的框架，使其在旋转后处于正确位置。本质上，它与您当前的滚动视图的框架相同，或者与其侧面的框架相同。

下面是几个表视图的数据源方法：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return [appDelegate.itemArray count];
} 
```

表格单元格可以是非常简单的自定义表格单元格，只有一个图像视图和该图像视图上的按钮。您还可以旋转图像视图，以便正确显示图像，而不是侧面显示。或者，您可以在加载之前在照片编辑器或图像编辑器中旋转所有图像。

差不多就是这样。与往常一样，表格视图将负责回收您的单元格并优化您的内存使用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-15T10:35:12.487

```
//you had allocated the things but did not release it ... it was the reason of leak

- (void)setUpViewLayout{
int newContentSize = [appDelegate.itemArray count] * 125;

// menuItemIdArray = [[NSMutableArray alloc]init]; why you are allocating this array

UIScrollView *mainView = [[UIScrollView alloc]initWithFrame:CGRectMake(0, 100, 480, 220)];
mainView.contentSize = CGSizeMake(newContentSize, 220);
mainView.tag = 100;
mainView.delegate = self;
mainView.userInteractionEnabled = YES;
mainView.backgroundColor = [UIColor clearColor];

int xPosition = 20;

for (tagVal = 0; tagVal < [appDelegate.itemArray count]; tagVal++) {
    [self createImage:xPosition];
    [self createButton];
    xPosition = xPosition + 120;
}
[self.view addSubview:mainView];
[mainView relese];//release scroll view here
}

- (void)createImage:(int)xPosition{
DataBaseClass *itemObj = [appDelegate.itemArray objectAtIndex:tagVal];

NSString *url = [NSString stringWithFormat:@"%@",itemObj.notAvialableIcon];
imgView = [[UIImageView alloc]initWithFrame:CGRectMake(xPosition+8, 48, 110, 123)];
imgView.userInteractionEnabled = YES;
imgView.tag = tagVal;

   [imgView setImageWithURL:[NSURL URLWithString:url] placeholderImage:[UIImage  imageNamed:@"item01.png"]];

   [mainView addSubview:imgView];
   [imgView release]; //release imageview here
}
 - (void)createButton{
DataBaseClass *itemObj = [appDelegate.itemArray objectAtIndex:tagVal];
button = [UIButton buttonWithType:UIButtonTypeCustom];
button.frame = CGRectMake(5, 90, 100, 26);
button.tag = tagVal;
button.userInteractionEnabled = YES;
button.tag = tagVal;
button.titleLabel.textColor = [UIColor blueColor];
button.titleLabel.font = [UIFont systemFontOfSize:9.0];
NSString *name = [NSString stringWithFormat:@"%@",itemObj.itemStatus];
itmName = [NSString stringWithFormat:@"%@",itemObj.itemName];

NSString *date = [self changeDateFormat:itemObj.itemReleaseDate];          
[button setTitle:date forState:UIControlStateNormal]; 
button.userInteractionEnabled = NO;
button setBackgroundImage:[UIImage imageNamed:@"not_available_bttn_bck_img"] forState:UIControlStateNormal];

[imgView addSubview:button];
} 
```

可以帮助你吗

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-15T10:48:42.397

这里有3个建议给你：

*   尝试在后台线程中加载图像
*   检查此响应[iOS 5 是否有垃圾收集？](https://stackoverflow.com/questions/6576674/does-ios-5-have-garbage-collection)
*   使用`leak`,`instrument`找出你的应用程序在哪里泄漏，然后最好地管理该部分

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-24T07:38:09.230

这是苹果的漏洞。UIScrollView 甚至会泄漏这些代码：

```
UIScrollView *s = [[UIScrollView alloc] initWithFrame:self.view.bounds];
s.contentSize = CGSizeMake(320, 800);
[self.view addSubview:s];
[s release]; 
```

# java - AOP 的不当使用

> ID：11048818
> 
> 赞同：0
> 
> 时间：2012-06-15T10:19:50.530
> 
> 标签：java, spring, aop, aspectj

使用 AOP 有哪些不好的做法？我的意思是我们是否有不适合使用 AOP 的情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T10:57:38.123

以我的经验，AOP 是一个*太*强大的工具。使用 AOP，您可以更改很多东西，以至于很难维护和调试代码。

我建议尽可能限制 AOP 的使用。

还有一些不太强大的 AOP 版本，例如 EJB 拦截器，它们通常足以完成一些横切关注点或监控。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T10:34:36.143

看看这个..
**1.**[使用 AOP 是否更优雅地解决了某些问题？](https://softwareengineering.stackexchange.com/questions/19244/are-certain-problems-solved-more-elegantly-with-aop)
**2.**[面向方面的编程和隐式](https://softwareengineering.stackexchange.com/questions/19344/aspect-oriented-programming-and-implicitness)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T10:45:01.730

我们将在以下情况下避免 AOP

不想提供企业业务/服务。

声明式事务管理..

基于您自己的标准的条件方面......

# ios - 识别 UITextField 或 UITextView 中已删除的字符

> ID：11048819
> 
> 赞同：2
> 
> 时间：2012-06-15T10:19:50.873
> 
> 标签：ios

我需要识别已删除的字符。例如，当我删除一个字符“@”时，我需要执行一些操作。有什么简单的方法可以做到这一点？或者我是否需要将最近键入的字符保留在变量中并检查 shouldChangeCharactersInRange 中的 range.length == 0？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T10:50:29.033

在我看来，它应该是这样的：

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
    NSString *textToChange  = [[textField text] substringWithRange:range];
    NSRange rangeOld = [textToChange rangeOfString:@"@"];
    NSRange rangeNew = [string rangeOfString:@"@"];
    if (rangeOld.location != NSNotFound && rangeNew.location == NSNotFound ) {
        [self userDidRemoveAtSign];
    }
    return YES;
} 
```

说明：是的，`userDidRemoveAtSign`是用户删除“@”符号时的自定义方法。此代码位于 UITextField**委托**中。每次用户更改 UITextField 中的文本、删除、替换或附加字符时，文本字段都会发送此消息

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string 
```

委托。在这种方法中，我检查 @ 符号是否包含在替换文本中，以及它是否包含在替换文本中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T10:30:49.297

是的，正如您所说，您必须将最后一组字符保留在 NSString 中，然后在文本更改时将其与新字符串进行比较

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-11T03:58:25.027

UITextView 代表 Swift 5 版本：

```
func textView(_ textView: UITextView, shouldChangeTextIn range: NSRange, replacementText text: String) -> Bool {

    guard let txt = textView.text, let txtRange = Range(range, in: txt) else {
        return false
    }
    let subString: Substring = txt[txtRange]
    if  subString == "(searchString)" {
        // do something
        return true
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-14T06:04:39.137

> 您可以通过这种方式快速执行此操作，您将获得已删除的字符

让 strDeletedChar = (textView.text as NSString).substringWithRange(range)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-24T04:58:31.317

您可以在 UITextView Delegate 的方法中捕获已删除的字符：

```
- (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text{
   NSString *deletedChar = [textView.text substringWithRange:range];
   if ([deletedChar isEqualToString:@"@"]) {
       // do something
       return YES;
   }else{
    // do something
    return YES;
   }
} 
```

# backbone.js - 我应该如何使用 Backbone.Marionette 和 requireJs 引导我的网络应用程序

> ID：11048820
> 
> 赞同：8
> 
> 时间：2012-06-15T10:19:51.933
> 
> 标签：backbone.js, requirejs, marionette, backbone-routing

假设我的应用程序可以运行，但我喜欢学习并找到最好的做事方式。
我非常感谢这篇关于[将主干路由器减少到仅是配置](http://lostechies.com/derickbailey/2012/01/02/reducing-backbone-routers-to-nothing-more-than-configuration/)的帖子。
以下未使用的[bbclonemail](https://github.com/derickbailey/bbclonemail/tree/master/public/javascripts)需要。

实际上我的实现是一个整体块（**app.js**，**router.js**）。

这是我的问题：
1）应该`router module` `router.js`返回什么？
2）我应该如何`The Callback Functions`删除`router.js`？
3）应该`app module` `app.js`返回什么？
4）我应该如何解耦`app.js`许多其他应用程序（例如：主要、任务、项目）

* * *

**应用程序.js**

```
// app.js
define([
'router'
// some modules
],
function (router, Backbone, HeaderView)
{
    "use strict";
    var myApp = new Backbone.Marionette.Application();

    myApp.addRegions({
        header: '#header',
        sidebar: '#sidebar',
        mainColumn: '#main-column',
        rightColumn: '#right-column'
    });

    myApp.initHeader = function () {
        var headerView = new HeaderView();
        myApp.header.show(headerView);
    }

    // many others many views

    myApp.start();

    myApp.initialize = function() {
        router.initialize();
        Backbone.history.start();
    }

    return myApp;

}); 
```

* * *

**路由器.js**

```
// router.js
define([
// some modules
],
function (Backbone)
{
    "use strict";
    var AppRouter = Backbone.Marionette.AppRouter.extend({

        routes: {
            tasks: 'tasks',
            projects: 'projects',
            // many others  keys/values
            '*defaults': 'home'
        },

        getApp: function ()
        {
            var mainApp;
            require(['js/app'], function (app) {
                mainApp = app;
            });
            return mainApp;
        },

        home: function()
        {
            var app = this.getApp();
            app.initHeader();
            app.initSidebar();
            app.initTaskDetails();
        },

       // many others callbacks

    });

    var initialize = function() {
        new AppRouter;
    };
    return {
        initialize: initialize
    };

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T12:04:21.947

对于路由器部分，您应该这样做：

**路由器.js**

```
// router.js
define([
     'rooterController'
// some modules
],
function (Backbone, rooterController)
{
    "use strict";
    var AppRouter = Backbone.Marionette.AppRouter.extend({

        routes: {
            tasks: 'tasks',
            projects: 'projects',
            // many others  keys/values
            '*defaults': 'home'
        }
    });
    return new AppRouter({constroller: rooterController})
}); 
```

# python - 在scrapy中抓取重定向的url

> ID：11048823
> 
> 赞同：0
> 
> 时间：2012-06-15T10:19:57.543
> 
> 标签：python, url, redirect, scrapy

我在scrapy工作。

我正在获取一个包含 url 列表的站点。

因此，我请求了主 url，`start_url`并在列表中获取了所有 href 标签（获取数据的链接），我再次请求列表中的每个 url 进一步获取数据，但一些 url 重定向如下：

```
Redirecting (301) to <GET example.com/sch/mobile-68745.php> from Redirecting (301) to <GET example.com/sch/mobile-8974.php> 
```

我知道scrapy会忽略重定向的链接，但我想捕获重定向的url并想像200状态的url一样抓取

无论如何要捕获该重定向 url 并从中抓取数据，我的意思是我们是否需要禁用重定向中间件？或者我们需要在请求命令中使用任何元标记，你能给我一个例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T10:29:04.357

我没有使用 Scrapy 的经验，但显然，您可以定义*中间件*来改变 Scrapy 在解析内容时的工作方式。

有一个支持和处理开箱即用重定向的[RedirectMiddleware](http://scrapy.readthedocs.org/en/latest/topics/downloader-middleware.html#module-scrapy.contrib.downloadermiddleware.redirect)，因此您需要做的就是启用它。

```
DOWNLOADER_MIDDLEWARES = {
    'apy.contrib.downloadermiddleware.redirect.RedirectMiddleware': 123,
} 
```

# audio - 音频采样频率依赖于通道？

> ID：11048825
> 
> 赞同：8
> 
> 时间：2012-06-15T10:20:06.543
> 
> 标签：audio, frequency, sampling, channels

如果您的音频编码为 44100Hz，这意味着您每秒有 44100 个样本。这是否意味着一个通道或所有通道的 44100 个样本/秒？

例如，如果一首歌曲是立体声并以 44100Hz 编码，那么两个通道是否有 44100 个样本/秒（又名：每个通道 22050 个样本），或者每个通道是否有 44100 个样本（又名：每秒有 88200 个样本，通道 1 有 44100 个样本通道 2 为 44100）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T11:17:33.553

是的，采样率与通道数无关，例如，CD 质量音频是立体声 16 位 44.1 kHz，这意味着有两个通道，每个通道以 44.1 kHz 采样，因此原始数据速率为 44100 * 2 * 16 = 1411200 位/秒 = 176400 字节/秒。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-15T11:21:41.300

每个通道都是单独“采样”的，因此每个“采样频率”的值与通道数一样多。

PCM（未压缩）音频的数据速率为

```
sample_freq * channels * bits_per_sample / 8 
```

最常见的是 16 位样本，因此您将有 44100 * 2 * 2 用于以 44100 采样率进行立体声录音。

# c++ - C++11 static_assert（以及其中使用的函数）

> ID：11048827
> 
> 赞同：2
> 
> 时间：2012-06-15T10:20:14.920
> 
> 标签：c++, c++11, assertions, static-assert

`static_assert`与模板一起似乎是一个非常好的功能。

但是，我很难在标准库中找到用于在编译时进行各种测试的函数。

例如，我正在寻找一个函数来检查一个类型是否是另一个类型的子类型。`boost::is_base_of`但是，这项工作是 std 中的一个类似功能，所以我不需要依赖 boost。

基本上，是否有一个很好的函数列表可以在`static_assert`C++11 标准库中使用并包含在其中？

什么时候`static_assert`执行？我可以将它放在模板中的任何位置并针对每个模板实例进行评估吗？它可以用来将模板参数限制为类的特定子类型吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-15T10:23:22.343

看看最终的[C++11 草案](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2011/n3242.pdf)，第 20.7 节，尤其是`<type_traits>`标题。

你要问的是：`std::is_base_of<base, derived>::value;`

关于您的问题：`static_assert`可以在编译器认为合适时进行评估，但通常会：

*   在模板中：如果表达式使用依赖名称，则在实例化时间；否则，在定义时间。
*   超出模板：在定义时间内。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-15T10:25:34.247

除了@rodrigo 的回答（他更快……），

> 什么时候执行静态断言？我可以将它放在模板中的任何位置并针对每个模板实例进行评估吗？它可以用来将模板参数限制为类的特定子类型吗？

很不幸的是，不行。例如，无论模板如何，`static_assert(false, "bummer");`都*始终执行 a。*如果您想（部分）专门化模板，这尤其会失败。

标准（§7.4）说：

> [如果条件`static_assert`是`false`]程序格式错误，并且生成的诊断消息（1.4）应包括字符串文字的文本，[…]

不幸的是，这很不具体，但这种缺乏特异性实际上正是`static_assert`它不依赖于模板类型时的行为方式。

您需要使条件`static_assert`依赖于模板参数以将其执行绑定到特定的模板参数。

所以以下将失败：

```
template <typename T>
struct some_type {
    static_assert(false, "T must be a pointer type");
};

template <typename T>
struct some_type<T*> {
    // …
}; 
```

最后，我衷心推荐你阅读 Marthino 关于[*更多类型特征*](http://rmartinho.github.com/2012/05/29/type-traits-galore.html)的文章，该文章更详细地介绍了这个过程，并给出了如何优雅地解决许多与 trait 相关的问题的提示。

# php - 将各种格式的音频文件转换为 mp3 和 ogg

> ID：11048832
> 
> 赞同：1
> 
> 时间：2012-06-15T10:20:31.147
> 
> 标签：php, audio

我正在设置一个播客。对于跨浏览器的支持，我目前需要上传一个 mp3 文件和一个 ogg 文件。我想简化该过程以上传许多音频文件之一，在服务器上将其转换为一个 mp3 和一个 ogg，然后将其放入文件夹中。这可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T10:39:20.497

出于您的目的，您需要使用[ffmpeg](http://ffmpeg.org/)进行转换，并最终使用[ffmpeg-php](http://ffmpeg-php.sourceforge.net/)。

像：

```
<?php
system ('ffmpeg -i /tmp/a.wav -ar 22050 /tmp/a.mp2', $retval); // took from the ffmpeg documentation. it's just an example
// add " > /dev/null &" if you want to execute in background
?> 
```

# php - PHP，将参数从命令行传递到 PHP 脚本

> ID：11048835
> 
> 赞同：34
> 
> 时间：2012-06-15T10:20:41.567
> 
> 标签：php, parameter-passing, command-line-interface

我想从 PHP 命令行界面传递参数，然后使用 PHP 脚本读取值，如下所示：

```
<?php
  $name1 = $argv[1];    
  echo $name1;
?> 
```

我像这样从 CLI 传递变量：

```
C:\xampp\php\php.exe name.php Robby 
```

以上工作，我得到罗比作为输出。

但我想做这样的事情：

```
C:\xampp\php\php.exe name.php -inputFirstName="Robby" 
```

以便用户在正确的位置输入正确的参数。解析这些参数的适当方法是什么？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-06-15T10:38:46.690

从命令行调用 PHP 脚本时，您可以使用 $argc 找出传递了多少参数，并使用 $argv 来访问它们。例如运行以下脚本：

```
<?php
    var_dump($argc); //number of arguments passed 
    var_dump($argv); //the arguments passed
?> 
```

像这样：-

```
php script.php arg1 arg2 arg3 
```

将给出以下输出

```
int(4)
array(4) {
  [0]=>
  string(21) "d:\Scripts\script.php"
  [1]=>
  string(4) "arg1"
  [2]=>
  string(4) "arg2"
  [3]=>
  string(4) "arg3"
} 
```

有关详细信息，请参阅[$argv](http://www.php.net/argv)和[$argc](http://www.php.net/argc)。

做你想做的，让我们说

```
php script.php arg1=4 
```

您需要在等号上展开论点：-

```
list($key, $val) = explode('=', $argv[1]);
var_dump(array($key=>$val)); 
```

这样你就可以在等号前面有任何你想要的东西，而不必解析它，只需检查 key=>value 对是否正确。但是，这有点浪费，只需按照正确的顺序指示用户传递参数即可。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-07-06T15:19:44.773

我使用这种相当简洁的方法：

```
if($argc>1)
  parse_str(implode('&',array_slice($argv, 1)), $_GET); 
```

它将处理一个呼叫，例如：

```
php script.php item1=4 item2=300 
```

通过将其发送到 $_GET 您会自动处理 Web 或 CLI 访问。

对于评论，这是在执行以下操作：

*   如果参数的数量大于一个（因为第一项是脚本的名称），则继续
*   获取不包括第一项的参数数组
*   将其转换为带有 & 符号的标准查询字符串格式
*   使用 parse_str 提取到 $_GET 数组

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-06-15T12:19:41.070

虽然答案是正确的并且您可以手动进行解析，但 PHP 还提供了`getopt()`可能在此处实际提供的功能。

还有一些面向对象的替代方案（用 PHP 编写，在许多库中可用）可能会成为您所需要的。谷歌搜索“php getopt”将产生有用的结果。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-10-25T11:54:57.093

在问题的情况下，该`getopt()`函数可能是最正确的答案。特别是因为它是使用 PHP 5.3 使平台独立的。在这个问题的特殊情况下并解析多个参数，利用此函数的一种方法如下：

```
$defaultValues = array("inputFirstName" => "");
$givenArguments = getopt("", array("inputFirstName:"));
$options = array_merge($defaultValues, $givenArguments);
$inputFirstName = $options['inputFirstName']; 
```

使用值“Robby”设置 $inputFirstName 的调用将是：

```
> php script.php --inputFirstName="Robby" 
```

**解释**

所有预期参数的默认值都在`$defaultValues`数组中设置。通过命令行参数发送的输入由 PHP 的`getopt`函数收集并由`$givenArguments`. 请注意，字符串`:`末尾的冒号 ( )`"inputFirstName:"`表示这是必需的参数。如果此处没有冒号，则只会检测到参数的存在，而不是实际值（[更多信息请参阅 PHP 手册](https://secure.php.net/manual/en/function.getopt.php#refsect1-function.getopt-parameters)）。在第三行将这两个数组合并在一起会生成数组，其中所有预期的参数都设置为默认值或命令行/终端提供的参数（如果它们可用）。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-04-05T12:50:39.977

您可以将参数作为一个参数发送，然后像 $_GET 数组一样解析该参数

```
C:\xampp\php\php.exe name.php "inputFirstName=Robby&LastName=John" 
```

在你的 PHP 文件中

```
if (!empty($argv[1])) {
  parse_str($argv[1], $_GET);
} 
```

你会像往常一样在 $_GET 数组中得到参数

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-03-28T19:05:43.030

我不知道当时这个问题是否被问到我要回答的问题是可用的，但是如果你打电话`php-cgi -f myfile.php var=something`，你可以从命令行中检索到 whit `$var=$_GET['var'];` ，那么你不必更改你的代码来调用它网络浏览器或命令行

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-06-19T09:22:37.533

如果您不介意使用库，我建议您看一下[Symfony 的 The Console Component](https://symfony.com/doc/current/components/console.html "Symfony 的控制台组件")。

它可用于创建命令行应用程序并支持使用[Arguments & Options](https://symfony.com/doc/current/console/input.html "输入选项")。

文档页面包含几个很好的示例来帮助您入门。

当然，在引擎盖下，它使用了与 vascowhite 所解释的相同的技术。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-06-15T10:26:45.473

您可以在程序中解析用户输入以查找特定字符串，例如`-inputFirstName="x"`（例如使用正则表达式），然后将正确的变量设置为 x。

# javascript - Head js 加载 javascript 文件的问题

> ID：11048836
> 
> 赞同：0
> 
> 时间：2012-06-15T10:20:44.570
> 
> 标签：javascript, refresh, minify, head.js

我正在使用 Head js 并行加载我的 javascript 文件。我将 head js 添加到我的头上，然后使用`head.js("path/to/file/my.js");`，但是当我加载我的网页时，脚本丢失了。只有刷新几次后，整个脚本才能正常工作。为什么我需要刷新它才能使其工作？任何建议，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T10:25:14.537

由于脚本是异步加载的，因此您不能立即使用它。刷新页面后，它会在缓存中找到脚本，因此*有时会*及时加载任何需要它的代码。

对需要脚本的任何代码使用该`ready`方法：

```
head.ready(function() {
  // any code that needs the script to be loaded first
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T10:29:40.020

另一种方法是标记您的库，然后在加载脚本时获取就绪事件。[从http://headjs.com/](http://headjs.com/)阅读更多标签脚本。

```
head.ready("your", function() {

});

head.js(
   {jquery: "http://http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"},
   {tools: "http://cnd.jquerytools.org/1.2.5/tiny/jquery.tools.min"},
   {your: "http://a.heavy.library/we/dont/want/to/wait/for.js"},

   // label is optional
   "http://can.be.mixed/with/unlabeled/files.js"
); 
```

# android - android中的加密和解密

> ID：11048838
> 
> 赞同：1
> 
> 时间：2012-06-15T10:20:47.800
> 
> 标签：android, android-intent

由于我是加密新手，我被困住了，非常感谢您的帮助。

我有两个类一个用于加密和解密发送的文本`main.xml`

**Base64活动：**

```
public class Base64Activity extends Activity {
private Button btnEncrypt, btnDecrypt;
private EditText txtOrg, txtEncr, txtEncr1, txtDecr;
private byte[] encrypted;
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main);

btnEncrypt = (Button)findViewById(R.id.button1);
btnDecrypt = (Button)findViewById(R.id.button2);
txtOrg = (EditText)findViewById(R.id.editText1);
txtEncr = (EditText)findViewById(R.id.editText2);
txtEncr1 = (EditText)findViewById(R.id.editText3);
txtDecr = (EditText)findViewById(R.id.editText4);

btnEncrypt.setOnClickListener(new View.OnClickListener() {

public void onClick(View v) {
// TODO Auto-generated method stub
try {
// Generate a temporary key. In practice, you would save this key.
// See also Encrypting with DES Using a Pass Phrase.
String key="Helloooooo";
Log.d("prk","step0");

DesEncrypter a= new DesEncrypter();
String a1=txtOrg.getText().toString();
Log.d("prk",a1);
// Encrypt
encrypted = a.encrypt(a1.getBytes("UTF8"));
String value1=new String(encrypted);
txtEncr.setText(encrypted.toString());
txtEncr1.setText(value1.toString());
Log.d("prk","step2");
// Decrypt

} catch (Exception e)
{
Log.d("Exception ",e.toString());

}
}
});

btnDecrypt.setOnClickListener(new View.OnClickListener() {

public void onClick(View v) {
// TODO Auto-generated method stub
try {
DesEncrypter a= new DesEncrypter();
//Log.d("while decrypting",encrypted );
String a1=txtEncr.getText().toString();
//byte[] decrypted = a.decrypt(a1.getBytes("UTF-8"));
byte[] decrypted = a.decrypt(encrypted);

String value=new String(decrypted);
Log.d("Decrypted Test",value);
txtDecr.setText(value);
// Decrypt

byte[] decrypted1 = a.decrypt(a1.getBytes("UTF-8"));
//byte[] decrypted = a.decrypt(encrypted);

String value1=new String(decrypted1);

Log.d("Loaded Decrypted=",value1);
FileOutputStream fout=openFileOutput("textFile.txt",MODE_WORLD_READABLE);
//OutputStreamWriter osw=new OutputStreamWriter(fout);
//write the string to the file
fout.write(encrypted);
fout.flush();
fout.close();

} catch (Exception e)
{
Log.d("Exception ",e.toString());

}
}
});
} 
} 
```

* * *

**解密器：**

```
public class DesEncrypter {

private static final String ALGO="AES";
private static final String a="TheBestSecretKey";
private static final byte[] keyValue=a.getBytes();

public byte[] encrypt(byte[] bs) throws Exception{

byte[] key={'h','e','l','l','o','o','o','o','h','e','l','l','o','o','o','o'};
SecretKeySpec skeyspec=new SecretKeySpec(key,"AES");
Log.d("Encrypted Key=  ",key+"");
Cipher c=Cipher.getInstance("AES/ECB/PKCS7Padding");
c.init(Cipher.ENCRYPT_MODE,skeyspec);
byte[] encVal=bs;
Log.d("Encrypted",encVal.toString());
return c.doFinal(encVal);
}

public byte[] decrypt(byte[] encryptedData) throws Exception{
byte[] key={'h','e','l','l','o','o','o','o','h','e','l','l','o','o','o','o'};
Log.d("Decrypted Key=  ",key+"");
SecretKeySpec skeyspec=new SecretKeySpec(key,"AES");
Cipher c=Cipher.getInstance("AES/ECB/PKCS7Padding");
c.init(Cipher.DECRYPT_MODE,skeyspec);
Log.d("Inside Decryption 2 ",encryptedData+"");
byte[] decValue=c.doFinal(encryptedData);
return decValue;
}
} 
```

* * *

加密有效，当我使用

```
DesEncrypter a= new DesEncrypter();
String a1=txtEncr.getText().toString();
byte[] decrypted = a.decrypt(encrypted); 
```

这部分也有效。但是当我使用

```
byte[] decrypted = a.decrypt(*a1.getBytes("UTF8")*); 
```

并使用此值对其进行解密，给我一个错误“解密中的最后一个块不完整”。我认为将字节转换为字符串时存在问题，反之亦然。

我很绝望，需要你的帮助。我想要的是将加密文本存储在文本框或文件中，然后使用它来解密文本。

提前谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T12:04:22.837

无需绝望，您可以检查如下：

```
txtEncr.setText(encrypted.toString()); 
```

然后

```
byte[] txtEncrBytes = txtEncr.getText().toString().getBytes(); 
```

通过比较*encrypted*和*txtEncrBytes*使用

```
Arrays.equals(encrypted,txtEncyBytes); 
```

你会发现两个字节数组不相等。

原因是 txtEncr 的文本被加密的 toString()，你的代码在一个数组上调用 toString，这将产生一个相当无用的结果，例如 [C@16f0472\. 您至少应该使用 Arrays.toString 将数组转换为提供数组内容的可读字符串。参见[Programming Puzzlers](https://rads.stackoverflow.com/amzn/click/com/088160111X)，第 3 章，谜题 12。

但请注意：加密的字节数组通常包含与默认平台编码中的字符不对应的字节值。在这种情况下，当您创建 String 时，该字节将被转换为“替换字符”，U+FFFD (�)，并且正确的值将无法挽回地丢失。看到[这个](https://stackoverflow.com/questions/4598873/how-to-handle-last-block-incomplete-in-decryption)。

所以答案是：只需将您的代码保留为原始版本：

```
DesEncrypter a= new DesEncrypter();
String a1=txtEncr.getText().toString();
byte[] decrypted = a.decrypt(encrypted); 
```

总之，您应该始终保留加密的字节数组，而不是使用临时字符串保存它然后从临时字符串中检索字节数组。

PS：我认为您可能需要格式化您的帖子，您的代码列表看起来很糟糕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-06T12:08:49.157

存储和传输加密数据字节数组的最简单方法是将其转换为 Base64：

从您的加密方法中获取 encryptedBytes。然后：

```
String storeThis = Base64.encode(encryptedBytes, Base64.DEFAULT); 
```

然后，当您想将字节取回解密时：

```
byte[] encryptedBytes = Base64.decode(storeThis, Base64.DEFAULT); 
```

将 encryptedBytes 传递给您的解密方法。

# hibernate - Hibernate 从数据库中获取日期等于给定日期的对象

> ID：11048839
> 
> 赞同：0
> 
> 时间：2012-06-15T10:20:49.860
> 
> 标签：hibernate, date, hql

我想从给定日期时间范围内的数据库中获取对象列表。我如何做到这一点？这是我目前正在使用的解决方案，但它不返回任何内容......并且给定的值是正确的。

```
public List getRegistrationsForUserOnDate(Date startdate, Date enddate){
        Set<Date> dateSet = new HashSet<Date>();
        Calendar calendar = new GregorianCalendar();
        calendar.setTime(enddate);

        while (calendar.getTime().before(startdate))
        {
            Date resultado = calendar.getTime();
            dateSet.add(resultado);
            calendar.add(Calendar.DATE, 1);
        }

        String query = "from Registration where date = '" + Validation.convertToValidDateTime(startdate, true) + "'";
        for(Date date : dateSet){
            query += " AND date = '" + Validation.convertToValidDateTime(date, true)+"'";
        }             
        return em.createQuery(query).getResultList();           
    } 
```

例如：

```
startdate  = Fri Jun 15 12:07:31 CEST 2012

enddate = Wed Jun 13 12:07:31 CEST 2012 
```

然后这个方法查询看起来像这样（从调试模式复制的数据）：

```
from TimeRegistration where date = '2012-06-15 00:00:00' AND date = '2012-06-14 00:00:00' AND date = '2012-06-13 00:00:00' 
```

这些是数据库中存在的一些示例字段：

```
id |       date          |comment|FK|FK|FK
132|"2012-06-08 00:00:00"|    "" | 6| 2| 1
133|"2012-06-15 00:00:00"|    "" | 8| 1| 1
134|"2012-06-14 00:00:00"|    "" | 3| 2| 1
135|"2012-06-13 00:00:00"|    "" | 1| 3| 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T10:27:57.003

日期如何等于两个不同的日期？你没有得到任何东西并不奇怪。

date = '2012-06-15 00:00:00' AND date = '2012-06-14 00:00:00' - 那么如果今天的日期是星期四和星期五返回呢？

您应该使用 OR 而不是 AND，还是更好，大于和小于或介于两者之间？

```
from TimeRegistration where date between '2012-06-13 00:00:00' and '2012-06-15 00:00:00' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T09:45:27.240

## 总部：

```
from objectname where date in ('date1','date2','date3') 
```

## 结果：

## *返回其日期属性等于 date1 或 date2 或 date3 的所有对象。*

*我现在使用我创建的以下方法，您只需声明开始日期和结束日期，它会获取这两个日期之间日期的所有对象，它就像一个魅力。*

```
public List getRegistrationsForUserOnDate(Date startdate, Date enddate)throws Exception{
        Collection<Date> dateList = new ArrayList<Date>();
        Calendar calendar = new GregorianCalendar();
        calendar.setTime(enddate);

        while (calendar.getTime().before(startdate)){
            Date resultado = calendar.getTime();
            dateList.add(resultado);
            calendar.add(Calendar.DATE, 1);
        }

            String query = "from Registration t where t.date in ('" + Validation.convertToValidDateTime(startdate, true) + "'";
            for(Date date : dateList){
                query += ", '" + Validation.convertToValidDateTime(date, true)+"'";
            }
            query += ")";

            return em.createQuery(query).getResultList();
        } 
```

这是我的 Validation.convertToValidDateTime 方法源，玩得开心！：

```
public static String convertToValidDateTime(Date date, boolean clearTime)throws Exception{
        SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
        SimpleDateFormat dateFormatRemoveTime = new SimpleDateFormat("yyyy-MM-dd");
        return clearTime
                ?dateFormat.format(dateFormatRemoveTime.parse(dateFormatRemoveTime.format(date)))
                :dateFormatRemoveTime.format(date);
    } 
```

# jpa - JTA UserTransaction 回滚不起作用

> ID：11048841
> 
> 赞同：0
> 
> 时间：2012-06-15T10:20:51.137
> 
> 标签：jpa, ejb, translation, jta

我试图简短地描述我的环境。技术：EJB 3.1、JSF、JBoss 7.1.1

有服务类（@SessionScoped @Stateful）。服务类调用 Dao 类 (@Stateless)

我想 ：

*   仅在 @StateLess bean 中使用 EntityManager (Dao)
*   在大多数情况下有短事务（如持久化、合并）
*   对一些多步骤方法有一个长事务（方法也在 Dao 中）
*   有实际的（最新的，没有一级缓存的）数据

我有：Pesistense.xml

```
 <provider>org.hibernate.ejb.HibernatePersistence</provider>

    <jta-data-source>java:jboss/datasources/MydataSource</jta-data-source>
    <properties>

        <property name="hibernate.hbm2ddl.auto" value="create-drop"/>
        <property name="hibernate.dialect"value="org.hibernate.dialect.PostgreSQLDialect"/>
        <property name="hibernate.transaction.manager_lookup_class"
                  value="org.hibernate.transaction.JBossTransactionManagerLookup"/>
        <property name="hibernate.connection.autocommit" value="true"/>
        <property name="hibernate.connection.characterEncoding" value="utf8"/>

        <property name="hibernate.c3p0.min_size" value="5"/>
        <property name="hibernate.c3p0.max_size" value="20"/>
        <property name="hibernate.c3p0.timeout" value="1800"/>
        <property name="hibernate.c3p0.max_statements" value="50"/>

    </properties>

</persistence-unit> 
```

道

```
@Stateless
@TransactionManagement(TransactionManagementType.BEAN)
public class UserDaoBean implements UserDAO, Serializable {

    @PersistenceContext(name = "MyEntityManager")
    private EntityManager em;

     @Override
     @Transactional
 public void update(User user) throws Exception {
        User tmpUser = getUser(user.getUser());
       //some code, should be rollback, if it is an exception
        em.persist(tmpUser);

    } 
```

事务拦截器

```
@Transactional
@Interceptor
public class TransactionInterceptor implements Serializable {

    @Resource
    private UserTransaction userTransaction;

    @AroundInvoke
    public Object verifyAccess(InvocationContext context) throws
            Exception {
        Object result = null;

        try {
            userTransaction.begin();
            result = context.proceed();
            userTransaction.commit();
        } catch (Exception e) {
                userTransaction.rollback();
             throw new CustomRuntimeException(e.getMessage());
        }

        return result;
    }

} 
```

问题：如果在 Dao 方法中抛出异常，部分数据将保存在 DB 中，而不是全部回滚。

我认为，需要将交易加入到 EM。或断开连接将每个项目立即保存到数据库（使用缓存）。我尝试了不同的方法，但没有成功。

提前感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T19:30:44.817

这看起来特别有问题：

```
<property name="hibernate.connection.autocommit" value="true"/> 
```

您根本不应该在`persistence.xml`文件中进行任何连接管理。`<jta-data-source>`放入连接信息的元素和概念`<properties>`是相互排斥的。

JPA 提供者要么创建和管理连接（使用属性），要么从容器获取连接（使用 jta-data-source）。将两者都放在那里会给您带来不可预测的结果。如果 JPA 提供者选择尊重连接属性，您可以很容易地关闭事务管理、连接池等。

你想要的是在容器中配置所有这些东西，而不是在持久性单元声明中做任何事情。

## 更新

`TransactionManagementType.BEAN`（BMT）和的组合`UserTransaction`应该没问题。请注意，您需要 catch`Throwable`而不是`Exception`. 调用也`rollback()`可以抛出应该处理的异常。不过，总的来说，这应该会产生您想要的结果。

请注意，虽然这看起来与您从`TransactionManagementType.CONTAINER`(CMT) 获得的内容几乎相同并且没有拦截器，但它们确实在一个关键方面有所不同：

*   两个 CMT bean 可以共享同一个事务
*   两个 BMT bean**不能**共享同一个事务。

这是因为容器需要在使用 BMT 调用任何 bean 之前暂停任何可能正在进行的事务。在这方面，术语*Bean-Managed Transaction*实际上有点用词不当，因为容器**总是**在调用 BMT bean 之前对正在进行的任何事务采取行动。

因此，BMT 和 CMT 并不是平等的，实际上不可能实现一些基本的 CMT 功能，例如`SUPPORTS`或`REQUIRED`使用 BMT。

# android - 获取数据库表中是否存在数据

> ID：11048850
> 
> 赞同：0
> 
> 时间：2012-06-15T10:21:42.347
> 
> 标签：android, sqlite

> **可能重复：**
> [在数据库表中获取数据，如果不存在则将其插入，否则返回行 ID](https://stackoverflow.com/questions/11044931/fetch-data-in-database-table-insert-it-if-not-exist-else-return-the-row-id)

我尝试获取数据库表中是否存在数据，如果是，我应该获取行 ID，否则我将其插入表中，这是我的代码

```
public int finddate(String date){
    int id=0;
    AndroidOpenDbHelper androidOpenDbHelperObj = new AndroidOpenDbHelper(this);
    SQLiteDatabase sqliteDatabase = androidOpenDbHelperObj.getWritableDatabase();
    Cursor cursor = sqliteDatabase.rawQuery("SELECT _id FROM " + 
                            AndroidOpenDbHelper.TABLE_DATE + " where " +
                            AndroidOpenDbHelper.COLUMN_NAME_DATE + " = " + date,
                            null);
    startManagingCursor(cursor);
    if (cursor != null) { 
        if( cursor.moveToFirst() ) {
            id = cursor.getInt(cursor.getColumnIndex("_id"));
        }
    } else { 
        id=0;
    }
    sqliteDatabase.close(); 
    return id;          
} 
```

当我尝试使用现有项目时，我得到此方法的结果 =0 并且该项目已插入表中，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T10:26:23.607

您的查询应如下所示：

```
Cursor cursor = sqliteDatabase.rawQuery("SELECT _id FROM " + AndroidOpenDbHelper.TABLE_DATE + " where "+ AndroidOpenDbHelper.COLUMN_NAME_DATE+ " =\'"+date+"\'", null);
startManagingCursor(cursor);
cursor.moveTofirst();

if (cursor.getCount() > 0) { 

        id = cursor.getInt(cursor.getColumnIndex("_id"));
    }
} else { 
    id=0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T10:29:08.047

`date`没有正确转义。解决它的最安全和最干净的方法是将日期值作为参数传递，而不是将其嵌入到查询中。

您还可以稍微整理一下光标管理。您不需要检查`null`游标，因为如果查询失败将引发异常。此外，您不需要设置`id = 0`，因为您已经在开始时进行了设置。这要简单得多：

```
Cursor cursor = sqliteDatabase.rawQuery("SELECT _id FROM " + 
                        AndroidOpenDbHelper.TABLE_DATE + " where " +
                        AndroidOpenDbHelper.COLUMN_NAME_DATE + " = ?",
                        new String[] { date } );

if ( cursor.moveToFirst() ) {
    id = cursor.getInt(cursor.getColumnIndex("_id"));
}

cursor.close();
sqliteDatabase.close(); 
```

# lotus-notes - 如何更改任何 nsf 的创建日期？

> ID：11048852
> 
> 赞同：0
> 
> 时间：2012-06-15T10:21:57.643
> 
> 标签：lotus-notes, lotus

我需要更改**nsf**的创建日期。我该怎么办？？？

我搜索并发现**database.Created**是 >>***只读***值，无法更改。 [http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/index.jsp?topic=%2Fcom.ibm.designer.domino.main.doc%2FH_CREATED_PROPERTY_DB.html](http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/index.jsp?topic=/com.ibm.designer.domino.main.doc/H_CREATED_PROPERTY_DB.html)

有什么办法可以让我这样做吗？？？？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T19:38:16.060

如果您创建文件的操作系统副本，Notes 创建日期应该保持不变。否则，您的创建日期不能早于今天。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T12:28:03.767

如果您通过将文件扩展名更改为 .ntf 将数据库更改为模板，然后基于该模板创建一个新数据库，这将更改创建日期

更新：您也可以使用“数据库 > 新副本”选项（或 8.x 版中的应用程序 > 新副本）完成此操作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T16:21:10.747

因为我认为这通常不是一个好主意，所以我没有对此进行测试，但它可能会起作用：

*   关闭服务器。
*   然后将要操作的 NSF 的操作系统副本制作到 PC 上。
*   更改本地 PC 的日期/时间。
*   开始笔记，复制一份。
*   将此新 NSF 复制回您的服务器（操作系统副本）。

# asp.net-mvc-3 - 如何获得贝宝交易费用？

> ID：11048856
> 
> 赞同：1
> 
> 时间：2012-06-15T10:22:02.843
> 
> 标签：asp.net-mvc-3

我集成了 PayPal 沙箱。我想知道 PayPal 在交易金额中扣除了多少作为 PayPal 费用。PayPal 退货 URL 中只有交易 ID 和交易金额。如何获取每笔交易的交易费用，以便商户准确了解交易详情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T19:07:25.333

您需要获取每个交易 ID 的交易详细信息。它会回来`FEEAMT`

[https://www.x.com/developers/paypal/documentation-tools/api/gettransactiondetails-api-operation-nvp](https://www.x.com/developers/paypal/documentation-tools/api/gettransactiondetails-api-operation-nvp)

此 API 的 URL 是

[https://developer.paypal.com/docs/classic/api/merchant/GetTransactionDetails_API_Operation_NVP/](https://developer.paypal.com/docs/classic/api/merchant/GetTransactionDetails_API_Operation_NVP/)

# yii - Yii View, 替换 CGridView 中的一些数据库值

> ID：11048857
> 
> 赞同：2
> 
> 时间：2012-06-15T10:22:08.580
> 
> 标签：yii

我是 Yii 的新手，对不起，如果我的问题可能很愚蠢，我正在使用 CGridView 在表中显示我的数据库的一些字段：

```
<?php echo CHtml::link('Advanced Search','#',array('class'=>'search-button')); ?>
<div class="search-form" style="display:none">
<?php $this->renderPartial('_search',array(
    'model'=>$model,
 )); ?>
</div><!-- search-form -->

<?php 

 $this->widget('zii.widgets.grid.CGridView', array(
   'id'=>'show-grid',
   'dataProvider'=>$model->search(),
   'filter'=>$model,
   'columns'=>array(
       'id',
       'title',
       'brief',
       'tbl_season_id',
       'on_season',

                array(
                    'name'=>'status',
                    'value'=>'Lookup::item("NewsStatus",$data->status)',
                    'filter'=>  Lookup::items('NewsStatus'),
                ),
        array(
        'class'=>'CButtonColumn',
        ),
        ),
      )); ?>
    </div> 
```

我想替换一些显示的值，例如，该`on_season`字段是二进制的，在表中值是 0 或 1，我想将此值更改为`Yes`and `NO`，

并且`tbl_season_id`是另一个表的外键，我想获取季节的名称并将其代替用户无法理解的 id。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T12:07:45.847

您可以参考这篇 wiki 文章，将您的列值自定义为您心中的内容

[Yii 文档：cgridview-render-customized-complex-datacolumns](http://www.yiiframework.com/wiki/278/cgridview-render-customized-complex-datacolumns/)

请记住，value 属性可以是表达式字符串，稍后会针对行的每个数据对其进行评估。因此，您在那里有一个方法调用，可以根据该行的当前值为您动态计算任何值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T06:31:50.610

* * *

让你有两张桌子

1): 客户 2): 项目

* * *

关系是一个客户有很多项目。

在模型中

* * *

和客户模型关系是（客户表模型名称是**客户**）

```
 class Client extends CActiveRecord{
    } 
```

和关系（）方法；

```
 return array(
      'projects' => array(self::HAS_MANY, 'Projects', 'clients_id'),
  ); 
```

* * *

项目模型关系是（项目表模型名称是**Projects**）

```
 class Projects extends CActiveRecord{
         } 
```

和关系（）方法；

```
 return array(
          'clients' => array(self::BELONGS_TO, 'Client', 'clients_id')
     ); 
```

* * *

**现在** 您可以使用以下内容获取 client_name 替换 CGridView 中 proejct 表中的 client_id

* * *

```
 'dataProvider' => $model->search(),
  'columns' => array(
         'id',
          'project_name',
     array(
        'name' => 'client Name',
        'value' => '$data->clients->name',   //where name is Client model attribute 
       ),
    ) 
```

* * *

和 CDetailView 中的项目视图页面，您可以使用以下内容

```
'data' => $model,
'attributes' => array(
               'id',
              'project_name',
         array(
            'name'=>'Client Name',
            'value'=>$model->clients->name ,
        ), 
```

)

* * *

如果您与公司表有客户关系（公司有很多客户）客户模型

```
 'company' => array(self::BELONGS_TO, 'Company', 'company_id'), 
```

您还可以通过索引中的以下方法获取公司名称（**CGridview**）

```
 array(
      'name' => 'client Name',
    'value' => '$data->clients->company->name', //where name is company model attribute 
    ), 
```

并在视图 **CDetailView**

```
 array(
    'name'=>'Client Name',
     'value'=>$model->clients->company->name ,
        ), 
```

* * *

# facebook - 独立的 Flash 应用程序 + Facebook

> ID：11048860
> 
> 赞同：0
> 
> 时间：2012-06-15T10:22:17.283
> 
> 标签：facebook, actionscript-3, flash, actionscript

所以事情就是这样……我需要一个独立的 Flash 应用程序，它通过套接字接收图像，然后将其发布到 facebook 上。我见过的几种方法使用 php，但在这种情况下，我真的只想使用独立的。

关于如何做到这一点的想法？可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T10:43:37.130

您尝试做的事情也可以在没有服务器脚本的情况下从客户端完成。

看看这些链接

[http://code.google.com/p/facebook-actionscript-api/](http://code.google.com/p/facebook-actionscript-api/)

[http://www.adobe.com/devnet/facebook.html](http://www.adobe.com/devnet/facebook.html)

这是一个 AS facebook api，Adobe 网站上有一些非常有用的示例来说明如何设置它。

在您实现登录并与 Fb api 建立有效连接后，您可以使用 AS 内的 api 将您的图片上传到用户的相册。

# java - 拦截呈现的 HTML

> ID：11048861
> 
> 赞同：0
> 
> 时间：2012-06-15T10:22:17.893
> 
> 标签：java, playframework, wkhtmltopdf, playframework-1.x

我正在使用`Play 1.2.3`. 其中一项功能是将呈现的`HTML`页面导出为`PDF`. 我已经`HTML`根据服务器发送的参数动态呈现了模板。
我打算使用[wkhtmltopdf](http://code.google.com/p/wkhtmltopdf) 将呈现的 HTML 转换为 PDF。有没有一种方法可以`HTML`为此目的拦截最终结果（由框架通过替换所有模板标签来处理）..？还是有更好的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T13:09:22.323

已经有一个模块：[http ://www.playframework.org/modules/pdf](http://www.playframework.org/modules/pdf)

如果你想自己做，你可以在 Controller 类中观察模板是如何加载的，并替换一些部分以将渲染的模板作为字符串获取

```
protected static String renderTemplate(String templateName, Map<String,Object> args) {
    try {
        Template template = TemplateLoader.load(template(templateName));
        // Get the template into a String
        return template.render(args);
    } catch (TemplateNotFoundException ex) {
        if (ex.isSourceAvailable()) {
            throw ex;
        }
        StackTraceElement element = PlayException.getInterestingStrackTraceElement(ex);
        if (element != null) {
            throw new TemplateNotFoundException(templateName, Play.classes.getApplicationClass(element.getClassName()), element.getLineNumber());
        } else {
            throw ex;
        }
    } 
```

# c# - 异常会影响应用程序的性能吗？

> ID：11048862
> 
> 赞同：-1
> 
> 时间：2012-06-15T10:22:20.200
> 
> 标签：c#, exception, nullreferenceexception

我有一个 C# 应用程序..我不断得到一个空引用异常..我设法捕获这个异常并记录它..但我怀疑这个异常是否会影响我的应用程序的性能..请注意，我不是想避免异常相反，如果连续触发此异常，我需要知道此异常是否会影响我的应用程序的性能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T10:25:21.967

如果你得到一个`NullReferenceException`，你应该*修复*它而不是*抓住*它。*只有当它以您无法*修复的方式出现在代码中时（例如损坏的第三方库），您才应该抓住它。A`NullReferenceException`总是表示*某处*出现编程错误。

至于性能 - 这取决于您所说的“持续”是什么意思。如果在没有任何问题的情况下抛出异常可能会非常昂贵 - 如果使用得当，它们会很好。例如，您每秒看到多少个？请注意，在调试器中运行时，异常通常比未附加调试器时要昂贵得多。

与以往一样，当您担心性能时，您应该*测试*性能，这样您就可以使用硬数据做出决策。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T10:42:44.700

异常被设计为在不抛出时将性能改变到最低限度：添加 try/catch 块对您的应用程序性能的影响应该非常有限。因此，我建议根据需要添加尽可能多的 try/catch 块，以在正确的级别捕获任何异常。

但是，抛出和捕获异常可能非常昂贵。应用程序必须切换上下文，在 using 块中处理任何元素......这就是我同意@Ramhound 的原因：你应该修复异常而不是捕获它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T10:26:32.323

这取决于您在哪里处理异常以及它们发生的频率。CodeProject 上有一篇关于异常和性能的好文章，我建议您阅读[它](http://www.codeproject.com/Articles/11265/Performance-implications-of-Exceptions-in-NET)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T10:27:29.077

是的，它影响它取决于它的频率。

有关更多信息，请参阅[链接](https://stackoverflow.com/questions/1152541/is-it-better-to-use-an-exception-or-a-return-code-in-python)，它也可以帮助您[链接](http://www.yoda.arachsys.com/csharp/exceptions2.html)

# asp.net - 意义

> ID：11048863
> 
> 赞同：145
> 
> 时间：2012-06-15T10:22:33.917
> 
> 标签：asp.net, web-config

我想知道是什么意思

```
<modules runAllManagedModulesForAllRequests="true" /> 
```

我正在使用 IIS 7.5，并且我有一个简单的 Web 应用程序。我需要在我的 web.config 文件中写这个吗？我还为 jquery ajax 调用编写了一些 http 处理程序。我正在使用表单身份验证和 asp.net 4.0。

我如何确定我必须运行哪个模块，哪个不应该运行？

* * *

## 回答 #1

> 赞同：128
> 
> 时间：2012-06-15T10:31:56.660

**模块前提条件：**

> IIS 核心引擎使用先决条件来确定何时启用特定模块。例如，性能原因可能决定您只想为也转到托管处理程序的请求执行托管模块。以下示例 ( `precondition="managedHandler"`) 中的前提条件仅对也由托管处理程序处理的请求启用表单身份验证模块，例如对 .aspx 或 .asmx 文件的请求：
> 
> ```
> <add name="FormsAuthentication" type="System.Web.Security.FormsAuthenticationModule" preCondition="managedHandler" /> 
> ```
> 
> 如果您删除该属性`precondition="managedHandler"`，表单身份验证也适用于不由托管处理程序提供的内容，例如 .html、.jpg、.doc，但也适用于经典的 ASP (.asp) 或 PHP (.php) 扩展。有关启用 ASP.NET 模块以针对所有内容运行的示例，请参阅“[如何利用 IIS 集成管道”。](http://www.iis.net/learn/application-frameworks/building-and-running-aspnet-applications/how-to-take-advantage-of-the-iis-integrated-pipeline)
> 
> 您还可以使用快捷方式来启用所有托管 (ASP.NET) 模块以针对应用程序中的所有请求运行，而不管“ `managedHandler`”前置条件如何。
> 
> **要使所有托管模块能够针对所有请求运行，而无需配置每个模块条目以删除“ `managedHandler`”前置条件，请使用以下部分`runAllManagedModulesForAllRequests`中的属性`<modules>`：**
> 
> ```
> <modules runAllManagedModulesForAllRequests="true" /> 
> ```
> 
> 使用此属性时，" `managedHandler`" 前提条件无效，所有托管模块都会针对所有请求运行。

复制自[IIS 模块概述：前提条件](http://www.iis.net/learn/get-started/introduction-to-iis/iis-modules-overview#Precondition)

# rmi - RMI IIOP 可以调用 RMI(JRMP) 服务器吗？

> ID：11048866
> 
> 赞同：0
> 
> 时间：2012-06-15T10:22:47.833
> 
> 标签：rmi, iiop

RMI IIOP 可以调用 RMI (JRMP) 服务器吗？

我知道 RMI IIOP 用于使用 corba 进行跨语言通信，但是 RMI IIOP 客户端可以调用使用 JRMP 实现的 RMI 服务器吗？

我猜这可以通过使用 RMI (JRMP) 注册表主机的 IP 地址来实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T10:33:19.390

不，这个问题甚至没有意义。RMI 服务器通过其存根调用，协议由存根实现，而不是客户端。

但是，您可以将相同的对象导出为 RMI/JRMP 远程对象和 RMI/IIOP 远程对象，方法是既不扩展`UnicastRemoteObject`也不扩展`PortableRemoteObject`并调用`exportObject()`这两个类的方法，并在 RMI 注册表和 COSNaming 服务中注册它，并且同时运行`rmic`（如有必要，请参阅前言`UnicastRemoteObject`）和`rmic -iiop`.

然后，如果您通过注册表查找它，您将获得一个 RMI/JRMP 存根，如果您通过 COSNaming 服务查找它，您将获得一个 RMI/IIOP 存根。

# extjs - 在 EXTJS 4 中移动树中的节点

> ID：11048867
> 
> 赞同：0
> 
> 时间：2012-06-15T10:22:48.530
> 
> 标签：extjs, tree, extjs4

我正在处理树中的移动节点，当它们移动时，它们的 ID 通过后端的 C# 在数据库中更新。到目前为止，我已经设法更新了正在移动的节点的位置，但是在它移动之后，树中其他节点的位置也应该得到更新。谁能告诉我如何进行此操作？

```
itemmove : {
fn : function(v, oldParent, newParent, index, eOpts) {
var nodeID = v.data.id;
var oldParent = oldParent.data.id;
var newParent = newParent.data.id;
var index = index;
var level = v.data.level;
movenode(nodeID, oldParent, newParent, index, level);
}
}

function movenode(nodeID, oldParent, newParent, index, level) {
Ext.Ajax.request({
    url : 'data/pages.aspx',
    params : {
        UserID : USER.UserID,
        mode : 'MOVENODE',
        currentNode : nodeID,
        oldParentNode : oldParent,
        newParentNode : newParent,
        index : index,
        level : level,
        ProjDB : projDB
    },
    success : function() {
        loadTREEst();
        genMessage(LANG.Suc, LANG.SaveOK, 'tick', false);

    },
    failure : function() {
        genMessage(LANG.Warn, LANG.GenWarn, 'warn', false);
    }
});
} 
```

因此，我将参数发送到 SQl，然后更新已移动节点的索引。

例如，如果我将一个节点从位置 8 移动到 1，则第 8 个节点的索引在数据库中更改为 1，但第一个节点的索引保持为 1。因此，树也不会更新。我希望树中的所有其他节点也得到更新。因此，在这种情况下，索引 1 中的节点将变为索引 2，索引 2 中的节点将变为索引 3，依此类推。谁能解释我如何做到这一点。

除了自动同步或同步之外，还有其他方法可以做到这一点吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T11:10:56.590

下面是一些适用于 4.1 的示例代码：

```
Ext.define('BS.model.ItemCategory', {
    extend: 'Ext.data.Model',
    fields: [
        {name: 'name'     , type: 'string'},
        {name: 'iconCls'  , type: 'string', defaultValue: 'treenode-no-icon'},
        {name: 'leaf'     , type: 'boolean', defaultValue: false},
        {name: 'expanded' , type: 'boolean', defaultValue: true, persist: false},
        {name: 'index'     , type: 'int'},        
    ],

    proxy: {
        type: 'direct',

        api: {
            create: ItemCategories.Create,
            read: ItemCategories.Read,
            update: ItemCategories.Update,
            destroy: ItemCategories.Delete,
        },
    }, 
}); 
```

您不会有直接代理，因为您的服务器不是 php，而只需放置相应的服务器脚本（请参阅[文档](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.proxy.Server-cfg-api)）。

然后我的商店：

```
Ext.define('BS.store.ItemCategories', {

    extend: 'Ext.data.TreeStore',    
    model: 'BS.model.ItemCategory',

    autoSync: true,

    root: {
        text: 'Root',
        id: 'NULL',
        expanded: true
    },

    clearOnLoad: true,
}); 
```

和观点：

```
Ext.define('BS.view.admin.pages.item-categories.ItemCategories' ,
{
    extend: 'Ext.tree.Panel',
    alias : 'widget.item-categories-tree',

    store: 'ItemCategories',

    displayField: 'name',

    rootVisible: false,
    useArrows: true,
    multiSelect: false,
    singleExpand: false,    
    allowDeselect: true,

    plugins: {
        ptype: 'treeviewdragdrop',                    
    },          
}); 
```

差不多就是这样！当您移动一个节点时，您会看到 ExtJS 向服务器发送一个更新请求，其中包含索引（排序）已更改的所有节点的数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T10:56:06.427

这是我为 4.0.7 编写的代码，据我记忆，它解决了这个问题。

```
// This happens after drag and drop
onItemMove: function(aNode, aOldParent, aNewParent, aIndex, aOptions)
{

    // Update the indeces of all the parent children (not just the one that moved)
    for ( i = 0; i < aNewParent.childNodes.length; i++ )
    {
        aNewParent.childNodes[i].data.sort = i;
        aNewParent.childNodes[i].setDirty();
    }

    this.mStore.sync();
}, 
```

请注意，当您将自己的请求发送到服务器时，您不会拥有 mStore.sync()，这仅涉及一条记录。通过将子节点设置为脏节点，同步会向服务器的更新调用发送多个记录（在我的情况下，我使用的是自动同步和直接）。

您应该考虑当用户将节点从父节点移动到父节点的兄弟节点时会发生什么 - 旧父节点和新父节点中某些节点的索引（排序）都会发生变化。因此，您最终可能会在服务器上获得 6 条需要更新的记录。

我要说的是，鉴于 4.1 已经正确处理节点移动，您最好升级到 4.1 并利用对它的本机支持，而不是自己编写代码。如果您坚持使用 4.0.7，请记住要考虑移动节点可能需要更新许多节点。

# iphone - 通过模态视图呈现细节视图控制器

> ID：11048868
> 
> 赞同：0
> 
> 时间：2012-06-15T10:22:49.300
> 
> 标签：iphone, ios, modal-dialog, cell, didselectrowatindexpath

我正在开发我的第一个应用程序，在此之前一切都很顺利（唯一要做的事情）。情况如下：

我的主视图控制器中有一个表格视图。所以，当有人选择一行时，我想显示另一个视图控制器（详细视图控制器），但我需要通过模式视图而不是推送来呈现它，因为我' m 不使用表视图控制器，仅在主视图中使用简单的表视图。. 有可能做到吗？如果是这样，我该如何实现“didSelectRowAtIndexPath”？

感谢您的帮助，我正在尝试解决此问题 3 天，哈哈

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T10:55:19.387

在您的 MainViewController 中，设置`tableView.delegate = self` Now implement the `didSelectRowAtIndexPath`，在其中您将执行以下操作

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    //Use indexPath.row or indexPath.section to get your data
    YourViewController *controller = [[YourViewController alloc] init];
    controller.someData = [someArray objectAtInde:indexPath.row];
    [self presentModalViewController:controller animated:YES];
} 
```

# html - 即使没有设置，H1 标签在底部仍然有填充或边距

> ID：11048873
> 
> 赞同：6
> 
> 时间：2012-06-15T10:23:17.977
> 
> 标签：html, css

即使没有设置，H1 标签在底部仍然有填充或边距。

我有一个 h1 标签和下面的一些文字。我将两者的边距和 madding 都设置为 0，但文本仍然不在 h1 文本的正下方。

我创建了一个 js fiddle 来说明我的观点

[http://jsfiddle.net/6hCrC/](http://jsfiddle.net/6hCrC/)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-15T10:25:55.037

没有填充。文本中只有默认分配的空间，`line-height`并且没有带有降序的字符（如 p、q 和 g）。

[http://jsfiddle.net/6hCrC/1/](http://jsfiddle.net/6hCrC/1/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-15T10:26:53.107

每个`font`人都有自己的垂直空间，称为**line-height**。这是`line-height`H1**的**。

检查这个[http://jsfiddle.net/6hCrC/4/](http://jsfiddle.net/6hCrC/4/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-15T10:26:31.153

尝试使用`line-height: 70px;`

希望这可以帮助！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-15T10:26:45.700

这与行高有关。也许另一种选择是为第一段设置负边距。

这是一个jsfiddle示例

[http://jsfiddle.net/6hCrC/3/](http://jsfiddle.net/6hCrC/3/)

或者，您可以将行高设置为 auto 以外的值（默认值）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-15T10:29:01.577

调整行高。[http://jsfiddle.net/6hCrC/13/](http://jsfiddle.net/6hCrC/13/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-06-02T03:45:46.357

这里更好的解决方案是：

```
h1, h2, h3, h4 {line-height: 1em;} 
```

# android - 创建可以在android中保存文本并能够打开它们的数组

> ID：11048883
> 
> 赞同：0
> 
> 时间：2012-06-15T10:23:57.340
> 
> 标签：android, arrays

现在我知道这可能需要很多。但我想做的是能够保存和打开笔记。现在，我现在可以在手机上保存和加载数据，以便下次打开应用程序时使用以下代码打开：

```
public class Notes extends Activity{

EditText savedText;
TextView dataResults;
public static String stringFolder = "SharedData";
SharedPreferences String;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.notes);
    setupVariables();
    String = getSharedPreferences(stringFolder, 0);

}

private void setupVariables(){

    savedText = (EditText) findViewById(R.id.notes_text_view);
    dataResults = (TextView) findViewById(R.id.notes_text_view);

}   

public void saveNotes(View v)
{

    String stringData = savedText.getText().toString();
    SharedPreferences.Editor editor = String.edit();
    editor.putString("SharedData", stringData);
    editor.commit();
}

public void loadNotes(View v){
    String = getSharedPreferences(stringFolder, 0);
    String dataReturned = String.getString("SharedData", "Could not load");
    dataResults.setText(dataReturned);
} 
```

现在我希望做的是每次用户单击保存时，它会将输入的文本添加到用户可以输入的名称下的数组中。当用户单击加载时，我希望弹出一个列表视图，显示以前保存的所有笔记名称，然后单击一个以加载它。我知道这是很多问题，但我想知道是否有人知道。或者可能有一种非常简单的方法可以做到这一点。我是 android 的初学者。

谢谢，里德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T13:45:49.653

似乎您想在保存时显示一个带有 EditText 的对话框，并在加载时显示一个带有 ListView 的对话框。可以在[此处](http://developer.android.com/guide/topics/ui/dialogs.html)找到有关创建对话框的基础知识。另请参阅[此问题](https://stackoverflow.com/questions/2874191/is-it-possible-to-create-listview-inside-dialog)。

# c# - 在具有外键的表中的实体框架中添加数据

> ID：11048884
> 
> 赞同：0
> 
> 时间：2012-06-15T10:24:08.753
> 
> 标签：c#, entity-framework

我正在努力在具有外键关系的表中插入数据。我确实阅读了
一些关于如何做到这一点的文章，但没有太大帮助，并决定提出一个新问题。

设想 ：

用户表在角色表 ID 上有一个外键。

在角色表上，ID 是整数并且是自动递增的

这是我的代码，

```
 SalesTrainerEntities db = new SalesTrainerEntities();

        var user = new User();
        var role = db.Role.FirstOrDefault(r => r.ID == 1);

        user.UserName = "test";
        user.Pass = "123";
        user.CreatedBy = "test";
        user.DtCreated = DateTime.Now;
        user.Role = role;

        //user.RoleId = 1;
        //user.EntityKey = new EntityKey("Role", "ID", 1);
        //user.RoleReference.EntityKey = new EntityKey("Role", "ID", 1);

        db.AddToUser(user);

        db.SaveChanges(); 
```

在保存更改时，我收到错误说明

```
Unable to update the EntitySet 'User' because it has a DefiningQuery and no    <InsertFunction> element exists in the <ModificationFunctionMapping> element to support the current operation. 
```

任何指针将不胜感激。

问候，

萨布

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T10:33:10.890

我曾经以这种方式添加子实体，我假设用户和角色之间的关系为 1:N。

```
using (Entities db = new Entities())
{              
    var user = new User();
    // fill user data..

    var newRole = db.Role.FirstOrDefault(r => r.ID == 1);
    if(newRole!=null)
    {
        user.roles.AddObject(newRole);
        db.users.AddObject(user);
        db.SaveChanges();
    }
}

//Edit - Updating db

using (Entities db = new Entities())
{ 
    var existingUser = db.User.FirstOrDefault(r => r.ID == 100);
    if(existingUser !=null)
    {
       existingUser.Name = "New name";
       db.SaveChanges();
    }
} 
```

# python - Grep 可靠地所有 C #defines

> ID：11048891
> 
> 赞同：0
> 
> 时间：2012-06-15T10:24:39.663
> 
> 标签：python, c, regex, macros

我需要分析一些 C 文件并打印出所有找到的#define。使用正则表达式并不难（例如）

```
def with_regexp(fname):
    print("{0}:".format(fname))
    for line in open(fname):
        match = macro_regexp.match(line)
        if match is not None:
            print(match.groups()) 
```

但是例如它不处理例如多行定义。

在 C 中有一种很好的方法，例如

```
gcc -E -dM file.c 
```

问题是它返回所有#defines，而不仅仅是给定文件中的那个，而且我没有找到任何仅使用给定文件的选项..

有什么提示吗？谢谢

编辑：这是过滤掉不需要的定义的第一个解决方案，只需检查定义的名称实际上是原始文件的一部分，不完美但似乎工作得很好..

```
def with_gcc(fname):
    cmd = "gcc -dM -E {0}".format(fname)
    proc = Popen(cmd, shell=True, stdout=PIPE)
    out, err = proc.communicate()
    source = open(fname).read()
    res = set()

    for define in out.splitlines():
        name = define.split(' ')[1]
        if re.search(name, source):
            res.add(define)

    return res 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T11:57:56.877

听起来像是壳单线的工作！

我想做的是`#include`从 C 文件中删除所有 s （这样我们就不会从其他文件中得到垃圾），将其传递给`gcc -E -dM`，然后删除所有内置的`#define`s - 那些以`_`, 显然`linux`和`unix`.

如果您有`#define`以下划线开头的 s，这将无法完全按照承诺工作。

它是这样的：

```
sed -e '/#include/d' foo.c | gcc -E -dM - | sed -e '/#define \(linux\|unix\|_\)/d' 
```

你也可以用几行 Python 来完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T10:31:04.440

在 PowerShell 中，您可以执行以下操作：

```
function Get-Defines {
  param([string] $Path)

  "$Path`:"
  switch -regex -file $Path {
    '\\$' {
      if ($multiline) { $_ }
    }
    '^\s*#define(.*)$' {
      $multiline = $_.EndsWith('\');
      $_
    }
    default {
      if ($multiline) { $_ }
      $multiline = $false
    }
  }
} 
```

使用以下示例文件

```
#define foo "bar"
blah
#define FOO \
  do { \
    do_stuff_here \
    do_more_stuff \
  } while (0)
blah
blah
    #define X 
```

它打印

```
\x.c:
#define foo "bar"
#define FOO \
  do { \
    do_stuff_here \
    do_more_stuff \
  } while (0)
        #define X 
```

不理想，至少惯用的 PowerShell 函数应该如何工作，但应该足以满足您的需求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T20:14:42.733

在纯 python 中执行此操作我会使用一个小型状态机：

```
def getdefines(fname):
    """ return a list of all define statements in the file """
    lines = open(fname).read().split("\n") #read in the file as a list of lines
    result = [] #the result list
    current = []#a temp list that holds all lines belonging to a define
    lineContinuation = False #was the last line break escaped with a '\'?

    for line in lines:
        #is the current line the start or continuation of a define statement?
        isdefine = line.startswith("#define") or lineContinuation
        if isdefine:
            current.append(line) #append to current result
            lineContinuation = line.endswith("\\") #is the line break escaped?
            if not lineContinuation:
                #we reached the define statements end - append it to result list
                result.append('\n'.join(current))
                current = [] #empty the temp list

    return result 
```

# c# - 我如何在 C# 中实现这一点

> ID：11048894
> 
> 赞同：0
> 
> 时间：2012-06-15T10:24:44.947
> 
> 标签：c#, controls, custom-controls

我正在开发一个windows窗体应用程序。在窗体中，左边是树形菜单，右边是显示区域。如何根据我在树形菜单上单击的内容更改显示区域。 [（来源：][[126.net](http://img3.ph.126.net/o_braOAtWPgCioFtVHiMmw==/1094937659422071823.jpg)][）][![我的应用](../Images/384c4cfae5374119cc1343630200572d.png)](https://i.stack.imgur.com/miSEe.jpg)

我使用`treenode`类来实现这样的treemenu：

```
System.Windows.Forms.TreeNode treeNode27 = new System.Windows.Forms.TreeNode("basic operation"); 
```

我尝试做的是使用几个面板。每个面板都绑定到一个菜单项。通过设置`visible`属性，我可以实现该目标。但这太不方便了。尤其是当我尝试设计每个面板时。有什么好的建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T10:38:31.813

您需要的是一个事件处理程序，将在用户单击树视图时调用（使用工具箱中的 TreeView）。您可以通过选择设计页面上的树视图并在属性下单击事件来做到这一点。然后根据您的需要选择 NodeMouseDoubleClick 或 NodeMouseClick。下面是一个捕获所选值的代码......享受......;）

```
 private void treeView1_NodeMouseDoubleClick(object sender, TreeNodeMouseClickEventArgs e)
    {
           if (treeView1.SelectedNode.Level == 2)
        {
          //text on the first level
            string text = treeView1.SelectedNode.Text;

        }
         else if (treeView1.SelectedNode.Level == 1)
        {
           //text on the second level 
            string text = treeView1.SelectedNode.Text;

        }

        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T10:38:40.833

您可以将每个“面板”设计为新的用户控件。这样，您就可以独立于主窗体自行设计所有“面板/区域”。

在主窗体上，为右侧区域创建一个面板，并将所有控件添加到该面板。

然后，当 TreeNode 选择事件发生时，您可以将所有用户控件设置为`.Visible = false;`除了您正在显示的用户控件并将其设置为`.Visible = true;`和`.Dock = DockStyle.Fill;`

# swing - 如何在 JFrame 上显示视频（捕获为 BufferedImage）？

> ID：11048899
> 
> 赞同：0
> 
> 时间：2012-06-15T10:25:02.773
> 
> 标签：swing, user-interface, webcam

我想从网络摄像头捕获和显示视频。为了捕获，我使用[了这个 JavaCV 代码](http://ganeshtiwaridotcomdotnp.blogspot.in/2011/12/javacv-capture-image-from-webcam.html)，它提供了可以转换为**BufferedImage的****IplImage**。如何在 JFrame 上显示此图像？

 **注意：我想显示视频而不是单个图像，即图像应该在从网络摄像头捕获时不断更新

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-12-23T18:10:03.573

使用 JavaCV lib 可以在 JPanel 中使用类 Graphics 绘制 BufferedImage 而无需使用 IplImages。

这是一个在 JFrame 内的 JPanel 中显示来自网络摄像头的图像的示例。

```
try {
        OpenCVFrameGrabber camera = new OpenCVFrameGrabber(0);
        OpenCVFrameConverter.ToMat converter = new OpenCVFrameConverter.ToMat();
        Java2DFrameConverter converterBuffered = new Java2DFrameConverter();

        Frame capturedFrame = null;
        Mat matImage = null;
        camera.start();
        while ((capturedFrame = camera.grab()) != null) {
            matImage = converter.convertToMat(capturedFrame);

            BufferedImage bufferedImage = converterBuffered.convert(capturedFrame);

            Graphics g = imageView.getGraphics(); //getting the Graphics Class of the JPanel named as imageView
            g.drawImage(bufferedImage, 10,10, bufferedImage.getWidth(), bufferedImage.getHeight(),imageView); //this imageView is a JPanel component

        }
        camera.stop();

    } catch (FrameGrabber.Exception ex) {
        System.out.println("Fail to capture frame");
        //this catch clause refer to errors on opening the camera or failure on capture of frame.
    } 
```**

# xcode - Mac OSX Flash/Flixel 开发 Xcode

> ID：11048902
> 
> 赞同：0
> 
> 时间：2012-06-15T10:25:17.783
> 
> 标签：xcode, flash, vmware, flixel

我想开始使用 Flixel 开发游戏，但我在 Mac 上。我已经安装了 Xcode，因为我还开发了 Iphone 应用程序，并且我看到了一篇关于为 Mac 开发设置模板的文章[https://github.com/AdamAtomic/flixel/wiki/xcode-basic-setup](https://github.com/AdamAtomic/flixel/wiki/xcode-basic-setup)我已经尝试过这样做但是它似乎不起作用（也许它已经过时了？）对我如何在 mac osx 上开发或者我应该只使用 VMWare 有什么想法。

我真的很想在 Mac OSX 上开发。

如果有人可以向我推荐一些软件（我真的需要它免费，因为我现金有点短缺=P），那就太棒了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T12:51:04.507

根据我的经验，我在 vmware 8.0 上使用 xcode，我刚刚下载了一个 ios 映像并在 vmware 上运行它（未安装它），然后下载 xcode 4 并在 mac 中安装它（xcode）。您可以免费进行所有这些设置：p 如果您很难找到图片，我会发布链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T12:44:57.640

Flixel 是一个 as3 库，因此最好使用 flash 开发环境。大多数 flixel 开发人员都使用此类工具，您将获得更好的支持和教程。最好的办法是使用 FlashDevelop，这是一个免费的 Windows as3 环境，但由于您更喜欢使用 Mac OSX，您可能想尝试使用 Flex/Flash Builder。

# ios - UIImageView setImage 不适用于 IBOutlet

> ID：11048909
> 
> 赞同：2
> 
> 时间：2012-06-15T10:25:42.993
> 
> 标签：ios, xcode, uiimageview, interface-builder, iboutlet

我想在运行时将图像设置为我的背景，所以我在 Interface Builder 中创建了一个`UIImageView`“backGroundImage” 。`IBOutlet`但是下面的代码：

```
 UIImage *image = [UIImage imageNamed:imageName];
    NSLog(@"image=nil %d",(image ==nil));
    NSLog(imageName);
    [self.backGroundImage setImage:image];
    NSLog(@"backgroundImage=nil %d",(self.backGroundImage.image ==nil)); 
```

给了我以下`NSLogs`

```
2012-06-15 12:09:43.967 iElster[1960:207] image=nil 0

2012-06-15 12:09:43.967 iElster[1960:207] bedroom-sketch-corel-eps-vector-art-1141.jpg

2012-06-15 12:09:43.968 iElster[1960:207] backgroundImage=nil 1 
```

所以基本上我可以加载我的图像，但我不能将它设置为`UIImageView`. 如果我包括以下行

```
backGroundImage = [[UIImageView alloc]init]; 
```

我不再为我的'nil' `backGroundImage.image`- 但在那种情况下，我显然不再使用`UIImageView`由 Outlet 创建的。我没有看到上面代码的问题，特别是因为我在类似的 Stack Overflow 线程中看到的所有建议都是完全相同的：“只需使用 setImage 方法”；任何想法可能是什么问题？

**PS：**只是为了澄清这一点 - 我尝试使用不同的图像，.png 和 .jpg 并且如果我将它们设置为我的子视图，它们都可以工作`ScrollView`，但在上面的代码中尝试使用它们时却不行。所以图像文件不应该造成任何问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T11:04:16.127

似乎您将此代码放置在一个方法中，该方法在加载视图和连接出口*之前*`init...`执行（例如， in ）。试着把它放在`viewDidLoad`. `viewDidLoad`在视图被加载之前（即在被访问之前），您不能访问您的视图出口。

另外，这一行：

```
[image release]; 
```

是内存管理错误（过度释放）。

# c# - OracleCommand SQL 参数绑定

> ID：11048910
> 
> 赞同：34
> 
> 时间：2012-06-15T10:25:50.217
> 
> 标签：c#, oracle, system.data.oracleclient

我对以下参数的绑定有疑问。连接有效，因为我在没有使用参数的情况下对其进行了测试。但是，执行之前的查询值仍然使用“@userName”而不是“jsmith”。

问题是什么？这不是绕过绑定的正确方法吗？

```
public static String GetFullName(String domainUser)
{
    DataTable dT;
    String fullName = "";

    OracleConnection db = DatabaseAdapter.GetConn();
    db.Open();

    OracleCommand oraCommand = new OracleCommand("SELECT fullname FROM user_profile WHERE domain_user_name = '@userName'", db);
    oraCommand.BindByName = true;
    oraCommand.Parameters.Add(new OracleParameter("@userName", domainUser));

    OracleDataReader oraReader = null;
    oraReader = oraCommand.ExecuteReader();

    if (oraReader.HasRows)
    {
        while (oraReader.Read())
        {
            fullName = oraReader.GetString(0);
        }
    }
    else
    {
        return "No Rows Found";
    }

    oraReader.Close();
    db.Close();
    db.Dispose();

    return fullName;
} 
```

编辑：我在参数字段名称中添加了@，但它仍然没有修复它。

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-06-15T10:28:49.660

*删除 @username 周围的单引号，*并且对于 oracle 使用`:`参数名称而不是`@`，例如：

```
OracleCommand oraCommand = new OracleCommand("SELECT fullname FROM sup_sys.user_profile
                           WHERE domain_user_name = :userName", db);
oraCommand.Parameters.Add(new OracleParameter("userName", domainUser)); 
```

来源：[使用参数](http://www.devart.com/dotconnect/oracle/articles/parameters.html)

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-11-09T12:30:27.727

Oracle 的参数语法与 Sql-Server 不同。所以使用`:`而不是`@`

```
using(var con=new OracleConnection(connectionString))
{
   con.open();
   var sql = "insert into users values (:id,:name,:surname,:username)";

   using(var cmd = new OracleCommand(sql,con)
   {
      OracleParameter[] parameters = new OracleParameter[] {
             new OracleParameter("id",1234),
             new OracleParameter("name","John"),
             new OracleParameter("surname","Doe"),
             new OracleParameter("username","johnd")
      };

      cmd.Parameters.AddRange(parameters);
      cmd.ExecuteNonQuery();
   }
} 
```

在 OracleCommand 中使用命名参数时，必须在参数名称前加上冒号 (:)。

[http://msdn.microsoft.com/en-us/library/system.data.oracleclient.oraclecommand.parameters.aspx](http://msdn.microsoft.com/en-us/library/system.data.oracleclient.oraclecommand.parameters.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T13:34:26.227

你需要使用这样的东西：

```
 OracleCommand oraCommand = new OracleCommand("SELECT fullname FROM sup_sys.user_profile
                       WHERE domain_user_name = :userName", db); 
```

更多可以在这篇 MSDN 文章中找到：http: [//msdn.microsoft.com/en-us/library/system.data.oracleclient.oraclecommand.parameters%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/system.data.oracleclient.oraclecommand.parameters%28v=vs.100%29.aspx)

建议您在 Oracle 中使用**:**字符而不是**@**。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-28T08:47:01.497

```
string strConn = "Data Source=ORCL134; User ID=user; Password=psd;";

System.Data.OracleClient.OracleConnection con = newSystem.Data.OracleClient.OracleConnection(strConn);
    con.Open();

    System.Data.OracleClient.OracleCommand Cmd = 
        new System.Data.OracleClient.OracleCommand(
            "SELECT * FROM TBLE_Name WHERE ColumnName_year= :year", con);

//for oracle..it is :object_name and for sql it s @object_name
    Cmd.Parameters.Add(new System.Data.OracleClient.OracleParameter("year", (txtFinYear.Text).ToString()));

    System.Data.OracleClient.OracleDataAdapter da = new System.Data.OracleClient.OracleDataAdapter(Cmd);
    DataSet myDS = new DataSet();
    da.Fill(myDS);
    try
    {
        lblBatch.Text = "Batch Number is : " + Convert.ToString(myDS.Tables[0].Rows[0][19]);
        lblBatch.ForeColor = System.Drawing.Color.Green;
        lblBatch.Visible = true;
    }
    catch 
    {
        lblBatch.Text = "No Data Found for the Year : " + txtFinYear.Text;
        lblBatch.ForeColor = System.Drawing.Color.Red;
        lblBatch.Visible = true;   
    }
    da.Dispose();
    con.Close(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-30T16:08:32.487

这是我使用`Oracle.DataAccess.Client`命名空间解决相同问题的方法。

```
using Oracle.DataAccess.Client;

string strConnection = ConfigurationManager.ConnectionStrings["oConnection"].ConnectionString;

dataConnection = new OracleConnectionStringBuilder(strConnection);

OracleConnection oConnection = new OracleConnection(dataConnection.ToString());

oConnection.Open();

OracleCommand tmpCommand = oConnection.CreateCommand();
tmpCommand.Parameters.Add("user", OracleDbType.Varchar2, txtUser.Text, ParameterDirection.Input);
tmpCommand.CommandText = "SELECT USER, PASS FROM TB_USERS WHERE USER = :1";

try
{
    OracleDataReader tmpReader = tmpCommand.ExecuteReader(CommandBehavior.SingleRow);

    if (tmpReader.HasRows)
    {
        // PT: IMPLEMENTE SEU CÓDIGO    
        // ES: IMPLEMENTAR EL CÓDIGO
        // EN: IMPLEMENT YOUR CODE
    }
}
catch(Exception e)
{
        // PT: IMPLEMENTE SEU CÓDIGO    
        // ES: IMPLEMENTAR EL CÓDIGO
        // EN: IMPLEMENT YOUR CODE
} 
```

# c++ - 我们可以从运行时给出的参数中检测出要即时调用的函数吗？

> ID：11048911
> 
> 赞同：0
> 
> 时间：2012-06-15T10:25:51.340
> 
> 标签：c++

假设我们有`N`函数覆盖，我们接收参数数组，将其解析为某些类型（比如第一次得到`int`, `string`, `string`；第二次得到`int`, `int`, `int`）；现在我们要`call(int, string, string)`第二次调用我们的第一组参数`call(int, int, int)`。我们可以检测到具有参数类型数组的动态调用哪个函数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T15:12:33.087

这是低技术的做法。我不知道参数类型数组的确切含义，但我们假设给您某种称为 的向量`args`，您可以确定一个元素是否为数字，并将该元素转换为数字或字符串。然后，您可以实现这样的循环：

```
std::string s[3];
int n[3];
unsigned mask = 0;
for (int i = 0; i < args.size(); ++i) {
    if (is_number(args[i])) {
        mask |= (1U << i);
        n[i] = get_number(args[i]);
    } else {
        s[i] = get_string(args[i]);
    }
} 
```

然后，打开面具：

```
switch (mask) {
case 0x01: call(n[0], s[1], s[2]); break;
case 0x07: call(n[0], n[1], n[2]); break;
default:
    std::cout << "unhandled combination: " << mask << std::endl;
    break;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T10:34:35.843

您不能在运行时在*C++中进行类型选择。*那是因为*C++*是[强类型](http://en.wikipedia.org/wiki/Strong_typing)语言之一。

你可以做一些类似于你在 Python 中建议的事情——变量很乐意在运行时改变它们的类型。

您可以使用继承类和派生类做一些接近但不完全相同的事情。如果你有一个超类，你可以有一个“工厂”函数，它返回一个指向超类的指针（包含一个 diff 对象，具体取决于某些输入）。现在，如果所有对象都实现了所需的功能，您可以在指针上调用一个函数。例如：

```
class Base{
    virtual void functionality();
};

class Squirrel : public Base{
    void functionality() {
        std::cout << "I love hazelnuts!" << std::endl;
    }
};

class Box : public Base{
    void functionality() {
        std::cout << "Stuff can be put in here!" << std::endl;
    }
};

Base *factoryMethod(std::string someInput){
     if (someInput == "1")
         return new Squirrel();
     else
         return new Box();
}

int main(void){
    std::cin >> input;
    Base *object = factoryMethod(input);
    object->functionality();
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T11:52:02.063

您可以简单地使用相关参数编写重载成员函数吗？

如果您收到未知数​​量的参数并希望根据它们调用正确的函数，那么您将需要做一些额外的工作。也许有一个枚举作为第一个参数，这意味着一个参数集，例如：

```
enum eParamList
{
    eParamList_START,
    IntIntInt,          // following data is 3 ints
    IntIntChar,         // following data is int, int, bool (only joking its a char)
    eParamList_ENDS
} 
```

还是这样的？

# iphone - 升级应用程序是否会重用已经存在的核心数据

> ID：11048912
> 
> 赞同：1
> 
> 时间：2012-06-15T10:25:53.430
> 
> 标签：iphone, objective-c, xcode, core-data

我已经完成了核心数据迁移以访问我在应用程序的先前版本中拥有的所有数据。有一个名为 coupon 的实体，并且该实体有多个属性。但在我的新版本中，我还有一个属性“用户名”对于同一个实体。现在在应用程序启动时，我必须获取我在旧版本中拥有的所有数据，并且必须使用用户名保存所有数据。如何更新我的数据？任何建议将不胜感激。在此版本我总是根据用户名获取数据。

```
`  NSFetchRequest *request = [[NSFetchRequest alloc] init];
    [request setEntity: [NSEntityDescription entityForName:@"Coupon" inManagedObjectContext: context]];

    NSPredicate *newPredicate= [NSPredicate predicateWithFormat:@"username = %@", username];
    [request setPredicate:newPredicate];

    NSArray *objects = [context  executeFetchRequest:request error:&error];
    NSLog(@"%@arry",objects);

    NSUInteger count = [context countForFetchRequest: request error: &error];
    [request release];

    if (count ==0) {
} 
```

` 目前，该应用程序在此处崩溃，因为它没有这样的属性。所以我必须在设置此谓词之前添加该属性。需要更多详细信息以获得更好的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T11:20:21.793

在`application:didFinishLaunchingWithOptions:`您可以检查迁移。如果是升级新数据模型后第一次启动，可以先修改所有记录，添加用户名属性。

```
//first fetch all Cupons
for (Coupon *c in fetchedObjects) {
   c.username = whatever;
}
[self.managedObjectContext save:nil]; 
```

# avr - 是否可以在 AVR 微控制器中永久保存一些数据？

> ID：11048916
> 
> 赞同：0
> 
> 时间：2012-06-15T10:26:03.930
> 
> 标签：avr, atmel

好吧，这个问题说明了一切。我想做的是，每次我给微控制器加电时，它应该从保存的数据中获取一些数据并使用它。它不应该使用任何外部闪存芯片。如果可能，请提供一些代码片段，以便我可以在 AVR Studio 4 中使用它们。例如，如果我保存 8 个 uint16_t 数据，它应该将这些数据加载到 uint16_t 数组中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T10:35:01.963

如果您不需要以编程方式更新数据，则必须将数据烧录到芯片的程序存储器中，或者如果您想要读写支持，则应使用内置的 EPROM。

Pgmem 示例：

```
#include <avr/pgmspace.h>

PROGMEM uint16_t data[] = { 0, 1, 2, 3 };

int main()
{
     uint16_t x = pgm_read_word_near(data + 1); // access 2nd element
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T21:17:38.153

您需要获取正在使用的部件的数据表。像这样的微控制器通常至少包含一个闪存，有时包含多个闪存组，以允许不同的引导加载程序，同时可以轻松擦除整个闪存而不影响另一个闪存。同样有些有eeprom。这都是内部的，而不是外部的。ESP，因为您说您需要以编程方式保存，这应该可以工作（请记住，闪存磨损是多么容易，除非您需要，否则不要保存）。eeprom 或闪存都将满足在您启动时将信息保存在其中的要求，非易失性。以及能够以编程方式保存它。谷歌搜索会找到一些关于如何做到这一点的示例，除了您显然没有阅读的数据表，以及也包含此信息的应用说明（您应该阅读过）。

数据的读取在数据表中的内存映射中，编写代码来读取这些地址。数据表中也描述了写作（程序员参考手册，用户指南，无论 atmel 怎么称呼它），网上也有很多例子。

# grib - 根据经纬度从grib文件中提取数据

> ID：11048920
> 
> 赞同：3
> 
> 时间：2012-06-15T10:26:25.320
> 
> 标签：grib

**如果我有一个 grib2 文件，其中包含整个世界的信息（对于某些参数），并且我想使用 wgrib2根据用户**（客户端软件到服务器）给出的纬度和经度从中提取数据。我尝试了以下命令，但我只获得了完整的 grib2 文件：

> wgrib2.exe input.grb -undefine out-box 10:90 -10:10 -grib output.grb

请告诉我我哪里出错了？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-05-26T23:54:49.827

这仍然是谷歌上的热门，所以即使它有点旧，这里有一个更详细的解释。

首先，你需要`wgrib2`来自[国家气象局气候预测中心](https://www.cpc.ncep.noaa.gov/products/wesley/wgrib2)。（它的安装很简单，但解释得不太清楚。请参阅[此页面](https://ftp.cpc.ncep.noaa.gov/wd51we/wgrib2/INSTALLING)或此[要点](https://gist.github.com/bruceh48/b5c67f6db6e4ee161ed6364a97c81d9f)以获取帮助。）

接下来，您需要使用[lola](https://www.cpc.ncep.noaa.gov/products/wesley/wgrib2/lola.html)函数（用于 LOnitude-LAtitude 网格）。

你需要给出`wgrib2`几个论点：

*   包含数据的 grib 文件
*   经度信息：
    *   边界框西南角的经度
    *   边界框的长度（以度为单位）
    *   该方向上的点间距
*   纬度信息，同上
    *   边界框西南角的纬度
    *   边界框的长度（以度为单位）
    *   该方向上的点间距
*   要写入的文件名
*   要写入的文件格式（`bin`对于二进制、`text`简单文本、`spread`电子表格格式或`grib`grib2）。

例如：

```
wgrib2 input.grb 220:100:1 20:50:1 output.grb2 grib 
```

将创建一个输出文件，在两个方向上以 1 度的间隔覆盖北美（220 E - 320 E；20 N - 70 N）。

抢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T08:05:23.760

我使用以下命令从 grib2 文件中提取信息。

> `wgrib2.exe input_file.grib2 -lola LonSW:#lon:dlon LatSW:#lat:dlat file format`

假设我们有以下选择坐标：

> > 顶部：(x0,y0) (x1,y0)
> > 
> > 底部：(x0,y1) (x1,y1)
> 
> "LongSW"=x0, #lon = (x0~x1), "LatSW"=y0, #lat = (y0~y1)。dlon 和 dlan 可以保持为 1。'file' 是输出文件名，格式可以是 grib、csv、text 等。

在上面显示的命令中替换上述值，您应该得到答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T14:27:42.657

如果您选择的经度是 360，纬度是 90：

wgrib2.exe input_file.grb2 -lon 360 90 > output_file.txt

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-20T13:35:00.883

我认为您也可以直接在 grib 上使用 cdo

```
cdo sellonlatbox,lon1,lon2,lat1,lat2 in.grb out.grb 
```

如果 grib 文件位于简化的高斯网格上，您可能需要指定您想要常规的 lat-lon 输出。我通常使用“-f nc”自己将输出格式转换为 netcdf，因为我发现在其他软件中处理起来更容易。

# extjs - Salesforce 中的 EXT JS 行扩展器

> ID：11048921
> 
> 赞同：0
> 
> 时间：2012-06-15T10:26:27.033
> 
> 标签：extjs, salesforce, row, visualforce, expander

伙计们，

我正在尝试在 Visual Force 页面中显示带有 Row Expander 插件的 EXT JS。

检查此链接[http://mikhailstadnik.com/ext/examples/nested-grid.htm](http://mikhailstadnik.com/ext/examples/nested-grid.htm)

根据链接，我成功地在第一个网格中显示帐户并在子网格中显示相应的联系人。

问题是：当我点击第一行时，它会展开并显示相应的联系人。当我单击第二行并且第一行未关闭时，我可以在第一行联系人中看到第二行（联系人）的数据。

所以，我认为当第二行被点击时，我需要关闭第一行。

请建议我如何做到这一点..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T10:36:24.937

您正在谈论的插件功能`collapseRow(row)`方法。
每次您尝试展开一行时（`beforeexpand`为此使用事件），您都需要遍历所有行并折叠展开的行。

以下是检查行是否已扩展的方法：

```
Ext.fly(row).hasClass(this.rowCollapsedClass) // this is referring to plugin instance 
```

# assembly - 这段代码有什么作用？德尔福汇编

> ID：11048928
> 
> 赞同：1
> 
> 时间：2012-06-15T10:26:46.987
> 
> 标签：assembly

我尝试解析加密的 &RQ 历史，但我真的无法理解 asm 代码。它嵌入到 Delphi 函数中。

有人可以帮助我理解这一点吗？

```
procedure decritt(var s:string; key:integer);
 asm
 mov ecx, key
 mov dl, cl
 shr ecx, 20
 mov dh, cl

 mov esi, s
 mov esi, [esi]
 or  esi, esi    // nil string
 jz  @OUT

// now esi points to the first character of the string

 mov ah, 10111000b

 mov ecx, length(s)
 or  ecx, ecx
 jz  @OUT
@IN:
 mov al, [esi]
 xor al, ah
 rol al, 3
 xor al, dh
 sub al, dl

 mov [esi], al
 inc esi
 ror ah, 3
 dec ecx
 jnz @IN
@OUT:
 end; // decritt 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T12:44:24.997

这个 c++ 代码是等价的：

```
void encrypt(std::string s, int key) {

    const char dl = key;
    const char dh = key >> 20;
    char ah = 0xB8;

    for (int i=0; i<s.length(); ++i) {
        char c = s[i];
        c ^= ah;
        c = (c<<3)|(c>>5); // rotate a char three bits left
        c ^= dh;
        c -= dl;
        s[i] = c;
        ah = (ah>>3)|(ah<<5);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T15:36:53.867

是的，我终于让它工作了。这是生成的python代码：

```
def decrypt(self, string, key):
    decrypted = []

    dl = key & 0xffff
    dh = key >> 20
    ah = 0xb8

    for i in xrange(0, len(string)):
        c = ord(string[i])
        c ^= ah & 0xff
        c = ((c<<3)|(c>>5)) & 0xff
        c ^= dh & 0xff
        c = (c - dl) & 0xff

        decrypted.append(chr(c & 0xff))
        ah = ((ah>>3)|(ah<<5)) & 0xff

    return "".join(decrypted) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T15:15:15.100

汇编函数采用加密字符串和解密密钥。对密钥使用一些固定的数学运算，解密字符串。我找到了一个 Delphi 例子，它做同样的事情，但更简单；

[http://www.delphifaq.com/faq/delphi/strings/f95.shtml](http://www.delphifaq.com/faq/delphi/strings/f95.shtml)

如果您想要的话，您可以将 ekini 的 Python 代码转换为 Delphi 以摆脱 Delphi 应用程序中的 asm 代码。

# iphone - 首先通过后在 iOS 中测试失败

> ID：11048934
> 
> 赞同：0
> 
> 时间：2012-06-15T10:27:03.633
> 
> 标签：iphone, objective-c, ios

我正在 iOS 应用程序中进行测试。我在 setUp 方法中有以下代码：

```
- (void)setUp
{
    [super setUp];
    rest=[[Restaurant alloc]init];
    array=[[NSMutableArray alloc]init];
    array=[rest getTheWebData];

} 
```

我实现了第一个成功的数组测试用例：

```
- (void)testDataArray_Should_Not_Nil
{
        STAssertNotNil(array,@"array is nil");

} 
```

不久之后，我对实现相同的数组进行了以下测试用例：

```
-(void)testResult_Should_Be_Valid_Category_For_Given_Node
{

    STAssertNotNil(array,@"array is nil");
} 
```

这个测试用例由于空数组而失败。为什么我在通过第一种情况后在第二种情况下得到空值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T11:07:49.837

您的数组指向由 getTheWebData 方法返回的对象，我认为该方法返回自动释放的数组，因此您的数组很可能在 setUp 方法结束后被释放。您首先执行的 alloc init 毫无意义，并且会泄漏，因为您随后在下一行中再次分配了数组。最好的方法是：

```
array=[[rest getTheWebData] retain]; 
```

我假设你没有使用 ARC

# php - PDO 错误：“无效的参数号：未定义参数”

> ID：11048935
> 
> 赞同：6
> 
> 时间：2012-06-15T10:27:06.067
> 
> 标签：php, mysql, pdo, prepared-statement, parameterized-query

我正在尝试使用带有数组形式参数的简单 MySQL 插入查询。它一直告诉我参数的数量是错误的。我尝试了以下方法，都产生了相同的错误：

```
$stmt3 = $link->prepare('INSERT INTO messages VALUES(null, :room, :name, :message, :time, :color)');
$stmt3->execute(array(':room' => $Clean['room'],':name' => $Clean['name'],':message' => $Clean['message'],':time' => $time,':color:' => $Clean['color'])); 
```

和

```
$stmt3 = $link->prepare('INSERT INTO messages VALUES(:null, :room, :name, :message, :time, :color)');
$stmt3->execute(array(':null' => null, ':room' => $Clean['room'],':name' => $Clean['name'],':message' => $Clean['message'],':time' => $time,':color:' => $Clean['color'])); 
```

以及专门声明列以避免空插入：

```
$stmt3 = $link->prepare('INSERT INTO messages (room, name, message, time, color) VALUES(:room, :name, :message, :time, :color)');
$stmt3->execute(array(':room' => $Clean['room'],':name' => $Clean['name'],':message' => $Clean['message'],':time' => $time,':color:' => $Clean['color'])); 
```

这是我第一次使用 PDO（我通常使用 mysqli，但我当前的共享主机没有 mysqlnd 插件，这使我无法使用 prepare()，所以从这个角度来看任何见解都是值得赞赏的。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-15T10:37:37.760

问题 - 你会踢自己 - 是与`:color`。

调用时为该标记传递的值的数组键`execute()`名为 named `:color:`。删除尾随`:`（我猜这只是一个错字）。

```
$stmt3->execute(array(
    ':room' => $Clean['room'],
    ':name' => $Clean['name'],
    ':message' => $Clean['message'],
    ':time' => $time,
    ':color' => $Clean['color'],
    )); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-15T10:31:33.807

我可能在这里错了，但据我所知，你需要这样做：

```
$stmt3->bindParam(':room', $Clean['room']);
$stmt3->bindParam(':name', $Clean['name']);
//and so on 
```

但作为个人喜好，我一直这样做

```
$stmt3 = $link->prepare('INSERT INTO messages VALUES(null, ?, ?, ?, ?, ?)');
$stmt3->execute(array($Clean['room'], $Clean['name'], $Clean['message'], $time, $Clean['color'])) 
```

# c# - 使用 sql 查询结果填充列表框的语法错误

> ID：11048936
> 
> 赞同：0
> 
> 时间：2012-06-15T10:27:06.363
> 
> 标签：c#, sql

我正在尝试使用以下代码填充列表框，但我收到一条错误消息，提示找不到 ListItem。除了在这里创建一个新的列表框之外，我还想在我的 Windows 窗体 gui 上填充一个名为 listbox1 的列表框，但它说如果我将第一行更改为，它在当前上下文中不存在`ListBox lb = listbox1();`

```
ListBox lb = new ListBox(); 
string connectionString = "your connection string here"; 
using (SqlConnection con = new SqlConnection(connectionString)) 
{ 
    con.Open(); 
    string query = "SELECT column FROM myitemstable"; 
    using (SqlCommand cmd = new SqlCommand(query, con)) 
    { 
        using (SqlDataReader reader = cmd.ExecuteReader()) 
        { 
            while (reader.Read()) { 
                lb.Items.Add(new ListItem((string)reader["column"])); 
            } 
        } 
    } 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T15:25:44.573

当您将控件拖放到 UI 时，Visual Studio 会为其生成代码。（检查您的 Designer.cs 文件）

listbox1 是设计者创建的对象，你可以直接往里面添加项目。

你不能在下面做

```
ListBox lb = listbox1(); 
```

因为 listbox1 是对象。

# html - HTML页面上的视频信号

> ID：11048938
> 
> 赞同：1
> 
> 时间：2012-06-15T10:27:21.543
> 
> 标签：html, flash, video, activex, webcam

我必须在 HTML 页面中显示视频源（网络摄像头或视频采集器）。我不需要流式传输或捕获信号，但我只需要在 HTML 页面上覆盖视频，因为 PC 必须显示与接收信号相同的信号。

我尝试了以下方法，但所有这些都太生涩或带有一种“交错”视图：

*   HTML5 和 Chrome 金丝雀
*   Adobe Flash 与 Camera.getCamera
*   VideoCapX（ActiveX 记录器）
*   Java 小程序

我认为为了获得平滑度，我必须找到一个处理“叠加”方法的元素。请记住，我可以在这台 PC 上安装我想要的东西，因为我不必传输信号。

非常感谢您提前。

# dom - 具有动态 ID 的 VBA getElementById

> ID：11048940
> 
> 赞同：2
> 
> 时间：2012-06-15T10:27:25.567
> 
> 标签：dom, vba, getelementbyid

我一直在搜索整个论坛、msdn 和专业教程，但找不到 VBA 的答案：如何`getElementById`在要查找的 id 是动态的访问 VBA 模块中进行工作？

让我们看一下html代码：

```
<DIV id=rowToolTipContainer>
<DIV class=contactsCard id=resultsTooltip1122286Contents style="DISPLAY: none">
<TABLE class="shadow-box tooltip">
<TBODY> 
```

以及我如何尝试找到它：

```
Dim ResultDIV As HTMLDivElement   
Set ResultDIV = HTMLDoc.getElementById("resultsTooltip*") 
```

让我说根据每个结果返回的 html 具有不同的 id（数字会发生变化），因此每个 DIV 的 id 始终是：

`id=resultsTooltipxxxxxxxContents`哪里`xxxxxxx`总是不同的数字

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T14:07:52.063

试试这样的：

```
Dim ContainerDiv As HTMLDivElement, ResultDIV As HTMLDivElement

Set ContainerDiv = HTMLDoc.getElementById("rowToolTipContainer")
For Each ResultDIV In ContainerDiv.GetElementsByTagName("div")
    If ResultDIV.ID Like "resultsTooltip*Contents" Then

        '' What do you want to do here?

        Exit For
    End If
Next 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T10:32:17.990

1.  确定始终包含 ID 的最接近的父标记（手动，通过查看您的 HTML）。
2.  `<div>`枚举该标签的所有后代，`ID`用 测试它们的属性`Like`。

# php - Ruby on Rails 与 PHP

> ID：11048942
> 
> 赞同：-7
> 
> 时间：2012-06-15T10:27:50.577
> 
> 标签：php, ruby-on-rails

我将根据您的经验向您提出意见，哪个更好用于开发！

我读过 Ruby on Rails 是一种非常强大的语言。现在，根据我的需求，Web 开发和 iOS 应用程序开发我应该更关注哪里？

基于 php 或 Ruby on Rais 构建 iOS 应用更容易吗？

谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T10:33:11.920

首先，ruby on rails 不是一种语言，它的框架是用它编写`ruby language`和运行的`rails server`

`php`是一种语言而不是框架，

你可以使用其中的任何一个，但如果`ruby on rails`它组织良好，`frameowrk`所有的安全措施都已经被漂亮地破坏了，你会在里面写得更少。

您也可以使用 php，因为它也是一种非常强大的语言，尤其适用于 Web 开发

# java - java - 如何在java中的两个日期之间获取除周末或周六或周日之外的每一天？

> ID：11048943
> 
> 赞同：3
> 
> 时间：2012-06-15T10:27:52.930
> 
> 标签：java, datetime, date

大家好，如果java中提供了开始日期和结束日期，如何生成日期？

像下面这样：

例如：如果`start date is 15-04-2012`有`end date is 15-06-2012`这个，我希望日期如下所示，并且列表应该省略`saturday`和`sunday`

`1.15-04-2012,` `2.16-04-2012,` `3.17-04-2012,` `.` `.` `.` `.` `.` `.` `15-06-2012`

我已经完成了以下操作，但如果日期范围是同一个月，它将生成一个月。`

```
public static ConcurrentHashMap<String, String> getWorkingDaysMap(int year, int month, int day){
        int totalworkingdays=0,noofdays=0;
        String nameofday = "";
        ConcurrentHashMap<String,String> workingDaysMap = new ConcurrentHashMap<String,String>();
        Map<String,String> holyDayMap = new LinkedHashMap<String,String>();
        noofdays = findNoOfDays(year,month,day);

        for (int i = 1; i <= noofdays; i++) {
            Date date = (new GregorianCalendar(year,month - 1, i)).getTime(); // year,month,day
            SimpleDateFormat f = new SimpleDateFormat("EEEE");
            nameofday = f.format(date);

            String daystr="";
            String monthstr="";

            if(i<10)daystr="0";
            if(month<10)monthstr="0";

            String formatedDate = daystr+i+"/"+monthstr+month+"/"+year;

            if(!(nameofday.equals("Saturday") || nameofday.equals("Sunday"))){
                workingDaysMap.put(formatedDate,formatedDate);
                totalworkingdays++;
            }
        }

        return workingDaysMap;
    } 
```

所以请给我建议如何去做。

问候托尼

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T10:29:41.593

```
int noOfDaysBetween = 5;
Calendar cal  = Calendar.getInstance();
cal.setTime(startDate);

for(int index = 0 ; index < noOfDaysBetween; index++){
    int dayOfWeek = cal.get(Calendar.DAY_OF_WEEK);
    if( dayOfWeek!=Calendar.SUNDAY && dayOfWeek!=Calendar.SATURDAY) {
        System.out.println(cal.getTime());
    }
    cal.add(Calendar.DATE, 1);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T11:04:37.193

```
public static void main(String[] args) {

    Calendar calendar = Calendar.getInstance();

    //15-04-2012
    calendar.set(Calendar.DAY_OF_MONTH, 15);
    calendar.set(Calendar.YEAR, 2012);
    calendar.set(Calendar.HOUR, 0);
    calendar.set(Calendar.MINUTE, 0);
    calendar.set(Calendar.SECOND, 0);
    calendar.set(Calendar.MONTH, 3);
    Date start = calendar.getTime();

    //15-06-2012
    calendar.set(Calendar.MONTH, 5);
    Date end = calendar.getTime();

    calendar.setTime(start);
    Date d = null;
    while((d = calendar.getTime()).before(end) || d.equals(end)) {
        int day = calendar.get(Calendar.DAY_OF_WEEK);
        if (day != Calendar.SATURDAY && day != Calendar.SUNDAY) {
            System.out.println(d);
        }
        calendar.add(Calendar.DAY_OF_MONTH, 1);
    } 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-06-23T22:28:53.777

我更喜欢使用 LocalDate。

```
import java.time.DayOfWeek;
import java.time.LocalDate;

public class Game {
    public static void main(String[] args) {
       LocalDate start = LocalDate.of(2018, 6, 1);
       LocalDate end = LocalDate.of(2018, 8, 1);

       LocalDate d = start;
       while(d.compareTo(end) <= 0) {
         if (d.getDayOfWeek() != DayOfWeek.SATURDAY && d.getDayOfWeek() != DayOfWeek.SUNDAY) {
            System.out.println(d);
         }
         d = d.plusDays(1);
      }
   }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T11:10:42.940

使用以下[joda-time](http://joda-time.sourceforge.net/)

```
import org.joda.time.DateTimeConstants;
import org.joda.time.LocalDate;

public class DatesexcludingWeekend {
    public static void main(String[] args) {
        final LocalDate start = new LocalDate(2012, 06, 15);
        final LocalDate end = new LocalDate(2012, 07, 14);
        LocalDate weekday = start;
        if (start.getDayOfWeek() == DateTimeConstants.SATURDAY|| start.getDayOfWeek() == DateTimeConstants.SUNDAY) {
            weekday = weekday.plusWeeks(1).withDayOfWeek(DateTimeConstants.MONDAY);
        }

        while (weekday.isBefore(end)) {
            System.out.println(weekday);
            if (weekday.getDayOfWeek() == DateTimeConstants.FRIDAY)
                weekday = weekday.plusDays(3);
            else
                weekday = weekday.plusDays(1);
        }
    } 
```

# c++ - std::this_thread::yield() 与 std::this_thread::sleep_for()

> ID：11048946
> 
> 赞同：58
> 
> 时间：2012-06-15T10:28:07.343
> 
> 标签：c++, multithreading, c++11

`std::this_thread::yield()`C++11和C++ 有什么区别`std::this_thread::sleep_for()`？如何决定何时使用哪一个？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-06-15T10:47:02.223

`std::this_thread::yield`告诉实现重新安排线程的执行，这应该在您处于忙碌等待状态的情况下使用，例如在线程池中：

```
...
while(true) {
  if(pool.try_get_work()) {
    // do work
  }
  else {
    std::this_thread::yield(); // other threads can push work to the queue now
  }
} 
```

`std::this_thread::sleep_for`如果您真的想等待特定的时间，可以使用。这可以用于时间非常重要的任务，例如：如果你真的只想等待 2 秒。（请注意，实现可能会等待比给定持续时间更长的时间）

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-06-15T10:49:27.797

> std::this_thread::sleep_for()

将使您的线程在给定时间内休眠（线程在给定时间内停止）。（[http://en.cppreference.com/w/cpp/thread/sleep_for](http://en.cppreference.com/w/cpp/thread/sleep_for)）

> std::this_thread::yield()

将停止当前线程的执行并优先考虑其他进程/线程（如果有其他进程/线程在队列中等待）。线程的执行不会停止。（它只是释放 CPU）。（[http://en.cppreference.com/w/cpp/thread/yield](http://en.cppreference.com/w/cpp/thread/yield)）

# eclipse - 无法打开 Eclipse Ganymede IDE

> ID：11048951
> 
> 赞同：0
> 
> 时间：2012-06-15T10:28:26.893
> 
> 标签：eclipse

![在此处输入图像描述](../Images/63b3bd21b7c7f98909405f0fb56d638c.png)嗨，我无法打开 Eclipse Ganymede IDE .. 它正在显示此帖子所附的消息..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T11:02:44.787

根据我的经验，这通常意味着您的 eclipse.ini 文件中有问题。

尝试改变这一切

> ... Eclipse\plugins/org.eclipse.equinox ...

进入这个

> ... Eclipse\plugins\org.eclipse.equinox ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T11:35:07.380

我已经通过编辑位于“../eclipse/ecrilpse/eclipse.ini.

更改需要小心进行..

> --launcher.XXMaxPermSize 256m -vmargs -Xms* *1024* *m -Xmx* *1024* *m

我已将两个 1024 值更改为允许的最大值 ie256m，如下所示。

> --launcher.XXMaxPermSize 256m -vmargs -Xms* *256* *m -Xmx* *256* *m

# vim - Vundle 不适用于 Mac OS X lion

> ID：11048952
> 
> 赞同：2
> 
> 时间：2012-06-15T10:28:27.377
> 
> 标签：vim, plugins, osx-lion

所以我拔头发...

我尝试在 Mac OS X Lion(10.7.4) 上安装[vundle](https://github.com/gmarik/vundle)，但没有任何运气。

首先，我在内置 vim 上尝试了它，它给了我以下错误：

> 处理 /Users/username/.vimrc:line 5 时检测到错误：
> 
> E117：未知功能：vundle#rc

我在源代码（vim 7.3）新安装的 vim 上尝试了 vundle 没有工作。然后我在 MacVim 上试了一下，也没有用。他们都提示相同的错误。

Vundle 曾经在我的 Fedora 机器上运行良好。

我错过了什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T02:47:01.273

你在打电话吗：

`:filetype off`

直接在之前：

`:set rtp+=~/.vim/bundle/vundle`

（注意 /vundle 后缺少尾随空格）？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-09T01:07:53.417

我想这对你很有帮助。

[http://c7.se/switching-to-vundle/](http://c7.se/switching-to-vundle/)

# java - javafx 2.1 组合框

> ID：11048953
> 
> 赞同：0
> 
> 时间：2012-06-15T10:28:28.717
> 
> 标签：java

我使用此代码从数据库中获取值，但只能获取一条记录，但我想将所有记录放入组合框中。

我的代码是：

```
try {
    stm = db.con.createStatement();

    rs = stm.executeQuery("select code from accounts");

    while (rs.next()) {
        for (int i = 1; i <= 5; i++) {
            ol = rs.getObject(i);
        }

    }
} catch (SQLException sqlException) {
}

ObservableList<Object> options = FXCollections.observableArrayList(ol);

final ComboBox code = new ComboBox();

code.getItems().addAll(options); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T17:13:42.390

问题似乎是您的变量 ol 仅包含您从 ResultsSet 中提取的最后一个对象。看来您打算做的事情如下：

```
ArrayList<Object> ol = new ArrayList<Object>();
while (rs.next()) { 
    for (int i = 1; i <= 5; i++) { 
        ol.add(rs.getObject(i)); 
    } 

} 
```

我不确定这是否完全符合您的要求，但希望这能说明为什么您的组合框中只有一个对象。

# mysql - 从具有某些条件的两个相同表中获取记录

> ID：11048954
> 
> 赞同：1
> 
> 时间：2012-06-15T10:28:31.277
> 
> 标签：mysql, select, stored-procedures, if-statement

我有 2 个表 Test1 和 Test1Update 具有以下结构

```
Test1
id  name address

Test1Update 
id name address 
```

这里 Test1 是旧表，而 Test1Update 只是 Test1 表的副本我想在这种情况下获取记录，

```
if(Test1.id=Test1Update.id){

select macthing values from Test1Update tables,and remaining unmatched values from Test1 table
}
else if(Test1.id!=Test1Update.id)
{
select * from Test1 only
} 
```

举个例子

Test1 有类似的数据

```
Test1
id  name   address
1   john    Ca
2   mary    La

and Test1Update has data like

id  name  address
1   john  Las Vega 
```

s

现在我只想从 Test1Update 表中获取匹配的记录，并从表中获取所有不匹配的记录

```
Test1 table so final output will be

 id  name  address
 1   john  Las Vegas
 2   mary    La 
```

> 这意味着只要找到与 Test1Update 的任何匹配项，就应该替换旧条目。

如何使用选择查询或通过过程来做到这一点？

告诉我一些方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T13:22:10.373

**假设 Test1Update 中的所有 id 都存在于 Test1**中，这可以简单地完成：

```
SELECT
  TEST1.ID,
  COALESCE(TEST1UPDATE.NAME, TEST1.NAME) as NAME,
  COALESCE(TEST1UPDATE.ADDRESS, TEST1.ADDRESS) as ADDRESS
FROM TEST1
LEFT JOIN TEST1UPDATE ON TEST1.ID = TEST1UPDATE.ID 
```

在这里看到它的工作：[http ://sqlfiddle.com/#!3/4a1f2/3/0](http://sqlfiddle.com/#!3/4a1f2/3/0)

使用 LEFT JOIN，如果 TEST1UPDATE 中没有匹配的条目，则 TEST1UPDATE.NAME 和 TEST1UPDATE.ADDRESS 为空。 [COALESCE](http://dev.mysql.com/doc/refman/5.5/en/comparison-operators.html#function_coalesce)为您提供了第一个非空参数，因此您从 TEST1UPDATE 中获得了值（如果存在），否则从 TEST1 中获得。

编辑 UNION 解决方案：

如果有很多字段，COALESCE 解决方案可能有点冗长，您想使用 UNION：

```
SELECT *
FROM TEST1UPDATE
INNER JOIN TEST1 ON TEST1.ID = TEST1UPDATE.ID

UNION

SELECT *
FROM TEST1
LEFT JOIN TEST1UPDATE ON TEST1.ID = TEST1UPDATE.ID
WHERE TEST1UPDATE.ID IS NULL; 
```

# facebook-insights - fql 查询不适用于洞察力

> ID：11048956
> 
> 赞同：0
> 
> 时间：2012-06-15T10:28:34.863
> 
> 标签：facebook-insights

我尝试了以下查询来获取我的 facebook 粉丝页面洞察数据

从见解中选择指标、值 WHERE object_id=2439131959 AND metric='application_active_users' AND end_time=end_time_date('2011-06-26') AND period=period('month')

也

从见解中选择指标、值 WHERE object_id=111605505520003 AND metric='page_fan_adds' AND end_time=1334905200 AND period=86400

但两者都不起作用。任何帮助将不胜感激 。提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T12:42:49.623

确保您的访问令牌具有`read_insights`权限。否则查询见解不会返回任何数据。

# solr - EdgeNgramFilterFactory 不工作

> ID：11048957
> 
> 赞同：0
> 
> 时间：2012-06-15T10:28:37.080
> 
> 标签：solr

我正在使用这个标签，因此当我输入“appledell”（不带引号）作为搜索关键字时，它应该为 Apple 和 Dell 提供结果。

```
<fieldType name="text_en" class="solr.TextField" positionIncrementGap="100">
            <analyzer>
                <tokenizer class="solr.StandardTokenizerFactory" />
                <filter class="solr.StandardFilterFactory" />
                <filter class="solr.LowerCaseFilterFactory" />
                <filter class="de.hybris.platform.solrfacetsearch.ysolr.synonyms.HybrisSynonymFilterFactory" ignoreCase="true" synonyms="en" coreName="${solr.core.name}"/>
                <filter class="solr.WordDelimiterFilterFactory"
                    generateWordParts="1" generateNumberParts="1" catenateWords="1"
                    catenateNumbers="1" catenateAll="0" splitOnCaseChange="0" />
                <filter class="de.hybris.platform.solrfacetsearch.ysolr.stopwords.HybrisStopWordsFilterFactory" ignoreCase="true" lang="en" coreName="${solr.core.name}"/>
                <filter class="solr.StopFilterFactory" words="stopwords_en.txt" ignoreCase="true" />
                <filter class="solr.ASCIIFoldingFilterFactory" />
                <!-- <filter class="solr.SnowballPorterFilterFactory" language="English" /> -->
                <filter class="EdgeNGramFilterFactory" minGramSize="2" maxGramSize="15" side="front" />
                <filter class="EdgeNGramFilterFactory" minGramSize="2" maxGramSize="15" side="back" />
            </analyzer>
</fieldType> 
```

当我使用 Apple n Dell 单独搜索时，它工作正常。但它给出了没有找到appledell的结果。任何指针将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T12:25:13.250

这不是人们使用 NGram 的常用方式。通常，当您查找“apple”或“dell”时，您希望找到“appledell”，而不是相反（如果我理解正确，这就是您想要的）。

在这种情况下，您只需将 EdgeNGramFilterFactory 应用于查询分析器（通常的方法是仅应用于索引分析器）。但是你会有其他副作用，因为 'appledell' 将被分解为许多令牌，如 'ap' 'app' 所以 'application' 也将是一个匹配项。

# c# - 使用 sqldatareader 在 c# 中的 Datagrid 中显示图片框中的图像

> ID：11048959
> 
> 赞同：0
> 
> 时间：2012-06-15T10:28:41.747
> 
> 标签：c#

我在 Datagrid 的图片框中显示图像时遇到问题。我使用了 sqlconnection 并使用 sqldatareader 获取数据。我将图片以systembyte格式保存在sql server中，但是当我单击datagrid中的行时无法显示图片

请帮助我

将读取器中的值加载到 DATAGRID

```
 oCon.Open();
 SqlCommand get_company_histroy = new SqlCommand("sp_select_company_history", oCon);
 get_company_histroy.CommandType = CommandType.StoredProcedure;
 get_company_histroy.Parameters.Add("@Company_Code ",txtdetailcompcode.Text);

 oDr = get_company_histroy.ExecuteReader();

 ArrayList sequence = new ArrayList();
 while (oDr.Read())
 {
     Get_Histroy His = new Get_Histroy();
     His.Photo = oDr[6].ToString();
     sequence.Add(His);

     //txtcompdetailhisfounder.Text = Convert.ToString(oDr["History_Founder"]);
     //DTP_comp_details_his_since.Text=Convert.ToString (oDr["History_Since"]);
 }
 DG_Mas_Com_History.DataSource = sequence; 
```

从读者那里获取价值的课程

```
public class Get_Histroy
{
    public  string Photo
    {
        get { return History_Photo; }
        set { History_Photo=value; }
    }
} 
```

数据网格点击事件

```
private void DG_Mas_Com_History_CellClick(object sender, DataGridViewCellEventArgs e)
{
    try
    {
        if (e.RowIndex >= 0)
            get_company_histroy.Parameters.Add("@Company_Code ", txtdetailcompcode.Text);
        oDr = get_company_histroy.ExecuteReader();

        byte[] picarr = (byte[])DG_Mas_Com_History.Rows[e.RowIndex].Cells[4].Value;
        ms = new MemoryStream(picarr);
        ms.Seek(0, SeekOrigin.Begin);
        PBcompdetailhisphoto.Image = System.Drawing.Image.FromStream(ms);
    } 
```

我收到错误：

> 无法将“System.String”类型的对象转换为“System.Byte[]”类型。）

从线

```
byte[] picarr = (byte[])DG_Mas_Com_History.Rows[e.RowIndex].Cells[4].Value; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T11:59:18.197

这条线是有问题的：

```
His.Photo = oDr[6].ToString(); 
```

您需要以字节为单位从数据库中获取图像，请参阅此处[使用 SqlDataReader 获取二进制数据](https://stackoverflow.com/questions/5371222/getting-binary-data-using-sqldatareader)

# image - 带有图像的 Wordpress get_posts

> ID：11048972
> 
> 赞同：3
> 
> 时间：2012-06-15T10:29:14.837
> 
> 标签：image, wordpress

那么，我想根据图像显示标题和摘录？我怎样才能做到这一点？

```
<div id="treia_box" style="height:350px; width:350px;"> 
    <?php
    add_filter('excerpt_length', 'new_excerpt_length');
    global $post;
    $args = array( 'numberposts' => 3, 'category' => 29 );
    $myposts = get_posts( $args );
    foreach( $myposts as $post ) :  setup_postdata($post); ?>
    <h2><a href="<?php the_permalink(); ?>"<?php the_title('<h7>', '<h7>'); ?></a></h2>
    <?php $size = array(75,75);
echo get_the_post_thumbnail($post_id, $size)?>
    <h6><?php the_excerpt(); ?></h6> 
    <?php endforeach; ?>    
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T12:43:35.420

`get_the_post_thumbnail($post_id, $size)`是正确的，但是：

1 - 您需要指定 $size ，例如：“large”、“thumbnail”、“my_custom_size”

```
get_the_post_thumbnail($id, 'thumbnail');     // Thumbnail
get_the_post_thumbnail($id, 'medium');        // Medium resolution
get_the_post_thumbnail($id, 'large');         // Large resolution

get_the_post_thumbnail($id, array(100,100) ); // Other resolutions 
```

2 - 仅当用户（您）定义帖子缩略图时才有效（特色 - 创建帖子时的图像）

# java - 使用正则表达式用空格替换新行/返回

> ID：11048973
> 
> 赞同：42
> 
> 时间：2012-06-15T10:29:15.177
> 
> 标签：java, regex

对于知道的人来说，这是一个非常基本的问题。

而不是从

```
"This is my text. 

And here is a new line" 
```

至：

```
"This is my text. And here is a new line" 
```

我得到：

```
"This is my text.And here is a new line. 
```

知道为什么吗？

```
L.replaceAll("[\\\t|\\\n|\\\r]","\\\s"); 
```

我想我找到了罪魁祸首。

在下一行，我执行以下操作：

```
L.replaceAll( "[^a-zA-Z0-9|^!|^?|^.|^\\s]", ""); 
```

这似乎导致了我的问题。

知道为什么吗？

我显然正在尝试执行以下操作：删除所有非字符，并删除所有新行。

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-06-15T10:38:02.113

`\s`是正则表达式中空白字符的快捷方式。它在字符串中没有任何意义。==> 您不能在替换字符串中使用它。您需要在此处准确放置要插入的字符。如果这是一个空间，只需`" "`用作替换。

另一件事是：为什么使用 3 个反斜杠作为转义序列？在 Java 中两个就足够了。而且您不需要`|`字符类中的（交替运算符）。

```
L.replaceAll("[\\t\\n\\r]+"," "); 
```

**评论**

`L`没有改变。如果你想得到你需要做的结果

```
String result =     L.replaceAll("[\\t\\n\\r]+"," "); 
```

测试代码：

```
String in = "This is my text.\n\nAnd here is a new line";
System.out.println(in);

String out = in.replaceAll("[\\t\\n\\r]+"," ");
System.out.println(out); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-15T10:42:41.947

尝试

```
L.replaceAll("(\\t|\\r?\\n)+", " "); 
```

根据系统，换行是`\r\n`或者只是`\n`。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2019-01-01T16:01:11.367

对于不同的操作系统，新的行分隔符是不同的 - '\r\n' 用于 Windows 和 '\n' 用于 Linux。

为了安全起见，您可以使用正则表达式模式**\R - Java 8 引入的换行符匹配器**：

```
String inlinedText = text.replaceAll("\\R", " "); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-15T10:40:04.370

你的正则表达式很好，我会用空字符串替换它

```
String resultString = subjectString.replaceAll("[\t\n\r]", ""); 
```

您希望“文本”之间有一个空格。和“和”对吗​​？

当我通过复制您的样本尝试正则表达式时，我得到了那个空间

```
"This is my text. " 
```

所以这里一切都很好。也许如果你只是用空字符串替换它就可以了。我不知道你为什么用\s替换它。和交替| 在字符类中不是必需的。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-06-15T10:43:26.890

我找到[了这个](https://stackoverflow.com/questions/2163045/how-to-remove-line-breaks-from-a-file-in-java)。

```
String newString = string.replaceAll("\n", " "); 
```

虽然，因为你有一条双线，你会得到一个双倍的空间。我想你可以再做一次 replace all 用一个空格替换双空格。

如果这不起作用，请尝试这样做：

```
string.replaceAll(System.getProperty("line.separator"), " "); 
```

如果我使用“\n”在“字符串”中创建行，我必须在正则表达式中使用“\n”。如果我使用 System.getProperty() 我必须使用它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-11-27T06:20:43.020

您可以使用第一个拆分并使用空白重新加入它。它肯定会起作用。

```
String[] Larray = L.split("[\\n]+");
L = "";
for(int i = 0; i<Larray.lengh; i++){
   L = L+" "+Larray[i];  
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-08-20T05:37:00.160

这应该处理空格、制表符和换行符：

```
data = data.replaceAll("[ \t\n\r]*", " "); 
```

# eclipse - 有没有办法让 eclipse 不打开/显示自动生成的代码

> ID：11048974
> 
> 赞同：0
> 
> 时间：2012-06-15T10:29:20.470
> 
> 标签：eclipse

有没有办法让 eclipse 在生成时不打开/显示自动生成的代码。

示例：如果我使用 ctrl+1 创建一个新方法/类/变量，那么我根本不想改变焦点。而且我不希望eclipse打开新创建的类。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T16:43:38.467

不，这在今天是不可配置的。

# node.js - Node.js redis“未知命令'hset'”？

> ID：11048976
> 
> 赞同：0
> 
> 时间：2012-06-15T10:29:27.453
> 
> 标签：node.js, redis, v8, node-redis

我是redis的新手，我正在尝试各种例子。但是，它似乎不起作用：

```
root@localhost:~# node lol.js
Reply: OK
Error: Error: Error: ERR unknown command 'hset'
Error: Error: Error: ERR unknown command 'hset'

/root/node_modules/redis/index.js:468
                throw callback_err;
                      ^
TypeError: Cannot read property 'length' of undefined
    at Command.callback (/root/lol.js:15:28)
    at RedisClient.return_error (/root/node_modules/redis/index.js:464:25)
    at HiredisReplyParser.<anonymous> (/root/node_modules/redis/index.js:253:14)
    at HiredisReplyParser.emit (events.js:67:17)
    at HiredisReplyParser.execute (/root/node_modules/redis/lib/parser/hiredis.js:41:18)
    at RedisClient.on_data (/root/node_modules/redis/index.js:440:27)
    at Socket.<anonymous> (/root/node_modules/redis/index.js:70:14)
    at Socket.emit (events.js:67:17)
    at TCP.onread (net.js:367:14) 
```

我正在为 node-redis 使用 github 页面上的示例脚本之一。我在 Debian Squeeze 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T10:33:28.817

主要问题不在于您的代码（当然它可以识别服务器发送的错误）或节点 redis 模块，而是 Redis 服务器。

您需要将其升级到较新的版本，[`HSET`](http://redis.io/commands/hset)从 2.0.0 版本开始支持命令。

# html - MVC3 - Razor：如何在 ActionLink 名称中使用 html 标记

> ID：11048977
> 
> 赞同：1
> 
> 时间：2012-06-15T10:29:28.033
> 
> 标签：html, asp.net-mvc-3, razor

我的 MVC3 剃须刀视图上有一个操作链接。其中有一个操作链接如下：

```
@Html.ActionLink("Click Here (I do not have Middle Name)", 
                 "", "", new { @class = "button lines-6" }) 
```

我想将操作链接文本更改为：

`<strong>Click Here </strong> (I do not have Middle Name)`

有什么办法可以解决。

非常感谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T10:34:02.103

使用`URL.Action`而不是操作链接，您可以更好地控制内容。

```
<a href="@Url.Action("Index", "Home")" class="button lines-6">
    <strong>Click Here </strong> (I do not have Middle Name)
</a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T11:04:50.730

自定义 HtmlHelper 扩展是另一种选择。

```
public static string ActionLinkSpan( this HtmlHelper helper, string linkText, string actionName, string controllerName, object htmlAttributes )
{
    TagBuilder spanBuilder = new TagBuilder( "span" );
    spanBuilder.InnerHtml = linkText;

    return BuildNestedAnchor( spanBuilder.ToString(), string.Format( "/{0}/{1}", controllerName, actionName ), htmlAttributes );
}

private static string BuildNestedAnchor( string innerHtml, string url, object htmlAttributes )
{
    TagBuilder anchorBuilder = new TagBuilder( "a" );
    anchorBuilder.Attributes.Add( "href", url );
    anchorBuilder.MergeAttributes( new ParameterDictionary( htmlAttributes ) );
    anchorBuilder.InnerHtml = innerHtml;

    return anchorBuilder.ToString();
} 
```

您也可以尝试上述建议选项的不同风格：

```
<li id="home_nav"><a href="<%= Url.Action("ActionName") %>"><span>Span text</span></a></li> 
```

# jquery - jquery选项卡单击打开没有ajax请求的新页面

> ID：11048979
> 
> 赞同：0
> 
> 时间：2012-06-15T10:29:30.510
> 
> 标签：jquery, jquery-ui-tabs

我正在使用下面的代码来创建 TAB

```
<div id="tabs">
    <ul>
        <li><a href="#fragment-1"><span>Master</span></a></li>
        <li><a href="/articleposting"><span>Posting</span></a></li>
        <li><a href="/deal"><span>Deals</span></a></li>
    </ul>
    <div id="fragment-1">
        <div id="vtabs">
    <ul>
        <li><a href="/category"><span>Categories</span></a></li>
        <li><a href="/user"><span>Users</span></a></li>        
    </ul>
</div>

$(document).ready(function () {
    $("#tabs").tabs({ ajaxOptions: { async: false},remote: true });
}); 
```

我想在同一个窗口中打开一个新页面，不想使用 TAB 插件 ajax 请求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T07:04:47.703

使用jQuery加载函数解决了这个问题

```
<div id="tabs">
    <ul>
        <li><a href="#fragment-1"><span>Master</span></a></li>
        <li><a href="#articleposting" data-url="/articleposting"><span>Posting</span></a></li>
    </ul>
    <div id="fragment-1">
        <div id="vtabs">
    <ul>
        <li><a href="#category" data-url="/category"><span>Categories</span></a></li>
    </ul>
    </div> 
```

然后读取 data-url 属性并使用 jquery 的 Load 方法将响应获取到父容器中

```
$('#parentContainer').load(
....

....
) 
```

# css - 不在其他元素内的元素

> ID：11048989
> 
> 赞同：4
> 
> 时间：2012-06-15T10:30:12.773
> 
> 标签：css, css-selectors

如果你有这个 HTML

```
<div>
    <span class="style-me">i want to be styled</span>
</div>
<div class="ignore-my-descendants">
    <span class="style-me">i want to be styled but my parent prevents it</span>
</div>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

然后这个 CSS 选择器

```
.style-me:not(.ignore-my-descendants *) {
    color: red;
} 
```

不会匹配任何东西。可能是因为 :not() 只接受这里没有给出的简单选择器（我不确定，希望你能告诉我真正的原因）。是否有一种纯 css 方法来过滤掉那些父元素匹配给定条件的元素？

编辑：我不想对要忽略的元素应用任何值。这很重要，因为`display`无法预见所需的元素属性值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T10:33:55.330

嗯...您正在选择一个孩子并要求匹配其父母。不会工作

有一个简单的方法

```
.style-me {
    color: red;
}

.ignore-my-descendants .style-me {
        color: white;
    } 
```

# android - Android 使用可见的 ListFragment 项填充 ArrayList

> ID：11048993
> 
> 赞同：0
> 
> 时间：2012-06-15T10:30:44.583
> 
> 标签：android, arraylist, android-listfragment

我在 ViewPager 中使用 ListFragment。每次用户翻到新页面时，有没有办法用可见的 ListFragment 的列表项填充 ArrayList？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T10:42:18.613

您可以为 ViewPager 实现 (OnPageChangeListener) onPageSelected() 并使用它来检测用户也切换了哪个页面。然后可以使用 ListView 的 getLastVisiblePosition 和 getFirstVisiblePosition 来找出当前在 listView 中显示了哪些项目。然后只需将这些项目存储在数组列表中即可。

# python - 两个样品与重复的相关性

> ID：11048995
> 
> 赞同：2
> 
> 时间：2012-06-15T10:30:50.670
> 
> 标签：python, r, bioinformatics

在处理和未处理的两个条件下，我有 200 个基因的表达值 (log2)，对于每个条件，我有 20 个重复。我想计算每个基因的每个条件之间的相关性，并将它们从高到低排列。

这更像是一个生物统计学问题，但我仍然认为这对于我们许多人遇到的生物学家/生物程序员来说是一个重要的问题。

数据集如下所示：

```
Gene    UT1            UT2            T1             T2  
DDR1     8.111795978    7.7606511867   7.9362235824   7.5974674936
RFC2    10.2418824097   9.7752152714  10.0085488406   9.5723427524
HSPA6    6.5850239731   6.7916563534   6.6883401632   7.3659252344
PAX8     9.2965160827   9.2031177653   9.249816924    8.667772504
GUCA1A   5.4828021059   5.3797749957   5.4312885508   5.1297319374 
```

对于样本数据中的每个样本，我只显示了两个重复。

我正在寻找 R 或 python 中的解决方案。R 中的 cor 函数没有给我我想要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-27T06:20:23.543

我读过的所有资料都表明您需要为每个复制创建一个*平均*度量。尽管您可能想研究更高级的预处理/标准化方法（如） ，但我已经看到`mean`并使用了这两种方法。完成后，您可以计算未治疗和治疗之间的相关性。`median``RMA`

无法以您正在寻找的方式计算相关性。任何这样做的方法最终都将归结为通过在复制中获得汇总探测测量来汇总两个条件下的信息（如上所述）。

或者，您可以执行类似计算每个探针的每个处理和未处理重复之间的相关性，并取平均相关性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T11:36:18.227

如果我从您的问题中理解正确，您需要计算所有基因的 UT1 和 T1 以及 UT2 和 T2 之间的相关性。有一种方法可以在 R 中做到这一点：

```
df <- data.frame(Gene = c("DDR1","RFC2","HSPA6","PAX8","GUCA1A")
, UT1 =  c(8.111796, 10.241882,  6.585024 , 9.296516 , 5.482802),
UT2 =c( 7.760651 ,9.775215 ,6.791656, 9.203118, 5.379775),
T1 =c(7.936224 ,10.008549,  6.688340 , 9.249817 , 5.431289),
T2 =c(7.597467 ,9.572343 ,7.365925 ,8.667773 ,5.129732)) 
```

制作这样的矩阵：

```
mat1 <- cbind(file$UT1,file$T1) 
```

初始化相关矩阵：

```
cor1 <- matrix(0,length(file$Gene),length(file$Gene)) 
```

然后计算所有与所有基因的相关性，如下所示：

```
for(i in 1:length(df$Gene)) cor1[i,] = apply(mat1,1,function(x) cor(x,mat1[df$Gene[i],])) 
```

我希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-27T04:53:06.897

假设第一列是行的名称，第一列是它们的名称，即假设您的数据仅包含数值，您可以简单地在 R 中执行以下操作，这将为您提供具有所有成对相关性的 anxn 矩阵基因。

心（数据）

您可能需要指定要使用的相关类型...时间序列的长度是多少？已经开发了完整的研究来解决选择适当措施的问题，例如，参见：

Pablo A. Jaskowiak、Ricardo JGB Campello、Ivan G. Costa Filho，“基因表达微阵列数据聚类的邻近测量：验证方法和比较分析”，IEEE/ACM Transactions on Computational Biology and Bioinformatics，第一卷。99，没有。预印本，p。1, , 2013

# python - Django url 模式匹配

> ID：11048996
> 
> 赞同：3
> 
> 时间：2012-06-15T10:30:52.387
> 
> 标签：python, regex, django

我已经经历了太多小时了，我再也看不到我做错了什么：

```
url(r'^baz/([a-z0-9]+)/([a-z0-9]+)/[0-9]/$', 'foobar.views.baz')

def baz(request, xxx, yyy, zzz):
    pass 
```

这是请求的实际 URL：

```
http://localhost:8000/baz/75ca0f5bf13d67895e23419c25f82e87f3f5f95f/f733dbf686cd51f911e533d5a351f81394c9db5c/0/ 
```

Django 不断向我抛出这个错误：

```
baz() takes exactly 4 arguments (3 given) 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T10:34:29.093

您缺少正则表达式中的最后一个括号。

```
url(r'^baz/([a-z0-9]+)/([a-z0-9]+)/([0-9])/$', 'foobar.views.baz') 
```

使用括号 Python 将捕获`[0-9]`作为一个组，现在您将获得所有 3 个参数 (+ the `self`) 而不是 2 个。

# c++ - 无法访问 C++ 向量下的内存

> ID：11048997
> 
> 赞同：1
> 
> 时间：2012-06-15T10:30:53.573
> 
> 标签：c++, gdb, g++, stdvector

我在我的程序中使用这样的向量：

```
vector<vector<string> > values;
values[0].push_back("test words"); 
```

当我运行代码时，它显示“段错误”

然后我尝试**gdb**它，我得到了这个：

```
Program received signal EXC_BAD_ACCESS, Could not access memory.
Reason: KERN_INVALID_ADDRESS at address: 0x0000000000000008
0x00000001000035be in std::vector<std::string, std::allocator<std::string> >::push_back (this=0x0, __x=@0x7fff5fbff330) at stl_vector.h:602
602     if (this->_M_impl._M_finish != this->_M_impl._M_end_of_storage) 
```

这里发生了什么 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T10:33:24.553

这定义了一个空向量：

```
vector<vector<string> > values; 
```

这将一个字符串推入第一个向量：

```
values[0].push_back("test words"); 
```

只是还没有第一个向量！尝试

```
vector<string> v;
values.push_back(v);
values[0].push_back("test words"); 
```

等等

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-15T10:33:47.877

中没有元素`values`，这意味着这会导致越界访问：

```
values[0].push_back("test words"); 
```

您需要`push_back()`空`vector<string>`入`values`：

```
values.push_back(vector<string>());
values[0].push_back("test words"); 
```

或`values`使用至少一个条目创建（请参阅[向量构造函数](http://en.cppreference.com/w/cpp/container/vector/vector)）：

```
vector<vector<string> > values(1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T10:40:55.100

```
values[0].push_back("test words"); 
```

在这里，您尝试访问不存在的索引 0。因此你得到

```
Program received signal EXC_BAD_ACCESS, Could not access memory. 
```

为简单起见，您可以这样做。

```
vector<string> v;
vector<vector<string> > values;
v.push_back("test words");
values.push_back(v); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T10:45:02.773

`values[0].push_back("test words");`

我认为你的意思是在第一个元素中插入一个字符串，它是向量中的一个`values`向量，它是向量的向量。但内部向量尚未初始化。

试试这个：

```
vector<vector<string> > values;
vector<string> string_vector;
string_vector.push_back("test words");
values.push_back(string_vector); 
```