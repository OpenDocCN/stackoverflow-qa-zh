# StackOverflow 问答 10409000-10409999

# iphone - 是否可以覆盖 AddThis API for ios 的共享菜单中的添加按钮调用的函数？

> ID：10409002
> 
> 赞同：1
> 
> 时间：2012-05-02T06:50:33.317
> 
> 标签：iphone, objective-c, ios, addthis

我已经为 ios 实现了[AddThis](http://support.addthis.com/customer/portal/articles/381273-addthis-for-ios-documentation#.T6DXIO3aaeU) API，我想覆盖顶部栏右侧的 addbutton 调用的方法，如下图所示：

![在此处输入图像描述](../Images/177d37376d203fe65c34012e14360dd8.png)

主要问题是我看不到 AddThis API 的实现文件。我想在此处添加 LinkedIn 选项默认情况下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T07:37:33.670

我找到了添加默认选项的答案：

```
[AddThisSDK setFavoriteMenuServices:@"facebook",@"twitter",@"linkedin",@"delicious",@"tumblr",nil]; 
```

# java - java中的编译错误“程序中的杂散'@'”

> ID：10409004
> 
> 赞同：0
> 
> 时间：2012-05-02T06:50:36.773
> 
> 标签：java

我正在尝试在[codechef](http://www.codechef.com)中提交一个 java 程序。我成功编译并使用 netbeans 运行它。但是当我通过上传相应的 .java 文件来提交代码时......它会像这样......

`prog.cpp:41: error: stray '@' in program prog.cpp:4: error: 'import' does not name a type prog.cpp:7: error: expected unqualified-id before 'public'`

我的java程序是这样开始的......

```
import java.util.Scanner; 
```

`public class jewels{ static int CNT=0; static String q,qq;`

等等....

@Jon Skeet ......你是......我收到错误......对不起......我将它作为C ++文件提交。但现在我得到了新的...

`Main.java:7: class jewels is public, should be declared in a file named jewels.java public class jewels{ ^ 1 error`

虽然我上传了jewels.java 文件...请帮助...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T07:05:13.320

`java.util.Scanner`是 Java 1.5 中的新功能。也许 codechef 的检查程序需要使用 Java 1.4？

我不太了解 Netbeans，但在 Eclipse 中，您可以在 Preferences（在 Java|Compiler 下）中指定“Compiler complicance level”。可能 Netbeans 也允许这样做。您可以将“Compiler complicance level”设置为 1.4 并尝试重新编译您的程序。

> 我应该写任何包名。

我不这么认为，[FAQ](http://www.codechef.com/wiki/faq#Why_do_I_get_a_compile_error)建议不要使用包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T07:16:27.743

CodeChef 要求调用 Java 中的主类`Main`。查看他们的[常见问题解答](http://www.codechef.com/wiki/faq#Why_do_I_get_a_compile_error)。

# windows-phone-7 - 减少 Windows Phone 应用程序中的内存使用量

> ID：10409009
> 
> 赞同：1
> 
> 时间：2012-05-02T06:51:03.177
> 
> 标签：windows-phone-7, memory, listpicker, windows-phone-7.1.1

我正在设计一个包含 90 多个项目的 ListPicker 的应用程序。每个项目包含 2 个 PNG 图像（每个大小 < 3KB）和一些文本。

我创建了一个新类来代表我的项目，我正在使用创建这个类的列表

```
List<ClassName> ClassNameList = new List<ClassName>(); 
```

在代码中并使用以下方法将项目附加到列表中：

```
ClassNameList.Add(new ClassName() {var1=..., var2=...}); 
```

就我而言， var1 和 var2 是项目中包含的 PNG 图像的路径。

然后，我使用数据绑定`<itemtemplate>`将我的项目绑定到列表。

当我在模拟器中加载 ListPicker 时，内存使用量飙升至 256MB 以上。因此，我无法为更新的 256MB RAM 手机提交我的应用程序。有什么办法可以减少内存使用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T07:02:27.953

图像文件大小并不意味着它将使用相同数量的内存；通常图像采用压缩格式（在您的情况下为 PNG），文件大小减小。然而，这并不意味着它将使用更少的内存。另请阅读[此主题](http://www.codeproject.com/Questions/320372/WPF-ListBox-Image-Memory-Usage)（尽管它是关于 WPF 的，但对于任何情况它仍然是相同的原理）。

我不知道您的情况，但是如果您有许多相同的图片，您可能需要考虑缓存您的图片（或使用例如[代理模式](http://en.wikipedia.org/wiki/Proxy_pattern)）以减少内存中的重复图片。

# memory-management - 动态语言中的printf内存分配

> ID：10409010
> 
> 赞同：1
> 
> 时间：2012-05-02T06:51:05.317
> 
> 标签：memory-management, printf

我很好奇用动态语言实现 printf() 模拟的聪明方法。问题是参数列表可以包含深度嵌套的数据类型，所以我不能轻易知道应该为最终缓冲区分配多少内存。这样做的明显方法是通过参数进行 2 次传递：一个用于估计缓冲区大小，另一个用于实际格式化字符串。有没有更好的方法来做到这一点？

澄清：我正在考虑为 Erlang 编写 C 函数。Erlangs 的数据类型被深度装箱，所以要使用类似 asprintf 的函数，我需要将它们全部拆箱（并可能重写格式字符串），这很昂贵。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T07:05:55.410

如果`printf`您要模拟的是，那么您没有问题，因为您不需要缓冲区，您可以在找到每个令牌时将其写入控制台。

如果您想模仿，`sprintf`那么您需要更新您的问题。

对于 sprintf 。. . 使用可扩展的字符串缓冲区。

如果您必须自己动手，请从 512 字节的合理缓冲区开始。当您达到此限制时，分配另一个**两倍**于先前限制的缓冲区（因此第一次为 1024，第二次为 2048 等），将缓冲区 1 复制到缓冲区 2，将新缓冲区换成旧缓冲区并丢弃/释放/删除/解除分配第一个缓冲区。

然后当你完成时，你分配一个正确长度的字符串，将你的缓冲区复制到字符串并返回它。

如果您不介意将缓冲区作为结果传回，则可以忽略最后一步，即使它在技术上太大并且*可能*大部分未使用。

**由于重新分配，更新**
*感觉像是次优解决方案。我错了吗？*

一句话，是的。
这就是在 C++ STL 和 .Net 框架等主要框架中实现动态列表和数组的方式。如果您考虑一种格式突破 512 字节的可能性，那么突破 1024 或 2048 字节的可能性有多大？如果字符串最终那么长，那就是三个额外的副本。您可能可以应用 80/20 规则，在 80% 的情况下您永远不会达到第一个 512 限制（您可能会将第一个分配减少到 64 个字节并仍然应用 80/20 规则）

现在考虑您的替代方案，对要格式化的项目进行两次传递。
如果你有一个 32 位的 int，你必须把它转换成一个字符串来找出这个字符串的长度。您将为列表中的每个项目额外执行一次，这是为执行转换分配缓冲区、执行转换的时间，然后取消分配字符串。与其他一些数据类型相比，获取 int 的长度相对简单。

还要考虑复杂的对象，如果你得到了这些对象的长度，它们的表示（可能）是通过调用一些`.ToString`类似的方法来建立的，这会将它的所有子对象`ToString`方法的结果连接在一起，你将再次这样做两次。

考虑到可扩展字符串缓冲区之间的折腾，并额外构建所有字符串以获得它们的长度？我每次都会去缓冲区。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T07:05:49.530

有一个`sprintf()`被调用的变体`asprintf()`，这个变体 malloc 分配空间来存储结果字符串，而您不必提前知道它的长度。

它作为 C stdlib 的一部分在大多数平台上都可用，您可以使用 或在联机帮助页的此在线副本中阅读更多信息（可能`man asprintf`）[。](http://linux.die.net/man/3/asprintf)：

从手册页：

> printf() 系列函数根据如下所述的格式生成输出。printf() 和 vprintf() 函数将输出写入标准输出流 stdout；fprintf() 和 vfprintf() 将输出写入给定的输出流；dprintf() 和 vdprintf() 将输出写入给定的文件描述符；sprintf()、snprintf()、vsprintf() 和 vsnprintf() 写入字符串 s；**asprintf() 和 vasprintf() 使用 malloc(3) 动态分配一个新字符串。**

添加：

> asprintf() 和 vasprintf() 函数将 *ret 设置为指向足够大以保存格式化字符串的缓冲区的指针。这个指针应该被传递给 free(3) 以在不再需要时释放分配的存储空间。如果无法分配足够的空间， asprintf() 和 vasprintf() 将返回 -1 并将 ret 设置为 NULL 指针。

（加粗强调）

这是一个小示例用法：

```
char *buffer;
asprintf(buffer, "Hello %s", myunknownlengthstring); 
```

这应该分配足够的空间来存储生成的格式化字符串并将其存储在`&buffer`. 你将负责释放这个内存，否则它会泄漏，`free(buffer)`当不再需要字符串时，一个简单的就足够了。

# windows - 在 Windows 应用程序中从报表服务器访问报表服务（远程模式）时出错

> ID：10409018
> 
> 赞同：0
> 
> 时间：2012-05-02T06:51:49.073
> 
> 标签：windows, reporting-services

从报表服务器访问报表时出现以下错误。我正在使用 Windows 应用程序来访问我的报告。这是我的代码：

```
private void rptviewer_Click(object sender, EventArgs e)
        {
            string reportName = "Crime_Traking_Report";
            string reporturl = @"http://13.800.91.136/ReportServer";
            string reportpath = @"/iSROReportsRK7/";
            reportViewer1.ProcessingMode = Microsoft.Reporting.WinForms.ProcessingMode.Remote;
         reportViewer1.ServerReport.ReportServerCredentials = new ReportServerCredentials("isro", "password1209083$", "Rocket");

            try
            {
                reportViewer1.ServerReport.ReportServerUrl = new Uri(reporturl);
            }
            catch (UriFormatException)
            {
                Console.WriteLine("Bad Url format");
            }
            reportViewer1.ServerReport.ReportPath = reportpath + reportName;
            reportViewer1.ProcessingMode = ProcessingMode.Remote;
            reportViewer1.ServerReport.Refresh();

        }

        public  class ReportServerCredentials : IReportServerCredentials
        {
            private string _UserName;
            private string _PassWord;
            private string _DomainName;

            public ReportServerCredentials(string UserName, string PassWord, string DomainName)
            {
                _UserName = UserName;
                _PassWord = PassWord;
                _DomainName = DomainName;
            }

            public System.Security.Principal.WindowsIdentity ImpersonationUser
            {
                get { return null; }
            }

            public ICredentials NetworkCredentials
            {
                get { return new NetworkCredential(_UserName, _PassWord, _DomainName); }
            }
            public bool GetFormsCredentials(out Cookie authCookie, out string user,out string password, out string authority)
            {
                authCookie = null;
                user = password = authority = null;
                return false;
            }

        } 
```

我得到的错误是：错误 1 ​​无法将属性或索引器“Microsoft.Reporting.WinForms.ServerReport.ReportServerCredentials”分配给 - 它是只读的
错误 2 无法将类型“Daily_Crime_Traking.Form1.ReportServerCredentials”隐式转换为“Microsoft.Reporting”。 WinForms.ReportServerCredentials'

我尝试通过将类名更改为 CustomServerCRedintials 以避免出现 nameConflict 问题，然后也是我想要解决此问题的相同类型的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T10:45:55.840

我用它来设置凭据

```
reportViewer1.ServerReport.SetDataSourceCredentials({ new DataSourceCredentials {
    Name = _DataSourceName,
    UserId =_UserName,
    Password = _PassWord
} }) 
```

参见：[ServerReport.SetDataSourceCredentials 方法](http://msdn.microsoft.com/en-us/library/dd475336.aspx)

[使用 SQL 身份验证的DataSourceCredentials 成员](http://msdn.microsoft.com/en-us/library/microsoft.reporting.webforms.datasourcecredentials_members.aspx)
[Reporting Services 报表查看器](http://consultingblogs.emc.com/stevewright/archive/2006/09/14/Reporting-Services-Report-Viewer-using-SQL-Authentication.aspx)

# mysql - mysqlimport 到临时表，然后更改表名？

> ID：10409019
> 
> 赞同：0
> 
> 时间：2012-05-02T06:51:50.617
> 
> 标签：mysql, innodb, staging, database-performance, mysqlimport

我们正在使用 MySQL，并且有一个大约 110 万条记录的 InnoDB 表，其中整个表必须每天两次用 CSV 中的数据替换。

到目前为止，我一直在做的是截断表格，然后使用 mysqlimport 每天两次从新鲜的 CSV 重新填充表格。这导致大约 160 秒的停机时间，我最初被告知这很好，但现在情况不再如此。

我能想到的唯一方法是拥有一个临时表和一个生产表。实时查询将投入生产，当我需要重新填充数据库时，我将截断 staging，然后 mysql 将 CSV 导入其中，完成后我将交换名称，以便 staging 拥有旧数据库，生产将包含新导入的 CSV。我想我需要一个中间名称，比如 production 变成 production2，staging 变成 production，然后 production2 变成 staging。

有没有人有替代解决方案？表需要尽快导入，这就是我使用 mysqlimport 的原因，而且停机时间必须极短。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T07:01:40.627

我认为您已经有了最佳解决方案。只需确保进行原子重命名，即“将表生产重命名为生产2，暂存为生产”。这样，它将对应用程序/用户透明。需要注意的一件事是是否有引用该表的外键，因为这些键仍将引用重命名的旧表。但我想既然你可以在没有任何问题的情况下截断它，你就没有任何问题。

编辑：我对 StackOverflow 的评论很新，所以我不知道这是否是最好的地方，但我只想评论 eggyal 发布的答案 - TRUNCATE 会导致隐式提交，所以建议的解决方案赢了'不像描述的那样工作（即，即使在加载新数据之前，用户/应用程序也会看到更改）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T07:23:19.767

在事务中执行`DELETE`and `LOAD DATA`（`mysqlimport`无论如何都是这样）操作：MySQL 将自动为您执行暂存过程，而无需付出任何努力。

```
START TRANSACTION;
DELETE FROM foo;
LOAD DATA INFILE '/path/to/bar' INTO TABLE foo;
COMMIT; 
```

注意：正如@JohannTagle 所指出的，`TRUNCATE`会导致隐式提交，因此需要使用它`DELETE`。

# javascript - 如何将 Mathjax 支持添加到 PHPMyAdmin

> ID：10409021
> 
> 赞同：2
> 
> 时间：2012-05-02T06:52:07.827
> 
> 标签：javascript, mysql, dom, phpmyadmin, mathjax

我使用 MySQL DBMS 来存储我的数据。我有很多数学数据要输入数据库。我想以乳胶的形式输入数学数据是一个最佳选择。（如果您认为其他解决方案会更好，请随时提出建议）。我们使用 PHPMyAdmin 将数据输入 MySQL。现在的事情是因为我们正在输入大量的数学数据。最好看看我们正在输入什么。与 math.stackexchange.com 的实时预览完全相似。这就是 Mathjax 发挥作用的地方。现在最大的问题是如何将 Mathjax 支持集成到 PHPMyAdmin？

如果你想要一个例子，这里就是我们想要输入数据库的那种东西：

> 在第一年的微积分中，我们定义了诸如 $(u, v)$ 和 $(u, \infty)$ 之类的区间。如果 $a$ 在区间内，那么这样的区间就是 $a$ 的 \emph{neighborhood}。学生应该意识到$\infty$ 只是一个符号，而不是一个数字。这很重要，因为我们很快就会引入诸如 $\lim_{x \to \infty} f(x)$ 之类的概念。
> 
> 当我们引入导数 [ \lim_{x \to a} \frac{f(x) - f(a)}{x - a}, ] 时，我们假设函数在 $a$ 的邻域中是定义的并且是连续的.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T02:21:41.207

我找到了解决方案。[您可以使用此链接](http://dl.dropbox.com/u/4159605/pma-mathjax.zip)下载修改后的 PHPMyAdmin 发行版（它不会永远可用）。我将描述我所做的更改。如果您愿意，您可以自己重复它们。

这是它的样子：

![截屏](../Images/0f8e8aebe05d86dc7da30f2cd5956fe8.png)

当您创建新条目或编辑现有条目时，该脚本将在“插入”选项卡上运行。该脚本将适用于所有文本区域（多行编辑字段）。在您更改 textarea 中的某些内容并将焦点移出它（通过单击）后，将在此 textarea 上方创建文本块。Textarea 的内容复制到这个块中。如果有一些公式，它们将由 MathJax 呈现。请耐心等待：第一次它会缓慢工作，几秒钟后会替换公式。

**步骤 1\. 下载最新版本的 PHPMyAdmin。**

我已经用最新版本的 PHPMyAdmin（现在是 3.5.1）测试了我的代码。它可以与旧版本一起使用，但我没有检查。

**步骤 2\. 下载最新版本的 MathJax 并将其解压缩到`<PHPMyAdmin_Directory>/js/mathjax/distrib`.**

[您可以从官方网站](http://www.mathjax.org/download/)下载 MathJax 2.0 。在名为 PHPMyAdmin 的目录文件夹中创建`js/mathjax/distrib`并将 MathJax 解压到此文件夹中。您现在必须有现有文件`js/mathjax/distrib/MathJax.js`。

**步骤 3\. 将配置文件复制`js/mathjax/distrib/config/default.js`到`js/mathjax/distrib/config/myconfig.js`.**

**第 4 步。在`myconfig.js`文件中更改您网站的设置。**

找到这个部分：

```
tex2jax: {

    //
    //  The delimiters that surround in-line math expressions.  The first in each
    //  pair is the initial delimiter and the second is the terminal delimiter.
    //  Comment out any that you don't want, but be sure there is no extra
    //  comma at the end of the last item in the list -- some browsers won't
    //  be able to handle that.
    //
    inlineMath: [
//    ['$','$'],      // uncomment this for standard TeX math delimiters
      ['\\(','\\)']
    ], 
```

从您的文本示例中，我发现您需要将此设置更改为：

```
tex2jax: {
    inlineMath: [
      ['$','$'], ['[', ']'], 
      ['\\(','\\)']
    ], 
```

**步骤 5\. 创建`js/mathjax/1.js`包含以下内容的文件：**

```
$(function() {
  var preview_number = 0;
  $("textarea").change(function(e) {
    var textarea = $(e.target);
    var d = textarea.prev();
    if (!d.hasClass("mathjax_preview")) {
      preview_number++;
      var d = $("<div class='mathjax_preview' " +
         "style='padding: 5px; color: black; background: #eee; border: 1px solid #888;'" +
         "></div>");
      d.attr("id", "mathjax_preview_" + preview_number);
      d.insertBefore(textarea);
    } 
    d.text(textarea.val());
    MathJax.Hub.Queue([ "Typeset", MathJax.Hub, d.attr("id") ]);
  });
}); 
```

**步骤 6\. 修改`tbl_change.php`.**

`tbl_change.php`在根 PHPMyAdmin 目录中打开文件并找到此部分：

```
$GLOBALS['js_include'][] = 'functions.js';
$GLOBALS['js_include'][] = 'tbl_change.js';
$GLOBALS['js_include'][] = 'jquery/jquery-ui-1.8.16.custom.js';
$GLOBALS['js_include'][] = 'jquery/timepicker.js';
$GLOBALS['js_include'][] = 'gis_data_editor.js'; 
```

在此下方再添加两行：

```
$GLOBALS['js_include'][] = 'mathjax/distrib/MathJax.js?config=myconfig';
$GLOBALS['js_include'][] = 'mathjax/1.js'; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-08-14T20:23:22.107

您还可以查看可以连接到各种数据库的 PHP 可编辑数据网格，并支持 Mathjax 作为渲染器。

编辑：[http://prntscr.com/g8gu9g](http://prntscr.com/g8gu9g) 结果： http: [//prntscr.com/g8gu24](http://prntscr.com/g8gu24)

代码：[https ://gist.github.com/gridphp/d845df051ff7d7086f3cf947f3da44d5](https://gist.github.com/gridphp/d845df051ff7d7086f3cf947f3da44d5)

# linux - 如何在 Linux 中获取一个进程的内存

> ID：10409022
> 
> 赞同：7
> 
> 时间：2012-05-02T06:52:24.277
> 
> 标签：linux, unix

> **可能重复：**
> [Linux：如何测量应用程序或进程的实际内存使用情况？](https://stackoverflow.com/questions/131303/linux-how-to-measure-actual-memory-usage-of-an-application-or-process)

为什么我在Linux中使用'top'来显示我对一个进程的内存，我知道进程的存储只会增加并且不会减少，除非我关闭所有进程。我不知道为什么，虽然我使用'free ' 仅在 'malloc' 之后。我怎样才能获得我的流程的正确实际实时存储？谢谢大家。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-02T06:59:51.493

找到pid，如果它以同一用户身份运行，则使用“ps aux”，否则使用“ps ax”，然后执行以下命令：

```
cat /proc/<PID>/status 
```

这应该是你想知道的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-02T06:57:21.253

简短的回答是，在现代操作系统上，这非常困难。

在进程终止之前，free()ed 的内存实际上不会返回给操作系统，因此分配和释放越来越大的内存块的许多循环将导致进程增长。（[通过](http://compgroups.net/comp.unix.solaris/process-memory-usage-vsz-and-rss/237933)）

[这个问题已经在另一个 SO 线程上得到了更详细的回答。](https://stackoverflow.com/questions/131303/linux-how-to-measure-actual-memory-usage-of-an-application-or-process)你可能会在那里找到答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T06:57:46.127

根据分配的大小，您的内存可能会或可能不会返回给操作系统。如果您要分配*大*的东西（参见`MMAP_THRESHOLD`参考资料`malloc(3)`），占用许多内存页的东西，glibc 将使用`mmap(2)`'`MAP_ANONYMOUS`标志进行分配；当你使用`free(3)`这个对象时，glibc 可以将页面返回给操作系统，你的内存使用量就会下降。

如果你愿意，你可以`MMAP_THRESHOLD`调低使用。`mallopt(3)`

如果您有许多较小的分配，您的内存可能会*碎片化*，`free(3)`实际上无法释放可以返回给操作系统的整个页面。您可能在给定页面上*使用*的资源相对较少，但整个页面仍然分配给您的进程，并且它替换了来自其他进程的整个页面的数据价值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T08:04:21.397

我认为这个其他问题并没有真正详细回答这个问题。

添加到[sarnold 所说](https://stackoverflow.com/a/10409090/296974)`free()`的内容中，以相反的顺序可能会有所帮助`malloc()`- 特别是对于较小的内存块。然后堆可以从最后再次收缩......

为了验证这一点，您应该在测试程序中`void *sbrk(intptr_t increment);`以 0 的增量调用 - 然后它会告诉您堆的当前值 - 并输出它以查看其更改。如果你以正确的方式正确地执行此操作，glib 应该调用`brk()`以增加堆并最终再次缩小它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-03T06:47:55.993

您可以尝试 pmap 和 id 进程：

```
 1:   init [3] 
```

001c3000 100K rx-- /lib/ld-2.5.so

001dc000 4K rx-- /lib/ld-2.5.so

001dd000 4K rwx-- /lib/ld-2.5.so

001e0000 1256K rx--/lib/libc-2.5.so

0031a000 8K rx--/lib/libc-2.5.so

0031c000 4K rwx-- /lib/libc-2.5.so

0031d000 12K rwx-- [匿名]

0034b000 8K rx--/lib/libdl-2.5.so

0034d000 4K rx--/lib/libdl-2.5.so

0034e000 4K rwx-- /lib/libdl-2.5.so

006f2000 236K rx--/lib/libsepol.so.1

0072d000 4K rwx-- /lib/libsepol.so.1

0072e000 40K rwx-- [匿名]

0073a000 84K rx-- /lib/libselinux.so.1

0074f000 8K rwx-- /lib/libselinux.so.1

00fff000 4K 接收-- [匿名]

08048000 32K rx--/sbin/init

08050000 4K rw--- /sbin/init

09c0f000 132K rw--- [匿名]

b7fed000 8K rw--- [匿名]

bfd87000 84K rw--- [堆栈]

总计 2040K

# mysql - 表连接 Ruby on Rails

> ID：10409025
> 
> 赞同：1
> 
> 时间：2012-05-02T06:52:40.587
> 
> 标签：mysql, ruby-on-rails, ruby, database

如果我有两个像这样设置的单独的表：

```
University 1:

student   major   year    gpa

University 2:

student   major   address   gpa   hometown  extra curriculars 
```

有没有办法让我按该专业的最高 gpa 排序专业？抱歉，这可能是一个简单的问题，不过我对 Ruby on Rails 还是很陌生。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T10:31:41.947

这是 SQL 擅长的事情，因此您可以在 SQL 中完成。（在获得结果之后在 ruby​​ 代码中执行此操作非常清楚，您应该能够弄清楚。）

```
SELECT *
FROM university
GROUP BY major
ORDER BY MAX(gpa) DESC 
```

所以，在 Rails 2.x

```
University.find(:group => "major", :order => "MAX(gpa) DESC") 
```

在 Rails 3.0 中

```
University.group("major").order("MAX(gpa) DESC") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T10:56:46.323

如果你想在两所大学中按专业获得最高的 GPA，SQL 看起来像这样，例如：

```
SELECT major, MAX(GPA) AS GPA FROM
  (SELECT major, MAX(GPA) AS GPA FROM UNIVERSITY_1
   GROUP BY major
   UNION
   SELECT major, MAX(GPA) AS GPA FROM UNIVERSITY_2
   GROUP BY major)
GROUP BY major
ORDER BY GPA DESC 
```

我不确定如何在 Arel 中表达该查询 - 不确定它是如何进行联合的，这很高兴知道。同时，您始终可以使用 find_by_sql 从原始 SQL 中获取结果集。

**编辑：**

一种有点 Ruby-er/Railsier 的方法可能是：

```
u_one = UniversityOne.maximum :gpa, :group => 'major'
u_two = UniversityTwo.maximum :gpa, :group => 'major'
u_combined = u_one.merge(u_two) { |k, one, two| [one,two].max } 
```

`u_combined`最终成为一个散列，其中以专业为键，以跨大学的最大 gpa 为值。

# c - 即使包含 math.h 标头，为什么我会收到“未定义的 sqrt 引用”错误？

> ID：10409032
> 
> 赞同：137
> 
> 时间：2012-05-02T06:53:15.903
> 
> 标签：c, linker, linker-errors, libm

我对 C 很陌生，我有这个代码：

```
#include <stdio.h>
#include <math.h>
int main(void)
{
  double x = 0.5;
  double result = sqrt(x);
  printf("The square root of %lf is %lf\n", x, result);
  return 0;
} 
```

但是当我编译这个时：

```
gcc test.c -o test 
```

我收到这样的错误：

```
/tmp/cc58XvyX.o: In function `main':
test.c:(.text+0x2f): undefined reference to `sqrt'
collect2: ld returned 1 exit status 
```

为什么会这样？是`sqrt()`不是在`math.h`头文件里？我得到与`cosh`其他三角函数相同的错误。为什么？

* * *

## 回答 #1

> 赞同：212
> 
> 时间：2012-05-02T06:55:27.340

构建可执行文件时必须链接数学库。如何做到这一点因环境而异，但在 Linux/Unix 中，只需`-lm`在命令中添加：

```
gcc test.c -o test -lm 
```

数学库名为`libm.so`，`-l`命令选项采用`lib`前缀和`.a`/或`.so`后缀。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-05-02T06:55:11.787

您需要使用链接`-lm`器选项链接

您需要编译为

```
gcc test.c  -o test -lm 
```

gcc（不是 g++）在历史上默认情况下不会在链接时包含数学函数。它也已从 libc 中分离到一个单独的库 libm 中。要链接这些函数，您必须建议链接器包含库链接器选项，`-l`后跟库名称。`m``-lm`

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-05-02T06:55:38.743

这可能是链接器错误。添加`-lm`开关以指定您要链接到标准 C 数学库 ( `libm`)，该库具有这些函数的定义（标头只有它们的*声明*- 值得查找差异。）

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-05-02T06:56:11.923

因为您没有告诉链接器**数学**库的位置。**使用gcc test.c -o test -lm**编译

 *** * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-03-03T05:29:35.963

添加标题：

`#include<math.h>`

注意：使用 abs()，有时在评估时 sqrt() 可以取负值，这会导致域错误。

abs() - 提供绝对值；

例如，abs(-3) =3

在编译期间在命令末尾包含 -lm：

`gcc <filename.extension> -lm`**

# sql - SQL查询数据库

> ID：10409056
> 
> 赞同：0
> 
> 时间：2012-05-02T06:54:53.307
> 
> 标签：sql, postgresql

假设我有一个包含名称的 db 表，并且对于一些没有学生的分数为 100 分。我想根据每个学生获得的分数为每个学生分配一个等级。我希望结果为：

```
GRADE NAME MARKS
  A    X     85
  B    Y     75 
```

让授予等级的标准如下：

```
 A - if 85 <= marks < 100

 B - if 70 <= marks < 85 
```

请有人可以给我一个 SQL 查询（最好是 postgresql 查询）来进行上述计算。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T07:00:42.490

那么你可以尝试做：

```
select name, marks, 
CASE WHEN marks >= 85 THEN 'A'
ELSE 'B'
END AS grades
FROM your_table 
```

你的意思是这样的吗

# asp.net - 直接在网格视图中编辑值

> ID：10409057
> 
> 赞同：1
> 
> 时间：2012-05-02T06:54:53.613
> 
> 标签：asp.net, vb.net, gridview

有人可以解释一下我如何可以简单地动态编辑网格视图中的单元格。即只需单击它并键入，然后在我失去对gridview 的关注时发布更改？

我尝试将单元格定义为模板控件（文本框）并让它显示并让我输入，但除此之外它什么也没做。我什至无法从底层数据集中获取默认值到该单元格中。

请使用 ASP 2.0 和 VB.NET。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-22T09:41:03.117

```
 <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" DataKeyNames="Id"
        ShowFooter="true" AllowPaging="true" PageSize="4" AllowSorting="True" OnRowCommand="GridView1_RowCommand"
        OnPageIndexChanging="GridView1_PageIndexChanging" OnRowDeleting="GridView1_RowDeleting"
        OnRowEditing="GridView1_RowEditing" OnRowUpdating="GridView1_RowUpdating" OnSorting="GridView1_Sorting"
        OnRowCancelingEdit="GridView1_RowCancelingEdit">
        <Columns>
            <asp:CommandField ShowDeleteButton="True" ShowEditButton="True" />
            <asp:TemplateField HeaderText="Id" InsertVisible="False" SortExpression="Id">
                <EditItemTemplate>
                    <asp:Label ID="Label1" runat="server" Text='<%# Eval("Id") %>'></asp:Label>
                </EditItemTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label1" runat="server" Text='<%# Bind("Id") %>'></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:BoundField DataField="Id" ShowHeader="True" />
            <asp:TemplateField HeaderText="Name" SortExpression="Name">
                <EditItemTemplate>
                    <asp:TextBox ID="TextBox1" runat="server" Text='<%# Bind("Name") %>'></asp:TextBox>
                </EditItemTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label2" runat="server" Text='<%# Bind("Name") %>'></asp:Label>
                </ItemTemplate>
                <FooterTemplate>
                    <asp:TextBox ID="QuantityTextBox" runat="server"></asp:TextBox>
                </FooterTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Description" SortExpression="Description">
                <EditItemTemplate>
                    <asp:TextBox ID="TextBox2" runat="server" Text='<%# Bind("Description") %>'></asp:TextBox>
                </EditItemTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label3" runat="server" Text='<%# Bind("Description") %>'></asp:Label>
                </ItemTemplate>
                <FooterTemplate>
                    <asp:TextBox ID="DescriptionTextBox" runat="server"></asp:TextBox>
                </FooterTemplate>
            </asp:TemplateField>
            <asp:TemplateField>
                <FooterTemplate>
                    <asp:LinkButton ID="btnNew" runat="server" CommandName="New" Text="New" />
                </FooterTemplate>
            </asp:TemplateField>
        </Columns>
    </asp:GridView> 
```

设置可编辑属性，然后使用网格的事件

```
 protected void GridView1_RowUpdating(object sender, GridViewUpdateEventArgs e)
    {
        String StudentId = GridView1.Rows[e.RowIndex].Cells[1].Text;
        String Firstname = GridView1.Rows[e.RowIndex].Cells[2].Text;
        String Lastname = GridView1.Rows[e.RowIndex].Cells[3].Text;
        String Email = GridView1.Rows[e.RowIndex].Cells[4].Text;
        int id = Convert.ToInt32(StudentId);
        Response.Write(StudentId);
        try
        {
            studentEntities context = new studentEntities();
            tbl_Students dbstudent = context.tbl_Students.First(i => i.Studentid == id);
            dbstudent.Firstname = Firstname;
            dbstudent.Lastname = Lastname;
            dbstudent.Email = Email;
            context.SaveChanges();

        }
        catch (Exception e1)
        {
            Console.WriteLine(e1.InnerException);
        }

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T16:37:35.600

使用 TemplateField 而不是 BoundField。在 TemplateField 中放置一个 TextBox。（或复选框或任何您需要的东西。）在屏幕上的某处放置一个“更新”按钮。例如：

```
<asp:GridView ID="mydata" runat="server" DataSourceID="dsMydata" AutoGenerateColumns="false" >
<Columns>
<asp:BoundField DataField="Noneditablefield" HeaderText="Non-editable field" />
<asp:TemplateField HeaderText="Editable Field">
  <ItemTemplate>
    <asp:TextBox ID="myfield" runat="server" Columns="10" text='<%# eval("myfield") %>' />
  </ItemTemplate>
</asp:TemplateField>
</asp:GridView> 
```

然后创建一个函数来处理更新按钮的点击。在这个函数中，循环遍历表格的行，使用 FindControl 来获取字段，然后对它做任何你需要做的事情。

```
Protected Sub update_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles update.Click
  For Each row As GridViewRow In tasks.Rows
    Dim MyField = CType(row.FindControl("myfield"), TextBox).Text
    ' Do whatever you need with the new value
  End For
End Sub 
```

假设有多行，有些行将被更新，而有些则不会。根据您的应用程序的性质，您可以只更新所有行，无论是否更改。当我感到懒惰并且我知道只有几条记录并且两个用户查看相同的数据并同时进行更改时，我已经这样做了。但是，更有可能的是，您希望保存旧值，例如在 gridview 的隐藏字段中，然后在返回时将新值与旧值进行比较，并且仅在更改时才更新数据库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T07:06:44.037

只需向页面添加一个新内容，然后`GridView`从其`Smart Tag`中单击`Enable Editing`

有关如何执行此操作的更多信息，您可以从此处查看

[http://msdn.microsoft.com/en-us/library/ms972948.aspx](http://msdn.microsoft.com/en-us/library/ms972948.aspx)

您需要将自己的控件添加到模板字段而不是绑定字段中，在 gridvew 中捕获此事件并相应地更新您的行。

你可以这样开始：

```
Protected Sub GridView1_RowCommand(ByVal sender As Object, ByVal e As GridViewCommandEventArgs)

    Dim btn As Button = TryCast(e.CommandSource, Button)
    Dim row As GridViewRow = TryCast(btn.NamingContainer, GridViewRow)

    If row IsNot Nothing Then
        Dim txt As TextBox = TryCast(row.FindControl("TextBox1"), TextBox)
        If txt IsNot Nothing Then
            ' Do something here 
        End If
    End If
End Sub 
```

# jquery - 如何在jquery中计算mousedown事件期间的时间？

> ID：10409062
> 
> 赞同：7
> 
> 时间：2012-05-02T06:55:28.080
> 
> 标签：jquery, jquery-ui

我正在尝试在 mousedown - up 事件的一个按钮上执行 2 种不同的功能。但它不起作用，因为我无法检测 mousedown 事件的时间。

```
var flag;  
$("#ClikerButton").mousedown(function(e){  
    //if mouse pressed more than 2 sec, then  
    // do func1 and set flag = true;  
         //else do nothing  
}).mouseup(function(e){  
//if flag == true, do nothing,  
//else do func2;  
}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-02T07:00:33.773

您可以使用：

```
$(window).mousedown(function(e) {
    clearTimeout(this.downTimer);
    this.downTimer = setTimeout(function() {
        alert('mousedown > 2 sec');   
    }, 2000); 
}).mouseup(function(e) {
    clearTimeout(this.downTimer); 
});​ 
```

**小提琴：http:** [//jsfiddle.net/simevidas/Pe9sq/2/](http://jsfiddle.net/simevidas/Pe9sq/2/)

**参考：** [检测 mousedown 事件的时间](https://stackoverflow.com/questions/6091026/mousedown-timer-using-javascript-jquery)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T06:59:00.997

没有“jQuery”魔法，只有 JavaScript 计时器。

```
var pressTimer

$("a").mouseup(function(){
  clearTimeout(pressTimer)
  // Clear timeout
  return false;
}).mousedown(function(){
  // Set timeout
  pressTimer = window.setTimeout(function() { ... your code ...},1000)
  return false; 
}); 
```

这是参考链接[https://stackoverflow.com/questions/2625210/long-press-in-javascript/2625240#2625240](https://stackoverflow.com/a/2625240/676755)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T07:01:51.667

```
var flag, flag2;
$("#ClikerButton").on({
    mousedown : function(){
       flag = new Date().getTime();
    },
    mouseup: function(){
       flag2 = new Date().getTime();
       var passed = flag2 - flag;
       console.log(passed); //time passed in milliseconds
    }
});​ 
```

[小提琴](http://jsfiddle.net/adeneo/TBPfu/)

# android - 将 EditText 中的数据发布到放置在 Web 服务器中的外部数据库

> ID：10409076
> 
> 赞同：0
> 
> 时间：2012-05-02T06:56:13.160
> 
> 标签：android, database

我是 android 新手。我需要将 EdiText 中的数据发布到服务器数据库表。数据被发送到 php 页面。SQL 查询在那个页面中。请大家帮帮我。我不知道该怎么做.pleaseee...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T08:13:57.747

这是将一些文本数据发送到 PHP 脚本的一个示例：

```
ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
nameValuePairs.add(new BasicNameValuePair("text", text));
nameValuePairs.add(new BasicNameValuePair("text2", text2)); //you can add as many you need

try {
        HttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost("http://yourserver.com/script.php");
        httpPost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
        HttpResponse response = httpClient.execute(httpPost);
        HttpEntity entity = response.getEntity();
        is = entity.getContent();               
    }catch (Exception e) {
        // TODO: handle exception
        Log.e("log_tag", e.toString());
        return false;
        //Toast.makeText(this, e.toString(), Toast.LENGTH_LONG).show();
    } 
```

# git - 图表贡献者为空

> ID：10409083
> 
> 赞同：2
> 
> 时间：2012-05-02T06:56:50.647
> 
> 标签：git, graph, github, github-services

我在 github 上有几个项目，但在其中一些项目中，贡献者的图表是空的，即使我的 .gitconfig 设置了名称和电子邮件。 [https://github.com/jlengrand/batchWaterMarking/graphs/contributors](https://github.com/jlengrand/batchWaterMarking/graphs/contributors)

您可以在主页上看到我是在上次提交时创作的，如 jlengrand [https://github.com/jlengrand/batchWaterMarking](https://github.com/jlengrand/batchWaterMarking)

我尝试再次提交和推送，我确信使用 .gitconfig ，但它没有改变任何东西。

因此，masterbranch 拒绝考虑我的一些项目。

你知道解决这个问题的方法吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T08:59:44.903

您是否使用多台机器来推送您的提交？如果你的邮箱和名字`GIT_CONFIG`对于不同的机器是不同的，你必须将它们添加到你的 GitHub 帐户中。您可以在 GitHub 上的[Account -> Settings -> Email](https://github.com/settings/emails)菜单下添加不同的电子邮件地址。

# php - 登录尝试失败后返回 PHP

> ID：10409084
> 
> 赞同：0
> 
> 时间：2012-05-02T06:57:07.390
> 
> 标签：php, javascript, html

我正在用PHP开发登录表单 表单如下

```
<form method="post" action="Login.php" id="Log">
<select id="Login" name="Type">
<option value="Sel" selected="selected">Select Login type</option>
<option value="Student">Student</option>
<option value="Faculity">Faculity</option>
</select>
<div id="type">
<p id="Ch">Group Id: &nbsp;<input id="l" name="log" type="text"/></p>
<p id="Pass">Password: &nbsp; <input id="p" name="Pass" type="password" /></p>
<input id="Cond" type="Text" />
<input type="submit" value="Login"  />
<p id="Invalid" style="padding-top:.75em; color:#FF0000;">Invalid Login Or Password</p>
</form> 
```

在 post.php 中，我连接数据库并检查登录名和密码。

我想`<p id="invalid">`在密码或登录名不匹配时在其下方的相同表单中显示该标签，而不会有任何延迟。

`<p id="invalid">`开头隐藏，仅在登录名或密码错误时显示

我怎样才能实现这个/通过 PHP 连接数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T07:04:30.413

执行此操作的正确方法是将表单操作设置为包含该表单的同一页面。在 php 页面的开头，应该检查用户名/密码，以便在加载表单 html 时，您已经知道登录结果并可以显示错误。

然后，如果您想在不重新加载页面的情况下执行此操作，请编写一个 AJAX 脚本并将其连接到提交按钮（并禁用表单提交）

这样，如果禁用了 javascript，一切仍然有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T07:21:08.280

我同意盖伦的回答。您应该将登录过程的内容放在同一页面上。如果你不知道怎么做，你应该这样做：

```
<?php
$itswrong = false;
if (isset($_POST['Pass']) && isset($_POST['log'])) {
$sql = 'SELECT * FROM your_database_name WHERE group_id = '{$_POST['log']}' AND password = SHA1('{$_POST['Pass']}')";
$result = @mysql_query($sql) or die (mysql_error());
if (mysql_num_rows($result) == 1) {
// Match was found!
// Do whatever here, e.g. session registering (starting a session), etc.
} else {
// Oh damn, it's wrong!
$itswrong = true;
// Do stuff here
}
} else {
// Move your form in here
}
?> 
```

您需要在表单中做的就是将其移至 下`// Move your form in here`，更改：

```
<p id="Invalid" style="padding-top:.75em; color:#FF0000;">Invalid Login Or Password</p> 
```

对此：

```
<?php
if (isset($_POST['Pass']) && isset($_POST['log']) && $itswrong == true) {
?>
<p id="Invalid" style="padding-top:.75em; color:#FF0000;">Invalid Login Or Password</p>
<?php
}
?> 
```

并更改 SQL 查询中的值以满足您的需要。然后它会工作。我希望您将表单移到 下`// Move your form in here`，因为如果未提交表单，它将显示。

**编辑：**还要更改表单的标题，

由此：

```
<form method="post" action="Login.php" id="Log"> 
```

对此：

```
<form method="post" action="<?php echo $_SERVER['REQUEST_URI']; ?>" id="Log"> 
```

这将使页面只是将数据发布到自身，从而使我的代码成为可能。

我不建议使用 ajax，因为黑客入侵 PHP 比 JavaScript 相关技术更难，因为 JavaScript 是客户端，而 PHP 是服务器端。

如果您仍有问题，请通知我。

卢卡斯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T07:28:43.667

这是一个基本示例；简而言之，这就是我使用的：

```
$entered_password = $_POST['pword'];
$php_self = $_SERVER['PHP_SELF'];

if ($password != $entered_password) {
   $error['pword'] = "<span class=\"errormess\">You entered wrong Password</span>";
} else {
    $error['pword'] = "";
} 
```

在检查数据库以获得有效答案后，我对所有字段执行此操作，如果出现错误，则在数组中输入一个新键。然后在 HTML 中：

```
<form method="post" action="<?php echo $php_self?>">
   <input type="password" name="pword" />
   <?php echo $error['pword']?>
   <input type="submit" name="submit" />
</form> 
```

如果有错误，则会在 下方显示`<input>`，如果没有，则不显示任何内容。在我的 CSS 中，该类`errormess`是红色/粗体字母。我对所有输入都这样做。如果任何字段有错误，我只是 php_self 页面，如果没有错误，那么它会`header["Location: confirm.html"]`重定向到登录用户的相应页面。

简而言之，这是一个非常基本的示例，但希望您能从中获得乐趣。

希望这可以帮助

# ruby-on-rails - 如何在 My Rails 应用程序中集成 Linkedin、Facebook 和 Google+？

> ID：10409085
> 
> 赞同：2
> 
> 时间：2012-05-02T06:57:08.617
> 
> 标签：ruby-on-rails

我的 Rails 版本是 2.3.2。

任何人都可以给我一些有用的链接，可以更有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T07:36:29.040

您是否尝试过这些宝石：

[https://github.com/envylabs/BlueLightSpecial](https://github.com/envylabs/BlueLightSpecial)（脸书）， [https://github.com/pengwynn/linkedin](https://github.com/pengwynn/linkedin)

虽然没有找到任何与 google+ 相关的内容...

请让我知道上面的链接是否有帮助。

# ruby-on-rails - Knockout.js - 通过 rails 控制器设置初始值

> ID：10409086
> 
> 赞同：1
> 
> 时间：2012-05-02T06:57:16.833
> 
> 标签：ruby-on-rails, knockout.js

我有一个 rails 应用程序，我想在其中通过 rails 使用一些默认值设置我的任务对象，并让 knockout.js 将这些默认值用于 observables。

当前发生的情况是 rails 控制器的默认设置很快被替换为来自 knockout.js 可观察命令的空白。

这是我的导轨控制器

```
def new
  @task = Task.new
  @task.task_date = Time.now
end 
```

我的淘汰赛

```
Task = ->
  @name = ko.observable()
  @task_date = ko.observable() 
```

我的表格

```
= f.text_field :task_date, "data-bind" => "value: name"
= f.text_field :task_date, "data-bind" => "value: task_date" 
```

我是否必须从我的控制器传递 JSON 而不是使用默认的“render :new”？

我可以使用rails默认值吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T20:02:33.883

如果我理解正确，您正在渲染视图，并且 rails 正在将值写入相关字段，然后将其敲除绑定到 DOM 并清空字段，因为 `observable`它没有任何值。

1.  将页面中模型的值呈现为 json
2.  通过ajax进行往返以获取值
3.  呈现页面标记中的值并为您的模型提取这些值

选项 1 和 3 对服务器来说很容易，并且只需要对页面的一个请求。客户端 #1 很简单，将数据映射到模型并绑定，而 #3 需要从标记中提取代码（即，如果您将数据`data-*`放在元素的属性中）但可以制作更好的标记，但是它更多的工作是想出一个计划，将价值与考虑收藏等的模型进行初始绑定。

选项 2 需要两次，一次获取 html，另一次获取 json，除非您添加代码以跳过 html 获取上的 db，否则您对 db 的请求也会加倍。伊克。

[编辑] 还有`gon`一个我没有使用过的 gem 和 RailsCasts 的截屏视频，展示了这些技术的实际应用：[http ://railscasts.com/episodes/324-passing-data-to-javascript](http://railscasts.com/episodes/324-passing-data-to-javascript)

# c++ - SQL numeric(18,0) 数据类型对应的 C++ 数据类型是什么？

> ID：10409089
> 
> 赞同：2
> 
> 时间：2012-05-02T06:57:42.053
> 
> 标签：c++, sql, sql-server, sqldatatypes, type-conversion

SQL numeric(18,0) 数据类型对应的 C++ 数据类型是什么？

我需要 C++ 中的数据类型来在其中存储 SQL 的 numeric(18,0)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T07:01:11.350

它在 MSDN 上说数字映射到 C++ 中的 CString。

参考：*[SQL：SQL 和 C++ 数据类型 (ODBC)](https://docs.microsoft.com/en-us/cpp/data/odbc/sql-sql-and-cpp-data-types-odbc)*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T07:00:32.953

那将是一个`long long`（至少64位）。

# python - 是否可以通过 web2py 应用程序中的 web 服务进行通信？

> ID：10409094
> 
> 赞同：-2
> 
> 时间：2012-05-02T06:58:15.203
> 
> 标签：python, web-services, python-3.x, web2py

我必须开发一个 web2py 应用程序，它将在一台机器（比如说服务器）上运行，这台机器也将安装并运行 MySql 数据库。用户可以通过 Https 远程连接到 Web2py 应用程序（可以说是客户端）还有一个系统在网络上运行（可以说 N/W 面板）可以将数据发送到服务器，并将进一步保存到 MySql数据库和 Web2Py 应用程序将更新的数据显示给客户端。所以场景是： 1\. 当 CLIENT 可以使用 Web2Py 应用程序从 N/W 面板（这里 N/W 面板充当服务器）请求一些数据时，服务器可以充当客户端。2\. N/W Panel 在从不同的设备获取一些更新的数据并需要保存到运行在 SERVER 上的 MySql 数据库时可以充当客户端（这里 SERVER 充当服务器）。

现在我的问题是如何使用 Web 服务来实现它，因为它是 SERVER 和 N/W 面板之间的双向通信以及如何与 Web2Py 应用程序集成？Web 服务可以是 SOAP 或 REST。

问候， 皮克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T07:03:52.903

是的，服务器可以充当客户端。这不是问题，“如何做”的答案基本上只是“做它！”。:-)

您使用一些客户端库，它可能是标准库中支持 http 的任何东西，或者是一些特殊的 SOAP 或 REST 库（如果您想要使用的话），然后您从服务器发出请求。真的就这么简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T09:17:51.720

您是否查看过此手册页？它包含一些示例的客户端代码...

[http://web2py.com/books/default/chapter/29/10#Remote-procedure-calls](http://web2py.com/books/default/chapter/29/10#Remote-procedure-calls)

# javascript - 使用 Javascript 搜索 XML 文件，然后根据匹配的字符串检索特定属性

> ID：10409095
> 
> 赞同：0
> 
> 时间：2012-05-02T06:58:15.960
> 
> 标签：javascript, xml, search

我已经浏览了整个网站，作为使用从 html 输入字段中获取的值搜索 XML 文件的各种方法，并设法做到了这一点，但是当它找到匹配项时，我所能做的就是显示一条消息“找到匹配！”。

我想做的是能够使用放入 html 输入字段的搜索字符串值来搜索 XML 文件，然后一旦找到匹配项，就可以提取该特定节点的其余信息 - 就像所有属性一样。

我的 XML 文件示例：

```
<dvdcatalogue>
<dvd year="1979" rating="18" director="ridley scott">Alien</dvd>
</dvdcatalogue> 
```

电影的标题是“外星人”，所以这将是搜索字符串。

任何想法如何做到这一点？我猜这可能与加载到 javascript 数组中有关。只是为了让任何回答的人都知道到目前为止我所看到的所有示例都没有清楚地说明可以实现此目的的确切代码。

在此先感谢您的帮助！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T06:49:09.013

您也可以使用 jQuery 来完成这项任务，就像我在[这个小提琴](http://jsfiddle.net/ch9MU/)中所做的一样（尽管 XPath 会是更正确的方法^^）

```
var xml = $("<dvdcatalogue>" +
               "<dvd year=\"1979\" rating=\"18\" director=\"ridley scott\">Alien</dvd>" +
               "<dvd year=\"1986\" rating=\"18\" director=\"ridley scott\">Aliens (aka. Alien 2)</dvd>" +
               "<dvd year=\"1984\" rating=\"18\" director=\"James Cameron\">Terminator</dvd>" +
               "</dvdcatalogue>"),
       search = "Alien",
       result = $("#result"),
       nodes;

       nodes = xml.find("dvd:contains('" + search + "')");

    if (nodes.length > 0) {
        nodes.each(function(i, e) {
            result.append("<li><b>" + e.firstChild.nodeValue + "</b> by " + e.getAttribute("director") + "</li>");
        });
    } 
```

# view - 关于 shouldAutorotateToInterfaceOrientation 方法

> ID：10409099
> 
> 赞同：0
> 
> 时间：2012-05-02T06:58:56.127
> 
> 标签：view

我正在开发一个使用了一些视图控制器的应用程序。当我在横向/纵向模式下从一个视图推送到另一个视图并以相同模式移回时，在移回时调用的 shouldAutorotateToInterfaceOrientation 方法。

但是当重复相同的步骤并且在第二个或第三个视图上更改方向并向后移动时，不调用 shouldAutorotateToInterfaceOrientation 方法。并且视图控件受到干扰。

请给出一个相同的解决方案。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T15:05:03.033

如果我正确理解您的问题，您希望在设备方向更改时在 viewControllers 堆栈上的第二个或第三个 viewController 上调用 shouldAutorotateToInterfaceOrientation 。

**shouldAutorotateToInterfaceOrientation 仅在顶部 viewController 上调用**。如果你在第二个或第三个viewController的方法中做任何布局代码，代码不会被执行。

解决方案很简单，而且很多，具体取决于您的代码。这是一个应该可以工作的（未在 Xcode 中测试过）。在顶层 ViewController 的 shouldAutorotateToInterfaceOrientation 方法中，添加如下内容：

```
for (UIViewController *vc in [self childViewControllers])
{ 
    [vc shouldAutorotateToInterfaceOrientation];
} 
```

如果你有一个指向特定 childViewController 的指针，你可以专门调用它。

文档中的注释：

> 此方法的实现应根据 interfaceOrientation 参数中的值简单地返回 YES 或 NO。不要尝试获取 interfaceOrientation 属性的值或检查 UIDevice 类报告的方向值。您的视图控制器要么能够支持给定的方向，要么不能。

要进行任何布局，您可以使用：

```
- (void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation 
```

希望这可以帮助！

# facebook - 登录时 Facebook JSDK 警报？

> ID：10409100
> 
> 赞同：0
> 
> 时间：2012-05-02T06:58:59.150
> 
> 标签：facebook, facebook-javascript-sdk

我一直在阅读关于这个主题的几个答案，但我无法让它发挥作用。这就是我正在尝试的：

```
 window.fbAsyncInit = function() {
      FB.init({
        appId      : '247886858583094',
        status     : true, 
        cookie     : true,
        xfbml      : true,
        oauth      : true,
      });
       FB.Event.subscribe('auth.login',function(response) { alert('You logged in'); } );
    };
    (function(d){
       var js, id = 'facebook-jssdk'; if (d.getElementById(id)) {return;}
       js = d.createElement('script'); js.id = id; js.async = true;
       js.src = "//connect.facebook.net/en_US/all.js";
       d.getElementsByTagName('head')[0].appendChild(js);
     }(document)); 
```

我要添加什么来获得用户登录警报？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T07:02:00.213

`FB.Event.subscribe('auth.login',function(response) { alert('You logged in'); } );`

在范围内添加此代码`window.fbAsyncInit = function()`

# xslt - 使用 XSL:FO 将附件添加到 PDF

> ID：10409103
> 
> 赞同：2
> 
> 时间：2012-05-02T06:59:15.130
> 
> 标签：xslt, pdf, mime, xsl-fo, apache-fop

在 SO 的帮助下解析[内联图像](https://stackoverflow.com/questions/10372069/inline-image-data-in-xslfo-apache-fop)后，我需要整理内联附件。PDF 可以包含附件，我发现：[fo:declarations - pdf:embedded-file](http://xmlgraphics.apache.org/fop/trunk/output.html#pdf-extensions)但它又指向了一个外部文件。如何附加作为 MIME 消息一部分的文件（很可能是 BASe64）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T10:37:11.580

在最新的 FOP 版本中，您可以使用与`pdf:embedded-file`as for相同的语法`fo:external-graphic`并直接附加 base64 数据：

```
<fo:declarations>
  <pdf:embedded-file filename="myfile.pdf" src="data:application/pdf;base64,<DATA>"/>
</fo:declarations>
...
<fo:basic-link external-destination="url(embedded-file:myfile.pdf)">Embedded PDF</fo:basic-link> 
```

# c# - 更改按钮边框和禁用外观

> ID：10409105
> 
> 赞同：1
> 
> 时间：2012-05-02T06:59:17.517
> 
> 标签：c#, winforms, custom-controls

我的表单中有 2 个按钮。两者都有背景图像，平面样式为“平面”。

1.  单击`TAB`键时，当焦点位于按钮上时，我会看到内部的纯色矩形，而不是纯色边框，我希望在按钮中有虚线边框。

2.  单击按钮时，某些活动正在进行并且按钮被禁用。禁用时，按钮文本颜色变为灰色。我不希望它改变文本颜色。我相信这是Windows标准行为，但是选择按钮时如何不更改文本颜色？

我找不到任何属性来设置这些点。我应该怎么做才能实现目标。非常感谢任何帮助。

我还创建了一个自定义按钮，但无法摆脱上述问题。

我的自定义按钮的绘制方法：

```
 public partial class MyButton : Button  {

    protected override void OnPaint(PaintEventArgs pevent)
    {
        base.OnPaint(pevent);
        // Set custom fore color    
        base.ForeColor = Color.FromArgb(0, 255, 254, 255);    

        // set the same forecolor even if the button is disabled  
        if (base.Enabled == false)
        {
            base.ForeColor = Color.FromArgb(0, 255, 254, 255);
        }

    }  //OnPaint method ends
  }  // class ends 
```

**(1) 和 (2) 的更新解决方案在 onpaint()** 中添加了以下内容：

```
 private void init()
    {
        base.ForeColor = Color.FromArgb(0, 255, 254, 255);
        base.FlatAppearance.BorderColor = Color.FromArgb(0, 255, 255, 254);   // Transparent border
    }

    protected override void OnPaint(PaintEventArgs pevent)
    {
        base.OnPaint(pevent);

        if (base.ContainsFocus)
        {
            // Draw inner dotted rectangle when button is on focus
            Pen pen = new Pen(Color.Gray, 3);
            Point p = base.Location;
            pen.DashStyle = System.Drawing.Drawing2D.DashStyle.Dot;
            Rectangle rectangle = new Rectangle(4, 4, Size.Width - 8, Size.Height - 8);
            ControlPaint.DrawFocusRectangle(pevent.Graphics, rectangle);
        }

        // Draw the string to screen
        SizeF sf = pevent.Graphics.MeasureString(displayText, this.Font, this.Width);
        Point ThePoint = new Point();
        ThePoint.X = (int)((this.Width / 2) - (sf.Width / 2));
        ThePoint.Y = (int)((this.Height / 2) - (sf.Height / 2));
        //pevent.Graphics.DrawString(displayText, Font, new SolidBrush(this.ForeColor), ThePoint);
        //pevent.Graphics.DrawString(displayText, Font, new SolidBrush(Color.FromArgb(0, 255, 254, 255)), ThePoint);
        pevent.Graphics.DrawString(displayText, Font, new SolidBrush(Color.Black), ThePoint);
        //this.Text = "";
     }//OnPaint ends

    // Avoids the inner solid rectangle shown on focus
    protected override bool ShowFocusCues
    {
        get
        {
            return false;
        }
    } 
```

这成功地在我的按钮中绘制了一条虚线，指示焦点。为了摆脱默认的实线，我重写了 ShowFocusCues()。

这帮助我完全解决了 1。但是对于第 2 点，没有得到 100% 的结果。我在 MyButton 类中创建了一个属性“displayText”。在 OnPaint() 中，如果我将 ForeColor、Color.FromARGB 给 SolidBrush，它不会显示任何文本。但是如果我通过 Color.Black，那么它会接受它并以黑色显示文本。为什么它不接受前景色或自定义颜色而只接受默认颜色？对于这个简单的任务，我在哪里仍然出错。我通过在表单中​​实现 button_paint 进行了同样的尝试，但我看到了相同的结果。

知道我哪里还有错吗？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T09:15:24.100

```
 private void button3_Paint(object sender, PaintEventArgs e)
            {

                SolidBrush br = new SolidBrush(Color.Blue);
                Pen pen = new Pen(br);
                pen.Width = 3;
                pen.DashStyle = System.Drawing.Drawing2D.DashStyle.Dot;
                  // to draw left border
                e.Graphics.DrawLine(pen, new Point(0, 0), new Point(0, this.button3.Width));
                SolidBrush drawBrush = new SolidBrush(ForeColor); //Use the ForeColor property
                // Draw string to screen.
                e.Graphics.DrawString("Sample", Font, drawBrush, 5f, 3f);
                this.button3.Text = "";
    } 
```

# php - 如何获取用户的浏览器名称并将其作为类附加到标记

> ID：10409115
> 
> 赞同：1
> 
> 时间：2012-05-02T06:59:54.093
> 
> 标签：php, concrete5

我正在为 Concret 5 做一个主题，但我不确定 Concrete 5 中是否已经有类似的解决方案来解决我的问题。

我想将用户的浏览器名称附加到我的后面，`<body>`以便稍后通过 css 定位它们

示例 PHP 应如何将名称呈现给我的 body 标记。

```
<body class="ie5" >
or
<body class="safari" > 
```

**稍后我将使用的 CSS 示例**

```
body.ie div#id { background: #ccc }
body.safari div#id { font-size: 15px; } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T07:56:25.290

根据您之前未提出的其他要求

用于获取所有浏览器的名称

```
 $u_agent = $_SERVER['HTTP_USER_AGENT'];
        $ub = '';
        if(preg_match('/MSIE/i',$u_agent))
        {
            $ub = "Internet Explorer";
        }
        elseif(preg_match('/Firefox/i',$u_agent))
        {
            $ub = "Mozilla Firefox";
        }
        elseif(preg_match('/Safari/i',$u_agent))
        {
            $ub = "Apple Safari";
        }
        elseif(preg_match('/Chrome/i',$u_agent))
        {
            $ub = "Google Chrome";
        }
        elseif(preg_match('/Flock/i',$u_agent))
         {
            $ub = "Flock";
        }
        elseif(preg_match('/Opera/i',$u_agent))
        {
            $ub = "Opera";
        }
        elseif(preg_match('/Netscape/i',$u_agent))
        {
            $ub = "Netscape";
        } 
```

现在您可以显示浏览器名称

```
<body class="'. $ub ." > 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T07:05:17.457

```
$u_agent = $_SERVER['HTTP_USER_AGENT']; // get the current browser name

// for safari 
if(preg_match('/Safari/i',$u_agent)) // then check if the browser is safari 
        {
           echo "body.safari div#id { font-size: 15px; }"; // then apply your class here

        }

// for IE
if(preg_match('/MSIE/i',$u_agent))
        {
            echo "body.ie div#id { background: #ccc }";
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T07:06:10.150

您可以使用变量`$_SERVER['HTTP_USER_AGENT']`：

[http://php.net/manual/en/reserved.variables.server.php](http://php.net/manual/en/reserved.variables.server.php)

```
<?php
echo $_SERVER['HTTP_USER_AGENT'];
?> 
```

Firefox 的示例值为：`Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7) Gecko/20040803 Firefox/0.9.3`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T07:17:26.277

```
<?php $agent=$_SERVER['HTTP_USER_AGENT']?> 
```

然后在 HTML 中：

```
<html>
    <head>
    </head>
    <body class="<?php echo $agent?>">
    </body>
</html> 
```

然后只需`CSS`为每个浏览器名称/类型设置您的

# ipad - Xcode 4.3.2 上的 uipopover 冻结问题

> ID：10409116
> 
> 赞同：0
> 
> 时间：2012-05-02T06:59:56.330
> 
> 标签：ipad, freeze, xcode4.3, uipopover

你好我只是想从一个矩形按钮做一个简单的uipopover。在以前的 Xcode (4.2) 中，我可以毫无问题地运行它，但是当我尝试在 Xcode 4.3.2 iPad 模拟器上运行此代码时，当我按下 rect 按钮时它会冻结/挂起。谁能帮我？这是我的代码

在头文件中：

```
@interface popViewViewController : UIViewController <UIPopoverControllerDelegate> {

}

-(IBAction)showPop:(id)sender;

@end 
```

实施文件：

```
#import "popViewViewController.h"
#import "infoView.h"

@interface popViewViewController ()

@end

@implementation popViewViewController

-(IBAction)showPop:(id)sender {

    infoView *infoview = [[infoView alloc] init];
    UIPopoverController *pop = [[UIPopoverController alloc] initWithContentViewController:infoview];
    [pop setDelegate:self];
    [pop presentPopoverFromRect:[sender bounds] inView:self.view permittedArrowDirections:UIPopoverArrowDirectionUnknown animated:YES];
    [pop setPopoverContentSize:CGSizeMake(300, 200)];

} 
```

这是错误显示的地方：

```
#import "popViewAppDelegate.h"

int main(int argc, char *argv[])
{
    @autoreleasepool {
        return UIApplicationMain(argc, argv, nil, NSStringFromClass([popViewAppDelegate class]));
    }
} 
```

“线程 1：信号 SIGABRT”

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T17:06:43.533

如果这里的帮助是 infoView 控制器：

信息视图.h：

```
#import <UIKit/UIKit.h>

@interface infoView : UIViewController

@end 
```

信息视图.m：

```
#import "infoView.h"

@interface infoView ()

@end

@implementation infoView

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T18:20:38.927

显然，问题不在我预期的 InfoView 中。一个问题，你在使用ARC吗？如果是这样，请尝试将 popovercontroller 保持为强属性。对此的可能解释是，在 ARC 中，弹出框将在离开方法时自动释放。如果您不使用 ARC，我没有任何其他线索，抱歉。

# java - 带有 AudioEffect 的 Android MediaPlayer：出现错误 (-22,0)

> ID：10409122
> 
> 赞同：8
> 
> 时间：2012-05-02T07:00:26.837
> 
> 标签：java, android, audio, android-mediaplayer, audioeffect

好吧，这就是我的要求..

**我有一个 WAV 文件，我想打开它，添加一些效果，然后播放。**

我正在使用[MediaPlayer](http://developer.android.com/reference/android/media/MediaPlayer.html)播放文件，并使用[PresetReverb](http://developer.android.com/reference/android/media/audiofx/PresetReverb.html)添加一些效果。

这是我的代码

```
public void playSound(){
   String fullPath = MainActivity.this.filePath + "tmpaudio.wav";

   final MediaPlayer player = new MediaPlayer();
   player.setDataSource(this, Uri.parse(fullPath));

   PresetReverb pReverb = new PresetReverb(0,player.getAudioSessionId());
   pReverb.setPreset(PresetReverb.PRESET_LARGEROOM);
   pReverb.setEnabled(true);
   player.attachAuxEffect(eReverb.getId());
   player.setAuxEffectSendLevel(1.0f);

   //prepare for playback
   player.prepare();

   // Media prepared listener
   player.setOnPreparedListener(new MediaPlayer.OnPreparedListener() {
      public void onPrepared(MediaPlayer mp) {
         //play
         player.start();
      } 
   });
} 
```

当我运行此代码时，我会登录 logcat（我没有记录。）

> 05-02 12:02:42.356: E/MediaPlayer(17250): 错误 (-22,0)

但是当我评论这些行时

```
PresetReverb pReverb = new PresetReverb(0,player.getAudioSessionId());
pReverb.setPreset(PresetReverb.PRESET_LARGEROOM);
pReverb.setEnabled(true);
player.attachAuxEffect(eReverb.getId());
player.setAuxEffectSendLevel(1.0f); 
```

MediaPlayer 正在成功播放文件。所以我的 WAV 文件没有问题。

有点失望，我尝试了[EnvironmentalReverb](http://developer.android.com/reference/android/media/audiofx/EnvironmentalReverb.html)，而不是 PresetReverb，

```
EnvironmentalReverb eReverb = new EnvironmentalReverb(1, player.getAudioSessionId());
eReverb.setDecayHFRatio((short) 1000);
eReverb.setDecayTime(10000);
eReverb.setDensity((short) 1000);
eReverb.setDiffusion((short) 1000);
eReverb.setReverbLevel((short) -1000);
eReverb.setEnabled(true);
player.attachAuxEffect(eReverb.getId());
player.setAuxEffectSendLevel(1.0f); 
```

我也得到了同样的错误（错误（-22,0））。

因此，要么我遗漏了一些如此明显的东西，要么[AudioEffect](http://developer.android.com/reference/android/media/audiofx/AudioEffect.html)系列类（在文档或 api 本身中）存在一些问题。任何人都可以解释一下吗？

**编辑：**我忘了补充，当我调试代码时，错误被记录下来

```
 player.start(); 
```

被执行。在发布上面的代码段之前，我已经删除了异常处理部分。但我很肯定，执行时没有发现异常。

**再次编辑：**

从[这个](https://github.com/android/platform_external_opencore/blob/master/pvmi/pvmf/include/pvmf_return_codes.h)链接我了解到错误 -22 是 PVMFErrLicenseRequiredPreviewAvailable

```
/*
 Error due to the lack of a valid license for the content.  However
 a preview is available.
 */
const PVMFStatus PVMFErrLicenseRequiredPreviewAvailable = (-22); 
```

我用 PVMFErrLicenseRequiredPreviewAvailable 搜索了一下，得到了[这个](http://www.scribd.com/doc/69085536/76/Preview-of-DRM-Content-without-a-Valid-License-Available)文件。在第 87 页

> **14.10.5 没有有效许可的 DRM 内容预览**
> 
> 第 14.10.3 节中涵盖的场景的一个变体是没有有效许可证来完整播放一段内容，但可以预览的情况。这种情况可能是最初分发内容的常用方式，以便消费者在决定购买完整许可证之前可以预览它。在这种情况下，Init() 方法将返回代码 PVMFErrLicenseRequiredPreviewAvailable，这表明完整播放需要许可证，但预览可用。为了播放预览，应用程序必须删除当前源，然后将其添加回来，并在本地数据源上设置一个标志以指示预览模式。

现在我播放的 WAV 文件是由我使用 android SDK 本身中的 SpeechToText 工具生成的。我不知道播放此文件的许可证是什么。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-02T11:37:29.687

好吧，我终于让它工作了。我重新阅读了文档，使用了代码，突然一切都正常了。这些是我的发现，以防将来对任何人有所帮助。

# 在 PresetReverb 的情况下

在 presetReverb 文档中

> PresetReverb 是一种输出混合辅助效果，**应该在 Audio session 0 上创建**。**为了将 MediaPlayer 或 AudioTrack 馈入此效果，它们必须显式附加到它，并且必须指定发送级别**。在将其附加到 MediaPlayer 或 AudioTrack 时，使用 getId() 方法返回的效果 ID 来指定此特定效果。

说的是

```
PresetReverb pReverb = new PresetReverb(0,player.getAudioSessionId()); <== error 
```

不允许。您只能使用全局音频会话 0 来构造 PresetReverb。

```
PresetReverb pReverb  = new PresetReverb(1,0); <== correct 
```

现在我们可以使用 MediaPlayer 或 AudioTrack 附加它

```
player.attachAuxEffect(pReverb.getId());
player.setAuxEffectSendLevel(1.0f); 
```

我完整的 PresetReverb 代码是

```
PresetReverb pReverb    = new PresetReverb(1,0);
player.attachAuxEffect(pReverb.getId());
pReverb.setPreset(PresetReverb.PRESET_LARGEROOM);
pReverb.setEnabled(true);
player.setAuxEffectSendLevel(1.0f); 
```

**注意：**如果您正在寻找良好的混响效果或回声，最好使用 EnvironmentalReverb。我对 PresetReverb 的表现有些失望。

# 在环境混响的情况下

来自 EnvironmentalReverb 的文档

> **EnvironmentalReverb 是一种输出混合辅助效果，应在音频会话 0 上创建。为了将 MediaPlayer 或 AudioTrack 馈入此效果，它们必须显式附加到它，并且必须指定发送级别**。在将其附加到 MediaPlayer 或 AudioTrack 时，使用 getId() 方法返回的效果 ID 来指定此特定效果。

完全像 PresetReverb，但是当我写

```
Log.e("DEBUG","sessionId : " + player.getAudioSessionId()); <== printed "454"
EnvironmentalReverb  eReverb 
             = new EnvironmentalReverb(0,player.getAudioSessionId()); //should be error as per documentation
//player.attachAuxEffect(eReverb.getId());   <== Yes this one was commented 
```

没有错误，我得到了很好的混响效果和回声。所以这似乎是文档中的一个错误。此外，当我们将播放器的会话 ID 传递给构造函数（player.getAudioSessionId()）时，似乎不需要将播放器与 EnvironmentalReverb 实例关联。奇怪的..

为了完整起见，这也正如文档所说的那样工作。

```
EnvironmentalReverb  eReverb 
             = new EnvironmentalReverb(0,0); 
player.attachAuxEffect(eReverb.getId());     <== No,not comment this one 
```

# 对于其他 AudioEffect 儿童（均衡器、BassBoost、虚拟器）

这些不是我问题的一部分。但对于所有在未来看到这一点的人..

> 注意：不推荐使用会话 0 将插入效果（均衡器、低音增强、虚拟器）附加到全局音频输出混音。

见[文档](http://developer.android.com/reference/android/media/audiofx/AudioEffect.html)

# 关于错误 (-22,0)

好吧，公平地说，这不是一个信息丰富的错误消息。我不知道为什么当我们搞砸音频会话时会出现**无效许可证错误。**无论如何，当我更正音频会话参数时，此错误消失了。这是我知道的全部。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T12:26:52.530

我遇到了同样的问题，要使用音频会话 0，您必须使用权限 MODIFY_AUDIO_SETTINGS

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-24T21:23:17.897

这行从本质上解决了其中一个问题，但它仍然需要权限。

```
PresetReverb pReverb = new PresetReverb(1,0); 
```

因此，将以下行添加到您的 AndroidManifest.xml 实际上解决了根本问题：

```
<uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" /> 
```

哦，您还需要设置 PresetReverb 并将其附加到您的 AudioTrack 以**在**执行 AudioTrack.write() 和 AudioTrack.play() 之前发生。

# c - Android使用C（ndk）从资产文件夹中读取文本文件

> ID：10409125
> 
> 赞同：10
> 
> 时间：2012-05-02T07:00:33.757
> 
> 标签：c, encryption, android-ndk

我需要从android中的asset文件夹中读取文本文件，通过互联网搜索我发现从android 2.3开始就有asset_manager api。因为我只针对平板设备，所以这很有用。但由于我不是 C 语言专家，我无法找到任何关于如何使用文件描述符读取/写入文件的示例。我发现了很多使用 FILE* （文件指针）的例子

> 我的目标是从资产文件夹中解密一个 js 文件，该文件使用 C 加密（用于保护代码），因为如果最终用户反编译了我的 apk，js 代码是可见的。因为资产文件夹在 zip 文件中，所以可以这样做吗？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-05-03T09:03:09.627

这是我使用asset_manager ndk lib从android assets文件夹中读取文件的代码

```
 AAssetManager* mgr = AAssetManager_fromJava(env, assetManager);
    AAsset* asset = AAssetManager_open(mgr, (const char *) js, AASSET_MODE_UNKNOWN);
    if (NULL == asset) {
        __android_log_print(ANDROID_LOG_ERROR, NF_LOG_TAG, "_ASSET_NOT_FOUND_");
        return JNI_FALSE;
    }
    long size = AAsset_getLength(asset);
    char* buffer = (char*) malloc (sizeof(char)*size);
    AAsset_read (asset,buffer,size);
    __android_log_print(ANDROID_LOG_ERROR, NF_LOG_TAG, buffer);
    AAsset_close(asset); 
```

在我的 Android.mk 中添加了以下行

```
# for native asset manager
LOCAL_LDLIBS    += -landroid 
```

并且不要忘记源文件中的包含

```
#include <android/asset_manager.h> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T07:07:31.580

实际上 FILE* 和 'int' 描述符是等价的， fread/fwrite/fopen/fclose 是 open/close/read/write 函数的对应物（但是这些函数*不*等价，后者是非阻塞的）。

要从 'FILE*' 中获取 'int'，您可以使用

```
int fileno(FILE* f); 
```

在标题中并做相反的事情，你可以使用 fdopen()

```
FILE *fdopen(int fd, const char *mode); 
```

因此，要么使用 FILE* 将所有内容替换为 int，要么只取其中一个样本并在文件读取之前插入此转换代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-02T07:12:48.870

它与常规的 fread/fseek 函数非常相似。这是读取函数声明：

```
ssize_t read(int fd, void *buf, size_t count); 
```

`fd`它从文件描述符读取到`buf`缓冲区`count`字节。如果您考虑 fread，则不要：

```
fread(buf, count, size, file); 
```

你会打电话给：

```
read(fd, buf, count*size); 
```

就是这样。就是这么简单。

求也类似。只需查找函数声明并阅读参数名称/描述。这将是显而易见的。

# android - bufferedreader 在真实设备上落后了一行

> ID：10409127
> 
> 赞同：0
> 
> 时间：2012-05-02T07:00:38.963
> 
> 标签：android, sockets, bufferedreader

我有一个套接字客户端，用于从服务器接收数据。在模拟器中一切正常，但是在我的 android 上，消息总是滞后一个，因此我的 GUI 没有用新数据更新。

涉及的代码（客户端在 Asynctask 中运行）

```
@Override
protected Boolean doInBackground(Void... params) { //This runs on a different thread
    try {
        Log.i("AsyncTask", "doInBackground: Creating socket");
        SocketAddress sockaddr = new InetSocketAddress("192.168.x.xxx", 9090);
        nsocket = new Socket();
        nsocket.connect(sockaddr, 5000); //10 second connection timeout
        if (nsocket.isConnected()) { 

            in = new BufferedReader(new InputStreamReader(nsocket.getInputStream()));
            wr = new BufferedWriter(new OutputStreamWriter(nsocket.getOutputStream()));
            Log.i("KMC.AsyncTask", "doInBackground: Socket created, streams assigned");
            sockState = true;

            String inputLine = "";
            while ((inputLine = in.readLine()) != null) {
                result = inputLine.replace("\\","");
                Log.d("KMC", "Got some data: " + result);
                this.publishProgress(1);
            }
        }
    } catch (IOException e) {
        e.printStackTrace();
        Log.i("KMC.AsyncTask", "doInBackground: IOException");
    } catch (Exception e) {
        e.printStackTrace();
        Log.i("KMC.AsyncTask", "doInBackground: Exception");
    } finally {
        try {
            nis.close();
            wr.close();
            nsocket.close();
        } catch (IOException e) {
            e.printStackTrace();
        } catch (Exception e) {
            e.printStackTrace();
        }
        Log.i("KMC.AsyncTask", "doInBackground: Finished");
    }
    return true;
}
protected void onProgressUpdate(Integer... values) {
      try {
            JSONObject jObject = new JSONObject(result.substring(1, result.length()-1));
            if(jObject.getString("type").equals("event")){
                EventHandler.newEvent(jObject.getString("name"), jObject.getJSONArray("data"));
            }
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
} 
```

我试图在谷歌上找到解决方案，但我找不到任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T17:48:29.780

解决方案：

我将服务器更改为发送双“\r\n”，以某种方式解决了它。

# java - java字符串中的内存管理？

> ID：10409130
> 
> 赞同：1
> 
> 时间：2012-05-02T07:01:00.637
> 
> 标签：java

我创建了字符串对象，如下所示

情况1：

```
 String s1="mystring";//Address location is 1000
  String s1="yourstring";
  String s2="mystring"; 
```

案例二：

```
 String s1=new String("mystring");//Address location is 1000
  String s1=new String("yourstring");
  String s2=new String("mystring"); 
```

与[参考](http://www.javaclass.info/classes/java-lang-string/java-string/java-string-examples-code-how-to.php)。

据我所知，这些字符串存储在具有特定内存位置的 Case1 的字符串常量池中，类似地，在堆内存中创建 case2 对象。如果我们将相同或不同的字符串分配给 String 对象，这些内存将如何被垃圾收集器管理和释放。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T07:05:22.997

如果你来自 C++，一切都在堆上。此外，字符串在 Java 中是不可变的（创建后无法更改）。由于有垃圾收集器，因此不需要显式释放任何内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T07:09:09.723

应用程序将取决于最初分配给它的当前内存。如果您创建一个新字符串，它将分配一个具有字符串大小的内存。如果没有足够的内存，它将在您的堆已用完时抛出错误.它是垃圾收集器，一旦对象没有任何引用，它就会释放内存。您无法控制它。

但是目前，您当前的代码不会在创建 String 时出现错误：)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T07:28:32.173

就我对 Java 的理解而言，在第一种形式中（即使用 = 运算符），字符串是从 Java 维护的字符串池中分配的。因此，在第一种情况下，当您分配`"mystring"`给变量时，它被分配了对最初创建`s2`时存在的相同字符串的引用。`s1`

但是在使用构造函数的情况下，您会创建一个全新的 String 对象实例。所以现在有三个对三个不同字符串的引用。

就内存而言，Java 将垃圾收集器实现为守护线程，只要 JVM 处于运行状态，它就会运行。它将删除所有没有引用的对象。所以在第一种情况下，不会有 Garbage Collection，但在第二种情况下，一个字符串会被 Garbage Collected。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T07:39:20.470

我认为您正在考虑字符串实习。但是，由于这两种情况都涉及字符串文字，因此您将在这两种情况下看到字符串实习。案例 2 肯定不是案例 1 的内存优化。

看看一个类似的问题，[Java 中表达式“new String(...)”的目的是什么？](https://stackoverflow.com/questions/390703/what-is-the-purpose-of-the-expression-new-string-in-java)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-02T07:10:08.687

字符串存储在 Case1（文字字符串）的字符串常量池中。在情况 2 中，即使您使用新对象创建字符串，也会检查对象的内容。如果它等于文字字符串对象的内容，那么对象引用将指向文字字符串对象。

垃圾收集：如果没有对象引用指向字符串文字对象“mystring”（在您的情况下），那么它不会仍然被垃圾收集，这些对象将一直保留到程序生命周期。程序结束时字符串字面量对象将被删除。对于其他字符串对象，即使用关键字new，当没有对象引用指向该对象时，这些对象将被垃圾回收。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-10T13:26:42.447

与另一篇文章类似 - 这将为您提供更好的想法和说明[String s = "something"; 之间的区别是什么？和 String s = new String("something");](https://stackoverflow.com/questions/8049451/whats-the-difference-between-string-s-something-and-string-s-new-string)

# php - php将位字符串保存到文件

> ID：10409131
> 
> 赞同：0
> 
> 时间：2012-05-02T07:01:07.803
> 
> 标签：php, file, binary

我正在尝试将一串位保存到二进制文件中。

这是我的字符串

```
01001001010011100101000001010101010101000011000100000000000000000100100101001110010100000101010101010100001100100000000000000000010010010100111001010000010101010101010000110011000000000000000001001001010011100101000001010101010101000011010000000000000000000100100101001110010100000101010101010100001101010000000000000000010010010100111001010000010101010101010000110110000000000000000001001001010011100101000001010101010101000011011100000000000000000100100101001110010100000101010101010100001110000000000000000000010100100100010101001100010000010101100100110001000000000000000001010010010001010100110001000001010110010011001000000000000000000101001001000101010011000100000101011001001100110000000000000000010100100100010101001100010000010101100100110100000000000000000001010010010001010100110001000001010110010011010100000000000000000101001001000101010011000100000101011001001101100000000000000000010100100100010101001100010000010101100100110111000000000000000001010010010001010100110001000001010110010011100000000000000000000011000000000000001100000000000000110000000000000011000000000000001100000000000000110000000000000011000000000000001100000000000000110001001100000011000100110000001100010011000000110001001100000011000100110000001100010011000000110001001100000011000100110000001011010011001100101101001100110010110100110011001011010011001100101101001100110010110100110011001011010011001100101101001100110011001100110010001100110011001000110011001100100011001100110010001100110011001000110011001100100011001100110010001100110011001000110000000000000011000000000000001100000000000000110000000000000011000000000000001100000000000000110000000000000011000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000110000 
```

这是我用来编写它的代码。

```
$fp = fopen('io2454929593', 'wb');
fwrite($fp, pack('C*', $bytes));
fclose($fp); 
```

我得到的只是一个 1 字节长的文件，但它应该更长。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T07:51:25.653

你可以试试这个：

```
$s = '0100100101001110'; // your binary string

$chars = array_map('bindec', str_split($s, 8));
array_unshift($chars, 'C*');
echo call_user_func_array('pack', $chars); 
```

**免责声明**：这段代码只是说明了`pack`应该如何调用；它不应该用于大字符串。

# asp.net-mvc - 需要一种矩阵来输入数据

> ID：10409137
> 
> 赞同：1
> 
> 时间：2012-05-02T07:01:31.927
> 
> 标签：asp.net-mvc

我需要为从 A 点到 B 点所需的天数建立某种矩阵。

这应该是这样的：

![在此处输入图像描述](../Images/522229275089f18c961d42e51104737d.png)

每个起点/终点都存储在一个表中（名为 Stop）：

```
public class Stop
{
    [Key]
    public int StopID { get; set; }
    public string StopCode { get; set; }
} 
```

矩阵的数据应该存储在另一个表中：

```
public class Matrix
{
    [Key]
    public int MatrixID { get; set; }
    public int OriginStopID { get; set; }
    public int DestinationStopID { get; set; }
    public int NumberOfDays { get; set; }
} 
```

我需要一个视图来允许用户在这个矩阵中输入数据。**我怎样才能做到这一点？**我没有任何想法。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T07:44:37.183

您可以使用基于两个视图模型的复杂模型来创建表单或使用基于数组的简单模型。

这是可以做什么的非常简单的示例（如果需要，我可以使用两个 ViewModel 制作更复杂的示例）。

视图模型：

```
public class TestViewModel
{
    public int[][] Matrix { get; set; }

    public TestViewModel()
    {            
    }

    public TestViewModel(string i)
    {
        Matrix = new int[4][] { new int[4] { 1, 2, 3, 4 }, new int[4] { 1, 2, 3, 4 }, new int[4] { 1, 2, 3, 4 }, new int[4] { 1, 2, 3, 4 } };
    }
} 
```

控制器：

```
 public ActionResult Test()
    {
        return View(new TestViewModel("sa"));
    }

    [HttpPost]
    public ActionResult Test(TestViewModel model)
    {
        //some business logic goes here
        //ViewModel to Model convertion goes here
        return View(model);
    } 
```

看法：

```
@model TestViewModel
@using (Html.BeginForm())
{
    <div class="form_block">
        @for (int i = 0; i<Model.Matrix.Length;i++)
        {
            for (int j = 0; j<Model.Matrix[i].Length;j++)
            {
                    @Html.TextBoxFor(x=>x.Matrix[i][j])
            }
        }
    </div>
    <div class="submit_block">
        <input type="submit" value="Сохранить изменения" />
    </div>
} 
```

# ruby - 从 STDOUT 流式传输数据

> ID：10409140
> 
> 赞同：5
> 
> 时间：2012-05-02T07:01:41.290
> 
> 标签：ruby

所以我有以下代码：

### 读者.rb

```
require 'open4'

def streamer(stdout)
  begin
    loop do
      data = stdout.read_nonblock(8)
      print data
    end
  rescue Errno::EAGAIN
    retry
  rescue EOFError
    puts 'End of file'
  end
end
pid, stdin, stdout, stderr = Open4::popen4 "ruby threader.rb"
stdout.fcntl(Fcntl::F_SETFL, Fcntl::O_NONBLOCK)
streamer(stdout) 
```

### 线程器.rb

```
10.times do
  $stdout.puts "test"
  sleep 1
end 
```

一个 ruby​​ 脚本是一个简单的微调器，它每秒都会输出到标准输出。

另一个用于运行该脚本，我想在数据进入时捕获它。所以我希望流从标准输出非阻塞读取。

我似乎无法让它发挥作用。我想我`O_NONBLOCK`正确设置了 fctnl 标志，但也许我没有。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T07:41:18.867

您的代码运行良好。你只缺少一件，那就是刷新你的输出缓冲区`threader`。

问题是 STDOUT 几乎总是被缓冲，在这种情况下，除非明确告知，否则缓冲区不会被刷新，直到线程退出之后。

这就是为什么读者什么都看不到的原因，然后当线程退出并且 STDOUT 被刷新时，它会突然得到一个输出。

所以这个测试的简单修复是：

```
10.times do
  $stdout.puts "test"
  $stdout.flush
  sleep 1
end 
```

但是请注意，由于您正在使用 NONBLOCK 阅读，您的阅读器将忙于循环（！）消耗 100% 的 CPU。为了防止busylooping，您真正应该做的是在读取之前等待传入数据。

这可以通过以下方式完成[`IO.select`](http://www.ruby-doc.org/core-1.9.3/IO.html#method-c-select)：

```
...
loop do
  IO.select([stdout]) # <- waits for data (any data, even 1 byte)
  data = stdout.read_nonblock(8)
  print data
end  
... 
```

# google-places-api - 循环中的 OVER_QUERY_LIMIT

> ID：10409141
> 
> 赞同：3
> 
> 时间：2012-05-02T07:01:44.127
> 
> 标签：google-places-api

使用 Google Places Javascript 库时，我收到了 OVER_QUERY_LIMIT 状态代码。我在我的帐户上启用了计费功能，因此并不是我实际上达到了我提出的地点请求数量的限制，而是我正在使用 Javascript 库并循环浏览数百个地点搜索请求。问题是，这会导致 OVER_QUERY_LIMIT 状态从搜索中返回，除非在调试时我减慢了循环速度。

有趣的是，这只发生在 JS 库中，而不是直接使用 API 时。人们可以推荐什么来解决这个问题，而不是放慢循环速度？

编辑：有关这两种情况的更多信息

1.  （问题）循环几十个点，每次通过官方Places Javascript API发出一个places请求
2.  （有效的）在后端使用 node.js 直接向[https://developers.google.com/maps/documentation/places/](https://developers.google.com/maps/documentation/places/)中记录的地点搜索端点发出请求，然后将单个响应推送到客户端。

谢谢，丹

# database - Visual Basic 2008 - 与数据库的交互（读/写数据库表和字段）

> ID：10409142
> 
> 赞同：1
> 
> 时间：2012-05-02T07:01:46.237
> 
> 标签：database, vb.net, visual-studio-2008, database-connection

使用 Visual Basic 2008 express，我想访问一个包含 2 个表的数据库，一个表（useraccounts）包含用户和密码和 ID，另一个表包含信息（链接表）

基本上我想做一个登录表单，它从表 useraccounts 中读取并能够创建将写入数据库的新用户。另一个是我有一个带有许多链接的表单，我想将这些链接存储在表'linktable'中，它基本上只是从表中获取链接并直接到使用它的表单。我曾尝试使用 Visual Basic 拥有的 access 或 .mdf 文件，但我都找不到任何答案。

**我不介意对数据库使用访问权限或 .mdf 文件，我希望它能够正常工作**

总的来说，我想得到：

*   从数据库表“useraccounts”读取并具有新用户功能的登录表单
*   只是一个可以在单击保存按钮后读取/写入数据库的表单

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T08:29:53.083

您可以尝试以下文章来帮助您入门

[带有 ADO.NET、DAL 和存储过程的 CRUD](http://srikanthtechnologies.com/blog/dotnet/adonetcrud2.aspx)

# javascript - 添加或减去 $(window).scrollTop + $(window).height == $(document).height() - 滚动到页面底部

> ID：10409143
> 
> 赞同：3
> 
> 时间：2012-05-02T07:01:47.270
> 
> 标签：javascript, jquery

当用户到达页面底部时，我正在运行一个 if 函数，就像这样

```
if($(window).scrollTop() + $(window).height() == $(document).height()) {} 
```

但是我希望它在底部之前稍微运行 - 大约 300px 之前。

我试过了

```
if($(window).scrollTop() + $(window).height() + 300 == $(document).height()) {} 
```

和

```
if($(window).scrollTop() + $(window).height() == $(document).height() -300) {} 
```

和所有其他变化都无济于事。

我也试过把变量放进去。

```
var plusheight = 300;

if($(window).scrollTop() + $(window).height() + plusheight == $(document).height()) {}
if($(window).scrollTop() + $(window).height() + $plusheight == $(document).height()) {}
if($(window).scrollTop() + $(window).height() + "plusheight" == $(document).height()) {} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-02T07:07:13.183

使用不等式。用户的滚动顶部很可能会跳过您要比较的确切值。

```
if($(window).scrollTop() + $(window).height() >= $(document).height() -300) {} 
```

# java - 黄瓜测试java例子？

> ID：10409146
> 
> 赞同：2
> 
> 时间：2012-05-02T07:01:55.583
> 
> 标签：java, ruby, cucumber

我想尝试一个带有黄瓜测试的示例应用程序，黄瓜测试可以只用 ruby​​ 完成，也可以用 java 完成？请帮我举个例子。

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T08:43:04.770

您可以查看我们在我们的地方编写的一个简单示例来演示 cucumber-jvm：[https ://github.com/gphilipp/mowitnow-tdd](https://github.com/gphilipp/mowitnow-tdd)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T13:31:43.390

这个来自 Cucumber-jvm 项目[https://github.com/cucumber/cucumber-jvm/tree/master/examples](https://github.com/cucumber/cucumber-jvm/tree/master/examples)。Cucumber-JVM 是黄瓜的 Java 端口。可以在项目页面[https://github.com/cucumber/cucumber-jvm](https://github.com/cucumber/cucumber-jvm)上找到配置信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-11-04T06:19:46.240

首先，从 Cucumber 团队克隆 java-skeleton 项目： [https ://github.com/cucumber/cucumber-java-skeleton](https://github.com/cucumber/cucumber-java-skeleton)

这专门作为一个入门项目，应该开箱即用。一旦你有了一个工作项目，扩展它来包含你需要的东西就容易多了。您可以使用 Maven 构建项目：

```
mvn clean install 
```

如果您希望从头开始，请检查 pom.xml 中是否有您需要的依赖项（至少 cucumber-java，可能还有 cucumber-junit 和 junit 本身来运行您的测试）。

创建一个 src/test/java 文件夹，您将在其中实施步骤定义 创建一个 src/test/resources 文件夹，您将在其中创建 .feature 文件

如果您使用的是 IDE（如 IntelliJ），则可能需要一个 Cucumber 插件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-12T11:53:06.420

您需要 ListItTest.java 来测试特定的集成测试，然后您需要一个功能文件、定义文件和一个示例响应 json 文件。

ListItTest.java

```
@RunWith(Cucumber.class)
@CucumberOptions(
        glue = {"com.abcd.cucumber.steps"},
        features = {"classpath:features/member/member-document.feature"},
        plugin = {"pretty"}
)
public class ListItTest {

} 
```

成员密码.feature

```
# Change password of member
# Tags : Member's change password

Feature: Change password of member
  Scenario: Change password of a registered member
    When member enters oldPassword newPassword and confirmPassword
    Then member password will be changed 
```

会员密码.json

```
{
  "$schema": "http://json-schema.org/draft-04/schema#",
  "type": "object",
  "properties": {
    "status": {
      "type": "boolean"
    },
    "sessionExpired": {
      "type": "boolean"
    },
    "messages": {
      "type": "array",
      "items": [
        {
          "type": "object",
          "properties": {
            "shortMessage": {
              "type": "string"
            },
            "longMessage": {
              "type": "string"
            }
          },
          "required": [
            "shortMessage",
            "longMessage"
          ]
        }
      ]
    }
  },
  "required": [
    "status",
    "sessionExpired",
    "messages"
  ]
} 
```

MemberPasswordDef.java

```
public class MemberPasswordDef {
    private LoginModel loginModel = new LoginModel();
    private Logger logger = Logger.getLogger(MemberPasswordDef.class);
    PasswordChangeParams passwordChangeParams = new PasswordChangeParams();

@When("member enters oldPassword newPassword and confirmPassword")
public void member_enters_oldPassword_newPassword_and_confirmPassword() {
    passwordChangeParams.setOldPassword("1234");
    passwordChangeParams.setNewPassword("1212");
    passwordChangeParams.setConfirmPassword("1212");
    loginModel.setUsername("test");
    loginModel.setPassword("9999");
}

@Then("member password will be changed")
public void member_password_will_be_changed() {
    try {
        ObjectMapper mapper = new ObjectMapper();
        String jsonString = mapper.writeValueAsString(passwordChangeParams);
        RestAssured.given()
                .header(new Header("content-type", "application/json"))
                .auth().preemptive().basic(loginModel.getUsername(), loginModel.getPassword())
                .when()
                .body(jsonString)
                .put(URL)
                .then()
                .assertThat()
                .body(matchesJsonSchemaInClasspath("schemas/members/member-password.json"));

    }
    catch(Exception e) {
        Assert.assertEquals(false, true);
        logger.error(e.getMessage(), e);
    }
   }
 } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-12T11:21:32.033

我对这个问题有点晚了，但我认为这个问题被问了很长时间后，值得一个更清晰的答案，因为现在有很多很好的资源可以开始使用黄瓜。在 10 分钟内开始使用黄瓜的最佳地点是以下链接：

[https://cucumber.io/docs/guides/10-minute-tutorial/](https://cucumber.io/docs/guides/10-minute-tutorial/)

如链接中所述，您可以使用 Maven 原型创建示例项目：

```
mvn archetype:generate                      \
   "-DarchetypeGroupId=io.cucumber"           \
   "-DarchetypeArtifactId=cucumber-archetype" \
   "-DarchetypeVersion=5.6.0"               \
   "-DgroupId=hellocucumber"                  \
   "-DartifactId=hellocucumber"               \
   "-Dpackage=hellocucumber"                  \
   "-Dversion=1.0.0-SNAPSHOT"                 \
   "-DinteractiveMode=false" 
```

# perl - 使用 Net::Google 时出现 404 错误

> ID：10409153
> 
> 赞同：1
> 
> 时间：2012-05-02T07:02:31.813
> 
> 标签：perl, google-api, irc

我只是在为我和我的朋友在 IRC 上编写一个简单的机器人。找到了这个模块，但由于某种原因，即使我遵循了这些示例，我也无法让它真正进行搜索。
模块可以在[这里看到。](http://search.cpan.org/dist/Net-Google/lib/Net/Google.pm)
我的代码基于的示例可以在[这里看到。](http://oreilly.com/pub/h/2756)

据我所知，我没有犯任何错误。

当我打开调试时我收到这个输出（只有在调试时得到最后一行）；

```
<p><b>404.</b> <ins>Thatâs an error.</ins>
<p>The requested URL <code>/search/beta2</code> was not found on this server.
<ins>Thatâs all we know.</ins>
404 Not Found at /usr/lib/perl5/vendor_perl/5.8.8/SOAP/Lite.pm line 3720 
```

我的代码；

```
$msg =~ s/^google//g; # Get query
my $google = Net::Google->new(key => GOOGLE_API_KEY, debug => 1); # Create search instance
my $search = $google->search(); # Build query
$search->query($msg);
$search->starts_at(0);
$search->max_results(100);
$search->filter(0);

$search->results(); # Search google
my $random = int(rand(100));
my $count = 0;

foreach my $result ( @{$search->results()})
{
    if ($count == $random)
    {
        $irc->yield(privmsg => CHANNEL, $result->title() || "No Title");
        $irc->yield(privmsg => CHANNEL, $result->URL());
    }
    $count++;
} 
```

知道为什么我会收到错误消息吗？
我有`use Net::Google;`并且`use SOAP::Lite;`我已经检查了 SOAP 目录，Lite.pm 肯定在那里......谷歌一直没有帮助，所以我有点茫然。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T07:25:39.650

```
use Google::Search;
my $search = Google::Search->Web( query => "rock" );
while ( my $result = $search->next ) 
{
    print $result->rank, " ", $result->uri, " ",$result->title."\n";
} 
```

# php - 基于异常的表单验证

> ID：10409154
> 
> 赞同：3
> 
> 时间：2012-05-02T07:02:34.827
> 
> 标签：php, exception, error-handling, fuelphp

我使用 sentry 作为我的应用程序的身份验证包，这是我注册用户的控制器方法。

```
class Controller_Auth extends \Controller_Base
{

    function action_signup($type='user')
    {
        $user = \Fieldset::forge('new_user');
        $user->add('email', 'Email', array(), array(array('required'), array('valid_email')));
        $user->add('password', 'Password', array(), array(array('required')));
        $user->add('confirm_password', 'Confirm Password', array(), array(array('match_field', 'password') ));
        $user->add('submit', '', array('value'=>'Sign Up', 'class' => 'btn', 'type'=>'submit'));

        $user->repopulate();

        if($user->validation()->run())
        {

            try
            {
                $fields = $user->validated();

                $user_id = \Sentry::user()->create(array('email'=>$fields['email'], 'password'=>$fields['password']));

                if($user_id)
                {
                    // the user was created - send email notifying user account was created
                }
                else
                {
                    // something went wrong - shouldn't really happen
                }
            }
            catch(\SentryUserException $e)
            {
                \Library_Message::set('error', $e->getMessage());
            }
            catch(\Database_Exception $e)
            {
                \Library_Message::set('error', 'Database error occured. Please try again');
            }
        }
        else
        {
            \Library_Message::set('error', $user->validation()->errors());
        }

        $this->template->set('content', $user->form(), false);
    }

} 
```

如您所见，我将验证错误和异常混为一谈，我想知道是否有办法使用异常处理所有错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-17T00:38:40.303

我建议创建一个私有方法，在错误时抛出异常以使其同质化。

```
/**
 *
 * @throws Exception
 */
private function validateUserRun($user) {
   if(!$user->validation()->run()) {
       throw new YourException(); //Use a different exception than 'Exception' please
   }
} 
```

然后在你的*try*块上调用它

```
function action_signup($type='user') { 
//...
   try {
     $this->validateUserRun($user);
     $fields = $user->validated();
     //...
   } 
   catch(\SentryUserException $e) {
            \Library_Message::set('error', $e->getMessage());
   } catch(\Database_Exception $e) {
            \Library_Message::set('error', 'Database error occured. Please try again');
   } catch (YourException $e) {
      //Here you can catch the exception
   }
//...
} 
```

# iphone - UIWebView 滚动时在顶部和底部显示白条

> ID：10409156
> 
> 赞同：3
> 
> 时间：2012-05-02T07:02:48.873
> 
> 标签：iphone, objective-c, ios, ipad

我在 UIImage 上有一个 UIWebView。当我在 UIWebView 上滚动时，会出现两个白条。1，在 iPad 窗口的最顶部（即 UIImage 的顶部，它只是一个背景图像）和 2，在 UIWebView 的顶部。UIIMage 位于 XIB 中，但 WebView 以编程方式完成，如下所示：

```
mainWebView = [[[CustomWebview alloc] initWithFrame:CGRectMake(59, 0, 650, 1024)] retain];
[(UIScrollView*)[mainWebView.subviews objectAtIndex:0] setShowsHorizontalScrollIndicator:NO];
[(UIScrollView*)[mainWebView.subviews objectAtIndex:0] setShowsVerticalScrollIndicator:NO];

[mainWebView        setOpaque:NO];
[mainWebView        setBackgroundColor:[UIColor clearColor]];
[backgroundImage    addSubview:mainWebView];
[mainWebView        setDelegate:self]; 
```

同样的模式在 iPad 底部重复出现。WebView 底部的一个白条和 UIImage 最底部的另一个白条。

查看照片和 20 秒视频：（滚动时无法截屏） ![两个白条](../Images/f48beed007ea0fdd6e36dc9772145f19.png) ![没有白条](../Images/7615d3e35db07255500ab93fac6fa38b.png)

20 秒视频：[http ://dl.dropbox.com/u/1392139/IMG_0601.MOV](http://dl.dropbox.com/u/1392139/IMG_0601.MOV)

我很想为此找到一个修复程序，已经花了很多时间在它上面，这是我最后一个要修复的错误以便发布！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T18:30:24.807

事实证明，使用 customwebview 给我带来了问题。我删除了自定义类，它解决了问题。

# shell - 使用 shell 脚本中的 cd 和 mput 命令访问失败

> ID：10409161
> 
> 赞同：0
> 
> 时间：2012-05-02T07:03:15.310
> 
> 标签：shell, cp, mv

我编写了一个 shell 脚本来备份 mysql 数据库，同时使用 lftp 连接到其他服务器并将备份传输到其他服务器

我可以使用 lftp 连接到其他服务器，但是当我使用 cp 或 mv 或 mput 命令传输文件时，它显示“访问失败 550：”错误

对于 cp 命令，它显示“未知命令：cp”

如果有人遇到这样的问题并有解决方案来解决它，请帮助我。

谢谢， Chetan Panchal

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T14:40:03.727

要将文件放在已使用 lftp 连接的服务器上，请使用“put”命令，而不是 cp 或 mv。要从服务器获取文件，请使用“get”。要一次放置多个文件，请使用“mput”或一次获取多个文件使用“mget”，尽管可能会提示您上传/下载的每个文件。

如果您仍然收到错误，请确保您有权将文件放入服务器上的目录中。

# linux - Linux Bash 脚本 - 想要在执行其他任务时在控制台上运行秒表

> ID：10409164
> 
> 赞同：2
> 
> 时间：2012-05-02T07:03:38.960
> 
> 标签：linux, bash

我一直在拉我的头发。我是 bash 脚本和参加 Linux 大学课程的新手。这不是任何任务的要求，而只是个人发展。

我正在尝试在控制台上运行秒表（显示秒表），同时获取用户输入和做其他事情。

我已经研究了这个问题好几个小时。我想我只是在搜索错误的查询。

我创建了一个刽子手游戏（你在家伙被挂之前猜单词的字母）。

那是一次很棒的学习经历。现在我想要时钟来指示已经过去了多少时间。

任何建议或相关教程的链接将不胜感激。

到目前为止，我的测试代码不起作用，只是为计时器做了一个无限循环。

```
#!/bin/bash
# timer.sh

timer ()
{
    while true
    do
    tput cup 0 0
    echo $SECONDS
    wait 1
    done
}

display ()
{
    tput cup 5 0
    echo -n "This is output from other stuff"
    read -n1 letter
    #while read -n1 letter
    #do
    tput cup 7 0

    echo -n "type any letter"
    tput cup 9 0
    echo -n "You letter is: $letter"
    if [[ "$letter" == "x" ]]
    then
        exit
    fi
    #done
}

finished ()
{
    tput clear
    echo -n "This is the end of the program"
    kill $timer_pid 
    exit
}

# Main Body

trap finished SIGINT SIGTERM
tput clear
while true
do
    timer &
    timer_pid=$!
    display 
done

exit 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T11:14:16.897

尝试更改`wait 1`为`sleep 1`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T08:34:17.447

```
#!/bin/bash
#
# display time at line begin.
#
tick () {
  t=$(date +%T)
  echo -en "\r$t > " 
  sleep 10
  tick
}
tick 
```

如果您将此作为脚本调用`./tick.sh &`，它会始终在行首打印时间，但会干扰您自己的输入。

您可以将时间整合到您的提示符中（参见 man: bash/ PROMPTING），但这不会实现时间，只是在您插入每个命令后显示新时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T07:30:04.983

由于您对 shell 脚本很熟悉，因此我提供了一个基本逻辑。此外，您编码/阅读文档的次数越多，您学到的越多，因此不提供实现。

```
Seconds=1
while true
do
    PrintWatch Seconds ## tput is an excellent option
    Seconds+=1
    Input=GetInputFromUserBlockFor_N_Seconds ## help read
    if Input == Stop
    then
        break
    fi
done 
```

# c++ - 无法通过 gdb 将观察点设置为本地向量变量

> ID：10409177
> 
> 赞同：-1
> 
> 时间：2012-05-02T07:05:10.073
> 
> 标签：c++, gdb, watchpoint

这是我要设置的代码部分：

```
void *sync(void *ptr) {
  vector<short> gen = generate_sygnal(); 
```

我用调试标志构建我的程序，这是我在 gdb 中所做的：

```
(gdb) break daemon.cxx:sync
break daemon.cxx:sync
Breakpoint 1 at 0x804d080: file /home/username/projects/armd/complex/daemon/daemon.cxx, line 160.
(gdb) watch gen
watch gen
No symbol "gen" in current context.
(gdb) run
run
Starting program: /home/username/projects/armd/complex/build/daemon/daemon 
[Thread debugging using libthread_db enabled]
Using host libthread_db library "/lib/libthread_db.so.1".
2012/05/02 11:00:32 error: Cannot open configuration file /home/username/projects/armd/complex/build/daemon/armd.conf
[New Thread 0xb7fe7b40 (LWP 4329)]
2012/05/02 11:00:32 info: Listening on port 2000
/dev/ttyS0 port opened!
[New Thread 0xb77e6b40 (LWP 4330)]
[Switching to Thread 0xb77e6b40 (LWP 4330)]
Breakpoint 1, sync (ptr=0x8055108)
    at /home/username/projects/armd/complex/daemon/daemon.cxx:160
160 void *sync(void *ptr) {
(gdb) watch gen
watch gen
No symbol "gen" in current context.
(gdb) 
```

那么如何使用 gdb 检查我的 gen 值呢？即使我需要完整的向量值堆栈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T07:27:23.673

再插入一行，`sync()`以便变量实际上在范围内（使用 GDB 的`next`命令）。

# c# - 为什么这些参数是事件的默认值？

> ID：10409181
> 
> 赞同：2
> 
> 时间：2012-05-02T07:05:18.147
> 
> 标签：c#, winforms, events

我看到以下参数在样板代码中重复了很多，但我似乎还没有使用它们？

`(object sender, EventArgs e)`

例如，如果我双击一个新按钮，则事件的方法具有这些参数，但是当我向该方法添加代码时，我不使用这些参数。

它们是什么，我什么时候使用它们？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-02T07:07:06.697

发送者是事件的发起者——因此您可能有多个按钮使用相同的点击处理程序，并且您希望禁用被点击的任何按钮，例如。当然，如果您只使用事件处理程序来订阅单个源的事件，这并不是非常有用。

`EventArgs`它本身毫无意义，因为它没有信息 - 但它被用作其他具有信息（例如键盘和鼠标信息）的类的基*类*。完全呈现它的好处是，如果您*不需要*这些额外信息，您可以创建一个事件处理程序，该处理程序可用于订阅*任何*遵循该模式的事件。例如：

```
button.Click += LogEvent;     // EventHandler delegate type
textArea.KeyDown += LogEvent; // KeyEventHandler delegate type

...

private static void LogEvent(object sender, EventArgs ignored)
{
    Control control = (Control) sender;
    Log("Event fired by " + control.Name);
} 
```

# android - 当我按下主页按钮时如何使用mediaplyer停止音乐

> ID：10409183
> 
> 赞同：0
> 
> 时间：2012-05-02T07:05:30.907
> 
> 标签：android, android-layout

嗨，我在这里做一个，我需要显示一些图像，同时我需要播放这些图像相关的声音。使用 mediaplyer 我做了一个它的 plyaing 很好，但是如果我当时点击主页按钮，我的 prblm 就在应用程序的中间音乐仍在播放。但是当用户单击主页按钮时我需要停止音乐，我尝试使用暂停（）。但它没有任何帮助我做错了......

```
 GalleryMedia .class:

    public class GalleryMedia extends Activity  implements OnItemSelectedListener{
  public boolean Visibility=true;
     Boolean  loaded = false;
     MediaPlayer intro1, intro2, intro3, intro4, intro5, intro6, intro7, intro8,
        intro9, intro10, intro11, intro12, intro13;
    /** Called when the activity is first created. */
       @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        intro1 = MediaPlayer.create(this, R.raw.babycooing05);
        intro2 = MediaPlayer.create(this, R.raw.bokstavslottet_2);
        intro3 = MediaPlayer.create(this, R.raw.bokstavslottet_3);
        intro4 = MediaPlayer.create(this, R.raw.bokstavslottet_4);
        intro5 = MediaPlayer.create(this, R.raw.bokstavslottet_5);
        intro6 = MediaPlayer.create(this, R.raw.bokstavslottet_6);
        intro7 = MediaPlayer.create(this, R.raw.bokstavslottet_7);
        intro8 = MediaPlayer.create(this, R.raw.bokstavslottet_8);
        intro9 = MediaPlayer.create(this, R.raw.bokstavslottet_9);
        intro10 = MediaPlayer.create(this, R.raw.bokstavslottet_10);
        intro11 = MediaPlayer.create(this, R.raw.bokstavslottet_11);
        intro12 = MediaPlayer.create(this, R.raw.bokstavslottet_12);
        intro13 = MediaPlayer.create(this, R.raw.starwars);
        Gallery g=(Gallery)findViewById(R.id.gallery);
          g.setAdapter(new ImageAdapter(this));
          g.setSpacing(10);

          g.setOnItemSelectedListener(this);
  } 
    public class ImageAdapter extends BaseAdapter {
        private Context myContext;
        private int[] myImageIds = {
                R.drawable.bokstavslottet01,
                R.drawable.bokstavslottet02,
                R.drawable.bokstavslottet03,
                R.drawable.bokstavslottet04,
                R.drawable.bokstavslottet05,
                R.drawable.bokstavslottet06,
                R.drawable.bokstavslottet07,
                R.drawable.bokstavslottet08,
                R.drawable.bokstavslottet09,
                R.drawable.bokstavslottet10,
                R.drawable.bokstavslottet11,
                R.drawable.bokstavslottet12,
                R.drawable.bokstavslottet13
    };
             public ImageAdapter(Context c) { this.myContext = c; }
        public int getCount() {
            // TODO Auto-generated method stub
            return this.myImageIds.length;
        }

        public Object getItem(int position) {
            // TODO Auto-generated method stub
            return position;
        }

        public long getItemId(int position) {
            // TODO Auto-generated method stub
            return position;
        }

        public View getView(int position, View convertView, ViewGroup parent) {
            // TODO Auto-generated method stub
             ImageView i = new ImageView(this.myContext);

                 i.setImageResource(this.myImageIds[position]);

             /* Image should be scaled as width/height are set. */
             i.setScaleType(ImageView.ScaleType.FIT_XY);
             /* Set the Width/Height of the ImageView. */
             i.setLayoutParams(new Gallery.LayoutParams(700, 400));
             Integer e = myImageIds.length;
             Log.i("","length-------"+e);

             return i;
         }

         /** Returns the size (0.0f to 1.0f) of the views
          * depending on the 'offset' to the center. */
         public float getScale(boolean focused, int offset) {
                 /* Formula: 1 / (2 ^ offset) */
             return Math.max(0, 1.0f / (float)Math.pow(2, Math.abs(offset)));
         }
        }

    public void onItemSelected(AdapterView<?> arg0, View arg1, int position,
            long arg3) {
        // TODO Auto-generated method stub
        if (position == 0) {

            intro1.start();
            intro1 = MediaPlayer.create(this, R.raw.babycooing05);
            intro1.start();
        }
        if (position == 1) {
            intro1.stop();
            intro2.start();
            intro2 = MediaPlayer.create(this, R.raw.bokstavslottet_2);
            intro2.start();
        }
        if (position == 2) {
            intro2.stop();
            intro3.start();
            intro3 = MediaPlayer.create(this, R.raw.bokstavslottet_3);
            intro3.start();
        }
        if (position == 3) {
            intro3.stop();
            intro4.start();
            intro4 = MediaPlayer.create(this, R.raw.bokstavslottet_4);
            intro4.start();
        }
        if (position == 4) {
            intro4.stop();
            intro5.start();
            intro5 = MediaPlayer.create(this, R.raw.bokstavslottet_5);
            intro5.start();
        }
        if (position == 5) {
            intro5.stop();
            intro6.start();
            intro6 = MediaPlayer.create(this, R.raw.bokstavslottet_6);
            intro6.start();
        }
        if (position == 6) {
            intro6.stop();
            intro7.start();
            intro7 = MediaPlayer.create(this, R.raw.bokstavslottet_7);
            intro7.start();
        }
        if (position == 7) {
            intro7.stop();
            intro8.start();
            intro8 = MediaPlayer.create(this, R.raw.bokstavslottet_8);
            intro8.start();
        }
        if (position == 8) {
            intro8.stop();
            intro9.start();
            intro9 = MediaPlayer.create(this, R.raw.bokstavslottet_9);
            intro9.start();
        }
        if (position == 9) {
            intro9.stop();
            intro10.start();
            intro10 = MediaPlayer.create(this, R.raw.bokstavslottet_10);
            intro10.start();
        }
        if (position == 10) {
            intro10.stop();
            intro11.start();
            intro11 = MediaPlayer.create(this, R.raw.bokstavslottet_11);
            intro11.start();
        }
        if (position == 11) {
            intro10.stop();
            intro12.start();
            intro12 = MediaPlayer.create(this, R.raw.bokstavslottet_12);
            intro12.start();
        }
        if (position == 12) {
            intro12.stop();
            intro13.start();
            intro13 = MediaPlayer.create(this, R.raw.starwars);
            intro13.start();
        }
        }
    @Override
    protected void onPause() {
        super.onPause();
        if (intro1 != null){
            intro1.stop();
            if (isFinishing()){
                intro1.stop();
                intro1.release();
            }
        }

        if (intro2 != null){
            intro2.stop();
            if (isFinishing()){
                intro2.stop();
                intro2.release();
            }
        }
            if (intro3 != null){
                intro3.stop();
                if (isFinishing()){
                    intro3.stop();
                    intro3.release();
                }
            }
            if (intro4 != null){
                intro4.stop();
                if (isFinishing()){
                    intro4.stop();
                    intro4.release();
                }
            }
            if (intro5 != null){
                intro5.stop();
                if (isFinishing()){
                    intro5.stop();
                    intro5.release();
                }
            }
            if (intro6 != null){
                intro6.stop();
                if (isFinishing()){
                    intro6.stop();
                    intro6.release();
                }
            }
            if (intro7 != null){
                intro7.stop();
                if (isFinishing()){
                    intro7.stop();
                    intro7.release();
                }
            }
            if (intro8 != null){
                intro8.stop();
                if (isFinishing()){
                    intro8.stop();
                    intro8.release();
                }
            }
            if (intro9 != null){
                intro9.stop();
                if (isFinishing()){
                    intro9.stop();
                    intro9.release();
                }
            }
            if (intro10 != null){
                intro10.stop();
                if (isFinishing()){
                    intro10.stop();
                    intro10.release();
                }
            }
            if (intro11 != null){
                intro11.stop();
                if (isFinishing()){
                    intro11.stop();
                    intro11.release();
                }
            }
            if (intro12 != null){
                intro12.stop();
                if (isFinishing()){
                    intro12.stop();
                    intro12.release();
                }
            }
            if (intro13 != null){
                intro13.stop();
                if (isFinishing()){
                    intro13.stop();
                    intro13.release();
                }
            }
    }
    public void onNothingSelected(AdapterView<?> arg0) {
        // TODO Auto-generated method stub

    }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T07:08:50.807

您需要以`onStop`Activity 的方法停止媒体服务。当您离开活动时，总是会调用**onStop**方法。

# iphone - 需要澄清对 UIWebview 上滚动禁用解决方案的关注

> ID：10409184
> 
> 赞同：0
> 
> 时间：2012-05-02T07:05:41.993
> 
> 标签：iphone, uiwebview

经过搜索，我找到了在 UIWebview 上禁用滚动的解决方案（支持 ios 3.2+）：

```
for (id subview in _webview.subviews)
     if ([[subview class] isSubclassOfClass: [UIScrollView class]])
           ((UIScrollView *)subview).scrollEnabled = NO; 
```

一些答案说这个解决方案会导致应用被拒绝。有些答案没有。所以请帮我澄清这个问题。我真的很感谢你的帮助。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T07:22:23.027

如果您要在应用商店中提交您的应用......那么审核团队将在最新的可用 iOS 上测试您的应用。因此，如果您的应用无法在最新的 iOS (5.1) 上运行，那么您的应用将被拒绝。

# android - 在片段视图中获取组件的宽度和高度

> ID：10409185
> 
> 赞同：11
> 
> 时间：2012-05-02T07:05:44.417
> 
> 标签：android

我需要访问片段视图中所有组件的已评估宽度和高度。所以我需要一些通知告诉我，片段布局阶段的视图已经完成。

在活动中我可以使用`onWindowFocusChanged(boolean hasFocus)`生命周期方法，但片段没有这种方法。

我发现的唯一方法是使用`getView().addOnLayoutChangeListener()`。但它多次调用，只有最后一次调用对我有用。

在片段视图中完成布局后，是否存在更好的方法来调用一些？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T07:25:04.917

您实际上可以手动触发布局传递 - 您只需要`View.measure(int,int)`使用适当的 MeasureSpecs 进行调用。例如，如果 Fragment 要附加到父视图 parentView，并且您希望它具有相同的大小，您可以这样做：

```
View fragmentView = fragment.getView();
fragmentView.measure(MeasureSpec.makeMeasureSpec(parentView.getMeasuredWidth(),
                                                 MeasureSpec.EXACTLY),
                     MeasureSpec.makeMeasureSpec(parentView.getMeasuredHeight(),
                                                 MeasureSpec.EXACTLY)); 
```

有关度量/布局传递如何工作的更多信息：http: [//developer.android.com/reference/android/view/View.html#Layout](http://developer.android.com/reference/android/view/View.html#Layout)

# jqgrid - 隐藏在网格后面的子子网格上的自定义对话框

> ID：10409206
> 
> 赞同：0
> 
> 时间：2012-05-02T07:07:48.640
> 
> 标签：jqgrid, overlay, z-index, subgrid

作为我在这里的第一个问题，我可能做错了什么。请不要犹豫告诉我——我们都是第一次学习:)

我的问题的背景：

我有一个包含 2 个表的数据库：Scales 和 Items。1 Scale 可以有不同的 Scales 相关（我称之为 Scale Parent - Scale Childs 的关系）。Scale Childs 可以有项目。规模父母没有。

所以我决定在我的知识前沿研究网格，并为这种情况建立一个子子网格：

规模父母的网格。- 每个比例父级的子网格与比例子级。- - 子网格，其中包含每个 Scale Child 的项目。

作品。它做得很好：添加、编辑、自定义对话框适用于 Scale Parents 和 Scale Childs。

但不适用于项目。在子子网格中打开的自定义对话框（我在项目操作列中添加添加、编辑和删除作为自定义操作）在子子网格上下文中工作，该上下文非常有限，因此它不适合并被网格行隐藏。

我附上了一个截图，以便更好地理解我在说什么。您可以在顶部看到 Scale 名称，然后是 Scale Child 的 Name，第三个 Child 有一个 SubSubGrid，顶部有 Scale Item Id。在新项目对话框底部的中间，比例名称网格的底部挡住了对话框。

链接到图片，因为我太新手无法发布图片... [http://imageshack.us/photo/my-images/703/subsubgriddialogopened.png/](http://imageshack.us/photo/my-images/703/subsubgriddialogopened.png/)

现在，我的问题是：

如何避免 Dialog 的 Floating 属性，使其不会隐藏在 Grid 后面？一些研究把我带到了这个链接： [不正确的 Z-Order - 如果网格在 jquery ui 对话框上，jqgrid 添加/编辑屏幕会显示在后面](https://stackoverflow.com/questions/5370905/incorrect-z-order-the-jqgrid-add-edit-screen-shows-up-behind-if-you-the-grid-i)

...这适用于标准按钮添加、编辑和删除，但不适用于自定义对话框。

谢谢大家阅读我的问题。由于代码不是问题（它可以正常工作），我没有发布它，但如果有人认为它有助于解决问题，我会在这里添加它。

编辑：代码。

```
jQuery(document).ready(function(){
      var $Grid_scaleParent = jQuery("#scaleOverviewList");
    $Grid_scaleParent.jqGrid({
    url:'/scaleoverview/scaleParentsData/',    
    datatype: 'json',
    mtype: 'POST',
    colNames:[
        //Colnames is the visual name of the column, which appears at the top.
        'Scale Id',
        'Scale Name',
        'Completed Scale',
        'Childs related',
        'Childs with Items related',
        'Scale Actions'
    ],
colModel :[
        //ColModel defines the columns and its names.
        //Name is the key of the column. Index is needed for sorting the grid.
        {name:'scaleId', index:'sPId', sortable:true, hidden:true},
        {name:'scaleName', index:'sPName', sortable:true, align:'left', required: true, editable:true, edittype:'text'},
        {name:'completedScale', sortable:false},
        {name:'childsRelated', sortable:false},
        {name:'childsItemsRelated', sortable:false},
        {name:'scaleActions', sortable:false}
    ],
    //Toppager adds the pagination to the top of the form.
toppager: true,
height: "100%",
    rowNum:10,
    rowList:[10,40,100],
    pager: '#gridpager',
    sortname: 'sPName',
    sortorder: "asc",        
    viewrecords: true,
    // Options to enable subGrid.
    subGrid: true,
    subGridRowExpanded: function(Grid_scaleChild, rowId_scaleParent) {            
        ////////////////////////////////////
        //  Starting Scale Child SubGrid  //
        ////////////////////////////////////

        var Table_scaleChild, Pager_scaleChild;
        Table_scaleChild = Grid_scaleChild+"_t";
        Pager_scaleChild = "p_"+Table_scaleChild;
        $('#'+Grid_scaleChild).html("<table id='"+Table_scaleChild+"' class='scroll'></table><div id='"+Pager_scaleChild+"' class='scroll'></div>");
        jQuery('#'+Table_scaleChild).jqGrid({
            url:'scaleoverview/scaleChildsData/'+rowId_scaleParent+'/',
            datatype: "json",
            mtype: 'POST',
            colNames: [
                'Scale Child Id',
                'Scale Child Name',
                'Items Related',
                'Scale Child Actions'
            ],
            colModel: [
                {name:"scaleChildId",index:"sCId", sortable:true, hidden:true},
                {name:"scaleChildName",index:"sCName", width:600, sortable:true, align:'left', required: true, editable:true, edittype:'text'},
                {name:"itemsRelated", sortable: false, width:300},
                {name:"scaleChildActions", sortable:false, width:200}
            ],
            autowidth:false,
            rowNum:20,
            pager: Pager_scaleChild,
            sortname: 'sCId',
            sortorder: "asc",
            height: '100%',
            subGrid: true,
            subGridRowExpanded: function(Grid_scaleItems, rowId_scaleChild) {            
                ////////////////////////
                //  Starting Scale Items SubSubGrid  //
                ////////////////////////

                var Table_scaleItems, Pager_scaleItems;
                Table_scaleItems = Grid_scaleItems+"_t";
                Pager_scaleItems = "p_"+Table_scaleItems;
                $('#'+Grid_scaleItems).html("<table id='"+Table_scaleItems+"' class='scroll'></table><div id='"+Pager_scaleItems+"' class='scroll'></div>");
                jQuery('#'+Table_scaleItems).jqGrid({
                    url:'scaleoverview/scaleItemsData/'+rowId_scaleChild+'/',
                    datatype: "json",
                    mtype: 'POST',
                    colNames: [
                        'Scale Item Id',
                        'Min.Amount',
                        'Max.Amount',
                        'Percentage',
                        'Start Date',
                        'End Date',
                        'Scale Item Actions'
                    ],
                    colModel: [
                        {name:"scaleItemId",index:"sIId", sortable:true},
                        {name:"minAmount", sortable:false, align:'left', required: true, editable:true, edittype:'text'},
                        {name:"maxAmount", sortable:false, align:'left', required: true, editable:true, edittype:'text'},
                        {name:"percentage", sortable:false, align:'left', required: true, editable:true, edittype:'text'},
                        {name:"startDate", sortable:false, align:'left', required: true, editable:true, edittype:'text'},
                        {name:"endDate", sortable:false, align:'left', required: true, editable:true, edittype:'text'},
                        {name:"scaleItemActions", sortable:false, width:100}
                    ],
                    autowidth:false,
                    rowNum:20,
                    pager: Pager_scaleItems,
                    sortname: 'sIId',
                    sortorder: "asc",
                    height: '100%',
                    loadComplete: function(){
                        //Getting the ID array of the list.
                        var scaleItemIds = jQuery('#'+Table_scaleItems).getDataIDs();

                        //Constructing action buttons.
                        for(var scaleItemAuxId=0;scaleItemAuxId< scaleItemIds.length;scaleItemAuxId++){
                            var scaleItemId = scaleItemIds[scaleItemAuxId];
                            //Construction of the custom option for each row.
                            //Note that we need to pass to the function the subGrid for the correct form construction.
                            var scaleItemActions = '<button class="scaleItemEdition" onclick="scaleItemEdition(\'' + scaleItemId + '\', \''+ Table_scaleItems +'\');"></button>';

                            //Constructing property management buttons.
                            scaleItemActions += '<button class="scaleItemDeletion" onclick="scaleItemDeletion(\'' + scaleItemId + '\', \''+ Table_scaleItems +'\');"></button>';

                            //Adding options to the Action Column
                            jQuery('#'+Table_scaleItems).setRowData(scaleItemIds[scaleItemAuxId],{"scaleItemActions":scaleItemActions});
                        }

                        //Construction of the visual features of the buttons.
                        $(".scaleItemEdition").button({
                            icons: {
                                primary: 'ui-icon-pencil'
                            },
                        text: false
                        });           
                        $(".scaleItemDeletion").button({
                            icons: {
                                primary: 'ui-icon-close'
                            },
                        text: false
                        });                            
                    }
                });
                jQuery("#"+Table_scaleItems).jqGrid('navGrid',"#"+Pager_scaleItems,{edit:false,add:false,del:false}, {multipleSearch:true, overlay:false});
                jQuery("#"+Table_scaleItems).navButtonAdd(Pager_scaleItems,{
                    caption: 'New Item',
                    title:'New Item',
                    buttonicon :'ui-icon-plus', 
                    onClickButton:function(){
                        //Definition of the columns to be shown.
                        jQuery('#'+Table_scaleItems).jqGrid('editGridRow', 'new', {
                            zIndex:2000,
                            addCaption: 'New Item',
                            reloadAfterSubmit:true,
                            closeAfterAdd:true,
                            recreateForm:true,
                            beforeShowForm: function (form) 
                            {
                                var $grid = $('#'+Table_scaleItems);
                                var dlgDiv = $("#editmod" + $grid[0].id);
                                var parentDiv = dlgDiv.parent();
                                var dlgWidth = dlgDiv.width();
                                var parentWidth = parentDiv.width();
                                dlgDiv[0].style.left = Math.round((parentWidth-dlgWidth)/2) + "px";

                            },
                            url: '/scaleoverview/addItem/'+rowId_scaleChild+'/'
                        });
                    }
                });                     

                /////////////////////////////////////
                //  Ending Scale Items SubSubGrid  //
                /////////////////////////////////////

            },
            loadComplete: function(){
                //Getting the ID array of the list.
                var scaleChildIds = jQuery('#'+Table_scaleChild).getDataIDs();

                //Constructing action buttons.
                for(var scaleChildAuxId=0;scaleChildAuxId< scaleChildIds.length;scaleChildAuxId++){
                    var scaleChildId = scaleChildIds[scaleChildAuxId];
                    //Construction of the custom option for each row.
                    //Note that we need to pass to the function the subGrid for the correct form construction.
                    var scaleChildActions = '<button class="scaleChildEdition" onclick="scaleChildEdition(\'' + scaleChildId + '\', \''+ Table_scaleChild +'\');"></button>';

                    //Constructing property management buttons.
                    scaleChildActions += '<button class="scaleChildDeletion" onclick="scaleChildDeletion(\'' + scaleChildId + '\', \''+ Table_scaleChild +'\');"></button>';

                    //Adding options to the Action Column
                    jQuery('#'+Table_scaleChild).setRowData(scaleChildIds[scaleChildAuxId],{"scaleChildActions":scaleChildActions});
                }

                //Construction of the visual features of the buttons.
                $(".scaleChildEdition").button({
                    icons: {
                        primary: 'ui-icon-pencil'
                    },
                text: false
                });           
                $(".scaleChildDeletion").button({
                    icons: {
                        primary: 'ui-icon-close'
                    },
                text: false
                });
            }
        });
        jQuery("#"+Table_scaleChild).jqGrid('navGrid',"#"+Pager_scaleChild,{edit:false,add:false,del:false});

        // SubGrid Adding Scale
        jQuery("#"+Table_scaleChild).navButtonAdd(Pager_scaleChild,{
            caption: 'New Child',
            title:'New Child',
            buttonicon :'ui-icon-plus', 
            onClickButton:function(){
                //Definition of the columns to be shown.
                jQuery('#'+Table_scaleChild).jqGrid('editGridRow', 'new', {
                    addCaption: 'New Child',
                    reloadAfterSubmit:true,
                    closeAfterAdd:true,
                    recreateForm:true,
                    beforeShowForm: function (form) 
                    {
                        // Styling the editing form to the center of the page
                        var $grid = $('#'+Table_scaleChild);
                        var dlgDiv = $("#editmod" + $grid[0].id);
                        var parentDiv = dlgDiv.parent();
                        var dlgWidth = dlgDiv.width();
                        var parentWidth = parentDiv.width();
                        var dlgHeight = dlgDiv.height();
                        var parentHeight = parentDiv.height();
                        dlgDiv[0].style.top = Math.round((parentHeight-dlgHeight)/2) + "px";
                        dlgDiv[0].style.left = Math.round((parentWidth-dlgWidth)/2) + "px";

                    },
                    url: '/scaleoverview/addScale/'+rowId_scaleParent+'/'
                });
            }
        });            

        //////////////////////////////////
        //  Ending Scale Child SubGrid  //
        //////////////////////////////////

    },
loadComplete: function(){
        //Resizing grid in order to make it 100% width.
        resize_the_grid($Grid_scaleParent);

        //Getting the ID array of the list.
        var ids = $Grid_scaleParent.getDataIDs();

        //Constructing action buttons.
    for(var i=0;i< ids.length;i++){
    var cl = ids[i];

            //Construction of the custom option for each row.
            var scaleActions = '<button class="edit" onclick="parentScaleEdition(\'#scaleOverviewList\', \'' +  cl + '\');"></button>';
            scaleActions += '<button class="delete" onclick="parentScaleDeletion(\'#scaleOverviewList\', \'' +  cl + '\');"></button>';

            //Construction of the custom option for new Tab and the name of the tab.
            //var nameOfTheTab = jQuery('#siteOverviewList').getCell(cl,'Client') + '::' + jQuery("#siteOverviewList").getCell(cl,'Name');
            //siteActions += '<button class="seeGames" onclick="createtab(\''+ nameOfTheTab +'\', '+ cl +');"></button>';

            //Adding options to the Action Column
            $Grid_scaleParent.setRowData(ids[i],{'scaleActions':scaleActions});
        }

        //Construction of the visual features of the buttons.
        $(".edit").button(
        {
            text: false,
            label: 'Edit Scale',
            icons: {
                primary: 'ui-icon-pencil',
                secundary: null
            }
        });            
        $(".delete").button(
        {
            text: false,
            label: 'Delete Scale',
            icons: {
                primary: 'ui-icon-close',
                secundary: null
            }
        });
        /*
        $(".seeGames").button(
        {
            text: false,
            label: 'Open tab with Games related to this Site',
            icons: {
                primary: 'ui-icon-folder-open',
                secundary: null
            }
        });
         */
        setHighlightedRows();
}
});

// 2 - Adding aditional options to the grid    
$Grid_scaleParent.navGrid('#gridpager',{edit:false,add:false,del:false,search:false,refresh:true,cloneToTop: true},
{}, // edit options
{}, // add options
{}, //del options
{} // search options
);

// 3 - Adding a custom option to the grid.
//      It is important to declare this custom button after the standard ones. Otherwise it will not appear.
$Grid_scaleParent.navButtonAdd("#gridpager",{
    caption:'New Parent',
    buttonicon :'ui-icon-plus', 
    onClickButton:function(){
        $Grid_scaleParent.jqGrid('editGridRow', 'new', {
            addCaption: 'New Parent',
            reloadAfterSubmit:true,
            closeAfterAdd:true,
            recreateForm:true,
            beforeShowForm: function (form) 
            {
                // Styling the editing form to the center of the page
                var $grid = $Grid_scaleParent;
                var dlgDiv = $("#editmod" + $grid[0].id);
                var parentDiv = dlgDiv.parent();
                var dlgWidth = dlgDiv.width();
                var parentWidth = parentDiv.width();
                var dlgHeight = dlgDiv.height();
                var parentHeight = parentDiv.height();
                dlgDiv[0].style.top = Math.round((parentHeight-dlgHeight)/2) + "px";
                dlgDiv[0].style.left = Math.round((parentWidth-dlgWidth)/2) + "px";

            },
            beforeInitData: function() {
                //Redefine of the cols that need to be set for adding.
            },
            afterShowForm: function () {
                //Redefine of the cols, so other actions will not see them.
            },
            url: '/scaleoverview/addScale/'
        });
    }
});
});

function scaleItemEdition (scaleItemId, subSubGridId)
{
  //Declaring subGrid in which the form has to be inserted.
var $subSubGrid = jQuery('#'+subSubGridId);

$subSubGrid.jqGrid('editGridRow', scaleItemId, {
    editCaption:'Edit Scale Item',
    beforeShowForm: function(form) 
    {
        // Styling the editing form to the center of the page
        var $grid = $subSubGrid;
        var dlgDiv = $("#editmod" + $grid[0].id);
        var parentDiv = dlgDiv.parent();
        var dlgWidth = dlgDiv.width();
        var parentWidth = parentDiv.width();
        var dlgHeight = dlgDiv.height();
        var parentHeight = parentDiv.height();
        dlgDiv[0].style.left = Math.round((parentWidth-dlgWidth)/2) + "px";
    },
width:400,
recreateForm:true,
reloadAfterSubmit:true,
closeAfterEdit:true,
url:'/scaleoverview/scaleItemEdition'
});
resize_the_grid(jQuery('#scaleOverviewList'));
}

function scaleItemDeletion (scaleItemId, subSubGridId)
{
//Declaring subGrid in which the form has to be inserted.
var $subSubGrid = jQuery('#'+subSubGridId);

$subSubGrid.jqGrid('delGridRow', scaleItemId,
{
    caption:'Delete Scale Item',
    msg:'Delete this Scale Item.',
    beforeShowForm: function(form) 
    {
        // Styling the editing form to the center of the page
        var $grid = $subSubGrid;
        var dlgDiv = $("#delmod" + $grid[0].id);
        var parentDiv = dlgDiv.parent();
        var dlgWidth = dlgDiv.width();
        var parentWidth = parentDiv.width();
        var dlgHeight = dlgDiv.height();
         var parentHeight = parentDiv.height();
        dlgDiv[0].style.top = Math.round((parentHeight-dlgHeight)/2) + "px";
        dlgDiv[0].style.left = Math.round((parentWidth-dlgWidth)/2) + "px";
    },
    reloadAfterSubmit:true,
    url:'/scaleoverview/scaleItemDeletion'
});
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T07:46:45.073

欢迎来到stackoverflow！没有屏幕短片很难理解你的问题。这就像不尝一尝就试图了解某道菜的味道一样。您也没有发布任何 JavaScript 代码。该代码可以帮助您了解如何创建与 jqGrid 一起显示不好的“自定义对话框”。

不过，如果您认为问题是对话框的 z 顺序错误，您可能很容易解决问题。例如，如果您使用 jQuery UI 对话框，您应该添加[zIndex](http://docs.jquery.com/UI/Dialog#option-zIndex)选项。如果您手动创建自定义对话框，`<div>`则必须将[“z-Index”](http://www.w3schools.com/cssref/pr_pos_z-index.asp)添加到 div 的样式中。重要的是 div 必须具有`absolute`或`relative`的`fixed`值`position`。通常`position: absolute`用于对话框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T06:49:56.593

我仍在与这个问题作斗争。我帖子中的图片可以帮助理解它（它是指向 imageshack 的链接，因为我无权上传图片）。

发现问题出在“ **.ui-jqgrid .ui-jqgrid-bdiv** ”类上的Overflow: auto 上。尝试使用 Firebug 避开那条线，然后所有对话框“飞”在所有网格上，这正是我想要的。

然而，这更像是一个 HACK 而不是一个解决方案，所以我仍然在寻找一个正确的答案。jqGrid 中必须有一个选项来启用“飞行”对话框，而不是让它们隐藏在网格的限制后面。

我将把这两个链接都放在我的网格图像上。

第一张图片：对话框没有在网格中飞行，所以它隐藏在网格后面。

[http://imageshack.us/photo/my-images/703/subsubgriddialogopened.png/](http://imageshack.us/photo/my-images/703/subsubgriddialogopened.png/)

第二张图片：网格中的对话框 FLYING，这就是我想要的。

[http://imageshack.us/photo/my-images/221/screenshot20120503at845.png](http://imageshack.us/photo/my-images/221/screenshot20120503at845.png)

如果需要，我可以上传更多截图。

# ruby-on-rails - 如何使用 Ajax 更新事件

> ID：10409208
> 
> 赞同：1
> 
> 时间：2012-05-02T07:08:09.397
> 
> 标签：ruby-on-rails, jquery

hiii 我是 Rails 的新手，我有一个名为 events 的模型，我有今天的事件、过去的事件和即将发生的事件。我在索引页面上显示我各自事件的计数，我想使用 ajax 更新计数，这样我的页面就不会闪烁。

我的控制器代码是：

```
def index
  case params[:view]
  when 'past'
    @events  = Event.find (:all, :conditions => ['start_date < ?', current_date], :order => 'start_date')
  when 'today'
    @events = Event.find (:all, :conditions => ['(start_date  = current_date)'], :order => 'start_date ')
  when 'upcoming'
    @events  = Event.find( :all, :conditions => ['start_date > ?', current_date], :order => 'start_date')
  else
    @events = Event.all
  end
end 
```

视图代码是：

```
%li
    - if params[:controller] == "brands"
      %a.tt-top-center{:title => "Total approvals pending"}#{Brand.all.size} 
      %span Past Brands   
    - elsif params[:controller] == "events"
      %a.tt-top-center{:title => "upcoming Events", :href => events_path(:view => "upcoming") }#{Event.count_upcoming}
      %span Upcoming Events

  %li
    - if params[:controller] == "brands"
      %a.tt-top-center{:title => "Total approvals pending"}#{Brand.all.size} 
      %span New Brand
     - elsif params[:controller] == "events"
      %a.blue.tt-top-center{:title => "past Events", :href => events_path(:view => "past")  }#{Event.count_past}
      %span Past Events Blockquote 
```

在这里，我的计数功能能够显示今天、过去和即将发生的事件的计数，但我想使用 ajax 进行更新。请高手帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T07:16:17.113

首先定义要更新的部分代码，然后在 javascript click 事件上调用此方法。

假设您的部分名称是 _update_events.html.erb

```
 <div id ="left"><%=render :partial => "update_event"%></div>

      function remove_im_address(id) {

        var container = $("#left");
         $.ajax({
           url: '/your controller/action',
           type: 'get',
           dataType: 'html',
           processData: false,
           success: function(data) {
            container.html(data);

         }
      });
   } 
```

在你的控制器中

```
 def action
    #your logic

    render :partial => "events/update_event" ,:layout => false
 end 
```

events 是您放置部分的目录。

这样你就可以只更新页面的特定 div 并享受......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T09:28:17.240

我刚刚创建了一个`index.js.haml`文件并在其中添加了以下行：

```
$("event").update("#{escape_javascript(render(@event))}"); 
```

它对我有用。

# javascript - KnockoutJS - 过滤用户输入

> ID：10409215
> 
> 赞同：1
> 
> 时间：2012-05-02T07:08:35.427
> 
> 标签：javascript, knockout.js

我有一个简单的输入文本元素：

```
<input type="text" data-bind="value:valInserted,valueUpdate:'afterkeydown'" /> 
```

如何验证此元素上的用户输入？我在创建正确的绑定以移植 jQuery 代码时遇到问题：

```
$('[id$="pinBox"] :text').keypress(function (e)
{
   if (!(e.charCode >= 48 && e.charCode <= 57) && e.keyCode != 8)
   {
       return false;
   }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T08:02:55.223

我想我终于明白了。

```
<input type="text" data-bind="validateValue:valInserted,valueUpdate:'afterkeydown',value:valInserted" />

ko.bindingHandlers.validateValue = {
    update: function (element, valueAccessor, allBindingsAccessor, viewModel)
    {
        var value = ko.utils.unwrapObservable(valueAccessor());
        viewModel.valInserted(value.replace(/[^0-9]/g, ''));
    }
}; 
```

# java - 第一次通过后继续进行深度优先搜索？

> ID：10409223
> 
> 赞同：0
> 
> 时间：2012-05-02T07:09:13.623
> 
> 标签：java, depth-first-search

我正在尝试创建一个基本的基于深度优先搜索的网络爬虫。这是我当前的代码：

```
import java.util.*;
import java.util.regex.Matcher;
import java.util.regex.Pattern;
import java.io.*;
import java.net.*;

public class DepthFirstSpider {
    private List<String> visitedList; //web pages already visited
    private static String hrefExpr = "href\\s*=\\s*\"([^\"]+)\"";
    private static Pattern pattern = Pattern.compile(hrefExpr);
    private int limit;
    private static Matcher matcher;
    private static URL contextURL;
    private static URL url;

    public List<String>  getVisitedList() { return visitedList; }

    //initialize the visitedlist and limit instance variables. Visit the starting url.
    public DepthFirstSpider(int limit, String startingURL) {
        visitedList = new ArrayList<String>();
        this.limit = limit;
        try {
            contextURL = new URL(startingURL);
        } catch (MalformedURLException e) {

        }

        visit(startingURL);
    }

    //print and add urlString to list of visited web pages 
    //create url and connect, read through html contents:
    //when href encountered create new url relative to the current url and visit it (if not already visited and limit not reached)
    public void visit(String urlString) {
        try{
            url = new URL(contextURL, urlString);
            URLConnection connection = url.openConnection();
            InputStream inputStream = connection.getInputStream();
            BufferedReader reader = new BufferedReader(
                    new InputStreamReader(inputStream));
            String nextLine;
            while((nextLine=reader.readLine()) != null){
                matcher = pattern.matcher(nextLine);
                while(matcher.find() && limit > 0 && !visitedList.contains(url.toString())){
                    System.out.println("visiting " + url.toString());
                    visitedList.add(url.toString());
                    visit(matcher.group(1));
                    limit--;
                }
            }
        } catch (MalformedURLException e){

        } catch (IOException e){

        }
    } 
```

}

搜索当前可以毫无问题地击落网页树。我需要帮助让它重新启动，然后转到它错过的页面。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T07:16:38.750

当我做一个爬虫时，我使用了两个队列而不是一个列表。一个队列包含要访问的 url，另一个包含访问过的 url。我将所有我想访问的 URL 添加到 toVisit 队列中，当我访问这些 URL 时，我将它们从 toVisit 队列中删除（并添加到访问队列中），并将该页面上的所有链接添加到 toVisit 队列中，除非它们在访问中队列。这样做不需要遍历。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T07:40:12.033

我可能会遗漏一些东西，但是，

首先，您还需要跟踪 Expanded 节点。您应该将每个生成的子节点添加到堆栈 (FILO) 中。

您应该在每次迭代时将每个扩展节点 push() 到堆栈和 pop() 。当您达到限制时，您将弹出上层节点。

这是作业吗？

你可以在维基百科的伪代码中找到一个好的解释。

# wpf - WPF UI 设计问题 - 控件可见性

> ID：10409225
> 
> 赞同：0
> 
> 时间：2012-05-02T07:09:31.790
> 
> 标签：wpf, user-interface, controls, visibility

我正在使用 D3 图表控件创建具有额外功能的图表用户控件。以下是我的用户界面问题。

我在顶部有一个工具栏托盘，中间有一个图表，底部有一个折叠的数据网格。用户控件的右侧是一个docksplitter。这个 docksplitter 覆盖了用户控件的长度，并提供了一个偶尔显示面板的区域。

当我在 WPF 窗口中加载用户控件并将其设置为拉伸时，即使数据网格在代码中设置为可见（即单击按钮），底部折叠的数据网格也不可见。图表填充到底部。我该如何解决这个问题？

以下是相同的 XAML：

```
<UserControl>
<DockPanel>
    <Grid Name="LnChartEditor" DockPanel.Dock="Right"/>
    <osc:DockPanelSplitter x:Name="DocSplitter" DockPanel.Dock="Right" Style="{StaticResource VerticalBevelGrip}" Width="7" />        
        <ToolBarTray DockPanel.Dock="Top" Height="32" Width="Auto" HorizontalAlignment="Stretch" Name="toolBarTrayTop" VerticalAlignment="Top" >
            <ToolBar x:Name="ToolBarOben" DockPanel.Dock="Top" Height="30">
                <Button Width="30" Height="30">
                </Button>
                <Label x:Name="lblCaption" Width="Auto">                    
                </Label>
                <Popup x:Name="Popup1"  PlacementTarget="{Binding ElementName=ClearChart}" PopupAnimation="Slide" AllowsTransparency="true">
                </Popup>
            </ToolBar>
        </ToolBarTray>
        <Grid Name="grdPlotter" Background="WhiteSmoke" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
            <d3:ChartPlotter Name="LineChart" BorderThickness="10" Opacity="0.8" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                <d3:AxisNavigation Placement="Right"/>
                <d3:ChartPlotter.ContextMenu>
                    <ContextMenu Name="D3ContextMenu">
                    </ContextMenu>
                </d3:ChartPlotter.ContextMenu>
            </d3:ChartPlotter>            
        </Grid>
    <DataGrid DockPanel.Dock="Bottom" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" x:Name="gridMiniReport" Visibility="Collapsed"          CanUserAddRows="False" CanUserDeleteRows="False" CanUserReorderColumns="False" CanUserResizeColumns="False" CanUserResizeRows="False"                     CanUserSortColumns="False" HeadersVisibility="Column" GridLinesVisibility="None">
    </DataGrid>        
</DockPanel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T09:39:05.023

尝试更改声明顺序，因为最后一个孩子填充了剩余空间：

```
<DockPanel>
    <Grid Name="LnChartEditor" DockPanel.Dock="Right" />
    <osc:DockPanelSplitter x:Name="DocSplitter" DockPanel.Dock="Right" />        
    <ToolBarTray Name="toolBarTrayTop" DockPanel.Dock="Top" />
    <DataGrid x:Name="gridMiniReport" DockPanel.Dock="Bottom" />
    <Grid Name="grdPlotter" />
</DockPanel> 
```

# c# - 在运行时从数据库创建类

> ID：10409228
> 
> 赞同：1
> 
> 时间：2012-05-02T07:09:54.430
> 
> 标签：c#, asp.net, database

如何在运行时使用数据库条目来创建类？

例如：

**标识（整数）：**

## *1*

**名称（字符串）：**

## *产品*

**内容（字符串）：**

```
public class Product
{
    public string Name { get; set; }

    public string Family { get; set; }

    public int Age { get; set; }      
} 
```

或其他模式

它用于动态页面生成器

* * *

**更新 ：**

更准确地说，我的意思是我需要为每个数据库记录创建一个类，而不是为每个表创建一个类，而且这个类最能让我使用 SQL 的常用指令，如 CRUD

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T07:17:36.683

如果您在编译时不了解数据，那么在运行时构建一个类没有多大意义——您不妨使用 (gulp) `DataTable`（去洗手）。如果您在编译时*确实*了解该类，那么要么**编写类**（就像您所做的那样）并使用“dapper”之类的工具，或者使用诸如 EF、NHibernate、LINQ-to-SQL 等 ORM 工具将从数据库中为您生成类型（在设计时），并允许您的代码与类型进行交互。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T07:17:54.983

为什么要针对数据库条目创建一个类？我想你想为一个类的每个条目创建对象，比如 Person。最好针对每个表创建类，然后针对这些类为数据库中的记录创建对象。我认为您正在寻找 ORM，请检查[Linq to SQL](http://msdn.microsoft.com/en-us/library/bb425822.aspx)。您也可以[在运行时使用反射创建代码](http://olondono.blogspot.com/2008/02/creating-code-at-runtime.html)，但我真的不认为需要它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T07:13:37.563

你不能真正动态地创建类（嗯，你可以，但这是一个巨大的反模式，而不是我推荐的东西）。在我看来，你有两个选择：

1) 使用 .Net 4 动态关键字。

2) 创建一个“通用”类，其中包含保存类型、标识符和序列化数据的属性。

# windows-phone-7.1 - 从后台代理在前台显示应用程序

> ID：10409229
> 
> 赞同：2
> 
> 时间：2012-05-02T07:09:59.943
> 
> 标签：windows-phone-7.1, background-agents

是否可以从后台代理在前台启动应用程序？还是只能显示敬酒？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T07:13:06.700

您只能更新磁贴，或显示来自后台代理的 toast。（音频后台代理除外，它也可以控制音频）。

您不能从后台代理启动应用程序。显示 toast，将允许用户单击 toast，然后依次启动应用程序。

# linux - 在 /etc/apt/sources.list.d/ 中创建一个文件

> ID：10409235
> 
> 赞同：8
> 
> 时间：2012-05-02T07:10:50.160
> 
> 标签：linux, ubuntu, permissions, chef-infra

我正在尝试`chef`在 ubuntu 机器上安装（从 opscode）。我对linux不太熟悉，但我必须尽快`chef`在linux上安装。

安装指南的步骤之一说

```
Create /etc/apt/sources.list.d/opscode.list 
```

这条线是什么意思？现在我应该创建一个目录`opscode.list`或文件吗？

`/etc/apt/sources.list.d/`目录已经存在。

当我尝试触发以下命令时->

```
cd /etc/apt/sources.list.d/
mkdir opscode.list 
```

我得到关注->

```
mkdir: cannot create directory `opscode.list': Permission denied 
```

如何解决权限被拒绝的问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-02T07:18:26.080

使用须藤：

```
sudo vi /etc/apt/sources.list.d/opscode.list 
```

或者也许通过回声：

```
sudo echo "deb http://apt.opscode.com/ <codename> main" > /etc/apt/sources.list.d/opscode.list 
```

当要求输入密码时，输入您的密码（不是来自 root 的密码）。

将“<codename>”替换为所需的内容（根据教程）：

> *   对于 Chef 0.9.x，将代号替换为支持的分发代号，例如“lucid”。
> *   对于 Chef 0.10.x，将 codename 替换为 codename，后缀为“-0.10”，例如“lucid-0.10”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-11T20:30:59.173

试试看：

```
echo "deb http://apt.opscode.com/ <codename> main" | sudo tee 
/etc/apt/sources.list.d/opscode.list 
```

# android - 如何从 ftp 服务器打印目录

> ID：10409238
> 
> 赞同：-1
> 
> 时间：2012-05-02T07:10:58.453
> 
> 标签：android, android-layout

我在使用 Net Commons Apache API 从 ftp 服务器打印目录时遇到问题

```
FtpClient  ftpclient=new FtpClient();
ftpclient.connect("garbo.uwasa.fi");
System.out.println("this is reply code"+ftpclient.getReplyCode()); 
```

最后一条语句给出replycode=220

```
 String workingdirectory=ftpclient.printWorkingDirectory(); 
```

在 printdirectory 我得到空值。可能是什么问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T12:04:45.063

```
FtpClient client=new FtpClient();
clent.connect("www.ftpserver.com");
clent.login("username","password");
String workingdirectory=ftp.printWorkingDirectory();
this working code so u can access ftp server by using this 
```

# java - Websphere 中的 Cron 作业

> ID：10409239
> 
> 赞同：4
> 
> 时间：2012-05-02T07:10:59.047
> 
> 标签：java, spring, websphere

我正在使用 IBM websphere v 7.0。我想使用 cron 作业来记录日志。有没有办法在 Websphere 中使用 cron 作业？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T21:48:20.613

WebSphere Application Server (WAS) v7.0 包含一个调度程序（WAS 控制台 > 资源 > 调度程序）。要实现类似日历的 CRON，请在 TaskInfo 对象上设置 UserCalendar，例如：

```
taskInfo.setUserCalendar(null, "CRON");
taskInfo.setStartTimeInterval("5 * * * ?"); 
```

# http-headers - 为什么没有通知 Close-ChannelFutureListener？

> ID：10409241
> 
> 赞同：0
> 
> 时间：2012-05-02T07:11:02.120
> 
> 标签：http-headers, netty

我已经使用 Netty 的内置功能在 Netty 中实现了一个 HTTP 服务器。现在我实现了对 Range-Headers 的支持，它只允许接收页面的一部分。我在netty中所做的是：

```
final RandomAccessFile raf = new RandomAccessFile( file, "r" );
raf.seek( ranges[ 0 ] );

HttpResponse response = new DefaultHttpResponse( HttpVersion.HTTP_1_1, HttpResponseStatus.PARTIAL_CONTENT );
// MUST include accept-ranges!!
response.setHeader( HttpHeaders.Names.ACCEPT_RANGES, "bytes" );
// MUST include content-range
response.setHeader( HttpHeaders.Names.CONTENT_RANGE , "bytes " + ranges[ 0 ] + "-" + ranges[ 1 ] + "/" + file.length() );

if ( null != mime )
  response.addHeader( HttpHeaders.Names.CONTENT_TYPE, mime.substring( 0, mime.indexOf(' ') ) );
response.setHeader( HttpHeaders.Names.CONTENT_LENGTH, "" + ( ( ranges[ 1 ] - ranges[ 0 ] ) + 1 ) );

event.getChannel().write( response );

event.getChannel().write( new ChunkedInput() {
   private boolean endOfStream = false;
   private byte[] buffer = new byte[ 4096 ];
   private long bytesRead = ranges[ 0 ];

   @Override
   public boolean hasNextChunk() throws Exception {
     return !this.endOfStream;
   }

   @Override
   public Object nextChunk() throws Exception {
     if ( false == this.endOfStream ) {
       int read = raf.read( this.buffer );
       if ( read == -1 || this.bytesRead >= ranges[ 1 ] ) {
         this.endOfStream = true;
         return new DefaultHttpChunk( ChannelBuffers.EMPTY_BUFFER ); // send isLast 
       }

       if ( this.bytesRead + read > ranges[ 1 ] ) {
         read = ( int ) ( ranges[ 1 ] - this.bytesRead ) + 1;
         this.bytesRead = ranges[ 1 ]; // next iteration will send last chunk
       }

       this.bytesRead += read;

       return new DefaultHttpChunk( ChannelBuffers.copiedBuffer( this.buffer, 0, read ) );
     }

    return null;
  }

  @Override
  public boolean isEndOfInput() throws Exception {
    return this.endOfStream;
  }

  @Override
  public void close() throws Exception {
    raf.close();
  }
} ).addListener( ChannelFutureListener.CLOSE ); 
```

问题是 ChannelFutureListener.CLOSE 永远不会被调用。我也尝试了我自己的监听器实现 - 它不会被调用。我不认为我的 ChunkedInput-Implementation 是问题所在，我在服务器的不同部分使用相同的原理。当流完成时，它返回 ChannelBuffers.EMPTY_BUFFER 然后从 netty 调用 close ，所以流肯定完成了。我设法解决了在关闭方法中 raf.close 之后执行 channel.close() 的问题，但是这个 hack 并不让我高兴。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T06:35:48.090

一旦 isEndOfInput() 返回 true，FutureListener 就会收到通知。因此，我认为您应该调试 isEndOfInput() 在这种情况下是否为真。

# c# - 为什么没有为 ActiveMQ 临时队列创建消费者？

> ID：10409242
> 
> 赞同：1
> 
> 时间：2012-05-02T07:11:05.663
> 
> 标签：c#, activemq, apache-nms

除`SimpleMessageListenerContainer`选项外，不会为临时队列创建消费者。我不会使用这里`SimpleMessageListenerContainer`面临的一些问题[。](https://stackoverflow.com/q/10349077/1121207)

以下代码不起作用...（即使没有创建临时队列）

```
 using (IConnection connection = connectionFactory.CreateConnection())
                    using (ISession session = connection.CreateSession())
                    {
                        IDestination destination = SessionUtil.GetDestination(session, aQueueName);
                        var replyDestination = session.CreateTemporaryQueue();

                        // Create a consumer and producer
                        using (IMessageProducer producer = session.CreateProducer(destination))
                        {
                            // Start the connection so that messages will be processed.
                            connection.Start();

                            IBytesMessage request = session.CreateBytesMessage(aMsg);
                            request.NMSReplyTo = replyDestination;

                            IMessageConsumer consumer = session.CreateConsumer(replyDestination);
                            consumer.Listener += new MessageListener(this.OnAckRecieved);

                            // Send a message
                            producer.Send(request);
                            ack = this.autoEvent.WaitOne(this.msgConsumeTimeOut, true);

                            consumer.Close();
                            consumer.Dispose();
                            ConnectionFactoryUtils.GetTargetSession(session).DeleteDestination(replyDestination);
                        }
                        connection.Close();
                        session.Close(); 
```

后续代码正在运行：-但队列似乎是持久队列而不是临时队列

```
 using (IConnection connection = connectionFactory.CreateConnection())
                    using (ISession session = connection.CreateSession())
                    {
                        IDestination destination = SessionUtil.GetDestination(session, aQueueName);
                        var replyDestination = session.CreateTemporaryQueue();

                        // Create a consumer and producer
                        using (IMessageProducer producer = session.CreateProducer(destination))
                        {
                            // Start the connection so that messages will be processed.
                            connection.Start();

                            IBytesMessage request = session.CreateBytesMessage(aMsg);
                            request.NMSReplyTo = replyDestination;

                            IDestination tempDestination = this.destinationResolver.ResolveDestinationName(session, request.NMSReplyTo.ToString());
                            IMessageConsumer consumer = session.CreateConsumer(tempDestination);
                            consumer.Listener += new MessageListener(this.OnAckRecieved);

                            // Send a message
                            producer.Send(request);
                            ack = this.autoEvent.WaitOne(this.msgConsumeTimeOut, true);

                            consumer.Close();
                            consumer.Dispose();
                            ConnectionFactoryUtils.GetTargetSession(session).DeleteDestination(tempDestination);
                        }
                        connection.Close();
                        session.Close(); 
```

使用上面的代码（使用 NmsDestinationAccessor）它正在工作。但它创建了一个持久队列。所以当我直接使用临时队列回复目的地时，它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T11:27:57.460

`ActiveMQTempQueue`直接从该`NMSReplyTo.ToString`方法创建对象可能会在此处引起您的问题，因为该`ToString`方法不能保证返回一个可以从中创建匹配目标的值。由于您不知道发件人是否指定了临时目的地或普通目的地，因此它的编码也很糟糕。正确的做法是使用会话的创建消费者方法使用`NSMReplyTo`目标原样创建一个新消费者。

这是一个来自 NMS 项目的简单请求响应测试用例，它与 Apache.NMS.Stomp 和 Apache.NMS.ActiveMQ 一起使用。

```
namespace Apache.NMS.Test
{
[TestFixture]
public class RequestResponseTest : NMSTestSupport
{
    protected static string DESTINATION_NAME = "RequestDestination";

    [Test]
    [Category("RequestResponse")]       
    public void TestRequestResponseMessaging()
    {
        using(IConnection connection = CreateConnection())
        {
            connection.Start();
            using(ISession session = connection.CreateSession(AcknowledgementMode.AutoAcknowledge))
            {
                IDestination destination = SessionUtil.GetDestination(session, DESTINATION_NAME);
                ITemporaryQueue replyTo = session.CreateTemporaryQueue();

                using(IMessageConsumer consumer = session.CreateConsumer(destination))
                using(IMessageProducer producer = session.CreateProducer(destination))
                {
                    IMessage request = session.CreateMessage();

                    request.NMSReplyTo = replyTo;

                    producer.Send(request);

                    request = consumer.Receive(TimeSpan.FromMilliseconds(3000));
                    Assert.IsNotNull(request);
                    Assert.IsNotNull(request.NMSReplyTo);

                    using(IMessageProducer responder = session.CreateProducer(request.NMSReplyTo))
                    {
                        IMessage response = session.CreateTextMessage("RESPONSE");                          
                        responder.Send(response);
                    }                       
                }

                using(IMessageConsumer consumer = session.CreateConsumer(replyTo))
                {
                    ITextMessage response = consumer.Receive(TimeSpan.FromMilliseconds(3000)) as ITextMessage;
                    Assert.IsNotNull(response);
                    Assert.AreEqual("RESPONSE", response.Text);
                }
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T03:03:08.680

临时队列仅在创建它的连接存在时才存在。在您的示例代码中，您是在开始连接之前创建它，所以我认为它只是默默地出错，因为没有活动连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T11:58:32.627

1.  与其使用 C#，不如用 java 编写代码，因为它是 ActiveMQ 的最佳套件。在此处阅读[在 java 中使用临时队列的示例。](https://svn.apache.org/repos/asf/qpid/trunk/qpid/java/systests/src/main/java/org/apache/qpid/test/unit/client/temporaryqueue/TemporaryQueueTest.java)
2.  然后将其编译为 JAR 文件，您可以通过 IKVM.NET 将其导入您的 c# 代码中，如此[处所述](https://stackoverflow.com/questions/512124/use-a-jar-java-library-api-in-c)
3.  希望它能与这个一起工作。

注意：你必须知道你不能在不同的会话中使用临时队列。

# c# - 获取用户的应用权限

> ID：10409244
> 
> 赞同：0
> 
> 时间：2012-05-02T07:11:13.400
> 
> 标签：c#, facebook, facebook-graph-api

我有一个 facebook 应用程序（一个两人游戏），可以在朋友的墙上发布消息。这一切都有效。但是当用户第一次打开应用程序时，他会收到一条消息，询问他是否允许应用程序在他的墙上发布消息。

显然有些用户会按下“不允许”按钮。

有没有办法检查我的应用程序对某个用户的权限？所以我知道是否调用 facebookClient.Post() 方法。

我正在使用 C# FacebookClient 库。所以如果可能的话，我想要一个解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T07:27:15.490

是的，当然，有[User object的](http://developers.facebook.com/docs/reference/api/user/)*权限*连接，您不需要任何特殊权限来询问。

您可以询问登录用户“me/permissions”或用户 ID“USER_ID/permissions”，这将返回：

> 包含单个对象的数组，其中键作为权限名称，值作为权限值 (1/0) - 默认情况下，从对象中省略值为 0 的权限

您可以使用[Graph Explorer](http://developers.facebook.com/tools/explorer/?method=GET&path=me/permissions)进行尝试。

我不知道 C# 部分，但由于所有 facebook SDK 都只是 https 请求的包装器，我相信这是可能的。基本上，如果您可以获得“/me”的结果，那么您应该能够获得“/me/permissions”的结果。

# html - 如何在 css 中创建 3d 丝带盒

> ID：10409248
> 
> 赞同：0
> 
> 时间：2012-05-02T07:11:48.923
> 
> 标签：html, css

我正在尝试在**CSS3**中制作 3d 功能区框，但遇到了一些问题，所以我怎样才能用最少的代码用纯**CSS制作它。**

这是我正在尝试制作的图像......

![在此处输入图像描述](../Images/2a4abe915baa84e7012e4ebc49e692fb.png)

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-02T07:31:53.990

这是一种方法，非常少的标记。 `:before`和`:after`伪元素需要 IE 8+，如果您需要支持较低的 (IE6/7)，您可以`<div>`为三角形角使用两个额外的元素。

[示例 jsfiddle](http://jsfiddle.net/fsvyk/)

HTML：

```
<div id="box">
    <div id="ribbon">3d Text and rounded corner sample</div>
</div>​ 
```

CSS：

```
#box {
    position:relative;
    background:gray;
    width:400px;
    height:300px;
    margin:20px 45px;
}
#ribbon {
    position:absolute;
    top:15px;
    left:-20px;
    width:360px;
    height:55px;
    background:#ff2702;
    color:white;
    padding:20px 40px;
    font-size:24px;
    font-weight:bold;
    border-radius:5px 5px 0 0;
    box-shadow:0 0 8px #333;
    text-shadow:0 0 8px #000;
}
#ribbon:before {
    content:'';
    position:absolute;
    bottom:-20px;
    left:0;
    border-top:solid 10px #ff2702;
    border-right:solid 10px #ff2702;
    border-bottom:solid 10px transparent;
    border-left:solid 10px transparent;
}
#ribbon:after {
    content:'';
    position:absolute;
    bottom:-20px;
    right:0;
    border-top:solid 10px #ff2702;
    border-right:solid 10px transparent;
    border-bottom:solid 10px transparent;
    border-left:solid 10px #ff2702;
}
​ 
```

# jquery - Jquery-UI-Map 将事件附加到信息窗口关闭？

> ID：10409250
> 
> 赞同：1
> 
> 时间：2012-05-02T07:11:56.013
> 
> 标签：jquery, user-interface, maps

我无法弄清楚如何使用 Jquery-UI-Map api (http://code.google.com/p/jquery-ui-map/) 将信息窗口关闭事件附加到信息窗口。我想在信息窗口的创建中附加一个关闭事件，或者通过链接到它的创建。无论采用最少的代码并符合 api 其余部分的结构。

我目前的解决方案是使用 google maps api 事件侦听器，它可以工作，但我不喜欢它。我更喜欢jquery方法。

我目前有..

```
self.snMapElement.gmap('openInfoWindow', {'content': infoWindowMarkup}, self.selectedStreetMarker);

                // Setup close event
                google.maps.event.addListener(self.snMapElement.gmap('get', 'iw'), 'closeclick', function(){
                    self.removeSelectedStreetMarker();
                }); 
```

如果可能的话，我想使用一些方法：

```
self.snMapElement.gmap('openInfoWindow', {'content': infoWindowMarkup}, self.selectedStreetMarker).bind('closeclick', function(){self.removeSelectedStreetMarker()}); 
```

# python - 使用 Python 解析 HTML 文件：起点

> ID：10409251
> 
> 赞同：-3
> 
> 时间：2012-05-02T07:11:57.707
> 
> 标签：python, html, xml, parsing

我有以下格式的html文件。我想用python解析它。但是，我对使用 xml 模块一无所知。非常欢迎您的建议。

注意：再次对不起我的无知。问题不具​​体。但是，由于我对这样的解析脚本感到沮丧，我确实想得到一个由答案人（谢谢大家）描述的具体答案作为起点。希望你能理解。

```
<html>
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Weibo Landscape: Historical Archive of 800 Verified Accounts</title>
    </head>
    <body>
<div><br>
related 1-th-weibo:<br>
mid:3365546399651413<br>
score:-5.76427445942 <br>
uid:1893278624 <br>
link:<a href="http://weibo.com/1893278624/xrv9ZEuLX"  target="_blank">source</a> <br>
time:Thu Oct 06 17:10:59 +0800 2011 <br>
content: Zuccotti Park。 <br>
<br></div>
<div><br>
related 2-th-weibo:<br>
mid:3366839418074456<br>
score:-5.80535767804 <br>
uid:1813080181 <br>
link:<a href="http://weibo.com/1813080181/xs2NvxSxa"  target="_blank">source</a> <br>
time:Mon Oct 10 06:48:53 +0800 2011 <br>
content:rt the tweet <br>
rtMid:3366833975690765 <br>
rtUid:1893801487 <br>
rtContent:#ows#here is the content and the link http://t.cn/aFLBgr <br>
<br></div>

    </body>
    </html> 
```

> **可能重复：**
> [使用 Python 从 HTML 文件中提取文本](https://stackoverflow.com/questions/328356/extracting-text-from-html-file-using-python)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T07:56:37.600

我建议你看看 Python 库[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)。它可以帮助您导航和搜索 HTML 数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T21:39:33.103

我这样做是为了锻炼。如果这仍然有用，它应该让你走上正确的轨道。

```
# -*- coding: utf-8 -*-

from BeautifulSoup import BeautifulSoup

html = '''<html>
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Weibo Landscape: Historical Archive of 800 Verified Accounts</title>
    </head>
    <body>
<div><br>
related 1-th-weibo:<br>
mid:3365546399651413<br>
score:-5.76427445942 <br>
uid:1893278624 <br>
link:<a href="http://weibo.com/1893278624/xrv9ZEuLX"  target="_blank">source</a> <br>
time:Thu Oct 06 17:10:59 +0800 2011 <br>
content: Zuccotti Park。 <br>
<br></div>
<div><br>
related 2-th-weibo:<br>
mid:3366839418074456<br>
score:-5.80535767804 <br>
uid:1813080181 <br>
link:<a href="http://weibo.com/1813080181/xs2NvxSxa"  target="_blank">source</a> <br>
time:Mon Oct 10 06:48:53 +0800 2011 <br>
content:rt the tweet <br>
rtMid:3366833975690765 <br>
rtUid:1893801487 <br>
rtContent:#ows#here is the content and the link http://t.cn/aFLBgr <br>
<br></div>

    </body>
    </html>'''

data = []
soup = BeautifulSoup(html)
divs = soup.findAll('div')
for div in divs:
    div_string = str(div)
    div_string = div_string.replace('<br />', '')
    div_list = div_string.split('\n')
    div_list = div_list[1:-1]
    record = []
    for item in div_list:
        record.append( tuple(item.split(':', 1)) )
    data.append(record)

for record in data:
    for field in record:
        print field
    print '--------------' 
```

使用您的样本数据，您将获得此输出。进一步处理应该很容易按摩到您想要的任何结构中。

```
('related 1-th-weibo', '')
('mid', '3365546399651413')
('score', '-5.76427445942 ')
('uid', '1893278624 ')
('link', '<a href="http://weibo.com/1893278624/xrv9ZEuLX" target="_blank">source</a> ')
('time', 'Thu Oct 06 17:10:59 +0800 2011 ')
('content', ' Zuccotti Park\xe3\x80\x82 ')
--------------
('related 2-th-weibo', '')
('mid', '3366839418074456')
('score', '-5.80535767804 ')
('uid', '1813080181 ')
('link', '<a href="http://weibo.com/1813080181/xs2NvxSxa" target="_blank">source</a> ')
('time', 'Mon Oct 10 06:48:53 +0800 2011 ')
('content', 'rt the tweet ')
('rtMid', '3366833975690765 ')
('rtUid', '1893801487 ')
('rtContent', '#ows#here is the content and the link http://t.cn/aFLBgr ') 
```

# html - 不能放水平滚动

> ID：10409254
> 
> 赞同：0
> 
> 时间：2012-05-02T07:12:29.547
> 
> 标签：html, css

我正在尝试放置水平滚动并平放，[**这是小提琴**](http://jsfiddle.net/ryPdK/3/)

请帮我找出我做错了什么

编辑

这是标记

```
<table >
      <tr>
         <td style="width:300px;">
         <div style="width:300px;overflow-x:scroll !important;">
              <table style="width:100:float:left!important;">                          <caption>2011</caption>
                             <td class="top">Brand</td>      
                             <td class="top">Target</td>

                            <tr>
                                 <td>ABC</td>
                                 <td>22</td>

                            </tr>    
              </table>
            <table style="width:100px;float:left!important;">                        <caption>2012</caption>
                             <td>Brand</td>     
                             <td>Target</td>
                             <tr>
                                <td>bnc</td>
                                 <td>22</td>                                
                             </tr>   
             </table>  
<table style="width:100px;float:left!important;">                        <caption>2012</caption>
                             <td>Brand</td>     
                             <td>Target</td>
                             <tr>
                                <td>bnc</td>
                                 <td>22</td>                                
                             </tr>   
             </table> 
<table style="width:100px;float:left!important;">                        <caption>2012</caption>
                             <td>Brand</td>     
                             <td>Target</td>
                             <tr>
                                <td>bnc</td>
                                 <td>22</td>                                
                             </tr>   
             </table>  
<table style="width:100px;float:left!important;">                        <caption>2012</caption>
                             <td>Brand</td>     
                             <td>Target</td>
                             <tr>
                                <td>bnc</td>
                                 <td>22</td>                                
                             </tr>   
             </table>               
        </div>
        </td>          
     </tr>             
</table>  
​ 
```

这是当前和所需输出的屏幕截图

![在此处输入图像描述](../Images/76f819eed926ff5d9181bc420a90cf76.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T07:22:06.180

你必须给滚动 div 比这样的内表更小的宽度，[这里有演示 JsFiddle](http://jsfiddle.net/U4EW6/1/)

```
<table style="width:400px" >
      <tr>
         <td style="width:300px;">
         <div style="width:300px;overflow-x:scroll !important;">
              <table style="width:350px">                          <caption>2011</caption>
                             <td class="top">Brand</td>      
                             <td class="top">Target</td>

                            <tr>
                                 <td>ABC</td>
                                 <td>22</td>

                            </tr>    
              </table>
            <table style="width:100px;float:left!important;">                        <caption>2012</caption>
                             <td>Brand</td>     
                             <td>Target</td>
                             <tr>
                                <td>bnc</td>
                                 <td>22</td>                                
                             </tr>   
             </table>  
<table style="width:100px;float:left!important;">                        <caption>2012</caption>
                             <td>Brand</td>     
                             <td>Target</td>
                             <tr>
                                <td>bnc</td>
                                 <td>22</td>                                
                             </tr>   
             </table> 
<table style="width:100px;float:left!important;">                        <caption>2012</caption>
                             <td>Brand</td>     
                             <td>Target</td>
                             <tr>
                                <td>bnc</td>
                                 <td>22</td>                                
                             </tr>   
             </table>              
        </div>
        </td>          
     </tr>             
</table>  
​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T07:48:50.537

根据您想要的视图，您可以检查这个小提琴需要所有表格浮动并添加一个包含所有表格的 DIV

[这是](http://jsfiddle.net/chanduzalte/ryPdK/6/)有这些变化的小提琴。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T10:58:32.670

在那个jsfiddle：http: [//jsfiddle.net/ryPdK/8/](http://jsfiddle.net/ryPdK/8/) 改变这个

```
<div style="width:500px"> 
```

宽度到巨大的东西，例如

```
<div style="width:9999px"> 
```

这样它就可以容纳许多这样的表格并按照您想要的方式工作。

# wpf - WPF 图像滚动器 - 寻找行为类似于图像中的控件

> ID：10409256
> 
> 赞同：5
> 
> 时间：2012-05-02T07:12:42.237
> 
> 标签：wpf

在 WPF 中，实现如下图所示控件的最佳方法是什么？您有很多图像，并非所有图像都可以一次看到，但是您可以左右分页或滚动，我不知道如何调用它。两侧的两个按钮可以左右滚动并带来新的图像。

![在此处输入图像描述](../Images/aafe20306c79a8d51ded463d2789b72d.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T07:19:31.000

如果您需要滚动图像，您可以使用一个简单的 ListBox（如果您愿意，可以将其设置为水平），如果您将列表框绑定到图像的 ItemsSource，则应用将包含图像的 ItemTemplate。

这是水平列表框的示例 -

[http://immersivenick.wordpress.com/2012/01/14/wpf-short-horizo​​ntal-listbox/](http://immersivenick.wordpress.com/2012/01/14/wpf-short-horizontal-listbox/)

如果您不使用绑定，您可以只添加带有图像内容的 LisBoxItems。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T07:37:57.917

如果您想让它更具吸引力，您可以使用轮播控件。

周围有一些免费的：http: [//www.codeproject.com/Articles/181835/WPF-Carousel-Control](http://www.codeproject.com/Articles/181835/WPF-Carousel-Control)

还有一些商业的。我使用了 Infragistics Carousel Control 并发现它非常好： http: [//www.infragistics.com/dotnet/netadvantage/wpf/xamcarouselpanel.aspx#Overview](http://www.infragistics.com/dotnet/netadvantage/wpf/xamcarouselpanel.aspx#Overview)

# python - Python：如何在python，MAC OS中的特定位置点击屏幕

> ID：10409258
> 
> 赞同：3
> 
> 时间：2012-05-02T07:12:47.460
> 
> 标签：python, macos

我想使用 python 程序在屏幕上移动光标并单击 Mac OS 中的特定位置。

我在 Windows 和 Ubuntu 上看到了一些好的线程，但我正在寻找 OSX。

Windows： [使用 Perl、Python 或 Ruby，如何编写程序以在预定时间“点击”屏幕？](https://stackoverflow.com/questions/1007391/using-perl-python-or-ruby-how-to-write-a-program-to-click-on-the-screen-at)

Ubuntu： [如何单击屏幕上的坐标？](https://stackoverflow.com/questions/5672286/how-to-click-on-a-coordinate-on-a-screen)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T17:00:38.430

与其搜索“如何使用 Python 在 OSX 中移动光标”，不如搜索“如何在 OSX 中移动光标”，然后搜索如何在 Python 中使用该界面，您会发现更好的结果。

似乎[Objective-C/Cocoa](https://stackoverflow.com/questions/3570584/set-cursor-position-in-mac-os)用于与原生 Mac OS X 接口集成，Python 文档建议使用[PyObjC 作为 Python 绑定到 Apple 的 Objective-C/Cocoa 框架](http://docs.python.org/py3k/using/mac.html#gui-programming-on-the-mac)。

希望这是足够的信息，可以让您上路。

# iphone - 在 nsdocumentdirectory 中添加 uiimage 并检索

> ID：10409260
> 
> 赞同：0
> 
> 时间：2012-05-02T07:12:49.170
> 
> 标签：iphone, ios, cocoa-touch, uikit, uiimage

我正在像这样将图像保存到 nsdocumentdirectory

```
NSArray *pathArr = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,
                                                       NSUserDomainMask,
                                                       YES);
NSString *path = [[pathArr objectAtIndex:0]

                  stringByAppendingPathComponent:@"img.data" ];

NSLog(@"path=%@",path);

NSData *retrievedData = [NSData dataWithContentsOfFile:path];

imgView.image=[UIImage imageWithData:retrievedData]; 
```

问题是只保存了一张图像。如果我尝试显示图像，则会显示最后保存的图像。如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T07:23:43.217

通过在末尾附加一个整数来保存每个图像。喜欢：

```
NSString *path = [[pathArr objectAtIndex:0] stringByAppendingPathComponent:[NSString stringWithFormat:@"img%d.data",integerCount]]; 
```

还：

```
integerCount++; 
```

告诉我它是否有帮助！会给你一个替代的溶胶。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T07:16:35.010

为每个图像使用不同的图像名称，然后您将获得所有图像...

# iphone - 我们支持的 url NSURLConnection

> ID：10409262
> 
> 赞同：0
> 
> 时间：2012-05-02T07:13:03.580
> 
> 标签：iphone

我想在我的应用程序中进行延迟加载，所以我正在使用 NSURLConnection 下载图像，如您所见

```
premiumRequest=[NSURLRequest requestWithURL:[NSURL URLWithString:@"www.aaaaaaaaa.com/aaaaaaaaa/api/uploads/company_logo/cc2ab63fd3eb564be64b4f21bd083bc7.png"]
                   cachePolicy:NSURLRequestUseProtocolCachePolicy
                timeoutInterval:60.0];

premiumConnection=[[NSURLConnection alloc] initWithRequest:premiumRequest delegate:self]; 
```

但不幸的是我收到以下错误

```
error downloading: unsupported URL 
```

如果将 url 粘贴到浏览器上它可以正常工作，但它在 NSURLConnection 中不起作用，请帮忙看看上面的 URL 有什么问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T07:15:33.900

尝试在您的 url 中包含适当的 url 方案，例如

```
...[NSURL URLWithString:@"http://www... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T07:18:37.860

```
NSURL *url = [NSURL URLWithString:@"http://www.invoicera.com/app/api/check_json_api.php?token=CFBF57B78FB183157BF93F0EB00C9C33"];

NSString *jsonRequest = [NSString stringWithFormat:@"&json_data=%@",[[NSString stringWithFormat:@"yourString"] stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];

NSLog(@"%@",jsonRequest);

NSData *json_data = [NSData dataWithBytes:[jsonRequest UTF8String] length:[jsonRequest length]];

NSLog(@"The converted String is %@",json_data);

NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:url];

[request setHTTPMethod:@"POST"];
[request setHTTPBody: json_data];
NSLog(@"%@",json_data);
// [request setValue:@"application/json" forHTTPHeaderField:@"Accept"];
[request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
//[request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
[request setValue:[NSString stringWithFormat:@"%d", [json_data length]] forHTTPHeaderField:@"Content-Length"];
[request setHTTPBody:[[jsonRequest stringByAddingPercentEscapesUsingEncoding:NSASCIIStringEncoding]
                      dataUsingEncoding:NSUTF8StringEncoding 
                      allowLossyConversion:YES]]; 
```

// [NSURLConnection connectionWithRequest:[request autorelease] delegate:self];

```
NSURLConnection *nsUrlConnection=[[NSURLConnection alloc]
                                  initWithRequest:request 
                                  delegate:self];

// Successful connection.
if (nsUrlConnection) {

    [self indicatorView];
   // [self initSpinner];
   // [self spinBegin];

    NSMutableData *data = [[NSMutableData alloc] init];
    self.receivedData=data;
    [data release];
} 
// Unsuccessful connection.
else {

}  
// Clean up
[url release];
[request release]; 
```

之后正确设置属性，您将收到任何错误。

按答案的向上箭头给答案投票。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T07:18:01.653

```
    NSURL *webURL = [NSURL URLWithString:@"YOur URL here"];
    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:webURL];
    [请求 setTimeoutInterval:60.0];
    [请求 setHTTPMethod:aStrGetOrPost];
    NSError *错误；
    NSURLResponse *响应；

    NSData *returnData = [NSURLConnection sendSynchronousRequest:request returnedResponse:&response error:&error];

    如果（返回数据）
        {
            //对数据做你想做的事
        }
        别的
        {
            //显示失败提示
        }

```

# java - 如何将结果集作为输入从 java 传递到 oracle 存储过程

> ID：10409264
> 
> 赞同：1
> 
> 时间：2012-05-02T07:13:05.817
> 
> 标签：java, oracle, jdbc, resultset, ref-cursor

我的 java 程序在一台数据库服务器上调用 oracle 存储过程。获取结果集并希望将该结果集传递给我在另一台数据库服务器上的存储过程。

如何将结果集作为输入参数传递给接受 ref 游标的 Oracle 存储过程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T00:04:53.753

你不能。通过使用数据库链接从第二台服务器访问第一台服务器，或者您需要在中间 Java 代码级别（连接到两台服务器）中处理它

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T07:26:39.377

Callable 语句没有任何方法可以将结果集设置为参数。另一种方法是调用希望结果集作为参数的过程，在 pl/sql 本身中调用它。可能您也可以使用表格类型来解决您的问题。

# php - 使用 smarty 模板的 php Xcart 设置

> ID：10409267
> 
> 赞同：0
> 
> 时间：2012-05-02T07:13:15.607
> 
> 标签：php, smarty, x-cart

我想在我的本地主机 wamp 服务器上运行现有的产品商店站点我更改了配置文件中的所有配置变量，如下所示

```
$sql_host ='localhost';
$sql_user ='root';
$sql_db ='beauty';
$sql_password ='';
$xcart_http_host ="http://localhost/beautyuniverse/";
$xcart_https_host ="http://localhost/beautyuniverse/";
$xcart_web_dir =""; 
```

但是在运行我的应用程序时没有任何显示，只有纯空白页面显示所有最欢迎解决我的问题。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T07:23:17.740

您看到空白页的原因是 PHP 生成了一个错误（可能是由于验证不正确）并且执行已停止。

要查看错误，您可以尝试更改配置`php.ini`以显示错误，或者尝试通过在文件的最开头添加以下行来更改 PHP 中的错误报告设置：

```
<?php
error_reporting(E_ALL); // report all errors
ini_set('display_errors', 1); // display errors to browser 
```

您可以在手册中找到有关错误报告的更多信息：

[http://www.php.net/manual/en/function.error-reporting.php](http://www.php.net/manual/en/function.error-reporting.php)

确定错误后，您可以尝试修复它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T17:12:10.850

将购物车移动到另一台服务器后，我遇到了类似的问题（空白页）。我不得不在 X-Cart 中打开开发模式并将调试模式调到 3（记录并将错误写入屏幕）。

在 config.php 中，查找 debug_mode 标志并将其设置为 3。

`$debug_mode = 3`

并取消注释这一行：

`define('DEVELOPMENT_MODE', true);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-18T09:18:38.797

除了 PHP 错误之外，x-cart 中出现空白页面的另一个原因可能是商店中存在第 3 方模块，该模块基于域相关许可证（仅在客户端的域上工作），或需要 IonCube 软件，以防其代码被加密。您也可以在本地服务器中安装 IonCube，从而运行该站点，但您将无法通过调试器跟踪它的代码。

# eclipse - 如何缩短类路径？

> ID：10409271
> 
> 赞同：4
> 
> 时间：2012-05-02T07:13:41.537
> 
> 标签：eclipse, classpath

我遇到了“CreateProcess error=87”的问题，在这里找到了解决方案。 [无法启动应用程序（CreateProcess 错误=87），不能使用缩短类路径解决方法](https://stackoverflow.com/questions/2893970/fail-to-launch-application-createprocess-error-87-cant-use-shorten-classpath)

我已经将我的项目移动到根目录，但它仍然抱怨类路径太长的问题，而且我的 proejct 是 maven 样式的，我无法删除任何依赖项。有没有其他方法可以缩短类路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-11T09:00:51.680

我们在项目中遇到了同样的问题。痛苦是您需要明确列出类路径上的所有 jar。

我们通过实现将目录列表作为参数的自定义启动器类来解决它。在启动器程序中，您可以读取这些目录中的 jar 列表，创建一个类加载器并将您的 jar 列表提供给它。然后使用类加载器运行您的实际程序。

当然，启动器可以通过其他方式确定所需 jar 的列表，例如，您可以在文件中提供它，或者您喜欢的任何方式。此解决方案的关键是您只需在命令行中提供启动器所需的类路径，而不是实际程序使用的整个类路径。

我希望这有帮助..

# javascript - 理解 javascript 这个作用域——用一个简单的 Backbone 例子

> ID：10409274
> 
> 赞同：2
> 
> 时间：2012-05-02T07:13:51.777
> 
> 标签：javascript, backbone.js, closures, this

看看[这个 jsFiddle](http://jsfiddle.net/yec2h/15/)

下面还列出了代码：

```
window.MyView = Backbone.View.extend({

ticks: 0,
initialize: function() {
    //window.setInterval(this.onTimerTick, 1000); // arghhh.. can't understand the 'this' scoping       
    window.setInterval(this.onTimerTick2, 1000);  // Works great with globals       
},

render: function() {
    this.$el.text(this.ticks);            
},

onTimerTick: function() {  // Trouble with this
    this.ticks++;
    this.render();
},

onTimerTick2: function() {  // Using globals
    window.ticks2++;
    $('#count').text(window.ticks2);
}
});

window.My = new MyView({ el: $("#count") });
window.ticks2 = 0; 
```

看代码，你看到我想使用onTimerTick函数，但是因为我不知道如何从window-this到My-this，我必须使用onTimerTick2中看到的方法。（通常我会使用 that=this，但在这种情况下还不够）

感谢您让我理解这一点（！）

谢谢

拉尔西

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T07:17:48.893

传递`this.onTimerTick2`给 setTimeout 时，将调用该函数并`this`绑定到全局对象，而不是您的对象。

如果 underscore.js 可用（根据 @ori 是可用的），您可以在调用时使用`_.bind()`锁定`this`到正确的对象：

```
window.setInterval(_.bind(this.onTimerTick, this), 1000); 
```

以下是一些不依赖于库的解决方案：

```
// Works in all browsers
var self = this;
window.setInterval(function() {
    self.onTimerTick();
}, 1000); 
```

使用现代 JS 引擎，您还可以使用它[`Function.bind()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind)来保持正确`this`：

```
// Requires a modern JS engine
window.setInterval(this.onTimerTick.bind(this), 1000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T07:19:38.077

看起来主干使用下划线的[绑定](http://documentcloud.github.com/underscore/#bind)功能，所以：

```
 window.setInterval(_.bind(this.onTimerTick2, this), 1000); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T10:09:01.667

您还可以依靠`_.bindAll`实用程序方法来保持代码清洁和可重用。

```
initialize: function() {
    _.bindAll(this, 'myFunction')
    setInterval(this.myFunction, 1000)
},

myFunc: function() {
    console.log(this)
} 
```

# php - 如何避免一次做 5000 次查询？

> ID：10409276
> 
> 赞同：0
> 
> 时间：2012-05-02T07:14:01.937
> 
> 标签：php, mysql, facebook

我用**facebook connect**创建了一个简单的博客站点，以了解朋友何时访问该博客。

要知道这一点，我必须保存 facebook 朋友的每个 id，有时一个人有多达 5000 个朋友，**这意味着 5000 个 INSERT 查询**（非常慢）。

您建议我使用什么解决方案来避免 5000 INSERT 查询？

也许我可以一次将所有 id 保存在 mysql 文本字段中？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-02T07:16:21.863

改为执行*一个长* `INSERT`查询：

```
INSERT INTO `table` (`foo`, `bar`, `baz`) VALUES
('...', '...', '...'),
('...', '...', '...'),
... 
```

# php - 如何将 Flickr 中的图像添加到我的网站？

> ID：10409281
> 
> 赞同：-1
> 
> 时间：2012-05-02T07:14:27.193
> 
> 标签：php, image, flickr

我在 Flickr 上有一张照片集，想将照片集中的图像添加到我的网站。

假设我的照片集中在 Flickr 上有 10 张图像。我想从闪烁的网站上一次显示 3 张图像。我将如何做到这一点？

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T07:33:06.807

有几个预先配置的 Flickr 幻灯片
[http://www.google.com/search?q=flickr+slideshow](http://www.google.com/search?q=flickr+slideshow)

您还可以使用此页面中的幻灯片之一并输入单个照片 URL： [http ://www.1stwebdesigner.com/css/fresh-jquery-image-gallery-display-solutions/](http://www.1stwebdesigner.com/css/fresh-jquery-image-gallery-display-solutions/)

如果您只想将 3 张 Flickr 照片放在一个页面中，您可以在 Flickr 上查看每张照片时使用“共享”按钮来获取一段 HTML，然后您可以将其粘贴到页面中。这是一个样本...

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>3 Flickr Photos</title>
</head>
<body>

<a href="http://www.flickr.com/photos/55166285@N00/1274107940/" title="the sunken garden by perfectweb, on Flickr"><img src="http://farm2.staticflickr.com/1245/1274107940_ede5aa897d_z.jpg" width="640" height="480" alt="the sunken garden"></a>
<br>
<a href="http://www.flickr.com/photos/55166285@N00/1274119018/" title="tree rings by perfectweb, on Flickr"><img src="http://farm2.staticflickr.com/1015/1274119018_1422d64d17_z.jpg" width="640" height="480" alt="tree rings"></a>
<br>
<a href="http://www.flickr.com/photos/55166285@N00/1274114292/" title="study of flowers by perfectweb, on Flickr"><img src="http://farm2.staticflickr.com/1012/1274114292_f847986865_z.jpg" width="640" height="480" alt="study of flowers"></a>

</body>
</html> 
```

# java - apache common-io会在真正的IO操作之前打包缓冲数据吗？

> ID：10409286
> 
> 赞同：0
> 
> 时间：2012-05-02T07:14:43.150
> 
> 标签：java, apache, file-io, fileutils

我想使用apache common-io包，但是我不确定写/读函数中是否有任何缓冲策略。
例如，在 FileUtil 类中有如下函数

```
 static void write(File file, CharSequence data); 
```

如果每次调用这些函数都遵循 open->read/write->close，效率会很低。我相信一定有一些缓冲策略，对吧？

程

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T07:21:25.923

它不会缓存打开的文件，否则您可能会面临文件句柄用完的风险，或者因为文件处于打开状态而无法重命名/删除文件。

它使用了一些缓冲，但是当 write() 返回时，您可以期望文件被关闭。

# iphone - 修改“通话中”菜单

> ID：10409289
> 
> 赞同：0
> 
> 时间：2012-05-02T07:14:49.190
> 
> 标签：iphone, objective-c, menu, call

我想更改 iphone 的“通话中”菜单，例如添加新功能，但我的问题是我不知道从哪里开始。我的意思是通话期间显示的菜单。

有谁知道我要寻找什么？是否可以添加自定义功能？

任何帮助或提示都会很棒...... :)

问候，马修

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T07:19:38.457

简单的答案..你不能..你不能使用你的应用程序修改任何现有的 iPhone 应用程序。

# tomcat - Tomcat ServletContextListener.contextDestroyed 未调用

> ID：10409290
> 
> 赞同：8
> 
> 时间：2012-05-02T07:14:49.133
> 
> 标签：tomcat, servletcontextlistener

在重新加载上下文时，我们有多个 MemoryLeaks（在 catalina.out 中找到）。

为了清理这些线程，我创建了 ServletContextListener 的实现。

`contextInitialized()`创建上下文时成功调用该方法，因为我可以看到日志条目。

但是该`contextDestroyed()`方法没有被调用，所以我的清理代码没有被调用。任何想法为什么会发生这种情况？

**当需要重新加载上下文时，我应该实现另一个需要注意的接口吗？**

```
public class MyContextListener implements ServletContextListener {

    private static final Logger log = Logger.getLogger(MyContextListener.class);

    @Override
    public void contextDestroyed(final ServletContextEvent arg0) {
        MyContextListener.log.info("destroying Servlet Context");
        //Do stuff
        MyContextListener.log.info("Servlet Context destroyed");
    }

    @Override
    public void contextInitialized(final ServletContextEvent arg0) {
        try {
            MyContextListener.log.info("Creating Servlet Context");
            //Do stuff
        } finally {
            MyContextListener.log.info("Servlet Context created");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-06-13T11:32:08.897

我遇到了一些问题，我通过使用“修复”了它`System.out.println`。

```
 @WebListener
  public class App implements ServletContextListener {
      private static final Logger logger = LoggerFactory.getLogger(App.class);

      @Override
      public void contextInitialized(ServletContextEvent sce) {
          System.out.println("START");
          logger.info("START");
      }

      @Override
      public void contextDestroyed(ServletContextEvent sce) {
          System.out.println("STOP");
          logger.info("STOP");
      }
  } 
```

日志.txt：

```
[%thread] %-5level %logger{0}:%L - %msg%n
[localhost-startStop-1] INFO  App:16 - START 
```

标准输出：

```
Commons Daemon procrun stdout initialized
START
STOP 
```

**这意味着`contextDestroyed`被调用，但记录器已经不起作用......**我使用`org.slf4j.Logger`

要修复它，请参阅：[Logging from servlet context destroy event](https://stackoverflow.com/questions/37557754/logging-from-servlet-context-destroyed-event)

对不起，我的英语不好

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-31T11:02:05.730

据我所知，有几个问题：

1.  servlet 和过滤器在调用 contextDestroyed 之前被完全销毁，因此对于某些任务来说可能为时已晚。我不知道为什么 Tomcat 在调用此方法之前会报告潜在的内存泄漏。：-/
2.  在调用此方法之前，类加载器似乎已被禁用（过滤器和 servlet 上的 destroy 方法可能也是如此？）这意味着如果您的 contextDestroyed 方法需要任何尚未加载的类，它将失败。:-(

# asp.net - 根据asp.net中的子节点值拆分XML文件

> ID：10409301
> 
> 赞同：0
> 
> 时间：2012-05-02T07:16:13.417
> 
> 标签：asp.net, xml, dom

我想根据子节点拆分 XML 文件，并显示拆分文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T07:40:20.290

虽然您没有提供完整的信息，但以下是接近您要求的示例代码。

它读取包含许多名为 ChildNode 的子节点的 main.xml 文件，并为每个子节点编写单独的文件。

```
XmlDocument xml= new XmlDocument();
xml.Load(@"c:\main.xml");

XmlNodeList xnRep = xml.DocumentElement.GetElementsByTagName("ChildNode");

string strFileName = "ChildNode";
int intFileCount;

for(int i =0; i <xnRep.Count;i++)
{
          //Stores the ChildNode Elements in the Variable
          strDest = xnRep[i].InnerXml;

          //Create the New File with the name "ChildNode_1.xml" and "ChildNode_3.xml" 
          XmlWriter xw = XmlWriter.Create(strFileName + "_" + intFileCount + ".xml");

          //Write the XML
          xw.WriteRaw(strDest.ToString());

          xw.Close();

          intFileCount++;
} 
```

您还可以在[将 xml 文档拆分为块时检查类似的答案](https://stackoverflow.com/questions/249266/split-xml-document-into-chunks)

# java - jsf a4j 在弹出屏幕上不起作用

> ID：10409303
> 
> 赞同：0
> 
> 时间：2012-05-02T07:16:18.597
> 
> 标签：java, jsf

我在 JSF 工作

当我打开弹出屏幕时，我的 a4j ajax 调用不起作用。

如果我不弹出窗口，那么相同的屏幕在哪里工作。

这是平常的事吗？

* * *

弹出一页......这样的代码很少......

```
<%@ taglib uri="http://java.sun.com/jsf/html" prefix="h"%>
<%@ taglib uri="http://java.sun.com/jsf/core" prefix="f"%>
<%@ taglib prefix="t" uri="http://myfaces.apache.org/tomahawk"%>
<%@ taglib uri="https://ajax4jsf.dev.java.net/ajax" prefix="a4j"%> 
```

延迟设置为

```
<a4j:queue requestDelay="500" ignoreDupResponses="true" /> 
```

和实际的ajax调用

```
<a4j:commandLink 
    actionListener="#{insuranceBackingBean.viewAll}"
    ajaxSingle="true"
    reRender="formularyList, noRecFoundGridForFormulary, patientCurrentDemographicDetails,patientInsuranceDemographicDetails,conflictSection"
    eventsQueue="onClick"
    onclick="setEligibilityValues('#{insuranceBean.fromEligibility}','#{insuranceBean.payerMessage}','#{insuranceBean.pharmacyBenefitRetailCoverageStatus}','#{insuranceBean.pharmacyBenefitMailOrderCoverageStatus}','#{insuranceBean.pharmacyBenefitLTCCoverageStatus}','#{insuranceBean.pharmacyBenefitSpecialtyCoverageStatus}');setVisibleConflictGrid();"
    >
    <f:verbatim>View</f:verbatim>
    <f:param name="insuranceID" value="#{insuranceBean.id}" /> 
```

`setEligibilityValues`正在调用但未被调用的脚本在哪里`insuranceBackingBean.viewAll`。

有什么办法吗`troubleshoot`？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-12T14:54:16.830

我不知道您使用哪个组件/标签作为弹出窗口，但我多次使用不同的组件遇到这个问题，我知道的唯一解决方案是：您应该将弹出窗口作为**模式**对话框打开。这意味着它应该在**iframe**中呈现。

通常，如果弹出窗口未配置为模式，则通常会在 div/span 中呈现，并且由于某种原因，ajax 调用无法在服务器端执行。

# extjs - 如何从 ext js 中的窗口中删除项目？

> ID：10409308
> 
> 赞同：0
> 
> 时间：2012-05-02T07:16:42.167
> 
> 标签：extjs, extjs3

我想从 Ext 窗口组件中删除所有项目。意味着我必须在按钮事件中清除窗口。必须感谢任何帮助....谢谢

只是

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T08:02:42.087

尝试

窗口的 removeAll() 方法，从这个容器中移除所有组件。

`window.removeAll()`或者`Ext.getCmp('windowId').removeAll();`

参考：[Ext.Window-method-removeAll](http://docs.sencha.com/ext-js/3-4/#!/api/Ext.Window-method-removeAll)

# struts - 当我不确定输入字段的数量时，如何创建 struts 表单类

> ID：10409318
> 
> 赞同：0
> 
> 时间：2012-05-02T07:17:20.753
> 
> 标签：struts

我有两个表，country_list 和 rating_list。有单独的jsp，用于向系统添加新国家。问题在于编辑评级页面，可以在其中编辑国家/地区的所有评级。当我打开编辑评级页面时，所有国家名称将一一显示为带有相应文本字段的标签，以给出用户想要给出的评级。当用户在编辑评分页面点击提交时，评分值如何映射到表单值？国家名单可以从数据库中填充，但收视率呢？如果我确定国家/地区的数量，那么我可以在表单类中给出这么多的评级字段。但我不确定会出现多少文本字段。我正在使用struts 1.2。我是否需要在表单中创建 100 个带有空值的字符串，尽管这不是一个好习惯。

例如，对于登录页面，我可以创建两个字段，例如“字符串用户名；字符串密码”和对应的 setter 和 getter。

但在我的问题中，我不确定有多少个国家和相应的评级。所以我很困惑，如果我将国家名称作为列表并以列表形式提供，那么在提交表单时，国家名称和评级是否会自动映射到相应的列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T20:10:39.200

您可能会发现以下技术很有用。在您的表单类中添加类似于以下内容的 getter 和 setter：

```
public void setRating(String a_CountryId, String a_sRating)
{
    // Store the rating for the given country id, e.g. in a map
}

public String getRating(String a_sCountryId)
{
   // Return the rating for the given country id, e.g. from a pre-populated map
} 
```

然后，您可以在 JSP 页面中使用以下语法访问它们：

```
property="rating(${country.id})" 
```

例如，遍历 JSP 页面中的国家并使用 html:input 标签绑定到上面的 getter，例如：

```
<logic:iterate name="countryList" id="country">
    <bean:write name="country" property="name"/>
    Rating:
    <html:text name="form" property="rating(${country.id})"/>
</logic:iterate> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T07:20:11.103

使用逻辑标签，特别是逻辑：迭代。这是它如何工作的链接：

[struts 逻辑：迭代](http://struts.apache.org/1.2.x/userGuide/struts-logic.html#iterate)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T07:25:18.297

不，您不必创建 100 个字符串。

假设您有一个对象列表，例如

```
List<Country> countryList;// This list is getting populated say from database 
```

您的 jsp 代码将具有以下内容：

```
<logic:iterate name="countryList" id="countryListId">
  <label><bean:write name="countryListId" property="countryName"/></label>
</logic:iterate> 
```

根据评论：

考虑国家看起来像这样：

```
public class Country {

  private String countryName;

  private List<Rating> ratingList;

} 
```

您的最小 html 可能如下所示：

```
<table>
    <logic:iterate name="countryList" id="countryListId">
      <tr>
          <td>
              <label><bean:write name="countryListId" property="countryName"/></label>
          </td>
          <logic:iterate id="ratingListId" name="rating" property="ratingList">
              <td>
                  <input type="text"><bean:write name="ratingListId" property="ratingName"/></input>
               </td>
          </logic:iterate>
      </tr>
    </logic:iterate>
</table 
```

# web-services - Codeigniter RestFul 库 防止 SQL 注入

> ID：10409319
> 
> 赞同：1
> 
> 时间：2012-05-02T07:17:26.090
> 
> 标签：web-services, security, codeigniter, rest, sql-injection

我正在使用 codeigniter philsturgeon Restful 库来开发 Web 服务。那么如何防止来自 Web 服务的 SQL 注入呢？codeigniter 中是否有任何库可以防止来自 RESTful Web 服务的 SQL 注入？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T08:24:36.237

您可以通过以下方式防止 SQL 注入：

1.  转义您注入 SQL 查询的任何文字值；
2.  （更好）使用不需要您将文字值注入 SQL 查询的数据库接口，例如参数化查询。

CodeIgniter 的数据库库为您提供了这两个：

1.  `$this->db->query('SELECT x FROM y WHERE z='.$this->db->escape('value1'));`
2.  （更好）`$this->db->query('SELECT x FROM y WHERE z=?', array('value1'));`

（不要误以为可以通过输入清理正确解决 SQL 注入问题。）

# php - 关于 RPG PHP 系统的建议

> ID：10409321
> 
> 赞同：0
> 
> 时间：2012-05-02T07:17:32.487
> 
> 标签：php, class

我正在寻找使用 php/mysql/javascript 制作一个小型 rpg 游戏，但我有一个简单的问题，将项目等的所有数据存储在数据库中会更好吗？例如，一个名为 items 的表，其中每个项目的名称、成本、销售成本、统计信息等都在其中。或者为每个项目制作php类并将项目类型和级别存储在数据库中会更好。如果是最后一个，我将如何以正确的方式做这件事，我知道如何制作课程等，但不明白他们在这种情况下将如何工作。

任何建议都会很好，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T07:29:57.823

我建议不要为每个项目都设置一个特定的类；而是创建一些类，如 WeaponItem、PotionItem、QuestItem，它们都继承自 Item 基类。

至于保存数据，这是一个品味问题。由于您可能只能通过键访问该项目，因此您可以将一些[序列化](http://php.net/manual/en/function.serialize.php)数组制作成文件并从特定的项目目录管理它们。

我建议你看看[GameDev.net](http://www.gamedev.net/page/index.html)，他们有关于所有游戏编程的教程和很好的论坛。

快乐黑客！

# c - 确定我的应用程序获得什么顺序的最佳方法？

> ID：10409323
> 
> 赞同：1
> 
> 时间：2012-05-02T07:17:40.490
> 
> 标签：c, windows

我想写一个等待用户下达命令的计算器。
例如：
add 1 2
sub 12 4
找出用户给出的订单以及该订单之后给出的令牌的最佳方法是什么？
我正在 Windows 上用 C 语言编写我的项目，它是基于控制台的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T07:55:27.863

你可以使用`scanf`

```
#include <stdio.h>

int main ()
{
    char cmd[1024];
    int a, b;

    printf ("Enter input: ");
    scanf ("%s %d %d",cmd, &a, &b);  
    if(strcmp(cmd,"add")==0) {
        printf ("Result: %d\n", a + b);
    } else if(strcmp(cmd,"sub")==0) {
        printf ("Result: %d", a - b);
    } else {
        printf ("Unrecognized command: '%s'\n", cmd);
    }
} 
```

如果您打算构建一个复杂的，您应该查看[lex 和 yacc 。](http://epaperpress.com/lexandyacc/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T07:44:30.430

从标准输入读取行。`fgets`可能有用。
解析每一行。`strtok_r`可以在这里提供帮助（我总是更喜欢它`strtok`，当事情变得复杂时会导致讨厌的错误）。
将第一个标记与已知命令列表中的每个命令进行比较。
做需要做的事情。

# c# - WebBroser1.Navigate 只工作一次（C#）（重新加载网络浏览器）

> ID：10409327
> 
> 赞同：1
> 
> 时间：2012-05-02T07:17:56.563
> 
> 标签：c#, browser

我有带有网络浏览器组件的表单，有一个触发页面重新加载的按钮，这里是代码：

```
kiekmiestu = comboBox1.Text;
string nuoroda = "http://centrosokoladine.lt/PHP/generatorius.php?m=" + kiekmiestu;
webBrowser1.Navigate(nuoroda); 
```

假设 kiemiestu 得到 teks 4，因此 php 生成器在每次页面刷新时在地图的随机位置生成 4 个城市，我的问题是，当我第二次单击按钮时，WebBrowser1 似乎没有第二次导航，因为页面没有改变。也许是缓存问题，如果 WebBrowser 已经显示，它不会导航到同一页面？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T07:22:51.247

您可以尝试**webbrowser.refresh()** [MSDN](http://msdn.microsoft.com/en-us/library/txewax99.aspx)：

```
private void refreshButton_Click(object sender, EventArgs e)
{
    // Skip refresh if about:blank is loaded to avoid removing
    // content specified by the DocumentText property.
    if (!webBrowser1.Url.Equals("about:blank"))
    {
        webBrowser1.Refresh();
    }
} 
```

**更多关于 webbrowser.Refresh() 以及为什么导航不起作用：**

> WebBrowser 控件将来自最近访问的站点的网页存储在本地硬盘上的缓存中。每个页面都可以指定一个过期日期，指示它将在缓存中保留多长时间。当控件导航到页面时，它通过显示缓存版本（如果可用）而不是再次下载页面来节省时间。Refresh 方法强制 WebBrowser 控件通过下载来重新加载当前页面，确保控件显示最新版本。

要清除 wbbrowser 控件缓存，请考虑这篇文章：http: [//support.microsoft.com/kb/326201/de](http://support.microsoft.com/kb/326201/de)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T07:24:18.203

尝试使用

```
webBrowser1.Refresh(); 
```

# android - 如何将iphone设备连接到非iphone设备？

> ID：10409329
> 
> 赞同：0
> 
> 时间：2012-05-02T07:18:02.090
> 
> 标签：android, iphone, bluetooth, xcode4.3, ios5.1

我是这个 iPhone 开发的新手。目前我正在开发一个应用程序，该应用程序需要从 iPhone 向非 iPhone 设备（如 android）传输数据。有人可以建议我这样做的方法吗？是否有任何库或 API 或框架可以做到这一点?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T07:22:43.867

试试 Bump API 的链接[http://bu.mp/api](http://bu.mp/api)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-02T07:27:14.117

你应该通过这两个问题 -

[iPhone - 如何在 P2P 中传输数据](https://stackoverflow.com/questions/1084799/iphone-how-is-data-transferred-in-p2p)

[原则上，Android 设备是否可以通过蓝牙/GameKit 与 iPhone 交互？](https://stackoverflow.com/questions/2080644/is-it-possible-in-principle-for-an-android-device-to-interface-with-an-iphone)

希望有帮助

# 3d - 如何检测电影是 3D 的？

> ID：10409330
> 
> 赞同：10
> 
> 时间：2012-05-02T07:18:10.343
> 
> 标签：3d, ffmpeg

有谁知道如何检测视频文件是 3D 电影？

我已经尝试使用 ffmpeg 工具，但我没有成功找出如何去做。

[**样本**](http://strm.googlecode.com/files/82-3D-LHelEIJVxiE.mp4)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T00:09:05.957

It depends on the format.

On stream level: For AVC you could look for frame packing arrangement SEI messages. For MVC you could look for slice extension NALs (type=20).

[http://www.merl.com/reports/docs/TR2011-022.pdf](http://www.merl.com/reports/docs/TR2011-022.pdf)

I looked at your file. It is AVC 3D with frame packing type 3 (side by side - L is on the left, R on the right). I extraced the H.264 stream and I found at byte offset 0x23: 00 00 00 01 06 2D this is a SEI message (06) of type frame packing arrangement (2D). Indeed your file contains information indicating 3D

Comannd line tool to detect 3D

1.  Extract the h.264 stream using mp4box -raw 1 82-3D-LHelEIJVxiE.mp4 ([http://gpac.wp.mines-telecom.fr/mp4box/](http://gpac.wp.mines-telecom.fr/mp4box/))

take the H.264 elementary stream 82-3D-LHelEIJVxiE_track1.h264 and run it throught the followin code:

```
#include <iostream>
#include <fstream>

typedef unsigned char uint8_t;

enum ResultCode
{
   E_Error   = -1,
   E_OK      = 0,
   E_No3D    = 2,
   E_Found3D = 3,

};

enum NALType
{
   NALType_Unknown             =  0,
   NALType_Slice               =  1,
   NALType_Slice_DPA           =  2,
   NALType_Slice_DPB           =  3,
   NALType_Slice_DPC           =  4,
   NALType_Slice_IDR           =  5,
   NALType_SEI                 =  6,
   NALType_SPS                 =  7,
   NALType_PPS                 =  8,
   NALType_AU_Delimiter        =  9,
   NALType_SequenceEnd         = 10,
   NALType_StreamEnd           = 11,
   NALType_FillerData          = 12,
   NALType_CodedSliceExtension = 20,

   NALType_MAX                 = 0x1f
};

enum SEIType
{
   SEIType_FramePackingArrangement = 0x2D
};

enum StartCodeState
{
   StartCodeState_none,
   StartCodeState_0,
   StartCodeState_0_0,
   StartCodeState_0_0_1
};

int Is3D(std::ifstream & inputFile)
{
   int nResult = E_OK;

   StartCodeState eStartCodeState = StartCodeState_none;

   while( (E_OK == nResult) && ( ! inputFile.eof() ) )
   {
      uint8_t byte = inputFile.get();

      switch(eStartCodeState)
      {
         case  StartCodeState_none :
            eStartCodeState = (byte == 0) ? StartCodeState_0 : StartCodeState_none;
            break;

         case  StartCodeState_0 :
            eStartCodeState = (byte == 0) ? StartCodeState_0_0 : StartCodeState_none;
            break;

         case  StartCodeState_0_0 :
            switch(byte)
            {
               case 0  : eStartCodeState = StartCodeState_0_0;   break;
               case 1  : eStartCodeState = StartCodeState_0_0_1; break;
               default : eStartCodeState = StartCodeState_none;

            }

         default:
            ;
      }

      if(  eStartCodeState == StartCodeState_0_0_1 )
      {
         uint8_t cNALType  = inputFile.get();
                 cNALType &= NALType_MAX;

         switch(cNALType)
         {
            case NALType_CodedSliceExtension :
               nResult = E_Found3D;
               break;

            case NALType_SEI :
            {
               uint8_t cSEIType  = inputFile.get();
               if( cSEIType == SEIType_FramePackingArrangement )
               {
                  nResult = E_Found3D;
               }
               break;
            }

            default:
               ;
         }

         eStartCodeState = StartCodeState_none;
      }
   }

   return nResult;
}

int main(int argc, char * argv[])
{
   int nResult = E_OK;

   if( argc != 2 )
   {
      nResult = E_Error;

      std::cerr << "Usage: "
                << argv[0]
                << " <H.264 elementary stream input file>"
                << std::endl;

   }

   if( E_OK == nResult )
   {
      std::ifstream inputFile(argv[1], std::ios::binary);

      if( inputFile.is_open() )
      {
         if( E_Found3D == Is3D(inputFile) )
         {
            std::cout << "File: "
                      << argv[1]
                      << " contains 3D."
                      << std::endl;

            nResult = E_Found3D;

         }
         else
         {
            std::cout << "No 3D found" << std::endl;

            nResult = E_No3D;
         }

      }
      else
      {
         std::cerr << "Error opening input file: " 
                   << argv[1]
                   << std::endl;

         nResult = E_Error;
      }
   }

   return nResult;
} 
```

# web-services - 使用 Apache CXF 创建基于 SOAP 的 Web 服务？

> ID：10409332
> 
> 赞同：2
> 
> 时间：2012-05-02T07:18:20.110
> 
> 标签：web-services, soap, cxf

我知道如何使用 CXF 创建一个基于 REST 的 Web 服务，并将数据自动反序列化为对象。但是如何使用 CXF 创建基于 SOAP 的 Web 服务？我需要将 SOAP 调用数据类似地反序列化为 java 对象。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T07:18:33.137

我找到了解决方案，这就是它的进展方式......

**POM.xml**

```
<dependency>
  <groupId>org.apache.cxf</groupId>
  <artifactId>cxf-rt-frontend-jaxws</artifactId>
  <version>${cxf.version}</version>
  <exclusions>
        <exclusion>
              <groupId>wsdl4j</groupId>
              <artifactId>wsdl4j</artifactId>
        </exclusion>
        <exclusion>
              <groupId>org.eclipse.jetty</groupId>
              <artifactId>jetty-server</artifactId>
        </exclusion>
        <exclusion>
              <groupId>org.apache.geronimo.specs</groupId>
              <artifactId>geronimo-servlet_2.5_spec</artifactId>
        </exclusion>
  </exclusions>
</dependency>

<dependency>
  <artifactId>cxf-rt-transports-http</artifactId>
  <groupId>org.apache.cxf</groupId>
  <version>${cxf.version}</version>
</dependency> 
```

**豆类.xml**

```
<!-- xmlns:jaxws="http://cxf.apache.org/jaxws" http://cxf.apache.org/jaxws http://cxf.apache.org/schemas/jaxws.xsd -->

<jaxws:endpoint address="/mysws"
    implementor="com.company.project.MySoapService"
    id="mySoapService" /> 
```

**爪哇**

```
@WebService
public interface IMySoapService {
      MySoapResponse someOperation(MySoapRequest requestObj);
}

@WebService(endpointInterface = "com.company.project.IMySoapService")
public class MySoapService implements IMySoapService {
      public MySoapResponse someOperation(MySoapRequest requestObj) {
        MySoapResponse myResponse = null;

        try {
            myResponse = new MySoapResponse("12345", "6789");
        } catch (Exception ex) {
            myResponse = new MySoapResponse(false, 234, "", "");
            myResponse.setErrorMessage(ex.getMessage());
        }   

        return myResponse;
    }
} 
```

希望对有需要的人有所帮助！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-10-26T22:54:02.520

添加依赖

```
<dependency>
        <groupId>org.apache.cxf</groupId>
        <artifactId>cxf-rt-frontend-jaxws</artifactId>
        <version>${cxf.version}</version>
    </dependency>
    <dependency>
        <groupId>org.apache.cxf</groupId>
        <artifactId>cxf-rt-transports-http</artifactId>
        <version>${cxf.version}</version>
    </dependency>

    <dependency>
        <groupId>javax.xml.bind</groupId>
        <artifactId>jaxb-api</artifactId>
        <version>2.1</version>
    </dependency> 
```

添加 web.xml

```
<web-app>
<display-name>CXF</display-name>

<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>classpath:ApplicationContext-cxf.xml</param-value>
</context-param>

<listener>
    <listener-class>
        org.springframework.web.context.ContextLoaderListener
    </listener-class>
</listener>

<servlet>
    <servlet-name>CXFServlet</servlet-name>
    <display-name>CXF Servlet</display-name>
    <servlet-class>
        org.apache.cxf.transport.servlet.CXFServlet
    </servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>CXFServlet</servlet-name>
    <url-pattern>/*</url-pattern>
</servlet-mapping> 
```

添加应用程序上下文

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:jaxws="http://cxf.apache.org/jaxws" xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:cxf="http://cxf.apache.org/core" xmlns:task="http://www.springframework.org/schema/task"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
     http://www.springframework.org/schema/beans/spring-beans.xsd http://cxf.apache.org/jaxrs http://cxf.apache.org/schemas/jaxrs.xsd http://cxf.apache.org/jaxws http://cxf.apache.org/schemas/jaxws.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-4.1.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd http://cxf.apache.org/core http://cxf.apache.org/schemas/core.xsd
     http://www.springframework.org/schema/task http://www.springframework.org/schema/task/spring-task-4.1.xsd">

    <import resource="classpath:META-INF/cxf/cxf.xml"/>
    <import resource="classpath:META-INF/cxf/cxf-extension-xml.xml"/>
    <import resource="classpath:META-INF/cxf/cxf-extension-soap.xml" />

        <task:annotation-driven />
        <context:component-scan base-package="com.smoothexample">
            <context:include-filter type="annotation"
                expression="org.springframework.stereotype.Service" />
            <context:include-filter type="annotation"
                expression="org.springframework.stereotype.Component" />
            <context:include-filter type="annotation"
                expression="org.springframework.stereotype.Repository" />
        </context:component-scan>
        <context:annotation-config />
        <context:component-scan base-package="com.smoothexample" />
        <bean       class="org.springframework.context.annotation.CommonAnnotationBeanPostProcessor" /> 
    <bean id="addressSoapService" class="com.smoothexample.cxf.soap.ws.impl.AddressSoapServiceImpl" />
        <jaxws:endpoint id="addressEndpointId"
        implementorClass="com.smoothexample.cxf.soap.ws.impl.AddressSoapServiceImpl"
            implementor="#addressSoapService" address="/addressSoapService">

        </jaxws:endpoint>
    </beans> 
```

网络服务

```
package com.smoothexample.cxf.soap.ws;
import javax.jws.WebService;
import com.smoothexample.dto.Address;
    @WebService(endpointInterface = " com.smoothexample.cxf.soap.ws.AddressSoapService", 
        serviceName = "addressSoapService")
    public interface AddressSoapService {
        public Address getAddress()
                 throws Exception;

    } 
```

执行

```
 package com.smoothexample.cxf.soap.ws.impl;

import com.smoothexample.cxf.soap.ws.AddressSoapService;
import com.smoothexample.dto.Address;

public class AddressSoapServiceImpl implements AddressSoapService {

    public Address getAddress() {

        return createAddress();
    }

private Address createAddress() {
    Address address = new Address();
    address.setStreetAddress("4800 abc Rd");
    address.setCity("abcd");
    address.setState("NJ");
    address.setCountry("US");
    address.setZip("10001");
    address.setAddressOptional("addressOptional");

    return address;
} 
```

}

请在[http://www.smoothexample.com/webservices/apache_cxf_soap_web_services.html找到更多详细信息](http://www.smoothexample.com/webservices/apache_cxf_soap_web_services.html)

# android - Android OnTouchListner 问题

> ID：10409334
> 
> 赞同：0
> 
> 时间：2012-05-02T07:18:35.450
> 
> 标签：android, ontouchlistener

我正在尝试`onTouch`在我的程序中实现该事件，但它不起作用。我正在以一种简单的方式进行操作，但它没有发生。我的代码是：

```
 public class VideosActivity extends Activity {
    ImageView image;
    FirstView fview;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        //setContentView(R.layout.videos_layout);
        //image = (ImageView)findViewById(R.id.imageView1);
       fview = new FirstView(this);
       setContentView(fview);
    }
     public class FirstView extends View implements OnTouchListener{

        public FirstView(Context context) {
            super(context);
            // TODO Auto-generated constructor stub
            image = (ImageView)findViewById(R.id.imageView1);
            image.setOnTouchListener(this);
        }

         public boolean onTouch(View v, MotionEvent event) {
        // TODO Auto-generated method stub
        image.setImageResource(R.drawable.dna2);
        return false;
    }
}
} 
```

在我的程序中显示以下错误。我的堆栈粘贴在这里...

```
 05-02 12:43:02.255: E/AndroidRuntime(358): FATAL EXCEPTION: main
05-02 12:43:02.255: E/AndroidRuntime(358): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.androidtablayout/com.example.androidtablayout.VideosActivity}: java.lang.NullPointerException
05-02 12:43:02.255: E/AndroidRuntime(358):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
05-02 12:43:02.255: E/AndroidRuntime(358):  at android.app.ActivityThread.startActivityNow(ActivityThread.java:2503)
05-02 12:43:02.255: E/AndroidRuntime(358):  at android.app.LocalActivityManager.moveToState(LocalActivityManager.java:127)
05-02 12:43:02.255: E/AndroidRuntime(358):  at android.app.LocalActivityManager.startActivity(LocalActivityManager.java:339)
05-02 12:43:02.255: E/AndroidRuntime(358):  at android.widget.TabHost$IntentContentStrategy.getContentView(TabHost.java:651)
05-02 12:43:02.255: E/AndroidRuntime(358):  at android.widget.TabHost.setCurrentTab(TabHost.java:323)
05-02 12:43:02.255: E/AndroidRuntime(358):  at android.widget.TabHost$2.onTabSelectionChanged(TabHost.java:129)
05-02 12:43:02.255: E/AndroidRuntime(358):  at android.widget.TabWidget$TabClickListener.onClick(TabWidget.java:453)
05-02 12:43:02.255: E/AndroidRuntime(358):  at android.view.View.performClick(View.java:2408)
05-02 12:43:02.255: E/AndroidRuntime(358):  at android.view.View$PerformClick.run(View.java:8816)
05-02 12:43:02.255: E/AndroidRuntime(358):  at android.os.Handler.handleCallback(Handler.java:587)
05-02 12:43:02.255: E/AndroidRuntime(358):  at android.os.Handler.dispatchMessage(Handler.java:92)
05-02 12:43:02.255: E/AndroidRuntime(358):  at android.os.Looper.loop(Looper.java:123)
05-02 12:43:02.255: E/AndroidRuntime(358):  at android.app.ActivityThread.main(ActivityThread.java:4627)
05-02 12:43:02.255: E/AndroidRuntime(358):  at java.lang.reflect.Method.invokeNative(Native Method)
05-02 12:43:02.255: E/AndroidRuntime(358):  at java.lang.reflect.Method.invoke(Method.java:521)
05-02 12:43:02.255: E/AndroidRuntime(358):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
05-02 12:43:02.255: E/AndroidRuntime(358):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
05-02 12:43:02.255: E/AndroidRuntime(358):  at dalvik.system.NativeStart.main(Native Method)
05-02 12:43:02.255: E/AndroidRuntime(358): Caused by: java.lang.NullPointerException
05-02 12:43:02.255: E/AndroidRuntime(358):  at com.example.androidtablayout.VideosActivity$FirstView.<init>(VideosActivity.java:33)
05-02 12:43:02.255: E/AndroidRuntime(358):  at com.example.androidtablayout.VideosActivity.onCreate(VideosActivity.java:25)
05-02 12:43:02.255: E/AndroidRuntime(358):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
05-02 12:43:02.255: E/AndroidRuntime(358):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
05-02 12:43:02.255: E/AndroidRuntime(358):  ... 18 more
05-02 13:23:21.845: E/AndroidRuntime(515): FATAL EXCEPTION: main
05-02 13:23:21.845: E/AndroidRuntime(515): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.androidtablayout/com.example.androidtablayout.VideosActivity}: java.lang.NullPointerException
05-02 13:23:21.845: E/AndroidRuntime(515):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
05-02 13:23:21.845: E/AndroidRuntime(515):  at android.app.ActivityThread.startActivityNow(ActivityThread.java:2503)
05-02 13:23:21.845: E/AndroidRuntime(515):  at android.app.LocalActivityManager.moveToState(LocalActivityManager.java:127)
05-02 13:23:21.845: E/AndroidRuntime(515):  at android.app.LocalActivityManager.startActivity(LocalActivityManager.java:339)
05-02 13:23:21.845: E/AndroidRuntime(515):  at android.widget.TabHost$IntentContentStrategy.getContentView(TabHost.java:651)
05-02 13:23:21.845: E/AndroidRuntime(515):  at android.widget.TabHost.setCurrentTab(TabHost.java:323)
05-02 13:23:21.845: E/AndroidRuntime(515):  at android.widget.TabHost$2.onTabSelectionChanged(TabHost.java:129)
05-02 13:23:21.845: E/AndroidRuntime(515):  at android.widget.TabWidget$TabClickListener.onClick(TabWidget.java:453)
05-02 13:23:21.845: E/AndroidRuntime(515):  at android.view.View.performClick(View.java:2408)
05-02 13:23:21.845: E/AndroidRuntime(515):  at android.view.View$PerformClick.run(View.java:8816)
05-02 13:23:21.845: E/AndroidRuntime(515):  at android.os.Handler.handleCallback(Handler.java:587)
05-02 13:23:21.845: E/AndroidRuntime(515):  at android.os.Handler.dispatchMessage(Handler.java:92)
05-02 13:23:21.845: E/AndroidRuntime(515):  at android.os.Looper.loop(Looper.java:123)
05-02 13:23:21.845: E/AndroidRuntime(515):  at android.app.ActivityThread.main(ActivityThread.java:4627)
05-02 13:23:21.845: E/AndroidRuntime(515):  at java.lang.reflect.Method.invokeNative(Native Method)
05-02 13:23:21.845: E/AndroidRuntime(515):  at java.lang.reflect.Method.invoke(Method.java:521)
05-02 13:23:21.845: E/AndroidRuntime(515):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
05-02 13:23:21.845: E/AndroidRuntime(515):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
05-02 13:23:21.845: E/AndroidRuntime(515):  at dalvik.system.NativeStart.main(Native Method)
05-02 13:23:21.845: E/AndroidRuntime(515): Caused by: java.lang.NullPointerException
05-02 13:23:21.845: E/AndroidRuntime(515):  at com.example.androidtablayout.VideosActivity$FirstView.<init>(VideosActivity.java:35)
05-02 13:23:21.845: E/AndroidRuntime(515):  at com.example.androidtablayout.VideosActivity.onCreate(VideosActivity.java:26)
05-02 13:23:21.845: E/AndroidRuntime(515):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
05-02 13:23:21.845: E/AndroidRuntime(515):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
05-02 13:23:21.845: E/AndroidRuntime(515):  ... 18 more 
```

我的xml文件如下...

```
<TableLayout
      android:id="@+id/tableLayout1"
      android:layout_width="match_parent"
      android:layout_height="wrap_content" >

      <TableRow
          android:id="@+id/tableRow1"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content" >
          <TextView android:text="pic on click which will tell where is the dna located in human body or cell "
            android:padding="15dip"
            android:textSize="18dip"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"/>
      </TableRow>

      <TableRow
          android:id="@+id/tableRow2"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content" >

          <ImageView
              android:id="@+id/imageView1"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:src="@drawable/dna1" />

      </TableRow>
  </TableLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T07:23:01.220

`image`您在构造函数中使用的对象从未`FirstView`分配过有效对象，并且当您尝试使用它时会抛出`NullPointerException`. 如果在`ImageView`您注释掉的布局中（`R.layout.videos_layout`），那么它应该是：

```
super.onCreate(savedInstanceState);
setContentView(R.layout.videos_layout);
image = (ImageView) findViewById(R.id.the_id_of_the_imageview_fromThe_layout);
fview = new FirstView(this);
setContentView(fview); 
```

否则，您必须确保将有效`ImageView`对象分配给`image`引用。

**编辑：** 上面的代码可以工作，我不知道你为什么决定放：

```
image = (ImageView)findViewById(R.id.imageView1); 
```

在`fview`（这将`NullPointerException`再次抛出）的构造函数中。有效的正确代码是：

```
//...
    public class VideosActivity extends Activity {
    ImageView image;
    FirstView fview;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.videos_layout);
        image = (ImageView)findViewById(R.id.imageView1);
        fview = new FirstView(this);
        setContentView(fview);
    }
     public class FirstView extends View implements OnTouchListener{

        public FirstView(Context context) {
            super(context);
            image.setOnTouchListener(this);
        }
//... 
```

另外我不认为你理解你在做什么，你应该修改你正在编写的代码。你：

*   使用具有`ImageView`.
*   然后，您构建一个实现 的简单视图，`OnTouchListener`并且在此视图的构造函数中，您将刚刚构建的视图设置为`ImageView`上一个布局的侦听器（您要做什么？！？！）。
*   你比替换第一个布局`fview`（那是空的，你什么都看不到）

您发布的代码将显示一个空白屏幕，因为这`fview`是将在活动中显示的最终视图，并且您为 设置的侦听器`ImageView`是无用的，因为`ImageView`不再在屏幕上。

我再次建议您改进代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T07:22:41.653

您应该首先初始化图像变量： `image= (ImageView ) findViewById(R.id.imageview);`

然后打电话`fview = new FirstView(this);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T07:22:43.163

在你的 oncreate 中使用这一行希望它会有所帮助

```
image = (ImageView)findViewById(R.id.your_image_view_id); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T07:42:05.823

在这里，您创建了名为 fview 的新视图，但没有实现它，所以 java 不知道里面有什么。

```
fview = new FirstView(this);
setContentView(fview); 
```

您必须在其中使用 ImageView 进行布局（或使用您创建的）并使用该布局，这样您就可以使用您的图像。现在您的图像漂浮在某处，但不在您的视野中

此外，您的图像没有创建 - 它是空的或更糟 - 一些垃圾。这段代码真的很乱，不会工作。我建议您至少阅读 Android 文档的第一章，以了解活动、布局和其他基本内容：http: [//developer.android.com/guide/index.html](http://developer.android.com/guide/index.html)

# java - Application.java Play Framework 中的重载方法

> ID：10409340
> 
> 赞同：5
> 
> 时间：2012-05-02T07:19:11.160
> 
> 标签：java, playframework, overloading

如何在 Play Project 的 Application.java 中设置重载方法？

这是我目前正在做的一些例子：

**应用程序.java**

```
public class Application extends Controller {

    public static void index() {
        render();
    }

    public static void getData() {
        renderText("Without Parameter");
    }

    public static void getData(String name) {
        renderText("With Parameter name = " + name);
    }
} 
```

**路线**

```
# Routes
# This file defines all application routes (Higher priority routes first)
# ~~~~

# Home page
GET     /                                       Application.index
GET     /data                                   Application.getData

# Ignore favicon requests
GET     /favicon.ico                            404

# Map static resources from the /app/public folder to the /public path
GET     /public/                                staticDir:public

# Catch all
*       /{controller}/{action}                  {controller}.{action} 
```

**考试：**

1.  `getData`无参数调用`http://localhost:9000/data`
2.  `getData`带参数调用`http://localhost:9000/data?name=test`

**结果：**

1.  使用参数名称 = null
2.  使用参数名称 = 测试

**我想要的结果：**

1.  无参数
2.  使用参数名称 = 测试

我非常感谢您的帮助。谢谢...

* * *

# **更新解决方案**

这是我根据[Daniel Alexiuc](https://stackoverflow.com/questions/10409340/overload-method-in-application-java-play-framework/10409629#10409629)的建议正在做的事情：

**应用程序.java**

```
public class Application extends Controller {

    public static void index() {
        render();
    }

    public static void getData() {
        /** 
         *  Do some process before call getDataName method 
         *  and send the result of the process as the parameter.
         *  That's why I do this way that look like redundancy process.
        **/
        getDataName(null);
    }

    public static void getDataName(String name) {
        // Didn't use ternary operation here because will become error 'not a statement'
        if(name == null)
            renderText("Without Parameter");
        else
            renderText("With Parameter name = " + name);
    }

} 
```

**路线**

```
GET     /                                       Application.index
GET     /default                                Application.getData
GET     /dataString                             Application.getDataName 
```

* * *

# **更新解决方案 (26/07)**

**应用程序.java**

```
public class Application extends Controller {

    public static void index() {
        render();
    }

    public static void getData(String name, Integer age) {
        if (name == null && age == null) {
            renderText("Data null");
        } else if (name != null && age == null) {
            renderText("Name: " + name);
        } else if (name != null && age != null) {
            renderText("Name: " + name + "\n" + "Age: " + age);
        }
    }
} 
```

**路线**

```
GET     /data                                   Application.getData
GET     /data/{name}                            Application.getData
GET     /data/{name}/{age}                      Application.getData 
```

对于通话：

```
 1\. http://localhost:9000/data                -> Display "Data null"
 2\. http://localhost:9000/data/Crazenezz      -> Display "Name: Crazenezz"
 3\. http://localhost:9000/data/Crazenezz/24   -> Display "Name: Crazenezz
                                                          Age: 24" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T07:42:13.863

我认为不可能像你想要的那样在路由文件中重载它。

但你可以这样做：

```
public static void getData(String name) {
  if (name == null) {
    renderText("Without Parameter");
  } else {
    renderText("With Parameter name = " + name);
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T13:36:56.177

我相信我想实现和你一样的东西，Crazenezz，所以首先我尝试了以下路由定义：

```
GET     /terms.json                 controllers.exposedjson.TermServiceJSON.findTermsByQuery(langId:Long ?= null) 
```

...以及控制器中的一个方法，该方法检查参数是否为空，但由于`null`在路由定义中不是有效的可选值而失败。因此，我相信我将采用以下解决方案（到目前为止有效），在我在控制器中转换为 long 的 JSON 服务接口中公开一个字符串值。

```
GET     /terms.json                 controllers.exposedjson.TermServiceJSON.findTermsByQuery(langId:String ?= "")

@Transactional(readOnly=true)
public static Result findTermsByQuery(String languageId) {
    Result result;
    if (languageId == "")
        result = ok(toJson(TermService.getTerms()));
    else
        result = ok(toJson(TermService.findTermsByLanguageId(Long.parseLong(languageId.trim()))));
    return result;
} 
```

它不是很漂亮，但从服务客户端的角度来看，它可能比使用两个单独的路径更好。

# python - 如何在带有金字塔网络框架的变色龙中使用国际化？

> ID：10409341
> 
> 赞同：1
> 
> 时间：2012-05-02T07:19:23.750
> 
> 标签：python, internationalization, pyramid, chameleon

我做了以下事情：

1.  `pyramid.default_locale_name = en`在`de`development.ini 中更改
2.  我的`index.pt`样子是这样的：

    ```
    <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" xmlns:tal="http://xml.zope.org namespaces/tal" xmlns:i18n="http://xml.zope.org/namespaces/i18n"  i18n:domain="mvc">
    <a href="/user/login/form" i18n:translate="">Login Page</a><br />
    <a href="/user/register/form" i18n:translate="">Register Page</a><br />
    <a href="/ds/landing/view" i18n:translate="">Datasource landing page</a> <br />
    <p>${locale_name}</p> 
    ```

3.  我对 setup.py 进行了更改

    ```
    message_extractors = { '.': [
    ('**.py',   'lingua_python', None ),
    ('**.pt',   'lingua_xml', None ),
    ]} 
    ```

4.  当我跑步时`python setup.py extract_messages`，`python setup.py update_catalog`我`locale/de/LC_MESSAGES/mvc.po`得到了所有的字符串。翻译后变成

    ```
    # German translations for mvc.
    # Copyright (C) 2012 ORGANIZATION
    # This file is distributed under the same license as the mvc project.
    # FIRST AUTHOR <EMAIL@ADDRESS>, 2012.
    #
    msgid ""
    msgstr ""
    "Project-Id-Version: mvc 0.0\n"
    "Report-Msgid-Bugs-To: EMAIL@ADDRESS\n"
    "POT-Creation-Date: 2012-05-02 12:24+0530\n"
    "PO-Revision-Date: 2012-05-02 11:38+0530\n"
    "Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
    "Language-Team: de <LL@li.org>\n"
    "Plural-Forms: nplurals=2; plural=(n != 1)\n"
    "MIME-Version: 1.0\n"
    "Content-Type: text/plain; charset=utf-8\n"
    "Content-Transfer-Encoding: 8bit\n"
    "Generated-By: Babel 0.9.6\n"

    #: mvc/templates/index.pt:2
    msgid "Login Page"
    msgstr "sign in page"

    #: mvc/templates/index.pt:3
    #, fuzzy
    msgid "Register Page"
    msgstr "register in this Page"

    #: mvc/templates/index.pt:4
    msgid "Datasource landing page"
    msgstr "Landing Page of datasources" 
    ```

    忽略英文，因为我没有做任何实际的翻译。我想检查它是否有效。

5.  我做了`python setup.py compie_catalog`并创建了 mvc.mo 文件

6.  但是当我加载页面时，我得到的是相同的页面，而没有翻译。从视图中可以看出，语言环境似乎已正确设置

    ```
    @view_config(route_name='home',renderer='templates/index.pt')
    def index_view(request):
        from pyramid.i18n import negotiate_locale_name

        return {'locale_name' : negotiate_locale_name(request)} 
    ```

7.  我什至添加`config.add_translation_dirs('mvc:locale')`到我的**init** .py

我究竟做错了什么？还是我在做任何正确的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T14:25:38.747

您是否为翻译配置了翻译域？

[http://docs.pylonsproject.org/projects/pyramid/en/1.3-branch/narr/i18n.html#translation-domains](http://docs.pylonsproject.org/projects/pyramid/en/1.3-branch/narr/i18n.html#translation-domains)

# php - PHP没有选择正确的复选框状态来设置变量

> ID：10409349
> 
> 赞同：2
> 
> 时间：2012-05-02T07:19:40.043
> 
> 标签：php, checkbox

我有一个困扰我好几天的问题——当复选框处于打开或关闭状态时，我试图将一个变量附加到一个选项值中。变量正在显示，但不是我想要的方式，我希望在复选框关闭时将“无订阅”附加到选项值中，并且在复选框打开时将“订阅”附加到选项值中。这是我的脚本：

```
<?php

if(isset($_POST['subscribe']) == '1')   {
    $sub = ", Subscribe";
    } else {
    $sub = ", No Subscription";}
?>

--------------------------------------------------------------------------------------------

            <form class="cart" action="http://serber.com" method="post">
            <section class="clear"></section>
             <label>Tampons (Non-Applicator) Regular :&nbsp;</label> 
              <select name="productpr">
                <option value="NT12<?php printf($sub); ?>:17.95">1 Month - $17.95 <span></span> </option>
                <option value="NT12 3 Months<?php printf($sub); ?>:33.85">3 Months - $33.85</option>
                <option value="NT12 6 Months<?php printf($sub); ?>:57.70">6 Months - $57.70</option>
              </select>
              <input type="hidden" name="submitted" value="true" />
               <br /><input type="submit" value="Add to Cart">&nbsp;
               <input type="hidden" name="subscribe[]" value="0" />
               <input type="checkbox" name="subscribe[]" value="1">Check Box if you wish to have a recurring subscription</input> 
          </form>

I am at my wit's end with this because it seems I have the isset correct but the checkbox value 
```

没有被设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T07:23:14.900

if (isset($_POST['subscribe']) AND $_POST['subscribe'] == '1') {

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T07:55:19.233

您`hidden field`和 和的名称相同`checkbox`。请更改隐藏字段名称。并在 PHP 代码中放置代码

```
if(isset($_POST['subscribe']) && ($_POST['subscribe'][0] == '1')) 
```

代替

```
if(isset($_POST['subscribe']) == '1') 
```

如果您无法更改隐藏字段的名称，则在 if 条件中使用代码

```
if(isset($_POST['subscribe']) && ($_POST['subscribe'][1] == '1')) 
```

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T07:32:02.783

`isset()`返回一个布尔值，请将其评估为布尔值或将其与布尔值使用`===`. 虽然类型强制仍然会根据您所做的事情给出正确的结果，但它效率低下且令人困惑。做就是了：

```
if (isset($_POST['subscribe'])) { 
```

...但是这本身并不能解决问题。因为您已经命名*了两个*输入`subscribe[]`，`$_POST['subscribe']`所以将始终设置它，并且它始终是一个包含 1 个或 2 个元素的数组。为此目的创建数组是没有意义的，请尝试以下代码：

```
<?php

  if (isset($_POST['subscribe'])) {
    $sub = ", Subscribe";
  } else {
    $sub = ", No Subscription";
  }

?>

<!--------------------------------------------->

<form class="cart" action="http://serber.com" method="post">
  <section class="clear"></section>
  <label>Tampons (Non-Applicator) Regular :&nbsp;</label> 
  <select name="productpr">
    <option value="NT12<?php printf($sub); ?>:17.95">1 Month - $17.95</option>
    <option value="NT12 3 Months<?php printf($sub); ?>:33.85">3 Months - $33.85</option>
    <option value="NT12 6 Months<?php printf($sub); ?>:57.70">6 Months - $57.70</option>
  </select>
  <input type="hidden" name="submitted" value="true" /><br />
  <input type="submit" value="Add to Cart" />&nbsp;
  <input type="checkbox" name="subscribe" value="1"<?php if (isset($_POST['subscribe'])) echo ' checked="checked"'; ?>>Check Box if you wish to have a recurring subscription</input> 
</form> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T07:40:04.750

试试这个。它使用您的代码为我工作。你已经放了一个`<input type="hidden" name="subscribe[]" value="0">`. 没必要。

```
<?php
echo"hi";
if(isset($_POST['subscribe']) == '1')   {
    $sub = ", Subscribe";
    } else {
    $sub = ", No Subscription";}
    echo $sub;
?>

<html>
<body>
            <form class="cart" method="post">
            <section class="clear"></section>
             <label>Tampons (Non-Applicator) Regular :&nbsp;</label> 
              <select name="productpr">
                <option value="NT12<?php echo($sub); ?>:17.95">1 Month - $17.95 <span></span> </option>
                <option value="NT12 3 Months<?php echo($sub); ?>:33.85">3 Months - $33.85</option>
                <option value="NT12 6 Months<?php echo($sub); ?>:57.70">6 Months - $57.70</option>
              </select>
              <input type="hidden" name="submitted" value="true" />
               <br /><input type="submit" value="Add to Cart">&nbsp;
               <input type="checkbox" name="subscribe[]" value="1">Check Box if you wish to have a recurring subscription</input> 
          </form>
          </body>
</html> 
```

# perl - 动态使用 perl 模块

> ID：10409350
> 
> 赞同：-1
> 
> 时间：2012-05-02T07:19:44.533
> 
> 标签：perl, dynamic, module, eval

我在一个 perl 项目上工作，我必须动态使用 perl 模块。我有以下名为 CT.pm 的模块：

```
sub new {
    my $class = shift;
    my ($debug, $debug_matches,%checkHash) = @_;
    my $self = {};
    $self->{DEBUG} = shift;
    $self->{DEBUG_MATCHES} = shift;
    $self->{CHECKRESULT_OK} = "COMPLIANT"; 
    $self->{CHECKRESULT_ERROR} = "NONCOMPLIANT"; 
    %{$self->{checkHash}} = %checkHash;

    eval{
        use $checkHash{"type"};
        $check = $checkHash{"type"}->new($self->{DEBUG},$self->{DEBUG_MATCHES},%checkHash);
    };

    bless($self,$class);
    return $self;
} 
```

此构造函数获取一个名为 %checkHash 的哈希作为参数。这个散列有一个称为类型的键。此键映射到我要动态使用的 perl 模块名称的值。

我想出了以下方法：（我知道这行不通，我也知道人们说 eval 不好）：

```
eval{
    use $checkHash{"type"};
    $check = $checkHash{"type"}->new($self->{DEBUG},$self->{DEBUG_MATCHES},%checkHash);
}; 
```

但想法是动态地使用名称为 $checkHash{"type"} 的 perl 模块。

如果有人对如何做到这一点有任何想法，请帮助:) thx！:D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T08:29:24.343

你`eval`是一个“块评估”，实际上只是 Perl 中的一个异常捕获机制，没有任何与通常的“字符串评估”相关的污名。您可以通过 eval 使用字符串 eval 动态加载模块`"require $checkHash{'type'}"`。如果您希望完全避免使用字符串 eval，您只需手动将裸字模块名称转换为 .pm 文件路径。您仍然应该使用块 eval 来捕获模块加载异常：

```
my $file = $class . '.pm';
$file =~ s{::}{/}g;
eval { require $file };
if($@){ die "failed to load $class: $@" } 
```

这仍然不会运行加载的类`import`方法。您需要将类路径分解并手动找到它。对于 OO 类，这通常也可以安全地跳过。

# java - Struts2 结果、线程安全和动作上下文？

> ID：10409351
> 
> 赞同：0
> 
> 时间：2012-05-02T07:19:45.007
> 
> 标签：java, struts2, web

在 Struts2 中

*   动作是线程安全的，每个请求都会启动一个单独的动作类对象。
*   拦截器不是线程安全的，因为仅针对所有请求启动对象。他们在其 execute() 方法中接收 ActionInvocation 对象，并且可以使用该对象访问操作上下文。请参阅“ [Struts2 线程中的拦截器是否不安全？](https://stackoverflow.com/questions/9878799/are-interceptors-in-struts2-thread-unsafe) ”

牢记这些事情，我相信

*   结果不是线程安全的，因为它们在其 execute() 方法中接收 ActionInvocation 对象。

在创建自定义结果类时，我在“Manning Struts2 in Action”一书中找到了以下代码行。

```
ServletActionContext.getResponse() 
```

我很困惑为什么作者没有使用 actionInvocation 对象得到响应，即

```
actionInvocation.getInvocationContext().get(StrutsStatics.HTTP_RESPONSE); 
```

现在我有以下问题。

*   结果线程安全吗？
*   如果 Result 不是线程安全的并且有两个不同的请求，那么 ServletActionContext 如何返回相关响应？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T13:01:00.107

上下文使用`ThreadLocal`s。

结果显然是按请求实例化的——看一些简单的东西，比如`StreamResult`：它使用实例变量来处理诸如此类的事情`contentType`。

# sockets - 如何为关联设置 SCTP_MAX_BURST？

> ID：10409355
> 
> 赞同：0
> 
> 时间：2012-05-02T07:20:09.877
> 
> 标签：sockets, sctp

我正在尝试使用以下代码设置 SCTP_MAX_BURST

```
struct sctp_assoc_value assocValue;
memset(&assocValue, 0, sizeof(assocValue));
assocValue.assoc_value = getMaxBurstValue();
setsockopt (fd, IPPROTO_SCTP, SCTP_MAX_BURST, &assocValue, sizeof (assocValue)); 
```

当我执行代码时，出现以下错误：“没有这样的文件或目录”

谁能帮我解释失败的可能原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T16:35:28.413

您提到的文本（“没有这样的文件..”）适用于 ENOENT，2，在我可以访问的任何 Linux 系统上，它都没有被列为 setsockopt 的回报。

在我的 Redhat 5 系统上，我得到了 ENOPROTOOPT (errno 92)，因为内核没有为 2.6.18 的 sctp 实现那个套接字选项。

# c# - 安全停止长时间运行的任务

> ID：10409357
> 
> 赞同：14
> 
> 时间：2012-05-02T07:20:24.230
> 
> 标签：c#, timeout, task-parallel-library

如何停止长时间运行的任务（.net 4）？

我已经实现了 TPL 并尝试使用，`CancellationTokenSource`但它似乎不适用于我的场景。我见过的所有示例都假设您在 while 循环中进行工作，以便您可以检查任务是否已被取消，而我只有一个需要很长时间的操作。我不能等待工作完成，因为我需要假设它可能永远不会完成。这是我尝试过的代码：

```
bool? result = null;

var cs = new CancellationTokenSource();
var ct = cs.Token;

var doWorkTask = new Task(() =>
{
    Console.WriteLine("start dowork task");

    result = Work.LongRunning();
 }, ct);

doWorkTask.Start();

Task.WaitAny(new Task[] { doWorkTask }, timetowait);

if (doWorkTask.IsCompleted)
{
    Console.WriteLine("dowork task completed");

    doWorkTask.Dispose();
}
else
{
    Console.WriteLine("dowork task has timedout");

    cs.Cancel();

    throw new TimeoutException("Timeout hit.");
} 
```

代码有效，但如果发生超时并且正在完成的工作访问“非托管代码”即资源，则永远不会处理任务。那就是说`IsCancelledRequested`不能使用`Work.LongRunning()`所以我不能`ThrowIfCancellationRequested`。

我对其他想法持开放态度，我也尝试过`BackgroundWorker`，但这似乎也不合适。

新示例：

```
var service = new System.ServiceProcess.ServiceController(ServiceName, ServerName);

var serviceTask = Task.Factory.StartNew(() =>
{
    result = (service.Status == ServiceControllerStatus.Running
         || service.Status == ServiceControllerStatus.StartPending);
}, cs.Token);

serviceTask.Wait(2000, cs.Token);

if (!serviceTask.IsCompleted)
{
    cs.Cancel();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-02-05T17:26:50.147

这是上面描述的选项 1 的示例（即只是在没有信号取消的情况下杀死任务）

```
class Program
    {
        private static void Main(string[] args)
        {
            Test test = new Test();
            test.Run();

            Console.WriteLine("Type c to cancel");
            if (Console.ReadLine().StartsWith("c"))
            {
                Console.WriteLine("cancellation requested");
                test.CancellationTokenSource.Cancel();
            }

            Console.ReadLine();
        }
    }

    public class Test
    {
        private void DoSomething()
        {
            Console.WriteLine("DoSomething runs for 30 seconds ");
            Thread.Sleep(new TimeSpan(0, 0, 0, 30));
            Console.WriteLine("woke up now ");
        }

        public CancellationTokenSource CancellationTokenSource = new CancellationTokenSource();

        public void Run()
        {
                var generateReportsTask = Task.Factory.StartNew(() =>
                {
                    CancellationTokenSource.Token.ThrowIfCancellationRequested();
                    Task doSomething = new Task(DoSomething, CancellationTokenSource.Token);
                    doSomething.Start();

                    doSomething.Wait(CancellationTokenSource.Token);
                }, CancellationTokenSource.Token);

                generateReportsTask.ContinueWith(
                    (t) =>
                    {
                        if (t.Exception != null)
                            Console.WriteLine("Exceptions reported :\n " + t.Exception);

                        if (t.Status == TaskStatus.RanToCompletion)
                            Console.WriteLine("Completed report generation task");
                        if (t.Status == TaskStatus.Faulted)
                            Console.WriteLine("Completed reported generation with unhandeled exceptions");
                        if(t.Status == TaskStatus.Canceled)
                            Console.WriteLine("The Task Has been cancelled");
                    });

        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T07:24:43.310

任务并行库专为 CPU 密集型工作而设计。CPU 密集型工作一会儿就完成了。如果您的 Work.LongRunning() 是 CPU 密集型的，您应该能够在内部传递取消令牌并取消它。如果它不是 CPU 密集型的，那么您可以简单地在最终回调中丢弃结果，而不必担心停止实际工作，因为它只是在等待。

顺便说一句，如果您等待（数据库调用或其他），您可能在底部某处有异步方法。您可以显示 Begin/End 模式并将其包装在任务中。这个问题解释了如何：[TPL TaskFactory.FromAsync vs Tasks with blocking methods](https://stackoverflow.com/questions/5018897/tpl-taskfactory-fromasync-vs-tasks-with-blocking-methods)这样你就可以避免占用通用线程，因为IO等待是以操作系统处理的特殊方式完成的。

# eclipse - 安装 GWT M2E Eclipse 插件

> ID：10409358
> 
> 赞同：0
> 
> 时间：2012-05-02T07:20:25.520
> 
> 标签：eclipse, gwt, m2e

我是 Eclipse 的新手（目前我使用的是 EE Helios SR 1）。当我尝试安装 GWT M2E 时，我得到以下信息：

> 缺少要求：gwt 0.0.1.0 (com.levigo.m2e.gwt 0.0.1.0) 的 m2e 连接器需要“bundle org.eclipse.jdt.core 3.7.1”，但找不到它
> 不能满足依赖：
> 
> 来自：GWT M2E 连接器 0.0.1.0 (com.levigo.m2e.gwt.feature.feature.group 0.0.1.0)
> 
> 至：com.levigo.m2e.gwt [0.0.1.0]

我究竟应该在市场上寻找什么？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T10:11:08.017

由于您是 Eclipse 的新手。你真的想要这个插件吗？这是一个插件`Manages Supersource and Resource Folders for GWT-Projects`：[http](http://code.google.com/p/gwt-m2e/) ://code.google.com/p/gwt-m2e/ 。但它适用于 Maven 项目。如果你想在 eclipse 中使用 GWT 插件，你应该有官方的 eclipse 插件：[https ://developers.google.com/eclipse/](https://developers.google.com/eclipse/)

# php - PHP preg_replace：删除所有以 s 结尾的 2 个字符和 3 个字符

> ID：10409359
> 
> 赞同：0
> 
> 时间：2012-05-02T07:20:28.283
> 
> 标签：php, regex

很抱歉在 RegEx 方面很愚蠢，但我只是对此有疑问：

`$search=trim(preg_replace('@ [a-z]{1,2}s? @',' ',' '.$search.' '));`

据我所知，这应该删除所有小写 2 个字符的单词，以及任何以“s”结尾的小写 3 个字符的单词。

不起作用的部分是它不会删除以“s”结尾的小写 3 字符单词。

有任何想法吗？

谢谢。

参见示例： [http ://codepad.org/yUpyn8KU](http://codepad.org/yUpyn8KU)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T07:32:40.487

尝试这个 ：

```
$search=trim(preg_replace('/\b([a-z]{1,2}|[a-z]{2}s)\b/',' ',' '.$search.' ')); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T07:43:19.290

尝试这个：

***这是在[键盘上](http://codepad.org/YgIWjrlp)***

```
<?php 
 $string = "ver ae as ads dase asda frasad ae aes ads ad hag hags";
 $result = trim(preg_replace('/\b([a-z]{1,2}|[a-z]{2}s)\b/',' ',' '.$string.' '));
 echo $trim = preg_replace('/[\s]+/',' ',$result);
?> 
```

***这是在[键盘上](http://codepad.org/YgIWjrlp)***

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T07:41:59.403

这解决了它。

```
$search=trim(preg_replace('@\b[a-z]{1,2}s?\b@','',$search));
$search=preg_replace('@\s+@',' ',$search); 
```

感谢大家的帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-02T07:34:19.073

如果要清理搜索字符串，可以将其分解：

```
$search_items = explode(' ', $search);
$search = ' ';
foreach ($search_items AS $search_item) {
  $search_item = trim($search_item);
  if (strlen($search_item) > 3 || (strlen($search_item) == 3 && substr($search_item,-1) != 's') {
    $search .= $search_item . ' ';
  }
} 
```

使用正则表达式，我会尝试

```
$search=trim(preg_replace('@(\s)(\s+)?([a-z]{1,2}s?)(\s)@','$1',' '.$search.' ')); 
```

`(\s)`在开头和结尾寻找空格。第二对括号查找可以删除的其他空格。如果找到模式，则字符串中只剩下第一个空格。

# python - 使用 pygit2 (libgit2) 将 blob 或树添加到创建的存储库？

> ID：10409378
> 
> 赞同：6
> 
> 时间：2012-05-02T07:22:20.420
> 
> 标签：python, git, libgit2

我正在尝试使用 pygit2 库。

似乎我被困在了第一步。它的文档没有解释如何创建一个 blob 并将其添加到树中。它主要是关于如何使用现有的 git 存储库，但我想创建一个并将 blob、提交等添加到我的存储库。是否可以直接从文件创建 blob，还是应该读取文件内容并设置 blob.data？

```
from pygit2 import Repository
from pygit2 import init_repository

bare = False
repo = init_repository('test', bare) 
```

如何创建 Blob 或树并将其添加到存储库？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-02T14:14:33.623

python 绑定不允许您直接从文件创建 blob，因此您必须将文件读入内存并用于`Repository.write(pygit2.GIT_OBJ_BLOB, filecontents)`创建 blob。

然后，您可以使用 来创建树`TreeBuilder`，例如

```
import pygit2 as g

repo = g.Repository('.')
# grab the file from wherever and store in 'contents'
oid = repo.write(g.GIT_OBJ_BLOB, contents)
bld = repo.TreeBuilder()
# attributes is whether it's a file or dir, 100644, 100755 or 040000
bld.insert('file.txt', oid, attributes)
treeoid = bld.write() 
```

# objective-c - NSMutableArray 在 for 循环的每次迭代后被释放？

> ID：10409381
> 
> 赞同：1
> 
> 时间：2012-05-02T07:22:23.667
> 
> 标签：objective-c, arrays, memory-management, nsmutablearray

我有一个对象数组，我想根据对象的某个值（即`self.example.value`）对其进行排序。我创建了多个可变数组：

`NSMutableArray *array1, *array2, *array3 = [[NSMutableArray alloc] initWithObjects: nil];`

然后使用 for 循环遍历原始数组。如果对象符合条件 ( `self.example.value == someValue`)。我将对象添加到上面创建的新数组之一。但是，当我后来开始使用这些数组时，我注意到它们是空的。使用调试器我注意到以下内容：

```
for (customClass *object in arrayOfObject){ //starting here the debugger has NONE of the arrays created above

    if (object.value == someValue){//after performing this line, the debugger shows array1 in memory BUT nothing in it EVEN if the 'if' statement isn't TRUE.
        [array1 addobject:object]; 
    } else if (object.value == someOtherValue){//after performing this line, the debugger shows array2 in memory BUT nothing in it EVEN if the 'if' statement isn't TRUE. 
        [array2 addobject:object]; 
    } //and so forth 
```

所以基本上，for循环的每次迭代都会清除上面创建的数组。随着代码的进行，无论“if”语句是否为 TRUE，都会分配数组，但不会填充数组。我在这里想念什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T07:26:06.523

您只是将一个数组分配给`array3`，因此其他两个是垃圾或 nil 取决于您在此处处理的变量类型。我想你想要：

```
NSMutableArray *array1 = [[NSMutableArray alloc] init];
NSMutableArray *array2 = [[NSMutableArray alloc] init];
NSMutableArray *array3 = [[NSMutableArray alloc] init]; 
```

# c# - C# 反射。目标异常未处理

> ID：10409384
> 
> 赞同：0
> 
> 时间：2012-05-02T07:22:36.893
> 
> 标签：c#, exception, reflection

```
NetworkElementCountersFactory factory=new NetworkElementCountersFactory();
List<NetworkElementCounters> neCountersList= new List<NetworkElementCounters>();
NetworkElementCounters neCounters;
while (reader.Read())
{
    i = 4;
    neCounters = factory.getInstance(tableName, reader.GetInt32(0), reader.GetDateTime(1), reader.GetDateTime(2), reader.GetInt32(3));
    foreach (var v in neCounters.Fields)
    {
        v.GetType().GetProperty("CounterValue").SetValue(neCounters.GetType(), reader.GetValue(i), null);
        i++;
    }
    neCountersList.Add(neCounters);
} 
```

我在这里收到异常：

```
v.GetType().GetProperty("CounterValue").SetValue(neCounters.GetType(), reader.GetValue(i), null); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T07:27:21.030

这看起来非常错误：

```
.SetValue(neCounters.GetType(), {whatever}, null); 
```

这意味着您正在尝试在`Type`实例上分配它。您应该在此处传递目标对象，或者`null`如果它是一个`static`属性。*看起来*应该是这样的：

```
.SetValue(neCounters, {whatever}, null); 
```

但这样会更容易使用：

```
neCounters.CounterValue = ...
// v.CounterValue = ... // <=== might be this instead - confusing context 
```

`dynamic`如果这里有一些复杂性，也许可以通过：

```
dynamic obj = neCounters;
// dynamic obj = v; // <=== might be this instead - confusing context
obj.CounterValue = reader.GetValue(i); 
```

# iphone - 从 iphone 应用程序打印

> ID：10409385
> 
> 赞同：-1
> 
> 时间：2012-05-02T07:22:40.220
> 
> 标签：iphone, objective-c

如何通过我们的应用程序连接打印机并打印文档。是否有任何代码片段或任何教程。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T07:26:17.187

查看本教程：http: [//vivianaranha.com/airprinting-tutorial-in-3-steps/](http://vivianaranha.com/airprinting-tutorial-in-3-steps/)

# android - 在布局android上显示

> ID：10409387
> 
> 赞同：0
> 
> 时间：2012-05-02T07:22:41.730
> 
> 标签：android, image

我想从服务器下载图像并将它们显示到布局中

示例 INSTAGRAM 应用程序 android

那么我可以使用表格布局或使用图片库来实现这一点，并且当我滚动其他图像加载时只有很少的图像显示如何可能

点击这个[链接](http://www.google.co.in/imgres?hl=en&client=firefox-a&hs=lAq&sa=X&rls=org.mozilla%3aen-US%3aofficial&biw=1600&bih=771&tbm=isch&prmd=imvnsa&tbnid=CwL1llGfp2QJbM%3a&imgrefurl=http://blog.appboy.com/2010/10/5-things-instagram-got-right-that-others-before-it-couldnt/&docid=gDrrXMQHVCT6RM&imgurl=http://blog.appboy.com/wp-content/uploads/2010/10/instagram-popular-1.jpg&w=320&h=480&ei=euegT8yoDoSzrAfkqLj2CA&zoom=1&iact=hc&vpx=1287&vpy=150&dur=491&hovh=128&hovw=90&tx=108&ty=126&sig=107909598838583184261&page=1&tbnh=128&tbnw=90&start=0&ndsp=40&ved=1t:429,r:8,s:0,i:87)，你就会明白我想要做什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T07:25:28.277

```
public class AndroidWebImage extends Activity {

//Android Bitmap Image

/*String image_URL=
 "http://4.bp.blogspot.com/_C5a2qH8Y_jk/StYXDpZ9-WI/AAAAAAAAAJQ/sCgPx6jfWPU/S1600-R/android.png";*/

// QR Code Image URL

String image_URL =
    "http://chart.apis.google.com/chart?chs=200x200&cht=qr&chl=http%3A%2F%2Fandroid-er.blogspot.com%2F";
   /** Called when the activity is first created. */
   @Override
   public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.main);

       ImageView bmImage = (ImageView)findViewById(R.id.image);
    BitmapFactory.Options bmOptions;
    bmOptions = new BitmapFactory.Options();
    bmOptions.inSampleSize = 1;
    Bitmap bm = LoadImage(image_URL, bmOptions);
    bmImage.setImageBitmap(bm);
   }

   private Bitmap LoadImage(String URL, BitmapFactory.Options options)
   {       
    Bitmap bitmap = null;
    InputStream in = null;       
       try {
           in = OpenHttpConnection(URL);
           bitmap = BitmapFactory.decodeStream(in, null, options);
           in.close();
       } catch (IOException e1) {
       }
       return bitmap;               
   }

private InputStream OpenHttpConnection(String strURL) throws IOException{
 InputStream inputStream = null;
 URL url = new URL(strURL);
 URLConnection conn = url.openConnection();

 try{
  HttpURLConnection httpConn = (HttpURLConnection)conn;
  httpConn.setRequestMethod("GET");
  httpConn.connect();

  if (httpConn.getResponseCode() == HttpURLConnection.HTTP_OK) {
   inputStream = httpConn.getInputStream();
  }
 }
 catch (Exception ex)
 {
 }
 return inputStream;
}

} 
```

# java - 使用令牌的 Paypal 交易搜索

> ID：10409393
> 
> 赞同：0
> 
> 时间：2012-05-02T07:23:06.813
> 
> 标签：java, paypal

Paypal 提供 Permissions Service 选项，让应用程序使用它提供的令牌联系 API。我得到了令牌。但是如何使用令牌进行交易搜索。

我可以通过他们提供的链接进行交易搜索：[示例](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_nvp_r_TransactionSearch)。但我想使用我通过以下过程获得的令牌来做到这一点：[令牌程序](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_PermissionsUsing)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T10:59:15.213

能够使用示例解决它：[链接](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_PermissionsUsing)

# tomcat - 如何将 Tomcat 实例指定为“mvn tomcat:run”命令？

> ID：10409398
> 
> 赞同：2
> 
> 时间：2012-05-02T07:23:20.040
> 
> 标签：tomcat, maven, maven-plugin

使用 Maven 插件时，我们可以使用以下命令从命令行启动 Tomcat：

`mvn tomcat:run`

如果我的机器上有 2 个单独的 Tomcat 安装（比如 Tomcat 6.x 和 7.x），有没有办法可以指定哪个`:run`？

**编辑1：**

正如西里尔所建议的那样，我尝试了：

`mvn tomcat6:run and mvn tomcat7:run`

我得到了这个错误：

> [错误] 在当前项目和插件组 [org.apache.maven.plugins, org.codehaus.mojo] 中找不到前缀“tomcat6”的插件，可从存储库 [local (/Users/chitteb/.m2/存储库），中央（http://repo1.maven.org/maven2）] -> [帮助 1]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T07:29:04.747

我相信它会运行在`CATALINA_BASE`和`CATALINA_HOME`环境变量中指定的那个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T07:29:48.523

您可能需要使用配置文件定义两个不同的设置，并在运行时使用配置文件名称。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T13:44:39.680

[我在Apache Tomcat Maven 插件文档](http://tomcat.apache.org/maven-plugin-2/tomcat6-maven-plugin/examples/adjust-embedded-tomcat-version.html)中找到了如何调整 tomcat 版本的示例。如果插件的配置如示例中所示，那么您可以在`mvn`命令行上指定版本，`-Dtomcat.version=6.0.xxx`或者通过在@Seshagiri 提到的配置文件中定义属性来指定版本。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-17T07:31:38.567

在您的 pom.xml 中添加以下行。我也遇到了同样的问题，后来解决了

> 使用 mvn tomcat7:run

```
 <build>
        <plugins>
            <plugin>
              <groupId>org.apache.tomcat.maven</groupId>
              <artifactId>tomcat7-maven-plugin</artifactId>
              <version>2.2</version>
            </plugin>   
        </plugins>
    </build> 
```

# gwt - 带过滤器的 GWT CellTable 标题列不接受空格（keycode=32）

> ID：10409400
> 
> 赞同：1
> 
> 时间：2012-05-02T07:23:28.363
> 
> 标签：gwt, gwt-celltable

我已经创建了一个自定义 CellTable 标题，如该线程中所述： [CellTable with custom Header contains SearchBox and Focus Problem](https://stackoverflow.com/questions/6422896/celltable-with-custom-header-containing-searchbox-and-focus-problem)

为了解决焦点问题，我使用 change 事件而不是 keyup 事件来触发过滤，因此过滤器现在仅在过滤器框失去焦点或按下 Enter 键时触发。

我遇到的唯一问题是过滤框不接受空格（keycode=32）。有人遇到这种情况吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T01:51:11.760

我发现作为 CellTable 的父类之一的 AbstractHasData 类使用 SPACE、HOME、END、ARROW UP 和 ARROW DOWN 进行表格导航，这可以防止这些键在单元格上执行其默认功能。

仅当 cellIsEditing 为 TRUE 时，键盘导航才会被抑制，这仅在表格主体上的单元格处于焦点且处于编辑模式时才会发生。

不幸的是，由于 CellTable 最初不支持表头上的输入框，因此也不支持表头上的 cellIsEditing。

作为一种解决方法，我在自己的 CellTable 类扩展中创建了一个私有字段 headerIsEditing，默认设置为 FALSE。然后我重写了 onBrowserEvent2 方法，当过滤器输入框处于焦点时将 headerIsEditing 设置为 TRUE，并在同一框的模糊事件发生时将其设置为 FALSE。

然后我覆盖了 isKeyboardNavigationSuppressed ，如下所示：

```
@Override
protected boolean isKeyboardNavigationSuppressed() {
    return super.isKeyboardNavigationSuppressed() || headerIsEditing;
} 
```

这样，当 cellIsEditing 为 TRUE 或 headerIsEditing 为 TRUE 时，键盘导航将被抑制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T07:47:43.300

的对象具有[com.google.gwt.event.dom.client.DomEvent](http://google-web-toolkit.googlecode.com/svn/javadoc/2.4/com/google/gwt/event/dom/client/DomEvent.html)类`KeyUpEvent`中的方法`getNativeEvent()`

使用它你应该没有任何问题：

```
if (event.getNativeEvent().getKeyCode() == 32) { 
       // TODO
} 
```

可能是其他地方的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T02:25:30.693

我能够解决这个问题，在 Andrey 指出的浏览器事件中，我有这个代码：

```
public void onBrowserEvent(Context context, Element parent, C value,
    NativeEvent event, ValueUpdater<C> valueUpdater) {
if (value == null) return;

String eventType = event.getType();

GWT.log(eventType);

super.onBrowserEvent(context, parent, value, event, valueUpdater);

InputElement input = getInputElement(parent);

if ("change".equals(eventType)) {
    ((HeaderFilterDto) value).setFilterValue(input.getValue());
    if (valueUpdater != null) valueUpdater.update(value);
} else if ("keyup".equals(eventType) && event.getKeyCode() == 32) {
    insertSpaceToCursorPosition(input);
}
}; 
```

然后我有这个方法在光标位置插入空格：

```
protected void insertSpaceToCursorPosition(InputElement input) {
if (StringUtils.isNotBlank(input.getValue())) {
    int length = input.getValue().length();
    int pos = getCursorPos(input);
    int selected = getSelectionLength(input);

    String sub1 = input.getValue().substring(0, pos);
    String sub2 = input.getValue().substring(selected == 0 ? pos: pos + selected, length);

    input.setValue(sub1 + SPACE + sub2);

    setSelectionRange(input, pos);
} else {
    input.setValue(SPACE);
    setSelectionRange(input, 0);
}
} 
```

insertSpaceToCursorPosition 中的方法是从 TextBoxImpl.class 的 ValueBoxBase 实现中设计的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-28T13:36:40.573

我解决了这个问题，修复了`KeyProvider`传递给`CellTable`.

如果您`KeyProvider`是基于为空的字段实现的，则可能会发生此问题，该字段`com.google.gwt.cell.client.AbstractInputCell#isEditing`返回`false`然后`SPACEBAR`键用作导航单元格。

# jquery - Jquery获取子表的宽度

> ID：10409404
> 
> 赞同：1
> 
> 时间：2012-05-02T07:23:48.817
> 
> 标签：jquery, html

这可能是一个非常简单的问题，但我无法得到它。如何使用jquery获取具有“test”类的div的子表的宽度

```
<div class="test">
<div id="one">
</div>
<table>
<thead>
    <th>Test1</th>
    <th>Test2</th>
    </thead>
    <tbody>
        <tr>
            <td>
                12
            </td>
            <td>
                34
            </td>
        </tr>
    </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T07:25:06.030

这很简单：

```
$(".test > table").width(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T07:25:31.033

尝试

```
$("div.test table").width() 
```

# objective-c - 理解和编写单例类而不是使用委托类

> ID：10409415
> 
> 赞同：1
> 
> 时间：2012-05-02T07:24:32.697
> 
> 标签：objective-c, ios, facebook, singleton

我是 iOS 编程的新手，我对单例类是什么以及为什么使用它非常感兴趣。我找到了一些信息，但它是模糊的。特别是我想把它应用到真实的例子中。我的项目使用 Facebook SDK，我想为我的 NSDictionary 创建包含好友列表的单例类。我的 .m 委托文件：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
//here is some other code

facebook = [[Facebook alloc] initWithAppId:@"my app id" andDelegate:self];

NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
if ([defaults objectForKey:@"FBAccessTokenKey"] 
    && [defaults objectForKey:@"FBExpirationDateKey"]) {
    facebook.accessToken = [defaults objectForKey:@"FBAccessTokenKey"];
    facebook.expirationDate = [defaults objectForKey:@"FBExpirationDateKey"];
}

if (![facebook isSessionValid]) {
    NSArray *permissions = [[NSArray alloc] initWithObjects:
                            @"user_location", 
                            @"friends_location",
                            @"read_friendlists",
                            nil];
    [facebook authorize:permissions];
    [permissions release];
}
[facebook requestWithGraphPath:@"me/friends" andDelegate:(id)self];

//here is some other code
} 
```

我设置了返回好友列表的请求的 NSDictionary 值：

```
- (void)request:(FBRequest *)request didLoad:(id)result {
_friendsDictionary = result;
} 
```

我需要以哪种方式编写单例类而不使用委托类`AppDelegate *delegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T07:53:46.800

单例是一个只在应用程序运行时实例化一次的类。它们通常采用管理器或工厂类的形式。当您想让对象始终存在于内存中时，它们会使用它们，通常我用于包含全局函数和变量的全局类，这些函数和变量在我的应用程序的许多地方都需要。

实现单例模式的最简单示例是这样的

在.h

```
#import <Foundation/Foundation.h>

@interface MySingleton : NSObject {

}
+(MySingleton*)sharedMySingleton;
-(void)sayHello;
@end 
```

米

```
@implementation MySingleton
static MySingleton* _sharedMySingleton = nil;

+(MySingleton*)sharedMySingleton
{
    @synchronized([MySingleton class])
    {
        if (!_sharedMySingleton)
            [[self alloc] init];

        return _sharedMySingleton;
    }

    return nil;
}

-(void)sayHello {
    NSLog(@"Hello World!");
}
@end 
```

因此，在您项目中的任何类中触发 tha say hello 函数，您只需要导入该类，然后像这样调用该函数`[MySingleton sharedMySingleton] sayHello];`

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T07:52:17.030

阅读这些：[Singletons](http://cocoawithlove.com/2008/11/singletons-appdelegates-and-top-level.html)，[more singletons](http://lukeredpath.co.uk/blog/a-note-on-objective-c-singletons.html)，[SO Post](https://stackoverflow.com/questions/145154/what-does-your-objective-c-singleton-look-like)，[Singleton in Obj-c](http://www.duckrowing.com/2011/11/09/using-the-singleton-pattern-in-objective-c-part-2/)。谷歌在首页上可能会给出 10 个不错的结果。

顺便说一句，您可能不会保留结果，因为我假设 _friendsDictionary 是 ivar 而不是属性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-31T06:02:22.287

单例模式不应在 iOS 代码中使用。根据定义，单例是内存泄漏。相反，您应该做的是创建一个从应用程序委托引用的单个实例。您可以只创建一个实例，例如单例，但只需确保您不创建永远不会释放的静态（私有）变量。来自应用程序委托的 ref 始终可以设置为 nil 以确定内存是否正在释放。你不能用上面描述的单例方法做到这一点。

注意只引用此实例中的数据，因为对 UIView 派生元素的引用会泄漏大量系统内存，因为它们没有被清理。

# ruby - 正则表达式使用 watchr 排除缩小文件

> ID：10409416
> 
> 赞同：0
> 
> 时间：2012-05-02T07:24:40.587
> 
> 标签：ruby, regex, watch

我尝试使用 Ruby watchr 来观察所有资产，但已经缩小并在更改时运行 minify：

```
watch('^(css|js)/.+(?!\.min)\.(css|js)') {
    |md| system('sh #{md[1]}/minify.sh')
} 
```

不知何故，这不起作用，因为 .+ 是贪婪的。在 PHP 中你可以使用 .+? 减少贪婪，但是如何为 Ruby 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T07:29:04.080

根据[here](http://www.ruby-forum.com/topic/139200)， the`.+?`也是Ruby中的有效正则表达式。

# java - Java Logging , Log4J , Logback 的性能和内存占用

> ID：10409423
> 
> 赞同：1
> 
> 时间：2012-05-02T07:25:21.147
> 
> 标签：java, log4j, slf4j, logback, java.util.logging

我知道，目前最合适的组合是 SLF4J + Logback，但是考虑到我的要求是非常基本的日志记录，我的简单问题是

1> 性能和内存占用方面，Java Logging 和 Log4J 之间哪个更好，为什么？

2> 性能和内存占用方面，Java Logging 和（SLF4J + Logback）之间哪个更好，为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T08:18:51.330

“非常基本的日志记录”通常不是。

日志条目会去哪里？如果在文件中，如何保存日志文件而不是在重新启动时覆盖？过时的保存日志文件会发生什么？

我建议您在自己的代码中使用 slf4j 作为 API。而且，除非你有其他模块或政策强制执行特定的解决方案，否则我建议使用 logback，因为它是目前维护最积极的，如果需要，你可以稍后用 log4j 或 jul 替换它。

此外，slf4j 为您提供 {}，这是迄今为止我所见过的登录客户端的最大改进。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T08:05:49.257

> 考虑到我的要求是非常基本的日志记录

那么你应该只担心简单。Java Logging 可能是最简单的解决方案，它的性能可能还可以。

大多数记录器的内存占用不是问题。有时性能是，但除非您有低延迟（亚毫秒）或高吞吐量（每秒记录数千个事件）系统，否则我不会担心。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-02T08:15:10.233

我可以给您以下建议：除非您只是为了好玩而做某事，否则您的代码很可能会扩展，并且您必须将所有日志语句重写为生产质量的 API。如果是这种情况，我建议您使用 SLF4J，它仍然让您可以选择使用 JUL、Log4j 或 logback。

# mysql - mysql如何输出auto_increment计数器值

> ID：10409424
> 
> 赞同：1
> 
> 时间：2012-05-02T07:25:24.740
> 
> 标签：mysql

当我在表中插入一条记录时， auto_increment 字段的值可能是 1000，我知道有一个 auto_increment 计数器来决定值。

我使用命令：

```
SHOW VARIABLES LIKE 'auto_incre%' 
```

它输出：</p>

```
auto_increment_increment    1
auto_increment_offset   1 
```

所以我只想知道，如果有一种方法可以用来检查 auto_increment 计数器值。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T07:28:04.463

```
SHOW TABLE STATUS LIKE 'table_name' 
```

为您提供作为 Auto_increment 的列。这是将在 INSERT 上添加的下一个值（通常是 id）。

例子：

```
$str_table = 'users';

$query = mysql_query("SHOW TABLE STATUS LIKE '{$str_table}'");
$row   = mysql_fetch_assoc($query);

$int_increment = $row['Auto_increment']; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T07:27:10.937

该表的值显示在表 DDL 中。尝试`SHOW CREATE TABLE yourTableName`

例子：

```
CREATE TABLE `test`.`auto` (
`ID` INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY ,
`NAME` CHAR( 1 ) NOT NULL 
) ENGINE = InnoDB;

INSERT INTO `test`.`auto` (`ID`, `NAME`) VALUES (NULL, 'A');
INSERT INTO `test`.`auto` (`ID`, `NAME`) VALUES (NULL, 'B');

SHOW CREATE TABLE test.auto;

CREATE TABLE `auto` (
  `ID` int(10) unsigned NOT NULL auto_increment,
  `NAME` char(1) collate utf8_bin NOT NULL,
  PRIMARY KEY  (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8 COLLATE=utf8_bin 
```

# php - 在 php 中访问 joomla 会话 - codeigniter

> ID：10409432
> 
> 赞同：3
> 
> 时间：2012-05-02T07:26:00.270
> 
> 标签：php, codeigniter, session, joomla

我需要检查用户是否在 CodeIgniter 中登录。

登录发生在 Joomla 站点中。

我尝试了以下方法来初始化 joomla 。

```
define( '_JEXEC', 1 );
define( 'DS', DIRECTORY_SEPARATOR );
define('JPATH_BASE', dirname(__FILE__) );

require_once ("../includes/defines.php");
require_once ("../includes/framework.php");

$mainframe =& JFactory::getApplication("site");
$mainframe->initialise();

$session =& JFactory::getSession();
$user = $session->get( 'user' ); 
```

但我收到了这条信息：

> 找不到配置文件，也没有可用的安装代码。退出...

Joomla 安装在 root 上，codeigniter 安装在 root/advanced 上

我正在调用控制器中的代码。

我该如何解决这个问题？

**编辑：**

现在我收到此错误：

> 遇到 PHP 错误
> 
> 严重性：通知
> 
> 消息：未定义变量：BM
> 
> 文件名：core/CodeIgniter.php
> 
> 行号：364

**编辑**

我的控制器看起来像这样

```
function is_logged()
    {

                define( '_JEXEC', 1 );
            define( 'JPATH_BASE', '../');
            define( 'DS', DIRECTORY_SEPARATOR );

        require_once ( JPATH_BASE .DS.'includes'.DS.'defines.php' );
        require_once ( JPATH_BASE .DS.'includes'.DS.'framework.php' );
        //require_once ("../libraries/joomla/user/authentication.php");
        $mainframe =& JFactory::getApplication("site");
        $mainframe->initialise();

        $session =& JFactory::getSession();
        $user = $session->get( 'user' );

    } 
```

**目录结构**

```
--Public_html
  --Joomla Istallation files
  --Advanced [This is a folder ,i installed codeignitor on this folder] 
```

所以通往 joomla 的路径是`site.com/`，而通往 Codeignitor 的路径是`site.com/advanced`

**有关错误的更多信息**

Codeignitor Core 上的第 364 行说：

```
// Mark a benchmark end point
    $BM->mark('controller_execution_time_( '.$class.' / '.$method.' )_end'); 
```

我可以在 CI 核心开始时看到以下内容

```
 $BM =& load_class('Benchmark', 'core');
    $BM->mark('total_execution_time_start');
    $BM->mark('loading_time:_base_classes_start'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T16:15:25.270

我知道这是一篇旧文章，但您需要确保 JPATH_BASE 指向您的 configuration.php 文件所在的目录。我会使用绝对路径而不是相对路径。

# backbone.js - 嵌套 Backbone.js 集合的更好解决方案

> ID：10409436
> 
> 赞同：17
> 
> 时间：2012-05-02T07:26:09.397
> 
> 标签：backbone.js, nested-attributes

我的许多 Backbone 模型经常处理嵌套模型和集合，到目前为止，我使用`defaults`,`parse`和`toJSON`手动的组合来实现嵌套：

```
ACME.Supplier = Backbone.Model.extend({
    defaults: function() {
        return {
            contacts: new ACME.Contacts(),
            tags: new ACME.Tags(),
            attachments: new ACME.Attachments()
        };
    },

    parse: function(res) {
        if (res.contacts) res.contacts = new ACME.Contacts(res.contacts);
        if (res.tags) res.tags = new ACME.Tags(res.tags);
        if (res.attachments) res.attachments = new ACME.Attachments(res.attachments);

        return res;
    }
});

ACME.Tag = Backbone.Model.extend({
    toJSON: function() {
        return _.pick(this.attributes, 'id', 'name', 'type');
    }
}); 
```

我查看了一些插件，它们基本上与上面的功能相同，但控制更少，样板更多，所以我想知道是否有人对这个常见的 Backbone.js 问题有更优雅的解决方案。

* * *

**编辑：**我最终采用了以下方法：

```
ACME.Supplier = Backbone.Model.extend({
    initialize: function(options) {
        this.tags = new ACME.Tags(options.tags);
    },

    parse: function(res) {
        res.tags && this.tags.reset(res.tags);

        return res;
    }
});

ACME.Tag = Backbone.Model.extend({
    toJSON: function() {
        return _.pick(this.attributes, 'id', 'name', 'type');
    }
}); 
```

值得注意的是，后来我发现你需要通过`options`对象将嵌套模型/集合数据从构造函数传递到嵌套模型的构造函数中。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-02T16:55:38.797

我认为您的方法没有任何问题。

恕我直言，`Model.parse()`如果为此方法：*在需要特殊解析行为的情况下被覆盖*。

我唯一会改变的想法是这样的：

```
if (res.tags) res.tags = new ACME.Tags(res.tags); 
```

为了这：

```
if (res.tags) this.tags.reset(res.tags); 
```

由于您已经有一个`ACME.Tags`集合实例，我会重用它。

另外我不太喜欢这个`defaults`实现，我习惯于在其中进行初始化，`Model.initialize()`但我认为这是一个品味问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T13:48:00.757

我发现使用这种方法，Supplier 的 toJSON 函数会过时，因此从它的 JSON 状态和子数据中重新组装回来可能是个好主意。

```
ACME.Supplier = Backbone.Model.extend({
    initialize: function(options) {
        this.tags = new ACME.Tags(options.tags);
    },

    parse: function(res) {
        res.tags && this.tags.reset(res.tags);

        return res;
    },

    toJSON: function({
        return _.extend(
            _.pick(this.attributes, 'id', 'attr1', 'attr2'), {
            tags: this.tags.toJSON(),
        });
    }) 
```

});

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-24T18:45:45.783

我们不想添加另一个框架来实现这一点，所以我们将它抽象到一个基本模型类中。以下是您声明和使用它的方式（[作为要点提供](https://gist.github.com/gaearon/6689379#file-basemodel-js)）：

```
// Declaration

window.app.viewer.Model.GallerySection = window.app.Model.BaseModel.extend({
  nestedTypes: {
    background: window.app.viewer.Model.Image,
    images: window.app.viewer.Collection.MediaCollection
  }
});

// Usage

var gallery = new window.app.viewer.Model.GallerySection({
    background: { url: 'http://example.com/example.jpg' },
    images: [
        { url: 'http://example.com/1.jpg' },
        { url: 'http://example.com/2.jpg' },
        { url: 'http://example.com/3.jpg' }
    ],
    title: 'Wow'
}); // (fetch will work equally well)

console.log(gallery.get('background')); // window.app.viewer.Model.Image
console.log(gallery.get('images')); // window.app.viewer.Collection.MediaCollection
console.log(gallery.get('title')); // plain string 
```

它同样适用于`set`和`toJSON`。
这是`BaseModel`：

```
window.app.Model.BaseModel = Backbone.Model.extend({
  constructor: function () {
    if (this.nestedTypes) {
      this.checkNestedTypes();
    }

    Backbone.Model.apply(this, arguments);
  },

  set: function (key, val, options) {
    var attrs;

    /* jshint -W116 */
    /* jshint -W030 */
    // Code below taken from Backbone 1.0 to allow different parameter styles
    if (key == null) return this;
    if (typeof key === 'object') {
      attrs = key;
      options = val;
    } else {
      (attrs = {})[key] = val;
    }
    options || (options = {});
    // Code above taken from Backbone 1.0 to allow different parameter styles
    /* jshint +W116 */
    /* jshint +W030 */

    // What we're trying to do here is to instantiate Backbone models and collections
    // with types defined in this.nestedTypes, and use them instead of plain objects in attrs.

    if (this.nestedTypes) {
      attrs = this.mapAttributes(attrs, this.deserializeAttribute);
    }

    return Backbone.Model.prototype.set.call(this, attrs, options);
  },

  toJSON: function () {
    var json = Backbone.Model.prototype.toJSON.apply(this, arguments);

    if (this.nestedTypes) {
      json = this.mapAttributes(json, this.serializeAttribute);
    }

    return json;
  },

  mapAttributes: function (attrs, transform) {
    transform = _.bind(transform, this);
    var result = {};

    _.each(attrs, function (val, key) {
      result[key] = transform(val, key);
    }, this);

    return result;
  },

  serializeAttribute: function (val, key) {
    var NestedType = this.nestedTypes[key];
    if (!NestedType) {
      return val;
    }

    if (_.isNull(val) || _.isUndefined(val)) {
      return val;
    }

    return val.toJSON();
  },

  deserializeAttribute: function (val, key) {
    var NestedType = this.nestedTypes[key];
    if (!NestedType) {
      return val;
    }

    var isCollection = this.isTypeASubtypeOf(NestedType, Backbone.Collection),
        child;

    if (val instanceof Backbone.Model || val instanceof Backbone.Collection) {
      child = val;
    } else if (!isCollection && (_.isNull(val) || _.isUndefined(val))) {
      child = null;
    } else {
      child = new NestedType(val);
    }

    var prevChild = this.get(key);

    // Return existing model if it is equal to child's attributes

    if (!isCollection && child && prevChild && _.isEqual(prevChild.attributes, child.attributes)) {
      return prevChild;
    }

    return child;
  },

  isTypeASubtypeOf: function (DerivedType, BaseType) {
    // Go up the tree, using Backbone's __super__.
    // This is not exactly encouraged by the docs, but I found no other way.

    if (_.isUndefined(DerivedType['__super__'])) {
      return false;
    }

    var ParentType = DerivedType['__super__'].constructor;
    if (ParentType === BaseType) {
      return true;
    }

    return this.isTypeASubtypeOf(ParentType, BaseType);
  },

  checkNestedTypes: function () {
    _.each(this.nestedTypes, function (val, key) {
      if (!_.isFunction(val)) {
        console.log('Not a function:', val);
        throw new Error('Invalid nestedTypes declaration for key ' + key + ': expected a function');
      }
    });
  },
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-12T09:29:10.657

面对同样的问题，我做了类似的事情（下面的代码是 TypeScript 编译器的输出，所以有点冗长）：

```
 var Model = (function (_super) {
    __extends(Model, _super);
    function Model() {
        _super.apply(this, arguments);
    }
    Model.prototype.fieldToType = function () {
        return {};
    };

    Model.prototype.parse = function (response, options) {
        _.each(this.fieldToType(), function (type, field) {
            if (response[field]) {
                if (_.isArray(response[field])) {
                    response[field] = _.map(response[field], function (value) {
                        return new type(value, { parse: true });
                    });
                } else {
                    response[field] = new type(response[field], { parse: true });
                }
            }
        });
        return _super.prototype.parse.call(this, response, options);
    };
    Model.prototype.toJSON = function () {
        var j = _super.prototype.toJSON.call(this);
        _.each(this.fieldToType(), function (type, field) {
            if (j[field]) {
                if (_.isArray(j[field])) {
                    j[field] = _.map(j[field], function (value) {
                        return value.toJSON();
                    });
                } else {
                    j[field] = j[field].toJSON();
                }
            }
        });
        return j;
    };
    return Model;
})(Backbone.Model); 
```

然后我可以简单地重写 fieldToType 方法来定义我的字段类型：

```
PendingAssignmentOffer.prototype.fieldToType = function () {
    return {
        'creator': User,
        'task_templates': TaskTemplateModel,
        'users': User,
        'school_classes': SchoolClass
    };
}; 
```

# c# - 在 C# 中使用软连字符

> ID：10409438
> 
> 赞同：0
> 
> 时间：2012-05-02T07:26:17.967
> 
> 标签：c#, asp.net, .net-2.0

我想使用 C# 在单词的每个字母之间插入一个软连字符。例如这里是一些文本：

`Thisisatest => T-h-i-s-i-s-a-t-e-s-t`

'-' 是软连字符。我怎么能在 C# 中做到这一点？我打算在网站上使用它。

**注意：**我使用的是 .NET 2.0。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-02T07:29:24.560

使用 HTML 实体`&shy;`作为软连字符：

```
theString = String.Join("&shy;", theString.Select(c => c.ToString())); 
```

对于 .NET 2.0：

```
string[] chars = new string[theString.Length];
for (int i = 0; i < theString.Length; i++) {
  chars[i] = theString[i].ToString();
}
theString = String.Join("&shy;", chars); 
```

或使用`StringBuilder`：

```
StringBuilder builder = new StringBuilder(theString.Length * 6);
foreach (char c in theString) {
  builder.Append(c).Append("&shy;");
}
theString = builder.ToString(0, builder.Length - 5); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T07:30:34.303

不需要 LINQ（但 .NET 4.0 中的`object[]`重载需要`String.Join`）：

```
var test = "Thisisatest";
String.Join("&shy;", test.ToCharArray()); 
```

对于以前版本的可怜的灵魂：

```
String.Join("&shy;", test.Select(x => x.ToString())); 
```

如果您碰巧使用 .NET 2.0（正如 OP 现在所说），那么请查看另一个响应，因为它不需要再次输入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T07:33:07.510

试试这个

.net 3.5

```
Console.WriteLine( String.Join("&shy;","Thisisatest".ToCharArray().Select(r=>r.ToString()).ToArray())); 
```

.net 4.0+

```
Console.WriteLine(String.Join("&shy;", "Thisisatest".ToCharArray())); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T07:34:20.713

下面是一个简单的辅助方法，您可以使用它在给定字符串的每个字母之间添加连字符。

```
 static string Hyphenify(string text)
    {
        return string.Join("-", text.ToArray());
    } 
```

您还可以添加另一个参数以使您能够使用分隔符，见下文。

```
 static string SpaceLetters(string text, string separator)
    {
        return string.Join(separator, text.ToArray());
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-02T07:37:44.080

这是解决方案：ASPX 页面：

```
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
    <asp:TextBox ID="txtOriginalString" runat="server"></asp:TextBox>
    <asp:TextBox ID="txtFormattedString" runat="server"></asp:TextBox>
    <asp:Button ID="btnFormat" Text="Format" runat="server" OnClick="btnFormat_Click" />
</asp:Content> 
```

C#代码：

```
protected void btnFormat_Click(object sender, EventArgs e)
{
    string formattedString = "";
    foreach (char c in this.txtOriginalString.Text.ToCharArray())
        formattedString += c + "-";
    this.txtFormattedString.Text = formattedString;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-02T07:40:02.060

这是你想要的吗？

```
var r = new Regex( @"([A-Za-z0-9])(?!$|\s)" );
var text = "Thisisatest";
var text2=r.Replace( text,"$1-" ); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-02T07:45:17.147

另一个版本：

```
 string AddHyphens(string s)
    {
        string ret="";
        foreach(char c in s.ToCharArray())
            ret += ret != "" ? "-" + c : c.ToString();
        return ret;
    } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-02T08:30:26.803

```
string str = "sometext";
string output="";
if(str.Length>0)
{
    output=""+str.ElementAt(0);

    for(int i =1; i< str.Length;i++)
        output += "-"+str.ElementAt(i); 
} 
```

# c# - 从记忆中打开PowerPoint

> ID：10409446
> 
> 赞同：0
> 
> 时间：2012-05-02T07:27:18.803
> 
> 标签：c#, interop, powerpoint

是否可以从纯粹在内存中的文件打开PowerPoint演示文稿？

假设我要从服务器下载演示文稿，我是否必须将此文件保存在本地才能使用互操作进行分析？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T09:44:34.343

正如其他海报所暗示的那样，没有直接的方法。您可以尝试使用 IStorage/IPersistStorage 加载文件，这可能有效也可能无效。[在此处](http://us.generation-nt.com/answer/excel-ipersiststorage-load-fails-help-24976002.html)查看有关 Excel 的一些说明。但是，使用临时文件会容易*得多*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T08:53:18.180

您可以使用[RAM 磁盘](http://en.wikipedia.org/wiki/List_of_RAM_disk_software)。这样演示文件实际上是在内存中，但就 PowerPoint 而言似乎在磁盘上。

# php - 在codeigniter中加密时避免使用特定字符？

> ID：10409453
> 
> 赞同：4
> 
> 时间：2012-05-02T07:28:00.617
> 
> 标签：php, codeigniter

我需要通过 URL 传递一些加密值。有什么方法可以避免加密后我们得到的值中出现一些字符，例如斜杠（/）？因为在 codeigniter 中，使用斜杠等字符来分隔 URL 中的参数。请注意，我不希望有任何建议不要在 URL 中传递加密字符串 :)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-02T07:36:55.447

加密后使用 PHP`urlencode`函数：http: [//php.net/manual/en/function.urlencode.php](http://php.net/manual/en/function.urlencode.php)并`urldecode`在处理 GET 数据的脚本中使用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-02T15:26:10.107

```
class MY_Encrypt extends CI_Encrypt
{

    function encode($string, $key="", $url_safe=TRUE)
    {
        $ret = parent::encode($string, $key);

        if ($url_safe)
        {
            $ret = strtr(
                    $ret,
                    array(
                        '+' => '.',
                        '=' => '-',
                        '/' => '~'
                    )
                );
        }

        return $ret;
    }

    function decode($string, $key="")
    {
        $string = strtr(
                $string,
                array(
                    '.' => '+',
                    '-' => '=',
                    '~' => '/'
                )
            );

        return parent::decode($string, $key);
    }
} 
```

-

```
$key = $this->config->item('encryption_key');

$outboundlink = urlencode( $this->encrypt->encode($segment, $key, TRUE) );

$inboundlink  = rawurldecode( $this->encrypt->decode( $segment, $key) ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T07:40:54.067

一种想法是仅使用 0-9 和 af 以及可选的 x 将加密字符串表示为十六进制。

但我建议您使用 TLS（更好的 SSL）来保护您的数据，因为现在您可能使用 JS 加密数据，因此攻击者可以看到密钥。

不要称当前方案安全或加密，而只是混淆。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-05-02T08:01:40.573

您想要的不是加密（这意味着安全），而是编码。在实践中，您的选择基本上是：

*   **urlencode**（如果您希望字符串有点清晰，请使用此代码。这也会为您提供比其他两个选项更短的字符串）
*   **base64**（如果您不希望字符串清晰易读并且还想节省字符串中的空间，请使用它）
*   **十六进制**（如果您不希望字符串清晰且不关心字符串长度，请使用此选项）

我不会选择十六进制。确定您是否希望字符串清晰易读，然后首先选择两者中的一个。

# silverlight - 如何在silverlight中显示鼠标悬停按钮

> ID：10409457
> 
> 赞同：2
> 
> 时间：2012-05-02T07:28:13.010
> 
> 标签：silverlight

我只需要在silverlight中显示鼠标上的按钮。请任何人帮助解决这个问题。下面是我到目前为止所做的代码。，

```
<StackPanel x:Name="spDeleteContent" VerticalAlignment="Center" Margin="10,0,0,0"  Width="20" Height="20" HorizontalAlignment="Center" Orientation="Vertical">
<Button x:Name="btnDeleteContent" Height="20" Width="20" Click="btnDeleteContent_Click"        BorderThickness="0" Visibility="Collapsed">
    <Image Source="/Assets/Images/close.png" Height="10" Width="10" Cursor="Hand" Margin="0"/>
    <i:Interaction.Triggers>
        <i:EventTrigger EventName="MouseEnter">
            <ei:ChangePropertyAction PropertyName="Visibility" Value="Visible"></ei:ChangePropertyAction>
        </i:EventTrigger>
        <i:EventTrigger EventName="MouseLeave">
            <ei:ChangePropertyAction PropertyName="Visibility" Value="Collapsed"></ei:ChangePropertyAction>
        </i:EventTrigger>
    </i:Interaction.Triggers>
</Button>
</StackPanel> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-18T07:29:47.417

您需要将代码更改为以下内容。

```
<StackPanel x:Name="spDeleteContent">
  <Button x:Name="btnDeleteContent" Visibility="Collapsed">
    <Image Source="/Assets/Images/close.png" Height="10" Width="10"  
           Cursor="Hand" Margin="0"/> 
  </Button>
  <i:Interaction.Triggers>
    <i:EventTrigger EventName="MouseEnter">
     <ei:ChangePropertyAction TargetName="btnDeleteContent" PropertyName="Visibility" 
                              Value="Visible"></ei:ChangePropertyAction>
    </i:EventTrigger>
    <i:EventTrigger EventName="MouseLeave">
      <ei:ChangePropertyAction  TargetName="btnDeleteContent"  PropertyName="Visibility" 
                                Value="Collapsed"></ei:ChangePropertyAction>
    </i:EventTrigger>
  </i:Interaction.Triggers>
</StackPanel> 
```

将 EventTriggers 添加到 StackPanel 的 Triggers 中，并将 Button 的名称`MouseEnter`添加到.`MouseLeave``TargetName``ChangePropertyAction`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T10:28:36.103

您可以编写适当的行为，例如：

```
namespace SilverlightApplication1.Helpers.Behaviors
{
   public class MouseOverOpacity : System.Windows.Interactivity.Behavior<UIElement>
   {
    protected override void OnAttached()
    {
        AssociatedObject.Opacity = 0;

        AssociatedObject.MouseEnter += AssociatedObjectOnMouseEnter;
        AssociatedObject.MouseLeave += AssociatedObjectOnMouseLeave;
    }

    protected override void OnDetaching()
    {
        AssociatedObject.Opacity = 1;

        AssociatedObject.MouseEnter -= AssociatedObjectOnMouseEnter;
        AssociatedObject.MouseLeave -= AssociatedObjectOnMouseLeave;
    }

    private void AssociatedObjectOnMouseLeave(object sender, MouseEventArgs mouseEventArgs)
    {
        AssociatedObject.Opacity = 0;
    }

    private void AssociatedObjectOnMouseEnter(object sender, MouseEventArgs mouseEventArgs)
    {
        AssociatedObject.Opacity = 1.0;
    }
} 
```

}

XAML：

```
<Border BorderThickness="2" BorderBrush="Red" Height="100" Width="100">
        <Button Content="Button">
            <i:Interaction.Behaviors>
                <behaviors:MouseOverOpacity />
            </i:Interaction.Behaviors>
        </Button>
</Border> 
```

你不应该使用可见性属性作为方法，因为当 UIElement.Visibility = Collapsed 时，它不会收到事件的通知。

# java - 将通用列表发送到 jersey servlet

> ID：10409467
> 
> 赞同：1
> 
> 时间：2012-05-02T07:29:00.267
> 
> 标签：java, jaxb, jersey

我正在尝试使用 put 方法，使用 GenericEntity 将通用列表发送到球衣 servlet。我已经看到很多请求通用列表的示例，但没有一个提供它。

所以我**服务器**上的代码是：

```
@PUT
@Produces(MediaType.TEXT_HTML)
public String doPutHtml(GenericType<List<SystemInfo>> systemInfoList) {
    System.out.println(systemInfoList.toString());
    return "OK";
} 
```

**客户端**发送 put 请求的代码：

```
WebResource ws;
Configuration conf = ConfigurationFactory.getConfigurationFactory()
            .getConfiguration();

Client client = Client.create();
ws = client.resource("http://" + conf.getDatacenterURL() + ":"+ conf.getDatacenterPort() + "/services/systemInfo");
GenericEntity entity = new GenericEntity<List<SystemInfo>>(systemInfoList) {};
String response = ws.accept(MediaType.TEXT_HTML).type(MediaType.APPLICATION_XML).put(String.class, entity); 
```

当我运行**客户端**代码时，我得到了这个异常：

```
com.sun.jersey.api.client.ClientHandlerException: com.sun.jersey.api.client.ClientHandlerException: A message body writer for Java type, class java.util.ArrayList, and MIME media type, application/octet-stream, was not found 
```

所以我的问题是，是否可以通过这种方式发送通用列表？如果这是不可能的，还有其他选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-01T22:32:41.240

通过不同的组合收到完全相同的错误。我找到的答案似乎很简单。

上面的客户端设置和调用示例是正确的。具体来说...

```
GenericEntity entity = new GenericEntity<List<SystemInfo>>(systemInfoList) {};
String response = 
ws.accept(MediaType.TEXT_HTML).type(MediaType.APPLICATION_XML).put(String.class, entity); 
```

GenericEntity 处理 List 到 restful 服务的转换。服务中只需要适当的列表。

```
@PUT
@Produces(MediaType.TEXT_HTML)
public String doPutHtml(List<SystemInfo> systemInfoList) {
    System.out.println(systemInfoList.toString());
    return "OK";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T07:34:44.360

这个问题是在编组和编组对象期间产生的。这里有一个类似的线程讨论相同的问题。但是，这与 JAXB 相关。那里也尝试序列化列表对象并面临相同的问题。一旦你分析这个问题，在这里也很容易实现相同的技术。

[使用 JAXB 解组/编组 List<String>](https://stackoverflow.com/questions/1603404/using-jaxb-to-unmarshal-marshal-a-liststring)

希望这会帮助你。

# facebook - FB 登录在 Chrome 中不起作用

> ID：10409471
> 
> 赞同：2
> 
> 时间：2012-05-02T07:29:07.810
> 
> 标签：facebook, google-chrome, facebook-javascript-sdk, facebook-login

我无法使用 JSDK api 登录 Facebook。我已经读过 Chrome 中常见的弹出窗口被阻止的问题，但是弹出窗口可以正常打开并且对用户来说没有明显的问题。但是我得到控制台日志“不安全的 Javascript 访问”并且用户没有登录。

我在 Chrome 中添加了一个用于调试的登录事件，根本没有触发。

```
window.fbAsyncInit = function() {
  FB.init({
    appId      : '247886858583094',
    status     : true, 
    cookie     : true,
    xfbml      : true,
    oauth      : true,
  });
     FB.Event.subscribe('auth.login',function(response) { alert('You logged in'); } );
};
(function(d){
   var js, id = 'facebook-jssdk'; if (d.getElementById(id)) {return;}
   js = d.createElement('script'); js.id = id; js.async = true;
   js.src = "//connect.facebook.net/en_US/all.js";
   d.getElementsByTagName('head')[0].appendChild(js);
 }(document)); 
```

我尝试了一个空白的 HTML 页面，只有这个和登录按钮，所以这绝对是浏览器或 api 的一部分问题。

有人遇到过这个问题吗？有什么解决办法吗？

# .net - 如何配置 IIS 以使 ASP.NET MVC Intranet 应用程序正常工作？

> ID：10409472
> 
> 赞同：0
> 
> 时间：2012-05-02T07:29:14.287
> 
> 标签：.net, asp.net-mvc-3, iis-7.5

我有一个使用客户端的 Windows 登录用户名自动授权的 ASP.NET MVC 3 应用程序。

当我在 VS Web 服务器中运行该应用程序时，它运行良好。它从一个随机端口（和往常一样）开始，并立即接受任何 HTTP 请求，正确地将我的 Windows 用户名（以及计算机名）传递给 Web 服务器。

当我将此项目部署到 IIS 7.5 上时，我无法以任何方式访问该网站 - 我一直在更改身份验证选项但没有得到任何结果 - IIS 无限地询问凭据或显示“错误，无法访问”页面。

那么，我需要配置哪些选项才能让任何人正确打开网站并自动提供凭据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T12:12:37.093

您必须在 IIS 中为您的网站启用 Windows 身份验证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T14:58:18.240

您还可以将站点设置为使用 web.config 文件中`<system.web>`标记下的 Windows 身份验证，如下所示：

```
<system.web>
    <authentication mode="Windows" />
</system.web> 
```

这将由 IIS 获取，然后将身份验证模式设置为 Windows。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T14:11:20.750

如果您想使用 Windows 身份验证，只需在 IIS 上启用它并禁用其他类型。请记住，它只会在 Internet Explorer 和 Chrome 下自动运行。Opera 和 Firefox 将要求提供凭据。

我觉得您可能遇到的另一个问题实际上是在内置 Web 服务器中对其进行测试。虽然它是功能性的，但它并不能完全按照您的预期处理身份验证。即使您启用 NTLM 并且网站对您进行身份验证，它仍然在某些地方使用匿名身份验证。

我建议不要在内置服务器上而是在本地 IIS 上部署和测试这样的网站。直接从 VS 设置很容易，如果你在 Windows 中还没有它，你只需要启用它。还要记住在 IIS 中正确设置身份验证。

祝你好运！

# c# - C# ASP.Net MVC RegularExpressionAttribute 验证：否定的后视断言：呈现 '<' 而不是 '<'

> ID：10409473
> 
> 赞同：0
> 
> 时间：2012-05-02T07:29:14.600
> 
> 标签：c#, regex, asp.net-mvc-3, validation

以下属性：

```
[RegularExpression(@"(?<!Unknown).*", ErrorMessage = "value cannot be Unknown")] 
```

呈现为以下html：

```
<select name="ChannelName" id="ChannelName" data-val-regex-pattern="(?&lt;!Unknown).*" data-val-regex="value cannot be Unknown" data-val="true"> 
```

这显然不是我想要的。有没有办法编写 RegularExpressionAttribute 的 Pattern 属性，以便正确呈现它？一旦我成功地用@Html.Raw() 解决了非常相似的问题，但那是在客户端。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T08:01:08.937

为什么不是你想要的。< 是一个转义序列，当某人（验证框架）读取他们将看到的属性值时 <

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T11:47:07.757

我认为你的正则表达式是错误的。`(?<!Unknown).*`如果文本中有任何位置前面没有“未知”，则将成功。我认为您正在寻找以下表达式：

```
^(?!Unknown) 
```

^ 表示字符串的开头。

然后 (?!Unknown) 以防止任何以 Unknown 开头的字符串。

# asp.net-mvc-2 - 如何在 ASP.NET MVC 中使用用户定义的 DLL

> ID：10409475
> 
> 赞同：1
> 
> 时间：2012-05-02T07:29:24.750
> 
> 标签：asp.net-mvc-2

如何在另一个 ASP.MVC 应用程序中使用用户定义的 ASP.NET MVC 应用程序 DLL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T07:55:51.483

您可以添加任何有效的 .NET 程序集作为对项目的引用。默认情况下，ASP.NET MVC 使用 ASP.NET Web 应用程序模型（与网站相反），因此它被编译成程序集。因此，您可以将生成的程序集（从`bin`文件夹中）引用到新的 ASP.NET MVC 应用程序中。完成此操作后，您将能够访问此程序集中定义的公共类型。

但请记住，这通常是一个坏主意。如果您想在多个 ASP.NET MVC 应用程序之间共享一些通用功能，我建议您将此功能外部化到一个单独的类库中，然后将此库引用到每个 Web 应用程序中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-10T23:43:20.870

如果你有一个 DLL，你可以将它添加到 bin 目录中（你可能需要通过文件系统 - 在 Visual Studio 项目之外）。

将其添加到 Bin 目录后，您可以添加对它的引用（References 目录）。一旦你这样做了，你应该可以完全访问它的方法等）。

# android - 如何使用多点触控画圆

> ID：10409476
> 
> 赞同：1
> 
> 时间：2012-05-02T07:29:29.537
> 
> 标签：android, draw, multi-touch, geometry

我搜索了多点触控，我得到了很多相关的例子

pic 放大 & 缩小 &

获得多个触摸坐标，但

我想使用多点触控在视图上画一个圆圈..我试过这个但是当我画它时，坐标改变了圆圈没有画在我触摸屏幕的确切位置..

这是代码....

```
public class TestMultiTouchActivity extends Activity {
public class MultiTouchView extends View {

    // In this test, handle maximum of 2 pointer
    final int MAX_POINT_CNT = 2;

    private Paint paint = new Paint(Paint.ANTI_ALIAS_FLAG);
    float[] x = new float[MAX_POINT_CNT];
    float[] y = new float[MAX_POINT_CNT];
    boolean[] isTouch = new boolean[MAX_POINT_CNT];

    public MultiTouchView(Context context) {
        super(context);
        // TODO Auto-generated constructor stub
    }

    @Override
    protected void onDraw(Canvas canvas) {
        // TODO Auto-generated method stub
        if (isTouch[0]) {
            paint.setStyle(Paint.Style.STROKE);
            paint.setStrokeWidth(1);
            paint.setColor(Color.RED);
            // canvas.drawCircle(x[0], y[0], 50f, paint);
        }
        if (isTouch[1]) {
            paint.setStyle(Paint.Style.STROKE);
            paint.setStrokeWidth(1);
            paint.setColor(Color.BLUE);
            // canvas.drawCircle(x[1], y[1], 50f, paint);
        }
        float x1 = (Math.abs((x[0] - x[1]))) / 2;
        float y1 = (Math.abs((y[0] - y[1]))) / 2;

        float r = Math.abs(x1 - x[0]);
        canvas.drawCircle(x1, y1, r, paint);

    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        // TODO Auto-generated method stub
        setMeasuredDimension(MeasureSpec.getSize(widthMeasureSpec),
                MeasureSpec.getSize(heightMeasureSpec));
    }

    @Override
    public boolean onTouchEvent(MotionEvent motionEvent) {
        // TODO Auto-generated method stub

        int pointerIndex = ((motionEvent.getAction() & MotionEvent.ACTION_POINTER_ID_MASK) >> MotionEvent.ACTION_POINTER_ID_SHIFT);
        int pointerId = motionEvent.getPointerId(pointerIndex);
        int action = (motionEvent.getAction() & MotionEvent.ACTION_MASK);
        int pointCnt = motionEvent.getPointerCount();

        if (pointCnt <= MAX_POINT_CNT) {
            if (pointerIndex <= MAX_POINT_CNT - 1) {

                for (int i = 0; i < pointCnt; i++) {
                    int id = motionEvent.getPointerId(i);
                    x[id] = (int) motionEvent.getX(i);
                    y[id] = (int) motionEvent.getY(i);
                }

                switch (action) {
                case MotionEvent.ACTION_DOWN:
                    isTouch[pointerId] = true;
                    break;
                case MotionEvent.ACTION_POINTER_DOWN:
                    isTouch[pointerId] = true;
                    break;
                case MotionEvent.ACTION_MOVE:
                    isTouch[pointerId] = true;
                    break;
                case MotionEvent.ACTION_UP:
                    isTouch[pointerId] = false;
                    break;
                case MotionEvent.ACTION_POINTER_UP:
                    isTouch[pointerId] = false;
                    break;
                case MotionEvent.ACTION_CANCEL:
                    isTouch[pointerId] = false;
                    break;
                default:
                    isTouch[pointerId] = false;
                }
            }
        }

        invalidate();
        return true;
    }
}

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(new MultiTouchView(this));
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T07:37:55.613

试试这个来计算圆的大小/位置：

```
// Calculate average x and y.
float x1 = (x[0] + x[1]) / 2.0f;
float y1 = (y[0] + y[1]) / 2.0f;

// Calculate the distance between the points
float r = Math.sqrt(Math.pow(x[1] - x[0], 2.0f) + Math.pow(y[1] - y[0], 2.0f) / 2.0f;

canvas.drawCircle(x1, y1, r, paint); 
```

# html - ASP 变量不从其标签输出

> ID：10409478
> 
> 赞同：0
> 
> 时间：2012-05-02T07:29:40.020
> 
> 标签：html, asp-classic

我有这个代码..这是整个代码的一部分。

```
 <%
dim rsFav
sSQL = "(SELECT shorthand, display, larry_ranking, site_url FROM larrydb_site_list lsl JOIN larrydb_review lr on lsl.sid = lr.sid WHERE display=true AND niche='regular' ORDER BY larry_ranking DESC Limit 2) UNION (SELECT shorthand, display, larry_ranking, site_url FROM larrydb_site_list lsl JOIN larrydb_review lr on lsl.sid = lr.sid WHERE display=true AND niche='regular' AND shorthand='sexier')"
Set rsFav = objConn.Execute(sSQL)
While NOT rsFav.EOF
%>
        <tr><td>

                    <div style="background-image:url('images/<%=LCase(rsFav("shorthand"))%>_icon.png')" border="0" class="fav_site_icon">
                    <a href="http://livecamdeals.com/review.asp?sitename=<%=LCase(rsFav("shorthand"))%>"></a>
                    </div>
                    </td><td>
                    <a href='<%=LCase(rsFav("site_url"))%>' title="Visit <%=LCase(rsFav("shorthand"))%>.com" target="_blank" class="visit_site_icon <%=LCase(rsFav("shorthand"))%> special_<%=LCase(rsFav("shorthand"))%>"></a>
                    </td>
                    </tr></td>
<%
rsFav.MoveNext
wEnd
%> 
```

一切正常..除了这条线..

\ 我将站点名称设为空：

这是为什么？我对asp一无所知..我知道php和asp.net .only

更新：这就是我得到的：

HTML 输出。一个链接的例子：

```
<div style="background-image:url('images/.png')" border="0" class="fav_site_icon">

                </div> 
```

注意，上面..为图像打印了简写..但不是为链接..似乎是一个html问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T08:46:31.087

将变量设置为 rsFav("shorthand")) 返回的值，并在整个代码中引用它。

```
Dim shortHandId
While NOT rsFav.EOF 
shortHandId = rsFav("shorthand")
%>         
<tr><td>                      
<div style="background-image:url('images/<%=LCase(shortHandId)%>_icon.png')" border="0" class="fav_site_icon">                     
<a href="http://livecamdeals.com/review.asp?sitename=<%=LCase(shortHandId)%>"></a>                     
</div>                     
</td>
<td>                     
<a href='<%=LCase(rsFav("site_url"))%>' title="Visit <%=LCase(shortHandId)%>.com" target="_blank" class="visit_site_icon <%=LCase(shortHandId)%> special_<%=LCase(shortHandId)%>"></a>                     
</td>                     
</tr> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T07:39:00.183

尝试改变

```
<a href="http://example.com/review.asp?sitename=<%=LCase(rsFav("shorthand"))%>"> 
```

进入

```
<a href='http://example.com/review.asp?sitename=<%=LCase(rsFav("shorthand"))%>'> 
```

让您`href`使用单引号。

# c++ - 超快的在线 C++ 评估器

> ID：10409479
> 
> 赞同：0
> 
> 时间：2012-05-02T07:29:48.207
> 
> 标签：c++, compiler-construction

我的代码需要超过 1 小时才能在我的 core 2 duo 2Ghz 笔记本电脑上运行。它是一个具有大输入值的遗传算法 c++ 代码。Codepad 和 Ideone 都显示“超时”。关于一些超快速编译器的任何想法。如果它只是运行我在编译后上传的可执行文件就可以了。

编辑：从标题中删除单词编译器

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T07:34:58.293

您最好的选择可能是在[EC2](http://en.wikipedia.org/wiki/Amazon_EC2)、[Rackspace](http://en.wikipedia.org/wiki/Rackspace_Cloud)或其他[服务器提供商](http://www.networkredux.com/solutions/evs)上花一些时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T08:08:35.300

另一种选择是研究构建服务器和持续集成系统。它们可以配置为在您推送/提交时轮询您的修订控制、构建和测试。您可以简单地将一个或多个配置良好的桌面系统变成您的构建和测试主力——您的工具链可能支持某种分布式编译。然后您可以将它们配置为在出现问题时通过电子邮件唠叨您。如果这是您持续的工作量，它肯定会胜过同时运行您的编辑器的双核笔记本电脑。

[http://en.wikipedia.org/wiki/Continuous_integration](http://en.wikipedia.org/wiki/Continuous_integration)

# php - PHP表格元素未正确填写

> ID：10409491
> 
> 赞同：0
> 
> 时间：2012-05-02T07:30:45.573
> 
> 标签：php, html-table

我在 PHP 中有这张表：

```
 echo "<table style='border-style:none;'>";
 echo "<tr>";
if (!$goon) {
    echo "<td colspan=2 style='border-style:none; text-align:center;'>You have ".$_GET['Tries']." tries to guess my word.</td>";
    echo "</tr><tr>";
    echo "<td colspan=2 style='border-style:none; text-align:center;'>";
    echo "<select id='bet' size='1' style='width:150px;'>";
    echo "<option value='0'>Bet";
    for ($i=0; $i<=5000; $i+=100) {
       echo "<option value='".$i."'";
       if ($i == $_GET['Bet'] && $_GET['Bet'] != 0) {
          echo " selected='selected'";
       }
       echo ">".$i."</option>";
   }
   echo "</select>";
   echo "</td>";
   echo "</tr><tr>";
   echo "<td id='letters' colspan=2 style='border-style:none; color:white; text-align:center; font-size:14px;'>Letters guessed - ".$_GET['Letters']."</td>";
   echo "</tr><tr>";
   echo "<td colspan=2 style='border-style:none; text-align:center;'>";
   echo "<table style='border-style:none;'>";
   echo "<tr>";
   $l = count($ans);
   for ($i=0; $i<$l; $i++) {
      echo "<td style='border-style:none;'><input style='width:30px;' id='w".$i."' type='text' value='".$ans[$i]."' /></td>";
   }
   echo "</tr>";
   echo "</table></td>";
   echo "</tr><tr>";
  ?>
  <td colspan=2 style='border-style:none; text-align:center;'><input type='button' value='Guess' onClick='hangman("<?php echo $_GET['Word']; ?>",<?php echo $_GET['Tries']; ?>);' /></td>
  <?php
  echo "</tr><tr>";
  }
  echo "<td colspan=2 style='border-style:none; color:white; text-align:center; font-size:14px;'>".$msg."</td>";
  echo "</tr>";
  echo "</table>"; 
```

而数组`$ans`的值是 c,o,m,e,t。当表格显示时，TD 不应该用彗星填充吗？由于某种原因，它们是空白的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T07:34:00.627

您的行中缺少 '。改变

```
echo "<td style='border-style:none;'><input style='width:30px;' id='w".$i."' type='text value='".$ans[$i]."' /></td>"; 
```

和

```
echo "<td style='border-style:none;'><input style='width:30px;' id='w".$i."' type='text' value='".$ans[$i]."' /></td>"; 
```

应该没问题

这是一个常见错误，您可以使用更简单的校对方法。我更喜欢这样的东西：

```
for ($i=0, $limit=count($ans); $i<$limit; $i++) {
  printf ('<td style="border-style:none;"><input style="width:30px;" id="w%s" type="text" value="%s"/></td>', $i, $ans[$i]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T07:39:44.560

```
echo "<td style='border-style:none;'><input style='width:30px;' id='w".$i."' type='text' value='".$ans[$i]."' /></td>"; 
```

用。。。来代替

```
 echo "<td style='border-style:none;'><input style='width:30px;' id=w".$i."type=text value=".$ans[$i]." /></td>"; 
```

# solr - 为 solr 设计过滤器

> ID：10409493
> 
> 赞同：1
> 
> 时间：2012-05-02T07:30:53.023
> 
> 标签：solr, filter

任何人都可以建议我为 solr 设计特殊过滤器的参考指南吗？我将根据阿拉伯语的特殊算法设计过滤器，以便我的过滤器应该支持 unicode。提前致谢。最好的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T13:06:56.583

您可能应该找到一个[TokenFilter](http://lucene.apache.org/core/old_versioned_docs/versions/3_5_0/api/all/org/apache/lucene/analysis/TokenFilter.html)，它做的事情看起来像您正在尝试做的事情（但例如使用不同的语言）并在[Grepcode](http://grepcode.com/file/repo1.maven.org/maven2/org.apache.lucene/lucene-core/3.5.0/org/apache/lucene/analysis/TokenFilter.java#TokenFilter)上找到它的代码以了解它是如何工作的。

# iphone - 切换到视频模式的事件调用 - iPhone Objective-C

> ID：10409496
> 
> 赞同：0
> 
> 时间：2012-05-02T07:31:07.113
> 
> 标签：iphone, objective-c, cllocationmanager

好的，所以我需要在用户开始录制视频时开始一个事件。我想会有一个开始录制或切换到视频模式的事件，但我似乎无法在任何地方找到它。

有谁知道如何捕捉该事件？

**我想做的事：** 我有一个基于位置的应用程序，我想在用户开始拍摄时开始一个包含多个位置的轨道。这稍后将存储在 sqlite3 数据库中。

所以我想抓住“开始拍摄”或“切换到视频模式”事件。有谁知道如何处理这个？也欢迎任何更好的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T08:11:47.790

您的应用程序是否从`UIImagePickerController`课堂上实现了视频视图布局？

我假设您已经制作了一些组件，例如`UIButton`使用方法触发捕获视频

`- (BOOL)startVideoCapture`

但是您必须根据您的目的调用您喜欢的方法，例如`start a track that contains several locations`

您还可以[在此处](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIImagePickerController_Class/UIImagePickerController/UIImagePickerController.html)查看 Apple 的文档。有很多有趣的委托实现，比如

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info;
- (void)imagePickerControllerDidCancel:(UIImagePickerController *)picker; 
```

希望对你有帮助！

# java - 我的 JobFlow（JobFlow 由 Hive 和 JDBC 组成）在 Amazon EMR 上的执行性能

> ID：10409498
> 
> 赞同：0
> 
> 时间：2012-05-02T07:31:07.533
> 
> 标签：java, jdbc, hive, amazon-emr

在阅读了各种链接和一些博客之后，我已经在 Amazon Elastic Map Reduce 上设置了我的工作。现在我正在运行我的 java 代码，它在 Hive 和 JDBC 中有任务。

我已经在本地机器（单集群）上测试了我的程序。它执行良好，没有错误。但要提高执行速度。现在我开始在 Amazon EMR 上运行该程序，但与单集群机器相比，我的执行速度太慢了。我正在使用 2 个中型实例运行我的程序。

为什么会这样？请让我知道这件事。

谢谢。

# c# - 如何从后面的代码中设置应用程序栏的不透明度

> ID：10409499
> 
> 赞同：2
> 
> 时间：2012-05-02T07:31:20.820
> 
> 标签：c#, windows-phone-7, xaml

我一直在尝试根据用户可以随意控制的滑块在后面的代码中在我的 MainPage 上设置应用程序栏。我的应用程序栏中有很多信息，所以我在 xaml 中创建了它，除了不透明度应该根据滑块的值而改变。我不确定如何从代码隐藏中访问 MainPage 应用程序栏不透明度？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T07:47:56.017

尝试这个：

```
 ApplicationBar = new ApplicationBar();
 ApplicationBar.Opacity=0.5;
 ApplicationBar.IsMenuEnabled = true;
 ApplicationBarIconButton button1 = new ApplicationBarIconButton(new Uri("/Images/appbar.feature.search.rest.png", UriKind.Relative));
 button1.Text = "Search";
 ApplicationBar.Buttons.Add(button1);
 ApplicationBarMenuItem menuItem1 = new ApplicationBarMenuItem("MenuItem 1");
 ApplicationBar.MenuItems.Add(menuItem1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T19:36:38.280

要更改当前存在的 ApplicationBar 的不透明度值，请使用以下命令

```
(ApplicationBar as ApplicationBar).Opacity = num; 
```

其中 num 是您偏好的不透明度！

# java - 半透明JFrame边框

> ID：10409500
> 
> 赞同：4
> 
> 时间：2012-05-02T07:31:35.377
> 
> 标签：java, swing, user-interface, border, translucency

我想让 JFrame 边框透明，所以我正在尝试使用我自己的 Border 类来做到这一点......

```
private class ShadowBorder extends AbstractBorder {

    private static final int RADIUS = 30;

    @Override
    public boolean isBorderOpaque() {
        return false;
    }

    @Override
    public Insets getBorderInsets(Component c) {
        return new Insets(RADIUS, RADIUS, RADIUS, RADIUS);
    }

    @Override
    public Insets getBorderInsets(Component c, Insets insets) {
        insets.top = RADIUS;
        insets.left = RADIUS;
        insets.bottom = RADIUS;
        insets.right = RADIUS;
        return insets;
    }

    @Override
    public void paintBorder(Component c, Graphics g, int x, int y, int width, int height) {
            Graphics2D g2d = (Graphics2D) g.create();
            g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING,
                                 RenderingHints.VALUE_ANTIALIAS_ON);
            g2d.setColor(new Color(0x66000000, true));

            g2d.fillRect(0, 0, width - RADIUS, RADIUS);
        }
} 
```

但最终边框不透明。边框内也有白色背景，但我不知道为什么（见附件。图片）。有任何想法吗？

![在此处输入图像描述](../Images/62c45a1776fe18ffc1d5f58cdab6ac9e.png)

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T08:42:31.613

要使 JFrame 具有自定义透明边框，您必须首先更改框架的不透明度：

```
frame.setUndecorated ( true );
AWTUtilities.setWindowOpaque ( frame, false ); 
```

之后，您的框架将完全没有任何系统边框和背景，因此您可以绘制透明的东西（例如边框）。顺便说一句，您更改边框的组件以及组件下的容器必须是非透明的，以让框架后面的像素“通过”。

在某些情况下，您还可以使整个框架半透明：

```
AWTUtilities.setWindowOpacity ( frame, 0.5f ); 
```

这将使其 50% 透明（甚至可以与系统窗口装饰一起使用）。

尽管这些功能仅在 Win 和 Mac OS 系统上得到适当支持。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-02T09:13:18.123

您需要将窗口设置为不透明并在图形上使用复合材料。此外，在您的代码中，您只打印一个边框，而不是其中的四个，这就是为什么您只看到一个边框被绘制。像这样的东西应该这样做（虽然最好根据插图绘制边框，而不是你的 RADIUS 常数）：

```
import java.awt.AlphaComposite;
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Component;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Insets;
import java.awt.RenderingHints;
import java.io.UnsupportedEncodingException;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.border.AbstractBorder;

import com.sun.awt.AWTUtilities;

public class Main {

    private static class ShadowBorder extends AbstractBorder {

        private static final int RADIUS = 30;

        @Override
        public boolean isBorderOpaque() {
            return false;
        }

        @Override
        public Insets getBorderInsets(Component c) {
            return new Insets(RADIUS, RADIUS, RADIUS, RADIUS);
        }

        @Override
        public Insets getBorderInsets(Component c, Insets insets) {
            insets.top = RADIUS;
            insets.left = RADIUS;
            insets.bottom = RADIUS;
            insets.right = RADIUS;
            return insets;
        }

        @Override
        public void paintBorder(Component c, Graphics g, int x, int y, int width, int height) {
            Graphics2D g2d = (Graphics2D) g.create();
            g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
            g2d.setColor(new Color(66, 0, 0));
            g2d.setComposite(AlphaComposite.getInstance(AlphaComposite.DST_ATOP, 0.5f));
            g2d.fillRect(0, 0, width - RADIUS, RADIUS);
            g2d.fillRect(width - RADIUS, 0, RADIUS, height - RADIUS);
            g2d.fillRect(0, RADIUS, RADIUS, height - RADIUS);
            g2d.fillRect(RADIUS, height - RADIUS, width - RADIUS, RADIUS);
        }
    }

    public static void main(String[] args) throws UnsupportedEncodingException {
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setUndecorated(true);
        AWTUtilities.setWindowOpaque(frame, false);
        JPanel panel = new JPanel(new BorderLayout());
        JButton button = new JButton("Hello");
        panel.add(button);
        panel.setBorder(new ShadowBorder());
        frame.setContentPane(panel);
        frame.setSize(300, 200);
        frame.setVisible(true);
    }
} 
```

# jquery - 如何在 Wordpress 中始终在页面顶部加载 jQuery

> ID：10409505
> 
> 赞同：1
> 
> 时间：2012-05-02T07:32:21.317
> 
> 标签：jquery, wordpress

我在我的插件中使用 wordpress mediaupload 功能。

```
Error: jQuery is not defined
Source File: http://localhost/my_wp/wp-admin/load-scripts.php?c=0&load=utils,thickbox,media-upload&ver=4ec4a484079ac4122099967c5457437d
Line: 19 
```

这是我的插件加载时的错误消息。当我看到代码时，媒体上传脚本首先加载，然后 jquery 正在加载。这是我的代码

```
add_action( 'admin_enqueue_scripts', 'wpvote_include_files' );
function wpvote_include_files() {
    wp_deregister_script( 'jquery' );
    wp_register_script( 'jquery', 'https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js' );
    wp_enqueue_script( 'jquery' );

 wp_enqueue_script('media-upload');
    wp_enqueue_script('thickbox');
    wp_register_script('my-upload', WPVOTE_PLUGIN_URL.'wpmediaupload_scripts.js', array('jquery','media-upload','thickbox'));
    wp_enqueue_script('my-upload');

} 
```

这是我的页面源代码

```
<script type='text/javascript' src='http://localhost/my_wp/wp-admin/load-scripts.php?c=0&amp;load=utils,thickbox,media-upload&amp;ver=4ec4a484079ac4122099967c5457437d'></script>
<script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js?ver=3.3.2'></script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T23:09:21.467

A posible problem is that you are trying to enqueue a script in the admin area. Why don't you try using the **admin_enqueue_scripts** method?

```
add_action( 'admin_enqueue_scripts', 'function_name' ); 
```

Reference: [http://codex.wordpress.org/Plugin_API/Action_Reference/admin_enqueue_scripts](http://codex.wordpress.org/Plugin_API/Action_Reference/admin_enqueue_scripts)

# c# - 没有使用ajax调用重定向到登录页面

> ID：10409506
> 
> 赞同：0
> 
> 时间：2012-05-02T07:32:22.173
> 
> 标签：c#, asp.net, .net, asp.net-mvc

我有一个asp.net mvc 站点的问题。似乎“注销”部分无法正常工作。我可以登录，没问题，但是当我注销时，我的代码会引发错误，而不是重定向到登录页面。我使用 VisualStudio 中的“起始页”。

我的 web.config：

```
<authentication mode="Forms">
  <forms
      name="MyCookie"
      loginUrl="~/Account/LogOn"
      protection="All"
      slidingExpiration="false"
      path="/"
      timeout="1"/>
</authentication> 
```

登录功能：

```
 [HttpPost]
    public ActionResult LogOn(LogOnModel model, string returnUrl)
    {
        if (ModelState.IsValid)
        {
            if (Membership.ValidateUser(model.UserName, model.Password))
            {
                FormsAuthentication.SetAuthCookie(model.UserName, model.RememberMe);
                if (Url.IsLocalUrl(returnUrl) && returnUrl.Length > 1 && returnUrl.StartsWith("/")
                    && !returnUrl.StartsWith("//") && !returnUrl.StartsWith("/\\"))
                {
                    return Redirect(returnUrl);
                }
                else
                {
                    return RedirectToAction("Index", "Home");
                }
            }
            else
            {
                ModelState.AddModelError("", "The user name or password provided is incorrect.");
            }
        }

        // If we got this far, something failed, redisplay form
        return View(model);
    } 
```

我每三秒就有一个循环。使用 ajax 调用一个函数，当我注销时（在 web.config 中配置的 1 分钟后）我得到一个错误而不是登录页面。

用ajax调用的函数

```
 [ActionName("StudentHelp")]
    [Authorize]
    [OutputCache(Duration = 3, VaryByParam = "none")]
    public ActionResult StudentHelp()
    {
        var teacher = Membership.GetUser();

        using(var db = new DbEntities())
        {
            var studentUserIds = (from p in db.Help
                                    where p.TeacherId == (Guid) teacher.ProviderUserKey
                                    && p.IsHelped == false
                                    select p).ToList();

            IList<StudentModel> students = studentUserIds.Select(studentUserId => new StudentModel(studentUserId.StudentId)).ToList();

            return PartialView("_StudentHelp", students);
        }
    } 
```

有什么线索吗？

谢谢/迈克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T07:46:20.583

您收到错误而不是登录页面的原因是因为您没有`StudentHelp`使用属性修饰您的操作，这[`[Authorize]`](http://msdn.microsoft.com/en-us/library/system.web.mvc.authorizeattribute.aspx)意味着未经身份验证的用户可以调用此操作。除了在此操作中您试图获取当前登录的用户 ( `Membership.GetUser()`) 之外，当不再有登录用户时（因为他的身份验证 cookie 已过期），它将返回 null。然后在您使用的 LINQ 查询中，`teacher.ProviderUserKey`但由于`teacher`变量为 null，您会得到一个`NullReferenceException`.

* * *

更新：

由于一个[已知问题](http://www.asp.net/whitepapers/mvc3-release-notes#0.1__Toc274034230)，您可能需要将 follownig 键添加到您的 web.config：

```
<appSettings>
    <add key="loginUrl" value="~/Account/LogOn" />
<appSettings> 
```

发行说明还建议添加以下内容，但到目前为止，当我测试它时，这对我不起作用：

```
<add key="autoFormsAuthentication" value="false" /> 
```

# android - android在屏幕之间导航值

> ID：10409507
> 
> 赞同：0
> 
> 时间：2012-05-02T07:32:23.097
> 
> 标签：android

在我的应用程序中，我想在单击按钮（位于第一个屏幕中）时调用 Web 服务。在第一个屏幕中，我将输入一个输入。基于该输入值，Web 服务必须发挥作用。单击按钮后，我调用了一个新意图并调用了 Web 服务，但是我如何将值从 1 个屏幕传递到其他屏幕。

我的代码：

这是按钮点击（第一个屏幕）

```
public void onClick(View v)
            {
                 // TODO Auto-generated method stub     
//              EditText medit;
//              EditText medit=(EditText)findViewById(R.id.editText1);
                 Intent myIntent = new Intent(v.getContext(), dispaly.class);
                 startActivity(myIntent);

} 
```

这是网络服务（点击按钮后）

```
medit=(EditText)findViewById(R.id.editText1);
             super.onCreate(savedInstanceState);
             setContentView(R.layout.main);  
             SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);

                String weight = medit.getText().toString();
                String fromUnit = "Grams";
                String toUnit = "Kilograms";

                PropertyInfo weightProp =new PropertyInfo();
                weightProp.setName("Weight");
                weightProp.setValue(weight);
//              weightProp.setValue(medit.toString());
                weightProp.setType(double.class);
                request.addProperty(weightProp);

                PropertyInfo fromProp =new PropertyInfo();
                fromProp.setName("FromUnit");
                fromProp.setValue(fromUnit);
                fromProp.setType(String.class);
                request.addProperty(fromProp);

                PropertyInfo toProp =new PropertyInfo();
                toProp.setName("ToUnit");
                toProp.setValue(toUnit);
                toProp.setType(String.class);
                request.addProperty(toProp);

                SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
                envelope.dotNet = true;
                envelope.setOutputSoapObject(request);
                HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);  
                try
                {
                    androidHttpTransport.call(SOAP_ACTION, envelope);
                    SoapPrimitive response = (SoapPrimitive)envelope.getResponse();
                    Log.i("myApp", response.toString());  
                    TextView tv = new TextView(this);
                    tv.setText(weight+" "+fromUnit+" equal "+response.toString()+ " "+toUnit);
                    setContentView(tv); 

                }
                catch (Exception e)
                {
                    e.printStackTrace();
                }
            }. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T07:39:49.080

您需要`putExtra`在调用意图中使用并在另一个屏幕中获取该意图。

例如，您可以这样调用。

```
 Intent myIntent = new Intent(this, PlayVideoActivity.class);
    myIntent.putExtra("KeyName", value);
    startActivity(myIntent); 
```

现在，当另一个活动来时，得到这样的价值。

```
 String value=getIntent().getStringExtra("Keyname"); 
```

这是使用示例，您可以使用 putExtra 支持的类型作为意图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-01T10:16:52.257

有两种方法可以做到这一点。您可以使用 putExtra 或共享首选项。
**SharedPreferences：**
**从共享首选项编辑数据**
SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(this);
SharedPreferences.Editor 编辑器 = preferences.edit();
editor.putString("名称","测试");
editor.commit();

**从共享首选项中检索数据**

```
 SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(this);    
  String name = preferences.getString("Name","");    
  if(!name.equalsIgnoreCase(""))  
  {   
      name = name+"  Sethi";  /* Edit the value here*/  
  } 
```

或者

```
**putExtra:**

**pass data using putExtra at the time of calling intent.**

Intent myIntent = new Intent(this, PlayVideoActivity.class);
myIntent.putExtra("KeyName", value);
startActivity(myIntent);

**Retrive data  from other activity**

String value=getIntent().getStringExtra("Keyname"); 
```

# c# - 使用 Webdriver PageFactory 从不为字段分配警告

> ID：10409510
> 
> 赞同：2
> 
> 时间：2012-05-02T07:32:33.317
> 
> 标签：c#, reflection, webdriver

我在 Visual Studio 2010 中收到警告消息：“从未分配字段”。我使用在运行时分配字段的 Webdriver PageFactory，我怎样才能抑制此消息？

这是代码示例：

```
public class VideoInfo
    {
        [FindsBy(How = How.ClassName, Using = "detailsTitle")] 
        private IWebElement _videoInfoDetailsTitle; //Here is got the warning message

        public VideoInfo(IWebDriver webDriver)
        {
            PageFactory.InitElements(webDriver, this); //Assigen the field
        }
     } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T07:34:27.417

由于编译器无法检测到一些巫毒术；你可以忽略警告。但是，最好显式地初始化该字段：

```
[FindsBy(How = How.ClassName, Using = "detailsTitle")]  
private IWebElement _videoInfoDetailsTitle = null; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-31T11:57:14.190

很简单，另一种方法是您可以将访问说明符更改为“public”以消除此警告

```
[FindsBy(How = How.ClassName, Using = "detailsTitle")]
public IWebElement _videoInfoDetailsTitle; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-09T08:09:01.243

只需使用属性而不是字段，警告只是关于字段，属性没有相应的警告，我不知道为什么，但这为我解决了问题。

[FindsBy(How = How.ClassName, Using = "detailsTitle")] public IWebElement _videoInfoDetailsTitle {get;set;}

# java - 从输入流中替换字符串段

> ID：10409511
> 
> 赞同：7
> 
> 时间：2012-05-02T07:32:36.923
> 
> 标签：java, inputstream

我正在尝试接收一个巨大的文本文件作为输入流，并希望将一个字符串段转换为另一个字符串。我很困惑如何做到这一点，如果我将整个输入流转换为我不想要的字符串，它会很好地工作，因为某些内容会丢失。任何人都可以请帮助如何做到这一点？例如，如果我有一个文件，其内容为“这是需要修改的测试字符串”。我想接受这个字符串作为输入流，并想将内容修改为“这是被修改的测试字符串”，（通过用 is 替换 'needs to be'）。

```
 public static void main(String[] args) {
        String string = "This is the test string which needs to be modified";
        InputStream inpstr = new ByteArrayInputStream(string.getBytes());
           //Code to do

    } 
```

在此我希望输出为：这是已修改的测试字符串

提前谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T07:50:15.087

如果要更改的文本总是适合一个逻辑行，正如我在评论中所说，我会使用简单的行阅读（如果适用）使用类似的东西：

```
public class InputReader {
    public static void main(String[] args) throws IOException
    {
        String string = "This is the test string which needs to be modified";
        InputStream inpstr = new ByteArrayInputStream(string.getBytes());

        BufferedReader rdr = new BufferedReader(new InputStreamReader(inpstr));
        String buf = null;
        while ((buf = rdr.readLine()) != null) {
            // Apply regex on buf

            // build output
        }
    }
} 
```

但是我一直喜欢使用继承，所以我会在某处定义它：

```
class MyReader extends BufferedReader {
    public MyReader(Reader in)
    {
        super(in);
    }

    @Override
    public String readLine() throws IOException {
        String lBuf = super.readLine();
        // Perform matching & subst on read string
        return lBuf;
    }
} 
```

并使用 MyReader 代替标准 BufferedReader 将替换隐藏在 readLine 方法中。

优点：替换逻辑在指定的 Reader 中，代码非常标准。缺点：它隐藏了调用者的替换逻辑（有时这也是一个专业，仍然取决于用例）

高温高压

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T07:41:16.943

可能是我理解错了，但我认为你应该建立一个堆栈机器。我的意思是您可以使用一个小的字符串堆栈来收集文本并检查替换条件。

如果刚刚收集的堆栈已经与您的条件不匹配，只需将堆栈刷新到输出并再次收集它。

如果您的堆栈与条件相似，请继续收集它。

如果您的堆栈与您的条件匹配，请进行修改并将修改后的堆栈刷新到输出。

# visual-c++ - FtpFindFirstFile 得到“。” 在某些 ftp 上，但在其他的实际文件上

> ID：10409512
> 
> 赞同：2
> 
> 时间：2012-05-02T07:32:40.163
> 
> 标签：visual-c++, ftplib

当我测试以下代码时，我发现“FtpFindFirstFile”中的“data.cFileName”是“。” 在某些 ftp 和其他 ftp 上，它是一个实际文件名。在第二种情况下，“InternetFindNextFile”以第二个文件开头。我只想知道为什么会发生这种情况？谢谢！

```
if(hConnect){
            cout<<"begin transfer……"<<endl;
            find=::FtpFindFirstFile(hConnect,ftpDir,&data,INTERNET_FLAG_RELOAD,0);
            cout<<"begin?-->"<<data.cFileName<<endl;
            while(::InternetFindNextFile(find,&data)){
                CString tempFtp=ftpDir;
                CString tempLocal=localDir;
                cout<<"file:"<<data.cFileName<<endl;
                //dirArray.SetSize(10);
                /*
                if(data.dwFileAttributes==FILE_ATTRIBUTE_DIRECTORY){
                    cout<<"filename:"<<data.cFileName<<";"<<endl;
                    if(CString(data.cFileName).Find("..")<0){
                        cout<<"folder:"<<data.cFileName<<";"<<endl;
                    }
                }else{
                    //this->checkMakePath(tempLocal);
                    tempFtp.Append(data.cFileName);
                    tempLocal.Append(data.cFileName);
                    cout<<"file:"<<tempLocal<<endl;
                    //::FtpGetFile(hConnect,tempFtp,tempLocal,false,FILE_ATTRIBUTE_NORMAL,FTP_TRANSFER_TYPE_BINARY,0);
                }*/
            }
        } 
```

# python - Google App Engine Python - 使用数据存储区

> ID：10409515
> 
> 赞同：-3
> 
> 时间：2012-05-02T07:32:41.673
> 
> 标签：python, google-app-engine

我 在 helloworld.py中手动输入了@ [https://developers.google.com/appengine/docs/python/gettingstarted/usingdatastore提到的代码](https://developers.google.com/appengine/docs/python/gettingstarted/usingdatastore)

我已经运行了 dev_appserver.py 服务器，并且访问 localhost:8080 没有显示任何内容。

如果我插入调试消息，如@ [http://pastebin.com/VtCMjrk8](http://pastebin.com/VtCMjrk8)

我看到下面的输出@ localhost:8080 **"Greeting(db.Model) Start main function() MainPage class guestbook_key function Status: 200 OK Content-Type: text/html; charset=utf-8 Cache-Control: no-cache Expires : 1990 年 1 月 1 日星期五 00:00:00 GMT 内容长度：12"**

我使用的是 32 位 Windows Vista Basic。

更新：我不敢相信。[如果我将https://developers.google.com/appengine/docs/python/gettingstarted/usingdatastore](https://developers.google.com/appengine/docs/python/gettingstarted/usingdatastore)中的代码复制粘贴到 helloworld.py 中，我确实会看到所需的输出。

可能是什么问题 ？

# 2)

此外， [https](https://developers.google.com/appengine/docs/python/gettingstarted/usingusers) ://developers.google.com/appengine/docs/python/gettingstarted/usingusers 输出@ localhost:8080 显示 hello + 而不是让我选择或输入用户名

可能是什么原因 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T14:38:30.460

您可能输入了错误的内容。使用调试器并单步执行代码以找出不工作的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T18:43:53.513

原始问题的答案是，为什么在剪切粘贴代码起作用时手动键入代码不起作用，类中的最后一条语句`MainPage`（如下所示）需要在 For 级别缩进（因此它将超出循环）。在 Python 中，缩进很重要！！

```
self.response.out.write("""  ....... 
```

# java - 使用 Java 通过 gmail 的 SMTP 服务器发送时出现问题

> ID：10409517
> 
> 赞同：3
> 
> 时间：2012-05-02T07:32:55.423
> 
> 标签：java, tomcat, gmail, jakarta-mail, mailing

我的一位客户将 Gmail 用于企业（Google Apps 的一部分），我必须重新配置我开发的网站，以便它与新凭据匹配。由于 TLS 错误，经过一番挣扎后，我设法使代码在 localhost 和我的测试服务器（都是 Apache Tomcat 5.5）上运行。一切都很顺利，直到我不得不将它移到他的服务器上（托管公司告诉我的另一个 Tomcat 5.5）。在客户端的服务器上，我收到以下错误：

```
javax.mail.SendFailedException: Sending failed;
  nested exception is:
    class javax.mail.MessagingException: Could not connect to SMTP host:         smtp.gmail.com, port: 465;
  nested exception is:
    java.io.IOException: Couldn't connect using "javax.net.ssl.SSLSocketFactory" socket factory to host, port: smtp.gmail.com, 465; Exception: java.lang.reflect.InvocationTargetException 
```

奇怪的是，在 localhost 和测试服务器上，端口 465 工作正常，来自托管的人说端口在他们的服务器上打开。

连接到邮件服务器的代码是：

```
private void initConfigParams() throws CMSGeneralException {
    try {
        props = System.getProperties();
        String smtpHost = Messages.getDBConfString("mail.smtp.host");
        String mailPort = Messages.getDBConfString("mail.smtp.port");
        String socketFallback = Messages.getDBConfString("mail.smtp.socketFactory.fallback");
        String enableTls = Messages.getDBConfString("mail.smtp.starttls.enable");
        String authSmtp = Messages.getDBConfString("mail.smtp.auth");
        String tlsRequired = Messages.getDBConfString("mail.smtp.stattls.required");
        String sktFactory = Messages.getDBConfString("mail.smtp.socketFactory.class"); 

     props.put("mail.smtp.starttls.enable", enableTls); 
     props.put("mail.smtp.host", smtpHost); 
     props.put("mail.smtp.auth", authSmtp); 
     props.put("mail.smtp.starttls.required", tlsRequired); 

    props.setProperty("mail.smtp.socketFactory.class", sktFactory); 
    props.setProperty("mail.smtp.socketFactory.fallback", socketFallback); 
    props.setProperty("mail.smtp.port", mailPort); 
    props.setProperty("mail.smtp.socketFactory.port", mailPort); 

        props.put("mail.transport.protocol", Messages.getDBConfString("mail.transport.protocol"));

        Authenticator auth = null;

        userName = Messages.getDBConfString("mail.username");
        userPassword = Messages.getDBConfString("mail.userpassword");

        if (!CMSUtils.isEmptyString(userName) && !CMSUtils.isEmptyString(userPassword)){
            /* props.put("mail.smtp.auth", "true"); */ 

            auth = new SMTPAuthenticator(userName, userPassword);
        }

        session = Session.getDefaultInstance(props, auth);
        session.setDebug(false);

        address = new InternetAddress[1];

        address[0] = new InternetAddress(recipients);

        mbText = new MimeBodyPart();
        mbText.setContent(text, "text/html");
        mp = new MimeMultipart();
        mp.addBodyPart(mbText);
    } catch (MessagingException e) {
        e.printStackTrace();
        throw new CMSGeneralException();
    }

} 
```

使用以下 .properties 文件

```
mail.smtp.starttls.enable=true
mail.smtp.host=smtp.gmail.com
mail.smtp.auth=true
mail.smtp.starttls.required=true
mail.smtp.socketFactory.class=javax.net.ssl.SSLSocketFactory
mail.smtp.socketFactory.fallback=false
mail.smtp.port=465
mail.transport.protocol=smtps
mail.username=website@example.com
mail.userpassword=password
mail.from=website@example.com
mail.to=mail@example.com 
```

我尝试了 GMail 的其他端口，587，但它在任何服务器上都不起作用。甚至端口 25 也不能解决问题。

那么，我做错了什么，我应该怎么做才能使邮寄工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T18:34:47.913

摆脱所有套接字工厂属性；如果您使用的是相当新的 JavaMail 版本，则不需要它们。[有关如何配置 JavaMail 以访问 Gmail 的](http://www.oracle.com/technetwork/java/javamail/faq/index.html#gmail)信息，请参阅JavaMail 常见问题解答。如果它仍然不起作用，您还可以在那里找到调试提示。

此外，将 Session.getDefaultInstance 更改为 Session.getInstance。

最后，如果您将“mail.transport.protocol”设置为“smtps”，则需要将其他属性设置为“mail.smtps. *”属性，而不是“mail.smtp.* ”属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T07:49:58.250

在您看来，`java.lang.reflect.InvocationTargetException`. 所以，我的意思是这不是网络问题。可能是您指定了一些错误的参数，JavaMail API 路由无法调用方法。可能您还应该指定 property `mail.smtp.ssl.socketFactory`。

这里有一些文档[http://javamail.kenai.com/nonav/javadocs/com/sun/mail/smtp/package-summary.html](http://javamail.kenai.com/nonav/javadocs/com/sun/mail/smtp/package-summary.html)。

# android - 在android中的单行上具有多个图像和文本的Listview？

> ID：10409518
> 
> 赞同：0
> 
> 时间：2012-05-02T07:33:06.157
> 
> 标签：android, listview, android-lazyadapter

嗨，我要制作一个待办事项列表，所以我需要的是分配我的任务并将其作为列表视图在这些列表视图中查看需要 3 个文本视图，这 3 个图像中的 3 个图像代表 3 个活动，如警报、日历依此类推，当我单击这些图像时，它会单独打开我尝试了惰性适配器，但它用于解析阶段我的应用程序中没有解析请帮助我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T08:13:13.343

到处都有很多关于创建自定义 ListView 项目的不同帖子。[这个](http://www.ezzylearning.com/tutorial.aspx?tid=1763429&q=customizing-android-listview-items-with-custom-arrayadapter)非常有帮助，并且与您想要做的类似。

在使用图像和 ListViews 时，实现图像延迟加载非常重要。我知道的最好的实现是[ferdovlasove 的 LazyAdapter](https://github.com/thest1/LazyList)。

请享用...

# windows-phone-7 - WP7：Windows Phone 7：有SIP按键的颜色/画笔资源吗？

> ID：10409521
> 
> 赞同：1
> 
> 时间：2012-05-02T07:33:09.683
> 
> 标签：windows-phone-7, resourcedictionary, systemcolors

我需要创建自己的软输入面板，因为没有一个输入范围符合我的要求。我可以将`PhoneChromeBrush`其用作面板背景的资源，但我无法找到按键颜色的任何资源。我说的是软键盘、软拨号盘等的按键。在浅色主题中它们是纯白色的，但在深色主题中则不是。

有我可以使用的资源吗？或者它只是一个半透明的白色覆盖？透明度的百分比是多少？它会覆盖`PhoneBackgroundBrush`还是`PhoneChromeBrush`？或者有人知道那种颜色的十六进制代码吗？`#3A3A3A`似乎很接近，但仍然是错误的。

感谢您的任何想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T16:01:13.703

好吧，感谢 KooKiz，他让我走上了正轨，我想回答我自己的问题。

这可能被认为是一个全面的工作，但它让我满意。

1.  似乎没有这种颜色的资源。

2.  甚至键的颜色在不同的 SIP 中似乎都具有相同的颜色，但实际上并非如此。键盘、拨号盘甚至日期/时间选择器都使用不同的颜色。

3.  由于我的软输入面板应与拨号盘匹配，因此颜色的 HEX 代码将是`#FF383838`深色*主题*和*浅色主题*`#FFFFFFFF`。

**   我使用`PhoneBackgroundBrush`半透明白色 ( ) 覆盖`#38FFFFFF`来获得我的颜色。通过这种方式，在*黑暗主题*`#FF000000`中，我将覆盖`#38FFFFFF`导致`#FF383838`; 在*浅色主题*中，它将覆盖`#FFFFFFFF`，`#38FFFFFF`结果将是`#FFFFFFFF`。因此，无论用户使用什么主题，这都会为我的键提供正确的颜色。* 

 *这里有一个例子：

```
<Grid Background="{StaticResource PhoneBackgroundBrush}" Margin="3" >
    <Grid Background="#38FFFFFF" Margin="0" >
        <TextBlock Text="1" Style="{StaticResource PhoneTextNormalStyle}" />
    </Grid>
</Grid> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T08:22:02.273

查看 C:\Program Files (x86)\Microsoft SDKs\Windows Phone\v7.1\Design 中的“ThemeResources.xaml”文件 这将显示每个默认画笔的 HEX 代码。

请务必检查子文件夹的 eahc 中的版本，以便您可以看到浅色和深色主题之间的区别。

作为参考，`PhoneChromeBrush`黑暗中的主题是`#FF1F1F1F`*

# google-docs-api - google docs api上传文件的最大数量是多少？

> ID：10409522
> 
> 赞同：1
> 
> 时间：2012-05-02T07:33:10.037
> 
> 标签：google-docs-api

我通过 java-cilent-api 创建了一个应用程序来上传和下载 Google Docs 中的文件。在 Doc 达到 5GB 之后，我尝试将 4GB zip 上传到 Google docs，它毫无例外地完成了它；但是，该文件没有出现在 Google docs 中？上传文件的最大值是多少？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T15:41:03.663

[可恢复上传请求](https://developers.google.com/google-apps/documents-list/#creating_and_uploading_documents_and_files)中的最大文件大小为 10GiB。对于简单请求（不使用可恢复），最大文件大小为 2MiB。

在上传请求（可恢复或简单）结束时，您应该从 API 中取回新插入的资源的元数据。元数据包括`alternate`指向文件网络版本的链接。尝试访问此 URL 并查看该文件是否存在。

# asp.net - 为什么我的防伪令牌上出现“禁用”属性？

> ID：10409523
> 
> 赞同：0
> 
> 时间：2012-05-02T07:33:10.680
> 
> 标签：asp.net, asp.net-mvc, csrf

我在 asp.net MVC 3 中有一个网站，我只是放了一些防伪令牌，但我不知道为什么，在我的一种形式（不是其他形式）中，我收到了这个异常：

```
A required anti-forgery token was not supplied or was invalid. 
```

看来，在我的 html 代码中，我有以下标记：

```
 <input name="__RequestVerificationToken" 
type="hidden" value="0Ll0Io/fX0dR5HXCAroCKTKCBqNn2tmwgcqgYGjln8WVdWOPF2VQEen4wd2UKso1lpIstniXWjdgEE6m0ADgfRhIP25K12Y/ll+PFaYzoQgFAqSfL4XqNYKMrzvAKqmuqXnh3lwBFCYcDXKxRshKVefYelNfWgdFMtf8Ru/dT4qzWw9vU4KQS8eliglpzN9jXu5fekpBOsQGzOhoFHI3Ow==" 
disabled="disabled"> 
```

为什么我会得到这个禁用的属性？

这是我的一些代码：

```
@using (Html.BeginForm("XXX", "YYY", FormMethod.Post))
{
@Html.AntiForgeryToken()
...
} 
```

和控制器：

```
[HttpPost]
[ValidateAntiForgeryToken]
public ActionResult XXX(SessionStore sessionStore, CurrentModel model) 
```

我在谷歌上找不到任何禁用的东西:/(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T07:38:55.580

这是生成隐藏字段的代码：

```
public HtmlString GetHtml(HttpContextBase httpContext, string salt, string domain, string path)
{
    string str = this.GetAntiForgeryTokenAndSetCookie(httpContext, salt, domain, path);
    string antiForgeryTokenName = AntiForgeryData.GetAntiForgeryTokenName(null);
    TagBuilder builder = new TagBuilder("input");
    builder.Attributes["type"] = "hidden";
    builder.Attributes["name"] = antiForgeryTokenName;
    builder.Attributes["value"] = str;
    return new HtmlString(builder.ToString(TagRenderMode.SelfClosing));
} 
```

如您所见，没有任何`disabled`属性的痕迹。

因此，您所描述的情况不会发生，除非：

1.  您正在使用一些自定义构建的帮助程序或自定义构建的 ASP.NET MVC
2.  您已使用 javascript 添加此属性

# php - 如果用户在 30 天内未在 php 中尝试登录，如何删除用户

> ID：10409529
> 
> 赞同：0
> 
> 时间：2012-05-02T07:34:01.707
> 
> 标签：php

我是 php 新手。如果他在 30 天内未尝试登录，我想自动删除用户。

```
for example
if user login on "10-02-2012" , 
and if user doesnot login for next 30 days
then system should automatically delete his account. 

if user again login on "15-02-2012" ,
then limit should be for next 30 days i-e "15-03-2012" 
```

请帮助我，我是 php 的新手

```
i have no idea how to store the date when user attempt to login. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T07:41:28.523

1.  在数据库中记录上次登录日期。
2.  编写一个脚本，搜索并删除上次登录时间超过 30 天的用户。
3.  使用 cron 作业启动搜索和删除脚本

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T07:46:15.737

1.  您希望在用户表中有一个日期字段，并在登录脚本运行时将该日期设置为 CURDATE() 的查询。就像是：

    UPDATE 'users' SET 'lastlogin' = CURDATE() WHERE 'userid' = '$userid';

2.  有一个每天运行一次的 crontab（或者你想要的任何频率），它查询所有 31 天前的字段并删除它们：

    从“用户”中删除“上次登录”< CURDATE() - 间隔 31 天

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T07:51:25.657

这里有一个关于构建登录系统的教程：
[http ://www.phpeasystep.com/phptu/6.html](http://www.phpeasystep.com/phptu/6.html)

您的解决方案将通过将名为“last_login”的 DATETIME 字段添加到 members 表来添加到教程中。每当有人登录时，您都会使用数据库查询更新 last_login 字段，例如：

```
UPDATE TABLE members SET last_login = CURRENT_TIME WHERE id = xxx LIMIT 1 
```

然后，您可以每天运行另一个数据库查询以删除非活动帐户，并根据需要自定义删除日期：

```
DELETE FROM TABLE members WHERE last_login < '2012-04-01 00:00:00' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-02T07:53:22.087

这很简单。

1.  在存储最近登录日期的数据库表中创建一个字段。
2.  编写一个脚本，每天晚上午夜运行，检查登录日期与当前日期。

这样做的好处是日期对象使您可以轻松地轻松比较日期。

这里有一些链接会有所帮助：

[http://php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)

[http://www.w3schools.com/sql/sql_dates.asp](http://www.w3schools.com/sql/sql_dates.asp)

祝你好运！这很简单，我已经做过很多次了，我相信你不会有太多麻烦。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-02T07:39:13.207

在存储用户帐户的数据库中，您可以使用内置的 MySQL 日期/时间数据类型之一存储他们上次登录的时间。在您的 PHP 中，您可以使用另一个 MySQL 命令将其更新为当前时间。此页面将帮助您入门：[http ://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)

至于删除用户，您需要设置一个 cron 作业/计划任务，通过检查日期并查看它是否是 30 天前来删除该用户。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-02T07:40:32.270

您可以为用户表添加两个字段

1.  `created`: 用户注册日期
2.  `login_date`：用户每次登录的日期更新。

您可以使用在选定时间自动运行的 cron 作业（运行其中设置了路径的 php 文件）。您可以每天在固定时间运行它。如果发现两者都`created`相同`login_date`，则从数据库中删除该用户。您可以从您的 cpanel 设置 cron 作业。

谢谢

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-02T07:49:25.550

每天设置一次 cron 作业并检查从过去 30 天到当前时间/日期未登录的人员您可以使用时间戳或日期进行上次登录

# android - 在关闭时为对话框片段设置动画

> ID：10409533
> 
> 赞同：4
> 
> 时间：2012-05-02T07:34:25.703
> 
> 标签：android, animation

我试图让一个对话框片段在关闭时进行动画处理 - 我试图覆盖如下的关闭、onDismiss、onCancel 和 onDestroy 方法，但没有运气 - 有人能指出我正确的方向吗？

```
@Override
public void dismiss() {
    if (mDismissAnimationFinished) {
        super.dismiss();
    } else {

        mShrink.setAnimationListener(new Animation.AnimationListener() {
            @Override
            public void onAnimationStart(Animation animation) {
            }

            @Override
            public void onAnimationEnd(Animation animation) {
                mDismissAnimationFinished = true;
                dismiss();
            }

            @Override
            public void onAnimationRepeat(Animation animation) {

            }
        });
        mCurrentContainer.startAnimation(mShrink);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T02:45:13.760

我只是用一个常规的对话子类做到了这一点，我的解决方案应该准确地转移到`DialogFragment`。

看起来您非常接近，只是您应该调用`super.dismiss()`onAnimationEnd() 而不是`dismiss()`. 原因是如果你调用`dismiss()`，它会递归调用你已经在里面的函数！

编辑：

在外部类中定义一个包装器方法或使用 YourDialogFragment.super() 调用它。

```
void parentDismiss() { super.dismiss() } 
```

并从您的`onAnimationEnd()`.

即使那样，当您取消对话框并且它被另一个线程解除时，您仍然会遇到竞争条件的另一个问题。要解决这个问题，`mIsDismissed`请在第一次调用 onDismiss() 时设置一个布尔值，这样如果在另一个`onStart()`发生之前再次调用它（您将覆盖 onStart() 以将布尔值翻转回来），则`onDismiss()`' 的主体不会执行两次。

我在这里写了一个解决方案，它不使用`DialogFragment`，只是一个常规对话框。它已经过测试并且可以工作，所以只要看看我使用的逻辑并复制它，或者如果你愿意，可以使用它。

[https://github.com/tom-dignan/nifty/blob/master/src/com/tomdignan/nifty/dialogs/NiftyProgressDialog.java](https://github.com/tom-dignan/nifty/blob/master/src/com/tomdignan/nifty/dialogs/NiftyProgressDialog.java)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-02T23:42:39.567

您可以通过调用类的超类来访问侦听器所在的外部类。像这样：`Classname.super.method()`

```
public void dismiss() {

    yourAnimation.setAnimationListener(new Animation.AnimationListener() {
        @Override
        public void onAnimationStart(Animation animation) {}

        @Override
        public void onAnimationEnd(Animation animation) {
            classNameOfYourDialog.super.dismiss();
        }

        @Override
        public void onAnimationRepeat(Animation animation) {}
    });
} 
```

# joomla - 如何将文件夹/文件安装到 Joomla 组件的图像目录？

> ID：10409535
> 
> 赞同：0
> 
> 时间：2012-05-02T07:34:27.980
> 
> 标签：joomla, joomla-extensions, joomla1.7, joomla1.6, joomla2.5

我知道如何将系统图像添加到 /media 文件夹，但是有没有办法将文件夹和文件添加到 /images 文件夹（即媒体管理器希望找到文件的地方？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T14:10:42.233

看看 Joomla 组件创建器。[http://www.notwebdesign.com/joomla-component-creator/](http://www.notwebdesign.com/joomla-component-creator/)

您可以添加一个“媒体”类型的字段，该字段将显示整个媒体管理器，并允许您上传到它并将其插入到您正在编辑的项目中。

或者，您可以手动添加它。这是文档：

[http://docs.joomla.org/Media_form_field_type](http://docs.joomla.org/Media_form_field_type)

# c - 在 C 中只将一个基本字段封装到一个结构中有什么好处？

> ID：10409537
> 
> 赞同：1
> 
> 时间：2012-05-02T07:34:46.620
> 
> 标签：c, struct, typedef

我看到一些像这样的C代码：

```
// A:
typedef uint32_t in_addr_t;
struct in_addr { in_addr_t s_addr; }; 
```

我总是喜欢这样：

```
// B:
typedef uint32_t in_addr; 
```

所以我的问题是：在 A 和 B 中做这件事有什么区别/好处？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T07:36:56.783

这是一个引入类型安全的层，它有助于“未来的扩展”。

前者的一个问题是，很容易将 typedefed 内置函数表示的类型的值“转换”为其他几种类型或 typedefed 内置函数中的任何一种。

考虑：

```
typedef int t_millisecond;
typedef int t_second;
typedef int t_degrees; 
```

相对：

```
// field notation could vary greatly here:
struct t_millisecond { int ms; };
struct t_second { int s; };
struct t_degrees { int f; }; 
```

在某些情况下，使用符号会更清楚一些，编译器也会禁止错误的转换。考虑：

```
int a = millsecond * second - degree; 
```

这是一个可疑程序。使用 typedefed ints，这是一个有效的程序。使用结构，它的格式不正确——编译器错误需要您进行更正，您可以明确表达您的意图。

使用 typedef，可以应用任意算术和转换，并且它们可以在没有警告的情况下相互分配，这可能成为维护的负担。

还要考虑：

```
t_second s = millisecond; 
```

这也将是一个致命的转变。

它只是工具箱中的另一个工具——请自行决定使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T07:41:38.103

贾斯汀的回答基本上是正确的，但我认为需要进行一些扩展：
编辑：贾斯汀大大扩展了他的答案，这使得这个答案有些多余。

类型安全 - 您希望为您的用户提供操作数据的 API 函数，而不是让它仅仅将其视为整数。将字段隐藏在结构中使得以错误的方式使用它变得更加困难，并将用户推向正确的 API。

对于未来的扩展 - 也许未来的实施想要改变一些事情。也许添加一个字段，或者将现有字段分成 4 个字符。使用结构，无需更改 API 即可完成此操作。

*你*有什么好处？如果实现发生变化，您的代码不会中断。

# linux - 如何合并 Subversion 的两个签出分支（离线合并）？

> ID：10409538
> 
> 赞同：1
> 
> 时间：2012-05-02T07:34:48.667
> 
> 标签：linux, svn, version-control, merge, offline

我在 Linux 上使用带有**rabbit-vcs的 Subversion：**

*   在合并下，它仅显示在线浏览我的分支的选项`svn url`
*   没有选项可以将离线 svn 文件夹作为分支。

因为，我对 Subversion 很陌生，所以实际上可以在 svn 上离线合并 2 个分支吗？

我有两个分支已经签出：

*   `/home/user/branch1`
*   `/home/user/trunk`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T08:24:44.023

首先，[阅读这篇文章](http://svnbook.red-bean.com/en/1.7/svn.branchmerge.basicmerging.html)。更好的是，也[请阅读此内容](http://svnbook.red-bean.com/en/1.7/svn.branchmerge.advanced.html#svn.branchmerge.advanced.advancedsyntax)。可以说，理解合并是了解如何正确使用 SVN 的最重要部分（首先，在创建新分支之前你会思考数千次 :)）。

请注意，您将两个*提交的源*合并到一个工作副本中。也就是说，即使您将其中一个源指定为工作副本，它*仍会将其 URL*用于合并目的。所以这是一种客户端可能支持也可能不支持的语法糖。其原因是合并操作需要识别源的共同祖先并将它们逐个更改合并。该信息不存在于工作副本中。

请注意此处可能引起混淆的来源：在许多（大多数？）实例中，工作副本参数可能指定要合并*的*源和要合并**到**的工作副本）。

这是我的意思的一个例子：假设您将 S1 和 S2 合并到 W.S1 和 W 包含文件 F。S2 不包含。现在，至少有两种可能：(1) S1 和 S2 的共同祖先 S 包含该文件，并在 S2 中被删除。然后合并应该从 W 中删除它；(2) S不含F，在S1中加入。然后 F 应该保留在 W 中。关于 S 的信息根本不存在于本地，因此必须联系存储库。

要准确找出您的离线工作副本来自的分支 URL，请`svn info`在.`branch1``trunk`

# linux - Wget 文件并将其发送到 Bash

> ID：10409539
> 
> 赞同：13
> 
> 时间：2012-05-02T07:34:49.523
> 
> 标签：linux, bash, pipe, wget, pipeline

我想制作一个必须使用[Wget](https://en.wikipedia.org/wiki/Wget)并使用 Bash 运行其输出的 Bash 脚本，如下所示：

```
wget -q -O - http://pastebin.com/raw.php?i=VURksJnn | bash 
```

pastebin 文件是一个测试脚本，但是这个命令向我展示了：

“未知命令”（可能是由于换行）和“文件意外结束”，我不知道为什么。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-02T07:41:01.457

您的脚本有 DOS 行尾。

如果将行尾转换为 Unix 行尾，它运行良好：

```
$ tr -d '\r' < raw.php\?i\=VURksJnn > script
$ cat script | bash
Test script
You're not root
End test
$ 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-05-02T07:43:05.293

首先，将下载的**wget**文件保存在本地，然后以`bash filename`. 因为以下内容对我有用：

```
cat - | bash 
```

# c++ - 关于轴的 3D 旋转的说明。（简单编码）

> ID：10409543
> 
> 赞同：2
> 
> 时间：2012-05-02T07:35:05.650
> 
> 标签：c++, 3d, matrix, rotation

我正在为我的测试做准备，但我需要帮助来理解围绕轴的旋转。在一个问题中，我假设一个函数`drawHouse()`在 xy 平面上绘制一个线框房屋，如下图所示：

![改造前的房子](../Images/327a761db7fdc3ffe86e82ff1f5e12d7.png)

我们有多种选择的代码段，并询问哪一个会导致这个改造的房子：

![在此处输入图像描述](../Images/89c6697d7ca7da684f20d101f2be6164.png)

正确答案如下：但我不确定命令是从后到前还是从前到后执行：

```
glMatrixMode(GL_MODELVIEW); 
glLoadIdentity(); 
glScalef(2, 1, 1); 
glRotatef(90, 0, 0, 1); 
glRotatef(180, 1, 0, 0); 
drawHouse(); 
```

问题是我不知道在哪个轴上旋转的哪种方式，所以如果有人可以给我一个简短的总结，我将不胜感激。

[原始问题是 22 在这里，PDF](http://cs.auckland.ac.nz/courses/compsci373s1c/exams/CS373Test2011_SampleSolution.pdf)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T08:14:02.347

**编辑**此文本与接受的（不正确的）答案完全不同，但在接受后我无法删除我的答案。

转换以相反的顺序应用。

`x`第一次旋转（函数中的最后一次）通过围绕轴旋转将房屋倒置。

第二个将它围绕`z`轴旋转，使其指向正确。

最后的缩放函数沿`x`轴拉伸它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T08:23:34.020

大概您有有关`gl`函数和应用转换顺序的文档。如果您根据固定轴来查看转换，那么只有当转换以相反的顺序发生时，解决方案才有意义，即从`glRotatef(180, 1, 0, 0);`. 所以转换将是

1.  绕 X 轴旋转 180 度，使房子朝下
2.  围绕 Z 轴旋转 90 度，使房子像最终图像一样位于 X 轴上，没有拉伸
3.  沿 X 轴缩放 *2，将房子拉长

# c++ - 为什么在解析 main() 参数时获取地址值？

> ID：10409544
> 
> 赞同：3
> 
> 时间：2012-05-02T07:35:05.807
> 
> 标签：c++, command-line-arguments, main

我正在使用带有以下代码的 Visual C++：

```
int _tmain(int argc, _TCHAR* argv[])
{

    for (int i = 0; i < argc; ++i)
    {
        cout << argv[i] << endl;
    }

    getch();
    return 0;
} 
```

该程序名为`MyProgram.exe`.

然后我运行程序： MyProgram.exe hello world

该程序应该打印：

```
MyProgram.exe
hello 
world 
```

但它没有，它打印了 3 行地址值：

```
005D1170
005D118C
005D1198 
```

我做错什么了吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T07:39:40.667

你需要使用：

```
std::wcout<<argv[i]; 
```

我猜你已经在编译中启用了 Unicode，当你这样做时，`_TCHAR`它被定义为`wchar_t`，因此你使用该`std::wcout`版本来输出宽字符字符串。

如果您没有在构建选项中启用 Unicode，那么

```
std::cout<<argv[i]; 
```

会工作得很好，因为 then`_TCHAR`被定义为`char`并且有一个带参数的`<<`运算符的重载版本。`char`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T07:37:59.767

`argv[i]`是一个`_TCHAR`数组，并且`std::cout`没有's的重载`operator <<`。`_TCHAR`它只是打印出指针。A`_TCHAR`是宽字符的 MSVS 类型（如果您使用的是 unicode，那么您很可能是这样）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-02T07:39:56.267

我猜你正在用`_UNICODE`定义编译这个。这使得`_TCHAR`be `wchar_t`，一个广泛的字符。`std::cout`可以输出窄字符串（如 所指`char*`）。要输出宽字符串（如 所指`wchar_t*`），请使用`std::wcout`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-02T07:41:03.323

换行

```
cout << argv[i] << endl; 
```

到

```
wcout << argv[i] << endl; 
```

Unicode 字符串是两个字符宽，cout 无法处理。您需要 cout 的宽字符版本来打印 UNICODE 字符串。

# javascript - 保存拖放更改

> ID：10409545
> 
> 赞同：0
> 
> 时间：2012-05-02T07:35:19.933
> 
> 标签：javascript, ruby-on-rails

我有一个名为 Box 的模型，它具有 X 和 Y 属性。当我编辑 Room 模型（其中有多个框）时，我会在其坐标处显示所有框，用户可以拖动框，添加一些新框并删除一些现有框。

现在，当用户单击“保存”时，我想：

1.  更新 Boxes 表并保存相应框的新位置。
2.  将新添加的框保存到数据库中
3.  从数据库中删除已删除的框

我怎样才能完成这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T19:57:01.720

我已经使用在运行时完成并通过表单提交的隐藏字段解决了这个问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T09:58:30.593

考虑[http://jqueryui.com/demos/sortable/](http://jqueryui.com/demos/sortable/)

# ios - 如何从 UIViewController 中抽象出交互？

> ID：10409549
> 
> 赞同：2
> 
> 时间：2012-05-02T07:35:58.020
> 
> 标签：ios, uiviewcontroller

我需要帮助理解如何从`UIViewController`. 出于所有意图和目的，假设我有一个控制拼图的视图控制器。我有一系列拼图视图、拼图板视图（放置拼图的地方）以及其他一些杂项视图。现在我与这些拼图有典型的泛式交互。

我需要做的是将交互抽象出来，这样我就可以在单击按钮或调用方法时完全改变整个系统的“交互模式”，可以说是整个系统的“交互模式”，同时保持一切状态否则它在切换之前的确切位置。例如，在切换之后，他们不必用手指拖动棋子，而是必须“选择”一个棋子，然后利用陀螺仪的重力滑动它。

我对 iOS 还很陌生，实际上总体上几乎没有 OO 经验，所以在我破坏我的代码来解决这个问题之前，我真的想从更有经验的人那里得到一些建议。（是的，我会拍个快照，但我还是很紧张！）无论如何，我在想也许我应该做这样的事情：

*   有一个根视图控制器，它可以保留指向我的视图的强指针并处理所有与非交互相关的事情
*   在该根视图控制器中有一个指向交互控制器的指针，该控制器的工作是处理所有交互代码
*   交互控制器将在运行时通过委托从根视图控制器通过委托获取其视图，并将任何手势识别器等附加到 viewDidLoad 中的视图
*   交互控制器将在运行时关闭。可接受的交互控制器对象将来自我为此目的定义的某些 UIInteractionViewController 的子类。

我不知道这是否会

a) 实际工作

b) 做最好的方法

c) 足够快以在运行时真正工作

d) 可扩展（我可能需要许多不同的“模式”）。

事实上，我越看我写的东西，我就越开始怀疑它的意义。救命，求救。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T09:41:24.763

好问题。

在我看来，OO 是应用程序开发的关键点。许多应用程序开发人员根本没有太多的OO经验，这导致在SO上出现很多误解，烦躁，奇怪的问题和答案。首先是对Cocoas框架的基本架构以及如何使用它们缺乏了解，因为它们在很多方面都遵循继承和对象组合的思想，并利用了OO模式。这种缺乏会导致与框架的广泛斗争和/或（当学习第一个 OO 课程时）关于 OO 概念的完全过度设计。

对于您的问题：您似乎已经对基本的 OO 原则有了足够的了解，可以了解框架内部发生了什么。现在您应该注意保持简单。你的益智游戏听起来像一个典型的应用程序：你一个人或几个人一起工作，整个代码库会很小，它不是一个库，它的生命周期会很短，一旦完成，你将修复错误并拥有小改进，但不适应完整的新环境等等。所以我认为你不应该对问题中描述的问题大量使用 OO 模式（即使我猜所描述的解决方案会起作用）。

我会做这样的事情：

1.  让你的puzzel的视图控制器通过实现所有需要的东西来完成所有的事件处理，比如：

    `touchesBegan`, `touchesMoved`, `touchesEnded`,`accelerometer:didAccelerate:`

2.  给这个控制器一个模式并按下按钮打开它：

    `int controlMode; // in PuzzleController.h`

3.  在事件处理中打开控制模式，如下所示：

例子

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
  switch (controlMode)
  {
    case ControlModeDrag:
      touchedPiece = [self findPiece:event];
    case ControlModeGravity:
      //do nothing;
    case ControlModeSomethingElse:
      // whatever
    default: //...
  }
}

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
  switch (controlMode)
  {
    case ControlModeDrag:
      [self moveTouchedPiece:event];
    case ControlModeGravity:
      //do nothing;
    case ControlModeSomethingElse:
      // whatever
    default: //...
  }
}

-(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
  switch (controlMode)
  {
    case ControlModeDrag:
      touchedPiece = nil; 
    case ControlModeGravity:
      touchedPiece = [self findPiece:event]; 
    case ControlModeSomethingElse:
      // whatever
    default: //...
  }
}

- (void)accelerometer:(UIAccelerometer *)accelerometer didAccelerate:(UIAcceleration *)acceleration 
{
  switch (controlMode)
  {
    case ControlModeDrag:
      //do nothing 
    case ControlModeGravity:
      [self moveTouchedPiece:accelaration]; 
    case ControlModeSomethingElse:
      // whatever
    default: //...
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T09:39:00.473

通读这个..希望它会有所帮助。
[http://borkwarellc.wordpress.com/2010/07/22/qff-kitchen-mvc-part-1/](http://borkwarellc.wordpress.com/2010/07/22/qff-kitchen-mvc-part-1/)

# android - 制作自定义标签按钮

> ID：10409550
> 
> 赞同：5
> 
> 时间：2012-05-02T07:36:03.887
> 
> 标签：android, layout, tabs, tabwidget

如何让我的标签按钮看起来像![在此处输入图像描述](../Images/3ab27f0647fc89d04034c6e4d7d40b93.png)

如果我也有那种形状的可绘制对象，那么最简单的方法是什么？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T08:08:55.730

只需您可以像这样在您的应用程序中实现选项卡

在 onCreate 方法中

```
TabHost tabHost = getTabHost();
tabHost.setCurrentTabByTag("First");

TabSpec firstTab = tabHost.newTabSpec("First");  
firstTab.setIndicator("firstTab",getResources().getDrawable(R.drawable.ic_action_first)); //drawable 1
firstTab.setContent(R.id.first_content);    //View
tabHost.addTab(firstTab);

TabSpec secondTab = tabHost.newTabSpec("Second");
secondTab.setIndicator("secondTab",getResources().getDrawable(R.drawable.ic_action_second)); //drawable 2
secondTab.setContent(R.id.second_content);    //View
tabHost.addTab(secondTab);

TabSpec thirdTab = tabHost.newTabSpec("Third");
thirdTab.setIndicator("thirdTab",getResources().getDrawable(R.drawable.ic_action_third)); //drawable 3
thirdTab.setContent(R.id.third_content);    //View
tabHost.addTab(thirdTab);

tabHost.setCurrentTab(0); 
```

在 xml 文件中

```
<TabHost android:layout_width="fill_parent" android:layout_height="fill_parent" xmlns:android="http://schemas.android.com/apk/res/android" android:id="@android:id/tabhost">
    <LinearLayout android:layout_width="fill_parent" android:layout_height="wrap_content" android:orientation="vertical">
        <TabWidget android:id="@android:id/tabs" android:layout_width="fill_parent" android:layout_height="wrap_content" />
        <FrameLayout android:id="@android:id/tabcontent" android:layout_width="wrap_content" android:layout_height="wrap_content" >

            <LinearLayout android:id="@+id/first_content" android:layout_width="fill_parent" android:layout_height="fill_parent">
                <TextView android:text="first_tab"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />
            </LinearLayout>

            <LinearLayout android:id="@+id/second_content" android:layout_width="fill_parent" android:layout_height="fill_parent">
                <TextView android:text="second_tab"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />
            </LinearLayout>

            <LinearLayout android:id="@+id/third_content" android:layout_width="fill_parent" android:layout_height="fill_parent">
                <TextView android:text="third_tab"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />
            </LinearLayout>
        </FrameLayout>

    </LinearLayout>
    </TabHost> 
```

在 getResources().getDrawable(R.drawable.drawableid)) 调用你的drawable；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T08:05:39.220

您可以在活动中做的事情：

```
private TabHost mTabHost ;
@Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.my_layout);

        mTabHost = (TabHost) findViewById(android.R.id.tabhost);
        mTabHost.setup();
        // We create a webview for one tab for example
        WebView wv = new WebView(this);
        // add url and options on this webview
        setupTab(wv, "My Title");
}
private void setupTab(final View view, final String tag) {
        View tabview = createTabView(mTabHost.getContext(), tag);
        TabSpec setContent = mTabHost.newTabSpec(tag).setIndicator(tabview).setContent(new TabContentFactory() {
            public View createTabContent(String tag) {return view;}
        });

        mTabHost.addTab(setContent);
    }
// this is the method for customize tabs
    private static View createTabView(final Context context, final String text) {
        View view = LayoutInflater.from(context).inflate(R.layout.layout_tabwidget_custom, null);
        TextView tv = (TextView) view.findViewById(R.id.tabsText);
        tv.setText(text);
        return view;
    } 
```

在 R.layout.layout_tabwidget_custom ：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/tabsLayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/selector_tab_bg"
    android:gravity="center"
    android:orientation="vertical"
    android:padding="10dip" >

    <TextView
        android:id="@+id/tabsText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Title"
        android:textColor="@drawable/selector_tab_text"
        android:textSize="15dip" />

</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T08:15:06.227

我做过类似的工作。由于 Android 在自定义选项卡方面没有多大帮助，所以我只制作了四个选项卡按钮并将其放在每个 xml 文件的末尾。您的所有活动都会以这种方式看起来相似，并且会提供类似选项卡的视图。

# android - Facebook 墙并非对所有人可见

> ID：10409552
> 
> 赞同：0
> 
> 时间：2012-05-02T07:36:10.803
> 
> 标签：android, facebook

您好，我正在使用下面的代码将墙发布到我的 facebook，它会将墙添加到我的 facebook，但是

我的朋友看不到。我怎样才能做到这一点

```
public void postOnWall(String songtitle,String artist,String location,String desc) {
    String msg=desc+" at "+location+" listening to "+songtitle+" by "+artist;
    String description="Share your memories with the all new social map!";
     try {
            String response;
            Bundle parameters = new Bundle();
            parameters.putString("message",msg);
            parameters.putString("description",description);
            parameters.putString("link","");
            parameters.putString("name","");
            response = mFacebook.request("me/feed", parameters,"POST");

            Log.d("Tests", "got response: " + response);
            if (response == null || response.equals("") || 
                    response.equals("false")) {
               Log.v("Error", "Blank response");
            }
     } catch(Exception e) {
         e.printStackTrace();
     }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T09:39:32.833

试试这个片段让你的帖子对所有用户可见：

```
 try{
         String msg=desc+" at "+location+" listening to "+songtitle+" by "+artist;
         String description="Share your memories with the all new social map!";
         Bundle parameters = new Bundle();
         JSONObject attachment = new JSONObject();

         try {
            attachment.put("name", "");
            attachment.put("href", link);
            attachment.put("message",msg);
            attachment.put("description",description);
         } catch (JSONException e) {    }   
         parameters.putString("attachment", attachment.toString());
         parameters.putString("method", "stream.publish");
         parameters.putString("target_id", "Your Used ID"); // Optional
         String  response = mFacebook.request(parameters);       
      }
    catch(Exception e){} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T07:41:52.327

您应该像这样添加一个调用参数的字符串`privacy`：

```
 parameters.putString("privacy","friends"); 
```

有关更多信息，请尝试阅读[Facebook 帖子参考页面](https://developers.facebook.com/docs/reference/api/post/)

# tridion - 部署准备提交阶段失败，无法准备事务

> ID：10409554
> 
> 赞同：5
> 
> 时间：2012-05-02T07:36:14.077
> 
> 标签：tridion

从 SDL Tridion 5.2 迁移到 2011 SP1 后，我们在尝试发布或取消发布某些页面和结构组时遇到问题。

发布事务在提交部署阶段失败，并返回以下错误消息：

> 阶段：部署准备提交阶段失败，无法准备事务：tcm:0-682623-66560，null，null

cd_deployer.exe 服务也几乎在同一时间以几乎 100% 的 CPU 使用率运行。

我们还在 cd_deployer.log 和 cd_core.log 文件中获得以下信息：

```
2012-05-02 07:32:09,346 ERROR DeployPipelineExecutor - Unable to start processing deployment package with transactionId: tcm:0-682520-66560
2012-05-02 07:36:36,071 ERROR DeployPipelineExecutor - Final attempt in Phase: Deployment Prepare Commit Phase failed for transaction: tcm:0-682526-66560
2012-05-02 07:36:36,071 ERROR DeployPipelineExecutor - Original stacktrace for transaction: tcm:0-682526-66560
com.tridion.deployer.ProcessingException: Unable to prepare transaction: tcm:0-682526-66560, null, null
    at com.tridion.deployer.phases.PreCommitPhase.handleFailure(PreCommitPhase.java:120) ~[cd_deployer.jar:na]
    at com.tridion.deployer.phases.PreCommitPhase.execute(PreCommitPhase.java:101) ~[cd_deployer.jar:na]
    at com.tridion.deployer.phases.DeployPipelineExecutor.runMainExecutePhase(DeployPipelineExecutor.java:186) [cd_deployer.jar:na]
    at com.tridion.deployer.phases.DeployPipelineExecutor.doExecute(DeployPipelineExecutor.java:97) [cd_deployer.jar:na]
    at com.tridion.deployer.phases.DeployPipelineExecutor.execute(DeployPipelineExecutor.java:61) [cd_deployer.jar:na]
    at com.tridion.deployer.TransactionManager.handleDeployPackage(TransactionManager.java:80) [cd_deployer.jar:na]
    at com.tridion.deployer.queue.QueueLocationHandler$1.run(QueueLocationHandler.java:176) [cd_deployer.jar:na]
    at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source) [na:1.6.0_30]
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source) [na:1.6.0_30]
    at java.util.concurrent.FutureTask.run(Unknown Source) [na:1.6.0_30]
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source) [na:1.6.0_30]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) [na:1.6.0_30]
    at java.lang.Thread.run(Unknown Source) [na:1.6.0_30] 
```

从页面中删除组件演示文稿并重新发布工作正常。使用不同的组件模板不起作用，因此问题似乎出在某处的组件上。

页面、二进制文件和 DCP 都被发布到文件系统。我确实想知道问题是否与发布大型二进制文件有关，但是从组件中删除它们并没有任何区别。

有谁知道如何解决这个问题？

亲切的问候

编辑：我现在已经将其追踪到一些我无法发布或取消发布的组件。尝试发布或取消发布组件时，事务会在“提交部署”阶段停留大约 5 分钟，其中 cd_deployer 服务会最大限度地使用 CPU，然后最终失败并显示相同的错误消息。

如果我通过复制和粘贴创建一个相同的组件副本，这可以正常工作，并且可以在几秒钟内直接完成发布，而不会影响服务器的 CPU。很奇怪！

编辑 2：这是我们当前在每个出版物的 cd_storage_conf.xml 文件中拥有的示例：

```
<Storage Type="filesystem" Class="com.tridion.storage.filesystem.FSDAOFactory" Id="21_content" defaultFilesystem="false">
    <Root Path="D:/WebSites/live/Website/wwwroot/" />
</Storage>
<Storage Type="filesystem" Class="com.tridion.storage.filesystem.FSDAOFactory" Id="21_data" defaultFilesystem="true" defaultStorage="true">
    <Root Path="D:/WebSites/live/Website/Data" />
</Storage>

<Publication Id="21" defaultStorageId="21_data" cached="false">
    <Item typeMapping="Page" cached="false" storageId="21_content"/>
    <Item typeMapping="Binary" storageId="21_content" cached="false"/>
    <Item typeMapping="ComponentPresentation" storageId="21_data"/>
</Publication> 
```

元数据没有特定的类型映射。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T11:19:35.677

您是否尝试过取消发布然后重新发布有问题的页面？这通常可以为我解决问题。我有一个理论，有时旧的失败事务可能会锁定 Broker 中的某些行。取消发布页面似乎可以释放它们。这并不能真正解决问题的原因，但如果它有效，它应该有助于隔离原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T11:58:37.360

检查您的 cd_storage_conf - 您是否将所有元数据存储到同一位置？如果不是，请修改为这样。

如果您仍在使用 cd_broker_conf 并允许系统转换为 cd_storage_conf，则最好创建自己的 cd_storage_conf，因为您会遇到困难。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T06:11:24.813

我记得在部署程序配置中，有一个阶段设置。对于每个部署标签，定义了一个阶段，即何时触发部署处理程序：Pre，normal & post。

不确定确切的配置是什么，但是当我们设置存档管理器时遇到了这个问题。

此外，当临时工作目录被数据溢出时，我们在部署/传输方面遇到了问题。清除文件夹（默认为： c:\temp 或 c:\work ）将加快进程。

2美分...

# iphone - Objective C + RESTKit：获取对象的问题

> ID：10409558
> 
> 赞同：1
> 
> 时间：2012-05-02T07:36:45.623
> 
> 标签：iphone, objective-c, ios, web-services, restkit

我想将 RestKit 用于 Restful Webservice 在 LAMP 环境和 iOS 应用程序之间进行通信。因此，我进行了第一次测试，以检查它是否像可用教程和 RestKit 页面中描述的那样正常工作。

现在代码如下所示：

```
RKObjectManager* objectManager = [RKObjectManager managerWithBaseURLString:@"http://localhost/resttest"];

objectManager.client.requestQueue.showsNetworkActivityIndicatorWhenBusy = YES;

#ifdef RESTKIT_GENERATE_SEED_DB
    NSString *seedDatabaseName = nil;
    NSString *databaseName = RKDefaultSeedDatabaseFileName;
#else
    NSString *seedDatabaseName = RKDefaultSeedDatabaseFileName;
    NSString *databaseName = @"CoreData.sqlite";
#endif

objectManager.objectStore = [RKManagedObjectStore objectStoreWithStoreFilename:databaseName usingSeedDatabaseName:seedDatabaseName managedObjectModel:nil delegate:self];

// Map Person Object
RKManagedObjectMapping *personMapping = [RKManagedObjectMapping mappingForClass:[Person class] inManagedObjectStore:objectManager.objectStore];
//RKManagedObjectMapping *personMapping = [RKManagedObjectMapping mappingForEntityWithName:@"Person" inManagedObjectStore:[RKObjectManager sharedManager].objectStore];
[personMapping mapKeyPath:@"id" toAttribute:@"person_id"];
[personMapping mapKeyPath:@"firstname" toAttribute:@"person_firstname"];
[personMapping mapKeyPath:@"lastname" toAttribute:@"person_lastname"];
[personMapping mapKeyPath:@"gender" toAttribute:@"person_gender"];
personMapping.primaryKeyAttribute = @"id";

// Register our mappings with the provider;    
[objectManager.mappingProvider setMapping:personMapping forKeyPath:@"/person"];
objectManager.acceptMIMEType = RKMIMETypeJSON;

#ifdef RESTKIT_GENERATE_SEED_DB
    RKLogConfigureByName("RestKit/ObjectMapping", RKLogLevelInfo);
    RKLogConfigureByName("RestKit/CoreData", RKLogLevelTrace);
#endif

[objectManager loadObjectsAtResourcePath:@"/person" delegate:self]; 
```

这就是我的托管对象的样子：

```
@interface Person : NSManagedObject

@property (nonatomic, retain) NSString * person_firstname;
@property (nonatomic, retain) NSString * person_lastname;
@property (nonatomic, retain) NSString * person_gender;
@property (nonatomic, retain) NSNumber * person_id;

@end 
```

这是服务器端的虚拟代码，它只返回一些 json 示例字符串：

```
<?php

    header('Content-type: application/json');

    if($_SERVER['REQUEST_METHOD'] == 'GET')
    {
        $json_string = '{ "persons": [
                            { "id": "1",
                              "firstname": "hans",
                              "lastname": "maier",
                              "genre": "m"
                            },
                            { "id": "2",
                              "firstname": "michael",
                              "lastname": "schmidt",
                              "genre": "w"
                            }]
                        }';

        echo $json_string;
    }

?> 
```

获取返回的 json-String 的 URI 是[http://localhost/resttest/person(/index.php](http://localhost/resttest/person(/index.php) )。

我的问题是：

*   当我没有为“”定义资源路径时，我总是会收到此错误：

    E restkit.network:RKObjectLoader.m:216 在映射过程中遇到错误：找不到 keyPath 的对象映射：''

我不知道为什么会这样。我试过的其他例子都没有这个问题，但我不知道我做错了什么。

*   当它工作时（我必须将基本 URL 更改为[http://localhost/resttest/person](http://localhost/resttest/person)），我得到一个空对象而不是错误。

我将不胜感激有关此主题的任何帮助，因为现在我不知道自己做错了什么。

谢谢！

编辑 03.05.2012：

这是我在日志中得到的：

```
2012-05-03 12:52:05.067 RESTKitCoreDataTest[5139:13807] D restkit.object_mapping:RKObjectMapper.m:320 Performing object mapping sourceObject: {
    persons =     (
                {
            firstname = hans;
            gender = m;
            id = 1;
            lastname = maier;
        },
                {
            firstname = michael;
            gender = w;
            id = 2;
            lastname = schmidt;
        }
    );
}
 and targetObject: (null)
2012-05-03 12:52:05.067 RESTKitCoreDataTest[5139:13807] T restkit.object_mapping:RKObjectMapper.m:278 Examining keyPath '' for mappable content...
2012-05-03 12:52:05.067 RESTKitCoreDataTest[5139:13807] D restkit.object_mapping:RKObjectMapper.m:264 Found mappable data at keyPath '': {
    persons =     (
                {
            firstname = hans;
            gender = m;
            id = 1;
            lastname = maier;
        },
                {
            firstname = michael;
            gender = w;
            id = 2;
            lastname = schmidt;
        }
    );
}
2012-05-03 12:52:05.073 RESTKitCoreDataTest[5139:13807] D restkit.object_mapping:RKObjectMapper.m:210 Asked to map source object {
    persons =     (
                {
            firstname = hans;
            gender = m;
            id = 1;
            lastname = maier;
        },
                {
            firstname = michael;
            gender = w;
            id = 2;
            lastname = schmidt;
        }
    );
} with mapping <RKManagedObjectMapping:0x811eb60 objectClass=Person keyPath mappings => (
    "RKObjectKeyPathMapping: id => person_id",
    "RKObjectKeyPathMapping: firstname => person_firstname",
    "RKObjectKeyPathMapping: lastname => person_lastname",
    "RKObjectKeyPathMapping: gender => person_gender"
)>
2012-05-03 12:52:05.074 RESTKitCoreDataTest[5139:13807] D restkit.object_mapping:RKObjectMappingOperation.m:617 Starting mapping operation...
2012-05-03 12:52:05.074 RESTKitCoreDataTest[5139:13807] T restkit.object_mapping:RKObjectMappingOperation.m:618 Performing mapping operation: RKObjectMappingOperation for 'Person' object. Mapping values from object {
    persons =     (
                {
            firstname = hans;
            gender = m;
            id = 1;
            lastname = maier;
        },
                {
            firstname = michael;
            gender = w;
            id = 2;
            lastname = schmidt;
        }
    );
} to object <Person: 0x6e295d0> (entity: Person; id: 0x6e29610 <x-coredata:///Person/t99EFF6DC-EBDA-405C-8AFF-D082E4A8542F2> ; data: {
    "person_firstname" = nil;
    "person_gender" = nil;
    "person_id" = 0;
    "person_lastname" = nil;
}) with object mapping <RKManagedObjectMapping:0x811eb60 objectClass=Person keyPath mappings => (
    "RKObjectKeyPathMapping: id => person_id",
    "RKObjectKeyPathMapping: firstname => person_firstname",
    "RKObjectKeyPathMapping: lastname => person_lastname",
    "RKObjectKeyPathMapping: gender => person_gender"
)>
2012-05-03 12:52:05.074 RESTKitCoreDataTest[5139:13807] T restkit.object_mapping:RKObjectMappingOperation.m:388 Did not find mappable attribute value keyPath 'id'
2012-05-03 12:52:05.074 RESTKitCoreDataTest[5139:13807] T restkit.object_mapping:RKObjectMappingOperation.m:388 Did not find mappable attribute value keyPath 'firstname'
2012-05-03 12:52:05.075 RESTKitCoreDataTest[5139:13807] T restkit.object_mapping:RKObjectMappingOperation.m:388 Did not find mappable attribute value keyPath 'lastname'
2012-05-03 12:52:05.075 RESTKitCoreDataTest[5139:13807] T restkit.object_mapping:RKObjectMappingOperation.m:388 Did not find mappable attribute value keyPath 'gender'
2012-05-03 12:52:05.075 RESTKitCoreDataTest[5139:13807] D restkit.object_mapping:RKObjectMappingOperation.m:638 Mapping operation did not find any mappable content
2012-05-03 12:52:05.075 RESTKitCoreDataTest[5139:13807] T restkit.core_data:RKManagedObjectMappingOperation.m:98 relationshipsAndPrimaryKeyAttributes: {
}
2012-05-03 12:52:05.075 RESTKitCoreDataTest[5139:13807] D restkit.object_mapping:RKObjectMapper.m:351 The following operations are in the queue: (
)
2012-05-03 12:52:05.075 RESTKitCoreDataTest[5139:13807] D restkit.object_mapping:RKObjectMapper.m:366 Finished performing object mapping. Results: {
}
2012-05-03 12:52:05.080 RESTKitCoreDataTest[5139:fb03] Loaded persons: (
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T12:37:34.093

**可能性一：**

您似乎将映射设置为错误的键路径。

尝试

```
// Register our mappings with the provider;    
[objectManager.mappingProvider setMapping:personMapping forKeyPath:@"persons"]; 
```

并检查它是否有效。

**可能性2：**

在映射中指定 JSON 的根路径。

尝试

```
// Map Person Object
RKManagedObjectMapping *personMapping = [RKManagedObjectMapping mappingForClass:[Person class] inManagedObjectStore:objectManager.objectStore];
[personMapping mapKeyPath:@"id" toAttribute:@"person_id"];
[personMapping mapKeyPath:@"firstname" toAttribute:@"person_firstname"];
[personMapping mapKeyPath:@"lastname" toAttribute:@"person_lastname"];
[personMapping mapKeyPath:@"gender" toAttribute:@"person_gender"];
personMapping.rootKeyPath = @"persons";
personMapping.primaryKeyAttribute = @"id"; 
```

并检查它是否有效。

# jsp - java.lang.UnsupportedOperationException：需要 ICEfaces 渲染

> ID：10409566
> 
> 赞同：2
> 
> 时间：2012-05-02T07:37:23.653
> 
> 标签：jsp, jsf, icefaces

我想刷新我的 icefaces 增强页面中的某些 DOM 元素。

```
<h:commandLink actionListener="#{profileBean.editProfile}">
<f:param name="profileId" value="#{profile.id}" />
<h:outputText value="#{profile.label}" />
<f:ajax event="action" render=":profileEditorForm"/>
</h:commandLink> 
```

我有

```
<context-param>
<param-name>org.icefaces.render.auto</param-name>
<param-value>true</param-value>
</context-param> 
```

在我的 web.xml 和

```
<icecore:config render="true" /> 
```

在我的 xhtml 文件中。

完整的错误信息是

```
Mai 02, 2012 9:28:14 AM com.icesoft.faces.context.DOMContext attachDOMContext
Schwerwiegend: ICEfaces rendering required by icefaces-compat.jar components. Enable    via <icecore:config render="true" />.
java.lang.UnsupportedOperationException: ICEfaces rendering required.
at com.icesoft.faces.context.DOMContext.attachDOMContext(DOMContext.java:93)
at     com.icesoft.faces.renderkit.dom_html_basic.FormRenderer.encodeBegin(FormRenderer.java:62) 
```

# facebook-opengraph - 打开图形示例对象，无效的 og：类型？

> ID：10409574
> 
> 赞同：1
> 
> 时间：2012-05-02T07:38:15.073
> 
> 标签：facebook-opengraph, custom-action

我已经设置了一个自定义操作和自定义对象。我正在尝试使用 Facebook 提供的示例代码发布到我的时间线：

```
curl -F 'access_token=<my token>' \
     -F 'photo=http://samples.ogp.me/351656114891990' \
        'https://graph.facebook.com/me/stipple_staging:stipple' 
```

返回的响应是这样的（为了便于阅读而分析出来）：

```
{
    "error":{
        "type":"Exception",
        "message":"Object at URL 'http:\/\/samples.ogp.me\/351656114891990' is invalid because the configured 'og:type' of '103770389680565:photo' is invalid."
    }
} 
```

在这一点上我有点不知所措。这是我需要做某事的已知问题，还是只是一个错误？

编辑：Facebook 现在似乎已经解决了这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T20:01:41.040

我认为您的问题是您的 og:type 应该是您的 app namespace:action 类型，例如

```
<meta property="og:type" content="your_app_namespace:photo" /> 
```

查看[自定义对象演练](https://developers.facebook.com/docs/customopengraph/walkthrough/)的第 IV 部分，它有一些关于 og:type 标记应如何格式化的示例。在FB看来，我不确定appid和namespace是一回事。

[附带说明一下，如果您愿意，您可以在此处](http://developers.facebook.com/tools/debug)查看您的 FB URL ，而不是通过 cURL 进行所有操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T07:47:48.990

如果您想让自己轻松一点，Facebook 网站上有一个可用值列表。如果可以在类型字段中使用它们中的任何一个：http: [//developers.facebook.com/docs/opengraphprotocol/#types](http://developers.facebook.com/docs/opengraphprotocol/#types)

# c# - 使用 ADO.NET 传递表值参数

> ID：10409576
> 
> 赞同：53
> 
> 时间：2012-05-02T07:38:42.330
> 
> 标签：c#, asp.net, sql, ado.net

如何使用 ADO.NET 将表值参数传递给存储过程？

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-05-02T07:49:45.917

1.  **在 SQL Server 中创建类型**：

    ```
    CREATE TYPE [dbo].[MyDataType] As Table
    (
        ID INT,
        Name NVARCHAR(50)
    ) 
    ```

2.  **创建程序**：

    ```
    CREATE PROCEDURE [dbo].[MyProcedure]
    (
        @myData As [dbo].[MyDataType] Readonly
    )
    AS

    BEGIN
        SELECT * FROM @myData
    END 
    ```

3.  **在 C# 中创建数据表**：

    ```
    DataTable myDataTable = new DataTable("MyDataType");
    myDataTable.Columns.Add("Name", typeof(string));
    myDataTable.Columns.Add("Id", typeof(Int32));
    myDataTable.Rows.Add("XYZ", 1);
    myDataTable.Rows.Add("ABC", 2); 
    ```

4.  **创建 SQL 参数**：

    ```
    SqlParameter parameter = new SqlParameter();
    parameter.ParameterName = "@myData";
    parameter.SqlDbType = System.Data.SqlDbType.Structured;
    parameter.Value = myDataTable;
    command.Parameters.Add(parameter); 
    ```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-04-08T21:30:12.983

我试过这个并收到异常：

> 表类型参数“@MyDataType”必须具有有效的类型名称。

我必须设置 SqlParameter 的“TypeName”属性：

```
parameter.TypeName = "MyDataType"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T05:16:28.893

这个问题是[How to pass table value parameters to stored procedure from .net code](https://stackoverflow.com/q/5595353/1414000)的副本。请参阅该问题以获取说明使用 a`DataTable`或 an的示例`IEnumerable<SqlDataRecord>`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-23T06:36:44.213

对于多语种的人来说，节目有点晚了：

a) tsql 上的其他地方

```
--- create a vector data type
CREATE TYPE [dbo].[ItemList] AS TABLE([Item] [varchar](255) NULL) 
```

b)

```
Dim Invoices As New DataTable("dbo.ItemList") 'table name is irrelevant
Invoices.Columns.Add("Invoice", GetType(String))
...
        With .SqlCommand.Parameters
            .Clear()
            .Add(New Data.SqlClient.SqlParameter() With {
                        .SqlDbType = Data.SqlDbType.Structured,
                        .Direction = Data.ParameterDirection.Input,
                        .ParameterName = "@Invoices",
                        .TypeName = "dbo.ItemList",
                        .Value = Invoices})
        End With
...
   ' using  store procedure
   .CommandText = "SELECT * FROM dbo.rpt(@invoices) "
   ' or direct reference is a select
   .CommandText = "SELECT * FROM dbo.invoicedata" +
        "where ((select count(*) from @invoices) = 0 or "+
             "InvoiceNumber in (select distinct * from @Invoices)) 
```

* * *

## 回答 #5

> 赞同：-6
> 
> 时间：2014-04-30T12:46:49.613

您可以使用 Exec 作为前缀

```
using( SqlConnection con = new SqlConnection( "Server=.;database=employee;user=sa;password=12345" ) )
    {
        SqlCommand cmd = new SqlCommand( " exec ('drop table '+@tab)" , con );
        cmd.Parameters.AddWithValue( "@tab" ,"Employee" );
        con.Open( );
        cmd.ExecuteNonQuery( );
    } 
```

# javascript - 隐藏ie7的空div

> ID：10409583
> 
> 赞同：0
> 
> 时间：2012-05-02T07:39:20.173
> 
> 标签：javascript, jquery

IE7 显示我的空 div，所以我想创建一个函数来隐藏 div，如果它没有 ul 元素。我有几个适用此选择器的 div： `'div.Home_filter_par div[class*="cq-colctrl-lt"] div.filters ul'` 我需要分别检查每个 div。所以这行不通：

```
function update () {
     if (('div.Home_filter_par div[class*="cq-colctrl-lt"] div.filters ul') == 0) {
         $('div.Home_filter_par div[class*="cq-colctrl-lt"] div.filters li').closest('div.parsys_column').hide();
     }
} 
```

我也尝试过这种方式，但这甚至隐藏了同时包含空 div.filters 和 div.filters 且其中包含 ul 元素的 div

```
$('div.Home_filter_par div[class*="cq-colctrl-lt"] 
div.filters:empty').closest('div.parsys_column').hide(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T07:50:36.927

这应该可以，像这样创建/附加样式表

```
<!--[if IE7]> <link href="styles/ie7.css" rel="stylesheet" type="text/css"> <![endif]--> 
```

并把这样的东西放进去？

```
div {
visibility: hidden;
}
div.yourclass {
visibility: hidden;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T07:52:27.467

您可以使用`:has()`.

所以你可能会寻找这样的东西：

```
$('div.parsys_column:not(:has(div[class*="cq-colctrl-lt"] div.filters ul))').hide(); 
```

虽然我会质疑你是如何使用`[class*=""]`. 你确定这不是你可以选择的东西`.cq-colctrl-lt`吗？

现在，嵌套`:not()`和`:has()`选择器（或任何一般的嵌套选择器）使您的代码更难阅读，因此您可能需要考虑这样拆分：

```
$('div.parsys_column')
    .not(':has(div[class*="cq-colctrl-lt"] div.filters ul)')
    .hide()
    ; 
```

# eventbrite - Eventbrite - 获取过去的事件

> ID：10409605
> 
> 赞同：1
> 
> 时间：2012-05-02T07:40:59.490
> 
> 标签：eventbrite

我正在使用 eventbrite.com，并且正在尝试使用其余 API 来获取我的用户（eventbrite 中的组织者）的所有先前事件。我期待得到过去发生的事件。

我正在使用以下网址：

```
https://www.eventbrite.com/xml/event_search?organizer={MyOrganizerName}&app_key={MyAppKey}&date=past 
```

但是，我什么也没得到。曾经。我确信过去发生了一些事件。我正在成功地获得未来的事件。所以我的客户端\应用程序密钥\拼写\无论如何都没有问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-16T14:16:00.043

使用较新的[Eventbrite APIv3](https://www.eventbrite.com/developer/v3/)，端点更改为`/users/me/owned_events`API 附带一个 API Explorer，您只需在 Web 浏览器中访问任何端点即可查看详细的调试信息。

将此带有令牌 ID 的 url 粘贴到浏览器中以获取所有过去的事件：

[https://www.eventbriteapi.com/v3/users/me/owned_events/?token=YOURTOKENID](https://www.eventbriteapi.com/v3/users/me/owned_events/?token=YOURTOKENID)

结果是您的用户帐户正在组织的所有事件的分页响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T00:13:42.873

event_search方法旨在仅返回有关即将发生的事件的公开可用信息[。](http://developer.eventbrite.com/doc/events/event_search/)

尝试[user_list_events](http://developer.eventbrite.com/doc/users/user_list_events/)代替：

```
https://www.eventbrite.com/xml/user_list_events?app_key={YOUR_APP_KEY}&user_key={YOUR_USER_KEY}&event_statuses=ended 
```

您还可以选择创建一个[组织者个人资料页面](http://developer.eventbrite.com/doc/organizers/)，允许您将类似的事件组合在一起。Organizer_list_events [API](http://developer.eventbrite.com/doc/organizers/organizer_list_events/)调用可能对使用该功能的人有用。

# android - GridView 和 ImageButton 奇怪的问题

> ID：10409611
> 
> 赞同：1
> 
> 时间：2012-05-02T07:41:15.990
> 
> 标签：android, android-layout

大家好，我有自定义网格视图与 imageButton 和 textView 如下

![在此处输入图像描述](../Images/7c0af4f9614126a2c471ac426ccf94ea.png)

在这里我使用了 imageButton.. 问题是网格不可点击.. 但是如果我在这里使用 imageView 它工作正常但 UI 不合适。

这是我的布局

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" 
    android:gravity="center"
    android:padding="5dp"
    >

    <ImageButton
        android:id="@+id/profilePic"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/newlocation" 
        android:background="@drawable/btnbackground"
        />

    <TextView
        android:id="@+id/SpeakerName"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:textSize="15sp"
        android:text="Some Speaker"
        /> 
```

这是我的适配器

```
 package com.tt.cc;

import java.util.List;

import android.content.Context;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.TextView;

public class SavedConferencesGridAdapter extends ArrayAdapter<String>{

    Context mContext;
    List<String> confernceList;

    public SavedConferencesGridAdapter(Context context, int textViewResourceId, List<String> confernceList) 
    {

        super(context,textViewResourceId,confernceList);
        this.confernceList =  confernceList;
        this.mContext = context;
        Log.e("TAG", confernceList.size()+"");
    }

    int[] picIds = new int[] { R.drawable.newschedule,R.drawable.newexhibitors,
                                R.drawable.newsponsers, R.drawable.newlocation,
                                R.drawable.newfavourites, R.drawable.newreminder,R.drawable.info,R.drawable.info,R.drawable.info,R.drawable.info,R.drawable.info,R.drawable.info };

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return confernceList.size();
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub
        View v;

        if(convertView==null){
            LayoutInflater li = (LayoutInflater) mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = li.inflate(R.layout.entity, null);
            TextView tv = (TextView)v.findViewById(R.id.SpeakerName);
            tv.setText("tt");
            /*ImageView iv = (ImageView) v.findViewById(R.id.profilePic);
            iv.setImageResource(picIds[position]);*/

        }
        else
        {
            v = convertView;
        }
        return v;
    }

} 
```

这是我的活动

```
 public class SavedConferencesActivity extends Activity{

    GridView confereneceGridView;
    ArrayAdapter<String> conferneceAdapter;
    Button btnUpdate;

    List<String> conferenceList;
    TextView txtHeading;
    Boolean result = false;

    @Override
    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);

    }

    protected void onStart() {
        super.onStart();
        setContentView(R.layout.homegridlayout);
        initialize();

        confereneceGridView.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {

                Toast.makeText(SavedConferencesActivity.this, conferenceList.get(position)+"", Toast.LENGTH_SHORT).show();

    }

    @Override
    protected void onResume() {
        // TODO Auto-generated method stub
        super.onResume();

        conferneceAdapter = new SavedConferencesGridAdapter(this, android.R.layout.simple_list_item_1, conferenceList);
        confereneceGridView.setAdapter(conferneceAdapter);
    }

    private void initialize() {

        confereneceGridView = (GridView) findViewById(R.id.gridOfConference);
        btnUpdate = (Button) findViewById(R.id.btnUpdate);
        txtHeading = (TextView) findViewById(R.id.txtTag);

        conferenceList = new ArrayList<String>();
        conferenceList.add("AA");
        conferenceList.add("BB");
        conferenceList.add("CC");

        if (conferenceList.size() == 0)
            txtHeading.setText("No conferences saved");
        else
            txtHeading.setText("Selected Conferences");

    }

} 
```

请帮我解决这个问题。或者，如果有任何替代方案可用..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T07:46:29.593

简单的。为 ImageButton 提供此属性，

```
android:focusable="false" 
```

当 Grid 中有可聚焦的元素时，通常会出现此问题。（例如：按钮、图像按钮等）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T07:48:18.923

这个 ImageButton 的原因是默认情况下是可点击和可聚焦的，所以 Focus 和 click 事件永远不会转到 ItemView。

设置属性

```
android:focusable-"false" 
```

和

```
android:clickable="false" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-22T08:43:25.330

您的项目的布局应该是：

```
<LinearLayout ...
    android:descendantFocusability="blocksDescendants">
<ImageButton ...
    android:focusable="false"
    android:focusableInTouchMode="false"/>
</LinearLayout> 
```

不要忘记适配器中 ImageButton 的 setOnClickListener。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T08:05:39.927

在您的适配器类中，在返回视图“v”之前，将“ `onClickListener`”添加到“v”

```
 v.setOnClickListener(new OnClickListener() {           
        @Override
        public void onClick(View v) {
                Toast.makeText(context, position, Toast.LENGTH_SHORT).show();
        }
 }); 
```

# jquery - JQuery 在更改时验证选择器 ID

> ID：10409613
> 
> 赞同：0
> 
> 时间：2012-05-02T07:41:17.417
> 
> 标签：jquery, regex, select

```
$('select').change(function() {
   //important stuff
}); 
```

在做之前，`important stuff`我想通过它的 ID 来验证有问题的选择器。我想要影响的所有 ID 都以`_stat`. 您将如何使用 JQuery 中的正则表达式（或其他内容）来执行此操作？

```
$('select').change(function() {
   if ($("select[id*='_stat']")) {  //<~ this aint work
   //important stuff
   }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T07:45:16.730

您可以使用 来执行此操作`if ($(this).is("select[id$='_stat']"))`，但首先将事件处理程序附加到这些元素肯定会更好 - 这样您根本不必检查：

```
$("select[id$='_stat']").change(function() {
   //important stuff
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T07:45:21.217

你正在寻找这个：

```
if($(this).is('[id$="_stat"]')) {
    // important stuff
} 
```

尽管如果您只希望`change`处理程序在那些`select`以 id 结尾的元素上运行`_stat`，您应该查看 Jon 的答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T07:46:24.900

您甚至可以仅附加到 id 以 _stat 结尾的选择：

```
$('select[id$="_stat"]').change(function() {
   //important stuff only for selects id ending in _stat
}); 
```

# android - 将阿拉伯语从 android 发送到 PHP 文件

> ID：10409617
> 
> 赞同：0
> 
> 时间：2012-05-02T07:41:31.590
> 
> 标签：android, arabic

尝试使用以下代码将阿拉伯语文本从 android 发送到 PHP 文件

*Button.setOnClickListener(new OnClickListener() {*

 *```
 public void onClick(View v) {
            // TODO Auto-generated method stub

    tv  = (TextView)findViewById(R.id.from_t);
    nv  = (TextView)findViewById(R.id.to_t);
    rd  = (TextView)findViewById(R.id.agent_u);

    try {

        postData();
    } 
    catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();

        } catch (UnsupportedEncodingException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}

public void postData() throws JSONException, UnsupportedEncodingException{  
    // Create a new HttpClient and Post Header

    HttpClient httpclient = new DefaultHttpClient();
    String url = "http://XXX.XXX.XXX.XXX/post.php";
    HttpPost post = new HttpPost(url);

    HttpParams params=post.getParams();
    JSONObject json = new JSONObject();
    params.setParameter(CoreProtocolPNames.HTTP_CONTENT_CHARSET, "ISO-8859-1,utf-8;q=0.7,*;q=0.7" );

    try {

        // JSON data:

        json.put("name", tv.getText());
        json.put("position",rd.getText());
        json.put("position1",nv.getText());

        JSONArray postjson=new JSONArray();

        postjson.put(json);

        post.setEntity(new ByteArrayEntity(json.toString().getBytes("UTF8")));

        post.setHeader("Accept-Charset", "UTF-8");
                    post.setHeader("json",json.toString());

        //this is somthing els

        System.out.print(json);
        HttpResponse response = httpclient.execute(post);

        Toast.makeText(getApplicationContext(), "SEND",Toast.LENGTH_SHORT).show();
        {
            InputStream is = response.getEntity().getContent();

            BufferedReader reader = new BufferedReader(new InputStreamReader(is));
            StringBuilder sb = new StringBuilder();

            String line = null;
            try {
                while ((line = reader.readLine()) != null) {
                    sb.append(line + "\n");
                }
            } catch (IOException e) {
                e.printStackTrace();
            } finally {
                try {
                    is.close();

                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
            text = sb.toString();
        }

    }catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
    } catch (IOException e) {
        // TODO Auto-generated catch block
        return; 
    }
}

    }); 
```* 

*}*

代码很好，但如果我发送阿拉伯文本，我会不断收到数字和拉丁字母。有什么帮助吗？谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T09:05:42.950

如果您不想在 url 中发送 json，请使用这种方式。它可能会帮助你。

```
InputStream is;

ArrayList<NameValuePair> nameValuePairs1 = new ArrayList<NameValuePair>();

nameValuePairs1.add(new BasicNameValuePair("user_id", ""));
nameValuePairs1.add(new BasicNameValuePair("product_id", ""));
nameValuePairs1.add(new BasicNameValuePair("product_review",""+text));

HttpClient httpclient = new DefaultHttpClient();

HttpPost httppost = new HttpPost(URL);

httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs1));

HttpResponse responce = httpclient.execute(httppost);

HttpEntity entity = responce.getEntity();

is = entity.getContent();

BufferedReader bufr = new BufferedReader(new InputStreamReader(is,"iso-8859-1"), 8);

StringBuilder sb = new StringBuilder();

sb.append(bufr.readLine() + "\n");

String line = "0";

while ((line = bufr.readLine()) != null) 

{

sb.append(line + "\n");

}

is1.close();

result = sb.toString(); 
```

# asp.net - 如何拒绝访问我的部分视图的直接 URL？

> ID：10409618
> 
> 赞同：3
> 
> 时间：2012-05-02T07:41:34.070
> 
> 标签：asp.net, asp.net-mvc-3, razor

我的控制器中有一些部分视图。问题是，如果用户输入 url: (www.mydomain.com/mycontroller/mypartialview)，他们可以可视化我的部分视图。如何拒绝直接访问...并仅允许从基本视图使用部分视图？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T07:54:09.690

添加 [ChildActionOnly] .. 像这样：

```
[ChildActionOnly]
        public PartialViewResult List(Model model)
        {...
            return PartialView(model);
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T07:50:14.523

正如 Andras 所说，只有当你有一个控制器动作来返回它们时才会发生这种情况。我可以看到您可能已经有了这些，在这种情况下您应该将属性（过滤它们）添加为 [ChildActionOnly]

# image - 实时视频（图像）拼接

> ID：10409621
> 
> 赞同：12
> 
> 时间：2012-05-02T07:41:39.583
> 
> 标签：image, video, image-stitching

我正在考虑使用 Visual Studio 2008 上的 OpenCV 2.3.1 实时拼接来自 2 个或更多（目前可能是 3 或 4 个）相机的图像。

但是，我很好奇它是如何完成的。

最近我研究了一些基于特征的图像拼接方法的技术。

它们中的大多数至少需要以下步骤：

1.特征检测 2.特征匹配 3.寻找单应性 4.目标图像到参考图像的转换 ...等

现在我读过的大多数技术只处理“ONCE”图像，而我希望它处理从几个相机捕获的一系列图像，我希望它是“实时的”。

到目前为止，这听起来可能仍然令人困惑。我正在描述细节：

将 3 个摄像头放置在不同的角度和位置，每个摄像头必须与相邻的摄像头有重叠区域，以构建实时视频拼接。

我想做的与以下链接中的内容类似，其中使用了 ASIFT。

[http://www.youtube.com/watch?v=a5OK6bwke3I](http://www.youtube.com/watch?v=a5OK6bwke3I)

我试图咨询该视频的所有者，但没有得到他的回复：（。

我可以使用图像拼接的方法来处理视频拼接吗？视频本身是由一系列图像组成的，所以我想知道这是否可能。但是，无论您使用何种特征检测器（SURF、SIFT、ASIFT 等），检测特征点似乎都非常耗时。这让我怀疑做实时视频拼接的可能性。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-15T22:39:49.743

我曾经做过一个实时视频拼接系统，这是一个难题。由于保密协议，我无法透露我们使用的完整解决方案，但我实施了类似于[本文中描述的](http://vmv09.tu-bs.de/downloads/papers/ada09.pdf)解决方案。最大的问题是处理不同深度的对象（简单的单应性是不够的）；必须确定深度差异，并适当地扭曲视频帧，以便对齐共同特征。这本质上是一个立体视觉问题。[必须首先](http://en.wikipedia.org/wiki/Image_rectification)对图像进行校正，以便共同特征出现在同一扫描线上。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-09-25T21:00:14.140

几年前，您可能还对我的项目感兴趣。这是一个程序，可让您尝试不同的缝合参数并实时观察结果。

项目页面 - [https://github.com/lukeyeager/StitchHD](https://github.com/lukeyeager/StitcHD)

演示视频 - [https://youtu.be/mMcrOpVx9aY?t=3m38s](https://youtu.be/mMcrOpVx9aY?t=3m38s)

# java - 基于 Swing 的应用程序中的连接池

> ID：10409626
> 
> 赞同：1
> 
> 时间：2012-05-02T07:42:04.390
> 
> 标签：java, sql-server, swing, desktop-application, connection-pooling

我在 Java Swing 中有一个应用程序。我在单个数据库上为应用程序使用了一个连接。但是现在多个用户正在使用该应用程序，因此每次都会创建新连接。DB的性能非常缓慢；我可以在基于 Swing 的基于桌面的应用程序中使用连接池吗？使用的数据库是 SQL server 2000。

任何帮助appriciated。提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T07:43:57.710

是的，您可以使用[C3P0](http://sourceforge.net/projects/c3p0/)

实际上有很多[连接池库](http://java-source.net/open-source/connection-pools)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T07:46:38.620

[http://commons.apache.org/pool/](http://commons.apache.org/pool/) 可能也有帮助。我实际上在这里对 CouchDB 有同样的问题： [Connection pool for couchdb](https://stackoverflow.com/questions/10227213/connection-pool-for-couchdb)

# android - 转推 Android API 问题

> ID：10409630
> 
> 赞同：1
> 
> 时间：2012-05-02T07:42:14.283
> 
> 标签：android, api, oauth, twitter4j

大家好，首先要为我糟糕的英语道歉。

我想就我的 android 应用程序上的集成转推尝试评论我的问题。

到目前为止，我设法通过 OAUTH 进行身份验证，甚至可以发送推文。

当我希望能够从我在课堂上保存的 ID 发送转推时，我的问题就开始了。

我已经尝试了几乎所有东西，我已经花了几十个小时寻找这方面的信息，但不知道我是否走在正确的轨道上。

*   试图创建一个 getRetweetsById 函数
*   试图使 http GET 到地址： [https ://API.Twitter.com/statuses/retweets/21943348.json](https://API.Twitter.com/statuses/retweets/21943348.json)

...在所有情况下都得到相同的响应

它不起作用。

如果有人可以指导我哪种方法和我应该遵循的步骤，我将永远感激不尽。

谢谢和最好的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T08:05:55.490

嘿试试下面的代码

推特 mTwitter = TwitterFactory.getInstance();

mTwitter.retweetStatus("在此处发送您的 id");

谢谢桑图

# javascript - 在画布上倾斜和动画图像

> ID：10409635
> 
> 赞同：0
> 
> 时间：2012-05-02T07:42:51.823
> 
> 标签：javascript, html, canvas

我想在画布上倾斜和动画图像。我可以在画布上绘制图像，但是如何在绘制后倾斜和动画呢？如何获取在画布上绘制的图像的参考？

我可以像这样在画布上绘制图像

```
var ctx = document.getElementById('canvas').getContext('2d');
ctx.drawImage(image, sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T08:30:36.990

这是一个非常粗略的草图，可以帮助您入门：

```
$(function () {
  var
    loaded = false,
    ctx = $('canvas')[0].getContext('2d'),
    img;

  img = $('<img>', {
    src: 'http://www.gravatar.com/avatar/e25f40f6711403073e7da6c33be21eb8?s=128&d=identicon&r=PG'
  }).on('load', function () {
    loaded = true;
  }).get(0);

  setInterval(function () {
    var f = 0;

    return function () {
      if (loaded) {
        ctx.clearRect(0, 0, 500, 500);

        ctx.save();
        ctx.setTransform (1, f, 0, 1, 0, 0);
        ctx.drawImage(img, 50, 50);
        ctx.restore();

        f += 0.01;

        if (f > 1) {
          f = 0;
        }
      }
    };
  }(), 16);
}); 
```

演示：http: [//jsfiddle.net/UHSKL/](http://jsfiddle.net/UHSKL/)

# android - 选择列表视图中的所有复选框

> ID：10409637
> 
> 赞同：0
> 
> 时间：2012-05-02T07:43:13.517
> 
> 标签：android

我想选中列表视图中的所有复选框，但我无法从列表视图中获取复选框对象。我可以选择一个复选框，但不能选择多个复选框。

你的建议是可观的。

*代码：*

```
 public class MainActivity extends Activity {
   @Override
    public void onCreate(Bundle icicle) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.bir);
    mainListView = (ListView) findViewById(R.id.mainListView);
    selectall = (Button) findViewById(R.id.button1);
    selectall.setOnClickListener(this);
    save = (Button) findViewById(R.id.button2);
    save.setOnClickListener(this);

    mainListView.setOnItemClickListener(new AdapterView.OnItemClickListener()

            {
                @Override
                public void onItemClick(AdapterView<?> parent, View item,
                        int position, long id) {

                }
            });
  }
} 
```

*两栖类：*

```
 private static class Amphian 
        {
            private String name = "" ;
            private boolean checked = false ;
            public Amphian( String name ) 
            {
              this.name = name ;
            }
            public Amphian( String name, boolean checked )
            {
              this.name = name ;
              this.checked = checked ;
            }
            public String getName() {
              return name;
            }
            public void setName(String name) {
              this.name = name;
            }
            public boolean isChecked() {
              return checked;
            }
            public void setChecked(boolean checked) {
              this.checked = checked;
            }
            @Override
            public String toString() {
              return name ; 
            }
            public void toggleChecked() 
            {
              checked = !checked ;
            }
        } 
```

*AmphiansArrayAdapter 类：*

```
 public class AmphiansArrayAdapter extends ArrayAdapter<Amphian> 
         {
             Integer name[] =
                {
                     R.raw.ducks_landing_in_water, 
                     R.raw.flicker_chicks_feeding, 
                     R.raw.geese_honking_loud, 
                     R.raw.geese_honking_distant, 
                     R.raw.gold_finch, 
                     R.raw.humming_bird_feeding, 
                     R.raw.indigo_bunting, 
                     R.raw.loons,
                     R.raw.little_blue_heron_fishing,
                     R.raw.pelican_chick,
                     R.raw.purple_martins,
                     R.raw.red_winged_blackbird,
                     R.raw.shorebirds_close,
                     R.raw.shorebirds_distant,
                     R.raw.shorebirds_misc,
                     R.raw.shoreseabirds,
                     R.raw.snow_geese_flock,
                     R.raw.terns,
                     R.raw.tufted_titmouse,
                     R.raw.tundra_swans,
                     R.raw.wood_stork_chicks,
                     R.raw.woodpecker_tapping

                };

            private final LayoutInflater inflater;

            public AmphiansArrayAdapter(Context context, List<Amphian> amphianList) 
            {
                super( context, R.layout.simplerow, R.id.rowTextView, amphianList );
                 inflater = LayoutInflater.from(context) ;
            }

            @Override
            public View getView( final int position,  View convertView , ViewGroup parent)
            {
                final Amphian amphian=this.getItem(position);

                mp=new MediaPlayer();
                 if ( convertView == null ) 
                 {
                        convertView = inflater.inflate(R.layout.simplerow, null);

                        // Find the child views.

                        textView = (TextView) convertView.findViewById( R.id.rowTextView );
                        checkBox = (CheckBox) convertView.findViewById( R.id.checkBox1 );

                        button   = (Button)convertView.findViewById(R.id.button1);

                        // Optimization: Tag the row with it's child views, so we don't have to 
                        // call findViewById() later when we reuse the row.
                        convertView.setTag( new AmphianViewHolder(textView,checkBox,button) );

                        // If CheckBox is toggled, update the planet it is tagged with.
                        checkBox.setOnClickListener( new View.OnClickListener()
                        {
                          @Override
                        public void onClick(View v) 
                         {
                            cb= (CheckBox) v;
                            Log.e("cb",String.valueOf(cb));
                            Amphian amphian = (Amphian) cb.getTag();
                            Log.e("cb",String.valueOf(cb.getTag()));
                            amphian.setChecked(cb.isChecked());

                            Log.e("dd", "ddd");
                          }
                        });  

                        button.setOnClickListener(new OnClickListener()
                        {

                            @Override
                            public void onClick(View v)
                            {
                                Button bu=(Button)v;
                                Amphian amphian; 
                                //= (Amphian) bu.getTag();
                                //Log.e(String.valueOf(amphian),"ddd"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T12:41:06.933

*尝试这个。*

```
public class MainActivity extends Activity implements OnClickListener {
public class LVSample3Adapter extends BaseAdapter{
    private Context context;
    private List<LVSample3Item> itemList;
    public LVSample3Adapter(List<LVSample3Item> lstItems,
            MainActivity mainActivity) {
        // TODO Auto-generated constructor stub
        this.context=mainActivity;
        this.itemList=lstItems;
    }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return itemList.size();
    }

    @Override
    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return itemList.get(position);
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub
        Log.e("lstItems1:", String.valueOf(position));
        LVSample3Item item = itemList.get(position);
        convertView =LayoutInflater.from(context).inflate(R.layout.list, parent, false);
        TextView t1=(TextView)convertView.findViewById(R.id.textView1);
        t1.setText(item.getTitle());
        CheckBox chb1=(CheckBox)convertView.findViewById(R.id.checkBox1);
        chb1.setChecked(item.getstate());

        return convertView;
    }

}
/** Called when the activity is first created. */
private ListView lv;
private ListAdapter adapter;
private Button btn1,btn2;
private  List<LVSample3Item> lstItems;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    btn1=(Button)findViewById(R.id.button1);
    btn2=(Button)findViewById(R.id.button2);
    btn1.setOnClickListener(this);
    btn2.setOnClickListener(this);
    lstItems = new ArrayList<LVSample3Item>();
    LVSample3Item item = new LVSample3Item("drinks",false);
    lstItems.add(item);
    item = new LVSample3Item("chat",false);
    lstItems.add(item);
    item = new LVSample3Item("chat1",true);
    lstItems.add(item);
    item = new LVSample3Item("chat2",false);
    lstItems.add(item);
    adapter = new LVSample3Adapter(lstItems, this);
    lv=(ListView)findViewById(R.id.listView1);
    lv.setAdapter(adapter);
}
@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    if(v.getId()==R.id.button1){
        Log.e("lstItems:", String.valueOf(lstItems.size()));
        for(int i=0;i<lstItems.size();i++){
            LVSample3Item item=lstItems.get(i);
            if(!item.getstate()){
                item.setpath(true);
            }
        }
        ((BaseAdapter) adapter).notifyDataSetChanged();

    }else if(v.getId()==R.id.button2){
        for(int i=0;i<lstItems.size();i++){
            LVSample3Item item=lstItems.get(i);
            if(item.getstate()){
                item.setpath(false);
            }
        }
        ((BaseAdapter) adapter).notifyDataSetChanged();
    }

} 
```

}

```
public class LVSample3Item implements Serializable {

private String title;
private boolean state;

public LVSample3Item(String title,boolean imagepath) {

    this.title = title; 
    this.state=imagepath;
}

public String getTitle() {
    return title;
}
public boolean getstate() {
    return state;
}

public void setTitle(String title) {
    this.title = title;
}
public void setpath(boolean imagepath) {
    this.state = imagepath;
} 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T07:49:25.133

有太多代码要阅读，所以我给你一个示例如何做到这一点：

```
int count = list.getCount();
for (int i = 0; i < count; i++) {
    View child = list.getItemAtPosition(i);
    //check that child..
} 
```

或者

```
int count = list.getChildCount();
for (int i = 0; i < count; i++) {
    View child = list.getChildAt(i);
    //check that child..
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T07:51:30.187

```
selectall.setOnClickListener(new onClickListener(){

   @Override
   public void onClick(View v) {
       for (int i = 0; i < list.size(); i++) {
            list.getItem(i).setChecked(true);
       }
   }
}); 
```

尝试这样做

# php - 合并多个jquery文件

> ID：10409639
> 
> 赞同：0
> 
> 时间：2012-05-02T07:43:15.937
> 
> 标签：php, jquery, compression

出于某种原因，我无法通过 php 将我的 javascript 文件合并到一个文件中，就像我可以使用 css 一样。

基本上我希望将我所有的 javascript 文件合并为一个。但是，这以某种方式破坏了我的代码。就像 jQuery 生成的 $-value 不能通过其余代码（例如 jquery ui）获得。

`<script type="text/javascript" src=""></script>`由于某种原因，jQuery 是否需要自己加载？那是什么原因呢？

我按照它们在浏览器中工作的相同顺序包含它们。

jQuery -> jQuery UI -> jQuery 自定义函数 -> 我自己的脚本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T08:41:06.593

您可能希望在单个脚本之间放置一个换行符和/或分号。
例如，您从[https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js](https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js)获得的缩小的 jquery ui 脚本以

```
return this}})}(jQuery) 
```

如果您现在在其后面附加另一个脚本，您很可能会遇到语法错误。
让我们看一个粗略的scripts.php

```
<?php
header('Content-type: Application/javascript');
readfile('http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js');
readfile('http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js');

echo '$(document).ready(function() {
    alert("hello");
    $( "#dialog" ).dialog( "open" );
});
'; 
```

这行不通，但是

```
<?php
header('Content-type: Application/javascript');
readfile('http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js');
echo "\r\n;";
readfile('http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js');
echo "\r\n;";    
echo '$(document).ready(function() {
    alert("hello");
    $( "#dialog" ).dialog( "open" );
});
'; 
```

将要。

其他需要考虑的事项：

*   这可能不是灵丹妙药。我选择了“\r\n;” a) 从最后一行中的 // 注释中转义和 b) 用分号关闭“打开”语句。但是 javascript（及其实现）缺少分号的行为可能相当奇怪（这是一个不好的功能），我宁愿手动“修复”每个单独的脚本，而不是添加一个固定的“修复字符串”。
*   我在“让像谷歌这样的 CDN 托管那些 javascript 库并依赖客户端的缓存”阵营中很坚强……但手头没有充分的证据来支持这一立场。

# php - 在 Yii 的标准中如何获得计数 (*)

> ID：10409643
> 
> 赞同：5
> 
> 时间：2012-05-02T07:44:16.130
> 
> 标签：php, sql, yii

我正在尝试构建一个具有`group by`属性的查询，我想获取它`id`并且`count` 它一直告诉我列`count (*)`名**无效**我如何`count`从`group by`查询中获取？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-06T11:32:37.973

使用别名工作。Yii 1.1.11。其他失败

```
$criteria= new CDbCriteria();
$criteria=array(
            'group'=>'attribute',
            'select'=>'id,count(*) AS cc'
); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-08-30T07:33:58.700

这不完全是您问题的答案，但仍然对您有用。如果使用结果只查找一个特定属性的计数，则不需要检查整个数组，而是使用 Yii 的`count`方法：

```
$criteria= new CDbCriteria();
$criteria.compare('col_name', $desired_col_value);
$count = X::model()->count($criteria); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-02T05:08:24.653

```
$criteria= new CDbCriteria();
$criteria=array(
            'group'=>'attribute',
            'select'=>'id,count(*) AS cc',
            'distinct'=>true,
); 
```

# asp.net - 如何通过 Sql 命令向 DataSource 添加外部值？

> ID：10409646
> 
> 赞同：0
> 
> 时间：2012-05-02T07:44:31.760
> 
> 标签：asp.net, sql, sql-server, sql-server-2005

我从 database 上的一张表中读取了我的 dropdownlost 数据。我想在我的下拉列表中添加一个外部值（ Select ）。这是我的数据源 sql 代码

```
SELECT        ID, Part, fxCarId
FROM            tblParts
WHERE        (fxCarId = @fxCarId)
UNION
SELECT        TOP (1) 0 AS Expr2, 'Select' AS Expr1
FROM            tblParts AS tblParts_1 
```

如何将此“选择”文本添加到我的下拉列表中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T07:51:40.293

要添加默认列表项，请执行以下操作：

```
<asp:DropDownList ID="DropDownList1" AppendDataBoundItems="True" runat="server">
    <asp:ListItem Text="Please select.." Value="SomeValue" Selected="true"></asp:ListItem>
</asp:DropDownList> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T07:51:43.320

您是正确的，但是您的联合要求两个语句具有相同的列数，顶部有 2 列，底部只有 2 列。

SQL-Server 也不需要您直接从表中选择，因此`SELECT TOP 1`您可以直接指定值，而不是从表中选择：

```
SELECT  ID, Part, fxCarId
FROM    tblParts
WHERE   fxCarId = @fxCarId
UNION
SELECT  0, 'Select', 0 
```

我倾向于确保“选择”位于任何下拉列表顶部的是添加一个 SortOrder 列，这样您可以确保“选择”是列表顶部的默认值，但下拉列表的其余部分按字母顺序排列，这对用户来说更合乎逻辑。

```
SELECT  ID, Part, fxCarId, 1 [SortOrder]
FROM    tblParts
WHERE   fxCarId = @fxCarId
UNION
SELECT  0, 'Select', 0, 0
ORDER BY SortOrder, Name 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T07:59:34.323

如果我理解，那么就这样做。

```
<asp:DropDownList ID="ddl" runat="server" DataTextField="Part" DataValueField="Id"
                                    AppendDataBoundItems="true" >
                                    <asp:ListItem Text="--Select Text--" Value="-1" />
                                </asp:DropDownList> 
```

**AppendDataBoundItems="true"**是最重要的。并进行 SQL 查询。

```
SELECT        ID, Part, fxCarId
FROM            tblParts
WHERE        (fxCarId = @fxCarId) 
```

没有工会。希望能帮助到你

# ios - 动态表格单元格高度

> ID：10409649
> 
> 赞同：4
> 
> 时间：2012-05-02T07:44:57.203
> 
> 标签：ios, uitableview, cell

使用故事板，我为我的表格视图创建了一个自定义单元格，我还为它创建了一个包含所有属性的自定义类。

现在，使单元格高度动态化的最佳方法是什么，最好的方法在哪里？我应该在单元格的自定义类中执行此操作吗？或者在我的表格视图控制器中？

我想在自定义类中这样做会更有意义，但是我应该怎么做呢？填写特定标签后，应更改单元格的高度

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T08:05:37.220

您无法从自定义绘图类更改单元格的高度。

您可以在仅具有 UITableView 的 viewController 中执行此操作。通过为所有单元格指定硬编码的行高，或使用

[`- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath`](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UITableViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UITableViewDelegate/tableView:heightForRowAtIndexPath:)

并在此处指定单元格的高度。如果您想为单元格设置不同的高度，您应该检查 indexpath.row 属性并返回所需的高度值。

如果您想更改已在屏幕单元格中绘制的高度，则必须重新加载该单元格以反映使用此更改：

[`- (void)reloadRowsAtIndexPaths:(NSArray *)indexPaths withRowAnimation:(UITableViewRowAnimation)animation`](http://developer.apple.com/library/ios/documentation/uikit/reference/UITableView_Class/Reference/Reference.html#//apple_ref/occ/instm/UITableView/reloadRowsAtIndexPaths:withRowAnimation:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-09-12T10:31:08.103

使用以下代码

```
-(CGFloat)heightForText:(NSString *)str width:(int)width font:(UIFont *)font lineBreakMode:(NSLineBreakMode) lineBreakMode
{
    CGSize textSize;
    textSize = [str boundingRectWithSize:CGSizeMake(width, FLT_MAX) options:NSStringDrawingUsesLineFragmentOrigin attributes:@{NSFontAttributeName : font} context:nil].size;
    return textSize.height;
}
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    if(tableView == self.yourTable)
    {
            NSMutableDictionary *dict = [self.yourArray objectAtIndex:indexPath.row] ;
            return [self heightForText:[dict valueForKey:@"reviewDescription"] width:300 font:[UIFont fontWithName:kAppRegularFont size:15.0] lineBreakMode:0]+75;
    }
    return 70;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T07:59:12.057

将您的视图控制器设置为表视图的委托，然后在视图控制器中实现以下 UITableViewDelegate 方法：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-11T07:06:50.600

将这些行添加到您的“viewDidLoad”方法中

```
 self.tableView.estimatedRowHeight = your height here

 self.tableView.rowHeight = UITableViewAutomaticDimension; 
```

**不要将默认高度设置为委托**

```
func tableView(_ tableView: UITableView, heightForRowAt indexPath: IndexPath) -> CGFloat {

} 
```

# sql - 在 SQL 查询 (Oracle DBMS) 中使用变量？

> ID：10409653
> 
> 赞同：0
> 
> 时间：2012-05-02T07:45:14.107
> 
> 标签：sql, oracle

我正在键入 SQL 查询以从基于 Oracle 数据库的软件工具中获取一些数据。我正在使用典型的`SELECT`- 语句。

现在，在我的 SQL 查询中，我在不同的地方使用日期“02.05.2012”。有没有办法`date_string`在开始时定义一个变量，然后在所有相关的地方使用这个变量？

这会简化很多事情。感谢所有提示和提示！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T11:24:59.543

您可能会尝试重写查询以从内联视图返回文字...

```
select
   my_date,
   ...
from(
   select to_date('02.05.2012','DD.MM.YYYY') my_date from dual),
   table2
where
   some_column <= my_date 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T10:22:18.540

您要查找的是绑定变量。

```
select to-date(:date, 'dd.mm.yyyy') date1
,      to-date(:date, 'dd.mm.yyyy') + 1 date2
from   dual 
```

在运行时，您需要将值传递给绑定变量。这完全取决于您的编程语言如何绑定变量，但是有大量的文档。DEFINE 仅在您使用 sql*plus 时才有效，而在“软件工具”中通常不是这种情况:)

**编辑：**

我现在开始明白了。它只是一个文本区域，您可以在其中输入查询，它将执行并返回结果。在这种情况下，您要么编写一些复杂的 pl/sql 代码，要么手动输入所有日期，或者使用带有 select from dual 的交叉连接：

```
with (select to_date('02.05.2012', 'dd.mm.yyyy') my_date from dual) d
select *
from   some_table t
cross join d -- no ON required 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T08:48:35.193

如果要选择使用当前日期，可以使用 sysdate。

使用 SQLPLUS，您可以定义自己的变量：

```
SQL> define mydate ="01-05-2012"

SQL> select to_date('&mydate','DD-MM-YYYY') from dual;

01-MAY-12 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T08:52:09.950

尝试以下操作：

```
SELECT *
  FROM table1
 WHERE to_char(date1,'DD/MM/YYYY') = '&&date'
   AND to_char(date2,'DD/MM/YYYY') = '&&date'
   AND to_char(date3,'DD/MM/YYYY') = '&&date' 
```

你会得到一个提示输入 &&date 的值，如果你想为每个日期输入不同的值，你应该输入 &date 而不是 &&date

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-02T08:59:52.400

[DEFINE](http://docs.oracle.com/cd/B19306_01/server.102/b14357/ch12017.htm)对您的要求很有用。

```
DEFINE NAME="example" 
```

访问`&NAME`

# awk - AWK - 更改文件名（特殊字符）

> ID：10409660
> 
> 赞同：1
> 
> 时间：2012-05-02T07:45:33.320
> 
> 标签：awk

此命令重命名文件：

```
$ find $PWD -name "*.jpg" | awk '{c=$0; gsub("/", "_", c)}{system("mv -v " $0 " " c)}'
`/home/pic/Pulpit/test/stary/1.jpg' -> `_home_pic_Pulpit_test_stary_1.jpg' 
```

我有一个测试文件：

```
$ ls 
`[~!($%^_&*){.}\___"`]`1.jpg 
```

…………

```
 $ find -not -name .
 ./`[~!($%^_&*){.}\___"`]`1.jpg 
```

我想更改文件名：

```
$ find -not -name . | awk '{c=$0; gsub("/", "_", c)}{system("mv -v " $0 " " c)}'
/bin/sh: Syntax error: word unexpected (expecting ")") 
```

我想：

```
_home_pic_Pulpit_test_stary_`[~!($%^_&*){.}\___"`]`1.jpg 
```

谢谢您的帮助。

**编辑：**

这适用于“gawk”，但不适用于“mawk”。

gawk（作品）：

```
$ find -not -name . | gawk '{ 
>     c=$0; 
>     gsub( "/", "_", c ); 
>     c = gensub( /([[:punct:]])/, "\\\\&", "g", c ); 
>     $0 = gensub( /([[:punct:]])/, "\\\\&", "g", $0 ); 
>     system("echo mv -v " $0 " " c)}
> '
mv -v ./`[~!($%^_&*){.}\___"`]`1.jpg ._`[~!($%^_&*){.}\___"`]`1.jpg 
```

mawk（不起作用）：

```
$ find -not -name . | mawk '{ 
>     c=$0; 
>     gsub( "/", "_", c ); 
>     c = gensub( /([[:punct:]])/, "\\\\&", "g", c ); 
>     $0 = gensub( /([[:punct:]])/, "\\\\&", "g", $0 ); 
>     system("echo mv -v " $0 " " c)}
> '
mawk: line 8: function gensub never defined
mawk: line 8: function gensub never defined 
```

gawk（作品）：

```
$ find -not -name . | gawk '{
>     gsub( /[[:punct:]]/, "\\\\&" ); 
>     c = $0; 
>     gsub( /\//, "_", c ); 
>     system( "echo mv -v " $0 " " c ) }
> '
mv -v ./`[~!($%^_&*){.}\___"`]`1.jpg ._`[~!($%^_&*){.}\___"`]`1.jpg 
```

mawk（不起作用）：

```
$ find -not -name . | mawk '{
>     gsub( /[[:punct:]]/, "\\\\&" ); 
>     c = $0; 
>     gsub( /\//, "_", c ); 
>     system( "echo mv -v " $0 " " c ) }
> '
/bin/sh: Syntax error: word unexpected (expecting ")") 
```

我正在使用 Ubuntu 10.10 并且我已经安装了“mawk”。

如何在“mawk”上做到这一点？

**编辑 - 1：**

在另一个论坛上，我得到了 mawk 的解决方案。

```
find $PWD -name "*.jpg" | mawk 'a=$0{gsub("/", "_")}{system("mv -v '"'"'" a "'"'"' '"'"'" $0 "'"'"'")}' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T08:58:34.917

一种使用方式`GNU awk`。我在执行`mv`命令之前转义了所有标点符号。

```
find -not -name . | awk '{ 
    c=$0; 
    gsub( "/", "_", c ); 
    c = gensub( /([[:punct:]])/, "\\\\&", "g", c ); 
    $0 = gensub( /([[:punct:]])/, "\\\\&", "g", $0 ); 
    system("mv -v " $0 " " c)}
' 
```

* * *

**更新**以添加`awk`兼容命令：

```
find -not -name . | awk '{
    gsub( /[[:punct:]]/, "\\\\&" ); 
    c = $0; 
    gsub( /\//, "_", c ); 
    system( "mv -v " $0 " " c ) }
' 
```

# postgresql - 存储日志，nodeJS postgreSQL vs noSQL

> ID：10409661
> 
> 赞同：2
> 
> 时间：2012-05-02T07:45:51.070
> 
> 标签：postgresql, node.js, nosql, logging

我的 node.js 应用程序正在生成大量文本日志（每位用户每天 100 条）。我每天有 10k 活跃用户，每天大约有 100k 日志供我的应用程序存储。格式化如下：

```
time | log_type_id | action_id | message | user_ip 
```

无法存档。大多数日志记录数据必须可供其用户显示。

问题是存储日志最快、最有效的磁盘空间和性能明智的方式是什么？

额外的问题是什么是排序、分析所有这些数据的最佳方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T09:52:51.383

> 问题是存储日志最快、最有效的磁盘空间和性能明智的方式是什么？

最快、最有效的日志存储方式？好吧，当然是在顺序写入的文件中......

> 额外的问题是什么是排序、分析所有这些数据的最佳方法？

最好为此使用关系数据库。

这突出了权衡。如果您所做的只是保存日志以供人查看，那么您将使用更少的空间并更快地写入日志文件。另一方面，虽然日志文件非常适合编写信息，但不适合消化和分析信息。一般来说，关系数据库会胜出，即使它们在存储方面或在写入方面的性能方面不那么有效。

# android - 如何导入 android.os.SystemProperties

> ID：10409664
> 
> 赞同：6
> 
> 时间：2012-05-02T07:46:02.620
> 
> 标签：android

我正在尝试使用

```
SystemProperties.get(); 
```

但无法导入谷歌搜索的`android.os.SystemProperties`包位告诉我它是隐藏的，有什么办法解决这个问题吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-24T23:35:40.733

`SystemProperties`是一个隐藏类，仅对平台级代码可用。您可以尝试通过反射访问它，但不建议这样做。

很容易将 Android 的`SystemProperties`类与老式 Java 处理属性的方式混淆，即`java.lang.System.getProperty()`. 请注意，这是两个完全独立的系统。一个重要的区别是 Java 机制仅在给定进程内工作，而 Android`SystemProperties`跨进程工作。

作为应用程序开发人员，虽然您通常不会在 Android 的 Android 中获取基于 Java 的 API `SystemProperties`，但您可以`SystemProperties`在命令行中使用

```
adb shell getprop 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T07:54:11.180

您可以导入**导入android.os.Bundle；**然后您可以使用**System.getProperty("os.name");访问系统属性**

您可以使用 System.getProperty('Property name'); 访问任何属性；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-18T07:12:38.067

将“layoutlib.jar”添加到项目的 Java 构建路径，然后，您可以使用“import android.os.SystemProperties;”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-26T02:41:05.190

如果想获取设备属性，有关操作系统信息，您可以查看[http://developer.android.com/reference/android/os/Build.html](http://developer.android.com/reference/android/os/Build.html)

只需要导入android.os.Build；

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-06-18T14:03:06.853

您可以尝试的一件事是，评论

LOCAL_SDK_VERSION := 当前

在 Android.mk 中。使用这种方式，您可以从应用程序调用隐藏的 API

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2019-05-18T12:02:17.760

一种 hacky 方法是在你的类路径上创建你自己的`SystemProperties`类，以便你的代码编译和工作，然后从你的构建中排除它。如果类然后存在于 android 设备上，它工作正常。我经常在非常特定的情况下这样做，但我不建议在各种版本和设备的商业应用程序中这样做。

您可以将其基于[源代码](https://android.googlesource.com/platform/frameworks/base/+/master/core/java/android/os/SystemProperties.java)类，然后留下您需要的 api。

示例类：

```
package android.os;

public class SystemProperties {

    public static String get(String key) {
        return "";
    }

} 
```

然后，您只需要从 gradle 文件中的 android/sourcesets/main 中排除该类，例如：

```
sourceSets {
    main {
        java {
            exclude 'android/**/*.java'
        }
    }
} 
```

# drupal - 使用 boost 模块时防止在 Drupal 7 中缓存块

> ID：10409667
> 
> 赞同：0
> 
> 时间：2012-05-02T07:46:16.623
> 
> 标签：drupal, caching, adsense

我想将 Boost 模块（[http://drupal.org/project/boost](http://drupal.org/project/boost)）用于运行 adsense 模块的 drupal 7 站点（[http://drupal.org/project/adsense](http://drupal.org/project/adsense)）。此模块允许adsense 收益分享功能，例如，如果收益分享为50%，则作为php 块的adsense 块需要为每个访问者每次运行，并且不应被缓存。现在我想知道，如果我想让 Boost 模块缓存除此块之外的所有其他页面参数，如何防止该块被缓存？我还检查了以下指南，但我无法使用它们。您是否有任何建议能够使用 Boost 模块来缓存页面并拥有一个包含 Drupal 7 的 adsense 广告的动态块？drupal.org/node/583264#whoonline groups.drupal.org/node/24825

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T19:51:20.027

将AJXA 渲染移植到 7.x（在 6.x 中）后，请密切关注 ESI [http://drupal.org/project/esi ，这应该很容易实现。](http://drupal.org/project/esi)

# java - 从 txt 文件中读取数据，尝试匹配正则表达式并将其存储为 JAVA 中的 XML（在 xml 文件中）

> ID：10409668
> 
> 赞同：-2
> 
> 时间：2012-05-02T07:46:19.857
> 
> 标签：java, xml, regex, file

如何在Java中形成正则表达式，以便能够将匹配的数据直接存储为XML？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T07:53:07.970

我会使用包装您的文本文件的 Scanner 类来做到这一点。然后，使用适当的正则表达式创建一个 Pattern 对象。然后，您将能够将 Pattern 对象提供给 Scanner 实例并定位每个目标数据。最后，为了将这些数据保存为 XML，我将使用 JAXB 来限制内存占用，因为您可能事先不知道必须将多少数据保存为 XML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T08:14:33.410

使用类似的东西

```
public CharSequence fromFile(String filename) throws IOException {
        FileInputStream input = new FileInputStream(filename);
        FileChannel channel = input.getChannel();

        // Create a read-only CharBuffer on the file
        ByteBuffer bbuf = channel.map(FileChannel.MapMode.READ_ONLY, 0, (int)channel.size());
        CharBuffer cbuf = Charset.forName("8859_1").newDecoder().decode(bbuf);
        return cbuf;
    } 
```

并比较为：

```
try {
    // Create matcher on file
    Pattern pattern = Pattern.compile("pattern");
    Matcher matcher = pattern.matcher(fromFile("yourFile.txt"));

    // Find all matches
    while (matcher.find()) {
        // Get the matching string
        String match = matcher.group();
    }
} catch (IOException e) {
} 
```

# kohana - Kohana 3.2 ORM 多条记录更新

> ID：10409671
> 
> 赞同：1
> 
> 时间：2012-05-02T07:46:25.323
> 
> 标签：kohana

如何更新 Kohana 3.2 的 ORM 中的多条记录？

例如这个：

```
$menu = ORM::factory('menu');
$menu->where('active','=',1);
$menu->active=2;
$menu->save(); 
```

不起作用，它会插入一条新记录。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T04:08:27.007

如果您不想硬编码表名，可能如下所示

```
DB::update(ORM::factory('menu')->table_name())
->set(array('active' => '2'))
->where('active', '=', '1')
->execute(); 
```

# python - 在线性时间内找到二进制图像中的特定索引？

> ID：10409674
> 
> 赞同：4
> 
> 时间：2012-05-02T07:46:34.800
> 
> 标签：python, image-processing, numpy, boolean, python-imaging-library

我有一个 640x480 二进制图像（0s 和 255s）。图像中有一个白色斑点（几乎是圆形），我想找到斑点的质心（它总是凸的）。本质上，我们正在处理的是一个 2D 布尔矩阵。如果可能的话，我希望运行时是线性的或更好的——这可能吗？

到目前为止的两条思路：

1.  使用`numpy.where()`功能
2.  对每一列和每一行的值求和，然后根据这些数字找到最大值的位置......但是有没有一种快速有效的方法来做到这一点？这可能只是我对 python 比较陌生的一个例子。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T08:57:15.823

此代码将找到任何形状图像的质心。它会准确地找到它`rez = 1`。增加`rez`, 增加网格间距，因此可以大大提高搜索速度，但代价是精度明显下降。如果在范围内已知 blob 的大小，则可以将低`rez`搜索与高`rez`搜索链接起来，从而快速且昂贵地找到答案

```
import Image

def find_centroid_faster(im, rez):
    width, height = im.size
    XX, YY, count = 0, 0, 0
    for x in xrange(0, width, rez):
        for y in xrange(0, height, rez):
            if im.getpixel((x, y)) == 255:
                XX += x
                YY += y
                count += 1
    return XX/count, YY/count 
```

例如，使用下图：

```
im = Image.open('blob.png')
print find_centroid(im, 1)
print find_centroid(im, 20)
#output:
(432, 191)
(430, 190) 
```

使用第一个选项计时`timeit`（即线性时间，`O(n)`）的运行时间为`1.7s`，第二个选项为`0.005s`。

除非您对尺寸和形状有一些限制，否则您最好`O(n)`找到一个确切的答案。**但是**，您可以牺牲准确性来换取速度。上面的代码是`O(n/(rez ** 2))`，这可以是一个巨大的改进。报告结果的准确性为：`± rez / 2`，在每个维度上。

**更新：**

`sega_sai`写了一段很好的`numpy`代码（见下面的帖子）来找到质心。我已经通过使用切片对其进行了修改以利用网格间距。它以与上述相同的方式运行：

```
def find_centroid_faster_numpy(im,rez):
        h, w = im.size
        arr = np.array(im)
        arr_rez = arr[::rez,::rez]
        ygrid, xgrid  = np.mgrid[0:w:rez, 0:h:rez]
        xcen, ycen = xgrid[arr_rez == 255].mean(), ygrid[arr_rez == 255].mean()
        return xcen, ycen 
```

`timeit`以下是这两个函数在一系列值上的图形结果`rez`：

![在此处输入图像描述](../Images/819bd7ecebcd40750959b0b22df3710f.png)

它是一个日志图，因此它真正说明了结合这两种方法的优势。

这是我用于测试的图像：

![在此处输入图像描述](../Images/485cf8ddb9bc9ca16b00dd247435660f.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T08:03:44.470

质心坐标是点坐标的算术平均值。如果你想要线性解决方案，只需逐个像素地计算每个坐标的平均值，其中像素为白色，这就是质心。

在一般情况下，你可能没有办法让它比线性更好，但是，如果你的圆形对象比图像小得多，你可以通过首先搜索它来加速它（采样一些随机像素，或者像素网格，如果您知道 blob 足够大），然后使用 BFS 或 DFS 找到所有白点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-02T16:59:04.147

这段代码：

```
import Image, numpy as np
def getBlobCenter(imname):
        im = Image.open(imname)
        w, h = im.size
        arr = np.array(im)
        xgrid, ygrid = np.mgrid[0:w, 0:h]
        xcen, ycen = xgrid[arr == 255].mean(), ygrid[arr == 255].mean()
        return xcen, ycen 
```

fraxel 提供的 640x480 图片需要 10 毫秒

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-02T07:50:30.707

根据你的 blob 的大小，我会说大幅降低图像的分辨率可能会达到你想要的效果。

将其降低到 1/10 分辨率，找到一个白色像素，然后您就可以准确了解在哪里搜索质心。

# performance - 创建和慢表示大量 TLabel 运行时

> ID：10409677
> 
> 赞同：1
> 
> 时间：2012-05-02T07:46:38.917
> 
> 标签：performance, delphi, runtime, delphi-xe2

在我的应用程序中，我使用`TLabel`对象运行时。

有一个问题：代表 20 个标签需要很长时间（大约 1-2 秒）。

父组件上的 DoubleBuffered 没有帮助。`Application.ProcessMessages`只允许查看创建过程，而不是查看冻结的窗口。

```
// creating a labels in loop 
aLabel:=TLabel.Create(scrlbx);
labels.Add(aLabel); // TList for managing.
with aLabel do begin
Left:=pointLeft;
    Top:=pointTop;
    Caption:='title';
    parent:=scrlbx; //TScrollBox
end;
pointTop:=pointTop+20; 
```

将父级分配到另一个循环后会产生一些效果，但不能解决问题。

```
for I := 0 to labels.Count-1 do begin
    TLabel(labels[i]).Parent:= scrlbx;
end; 
```

禁用和启用`TScrollBox.Visible`before 和 aftel 循环无效。

PS：创建对象不需要时间。瓶颈是父母分配。

更新：大量意味着大约 500 件物品。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T11:00:16.573

使用`ScrollBox.DisableAlign`和`.EnabledAlign`。

```
procedure TForm1.CreateLabels2;
var
  I: Integer;
  ALabel: TLabel;
  ATop: Integer;
begin
  ATop := 0;
  ScrollBox2.DisableAlign;
  for I := 0 to 2000 do
  begin
    ALabel := TLabel.Create(ScrollBox2);
    FLabels.Add(ALabel);
    with ALabel do
    begin
      Caption := 'Title';
      SetBounds(0, ATop, Width, Height);
      Parent := ScrollBox2;
    end;
    Inc(ATop, 20);
  end;
  ScrollBox2.EnableAlign;
end; 
```

![在此处输入图像描述](../Images/8106a77ce23d5689b6c53a8178d79850.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T08:35:29.983

如果您只是创建 20 `TLabel`，添加 an`Application.Processmessages`不是一个好主意，因为它会重新绘制它以立即显示新添加的组件...

使用常规应用程序，生成 2000 只需要不到 1 秒的时间`TLabel`……如果我设置自定义样式，则需要更长的时间……也许，这是你的问题……

因此，为了快速生成一代，我这样做了：

```
uses ...,  System.StrUtils, System.Diagnostics, Vcl.Themes, Vcl.Styles;

procedure TForm3.GenerateLabels(bNoStyle: Boolean);
var
  iLoop, iMax: Integer;
  aLabel     : TLabel;
  pointLeft  : Integer;
  pointTop   : Integer;
  timeSpent  : TStopwatch;
begin
  iMax      := 2000;
  pointLeft :=  3;
  pointTop  :=  3;
  timeSpent := TStopwatch.StartNew;     // how long does it take
  if bNoStyle then
    TStyleManager.TrySetStyle('Windows'); // = no style
  for iLoop := 1 to iMax do
  begin
    Application.ProcessMessages;
    // creating a labels in loop
    aLabel:=TLabel.Create(Self);
    labels.Add(aLabel); // TList for managing.
    with aLabel do
    begin
      Left    := pointLeft;
      Top     := pointTop;
      Caption := 'title';
      parent  := scrlbx1; //TScrollBox
    end;
    pointTop  := pointTop + 20;
  end;
  if bNoStyle then
    TStyleManager.TrySetStyle('Carbon');  // previous style
  labels[0].Caption := IfThen(bNoStyle, 'No style', 'Style');
  labels[1].Caption := IntToStr(timeSpent.ElapsedMilliseconds) + 'ms';   // display the spent time
  labels[2].Caption := IntToStr(labels.Count);
  timeSpent.Stop;
end; 
```

![有格调](../Images/9b6ec0a2ead814e3deeaa1ede07f45c1.png) ![如果我停用样式](../Images/4c528c3404f348c3b0e2574812a84d58.png)

# sql-server-2008 - 如何导致超时

> ID：10409679
> 
> 赞同：1
> 
> 时间：2012-05-02T07:46:56.960
> 
> 标签：sql-server-2008, c++builder, devart, c++builder-6

我们正在调查超时问题，并希望将其复制为初始测试的一部分。

我是 Devart、Borland C++ Builder 6 和 SQL Server 的新手，不确定所需的语法。我正在寻找示例代码来执行一个查询或一系列查询以生成无限期延迟，该延迟将超时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T08:00:17.583

假设你想要一个数据库命令超时，你可以执行 SQL 命令：

```
WAITFOR DELAY 'hh:mm:ss' 
```

将 hh:mm:ss 设置为比应用程序的命令超时更长的时间段

# c# - 在 Windows 窗体应用程序中更改字体大小

> ID：10409681
> 
> 赞同：1
> 
> 时间：2012-05-02T07:47:12.800
> 
> 标签：c#, winforms, windows-applications

在下面：

我的 Windows 窗体应用程序具有更改语言的功能，但我的问题是，当我的英文字体应用程序看起来比印地语字体好得多时。

下面是我的印地语和英语应用程序的屏幕截图。

### 印地语字体

![印地语](../Images/688cbe471d8746c89cf341ce72803261.png)

### 英文字体

![英语](../Images/9c35257073dbe8b09f52e6dec8a6b1aa.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T07:56:59.900

不，您不能更改 MessageBox 中的字体大小。MessageBox 字体大小由用户的操作系统定义。

您可以做到这一点的唯一方法是创建您自己的自定义消息框：

> [如何制作自定义消息框](https://stackoverflow.com/questions/3221806/messagebox-show-fonts#3222164)

要更改 Windows 窗体窗体字体，只需使用窗体的**字体属性**：

```
public partial class MainForm : Form
{
    public MainForm()
    {
        InitializeComponent();
        this.Font = new System.Drawing.Font(
                      "Microsoft Sans Serif",
                      24F,
                      System.Drawing.FontStyle.Regular,
                      System.Drawing.GraphicsUnit.Point,
                      ((byte)(0)));
    }
} 
```

将“24F”替换为所需的字体大小。

# javascript - 有没有办法全局获取脚本文件？

> ID：10409682
> 
> 赞同：0
> 
> 时间：2012-05-02T07:47:14.843
> 
> 标签：javascript, asp.net, master-pages, global

我的 Web 应用程序中有 30 个**.aspx**页面。每个页面都需要一个相同的脚本文件，比如**myscript.js**

我想知道有没有办法为所有 30 页全局调用这个文件？我不想使用**MasterPage**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T08:01:47.967

你可以做一个基类，让所有的页面都继承这个基类，然后让基类在页面中添加脚本行。像这样的东西：

```
public class BasePage : System.Web.UI.Page
{
  protected override OnLoad(EventArgs e)
  {
    base.OnLoad(e);
    // add javascript to page here
  }
}

public class MyWebPage1 : BasePage
{
}

public class MyWebPage2 : BasePage
{
}

public class MyWebPage3 : BasePage
{
} 
```

# mysql - ActiveRecord : 删除重复记录

> ID：10409683
> 
> 赞同：0
> 
> 时间：2012-05-02T07:47:15.240
> 
> 标签：mysql, ruby-on-rails-3, activerecord, sqlite, rake-task

如果在特定日期有多条记录，我想删除当天除最新记录之外的所有记录。例如，在下表中，id 为 9、10、12 的记录具有相同的日期。因此，应删除 9 和 10，因为 id 为 12 的记录具有最新日期。

```
id      date
1   2012-04-25 00:00:00.000000
2   2012-04-26 00:00:00.000000
3   2012-04-23 00:00:00.000000
4   2012-04-24 00:00:00.000000
5   2012-05-01 00:00:00.000000
6   2012-05-02 00:00:00.000000
7   2012-05-03 00:00:00.000000
8   2012-05-04 00:00:00.000000
9   2012-04-30 00:30:00.000000
10  2012-04-30 18:00:00.000000
11  2012-04-29 00:00:00.000000
12  2012-04-30 18:40:00.000000
13  2012-05-05 00:00:00.000000
14  2012-05-05 09:31:31.000000 
```

这是删除重复项的（脏）rake 任务

```
task :remove_duplicate do
  Rake::Task["remove_duplicate"].invoke
end

task :remove_duplicate => :environment do
  weights = Weight.count(:group => "DATE(date)", :having => "COUNT(id) > 1")
  weights_to_delete = []
  weights.each do |weight|

    start_date = weight[0].to_date.beginning_of_day
    end_date = weight[0].to_date.end_of_day
    day_weights = Weight.where("date >= ? and date <= ?", start_date, end_date).order(:date)
    day_weights[0..-2].each do |weight|
      weights_to_delete.push weight.id
    end
  end
  Weight.delete(weights_to_delete)
end 
```

虽然我能够按照我的解释删除记录，但我对我采取的方法并不满意。请指导我删除特定日期的重复记录，以更好地使用 ActiveRecord API 保持最新记录。

谢谢，阿米特帕特尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T01:10:36.297

这种方法可能很慢，所以我不推荐它，除非你定期运行它。

```
Weight.all.each do |weight|
  Weight.order("id desc").where(date: weight.date).all.drop(1).each { |w| w.delete }
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T00:31:12.107

尝试这个：

```
latest_daily_weights = (Weight.maximum :date, :group => 'DATE(date)').values
weights_table = Arel::Table.new(:weights)
earlier_daily_weights = Weight.where(weights_table[:date].not_in latest_daily_weights)
earlier_daily_weights.delete_all 
```

信用：

[如何从 Rails 中的查询中排除 id 数组（使用 ActiveRecord）？](https://stackoverflow.com/questions/4581376/how-to-exclude-an-array-of-ids-from-query-in-rails-using-activerecord)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-01T07:14:51.207

您可以尝试此 sql 查询，以删除同一日期但该日期最新的记录

```
DELETE FROM weights USING weights weight WHERE (CAST(weights.date as Date) = CAST(weight.date as Date) AND weights.id < weight.id); 
```

# c# - 移动设备上多平台的 WCF 安全实现

> ID：10409686
> 
> 赞同：1
> 
> 时间：2012-05-02T07:47:20.227
> 
> 标签：c#, wcf, security, rest, mobile

我们目前有一大堆暴露在互联网上的 WCF REST 服务。多个移动设备使用这些服务（iOS、Android、Symbian 等）以及一系列跨平台解决方案。

我们做的第一件事就是确保一切都通过 SSL 运行。但是，我需要确保调用这些 REST 服务的设备经过身份验证才能执行此操作。例如，如果我有一个 RetrieveBalance POST，它获取身体中人员的 ID 号，任何人都可以使用其他 ID 号调用此方法并获取他们的余额。

在（例如）检索该人的余额之前，我需要每次调用基本上都对用户名和密码/密码进行身份验证。

WCF REST 中有没有一种方法可以在各种不同的平台上执行类似的操作？我的想法是在标头中添加用户名和密码，并使用以下方法在服务器上获取它：

```
 var username = WebOperationContext.Current.IncomingRequest.Headers["Username"];
 var pwd = WebOperationContext.Current.IncomingRequest.Headers["Password"]; 
```

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T19:03:13.170

如果您正在使用，`<security mode="Transport">`则使用自定义用户/通行证验证器（不需要 IIS 模块）实现基本用户/通行证凭证类型。如果您不能这样做，最简单的方法是将用户名和密码参数添加到您的每个服务方法中，并在每次调用时验证它们。粗鲁但应该有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T08:52:26.580

如果您使用的是 HTTPS，则可以使用[基本身份验证](http://msdn.microsoft.com/en-us/library/ms733775.aspx)- 如果您在 IIS 中托管服务，则进行自定义用户名和密码验证（默认实现需要 Windows 帐户）会有点棘手，但可以通过[自定义模块](http://custombasicauth.codeplex.com/)。自托管服务不存在此问题，因为您可以实现[自定义用户名密码验证器](http://msdn.microsoft.com/en-us/library/aa702565.aspx)。

# asp.net - 目录和子目录的 ASP.NET URL 重写

> ID：10409687
> 
> 赞同：0
> 
> 时间：2012-05-02T07:47:20.353
> 
> 标签：asp.net, url-rewriting

在 ASP.NET 的 web.config 文件中 URL Rewrite rule true

```
 <rule source="/somedirectory/" destination="/default.aspx" />

         <rule source="/somedirectory/another/" destination="/page01.aspx" /> 
```

第一个工作正常，但第二个似乎不起作用

我怎么能解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T08:12:35.563

尝试使用 UrlMappings：

```
 <system.web>
     <urlMappings enabled="true">
         <add url="~/somedirectory/" mappedUrl="~/default.aspx"/>
         <add url="~/somedirectory/another/" mappedUrl="~/page01.aspx"/>
    </urlMappings>
 </system.web> 
```

确保在 url 和 mappedUrl 属性中使用“~”。

# jsp - 在包含标签中使用脚本

> ID：10409696
> 
> 赞同：0
> 
> 时间：2012-05-02T07:48:33.340
> 
> 标签：jsp

我想执行一些操作，例如

```
<%    Locale locale = request.getLocale();    %>
<%@include file="/layouts/common/modal_body.<%="_"+locale%>jsp"%> 
```

基本上我`locale`在 scriplet 中有一个变量，并想用它来指向该语言环境的一些 jsp，但不知道如何实现它任何想法请。是否允许在另一个 scriplet 中使用 scriplet？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T08:44:03.860

`@include file`被称为静态包含，它就像一个内联包含，即文件的内容将在翻译阶段被包含（记住`#include`）`C`。它不能有动态文件名。

为此，您必须使用`<jsp:include page=”fileName” />`

语法是

```
<jsp:include page="{relativeURL | <%= expression %>}"> 
```

所以，

```
<%    Locale locale = request.getLocale();    
      String myPage = "/layouts/common/modal_body._"+locale+".jsp" ;
%>
<jsp:include page="<%= myPage %>"> 
```

# c# - 在PostgreSQL中生成将IPAddress映射为INET类型的表？

> ID：10409700
> 
> 赞同：12
> 
> 时间：2012-05-02T07:49:03.593
> 
> 标签：c#, nhibernate, postgresql, fluent-nhibernate

`IPAddress`我得到了一个将对象字段映射到数据库的映射。

PostgreSQL 中有`inet`适合此的类型，但在我的情况下，它`bytea`在生成模式时使用类型。

有没有办法强制为该列生成的模式类型`inet`实际上在数据库中？

我也碰巧对复合 ID 有这个要求（需要哪个）

```
CompositeId()
.KeyProperty(x => x.Date, "for_date")
.KeyProperty(x => x.Address, var => var.ColumnName("ipaddress")); 
```

您不能真正在关键属性部分使用 CustomSqlType。

我也尝试过使用

```
public class IPAddressPropertyConvention : IPropertyConvention
{
    public void Apply(IPropertyInstance instance)
    {
        if (instance.Property.PropertyType == typeof(IPAddress))
            instance.CustomSqlType("inet");
    }
} 
```

但我得到关于无效属性约定的例外

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T06:48:16.210

```
Map(x => x.IPAddress)
    .CustomSqlType("inet")
    .CustomType<IPAddressToInetUserType>();  // maybe needed, you should check 
```

# soap - 使用 Axis 工具包为 Rally 的 SOAP 接口生成 C++ 存根

> ID：10409704
> 
> 赞同：1
> 
> 时间：2012-05-02T07:49:19.710
> 
> 标签：soap, axis, rally

我正在尝试从我的 C++ 应用程序中使用 Rally 的 SOAP 接口。因此，我使用 Axis 1.4 工具包生成了 C++ 存根。不幸的是，生成的文件包含编译错误。我手动修复了这些错误，存根现在可以编译。尽管如此，我的印象是在代码生成过程中出现了更多问题。例如，我没有在 .NET 示例中使用的名为 RallyServiceService 的类：

```
// create a service object
RallyServiceService service = new RallyServiceService();

// set the service URL
service.Url = "https://rally1.rallydev.com/slm/webservice/1.32/RallyService";

... 
```

有没有人尝试过从 C++ 访问 Rally 的 SOAP 接口？任何帮助如何开始建立连接表示赞赏。

谢谢，迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T13:21:15.143

虽然它本身不是一个解决方案，但我想我会总结一下我通过支持案例与迈克尔交换的对话：

当使用 WSDL2Java 生成 Java 存根时，您会得到四个与 RallyServiceService 相关的类，它们是特定于语言的，因为它们包括 RPC 绑定、网络连接类等

Axis C++ WSDL2Ws 工具无法制定 RallyServiceService 类可能与以下事实有关：至少在 java 中，RallyServiceService 是用于扩展 javax.xml.rpc.Service 的接口。Rally WSDL 显示了接口定义：

```
 <wsdl:service name="RallyServiceService">
  <wsdl:port binding="impl:RallyServiceSoapBinding" name="RallyService">
  <wsdlsoap:address location="https://rally1.rallydev.com/slm/webservice/1.31/rallyservice" />
  </wsdl:port>
  </wsdl:service> 
```

其中 impl: 关键字暗示 RallyServiceSoapBinding 类承诺实现 RallyServiceService 中定义的方法。

当谈到 C++ 时，我远远超出了我的联盟，但我认为 C++ 在技术上没有接口构造作为扩展类的一种方式 - 接口更像是 Java/C# 语言构造。这可能意味着 Rally WSDL 的这一方面是特定于 Java/C# 的实现，或者至少不能使用 Axis WSDL2Ws 工具轻松转换为 C++ 构造。

可以编写自定义 C++ 版本的 RallyServiceService 及其相关类，但可能有点棘手。如果您取得了一些成功 - 请在此处分享结果，因为可能有其他 Rally 客户对类似功能感兴趣。

# excel - 循环遍历行以复制和粘贴特殊

> ID：10409705
> 
> 赞同：0
> 
> 时间：2012-05-02T07:49:22.860
> 
> 标签：excel, vba, for-loop

电子表格有这样的数据：

```
      ABCDE
2 20120425 09:55:00 101 99 102 100.50   
3 20120425 09:55:00 101 102 98 101.50

```

我想在同一张纸上这样做：

```
      H       
2 101    
3 99   
4 102  
5 100.50

```

复制范围 B2:E2 然后选择 H2 并粘贴特殊（它将粘贴在 H2、H3、H4、H5 上）。然后重复 B3 的任务：E3 复制范围并将特殊粘贴到 H6 上。

我记录了宏，但任务必须在近 5000 行上重复。

记录代码

```
Sub Macro9()
'
' Macro9 Macro
'

'
    Range("D1:G1").Select
    Selection.Copy
    Range("L1:L4").Select
    Selection.PasteSpecial Paste:=xlPasteAll, Operation:=xlNone, SkipBlanks:= _
        False, Transpose:=True
    Range("D2:G2").Select
    Selection.Copy
    Range("L5:L8").Select
    Selection.PasteSpecial Paste:=xlPasteAll, Operation:=xlNone, SkipBlanks:= _
        False, Transpose:=True
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T17:56:18.353

不知何故想出了答案。

```
Sub alex4()

Dim k As Integer, i As Integer, lngRows As Integer    

lngRows = Range("A1").CurrentRegion.Rows.Count    

For k = 1 To (lngRows * 4)         

    For i = 1 To lngRows    

        k = k + 4   

        Range(Cells(i, 4), Cells(i, 7)).Select    

        Selection.Copy    

        Range(Cells(k, 12), Cells(k + 3, 12)).Select    

        Selection.PasteSpecial Paste:=xlPasteAll, Operation:=xlNone, SkipBlanks:= _
          False, Transpose:=True    

    Next i    

Next k      

End Sub 
```

# ios - UITableView 标题视图调整大小

> ID：10409706
> 
> 赞同：1
> 
> 时间：2012-05-02T07:49:23.990
> 
> 标签：ios, cocoa-touch, uitableview, uisearchbar

我已将 UISearchBar 放入 uitableview headerview 并在 viewcontroller viewdidLoad 方法中将 headerview 高度设置为 0 并隐藏搜索栏，并希望在触摸按钮时显示搜索栏，在触摸处理程序中我恢复 headerview 高度并显示 uisearchbar，但搜索栏覆盖 tableview 的第一行。有什么办法可以避免重叠？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T07:52:54.480

将 headerview 的 clipsToBounds 属性设置为 YES 即可。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T08:34:06.583

在 headerView 中将 clipsToBounds 更改为 YES。

# javascript - 为什么我不能将 DOM 事件附加到我的 Google 地图？

> ID：10409712
> 
> 赞同：0
> 
> 时间：2012-05-02T07:49:53.677
> 
> 标签：javascript, google-maps, dom

我这里有一个模型

[http://jsfiddle.net/tF3Yq/1/](http://jsfiddle.net/tF3Yq/1/)

我已经`addDomListener`像这样使用了以下功能

```
google.maps.event.addDomListener(document.getElementById("my-button", 'click', function(e) {
        alert('clicked');
    })); 
```

但点击似乎没有做任何事情

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T09:14:56.087

它一定要是 ：

```
google.maps.event.addDomListener(document.getElementById("my-button"), 'click', function(e) {
        alert('clicked');
    }); 
```

...代替：

```
google.maps.event.addDomListener(document.getElementById("my-button", 'click', function(e) {
        alert('clicked');
    })); 
```

使用您当前的代码，您将参数 event-type 和回调传递给`getElementById()`而不是传递给`google.maps.event`

# sql-server-2000 - SQL Server 2008 R2 在兼容模式下运行 80。我可以使用哪些功能？

> ID：10409714
> 
> 赞同：0
> 
> 时间：2012-05-02T07:50:03.803
> 
> 标签：sql-server-2000, sql-server-2008-r2, compatibility-mode, dmv

我们有 SQL Server 2008 R2 在兼容模式 80 (2000) 下运行，因为我们使用了许多已停止使用的功能。最初我以为我只会使用 2000 的功能，但令人惊讶的是，我显示了 INFORMATION_SCHEMA，我认为这是超集案例。我们可以访问 2000、2005、2008 和 R2 的所有功能，但最近当我在使用 DMV/DMF 时，我试图将 sql_handle 传递给 sys.dm_exec_sql_text，但它不起作用。一些 googe/hit and run 告诉我我需要更改兼容模式，因为这在兼容模式 80 下不起作用。那么当我们在兼容模式 80 (2000) 中使用 2008 r2 时，我们可以访问哪些功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T08:47:05.077

您需要更新 sql server 2000 中使用的外连接语法。

此外，非常重要的是：SQL Server 2012 根本不支持兼容级别 80，因此您需要先修复您的程序，然后才能升级。

# ruby-on-rails - 在迁移中更新字段是个好主意吗？

> ID：10409715
> 
> 赞同：1
> 
> 时间：2012-05-02T07:50:13.320
> 
> 标签：ruby-on-rails, migration

我需要一个额外的字段来为我的`Profile`模型进行自定义排序。所以我需要在添加列时对其进行初始化。

现在我看到了两种方法来做到这一点：

1.  通过 rake 任务或在生产控制台迁移后更新字段。
2.  写下类似的东西

    ```
    Profile.all.each { |p| p.update_attribute :sorted_at, p.created_at } 
    ```

    在单独的迁移文件中。

第二个解决方案是好是坏？并且可能有比这些更好的第三种解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T07:54:49.090

我的意见是更新迁移中的字段。

优点：

*   这就是迁移的目的（？）
*   不再有任务的麻烦。因为人们很容易忘记运行任务，并且在出现错误或异常的情况下，您只有一个地方可以查看，而不是 2 个。

缺点：

*   没有我能想到的

此外，使用`update_all`而不是循环遍历每条记录并进行更新是一个好主意，因为性能明显提高。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T10:25:20.547

有一个专门为更新数据而设计的 db:seed rake 任务。通过是迁移应该只用于模式更改。

但是，在尝试将数据更改排除在迁移之外之后，我再次得出结论，迁移对他们来说是一个好地方。毕竟，您想要的是更新只运行一次，并且迁移会跟踪哪些迁移已经运行以及哪些需要运行，因此它们只运行一次。

我的经验法则是：

1\. 如果是初始数据，则将其放入种子.rb 脚本中，该初始数据必须在数据库中才能运行应用程序。也就是说，它是交付给客户的初始状态的一部分。没有用户界面。如果数据后来被删除，则永远不会有有效的状态。一个例子是工作流程步骤。

我有 seed.rb 为每个表调用其他脚本，例如 seed_workflow_steps.rb。此外，即使数据在表中，种子脚本也应编写为运行。它们不应该用于存在用户可能有意删除记录的用户界面的数据，因为如果再次运行种子任务，它会将其放回原处并撤消用户的更改。

2\. 您可以将其放入迁移中，但前提是它是用于创建将存储它的表或字段的迁移。换句话说，您正在将新表或列初始化为初始状态，因为它是初始交付，因此该功能第一次出现时它不是空白的。这样做的好处是向下迁移将删除表或字段，并注意撤消数据的填充。

3\. 否则，将其放入 rake 任务或脚本中，并将任务或脚本作为部署步骤运行。一个好的完整的开发过程应该有一种方法让开发人员记录这些额外的部署步骤。

# javascript - 如何使用 POST [不使用 jquery] 从 AJAX javascript 返回结果？

> ID：10409716
> 
> 赞同：0
> 
> 时间：2012-05-02T07:50:13.907
> 
> 标签：javascript, ajax

```
function AJAX(url,data)
{
    var xmlhttp;
    if (window.XMLHttpRequest)
    {// code for IE7+, Firefox, Chrome, Opera, Safari
    xmlhttp=new XMLHttpRequest();
    }
    else
    {// code for IE6, IE5
    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.onreadystatechange=function()
    {
        if (xmlhttp.readyState==4)
        {
            return xmlhttp.responseText;
        }
    }
    xmlhttp.open("POST",url,true);
    xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
    xmlhttp.send(data);
}

var a = AJAX('log.php','username=Leonard&password=asjdklaslkjdalskjdlaksjda'); 
```

当函数返回时，它给了我“未定义”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T07:52:00.937

您的函数是异步的 - 它在返回之前不会等待 AJAX 调用完成，因此不会返回任何结果。

尝试这个：

```
function AJAX(url, data, callback, ctx)
{
    var xmlhttp;
    if (window.XMLHttpRequest)
    {// code for IE7+, Firefox, Chrome, Opera, Safari
    xmlhttp=new XMLHttpRequest();
    }
    else
    {// code for IE6, IE5
    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.onreadystatechange=function()
    {
        if (xmlhttp.readyState == 4)
        {
            callback.call(ctx, xmlhttp.responseText);
        }
    }
    xmlhttp.open("POST",url,true);
    xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
    xmlhttp.send(data);
} 
```

请注意您现在必须提供一个“回调函数”，该函数将在 AJAX 完成时被调用：

```
AJAX('log.php','username=Leonard&password=asjdklaslkjdalskjdlaksjda',
    function(result) {
        // do stuff with result
    }
); 
```

**编辑**我添加的`ctx`参数是可选的 - 这样您就可以设置`this`调用回调时的内容。如果回调是对象的方法而不是独立函数，这（不是双关语）将很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T07:54:21.073

当你 时`returns xmlhttp.responseText`，你将返回该`onreadystatechange`物业。不是很有用，是吗？

相反，使用异步行为来执行以下操作：

```
function AJAX( url, data, callback ) {

    // Your stuff

    xmlhttp.onreadystatechange = function() {
        if ( xmlhttp.readyState === 4 ) {
            callback( xmlhttp.responseText )
        }
    }

    // Your other stuff

} 
```

然后，您可以像这样使用它：

```
AJAX( url, data, function( responseText ) {
    // use responseText there
} ) 
```

# chef-infra - Chef 和 aws 食谱错误

> ID：10409721
> 
> 赞同：1
> 
> 时间：2012-05-02T07:50:20.410
> 
> 标签：chef-infra

一旦我将[aws 食谱](http://community.opscode.com/cookbooks/aws)添加到我的厨师单独部署中，我就收到了这个错误：

```
FATAL: NameError: wrong constant name Aws.ElasticIp 
```

这里是堆栈跟踪：

```
NameError: wrong constant name Aws.ElasticIp
/usr/local/lib/ruby/gems/1.9.1/gems/chef-0.10.8/lib/chef/provider.rb:89:in `const_defined?'
/usr/local/lib/ruby/gems/1.9.1/gems/chef-0.10.8/lib/chef/provider.rb:89:in `build_from_file'
/usr/local/lib/ruby/gems/1.9.1/gems/chef-0.10.8/lib/chef/run_context.rb:89:in `block in load_lwrp_providers'
/usr/local/lib/ruby/gems/1.9.1/gems/chef-0.10.8/lib/chef/run_context.rb:120:in `call'
/usr/local/lib/ruby/gems/1.9.1/gems/chef-0.10.8/lib/chef/run_context.rb:120:in `block (2 levels) in foreach_cookbook_load_segment'
/usr/local/lib/ruby/gems/1.9.1/gems/chef-0.10.8/lib/chef/run_context.rb:119:in `each'
/usr/local/lib/ruby/gems/1.9.1/gems/chef-0.10.8/lib/chef/run_context.rb:119:in `block in foreach_cookbook_load_segment'
/usr/local/lib/ruby/gems/1.9.1/gems/chef-0.10.8/lib/chef/run_context.rb:117:in `each'
/usr/local/lib/ruby/gems/1.9.1/gems/chef-0.10.8/lib/chef/run_context.rb:117:in `foreach_cookbook_load_segment'
/usr/local/lib/ruby/gems/1.9.1/gems/chef-0.10.8/lib/chef/run_context.rb:87:in `load_lwrp_providers'
/usr/local/lib/ruby/gems/1.9.1/gems/chef-0.10.8/lib/chef/run_context.rb:58:in `load'
/usr/local/lib/ruby/gems/1.9.1/gems/chef-0.10.8/lib/chef/client.rb:195:in `setup_run_context'
/usr/local/lib/ruby/gems/1.9.1/gems/chef-0.10.8/lib/chef/client.rb:159:in `run'
/usr/local/lib/ruby/gems/1.9.1/gems/chef-0.10.8/lib/chef/application/solo.rb:192:in `block in run_application'
/usr/local/lib/ruby/gems/1.9.1/gems/chef-0.10.8/lib/chef/application/solo.rb:183:in `loop'
/usr/local/lib/ruby/gems/1.9.1/gems/chef-0.10.8/lib/chef/application/solo.rb:183:in `run_application'
/usr/local/lib/ruby/gems/1.9.1/gems/chef-0.10.8/lib/chef/application.rb:67:in `run'
/usr/local/lib/ruby/gems/1.9.1/gems/chef-0.10.8/bin/chef-solo:25:in `<top (required)>'
/usr/local/bin/chef-solo:19:in `load'
/usr/local/bin/chef-solo:19:in `<main>' 
```

即使我不包括`recipe[aws]`部署。其他食谱，如 mysql、redis、rvm、数据库工作正常。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T11:18:42.193

我解决了从上传到服务器的代码中删除隐藏文件（mac os 自动生成的文件）的问题。使用 COPYFILE_DISABLE=true 对文件夹进行焦油处理让我解决问题。

# java - java中使用DatagramChannel发送视频

> ID：10409723
> 
> 赞同：0
> 
> 时间：2012-05-02T07:50:35.143
> 
> 标签：java, video, stream

我正在尝试实现一个简单的服务器-客户端模型来流式传输视频。在服务器上播放的视频也应该在客户端播放。我在网上搜索，发现java中的DatagramChannel适合这个。如何使用 DatagramChannel 发送视频？或者有没有其他解决方案？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T08:01:43.490

您可以使用现成的解决方案，例如 Red5 服务器或 FFMPEG-Java

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T08:02:41.457

我不会使用 DatagramChannel 作为，

*   它不适合通过互联网广播，
*   它不是一个可靠的协议。它可以变得可靠，但这并不容易。

相反，我会使用 TCP。有许多库可以帮助解决这些问题，包括 Netty 和 Mina。

# postgresql - 数据库设计父子表与多表

> ID：10409725
> 
> 赞同：3
> 
> 时间：2012-05-02T07:50:36.900
> 
> 标签：postgresql, database-design, multiple-tables, self-reference

我正在尝试为 country-state-city-head 创建父子关系。我考虑两种方法 - 1）创建一个表 -

```
 PK| 姓名 | 类型 | 父母
  1 | 美国 | 国家 | 空值
  2 | 英国 | 国家 | 空值
  3 | 加利福尼亚 | 状态 | 1
  4 | 洛杉矶 | 城市| 3
  5 | 肯特 | 状态 | 2
  6 | 奥巴马 | 总统 | 1
  7 | 喀麦隆 | 下午 | 2

```

该表的主键将引用另一个表，该表将记录州/城市/国家在一段时间内的人口增长。

2）第二种方法是为国家、州、头和城市创建多个表，然后使用外键引用进行关系。然后每个表（城市/州/国家）的主键将引用人口增长表

方法 1 比方法 2 有什么好处吗？查询是否更快？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T17:01:39.607

方法 1 是一个 EAV 表，并且几乎总是最糟糕的选择，除非您绝对无法提前预测您将需要哪些字段（例如定义您可能希望从各种医学测试中存储的所有各种内容）。对于不会发生变化的地理数据，我会像瘟疫一样避免使用选项 1。它更难查询，将成为阻塞争用的来源，通常只是一个坏主意。

请记住，在以关系方式设计时，关系数据库工作得最好，不要在定义数据库表时使用面向对象的思维。如果你真的，真的需要 EAV 功能，至少在一个为这类事情更优化的 noSQl 数据库中做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T16:53:25.313

如果您的结构是**刚性**的，请使用方法 2。它可以让您精确定义参照完整性，因此您永远不会遇到（比如说）一个州是该国的父级（而不是相反）的情况。

另一方面，如果您期望**动态**添加其他类型的“节点”（例如，州下的地区或市）和其他类型的关系（例如，某些国家可能根本没有州，因此城市应该直接“隶属于”国家） ，那么方法 1 增加的灵活性可能证明参照完整性的“脆弱性”是合理的。

如果做得好，这两种方法在性能方面应该表现得非常相似。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T08:15:22.240

我认为这取决于您还想在数据库中存储什么（如果有的话）。例如，如果您想为其他实体存储特定国家/地区的数据，例如“首都”等，那么我将采用方法 2。但是，如果您需要表示的只是“人口组”，那么 1 似乎很好并且更简单。您的父 id 字段应该是一个外键，即同一张表上父的 pk。我会考虑将 type 作为 Type 表的外键，这样您就可以将其作为数字而不是字符串存储在主表中。只要您的键被索引，我怀疑您会看到性能上有很大差异。

# spring-security - 通过注销使 Spring Security 会话失效

> ID：10409726
> 
> 赞同：3
> 
> 时间：2012-05-02T07:50:43.360
> 
> 标签：spring-security, session-management

只是关于 Spring Security 和会话失效的问题。

当会话被 ConcurrentSessionControlStrategy 无效时，会话会通过调用 removeSessionInformation 方法从 SessionRegistry 中删除，但是当会话因手动注销而无效时，HttpSession 也会无效，但不会调用 SessionRegistry 从那里删除条目。

我已将 HttpSessionEventPublisher 添加为侦听器，该侦听器正在捕获 HttpSessionDestroyedEvent 事件，但再次没有调用 SessionRegistry。

我通过创建自己的 LogoutFilter 实现并添加一个处理程序来手动调用 removeSessionInformation 来解决这个问题，但如果可能的话，我希望能够使用标准的 spring 注释。（注意，我不能使用标准注销标签的 success-handler-ref 字段，因为会话已经失效，所以我无法访问会话 ID）

有什么我在这里遗漏的，还是这只是 Spring 遗漏的东西？

顺便说一下，这是使用 Spring Security 3.1.0。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T20:33:09.827

我有同样的问题。在我的情况下，解决方案是创建`SessionRegistry`一个单独的 spring bean。`ConcurrentSessionControlStrategy`保存指向注册表的链接，因此它可以直接从中删除无效会话。但是`SecurityContextLogoutHandler`使用`session.invalidate()`so `sessionDestroyed`servlet事件是`HttpSessionEventPublisher`由servlet容器提供的，但是当它不是spring bean时不会`HttpSessionDestroyedEvent`发布到Spring上下文。`HttpSessionEventPublisher``SessionRegistry`

此安全配置不起作用：

```
...
SessionRegistry sessionRegistry = new SessionRegistryImpl();
ConcurrentSessionControlStrategy concurrentSessionControlStrategy = new ConcurrentSessionControlStrategy(sessionRegistry);
... 
```

这个工作正常：

```
@Bean
public SessionRegistry sessionRegistry() {
    return new SessionRegistryImpl();
}
...
ConcurrentSessionControlStrategy concurrentSessionControlStrategy = new ConcurrentSessionControlStrategy(sessionRegistry())
... 
```

# php - 使用 PHP 访问 Proficy Historian

> ID：10409729
> 
> 赞同：0
> 
> 时间：2012-05-02T07:50:45.940
> 
> 标签：php, database, historian

我们是两名正在使用 Proficy Historian 数据库存储实时数据的公司实习的大学生。我们的任务是开发一个 Web 应用程序，以一种更有吸引力、更清晰的方式可视化这些数据。这意味着我们需要访问中央数据库来获取这些数据。如前所述，该数据库是在服务器上运行的 Proficy Historian 3.0 数据库。我们发现了一些使用 SDK 或 OLE DB 的结果，但不清楚这是否真的有效，以及这是否有效。我们在 Visual Basic 方面没有任何经验（这似乎是使用 OLE DB 的要求），并且更愿意直接在 PHP 中实现数据查询。您对我们如何最好地实现这一目标有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T19:37:08.430

如果支持 ADO，php 应该可以工作，您可以使用示例查看如何在 VB 中建立 ADO 连接，以了解我们通常使用的 ADO 属性、方法和对象。

这么说，听起来你可能会从与当地代表讨论不同的设计方法中受益，因为有各种优秀的现有客户端工具可以在没有自定义代码的情况下可视化 Historian 数据（例如 Proficy Portal），即使最终编码的解决方案是需要考虑其他替代方案（例如，SQL Reporting Services 可能是另一种选择）。

我还建议升级到 Historian v4.5 的最新版本，因为它可以访问 .Net 客户端访问 API，并且可能为您提供比 3.0 SDK 和 OLEDB 更多的选择。

*   Proficy Historian 产品团队

# javascript - 加载网站时显示旋转轮或进度条

> ID：10409730
> 
> 赞同：5
> 
> 时间：2012-05-02T07:50:57.183
> 
> 标签：javascript, jquery, html

我正在使用名为 jquery-treeview 的 jQuery 插件构建树视图。建立这个树形视图需要很多时间（大约 5-7 秒），我想在页面加载时显示一个纺车或进度条。有谁知道这是怎么做到的吗？我只找到了加载视频或图像的解决方案，它知道必须加载多少数据。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-19T11:16:59.103

试试这个网站：

[http://fgnass.github.com/spin.js/](http://fgnass.github.com/spin.js/)

您可以创建一个您选择的微调器，然后他们会在下面给出如何使用它的示例。

希望有帮助:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T07:54:53.353

您好，请参阅此**演示** [http://jsfiddle.net/hEB7d/](http://jsfiddle.net/hEB7d/) **或** [http://jsfiddle.net/Eh8tU/](http://jsfiddle.net/Eh8tU/)（仅显示图像）

Bruv ，对于进度条，请尝试 twitter bootstrap，**或**轻弹一些代码，我可能会看到对您的帮助。

想法是代码知道您的代码片段何时`on load`以及`on success`将发生，并将图像加载置于该过程之间。

# c# - 从代码中控制 RadioButton DataGridTemplateColumn

> ID：10409744
> 
> 赞同：1
> 
> 时间：2012-05-02T07:52:01.800
> 
> 标签：c#, wpf, wpfdatagrid

我有一个数据网格，其中包含 3 个包含单选按钮的 DataGridTemplateColumns。现在我想通过我后面代码中按钮的单击事件来控制 radioButtons 的“isEnabled”属性：

```
 <DataGrid AutoGenerateColumns="False" Height="300" x:Name="dgEmps"
                RowEditEnding="gridEmps_RowEditEnding" CellEditEnding="gridEmps_CellEditEnding"
              FlowDirection="RightToLeft"  
              SelectionChanged="gridEmps_SelectionChanged">
        <DataGrid.Columns>

            <DataGridTemplateColumn Header="Shift Manager">
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <RadioButton GroupName="{Binding EmployeeId}"
                                     IsChecked="{Binding IsManager, Mode=TwoWay}" x:Name="dgrIsManager"/>
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>
            <DataGridTemplateColumn Header="Waiter" IsReadOnly="True">
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <RadioButton GroupName="{Binding EmployeeId}" 
                                     IsChecked="{Binding IsWaiter, Mode=TwoWay}" x:Name="dgrIsWaiter"/>
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>
            <DataGridTemplateColumn Header="Cook" IsReadOnly="True" x:Name="aaa">
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <RadioButton GroupName="{Binding EmployeeId}" 
                                     IsChecked="{Binding IsCook, Mode=TwoWay}"  x:Name="dgrIsCook"/>
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn> 
```

问题是“IsReadOnly”属性不起作用，我似乎无法从我的代码访问 radioButton 属性（甚至不能通过我在 xaml 中声明的 x:name）。我试过这个： [WPF Toolkit DataGrid SelectionChanged Getting Cell Value](https://stackoverflow.com/questions/2148978/wpf-toolkit-datagrid-selectionchanged-getting-cell-value) 和许多其他教程/博客文章，但无法使其工作。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T18:08:40.973

您无法通过 x:Name 访问 RadioButton，因为它是在 DataTemplate 中定义的，而不是在主内容树中。

而是像这样定义 DataTemplateColumns （基于您的最后一列）：

```
<DataGridTemplateColumn Header="Cook" IsReadOnly="True" x:Name="aaa">
    <DataGridTemplateColumn.CellTemplate>
        <DataTemplate>
            <RadioButton GroupName="{Binding EmployeeId}" 
                         IsChecked="{Binding IsCook, Mode=TwoWay}"  x:Name="dgrIsCook"
                         IsEnabled={Binding IsReadOnly, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type DataGridCell}}, Converter={StaticResource BooleanOppositeConverter}}/>
        </DataTemplate>
    </DataGridTemplateColumn.CellTemplate>
</DataGridTemplateColumn> 
```

然后从后面的代码中将 aaa.IsReadOnly 设置为 true 或 false。此更改应传播到属于此 DataGridColumn 的每个 DataGridCell，然后由于绑定而更改 RadioButton.IsEnabled。

XAML 片段使用 BooleanOppositeConverter，它只是一个反转布尔值的转换器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T16:06:49.587

要确保您的 readiobutton 是 ReadOnly 是设置 IsHitTestVisible

```
<DataGridTemplateColumn ...>
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <RadioButton ....IsHitTestVisible="False"/>             
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn> 
```

# dynamic - Makefile 中依赖项的动态评估

> ID：10409748
> 
> 赞同：4
> 
> 时间：2012-05-02T07:52:28.600
> 
> 标签：dynamic, latex, makefile

我正在为 LaTex 文档编写 Makefile。作为 makefile 的一部分，我只想在相应的 BIB 文件更改或（如果使用参考书目样式）bibliographystyle.bst 文件更改时创建一个 BBL 文件。

为了跟踪文件更改，我使用了 MD5 哈希（我在使用时间戳时遇到了问题）。

我正在尝试使用以下代码从 AUX 文件中检索所需的 BST 文件：

```
# Get the BST dependencies from an AUX file
get-bibstyle = $(foreach bst, $(shell sed -n 's/\\bibstyle{\(.*\)}/\1/p' $1 | tr '\n' ' '), $(addsuffix .bst, $(bst))) 
```

然后，我使用以下代码创建 BBL 文件：

```
# bbl: Bibtex produces .aux files from .aux files.
#      Also depends on .bst files (if they appear in the aux file).
%.bbl: $(call to-md5,%.aux) $(call to-md5, $(call get-bibstyle,$*.aux))
ifneq ($(strip $(BIB_SRC)),)
    $(IGNORE_RESULT)$(MUTE)$(VERBOSE) $(ECHO) "Building target: $@"
#   $(IGNORE_RESULT)$(MUTE)$(MOVE_TO_COL)
    $(IGNORE_RESULT)$(MUTE)$(SETCOLOUR_RED)
    $(IGNORE_RESULT)$(MUTE)$(ECHO) "===========================BIBTEX PASS================================"
    $(BIBTEX) $(*F)
    $(IGNORE_RESULT)$(MUTE)$(SETCOLOUR_LIGHTRED)
    $(IGNORE_RESULT)$(MUTE)$(ECHO) "===========================BIBTEX/LaTeX PASS================================"
    $(TEX) $(*F)
    $(IGNORE_RESULT)$(MUTE)$(RESTORE_COLOUR)
endif 
```

to-md5 函数只是将 .md5 附加到其输入中。`to-md5 = $(patsubst %,%.md5,$1)`

我希望 xyz.bbl 的依赖项是 xyz.bib 并且通过在 xyz.aux 文件上运行 sed 表达式返回所有 bst 文件。我知道这必须通过 eval 和 call 的组合来完成，但我无法弄清楚。

目前，我的输出如下。

```
sed: can't read .aux: No such file or directory
make: `xyz.bbl' is up to date. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T15:04:10.907

这种方法的问题

```
%.bbl: $(call to-md5,%.aux) $(call to-md5, $(call get-bibstyle,$*.aux)) 
```

是 Make 在构建依赖树之前扩展了 preqs（即，不知道是什么`%`）。所以第一个 preq`$(call to-md5,%.aux)`变成`%.aux.md5`了它会很好地工作，但在第二个 preq 中`$(call get-bibstyle,$*.aux)`失败了，因为`$*`评估为空并且没有这样的文件`.aux`可以扫描。（你会遇到同样的问题`%`，`$$*`或者其他什么，名称只是不存在提取。）

可以办到。我能想到的最少的 Rube-Goldbergian 方法是递归地使用 Make：

```
-include Makefile.inc

# If there's no exact rule for this target, add it to the list, note its preqs
# and start over.
%.bbl:  
    @echo KNOWN_BBL += $@ > Makefile.inc
    @echo $@: $(call to-md5,$*.aux) $(call to-md5, $(call get-bibstyle,$*.aux)) >> Makefile.inc
    @$(MAKE) -s $@

$(KNOWN_BBL):
ifneq ($(strip $(BIB_SRC)),)
    $(IGNORE_RESULT)$(MUTE)$(VERBOSE) $(ECHO) "Building target: $@ from $^"
    ... 
```

请注意，这将为*每个 BBL*重新运行 Make，如果您想构建很多 BBL，这可能不是很有效。我认为有一种方法可以只执行一次，但这需要更多的思考......

# delphi - 如何在 delphi 上实现 OutlookApp.Onquit 事件并在应用程序繁忙时避免挂起前景

> ID：10409749
> 
> 赞同：1
> 
> 时间：2012-05-02T07:52:33.400
> 
> 标签：delphi, outlook, outlook-redemption

我想在 Outlook 关闭时提示用户。我已经在我的应用程序中使用了兑换。我不想使用 Delphi 提供的 TOutlookApplication 类。

请帮助我在 Delphi 上实现 Outlook Onclose/OnQuit 事件。

当我为 OnQuit 事件使用 TOutlookApplication 的对象时，如果我的应用程序很忙，例如：执行需要超过 1 分钟的 SQL 语句，我的 Outlook 会挂起。最终我需要避免这种挂起。

请帮助我。

感谢和问候， Vijesh Nair

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T11:49:28.420

前段时间我实现了 Outlook 事件监听器。我使用导入的 Outlook_tlb 库来处理 Outlook。您可以通过`IConnectionPoint`界面接收 Outlook 通知。您的事件侦听器类必须实现`IDispatch`接口（至少`Invoke`方法）。因此，有示例代码：将 TOutlookEventListener 声明为：

```
TOutlookEventListener = class(TInterfacedObject, IDispatch)
  strict private
    FConnectionPoint : IConnectionPoint;
    FCookie : integer;
    function GetTypeInfoCount(out Count: Integer): HResult; stdcall;
    function GetTypeInfo(Index, LocaleID: Integer; out TypeInfo): HResult; stdcall;
    function GetIDsOfNames(const IID: TGUID; Names: Pointer;
                         NameCount, LocaleID: Integer; DispIDs: Pointer): HResult; stdcall;
    function Invoke(DispID: Integer; const IID: TGUID; LocaleID: Integer;
                Flags: Word; var Params; VarResult, ExcepInfo, ArgErr: Pointer): HResult; stdcall;
  public
    constructor Create();
end; 
```

在构造函数代码中，您必须获取 OutlookApplication 的实例，找到连接点并将自身注册为事件侦听器：

```
constructor TOutlookEventListener.Create();
var cpc : IConnectionPointContainer;
    ol : IDispatch;
begin
    inherited Create();

    ol := GetActiveOleObject('Outlook.Application');

    cpc := ol as IConnectionPointContainer;
    cpc.FindConnectionPoint(DIID_ApplicationEvents, FConnectionPoint);
    FConnectionPoint.Advise(self, FCookie);
end; 
```

使用`Invoke` 方法可以过滤事件。`Quit`事件有 DispID = 61477

```
function TOutlookEventListener.Invoke(DispID: Integer; const IID: TGUID; LocaleID: Integer; Flags: Word; var Params; VarResult, ExcepInfo,
          ArgErr: Pointer): HResult;
begin
    result := S_OK;

    case DispId of
        61442 : ; // ItemSend(const Item: IDispatch; var Cancel: WordBool);
        61443 : ; // newMailEventAction();
        61444 : ; // Reminder(const Item: IDispatch);
        61445 : ; // OptionsPagesAdd(const Pages: PropertyPages);
        61446 : ; // Startup;
        61447 : begin
            FConnectionPoint.Unadvise(FCookie);
            FConnectionPoint := nil;

            form1.OutlookClosed(self);
        end
        else
            result := E_INVALIDARG;
    end;
end; 
```

其他方法必须返回 E_NOTIMPL 结果。

在表单 OnCreate 事件处理程序中创建 TOutlookEventListener 的实例（假设 Outlook 已经在运行）。我还使用 TForm1.OutlookClosed(sender : TObject) 事件来显示通知消息。

阅读有关 Outlook 事件的文章：http: [//www.codeproject.com/Articles/4230/Implementing-Outlook-2002-XP-Event-Sinks-in-MFC-C](http://www.codeproject.com/Articles/4230/Implementing-Outlook-2002-XP-Event-Sinks-in-MFC-C)

# iphone - ShareKit - Evernote 与 iPhone 应用程序的集成

> ID：10409750
> 
> 赞同：0
> 
> 时间：2012-05-02T07:52:34.727
> 
> 标签：iphone, github, social, sharekit, evernote

我更喜欢使用 sharekit 将社交集成到我的 iphone 应用程序中。在我使用默认凭据进行测试时配置evernote集成时它可以工作，但是当我使用自己的凭据时它不起作用。警报说“您的用户名和密码不匹配”对于以前使用的相同凭据。

默认代码（工作）是

```
- (NSString*)evernoteUserStoreURL {
    return @"https://sandbox.evernote.com/edam/user";
}

- (NSString*)evernoteNetStoreURLBase {
    return @"http://sandbox.evernote.com/edam/note/";
}

- (NSString*)evernoteConsumerKey {
    return @"<shareKit's key>";
}

- (NSString*)evernoteSecret {
    return @"<shareKit's secret>";
} 
```

我只是用我的改变了密钥和秘密。根本没有别的。它不工作我的代码是

```
- (NSString*)evernoteUserStoreURL {
    return @"https://sandbox.evernote.com/edam/user";
}

- (NSString*)evernoteNetStoreURLBase {
    return @"http://sandbox.evernote.com/edam/note/";
}

- (NSString*)evernoteConsumerKey {
    return @"<mykey>";    // replaced by my key
}

- (NSString*)evernoteSecret {
    return @"<mysecret>";  // replaced by my secret
} 
```

都是关于 sandbox.evernote.com。在evernote.com 上，以上都不起作用。请建议我还有什么配置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T08:50:13.930

我有完全相同的问题。我在 5 月 1 日创建了我的密钥。阅读 Evernote 的博客我发现了这个讨论[Evernote](http://blog.evernote.com/tech/2012/04/24/security-enhancements-for-third-party-authentication/)

可能感兴趣？

我已经获得使用生产服务器的许可，但问题总是一样的。 `ConsumerKey and SecretKey are correct.`

这里的日志：

```
SHKConfiguration.m(49) Looking for a configuration value for evernoteUserStoreURL.

SHKConfiguration.m(61) Found configuration value for evernoteUserStore
URL:https://www.evernote.com/edam/user

SHKConfiguration.m(49) Looking for a configuration value for evernoteConsumerKey.

SHKConfiguration.m(61) Found configuration value for evernoteConsumerKey: a*****

SHKConfiguration.m(49) Looking for a configuration value for evernoteSecret.

SHKConfiguration.m(61) Found configuration value for evernoteSecret: d******

SHKEvernote.m(93) Caught EDAMUserException: 
unknown EDAMUserException(errorCode:8,parameter:"consumerKey") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T10:23:46.723

编辑 2：[ShareKit 2.0](https://github.com/shareKit/ShareKit/)刚刚更新为使用最新的 Evernote iOS sdk。这个问题现在应该没有了。

~~编辑：ShareKit 的 Evernote 实现似乎已经过时 - 他们已更改身份验证 API 以支持 OAuth。在有人更新 ShareKit 的 Evernote 共享器之前，新的应用程序都不走运。尽管删除 cookie 的技巧可能会有所帮助，因为这个错误出现在 2 个月前（在 ShareKit 的 github 问题跟踪器上），并且强制 OAuth 是全新的。~~

~~您只能在实施阶段使用 Evernote 沙盒环境。当您准备好生产环境时，您可以[申请](http://dev.evernote.com/documentation/cloud/)Evernote 批准您的 API 密钥用于生产环境。确保您使用**沙盒测试帐户**而不是真实帐户连接到沙盒环境。[您可以在此处](https://sandbox.evernote.com/Registration.action)创建沙盒帐户。~~

~~确保您没有使用任何特殊字符作为测试帐户名称或密码。~~

也许您可以在配置器中更改应用凭据后尝试在应用启动期间删除 cookie。您可以使用 ShareKit 的 NSHTTPCookieStorage 类别在 ShareKit 中执行此操作：

```
[NSHTTPCookieStorage deleteCookiesForURL:[NSURL URLWithString:SHKCONFIG(evernoteUserStoreURL)]]; 
```

我不确定该 url 是否适合删除 cookie - 这可能需要一些实验。

# windows - 从 VMware 启动安装在磁盘上的 windows 7

> ID：10409752
> 
> 赞同：-2
> 
> 时间：2012-05-02T07:52:38.320
> 
> 标签：windows, ubuntu

我已经安装了两个操作系统：Windows7 和 Ubuntu12.04。我需要找到一种方法来使用虚拟机从 Ubuntu 启动已安装的 Windows 7，不想再次在虚拟机中安装 Windows 7。是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T07:57:24.350

Ubuntu（和所有发行版）有一个名为[GRUB](http://www.gnu.org/software/grub/)的工具，它负责在一台计算机上引导不同的操作系统（一次一个）。

为什么在运行Ubuntu时需要在虚拟机上运行win7？

一个解决方案是使用[Xen](http://xen.org/)而不是 Vmware。Xen 支持在带有[GPLPV 驱动程序](http://wiki.xenproject.org/wiki/Xen_FAQ_Drivers,_Windows)的 PV-HVM 模式下运行[Windows 7 或 8 VGA-passthrough](http://forums.linuxmint.com/viewtopic.php?f=42&t=112013)。

# facebook - 保持 Facebook 评论框打开

> ID：10409754
> 
> 赞同：4
> 
> 时间：2012-05-02T07:52:52.913
> 
> 标签：facebook, comments, facebook-comments

*你好*，

我想知道如何让 Facebook 评论框默认打开，而不是先点击“发表评论”，这样人们就可以直接在里面写了。

*提前致谢*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-16T14:43:51.327

你必须是这个页面的管理员，

去 ：

[http://developers.facebook.com/tools/comments](http://developers.facebook.com/tools/comments)

--> 设置-> 评论编辑器-> 总是显示

# php - json 似乎启用但无法运行 json_encode

> ID：10409756
> 
> 赞同：1
> 
> 时间：2012-05-02T07:52:56.260
> 
> 标签：php, pear, json

我的 PHP 版本是 5.1.6 我已经按照说明安装了 Json：

```
# yum install php-devel
# yum install php-pear
# yum install gcc
# pear install json
# cd /etc/php.d
# echo "extension=json.so" > json.ini
# service httpd restart 
```

现在，我检查是否启用了 Json，但我无法运行 json_encode：

检查1：

```
[root@69-64-69-43 ~]# php -i | grep json 
```

结果1：

```
/etc/php.d/json.ini,
json
json support => enabled
json version => 1.2.1 
```

检查2：

```
[root@69-64-69-43 ~]# php -r 'var_dump(function_exists("json_encode"));' 
```

结果 2：

```
bool(true) 
```

但是运行时：

```
Fatal error: Call to undefined function json_encode() in /var/www/vhosts/ykite.com/httpdocs/fre/json.php on line 8 
```

这是运行链接：

检查Json：http: [//69.64.69.43/fre/json.php](http://69.64.69.43/fre/json.php)

php_info()：http: [//69.64.69.43/fre/info.php](http://69.64.69.43/fre/info.php)

我真的在寻找和阅读很多文件，但我找不到这个案例的原因。

我衷心感谢您的帮助。

强

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T07:58:26.457

如果您`var_dump( function_exists( 'json_encode' ) )`返回 true，而您的 HTTP 请求表明该函数不存在；我只能想到一种解释：CLI 和 HTTP 请求使用不同的 php.ini。在您的`phpinfo( )`文档中，它说它正在加载 json.ini，但我没有看到任何其他对 JSON 的引用。

检查您的日志以查看 json.so 是否实际上是根据 HTTP 请求加载的。我敢打赌，事实并非如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T08:10:25.977

来自[让我们为 PHP 5 安装 JSON](http://slaptijack.com/system-administration/lets-install-json-for-php-5/)

> **安装 json** - 这实际上比预期的要棘手。我以为我可以通过`pear`. 显然，开发了一个[PEAR Services_JSON 包](http://pear.php.net/pepr/pepr-proposal-show.php?id=198)，但它从未被官方存储库接受。相反，诀窍是使用[PECL json 包](http://pecl.php.net/package/json)。这就像运行`pecl install json`并观察编译器做它的事情一样简单。完成`json.so`后，您的 PHP 模块目录中应该有一个文件。（我的是`/usr/lib/php/modules/`。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-13T20:43:25.440

当然，这是一个老话题，但也许有人会像我在 2015 年 8 月那样偶然发现这个问题。我通过更改 php.ini 中的扩展文件夹路径来解决这个问题。它以某种方式设置为“./”而不是 /usr/lib64/php/modules/

# windows-phone-7 - windows phone 7.5 创建大图块 (1x2 , 2x1)

> ID：10409765
> 
> 赞同：5
> 
> 时间：2012-05-02T07:53:51.047
> 
> 标签：windows-phone-7

我知道您可以在 windows phone 7.5 中从您的应用程序创建图块。我对如何创建大图块感兴趣，例如图片图块或三星集线器图块（水平或垂直扩展超过 2 个图块的大小）。我有任何公共 api 可以做到这一点吗？（不使用本机代码）？

谢谢你！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-02T08:01:36.957

市场上的应用程序无法创建宽磁贴。建设者是目前唯一能做到这一点的人。

> Windows Phone 设备附带一些已由 Microsoft 及其移动运营商和硬件制造商合作伙伴安装的 Start Tiles。这些瓷砖始终遵循 Metro 风格。**双宽度磁贴仅适用于 Microsoft 及其合作伙伴。**

[http://msdn.microsoft.com/en-us/library/hh202884(v=VS.92).aspx](http://msdn.microsoft.com/en-us/library/hh202884(v=VS.92).aspx)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-02T08:13:44.810

由于 Julien 提供的原因，这不会通过认证，但是您可以通过更改 TemplateType 来使用 WMAppManifest.xml，如下所述：-

[http://dotnetspeaks.com/DisplayArticle.aspx?ID=207](http://dotnetspeaks.com/DisplayArticle.aspx?ID=207)

再说一遍，这不会通过认证。

# java - 块/短语内的换行符处理

> ID：10409766
> 
> 赞同：2
> 
> 时间：2012-05-02T07:53:56.890
> 
> 标签：java, itext

我对块文本中的换行符处理有点困惑。以下代码

```
 Paragraph para = new Paragraph();
  para.add(new Chunk("  A"));
  para.add(new Chunk("\n  B"));
  para.add(new Chunk("\n  C"));
  document.add(para); 
```

添加一段 3 行，其中生成的 pdf 文档中的第一行略微向右移动，而我期望这些行从相同的确切水平位置开始。请注意，每个字母“A”、“B”、“C”前面都有两个空格字符。

如果我在第一个块中也使用换行符，则三行在输出文档中完全水平对齐：

```
 Paragraph para = new Paragraph();
  para.add(new Chunk("\n  A"));
  para.add(new Chunk("\n  B"));
  para.add(new Chunk("\n  C"));
  document.add(para); 
```

所以问题是：为什么在块文本上出现换行符会影响文本本身的水平位置？

我使用的 iText 版本是**5.2.1**。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T08:13:11.547

~~默认情况下，iText 为每个`Paragraph`. 您想要的是将此缩进空间设置为 0。请参阅 API 的[Paragraph.setFirstLineIndent(float)](http://api.itextpdf.com/itext/com/itextpdf/text/Paragraph.html#setFirstLineIndent%28float%29)。~~

# php - MySQL选择日期到日期

> ID：10409772
> 
> 赞同：-2
> 
> 时间：2012-05-02T07:54:20.697
> 
> 标签：php, mysql

关于 MySQL select date to date 我有数据表

表A

```
ID | DATE
-----------------
1  | 2012-01-01
2  | 2012-01-12
3  | 2012-01-20
4  | 2012-02-03
5  | 2012-02-13
6  | 2012-02-14
7  | 2012-04-05 
```

我想这样表现。我只想使用 MySQL 。

```
 DATE
--------------------
 01,12,20 Jan 2012
 03,13,14 Fab 2012
 05 Apr 2012 
```

或者

```
 DATE
--------------------
 01-01-2012,12-01-2012,20-01-2012
 03-02-2012,13-02-2012,14-02-2012 
 05-03-2012 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T08:13:04.920

对于第二种形式，您可以结合[`GROUP_CONCAT()`](http://dev.mysql.com/doc/refman/5.5/en/group-by-functions.html#function_group-concat)and `GROUP BY`：

```
SELECT   DATE_FORMAT(`DATE`, '%b %Y') AS Month
  ,      GROUP_CONCAT(`DATE`)         AS Dates
FROM     `table`
GROUP BY Month 
```

对于第一种形式，您可以使用[`DAY()`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_day)within [`GROUP_CONCAT()`](http://dev.mysql.com/doc/refman/5.5/en/group-by-functions.html#function_group-concat)：

```
SELECT   DATE_FORMAT(`DATE`, '%b %Y') AS Month
  ,      GROUP_CONCAT(DAY(`DATE`))    AS Dates
FROM     `table`
GROUP BY Month 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T08:00:35.753

似乎很容易 - 从数据库中按日期升序选择日期，然后循环遍历每条记录（使用本地时间或可以获取月份的其他时间函数之一），将日期存储在字符串中，直到找到带有不同的月份/年份，然后打印该月份字符串并为该月份开始一个新的字符串。

可能还值得使用 PHP 中的日期名称来避免像“Fab”这样的日期名称:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T08:08:23.533

```
SELECT GROUP_CONCAT(DATE SEPARATOR ',') FROM TABLEA 
```

或者

```
select CONCAT_WS(' ',GROUP_CONCAT(a.day1 SEPARATOR ','),a.month1,a.year1) as `DATE` from (select DAY(`DATE`) as day1,DATE_FORMAT(`DATE`,'%b') as month1, YEAR(`DATE`) as year1 from TABLEA) a group by a.month1, a.year1 
```

# google-maps - InfoWindow close() 函数不起作用

> ID：10409782
> 
> 赞同：1
> 
> 时间：2012-05-02T07:55:02.117
> 
> 标签：google-maps, google-maps-api-3, maps, infowindow

我正在尝试管理`InfoWindow`来自 Google Maps JavaScript API v3 的一组对象。我的数组被定义为全局的，所以我可以`Infowindow`像这样管理所有对象：

正如肖恩所说，我编辑了代码以添加一些细节：

```
 google.maps.event.addListener(markers[id], 'click', function() {

                for ( var i = 0; i < infowindows.length; i++ ) {
                    var infoWin = infowindows[i];
                    if ( infoWin === undefined || infoWin === null ) {
                        continue;
                    }
                    infoWin.close();

                }

                map.panTo(markers[id].getPosition());
                infowindows[id].open(map,markers[id]);
            }); 
```

该`.close()`功能没有做任何事情。我知道我正在以正确的方式访问对象，因为我可以调用`.open()`并且它可以工作。有人对这个问题有想法吗？谢谢！

编辑（14 / 8 / 2012）：这似乎是 CSS 的问题，所以当我用一些 JQuery 显示地图时，我设法通过强制显示样式来修复它：

```
$('#google-map').css("display", "block !important"); 
```

非常感谢您的友好回答！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T03:55:17.347

我开始添加评论，但我有多个建议，所以为了清楚起见，我添加了一个完整的答案。这是我的初步反馈，有一个问题：

1.  JavaScript`for - in`循环旨在用于*枚举对象的属性，当您的意图是**迭代*Array 的内容时，通常应避免使用该循环。因此，将循环控制更改为：

    for ( var i = 0; i < infowindows.length; i++ ) {

2.  没有办法确定，但是`index`在`for`循环的定义中不包含`var`关键字，因此它可能正在创建一个全局变量。如果您按照 #1 中的建议重构以使用传统`for`循环，则可以消除此可能的问题。

3.  似乎不需要保护条件：`if (typeof infowindows[index] == "object") {`，所以尝试完全删除测试。如果您知道数组包含`InfoWindow`实例，则这是不必要的。

4.  `for`循环的最后一个右括号后面的分号`}`是不必要的；我不认为它会造成任何伤害，但应该将其删除。

**问题**：此代码是否产生任何错误？

*跟进您的评论：*

如果您相信数组中`for - in`会有成员，则不必使用。`null`如果您有尚未分配的数组成员，它们将是`undefined`; 如果您有成员`null`，那是因为代码已将它们设置为`null`. 但在其他情况下，您可以处理这些情况并仍然使用数组迭代：

```
for ( var i = 0; i < infowindows.length; i++ ) {
    var infoWin = infowindows[i];
    if ( infoWin === undefined || infoWin === null ) {
        //skips the remainder of the loop code and starts a new iteration
        continue;
    }

    infoWin.close();
} 
```

当你的意图是循环迭代时使用`for - in`是一种不好的做法，有时会奏效，但最终会给你带来麻烦。它枚举一个对象的属性，甚至会从原型链中提取属性，所以你永远无法完全确定你会得到什么。此外，`for - in`可能不会按顺序枚举数组的属性，这有时会导致问题，因为某些代码假定数组是按顺序遍历的。

如果您使用类似的逻辑来调用`open()`它运行良好，我必须假设代码正在对两个循环之间的数组进行更改，并做一些导致您调用`close()`失败的循环的事情。如果您在问题中添加一些额外的代码，将会很有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T07:16:14.317

再说一次，评论太长了……

如果`infoWin.close()`没有关闭 InfoWindow，最明显的原因是它`infoWin`不是 InfoWindow。

```
 for ( var i = 0; i < infowindows.length; i++ ) {
                var infoWin = infowindows[i];
                if ( infoWin === undefined || infoWin === null ) {
                    continue;
                }
                infoWin.close();
            } 
```

此循环遍历您已调用的对象数组`infowindows`，并且您测试它`infoWin`不是`undefined`或`null`但不检查它实际上是一个 InfoWindow。

因为`.close()`不会导致错误，所以不管它是有`close()`方法的。只有 InfoWindow 有一个`getContent()`方法，因此您可以测试它作为该对象实际上是 InfoWindow 的肯定指示。

如果它*是*一个信息窗口，那么我认为我们需要一个指向您的地图的链接。在这种情况下，该`close()`方法应该可以工作，所以一定有什么改变了。

# sql-server-2005 - MySQL 如何选择 OpenQuery Not In 语句

> ID：10409783
> 
> 赞同：0
> 
> 时间：2012-05-02T07:55:03.677
> 
> 标签：sql-server-2005, openquery

下面的语句将从 OpenQuery(MYSQL) 返回值。

```
Select * From OpenQuery(MYSQL, 'Select * From ResearchRpt') a
Where Not Exists (Select * From dbo.ResearchRpt where Id_report = a.Id_report) 
```

我想在结果值应该出现的地方反转它 dbo.ResearchRpt

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T21:50:40.297

您的查询使用反连接。反连接可以用`LEFT JOIN`+`WHERE IS NULL`和. 来实现`NOT EXISTS`。因此，将您的脚本转换为 LEFT JOIN 版本，交换边，您就完成了：

```
SELECT ms.*
FROM dbo.ResearchRpt ms
  LEFT JOIN OPENQUERY(MYSQL, 'SELECT * FROM ResearchRpt') my
    ON my.Id_report = ms.Id_report
WHERE my.Id_report IS NULL 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T22:43:33.530

```
-- Only exists

SELECT ms.*, my.Id_report
FROM dbo.ResearchRpt ms
LEFT JOIN OPENQUERY(MYSQL, 'SELECT * FROM ResearchRpt') my
ON my.Id_report = ms.Id_report
WHERE my.Id_report IS NOT NULL 
```

# c++ - 读取位图图像时获取错误数据

> ID：10409786
> 
> 赞同：0
> 
> 时间：2012-05-02T07:55:19.140
> 
> 标签：c++, graphics

我正在关注本教程 [http://www.gamedev.net/page/resources/_/technical/game-programming/how-to-load-a-bitmap-r1966](http://www.gamedev.net/page/resources/_/technical/game-programming/how-to-load-a-bitmap-r1966)并且我遇到了所有错误值的问题我加载的位图标题/信息。

我已经声明了存储位图头信息的结构

```
typedef struct BITMAPFILE_HEADER {
  WORD  bfType;
  DWORD   bfSize;
  WORD  bfReserved1;
  WORD  bfReserved2;
  DWORD   bfOffBits;
} BITMAPFILE_HEADER;

//Bitmap information header
//provides information specific to the image data
typedef struct BITMAPINFO_HEADER{
  DWORD  biSize;
  LONG   biWidth;
  LONG   biHeight;
  WORD   biPlanes;
  WORD   biBitCount;
  DWORD  biCompression;
  DWORD  biSizeImage;
  LONG   biXPelsPerMeter;
  LONG   biYPelsPerMeter;
  DWORD  biClrUsed;
  DWORD  biClrImportant;
} BITMAPINFO_HEADER;

//Colour palette
typedef struct RGB_QUAD {
  BYTE  rgbBlue;
  BYTE  rgbGreen;
  BYTE  rgbRed;
  BYTE  rgbReserved;
} RGB_QUAD; 
```

之后，我使用以下代码读取位图：

```
 FILE *in;
    in = fopen("picture.bmp", "rb");

    if (in == NULL)
    {
        printf("Error opening file\n");
    }
    else
    {
        BITMAPFILE_HEADER bmfh;
        BITMAPINFO_HEADER bmih;

        fread(&bmfh, sizeof(BITMAPFILE_HEADER), 1, in);
        fread(&bmih, sizeof(BITMAPINFO_HEADER), 1, in);

        if (bmih.biBitCount != 24)
            printf("not 24");
    } 
```

我的图片是 24 位的，但是当我运行这个程序时，它显示“不是 24”。我尝试在 Visual Studio 中调试它，然后我看到了`bmih.biBitCount`is `0`. 此外，图像的宽度和高度也是错误的，我在标题中找到的唯一正确数据`bmfh.bfType`是`19778`.

有人知道我的代码有什么问题吗？同样，我只想阅读 bmp 但不显示它。

PS：原图为JPEG格式。我使用 MS PAINT 将其转换为 BMP 格式并以 BMP 格式重新保存。我想知道它会影响价值观吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T08:06:16.343

我想您遇到了[对齐问题](http://en.wikipedia.org/wiki/Data_structure_alignment)，因为编译器可以选择在他认为合适的结构中对齐数据。您可以尝试打包您的结构，但我建议您读出每个字段并单独填写，这是更多的工作，但它更清晰并且避免了对齐问题。

# javascript - 在 chrome 和 Safari 中按顺序发送多个 Ajax 查询失败

> ID：10409789
> 
> 赞同：0
> 
> 时间：2012-05-02T07:55:46.307
> 
> 标签：javascript, jquery, ajax, google-chrome, safari

我有一个问题是我显示了一系列对话或相互提供的 AJAX 结果。例如。用户点击发送消息，触发 ajax 调用，对话框打开，用户填写表单并发送，对话框关闭，表单通过 AJAX 提交，然后另一个 AJAX 响应将打开对话框或重定向用户. 此过程在所有浏览器中显示第一个对话，但在 Safari 和 Chrome 中显示第二个对话错误。我 95% 确定它在所有浏览器中都能正常工作。现在似乎失败了。触发错误函数，然后浏览器将打开用于第二个 AJAX 请求的 URL。

我正在使用 jquery、PHP 和 javascript，并通过 eval(json) 命令运行它。从那以后，我重构了代码以返回原始 Javascript。

在任何情况下，错误都会在 AJAX 查询的“错误”处理程序上触发。返回的错误信息非常少。我知道 Chrome 有一个缓存过程，但不确定如何影响它或者它是否存在于 safari 中。无论如何，在运行返回的 javascript 之前，ajax 的第二次调用似乎在 safari 和 chrome 中失败。我相信它以前在所有浏览器中都有效，但我现在不太确定。我已经花了将近半天的时间，因此我将不胜感激。:D

用于运行 AJAX 调用的 Javascript 函数如下

```
function page(url){
     $.ajax({
            type: "POST",
            url: url,
            success : ajaxReturn,
            cache: false,
            dataType: 'script',
            error: function(result, status, err) {
                alert('HTTP ' + result.status + ' Error Encountered: ' + result.statusText);
                alert(result.responseText);
                alert('status: '+status+' error: '+err);
            return;
            }
        });

}

function ajaxReturn(ret){   
    eval(ret);
    $.unblockUI();
} 
```

这与两个 AJAX 调用使用的代码相同。在某些情况下（即，如果在表单中发现错误），返回代码实际上是完全相同的。我有一个用于所有对话、AJAX 和相关进程的系统，到目前为止它一直运行良好。

我从错误处理程序返回的消息是：

```
HTTP 0 Errpr Encountered: error 
```

然后

```
<null> 
```

然后

```
status:error error: 
```

通过警报语句输出。哪里是空对话。因此，由于运行相同的 ajax 函数并返回相同的代码，Chrome 和 Safari 在第二次调用时遇到了问题。无论返回什么，它们都在错误处理程序上失败，我不知道为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T04:07:25.510

好的，所以我发现了问题。对话中的表单内容是通过另一个 AJAX 调用提交的。因此，来自内容中的 onsubmit 处理程序通过 jquery 进行序列化，然后发送到 AJAX。问题是我在 onsubmit 处理程序中的 AJAX 调用之后没有包含 return false 。因此，由于某种原因，在 chrome 和 safari 上，这将返回错误状态 0，然后在通过 AJAX 调用的页面上转发给我。

任何情况下都返回 false 修复它。甜的！

# c# - C# Winform 事件处理程序

> ID：10409798
> 
> 赞同：0
> 
> 时间：2012-05-02T07:56:29.997
> 
> 标签：c#, winforms, event-handling

我的班级有 2 个构造函数：

```
public partial class Fiche_Ordre : Le_MainForm
    {
         public Fiche_Ordre()
              {
                  InitializeComponent();           
                  Constuct_Page();            
              }

              public Fiche_Ordre(string OrderID): this()
              {

                    Pers_Ordre oPersOrdr = oOrder_BL.Get_OrdreOne_BL(ClientID, Convert.ToInt32(OrderID), false);

                textEdit_RefExpred.Text = oPersOrdr.RefExpd;
                lookUpEdit_Agence.EditValue = oPersOrdr.Agence;
                lookUpEdit_Transport.EditValue = oPersOrdr.Transporteur;

                lookUpEdit_Dest.EditValue = oPersOrdr.DestId;
    ..................

              }

              public void Constuct_Page()
              {
                  try
                  {
                      ClientID = Program.Le_ClientID;
                      ....

              #region LookUpEdidt Destinataire

                   lookUpEdit_Dest.Properties.DataSource = Auxiliaire_BL.FillCombo_BL(false, ClientID).Tables["ComboFill"];
                   lookUpEdit_Dest.Properties.ValueMember = "CODE_DEST";
                   lookUpEdit_Dest.Properties.DisplayMember = "CODE_DEST";
                   LookUpColumnInfoCollection coll_Dest = lookUpEdit_Dest.Properties.Columns;
                   // A column to display the ProductID field's values.
                   coll_Dest.Add(new LookUpColumnInfo("CODE_DEST", 0, "Code Destinataire"));
                   // A column to display the ProductName field's values.
                   coll_Dest.Add(new LookUpColumnInfo("RS_NOM", 0, "Raison Social"));
                   //  Set column widths according to their contents and resize the popup, if required.   
                   lookUpEdit_Dest.Properties.BestFitMode = BestFitMode.BestFitResizePopup;
                   // Enable auto completion search mode.
                   lookUpEdit_Dest.Properties.SearchMode = SearchMode.AutoComplete;
                   // Specify the column against which to perform the search.
                   lookUpEdit_Dest.Properties.AutoSearchColumnIndex = 1;
                   lookUpEdit_Dest.EditValueChanged += new EventHandler(lookUpEdit_Dest_EditValueChanged);
              #endregion
        ...
        } 
```

这很奇怪，因为当我使用`public Fiche_Ordre()`它时它不会触发`new EventHandler(lookUpEdit_Dest_EditValueChanged);`；但是当我使用时`public Fiche_Ordre(string OrderID)`，它会触发事件处理程序。

这是正常的还是不正常的？

它从主窗体调用的第一个构造函数

```
 public partial class Le_MainForm : DevExpress.XtraEditors.XtraForm
    {
        public Le_MainForm()
        { 
            InitializeComponent();

            this.Name = "MainUSER";

            if (Program.IsFA) barButtonItem_OrdList.Visibility = DevExpress.XtraBars.BarItemVisibility.Never;

        }

 private void barButtonItem_CreatOrdreAller_ItemClick(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            Close_AllForm();
            Program.AllerRetour = "Ordre Aller";
            Fiche_Ordre f_Fiche = new Fiche_Ordre();

            f_Fiche.Show();
        } 
```

我调用它的第二个构造函数

```
public partial class Liste_Ordres : Le_MainForm
    {

     private void Liste_DobleClic(object sender, EventArgs e)
            {
                try
                {
                    Program.OrderId = gridView_Liste_Ordres.GetFocusedRowCellValue("NO_ORDRE").ToString();
                    this.Hide();
                    Fiche_Ordre f_Fiche = new Fiche_Ordre(gridView_Liste_Ordres.GetFocusedRowCellValue("NO_ORDRE").ToString());
                    f_Fiche.Show();
                }
                catch (Exception excThrown)
                {
                    MessageBox.Show(excThrown.Message);
                }
            } 
```

先感谢您。

PS：第一个构造函数只是创建NEW空白页面，第二个构造函数是创建NOT NEW（编辑页面），所以我传递了id并填充了所有控件（文本框，备忘录等......）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T08:28:46.037

`EditValueChanged`手柄连接在最后一行`Constuct_Page`。因此，它仅**在** `Constuct_Page`. `..................`代码的一部分是否发生了变化？这听起来确实像是一个过于简单的推测，但无论如何都值得仔细检查......

此外，我可以建议你另一个改进：

```
public Fiche_Ordre(string OrderID) : this.Fiche_Ordre()
{
  // invokes the other constructor first, so they're guaranteed
  // do be equivalent in the first part

  Pers_Ordre oPersOrdr = oOrder_BL.Get_OrdreOne_BL(ClientID,
    Convert.ToInt32(OrderID), false);

  // ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T08:33:42.917

当你想要绑定事件处理程序时，放置断点并查看lookUpEdit_Dest，我认为这个var没有初始化，所以你需要从第二个构造函数添加初始化到第一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T11:56:58.443

而是创建 Construct_Page(); 只需放入 Form_Load()

# java - 使用 libgdx Actor 类和 SpriteBatch 绘制网格几何体

> ID：10409799
> 
> 赞同：2
> 
> 时间：2012-05-02T07:56:30.293
> 
> 标签：java, android, opengl-es, libgdx, scene2d

我正在考虑使用 scene2d 包来渲染简单的矩形几何体（用于简单精灵）和更复杂的网格几何体（用于其他事物）。

在我看来，具有 Actor 组的舞台将是管理渲染元素之间的层次关系的好选择，并非所有元素都由简单的矩形精灵定义。

这种方法正确吗？（即。我是否“在 libgdx 中思考”）如果是，我如何在 Actor draw() 方法中渲染 Mesh 对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-09T02:00:42.170

如果网格是指 3d 对象，则无法使用 Actor 绘制方法，因为它使用[SpriteBatch](http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/graphics/g2d/SpriteBatch.html)并且您肯定需要[ModelBatch](http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/graphics/g3d/ModelBatch.html)来渲染它们。

无论如何，将 scene2d 用于 3d 对象只会使其更加复杂。

如果您的意思是 2d 复杂的形状。那么是的，您可以这样做，覆盖 Actor 的绘制方法并将您的对象特定的绘制方式放在那里。

# java - Vaadin：如何使用 JUnit 测试生成的Cells

> ID：10409801
> 
> 赞同：3
> 
> 时间：2012-05-02T07:56:41.787
> 
> 标签：java, junit, vaadin

您可能知道在 Vaadin 中，仅当 Table 需要构建其可见内容时才调用覆盖的 generateCell 方法。因此，当我为此类编写 JUnit 测试时，我无法触发 generateCell 方法并对其进行测试。我怎样才能测试这个任何想法？还是我必须为此使用 GUI 测试工具（我不想这样做，因为它的许可证非常昂贵）

```
public class AttributeColumnGenerator implements Table.ColumnGenerator {    
@Override
public Object generateCell(Table source, Object itemId, Object columnId) {
    //lots of code here to be tested
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T03:31:31.033

根据我对这个问题的理解，我认为你不需要在这里有一个 GUI 测试工具。

我对简单测试的想法是：

1.  创建一个实例 AttributeColumnGenerator。
2.  创建一个表。
3.  向表中添加项目
4.  `generateCell`使用 columnId 和 itemId调用。
5.  对方法返回的组件执行适当的断言。

这是我的想法的一个片段

首先我的`ColumnGenerator`人只创建一个带有单元格值的标签。

```
public class AttributeColumnGenerator implements Table.ColumnGenerator {

public Object generateCell(Table source, Object itemId, Object columnId) {

    String textToDisplay  = (String)source.getItem(itemId).getItemProperty(columnId).getValue();
    return new Label(textToDisplay);
} 
```

}

以及测试方法

```
 @Test
    public void attributeColumnGenratortest()
    {

        AttributeColumnGenerator columnGenerator = new AttributeColumnGenerator();

        Table table = new Table();
        String columnId = "test";
        table.addContainerProperty(columnId, String.class, "");

        String itemId = "item1";
        Item item = table.addItem(itemId);
        item.getItemProperty(columnId).setValue("Value of item1");

        Label generateObject = (Label)columnGenerator.generateCell(table, itemId, columnId);

        // Assert any properties of the returned Component.
        // In this snippet, I only printOut the boolean comparaison.
        System.out.println( "Value of item 1".equals(generateObject.getValue()));
    } 
```

也许这不是最好的解决方案，但它是有效的。

希望有帮助！

问候。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-15T18:43:21.457

上述方法足以单独测试列生成器。但是，当您的列生成器每次调用时都具有不同的行为时，或者当您需要测试生成的组件之间的交互时，这就不足为奇了。解决此问题的一种方法是覆盖 Table 的特定方法来伪造附加。

以下是方法（使用 Vaadin 7.1.13 测试）：

```
package com.table;

import com.vaadin.data.util.BeanItemContainer;
import com.vaadin.ui.Table;
import org.junit.Assert;
import org.junit.Test;

/**
 * @author bernard paulus
 * @since 10/07/2014
 */
public class ColumnGeneratorTest {
    @Test
    public void testColumnGenerator() {
        BeanItemContainer<Bean> container = new BeanItemContainer<Bean>(Bean.class);
        container.addBean(new Bean());
        // fake the attach method
        Table testTable = new Table(null, container) {

            private boolean isTableAttached;

            @Override
            public void attach() {
                isTableAttached = true;
                refreshRenderedCells();
            }

            @Override
            public boolean isAttached() {
                return isTableAttached;
            }
        };

        CountingNullGenerator generator = new CountingNullGenerator();
        testTable.addGeneratedColumn(Bean.VALUE, generator);

        // call our fake attach
        testTable.attach();

        Assert.assertEquals(1, generator.getNumberOfCalls()); // check side-effect of generation
    }

    public static class CountingNullGenerator implements Table.ColumnGenerator {
        private int nCalls= 0;

        @Override
        public Object generateCell(Table source, Object itemId, Object columnId) {
            nCalls++;
            return null;
        }

        public int getNumberOfCalls() {
            return nCalls;
        }
    }

    public static class Bean {
        public static final String VALUE = "value";
        private String value;

        public String getValue() {
            return value;
        }

        public void setValue(String value) {
            this.value = value;
        }
    }
} 
```

# php - 从ajax post下载pdf

> ID：10409802
> 
> 赞同：4
> 
> 时间：2012-05-02T07:56:49.530
> 
> 标签：php, jquery, pdf, content-type

我想通过 jquery 帖子下载 pdf 文件。我试过这个：

```
$('#downloadPdf').click(function() {
    var id = $('#fileId').val();

    $.ajax({
        type: "POST",
        url: "includes/download_pdf.php",
        data: 'file_id=' + id,
        complete: function(data) {
            $('#pdf_results').html(data.responseText);
        }
    });
}); 
```

代码PHP：

```
<?php 
    $file_name = $_POST['file_id']; 
    // We'll be outputting a PDF header('Content-type: application/pdf'); 
    // It will be called downloaded.pdf header('Content-Disposition: attachment; filename="'.$file_name.'.pdf"'); 
    // The PDF source is in original.pdf readfile('/var/www/vhosts/domain.nl/private/'.$file_name.'.pdf'); 
?> 
```

当我使用这段代码时，我得到了所有奇怪的登录`#pdf_results`。我想将 PDF 保存到我的计算机，但这不起作用。

有人知道如何解决这个问题吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-20T05:51:23.610

You need to achieve this : I didn't really trace your program but you need the **content disposition** line in your php to make it work.

```
<?php
// We'll be outputting a PDF
header('Content-type: application/pdf');

// It will be called downloaded.pdf
**header('Content-Disposition: attachment; filename="downloaded.pdf"');**

// The PDF source is in original.pdf
readfile('original.pdf');
?> 
```

check the manual [here](http://php.net/manual/en/function.header.php)

Also you can move the file over onto an iframe but that's a security risk, hence another topic.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T08:02:54.130

您不需要为此使用 AJAX。尝试使用这样的东西：

```
$(function(){
    $('#downloadPdf').click(function(){
        var id = $('#fileId').val();
        window.open(location.protocol + '//' + location.hostname + '/includes/download_pdf.php?file_id=' + id);
        return false;
    });
}); 
```

干杯!

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T08:05:14.263

这里不需要ajax。

尝试使用 Rory McCrossan 的解决方案： [POST 到服务器，接收 PDF，使用 jQuery 交付给用户](https://stackoverflow.com/questions/2186562/post-to-server-receive-pdf-deliver-to-user-w-jquery)

使用插件或简单地链接到文件并确保您的服务器发送正确的标题（否则您可以使用 php 读取文件并从那里输出：http: [//www.saschakimmel.com/2009/05/php-提示用户下载特定文件/](http://www.saschakimmel.com/2009/05/php-prompt-the-user-to-download-a-specific-file/)）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-02T08:07:32.617

在页面上有一个不可见`<iframe/>`的，并创建一个`<form>`带有属性`method="POST" action="includes/download_pdf.php" target="name_of_the_iframe"`的，添加`<input type="hidden" name="file_id" value="the_value"/>`到它，并提交它。

以上所有内容都可以在 JavaScript 中完成，而无需将这种标记放入页面中，以保持内容整洁。这些都不是ajax。

# java - 动态类型转换？

> ID：10409810
> 
> 赞同：4
> 
> 时间：2012-05-02T07:57:39.913
> 
> 标签：java, reflection

我有一堂课

```
A<T> {
    T value;
    public T getValue() { return value; }
    public void setValue(T value) { this.value = value;}
} 
```

并尝试将它与这样的非泛型方法一起使用：

```
A<?>[] as = new A<?>[2]; as[0] = new A<Integer>(); as[1] = new A<String>();
for(A<?> a : as) {
    someobj.put(a.getValue()); // <-- got an error "The method put(String) is not applicable for the arguments (capture#2-of ?)"
} 
```

someobj 有 put(String s)、put(Integer i) 等。

我怎样才能做一些像动态类型转换和修复错误的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T08:00:26.863

您在实例化 A 时提供的信息会在您将这些信息放入`A<?>`. 泛型只对编译器可见。

你基本上是在试图打电话`someobj.put(Object o)`——那是不存在的。您必须向下转换为要调用的参数类型。没有对方法的参数进行动态调度，仅在调用它的对象上进行。编译器必须准确选择要使用的方法——put(String) 或 put(Object)。这不能在运行时决定。

从理论上讲，如果您真的想在您的场景中进行动态调度，您将不得不使用访问者模式。不推荐，太麻烦了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T08:35:40.760

正如 Marko 所解释的，您的通用 A 的类型丢失了。但是您可以做的是使用反射来调用*正确*的“放置”方法。

像这样的东西：

```
A<?>[] as = new A<?>[2]; as[0] = new A<Integer>(); as[1] = new A<String>();
for(A<?> a : as) {
    Method m = someobj.getClass().getMethod("put", a.getValue().getClass());
    m.invoke(somobj, a.getValue());
} 
```

# eclipse - SOAPFaultException：“没有一个策略替代可以被满足”，运行 web 服务客户端 (ApacheCXF) 时

> ID：10409811
> 
> 赞同：3
> 
> 时间：2012-05-02T07:57:47.033
> 
> 标签：eclipse, cxf, webservices-client

我正在通过给定的 3rd-party wsdl 实现 web 服务客户端，我想确保我能够直接发送 SOAP 请求，所以我使用soapUI 生成请求，发送了 2 个参数：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:alm="http://www.xxxxx.com/services/2011/10/Thirdparty" xmlns:ns="http://www.xxxxx.com/AlmedaDataDistribution/2011/10">
    <soapenv:Header>
        <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
            <wsse:UsernameToken>
                <wsse:Username>dummyUsername</wsse:Username>
                <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">dummyPassword</wsse:Password> 
            </wsse:UsernameToken>
        </wsse:Security>
    </soapenv:Header>
    <soapenv:Body>
        <alm:method>
            <ns:param1>dummyParam1</ns:param1>
            <ns:param1>dummyParam2</ns:param2>
        </alm:method>
    </soapenv:Body>
</soapenv:Envelope> 
```

得到如下响应，似乎还可以：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
    <soapenv:Body>
        <methodResponse xmlns="http://www.xxxxx.com/services/2011/10/Thirdparty">
            <theResponse xmlns="http://www.xxxxx.com/Thirdparty/2011/10">
                 <asdf>abc-1</asdf>
                 <qwer>123-1</qwer>
            </theResponse>
            <theResponse xmlns="http://www.xxxxx.com/Thirdparty/2011/10">
                 <asdf>abc-2</asdf>
                 <qwer>123-2</qwer>
            </theResponse>
        </methodResponse>
    </soapenv:Body>
</soapenv:Envelope> 
```

然后我开始从 WSDL 生成 web 服务客户端（链接如下：[https](https://www.xxxxx.com/ThirdpartyService?wsdl) ://www.xxxxx.com/ThirdpartyService?wsdl ）由于 eclipse 不支持直接从 HTTPS 链接生成，所以我下载了 .wsdl 和依赖.xsd 文件并在本地生成客户端。生成后修改客户端，通过apache-cxf API添加用户名和密码

```
ThirdpartyService ss = new ThirdpartyService();
ThirdpartyServicePortType port = ss.getThirdpartyServiceSOAP11PortHttps(); 

Client client = ClientProxy.getClient(port);
org.apache.cxf.endpoint.Endpoint cxfEndpoint = client.getEndpoint();

Map<String,Object> outProps = new HashMap<String,Object>();
outProps.put(WSHandlerConstants.ACTION, WSHandlerConstants.USERNAME_TOKEN);
outProps.put(WSHandlerConstants.USER, "dummyusername");
outProps.put(WSHandlerConstants.PASSWORD_TYPE, WSConstants.PASSWORD_TEXT);
outProps.put(WSHandlerConstants.PW_CALLBACK_CLASS, ClientPasswordCallback.class.getName());

WSS4JOutInterceptor wssOut = new WSS4JOutInterceptor(outProps);
cxfEndpoint.getOutInterceptors().add(wssOut);

ss.method(param1,param2); 
```

但是，当我开始运行客户端时，我得到了以下奇怪的异常（似乎与 WS-Security 无关）：

```
org.apache.cxf.ws.policy.AssertionBuilderRegistryImpl handleNoRegisteredBuilder
警告：没有注册类型 {http://www.xxxxx.com/module/throttle}ServiceThrottleAssertion 的断言生成器。
线程“主”javax.xml.ws.soap.SOAPFaultException 中的异常：无法满足任何备选策略。

```

我还能说的是我的开发环境：

```
操作系统SP3
Java 1.6.0_027
Apache-CXF 2.6.0
雄猫 6.0.35
日食靛蓝 SR1
动态网页模块 2.5

```

我将不胜感激任何线索和帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T19:02:53.947

我忘了告诉我同时使用axis1.4实现了一个客户端并暂时解决了我的问题。但我仍然不明白为什么这个 web 服务（似乎）框架依赖。

# ruby-on-rails - 命名间距模型时。包含文件夹的名称应该是复数形式吗？

> ID：10409812
> 
> 赞同：4
> 
> 时间：2012-05-02T07:57:49.730
> 
> 标签：ruby-on-rails, ruby-on-rails-3

当命名间距模型时。包含文件夹的名称应该是复数形式吗？

即`models/users/comment.rb`或`models/user/comment.rb`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T08:07:09.520

复数形式也可以，但我认为使用单数形式是个好习惯。

毕竟，模型默认情况下是单数的。

```
rails g model User/Comment 
```

迁移后，通过以下方式访问它：

```
User::Comment 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T10:10:16.450

它必须与命名空间完全匹配，因此使命名空间单数意味着文件夹的单数。

我使用单数，我认为这很常见。毕竟，模型的路径是关于一个模型，而不是集合。复数在 Rails 中用于集合，如数组变量或数据库表名。控制器使用复数，我认为是因为 REST 约定。其他一切都是独一无二的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T10:45:39.247

只需像这样加载：[命名空间模型](http://m.onkey.org/namespaced-models)

```
Rails::Initializer.run do |config|
  # Your existing stuff

  config.load_paths << "#{RAILS_ROOT}/app/models/pets"
end 
```

# java - 将数据从队列中自动推送到 JAVA 中的 UI

> ID：10409815
> 
> 赞同：0
> 
> 时间：2012-05-02T07:57:58.167
> 
> 标签：java, list, queue, push

我有一个队列。当队列上的消息被消费时，我将消息设置在一个列表中并在 UI/jsp 页面中获取它。我定期运行 UI 页面，以便每当消息被消费并设置在列表中时我可以在不刷新的情况下在 UI 中显示它们。

但我不想定期更新 UI，而是每当在列表中设置新消息时，我希望这些新消息自动显示在 UI 上。

我不知道该怎么做。有人帮助我。提前致谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T09:08:52.137

维护列表中消息数量的计数，并定期将其与列表长度进行比较。当任何新消息将插入列表中时，此计数将小于（更新的）消息列表的长度，因此更新应用程序的 UI 组件。

# r - 在 Rcpp 中评估环境中的表达式

> ID：10409822
> 
> 赞同：6
> 
> 时间：2012-05-02T07:58:52.863
> 
> 标签：r, rcpp

我正在研究是否有可能`with()`在 Rcpp 环境中具有与 R 中相同的功能。

例如，在 RI 中可以创建一个环境，添加两个变量并使用`with()`仅使用变量名来评估表达式：

```
e <- new.env()
e$x <- 1
e$y <- 2

with(e,
     x + y
     ) 
```

我可以在 Rcpp 中做类似的事情，但它需要对环境进行索引：

```
f <- cxxfunction(signature(env="environment"), '
Environment e(env);
double Res = (double)e["x"] + (double)e["y"];
return(wrap( Res ));

', plugin = "Rcpp" )

f(e) 
```

是否可以仅使用 Rcpp 中的变量名来评估表达式？我问的原因是因为我想编写一种动态 C++ 函数，您可以在其中添加表达式。例如，一些无效的虚拟代码：

```
f <- cxxfunction(signature(env="environment"), sprintf('
Environment e(env);
double Res;
// Res = with(e, %s );
return(wrap( Res ));
','x + y'), plugin = "Rcpp" ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T12:21:29.103

我不认为你可以：在*compile-time*，你的变量是未知的。你必须求助于动态查找，这就是 R 所做的。本质上，您需要为您的`x + y`表达式重新创建解析器。

# xcode - 单击可可MAC中的按钮时导航到不同的窗口

> ID：10409824
> 
> 赞同：0
> 
> 时间：2012-05-02T07:59:01.577
> 
> 标签：xcode, macos, cocoa

我是在 MAC 上编程的新手。我在 iOS 上做过编程，但使用的是故事板，所以对之前使用的 xib 格式不太熟悉。

我想实现这个非常基本的，我无法弄清楚如何。

1.  如何导航到不同的窗口？

2.  如何设置按钮的动作，即：如何设置按钮点击事件或按钮翻转事件？

3.  将按钮从界面构建器链接到第一响应者或应用程序或文件所有者是什么意思。

4.  我们是否必须像在 iOS 的故事板中那样为每个 xib 设置类？

非常感谢 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T10:57:58.540

> 如何导航到不同的窗口？

在 Mac 上，许多窗口可以同时可见，因此您不必在它们之间导航，而是显示和隐藏它们，也许将它们带到前面等。具体做什么取决于具体情况。

> 如何设置按钮的动作，即：如何设置按钮点击事件或按钮翻转事件？

您可以通过控制单击 xib 中的按钮并拖动到要处理它的控制器对象来为按钮设置操作。然后，您可以选择`IBAction`单击按钮时要执行的方法（您必须首先在类的头文件中定义操作）。要跟踪鼠标悬停事件，请查看`NSView`s`-addTRackingRect:owner:userData:assumeInside:`方法。这可能会有所帮助。

> 将按钮从界面构建器链接到第一响应者或应用程序或文件所有者是什么意思。

这只是确定哪个对象获取操作消息。

> 我们是否必须像在 iOS 的故事板中那样为每个 xib 设置类？

不，任何对象都可以加载 xib 并使自己成为所有者

```
[NSBundle loadNibNamed: @"whatever" owner: objectThatWillOwnIt]; 
```

* * *

一些资源

Apple 的[窗口编程指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/WinPanel/WinPanel.html#//apple_ref/doc/uid/10000031i)

Apple 的工作[表编程指南](https://developer.apple.com/library/mac/#documentation/cocoa/conceptual/sheets/sheets.html)（工作表是出现在其他窗口顶部的窗口，例如打开和保存面板。

[Mac OS X 的 Cocoa 编程](http://www.amazon.co.uk/Cocoa-Programming-Mac-OS-X/dp/0321774086/ref=sr_1_1?s=books&ie=UTF8&qid=1336036387&sr=1-1)，Aaron Hillegass（我从本书的第一版学习了 Cocoa）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T15:32:40.197

如果您的应用程序中有不同的 XIB 文件和控制器，则完全同意 JeremyP。

但是，如果您有一个简单的应用程序，我建议保留 1 个窗口，并创建自定义视图（可以在检查器中找到）。

然后，您可以将内容添加到这些自定义视图中，当您想要在它们之间切换时，您可以在应用程序中键入：

```
[window setContentView: secondCustomView]; 
```

然后稍后切换回来：

```
[window setContentView: firstCustomView]; 
```

有关良好的编码实践，请参阅 JeremyP 的回答。只是想我会分享我的 2 美分 :)

# assembly - 应该使用哪个寄存器来存储计数？

> ID：10409828
> 
> 赞同：-2
> 
> 时间：2012-05-02T07:59:16.910
> 
> 标签：assembly, x86-16

我正在为以下程序编写代码，

## 客观的：

计算用户按下的空格数。如果按下 enter 则中断。

## 代码：

```
.MODEL SMALL
.STACK 100H
.DATA
    TEXT DB "Enter Character"
.CODE
    MOV AX,9
    MOV DX,TEXT
    INT 21H
    BACK:
        INT21H
        CMP AL, " "
        JE INCREMENT
        CMP AL, "\n"
        JE OUT
        JMP BACK
INCREMENT:
        INC ; which register do I use here? I feel that I am out of registers
        LOOP BACK
OUT:
;display the count 
```

在上面的代码中，我标记了我感觉没有任何寄存器可供使用的区域。我必须在代码中使用`AX`, `AL`, `DX`,`DL`寄存器。我可以使用哪个其他寄存器来存储计数？请帮忙，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T08:57:07.533

您可以使用以下通用寄存器：

`AX`（`AH`是 8 个最高有效位`AX`，`AL`是 8 个最低有效位`AX`）
`BX`（`BH`是 8 个 MSB `BX`，`BL`是 8 个 LSB `BX`）
`CX`（`CH`是 8 个 MSB `CX`，`CL`是 8 个 LSB `CX`）
`DX`（`DH`是 8 个 MSB `DX`，`DL`是 8 个 LSB `DX`）
`BP`（个人半不可直接访问）
`SI`（个别半不可直接访问）
`DI`（个别半不可直接访问）

顺便说一句，在从键盘读取字符之前，您必须设置`AH`为 1 。`int 21H``AL`

如果您想使用`int 21H`函数 9 打印它，您的文本字符串必须以美元符号结尾。

此外，Enter 的代码是 13 ('\r')，而不是 10 ('\n')。

还有几个问题：

*   您的堆栈太小而无法中断。将其增加到 4 KB。如果你不这样做，他们会覆盖你程序或其他地方的一些代码或数据。你不想要那个。
*   由于这是一个 .EXE 程序（而不是 .COM），您必须设置`DS`为指向数据段。有关如何执行此操作的信息，请参阅您的书或注释或汇编器文档。`ES`可能应该设置为相同的值。

# java - java - 如何构造一个转义java中所有元字符的模式？

> ID：10409831
> 
> 赞同：0
> 
> 时间：2012-05-02T07:59:45.047
> 
> 标签：java

我想匹配其中一个不断变化的单词对（循环遍历字符串数组）。问题是这个词可能包含元字符，我不知道是哪些，所以手动转义它们有点问题。有没有办法构造一个已经在java中转义所有元字符的字符串模式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T08:10:34.683

如果您专门谈论正则表达式，正如“匹配单词”所暗示的那样，那么您想要的方法是[Pattern.quote](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#quote%28java.lang.String%29)。

在更一般的意义上，当您不知道您的目标语法是什么时，没有办法自动转义“元字符”。原则上，任何字符都可能具有特殊的非字面意义，而转义它的方式完全取决于目标语法。在正则表达式中，它以反斜杠为前缀，但对于您的问题，不清楚您是否在谈论正则表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T08:11:37.130

你有一个带有元字符的字符串，但你不知道究竟是什么元字符。但在某种程度上你知道元字符是什么。

如果您知道所有可以出现在字符串中的元字符，只需将它们列在组中：（`[\*abc\$\.\,\s]`该组表示在正则表达式中您可以遇到这些字符之一，例如星号、a、b、c、bucks ($)、point 、逗号、空格）。您也可以使用`^`( `[^....]`) 反转逻辑。

# .net - 是否可以将所有者 P/C 授权类型与具有 DotNetOpenAuth 的公共客户端一起使用？

> ID：10409833
> 
> 赞同：0
> 
> 时间：2012-05-02T07:59:47.253
> 
> 标签：.net, oauth-2.0, dotnetopenauth

在撰写本文时，此行为在 DotNetOpenAuth 的 master 分支和 v4.0 分支中有所不同。我将资源所有者密码凭据授予类型与公共客户端一起使用。master 分支按预期发出令牌。v4.0 分支认为请求无效。执行流程在`AccessRequestBindingElement.ProcessIncomingMessage`方法中结束，其中执行以下代码：

```
// Check that the client secret is correct.
var client = this.AuthorizationServer.GetClientOrThrow(accessRequest.ClientIdentifier);
string secret = client.Secret;
ErrorUtilities.VerifyProtocol(!string.IsNullOrEmpty(secret), Protocol.unauthorized_client); // an empty secret is not allowed for client authenticated calls. 
```

由于客户端是公开的，因此代码会产生错误。然而，上面代码中的注释暗示授权是经过客户端身份验证的，而不是资源所有者密码凭据。我叫错了吗？

在主分支中，相同的调用有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T13:35:49.337

v4.0 不支持该场景，而 master 分支（计划用于 v4.1）*目前*支持。DotNetOpenAuth 是否继续支持使用资源所有者密码授予类型的公共客户端仍有待确定，因为如果用户想要查看授权客户端，它会导致授权服务器以合理的用户体验撤销令牌的能力出现问题。

# regex - 如何编写检查单词是否以字母开头并包含{3,6}数字和字母的正则表达式？

> ID：10409834
> 
> 赞同：3
> 
> 时间：2012-05-02T07:59:51.573
> 
> 标签：regex

我需要编写检查以下单词的正则表达式：必须以字母开头，可能包含 {3,16} 数字和\或字母。

我尝试了以下正则表达式`\b[A-Za-z]+[A-Za-z0-9]*{3,16}\b`，但出现错误。怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T08:03:53.010

你的问题是你的第二个角色类两者都有`*`，`{3,16}`这意味着`{3,16}`没有什么可以量化的。另外，您声明输入字符串必须仅以一个字母开头，但`+`表示`1..many`. 我想你想要：

```
\b                  // boundary
[A-Za-z]            // single character
[A-Za-z0-9]{2,15}   // A further 2-15 alpha numerics
\b                  // boundary 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T08:12:25.750

由于`*`. 删除它以获得有效的正则表达式：

```
\b[A-Za-z]+[A-Za-z0-9]{3,16}\b 
```

然而，这个正则表达式并不是你想要的，它是：

```
\b[A-Za-z][A-Za-z0-9]{2,15}\b 
```

您需要`{2,15}`（而不是`{3,16}`），因为第一个字符对其中一个很重要`{3,16}`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T08:28:51.043

一些示例 Python 代码：

```
subject = """
This is som3 s@mpl3 text.

One possible sixteen letter word is abstractednesses. 2012 is not
a word as it does not contain any alphabetic charat3rs.

Unfortunately conventionalizations contains 20 characters.
"""

import re
words = re.compile('((?<=\s)[A-Za-z]\w{2,15})\W', re.M)
res = words.findall(subject)

# res is:
# ['This', 'som3', 'text', 'possible', 'sixteen', 'letter', 'word', 
#  'abstractednesses', 'word', 'does', 'contain', 'alphabetic', 
#  'charat3rs', 'Unfortunately', 'contains', 'characters'] 
```

# spring - 当我使用 Struts2-Spring3-Hibernate3 框架添加用户时，它向我显示了错误

> ID：10409841
> 
> 赞同：0
> 
> 时间：2012-05-02T08:00:34.603
> 
> 标签：spring, hibernate, struts

**错误是：**

```
type Exception report

message 

description The server encountered an internal error () that prevented it from fulfilling this request.

exception 

Unable to instantiate Action, addUserAction,  defined for 'addUser' in namespace '/'addUserAction
    com.opensymphony.xwork2.DefaultActionInvocation.createAction(DefaultActionInvocation.java:307)
    com.opensymphony.xwork2.DefaultActionInvocation.init(DefaultActionInvocation.java:388)
    com.opensymphony.xwork2.DefaultActionProxy.prepare(DefaultActionProxy.java:187)
    org.apache.struts2.impl.StrutsActionProxy.prepare(StrutsActionProxy.java:61)
    org.apache.struts2.impl.StrutsActionProxyFactory.createActionProxy(StrutsActionProxyFactory.java:39)
    com.opensymphony.xwork2.DefaultActionProxyFactory.createActionProxy(DefaultActionProxyFactory.java:47)
    org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:478)
    org.apache.struts2.dispatcher.ng.ExecuteOperations.executeAction(ExecuteOperations.java:77)
    org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:91)

root cause 

java.lang.ClassNotFoundException: addUserAction
    org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1358)
    org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1204)
    com.opensymphony.xwork2.util.ClassLoaderUtil.loadClass(ClassLoaderUtil.java:146)
    com.opensymphony.xwork2.ObjectFactory.getClassInstance(ObjectFactory.java:96)
    com.opensymphony.xwork2.spring.SpringObjectFactory.getClassInstance(SpringObjectFactory.java:212)
    com.opensymphony.xwork2.spring.SpringObjectFactory.buildBean(SpringObjectFactory.java:132)
    com.opensymphony.xwork2.ObjectFactory.buildBean(ObjectFactory.java:139)
    com.opensymphony.xwork2.ObjectFactory.buildAction(ObjectFactory.java:109)
    com.opensymphony.xwork2.DefaultActionInvocation.createAction(DefaultActionInvocation.java:288)
    com.opensymphony.xwork2.DefaultActionInvocation.init(DefaultActionInvocation.java:388)
    com.opensymphony.xwork2.DefaultActionProxy.prepare(DefaultActionProxy.java:187)
    org.apache.struts2.impl.StrutsActionProxy.prepare(StrutsActionProxy.java:61)
    org.apache.struts2.impl.StrutsActionProxyFactory.createActionProxy(StrutsActionProxyFactory.java:39)
    com.opensymphony.xwork2.DefaultActionProxyFactory.createActionProxy(DefaultActionProxyFactory.java:47)
    org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:478)
    org.apache.struts2.dispatcher.ng.ExecuteOperations.executeAction(ExecuteOperations.java:77)
    org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:91) 
```

因此，它显示容器找不到 addUserAction。但是，请查看我的 struts.xml 和 applicationContext.xml：

**struts.xml：**

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC "-//Apache Software Foundation//DTD Struts Configuration 2.1//EN" "http://struts.apache.org/dtds/struts-2.1.dtd">
<struts>
<constant name="struts.objectFactory" value="spring"/>
<include file="struts-default.xml"></include>
<package name="default" extends="struts-default">
 <action name="addUser" class="addUserAction">
    <result name="success">/add_success.jsp</result>
    <result name="error">/add_error.jsp</result>
  </action>
</package>
</struts> 
```

**applicationContext.xml 的一部分：**

```
<bean id="userService" class="com.rainbow.service.impl.UserServiceImpl">
        <property name="userDAO" ref="userDAO"></property>
    </bean>
<bean id="addUserAction" class="com.rainbow.action.AddUserAction" scope="prototype">
        <property name="userService" ref="userService"></property>
    </bean> 
```

很明显 addUserAcion 是“com.rainbow.action.AddUserAction”，所以我找不到原因，希望有人能帮助我，非常感谢！

**网页.xml：**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" 
    xmlns="http://java.sun.com/xml/ns/javaee" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
    http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

  <welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
  </welcome-file-list>

  <filter>
    <filter-name>struts2</filter-name>
    <filter-class>
        org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter
    </filter-class>
  </filter>

  <filter-mapping>
    <filter-name>struts2</filter-name>
    <url-pattern>/*</url-pattern>
  </filter-mapping>

  <listener>
  <listener-class>
    org.springframework.web.context.ContextLoaderListener
  </listener-class>
  </listener>
  <context-param>  
      <param-name>contextConfigLocation</param-name>  
      <param-value>classpath*:applicationContext.xml</param-value>  
  </context-param>
  </web-app> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T09:52:03.627

你在类路径中有所有必要的 jar 文件吗？你有struts2-spring-plugin jar 文件吗？

# .net - ado.net 的 SQLite 中的混淆

> ID：10409843
> 
> 赞同：0
> 
> 时间：2012-05-02T08:00:38.493
> 
> 标签：.net, sqlite

我刚开始使用 SQLite。我想通过 ADO 进行连接。我搜索了驱动程序并找到了其中 2 个：-

1.  [http://system.data.sqlite.org/](http://system.data.sqlite.org/index.html/doc/trunk/www/downloads.wiki)
2.  [http://sqlite.phxsoftware.com/](http://sourceforge.net/projects/sqlite-dotnet2/)

我对使用哪一个感到困惑。我尝试安装两者，它们都在同一个命名空间中。他们都一样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T08:09:18.963

第一个实际上是第二个的叉子。我说的是 fork，但实际上第一个是第二个*的*直系后代：

> 这是用于 SQLite 的流行 ADO.NET 适配器的一个分支，称为 System.Data.SQLite。System.Data.SQLite 的创始人罗伯特·辛普森（Robert Simpson）知道这个分叉，并表示同意，并在新的 Fossil 存储库上拥有提交权限。SQLite 开发团队打算继续维护 System.Data.SQLite。
> 
> 历史版本以及原始支持论坛仍可在[http://sqlite.phxsoftware.com/](http://sqlite.phxsoftware.com/)上找到，尽管自 2010 年 4 月以来此版本没有更新。

参考：[http ://system.data.sqlite.org/index.html/doc/trunk/www/index.wiki](http://system.data.sqlite.org/index.html/doc/trunk/www/index.wiki)

底线是：使用第一个。它几乎总是包含最新版本的 sqlite，而且维护与 sqlite 本身的维护紧密耦合。

# sql - 在 Oracle SQL 查询的结果中包含列名？

> ID：10409845
> 
> 赞同：2
> 
> 时间：2012-05-02T08:00:42.383
> 
> 标签：sql, database, oracle

我在`SELECT`基于 Oracle 数据库的软件工具中输入 SQL 查询 (...)。

现在，我想在结果数据的第一行中包含列的名称。否则，在导出时它们不包括在内，我还没有找到任何允许后者的选项。

有谁知道如何在 SQL 查询的结果中包含列名？

我知道如果列具有类型值（例如整数）会出现一些问题，但是我可能会简单地将所有内容（如何？）转换为字符串。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T09:02:54.103

这将是一种快速而肮脏的方法来做你想做的事。如果列是非 varchar2 类型，那么您需要将第二个`SELECT`结果转换为`VARCHAR2`.

有关转换语法，请参见[TO_CHAR](http://www.techonthenet.com/oracle/functions/to_char.php)。

```
SELECT 'colname1',
       'colname2',
       'colname3',
       1 AS ordering
  FROM dual
UNION
SELECT colname1,
       colname2,
       colname3,
       2 AS ordering
  FROM yourtable
ORDER BY ordering; 
```

如果您真的不想看到“排序”列，那么您可以将整个语句包装在另一个选择中，该选择只选择您想要查看的列。

不过，我必须同意这些评论，理想情况下，您应该能够通过 IDE 工具而不是解决方法导出元数据。

希望能帮助到你...

# java - 收集和显示应用程序跟踪和异常的工具是什么？

> ID：10409847
> 
> 赞同：4
> 
> 时间：2012-05-02T08:00:49.327
> 
> 标签：java, logging, monitoring, logster

我们正在开发一个大型 Java 应用程序并开始设置应用程序监控，因为我们发现问题太晚了，而且解析日志文件很无聊。

我们已经在 Graphite 和 JMXTrans 上建立了 POC。它工作正常，我们开始有一些有趣的图表。

但我现在想知道我们是否应该为我们想要追踪的所有内容使用图表。我认为在某处有消息会很好，基本上，我只想进入日志文件作为调试问题的最后机会。如果我在生产中遇到异常，我希望自动收到警告并知道问题出在哪里。

我发现[Sentry](http://sentry.readthedocs.org/en/latest/index.html)是一个从客户端收集跟踪的 web 应用程序，以及[logster](https://github.com/etsy/logster)，它解析日志文件并将匹配某些模式的行发送到 Graphite。

我认为第一个的哲学更好。基本上，我想将追踪的内容与追踪的方式区分开来。我们可以使用像 SLF4J 这样的日志外观，然后根据级别或其他一些规则（实例例外中的模式）将跟踪分派到日志文件、NoSQLDB、专用工具（如 Sentry 或 Graphite 等）。

所以基本上，你用什么来监控应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T17:58:19.703

您可能想看看[LogDigger](http://logdigger.com/)。代替监视日志并查找错误和相关日志条目，您可以获得包含请求日志、POST 参数和其他详细信息的通知。

披露：我在 LogDigger 工作，所以我可能有偏见。

# ajax - 未捕获的语法错误：错误意外令牌：尝试使用 Rails Web 服务时

> ID：10409850
> 
> 赞同：1
> 
> 时间：2012-05-02T08:01:00.810
> 
> 标签：ajax, html, jquery, flexigrid

我正在尝试在我的 html 页面中使用 Ruby on Rails RESTful Webservices ..

我收到了 json 响应，但出现了未捕获的语法错误：错误意外令牌：..

我正在尝试在 flexigrid 中使用该 json 数据..

这是我的代码...

```
<!-- Copyright (c) 2012 Mobile Developer Solutions -->
<!DOCTYPE HTML>
<html>
  <head>
    <meta http-equiv="Content-type" name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no, width=device-width">
    <title>MDS PhoneGap API Demo with jQuery Mobile</title>

    <link rel="stylesheet" href="jquery.mobile/jquery.mobile-1.0.1.min.css" />
    <link rel="stylesheet" href="css/flexgrid/flexigrid.css" />
    <link rel="stylesheet" href="css/popup/jquery-ui.css" />

    <script type="text/javascript" src="jquery.mobile/jquery-1.6.4.min"></script>
    <script type="text/javascript" src="jquery.mobile/jquery.mobile-1.0.1.min.js"></script>
    <script type="text/javascript" charset="utf-8" src="phonegap-1.4.1.js"></script>
    <script type="text/javascript" charset="utf-8" src="js/jquery.cookie.js"></script>
    <script type="text/javascript" charset="utf-8" src="js/jquery-ui.min.js"></script>
    <script type="text/javascript" charset="utf-8" src="js/flexgrid/flexigrid.js"></script>

  <script type="text/javascript">
    var idt=0;  
    var $dialog;
    var $editDialog;
    var $showDialog;
    var id;
    $(document).ready(function(){   
        $("#flex1").flexigrid({
                url: 'http://10.10.8.35:3000/users/grid_data',
                dataType: 'jsonp',
                type: 'GET',
                processData: false,
                contentType: "application/json",
                colModel : [
                    {display: '<input type="checkbox" id="chkAllFile" onclick="javascript:CheckAll(this);"/>', name: '', width: 20, sortable: false, align: 'center', process: AttachCheckBox},
                    {display: 'Edit', name : 'edit', width : 20, sortable : true, align: 'center',process:EditUser},
                    {display: 'Delete', name : 'delete', width : 30, sortable : true, align: 'center',process:DeleteUser},
                    {display: 'ID', name : 'id', width : 20, sortable : true, align: 'center'},
                    {display: 'First Name', name : 'firstname', width : 90, sortable : true, align: 'left',process:ShowUser},
                    {display: 'Last Name', name : 'lastname', width : 90, sortable : true, align: 'left'},
                    {display: 'Email', name : 'email', width : 180, sortable : true, align: 'left'}             
                    ],
                buttons : [
                    {name: 'Add User', bclass: 'add', onpress : AddUser},
                    {separator: true}
                    ],
                searchitems : [
                    {display: 'firstname', name : 'firstname'},
                    {display: 'email', name : 'email', isdefault: true}
                    ],
                sortname: "id",
                sortorder: "asc",
                usepager: true,
                useRp: true,
                rp: 10,         
                showTableToggleBtn: true,
                width: 515,
                height: 255
                });                
    });

  </script>
    </head>

  <body>
    <div data-role="page" class="type-interior" data-theme="b">

    <div data-role="header" data-theme="b">
        <h1>Demo</h1>
    </div>

    <div data-role="content" data-theme="c">            
        <h1 style="float:left;">Users</h1>
        <div style="clear:both;"></div>
        <div id="somediv"></div>
        <div class="Flexgrids"> 
            <table id="flex1" style="display:none"></table>
            <div id='confirm'>
                <div class='header'><span>Confirm</span></div>
                    <div class='message'></div>
                    <div class='buttons'>
                    <div class='no simplemodal-close'>No</div><div class='yes'>Yes</div>
                </div>
            </div> 
        </div>
    </div>

    <div data-role="footer" data-theme="b">
        <p>&copy; 2012 Mobile Developer Solutions</p>
    </div>  
    </div>  
  </body>
</html> 
```

请大家帮帮我...

您认为我以正确的方式调用服务吗...

我收到了未捕获的语法错误：意外令牌：....

请帮我解决这个问题...

提前致谢 ...！！！

# iphone - 我可以在IOS上使用mach_star/mach_override吗？如果不能，我该怎么办？

> ID：10409861
> 
> 赞同：0
> 
> 时间：2012-05-02T08:01:50.510
> 
> 标签：iphone, ios, hook

我想在 IOS 上挂钩一些套接字功能（如发送、接收等）。

准备使用mach_star/mach_override的时候，发现好像只有Mac OS X才有。所以，谁能帮帮我？</p>

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T08:04:40.163

当然不。您将无法注入其他进程——这在技术上是不允许的，因为您的应用程序在沙箱中运行并且无权访问其他进程。它可能适用于您自己的流程，但这有什么意义呢？

# python - 剔除 csv.DictReader 中的值

> ID：10409862
> 
> 赞同：0
> 
> 时间：2012-05-02T08:01:55.943
> 
> 标签：python, csv

我正在使用一个巨大的 csv，我正在使用 csv.DictReader 进行解析，什么是根据键名修剪结果字典中数据的最有效方法。说，只保留包含 "JAN" 的键。

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T08:37:22.620

好的，这是一个使用 csv.DictReader 的愚蠢示例`/etc/passwd`

```
#!python
keepers = dict()
r = csv.DictReader(open('/etc/passwd', 'r'), delimiter=":", \
      fieldnames=('login','pw', 'uid','gid','gecos','homedir', 'shell'))
for i in r:
    if i['uid'] < 1:
        continue
    keepers[i['login']]=i 
```

现在，尝试将其应用于您的问题......我只是猜测您正在根据“来自结果字典”这一短语构建字典字典。很明显，读取/对象将为每个输入记录返回一个字典。因此，文件的每一行都会有一个结果字典（假设任何常见的 CSV“方言”）。

当然，如果条件成立，我可以使用`if i['uid'] > 1`或仅添加到我的“守门员”中。`if "Jan" in i['gecos']`我这样写是为了强调如何轻松跳过那些您不感兴趣的值，以便您的`for`套件的其余部分可以对那些感兴趣的记录做各种有趣的事情。

但是，这个答案太简单了，我不得不怀疑我没有理解这个问题。（我使用 ''/etc/passwd'' 和一个冒号分隔的列表只是因为它是一种众所周知的格式，并且在 Linux、Unix 和 MacOS X 系统上都可以轻松获得世界可读的副本）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T08:14:43.733

```
result = {key:val for key, val in row.items() if 'JAN' in key} 
```

从哪里`row`获得字典`DictReader`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T08:14:54.930

你可以这样做：

```
>>> with open('file.csv') as f:
...   culled = [{k: d[k] for k in d if "JAN" in k} for d in csv.DictReader(f)] 
```

当我在具有以下内容的简单 CSV 文件上尝试此操作时：

```
JAN11,FEB11,MAR11,APR11,MAY11,JUN11,JUL11,AUG11,SEP11,OCT11,NOV11,DEC11,JAN12,FEB12,MAR12,APR12
1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16
17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32 
```

我得到以下结果：

```
>>> with open('file.csv') as f:
...   culled = [{k: d[k] for k in d if "JAN" in k} for d in csv.DictReader(f)]
... 
>>> culled
[{'JAN11': '1', 'JAN12': '13'}, {'JAN11': '17', 'JAN12': '29'}] 
```

# java - 删除文件中的一行（Android/java）

> ID：10409865
> 
> 赞同：3
> 
> 时间：2012-05-02T08:02:10.540
> 
> 标签：java, android

在我的应用程序（Android）中，我创建了一个文件。在某些情况下，我会在此文件中逐行添加。然后我逐行向服务器发送数据。当所有传输都正常时，我删除文件，如下所示：

```
fos_kasowanie_pliku = openFileOutput(FILENAME, Context.MODE_PRIVATE);
fos_kasowanie_pliku.write("".getBytes());
fos_kasowanie_pliku.close(); 
```

将其发送到服务器后，我可以只删除 1 行（第一行）吗？我读到我应该在没有这一行的情况下重写文件。有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T08:10:29.617

您可以考虑使用数据库，您可以在其中添加记录，然后将数据发送到服务器，然后以您喜欢的任何顺序删除记录。与普通的旧文件不同，数据库旨在准确处理您所描述的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T08:04:53.813

不使用该行重写文件是唯一的方法。没有机制可以在不重写文件的情况下删除文件的开头。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T08:22:36.640

我认为重写删除该行的文件是唯一的解决方案。或者您可以尝试使用像 Sqlite 这样的数据库[。](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html)您将能够轻松删除记录

# php - cscript.exe 执行 myphp 文件。php重定向会在那里工作吗？

> ID：10409868
> 
> 赞同：0
> 
> 时间：2012-05-02T08:02:35.690
> 
> 标签：php, vbscript, wsh

我有一个包含此代码的 vbs 文件。

```
 Option Explicit
Dim objIEA
Set objIEA = CreateObject("InternetExplorer.Application")
objIEA.Navigate "https://localhost/abc/RSSDigest/RSSDigest.php?frequency=weekly"
objIEA.visible = false
While objIEA.Busy
Wend
objIEA.Quit
Set objIEA = Nothing 

```

在我的 php 文件中。我写了一个重定向代码。哪个重定向到同一个文件。如果通过 cscript.exe 执行 vbs 文件，是否会发生重定向

# android - 我应该如何增加微调器列表项的字体大小？

> ID：10409871
> 
> 赞同：33
> 
> 时间：2012-05-02T08:02:45.663
> 
> 标签：android, spinner

这是我的微调器的代码：

```
Spinner food = (Spinner) findViewById(R.id.spinner1);
ArrayAdapter<CharSequence> foodadapter = ArrayAdapter.createFromResource(
        this, R.array.item_array, android.R.layout.simple_spinner_item);
foodadapter.setDropDownViewResource(android.R.layout.simple_spinner_item);        
food.setAdapter(foodadapter); 
```

这是我创建微调器的布局文件的一部分：

```
<Spinner
        android:id="@+id/spinner1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:layout_toRightOf="@+id/textView1" /> 
```

这是`item_array`：

```
<resources>
    <string name="item_picker">Select an iten</string>
    <string-array name="item_array">
        <item>Pizza</item>
        <item>Burger</item>
        <item>Sandwiches</item>
        <item>Bread</item>
        <item>Pastries</item>
        <item>Snackers</item>
    </string-array>
</resources> 
```

注意：我不想要`simple_spinner_dropdown_item`.

我只想增加列表项的大小。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-05-02T08:07:04.890

将以下 xml 保存为布局文件夹中的 spinner_layout.xml

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
          android:id="@+id/spinnerTarget"
          android:layout_width="fill_parent"
          android:layout_height="wrap_content"
          android:textColor="#000000"
          android:textSize="13sp"
/> 
```

更改您想要的 textSize。并使用下面的适配器代码来填充它。

```
Spinner food = (Spinner) findViewById(R.id.spinner1);
ArrayAdapter<CharSequence> foodadapter = ArrayAdapter.createFromResource(
            this, R.array.item_array, R.layout.spinner_layout);
foodadapter.setDropDownViewResource(R.layout.spinner_layout);
food.setAdapter(foodadapter); 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2014-01-16T22:18:40.890

## 仅通过 XML

*只是为了帮助其他人，以防他们在 XML 中静态设置他们的 Spinner 条目。*

*如果您通过代码创建Spinner* ，则上述答案有效，但如果您通过 XML 设置 Spinner 条目，即使用`android:entries`，那么您可以使用以下两个主题设置调整文本大小和其他属性：

### 在你的`res/values/styles.xml`

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <style name="AppBaseTheme" parent="android:Theme.Holo">
    </style>

    <!-- Application theme. -->
    <style name="AppTheme" parent="AppBaseTheme">

        <!-- For the resting Spinner style -->
        <item name="android:spinnerItemStyle">
            @style/spinnerItemStyle
        </item> 

        <!-- For each individual Spinner list item once clicked on -->
        <item name="android:spinnerDropDownItemStyle">
            @style/spinnerDropDownItemStyle
        </item>

    </style>

    <style name="spinnerItemStyle">
        <item name="android:padding">10dp</item>
        <item name="android:textSize">20sp</item>
        <item name="android:textColor">#FFFFFF</item>
    </style>

    <style name="spinnerDropDownItemStyle">
        <item name="android:padding">20dp</item>
        <item name="android:textSize">30sp</item>
        <item name="android:textColor">#FFFFFF</item>
    </style>

</resources> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-10-29T11:26:03.043

以上解决方案都是在xml中硬编码的。

有一个替代解决方案允许您以编程方式更改它。 [https://stackoverflow.com/a/11494962/5089713](https://stackoverflow.com/a/11494962/5089713) 拥有 TextView 后，您可以对它进行任何操作，例如更改字体大小。

你的代码看起来像

```
Spinner food = (Spinner) findViewById(R.id.spinner1);

CharSequence[] strings = getActivity().getResources().getTextArray(R.array.item_array);
    ArrayAdapter<CharSequence> foodadapter = new ArrayAdapter<CharSequence>(getActivity(), android.R.layout.simple_spinner_item, strings){
        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            View view =super.getView(position, convertView, parent);
            TextView textView=(TextView) view.findViewById(android.R.id.text1);
            // do whatever you want with this text view
            textView.setTextSize(20);
            return view;
        }
    };

foodadapter.setDropDownViewResource(android.R.layout.simple_spinner_item);        
food.setAdapter(foodadapter); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-01-01T08:47:37.413

```
private OnItemSelectedListener spinner = new AdapterView.OnItemSelectedListener() {
    public void onItemSelected(AdapterView<?> parent, View view, int position, long id) {

       ((TextView) parent.getChildAt(0)).setTextColor(Color.BLACK);
       ((TextView) parent.getChildAt(0)).setTextSize(10);

    }

    public void onNothingSelected(AdapterView<?> parent) {

    }
}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-20T13:44:05.293

如果您只想增加大小，并且下拉菜单可以很好地触摸，那么您只需将*simple_spinner_item*更改为*simple_spinner_dropdown_item*：

```
 ArrayAdapter.createFromResource(this, R.array.item_array, android.R.layout.simple_spinner_dropdown_item);
                                                                       ---------------------------^ 
```

# c# - ASP.NET MVC2 - 动态页面创建

> ID：10409874
> 
> 赞同：0
> 
> 时间：2012-05-02T08:02:56.723
> 
> 标签：c#, asp.net, .net, asp.net-mvc-2, dynamic

我对 ASP.NET（尤其是 MVC）的世界有点陌生，我正在尝试基于以下配置构建一个页面：

```
 <headInput>
    <defaultColumns>
      <column name="Shift" validation="" unit="" required="" />
      <column name="Level" validation="" unit="" required="" />
      <column name="Value" validation="" unit="" required="" />
      <column name="Time" validation="" unit="" required="" />
    </defaultColumns>
    <additionalCols1>
      <column name="Rate" validation="" unit="" required="" />
    </additionalCols1>
    <additionalCols2>
      <column name="Online" validation="" unit="" required="" />
      <column name="Type" validation="" unit="" required="" />
    </additionalCols2>
   </headInput> 
```

我一直在尝试了解如何使用上述配置将标签生成为列，然后生成包含列中数据的行。

我尝试查看许多示例，但无法弄清楚它是否可能。任何帮助，将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T08:16:41.923

我不确定您要做什么或在上面的示例中使用什么架构，但我的感觉是您应该为此使用 HTML 表：

[http://www.w3schools.com/html/html_tables.asp](http://www.w3schools.com/html/html_tables.asp)

[http://www.w3.org/TR/html4/struct/tables.html](http://www.w3.org/TR/html4/struct/tables.html)

表是在行中定义的，而不是列，首先是标题行（然后是数据行，然后是表数据。

另请查看我认为您需要的 colspan 属性和 rowspan 属性 - 让列跨越多行，行跨越多列。

另外，如果您正在学习 MVC，为什么要使用 2 岁的版本？MVC3 是一年多前发布的，而 MVC 4 处于测试阶段，并带有上线许可证。我们正在使用 MVC 4 开发一个基于 Web 的股票交易应用程序，它坚如磐石。

[在http://www.asp.net/mvc/tutorials/older-versions/models-(data)/displaying-a-table-of-database-data-cs](http://www.asp.net/mvc/tutorials/older-versions/models-(data)/displaying-a-table-of-database-data-cs)有一个使用 MVC 构建 HTML 表的示例（滚动到底部查看 MVC 视图）它基本上是带有一些服务器标签的 HTML，用于从模型中提取数据。这就是 MVC 的方式 - 与您需要服务器控件为您生成 HTML 的 web 表单非常不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T08:33:02.030

看起来您需要根据 XML 输入生成 HTML。您可以使用[XSLT](http://www.w3schools.com/xsl/xsl_transformation.asp)来做到这一点。

您的 MVC 模型应提供 XML，视图应使用 XSLT 将其转换为 HTML

这里有几个链接可能会有所帮助 -

[http://www.htmlgoodies.com/beyond/xml/converting-xml-to-html-using-xsl.html](http://www.htmlgoodies.com/beyond/xml/converting-xml-to-html-using-xsl.html)

[http://www.4guysfromrolla.com/webtech/081300-2.shtml](http://www.4guysfromrolla.com/webtech/081300-2.shtml)

# eclipse - 如何手动更新 Maven 索引？

> ID：10409881
> 
> 赞同：19
> 
> 时间：2012-05-02T08:03:53.993
> 
> 标签：eclipse, maven

我有这个问题：

当我启动 Eclipse **（Indigo Service Release 1 with Maven Integration for Eclipse）**时，它试图从 Maven Repositories 下载文件：

```
repo1.maven.org/maven2/.index/nexus-maven-repository-index.gz 
```

它达到大约 10-20%（这需要很长时间），然后显然它放弃了：

```
02.05.12 08:47:36 MESZ: Updating index central|http://repo1.maven.org/maven2
02.05.12 09:09:25 MESZ: Unable to update index for central|http://repo1.maven.org/maven2 
```

现在我尝试手动下载这个 gz 文件，因为我认为下载会在 Eclipse 中遇到任何超时。现在我还有两个问题：

1.  48,7 MB-gz 文件的直接下载在 9,6 MB 后取消。我不知道为什么。
2.  如果我能够下载 gz 文件，我不知道如何将其“放入”Eclipse/Maven 或告诉 Maven 在我的 PC 上使用该文件，而不是存储库 repo1.maven.org。

有什么有用的想法或答案吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-02T10:00:56.163

1.  从中删除缓存`.m2/repository/.cache/m2e`。
2.  打开你的日食
3.  菜单 Windows > 首选项 > Maven > 用户设置 > 更新设置

Eclipse 将再次下载它，现在应该可以工作了。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-18T22:19:30.873

尝试更改[此处](https://stackoverflow.com/questions/1489149/how-to-change-value-of-read-timeout-of-eclipses-update-manager)描述的超时设置。我不知道哪个设置负责存储库索引更新，您必须尝试一下...

```
-Dsun.net.client.defaultReadTimeout=60000
-Dorg.eclipse.ecf.provider.filetransfer.retrieve.readTimeout=60000 
```

您应该考虑在启动时禁用索引更新（禁用：）`Preferences -> Maven -> Download repository index updates on startup`，并且仅使用中央存储库上的上下文菜单在 Maven 存储库视图中手动更新。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-20T10:27:10.463

好吧，这可能有点复杂，但它对我有用：

*   首先我使用*wget -c*下载 nexus-maven-repository-index.gz；我花了大约 10 次重试和一个小时；你可以使用任何你喜欢的下载管理器
*   二、安装Fiddler
*   然后使用 Fiddler 详细信息更新`<proxy>`本地 maven *settings.xml中的配置*
*   在 Fiddler 中启用断点
*   当 Eclipse 询问 nexus-maven-repository-index.gz 时，使用 Fiddler 功能将响应替换为下载的文件

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-13T14:53:02.513

A more drastic way: delete the whole .metadata folder. Later import projects from their place or checkout them from the svn(if you use some). This is not much more complicated, but it helped. the problem is that we don't really know, what metadata are broken, so the natural next step is to delete all of them. I think, it is the deepest possible cleaning before reinstallation of Eclipse + plugins.

# c# - 检索通用列表项索引

> ID：10409882
> 
> 赞同：0
> 
> 时间：2012-05-02T08:04:03.260
> 
> 标签：c#, linq, lambda

我有一个如下列表。我想检索所有值为 1 的项目的索引。

```
 List<int> listFilter = new List<int>();

        listFilter.Add(1);
        listFilter.Add(0);
        listFilter.Add(0);
        listFilter.Add(1); 
```

对于上面的示例数据，我应该得到 0 和 3。

下面的代码给了我一个 [value, index] 对的对象。如何修改它以仅输出仅包含索引的列表。

```
 var val = listFilter.Select((value, index) => new { Value = value, Index = index }).Where(item => item.Value == 1).ToList(); 
```

谢谢

问候， 巴兰辛尼亚

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T08:09:37.247

问题是在初始`Select`子句中您返回了一个匿名类型。要取回该值，您需要`Select`稍后再过滤回该值。

```
var val = listFilter
  .Select((value, index) => new { Value = value, Index = index })
  .Where(item => item.Value == 1)
  .Select(item => item.Index)
  .ToList(); 
```

# c# - 将 Gridview 内容导出到 excel 表单 runat=server 错误，即使表单具有 runat=server

> ID：10409883
> 
> 赞同：0
> 
> 时间：2012-05-02T08:04:09.490
> 
> 标签：c#, asp.net, datagridview, updatepanel

好的，情况就是这样。

我将 Gridview 内容导出到 Excel 工作表。基本上我有一个调用方法的按钮（例如btnExcel_Clicked）。后面的c#代码就是这样

```
protected void btnExcel_Click ( object sender, EventArgs e )
{
    Response.Clear( );
    Response.AddHeader( "content-disposition", "attachment; filename=" + "test" + "_Registration_Forms.xls" );
    Response.Charset = "";
    Response.ContentType = "application/vnd.ms-excel";
    Page.EnableViewState = false;

    System.IO.StringWriter stringWrite = new System.IO.StringWriter( );
    System.Web.UI.HtmlTextWriter htmlWrite = new HtmlTextWriter( stringWrite );

    clientGridView.RenderControl( htmlWrite ); //this is the name of my gridview

    Response.Write( stringWrite.ToString( ) );
    Response.End( );
} 
```

当按钮触发时，它会显示错误：

**“System.Web.HttpException：'GridView' 类型的控件'clientGridView' 必须放置在带有 runat=server 的表单标记内。”**

表明以下代码是发生错误的地方：

```
Line 217:        clientGridView.RenderControl( htmlWrite ); 
```

如果我的表单确实包含 runat="server" ，为什么会这样？

我怀疑这可能是由于我使用页面的方式，gridview 包含在更新面板中（不确定这是否会导致任何问题？）并且我在页面顶部有一些 javascript 允许页面刷新每个搜索查询。看起来像这样：

```
<script type="text/javascript">
    function RefreshUpdatePanel() {
        __doPostBack('<%= txtClientName.ClientID %>', '');
        $('#totals').fadeIn('slow');
        $('#clientGrid').fadeIn('slow');
        $('#btnReport').fadeIn('slow');
    };
</script> 
```

每次我在 txtClientName 中输入值时，这基本上都会触发我的更新面板

我不确定这将如何导致这样的错误。如果有人能对此有所了解或引导我朝正确的方向前进，我将不胜感激。这是因为我的 gridview 放置在更新面板中吗？啊。。

提前致谢！

编辑：好的第一个问题解决了......但是出现了一个新问题。

通过将此代码放在我的代码后面：

```
public override void VerifyRenderingInServerForm ( System.Web.UI.Control control )
{
    //confirms that an HtmlForm control is rendered for the
    //specified ASP.NET server control at run time.
} 
```

我可以克服那个错误，但是出现了一个新错误：

```
System.InvalidOperationException: RegisterForEventValidation can only be called during     Render(); 
```

呸。

编辑2：好的问题大部分解决了。通过在@ Page 部分中输入 EnableEventValidation ="false"，此功能正常。但是，这现在不安全有没有办法解决这个问题？

编辑 3：另外，有没有办法在不丢失 microsoft excel 中的单元格边框的情况下实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T08:11:49.207

我知道这不会直接解决您的渲染问题，但如果您的数据网格绑定到数据集，为什么不使用此问题中接受的分析器等方法直接从数据集中导出它：

[将数据表导出到 Excel 文件](https://stackoverflow.com/questions/1746701/export-datatable-to-excel-file)

更新

如果您没有数据集，您可以使用 SQLDataAdapter 轻松生成数据集并像这样填充数据集：

```
var dataAdapter = new SqlDataAdapter("Select * From table",
 "Data Source=MySQLServerName;Initial Catalog=DatabaseName;Integrated Security=True");

        var dataset = new DataSet();

        dataAdapter.Fill(dataset); 
```

更新 2

如果要使用数据源中的 sqlcommand 文本，可以执行以下操作：

```
var dataAdapter = new SqlDataAdapter(mySqlDatasource.SelectCommand,
     "Data Source=MySQLServerName;Initial Catalog=DatabaseName;Integrated Security=True"); 
```

# android - Android：如何根据屏幕设置标题的高度或宽度

> ID：10409886
> 
> 赞同：1
> 
> 时间：2012-05-02T08:04:22.727
> 
> 标签：android, header, footer

我正在尝试提出申请。它包含多个具有相同页眉和页脚的活动。我希望这些页眉和页脚在每个屏幕上的高度看起来都完全相同。所以我`android:layout_height="20dp"`在每个页眉和页脚中定义。但是在每个活动中看起来并不相同，当字段中的实体（按钮）数量更多时，标题的大小会减小，并且当字段大小中没有任何内容时可以正常工作。所以我认为我应该根据屏幕定义高度或宽度。所以谁能告诉我如何根据设备的屏幕来定义实体的大小。我知道如何获得屏幕尺寸

```
Display displayScreen = ((WindowManager) getSystemService(HomeActivity.WINDOW_SERVICE)).getDefaultDisplay();
        int layoutWidth = displayScreen.getWidth();
        int layoutHeight = displayScreen.getHeight(); 
```

这是标题的代码

```
<LinearLayout android:id="@+id/llheader" android:layout_width="fill_parent" android:layout_height="20dp"
    android:layout_weight="1">
    <RelativeLayout android:id="@+id/relativeLayout1" android:layout_width="fill_parent"
        android:layout_height="fill_parent" android:layout_gravity="center"> <!--header -->
        <TextView android:id="@+id/txt_header" android:layout_width="wrap_content" android:layout_centerHorizontal="true"
            android:layout_centerVertical="true" android:layout_height="wrap_content" />
    </RelativeLayout>
</LinearLayout> 
```

但不知道如何使用它来定义 java 文件的高度或宽度。所以请告诉我java代码的格式如何定义任何相对于屏幕的大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T08:18:07.880

试试看...

```
 Display display =((WindowManager)getSystemService(Context.WINDOW_SERVICE)).getDefaultDisplay();

    int width = display.getWidth();

    int height=display.getHeight();
    RelativeLayout.LayoutParams layoutParams = new RelativeLayout.LayoutParams(width/10, height/10);

    todostextview.setLayoutParams(layoutParams); 
```

在 layoutparams 中给出所需的值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T08:58:16.440

`<RelativeLayout> <header> <body> <!-- set layout_above and layout_below to footer's and header's id, respectively --> <footer> </RelativeLayout>`

# c# - IEnumerable 和 order

> ID：10409893
> 
> 赞同：46
> 
> 时间：2012-05-02T08:04:49.110
> 
> 标签：c#, .net, collections, ienumerable

我有一个关于**订单**的问题`IEnumerable`。

据我所知，迭代 IEnumerable 是伪代码，可以用以下方式编写：

```
while (enumerable.HasNext())
{
    object obj = enumerable.Current;
    ...
} 
```

现在，假设需要对已**排序**的集合进行操作。在这种情况下可以使用 IEnumerable 还是尝试其他`IList`具有索引支持的方法（即）更好？

换句话说：合同是否对`IEnumerable`一般订单做出任何保证？

因此，`IEnumerable`对于保证排序的通用接口来说，这不是一个适当的方法。新的问题是什么接口或类**应该**用于具有顺序的不可变集合？`ReadonlyCollection`? `IList`? 它们都包含`Add()`方法（甚至在前一个中没有实现）。

我自己的想法：`IEnumerable`不提供有关订购的任何保证。正确的实现可以在不同的枚举中以不同的顺序返回相同的元素（考虑 SQL 查询）

我知道 LINQ `First()`，但如果`IEnumerable`不说它的顺序，这个扩展是非常没用的。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-05-02T08:10:12.030

`IEnumerable/IEnumerable<T>`不保证排序，但使用的实现`IEnumerable/IEnumerable<T>`可能会或可能不会保证排序。

例如，如果您 enumerate `List<T>`，则保证顺序，但如果您 enumerate`HashSet<T>`则不提供此类保证，但两者都将使用`IEnumerable<T>`接口枚举。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-02T08:09:58.430

实施细节。IEnumerable 将枚举该项目 - 如何实施取决于实施。大多数列表等按照它们的自然顺序运行（索引 0 向上等）。

> IEnumerable 的合同在一般情况下能保证我们的一些订单吗？

不，它只保证枚举（每个项目一次等）。IEnumerable 没有保证顺序，因为它也可用于无序项。

> 我知道 LINQ First()，但是如果 IEnumerable 没有说明它的顺序，那么这个扩展是相当没用的。

不，不是，因为你可能有内在的秩序。您以 SQL 为例 - 结果是一个 IEnumerable，但如果我之前强制执行了排序（通过使用 OrderBy()），那么 IEnumerable 是根据 LINQ 的定义进行排序的。AsEnumerable().First() 让我得到订单的第一个项目。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-02T08:12:35.213

也许您正在寻找[IOrderedEnumerable](http://msdn.microsoft.com/en-us/library/bb534852.aspx)接口？它由扩展方法返回，例如`OrderBy()`并允许使用`ThenBy()`.

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-02T08:10:42.487

您混合了两点：枚举和排序。

当您枚举 IEnumerable 时，您不应该关心顺序。您使用接口，它的实现应该关心顺序。

例如：

```
void Enumerate(IEnumerable sequence)
{
    // loop
}

SortedList<T> sortedList = ...
Enumerate (sortedList); 
```

在方法内部它仍然是一个具有固定顺序的列表，但是方法不知道特定的接口实现和它的特殊性。

# python - IOError 打印时输入/输出错误

> ID：10409897
> 
> 赞同：21
> 
> 时间：2012-05-02T08:05:16.583
> 
> 标签：python, io, stdout, ioerror

我继承了一些由于在调用打印期间引发输入/输出错误而定期（随机）失败的代码。我正在尝试确定引发异常的原因（或者至少更好地理解它）以及如何正确处理它。

执行以下 Python 行时（在 2.6.6 解释器中，在 CentOS 5.5 上运行）：

```
print >> sys.stderr, 'Unable to do something: %s' % command 
```

引发异常（省略回溯）：

```
IOError: [Errno 5] Input/output error 
```

对于上下文，这通常是较大的函数当时试图做的事情：

```
from subprocess import Popen, PIPE
import sys
def run_commands(commands):
    for command in commands:
        try:
            out, err = Popen(command, shell=True, stdout=PIPE, stderr=PIPE).communicate()
            print >> sys.stdout, out
            if err:
                raise Exception('ERROR -- an error occurred when executing this command: %s --- err: %s' % (command, err))
        except:
            print >> sys.stderr, 'Unable to do something: %s' % command
run_commands(["ls", "echo foo"]) 
```

语法对`>>`我来说不是特别熟悉，它不是我经常使用的东西，而且我知道它可能是写入 stderr的[最不受欢迎的方式。](https://stackoverflow.com/questions/5574702/how-to-print-to-stderr-in-python)但是，我不相信替代方案可以解决根本问题。

从我读过的文档来看，IOError 5 经常被误用，而且定义有些松散，不同的操作系统使用它来解决不同的问题。在我的情况下，我能看到的最好的结果是 python 进程不再附加到终端/pty。

尽我所知，没有什么可以断开进程与 stdout/stderr 流的连接——例如，终端仍处于打开状态，并且一切“似乎”都很好。这可能是由子进程以不干净的方式终止引起的吗？还有什么可能是导致此问题的原因 - 或者我可以引入哪些其他步骤来进一步调试它？

在处理异常方面，我显然可以捕捉到它，但我假设这意味着我将无法在剩余的执行过程中打印到 stdout/stderr？我可以以某种方式重新连接到这些流 - 也许通过重置`sys.stdout`等`sys.__stdout__`？在这种情况下，无法写入 stdout/stderr 并不被认为是致命的，但如果它表明某些事情开始出错，我宁愿早点保释。

我想最终我对从哪里开始调试这个有点不知所措......

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-01-08T13:53:14.200

我认为这与进程所连接的终端有关。当我在后台运行 python 进程并关闭启动它的终端时出现此错误：

```
$ myprogram.py
Ctrl-Z
$ bg
$ exit 
```

问题是我在远程服务器中启动了一个非守护进程并注销（关闭终端会话）。一种解决方案是在远程服务器上启动 screen/tmux 会话并在此会话中启动进程。然后分离会话+注销使终端与进程相关联。这至少在 *nix 世界中有效。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-27T15:17:51.460

我有一个非常相似的问题。我有一个程序正在使用 subprocess 模块启动其他几个程序。然后这些子进程会将输出打印到终端。我发现当我关闭主程序时，它并没有自动终止子进程（正如我所假设的那样），而是它们继续运行。因此，如果我终止了主程序，然后终止了它启动的终端*，则子进程不再有终端连接到它们的标准输出，并且会抛出一个 IOError。希望这对您有所帮助。

*注意：必须按此顺序完成。如果您只是杀死终端，（出于某种原因）会杀死主程序和子进程。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-22T15:26:33.490

我刚刚收到此错误，因为我正在写入文件的目录内存不足。不确定这是否完全适用于您的情况。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-02-10T23:21:03.973

我是新来的，所以如果我在代码细节方面有点疏忽，请原谅。最近，当与运行 python 脚本相关的终端关闭时，我能够找出导致打印语句 I/O 错误的原因。这是因为要打印到 stdout/stderr 的字符串太长。在这种情况下，“out”字符串是罪魁祸首。要解决这个问题（在运行 python 脚本时不必保持终端打开），只需逐行读取“out”字符串，并逐行打印，直到我们到达“out”字符串的末尾。就像是：

```
while true:
        ln=out.readline()
        if not ln: break
        print ln.strip("\n") # print without new line 
```

如果将整个字符串列表打印到屏幕上，也会出现同样的问题。只需一项一项地打印列表。希望有帮助！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-01-13T20:11:04.033

问题是你已经关闭了python 在被调用`stdout`时试图写入的管道`print()`

这可能是由于在后台使用`&`然后关闭终端会话（即关闭`stdout`）运行脚本引起的

```
$ python myscript.py &
$ exit 
```

一种解决方案是`stdout`在后台运行时设置为文件

**例子**

```
$ python myscript.py > /var/log/myscript.log 2>&1 &
$ exit 
```

没有错误`print()`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-04-14T20:36:05.423

当您的 shell 在 print 试图将数据写入其中时崩溃时，可能会发生这种情况。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-04-01T00:03:49.710

就我而言，我只是重新启动服务，然后这个问题就消失了。现在不知道为什么。对于 Odoo，我的问题是相同的 OSError 输入/输出错误。

我重新启动服务后，它就消失了。

# actionscript-3 - 识别动作脚本 3 中的声音

> ID：10409899
> 
> 赞同：1
> 
> 时间：2012-05-02T08:05:30.887
> 
> 标签：actionscript-3, apache-flex, audio

我想创建一个能够识别声音的小型应用程序。也就是说，它将输入的声音与用户已经录制的声音模式相匹配。然后，它将输出结果（匹配或不匹配），例如 Alert.show()。谁能帮我 ？先感谢您...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T15:10:04.057

实际上，一个名叫 Didier Brun 的法国人曾在此工作，并且非常成功地在 Flash 中做了一个语音识别引擎。它不完全是一个声音识别引擎，但我想它可以做到这一点，需要做更多的工作。你可以在[这里](http://www.bytearray.org/?p=1151)找到它。他在 2010 年阿姆斯特丹 FITC 的舞台上对其进行了演示，并且效果出奇地好。

# spring - 关于spring social xml配置

> ID：10409900
> 
> 赞同：2
> 
> 时间：2012-05-02T08:05:33.097
> 
> 标签：spring, spring-social

我想知道配置中的“#{request.userPrincipal.name}”。当我运行我的春季社交项目时，它总是在“#{request.userPrincipal.name}”处出现错误，如果我设置一个诸如“123”之类的值，我的项目运行良好。出了什么问题，是否有任何其他配置而不是 "#{request.userPrincipal.name}" ？

```
<bean id="connectionRepository" factory-method="createConnectionRepository" factory-bean="usersConnectionRepository" scope="request">
    <constructor-arg value="#{request.userPrincipal.name}" />
    <aop:scoped-proxy proxy-target-class="false" />
</bean> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T09:18:47.040

这是一个[Spring EL 表达式](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/expressions.html#expressions-beandef)，意思是从 Http 请求中获取用户身份。一旦应用了自己的用户管理组件，就可以`#{request.userPrincipal.name}`用自己的方式替换。

# c - Sem_open 导致非法寻道错误

> ID：10409901
> 
> 赞同：0
> 
> 时间：2012-05-02T08:05:34.500
> 
> 标签：c, semaphore

我正在尝试解决[读者-作者问题](http://en.wikipedia.org/wiki/Readers-writers_problem)。以下函数应该创建命名信号量。

```
void createSems(void){

if((sem_counter = sem_open("counter", O_CREAT, 0660, 1)) == SEM_FAILED)
    printErrorAndKill("sem_open_counter");
if((sem_reader = sem_open("reader", O_CREAT, 0660, 1)) == SEM_FAILED)
    printErrorAndKill("sem_open_reader");    
if((sem_writer = sem_open("writer", O_CREAT, 0660, 1)) == SEM_FAILED)
    printErrorAndKill("sem_open_writer");  
if((sem_writer = sem_open("mutex1", O_CREAT, 0660, 1)) == SEM_FAILED)
    printErrorAndKill("mutex1");
if((sem_writer = sem_open("mutex2", O_CREAT, 0660, 1)) == SEM_FAILED)
    printErrorAndKill("mutex2");
if((sem_writer = sem_open("mutex3", O_CREAT, 0660, 1)) == SEM_FAILED)
    printErrorAndKill("mutex3");

}

void printErrorAndKill (const char *functionName){    
perror(functionName);
printf("%s: %s\n",functionName, strerror(errno));
exit(1);
} 
```

在我的 MBP 10.7.3 上一切正常。但是当我在学校服务器上测试它时，我得到以下输出。

```
sem_open_reader: Permission denied
sem_open_reader: Illegal seek 
```

每次都成功创建第一个信号量。我试图用谷歌搜索错误，但没有成功或与 sem_open 有任何联系。

**我的问题是当我创建信号量时我做错了什么还是问题出在其他地方？**

**更新**

我做了更多的测试，最终发现这与非法搜索无关。我去掉了“perror(functionName);”这一行 只是为了发现问题只是权限问题。我们学校的操作系统上保留了一些名称，所以我只需要提供一些更相关的名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T08:28:08.257

“Illegal seek”消息可能是由 perror() 引起的。我系统上 perror 的手册页说：“请注意，在成功的库调用后 errno 未定义：此调用很可能会更改此变量，即使它成功，例如因为它在内部使用了其他一些失败的库函数。”

# linux - 使用 sed 删除文件中的空行的命令是什么？

> ID：10409909
> 
> 赞同：4
> 
> 时间：2012-05-02T08:06:10.030
> 
> 标签：linux, unix, sed, command

*   `sed`删除文件中的空行的命令是什么。
*   删除文件夹中的空文件的命令（`sed`命令？）是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-02T08:11:53.870

你必须'd'用于删除。

```
Ex:

 sed -i '/^$/d' test 
```

-i - 用于影响文件。

^ - 是行首

$ - 是行尾

d - 如果有空行则删除

我希望这能帮到您。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T08:08:42.750

`/^$/d`应该这样做。

例如

```
sed -i -e "/^$/d" myfile.txt 
```

如果要对文件夹中的所有文件执行此操作：

```
sed -i -e "/^$/d" * 
```

-i 表示没有它的“就地编辑”，文件将被编辑并发送到标准输出。原始文件不会被修改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-13T00:05:52.623

```
sed -e 's/#.*//;/^\s*$/d' /etc/lvm/lvm.conf 
```

# c++ - 比较两个包含双精度的文件

> ID：10409912
> 
> 赞同：0
> 
> 时间：2012-05-02T08:06:17.660
> 
> 标签：c++, c, bash, floating-point, diff

我想检查两个包含`double`数字的文件是否相等。

我应该考虑接近的数字等于例如最多的差异`0.0001`。

为此编写测试器很容易，`C`但是有没有更简单的方法？例如 bash 命令？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T08:18:50.040

这是您可以做到的一种方法：

```
paste file1 file2  | awk '{d=$1-$2;if((d<0?-1*d:d)>0.0001) print $0 " " d }' 
```

首先用于`paste`打印出相应的行。然后将它们传递`awk`给减去。计算绝对差并检查它是否大于您的公差 0.00001。如果是这样，打印出两个值和差值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T08:13:55.247

Bash 不提供用于浮点操作的运算符。您可以查找 bc 并将其集成到 bash 脚本中应该相当容易。

请参阅Linux 期刊上的这篇[文章。](http://www.linuxjournal.com/content/floating-point-math-bash)这应该为您提供一个起点。文件结构由您决定。

# java - 优先考虑 ActionListener？

> ID：10409913
> 
> 赞同：0
> 
> 时间：2012-05-02T08:06:18.587
> 
> 标签：java, sockets, system-tray

我想知道是否可以为听众提供优先权。

我正在与套接字通信的程序上创建一个系统托盘。

一旦我调用 ServerSocket.accept() 方法，该方法将等待套接字连接，我的系统托盘就会停止侦听，直到接受套接字为止。

有没有办法解决这个问题？

系统托盘有调试开/关和关闭程序等选项，因此它必须与程序通信，并且在侦听中具有最高优先级。

提前谢谢！

编辑：这是一些代码。

```
public class Start {

/**
 * Main method.
 *
 * @param args Arguments given in the commandline.
 */
public static void main(String[] args) {
    if (args.length > 0) {
        if (args[0].equals("-v")) {
            Debugger.setDebug(true);
            Debugger.showMessage("DEBUG: ON");
        }
    } else {
        System.out.println("DEBUG: OFF");
        Debugger.setDebug(false);
    }

    if (SystemTrayCreator.canRead()) {
        SystemTrayCreator stc = new SystemTrayCreator();
        new Thread(stc).start();
    }
    Connector c = new Connector();
    new Thread(c).start();

}
}

public class Connector implements Runnable{

/** Creates a Connector-object.
 * 
 */
public Connector(){
}
static Timer t = new Timer(100, new ActionListener() {

    @Override
    public void actionPerformed(ActionEvent e) {
        doJob();
        t.stop();
    }
});

/** Activates the connector.
 * 
 */
@Override
public void run() {
    while (true) {
        t.start();
    }
}

public class SystemTrayCreator implements Runnable{

/**
 * Creates a systemtray with an icon.
 *
 */
@Override
public void run() {
    //Check whether the SystemTray is supported
    if (!SystemTray.isSupported()) {
        Debugger.showMessage("SystemTray is not supported");
        return;
    } 
```

希望这可以帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T08:09:38.630

如果您想一次做不止一件事，请使用线程。

在您的情况下，我将有一个缓存的线程池，即 Executors.newCachedThreadPool() 它首先有一个接受连接的任务，并且还有一个读取每个连接的任务（因此您可以在处理连接时接受更多连接）

# nhibernate - 为什么这两个 Fluent nHibernate 查询会产生不同的结果？

> ID：10409920
> 
> 赞同：1
> 
> 时间：2012-05-02T08:07:53.997
> 
> 标签：nhibernate, fluent-nhibernate, fluent-nhibernate-mapping

我一直在试图弄清楚为什么这个询问经理和他或她的团队的查询只返回团队集合的第一个条目。显然，这是因为我在查询末尾有 FirstOrDefault 。我的印象是 FirstOrDefault 将作为一个整体应用于查询，但似乎它也被应用于 Team 集合。

原始查询（仅显示团队中的第一个成员）：

```
 session.Query<IEmployee>()
                .Where(p => p.PersonalNumber == PersonalNumber)
                .Fetch(p => p.Team)
                .Fetch(p => p.Manager)
                .FirstOrDefault(); 
```

返回完整团队的新查询：

```
 session.Query<IEmployee>()
                .Where(p => p.PersonalNumber == PersonalNumber)
                .Fetch(p => p.Team)
                .Fetch(p => p.Manager)
                .ToList().FirstOrDefault(); 
```

制定此查询的正确方法是什么？我需要解决方法意味着我没有正确执行此操作。

**背景 - 映射：**

这是一个基本的层次关系，Manager 是 IEmployee，Team 是 IEmployee 的 IList。

```
References(x => x.Manager).Column("ManagerId");
HasMany(x => x.Team)
                .AsList(index => index.Column("TeamIndex"))
                .KeyColumn("ManagerId"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T08:30:06.663

```
session.Query<IEmployee>()
            .Where(p => p.PersonalNumber == PersonalNumber)
            .Fetch(p => p.Team)
            .Fetch(p => p.Manager)
            .FirstOrDefault(); 
```

在此查询中，FirstOrDefault 按您的预期在数据库上工作。

```
session.Query<IEmployee>()
            .Where(p => p.PersonalNumber == PersonalNumber)
            .Fetch(p => p.Team)
            .Fetch(p => p.Manager)
            .ToList().FirstOrDefault(); 
```

在此查询中，ToList 对数据库起作用。All behind 对 ToList 的结果起作用。所以 FirstOrDefault 从 ToList 的结果集中获取 FirstOrDefault。要获得相同的结果，您需要在查询中添加订单。当您进行无顺序选择时，Sql 不会授予结果集的相同顺序。ToList 结果中的顺序与第一个查询中的内部顺序不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T13:09:04.290

我一直在努力解决同样的问题。对我来说，这发生在从 NH 3.1 -> 3.3 升级时。问题在于，使用 Linq，NHibernate 3.3 会生成一个 SQL 查询，其中包含“Top(1)”语句，从而有效地终止了查询的“Fetch”部分。我通过从 Linq 切换到[QueryOver](http://www.nhforge.org/doc/nh/en/index.html#queryqueryover)解决了这个问题。我相信这会奏效：

```
 session.QueryOver<IEmployee>()
                .Where(p => p.PersonalNumber == PersonalNumber)
                .Fetch(p => p.Team)
                .Fetch(p => p.Manager)
                .SingleOrDefault(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T12:22:41.597

问题是我要求笛卡尔积（使用 Fetch）但也使用 FirstOrDefault；从生成的 SQL 中，我可以看到该组合不起作用，因为您只能得到笛卡尔积的第一行（生成的 SQL：“FETCH NEXT 1 ROWS ONLY”）。

如果我想这样做，我将需要编写一种不同类型的查询，或者只使用 ToList 解决方法，在这种情况下不会造成太大的伤害，因为无论如何我只期望来自数据库的一个结果。

示例解决方案：

```
session.QueryOver<IEmployee>()
                .Where(p => p.PersonalNumber == PersonalNumber)
                .Fetch(p => p.Team).Eager
                .Fetch(p => p.Manager).Eager
                .SingleOrDefault(); 
```

# c - 将表指针从 C 传递到汇编函数

> ID：10409921
> 
> 赞同：0
> 
> 时间：2012-05-02T08:07:55.233
> 
> 标签：c, arrays, pointers, assembly

我有一个关于 C 和大会合作的问题。我想编写一个程序，将表指针发送到汇编程序的函数，在这个函数中，表中填充了一些数据，接下来返回到 C 并将结果写入输出。

以下代码与 C 部分有关：

```
#include <stdio.h>
extern int oblicz(double,double, double, double, int, double *);//a signature of an  exter assembly function
int oblicz(double,double, double, double, int, double *);// the last position is a pointer  of my table
 //(some code)
 size =(int)k;
tab  = (double *)malloc(sizeof(double)*(size+1)); // alocation of memory
if (oblicz(a,b,P,Q,size,tab)) //the function
{
   for(i;i<size;i++)
    printf ("a result on %d index is %.10g \n",i, tab[i] );
} 
```

组装部分：

```
 %define a qword [ebp+8]
%define b qword [ebp+16]
%define P qword [ebp+24]
 %define Q qword [ebp+32]
 %define sizet dword [ebp+40]
 %define tab dword [ebp+44]// the table pointer 
```

为了简化代码完成，我使用了下面的语法，其中我只设置了 tab[0]

```
;i omited setting frame etc.
xor ebx,ebx
mov ebx, tab
mov qword [ebx], 4 
```

结果 C 是

```
a result on: 0 -is 1.669124542e-307 // it is always the same independently of value in this line : "mov qword [ebx], 4" 
```

我会很感激任何可能有问题的建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T09:56:45.310

因此，您将文字**整数**4 移动到选项卡的第一个元素。第一个元素将如下所示：

```
04 00 00 00 00 00 00 00
^^ low address       ^^ high address 
```

在[IEEE 754 双精度数](http://en.wikipedia.org/wiki/Double-precision_floating-point_format)中，指数位于最高位，在您的情况下为零。由于分数不为零（在您的情况下为 4），因此您有一个[次正规数](http://en.wikipedia.org/wiki/Denormal_number)。这意味着你写了一个非常小的数字，而不是 4。

我猜您想将 4 的**双重**版本移动到该地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T17:06:24.203

谢谢我终于明白我的错误是什么了。我还根据您的想法找到了解决方案。这是关于如何修复它的问题的答案：

第一个简单的声明：

```
 segment .data
  Four dw 4 
```

下一个

```
mov ebx, tab

fild word [Four]  //conversion int-> 
mov ebx, tab      
 fstp qword [ebx] // pop from stack streight to tab 
```

也许它有点糟糕，但它确实有效。也感谢使用 gdb 的建议；）。真的好用啊！！

# javascript - 通过nodejs下载响应POST请求发送的文件？

> ID：10409923
> 
> 赞同：3
> 
> 时间：2012-05-02T08:07:56.180
> 
> 标签：javascript, ajax, node.js, post, express

我在发出下载文件的 POST 命令时遇到问题。

在客户端，我正在尝试发布到特定的 URL，包括一个指定要下载的文件的参数。

```
var req = $.ajax({
    type: 'POST',
    url : '/click',
    data: { 'path' : filename }
   });
req.done(function(data) {
// Download the file here? 
```

服务器最终会触发一个执行此操作的方法：

```
function downloadFile(req, res) {
  var dir = req.session.currentdir + req.body.path;
  mimetype = (shell.exec("file --mime-type '" + dir + "'", {silent:true}).output);
  mimetype = mimetype.substring(mimetype.indexOf(": ") + 2, mimetype.length);

  var stat = fs.statSync(dir);
  res.writeHead(200, {'Content-Type' : mimetype,
                      'Content-Length': stat.size });
  var fileStream = fs.createReadStream(dir);
  fileStream.pipe(res);
}; 
```

现在我似乎无法让客户端接受我试图通过管道返回的文件。. 它只是在关闭之前挂了很长时间。让客户端下载我要发回的文件的适当方法是什么？

非常感谢您花时间阅读。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T08:50:57.663

1\. resp.setHeader("Content-Disposition", "attachment; filename=\"xxxx.xxx\"" );

2.更好的使用Get

# php - ImageMagick 中的 Web 通用图像优化

> ID：10409928
> 
> 赞同：0
> 
> 时间：2012-05-02T08:08:12.857
> 
> 标签：php, image, file-upload, upload, imagemagick

我目前对进入我的网站的正确宽度/高度的图像进行严格的复制（）。我想知道我应该在 Imagemagick 中采取什么样的最佳实践来确保文件大小尽可能低而不损失 JPEG 的质量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T08:53:01.513

您可以做的是在进行复制和压缩之前确定当前的图像质量和大小

例子

```
 identify -verbose rose.jpg 
```

将返回所有信息，包括

*   压缩
*   质量
*   解析度
*   深度
*   文件大小
*   ETC ...

做自己的优化

不要只使用固定值 .. 使用可能计算的信息以及图像的理想压缩和大小

例子

如果图像质量是`70`并且`60`是您的基准..您需要做的就是将`10%`其`100`减少`40%`.. 在任何时候您都将获得相同质量水平的图像

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T09:39:22.940

我在上传时调整大小，即使您将 jpg 读入 Imagemagick 并保存而不做任何重新压缩它。

如果您调整大小并使用 -resize 所有 EXIF 数据将被保留；使用 -thumbnail 除颜色配置文件外的所有 EXIF 数据（包括嵌入的缩略图）都会被剥离。您也可以单独使用 -strip，这将删除所有 EXIF 数据和颜色配置文件。

要保持 jpg 的质量，请使用 -quality 100，这样您就可以使用以下内容：

```
convert input.jpg -strip -quality 100 output.jpg 
```

# javascript - 选择多个有条件的标签

> ID：10409933
> 
> 赞同：-1
> 
> 时间：2012-05-02T08:08:53.330
> 
> 标签：javascript, jquery, jquery-selectors

我想选择所有非*只读*或*禁用*且具有名称的可编辑表单元素（ `input[type=text]`、`input[type="radio"]`、`input[type="checkbox"]`和） 。是否可以使用单个选择器而不重复每种类型的只读和禁用属性？`select``textarea`

 **换句话说，我可以提供`[name]:not([disabled]):not([readonly])`一个全局过滤器，而不是为每个输入类型重复吗？

我对单个选择器特别感兴趣，因为我想将它作为选择器过滤器提供给`$.live`/ `$.on`。我不能使用`.not`或任何此类方法，因为可以动态添加元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T08:12:46.483

```
$('input[type="text"], input[type="radio"], input[type="checkbox"], select, textarea')
     .is(':not([disabled]):not([readonly])'); 
```

我发现这个不错的解决方案似乎有效。

```
$('(input[type="text"], input[type="radio"], input[type="checkbox"], select, textarea):not([disabled]):not([readonly])') 
```

基本上，您似乎可以`()`在选择周围添加，然后执行 :not() 条件。天哪，我爱 jQuery！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T08:12:54.853

你可以使用`filter`方法：

```
$("input[type='text']:enabled, textarea:enabled, select:enabled, input[type='radio']:enabled")
.filter(function(){ return $(this).attr("readonly", false); // or true
}).on("click", function(){
     .....
}) 
```**

# mongodb - MongoDB如何确定一个shard key的类型？

> ID：10409945
> 
> 赞同：1
> 
> 时间：2012-05-02T08:10:15.600
> 
> 标签：mongodb

我可能遗漏了一些东西，但我无法理解 MongoDB 如何根据类型定义键范围。

假设我有一个用户配置文件集合，如下所示：

```
{userId : "123", profiles: [p1, p2], location: "loc"} 
```

然后，如果我这样声明分片键：

```
{ shardcollection : "test.user_profile", key : {"userId":1} } 
```

范围将如何工作：

1.  如果 {1 ... 100000} 中的 userId？
2.  如果 userId 是一些字符串，比如生成的 UUID？

如何定义将被视为字符串、时间 md5 或其他内容的分片键？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T08:54:55.177

mongo 中的字段比较是按照 BSON 比较顺序进行的。有关更多详细信息，请参见此处。 [http://www.mongodb.org/display/DOCS/What+is+the+Compare+Order+for+BSON+Types](http://www.mongodb.org/display/DOCS/What+is+the+Compare+Order+for+BSON+Types) 和这里有关创建特定类型的信息 [http://www.mongodb.org/display/DOCS /数据+类型+和+约定](http://www.mongodb.org/display/DOCS/Data+Types+and+Conventions)

# wpf - 将静态资源传递给自定义 System.Windows.Data.IValueConverter？

> ID：10409946
> 
> 赞同：0
> 
> 时间：2012-05-02T08:10:22.737
> 
> 标签：wpf, xaml, ivalueconverter

考虑下面的值转换器。我可以轻松地将诸如“Red”和“Green”之类的值传递给我的转换器，但是我如何传递在 XAML 中定义的画笔呢？

**`FalseBrush`我该如何绑定`MyNiceBrush`？**

```
<local:MyBrushConverter x:Key="BackgroundConverter" FalseBrush="Red" TrueBrush="Green" />

<LinearGradientBrush x:Key="MyNiceBrush" StartPoint="0,0" EndPoint="0,1">
    <GradientStop Offset="0" Color="#4C7F00" />
    <GradientStop Offset="1" Color="#A0B529" />
</LinearGradientBrush> 
```

在 XAML 中，我将对象的属性绑定到此转换器：`Background="{Binding MyClass.TrueOrFalseProperty, Converter={StaticResource BackgroundConverter} ...`

这是我的转换器：

```
public class MyBrushConverter : IValueConverter
{
    public Brush FalseBrush { get; set; }
    public Brush TrueBrush { get; set; }

    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        if ((bool)value)
            return TrueBrush;
        else
            return FalseBrush;
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T08:37:48.580

```
<local:MyBrushConverter x:Key="BackgroundConverter" FalseBrush={StaticResource MyNiceBrush} TrueBrush="Green" /> 
```

# javascript - 使用 if else 语句，javascript 使链接可见的文本框

> ID：10409955
> 
> 赞同：0
> 
> 时间：2012-05-02T08:10:48.450
> 
> 标签：javascript, validation

有没有一种方法可以使链接在同一页面上可见，而不是在新页面上打开链接？例如，如果我在文本字段中输入“项目”并按下提交按钮，则**project.htm**链接会在页面上可见；如果我在文本框中写下“under”并按下提交按钮，那么**underconstruction.htm**链接就会变得可见。

```
 <script Language="JavaScript">
    <!--
        function Blank_TextField_Validator() {
            // Check the value of the element named text_name from the form named text_form
            if (text_form.text_name.value == "") {
                // If null display and alert box
                alert("Please fill in the text field.");
                // Place the cursor on the field for revision
                text_form.text_name.focus();
                // return false to stop further processing
                return (false);
            }
           // If text_name is not null continue processing
           if (text_form.text_name.value == "project")
               window.open('project.htm');
           else if (text_form.text_name.value == "under")
               window.open('underconstruction.htm');
           else
               alert("Invalid keyword!");
           return (true);
        }
    -->
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T08:22:54.653

不确定这是否是一个技巧问题..你不能这样做吗？

**脚本**

```
if (text_form.text_name.value == "project")
    document.getElementById('project_link').style.display = 'block';
else if (text_form.text_name.value == "under")
    document.getElementById('construction_link').style.display = 'block';
else
    alert("Invalid keyword!");
return (false); 
```

**标记**

```
<a id='project_link' href='project.htm' style='display: none;'>project</a>
<a id='construction_link' href='underconstruction.htm' style='display: none;'>construction</a> 
```

# mysql - 在 MySQL 中设计分层架构

> ID：10409956
> 
> 赞同：1
> 
> 时间：2012-05-02T08:10:53.963
> 
> 标签：mysql, database, database-design, relational-database

我正在为我们社区的一个小项目设计一个测量系统。但不知何故，我陷入了如何以可以在数据库端配置的方式正确设计系统的问题。

我的用例是这样的：这是一种调查系统，用户在其中提出一系列问题，并根据他们的回答提出另一个问题。我打算将其显示为步骤/向导页面。

```
 | --- Answer C  --> End Survey
        |--- Answer A  --- Q2 ---- | --- Answer D  --> End Survey                                                       
Q1 ---> |                          | --- Answer E  --> End Survey                               
        |
        |--- Answer B  --- Q3 --- | --- Answer F  --> Q7  ---> End survey
                       |          | --- Answer G  --- Q8  --- | Answer H --> End Survey
                       |                                      | Answer I --> End Survey
                       |                                      | Answer J --> End Survey
                       --- Q4 --- End Survey                  | Answer K --> End Survey 
```

在我的图表中，首先显示用户 Q1（问题 1），如果他的答案是 A，那么 Q2 将显示一个答案列表（C、D、E）然后调查停止。但是如果用户回答 B，那么他将在同一页面上显示 Q3 + Q4。如果用户在 Q3 上回答 F，那么下一个问题是 Q7 和上一个问题。

我正在考虑创建一个 QUESTION 表来保存问题和一个 QUESTION_ITEMS 表来保存答案列表，但是如何处理状态转换？

我实际上被困在如何正确支持用户能够配置问题列表的这种要求上。

有什么想法吗？

顺便说一下，我的目标数据库是 MYSQL。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T08:36:32.770

*我认为有问题*和*疑问*项（又名答案）是有意义的。然后，您只需将每个**question_item**链接到其后续页面。使用单独的**page**列将问题分组在一起。

**问题**

```
ID   Name    Page
1    Q1      1
2    Q2      2
3    Q3      3
4    Q4      3 
```

**Question_Items**

```
ID   Name        Question_ID    Next_Page
1    Answer 1    1              2
2    Answer 2    1              3 
```

ETC ...

# java - 如何使用java读取xml中的替代标签？

> ID：10409957
> 
> 赞同：0
> 
> 时间：2012-05-02T08:10:54.637
> 
> 标签：java, xml-parsing

我有xml文件

```
<A>
   <A1>
      <A2>Hi</A2>
   </A1>
<A>
<B>
   <B1></B1>
   <B2>100</B2>
</B>
<A>
   <A1>
      <A2>Hello</A2>
   </A1>
<A>
<B>
   <B1>1000</B1>
   <B2></B2>
</B> 
```

同样，这也超过 10 个街区。现在我的java代码能够一个一个地读取，在读取标签之后首先读取所有内容。

代码：

```
public class XMLParse {
    static Document doc;
 public static void main(String argv[]) {
  try {
  File file = new File("/home/dev042/Desktop/xxx.xml");
  DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
  DocumentBuilder db = dbf.newDocumentBuilder();
  doc = db.parse(file);
  doc.getDocumentElement().normalize();
  System.out.println("Root element " + doc.getDocumentElement().getNodeName());
  NodeList nodeLst = doc.getElementsByTagName("A");
  System.out.println("Information of all Balence Sheet");
 int count = nodeLst.getLength();
 String name;
  for (int s = 0; s < nodeLst.getLength(); s++) {

    Node fstNode = nodeLst.item(s);

    if (fstNode.getNodeType() == Node.ELEMENT_NODE) {
      Element fstElmnt = (Element) fstNode;
      NodeList fstNmElmntLst = fstElmnt.getElementsByTagName("A1");
      for(int i =0; i < fstNmElmntLst.getLength(); i++ )
      {
          Node lst = fstNmElmntLst.item(i);
          if(lst.getNodeType() == Node.ELEMENT_NODE)
          {
              Element fsttravel = (Element) lst;
              NodeList secNmElt = fsttravel.getElementsByTagName("*");
               name = secNmElt.item(0).getTextContent();
               System.out.println("Name : "  + name);
          }
      }
    }

  }
}
   catch (Exception e) {
    e.printStackTrace();
  }
  String amt;
  double amount;
  NodeList nodeLst = doc.getElementsByTagName("B");
   int coun = nodeLst.getLength();
  for (int s = 0; s < nodeLst.getLength(); s++) {
      Node secNode = nodeLst.item(s);

     if (secNode.getNodeType() == Node.ELEMENT_NODE) {
       try
              {
                Element amtval = (Element) secNode;
                NodeList secval = amtval.getElementsByTagName("B1");
                amt = secval.item(0).getTextContent();
                //amount = Double.parseDouble(amt);
                System.out.println("SubAmt :" + amt);

                NodeList lstNmElmntLst = amtval.getElementsByTagName("B2");
                amt = lstNmElmntLst.item(0).getTextContent();
                System.out.println("MainAmt : " +amt);
              }
              catch(Exception ex){
                  ex.printStackTrace();
             }
     }
  }

 }
} 
```

电流输出：

```
Hi
Hello
100
1000 
```

我想交替阅读标签。那么只有我可以映射这些值。我怎样才能交替阅读这些标签。输出应该是这样的

```
Hi 100
Hello 1000 
```

请帮我摆脱它。提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T08:43:16.777

我认为您只需要过滤标签，以便您的解析器仅获取标签。为此，您可以使用`XPath`. 这是此处的示例：

[http://www.roseindia.net/tutorials/xPath/java-xpath.shtml](http://www.roseindia.net/tutorials/xPath/java-xpath.shtml)

# ios - 如何填充静态 UITableView

> ID：10409962
> 
> 赞同：1
> 
> 时间：2012-05-02T08:11:14.670
> 
> 标签：ios, uitableview, fill, populate

我尝试了几种方法，但似乎我错过了一些东西..

这是我使用的代码：

```
- (void)configureView
{
// Update the user interface for the detail item.
  if (self.detailItem) {
    for (int idx=0; idx<16; idx++) {
        NSIndexPath *indexPath = [[NSIndexPath alloc] initWithIndex:idx];
        [self.tableView cellForRowAtIndexPath:indexPath].detailTextLabel.text = [param objectAtIndex:idx];
    }
    self.detailDescriptionLabel.text = [self.detailItem description];
  }
} 
```

我在 viewDidLoad 上调用它。我的 tableview 有 16 个静态单元格，并且我使用的是标准的“字幕”类型单元格，因此不需要在这方面进行自定义。**textLabel.text**在设计时填充。我的表格视图也在 tableViewController 中。我也尝试过使用标准的 tableview 人口，但似乎静态单元格不同意这种方式。

我究竟做错了什么？

* * *

@jrturton 我做了一些更改以查看发生了什么：

**我在for** line下添加了这三行，看看是否有任何内容：

```
 UITableView *tv = self.tableView;
        UITableViewCell *cell = [tv cellForRowAtIndexPath:[NSIndexPath indexPathForRow:idx inSection:0]];
        NSString *label = [[NSString alloc] initWithString:cell.textLabel.text]; 
```

首先，电视分配正确，我可以看到。但除了那个单元格和标签是空的。即使电视似乎也没有行信息..

可能是因为 tableview 有数据源和委托分配给 tableviewcontroller.. 我想我听说它不应该是这样的......

* * *

@jrturton 这里是：

![静态细胞](../Images/d6642e119d7231f389b13a1c0fa961ca.png)

![表视图](../Images/138ed28f6304bfb58cd1cf2a49581912.png)

![故事板](../Images/276c3682e672cb921fbac471cda6f6a6.png)

希望这可以帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T08:18:17.553

一些日志记录会很快向您显示您的索引路径无效，因此不会返回任何单元格。

要创建用于 UITableView 的 NSIndexPath，请使用以下方法：

```
[NSIndexPath indexPathForRow:idx inSection:0]; 
```

索引路径必须包含一行和部分，以便表格理解它。

您还需要从而`viewWillAppear:`不是 viewDidLoad 调用它，静态表不会在早期填充。而且你**必须先**打电话`[super viewWillAppear:animated]`！

# java - JSF 2 - 从两个文件构建页面 - 主要内容和当前内容

> ID：10409963
> 
> 赞同：0
> 
> 时间：2012-05-02T08:11:17.420
> 
> 标签：java, jsf-2

我对使用 JSF 很陌生，我不确定这是否是正确的方法，但在 Rails 中，您通常有一个主应用程序文件，当前页面加载到该文件中。这样我就不必担心每次都复制粘贴菜单等。

如何使用 JSF 2 实现这一目标？我可以每次都导航到同一个主页并告诉它加载当前内容吗？或者我是否告诉我导航到的当前页面以加载“内容周围的主框架”？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T08:18:44.250

是的，当然，JSF 2.0 具有[页面模板功能](http://www.ibm.com/developerworks/java/library/j-jsf2fu2/index.html)。您定义了一个模板，该模板定义了所有视图页面的通用布局。

用于创建基本页面的 Facelets 标签：

*   **ui:insert** – 定义将被加载模板的文件替换的内容；
*   **ui:define** – 定义插入标签的内容`ui:insert`；
*   **ui:include** – 包含来自另一个页面的内容；
*   **ui:composition** – 如果与模板属性一起使用，则加载指定的模板，并且此标记的子级定义模板布局。在其他情况下，它是一组元素，可以插入到某处。

例如：

```
<ui:composition
     xmlns="http://www.w3.org/1999/xhtml"
     xmlns:ui="http://java.sun.com/jsf/facelets"
    template="/templates/myLayout.xhtml">

   <ui:define name="menu">
      <ui:include src="/mypath/menu.xhtml"/>
   </ui:define>

   <ui:define name="content"> 
     <ui:include src="/mypath/content.xhtml"/>           
   </ui:define>

</ui:composition> 
```

或者

```
<ui:insert name="content">
   <ui:include src="/mypath/mycontent.xhtml"/>
</ui:insert> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T08:16:21.533

JSF 不支持您要归档的内容。相反，它支持视图和基本布局（模板）。你需要这个：

```
<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
template="path/to/template.xhtml>

<your custom content here/>
<ui:composition/> 
```

# c++ - 当观察者希望观察不同的项目时实现观察者模式

> ID：10409964
> 
> 赞同：2
> 
> 时间：2012-05-02T08:11:19.673
> 
> 标签：c++, oop, design-patterns, observer-pattern

下面，当观察者希望观察不同的项目时，我尝试为观察者模式编写 sudo 代码。

忽略语法错误。我想知道这是否是实现这一点的正确方法。如果没有，请提出更好的方法。

```
// Used by the subject for keeping a track of what items the observer wants to observe
typedef struct observerListStruct
{
    bool getTemperatureUpdate;
    bool getHumidityUpdate;
    bool getPressureUpdate;
    observer's-function pointer's address;
};

// Subject's class
class weatherData
{
    public:
        // Observers will call this function to register themselves. The function pointer will point to the function which will get called when updates are available.
        void registerObservers (observer obj, observer's-FunctionPointer)
        {
            // This observer's function returns which items to observe.
            char* f = obj.returnItemsToObserve ();
            if f[0] = `1`
                observerListStruct.getTemperatureUpdate = true;
        }

        void unregisterObservers (observer obj) {}

    private:
        vector <observerListStruct> observerList;
        float temperature;
        float humidity;
        float pressure;

        void notifyObservers ()          {}

        float getTemperature ()          {}
        float getHumidity ()                 {}
        float getPressure ()                 {}
} weatherDataObject;

// Base class for observers containing common functions
class observers
{
    char ItemsToObserve [3] = {1, 2, 3};

    // This observer's function returns which items to observe. Default - return all items
        virtual char* returnItemsToObserve ()
    {
        return ItemsToObserve;
    }
};

class observerDisplayElementCurrentConditions : public observers
{
    char ItemsToObserve [3] = {1, 2};

    char* returnItemsToObserve ()
    {
        return ItemsToObserve;
    }

    // this function will be used as a function pointer for getting updates
    void getUpdatesAndDisplayWeatherData (float, float) {}
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T09:27:17.103

一个更面向模式的解决方案（但没有函数指针）可能如下。您可以对 WeatherObserver-Class 进行参数化以仅获取您想要的值。

```
#include <list>
#include <iostream>

class Observable;   //forward declaration

//Base class for all observers
class Observer {
    friend class Observable;    //allow access to observedSubject

protected:
    Observable *observedSubject;

public:
    virtual void update(){};
};

//Base class for all observables
class Observable {
private:
    std::list<Observer * const> m_registeredObservers;

public:
    ~Observable()
    {
        //delete the observers
        std::list<Observer * const>::iterator it = m_registeredObservers.begin();

        while (it != m_registeredObservers.end())
        {
            delete *it;
            it = m_registeredObservers.erase(it);
        }
    }

    void addObserver(Observer * const _pObserver)
    {
        _pObserver->observedSubject = this;
        m_registeredObservers.push_back(_pObserver);
    }

    void removeObserver(Observer * const _pObserver)
    {
        m_registeredObservers.remove(_pObserver);
        delete _pObserver;
    }

    void notifyObservers()
    {
        std::list<Observer * const>::iterator it = m_registeredObservers.begin();

        while (it != m_registeredObservers.end())
        {
            (*it)->update();
            it++;
        }
    }
};

//Concrete Observable
class WeatherData : public Observable {
private:
    float temperature;
    float humidity;
    float pressure;

public:
    WeatherData(): temperature(0), humidity(0), pressure(0)
    {};

    float getTemperature () const 
    {
        return temperature;
    }

    float getHumidity () const 
    {
        return humidity;
    }

    float getPressure () const 
    {
        return pressure;
    }

    void setTemperature(float _temperature)
    {
        if (temperature != _temperature)
        {
            temperature = _temperature;
            notifyObservers();
        }
    }

    void setHumidity(float _humidity)
    {
        if (humidity != _humidity)
        {
            humidity = _humidity;
            notifyObservers();
        }
    }

    void setPressure(float _pressure)
    {
        if (pressure != _pressure)
        {
            pressure = _pressure;
            notifyObservers();
        }
    }

};

//Concrete implementation of an weather observer
class WeatherObserver : public Observer 
{
    public:
        WeatherObserver():Observer(){};
        void update()
        {
            WeatherData* pWeatherPtr = static_cast<WeatherData*>(observedSubject);
            if (pWeatherPtr != 0)
            {
                float actHumidity = pWeatherPtr->getHumidity();
                float actPressure = pWeatherPtr->getPressure();
                float actTemperature = pWeatherPtr->getTemperature();

                //do something with the data
                std::cout << "WeatherObserver update" << std::endl;
                std::cout << "Temperature : " << actTemperature << std::endl;
                std::cout << "Humidity : " << actHumidity << std::endl;
                std::cout << "Pressure : " << actPressure << std::endl;
            }
        }
};

int main()
{
    WeatherData weatherData;
    Observer * pObserver = new WeatherObserver();
    weatherData.addObserver(pObserver);

    weatherData.setHumidity(100);
    weatherData.setTemperature(100);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T08:33:53.783

我认为定义一组每个观察者都可以收听的事件类型更容易，也更具可扩展性。然后你注册观察者来监听那个特定的事件类型。然后被观察者保留为每个事件注册的观察者列表，并在事件发生时通知他们。使用`std::function`, `std::bind`（或`boost`等价物）的组合，很容易为给定的事件类型注册回调。您可以将回调放在事件类型映射到回调中。

例如，沿着这些路线的东西（几乎是伪代码，尚未经过测试）

```
class Publisher {

 public :
  void subscribe(const std::string& event, 
                 std::function<void(double)> callback) {
    m_subscribers[s].push_back(callback);    
  }
  void publish(const std::string& event) const {
    for (auto& f : m_subscribers[event]) f( some double );}

  void event(const std::string& event) const { publish(event);}

 private:
  // map of event types (here simply strings) to list of callbacks
  std::map<std::string&, 
           std::list<std::function<void(const std::string&)>>> m_subscribers;
};

struct Foo {
  void foo(double x) {
  std::cout << "Foo received message: " << x << "\n";
  }
};

struct Bar {
  void bar(double x) {
  std::cout << "Bar received message: " << x << "\n";
  }
};

int main() {
  Publisher pub;
  Foo f0;
  Foo f1;
  Bar bar0;

  pub.subscribe("RED", std::bind(&Foo::foo, &foo0, _1));
  pub.subscribe("GREEN", std::bind(&Foo::foo, &foo1, _1));
  pub.subscribe("WHITE", std::bind(&Foo::foo, &foo1, _1));
  pub.subscribe("RED", std::bind(&Bar::bar, &bar0, _1));
  pub.subscribe("BLUE", std::bind(&Bar::bar, &bar0, _1));
  pub.subscribe("MAGENTA", std::bind(&Bar::bar, &bar0, _1));

  // trigger a "GREEN" event
  pub.event("GREEN");

} 
```

在这里，观察者（或订阅者）注册了一些事件，这里用字符串表示，当这个事件发生时，他们注册的回调被调用。在上面的示例中，我手动触发了一个事件来说明机制。

这种事件回调机制允许将实际项目与回调操作分离。Observed（或发布者）知道为给定事件传递回调的参数，以及调用哪些回调，因此观察者不依赖于被观察对象的内部数据。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-02T09:22:02.347

```
#include <algorithm>
#include <vector>

class WeatherFlags
{
public:
    WeatherFlags()
        : mask_(0)
    {}
    union {
        struct {
            unsigned int temperature_ : 1;
            unsigned int humidity_ : 1;
            unsigned int pressure_ : 1;
        };
        unsigned int mask_;
    };
};

class WeatherData;

class WeatherEvent
{
public:
    WeatherEvent(WeatherData* data, WeatherFlags const& flags)
        : data_(data)
        , flags_(flags)
    {}
    double getTemperature() const;

    WeatherData* data_;
    WeatherFlags flags_;  
};

class WeatherListener
{
public:
    virtual ~WeatherListener() = 0;
    virtual void onWeatherUpdate(WeatherEvent& e) = 0;
};
inline WeatherListener::~WeatherListener() {}

class WeatherListenerEntry
{
public:
    WeatherListenerEntry()
        : listener_(0)
    {}
    WeatherListenerEntry(WeatherListener* listener, WeatherFlags const& flags)
        : listener_(listener)
        , flags_(flags)
    {}

    WeatherListener* listener_;
    WeatherFlags flags_;
};

class WeatherData
{
public:
    WeatherData();
    void addListener(WeatherListener* listener, WeatherFlags const& flags);
    void removeListener(WeatherListener* listener);

    void notify(WeatherFlags const& flags);

    double getTemperature() const { return temperature_; }
private:
    typedef std::vector<WeatherListenerEntry> Listeners;
    Listeners listeners_;
    double temperature_;
};

WeatherData::WeatherData()
: temperature_(0)
{}

void WeatherData::addListener(WeatherListener* listener, WeatherFlags const& flags)
{
    // TODO Could maybe check for the addition of duplicates here...
    listeners_.push_back(WeatherListenerEntry(listener, flags));
}

void WeatherData::removeListener(WeatherListener* listener)
{
    struct ListenerEquals {
        WeatherListener* listener_;
        ListenerEquals(WeatherListener* listener)
            : listener_(listener)
        {}
        bool operator()(WeatherListenerEntry const& e) const {
            return (e.listener_ == listener_);
        }
    };
    listeners_.erase(
        std::remove_if(listeners_.begin(), listeners_.end(), ListenerEquals(listener)),
        listeners_.end());
}

void WeatherData::notify(WeatherFlags const& flags)
{
    WeatherEvent evt(this, flags);
    for (Listeners::iterator i = listeners_.begin(); i != listeners_.end(); ++i)
    {
        if (0 != (i->flags_.mask_ & flags.mask_)) {
            i->listener_->onWeatherUpdate(evt);
        }
    }
}

double 
WeatherEvent::getTemperature() const
{
    return data_->getTemperature();
}

#include <iostream>
class WeatherObserverStdout : public WeatherListener
{
public:
    void observe(WeatherData& data) {
        WeatherFlags flags;
        flags.temperature_ = true; // interested in temperature only.
        data.addListener(this, flags);        
    }
    virtual void onWeatherUpdate(WeatherEvent& e);
};

void
WeatherObserverStdout::onWeatherUpdate(WeatherEvent& e)
{
    double temp = e.getTemperature();
    std::cout << "Temperatrure: " << temp << std::endl;
}

int _tmain(int argc, _TCHAR* argv[])
{
    WeatherData wdata;
    WeatherObserverStdout obs;
    obs.observe(wdata);

    WeatherFlags flags;
    wdata.notify(flags);
    flags.temperature_ = true;
    wdata.notify(flags);
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-11-13T01:48:26.250

我编写了很多 C++ 代码，并且需要为我正在开发的一些游戏组件创建一个 Observer。我需要一些东西来将“帧开始”、“用户输入”等作为游戏中的事件分发给感兴趣的各方。

我还希望可以处理的事件有更多的粒度。我有很多小事情发生了......我不需要让有兴趣为下一帧重置的部分担心用户输入的变化。

我还希望它是纯 C++，不依赖于平台或特定技术（如 boost、Qt 等），因为我经常在不同的项目中构建和重用组件（以及它们背后的想法）。

这是我提出的解决方案的粗略草图：

1.  Observer 是一个带有键（枚举值，而不是字符串；这是一个速度折衷，因为键没有经过散列搜索，但这意味着没有简单的“字符串”名称，您必须提前定义它们）以便主题注册兴趣。因为是单例，所以一直存在。
2.  每个主题都派生自一个公共基类。基类有一个抽象虚函数 Notify(...) 必须在派生类中实现，以及一个析构函数，当它被删除时，它会从 Observer 中删除（它总是可以到达）。
3.  在观察者本身内部，如果在 Notify(...) 正在进行时调用 Detach(...)，则任何分离的 Subjects 最终都会出现在列表中。
4.  当在 Observer 上调用 Notify(...) 时，它会创建主题列表的临时副本。当它迭代它时，它将它与最近分离的进行比较。如果目标不在其上，则在目标上调用 Notify(...)。否则，将被跳过。
5.  Observer 中的 Notify(...) 还跟踪处理级联调用的深度（A 通知 B、C、D，并且 D.Notify(...) 触发对 E 的 Notify(...) 调用， ETC。）

这是界面最终的样子：

```
/* 
 The Notifier is a singleton implementation of the Subject/Observer design
 pattern.  Any class/instance which wishes to participate as an observer
 of an event can derive from the Notified base class and register itself
 with the Notiifer for enumerated events.

 Notifier derived classes MUST implement the notify function, which has 
 a prototype of:

 void Notify(const NOTIFIED_EVENT_TYPE_T& event)

 This is a data object passed from the Notifier class.  The structure 
 passed has a void* in it.  There is no illusion of type safety here 
 and it is the responsibility of the user to ensure it is cast properly.
 In most cases, it will be "NULL".

 Classes derived from Notified do not need to deregister (though it may 
 be a good idea to do so) as the base class destructor will attempt to
 remove itself from the Notifier system automatically.

 The event type is an enumeration and not a string as it is in many 
 "generic" notification systems.  In practical use, this is for a closed
 application where the messages will be known at compile time.  This allows
 us to increase the speed of the delivery by NOT having a 
 dictionary keyed lookup mechanism.  Some loss of generality is implied 
 by this.

 This class/system is NOT thread safe, but could be made so with some
 mutex wrappers.  It is safe to call Attach/Detach as a consequence 
 of calling Notify(...).  

 */

class Notified;

class Notifier : public SingletonDynamic<Notifier>
{
public:
   typedef enum
   {
      NE_MIN = 0,
      NE_DEBUG_BUTTON_PRESSED = NE_MIN,
      NE_DEBUG_LINE_DRAW_ADD_LINE_PIXELS,
      NE_DEBUG_TOGGLE_VISIBILITY,
      NE_DEBUG_MESSAGE,
      NE_RESET_DRAW_CYCLE,
      NE_VIEWPORT_CHANGED,
      NE_MAX,
   } NOTIFIED_EVENT_TYPE_T;

private:
   typedef vector<NOTIFIED_EVENT_TYPE_T> NOTIFIED_EVENT_TYPE_VECTOR_T;

   typedef map<Notified*,NOTIFIED_EVENT_TYPE_VECTOR_T> NOTIFIED_MAP_T;
   typedef map<Notified*,NOTIFIED_EVENT_TYPE_VECTOR_T>::iterator NOTIFIED_MAP_ITER_T;

   typedef vector<Notified*> NOTIFIED_VECTOR_T;
   typedef vector<NOTIFIED_VECTOR_T> NOTIFIED_VECTOR_VECTOR_T;

   NOTIFIED_MAP_T _notifiedMap;
   NOTIFIED_VECTOR_VECTOR_T _notifiedVector;
   NOTIFIED_MAP_ITER_T _mapIter;

   // This vector keeps a temporary list of observers that have completely
   // detached since the current "Notify(...)" operation began.  This is
   // to handle the problem where a Notified instance has called Detach(...)
   // because of a Notify(...) call.  The removed instance could be a dead
   // pointer, so don't try to talk to it.
   vector<Notified*> _detached;
   int32 _notifyDepth;

   void RemoveEvent(NOTIFIED_EVENT_TYPE_VECTOR_T& orgEventTypes, NOTIFIED_EVENT_TYPE_T eventType);
   void RemoveNotified(NOTIFIED_VECTOR_T& orgNotified, Notified* observer);

public:

   virtual void Reset();
   virtual bool Init() { Reset(); return true; }
   virtual void Shutdown() { Reset(); }

   void Attach(Notified* observer, NOTIFIED_EVENT_TYPE_T eventType);
   // Detach for a specific event
   void Detach(Notified* observer, NOTIFIED_EVENT_TYPE_T eventType);
   // Detach for ALL events
   void Detach(Notified* observer);

   /* The design of this interface is very specific.  I could 
    * create a class to hold all the event data and then the
    * method would just have take that object.  But then I would
    * have to search for every place in the code that created an
    * object to be used and make sure it updated the passed in
    * object when a member is added to it.  This way, a break
    * occurs at compile time that must be addressed.
    */
   void Notify(NOTIFIED_EVENT_TYPE_T, const void* eventData = NULL);

   /* Used for CPPUnit.  Could create a Mock...maybe...but this seems
    * like it will get the job done with minimal fuss.  For now.
    */
   // Return all events that this object is registered for.
   vector<NOTIFIED_EVENT_TYPE_T> GetEvents(Notified* observer);
   // Return all objects registered for this event.
   vector<Notified*> GetNotified(NOTIFIED_EVENT_TYPE_T event);
};

/* This is the base class for anything that can receive notifications.
 */
class Notified
{
public:
   virtual void Notify(Notifier::NOTIFIED_EVENT_TYPE_T eventType, const void* eventData) = 0;
   virtual ~Notified();

};

typedef Notifier::NOTIFIED_EVENT_TYPE_T NOTIFIED_EVENT_TYPE_T; 
```

注意：Notified 类有一个函数，Notify(...) 这里。因为 void* 不是类型安全的，所以我创建了其他版本，其中 notify 如下所示：

```
virtual void Notify(Notifier::NOTIFIED_EVENT_TYPE_T eventType, int value); 
virtual void Notify(Notifier::NOTIFIED_EVENT_TYPE_T eventType, const string& str); 
```

相应的 Notify(...) 方法已添加到通知程序本身。所有这些都使用一个函数来获取“目标列表”，然后在目标上调用适当的函数。这很好用，并且使接收器不必进行难看的演员表。

这似乎运作良好。该解决方案与源代码一起发布在网络上[。](http://www.nliapps.com/tools-you-build-part-i-observer/)这是一个相对较新的设计，因此非常感谢任何反馈。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-03T15:58:37.200

我的两分钱...

观察者模式的经典（四人组）实现通知观察者主题的*任何*属性的变化。在您的问题中，您希望将观察者注册到*特定*属性，而不是整个主题。您可以将观察者模式下移一级并将属性作为具体主题并定义它们的观察者（每个属性），但是有一种更好的方法可以解决这个问题。

在 C# 中，观察者模式是通过**事件**和**委托**来实现的。委托代表事件处理程序 - 触发事件时应执行的函数。可以从事件中添加（注册）或删除（未注册）代表。

在 C++ 中，**仿函数**充当委托 - 它们可以存储所有必要的信息，以在不同的上下文中调用某些全局函数或类方法。事件是（注册的）仿函数的集合，当事件被引发（调用）时，它基本上会遍历该列表并调用所有仿函数（参见`Publisher::publish`juanchopanza 解决方案中的方法）。

我尝试实现 C++ 版本的事件和委托，并在修改后的观察者模式中使用它们，这可以应用于您的案例。这就是我想出的：

```
#include <list>
#include <iostream>
#include <algorithm>

// use base class to resolve the problem of how to put into collection objects of different types
template <typename TPropertyType>
struct PropertyChangedDelegateBase
{
    virtual ~PropertyChangedDelegateBase(){};
    virtual void operator()(const TPropertyType& t) = 0;
};

template <typename THandlerOwner, typename TPropertyType>
struct PropertyChangedDelegate : public PropertyChangedDelegateBase<TPropertyType>
{
    THandlerOwner* pHandlerOwner_;

    typedef void (THandlerOwner::*TPropertyChangeHandler)(const TPropertyType&);
    TPropertyChangeHandler handler_;

public:
    PropertyChangedDelegate(THandlerOwner* pHandlerOwner, TPropertyChangeHandler handler) : 
      pHandlerOwner_(pHandlerOwner), handler_(handler){}

    void operator()(const TPropertyType& t)
    {
        (pHandlerOwner_->*handler_)(t);
    }
};

template<typename TPropertyType>
class PropertyChangedEvent
{
public:
    virtual ~PropertyChangedEvent(){};

    void add(PropertyChangedDelegateBase<TPropertyType>* const d)
    {
        std::list<PropertyChangedDelegateBase<TPropertyType>* const>::const_iterator it = std::find(observers_.begin(), observers_.end(), d);
        if(it != observers_.end())
            throw std::runtime_error("Observer already registered");

        observers_.push_back(d);
    }

    void remove(PropertyChangedDelegateBase<TPropertyType>* const d)
    {       
        std::list<PropertyChangedDelegateBase<TPropertyType>* const>::const_iterator it = std::find(observers_.begin(), observers_.end(), d);
        if(it != observers_.end())
            observers_.remove(d);
    }   

    // notify
    void operator()(const TPropertyType& newValue)
    {
        std::list<PropertyChangedDelegateBase<TPropertyType>* const>::const_iterator it = observers_.begin();
        for(; it != observers_.end(); ++it)
        {
            (*it)->operator()(newValue);
        }
    }

protected:
    std::list<PropertyChangedDelegateBase<TPropertyType>* const> observers_;
};

// class that owns concrete subjects
class PropertyOwner1
{
    int property1_;
    float property2_;   
public:
    PropertyChangedEvent<int> property1ChangedEvent;
    PropertyChangedEvent<float> property2ChangedEvent;

    PropertyOwner1() : 
        property1_(0), 
        property2_(0.0f)
    {}  

    int property1() const {return property1_;}
    void property1(int n) 
    {
        if(property1_ != n)
        {
            property1_ = n;
            std::cout << "PropertyOwner1::property1(): property1_ set to " << property1_ << std::endl;
            property1ChangedEvent(property1_);
        }
    }

    float property2() const {return property2_;}
    void property2(float n) 
    {
        if(property2_ != n)
        {
            property2_ = n;
            std::cout << "PropertyOwner1::property2(): property2_ set to " << property2_ << std::endl;
            property2ChangedEvent(property2_);
        }
    }
};

// class that owns concrete subjects
class PropertyOwner2
{
    bool property1_;
    double property2_;  
public:
    PropertyChangedEvent<bool> property1ChangedEvent;
    PropertyChangedEvent<double> property2ChangedEvent;

    PropertyOwner2() : 
        property1_(false), 
        property2_(0.0)
    {}  

    bool property1() const {return property1_;}
    void property1(bool n) 
    {
        if(property1_ != n)
        {
            property1_ = n;
            std::cout << "PropertyOwner2::property1(): property1_ set to " << property1_ << std::endl;
            property1ChangedEvent(property1_);
        }
    }

    double property2() const {return property2_;}
    void property2(double n) 
    {
        if(property2_ != n)
        {
            property2_ = n;
            std::cout << "PropertyOwner2::property2(): property2_ set to " << property2_ << std::endl;
            property2ChangedEvent(property2_);
        }
    }
};

// class that observes changes in property1 of PropertyOwner1 and property1 of PropertyOwner2
struct PropertyObserver1
{   
    void OnPropertyOwner1Property1Changed(const int& newValue)
    {
        std::cout << "\tPropertyObserver1::OnPropertyOwner1Property1Changed(): \n\tnew value is: " << newValue << std::endl;
    }

    void OnPropertyOwner2Property1Changed(const bool& newValue)
    {
        std::cout << "\tPropertyObserver1::OnPropertyOwner2Property1Changed(): \n\tnew value is: " << newValue << std::endl;
    }
};

// class that observes changes in property2 of PropertyOwner1 and property2 of PropertyOwner2
struct PropertyObserver2
{   
    void OnPropertyOwner1Property2Changed(const float& newValue)
    {
        std::cout << "\tPropertyObserver2::OnPropertyOwner1Property2Changed(): \n\tnew value is: " << newValue << std::endl;
    }

    void OnPropertyOwner2Property2Changed(const double& newValue)
    {
        std::cout << "\tPropertyObserver2::OnPropertyOwner2Property2Changed(): \n\tnew value is: " << newValue << std::endl;
    }
};

int main(int argc, char** argv)
{
    PropertyOwner1 propertyOwner1;  
    PropertyOwner2 propertyOwner2;      

    PropertyObserver1 propertyObserver1;
    PropertyObserver2 propertyObserver2;

    // register observers
    PropertyChangedDelegate<PropertyObserver1, int> delegate1(&propertyObserver1, &PropertyObserver1::OnPropertyOwner1Property1Changed);
    propertyOwner1.property1ChangedEvent.add(&delegate1);

    PropertyChangedDelegate<PropertyObserver2, float> delegate2(&propertyObserver2, &PropertyObserver2::OnPropertyOwner1Property2Changed);
    propertyOwner1.property2ChangedEvent.add(&delegate2);

    PropertyChangedDelegate<PropertyObserver1, bool> delegate3(&propertyObserver1, &PropertyObserver1::OnPropertyOwner2Property1Changed);
    propertyOwner2.property1ChangedEvent.add(&delegate3);

    PropertyChangedDelegate<PropertyObserver2, double> delegate4(&propertyObserver2, &PropertyObserver2::OnPropertyOwner2Property2Changed);
    propertyOwner2.property2ChangedEvent.add(&delegate4);

    propertyOwner1.property1(1);
    propertyOwner1.property2(1.2f);

    propertyOwner2.property1(true);
    propertyOwner2.property2(3.4);

    // unregister PropertyObserver1
    propertyOwner1.property1ChangedEvent.remove(&delegate1);
    propertyOwner2.property1ChangedEvent.remove(&delegate3);

    propertyOwner1.property1(2);
    propertyOwner1.property2(4.5f);
} 
```

输出：

> ```
>  PropertyOwner1::property1(): property1_ set to 1
>       PropertyObserver1::OnPropertyOwner1Property1Changed():
>       new value is: 1 
>     PropertyOwner1::property2(): property2_ set to 1.2
>       PropertyObserver2::OnPropertyOwner1Property2Changed():
>       new value is: 1.2 
>     PropertyOwner2::property1(): property1_ set to 1
>       PropertyObserver1::OnPropertyOwner2Property1Changed():
>       new value is: 1 
>     PropertyOwner2::property2(): property2_ set to 3.4
>       PropertyObserver2::OnPropertyOwner2Property2Changed():
>       new value is: 3.4 
>     PropertyOwner1::property1(): property1_ set to 2 
>     PropertyOwner1::property2(): property2_ set to 4.5
>       PropertyObserver2::OnPropertyOwner1Property2Changed():
>       new value is: 4.5 
> ```

每个观察者都注册了一个特定的属性，当收到通知时，每个观察者都确切地知道谁是该属性的所有者以及该属性的新值是什么。

# javascript - 可重用的单独事件处理程序

> ID：10409967
> 
> 赞同：1
> 
> 时间：2012-05-02T08:11:45.273
> 
> 标签：javascript, jquery, function

我有一个简单的点击处理程序，它会提醒它的链接`href`，如下所示：

```
<a id="link" href="http://www.google.com">Google</a>

$('a#link').on('click', function() {
  alert($(this).attr('href'));
}); 
```

如何分离函数（以及如何调用它）以便它可以被另一个点击处理程序调用？

```
function showHref() {
  /* What to do here because $(this) won't resolve to <a> anymore. */
}

// I'd like a#another-link to be able to call that same function above.    
<a id="another-link" href="http://www.microsoft.com">Microsoft</a>

$('a#another-link').on('click', /* How to call showHref? */); 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T08:16:56.543

你可以这样做：

```
function showHref() {
   alert($(this).attr('href'));
}

$('a#link').on('click', showHref);
$('a#another-link').on('click', showHref); 
```

在这段代码中，`this`里面的`showHref` *将*引用被点击的链接，因为 jQuery 确保被点击的链接是调用上下文（使用`.call()`它你可能想继续阅读）。但是，如果您要手动调用`showHref`，`this`则*不会*引用您的链接。

如果您想要一个`showHref`既可以手动调用又可以通过 jQuery 绑定的定义，将引用作为参数传递可能是最简洁的：

```
function showHref(link) {
    alert($(link).attr('href'));
} 
```

在这种情况下，您必须按如下方式调整您的听众：

```
$('a#link').on('click', function() {
    showHref(this);
}); 
```

但也可以组合选择器：

```
$('a#link, a#another-link').on('click', function() {
   alert($(this).attr('href'));
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T08:18:14.397

您可以将函数逻辑放入这样的引用中：

```
var handler = function () {
    alert($(this).attr('href'));
}; 
```

然后您可以使用该引用来初始化事件侦听器：

```
$('#link').on('click', handler); 
```

当然，您可以重复使用它。

```
$('#some_other_link').on('click', handler); 
```

或者在事件处理程序上下文之外自己调用它（如果您正在设计事件处理程序函数，这通常没有意义——但通常可以使用 lambdas 来完成）。

```
handler(); 
```

但是如果你只想在一个元素上触发事件，你应该调用相应的事件触发函数。

```
$('#link').click();
// or
$('#link').trigger('click'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T08:23:53.527

你写了：

```
function showHref() {
  /* What to do here because $(this) won't resolve to <a> anymore. */
} 
```

嗯，实际上，是的，它会的。这正是 DOM 事件以及使用 jQuery 注册的事件处理程序所做出的承诺。

FWIW，内容应该是：

```
alert(this.href) 
```

真的不需要调用 jQuery 来获取元素的`href`属性。

# url - 在迁移到 Symfony2 时保存与旧式链接的兼容性

> ID：10409969
> 
> 赞同：1
> 
> 时间：2012-05-02T08:11:45.830
> 
> 标签：url, mod-rewrite, symfony

我正在将 web-app 从纯 php 移动到 Symfony2 并保存像 http://domain.com/index.php?task=help&term_id=2 这样的工作旧链接[（](http://domain.com/index.php?task=help&term_id=2)在 Symfony2 中就像[http://domain.com /2/?task=help](http://domain.com/2/?task=help)）。我应该怎么做？（将一些重写规则添加到 web 目录中的 .htaccess 或其他一些东西......）

UPD：查询参数的数量和位置是可变的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T08:22:00.283

我会向 htaccess 添加重写规则，例如：

更新：

```
RewriteCond %{query_string} ^task=([a-zA-Z]+)&term_id=([0-9]+)$
RewriteRule ^index.php$ /index.php/%2/?task=%1 [R,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T12:37:21.180

我决定用下一个方法解决我的问题：

```
RewriteCond %{QUERY_STRING} term_id=([0-9]+) [NC]
RewriteRule ^(index.php)?$ /%1/ [R=301,NC,L] 
```

# iis - 用于 Windows Server 2008 的脚本更改 .sh

> ID：10409975
> 
> 赞同：1
> 
> 时间：2012-05-02T08:12:06.210
> 
> 标签：iis, powershell, migration, windows-server-2008

我尝试迁移到 Windows Server 2008，我是脚本概念的新手。

我有一个要启动的 .sh 文件，其中包含：

```
cd RADIOROOT/PLAYERS
killall player_1
su - robotstream --command='/RADIOROOT/PLAYERS/player_1 -t /RADIOROOT/PLAYERS/player_1.conf' & > dev/null 
```

首先，如何在我的 IIS 上启动这个 .sh 文件？我必须在 powershell 脚本中更改它吗？

我尝试将其更改为 .ps1 文件，并进行了一些更改但无法正常工作。有人知道怎么做吗？

那么，您是否有任何关于更改此类脚本以使其工作的网站？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T16:22:37.287

假设 Windows 服务器上的所有内容都与 *nix 服务器上的相同（相同的路径，robotstream 采用相同的参数等），这应该在 PowerShell 中执行相同的操作：

```
cd C:\RADIOROOT\PLAYERS
Stop-Process player_1
$command = "robotstream --command='/RADIOROOT/PLAYERS/player_1 -t /RADIOROOT/PLAYERS/player_1.conf'"
Invoke-Expression $command 
```

使用 .ps1 扩展名保存它，然后从 PowerShell 控制台运行它。

至于关于将 SH 脚本转换为 PowerShell 的网站，您需要学习 Bash（这样您就可以理解要转换的脚本）和 PowerShell（这样您就知道如何编写新脚本）。两者都有很多好的网站。只是谷歌“powershell教程”。

希望有帮助。随时要求澄清。

# jersey - PUT 方法的 Uriinfo

> ID：10409976
> 
> 赞同：0
> 
> 时间：2012-05-02T08:12:11.313
> 
> 标签：jersey

我正在使用 Urinfo 访问我的 restful web 服务中的查询参数，如下所示

```
@GET
    @Produces("text/plain")
    @Path("/association")   
    public Response Association(            
            @Context UriInfo uriInfo){      
            String clinicianId = uriInfo.getQueryParameters().getFirst("clinicianId");
            List<String> providerList = uriInfo.getQueryParameters().get("clinicialProviderId"); 
```

如何使用 uriinfo访问**PUT方法的参数。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T09:28:00.407

一样的方法。

也许我不明白这个问题。无论 HTTP 方法如何，都以相同的方式访问查询参数。您是在谈论 PUT 的不同参数吗？你是说表单域吗？如果您在 PUT 请求中发送表单数据并且想要访问它，您可以使用 @FormParam 将它们注入到您的方法参数或字段中。顺便说一句，您还可以使用 @QueryParam 来注入查询参数，而不是使用 UriInfo。

# c# - 如何有效地只读取文本文件的最后一行

> ID：10409977
> 
> 赞同：5
> 
> 时间：2012-05-02T08:12:13.713
> 
> 标签：c#, file, stream

需要从大日志文件中获取最后一行。最好的方法是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-02T08:13:47.840

您想使用以下方式向后读取文件`ReverseLineReader`：

[如何在 C# 中使用迭代器反向读取文本文件](https://stackoverflow.com/questions/452902/how-to-read-a-text-file-reversely-with-iterator-in-c-sharp)

然后`.Take(1)`在上面运行。

```
var lines = new ReverseLineReader(filename);
var last = lines.Take(1); 
```

您需要直接使用[Jon Skeet 的](https://stackoverflow.com/users/22656/jon-skeet)库[MiscUtil](http://www.yoda.arachsys.com/csharp/miscutil/)，而不是复制/粘贴代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-22T23:46:08.587

```
 String lastline="";
    String filedata;

    // Open file to read
    var fullfiledata = new FileStream(filepath, FileMode.Open, FileAccess.Read, FileShare.ReadWrite);
    StreamReader sr = new StreamReader(fullfiledata);

    //long offset = sr.BaseStream.Length - ((sr.BaseStream.Length * lengthWeNeed) / 100);
    // Assuming a line doesnt have more than 500 characters, else use above formula
    long offset = sr.BaseStream.Length - 500;

    //directly move the last 500th position
    sr.BaseStream.Seek(offset, SeekOrigin.Begin);

    //From there read lines, not whole file
    while (!sr.EndOfStream)
    {
        filedata = sr.ReadLine();
        // Interate to see last line
        if (sr.Peek() == -1)
        {
            lastline = filedata;
        }
    }       

    return lastline;
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-18T17:24:44.583

或者你可以做两行（仅限.Net 4）

```
var lines = File.ReadLines(path);
string line = lines.Last(); 
```

# javascript - 分析 jQuery 应用程序

> ID：10409978
> 
> 赞同：7
> 
> 时间：2012-05-02T08:12:25.117
> 
> 标签：javascript, jquery, profiling, performance

我最近在应用程序上遇到了一个响应缓慢的脚本错误，我觉得需要分析应用程序以确定我需要改进的地方。我想要一个长期的修复，而不是一个骇人听闻的修复。我尝试了 Firebug Profiler，但由于该应用程序使用了大量的 jQuery，我得到了很多关于匿名调用的报告，这是我真正预料到的。

我还在网上找到了一些关于由 John Resig 创建的分析器的报告，但我发现的链接都已失效。

所以我的问题是：

1.  分析 jQuery 应用程序的最佳方法是什么？
2.  是否有任何开源专用工具/脚本来实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T21:08:25.283

因此，在挖掘了更多之后，我找到了 John Resig 给出的另一个解决方案。他正在使用一个名为 FireUnit(http://fireunit.org/) 的 firebug 单元测试扩展，这被证明是相当不错的。

如果您查看以下示例中的示例：

> [http://ejohn.org/blog/function-call-profiling/](http://ejohn.org/blog/function-call-profiling/)

并检查他提供的测试页面：

> [http://ejohn.org/files/jquery-profile.html](http://ejohn.org/files/jquery-profile.html)

你得到的是一些不错的结果，如下所示：

> .addClass("测试"); 52
> .addClass（“测试”）；102
> .removeClass（“测试”）；102
> .removeClass（“测试”）；52
> .css（“颜色”，“红色”）；299 O(3n)
> .css({color: "red", border: "1px solid red"}); 第597
> 章 198 O(2n)
> .append(“测试”); 第599
> 章 第982
> 章 968 O（10n）
> .html（“测试”）；104
> .empty(); 100
> .is("div"); 109
> .filter（“div”）；214 O（2n）
> .find（“div”）；300 O(3n)

我已经设法将它集成到几个应用程序中，结果非常令人满意。唯一的缺点是您只能在 Firefox 中使用该插件。但这仍然是一个很好的工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T08:40:23.770

[如此处](https://stackoverflow.com/questions/2140716/how-to-profile-and-and-get-javascript-performance)所述：

> IE、Chrome 和 Safari 在浏览器附带的 Web 开发工具中内置了分析器。对于 Firefox，您可以使用 Firebug。也可能有用，因为您使用的是 jQuery，这意味着您的分析报告将充满匿名函数等，使其非常难以阅读，[John Resig 的 jQuery 分析插件](http://ejohn.org/blog/deep-profiling-jquery-apps/)，它将为您提供更清晰的输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-26T12:30:22.953

我创建了一个完全符合您需要的工具：http: [//yellowlab.tools](http://yellowlab.tools)

启动测试，单击“JS Timeline”选项卡，它会记录在页面加载期间访问 DOM 的每个 jQuery 函数。它还跟踪 vanilla JS 函数，因此您可以了解 jQuery 背后的魔力。

对于帮助优化一些 jQuery 代码的性能非常有用。

希望我的回答不会太晚:)

# google-maps - 泽西岛/根西岛的谷歌地图 API？

> ID：10409983
> 
> 赞同：3
> 
> 时间：2012-05-02T08:12:36.027
> 
> 标签：google-maps, google-maps-api-3, geocoding

我的公司正在使用 Google Maps API 为我们的产品提供安装程序定位器。到目前为止，当我在海峡群岛（英国）添加安装程序时，一切都很好。有什么方法可以让 Google Maps API 为我识别这些位置？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-15T01:13:10.370

海峡群岛在 Google Mapmaker 中是可编辑的，这意味着如果您碰巧知道正确的答案，您可以解决大多数地理编码问题。并非所有修复程序都会立即生效，但它们最终会生效。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-02T08:25:22.267

没有！海峡群岛的地理位置（由谷歌提供）非常不完整。例如，它似乎无法识别邮政编码。

我的公司位于泽西岛。在我们的网站上，我们对用户进行地理定位，然后在地图上放置一个我们认为他们在哪里的标记。我们将此标记设置为“可拖动”，如果标记不准确，则允许用户将其拖动到他们的位置。您可以从 API 中获取有关您定位某人的精确程度的信息 - 如果它不够好，您可以提供额外的提示来告诉用户定位自己。

这不是一个理想的解决方案，但拥有它很重要 - 地理定位服务在世界任何地方都无法准确运行。

# php - 从javascript中的php脚本获取数据

> ID：10409984
> 
> 赞同：1
> 
> 时间：2012-05-02T08:12:41.160
> 
> 标签：php, jquery, ajax

我尝试在我的 JavaScript 中接收 PHP 响应。

我的 PHP 看起来像这样：

```
一些代码

    if(...) echo "1";

    否则回显“2”；

```

JavaScript：

```
    函数获取选择（）{
        变种返回=“”；
        $.ajax({
            异步：假，
            缓存：假，
            url: "http://mydomain.com/script.php",
            类型：“发布”，
            数据类型：“文本”，
            成功：函数（数据）{
                返回=数据；
            }
        });
        返回返回；
    }

    var r = GetChoice();
    警报（r）；

```

但`GetChoice()`什么也不返回。怎么了？

UPD：如果 javascript 和 php 脚本在同一台服务器上，它可以工作。我在不同领域的脚本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T08:32:42.647

尝试这个 ：

temp1.php

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script>

  function GetChoice() {
        var returned = "";
        $.ajax({
                async: false,
                cache: false,
                type: "POST",
                url: "http://localhost/temp2.php",
                data: { name: "John"}
                }).done(function( msg ) {                        
                        returned = msg;
                });
         return returned;
    }

    var r = GetChoice();
    alert(r);

</script> 
```

temp2.​​php

```
<?php

        echo $_REQUEST["name"];        
?> 
```

它的工作......！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T08:17:38.843

尝试这个：

```
 function GetChoice() {
    var returned = "";
    $.ajax({
        async:false,
        cache:false,
        url:"http://mydomain.com/script.php",
        type:"POST",
        dataType:"text",
        success:function (data) {
            alert(data);
        }
    });
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-17T20:56:00.993

问题是，在您的示例中，$.ajax 立即返回，并且下一个语句 return result; 在您作为成功回调传递的函数甚至被调用之前执行。这里是解释。 [如何从异步调用返回响应？](https://stackoverflow.com/questions/14220321/how-do-i-return-the-response-from-an-asynchronous-call)

运气，

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T08:16:05.133

GetChoice() 在成功的回调运行之前不会返回任何内容。

回调，即您定义为成功参数的函数，在从服务器请求数据之前不会触发。

这是异步的（AJAX 中的 A），因此其余代码继续导致 GetChoice() 函数在回调运行之前返回

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-05T05:15:40.067

这是脚本

```
<script type="text/javascript">
$.ajax({
async:false,
cache:false,
url:"http://path.com/to/file",
type:"POST",
dataType: "html",
data: 'data',
success: function(data){
    alert(data);
} 
```

});

在你的 PHP 文件中写下这段代码

```
<?php

function test()
{
    $str = 'This is php file';
    return $str;
}

echo test();

?> 
```

确保 php 文件的路径正确，并将脚本添加到另一个 PHP 文件中。基本上你需要2个文件。刚刚在我的编辑器中测试了这个并且可以工作..

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-08-19T15:49:49.223

```
function GetChoice() {
    var returned="";
    $.ajax({
        url: "../script.php", 
        type: "POST",
        success: function(data) { 
            returned = data;
        }
    });
    return returned;
}

var r = GetChoice();
alert(r); 
```

# freeswitch - 为什么当 msrp 邀请来到 freeswitch 时 SDP 不匹配

> ID：10409991
> 
> 赞同：0
> 
> 时间：2012-05-02T08:13:05.963
> 
> 标签：freeswitch

当我从 1016 到 1015 拨打电话时，我的 voip 电话支持 msrp，所以我想从一条腿向另一条腿发送短信。我发现 FreeSwitch 将传入消息作为普通的 sip 邀请处理，并将为我发出的邀请生成一个会话（也是一个通道）实例。通道状态设置为 CS_NEW，然后进入 sofia 状态回调以处理不同的阶段sip程序。解析sdp时，freeswitch告诉我sdp不匹配，所以会话关闭，频道挂断。我不知道如何配置（如果freeswitch支持msrp），或者如何把这个做对。如果你能给我更多的信息，非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T13:48:44.163

我怀疑您可能正在运行不支持 MSRP 的旧代码库，它最近才在 JIRA FS-3748（DEC-2011）中添加到 FreeSWITCH。如果您正在运行最新的代码，那么正确的做法是重新打开 FS-3748 (http://jira.freeswitch.org/browse/FS-3748) 并在 JIRA 上报告您的发现并寻求可能的修复.

StackOverflow 不是报告错误的正确位置。

谢谢，布赖恩·韦斯特 FreeSWITCH.org