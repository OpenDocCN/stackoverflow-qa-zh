# StackOverflow 问答 10440000-10440999

# redirect - JSF 2/Trinidad 重定向到外部站点并从外部站点返回，保留视图/页面流范围

> ID：10440001
> 
> 赞同：1
> 
> 时间：2012-05-03T22:09:02.370
> 
> 标签：redirect, jsf-2, viewstate, trinidad

我的目标是将用户重定向到外部站点并让他们回到我的站点，但保留 Trinidad pageFlowScope。这样我可以在各个页面中进行一些处理和状态保存，将它们发送到外部站点进行一些外部处理，然后让它们返回我的站点完成处理。从用户的角度来看，他们似乎在做一个连续的流程，并且可能在不同的浏览器选项卡中同时做多个。

我试图转换一切的方式，除了状态没有恢复外，它工作正常，是通过从我的流程中的页面到外部站点发布帖子，然后外部站点在下一个发布回我的站点页。这几乎就像一个断开连接的 ADF 任务流在单独的服务器上执行并返回到我的任务流中。

mysite.foo/faces/summary.jsf -> POST externalappserver.foo/faces/startexternal.jsf -> 另一个页面 -> POST myite/foo/faces/continue.jsf

我到处找遍了所有地方，发现了围绕 javax.faces.ViewState 的各种问题，但没有将其拉出，将其提供给外部站点，然后让外部站点在一段时间后将其发布回另一个（或即使是相同的）页面，它最初来自哪里。

关于如何操纵状态以便我可以正确返回我的站点的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T18:31:37.530

我最终通过将 Trinidad 隐藏表单参数放在传递给其他服务的回调 URL 上解决了这个问题。因此，如果我的服务器/应用程序是[http://localhost:7001/context/pageout.jsf](http://localhost:7001/context/pageout.jsf)并且它使用回调 URL 发布到另一个站点，则回调 URL 现在是：

[http://localhost:7001/context/pageout.jsf?_afPfm=234z345](http://localhost:7001/context/pageout.jsf?_afPfm=234z345)

这允许特立尼达结合浏览器提供的 JSESSIONID cookie 来恢复其页面流。我不需要处理 ViewState 字段或任何其他会话问题。我的 pageFlowScope 已恢复一切正常。

# asp.net - 如何对 Asp.net MVC 2 中的集合项应用验证

> ID：10440009
> 
> 赞同：0
> 
> 时间：2012-05-03T22:10:07.787
> 
> 标签：asp.net, .net, asp.net-mvc, asp.net-mvc-2, asp.net-mvc-validation

我有一个强类型视图，它保存控件（输入框）来表示一个集合项。例如，以添加员工详细信息的视图为例，其中有一组可变的输入字段用于输入部门名称。这些输入字段将在客户端动态添加。

这是这两个实体的类结构：

```
public class Employee
{

public int EmployeeID{get;set;}
public string Name {get;set; }
public IList<Department> DepartmentList{get;set;}

}

public class Deparment { 
[Required(ErrorMessage="This is a required Field")]
public string Name {get;set; }
public int ID { get;set; }

} 
```

部门名称的输入是动态生成的，名称的设置方式是发布后实现模型绑定

```
<input type='text' class='input-choice' id='txtChoice0' name='Department[0].Name' /> 
```

现在我的问题是我应该如何对此应用验证？Microsoft Validation 不会在 mvcClientValidationMetadata 内推送验证，我认为这是因为框架在视图加载时没有看到任何模型绑定发生。

有任何想法吗 ？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T23:13:47.430

I believe what you are asking for is how to validate values from the dropdownlist with 'Required' attribute. You will need to make some changes to the Employee model.

First of all you will need a 'DepartmentCode' property coz you will be storing the selected Department code from the dropdown.

Then you can have the DepartmentList as `IEnumerable<SelectListItem>`

so your Employee model will look like

```
public class Employee
{    
    public int EmployeeID{get;set;}
    public string Name {get;set; }
    [Required(ErrorMessage = "Please select a department")]
    public string DepartmentCode { get; set; }
    public IEnumerable<SelectListItem> DepartmentList{get;set;
} 
```

you can get the DepartmentList like this

```
public IEnumerable<SelectListItem> DepartmentList 
{
    get
    {
        //Your code to return the departmentlist as a SelectedListItem collection
        return Department
            .GetAllDepartments()
            .Select(department => new SelectListItem 
            { 
                Text = department.Name, 
                Value = department.ID.ToString() 
            })
            .ToList();
    }
} 
```

finally in the view

```
<%: Html.DropDownListFor(model => model.DepartmentCode, Model.DepartmentList, "select")%>
<%: Html.ValidationMessageFor(model => model.DepartmentCode)%> 
```

Now when you try to submit without selecting a department it should be validated

# c# - .NET 出现奇怪的 PDF 传真问题

> ID：10440011
> 
> 赞同：0
> 
> 时间：2012-05-03T22:10:26.763
> 
> 标签：c#, .net, pdf, itextsharp, fax

如果这个问题的答案与编程无关，我提前道歉，但它可能！

我正在使用[iTextSharp填写 PDF](http://sourceforge.net/projects/itextsharp/)

```
public void InsertDataToTemplate(DataTable dt)
        {
            // cycle through datatable and find field to field matches
            DataRow row = dt.Rows[0];
            int fieldType = 0;
            string checkBoxInsert = "";
            List<string> notFoundList = new List<string>();

            foreach (DataColumn col in dt.Columns)
            {
                if (pdfStamper.AcroFields.Fields.Where(afd => afd.Key == col.ColumnName).Count() != 0)
                {
                    fieldType = pdfStamper.AcroFields.GetFieldType(col.ColumnName);
                    if (fieldType == AcroFields.FIELD_TYPE_CHECKBOX)
                    {
                        checkBoxInsert = (row[col.ColumnName].ToString().ToUpper() == "FALSE") ? "NO" : "Yes";
                        pdfStamper.AcroFields.SetField(col.ColumnName, checkBoxInsert);
                    }
                    else
                    {
                        pdfStamper.AcroFields.SetField(col.ColumnName, row[col.ColumnName].ToString());
                    }
                }
                else
                    notFoundList.Add(col.ColumnName);
            }
        } 
```

这运作良好。

但是，当我尝试使用 BISCOM 服务器和我的 c# 代码传真它时：

1.  大约 50% 的时间会发送正确的信息
2.  而另一半时间它将发送 INCOMPLETE 信息。例如，复选框中的所有检查都将丢失，或者有时文本数据会丢失。

我为含糊而道歉，但我什至不知道从哪里开始：

**问题：**您还需要哪些其他信息才能指导我解决传真不完整数据的问题？

# java - 警报接收器和 Android 清单

> ID：10440012
> 
> 赞同：7
> 
> 时间：2012-05-03T22:10:27.607
> 
> 标签：java, android, broadcastreceiver

我找到了几个关于设置警报接收器以设置间隔发送敬酒消息的教程。我一直在关注代码并将我自己的项目分解为 3 个类。

HelloDroidActivity.java 是：

```
package com.example.helloandroid;

import java.util.Calendar;

import android.app.Activity;
import android.app.AlarmManager;
import android.app.PendingIntent;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.widget.TextView;
import android.widget.Toast;

import com.example.helloandroid.alarms.MyAlarmReciever;

public class HelloDroidActivity extends Activity {
/** Called when the activity is first created. */

public static int RTC_WAKEUP;
public static long INTERVAL_FIFTEEN_MINUTES;

private AlarmManager alarmMgr;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    TextView tv = new TextView(this);
    tv.setText("Hello, Krishneel");
    setContentView(tv);
    Toast.makeText(this, "Alarm went off", Toast.LENGTH_SHORT).show();

    Log.d("OnCreate", "abcdabcdabcdabcdabcdabcdabcdabcdabcdabcd");
    alarmMgr = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
    Intent intent = new Intent(this, MyAlarmReciever.class);
    PendingIntent pendingIntent = PendingIntent.getBroadcast(this, 0,
            intent, PendingIntent.FLAG_UPDATE_CURRENT);
    Calendar calendar = Calendar.getInstance();
    calendar.setTimeInMillis(System.currentTimeMillis());
    calendar.add(Calendar.SECOND, 5);
    alarmMgr.setRepeating(AlarmManager.RTC_WAKEUP,
            calendar.getTimeInMillis(), 7000, pendingIntent);

}
} 
```

还有 MyAlarmReciever.java（我已经知道名称上的拼写错误）：

```
package com.example.helloandroid.alarms;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.util.Log;
import android.widget.Toast;

public class MyAlarmReciever extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        // TODO Auto-generated method stub

        Log.e("onReceive", "ladskjflsakjdflskjdflskjdfslkjdflasdf");
        Toast.makeText(context, "OnReceive alarm test", Toast.LENGTH_SHORT).show();
    }
} 
```

和看起来像这样的Android清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.helloandroid"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="7" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name="com.example.helloandroid.HelloDroidActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <receiver android:name="AlarmReceiver">
            <intent-filter>
                <action android:name="com.example.helloandroid.alarms" />
            </intent-filter>
        </receiver>
    </application>

</manifest> 
```

我已经读过，为了让项目接收我的 alarmReceiver java 类，我需要使用新的接收器编辑清单。但我对 XML 还很陌生，不知道该往哪个方向发展。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-08-27T23:17:30.833

您已经在清单文件中定义了一个接收器。但是名称不正确，请参阅名称需要是完整的类名，即 package.RecieverName。在您的情况下，您的接收器的名称是 MyAlarmReciever。所以receiver会被定义如下

```
<receiver android:name=".alarms.MyAlarmReciever">
    <intent-filter>
        <action android:name="com.example.helloandroid.alarms" />
    </intent-filter>
</receiver> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-13T11:29:11.633

在您的清单中，接收者正在侦听一个名为`com.example.helloandroid.alarms`. 但是在您`HelloDroidActivity.java`的意图中没有添加这样的动作。

```
public class HelloDroidActivity extends Activity {
//....
  @Override
  public void onCreate(Bundle savedInstanceState) {
  //....
  Intent intent = new Intent(this, MyAlarmReciever.class);
  intent.setAction("com.example.helloandroid.alarms");
  //....
  }
} 
```

# drupal - Drupal 7 条评论未发布

> ID：10440013
> 
> 赞同：1
> 
> 时间：2012-05-03T22:10:46.523
> 
> 标签：drupal, drupal-comments

我有很多时间试图将评论发布到我的节点。我已经完成了所有显而易见的事情：

启用评论模块，设置适当的权限等。

但是每次我尝试输入评论时，它都会简单地重定向到“添加新评论”页面，并且没有发布任何内容。Content -> Comments 部分没有评论，我的数据库评论表是空的。

我唯一能找到的与该问题相关的是我的日志消息中的错误报告，其中显示警告“找不到页面”。我正在使用 Drupal Busy 主题。

*   类型：找不到页面
*   位置：[http://mysite/public://color/busy-0970ccd8/style.css?m](http://mysite/public://color/busy-0970ccd8/style.css?m)
*   消息：public://color/busy-0970ccd8/style.css
*   严重性：警告

我已经运行了模式模块，但我的数据库没有什么奇怪的。对此有什么想法吗？非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T01:46:48.057

它正在从 Color 模块中寻找样式表。它通常位于 sites/default/files/color/busy-0970ccd8/style.css

你有站点/默认/文件目录吗？检查你有一个目录是可写的。还要检查以确保启用了颜色模块。保存您的主题设置并清除配置中的缓存——性能。

我不确定从颜色模块中检索样式表的问题是否会导致此问题。似乎不太可能。

您可能会考虑不使用繁忙的主题。它目前的状态是“最少维护”，主题作者[在项目页面上留下了一个注释，](http://drupal.org/project/busy)表示此时不会有进一步的开发。

我建议寻找一个积极维护并具有良好支持的主题。看起来 Busy 是一个非常标准的 960 网格，你可能会喜欢[Omega](http://drupal.org/project/omega)。

# ruby-on-rails - 如何删除对虾 P DF 表格中的整行？

> ID：10440031
> 
> 赞同：1
> 
> 时间：2012-05-03T22:13:03.050
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.1, pdf-generation, prawn

我有一个 Prawn PDF，可以打印表格中的票证列表：

```
Prawn::Document.generate("doorlist.pdf") do
  table([["Ticket", "Name", "Product"]] + tickets.map do |ticket|
    [
     make_cell(:content => ticket.number, :font => "Courier"),
     make_cell(:content => ticket.holder.full_name),
     make_cell(:content => ticket.product.name)
    ]
  end, :header => true)
end 
```

我想删除ticket.has_been_used 的行？是真的。我可以在 Prawn 文档[http://prawn.majesticseaacreature.com/manual.pdf](http://prawn.majesticseacreature.com/manual.pdf)中看到，我可以使用 Document.generate 的 :inline_format 选项删除每个单元格的文本并将文本换行，`"<strikethrough>#{text}</strikethrough>"`但是否可以删除全线？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T21:39:06.923

我对此进行了尝试，这就是我最终得到的结果：

策略是为每一行创建一个新表，并为列指定固定宽度，以便垂直分隔符对齐。绘制表格（行）后，我检查我的条件，如果为真，我将光标向上移动到单元格高度的一半，画线，然后将其向下移动到原来的位置。

```
require 'prawn'
tickets = [
  {:number => '123', :name => 'John', :product => 'Foo', :used => true },
  {:number => '124', :name => 'Bill', :product => 'Bar', :used => false},
  {:number => '125', :name => 'John', :product => 'Baz', :used => true}
]

Prawn::Document.generate("doorlist.pdf") do

  widths = [150,180,200]
  cell_height = 20

  table([["Ticket", "Name", "Product"]], :column_widths => widths)

  tickets.each do |ticket|

    table([[
      make_cell(:content => ticket[:number],  :height => cell_height, :font => "Courier"),
      make_cell(:content => ticket[:name],    :height => cell_height, :font => "Courier"),
      make_cell(:content => ticket[:product], :height => cell_height, :font => "Courier")
    ]], :column_widths => widths)

    if ticket[:used]
      move_up (cell_height/2)
      stroke_horizontal_rule
      move_down (cell_height/2)
    end

  end

end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-02T17:55:16.197

```
idx = 0 

        tableTest = pdf.make_table(data)

        while idx <= totalRows
            if tableTest.cells[idx, 2].content == "No Go"
                tableTest.cells[idx, 2].style(:background_color => 'FF0000')
            else 
                tableTest.cells[idx, 2].style(:background_color => '00FF22')
            end 
            idx += 1 
        end 

        tableTest.draw

        pdf.render_file "example.pdf" 
```

这行得通。您只需要制作表格，然后迭代并稍后更改各个单元格。

# winforms - DataGridView 在左侧显示多余的列 - 如何摆脱它？

> ID：10440035
> 
> 赞同：2
> 
> 时间：2012-05-03T22:13:47.040
> 
> 标签：winforms, datagridview

我的 DataGridView 显示一个“0”列，第一行有一个增量，第二行有一个 *。我不要这些。它们占用了太多空间。有没有办法让他们走开？

我不认为代码在这种情况下是相关的，但为了幽默，这里是：

```
private void PopulateLanguageAndPrimary() {
    string query;
    OracleDataAdapter da;
    OracleDataTable dt;
    OracleCommand oc;

    try {
        oracleConnectionMainForm.Open();
        query = "select position, coach from players where team = :team";
        da = new OracleDataAdapter();
        oc = new OracleCommand(query, oracleConnectionMainForm);
        oc.Parameters.Add("team", greenBayPackers);
        da.SelectCommand = oc;
        dt = new OracleDataTable();
        da.Fill(dt);
        dataGridViewLanguageAndPrimary.DataSource = dt;
    } catch (OracleException ex) {
        MessageBox.Show(ex.Message);
    } finally {
        oracleConnectionMainForm.Close();
    }
} 
```

*   在以下位置添加了尖叫声：[http ://warbler.posterous.com/heres-the-unwanted-bling-on-the-datagridview#](http://warbler.posterous.com/heres-the-unwanted-bling-on-the-datagridview#)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T23:06:53.597

尝试设置`dataGridViewLanguageAndPrimary.AllowUserToAddRow`为假。这将删除 *. 然后设置`RowHeadersVisible`为false，隐藏多余的列。

# ruby-on-rails - 带有实时预览的 Rails 降价编辑器

> ID：10440037
> 
> 赞同：10
> 
> 时间：2012-05-03T22:13:49.130
> 
> 标签：ruby-on-rails, markdown

是否有任何与 Rails 集成（例如在 gem 中）并提供实时预览的降价编辑器？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-09-16T17:47:45.180

查看下面的 gem，它没有很好的文档记录，但似乎可以工作

[https://github.com/zethussuen/epic-editor-rails](https://github.com/zethussuen/epic-editor-rails)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-03T22:48:13.377

签[出 markdown.js](https://github.com/evilstreak/markdown-js)和[showdown](https://github.com/coreyti/showdown)。只要某些事件触发（即用户在markdown textarea 中键入时释放键），您就可以装配它们来解析markdown 输入的任何内容。我不知道任何其他具有实时预览功能的嵌入式降价编辑器，但使用这些库之一制作一个似乎很容易。

# android - Android NullPointerException 导致崩溃

> ID：10440040
> 
> 赞同：0
> 
> 时间：2012-05-03T22:14:13.917
> 
> 标签：android, nullpointerexception, android-logcat

我正在创建一个安卓纸牌游戏。我创建了一个扑克牌类和一个纸牌类。当我运行示例代码时，它无法构建甲板。这是我的代码和 logcat

扑克牌.java

```
package com.michaelpeerman.hi_low;

public class PlayingCard {
public String[] CardSuit = {"SPADE","HEART","CLUB","DIAMOND"};
public String[] CardRank= {"ACE", "TWO", "THREE", "FOUR", "FIVE", "SIX", "SEVEN", "EIGHT", "NINE","JACK","QUEEN","KING"};
public String theSuit;
public int theRank;
public boolean theState;

public PlayingCard(){
    theSuit = "SPADE";
    theRank = 1;
    theState = false;
}
public PlayingCard(String mySuit, int myRank){
    theSuit = mySuit;
    theRank = myRank;

}
public int getRank(){
    return theRank;

}
public String getSuit(){
    return theSuit;

}
public boolean getState(){
    return theState;

}
public void setState(boolean myState){
    theState = myState;
}
public void setRank(int myRank){
    theRank = myRank;
}
public void setSuit(String mySuit){
    theSuit = mySuit;
}
public String getCardString(){
     String cardString = null;
        String theCardRanks[] = {"A","2","3","4","5","6","7","8","9","T","J","Q","K"};

        if (theSuit == "CLUB")
            cardString = "C"+theCardRanks[theRank-1];
        else if (theSuit == "SPADE")
            cardString = "S"+theCardRanks[theRank-1];
        else if (theSuit == "HEART")
            cardString = "H"+theCardRanks[theRank-1];
        else if (theSuit == "DIAMOND")
            cardString = "D"+theCardRanks[theRank-1];
        return cardString;
}
} 
```

CardDeck.java

```
package com.michaelpeerman.hi_low;
import java.util.Random;

import com.michaelpeerman.hi_low.PlayingCard;
public class CardDeck {
public PlayingCard[] cardArray;
public int num_decks;
public int cards_left;
public CardDeck(int my_decks)
{
num_decks = my_decks;
cardArray = new PlayingCard[52*num_decks];
cards_left = 52*num_decks;
for (int i=0; i< num_decks; i++){
for (int j = 0; j < 13; j++)
{

        cardArray[(j+(52*i))].setSuit("SPADE");
        cardArray[j+13+(52*i)].setSuit("HEART");
        cardArray[j+26+(52*i)].setSuit("CLUB");
        cardArray[j+39+(52*i)].setSuit("DIAMOND");

    if (j==0){
        cardArray[j+(52*i)].setRank(1);
        cardArray[j+13+(52*i)].setRank(1);
        cardArray[j+26+(52*i)].setRank(1);
        cardArray[j+39+(52*i)].setRank(1);
        }
    else if (j==1){
        cardArray[j+(52*i)].setRank(2);
        cardArray[j+13+(52*i)].setRank(2);
        cardArray[j+26+(52*i)].setRank(2);
        cardArray[j+39+(52*i)].setRank(2);
        }
    else if (j==2){
        cardArray[j+(52*i)].setRank(3);
        cardArray[j+13+(52*i)].setRank(3);
        cardArray[j+26+(52*i)].setRank(3);
        cardArray[j+39+(52*i)].setRank(3);
        }
    else if (j==3){
        cardArray[j+(52*i)].setRank(4);
        cardArray[j+13+(52*i)].setRank(4);
        cardArray[j+26+(52*i)].setRank(4);
        cardArray[j+39+(52*i)].setRank(4);
        }
    else if (j==4){
        cardArray[j+(52*i)].setRank(5);
        cardArray[j+13+(52*i)].setRank(5);
        cardArray[j+26+(52*i)].setRank(5);
        cardArray[j+39+(52*i)].setRank(5);
        }
    else if (j==5){
        cardArray[j+(52*i)].setRank(6);
        cardArray[j+13+(52*i)].setRank(6);
        cardArray[j+26+(52*i)].setRank(6);
        cardArray[j+39+(52*i)].setRank(6);
        }
    else if (j==6){
        cardArray[j+(52*i)].setRank(7);
        cardArray[j+13+(52*i)].setRank(7);
        cardArray[j+26+(52*i)].setRank(7);
        cardArray[j+39+(52*i)].setRank(7);
        }
    else if (j==7){
        cardArray[j+(52*i)].setRank(8);
        cardArray[j+13+(52*i)].setRank(8);
        cardArray[j+26+(52*i)].setRank(8);
        cardArray[j+39+(52*i)].setRank(8);
        }
    else if (j==8){
        cardArray[j+(52*i)].setRank(9);
        cardArray[j+13+(52*i)].setRank(9);
        cardArray[j+26+(52*i)].setRank(9);
        cardArray[j+39+(52*i)].setRank(9);
        }
    else if (j==9){
        cardArray[j+(52*i)].setRank(10);
        cardArray[j+13+(52*i)].setRank(10);
        cardArray[j+26+(52*i)].setRank(10);
        cardArray[j+39+(52*i)].setRank(10);
        }
    else if (j==10){
        cardArray[j+(52*i)].setRank(11);
        cardArray[j+13+(52*i)].setRank(11);
        cardArray[j+26+(52*i)].setRank(11);
        cardArray[j+39+(52*i)].setRank(11);
        }
    else if (j==11){
        cardArray[j+(52*i)].setRank(12);
        cardArray[j+13+(52*i)].setRank(12);
        cardArray[j+26+(52*i)].setRank(12);
        cardArray[j+39+(52*i)].setRank(12);
        }
    else if (j==12){
        cardArray[j+(52*i)].setRank(13);
        cardArray[j+13+(52*i)].setRank(13);
        cardArray[j+26+(52*i)].setRank(13);
        cardArray[j+39+(52*i)].setRank(13);
        }

}
}
}
public void useCard(){
cards_left = cards_left - 1;
}
public int get_cards_left(){
return cards_left;
}
public void setCard(int card, PlayingCard myCard){
cardArray[card]=myCard;

}

public PlayingCard getCard(int card){

return cardArray[card];

}

public void printDeck(){
for (int j = 0; j < (52*num_decks); j++){
    // Print out to textview
    //String cardString = cardArray[j].getCardString();
}

}
public void suffleDeck(){

for (int i = 0; i < 100*num_decks; i++)
{
    int rand1 = 1 + new Random().nextInt(52*num_decks);
    int rand2 = 1 + new Random().nextInt(52*num_decks);
    PlayingCard tmpCard = cardArray[rand1];
    cardArray[rand1] = cardArray[rand2];
    cardArray[rand2] = tmpCard;
}
}
public boolean isDeckFinished(){
boolean isFinished =true;
for (int i = 0; i<52*num_decks; i++){
    PlayingCard myCard = cardArray[i];
    if (myCard.getState() == false){
        isFinished = false;
    }
}
return isFinished;

}

} 
```

启动屏幕.java

```
package com.michaelpeerman.hi_low;

import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;
import com.michaelpeerman.hi_low.R;
import com.michaelpeerman.hi_low.CardDeck;
import com.michaelpeerman.hi_low.PlayingCard;

public class StartScreen extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    CardDeck myDeck = new CardDeck(1);
    int cards = myDeck.cards_left;
    String text = Integer.toString(cards);
   TextView t=new TextView(this); 

    t=(TextView)findViewById(R.id.main_text); 
    t.append(text);

}
} 
```

主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >
<ScrollView
android:layout_width="fill_parent"
android:layout_height="fill_parent">
<TextView
    android:id="@+id/main_text"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
     />
</ScrollView>
</LinearLayout> 
```

AndroidManifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.michaelpeerman.hi_low"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="13" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".StartScreen"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>

</manifest> 
```

LogCat 输出

```
05-03 18:03:55.067: E/AndroidRuntime(9805): FATAL EXCEPTION: main
05-03 18:03:55.067: E/AndroidRuntime(9805): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.michaelpeerman.hi_low/com.michaelpeerman.hi_low.StartScreen}: java.lang.NullPointerException
05-03 18:03:55.067: E/AndroidRuntime(9805):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
05-03 18:03:55.067: E/AndroidRuntime(9805):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
05-03 18:03:55.067: E/AndroidRuntime(9805):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
05-03 18:03:55.067: E/AndroidRuntime(9805):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
05-03 18:03:55.067: E/AndroidRuntime(9805):     at android.os.Handler.dispatchMessage(Handler.java:99)
05-03 18:03:55.067: E/AndroidRuntime(9805):     at android.os.Looper.loop(Looper.java:137)
05-03 18:03:55.067: E/AndroidRuntime(9805):     at android.app.ActivityThread.main(ActivityThread.java:4424)
05-03 18:03:55.067: E/AndroidRuntime(9805):     at java.lang.reflect.Method.invokeNative(Native Method)
05-03 18:03:55.067: E/AndroidRuntime(9805):     at java.lang.reflect.Method.invoke(Method.java:511)
05-03 18:03:55.067: E/AndroidRuntime(9805):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
05-03 18:03:55.067: E/AndroidRuntime(9805):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
05-03 18:03:55.067: E/AndroidRuntime(9805):     at dalvik.system.NativeStart.main(Native Method)
05-03 18:03:55.067: E/AndroidRuntime(9805): Caused by: java.lang.NullPointerException
05-03 18:03:55.067: E/AndroidRuntime(9805):     at com.michaelpeerman.hi_low.CardDeck.<init>(CardDeck.java:18)
05-03 18:03:55.067: E/AndroidRuntime(9805):     at com.michaelpeerman.hi_low.StartScreen.onCreate(StartScreen.java:16)
05-03 18:03:55.067: E/AndroidRuntime(9805):     at android.app.Activity.performCreate(Activity.java:4465)
05-03 18:03:55.067: E/AndroidRuntime(9805):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
05-03 18:03:55.067: E/AndroidRuntime(9805):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
05-03 18:03:55.067: E/AndroidRuntime(9805):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T22:25:30.483

您正在`cardArray`正确地创建，但您没有用任何对`PlayingCard`. 在您将它们设置为某个值之前，它们都是空值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T22:28:31.850

根据堆栈跟踪，有问题的行是：

```
cardArray[(j+(52*i))].setSuit("SPADE"); 
```

在 CardDeck.java 中。

我猜这是因为该数组元素的内容为空。虽然您已经定义了数组，但在尝试对其元素调用 .setSuit(...) 之前，您似乎没有将任何对象放入其中 - 所以您在 null 上调用 .setSuit(...) -因此 NPE。

# java - Eclipse 如何将 .java 文件作为小程序运行？

> ID：10440043
> 
> 赞同：4
> 
> 时间：2012-05-03T22:14:28.543
> 
> 标签：java, eclipse, applet

我一直在尝试运行一个从命令行创建的简单小程序。我试着做：

```
C:\java Applet 
```

它显然没有用。但是，我注意到如果我选择类并选择作为 java 小程序运行，Eclipse 允许我运行小程序。Eclipse 如何做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-03T22:19:46.123

您需要使用`appletviewer`命令行中的命令来运行 Applet

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-04T11:42:18.463

我相信 IDE 通常使用 appletviewer 启动小程序，但使用不受限制的安全策略（从命令行启动时的 appletviewer 是沙盒）。

要从命令行启动小程序查看器，请尝试以下操作：

*   在源代码中，沿标准小程序元素的行在顶部添加注释。
*   使用命令运行小程序查看器。

    `prompt> appletviewer TheApplet.java`

    请特别注意，不是将 HTML 作为参数提供给小程序查看器（旧方式），小程序查看器现在将直接从源代码中解析出小程序元素。

另请参阅[小程序信息。](https://stackoverflow.com/tags/applet/info)在源代码顶部使用 applet 元素的示例[页面：EG](https://stackoverflow.com/tags/applet/info)

```
/* <!-- Defines the applet element used by the appletviewer. -->
<applet code='HelloWorld' width='200' height='100'></applet> */
import javax.swing.*;

/** An 'Hello World' Swing based applet.

To compile and launch:
prompt> javac HelloWorld.java
prompt> appletviewer HelloWorld.java  */
public class HelloWorld extends JApplet {

    public void init() {
        // Swing operations need to be performed on the EDT.
        // The Runnable/invokeLater() ensures that happens.
        Runnable r = new Runnable() {
            public void run() {
                // the crux of this simple applet
                getContentPane().add( new JLabel("Hello World!") );
            }
        };
        SwingUtilities.invokeLater(r);
    }
} 
```

当从命令行启动时，applet 查看器将拥有一个比应用于浏览器中部署的 applet 的沙盒更具限制性。

* * *

appletviewer 的替代品是[Appleteer](http://pscode.org/appleteer/)，我强烈推荐它，因为它比 appletviewer 好（我写了它；）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-03T22:36:10.640

Applet 是扩展 Panel 并具有 Applet 上下文的图形组件。模仿这种环境不是什么大问题。您只需要使用 main 方法创建应用程序，该方法创建具有边框布局的框架并将小程序放在该框架的中心。此应用程序还应实现提供 API 以检索参数的小程序上下文。

正如@Satya 提到的，JDK 有一个名为 appletvieer 的实用程序，可以从命令行执行。Eclipse 既可以直接使用appletvieer，也可以如上所述实现自己的查看器。

# github - 在拉取请求中保留/丢弃贡献者的命名空间的礼仪是什么？

> ID：10440047
> 
> 赞同：0
> 
> 时间：2012-05-03T22:15:00.870
> 
> 标签：github, namespaces, pull-request

我有一个 Github 项目存储库。一个贡献者分叉了存储库，添加了一个新文件并向我发送了一个拉取请求。

我注意到他在那个（.java）文件中使用了他自己的命名空间，而我项目的其余部分使用我自己的命名空间。

从美学上讲，我希望我的存储库中的所有文件都使用我的命名空间。然而，这是他编写的代码，也是他的贡献。

这里最好的礼仪或行动方案是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T22:23:48.597

我建议使用你的包命名来保持一致性，并允许这个贡献者通过`@author`Javadoc 获得信用。允许贡献者使用他们自己的命名可能会变得混乱。如果您有一个包，比如说`dao`包含所有数据访问对象和几个贡献者，您可能不希望以`net.smith.john.dao`,`net.hunt.anthony.dao`等结尾。

# php - Mod重写并将URL作为参数传递

> ID：10440048
> 
> 赞同：2
> 
> 时间：2012-05-03T22:15:12.357
> 
> 标签：php, mod-rewrite, url-rewriting

我在 mod rewrite 方面遇到了一个小麻烦。我的一个朋友正在编写一个允许您上传图像的脚本。

我们想要做的是允许用户将域名附加到直接图像链接，并且脚本将从提供的 URL 中检索图像。

例如，如果图像位于：[http://www.test.com/image.jpg](http://www.test.com/image.jpg)，添加**domain.com** /http://www.test.com/image.jpg 将允许脚本检索该 url ( test.com) 来获取我们想要的图像。

**编辑：** HTTP 在 URL 前面，因为我不希望用户必须手动删除 HTTP。他们在浏览器中看到一张图片，他们在其前面附加“domain.com”、http 和 all，然后脚本检索该图片并将其存储在我们的服务器上。

我使用的规则是：

```
RewriteRule ^([\w|.|/]+(jpg|png|gif))$ /upload.php?url=http://$1 [B,L,NC,R=302] 
```

这正确匹配 URL，但 http:// 中的冒号会导致问题。

如果用户输入：domain.com/www.test.com/image.jpg，它可以工作。

如果用户输入：domain.com/http://www.test.com/image.jpg，它不起作用，我得到一个 403 禁止页面（Windows 上的 XAMPP）。

如果用户输入：domain.com/http//www.test.com/image.jpg，它可以工作（http 中没有冒号）。

**编辑：**通过工作，我的意思是如果我在本地测试它，我可以看到我正确传递 $_GET['url'] 参数的 URL，而不是看到错误 403。

你能告诉我这条规则有什么问题以及如何解决吗？或者任何替代解决方案来实现我们想要的行为？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T23:32:23.410

嗯，我想我找到了问题所在。它不是正则表达式，也不是 mod_rewrite 本身。

因此，这是 Windows 上的 Apache 中的一个错误，已被声明为 WONTFIX。

作为参考，请参阅[此 StackOverflow 线程：](https://stackoverflow.com/questions/2923247/is-it-possible-to-handle-such-url)和[此错误报告](https://issues.apache.org/bugzilla/show_bug.cgi?id=41441)

我正在发布我发现的内容，并将考虑回答这个问题。谢谢你们！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T22:42:48.613

这种方法很麻烦、容易出错且不安全（例如，图像 URL 不需要以那些众所周知的文件扩展名结尾）

如果我了解您的用例，它会在用户上网并查看图像并希望通过您的服务共享时开始。然后他在浏览器的地址栏中手动`http://your.sharing.service`输入，就在任何文本之前。然后你`mod_rewrite`用来触发你的脚本，但我认为你的正则表达式（以及你的服务）将以许多不可预测的方式失败。

我从来没有使用过这样的服务，我认为`http://my.service.com/upload?url=...`应该首选使用按钮将 URL 提交到某个脚本（比如说）的标准方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T22:16:51.707

你可以在 php 中使用 urlencode()

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T22:22:59.847

问题出在您的正则表达式中...

尝试：

```
^((http|https)+[\:\/\/\w\.]+(jpg|png|gif))$ 
```

# mysql - 我可以在 mysql 的 WHERE 中执行 SELECT 吗？

> ID：10440052
> 
> 赞同：1
> 
> 时间：2012-05-03T22:15:39.593
> 
> 标签：mysql

我正在尝试在 where 子句中执行选择。

基本上，我有很多用户，并试图查看哪些是活跃的。活跃意味着他们在过去 30 天内记录了活动。但是，如果我将用户表与活动表连接起来，那么我会得到重复的用户 ID（因为每个用户可能已经记录了多个操作）。

因此，我正在考虑在其中检查每个用户是否有至少一个操作的地方。

```
SELECT u FROM `users` u
where (
select count(*) FROM `user_activity` ua
where ua.user_id = u.user_id and ua.last_login between "2012-04-01 00:00:00" and "2012-04-30 23:59:59"
) >= 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T22:18:21.067

```
SELECT u
FROM users u
where EXISTS ( select null
               FROM user_activity ua
               where ua.user_id = u.user_id
                 and ua.last_login between "2012-04-01 00:00:00" and "2012-04-30 23:59:59" 
               LIMIT 1) 
```

感谢@Ami`LIMIT 1`在子查询中指出可能会稍微提高性能

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T22:23:27.803

是的，您可以在 where 子句中嵌套一个选择，如下所示：

```
SELECT * FROM mytable WHERE users in(SELECT users FROM  user_activity); 
```

但我不认为你可以在 where 子句中嵌套一个像 count(*) 这样的聚合函数。所以我会先尝试这个，然后是聚合函数，但尝试在没有聚合的情况下编写你的选择。我面前没有你的数据，所以我无能为力。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T23:29:18.163

是的，您可以将 SELECT 放在 WHERE 子句中。

我会避免使用 JOIN 进行相关子查询，以查看它是否提高了性能：

```
SELECT DISTINCT `user`
FROM users u
JOIN user_activity ua
  ON ua.user_id = u.user_id
  AND ua.last_login BETWEEN '2012-04-01 00:00:00' AND '2012-04-30 23:59:59' 
```

# matlab - 如何在 Matlab 中生成两组的所有双射？

> ID：10440054
> 
> 赞同：0
> 
> 时间：2012-05-03T22:15:48.397
> 
> 标签：matlab, bijection

我想做的是在Matlab中以最简单的方式执行以下操作

假设我们有两个数组 {1,2,3} {4,5,6}。

该算法应该给我所有的双射：

1-4 2-5 3-6 / 1-4 2-6 3-5 / 1-5 2-4 3-6 / 1-5 2-6 3-4 / 1-6 2-5 3-4 / 1-6 2-4 3-5

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T22:20:02.983

这相当于获取第二个数组的所有排列，并且有一个非常方便的函数 , [`perms`](http://www.mathworks.com/help/techdoc/ref/perms.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T07:28:47.540

按照trutheality 和repmat 的建议，使用perms 创建一个3D 矩阵，以复制第一个矩阵：

```
x = [1 2 3];
y = [4 5 6];

Y = perms(y);
X = repmat(x,length(perms(y)),1);

Result = cat(3,X,Y);
NicerResult = permute(Result, [2, 3, 1]); 
```

# mysql - 如何在 SQL Server 中编写（MySQL）“LIMIT”？

> ID：10440057
> 
> 赞同：11
> 
> 时间：2012-05-03T22:16:17.677
> 
> 标签：mysql, sql-server

当我尝试将使用 LIMIT 的查询从 MYSQL 更改为 SQL-Server 时，我遇到了问题。

检查：

```
SELECT * 
FROM tableEating 
WHERE person = '$identity' 
LIMIT 1; 
```

我试图用一些查询来改变它，但没有任何效果。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-03T22:18:55.473

LIMIT 在 T-SQL 中不起作用。

您必须改用 TOP ，如下所示：

```
SELECT TOP(1) * FROM tableEating WHERE person='$identity'; 
```

我希望这对你有用。

正如 Aaron 所说，`ORDER BY`如果您不想获得任意行，您还需要一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-25T02:57:16.757

`LIMIT`不起作用，`TOP(1)`也可能在嵌套语句中不起作用。

所以正确的方法是使用`OFFSET... FETCH NEXT`：

```
SELECT * FROM TableName
OFFSET 0 ROWS FETCH NEXT 1 ROWS ONLY 
```

`NEXT 1 ROWS ONLY`这基本上告诉 TSQL从第一行 ( ) 开始取一行 ( `OFFSET 0`)。

# javascript - 克隆并附加新的可排序列表后，jQuery UI Sortable 不会刷新

> ID：10440063
> 
> 赞同：0
> 
> 时间：2012-05-03T22:16:39.163
> 
> 标签：javascript, jquery, html, jquery-ui, jquery-ui-sortable

好的，我在这里要做的是让 jQuery UI 在通过克隆将新列动态添加到页面时更新页面上显示的可排序项。如果您克隆一列（演示页面），新列应该能够接收现有列列表中的两个项目以及可以从顶部列表 A 拖动到其中一个可排序项中的新项目。这适用于初始设置，但是一旦您克隆并附加新列，事情就会中断；新克隆的列未被识别为可放置目标，我也无法将新项目从列表 A 拖到新克隆的列列表中。

直观地说， sortable('refresh') 命令应该足以让 sortable 检查设置中的任何内容是否发生更改，并使新元素能够接收和处理可排序项目。但是，我尝试在单击按钮时执行此操作，但似乎没有效果。

我还尝试再次直截了当地调用“.columnlist”选择器上的整个 sortable() 插件，希望它会在新匹配的元素上进行初始化，并简单地跳过已经具有可排序的元素。

哦，当然我使用 clone(true, true) 来确保事件和数据随之而来。

请在此处查看演示页面：http: [//labs.shifthappens.nl/dragsort/](http://labs.shifthappens.nl/dragsort/) 尝试以下操作：

1.  将项目从列表 A 拖动到列列表 A 或 B。拖动到可排序的作品
2.  对列列表 A 中的项目重新排序。可排序的作品。
3.  单击克隆按钮。出现 C 列的克隆。
4.  尝试将任何项目（无论是从列表 A 还是从另一个列列表）拖动到克隆的列 C 并注意：它没有响应。就好像它不存在一样。
5.  有趣的是：如果您已经将项目放在原始 C 列中，然后将其克隆，则克隆列中的项目可以移动到其他列表，但一旦移出，就无法移回克隆列表。仿佛它拒绝了自己的后代。

如何使克隆的列表也可排序和有效的放置区？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T00:05:46.113

正如 jaredhoyt 所指出的，这确实是关于深度克隆。显然 jquery ui 不需要深度克隆的元素，如果你这样做并且期望新元素也是可放置的目标，实际上会中断。

但是，我确实发现需要在要识别克隆列表的列上再执行一次 $('selector').sortable() 。这也是 jaredhoyt 在他的小提琴中所做的。这虽然对我来说直观地“刷新”方法将是最优雅的解决方案，不是吗？

总之，结案了。我很高兴它就像不使用数据和事件克隆列一样简单，只是 HTML。

# windows-phone-7 - WP7开发：如何让程序等到一个EventHandler结束？

> ID：10440065
> 
> 赞同：0
> 
> 时间：2012-05-03T22:16:50.037
> 
> 标签：windows-phone-7, windows-phone-7.1

当我的视图需要 LogoStation 的值时，它返回 null，因为我的程序尚未执行 LoadStation_Completed。

我希望我的程序等待 LoadStation_Completed 在继续之前执行。

谢谢

```
public class Infos
{
    #region propriétés

    private DataServiceCollection<SyndicObject> _infosStation;
    public DataServiceCollection<SyndicObject> InfosStation
    {
        get
        {
            return _infosStation;
        }
        set
        {
            _infosStation = value;
        }
    }

    #endregion

    string nameStation;
    public event PropertyChangedEventHandler PropertyChanged;

    public void NotifyPropertyChanged(string propertyName)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this,
                new PropertyChangedEventArgs(propertyName));
        }
    }

    private ImageSource _logoStation;
    public ImageSource LogoStation
    {
        get
        {
            return _logoStation;
        }
        set
        {
            _logoStation = value;
            NotifyPropertyChanged("LogoStation");
        }
    }

    public Infos(string station)
    {
        nameStation = station;
        getInfos();
    }

    public void getInfos()
    {
        SyndicationContext service = new SyndicationContext(new Uri("http://test/817bee9d-faf4-4680-9d05-e41c2c90ae5a/"));

        IQueryable<SyndicObject> requete = (from objectSki in service.Objects
                                           where objectSki.NOMSTATION == nameStation
                                           select objectSki);

        Deployment.Current.Dispatcher.BeginInvoke(() =>
        {
            InfosStation = new DataServiceCollection<SyndicObject>();
            InfosStation.LoadCompleted += new EventHandler<LoadCompletedEventArgs>(InfoStation_LoadCompleted);   
            InfosStation.LoadAsync(requete);
        }
        );
    }

    void InfoStation_LoadCompleted(object sender, LoadCompletedEventArgs e)
    {
        LogoStation = new BitmapImage(new Uri(@"http://test/upload/" + InfosStation[0].LOGO, UriKind.Absolute));
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T07:39:02.063

通过使用您正在使用的属性设置器`NotifyPropertyChanged`（正确地）告诉绑定到`LogoStation`它的 UI 已更新。这应该意味着 UI 最初不会显示任何内容，然后在加载完成后显示图像。

在没有看到您的视图代码的情况下，您在这里看起来是正确的 - 除了您的`Infos`类**不**继承自`INotifyPropertyChanged`. 这意味着该事件永远不会被发送。

更新你的类定义，你应该很高兴。

# multithreading - QWebView setContent 在一个单独的线程中

> ID：10440069
> 
> 赞同：2
> 
> 时间：2012-05-03T22:17:11.303
> 
> 标签：multithreading, qt, event-handling, qwebview, qtembedded

我有一个应用程序需要用于[`QWebView::setContent()`](http://qt-project.org/doc/qt-4.8/qwebview.html#setContent)将一些 HTML 内容加载到 QWebView。所有这些都发生在带有 ARMv5 处理器（想想 400 MHz）的嵌入式设备上。大多数时候，我可以在合理的时间内加载页面（最多 5 秒），但有时我的内容需要很长时间才能加载（300KB 的内容大约需要 30 秒）。

问题是`setContent`调用阻塞了主线程。我需要能够在加载期间处理事件，如果用户决定不再等待，甚至可以取消加载。

我正在考虑`setContent`在其他线程中运行调用，以便它不会阻塞事件处理，并且我可以在必要时取消它。但是，我得到了可怕的[“必须在 GUI 线程中创建小部件”](http://lists.trolltech.com/qt-interest/2007-10/thread00643-0.html)，而且我认为没有办法轻松解决这个问题。

是否可以`QWebView::setContent`在单独的线程中运行？如果是这样，怎么做？如果没有，是否可以在`setContent`运行时处理 GUI 事件？是否可以“取消”`setContent`通话？

**编辑**

再澄清一点，我真正感兴趣的是如何能够停止`setContent`调用和/或处理 GUI 消息，以便界面保持响应，并使用`setContent`.

**编辑 2**

为了进一步澄清，我正在处理长的静态内容，即没有 JavaScript，只有大量静态 HTML，即使在加载更多内容时用户也希望通过这些 HTML 滚动。主要思想是即使页面未完全加载，也允许她/他向下浏览页面。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T16:15:54.630

前段时间我遇到了类似的问题。据我所知，只有页面的主要内容是同步的。

事实是 GUI 核心“绘制”页面，这很耗时。因此，主线程被冻结，直到主要内容完全加载。

就我而言，解决方案很简单：将主要内容作为次要内容并使用本地文件！！！

那么，我的建议是什么：

`/tmp/loader.html`1) 准备一个包含如下内容的本地文件 ( )：

```
<html>
<body onload='setTimeout(function() { window.location="contents.html"; }, 1000);'>
Loading...
</body>
</html> 
```

2）每次需要加载新内容时，将其**保存**到辅助文件（`/tmp/contents.html`）并强制更新加载器（可能也是刷新）。简单的：

```
QFile f("/tmp/contents.html");
if (f.open(QFile::WriteOnly)) {
    qint64 pos = 0;
    while (pos < contents.length()) {
        pos += f.write(contents.mid(pos, 1024)); // chunk of 1024
        qApp->processEvents();
    }
    f.close();
    webview->setUrl(QUrl::fromLocalFile("/tmp/loader.html"));
} 
```

请注意，如果文件保存也很慢，我允许**事件循环处理未决事件......**

3) 任何时候你需要**取消**加载，你可以加载另一个内容，删除内容文件，或其他可能的方法。

请注意，据我所知，您永远不会异步**绘制**内容。这就是嵌入式系统中的真正问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T16:39:50.227

由于`QWebView::setContent()`是阻塞呼叫，因此我最终使用了解决方法。主要思想是 XML 处理比渲染页面要快得多。因此，我执行以下操作：

1.  将文档解析为 XML DOM 文档（在我的例子中是一个合理的假设），然后找到`body`元素。
2.  只保留预定义数量的子元素`body`（大约 20 个元素）。将剩余元素存储在另一个 XML DOM 文档中。
3.  使用 显示初始文档（序列化 XML）`QWebView::setContent()`，相对较快。启动一个超时时间为 0 的计时器`SLOT(loadNextChunk())`。
4.  `loadNextChunk()`使用 . 从正文末尾的备份文档中移动另外 20 个左右的元素`body->appendInside(html)`，其中`body`a 是`QWebElement`.
5.  当没有更多元素可用时停止。

这是有效的，因为在对 的调用之间`loadNextChunk()`，GUI 有机会对事件做出反应。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T01:39:04.610

QWebView，顾名思义，是一个小部件。[另一方面， QWebPage](http://doc.qt.nokia.com/4.7-snapshot/qwebpage.html)是一个普通的旧 QObject，具有您可能想要的所有线程优点。

现在把它绑在一起：

```
void QWebView::setPage ( QWebPage * page ) 
```

# elasticsearch - elasticsearch可以通过字段的X出现来创建直方图吗？

> ID：10440075
> 
> 赞同：1
> 
> 时间：2012-05-03T22:17:35.997
> 
> 标签：elasticsearch

我没有看到这将如何完成，但是否有可能有一个使用间隔来给出每 X 次出现的统计信息的方面？例如，如果 net 是按日期排序的数字序列，例如：

```
1,2,3,4,5,6,7 
```

我将间隔设置为 2，我想返回一个直方图，如：

```
count: 2
value: 3,

count: 2,
value: 7,

count: 2,
value: 11,

... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T00:11:26.107

Elasticsearch 不支持开箱即用的此类操作。可以编写这样的 facet，但它不是很实用，因为它需要编写非常复杂的自定义 facet 处理器，并且可以选择控制记录被分成碎片的方式（所谓的路由）。

在 elasticsearch 中，任何依赖于元素全局顺序的操作从架构的角度来看都是有问题的。Elasticsearch 将记录拆分为分片，包括搜索和分面计算在内的大多数操作都发生在分片上，然后将这些分片级操作的结果收集并合并为全局结果。这基本上就是 map/reduce 架构，也是 elasticsearch 横向扩展的关键。您的方面的最佳实现将需要更改路由，以便根据记录的顺序而不是 id 的哈希码将记录分成碎片。或者，可以通过将分片级阶段限制为仅提取字段值并在合并阶段执行构面的实际计算来完成。后一种方法似乎更实用，但同时它与简单地提取所有记录的字段值并在客户端进行计算并没有太大区别，这正是我在这里建议做的。只需使用所需的排序顺序提取所有值并计算客户端上的所有统计信息。如果索引中的记录数很大，可以使用[滚动 API](http://www.elasticsearch.org/guide/reference/api/search/scroll.html)以使用多个请求检索所有记录。

# php - php addlashes 成为 javascript 中的非法标记

> ID：10440081
> 
> 赞同：0
> 
> 时间：2012-05-03T22:18:35.840
> 
> 标签：php, jquery

我尝试使用 jquery ajax 调用，一切正常，直到我尝试在服务器端使用 addlashes 转义 json 字符串我得到以下错误：意外令牌非法。这是我的 json 字符串，我在其中找不到任何问题

```
[{\"shortlist\":{\"id\":\"46\",\"application_id\":\"3\",\"created\":\"2012-04-
22\",\"modified\":\"2012-04-22\"},\"application\": 
{\"id\":\"3\",\"admissionsession_id\":\"0\",\"school_id\":\"\",\"surname\":\"oni\",\"
other_names\":\"oluwafemi timothy Toluwalope\",\"date_of_birth\":\"0000-00-    
00\",\"created\":\"2012-04-15\",\"modified\":\"2012-04-15\"}}] 
```

如果我从 php json 字符串中删除 addlahes，它工作正常。我害怕让我的字符串没有转义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T22:29:10.507

在数组中添加您的数据结构：

```
$data = array('shortlist' => array('id' => 46, .... 
```

然后使用：

```
$json = json_encode($data);
echo $json; 
```

# sql - 使用查询从数据库中提取 OU 信息

> ID：10440082
> 
> 赞同：0
> 
> 时间：2012-05-03T22:18:40.337
> 
> 标签：sql, hxtt

我们有一个看起来像这样的列

```
CN=1245657,OU=TestOU,OU=East,OU=NorthPole,OU=Cali,OU=Computers,DC=test2,DC=Test1,DC=Test5 
```

如您所见，上面的字符串有 5 个 OU。字符串中 OU 的数量可以在 0 到 5 之间。我们需要制作 OU 值的列。喜欢

```
OU1     OU2     OU3          OU4     OU5
----------------------------------------------
TestOU  East    NorthPole    Cali    Computers 
```

如果字符串少于 5 个 OU，则 OU5 将为空白。有没有办法在普通的 SQL 中做到这一点。

# javascript - 获取嵌套网格视图中图像鼠标悬停的动态详细信息

> ID：10440089
> 
> 赞同：0
> 
> 时间：2012-05-03T22:19:17.757
> 
> 标签：javascript, jquery, asp.net, html, c#-4.0

我有一个嵌套的gridview，当第一次将鼠标悬停在**A行**中的图像上时，页面不会加载任何弹出窗口，但是第二次悬停在**A行**中的图像上会弹出正确的信息。

另一个问题是，当我将鼠标悬停在A 行上方后，我将鼠标悬停在**B****行的图像上时，A****行中 B**行**的 A****行**弹出详细信息，但是当我第二次将**B 行悬停时，正确的详细信息会弹出。**

 ******我将非常感谢对此问题的任何帮助，因为我已经尝试解决它一段时间了。

[下面是 JSFIDDLE 链接作为演示](http://jsfiddle.net/wayne9999/LEPdT/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T20:41:43.237

这是解决问题的方法

```
 $('img.imagepopupcontext').hover(function (e) {
          // Begin mouseover function

            // Grab the p tag with the id of 'dbInfo' in order
            // to retrieve information from it later
            var cvalue = $(this).parent().parent().attr('id'); //tr.innerGridRow parent

            count++;
            //$('#ctl00_ContentPlaceHolder1_txtcontextkey').val(cvalue);
            //$('#ctl00_ContentPlaceHolder1_btnmodalclick').click();

           // var img = $(this);

            $.ajax({url:'callbackdynamicdata.aspx',context:this,data:({ ID: cvalue}),success:
               function(data){

                    var html = '<div id="infopathpanel">';
                    html += data;
                    html += '</div>';
                    // Append the variable to the body and the select
                    // itself and its children and hide them, so you
                    // can then add a fadeIn effect.

                    $('body')
                        .append(html)
                            .children('#infopathpanel')
                            .hide()
                            .fadeIn(400);

                    // This is where the popup offesets away from your cursor
                    // The variables set up top will decide how far away the
                    // pop up strays away from your cursor.
                    var pos = $(this).offset();

                    $('#infopathpanel').css({
                        position: "absolute",
                        top: (pos.top - 170) + "px",
                        left: (pos.left - 310) + "px",
                        'background-color': '#ffffcc',
                        'width': '300px',
                        'border-color': '#060F40',
                        'border-width': '2px',
                        'color': '#060F40'

                    });               

               }}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T09:57:11.040

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script src="../../../Scripts/jquery-1.7.1.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            var offsetY = -20;
            var offsetX = 40;
            var html = '<div id="info" class="InfoMessage"><h4>Info here </h4><p></p></div>';
            $(html).hide().appendTo('body');

            $('img.imagepopupcontext').hover(function (e) {
                $('div.InfoMessage').hide().find('p').text($(this).data('message'));
                $('div.InfoMessage').fadeIn(400);
                $('div.InfoMessage').css('top', e.pageY + offsetY).css('left', e.pageX + offsetX);
            }, function () {
                $('#info').hide();
            });

            $('img.imagepopupcontext').mousemove(function (e) {
                $('div.InfoMessage').css('top', e.pageY + offsetY).css('left', e.pageX + offsetX);
            });
        });
    </script>
    <style type="text/css">
        #info
        {
            background: #7F7777;
            width: 300px;
            padding-bottom: .5em;
            padding-right: 15px;
            overflow: hidden;
            position: absolute;
        }
    </style>
</head>
<body>
    <table border="1" bgcolor="skyblue">
        <tr>
            <td>
                in progress
            </td>
            <td>
                Sale
            </td>
        </tr>
        <tr>
            <td>
                in progress
            </td>
            <td>
                <table border="1" bgcolor="orange">
                    <tr>
                        <td>
                            inner table a
                        </td>
                        <td>
                            inner table2 A
                        </td>
                        <td>
                            <img class="imagepopupcontext" src="http://cdn1.iconfinder.com/data/icons/SOPHISTIQUENIGHT/mail_icons/png/16/pop_documents.png"
                                data-message="Show dynamic information A a" />
                        </td>
                    </tr>
                    <tr>
                        <td>
                            inner table b
                        </td>
                        <td>
                            inner table2 B
                        </td>
                        <td>
                            <img class="imagepopupcontext" src="http://cdn1.iconfinder.com/data/icons/SOPHISTIQUENIGHT/mail_icons/png/16/pop_documents.png"
                                data-message="Show dynamic information B b" />
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
    <div id="divshowpopup">
        <p id="dbInfo">
        </p>
    </div>
</body>
</html> 
```******

# selenium - 如何使用 selenium2 跟踪呼叫次数和每个呼叫时间

> ID：10440090
> 
> 赞同：0
> 
> 时间：2012-05-03T22:19:24.540
> 
> 标签：selenium, selenium-webdriver

有没有办法使用 selenium2 跟踪调用次数和完整页面加载的每次调用时间？我有一个页面调用多个服务来完成它的全部负载，所以想跟踪每个调用时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T15:53:13.173

您可以使用 browsermob-proxy 和 selenium2 来查找加载时间。它将为您提供 HAR 文件，您可以将其提供给另一个工具以查看结果。阅读[AutomatedTester的博客](http://www.theautomatedtester.co.uk/blog/2012/automating-web-performance-data-collection-with-browsermob-proxy-and-selenium.html)

# android - 无法从自己的网页下载和安装应用 APK

> ID：10440091
> 
> 赞同：5
> 
> 时间：2012-05-03T22:19:39.630
> 
> 标签：android, asp.net, download, apk

我正在尝试在网站上下载我的应用程序，但是，当我上传 APK 文件时，浏览器无法找到它。

压缩 APK 时，会检测到它。但是，并非所有手机都可以从 ZIP 安装 - 我的结果好坏参半。

为什么我不能简单地上传一个 APK 并有一个指向它的 URL 以供下载？为什么我会收到 404，我能做些什么来避免它？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-03T22:24:24.157

> 为什么我不能简单地上传一个 APK 并有一个指向它的 URL 以供下载？

你可以。很多人都这样做。有整个网站都致力于这样做，尽管通常包含盗版内容。

> 为什么我会收到 404

因为您在浏览器中输入的 URL 不是服务器上文件所在的 URL。无论情况如何，这都是互联网上大约 100% 的 404 错误的原因。

> 我能做些什么来避免它？

使用正确的 URL。此外，请务必设置服务器的 MIME 类型配置映射以将您的文件作为`application/vnd.android.package-archive`.

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-19T11:12:18.290

这就是我在我的 asp.net 应用程序中所做的

我的应用程序托管在具有 IIS 7 的 Window server 2008r2 下

第 1 步：在 .aspx 页面中添加超链接设置 navigateurl 作为文件路径

```
 <asp:HyperLink ID="lnkdwnload" runat="server" NavigateUrl="~/Application_Android/MyAndroidAppAame.apk">Download MyApp</asp:HyperLink> 
```

第二步：Web.config 在 staticContent 下添加 mimeMap 元素

```
<system.webServer>
    <staticContent>
      <mimeMap fileExtension=".apk" mimeType="application/vnd.android.package-archive"/>
    </staticContent> 
```

</system.webServer>

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-02-17T10:36:38.107

```
in case you are using .net core,
 public void Configure(IApplicationBuilder app, IHostingEnvironment env, ILoggerFactory loggerFactory)
        {
...
var provider = new FileExtensionContentTypeProvider();
            // Add new mappings`enter code here`
            provider.Mappings[".apk"] = "application/octet-stream";
            app.UseStaticFiles(new StaticFileOptions()
            {
                ContentTypeProvider = provider
            });
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-02-28T16:40:24.050

在保存 apk 文件的目录中上传 web.config 文件

web.config 的内容应该是：

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
<system.webServer>
<staticContent>
<mimeMap fileExtension=".apk" mimeType="application/vnd.android.package-archive" />
</staticContent>
</system.webServer>
</configuration> 
```

现在你可以下载apk文件了..

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-12-16T08:00:09.437

谢谢它正在工作

这就是我在我的 asp.net 应用程序中所做的

我的应用程序托管在具有 IIS 7 的 Window server 2008r2 下

第 1 步：在 .aspx 页面中添加超链接设置 navigateurl 作为文件路径

```
<asp:HyperLink ID="lnkdwnload" runat="server" NavigateUrl="~/Application_Android/MyAndroidAppAame.apk">Download MyApp</asp:HyperLink> 
```

第 2 步：Web.config 在同一路径上的 staticContent 下添加 mimeMap 元素

```
<system.webServer>
    <staticContent>
      <mimeMap fileExtension=".apk" mimeType="application/vnd.android.package-archive"/>
    </staticContent> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-10-21T12:51:41.023

在 Window Server 中转到 IIS 管理器，选择您的虚拟目录并选择 MIME 类型

添加新的 MIME 类型 -> 扩展“apk”类型 -> “application/vnd.android.package-archive .apk”

确保添加 .apk 扩展名

它将启用从 Windows Server 下载的 apk 文件。

# sql-server - SQL Server XML 值格式化换行符

> ID：10440096
> 
> 赞同：0
> 
> 时间：2012-05-03T22:20:09.390
> 
> 标签：sql-server, xml, formatting

T-SQL XML 值丢失新的行格式

我已将 XML 文件加载到 SQL 服务器中。我查询此文件以提取具有值的节点。

问题是选择时新行字符丢失。如何保留格式，以便当我在网络上显示文本时，如果没有换行符，它不会显得凌乱。

有关详细信息，请参阅文本和屏幕截图

![在此处输入图像描述](../Images/21ce9a4a3139ea45445469777fa696ad.png)

![编辑器显示新行 \n 丢失](../Images/3da300a74a5e48372aa9daf701499c15.png)

T-SQL 代码：

```
declare @Text xml ;
set @Text= '<?xml version="1.0" encoding="utf-8"?>
<topic>
  <L1>
    <Subject>Subject text</Subject>
    <Details>
      Story Details are

      This is paragraph

      Text after After two line breaks

      Text after After two line breaks

    </Details>
  </L1>
</topic>'

;with t as (select @Text [xmlcolumn])
--select * from t
SELECT  x.a.value('(Subject)[1]','nvarchar(max)') as [Subject]
,       x.a.value('(Details)[1]','nvarchar(max)') as [Details]
FROM   t
cross apply
t.xmlcolumn.nodes('//L1') x(a) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T04:28:43.240

**更新：**我误读了您的问题 - 换行符的问题纯粹是在 SQL Server Management Studio 中 - 它不能代表那些换行符。当您从 C# 或 VB.NET 的应用程序中读取 XML 时，这些换行符仍然存在 - 相信我。

但是这个原始答案在其他情况下也可能是相关的——你需要知道 SQL Server 没有“按原样”存储你的 XML——它会解析并转换它。因此，当您要求取回它时，它可能看起来略有不同，但在功能上它仍然是相同的 XML。

* * *

是的，这是正常的预期行为。

SQL Server 以**标记化**格式存储您的 XML - 例如，它不存储 XML 的实际文本表示，但它将您的 XML 解析并标记为 XML 片段，然后存储在此`XML`数据类型中。

因此，当您再次查询它时，您将得到一个**语义**正确且相同的表示 - 但某些文本表示可能会有所不同。

例如，当您传入一个空的 XML 元素时，如下所示：

```
<MyEmptyElement></MyEmptyElement> 
```

当您再次从 SQL Server 检索 XML 时，您将返回“短”形式：

```
<MyEmptyElement /> 
```

这不是完全相同的文本 - 但从语义角度来看，它是 100% 相同的 XML。

据我所知，你不能以任何方式影响这种行为——你只需要忍受它。

# event-handling - JavaFX 2 中的键绑定

> ID：10440099
> 
> 赞同：3
> 
> 时间：2012-05-03T22:20:37.850
> 
> 标签：event-handling, javafx

如何在 JFX 2 中使用 KeyBindings？我需要将回车键从返回到我自己的函数中重新分配，并且对于返回的回车分配 CTRL+ENTER

我已经尝试过这种方式，但它仍然是一条新线。

```
messageArea.addEventFilter(KeyEvent.KEY_PRESSED, new EventHandler<KeyEvent>() {
        @Override
        public void handle(KeyEvent keyEvent) {
            if (keyEvent.getCode() == KeyCode.ENTER) {
                sendMessage();
            }
        }
    }); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-04T11:02:37.110

作为jewelsea答案的补充。要控制组合键，请使用：

```
if (event.getCode().equals(KeyCode.ENTER) && event.isControlDown()) { // CTRL + ENTER
    messageArea.setText(messageArea.getText() + "\n");
} 
```

在你的处理程序中。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-04T00:39:55.043

如果要防止您正在过滤的事件的默认行为，您需要[使用](http://docs.oracle.com/javafx/2/api/javafx/event/Event.html#consume%28%29)它。

有多种 KeyEvents，您可能希望在[KeyEvent.ANY](http://docs.oracle.com/javafx/2/api/javafx/scene/input/KeyEvent.html#ANY)上进行过滤，而不是仅仅`KeyEvent.KEY_PRESSED`使用它们。

# javascript - Firefox 3.6 上的 Jquery.parseJSON 兼容性

> ID：10440102
> 
> 赞同：0
> 
> 时间：2012-05-03T22:20:43.543
> 
> 标签：javascript, jquery, json

我对以下代码片段有疑问：

```
$.ajax(
{
    type: "POST",
    url: "AjouterAttribut.php",
    data: { val: valvaleur, table: nomvaleur }
}).success(function(message)
{
    var rep = $.trim(message);
    if (rep == '-')
    {
        $.unblockUI();
        alert("Cet enregistrement existe déjà");
    } 
    else 
    {
        var Tableau = jQuery.parseJSON(rep);
        boutonappuye.prev().find('option').remove();

        boutonappuye.next().attr("disabled", "true");
        boutonappuye.next().find('img').attr('src', 'images/Supprimer_nonactif.png')

        for (var i=0; i< Tableau.length; i++)
        {
        boutonappuye.prev().append("<option value="+ Tableau[i][0] +">" + Tableau[i][1] + "</option>");
        }
        $.unblockUI();
    }
}); 
```

这一行，具体来说：

```
var Tableau = jQuery.parseJSON(rep); 
```

这适用于 Firefox 12。但是，我需要使其与 Firefox 3.6 兼容。令我沮丧的是，javascript 只是在那里崩溃了。我尝试在该行之前对 rep 变量的内容进行警告。它给出了这个：

```
[["1","Etudiant"],["3","Etudiant privilege"],["2","Professeur"],["7","wrerew"]] 
```

如果我将上面的代码行更改为：

```
var Tableau = jQuery.parseJSON('[["1","Etudiant"],["3","Etudiant privilege"],["2","Professeur"],["7","wrerew"]]'); 
```

有用。我什至不确定为什么将变量放在函数中会导致它崩溃。

谢谢~

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T20:10:56.723

这是编码的问题，我的 php 文件是用 UTF-8 和 BOM 编码的。不得不在没有的情况下对其进行编码。

# excel - Excel 是否评估提供给 IF 函数的两个结果参数？

> ID：10440104
> 
> 赞同：10
> 
> 时间：2012-05-03T22:20:47.603
> 
> 标签：excel, if-statement, lazy-evaluation

Excel 的`if`函数接受三个参数，一个条件、一个 if-true 值和一个 if-false 值。Excel 是计算出所有三个参数的值，还是只计算出条件的值和相应的结果？

**澄清：**我不知道会的*结果*是什么`if`，我想知道它是否在计算函数结果之前计算所有参数的值。

这相当于询问`if`函数是使用惰性求值还是严格求值。例如，下面的伪代码：

```
x = 5;
print x>2 ? "Bigger" : "Smaller" + 1/0 
```

将在具有完全严格评估的语言中引发除零异常，因为它会评估`1/0`，即使运算符不需要结果`?:`。

在惰性求值语言中，`?:`运算符`x>2`甚至会在决定要求值的表达式之前求值。

问题在于，在 Excel 中，会产生一个可以存在于表达式中`1/0`的合法值（恰好是）。`#DIV/0!`因此，简单地调用`=if(true,1,1/0)`并不能显示 Excel 是否正在评估`1/0`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T22:39:29.107

非常东方的测试

```
? iif(true, 1, 1/0) 'run-time error: division by zero 
```

我假设您的意思是 iif() - 在 VBA 中，这不会“短路”，因此您应该`If..Then..Else..End If`在可能出现问题的情况下使用。

好的 - 测试你真正问的问题：

```
'In a VBA module
Function TruePart()
      MsgBox "True part"
      TruePart = "True"
End Function

Function FalsePart()
      MsgBox "False part"
      FalsePart = "False"
End Function 
```

在一个单元格中：`=IF(TRUE,truepart(),falsepart())`

每次计算 IF() 单元格时只能得到一个 msgbox。

作为进一步验证，这为您提供了两个 msgbox - 每个一个：

```
Sub Tester()
    Debug.Print IIf(True, TruePart(), FalsePart())
End Sub 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-01-07T13:47:42.893

它不是。

Excel 2013 仅评估必要的代码。

我有一个非常复杂且耗时的单元格公式要复制几十万行。计算需要几个小时。但幸运的是，根据其他一些标准很容易确定结果何时为零。

因此，当其他标准建议它必须为零时，使用 If 语句来避免计算，并且仅在必要时执行计算极大地加快了处理速度，将处理时间缩短到之前的 10% 左右。

如果 Excel 评估这两个表达式，则 If 语句只会增加复杂性和时间。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-03T22:44:49.323

几个简单的测试：

`=IF(TRUE,1,1/0)`

`=IF(FALSE,1/0,1)`

两者都不会导致 div/0 错误，因此可以得出结论，实际上只评估了条件的相应结果。显然，条件本身也必须进行评估。

在更复杂的公式中，您还可以使用评估公式工具来观察`IF`语句是如何解析的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-08-05T16:29:13.980

Excel 似乎对`IF()`函数使用了急切的评估（即总是评估所有三个参数）。要在没有 VBA 的情况下进行测试，请打开自动工作簿计算并输入新工作簿的单元格：

```
=IF(TRUE, 0, RAND()) 
```

保存并关闭工作簿。再次打开工作簿并再次关闭，Excel 将显示“保存更改”提示，因为 volatile 函数`RAND()`已被评估。

更改`RAND()`为`1`Excel 不显示提示。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-03T22:43:37.007

我对 Tim 有相反的答案，而是基于 XL 2010 If Function：

```
=IF(TRUE,1,1/0) 
```

不会产生 #DIV/0 错误，

```
=IF(FALSE,1,1/0) 
```

做。此外，[我的阅读](http://office.microsoft.com/en-us/excel-help/if-HP005209118.aspx)意味着只评估适当的条件。

# c# - 为什么 AutoFac 的 AsImplementedInterfaces 会在另一种类型上破坏我的解析器？

> ID：10440111
> 
> 赞同：4
> 
> 时间：2012-05-03T22:22:34.223
> 
> 标签：c#, .net, dependency-properties, autofac

在下面的代码示例中，Debug.Assert 将失败。

如果从 IBreaker 注册中删除 AsImplementedInterfaces() 扩展，则 foo.Bar 不会为空。为什么会这样？

```
using System;
using System.Diagnostics;
using System.Reflection;
using Autofac;

namespace AutoFacTest
{
class Program
{
    static void Main(string[] args)
    {
        var builder = new ContainerBuilder();

        var thisAssembly = Assembly.GetExecutingAssembly();

        builder.RegisterAssemblyTypes(typeof(IFoo<>).Assembly, thisAssembly).AsClosedTypesOf(typeof(IFoo<>))
                .AsImplementedInterfaces().PropertiesAutowired().InstancePerDependency();

        builder.RegisterAssemblyTypes(typeof(IBar<>).Assembly, thisAssembly)
               .AsClosedTypesOf(typeof(IBar<>)).AsImplementedInterfaces().InstancePerDependency();

        builder.RegisterAssemblyTypes(typeof(IBreaker).Assembly, thisAssembly).InstancePerDependency()
                .AsImplementedInterfaces(); //<------ will work if this is removed

        var container = builder.Build();

        var foo = container.Resolve<IFoo<int>>();

        Debug.Assert(foo.Bar!=null);

        Console.ReadLine();
    }
}

public interface IBreaker {}

public class BreakerImpl<T> : IBreaker {}

public class BarImpl : IBar<int>{}

public class FooImpl : IFoo<int>
{
    public IBar<int> Bar { get; set; }
}

public interface IFoo<T>
{
    IBar<T> Bar { get; set; }
}

public abstract class Foo<T> : IFoo<T>
{
    public IBar<T> Bar { get; set; }
}

public interface IBar<T>{}

public abstract class Bar<T> : IBar<T> {}
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-04T06:14:51.787

您的注册有几个问题。首先，了解如何`RegisterAssemblyTypes`工作：它需要一个程序集并发现该程序集中的所有类，并将类型注册到您的构建器。您可以进一步增加调用，`AsXYZ`以控制每种类型在最终容器中的键入方式。

现在，在您的示例中，您将执行此操作 3 次，每次都有不同的扩充，每次您将注册*所有类型*。前两个注册您将所有类型注册为特定接口的封闭类型。第三次，您再次注册相同的类型，但现在*不是*封闭类型，有效地破坏了以前的注册。

解决的办法是使用`Where`augmentation来限制每次注册哪些类型的范围，这样就不会用不同的augmentation多次注册相同的类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T22:57:19.730

您的第三次注册调用没有任何过滤器，因此它将尝试重新注册您的所有 IFoo 和 IBar 的具体实现。当您省略 AsImplmentedInterfaces() 时，它只会将具体类注册为它们自己的类型。

尝试像其他 2 个调用一样添加过滤器。

```
builder.RegisterAssemblyTypes(typeof(IBreaker).Assembly, thisAssembly)
            .InstancePerDependency()
            .AsClosedTypesOf<IBreaker>()
            .AsImplementedInterfaces(); 
```

如果您希望注册所有剩余的课程，请尝试为您已注册的课程添加例外调用。

```
builder.RegisterAssemblyTypes(typeof(IBreaker).Assembly, thisAssembly)
            .InstancePerDependency()
            .Except<IFoo>().Except<IBar>() //Not sure if you have to specify the concrete types or if the interfaces are fine
            .AsImplementedInterfaces(); 
```

# javascript - 替换文本 javascript .append()

> ID：10440112
> 
> 赞同：0
> 
> 时间：2012-05-03T22:22:35.087
> 
> 标签：javascript, syntax

```
 var app_name = "example_text"
         jq('.table_name > tbody:last').append(
            '<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td><td>app_name</td><td><button class="removeb">Remove</button></tr>'
         ); 
```

如何使用 .append() 中的 var 来代替？谢谢！！我可以使用 %s，还是在 javascript 中有另一种方法？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T22:24:36.033

您需要将变量连接到字符串中。

```
'<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td><td>' + app_name + '</td><td><button class="removeb">Remove</button></tr>' 
```

或者你可以像这样创建你的元素。

```
var app_name = "example_text"

var tr = $('<tr>');
$('<td>', {text: '&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'})
    .appendTo(tr);
$('<td>', {text: app_name})
    .appendTo(tr);
$('<td>').append($('<button>', className:'removeb', text:'Remove'}))
    .appendTo(tr);
jq('.table_name > tbody:last').append(tr); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T22:25:24.667

使用加号进行字符串连接是一种简单的方法。

```
var app_name = "example_text";
jq('.table_name > tbody:last').append(
    '<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td><td>' + app_name + '</td><td><button class="removeb">Remove</button></tr>'
); 
```

# c++ - 使用 zlib 解压缩 .zip 文件的简单方法

> ID：10440113
> 
> 赞同：44
> 
> 时间：2012-05-03T22:22:36.980
> 
> 标签：c++, zip, zlib, unzip

是否有一个简单的示例说明如何解压缩 .zip 文件并将文件提取到目录中？我目前正在使用 zlib，虽然我知道 zlib 不直接处理 zip 文件，但 zlibs 的“contrib”库中似乎还有一些额外的东西。我注意到并阅读了“minizip”，在阅读了一些文档并查看了一些代码之后，我没有看到如何解压缩 .zip 文件并将文件解压缩到目录的简单示例。

我想找到一种独立于平台的方法，但如果这不可能，那么我需要为 windows 和 mac 找到一种方法。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-05-03T22:36:19.467

`zlib`处理*deflate*压缩/解压缩算法，但在 ZIP 文件中还有更多。

你可以试试[libzip](http://www.nih.at/libzip/index.html)。它免费、便携且易于使用。

更新：在这里，我附上了 libzip 的 quick'n'dirty 示例，省略了所有错误控制：

```
#include <zip.h>

int main()
{
    //Open the ZIP archive
    int err = 0;
    zip *z = zip_open("foo.zip", 0, &err);

    //Search for the file of given name
    const char *name = "file.txt";
    struct zip_stat st;
    zip_stat_init(&st);
    zip_stat(z, name, 0, &st);

    //Alloc memory for its uncompressed contents
    char *contents = new char[st.size];

    //Read the compressed file
    zip_file *f = zip_fopen(z, name, 0);
    zip_fread(f, contents, st.size);
    zip_fclose(f);

    //And close the archive
    zip_close(z);

    //Do something with the contents
    //delete allocated memory
    delete[] contents;
} 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-05-03T22:38:30.370

[Minizip](http://www.winimage.com/zLibDll/minizip.html)确实有一个示例程序来演示它的用法——文件名为 minizip.c 和 miniunz.c。

更新：我有几分钟的时间，所以我为你准备了这个快速、简单的例子。这是非常臭的C，如果没有重大改进，我不会使用它。希望这足以让你现在开始。

```
// uzip.c - Simple example of using the minizip API.
// Do not use this code as is! It is educational only, and probably
// riddled with errors and leaks!
#include <stdio.h>
#include <string.h>

#include "unzip.h"

#define dir_delimter '/'
#define MAX_FILENAME 512
#define READ_SIZE 8192

int main( int argc, char **argv )
{
    if ( argc < 2 )
    {
        printf( "usage:\n%s {file to unzip}\n", argv[ 0 ] );
        return -1;
    }

    // Open the zip file
    unzFile *zipfile = unzOpen( argv[ 1 ] );
    if ( zipfile == NULL )
    {
        printf( "%s: not found\n" );
        return -1;
    }

    // Get info about the zip file
    unz_global_info global_info;
    if ( unzGetGlobalInfo( zipfile, &global_info ) != UNZ_OK )
    {
        printf( "could not read file global info\n" );
        unzClose( zipfile );
        return -1;
    }

    // Buffer to hold data read from the zip file.
    char read_buffer[ READ_SIZE ];

    // Loop to extract all files
    uLong i;
    for ( i = 0; i < global_info.number_entry; ++i )
    {
        // Get info about current file.
        unz_file_info file_info;
        char filename[ MAX_FILENAME ];
        if ( unzGetCurrentFileInfo(
            zipfile,
            &file_info,
            filename,
            MAX_FILENAME,
            NULL, 0, NULL, 0 ) != UNZ_OK )
        {
            printf( "could not read file info\n" );
            unzClose( zipfile );
            return -1;
        }

        // Check if this entry is a directory or file.
        const size_t filename_length = strlen( filename );
        if ( filename[ filename_length-1 ] == dir_delimter )
        {
            // Entry is a directory, so create it.
            printf( "dir:%s\n", filename );
            mkdir( filename );
        }
        else
        {
            // Entry is a file, so extract it.
            printf( "file:%s\n", filename );
            if ( unzOpenCurrentFile( zipfile ) != UNZ_OK )
            {
                printf( "could not open file\n" );
                unzClose( zipfile );
                return -1;
            }

            // Open a file to write out the data.
            FILE *out = fopen( filename, "wb" );
            if ( out == NULL )
            {
                printf( "could not open destination file\n" );
                unzCloseCurrentFile( zipfile );
                unzClose( zipfile );
                return -1;
            }

            int error = UNZ_OK;
            do    
            {
                error = unzReadCurrentFile( zipfile, read_buffer, READ_SIZE );
                if ( error < 0 )
                {
                    printf( "error %d\n", error );
                    unzCloseCurrentFile( zipfile );
                    unzClose( zipfile );
                    return -1;
                }

                // Write data to file.
                if ( error > 0 )
                {
                    fwrite( read_buffer, error, 1, out ); // You should check return of fwrite...
                }
            } while ( error > 0 );

            fclose( out );
        }

        unzCloseCurrentFile( zipfile );

        // Go the the next entry listed in the zip file.
        if ( ( i+1 ) < global_info.number_entry )
        {
            if ( unzGoToNextFile( zipfile ) != UNZ_OK )
            {
                printf( "cound not read next file\n" );
                unzClose( zipfile );
                return -1;
            }
        }
    }

    unzClose( zipfile );

    return 0;
} 
```

我在 Windows 上使用 MinGW/MSYS 构建并测试了它，如下所示：

```
contrib/minizip/$ gcc -I../.. -o unzip uzip.c unzip.c ioapi.c ../../libz.a
contrib/minizip/$ ./unzip.exe /j/zlib-125.zip 
```

# apache - htaccess Rewrite 适用于父目录，但不适用于子目录

> ID：10440116
> 
> 赞同：0
> 
> 时间：2012-05-03T22:23:09.160
> 
> 标签：apache, mod-rewrite

所以我有两个位于不同域的站点，但共享许多相同的资源（样式表、图像、脚本）。让我们称这些站点`A.com`和`B.com`.

在这两个站点中的每一个中，子目录中都有另一个站点。同样，它们都使用相同的资源。让我们调用这些站点中的每一个`A.com/sub`，并且`B.com/sub`.

我正在尝试通过将任何图像、脚本或样式表请求从、和上`A.com`重定向到`A.com/sub``B.com``B.com/sub``A.com`

## 例子：

```
http://A.com/sub/images/foo/bar.jpg  =>  http://A.com/images/foo/bar.jpg
http://B.com/images/foo/bar.jpg      =>  http://A.com/images/foo/bar.jpg 
http://B.com/sub/images/foo/bar.jpg  =>  http://A.com/images/foo/bar.jpg 
```

## 我现在是怎么做的：

`A.com/sub`通过将所有图像、脚本或样式表请求重写为`../`：

```
RewriteRule (.*)\.(gif|jpg|png|css|js)$ ../$1.$2 [R] 
```

`B.com`以几乎相同的方式工作，但不是重写为`../`，而是重写为`A.com`：

```
RewriteRule (.*)\.(gif|jpg|png|css|js)$ http://A.com/$1.$2 [R] 
```

但是，与我的期望相反，`B.com/sub`使用相同的重写不起作用：

```
RewriteRule (.*)\.(gif|jpg|png|css|js)$ http://A.com/$1.$2 [R] 
```

**为什么这种重写模式在每种情况下都能很好地工作，但是`B.com/sub`？**

## 笔记

我必须为每个站点设置一个 .htaccess，并且必须以这种方式设置站点（即`A.com`和`A.com/sub`）。这不是我的决定，我无法改变。

# c++ - 如何在 C++ 中的 if 语句中使用字符串？

> ID：10440123
> 
> 赞同：0
> 
> 时间：2012-05-03T22:23:42.390
> 
> 标签：c++

这段代码的问题是没有显示错误，但是当我编译程序时，if else 语句没有按应有的方式执行。两个 if 语句显示相同的答案，例如第二个 if 语句。如果我输入 Y 或 N，我会得到相同的结果，“你现在将选择一个事件”。我该如何摆脱这个问题？应该使用char还是字符串？

```
#include <iostream>
#include <iomanip>
#include<stdlib.h>
class start
{
public :
    void getusertype ();
    void registeruser ();
    start(); 
protected :
    char consumer_name[20],
    consumer_address[30],
    consumer_email[30];
    char user[8];
};

start::start()
{
    char terminator;
    cout <<"Are you the venue manager, consumer or ticket agent?";
    cin.get(user,8);
    cin.get(terminator);

}
void start::getusertype ()
{
    char terminator;
    if(user[8])
    {
        cout <<"You have now entered the system." <<endl <<endl;
        cin.get(terminator);

    }
    else
    {
        cout <<"You can only enter this part of the system if you are a consumer.";
    }

    }
void start::registeruser()
{
    char option[1];
    cout <<"Are you registered? (Enter Y/N)";
    cin.get(option,1);
    if (option=="N")
    { char terminator;
        cout <<"Please enter your registration details" <<endl <<endl;
        cout << " Enter your full name: " <<endl;
        cin.get (consumer_name,20);
        cin.get(terminator);
        cout <<"Enter your address: " <<endl;
        cin.get(consumer_address,30);
        cin.get(terminator);
        cout <<"Enter your email address: " <<endl;
        cin.get(consumer_email,30);
        cin.get(terminator);
    }
    else
    {
        cout <<"You will now choose an event.";
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T22:28:53.883

`char option[1]; ... if (option=="N")`

'if' 语句将选项数组的地址与常量字符串的地址进行比较；他们永远不会平等。

用 C 风格编写，你可以写一些类似的东西`if (strcmp(option, "N") == 0)`或其他一些东西。但习惯于在 C++ 代码中使用 std::string 会更好；而且更直接。如果 option 是 std::string，则您的“if”语句将是正确的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T22:29:02.097

如果你真的想使用`char []`而不是`std::string`（它有一个`operator==`并且显然更像你期望的那样），你需要编辑你的**if**语句以使用旧的 C 方式进行字符串比较。就像是：

```
if ( strcmp(option, "N") == 0)
{
  // ...
} 
```

或者由于您只比较一个字符，您可以这样做：

```
if ( *option == 'N' )
{
  // ...
} 
```

[这取消了指向原始类型](http://en.wikipedia.org/wiki/Primitive_type)`char []`中第一个字符的指针，因此可以直接与.`==`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-03T22:29:00.373

举个例子

```
if (option=="N") 
```

这将`option`衰减为指针，与文字的地址进行比较`"N"`。那将始终返回错误。要比较 C 字符串的内容，您需要使用`strcmp`.

帮自己一个大忙，用`std::string`C 字符串代替。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T22:31:00.517

您正在使用“C”字符串 - 一天结束只是指针。因此，您需要使用该功能`strcmp`- 但`std::string`s 会省去麻烦。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T03:46:42.647

> 我该如何摆脱这个问题？

停止使用字符数组。

> 我在哪里调用 std::string ？

像这样：

```
#include <iostream>
#include <iomanip>
#include <string>
#include <limits>

class start
{
public :
    void getusertype ();
    void registeruser ();
    start(); 
protected :
    std::string consumer_name;
    std::string consumer_address;
    std::string consumer_email;
    std::string user;
};

start::start()
{
    std::cout <<"Are you the venue manager, consumer or ticket agent?";
    std::getline(std::cin, user);

}
void start::getusertype ()
{
    if(user == "consumer")
    {
        std::cout <<"You have now entered the system.\n\n";
    }
    else
    {
        std::cout <<"You can only enter this part of the system if you are a consumer.\n";
    }

}
void start::registeruser()
{
    std::string option;
    std::cout <<"Are you registered? (Enter Y/N)";
    std::cin >> option;
    std::cin.ignore(std::numeric_limits<std::streamsize>::max(), '\n'); 
    if (option=="N")
    { 
        std::cout <<"Please enter your registration details\n\n";
        std::cout << " Enter your full name: \n";
        std::getline(std::cin, consumer_name);
        std::cout <<"Enter your address: \n";
        std::getline(std::cin, consumer_address);
        std::cout <<"Enter your email address: \n";
        std::getline(std::cin, consumer_email);
    }
    else
    {
        std::cout <<"You will now choose an event.\n";
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-03T22:47:28.133

要理解为什么这不起作用，您需要了解一些关于指针如何工作的事情。

**什么是指针？**
指针是一种指向值的类型。因此，当您声明一个 char 类型的变量时：
`char foo; char* bar = &foo;`
您正在保留一块内存来存储一个字符。变量 bar 指向变量 foo。您可以通过直接使用它或取消引用变量 bar (*bar) 来获取存储在 foo 中的值。

当您声明具有 char 指针类型的变量时：
`char* foo`
您正在保留一块内存来存储一块内存来存储一个字符。

**但我从来没有做过指针！** 在 C/C++ 中，数组可以隐式转换为指针。这不是您编写的代码实际发生的情况，但您可以这样想：
`char optionValue;
char* option = &optionValue;`

**为什么我的 if 语句不起作用？**
当您比较指针时，您会将您指向的内存块与另一个指针的内存块进行比较。所以 == 只有当两个指针指向同一个内存块时才会返回 true。在您的代码中，这是不可能的：常量“N”永远不会与指向编译器为您创建的内存块的指针相同。

您需要做的是比较内存块的内容（通过使用其他人建议的 strlen ）或更改变量的类型（字符串很常见，因此有一个 std::string 类型来处理它们）。

# iphone - 游戏中心详细信息

> ID：10440124
> 
> 赞同：3
> 
> 时间：2012-05-03T22:23:44.233
> 
> 标签：iphone, ios, cocos2d-iphone

我想知道是否有人可以为我阐明 GameCenter。我正在构建我的第一个多人游戏应用程序，我想知道我是否能够获取数据并使用它创建自己的界面......

基本上，我想使用我自己的 UI 来显示当前正在玩的游戏，如果你正在等待轮到你，或者轮到你了，等等，以及游戏中的一些其他细节。这可能吗？还是只能通过 GameCenter UI 访问当前游戏？

此外，如果我能够对其进行蒙皮，或者至少自己获取数据并对其进行蒙皮。是否可以使用尽可能少的 GameCenter UI 围绕 GameCenter 构建应用程序？我基本上只是希望用户被封闭在我的游戏环境中，而不是每点击几下就被扔进 GameCenter。说得通？

任何见解表示赞赏！非常感谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T19:14:47.620

你可以这样做。该方法是获取显示正在进行的游戏的 UITableView 所需的所有数据。在这里展示一个完全自定义的基于回合的游戏中心视图的代码会很长。如果您查看为表格截取的代码，也许您会了解这个概念：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"MatchCell" owner:self options:nil];
        cell = [topLevelObjects objectAtIndex:0];
    }

    GKTurnBasedMatch *match = [[allMyMatches objectAtIndex:indexPath.section ] objectAtIndex:indexPath.row];
    MatchCell *c = (MatchCell *)cell;
    c.match = match;
    c.delegate = self;
    if ([match.matchData length] > 0) {
        NSString *storyString = [NSString stringWithUTF8String:[match.matchData bytes]];
        c.storyText.text = storyString;
        int days = -floor([match.creationDate timeIntervalSinceNow] / (60 * 60 * 24));
        c.statusLabel.text = [NSString stringWithFormat:@"Story started %d days ago and is about %d words", days, [storyString length] / 5];
    }

    if (indexPath.section == 2) {
        [c.quitButton setTitle:@"Remove" forState:UIControlStateNormal];
        [c.quitButton setTitle:@"Remove" forState:UIControlStateNormal];
    }

    return cell;
} 
```

关于该主题的完整教程在 iOS 5 中，来自 Ray Wenderlich 的教程团队的 Tutorials。如果您觉得大方，请点击以下链接：[http ://www.raywenderlich.com/store/ios-5-by-tutorials](http://www.raywenderlich.com/store/ios-5-by-tutorials) ![这就是你得到的](../Images/72a63f758c8796702636da364d3d47fd.png)

# mysql - MySql 中 LIMIT 子句的使用不适用于子查询

> ID：10440129
> 
> 赞同：2
> 
> 时间：2012-05-03T22:24:01.890
> 
> 标签：mysql

我在 MySql 中有一个名为的表，`order_item`其中包含特定订单的详细信息，其中包含以下字段（以及其他一些我可能觉得没有必要在这里发布的字段）。

1.  order_id
2.  prod_id
3.  订购数量
4.  价格

我需要计算畅销产品。我正在使用以下 SQL 语句。

```
SELECT o.prod_id, sum(o.qty_ordered) as qty_ordered, p.prod_img 
FROM order_item o, product_image p 
WHERE o.prod_id=p.prod_id AND 
p.prod_id IN(SELECT prod_id FROM product_image limit 1) AND
order_id IN(SELECT order_id FROM order_table WHERE od_status='Completed')
GROUP BY prod_id 
HAVING SUM(qty_ordered)>=5
ORDER BY prod_id DESC 
```

上面的查询计算最畅销的产品。唯一的问题是上面语句中提到的子查询

```
p.prod_id IN(SELECT prod_id FROM product_image limit 1) 
```

不起作用。MySQL 抱怨

```
This version of MySQL doesn't yet support 'LIMIT & IN/ALL/ANY/SOME subquery' 
```

此子查询检索`product_image`表中维护的产品图像，其中同一产品有多个产品图像，我只需要显示其中一个。

我的服务器版本是 5.1.48。还有其他方法可以解决这种情况吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T22:35:49.413

查看您的查询是否需要带有 IN 子句的行？您已经加入：

```
WHERE o.prod_id=p.prod_id 
```

您所说的那一行似乎是多余的，因为连接已经发生了？此外，LIMIT 查询中没有 WHERE 子句。此表中是否只有 1 行？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T22:31:04.193

你是对的，MySQL 不支持 IN 子查询中的限制。

但是，您可以做的是创建一个视图，然后选择该视图。

把它变成一个视图： SELECT prod_id FROM product_image limit 1

然后在你的 IN 子句中调用它：

```
p.prod_id IN(SELECT prod_id FROM YOUR_VIEW_NAME_HERE) 
```

我不确定这是否是最好的答案，但它有效:)

# sql - MSSQL目前有没有类似SQL2011中“PERIOD”列的特性？

> ID：10440132
> 
> 赞同：0
> 
> 时间：2012-05-03T22:24:10.667
> 
> 标签：sql, sql-server, temporal-database

我有一个项目，其中 SQL2011 规范中定义的 PERIOD 列是完美的解决方案。不幸的是，我被迫使用 MSSQL 2008R2（或者可能是 MSSQL 2012）作为我的数据库，它不支持此功能。

是否有任何类似于当前在 MSSQL 中的 SQL2011 中的 PERIOD 功能的专有功能？如果没有，对于尝试实现类似的东西的最佳方法有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T20:52:35.717

看看[锚建模](http://www.anchormodeling.com)。我知道这不完全是您正在寻找的东西（相当于 PERIOD），但作为 Anchor 模型实现的数据库可以包括双时间方面。导出模型时生成的 SQL 代码主要支持 MS SQL。Oracle 也可用，但在优化架构、触发器和查看 MS SQL 的 SQL 代码时需要做很多工作。也许它会有所帮助，也许你可以看到他们如何以一种非常适合 MS SQL 的方式实现双时态数据。

# php - php : xml 解析并返回 xml

> ID：10440133
> 
> 赞同：1
> 
> 时间：2012-05-03T22:24:11.780
> 
> 标签：php, xml, xml-parsing, simplexml

XML 解析不起作用

```
<?php 
$input = "file1.xml";
$xml = simplexml_load_file($input);
$data-content = $xml->data->getAssetResponse->content;
$new-data = str_replace("NEW", "OLD", (string)$data-content);
$xml_object->data->getAssetResponse->content = $new-data;
print $xml_object->asXML(); 
?> 
```

我可以知道为什么这不起作用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T02:00:30.367

连字符在 PHP 变量名中无效。我建议用下划线代替它们，如`$new_data`and `$data_content`。最后，您初始化`$xml`，但后来尝试使用未知变量`$xml_object`。将这些更改为`$xml`.

```
$input = "file1.xml";
$xml = simplexml_load_file($input);
$data_content = $xml->data->getAssetResponse->content;
$new_data = str_replace("text", "REPLACED STUFF", (string)$data_content);
$xml->data->getAssetResponse->content = $new_data;
print $xml->asXML(); 

// Outputs:
<response>
  <statusCode>200</statusCode> 
  <statusText>OK</statusText> 
  <data>
    <getAssetResponse> 
      <assetId>89898</assetId> 
      <content> some text with HTML content some REPLACED STUFF with HTML content </content>
    </getAssetResponse> 
  </data>
</response> 
```

[来自 PHP 文档：](http://www.php.net/manual/en/language.variables.basics.php)

> 变量名称遵循与 PHP 中其他标签相同的规则。有效的变量名称以字母或下划线开头，后跟任意数量的字母、数字或下划线。作为正则表达式，它会这样表达：'[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*'

# extjs - 使用 ExtJS 如何指定 '->' 减去一点？

> ID：10440138
> 
> 赞同：2
> 
> 时间：2012-05-03T22:24:35.030
> 
> 标签：extjs

我有一个组件，我想向右对齐，但想把它带回来一点点......

```
me.dockedItems = [ {
    xtype: 'toolbar',
    dock: 'top',
    items:
    [{
        text: i18n.user_new,
        disabled: false,
        action: 'add',
        iconCls: 'icon-user-add'
    }, 

    '->',  // is there a way to say align right minus 20px?

    {
        fieldLabel: i18n.filter,
        labelWidth: 40,
        xtype: 'filterfield'
    }],
    ... 
```

我将“->”更改为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T22:45:12.790

没有特定的配置，但您可以在工具栏项目之后添加间隔以将其推离右侧，例如：`'->','yourOwnConfig',' ',' '`

换句话说，`' '`相当于工具栏上的一个小空间，您可以并排添加更多它们，以获得右侧所需的空间。

或使用您的示例：

```
me.dockedItems = [ {
    xtype: 'toolbar',
    dock: 'top',
    items:
    [{
        text: i18n.user_new,
        disabled: false,
        action: 'add',
        iconCls: 'icon-user-add'
    }, 

    '->',  // is there a way to say align right minus 20px?

    {
        fieldLabel: i18n.filter,
        labelWidth: 40,
        xtype: 'filterfield'
    },' ',' ',' ',' '], 
```

我不知道其中有多少相当于 20px，但我想你明白了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T23:06:42.433

或者您可以添加框：

```
{
   xtype: 'box',
   width: 20
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T23:56:27.010

最好的方法（IMO）是指定一个边距：

```
Ext.onReady(function() {
    var form = Ext.create('Ext.panel.Panel', {
        width: 400,
        height: 400,
        renderTo: document.body,
        dockedItems : [{
            xtype: 'toolbar',
            items: [{
                text: 'B1'
            }, '->', {
                text: 'B2',
                margin: '0 20 0 0'
            }]
        }]
    });
}); 
```

# mysql - 在对其中一列进行分组时获取表的最后 2 行。MySQL

> ID：10440140
> 
> 赞同：0
> 
> 时间：2012-05-03T22:24:38.310
> 
> 标签：mysql, sql, group-by

考虑 Facebook。Facebook 显示任何状态的最新 2 条评论。我想做类似的事情。

我有一张桌子，例如`status_id`,和。现在我想为每个获取最新的 2 条评论。`comment_id``comment``timestamp``status_id`

目前我首先做`GROUP_CONCAT`所有列中的一个，分组`status_id`，然后使用`SUBSTRING_INDEX`with `-2`。

这会获取最新的 2 条评论，但是`GROUP_CONCAT`status_id 的所有记录都是开销。

```
SELECT SUBSTRING_INDEX(GROUP_CONCAT('~', comment_id,
                                    '~', comment,
                                    '~', timestamp) 
                        SEPARATOR '|~|'), 
        '|~|', -2)
FROM commenttable
GROUP BY status_id; 
```

你能帮助我更好的方法吗？

我的桌子是这样的——

status_id comment_id 评论时间戳

```
1          1    xyz1     3 hour
1          2    xyz2     2 hour
1          3    xyz3     1 hour
2          4    xyz4     2 hour
2          6    xyz6     1 hour
3          5    xyz5     1 hour 
```

所以我希望输出为 -

```
1          2    xyz2     2 hour
1          3    xyz3     1 hour
2          4    xyz4     2 hour
2          6    xyz6     1 hour
3          5    xyz5     1 hour 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T22:40:31.097

[这是我在这里](http://www.xaprb.com/blog/2006/12/07/how-to-select-the-firstleastmax-row-per-group-in-sql/)遇到的一个很好的答案：

```
select status_id, comment_id, comment, timestamp
from commenttable
where (
   select count(*) from commenttable as f
   where f.status_id = commenttable.status_id 
         and f.timestamp < commenttable.timestamp
) <= 2; 
```

这不是很有效（O（n ^ 2）），但它比连接字符串和使用子字符串来隔离您想要的结果要有效得多。有人会说，恢复到字符串操作而不是本地数据库索引会首先剥夺您使用数据库的好处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T09:33:01.710

经过一番挣扎，我找到了这个解决方案 -

以下给了我 row_id -

```
 SELECT a.status_id, 
         a.comments_id, 
         COUNT(*) AS row_num 
  FROM comments a
       JOIN comments b 
       ON a.status_id = b.status_id AND a.comments_id >= b.comments_id
  GROUP BY a.status_id , a.comments_id
  ORDER BY row_num DESC 
```

给了我总行数 -

```
SELECT com.status_id, COUNT(*) total 
FROM comments com 
GROUP BY com.status_id 
```

在主选择的 where 子句中 -

```
row_num = total OR row_num = total - 1 
```

这给出了最新的 2 行。您可以修改 where 子句以获取超过 2 个最新的行。

# jquery - 在 Backbone 中对列表进行排序时如何更新模型的 order 属性？

> ID：10440142
> 
> 赞同：0
> 
> 时间：2012-05-03T22:24:58.290
> 
> 标签：jquery, javascript-events, backbone.js

我在 Backbone.js 应用程序中有一个可排序的列表（我没有使用 jqueryui 可排序，我自己写了一个小列表）。对于每个列表项，它的 Backbone 模型都有一个 order 属性，该属性保持其在列表中的顺序。每次我对该列表进行排序时，我都想为每个已更改位置的列表项更改此顺序属性。但问题是，我不知道如何检测排序操作。也许在被拖拽的物品模型中很容易检测到这个动作，但是随着物品的移动，其他物品的位置会受到影响，如何检测这些物品模型中的排序动作，然后改变它们的顺序属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T13:28:30.100

当您更改列表中某个项目的位置时（通过拖动或但是），是否会触发您可以绑定到的事件？如果不出意外，如果你正在拖动它们，也许你可以绑定到`mouseup`. 模型是否在集合中？或者您可以从 DOM 元素访问您的 Backbone 视图对象吗？

也许是这样的。这假设您已使用 将 Backbone 视图对象存储在`view_object`属性中`jQuery.data`，并且您已将相应的模型作为`model`选项对象的属性传递给视图构造函数。

```
var Item_View = Backbone.View.extend( {

  initialize : function ( options ) {

    this.$el.data( 'view_object', this );

  },

  events : {

    "mouseup" : function () {

      $( "#items .item" ).each( function ( index ) {

        $( this ).data( 'view_object' ).model.set( 'order', index );

      } );

    }
    // "mouseup"

  }
  // events

} );

var model = new Item_Model( {} );

var view = new Item_View( {

  model : model

} ); 
```

# clojure - 如何捕获“行”号

> ID：10440143
> 
> 赞同：4
> 
> 时间：2012-05-03T22:25:03.490
> 
> 标签：clojure

我的问题是如何捕获发生匹配的向量行的索引？在下面的代码中，我做错了什么？

我有一个向量的向量

`(def v1 [[44 2 3 4 5][1 6 7 5 10][11 12 13 14 15]])`

列索引和比较值

```
(def cmp-val1 11)
(def col-idx 0) 
```

我想返回比较返回 true 的行索引。在 col-idx = 0 和 cmp-val1 = 11 的情况下，我应该看到 (first row-num) 返回 2，它返回 1。

```
(defn ret-match-row
    "Return the index of the row, in which the cmp-val is found.
     It is okay to increment 0."

    [in-seq cmp-val col-idx]

    (let [rn 0]
        (let [row-num
            (for [seq-row in-seq
                    :let [local-row-num (inc rn)]
                    :when (= cmp-val (nth seq-row col-idx nil))]

                local-row-num)]

            (first row-num)))) 
```

来自 lein repl：

```
bene-csv.core=> (ret-match-row v1 cmp-val1 col-idx)
1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T23:08:55.173

```
=> (defn ret-match-row
      [coll cmp idx]
      (keep-indexed (fn [i v] (if (= cmp (get v idx)) i)) coll))

=> (ret-match-row v1 11 0)
(2) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T23:25:52.317

一个灵活的答案来自于将其分成三个不同的问题并将它们组合起来。

*   创建您寻求的数据
*   找到你想要的数据
*   呈现它应该看起来的样子。

* * *

首先我们通过添加行号给行编号

```
(map vector v1 (range)) 
```

然后过滤掉不包含您想要的数字的行：

```
(filter (fn [[data index]] (some #{11} data)) (map vector v1 (range)))
> ([[11 12 13 14 15] 2]) 
```

在这里，我使用了一个技巧，即集合是测试其输入是否包含在集合中的函数，这允许它测试多个值：

```
(filter (fn [[data index]] (some #{11 44} data)) (map vector v1 (range)))
> ([[44 2 3 4 5] 0] [[11 12 13 14 15] 2]) 
```

那么既然你只想知道它在哪里匹配而不是什么匹配我们过滤掉它：

```
(map second (filter (fn [[data index]] (some #{11 44} data)) (map vector v1 (range))))
> (0 2) 
```

* * *

为了把它包装成一个很好的函数，我们写下步骤：

```
(defn with-row-numbers [col] (map vector col (range)))
(defn find-my-rows [rows goals] 
   (filter (fn [[data index]] (some (set goals) data)) rows)) 
(defn present-rows [rows] (map second rows)) 
```

然后组成它们：

```
(defn ret-match-row [data rows]
  (-> data 
   (with-row-numbers) 
   (find-my-rows rows) 
   (present-rows)))

(ret-match-row v1 [11])
(2) 
```

抱歉，我忍不住让它与多个值一起工作，这是一种习惯。

```
(ret-match-row v1 [11 15 44])
> (0 2) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T23:01:49.093

可能有其他方法可以满足您的要求，但您可以使用循环/递归来实现您所追求的迭代：

```
(defn ret-match-row [rows val col-idx]                                                                              
  (loop [[row & rows] rows                                                                                          
         pos 0]                                                                                                     
    (cond                                                                                                           
      (not row)                                                                                                     
      nil                                                                                                           
      (= val (nth row col-idx))                                                                                     
      pos                                                                                                           
      :not-found                                                                                                    
      (recur rows (inc pos)))))                                                                                     

(ret-match-row [[44 2 3 4 5]                                                                                        
                [1 6 7 8 10]                                                                                        
                [11 12 13 14 15]]                                                                                   
               11                                                                                                   
               0)                                                                                                   

;; => 2 
```

您还遇到了 Clojure 的不变性 - (inc rn) 实际上并没有修改 rn。loop / recur 解决方案也使用 inc ，但它将 inc 的结果传递给循环的下一次迭代。

Clojure 的 for (list comprehension) 形式也将循环遍历序列中的所有值，从而产生一个新序列——这很可能不是您想要的。即使你让 for 循环做你想做的事，它也会找到所有匹配项，而不仅仅是第一个。loop / recur 示例在第一次匹配时停止。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T06:50:34.797

我的看法，使用clojure.contrib.seq find-first，索引：

```
(defn ret-match-row [rows val col-idx]

```
（第一的

```
(find-first #(= val (nth (second %) col-idx))

```
（索引行））））
```

```

```

```

# ruby - 无法安装 sinatra-contrib

> ID：10440144
> 
> 赞同：2
> 
> 时间：2012-05-03T22:25:07.333
> 
> 标签：ruby, rubygems, sinatra

我正在尝试使用 Sinatra 运行一个简单的应用程序，但我无法安装重新加载器。

我试过了

```
gem install sinatra-contrib 
```

我的源文件中有这样一行：

```
require "sinatra/reloader" if development? 
```

在我的`Gemfile`

```
gem "sinatra-contrib", "~> "1.3.1"
gem 'sinatra-reloader' 
```

我在尝试启动 gem install sinatra-config 时遇到错误

```
>gem install sinatra-contrib

ERROR:  Error installing sinatra-contrib:
    ERROR: Failed to build gem native extension.

    C:/Ruby192/bin/ruby.exe extconf.rb

checking for rb_trap_immediate in ruby.h,rubysig.h... *** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.` 
```

我想不通。如果我有这`require "sinatra/reloader" if development?`条线，它就行不通了。网络上关于此的内容并不多。我知道霰弹枪在 Windows 中不是一个选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T22:45:02.710

你试过[shot弹枪](http://ruby.about.com/od/sinatra/a/sinatra5.htm)（Sinatra代码重载器）吗？当我使用 Windows 作为我的主要机器时，我用它来重新加载 sinatra 代码

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T09:51:55.150

我曾经遇到过这个错误。[这是要点](https://gist.github.com/1371843)，请查看下面的评论。基本上，`sinatra-contrib`取决于`event machine`哪个对 Windows 不利。删除该依赖项或安装`event machine`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T07:10:29.057

最新版本的 Sinatra reloader 不能在 Windows 下编译。您必须安装 0.5 版：

```
gem install sinatra-reloader -v 0.5.0 
```

# java - 如何将java时间戳转换为php时间戳？

> ID：10440147
> 
> 赞同：7
> 
> 时间：2012-05-03T22:25:27.147
> 
> 标签：java, php, timestamp

如何将这样的 Java 时间戳转换为`1335997853142`php 可以读取的格式？ `1335997853142`应该是`02 May 2012 22:30:53`。

但是无论我尝试什么我都会得到错误或 PHP 说`1970-01-01 01:00:00`或`2038-01-19 04:14:07`

请帮忙！！！我正在寻找超过 1.5 小时的解决方案！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-03T22:33:26.707

PHP 时间戳是秒，而不是毫秒。

```
echo gmdate("d M Y H:i:s",1335997853); 
```

那输出`02 May 2012 22:30:53`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-03T22:28:31.350

它不是 java 时间戳，它是自[纪元](http://en.wikipedia.org/wiki/Epoch_%28reference_date%29#Computing)以来的毫秒数（格林威治标准时间 1970-01-01 00:00:00）

哪个[php 也支持，](http://php.net/manual/en/function.date.php)除了几秒钟，所以以下应该在 php 中工作：

```
date('choose your format', javaMilliseconds / 1000); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-08T12:53:40.937

日期/时间：UTC 时间 2014 年 4 月 / 08 日下午 12:17:42

Java时间戳：1396959462222

PHP时间戳：1396959462

除以 1000 并不能给出完全正确的答案，因为它会给出一个双精度或浮点值，即 1396959462.222，这不是我们想要的。我们在这里需要一个整数，例如 1396959462。因此，将 Java 时间戳转换为 PHP 时间戳的正确方法是使用 intval()：

```
$php_timestamp = intval($java_timestamp/1000); 
```

在一个真实的例子中，在我的一个 Android 应用程序中，我将 Java 时间戳发送到 PHP 服务器，我按照上面提到的方式进行操作。此外，为了良好的安全实践，我添加了一个 preg_replace() 以确保如果有人在此字段中添加了 hack 代码，它将被删除：

```
$php_timestamp = intval(preg_replace('/[^0-9]/', '', $java_timestamp)/1000); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-24T09:55:14.453

date 需要整数格式的时间戳。所以我认为你应该删除最后一个数字 3。不使用除法，因为它会返回浮点数。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-03T22:30:48.313

Java 为您提供以毫秒为单位的时间戳。PHP 使用 Unix 秒，所以除以 1000：

```
 print(date("r", 1335997853142/1000) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-03T22:32:40.263

您拥有的时间戳以毫秒为单位，而它应该以秒为单位

```
$java_time = 1335997853142;
$php_time = $java_time / 1000;
$today = date("d M Y G:i:s", $php_time); 
```

输出

```
02 May 2012 22:30:53 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-03T22:29:01.793

在php中使用date()函数，参数在这里： http: [//php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-03T22:29:14.883

这是微时间的时间戳

利用

```
$time = date("whatever you need", $javatime / 1000); 
```

# java - 任何用于在 Swing 应用程序中嵌入电影的简单（并且是最新的）Java 框架？

> ID：10440152
> 
> 赞同：5
> 
> 时间：2012-05-03T22:26:28.173
> 
> 标签：java, swing, jmf

我正在构建一个小型 Swing 应用程序，我想在其中嵌入一部电影。重要的是，这个应用程序是一个 WebStart 应用程序——并且该库应该能够打包在我启动的 jnlp 中——即，不依赖于本机库。

我知道并尝试过 JMF，但与其他框架相比，我认为格式兼容性相对较差。

有人可以使用他们推荐的库提供一个简单实现的示例代码片段吗？

提前谢谢了。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-05-04T00:33:26.217

JavaFX 作为基于 Java 的媒体播放框架的解决方案的一些注意事项。

1.  从 Jdk7u4 开始，JavaFX 与适用于 Mac 和 Windows（XP、Vista、7、32 和 64 位）的 jdk 捆绑在一起。
2.  JavaFX 可以嵌入到 Swing 应用程序中。
3.  JavaFX 包括本机库，但任何 Java 框架都需要本机库才能做好视频。
4.  JavaFX SDK 包含一个全面的部署工具包和/或包含生成基于 jnlp 的部署的能力。
5.  JavaFX 2.1 支持 vp6 编码的 flvs（旧格式）以及一些更现代且经常使用的编码格式，例如 mp4/aac/mp3。
6.  JavaFX 仅支持有限的媒体编解码器和容器格式，例如，如果您的计算机上安装了编解码器，并且可以播放以该格式编码的文件，例如 chrome、windows 媒体播放器或 flash，但不保证相同的文件将在 JavaFX 中播放。
7.  在 XP 或 Linux 上播放 mp4 需要用户手动安装必要的编解码器，但其他平台（osx、win7、vista）不需要手动安装 mp4 编解码器。
8.  在 Mac 上使用 JavaFX 需要用户使用 OpenJDK 7 for Mac，而不是 Apple JDK。
9.  JavaFX 对 jnlp 在 Mac 上启动的应用程序的支持要到今年晚些时候（2012 年）才可用，Linux 也是如此。
10.  您可能可以将整个 JavaFX 平台与您的应用程序捆绑在 jnlp 中（尽管我还没有看到有人这样做）。
11.  jnlp 部署的推荐方法是向 jnlp 添加最小 JavaFX 环境的规范，并让 JavaFX 部署工具包和 webstart 负责确保它存在并正确安装在用户的计算机上。
12.  Swing 和 JavaFX 之间的交互需要一些不便和关心线程，并且 Swing 和 JavaFX 之间的应用程序启动代码也略有不同。有些人在论坛上抱怨过这个问题，大多数人似乎没有太多问题。
13.  不管是好是坏（我相信更好），JavaFX 可能是唯一来自 Oracle 的媒体和客户端开发框架，它正在接受持续的主要开发和新功能。
14.  最终（今年或明年）JavaFX 将包含在所有运行现代 Java SE 版本的主要消费者平台的所有新 Java 运行时中。
15.  Oracle 和第 3 方对 JavaFX 开发的社区支持（我相信）很好。

这是一个播放视频的示例 JavaFX 应用程序：

```
import javafx.application.Application;
import javafx.scene.*;
import javafx.scene.media.*;
import javafx.stage.Stage;

public class VideoPlayerExample extends Application {
  public static void main(String[] args) throws Exception { launch(args); }
  @Override public void start(final Stage stage) throws Exception {
    final MediaPlayer oracleVid = new MediaPlayer(
      new Media("http://download.oracle.com/otndocs/products/javafx/oow2010-2.flv")
    );
    stage.setScene(new Scene(new Group(new MediaView(oracleVid)), 540, 208));
    stage.show();

    oracleVid.play();
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T22:31:37.133

尽管我在 JMF 格式兼容性方面没有任何问题，但您可以查看 JavaFX，它旨在成为 Flash 的竞争对手，因此应该支持所有媒体格式和编解码器。您还可以使用 JNI/JNA 将 Flash 播放器嵌入到 Java 应用程序中，但这似乎太复杂了。我建议您从 JMF 开始，仅在您确实遇到问题时才寻找其他解决方案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T13:03:48.843

> ..已经尝试过 JMF，但与其他框架相比，我认为格式兼容性相对较差。

您对现代编解码器缺乏支持是正确的，但它适用于旧编解码器。如果出现以下情况，这可能是一个可行的选择：

1.  您可以控制格式（而不是用户在其中打开“任何旧视频”）。你显然是这样做的。
2.  带宽不是一个大问题。更现代的编解码器显着改善了压缩。

虽然使用本机的 JMF 的“性能包”版本支持更多格式，但核心 Java JMF API 也提供了一些基本格式。

# c++ - 如何防止 Box2D 中移动运动平台和动态体之间的抖动？

> ID：10440153
> 
> 赞同：1
> 
> 时间：2012-05-03T22:26:30.457
> 
> 标签：c++, box2d, game-physics

我有一个移动平台（运动体），它从它的初始位置上升。

```
b2BodyDef platformDef;
platformDef.type = b2_kinematicBody;
platformDef.linearVelocity = b2Vec2(0.f, 0.5f); 
```

现在我有一个玩家控制的球（动态体），它可以在上述平台上骑行从它的位置上升。这是球的数据：

```
b2BodyDef ballDef;
ballDef.type = b2_dynamicBody;
ballDef.fixedRotation = true;
b2Body *ball = b2dWorld.CreateBody(&ballDef);
b2FixtureDef fixDef;
fixDef.shape = &shapeCircle;  // a simple b2CircleShape with radius 0.6m
fixDef.density = 1.f;
fixDef.friction = 0.2f;
fixDef.restitution = 0.3f;
ball->CreateFixture(&fixDef); 
```

现在球正确地在移动平台上移动，而在整个移动过程中球的身体会有轻微的抖动，即它不断地与它正在移动的平台发生碰撞。我尝试将球的恢复原状设置为0，但无济于事。

如果需要此细节，系统的像素与米的比率为 0.02。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-12T13:19:41.783

我相信最好的解决方案是两个车身之间的两个焊接接头之一。

如果身体在平台上是“静止的”（不是左右移动），那么当球在平台上时，在球和平台之间创建一个焊接接头。

如果球可以左右移动，则在两者之间创建一个棱柱接头，接头的方向平行于平台。

我使用了类似的技术让蜘蛛在小行星周围行走（[这里](http://nonlinearideas.com/state-of-the-art/)）。

**真正的想法是物理引擎中有一些工具，您可以使用这些工具来真正增强并不总是在模拟中发挥作用的幕后体验。使用情况的逻辑来改变动态。**

在这种情况下，在平台上或平台外意味着您必须连接或断开其他机制才能提供更好的体验。

引擎可以处理它。在上面的示例中，用于绕天体行走的关节在小行星边界外壳的每个顶点处都发生了变化。

# iphone - 试图创建 pList 但它没有被创建

> ID：10440156
> 
> 赞同：0
> 
> 时间：2012-05-03T22:26:37.530
> 
> 标签：iphone, ios, plist

我已经设置了一个用于创建 pList 的对象类，但是我遇到了一些问题。我在课堂上使用单例设计模式，所以我只需要在任何时候处理它的一个实例......

出于某种奇怪的原因，它已经停止正常工作，对于我的生活，我无法弄清楚为什么，如果它与单例设计模式有关，我会感到很痛苦。

```
#pragma mark Singleton Methods
+ (id)sharedManager {
    @synchronized(self) {
        if (sharedMyManager == nil)
            sharedMyManager = [[self alloc] init];
    }
    return sharedMyManager;
}
- (id)init {
    if (self = [super init]) {

        // get paths from root direcory (where we will store and fine our plist in the future)
        NSArray *paths = NSSearchPathForDirectoriesInDomains (NSDocumentDirectory, NSUserDomainMask, YES);
        // get documents path
        NSString *documentsPath = [paths objectAtIndex:0];
        // get the path to our plist file
        NSString *plistPath = [documentsPath stringByAppendingPathComponent:@"EngineProperties.plist"];

        NSLog(@"pList path = %@", plistPath);

        // check to see if .plist exists in documents
        if (![[NSFileManager defaultManager] fileExistsAtPath:plistPath])
        {
            // if not in documents, get property list from main bundle
            plistPath = [[NSBundle mainBundle] pathForResource:@"EngineProperties" ofType:@"plist"];

        }

        // read property list into memory as an NSData object
        NSData *plistXML = [[NSFileManager defaultManager] contentsAtPath:plistPath];
        NSString *errorDesc = nil;
        NSPropertyListFormat format;
        // convert static plist into dictionary object (this is where any saved values get put into 
        savedEnginePropertiesDict = (NSMutableDictionary *)[NSPropertyListSerialization propertyListFromData:plistXML mutabilityOption:NSPropertyListMutableContainersAndLeaves format:&format errorDescription:&errorDesc];

        //Load all current values of the property list thats been put into savedEnginePropertiesDict into their variables
            if (savedEnginePropertiesDict && [savedEnginePropertiesDict count]){
                // assign values
                self.sig = [savedEnginePropertiesDict objectForKey:@"Signature"];
                self.ver = [savedEnginePropertiesDict objectForKey:@"Version"];
                self.num = [savedEnginePropertiesDict objectForKey:@"Number"];
                self.dataV = [savedEnginePropertiesDict objectForKey:@"Data"];
                self.cache = [savedEnginePropertiesDict objectForKey:@"Cache"];

        }
    }
    return self;
} 
```

这应该是创建plist应该驻留的目录，然后如果它在那里读取它，否则创建它..但它没有做任何事情..我完全不知道为什么它不工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T22:31:50.727

您设置值，但不写入文件。

```
[savedEnginePropertiesDict writeToFile: plistPath atomically: YES]; 
```

# java - 我有存储在 mysql 中的名称如何在我的 android 应用程序中显示该信息

> ID：10440158
> 
> 赞同：1
> 
> 时间：2012-05-03T22:26:43.417
> 
> 标签：java, android, mysql

我的 mysql 数据库中存储了名称，我创建了一个名为 users 的表，当您登录到我的 android 应用程序时，您可以将数据输入到该表中。如何显示在 android 应用程序中添加的数据库条目的名称。我希望当我单击搜索用户时，它会显示添加到数据库中的名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T08:42:15.300

简而言之，您需要将 mysql jdbc 驱动程序加载到您的 android 应用程序中。我不确定这是否可以做到。据我所知，Android 不支持开箱即用地连接到 MySQL 服务器。

如果您可以通过将 mysql jdbc 驱动程序 jar 添加到应用程序来将 mysql 驱动程序包含到您的 android 应用程序中，则您需要将 MySQL 服务器直接公开到 Internet，以便 Android 设备能够直接与服务器通信。注意 通过将您的 MySQL 服务器直接放在 Internet 上，它是公开邀请黑客等尝试侵入您的数据库。因此，不建议您将 MySQL 服务器直接暴露在 Internet 上。

最好的解决方案是创建您的设备连接到的各种网络服务或服务。然后，此服务从数据库中检索数据并将其返回到您的设备。

有关更多答案，请参阅此 SO question。

[在 android 模拟器中加载 mysql 驱动程序](https://stackoverflow.com/questions/2235951/load-the-mysql-driver-in-android-emulator)。

在我的例子中，我开发了一个简单的 Camel IP 服务器，它位于我的设备和 MySQL 数据库之间。我使用 google 协议缓冲区创建了一个非常简单的 RPC 协议，然后我可以通过该服务将文件和数据上传到 mysql，然后还可以通过该服务从 MySQL 服务器下载和显示数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T09:04:48.130

遵循本教程，您将学习如何准确地做到这一点

[都图 Mysql/android](http://www.erlem-technologies.com/fr/20-blog-blog/59-android-connexion-a-mysql-a-laide-de-php)

# vb.net - 使用 BindingNavigator 的属性

> ID：10440161
> 
> 赞同：1
> 
> 时间：2012-05-03T22:27:07.880
> 
> 标签：vb.net, winforms

我制作了一个表单，可以在其中使用`BindingNavigator`-control 滚动浏览 SQL 中的某些行。

现在我想在我的代码中使用这个控件的属性。是否有可能检查它是否已到达最后一页/行？我想要一个按钮然后显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T23:00:45.563

您可以通过侦听使用的`PositionChanged`事件来实现这`BindingSource`一点`BindingNavigator`：

```
Private Sub myBinding_PositionChanged(ByVal sender As Object, ByVal e As EventArgs) Handles myBinding.PositionChanged
  If myBinding.Position = myBinding.Count - 1 Then
    MessageBox.Show("Last One!")
  End If
End Sub 
```

# .net - 在进程与作业对象上设置优先级类和处理器亲和性

> ID：10440163
> 
> 赞同：0
> 
> 时间：2012-05-03T22:27:24.793
> 
> 标签：.net, process, affinity

在 .NET 中，所有线程和子进程的处理器关联和优先级类都可以使用`Process.ProcessorAffinity`和`Process.PriorityClass`属性进行设置。使用[作业对象](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684147%28v=vs.85%29.aspx)似乎可以使用`JOB_OBJECT_LIMIT_AFFINITY`和`JOB_OBJECT_LIMIT_PRIORITY_CLASS`标志设置相同的对象。

那么，在作业对象和流程上设置上述某些限制有什么区别？

**编辑：**一旦我将作业对象的限制设置为较低的值，低权限进程仍然可以覆盖它们。这是否意味着工作对象限制没有得到加强？如何限制低权限帐户/进程覆盖它们？

**设置什么：**

```
 JOBOBJECT_BASIC_LIMIT_INFORMATION jobBasicInfo = {0};
jobBasicInfo.LimitFlags = JOB_OBJECT_LIMIT_AFFINITY;
jobBasicInfo.Affinity = (ULONG_PTR) (1);  // affinitize to processor 1
jobBasicInfo.LimitFlags = JOB_OBJECT_LIMIT_SCHEDULING_CLASS;
jobBasicInfo.SchedulingClass = 4;         // below normal priority class
SetInformationJobObject( hJob,
      JobObjectBasicLimitInformation,
      &jobBasicInfo,
      sizeof(jobBasicInfo)); 
```

**低权限进程如何覆盖它：**

```
 Process process = Process.GetCurrentProcess();
process.PriorityClass = ProcessPriorityClass.High;
// all processors mask
process.ProcessorAffinity = new IntPtr((int)Math.Pow(2, Environment.ProcessorCount) - 1); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T22:43:47.257

有一个很大的区别和一些特殊情况。最大的区别是对作业对象的限制就是：*限制*，而设置例如进程优先级总是立即生效。将进程优先级*限制为高（作业对象）和将其**设置*为高（ ）是不一样的`PriorityClass`。当一个进程试图给自己比作业对象允许的更大的回旋余地时，就会出现特殊情况。在这种情况下，相关的 API 调用返回成功但实际上什么都不做，这不是正常行为。

# python - 如何在 CentOS 5.8 上从源代码编译 mercurial

> ID：10440165
> 
> 赞同：1
> 
> 时间：2012-05-03T22:27:41.957
> 
> 标签：python, mercurial, centos5

我想在 CentOS 5.8 上针对已编译的 python2.6 从源代码（截至目前为 2.2 版）编译 mercurial（服务器）。步骤是什么。

编辑解决方案：

`which python`CentOS 的默认 python 安装 2.4 工作正常，所以我最终编译了mercurial .6)，有一些重要的步骤可以让它工作：

下载

```
cd /tmp
wget https://www.mercurial-scm.org/release/mercurial-2.2.tar.gz
tar xvzf mercurial-2.2.tar.gz 
```

编译安装

```
make all PYTHON='/usr/bin/python2.4'
make install PYTHON='/usr/bin/python2.4' 
```

注意： make install 基本上运行：

```
python setup.py build
python setup.py  install --root="/" --prefix="/usr/local" --force 
```

所以它强制 mercurial 将库安装在 /usr/local 中，它把它们放在 /usr/local/lib/python2.4/site-packages 中，所以你必须在 hgwebdir.cgi 中改变一些东西

取消注释：

```
#import sys
#sys.path.insert(0, "/path/to/python/lib") 
```

并替换为：

```
import sys
sys.path.insert(0, "/usr/local/lib/python2.4/site-packages") 
```

# php - 如何在 div 中加载 CKEditor？

> ID：10440181
> 
> 赞同：0
> 
> 时间：2012-05-03T22:29:17.050
> 
> 标签：php, jquery, html, css, ckeditor

我如何在里面加载 Ckeditor`<div>`我试着`<div>`像这样强制里面的 ckeditor

```
 $("#divID").load("message.php"); 
```

但这不起作用，无论如何要加载一个包含 ckeditor 的 php 文档`<div>`吗？当我将其他 php 文档加载到里面时，它可以正常工作`div`吗？

它也与`textboxlist-jquery`它不加载相同，但与这两个相同的文档中的按钮有效。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T23:04:25.787

这是你想要达到的目标吗？

```
jQuery.get("message.php",function(data){
  jQuery("#divID").html(data).find('textarea').ckeditor();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T22:33:56.830

```
if(window.XMLHttpRequest){
    xmlhttp = new XMLHttpRequest();
    xmlhttp.open("GET","file.php",false);
    xmlhttp.send(null);
}else{
    xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
    xmlhttp.open("GET","file.php",false);
    xmlhttp.send();
}
$("#divid").innerHTML=xmlhttp.responseText; 
```

# php - AJAX 请求未获得任何信息

> ID：10440189
> 
> 赞同：0
> 
> 时间：2012-05-03T22:30:09.713
> 
> 标签：php, javascript, ajax

这是我的 PHP 文件代码：

```
<?php
require('config.inc'); //Init DB.

$current_user_id = $_GET['uid']; //Set User ID From AJAX GET.

mysql_query("USE social-network"); //Set MySQL DB.

$userFavs = "SELECT subscribee_id FROM subscribe WHERE subscriber_id = '" . $current_user_id . "'"; //Get people user is subscribed to.

$query="SELECT * FROM posts WHERE (post_owner_id IN ($userFavs) OR post_owner_id = '" . $current_user_id . "') ORDER BY id DESC"; //Select posts by user AND by people user is subscribed to.

$result=mysql_query($query); //Do the query.

$num=mysql_numrows($result); //Get number of rows in query.

$i=0; //Display selected posts.
while ($i < $num) {

$owner_id=mysql_result($result,$i,"post_owner_id");
$content=mysql_result($result,$i,"content");
$date=mysql_result($result,$i,"date");

$poi_query=mysql_query("SELECT firstname, lastname, profile_picture FROM `social-network`.`users` WHERE id = '" . $owner_id . "'") or die(mysql_error());
$post_firstname=mysql_result($poi_query, 0, "firstname");
$post_lastname=mysql_result($poi_query, 0, "lastname");
$post_profile_picture=mysql_result($poi_query, 0, "profile_picture");
?>

      <div class="post">
        <h1 class="post-title"><a href="profile.php?user=<?php echo $owner_id; ?>"><?php echo $post_firstname; ?> <?php echo $post_lastname; ?></a></h1>
        <p class="content"><?php echo $content; ?></p>
        <p class="details"><?php echo $date; ?></p>

      </div>

      <?php
$i++;
}
?> 
```

这是我的 JS AJAX 请求：

```
function loadPosts()
{
xmlhttp=new XMLHttpRequest();
xmlhttp.open("GET","PHP/news-feed.php?uid=<?=$current_user_id?>",true);
xmlhttp.send();
document.getElementById("posts").innerHTML=xmlhttp.responseText;
} 
```

我页面上的帖子部分下没有显示任何内容。我究竟做错了什么？并且 PHP 代码经过测试，当我直接将它包含在帖子页面中时它就可以工作。我正在尝试做的事情：[带 Reload 的 PHP Newsfeed](https://stackoverflow.com/questions/10439557/php-newsfeed-with-reload)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T22:33:18.563

id为“posts”的元素在哪里？，我只能看到一个带有post类的div标签

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T22:38:28.283

您的 ajax 有一个问题是它假设是同步的：您期望在发送请求后立即得到结果，但您应该在事件上附加一个事件处理程序`onreadystatechange`。

如果您对 ajax 没有任何经验，我建议您使用像[jQuery](http://api.jquery.com/jQuery.ajax/)这样的库来为您处理。

除此之外，我也看不到您在哪里调用 ajax 函数。

# matlab - 如何比较两个不同维度的向量以获得逻辑数组？

> ID：10440194
> 
> 赞同：0
> 
> 时间：2012-05-03T22:30:17.887
> 
> 标签：matlab

我有两个不同尺寸的向量。为了简单起见，让我们说

```
A = rand(30, 1);
B = rand(10, 2); 
```

基本上，我想要这个：如果`A(i,1)<=B(i,1) & A(i,1)>=B(i,2)`是真的，那么做某事。我尝试使用 for 语句，例如 for i=size(A)，显然，由于两个维度，存在问题。如果有人知道如何解决这个问题，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T22:54:34.227

您可以执行以下操作

```
%# find out which array is longer
lenA = size(A,1);
lenB = size(B,1);

minLength = min(lenA,lenB);

%# do vectorized comparison
trueOrFales = all(A(1:minLength)<=B(1:minLength,1)) && ...
    all(A(1:minLength)>=B(1:minLength,2)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T22:40:16.500

你可能想做这样的事情

```
for i = min(size(A), size(B))
   if  A(i,1)<=B(i,1) & A(i,1)>=B(i,2) 
```

然后做事。

对Matlab不是很熟悉，懒得上手；希望能帮助到你。

# wxwidgets - 如何从 wxAuiManager 中找到 wxAuiToolBarItem？

> ID：10440204
> 
> 赞同：3
> 
> 时间：2012-05-03T22:31:14.923
> 
> 标签：wxwidgets, wxauitoolbar

我正在尝试使用 wxAuiToolBar 类来替代现有的 wxToolbar。

我的初始化工作正常——我什至可以将嵌入/矢量化的 .png 文件设置为项目的位图，这真的很酷——但我希望用户能够指定他们的工具栏大小想要（16x16、22x22 或 32x32）。我*认为*这意味着为每个工具栏项调用 wxAuiToolBarItem.SetBitmap()，然后调用 wxToolBar.Realize() 来重绘更改。如果有更好的方法可以纠正我！

例如，我有一个标准的文件工具栏，带有新建/打开/保存/打印按钮。这些被添加到成员 wxAuiManager 中，如下所示：

```
auiFileToolBar = new wxAuiToolbar(pFrame, ID_AUIFILETOOLBAR, wxDefaultPosition, wxDefaultSize, wxAUI_TB_DEFAULT_STYLE);
auiFileToolBar->AddTool(ID_TBI_FILE_NEW, _("New"), wxNullBitmap, wxNullBitmap, wxITEM_NORMAL, wxEmptyString, wxEmptyString, NULL);
// ... other toolbar items
auiFileToolBar->Realize();
m_AuiManager->AddPane(auiFileToolBar, wxAuiPaneInfo().Name(_T("File")).ToolbarPane().Caption(_T("File")).Layer(10).Top.Gripper(false)); 
```

既然我已经完成了所有设置，那么在给定与框架关联的成员 wxAuiManager (m_AuiManager) 的情况下，我如何获得给定的 ToolBarItem？或者有没有更好的方法来调整工具栏的大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T00:59:20.907

好的，所以也许这是一个由两部分组成的问题：

1.  创建 wxAuiToolBarItem 后如何获取它？
2.  创建工具栏后更改其大小的最佳方法是什么？

通过使用 wxAuiToolBar->FindTool() 方法，我能够获得 wxToolBarItem。我将工具栏作为成员变量，这使得访问变得相当容易。代码看起来像这样：

```
wxAuiToolBarItem *tbi;
tbi = pMainFrame->m_AuiToolbar-FindTool(ID_TBI_FILE_NEW);
// do something with the toolbar item
tbi->SetBitmap(random_bitmap_thingy); 
```

对于问题的第二部分——在大工具栏和小工具栏之间切换的最佳实践问题——我不确定我是否有答案。现在我有一个调用的方法：

```
pMainFrame->m_AuiToolbar->ClearTools(); 
```

然后调用 m_AuiToolbar->AddTool() 并将新位图作为参数传递给 AddTool() 方法。这似乎确实有效，因为我可以毫无问题地在小位图和大位图之间切换。这是最好的方法吗？不知道。

# html - 将剪贴板粘贴到 Outlook 电子邮件中时，如何让特殊的 Unicode 字符出现？

> ID：10440206
> 
> 赞同：1
> 
> 时间：2012-05-03T22:31:36.827
> 
> 标签：html, outlook, office-interop

通过复制到剪贴板（感谢 Mike Stall 的 .NET 调试博客）并粘贴到 Outlook 电子邮件正文中，我能够成功嵌入 HTML 文本。

但是，使用 Word.Selection 的 PasteAndFormat()、PasteSpecial() 或 Past() 方法无法正确粘贴“特殊”Unicode 字符。除非我有这样的文字：“哦，我的上帝”，否则一切都很完美。

在 Paste() 操作之前，我可以获取剪贴板文本并看到正确的文本已放入缓冲区，并且我知道字体支持这些字符，因为我可以复制并粘贴到电子邮件正文中的嵌入 HTML在我的代码执行之后（看起来不错），但我似乎无法将带有这些“特殊字符”的文本粘贴（）到 Word.Selection 中。我正在使用 C#、Visual Studio 2010 和 Outlook 2010，仅供参考。

提前感谢您的帮助。

-埃里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T20:30:08.380

我认为最简单的答案是确保您转义 html 中的所有非 ascii 字符。这只是避免了复制/粘贴 unicode 字符数据的潜在问题。

我不知道您是如何开始构建 HTML 的，但所有文本和属性值都需要使用以下方法进行编码。

```
public static string HtmlEncode(string text, bool isAttribute)
{
    if (text == null)
        return null;

    StringBuilder sb = new StringBuilder(text.Length + 100);

    int len = text.Length;
    for (int i = 0; i < len; i++)
    {
        char ch = text[i];

        switch (ch)
        {
            case '\r':
            case '\n':
                if (isAttribute)
                    goto default;
                sb.Append(ch);
                break;
            case '<':
                sb.Append("&lt;");
                break;
            case '>':
                sb.Append("&gt;");
                break;
            case '&':
                sb.Append("&amp;");
                break;
            default:
                if (ch < 32 || ch > 127 || ch == '\'' || ch == '"')
                {
                    sb.Append("&#");
                    sb.Append(((int)text[i]).ToString(CultureInfo.InvariantCulture));
                    sb.Append(";");
                }
                else
                    sb.Append(text[i]);
                break;
        }
    }
    return sb.ToString();
} 
```

# html - 为什么 jQuery 不能处理 jQuery 通过 Ajax 添加到页面的一段 html？

> ID：10440208
> 
> 赞同：0
> 
> 时间：2012-05-03T22:31:39.243
> 
> 标签：html, dom, jquery

下面的代码只是通过 Ajax 提交一个表单，并将 addNewUser.php 脚本的结果附加到一个小的弹出窗口中。

```
//activate the signup submit button
$('#button_signup_submit').click(function() {

    document.getElementById("popup_signup").style.display = "none";
    document.getElementById("popup_signup_step_two").style.display = "block";
    //submit the form info via ajax to addNewUser.php
    $.ajax({
         type: "POST",
         url: "ajax/addNewUser.php",
         data: { 
            username: document.forms["form_signup"]["username"].value,
            password: document.forms["form_signup"]["password"].value
         },
         datatype: "html",
         success: function(data){

                    var jqObj = jQuery(data);
                    $('#popup_signup_step_two').append(jqObj)
                }
    });

}); 
```

我可以得到上面的脚本将 ajaxed html 附加到原始网页中没有问题......但是当我去使用我的第二段代码时：

```
//activate the second signup page's return button
$('#return_to_signup_form_from_ajax_popup').click(function() {
    alert("HEY");
    //erase innerHtml of popup_signup_step_two
    document.getElementById("popup_signup_step_two").innerHTML = "";
    document.getElementById("popup_signup_step_two").style.display = "none";

    //show the original signup form again, should contain user's original values
    document.getElementById("popup_background").style.display = "block";
    document.getElementById("popup_login").style.display = "block";

}); 
```

...这是一个与新添加的 html 一起使用的 jQuery 片段...没有任何反应。当用户忘记输入用户名或密码并通过 ajax 向他们提供此消息时，第二段代码适用：

```
<p>Go <span id="return_to_signup_form_from_ajax_popup">back</span> and enter a username and password.</p> 
```

我认为这一切都与 DOM 有关吗？但最终我不知道。如果有人能指出我要寻找什么的方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T22:36:11.850

如果您的`$('#return_to_signup_form_from_ajax_popup')`点击处理程序绑定在 document.ready 上，您将需要改用事件委托。事件委托用于将事件绑定到当前和**未来的**元素。

有关事件委托的更多信息，请参阅[http://api.jquery.com/on/](http://api.jquery.com/on/)和[http://api.jquery.com/category/deferred-object/](http://api.jquery.com/category/deferred-object/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T22:35:50.353

好吧，只要您确定响应会返回正确的 html - 您应该没问题。我建议将您的点击处理程序更改为委托处理程序 - 然后您不必担心它是在将 ajax'd html 添加到实时 dom 之前还是之后初始化的。

编辑：更新为使用最新的 jquery`on`方法。(http://api.jquery.com/on/)

```
$('#containerElementThatAjaxdDataWillGoInto').on('click','#return_to_signup_form_from_ajax_popup', clickHandler ); 
```

编辑：这是进一步澄清的尝试。

您在新的 html 中进行 ajaxing，并将其附加到`#popup_signup_step_two`. 惊人的。所以这个新的 html 也有一个按钮，需要有一个与之关联的处理程序。为此，我们需要委托一个事件处理程序，`#popup_signup_step_two`以便我们可以在该 dom 元素内监听我们想要的任何元素的所有点击。

```
$('#popup_signup_step_two').on('click', '#return_to_signup_form_from_ajax_popup', function() {
    // do stuff here
}); 
```

现在您已经完成了这个设置（在文档中准备好了），对其中元素的任何点击`#return_to_signup_form_from_ajax_popup`都`#popup_signup_step_two`将调用您的点击处理函数。现在在您当前的点击处理程序中，您设置`#popup_signup_step_two`为`display = none`. 因此，如果您想再次执行该操作，您需要确保将元素设置为`display` `block`.

我希望这会有所帮助，如果我们仍然在某个地方想念彼此，现在是时候开始将东西放入[jsfiddle](http://jsfiddle.net/)或提供链接了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T22:35:49.960

而不是使用 $.ajax() 使用 $('#popup_signup_step_two').load()

检查[here](http://api.jquery.com/load/)以获取有关方法的参考

# android - 检查在 Android 中运行的是哪个语言环境

> ID：10440212
> 
> 赞同：3
> 
> 时间：2012-05-03T22:32:20.443
> 
> 标签：android, locale

如何以编程方式检查设备上当前正在运行的区域设置？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T22:43:55.923

`Locale.getDefault().toString()` 或者 `context.getResources().getConfiguration().locale.getDisplayName()`

两者都将返回字符串

# object - 应用程序对象不会共享

> ID：10440217
> 
> 赞同：0
> 
> 时间：2012-05-03T22:32:50.920
> 
> 标签：object, singleton, global, android

我的应用程序对象有问题。我目前正在使用服务来模拟来自电子游戏板的传入数据。此数据表示为 2D 布尔数组。每五秒服务使用应用程序对象的一个​​方法来更新数组（setDetectionMap()）。我的主 Activity 中的线程正在使用另一种方法 (getDetectionMap()) 读取此数组。经过一些调试后，我几乎可以肯定主 Activity 没有看到变化。这是我的应用程序对象的代码：

```
 public class ChessApplication extends Application{

    private static ChessApplication singleton;
    private boolean[][] detectionMap;

    public static ChessApplication getInstance(){
        return singleton;
    }

    @Override
    public void onCreate() {
        super.onCreate();
        singleton=this;
        detectionMap=new boolean[8][8];
    }

    public boolean[][] getDetectionMap(){
        return detectionMap;
    }
    public void setDetectionMap(boolean[][] newMap){
        detectionMap=newMap;
        Log.d("Chess Application","Board Changed");
    }
} 
```

我检查了我的清单，我重写了我的对象声明十几次，我添加了 LogCat 标记以确保代码在我认为应该执行的时候执行，我什至实现了所谓的冗余单例代码. 有什么想法可能导致这种情况吗？顺便说一句，谁能告诉我如何在活动运行时查看变量状态？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T23:49:16.537

更新发生后，您的 Activity 是否调用 getDetectionMap() 来获取新地图？

因为否则，它会保留对旧 boolean[][] 数组的引用，而 setDetectionMap(...) 实际上并没有更新当前数据结构，它只是更新“detectionMap”变量以指向不同的数据结构。因此，您的主要活动在下一次调用 getDetectionMap 之前不会知道交换。

简单修复：在 setDetectionMap 中，手动将值从 newMap 复制到 detectionMap。或者，更新 Activity 的引用，使其查看正确的地图。

另一个与原始问题完全无关的观察结果：在 Android 开发过程中覆盖 Application 是非常不寻常的，并且通常被认为是“代码异味”，除非您有充分的理由这样做*。*在这种情况下，我想这是为了让您可以在服务和 Activity 之间进行通信，但是您创建了一个中间人，而中间人并不是完全必要的。 这是一个关于如何在两者之间直接通信[的有用 SO 线程:)](https://stackoverflow.com/a/2463746)

# python - 查找文件中的哪些行包含某些字符

> ID：10440219
> 
> 赞同：5
> 
> 时间：2012-05-03T22:33:01.220
> 
> 标签：python, string, search

有没有办法找出一个字符串是否包含python集合中的任何一个字符？

使用单个字符很简单，但我需要检查字符串是否包含一组坏字符中的任何一个。

具体来说，假设我有一个字符串：

```
s = 'amanaplanacanalpanama~012345' 
```

我想看看字符串是否包含任何元音：

```
bad_chars = 'aeiou' 
```

并在 for 循环中为文件中的每一行执行此操作：

```
if [any one or more of the bad_chars] in s:
    do something 
```

我正在扫描一个大文件，所以如果有更快的方法，那将是理想的。此外，并非必须检查每个坏字符——只要遇到足以结束搜索的字符即可。

我不确定是否有内置函数或简单的方法来实现它，但我还没有遇到任何东西。任何指针将不胜感激！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-03T22:34:40.193

```
any((c in badChars) for c in yourString) 
```

或者

```
any((c in yourString) for c in badChars)  # extensionally equivalent, slower 
```

或者

```
set(yourString) & set(badChars)  # extensionally equivalent, slower 
```

“只要遇到一个就足以结束搜索。” - 如果您使用第一种方法，这将是正确的。

您说您关心性能：除非您处理大量数据，否则性能不应该成为问题。如果遇到问题，可以尝试：

* * *

*正则表达式*

**编辑**以前我在这里写了一个关于使用正则表达式的部分，通过`re`模块，以编程方式生成一个由单个字符类`[...]`和 using组成的正则表达式，`.finditer`但需要注意的是，在一切可能无法正常工作之前放置一个简单的反斜杠。确实，经过测试，是这样的，我绝对不会推荐这种方法。使用它需要对正则表达式字符类的整个（稍微复杂的）子语法进行逆向工程（例如，您可能有字符 like`\`后跟`w`, like `]`or `[`, or like `-`，而仅仅转义一些 like`\w`可能会给它一个新的含义）。

* * *

*套*

根据操作是 O(1) 还是 O(N) ，如果您有很多 badChar `str.__contains__`，首先将您的文本/行转换为一组以确保操作是 O(1) 可能是合理的：`in`

```
badCharSet = set(badChars)
any((c in badChars) for c in yourString) 
```

`any((c in set(yourString)) for c in badChars)`（根据python编译器的智能程度，可以使它成为一个单行代码）

* * *

*您真的需要逐行执行此操作吗？*

对整个文件 O(#badchars) 执行一次此操作可能比对文件 O(#lines*#badchars) 中的每一行执行一次更快，尽管渐近常数可能无关紧要。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-03T22:35:25.217

使用python的`any`函数。

```
if any((bad_char in my_string) for bad_char in bad_chars):
    # do something 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-03T22:48:08.167

这应该非常有效和清晰。它使用集合：

```
#!/usr/bin/python

bad_chars = set('aeiou')

with open('/etc/passwd', 'r') as file_:
   file_string = file_.read()
file_chars = set(file_string)

if file_chars & bad_chars:
   print('found something bad') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T22:49:15.130

`any`这个正则表达式的速度是我最小测试的两倍。您应该使用自己的数据进行尝试。

```
r = re.compile('[aeiou]')
if r.search(s):
    # do something 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-03T22:39:33.427

以下 Python 代码应打印出 bad_chars 中的任何字符（如果它存在于 s 中）：

```
for i in vowels:
    if i in your charset:
        #do_something 
```

您还可以使用以下示例使用 python 内置 any：

```
>>> any(e for e in bad_chars if e in s)
True 
```

# perl - Perl - 图像均匀区域的比率

> ID：10440221
> 
> 赞同：0
> 
> 时间：2012-05-03T22:33:20.200
> 
> 标签：perl, image-processing

我想检查图像是否有很多同质区域。因此，我想获得某种图像值，该值根据同质区域的数量/大小声明图像的比率（例如，该值的范围可以从 0 到 5）。

除了值之外，还可以有某种分类。

[许多同质区域 -> 价值/等级 5 ；少数同质区域 -> 值/类 0]

我想在 perl 中做到这一点。是否有包/功能或类似的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T02:50:58.067

您想要的似乎是我不熟悉的图像处理研究领域。但是，[GraphicsMagick 的 mogrify 实用程序](http://www.graphicsmagick.org/mogrify.html)有一个[-segment 选项](http://www.graphicsmagick.org/mogrify.html#mog-segm)：

> 用于`-segment`通过分析颜色分量的直方图并使用模糊 c 均值技术识别同质单元来分割图像。尺度空间过滤器分析图像的三个颜色分量的直方图并识别一组类别。每个类的范围用于通过阈值粗略分割图像。与每个类别相关的颜色由特定类别范围内所有像素的平均颜色决定。最后，使用模糊 c 均值技术将任何未分​​类的像素分配给最接近的类别。

我不知道这对你有没有用。您可能需要访问图书馆，并阅读一些研究。您也可以通过[PerlMagick](http://www.graphicsmagick.org/perl.html#manipulate-an-image)访问它。但是，它看起来并不能访问内部，而只是根据参数生成图像。

在我的测试中（没有真正理解参数的作用），照片完全变黑，而具有大面积相似颜色的 PNG 图像被减少到一种平均颜色。您是否可以使用该事实来制定衡量标准是一个悬而未决的问题，我不打算调查；-)

# javascript - 使用javascript在数据表（MVC 3）中过滤选择列表

> ID：10440223
> 
> 赞同：0
> 
> 时间：2012-05-03T22:33:29.123
> 
> 标签：javascript, asp.net-mvc-3, datatables

我在尝试向数据表中的过滤器显示元素列表时遇到[问题](http://datatables.net/)。

我遵循[本教程](http://gunbladeiv.blogspot.com.es/2011/06/part-2-mvc-3-and-datatables-with-inline.html)并尝试在数据表中过滤记录。

我有这个代码在我的控制器中返回列表：

```
public JsonResult grupMonedas()
    {
        IList<MONEDA> temp = (from c in db.MONEDA
                                       select c).ToList();

        var result = from c in temp
                     select new String[] { c.NOMBREMONEDA };

        return Json(result);

      } 
```

这是我制作数据表和过滤器的javascript：

```
$(document).ready(function () {

    //Nombre en la tabla donde se ejecutara
    var oCuentas = $('#tablaCuentas').dataTable({
        //Es el que emplementa para trabajar con la pagina
        "bServerSide": true,
        //Metodo el qual se ejecutara
        "sAjaxSource": "Cuentas/CargarCuentas",
        //Mensaje cargado
        "bProcessing": true,
        "bJQueryUI": true,
        //Columnas que cargara
        "aoColumns": [
        //Las columnas tienen que coincidir con la base de datos
                        {"sName": "NUMCUENTA" }, { "sName": "NOMBRECUENTA" }, { "sName": "SALDO" }, { "sName": "Moneda" }
                    ],
        //Mostrar Diferentes opciones
        "bPaginate": true,
        "bLengthChange": true,
        "bFilter": true,
        "bSort": true,
        "bInfo": true,
        "bAutoWidth": true
    }).columnFilter({
        "aoColumns": [
                                        { sSelector: "#numeroFiltro", type: "number" },
                                        { sSelector: "#nombreFiltro", type: "text" },
                                        { sSelector: "#saldoFiltro", type: "number-range" },
                                        { sSelector: "#monedaFiltro", type: "select", values: grupMonedas() }
        ]
    });
});

function validateJSON(x) {
    var orig = x;
    var stgify = JSON.stringify(orig);
    var splitchar = ['\\"', '\',\'', '[', ']', '\"'];
    var joinchar = ['\'', '\':\'', '', '', ''];

    for (i = 0; i < 5; i++) {
        stgify = stgify.split(splitchar[i]);
        tmp = stgify.join(joinchar[i]);
        stgify = tmp;
    }
    stgify = "[" + stgify + "]";
    var finalEdit = stgify;
    //alert(finalEdit); <- returns a ok list of elements :S
    return finalEdit;
}

function grupMonedas() {
    $.post('Cuentas/grupMonedas', {},
    function (data) {
        grupMonedas = validateJSON(data);
    },
    'json/javascript'
    );
    return grupMonedas;
} 
```

但是在选择“Moneda”的过滤器中只放一个“标题”，仅此而已，没有在列表中创建的元素。

提前致谢。

PS：对不起我的英语

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T14:42:07.797

根据`"sAjaxSource": "Cuentas/CargarCuentas"`，您应该调用`CargarCuentas`方法来获取 JSON 结果。它在哪里？

# php - PHP 上传似乎默认为 72 dpi，我需要 300 dpi

> ID：10440224
> 
> 赞同：3
> 
> 时间：2012-05-03T22:33:42.067
> 
> 标签：php, upload, resolution

我有一个页面，仅用于打印，其中的一些图像是通过我拥有的脚本上传的。它似乎总是将图像降低到 72 dpi，不管我设置什么`imagejpeg()`和`imagepng()`质量。

我在 git hub 上使用过我自己的个人脚本和这个

[https://github.com/maxim/smart_resize_image](https://github.com/maxim/smart_resize_image)

我希望获得一些关于将 dpi 保留为原始 300dpi 的指导。

这是我自己的个人脚本

```
if (!empty($_FILES['image']['name'])) //checking if file upload box contains a value
    {   
        $saveDirectory = 'pics/';           //name of folder to upload to
        $tempName = $_FILES['image']['tmp_name'];   //getting the temp name on server
        $fileName1 = $_FILES['image']['name'];      //getting file name on users computer

        $count = 1;
        do{
        $location = $saveDirectory . $_GET['section'] . $count . $fileName1;
        $count++; 
        }while(is_file($location));

        if (move_uploaded_file($tempName, $location))   //Moves the temp file on server
            {                                                           //to directory with real name
                $image = $location;

                // Get new sizes
                list($width, $height, $type) = getimagesize($image);    //gets information about new server image

                $framewidth = 932;
                $frameheight = 354;

                $realwidth = $width;    //setting original width and height
                $realheight = $height;

                // Load
                $file1new = imagecreatetruecolor($framewidth, $frameheight);    //creates all black image with target w/h

                if($type == 2){
                    $source = imagecreatefromjpeg($image);
                    imagecopyresampled($file1new, $source , 0, 0, 0, 0, $framewidth, $frameheight, $realwidth, $realheight);
                }
                elseif($type == 3){
                    $source = imagecreatefrompng($image);    
                    imagecopyresampled($file1new, $source , 0, 0, 0, 0, $framewidth, $frameheight, $realwidth, $realheight);
                }
                else{
                    echo "Wrong file type";
                }

                if($type == 2){

                    //creates jpeg image from file1new for file1 (also retains quality)
                    imagejpeg($file1new, $image,100);
                    //frees space
                    imagedestroy($file1new);
                }
                elseif($type == 3){

                    //creates png image from file1new for file1 (also retains quality)
                    imagepng($file1new, $image,10);
                    //frees space
                    imagedestroy($file1new);
                }
                else{
                    echo "Wrong file type";
                } 
            } 
            else 
            {
                echo '<h1> There was an error while uploading the file.</h1>';
            }
        }
} 
```

编辑：即使 dpi 不是答案，因为我看到 jpgs 具体不会保留该信息。我需要一些方法来保持这些图像非常清晰和清晰。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T23:23:38.790

如果生成图像并使用浏览器打开，浏览器会在渲染前将其缩小到 72dpi。如果您使用 gimp/phptoshop/whatever image editor 打开，它*应该*保持相同的 dpi 质量。虽然在屏幕上，但没有区别，因为您的屏幕是 72 dpi。

没有在新的浏览器上测试过，但在 netscape 和第一个 firefox 版本中就是这样，我认为从那以后它没有改变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T22:39:39.183

此处发布的功能`lorezyra (at) lorezyra (dot) com`：[http](http://www.php.net/manual/es/function.imagejpeg.php#85712) ://www.php.net/manual/es/function.imagejpeg.php#85712可能会成功。

# jquery - 自动显示目标 div

> ID：10440230
> 
> 赞同：0
> 
> 时间：2012-05-03T22:34:33.450
> 
> 标签：jquery, html, target

我知道这可能很愚蠢，但我到处寻找，无法解决这个问题。我试图让这个[http://tympanus.net/Tutorials/CSS3ContentNavigator/index.html#slide-main](http://tympanus.net/Tutorials/CSS3ContentNavigator/index.html#slide-main)自动显示。在没有单击按钮的情况下加载页面。我想将 demo2 自动加载到现有页面中，但希望它在页面加载时显示。谢谢大家

这是 div 标签所涉及的 css：

```
 .cn-slide{
text-align: center;
position: absolute;
left: 0px;
padding-top: 80px;
margin: 0 5%;
width: 90%;
opacity: 0;

}   
.cn-slide:target{
opacity: 1;
z-index: 1000;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T22:46:25.020

你为什么不试试这个：

更新的解决方案！

当页面加载时，这将发送重定向以包含#slide-main。

```
<script>
    $(document).ready(function () {
        location.href='index2.html#slide-main'
    });
</script> 
```

在阅读完此内容后，似乎无法为此触发点击加载。所以这将是唯一的解决方案....我想！

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T22:37:39.043

除了将代码添加到`onLoad()`事件中`onClick()`

**更新：**没关系..

# php - 成功后如何保存facebook访问令牌

> ID：10440233
> 
> 赞同：1
> 
> 时间：2012-05-03T22:34:52.630
> 
> 标签：php, facebook, facebook-apps, facebook-app-requests, php-gettext

当用户允许我的应用程序时，我收到这种类型的成功 url：
[http://localhost/fbapp/app.php#access_token=AAAAALY8OpPABAM67auStdfgdfOdfgdfgdenqEt9QZCGD2a1h3iWFrhmNWqOf8l4a9RQ8tAJCM9y5QbYpsP6sT1g0ZCXDhtZCECZApGb&expires_in=6604](http://localhost/fbapp/app.php#access_token=AAAAALY8OpPABAM67auStdfgdfOdfgdfgdenqEt9QZCGD2a1h3iWFrhmNWqOf8l4a9RQ8tAJCM9y5QbYpsP6sT1g0ZCXDhtZCECZApGb&expires_in=6604)

我正在尝试 $_GET['access_token'] 保存访问令牌，但它不起作用，

我想知道如何从此网址获取访问令牌..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T22:41:59.957

从您对 $_GET 的使用来看，我假设您在谈论 PHP。不幸的是，哈希标签永远不会发送到服务器。它们只存在于客户端，因此您需要使用一些 javascript 来调用 PHP 脚本。

例子：

```
<script type="text/javascript">
var HashSearch = new function () {
   var params;

   this.set = function (key, value) {
      params[key] = value;
      this.push();
   };

   this.remove = function (key, value) {
      delete params[key];
      this.push();
   };

   this.get = function (key, value) {
       return params[key];
   };

   this.keyExists = function (key) {
       return params.hasOwnProperty(key);
   };

   this.push= function () {
       var hashBuilder = [], key, value;

       for(key in params) if (params.hasOwnProperty(key)) {
           key = escape(key), value = escape(params[key]); // escape(undefined) == "undefined"
           hashBuilder.push(key + ( (value !== "undefined") ? '=' + value : "" ));
       }

       window.location.hash = hashBuilder.join("&");
   };

   (this.load = function () {
       params = {}
       var hashStr = window.location.hash, hashArray, keyVal
       hashStr = hashStr.substring(1, hashStr.length);
       hashArray = hashStr.split('&');

       for(var i = 0; i < hashArray.length; i++) {
           keyVal = hashArray[i].split('=');
           params[unescape(keyVal[0])] = (typeof keyVal[1] != "undefined") ? unescape(keyVal[1]) : keyVal[1];
       }
   })();
}

$.ajax({
        type: "POST",
        url: '/store_access.php',
        data: 'access_token='+escape(HashSearch.get('access_token'),
        dataType: "html",
        success: function(response) {
            alert('Access Token Stored');
        }
    });
</script> 
```

我在这里找到了 HashSearch 函数：[Retrieve specific hash tag's value from url](https://stackoverflow.com/questions/3729150/retrieve-specific-hash-tags-value-from-url)

另外，我假设 jquery 在您的脚本的帖子中，但您可以使用任何东西来拨打电话。您甚至可以使用包含令牌的 url 将图像添加到正文。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T01:48:02.250

您正在使用客户端身份验证身份验证 URL 而不是服务器端 URL，这就是为什么您将 access_token 作为 URL 片段的一部分而不是作为 GET 变量获取的原因。

从您的身份验证 URL 中删除 response_type=token ，然后遵循[Server Side Authentication](http://developers.facebook.com/docs/authentication/server-side/)。

# android - ImageView 不在真实设备上显示位图

> ID：10440237
> 
> 赞同：3
> 
> 时间：2012-05-03T22:35:30.123
> 
> 标签：android

我从内部存储或互联网获得位图。当我尝试在 ImageView 中显示它时，它适用于不同的模拟器版本，但不适用于我的 Galaxy S I9000。位图根本不显示。

```
protected void onPostExecute (Bitmap bmp) {
    progressBar.setVisibility(View.INVISIBLE);
    if (bmp != null) {
        imageView.setImageBitmap(bmp);
        imageView.setVisibility(View.VISIBLE);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T20:45:30.633

这很可能是 openGL 不接受大于 2400x2400 的纹理的潜在问题。它不会导致崩溃，但会因不在 ImageView 中显示位图而失败。

您应该始终确保位图在两个维度上都小于 2400，如果它更大，则在将其设置到您的视图之前调整它的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T10:45:56.900

我使用这种方法来帮助我显示图像

```
public static Drawable ToDrawable(Resources r, byte[] encodedString) 
    {
        if (encodedString == null)
            return null;

        Bitmap bmp = BitmapFactory.decodeByteArray(encodedString, 0, encodedString.length);
        Drawable drawable = new BitmapDrawable(r, bmp);
        // bmp.recycle();
        return drawable;

    } 
```

# c - C - 加密算法

> ID：10440238
> 
> 赞同：1
> 
> 时间：2012-05-03T22:35:40.430
> 
> 标签：c, string, encryption

我正在尝试用 C 制作一个简单的加密程序。我的目标是将`abc`（可以是任何单词）翻译成`123`. 然后乘以`2`获取`246`，然后再次转换为文本，然后在屏幕上书写`bdf`。这是我的算法无法正常工作。我进去`abc`了，我得到了`cbc`。你能帮助我吗？

```
int main()
{
    int z,o,c,l,i,j,k,*D;
    char word[10];
char alfabe[24]={'a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','r','s','t','u','v','y','z','\0'};

    printf("enter word");
    scanf("%s",word);

    c=strlen(word);
    printf("has %d letters ", c);
    D = (int *) malloc( sizeof(int)*c ); 
    for(i=0;i<c;i++) {
        for(j=0;j<26;j++) {
            if(word[i]==alfabe[j]) {  
                 D[i]=2*(j+1);
                 break;
            }
        }
    }
     printf("\nlast form before translation ");
     for(l=0;l<c;l++) {
       printf("%d",D[l]);  /*it s just for control */

    }

    for(z=0;z<c;z++){
printf("%c",alfabe[o]);
                      o=D[z];
                      word[z]=alfabe[o] ; break; }   

    printf("\nnew form of word: ");
    for(k=0;k<c;k++) {
       printf("%c",word[k]);

    }
scanf("%d");

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T22:43:25.187

问题出在以下循环中。

```
for(z=0;z<c;z++){
    printf("%c",alfabe[o]);
    o=D[z];
    word[z]=alfabe[o] ; 
    break; 
} 
```

你怎么破了？它只是翻译第一个字符。其次，您需要减去 1 以获得字母数组的正确索引（重做您所做的添加）。

```
 word[z]=alfabe[o-1]; 
```

三、你是用`o`之前初始化的吗？您的编译器应该为此发出警告。第四，为什么要在大小为 24 的 char 数组中存储 27 个字符？

```
char alfabe[24]={'a','b',...........,'\0'} 
```

最后但并非最不重要的一点是，您需要使用模运算，如果用户输入类似`xyz`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T22:54:59.503

好的，首先`'\0'`标记输入字符串的结尾，你不需要加密这个特定的字符，我的建议是把它放在第一个`alfabet`这样你会得到：

```
alfabet[24] = {'\0', 'a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','r','s','t','u','v','y','z'}; 
```

这将为您省去减去 1 的麻烦，因此您将拥有：

```
for (i = 0; i < c; i++)
{
    for (j = 0; j < 24; j++)
    {
        if (word[i] == alfabet[j])
        {  
            D[i] = 2 * j;
        }
    }
} 
```

在对输入进行编码的部分。当您生成输出字时：

```
for (z = 0; z < c; z++)
{
    printf("%c", alfabet[D[z]]);
    word[z] = alfabet[D[z]];
} 
```

不需要`o`，尤其是`break;`循环中没有。

一种更有效的方法是创建一个处理传递的字符串加密的函数：

```
char* getEncryptedWord(char* word)
{
    char alfabet[25]={'\0', 'a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','r','s','t','u','v', 'x', 'y','z'};

    int i, j;
    int size = strlen(word);

    char* encryptedWord = (char*) malloc(size + 1);

    for (i = 0; i < size; i++)
    {
            for (j = 0; j <= 25; j++)
            {
                    if (word[i] == alfabet[j])
                    {
                            if (2 * j > 25)
                                    encryptedWord[i] = alfabet[2 * j % 25];
                            else
                                    encryptedWord[i] = alfabet[2 * j];

                            break;
                    }
            }
    }

    encryptedWord[size] = '\0';

    return encryptedWord;
} 
```

我已经添加`'x'`了`alfabet`- 这就是现在有 25 个元素的原因。我敢肯定英语字母表中缺少一个字符，但现在是凌晨 3 点，英语不是我的主要语言。此外，此解决方案假设`alfabet`您提供的是输入和输出中应该存在的唯一字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T23:14:35.670

（提示：如果你只期望字母AZ，你不需要循环遍历数组找到对应的数字，你可以简单地通过减去'a'的数值得到数字，然后加1，如果你想要字母“a”映射到 1。）

提到了模算术，但这会给您带来问题，因为您将失去 1:1 映射，即两个字母最终可能被转换为相同的数字。

# c - 结构c内的memset数组

> ID：10440239
> 
> 赞同：2
> 
> 时间：2012-05-03T22:35:44.143
> 
> 标签：c, struct, initialization, memset

我正在尝试 memset 结构中存在的整数数组：

```
typedef struct _xyz {
    int zList[9000];
} xyz;

int dll_tmain(void)
{
    xyz *Xyz       =  (xyz *) calloc(10, sizeof(xyz));
    memset((&Xyz[0])->zList, 1, 9000);
} 
```

我在 memset() 中尝试了很多变体，但无济于事。这个数字不是被初始化为 1，而是一个巨大的值；

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T22:39:04.950

请记住，将数组的`memset`每个*字节设置为相同的值。*因此，您正在将值为 1 的字节复制到数组的前 9000 个字节。假设 4 字节整数，这意味着您正在分配一个 int 值`0x01010101`。但是，更重要的是，您并没有分配给整个数组，只是它的前 1/4，再次假设 4 字节整数。

你不能做你想做的事`memset`。请改用 for 循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T22:52:26.297

您要设置的“值”作为 int 传递给 memset，但 memset“使用此值的无符号字符转换填充内存块”一次一个字节。

因此，您将前 9000 个字节填充到值 0x01。int 通常是 2、4 或 8 个字节，而不是 1 个字节。

只需编写自己的循环即可。如果你因为某种原因不想自己写，检查你的系统是否有wmemset，然后检查你的wchar_t是否和int大小一样，那么你可以很讨厌使用wmemset。

# jquery - JQuery如何检查集合中的元素是否具有多个类名

> ID：10440244
> 
> 赞同：0
> 
> 时间：2012-05-03T22:36:06.283
> 
> 标签：jquery, function, jquery-selectors, filter

更新：Jared 的答案是解决方案 - 这是我的代码，如果确实存在匹配集，我刚刚添加了 else 语句来执行列表项的隐藏/显示。

```
$(document).ready(function() {
$("form#filterForm").submit(function () {
    var type = $("select#typeList option:selected").val();
    var style = $("select#styleList option:selected").val();
    var items = $(".container .content ul li").filter('.' + type + '.' + style);

    if (!items.length) {
        alert('no items...');
        return false;
    } else {

   $(".container .content ul li").hide();
 $(".container .content ul li"+type+style).show();
 mCustomScrollbars();
 return false;
    }

});
}); 
```

结束更新。我有一些代码可以工作，但我无法将其带到最后一步。我有一个无序列表中的缩略图列表。

```
<div class="content">
            <ul>
            <li class="portfolio_images type-portfolio_images category-commercial category-traditional"><img src="thumb_test-image1.jpg" /></li><li class="portfolio_images category-residential category-contemporary"><img src="thumb_test-image2.jpg" /></li><li class="portfolio_images type-portfolio_images category-commercial category-contemporary"><img src="thumb_test-image3.jpg" /></li><li class="portfolio_images type-portfolio_images category-commercial" ><img src="res1-2-THUMB.jpg" /></li><li class="portfolio_images type-portfolio_images category-interior-design"><img src="res1-2-THUMB.jpg" /></li><li class="portfolio_images type-portfolio_images category-interior-design"><img src="res3-3-THUMB.jpg" /></li><li class="portfolio_images type-portfolio_images category-residential category-contemporary" ><img src="thumb_test-image2.jpg" /></li><li class="portfolio_images type-portfolio_images category-commercial category-traditional"><img src="thumb_test-image1.jpg" /></li><li class="portfolio_images type-portfolio_images category-interior-design" ><img src="res1-2-THUMB.jpg" /></li><li class="portfolio_images type-portfolio_images category-commercial category-contemporary"><img src="thumb_test-image3.jpg" /></li><li class="portfolio_images type-portfolio_images category-interior-design"><img src="res1-2-THUMB.jpg" /></li>
            </ul>
        </div> 
```

每个列表项将有多个类别。我有一个带有 2 个选择字段的表单，我正在使用 jQuery 获取选择字段的值，这些字段对应于列表项中的类名 - 这些被设置为变量并用于相应地显示和隐藏列表项.

```
 <form id="filterForm" action="">
<select id="typeList" name="typeList">
<option value=".portfolio_images">All</option>
<option value=".category-commercial">category-commercial</option>
<option value=".category-residential">category-residential</option>
</select>

<select id="styleList" name="typeList">
<option value=".type-portfolio_images">All</option>
<option value=".category-traditional">category-traditional</option>
<option value=".category-contemporary">category-contemporary</option>
</select>
<input id="submit_btn" type="submit" value="submit" label="submit" />   </form>  

<script>
$(document).ready(function() {
$("form#filterForm").submit(function () {
var $selectTypeClass=$("select#typeList option:selected").val();
var $selectStyleClass=$("select#styleList option:selected").val();
$(".container .content ul li").not($selectTypeClass+$selectStyleClass).hide();
$(".container .content ul li"+$selectTypeClass+$selectStyleClass).show();
mCustomScrollbars();
return false;
});
});
 </script> 
```

这真的很好用。但是，在某些情况下，一个项目将具有一个类别，而没有另一个类别：例如，它可能具有“类别-传统”而不是“类别-住宅”。所以我要做的是测试或检查是否有没有与两个选定的类匹配的项目，以显示警报消息（“没有一个项目与两个选择匹配，等等”）。否则，如果有任何两者都匹配，请继续并正常执行该功能。

我遇到了麻烦，因为我尝试使用 each() 进行测试，但这不起作用，因为它会循环遍历列表并始终返回警报 - 因为它基本上在第一个停止

*   在不匹配的列表中，然后跳出循环。

    那么我将如何设置它以检查所有项目是否与两个选定的类匹配？我是否必须以某种方式索引整个集合并将其作为一个整体进行检查，而不是使用 each() 发生的迭代？在这里难住 - 任何帮助，我提前谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T22:46:01.947

您可以在 CSS（和 Sizzle）选择器中使用多个类，例如 .class1.class2。只需搜索两个类的元素并测试长度：

```
$(document).ready(function() {
   $("form#filterForm").submit(function () {
        var type = $("select#typeList option:selected").val();
        var style = $("select#styleList option:selected").val();
        var items = $(".container .content ul li").filter('.' + type + '.' + style);

        if (!items.length) {
            alert('no items...');
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T22:40:00.177

您是否查看过 hasClass JQUERY 函数？

[http://api.jquery.com/hasClass/](http://api.jquery.com/hasClass/)

听起来这就是您要寻找的东西...如果不让我知道，我会尽力提供帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T22:58:09.013

您可以使用该`$.filter(function(index))`函数对具有多个类的元素进行计数，然后将计数与完整的项目列表进行比较。

**具有多个类的元素**

```
var filtered = $('#foo li').filter(function() {
    return this.className.trim().indexOf(' ') > 0;
}); 
```

[http://jsfiddle.net/t4HfL/](http://jsfiddle.net/t4HfL/)

因为这只是检查每个元素的 className 属性中是否有空格，请注意使用`trim()`以确保我们不会返回带有额外空格的元素，即`class="foo "`.

# android - SurfaceView 的缩放动画

> ID：10440245
> 
> 赞同：3
> 
> 时间：2012-05-03T22:36:10.037
> 
> 标签：android, animation, scale, surfaceview

我正在尝试创建一个使用动画缩小的 SurfaceView（包括它的黑色背景画布）。我已经搜索了多种方法，但看起来好像视图没有正确缩放或根本没有缩放。

这是布局：

```
<LinearLayout>
         <RelativeLayout
             android:id="@+id/gfxComponentContainer"
             android:layout_width="292dp"
             android:layout_height="260dp"
             android:background="@color/black" 
             android:gravity="center_horizontal">

             <SurfaceView
                  android:id="@+id/gfxComponent"
                  android:layout_width="fill_parent"
                  android:layout_height="fill_parent"
              />
          </RelativeLayout>
</LinearLayout> 
```

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-09T23:01:50.447

SurfaceHolder.setSizeFromLayout() 可能是您正在寻找的东西。[http://developer.android.com/reference/android/view/SurfaceHolder.html#setSizeFromLayout()](http://developer.android.com/reference/android/view/SurfaceHolder.html#setSizeFromLayout())

# java - 游戏（带有 KeyListener）不响应用户输入？

> ID：10440246
> 
> 赞同：2
> 
> 时间：2012-05-03T22:36:10.593
> 
> 标签：java, swing

为什么椭圆不能正确响应用户输入？我希望 asdw 控制 Player1 和箭头键来控制 Player2。

课堂机器人

```
//imports
...

public class Robot extends JComponent{

public Color color = null;
public int direction = 360;
public int xPos = 100;
public int yPos = 100;
public int xVel = 10;
public int yVel = 10;

Robot(){

}

public int getXpos(){
    return xPos;
}

public void setXpos(int x){
    this.xPos = x;
}

public int getYpos(){
    return yPos;
}

public void setYpos(int y){
    this.yPos = y;
}

// Same thing for getXvel, setXvel, getYvel, and setYvel

public void move(){
    switch(this.direction){

    case 0: 
        this.yPos -= this.yVel;
        break;

    case 90:
        this.xPos+= this.xVel;
        break;

    case 180:
        this.yPos += this.xVel;
        break;

    case 270:
        this.xPos -= this.xVel;
        break;

    default:
        System.out.println("hi");
        break;

    }
}
} 
```

类 Player1 和 Player2

```
public class Player1 extends Robot{

Player1(){
xPos = 300;
yPos = 300;
xVel = 10;
yVel = 10;
direction = 0;
Color = Color.WHITE;
}

public void paintComponent(Graphics g){ 
    Graphics2D g2 = (Graphics2D)g;

            Ellipse2D.Double ball = new Ellipse2D.Double(xPos, yPos, 100, 100);
    g2.setPaint(Color);
    g2.draw(ball);
    g2.fill(ball);

    }       
}

// Class Player2 is the same exact copy. The xPos = 500; yPos = 500; xVel = 10; yVel = 10; 
```

类 KeyController

```
public class KeyController implements KeyListener{

Player1 player1 = new Player1();
Player2 player2 = new Player2();

KeyController(){

}

public void keyPressed(KeyEvent e) {

    // Player 1 Left

    if(e.getKeyCode() == KeyEvent.VK_A){
        player1.setDirection(270);
    }

    // Player 1 Down

    if(e.getKeyCode() == KeyEvent.VK_S){
        player1.setDirection(180);
    }

...

if(e.getKeyCode() == KeyEvent.VK_LEFT){

        player2.setDirection(270);

    }
...
}
public void keyReleased(KeyEvent e) {       
}
public void keyTyped(KeyEvent e) {  
}
} 
```

主要课程：太空游戏

```
public class SpaceGame extends JFrame implements Runnable{

Player1 player1 = new Player1();
Player2 player2 = new Player2();
KeyController key = new KeyController();
Thread animator;
int delay = 1000;
int frame = 0;
public static final int DEFAULT_WIDTH = 1280;
public static final int DEFAULT_HEIGHT = 740;

SpaceGame(){

    // Making the frame
    animator = new Thread(this);
    animator.start();
    setTitle("Game");
    setSize(DEFAULT_WIDTH, DEFAULT_HEIGHT); 
    setBackground(Color.GREEN);
    addKeyListener(key);
    add(player1);
    add(player2);
}

public void run(){

        while (animator != null) 
        {
            repaint();

            player1.move();
player1.setDirection(360); // 360 does nothing
            player2.move();
player2.setDirection(360); // 360 does nothing
            try  
            {  
                Thread.sleep(delay);  
            }  
            catch (InterruptedException e)  
            {  
                break;  
            }  
            frame++; 
            System.out.println(frame);
        }
}

    public void paint(Graphics g){

        Graphics2D g2 = (Graphics2D)g;
        super.paintComponents(g);
        player1.paintComponent(g2);
        player2.paintComponent(g2);

        }

    public static void main(String[] args) {

        SpaceGame game = new SpaceGame();
        game.setVisible(true);

        }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T22:46:37.770

如`Key Listener`API 中所述，[“要触发键盘事件，组件必须具有键盘焦点”](http://docs.oracle.com/javase/tutorial/uiswing/events/keylistener.html)。请改用[*键绑定*](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)[，如此处](https://stackoverflow.com/a/5797965/230513)所示。

# android - Phonegap 多个实例

> ID：10440250
> 
> 赞同：2
> 
> 时间：2012-05-03T22:36:15.863
> 
> 标签：android, jquery-mobile, cordova, multiple-instances

嗨，我正在开发 phonegap / jquery 移动应用程序。它是一个基于音频 (media.play) 的应用程序。我有 StatusBarNotification 插件的多个实例的问题。我尝试强制使用 android:launchMode="singleTop" ，它似乎工作正常，但在某些奇怪的情况下，应用程序的新实例会打开，第一个应用程序正在后台运行，音频正在运行。

这很烦人，因为在我回到第一个之前我无法停止音频。是否有一段代码真的只强制一个实例？

我听说过launchMode =“singleInstance”，但不知道真正的区别..什么会更好？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-09T12:43:05.680

它严格取决于运行应用程序的设备。请参阅[此答案](https://stackoverflow.com/a/12643658/1469208)以查看在某些设备（此处为：HTC）上使用`android:launchMode="singleTask"`而不是`android:launchMode="singleTop"`解决问题。

# php - Yii：用户身份验证不起作用

> ID：10440254
> 
> 赞同：0
> 
> 时间：2012-05-03T22:36:28.233
> 
> 标签：php, yii

所以我尝试登录 Yii 中的应用程序，它似乎停止在他们的验证或我的站点控制器的登录功能。它永远不会登录它永远不会做任何有用的事情。没有显示，没有错误，nada zip

我在关注：[http ://www.larryullman.com/2010/01/04/simple-authentication-with-the-yii-framework/](http://www.larryullman.com/2010/01/04/simple-authentication-with-the-yii-framework/)

用户身份类：

```
class UserIdentity extends CUserIdentity

public function authenticate()
{

        $user = User::model()->findByAttributes(array('username'=>$this->username));
        $saltedPW = ""; // null string for salted PW

        if ($user===null) { // No user found!
                $this->errorCode=self::ERROR_USERNAME_INVALID;
        }

        if ($user!==null){
            // salt the user password string then hash
            // incase $user pw is not a salted hash, rather a password string
            $saltedPW = md5(Yii::app()->params["salt"] . $user->password);

            //testing the password 
            if (($user->password !== $this->password) || 
                ($saltedPW       !== $this->password))
            {
                    $this->errorCode=self::ERROR_PASSWORD_INVALID;
            } 
            else 
            {
                    $this->errorCode=self::ERROR_NONE;
            }
        }
    return !$this->errorCode;
    } 
```

}

从站点控制器登录：

```
public function actionLogin()
{
    $model=new LoginForm;

    // if it is ajax validation request
    if(isset($_POST['ajax']) && $_POST['ajax']==='login-form')
    {
        echo CActiveForm::validate($model);
        Yii::app()->end();
    }

    // collect user input data
    if(isset($_POST['LoginForm']))
    {
        $model->attributes=$_POST['LoginForm'];
        // validate user input and redirect to the previous page if valid
        if($model->validate() && $model->login())
                    {
                        $this->redirect(Yii::app()->user->returnUrl);
                    }
                    else
                    {
                       $this->render('login',array('model'=>$model)); 
                    }
    }
    // display the login form
    $this->render('login',array('model'=>$model));
} 
```

登录表单

```
class LoginForm extends CFormModel
{
    public $username;
    public $password;
    public $rememberMe;
    private $_identity;

    /**
     * Declares the validation rules.
     * The rules state that username and password are required,
     * and password needs to be authenticated.
     */
    public function rules()
    {
        return array(
            // username and password are required
            array('username, password', 'required'),
            // rememberMe needs to be a boolean
            array('rememberMe', 'boolean'),
            // password needs to be authenticated
            array('password', 'authenticate'),
        );
    }

    /**
     * Declares attribute labels.
     */
    public function attributeLabels()
    {
        return array(
            'rememberMe'=>'Remember me next time',
        );
    }

    /**
     * Authenticates the password.
     * This is the 'authenticate' validator as declared in rules().
     */
    public function authenticate($attribute,$params)
    {
        if(!$this->hasErrors())
        {
            $this->_identity=new UserIdentity($this->username,$this->password);
            if(!$this->_identity->authenticate())
                $this->addError('password','Incorrect username or password.');
        }
    }

    /**
     * Logs in the user using the given username and password in the model.
     * @return boolean whether login is successful
     */
    public function login()
    {
        if($this->_identity===null)
        {
            $this->_identity=new UserIdentity($this->username,$this->password);
            $this->_identity->authenticate();
        }
        if($this->_identity->errorCode===UserIdentity::ERROR_NONE)
        {
            $duration=$this->rememberMe ? 3600*24*30 : 0; // 30 days
            Yii::app()->user->login($this->_identity,$duration);
            return true;
        }
        else
            return false;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-24T06:49:28.823

我刚刚用这个和它的工作替换了 UserIdentity 类。

受保护/组件/UserIdentity.php

```
<?php

/**
 * UserIdentity represents the data needed to identity a user.
 * It contains the authentication method that checks if the provided
 * data can identity the user.
 */
class UserIdentity extends CUserIdentity {

    /**
     * Id for current user.
     * @var type 
     */
    private $_id;

    /**
     * Email address variable.
     * @var type 
     */
    public $email;

    /**
     * Custom error indicators.
     */

    const ERROR_EMAIL_INVALID = 3;
    const ERROR_ACCOUNT_INACTIVE = 4;

    /**
     * Over-ride the parent constructor and uses email for auth.
     * @param type $email
     * @param type $password
     */
    public function __construct($email, $password) {
        $this->email = $email;
        $this->username = $email;
        $this->password = $password;
    }

    public function authenticate() {
        // we need to filter on email only
        $attrs = array('email' => $this->email);
        // obtain all users matching this criterion
        $record = User::model()->findByAttributes($attrs);
        // if no users are obtained, we need to set custom message.
        if ($record === null)
            $this->errorCode = self::ERROR_EMAIL_INVALID;
        // if password does not match, indicate this via message.
        else if ($record->password !== crypt($this->password, $record->password))
            $this->errorCode = self::ERROR_PASSWORD_INVALID;
        // check if user account is enabled.
        else if ($record->is_authorised == 0)
            $this->errorCode = self::ERROR_ACCOUNT_INACTIVE;
        else {
            // all check passed, now initiate a whatevr.
            $this->_id = $record->id;
            $this->email = $this->username = $record->email;
            // no error occurred.
            $this->errorCode = self::ERROR_NONE;
        }
        // return the errorCode.
        return $this->errorCode;
    }

    /**
     * Returns ID.
     * @return type
     */
    public function getId() {
        return $this->_id;
    }

    /**
     * Returns username, part before '@' sign.
     * @return type
     */
    public function getName() {
        $usernameParts = explode('@', $this->email);
        return $usernameParts[0];
    }

} 
```

# php - 使用 SimpleHTMLDom 通过谷歌搜索获取大图

> ID：10440255
> 
> 赞同：0
> 
> 时间：2012-05-03T22:36:56.297
> 
> 标签：php, html, dom

我需要显示谷歌通过 simple_html_dom.php 搜索的大图像

```
 include_once( "simple_html_dom.php" );
       $key="alexis";
       $html = new simple_html_dom();
       $html=file_get_html('http://images.google.com/images?as_q='. $key .'&hl=en&imgtbs=z&btnG=Search+Images&as_epq=&as_oq=&as_eq=&imgtype=&imgsz=m&imgw=&imgh=&imgar=&as_filetype=&imgc=&as_sitesearch=&as_rights=&safe=images&as_st=y');
 foreach($html->find('a') as $element) {
 preg_match('#(?:http://)?(http(s?)://([^\s]*)\.(jpg|gif|png))#', $element->href,  $imagelink);
 echo $imagelink['1'];
 } 
```

结果：

> [http://beautiful-pics.org/wp-content/uploads/2011/06/Alexis_Bledel_4.jpghttp://liberalvaluesblog.com/wp-content/uploads/2009/03/alexis-bledel-gg02.jpghttp:// cdn0.sbnation.com/imported_assets/119825/alexis.jpghttp://www.hdwallpapersarena.com/wp-content/uploads/2012/04/alexis-dziena-3163.jpghttp://www.nba.com/media/ celtics/alexis-diary300422.jpghttp://beautiful-pics.org/wp-content/uploads/2011/06/Alexis_Bledel_5.jpghttp://www.popcrunch.com/wp-content/uploads/2009/03/amanda- alexis-lee2.jpghttp://www.tvfunspot.com/forums/images/realityshows/survivor16/alexis.jpghttp://access.nscpcdn.com/gallery/i/b/bledel/AlexisBlei_4705661.jpghttp://2\. bp.blogspot.com/_UaLWp72nij4/S_cccrvmFsI/AAAAAAAAAMM8/yjVXCl3sHT4/s1600/alexis-bledel.jpghttp://3.bp.blogspot.com/-RFJoXjDSnmQ/T4cPwZwgrjI/AAAAAAAABlY/aNlgZ3ZFknU/s1600/Alexis%252BBledel03.jpg ://images2.fanpop。com/images/photos/4200000/Alexis-Bledel-alexis-bledel-4218179-590-768.jpghttp://www.hawktime.com/sitebuildercontent/sitebuilderpictures/AlexisArguello.jpghttp://4.bp.blogspot.com/ --iAuASq2RFc/TveqvJ2j8vI/AAAAAAAABvg/RzTmjASqK_0/s400/alexis-bledel.jpghttp://www.mtv.com/news/photos/a/american_idol/09/top36/10_alexis_grace.jpghttp://images.buddytv.com/文章/the-bachelor/images/alexis.jpghttp://cdn01.cdnwp.thefrisky.com/wp-content/uploads/2010/02/03/vanity-fair-020310-main.jpghttp://www.chorva. net/wp-content/uploads/2009/04/alexis-bledel.jpghttp://images2.fanpop.com/images/photos/3500000/Alexis-Bledel-alexis-bledel-3523783-454-600.jpghttp:// www.pocandpoch.com/wp-content/gallery/alexis-and-lauren/alexis-bledel.jpgcom/sitebuildercontent/sitebuilderpictures/AlexisArguello.jpghttp://4.bp.blogspot.com/--iAuASq2RFc/TveqvJ2j8vI/AAAAAAAABvg/RzTmjASqK_0/s400/alexis-bledel.jpghttp://www.mtv.com/news/photos/ a/american_idol/09/top36/10_alexis_grace.jpghttp://images.buddytv.com/articles/the-bachelor/images/alexis.jpghttp://cdn01.cdnwp.thefrisky.com/wp-content/uploads/2010/ 02/03/vanity-fair-020310-main.jpghttp://www.chorva.net/wp-content/uploads/2009/04/alexis-bledel.jpghttp://images2.fanpop.com/images/photos/ 3500000/Alexis-Bledel-alexis-bledel-3523783-454-600.jpghttp://www.pocandpoch.com/wp-content/gallery/alexis-and-lauren/alexis-bledel.jpgcom/sitebuildercontent/sitebuilderpictures/AlexisArguello.jpghttp://4.bp.blogspot.com/--iAuASq2RFc/TveqvJ2j8vI/AAAAAAAABvg/RzTmjASqK_0/s400/alexis-bledel.jpghttp://www.mtv.com/news/photos/ a/american_idol/09/top36/10_alexis_grace.jpghttp://images.buddytv.com/articles/the-bachelor/images/alexis.jpghttp://cdn01.cdnwp.thefrisky.com/wp-content/uploads/2010/ 02/03/vanity-fair-020310-main.jpghttp://www.chorva.net/wp-content/uploads/2009/04/alexis-bledel.jpghttp://images2.fanpop.com/images/photos/ 3500000/Alexis-Bledel-alexis-bledel-3523783-454-600.jpghttp://www.pocandpoch.com/wp-content/gallery/alexis-and-lauren/alexis-bledel.jpgcom/articles/the-bachelor/images/alexis.jpghttp://cdn01.cdnwp.thefrisky.com/wp-content/uploads/2010/02/03/vanity-fair-020310-main.jpghttp://www. chorva.net/wp-content/uploads/2009/04/alexis-bledel.jpghttp://images2.fanpop.com/images/photos/3500000/Alexis-Bledel-alexis-bledel-3523783-454-600.jpghttp: //www.pocandpoch.com/wp-content/gallery/alexis-and-lauren/alexis-bledel.jpgcom/articles/the-bachelor/images/alexis.jpghttp://cdn01.cdnwp.thefrisky.com/wp-content/uploads/2010/02/03/vanity-fair-020310-main.jpghttp://www. chorva.net/wp-content/uploads/2009/04/alexis-bledel.jpghttp://images2.fanpop.com/images/photos/3500000/Alexis-Bledel-alexis-bledel-3523783-454-600.jpghttp: //www.pocandpoch.com/wp-content/gallery/alexis-and-lauren/alexis-bledel.jpg](http://beautiful-pics.org/wp-content/uploads/2011/06/Alexis_Bledel_4.jpghttp://liberalvaluesblog.com/wp-content/uploads/2009/03/alexis-bledel-gg02.jpghttp://cdn0.sbnation.com/imported_assets/119825/alexis.jpghttp://www.hdwallpapersarena.com/wp-content/uploads/2012/04/alexis-dziena-3163.jpghttp://www.nba.com/media/celtics/alexis-diary300422.jpghttp://beautiful-pics.org/wp-content/uploads/2011/06/Alexis_Bledel_5.jpghttp://www.popcrunch.com/wp-content/uploads/2009/03/amanda-alexis-lee2.jpghttp://www.tvfunspot.com/forums/images/realityshows/survivor16/alexis.jpghttp://access.nscpcdn.com/gallery/i/b/bledel/AlexisBlei_4705661.jpghttp://2.bp.blogspot.com/_UaLWp72nij4/S_cccrvmFsI/AAAAAAAAMM8/yjVXCl3sHT4/s1600/alexis-bledel.jpghttp://3.bp.blogspot.com/-RFJoXjDSnmQ/T4cPwZwgrjI/AAAAAAAABlY/aNlgZ3ZFknU/s1600/Alexis%252BBledel-03.jpghttp://images2.fanpop.com/images/photos/4200000/Alexis-Bledel-alexis-bledel-4218179-590-768.jpghttp://www.hawktime.com/sitebuildercontent/sitebuilderpictures/AlexisArguello.jpghttp://4.bp.blogspot.com/--iAuASq2RFc/TveqvJ2j8vI/AAAAAAAABvg/RzTmjASqK_0/s400/alexis-bledel.jpghttp://www.mtv.com/news/photos/a/american_idol/09/top36/10_alexis_grace.jpghttp://images.buddytv.com/articles/the-bachelor/images/alexis.jpghttp://cdn01.cdnwp.thefrisky.com/wp-content/uploads/2010/02/03/vanity-fair-020310-main.jpghttp://www.chorva.net/wp-content/uploads/2009/04/alexis-bledel.jpghttp://images2.fanpop.com/images/photos/3500000/Alexis-Bledel-alexis-bledel-3523783-454-600.jpghttp://www.pocandpoch.com/wp-content/gallery/alexis-and-lauren/alexis-bledel.jpg)

但我需要一个链接只用于第一张图片，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T22:42:04.240

添加一个`break`; 在以下行之后`echo`：

```
...
echo $imagelink['1'];
break;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T22:43:36.420

```
include_once( "simple_html_dom.php" );
       $key="alexis";
       $html = new simple_html_dom();
       $html=file_get_html('http://images.google.com/images?as_q='. $key .'&hl=en&imgtbs=z&btnG=Search+Images&as_epq=&as_oq=&as_eq=&imgtype=&imgsz=m&imgw=&imgh=&imgar=&as_filetype=&imgc=&as_sitesearch=&as_rights=&safe=images&as_st=y');
 foreach($html->find('a') as $element) {
 if(preg_match('#(?:http://)?(http(s?)://([^\s]*)\.(jpg|gif|png))#', $element->href,  $imagelink)){
    echo $imagelink[1];
    break;
 }
 } 
```

# php - URL Shortner... Mod 重写

> ID：10440256
> 
> 赞同：-2
> 
> 时间：2012-05-03T22:37:15.263
> 
> 标签：php, mysql, .htaccess, mod-rewrite

我正在尝试构建一个简单的 URL 缩短器，但遇到了一些复杂情况：

A) 在 .htaccess 中，我将如何重写 mydomain.com 以使用户可以输入 mydomain.com/4854，而页面实际上是 mydomain.com/url.php?key=4854。

B）如果我确实有那个重写规则，我怎么能确保绕过它来处理 index.php 和 add.php

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T22:45:20.367

```
RewriteEngine on
RewriteRule ^([0-9]+)(/)?$ url.php?key=$1 
```

如果密钥无效，请在 php 文件中重定向

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T22:45:45.110

在你的`.htaccess`你可以做：

```
RewriteEngine On
RewriteRule ^([0-9]+)(/)?$ /url.php?key=$1 [QSA,L] 
```

这会将仅包含数字的请求重写为`url.php`.

然后在 中`url.php`，如果找不到key，则重定向到错误页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T22:49:01.570

让我为您省去悲伤...我正在做同样的事情，并在[yourls.org](http://yourls.org/)上发现它是为我写的。它几乎涵盖了您需要的所有内容，并为您提供了添加自己的用户页面的选项，并为您提供了一个 API 接口供其他人使用缩短的 URL。我在几分钟内启动并运行了它，并花了几个小时修改提供的样本以准备投入生产。

即使您不使用它，mod_rewrite 解决方案也适合您。

# html - 使用 htaccess 删除 .html

> ID：10440257
> 
> 赞同：1
> 
> 时间：2012-05-03T22:37:16.213
> 
> 标签：html, .htaccess

我正在使用我的 htaccess 文件尝试从我的 Web URL 中删除 .html（以及其他如果需要）文件扩展名。

问题是它似乎不起作用，除非我浏览网站中的链接并从所有链接中手动删除 .html （这使得在本地测试网站非常烦人，我不确定我是否应该删除.html 文件扩展名）。

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.html -f
RewriteRule ^(.*)$ $1.html 
```

如果用户键入 www.mysite.com/about 而不是 www.mysite.com/about.html，则此方法有效，除非单击我网站的链接时它仍会添加扩展名？

[使用http://www.mysite.com/about](http://www.mysite.com/about)等删除我网站上的 .html 绝对链接的最佳方法是什么，或者我应该删除扩展名并只使用 ../about 之类的路径而不是 ../关于.html？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T22:39:16.147

.htaccess 文件不会更改您的代码，因此如果您将扩展名放在页面中（用于链接），则必须将其删除。

# android - 自定义 HDPI 控件不可见

> ID：10440263
> 
> 赞同：2
> 
> 时间：2012-05-03T22:38:29.137
> 
> 标签：android, user-interface

我有一个应用程序，它使用自定义主题提供一组可切换的夜间模式（红色）控件。这些控件位于共享首选项视图中。我已经从 Android git 源的 hdpi 和 mdpi 文件夹中为我的控件复制并着色了所有必要的图像。红色主题在 160 dpi 屏幕 (480x800 Android 3.2) 上工作得非常好，但在 240 dpi (480x854 Android 2.1) 上，自定义复选框和收音机是不可见的，它们也不占用带有标签的行上的任何空间。尽管简单线性视图上的下拉列表控件似乎显示得非常好。我能看到的唯一区别是后者有 .9.png 图像。

出了什么问题以及如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T22:48:48.807

欢呼！偶然发现了解决方案。我已经在我的应用程序的第一个视图中添加了一个隐藏的复选框项目，并且所有样式化的复选框都神奇地出现了，因为它们应该出现在其他所有视图中！我相信这是 2.1 版本的 Android 中的一个错误。[我在这里](http://code.google.com/p/android/issues/detail?id=12077)搜索问题时看到了类似的内容。不过这可能无关紧要。

# php - 使用 API 获取封面 - URL 错误

> ID：10440266
> 
> 赞同：3
> 
> 时间：2012-05-03T22:38:49.303
> 
> 标签：php, json

我需要一些我的 PHP 网站的专辑封面，但有些东西不再起作用了。

我使用 JSON 来获取专辑 ID，然后我使用这个 id 来获取专辑封面。

我的问题是我尝试从网站解码 json，但我不再得到任何结果（它之前工作过......）。

这是代码（获取 JSON 并对其进行解码）：

```
$req="http://api-v3.deezer.com/1.0/search/track/?q=".$deezer."&index=0&nb_items=8&output=json";
$result = file_get_contents($req);
$testjson=json_decode($result,true); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T22:42:01.237

我认为您使用的是 Deezer api 的旧代码（1.0，我没有从您的网址获得任何 JSON）。

尝试`$req`通过以下方式更改：

```
$req="http://api.deezer.com/2.0/search/album/?q".$deezer."&index=0&nb_items=8&output=json"; 
```

然后，一些代码丢失并且也很重要。

当您尝试获取图像时，不要忘记使用该版本（2.0）更改网址。

您可以找到有关 Deezer Api 的更多信息：[这里](http://developers.deezer.com/api)。

# ios - xcode 中的配置脚本失败，退出代码为 1

> ID：10440273
> 
> 赞同：1
> 
> 时间：2012-05-03T22:39:05.917
> 
> 标签：ios, xcode, graphviz, configure

我将此脚本作为 Xcode 运行脚本运行以构建 graphviz：

```
if [ ! "${BUILT_PRODUCTS_DIR}/graphviz/Makefile" -nt "${SRCROOT}/graphviz/configure" ]
then
  GVROOT="${SRCROOT}/graphviz"

  # figure out optimization
  OPT="${GCC_OPTIMIZATION_LEVEL}"
  if [ -z "${OPT}" ]
    then
    OPT="s"
  fi

  FLAGS="-fexceptions -gdwarf-2 -isysroot ${SDKROOT} -miphoneos-version-min=${IPHONEOS_DEPLOYMENT_TARGET} -mthumb -O${OPT}"

  # figure out architecture
  for ARCH in ${ARCHS}
  do
    FLAGS="${FLAGS} -arch ${ARCH}"
  done

  # figure out preprocessor defines
  for DEFINITION in ${GCC_PREPROCESSOR_DEFINITIONS}
  do
    FLAGS="${FLAGS} -D${DEFINITION}"
  done

  mkdir -p ${BUILT_PRODUCTS_DIR}/graphviz
  cd ${BUILT_PRODUCTSx_DIR}/graphviz

  ${GVROOT}/configure \
    --build=${NATIVE_ARCH_ACTUAL}-apple-darwin11 \
    --host=${NATIVE_ARCH}-apple-darwin11 \
    --disable-dependency-tracking \
    --enable-shared=no \
    --enable-static=yes \
    --enable-ltdl=no \
    --enable-swig=no \
    --enable-tcl=no \
    --srcdir=${GVROOT} \
    --with-codegens=no \
    --with-graph=yes \
    --with-expat=no \
    --with-fontconfig=no \
    --with-freetype2=no \
    --with-ipsepcola=yes \
    --with-libgd=no \
    --with-quartz=yes \
    --with-visio=yes \
    --with-x=no \
    CC="${PLATFORM_DEVELOPER_BIN_DIR}/clang" \
    CPP="${PLATFORM_DEVELOPER_BIN_DIR}/clang -E" \
    CXX="${PLATFORM_DEVELOPER_BIN_DIR}/clang++" \
    OBJC="${PLATFORM_DEVELOPER_BIN_DIR}/clang" \
    LD="${PLATFORM_DEVELOPER_BIN_DIR}/ld" \
    CFLAGS="${FLAGS}" \
    CXXFLAGS="${FLAGS} -fvisibility-inlines-hidden" \
    OBJCFLAGS="${FLAGS}" 2>/dev/null
fi 
```

我得到以下编译器输出：

```
checking build system type... x86_64-apple-darwin11
checking host system type... i386-apple-darwin11
checking for a BSD-compatible install... /usr/bin/install -c
checking whether build environment is sane... yes
checking for i386-apple-darwin11-strip... no
checking for strip... strip
checking for a thread-safe mkdir -p... /Users/michaelciccotti/Documents/Projects/Tests/LowGraphvix/graphviz/config/install-sh -c -d
checking for gawk... no
checking for mawk... no
checking for nawk... no
checking for awk... awk
checking whether make sets $(MAKE)... yes
Command /bin/sh failed with exit code 1 
```

我如何弄清楚出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T03:39:07.130

我通过以 root 身份运行 Xcode 找出了问题所在。这给了我更详细的失败消息（不知道为什么）。我的问题是我需要'make distclean'，因为我在目录中有以前的构建。

# python - 分布式服务器模型

> ID：10440277
> 
> 赞同：1
> 
> 时间：2012-05-03T22:39:21.440
> 
> 标签：python, distributed-computing

假设我有 100 台服务器，每台服务器都运行一个守护进程 - 让我们称之为`server`- 该服务器负责为该特定服务的每个用户生成一个线程（假设每台服务器 1000 个线程）。每个`N`线程每秒钟都会做*一些事情*并获取该特定用户的信息（此请求/响应模型无法更改）。我遇到的问题是有时线程挂起并停止*做某事*。我需要一些方法来知道用户数据是陈旧的，需要刷新。

我唯一的想法是每秒`5N`让线程更新与该用户关联的 MySQL 记录（`last_scanned`用户表中的一列），另一个进程每秒检查该表`15N`，如果该`last_scanned`列不是当前的，则重新启动线程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T23:46:20.917

处理此问题的一般方法是让线程将其状态报告回服务器守护程序。如果您在最后 5N 秒内没有看到状态更新，那么您将终止该线程并启动另一个线程。

您可以跟踪您在列表中启动的当前活动线程，然后偶尔循环它们以确定状态。

当然，您还应该修复程序中导致线程过早退出的错误。

过早退出和终止线程也可能使您的程序处于意外的非原子状态。您可能还应该让服务器守护程序运行一个清理过程，以确保队列中的任何项目，或者您用来确定工作负载的任何项目，在一段时间不活动后被重置。

# javascript - 为什么 JSON.parse() 不能解析 date.toJSON() 创建的内容？

> ID：10440284
> 
> 赞同：4
> 
> 时间：2012-05-03T22:40:03.390
> 
> 标签：javascript, json

*使用 chrome Canary 测试*

我可以将日期转换为 JSON：

```
> (new Date()).toJSON()
  "2012-05-03T22:27:30.530Z" 
```

我可以将其转换回日期：

```
> typeof (new Date("2012-05-03T22:27:30.530Z"))
  object 
```

为什么我不能使用 JSON.parse() 将其解析为日期？JSON.parse 返回一个字符串，而不是日期：

```
> JSON.parse('{"DateValue":"2012-05-03T22:27:30.530Z"}').DateValue
 "2012-05-03T22:27:30.530Z" 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-03T22:45:08.837

因为 Date 不是 JSON 中的有效类型。JSON 只知道字符串、数字、布尔值、数组和通用对象（关联数组/哈希/映射/字典/pick-your-favorite-name）。当您将其他任何内容转换为 JSON 时，您会得到上述之一 - 这意味着如果您想将“其他内容”恢复为它开始时的类型，接收者必须做一些额外的工作来重新创建它。

有一些 JSON 库可以抽象出来，并包含一个额外的属性来指示某物是什么类，所以如果接收者使用相同的库，他们将恢复该类型，但这仍然是相同的工作，只是被库隐藏了.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T22:42:16.873

因为在 JSON 中，日期*是*一个字符串，以同样的方式`new Date("2012-05-03T22:27:30.530Z")`解析一个字符串。您希望 JavaScript 知道 JSON 中的字符串是日期。

您需要将 JSON 解析的字符串传递给日期对象以获取日期：

```
var date = new Date(JSON.parse('{"DateValue":"2012-05-03T22:27:30.530Z"}').DateValue); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T22:52:51.627

该`.toJSON`方法仅用于返回可以用 JSON 表示的值。然而 JSON 不知道数据类型，并且不可能将对象实例信息（如原型）存储在 JSON 字符串中。

因此，Date 的 toJSON 方法可以返回一个数字（例如 Unix 时间戳），一个具有表示年、月、日等属性的普通对象（不太好，因为不能用 Date 构造函数解析）或者 - 发生了什么 -一个字符串，这里是 ISO 时间格式。有了它，您可以使用它`new Date(JSON.parse(stringified_date))`来创建一个新的 Date 对象。

如果你愿意`delete Date.prototype.toJSON;`，`JSON.stringify(new Date)`将导致`"{}"`.

# c++ - freeglut 无法使用 valgrind 打开显示

> ID：10440287
> 
> 赞同：3
> 
> 时间：2012-05-03T22:40:22.023
> 
> 标签：c++, eclipse, opengl, valgrind, glut

我正在使用 Valgrind 插件在 Ubuntu 12.04 上运行 Eclipse IDE。我用 C++ 开发游戏已经有一段时间了，我似乎在某个地方出现了内存错误。通常，我使用 Valgrind 跟踪这些。但是，当我运行 valgrind 时，过剩无法初始化。我应该注意，当我不使用 valgrind 时，游戏初始化没有问题。我的主要功能的代码如下：

```
int main(int argc, char** argv) {
  char windowTitle[12] = "Game Window";
  printf("Initializing Glut...\n");
  glutInit(&argc, argv);
  printf("Glut initialized!\n");
  alutInit(&argc, argv);
  Game_Object* game = new Game_Object(windowTitle, 1200, 675, argc, argv);
  delete game;
  printf("game ended\n");
  return 0;
} 
```

控制台的结果输出是：

```
Initializing Glut
freeglut (/home/dsnettleton/Documents/Programming/Eclipse/workspace/Plutoids/Debug/Plutoids): failed to open display '' 
```

显然，该程序在运行 valgrind 时并没有走得太远。处于我开发的最后阶段，只是为了清除内存错误而陷入困境，真是令人沮丧。什么可能导致过剩无法初始化，我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T12:51:46.263

这是我的猜测：您的 IDE 可能缺少`$DISPLAY`环境变量。`$DISPLAY`在启动 Valgrind 之前，您必须在某个地方配置要设置的环境。

启动终端和`echo $DISPLAY`. 它的价值大概是`:0.0`。

在最坏的情况下，我会尝试`setenv()`在 C 代码中使用或在启动 Valgrind 的命令行中设置 DISPLAY（这些情况都没有经过测试，它们可能不起作用）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-02T12:52:02.383

您还必须在 Eclipse 中添加此环境变量 DISPLAY:=0.0。在可执行文件的启动配置中，将显示变量添加到环境选项卡，或选择继承环境。

> 运行->运行配置...->环境

现在点击

> 新的

并添加

> 显示：0

在里面

# loops - 在 phpmyadmin 中循环

> ID：10440292
> 
> 赞同：0
> 
> 时间：2012-05-03T22:40:53.400
> 
> 标签：loops, phpmyadmin

我有一张十六进制颜色表（500 行）和一张国家表（~250 行）。我想使用循环遍历每个国家/地区，从“颜色”列中的十六进制表中为其分配新的十六进制颜色

我可以在 phpmyadmin 中执行此操作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T22:58:19.750

使用`UPDATE`带有子查询的语句从十六进制表中选择值：

```
UPDATE `countries` SET `color` = 
    (SELECT `color` FROM `hex_colors` ORDER BY RAND() LIMIT 1) 
```

在 phpmyadmin 中，选择您的数据库，然后单击管理屏幕顶部的 SQL 选项卡。输入更新语句，然后点击“Go”

**编辑：**如果您想确保颜色值和国家/地区之间的一对一映射，以便没有重复的值，我会在每个表中添加一个临时列，即`order`运行一个更新，将顺序值分配给该列对于这两个表，然后使用十六进制颜色表中的颜色值更新国家表，并通过以下方式连接`order`：

```
SELECT @i := 0;
SELECT @j := 0;
ALTER TABLE `countries` ADD COLUMN `order` INT;
ALTER TABLE `hex_colors` ADD COLUMN `order` INT;
UPDATE `countries` SET `order` = @i := @i + 1;
UPDATE `hex_colors` SET `order` = @j := @j + 1;
UPDATE `countries` c, `hex_colors` h SET c.`color` = h.`color` 
  WHERE c.`order` = h.`order`;
ALTER TABLE `countries` DROP COLUMN `order`;
ALTER TABLE `hex_colors` DROP COLUMN `order`; 
```

# linq - LINQ 包含的目的

> ID：10440295
> 
> 赞同：0
> 
> 时间：2012-05-03T22:40:57.343
> 
> 标签：linq

在 Linq 中，我看到使用了 Include 关键字。包含的目的是什么？

```
 x=> x.Lists.Include(l => l.Title) 
 .Where(l => l.Title != String.Empty) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T22:43:26.460

该`Include`方法用于强制 EF 急切地从子关系加载行。

您的示例代码已损坏；`Include()`只能在导航属性上调用。

# html - 影响整个页面的正文不透明度？

> ID：10440303
> 
> 赞同：0
> 
> 时间：2012-05-03T22:42:04.737
> 
> 标签：html, css

我正在制作一个弹出窗口。我已经完成了所有工作，但是当我想将其后面的任何东西（我使用 body 标签）的不透明度设置为 0.6 时，弹出窗口的不透明度也发生了变化。我如何做到这一点，除了弹出窗口的不透明度之外的所有内容都被丢弃？- 提前致谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T23:12:06.057

尝试使用 rgba 代替不透明度：

`background-color: rgba(0, 0 , 0, 0.5);`

它是：红色、绿色、蓝色、alpha 透明度值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T23:10:35.227

好吧，我对这个问题很好奇，并在 Stack Overflow 的某个地方发现子元素的不透明度永远不能高于其父元素，也不能覆盖它（不是“官方”来源，但我相信它）。

所以，我看到的最好的解决方法是将你的弹出窗口放在低不透明度元素之外。由于将弹出窗口放在外面没有意义`<body>`，因此我将所有内容包装在一个 div 中并将弹出窗口放在外面。例如：

我无法在 JSFiddle 中显示正文标签，但无论如何这里是链接[http://jsfiddle.net/qWRj5/1/](http://jsfiddle.net/qWRj5/1/)

```
<body>
<div id="all">Lorem Ipsun Delores Sic Transit Glori Repium Sider Traministu 
Difirenziatum Tiramisu. Lorem Ipsun Delores Sic Transit Glori Repium Sider Traministu 
Difirenziatum Tiramisu. Lorem Ipsun Delores Sic Transit Glori Repium Sider Traministu 
Difirenziatum Tiramisu. 
</div>

<div id="popup">My Gosh, that is some awful Latin</div>
</body> 
```

CSS

```
#all { opacity: 0.5 }
#popup { padding: 10px; border: 2px dotted blue; position: absolute; left: 20px; 
  top: 10px; background-color: #fce; } 
```

​</p>

# sql - 语法错误：缺少表达式 (ORA-00936)

> ID：10440306
> 
> 赞同：5
> 
> 时间：2012-05-03T22:42:22.223
> 
> 标签：sql, oracle, database-design, foreign-keys, ora-00936

我有 2 张桌子，`Facilities`并且`Services`.

```
CREATE TABLE Facilities (
facility_id NUMBER(2) NOT NULL,
facility_name VARCHAR2(20) NOT NULL,
CONSTRAINT pk_facil_id PRIMARY KEY (facility_id)
);

CREATE TABLE Services (
service_id NUMBER(2) NOT NULL,
service_name VARCHAR(20) NOT NULL,
service_facility NUMBER(2) NOT NULL,
CONSTRAINT pk_serviceid PRIMARY KEY (service_id)
);

ALTER TABLE Services
add CONSTRAINT fk_servicefacility FOREIGN KEY(service_facility) 
REFERENCES Facilities(facility_id); 
```

如果我尝试将记录输入到“服务”表中，如下所示：

```
INSERT INTO Services (service_id, service_name, service_facility) 
SELECT 06, 'Rooms', 
(SELECT facility_id, FROM Facilities WHERE facility_name = 'Hotel') 
FROM Dual; 
```

7 个插入语句中有 3 个出现错误“缺少表达式”。缺少什么表情？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-03T22:53:31.283

您发布的 SQL 语句有一个额外的逗号。如果您在 SQL*Plus 中运行该语句，它将抛出 ORA-00936: missing expression 并准确显示错误发生的位置

```
SQL> ed
Wrote file afiedt.buf

  1  INSERT INTO Services (service_id, service_name, service_facility)
  2  SELECT 06, 'Rooms',
  3  (SELECT facility_id, FROM Facilities WHERE facility_name = 'Boston')
  4* FROM Dual
SQL> /
(SELECT facility_id, FROM Facilities WHERE facility_name = 'Boston')
                     *
ERROR at line 3:
ORA-00936: missing expression 
```

如果删除逗号，则该语句有效

```
SQL> ed
Wrote file afiedt.buf

  1  INSERT INTO Services (service_id, service_name, service_facility)
  2  SELECT 06, 'Rooms',
  3  (SELECT facility_id FROM Facilities WHERE facility_name = 'Boston')
  4* FROM Dual
SQL> /

1 row created. 
```

但是请注意，我通常更喜欢选择 Stefan 的语法，`Facilities`而不是`dual`使用标量子查询进行选择。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T23:02:19.890

您的插入语句应该是：

```
INSERT INTO 
    Services 
    (
        service_id, 
        service_name, 
        service_facility
    ) 
SELECT 
    06, 
    'Rooms', 
    facility_id 
FROM 
    Facilities 
WHERE 
    facility_name = 'Hotel' 
```

在当前状态下，我提供的查询将为每个设施的房间添加一个服务记录，名称为 Hotel。

And then add on a join to your 'Dual' table so that you get the correct number of inserts / are getting the correct facilities.

# python - 在 Python 中使用企业证书颁发机构进行 HTTPS 证书验证

> ID：10440307
> 
> 赞同：2
> 
> 时间：2012-05-03T22:42:35.273
> 
> 标签：python, ssl, https, certificate

我需要使用我们公司授权签署的证书对服务器进行 HTTPS 调用。如何配置 python 以信任此证书颁发机构？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T14:54:22.233

默认情况下（假设您使用的是`httplib.HTTPSConnection`），您无需执行任何操作，这[`httplib`不会进行任何证书验证](http://docs.python.org/library/httplib.html)（[同样适用于`urllib`](http://docs.python.org/library/urllib.html)）。

当然，这不是一个好方法，您应该验证服务器证书。对此有多种解决方案（请参阅[此问题](https://stackoverflow.com/questions/1087227/validate-ssl-certificates-with-python)）。

简而言之，您可能必须手动扩展`httplib.HTTPConnection`以将套接字转换为 SSL 套接字`ssl.wrap_socket`，以便能够插入验证回调（您需要验证主机名和证书）。

或者，如果您不受限制`httplib`，使用[PycURL](http://pycurl.sourceforge.net/)肯定会使这个更干净。您可以配置`CA_INFO`（或`CA_PATH`）以指向您的内部 CA 证书。此外，它通常不附带预定义的 CA 列表，但您可以从[此处](http://curl.haxx.se/docs/caextract.html)获取一个（从 Mozilla 列表转换而来），如果需要，可以将这些证书添加到您信任的 CA 列表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T16:13:24.867

如果您正在寻找解决此问题的示例代码，它位于[PycURL](http://pycurl.sourceforge.net/)中：

```
import pycurl
curl = pycurl.Curl()
curl.setopt(pycurl.URL, "https://your-secure-website.com/")
curl.setopt(pycurl.SSL_VERIFYPEER, 1)
curl.setopt(pycurl.SSL_VERIFYHOST, 2)
curl.setopt(pycurl.CAINFO, "/path/to/your-corporate-certificate-chain.crt")
curl.perform() 
```

确保将 your-corporate-certificate-chain.crt 文件放在可访问的位置，并使用 pycurl.CAINFO 选项指向它。

# java - 需要正则表达式模式进行输入验证

> ID：10440309
> 
> 赞同：-1
> 
> 时间：2012-05-03T22:42:49.887
> 
> 标签：java, regex

我是 Java 中正则表达式的新手。我想验证文本框中的输入。

文本框中的输入可以以任何小写字母开头。但它不应该以 dm 开头，例如 dmemployee。而 mdemployee 将工作。第一个字符 d 可以后跟数字或小写字符（m 除外）。

请为此建议一个正则表达式。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T22:47:21.883

使用负前瞻：

```
^(?!dm)(d[a-z0-9]|[a-ce-z])[a-z]*$ 
```

或使用显式（更长，但更容易理解）：

```
^(d[a-ln-z0-9]|[a-ce-z])[a-z]*$ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T22:47:24.510

您正在寻找的是负面的前瞻。另外，你的描述有点混乱。这可以是所有数字和小写字母还是只有小写字母，`d`允许后跟数字？

此正则表达式假定小写字母和数字的任何混合（不允许`dm`）

```
/^(?!dm)[a-z0-9]+$/ 
```

啊完美。这里的另一个答案是，如果数字只能跟随一个首字母`d`

# c - C 头文件和动态链接错误

> ID：10440310
> 
> 赞同：0
> 
> 时间：2012-05-03T22:42:58.463
> 
> 标签：c, header-files, dynamic-library

我创建了一个动态链接库。我唯一的问题是我的主程序无法识别我的头文件。头文件位于与我的主程序不同的文件夹中。我试过`#include "myheader.h"`了`#include "/folder/dir/myheader.h"`

这是我的 .h 包含的内容

```
 extern int afunction(int,int);
    extern int afunction(int,int); 
```

到目前为止，此代码有效

```
 gcc -fPIC -c filename1.c
    gcc -fPIC -c filename2.c

    gcc -shared -o libMylib.so filename1.o filename2.o 
```

然后我将 lib 复制到`/usr/local/lib`, 然后

```
 gcc main.c -L. -lMylib -o exeName -ldl 
```

我得到

```
 " myheader.h : no such file or directory. 
```

这是我的目录结构：

directory1 ----------------folder1(主程序.c)

directory1 ----------------folder2（myheader.h，以及 pgm 的函数）

朝着正确的方向前进会有所帮助，因为我已经编写了所有代码，而且我正处于最后阶段。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T22:46:05.020

你需要`gcc ... -I<some directory to myheader.h>`. 这将使编译器能够找到头文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T08:36:01.037

您可以将 lib 头文件与当前程序放在同一个文件夹中。

或像@Ed Heal 所说的那样......添加`-I<path>`包含头文件夹。

# c# - VS11上的Window Workflow Foundation教程

> ID：10440320
> 
> 赞同：2
> 
> 时间：2012-05-03T22:44:13.643
> 
> 标签：c#, workflow-foundation, visual-studio-2012

VS11 上没有一个关于 Window Workflow Foundation 的教程。任何显示如何在 VS 2008 上开始使用 Window Workflow Foundation 的示例，都无法在 VS11 上实现。

**对于VS11**上有关**Window Workflow Foundation**的任何教程，我将不胜感激。

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T23:16:28.983

VS11 的教程与 Visual Studio 2010 的教程不会有太大的不同。听起来你还没有完成 VS10 的教程，所以看看[想要学习 WF4 吗？](http://blogs.msdn.com/b/rjacobs/archive/2010/10/13/want-to-learn-windows-workflow-4-wf4.aspx)**

# asp.net - 传递变量，如 facebook

> ID：10440321
> 
> 赞同：0
> 
> 时间：2012-05-03T22:44:24.740
> 
> 标签：asp.net, asp.net-mvc-3

我想知道如何发送像 Facebook 这样的变量。

例如：facebook.com/action-man。在这里，他们将显示 actionman 个人资料，让我知道如何发送，例如：facebook.com/users.aspx?user=actionman。所以我想知道如何在没有查询参数的情况下发送用户名。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T22:50:30.570

使用 mvc 路由引擎。使用 MVC 是必须的，因此您应该已经熟悉它。

如果没有，你去： [http ://www.asp.net/mvc/overview/controllers-and-routing](http://www.asp.net/mvc/overview/controllers-and-routing)

# c++ - 针对 C/C++ 远程消息队列的建议

> ID：10440323
> 
> 赞同：14
> 
> 时间：2012-05-03T22:44:36.470
> 
> 标签：c++, c, linux, unix, message-queue

我正在从事一个项目，该项目涉及几个 C++ 程序，每个程序都接受输入并生成输出。数据（几十到几百字节，可能是 JSON）本质上是（异步地）向一个方向流动，并且程序需要位于 LAN 周围的不同 Linux 计算机上。

由于数据只向一个方向流动，我认为我不需要像 HTTP 这样的事务模型。我认为消息队列模型（即发即弃）最有意义，并且应该简化每个程序的逻辑。仅注意消息已成功添加到远程队列可能就足够了。

我正在寻找的是有关如何在 C 或 C++ 中实现此消息队列的建议。[POSIX](http://linux.die.net/man/7/mq_overview)和[Boost](http://www.boost.org/doc/libs/1_35_0/doc/html/boost/interprocess/message_queue.html)消息队列似乎仅限于单个主机，[RabbitMQ](http://www.rabbitmq.com/)似乎对 C/C++ 的支持较弱，而[MQ4CPP](http://www.sixtyfourbit.org/mq4cpp.htm)似乎不足以支持关键业务角色。我错了吗？Boost [ASIO](http://www.boost.org/doc/libs/1_49_0/doc/html/boost_asio.html)或[ACE](http://www.cs.wustl.edu/~schmidt/ACE.html)或自己编写套接字代码呢？我期待您的建议。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-05T02:01:54.657

在简单的消息传递支持方面，[ZeroMQ 很难被击败](http://www.zeromq.org/)。它在许多语言绑定中可用，并支持从简单的发送和接收到发布/订阅、扇出甚至消息传递管道的所有内容。该代码也很容易消化，并且可以很容易地在模式之间切换。

查看他们的[Weather Update Server 示例](http://zguide.zeromq.org/cpp:wuserver)（使用 20 种奇怪的语言）显示了创建发布/订阅设置是多么容易：

```
zmq::context_t context (1);
zmq::socket_t publisher (context, ZMQ_PUB);
publisher.bind("tcp://*:5556");
publisher.bind("ipc://weather.ipc");

while(1) {
    //  Send message to all subscribers
    zmq::message_t message(20);
    snprintf ((char *) message.data(), 20 ,
        "%05d %d %d", zipcode, temperature, relhumidity);
    publisher.send(message);
} 
```

我已经在一些混合的 C# 和 Python 进程上使用了它，没有太多麻烦。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T23:03:14.163

就个人而言，如果我理解这个问题，我认为您应该使用较低级别的 TCP 连接。它具有您想要的所有保证交付，并且具有相当好的 Berkley Sockets API。我发现如果你愿意实现一个非常简单的协议（例如，四字节的 NBO 消息长度，*n*字节的数据），你可以得到非常简单、非常可定制和非常简单的。如果你这样做，你也（如前所述）得到很好的 C 支持（这意味着 C++ 支持，虽然东西不在类和方法中）。套接字代码也很简单，它们具有异步 IO，带有用于 Linux/UNIX/POSIX IO 功能的标准异步标志（这是其他好处之一，如果您对 POSIX 编程有所了解，那么您基本上知道套接字 API） .

学习套接字 API 的最佳资源之一是：

*   Beej 的网络编程指南：[http](http://beej.us/guide/bgnet/) ://beej.us/guide/bgnet/ ，如果除了细节之外还需要整体编程模型，这非常好
*   手册页：如果您只需要函数签名、返回值和参数，这些就是您所需要的。我发现 Linux 的写得很好而且很有用（证明：看看我的控制台：`man`, `man`, `man`, `man`, `man`, `make`, `man`, ...）

此外，为了使数据网络可发送，如果您的数据是 JSON，您无需担心。因为 JSON 只是 ASCII（或 UTF-8），所以它可以通过网络以原始形式发送，只有一个长度标头。除非您尝试发送复杂的二进制文件，否则这应该是完美的（如果您需要复杂的二进制文件，请查看序列化或准备很多`Segmentation Fault`）。

* * *

此外，如果您使用套接字路径，您可能想要使用 TCP。尽管 UDP 会为您提供单向方面，但使其可靠这一事实使您的自制解决方案与 Linux 内核提供的顶级 TCP 相抗衡，但 TCP 是一个明显的选择。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T00:46:49.577

RabbitMQ 只是[AMQP](http://en.wikipedia.org/wiki/AMQP)的一种实现。您可能想要研究[Apache Qpid](http://en.wikipedia.org/wiki/Apache_Qpid)或其他可能对 C/C++ 更友好的变体。尽管我没有第一手经验，但有一个用于 C 的[libamqp 。](https://github.com/libamqp/libamqp)我不知道您的确切要求是什么，但正确实施的 AMQP 具有工业实力，并且应该比您在短时间内手工构建的任何东西都要快几个数量级且更稳定。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-04T16:40:13.257

另一个消息传递解决方案是 ICE ( [http://www.zeroc.com/](http://www.zeroc.com/) )。它是多平台、多语言的。它更多地使用 RPC 方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-03T22:55:14.697

我正在为类似的应用程序使用 Boost 序列化和套接字发送。您可以在此处找到序列化的示例：

[http://code.google.com/p/cloudobserver/wiki/TutoriaslBoostSerialization](http://code.google.com/p/cloudobserver/wiki/TutoriaslBoostSerialization)

在这个页面上：

[http://www.boost.org/doc/libs/1_38_0/doc/html/boost_asio/examples.html](http://www.boost.org/doc/libs/1_38_0/doc/html/boost_asio/examples.html)

在序列化下，您将找到有关如何制作服务器和客户端的示例。在特定端口上创建一个服务器，您可以在多台计算机上生成多个可以与该端口通信的客户端。

使用 boost 序列化的缺点是，如果你有一个简单的数据结构要序列化，它会产生很大的开销，但它确实很容易。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-03T23:11:50.923

另一个推荐是分布式框架[OpenCL](http://en.wikipedia.org/wiki/OpenCL)。文档[The OpenCL C++ Wrapper for API](http://www.khronos.org/registry/cl/specs/opencl-cplusplus-1.1.pdf)提供了有关该库的更多信息。特别是，API 函数`cl::CommandQueue`对于在网络设置中的设备上创建队列可能很有意义。

# c - 字节数组和 8 位整数的模算法：8 位 = 字节 % 8 位

> ID：10440326
> 
> 赞同：4
> 
> 时间：2012-05-03T22:44:51.323
> 
> 标签：c, algorithm, modulo

我需要创建一个用 C 实现的算法，该算法在任意数量的字节和一个字节之间进行模运算。看到这个：

```
typedef struct{
    u_int8_t * data;
    u_int16_t length;
}UBigInt;
u_int8_t UBigIntModuloWithUInt8(UBigInt a,u_int8_t b){

} 
```

对于 2 的幂，可以使用 a & (b-1)，但是非 2 的幂呢？

我意识到一种方法是：a - b*(a/b)

这将需要使用 UBigIntDivisionWithUInt8 和 UBigIntMultiplicationWithUInt8 和 UBigIntSubtractionWithUBigInt。可能有更有效的方法来做到这一点？

谢谢你。

这是我现在拥有的实现：

```
u_int8_t UBigIntModuloWithUInt8(UBigInt a,u_int8_t b){
    if (!(b & (b - 1)))
        return a.data[a.length - 1] & b - 1; // For powers of two this can be done
    // Wasn't a power of two.
    u_int16_t result = 0; // Prevents overflow in calculations
    for(int x = 0; x < a.length; x++) {
        result *= (256 % b);
        result %= b;
        result += a.data[x] % b;
        result %= b;
    }
    return result;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T00:54:55.437

您可以使用霍纳方法的变体。
使用以下公式逐字节处理：
`a % b = ((a // 256) % b) * (256 % b) + (a % 256) % b`，其中 x // y 是舍入除法（普通 C 整数除法）。这将起作用的原因是同余模 b 是等价关系。
有了这个，你就有了一个`O(length)`算法，或者`O(log(a))`.
示例片段（未经测试，我的 C 技能生疏）：

```
u_int16_t result = 0; // Just in case, to prevent overflow
for(i = 0, i<a.length; i++) {
    result *= (256 % b);
    result %= b;
    result += (a[i] % b);
    result %= b;
} 
```

一些理由： `a = (a // 256) * 256 + (a % 256)`，因此 `a % b = ((a // 256) * 256) % b + ((a % 256) % b)`。然而`a % 256 = a[n-1]`和`a // 256 = a[0 .. n-2]`。以类似于霍纳规则的方式反转动作会给你呈现的片段。

# ms-access - 组合框 VBA 编码问题

> ID：10440328
> 
> 赞同：1
> 
> 时间：2012-05-03T22:45:01.797
> 
> 标签：ms-access, vba, if-statement, combobox

我正在使用 Access 制作学生数据库。作为我的数据库的一部分，我有一个表格，要求用户从组合框中选择一门课程。我有不同的课程术语，对应于他们从下拉框中选择的课程。为了保持一致性，还使用下拉框选择术语。

在我的代码中，我有一个`After_Click`带有以下代码的事件过程：

```
Private Sub Course_ID_AfterUpdate()

  If Me![Course ID] = 1 Or Me![Course ID] = 2 Or Me![Course ID] = 3 Then
  Me![Combo30].Visible = True Else: Me![Combo30].Visible = False End If

  If Me![Course ID] = 4 Then Me![Combo26].Visible = True Else:
  Me![Combo26].Visible = False End If

  If Me![Course ID] = 5 Then Me![Combo22].Visible = True Else:
  Me![Combo22].Visible = False End If

  If Me![Course ID] = 6 Then Me![Combo28].Visible = True Else:
  Me![Combo28].Visible = False End If

  If Me![Course ID] = 7 Then Me![Combo24].Visible = True Else:
  Me![Combo24].Visible = False End If

End Sub 
```

当我第一次单击表单时，所有术语下拉框都会显示。我如何设置它（在 VBA 代码中），以便默认情况下显示与默认值`Term ID`对应的并且隐藏`Course ID`其余的`Term ID`下拉框？

汤姆

我附上了默认的截图`Course ID`。请注意，所有组合框似乎都是可见的。

![在此处输入图像描述](../Images/76ae13b7845b97a27e03300da4726e68.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T22:39:47.060

In a continuous form, every control existss only once over all the records. You cannot have different formatting on the same control in different records. As soon as you hide a control in one record it is hidden in all records.

What do you have in those boxes? is there a chance to have one combo that could be filled in the OnEntring event?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T01:30:16.200

**选项 1** 定义默认课程并在表单的初始加载时，使其预先选择并具有相应的组合框可见 使其余组合框默认不可见（即，通过将其余组合框的可见属性设置为设计时为假）

**选项 2** 如果您不能拥有默认课程，则默认情况下使所有术语组合框不可见。因此，最初根本没有可用的术语组合框。

# cakephp - 将来自 Facebook、Google、Twitter 等的登录干净地集成到 CakePHP 中？

> ID：10440330
> 
> 赞同：9
> 
> 时间：2012-05-03T22:45:04.630
> 
> 标签：cakephp, oauth, openid, cakephp-2.0

**问题总结：**
我想创建一个基于 CakePHP 的注册和登录系统，提供多种不同的网关，例如 OpenID、Facebook、Twitter 等。我希望系统允许用户将多种形式的身份识别与其帐户相关联。

经过大量搜索，我发现任何允许不止一种授权方法的东西都是空白的。Cake 的授权系统确实使事情变得复杂，因此使用通用 PHP 的教程并不是很有效。有没有人有解决方案，或者我可以从哪里开始？

**示例：**
举一个简单的示例，查看 StackExchange 网络：您可以使用堆栈交换帐户、Google、Yahoo、Facebook 或 OpenID 登录/注册。登录后，您可以将更多这些方法添加到您的帐户中，以便通过多种方式识别您。我意识到 StackExchange 可能不是用 Cake 编写的，但它可以作为示例。

谢谢！

* * *

* * *

**原始问题**

这是独家新闻：我想为在 CakePHP 中提供 oauth/openid 的每个主要服务集成一个简单的注册/登录系统。

基本上，我希望我的用户能够注册旧时尚方式（包括验证电子邮件）或使用现有服务来验证自己。我希望他们之后能够使用该服务或使用用户名和密码登录。

现在，我找到了用于完整的 facebook 集成等的非常深入的插件，但底线是我现在只想使用它进行注册和登录，我希望无论哪个体验都一样他们选择的服务（另外，我想了解它是如何工作的……因为这毕竟是关于学习 CakePHP 的）。

如果他们愿意，我还希望他们能够在创建帐户后链接其他服务。简而言之，他们的帐户应该能够链接到任意数量的登录服务，或者根本没有。

我到底该怎么做？

谢谢，

詹姆士

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T02:02:04.017

[看起来现在有一个使用Opauth](http://opauth.org/)的第三方库可用，详见[此面包店线程](http://bakery.cakephp.org/articles/uzyn/2012/06/25/simple_3rd-party_provider_authentication_with_opauth_plugin)

这是 CakePHP 版本的 github 页面：

[https://github.com/uzyn/cakephp-opauth](https://github.com/uzyn/cakephp-opauth)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T00:06:19.983

很好的问题——我们的 CakePHP 开发工作室可能会在接下来的几个月里考虑这个问题。我怀疑你会更幸运地研究这个作为一个一般的 PHP 问题，*然后*你可以如何将该解决方案移植到 Cake 中。一定要发回你发现的任何东西。

您可能会发现此线程是一个有用的起点，尽管它是在 2010 年发布的：

*   [与所有主要提供商实施单点登录的最佳方式？](https://stackoverflow.com/questions/4061537/best-way-to-implement-single-sign-on-with-all-major-providers)

# ruby-on-rails - Rails over Webrick 中的 unicode 失败

> ID：10440332
> 
> 赞同：1
> 
> 时间：2012-05-03T22:45:08.353
> 
> 标签：ruby-on-rails, unicode, webrick

Rails 3.2.2
Ruby 1.9.3
我试过的所有浏览器（Aurora、IE、Chrome）
Windows 7

我很享受能够在数据库和客户端之间可靠地来回传递 unicode。据我所知，它完美无缺。

然而，这只会使我遇到的问题更加令人烦恼。在 Rails 中使用包含各种特殊字符的字符串文字时（例如，在为模型定义的方法中），我导致 Webrick 完全失败，并返回 500“我们很抱歉，但发生了一些事情”错误。

例如，假设我有字符串“O₂”。我可以将该值发布到一个表单中，稍后再获取它，一切都很好。但是说我有一个方法

```
def fix_name molecule_name 
  fixed_name = molecule_name
  case molecule_name
  when 'O2' then fixed_name = 'O₂'
  end
  return fixed_name
end 
```

然后，如果我调用 fix_name，即使案例在没有匹配的情况下失败，服务器也会突然失败（在说它已成功呈现通用 new.html 页面之后）。

此外，如果我切换到直接指定 unicode，如

```
def fix_name molecule_name 
  fixed_name = molecule_name
  case molecule_name
  when 'O2' then fixed_name = "O\x20\x82"
  end
  return fixed_name
end 
```

我得到通用的“�”字符而不是“₂”。

有没有其他人有这个问题？这里会发生什么？

**更新**

好的，在对 Unicode 和 UTF-8 进行了更好的教育之后，我能够在这方面少一点尼安德特人。

我发布的代码的修复是

```
def fix_name molecule_name 
  fixed_name = molecule_name
  case molecule_name
  when 'O2' then fixed_name = "O\xe2\x82\x82"
  end
  return fixed_name
end 
```

或者可能更好：

```
def fix_name molecule_name 
  fixed_name = molecule_name
  case molecule_name
  when 'O2' then fixed_name = "O\u{2082}"
  end
  return fixed_name
end 
```

因此，正确的字节码是道德的！

但这仍然不能解释为什么我不能输入文字字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T01:50:04.580

让我们说，Ruby 1.9.3 对 rb 文件中的编码非常“严格”。

[http://yehudakatz.com/2010/05/05/ruby-1-9-encodings-a-primer-and-the-solution-for-rails/](http://yehudakatz.com/2010/05/05/ruby-1-9-encodings-a-primer-and-the-solution-for-rails/)

[http://blog.grayproductions.net/articles/ruby_19s_three_default_encodings](http://blog.grayproductions.net/articles/ruby_19s_three_default_encodings)

简短的回答是您应该尝试添加：

```
# encoding: UTF-8 
```

到您的 .rb 文件的顶部，然后 ruby​​ 1.9.3 不应阻塞代码中的 UTF 字符。

# php - 从 PHP 加载的 HTML 文件执行 PHP 代码

> ID：10440335
> 
> 赞同：1
> 
> 时间：2012-05-03T22:45:11.633
> 
> 标签：php, html

我在 HTML 中创建了一个小 DIV，由 main_login.php 填充 main_login.php 加载主页，如果有会话启动，则在侧面加载成员内容如果没有启动会话，则 main_login.php 文件加载带有登录字段的主页.html 在旁边

*   main_login.php：[http ://pastebin.com/vkhccGSB](http://pastebin.com/vkhccGSB)
*   loginfields.html：[http ://pastebin.com/fDJjTjsf](http://pastebin.com/fDJjTjsf)

现在，每当加载 loginfields.html 时，该页面上的按钮在我按下时都不会执行。当我打开 localhost/loginfields.html 时，它就像一个魅力。

是什么阻止 login_check.php 加载？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T22:48:56.210

我将在这里进行大胆的猜测，并说您正在`main_login.php`通过 AJAX 加载并使用`innerHTML`（或 jQuery's `html()`）将其放入页面中。我也猜你的按钮是由`<script>`标签供电的。

`<script>`*不*执行加载的标签`innerHTML`。您必须将其作为外部脚本加载（即使这样我也不确定是否会加载它），或者使用适当的 DOM 函数将脚本附加到页面，或者将 HTML 和 JavaScript 从响应中分离并运行JS 通过.*`innerHTML``eval`*

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T22:56:09.403

如果您只是尝试将 loginfields.php 加载到页面中，则可以使用`include('loginfields.php')`而不是 fopen() 函数。*

# asp.net - iOS中的锚链接

> ID：10440342
> 
> 赞同：0
> 
> 时间：2012-05-03T22:45:37.907
> 
> 标签：asp.net, html, ios

我的锚链接适用于所有平台，IE、Firefox、Chrome 和 Safari for Windows，但出于某种原因，它不想在 iOS 的 Safari 上运行。链接在这里：

```
<li><a id="fooId" href="http://foo.aspx">Main</a></li> 
```

当我单击链接时，页面不会重定向。但是，如果您按住按钮并在新选项卡中打开它，它似乎可以工作。任何想法会导致这种情况。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T15:19:15.180

我找到了解决方案，并认为我会发布它。iOS 设备不喜欢任何 onmouse 或 mouse over 事件。启用 JavaScript 解决了这个问题。

# javascript - 你知道一个 javascript 库可以让你嵌入实时更新网页格式的文本区域吗？

> ID：10440343
> 
> 赞同：0
> 
> 时间：2012-05-03T22:45:40.157
> 
> 标签：javascript, jquery, html, real-time, wysiwyg

我将在即将到来的课程中向一些有风险的孩子介绍 HTML，我们只有很少的时间向他们展示制作自己的网页是多么酷。

我想做的是建立一个充满文本框的页面模板，孩子们可以用文本和一些简单的格式标签填充这些文本框。当他们更新时，分屏会更新他们的编辑结果。

我正在寻找有助于实现上述目标的免费/开源 jquery 或其他 javascript 库。

实际上，它与您输入问题时 stackoverflow 在预览框中所做的非常相似。

与其盲目地从其他网站上提取代码，我更喜欢带有实际文档的东西（或者至少是一个简单的例子。）

谷歌搜索显示了许多可以下载或在其他网站上使用的工具和东西。这里的理想是我嵌入到页面中的库，并在我认为合适的位置放置。

谢谢你的帮助

**编辑**

正如一些人所指出的 - 这是在某些事件上更新 div 的简单问题。

```
<script type="text/javascript">
    $(window).keyup(function(){ 
        $('#about_me_result').html($('#about_me').val());
    });
</script>

<textarea id="about_me" name="aboutMe" rows="9" cols="60">Write a little something about you...</textarea> 
```

我选择了 keyup ，因为 keydown 总是将最后一个字符与另一个元素分开。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T22:48:38.383

正如 btown 在下面的回复中建议的那样，您可以将它们发送到 jsfiddle.net。

或者，如果你想把类似的东西放在你自己的页面上，你可以自己做饭！在这里玩：http: [//jsfiddle.net/lbstr/LD9kA/](http://jsfiddle.net/lbstr/LD9kA/)

```
<textarea id="code"></textarea>
<div id="result"></div>

$('#code').keyup(function(e){
    $('#result').html($(this).val());
}); 
```

或者，也许您想要一个“更新”按钮，而不是在键盘上更新。

```
<textarea id="code"></textarea>
<button type="button" id="update">Update</button>
<div id="result"></div>

$('#update').click(function(){
    $('#result').html($(this).val());
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T22:48:45.897

没有真正需要图书馆。只需更新文档

```
$(window).keydown(function(){ 

    $('#element').html($('#sometextarea').val());
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T02:03:04.090

[w3c Schools Tryit Editor](http://www.w3schools.com/html/tryit.asp?filename=tryhtml_basic)比jsfiddle 简单得多。

唯一的事情是您必须按一个按钮才能看到 HTML 更新。这可能不是一件坏事，尽管好像它在每个键上都发生了变化，当您输入一半完成的标签和属性时，结果网页可能会变得疯狂。

# android - WebView / App 标签交互

> ID：10440355
> 
> 赞同：1
> 
> 时间：2012-05-03T22:47:24.243
> 
> 标签：android

我正在使用 WebView 做一些非常基本的 html 显示，并且一切正常。我想做的一件事是当用户在页面之间导航时更新应用程序标签。我相信我将其称为应用程序标签的正确名称。这是您的字符串 app_name 通过清单显示的区域。

所以无论如何我想更新它来说明每个页面的标签，但如果可能的话，我不确定从哪里开始研究这种类型的交互。我见过其他人做的另一个选择，但不知道如何让我的 WebView 覆盖应用程序标签区域..或删除它或他们所做的任何事情。删除后，我将在我的页面中添加一个显示 .

TIA JB

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T22:49:22.807

> 这是您的字符串 app_name 通过清单显示的区域。

我的猜测是您指的是标题栏（在旧设备上）或操作栏（在新设备上，以及使用 ActionBarSherlock 的旧设备上）。

您可以通过调用[`setTitle()`](http://developer.android.com/reference/android/app/Activity.html#setTitle%28java.lang.CharSequence%29)您的活动来修改那里显示的文本。

# java - Spring/Java - 编码 HTML 实体 + XHR

> ID：10440357
> 
> 赞同：0
> 
> 时间：2012-05-03T22:47:25.383
> 
> 标签：java, ajax, spring, security, escaping

使用常规 JSP 表单打印到客户端时，配置 web.xml 对我来说正确工作（http://stackoverflow.com/questions/2147958/how-do-i-prevent-people-from-doing-xss-in -java)。

是否有关于如何转义/实体化字符串的“最佳实践”，这些字符串将通过 JSON 发送到 jQuery 函数，然后用这些值填充 DOM？任何推荐的库或 Spring Web Framework 内置插件？

1.  jQuery $.ajax 调用 Spring MVC
2.  Spring MVC 以 JSON 响应
3.  （魔术编码发生，例如`<a>`变成`&lt;a&gt;`）<=这个
4.  jQuery 接收 JSON 并填充 DOM XSS 安全

提前致谢！

编辑：我有时也会故意发送 HTML，因此解决方案需要能够仅处理用户输入。可能会证明每个用户中毒的字符串都必须手动清理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T09:44:49.180

试试我写给我用的这个类。检查是否缺少任何情况可能很有用。. . 因为还没有对此进行详细的测试。

如果出现任何问题，请告诉我。. . （添加对应的jar Apache commons和net.sf.json）

```
package myutil;

import java.util.Iterator;

import net.sf.json.JSONArray;

import net.sf.json.JSONObject;

import org.apache.commons.lang.StringEscapeUtils;

public class JSONCleaner {

    public static void main(String[] args) {
        // TODO Auto-generated method stub
        JSONObject jsonchild2=new JSONObject();
        jsonchild2.put("subchlidkey1", "subchildvalue1");
        jsonchild2.put("subchlidkey2", "subchildvalue2");
        jsonchild2.put("subchlidkey3", "subchildvalue3");

        JSONObject jsonchild=new JSONObject();
        jsonchild.put("chlidkey1", "childvalue1");
        jsonchild.put("chlidkey2", "childvalue2");
        jsonchild.put("chlidkey3", "childvalue3");

        JSONArray jsonarray=new JSONArray();
        jsonarray.add("option1");
        jsonarray.add("<p>option2</p>");
        jsonarray.add(jsonchild2);

        JSONObject json=new JSONObject();
        json.put("name", "<b>nirbhay</b>");
        json.put("age", 23);
        json.put("jsonChildObject", jsonchild);
        json.put("weight", 65);
        json.put("array", jsonarray);

        System.out.println(cleanJSONObject(json));
        //System.out.println(json.getString("name"));
    }

    public static JSONObject cleanJSONObject(JSONObject jsonObject)
    {
        JSONObject returnJson=new JSONObject();
        Iterator<?> keys = jsonObject.keys();
        while( keys.hasNext() ){
            String key = (String)keys.next();
            //System.out.println(jsonObject.get(key));
            if(jsonObject.optJSONObject(key)==null)
            {
                if(jsonObject.optJSONArray(key)!=null)
                {
                returnJson.put(key, cleanJSONArray(jsonObject.getJSONArray(key)));
                }
                else
                {
                    returnJson.put(key, StringEscapeUtils.escapeHtml(jsonObject.getString(key)));
                }
            }
            else
            {
                returnJson.put(key,cleanJSONObject(jsonObject.optJSONObject(key)));
            }
        }

        return returnJson;
    }

    private static JSONArray cleanJSONArray(JSONArray array)
    {

        JSONArray returnArray=new JSONArray();
        for(int i=0,j=array.size();i<j;i++)
        {
            if(array.optJSONObject(i)==null)
            {
                if(array.optJSONArray(i) != null)
                {
                returnArray.add(cleanJSONArray((JSONArray) array.get(i)));
                }
                else
                {
                    returnArray.add(StringEscapeUtils.escapeHtml(array.getString(i)));
                }
            }
            else
            {
                returnArray.add(cleanJSONObject((JSONObject) array.get(i)));
            }

        }
        return returnArray;
    }
} 
```

# jquery - jQuery mouseenter 第二次然后执行此操作

> ID：10440363
> 
> 赞同：0
> 
> 时间：2012-05-03T22:47:47.127
> 
> 标签：jquery

这是我的代码：http: [//jsfiddle.net/sZKeM/1/](http://jsfiddle.net/sZKeM/1/)

所以基本上它在我悬停按钮时显示框，当我从框中悬停时它会隐藏。当我再次悬停按钮时，我想隐藏框，如果再次悬停，它将再次显示框。

```
$('.btn').mouseenter(function(){
   $('.box').css('display','block');
});

$('.box').mouseenter(function(){
   $('.box').css('display','block');
});

$('.box').mouseleave(function(){
   $('.box').css('display','none');
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T23:57:19.860

很难从您的问题和评论中准确理解您想要什么。这是您正在寻找的行为：

[http://jsfiddle.net/nSfrK/](http://jsfiddle.net/nSfrK/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T22:49:05.300

使用 jQuery[切换](http://api.jquery.com/toggle/)

```
jQuery(".btn").on('mouseover', function (e) {
    jQuery('.btn').toggle();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T22:51:41.783

```
$('.btn').mouseenter(function(){
   var visible = $('.box').css('display') == "block"
       $('.box').css('display',visible ? '' : 'block');

}); 
```

# jquery - jQuery 滑块未按预期运行

> ID：10440366
> 
> 赞同：0
> 
> 时间：2012-05-03T22:48:09.403
> 
> 标签：jquery

有人介意看看并解释我在这里做错了什么吗？

箭头在我身上翻转，需要单击 2 次才能使其正常工作。

有没有更好的方法来做到这一点？

谢谢。

请看这个链接：http: [//jsfiddle.net/ddub/j3Dfr/](http://jsfiddle.net/ddub/j3Dfr/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T22:55:30.950

您目前拥有以下代码...

```
// sliding load board search option
$(document).ready(function () {
    $(".topMenuAction").click(function () {
        if ($("#openCloseIdentifier").is(":hidden")) {

                $("#slider").animate({
                    marginTop: "-55px"  //adjust as needed
                }, 390);

            $("#topMenuImage").html('<img src="https://lh5.googleusercontent.com/-4P1KGHJcd7w/T6MFfHRttBI/AAAAAAAACNA/JgwzfhkIrAs/w208-h208-n-k/arrow-up.png"  height="50px" width="50px" alt="open" />');
            $("#openCloseIdentifier").show();
        } else {
            $("#slider").animate({
                marginTop: "24px"
            }, 350);
            $("#topMenuImage").html('<img src="https://lh5.googleusercontent.com/-Xgkkkl6QmoM/T6MFfAqNwWI/AAAAAAAACNA/Ghf_F21rz0E/w208-h208-n-k/arrow-down.png"  height="50px" width="50px"alt="close" />');
            $("#openCloseIdentifier").hide();
        }
    });
});​ 
```

主要问题是您的 marginTop 动画只是向后。如果您将第一个设置为 24 像素而不是 -55 像素，然后将第二个设置为 -55 像素而不是 24 像素，就像下面的代码一样，它的行为应该符合您的预期！

```
// sliding load board search option
$(document).ready(function () {
    $(".topMenuAction").click(function () {
        if ($("#openCloseIdentifier").is(":hidden")) {

                $("#slider").animate({
                    marginTop: "-55px"  // Changed this to -55px
                }, 390);

            $("#topMenuImage").html('<img src="https://lh5.googleusercontent.com/-4P1KGHJcd7w/T6MFfHRttBI/AAAAAAAACNA/JgwzfhkIrAs/w208-h208-n-k/arrow-up.png"  height="50px" width="50px" alt="open" />');
            $("#openCloseIdentifier").show();
        } else {
            $("#slider").animate({
                marginTop: "24px" // Changed this to 24px
            }, 350);
            $("#topMenuImage").html('<img src="https://lh5.googleusercontent.com/-Xgkkkl6QmoM/T6MFfAqNwWI/AAAAAAAACNA/Ghf_F21rz0E/w208-h208-n-k/arrow-down.png"  height="50px" width="50px"alt="close" />');
            $("#openCloseIdentifier").hide();
        }
    });
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T22:57:40.690

您的初始状态与状态不匹配`hidden`；解决这个问题，[它可以工作](http://jsfiddle.net/j3Dfr/51/)。

```
$(document).ready(function () {
    $("#openCloseIdentifier").hide();
    $("#topMenuImage").html('<img src="https://lh5.googleusercontent.com/-Xgkkkl6QmoM/T6MFfAqNwWI/AAAAAAAACNA/Ghf_F21rz0E/w208-h208-n-k/arrow-down.png"  height="50px" width="50px"alt="close" />');

    // Your original code...
} 
```

您可能需要考虑提前定义一个带有该`'<img ...>'`部分的字符串变量......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T22:57:49.003

简单的; 检查 is(":hidden") 返回错误值，因为它尚未隐藏 - 由于负溢出，它只是不可见。添加

```
 $("#openCloseIdentifier").hide(); 
```

# c# - 在 Windows 窗体上连续旋转图片

> ID：10440370
> 
> 赞同：0
> 
> 时间：2012-05-03T22:48:19.617
> 
> 标签：c#, visual-studio-2010, picturebox

我正在尝试使用计时器类和代码项目的组合在图片框控件（Visual Studio 2010 C#）中平滑地旋转图像。我遇到的问题是图片不旋转或出现线程异常。关于“该对象正在其他地方使用”的一些信息。这是代码的主要部分，我将非常感谢您提供的任何帮助。谢谢你。

```
 private void Form1_Load(object sender, EventArgs e)
    {
        timer.Elapsed += new ElapsedEventHandler(timer_Elapsed);
        timer.Start();
    }

    private void timer_Elapsed(object sender, EventArgs e)
    {
        //Graphics graphic = Graphics.FromImage(pictureBox1.Image); 
        //graphic.RotateTransform(45); 

        this.Invoke(new MethodInvoker(delegate { RotateImage(pictureBox1.Image, 10); }));    

    }

    public static Bitmap RotateImage(Image image, float angle)
    {
        // center of the image
        float rotateAtX = image.Width / 2;
        float rotateAtY = image.Height / 2;
        bool bNoClip = false;
        return RotateImage(image, rotateAtX, rotateAtY, angle, bNoClip);
    }

    public static Bitmap RotateImage(Image image, float angle, bool bNoClip)
    {
        // center of the image
        float rotateAtX = image.Width / 2;
        float rotateAtY = image.Height / 2;
        return RotateImage(image, rotateAtX, rotateAtY, angle, bNoClip);
    }

    public static Bitmap RotateImage(Image image, float rotateAtX, float rotateAtY, float angle, bool bNoClip)
    {
        int W, H, X, Y;
        if (bNoClip)
        {
            double dW = (double)image.Width;
            double dH = (double)image.Height;

            double degrees = Math.Abs(angle);
            if (degrees <= 90)
            {
                double radians = 0.0174532925 * degrees;
                double dSin = Math.Sin(radians);
                double dCos = Math.Cos(radians);
                W = (int)(dH * dSin + dW * dCos);
                H = (int)(dW * dSin + dH * dCos);
                X = (W - image.Width) / 2;
                Y = (H - image.Height) / 2;
            }
            else
            {
                degrees -= 90;
                double radians = 0.0174532925 * degrees;
                double dSin = Math.Sin(radians);
                double dCos = Math.Cos(radians);
                W = (int)(dW * dSin + dH * dCos);
                H = (int)(dH * dSin + dW * dCos);
                X = (W - image.Width) / 2;
                Y = (H - image.Height) / 2;
            }
        }
        else
        {
            W = image.Width;
            H = image.Height;
            X = 0;
            Y = 0;
        }

        //create a new empty bitmap to hold rotated image
        Bitmap bmpRet = new Bitmap(W, H);
        bmpRet.SetResolution(image.HorizontalResolution, image.VerticalResolution);

        //make a graphics object from the empty bitmap
        Graphics g = Graphics.FromImage(bmpRet);

        //Put the rotation point in the "center" of the image
        g.TranslateTransform(rotateAtX + X, rotateAtY + Y);

        //rotate the image
        g.RotateTransform(angle);

        //move the image back
        g.TranslateTransform(-rotateAtX - X, -rotateAtY - Y);

        //draw passed in image onto graphics object
        g.DrawImage(image, new PointF(0 + X, 0 + Y));

        return bmpRet;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T22:55:56.673

我认为您应该在 OnPaint 或 OnDraw 事件中无效并绘制

```
private void timer_Elapsed(object sender, EventArgs e)
{
    //Graphics graphic = Graphics.FromImage(pictureBox1.Image); 
    //graphic.RotateTransform(45); 

   // this.Invoke(new MethodInvoker(delegate { RotateImage(pictureBox1.Image, 10); }));    

    pictureBox1.Invalidate();
} 
```

在您的表单中，您应该启用此样式以获得更好的性能和平滑度

```
SetStyle( ControlStyles.ResizeRedraw, true );
SetStyle( ControlStyles.UserPaint, true );
SetStyle( ControlStyles.AllPaintingInWmPaint, true );
SetStyle( ControlStyles.OptimizedDoubleBuffer, true ); 
```

# c# - ASP.NET - 请求参数和“&”分隔符问题

> ID：10440376
> 
> 赞同：0
> 
> 时间：2012-05-03T22:48:57.550
> 
> 标签：c#, asp.net, url

我们有一些 UTF-8 XML 由包含 url 的 REST 处理程序返回。这些 url 有一个 & 符号，当转义为 UTF-8 兼容时，如下所示：

```
http://domain.com?param1=a&amp;param2=b 
```

问题是，当它被剪切/粘贴到浏览器中时，结果不会根据转义的 & 符号正确分离。下面是一个例子：

这有效：

```
http://api.citysourced.com/reportimage.ashx?reportid=30885&imagesize=Small 
```

这些不会：

```
http://api.citysourced.com/reportimage.ashx?reportid=30885&amp;imagesize=Small
http://api.citysourced.com/reportimage.ashx?reportid=30885%26imagesize=Small 
```

我的 IIS 配置 (IIS 6) 有问题吗？上面的处理程序是用 C# .NET 4.0 编写的标准通用处理程序。

我在这里查看了其他文章，但没有一篇有正确的答案。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T06:39:22.740

您的 IIS 配置没有问题。XML 具有某些必须转义的[预定义实体](http://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references#Predefined_entities_in_XML)（字符），否则它们会破坏文档。您只需要在使用数据时对数据进行转义。

# java - 在 Spring 中访问远程 JNDI

> ID：10440379
> 
> 赞同：3
> 
> 时间：2012-05-03T22:49:04.577
> 
> 标签：java, spring, jndi

我想知道如何在 Spring 3 中从远程 JNDI 获取对象。在哪里指定 URL，如何在上下文文件中设置它等等。我发现一些分散的信息表明这是可能的，但没有关于如何为不同服务器上的 JNDi 执行此操作的单一来源。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T15:39:00.107

例如，您可以在像这样的基本配置中使用[JndiObjectFactoryBean](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/jndi/JndiObjectFactoryBean.html)类：

```
<bean id="someId" class="org.springframework.jndi.JndiObjectFactoryBean">
        <property name="jndiName" value="yourLookupNameGoesHere" />
        <property name="jndiEnvironment">
            <props>
                <prop key="java.naming.provider.url">yourRemoteServerGoesHere:PortGoesHere</prop>
                <prop key="java.naming.factory.initial">yourNamingContextFactoryGoesHere</prop>
                <prop key="java.naming.factory.url.pkgs">yourPackagePrefixesGoHere</prop>
                <!-- other key=values here -->
            </props>
        </property>
        <!-- other properties here-->
    </bean> 
```

然后，您可以根据需要指定其他[环境属性](http://docs.oracle.com/javase/jndi/tutorial/beyond/env/overview.html)，还可以使用[Spring jee 模式](http://www.springframework.org/schema/jee/spring-jee-3.0.xsd)来简化配置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-16T22:35:24.897

在上面扩展了一个使用 CAMEL Jms 组件连接到 JBoss EAP7 中的远程 activeMQ 服务器的例子。

您将在 Spring XML 应用程序上下文中需要这 3 个 bean：

```
<bean id="remoteQCF" class="org.springframework.jndi.JndiObjectFactoryBean">
  <property name="jndiName" value="${factoryJndiName}" />
  <property name="jndiEnvironment">
    <props>
      <prop key="java.naming.provider.url">http-remoting://${remoteHost}:${remotePort}</prop>
      <prop key="java.naming.factory.initial">org.jboss.naming.remote.client.InitialContextFactory</prop>
      <!-- other key=values here <prop key="java.naming.factory.url.pkgs">yourPackagePrefixesGoHere</prop> -->
    </props>
  </property>
</bean>
<bean id="remoteQCFproxy"
    class="org.springframework.jms.connection.UserCredentialsConnectionFactoryAdapter">
  <property name="targetConnectionFactory" ref="remoteQCF" />
  <property name="username" value="${username}" />
  <property name="password" value="${password}" />
</bean>
<bean id="jmsremote" class="org.apache.camel.component.jms.JmsComponent">
  <property name="connectionFactory" ref="remoteQCFproxy" />
</bean> 
```

其中每个 ${xxx} 表示您应在应用程序上下文中就地或使用属性占位符提供的值。

如果您不需要用户和密码来打开 JMS 队列连接，您可以省略第二个 bean，直接将第一个 bean 引用为 Camel JmsComponent bean 中的 connectionFactory。

然后可以在 CAML URI 中使用“jmsremote”bean，例如“jmsremote:queue:myQueue1”

# c++ - 大型 C++ 项目的编译时间和内存使用情况？

> ID：10440385
> 
> 赞同：-2
> 
> 时间：2012-05-03T22:49:17.187
> 
> 标签：c++, linux

假设一个有大约 50,000 个不同的`.cpp`文件。

每个`.cpp`文件**只包含一个类**，其中包含大约 1000 行代码（代码本身并不复杂——涉及对矩阵和向量的内存操作——即，不使用特殊库）。

我需要构建一个项目（在`Linux`环境中），该项目必须导入和使用所有这 50,000 个不同的`.cpp`文件。

我想到了几个问题：

1.  编译这个大概需要多长时间？大约是多少。编译文件的大小？
2.  有什么更好的方法——保留 50,000 个不同的`.so`文件（编译后的扩展）并让主程序将它们一个一个导入，或者将这 50,000 个不同的`.cpp`文件合并到*一个大* `.cpp` *文件*中，然后处理？哪种方法会更快/更有效？

非常感谢任何见解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T23:09:13.683

没有答案，只有建议。

就在你面前：**你真正想做什么？**您是否尝试从不同的源文件创建代码库？或者那是一个可执行文件？你真的编写了那么多 .cpp 文件吗？

50,000 个源文件很好……一个大型项目。您是否尝试在所有文件中做一些共同的事情（例如，每个源文件都代表一个资源、记录、图像或独特的东西）。或者它只是 50K 不同的代码文件？

您的大部分编译时间不会基于每个源文件的大小。它将基于每个 cpp 文件将引入的头文件（以及它们包含的头）的数量。头文件虽然通常不包含实现，只是声明，但必须经过编译过程。代码库中的冗余标头会减慢您的构建时间。

这种规模的大型项目使用[预编译的头文件](http://www.bing.com/search?q=precompiled+header&qs=n&form=QBLH&pq=precompiled+header&sc=8-18&sp=-1&sk=)。您可以将所有常用的头文件包含在一个头文件（common.h）中并构建 common.h。然后所有其他源文件只包含“common.h”。编译器可以配置为在看到每个源的#include "common.h" 时自动使用已编译的头文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T22:55:05.013

您可以从“.cpp”构建每个目标文件，让“.h”文件有很多（我的意思是很多）前向声明 - 所以当您更改`.h`文件时，它不需要重新编译程序的其余部分。通常，函数/方法需要其参数中的对象名称或它要返回的内容。如果它需要其他细节 - 是的，它需要被包括在内。

请买一本 Scott Myers 的书——对你有很大帮助。

哦 - 当试图吃一个大蛋糕时 - 把它分开。切片更易于管理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T23:09:36.517

(i) 决定这一点的因素太多了，即使是近似值也是不可能的。编译可以是内存、cpu 或硬盘驱动器。文件的复杂性很重要（根据您的描述，您的复杂性很低）。

(ii) 这样做的典型方法是制作一个库并让系统找出链接或加载。您可以选择静态或动态链接。

**静态链接**
假设您使用的是 gcc，这将如下所示： `g++ -c file1.cpp -o file1.o
g++ -c file2.cpp -o file2.o
...
g++ -c filen.cpp -o filen.o
ar -rc libvector.a file1.o file2.o ... filen.o`

然后，当您构建自己的代码时，您的最终链接如下所示：
`g++ myfile.cpp libvector.a -o mytask`

**动态链接**
同样，假设您使用的是 gcc，它看起来像这样：
`g++ -c file1.cpp -fPIC -o file1.o
g++ -c file2.cpp -fPIC -o file2.o
...
g++ -c filen.cpp -fPIC -o filen.o
ld -G file1.o file2.o ... filen.o -o libvector.so`

然后，当您构建自己的代码时，您的最终链接如下所示：
`g++ myfile.cpp libvector.so -o mytask`
您需要将 libvector.so 放在加载程序的路径中，以便您的可执行文件工作。

无论如何，只要 50,000 个文件没有变化，您只需执行最后一个命令（这会快得多）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T23:31:51.687

我们不能真正说出编译所需的时间，但你应该做的是将每个`.cpp`/`.h`对编译成一个`.o`文件：

```
$ g++ -c -o test.o test.cpp ... 
```

一旦你有了所有这些，你就可以编译主程序：

```
$ g++ -c -o main.o main.cpp
$ g++ -o main main.o test.o blah.o otherThings.o foo.o bar.o baz.o etc... 
```

您使用`.so`s 的想法几乎是在问“我可以多快使程序和操作系统崩溃？”。共享库适用于少量的大型库，而不是`.so`链接到二进制文件的 50,000 秒（*特别是*如果您动态加载它们……那将是***糟糕***的）。

# android - 单选按钮单击并重新单击

> ID：10440386
> 
> 赞同：4
> 
> 时间：2012-05-03T22:49:17.847
> 
> 标签：android, radio-button

我在 Android 中有一个单选按钮组。我在选择项目时收到事件。目前正常。但是，如果用户单击已选择的项目，我不会收到该事件。有没有办法知道（接收事件）用户何时点击单选按钮，无论它是否被选中？非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T23:35:16.967

我不明白为什么在单击已选中的单选按钮时会收到一个事件，但是如果您想通过单击取消选择单选按钮（如果它已被选中）！检查此代码它可以帮助您：

```
RadioGroup radioGroup;
RadioButton radioButton1;
RadioButton radioButton2;
RadioButton radioButton3;

boolean hack = false;

@Override
protected void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    radioGroup = (RadioGroup) findViewById(R.id.rg);
    radioButton1 = (RadioButton) findViewById(R.id.r1);
    radioButton2 = (RadioButton) findViewById(R.id.r2);
    radioButton3 = (RadioButton) findViewById(R.id.r3);

    OnClickListener radioClickListener = new OnClickListener()
    {

        public void onClick(View v)
        {       //The first codition check if we have clicked on an already selected radioButton
            if (v.getId() == radioGroup.getCheckedRadioButtonId() && hack)
            {
                radioGroup.clearCheck();
            }
            else
            {
                hack = true;
            }
        }
    };

    OnCheckedChangeListener radioCheckChangeListener = new OnCheckedChangeListener()
    {

        @Override
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked)
        {
            hack = false;
        }
    };

    radioButton1.setOnCheckedChangeListener(radioCheckChangeListener);
    radioButton2.setOnCheckedChangeListener(radioCheckChangeListener);
    radioButton3.setOnCheckedChangeListener(radioCheckChangeListener);

    radioButton1.setOnClickListener(radioClickListener);
    radioButton2.setOnClickListener(radioClickListener);
    radioButton3.setOnClickListener(radioClickListener);

} 
Hope this wil help 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T23:19:50.553

通过`OnClickListener()`在按钮上设置...

# php - php检查gravatar是否存在header错误

> ID：10440388
> 
> 赞同：4
> 
> 时间：2012-05-03T22:49:49.957
> 
> 标签：php, header, gravatar

我正在尝试检查是否存在 gravatar。当我尝试前面问题中推荐的方法时，我收到一个错误“警告：get_headers() [function.get-headers]：此函数只能用于 URLs”有人看到这个或看到我的代码中的错误吗？PS 我不想为 gravatar 指定默认图像，因为如果没有 gravatar 退出，可能会有多个默认可能性。

另外，我发现一个错误的引用可能与我的 ini 文件有关，我认为我的主机没有让我访问该文件。如果是这样，是否有替代 getheaders 的方法？非常感谢。

```
$email = $_SESSION['email'];
$email= "person@gmail.com"; //for testing
$gravemail = md5( strtolower( trim( $email ) ) );
$gravsrc = "http://www.gravatar.com/avatar/".$gravemail;
$gravcheck = "http://www.gravatar.com/avatar/".$gravemail."?d=404";
$response = get_headers('$gravcheck');
echo $response;
exit;
if ($response != "404 Not Found"..or whatever based on response above){
$img = $gravsrc;
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-03T22:54:57.917

观察

A.`get_headers('$gravcheck');`由于使用单引号而无法工作`'`

B. 调用`exit;`会提前终止脚本

C.`$response`将返回一个数组，您不能使用insted`echo`来打印信息`print_r`

D.`$response != "404 Not Found"`不起作用，因为`$response`是数组

这是正确的方法：

```
$email= "person@gmail.com"; //for testing
$gravemail = md5( strtolower( trim( $email ) ) );
$gravsrc = "http://www.gravatar.com/avatar/".$gravemail;
$gravcheck = "http://www.gravatar.com/avatar/".$gravemail."?d=404";
$response = get_headers($gravcheck);
print_r($response);
if ($response[0] != "HTTP/1.0 404 Not Found"){
    $img = $gravsrc;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-01T10:15:43.997

在做我的一个项目时，我在php中做了一个简单的Gravatar功能。

你可以看到。

```
 <?php

  class GravatarHelper
  {

    /**
    * validate_gravatar
    *
    * Check if the email has any gravatar image or not
    *
    * @param  string $email Email of the User
    * @return boolean true, if there is an image. false otherwise
    */
    public static function validate_gravatar($email) {
      $hash = md5($email);
      $uri = 'http://www.gravatar.com/avatar/' . $hash . '?d=404';
      $headers = @get_headers($uri);
      if (!preg_match("|200|", $headers[0])) {
        $has_valid_avatar = FALSE;
      } else {
        $has_valid_avatar = TRUE;
      }
      return $has_valid_avatar;
    }

    /**
    * gravatar_image
    *
    *  Get the Gravatar Image From An Email address
    *
    * @param  string $email User Email
    * @param  integer $size  size of image
    * @param  string $d     type of image if not gravatar image
    * @return string        gravatar image URL
    */
    public static function gravatar_image($email, $size=0, $d="") {
      $hash = md5($email);
      $image_url = 'http://www.gravatar.com/avatar/' . $hash. '?s='.$size.'&d='.$d;
      return $image_url;
    }

  } 
```

在这里，有两个功能。

1.  `validate_gravatar()`将根据电子邮件是否有任何 gravatar 返回 true 或 false。
2.  `gravatar_image()`将返回您的电子邮件的 gravatar 图片 url

希望它会对其他人有所帮助。

# java - DBCP 连接属性

> ID：10440391
> 
> 赞同：0
> 
> 时间：2012-05-03T22:50:10.307
> 
> 标签：java, connection-pooling, apache-commons-dbcp

我们很难弄清楚[定义](http://commons.apache.org/dbcp/configuration.html)的属性，`minIdle`等等`maxIdle`。

我们在以下设置中看到以下错误

```
初始大小=5
最大活动=50
最大空闲=40
最大等待=2000

```

```
引起：org.springframework.jdbc.CannotGetJdbcConnectionException：无法获得JDBC连接；嵌套异常是 org.apache.commons.dbcp.SQLNestedException: Cannot get a connection, pool error Timeout waiting for idle object
    在 org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80)
    在 org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:1001)
    在 org.springframework.jdbc.core.JdbcTemplate.call(JdbcTemplate.java:1064)

    ... 36 更多
引起：org.apache.commons.dbcp.SQLNestedException：无法获取连接，池错误超时等待空闲对象
    在 org.apache.commons.dbcp.PoolingDataSource.getConnection(PoolingDataSource.java:114)
    在 org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044)
    在 org.springframework.jdbc.datasource.lookup.AbstractRoutingDataSource.getConnection(AbstractRoutingDataSource.java:148)
    在 org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111)
    在 org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77)
    ... 39 更多
引起：java.util.NoSuchElementException：等待空闲对象超时
    在 org.apache.commons.pool.impl.GenericObjectPool.borrowObject(GenericObjectPool.java:1134)
    在 org.apache.commons.dbcp.PoolingDataSource.getConnection(PoolingDataSource.java:106)

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T14:27:57.200

这解决了。问题是来自错误应用程序代码的连接泄漏。编写应用程序代码是为了访问底层本机连接以使用 Oracle 数组类型，但未正确管理。将代码更改为使用 SimpleNativeJdbcExtractor

[http://static.springsource.org/spring/docs/2.0.x/api/org/springframework/jdbc/support/nativejdbc/SimpleNativeJdbcExtractor.html](http://static.springsource.org/spring/docs/2.0.x/api/org/springframework/jdbc/support/nativejdbc/SimpleNativeJdbcExtractor.html)

# jquery - 如何使用 JQuery 清除自定义文件输入

> ID：10440392
> 
> 赞同：0
> 
> 时间：2012-05-03T22:50:19.163
> 
> 标签：jquery, input

到目前为止，我还不是 JQuery 专家，所以我会尽力解释我的困境。

本质上，我找到了这个示例：[http](http://the-echoplex.net/demos/upload-file/) ://the-echoplex.net/demos/upload-file/使用 Jquery 自定义输入文件按钮的外观。

我还希望能够使用类似于此示例的清除按钮删除文件：[http ://www.electrictoolbox.com/clear-upload-file-input-field-jquery/](http://www.electrictoolbox.com/clear-upload-file-input-field-jquery/)

问题是，当我尝试组合它们时，即使实际输入文件按钮已被重置，出现在按钮旁边的文件路径文本仍会继续保留在那里。

单击清除按钮时，有没有办法删除文件路径文本？我假设文件路径文本存储在 JQuery (file-upload.js) 中的某处

任何帮助将不胜感激！

这是我的 HTML：

```
<form enctype="multipart/form-data" action="#" method="post">
      <div class="field" id="example_file">
           <label class="file-upload">
              <div class="icon-med icon-blck-upload"></div>
                   Upload
               <input type="file" name="uploadfile" />
           </label>
      </div><!--end field-->

           <input type="button" value="Clear" onclick="example_reset_html('example_file');">
</form> 
```

这是JQuery（我把清晰的代码放在最底部）：

```
(function () {

    // import library
    eval( JELLY.unpack() );

    addDomReady( function () {

        // Load our css
        Load.css( 'file-upload.css' );

        // Create a reusable tweening object
        var tween = new Tween,

            // event handlers, including blur/focus to 
            // restore keyboard navigation
            onUploadChange = function ( e ) {

                var status = retrieveData( this, 'upload-status' );

                if ( this.value ) {
                    // IE shows the whole system path, we're reducing it 
                    // to the filename for consistency
                    var value = browser.ie ? this.value.split('\\').pop() : this.value;
                    status.innerHTML = value;
                    insertAfter( status, this.parentNode );

                    // Only tween if we're responding to an event
                    if ( e ) { 
                        tween.setElement( status ).
                            setOpacity( 0 ).
                            start({ 
                                opacity: 1, duration: 500 
                            });
                    }
                }
                else if ( status && status.parentNode ) {
                    removeElement( status );
                }

            }, 
            onUploadFocus = function () { 
                addClass( this.parentNode, 'focus' ); 
            },
            onUploadBlur = function () { 
                removeClass( this.parentNode, 'focus' ); 
            };

        Q( '.file-upload input[type=file]' ).each( function ( field ) {

            // Create a status element, and store it
            storeData( field, 'upload-status', createElement( 'span.file-upload-status' ) );

            // Bind events
            addEvent( field, 'focus', onUploadFocus );
            addEvent( field, 'blur', onUploadBlur );
            addEvent( field, 'change', onUploadChange );

            // Set current state 
            onUploadChange.call( field );

            // Move the file input in Firefox / Opera so that the button part is
            // in the hit area. Otherwise we get a text selection cursor
            // which you cannot override with CSS
            if ( browser.firefox || browser.opera ) {
                field.style.left = '-800px';
            }
            else if ( browser.ie ) {
                // Minimizes the text input part in IE
                field.style.width = '0';
            }
        });
    });

})();

//Clear Button////////////////////////////////////////////////////////////////////////////////////

function example_reset_html(id) {
    $('#' + id).html($('#' + id).html());
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T23:51:45.980

简单的方法：

```
<form>
...
<span>
<input type="file"/>
<input type="button" value="Clear" onclick="jQuery(this).parent().html(jQuery(this).parent().html());"/>
</span>
...
</form> 
```

这将销毁所有清除按钮父级（跨度）并再次创建它，所有输入数据都将丢失。

# ruby-on-rails - Ruby S3 Multipart pause and resume（调用close后添加一个部分）

> ID：10440398
> 
> 赞同：0
> 
> 时间：2012-05-03T22:51:02.650
> 
> 标签：ruby-on-rails, amazon-s3

我正在使用`aws-sdk`gem，并且我正在尝试上传一个非常大的文件（需要 2 天）。

该文件以块的形式上传，但有时脚本会崩溃，我想继续上传（下一个块）。

在上传过程中，我们要关闭`close`分段上传（这样我们就可以访问到目前为止已经上传的 s3 数据）。

分段上传关闭后是否可以添加部分？（说第二天）基本上恢复上传？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T23:45:33.567

> 分段上传关闭后是否可以添加部分？（说第二天）基本上恢复上传？

不是这样，但你可以模拟你想要的影响。

## 背景

[使用 Multipart Upload API 上传对象](http://docs.amazonwebservices.com/AmazonS3/latest/dev/uploadobjusingmpu.html) *允许您将单个对象作为一组部分上传*：

> 每个部分都是对象数据的连续部分。您可以按任意顺序独立上传这些对象部分。如果任何部分传输失败，您可以重新传输该部分而不影响其他部分。**上传对象的所有部分后，Amazon S3 会组装这些部分并创建对象。** *[强调我的]*

这在[Complete Multipart Upload](http://docs.amazonwebservices.com/AmazonS3/latest/API/mpUploadComplete.html)中有更详细的说明：

> 您首先启动分段上传，然后使用上传部分操作上传所有部分（请参阅上传部分）。[...]**收到此请求后，Amazon S3 将按部件号升序连接所有部件以创建一个新对象。**[...]您必须确保零件清单是完整的，此操作会连接您在清单中提供的零件。[...] *[强调我的]*

也就是上传操作到这里就结束了，不能通过[上传其他部分](http://docs.amazonwebservices.com/AmazonS3/latest/API/mpUploadUploadPart.html)来恢复。（从技术上讲，`upload ID`对已启动的分段上传的任何操作所需的不再可用/有效）。

## 解决方案

[您可以通过Upload Part - Copy](http://docs.amazonwebservices.com/AmazonS3/latest/API/mpUploadUploadPartCopy.html)操作简单地启动一个新的分段上传，并将之前上传的 S3 对象作为此新分段对象的第一部分上传，该操作*通过从现有对象复制数据作为数据源来上传一个部分*。

# spring - Spring，Hibernate和对数据库中同一行的多次引用

> ID：10440401
> 
> 赞同：0
> 
> 时间：2012-05-03T22:51:18.803
> 
> 标签：spring, hibernate, orm, reference, instance

我目前在这里遇到问题，我想也许你们中的一些人可以帮助我。我正在使用 SPRING 和 HIBERNATE 开发应用程序，我的问题如下：

**1** - 我首先在我的主对象中创建一个新的 AudioFile 对象（域类），然后使用 DAO 中的 hibernateTemplate.save(audioFile) 方法将其插入到数据库中。

**2** - 然后我使用 DAO 的 hibernateTemplate.get(1) 方法从数据库中检索行，并将实例存储到 audioFile1 对象中。（音频文件类型）

**3** - 然后我重复**步骤 2**并将实例存储到 audioFile2 对象中。

**总之：**我的主要课程是这样的：

```
ApplicationContext context = new ClassPathXmlApplicationContext(
                "application-context.xml");
AudioFileServices audioFileServices = (AudioFileServices) context.getBean("audioFileServices");

AudioFile audioFile = new AudioFile();
audioFile.setAlbum("test");
audioFile.setArtist("test");
audioFile.setLength(1);
audioFile.setPath("test");
audioFile.setTitle("test");

AudioFile a1 = null;
AudioFile a2 = null;

try {
    audioFileServices.saveAudioFile(audioFile);
    a1 = audioFileServices.getAudioFile(audioFile.getIdAudioFile());
    a2 = audioFileServices.getAudioFile(audioFile.getIdAudioFile());
} catch (Exception e) {
    e.printStackTrace();
} 
```

**ISSUE：** audioFile1 和 audioFile2 都代表同一个对象，（数据库中的同一行）但是，它们是两个不同的实例，而不是引用同一个实例的两个对象。（如我所愿）因此，对第一个对象所做的任何修改都不会影响第二个对象。（即使它们都映射到同一个数据库行）

我已正确配置应用程序上下文以将 AudioFileDAO bean 注入 AudioFileService bean 并使用服务层架构。除了这个烦人的问题外，一切都完美无缺。我还设置了事务，并且正在使用由 SPRING 注入 AudioFileDAO bean 的 sessionFactory bean。

你们中有人知道我在这里缺少什么吗？也许这是一个 HIBERNATE 配置问题？有任何想法吗？

先感谢您。（如果需要，我可以提供我的应用程序上下文、服务和 dao 代码的副本）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T23:05:28.453

这可能是因为 Hibernate 没有缓存检索到的对象实例。我会研究[休眠配置](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/session-configuration.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T22:56:46.337

如何设置 a2 = a1，而不是从方法 getAudioFile 获取。

# iphone - 如何使用 GPUImage 框架复制 CIRandomGenerator

> ID：10440402
> 
> 赞同：1
> 
> 时间：2012-05-03T22:51:29.390
> 
> 标签：iphone, ios, opengl-es, gpu, core-image

任何人都知道如何创建一个过滤器来为 GPUImage 框架生成随机噪声？

[https://github.com/BradLarson/GPUImage](https://github.com/BradLarson/GPUImage)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T01:17:33.947

GPUImage 框架中现在有一个 GPUImagePerlinNoiseFilter 基于上面 Brad 引用的线程中的链接。

# javascript - 使用 javascript setTimeout 会导致对象内的数据丢失？

> ID：10440406
> 
> 赞同：1
> 
> 时间：2012-05-03T22:52:05.927
> 
> 标签：javascript, settimeout

**背景：**
我编写了一个 javascript 对象，该对象被调用`Step`来为我的网站可能需要使用的任何操作实现步进类型事件，例如平滑运动功能。我可以使用 Step 对象的方法在其中注册函数以运行每个步骤，`registerFunction(func)`.

为了处理每一步运行函数，Step 对象有另一个方法称为`run()`. 在这个方法中，我遍历已注册函数的列表，运行它们，*然后*调用该`setTimeout(...)`函数，将引用传递给 run 函数，以便在下一步调用它。

**问题：**
第一个“步骤”由我的 html 页面的 <body> 标记中的 onload 事件（属性）运行（但间接地：`Step.run`由调用的函数`initiateJS()`调用 `onload`）。第一步没有任何问题。然而，到了第二步，Step 对象中的变量似乎已经被处理掉了；它们都变得未定义。

**问题：**
我在想这可能是由于垃圾收集器造成的？也许它以某种方式失去了参考？
另外，是否正在使用`setTimeout(...)`最好的方法来实现步进式事件？

**详细信息：**
Step 对象在 js 文档中声明为：

```
 var Step = {
            myVars: "somevalues",
            anArray: [],
            run: function() {
                //run the registered functions
                setTimeout(this.run,this.interval);
        }; 
```

此外，在下一步中，该`Step`对象仍然存在。

其他一些小细节：

*   我正在使用 Chrome*   我正在使用 XAMPP 制作我的网站*   我正在使用 Windows 7

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T22:58:16.617

`setTimeout`在全局上下文中运行代码。`this`下次执行时不再定义`run()`。您需要重构代码以在某种全局对象上声明变量，或者将引用传递给 run 函数本身。

编辑：既然你说`Step`是全球性的，这应该工作：

```
run: function() {
    //run the registered functions
    setTimeout(Step.run, Step.interval);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T22:54:36.170

将您的运行功能更改为：

```
run: function() {
    var that = this;
    setTimeout(that.run, that.interval);
} 
```

setTimeout 函数[重新定义了`this`变量](https://developer.mozilla.org/en/DOM/window.setTimeout#The_%27this%27_problem)，这是我能想到的解决此问题的最简单方法。

# javascript - 向我的简单 javascript 函数添加回调功能

> ID：10440407
> 
> 赞同：1
> 
> 时间：2012-05-03T22:52:09.743
> 
> 标签：javascript, jquery

我不是在写插件。我只是在寻找一种简单干净的方法来让自己知道某个函数何时完成执行 ajax 调用或其他任何事情。

所以我有这个：

```
function doSomething() {
...
   getCauses("", query, function () {
       alert('test');  
   });
...
}

function getCauses(value, query) {
//do stuff...
} 
```

当然，警报永远不会发生。我在 getCauses 中有一个 $.ajax 调用，希望在 getCauses 完成执行后发出警报或执行一些操作，然后从调用函数的位置运行代码行。

想法？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T22:56:23.233

您首先需要将参数添加到`getCauses`：

```
function getCauses(value, query, callback) {
} 
```

然后，在您的`$.ajax`调用中，调用 AJAX 完成回调中的回调参数：

```
$.ajax({
    // ...
    complete: function() {
        // Your completion code
        callback();
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T22:56:49.423

你正在传递你的回调函数，但没有执行它。

```
function doSomething() {
    ...
    getCauses("", query, function () {
        alert('test');  
    });
    ...
}

function getCauses(value, query, callback) {
    //do stuff...

    //stuff is done
    callback();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T23:08:08.320

只需使用一点 javascript 技巧，这里的实现将允许您在未定义回调的情况下实现一些默认功能。如果 99% 的时间你想要一个通用的回调，这将是很棒的，然后你只是想在几个地方自定义它。

```
var my_callback = function() {
    alert('I am coming from the custom callback!');
}

var special_function(string_1, callback) {
    (callback || function() {
        // Default actions here
        alert('I am coming from the generic callback');
    })();
}

// This will alert "I am coming from the custom callback!"
special_function("Some text here", my_callback);

// This will alert "I am coming from the generic callback"
special_function("Some text here");

// This will do nothing
special_function("Some text here", function() {}); 
```

干杯!

# oop - 在导入类时使用索引调用静态方法

> ID：10440409
> 
> 赞同：9
> 
> 时间：2012-05-03T22:52:29.307
> 
> 标签：oop, matlab

我在路径上的`myClass.m`包文件夹中有一个类文件。`+myPack`类文件的一个简单示例是：

```
classdef myClass
    properties
        prop
    end

    methods
        function obj = myClass(x)
            obj.prop = x;
        end
    end
end 
```

现在，如果我直接调用该方法并使用完整的包名访问该属性，即：

```
x = myPack.myClass(2).prop; 
```

正确返回`x = 2`。现在，如果我通过导入此类（而不是使用包名）来尝试相同的操作：

```
import myPack.myClass
y = myClass(2).prop 
```

它给了我以下错误：

> 静态方法或构造函数调用不能被索引。不要在对静态方法或构造函数的调用之后加上任何额外的索引或点引用。

为什么这在第一种情况下有效，而在第二种情况下无效？据我了解，`import`ing 一个类主要允许一个人使用类名而没有长包名（以及其他考虑因素）。导致此错误的这两者有什么区别，我该如何解决？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T07:27:35.923

这对您来说有些奇怪：如果您在命令窗口、脚本或函数中运行，行为会有所不同！

# 1）命令提示符（第一个：好的，第二个：错误）

这是你已经展示的

```
>> x = myPack.myClass(2).prop
x =
     2

>> import myPack.myClass; y = myClass(2).prop
Static method or constructor invocations cannot be indexed.
Do not follow the call to the static method or constructor with
any additional indexing or dot references. 
```

# 2）脚本（第一个：错误，第二个：错误）

### testMyClassScript.m

```
x = myPack.myClass(2).prop
import myPack.myClass; y = myClass(2).prop 
```

和

```
>> testMyClassScript
Static method or constructor invocations cannot be indexed.
Do not follow the call to the static method or constructor with
any additional indexing or dot references.
Error in testMyClassScript (line 1)
x = myPack.myClass(2).prop 
```

（第二行也会抛出同样的错误）

# 3）功能（第一个：ok，第二个：ok）

### testMyClassFunction.m

```
function testMyClassFunction()
    x = myPack.myClass(2).prop
    import myPack.myClass; y = myClass(2).prop
end 
```

和

```
>> testMyClassFunction
x =
     2
y =
     2 
```

* * *

我肯定会称其为错误:) 预期的行为是在所有情况下都给出错误。

# ruby - 在 Ruby 的 Windows 命令中设置本地 ENV 变量

> ID：10440410
> 
> 赞同：2
> 
> 时间：2012-05-03T22:52:34.507
> 
> 标签：ruby, windows, command-line, rake, environment-variables

我为本地开发人员创建了一个 Rake 任务，它将构建项目，开始观察它以进行自动编译，并启动一个瘦服务器以查看已编译的应用程序。

我实现了 Foreman 以允许设置项目现在依赖的本地 ENV 变量。它工作得很好——除了它还需要在 Windows 上工作。

我的解决方案是解析 .env 文件并在我启动服务器时手动设置变量，ala：

```
$ MY_ENV_VAR=12345 ruby -rubygems app.rb 
```

当我自己手动执行它时效果很好。但是，如果我尝试通过我的 Rake 任务 - 执行该命令`sh %{MY_ENV_VAR=12345 ruby -rubygems app.rb}`，它会失败：

```
Command failed with status (127): [MY_ENV_VAR=12345 ruby -rubygems app.rb...] 
```

我试过用`sh %{}`, `exec`, `system`, `%x{}`, 和反引号来执行它，但没有成功。有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T22:57:57.740

尝试[`Kernel#system`使用`env`参数](http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-system)：

```
env = {'FOO' => '123'}
cmd = 'echo $FOO'
system(env, cmd) # => prints "123", returns true 
```

# objective-c - 在下一个运行循环上执行：GCD 有什么问题？

> ID：10440412
> 
> 赞同：28
> 
> 时间：2012-05-03T22:52:40.600
> 
> 标签：objective-c, ios, asynchronous, grand-central-dispatch

我正在尝试这两种方法：

```
dispatch_async(dispatch_get_main_queue(),^{
    [self handleClickAsync];
}); 
```

和

```
[self performSelector:@selector(handleClickAsync) withObject:nil afterDelay:0]; 
```

响应按钮按下。

第二个允许按`UIButton`预期突出显示并`handleClickAsync`在下一个运行循环中执行（我想：肯定是“稍后”）。第一个不允许`UIButton`实例点亮，直到操作完全完成。

使用 GCD 执行此操作的正确方法是什么，或者`performSelector`仍然是唯一的方法？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-05-04T14:30:53.303

我相信在[主调度队列的讨论中](https://developer.apple.com/library/mac/documentation/General/Conceptual/ConcurrencyProgrammingGuide/OperationQueues/OperationQueues.html#//apple_ref/doc/uid/TP40008091-CH102-SW2)可以找到答案：

> 此队列与应用程序的运行循环（如果存在）一起使用，以将排队任务的执行与附加到运行循环的其他事件源的执行交错​​。

换句话说，主调度队列设置了一个辅助队列（与由提供的标准事件队列一起`UIApplicationMain()`处理提交到主队列的块。当队列中存在块时，运行循环将从主事件队列中交替出队任务和调度队列。另一方面，参数的[参考](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/nsobject_Class/Reference/Reference.html#//apple_ref/doc/uid/20000050-performSelector_withObject_afterDelay_)说明：`delay``-performSelector:withObject:afterDelay:`

> 指定延迟为 0 不一定会导致选择器立即执行。选择器仍在线程的运行循环中排队并尽快执行。

`UIButton`因此，当您使用 perform 选择器时，该操作在主事件队列的末尾排队，并且在队列中它前面的所有内容（可能包括取消突出显示的代码）都已处理后才会执行。但是，当您使用主调度队列时，它会将块添加到辅助队列中，然后假设主队列中没有其他块，则可能会立即处理（即在下一个运行循环中）。在这种情况下，取消突出显示按钮的代码仍然位于主事件队列中，而运行循环处理来自辅助块队列的事件。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-12-27T06:13:36.660

我认为这会触及你的观点：

```
[[NSOperationQueue mainQueue] addOperationWithBlock:^{
     //bla bla bla
}]; 
```

# django - Django syncdb - NameError：名称'*********'未定义

> ID：10440417
> 
> 赞同：1
> 
> 时间：2012-05-03T22:53:09.087
> 
> 标签：django, django-models

我是 Django 和 Python 的新手，并且一直在学习教程，但是我遇到了一个让我难过的错误。

我正在尝试构建我的 django 模型/数据库。

当我尝试运行*python manage.py syncdb*时，我在命令行提示符中收到以下错误：

```
C:\Users\6233114\Django-Projects\GlobalX>python manage.py syncdb
Traceback (most recent call last):
  File "manage.py", line 10, in <module>
    execute_from_command_line(sys.argv)
  File "C:\Python27\lib\site-packages\django\core\management\__init__.py", line
443, in execute_from_command_line
    utility.execute()
  File "C:\Python27\lib\site-packages\django\core\management\__init__.py", line
382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "C:\Python27\lib\site-packages\django\core\management\base.py", line 196,
 in run_from_argv
    self.execute(*args, **options.__dict__)
  File "C:\Python27\lib\site-packages\django\core\management\base.py", line 231,
 in execute
    self.validate()
  File "C:\Python27\lib\site-packages\django\core\management\base.py", line 266,
 in validate
    num_errors = get_validation_errors(s, app)
  File "C:\Python27\lib\site-packages\django\core\management\validation.py", lin
e 30, in get_validation_errors
    for (app_name, error) in get_app_errors().items():
  File "C:\Python27\lib\site-packages\django\db\models\loading.py", line 158, in
 get_app_errors
    self._populate()
  File "C:\Python27\lib\site-packages\django\db\models\loading.py", line 64, in
_populate
    self.load_app(app_name, True)
  File "C:\Python27\lib\site-packages\django\db\models\loading.py", line 88, in
load_app
    models = import_module('.models', app_name)
  File "C:\Python27\lib\site-packages\django\utils\importlib.py", line 35, in im
port_module
    __import__(name)
  File "C:\Users\6233114\Django-Projects\GlobalX\app_data\models.py", line 15, i
n <module>
    class LanguageCode(models.Model):
  File "C:\Users\6233114\Django-Projects\GlobalX\app_data\models.py", line 27, i
n LanguageCode
    languageDirectionID = models.ForeignKey(languageDirection, default=1, db_col
umn="languageDirectionID")
NameError: name 'languageDirection' is not defined

C:\Users\6233114\Django-Projects\GlobalX> 
```

这是我的 models.py 文件的精简版（第 1 - 29 行）：

```
 from django.db import models
    from django.contrib.auth.models import User

    class LanguageDirection(models.Model):
      languageDirectionID = models.AutoField(primary_key=True, db_column="languageDirectionID")
      languageDirectionDescription = models.CharField(max_length=20, db_column="languageDirectionDescription")
      languageDirDescription = models.CharField(max_length=20, db_column="languageDirDescription")
      textAlign = models.CharField(max_length=20, db_column="textAlign")
      oppositeLanguageDirectionDescription = models.CharField(max_length=20, db_column="oppositeLanguageDirectionDescription")
      oppositeLanguageDirDescription = models.CharField(max_length=20, db_column="oppositeLanguageDirDescription")
      oppositeTextAlign = models.CharField(max_length=20, db_column="oppositeTextAlign")
      class Meta:
        db_table="languageDirection"

    class LanguageCode(models.Model):
      languagecodeID = models.AutoField(primary_key=True, db_column="languageCodeID")
      languageCodeDescription = models.CharField(max_length=10, db_column="languageCodeDescription")
      baseLanguageCode = models.CharField(max_length=10, db_column="baseLanguageCode")
      languageNameEng = models.CharField(max_length=255, db_column="languageNameEng")
      altLanguageNameEng = models.CharField(max_length=255, blank=True, null=True, db_column="altLanguageNameEng")
      languageNameNative = models.CharField(max_length=255, db_column="languageNameNative")
      altLanguageNameNative = models.CharField(max_length=255, blank=True, null=True, db_column="altLanguageNameNative")
      iso639_1 = models.CharField(max_length=10, blank=True, null=True, db_column="iso639_1")
      iso639_2T = models.CharField(max_length=10, db_column="iso639_2T")
      iso639_2B = models.CharField(max_length=10, db_column="iso639_2B")
      iso639_X = models.CharField(max_length=10, db_column="iso639_X")
      languageDirectionID = models.ForeignKey(languageDirection, default=1, db_column="languageDirectionID")
      class Meta:
        db_table="languageCode" 
```

LanguageDirection 和LangaugeCode 的关系是一对多的，其中LanguageDirection.LanguageDirectionID（一）和LanguageCode.LanguageDirectionID（多）。

关于导致此错误的原因以及如何解决此问题的任何建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T22:56:30.640

这是错误的实质：

```
languageDirectionID = models.ForeignKey(languageDirection, default=1, db_col
umn="languageDirectionID")
NameError: name 'languageDirection' is not defined 
```

该行应该是：

```
languageDirectionID = models.ForeignKey(LanguageDirection, default=1, db_column="languageDirectionID") 
```

由于 ForeignKey 需要一个类，或者类的名称在引号中，例如`"LanguageDirection"`.

NameError，对于未来，意味着您正在尝试使用不在范围内或不存在的变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-15T13:52:43.743

有几次发生在我身上的事情是，在 Django 中定义模型时，外键字段与在同一文档中进一步定义的模型相关。

这在 Pycharm 2.7 中没有给我任何警告，我认为这有点奇怪。无论如何，要解决这个问题，只需将 '' 放在类名周围。

`models.ForeignKey('SomeModel')`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T22:56:06.787

`languageDirectionID = models.ForeignKey(languageDirection, default=1, db_column="languageDirectionID")`应该是`languageDirectionID = models.ForeignKey(LanguageDirection, default=1, db_column="languageDirectionID")`。该错误是指 languageDirection 的问题，它应该引用*类名*而不是外键目标的 DB 表名，大写不正确。

# python - Python：二进制条件

> ID：10440423
> 
> 赞同：0
> 
> 时间：2012-05-03T22:53:48.337
> 
> 标签：python, conditional, flags

我有多个条件，如下所示：

```
if condition:
  flag1 = True
flag2 = testfunc()
flag3 = bool(variable)
if not flag1 and not flag2 and not flag3:
  do0
elif flag1 and flag2:
  do1
elif flag2 and flag3:
  do2 
```

我可以把它改成这样：

```
flags = 0
if condition:
  flags += 1
if testfunc():
  flags += 2
if bool(variable):
  flags += 4
if flags == 0:
  do0
elif flags == 3:
  do1
elif flags == 6:
  do2 
```

如您所见，条件可以有值 0、1、2、4、8、16、32，...。有可能在 Python 中做这样的事情吗？谢谢！

**更新**。这类似于`re`和`PyQt4`模块中的条件（您可以在其中设置类似`re.UNICODE`| `re.DOTALL`）。

`re`来自模块的示例：

```
DOTALL = 16
I = 2
IGNORECASE = 2
L = 4
LOCALE = 4
M = 8
MULTILINE = 8
S = 16
U = 32
UNICODE = 32
VERBOSE = 64
X = 64 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T22:55:21.880

是的，完全有可能做到这一点——您的代码应该可以正常运行（给定变量和函数已声明）。

这是个好主意吗？不是真的 - 在阅读你的意思时它不那么明显。可读性是第一位的。

如果您的问题出在很多`and`s 上，那么您可以通过其他方式对其进行清理：

```
if not any(condition, flag2, variable): 
```

使用`any()`and`all()`通常可以帮助您简化事情。

# sparql - 如何在 SPARQL 中进行计数

> ID：10440424
> 
> 赞同：10
> 
> 时间：2012-05-03T22:54:05.397
> 
> 标签：sparql

鉴于这个非常简单的模型：

```
@prefix :        <http://example.org/tags#> .
@prefix owl:     <http://www.w3.org/2002/07/owl#> .
@prefix rdf:     <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs:    <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd:     <http://www.w3.org/2001/XMLSchema#> .

:tag  rdf:type rdf:Property .

:item1
      rdf:type owl:Thing ;
      :tag    "a"^^xsd:string .

:item2
      rdf:type owl:Thing ;
      :tag    "a"^^xsd:string , "b"^^xsd:string .

:item3
      rdf:type owl:Thing ;
      :tag    "a"^^xsd:string , "b"^^xsd:string , "c"^^xsd:string . 
```

我正在尝试获取项目列表以及每个项目的标签数量：

```
item  tagCount
===== ========
item1 1
item2 2
item3 3 
```

这是我的查询：

```
SELECT ?item (count(?tag) as ?tagcount)
WHERE {
     ?item :tag ?tag
} 
```

但是它正在返回：

```
item  tagCount
===== ========
      6 
```

根据我的阅读，这应该有效。我正在使用耶拿 2.6.4

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-04T00:30:48.347

我没有尝试过，但尝试添加`GROUP BY ?item`到查询的末尾。我认为没有`GROUP BY`它只会计算总行数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-24T15:27:26.453

要使绑定出现在结果中，您确实需要使用 group by 关键字，这样就变成了

SELECT ?item (count(?tag) as ?tagcount) WHERE { ?item :tag ?tag } group by ?item

如果您想在查询中间计算某些内容，您可以执行以下操作，请注意您必须如何将内部选择查询放入其自己的块 {}

```
SELECT * {
    ?item a owl:Thing .

    {
        SELECT ?item (count(?tag) as ?tagcount)
        WHERE {
             ?item :tag ?tag
        } group by ?item
    } 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-22T16:56:23.433

@user2316243 的子选择是不必要的，因此以下查询是等效的：

```
SELECT ?item (count(?tag) as ?tagcount)
WHERE {
   ?item a owl:Thing .
   ?item :tag ?tag .
} GROUP BY ?item 
```

# php - 如何使用 PHP 显示单选按钮值

> ID：10440425
> 
> 赞同：1
> 
> 时间：2012-05-03T22:54:08.570
> 
> 标签：php, mysql, html, radio-button

所以我有一个用户用一些单选按钮填写的表格。单选按钮的值被传递给 MySQL。我现在想从数据库中提取这些值，将它们显示在不同页面的表格中，并使用 span 标签对它们应用不同的样式。

这是表单中的代码：

```
<input class="radio_style" type="radio" name="job_type" value="fulltime"/>Full-time<br/>
<input class="radio_style" type="radio" name="job_type" value="parttime"/>Part-time<br /> 
```

这是我要显示它的页面的代码：

```
<div class='job_type_div'>
    <?php if($job_type=='fulltime') {?>
        <span class='job_type_style'>
            <?php echo $row['job_type']; ?>
        </span>
   <?php if($job_type=='parttime') {?>
        <span class='job_type_style2'>
            <?php echo $row['job_type']; ?>
        </span>
            <?php } ?>
    <?php } ?>
</div> 
```

因此，理想情况下，“全职”值将具有一种风格，而“兼职”值将具有另一种风格。但是当我尝试运行这段代码时，什么也没有发生。我肯定正确连接到数据库。并且行名称正确标记为“job_type”。关于我可能出错的地方有什么想法吗？任何帮助将不胜感激 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T23:30:51.067

首先，您的表单应该是这样的：

```
<form action="page_you_want_to_display.php" method="POST">

    <label for="type">Job Type:</label>

    <label for="fulltime">
        <input class="radio_style" id="fulltime" name="job_type" type="radio" value="fulltime">
        Fulltime
    </label>

    <label for="parttime">
        <input class="radio_style" id="parttime" name="job_type" type="radio" value="parttime">
        Part Time
    </label>

    <input name="submitted" type="submit" value="Submit">

</form> 
```

您要显示的页面应如下所示：

```
if(isset($_POST["submitted"])){

    $job_type = $_POST['job_type'];

    echo '<div class="job_type_div">';

        if($job_type=='fulltime'){

            $res = mysql_query("SELECT * FROM jobs WHERE job_type='fulltime'");

            while ($row = mysql_fetch_assoc($res)) {

                echo '<div class="fulltime">';

                    echo $row['job_title'].' - '.$row['job_type'];

                echo '</div>';

                echo '<br>';

            }

        } elseif ($job_type=='parttime'){

            $res = mysql_query("SELECT * FROM jobs WHERE  job_type='parttime'");

            while ($row = mysql_fetch_assoc($res)) {

                echo '<div class="parttime">';

                    echo $row['job_title'].' - '.$row['job_type'];

                echo '</div>';

                echo '<br>';

            }               

        }

echo '</div>';

} 
```

和 CSS：

```
.fulltime {
    margin:0px;
    padding:5px;
    width:300px;
    background:#9C0;
    color:#fff;
}   
.parttime {
    margin:0px;
    padding:5px;
    width:300px;
    background:#069;
    color:#fff;
} 
```

测试：

![在此处输入图像描述](../Images/ca0f17808e0444beebb917ce41450e63.png)

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T22:59:47.140

我不相信条件会按照您实施的方式起作用，请尝试这样做：

```
<?php
echo "<div class='job_type_div'>";
if($job_type=='fulltime') {
        echo "<span class='job_type_style'>" 
```

//ETC...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T23:04:25.020

表单.php

如果您最初在表单中设置了一个“选定”，则不需要检查其设置，简单的设置数据库，如下所示：

```
...
mysql_query("UPDATE X SET (job_type='{$_GET['job_type']}') WHERE Y");
... 
```

显示.php

由于您可能会制作样式表，请使用您放入数据库中的 job_type 标签引用选择器

```
while($row = mysql_fetch_assoc($resultsource))
   echo "<div class='job_type_div'> <span class='{$row['job_type']}_style'>{$row['job_type']}</span>"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T23:04:36.177

从数据库中获取数组时，您需要使用 MYSQL_BOTH 来按名称获取列。

```
 mysql_fetch_array($res, MYSQL_BOTH) 
```

所以你应该有这样的东西：

```
$job_type_query = "SELECT * FROM `job`; ";

$res = mysql_query($job_type_query) or die(mysql_error());
while ($row = mysql_fetch_array($res, MYSQL_BOTH))
{
   echo $row['job_type'];
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T00:58:25.420

可能是您的 php.ini 中的问题。有什么逻辑吗？

```
$job_type=null;
if($job_type=='fulltime'){
   ...
   if($job_type=='parttime'){
      ...
   }
} 
```

你设置了 $job_type 变量吗？可能你需要这样的东西：

```
<div class='job_type_div'>
    <?php if($row['job_type']=='fulltime') {?>
        <span class='job_type_style'>
            <?php echo $row['job_type']; ?>
        </span>
   <?php } elseif($row['job_type']=='parttime') {?>
        <span class='job_type_style2'>
            <?php echo $row['job_type']; ?>
        </span>
    <?php } ?>
</div> 
```

# c++ - 中止回复因访问冲突而崩溃

> ID：10440431
> 
> 赞同：4
> 
> 时间：2012-05-03T22:54:39.457
> 
> 标签：c++, qt, access-violation, qnetworkaccessmanager

我有一个大问题，我实际上认为我解决了它。我有一个使用 QNetworkAccessManager 的应用程序。这个 QNAM 位于一个类中。当我在这个 QNAM 上执行请求时，所有这些请求都在一个包装器中完成，该包装器包含回复并对其进行重试逻辑

例如，如果我在构造函数中有一个 putBlob（它继承自 baseRequest），我会传递一个对 QNAM 的引用。我在它上面执行请求并保存一个指向回复的指针。然后回复将是包装子，因此 QNAM 不再拥有它的所有权。包装器是持有 QNAM 的原始类的子级。

类有一个 QNAM，和子“putBlobRequest”，它有子“QNetworkReply*”

现在的问题是当用户想要取消应该删除主对象及其中的所有内容时。包装器还应该中止它的 QNetworkReply 并断开连接（这样它就不会调用 finish()）

我在 baseRequest 上的析构函数（它包含 QNetworkReply 并且是它的父级）如下所示：

```
if(_reply) {
    if(_reply->isRunning()) {
        _reply->disconnect(SIGNAL(finished()));
        _reply->disconnect(SIGNAL(uploadProgress(qint64, qint64)));
        _reply->abort();
    }
} 
```

当包装器在持有它的类中被杀死时，删除就完成了。（对吗？）

这有时有效，但有时我会遇到巨大的访问冲突，并且所有内容都因以下调用堆栈而崩溃：

```
QtCored4.dll!QObject::disconnect(const QObject * sender, const char * signal, const QObject * receiver, const char * method)  Line 2891 + 0x8 bytes C++
QtNetworkd4.dll!QNetworkReplyImpl::abort()  Line 874 + 0x18 bytes   C++
FrameworkAzure.dll!BaseRequest::~BaseRequest()  Line 129 + 0xa bytes    C++
FrameworkAzure.dll!PutBlobRequest::~PutBlobRequest()  Line 24 + 0x5e bytes  C++
FrameworkAzure.dll!PutBlobRequest::`scalar deleting destructor'()  + 0xb bytes  C++
FrameworkAzure.dll!AzureBlobStorageProvider::~AzureBlobStorageProvider()  Line 41 + 0xa8 bytes  C++ 
```

所以首先 abort() 被调用，它调用以下内容：

```
if (d->outgoingData)
    disconnect(d->outgoingData, 0, this, 0); <--- we go in here 
```

这将我带到 QOBject.cpp 中的第 2891 行：

```
const QMetaObject *smeta = sender->metaObject(); 
```

它因错误而崩溃的地方：

> CloudSync.exe 中 0x66c2c490 (QtCored4.dll) 处的未处理异常：0xC0000005：访问冲突读取位置 0xdddddddd。

地址“0xdddddddd”是“发送者”。

为什么发送者对象不可读？我究竟做错了什么？请帮忙！

编辑：

也试过：

```
if(_reply) {
    if(_reply->isRunning()) {
        disconnect(_reply, SIGNAL(finished()), this, SLOT(handleFinishedRequest()));
        _reply->abort();

    }
} 
```

我还断开了导出的 putBlob 中的 uploadProgress。也尝试过不断开连接，但同样的问题是违反了“发件人”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-01-15T05:05:41.403

就我而言，我有一个如下的replyFinished功能：

```
void MyClass::replyFinished(QNetworkReply *reply)
{
   ...
   delete reply;
} 
```

在我的程序中，这个函数是通过 QNetworkAccessManager 连接的，因此即使我调用了disconnect(reply, ...)，回复也不会与它断开连接。命令*abort*将触发此功能（replyFinished）并删除回复，我再次删除它（通过 reply->deleteLater()）并导致崩溃。

解决方案：添加一个属性来回复并检查它们。

```
disconnect(reply, nullptr, this, nullptr);
reply->setProperty("deleting", 1);
reply->abort();
...
void MyClass::replyFinished(QNetworkReply *reply)
{
   if (reply->property("deleting").isValid())
      return;

   ...
   delete reply;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-22T18:18:28.623

锁定 _reply 的 (QNetworkReply) 破坏，并且在此之后不执行接触它的工作流（_reply 的破坏，即）。当问题发生时，您的 _reply 已被删除并出现乱码。

```
 bool bReplyDestroyed = false;

    connect(_reply, &QObject::destroyed, [=](){
       // set something indicative of _reply no longer usable
       bReplyDestroyed = true;
    });

    if(!bReplyDestroyed) {
      if(_reply->isRunning()) {
        disconnect(_reply, SIGNAL(finished()), this, SLOT(handleFinishedRequest()));
        _reply->abort();
      }
    } 
```

# sql-server-2005 - 使用 SQL 计划每月执行 SSIS

> ID：10440435
> 
> 赞同：0
> 
> 时间：2012-05-03T22:55:04.110
> 
> 标签：sql-server-2005, ssis, sql-agent-job

我有一个 SQL 2005 SSIS 包，它每月向政府办公室报告，该报告应在每个月的最后一个星期四到期。我设置了 SQL Server 以在正确的日子运行包。安排报告时间不是问题。

现在 SSIS 包会创建一个月至今的报告。我使用了两个变量。一个 BeginDate，它使用表达式来确定该月的第一天并将其转换为类似“5/1/2012”的字符串。同样，还有 EndDate 会吐出今天的日期，例如“2012 年 5 月 3 日”。

有没有办法将 BeginDate 变量设置为上次运行报告后的第二天？有没有更好的方法来找出上个月最后一个星期四的日期？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T01:58:58.950

在我的脑海中，有多种方法可以解决这个问题。

选项1

由于您使用的是 SQL 代理，因此请*使用*SQL 代理。创建作业时，单击该框以确保您正在保存历史记录。假设您的数据库维护策略没有删除过去一个月的作业历史记录，您应该能够编写查询以确定作业步骤最后一次成功完成的时间。在执行 SQL 步骤中运行这样的查询将产生 SSIS 步骤最后一次成功运行的时间。您需要做的就是将第三个元素的值分配给 EndDate 变量

```
-- this query will find the most recent, successful execution of a job
-- named 'Last Thursday Of the Month job' with a job step of
-- 'The SSIS Step'
SELECT
    J.name AS job_name
,   JH.step_name AS job_step_name
,   MAX(msdb.dbo.agent_datetime(JH.run_date, JH.run_time)) AS execution_datetime
FROM 
    msdb.dbo.sysjobhistory JH
    INNER JOIN
        msdb.dbo.sysjobs J
        ON J.job_id = JH.job_id
    INNER JOIN
        msdb.dbo.sysjobsteps JS
        ON JS.job_id = J.job_id
            AND JS.step_id = JH.step_id
WHERE
    JH.run_status = 1
    AND J.name = 'Last Thursday Of the Month job'
    AND JH.step_name = 'The SSIS Step'
GROUP BY
    J.name
,   JH.step_name; 
```

选项 2

创建一个自定义表并让您的工作将最后处理日期记录到该表中。该过程在处理开始时查看该表并使用最后日期作为结束日期。

```
CREATE TABLE dbo.AlmostEndOfTheMonth
(
    -- Can't use date as you're on 2005
    execution_date datetime
);

SELECT 
    MAX(AEOM.execution_date) AS most_recent_execution_date 
FROM 
    dbo.AlmostEndOfTheMonth AEOM; 
```

选项 3

用你最喜欢的语言（.NET、TSQL，甚至 SSIS 表达式语言都可以，但我不会尝试）计算一个月的最后一个星期四

```
DECLARE
    @daysInWeek int
,   @dayOfWeek int
SELECT
    @daysInWeek = 7
,   @dayOfWeek = 5;

; WITH LAST_DAY_OF_PREVIOUS_MONTH (last_day_month) AS
(
    --http://blog.sqlauthority.com/2007/08/18/sql-server-find-last-day-of-any-month-current-previous-next/
    -- SQL 2012 makes this much easier with EOM and/or datefromparts functions
    SELECT DATEADD(s,-1,DATEADD(mm, DATEDIFF(m,0,GETDATE()),0))
)
,   LAST_THURSDAY_REFERENCE (last_thursday, last_day_month) AS
(
    SELECT CAST('2012-01-26' AS datetime), cast('2012-01-31' AS datetime)
    UNION ALL SELECT CAST('2012-02-23' AS datetime), cast('2012-02-29' AS datetime)
    UNION ALL SELECT CAST('2012-03-29' AS datetime), cast('2012-03-31' AS datetime)
    UNION ALL SELECT CAST('2012-04-26' AS datetime), cast('2012-04-30' AS datetime)
    UNION ALL SELECT CAST('2012-05-31' AS datetime), cast('2012-05-31' AS datetime)
    UNION ALL SELECT CAST('2012-06-28' AS datetime), cast('2012-06-30' AS datetime)
    UNION ALL SELECT CAST('2012-07-26' AS datetime), cast('2012-07-31' AS datetime)
    UNION ALL SELECT CAST('2012-08-30' AS datetime), cast('2012-08-31' AS datetime)
    UNION ALL SELECT CAST('2012-09-27' AS datetime), cast('2012-09-30' AS datetime)
    UNION ALL SELECT CAST('2012-10-25' AS datetime), cast('2012-10-31' AS datetime)
    UNION ALL SELECT CAST('2012-11-29' AS datetime), cast('2012-11-30' AS datetime)
    UNION ALL SELECT CAST('2012-12-27' AS datetime), cast('2012-12-31' AS datetime)
)
SELECT 
    *
    -- Thursday is the 5th day of the week, assuming you haven't messed with calendar's start of week
    -- We need to subtract up to 6 days from the end of the month to find the
    -- last Thursday. We can use the mod operator on ensure our dateadd function doesn't modify the
    -- date if the end of the month is actually Thursday, otherwise we want to back it off N days
    -- Examples might be easier to understand
    --  Last day    DayWeek     WeekdayNumber   DaysToSubtract
    --  2012-01-31  Tuesday     3               -5
    --  2012-02-29  Wednesday   4               -6
    --  2012-03-31  Saturday    7               -2
    --  2012-04-30  Monday      2               -4
    --  2012-05-31  Thursday    5               0
    --  2012-06-30  Saturday    7               -2
    --  2012-07-31  Tuesday     3               -5
    --  2012-08-31  Friday      6               -1
    --  2012-09-30  Sunday      1               -3
    --  2012-10-31  Wednesday   4               -6
    --  2012-11-30  Friday      6               -1
    --  2012-12-31  Monday      2               -4
,   dateadd(d, -((@daysInWeek - @dayOfWeek) + DATEPART(dw, LDM.last_day_month)) % @daysInWeek, LDM.last_day_month) AS last_thursday_of_month
FROM 
    LAST_DAY_OF_PREVIOUS_MONTH LDM
    -- Comment the above and uncomment the below to 
    -- evaluate all the dates in the 2012
    -- LAST_THURSDAY_REFERENCE LDM 
```

选项 4

与选项 1 类似，但使用 SSIS 日志记录，登录到 SQL Server，然后查找上次成功执行的日期并将其用作结束日期。

```
-- this code is approximate, I don't have a 2005 instance about
-- if you've logged to a different database, change the msdb reference
SELECT
    max(starttime) AS execution_datetime
FROM
    msdb.dbo.sysdtslog90 L
WHERE
    L.event = 'PackageStart'
    AND L.source = 'MyPackage'; 
```

# google-analytics - SyntaxError：意外的标识符。用于 Google 电子商务跟踪代码的 Google Chrome 调试器

> ID：10440439
> 
> 赞同：0
> 
> 时间：2012-05-03T22:55:23.227
> 
> 标签：google-analytics

google chrome 调试器在以下 GA 电子商务跟踪代码中显示 SyntaxError: Unexpected Identifier：

```
<?php 
if($this->tx_id == true && $this->rd['total'] == true) { 
?>
    _gaq.push(['_addTrans',
                    <?=$this->tx_id ?>,
                    '',
                    <?=$this->rd['total']?>,
                    '',
                    '',
                    '',
                    '',
                    ''
                ]);

    <!------Items purchased------>
<?php 
    foreach($this->dd as $sku=>$val) {
        $i++;
        $product_title= $this->pp[$sku]['title'];
        $qty = $val['pt']['qty']; 
        ?>
            _gaq.push(['_addItem',
                        <?= $this->tx_id ?>,
                        <?= $sku ?>,
                        <?= $this->pp[$sku]['title'] ?>, 
                        '',
                        <?= $this->pp[$sku]['price']?>,
                        <?= $qty ?>
                    ]);
    <?php 
    }
    ?>

    _gaq.push(['_trackTrans']);  
<?php  
}
?> 
```

你能帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T16:33:30.453

您缺少 ga`_addTrans`和`_addItem`命令的参数周围的单引号。

它应该是这样的：

```
<?php 
if($this->tx_id == true && $this->rd['total'] == true) { 
?>
    _gaq.push(['_addTrans',
                    '<?=$this->tx_id ?>', /* <-- Surrounded with single quotes */
                    '',
                    '<?=$this->rd['total']?>', /* <-- Surrounded with single quotes */
                    '',
                    '',
                    '',
                    '',
                    ''
                ]);

    <!------Items purchased------>
<?php 
    foreach($this->dd as $sku=>$val) {
        $i++;
        $product_title= $this->pp[$sku]['title'];
        $qty = $val['pt']['qty']; 
        ?>
            _gaq.push(['_addItem',
                        '<?= $this->tx_id ?>', /* <-- Surrounded with single quotes */
                        '<?= $sku ?>', /* <-- Surrounded with single quotes */
                        '<?= $this->pp[$sku]['title'] ?>',  /* <-- Surrounded with single quotes */
                        '',
                        '<?= $this->pp[$sku]['price']?>', /* <-- Surrounded with single quotes */
                        '<?= $qty ?>' /* <-- Surrounded with single quotes */
                    ]);
    <?php 
    }
    ?>

    _gaq.push(['_trackTrans']);  
<?php  
}
?> 
```

# java - 自动完成 JTextField 和箭头键

> ID：10440442
> 
> 赞同：9
> 
> 时间：2012-05-03T22:55:36.767
> 
> 标签：java, swing, text, jtextfield

我正在尝试构建一个`javax.swing.JTextField`with用于像*Google*`javax.swing.JList`这样的自动完成功能。

 **   写一个单词时，`Google`显示几个*匹配项*和

    *   *按下*时，我可以使用 and和 and`  ▼&nbsp; `选择一些*匹配项*`  ▲&nbsp; ``  ▼&nbsp; `
    *   `  ◀ `可以使用和编辑我的输入`  ▶&nbsp; `。
    *   当我 `  Enter         `按键搜索框中的内容时。
    *   当按下`Esc`该框更改为原始输入。

我的应用是关于[圣经](http://en.wikipedia.org/wiki/Bible)的，我想在学习圣经时寻找一个特定的词。我见过[Java2sAutoTextField](http://www.java2s.com/Code/Java/Swing-Components/AutocompleteComboBox.htm)但箭头键没有这种特殊行为。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-11T14:06:47.450

这需要一个自定义编码组件。绝对是扩展 JTextField 的类，并且在该类中，您有一个包含 JList 的 JPopupMenu。您必须将 JPopupMenu 放在文本字段的正下方，使其看起来像 1 个组件。

您的下一个技巧是在您键入时进行过滤。我通常使用 Java6 TableRowSorter 和一个 JTable 来执行此操作，我在其中预先填充了数据。您将需要 JTextField 上的一些更改侦听器并拦截键入的每个键并获取您的数据。

1.  按键
2.  在数据库中执行查询（或一些数据存储以获取类似条目）
3.  用这些整体填充 JTable
4.  使用基于 JTextField 条目的正则表达式设置 RowFilter 以过滤检索到的数据
5.  使用关键听众管理您的操作

**编辑**

我制作了一个示例摇摆应用程序来展示我所说的。这是一个复制/粘贴示例，应该可以立即使用（需要 JDK 1.6+）。我基本上得到了你想要的东西，我把评论放在我告诉你填写空白的地方。例如，Escape 键事件被消耗，你可以用它做任何你想做的事情。

initTableModel() 方法只是用数据初始化表模型。通常，您希望使用来自数据库或其他东西的数据动态填充表模型。可以进行很多调整，但这是为了举例说明；）所以这应该是一个足够好的示例，您可以修改以完成您的目标。除此之外，你必须付给我$$$$ :)

```
package test.text.googleclone;

import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Rectangle;
import java.awt.Toolkit;
import java.awt.Window;
import java.awt.event.ActionEvent;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import java.util.regex.PatternSyntaxException;
import javax.swing.AbstractAction;
import javax.swing.BorderFactory;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JPopupMenu;
import javax.swing.JTable;
import javax.swing.JTextField;
import javax.swing.KeyStroke;
import javax.swing.ListSelectionModel;
import javax.swing.RowFilter;
import javax.swing.event.DocumentEvent;
import javax.swing.event.DocumentListener;
import javax.swing.table.DefaultTableModel;
import javax.swing.table.TableRowSorter;

public class SearchAutoFillTest {

private JFrame frame = null;
private JTextField searchField = null;
private JPopupMenu popup = null;

private JTable searchTable = null;
private TableRowSorter<DefaultTableModel> rowSorter = null;
private DefaultTableModel searchTableModel = null;

public SearchAutoFillTest() {
    searchTableModel = new DefaultTableModel();
    initTableModel();

    rowSorter = new TableRowSorter<DefaultTableModel>(searchTableModel);
    searchTable = new JTable(searchTableModel);
    searchTable.setRowSorter(rowSorter);
    searchTable.setFillsViewportHeight(true);
    searchTable.getColumnModel().setColumnSelectionAllowed(false);
    searchTable.setSelectionMode(ListSelectionModel.SINGLE_INTERVAL_SELECTION);
    searchTable.getTableHeader().setReorderingAllowed(false);
    searchTable.setPreferredSize(new Dimension(775, 100));
    searchTable.setGridColor(Color.WHITE);

    searchField = new JTextField();
    searchField.getDocument().addDocumentListener(new DocumentListener() {
        @Override
        public void changedUpdate(DocumentEvent e) {
            showPopup(e);
        }

        @Override
        public void insertUpdate(DocumentEvent e) {
            showPopup(e);
        }

        @Override
        public void removeUpdate(DocumentEvent e) {
            showPopup(e);
        }
    });

    searchField.addKeyListener(new KeyListener() {
        @Override
        public void keyTyped(KeyEvent e) {

        }

        @Override
        public void keyReleased(KeyEvent e) {
            int code = e.getKeyCode();
            switch(code)
            {
                case KeyEvent.VK_UP:
                {
                    cycleTableSelectionUp();
                    break;
                }

                case KeyEvent.VK_DOWN:
                {
                    cycleTableSelectionDown();
                    break;
                }

                case KeyEvent.VK_LEFT:
                {
                    //Do whatever you want here
                    break;
                }

                case KeyEvent.VK_RIGHT:
                {
                    //Do whatever you want here
                    break;
                }
            }
        }

        @Override
        public void keyPressed(KeyEvent e) {

        }
    });

    KeyStroke keyStroke = KeyStroke.getKeyStroke("ESCAPE");
    searchField.getInputMap().put(keyStroke, "ESCAPE");
    searchField.getActionMap().put("ESCAPE", new AbstractAction() {
        @Override
        public void actionPerformed(ActionEvent e) {
            //Do what you wish here with the escape key.
        }
    });

    popup = new JPopupMenu();
    popup.add(searchTable);
    popup.setVisible(false);
    popup.setBorder(BorderFactory.createEmptyBorder());

    JPanel searchPanel = new JPanel(new BorderLayout(5, 5));
    searchPanel.setBorder(BorderFactory.createEmptyBorder(4, 4, 4, 4));
    searchPanel.add(searchField, BorderLayout.CENTER);

    frame = new JFrame();
    frame.setLayout(new BorderLayout(5, 5));
    frame.add(searchPanel, BorderLayout.NORTH);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setSize(800, 500);
    center(frame);
    frame.setVisible(true);
}

private final void newFilter() {
    RowFilter<DefaultTableModel, Object> rf = null;

    try {
        rf = RowFilter.regexFilter(getFilterText(), 0);
    }
    catch(PatternSyntaxException e) {
        return;
    }

    rowSorter.setRowFilter(rf);
}

private final String getFilterText() {
    String orig = searchField.getText();
    return "("+orig.toLowerCase()+")|("+orig.toUpperCase()+")";
}

private void showPopup(DocumentEvent e) {
    if(e.getDocument().getLength() > 0) {
        if(!popup.isVisible()) { 
            Rectangle r = searchField.getBounds();
            popup.show(searchField, (r.x-4), (r.y+16));
            popup.setVisible(true);
        }

        newFilter();
        searchField.grabFocus();

    }
    else {
        popup.setVisible(false);
    }
}

private void cycleTableSelectionUp() {
    ListSelectionModel selModel = searchTable.getSelectionModel();
    int index0 = selModel.getMinSelectionIndex();
    if(index0 > 0) {
        selModel.setSelectionInterval(index0-1, index0-1);
    }
}

private void cycleTableSelectionDown() {
    ListSelectionModel selModel = searchTable.getSelectionModel();
    int index0 = selModel.getMinSelectionIndex();
    if(index0 == -1) {
        selModel.setSelectionInterval(0, 0);
    }
    else if(index0 > -1) {
        selModel.setSelectionInterval(index0+1, index0+1);
    }
}

private void initTableModel() {
    String[] columns = new String[] {"A"};
    String[][] data = new String[][]
    {
        new String[] {"a"},
        new String[] {"aa"},
        new String[] {"aaab"},
        new String[] {"aaabb"},
        new String[] {"aaabbbz"},
        new String[] {"b"},
        new String[] {"bb"},
        new String[] {"bbb"},
        new String[] {"bbbbbbb"},
        new String[] {"bbbbbbbeee"},
        new String[] {"bbbbbbbeeexxx"},
        new String[] {"ccc"},
        new String[] {"cccc"},
        new String[] {"ccccc"},
        new String[] {"cccccaaaa"},
        new String[] {"ccccccaaaa"},
    };

    searchTableModel.setDataVector(data, columns);
}

private void center(Window w) {
    int screenWidth  = Toolkit.getDefaultToolkit().getScreenSize().width;
    int screenHeight = Toolkit.getDefaultToolkit().getScreenSize().height;

    int windowWidth = w.getWidth();
    int windowHeight = w.getHeight();

    if (windowHeight > screenHeight) {
        return;
    }

    if (windowWidth > screenWidth) {
        return;
    }

    int x = (screenWidth - windowWidth) / 2;
    int y = (screenHeight - windowHeight) / 2;

    w.setLocation(x, y);
}

public static void main(String ... args) {
    new SearchAutoFillTest();
}
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T12:27:51.790

该组件称为自动完成，包含在所谓的 Swing 扩展项目中。

看看：[http](http://swingx.java.net/)
: //swingx.java.net/ 有一个带有演示的 webstart：[http://swinglabs-demos.java.net/demos/swingxset6/swingxset.jnlp](http://swinglabs-demos.java.net/demos/swingxset6/swingxset.jnlp)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-15T20:21:26.813

*   使用 AutoComplete JTextField 放入 JToolBar / [MenuBar](https://stackoverflow.com/a/8127463/714968)，注意你必须在使用前对 ArrayList 进行排序，

*   使用未修饰的 JDialog 而不是 JPopup（仍然有一些重要的错误），

    a) 仅创建一个 JDialog，其父级为 JTextField 或 JMenuBar 或 JFrame，

    b) 始终在屏幕上可见 JDialog 之前从 AutoComplete JTextField 搜索 getBounds，此 Bounds 用于在屏幕上正确定位 JDialog

    c) 将 JDialog#setVisible(true) 包装到 invokeLater()

*   为 JDialog.setVisible(false)覆盖[Escape](http://tips4java.wordpress.com/2010/10/17/escape-key-and-dialog/)

*   放在那里关闭/隐藏 JButton 以[避免覆盖 focusLost 上的其他重要方法](http://www.toedter.com/en/jcalendar/)（这个日历在 focusLost、mouseClick 等方面有很好的解决方法......，用比较器的结果替换日历功能是否很容易，你必须下载代码源）

*   你可以放在那里（我的观点）6 / 9 / 最多 12 个按钮，你可以通过 setBackground(Color.white) 删除 JButton Feels 例如，你不能，请不要用 JDialog 和这些 JButtons 做某事，你工作将只是 setText("比较器的结果")

*   如果您的 ArrayList for AutoComplete JTextField 已排序，那么您有两个选择

    a) 通过在弹出的 JDialog 上为 setText() 添加 fils 单独的数组，为 6 / 9 / max 12 个按钮添加来自 AutoComplete 功能的最简单的覆盖偏差，如果你 setBackground(Color.white)，那么你不关心以某种方式隐藏 JButtons文本

    b）另一种方法是创建自己的比较器来搜索（相同的自动完成功能）前 6 / 9 / 最多 12 个匹配项，

*   为了从 6 / 9 / max 12 JButtons 中捕获事件，请使用[putClientProperty](https://stackoverflow.com/a/10472680/714968)或[EventHandler](https://stackoverflow.com/a/9007348/714968)或[Swing Actions](http://docs.oracle.com/javase/tutorial/uiswing/misc/action.html)，您只需要测试文本是否为空 :-)，

*   也许`Swing Actions`可能是最好的方法，因为它的事件是可扩展的，并且您可以默认[启用/禁用](http://docs.oracle.com/javase/7/docs/api/javax/swing/Action.html#setEnabled%28boolean%29)（如果 JButtons 文本为空）此操作的输出

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-04T15:36:06.153

听起来您想要一个`JComboBox`（请参阅[Swing 指南](http://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html)）而不是`JTextField`/ `JList`。

当然，你有一个下拉按钮，但是有可能的方法来处理这个 - 见[这里](https://stackoverflow.com/questions/822432/how-to-make-jcombobox-look-like-a-jtextfield)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-13T20:14:06.280

这将是这样的：

```
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import java.util.ArrayList;

import javax.swing.*;

public class Component extends JComponent {
    private final static String[] terms = {"Jesus",
        "Jesus walks on water" //...
    };
    private static ArrayList<String> recent = new ArrayList<String>();

    JTextField jtf;
    JList jl;
    public Component(){
        // set up design
        jtf = new JTextField();
        jtf.setSize(this.getWidth() - 25, 25);
        this.add(jtf);
        //...
        // add key listeners
    }
    class Listener implements KeyListener{

        @Override
        public void keyPressed(KeyEvent arg0) {

        }

        @Override
        public void keyReleased(KeyEvent arg0) {

        }

        @Override
        public void keyTyped(KeyEvent arg0) {
            if (arg0.getKeyCode() == KeyEvent.VK_DOWN){
                // set next item on list
            }
            else if (arg0.getKeyCode() == KeyEvent.VK_UP){
                // set previous item on list
            }
            else if (arg0.getKeyCode() == KeyEvent.VK_ENTER){
                // search
            }
            else if (arg0.getKeyCode() == KeyEvent.VK_ESCAPE){
                jtf.setText("");
            }
                                    else{
                                         // check list for matches
                                    }
        }

    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-04T15:24:31.623

默认行为是所有关键事件都转到具有焦点的组件。因此，您需要做的是确定应该真正转到其他组件的密钥并将 a 安装`KeyListener`到两者。

在该侦听器中，您可以将事件转发到其他组件。

请参阅[this answer](https://stackoverflow.com/a/531889/34088)如何将事件分派给新组件。在您的情况下，`source`必须是其他组件（列表，如果您的文本字段最初收到事件，反之亦然）。*

# java - Spring配置的Hibernate方言问题

> ID：10440444
> 
> 赞同：7
> 
> 时间：2012-05-03T22:55:42.170
> 
> 标签：java, mysql, spring, hibernate, jpa

我使用 Spring 配置的 Hibernate（通过 JPA），当我启动我的应用程序（部署在 Tomcat 6 上的战争）时，我收到此错误：

```
org.hibernate.HibernateException: Connection cannot be null when 'hibernate.dialect' not set 
```

这似乎很奇怪，因为我将休眠方言设置如下：

```
p:databasePlatform="org.hibernate.dialect.MySQL5Dialect 
```

有关更多信息，这里是我的完整 applicationContext.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:p="http://www.springframework.org/schema/p"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
           http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd
           http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd">

    <bean id="dataSource"
          class="org.springframework.jdbc.datasource.DriverManagerDataSource"
          p:driverClassName="com.mysql.jdbc.Driver"
          p:url="jdbc:mysql://localhost/room_management" p:username="root" p:password=""/>

    <bean id="entityManagerFactory"
          class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean"
          p:dataSource-ref="dataSource" p:persistenceUnitName="RoomManagement">
        <property name="jpaVendorAdapter">
            <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter"
                  p:database="MYSQL"
                  p:databasePlatform="org.hibernate.dialect.MySQL5Dialect"
                  p:showSql="true"/>
        </property>
    </bean>

    <bean id="transactionManager"
          class="org.springframework.orm.jpa.JpaTransactionManager"
          p:entityManagerFactory-ref="entityManagerFactory"/>

    <context:annotation-config/>

    <context:component-scan base-package="com.parisdescartes.roommanagement.*"/>

    <tx:annotation-driven/>

</beans> 
```

因此，我决定在 META-INF/persistence.xml 文件中精确定位 Hibernate Dialect，这一次可行。这是我如何精确的：

```
<properties>
            <property name="hibernate.dialect"
                      value="org.hibernate.dialect.MySQL5Dialect"/>
</properties> 
```

你知道为什么没有使用 Spring 配置设置 Hibernate Dialect 吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-04T08:31:04.283

不知道为什么它不适用于您的配置。使用 p: 注释可能会出现问题。我将发布我的代码（适用于我的配置）以尝试它是否会修复您的代码！:)

```
<bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="dataSource" ref="dataSource"/>
    <property name="jpaVendorAdapter">
        <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
            <property name="showSql" value="false"/>
            <property name="generateDdl" value="true"/>
            <property name="databasePlatform" value="org.hibernate.dialect.MySQL5Dialect"/>
        </bean>
    </property>
</bean> 
```

祝你好运！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-12-17T11:19:15.797

有点晚了，但我认为这可以增加价值。`databasePlatform`如果指定属性，不一定需要添加属性`database`，适配器本身会找出方言。

```
<property name="database" value="MYSQL" /> 
```

相关代码来自`org.springframework.orm.jpa.vendor.HibernateJPAVendorAdapter`

```
protected Class determineDatabaseDialectClass(Database database) {
    switch (database) {
        case DB2: return DB2Dialect.class;
        case DERBY: return DerbyDialect.class;
        case H2: return H2Dialect.class;
        case HSQL: return HSQLDialect.class;
        case INFORMIX: return InformixDialect.class;
        case MYSQL: return MySQLDialect.class;
        case ORACLE: return Oracle9iDialect.class;
        case POSTGRESQL: return PostgreSQLDialect.class;
        case SQL_SERVER: return SQLServerDialect.class;
        case SYBASE: return SybaseDialect.class;
        default: return null;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-02T14:07:31.657

可以从`DataSource`驱动程序自动检测方言。所以`hibernate.dialect`根本`database`不需要。如果发生异常`'hibernate.dialect' not set`，通常意味着数据库连接有问题：

```
<bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean"
      p:dataSource-ref="dataSource"
      p:packagesToScan="ru.javawebinar.**.model">

    <property name="jpaPropertyMap">
        <map>
            <entry key="#{T(org.hibernate.cfg.AvailableSettings).FORMAT_SQL}" value="${hibernate.format_sql}"/>
            <entry key="#{T(org.hibernate.cfg.AvailableSettings).USE_SQL_COMMENTS}" value="${hibernate.use_sql_comments}"/>
        </map>
    </property>

    <property name="jpaVendorAdapter">
        <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter"
              p:showSql="${jpa.showSql}">
        </bean>
    </property>
</bean> 
```

# c# - 使用官方 C# MongoDB 驱动程序更新嵌套列表中的单个元素

> ID：10440446
> 
> 赞同：1
> 
> 时间：2012-05-03T22:55:55.053
> 
> 标签：c#, mongodb, mongodb-query, mongodb-.net-driver, nosql

我有一个多轮的简单游戏，我想更新最近的一轮：

```
class Game
{
    public ObjectId Id { get; set; }
    public List<Round> Rounds { get; set; }
}

class Round
{
    public int A { get; set; }
    public int B { get; set; }
} 
```

我怎样才能做到相当于`games.Rounds.Last().A = x`使用官方 MongoDB C# 驱动程序？

编辑：添加了 Round.B。请注意，在这种情况下，A 和 B 可能会同时更新，因此我无法保存整个文档。我只想更新 A 字段。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T23:25:26.083

如果您使用支持 LINQ 的驱动程序，那么我想您可以这样做：

```
var last = collection.AsQueryable<Game>().Last();
last.A = x;
collection.Save(last); 
```

我想它不会像手动编码的更新语句那样有效，但这确实在功能上反映了您的大部分 JavaScript 版本。

编辑：没有 LINQ，并进行子集更新

```
var query = Query.EQ("_id", MongoDB.Bson.BsonValue.Create(games.Id);
var update = Update.Set("Rounds." + games.Rounds.Length - 1 + ".A", MongoDB.Bson.BsonValue.Create(x));

Collection.Update(query, update); 
```

看起来不太漂亮，但您可以通过 Mongo 中的数字索引到数组中，因此您会错过在更新之前将新回合添加到游戏中的情况。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-12-16T12:54:31.830

你可以这样做：

```
var query = Query<Entity>.EQ(e => e.Id, id);
var update = Update<Entity>.Set(e => e.Name, "Harry"); // update modifiers
collection.Update(query, update); 
```

希望这个对你有帮助。谢谢。

# c# - 使用 RX 在不同时间触发事件？

> ID：10440451
> 
> 赞同：5
> 
> 时间：2012-05-03T22:56:10.513
> 
> 标签：c#, multithreading, system.reactive

我有大量简单的配对类：

```
public class Pair { public DateTime Timestamp; public double Value; } 
```

它们按升序时间戳排序。我想在适当的时候为列表中的每个项目触发一个带有值（比如 Action<double>）的事件。时间是过去的，所以我需要标准化时间戳，使列表中的第一个是“现在”。我们可以使用 Reactive Extensions 进行设置，以便在两个项目之间的时间差之后触发下一个事件吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-03T23:49:21.187

说`pairs`是你的序列：

```
var obs = pairs.OrderBy(p => p.Timestamp).ToObservable(); 
```

现在`obs`是对作为有序可观察对象。

```
Observable.Zip(
    obs,
    obs.Take(1).Concat(obs),
    (pair1, pair2) => Observable.Timer(pair1.Timestamp - pair2.Timestamp)
      .Select(_ => pair1.Value))
.Concat()
.Subscribe(/* Do something here */); 
```

zip 负责将绝对时间转换为偏移量。它将获取序列并将其与自身连接，但偏移一，如下所示

```
Original 1--2--4--7--11
Offset   1--1--2--4--7--11
Joined   0--1--2--3--4 
```

然后将这个新值放入以将`Observable.Timer`其延迟适当的量。最后`Concat`将结果从 a 展平`IObservable<IObservable<double>>`为 a `IObservable<double>`。这假设您的序列是有序的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T00:57:38.007

如果通过“使用 Rx”允许我只使用 Rx 调度程序，那么这是一个非常简单的解决方案：

```
Action<double> action =
    x =>
        Console.WriteLine(x);

var ts0 = pairs.Select(p => p.Timestamp).Min();

pairs
    .ForEach(p => 
        Scheduler
            .ThreadPool
            .Schedule(
                p.Timestamp.Subtract(ts0),
                () => action(p.Value))); 
```

这使用`System.Interactive`extension `ForEach`，但您可以只使用常规`foreach`循环来加载调度程序。

我已经使用以下虚拟数据测试了代码：

```
var pairs = new []
{
    new Pair { Timestamp = new DateTime(2011, 1, 1, 7, 12, 30), Value = 1.1, },
    new Pair { Timestamp = new DateTime(2011, 1, 1, 7, 12, 45), Value = 1.2, },
    new Pair { Timestamp = new DateTime(2011, 1, 1, 7, 12, 40), Value = 1.3, },
}; 
```

我希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T23:55:52.090

我认为这个问题很有趣，这将是我第一次尝试。

```
static void RunPairs(IEnumerable<Pair> pairs, Action<double> pairEvent)
{
  if (pairs == null || !pairs.Any() || pairEvent == null)
    return;

  // if we can promise the pairs are already sorted
  // obviously we don't need this next line
  pairs = pairs.OrderBy(p => p.Timestamp);
  var first = pairs .First().Timestamp;
  var wrapped = pairs.Select(p => new { Offset = (p.Timestamp - first), Pair = p });

  var start = DateTime.Now;

  double interval = 250; // 1/4 second
  Timer timer = new Timer(interval);

  timer.AutoReset = true;
  timer.Elapsed += (sender, elapsedArgs) =>
  {
    var signalTime = elapsedArgs.SignalTime;
    var elapsedTime = (signalTime - start);

    var pairsToTrigger = wrapped.TakeWhile(wrap => elapsedTime > wrap.Offset).Select(w => w.Pair);
    wrapped = wrapped.Skip(pairsToTrigger.Count());

    if (!wrapped.Any())
      timer.Stop();

    foreach (var pair in pairsToTrigger)
      pairEvent(pair.Value);    
  };

  timer.Start();
} 
```

# c++ - 如何将 C++ 函数指针作为具有一些固定值的参数传递？

> ID：10440452
> 
> 赞同：2
> 
> 时间：2012-05-03T22:56:13.747
> 
> 标签：c++, syntax, arguments, function-pointers

我想在特定情况下使用函数指针。我正在使用`foo`具有以下原型的函数

```
foo(double (*func)(double,double)); 
```

我可以打电话`foo`给正常的方式：

```
double bar(double x, double y) {
    //stuff
};

int main(void) {
    foo(bar);
    return 0; 
}; 
```

但我想冻结 的值`x`以获得等效于`double (*func)(double)`这样的函数：

```
foo(bar(x,double)) 
```

C++ 中是否存在类似的语法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T00:33:06.317

如果您不想使用`std::bind`/ ，这里有两种选择`std::function`。

假设您的编译器支持将无状态 lambda 转换为函数指针，您可以使用 lambda 进行绑定`x`：

```
void foo(double (*f)(double, double)) { (*f)(3.14159, 2.71828); }

double bar(double x, double y) { return x * y; };

int main()
{
    foo([](double x, double y) -> double { return bar(1.0, y); });
    return 0;
} 
```

或者您甚至可以更改`foo`为接受任意函数对象的模板。这样您就可以使用具有捕获的 lambda：

```
template<typename TFunc>
void foo(TFunc f) { f(3.14159, 2.71828); }

double bar(double x, double y) { return x * y; };

int main()
{
    double fixedprm = 1.0;
    foo([fixedprm](double x, double y) -> double { return bar(fixedprm, y); });
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T23:19:18.000

`std::bind`如果你有 C++11，你可以使用。考虑以下示例，该示例通过在一次快速移动中将每个元素添加 5 来转换向量：

```
#include <iostream>
using std::cout;

#include <functional>
using std::plus;
using std::bind;
using std::placeholders::_1;

#include <vector>
using std::vector;

#include <algorithm>
using std::transform;

int main()
{
    vector<int> v {1, 3, 6};

    //here we bind the value 5 to the first argument of std::plus<int>()
    transform (v.begin(), v.end(), v.begin(), bind (plus<int>(), _1, 5));

    for (int i : v)
        cout << i << ' '; //outputs "6 8 11"
} 
```

* * *

至于你的例子，我可以像这样写一些接近它的东西：

```
#include <iostream>
using std::cout;

#include <functional>
using std::bind;
using std::function;
using std::placeholders::_1;

void foo (function<double (double, double)> func) //take function object
{
    //try to multiply by 3, but will do 2 instead
    for (double i = 1.1; i < 5.6; i += 1.1)
        cout << func (i, 3) << ' '; 
}

double bar (double x, double y)
{
    return x * y;
}

int main()
{
    foo (bind (bar, _1, 2));
} 
```

输出：

```
2.2 4.4 6.6 8.8 11 
```

不过，我可能把事情复杂化了。这实际上是我第一次同时使用`std::bind`和`std::function`。

# jquery - jQuery ColorBox 对所有帖子（或页面上的所有帖子，如博客页面）中的所有图像进行分组（Wordpress）

> ID：10440458
> 
> 赞同：0
> 
> 时间：2012-05-03T22:56:33.897
> 
> 标签：jquery, wordpress, colorbox, posts

有谁知道我们如何使用 jQuery ColorBox 插件对 Wordpress 博客中所有帖子中的所有图像进行分组？我正在尝试实现将整个博客中的所有图像分组到一个画廊中的 ColorBox 效果，您可以在其中来回浏览 ColorBox 中的所有这些图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T04:46:14.703

ColorBox 只能对文档中存在的元素进行分组。因此，如果您将所有链接或您使用的任何链接都放在一个页面上 - 那么是的，只需通过设置 colorbox 的 rel 属性将它们组合在一起。如果您尝试对分布在多个文档中的元素进行分组，那么这是不可能的。

# c# - 如何将多个语句添加到 DataGridView 数据源

> ID：10440463
> 
> 赞同：0
> 
> 时间：2012-05-03T22:57:13.000
> 
> 标签：c#, data-binding, datagridview, datasource

在系统中，dt 获取 url，然后将它们放入 getco.... 函数中，然后调用 sql 语句，将其添加到 gridview 数据源。但它会获取最后一个 url 的项目，因此它会覆盖。我该如何解决？

```
 for (int i = 0; i < dt.Rows.Count; i++)
     {
         row = dt.Rows[i];
         GridView1.DataSource = db.getComboxedCombinedRSS( row[0].ToString());
     }

     GridView1.DataBind();

public DataSet getComboxedCombinedRSS(string url)
{
    //SQL string to count the amount of rows within the OSDE_Users table
    //string sql = "SELECT [RSS_Title], [RSS_ID], R.Syndication, R.Category FROM RSS AS R INNER JOIN CombinedFeeds AS C ON  C.URL = R.URL  WHERE C.Name='" +name+" ' ORDER BY RSS_Date desc";
    string sql="SELECT top 30 [RSS_Title], [RSS_ID], Syndication, Category FROM RSS where URL= '"+url+"' order by RSS_DATE";
    SqlDataAdapter adapt = new SqlDataAdapter(sql, Connect());
    DataSet ds = new DataSet();
    adapt.Fill(ds);

    // result of query filled into datasource
    adapt.Dispose();

    closeConnection();
    return ds;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T23:17:16.870

```
 DataSet ds = new DataSet();
 for (int i = 0; i < dt.Rows.Count; i++)
     {
         row = dt.Rows[i];
        db.getComboxedCombinedRSS( row[0].ToString(), ds);
     }
     GridView1.DataSource = ds;
     GridView1.DataBind();

public void getComboxedCombinedRSS(string url, DataSet ds)
{
    //SQL string to count the amount of rows within the OSDE_Users table
    //string sql = "SELECT [RSS_Title], [RSS_ID], R.Syndication, R.Category FROM RSS AS R INNER JOIN CombinedFeeds AS C ON  C.URL = R.URL  WHERE C.Name='" +name+" ' ORDER BY RSS_Date desc";
    string sql="SELECT top 30 [RSS_Title], [RSS_ID], Syndication, Category FROM RSS where URL= '"+url+"' order by RSS_DATE";
    SqlDataAdapter adapt = new SqlDataAdapter(sql, Connect());

    adapt.Fill(ds);

    // result of query filled into datasource
    adapt.Dispose();

    closeConnection();

} 
```

# ios5 - 替代数据结构 - 使用 ARC 防止 ios5 中的内存泄漏

> ID：10440465
> 
> 赞同：0
> 
> 时间：2012-05-03T22:57:19.513
> 
> 标签：ios5, data-structures, memory-leaks, linked-list, automatic-ref-counting

我有一个数据结构，我试图用 ARC 将 ios5 存储在目标 c 中。数据结构类似于 -

```
Class - **Book**
@property (strong) NSArray *pages;
@property (strong) Page *startingPage;

Class - **Page**
@property (strong) Book *book;
@property (strong) Page *nextPage;
@property (strong) Page *previousPage; 
```

可以想象的问题是内存泄漏。这里有几个周期 -

```
Book -> pages -> page -> book
nextPage -> previousPage
Book -> startingPage -> book. 
```

我不能使属性变弱，因为如果这样做，我将丢失指向该值的指针。因此，假设我将**Page**中的*book*设置为较弱，那么当我尝试释放页面时，book 将被释放。但是，我仍然希望这本书保持分配状态。

 **是否有任何替代方式可以存储此数据结构？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T00:44:20.223

我不明白为什么制作 Page->book`weak`会让你失去指向这本书的指针。在它们指向的对象被释放之前，弱属性不会自动归零。只要至少有一个其他对象对您有强引用就`book`可以了。

所以想象一个图书馆对象有一个 NSArray 书籍。该数组保留添加到其中的书籍，因此对该书的所有弱引用将保持有效，直到该书从数组中删除（并隐式释放）。**

# file-upload - 上传（非常）大文件的强大的基于浏览器的方法是什么？

> ID：10440467
> 
> 赞同：2
> 
> 时间：2012-05-03T22:57:33.307
> 
> 标签：file-upload

我正在考虑用基于浏览器的解决方案替换我们当前的文件上传解决方案，这是一个使用 sftp 传输文件和元数据的定制 Java 应用程序。我的目的是通过将上传绑定到 Web 应用程序中经过身份验证的会话来更细粒度地控制谁可以上传，谁不能上传。这也将使我能够以直接的方式收集有关谁在何时上传什么等的可靠数据。

我担心的是我们需要能够支持上传大文件——想想 100GB 或更多。因此，我认为标准 HTTP 不合适——我不相信它是可靠的，并且我希望能够提供用户反馈，例如进度条。

到目前为止我想出的最好的主意是一个嵌入式小程序，它使用 sftp 推送文件，但如果可能的话，我想只使用 js 或类似的东西来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-01-10T09:58:10.417

有一个项目想要启用可恢复上传：[https](https://tus.io/) ://tus.io/ 。

它的客户端库在浏览器中提供进度条和中断时恢复。

您可以将服务器部分集成到您的应用程序中，自己管理身份验证，同时受益于可恢复性！

这是一篇博客文章[https://tus.io/blog/2018/09/25/adoption.html](https://tus.io/blog/2018/09/25/adoption.html)，他们在其中提到 Cloudflare 正在使用它。

# php - 遵循 Codeigniter/Ajax/Jquery 教程：似乎无法调试我做错了什么

> ID：10440474
> 
> 赞同：0
> 
> 时间：2012-05-03T22:58:10.270
> 
> 标签：php, codeigniter, jquery

我在这里学习教程：http: [//www.jotorres.com/2012/01/using-jquery-and-ajax-with-codeigniter/](http://www.jotorres.com/2012/01/using-jquery-and-ajax-with-codeigniter/)

在我看来，我有：

```
<script type="text/javascript" src="<?php echo jquery ?>"></script>

<button type="button" name="getdata" id="getdata">Get Data.</button>

<div id="result_table">

</div>

<script type="text/javascript" language="javascript">
$('#getdata').click(function(){

    $.ajax({
            url: "<?php echo base_url().'users/get_all_users';?>",
            type:'POST',
            dataType: 'json',
            success: function(output_string){
                    $("#result_table").append(output_string);
                } // End of success function of ajax form
            }); // End of ajax call
     });
</script> 
```

页眉和页脚主要是指向网站上其他页面的链接，但页眉和开头的相关部分是：

```
<!DOCTYPE html>
<!-- Website template by Jeremiah Tantongco, jtantongco@gmail.com -->
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title><?php echo $title ?> </title>
        <link rel="stylesheet" href="<?php echo template ?>" type="text/css" />
        <link rel="stylesheet" href="<?php echo display_elements ?>" type="text/css" />
    </head> 
```

注意：template 和 display_elements 是指向在 config/constants 中声明的服务器上某处的 css 文件的变量

注意：jquery 是在 config/constants 中声明的变量，它指向服务器上最新的 jquery 文件。它是可用的最新开发人员版本。

对于控制器方法：

```
public function test(){
    $this->renderTemp_noData('users/test', 'Test page');
}

public function get_all_users(){
    $query = $this->db->get('users');

    if($query->num_rows > 0){
        $header = false;
        $output_string = "";
        $output_string .=  "<table border='1'>\n";
        foreach ($query->result() as $row){
            $output_string .= "<tr>\n";
            $output_string .= "<th>{" . $row->uid ."}</th>\n";
            $output_string .= "</tr>\n";
        }
        $output_string .= "</table>\n";

    }
    else{
        $output_string = "There are no results";
    }
    //echo $output_string;
    echo json_encode($output_string);
}

public function renderTemp_noData($page, $title) {
    $data['title'] = $title;
    $accountType = $this->session->userdata('aid');

    switch ($accountType) {
        case 0: 
            $this->load->view('templates/LI_header', $data);
            $this->load->view($page);
            $this->load->view('templates/LI_footer');
            break;
        case 1: 
            $this->load->view('templates/LI_header_role1',$data);
            $this->load->view($page);
            $this->load->view('templates/LI_footer_role1');
            break;          
        case 2: 
            $this->load->view('templates/LI_header_role2',$data);
            $this->load->view($page);
            $this->load->view('templates/LI_footer_role2');
            break;
        case 3: 
            $this->load->view('templates/LI_header_role3',$data);
            $this->load->view($page);
            $this->load->view('templates/LI_footer_role3');
            break;
        default:
            redirect('/sessions/log_in/','refresh');
    }
} 
```

当我使用“获取数据”按钮进入页面时，按下它并没有任何反应。因此，如果有人知道如何公开错误消息，那就太好了。此外，当我测试查看 get_all_users 的输出时，我得到的是：

```
"<table border='1'>\n<tr>\n<th>{1}<\/th>\n<\/tr>\n<tr>\n<th>{2}<\/th>\n<\/tr>\n<tr>\n<th>{3}<\/th>\n<\/tr>\n<tr>\n<th>{4}<\/th>\n<\/tr>\n<tr>\n<th>{5}<\/th>\n<\/tr>\n<tr>\n<th>{6}<\/th>\n<\/tr>\n<tr>\n<th>{7}<\/th>\n<\/tr>\n<tr>\n<th>{8}<\/th>\n<\/tr>\n<tr>\n<th>{9}<\/th>\n<\/tr>\n<tr>\n<th>{10}<\/th>\n<\/tr>\n<tr>\n<th>{12}<\/th>\n<\/tr>\n<tr>\n<th>{13}<\/th>\n<\/tr>\n<tr>\n<th>{14}<\/th>\n<\/tr>\n<tr>\n<th>{15}<\/th>\n<\/tr>\n<tr>\n<th>{16}<\/th>\n<\/tr>\n<tr>\n<th>{17}<\/th>\n<\/tr>\n<tr>\n<th>{18}<\/th>\n<\/tr>\n<\/table>\n" 
```

JSON应该是这样的吗？我的直觉说不，但这是我第一次使用 JSON、Jquery 和 AJAX。此外，数值是正确的。查看我的数据库，只有 UID 1-18，没有 11。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T23:43:51.340

您的`get_all_users()`函数将 HTML 添加到您的`$output_string`中，然后您就是 json_encoding。JSON 的工作方式并非如此。用。。。来代替：

```
public function get_all_users() {
    $this->output->set_content_type('text/javascript; charset=UTF-8');

    $query = $this->db->get('users');
    echo json_encode($query->result());
} 
```

也就是说，您的数据库调用应该存在于模型中，而不是您的控制器中。

# floating-point - 您是否应该将浮点数与 0.0 进行比较

> ID：10440477
> 
> 赞同：1
> 
> 时间：2012-05-03T22:58:27.007
> 
> 标签：floating-point, compare

请记住浮点数不能与 == 与常量进行比较，因为常量可能不存在浮点表示。0.0 也是这样吗？还是大多数（或所有）浮点引擎都有 0.0 的特殊表示

我正在寻找可行或不可行的语言、IEEE 规范或浮点引擎。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T23:06:09.217

一个更好的想法是将两个浮点值之间的差的绝对值与一个小的（epsilon）值而不是零进行比较：

```
private static final double EPSILON = 1.0e-6;

if (Math.abs(x-y) < EPSILON) {
   // process here
} 
```

x 或 y 的值等于 0 是特殊情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T16:20:44.100

零保证在任何 IEEE-754 系统上都可以表示，而且我知道没有其他浮点系统不能完全表示零。这并不是说这样的系统不存在，但这将是*非常*不寻常的。

# python - 使用 Python 抓取 Ajax

> ID：10440480
> 
> 赞同：3
> 
> 时间：2012-05-03T22:58:55.167
> 
> 标签：python, selenium, pyqt4, beautifulsoup, screen-scraping

我正在尝试在此网站的表中获取数据，该数据在页面加载后通过 jquery 更新（我有权限）：

[http://whichchart.com/](http://whichchart.com/)

我目前使用 selenium 和 beautifulsoup 来获取数据，但是因为这些数据在 html 源中不可见，所以我无法访问它。我已经尝试过 PyQt4，但它同样没有获得更新的 html 源代码。

这些值在 firebug 和 chrome 开发人员中是可见的，那么是否有任何 python 包可以利用它并将其提供给 beautifulsoup？

我不是一个庞大的技术人员，所以理想情况下我想要一个可以在 Python 或下一个最简单的软件类型中工作的解决方案。

我知道我可以通过专有的“screen-scraper”软件获得它，但这很昂贵。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T23:10:23.937

页面正在进行 AJAX 调用以获取数据到[http://whichchart.com/service.php?action=NewcastleCoal](http://whichchart.com/service.php?action=NewcastleCoal)，它以 JSON 格式返回值。因此，您可以执行以下操作：

*   使用 urllib 使用 HTTP 获取数据
*   使用 json 库读取方法解析该数据
*   现在你有一个 python 对象要处理

如果您需要处理 HTML 页面内容，我建议您使用 BeautifulSoup 或[scrapy 之类的库](http://scrapy.org/)

# ruby - 为在线好友列表扩展 Redis

> ID：10440482
> 
> 赞同：1
> 
> 时间：2012-05-03T22:59:21.827
> 
> 标签：ruby, redis, scalability, user-presence

我在思考如何使用 Ruby 和 Redis（或任何 NoSQL 解决方案）实现在线朋友列表时遇到了麻烦，就像任何聊天 IM 即 Facebook 聊天一样。我的要求是：

*   总用户约 100 万
*   DB 仅存储用户朋友的 id（一组整数值）

我正在考虑使用 Redis 集群（我实际上不太了解）并按照[http://www.lukemelia.com/blog/archives/2010/01/17/redis-在实践中谁在线/](http://www.lukemelia.com/blog/archives/2010/01/17/redis-in-practice-whos-online/)。

**更新：**我们的应用程序真的不会将 Redis 用于其他任何事情，除了可能用于在线朋友列表。此外，它真的写得不重（我预计，我们的大多数查询将被在线朋友阅读）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T23:03:10.503

在[Redis DB Google Groups](https://groups.google.com/forum/?fromgroups#!topic/redis-db/OsUylXWDxWU)中讨论了这个问题后，我提出的解决方案（受[这篇文章](http://www.lukemelia.com/blog/archives/2010/01/17/redis-in-practice-whos-online/)的启发）是将`SADD`我所有的在线用户放到一个集合中，并为我的每个用户创建一个`user:#{user_id}:friends_list`并将他们的朋友列表存储为另一个集合。每当用户登录时，我都会`SINTER`将该用户的好友列表和当前在线用户设置。由于我们读重而不写重，我们将使用单个主节点进行写入。为了使其可扩展，我们有一个从主节点复制的从节点集群，我们的应用程序将使用一个简单的循环算法来完成`SINTER`

[Josiah Carlson](http://twitter.com/#!/dr_josiah)提出了一种更精细的方法：

> 1.  当用户 X 登录时，您将他们的朋友集与在线用户相交以获得他们的初始在线集，并使用 Y 分钟 TTL 保存它（他们在网站上做任何事情时，您都可以将过期时间更新为未来还有 Y 分钟）
> 2.  对于该“在线”集中的每个用户，您会找到他们相似的“初始集”，然后将 X 添加到该集中
> 3.  每当用户 Z 退出时，您都会扫描他们的朋友集，并从他们中删除 Z（无论他们是否存在）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T02:51:44.167

xmpp/jabber 呢？它们内置海量并发使用和高可靠性，您需要做的就是为用户登录的东西制作一个适配器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T14:59:15.103

您应该考虑在内存数据网格中，这些平台旨在提供这种可伸缩性。并且通常可以很容易地作为集群部署在任何云硬件上。请参阅：GigaSpaces XAP、vMware GemFire 或 Oracle Coherence。如果您正在寻找免费版，XAP 提供了社区版。

# c# - 从 C# 启动 jar

> ID：10440483
> 
> 赞同：1
> 
> 时间：2012-05-03T22:59:22.107
> 
> 标签：c#, jar, minecraft

如何从 C# 应用程序启动 java 应用程序？

我正在开发一个我的世界发射器。是否有从 C# 应用程序启动任何 jar 的通用方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T23:17:32.140

您可以将 jar 文件作为新进程启动：

```
string appData = Environment.GetEnvironmentVariable("APPDATA");

Process.Start(@"java",
  @"-Xms512m -Xmx1024m -cp """ + appData + @"\.minecraft\bin\*"" -Djava.library.path=""" + appData + @"\.minecraft\bin\natives"" net.minecraft.client.Minecraft"); 
```

这假设`java`在您的`PATH`（安装 java 时默认发生）。如果没有，请使用 java 的绝对路径。

这是直接启动游戏 - 如果用户告诉你他们把它放在哪里，你可以使用 minecraft 启动器。在windows上，这是一个exe，所以你可以直接启动它。

此外，APPDATA 是窗口的变量。对于 linux，路径在`$HOME`, 或`~/`. 此外，参数并不完全相同。假设您的用户将使用 Mono for linux（或苹果）运行您的应用程序。我没有方便为您测试选项的 Mono，但您可以使用

```
public static bool IsLinux
{
    get
    {
        int p = (int) Environment.OSVersion.Platform;
        return (p == 4) || (p == 6) || (p == 128);
    }
} 
```

帮助您选择正确的起始路径。上面的代码在[这里](https://stackoverflow.com/questions/5116977/c-sharp-how-to-check-the-os-version-at-runtime-e-g-windows-or-linux-without-usi)找到。我注意到上面示例中的属性被调用`IsLinux`，但 Mono docs 的引用说`6`是针对 Mac OS X。这让我相信该属性实际上应该被调用`IsUnix`（因为苹果狂热者继续宣扬这种情况，尽管苹果是与windows一样多的unix是dos）。我手头没有 macware 来测试这个，我把它留给学生。

# c++ - 循环模板

> ID：10440485
> 
> 赞同：3
> 
> 时间：2012-05-03T22:59:42.793
> 
> 标签：c++, templates, cyclic-reference

假设模板类 A 定义如下：

```
template <typename T>
class A
{
    B<T> b;
}; 
```

假设模板类 B 定义如下：

```
template <typename T>
class B
{
    A<T> a;
}; 
```

理想情况下，这些类将在具有内联实现的单独标头中定义。但是，这会导致循环包含问题。一种解决方案是将模板类的实现放入 cpp 文件中。但是，这需要专门的模板实例化。

有没有办法保持类的内联实现并避免循环包含依赖？如果可能的话，我想避免使用指针。

谢谢，

山姆

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T23:10:01.843

前向声明您的类并使用标头保护（或非标准的 #pragma 一次）。 [http://www.parashift.com/c++-faq-lite/misc-technical-issues.html#faq-39.11](http://www.parashift.com/c++-faq-lite/misc-technical-issues.html#faq-39.11)

请注意，两个类不能完全包含彼此的对象。这将描述一个无限大小的对象......
[http://www.parashift.com/c++-faq-lite/misc-technical-issues.html#faq-39.12](http://www.parashift.com/c++-faq-lite/misc-technical-issues.html#faq-39.12)

# javascript - 设置属性但也发送请求的方法的正确名称

> ID：10440487
> 
> 赞同：1
> 
> 时间：2012-05-03T22:59:47.117
> 
> 标签：javascript, backbone.js

希望这不是一个愚蠢的问题。

假设我有以下模型：

```
var Appointment = Backbone.Model.extend({

  urlRoot: '/appointments',

  defaults: function() {
    return {
      'Date': new Date(),
      'Status': AppointmentStatus.UPCOMING
    };
  }
}); 
```

我想添加一个`Appointment`纯粹用于更新`Status`. 此方法将执行以下操作：

```
function(newStatus) {
  $.ajax(this.url() + '/status', {
    data: { status: newStatus },
    type: 'POST',
    success: _.bind(function () {
      this.set('Status', newStatus);
    }, this);
  });
} 
```

困难的部分是为这个方法确定一个语义正确的名称。应该是`setStatus`,`updateStatus`还是别的什么？我希望这个名字很容易与普通名字区分开来`set`（这就是为什么`setStatus`看起来不对）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T23:03:52.763

我同意你的观点，“updateStatus”对我来说最有意义——它更准确地传达了它的操作涉及更多的内容，而不仅仅是在某处设置一个变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T23:06:17.470

你自己说了答案“......纯粹是为了**更新**状态。” 这是一个愚蠢的问题，但我认为你应该继续`updateStatus`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T23:06:47.817

updateStatus 比 setStatus 更准确地描述了该方法，特别是因为它正在发出 ajax 请求等等。当您初始化某些东西时，我会保留 setStatus 之类的名称。

# c# - Facebook 会话为空

> ID：10440489
> 
> 赞同：0
> 
> 时间：2012-05-03T23:00:01.150
> 
> 标签：c#, session, webforms, facebook-c#-sdk

我正在使用 Facebook C# SDK V6 并且正在使用本教程。

[http://csharpsdk.org/docs/web/getting-started](http://csharpsdk.org/docs/web/getting-started)

我几乎已经完成了所有工作 - 但是每次我尝试将我的访问令牌分配给我的 context.Session["AccessToken"] 时，我都会收到一个空异常。

这是一段代码：

```
public void ProcessRequest(HttpContext context)
    {
        var accessToken = context.Request["accessToken"];
        context.Session["AccessToken"] = accessToken;

        context.Response.Redirect("/Facebook.aspx");
    } 
```

它在第 2 行出错 - 在调试期间，我可以看到 Session 在进入处理程序时为空。

我在这个例子中使用了网络表单。

任何帮助都会很棒。

欧文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T23:15:11.527

The docs have now been updated with the fix.

```
public class FacebookLogin : IHttpHandler, System.Web.SessionState.IRequiresSessionState 
```

inherit from `IRequiresSessionState` so you can access the session.

# python - 像 Python 中的 'var and do_something_with(var)' 这样的语句有什么影响？

> ID：10440491
> 
> 赞同：11
> 
> 时间：2012-05-03T23:00:18.980
> 
> 标签：python

*在包源代码（具体是漏勺*）中寻找一些答案时，我偶然发现了一个我无法理解的字符串。我的*PyCharm*也对它皱眉，“声明似乎没有效果”。

这是代码摘要：

```
...
for path in e.paths():
    keyparts = []
    msgs = []
    for exc in path:
        exc.msg and msgs.extend(exc.messages()) # <-- what is that?
        keyname = exc._keyname()
        keyname and keyparts.append(keyname) # <-- and that
    errors['.'.join(keyparts)] = '; '.join(interpolate(msgs))
return errors
... 
```

它似乎非常pythonic，我想掌握它！

UPD。所以，正如我所看到的，它根本不是 pythonic——为了速记，可读性受到损害。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-03T23:03:46.773

如果 keyname 的计算结果为 False，则该`and`语句将立即返回 false，并且不计算第二部分。否则，它将评估第二部分（在这种情况下，返回值并不重要）。所以它基本上相当于：

```
if keyname: 
    keyparts.append(keyname) 
```

我不确定它是否非常 Pythonic，因为我刚刚建议的版本似乎更具可读性（至少对我个人而言）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T17:06:37.050

`and`并且`or`是[短路](http://en.wikipedia.org/wiki/Short-circuit_evaluation)逻辑运算符；这意味着一旦 Python 知道答案必须是什么，它就会停止评估任何剩余的子句。

在您发布的代码段`and`中，用于保护`.extend()`and`.append()`功能 - 例如，作者可能不想发布`None`到列表中。

我通常在`if`语句中使用此功能：

```
if name and name[0] in ('Mr', 'Mrs', 'Ms'):
    ... 
```

`name`是一个可能为空的列表——如果它是空的，`name[0]`将失败并带有一个`IndexError`，所以我用它来保护它`name and`——如果`name` *是*空`name[0]`的，（和`if`块）不执行并且避免了错误。

这是一个*非常*Pythonic 的特性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-03T23:11:15.363

由于在python中，语句中的第一个表达式在第二个表达式之前被评估，如果第一个表达式是，`and`解释器会中断对语句的评估， `and``False`

```
keyname and keyparts.append(keyname) 
```

相当于：

```
if keyname:
    keyparts.append(keyname) 
```

# python - For 循环（新手）

> ID：10440493
> 
> 赞同：8
> 
> 时间：2012-05-03T23:00:33.620
> 
> 标签：python, loops, for-loop, increment

我最近开始学习 Python，for 循环的概念对我来说还是有点困惑。我知道它通常遵循格式`for x in y`，其中`y`只是一些列表。

for-each 循环`for (int n: someArray)` 变为`for n in someArray`,

而for循环`for (i = 0; i < 9; i-=2)`可以表示为`for i in range(0, 9, -2)`

假设我想要的不是一个恒定的增量，`i*=2`甚至是`i*=i`。这可能吗，还是我必须改用while循环？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-03T23:08:13.237

正如您所说，`for`循环遍历列表的元素。该列表可以包含您喜欢的任何内容，因此您可以预先构建一个包含每个步骤的列表。

循环也可以`for`遍历[“生成器”](http://wiki.python.org/moin/Generators)，它是一小段代码，而不是实际的列表。在 Python 中，`range()`它实际上是一个生成器（尽管在 Python 2.x中，在生成器`range()`时返回了一个列表`xrange()`）。

例如：

```
def doubler(x):
    while True:
        yield x
        x *= 2

for i in doubler(1):
    print i 
```

上面的`for`循环将打印

```
1
2
4
8 
```

以此类推，直到您按下 Ctrl+C。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-03T23:15:18.763

You can use a [generator expression](https://www.youtube.com/watch?v=t85uBptTDYY) to do this efficiently and with little excess code:

```
for i in (2**x for x in range(10)): #In Python 2.x, use `xrange()`.
    ... 
```

Generator expressions work just like defining a manual generator (as in [Greg Hewgill's answer](https://stackoverflow.com/a/10440559/722121)), with a syntax similar to a list comprehension. They are evaluated lazily - meaning that they don't generate a list at the start of the operation, which can cause much better performance on large iterables.

So this generator works by waiting until it is asked for a value, then asking `range(10)` for a value, doubling that value, and passing it back to the `for` loop. It does this repeatedly until the `range()` generator yields no more values.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-03T23:19:47.963

请记住，Python 的“列表”部分可以是任何可迭代的序列。

例子：

一个字符串：

```
for c in 'abcdefg':
   # deal with the string on a character by character basis... 
```

一份文件：

```
with open('somefile','r') as f:
    for line in f:
         # deal with the file line by line 
```

一本字典：

```
d={1:'one',2:'two',3:'three'}
for key, value in d.items():
   # deal with the key:value pairs from a dict 
```

列表的一部分：

```
l=range(100)
for e in l[10:20:2]:
    # ever other element between 10 and 20 in l 
```

等等等等等等

所以它真的比“只是一些列表”要深得多

正如其他人所说，只需将可迭代设置为您想要的示例问题：

```
 for e in (i*i for i in range(10)):
     # the squares of the sequence 0-9...

 l=[1,5,10,15]
 for i in (i*2 for i in l):
     # the list l as a sequence * 2... 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T23:08:03.820

您将需要为此使用列表[推导](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)

```
print [x**2 for x in xrange(10)] # X to the 2nd power. 
```

和

```
print [x**x for x in xrange(10)] # X to the Xth power. 
```

* * *

列表理解语法如下：

```
[EXPRESSION for VARIABLE in ITERABLE if CONDITION] 
```

* * *

在底层，它的作用类似于[map 和 filter 函数](http://docs.python.org/tutorial/datastructures.html#functional-programming-tools)：

```
def f(VARIABLE): return EXPRESSION
def c(VARIABLE): return CONDITION

filter(c, map(f, ITERABLE)) 
```

给出的例子：

```
def square(x): return x**2

print map(square, xrange(10)) 
```

和

```
def hypercube(x): return x**x

print map(hypercube, xrange(10)) 
```

如果您不喜欢列表推导，可以将其用作替代方法。您也可以使用 for 循环，但这将远离 Python 惯用语......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-25T10:01:25.280

只是作为替代方案，如何将迭代/增量操作推广到 lambda 函数，以便您可以执行以下操作：

```
for i in seq(1, 9, lambda x: x*2):
    print i
...
1
2
4
8 
```

定义`seq`如下：

```
#!/bin/python
from timeit import timeit

def seq(a, b, f):
    x = a;
    while x < b:
        yield x
        x = f(x)

def testSeq():
    l = tuple(seq(1, 100000000, lambda x: x*2))
    #print l

def testGen():
    l = tuple((2**x for x in range(27)))
    #print l

testSeq();
testGen();

print "seq", timeit('testSeq()', 'from __main__ import testSeq', number = 1000000)
print "gen", timeit('testGen()', 'from __main__ import testGen', number = 1000000) 
```

性能差异不大：

```
seq 7.98655080795
gen 6.19856786728 
```

*[编辑]*

为了支持反向迭代并使用默认参数...

```
def seq(a, b, f = None):
    x = a;
    if b > a:
        if f == None:
            f = lambda x: x+1
        while x < b:
            yield x
            x = f(x)
    else:
        if f == None:
            f = lambda x: x-1
        while x > b:
            yield x
            x = f(x)

for i in seq(8, 0, lambda x: x/2):
    print i 
```

注意：这与迭代器符号选择方向/测试的`range`行为不同，而不是开始值和结束值之间的差异。`xrange``<``>`

# image - 不在 IIS 上加载 img 临时文件

> ID：10440494
> 
> 赞同：0
> 
> 时间：2012-05-03T23:00:33.740
> 
> 标签：image, iis

我今天的 IIS 有一些问题。

我尝试加载一个 .img 文件，该文件存储在我的 FTP 服务器上，但没有加载（红十字）。

我也验证了路径，它似乎是好的路径......我错过了什么？任何许可？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T23:03:04.313

我有一些与另一种类型的文件相似的东西。

您应该在 IIS 上检查您的 MIME 类型。

如果你不知道它是什么，这里有一个很好的学习链接：[MIME Types](http://www.webmaster-toolkit.com/mime-types.shtml)

您应该尝试添加 .img 并查看它是否有效。

# javascript - Jquery Validate Plugin 只允许文本

> ID：10440500
> 
> 赞同：0
> 
> 时间：2012-05-03T23:01:52.857
> 
> 标签：javascript, jquery, jquery-plugins, validation

我正在使用以下 jquery 插件

[http://digitalbush.com/projects/masked-input-plugin/](http://digitalbush.com/projects/masked-input-plugin/)

我当前的脚本是

```
<script type="text/javascript" charset="utf-8">
$(document).ready(function($) {  
$("#answer55937X1X3othertext").mask("aaaaaaaaaaaaaaaaaaaaaaaaa",{ placeholder:"#" });
});
</script> 
```

**问题：**

但实际上我希望允许用户只输入任意数量的字符的文本。例如：单词、短语甚至句子。所以我认为正则表达式会很合适。

**问题一：**

知道如何在这个插件中实现正则表达式吗？如果不是，请提出替代方案。请也包括正则表达式代码。

**问题2：（**出于好奇）

我确实查看了该网站，但找不到与正则表达式相关的任何内容。正则表达式是否默认包含在插件中？我不知道如何检查该功能是否包括在内。

提前致谢

**更新：**

我尝试了下面的脚本，但它不起作用。

```
 $('question'+QQ' input.text').bind('keypress', function (event) {
var regex = new RegExp("^[a-zA-Z]+$");
var key = String.fromCharCode(!event.charCode ? event.which : event.charCode);
if (!regex.test(key)) {
   event.preventDefault();
   return false;
}
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T23:09:11.517

据我所知，你不能使用“屏蔽输入”来做到这一点，它不支持你想要的要求。

它完全适合那些具有“固定长度”的输入，例如

```
an input with 8 length: 010-55555  (phone numbers)
an input with 8 or 11 length:  086-010-55555 (another phone numbers) 
```

它不支持这一点：

```
this is a sentence that doesn't have fixed words. 
```

因为它首先必须使用占位符“#”填写输入。

如果您想验证输入，只需编写您自己的自定义函数，使用真正简单的验证或其他 jquery 验证框架，甚至您自己的：

```
<input id="your_field" />

<script>
$("#your_field").blur(function(){
  // your implementation here....
  $(this).val().match(...)  
})
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T23:55:20.330

你好，stackoverflower 同胞！我刚刚花了 20 分钟左右的时间设计了一个 jquery 插件，我希望你以及其他许多人能够实现这个输入屏蔽。请记住，这是一个非常快速的工作，我希望添加它，但如果它满足您的需求，请告诉我！

[https://github.com/bmoyles0117/jQuery-SimpleMask](https://github.com/bmoyles0117/jQuery-SimpleMask)

请随意尝试使用下面的代码来实现它，“a”代表字母，“#”代表包含空格的字母数字，“9”当然代表数字。我所做的是在初始配置中添加标志来说明您是否希望允许使用句点、逗号或破折号。我真的希望这能满足您的需求！

```
<script src="jquery.simplemask.js"></script>
<script type="text/javascript">
    $(function() {
        $('#test123').simpleMask('aaaaa-####999', {
            allow_periods   : true,
            allow_commas    : true,
            allow_dashes    : true
        });
    });
</script>
<input type="text" id="test123" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T23:10:38.890

如果您想允许用户输入他们想要的任何内容，为什么需要使用掩码插件？

另外，查看页面后，插件似乎不接受正则表达式（如果我错了，请纠正我）。例如，他们使用`*`字符来表示任何字母数字字符。在正则表达式中，`*`字符具有特殊含义。

# facebook - 如何使用发布请求更新用户访问令牌？

> ID：10440501
> 
> 赞同：2
> 
> 时间：2012-05-03T23:01:54.567
> 
> 标签：facebook, facebook-graph-api, facebook-opengraph, facebook-authentication

我加载应用程序一次，接收 signed_request 并从中检索用户令牌，然后 iframe 中的所有转换都使用内部链接（无签名请求）完成。

我有几个需要处理的用例。用户访问令牌刚刚过期：

1.  用户单击下一个链接（不是 ajax）并发送获取请求
2.  用户填写表格并发送发布请求
3.  用户向需要访问facebook的服务器发送ajax请求

Nr 1 是最明显的情况，我可以简单地将用户重定向到 /authorize，因为没有交易。Nr3 可以通过解析来自服务器的特殊错误并重定向到 /authorize 的相同方式来解决。

Nr2，是最不愉快的情况，因为我使用的是非事务性 mongodb。所以我看到的唯一解决方案是 - 在做任何事情之前，我需要检查 /me 的访问令牌，如果它无效，将整个请求正文保存在会话中，重定向到 /authorize 然后再次处理请求。但是，如果它有效，则不能保证我的交易成功，但我对此很好。

所以我认为真正的问题是......你如何处理这些情况？你如何刷新令牌？你如何处理它们？也许我错过了一些明显的东西？

任何想法将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T05:20:37.713

在 PHP sdk 中，您可以调用：

```
$access_token = $facebook->getAccessToken(); 
```

在 javascript sdk 中，您可以使用：

```
FB.getLoginStatus 
```

随时获取新的访问令牌。使用[图形资源管理](https://developers.facebook.com/tools/explorer/?method=GET&path=1251291415)器检查令牌。请注意获取令牌的权限。

# lithium - 用于锂会话的 Memcache、Mongodb 或其他数据库存储

> ID：10440503
> 
> 赞同：5
> 
> 时间：2012-05-03T23:02:03.977
> 
> 标签：lithium

我对 Lithium 框架感到满意，并且想知道是否有任何示例可以使用 MongoDB 或 Memcache 进行 Lithium Sessions。是否需要编写一个新的会话适配器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T22:27:07.680

一种选择是将会话适配器设置为`'Php'`锂，并传递`'session.save_handler' => 'memcached'`给配置选项，该选项将使用 memcached 扩展的保存处理程序将会话存储在 memcache 中：

```
Session::config(array(
    'default' => array(
        'adapter' => 'Php',
        'session.save_handler' => 'memcached',
        'session.save_path' => 'sess1:11211, sess2:11211'
    )
)); 
```

[http://php.net/manual/en/memcached.sessions.php](http://php.net/manual/en/memcached.sessions.php)

我使用`'Model'`适配器（在 lab.lithify.me 上可用）将会话存储在 MongoDb 中：

```
Session::config(array(
    'default' => array(
        'adapter' => 'Model',
        'model' => 'app\models\Sessions',
        'name' => 'session'
    )
)); 
```

[http://lab.lithify.me/lab/extensions/view/a68f6ad626aaf7be37805f8e72f672e2](http://lab.lithify.me/lab/extensions/view/a68f6ad626aaf7be37805f8e72f672e2)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T12:56:05.347

必须为那些编写新的适配器：

*   [https://github.com/UnionOfRAD/lithium/tree/master/storage/session/adapter](https://github.com/UnionOfRAD/lithium/tree/master/storage/session/adapter)
*   [http://li3.me/docs/lithium/storage/session/adapter](http://li3.me/docs/lithium/storage/session/adapter)

除非您继续使用 PHP 适配器并利用[`session_set_save_handler`](http://www.php.net/manual/en/function.session-set-save-handler.php)它在 PHP 5.4 中变得更好。

我会选择第二种解决方案。

# java - 从 JodaTime DateTime 对象访问未指定的字段

> ID：10440515
> 
> 赞同：0
> 
> 时间：2012-05-03T23:04:07.923
> 
> 标签：java, datetime, jodatime

我有一个从可能具有一个或多个未指定字段的字符串解析的 JodaTime DateTime 对象`ISODateTimeFormat.dateTimeParser()`，例如“2012-05”的情况下的天，或“T11:55”的情况下的年份。但是，似乎这些字段总是填充有 Unix 时代的默认值。

有什么方法可以知道输入字符串中实际上未指定哪些字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T23:34:45.917

如果您缺少一些时间信息（时区除外），那么您就没有有效的 ISO 8601 格式。我有点惊讶 Joda Time 没有抛出错误，也不惊讶你无法弄清楚丢失了什么。

[http://docstore.mik.ua/orelly/xml/schema/ch04_05.htm](http://docstore.mik.ua/orelly/xml/schema/ch04_05.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T16:52:20.613

不，没有办法找出使用`ISODateTimeFormat.dateTimeParser()`. 一种选择是手动尝试不同的解析器 - 即。尝试严格的（日期和全职），然后放下毫秒，然后放下秒，依此类推，直到其中一个过去。痛苦，但可行。

JSR-310 计划通过将解析与对象构造分开来以不同方式处理此问题。

# database - 多表映射到一个对象时自带ORM和数据冗余

> ID：10440516
> 
> 赞同：2
> 
> 时间：2012-05-03T23:04:19.500
> 
> 标签：database, design-patterns, orm, jdbc

首先，对不起我的英语。

这是我第一次在 Java 中使用数据库，我想用纯 JDBC 和 SQL 编写一个简单的中间层（数据库和应用程序之间），它将我的表映射到对象（反之亦然）。我已经阅读了一些关于 DAO、ORM 和 Active Record 模式的内容，但有一件事让我很困扰：当填充由多个表组成的对象时，这个系统如何处理数据冗余？

例如：

我有两张桌子

```
TABLE message (id, content, recipient_id)
TABLE person (id, name, address) 
```

我想映射到

```
/* depends on message and person tables */
class Message
{
    public Message(int id, String content, Person recipient) {...}
    // setters, getters ommited.
    private int id;
    private String content;
    private Person recipient;
}

/* depends on person table */
class Person
{
    public Person(int id, String name, String address) {...}
    // setters, getters ommited.
    private int id;
    private String name;
    private String address;
} 
```

我看到两个解决方案：

1）我可以通过执行 SQL 选择连接这两个表来映射`table message`到对象。相应的对象将填充. 只要人和消息之间存在“一对多”关系，这当然会给我留下大量重复的数据。`Message``message.recipient_id = person.id``new Message(..., new Person(...))`

2）我可以从 中选择所有内容`table person`，填充对象`new Person(...)`并将它们存储在其中`Map<Integer, Person>`（映射键将保存 id）。然后从其中选择所有内容`table message`并通过查找匹配手动“加入”这两个`Person`。这将给我留下一个`Person`由多个`Message`'s 引用的实例，但我担心在这种情况下将数据保存在数据库中的全部意义都丢失了。

ORM 系统如何处理这个问题？在那种情况下我该怎么办？

# delphi - 什么会突然导致我的 Delphi 2006 IDE 在调试时出现异常行为？

> ID：10440520
> 
> 赞同：1
> 
> 时间：2012-05-03T23:04:39.627
> 
> 标签：delphi, debugging, freeze, delphi-2006

我有 Delphi 2006。突然它开始表现不正常。如果我运行到断点，它会停止，但下次我启动它时，程序会运行但会忽略断点。如果我重置调试器并从头开始运行程序，断点会再次起作用，但只有一次。

如果我在断点处停止后尝试设置变量 watch 之类的任何功能，IDE 将挂起。任务管理器在 BSD.EXE 上没有显示内存或 I/O 活动，但 CPU 牢牢地卡在 50%（大概是我的 2 个核心之一处于紧密循环中）。

所以我可以通过以下方式重现问题：

*   启动德尔福
*   加载我的项目
*   完整构建
*   在第一行设置断点
*   运行（程序在第一行中断）
*   在源中选择一个变量名并将其拖到监视窗口中
*   繁荣！

此行为仅限于正在调试的一个特定程序，并在 PC/IDE 重新启动后发生。

该应用程序有几十万行。

一定有东西被损坏了，但我从哪里开始呢？它指出我的程序正在破坏 IDE，但我可以通过中断 DPR 文件的第一行来重现问题！

是不是编译器被我最近添加的一些代码卡住了？

我想下一步是开始倒退，删除我添加的东西，直到问题消失，但我希望有人可以先阐明一些情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T00:27:31.037

Delphi 在配置选项方面过于复杂。我使用相同的 Windows 安装了五年，最后我的 Delphi 2006 非常错误。我有很多第 3 方套餐和一些我自己的套餐。

解决方案是：

1.  创建两个文件夹（1 到 bpl 文件，其他到包）；
2.  为每个组件包创建一个子文件夹；
3.  使用小名称以免库路径超载；
4.  记下要安装在文本文件中的每个包；
5.  `Tools\Library Path`使用包源、drc 等的新路径刷新 ；
6.  删除旧的德尔福安装；
7.  对所有内容进行全新、干净且有文档的安装。

当包显示任何错误时，将其从`Components\Install Packages`文件中删除，然后删除它的文件子文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T16:45:12.130

在使用运行时包进行构建时，我在使用 Delphi 进行调试时遇到了问题（2006 和 2010 都表现出类似的行为）。

如果所有内容都包含在 exe 中，那么它是坚如磐石的。否则，行为与您描述的非常相似。

我不能说这是因为自制的包装不好，还是因为 Delphi 的某些特定的东西。

# c++ - 调用派生类的函数调用运算符时避免指针

> ID：10440521
> 
> 赞同：1
> 
> 时间：2012-05-03T23:04:58.173
> 
> 标签：c++, inheritance, functor

我有一个关于函数对象继承的问题。

我想这一定是在 Stack Overflow 上被问了无数次，但是措辞相似的问题数量之多让我几乎不可能找到任何东西。

假设我有一个基本抽象类：

```
class BinaryOperation
{
public:
    virtual int operator()(int a, int b) = 0;
}; 
```

从中派生出两个新类：

```
class Plus : public BinaryOperation
{
public:
    virtual int operator()(int a, int b)
    {
        return a + b;
    };
};

class Minus : public BinaryOperation
{
public:
    virtual int operator()(int a, int b)
    {
        return a - b;
    };
}; 
```

我想用来`std::map`将字符串映射到从同一类派生的各种函子：

我的第一种方法是

```
std::map<std::string, BinaryOperation> operator_map;
operator_map["+"] = Plus();
operator_map["-"] = Minus();

operator_map["-"](5, 2); 
```

显然这不起作用，因为我们无法实例化抽象类。

如果我使用指向基类的指针，它工作得很好，但看起来更笨拙，因为我们必须使用`new`使其更容易发生内存泄漏`delete`的对象（我们必须手动处理对象）

```
std::map<std::string, BinaryOperation*> operator_map;

operator_map["+"] = new Plus();
operator_map["-"] = new Minus(); 

std::cout << (*operator_map["-"])(5, 2) 
```

在不牺牲 RAII 优势的情况下实现此功能的首选方式是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T23:08:30.763

只需制作`std::string`to的地图`std::function<int(int, int)>`。这允许您取消任何常见的基类，因为函数对象提供了多态性：

```
struct Plus {
  int operator()(int a, int b) const{ return a+b; }
};

struct Minus {
  int operator()(int a, int b) const{ return a-b; }
};

int main()
{
  std::map<std::string, std::function<int(int,int)>> opMap;
  using namespace std::placeholders;

  opMap["-"] = Minus();
  opMap["+"] = Plus();

  std::cout << opMap["-"](5,2) << std::endl;
  std::cout << opMap["+"](5,6) << std::endl;
} 
```

请注意，标准库提供了在[`functional`header](http://en.cppreference.com/w/cpp/utility/functional)`Minus`中实现算术运算的函子，因此您不必`Plus`自己实现：

```
opMap["-"] = std::minus<int>();
opMap["+"] = std::plus<int>(); 
```

# ruby-on-rails - 命名路线轨道的多个参数3

> ID：10440522
> 
> 赞同：0
> 
> 时间：2012-05-03T23:04:59.110
> 
> 标签：ruby-on-rails, routes, named-routing

我有以下路线：

```
match "sports/:sport(/:view)" => 'sports#show', as:'sport_path' 
```

我怎么打电话`sport_path(sport, view)`？当我尝试：

```
sport_path(params[:sport], 1) 
```

结果网址是：`/sports/5.1`. 应该是`/sports/5/1`（注意点而不是斜线）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T23:20:38.197

我有另一条名为`sport`. *掌心*

# c - 如何将函数传递给 fprintf

> ID：10440523
> 
> 赞同：1
> 
> 时间：2012-05-03T23:05:11.170
> 
> 标签：c, printf

我有我的函数 dumpArray(); 这样做：

```
void dumpArray(void)
{
       while(p <= i)
       {
           printf("%i:", packet[p].source);
           printf("%i:", packet[p].dest);
           printf("%i:", packet[p].type);
           printf("%i\n", packet[p].port);
           p++;
       }
} 
```

我正在尝试将其传递给 fprintf(); 像这样：

```
void fWrite(void)
{
    char fileName[30] = { '\0' };
    printf("Please specify a filename: ");
    scanf("%s", fileName) ;
    FILE *txtFile;
    txtFile = fopen(fileName, "w");
    if (txtFile == NULL)
    {
        printf("Can't open file!");
        exit(1);
    }
    else fprintf(txtFile, dumpArray());
} 
```

我正在尝试编写 dumpArray(); 的结果 到文件中。
谁能看到我哪里出错并指出我正确的方向。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T23:13:16.310

You could rewrite dumparray to either write to stdout or to your textfile depending which stream you pass in.

So you would change all of your printf calls to fprintf and pass the stream as the first argument.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T23:14:32.983

Your first function is dumping its output into `stdout` and returning nothing, so it just won't result in an output that `fprintf` can capture.

You'll need to figure out how long all of those `printf` strings are and allocate the appropriate amount of memory to `sprintf` it and then return the string.

Alternatively, you should pass a function pointer to `dumpArray` pointing at the `printf`-like function that will instead write to a file:

```
void printfLike(format, data) {
    fprintf(fileConst, format, data);
}

...

dumpArray(printfLike); 
```

Something of that nature.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T23:10:21.117

fprintf 的函数声明声明它需要一些 char* 参数，但 dumpArray() 没有返回 char*。

int fprintf ( FILE * 流, const char * 格式, ... );

如果要在 dumpArray() 中写入文件，可以将 txtFile 传递给 dumpArray() 并在函数内执行 fprintf。或者，您可以先将要写入文件的所有数据收集到缓冲区（例如 char[]）中，然后将其全部写入。

例如：

```
void dumpArray(FILE * txtFile)
{
       while(p <= i)
       {
           fprintf(txtFile, packet[p].source);
           fprintf(txtFile, packet[p].dest);
           fprintf(txtFile, packet[p].type);
           fprintf(txtFile, packet[p].port);
           fprintf(txtFile, "\n");
         p++;
       }
}

void fWrite(void)
{
    char fileName[30] = { '\0' };
    printf("Please specify a filename: ");
    scanf("%s", fileName) ;
    FILE *txtFile;
    txtFile = fopen(fileName, "w");
    if (txtFile == NULL)
    {
        printf("Can't open file!");
        exit(1);
    }
    else dumpArray(txtFile); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T23:12:59.030

Where do you start?

Plead look up the page for `fprintf` and `printf`.

Change `dumpArray` into reuturning a character array. WHat is `p`?

That is for starters - Re-read you text book on C and also manual pages on C

# html - 浮动 div 重叠

> ID：10440528
> 
> 赞同：0
> 
> 时间：2012-05-03T23:05:33.283
> 
> 标签：html, css, css-float

我有以下代码，它简化了演示问题。menuholder div 不在表单 div 内，但它以这种方式显示。它必须在它的右边，为什么会发生这种情况？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"         "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Website</title>

<style type="text/css">
<!--
body {
font: 100%/1.4 Verdana, Arial, Helvetica, sans-serif;
margin: 0;
padding: 0;
color: #000;
background-color: #FFFFFF;
}

#header {
width: 900px;
height: 600px;
border: 2px dashed #906;
}

#website {
width: 150px;
height: 90px;
float: left;
border: 2px dashed #F00;
}

#form {
width: 300px;
height: 200px;
float: left;
border: 2px dashed #906;

}
#menuholder {
width: 220px;
height: 200px;
float: left;
border: 2px dashed #30F;    
}
</style>

</head>
<body>
<div id="header">
<div id="website">
    <h1><a href="#">Website</a></h1>
</div>

<div id="form">          
<form action="login.php" method="POST">
<table>
    <tr>
        <td>
        Username:
        </td>
        <td>
       <input type="text" name="username">
        </td>

    </tr>

    <tr>
        <td>
        Password:
        </td> 
        <td>
        <input type='password' name='password'>
        </td>

    </tr>

<table>
<p>
<input type='submit' name='submit' value='Login'>
<p>
<a href='register.php'> Register!</a>
</div>

<div id="menuholder">
    <ul id="menu">
        <li class="active"><a href="#">Home</a></li>
        <li><a href="#">register</a></li>
        <li><a href="#">about application</a></li>
        <li><a href="#">demo</a></li>
        <li><a href="#">help</a></li>
        <li><a href="#">contact</a></li>
    </ul>
</div>
</div>

</body>
</html> 
```

在 google inspect 上，它显示 div menuholder 位于表单的 div 中。但是，在我的代码中，它不是。我能够拖放到谷歌检查中，它看起来不错。我如何修复我的代码以使其不必这样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T23:08:16.807

*   您的表格的结束标签应该是`</table>`
*   您缺少结束`</form>`标签。
*   p 标签的结束标签应该是`</p>`
*   输入未正确关闭（应以`/>`not结尾`>`

如果您还没有，我建议您每次打开一个 html 节点时使用 tab 键，每次关闭一个节点时都使用 tab 键。这将帮助您查看标签未关闭的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T23:09:37.680

一张桌子？以表格形式？！

*   关闭你的`<table>`标签
*   关闭你的`<form>`标签
*   关闭你的`<p>`标签

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T00:31:46.677

当我们在它的时候，那个开场评论也可以与关闭一起做。

```
<style type="text/css">
<!-- 
```

# ruby-on-rails-3 - Rails 3 中的最佳自动完成/建议搜索表单

> ID：10440529
> 
> 赞同：3
> 
> 时间：2012-05-03T23:05:36.373
> 
> 标签：ruby-on-rails-3, autocomplete, full-text-search, sphinx, thinking-sphinx

**我有一个使用以下内容的 rails 应用程序，**

*   轨道 3.1，
*   红宝石 1.9.2,
*   mysql,
*   狮身人面像搜索，
*   会分页，
*   思考狮身人面像，
*   我选择不使用 gem 进行简单的登录，所以没有设计，没有 authlogic。从头开始登录，使用 BCrypt 加密密码。
*   查询。

*现在，这个应用程序只处理一个产品目录。当我说产品目录时，不仅仅是一个简单的目录。它处理所有功能、类别、品牌。*

**在 2 个 mysql 表中列出的所有产品标题和功能上都有一个主文本搜索功能。标题和特点。搜索工作正常且相关。**

## 我们决定在我们的应用程序中包含自动完成/自动建议。

## 问题：

* * *

1.  我应该使用 gem 还是从头开始构建它？请给出你的理由

2.  如果我应该使用一个 gem，使用哪一个，那个 gem 是最新的并且有一个论坛可以随时支持吗？

3.  我们认为，与在“标题”和“功能”表上添加自动完成/建议相比，“标题”表上的自动完成/建议会很好。你对此有何评论？

4.  它是什么，自动建议或自动完成？

* * *

*（比如，有 PAT ALLAN 和 BARRY HUNTER 思考 sphinx 和 sphinx 搜索，天哪！他们致力于支持让用户睡得很好）*

我详细说明了我的应用程序的元素，请指教！

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T03:57:50.667

jqueryui 是一个很好的资源。

这是一个自动完成的演示，您可以查看源代码以了解如何在您的服务器上实现。 [http://jqueryui.com/demos/autocomplete/](http://jqueryui.com/demos/autocomplete/)

javascript 将 term=TERM 发送到您的控制器。我的设置是这样的：

```
def autocomplete
  @movies= Movie.select("id, title").where("title LIKE ?", "#{params[:term]}%").limit(20)
  @hash = []
  @movies.each do |movie|
    @hash << {"label" => movie.title, "id" => movie.id}
  end
  render :json => @hash
end 
```

根据您认为合适的方式进行定制。

# android - 我可以启动 Activity 而不在 android 屏幕上显示它的布局吗？

> ID：10440533
> 
> 赞同：-1
> 
> 时间：2012-05-03T23:06:08.593
> 
> 标签：android, android-layout, android-activity

我的活动：A-->B-->C

当我开始活动 B 时，我想在 android 屏幕上显示 C 布局而不是 B 布局，我可以这样做吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T23:15:35.463

if you specify in the B Activity in the onCreate method:

```
this.setContentView(clayout); 
```

you get the C layout in the B activity.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T11:15:19.797

使用共享首选项在活动开始时附加一个值，在重新加载时检查它是否包含该变量跳过并加载该活动，否则从活动 A 开始

# ruby-on-rails - 登录重定向到他最后在 Rails Devise 中的页面

> ID：10440536
> 
> 赞同：0
> 
> 时间：2012-05-03T23:06:19.733
> 
> 标签：ruby-on-rails, devise

我想要一个登录页面，将他在登录之前的最后一页重定向到用户。我怎么能在 Rails 中做到这一点。我是否需要为每个链接覆盖 after_sign_in_path ？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T01:42:28.550

简短的回答是肯定的，您需要覆盖`after_sign_in_path`我发现的最简单的方法如下：

在您的应用程序控制器内部，您需要添加两个方法，

```
 include SessionsHelper
  def after_sign_in_path_for(resource_or_scope)
    case resource_or_scope
    when :user, User
      store_location = session[:return_to]
      clear_stored_location
      (store_location.nil?) ? requests_path : store_location.to_s
    else
      super
    end
  end

  def check_login
    if !anyone_signed_in?
      deny_access
    end
  end 
```

首先，我们重写`after_sign_in_path`以保存我们从 Rails 会话中提取的新存储位置到`store_location`我们将在`SessionsHelper`. 接下来我们创建一个方法，我们可以`before_filter`在我们想要使用它的任何控制器中使用它。

接下来，设置`sessions_helper.rb`

```
module SessionsHelper

  def deny_access
    store_location
    redirect_to new_user_session_path
  end

  def anyone_signed_in?
    !current_user.nil?
  end

  private

    def store_location
      session[:return_to] = request.fullpath
    end

    def clear_stored_location
      session[:return_to] = nil
    end

end 
```

在这里，我们只是定义了我们在应用程序控制器中使用的方法，这一切都应该是不言自明的。只要记住`before_filter :check_login`在您想要记住之前路径的控制器中的任何其他过滤器之前使用。

# image - 关闭后 Chrome 插件图像仍然存在

> ID：10440540
> 
> 赞同：1
> 
> 时间：2012-05-03T23:06:26.403
> 
> 标签：image, google-chrome, plugins, firebreath

过去几个月我一直在使用 Firebreath 开发媒体播放器浏览器插件，但我认为这不是 Firebreath 的问题。

目前，我被困在尝试重新加载包含插件的网页时发生的这个奇怪问题。重新加载之前显示的图像将停留在屏幕顶部。重新加载的新插件将继续存在并且远远落后于它，但旧图像将永远停留在屏幕上。如果我滚动或调整浏览器大小，甚至更改 URL，图像将保持不变，但是如果我移动浏览器，图像将跟随。图像在关闭选项卡后保留，但在关闭窗口时离开

这是一个屏幕截图，演示了我在说什么。

[http://i.imgur.com/asB7i.jpg](http://i.imgur.com/asB7i.jpg)

（我是新用户，不能发图）

你能看到我离开了我的插件页面并进入了 Firebreath 网站，但图像仍然存在。

这个问题在 windows 和 linux 上都会发生，在 linux 上发生的频率要低得多，并且在同时使用 directx 和 opengl 时会发生。但只发生在 chrome 上。

只是想知道您或其他任何人是否对可能发生的事情有任何想法、建议或见解。我已经尝试了所有方法，包括残暴的黑客攻击，但似乎没有任何效果。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T18:48:02.583

您的问题很可能是当 DetachedEvent 触发时您没有拆除您的 directx 或 opengl 上下文。AttachedEvent 是您可以设置的最早的事件，而 DetachedEvent 是您可以让它运行的最新事件。

# php - mysql_fetch_object() 的错误处理：提供的参数不是有效的 MySQL 结果

> ID：10440542
> 
> 赞同：0
> 
> 时间：2012-05-03T23:06:32.777
> 
> 标签：php, mysql, function

我的问题是如何消除错误，消息说

`mysql_fetch_object(): supplied argument is not a valid MySQL result.`

我需要抛出/捕获这个错误，但不知道该怎么做。

当此函数有结果要返回时，它可以正常工作。

只是当结果返回 null 时，它表示提供的参数不是有效的 mysql 结果。

那么我该如何消除这个错误，所以当它没有任何东西可以返回时，它不会显示`mysql_fetch_object(): supplied argument is not a valid MySQL result`，而是向用户展示我想要的东西。

```
$posts = show_allgroupsposts1($myusers,5);
if (count($posts)){
do a bunch of stuff.
}else{
nothing to display.
}
?> 
```

**目前，它返回：**

```
mysql_fetch_object(): supplied argument is not a valid MySQL result
nothing to display. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T23:10:17.123

您应该检查结果变量是否为假。

```
if($result)
    mysql_fetch_object();
else
    ...do nothing 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T23:17:15.530

如果结果无效，您可以确保它永远不会到达语句：

```
$result = mysql_query($sql) or die("Error");
$row = mysql_fetch_object($result); 
```

# c# - 如何使用 linq 将正确的字段分组并求和？

> ID：10440550
> 
> 赞同：2
> 
> 时间：2012-05-03T23:07:35.737
> 
> 标签：c#, linq, lambda

我在这个结构中有一个对象（债务人）列表

```
 public class DebtorDto 
    {
        public string OutstandingBalance { get; set; }
        public string Name { get; set; }
        public string Company { get; set; }
        public string InvoiceNumber { get; set; }
    } 
```

看起来像

```
OUTSTANDINGBALANCE  NAME    COMPANY  INVOICENUMBER
1500                Debtor1 comp1    1235      
1600                Debtor1 comp3    1236      
150                 Debtor2 comp1    1234      
1700                Debtor2 comp4    1237      
15000               Debtor1 comp1    1238      
150                 Debtor1 comp3    1239      
500                 Debtor4 comp1    1274      
1500                Debtor3 comp3    1634      
500                 Debtor3 comp1    1334 
```

我想做的是显示每个债务人所欠的总金额（Sum）

例如（请注意下面的总金额不准确，我只是编造的，但他们需要将上述金额合计）

```
Debtor1  31050
Debtor2  3050
Debtor3  1050
Debtor4  41050 
```

到目前为止我所拥有的是

```
var query = from e in _allDebtors.GroupBy(x => x.Company)
                .Select(y => y.Sum(z => decimal.Parse(z.OutstandingBalance)))))) 
```

这实际上给了我正确的金额，如下所示，但我也不知道如何在其中获得债务人的姓名？

```
31050
3050
1050
41050 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T23:11:08.897

您需要在以下位置更改您的返回值`Select`：

```
var query = _allDebtors.GroupBy(x => x.Company)
            .Select(y => new { Company=y.Key, Total=y.Sum(z => decimal.Parse(z.OutstandingBalance)) }); 
```

请注意，这是由*公司*提供的- 如果您希望由债务人提供，它将是：

```
var query = _allDebtors.GroupBy(x => x.Name)
            .Select(y => new { Name=y.Key, Total=y.Sum(z => decimal.Parse(z.OutstandingBalance)) }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T23:11:26.150

```
var query = from e in _allDebtors.GroupBy(x => x.Company)
                                 .Select(y => new {
                                              Name = y.Key,
                                              Sum = y.Sum(z => decimal.Parse(z.OutstandingBalance))
                                  }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T23:12:20.827

```
 var query = from e in _allDebtors.GroupBy(x => x.Company)
            .Select(y => new {Name = y.Key, TotalAmount = y
                                                 .Sum(z => 
                                                  decimal.Parse(z.OutstandingBalance))}); 
```

# javascript - 防止表单重置方法清除IE8中隐藏输入的最简单方法

> ID：10440551
> 
> 赞同：1
> 
> 时间：2012-05-03T23:07:46.297
> 
> 标签：javascript, html, internet-explorer

表单的 Javascript 重置方法[不应该影响隐藏输入](http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-49531485)，但在 IE8 和 IE7 中它无论如何都会影响。有谁知道使它正常运行的方法？

我知道我可以通过循环单个输入或在重置表单然后恢复它们之前记住值来做到这一点，但我想知道是否有人能想出一个更简单的方法。如果它能让您的解决方案更简单，请随意使用 jQuery。[你可以在http://jsfiddle.net/Ddtz4/](http://jsfiddle.net/Ddtz4/)看到一个例子。

根据[插件作者的](https://github.com/malsup/form/issues/199)说法，这应该不是 IE 错误，reset 方法对没有初始值的元素的影响是未定义的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T23:12:34.637

You could use a JavaScript function to capture the reset button push, save those values as cookies, then return true to complete the reset process. On reload, you can check for those cookies and plug those values back in.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T23:46:33.473

我正在考虑这样的事情，使用jQuery：

```
$(document).delegate("form", "resetForm", function() {
    $(this).find("input[type=hidden]").each(function() {
        $(this).prop("defaultValue", $(this).val());
    });
    this.reset();
}); 
```

每当我想重置表单时，我都可以这样做：

```
$("#whateverForm").trigger("resetForm"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T23:56:48.793

以下片段似乎也适用于 IE8

```
$("#testInput").val('foo');
$("#testForm")[0].reset();
$("#result").html($("#testInput").val()); 
```

更新：

你为什么不创建一个自定义的重置函数（）来代替：

```
$("#resetbutton").on("click", function() {
    var form = $(this).closest('form');
    form.find("input:not(:hidden)").val('');
    form.find("select").prop('selected', false);
    // so on

}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T02:42:46.230

一种简单的方法是`reset()`在重置时暂时从表单中删除隐藏元素

```
function fixReset() {
    var testForm =  document.getElementById("testForm");
    testForm._nativeReset = testForm.reset;
    testForm.reset = function(){
        var hidden = $('input[type=hidden]',this).detach();
        this._nativeReset();
        $(this).append(hidden);
    }
};
$(document).ready(fixReset); 
```

这样，如果您愿意，您仍然可以使用本机重置按钮。这种方法可以很容易地扩展到处理所有表格

# mysql - Rails：生产 Rails 控制台无法启动

> ID：10440553
> 
> 赞同：8
> 
> 时间：2012-05-03T23:08:01.527
> 
> 标签：mysql, ruby-on-rails, ruby

在我的 OS X 开发笔记本电脑上一切正常。

将应用程序部署到生产环境，它会按预期运行和显示数据。

但是，当我尝试在生产服务器上运行 Rails**控制台**时，我收到一个错误...

```
$ rails console -e production
/opt/deployed_rails_apps/con_app_rails_3/shared/bundle/ruby/1.9.1/gems/mysql2-0.3.11/lib/mysql2/client.rb:44:
    in `connect': Can't connect to local MySQL server through socket 
        '/tmp/mysql.sock' (2) (Mysql2::Error)

    from /opt/deployed_rails_apps/con_app_rails_3/shared/bundle/ruby/1.9.1/gems/mysql2-0.3.11/lib/mysql2/client.rb:44:in `initialize'
    from /opt/deployed_rails_apps/con_app_rails_3/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.2/lib/active_record/connection_adapters/mysql2_adapter.rb:16:in `new' 
```

我尝试`socket: /tmp/mysql.sock`从 database.yml 中删除——结果相同。

虽然应用程序运行，但我确实需要能够访问生产中的控制台以执行某些任务。

我能够使用 MySQL 命令行客户端连接到 MySQL 服务器。

* * *

红宝石 1.9.3p125

导轨 3.2.2

mysql2 宝石 0.3.11

MySQL服务器：5.1.61

生产主机：Linux 2.6.32-220.4.2.el6.x86_64

数据库.yml

```
development:
  adapter: mysql2
  encoding: utf8
  reconnect: false
  database: con_app_rails_3_development
  pool: 5
  username: root
  password:
  socket: /tmp/mysql.sock

test:
  adapter: mysql2
  encoding: utf8
  reconnect: false
  database: con_app_rails_3_test
  pool: 5
  username: root
  password:
  socket: /tmp/mysql.sock

production:
  adapter: mysql2
  encoding: utf8
  reconnect: false
  host: dbhost
  database: con_app_rails_3_production
  pool: 5
  username: xxxx
  password: xxxx
  socket: /tmp/mysql.sock 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-05-03T23:29:41.250

解决了。

我需要做的就是...

```
$ RAILS_ENV=production bundle exec rails console 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-04T07:30:39.227

另一种方法：

`./script/rails console production`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-09T03:42:55.830

我用运行解决了：

```
 RAILS_ENV=production bundle exec rails c 
```

有关[链接的更多详细信息](http://akbarbin.blogspot.com/2013/05/rails-console-on-staging-or-production.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-30T17:00:17.067

您也可以通过将`--environment=production`参数附加到`rails c`or`rails console`命令来解决此问题

```
rails c --environment=production 
```

就这样。

**我希望这有帮助**

# c# - AJAX IRCX 客户端和服务器

> ID：10440567
> 
> 赞同：4
> 
> 时间：2012-05-03T23:09:00.760
> 
> 标签：c#, jquery, asp.net, ajax, chat

我目前正在开发一个基于 IRCX AJAX 聊天的系统，并且有一些关于服务器和客户端实现的问题；欢迎任何建议：

## 服务器

这应该实现为 Web 服务还是 Windows 窗体应用程序？我有开发基于 Windows 窗体的服务器的经验，但是我想知道这是否会更好地实现为 Web 服务，如果可以，为什么？

## 客户

当今如何实现基于 Web 的客户端以及实现基于 Web 的客户端的首选方法是什么？

到目前为止我的解决方案是

*   带有 AJAX 更新面板的 ASP.NET Web 窗体（这似乎是最可行的）
*   使用 jQuery 连接到带有 JavaScript 超时的 Web 服务

## 轮询

应该多久轮询一次服务器以获取新消息？0.5 秒似乎有点过分，2 到 3 秒之间的任何时间都显得迟缓。

感谢您的输入。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T09:36:46.087

拥有一个连接池并在服务器和客户端之间维护一种代理，根据会话 ID 将数据发送到正确的客户端。这意味着您的聊天服务器可以免受数据包攻击，并且您不必处理攻击者可以劫持的 Web 套接字并按照他们的要求进行操作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-24T10:07:42.143

我知道这个问题很老，但现在有更好的方法。

SignalR 专为这样的事情而设计（实时网络功能）

> SignalR 可用于向您的 ASP.NET 应用程序添加任何类型的“实时”Web 功能。虽然聊天经常被用作示例，但您可以做更多的事情。任何时候用户刷新网页以查看新数据，或页面实现 Ajax 长轮询以检索新数据，都可以使用 SignalR。

这是基本聊天应用程序的教程[HERE](http://www.asp.net/signalr/overview/getting-started/tutorial-getting-started-with-signalr)。

如需更多信息，请访问[SignalR 网站](http://signalr.net/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T07:49:06.547

我相信使用 ASP.NET（套接字和更新面板）似乎是最好的方法。在这种情况下使用 jQuery 现在似乎有点无效，因为它不会与实时通信所需的聊天服务器保持持久状态。

我发现的另一种方法是使用 Web Sockets 和 Backbone.JS 来处理从服务器返回的数据。

[http://blog.fogcreek.com/the-trello-tech-stack/](http://blog.fogcreek.com/the-trello-tech-stack/)

# php - 在多维数组中将所有数组元素上移一级

> ID：10440568
> 
> 赞同：14
> 
> 时间：2012-05-03T23:09:06.423
> 
> 标签：php

我有一个可能看起来像的数组

```
$arr = array(
    array(
        'test1' => 'testing1'
    ),
    array(
        'test2' => array(
         1 =>'testing2
    )
); 
```

我想把它变成

```
$newArr = array(
    'test1' => 'testing1',
    'test2' => array(
         1 => 'testing2'
     )
); 
```

所以我一直在尝试将所有数组元素上移一级。

开斋节：

这是我将 2 个数组组合在一起的方法：

```
public function arrayMerge($arr1, $arr2)
            {
                foreach($arr2 as $key => $value) {

                    $condition = (array_key_exists($key, $arr1) && is_array($value));
                    $arr1[$key] = ($condition ? $this->arrayMerge($arr1[$key], $arr2[$key]) : $value);
                }

                return $arr1;
            } 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-03T23:12:51.713

这有点微不足道，有很多方法是可能的。

例如使用[数组联合运算符 ( `+`)](http://php.net/manual/language.operators.array.php)*创建数组内所有数组的联合的[^(*文档：*)](http://php.net/manual/language.operators.array.php)*

 *```
$newArr = array();
foreach ($arr as $subarray)
    $newArr += $subarray; 
```

或者通过[^(*Docs*)](http://php.net/call_user_func_array)一次将[`array_merge`^(*Docs*)](http://php.net/array_merge)与所有子数组一起使用：[`call_user_func_array`](http://php.net/call_user_func_array)

 *```
$newArray = call_user_func_array('array_merge', $arr); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-03T23:13:35.857

尝试

```
$arr = array(
        array('test1' => 'testing1' ), 
        array('test2' => array(1 =>'testing2')) 
);

$new = array();
foreach($arr as $value) {
    $new += $value;
}
var_dump($new); 
```

输出

```
array
  'test1' => string 'testing1' (length=8)
  'test2' => 
    array
      1 => string 'testing2' (length=8) 
```**

# java - 有没有办法将值传递给构造函数中的特定项？

> ID：10440573
> 
> 赞同：0
> 
> 时间：2012-05-03T23:09:27.283
> 
> 标签：java

如果这是一个非常基本的内容，我很抱歉，但我在我的书和搜索中找不到任何东西。我试图在创建对象时发送信息，但有很多选择，我只是真的要改变一个（不幸的是，它接近尾声）。

说我有这样的事情：

```
class_to_start_(int maxActive, 
    byte whenExhaustedAction, 
    long maxWait, 
    int maxIdle, 
    int minIdle, 
    boolean testOnBorrow, 
    boolean testOnReturn, 
    long timeBetweenEvictionRunsMillis, 
    int numTestsPerEvictionRun, 
    long minEvictableIdleTimeMillis, 
    boolean testWhileIdle, 
    long softMinEvictableIdleTimeMillis, 
    boolean lifo) 
```

它们都有默认值，所以我不需要更改它们中的任何一个，但我只想修改最后一个的默认值`lifo`。我可以在不向所有其他人发送值的情况下做到这一点吗？理想情况下是这样的`class_to_start_('lifo'=True)`（这不起作用，我试过了）。

这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T23:14:46.437

Java 没有默认参数值，所以简短的回答是否定的。

但是，您可以拥有重载的构造函数，以便您拥有一个只接受要更改的参数的构造函数：

```
/** Main constructor. */
public Foo(int maxActive, 
           byte whenExhaustedAction, 
           int minIdle, 
           boolean testOnBorrow, 
           boolean lifo) 

/** Convenience constructor. */
public Foo(boolean lifo)
{
  this(1, 0x01, 3, false, lifo);    // call the main constructor will default values
} 
```

您还可以考虑制作一个[流畅的界面](http://martinfowler.com/bliki/FluentInterface.html)构建器对象。那么你的想法是：

```
final Foo f = new FooBuilder().withLifo(false).build(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T23:22:37.040

还可以创建所需类的一个实例并将所有值设置为所需的默认值：

```
// in your main method
Foo myDefaults = new Foo(100, "name", false, true);
myDefaults.setLifo(false);
Foo someChangedInstance = myDefaults; 
```

...然后向您的类添加一个构造函数，该构造函数采用该类的实例并将所有值设置为等于参数实例的值：

```
// in your Foo class
public Foo(int maxWidth, String standardName, boolean logEverything, boolean lifo) {
    // ...
}

public Foo(Foo otherInstance) {
    this.maxWidth = otherInstance.maxWidth;
    this.standardName = otherInstance.standardName;
    this.logEverything = otherInstance.logEverything;
    this.lifo = otherInstance.lifo;
} 
```

这样，您可以只修改类实例的单个值，并只需进行一些修改即可创建新实例。

不要忘记在更改它们后可能会重置 myDefault 中的属性。

```
myDefault.setLifo(true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T23:25:40.163

您可以添加一个构造函数，该构造函数采用参数和值对的 Map，并对未指定的任何参数使用默认值。这样，您只需要指定要覆盖的参数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T23:36:52.157

当通常使用默认值并且有很多参数时，使用构造函数或工厂方法变得笨拙。最方便和优雅的方法是使用具有[流畅界面](http://en.wikipedia.org/wiki/Fluent_interface#Java)的设置器。

像这样：

公共类 MyClass {

```
// Define default values in initializers
private int maxActive = 5;
private byte whenExhaustedAction = 'x';
private long maxWait = 999;
private int maxIdle = 3;
private int minIdle = 1;
private boolean testOnBorrow = true;
private boolean testOnReturn = false;
private long timeBetweenEvictionRunsMillis = 5000;
private  int numTestsPerEvictionRun = 10;
private  long minEvictableIdleTimeMillis = 2000;
private boolean testWhileIdle = false;
private long softMinEvictableIdleTimeMillis = 0;
private  boolean lifo = true; 

// Only getter/setters for first two fields shown - others similar

public int getMaxActive() {
    return maxActive;
}

// Return "this" to create a fluent interface
public MyClass setMaxActive(int maxActive) {
    this.maxActive = maxActive;
    return this;
}

public int getMaxIdle() {
    return maxIdle;
}

public MyClass setMaxIdle(int maxIdle) {
    this.maxIdle = maxIdle;
    return this;
}

// Other getters/setters to follow 
```

}

像这样使用它，只调用需要默认值以外的值的字段的设置器：

```
MyClass x = new MyClass().setMaxActive(5).setMaxIdle(100); 
```

# android - 上传期间的 Android Facebook SDK 进度条

> ID：10440575
> 
> 赞同：2
> 
> 时间：2012-05-03T23:09:36.780
> 
> 标签：android, facebook, upload, progress-bar

我正在试用 FB SDK，我想知道是否可以在上传数据时附加进度条。

这是一个关于 FB 如何告诉我们做的示例。

```
ByteArrayOutputStream bos = new ByteArrayOutputStream();
me.compress(Bitmap.CompressFormat.JPEG, 100, bos);
params.putByteArray("picture", bos.toByteArray());
mAsyncRunner.request("me/photos", params, "POST", new SampleUploadListener(), null); 
```

问题是您被迫使用字节数组而不是可以与进度条结合使用的输出流

我可以想象的一种替代方法是从 FB SDK 修改 Utils.java 但我想问是否有人成功实现了进度条而无需在 facebook sdk 中大量使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T12:44:28.300

我找到了一个解决方案，但它涉及触摸 facebook sdk。

这是 Util.java 中修改后的[代码](https://github.com/Vad1mo/facebook-android-sdk/commit/bce48abf8a8fc207635041172ca0098ae2a4fd51)。

# javascript - 颜色框的水平滚动问题

> ID：10440581
> 
> 赞同：1
> 
> 时间：2012-05-03T23:10:27.603
> 
> 标签：javascript, jquery, css

我正在为模式弹出窗口使用颜色框，现在有一个链接，当用户单击该链接时，会显示一个模式。对于模态的内容，我指向一个 URL。

```
<div class="content">

<a class="Modal" href="http://yahoo.com" onclick="openModal();">Click Here   </a>

</div> 
```

问题是因为它是一个 url，模式中有水平和垂直滚动条我只想要垂直滚动条我厌倦了类似的东西

```
<style type="test/css">#cboxLoadedContent{overflow-x:hidden !important;} </style> 
```

但不起作用。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T05:15:26.670

```
#cboxLoadedContent{overflow-x:hidden !important;} 
```

看起来它应该工作。您确定滚动条在 #cboxLoadedContent 而不是某个子元素上吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T00:18:22.377

我怀疑颜色框从您的一般站点样式表中继承了一些额外的填充。在没有看到实时链接的情况下，我只能建议在萤火虫中从一个元素到另一个元素寻找一些从您的一般样式表继承的填充、边距、边框或宽度 - 可能在 img 元素上。

如果您使用任何通用的 !important 声明，它们通常可以覆盖灯箱提供的特定样式。

# c++ - 来自 PHP 的 print_r() 的 C++ 等价物？

> ID：10440587
> 
> 赞同：2
> 
> 时间：2012-05-03T23:11:03.423
> 
> 标签：c++, visual-c++

> **可能重复：**
> [C++ 中的转储工具，如 PHP 中的 var_dump()？](https://stackoverflow.com/questions/828989/dump-facility-in-c-like-var-dump-in-php)

我不确定 C++ 是否允许这种事情，但我想知道，是否有可能编写一个可以将任何类型数组（std::vector）输出为纯文本的通用函数，只要我自己写每种类型的输出函数，例如 std::string、float、int 等。

那么，我怎样才能遍历结构类型并通过我制作的不同输出函数将它们一一输出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T13:41:39.310

你应该看看 cxx-prettyprint。[http://louisdx.github.com/cxx-prettyprint/](http://louisdx.github.com/cxx-prettyprint/)

我认为它可以满足您的所有要求。

# java - 在 Matlab 中使用协议缓冲区 Java 绑定

> ID：10440590
> 
> 赞同：1
> 
> 时间：2012-05-03T23:11:14.207
> 
> 标签：java, matlab, protocol-buffers

我正在尝试在 Matlab 中使用 Java protobuf 存根。我在 Eclipse 中生成了 Java 存根和相应的 jar 文件。然后我将 jar 文件添加到 Matlab 路径中。在 Matlab 中，我执行以下操作：

```
import raven.aos.*; 
import raven.aos.Messages.*;
image = Image.newBuilder(); 
```

此时我收到一条错误消息，内容为：

```
??? Undefined variable "Image" or class "Image.newBuilder".
Error in ==> pub>pub.pub at 16
image = Image.newBuilder(); 
```

我已经成功地能够使用完全相同的语法在 Java 项目中使用 Java jar。所以这验证了我的存根是正确的。我还在我的 Matlab 项目中成功导入并使用了不同的 Java 库 zmq.jar，因此在一定程度上验证了我知道如何将 jar 文件正确导入 Matlab。

我没有附加生成的 Java 存根文件，因为它很长。我希望有人可以仅使用我提供的代码指出我做错了什么。如果需要，我将添加存根源。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T06:05:49.420

因为生成的协议缓冲区消息类是内部类，所以需要使用 Matlab 的 javaMethod 命令来获取静态方法。导入语句将不起作用。使用您的示例：

```
image = javaMethod('newBuilder','raven.aos.Messages$Image'); 
```

[http://www.mathworks.com/help/techdoc/ref/javamethod.html](http://www.mathworks.com/help/techdoc/ref/javamethod.html)

# java - 使用jdbc odbc，java用户登录系统连接java到ms access数据库

> ID：10440599
> 
> 赞同：0
> 
> 时间：2012-05-03T23:12:07.900
> 
> 标签：java, ms-access

我在将 java 连接到 mc 访问以检查用户身份验证时遇到问题，当我运行此程序时，它没有给我任何错误消息（我认为连接没有问题）但它也不会检查帐号是否和密码是否有效。其他方法，如提款、存款和 getBalance 工作正常。
任何帮助或提示将不胜感激。

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

class Logic
{
  private enum  State { ACCOUNT_NO, PASSWORD, PROCESSING };
  private State state = State.ACCOUNT_NO;
  private long  number;
  private long  acNumber = 0;
  private long  acPIN = 0;
  private char  op = ' ';
  private Bank  bank = new Bank();

  private JTextArea display1, display2;

  public Logic( JTextArea area1, JTextArea area2 )
  {
    display1 = area1; display2 = area2;
    display2.setText( "Welcome: Enter your account number" );
  }

  public void process( String button )
  {
    String info = null;

    if ( button.length() == 1 )
    {
      char c = button.charAt(0);
      if ( c >= '0' && c <= '9' )               // Digit
      {
        number = number * 10 + c-'0';           // Build number
        display1.setText( "" + number );
      }
      return;
    }

    if ( button.equals( "CLR" ) )
    {
      number = 0;
      display1.setText( "" + number );
    }

    if ( button.equals( "Ent" ) )
    {
      switch ( state )
      {
        case ACCOUNT_NO:
          bank.setAcNumber( number );
          number = 0;
          state = State.PASSWORD;
          display1.setText( "" );
          display2.setText( "Now enter your password" );
          break;
        case PASSWORD:
          bank.setAcPasswd( number );
          number = 0;
          display1.setText( "" );
          if ( bank.checkValid() )
          {
            state = State.PROCESSING;
            display2.setText( "Now enter transaction" );
          } else {
            state = State.ACCOUNT_NO;
            display2.setText( "Invalid: Start again" );
          }
          break;
        default :
      }
      return;
    }

    if ( state != State.PROCESSING ) 
    {
      state = State.ACCOUNT_NO;
      display2.setText( "But you are not loged in\n"  );
      display2.append( "Welcome: Enter your account number" );
      return;
    }

    if ( button.equals( "W/D" ) )               // Clear Result
    {
      display1.setText( "" );
      if ( bank.withdraw( number ) )
      {
        display2.setText( "Withdrawn: " + number );
      } else {
        display2.setText( "You do not have surficient funds" );
      }
      number = 0;
      return;
    }

    if ( button.equals( "Bal" ) )               // Clear Result
    {
      number = 0;
      display2.setText( "Your balance is: " + bank.getBalance() );
      return;
    }

    if ( button.equals( "Dep" ) )               // Clear Result
    {
      bank.deposit( number );
      display1.setText( "" );
      display2.setText( "Deposited: " + number );
      number = 0;
      return;
    }

    if ( button.equals( "Fin" ) )               // Clear Result
    {
      state = State.ACCOUNT_NO;
      number = 0;
      display2.setText( "Welcome: Enter your account number" );
      return;
    }

    return;
  }

  public long getResult()
  {
    return number;
  }

  public long getNumber()
  {
    return number;
  }
} 
```

银行类。

```
import java.sql.*;

class Bank
{
  long AcNumber = 0;
  long AcPasswd = 0;
  long balance = 0;
  long deposit = 0;
  long withdraw = 0;
  long amount = 0;
  Connection con;
  Statement st;
  ResultSet rs;

  public void connect()
  {
     try
     {
     String driver = "sun.jdbc.odbc.JdbcOdbcDriver";
     Class.forName(driver);
     String db = "jdbc:odbc:db3";
     con = DriverManager.getConnection(db);
     st = con.createStatement();
     }

     catch (Exception ex)
     {
         System.err.println("Can not load JDBC/ODBC driver.");
         System.exit( -1 ); 
     }

  }

  public void setAcNumber( long accNumber ) 
    {
         AcNumber = accNumber;
    }

  public void setAcPasswd( long accNumber ) 
    { 
         AcPasswd = accNumber;
    }

  public boolean checkValid() 
    {    
       try {
           String sql = "select user,pass from Table1 where user='"+AcNumber+"'and pass='"+AcPasswd+"'";
           rs = st.executeQuery(sql);

           int count = 0;
           while(rs.next())
            {
                count = count + 1;
            }
           if(count == 1)
           {
               System.out.println("User Found, Now enter transaction");

           }
           else
           {
               System.out.println("user not found");

           } 

        }

          catch (Exception ex)
           {

           }

       return true;

    }

  public boolean withdraw( long amount ) 
     {        
      balance =  balance - amount;    
      System.out.println( "Bank: Withdrawm " + amount ); 
      return true;   
     }

  public void deposit( long amount ) 
     {    
      balance =  balance + amount;            
      System.out.println( "Bank: deposit " + amount ); 
      return; 
     }

  public long getBalance() { 

      System.out.println( "Bank: Balance: "+ balance );
      return balance;
  }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T23:17:07.137

您可能没有错误消息，因为当您在 `checkValid`. 添加`ex.printStackTrace()`到您的 catch 块中以获取有关正在发生的事情的更多信息。

# iphone - iPhone游戏的数据包大小限制？

> ID：10440600
> 
> 赞同：6
> 
> 时间：2012-05-03T23:12:12.423
> 
> 标签：iphone, objective-c, game-center, multiplayer

我正在使用以下链接[http://www.raywenderlich.com/3276/how-to-make-a-simple-multiplayer-game-with-game-中的多人教程作为骨架创建多人 iPhone 游戏中心教程第 12 部分](http://www.raywenderlich.com/3276/how-to-make-a-simple-multiplayer-game-with-game-center-tutorial-part-12)。

对于我正在使用的架构（GameCentre 点对点），其中一个设备扮演着服务器的角色。我有一个问题，数据包大小的限制是什么？平均而言，我每次需要发送 890 个字节...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T23:44:39.990

通常，您不应依赖网络数据包的大小。数据包可以分段（通过 TCP/IP 并由堆栈重新组装）或数据根据发送/接收参数的 MTU 打包。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T22:16:34.327

根据[游戏工具包编程指南](http://developer.apple.com/library/ios/#DOCUMENTATION/NetworkingInternet/Conceptual/GameKit_Guide/MatchesandVoice/MatchesandVoice.html#//apple_ref/doc/uid/TP40008304-CH10-SW4)：

*   将不可靠消息的大小限制为 1000 字节或更小。
*   将可靠消息的大小限制为 87 KB 或更小。

# browser - 为基于 Web 的 GUI 创建性能工具

> ID：10440601
> 
> 赞同：0
> 
> 时间：2012-05-03T23:12:13.220
> 
> 标签：browser, automation, ui-testing, website-metrics

我想创建一个自动性能指标收集工具，以获取基于 Flash 的 Web 应用程序的页面加载时间的各种指标。我正在使用批处理脚本进行 Web 自动化，然后我想使用 browsermob-proxy (http://opensource.webmetrics.com/browsermob-proxy/) 收集各种指标，它将指标导出到 HAR 文件中。我以前从未这样做过，所以我想知道这种方法是否可行？使用 browswermob-proxy for windows (firefox) 的步骤是什么。文档中没有关于 windows 的信息，只有 linux。我知道我从 /bin 目录运行代理，那么我需要做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T11:35:41.067

我从这里下载了 browsermob zip 的副本..http://opensource.webmetrics.com/browsermob-proxy/ 解压缩并参考 readme.md browsemob zip 中的自述文件，指定启动代理服务器的说明. 服务器启动后，您需要在 Firefox 代理设置中指定服务器端口和机器 IP（从选项->高级->网络>设置。然后在此浏览器上触发您的 url。

# jquery - jQuery - 如何防止合并类上的点击事件也被解释为单个类上的点击事件？

> ID：10440602
> 
> 赞同：0
> 
> 时间：2012-05-03T23:12:13.233
> 
> 标签：jquery, jquery-selectors

我听 2 次点击事件。选中复选框时触发第一个：

```
 $('#example').on('click', '.option', function(){
        // Some logic
    }); 
```

第二个在未选中时触发：

```
 $('#example').on('click', '.checked.option', function(){
        // Some other logic
    }); 
```

至于 HTML 输入元素，我尝试以各种方式对其应用类：

```
class="checked option"
class="checked.option"
class="option checked"
class="option.checked" 
```

但在任何一种情况下，当未选中复选框时 - 两个事件都会被触发，而不仅仅是第二个。

问题：有没有办法防止这种情况？或者有没有更方便的方法来检测复选框上的点击事件并且它未被选中？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T23:15:01.267

几种方法：

```
$('#example').on('click', '.option', function(){
    if ($(this).is(':checked')) ...
}); 
```

查看`checked`选择器[http://api.jquery.com/checked-selector/](http://api.jquery.com/checked-selector/)

或者：

```
$('#example').on('click', '.option:not(.checked)', function(){
    ...
}); 
```

查看`not`选择器[http://api.jquery.com/not-selector/](http://api.jquery.com/not-selector/)

甚至：

```
$('#example').on('click', '.option:not(:checked)', function(){
    ...
});

$('#example').on('click', '.option:checked', function(){
    ...
}); 
```

哦，顺便说一句，类应该像这样应用：`class="option checked"`，你不应该`.`在类属性中放一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T23:34:32.647

> 问题：有没有办法防止这种情况？或者有没有更方便的方法来检测复选框上的点击事件并且它未被选中？

是的，下面的代码应该阻止它，我会使用 jQuery 选择器（方便 imo）来检测它。希望这可以帮助！谢谢。

```
$('input:checkbox').click(function () {
    if ($(this).is(":checked")) {
        alert('was un-checked');               
    } else {
        alert('was checked');
    }
}); 
```

**​​看这里的代码工作：**

[http://jsfiddle.net/SCSZ6/](http://jsfiddle.net/SCSZ6/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T23:16:01.897

您应该真正使用`change`事件而不是 a`click`然后检查按钮状态。

```
 $('#example').on('change', '.option', function() {
     if( this.checked ) {
     }
     else {
     }
 }); 
```

# sql-server - how to increment a sequence number while triggering data from one table to another

> ID：10440609
> 
> 赞同：0
> 
> 时间：2012-05-03T23:13:06.220
> 
> 标签：sql-server, sql-server-2005, triggers

I want to write a trigger to transfer some columns of all inserted rows in a table to another table while incrementing the maximum number in a sequence number field in the destination table. this field is not auto increment but is a primary key field.

What I used to do was find the max sequence no in destination table, increment and then insert the new value. This worked fine if data is inserted row at a time. But when many rows are inserted from a single query, how can I increment the sequence number? Sample problem follows:

```
insert into [mssql].mssql.dbo.destination_table (name,seq_no)
select name,?
from inserted 
```

even few thousand rows can be inserted at once.

seq_no is part of a composite primary key. So for example if data is inserted under different name seq_no will be different. (This requirement should be considered when I can increment the seq_no without considering its part in the primary key)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T01:39:04.247

好的，我有你的问题，试试这个

```
insert into [mssql].mssql.dbo.destination_table (name,seq_no)
select name, x.MaxSeq + row_number() over (order by name)
   from inserted, (select Max(seq_no) As MaxSeq From source_table) x 
```

# asp.net-mvc - jquery post不允许在MVC应用程序中下载csv文件

> ID：10440611
> 
> 赞同：2
> 
> 时间：2012-05-03T23:13:08.623
> 
> 标签：asp.net-mvc

我有一个带有 Jquery Post 的 MVC 应用程序

```
$.post(virtualPath + cookie + this.pageName + '/FunctionA/', parameters,function (filedata) {
    alert(filedata);
    },'application/csv'); 
} 
```

这篇文章是从 Javascript 事件中调用的，该事件由单击按钮触发以下载文件

我在警报中获得服务器端 Http 文件响应，但无法在浏览器中下载它

控制器将响应返回为 FileContentResult

```
[AcceptVerbs(HttpVerbs.Post)]
    public FileContentResult FunctionA(string A, DateTime B)
    {
        try
        {
            string csv = "Make it downloadable ";
            var filresult = File(new System.Text.UTF8Encoding().GetBytes(csv), "application/csv", "downloaddocuments.csv");
           // return filresult;

            Response.Clear();
            Response.Buffer = true;
            Response.ContentType = "application/vnd.ms-excel";
            Response.AddHeader("content-disposition", "attachment; filename=Statement_" + "Downloadfile" + ".csv");
            Response.Write(csv);
            Response.Flush();
            return filresult;
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T05:53:07.987

您不能使用 AJAX 下载文件。这是因为一旦下载成功并调用了成功回调，您既不能将文件自动保存到客户端浏览器，也不能提示“另存为”对话框。

因此，无需使用 javascript 和 AJAX 来下载此文件，只需使用指向控制器操作的标准链接，这将允许用户直接下载文件。

* * *

更新：

根据评论部分的要求，这是一个使用锚点的示例：

```
@Html.ActionLink(
    "download file", 
    "actionName",
    "controllerName",
    new {
        param1 = "value1",
        param2 = "value2",
    },
    null
) 
```

或者，如果您需要传递大量参数，您可能更喜欢使用带有隐藏字段的表单，该表单将 POST：

```
@using (Html.BeginForm("actionName", "controllerName"))
{
    @Html.Hidden("param1", "value1")
    @Html.Hidden("param2", "value2")
    <button type="submit">Download file</button>
} 
```

# .net - 强制 Crystal Reports 在 x86 版本中运行？

> ID：10440615
> 
> 赞同：1
> 
> 时间：2012-05-03T23:13:23.983
> 
> 标签：.net, crystal-reports, x86, 64-bit

情况如下：

我目前正在开发一个使用 Crystal Reports 以及其他一些 32 位库（用于处理签名板之类的东西）的大型 .Net 应用程序。我们目前使用的是旧版本的 Crystal Reports（在 Visual Studio 2005 中。我知道，它很旧。他们最终会升级）。我们目前为 32 位机器和 64 位机器分别构建。32 位机器的构建目标是 AnyCPU 平台，而 64 位机器的构建目标是 x86 平台。这样做是为了当应用程序在 64 位机器上运行时，应用程序将作为 32 位应用程序运行，并且仍然能够加载其他 32 位库。

我已经厌倦了不得不维护两个单独的构建（构建过程有点混乱）。我的想法是，我只想做一个针对 x86 平台的构建，因为那样一切仍然可以继续工作，但它可以省去为 32 位和 64 位机器维护单独构建的麻烦。

我的问题是：是否可以在 64 位机器上强制安装 Crystal Reports 的 32 位？为 x86 平台构建的应用程序能否继续在 64 位计算机上针对 32 位版本的 Crystal Reports 工作？

我想要做的事情是可能的，还是我错过了其他东西？我觉得我错过了——好像以前的开发人员出于某种明显的原因没有这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T23:31:39.033

如果您的“64 位”构建设置为 x86（32 位）并且您的“32 位”构建仅在 x86（32 位）中运行，因为没有 64 位，则构建基本相同并且没有需要两个构建。我将 Crystal Reports 应用程序构建为 x86，并预安装了 32 位 Crystal msi。它在 64 位和 32 位机器上都像冠军一样工作。

# java - How to load generated java documentation in swing program

> ID：10440619
> 
> 赞同：0
> 
> 时间：2012-05-03T23:14:11.990
> 
> 标签：java, swing, javadoc, windowbuilder

I have a program with a GUI developed in swing. There's a menu item that I want to load my API documentation that I created with javadoc. Anyone possibly know how to accomplish this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T23:21:25.857

这似乎是[注释](http://en.wikipedia.org/wiki/Java_annotation "注解")的工作。

# sql - 选择在由大范围限制的一组小范围内发生的所有时间（小时/分钟） - SQL 2000

> ID：10440626
> 
> 赞同：3
> 
> 时间：2012-05-03T23:14:47.663
> 
> 标签：sql, datetime, sql-server-2000

我有一个包含索引数据的表，每一行都有一个开始和结束时间。查询此表并获取时间跨度在总体时间段内（通常是从 00:00:00 到 23:59:59 的某一天）内的索引行列表很简单。

```
declare @date datetime, @start datetime, @end datetime

set @date = GetDate() //in production code this is a n input to a stored proc

//the date component of the current date/time, starting at midnight
set @start = DateAdd(dd, DateDiff(dd, 0, @date), 0) 

//one second before midnight the next day
set @end = DateAdd(dd, 1, DateAdd(ss, -1, @start)) 

select idx, start_time, end_time
from index_data
where start_time <= @end
and end_time >= @start
order by start_time 
```

结果将是这样的：

```
idx         start_time                  end_time
---------------------------------------------------------------
495640      2012-05-03 00:17:13.000     2012-05-03 00:17:45.000
495641      2012-05-03 00:18:20.000     2012-05-03 00:18:51.000
495642      2012-05-03 00:18:55.000     2012-05-03 00:19:31.000
495643      2012-05-03 00:34:08.000     2012-05-03 00:34:28.000
495644      2012-05-03 00:36:21.000     2012-05-03 00:36:41.000
495646      2012-05-03 01:22:21.000     2012-05-03 01:22:38.000
495647      2012-05-03 01:24:38.000     2012-05-03 01:24:55.000
495648      2012-05-03 01:30:11.000     2012-05-03 01:30:29.000
495649      2012-05-03 01:31:23.000     2012-05-03 01:31:39.000
495650      2012-05-03 02:09:57.000     2012-05-03 02:10:59.000
495651      2012-05-03 02:11:00.000     2012-05-03 02:11:00.000
495652      2012-05-03 02:14:25.000     2012-05-03 02:14:42.000
495653      2012-05-03 02:31:09.000     2012-05-03 02:31:25.000
495655      2012-05-03 03:02:32.000     2012-05-03 03:02:51.000
... 
```

我需要的是一个**有效**的查询（没有游标或其他循环），它将生成一个结果集，为给定日期的每一小时和每一分钟提供一行，对于该行，该分钟的至少一秒属于至少一个索引的时间范围：

```
hour   min
----------
0      17
0      18
0      19
0      34
0      36
1      22
1      24
1      30
1      31
2      9
2      10
2      11
2      14
2      31
3      02
... 
```

每个索引的 start_time 和 end_time 通常相隔不到 60 秒（因此每分钟产生几行，因此希望合并以节省网络带宽），但我不能保证；某些行可能跨越更长的时间段，例如 start_time 为 02:20:34，end_time 为 02:23:43。给定这样的跨度，结果集必须包括 2:20、2:21、2:22 和 2:23，您不会通过对 start_time 的查询与 end_time 的查询进行 UNION 来获得。

关键是：**查询必须与 MSDE 引擎兼容，它基本上是 MSS 2000。所以，没有 CTE**（或者我已经这样做了）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T23:36:27.567

如果***效率***是指最小的 CPU 时间、读取次数等，那么您需要一个查找表。

创建一个包含一天中所有 1440 分钟作为 DATETIME 的表。

```
DECLARE
  @date  DATETIME,
  @start DATETIME,
  @end   DATETIME
SELECT
  @date  = GetDate(),
  @start = DateAdd(dd, DateDiff(dd, 0, @date), 0),
  @end   = DateAdd(dd, 1, @start)

SELECT
  minute_lookup.timestamp,
  COUNT(*)                    AS total_records
FROM
  index_data
INNER JOIN
  minute_lookup
    ON  minute_lookup.timestamp >= index_data.start_time - @date
    AND minute_lookup.timestamp <  index_data.end_time   - @date
WHERE
      index_data.start_time < @end
  AND index_data.end_time   > @start
GROUP BY
  minute_lookup.timestamp
ORDER BY
  minute_lookup.timestamp 
```

实际上，您正在缓存一些计算。没有试图填补数据点之间的空白。

**关于日期时间边界的旁白**

另外，请注意我使用不同的*开始*和*结束*值。

如果我想涵盖一整天，我不会`2012-01-01 00:00:00`说`2012-01-01 23:59:59`。如果表格在半秒后包含一个值怎么办？

DateTimes 并不是真正的*离散*值，它们是连续的。因此，我使用 FROM `2012-01-01 00:00:00`upto，但不包括，`2012-01-02 00:00:00`

*   `x >= '2012-01-01' AND x < '2012-01-02'`

通过这种方式，无论 x 存储为什么级别的准确度，如果它代表 2012 年 1 月 1 日的任何内容，我都会捕获它。

# java - 使用 onListItemClick 在 ListActivity 中打开一个菜单

> ID：10440630
> 
> 赞同：0
> 
> 时间：2012-05-03T23:15:12.940
> 
> 标签：java, android, listactivity

一旦用户长按我的 ListActivity 中的一个条目，我就会尝试显示一个菜单，但我无法弄清楚。Unfourtenatly 列表一直是我难以破解的难题，我仍在学习。

包android.GUI；

```
public class Shifts extends ListActivity implements OnClickListener,
    SimpleGestureListener {

private Typeface tf = Entry.tf, tf2 = Entry.tf2;
public static int count = 1;
int dbHourTime = 0;
private SimpleGestureFilter detector;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    this.requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.shifts);
    detector = new SimpleGestureFilter(this, this);

    DBAdapter DB = new DBAdapter(this);
    DB.open();
    Cursor cursor = DB.getAllShifts();
    startManagingCursor(cursor);
    cursor.moveToLast();
    count = cursor.getPosition();
    int g = count;

    cursor.moveToNext();

    String[] columns = new String[] { DB.KEY_DATE, DB.KEY_HOURS,
            DB.KEY_DAY, DB.KEY_ROWID, DB.KEY_START, DB.KEY_END };
    int[] to = new int[] { R.id.dateDisp, R.id.shiftDisp, R.id.day,
            R.id.rawId, R.id.start, R.id.finish };

    ListView ls = getListView();

    TextView SF = (TextView) findViewById(R.id.total);
    SF.setTypeface(tf);

    TextView sum = (TextView)findViewById(R.id.sum);
    sum.setTypeface(tf);

    SimpleCursorAdapter mAdapter = new SimpleCursorAdapter(this,
            R.layout.list_entry, cursor, columns, to);
    this.setListAdapter(mAdapter);

}

 @Override
 protected void onListItemClick(ListView ls, View v, int position, long id) {
  // TODO Auto-generated method stub
  super.onListItemClick(ls, v, position, id);

    CharSequence text = "Clicked";

    final int duration = Toast.LENGTH_SHORT;

    Toast toast = Toast.makeText(this, text, duration);
    toast.setGravity(Gravity.CENTER_VERTICAL | Gravity.CENTER, 0, 0);

    toast.show();
 }

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.view_shifts_menu, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    // Handle item selection
    switch (item.getItemId()) {
    case R.id.back:

        finish();
        return true;
    case R.id.clear:
        DBAdapter DB = new DBAdapter(this);
        DB.open();
        DB.deleteAll();
        startActivity(getIntent());
        finish();

        return true;
    default:
        return super.onOptionsItemSelected(item);
    }
}

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub

}

@Override
public void onSwipe(int direction) {

    Intent intent = new Intent();

    switch (direction) {

    case SimpleGestureFilter.SWIPE_RIGHT:

        intent.setClass(this, Main.class);
        startActivity(intent);
        break;
    case SimpleGestureFilter.SWIPE_LEFT:

        intent.setClass(this, Entry.class);
        startActivity(intent);
        break;
    case SimpleGestureFilter.SWIPE_DOWN:

        break;
    case SimpleGestureFilter.SWIPE_UP:

        break;
    }

}

@Override
public boolean dispatchTouchEvent(MotionEvent me) {
    this.detector.onTouchEvent(me);
    return super.dispatchTouchEvent(me);
}

@Override
public void onDoubleTap() {
    // TODO Auto-generated method stub

}

@Override
public void onListItemClick(ListActivity l, View v, int position, long id) {
    // TODO Auto-generated method stub

} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T23:18:31.817

这需要在您的 onCreate() 之外：

```
 @Override    // the error is with this method decleration
 protected void onListItemClick(ListView l, View v, int position, long id) { 

  super.onListItemClick(ls, v, position, id);

 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T23:19:06.573

您正在 onCreate 方法中创建 onListItemClick 方法。将其移到 onCreate 方法之外:)

# ruby-on-rails - Ruby/Rails: alias_method practices

> ID：10440631
> 
> 赞同：4
> 
> 时间：2012-05-03T23:15:15.917
> 
> 标签：ruby-on-rails, ruby, rubygems, alias-method

I'm trying to override Rails' "fields_for" method, which I'm currently doing as follows:

```
module ActionView::Helpers::FormHelper
  include ActionView::Helpers::FormTagHelper

  alias_method :original_fields_for, :fields_for

  def fields_for(<my arguments>)
    # Some extra stuff
    # ...
    output.safe_concat original_fields_for(<my other arguments>)
  end

end 
```

The functionality works just fine, but I'm starting to suspect that my use of alias_method isn't the most elegant. Most especially, if I were to package this functionality into a gem, and there were another gem that overrode fields_for, am I write in thinking either my new fields_for OR the alternate fields_for would be skipped?

Assuming so, what's the correct way to go about slapping in some extra functionality to an existing rails method?

Cheers...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T21:14:52.737

这似乎正是应有的情况`alias_method_chain`（尽管我不知道它是否可以在模块上工作 - 只在 AR::Base 上使用过）

你只要做

```
module ActionView::Helpers::FormHelper
    include ActionView::Helpers::FormTagHelper

    alias_method_chain :fields_for, :honeypot

    def fields_for_with_honeypot(<my arguments>)
        # Some extra stuff
        # ...
        output.safe_concat fields_for_without_honeypot(<my other arguments>)
    end
end 
```

这样做的有趣想法`fields_for`，但它应该工作。

您应该注意围绕 a_m_c 的一个小争议 - 这篇文章很好地总结了它[http://erniemiller.org/2011/02/03/when-to-use-alias_method_chain/](http://erniemiller.org/2011/02/03/when-to-use-alias_method_chain/)

在这种情况下，我认为您不能使用`super`，因为您想在不修改调用代码/视图的情况下对 form_for 进行猴子补丁。

# c++ - Huge vector "hangs" program? (50000 x 50000 cells)

> ID：10440633
> 
> 赞同：1
> 
> 时间：2012-05-03T23:15:26.373
> 
> 标签：c++, vector, multidimensional-array, size

I want to have an array, grid[50000][50000], i tried to do with vector but when i run the code, it stops. No error. Just waits.Any suggestions?

```
#include <iostream>
#include <vector>

using namespace std;

typedef std::vector<int> IntVec;
typedef std::vector<IntVec> IntGrid;
IntGrid grid(50000, IntVec(50000));

int main(){
  grid[0][0]=3;
  cout<<grid[0][0]<<endl;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T23:23:25.920

作为一个非常粗略的计算，

50,000 行 × 50,000 列 × 4 字节/整数 = `10,000,000,000 bytes`.

除非您的计算机具有超过 10 GB 的 RAM，否则您的内存已用完。

你可以重写你的程序来处理更小的数据块，或者使用一个文件来存储不需要立即访问的数组部分吗？

# spring-mvc - forEach is not working with Spring3 + Tiles 2+ Jstl 1.2 + Weblogic 9.2

> ID：10440634
> 
> 赞同：1
> 
> 时间：2012-05-03T23:15:35.500
> 
> 标签：spring-mvc, jstl, tiles, weblogic9.x

whenever I use a c:foreach tag in my jspx files I'm getting below error

```
Caused by: java.lang.NoSuchMethodError: javax.servlet.jsp.PageContext.getELContext()Ljavax/el/ELContext;
    at javax.servlet.jsp.jstl.core.LoopTagSupport.unExposeVariables(LoopTagSupport.java:587)
    at javax.servlet.jsp.jstl.core.LoopTagSupport.doFinally(LoopTagSupport.java:323)
    at jsp_servlet._web_45_inf._views.__matchdriverpopup_jspx._jspService(__matchdriverpopup_jspx.java:1160)
    at weblogic.servlet.jsp.JspBase.service(JspBase.java:34)
    at weblogic.servlet.internal.StubSecurityHelper$ServletServiceAction.run(StubSecurityHelper.java:225)
    at weblogic.servlet.internal.StubSecurityHelper.invokeServlet(StubSecurityHelper.java:127)
    at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:283)
    at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:175)
    at weblogic.servlet.internal.RequestDispatcherImpl.invokeServlet(RequestDispatcherImpl.java:496)
    at weblogic.servlet.internal.RequestDispatcherImpl.forward(RequestDispatcherImpl.java:245)
    at org.apache.tiles.servlet.context.ServletTilesRequestContext.forward(ServletTilesRequestContext.java:241) 
```

How can I solve this? This is only related to c:forEach. All other tags are working fine. I have follwing jar files in APP-INF/lib folder of EAR and tiles-jsp-2.2.0.jar and jstl-1.2.jar in my WEB-INF/lib of WAR file. web.xml version - 2.4

tiles-api-2.2.0 tiles-core-2.2.0 tiles-jsp-2.2.0 tiles-servlet-2.2.0 tiles-template-2.2.0

Please help, Thanks in advance

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T23:29:44.177

此异常表明 JSTL API 的版本比 JSTL impl 更新。事实上，Weblogic 已经捆绑了 JSTL。它显然比您的 webapp 中的版本旧。较新的 JSTL API 是从您的 webapp 加载的，但较旧的 JSTL impl 是从 Weblogic 加载的。

从您的 webapp 中删除 JSTL 库，以便 webapp 将只使用 Weblogic 自己的库。

# asp.net-mvc - Display partialview based on a url

> ID：10440637
> 
> 赞同：0
> 
> 时间：2012-05-03T23:15:37.713
> 
> 标签：asp.net-mvc, razor

I have a partialview in _Layout.cshtml that I only want to display for certain urls. My first thought was in my partial I would use a string as the model **@model String** . In the actionmethod that is called I would return this **return PartialView("_MyPartial", new string{Request.FilePath});** In the partial I would have an if block wrapping my outer div that would check the model to see if the url it contained was the url that can display the partial.

I don't like this way because I would have to hardcode the url in if block check

```
@if( Model == "/Test/Home")
{
    <div>
       Just an example
    </div>

} 
```

What would be the best way to do this?

Thanks

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T23:27:39.300

您不需要使用硬编码字符串，即使您按照最初的预期在视图中进行了验证。

您可以使用

```
Request.Url.AbsolutePath 
```

获取您当前的网址和

```
Url.Action("action", "controller") 
```

生成不可接受的位置。

也就是说，我会让你的逻辑决定是否在你的控制器中显示部分视图。

```
if(showPartialView)
   return PartialView("_MyPartial");
else
   return new EmptyResult(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T23:29:15.057

根据请求决定行动是控制器的责任。既然控制器选择了视图，为什么不让它也选择局部呢？找出你想要在你的控制器中的部分，如果有的话，并将它传递给你的视图模型上的视图。

# xcode - 如何将 Xcode 项目格式更改为兼容 Xcode 3.2？

> ID：10440639
> 
> 赞同：1
> 
> 时间：2012-05-03T23:15:39.793
> 
> 标签：xcode

我在代码完成方面遇到问题，并读到这将解决它，但我不知道此设置在哪里。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T23:22:58.167

项目格式不太可能对代码完成有任何影响，但如果您真的想更改它，请在文件导航器中选择项目本身并打开右侧的实用程序窗格。在第一个选项卡中是项目格式下拉菜单。

![在此处输入图像描述](../Images/bbcc2958044287bce6b01e266361ac55.png)

# php - access helpers options in view cakePHP

> ID：10440640
> 
> 赞同：-1
> 
> 时间：2012-05-03T23:15:59.660
> 
> 标签：php, cakephp, cakephp-1.3

Let's say in my `app_controller.php` I include a helper like this:

```
var $helpers = array('MyHelper' => array('value' => 'This is a value')); 
```

As you can see above, I'm also setting an array to my Helper. How do I access this array in my view files? Anybody knows how I can do this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T05:01:36.873

在您看来：如果您像访问函数一样尝试访问 options 成员变量会发生什么？

```
<?php
    ...
    ...
    debug( $this->MyHelper->options['value'] );
    // or
    debug( $this->MyHelper->options );
    // to view the whole array - access them by key like above
    ...
?> 
```

您应该阅读@thecodeparadox 在明确解决您的问题时给您的答案，而不是投反对票。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T03:42:36.223

```
class MyHelper extends AppHelper {
    public $options = array();
    public function __construct(View $view, $option = array()) {
        parent::__construct($view, $option);
        $this->options = $option;
        debug($option); // with in $option you will get your array
    }
}

class AppController extends Controller {
    public $helpers = array('MyHelper' => array('option1' => 'value1'));
} 
```

然后在您的视图文件中尝试

```
$this->MyHelper->options; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T23:19:22.347

它可以通过以下方式访问：

```
$helpers["Myhelper"]["value"]; 
```

# html - 网站加载缓慢！是因为我的 CSS 吗？

> ID：10440641
> 
> 赞同：0
> 
> 时间：2012-05-03T23:16:00.350
> 
> 标签：html, css

我不知道为什么，但是我的网站加载速度很慢...我怀疑我的 .css 存在问题，因为当我从 .css 中删除徽标的背景 url 并使用 index.html 时，您现在可以看到它快速加载（仅限徽标)

这是我的网站网址

```
http://michaelor.com/wedding/ 
```

这是我的 main.css 文件

```
@font-face {
    font-family: 'ArvoRegular';
    src: url('../fonts/Arvo-Regular-webfont.eot');
    src: url('../fonts/Arvo-Regular-webfont.eot?#iefix') format('embedded-opentype'),
         url('../fonts/Arvo-Regular-webfont.woff') format('woff'),
         url('../fonts/Arvo-Regular-webfont.ttf') format('truetype'),
         url('../fonts/Arvo-Regular-webfont.svg#ArvoRegular') format('svg');
    font-weight: normal;
    font-style: normal;

}

@font-face {
    font-family: 'ArvoItalic';
    src: url('../fonts/Arvo-Italic-webfont.eot');
    src: url('../fonts/Arvo-Italic-webfont.eot?#iefix') format('embedded-opentype'),
         url('../fonts/Arvo-Italic-webfont.woff') format('woff'),
         url('../fonts/Arvo-Italic-webfont.ttf') format('truetype'),
         url('../fonts/Arvo-Italic-webfont.svg#ArvoItalic') format('svg');
    font-weight: normal;
    font-style: normal;

}

@font-face {
    font-family: 'ArvoBold';
    src: url('../fonts/Arvo-Bold-webfont.eot');
    src: url('../fonts/Arvo-Bold-webfont.eot?#iefix') format('embedded-opentype'),
         url('../fonts/Arvo-Bold-webfont.woff') format('woff'),
         url('../fonts/Arvo-Bold-webfont.ttf') format('truetype'),
         url('../fonts/Arvo-Bold-webfont.svg#ArvoBold') format('svg');
    font-weight: normal;
    font-style: normal;

}

@font-face {
    font-family: 'ArvoBoldItalic';
    src: url('../fonts/Arvo-BoldItalic-webfont.eot');
    src: url('../fonts/Arvo-BoldItalic-webfont.eot?#iefix') format('embedded-opentype'),
         url('../fonts/Arvo-BoldItalic-webfont.woff') format('woff'),
         url('../fonts/Arvo-BoldItalic-webfont.ttf') format('truetype'),
         url('../fonts/Arvo-BoldItalic-webfont.svg#ArvoBoldItalic') format('svg');
    font-weight: normal;
    font-style: normal;

}

a {
text-decoration: none;
}

p {
font-size: 13px;
color: #765f3c;

line-height: 24px;
}

html {
text-shadow: 1px 1px 0px #eae6d7;
filter: dropshadow(color=#eae6d7, offx=1, offy=1); 
 font-family: 'ArvoRegular';
 font-weight: normal;
 font-style: normal;
 background-image: url(../images/background.jpg);
background-repeat: repeat;
}

.header {
background-image: url(../images/menu_bg.png);
background-repeat: repeat-x;
position: relative;
z-index: 999;
}

.header ul {
list-style: none;
}

.header ul li {
text-shadow: 1px 1px 0px #100e0d;
filter: dropshadow(color=#100e0d, offx=1, offy=1);
float: left;
font-size: 14px;
padding-right: 25px;
padding-left: 25px;
padding-top:18px;
padding-bottom: 22px;
/* Firefox */
    -moz-transition: all 0.3s ease-out;
    /* WebKit */
    -webkit-transition: all 0.3s ease-out;
    /* Opera */
    -o-transition: all 0.3s ease-out;
    /* Standard */
    transition: all 0.3s ease-out;
}

.header ul li:hover {
border-bottom: 5px solid #FFCCFF;
background-color: #262322;
}

.header ul li a {
color: #FFFFFF;
}

#navleft {
float: left;
width: 320px;
}

#navright {
float: right;
width: 259px;

}

.logo img {
/* background-image: url(../images/logo_bg.png); */
background-repeat: no-repeat;
/* padding-right: 50px; */
/* padding-left: 48px; */
/* padding-top: 10px; */
padding-bottom: 12px;
}

.container_h{
background-image: url(../images/center_bg.png);
background-repeat: repeat;
margin-top: -25px;
}

.content_h {
background-image: url(../images/shadow_sl.png);
height: 115px;
background-repeat: no-repeat;
}

.content_bottom {
background-image: url(../images/bottom_bg.png);
background-repeat: no-repeat;
height: 93px;
margin-bottom: 30px;
}

.container_h h2 {
color: #ac3131;
font-size: 18px;
font-weight: normal;
font-style: normal;
margin-bottom: 20px;
}

.box2 h1 {
text-align: center;
color: #fff;
margin-bottom: 20px;
font-size: 18px;

font-weight: normal;
font-style: normal;
}

.box {
float: left;
margin-left: 20px;
margin-right: 20px;
width: 280px;
}

.box img {
float: left;
margin-right: 20px;
margin-bottom: 30px;
border: 5px solid #ccba9e;
}

.box p {
margin-top: 10px;
}

.box a {
color: #5d412f;
}

.box2 {
text-shadow: 1px 1px 0px #6d1212;
filter: dropshadow(color=#6d1212, offx=1, offy=1); 
float: left;
margin-left: 30px;
margin-right: 30px;
width: 260px;
}

.box2 p {
color: #e5a9a9;
text-align: justify;
}

.box3 {
margin-left: 20px;
margin-right: 20px;
float: left;
width: 280px;
}

.box3 ul {
list-style: none;
float: left;
margin-top: 20px;
}

.box3 ul li {
float: left;
margin-right: 10px;
}

.box3 ul li:last-child {
float: left;
margin-right: 0px;
}

.box3 ul li img {
border: 5px solid #ccba9e;
-webkit-transition: margin 0.5s ease-out;
    -moz-transition: margin 0.5s ease-out;
    -o-transition: margin 0.5s ease-out;
}

.box3 ul li img:hover {
margin-top: -10px;
}

.container {
background-image: url(../images/paper_bg.png);
background-repeat: repeat;
margin-top: 20px;
margin-bottom: 40px;
-webkit-box-shadow: 0px 15px 0px 0px rgba(0, 0, 0, 0.1);
-moz-box-shadow: 0px 15px 0px 0px rgba(0, 0, 0, 0.1);
box-shadow: 0px 15px 0px 0px rgba(0, 0, 0, 0.1); 
}

.blog_post {
margin-top: 30px;
margin-left: 40px;

}

.post_info {
clear: both;
margin-top: 10px;
background-image: url(../images/bpaper.png);
background-repeat: repeat;
height: 35px;
margin-bottom: 10px;
}

.post_thumb {
border: 5px solid #ccba9e;
margin-top: 10px;
margin-bottom: 10px;
/* Firefox */
        -moz-transition-property: opacity;
        -moz-transition-duration: .3s;
        -moz-transition-delay: .1s;
        /* WebKit */
        -webkit-transition-property: opacity;
        -webkit-transition-duration: .3s;
        -webkit-transition-delay: .1s;
        /* Opera */
        -o-transition-property: opacity;
        -o-transition-duration: .3s;
        -o-transition-delay: .1s;
        /* Standard */
        transition-property: opacity;
        transition-duration: .3s;
        transition-delay: .1s;
}

.post_thumb:hover {
opacity: 0.8;

}

.post_info ul {
list-style: none;
margin-left: 20px;
color: #765f3c;
font-size: 13px;
}

.post_info li {
margin-top: 10px;
float:right;
margin-right: 20px;
}

.blog_post .title {
font-size: 18px;
color: #ac3131;
font-family: 'ArvoRegular';
font-weight: normal;
font-style: normal;
-webkit-transition: margin 0.5s ease-out;
    -moz-transition: margin 0.5s ease-out;
    -o-transition: margin 0.5s ease-out;
}

.title:hover {
margin-left: 10px;
}

.blog_post p {
margin-bottom: 20px;
}

.post_info li:first-child {
float:left;
}

.button {
clear: both;
background-color: #ac3131;
padding-top: 10px;
padding-bottom: 10px;
padding-right: 10px;
font-size: 13px;
color: #6c1a1a;
padding-left: 10px;
margin-top: 20px;
-webkit-border-radius: 5px;
-moz-border-radius: 5px;
border-radius: 5px; 
border: 1px solid #ac3131;
background: #c74747; /* Old browsers */
background: -moz-linear-gradient(top,  #c74747 0%, #ad3232 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#c74747), color-stop(100%,#ad3232)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top,  #c74747 0%,#ad3232 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top,  #c74747 0%,#ad3232 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top,  #c74747 0%,#ad3232 100%); /* IE10+ */
background: linear-gradient(top,  #c74747 0%,#ad3232 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#c74747', endColorstr='#ad3232',GradientType=0 ); /* IE6-9 */
text-shadow: 1px 1px 0px #d14e4e;
-webkit-box-shadow: inset 0px 1px 0px 0px #dc5e5e;
-moz-box-shadow: inset 0px 1px 0px 0px #dc5e5e;
box-shadow: inset 0px 1px 0px 0px #dc5e5e;
-webkit-transition: margin 0.5s ease-out;
    -moz-transition: margin 0.5s ease-out;
    -o-transition: margin 0.5s ease-out;
}

.button:hover {
margin-top: -10px;
}

.pagenav {
margin-left: 40px;

}

.pagenav ul {
display: inline;
float: left;
font-size: 13px;
list-style: none;
margin-top: 50px;
color: #846f4d;
}

.pagenav li a {
color: #846f4d;
}

.pagenav ul .activepage {
background-color: #ac3131;
border: 1px solid #ac3131;
color: #6c1a1a;
padding: 5px 10px 5px 10px;
background: #c74747; /* Old browsers */
background: -moz-linear-gradient(top,  #c74747 0%, #ad3232 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#c74747), color-stop(100%,#ad3232)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top,  #c74747 0%,#ad3232 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top,  #c74747 0%,#ad3232 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top,  #c74747 0%,#ad3232 100%); /* IE10+ */
background: linear-gradient(top,  #c74747 0%,#ad3232 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#c74747', endColorstr='#ad3232',GradientType=0 ); /* IE6-9 */
text-shadow: 1px 1px 0px #d14e4e;
-webkit-box-shadow: inset 0px 1px 0px 0px #dc5e5e;
-moz-box-shadow: inset 0px 1px 0px 0px #dc5e5e;
box-shadow: inset 0px 1px 0px 0px #dc5e5e;
}

.pagenav ul .activepage a {
color: #6c1a1a;
}

.pagenav li {
padding: 5px 10px 5px 10px;
background: #ecdccb;
color: #846f4d;
float: left;
border: 1px solid #e2cab5;
margin-right: 5px;
}

.sidebar {
background-image: url(../images/sidebar_bg.png);
background-repeat: repeat;
padding-right: 20px;

text-shadow: 1px 1px 0px #000000;
filter: dropshadow(color=#000000, offx=1, offy=1);
}

.s1 {
height: 980px;
}

.s2 {
height: 1400px;
}

.widget {
margin-top: 30px;
}

.blog_categories ul li {
-webkit-transition: margin 0.5s ease-out;
    -moz-transition: margin 0.5s ease-out;
    -o-transition: margin 0.5s ease-out;
}

.blog_categories ul li:hover {
margin-left: 10px;
}

.latest_posts ul li {
-webkit-transition: margin 0.5s ease-out;
    -moz-transition: margin 0.5s ease-out;
    -o-transition: margin 0.5s ease-out;
}

.button {
-webkit-transition: margin 0.5s ease-out;
    -moz-transition: margin 0.5s ease-out;
    -o-transition: margin 0.5s ease-out;
}

.button:hover {
margin-left: 20px;
}

.latest_posts  ul li:hover {
margin-left: 10px;
}

.widget h2 {
text-shadow: 1px 1px 0px #b91e1e;
color: #4c0e0e;
background-image: url(../images/widget_title.png);
background-repeat: no-repeat;
padding-top:    10px;
padding-left: 20px;
font-family: 'ArvoRegular';
font-weight: normal;
font-size: 16px;
font-style: normal;
padding-bottom: 30px;
}

.widget ul {
margin-left: 20px;
font-size: 13px;
color: #938d83;
list-style: none;
line-height: 24px;
}

.widget a {
color: #938d83;
}

.widget_gallery img{
border: 5px solid #221e1c;
/* Firefox */
        -moz-transition-property: opacity;
        -moz-transition-duration: .2s;
        -moz-transition-delay: .1s;
        /* WebKit */
        -webkit-transition-property: opacity;
        -webkit-transition-duration: .1s;
        -webkit-transition-delay: .1s;
        /* Opera */
        -o-transition-property: opacity;
        -o-transition-duration: .1s;
        -o-transition-delay: .1s;
        /* Standard */
        transition-property: opacity;
        transition-duration: .1s;
        transition-delay: .1s;
}

.widget_gallery img:hover {
opacity: 0.5;
}

.widget_gallery ul {
list-style: none;
}

.widget_gallery li {
float: left;
margin-right: 10px;
margin-top: 10px;
}

/* Comments */
    .comment {
        margin-top:40px;

    }

    .comment p {
    color: #ac3131;
        font-family: 'ArvoRegular';
    font-weight: normal;
    font-style: normal;
    }
    .comment h3 {
    margin-bottom: 20px;
    }
    input,textarea {
        color: #ac3131;
        padding:12px;
        border:1px solid #b9a17e;
        margin-bottom:20px;
        outline:0;
        width: 400px;
        background:#d7baa7;
        -webkit-box-shadow: inset 5px 5px 0px 0px #c6ab9a;
        -moz-box-shadow: inset 5px 5px 0px 0px #c6ab9a;
        box-shadow: inset 5px 5px 0px 0px #c6ab9a; 
        color: #765f3c;
        font-size:13px;
            font-family: 'ArvoRegular';
    font-weight: normal;
    font-style: normal;
    }

    textarea {

        width: 400px;
        height:150px;
        line-height:150%;
    }

    input:hover,textarea:hover,input:focus,textarea:focus {
        -webkit-box-shadow:  5px 5px 0px 0px #c6ab9a;
        -moz-box-shadow: 5px 5px 0px 0px #c6ab9a;
        box-shadow:  5px 5px 0px 0px #c6ab9a; 
    }

    .form label {
        margin-left:10px;
        color: #ac3131;
    }

    .submit input {
    background-color: #ac3131;
    padding-top: 10px;
    padding-bottom: 10px;
    padding-right: 10px;
    max-width:150px;
    font-size: 13px;
    color: #6c1a1a;
    padding-left: 10px;
    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
    border-radius: 5px; 
    border: 1px solid #ac3131;
    background: #c74747; /* Old browsers */
    background: -moz-linear-gradient(top,  #c74747 0%, #ad3232 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#c74747), color-stop(100%,#ad3232)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top,  #c74747 0%,#ad3232 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top,  #c74747 0%,#ad3232 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top,  #c74747 0%,#ad3232 100%); /* IE10+ */
    background: linear-gradient(top,  #c74747 0%,#ad3232 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#c74747', endColorstr='#ad3232',GradientType=0 ); /* IE6-9 */
    text-shadow: 1px 1px 0px #d14e4e;
    -webkit-box-shadow: inset 0px 1px 0px 0px #dc5e5e;
    -moz-box-shadow: inset 0px 1px 0px 0px #dc5e5e;
    box-shadow: inset 0px 1px 0px 0px #dc5e5e;
    }

    .commentsTitle {
    margin-bottom:25px;
    }
    .commentWrap {
        position:relative;
    }
    .commentAvatar {
        float:left;
        display:block;
        margin-right:25px;
    }
    .commentAvatar img {
        padding:4px;
        background:#ccba9e;
        -webkit-transition:background-color 0.3s ease;
        -moz-transition:background-color 0.3s ease;
        -o-transition:background-color 0.4s ease;
        -ms-transition:background-color 0.4s ease;
        transition:background-color 0.3s ease;
    }
    .commentAvatar:hover img {
        background:#b63939;
        -webkit-transition:background-color 0.3s ease;
        -moz-transition:background-color 0.3s ease;
        -o-transition:background-color 0.4s ease;
        -ms-transition:background-color 0.4s ease;
        transition:background-color 0.3s ease;
    }
    .commentContent {
        float:left;
        position:relative;
        width:440px;
        margin-bottom:25px;
        padding:15px;
        background-image: url(../images/bpaper.png);
        background-repeat: repeat;

        overflow:visible;
    }
    .commentArrow {
        display:block;
        width:16px;
        height:16px;
        left:-15px;
        position:absolute;
        top:16px;
        margin:0;
        padding:0;
        border:none;
        background:url(../images/commentArrow.png) 0 0 no-repeat;
    }
    .commentContent .underlinedTitle {
        display:block;
        color: #765f3c;
        padding-bottom:10px;
    }
    .commentContent .underlinedTitle > span {
        color: #765f3c;
    }

    .commentContent a {
    color: #ac3131;
    }

    .comments_blog h3{
    font-size: 18px;
    color: #ac3131;
    font-family: 'ArvoRegular';
    font-weight: normal;
    font-style: normal;
    }

    .comments_blog {
    margin-left: 35px;
    }

    .menu_nav {
    margin-top: 20px;
    margin-bottom: -20px;
font-size: 14px;
color: #6c1a1a;
height: 55px;

-webkit-border-radius: 5px;
-moz-border-radius: 5px;
border-radius: 5px; 
border: 1px solid #ac3131;
background-color: #c74747; /* Old browsers */
background: -moz-linear-gradient(top,  #c74747 0%, #ad3232 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#c74747), color-stop(100%,#ad3232)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top,  #c74747 0%,#ad3232 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top,  #c74747 0%,#ad3232 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top,  #c74747 0%,#ad3232 100%); /* IE10+ */
background: linear-gradient(top,  #c74747 0%,#ad3232 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#c74747', endColorstr='#ad3232',GradientType=0 ); /* IE6-9 */
text-shadow: 1px 1px 0px #d14e4e;
-webkit-box-shadow: inset 0px 1px 0px 0px #dc5e5e;
-moz-box-shadow: inset 0px 1px 0px 0px #dc5e5e;
box-shadow: inset 0px 1px 0px 0px #dc5e5e;

    }

    .menu_nav ul {
    list-style: none;

    height: 43px;

    float: left;

    }

    .two_menus {
    background-image: url(../images/menupage.png);
    background-repeat: no-repeat;
    background-position: center;
    height: 43px;
    margin-top: 7px;
    }

    .menu_nav a {
    color: #6c1a1a;
    text-shadow: 1px 1px 0px #d14e4e;
    }

    .menu_nav li {
    float: left;
    padding-right: 25px;
    padding-left: 25px;
    padding-top: 18px;

    padding-bottom: 20px;
    margin-top: 0px;
    /* Firefox */
    -moz-transition: all 0.2s ease-out;
    /* WebKit */
    -webkit-transition: all 0.2s ease-out;
    /* Opera */
    -o-transition: all 0.2s ease-out;
    /* Standard */
    transition: all 0.2s ease-out;
    }

    .menu_nav li:hover {

    margin-top: -5px;
    }

    .portfolio  ul {
    list-style: none;

    }

    .portfolio h2 {
    color: #ac3131;
font-size: 18px;
margin-top: 10px;
font-weight: normal;
font-style: normal;
margin-bottom: 5px;
    }

    .portfolio  {
    list-style: none;
    }

    .portfolio  li {
    float: left;

    width: 240px;
    padding-left: 15px;
    margin-right: 20px;
    margin-left: 20px;
    padding-right: 24px;

    }

    .portfolio li img {
    margin-top: 30px;
    }

    .portfolio {
    min-height: 770px;
    }

    .portfolio li img {
    border: 5px solid #ccba9e;
    }

    .group {
    list-style: none;
    overflow: hidden;
    }

    .contact {

    }

    .portfolio ul {
    width: 960px;
    }

    .cleft {
    background-image: url(../images/paper_bg.png);
    background-repeat: repeat;
    }

    .contact h3 {
        color: #ac3131;
font-size: 18px;
margin-top: 10px;
font-weight: normal;
font-style: normal;
margin-bottom: 20px;
    }

        .sample h3 {
        color: #ac3131;
    font-size: 18px;
    margin-bottom: 10px;
    margin-top: 10px;
    font-weight: normal;
    font-style: normal;

    }

    .sample {
    margin-left: 10px;
    margin-top: 10px;
    margin-bottom: 20px;
    }

    .contactform {
    margin-top: 30px;
    margin-left: 30px;
    margin-bottom: 20px;
    padding-bottom: 20px;
    }

    .cright {
    background-image: url(../images/cright.png);
    background-repeat: repeat;
    padding-right: 20px;
    }

    .cleft_b {
    background-image: url(../images/cleftb.png);
    background-repeat: repeat;
    margin-left: 20px;
    margin-top: 20px;

    }

    .cleft_b h3 {
    padding: 20px;
    margin-bottom: -10px;
    }

    .cleft_b p {
    padding: 20px;
        margin-top: -30px;
    }

    #map-canvas {
    margin-left: 20px;
    margin-top: 5px;

    } 
```

你看到它有什么明显的问题吗？非常感谢！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T23:28:23.440

您的网站出现缓慢有几个原因。

自定义字体似乎只有在页面加载后才会下载。在加载字体文件之前，页面上使用 @font-face 定义声明的字体的任何元素都不会显示。这就是为什么您的网站似乎长时间“无法加载”的原因。

我不熟悉浏览器如何优先考虑 CSS 文件中声明的字体的下载顺序 - 或者是否有办法强制首先下载它们。但是，使用 chromes 开发人员工具，看起来字体文件直到 DOMContent 事件被触发才被下载，然后它们被串行下载而不是并行下载。

此外，正如您所注意到的，删除背景会加快页面速度。您的背景文件超过 1MB，这对于网站来说是相当可观的。如果图像尺寸较小，它将下载并显示得更快。

如果您只是删除自定义字体，我相信您会看到巨大的改进。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T23:27:45.380

ySlow 建议：

*   减少 HTTP 请求
*   使用内容交付网络 (CDN)
*   添加过期标头
*   使用 gzip 压缩组件
*   将 JavaScript 放在底部
*   避免 CSS 表达式
*   避免 URL 重定向
*   配置实体标签 (ETags)
*   避免使用 AlphaImageLoader 过滤器

[http://yslow.org](http://yslow.org)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T23:28:05.747

你应该试试[YSlow 。](http://yslow.org/)

# google-app-engine - Welcome Message in Struts 2 running in Google App Engine

> ID：10440643
> 
> 赞同：1
> 
> 时间：2012-05-03T23:16:03.877
> 
> 标签：google-app-engine, struts2, action-mapping

I have the following lines below in web.xml

```
<welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
</welcome-file-list> 
```

But when I access [http://localhost:8888](http://localhost:8888) I received the error below:

```
There is no Action mapped for namespace [/] and action name 
[] associated with context path []. 
```

Isn't it be redirected to index.jsp? How to make welcome file work?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-19T09:07:53.587

运行服务器后，它正在搜索一个动作。您应该在 struts.xml 中有一个映射到 jsp 文件的操作

还要在您的`web.xml`

```
 <filter>
    <filter-name>struts2</filter-name>
    <filter-class>
       org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter
    </filter-class>
  </filter>
  <filter-mapping>
     <filter-name>struts2</filter-name>
     <url-pattern>/*</url-pattern>
  </filter-mapping> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T17:27:48.640

我认为您已正确配置欢迎文件。错误消息看起来像一个struts 错误消息。看起来你有一个struts配置问题。检查 struts.xml 文件中的操作类配置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T07:49:34.203

请编辑您的`struts.xml`并输入此操作作为最后一个操作（仅在所有操作之后作为默认操作）。

```
<action name="*">
    <result type="redirectAction">
    <param name="actionName">Home.action</param>
    </result>
</action> 
```

现在这必须是最后一个操作，它将像您的应用程序的默认操作一样工作。如果没有找到任何已配置的操作，您的应用程序将被重定向到此操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-17T10:36:52.160

将以下空白操作添加到“/”包命名空间中的 struts.xml 文件中，当您仅尝试访问您的 url（如 appid.app.com）时，它将显示 index.html 并且不会显示错误。通常它会添加一个空白操作，应用引擎会将空白操作重定向到您的欢迎文件。

```
 <action name="" class="com.candi.actions.Dashboard" method="noAction">
        <result name="success">index.jsp</result>
    </action> 
```

让我们进一步解释。只需通过提供空白“”作为您的操作名称来添加空白操作，并将您的结果重定向到 index.php，这将解决您的问题。

# wpf - 哪些情况会阻止 javascript 在 WPF WebBrowser 控件中执行？

> ID：10440645
> 
> 赞同：0
> 
> 时间：2012-05-03T23:16:26.813
> 
> 标签：wpf, webbrowser-control

我们有一个 System.Windows.Controls.WebBrowser 控件呈现 HTML 并引用 jQuery（通过 https 连接检索）。我们的测试机器最近将其 Internet Explorer 版本升级到 8.0.7600.16385。升级后，WebBrowser 控件停止执行 javascript。我们在常规浏览器和 System.Windows.Forms.WebBrowser 控件中测试了相同的 HTML，它在两者中都能完美运行。

有人知道可能是什么原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T23:30:23.080

这可能是由于安全限制。尝试在您的页面上包含[Web 标记。](http://msdn.microsoft.com/en-us/library/ms537628%28v=vs.85%29.aspx)例如，此注释将告诉`WebBrowser`使用本地 Intranet 区域的安全策略执行页面：

```
<!-- saved from url=(0016)http://localhost --> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T23:28:29.677

通常，“JavaScript 不执行”的原因是在解析或执行它时出现浏览器错误：文件不存在、文件中存在语法错误、脚本在运行时抛出异常等。您已尝试对此进行处理通过在常规浏览器中进行测试，但脚本中是否有任何内容检测到 UserAgent 或浏览器功能并失败？您可以从 WPF WebBrowser 控件中获取控制台错误吗？

# javascript - D3.js 中的简单散点图示例？

> ID：10440646
> 
> 赞同：23
> 
> 时间：2012-05-03T23:16:31.807
> 
> 标签：javascript, data-visualization, d3.js

我正在寻找如何在 D3.js 中绘制散点图的示例。

[通过查看官方 D3.js 示例](https://github.com/mbostock/d3/wiki/Gallery)（尽管它们令人印象深刻），我无法找到一个简单的示例。我只想知道如何：

*   绘制并标记 x 轴和 y 轴
*   在图表上绘制散点。

我确实在这个[D3 可重用库中找到](https://github.com/novus/nvd3)[了这个示例](http://novus.github.com/nvd3/examples/scatterWithLegend.html)，但它比我需要的要复杂得多，外部文件使得很难提取要点。任何人都可以指出一个简单的散点图示例来开始吗？

非常感谢。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-04T05:06:20.817

这应该让你开始。[您可以在http://bl.ocks.org/2595950](http://bl.ocks.org/2595950)上看到它的实际效果。

```
// data that you want to plot, I've used separate arrays for x and y values
var xdata = [5, 10, 15, 20],
    ydata = [3, 17, 4, 6];

// size and margins for the chart
var margin = {top: 20, right: 15, bottom: 60, left: 60}
  , width = 960 - margin.left - margin.right
  , height = 500 - margin.top - margin.bottom;

// x and y scales, I've used linear here but there are other options
// the scales translate data values to pixel values for you
var x = d3.scale.linear()
          .domain([0, d3.max(xdata)])  // the range of the values to plot
          .range([ 0, width ]);        // the pixel range of the x-axis

var y = d3.scale.linear()
          .domain([0, d3.max(ydata)])
          .range([ height, 0 ]);

// the chart object, includes all margins
var chart = d3.select('body')
.append('svg:svg')
.attr('width', width + margin.right + margin.left)
.attr('height', height + margin.top + margin.bottom)
.attr('class', 'chart')

// the main object where the chart and axis will be drawn
var main = chart.append('g')
.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')')
.attr('width', width)
.attr('height', height)
.attr('class', 'main')   

// draw the x axis
var xAxis = d3.svg.axis()
.scale(x)
.orient('bottom');

main.append('g')
.attr('transform', 'translate(0,' + height + ')')
.attr('class', 'main axis date')
.call(xAxis);

// draw the y axis
var yAxis = d3.svg.axis()
.scale(y)
.orient('left');

main.append('g')
.attr('transform', 'translate(0,0)')
.attr('class', 'main axis date')
.call(yAxis);

// draw the graph object
var g = main.append("svg:g"); 

g.selectAll("scatter-dots")
  .data(ydata)  // using the values in the ydata array
  .enter().append("svg:circle")  // create a new circle for each value
      .attr("cy", function (d) { return y(d); } ) // translate y value to a pixel
      .attr("cx", function (d,i) { return x(xdata[i]); } ) // translate x value
      .attr("r", 10) // radius of circle
      .style("opacity", 0.6); // opacity of circle 
```

像这样使用：

```
<!DOCTYPE html>
<html>
  <head>
    <title>The d3 test</title>
    <script type="text/javascript" src="http://mbostock.github.com/d3/d3.v2.js" charset="utf-8"></script>
  </head>
  <body>
    <div class='content'>
      <!-- /the chart goes here -->
    </div>
    <script type="text/javascript" src="scatterchart.js"></script>
  </body>
</html 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T20:17:56.157

NVD3.js 有很好的例子。您还需要包含他们的库或查看他们的实现。看看这个散点图的例子：http: [//nvd3.org/livecode/#codemirrorNav](http://nvd3.org/livecode/#codemirrorNav)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-13T06:46:05.167

看看这个带有 C3.js（基于 D3）的散点图示例：http: [//c3js.org/samples/chart_scatter.html](http://c3js.org/samples/chart_scatter.html)

您可以像这样更改半径大小：http: [//grokbase.com/t/gg/c3js/14a7jfj28c/bubble-chart-with-sharing-radius-size-in-c3-js](http://grokbase.com/t/gg/c3js/14a7jfj28c/bubble-chart-with-changing-radius-size-in-c3-js)

# ruby-on-rails - 安装 Rails 时出错

> ID：10440651
> 
> 赞同：-1
> 
> 时间：2012-05-03T23:17:12.583
> 
> 标签：ruby-on-rails, installation

我知道其他人已经问过这个问题，但建议的修复似乎对我不起作用。我正在尝试使用 Ruby 1.8.7 在 Mac OS X Lion 上安装 Rails v. 3.2.3。在终端：

```
$ sudo gem install rails -v 3.2.3 
```

然后我收到错误消息：

```
Building native extensions.  This could take a while...
ERROR:  Error installing rails:
        ERROR: Failed to build gem native extension.

        /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby extconf.rb
mkmf.rb can't find header files for ruby at /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/ruby.h

Gem files will remain installed in /Library/Ruby/Gems/1.8/gems/json-1.7.0 for inspection.
Results logged to /Library/Ruby/Gems/1.8/gems/json-1.7.0/ext/json/ext/parser/gem_make.out 
```

我看到有些人建议安装我有的 Xcode v. 4.3.2，但我不确定我是否需要对 Xcode 做一些特殊的事情才能让 Rails 安装工作。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T01:38:59.130

最简单的安装方法是使用 RVM，这是一个非常好的指南：

[http://thinkvitamin.com/code/ruby-on-rails/installing-ruby-rails-and-mysql-on-os-x-lion/](http://thinkvitamin.com/code/ruby-on-rails/installing-ruby-rails-and-mysql-on-os-x-lion/)

# iphone - 如何将地点与 CLGeocoder 的结果相匹配？

> ID：10440659
> 
> 赞同：0
> 
> 时间：2012-05-03T23:17:42.233
> 
> 标签：iphone, ios, geolocation, core-location, clgeocoder

我可以通过's方法成功获得结果（如`locality`,`ISOcountryCode`等） 。 但是我怎样才能将这个地方与结果相匹配呢？`CLGeocoder``reverseGeocodeLocation:completionHandler:`

例如：如果结果的城市（地区）是`Hangzhou City`，我可以简单地通过使用来匹配它

```
if ([placemark.locality isEqualToString:@"Hangzhou City"]) {...} 
```

但是如您所知，有数百万个城市，不可能将城市名称一一获取并硬编码到我的应用程序中。

那么，有没有办法解决这个问题呢？或者是否存在任何框架？或者只有几个文件包含与`CLGeocoder`结果匹配的国家和城市名称？即使是模糊坐标匹配解决方案也可以（我的意思是，一个城市有自己的区域，我可以通过坐标确定城市，但我现在仍然需要获取每个城市的区域面积）。

* * *

部署目标iOS5.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T23:34:51.730

那么有一个更简单的方法，您可以使用反向 GeocodeLocation 来获取该地点的信息。你必须知道这在每个城市都不会起作用。有关更多信息，请查看 Apple 的[CLGeocoder 类参考](http://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLGeocoder_class/Reference/Reference.html "CLGeocoder 类参考")和[地理编码位置数据](http://developer.apple.com/library/ios/#DOCUMENTATION/UserExperience/Conceptual/LocationAwarenessPG/UsingGeocoders/UsingGeocoders.html)文档。

所以你可以创建和处理服务的对象

```
#import <Foundation/Foundation.h>
#import <CoreLocation/CoreLocation.h>

@interface locationUtility : NSObject<CLLocationManagerDelegate>{
  CLLocationManager *locationManager;
  CLPlacemark *myPlacemark;
  CLGeocoder * geoCoder;
}

@property (nonatomic,retain) CLLocationManager *locationManager;

@end 
```

和实施

```
#import "locationUtility.h"

@implementation locationUtility
@synthesize locationManager;

#pragma mark - Init
-(id)init {
  NSLog(@"locationUtility - init");
  self=[super init];

  locationManager = [[CLLocationManager alloc] init];
  locationManager.delegate = self;
  locationManager.desiredAccuracy = kCLLocationAccuracyBest;
  locationManager.distanceFilter = kCLDistanceFilterNone;
  [locationManager startMonitoringSignificantLocationChanges];
  geoCoder= [[CLGeocoder alloc] init];
  return self;
}

- (void) locationManager:(CLLocationManager *) manager didUpdateToLocation:(CLLocation *) newLocation
            fromLocation:(CLLocation *) oldLocation {
  [geoCoder reverseGeocodeLocation:newLocation completionHandler:^(NSArray *placemarks, NSError *error) {
     CLPlacemark *placemark = [placemarks objectAtIndex:0];
     myPlacemark=placemark; 
     // Here you get the information you need  
     // placemark.country;
     // placemark.administrativeArea;
     // placemark.subAdministrativeArea;
     // placemark.postalCode];
    }];
}

-(void) locationManager:(CLLocationManager *) manager didFailWithError:(NSError *) error {
  NSLog(@"locationManager didFailWithError: %@", error.description);
}

@end 
```

# reporting-services - SSRS 中的简单折线图

> ID：10440660
> 
> 赞同：0
> 
> 时间：2012-05-03T23:17:46.670
> 
> 标签：reporting-services, reportingservices-2005

我在使用 SSRS 中的折线图控件时遇到问题。如果我在 excel 中，这将很容易，但由于某种原因，我无法理解如何在 SSRS 中执行此操作

我从数据库返回 5 行数据，需要绘制 3 行的图表。

```
 Name             J  F   M   A   M   J   J   A   S
1   Requested        13 19  4   20  2   0   0   0   0   
2   Completed        1  0   0   4   1   0   0   0   0   
3   % Completed      .7 0   0   0.2 0.5 0   0   0   0
4   Monthly Ba       12 19  4   16  1   0   0   0   0   
5   YTD Backlog      12 31  35  51  52  52  52  52  52 
```

这些行由该月份的名称和值组成。

我正在尝试为第 1、2 和 5 行显示一个图表，该图表看起来像一个正常的折线图，每个月都在水平列上，值是数据点。

但是，当我开始向图表中添加内容时，我得到了 36 个不同的系列，每个系列每个月一个，但似乎没有任何工作正常。它还在底部分为第 1 组和第 2 组，这对我来说毫无意义。我觉得我错过了一些简单的东西，很可能是某种分组。

编辑：

我最终接受了 Nathan 的建议，并在表格上添加了一个 unpivot 以将数据旋转为 SSRS 可接受的格式

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T11:09:15.687

您可以更改返回数据集结果的查询吗？如果是这样，请尝试更改它，使数据集看起来更像这样：

```
monthnumber month Requested Completed YTD Backlog
1           J     13        1         12
2           F     19        0         31
3           M     4         0         35
4           A     20        4         51 
```

等等

您应该能够添加“已请求”、“已完成”和“YTD Backlog”作为值和“月”作为类别来生成所需的图表。

我添加了一个“月号”列，因为您可能需要这样的内容，以便您可以将类别（月份）排序表达式设置为此，否则它们将按字母顺序显示。

# c++ - 定义数组时出现 C++ 错误

> ID：10440661
> 
> 赞同：3
> 
> 时间：2012-05-03T23:18:03.777
> 
> 标签：c++, arrays, pointers

我试图在 C++ 中声明一个数组，但我不断收到此错误。

> 错误 C2440：“正在初始化”：无法从“int *”转换为“int []”

对于这条线

```
int b[] = new int[elements]; 
```

***完整代码***

```
int* reverseArray (int a[] ,int elements)
{
    int *pointer;
    int x= elements-1;
    int b[] = new int[elements];
    pointer=b[];
    for (int i= 0; i < elements; i++)
    {
        b[i] = a[x--];
    }
    return pointer;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-03T23:19:13.947

`new`返回一个指针，所以你应该改变

```
int b[] = new int[elements]; 
```

到

```
int* b = new int[elements]; 
```

你应该删除`pointer`并简单地返回`b`，所以

```
int* reverseArray (int a[] ,int elements)
{
  int x = elements-1;
  int* b = new int[elements];
  for (int i = 0; i < elements; ++i)
    b[i] = a[x--];
  return b;
} 
```

但是你真的应该考虑使用`std::vector`. 如果您使用`std::vector`, 来反转数组，您可以简单地使用`std::reverse`from `<algorithm>`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T23:20:31.353

使用[向量](http://www.cplusplus.com/reference/stl/vector/)- 更容易使用

# objective-c - Objective-c iOS 5.x - 检查 iDevice 是否连接到计算机

> ID：10440662
> 
> 赞同：1
> 
> 时间：2012-05-03T23:18:07.033
> 
> 标签：objective-c

我想检查 iOS 设备当前是否连接到计算机（Wifi 和电缆）

我试图用[谷歌搜索它](http://www.google.com/search?&q=Xcode%20check%20if%20iphone%20is%20syncing%20-connected)并查看[Apple Developer site](https://developer.apple.com/library/ios/navigation/)，但似乎找不到与我的问题相关的任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T01:37:51.080

如果设备已物理连接，您可以检查电池状态，如下所示：

```
UIDeviceBatteryState myBatteryState = [UIDevice currentDevice].myBatteryState;
if (myBatteryState == UIDeviceBatteryStateCharging) {
    //code
} else if (myBatteryState == UIDeviceBatteryStateFull) {
    //code
} 
```

# java - JFrame vs JPanel 然后是 JFrame

> ID：10440663
> 
> 赞同：0
> 
> 时间：2012-05-03T23:18:19.153
> 
> 标签：java, swing, jframe, jpanel

我有一个显示一个椭圆 (Ellipse2D) 的程序。

我应该直接将椭圆添加到 JFrame 还是应该将其添加到 JPanel，最终添加到 JFrame 中？（添加 JPanel 需要更多工作）

从长远来看，哪一个对我有帮助？（我可能会考虑放置键绑定。）

为了让事情更清楚：

我应该这样做：

```
public class Test extends JFrame{ // This is a JFrame

Ellipse ellipse = new Ellipse(); // I have an ellipse class

Test(){

...
add(ellipse);
...

}

} 
```

或者我应该这样做：

```
public class Test extends JFrame{

Test2 test2 = new Test2();

Test(){
...
add(test2)
...
}
}

public class Test2 extends JPanel{ // This is a JPanel

Ellipse ellipse = new Ellipse(); // I have an ellipse class

Test2(){

...
add(ellipse);
...

}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T23:42:19.920

Eclipse 是否是 JPanel（或扩展了一些 Java Swing 容器组件）。如果没有，那么使用 JPanel 解决方案，它将在某种程度上被视为一个组件。如果是，那么首先向 JFrame 添加一个布局管理器（也许是 BorderLayout），然后将面板添加到它可能位于 CENTER 中（做出您自己的选择）。

我的桌面应用程序开发方法是：

将布局管理器添加到 JFrame，然后根据布局将 JPanels 添加到 JFrame。这使得 GUI 更易于管理，并且将来更易于更新/更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T11:31:46.697

您可能总是只在 a 中绘制椭圆`BufferedImage`，将图像添加到 an`ImageIcon`并将图标添加到 a `JLabel`。

# portable-class-library - 是否有支持 System.Xml.Linq 和 System.Windows for .NET 4.0 的可移植类库配置文件

> ID：10440665
> 
> 赞同：3
> 
> 时间：2012-05-03T23:18:25.363
> 
> 标签：portable-class-library

我一直在使用 Visual Studio 11 Beta 版本使用可移植类库。

我在“Profile104”中让 WP7、Silverlight 和 .Net 4.5 一起工作取得了很大的成功。

但是，我还没有找到在相同或类似配置文件中支持 .Net 4 的方法。特别是，我正在寻找 System.Xml.Linq 和 System.Windows.Input.ICommand 可用的配置文件？

有没有办法做到这一点？是通过使用标准配置文件，还是通过创建我自己的配置文件然后添加类型转发？

谢谢

斯图尔特

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T00:05:38.003

不，ICommand（以及 INotifyCollectionChanged 和 ObservableCollection）在面向 .NET 4.0 之前版本的可移植库中不可用。我们必须在 .NET 中进行一些更改以支持它（主要是添加带有类型转发的 System.Windows.dll），这在早期版本中不可用。

我相信 System.Xml.Linq 可用于 .NET 4.0.3 及更高版本的可移植库。

# python - 在 Python 线程中，我如何跟踪线程的完成情况？

> ID：10440667
> 
> 赞同：11
> 
> 时间：2012-05-03T23:18:35.390
> 
> 标签：python, multithreading

我有一个生成多个线程的 python 程序。这些线程持续 2 秒到 30 秒之间的任何时间。在主线程中，我想跟踪每个线程何时完成并打印一条消息。如果我只是按顺序 .join() 所有线程并且第一个线程持续 30 秒并且其他线程更快地完成，我将无法更快地打印消息 - 所有消息将在 30 秒后打印。

基本上我想阻塞直到**任何**线程完成。一旦线程完成，打印一条关于它的消息，如果任何其他线程仍然存在，则返回阻塞。如果所有线程都完成，则退出程序。

我能想到的一种方法是让一个队列传递给所有线程并阻塞 queue.get()。每当从队列接收到消息时，打印它，使用 threading.active_count() 检查是否有任何其他线程处于活动状态，如果是，则返回到 queue.get() 上的阻塞。这会起作用，但这里所有线程都需要遵循在终止之前向队列发送消息的规则。

我想知道这是实现这种行为的传统方式还是有其他/更好的方式？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-09-04T19:00:32.037

这是@detly 答案的一个变体，可让您从主线程中指定消息，而不是从目标函数中打印它们。这将创建一个包装函数，该函数调用您的目标，然后在终止之前打印一条消息。您可以修改它以在每个线程完成后执行任何类型的标准清理。

```
#!/usr/bin/python

import threading
import time

def target1():
    time.sleep(0.1)
    print "target1 running"
    time.sleep(4)

def target2():
    time.sleep(0.1)
    print "target2 running"
    time.sleep(2)

def launch_thread_with_message(target, message, args=[], kwargs={}):
    def target_with_msg(*args, **kwargs):
        target(*args, **kwargs)
        print message
    thread = threading.Thread(target=target_with_msg, args=args, kwargs=kwargs)
    thread.start()
    return thread

if __name__ == '__main__':
    thread1 = launch_thread_with_message(target1, "finished target1")
    thread2 = launch_thread_with_message(target2, "finished target2")

    print "main: launched all threads"

    thread1.join()
    thread2.join()

    print "main: finished all threads" 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-03T23:33:28.460

需要使用`Thread.is_alive()`调用检查线程。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-04T00:32:06.960

为什么不让线程自己打印完成消息，或者在完成后调用其他完成回调？

您可以只`join`从主程序中提取这些线程，因此您会看到一堆完成消息，并且您的程序将根据需要在它们全部完成后终止。

这是一个快速简单的演示：

```
#!/usr/bin/python

import threading
import time

def really_simple_callback(message):
    """
    This is a really simple callback. `sys.stdout` already has a lock built-in,
    so this is fine to do.
    """    
    print message

def threaded_target(sleeptime, callback):
    """
    Target for the threads: sleep and call back with completion message.
    """
    time.sleep(sleeptime)
    callback("%s completed!" % threading.current_thread())

if __name__ == '__main__':
    # Keep track of the threads we create
    threads = []

    # callback_when_done is effectively a function
    callback_when_done = really_simple_callback

    for idx in xrange(0, 10):
        threads.append(
            threading.Thread(
                target=threaded_target,
                name="Thread #%d" % idx,
                args=(10 - idx, callback_when_done)
            )
        )

    [t.start() for t in threads]
    [t.join() for t in threads]

    # Note that thread #0 runs for the longest, but we'll see its message first! 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-04T00:22:10.290

我建议的是这样的循环

```
while len(threadSet) > 0:
    time.sleep(1)
    for thread in theadSet:
        if not thread.isAlive()
            print "Thread "+thread.getName()+" terminated"
            threadSet.remove(thread) 
```

有 1 秒的休眠，所以线程终止和打印消息之间会有一点延迟。如果您可以忍受这种延迟，那么我认为这比您在问题中提出的解决方案更简单。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-03T23:29:58.277

您可以让线程将其结果推送到`threading.Queue`. 让另一个线程在此队列上等待，并在出现新项目时立即打印消息。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-03T23:29:51.157

我不确定我是否看到使用的问题：threading.activeCount()

跟踪仍处于活动状态的线程数？

即使您在开始之前不知道要启动多少线程，它似乎也很容易跟踪。我通常通过列表理解生成线程集合，然后使用 activeCount 与列表大小进行简单比较可以告诉你有多少已经完成。

见这里：[http ://docs.python.org/library/threading.html](http://docs.python.org/library/threading.html)

或者，一旦你有了你的线程对象，你就可以在线程对象中使用 .isAlive 方法来检查。

我刚刚通过将其放入我拥有的多线程程序中进行检查，它看起来不错：

```
for thread in threadlist:
        print(thread.isAlive()) 
```

当线程打开和关闭时，给我一个 True/False 列表。所以你应该能够做到这一点并检查任何 False 以查看是否有任何线程完成。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-09-08T14:55:18.810

由于我在应用程序中使用的线程的性质，我使用了一种稍微不同的技术。为了说明，这是我编写的一个测试带程序的片段，用于为我的线程类搭建一个屏障类：

```
 while threads:
        finished = set(threads) - set(threading.enumerate())
        while finished:
            ttt = finished.pop()
            threads.remove(ttt)
        time.sleep(0.5) 
```

为什么我要这样做？在我的生产代码中，我有时间限制，所以第一行实际上是“while threads and time.time() < cutoff_time”。如果我达到截止时间，我就有代码告诉线程关闭。

# trigger.io - 当用户不允许 iOS 位置时，我在哪里可以使用 getImage API 找到文件对象？

> ID：10440668
> 
> 赞同：1
> 
> 时间：2012-05-03T23:18:40.923
> 
> 标签：trigger.io

当用户不允许 iOS 位置时，我在哪里可以使用 getImage API 找到文件对象？

错误回调是否会有成功的文件对象，如此处所示？

```
file.getImage( function (file) { /* the success scenario */ , function (file) { /* the error scenario but still has successful file object */ ); 
```

或者错误回调是否会同时包含内容和文件对象？

```
file.getImage( function (file) { /* do success scenario  */ , function (content, file) { /* error scenario but has successful file object */ ); 
```

这种情况下正确的 API 模式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T10:23:54.430

使用时可能会提示用户提供位置许可的原因`file.getImage`是因为图像的 EXIF 元数据中嵌入了位置数据，这些数据可用于秘密推断其位置。

这仅在您从图库中*读取*数据时发生：如果您使用`saveLocation: "file"`参数[getImage](http://docs.trigger.io/en/v1.3/modules/file.html#getimage)，则不会提示用户提供位置权限。

`file.getImage`在任何一种情况下，都应该使用文件对象调用成功回调（除非用户完全取消了图像捕获）：只有当您开始**使用**文件时，才可能需要位置权限。

# ruby-on-rails - 扩展 activerecord 模型：是否可以编写新方法以及如何编写？（计算更多 activerecord 条目的平均值）

> ID：10440669
> 
> 赞同：0
> 
> 时间：2012-05-03T23:18:43.417
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord, ruby-on-rails-3.1

我在我的 Result 模型中有一些测试的结果，这些测试具有：measurement_id、：test_id、：player_id、：no、：res 其中 no 是测试次数（比如说 1-first、2-second 等）并且 :res 是 resault那个测试。

现在我想写一个方法来做这样的事情：

结果.where(:measurement_id=xx, :test_id=zz, :player_id=yy).finalresault

finalresault 将查找表中的所有 :res 并计算让我们说平均值并返回它。

有可能这样做吗？

谢谢你

这是模型的样子，我试图写一些东西......：

```
 class Result < ActiveRecord::Base
      attr_accessible :measurement_id, :test_id, :player_id, :no, :res
      belongs_to :test 

      def finalresault

      end  

    end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T01:10:12.290

我认为您正在寻找的更像是这样的：

```
class Result < ActiveRecord::Base
  attr_accessible :measurement_id, :test_id, :player_id, :no, :res
  belongs_to :test 

  class << self
     def finalresault
       Result.where(:measurement_id=xx, :test_id=zz, :player_id=yy).each do |result|
         # tally up your result.res here (or whatever calculation you want)
       end
       # ...finish the calculation and return it here
     end
  end
end 
```

您将能够在不实例化实例的情况下在类上调用此方法：

```
Result.finalresault 
```

# c# - 查找图像中的透明区域

> ID：10440681
> 
> 赞同：0
> 
> 时间：2012-05-03T23:20:22.127
> 
> 标签：c#, image-processing

我正在编写一个 CSS 精灵表生成器。我知道那里有几个不错的项目，但这更像是一个个人兴趣项目。我现在有一个不错的算法，但是由于我计算下一个要打包的图像的位置的方式，我最终得到了很多剩余的空白。所以我的想法是这样的：

给定 C# 中的图像 A 和 B，我怎样才能找到图像 A 中最左上角的透明区域以容纳图像 B 的区域？换句话说，假设图像 B 是 10x10 图像，我怎么能找到图像 A 中的第一个 10x10 透明区域（假设有一个）？

# svn - SVN的原因和解决方案：无法向服务器验证：拒绝基本挑战？

> ID：10440685
> 
> 赞同：24
> 
> 时间：2012-05-03T23:20:42.910
> 
> 标签：svn, authentication, version-control, basic-authentication

如果你在网上搜索，你会看到很多人问这个问题，但没有明确的答案。这是我的特殊情况。

我在 Mac 上使用 Versions SVN 客户端，但在使用命令行时遇到了同样的问题。我有其他人的回购的个人回购凭证，它正在我的一台机器上工作，我在 6 个月前设置它。

我将我的 .ssh 文件夹从我的用户目录复制到另一台机器上，在该机器上安装了版本，并通过登录凭据进行设置，只是它失败并显示以下消息：

> 授权失败：无法对服务器进行身份验证：拒绝基本质询

存储库的 URL 使用 https，但我删除了“s”并尝试了不安全的相同问题。然后我从另一台计算机上删除了我的 .ssh 文件夹，同样的问题。有人说这个错误与 SVN 尝试使用基本身份验证（http）并失败有关。这对我没有多大帮助，因为我不知道该怎么做才能解决它。我的登录凭据很好，但此错误消息可能是我处理过的描述性最低且写得最差的消息之一。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-06T10:09:09.840

> ```
>  authorization failed: Could not authenticate to server: rejected Basic
>  challenge 
> ```

您收到的错误意味着 SVN 服务器（实际上是 Apache HTTP 服务器）由于凭据无效而拒绝对您进行身份验证。以下是解决错误的步骤：

*   **你收到密码提示了吗？你是不是连续3次提示密码，然后看到这个错误？**

    如果您这样做：第一个故障排除步骤是仔细检查输入的用户名和密码是否正确。用户名可以区分大小写！

    第二个故障排除步骤不像上一个那么明显；您可以在更改您的 AD 帐户密码后遇到问题。当密码包含非 ASCII 符号（例如 £、ü、ä 等）时，基本身份验证失败。简而言之，基本身份验证不支持密码中的非 ASCII 字符。

*   **您没有收到密码提示，它只是失败并出现错误`authorization failed: Could not authenticate to server: rejected Basic challenge`**。

    尝试强制您的凭据进行身份验证是有意义的，例如使用命令行：

    `svn info --username USERNAME --password PASSWORD --no-auth-cache https://server/svn/repository/`

    > --username ARG : 指定用户名 ARG
    > 
    > --password ARG : 指定密码 ARG
    > 
    > --no-auth-cache ：不缓存身份验证令牌

    如果您可以使用此命令行成功进行身份验证，则应清除缓存的凭据。见[SVNBook | 客户凭证](http://svnbook.red-bean.com/en/1.8/svn.serverconfig.netmodel.html#svn.serverconfig.netmodel.creds)以获取详细信息。但是，某些 GUI 客户端允许您单击几下即可清除缓存。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-18T17:58:13.603

就我而言，这是 gnome 密钥环的问题。我完全删除了（rm ..gnome2/keyrings/ [for Debian] 中的所有文件）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-14T15:53:39.990

我注意到的一件事是，如果我在从 svn 导入时在 SVN 工作复制格式弹出窗口中选择 1.6 版本，那么它不允许我结帐并抛出上述错误。如果我选择 1.7 版本结帐工作正常。

我正在使用 IntelijIdea 13.1.5

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2015-07-30T20:32:42.473

最好只使用 SVN 将中继复制到标签

```
svn cp http://plugins.svn.wordpress.org/xxx/trunk http://plugins.svn.wordpress.org/xxx/tags/1.0 -m "tagging 1.0" 
```

如果您对 git svn 标签有问题，那应该可以正常工作。

# java - gwt 可以与 java 以外的其他语言一起使用吗？

> ID：10440686
> 
> 赞同：0
> 
> 时间：2012-05-03T23:20:48.103
> 
> 标签：java, frameworks, toolkit

我打算学习gwt，但经过一些介绍后，它似乎与java紧密结合。（人们说它已经死了）

gwt 可以与 c 或 php 等语言结合使用吗？还是其他语言？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T23:28:55.343

根据维基百科，是的。它已被移植到 python 和 ruby​​。

[http://en.wikipedia.org/wiki/Google_Web_Toolkit](http://en.wikipedia.org/wiki/Google_Web_Toolkit)

# sql - MySQL 语法 LIMIT x, y 的 T-SQL 等价物是什么？

> ID：10440688
> 
> 赞同：20
> 
> 时间：2012-05-03T23:20:49.423
> 
> 标签：sql, sql-server, database, tsql

> **可能重复：**
> [如何在 SQL Server 中编写（MySQL）“LIMIT”？](https://stackoverflow.com/questions/10440057/how-to-write-a-mysql-limit-in-sql-server)

如何使用 LIMIT Inside 为 SQL-Server 更改我的查询？

代码：

```
SELECT apretiz FROM tableApoint WHERE price = '$newprice' LIMIT 5; 
```

很多事情都不起作用，所以只是寻求帮助

以及如何通过示例更改 LIMIT 5,10 ？我不能用 TOP 吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-03T23:59:55.693

从 SQL Server 2012 开始，您可以编写

```
...
ORDER BY thisColumn, thatColumn
OFFSET 5 ROWS FETCH NEXT 5 ROWS ONLY 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-05-03T23:22:58.207

正如我不到一小时前所说，您必须使用 TOP ！(LIMIT 用于 MYSQL)

所以尝试删除`LIMIT 5`并执行`SELECT TOP(5) apretiz`.

另外，尝试添加顺序（与以前相同的原因）。

请在询问之前进行搜索。[链接到旧问题](https://stackoverflow.com/questions/10440057/sql-server-how-to-change-mysql-limit/10440085#10440085)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-03T23:25:24.113

使用`TOP`关键字：

```
 SELECT TOP 5 pretiz 
 FROM tableApoint WHERE price = '$newprice' 
```

使用 LIMIT 5、10 不是 SQL 标准的一部分，仅在 MySQL 中可用。

您可以将`ROW_NUMBER()`for SQL 用作临时解决方案，并将获得相同的所需输出。

```
SELECT * FROM ( 
  SELECT *, ROW_NUMBER() OVER (ORDER BY name) as row FROM tableApoint 
) a WHERE row >= 5 and row <= 10 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-03T23:34:45.167

# SQL Server 2005 及更高版本

如果您使用的是 SQL Server 2005 及更高版本，则可以使用`ROW_NUMBER`函数为行分配唯一编号，然后从输出中选择值的范围。

*脚本*：

```
CREATE TABLE table1
(
    textvalue VARCHAR(10) NOT NULL
);

INSERT INTO table1 (textvalue) VALUES
   ('i'),
   ('a'),
   ('e'),
   ('h'),
   ('c'),
   ('l'),
   ('g'),
   ('m'),
   ('d'),
   ('k'),
   ('j'),
   ('f'),
   ('b'),
   ('n');

;WITH letters as
(
    SELECT  textvalue
        ,   ROW_NUMBER() OVER(ORDER BY textvalue) rownum 
    FROM    table1
)
SELECT  textvalue
FROM    letters
WHERE   rownum  BETWEEN 6 AND 10; 
```

*输出*：

```
TEXTVALUE
---------
    f
    g
    h
    i
    j 
```

# spotify - Libstpotify API - 如何使用单一登录过程连接到 Spotify 和 Facebook？

> ID：10440689
> 
> 赞同：0
> 
> 时间：2012-05-03T23:20:59.920
> 
> 标签：spotify

在我基于 libspotify 的应用程序中，我可以提示用户使用他的 (Facebook) 凭据进行**单次登录以****连接到 Spotify 和 Facebook**吗？

场景 #1 可能是：

*   我的基于 libspotify 的应用程序也是一个已注册的 Facebook 应用程序。
*   用户使用他的 Facebook 凭据授权并连接到我的应用程序。
*   感谢那个用户会话，我想连接到他的 Spotify 帐户这可能吗？

或者场景 #2 ......这违反了 oauth 安全性：

*   用户使用他的 facebook 凭据连接到我的基于 libspotify 的应用程序（有效）
*   该应用程序以某种方式**- 如何？-**获取 Facebook 会话令牌
*   该应用程序使用这些令牌来访问授权的 facebook 信息，例如用户的朋友听什么等等。
*   该应用程序使用这些令牌需要更多权限吗？

还是有更好的方案让我可以实现这个单一的唱入过程？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T08:36:48.323

libSpotify 无法实现此登录流程 - 用户必须使用用户名或密码登录，无论是 Spotify 还是 Facebook 帐户，一旦登录，您就无法从 libSpotify 中提取 Facebook auth token。

# http - 使用 Http 代理与 https 代理的优缺点？

> ID：10440690
> 
> 赞同：12
> 
> 时间：2012-05-03T23:21:00.740
> 
> 标签：http, https, proxy

JVM 允许使用代理属性 http.proxyHost 和 http.proxyPort 来指定 HTTP 代理服务器，并允许使用 https.proxyHost 和 https.proxyPort 来指定 HTTPS 代理服务器。

我想知道与 HTTP 代理服务器相比，使用 HTTPS 代理服务器是否有任何优势？

通过 HTTPS 代理访问 https url 是否比通过 HTTP 代理访问更方便？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-05-04T04:35:02.727

HTTP 代理收到一个纯文本请求，并且 [在大多数但不是所有情况下] 向远程服务器发送不同的 HTTP 请求，然后将信息返回给客户端。

HTTPS 代理是一个中继器，它接收特殊的 HTTP 请求（CONNECT 动词）并建立一个到目标服务器（甚至不一定是 HTTPS 服务器）的不透明隧道。然后客户端向服务器发送 SSL/TLS 请求，他们继续进行 SSL 握手，然后使用 HTTPS（如果请求）。

如您所见，这是两种完全不同的代理类型，具有不同的行为和不同的设计目标。HTTPS 代理无法缓存任何内容，因为它看不到发送到服务器的请求。使用 HTTPS 代理，您有一个通往服务器的通道，客户端接收并验证服务器的证书（反之亦然）。另一方面，HTTP 代理可以查看并控制它从客户端收到的请求。

虽然可以通过 HTTP 代理发送 HTTPS 请求，但这几乎永远不会完成，因为在这种情况下，代理将验证服务器的证书，但客户端将能够接收和验证仅代理的证书，并且代理证书中的名称将不匹配套接字连接的地址，在大多数情况下会发出警报并且 SSL 握手不会成功（我不会详细说明如何尝试解决这个问题）。

最后，由于 HTTP 代理可以查看请求，这使 HTTPS 通道提供的安全性概念无效，因此对 HTTPS 请求使用 HTTP 代理通常仅用于调试目的（再次，我们省略了需要监控的偏执的公司安全策略的情况）公司员工的所有 HTTPS 流量）。

[另外：还在这里](https://stackoverflow.com/a/8612660/47961)阅读我对类似主题的回答。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2017-11-24T13:42:35.620

没有优点或缺点。并且没有“HTTPS 代理”服务器。

您可以告诉协议处理程序将哪个代理服务器用于不同的协议。这可以为`http`、`https`和`ftp`完成`socks`。不多也不少。

我无法告诉您是否应该为 https 连接使用不同的代理。这取决于。我只能解释对代理的 http 和 https 请求的区别。

由于*HTTP 代理*（或 Web 代理）可以理解`HTTP`（因此得名），因此客户端可以将请求发送到代理服务器而不是实际的目标。这*不适*用于`HTTPS`. 这是因为代理无法进行最初发生的 TLS 握手。因此客户端必须向代理发送`CONNECT`请求。代理建立 TCP 连接，只是在不接触它们的情况下来回发送包。因此 TLS 握手发生在客户端和目标之间。HTTP 代理服务器看*不到*所有内容，也*不会*验证目标服务器证书。

这整个 http、https、代理可能会有些混乱。可以使用 https 连接*到*HTTP 代理。在这种情况下，客户端和*代理*之间的通信是加密的。

还有所谓`TLS terminating`的`interception`代理服务器，例如[Squid 的 SSL Peek and Splice](https://wiki.squid-cache.org/Features/SslPeekAndSplice)或[burp](https://portswigger.net/burp/help/proxy_option)，它们可以*查看所有内容*。但这不应该开箱即用，因为代理使用自己的证书，这些证书不是由受信任的 CA 签名的。

### 参考

*   [https://docs.oracle.com/javase/8/docs/technotes/guides/net/proxies.html](https://docs.oracle.com/javase/8/docs/technotes/guides/net/proxies.html)
*   [https://parsiya.net/blog/2016-07-28-thick-client-proxying---part-6-how-https-proxies-work/](https://parsiya.net/blog/2016-07-28-thick-client-proxying---part-6-how-https-proxies-work/)
*   [http://dev.chromium.org/developers/design-documents/secure-web-proxy](http://dev.chromium.org/developers/design-documents/secure-web-proxy)
*   [https://www.rfc-editor.org/rfc/rfc2817#section-5](https://www.rfc-editor.org/rfc/rfc2817#section-5)
*   [https://www.rfc-editor.org/rfc/rfc7231#section-4.3.6](https://www.rfc-editor.org/rfc/rfc7231#section-4.3.6)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-07-12T03:37:18.730

如果您的意思是通过**HTTPS 代理****通过 TLS 连接到 HTTP 代理服务器**，那么

 **> 我想知道与 HTTP 代理服务器相比，使用 HTTPS 代理服务器是否有任何优势？

优点是您的客户端与代理服务器的连接是加密的。例如，防火墙无法看到您使用`CONNECT`方法连接到的主机。

> 通过 HTTPS 代理访问 https url 是否比通过 HTTP 代理访问更方便？

除了使用 HTTPS 代理，浏览器到代理服务器的连接是加密的之外，一切都相同。

但是你需要在你的代理服务器上部署一个证书，就像 https 网站一样，并使用一个`pac`文件来配置浏览器以启用**通过 SSL 连接到代理**。

有关更多详细信息和实际示例，请在此处查看我的问题和答案[HTTPS 代理服务器仅适用于 SwitchOmega](https://stackoverflow.com/questions/56981993/https-proxy-server-only-works-in-switchomega)**

# eclipse - 不能添加luaeclipse

> ID：10440695
> 
> 赞同：4
> 
> 时间：2012-05-03T23:21:35.723
> 
> 标签：eclipse, eclipse-plugin, lua, coronasdk

我无法使用以下链接将 lua 插件添加到 eclipse 中：

“http://luaeclipse.luaforge.net/update-site/site.xml”

当我将此链接输入“帮助”->“安装新软件”时，它显示“找不到”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T04:15:48.373

这对我有用。尝试改用此更新站点：

```
http://luaeclipse.luaforge.net/update-site/ 
```

但更有可能的是，您位于防火墙后面。如果是这样，您需要在首选项 -> 常规 -> 网络首选项中设置代理。

# plone - pylinting zopeish 文件：F0401：11,0：无法导入“zope.interface”

> ID：10440696
> 
> 赞同：4
> 
> 时间：2012-05-03T23:21:43.190
> 
> 标签：plone, zope, pylint

我正在尝试针对 Zope 导入污染的源代码运行 pylint：

```
************* Module youraddon.interfaces
F0401: 11,0: Unable to import 'zope.interface' 
```

问题中的代码：

```
from zope.interface import Interface 
```

并且 zope.interface 鸡蛋在 sys.path 中传递给 pylint 作为鸡蛋：

```
cat ../../bin/pylint|grep -i interface
'/fast/buildout-cache/eggs/zope.interface-3.6.7-py2.6-macosx-10.6-i386.egg', 
```

现在的问题是

*   我可以以它理解的方式制作 pylint import zope.interface 吗？为什么它实际上失败了？

*   如果没有，我怎样才能抑制导入警告并将文件的其余部分正常处理？

还得到：

```
 # E0611: 11,0: No name 'interface' in module 'zope' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T06:54:53.130

您可以禁用特定的 Pylint 错误消息：

1) 在命令行上使用 --disable 选项

```
$ pylint --disable=F0401 youraddon.py 
```

2）在文件中添加特定的注释

```
#pylint: disable=F0401 
```

[http://www.logilab.org/card/pylint_manual](http://www.logilab.org/card/pylint_manual)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T22:58:06.247

我不会在全局范围内安装 pylint，而是将它与您正在安装项目的 buildout 一起安装（假设您正在使用 buildout）。然后将实例鸡蛋添加到 pylint 部分。

像这样的东西：

```
[buildout]
parts =
  instance
  pylint

[instance]
...
eggs =
  your.addon
  ...

[pylint]
recipe = zc.recipe.egg
entry-points = pylint=pylint.lint:Run
eggs =
  pylint
  ${instance:eggs} 
```

一个更复杂的例子：[https ://github.com/4teamwork/ftw-buildouts/blob/master/test-base.cfg#L163](https://github.com/4teamwork/ftw-buildouts/blob/master/test-base.cfg#L163)

干杯

# python - 为什么这个 suds 脚本返回 urlopen 错误 [Errno -2] Name or service not known？

> ID：10440697
> 
> 赞同：0
> 
> 时间：2012-05-03T23:21:45.620
> 
> 标签：python, suds

对 Python 来说还是很新的。我有一个类似于[这个问题的问题](https://stackoverflow.com/questions/9371052/python-suds-urlerror-name-or-service-not-known-issue)。我的脚本正在尝试连接在消息上使用 wsse 并使用 HTTPS 配置的 Web 服务。我必须使用未经身份验证的代理。我使用 suds 使用服务如下：

```
import logging
import suds
import urllib2
from suds.client import Client
from suds.transport.https import HttpAuthenticated

#---These are not real values but represent them.---------
SERVICE_URL = 'https://service.com/1/soap'
SERVICE_USR = 'serviceusr'
SERVICE_PWD = 'servicepwd'
WSDL_URL = 'file:///folder/a.wsdl'
PROXY_NAME = 'proxy'
PROXY_PORT = 80
#----------------------------------------------------------

logging.basicConfig(level = logging.DEBUG)
logging.getLogger('suds.client').setLevel(logging.DEBUG)
logging.getLogger('suds.transport').setLevel(logging.DEBUG)

proxy_info = {'host': PROXY_NAME,'port': PROXY_PORT}
proxyHandler = urllib2.ProxyHandler({'https':'https://(host)s:%(port)d/' % proxy_info})
opener = urllib2.build_opener(proxyHandler)
urllib2.install_opener(opener)
security = suds.wsse.Security()
token = suds.wsse.UsernameToken(SERVICE_USR, SERVICE_PWD)
security.tokens.append(token)
messageTransport = HttpAuthenticated(username = SERVICE_USR, password = SERVICE_PWD)
messageTransport.urlopner = opener
client = Client(url = WSDL_URL, location = SERVICE_URL, transport = messageTransport)
client.set_options(wsse=security)
result = client.service.ParseValidAddress('1 ABC Street Somwhere') 
```

脚本运行后，我收到以下错误：

```
Error details: <class 'urllib2.URLError'> <urlopen error [Errno -2] Name or service not 
known> 
```

所以我运行 curl 来检查所有网络位是否工作如下：

```
curl -x proxy:80 https://service1.com/1/soap 
```

这将返回一个 SOAP 消息，指示网络配置和代理设置正确。那么为什么肥皂水不这样做呢？我哪里失败了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T23:35:27.013

应该是

```
proxyHandler = urllib2.ProxyHandler({'https':'https://%(host)s:%(port)d/' % proxy_info}) 
```

（注意“https”和“%”末尾的“s”）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T00:15:49.573

成功！我做了以下，它的工作。在客户端添加`proxySettings = {'https':'http://{0}:{1}'.format(PROXY_NAME, PROXY_PORT)}`然后设置选项`client.set_options(proxy = proxySettings)`。感谢大家的帮助。

# php - 使用 fwrite() 时 PHP 自动转义引号

> ID：10440698
> 
> 赞同：1
> 
> 时间：2012-05-03T23:21:58.860
> 
> 标签：php, file, escaping, quotes, fwrite

PHP 在使用 fwrite 写入文件之前会自动转义我的引号。我正在尝试制作一个测试代码页。这是我的代码：

```
<?php
if ($_GET['test'] == 'true') {
$code = $_POST['code'];
$file = fopen('testcode.inc.php', 'w+');
fwrite($file, $code);
fclose($file);
require_once('testcode.inc.php');
}
else {
echo "
<form method='post' action='testcode.php?test=true'>
<textarea name='code' id='code'></textarea><br><br>
<button type='submit'>Test!</button><br>
</form>
";
}
?> 
```

当我在表格中输入以下内容时：

```
<?php
echo 'test';
?> 
```

它在文件中保存为：

```
<?php
echo \'test\';
?> 
```

为什么 php 会自动转义我的引号？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T23:24:52.250

这不是**fwrite**，它的**$_POST**

有了这些知识，请在这里找到你的答案：

*   [为什么 $_POST 变量在 PHP 中被转义？](https://stackoverflow.com/questions/2496455/why-are-post-variables-getting-escaped-in-php)

所以你要做的只是小修复：

```
if (get_magic_quotes_gpc()) {
  $code = stripslashes($_POST['code']);
}else{
  $code = $_POST['code'];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T23:24:44.687

它不是 fwrite 这样做的，因为你启用了[magic_quotes 。](http://php.net/manual/en/security.magicquotes.php)

如果你不能在你的 php.ini 文件中禁用魔术引号，那么你可以在运行时禁用它，一个简单的 PHP 将遍历你所有的输入数组并去掉不需要的斜杠，那么你就不需要担心哪个 POST/GET键剥离。[禁用魔术行情](http://php.net/manual/en/security.magicquotes.disabling.php)

```
<?php
if (get_magic_quotes_gpc()) {
    function stripslashes_gpc(&$value)
    {
        $value = stripslashes($value);
    }
    array_walk_recursive($_GET, 'stripslashes_gpc');
    array_walk_recursive($_POST, 'stripslashes_gpc');
    array_walk_recursive($_COOKIE, 'stripslashes_gpc');
    array_walk_recursive($_REQUEST, 'stripslashes_gpc');
}
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T23:25:15.333

[http://php.net/manual/en/security.magicquotes.php](http://php.net/manual/en/security.magicquotes.php)

[http://www.php.net/manual/en/security.magicquotes.disabling.php](http://www.php.net/manual/en/security.magicquotes.disabling.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T23:25:43.087

您启用了魔术引号。`php.ini`在您的文件中禁用它们( `magic_quotes_gpc=off`) 或通过您`$_POST['code']`的[`stripslashes`](http://php.net/stripslashes).

# ruby-on-rails - 没有模型的导轨形式

> ID：10440705
> 
> 赞同：2
> 
> 时间：2012-05-03T23:23:24.117
> 
> 标签：ruby-on-rails, forms, rails-routing

我正在制作一个超级简单的应用程序，它本质上只是一个控制器和一些视图。我不知道如何使表单提交然后重定向到另一个动作。

这是我的代码：

```
# app/controllers/wizard_controller.rb

class WizardController < ApplicationController
  def calculate

    # process data from form here

    redirect_to controller: 'wizard', action: 'show'
  end

  def show
    # print processed data here
  end
end 
```

这是`wizard#calculate`视图的样子：

```
<div class="alert alert-info">
    <h2>Get advice on where to live in 3 easy steps!</h2>
</div>

<br/>

<%= form_tag(:controller => "wizard", :action => "calculate") do %>

 ... form fields ...

<%= submit_tag("Submit") %>

<% end %> 
```

此时，由于该行之前没有条件语句，因此将立即`/wizard/calculate`重定向到。`/wizard/show``redirect_to ...`

**编辑：使用 twitter 上的响应解决** 我基本上是在尝试获取表单数据并在同一个操作中处理它们。我通过拆分`calculate`为`setup`具有表单的视图以及`calculate`我处理数据并重定向到的位置来解决此问题`show`。

此外，`<%= form_tag "/wizard/calculate", method: "get" do %>`帮助准确提交表单数据。

感谢您的所有回复，这对了解它在 Rails 中的工作方式有很大帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T23:57:12.403

我不确定你的问题是什么。在你必须`#process form data here`做好的地方，处理表单数据。

如果您没有模型，您可以通过 访问发布的值`params`。例如，如果您的表单上有一个名为 address 的字段，您将使用它`params[:address]`来访问控制器中的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T02:12:08.660

听起来你的路线没有设置。

在 config/routes.rb

```
match '/wizard/calculate' => 'wizard#calculate'
match '/wizard/show' => 'wizard#show' 
```

有更优雅的方法来设置路线，但这应该适用于您的超级简单的应用程序。

否则，您的控制器和表单都可以。

# jquery - 搜索和替换具有相同名称的所有文本实例

> ID：10440709
> 
> 赞同：3
> 
> 时间：2012-05-03T23:23:58.327
> 
> 标签：jquery

我正在尝试搜索和替换正文中具有相同名称的文本，但它是部分工作，一些文本正在被替换，但一些旧文本仍然出现，不太确定发生了什么上。

```
$(document).ready(function() {
    $('*').each(function(){
        if($(this).children().length == 0) 
            $(this).text($(this).text().replace("old text", "replace with new text"));
        });
}); 
```

非常感谢您的帮助

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T23:32:38.997

使用`:contains`伪类选择器查找包含该文本的任何元素，然后从那里替换。

```
$(":contains('old text')").each(function(){
    $(this).text($(this).text().replace('old text', 'new text'));
}); 
```

如果您知道要定位的元素列表，另一种解决方案是首先找到这些元素，然后使用 :contains 过滤它们。

```
$('div, p, a, span').filter(":contains('old text')").each(function(){
    $(this).text($(this).text().replace('old text', 'new text'));
}); 
```

# c# - 在 WPF 中将事件绑定到属性，反之亦然

> ID：10440724
> 
> 赞同：2
> 
> 时间：2012-05-03T23:26:04.313
> 
> 标签：c#, wpf, binding

我对绑定和 WPF 相当陌生，但我已经能够用绑定做一些有趣的事情（至少对我来说很有趣）

有谁知道是否可以将事件（例如 SelectionChanged o Click 事件等）绑定到属性（例如：IsChecked、IsEnabled 等）？

我知道我可以将属性与 Path 属性和所有属性绑定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T23:30:20.673

如果您想将事件绑定到命令，您可以通过附加行为来完成。看看[这个博客](http://www.danharman.net/2011/08/05/binding-wpf-events-to-mvvm-viewmodel-commands/)，了解如何使用 MVVM Light 做到这一点。绑定到`IsEnabled`没有多大意义

他们给出的一个例子是：

```
<Button>
    <i:Interaction.Triggers>
        <i:EventTrigger EventName="Click" >
            <i:InvokeCommandAction Command="{Binding FooCommand}" />
        </i:EventTrigger>
    </i:Interaction.Triggers> 
```

在视图模型中

```
public MyViewModel()
{
    //set it as a toggle for example
    FooCommand = new RelayCommand( () => IsChecked = !IsChecked );
 }    

public ICommand FooCommand { get; private set; }

public bool  IsChecked
{
   get { return _isChecked; }
   set { _isChecked = value;
        RaisePropertyChanged("IsChecked"); }
} 
```

# php - 用mysql搜索最近的数据，用solr全文搜索旧数据

> ID：10440726
> 
> 赞同：0
> 
> 时间：2012-05-03T23:26:06.617
> 
> 标签：php, mysql, solr

我在 php 和 mysql 中构建了一个 Web 应用程序。我想搜索对 3-4 表进行全文搜索的数据。我正在考虑它的 lucene solr 项目。

我的问题是：将今天的数据保存在单独的 mysql 表中是否正确，然后它只对今天的数据进行简单搜索，如果找到任何内容，它会尝试在 lucene 上查询全文搜索但在旧数据中（从昨天到过去的） ？

我的网络应用程序将数据保存在 mysql 中，但我希望该用户可以对该数据进行全文搜索。我可以运行 4 次每天将数据从 msql 导入到 lucene solr 的工作，但是如果用户更改了 mysql 上的数据并且 solr 还没有开始导入和索引数据，那么用户无论如何都应该能够搜索和查看最近的修改后的数据。

将 lucene solr 与 mysql 和 php 集成的最佳方法是什么？

是否可以向 solr ftom php 发送修改命令以更新用户更改的数据，但只有在 mysql 事务顺利完成时才确保在 solr 上提交数据，所以最后我已经在 mysql 中提交数据并在 lucene 中提交数据，如果有的话在 mysql 和 solr 中 Web 应用程序回滚时出错？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T17:16:53.370

您可能会遇到不一致的搜索结果，其中一些点击来自 MySql，而另一些来自 Solr。

想一想：

1.  在 MySQL 中进行所有全文搜索
2.  在 Solr 中进行所有全文搜索

实施 Solr 意味着在 MySQL->Solr 和额外的基础设施之间保持数据同步。

看看你是否可以通过使用 MySQL 的`FULLTEXT`索引和`MATCH() AGAINST()`查询子句来做你需要的事情。它将使您的应用程序更简单。

[http://dev.mysql.com/doc/refman/5.6/en/fulltext-search.html](http://dev.mysql.com/doc/refman/5.6/en/fulltext-search.html "MySQL - 全文搜索功能")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T23:33:45.980

如果您正在考虑实现 Lucene，表的数量并不重要。按照最好的方法，我会说实现 Zend 的[Zend Search Lucene](http://framework.zend.com/manual/en/zend.search.lucene.html)。

像 lucene 库一样[`Zend Search Lucene`](http://framework.zend.com/manual/en/zend.search.lucene.html)，有自己的数据标记和搜索机制。他们基本上从数据库中获取数据，从中构建搜索文件并分别存储它们，如果出现问题，则只需*重建搜索*即可。

关于在数据库更新时更新 Lucene 数据的可能性，完全取决于您实施的解决方案。[`Zend Search Lucene`](http://framework.zend.com/manual/en/zend.search.lucene.html)另一方面，可以做到。

# ios - ios shareApplication rootviewcontroller.frame Y轴触发器

> ID：10440727
> 
> 赞同：0
> 
> 时间：2012-05-03T23:26:20.597
> 
> 标签：ios, uiapplication, cgrect, keywindow

我有一个 iPad 应用程序，每次显示*软*键盘时，我都会将应用程序的框架“向上”移动。

```
[UIApplication sharedApplication].keyWindow.rootViewController.view.frame = CGRectMake(0, 150, 1024, 768); 
```

*关键*是，在某些设备上这是正确的方式**，**但在其他设备上，它的方向与我想要的**相反。**它似乎不是特定于硬件的，甚至不是特定于软件的。我已经在 4 台 iPad（两台 ipad1、两台 ipad3 和一台 ipad2）上进行了尝试，全部使用 ios 5.1 (9B176)。有没有办法知道这是否会在设备上发生，以便我可以用逻辑来解决这个问题？

此外，似乎打算这样做的设备也会这样做并保持这种状态（反之亦然）。一旦发生，无论软件更新、设备重启、应用程序删除或 IPA 与从 xcode 运行的情况如何，它总是会发生或不发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T00:01:55.040

您正在设置视图的框架 - 但框架坐标需要相对于视图的超级视图（在本例中为 keyWindow），而不是自身。由于窗口从不旋转，因此您的框架坐标将被不同地解释，具体取决于设备的当前方向。

您可以执行以下操作将框架坐标转换为适合 keyWindow 的坐标：

```
CGRect newFrame = [self.view convertRect:CGRectMake(0, 150, 1024, 768) toView:[UIApplication sharedApplication].keyWindow];
[UIApplication sharedApplication].keyWindow.rootViewController.view.frame = newFrame; 
```

# ios - ios uitableview uitableviewcell 复用有旧数据

> ID：10440728
> 
> 赞同：7
> 
> 时间：2012-05-03T23:26:26.980
> 
> 标签：ios, uitableview, scroll

我们都知道 uitableview 中的单元格可以重新使用，但我看到了一些奇怪的结果。我正在创建一个自定义单元格，每个单元格有 4 列，每列有一个图像，所以格式是这样的 |img|img|img|img| 返回单元格后，我正在配置每个单元格，例如将第一列配置为图片 1，然后将第二列配置为不同的图片

现在只是假设我一次只能在表格视图中显示两行：

```
|a0|a1|a2 |a3 |
|b4|b5|b6 |b7 |
------cell c not visible to user------
|c8|c9|c10|c11| 
```

当用户向下滚动时，上面的“a”列（a0-a3）将变得不可见，据我所知，单元格变得不可见将被重新用于列 c

上面的例子工作正常，如果我可以完全占据每个单元格/行，即我总共有 12 张图片。

但是如果我说 10 张图片（最后一行将只填充 2 张，另外两张是空的，如下所示：

```
|a0|a1|a2 |a3 |
|b4|b5|b6 |b7 |
------row/cell 'c' not visible to user------
|c8|c9|empty|empty| 
```

但是，问题出现了，当我向上滚动查看单元格/行“c”时，我看到了以下图片：

```
|a0|a1|a2 |a3 |
------row/cell 'a' not visible to user------
|b4|b5|b6 |b7 |
|c8|c9|a2|a3| 
```

请注意，行/单元格 c 的最后两列应该为空，但显示的是 a2 和 a3

我怎样才能解决这个问题？我正在考虑手动执行此操作的方法，即通过检查是否应在重用时删除不必要的视图等，但可能更复杂，是否有更系统的方法更容易和更清洁？

有没有办法让返回的单元格忘记它的内容，或者我必须自己这样做？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-03T23:44:42.850

你必须“自己做”。每当重用 UITableViewCell 时，它都会保留其先前的内容。如果您希望它被重置/清除，您必须手动执行此操作。

在您的 custom`UITableViewCell`中，您可以覆盖[`prepareForReuse`](https://developer.apple.com/library/ios/documentation/uikit/reference/UITableViewCell_Class/Reference/Reference.html#//apple_ref/occ/instm/UITableViewCell/prepareForReuse)和重置您想要的任何内容，或者在设置新内容时执行此操作。

在您的情况下，将 UIImageView 的`image`属性设置为`nil`所有四列应该有效。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-03T23:48:21.593

我最近有一个类似的问题。在子类化 tableview 单元格修复它之后覆盖 prepareForReuse。[从这里](https://stackoverflow.com/questions/9592703/labels-are-lingering-in-my-reusable-table-cells/9592750#comment12603441_9592750)得到答案

# c# - 如何在 JSON.NET 中禁用特殊属性或正确处理它们

> ID：10440730
> 
> 赞同：1
> 
> 时间：2012-05-03T23:27:22.687
> 
> 标签：c#, javascript, json, serialization, json.net

我将 JSON.NET 序列化程序与 Entity Framework 一起使用，并且遇到了这样一种情况，即输出的 JSON 包含这些“特殊属性”，例如`$id`和`$ref`. 根据我的阅读，纯 JSON 使用这些属性来压缩输出的 JSON，这样重复的元素就不必被写入两次。

因此，输出的 JSON 是这样的：

```
 var myArray = [
     {
         "ActiveStates": [
             {
                 "$id": "1",
                 "StateID": "CA",
                 "Name": "California"
             },
             {
                 "$id": "2",
                 "StateID": "NV",
                 "Name": "Nevada"
             }
         ],
         "DefaultState": {
             "$ref": "1"
         }
     }
 ]; 
```

使用 Javascript，我如何使用`$ref`from DefaultState 和`$id`from AvailableStates 返回`Name`of `California`？

我在想一些逻辑类似于`myArray.find(myArray.DefaultState.$ref).Name;`which may return的东西`California`。

希望这很容易。

**编辑：** 我也认为这是一个可以接受的答案来学习如何禁用这些“特殊属性”被呈现到数组中，即使这意味着由于重复的元素，输出的 JSON 会更长。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T18:29:56.403

我找到了解决问题的方法：[https ://stackoverflow.com/a/4992429/1322509](https://stackoverflow.com/a/4992429/1322509)

我正在使用上面页面链接中定义的下面定义的 getObjects 函数。

```
var myArray = [
    {
    "AvailableStates": [
        {
        "$id": "1",
        "CityID": "CA",
        "Name": "California"},
    {
        "$id": "2",
        "CityID": "NV",
        "Name": "Nevada"}
    ],
    "DefaultState": {
        "$ref": "1"
    }}
];

var stateName = getObjects(myArray, '$id', myArray[0].DefaultState.$ref)[0].Name;

function getObjects(obj, key, val) {
    var objects = [];
    for (var i in obj) {
        if (!obj.hasOwnProperty(i)) continue;
        if (typeof obj[i] == 'object') {
            objects = objects.concat(getObjects(obj[i], key, val));
        } else if (i == key && obj[key] == val) {
            objects.push(obj);
        }
    }
    return objects;
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T11:10:27.103

我设法在配置中禁用它（NewtonSerialiser）

```
public static class WebApiConfig
{
    public static void Register(HttpConfiguration config)
    {
        var json = config.Formatters.JsonFormatter;
        json.SerializerSettings.PreserveReferencesHandling = 
        Newtonsoft.Json.PreserveReferencesHandling.None;
    }
 } 
```

# vb.net - 如何在不打开word的情况下打印word文档

> ID：10440740
> 
> 赞同：1
> 
> 时间：2012-05-03T23:28:08.817
> 
> 标签：vb.net, printing, ms-word

我目前正在使用以下代码打印word文档

```
 Dim oWordApp As Word.Application
                Dim oTargetDoc As Word.Document
                oWordApp = New Word.Application

                Select Case Priority
                    Case 1
                        oWordApp.WordBasic.FilePrintSetup(Printer:=printPriority1, DoNotSetAsSysDefault:=1)
                    Case 2
                        oWordApp.WordBasic.FilePrintSetup(Printer:=printPriority2, DoNotSetAsSysDefault:=1)
                    Case 3
                        oWordApp.WordBasic.FilePrintSetup(Printer:=printPriority3, DoNotSetAsSysDefault:=1)
                    Case 4
                        oWordApp.WordBasic.FilePrintSetup(Printer:=printPriority4, DoNotSetAsSysDefault:=1)
                    Case 5
                        oWordApp.WordBasic.FilePrintSetup(Printer:=printPriority5, DoNotSetAsSysDefault:=1)
                End Select

                oTargetDoc = oWordApp.Documents.Open(DocumentName & ".doc")
                oWordApp.PrintOut()
                oWordApp.Documents.Close()
                oWordApp.Quit() 
```

但是我发现它与我们的共享打印机有问题，这个错误只发生在使用 word 打印时。使用 PDF（Adobe Reader）等进行打印自动化时效果很好。

我正在寻找的是 vb.net 中的一些代码，它允许我打印这些文档，并且我必须指定它使用的打印机。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T09:38:13.780

这是一个完整的功能程序：
感谢 josepaulino

```
Public Class Form1   
        Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
            Dim f As New OpenFileDialog
            Dim p As New PrintDialog
            Dim app As Word.Application
            Dim doc As Word.Document

            'Open file and print dialogs to get desired document and printer
            If f.ShowDialog = Windows.Forms.DialogResult.OK Then
                If p.ShowDialog = Windows.Forms.DialogResult.OK Then
                    'Create instance of Word Application
                    app = New Word.Application

                    'Set Printer
                    app.WordBasic.FilePrintSetup(Printer:=p.PrinterSettings.PrinterName, DoNotSetAsSysDefault:=1)

                    'Set filename to object type
                    Dim filename As Object = f.FileName
                    Dim m As Object = System.Reflection.Missing.Value

                    'Open document
                    doc = app.Documents.Open(filename, m, m, m, m, m, m, m, m, m, m, m)

                    'Print document
                    app.PrintOut()

                    'Close document
                    app.Documents.Close()

                    'Quit word application
                    app.Quit()

                    'Release 
                    app = Nothing
                End If
            End If
        End Sub
        Private Sub PrintWordDocument(ByVal strFilePath As String)

            ' Run Microsoft Word as COM-server
            On Error Resume Next
            Dim App As Word.Application
            Dim Doc As Object
            Dim p As New PrintDialog

            'Set Default printer
            Dim w = CreateObject("WScript.Network")
            w.SetDefaultPrinter(p.PrinterSettings.PrinterName)

            If p.ShowDialog = Windows.Forms.DialogResult.OK Then
                App = New Word.Application
                'App = CreateObject("Word.Application")

                ' Open document from file
                Doc = app.Documents.Open(strFilePath, , 1)

                If Doc = Not Nothing Then

                    ' Print all pages of the document
                    'App.ActivePrinter = p.PrinterSettings.PrinterName
                    Call app.PrintOut(False)

                    ' Close the document
                    Call Doc.Close()
                    Doc = Nothing

                End If
            End If

            ' Close Microsoft Word
            If App IsNot Nothing Then
                Call App.Quit()
            End If
            App = Nothing

        End Sub
    End Class 
```

# php - 无法理解 php/mysql 中返回的 0 行

> ID：10440741
> 
> 赞同：2
> 
> 时间：2012-05-03T23:28:16.197
> 
> 标签：php, mysql, pdo

我正在使用这种方法来获取 SELECT 语句的行数，但是对于 LIMIT 语句它不能正常工作，所以我添加了代码来从 sql 字符串中删除 LIMIT，但现在它根本不起作用！

当我开始使用`LIMIT X, X`末尾带有 a 的查询时，我必须在顶部添加部分以从查询中删除该部分，因为此方法仅返回一列 -`count`但 LIMIT 偏移量将导致它不返回任何内容。

```
function dbRowsCount($sql, $data) {

    # removes "LIMIT X,X" from query
    $no_limit_sql = $sql;
    $pos = stripos($sql, " LIMIT");
    if ($pos!==false) {
        $no_limit_sql = substr($sql, 0, $pos).";";
        # logErrors("original sql=".$sql);
        # logErrors("pos=".$pos."<br>new sql=".$no_limit_sql);
    }

    # query SELECT COUNT(*) instead of SELECT...
    # returns row-count
    $regex = '/^SELECT\s+(?:ALL\s+|DISTINCT\s+)?(?:.*?)\s+FROM\s+(.*)$/is';     
    if (preg_match($regex, $no_limit_sql, $output) > 0) {
        dbQuery("SELECT COUNT(*) AS count FROM {$output[1]}", $data);
        $result = dbFetch();
        $last_rowcount = (int)$result["count"];
        if ($pos!==false) {
            # logErrors("after regex="."SELECT COUNT(*) AS count FROM {$output[1]}");
            # logErrors("row count=".$last_rowcount);
        }
        return $last_rowcount;
    } else {
        # logErrors("Oops! There was an error:<br>Regex did not match SQL.");
        return -1;
    }
} 
```

这直接放入 MySQL 给出 count=8：

```
SELECT COUNT(*) AS count FROM tbl_product WHERE 1 ORDER BY last_update DESC; 
```

该`dbRowsCount($sql, $data)`方法的输出显示此查询应该以相同的方式结束：

> 原始 sql=SELECT * FROM tbl_product WHERE 1 ORDER BY last_update DESC LIMIT ?, ?;
> pos=59
> new sql=SELECT * FROM tbl_product WHERE 1 ORDER BY last_update DESC;
> 在 regex=SELECT COUNT(*) AS count FROM tbl_product WHERE 1 ORDER BY last_update DESC 之后；
> 行数=0

**它以前工作过**，它没有返回`rows=8`我为从查询中删除“LIMIT X，X”而添加的部分，但只有当 LIMIT 为 0，X 时才返回。当我尝试 LIMIT 5,5 时，由于偏移量，它不会获取该列，现在它为任何值返回 0 行。

我也直接用 PDO 尝试过，它对 int 和 string 参数都有效！但是使用 PDOStatement->rowCount()。（不推荐用于 SELECT 查询，所以我使用了上面的 dbRowsCount 方法）。

```
function dbDebugTest() {
    global $db;
    # logErrors("Beginning dbDebugTest()");
    $stmt = $db->prepare("SELECT * FROM tbl_product WHERE 1 ORDER BY last_update DESC LIMIT ?,?");
    $offset = "5";
    $display = "5";
    $stmt->execute(array($offset,$display));
    # logErrors("dbDebugTest() returned rows: ".$stmt->rowCount());
} 
```

是什么导致第一个方法返回 0 行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T23:32:22.747

我所能看到的是，当`LIMIT`存在 a 时，您在查询后面添加一个分号。也许这就是你的问题的原因。

如果这不是问题，假设`dbQuery`并且`dbFetch`工作正常并且没有改变，那么您的表是空的？:)

**OP 答案**`$data`当不再有参数时，我仍在将数组转发给查询（因为我删除了 LIMIT X，X）

# objective-c - 为什么我发送多媒体消息而不是短信

> ID：10440747
> 
> 赞同：2
> 
> 时间：2012-05-03T23:28:49.497
> 
> 标签：objective-c, ios, xcode, sms, multimedia

现在我的应用程序正在发送我想要的消息，但它一直在发送多媒体消息而不是常规短信。我想知道它为什么这样做。下面是我发送消息的代码。

```
-(void)sendSMS:(NSString *)bodyOfMessage recipientList:(NSMutableArray *)recipients{
MFMessageComposeViewController *controller = [[[MFMessageComposeViewController alloc]init]autorelease];
if([MFMessageComposeViewController canSendText]){
    controller.body = bodyOfMessage;
    controller.recipients = recipients;
    controller.messageComposeDelegate = self;
    [self presentModalViewController:controller animated:YES];
}
}

-(void)textMessage{
NSLog(@"%@", savedPeople);
ABAddressBookRef addressBook = ABAddressBookCreate();
NSMutableArray *phoneNumberToText = [[NSMutableArray alloc]init];
for(NSString *name in savedPeople){
    if(savedPeople != nil){
        NSArray *people = (NSArray *)ABAddressBookCopyPeopleWithName(addressBook, CFStringCreateCopy(kCFAllocatorDefault, (CFStringRef)name));
        for(int i =0;i<[people count];i++){
            ABMultiValueRef person = (ABMultiValueRef)[people objectAtIndex:i];
            ABMultiValueRef phoneNumber = (NSString *)ABRecordCopyValue(person, kABPersonPhoneProperty);
            CFStringRef phoneNumberRef = ABMultiValueCopyValueAtIndex(phoneNumber, i);
            NSString *phoneNumbers = (NSString *)phoneNumberRef;
            [phoneNumberToText addObject:phoneNumbers];
        }
    }

}
NSLog(@"%@",phoneNumberToText);
[self sendSMS:@"Testing" recipientList:phoneNumberToText];

}

-(void)messageComposeViewController:(MFMessageComposeViewController *)controller didFinishWithResult:(MessageComposeResult)result{
[self dismissModalViewControllerAnimated:YES];
if(result == MessageComposeResultCancelled)
    NSLog(@"Message Canceled");
else if(result == MessageComposeResultSent)
    NSLog(@"message sent");
else
    NSLog(@"message failed");
} 
```

# java - 我可以延迟绑定 @Named 依赖项吗？

> ID：10440756
> 
> 赞同：0
> 
> 时间：2012-05-03T23:29:46.180
> 
> 标签：java, dependency-injection, guice

是否可以在未找到 @Named 依赖项时调用 Guice 注册处理程序？

然后我可以在运行时在应用程序的配置文件中查找丢失的绑定；否则我需要将所有属性预先绑定为字符串。

# java - Eclipse Java --> 类

> ID：10440760
> 
> 赞同：0
> 
> 时间：2012-05-03T23:30:00.907
> 
> 标签：java, eclipse, class

我用 eclipse 制作了一个 minecraft mod，我有我的 .java 文件。我不太确定如何使它成为每个人都可以使用的类文件，有人可以帮助我吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T23:43:33.053

如果您已经编写了代码，只需将其添加到您当前的代码中即可。

```
 package yourpackage.name;

    public class example {
    //Insert your code all within these brackets.
    } 
```

如果您想创建一个新类，请右键单击 src 文件夹，然后选择新包。将其命名为 mine.craft.mod 然后右键单击您新创建的包并选择新类。为其提供一个名称，例如 example.java 并选择完成。它应该创建一个新创建的类。

# html - 条件格式标签在 IE8 中不起作用

> ID：10440765
> 
> 赞同：1
> 
> 时间：2012-05-03T23:30:22.243
> 
> 标签：html, css, internet-explorer, formatting, conditional

我目前正在做一个网络开发，我现在正在做我的格式化来取悦 IE 8 或更高版本。我已经为以前的浏览器版本做到了这一点，但不是 ie8。我的问题是我的条件格式标签不再适用于这个版本的 IE。有什么改变吗？

页面：[http://domain/includes/file.php](http://domain/includes/file.php)

css 文件：[http://domain/css/cssIE8.css](http://domain/css/cssIE8.css)

我页面中的标签如下：

```
 <!-- [if gte IE 7]>
    <p>Show this in IE</p>
    <link href="../css/profileIE8.css" rel="stylesheet" type="text/css" />
    <![endif]--> 
```

当我删除条件格式标签时，所有其他浏览器都可以很好地找到该文件。有什么想法吗？

我什至把`<p>`标签放在那里看它是否会显示在页面中，它不会。我的理解是，这个特定的条件格式标记将适用于比 v7 更新的所有 Internet Explorer 版本

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T23:37:31.700

`<!-- [if..`应删除之间的空间。希望能帮助到你！

```
<!--[if gte IE 7]>
    <p>Show this in IE</p>
    <link href="../css/profileIE8.css" rel="stylesheet" type="text/css" />
    <![endif]--> 
```

更多信息可以在这里找到：http: [//msdn.microsoft.com/en-us/library/ms537509 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ms537509(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T23:46:29.993

你说：

> 当我删除条件格式标签时，所有其他浏览器都可以很好地找到该文件。有什么想法吗？

不知道这是怎么回事，就像你`href`的那样`../css/profileIE8.css`，但是你作为css提供的文件路径是`http://domain/css/cssIE8.css`这样的，所以文件名是***不同***的。除非您在此处输入错误，否则您`href`的文件路径与您的文件路径不匹配，因此找不到 css 文件。

# mysql - 每次使用 COUNT() 函数，还是存储该值并将其加一？

> ID：10440770
> 
> 赞同：8
> 
> 时间：2012-05-03T23:30:55.773
> 
> 标签：mysql, database, performance, record-count

我有一个带有用户“投票”表和“用户”表的数据库。我认为数据库会在很短的时间内变得相当大，所以我想使用最有效的方法。

我想我可以每次都使用“votes”表中的 WHERE 语句计算投票数量，或者我可以将分数存储在“user”表中，每次投票时将其增加 1添加。

哪个最好/最快，和/或有其他方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T23:43:44.400

如果您正在考虑最好的方法。您必须考虑很多优化和缓存。

我想说， *在用户表上创建一个列来存储缓存的分数，但在单独的表上维护分数。*

每当分数变化时，分数表的操作就会触发用户表的更新，并使用最新的分数结果。

这样做，你的分数数据可以扩展，有点像 stackoverflow 用于投票的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T23:37:30.387

在适当的配置中（默认配置在大多数情况下已经足够好了）MySQL 5.0+ 服务器正在缓存 SUM,COUNT 查询，因此 MySQL 会自动处理这类查询。

但是，如果您使用的是旧版本（MySQL 4 或更低版本），我建议将 COUNT(*) 值存储在数据库中，因为它确实会影响更大表的性能。

**编辑：**我发现的最佳实践是每次用户添加/删除投票/评论等时进行一次 COUNT(*) 查询。现代 SQL 服务器可以很好地处理组查询，因此我们不必担心性能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T23:37:59.420

预计算是经常去规范化的优化之一。

因此，只需创建预先计算的列并使用触发器或您的应用程序代码对其进行维护。

正如@Bohemian 指出的那样：**只有**在遇到性能问题时才需要这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T23:43:36.767

这是成本和复杂性的权衡。通过维护用户表中的计数，它增加了一些复杂性以保持其准确性，并且增加了插入/删除投票的成本。这意味着添加投票需要（至少）更新两个表。

因此，这在一定程度上取决于哪个部分需要最有效。如果检索投票计数的次数非常多，那么保持计数可能是有意义的。

不过，在我看来，最好先使用更简单的实现，并假设数据库将能够优化查询并使其成为非问题。如果结果不够快，那么稍后进行更改以添加预先计算的计数。

# php - 使用 Cron 作业激活 php 脚本，但未完全运行

> ID：10440772
> 
> 赞同：0
> 
> 时间：2012-05-03T23:31:15.830
> 
> 标签：php, cron

我正在使用 cronjob 来激活 php 脚本。虽然当我从浏览器手动执行此操作时，脚本需要 3-4 秒才能加载并将结果输出到数据库中。

当 cron 作业执行此操作时，似乎脚本无法在分配的时间内完成，并且 cronjob 中途停止加载脚本，cron 工作大约 1/10 的时间，其余 9/10 次无法完成任务。有没有办法可以确保每次 cron 作业激活脚本时都完全加载脚本？

脚本很简单，完全基于 php。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T23:51:03.590

我建议实施一个锁定文件（溢出保护）解决方案。基本上，当您的脚本启动时，它将检查锁定文件，如果锁定文件存在，则脚本可以假定先前的咒语仍在运行，因此它将停止执行。当脚本完成时，它将删除锁定文件，以便后续运行可以通过锁定文件检查并完整执行。

锁定文件通常包含由脚本生成的进程 ID，通常位于 /var/lock/my_script.lock 之类的位置。

您可以搜索更多信息，但这里有一个带有锁定文件示例的[站点。](http://abhinavsingh.com/blog/2009/12/how-to-use-locks-in-php-cron-jobs-to-avoid-cron-overlaps/)

# java - 如何在 Python 中加密并在 Java 中解密？

> ID：10440777
> 
> 赞同：7
> 
> 时间：2012-05-03T23:32:02.663
> 
> 标签：java, python, encryption, aes

我正在尝试加密 Python 程序中的一些数据并将其保存，然后在 Java 程序中解密该数据。在 Python 中，我像这样加密它：

```
from Crypto.Cipher import AES
KEY = '12345678901234567890123456789012'

def encrypt(data):
    cipher = AES.new(KEY, AES.MODE_CFB)
    return cipher.encrypt(data) 
```

在Java中，我像这样解密它：

```
import java.security.*;
import javax.crypto.*;
import javax.crypto.spec.SecretKeySpec;

public class Encryption {
    private static byte[] KEY = { '1', '2', '3', '4', '5', '6', '7', '8', '9', '0', '1', '2', '3', '4', '5', '6', '7',
        '8', '9', '0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '0', '1', '2' };

    public static byte[] decrypt(byte[] data) throws NoSuchAlgorithmException, NoSuchPaddingException,
            InvalidKeyException, IllegalBlockSizeException, BadPaddingException {
        Cipher c = Cipher.getInstance("AES/CFB/NoPadding");
        Key key = new SecretKeySpec(KEY, "AES");
        c.init(Cipher.DECRYPT_MODE, key);
        return c.doFinal(data);
    }
} 
```

但我明白了`Exception in thread "main" java.security.InvalidKeyException: Illegal key size or default parameters`。显然，我做错了什么。但是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T02:20:03.847

您遇到问题的原因是安全策略将您的密钥大小限制为 128 位，并且您尝试使用 256 位密钥（需要 Java 加密扩展 (JCE) 无限强度管辖权策略文件）。

看看[这个](http://www.coderanch.com/t/448228/Security/Exception-thread-main-java-security)讨论，你可能会注意到你有一个类似的问题。我实际上在我的机器上遇到了同样的问题。更新安全策略后，我能够运行您的代码。另外，我认为您应该进行以下更改`c.init(Cipher.DECRYPT_MODE, key, new IvParameterSpec(new byte[16]));`您缺少 CFB 模式的初始化向量。如果解密后的值不正确，请检查您初始化密钥的方式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-03T23:45:44.433

我**强烈**建议为此使用跨语言加密 API。我是[Keyczar](http://www.keyczar.org/)的忠实粉丝，它恰好有 Java 和 Python 库。API 非常简单：

```
public String encrypt(String data)
public String decrypt(String data) 
```

在[Java](http://www.keyczar.org/javadocs/org/keyczar/Crypter.html)和[Python](http://www.keyczar.org/pydocs/keyczar.keyczar.Crypter-class.html)中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T23:46:38.153

*   Python 2 字符串文字，如 'abc' 和 "abc" 是 ASCII。
*   像 u'abc' 和 u"abc" 这样的 Python 2 字符串文字是 unicode。
*   Python 3 字符串文字，如 'abc' 和 "abc" 是 unicode。
*   Python 3 字符串文字，如 b'abc' 和 b"abc" 是字节类型。

Java 默认使用 unicode，类似于 Python 3。

对于跨语言、可互操作的加密，您可以查看[https://code.google.com/p/keyczar/](https://code.google.com/p/keyczar/)。该页面上有其使用的简单示例。

# android - Android - decodeResource 是否为屏幕密度缩放位图？

> ID：10440782
> 
> 赞同：0
> 
> 时间：2012-05-03T23:32:29.303
> 
> 标签：android

在Android开发中，会

```
Bitmap bmpNormal = BitmapFactory.decodeResource(res, R.drawable.normal); 
```

从正确的drawables-density文件夹加载位图，还是我需要手动缩放它？

我无法在模拟器中对此进行测试，只能在我的手机显示屏和我妻子的手机上进行测试。即使我有 ldpi 和 mdpi 资源，每一个都会产生类似大小的位图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T03:38:42.487

实际上，您应该在所有文件夹中提供资源 -ldpi -mdpi -hdpi -xhdpi Android 将自动对其进行自定义并以正确的布局使用它。提供的资源应具有正确的大小。查看此[链接](http://developer.android.com/guide/practices/screens_support.html)。您可以了解 android自定义应用程序中的图像。您还可以缩放位图并使用它，但它更复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-21T12:40:19.427

是的，将加载一个可绘制密度特定的位图。

# jasper-reports - 如果Jasper报告中TextField中的参数超过三个，如何将参数转换为描述

> ID：10440787
> 
> 赞同：1
> 
> 时间：2012-05-03T23:33:11.643
> 
> 标签：jasper-reports

我在报告中有 3 个参数。我想在我的 TextField 中转换描述中的所有 id 参数。

```
The first parameter is $P{address}
if $P{address} = 1 then "Port Garden"
else if $P{address} = 2 then "pangsa maju,indah"
else if $P{address} = 3 then "eastern mouth"
else null

The second parameter is the $P{city}
if $P{city} = 1 then "Gosa"
else $P{city} = 2 "Marang"
else if $P{city} = 3 "kuala seberang"
else null

The third parameter is the $P{country}
if $P{country} = 198 then "China"
else if $P{country} = 234 then "Bangladesh"
else if $P{country} = 390 then "Sri Lanka"
else null 
```

当我键入参数时，我想要更改 Textfield 中描述的所有参数。

```
For example. "Information for company the address is $P{address}=1, city is $P{city}=1 and country is $P{country}=198".
The result is "Information for the company address is Port garden, city is Gosa and country is China. 
```

有人知道这个吗？.:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T18:17:16.220

像这样将值硬编码到报告中很奇怪。这可能是个坏主意。

但尽管这是一个坏主意……这并不难做到。使用这样的东西。创建一个名为 $P{Country_Name} 的参数。使用三元运算符（多次）给它一个默认值，如下所示：

```
$P{country}==198 ? "China" : 
  $P{country}==234 ? "Bangladesh" : 
    $P{country}==390 ? "Sri Lanka" : "somewhere else" 
```

# html - 内部 div 与父级的宽度不匹配

> ID：10440789
> 
> 赞同：0
> 
> 时间：2012-05-03T23:33:27.023
> 
> 标签：html, css

我有 3 个内部 div 都向左浮动。它们被包裹在宽度为 100% 的父 div 中。我将我的第一个内部 div 设置为特定宽度，然后我的下一个设置为重复 x 背景，右边的位于旁边。

它们里面没有任何内容，只是用来保存背景精灵。所以你有一个左 div、中心 div 和右 div。中间的会平铺，而外面的不会。我遇到的问题是它们需要特定的宽度，否则背景不会显示。有没有办法让中心显示。我尝试了 100% 的宽度，但它什么也没做。我可以让它工作的唯一方法是将父级的显示设置为表格。然后内部的表格单元格。但这在 IE7 中不受支持。

```
 <div id="subNav">
                <div class="subNav-left"></div>
                <div class="subNav-middle"></div>
                <div class="subNav-right"></div>
            </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T23:51:27.370

我了解您想要显示流畅的背景。第一个 div 显示条带的左侧部分，第三个显示最后一个，中间的一个重复背景，因此它可以是流动的。要在不进行额外编码的情况下实现这一点，只需将重复背景分配给主 div，并浮动两个内部 div，并使用它们各自的背景：

```
<div id="subNav">
    <div class="subNav-left"></div>
    <div class="subNav-right"></div>
    <div class="clear"></div>
</div> 
```

和CSS：

```
<style>
#subNav{
    background: url(repeating_bk.png) top left repeat-x;
    width:100%;
}
.subNav-left{
    width: 50px; /* specified */
    height: 20px; /* specified */
    background: url(left.png) top left no-repeat;
    float:left;
}
.subNav-right{
    width: 50px; /* specified */
    height: 20px; /* specified */
    background: url(right.png) top right no-repeat;
    float:right;
}
.clear { clear:both; }
</style> 
```

希望能帮助到你。

# jquery - How to add a parameter to a form submission?

> ID：10440791
> 
> 赞同：1
> 
> 时间：2012-05-03T23:33:32.193
> 
> 标签：jquery, forms, form-submit

First, I have to say that I find a similiar question: [How to add a post parameter to manual form submission?](https://stackoverflow.com/questions/7751650/how-to-add-a-post-parameter-to-manual-form-submission).

But I think that someone can tell me a better solution.

I want to add a name parameter to a form when the user clicks the submit button, this is how I do it:

```
var htmlElement = '<input type="hidden" name="current_step" value="' + $('select#current-step').val() + '"/>';
elForm.append(htmlElement); 
```

But I'm not completed satisfied whith this aproach.

Thx in advance if you give me a better way to do it.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T23:59:52.297

```
<input type='hidden' name='current_step' value='' />
<script>
$('#current-step').on('change', function() {
    $('input[name=current_step]').attr('value', $(this).val());
});
</script> 
```

# python - 当“if not []”成功时，为什么“[] == False”评估为 False？

> ID：10440792
> 
> 赞同：35
> 
> 时间：2012-05-03T23:33:35.477
> 
> 标签：python

我问这个是因为我知道检查列表是否为空的pythonic方法如下：

```
my_list = []
if not my_list:
    print "computer says no"
else:
    # my_list isn't empty
    print "computer says yes" 
```

会打印`computer says no`，等等。所以这让我认同`[]`真`False`值；但是，如果我尝试“直接”比较 [] 和 False，我会得到以下结果：

```
>>> my_list == False
False
>>> my_list is False
False
>>> [] == False
False 
```

ETC...

这里发生了什么？我觉得我错过了一些非常明显的东西。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-05-03T23:37:48.637

该`if`语句在布尔上下文中评估所有内容，就像对[`bool()`](http://docs.python.org/library/functions.html#bool)内置函数的隐式调用一样。

`if`以下是您实际检查语句如何评估事物的方式：

```
>>> bool([])
False
>>> bool([]) == False
True 
```

请参阅关于[Truth Value Testing](http://docs.python.org/library/stdtypes.html#truth-value-testing)的文档，空列表被*认为是 false*，但这并不意味着它们等同于`False`.

[PEP 285](http://www.python.org/dev/peps/pep-0285/)还提供了一些关于为什么以这种方式实施的出色信息，请参阅“*已解决问题*”部分中的最后一个项目符号，以了解具体处理的`x == True`部分`x == False`。

对我来说最有说服力的方面是它`==`通常是及物的，所以`a == b`和`b == c`暗示`a == c`。因此，如果它是您所期望的方式并且`[] == False`是真实的并且`'' == False`是真实的，那么人们可能会认为这`[] == ''`应该是真实的（即使它显然不应该在没有隐式类型转换的语言中）。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-05-03T23:38:50.820

空容器是“虚假的”，也就是说，它们`False` *在 Boolean context 中*求值。这并不意味着它们实际上等于常量`False`。

换句话说，以下是`True`：

```
bool([]) == False 
```

一个对象的真值是由它`__nonzero__()`或它的`__len__()`方法决定的。（在 Python 3 中，`__nonzero__()`已重命名为`__bool__()`。）容器有一个`__len__()`方法，所以当它们有任何东西时它们是真值，当它们为空时它们是假的。

顺便说一句，如果空容器实际上等于`False`，那么任何空容器都将等于任何其他空容器：例如，`{} == ""`将是`True`。那根本没有任何意义！

但是，为了让您大吃一惊，以下是`True`：

```
False == 0 
```

这是因为布尔值是 Python 中整数的子类，`False`基本上只是一个零，打印出来的结果略有不同。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-03T23:40:01.150

Python 中的内置类型具有真值，可让您测试它们的真实性。请参阅*[真值测试](http://docs.python.org/library/stdtypes.html#truth-value-testing)*。

这与说`object == False`哪个在进行实际值测试（平等测试）不同。它使用对象`__eq__()`方法来确定它们的值是否相等。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-03T23:44:04.083

在您的示例中， not 运算符导致您的列表转换为布尔值。试试这个：

```
>>> not []
True

>>> not [1]
False 
```

"is" 和 "==" 不进行这种转换。

# c - 尝试打开 32 位图像

> ID：10440794
> 
> 赞同：0
> 
> 时间：2012-05-03T23:33:51.313
> 
> 标签：c, opencv

我试图在 opencv 上打开一个 32 位图像，但没有这样做。这是代码：

```
IplImage *im32 = cvCreateImage(cvGetSize(objectImg), IPL_DEPTH_32F, 1);
cvSaveImage("test32.tiff", im32, NULL); 
```

输出为我提供了一个 8 位图像，这不是我需要的。

# sql - SQL Server：如何返回不重复的所有列？

> ID：10440796
> 
> 赞同：3
> 
> 时间：2012-05-03T23:34:20.873
> 
> 标签：sql, sql-server, tsql, distinct, group-concat

我有一张带有重复 ID 的表格，稍后我会修复它。基本上我想返回 ID 不同的所有行，但我想要整个行。就像是：

```
select * from table group by ID

select * from table where (ID is not repeated) 
```

在这种情况下，它们是相同的行，所以我不在乎它是 First 还是 Last，Min 还是 Max。

请注意，我不想这样做：

```
select MIN(col1), MIN(col2), ... from table group by ID 
```

我想要一种无需枚举每一列即可获得此结果的方法。

编辑：我使用的是 SQL Server 2008 R2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T23:41:41.713

如果您使用的是 MySql，请执行以下操作：

```
select 
    *
from tbl
group by ID 
```

MySQL 现场测试：[http ://www.sqlfiddle.com/#!2/8c7fd/2](http://www.sqlfiddle.com/#!2/8c7fd/2)

如果您使用的是 Postgresql，请执行以下操作：

```
select distinct on(id)
    *
from tbl
order by id 
```

如果您希望 Postgresql DISTINCT ON 至少与 CTE 窗口函数一样可预测。对另一列进行排序：

```
select distinct on(id)
    *
from tbl
order by id
   , someColumnHere -- Choose ASC for first row, DESC for last row 
```

Postgresql 现场测试：[http ://www.sqlfiddle.com/#!1/8c7fd/1](http://www.sqlfiddle.com/#!1/8c7fd/1)

如果您使用 CTE 支持窗口的数据库（例如 Postgres、Oracle、Sql Server），请使用以下命令：

```
with ranked as
(
  select 
      rank() over(partition by id order by column) rn,
      *
  from tbl
)
select * from ranked where rn = 1 
```

支持 CTE 窗口化的数据库：

Posgtresql：[http ://www.sqlfiddle.com/#!1/8c7fd/2](http://www.sqlfiddle.com/#!1/8c7fd/2)

甲骨文：[http ://www.sqlfiddle.com/#!4/b5cf9/1](http://www.sqlfiddle.com/#!4/b5cf9/1)

Sql 服务器：[http ://www.sqlfiddle.com/#!3/8c7fd/3](http://www.sqlfiddle.com/#!3/8c7fd/3)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T00:49:53.037

由于您没有在问题中说明您使用的是什么数据库，因此我建议您进行一个适用于所有数据库平台的查询。但是此查询要求您创建一个具有 auto_number、identity、serial 等属性的新列

这将是查询：

```
select * from tbl 
where (id,auto_number_here) in
   (select id, min(auto_number_here) 
    from tbl 
    group by id) 
```

这将适用于除 Sql Server 之外的*许多*平台。Sql Server 不支持元组。你必须这样做：

```
select * from tbl x
where 
   -- leave this comment, so it mimics the tuple capability
   -- (id,auto_number_here) in
   EXISTS
   (select
       -- Replace this:  
       -- id, min(auto_number_here) 

       -- With whatever floats your boat, 
       -- you can use 1, null(the value generated by Entity Framework's EXIST clause), 
       -- even 1/0 is ok :-) (this will not result to divide-by-zero error)

       -- But I prefer retaining the columns, so it mimics the tuple-capable database:
       id, min(auto_number_here) 

    from tbl 
    where id = x.id 
    group by id
    having x.auto_number_here = min(auto_number_here)) 
```

元组相关问题：[在 sql in 子句中使用元组](https://stackoverflow.com/questions/1474964/using-tuples-in-sql-in-clause)

由于某些[数据库](http://en.wikipedia.org/wiki/Microsoft_SQL_Server)不支持元组，您可以改为[模拟它](http://www.anicehumble.com/2012/05/tuple-matching-is-neat-how-to-simulate.html)

```
select z.* from tbl z
join (select id, min(auto_number_here) as first_row from tbl group by id) as x
on z.id = x.id and z.auto_number_here = x.first_row 
```

它比 EXISTS 方法好一点。但是，如果您的数据库支持元组，请改用它；尽可能只使用JOIN来反映表关系，使用WHERE子句进行过滤。

* * *

**更新**

也许一个具体的例子可以清楚地解释它，假设我们有一个我们忘记在其上放置主键的现有表：

```
create table tbl(
  id varchar(5), -- supposedly primary key 
  data int,
  message varchar(100) 
);

insert into tbl values
('A',1,'the'),
('A',1,'quick'),
('A',4,'brown'),
('B',2, 'fox'),
('B',5, 'jumps'),
('B',5, 'over'),
('C',6, 'the'),
('C',7, 'lazy'); 
```

为了从重复中只提取一行，我们需要在现有数据上添加第三列。

这将帮助我们从重复项中提取一行且仅一行

```
alter table tbl add auto_number_here int identity(1,1) not null; 
```

现在应该可以工作了：

```
select z.* from tbl z
join (select id, min(auto_number_here) as first_row from tbl group by id) as x
on z.id = x.id and z.auto_number_here = x.first_row 
```

现场测试：[http ://www.sqlfiddle.com/#!6/19b55/3](http://www.sqlfiddle.com/#!6/19b55/3)

这是这样的：

```
select * from tbl x
where 
   -- leave this comment, so it mimics the tuple capability
   -- (id,auto_number_here) in
   EXISTS
   (
     select
       -- Replace this:  
       -- id, min(auto_number_here) 

       -- With whatever floats your boat, 
       -- you can use 1, null(the value generated by Entity Framework's EXIST clause), 
       -- even 1/0 is ok :-) (this will not result to divide-by-zero error)

       -- But I prefer retaining the columns, so it mimics the tuple-capable database:
       id, min(auto_number_here) 

    from tbl 
    where id = x.id 
    group by id
    having x.auto_number_here = min(auto_number_here)

   ) 
```

现场测试：[http ://www.sqlfiddle.com/#!6/19b55/4](http://www.sqlfiddle.com/#!6/19b55/4)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T23:38:11.810

试试这个。它可能会起作用，因为两行中的所有列都是相同的。

```
select distinct *
from table 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T23:46:09.953

使用子查询来获取您的唯一 ID，然后使用它来过滤结果：

```
SELECT *
FROM YourTable t,
INNER JOIN (
  SELECT Id, COUNT(*) 'count'
  FROM YourTable
  GROUP BY Id
) sq ON sq.Id = t.Id
WHERE sq.count = 1 
```

# c# - FindControl() 找不到控件

> ID：10440799
> 
> 赞同：1
> 
> 时间：2012-05-03T23:34:42.943
> 
> 标签：c#, asp.net, controls, hiddenfield

我有一个网站，它为列表框中的每个项目动态创建隐藏字段。

```
foreach (Checklist c in check)
{
    lbxCheckListLevel3.Items.Add(c.Name);
    HiddenField hf = new HiddenField();
    hf.ID = c.Name;
    hf.Value = c.Status + ":" + c.ResponseLabels + ":" + c.Prompt + ":" + c.Notes + ":" + c.ResponseValues;
    prompt.Controls.Add(hf);
} 
```

隐藏字段的值在 Javascript 中被改变

然后当单击保存按钮时，OnClick 函数运行以遍历所有 HiddenFields 并将值读回。

```
for(int i = 0; lbxCheckListLevel3.Items.Count > i; i++)
{
   //Update the main checklist with the new information                
   HiddenField hidden = (HiddenField)FindControl(lbxCheckListLevel3.Items[i].Text);
   int index = check.FindIndex(delegate(Checklist c) { return c.Name == lbxCheckListLevel3.Items[i].Text; });
   if (check[index].Status != int.Parse(hidden.Value.Split(':')[0]) || 
      check[index].Notes != hidden.Value.Split(':')[3] ||
      check[index].ResponseValues != hidden.Value.Split(':')[4]) 
   {
      check[index].Status = int.Parse(hidden.Value.Split(':')[0]);
      check[index].Notes = hidden.Value.Split(':')[3];
      check[index].ResponseValues = hidden.Value.Split(':')[4];
      check[index].Changed = true;
   }
} 
```

我的问题是 FindControl Line 返回 NULL。我已经在 IE9 中启动了开发工具，并确保它存在并且具有正确的 ID。但它仍然返回 NULL

如果您需要更多信息，请询问，我会尽力而为。

编辑

下一行是罪魁祸首，我相信是因为破折号。即使它显示在字段的 ID 中

```
Environmental Health – Does the application involve any of the following: 
```

Javascript 仍然能够找到控件并更改值。

我找到了另一个带有破折号的东西，并且没有错误地找到那个。好像只有这一行...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T00:23:01.423

不仅其他人建议您的内容是有效的，而且您应该确保您的控件是在`Page_Init`or重新创建的`Page_Load`，还要考虑您正在将控件添加到：`prompt.Controls`所以请确保您在正确的容器中搜索，例如尝试像这样搜索：

```
HiddenField hidden = (HiddenField)prompt.FindControl(...); 
```

只有这样，您才能确定您在与`HiddenField`之前添加的容器相同的容器中进行搜索。

# javascript - javascript 在 Firefox 或 Chrome 而不是 IE 中工作

> ID：10440805
> 
> 赞同：-1
> 
> 时间：2012-05-03T23:34:53.170
> 
> 标签：javascript, jquery

我的`.js`文件中有以下代码行

```
$(triggers.restart).live('click', function (e) {
  e.preventDefault();
  plugin.method.startQuiz(this);
}); 
```

该代码在 Firefox 或 Chrome 中运行良好，但在 Internet Explorer 中运行良好。可能有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T23:51:48.523

在 IE 中 preventDefault 不受支持。相反，您设置返回值。这里有更多关于它的信息：[event.preventDefault() function not working in IE](https://stackoverflow.com/questions/1000597/event-preventdefault-function-not-working-in-ie-any-help)

# wcf - 如何更新 iis7 自签名 ssl 证书

> ID：10440806
> 
> 赞同：2
> 
> 时间：2012-05-03T23:35:00.757
> 
> 标签：wcf, ssl, iis-7

我们的 IIS7 服务器上有一个即将过期的自签名证书，我们想更新此证书。我知道删除证书并创建一个新证书很容易，但我们希望保留相同的证书以避免大量重新配置 WCF 服务及其客户端应用程序。

这可能吗？

IIS7 中有一个更新选项（证书上的右键菜单），但这需要您指定一个在线证书颁发机构，我们不需要。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T23:44:08.050

不，这是不可能的。

因为您已选择使用已明确配置为在客户端中受信任的自签名证书，所以受信任的正是该证书。如果您将该证书替换为具有不同有效期的新证书（即使使用相同的密钥，尽管最好也更改密钥），它将是一个不同的证书。不同的是，它与您在初始设置中（逻辑上）在客户端中导入的不同。

解决此问题的一种方法是创建您自己的 CA 并使用它为您的服务器颁发一个。如果使用相同的 CA 证书，您将不必重新配置客户端。即使 CA 证书的有效期即将结束（它们的有效期往往更长），您也可以逐步推出和替换证书（通常使用中间证书）。

# python - Tkinter 16 位原始（单色）图像显示带缩放？

> ID：10440809
> 
> 赞同：2
> 
> 时间：2012-05-03T23:35:18.893
> 
> 标签：python, numpy, tkinter, python-imaging-library

我有一个 numpy 数组形式的 16 位图像（但只有 10 位有效）。我当前用于显示图像的代码是：

```
from Tkinter import *
import Image, ImageTk

from functools import *

import numpy as np

class ImExam():
    def __init__(self):
        self.imExamDisp = Toplevel()

        Label(self.imExamDisp, text="Pixel").grid(row=0, column=0)
        self.pixelCoord = Label(self.imExamDisp); self.pixelCoord.grid(row=0, column=1)
        Label(self.imExamDisp, text="Value").grid(row=0, column=2)
        self.pixelValue = Label(self.imExamDisp); self.pixelValue.grid(row=0, column=3)
        self.imgDisp = Label(self.imExamDisp, borderwidth=0)
        self.imgDisp.grid(row=1, column=0, columnspan=4)

    def updateImage(self, img, dispIMin=None, dispIMax=None):
        self.i = Image.fromarray(img, mode='I;16')
        self.iTk = ImageTk.PhotoImage('I;16', img.shape)
        self.iTk.paste(self.i)

        self.imgDisp.bind('<Motion>', partial(self.getPixelValue, img=self.i))
        self.imgDisp.configure(image=self.iTk)
        self.imgDisp.grid(row=1, column=0, columnspan=4)

        self.imExamDisp.update()

    def getPixelValue(self, event, img):
            x = event.x
            y = event.y
            value = img.getpixel((x, y))
            self.pixelCoord.configure(text="%02s, %02s" % (x, y))
            self.pixelValue.configure(text="%0.4g" % value) 
```

但是屏幕上生成的图像是 8 位的，尽管`ImageTk.PhotoImage`在`I;16`模式下调用。

首先，此示例（即`updateImage(img)`）旨在使用实时图像馈送更新单独的 Tkinter 窗口，`getPixelValue`并将更新当前像素/值组合。我将其全部发布，以防其他人受益。

但我的问题是如何控制`Label`小部件的显示范围？生成的 16 位（10 位）图像被缩放为 8 位，尽管像素值是正确的。我的图像具有以下属性：

```
print np.min(img), np.max(img), img.shape, img.dtype
109 1023 (491, 656) uint16 
```

在这个问题之后，我可以改变显示比例吗？例如，不是显示 0-1023 的值，而是显示 100-800 的图像吗？

Tkinter 可能不是解决这个问题的方法，所以我对其他软件包持开放态度。也许缩放图像（例如，在 100-800 之间）最好在 numpy 或其他东西中完成。这也是可以接受的。任何建议表示赞赏！

我似乎无法通过 PIL 文档、其他帖子等找到解决方案……

**编辑**：

好的，所以我部分地回答了我自己的问题；不确定这是否是这样做的地方，但它可能会有所帮助。我试`matplotlib`了一下，改用以下代码（按照[此处](http://matplotlib.sourceforge.net/examples/user_interfaces/embedding_in_tk.html)`Tkinter`的示例进行交互）：

```
from Tkinter import *

import matplotlib
from matplotlib.backends.backend_tkagg import FigureCanvasTkAgg, NavigationToolbar2TkAgg
from matplotlib.figure import Figure

from functools import *

import numpy as np

class ImExam():
    def __init__(self):
        self.font = ("Helvetica", 9)
        self.imExamDisp = Toplevel()

        Label(self.imExamDisp, text="Pixel").grid(row=0, column=0)
        self.pixelCoord = Label(self.imExamDisp); self.pixelCoord.grid(row=0, column=1)
        Label(self.imExamDisp, text="Value").grid(row=0, column=2)
        self.pixelValue = Label(self.imExamDisp); self.pixelValue.grid(row=0, column=3)

        matplotlib.rcParams.update({'font.family': "Helvetica", 'font.size': 9})

        #
        ### Setup image window
        #
        self.fig  = Figure(frameon=False)
        self.subPlot = self.fig.add_axes([0, 0, 1, 1], frameon=False);     # add_axes needed to fill image in Figure
        self.subPlot.set_axis_off()

        self.imgDisp = FigureCanvasTkAgg(self.fig, master=self.imExamDisp)
        self.imgDisp.show(); self.imgDisp.get_tk_widget().grid(row=0, column=0, sticky=N+E+S+W)

    def updateImage(self, img, dispIMin=0., dispIMax=1023., virtFlag=0):
        self.subPlot.imshow(img, vmin=dispIMin, vmax=dispIMax, interpolation="quadric", aspect='auto', cmap='gray')
        self.imgDisp.draw()

        self.imgDisp.get_tk_widget().bind('<Motion>', partial(self.getPixelValue, img=img))
        self.imgDisp.get_tk_widget().grid(row=1, column=0, columnspan=4)

        self.imExamDisp.update()

    def getPixelValue(self, event, img):
        x = event.x
        y = event.y
        value = img[y, x]     # imshow (or something) switches x, y
        self.pixelCoord.configure(text="%02s, %02s" % (x, y))
        self.pixelValue.configure(text="%0.4g" % value) 
```

`img`仍然是一个 numpy 数组`img.dtype = uint16`。不幸的是，光标看不到图像右侧和底部约 6 个像素的边框（从 0-489 和 0-649 开始；应该是 0-490 和 0-655） . 我不知道这是框架问题还是其他问题。图像周围仍然有一个讨厌的黑色边框，我认为它`frameon=False`会摆脱，但也许不会......如果我弄明白了，我会对此发表评论。如果您遇到此问题，请告诉我。谢谢！

# jquery - 如何在浏览器中找到元素的当前位置？

> ID：10440812
> 
> 赞同：1
> 
> 时间：2012-05-03T23:35:51.403
> 
> 标签：jquery, html, css, slider, offset

我想知道我们如何能够在浏览器中找到元素的当前位置。我正在尝试创建一个 jQuery 滑块。之前通过动画边距创建了滑块。但是这个案子有点复杂。它有两个导航。一个将从一页滑到另一页。一页有四个缩略图。使用底部导航，您只能滑过一个缩略图。请参考下图。

![滑块](../Images/34d1fad40c053e0b9d15b0c1b3b33ef4.png)

我已经能够通过动画边距更早地获得这种效果。但它效率不高，并且有很多错误。所以我想我宁愿从头开始。

现在我打算做的是：

1.  使用箭头导航，为边缘设置动画并转到下一张幻灯片。
2.  使用分页，找出缩略图的当前位置并设置等于文章宽度的动画边距+装订线。

是否可以使用 jQuery 偏移量来做到这一点？请建议我正确的方法。任何示例代码示例都将受到高度赞赏。

提前致谢。

## 编辑：

我实际上已经完成了滑块。它按我的意愿完美运行。过几天我会回答这个问题。此外，当网站完成后，我将分享链接，以便其他人可以看到它的实际效果。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T01:27:45.037

jQuery 的 offset 方法将返回一个元素相对于文档的位置。这不完全是你需要的。

任何滑块或轮播背后的基本思想如下：

1.  您有一个“视口”元素，通常是 a `div`，它充当其中所有内容的定位锚。`position:relative`您可以通过在其上设置CSS 声明来使其充当锚点。还设置`overflow:hidden`为隐藏超出其边界的内容。我们称之为`#container`.
2.  在`#container`中，您在一个`ul`元素中拥有您的项目列表。有CSS 声明`ul`。`position:absolute`我们称之为`#content`.
3.  `#content`通过动画`left`CSS 属性来移动。

您已经掌握了基本概念，并且使用`margin-left`是一个足够的解决方案。但是动画`left`属性反而可以让你做一些漂亮的事情，比如在可能的情况下交换 CSS3 过渡和变换。这些将为您提供硬件加速、黄油般流畅的动画。

在支持的情况下自动使用 CSS3 动画的一个很棒的插件是 jQuery Animate Enhanced： http: [//playground.benbarnett.net/jquery-animate-enhanced/](http://playground.benbarnett.net/jquery-animate-enhanced/)。它可以让您编写几乎与已有代码一样的代码，只需进行一些小调整，并在可能的情况下获得硬件加速图形。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T02:28:32.740

我刚刚创建了一个名为`margin`跟踪当前边距的变量。按下箭头导航时，按 增加或减少边距`margin * 4`。如果按下底部导航，则从返回哪个寻呼机被点击的变量中获取 int。如果第四个是点击。只需乘以 4 * 默认边距。

如果有人有兴趣，我可以分享代码示例。

# ios - 如何设置 cedar 以对 ios 应用程序进行 bdd 测试？

> ID：10440814
> 
> 赞同：0
> 
> 时间：2012-05-03T23:36:25.510
> 
> 标签：ios, bdd, cedar-bdd

我正在尝试设置雪松，但很难让它工作。我正在尝试按照 github 上的说明进行操作。

我正在使用 xcode 4.2。

我不确定的第一步是：

“为项目中的测试创建一个 Cocoa Touch “应用程序”目标。将此目标命名为 UISpecs 或类似名称。”

a) 我不确定在使用 cedar 进行测试时是否能够将 ARC 用于我的主要应用程序。b）我很确定我不能使用 ARC 来构建雪松本身，我想我也不想这样做。c) 我不确定我能否将 ARC 用于包含我的规格的测试项目。d) 我不确定我应该使用哪个应用程序模板来创建应用程序来容纳规范。

我使用 ARC 和单窗口应用程序模板创建了一个新的主应用程序。我使用空的应用程序模板创建了一个新的应用程序来容纳我的规格而没有 ARC。

当我打开包含我的规格的测试应用程序的 plist.info 文件时，我没有看到“主 nib 文件基本名称”选项。所以我忽略了这一步。

现在我来一步：

“将 Cedar-iOS 静态框架添加到您的项目中，并将您的 UISpecs 目标与其链接。”

所以我去了规范应用程序构建目标并将 ~/Library/Developer/Xcode/DerivedData/Cedar-borwneaogydgaodbtmfyaccykqxn/Build/Products/Debug-iphoneos/libCedar-StaticLib.a 文件添加到项目中的“链接二进制文件与库" “构建阶段”选项卡下的选项卡。

然后，我将 -ObjC、-lstdc++ 和 -all_load 添加到 UISpecs 目标的 Other Linker Flags 构建设置中。

接下来，在包含规范的应用程序下，我创建了一个名为 TestSpec.m 的新文件并将此代码添加到其中，以尝试获取失败的规范：

```
#import <Cedar/SpecHelper.h>

SPEC_BEGIN(FooSpec)
describe(@"Foo", ^{
    it(@"should do something", ^{
        expect(0).to(equal(1));
    });
});
SPEC_END 
```

当我尝试在模拟器中运行 specs 项目时，我遇到了一些关于使用 ARC 时不支持 alloc 和 autorelease 的错误。我想这意味着我的主应用程序不能使用 ARC，而我的规范应用程序没有。我删除了我的规范应用程序并再次尝试，这次使用 ARC。

我从 main.m 代码中删除了自动释放池和释放代码以符合 ARC。

我现在得到两个构建错误：

1）在main.m中：文件：//localhost/Users/nelsond/workspace/BIM360UIArchitecture/BIM360UIPrototype/BIM360Issues-IOS/BIM360Issues-IOS-Specs-ARC/main.m：错误：词法或预处理器问题：'Cedar-iOS /Cedar-iOS.h' 文件未找到 2) 在 TestSpec.m 中：file://localhost/Users/nelsond/workspace/BIM360UIArchitecture/BIM360UIPrototype/BIM360Issues-IOS/BIM360Issues-IOS-Specs-ARC/TestSpec.m: 错误：词汇或预处理器问题：找不到“Cedar/SpecHelper.h”文件

我很困惑接下来要调试什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T22:23:18.913

a) 您可以将 ARC 用作您的主要应用目标。

b）不确定您为什么要问这个问题，Cedar 本身不应该使用 ARC 构建。无论如何，只需使用默认配置，无需搞砸。

c) 你不应该在你的测试类中使用 ARC。

d) 如果您创建一个新项目，您可以使用默认的自动生成的 OCUnit 目标。

* * *

几个月以来，我一直在我的 iOS 应用程序中使用 Cedar，我真的很喜欢它。

我将它与 OCUnit 一起使用，因此我可以直接`Cmd+U`运行我的测试，并且我有一个特定的方案可以从我的 CI 服务器运行它们。

我更喜欢创建一个`git submodule`来获取 Cedar 的代码，而无需编辑其文件。您可以简单地将 Cedar 的 Xcode 项目拖到应用程序的工作区中。最好使用静态库。如您所述，添加链接器标志。你还需要告诉 Xcode 在哪里可以找到头文件（`User Header Search Paths`，类似的东西`"$(PROJECT_DIR)/Libraries/cedar/Source/Headers"`）。现在你应该准备好了。

我为我的测试类禁用了 ARC（请参阅[如何为项目中的单个文件禁用 ARC？ ）。](https://stackoverflow.com/questions/6646052/how-can-i-disable-arc-for-a-single-file-in-a-project)请注意，ARC 配置实际上是特定于文件的，因此您可以将主要目标（使用 ARC）中的文件包含到测试文件中，它们会很好地混合。有时有点混乱，但非常强大。

希望这能有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T07:25:03.800

以下是我在 iOS 应用程序中集成 Cedar 时遇到的一些问题。

1.  “Cedar-iOS 静态框架”似乎是指以下文件夹：**~/Library/Developer/Xcode/DerivedData/Cedar-borwneaogydgaodbtmfyaccykqxn/Build/Products/Debug-iphoneuniversal/Cedar-iOS.framework**。不是带有 .a 扩展名的那个。

2.  由于静态框架已经在没有 ARC 的情况下编译，因此我能够毫无问题地启用 ARC。

3.  我在 info.plist 中也没有看到任何“主 nib 文件基本名称”键
4.  第一段代码是我用于测试目标的 main.m（我需要通过查看我的主应用程序的 main.m 来修改它）
5.  第二段代码是位于名为“MyAppDelegateSpec.mm”的文件中的规范代码

* * *

```
#import <UIKit/UIKit.h>

int main(int argc, char *argv[]) {
    @autoreleasepool {
        return UIApplicationMain(argc, argv, nil, NSStringFromClass([CedarApplicationDelegate class]));
    }
} 
```

* * *

```
#import "MyAppDelegate.h"
#import <Cedar-iOS/SpecHelper.h>

using namespace Cedar::Matchers;

SPEC_BEGIN(MyAppDelegateSpec)

describe(@"MyAppDelegate", ^ {
   __block MyAppDelegate *appDelegate;
    beforeEach(^{
        appDelegate = [[MyAppDelegate alloc] init];
        [appDelegate application:nil didFinishLaunchingWithOptions:nil];
    });

    afterEach(^{
        appDelegate = nil;
    });

    it(@"initializes window", ^{
        expect(appDelegate.window != nil).to(be_truthy());
    });
});
SPEC_END 
```

# facebook - Node.js HTTPS GET 中的 Facebook FQL 错误

> ID：10440819
> 
> 赞同：0
> 
> 时间：2012-05-03T23:36:55.573
> 
> 标签：facebook, node.js

我正在使用`node.js`有效的 facebook AccessToken 来获取登录用户的 facebook 朋友。

我正在使用`node.js`https 模块，通过以下选项来做到这一点：

```
var query = 'q=SELECT uid, name, is_app_user FROM user WHERE uid IN (SELECT uid1 FROM friend WHERE uid2=me()) and is_app_user=1';
var options = {
    host: 'graph.facebook.com',
    port: 443,
    path: 'fql?' + encodeURI(query) + '&method=GET&metadata=true&format=json&access_token=' + accessToken
}; 
```

有时我可以和我的朋友一起获取数据，但有时我会从 Facebook 收到一条错误消息，上面写着无效的 URL。

我的 facebook 应用程序处于沙盒模式，我的服务器 ip 在应用程序白名单中

任何想法为什么会发生这种情况？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T13:55:38.417

问题解决了。

我在开始时将to`path: 'fql?'...`更改为..`path: '/fql?'...``/`

# c - 纯 C 中 DirectWrite 的问题

> ID：10440822
> 
> 赞同：3
> 
> 时间：2012-05-03T23:37:21.793
> 
> 标签：c, com

所以我正在用纯 C 语言编写一个 Win32 程序，它使用 Direct2D 进行绘图。到目前为止，考虑到这是我对 COM 的第一次重大实验，一切都很好。我现在开始使用 DirectWrite 进行字体渲染，但似乎存在障碍。尽管 Direct2D 和大多数其他 COM 对象具有为 C 和 C++ 编写的单独接口，但 DirectWrite 仅在 Windows SDK 标头中具有 C++ 接口。我不知道这是一个疏忽还是有目的的决定，但如果给定适当的 C 友好标头，它似乎应该在 C 中正常工作。我想如果我为 DirectWrite 编写自己的标题，我应该没问题。

所以这让我想到了问题的实质：如何将 C++ 风格的代码用于 COM 接口并将其转换为 C 友好的代码？我自己从未创建过 COM 接口，所以我不知道如何为它编写自己的 DirectWrite 标头。我尝试并排查看 Direct2D 的 C 和 C++ 接口标头以进行比较，但我有点难以理解。谢谢各位！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T23:43:36.640

有一篇完美的文章解释了如何用纯 C 实现你自己的 COM 类

[http://www.codeproject.com/Articles/13601/COM-in-plain-C](http://www.codeproject.com/Articles/13601/COM-in-plain-C)

那么“Inside COM”一书（Dale Rogerson，Microsoft Corp. 出版：ISBN:1-57231-349-8）是所有 COM 黑魔法的绝妙参考。

基本上，自从您使用 Direct2D 以来，您至少已经完成了一半。DirectX 和其他 COM 标头是自动生成的，因此要使用 DirectWrite，您可能只需弄清楚您需要哪些确切的接口和方法，然后手动或使用一些简单的解析器/生成器编写它们。

# matlab - 在 Matlab 中处理并发 UDP DatagramReceivedFcn 执行

> ID：10440829
> 
> 赞同：2
> 
> 时间：2012-05-03T23:38:40.357
> 
> 标签：matlab, udp, datagram

我正在尝试读取通过 UDP 数据包广播的多个频率的海洋深度值。我正在做的是告诉日志程序将深度值返回到特定的 UDP 端口，然后在接收到数据时使用 DatagramReceivedFcn 运行一个函数并基本上保存该深度。

```
u1 = udp(remoteip,dataport18,'ByteOrder','littleEndian','LocalPort',dataport18,'DatagramTerminateMode','off');
set(u1,'InputBufferSize',6000);
u1.DatagramReceivedFcn = {@receivedata18};
fopen(u1); 
```

因此，当在“dataport18”中指定的端口接收到数据时，它将运行函数 receivedata18()。但是，我正在尝试读取多个频率的深度数据，因此我创建了额外的 UDP 对象：

```
u2 = udp(remoteip,dataport38,'ByteOrder','littleEndian','LocalPort',dataport38,'DatagramTerminateMode','off');
set(u2,'InputBufferSize',6000);
u2.DatagramReceivedFcn = {@receivedata38};
fopen(u2); 
```

我发现只有 u1 (18 kHz) 的数据被保存。我的猜测是，由于两个频率同时 ping，它们都发送它们的 UDP 数据包并尝试同时评估它们各自的功能，这是 Matlab 无法做到的。

这真的是怎么回事吗？如果是这样，有什么办法可以解决这个问题，以便我可以同时从两个单独的 UDP 数据包中读取同时发送的深度数据？

谢谢！

**更新**

我想知道我是否需要并行计算工具箱才能执行此操作。我在 Python 中有一个类似的程序，它的执行方式基本相同，但是没有问题。我假设它一定是 Matlab 不能在没有并行计算工具箱的情况下运行同时功能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T22:57:42.623

以为我应该更新这个以防万一有人关心。这并不是我的问题的真正答案，但我目前正在做的事情正在发挥作用。

我没有将数据发送到不同的 UDP 端口，而是将它们发送到同一个端口，然后按顺序读取它们。因此，我没有同步阅读它们，尽管这并没有真正减慢操作速度。

# wix - 如何使用 WiX 检测通过 ClickOnce 安装的应用程序？

> ID：10440831
> 
> 赞同：3
> 
> 时间：2012-05-03T23:39:16.560
> 
> 标签：wix, clickonce, windows-installer

我正在为之前使用 ClickOnce 部署的应用程序编写 WiX 安装程序。

我想检测应用程序是否安装在客户端计算机上并中止 MSI 安装。我在 Stack Overflow 上搜索了类似的问题，但找不到解决方法。

如果我能找到告诉我应用程序安装位置的路径或某个注册表项，我可以通过 Condition 中止 MSI 安装。

使用[这个问题](https://stackoverflow.com/questions/9436888/what-is-the-path-to-an-installed-clickonce-application)的答案，我能够到达某个地方。ClickOnce 快捷方式是扩展名为**.appref-ms**的文件。这是我使用的代码：

```
<Property Id="APP_CLICKONCE_INSTALLED">
    <DirectorySearch Id="dirSearch.APP.CLICKONCE" AssignToProperty="yes" Path="[StartMenuFolder]" Depth="2">
    <FileSearch Id="fileSearch.APP.CLICKONCE" Name="APP.appref-ms" />
    </DirectorySearch>
</Property>

<Condition Message="App is already installed. Please uninstall it then re-run this setup.">
    <![CDATA[APP_CLICKONCE_INSTALLED = "" OR INSTALLED]]>
</Condition> 
```

但是，**StartMenuFolder**提供了**AllUsers**配置文件的位置，而单击一次应用程序是为当前用户安装的。我还在挖。

使用**perUser**安装**StartMenuFolder**提供当前用户位置（我使用的是**perMachine**）：

```
<Package InstallerVersion="200" Compressed="yes" InstallScope="perUser" /> 
```

现在一切都很好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T07:52:48.567

我对 WiX 一无所知，但判断是否安装了 ClickOnce 应用程序的另一种方法是遍历注册表中的卸载字符串，这些字符串位于：

```
HKCU\Software\Microsoft\Windows\CurrentVersion\Uninstall 
```

您需要搜索应用程序的产品名称与该组键的显示名称相匹配的一个。

# android - Android LocationManager 多久检索一次 requestLocationUpdates() 的更新？

> ID：10440834
> 
> 赞同：0
> 
> 时间：2012-05-03T23:39:39.263
> 
> 标签：android, locationmanager

我对 requestLocationUpdates 方法有疑问。

当 minTime 指定为 0 时，该方法多久更新一次？

它是默认为 6000 还是某些设备特定的数字？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T23:48:51.710

当您使用 0 时，系统应该尽可能快地提供更新。通常的数量级是每秒一次，但它是特定于设备的。

另请参阅[Android 文档](http://developer.android.com/reference/android/location/LocationManager.html#requestLocationUpdates%28java.lang.String,%20long,%20float,%20android.location.LocationListener%29)

# android - 如何在安卓和引擎游戏中制作暂停/恢复事件？

> ID：10440836
> 
> 赞同：0
> 
> 时间：2012-05-03T23:40:05.087
> 
> 标签：android, andengine, game-engine, resume

我用Andengine做了一个游戏。如何添加暂停/恢复按钮？

我对此进行了研究，但我无法完全理解。我可以使用下面的代码停止游戏，但我无法再次恢复。

```
 pause = new Sprite(400.0f, 200.0f, pauseTextReg){
        @Override
        public boolean onAreaTouched(final TouchEvent pAreaTouchEvent, final float pTouchAreaLocalX, final float pTouchAreaLocalY) {
            switch(pAreaTouchEvent.getAction()) {
            case TouchEvent.ACTION_DOWN:

                mEngine.stop();

                break;
            }
            return true;
        }
    };
    scene.registerTouchArea(pause);
    scene.getLastChild().attachChild(pause);

    resume = new Sprite(400.0f, 250.0f, resumeTextReg){
        @Override
        public boolean onAreaTouched(final TouchEvent pAreaTouchEvent, final float pTouchAreaLocalX, final float pTouchAreaLocalY) {
            switch(pAreaTouchEvent.getAction()) {
            case TouchEvent.ACTION_DOWN:

                mEngine.start();

                break;
            }
            return true;
        }
    };
    scene.registerTouchArea(resume);
    scene.getLastChild().attachChild(resume); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T19:25:13.993

它可以工作，但不能满足我的目的。因为它只是暂停了屏幕上的元素。在我的游戏中，10 个精灵正在（-100，-100）坐标中创建。并移动屏幕。所以当我暂停时游戏中，精灵正在创建和移动屏幕，当它们处于 (0,0) 坐标时它们会暂停。

# php - PHP 验证问题

> ID：10440837
> 
> 赞同：1
> 
> 时间：2012-05-03T23:40:43.777
> 
> 标签：php, validation

我正在为 PHP 类做一个最终项目，但在验证代码时遇到了麻烦。在代码的 else if 部分中，我总是在这两个 else if 语句中遇到错误，并且应用程序停止处理。下面的代码是 .php 文件的一部分，该文件具有用于设置提醒的 HTML 表单。

```
} else if (!checkdate($_POST['reminderMonth'],$_POST['reminderDate'],$_POST['remindereEar'])) {
    $error_message = "Selected date does not exist.";
} else if ($reminderDate <= $t_date) {
    $error_message = "Selected date has already occured."; 
```

所有代码：

```
if(isset($_POST['submit'])) {
//get data
$t_date = date(Ymd);
$year = $_POST['reminderYear'];
$month = $_POST['reminderMonth'];
$day = $_POST['reminderDay'];
//validate data
$reminderDate = $year.$month.$day;
if (empty($_POST['reminderName'])) {
    $error_message = "Name is a required field.";
} else if (!checkdate($_POST['reminderMonth'],$_POST['reminderDate'],$_POST['remindereEar'])) {
    $error_message = "Selected date does not exist.";
} else if ($reminderDate <= $t_date) {
    $error_message = "Selected date has already occured.";
} else {
    $error_message = ''; }
//redirect
if(empty($error_message)) {
    mysql_query("INSERT INTO reminder_event 
                    (reminderName,reminderDescript,reminderDate) 
                 VALUES
                    ('{$reminderName}','{$reminderDescript}','{$reminderDate}')");
header("Refresh: 1;url=reminder_list.php");
} else {
echo($error_message); } } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T23:45:10.630

我看到 2 个错别字：

```
 $_POST['reminderDate'],$_POST['remindereEar'] 
```

它应该是：

```
$_POST['reminderDay'],$_POST['reminderYear'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T23:49:20.393

你在remindDate 和remindereEar 上犯了一个错误。

它应该是：`$_POST['reminderDay'], $_POST['reminderYear']`

告诉我你在改变之后是否有更多错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T23:51:18.030

date(Ymd) 会产生错误应该是

```
date('Y m d'); 
```

并确保 $reminderDate = $year.$month.$day; 以相同的方式格式化

```
$reminderDate = $year.' '.$month.' '.$day; 
```

还有2个错别字：

```
$_POST['reminderDate'],$_POST['remindereEar'] 
```

不知道这是否是一个解决方案，但如果你按照自己的方式运行它看起来仍然会导致问题

# php - 在 PHP 中执行的持续时间

> ID：10440841
> 
> 赞同：4
> 
> 时间：2012-05-03T23:41:37.603
> 
> 标签：php, execute

我需要用 PHP 编写一些程序，但我必须知道第 5 行和第 14 行之间的执行时间。

问题是我找不到任何可以做我想做的事（计算这些行之间的执行时间）。

我怎样才能将它与另一个动作同步？

谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-03T23:44:18.607

只需使用[microtime()](http://php.net/manual/en/function.microtime.php)，

**这是一个简单的例子：**

```
<?php
//get initial start time
$time_start = microtime(true);

//then do your php goodness... 

//get script end time
$time_end = microtime(true);

//calculate the difference between start and stop
$time = $time_end - $time_start;

//echo it 
echo "Did whatever in $time seconds\n";
?> 
```

或者是这样的：

```
<?php
//get initial start time
$time_start = microtime(true);

//then do your php goodness...
sleep(2);

//echo it
echo sprintf("Did whatever in %.3f seconds", (float)microtime(true)-$time_start);
?> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-03T23:43:39.817

经过一番搜索，我在我的网站上发了一篇关于它的帖子。

您可以在之前添加：

```
$mtime = microtime();
$mtime = explode(" ",$mtime);
$mtime = $mtime[1] + $mtime[0];
$starttime = $mtime; 
```

在你的代码之后：

```
$mtime = microtime();
$mtime = explode(" ",$mtime);
$mtime = $mtime[1] + $mtime[0];
$endtime = $mtime;
$totaltime = ($endtime - $starttime);
echo "Executed in ".$totaltime." seconds"; 
```

同步它是什么意思？推出别的东西？对该部分更精确。

# ruby - 用于在 ruby 上匹配 3 个模式的 Ruby 脚本

> ID：10440842
> 
> 赞同：0
> 
> 时间：2012-05-03T23:41:41.370
> 
> 标签：ruby, regex

我有一个**fail2ban.log**，我想从'Ban'字符串中获取特定字段。**我当时可以使用正则表达式**获取我需要的数据，但我无法将它们组合起来。典型的“fail2ban”日志文件有很多字符串。我对这样的字符串感兴趣：

```
2012-05-02 14:47:40,515 fail2ban.actions: WARNING [ssh-iptables] Ban 84.xx.xx.242 
```

xx = 数字（数字）

我要获取：a) 日期和时间，b) 禁令（关键字），c) IP 地址

这是我的正则表达式：

知识产权 =`(\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})`

日期和时间 =`^(\d{4}\W\d{2}\W\d{2}\s\d{2}\W\d{2}\W\d{2})`

我的问题是，如何将这三个结合在一起。我试过这样的事情：

```
^(?=^\d{4}\W\d{2}\W\d{2}\s\d{2}\W\d{2}\W\d{2})(?=\.*d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$)(?=^(?Ban).)*$).*$ 
```

但也不能像我想要的那样工作。

举一个更清楚的例子，这就是我想要的：

```
greyjewel:FailMap atma$ cat fail2ban.log |grep Ban|awk -F " " '{print $1, $2, $7}'|tail -n 3
2012-05-02 14:47:40,515 84.51.18.242
2012-05-03 00:35:44,520 202.164.46.29
2012-05-03 17:55:03,725 203.92.42.6 
```

最好的祝福

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T00:58:46.890

该示例的非常直接的翻译

```
ruby -alne 'BEGIN {$,=" "}; print $F.values_at(0,1,-1) if /Ban/' fail2ban.log 
```

而且因为我认为您必须从 Ruby 中获取它们

```
results = File.foreach("input").grep(/Ban/).map { |line| line.chomp.split.values_at 0, 1, -1 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T00:55:56.793

如果字段位置没有改变，你甚至不需要这里的正则表达式：

```
log_line = 
  '2012-05-02 14:47:40,515 fail2ban.actions: WARNING [ssh-iptables] Ban 84.12.34.242'

date, time, action, ip = log_line.split.values_at(0,1,-2,-1) 
```

# prolog - 列表序言中的对

> ID：10440844
> 
> 赞同：1
> 
> 时间：2012-05-03T23:41:54.193
> 
> 标签：prolog, combinations, nested-lists

我必须通过以下方式在列表中找到所有可能的对：

给定一个列表 L=[[1,1,1],[1,2,1],[2,1,1],[2,2,1],[3,1,1],[3,2 ,1]]

[1,1,1] 有对 [1,1],[1,1],[1,1]

[1,2,1] 有对 [1,2],[2,1] 因为已经找到 [1,1]

[2,1,1] 有对 [2,1],[2,1] 这些是不一样的，因为它们位于不同的位置

[2,2,1] 有对 [2,2] 其他对已找到

[3,1,1] 有对 [3.1] [3,1]

[3,2,1] 有对 [3,2]

我有一个谓词可以生成所有可能的配对，但我不会这样做。我是 prolog 的新手，我不知道还能做什么。这就是我所拥有的：

它还返回创建的对数

```
do_pairs(L,PL,N):- do_pairs1(L,[],PL),len(PL,N).
do_pairs1([],L,L) :- !.
do_pairs1([H|T],Pairs,PL):-
     pairs(H,P),
     do_pairs1(T,[P|Pairs],PL)
    .

pairs(L,Pairs):- findall({I-J}, (member(I,L), member(J,L),I=<J), Pairs). 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T06:22:11.050

要解决此问题，您必须记录列表中元素的位置，并仅在确定配对后删除这些位置。

```
:- use_module(library(lists)).

gen_pos_pair(L,pair(P1-E1,P2-E2)):- 
    length(L,N), between(1,N,P1), nth1(P1,L,E1), P1next is P1 +1, 
    between(P1next,N,P2), nth1(P2,L,E2).
gen_pairs([],[]).
gen_pairs([L|Ls],AllPairs):- 
    findall(Pair, gen_pos_pair(L,Pair), Pairs),          
    gen_pairs(Ls,AllPairs1),
    append(Pairs,AllPairs1,AllPairs).
project_positions([],[]).
project_positions([pair(_P1-E1,_P2-E2)|Pairs], [[E1,E2]|PairsNoPos]) :-
    project_positions(Pairs,PairsNoPos).    
correct_pairs(L,R) :-
    gen_pairs(L,All),
    list_to_set(All,S),
    project_positions(S,R).

% auxiliary predicates
writel([]).
writel([X|Xs]) :- write(X), nl,
        writel(Xs).
test(R) :- correct_pairs([[1,1,1],[1,2,1],
                  [2,1,1],[2,2,1],
                  [3,1,1],[3,2,1]],R). 
```

目标`test(X), writel(X).`产生所需的输出：

```
[1,1]
[1,1]
[1,1]
[1,2]
[2,1]
[2,1]
[2,1]
[2,2]
[3,1]
[3,1]
[3,2] 
```

# javascript - Ajax 的 Jquery .Hover 问题

> ID：10440846
> 
> 赞同：1
> 
> 时间：2012-05-03T23:42:11.193
> 
> 标签：javascript, jquery, ajax, javascript-events

嘿伙计们我有这个代码

```
cuts_html = '';
for( i = 0; i < attachments.length; i++ ) {
    fburl3 = site_url + '/haircut-detail/?img_id=' + attachments[i].ID + '&uid=' + attachments[i].post_author;
    if( isNaN(attachments[i].view_count) ) attachments[i].view_count = 0;

    cuts_html += '<div id="controller-image" class="cut-image">';

    cuts_html += '<div id="cut-imageplacer">';

    cuts_html +=    '<div class="cut-image-info">' +
                        'By <a href="' + user_profile_url + 
                        '&user_id=' + attachments[i].post_author + '">' +
                        attachments[i].author_name + '</a>' +
                        '</div>';

    cuts_html +=    '<div class="commentbox-1">' +
                        '<img src="https://d2xcq4qphg1ge9.cloudfront.net/assets/17276/435546/original_views.png">&nbsp;&nbsp;' +
                        attachments[i].view_count + 
                        '&nbsp;&nbsp;&nbsp;&nbsp;<img src="https://d2xcq4qphg1ge9.cloudfront.net/assets/17276/435545/original_talk-bubble.png">&nbsp;&nbsp;' +
                        '<fb:comments-count href="' + fburl3 + '"></fb:comments-count>' +
                        '</div></div>';

    cuts_html +=    '<a class="cut-image-a" ' +
                        'href="' + image_detail_url + 
                        '?uid=' + attachments[i].post_author + 
                        '&img_id=' + attachments[i].ID + '">' +
                        attachments[i].attachment_image_html + '</a>';

    cuts_html += '</div>';
} 
```

div Id`cut-imageplacer`是`display:none`，所以我想要的是当有人悬停`controller-image`div 时，`cut-imageplacer`当然可以在不打开时显示和隐藏。我使用此代码

```
<script type="text/javascript">$(document).ready(function(){    $('.cut-image').hover(
    function(){     $('#cut-imageplacer').show();
}, function () {        $('#cut-imageplacer').hide();    });  }); </script> 
```

但它不起作用......知道我做错了什么吗？或者指出我正确的方向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T23:54:40.130

看起来您正在尝试将事件附加到动态创建的元素。创建这些元素后，您需要使用`Live()`或将事件附加到这些元素。`On()`查看[This](http://api.jquery.com/live/)和[This](http://api.jquery.com/on/)以了解如何使用它们。

像：

```
<script type="text/javascript">
      $(document).ready(function(){    
       $('.cut-image').live("hover",
          function(){     
              $('#cut-imageplacer').show();
          }, function () {        
              $('#cut-imageplacer').hide();    
           });  
       }); </script> 
```

# javascript - 如何在rails应用程序的javascript文件中获取环境

> ID：10440853
> 
> 赞同：16
> 
> 时间：2012-05-03T23:43:39.090
> 
> 标签：javascript, ruby-on-rails, environment-variables

您好，我一直试图在 Rails 中获取当前环境，但我认为我的 javascript 做错了，但我似乎不知道是什么。在我的 application.js 我有...

```
var rails_env = '<%= Rails.env -%>';
alert(rails_env);
alert(rails_env.value);
if(rails_env == 'development'){
    alert('inside if')
    var indexName = "idx";
}
else{
    alert('inside else')
     var indexName = "idx_production";
} 
```

即使我处于开发模式，它也总是进入我的 else 语句。我究竟做错了什么？谢谢你

如何在rails应用程序的javascript文件中获取环境

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-05-04T08:17:24.877

您不需要直接将其传递到您的 javascript 文件中。您可以`erb`像这样在视图文件中执行此操作，例如：

```
<script>
  window._rails_env = "<%= Rails.env %>"
</script> 
```

或者更好的是：

```
<%= javascript_tag do %>
  window._rails_env = "<%= Rails.env %>"
<% end %> 
```

或最好的（恕我直言）这个：

```
<body data-env="<%= Rails.env %>">
  ... 
```

进而：

```
var railsEnv = $('body').data('env') 
```

**警告：**

像这样在脚本中转储整个 Rails 环境几乎肯定会危及 Web 应用程序的安全性！正如 Michał Zalewski 在下面的评论中提到的，您的 Rails 应用程序在其环境中具有敏感信息，例如数据库凭据、API 密钥、用于签名和加密 cookie 的应用程序机密等。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-05-04T00:35:35.770

Rails 的资产管道只会预处理您标记为解析的资产。无论这些资产最终会是 CSS、JS 还是其他任何东西，您都可以通过调整文件扩展名来标记要解析的文件。

在这种情况下，当您尝试输出 ERB 变量时，您需要将文件的扩展名更改为`application.js.erb`.

[这里](http://guides.rubyonrails.org/asset_pipeline.html#preprocessing)有预处理器的扩展讨论。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-09-26T12:52:02.947

对我来说，`environment.js`位于`/config/webpack/environment.js`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-29T13:45:24.363

如果您在 Rails 应用程序中使用 Webpack，则有一个更简单的解决方案。

## TLDR：使用`process.env.RAILS_ENV`或`process.env.NODE_ENV`

在您的 webpack 编译的 javascript 文件之一中：

```
console.log('Rails env: ', process.env.RAILS_ENV);
console.log('Node env: ', process.env.NODE_ENV); 
```

您可以复制粘贴的完整解决方案如下。[process.env 的文档](https://nodejs.org/api/process.html#process_process_env)。

[正如u/matthew 的回答](https://stackoverflow.com/a/10445167/1038034)所指出的，在 erb 文件中使用 Rails.env 存在风险。同样，如果`NODE_ENV`没有在您的生产服务器上正确配置，您可能会遇到意外或危险的行为。我建议实现一个小模块来检查这两个变量，如果它们不匹配则抛出错误。

### 完整的解决方案

*   实现一个检查两种环境的小模块
*   在需要的地方导入这个模块

#### `javascript/environment/index.js`

```
/* global process */

const railsEnv = process.env.RAILS_ENV;
const nodeEnv = process.env.NODE_ENV;

if (!railsEnv || railsEnv !== nodeEnv) {
  const errorMsg = `RAILS_ENV (${railsEnv}) does not match NODE_ENV (${nodeEnv})`;
  throw new Error(errorMsg);
}

export default railsEnv; 
```

现在可以在任何你喜欢的地方使用，比如在 React 组件中。

#### `javascript/components/MyComponent`

```
import env from '../../environment';

class PaintTheKeyboard extends React.Component {
  constructor(props) {
    super(props);
    console.log(env);
  }
  ...
  render() { ... }
} 
```

# c++ - 在 C++11 模式下使用 GCC 在 1.48 中破坏了 Boost Intrusive unordered_set

> ID：10440860
> 
> 赞同：3
> 
> 时间：2012-05-03T23:43:54.693
> 
> 标签：c++, gcc, boost, c++11, intrusive-containers

如果您对 GCC 4.7 和 Boost 1.48 附带的 Fedora 17 进行香草安装，并使用 C++11 模式，则 Boost Intrusive 的 unordered_set 将被破坏。在带有 GCC 4.6.2 和 Boost 1.47 的 Fedora 16 上，它可以工作。这破坏了真实的代码，甚至破坏了[官方文档](http://www.boost.org/doc/libs/1_48_0/doc/html/intrusive/unordered_set_unordered_multiset.html)中的示例：

```
#include <boost/intrusive/unordered_set.hpp>

using namespace boost::intrusive;

struct MyClass : public unordered_set_base_hook<>
{};

typedef unordered_set<MyClass>::bucket_type   bucket_type;
typedef unordered_set<MyClass>::bucket_traits bucket_traits2;

int main()
{
   bucket_type buckets[100];
   unordered_set<MyClass> uset(bucket_traits2(buckets, 100)); // FAILS
} 
```

错误信息：

/usr/include/boost/intrusive/hashtable.hpp:227:65: 错误：使用已删除的函数 'constexpr boost::intrusive::detail::bucket_traits_impl >::type>::bucket_traits_impl(const boost::intrusive: :detail::bucket_traits_impl >::type>&)'</p>

在来自 /usr/include/boost/intrusive/hashtable.hpp:30:0、来自 /usr/include/boost/intrusive/unordered_set.hpp:18、来自 t.cpp:23 的文件中：

/usr/include/boost/intrusive/detail/hashtable_node.hpp:80:8: 注意：'constexpr boost::intrusive::detail::bucket_traits_impl >::type>::bucket_traits_impl(const boost::intrusive::detail ::bucket_traits_impl >::type>&)' 被隐式声明为已删除，因为 'boost::intrusive::detail::bucket_traits_impl >::type>' 声明了移动构造函数或移动赋值运算符

这是它引用的代码，hashtable.hpp:227：

```
template<class BucketTraits>
bucket_plus_size(BOOST_FWD_REF(BucketTraits) b_traits)
   : bucket_traits_(::boost::forward<BucketTraits>(b_traits))
{} 
```

在 Boost 1.47 中，这是：

```
bucket_plus_size(const bucket_traits &b_traits)
   : bucket_traits_(b_traits)
{} 
```

`BOOST_FWD_REF(TYPE)`在我的系统上`TYPE &&`默认定义为，但如果`BOOST_NO_RVALUE_REFERENCES`已定义，则变为`const TYPE &`. 如果我确实这样定义它，代码就会编译！

关于为什么会这样的任何想法？是 GCC 的错、Boost、Fedora 的错还是我的错？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T13:57:43.853

这看起来与[http://gcc.gnu.org/bugzilla/show_bug.cgi?id=53234中描述的问题相同](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=53234)

即 Boost 1.48 假定 GCC 4.6 的旧行为，但 GCC 4.7 已更改为实现有关隐式定义的复制/移动构造函数的正确 C++11 语义。

# scala - 玩！2.0 Scala - 访问全局对象

> ID：10440864
> 
> 赞同：23
> 
> 时间：2012-05-03T23:44:10.717
> 
> 标签：scala, global, sbt, playframework-2.0

我已经声明了一个在应用程序启动时实例化的对象。我想在控制器中访问它，它是插件的一部分。我希望能够使用该插件，但我似乎无法超越第一部分——找到`MyWebsocketConnection`对象。没有一个示例显示如何执行此操作。我不想注入控制器，因为我正在编写一个插件（我在某处看到了如何做到这一点的静态示例）。

`Global.scala`, 插件应用程序\app\Global.scala

```
object Global extends GlobalSettings {

  object MyWebsocketConnection {
    val logger = // return something that gets instantiated once, like websocket object for logging to ui
  }

  class MyWebsocketConnection {
    import MyWebsocketConnection.logger
  }

  override def onStart(app: Application) {
    Logger.info("Application has started...");
  }

} 
```

我的自定义日志插件控制器：

`MyLogger.Scala`, 插件应用程序\app\controllers\MyLogger.scala

```
object MyLogger {

  def info(message: String) = {
    // THIS CAN'T BE FOUND ?
    // MyWebsocketConnection.logger.send(message)
  }

} 
```

所以，从戏剧！2.0 引用插件的应用程序，我会（可能）做类似下面的事情，但我什至无法超越这之前的部分：

`MyFutureController.scala`，另一场比赛！应用程序 \app\controllers\MyFutureController.scala

```
object MyFutureController extends Controller {
  def someRandomMethod = Action {
    // Custom logging
    MyLogger.info("Here's my log message!");
    Ok("This documentation stinks!")
  }
} 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-27T01:41:45.217

还有解决方法 #3：将您的 Global 类移动到一个包中，并在 application.conf 文件中指定其完全限定名称，如下所示：

> 全局= my.packaged.Global

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T05:51:10.720

问题是您的`Global`对象位于默认包中。在 Java 中，默认包中的类不能从其他包中引用，它们只能在同一个包中访问（默认）。

我看到了这个问题的两种解决方法。

1.  移动`MyWebsocketConnection`到某个命名包（比如`config`），以便可以在您的应用程序中访问它。

    ```
    object MyLogger {
      def info(message: String) = {
      config.MyWebsocketConnection.logger.send(message)
      }
    } 
    ```

2.  将您的整个应用程序移动到单个包中（但这很痛苦）

    ```
    foo
      |--controllers
      |--models
      |--views
      |--Global.scala 
    ```

    然后`Global`对象将驻留在`foo`包中，并且可以在应用程序中访问。

# java - 从 XML Element 及其子节点转换为 Java 中的 String 时得到奇怪的字符

> ID：10440867
> 
> 赞同：0
> 
> 时间：2012-05-03T23:44:23.537
> 
> 标签：java, xml

我使用下面链接中提到的转换器代码将 xml 元素及其子元素转换为 xml 字符串

[java - 如何将xml Element及其子节点转换为Java中的String？](https://stackoverflow.com/questions/5390385/how-to-convert-xml-element-and-its-child-nodes-into-string-in-java)

问题是我看到了一些奇怪的字符，只有第一个元素文本内容是纯文本，其余的是一些奇怪的编码

为了快速参考这里是代码

```
Transformer transformer = TransformerFactory.newInstance().newTransformer(); transformer.setOutputProperty(OutputKeys.INDENT, "yes");  
StreamResult result = new StreamResult(new StringWriter()); 
DOMSource source = new DOMSource(node);
transformer.transform(source, result);
String xmlString = result.getWriter().toString(); System.out.println(xmlString); 
```

输入如下所示

```
<Info ID="_65ae9406-63c9-4fd5-93a0-5ab1b5a3f3c7"
            IssueInstant="2012-02-11T09:53:52.722Z" Version="2.0"
            xmlns="urn:oasis:names:tc:SAML:2.0:assertion">
            <Issuer>https://localhost:8080/</Issuer>
            <ds:Signature xmlns:ds="http://www.w3.org/2000/09/xmldsig#">
                <ds:SignedInfo>
                    <ds:CanonicalizationMethod
                        Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#" />
                    <ds:SignatureMethod
                        Algorithm="http://www.w3.org/2001/04/xmldsig-more#rsa-sha256" />
                    <ds:Reference URI="#_65ae9406-63c9-4fd5-93a0-5ab1b5a3f3c7">
                        <ds:Transforms>
                            <ds:Transform
                                Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature" />
                            <ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#" />
                        </ds:Transforms>
                        <ds:DigestMethod Algorithm="http://www.w3.org/2001/04/xmlenc#sha256" />
                        <ds:DigestValue>IDHt1dgdR9k/toaocOxCVMiJhPjqRPyNSou4ywBA2YM=
                        </ds:DigestValue>
                    </ds:Reference>
                </ds:SignedInfo>
                <ds:SignatureValue>o5lTezATnGX+sllItfElMuabaFlpBed8wc8lAieigQ4JiIsgjIdHbg7gyyCpgk</ds:SignatureValue>

            <ds:Signature></Info> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T19:59:10.860

看：[DOMImplementationLS serialize to String in UTF-8 in Java](https://stackoverflow.com/questions/1636792/domimplementationls-serialize-to-string-in-utf-8-in-java)

注意这段：

```
StringWriter output = new StringWriter(); 
```

和：

```
String xml = output.toString(); 
```

上面的例子是调用`toString`字符串 writer，你是在`streamResult`.

尝试像那个例子那样打破它，看看它是否适合你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T01:02:39.303

尝试添加一个 XML 声明，指定 XML 文件的编码（示例中为 UTF-8）。也许它有帮助:)

```
<?xml encoding="UTF-8"?> 
```

# c# - 过滤一个BindingSource后如何获取对应的DataSet行号

> ID：10440873
> 
> 赞同：0
> 
> 时间：2012-05-03T23:45:19.400
> 
> 标签：c#, ms-access, binding

基本上我是通过`BindingSource`来自 a 的输入来过滤的`TextBox`。我通过执行以下操作来做到这一点：-

```
 //Filter Results
        bindingSource.Filter = "Term1 = '" + textBox1.Text + "'" + "AND Term2='" + textBox2.Text + "'";

        loc = bindingSource.Find("term2", textBox2.Text);

        BindingSource.Position = loc; 
```

但是，如果我现在希望通过使用 BindingSource.Position 作为当前行的指示来更新中的相应记录，`DataSet`它会更新数据集中不正确的行。我有一种感觉，这是因为我在绑定源中过滤了结果，所以会出现不匹配的情况。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T01:48:01.043

那么`BindingSource.Current`应该给你一个参考它绑定到的行。但是您不需要这样做，因为该行应该已经更新。

# java - 创建具有对外部类局部变量的完全访问权限的内部类

> ID：10440874
> 
> 赞同：1
> 
> 时间：2012-05-03T23:45:25.270
> 
> 标签：java, oop

所以这是场景。

我有一个 A 类，我希望它的一些方法根据类的调用方式表现不同。

我现在所做的是这样的：

```
interface Interface{
  public void someMethod();
}

class A{
  int variable;
  Interface getA1(){
    return new A1();
  }
  Interface getA2(){
    return new A2();
  }
  class A1 extends A implements Interface{
    public void someMethod(){
       variable++;
    }
  }
  class A2 extends A implements Interface{
    public void someMethod(){
       variable--;
    }
  }
} 
```

现在的问题是，当调用 getA1() 或 getA2() 时，它实际上会返回 A1 或 A2 的全新实例，其中 int 变量与父类 A 完全分离（duh，愚蠢的我当然这就是它的工作原理）。

所以问题是。java中是否有可能返回某种内部类，允许您通过它的方法修改外部类中的数据？

关键是有一个单一的类，它可以返回以不同方式修改该单一类的接口，具体取决于用于创建该接口的方法。

我可能在这里忽略了一些简单的事情，对不起，但这让我很困惑！:(

编辑：我认为解释它的更好方法是 -**我想直接访问局部变量、子类（或另一个类），并在原始类中有一个可以创建另一个类的方法。**

EDIT2：它在 getA1()/getA2() 时创建单独实例的原因可能是因为类 A1 和 A2 被声明为扩展 A。似乎如果删除了 extends 子句，那么它会按预期工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T23:53:50.323

是的，一个匿名类会做，例如

```
interface Interface{
  public void someMethod();
}

public class A {
    int variable;

    Interface getA1() {
        return new Interface() {
            @Override
            public void someMethod() {
                variable++;
            }
        };
    }
} 
```

应该指出的是，这相当于声明非静态内部类，尽管更简洁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T00:06:03.350

首先，我觉得*很*奇怪你的内部类正在扩展外部类。我想不出这样做的充分理由，我也不完全确定它到底能做什么。

除此之外，我不明白你的问题。所有内部类都可以访问其父类的字段。例如，以下内容：

```
public class Tester {
  private int myInt;

  public InnerTester getInnerTester() {
    return new MyInnerTester();
  }

  public InnerTester getOtherInnerTester() {
    return new OtherInnerTester();
  }

  public interface InnerTester {
    public void doStuff();
  }

  public class MyInnerTester implements InnerTester{
    @Override
    public void doStuff() {
      myInt++;
    }   
  }

  public class MyOtherInnerTester implements InnerTester {
    @Override
    public void doStuff() {
     myInt++;
    }
  }

  public static void main(String[] args) {
    Tester tester = new Tester();
    System.out.println("Before: " + tester.myInt);
    tester.getInnerTester().doStuff();
    tester.getOtherInnerTester().doStuff();
    System.out.println("After: " + tester.myInt);
  }   
} 
```

输出：

```
Before: 0
After: 2 
```

然而，这一切似乎都很阴暗。我不确定您为什么要利用这种行为。我以前对动作侦听器做过类似的事情，但我不会将它们的父对象称为“ActionListenerFactory”。为什么你没有一种方法来增加对象本身的字段？

# bit-manipulation - 如何使用按位运算符屏蔽整数

> ID：10440876
> 
> 赞同：2
> 
> 时间：2012-05-03T23:45:39.013
> 
> 标签：bit-manipulation, bitwise-operators, bitmask, bloom-filter

我想知道是否有一种方法可以使用按位运算符屏蔽 int 值列表，并使用该掩码来了解 int 值是否是掩码中的值之一。

即，如果我有值 129 和 17，如何计算一个掩码，告诉我掩码中是否有一个 int 值对应（如果 int 值是 129 或 17）。

我希望通过下一个伪代码更好地理解我的问题。

* ***编辑：我想仅在一个值（掩码）中打包、屏蔽或“压缩”一个 int 数组，然后只接受要屏蔽的值列表中的值（数组）。**

可能吗？提前致谢。

```
valuesToMask = [17, 129, ...]
mask = getmask(valuesToMask)
lstValues = [0,1, 10, ..., 17, 18, 19, ..., 129, ...]
foreach(int value, in lstValues) {
    if(check(mask,value)) 
       printf("\nValue %d is in the mask", value);
    else 
       printf("\nValue %d is not in the mask", value);
} 
```

提前致谢。我非常感谢您的帮助和您的时间。

（对不起我的英语不好）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T12:55:42.100

您可以使用[Bloom Filters](http://en.wikipedia.org/wiki/Bloom_filter)**部分**解决您的问题。其工作方式是，为了测试一组项目中的成员资格，您定义散列函数以将每个项目映射到一个位键。对于元素的插入，将过滤器的位设置在位置...等于1。对于元素的查找，如果您在任何...处检测到零位，则保证不在集合中。然而，根据 N、M 和 K 的值，您得到误报的可能性很小（即您没有从散列函数中检测到零，但之前没有存储在过滤器中）。`N``K``M``a``h1(a)``hk(a)``b``h1(b)``hk(b)``b``b`

在伪代码中：

```
const int M = 256;
typedef std::bitset<M> Mask;

int listValues[N] = { v1, ... , vN };
typedef unsigned char (*)(int) HashFunction; // maps int to 0...255
HashFunction hash[K] = { h1, ..., hK };

Mask make_mask(int x)
{
    Mask m(0):
    for (int i = 0; i < K; ++i) { 
        m[(hash[i])(x)] = 1; // update mask with item's hash
    }
    return(m);
}    

// initialize
Mask BloomFilter(0);
for (int i = 0; i < N; ++i) {        
    BloomFilter |= make_mask(listValues[i]);
}

// probe
bool is_not_in_filter(const Mask& F, int x)
{
    // if a zero-bit in F matches a 1-bit in make_mask(x), then x is not in F
    return ~F & make_mask(x) != 0; 
}

// call
int x = ...;
bool in_set = is_not_in_filter(BloomFilter, x); 
```

实际上，这会将每个项目扩展为一个 M 位密钥，并且过滤器是所有项目的聚合按位或。然后，对集合成员的测试变成了一个简单的（尽管是概率的）在 NEGATED 过滤器与要测试的 M 位扩展项之间的按位与。

**更新：** 上面的代码是伪代码来解释它是如何工作的。要获得一个实际的库，请参见例如实验性的[Boost.Bloomfilters](http://svn.boost.org/svn/boost/sandbox/bloom_filter/)或[bloom](http://code.google.com/p/bloom/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T23:49:32.250

您可以对*某些*值集执行此操作，但通常不一定如此。例如，如果您想确定一个值是 4、5、6 还是 7，那么您可以执行以下操作：

```
if ((value & ~3) == 4) ... 
```

这将创建一个掩码，除最低有效两位外，所有位都为 1。运算符有效地将`&`最低有效两位设置为 0。然后，比较会检查位模式是否与您要查找的值匹配。在二进制表示中，这如下所示（假设`value`是 8 位值）：

```
value        masked
00000011     00000000 = 0
00000100     00000100 = 4
00000101     00000100 = 4
00000110     00000100 = 4
00000111     00000100 = 4
00001000     00001000 = 8 
```

例如，如果您只想检查“4、5 或 7”，则此技术将不起作用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-03T23:50:32.263

我想你问如何检查一个数字是 129 还是 17。

```
int[] lstValues = [0,1, 10, 17, 18, 19, 129];
foreach(int value in lstValues) {
    if(lstValues == 129 || lstValues == 17) 
        printf("\nValue is in the mask");
    else 
        printf("\nValue is not in the mask");
} 
```

# iphone - 如何以编程方式更改初始标签栏选择

> ID：10440884
> 
> 赞同：10
> 
> 时间：2012-05-03T23:46:33.160
> 
> 标签：iphone, objective-c, ios, uitabbarcontroller

在更改应用程序上的初始选项卡栏选择时遇到问题（即在应用程序启动时选择中间选项卡而不是最左侧的选项卡）。该应用程序使用情节提要，并且标签栏控制器后来通过情节提要方法在开发中添加。

```
tabBarController.selectedIndex = 1; 
```

上面的代码不起作用（因为我没有连接到我的标签栏的自定义视图控制器，只有默认的 UITabBarController）：

做了一些谷歌搜索并查看了许多不同的资源，但对于最初不是使用 Apple 的模板标签栏应用程序创建的应用程序，还没有找到解决方案。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-04T00:32:22.277

由于这是初始视图控制器，并且不是子类，因此您需要在 appDelegate 中设置它。

在 AppDelegate.m 中，将以下内容添加到您的`application:didFinishLaunchingWithOptions:`方法中：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // Override point for customization after application launch.

    // Select the left-most tab of our initial tab bar controller:
    UITabBarController *tabBar = (UITabBarController *)self.window.rootViewController;
    tabBar.selectedIndex = 0;
    return YES;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T23:52:24.420

`tabBar setSelectedItem:`尝试在你的`viewDidLoad`

# deployment - Code First 模型和新版本软件的部署

> ID：10440888
> 
> 赞同：0
> 
> 时间：2012-05-03T23:47:07.553
> 
> 标签：deployment, entity-framework-4, code-first, database-first

我目前正在查看实体框架并使用 Code First 示例。到目前为止，我可以看到框架无法轻松处理模型更改：每当我想向类/表添加另一个字段时，框架都会删除整个数据库并从头开始创建它。

我在 (N)Hibernate 中看到的类似行为。（我可能错了，很久以前）

没关系，只要我在做教程。当涉及到实际项目时，您无法承受每次需要表中的新字段时都删除数据库。

想象一下场景，您正在与许多客户一起开展一个项目。每个客户都有自己的数据库。在 1.0.1 版中，我需要在其中一个表中添加一个新字段。如果我在我的开发环境中删除数据库 - 没什么大不了的。（不过，每次删除数据库时，我都需要运行一个脚本来填充测试数据，有时甚至这也不可行）

但是当我需要部署这个新版本时我该怎么办？制作一个 SQL 脚本来更新客户端的数据库而不删除它们？然后部署二进制文件？

但这比将数据库模块与代码更改分开有什么好处呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T07:58:50.487

（对不起，我的英语不好）

这正是存在 Code First 迁移的原因。看看[这里（自动迁移）](http://blogs.msdn.com/b/adonet/archive/2012/02/09/ef-4-3-automatic-migrations-walkthrough.aspx)和[这里（基于代码的迁移）](http://blogs.msdn.com/b/adonet/archive/2012/02/09/ef-4-3-code-based-migrations-walkthrough.aspx)

# php - 为什么这个查询只显示一个结果？

> ID：10440905
> 
> 赞同：1
> 
> 时间：2012-05-03T23:50:07.993
> 
> 标签：php, sql, search, conditional-statements, sql-like

即使有多个匹配条目（完全或部分匹配），我在下面的查询也只会显示一个结果。如何修复它，以便它返回所有匹配的条目：

```
//$allowed is a variable from database.

$sql = "SELECT `users`.`full_name`, `taglines`.`name`, `users`.`user_id` FROM 
`users`  LEFT JOIN `taglines` ON `users`.`user_id` = `taglines`.`person_id`
 WHERE ( `users`.`user_settings` = '$allowed' ) and ( `users`.`full_name` 
 LIKE '%$q%' ) LIMIT $startrow, 15";

$result = mysql_query($sql);

$query = mysql_query($sql) or die ("Error: ".mysql_error());

$num_rows1 = mysql_num_rows($result);

if ($result == "")
{
    echo "";
}
echo "";

$rows = mysql_num_rows($result);

if($rows == 0)
{

}
elseif($rows > 0)
{
    while($row = mysql_fetch_array($query))
    {
        $person = htmlspecialchars($row['full_name']);
    }
}
}  

print $person; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T23:54:13.453

`$person`因为您在每次迭代时都会覆盖。

`$person[]`如果您期望超过一个，请将其保存在一个数组中。然后在您打算输出时使用 foreach 循环遍历它。

不相关但您也查询两次，您只需要 1`$result = mysql_query($sql);`

## 更新（简单输出示例）：

```
<?php 
$person=array();

while($row = mysql_fetch_array($query)){
 $person[] = array('full_name'=>$row['full_name'],
                   'email'=>$row['email'],
                   'somthing_else1'=>$row['some_other_column']);
}

//Then when you want to output:
foreach($person as $value){
    echo '<p>Name:'.htmlentities($value['full_name']).'</p>';
    echo '<p>Eamil:'.htmlentities($value['email']).'</p>';
    echo '<p>FooBar:'.htmlentities($value['somthing_else1']).'</p>';
}
?> 
```

或者另一种方法是使用连接在循环内构建输出。

```
<?php 
$person='';
while($row = mysql_fetch_array($query)){
 $person .= '<p>Name:'.$row['full_name'].'</p>';
 $person .= '<p>Email:'.$row['email'].'</p>';
}

echo $person;
?> 
```

或者只是回应它。

```
<?php 
while($row = mysql_fetch_array($query)){
 echo '<p>Name:'.$row['full_name'].'</p>';
 echo '<p>Email:'.$row['email'].'</p>';
}
?> 
```

# android - 在没有发布者帐户的情况下创建使用扩展文件的应用程序

> ID：10440907
> 
> 赞同：0
> 
> 时间：2012-05-03T23:50:29.170
> 
> 标签：android, google-play, expansion-files

我刚刚开始为 Android 开发，我没有 Google Play 开发者的许可证。对于我的应用程序，我必须使用 APK 扩展文件。

我试图应用包含在 play_apk_expansion 中的 downloader_sample 代码，但是得到了这个方法抛出的 InvalidKeySpecException

```
private static PublicKey generatePublicKey(String encodedPublicKey) {
    try {
        byte[] decodedKey = Base64.decode(encodedPublicKey);
        KeyFactory keyFactory = KeyFactory.getInstance(KEY_FACTORY_ALGORITHM);
        return keyFactory.generatePublic(new X509EncodedKeySpec(decodedKey));
    } catch (NoSuchAlgorithmException e) {
        // This won't happen in an Android-compatible environment.
        throw new RuntimeException(e);
    } catch (Base64DecoderException e) {
        Log.e(TAG, "Could not decode from Base64.");
        throw new IllegalArgumentException(e);
    } catch (InvalidKeySpecException e) {
        Log.e(TAG, "Invalid key specification.");
        throw new IllegalArgumentException(e);
    }
} 
```

我也有

```
public class SampleDownloaderService extends DownloaderService {
// You must use the public key belonging to your publisher account
public static final String BASE64_PUBLIC_KEY = "MyLVLKey";
// You should also modify this salt
public static final byte[] SALT = new byte[] { 1, 42, -12, -1, 54, 98,
        -100, -12, 43, 2, -8, -4, 9, 5, -106, -107, -33, 45, -1, 84
}; 
```

我如何在没有真实发布者帐户的情况下测试我的应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T23:03:25.137

APK 扩展项目的示例代码在调用下载器函数之前对文件是否存在进行了特定检查。确保您的文件位于 SD 卡上并直接访问它。

要按原样使用内置下载器，您需要一个发布者帐户，因为这些文件托管在 Google Play 上。通过细微的更改，您可以使用下载器从任何您想要的地方下载，例如本地服务器。

# android - 在 ListView 中显示来自 xml 资源的数组不起作用

> ID：10440912
> 
> 赞同：1
> 
> 时间：2012-05-03T23:51:14.853
> 
> 标签：android, xml, arrays, android-listview

我的资源中有一个数组，我想在其中显示，`ListView`但我失败得很惨，所以也许有人可以告诉我我做错了什么以及我应该怎么做才能做到这一点。这是我使用的代码：

在我的 XML 资源中：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
<string name="app_name">myApp</string>
<string-array name="EstadosArray">
    <item >Estado1</item>
    <item >Estado2</item>
    <item >Estado3</item>
    <item >Estado4</item>
    <item >Estado5</item>
    <item >Estado6</item>        
</string-array>
</resources> 
```

在我的活动中：

```
public class myMain extends Activity{
String[] Estados;
eAdapter ea=null;
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
            setContentView(R.layout.main);

    Estados = getResources().getStringArray(R.array.EstadosArray);
    ea = new eAdapter();
    ListView EstadosList = (ListView) findViewById(R.id.estadosList);
    EstadosList.setAdapter(ea);

}

class eAdapter extends ArrayAdapter<String> {
    eAdapter() {
            super(myMain.this, android.R.layout.simple_list_item_1, Estados);
            }
    public View getView(int position, View convertView, ViewGroup parent) {
        eHolder holder;
        if (convertView == null) {
            LayoutInflater inflater = getLayoutInflater();
            convertView = inflater.inflate(R.layout.esatdoitem, null);
            holder = new eHolder(convertView);
            convertView.setTag(holder);
        } else {
            holder = (eHolder) convertView.getTag();
        }
        holder.populateFrom(Estados.get(position));  // HERE IS WHERE I HAVE THE issue is, I DON'T KNOW HOW TO GET THE POSITION, IS GIVING ME AN ERROR (CANNOT INVOKE GET(INT) ON THE ARRAY TYPE STRING[])
        return (convertView);
    }

}
class eHolder{
    public TextView esname=null;
    eHolder(View row) {
        esname = (TextView) row.findViewById(R.id.ename);
    }
    void populateFrom(String est) {
        esname.setText(est);
    }
} 
```

我知道问题是因为 string[] 不是 int 但我该如何解决？这就是我将如何填写我的列表的每一行。

编辑：`LogCat`添加：

```
05-03 17:09:46.290: E/AndroidRuntime(271):  at com.zvzej.jlgproapps.mexicoguia.myMain$eHolder.populateFrom(myMain.java:468)
05-03 17:09:46.290: E/AndroidRuntime(271):  at com.zvzej.jlgproapps.mexicoguia.myMain$eAdapter.getView(myMain.java:456)
05-03 17:09:46.290: E/AndroidRuntime(271):  at android.widget.AbsListView.obtainView(AbsListView.java:1315)
05-03 17:09:46.290: E/AndroidRuntime(271):  at android.widget.ListView.measureHeightOfChildren(ListView.java:1198)
05-03 17:09:46.290: E/AndroidRuntime(271):  at android.widget.ListView.onMeasure(ListView.java:1109)
05-03 17:09:46.290: E/AndroidRuntime(271):  at android.view.View.measure(View.java:8171)
05-03 17:09:46.290: E/AndroidRuntime(271):  at android.widget.RelativeLayout.measureChild(RelativeLayout.java:563)
05-03 17:09:46.290: E/AndroidRuntime(271):  at android.widget.RelativeLayout.onMeasure(RelativeLayout.java:378)
05-03 17:09:46.290: E/AndroidRuntime(271):  at android.view.View.measure(View.java:8171)
05-03 17:09:46.290: E/AndroidRuntime(271):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3132)
05-03 17:09:46.290: E/AndroidRuntime(271):  at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1012)
05-03 17:09:46.290: E/AndroidRuntime(271):  at android.widget.LinearLayout.measureVertical(LinearLayout.java:381)
05-03 17:09:46.290: E/AndroidRuntime(271):  at android.widget.LinearLayout.onMeasure(LinearLayout.java:304)
05-03 17:09:46.290: E/AndroidRuntime(271):  at android.view.View.measure(View.java:8171)
05-03 17:09:46.290: E/AndroidRuntime(271):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3132)
05-03 17:09:46.290: E/AndroidRuntime(271):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:245)
05-03 17:09:46.290: E/AndroidRuntime(271):  at android.view.View.measure(View.java:8171)
05-03 17:09:46.290: E/AndroidRuntime(271):  at android.widget.LinearLayout.measureVertical(LinearLayout.java:526)
05-03 17:09:46.290: E/AndroidRuntime(271):  at android.widget.LinearLayout.onMeasure(LinearLayout.java:304)
05-03 17:09:46.290: E/AndroidRuntime(271):  at android.view.View.measure(View.java:8171)
05-03 17:09:46.290: E/AndroidRuntime(271):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3132)
05-03 17:09:46.290: E/AndroidRuntime(271):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:245)
05-03 17:09:46.290: E/AndroidRuntime(271):  at android.view.View.measure(View.java:8171)
05-03 17:09:46.290: E/AndroidRuntime(271):  at android.view.ViewRoot.performTraversals(ViewRoot.java:801)
05-03 17:09:46.290: E/AndroidRuntime(271):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1727)
05-03 17:09:46.290: E/AndroidRuntime(271):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-03 17:09:46.290: E/AndroidRuntime(271):  at android.os.Looper.loop(Looper.java:123)
05-03 17:09:46.290: E/AndroidRuntime(271):  at android.app.ActivityThread.main(ActivityThread.java:4627)
05-03 17:09:46.290: E/AndroidRuntime(271):  at java.lang.reflect.Method.invokeNative(Native Method)
05-03 17:09:46.290: E/AndroidRuntime(271):  at java.lang.reflect.Method.invoke(Method.java:521)
05-03 17:09:46.290: E/AndroidRuntime(271):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
05-03 17:09:46.290: E/AndroidRuntime(271):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
05-03 17:09:46.290: E/AndroidRuntime(271):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T23:55:09.087

你有没有尝试过：

```
holder.populateFrom(Estados[position]); 
```

**添加**

这是：

```
 esname = (TextView) row.findViewById(R.id.ename); 
```

应该是：

```
 esname = (TextView) row.findViewById(R.id.esname); 
```

# php - 某些 PHP 函数在映射的网络驱动器上无法正常工作

> ID：10440920
> 
> 赞同：2
> 
> 时间：2012-05-03T23:52:33.353
> 
> 标签：php, ubuntu, file-permissions, network-drive

我通过添加命令在 Ubuntu 上安装了网络驱动器（运行 Windows Server 2008）

```
//10.10.101.54/docflow /opt/lampp/htdocs/mount cifs user=administrator,password=wbaZaja43ik,rwx,user,auto,file_mode=6777,dir_mode=6777,uid=1000,gid=1000 
```

但在`/etc/fstab`使用 PHP 函数`is_file()`或`is_dir()`映射驱动器上的文件和目录时遇到问题。这些函数在现有文件或目录上调用时都返回 FALSE - 正确的路径由`file_exists()`正常工作的函数检查。PHP 在“管理员”用户下运行，并拥有操作所需的所有权限。

知道如何解决这个问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T00:15:24.687

在 php 手册中 gmail dot com 的[评论](http://php.net/manual/en/function.is-dir.php#98338)中引用 digitalaudiorock ：

> 对于遇到 is_dir() 在 CIFS 挂载点或 2.6.31 和更新内核上的挂载点内的目录返回 false 的任何人的说明：显然在新内核中，他们默认开始使用 CIFS serverino 选项。对于 Windows 共享，这会导致大量的 inode 数量，这显然会导致 is_dir() 返回 false。将 noserverino 选项添加到 CIFS 挂载将防止这种情况发生。这可能只发生在 32 个系统上，但我没有 64 位安装来测试。

# php - 访问子类中的父属性值

> ID：10440922
> 
> 赞同：2
> 
> 时间：2012-05-03T23:52:57.213
> 
> 标签：php

我有一个奇怪的问题，我在父类中设置值，但无法在扩展父类的子类中访问这些值。

```
class Parent
{
    protected $config;

    public function load($app)
    {
        $this->_config();
        $this->_load($app);
    }

    private function _config()
    {
        $this->config = $config; //this holds the config values
    }

    private function _load($app)
    {
        $app = new $app();
        $this->index;
    }
}

class Child extends Parent
{
    public function index()
    {
        print_r($this->config); // returns an empty array
    }
}

$test = new Parent();
$test->load('app'); 
```

当我这样做时，我会打印出一个空数组。但是如果我这样做，那么我就可以访问这些配置值。

```
private function _load($app)
{
    $app = new $app();
    $app->config = $this->config
    $app->index;

} 
```

和

```
class Child extends Parent
{
    public $config;
          ....
} 
```

然后我可以从父级访问配置数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T00:02:19.180

在初始化任何内容之前，您正在访问这些值。首先，您必须设置值。

例子：调用一个方法是父类，它设置值，放在子类的构造函数上。

```
class Child extends Parent
{
    public function __construct() {
       $this -> setConfig(); //call some parent method to set the config first
    }
    public function index()
    {
        print_r($this->config); // returns an empty array
    }
} 
```

* * *

**更新：**您似乎也对 OOP 的概念感到困惑

```
class Parent { ..... }
class child extends Parent { ..... }
$p = new Parent(); // will contain all method and properties of parent class only
$c = new Child(); // will contain all method and properties of child class and parent class 
```

但是，您必须像在普通对象中一样使用父方法和属性。

让我们看另一个例子：

```
class Parent { 
     protected $config = "config";
}
class Child extends Parent {
     public function index() {
           echo $this -> config; // THis will successfully echo "config" from the parent class
     }
} 
```

但另一个例子

```
class Parent { 
     protected $config;
}
class Child extends Parent {
     public function index() {
           echo $this -> config; //It call upon the parent's $config, but so far there has been no attempt to set an values on it, so it will give empty output.
     }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T23:58:18.770

这是因为父级中的属性受到保护。将其设置为公开，您可以在子类中访问它。或者，在返回配置的父类中创建一个方法：

```
public function getConfig()
{
    return $this->config;
} 
```

# antlr - ANTLR 变量问题

> ID：10440923
> 
> 赞同：1
> 
> 时间：2012-05-03T23:53:00.723
> 
> 标签：antlr, antlr3

**简而言之：如何在 ANTLR 中实现动态变量？**
我再次带着一个基本的 ANTLR 问题来找你。
我有这个语法：

```
grammar Amethyst;

options {
    language = Java;
}

@header {
    package org.omer.amethyst.generated;
    import java.util.HashMap;
}

@lexer::header {
    package org.omer.amethyst.generated;
}

@members {
    HashMap memory = new HashMap();
}

begin: expr;

expr: (defun | println)*
;

println:
    'println' atom {System.out.println($atom.value);}
;

defun:
    'defun' VAR INT {memory.put($VAR.text, Integer.parseInt($INT.text));}
    | 'defun' VAR STRING_LITERAL {memory.put($VAR.text, $STRING_LITERAL.text);}
;

atom returns [Object value]:
    INT {$value = Integer.parseInt($INT.text);}

    |   ID
    {
    Object v = memory.get($ID.text);
    if (v != null) $value = v;
    else System.err.println("undefined variable " + $ID.text);
    }

| STRING_LITERAL
  {
    String v = (String) memory.get($STRING_LITERAL.text);
    if (v != null) $value = String.valueOf(v);
    else System.err.println("undefined variable " + $STRING_LITERAL.text);
  }
;

INT: '0'..'9'+ ;
STRING_LITERAL: '"' .* '"';

VAR: ('a'..'z'|'A'..'Z')('a'..'z'|'A'..'Z'|'0'..'9')* ;
ID: ('a'..'z'|'A'..'Z'|'0'..'9')+ ;
LETTER: ('a..z'|'A'..'Z')+ ;
WS: (' '|'\t'|'\n'|'\r')+ {skip();} ; 
```

到目前为止，它所做的（或应该做的）是有一个内置的“println”函数来做你认为它做的事情，以及一个定义变量的“defun”规则。
当对字符串或整数调用“defun”时，该值被放入“memory”HashMap，第一个参数是变量名，第二个参数是它的值。
当对原子调用 println 时，它应该显示原子的值。原子可以是字符串或整数。它从内存中获取它的值并返回它。例如：

```
defun greeting "Hello world!"

println greeting 
```

但是当我运行这段代码时，我得到了这个错误：

```
line 3:8 no viable alternative at input 'greeting'
null 
```

注意：当我这样做时，会出现此输出：

```
println "greeting" 
```

输出：

```
undefined variable "greeting"null 
```

有谁知道为什么会这样？对不起，如果我不清楚，我不明白这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T06:55:10.367

> ```
> defun greeting "Hello world!"
> 
> println greeting 
> ```
> 
> 但是当我运行这段代码时，我得到了这个错误：
> 
> 第 3:8 行在输入“问候”时没有可行的替代方案

因为输入`"greeting"`被标记为 a`VAR`而 a`VAR`是 no `atom`。因此输入与规则的^(第二种)选择`defun greeting "Hello world!"`正确匹配：^(`defun`)

```
defun
 : 'defun' VAR INT               // 1st alternative
 | 'defun' VAR STRING_LITERAL    // 2nd alternative
 ; 
```

但输入`println "greeting"`不能被`println`规则匹配：

```
println
 : 'println' atom
 ; 
```

您必须意识到词法分析器不会根据解析器在特定时间尝试匹配的内容来生成标记。输入`"greeting"`将始终被标记为 a `VAR`，而不是作为`ID`规则。

您需要做的是`ID`从词法分析器中删除规则，并在解析器规则中替换`ID`为。`VAR`

# c++ - Python 和 C++ 中的配置文件进程

> ID：10440924
> 
> 赞同：1
> 
> 时间：2012-05-03T23:53:07.187
> 
> 标签：c++, python, configuration

关于如何分别在 python 和 C++ 中解析/创建配置文件有很多问题和答案。就我而言，我只有一个配置文件，需要由 python 和 C++ 处理（读/写）。

在 python 世界中，ConfigParser 很流行；在 C++ 中，libconfig 看起来不错。但他们使用不同的格式。我正在寻找的是一块能够同时杀死两只鸟的石头。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T00:21:45.390

想到的一个明显的解决方案是使用类似于 YAML 或 JSON 的东西，您应该会发现它们支持多种语言。

# perl - 当按顺序加载模块时，如何使用 Test::NoWarnings 捕获 EXPORT() 子例程的重新定义错误

> ID：10440927
> 
> 赞同：1
> 
> 时间：2012-05-03T23:53:21.467
> 
> 标签：perl, unit-testing, warnings

我正在为我们的部分代码库使用基于[Test::More](https://metacpan.org/module/Test::More)的单元测试，该代码库按顺序加载我们所有的内部模块`use_ok()`。我想让警告对单元测试来说是致命的，这样我们就可以更容易地捕捉到回归。

[这里](https://stackoverflow.com/a/1353185/1207563)建议我使用[Test::NoWarnings](https://metacpan.org/module/Test::NoWarnings)，实际上这似乎是我正在寻找的。

脚本在这里：

```
#!/usr/bin/perl -w
use File::Find;
use File::Spec;
use Test::More;
use Test::NoWarnings;

# Determine the filepaths of every .pm file in the lib directory
my @files;
File::Find::find(
    sub
    {
        if (/\.pm$/)
        {
            push(@files, $File::Find::name);
        }
    },
    "$ENV{'CODE_ROOT'}/lib"
);
done_testing(scalar(@files) + 1);

use lib "$ENV{'CODE_ROOT'}/lib";
foreach my $file (@files)
{
    # <code removed for brevity: format file name into Module::Hierarchy::For::Use>
    use_ok($includeString);
}

1; 
```

我遇到过一些`EXPORT()`不同模块编辑的子例程引发重新定义警告的情况，但这些警告没有被`Test::NoWarnings`模块捕获。相反，由于小写属性声明引起的警告被正确捕获。

需要明确的是，我*已经*阅读了有关使用`EXPORT()`vs`EXPORT_OK()`的警告，并且正在处理警告的来源。我特别想知道我对 的行为的假设是否`Test::NoWarnings`正确，如果是，我如何更改单元测试以便捕获此类事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-03-30T20:52:32.463

如果你想让警告变得致命，那么打开它怎么样？

```
use strict;
use warnings FATAL => 'all'; 
```

是的，用于`warnings`pragma 的 POD 强烈警告不要使用此选项：

> 应谨慎使用致命警告，尤其是`FATAL => 'all'`

和

> 不鼓励使用 FATAL => 'all'

但我认为在回归或单元测试中使用是一个有效的用例。很长一段时间以来，我一直在我的所有单元和回归测试中使用它，但没有出现意外后果。我认为`Test::Warn`并且`Test::NoWarnings`最适合用于捕获模块自身的警告，包括预期的和意外的。

```
use strict;
use warnings FATAL => 'all';
use Test::More;
use Test::Warn;             # test for our own expected warnings                
require Test::NoWarnings;   # REQUIRE to suppress auto test at program exit     

my $tCnt = 0;
ok(1, "first test");                                               $tCnt++;
warning_like { warn("my warn") } (qr/my warn/), "caught warning";  $tCnt++;
ok(1, "made it to the end");                                       $tCnt++;
Test::NoWarnings::had_no_warnings();                               $tCnt++;

done_testing($tCnt); 
```

如果你抛出一个像`length("123");`(void context) 这样的语句，编译时警告将立即启动你并`FATALS => 'all'`生效。没有它，所有的测试都会运行并通过，没有任何潜在问题的迹象。

# c# - xmlnode insertafter secondchild ...或第三个？

> ID：10440930
> 
> 赞同：0
> 
> 时间：2012-05-03T23:54:00.047
> 
> 标签：c#, xml, xmlnode, css-selectors, insertafter

我知道这似乎是一个愚蠢的问题，我曾尝试检查 msdn 文档并搜索此站点一段时间。不幸的是，我无法真正理解如何做到这一点。

我想在第二个或第三个孩子之后插入一个节点。我的 XML 的主要内容在它的孙子中，当我使用 root.insertafter 时，我把它放在第一个孩子之后。

**XML:**

```
<myCourse>
  <courseName>BEng Mobile and Web Computing</courseName>
  <courseStructure>
    <module>
      <moduleTitle>Programming Methodology</moduleTitle>
      <credits>15</credits>
      <semester>1</semester>
    </module>
    <module>
      <moduleTitle>Computer Systems Fundamentals</moduleTitle>
      <credits>15</credits>
      <semester>1</semester>
    </module>
  </courseStructure>
</myCourse> 
```

**和代码：**

```
 private void buttonCreateNode_Click(object sender, EventArgs e)
    {
        // Load the XML document.
        XmlDocument document = new XmlDocument();
        document.Load(@"temp.xml");

        // Get the root element.
        XmlElement root = document.DocumentElement;

        // Create the new nodes.
            XmlElement newModule = document.CreateElement("module");
            XmlElement newTitle = document.CreateElement("moduleTitle");
            XmlElement newCredits = document.CreateElement("credits");
            XmlElement newSemester = document.CreateElement("semester");
            XmlText title = document.CreateTextNode("ECA411");
            XmlText credits = document.CreateTextNode("15");
            XmlText semester = document.CreateTextNode("1");

            // Insert the elements.
            newBook.AppendChild(newTitle);
            newBook.AppendChild(newCredits);
            newBook.AppendChild(newSemester);
            newTitle.AppendChild(title);
            newCredits.AppendChild(credits);
            newSemester.AppendChild(semester);
            root.InsertAfter(newModule, root.LastChild);

        document.Save(@"temp.xml"); 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T07:13:01.497

感谢您的帮助@Mikkelbu。

然而，我找到了解决我的问题的方法，我现在可以在哪里完成我试图实现的目标。

如下：

```
XmlNode parentNode = document.SelectSingleNode("myCourse/courseStructure/level4");
            parentNode.InsertBefore(newModule, parentNode.FirstChild); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T12:26:02.493

如果我理解您的问题是正确的，那么您想在带有标题的模块之后插入新模块`Computer Systems Fundamentals`。如果是这样，那么您需要更改插入的根。所以你可以换行

```
XmlElement root = document.DocumentElement; 
```

至

```
XmlNode root = document.DocumentElement.LastChild; 
```

我还将变量名称`root`更改为例如`courseStructureNode`，并相应地更正注释。

附言。要编译代码，您还需要更改`newBook`为`newModule`.

# xpages - 收集标签计数

> ID：10440932
> 
> 赞同：0
> 
> 时间：2012-05-03T23:54:04.067
> 
> 标签：xpages, lotus-domino

我想从 stackexchange 站点复制功能：每次您有问题列表时，右侧都会列出其中显示的所有标签，包括它们的计数（频率）。是否有任何性能友好的方式，如何在不迭代视图的每个元素的情况下获得这种信息？假设它应该与普通视图数据源一起使用，并且视图的内容可以通过过滤器（键、类别）或全文进行更改。我已经考虑过（并拒绝）几个解决方案：

*   遍历集合 - 出于性能原因无法使用（特别是如果 ViewNavigator 无法使用 - FT 查询）。*   计算呈现内容中的标签 - 仅限于可见页面，不计算其他页面的标签（stackexchange 计算每个页面的标签）。不过表现不错。*   DocumentCollection.intersect - 遍历所有标签，并将所有带有该标签的文档的集合与源集合相交，将导致带有此类标签的文档计数。这种方法是性能杀手。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T03:51:42.670

您可以使用带有摘要列的分类视图并在 json 中查询它。需要折叠。?ReadViewEntries&Outputformat=json

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T04:11:23.450

我会考虑两种基本方法：

1.  将标签存储在问题文档的多值摘要文本字段中，基于该字段创建分类视图，打开视图，创建 NotesViewNavigator，使用 CreateViewNavFromCategory 创建仅包含与标签匹配的文档的 NotesViewNavigator，以及获取 NotesViewNavigator.count() 属性值。

2.  将标签存储在问题文档中的字段（可以是多值或单值，摘要或非摘要文本甚至是富文本字段）中，全文索引数据库，并使用 Database.FTSearch 方法与使用 FIELD 关键字获取 NotesDocumentCollection 并使用 NotesDocumentCollection.count() 属性的搜索公式。

对于过滤，我认为后一种方法可能更好。您也许可以只修改您的 FT 查询以包含其他条件来完成过滤。这可能非常灵活，并且应该非常快。另一方面，使用 NotesViewNavigator 时，您必须遍历 NotesViewEntry 对象才能进行过滤。

# java - 具有平方像素的 ImageView（无插值）

> ID：10440934
> 
> 赞同：2
> 
> 时间：2012-05-03T23:54:20.800
> 
> 标签：java, android, bitmap

我有一个 9X11 像素的位图，代表一个迷宫，路径为绿色，墙壁为黑色，以橙色和蓝色结尾。

它的矩阵是：

```
int[][] map = new int[][] { 
            { 1, 1, 1, 1, 1, 1, 1, 1, 1 }, 
            { 0, 0, 1, 0, 0, 0, 0, 0, 1 },
            { 1, 1, 1, 1, 0, 1, 1, 0, 1 }, 
            { 1, 1, 1, 1, 1, 1, 1, 0, 0 },
            { 1, 0, 0, 0, 0, 1, 0, 0, 0 }, 
            { 1, 1, 1, 1, 0, 1, 1, 1, 1 },
            { 1, 1, 1, 1, 0, 1, 0, 0, 1 }, 
            { 1, 1, 1, 1, 0, 1, 0, 0, 1 },
            { 1, 1, 1, 1, 0, 1, 0, 0, 1 }, 
            { 1, 1, 1, 1, 0, 1, 0, 0, 0 },
            { 1, 1, 1, 1, 0, 1, 1, 1, 1 }, }; 
```

问题是当我在 ImageView (fill_parent,fill_parent) 中绘制位图时，结果是： ![在此处输入图像描述](../Images/c65d719c1c76a2eb24c4063b6c24ebc4.png)

如何保持像素平方？

注意：我创建位图

```
 Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888); 
```

并使用方法设置像素

```
 bitmap.setPixel(x,y,Color.XXX); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T04:17:38.140

如果您希望在不使用抗锯齿的情况下缩放图像视图，您真正需要做的是获取 BitmapDrawable。例子：

```
BitmapDrawable bd = new BitmapDrawable(activity.getResources(), bitmap);
bd.setAntiAlias(false); 
```

# python - Django Forms BooleanField 单元测试用例有什么问题？

> ID：10440937
> 
> 赞同：3
> 
> 时间：2012-05-03T23:54:35.343
> 
> 标签：python, django, django-forms

我完全被困在这里。为什么这个测试用例会失败？

```
class BogusForm(forms.Form):
    bogus_bool = forms.BooleanField() 

class TestBogusForm(TestCase):

    def test_bogus_false(self):
        query_dict = QueryDict('', mutable=True)
        query_dict.update({'bogus_bool': False})
        bogus_form = BogusForm(query_dict)
        self.assertTrue(bogus_form.is_valid()) 
```

它无法通过表单字段验证，**但前提是当我更新 QueryDict 时 bogus_bool 为 False**。如果我说：

```
query_dict.update({'bogus_bool': True}) 
```

然后它通过验证。这里发生了什么？这是 Django 表单中的错误吗？

如果在将 QueryDict 传递给 BogusForm 构造函数之前查看它，它看起来像这样：

```
<QueryDict: {u'bogus_bool': [False]}> 
```

这对我来说看起来完全合法和正确。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T00:16:36.213

来自 django 的[文档](https://docs.djangoproject.com/en/1.4/ref/forms/fields/#booleanfield)

> 由于所有的 Field 子类默认都有 required=True ，所以这里的验证条件很重要。如果您想在表单中包含一个可以为 True 或 False 的布尔值（例如选中或未选中的复选框），您必须记住在创建 BooleanField 时传入 required=False。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T21:51:10.867

我同意这是不正确的行为。

这应该适用于特定领域：

```
class BogusForm(forms.Form):
    bogus_bool = forms.BooleanField(required=False)

    def clean_bogus_bool(self):
        field_name = 'bogus_bool'
        if field_name not in self.data:
            raise forms.ValidationError("This field is required.")
        return self.cleaned_data[field_name] 
```

这应该对表单上的所有 bool 字段执行此操作：

```
class BooleanFieldsRequiredMixin(forms.Form):
    def clean(self):
        for field_name, field in self.fields.iteritems():
            # Only BooleanField not subclasses of it.
            if type(field) is not forms.BooleanField:
                continue

            if field_name not in self.data:
                self._errors[field_name] = self.error_class(["This field is required."])

        return super(BooleanFieldsRequiredMixin, self).clean()

class BogusForm(BooleanFieldsRequiredMixin, forms.Form):
    bogus_bool = forms.BooleanField(required=False) 
```

有一种方法可以通过不需要`required=False`布尔字段上的那个位来使其变得更好，但目前不值得付出努力。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T00:01:55.277

这是因为您的 bogus_bool 默认情况下是必填字段。

```
class BogusForm(forms.Form):
    bogus_bool = forms.BooleanField(required=False) 
```

应该做的伎俩。

# matlab - 有什么作用。运算符在matlab中做什么？

> ID：10440940
> 
> 赞同：2
> 
> 时间：2012-05-03T23:54:41.753
> 
> 标签：matlab, operators, dot-operator

我遇到了一些执行以下操作的matlab代码：

```
thing.x=linspace(... 
```

我知道通常`.`操作员会按元素进行下一个操作，但它自己做**了**什么？这只是一个子对象运算符，就像在 C++ 中一样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T00:04:18.053

是的，它的子对象。

你可以有像 Roger.lastname = "Poodle"; 这样的东西。罗杰.SSID = 111234997; Roger.children.boys = {“吉姆”，“约翰”}；Roger.children.girls = {"露西"};

点右边的东西称为字段。

您还可以在 Matlab 中定义类，实例化这些类的对象，然后如果`thing`是这些对象之一，`thing.x`则将是该对象中的实例变量。

matlab 文档非常好，在其中查找“字段”和“类”。

, 还有其他用途`.`，`M*N`表示将两个事物相乘，如果`M`,`N`都是矩阵，这实现了矩阵乘法的规则，以得到一个新矩阵作为其结果。但是`M.*N`意味着，如果 M、N 的形状相同，则将每个元素相乘。所以没有更多的微妙之处，但超出了你在这里问的范围。

正如@marc 指出的那样，点也用于引用matlab 称为结构或结构的东西的字段和子字段。在我看来，这些很像类、子类和枚举。这个想法是你可以有一个结构`data`说，并存储所有与数据相关的信息，如下所示：

```
olddata = data; % we assume we have an old struct like the one we are creating, we keep a reference to it

data.date_created=date();
data.x_axis = [1 5 2 9];
data.notes = "This is just a trivial example for stackoverflow.  I didn't check to see if it runs in matlab or not, my bad."
data.versions.current = "this one";
data.versions.previous = olddata; 
```

关键是任何 matlab 对象/数据类型/无论您想调用什么，都可以由结构中的字段引用。最后一项表明我们甚至可以在结构的字段中引用另一个结构。最后一点的含义是我们可以查看以前版本的创建日期：

```
data.versions.previous.date_created 
```

对我来说，这看起来就像 java 中的对象，除了我没有在其中放置任何方法。Matlab 确实支持 java 对象，这些对象在我看来很像这些结构，除了一些字段可以引用函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T08:18:54.173

根据 mwengler 的回答，从技术上讲，它是一种索引形式。但是，它也可以用于最近版本的 MATLAB 中对象的方法调用，即

```
obj.methodCall; 
```

但是请注意，这种风格存在一些低效率 - 基本上，系统必须首先确定您是否要对字段进行索引，如果不是，则调用该方法。这样做更有效率

```
methodCall(obj); 
```

# mysql - 如何让 Django 查询从数据库中检索更新的信息？

> ID：10440946
> 
> 赞同：0
> 
> 时间：2012-05-03T23:55:46.023
> 
> 标签：mysql, django, caching, transactions

两天来，我一直在 Django 项目中遇到交易问题。我正在开发一个信使系统，当我向某个用户发送消息时，发送的消息正确显示在发件箱 div 中（使用 jQuery/Ajax，而不是刷新页面）。好吧，如果我发送另一条消息，现在发件箱中出现的新消息与以前发送的相同。

我发送的所有消息都像第一条一样。在数据库表中，消息保存得很好，所以我猜问题来自查询。

接下来是查询：

```
@login_required(login_url='/')
def getmessage(request, mode=None):
if request.is_ajax():
    if request.method == "GET":
        # Retrieve last message sent by user
        Message.objects.update()
        q = Message.objects.filter(sender=request.user).order_by('send_at')[:1]

        response = {}
        for sent in q:
            sent_message = {}
            sent_message['recipient'] = sent.recipient.username
            print sent.recipient.username
            sent_message['body'] = sent.body
            response.update({'sent': sent_message})

        # Make json object
        json = simplejson.dumps(response)

        # Send answer to client side
        return HttpResponse(json, mimetype='application/json')
    else:
        # No POST request, redirecting
        return HttpResponseRedirect('/messenger/')
else:
    # No AJAX request, redirecting
    return HttpResponseRedirect('/messenger/') 
```

让我们注意“print sent.recipient.username”行。此行始终打印第一条消息收件人姓名。

我一直在阅读有关 stackoverflow 的一些线程谈论这个问题，但是手动处理事务我没有取得任何成功。即使在查询之前制作“Message.objects.update()”也不起作用。

有什么建议吗？不明白它是如何发生的，这很烦人。

如果您需要更多信息，例如型号代码或其他信息，请告诉我。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T00:05:49.877

您查询是按“send_at”对结果进行排序，这可能会给您发送的第一条消息。如果你想要最后一个，你需要在“-send_at”上订购，例如。

```
q = Message.objects.filter(sender=request.user).order_by('-send_at')[:1] 
```

# javascript - 仅使用部分 jQuery mobile

> ID：10440949
> 
> 赞同：3
> 
> 时间：2012-05-03T23:55:59.660
> 
> 标签：javascript, jquery, css, jquery-mobile, web-frameworks

我想使用 jQuery Mobile 中的小部件 - 按钮、下拉列表等。

我已经有一个没有使用 jQuery mobile 开发的网站，它有自己的菜单和链接——当我尝试向它添加 jQuery mobile 框架时，它会导致各种问题（覆盖 CSS，试图劫持页面过渡等）。

是否可以禁用框架的某些功能？

这与以下问题有关：[删除未使用的 jQuery Mobile 元素？](https://stackoverflow.com/questions/6582083/removing-unused-jquery-mobile-elements)- 但它处理最小化脚本大小。我只想禁用某些功能，所以它不会干扰我的应用程序的其余部分。

更新：“按原样”使用 jQuery Mobile 引起的部分问题源于它会尝试通过 ajax 加载所有链接。可以通过添加来缓解

```
相对=“外部”
```

到链接，所以 jQM 不会尝试通过 ajax 加载它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T05:05:01.337

JQM 的构建器即将推出。截至 2012 年 5 月 4 日，它仍处于测试阶段。挂在那里，该功能现在随时可用。我会在它发布时尝试更新这个答案。

**此处更新**是指向 JQM 构建器的链接[http://jquerymobile.com/download-builder/](http://jquerymobile.com/download-builder/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T03:23:57.943

将 data-role="none" 属性添加到任何表单或按钮元素会告诉框架不应用任何增强样式或脚本

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-20T11:53:09.203

只用需要的组件构建你的包是你应该做的第一步，但有时这还不够。

我们最近还发现了一段代码，用于停止在一个页面上加载 jQuery Mobile 窗格。如果您想在没有框架本身的情况下单独使用 jQuery Mobile 组件，这将非常有用。换句话说，您仍然希望拥有正常的页面行为（即通过单击链接重新加载页面）并使用一些 jQuery Mobile 组件。

下面这段代码对我们的 Symfony 2 项目起到了作用：

```
(function($) {
  $(document).bind('mobileinit',function() {
    $.mobile.ajaxEnabled = false;
  });
})(jQuery); 
```

# php - mysql_query 没有返回结果来选择调用

> ID：10440951
> 
> 赞同：0
> 
> 时间：2012-05-03T23:56:36.070
> 
> 标签：php, mysql

我正在进行 mysql_query 调用，但它没有返回结果。它应该在表格中看到结果。问题在于此代码块的最后一行。如果有人看到此问题或发现错误，请告诉我。我还在查询中硬编码了一个变量，结果没有变化。

```
while($tempArray=mysql_fetch_array($myListings, MYSQL_NUM))
{//construct link that will post data to url for proper use later
    ?>
<tr>
<td>
<a href="bis_list.php?srchValue=<?php echo $tempArray[0] ?>"><?php echo $tempArray[1]?></a>
</td>
</tr>   

<?php 
}

?>
</table>
<?php 

if($title=$_GET["srchValue"])
{

    echo $title;
    //$title
    $sql="SELECT * FROM biz_categories WHERE category_id= $title";
    $biz_ids=mysql_query($sql, $con); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-04T14:24:34.657

"SELECT * FROM biz_categories WHERE category_id='$title'"

这是所需的正确格式。我发誓我已经这样试过了。

# java - 使用命令行在Windows中的zip文件夹

> ID：10440957
> 
> 赞同：3
> 
> 时间：2012-05-03T23:57:33.577
> 
> 标签：java, windows, command

我正在编写一个需要压缩文件的程序。这将在 linux 和 windows 机器上运行。它在 Linux 中运行良好，但我无法在 Windows 中完成任何操作。要发送命令，我正在使用 apache-net 项目。我也尝试过使用 Runtime().exec 但它不起作用。有人可以提出一些建议吗？

```
CommandLine cmdLine = new CommandLine("zip");
     cmdLine.addArgument("-r");
     cmdLine.addArgument("documents.zip");
     cmdLine.addArgument("documents");
     DefaultExecutor exec = new DefaultExecutor();
     ExecuteWatchdog dog = new ExecuteWatchdog(60*1000);
     exec.setWorkingDirectory(new File("."));
     exec.setWatchdog(dog);
    int check =-1;
    try {
        check = exec.execute(cmdLine);
    } catch (ExecuteException e) {

    } catch (IOException e) {
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T03:12:20.197

Java 在支持 .zip 格式的 java.util.zip.* 中提供了自己的压缩库。可以在[此处](http://www.roseindia.net/java/example/java/io/ZipFolderExample.shtml)找到压缩文件夹的示例。这是一个适用于单个文件的快速示例。使用本机 Java 的好处是它可以在多个操作系统上运行，并且不依赖于安装特定的二进制文件。

```
 public static void zip(String origFileName) {
    try {
      String zipName=origFileName + ".zip";
      ZipOutputStream out = new ZipOutputStream(new BufferedOutputStream(new FileOutputStream(zipName)));
      byte[] data = new byte[1000]; 
      BufferedInputStream in = new BufferedInputStream(new FileInputStream(origFileName));
      int count;
      out.putNextEntry(new ZipEntry(origFileName));
      while((count = in.read(data,0,1000)) != -1) {  
        out.write(data, 0, count);
      }
      in.close();
      out.flush();
      out.close();
    } catch (Exception ex) {
      ex.printStackTrace();
    }
  } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T02:26:39.693

相同的代码在 Windows 中不起作用。Windows 没有 Linux 那样的“zip”程序。您需要查看 Windows 7 是否有命令行 zip 程序（我认为没有；请参见此处：[http ://answers.microsoft.com/en-us/windows/forum/windows_vista-files/how- to-compress-a-folder-from-command-prompt/02f93b08-bebc-4c9d-b2bb-907a2184c8d5](http://answers.microsoft.com/en-us/windows/forum/windows_vista-files/how-to-compress-a-folder-from-command-prompt/02f93b08-bebc-4c9d-b2bb-907a2184c8d5)）。您可能需要做两件事

1.  确保用户有合适的第 3 方 zip 程序
2.  进行操作系统检测以执行正确的命令。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T02:59:53.843

您可以使用内置的 compact.exe 在 dos 中压缩/解压缩

它显示或更改 NTFS 分区上文件的压缩。

> 紧凑 [/C | /U] [/S[:dir]] [/A] [/I] [/F] [/Q] [文件名 [...]]

/C 压缩指定的文件。目录将被标记，以便之后添加的文件将被压缩。

/U 解压缩指定的文件。将标记目录，以便以后添加的文件不会被压缩。

/S 对给定目录和所有子目录中的文件执行指定的操作。默认“dir”是当前目录。

/A 显示具有隐藏或系统属性的文件。这些文件默认被省略。

/I 即使发生错误后也继续执行指定的操作。默认情况下，COMPACT 在遇到错误时停止。

/F 强制对所有指定文件执行压缩操作，即使是那些已经压缩的文件。默认情况下会跳过已压缩的文件。

/Q 只报告最重要的信息。

文件名 指定模式、文件或目录。

不带参数使用时，COMPACT 显示当前目录及其包含的任何文件的压缩状态。您可以使用多个文件名和通配符。您必须在多个参数之间放置空格。

* * *

例子

袖珍的

显示当前目录下的所有文件及其压缩状态。

压缩文件.txt

显示文件 file.txt 的压缩状态

压缩文件.txt /C

压缩 file.txt 文件。

# c# - 以下方法或属性之间的调用不明确 - WPF

> ID：10440961
> 
> 赞同：1
> 
> 时间：2012-05-03T23:58:18.283
> 
> 标签：c#, wpf

我有一个 WPF 表单，它有一些按钮来保存用户输入、删除和取消。我试图添加功能，以便每当用户单击取消按钮时，都会弹出一条消息。相反，它会在我的控制器中引发异常：

```
"The call is ambiguous between the following methods or properties" 
```

这是我的看法：

```
 <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,0,0,0">                        
    <Button Name="DeleteButton" Command="{Binding DeleteCommand}" CommandParameter="{Binding Path=SelectedStory}"  Cursor="Hand" Height="25" IsEnabled="{Binding CanDelete}" Margin="5 0 0 0">Delete</Button>
    <Button Name="SubmitButton" Command="{Binding SubmitCommand}" CommandParameter="{Binding Path=SelectedStory}"  Cursor="Hand" Height="25"  Margin="5 0 0 0">Submit</Button>
    <Button Name="CancelButton" Command="{Binding CloseCommand}" CommandParameter="{Binding Path=SelectedStory}"  Cursor="Hand" Height="25" Margin="5 0 0 0" >Cancel</Button>
 </StackPanel> 
```

我的控制器代码：

```
 public MetadataController(IGatewayService gateway, IEventAggregator eventAggregator, IDialogService dialog)
    {
        this.gateway = gateway;
        this.eventAggregator = eventAggregator;
        this.dialog = dialog;

        // commands            
        this.CloseCommand = new DelegateCommand<StoryItem>(this.Close);//here i got the exception throwing "the call is ambiguous between the following methods or properties"
        this.DeleteCommand = new DelegateCommand<StoryItem>(this.Delete);
        this.SubmitCommand = new DelegateCommand<StoryItem>(this.Submit, this.HasFieldsRequiredBeforeSubmit);

        this.eventAggregator.GetEvent<StorySelectedEvent>().Subscribe(OnStorySelected);
    }

    private void Close(StoryItem selsectedStory)//when i click my close button its not calling this method at all.
    {
        bool isConfirmed = this.dialog.ShowConfirmation("Are you sure you want to close?");
    }

    private void Delete(StoryItem selectedStory)
    {
        bool isConfirmed = this.dialog.ShowConfirmation("Are you sure you want to permanently delete ?");

        if (isConfirmed)
        {
            this.gateway.DeleteStoryItem(selectedStory);

            this.eventAggregator.GetEvent<CommandCompletedEvent>().Publish(CommandTypes.MetadataEntry);
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T00:02:44.707

您收到的异常表明它无法访问您尝试调用的任何方法/属性。也许还有其他一些方法或属性也被调用`Close`或`CloseCommand`导致冲突？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T00:41:49.167

异常的原因，我确实已经有了该方法，并且我正在尝试创建一个，这就是它抛出该错误的原因。非常感谢大家的帮助。

# c# - 告诉 RavenDB 忽略一个属性

> ID：10440964
> 
> 赞同：18
> 
> 时间：2012-05-03T23:58:26.990
> 
> 标签：c#, ravendb

我有一个文档模型要存储在 RavenDB 中，但我不想存储计算的属性。如何告诉 RavenDB 忽略此属性？

在下面的示例中，我不想存储`Duration`.

```
public class Build
{
    public string Id { get; set; }
    public string Name { get; set; }
    public DateTime StartedAt { get; set; }
    public DateTime FinishedAt { get; set; }

    public TimeSpan Duration { get { return StartedAt.Subtract(FinishedAt); }}
} 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-04T01:02:21.403

只需像这样装饰`Duration`属性`[JsonIgnore]`：

```
public class Build
{
    public string Id { get; set; }
    public string Name { get; set; }
    public DateTime StartedAt { get; set; }
    public DateTime FinishedAt { get; set; }

    [Raven.Imports.Newtonsoft.Json.JsonIgnore]
    //[Newtonsoft.Json.JsonIgnore] // for RavenDB 3 and up
    public TimeSpan Duration { get { return StartedAt.Subtract(FinishedAt); }}
} 
```

在此处查看更多信息：[http ://ravendb.net/docs/client-api/advanced/custom-serialization](http://ravendb.net/docs/client-api/advanced/custom-serialization)

# node.js - 在以 apache 作为反向代理的服务器上使用带有 nodejs 的 socket.io

> ID：10440965
> 
> 赞同：10
> 
> 时间：2012-05-03T23:58:44.367
> 
> 标签：node.js, socket.io, reverse-proxy

我正在尝试使用 Node.js 和 Socket.IO 来促进浏览器和客户端之间的消息传递，遵循[指南](http://socket.io/#how-to-use)。

但是，我必须在 Apache 后面设置反向代理节点。因此，我使用的是 example.com/nodejs/，而不是 node.com:8080。

这似乎导致 Socket.IO 失去了自我意识。这是我的节点应用程序

```
var io = require('socket.io').listen(8080);

// this has to be here, otherwise the client tries to 
// send events to example.com/socket.io instead of example.com/nodejs/socket.io
io.set( 'resource', '/nodejs/socket.io' );

io.sockets.on('connection', function (socket) {

  socket.emit('bar', { one: '1'});

  socket.on('foo', function( data )
  {
    console.log( data );
  });

}); 
```

这是我的客户文件的样子

```
<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<title>Socket.IO test</title>

  <script src="http://example.com/nodejs/socket.io/socket.io.js"></script>

  <script>

  var socket = io.connect('http://example.com/nodejs/');

  console.log( socket );

  socket.on( 'bar', function (data)
  {
    console.log(data);
    socket.emit( 'foo', {bar:'baz'} );
  });

  socket.emit('foo',{bar:'baz'});

  </script>
</head>
<body>
  <p id="hello">Hello World</p>
</body>
</html> 
```

[这里的问题是对http://example.com/nodejs/socket.io/socket.io.js](http://example.com/nodejs/socket.io/socket.io.js)的脚本引用。它不会返回预期的 JavaScript 内容 - 而是返回“欢迎来到 socket.io”，就像我点击[http://example.com/nodejs/](http://example.com/nodejs/)一样。

知道我怎样才能完成这项工作吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-09T14:04:34.147

这最终成为一个多管齐下的解决方案。

首先，在服务器端，我必须像这样设置端点

```
var io = require('socket.io').listen(8080);

var rootSockets = io.of('/nodejs').on('connection', function(socket)
{
  // stuff
});

var otherSockets = io.of('nodejs/other').on('connection', function(socket)
{
  // stuff
}); 
```

然后，在客户端，正确连接看起来像这样

```
var socket = io.connect(
    'http://example.com/nodejs/'
  , {resource: 'nodejs/socket.io'}
);

// The usage of .of() is important
socket.of('/nodejs').on( 'event', function(){} );
socket.of('/nodejs/other').on( 'event', function(){} ); 
```

在此之后，一切都奏效了。请记住，在此服务器上，Apache 在内部将 example.com/nodejs 代理到端口 8080。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-04T05:01:50.297

我认为这与您的 apache 代理无关，但与 socket.io 如何处理子目录上的请求有关。在这里查看我的答案。[使用 Socket.IO 的 NGINX 配置](https://stackoverflow.com/questions/9373218/nginx-configuration-to-work-with-socket-io/9373699#9373699)

基本上，您需要改用此连接语句：

`var socket = io.connect('http://example.com', {resource:'nodejs/socket.io'});`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-21T11:22:05.387

如果有人感兴趣，只有这对我有用。将端口 3000 替换为您的 Nodejs 端口

VirtualHost 中的 Apache 2.2.14

```
 <IfModule mod_proxy.c>
      <Proxy *>
        Order allow,deny
        allow from all
      </Proxy>
    </IfModule>

    RewriteEngine on

    RewriteCond %{QUERY_STRING} transport=polling
    RewriteRule /(.*)$ http://localhost:3001/$1 [P]

    ProxyRequests off
    ProxyPass /socket.io/ ws://localhost:3001/socket.io/
    ProxyPassReverse /socket.io/ ws://localhost:3001/socket.io/ 
```

客户端连接：

```
 var myIoSocket = io.connect($location.protocol() + '://' + $location.host(), {path: '/socket.io'}); 
```

无需在 Node.js 方面进行任何更改。

# c++ - C++ 不能传递非 POD 类型的对象

> ID：10440966
> 
> 赞同：16
> 
> 时间：2012-05-03T23:58:50.643
> 
> 标签：c++, curl, libcurl, codeblocks

这是我的代码：

```
#include <iostream>
#include <fstream>
#include <cstdlib>
#include <stdio.h>
#include <curl/curl.h>
using namespace std;
int main ()
{
    ifstream llfile;
    llfile.open("C:/log.txt");

    if(!llfile.is_open()){
        exit(EXIT_FAILURE);
    }

    string word;
    llfile >> word;
    llfile.close();
    string url = "http://example/auth.php?ll=" + word;

    CURL *curl;
    CURLcode res;

    curl = curl_easy_init();
    if(curl) {
        curl_easy_setopt(curl, CURLOPT_URL, url);
        res = curl_easy_perform(curl);

        /* always cleanup */
        curl_easy_cleanup(curl);
    }
    return 0;
} 
```

这是我编译时的错误：

> main.cpp|29|warning: 不能通过非 POD 类型的`'struct std::string'`对象`'...'`；调用将在运行时中止

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-04T00:03:10.767

您遇到的问题是可变参数函数不适用于非 POD 类型，包括`std::string`. 这是系统的限制，不能修改。另一方面，您可以更改代码以传递 POD 类型（特别是指向 nul 终止字符数组的指针）：

```
curl_easy_setopt(curl, CURLOPT_URL, url.c_str()); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-04T00:02:29.580

如警告所示，`std::string`is 不是 POD 类型，调用可变参数函数（即带参数的函数`...`）时需要 POD 类型。

但是，`char const*`这里是合适的；改变

```
curl_easy_setopt(curl, CURLOPT_URL, url); 
```

至

```
curl_easy_setopt(curl, CURLOPT_URL, url.c_str()); 
```

# visual-studio-2010 - Visual Studio 代码片段文字替换过早结束

> ID：10440967
> 
> 赞同：2
> 
> 时间：2012-05-03T23:58:57.253
> 
> 标签：visual-studio-2010, code-snippets, literals, replace

将自定义 HTML 代码片段插入 MVC 视图时，文字替换的编辑会在我开始键入值时结束。

我错过了什么吗？

我的文字被使用了两次来替换属性名称：

```
<?xml version="1.0" encoding="utf-8"?>
<CodeSnippet Format="1.0.0" xmlns="http://schemas.microsoft.com/VisualStudio/2005/CodeSnippet">
    <Header>
        <Title>MVC Field Pair</Title>
        <Shortcut>mvcfieldpair</Shortcut>
        <Description>Inserts an MVC label/input pair</Description> 
        <SnippetTypes>
            <SnippetType>Expansion</SnippetType> 
        </SnippetTypes>
    </Header>
    <Snippet>
        <Declarations>
            <Literal Editable="true">
                <ID>property</ID>
                <ToolTip>Model property</ToolTip>
                <Default>myProperty</Default>
            </Literal>
        </Declarations>
        <Code Language="html">
            <![CDATA[
                <li>
                    <%= Html.LabelFor(m => m$property$) %>
                    <%= Html.TextBoxFor(m => m$property$) %>
                </li>
            $end$]]>
        </Code>
    </Snippet>
</CodeSnippet> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T17:47:53.727

Position relative to `<![CDATA[` and `]]>` is important. I adjusted my snippet:

```
<CodeSnippet Format="1.1.0" xmlns="http://schemas.microsoft.com/VisualStudio/2005/CodeSnippet">
    <Header>
        <Title>MVC Field Pair</Title>
        <Shortcut>mvcfieldpair</Shortcut>
        <Description>Inserts an MVC label/input pair</Description> 
        <SnippetTypes>
            <SnippetType>Expansion</SnippetType> 
        </SnippetTypes>
    </Header>
    <Snippet>
        <Declarations>
            <Literal>
                <ID>property</ID>
                <ToolTip>Model property</ToolTip>
                <Default>myProperty</Default>
            </Literal>
        </Declarations>
        <Code Language="html"><![CDATA[<li>
    <%= Html.LabelFor(m => m$property$) %>
    <%= Html.TextBoxFor(m => m$property$) %>
</li>$end$]]></Code>
    </Snippet>
</CodeSnippet> 
```

# php - 为属性略有不同的同一产品创建多个 Magento 产品页面的最佳方法是什么？

> ID：10440970
> 
> 赞同：0
> 
> 时间：2012-05-03T23:59:42.843
> 
> 标签：php, mysql, magento

我有一个产品，一个空格键（不是真正的空格键，这是一个例子）。它适用于许多不同的键盘型号和功能，就像每个键盘型号的单独产品页面一样，例如 www.example.com/model-x-spacebar、www.example.com/model-y-spacebar。这些页面的文本都会略有不同（根据用户正在查看的模型），但最终用户将获得相同的空格键。基本上，目标是让用户觉得 Model X Spacebar 和 Model Y Spacebar 是独特的产品，同时让工人认为它是一个单一的产品。我能做这样的事吗？我将如何管理库存水平？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T06:02:31.293

一种方法是为每个文本变体创建一个分组产品，并在每个变体中包含与产品相同的“空格键”。这仅在“空格键”是简单产品时才有效。这将使您只有一个简单产品的库存级别。

# curl - 为什么 curl 允许使用文件 URL 方案，但不允许使用 wget

> ID：10440976
> 
> 赞同：9
> 
> 时间：2012-05-04T00:00:35.437
> 
> 标签：curl, wget, file-uri

这个问题是指 curl 7.21.4 和 GNU Wget 1.13.4，我不知道答案是否特定于版本。

使用[文件 URI 方案](http://en.wikipedia.org/wiki/File_URI_scheme)`curl`，我可以使用这样的方式获取本地文件

```
$ curl file://localhost/Users/dave/.vimrc
contents of .vimrc 
```

但是，如果我尝试使用相同的方法，则会`wget`收到错误消息：

```
$ wget file://localhost/Users/dave/.vimrc
file://localhost/Users/dave/.vimrc: Unsupported scheme `file' 
```

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-04T20:33:53.107

因为尚未编写 Wget 以支持 file:// URL。（它的[首页](https://www.gnu.org/software/wget/)明确指出“GNU Wget 是一个免费的软件包，用于使用 HTTP、HTTPS 和 FTP 检索文件”）

请允许我指出一点[curl 与 wget 的比较](https://daniel.haxx.se/docs/curl-vs-wget.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T00:06:03.893

`wget`仅支持 HTTP、HTTPS 和 FTP 协议。

# php - 使用 AJAX 运行 PHP 文件并发送参数

> ID：10440977
> 
> 赞同：0
> 
> 时间：2012-05-04T00:00:43.390
> 
> 标签：php, ajax

当用户单击我网页上的按钮时，我正在尝试编辑服务器上的文件。我使用 php 生成一个按钮表。STRING1、STRING2 和 BOOL 是我传递给函数的变量。调用我创建的 editPlist() 函数并显示测试 alert()。问题是 php 文件要运行。我也没有收到任何错误。我似乎无法弄清楚出了什么问题。

示例 HTML 按钮：

```
<a href="#" onclick="editPlist('STRING1', 'STRING2', 'BOOL')" class="buttong">1 : Round 1</a> 
```

按钮单击运行此脚本：（url 行中的 PHP 生成我要运行的文件的地址。）

```
<script type='text/javascript'>
function editPlist(stage, dance, oldValue)
{
    alert('test ' + stage + dance + oldValue);
    $.ajax({
        type: "POST",
        url: <?php echo '"'.dirname(curPageURL()).'/PlistEditorFunction.php"' ?>,
        data: {"var1" : stage , "var2" : dance , "var3" : oldValue},
        success: function(msg){
            alert( "Data Saved: " + msg ); //Anything you want
        }
    });
} 
```

在外部 php 文件 PlistEditorFunction.php 中，我尝试记录一个假错误并加载变量，但该错误从未显示。这是 php 文件的开头：

```
$msg = 'test error message';
error_log('['.date("F j, Y, g:i a e O").']'.$msg."<br /> \n", 3,  $phperrorPath);
if (isset($_POST['data']) and trim($_POST['data']) != '' ) {
    $stage = trim($_POST['var1']);
    $dance = trim($_POST['var2'])
    $oldValue = trim($_POST['var3']);
} 
```

我知道只有在域名与运行 ajax 的文件匹配时才会运行 php 脚本。这两个文件彼此相邻，所以我知道这不是问题。

我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T00:03:37.197

更改此行

```
url: <?php echo '"'.dirname(curPageURL()).'/PlistEditorFunction.php"' ?> 
```

到

```
url: 'PlistEditorFunction.php' 
```

看看它是否有效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T00:06:43.537

有几件事看起来很奇怪。

请确认您调用的 url 确实是您认为的那样。为此，请使用控制台/检查器。我推荐萤火虫。当您进行 ajax 调用时，它将显示您使用 ajax 请求的页面的 url。

如果它是正确的，那么你的 url 参数不是问题。接下来，我将查看 php 文件本身。尝试在 php 文件中抛出一个 echo 语句，以便您的 ajax 响应可以验证它正在运行。无论您在文件中回显什么，`PlistEditorFunction.php`都将是成功函数中的响应参数

```
success: function( response ) {
    console.log(response); //should be the echo'd statement of PlistEditorFunction.php
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T12:37:47.750

在 mwotton 发表评论后，我发现 ajax 是未定义的。jQuery 是导入的，所以这不是问题。我发现答案是我必须将 $.ajax 更改为 jquery.ajax。

一些主机不使用“$”来表示 jQuery。我的网络主机改用“jquery”。

# extjs - 如何将标签添加到 ExtJS Slider 控件的任一端？

> ID：10440978
> 
> 赞同：5
> 
> 时间：2012-05-04T00:01:12.233
> 
> 标签：extjs, extjs3

*我正在使用 ExtJS 3.3，但这也可能与其他版本有关。*

我在基于 ExtJS 的 UI 中使用 Slider 控件。根据此处的“带提示的滑块”示例：http://dev.sencha.com/deploy/ext-3.3.1/examples/slider/slider，我设置了一个工具提示以在您拖动它时显示该值[。 html](http://dev.sencha.com/deploy/ext-3.3.1/examples/slider/slider.html)

在我看来，有一个没有指示值是什么的滑块（或者在这种情况下直到你开始滑动它）是相当糟糕的用户体验。我想在任一端添加标签以显示滑块所代表的范围。像这样的东西：
![可能的滑块标签示例](../Images/7095e6b7655a40036349c3f7dcc7ea46.png)

所以，当然，我想知道：**标准控件本身是否可能？**（我查看了文档，但没有发现任何问题）？还是**有一种巧妙的方法来实现这一目标？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T10:59:56.457

这是我打算做的：

```
var tip = new Ext.slider.Tip({
        getThumbText: this.getThumbText,
        getText: function (thumb) {
            return '<b>' + this.getThumbText(thumb.value) + '<b>';
        }
    });

this.timeSliderLabel = new Ext.form.Label({
        text: Nipendo.Localization.HistorySlider + ': ',
        style: 'margin:3px 5px 0px 5px;'
    });

this.timeSlider = new Ext.Slider({
        width: 214,
        value: 1,
        increment: 1,
        minValue: 1,
        maxValue: 13,
        plugins: tip
    });

    this.timeSlider.on('change', function (slider, newValue, thumb) {
        this.timeSliderHintLabel.setText(this.getThumbText(thumb.value), false);
        this.onSearchClick();
    }, this);

    this.timeSliderHintLabel = new Ext.form.Label({
        html: String.format('(1 {0})', Nipendo.Localization.OneMonthBack),
        style: 'margin:3px 5px 0px 5px;'
    }); 
```

更新：

布局可以这样使用：

```
 config = config.apply({
     layout: 'column',
     defaults: {
         layout: 'form'
     },
     items: [
         this.timeSliderLabel,
            this.timeSlider,
            this.timeSliderHintLabel
     ]
 }, config) 
```

其中 getThumbText 是我用来获取正确标签值的辅助方法。

# jquery - 为 jquery 设置数据属性值似乎无法使其适用于 data()

> ID：10440980
> 
> 赞同：2
> 
> 时间：2012-05-04T00:01:35.773
> 
> 标签：jquery, html

我在这里有一些 html 和脚本：

```
<html>
<head>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script type="text/javascript">
$(document).ready(function () {

    $("#options").attr("data-previousvalue1", $("#options").val());

        $("#options").data("previousvalue2", $("#options").val());
});
</script>
</head>
<body>
<select id="options">
    <option value="1">option 1</option>
<option selected="selected" value="2">option 2</option>
<select>
</body>
</html> 
```

所以，这只有一半像我预期的那样有效：

```
$("#options").attr("data-previousvalue1", $("#options").val()); 
```

设置 data-previousvalue1=2 这很好

但我期望：

```
("#options").data("previousvalue2", $("#options").val()); 
```

设置 data-previousvalue2=2。

我误解了数据方法吗？从我的搜索和阅读来看，这应该可行。

这是输出的html：

![在此处输入图像描述](../Images/e9d195ff410e86026f2bc8167360001c.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T00:05:30.677

使用 jQuery 的 data 方法时，它实际上是在内部将值存储在缓存中，在检查元素时不可见。如果您调用诸如 alert($("#options").data("previousvalue2")); 之类的数据，则数据将在那里。

请查看这篇文章了解更多详情。

[jQuery .data() 是如何工作的？](https://stackoverflow.com/questions/2764619/how-does-jquery-data-work)

# jquery - 如何调试此 WCF Web 服务

> ID：10440981
> 
> 赞同：0
> 
> 时间：2012-05-04T00:01:45.570
> 
> 标签：jquery, ajax, json, wcf, web-services

我有一个通过 jquery 调用的启用了 WCF Ajax 的 Web 服务。当我只返回一个字符串对其进行测试时，它返回正常。一旦我添加了更多功能，javascript 错误回调就会在没有有用数据的情况下运行。只是说'错误'，readystate = 0，status = 0。

我可以单步执行服务代码，它会成功返回一个对象数组。然而，客户没有。

这是代码。

```
[ServiceContract(Namespace = "")]
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
public class WebAPI
{
    [OperationContract]
    [WebGet(ResponseFormat=WebMessageFormat.Json)]
    public Person[] GetPeople(Guid groupId)
    {
        using (SchedulerContext context = new SchedulerContext())
        {
            return context.People.Where(p=>p.Group_ID==groupId).ToArray();
        }
    }
} 
```

在客户端：

```
<script type="text/javascript">
    $(document).ready(function () {
        $.ajax(
                {
                    type: "GET",
                    dataType: "json",
                    contentType: "json",
                    data: { groupId: 'ae09a080-5d7c-4e92-9a87-591574b7c4b8' },
                    url: "WebAPI.svc/GetPeople",
                    error: function (error) {
                        alert("error");
                    },
                    success: function (msg) {
                        alert(msg.d);
                    }
                }

        );
    });
</script> 
```

**更新：** 用提琴手检查它，http结果是504，在“原始”响应选项卡中有以下内容：

```
HTTP/1.1 504 Fiddler - Receive Failure
Content-Type: text/html; charset=UTF-8
Connection: close
Timestamp: 13:52:46.107

[Fiddler] ReadResponse() failed: The server did not return a response for this request. 
```

**更新 - 2012/05/04：（** *顺便说一句，大家星球大战日快乐！）* 我发现问题出在 JSON 序列化中。它在我的实体模型上给出了循环引用异常。仍在研究解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T13:28:39.883

您可以将您的服务方法定义修改为以下内容：

```
[ServiceContract(Namespace = "")]
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
public class WebAPI
{
    [OperationContract]
    [WebGet(UriTemplate="GetPeople/{groupId}",ResponseFormat=WebMessageFormat.Json)]
    public Person[] GetPeople(Guid groupId)
    {
        using (SchedulerContext context = new SchedulerContext())
        {
            return context.People.Where(p=>p.Group_ID==groupId).ToArray();
        }
    }
} 
```

现在执行来自 Fiddler 的 GET 请求，请求如下：

```
GET http://localhost:15006/WebAPI.svc/GetPeople/739526F1-7C58-4E3B-97D8-4870948BFE32 HTTP/1.1
Content-Type: application/json
User-Agent: localhost 
```

现在尝试从您的 jquery 调用中执行相同的操作，并查看请求的外观。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T00:40:00.780

你可以做一些事情来调试这个问题：

*   在服务器上[启用跟踪。](http://msdn.microsoft.com/en-us/library/ms733025.aspx)如果它返回错误响应，它应该在跟踪中包含一些信息来解释发生了什么问题
*   使用一些网络捕获工具，例如 Fiddler，或大多数浏览器中的开发人员工具（按 F12 访问它们，然后转到网络选项卡）。通过捕获实际响应，您可以查看响应是否包含一些附加信息来帮助您解决问题。
*   在`$.ajax`调用的错误函数中使用额外的参数。[错误回调采用 3 个参数](http://api.jquery.com/jQuery.ajax/)（jqXHR、textStatus、errorThrown），您可以查询 jqXHR 的`status`或`responseText`属性，这应该会为您提供有关错误的更多信息。

# visual-studio-2010 - 安装在 %ProgramFiles(x86)% 中时，无法启动从 Visual Studio 安装程序创建的已安装应用程序

> ID：10440982
> 
> 赞同：0
> 
> 时间：2012-05-04T00:01:48.333
> 
> 标签：visual-studio-2010, visual-c++, deployment, windows-installer, uac

我刚刚使用 C++ 中的 Visual Studio 2010 IDE 在 D2D1 应用程序上完成了我的应用程序开发工作。我正在探索从中创建包的不同方法，并使用了内置的 Visual Studio 安装程序/设置。安装项目顺利编译并创建了安装文件。我还能够根据我的要求成功安装应用程序。但是，当我将它安装在默认位置（这将是我的首选位置 - C:\Program Files(x86)）时，应用程序拒绝启动。这是我到目前为止能够进行的调试：

1.  安装在 C:\Program Files(x86) 中：应用程序无法正常启动。
2.  安装在 C:\Program Files(x86) 中：应用程序在“以管理员身份运行”时启动
3.  安装在 %ProgramFiles% 或 %ProgramFiles(x86)% 以外的位置：应用程序正常启动，无需“以管理员身份运行”。

我已经尝试过解决错误案例，但到目前为止还没有任何决定性或令人信服的东西，这就是我在这里寻求专家帮助的原因。我进一步做了什么：

1.  使用 Dependency Walker x86 版本通过探查器确定 dll 调用的位置/内容。它没有为我提供任何具体的东西——depends.exe 认为我的应用程序具有延迟加载依赖模块 GPSVC.dll 和 IESHIMS.dll，我相当确定我不需要这些。分析器还指示 CRT 0xC0000417 错误 - 但我很难说它是否相关。

2.  我确实为我的视觉风格定义了一个清单作为编译指示。删除它没有帮助。

3.  如果这有帮助-链接器设置中的我的 C++ 项目清单文件选项如下所示：

    *   生成清单 - 是
    *   允许隔离 - 是
    *   启用 UAC - 是
    *   UAC 执行级别 - 作为调用者
    *   UAC 绕过 UI 保护 - 否
4.  按照 MSDN 文档的建议，我已将所有 CRT 功能转换为安全版本 (sprintf -> sprintf_s)。这甚至在这里相关吗？

5.  我试过简单地将 .exe 复制到 %ProgramFiles(x86)%。它没有帮助 - 所以看来我的安装程序不是造成问题的人。

6.  我在代码中的几个地方使用 _dupenv_s 来检索 %COMSPEC% 、 %TEMP% 等。

非常感谢任何有关我如何进一步进行调试的指针。我确实阅读了有关此内容的信息，一些专家建议不正确的字符串处理或大的或无效的目录名称；但我认为这与我的情况无关，因为该问题是在 %ProgramFiles(x86)% 下正常启动应用程序所特有的。

其他详细信息：* 操作系统 Windows 7 - 64 位，带有最新 SP 的 Vista - 32 位 * Visual Studio Professional 2010，带有 .Net 客户端配置文件目标 Visual Studio 安装程序的 C++ 项目；目标平台 32 位 * 应用程序性质 - 基于 Direct2D

如果我没有使用正确的技术术语，请原谅我。我是应用程序部署的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T08:44:46.423

That is correct Viswanathan, you cannot write to Program Files/Program Files(x86) if you are not running from an elevated process.

If your application needs to write custom settings in a file when it is launched you should create a dedicated folder for it under [CommonAppDataFolder](http://msdn.microsoft.com/en-us/library/windows/desktop/aa367992%28v=vs.85%29.aspx)

# jquery - 如何结合使用 .live() jQuery 和 .hover()？

> ID：10440988
> 
> 赞同：1
> 
> 时间：2012-05-04T00:02:08.803
> 
> 标签：jquery

我的困境是关于 .live() 和 .hover()。我想要的是，每次我点击“立即购买”按钮时，它都会更新我的侧边栏（更新它不会加载页面），其中包含购买该商品的数量，以及当我悬停购物车时侧边栏上的图像，它将向我显示完整的购买详细信息（我隐藏了，因为我希望它只在悬停时显示）。但是在我点击“购买按钮”后，看到购买的更新，我试图将鼠标悬停在侧边栏上，但遗憾的是它没有显示完整的详细信息，然后在我刷新页面后悬停正常工作。一位朋友告诉我使用 .live() 但发现它对我来说很复杂，因为我还是个新手。谁能指导我？:(

代码：

```
$('#shoppingCart').hover(
    function(){
        //div
        $('#div_widget').removeClass('hidden');
        $('.cartDivLight').addClass('cartDivDark');

    },
    function(){
        //div
        $('#div_widget').addClass('hidden');
        $('.cartDivLight').removeClass('cartDivDark');
    }
); 
```

，这就是我的脚本的样子，我想集成 .live()，但它不起作用。:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T00:11:58.000

你不需要使用`live()`和`hover()`组合。事实上，从 jQuery1.7 开始，您应该改用 jQuery 方法`on()`，而不是使用`live()`已弃用的方法（即，从未来的 jQuery 版本中删除）。[http://api.jquery.com/on/](http://api.jquery.com/on/)

`live()`, `delegate()`,方法的基本优点 是您可以使用它们来执行事件：悬停、单击等，在您稍后通过 AJAX、JavaScript 的方法等`on()`添加该元素之前尚不存在的元素上。`createElement`

以下是使用方法`on()`：

```
$('#container').on('hover', '#clickableElement', function({ console.log('do something'); }); 
```

`#container`是`#clickableElement`驻留或最终驻留的元素。您也可以`document.body`改用，但会`#container`缩小焦点，因此 jQuery 不必搜索太多即可找到`#container`选择器。

这是一个帮助您入门的 jsfiddle：http: [//jsfiddle.net/trpeters1/WrXVu/44/](http://jsfiddle.net/trpeters1/WrXVu/44/)

鼠标悬停行为有点搞砸了，但你会明白的，

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T00:40:03.083

假设您的侧边栏结构如下：

```
<div id="sidebar">
    <div class="shoppingCart">
        <div class="static">
            //icon & title
        </div>
        <div class="purchase_details">
            ...
        </div>
    </div>
    <div class="shoppingCart">
        <div class="static">
            //icon & title
        </div>
        <div class="purchase_details">
            ...
        </div>
    </div>
</div> 
```

那么相应的javascript将是：

```
$('#sidebar').on('mouseenter', '.shoppingCart', function() {
        var $this = $(this);
        $this.find('.static').addClass('cartDivDark');
        $this.find('.purchase_details').show();
    }).on('mouseleave', '.shoppingCart', function() {
        $this.find('.static').removeClass('cartDivDark');
        $this.find('.purchase_details').hide();
    }
); 
```

这不会 100% 正确，因为我看不到您的 HTML，但它应该展示必要的原则。

笔记：

*   `.on()`取代`.live()`，`.delegate()`并`.bind()`从 jQuery 1.7.1 开始。
*   我们用于`.on()`将事件处理委托给侧边栏，代表当前和未来的购物车。
*   您不能使用 委托悬停`.on('hover' ...)`，但可以委托悬停的两个组件事件`mouseenter`和`mouseleave`。
*   侧边栏中的所有内容都由类标识，而不是 id。这允许我们编写通用的 mouseenter 和 mouseleave 处理程序，它们对悬停元素内的元素进行操作。

# sql - ALTER TABLE 语句中的 DEFAULT 子句导致语法错误

> ID：10440990
> 
> 赞同：2
> 
> 时间：2012-05-04T00:02:27.320
> 
> 标签：sql, ms-access, vb6, jet

我有一个客户想要定制一个旧的 Visual Basic 5 应用程序，该应用程序使用 Access 97 数据库和 Jet 3.5 作为数据库引擎。

所需的自定义需要将一列添加到现有表中。以下工作正常：

```
strSQL = "ALTER TABLE Users ADD COLUMN Status BYTE"
pdbDatabase.Execute strSQL 
```

但是，我想为新列设置一个默认值（即 0 或 1）。我尝试了以下方法和多种变体：

```
strSQL = "ALTER TABLE Users ADD COLUMN Status BYTE DEFAULT 1" 
```

但它们都导致错误声明，“ALTER TABLE 语句中的语法错误。（3293）”

在研究这个问题时，我看到了一些信息，这些信息在我过时的 Access 97 和 Jet 3.5 配置中不支持 DEFAULT 子句。

任何人都可以确认这一点或指出我正确的方向以使其发挥作用吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T02:58:36.217

您可以通过使用 DAO 对象来做到这一点。

微软这样说关于修改 Access 表：

*此外，某些类型的 Microsoft Access 特定属性，例如字段的 ValidationRule 和 DefaultValue 属性，只能通过 Microsoft Access 用户界面或通过代码中的 DAO 进行设置。*

您可以在下面的链接中阅读有关它的更多信息。有一些示例，尽管我没有看到它们使用 DefaultValue 属性具体显示的位置。 [http://technet.microsoft.com/en-us/library/cc966376.aspx](http://technet.microsoft.com/en-us/library/cc966376.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T00:11:44.257

Per Access 97/Jet 3.5 SQL 文档在描述 ALTER Table 或 CREATE Table 语句时没有提及 DEFAULT 子句。它在这里被描述为 Jet 4.0 的新功能：http: [//support.microsoft.com/kb/275561](http://support.microsoft.com/kb/275561)

我确定的唯一方法是设置默认值是在 gui 中打开表格设计，然后在字段属性下输入默认值。您有权访问 Access 97 的安装吗？

不过，我也猜测使用 VB/VBA，您可能可以访问该字段的默认值属性并设置或修改 - 只是不使用 sql。

# jquery - 隐藏水平滚动条是个坏主意？

> ID：10440995
> 
> 赞同：0
> 
> 时间：2012-05-04T00:03:06.990
> 
> 标签：jquery, html, css, scrollbar

我有一个带有 jquery 幻灯片（jquery circle 插件）的 html 页面。使用“随机播放”选项

```
var slideshow = $('#slider').cycle({
 fx: 'shuffle', shuffle: { top: 0, left: 1300},
                .... 
```

在效果过渡期间，将图像移出页面，显示水平滚动条一秒钟，这是一件烦人的事情！如果我只是用 CSS 隐藏水平滚动条

```
html{
 overflow-x: hidden;
} 
```

是个好主意吗？这样做有缺点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T00:17:51.133

这取决于您的页面，但没关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T00:18:50.853

如果您的页面具有固定宽度的布局，并且您的用户应该从不使用水平滚动条，那么乍一看应该不是问题。但是，如果您的页面有 1000 像素以上的宽度，并且用户尝试以 800x600 的分辨率访问它，他们将无法滚动它，因此这可能不是一个好主意。

不仅如此，您的用户可能会故意调整窗口大小，他们将无法使用滚动条。您还必须考虑移动用户。

# backbone.js - 当视图“插入”到页面中时，backbone.js 执行视图方法

> ID：10440997
> 
> 赞同：0
> 
> 时间：2012-05-04T00:03:13.917
> 
> 标签：backbone.js

我不确定如何实现这一点，并且觉得从路由器“view.executeSomeUIaction()”调用不是一个好主意。感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T04:01:36.947

如果您只想在视图加载到页面时执行某些操作，您可以这样做，我希望

```
var contactsView = Backbone.View.extend({
    id: "contactView",
    tagName: "div",
    className: "contacts-container",
    render:function(){
     //render your view
     //now attach the events that don't bubble
     $(this.el).on("load",this.added);
    },
    events: {},
    added: function () {
        alert("View had been added");
    }
}); 
```

### JsFiddle 玩

[http://jsfiddle.net/qy2Ly/](http://jsfiddle.net/qy2Ly/)

### 已更正

[http://jsfiddle.net/zRSg3/3/](http://jsfiddle.net/zRSg3/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T05:18:10.473

[mu 建议的方法](https://stackoverflow.com/questions/9145680/calling-javascript-on-rendering-views-in-backbone-js-post-render-callback)太短了，使用`setTimeout`超时为 0 的 a。这在大多数情况下对我来说都很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T02:43:57.047

`el`当视图添加到 DOM时，您想在视图上执行一些代码吗？

我在我的 Backbone.Marionette 框架中内置了该`Region`对象，我在此处写了一篇博客文章：http: [//lostechies.com/derickbailey/2011/12/12/composite-js-apps-regions -和区域经理/](http://lostechies.com/derickbailey/2011/12/12/composite-js-apps-regions-and-region-managers/)

请注意，在这篇文章中，我正在检查一个`onShow`方法，然后在它存在时调用它。这是您要注意的一点。如果您将此方法添加到您的视图中，然后使用区域对象来显示您的视图，则将调用此方法，您可以在此时执行任何您需要的操作。

我的 Marionette 框架内置了 Region 对象，或者您可以从该博客文章中复制它：[https ://github.com/derickbailey/backbone.marionette](https://github.com/derickbailey/backbone.marionette)