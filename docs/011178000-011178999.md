# StackOverflow 问答 11178000-11178999

# vb.net - 加载子上的Vb.Net类文件？

> ID：11178006
> 
> 赞同：2
> 
> 时间：2012-06-24T13:51:07.790
> 
> 标签：vb.net, class, onload-event

我希望这不是一个愚蠢的问题，我在谷歌上找不到合理的答案。

我正在开始一个只包含一个类文件的项目。最后，我会将类文件转换为 dll。我知道一旦在项目中引用另一个应用程序，它通常会调用 dll。我需要 dll 在加载时在其中运行一个子程序，就像普通的 mybase.load 子程序一样。该子程序只需在加载时执行一次即可填充一些变量。我不想从主应用程序调用子程序。dll 中的其余函数/子程序将在需要时从主应用程序调用。请不要在类下全局注册它们，我需要一个子或函数。

如果没有这样的子，我将如何创建一个执行加载的函数/子？

谢谢。:)

希望我说得通。感谢您的答复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T01:53:12.457

```
Shared Sub New() 
```

在你的课上。

另一种选择是在您的类中拥有一个私有类并使用成员变量对其进行初始化：

```
Public Class MyLibraryClass
  Private mobjSettings As New SettingsClass

  Public Function SampleLibraryFunction() As String
    Return mobjSettings.SettingsProperty
  End Function

  Private Class SettingsClass
    Friend SettingsProperty As String
    Sub New()
      'initialise
      SettingsProperty = "This is a test"
    End Sub
  End Class

End Class 
```

# objective-c - replaceObjectAtIndex:withObject 不起作用

> ID：11178010
> 
> 赞同：2
> 
> 时间：2012-06-24T13:51:58.643
> 
> 标签：objective-c, nsmutablearray, nsmutabledictionary

我正在尝试使用此代码在 NSMutableArray 中分配对象

```
- (IBAction)variablePressed:(UIButton *)sender {
NSString *variable = [sender currentTitle];
if (!_variableToBePassedIntoTheDictionary) _variableToBePassedIntoTheDictionary = [[NSMutableArray alloc] init];
[_variableToBePassedIntoTheDictionary replaceObjectAtIndex:0 withObject:variable];} 
```

但是当我运行这个程序时，程序会在最后一行中断，因为我已将调试器设置为在引发异常时显示警告。在没有断点的情况下运行程序，程序给出 SIGARBT 并崩溃。然后我将这些值分配给一个字典，该字典将传递给模型以进行进一步计算。

```
- (IBAction)testVariableValues:(id)sender {
if (!_variablesAssignedInADictionary) _variablesAssignedInADictionary = [[NSMutableDictionary alloc] init];
[_variablesAssignedInADictionary setObject:_digitToBePassedIntoTheVariable forKey:_variableToBePassedIntoTheDictionary];
NSLog(@"%@", _variablesAssignedInADictionary);} 
```

PS我是Objective C的新手，谁能解释一下我们什么时候使用

```
@synthesize someProperty; 
```

对比

```
@synthesize someProperty = _someProperty; 
```

谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T14:23:30.680

第一次调用该方法时，您创建`NSMutableArray`然后尝试替换不存在的对象。参考资料说：

```
- (void)replaceObjectAtIndex:(NSUInteger)index withObject:(id)anObject 
```

> 要替换的对象的索引。此**值不得超过数组的界限**。重要 如果索引超出数组末尾，则引发 NSRangeException。

并且`0`将超出空数组的范围。

试试这个：

```
- (IBAction)variablePressed:(UIButton *)sender
{
    NSString *variable = [sender currentTitle];
    if (_variableToBePassedIntoTheDictionary == nil)
    {
        _variableToBePassedIntoTheDictionary = [[NSMutableArray alloc] init];
        [_variableToBePassedIntoTheDictionary addObject:variable];
    }
    else
    {
        [_variableToBePassedIntoTheDictionary replaceObjectAtIndex:0 withObject:variable];
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T14:21:37.623

取自文档：

> 要替换的对象的索引。此值不得超过数组的边界。

正如我从您的代码中看到的，您的数组已初始化，并且索引 0 处没有对象。因此，您尝试替换索引处的对象，因为您的数组为空，因此该索引超出范围。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T14:25:07.040

很简单的问题：

你告诉它在异常时停止。很公平。有什么例外？让我猜猜，一个越界异常？异常告诉您在大多数情况下出了什么问题。

`replaceObjectAtIndex:0`: 在那个索引上有什么东西吗？可能不是。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-24T14:26:20.430

在您的代码中，您测试条件：

```
if(!_variableToBePassedIntoTheDictionary)
```

如果条件为真，即数组为 nil，则分配初始化它。在以下声明中：

```
[_variableToBePassedIntoTheDictionary replaceObjectAtIndex:0 withObject:variable];
```

，您尝试用变量替换索引 0 处的对象。但是在上面的例子中，如果你只是分配初始化数组，它是空的，并且你不能替换索引 0 处的对象不存在，这会引发一个异常：

```
*** 由于未捕获的异常“NSRangeException”而终止应用程序，原因：“*** -[__NSArrayM replaceObjectAtIndex:withObject:]：空数组的索引 0 超出范围”

```

因此，您要做的就是将最后一行更改如下：

```
if([_variableToBePassedIntoTheDictionary count]==0) {
  [_variableToBePassedIntoTheDictionary addObject:variable]
} else {
[_variableToBePassedIntoTheDictionary replaceObjectAtIndex:0 withObject:variable]
} 
```

至于关于属性的第二个问题，请考虑综合的作用是根据您分配给@property 的属性为您创建setter/getter 方法。在新的 Objective-C 中，您不需要声明与属性关联的 ivar（ivar 是表示属性的实例变量），并且编译器默认为 ivar 分配属性的名称。通过使用

```
@synthesize someProperty = _someProperty
```

约定您指定希望将 ivar 称为 _someProperty。相对于默认方法，这种方法的优点是您不能混淆使用 setter/getter 方法和 ivar 直接访问属性，即您不会犯以下可能的错误：

```
someProperty=value
```

但你必须写：

```
_someProperty=value
or
self.someProperty=value 
```

无论如何，请查看 Obj-C 文档，它非常详尽。

# css - 在容器中居中固定宽度的 CSS3 多列

> ID：11178013
> 
> 赞同：2
> 
> 时间：2012-06-24T13:52:23.773
> 
> 标签：css

我正在使用 CSS3 多列，列宽设置为 200 像素，让列数自由适应不同的屏幕尺寸。

这是我正在处理的代码：http: [//jsfiddle.net/kBPUX/](http://jsfiddle.net/kBPUX/)

在我 1280 像素宽的笔记本电脑上，当窗口从一列扩展到两列时，列居中，一直到四列。它工作得很好，但是当窗口最大化时突然在四列时，所有的列都突然左对齐，在右边留下一个大的丑陋的排水沟。

知道那是什么以及如何使列以任何分辨率为中心吗？

编辑：在玩了一些之后，我相信正在发生的事情是浏览器不想再创建任何列。未指定列填充，因此它默认为自动并尝试尽可能接近地匹配列高。添加更多列将导致列具有不同的高度。正是在这一点上，我想确保列在父容器中居中，而不是左对齐。

注意：这在 Firefox、Chrome 和 IE9 中适用于我，这是我所支持的全部。我绝对不会碰 JQuery 布局产品；它必须是纯 CSS。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T01:42:24.197

截至今天，我不知道我的问题有任何*可行*的解决方案，但我相信正确的解决方案是多列规范的列空间分布属性，但它还没有被任何浏览器实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T21:15:10.330

你为什么不使用`column-count`？

[http://jsfiddle.net/Svyy2/4/](http://jsfiddle.net/Svyy2/4/)

还要看`div`的`width`。如果将它们设置为相同`width`，`columns`则会出现问题，因为`width+padding+border`> `column width`。例如，将其设置为 90%。

# graph - 在 Ocaml 中检测具有数百万个节点的有向图中的所有循环

> ID：11178014
> 
> 赞同：1
> 
> 时间：2012-06-24T13:52:44.347
> 
> 标签：graph, ocaml, graph-algorithm

我有数千个节点到数百万个节点的图表。我想检测这些图中所有可能的循环。

我使用哈希表来存储边缘。（（源节点，边权重）->（目标节点））。

在 OCaml 中实现它的有效方法是什么？

看起来 Tarjan 的算法是最好的算法。

什么可以是最多的实现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T14:43:34.883

是的，Tarjan 的强连通分量算法是一个很好的解决方案。你也可以使用所谓[的基于路径的](http://en.wikipedia.org/wiki/Path-based_strong_component_algorithm)强组件算法，它具有（如果仔细完成）相当的线性复杂度。

如果您选择合理的数据结构，它们应该可以工作。在您实施和分析原型实施之前，很难说更多。

我不明白你的图形表示是什么：你真的是一`(node,weight)`对散列键吗？那么如何找到给定节点的所有邻居呢？对于大型图结构，您当然应该优化访问时间，还要优化内存效率。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T14:59:53.683

如果您真的想找到所有可能的循环，那么在最坏的情况下，问题似乎至少是指数级的。对于完整的图，每个非空节点子集都会为您提供不同的循环（包括从最后一个返回到第一个的链接）。此外，每个子集的每个循环排列都会给你一个不同的循环。根据您的图表的稀疏性，该问题在实践中可能是易于处理的。

# c# - 更新条目时出错。xx.xxx 超出范围

> ID：11178018
> 
> 赞同：0
> 
> 时间：2012-06-24T13:53:19.057
> 
> 标签：c#, asp.net, database, entity-framework

我有一个带有列的表

名称：variant_markup
数据类型：数字（4,3）

我尝试将价值 10.000 放入其中

我得到了错误

更新条目时出错
10.000 超出范围

不应该，而且我有其他具有相同数据类型和相同过程的列来添加数字，他们不会抱怨！

编码：

```
decimal strippedMarkRate = decimal.Round(0, 3);
        if (MarkUpTextBox.Text != string.Empty)
            strippedMarkRate = decimal.Round(decimal.Parse(toolbox.removeChars(MarkUpTextBox.Text)), 3);

variant_markup = strippedMarkRate; 
```

toolbox.removeChars 函数只是从框中删除任何不是数字或小数点的字符，有没有办法通过正则表达式来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T14:06:51.390

也许您的删除字符没有做您需要的事情？至于你最后一个问题，使用这样的 foreach 语句删除不允许的字符可能会更快：

```
StringBuilder sb = new StringBuilder();

foreach(char c in value)
{
      if(char.IsDigit(c) || c == '.')
      {
          sb.append(c);
      }
}

return sb.ToString(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T14:23:38.117

如果要插入 10.000，则需要将数据类型定义为数字 ( **5** ,3)。数字类型声明中的第一个数字是数字中的最大位数（精度）。在 10.000 的情况下，有 5 个。

[十进制和数字 (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms187746.aspx)

> 十进制 [ (p[ ,s] )] 和数字 [ (p[ ,s] )]
> 
> ...
> 
> **p（精度）** 可以存储的小数位数的最大总数，包括小数点的左侧和右侧。精度必须是 1 到最大精度 38 之间的值。默认精度为 18。
> 
> **s（刻度）** 小数点右侧可以存储的最大小数位数。比例必须是从 0 到 p 的值。仅当指定精度时才能指定比例。默认比例为 0；因此，0 <= s <= p。最大存储大小因精度而异。

# jquery - jQuery：添加和删除图像

> ID：11178022
> 
> 赞同：4
> 
> 时间：2012-06-24T13:53:44.460
> 
> 标签：jquery, image, add

我是 jQuery 的新手。我有 2 个面板：如果我单击左侧面板中的图像，则该图像将出现在右侧面板中。我用克隆（）来做，到目前为止我在这里。现在，当我单击它时，我希望删除右侧面板中的图像。并且摘要权重的计数（来自 img id）将取决于我是否从右侧面板添加或删除图像。有人可以帮帮我吗。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>test</title>
<link href="style.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="script/jquery-1.7.2.min.js"></script>
<style type="text/css">
#output, #selectList { 
      width: 202px; 
      border: 1px solid #000; 
      margin: 2px; 
      height: 400px; 
      float: left 
 }
</style>
</head>
<body>

summary weight: <div id="sumcount"></div>kg<br />
<div id="selectList">
    <img id="34" src="http://placekitten.com/80/80" />
    <img id="21" src="http://placekitten.com/81/81" />
    <img id="11" src="http://placekitten.com/g/80/80" />
    <img id="5" src="http://placekitten.com/g/81/81" />
    <img id="9" src="http://placekitten.com/g/82/82" />
</div>
<div id="output">
</div>

<script type="text/javascript">
$(function(){
    var output = $('#output');
    //$('#selectList img').each(function(i, el){
    //        $(this).addClass('img' + i);
    //    });
    $('#selectList img').click(function(){
        output.append($(this).clone());
    });
    // dont work
    $('#output img').click(function(){
        output.remove($(this));
    });

});
</script>
</body>
</html> 
```

**演示：http:** [//jsfiddle.net/XLSmU/](http://jsfiddle.net/XLSmU/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T14:02:00.580

```
$(function() {
    var output = $('#output'),
        sumWeight = 0;

    $('#selectlist img').click(function() {
        var imageClone = $(this).clone();
        output.append(imageClone);
        sumWeight += parseInt( this.id, 10); // getting weight from image id
        $('#sumcount').text(sumWeight); /// updating the total weight
    });

    // for removing image from #output
    // you need delegate event, because images are added dynamically

    output.on('click', 'img', function() {
        var image = $(this),
            weight = parseInt( this.id, 10 ); // getting id of remove image
        sumWeight -= weight; // subtract weight from total
        image.remove();  // remove the image
        $('#sumcount').text(sumWeight); // updating the total weight
    });
}); 
```

**[演示](http://jsfiddle.net/XLSmU/16/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T13:58:55.323

而不是`.clone()`，只需传递元素本身 - `$(this)`。所以你最终得到`output.append($(this));`, 而不是将元素克隆到正确的列表中，而是移动它。这就是`.append`它的工作方式和方法。

关于计重：

1.  不要`id`只对数字使用属性。这不是他们的意图，一个有效的 HTML 元素`id`至少包含一个字符。相反，请使用`data-id`属性，并将其与`.data()`.
2.  要计算列表中“重量”的数量，您可以使用`.each`它对其进行迭代并对数量求和，如下所示：

    ```
    var weight = 0;
    $('#selectlist img').each(function(){
         weight += $(this).data("id");
    }); 
    ```

3.  然后，您可以从中创建一个函数，并根据列表中的每次更改重新计算权重。

4.  您还应该考虑到，将元素移动到正确的列表后，它仍然具有附加到它的所有事件。如果您使事件更笼统，并且更少依赖它们当前所在的列表，那很好；但除此之外，您应该改用`.live("click", function(){...});`事件绑定，因为元素在移动到下一个列表后可能有不同的事件。

我已经在 jsFiddle 上设置了一个示例：http: [//jsfiddle.net/XLSmU/17/](http://jsfiddle.net/XLSmU/17/)

# c# - 如何在中继器中使用 ajax 文件上传控件

> ID：11178023
> 
> 赞同：-3
> 
> 时间：2012-06-24T13:53:55.750
> 
> 标签：c#, .net, vb.net

我的要求是

1.  应该可以选择在中继器的每一行中附加文件
2.  一旦我点击上传，我必须传递一个 id 并且需要执行插入查询

有没有办法使用ajax异步来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T17:29:24.587

上传控件的 ID 将动态生成，因此您将面临识别您尝试从哪个上传控件获取文件的挑战。我实现这一点的方法是使用 jQuery 来找到离被点击的按钮最近的上传控件。为了“标记”控件，我分配了一个可由 jQuery 选择的虚拟 css 类。从那里，您可以构建一个 JSON 对象以传递给您的服务或页面方法，以处理您的插入操作。

当然，还有其他选项可以处理提交所有上传器控件，但您不太清楚您尝试了什么或这里的大局是什么。你没有在你的问题中给出任何细节，所以我没有给出任何答案的细节。这只是提供了一条路径。祝你好运。

# iphone - 使用 Titanium for iPhone 在设备上进行故障排除

> ID：11178025
> 
> 赞同：0
> 
> 时间：2012-06-24T13:54:33.127
> 
> 标签：iphone, titanium, device

在 Xcode 上，当您在设备上构建时，您可以在控制台中对应用程序进行故障排除。我怎么能用钛做到这一点？没有故障排除是非常困难的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T09:16:03.763

您可以做的是使用该`Ti.API.info('whatever')`方法记录您需要的所有内容并帮助调试，然后当您在设备上运行您的应用程序并将其连接到您的计算机时，只需打开 xcode -> 转到管理器 -> 单击您的设备 - > 并选择控制台。`Ti.API.info()`您在应用程序中执行的每个日志都将显示在控制台中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T14:38:09.113

Titanium 的 SDK (http://www.appcelerator.com/platform/titanium-sdk) 是带有 Aptana 插件的 Eclipse。您可以进行与 Eclipse 中相同的调试：设置断点、单步执行代码、设置观察点……

要在调试模式下运行您的应用程序，首先要在您的应用程序中设置一些断点。为此，请右键单击代码行最左侧的行号，然后选择“Toggle Breakpoint”。接下来，项目资源管理器面板的顶部是几个图标。其中之一是调试。单击该调试的下拉菜单并选择 iphone 模拟器或 ipad 模拟器。该应用程序将编译以进行调试并运行您选择的模拟器。从这一点开始，一切就像在 Eclipse 上调试一样。

# java - 如何使用 UnicodeFont 和 Slick 绘制文本？

> ID：11178026
> 
> 赞同：-2
> 
> 时间：2012-06-24T13:54:58.460
> 
> 标签：java, slick2d

我需要知道如何使用**UnicodeFont**和**Slick**绘制文本。我不想创建一个由 BasicGame 或 BasicGameState 扩展的类，我只想将它直接实现到我的主类中。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T11:38:46.587

好吧，UnicodeFont 的 JavaDoc（位于[此处](http://slick.cokeandcode.com/javadoc/org/newdawn/slick/UnicodeFont.html)）为您提供了一些称为“drawString”的方法。请注意，您不需要对任何其他 Slick 类的任何引用。

现在，如果这还不够，这里的 LWJGL wiki 上有一个[关于](http://www.lwjgl.org/wiki/index.php?title=Slick-Util_Library_-_Part_3_-_TrueType_Fonts_for_LWJGL)使用 Slick-Util 的字体的教程。在教程中使用 TrueTypeFont，但 UnicodeFont 应该以相同的方式工作。

# alfresco - Alfresco 社区版第 4 版中的公共共享链接

> ID：11178028
> 
> 赞同：0
> 
> 时间：2012-06-24T13:55:02.567
> 
> 标签：alfresco

我看到 Alfresco Cloud 版具有很好的共享/发布功能：

[![公共链接](../Images/b85aead74b6eefbea885bf0bb8c63a69.png)](https://i.stack.imgur.com/A3Ou1.png)
[（来源：[alfresco.com](http://www.alfresco.com/sites/www/files/features-share.png)）]

现在我在社区版中找不到这个，即使我在`Admin Console`下面找到了`Content Publishing`一个`Channel Manager`可以添加不同发布渠道的地方。我没有找到一种方法来利用它们！

我的主要问题仍然是如何为非用户生成公共链接以访问某些文件。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T05:08:46.660

Alfresco Cloud 非常新（[上周才上市](http://blogs.alfresco.com/wp/alfresco-in-the-cloud/)！）。因此，自今年年初发布的最新 Alfresco Community 4.0 版本以来，它具有相当多的新特性。“[公共共享”功能](http://wiki.alfresco.com/wiki/2012_Product_Roadmap#Public_File_Sharing_Links_Available)就是其中之一。

Alfresco [2012 产品路线图](http://wiki.alfresco.com/wiki/2012_Product_Roadmap)已经公布，它应该让您了解今年晚些时候的下一个社区版本中可能会出现哪些功能。几乎所有来自云端的新功能都已经合并到 Head，或者将在下一个社区版本之前合并。我不知道公共共享是否会被合并（您需要确定其中一位产品经理才能确定是否将其合并到社区/企业中，或者是否属于过于特定于 Cloud 设置（因此不能轻易被其他设置重用）。同时，您可以密切关注 HEAD 的签入！

（如果您对 Cloud 感兴趣的功能已经提交给 head，那么您可以获取一个[夜间构建](http://wiki.alfresco.com/wiki/Nightly_Community_Build)并开始使用它！）

# android - android：从广播接收器启动活动

> ID：11178036
> 
> 赞同：0
> 
> 时间：2012-06-24T13:56:35.490
> 
> 标签：android, broadcastreceiver, launching-application

我有活动堆栈 A->B->C->D... 我在启动 B 后不久就完成了 A。所以堆栈实际上是 b->C->..

现在我有一个广播接收器，它启动 A。从接收器我必须将它作为一个新任务启动。因此，现在使用堆栈 A->B 创建了另一个任务。

所以现在我的堆栈将是（B->C（来自新任务）B->C->D（来自上一个堆栈）

但我需要的是只有新的任务堆栈。即新堆栈将只是 B->C

我也尝试使用这些标志，但没有帮助

```
Intent loginIntent = new Intent(context, MyActivity.class);
        loginIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_RESET_TASK_IF_NEEDED);
        loginIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        context.startActivity(loginIntent); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T14:54:27.863

根据Androidmanifest.xml设置launchMode怎么样？在你的要求中，它可能设置为singleTask。

因此，在您的 AndroidManifest.xml 中，它会是这样的

```
 <activity
        android:name=".ScrollDemoActivity"
        android:label="@string/app_name"
        android:launchMode="singleTask">
        ...
    </activity> 
```

参考：http: [//developer.android.com/guide/components/tasks-and-back-stack.html](http://developer.android.com/guide/components/tasks-and-back-stack.html)

# delphi - 在 Windows 中不支持 WMI 的情况下读取芯片组上的温度和风扇速度，来自 Delphi

> ID：11178037
> 
> 赞同：3
> 
> 时间：2012-06-24T13:56:41.347
> 
> 标签：delphi

我进行了搜索和搜索，但没有找到关于如何在 Delphi 中使用的方法，并且我正在使用 XE2 如何从 Unvoton NCT6776F 芯片中读取传感器信息。我猜我需要在某个地方进行一些组装，但我什至找不到任何关于如何开始的信息。这是芯片的注册表详细信息。

> ```
> Bus Type = ISAIO
> One NCT6776F
> 
> Unvoton NCT6776F, IndexReg=A35, DataReg=A36
> =============================================================
> Fan1 Fan Speed, Bank 6, Offset 0x30, 0x31 RPM = 1350000/(Data=HighByte[12:5], LowByte
> 
> [4:0])
> Fan2 Fan Speed, Bank 6, Offset 0x32, 0x33 RPM = 1350000/(Data=HighByte[12:5], LowByte
> 
> [4:0])
> Fan3 Fan Speed, Bank 6, Offset 0x34, 0x35 RPM = 1350000/(Data=HighByte[12:5], LowByte
> 
> [4:0])
> CPU Voltage, Bank 0, Offset 0x20      Voltage = Data* 0.008
> VCCSA Voltage, Bank 0, Offset 0x21        Voltage = Data* 0.008
> +3.3V Voltage, Bank 0, Offset 0x22        Voltage = Data* 0.016
> Gfx Voltage, Bank 0, Offset 0x24      Voltage = Data* 0.008
> +5V Voltage, Bank 0, Offset 0x25      Voltage = Data* 0.008/ (10./40.)
> +12V Voltage, Bank 0, Offset 0x26     Voltage = Data* 0.008/ (10./66.2)
> 3.3VSB Voltage, Bank 5, Offset 0x50       Voltage = Data* 0.016
> VBAT Voltage, Bank 5, Offset 0x51     Voltage = Data* 0.016
> CPU Temperature, Bank 7, Offset 0x17, 0x18    PECI Count = (Data=HighByte,LowByte<15:6> 
> 
> hightest bit as sign bit)
> High: PECI Count>-15; Midium: -40<PECI Count<=-15; Low: PECI Count<=-40
> System Temperature, Bank 0, Offset 0x27   Temperature = Data
> Peripheral Temperature, Bank 1, Offset 0x50   Temperature = Data
> Chassis Intrusion, Bank 0, Offset 0x42, BitMask 0x10  1 = Bad, 0 = Good
>           (Clear Bit: Bank 0, Offset 0x46, BitMask 0x80)
> 
> Power Supply Failure, NCT6776F, Logical Device 0x0B, CRF7h, BitMask 0x01  0 = Good, 1 
> 
> = Bad 
> ```

如果有人知道如何阅读这些地址并获得所需的信息，我将不胜感激。如果有人可以发布一些示例代码，那就更好了。实际上，我想做的是在我的服务器软件中添加一个温度传感器仪表以进行监控。由于我正在构建的应用程序的性质，我需要直接集成数据而不使用第三方应用程序。

谢谢。

亚历克斯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T14:33:20.707

根据[lm-sensors wiki](http://www.lm-sensors.org/wiki/Devices)上的信息- 使用 LPC 总线访问设备。有一个专用的 GPLed [linux 驱动程序](https://github.com/groeck/w83627ehf/archives/master)可以下载来访问 linux 下的设备。如果我自己计划实施，我不会查看此源代码，因为可能会污染为访问设备而编写的任何专有代码。

为了使用 delphi 执行外围 I/O（如`inb`/`outb`指令或它们的等效指令），您应该查看[如何在 Windows XP 中写入 I/O 端口的问题](https://stackoverflow.com/questions/2167579/how-to-write-to-i-o-ports-in-windows-xp-delphi7)

# android - android youtube：将 youtube 视频分享到我的应用程序？

> ID：11178041
> 
> 赞同：20
> 
> 时间：2012-06-24T13:57:30.940
> 
> 标签：android, video, android-intent, youtube, share

适用于平板电脑的内置 YouTube 应用程序具有共享选项。例如：我在 YouTube 应用中观看视频，然后单击按钮**分享**。蓝牙、Googlemail 和 Dropbox 出现在我面前。我想知道如何**在那里列出我的应用程序**？我的应用有哪个意图过滤器？那我如何**获得视频网址**呢？任何的想法？谢谢。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-06-24T22:49:11.610

这对我有用。将此意图过滤器添加到您的清单文件中，以使您的应用程序出现在 youtube 应用程序的共享列表中。

```
<intent-filter>
   <action android:name="android.intent.action.SEND" />
   <category android:name="android.intent.category.DEFAULT" />              
   <data android:host="www.youtube.com" android:mimeType="text/*" />
</intent-filter> 
```

然后在你的活动中检索它，使用这个：

```
Bundle extras = getIntent().getExtras();
 String value1 = extras.getString(Intent.EXTRA_TEXT); 
```

这个给你！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-01-12T14:57:39.670

我玩了一下，并以这个解决方案结束：

```
<intent-filter android:label="My YT Handler">
    <action android:name="android.intent.action.SEND" />
    <category android:name="android.intent.category.DEFAULT"/>
    <data android:host="youtu.be" android:mimeType="text/*" />
</intent-filter> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-14T17:16:22.467

看起来 Youtube 已经改变了分享意图，所以对我来说唯一有效的解决方案是我从 android Telegram manifest 复制的那个。解决方案在 Marshamallow 6.0.1 和 Lolipop 5.1.1 上进行了测试和工作。

```
 <intent-filter android:label="@string/app_name">
            <action android:name="android.intent.action.SEND"/>
            <category android:name="android.intent.category.DEFAULT"/>
            <data android:mimeType="*/*"/>
        </intent-filter> 
```

# c# - 并行遍历上下文

> ID：11178051
> 
> 赞同：0
> 
> 时间：2012-06-24T13:58:49.647
> 
> 标签：c#, entity-framework, parallel-processing, task-parallel-library

据我了解，使用`DataContext`并行工作不是线程安全的，但前提是您将上下文声明为`static`（基于 MSDN 文档）这就是我所做的，一旦我发现它有效，而另一次它失败了！

**MSDN：** 线程安全“这种类型的任何公共静态（在 Visual Basic 中为共享）成员都是线程安全的。不保证任何实例成员都是线程安全的。” [http://msdn.microsoft.com/en-us/library/system.data.linq.datacontext.aspx](http://msdn.microsoft.com/en-us/library/system.data.linq.datacontext.aspx)

似乎我遇到了与 Thread-Safety 相关的`DataContext`常见**错误**。

在这里我解释一下我想做什么，我想要的结果是什么，希望得到专家的帮助和想法。

我想对大约 100,000 条记录进行繁重的分析，

错误是：

> EntityMemberChanged 或 EntityComplexMemberChanged 是在没有首先在具有相同属性名称的同一更改跟踪器上调用 EntityMemberChanging 或 EntityComplexMemberChanging 的情况下调用的。有关正确报告更改的信息，请参阅实体框架文档。

指向设计器代码中的这一行：

```
 ReportPropertyChanged("ProductName"); 
```

**我的代码中有什么：**

```
 //On form Load
    if (Repository.ContextP == null)
          Repository.ContextP = new dbEntities();

    private void btnProcess_Click(object sender, EventArgs e)
    {
       Task.Factory.StartNew(() =>
         Process(), TaskCreationOptions.LongRunning); 
    }   

    private void Process()
    {
        var query = from W in Repository.ContextP.Products
                select W;

        Parallel.ForEach(query, options , product =>
        {
           // There are some heavy processes to get stFormattedDef
           product.ProductName= stFormattedDef;               
        }
     }

     // The Repository - static
     static class Repository
     {
         public static dbEntities ContextP { get; set; } 
     } 
```

安全性和数据上下文生命周期应该不是问题，因为分析处于构建阶段并且是本地的。

我做错了什么？

有什么建议么？

类似案例的想法或经验？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T16:06:22.683

我不知道EF，但是从问题和评论来看，我认为问题在于你不能同时`ProductName`从不同的线程设置，即使是针对不同`Product`的s（因为它们都使用相同的非线程-安全`DataContext`）。

所以，我的建议是并行运行昂贵的操作，但要确保`ProductName`一次只从一个线程进行设置。实现这一目标的最简单方法是使用`lock`：

```
var productLock = new object();

Parallel.ForEach(query, options , product =>
{
   // There are some heavy processes to get stFormattedDef

   lock (productLock)
   {
       product.ProductName = stFormattedDef;
   }
} 
```

就像我说的，我不知道 EF，所以我不完全理解这个问题。因此，这可能不是正确的解决方案。

# fortran - 从 Intel Fortran 调用 COM？

> ID：11178057
> 
> 赞同：2
> 
> 时间：2012-06-22T23:12:11.943
> 
> 标签：fortran, com

我试图让 COM 从我的 Fortran 应用程序中工作。我做 a`COMINITIALIZE`后跟 a `COMCreateObjectByProgID`。这两个似乎都成功并返回零状态。但是，当我尝试使用 COM 对象时，我得到：

```
Unhandled exception at 0x00000000 in FortranProg01.exe: 0xC0000005: Access violation. 
```

我意识到这个错误可能意味着几乎任何事情，但是有没有人对产生这个问题的 COM 常见问题提出一些建议？我的程序代码：

```
program FortranProg01

use myolepg
implicit none

integer*4 comInitStatus
integer:: comCreateStatus
INTEGER(INT_PTR_KIND()) $OBJECT
INTEGER(4) funcResult
REAL(8) pkgVersion

call COMINITIALIZE(comInitStatus)
print *, comInitStatus

call COMCreateObjectByProgID('MyOlePg.MyOlePkg', $OBJECT, comCreateStatus)
print *, comCreateStatus

funcResult = IMyOlePkg_GetPackageVersion($OBJECT, pkgVersion)
print *, funcResult

call COMUNINITIALIZE()

end program FortranProg01 
```

向导生成的界面代码：

```
INTERFACE

  !property PackageVersion

    INTEGER(4) FUNCTION IMyOlePkg_GetPackageVersion($OBJECT, pVal)

    INTEGER(INT_PTR_KIND()), INTENT(IN) :: $OBJECT ! Object Pointer

    !DEC$ ATTRIBUTES VALUE :: $OBJECT

    REAL(8), INTENT(OUT) :: pVal 

    !DEC$ ATTRIBUTES REFERENCE :: pVal

  !DEC$ ATTRIBUTES STDCALL :: IMyOlePkg_GetPackageVersion

  END FUNCTION IMyOlePkg_GetPackageVersion

END INTERFACE 
```

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T09:29:30.500

未修饰的接口成员只是函数名称，但它们的地址在编译时是未知的（因为它们是从 COM 动态导入的，所以无法知道）。链接器将它们的值设置为`0x00000000`，这就是为什么会出现此错误，类似于`NULL`在 C 中取消引用指针时发生的情况。

正如 Compaq Visual Fortran 用户指南中所写：

> COM 成员函数的接口看起来与动态链接库函数的接口非常相似，但有一个主要例外。与 DLL 函数不同，COM 成员函数的地址在程序链接时永远是未知的。您必须在运行时获得指向对象接口的指针，并从中计算特定成员函数的地址。

这正是装饰版本所做的。它们`$OBJECT`实际上是指向对象接口的指针，而后者又是实现接口的实际对象方法的地址表（vtable）。然后，修饰函数在实际方法的 vtable 中添加偏移量，并通过指针*分配结果地址，**然后才*调用非修饰函数（不再是`NULL`指针）。

[请参阅此处](http://jp.xlsoft.com/documents/intel/cvf/cvf_pg.pdf)提供的 Compaq Visual Fortran 用户指南的第 541 页（*调用模块向导生成的例程*） 。有一个带注释的示例说明究竟生成了什么以及为什么生成。注意接口定义的注释 6（声明了指向非修饰接口成员的指针）和修饰函数的注释 4。

警告与来自 Microsoft 链接器的[警告 LNK4217](http://msdn.microsoft.com/en-us/library/aa3se25k%28v=vs.100%29.aspx)`#11077`相同。可能忽略它是安全的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T05:26:13.597

好的，看起来这是一个特定于包的问题。更准确地说，这是我对软件包或当前 Fortran 约定的误解。据我所知，包中的几乎所有方法都定义了两次，一次使用常规名称，一次使用`$`前言。

因此，如果我使用`$IMyOlePkg_GetPackageVersion`调用而不是`IMyOlePkg_GetPackageVersion`调用，我会收到构建警告：

```
ipo: warning #11077: ...: locally defined symbol ... imported 
```

但它有效！特别有趣的是，该`$`方法看起来只是添加一个偏移量，然后调用该`non-$`方法。

现在虽然我真的不喜欢这个警告，如果有人能解释警告和两个不同的电话，我会很高兴，但我有它的工作，如果我从来没有得到令人满意的解释，我可能会学会生活接着就，随即。

# c# - 如何在不退出 WP7 程序的情况下使用 SaveContactTask？

> ID：11178059
> 
> 赞同：0
> 
> 时间：2012-06-24T13:59:24.530
> 
> 标签：c#, windows-phone-7

当我使用此任务时，保存联系人后，我无法在我的应用程序中执行任何操作，除了显示带有消息的消息框，当此任务完成后如何再次返回我的应用程序！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T14:41:34.353

这应该可以解决。任务完成后，您的应用程序将再次获得控制权。您可以使用 Completed 事件处理程序控制任务结果

```
this.saveContactTask.Completed += new EventHandler<SaveContactResult>(saveContactTask_Completed);

private void saveContactTask_Completed(object sender, SaveContactResult e)
{
    switch (e.TaskResult)
    {
        case TaskResult.OK:
        MessageBox.Show("Contact is successfully saved.");
        break;
        case TaskResult.Cancel:
        MessageBox.Show("The user canceled the task.");
        break;
        case TaskResult.None:
        MessageBox.Show("NO information regarding the task result is available.");
        break;
    }
} 
```

在这里，您可以找到完全按照您的意愿工作的功能齐全的示例。您可以查看并与您的实现进行比较

[http://windowsphonegeek.com/tips/8-How-to-use-SaveContactTask-in-Windows-Phone-Mango](http://windowsphonegeek.com/tips/8-How-to-use-SaveContactTask-in-Windows-Phone-Mango)

# python - 在单行中打印不带括号的列表

> ID：11178061
> 
> 赞同：206
> 
> 时间：2012-06-24T13:59:28.870
> 
> 标签：python, list

我有一个 Python 列表，例如

```
names = ["Sam", "Peter", "James", "Julian", "Ann"] 
```

我想在没有正常“ []的情况下在一行中打印数组

```
names = ["Sam", "Peter", "James", "Julian", "Ann"]
print (names) 
```

将输出为；

```
["Sam", "Peter", "James", "Julian", "Ann"] 
```

那不是我想要的格式，而是我希望它是这样的；

```
Sam, Peter, James, Julian, Ann 
```

注意：它必须在一行中。

* * *

## 回答 #1

> 赞同：308
> 
> 时间：2012-06-24T14:01:07.273

```
print(', '.join(names)) 
```

就像听起来一样，这只是获取列表的所有元素并将它们与`', '`.

* * *

## 回答 #2

> 赞同：98
> 
> 时间：2016-01-31T20:24:27.460

这是一个简单的。

```
names = ["Sam", "Peter", "James", "Julian", "Ann"]
print(*names, sep=", ") 
```

星号解包列表并返回列表中的每个元素。

* * *

## 回答 #3

> 赞同：56
> 
> 时间：2013-02-04T02:45:41.083

一般解决方案，适用于非字符串数组：

```
>>> print str(names)[1:-1]
'Sam', 'Peter', 'James', 'Julian', 'Ann' 
```

* * *

## 回答 #4

> 赞同：26
> 
> 时间：2016-10-06T07:38:19.157

如果输入数组是**整数类型**，那么您需要先将数组转换为**字符串类型**数组，然后使用任何您想要`join`的加入`,`或**空格的方法。**例如：

```
>>> arr = [1, 2, 4, 3]
>>> print(", " . join(arr))
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: sequence item 0: expected string, int found
>>> sarr = [str(a) for a in arr]
>>> print(", " . join(sarr))
1, 2, 4, 3
>>> 
```

直接使用 join 将连接整数和字符串将抛出如上所示的错误。

* * *

## 回答 #5

> 赞同：20
> 
> 时间：2017-03-01T04:20:30.447

有两个答案，首先是使用'sep'设置

```
>>> print(*names, sep = ', ') 
```

另一个在下面

```
>>> print(', '.join(names)) 
```

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2012-06-24T14:02:40.050

这就是你需要的

```
", ".join(names) 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2019-01-24T11:26:59.730

`','.join(list)`仅当列表中的所有项目都是字符串时才有效。如果您希望将数字列表转换为逗号分隔的字符串。比如`a = [1, 2, 3, 4]`进入`'1,2,3,4'`然后你可以

```
str(a)[1:-1] # '1, 2, 3, 4' 
```

或者

```
str(a).lstrip('[').rstrip(']') # '1, 2, 3, 4' 
```

虽然这不会删除任何嵌套列表。

将其转换回列表

```
a = '1,2,3,4'
import ast
ast.literal_eval('['+a+']')
#[1, 2, 3, 4] 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2020-07-22T00:22:46.423

对于整数类型的数组，我们需要先将其更改为字符串类型，然后使用连接函数来获得不带括号的干净输出。

```
 arr = [1, 2, 3, 4, 5]    
    print(', '.join(map(str, arr))) 
```

输出 - 1、2、3、4、5

对于字符串类型的数组，我们需要直接使用join函数来获得不带括号的干净输出。

```
 arr = ["Ram", "Mohan", "Shyam", "Dilip", "Sohan"]
    print(', '.join(arr) 
```

输出 - Ram、Mohan、Shyam、Dilip、Sohan

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2020-12-11T11:45:57.753

尝试在带有打印语句的列表名称之前使用星号：

```
names = ["Sam", "Peter", "James", "Julian", "Ann"]  
print(*names) 
```

输出：

```
Sam Peter James Julian Ann 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2019-11-17T11:37:23.777

> 打印（*名称）

如果您希望它们以空格分隔的形式打印出来，这将在 python 3 中起作用。如果您需要逗号或其他任何内容，请继续使用 .join() 解决方案

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2015-04-29T00:32:22.447

您需要遍历列表并使用`end=" "`将其保持在一行

```
names = ["Sam", "Peter", "James", "Julian", "Ann"]
    index=0
    for name in names:
        print(names[index], end=", ")
        index += 1 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2016-02-25T12:59:24.790

我不知道这是否像其他人一样有效，但简单的逻辑总是有效的：

```
import sys
name = ["Sam", "Peter", "James", "Julian", "Ann"]
for i in range(0, len(names)):
    sys.stdout.write(names[i])
    if i != len(names)-1:
        sys.stdout.write(", ") 
```

输出：

> 山姆、彼得、詹姆斯、朱利安、安

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-06-15T17:01:17.423

以下函数将接收一个列表并返回列表项的字符串。然后可以将其用于记录或打印目的。

```
def listToString(inList):
    outString = ''
    if len(inList)==1:
        outString = outString+str(inList[0])
    if len(inList)>1:
        outString = outString+str(inList[0])
        for items in inList[1:]:
            outString = outString+', '+str(items)
    return outString 
```

# asp.net-mvc - ASP.NET MVC 和后期验证？

> ID：11178064
> 
> 赞同：0
> 
> 时间：2012-06-24T14:00:19.337
> 
> 标签：asp.net-mvc, validation, redirect

**你好，**

对于将要提交的视图，我有两个具有相同名称的操作，但其中一个具有此属性：

```
[AcceptVerbs(HttpVerbs.Post)] 
```

在非发布操作中，我通常会进行一些验证，如果用户不正确，用户将被重定向到另一个操作，例如验证编辑中的当前对象是否可以更改。

我是否需要在帖子操作中进行完全相同的验证，以确保该页面不会被某种自定义帖子入侵？

如果是这样，你通常如何处理这个？我确实知道 AuthorizeAttribute，但我需要做的验证是针对此操作的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T14:06:41.600

> 我是否需要在帖子操作中进行完全相同的验证，以确保该页面不会被某种自定义帖子入侵？

修改服务器上某些状态并需要授权的每个控制器操作都必须执行此授权。

> 我确实知道 AuthorizeAttribute，但我需要做的验证是针对此操作的。

然后为这 2 个操作编写一个特定的 Authorize 属性（显然您对 2 个操作具有相同的授权逻辑）。

但是你的描述有点奇怪。您说过，如果在您重定向的 GET 操作中授权失败。但是当您重定向时，您显然无法调用 POST 操作，因为重定向意味着 GET。

# windows - Windows 注册表重定向是“坏事”吗？

> ID：11178066
> 
> 赞同：1
> 
> 时间：2012-06-24T14:00:32.390
> 
> 标签：windows, visual-c++, registry, wow64, virtualstore

我有自己的安装程序，我用它来安装我编写的几个应用程序。

我一直在更新这个程序以避免应用程序的数据文件更新进入用户的 VirtualStore，因为我读到这是一件“坏事”。我通过将程序和通用数据文件分别存储在正确的位置来做到这一点，而不是像 XP 时代那样将所有内容都粘贴在 Program Files 中。

我现在也在使用 SHGetFolderPath （是的，它已被弃用，但我仍然需要支持我的 XP 用户）来获取已知文件夹而不是拖网注册表，这是另一个“坏事”（我读过）。

我尝试做的下一件事是重写安装程序代码，以避免在向 HKLM 写入内容时将注册表重定向到 Wow6432Node，因为我认为这是另一个“坏事”。

然而，虽然我可以把应用程序特定的东西放在那里（比如安装文件夹，如果用户决定安装默认值以外的地方），杀手是需要把卸载信息放在 HKLM\Software\Microsoft\Windows \CurrentVersion\卸载。对于在 64 位系统上运行的 32 位内容，它被重定向到 Wow6432Node。我看不出有什么办法——这实际上可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T20:01:25.683

UAC 注册表重定向可以合理地描述为“坏事”，因为它专门设计用于提供与编写不当的软件的兼容性，即假定它将以管理员权限运行的软件。

WOW64 注册表重定向是另一种野兽；它旨在提供与正确编写的 32 位软件的兼容性。如果您的软件是 32 位的，并且没有特别需要支持 64 位，那么让它在仿真环境中按原样运行并没有错，包括允许将注册表设置重定向到 Wow6432Node。

如有必要，您可以[绕过 WOW64 注册表重定向](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384129%28v=vs.85%29.aspx)，但您不应该随意这样做，只有在有特定原因的情况下。如果您担心 WOW64 重定向，唯一好的选择是提供 64 位版本的程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-30T14:34:47.453

这是一件非常“坏事”！微软通过将东西隐藏在另一个地方来解决安全问题！我创建了一个程序，在安装应用程序期间向用户询问一些附加参数（语言、课程目录）。我对程序进行了深入的测试，注册表项制作得很完美。然而，在设置过程中，条目被隐藏在某个奇怪的地方！如果微软想要重定向这些实体，至少应该设置一些选项。永远不要隐藏事物，并认为他们不会注意到，因为它是透明的。正确执行此操作将涉及设置选项，因此用户知道重定向！

# mysql - 如何连接三个半相关的表

> ID：11178067
> 
> 赞同：0
> 
> 时间：2012-06-24T14:00:39.447
> 
> 标签：mysql, join, left-join

我在 Mysql 数据库中有三个表——国家、城市和酒店。他们的关系是：国家有很多城市，城市有很多酒店。

我希望能够选择给定特定国家/地区的所有酒店。id。我的 SQL 很弱。我想出的连接语句如下，它总是返回 0 行。

```
SELECT 
    countries.name as country,
    cities.name as city,
    hotels.name as hotel
FROM 
    countries
    left join cities
        on countries.id = cities.country_id
    left join hotels
        on cities.id = hotels.city_id

WHERE
    countries.id = @id 
```

帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T14:28:23.237

试着去掉*where*子句，看看你*实际上*有什么记录。也许您使用的特定 ID 不是已知的国家 ID。

* * *

此外，仅在严格的格式/样式问题上，恕我直言，这更好：

```
SELECT 
    countries.name as country,
    cities.name as city,
    hotels.name as hotel
FROM countries
left join cities on cities.country_id = countries.id
left join hotels on hotels.city_id = cities.id
WHERE countries.id = @id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T14:29:23.043

我的经验法则是始终以我想要的实际事物的表作为我的结果来开始我的 FROM 子句。

```
SELECT 
  countries.name as country,
  cities.name as city,
  hotels.name as hotel
FROM  
  hotels JOIN cities ON cities.id = hotels.city_id
  join countries on countries.id = cities.country_id
WHERE
  countries.id = @id 
```

额外的好处是您不需要外部连接:-)

# android - Android和Drupal登录系统

> ID：11178070
> 
> 赞同：0
> 
> 时间：2012-06-24T14:00:44.093
> 
> 标签：android, drupal, login

我正在开发一个 Android 应用程序，在这个应用程序中我希望用户登录或注册一个新帐户。我想要登录系统的方式是，该应用程序与我的 Drupal 网站联系，并且（该网站有一个名为 Janrain Engage 的模块）从那里获取信息并将其与 EditText 的输入进行比较。

我在网上搜索以找到解决方案，但没有任何运气。我还尝试了 Janrain Engage 自己网站的示例。

如果有人能给我一个如何做到这一点的例子，我会很高兴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T22:10:36.773

我已经在几个项目中使用了[DrupalCloud](https://github.com/INsReady/DrupalCloud)库，并且效果很好。它与[服务](http://drupal.org/project/services)模块一起工作。

服务为用户公开了几个 Web 服务，例如注册和身份验证。我没有使用 Janrain 模块，所以我不知道用户服务是否会知道它。如果不是，您可能必须编写自己的服务来检查来自 Janrain 的数据。

# android - 在 Android (ffmpeg) 上将 jpeg 编码为 H264 流

> ID：11178072
> 
> 赞同：2
> 
> 时间：2012-06-24T14:00:59.350
> 
> 标签：android, ffmpeg, jpeg, h.264, encode

我有一堆代表视频的 jpeg 图像。我需要以 H264 格式对图像进行编码，以便将其流式传输到服务器（从 android 设备）。我知道这可以使用 ffmpeg 库来完成。我将 ffmpeg 编译为 .so 文件，现在我正在尝试找出使用哪些方法以及如何...

任何人都知道如何使用 ffmpeg 在 Android 上将 jpeg 转换为 H264 流？任何示例代码将不胜感激:)

谢谢！铅

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T01:58:15.900

我使用修改后的脚本来编译带有 android NDK r8 和 ffmpeg 0.1.11 的 ffmpeg。

```
#!/bin/bash

######################################################
# FFmpeg builds script for Android+ARM platform
#
# This script is released under term of 
#   CDDL (http://www.opensource.org/licenses/cddl1) 
# Wrote by pinxue (~@gmail.com) from RockPlayer.com
#                                   2010-8 ~ 2011-4
# Modified by Jacx Wang jacxwang(@)gmail.com 2012-07
######################################################

NDK=/Users/jacxwang/app/android-ndk-r8
PLATFORM=/Users/jacxwang/app/android-ndk-r8/platforms/android-8/arch-arm
PREBUILT=/Users/jacxwang/app/android-ndk-r8/toolchains/arm-linux-androideabi-4.4.3/prebuilt/darwin-x86

function build_one
{

./configure --target-os=linux \
--prefix=$PREFIX \
--enable-cross-compile \
--extra-libs="-lgcc" \
--arch=arm \
--cc=$PREBUILT/bin/arm-linux-androideabi-gcc \
--cross-prefix=$PREBUILT/bin/arm-linux-androideabi- \
--nm=$PREBUILT/bin/arm-linux-androideabi-nm \
--sysroot=$PLATFORM \
--extra-cflags=" -O3 -fpic -DANDROID -DHAVE_SYS_UIO_H=1 -Dipv6mr_interface=ipv6mr_ifindex -fasm -Wno-psabi -fno-short-enums  -fno-strict-aliasing -finline-limit=300 $OPTIMIZE_CFLAGS " \
--disable-shared \
--enable-static \
--extra-ldflags="-Wl,-rpath-link=$PLATFORM/usr/lib -L$PLATFORM/usr/lib  -nostdlib -lc -lm -ldl -llog" \
--enable-parsers \
--enable-encoders  \
--enable-decoders \
--enable-muxers \
--enable-demuxers \
--enable-swscale  \
--disable-ffplay \
--enable-ffprobe \
--enable-ffserver \
--enable-network \
--enable-indevs \
--disable-bsfs \
--disable-filters \
--enable-protocols  \
--enable-asm \
--enable-gpl \
$ADDITIONAL_CONFIGURE_FLAG

#make clean
make  -j3 install

$PREBUILT/bin/arm-linux-androideabi-ar d libavcodec/libavcodec.a inverse.o

$PREBUILT/bin/arm-linux-androideabi-ld -rpath-link=$PLATFORM/usr/lib -L$PLATFORM/usr/lib  -soname libffmpeg.so -shared -nostdlib  -z,noexecstack -Bsymbolic --whole-archive --no-undefined -o $PREFIX/libffmpeg.so libavcodec/libavcodec.a libavformat/libavformat.a libavutil/libavutil.a libswscale/libswscale.a -lc -lm -lz -ldl -llog  --warn-once  --dynamic-linker=/system/bin/linker $PREBUILT/lib/gcc/arm-linux-androideabi/4.4.3/libgcc.a 

}

#arm v6
CPU=armv6
OPTIMIZE_CFLAGS="-marm -march=$CPU"
PREFIX=./android/$CPU 
ADDITIONAL_CONFIGURE_FLAG=
#build_one

#arm v7vfpv3
CPU=armv7-a
OPTIMIZE_CFLAGS="-mfloat-abi=softfp -mfpu=vfpv3-d16 -marm -march=$CPU "
PREFIX=./android/$CPU 
ADDITIONAL_CONFIGURE_FLAG=
build_one

#arm v7vfp
CPU=armv7-a
OPTIMIZE_CFLAGS="-mfloat-abi=softfp -mfpu=vfp -marm -march=$CPU "
PREFIX=./android/$CPU-vfp
ADDITIONAL_CONFIGURE_FLAG=
build_one

#arm v6+vfp
CPU=armv6
OPTIMIZE_CFLAGS="-DCMP_HAVE_VFP -mfloat-abi=softfp -mfpu=vfp -marm -march=$CPU"
PREFIX=./android/${CPU}-vfp 
ADDITIONAL_CONFIGURE_FLAG=
build_one 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T01:33:49.250

[https://github.com/jhotovy/android-ffmpeg](https://github.com/jhotovy/android-ffmpeg)

该项目中的 ProjectTest 具有从 jpg（视频）和 mp3（音频）集合创建 mp4 的 android 代码

这个项目是从 git 上的另一个项目派生出来的。你可以按照说明在 linux 上构建它

# expressionengine - 带有相关条目的 ExpressionEngine 条件逻辑

> ID：11178073
> 
> 赞同：0
> 
> 时间：2012-06-24T14:01:02.657
> 
> 标签：expressionengine

```
{if taxonomy != "" OR related_pages != "" OR related_posts != "" OR related_news != ""}
    <footer role="contentinfo">
        {if taxonomy != ""}
            <div id="taxonomy" itemprop="taxonomy">
                <h3>Category tags for this page</h3>

                <ul property="dcterms:type">
                    {exp:tagger:tags entry_id="{entry_id}" orderby=”tag_name”}
                        <li>
                            <a href="/page/tag/{tagger:urlsafe_tagname}" rel="tag">{tagger:tag_name}</a>
                        </li>
                    {/exp:tagger:tags}
                </ul>
            </div>
        {/if}

        {if related_pages != ""}
            <div id="related-pages">
                {related_entries id="related_pages"}
                    <h3>{title}</h3>
                    {body}
                {/related_entries}
            </div>
        {/if}

        {if related_posts != ""}
            <div id="related-posts">
                {related_entries id="related_posts"}
                    <h3>{title}</h3>
                    {body}
                {/related_entries}
            </div>
        {/if}

        {if related_news != ""}
            <div id="related-news">
                {related_entries id="related_news"}
                    <h3>{title}</h3>
                    {body}
                {/related_entries}
            </div>
        {/if}
    </footer>
{/if} 
```

因此，我希望编写条件代码，如果分类、related_pa​​ges、related_posts 或 related_news 中的任何一个不为空，则首先只会显示页脚元素。请注意，related_* 都是关系字段 ID。

在这个 if 语句中是嵌套的条件语句，如果相应的 ID 不为空，它将只显示内容块。不幸的是，即使没有选择相关内容，EE 似乎也不会看到关系字段为空。

有谁知道在未选择任何内容时关系字段 ID 解析的内容，或者处理我在此代码中尝试执行的操作的另一种解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T15:55:02.243

有点啰嗦，但是...

```
{if "{taxonomy}" != "" OR 
    "{related_entries id="related_pages"}{entry_id}{/related_entries}" != "" OR
    "{related_entries id="related_posts"}{entry_id}{/related_entries}" != "" OR
    "{related_entries id="related_news"}{entry_id}{/related_entries}" != ""}
...
{if "{related_entries id="related_pages"}{entry_id}{/related_entries}" != ""}
...
{if "{related_entries id="related_posts"}{entry_id}{/related_entries}" != ""}
...
{if "{related_entries id="related_news"}{entry_id}{/related_entries}" != ""}
... 
```

如果您的预算足够，那么[Playa](http://devot-ee.com/add-ons/playa)插件就是关系之王，让处理关系变得轻而易举。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T19:19:45.037

感谢彼得刘易斯让我在这方面走在了正确的道路上。请注意，当您在 ID 周围使用双引号时，您似乎必须在每个引用周围添加它们，否则会引发异常。此外，[limit 属性或计数在 related_entries 上不可用，](http://expressionengine.com/archived_forums/viewthread/90553/)但可以使用自定义 PHP 计数进行处理，如链接的论坛线程中所示。

这是适用的改编模板代码：

```
{if "{taxonomy}" != "" OR 
    "{related_entries id="related_pages"}{entry_id}{/related_entries}" != "" OR
    "{related_entries id="related_posts"}{entry_id}{/related_entries}" != "" OR
    "{related_entries id="related_news"}{entry_id}{/related_entries}" != ""}
...
{if taxonomy != ""}
...
{if "{related_entries id="related_pages"}{entry_id}{/related_entries}" != ""}
...
{if "{related_entries id="related_posts"}{entry_id}{/related_entries}" !=   ""}
...
{if "{related_entries id="related_news"}{entry_id}{/related_entries}" != ""}
... 
```

# android - 拖动但为空的剪辑数据

> ID：11178079
> 
> 赞同：1
> 
> 时间：2012-06-24T14:01:32.767
> 
> 标签：android, drag-and-drop

我找不到问题出在哪里，我想我把东西放入了项目和剪辑数据中，但是我的 onDrag 总是收到一个空指针异常，甚至无法获得项目的数量。

这是我的 OnDragListener 类

```
 public class ScaleImageSize implements View.OnDragListener{

            @Override
            public boolean onDrag(View arg0, DragEvent arg1) {
                // TODO Auto-generated method stub
                final int action = arg1.getAction();                    
                Integer tag  = (Integer) arg0.getTag();
                Log.d("tag",Integer.toString(tag));

                int count = arg1.getClipData().getItemCount();
                Log.d("count",Integer.toString(count));

                ClipData.Item item = arg1.getClipData().getItemAt(0);
                String tagString = item.getText().toString();
                int tagOfType = Integer.valueOf(tagString);

                switch(action){

                case DragEvent.ACTION_DRAG_STARTED:

                    return true;
                case DragEvent.ACTION_DRAG_LOCATION:
                    augImg( tag, (int) arg1.getY());

                    augImg( tagOfType, (int)arg1.getY());

                    return true;
                case DragEvent.ACTION_DROP:

                    return true;
                }               
                return false;
            }

        }; 
```

这是我的 OnLonClickListener 类，它应该调用函数 startdrag。

```
 OnLongClickListener StartScaleImageSize = new OnLongClickListener(){

        @Override
        public boolean onLongClick(View v) {
            // TODO Auto-generated method stub
            int i  =  (Integer) v.getTag();
            beingLongClick[i] = true;

            ClipData.Item item = new ClipData.Item((CharSequence)Integer.toString(i));
            String[] clipDescription = {ClipDescription.MIMETYPE_TEXT_PLAIN};
            ClipData dragData = new ClipData((CharSequence)Integer.toString(i), 
                    clipDescription,
                    item);
            dragData.addItem(item);

            DragShadowBuilder shadowBuilder = new View.DragShadowBuilder(v);
            v.startDrag(dragData, shadowBuilder, v, 0);
            return false;
        }
    }; 
```

和**错误信息**：

```
06-24 21:47:21.205: E/AndroidRuntime(4123): FATAL EXCEPTION: main
06-24 21:47:21.205: E/AndroidRuntime(4123): java.lang.NullPointerException
06-24 21:47:21.205: E/AndroidRuntime(4123):     at traveler.com.TravelerpActivity$TypeMgr$ScaleImageSize.onDrag(TravelerpActivity.java:237)
06-24 21:47:21.205: E/AndroidRuntime(4123):     at android.view.View.dispatchDragEvent(View.java:13619)
06-24 21:47:21.205: E/AndroidRuntime(4123):     at android.view.ViewGroup.notifyChildOfDrag(ViewGroup.java:1287)
06-24 21:47:21.205: E/AndroidRuntime(4123):     at android.view.ViewGroup.dispatchDragEvent(ViewGroup.java:1131)
06-24 21:47:21.205: E/AndroidRuntime(4123):     at android.view.ViewGroup.notifyChildOfDrag(ViewGroup.java:1287)
06-24 21:47:21.205: E/AndroidRuntime(4123):     at android.view.ViewGroup.dispatchDragEvent(ViewGroup.java:1131)
06-24 21:47:21.205: E/AndroidRuntime(4123):     at android.view.ViewGroup.notifyChildOfDrag(ViewGroup.java:1287)
06-24 21:47:21.205: E/AndroidRuntime(4123):     at android.view.ViewGroup.dispatchDragEvent(ViewGroup.java:1131)
06-24 21:47:21.205: E/AndroidRuntime(4123):     at android.view.ViewGroup.notifyChildOfDrag(ViewGroup.java:1287)
06-24 21:47:21.205: E/AndroidRuntime(4123):     at android.view.ViewGroup.dispatchDragEvent(ViewGroup.java:1131)
06-24 21:47:21.205: E/AndroidRuntime(4123):     at android.view.ViewRootImpl.handleDragEvent(ViewRootImpl.java:3471)
06-24 21:47:21.205: E/AndroidRuntime(4123):     at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2620)
06-24 21:47:21.205: E/AndroidRuntime(4123):     at android.os.Handler.dispatchMessage(Handler.java:99)
06-24 21:47:21.205: E/AndroidRuntime(4123):     at android.os.Looper.loop(Looper.java:137)
06-24 21:47:21.205: E/AndroidRuntime(4123):     at android.app.ActivityThread.main(ActivityThread.java:4441)
06-24 21:47:21.205: E/AndroidRuntime(4123):     at java.lang.reflect.Method.invokeNative(Native Method)
06-24 21:47:21.205: E/AndroidRuntime(4123):     at java.lang.reflect.Method.invoke(Method.java:511)
06-24 21:47:21.205: E/AndroidRuntime(4123):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
06-24 21:47:21.205: E/AndroidRuntime(4123):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
06-24 21:47:21.205: E/AndroidRuntime(4123):     at dalvik.system.NativeStart.main(Native Method) 
```

请，任何建议都会很棒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T07:56:11.303

尝试以这种方式创建 dragData：

```
ClipData dragData = ClipData.newPlainText("simple text", toString(i)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-05-16T13:22:28.413

我知道这是一个超级旧的线程，但我最近遇到了这个问题。显然，`clipData`仅适用于放置事件 ( `DragEvent.ACTION_DROP`) 而不是拖动事件类型。

根据官方文档，[https://developer.android.com/reference/android/view/DragEvent](https://developer.android.com/reference/android/view/DragEvent) `getClipData()`仅在`DragEvent.ACTION_DROP`

# c++ - 使用 FFT (FFTW) 计算两个函数的卷积

> ID：11178080
> 
> 赞同：2
> 
> 时间：2012-06-24T14:01:33.533
> 
> 标签：c++, math, fft, fftw, biological-neural-network

我正在尝试使用 FFT 加速神经模拟器的计算。

方程是：

(1) \sum(j=1 to N) (w(i - j) * s_NMDA[j])

其中 s_NMDA 是长度为 N 的向量，w 定义为：

(2) w(j) = tanh[1/(2 * sigma * p)] * exp(-abs(j) / (sigma * p)]

其中 sigma 和 p 是常数。

（有没有更好的方法在stackoverflow上渲染方程？）

必须对 N 个神经元进行计算。由于 (1) 仅取决于绝对距离 abs(i - j)，因此应该可以使用 FFT（卷积定理）进行计算。

我尝试使用 FFTW 来实现这一点，但结果与预期结果不匹配。我以前从未使用过 FFTW，现在我不确定我的实现是否不正确，我对卷积定理的假设是否错误。

```
void f_I_NMDA_FFT(
    const double     **states, // states[i][6] == s_NMDA[i]
    const unsigned int numNeurons)
{
    fftw_complex *distances, *sNMDAs, *convolution;
    fftw_complex *distances_f, *sNMDAs_f, *convolution_f;
    fftw_plan     p, pinv;
    const double scale = 1./numNeurons;

        distances = (fftw_complex *)fftw_malloc(sizeof(fftw_complex) * numNeurons);
        sNMDAs    = (fftw_complex *)fftw_malloc(sizeof(fftw_complex) * numNeurons);
        convolution = (fftw_complex *)fftw_malloc(sizeof(fftw_complex) * numNeurons);
        distances_f = (fftw_complex *)fftw_malloc(sizeof(fftw_complex) * numNeurons);
        sNMDAs_f    = (fftw_complex *)fftw_malloc(sizeof(fftw_complex) * numNeurons);
        convolution_f    = (fftw_complex *)fftw_malloc(sizeof(fftw_complex) * numNeurons);

        // fill input array for distances  
    for (unsigned int i = 0; i < numNeurons; ++i)
    {
        distances[i][0] = w(i);
        distances[i][1] = 0;
    }

        // fill input array for sNMDAs
    for (unsigned int i = 0; i < numNeurons; ++i)
    {
        sNMDAs[i][0] = states[i][6];
        sNMDAs[i][1] = 0;
    }

    p = fftw_plan_dft_1d(numNeurons,
                         distances,
                         distances_f,
                         FFTW_FORWARD,
                         FFTW_ESTIMATE);
    fftw_execute(p);

    p = fftw_plan_dft_1d(numNeurons,
                         sNMDAs,
                         sNMDAs_f,
                         FFTW_FORWARD,
                         FFTW_ESTIMATE);
    fftw_execute(p);

    // convolution in frequency domain
    for(unsigned int i = 0; i < numNeurons; ++i)
    {
        convolution_f[i][0] = (distances_f[i][0] * sNMDAs_f[i][0]
            - distances_f[i][1] * sNMDAs_f[i][1]) * scale;
        convolution_f[i][1] = (distances_f[i][0] * sNMDAs_f[i][1]
            - distances_f[i][1] * sNMDAs_f[i][0]) * scale;
    }

    pinv = fftw_plan_dft_1d(numNeurons,
                            convolution_f,
                            convolution,
                            FFTW_FORWARD,
                            FFTW_ESTIMATE);
    fftw_execute(pinv);

    // compute and compare with expected result
    for (unsigned int i = 0; i < numNeurons; ++i)
    {
            double expected = 0;

            for (int j = 0; j < numNeurons; ++j)
            {
                expected += w(i - j) * states[j][6];
            }
            printf("i=%d, FFT: r%f, i%f : Expected: %f\n", i, convolution[i][0], convolution[i][1], expected);
    }

    fftw_destroy_plan(p);
    fftw_destroy_plan(pinv);

    fftw_free(distances), fftw_free(sNMDAs), fftw_free(convolution);
    fftw_free(distances_f), fftw_free(sNMDAs_f), fftw_free(convolution_f); 
```

这是 20 个神经元的示例输出：

```
i=0, FFT: r0.042309, i0.000000 : Expected: 0.041504
i=1, FFT: r0.042389, i0.000000 : Expected: 0.042639
i=2, FFT: r0.042466, i0.000000 : Expected: 0.043633
i=3, FFT: r0.042543, i0.000000 : Expected: 0.044487
i=4, FFT: r0.041940, i0.000000 : Expected: 0.045203
i=5, FFT: r0.041334, i0.000000 : Expected: 0.045963
i=6, FFT: r0.041405, i0.000000 : Expected: 0.046585
i=7, FFT: r0.041472, i0.000000 : Expected: 0.047070
i=8, FFT: r0.041537, i0.000000 : Expected: 0.047419
i=9, FFT: r0.041600, i0.000000 : Expected: 0.047631
i=10, FFT: r0.041660, i0.000000 : Expected: 0.047708
i=11, FFT: r0.041717, i0.000000 : Expected: 0.047649
i=12, FFT: r0.041773, i0.000000 : Expected: 0.047454
i=13, FFT: r0.041826, i0.000000 : Expected: 0.047123
i=14, FFT: r0.041877, i0.000000 : Expected: 0.046656
i=15, FFT: r0.041926, i0.000000 : Expected: 0.046052
i=16, FFT: r0.041294, i0.000000 : Expected: 0.045310
i=17, FFT: r0.042059, i0.000000 : Expected: 0.044430
i=18, FFT: r0.042144, i0.000000 : Expected: 0.043412
i=19, FFT: r0.042228, i0.000000 : Expected: 0.042253 
```

结果似乎几乎是正确的，但误差随着神经元数量的增加而增加。此外，对于非常低或非常高的位置 (i)，结果似乎更准确。这里发生了什么？

**更新**：正如 Oli Charlesworth 所建议的，我在 octave 中实现了算法，看看它是实现还是数学问题：

```
input = [0.186775; 0.186775; 0.186775; 0.186775; 0.186775; 0; 0.186775; 0.186775; 0.186775; 0.186775];

function ret = _w(i)
  ret = tanh(1 / (2* 1 * 32)) * exp(-abs(i) / (1 * 32));
end

for i = linspace(1, 10, 10)
  expected = 0;
  for j = linspace(1, 10, 10)
    expected += _w(i-j) * input(j);
  end
  expected
end

distances = _w(transpose(linspace(0, 9, 10)));

input_f = fft(input);
distances_f = fft(distances);

convolution_f = input_f .* distances_f;

convolution = ifft(convolution_f) 
```

结果：

```
expected =  0.022959
expected =  0.023506
expected =  0.023893
expected =  0.024121
expected =  0.024190
expected =  0.024100
expected =  0.024034
expected =  0.023808
expected =  0.023424
expected =  0.022880
convolution =

   0.022959
   0.023036
   0.023111
   0.023183
   0.023253
   0.022537
   0.022627
   0.022714
   0.022798
   0.022880 
```

结果非常相似。因此，我对卷积定理/FFT的理解一定有问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-24T15:44:42.600

要通过 FFT 对 2 个信号进行卷积，您通常需要执行以下操作：

1.  根据需要向每个信号添加尽可能多的零，使其长度成为原始信号的累积长度 - 1（这是卷积结果的长度）。
2.  如果您的 FFT 库要求输入长度为 2 的幂，请向每个信号添加尽可能多的零以满足该要求。
3.  计算信号 1 的 DFT（通过 FFT）。
4.  计算信号 2 的 DFT（通过 FFT）。
5.  将两个 DFT 按元素相乘。顺便说一句，它应该是一个复杂的乘法。
6.  计算相乘 DFT 的逆 DFT（通过 FFT）。这将是你的卷积结果。

在您的代码中，我`FFTW_FORWARD`在所有 3 个 FFT 中都看到了。我猜如果这不是问题，那是问题的一部分。最后的 FFT 应该是“向后”，而不是“向前”。

另外，我认为您在第二个表达式中需要“+”，而不是“-”：

```
convolution_f[i][0] = (distances_f[i][0] * sNMDAs_f[i][0]
            - distances_f[i][1] * sNMDAs_f[i][1]) * scale;

convolution_f[i][1] = (distances_f[i][0] * sNMDAs_f[i][1]
            - distances_f[i][1] * sNMDAs_f[i][0]) * scale; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T22:07:11.867

我终于解决了这个问题，非常感谢 Alex 和 Oli Charlesworth 的建议！

```
function ret = _w(i)
  ret = tanh(1 / (2* 1 * 32)) * exp(-abs(i) / (1 * 32));
end

_input = [0.186775; 0.186775; 0.186775; 0.186775; 0.186775; 0; 0.186775; 0.186775; 0.186775; 0.186775];
n = size(_input)(1);

input = _input;

for i = linspace(1, n, n)
  expected = 0;
  for j = linspace(1, n, n)
    expected += _w(i-j) * input(j);
  end
  expected
end

input = vertcat(_input, zeros((2*n)-n-1,1));

distances = _w(transpose(linspace(0, (2*n)-n-1, n)));
distances = vertcat(flipud(distances), distances(2:end));

input_f = fft(input);
distances_f = fft(distances);

convolution_f = input_f .* distances_f;

convolution = ifft(convolution_f)(n:end) 
```

结果：

```
expected =  0.022959
expected =  0.023506
expected =  0.023893
expected =  0.024121
expected =  0.024190
expected =  0.024100
expected =  0.024034
expected =  0.023808
expected =  0.023424
expected =  0.022880
convolution =

   0.022959
   0.023506
   0.023893
   0.024121
   0.024190
   0.024100
   0.024034
   0.023808
   0.023424
   0.022880 
```

我基本上忘了以正确的方式订购距离数组。如果有人有兴趣，我可以稍后提供更详细的解释。

**更新：（解释）**

这是我的距离向量（对于 5 个神经元）最初看起来很喜欢的样子：

```
i =  1       2       3       4       5

| _w(0) | _w(1) | _w(2) | _w(3) | _w(4) | 
```

在这个向量上，我应用了一个内核，例如：

```
|  0.1  |  0.1  |  0.0  |  0.2  |  0.3  | 
```

由于我使用的是循环卷积，因此第一个神经元 _w(0) 的结果是：

0.0 * _w(2) + 0.1 * _w(1) + 0.1 * _w(0) + 0.1 * _w(1) + 0.0 * _w(2)

但这是不正确的，结果应该是：

0.1 * _w(0) + 0.1 * _w(1) + 0.0 * _w(2) + 0.2 * _w(3) + 0.3 * _w(4)

为了实现这一点，我必须“镜像”我的距离向量并向内核添加一些填充：

```
input = vertcat(_input, zeros((2*n)-n-1,1));
distances = _w(transpose(linspace(0, (2*n)-n-1, n)));
distances = _w(transpose(linspace(0, (2*n)-n-1, n)));

i =  1       2        3       4       5       6       7       8       9

| _w(4) | _w(3)  | _w(2) | _w(1) | _w(0) | _w(1) | _w(2) | _w(3) | _w(4) |

|  0.1  |  0.1   |  0.0  |  0.2  |  0.3  |  0    |  0    |  0    |  0    | 
```

现在，如果我应用卷积，i = [5:9] 的结果正是我正在寻找的结果，所以我只需要丢弃 [1:4] 就完成了:)

```
convolution = ifft(convolution_f)(n:end) 
```

# .net - 无法让我的正则表达式匹配

> ID：11178081
> 
> 赞同：3
> 
> 时间：2012-06-24T14:01:46.013
> 
> 标签：.net, regex

在我看来，这应该匹配得很好。有人可以向我指出我做错了什么吗？

正则表达式：

```
^.* ATM DEPOSIT (?'Month'\d{2})-(?'Day'\d{2}) #(?'Reference'[0-9A-Za-z]) .*$ 
```

细绳：

```
BKOFAMERICA ATM DEPOSIT 07-05 #006475 CUSTOMER 2323 BANK OF AMERICA, SAVANNAH, GA 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T14:08:54.653

您缺少一个`+`.

你的表情。

```
^.* ATM DEPOSIT (?'Month'\d{2})-(?'Day'\d{2}) #(?'Reference'[0-9A-Za-z]) .*$ 
```

正确表达。

```
^.* ATM DEPOSIT (?'Month'\d{2})-(?'Day'\d{2}) #(?'Reference'[0-9A-Za-z]+) .*$ 
```

除此之外，由于您对日期之前和参考之后的任何内容都不感兴趣，因此无需匹配它。采用：

```
ATM DEPOSIT (?'Month'\d{2})-(?'Day'\d{2}) #(?'Reference'[0-9A-Za-z]+) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-24T14:08:51.283

您忘记了子匹配末尾的 +。它应该看起来像这样

```
(?'Reference'[0-9A-Za-z]+) 
```

# authenticode - 代码签名 --> 发布者：未知 - 有正确的链

> ID：11178087
> 
> 赞同：2
> 
> 时间：2012-06-24T14:02:46.230
> 
> 标签：authenticode, ca, signtool

解决了！

希望大家能帮忙！

首先关。我浏览了我在 SO 以及 MSDN 等上可以找到的所有文章。

我正在尝试签署一个 installshield exe。

我有一个 Godaddy 代码签名证书，并且完全没有问题签署证书。我确实有一个问题，无论我做什么，我都会在其他所有计算机上得到 Publisher Unknown。

请参阅下面的输出。

**底线：我在签署证书时没有遇到任何问题，但在 UAC 提示期间无法删除未知发布者错误（测试计算机可以访问互联网）**

另外：如果我在验证时省略 /kp 选项，我会得到：SignTool 错误：已处理证书链，但在信任提供者不信任的根证书中终止。

最终更新：如果我运行 verify /pa /v temp\setup.exe，我会在验证中获得成功，但在未知发布时仍然会出错。/kp 选项在此标志上使用不正确。

步骤： %SIGNTOOL% 签名 /v /ac %BUILDROOT%%CERTPATH%%MSCERT% /f %BUILDROOT%%CERTPATH%%CERT% /p %CERTPW% /n "%COMPANY%" /t %TIMESTAMP% %BUILDROOT% %TEMPPATH%\setup.exe

输出：选择了以下证书：颁发给：%COMPANY NAME% 颁发者：Go Daddy Secure Certificate Authority - G2 过期：2013 年 6 月 22 日星期六 14:07:27 SHA1 哈希：612A38DDED199101442B09D884ED718BBE00D252

交叉证书链（使用机器存储）：颁发给：Microsoft 代码验证根颁发者：Microsoft 代码验证根过期：2025 年 11 月 1 日星期六 09:54:03 SHA1 哈希：8FBE4D070EF8AB1BCCAF2A9D5CCAE7282A2C66B3

```
 Issued to: Go Daddy Root Certificate Authority - G2
    Issued by: Microsoft Code Verification Root
    Expires:   Thu Apr 15 16:07:40 2021
    SHA1 hash: 842C5CB34B73BBC5ED8564BDEDA786967D7B42EF

        Issued to: Go Daddy Secure Certificate Authority - G2
        Issued by: Go Daddy Root Certificate Authority - G2
        Expires:   Sat May 03 03:00:00 2031
        SHA1 hash: 27AC9369FAF25207BB2627CEFACCBE4EF9C319B8

            Issued to: %COMPANY NAME%
            Issued by: Go Daddy Secure Certificate Authority - G2
            Expires:   Sat Jun 22 14:07:27 2013
            SHA1 hash: 612A38DDED199101442B09D884ED718BBE00D252 
```

完成添加其他存储已成功签名并加盖时间戳：c:\build\temp\setup.exe

成功签名的文件数：1 警告数：0 错误数：0

核实：

验证：c:\build\temp\setup.exe 文件哈希 (sha1)：62F814EFC81400AD938AB9D9D49B36F7175A098A

签名证书链：颁发给：Go Daddy 根证书颁发机构 - G2 颁发者：Go Daddy 根证书颁发机构 - G2 过期：2037 年 12 月 31 日星期四 19:59:59 SHA1 哈希：47BEABC922EAE80E78783462A79F45C254FDE68B

```
 Issued to: Go Daddy Secure Certificate Authority - G2
    Issued by: Go Daddy Root Certificate Authority - G2
    Expires:   Sat May 03 03:00:00 2031
    SHA1 hash: 27AC9369FAF25207BB2627CEFACCBE4EF9C319B8

        Issued to: %COMPANY NAME%
        Issued by: Go Daddy Secure Certificate Authority - G2
        Expires:   Sat Jun 22 14:07:27 2013
        SHA1 hash: 612A38DDED199101442B09D884ED718BBE00D252 
```

签名的时间戳：Sun Jun 24 09:57:57 2012 Timestamp Verified by: Issued to: Thawte Timestamping CA Issued by: Thawte Timestamping CA Expires: Thu Dec 31 19:59:59 2020 SHA1 hash: BE36A4562FB2EE05DBB3D32323ADF445084ED656

```
 Issued to: VeriSign Time Stamping Services CA
    Issued by: Thawte Timestamping CA
    Expires:   Tue Dec 03 19:59:59 2013
    SHA1 hash: F46AC0C6EFBB8C6A14F55F09E2D37DF4C0DE012D

        Issued to: Symantec Time Stamping Services Signer - G3
        Issued by: VeriSign Time Stamping Services CA
        Expires:   Mon Dec 31 19:59:59 2012
        SHA1 hash: 8FD99D63FB3AFBD534A4F6E31DACD27F59504021 
```

交叉证书链：颁发给：Microsoft 代码验证根颁发者：Microsoft 代码验证根过期：2025 年 11 月 1 日星期六 09:54:03 SHA1 哈希：8FBE4D070EF8AB1BCCAF2A9D5CCAE7282A2C66B3

```
 Issued to: Go Daddy Root Certificate Authority - G2
    Issued by: Microsoft Code Verification Root
    Expires:   Thu Apr 15 16:07:40 2021
    SHA1 hash: 842C5CB34B73BBC5ED8564BDEDA786967D7B42EF

        Issued to: Go Daddy Secure Certificate Authority - G2
        Issued by: Go Daddy Root Certificate Authority - G2
        Expires:   Sat May 03 03:00:00 2031
        SHA1 hash: 27AC9369FAF25207BB2627CEFACCBE4EF9C319B8

            Issued to: %COMPANY NAME%
            Issued by: Go Daddy Secure Certificate Authority - G2
            Expires:   Sat Jun 22 14:07:27 2013
            SHA1 hash: 612A38DDED199101442B09D884ED718BBE00D252 
```

成功验证：c:\build\temp\setup.exe

成功验证的文件数：1 警告数：0 错误数：0

解决了！

问题是 exe 安装程序中的 MSI。setup.exe 文件已签名，但是当提取并运行内部的 msi 时，该文件未签名。两个都签了，错误就消失了！！！

# database - 图数据库的实现

> ID：11178092
> 
> 赞同：4
> 
> 时间：2012-06-24T14:03:26.057
> 
> 标签：database, graph

我无法可视化图形数据库。可视化 RDBMS 真的非常简单，当我大约 4 到 5 年前开始学习它时，我能够从第一个教程本身理解。但我无法理解图形数据库。

我也无法获得有关此主题的任何良好链接，因此在此处发布此问题。

具体来说，我正在寻找以下内容：

1.  一些非常简单的关于 Graph Dbs 的书/链接
2.  至少对 Graph DB 的实现细节有一些了解（我希望所有的 Graph DB 至少有一些共同的基本东西）。

非常感谢各位，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T15:13:45.187

[Protoge](http://protege.stanford.edu/)是您开始理解本体的最佳选择。

[IsaVis](http://www.w3.org/2001/11/IsaViz/)是一个非常常用的可视化数据库的工具。

[Jena](http://jena.apache.org/)和[Sesame](http://www.openrdf.org/)是实现的最佳选择（都在 java 中），但对于 python 岩石和[rdflib](http://rdflib.readthedocs.org/en/latest/)的原型设计是必须使用的工具。

还有很多其他的，但这些是我建议的入门车辆。YMMV

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T15:05:37.550

Neo4j 为我解释了这个概念做得很好。从它开始进行测试也很容易做到。你可以从这里开始：

[http://neo4j.org/learn/](http://neo4j.org/learn/)

# html - 如何使我的字体渲染更流畅？

> ID：11178098
> 
> 赞同：0
> 
> 时间：2012-06-24T14:04:09.440
> 
> 标签：html, css

字体被清晰地渲染到一个错误，使得边缘都是锯齿状的。作为一个极简主义网站，我正在努力让一切变得完美。

我该如何解决？[http://individual.utoronto.ca/andrewlouis](http://individual.utoronto.ca/andrewlouis)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T14:13:27.417

字体渲染是特定于浏览器和特定于操作的。

您几乎无法控制字体的呈现方式，而且您在浏览器中看到的内容与其他用户在他们的浏览器中看到的不同。

[这篇文章](http://blog.typekit.com/2010/10/21/type-rendering-web-browsers/)现在有点老了，但它确实很好地解释了各种浏览器之间的差异以及它们如何呈现文本。

这是关于 Webdesign.stackoverflow 的一个问题，询问如何使字体在所有浏览器中呈现相同：[https ://webmasters.stackexchange.com/questions/9972/how-can-i-make-fonts-render-the-跨不同网络浏览器的相同方式](https://webmasters.stackexchange.com/questions/9972/how-can-i-make-fonts-render-the-same-way-across-different-web-browsers)

那里给出的答案可能会对您有所帮助，但基本答案是您无能为力。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T07:27:06.890

要在 Chrome 和 Safari 中获得更好/更流畅的文本，请尝试使用 CSS：

```
-webkit-font-smoothing: antialiased; 
```

然而，它似乎`-moz-font-smoothing`曾经可以使用，但不再可用。无论如何，Firefox 中的字体确实更流畅。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T15:19:50.410

尝试：

`font-smooth`css 属性。请参阅文档：[http](http://webdesign.about.com/od/styleproperties/p/blspfontsmooth.htm) ://webdesign.about.com/od/styleproperties/p/blspfontsmooth.htm 也在这里：[http ://www.cssportal.com/css-properties/font-smooth.htm](http://www.cssportal.com/css-properties/font-smooth.htm)

请参阅字体渲染差异：Firefox vs. IE vs. Safari [http://css-tricks.com/font-rendering-differences-firefox-vs-ie-vs-safari/](http://css-tricks.com/font-rendering-differences-firefox-vs-ie-vs-safari/)

# ranking - 如何消除权重的重复排列？

> ID：11178099
> 
> 赞同：0
> 
> 时间：2012-06-23T11:43:44.093
> 
> 标签：ranking, permutation

我正在创建一个计算机模拟来对排名向量进行逆向工程。例如，假设我有 3 个要测量的变量，并希望对它们应用一个权重向量，其值为 1-5。然后我将权重应用于变量向量，创建一个评级向量。然后将其转换为排名向量，并查看哪个排列最接近标准。我怎样才能消除像加权向量这样的重复项：

(1,1,1) 产生与 (5,5,5) 相同的排名向量

(2,1,1) 产生与 (4,2,2) 相同的排名向量

等等

我的实际模拟有更多的变量/权重，消除重复确实有助于节省处理能力。

# asp.net - 将邮件发送到asp.net中的2个邮件ID？

> ID：11178107
> 
> 赞同：0
> 
> 时间：2012-06-24T14:05:05.657
> 
> 标签：asp.net, system.net.mail

我有一个用户注册表。如果新用户在该帐户中注册其帐户。我需要向我的公司邮件 ID 和客户端邮件 ID 发送新用户已注册的消息。现在我为一个邮件 ID 做这件事。我怎样才能为 2 个邮件 ID 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T14:19:21.383

请参阅[http://msdn.microsoft.com/en-us/library/system.net.mail.mailmessage.aspx](http://msdn.microsoft.com/en-us/library/system.net.mail.mailmessage.aspx)

```
System.Net.Mail.MailMessage mail = new MailMessage();

mail.To.Add("first address");
mail.To.Add("second address");
```

# wcf - 在 IIS 上托管 WCF 服务（找不到资源）

> ID：11178111
> 
> 赞同：3
> 
> 时间：2012-06-24T14:06:08.303
> 
> 标签：wcf, iis-7

我正在制作 WFC 服务。当我从 Visual Studio 调试它时一切正常，但是当我在真正的 IIS 上部署它时遇到了问题。

部署后我仍然可以获得 WSDL，但是当我请求 WebGet 方法（返回一个简单的 XML 文档）方法时，我收到以下错误：

```
The resource cannot be found.

Description: HTTP 404\. The resource you are looking for (or one of its dependencies) could have been removed, had its name changed, or is temporarily unavailable.  Please review the following URL and make sure that it is spelled correctly. 
```

什么可能是问题的原因？

我的网络配置：

```
<system.serviceModel>
<services>
  <service name="XXXX.TSDX.UI.TsdxService">
    <endpoint 
        address="Tsdx" 
        binding="webHttpBinding" 
        bindingConfiguration="TestBinding" 
        behaviorConfiguration="RESTFriendly" 
        contract="XXXX.TSDX.UI.ITsdxService" />
  </service>
</services>
<bindings>
  <webHttpBinding>
    <binding name="TestBinding" />
  </webHttpBinding>
</bindings>
<behaviors>
  <serviceBehaviors>
    <behavior name="">
      <serviceMetadata httpGetEnabled="true" />
      <serviceDebug includeExceptionDetailInFaults="false" />
    </behavior>
  </serviceBehaviors>
  <endpointBehaviors>
    <behavior name="RESTFriendly">
      <webHttp />
    </behavior>
  </endpointBehaviors>
</behaviors>
<serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
</system.serviceModel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-20T21:27:14.397

如果您在 MVC 应用程序中托管此服务，请确保添加以下行以忽略控制器路由冲突，我在挣扎了一段时间后遇到了这个问题，我发现这个答案已经解决了这个问题。

routes.IgnoreRoute("{ *allsvc}", new { allsvc = @"..svc* (/.*)?" });

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T14:26:03.730

验证在 ASP.NET 选项卡（在 IIS 中）中为您的应用程序选择了正确版本的 .NET 框架

# playframework-2.0 - 通过多对多关系获取对象

> ID：11178112
> 
> 赞同：1
> 
> 时间：2012-06-24T14:06:09.580
> 
> 标签：playframework-2.0, ebean

我正在尝试通过标记列表过滤文档，这些标记都存储在具有多对多关系的数据库中。

模型看起来像：

```
public Document extends Model {
     ....
     @ManyToMany
     public List<Tag> tagList;

     public static findDocumentsByTags(List<Tag> tags)
     {
     // Here i need help.....
     }
} 
```

我如何从数据库中获取文档列表？saveManyToManyAssociations 正确保存了所需的数据，并且数据库看起来很好。只需要ebean的功能

感谢您的支持

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-30T07:18:05.227

我会说您需要实体注释，如果需要，还需要表名：

```
@Entity
@Table(name="table_name_of_documents")
public Document extends Model { 
```

# javascript - 显示来自用户的最新推文（最近 20 条左右）

> ID：11178113
> 
> 赞同：0
> 
> 时间：2012-06-24T14:06:32.803
> 
> 标签：javascript, twitter, tweets

[我在http://www.urbanvision.org.uk/](http://www.urbanvision.org.uk/)有一个网站，我们在右侧有一个 Twitter 提要。大多数网站都提供此 twitter 提要。

我们遇到了一个问题，当我们在过去三天左右没有发推文时，没有显示任何推文。虽然我们计划发布越来越多的推文，但有一种方法可以改变下面的代码，只显示最后 20 条左右的推文。

我知道 Twitter 有它自己的限制，但如果我真的很诚实，我会觉得这一切都太混乱了，难以理解。

**当前的 JS 代码：**

```
var tweetUsers = ['urbanvision_uk'];
var buildString = "";

    $(document).ready(function(){

        $('#twitter-ticker').slideDown('slow');

        for(var i=0;i<tweetUsers.length;i++)
        {
            if(i!=0) buildString+='+OR+';
            buildString+='from:'+tweetUsers[i];
        }

        var fileref = document.createElement('script');

        fileref.setAttribute("type","text/javascript");
        fileref.setAttribute("src", "http://search.twitter.com/search.json?q="+buildString+"&callback=TweetTick&rpp=50");

        document.getElementsByTagName("head")[0].appendChild(fileref);

    });

    function TweetTick(ob)
    {
        var container=$('#tweet-container');
        container.html('');

        $(ob.results).each(function(el){

            var str = ' <div class="tweet">\
                        <div class="avatar"><a href="http://twitter.com/'+this.from_user+'" target="_blank"><img src="'+this.profile_image_url+'" alt="'+this.from_user+'" /></a></div>\
                        <div class="user"><a href="http://twitter.com/'+this.from_user+'" target="_blank">'+this.from_user+'</a></div>\
                        <div class="time">'+relativeTime(this.created_at)+'</div>\
                        <div class="txt">'+formatTwitString(this.text)+'</div>\
                        </div>';

            container.append(str);

        });

        container.jScrollPane();
    }

    function formatTwitString(str)
    {
        str=' '+str;
        str = str.replace(/((ftp|https?):\/\/([-\w\.]+)+(:\d+)?(\/([\w/_\.]*(\?\S+)?)?)?)/gm,'<a href="$1" target="_blank">$1</a>');
        str = str.replace(/([^\w])\@([\w\-]+)/gm,'$1@<a href="http://twitter.com/$2" target="_blank">$2</a>');
        str = str.replace(/([^\w])\#([\w\-]+)/gm,'$1<a href="http://twitter.com/search?q=%23$2" target="_blank">#$2</a>');
        return str;
    }

    function relativeTime(pastTime)
    {   
        var origStamp = Date.parse(pastTime);
        var curDate = new Date();
        var currentStamp = curDate.getTime();

        var difference = parseInt((currentStamp - origStamp)/1000);

        if(difference < 0) return false;

        if(difference <= 5)             return "Just now";
        if(difference <= 20)            return "Seconds ago";
        if(difference <= 60)            return "A minute ago";
        if(difference < 3600)           return parseInt(difference/60)+" minutes ago";
        if(difference <= 1.5*3600)      return "One hour ago";
        if(difference < 23.5*3600)      return Math.round(difference/3600)+" hours ago";
        if(difference < 1.5*24*3600)    return "One day ago";
        if(difference < 1.5*48*3600)    return "Two days ago";
        if(difference < 1.5*720*3600)   return "Over a month ago";

        var dateArr = pastTime.split(' ');
        return dateArr[4].replace(/\:\d+$/,'')+' '+dateArr[2]+' '+dateArr[1]+(dateArr[3]!=curDate.getFullYear()?' '+dateArr[3]:'');
    } 
```

如果我们也能引入转发和提及，那也很酷。

与往常一样，我们将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T14:21:54.260

为了方便起见，我建议使用官方 twitter-widget 并对其进行自定义。这是一篇描述该问题的好文章：[http ://www.1stwebdesigner.com/css/customize-twitter-search-widgets/](http://www.1stwebdesigner.com/css/customize-twitter-search-widgets/)

# spring - 将全局变量传递给 Spring + Apache Tiles

> ID：11178117
> 
> 赞同：2
> 
> 时间：2012-06-24T14:07:03.370
> 
> 标签：spring, spring-mvc, tiles, tiles2, apache-tiles

我目前正在运行一个有效的 Spring + Apache Tiles webapp。我需要展示一些示例代码来解释我的意图。

阿帕奇瓷砖配置：

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE tiles-definitions PUBLIC
    "-//Apache Software Foundation//DTD Tiles Configuration 2.1//EN"
    "http://tiles.apache.org/dtds/tiles-config_2_1.dtd">

<tiles-definitions>

    <definition name="baseLayout" template="/WEB-INF/layouts/www_base.jsp" />

    <definition name="home" extends="baseLayout">
        <put-attribute name="body" value="/WEB-INF/views/home.jsp" />
    </definition>

</tiles-definitions> 
```

示例控制器：

```
@Controller
public class ExampleController {
    @RequestMapping("/index.html")
    public String index(Map<String, Object> map) {
        map.put("hello", "world");
        return "home";
    }
} 
```

这将显示`www_base.jsp`为`home.jsp`as `body`。我可以使用变量`${hello}`in`www_base.jsp`和 in `home.jsp`。

但我不想`hello`在每个 Controller 方法中设置能够`www_base.jsp`在每个页面上使用它。

有没有办法为 设置全局变量`www_base.jsp`，例如在 的构造函数中`ExampleController`？

**使用地图**更新示例代码****

 **```
@Controller
@RequestMapping("/")
public class BlogController {
    @ModelAttribute
    public void addGlobalAttr( Map<String, Object> map ) {
        map.put("fooone", "foo1");
    }

    @RequestMapping("/index.html")
    public String posts(Map<String, Object> map) {
        map.put("foothree", "foo3");
        return "posts";
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T18:15:06.960

使用[带有 @ModelAttribute 注释的方法](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/htmlsingle/spring-framework-reference.html#mvc-ann-modelattrib-methods)：

> 方法上的 @ModelAttribute 表示该方法的目的是添加一个或多个模型属性。此类方法支持与 @RequestMapping 方法相同的参数类型，但不能直接映射到请求。相反，控制器中的 @ModelAttribute 方法在同一控制器中的 @RequestMapping 方法之前被调用。
> 
> @ModelAttribute 方法用于使用常用属性填充模型，例如用状态或宠物类型填充下拉列表，或者检索像 Account 这样的命令对象，以便使用它来表示 HTML 表单上的数据。**

# html - 为什么页面分成两部分？

> ID：11178119
> 
> 赞同：-1
> 
> 时间：2012-06-24T14:07:19.650
> 
> 标签：html, css

我只是在组合来自其他模板的 css 文件，但我可以弄清楚为什么我会在页面中拆分。请看这里，可能需要扩大它才能看到问题。

[http://jsfiddle.net/8xz8m/](http://jsfiddle.net/8xz8m/)

很难描述，但是当我重新调整浏览器的大小时，我得到了一种非常奇怪的效果。就像两扇窗户分开。有没有人可以提供任何指导来解决问题？

[截屏：
![](../Images/8fdeec298f4676eda579d9e0546d0dc6.png)](https://i.stack.imgur.com/2onor.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T14:25:33.603

`overflow:hidden`是罪魁祸首。删除它，一切都“神奇地”再次出现。

# backbone.js - BackboneJS Flash 消息

> ID：11178120
> 
> 赞同：8
> 
> 时间：2012-06-24T14:07:37.787
> 
> 标签：backbone.js

Flash 消息的主干是否有扩展？这似乎是 Web 框架中的一个常见功能（至少是服务器端）。似乎没有，我尝试自己制作：

```
class FlashMessenger extends Backbone.Model 

    constructor: ->
        @messages = []

    # add a message to the messages array
    add: (type, message) ->
        @messages.push 
            type: type
            message: message

    # returns all existing messages and clearing all messages
    getMessages: ->
        ret = @messages.slice(0)
        @messages = []
        return ret 
```

现在，我想知道如何将它们自动注入到我的视图中。我希望在使用时显示我的消息，`Backbone.Router.navigate()`例如：

```
app.flashMessages.add("success", "Successfully logged in")
appRouter.navigate("dashboard")
# flash messages should show when I render the view 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-25T18:28:33.420

我的 5 美分 - 使用 Backbone 发送消息似乎有点过头了。如果页面上只有 1 个 flash 消息实例，最好不要为其使用单独的模型。

相反，我会使用 Flash 消息的视图和全局调度程序：

```
Dispatcher = _.extend({}, Backbone.Events); 
```

创建视图：

```
var FlashMessage = Backbone.View.extend({
    initialize: function() {
       Dispatcher.bind('show_flash_message', this.render);
    },

    render: function(msg) {
       // do something with the message
    }
}); 
```

从应用程序中您必须显示 Flash 消息的部分，执行

```
Dispatcher.trigger('show_flash_message', 'Some message'); 
```

# javascript - 为什么我不能使用 jQuery 在单击时隐藏元素？

> ID：11178121
> 
> 赞同：2
> 
> 时间：2012-06-24T14:07:43.940
> 
> 标签：javascript, jquery, event-propagation

我想让一个 div 用 jquery 和 css 显示和消失。代码不起作用：

***HTML***

```
<html>
    <head>

    </head>
    <body>
        <div class="box" id="b1">
            <a href="#">click to show content</a>

            <div class="content">
                here is content here is content here is content
                <div class="button" id="b2">remove content</div>
            </div
    </body>
</html> 
```

***jQuery***

```
$(document).ready(function() {
    $('#b1').click(function() {

        $('.content').css({
            "display": "block"
        });
    });

    $('#b2').click(function() {

        $('.content').css({
            "display": "none"
        });
    });
}); 
```

**演示：http:** [//jsfiddle.net/jTgRF/41/](http://jsfiddle.net/jTgRF/41/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T14:19:01.350

问题是您没有阻止事件传播。

当您单击按钮时，它实际上首先隐藏了元素，但事件传播到父元素，您在该元素处捕获单击并再次显示它。它运行得如此之快，看起来好像什么都没有发生，但实际上，当您单击 时`#b2`，元素会被隐藏，然后事件会冒泡到 parent `#b1`，您已将单击事件侦听器附加到其上以显示内容。

因此，您需要使用[`.stopPropagation()`](http://api.jquery.com/event.stopPropagation/)on `#b2`。

```
$(document).ready(function(){
     $('#b1').click(function(){
           $('.content').show();
    });

    $('#b2').on("click", function(e){ 
           $('.content').hide();
            e.stopPropagation();
    });
}); 
```

您需要做的是将点击事件传递给回调函数（`e`在我的示例中声明），然后调用`stopPropagation()`它以确保它不会冒泡到父元素。

这是一个工作示例：http: [//jsfiddle.net/jTgRF/64/](http://jsfiddle.net/jTgRF/64/)

**请注意**，我使用`.show()`and `.hide()`，这与您使用的完全相同`.css()`，但在我看来更具可读性。

**编辑：**

正如 Venu 在他的回答中指出的那样，如果您点击黑色区域，内容也会显示，而不仅仅是“显示内容”文本。解决这个问题的最简单方法是从`div`with 类内容中移动 id="b1" 属性并将其放在`a`-element 上。

查看我更新的小提琴：http: [//jsfiddle.net/jTgRF/65/](http://jsfiddle.net/jTgRF/65/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T14:11:40.403

因为，您正在为 dom 中不可用的元素附加事件，所以事件不会附加到元素。使用[现场](http://api.jquery.com/live/)

```
$('#b2').live('click', function(){

               $('.content').css({"display":"none"});
        }); 
```

为现在和将来匹配当前选择器的所有元素附加一个事件处理程序。

**编辑**
1）使用 on 而不是 live 因为 Live 已被弃用。

2）您的CSS还有一个问题。您已将框类的高度设置为 150 像素。所以如果你也点击黑色区域，事件就会被触发。

因此，将 b2 元素移到 b1 之外，这也将解决事件传播到父元素的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T14:19:04.457

您需要将按钮单击处理程序更改为

```
$('#b2').click(function(e){
           e.stopPropagation();
           $('.content').css({"display":"none"});
    }); 
```

您需要添加[event.stopPropagation()](http://api.jquery.com/event.stopPropagation/)或者单击事件将传播到父级`div`并`.content`立即再次隐藏。

**演示：http:** [//jsfiddle.net/joycse06/jTgRF/56/](http://jsfiddle.net/joycse06/jTgRF/56/)

您应该使用 jQuery[`.show()`](http://api.jquery.com/show/)并[`.hide()`](http://api.jquery.com/show/)显示/隐藏元素。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-24T14:20:30.800

Venu 的 anwser 有效，但 live() 已弃用。

您应该使用 on() 代替：

[未来元素的 jQuery .on 函数，因为 .live 已被弃用](https://stackoverflow.com/questions/8191064/jquery-on-function-for-future-elements-as-live-is-deprecated)

**代码**

```
$(document).ready(function(){
    $('#b1').click(function(){
        $('.content').css({"display":"block"});
    });

    $(document).on('click', '#b2', function(){
        $('.content').css({"display":"none"});
    });
}); 
```

希望这可以帮助

# c# - 动态加载项目时组合框自动完成功能的问题

> ID：11178126
> 
> 赞同：1
> 
> 时间：2012-06-24T14:08:07.713
> 
> 标签：c#, .net, winforms, autocomplete, combobox

我正在设置一个 ComboBox 以使用 AutoComplete 功能，其中 AutoCompleteMode = Append 和 AutoCompleteSource = ListItems。当我加载表单时，ComboBox 的项目列表为空，然后我继续在指定事件（按下特定按钮时）从 ComboBox.Text 添加新值。

底线是，当 ComboBox 的 Items 属性从事件动态填充时，AutoCompletion 不会按预期工作。我第一次进入 ComboBox.Items，总是正确完成，但后面的没有。如果我单击箭头下拉列表，那么到目前为止所有项目都正确输入了自动完成功能。如果我 Alt-Tab 进入另一个应用程序并返回组合框，那么到目前为止输入的所有项目都会正确自动完成。

在我看来，组合框内部会根据某些事件重新加载其自动完成列表，但到目前为止我已经尝试调用

```
ResumeLayout(true); 
Refresh(); 
Invalidate(true); 
Update(); 
DroppedDown = true; 
DroppedDown = false; 
```

但无济于事

有人可以告诉我如何在 ComboBox.Items 列表中动态添加条目，并且仍然可以使用 ComboBox.AutoCompleteSource = ListItems 自动完成正常工作。

btnExecute 是包含组合框的表单上的默认按钮。因此，在组合框上按 enter 时调用以下函数

```
private void btnExecute_Click( object sender, EventArgs e ) {
    cboCommand.SuspendLayout();
    cboCommand.Items.Add(cboCommand.Text);
    cboCommand.Text = "";
    // Make some call here, so combobox reloads its cache for autocompletion
} 
```

自动生成的 winforms 代码中的相关部分

```
this.cboCommand.AutoCompleteMode = System.Windows.Forms.AutoCompleteMode.Append;
this.cboCommand.AutoCompleteSource = System.Windows.Forms.AutoCompleteSource.ListItems;
this.cboCommand.FormattingEnabled = true; 
```

我在 Windows Vista 上使用 .NET4 客户端配置文件。也许它在这里发挥了作用

任何人？

# perl - Perl Xpath：在日期年份之前搜索项目

> ID：11178127
> 
> 赞同：7
> 
> 时间：2012-06-24T14:08:09.977
> 
> 标签：perl, date, xpath

我有一个包含电影的 xml 数据库，例如：

```
<film id="5">
        <title>The Avengers</title>
        <date>2012-09-24</date>
        <family>Comics</family>
</film> 
```

从 Perl 脚本中，我想按日期查找电影。如果我搜索确切年份的电影，例如：

```
my $query = "//collection/film[date = 2012]"; 
```

它可以正常工作并返回 2012 年的所有电影，但是如果我搜索一年前的所有电影，它就不起作用，例如：

```
my $query = "//collection/film[date < 2012]"; 
```

它返回所有电影..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T14:43:07.783

好吧，像往常一样，有不止一种方法可以做到这一点。) 要么让 XPath 工具知道它应该将日期（从一开始就不知道）与以下内容进行比较：

```
my $query = '//collection/film[xs:date(./date) < xs:date("2012-01-01")]'; 
```

...或者你只是硬着头皮比较'yyyy'子串：

```
my $query = '//collection/film[substring(date, 1, 4) < "2012"]'; 
```

我想前者在语义上更好，但需要一个支持 XPath 2.0 的高级 XML 解析器工具。后者通过 XML::XPath 成功验证。

**更新：**我想解释一下为什么您的第一个查询有效。）看，你不在那里比较日期 - 你比较数字，但只是因为'='运算符。[从文档中](http://www.w3.org/TR/xpath/#booleans)引用：

> 当要比较的对象都不是节点集并且运算符是 = 或 != 时，通过将对象转换为如下的通用类型然后进行比较来比较对象。如果至少一个要比较的对象是布尔值，则每个要比较的对象都被转换为布尔值，就好像通过应用布尔函数一样。否则，如果至少一个要比较的对象是一个数字，则每个要比较的对象都被转换为一个数字，就好像通过应用 number 函数一样。

看？您的 '2012-09-24' 被转换为数字 - 并成为 2012。当然，它等于 2012。）

但是，这不适用于任何其他比较运算符：这就是您需要使用子字符串或将日期字符串转换为数字的原因。我认为第一种方法更具可读性——也许也更快。)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T14:54:06.110

使用这个 XPath，检查年份

```
//collection/film[substring-before(date, '-') &lt; '2012'] 
```

您的 Perl 脚本将是，

```
my $query = "//collection/film[substring-before(date, '-') &lt; '2012']"; 
```

或者

```
my $query = "//collection/film[substring-before(date, '-') = '2012']"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T15:17:08.190

**只需使用**：

```
//collection/film[translate(date, '-', '') < 20120101] 
```

这会从日期中删除破折号，然后将其比较为小于 2012-01-01（删除破折号）。

**以同样的方式，您可以获得日期早于给定日期**（不仅是年份）的所有电影：

```
//collection/film[translate(date, '-', '') < translate($theDate, '-', ''] 
```

# c++ - 如何在 WMI 中获取 Win32_SecurityDescriptor 的实例？

> ID：11178128
> 
> 赞同：0
> 
> 时间：2012-06-24T14:08:21.827
> 
> 标签：c++, winapi, com, wmi, access-violation

我正在编写一个包含 WMI 内容的 C++ WMI 实用程序类，以帮助我进一步进行 WMI 查询。我在访问 Win32_SecurityDescriptor 实例时遇到了问题。

我使用 WQL 查询“Select * from Win32_LogicalShareSecuritySetting”来获取所有 Win32_LogicalShareSecuritySetting 实例。然后调用 Win32_LogicalShareSecuritySetting 实例的 GetSecurityDescriptor 方法得到一个 Win32_SecurityDescriptor 实例。但是当我试图从 Win32_SecurityDescriptor 实例中检索一些属性，如“__PATH”时，我得到了一个 0xC0000005 访问冲突消息框。

我用 C++ 编写了我的代码，但我认为这个问题应该很常见。我还使用 Microsoft 的 wbemtest 工具进行测试，但没有找到显示 Win32_SecurityDescriptor 实例的方法。为什么 Win32_SecurityDescriptor 如此特别？

这是我所有的代码，你可以在你的 VC 中尝试，我的是 6。可能需要 Windows SDK。在调用方代码中发现访问冲突：CString strSDInstancePath = wmiSearcher->getStringFromObject(pSDInstance, "__PATH");

ADWMISearch.cpp

```
#include "StdAfx.h"
#include "ADWMISearch.h"

#include <comdef.h>
# pragma comment(lib, "wbemuuid.lib")
# pragma comment(lib, "credui.lib")
# pragma comment(lib, "comsupp.lib")
#include <wincred.h>
#include <strsafe.h>
#include <iostream>
using namespace std;

DWORD ADWMISearch::WIN32_FROM_HRESULT_alternate(HRESULT hr)
{
    DWORD dwResult;
    if (hr < 0)
    {
        dwResult = (DWORD) hr;
        return dwResult;
    }
    else
    {
        MyMessageBox_Error(_T("WIN32_FROM_HRESULT_alternate Error."), _T("Error"));
        return -1;
    }
}

IWbemServices* ADWMISearch::connect(CString strServerName, CString strServerIP, CString strDomainName, CString strUsername,
                         CString strPassword)
{
    CString strComputerName = strServerName;
    CString strFullUsername; //_T("adtest\\Administrator")
    if (strDomainName == _T(""))
    {
        strUsername = _T("");
        strFullUsername = _T("");
        strPassword = _T("");
    }
    else
    {
        strFullUsername = strDomainName + _T("\\") + strUsername;
    }

    HRESULT hres;

    // Step 1: --------------------------------------------------
    // Initialize COM. ------------------------------------------

    hres =  CoInitializeEx(0, COINIT_MULTITHREADED); 
    if (FAILED(hres))
    {
        //cout << "Failed to initialize COM library. Error code = 0x" 
        //    << hex << hres << endl;
        MyMessageBox_Error(_T("connect"));
        return NULL;                  // Program has failed.
    }

    // Step 2: --------------------------------------------------
    // Set general COM security levels --------------------------

    hres =  CoInitializeSecurity(
        NULL, 
        -1,                          // COM authentication
        NULL,                        // Authentication services
        NULL,                        // Reserved
        RPC_C_AUTHN_LEVEL_DEFAULT,   // Default authentication 
        RPC_C_IMP_LEVEL_IDENTIFY,    // Default Impersonation  
        NULL,                        // Authentication info
        EOAC_NONE,                   // Additional capabilities 
        NULL                         // Reserved
        );

    //char aaa[100];
    //sprintf(aaa, "%x", hres);

    if (FAILED(hres) && hres != RPC_E_TOO_LATE)
        {
            //cout << "Failed to initialize security. Error code = 0x" 
            //    << hex << hres << endl;
            CoUninitialize();
            MyMessageBox_Error(_T("connect"));
            return NULL;                    // Program has failed.
        }

    // Step 3: ---------------------------------------------------
    // Obtain the initial locator to WMI -------------------------

    IWbemLocator *pLoc = NULL;

    hres = CoCreateInstance(
        CLSID_WbemLocator,             
        0, 
        CLSCTX_INPROC_SERVER, 
        IID_IWbemLocator, (LPVOID *) &pLoc);

    if (FAILED(hres))
    {
        CoUninitialize();
        MyMessageBox_Error(_T("connect"));
        return NULL;                 // Program has failed.
    }

    // Step 4: -----------------------------------------------------
    // Connect to WMI through the IWbemLocator::ConnectServer method

    IWbemServices *pSvc = NULL;

    bool useToken = TRUE;
    bool useNTLM = FALSE;
    // Get the user name and password for the remote computer
    /*
    CREDUI_INFO cui;
    bool useToken = TRUE;
    bool useNTLM = FALSE;
    TCHAR pszName[CREDUI_MAX_USERNAME_LENGTH+1] = {0};
    TCHAR pszPwd[CREDUI_MAX_PASSWORD_LENGTH+1] = {0};
    TCHAR pszDomain[CREDUI_MAX_USERNAME_LENGTH+1];
    TCHAR pszUserName[CREDUI_MAX_USERNAME_LENGTH+1];
    TCHAR pszAuthority[CREDUI_MAX_USERNAME_LENGTH+1];
    BOOL fSave;
    DWORD dwErr;

    memset(&cui,0,sizeof(CREDUI_INFO));
    cui.cbSize = sizeof(CREDUI_INFO);
    cui.hwndParent = NULL;
    // Ensure that MessageText and CaptionText identify
    // what credentials to use and which application requires them.
    cui.pszMessageText = _T("Press cancel to use process token");
    cui.pszCaptionText = _T("Enter Account Information");
    cui.hbmBanner = NULL;
    fSave = FALSE;

    dwErr = CredUIPromptForCredentials( 
        &cui,                             // CREDUI_INFO structure
        _T(""),                         // Target for credentials
        NULL,                             // Reserved
        0,                                // Reason
        pszName,                          // User name
        CREDUI_MAX_USERNAME_LENGTH+1,     // Max number for user name
        pszPwd,                           // Password
        CREDUI_MAX_PASSWORD_LENGTH+1,     // Max number for password
        &fSave,                           // State of save check box
        CREDUI_FLAGS_GENERIC_CREDENTIALS |// flags
        CREDUI_FLAGS_ALWAYS_SHOW_UI |
        CREDUI_FLAGS_DO_NOT_PERSIST);  

    if(dwErr == ERROR_CANCELLED)
    {
        useToken = true;
    }
    else if (dwErr)
    {
        cout << "Did not get credentials " << dwErr << endl;
        pLoc->Release();     
        CoUninitialize();
        return 1;      
    }
    */

    // change the computerName strings below to the full computer name
    // of the remote computer
    CString strAuthority;
    if(!useNTLM)
    {
        //StringCchPrintf(pszAuthority, CREDUI_MAX_USERNAME_LENGTH+1, _T("kERBEROS:%s"), strComputerName);
        strAuthority = _T("kERBEROS:") + strComputerName;

    }

    // Connect to the remote root\cimv2 namespace
    // and obtain pointer pSvc to make IWbemServices calls.
    //---------------------------------------------------------
    CString strNetworkResource = _T("\\\\") + strComputerName + _T("\\root\\cimv2");
    if (strFullUsername == _T(""))
    {
        hres = pLoc->ConnectServer(
            _bstr_t(strNetworkResource),
            NULL,                                   // User name
            NULL,                                   // User password
            NULL,                                   // Locale             
            WBEM_FLAG_CONNECT_USE_MAX_WAIT,         // Security flags
            _bstr_t(strAuthority),                  // Authority        
            NULL,                                   // Context object 
            &pSvc                                   // IWbemServices proxy
            );
    }
    else
    {
        hres = pLoc->ConnectServer(
            _bstr_t(strNetworkResource),
            _bstr_t(strFullUsername),                   // User name
            _bstr_t(strPassword),                   // User password
            NULL,                                   // Locale             
            WBEM_FLAG_CONNECT_USE_MAX_WAIT,         // Security flags
            _bstr_t(strAuthority),                  // Authority        
            NULL,                                   // Context object 
            &pSvc                                   // IWbemServices proxy
            );
    }

    if (FAILED(hres))
    {
        DWORD aaa = WIN32_FROM_HRESULT_alternate(hres);
        //cout << "Could not connect. Error code = 0x" 
        //     << hex << hres << endl;

        pLoc->Release();
        CoUninitialize();
        MyMessageBox_Error(_T("connect"));
        return NULL;                // Program has failed.
    }

    //cout << "Connected to ROOT\\CIMV2 WMI namespace" << endl;

    // step 5: --------------------------------------------------
    // Create COAUTHIDENTITY that can be used for setting security on proxy

    COAUTHIDENTITY *userAcct = NULL;
    COAUTHIDENTITY authIdent;

    if(!useToken)
    {
        memset(&authIdent, 0, sizeof(COAUTHIDENTITY));
        authIdent.PasswordLength = strPassword.GetLength();
        authIdent.Password = (USHORT*) _bstr_t(strPassword);

        authIdent.Domain = (USHORT*) _bstr_t(strDomainName);
        authIdent.DomainLength = strDomainName.GetLength();
        authIdent.Flags = SEC_WINNT_AUTH_IDENTITY_UNICODE;

        userAcct = &authIdent;

    }

    // Step 6: --------------------------------------------------
    // Set security levels on a WMI connection ------------------

    hres = CoSetProxyBlanket(
       pSvc,                           // Indicates the proxy to set
       RPC_C_AUTHN_DEFAULT,            // RPC_C_AUTHN_xxx
       RPC_C_AUTHZ_DEFAULT,            // RPC_C_AUTHZ_xxx
       COLE_DEFAULT_PRINCIPAL,         // Server principal name 
       RPC_C_AUTHN_LEVEL_PKT_PRIVACY,  // RPC_C_AUTHN_LEVEL_xxx 
       RPC_C_IMP_LEVEL_IMPERSONATE,    // RPC_C_IMP_LEVEL_xxx
       userAcct,                       // client identity
       EOAC_NONE                       // proxy capabilities 
    );

    if (FAILED(hres))
    {
        //cout << "Could not set proxy blanket. Error code = 0x" 
        //    << hex << hres << endl;
        pSvc->Release();
        pLoc->Release();     
        CoUninitialize();
        MyMessageBox_Error(_T("connect"));
        return NULL;               // Program has failed.
    }

    // Cleanup
    // ========
    pLoc->Release();

    return pSvc;
}

vector<IWbemClassObject*> ADWMISearch::query(IWbemServices *pSvc, CString strDomainName, CString strPassword, CString strWQL)
{
    vector<IWbemClassObject*> npResultObjects;
    BOOL useToken = TRUE;
    // step 5: --------------------------------------------------
    // Create COAUTHIDENTITY that can be used for setting security on proxy

    COAUTHIDENTITY *userAcct = NULL;
    COAUTHIDENTITY authIdent;

    if(!useToken)
    {
        memset(&authIdent, 0, sizeof(COAUTHIDENTITY));
        authIdent.PasswordLength = strPassword.GetLength();
        authIdent.Password = (USHORT*) _bstr_t(strPassword);

        /*
        LPTSTR slash = _tcschr(pszName, _T('\\'));
        if( slash == NULL )
        {
            //cout << _T("Could not create Auth identity. No domain specified\n") ;
            pSvc->Release();
            pLoc->Release();     
            CoUninitialize();
            return 1;               // Program has failed.
        }

        StringCchCopy(pszUserName, CREDUI_MAX_USERNAME_LENGTH+1, slash+1);
        authIdent.User = (USHORT*)pszUserName;
        authIdent.UserLength = _tcslen(pszUserName);
        StringCchCopyN(pszDomain, CREDUI_MAX_USERNAME_LENGTH+1, pszName, slash - pszName);
        */

        authIdent.Domain = (USHORT*) _bstr_t(strDomainName);
        authIdent.DomainLength = strDomainName.GetLength();
        authIdent.Flags = SEC_WINNT_AUTH_IDENTITY_UNICODE;

        userAcct = &authIdent;

    }

    // Step 7: --------------------------------------------------
    // Use the IWbemServices pointer to make requests of WMI ----

    // For example, get the name of the operating system
    IEnumWbemClassObject* pEnumerator = NULL;
    HRESULT hResult;
    hResult = pSvc->ExecQuery(
        _bstr_t(_T("WQL")), 
        _bstr_t(strWQL), //_T("Select * from Win32_Share")
        WBEM_FLAG_FORWARD_ONLY | WBEM_FLAG_RETURN_IMMEDIATELY, 
        NULL,
        &pEnumerator);

    if (FAILED(hResult))
    {
        //cout << "Query for operating system name failed."
        //    << " Error code = 0x" 
        //    << hex << hres << endl;
        MyMessageBox_Error(_T("query"));
        return npResultObjects;               // Program has failed.
    }

    // Step 8: -------------------------------------------------
    // Secure the enumerator proxy
    hResult = CoSetProxyBlanket(
        pEnumerator,                    // Indicates the proxy to set
        RPC_C_AUTHN_DEFAULT,            // RPC_C_AUTHN_xxx
        RPC_C_AUTHZ_DEFAULT,            // RPC_C_AUTHZ_xxx
        COLE_DEFAULT_PRINCIPAL,         // Server principal name 
        RPC_C_AUTHN_LEVEL_PKT_PRIVACY,  // RPC_C_AUTHN_LEVEL_xxx 
        RPC_C_IMP_LEVEL_IMPERSONATE,    // RPC_C_IMP_LEVEL_xxx
        userAcct,                       // client identity
        EOAC_NONE                       // proxy capabilities 
        );

    if (FAILED(hResult))
    {
        //cout << "Could not set proxy blanket on enumerator. Error code = 0x" 
        //     << hex << hres << endl;
        pEnumerator->Release();
        MyMessageBox_Error(_T("query"));
        return npResultObjects;               // Program has failed.
    }

    // When you have finished using the credentials,
    // erase them from memory.

    // Step 9: -------------------------------------------------
    // Get the data from the query in step 7 -------------------

    IWbemClassObject *pclsObj = NULL;
    ULONG uReturn = 0;

    while (pEnumerator)
    {
        HRESULT hr = pEnumerator->Next(WBEM_INFINITE, 1, 
            &pclsObj, &uReturn);

        if(0 == uReturn)
        {
            break;
        }

        npResultObjects.push_back(pclsObj);
        /*
        VARIANT vtProp;

        // Get the value of the Name property
        hr = pclsObj->Get(L"Name", 0, &vtProp, 0, 0);
        cout << _T("OS Name: ") << vtProp.bstrVal << endl;

        // Get the value of the FreePhysicalMemory property
        hr = pclsObj->Get(L"FreePhysicalMemory", 0, &vtProp, 0, 0);
        cout << "Free physical memory(in kilobytes): " << vtProp.uintVal << endl;
        VariantClear(&vtProp);

        pclsObj->Release();
        pclsObj = NULL;
        */
    }

    // Cleanup
    // ========

    pEnumerator->Release();

    return npResultObjects;
}

CString ADWMISearch::getStringFromObject(IWbemClassObject* pObject, CString strPropertyName)
{
    _bstr_t bstrPropertyName = strPropertyName;

    VARIANT vtProperty;
    CString strProperty;
    // Get the value of the property
    VariantInit(&vtProperty);
    HRESULT hResult = pObject->Get(bstrPropertyName, 0, &vtProperty, 0, 0);
    if (SUCCEEDED(hResult) && V_VT(&vtProperty) == VT_BSTR)
    {
        strProperty = vtProperty.bstrVal;
        VariantClear(&vtProperty);
        return strProperty;
    }
    else
    {
        VariantClear(&vtProperty);
        MyMessageBox_Error(_T("getStringsFromObjects"));
        return _T("");
    }
}

vector<CString> ADWMISearch::getStringsFromObjects(vector<IWbemClassObject*> npObjects, CString strPropertyName)
{
    _bstr_t bstrPropertyName = strPropertyName;
    vector<CString> nstrProperties;

    for (int i = 0; i < npObjects.size(); i ++)
    {
        VARIANT vtProperty;
        CString strProperty;
        // Get the value of the property
        VariantInit(&vtProperty);
        HRESULT hResult = npObjects[i]->Get(bstrPropertyName, 0, &vtProperty, 0, 0);
        if (SUCCEEDED(hResult) && V_VT(&vtProperty) == VT_BSTR)
        {
            CString strProperty = vtProperty.bstrVal;
            nstrProperties.push_back(strProperty);
            VariantClear(&vtProperty);
        }
        else
        {
            VariantClear(&vtProperty);
            MyMessageBox_Error(_T("getStringsFromObjects"));
            return nstrProperties;
        }
    }
    return nstrProperties;
}

void ADWMISearch::clearObjects(vector<IWbemClassObject*> npObjects)
{
    for (int i = 0; i < npObjects.size(); i ++)
    {
        npObjects[i]->Release();
        npObjects[i] = NULL;
    }
    npObjects.clear();
}

IWbemClassObject* ADWMISearch::getWMIClass(IWbemServices *pSvc, CString strClassName)
{
    HRESULT hResult;
    IWbemClassObject* pClass = NULL;
    hResult = pSvc->GetObject(_bstr_t(strClassName), 0, NULL, &pClass, NULL); //_T("Win32_Share")
    if (!SUCCEEDED(hResult))
    {
        MyMessageBox_Error(_T("getWMIClass"));
        return NULL;
    }
    else
    {
        return pClass;
    }
}

IWbemClassObject* ADWMISearch::getObjectFromObject(IWbemClassObject *pObject, CString strArgumentName)
{
    if (!pObject)
    {
        MyMessageBox_Error(_T("getObjectFromObject"));
        return NULL;
    }

    HRESULT hResult;
    VARIANT varArgument;

    hResult = pObject->Get(_bstr_t(strArgumentName), 0, &varArgument, NULL, 0);
    if (!SUCCEEDED(hResult))
    {
        VariantClear(&varArgument);
        MyMessageBox_Error(_T("getObjectFromObject"));
        return NULL;
    }

    //IWbemClassObject **ppResultObject;
    IWbemClassObject *pResultObject2;
    if (V_VT(&varArgument) == VT_UNKNOWN)
    {
        //ppResultObject = (IWbemClassObject **)varArgument.ppunkVal;
        pResultObject2 = (IWbemClassObject *)varArgument.punkVal;
    }
    else if (V_VT(&varArgument) == VT_DISPATCH)
    {
        //ppResultObject = (IWbemClassObject **)varArgument.ppdispVal;
        pResultObject2 = (IWbemClassObject *)varArgument.pdispVal;
    }
    else
    {
        VariantClear(&varArgument);
        MyMessageBox_Error(_T("getObjectFromObject"));
        return NULL;
    }

    VariantClear(&varArgument);

    //IWbemClassObject *pResultObject = *ppResultObject;
    //return pResultObject;
    return pResultObject2;
}

IWbemClassObject* ADWMISearch::getObjectFromObjectWithCheck(IWbemClassObject *pOutParams, CString strArgumentName)
{
    if (!pOutParams)
    {
        MyMessageBox_Error(_T("getObjectFromObjectWithCheck"));
        return NULL;
    }

    HRESULT hResult;
    VARIANT varReturnValue;
    VARIANT varArgument;
    hResult = pOutParams->Get(_bstr_t(L"ReturnValue"), 0, &varReturnValue, NULL, 0);
    if (!SUCCEEDED(hResult))
    {
        VariantClear(&varReturnValue);
        VariantClear(&varArgument);
        MyMessageBox_Error(_T("getObjectFromObjectWithCheck"));
        return NULL;
    }
    DWORD dwResult = varReturnValue.lVal;

    hResult = pOutParams->Get(_bstr_t(strArgumentName), 0, &varArgument, NULL, 0);
    if (!SUCCEEDED(hResult))
    {
        VariantClear(&varReturnValue);
        VariantClear(&varArgument);
        MyMessageBox_Error(_T("getObjectFromObjectWithCheck"));
        return NULL;
    }

    //IWbemClassObject **ppResultObject;
    IWbemClassObject *pResultObject2;
    if (V_VT(&varArgument) == VT_UNKNOWN)
    {
        //ppResultObject = (IWbemClassObject **)varArgument.ppunkVal;
        pResultObject2 = (IWbemClassObject *)varArgument.punkVal;
    }
    else if (V_VT(&varArgument) == VT_DISPATCH)
    {
        //ppResultObject = (IWbemClassObject **)varArgument.ppdispVal;
        pResultObject2 = (IWbemClassObject *)varArgument.pdispVal;
    }
    else
    {
        VariantClear(&varReturnValue);
        VariantClear(&varArgument);
        MyMessageBox_Error(_T("getObjectFromObjectWithCheck"));
        return NULL;
    }

    VariantClear(&varReturnValue);
    VariantClear(&varArgument);

    //IWbemClassObject *pResultObject = *ppResultObject;
    //return pResultObject;
    return pResultObject2;
}

vector<ADWMIParam> ADWMISearch::genObjectArguments(CString strArgName, IWbemClassObject *pObject)
{
    vector<ADWMIParam> resultArgs;
    resultArgs.push_back(ADWMIParam(strArgName, pObject));
    return resultArgs;
}

IWbemClassObject* ADWMISearch::callStaticMethod(IWbemServices *pSvc, IWbemClassObject *pClass, CString strClassName,
                                                CString strMethodName)
{
    return callStaticMethod(pSvc, pClass, strClassName, strMethodName, vector<ADWMIParam>());
}

IWbemClassObject* ADWMISearch::callStaticMethod(IWbemServices *pSvc, IWbemClassObject *pClass, CString strClassName,
                                                CString strMethodName, vector<ADWMIParam> &arguments)
{
    _bstr_t bstrClassName = _bstr_t(strClassName);
    _bstr_t bstrMethodName = _bstr_t(strMethodName);
    BOOL bInParams;
    BOOL bOutParams;

    HRESULT hResult;
    IWbemClassObject* pClass2 = getWMIClass(pSvc, strClassName);

    IWbemClassObject* pInParamsDefinition = NULL;
    IWbemClassObject* pOutParamsDefinition = NULL;
    hResult = pClass2->GetMethod(bstrMethodName, 0, &pInParamsDefinition, &pOutParamsDefinition);
    if (hResult != WBEM_S_NO_ERROR)
    {
        //pClass->Release();
        MyMessageBox_Error(_T("callStaticMethod"));
        return NULL;
    }
    if (pInParamsDefinition == NULL)
    {
        bInParams = FALSE;
    }
    else
    {
        bInParams = TRUE;
    }
    if (pOutParamsDefinition == NULL)
    {
        bOutParams = FALSE;
    }
    else
    {
        bOutParams = TRUE;
    }

    IWbemClassObject* pInParamsInstance = NULL;
    if (bInParams)
    {
        hResult = pInParamsDefinition->SpawnInstance(0, &pInParamsInstance);

        for (int i = 0; i < arguments.size(); i ++)
        {
            _variant_t varArg;
            VariantCopy(&varArg, &(arguments[i].value));
            hResult = pInParamsInstance->Put(_bstr_t(arguments[i].key), 0, &varArg, 0);
            //hResult = pInParamsInstance->Put(_bstr_t(arguments[i].key), 0, &(arguments[i].value), 0);
        }
    }

    IWbemClassObject* pOutParams = NULL;
    hResult = pSvc->ExecMethod(bstrClassName, bstrMethodName, 0, NULL, pInParamsInstance, &pOutParams, NULL);
    if (hResult != WBEM_S_NO_ERROR)
    {
        //pClass->Release();
        if (pInParamsDefinition != NULL)
        {
            pInParamsDefinition->Release();
        }
        if (pOutParamsDefinition != NULL)
        {
            pOutParamsDefinition->Release();
        }
        if (pInParamsInstance != NULL)
        {
            pInParamsInstance->Release();
        }
        MyMessageBox_Error(_T("callStaticMethod"));
        return NULL;
    }

    if (pInParamsDefinition != NULL)
    {
        pInParamsDefinition->Release();
    }
    if (pOutParamsDefinition != NULL)
    {
        pOutParamsDefinition->Release();
    }
    if (pInParamsInstance != NULL)
    {
        pInParamsInstance->Release();
    }

    if (bOutParams)
    {
        return pOutParams;
    }
    else
    {
        return NULL;
    }
}

IWbemClassObject* ADWMISearch::callMethod(IWbemServices *pSvc, IWbemClassObject *pClass, CString strClassName,
                                          CString strInstancePath, CString strMethodName)
{
    return callMethod(pSvc, pClass, strClassName, strInstancePath, strMethodName, vector<ADWMIParam>());
}

IWbemClassObject* ADWMISearch::callMethod(IWbemServices *pSvc, IWbemClassObject *pClass, CString strClassName,
                                          CString strInstancePath, CString strMethodName,  vector<ADWMIParam> &arguments)
{
    _bstr_t bstrClassName = _bstr_t(strClassName);
    _bstr_t bstrMethodName = _bstr_t(strMethodName);
    BOOL bInParams;
    BOOL bOutParams;

    HRESULT hResult;
    //IWbemClassObject* pClass = getWMIClass(pSvc, strClassName);

    IWbemClassObject* pInParamsDefinition = NULL;
    IWbemClassObject* pOutParamsDefinition = NULL;
    hResult = pClass->GetMethod(bstrMethodName, 0, &pInParamsDefinition, &pOutParamsDefinition);
    if (hResult != WBEM_S_NO_ERROR)
    {
        //pClass->Release();
        MyMessageBox_Error(_T("callMethod"));
        return NULL;
    }
    if (pInParamsDefinition == NULL)
    {
        bInParams = FALSE;
    }
    else
    {
        bInParams = TRUE;
    }
    if (pOutParamsDefinition == NULL)
    {
        bOutParams = FALSE;
    }
    else
    {
        bOutParams = TRUE;
    }

    IWbemClassObject* pInParamsInstance = NULL;
    if (bInParams)
    {
        hResult = pInParamsDefinition->SpawnInstance(0, &pInParamsInstance);

        for (int i = 0; i < arguments.size(); i ++)
        {
            _variant_t varArg;
            VariantCopy(&varArg, &(arguments[i].value));
            hResult = pInParamsInstance->Put(_bstr_t(arguments[i].key), 0, &varArg, 0);
            //hResult = pInParamsInstance->Put(_bstr_t(arguments[i].key), 0, &(arguments[i].value), 0);
        }
    }

    IWbemClassObject* pOutParams = NULL;
    hResult = pSvc->ExecMethod(_bstr_t(strInstancePath), bstrMethodName, 0, NULL, pInParamsInstance, &pOutParams, NULL);
    if (hResult != WBEM_S_NO_ERROR)
    {
        //pClass->Release();
        if (pInParamsDefinition != NULL)
        {
            pInParamsDefinition->Release();
        }
        if (pOutParamsDefinition != NULL)
        {
            pOutParamsDefinition->Release();
        }
        if (pInParamsInstance != NULL)
        {
            pInParamsInstance->Release();
        }
        MyMessageBox_Error(_T("callMethod"));
        return NULL;
    }

    if (pInParamsDefinition != NULL)
    {
        pInParamsDefinition->Release();
    }
    if (pOutParamsDefinition != NULL)
    {
        pOutParamsDefinition->Release();
    }
    if (pInParamsInstance != NULL)
    {
        pInParamsInstance->Release();
    }

    if (bOutParams)
    {
        return pOutParams;
    }
    else
    {
        return NULL;
    }
}

void ADWMISearch::disconnect(IWbemServices *pSvc)
{
    pSvc->Release();
    CoUninitialize();
} 
```

ADWMISearch.h

```
#include <Wbemidl.h>

#include <vector>
#include <map>
using namespace std;

class ADWMIParam
{
public:
    CString key;
    _variant_t value;
public:
    ADWMIParam(CString strKey, CString strValue)
    {
        key = strKey;
        VariantInit(&value);
        value.vt = VT_BSTR;
        value.bstrVal = _bstr_t(strValue);
    }
    ADWMIParam(CString strKey, IWbemClassObject *pValue)
    {
        key = strKey;
        VariantInit(&value);
        value.vt = VT_UNKNOWN;
        value.punkVal = pValue;
    }
};

class ADWMISearch
{
public:
    DWORD WIN32_FROM_HRESULT_alternate(HRESULT hr);
    IWbemServices* connect(CString strServerName, CString strServerIP, CString strDomainName,
        CString strUsername, CString strPassword);
    vector<IWbemClassObject*> query(IWbemServices *pSvc, CString strDomainName, CString strPassword, CString strWQL);
    CString getStringFromObject(IWbemClassObject* pObject, CString strPropertyName);
    vector<CString> getStringsFromObjects(vector<IWbemClassObject*> npObjects, CString strPropertyName);
    void clearObjects(vector<IWbemClassObject*> npObjects);
    IWbemClassObject* getWMIClass(IWbemServices *pSvc, CString strClassName);
    IWbemClassObject* getObjectFromObject(IWbemClassObject *pObject, CString strArgumentName);
    IWbemClassObject* getObjectFromObjectWithCheck(IWbemClassObject *pOutParams, CString strArgumentName);
    vector<ADWMIParam> genObjectArguments(CString strArgName, IWbemClassObject *pObject);
    IWbemClassObject* callStaticMethod(IWbemServices *pSvc, IWbemClassObject *pClass, CString strClassName,
        CString strMethodName);
    IWbemClassObject* callStaticMethod(IWbemServices *pSvc, IWbemClassObject *pClass, CString strClassName,
        CString strMethodName, vector<ADWMIParam> &arguments);
    IWbemClassObject* callMethod(IWbemServices *pSvc, IWbemClassObject *pClass, CString strClassName,
        CString strInstancePath, CString strMethodName);
    IWbemClassObject* callMethod(IWbemServices *pSvc, IWbemClassObject *pClass, CString strClassName,
        CString strInstancePath, CString strMethodName, vector<ADWMIParam> &arguments);
    void disconnect(IWbemServices *pSvc);
}; 
```

调用代码（像 main 这样的地方可以）

```
ADWMISearch *wmiSearcher = new ADWMISearch();
IWbemServices *pSvc = wmiSearcher->connect("luo-pc", "127.0.0.1", "", "", "");
IWbemClassObject *pLSSSClass = wmiSearcher->getWMIClass(pSvc, "Win32_LogicalShareSecuritySetting");

vector<IWbemClassObject*> npObjects = wmiSearcher->query(pSvc, "", "", "Select * from Win32_Log 
```

# c# - 拒绝访问 C# 中的“文档”（以及几乎任何其他文件夹）

> ID：11178134
> 
> 赞同：0
> 
> 时间：2012-06-24T14:09:17.963
> 
> 标签：c#, path

我已经阅读了很多关于此的内容，几个小时后我仍然无法修复它。这是重要的代码片段：

```
 void CopiarMover(string file) 
    {
        File.Copy(@"C:\\Users\\Daniel\\Documents", "../../contenidos/" + file);
    } 
```

我已经将我的应用清单配置为：

```
<requestedExecutionLevel level="highestAvailable" uiAccess="false" /> 
```

它不断返回错误（权限被拒绝）。我用的是Win7。有想法该怎么解决这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T14:36:27.130

您没有指定源文件名的任何原因？

像这样：

```
void CopiarMover(string file) 
{
    File.Copy(@"C:\\Users\\Daniel\\Documents\\" + file, "..\\..\\contenidos\\" + file);
} 
```

# python - 计算Python中随机调用的次数？

> ID：11178136
> 
> 赞同：3
> 
> 时间：2012-06-24T14:09:43.667
> 
> 标签：python, random, python-3.x

我有一个 Python 应用程序，我想在运行时监控标准随机模块中函数的调用次数；有什么好方法可以做到这一点，还是我必须“手动”做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-24T14:18:51.817

在我看来，Python 探查器应该能够“很好地”做到这一点。查看[关于 SO 上的 Python 分析的帖子](https://stackoverflow.com/questions/582336/how-can-you-profile-a-python-script)。

[在运行时，装饰器](https://stackoverflow.com/questions/1301735/counting-python-method-calls-within-another-method)似乎是要走的路。当然，默认的随机模块没有装饰器，因此您可能需要定义一个带有装饰器的受监视随机模块来代理随机模块并计算调用次数。如果您保持函数名称和签名与随机相同，则只需修改代码中的导入。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-24T14:24:06.633

这是一个肮脏的解决方案：

```
import functools

def monitor(f):
    @functools.wraps(f)
    def decorated(*args, **kwargs):
        print("{}: {}, {}".format(f.__name__, args, kwargs))
        # Do whatever you want: increment some counter, etc.
        return f(*args, **kwargs)
    return decorated

import random

for name in dir(random):
    f = getattr(random, name)
    if callable(f) and not name.startswith('_'):
        setattr(random, name, monitor(f)) 
```

此代码应在程序的最开始执行（可以在单独的模块中），在任何其他代码（包括导入）之前执行。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-24T14:16:13.873

创建一个包装函数来增加计数，然后进行调用并返回结果。

如果您认为该“手册”，那么是的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-24T14:56:28.103

我能想到的最好的方法是代理——我不相信用自定义的 dict-esque 对象替换 sys.modules 是可能的。请注意，我不喜欢这个，而且你自己的头是......

```
class random(object):
    def __init__(self):
        from collections import defaultdict
        import random as r_
        self.R = r_
        self.__lookups = defaultdict(int)
        def __getattr__(self, name):
            self.__lookups[name] += 1
            return getattr(self.R, name)
    @property
    def freq(self):
        return self.__lookups 
```

一个可怕的杂物，但实际上是标准模块的代理。你如何将它放入命名空间我真的不确定 - 也许将它放入一个模块中，然后（现在开始命名）`from random_testing import random`而不是正常的`import random`.

我确实注意到`randint`通过这种方法运行两个给我一个计数六 - 所以不完全确定内部如何在那里工作......

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-24T14:24:17.210

`cProfile`返回每个函数的调用次数。

像这样的东西应该工作：

```
import my_module
import cProfile

cProfile.run('my_module.my_func()') 
```

其中 my_module.my_func 是程序的入口点。这将输出以下内容：

```
 7 function calls in 0.000 seconds

Ordered by: standard name

ncalls  tottime  percall  cumtime  percall filename:lineno(function)
     1    0.000    0.000    0.000    0.000 <string>:1(<module>)
     1    0.000    0.000    0.000    0.000 bar.py:4(bar)
     1    0.000    0.000    0.000    0.000 foo.py:4(foo)
     1    0.000    0.000    0.000    0.000 my_module.py:4(my_func)
     1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects}
     2    0.000    0.000    0.000    0.000 {method 'random' of '_random.Random' objects} 
```

最后一行显示，总共有 2 次调用 random 方法（在我的玩具示例中，它们位于 2 个不同的模块中，foo.py 和 bar.py）。

编辑：当然，这仅在您希望脱机计数时才有用，正如评论中所指出的那样。

# sql - 仅获取本月的所有条目

> ID：11178137
> 
> 赞同：0
> 
> 时间：2012-06-24T14:09:48.533
> 
> 标签：sql, ruby-on-rails, ruby, ruby-on-rails-3

我想统计这个月我所有的优惠条目。目前我用它来计算：

```
@offer_count = Offers.find_all_by_accepted(false).count 
```

这很好用，但正如您所见，它确实计算了我的所有条目。所以我的问题是我怎样才能改变这个只得到这个月的条目数。

此外，我希望有可能复制此内容并找到我在特定月份的所有优惠。就像在 1 月份获得所有接受虚假和创建的报价一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T14:15:31.927

用于[`beginning_of_month`](http://api.rubyonrails.org/classes/Date.html#method-i-beginning_of_month)比较日期：

```
Order.where('created_at >= ?', Time.now.beginning_of_month) 
```

如果那是你想要的，你当然可以代替`created_at`。如果需要，`updated_at`您还可以添加更多条件（例如，您的问题似乎需要）。`where``.where(:accepted => false)`

# javascript - javascript，循环字段和验证

> ID：11178140
> 
> 赞同：1
> 
> 时间：2012-06-24T14:10:47.737
> 
> 标签：javascript, jquery

我正在使用下面的代码来检查一些表单字段并在单击按钮时呈现数据表。如果任何字段为空，我的意图是停止呈现表格。显然`return false`循环内部不起作用。

这是完成的正确方法吗？有什么更好的方法吗？

```
$('#advance_search').click(function(){
  var ds = $('.advance_search .filter_field');

  $.each(ds, function(index, value){ //this loop checks for series of fields
    if ($(this).val().length === 0) {
      alert('Please fill in '+$(this).data('label'));
      return false;
    }
  });

  dt.fnDraw(); //shouldn't be called if either one of the field is empty

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T14:15:48.733

如果你仔细看，你`return false`在`$.each`回调函数里面，所以它`returns false`是那个函数的调用者，而不是你所在的“主函数”。

试试这个：

```
$('#advance_search').click(function(){
    var ds = $('.advance_search .filter_field'), valid = true;

    $.each(ds, function(index, value){ //this loop checks for series of fields
        if($(this).val().length === 0) {
            alert('Please fill in '+$(this).data('label'));
            return (valid = false); //return false and also assign false to valid
        }
    });

    if( !valid ) return false;

    dt.fnDraw(); //shouldn't be called if either one of the field is empty

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T14:14:51.317

您可以添加一个控制变量来防止`dt.fnDraw()`被调用：

```
$('#advance_search').click(function(e){

  e.preventDefault();

  var check = 0, // Control variable
      ds    = $('.advance_search .filter_field');

  $.each(ds, function(index, value){ //this loop checks for series of fields
    if($(this).val().length === 0) {
      check++; // error found, increment control variable
      alert('Please fill in '+$(this).data('label'));
    }
  });

  if (check==0) { // Enter only if the control variable is still 0
    dt.fnDraw(); //shouldn't be called if either one of the field is empty
  }

}); 
```

# scala - 如何在 Scala 中编写此验证逻辑？

> ID：11178141
> 
> 赞同：6
> 
> 时间：2012-06-24T14:10:51.530
> 
> 标签：scala

假设我想在 Scala 中编写以下逻辑

```
val xdir = System.getProperty("XDir")
如果（xdir == null）
   error("No XDir") // 记录错误并退出

val ydir = System.getProperty("YDir")
如果（ydir == null）
   错误（“没有 YDir”）

if (!new File(xdir).isDirectory)
   error("XDir 不是目录")

if (!new File(ydir).isDirectory)
   error("YDir 不是目录")

if (!new File(xdir).exists)
   error("XDir 不存在")

if (!new File(ydir).exists)
   error("YDir 不存在")
...
（等等）

```

在 Scala 中编写此验证链的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T15:57:33.670

就像是：

```
val batch = for{
  a <- safe(doA, "A failed") either
  b <- safe(doB, "B failed") either
  c <- safe(doC, "C failed") either
} yield(a,b,c)
batch fold( error(_), doSuccess(_) ) 
```

在 safe 执行的地方，您猜对了，安全（try/catch）操作接受失败（Left 结果）消息并返回 Either RightProjection（它允许您在遍历故障点错误消息时执行上述批处理操作)

```
class Catching[T](f: => T) {
  def either(msg: String) = {
    try { Right(f).right } catch { Left(msg).right }
  }
}
def safe[T](f: => T) = new Catching(f) 
```

如果您想记录特定的错误类型，也可以将选项方法添加到 Catching 类，以及记录。

请参阅 Jason Zaugg 的[右偏](https://issues.scala-lang.org/browse/SI-5793?focusedCommentId=57583&page=com.atlassian.jira.plugin.system.issuetabpanels%3acomment-tabpanel#comment-57583)解决方案，以及[该主题](https://groups.google.com/forum/#!topic/scala-debate/K6wv6KphJK0)的 scala-debate 中的这个线程。目前还没有达成共识，但大多数 scala “重量级”似乎都赞成。

这种方法的一个限制是，如果您尝试向 for{} 块添加条件（如果 a = b），它将无法编译（因为默认的 Either 过滤器方法返回 Option）。解决方法是实现 filter 和 withFilter，返回 Either，我还没有弄清楚/做的事情（如果有人已经这样做了，请发布）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-24T22:38:19.433

这里有一些有用的东西：

```
def sysValue(prop: String) = Option(System.getProperty(prop)) //returns Option[String]

def trySysValue(prop: String) = //returns Either[String, String]
  sysValue(prop) map Right getOrElse Left("Absent property: " + prop) 
```

`Either`然后你可以通过它的*右投影*使用一元组合

 *```
val batch = //batch is Either[String, (File, File)]
  for {
    x  <- trySysValue("XDir")).right
    xf <- dir(x).right
    y  <- trySysValue("YDir").right
    yf <- dir(y).right
  } 
  yield (xf, yf) 
```

在哪里：

```
def dir(s: String) = { //returns Either[String, File]
  val f = new File(s)
  if (!f.exists()) Left("Does not exist: " + f)
  else if (!f.isDir()) Left("Is not a directory: " + f)
  else Right(f)
} 
```

的左侧`Either`将是一条错误消息。这个单子组合*很快就失败*了。**您可以使用scalaz**实现将累积所有失败的组合（例如，如果既不存在`XDir`也不`YDir`存在，您将看到两条消息）。在这种情况下，代码将如下所示： **`Validation`**

 **```
def trySysValue(prop: String) = //returns Validation[String, String]
  sysValue(prop) map Success getOrElse ("Absent property: " + prop).fail

def dir(s: String) = {
  val f = new File(s)
  if (!f.exists())("Does not exist: " + f).fail
  else if (!f.isDir()) ("Is not a directory: " + f).fail
  else f.success
}

val batch = //batch is ValidationNEL[String, (File, File)]
  (trySysValue("XDir")) flatMap dir).liftFailNel <|*|> (trySysValue("YDir")) flatMap dir).liftFailNel 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T08:55:53.300

是的，您可以在没有 scalaz 的情况下使用验证，请参阅此处了解自包含实现： [http](http://applicative-errors-scala.googlecode.com/svn/artifacts/0.6/chunk-xhtml/apa.html) ://applicative-errors-scala.googlecode.com/svn/artifacts/0.6/chunk-xhtml/apa.html HTH***

# yii - 在 yii 中压缩/解压文件

> ID：11178143
> 
> 赞同：1
> 
> 时间：2012-06-24T14:10:56.807
> 
> 标签：yii, yii-extensions

我想使用 yii 中提供的扩展。

请在 yii 中建议一些扩展来压缩/解压缩上传的文件。并存储在服务器或目录上，并在下载时再次解压缩..

在这里，我使用了扩展 EAjaxUpload 扩展来上传文件。

可见

```
<?php
$this->widget('ext.EAjaxUpload.EAjaxUpload',
        array(
       'id'=>'uploadResume',
                'config'=>array(
                       'action'=>Yii::app()->baseUrl.'/index.php?r=site/word', 
                       'allowedExtensions'=>array("doc","docx"),
                       'sizeLimit'=>10*1024*1024,
                       'minSizeLimit'=>1*1024,
                       'multiple'=>false,
                       'onComplete'=>'js:function(id, fileName, responseJSON){alert(messages);}),
?> 
```

在控制器中

```
 action{
    Yii::import("ext.EAjaxUpload.qqFileUploader");
    $folder = 'Resumes/';
            $allowedExtensions = array("doc","docx");
    $sizeLimit = 10 * 1024 *1024;
    $uploader = new qqFileUploader($allowedExtensions, $sizeLimit);
    $result = $uploader->handleUpload($folder);
    if(isset($result['success']))
            if($result['success']==true)
            {

                $fileSize=filesize($folder.$result['filename']);
            $fileName=$result['filename'];
                $mimetype = $fileName['mime']; 
            }
           // rename($folder.$result['filename'],$folder.$fileName);
           $return = htmlspecialchars(json_encode($result), ENT_NOQUOTES);
       echo $return;

    } 
```

.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T15:08:24.273

您应该使用来自 yii 的系统工具，例如 tar 或 zip/unzip，您可以使用[exec](http://php.net/manual/en/function.exec.php)或[system调用此命令](http://www.php.net/manual/en/function.system.php)

# functional-programming - 无限斐波那契数列，只从列表中取 n，不使用突变？

> ID：11178146
> 
> 赞同：4
> 
> 时间：2012-06-24T14:11:07.773
> 
> 标签：functional-programming, scheme, fibonacci

我试图以纯功能的方式解决这个问题，而不使用`set!`.

我已经编写了一个函数，它永远为斐波那契数列中的每个数字调用一个给定的 lambda。

```
(define (each-fib fn)
  (letrec
    ((next (lambda (a b)
             (fn a)
             (next b (+ a b)))))
    (next 0 1))) 
```

我认为这是尽可能简洁，但如果我可以缩短它，请赐教:)

使用上面的定义，是否可以编写另一个函数，`n`从斐波那契数列中获取第一个数字并给我一个列表，但*不*使用变量突变来跟踪状态（我理解这不是真正的功能）。

函数签名不需要与以下相同......任何`each-fib`不使用而使用`set!`的方法都可以。

```
(take-n-fibs 7) ; (0 1 1 2 3 5 8) 
```

我猜我可以使用某种 continuations + currying 技巧，但我一直想使用`set!`，这是我试图避免的（纯粹是为了学习目的/将我的思维转变为纯粹的功能）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T16:44:25.847

试试这个，通过[延迟评估](http://docs.racket-lang.org/reference/Delayed_Evaluation.html)使用惰性代码实现：

```
(define (each-fib fn)
  (letrec
      ((next (lambda (a b)
               (fn a)
               (delay (next b (+ a b))))))
    (next 0 1)))

(define (take-n-fibs n fn)
  (let loop ((i n)
             (promise (each-fib fn)))
    (when (positive? i)
      (loop (sub1 i) (force promise))))) 
```

如前所述，`each-fib`可以通过使用[命名`let`](http://www.r6rs.org/final/html/r6rs/r6rs-Z-H-14.html#node_sec_11.16)进一步简化：

```
(define (each-fib fn)
  (let next ((a 0) (b 1))
    (fn a)
    (delay (next b (+ a b))))) 
```

无论哪种方式，都需要`each-fib`对使用`delay`原语进行一些修改，这会产生一个承诺：

> *Promise*封装了一个表达式，通过`force`. 在一个承诺被`force`d 之后，承诺的每一个后续力量都会产生相同的结果。

我想不出一种方法来阻止原始（未修改）过程无限期地迭代。但是随着上述更改的到位，`take-n-fibs`可以根据需要继续强制懒惰评估尽可能多的值，仅此而已。

此外，`take-n-fibs`现在接收一个用于依次打印或处理每个值的函数，像这样使用它：

```
(take-n-fibs 10 (lambda (n) (printf "~a " n)))
> 0 1 1 2 3 5 8 13 21 34 55 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T14:51:01.827

您在斐波那契元素上提供迭代函数。如果您不想迭代每个元素来*累积*结果，则应该使用不同的原语，它是 a `fold`(or `reduce`) 而不是 a `iter`。
（*可以*使用延续将 a`iter`转换为 a ，但与使用 a或突变`fold`的直接解决方案相比，它的可读性和效率可能更低。）`fold`

但是请注意，使用通过突变更新的累加器也很好，只要您了解自己在做什么：为了方便起见，您在本地使用可变状态，但是`take-n-fibs`从外部看，该函数是纯观察的，所以您不要“用副作用污染整个程序。

的快速原型`fold-fib`，改编自您自己的代码。我对“何时停止折叠”做出了任意选择：如果函数返回`null`，我们返回当前累加器而不是继续折叠。

```
(define (fold-fib init fn) (letrec ([next (lambda (acc a b)
      (let ([acc2 (fn acc a)])
        (if (null? acc2) acc
            (next acc2 b (+ a b)))))])
      (next init 0 1)))

(reverse (fold-fib '() (lambda (acc n) (if (> n 10) null (cons n acc))))) 
```

最好有一个更强大的约定来结束折叠。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T16:20:57.660

我写了几个变种。首先你问如果

```
(define (each-fib fn)
  (letrec
    ((next (lambda (a b)
             (fn a)
             (next b (+ a b)))))
    (next 0 1))) 
```

可以写得更短。该模式的使用如此频繁，以至于`named let`引入了特殊的语法称为。您的函数使用命名的 let 如下所示：

```
(define (each-fib fn)
  (let next ([a 0] [b 1])
    (fn a)
    (next b (+ a b)))) 
```

为了使控制从一个函数流向另一个函数，可以在支持 TCO 的语言中使用延续传递样式。每个函数都有一个额外的参数，通常称为 k（用于延续）。函数 k 表示下一步做什么。

使用这种风格，您可以编写如下程序：

```
(define (generate-fibs k)
  (let next ([a 0] [b 1] [k k])
    (k a (lambda (k1) 
           (next b (+ a b) k1)))))

(define (count-down n k)
  (let loop ([n n] [fibs '()] [next generate-fibs])
    (if (zero? n)
        (k fibs)
        (next (λ (a next)
                (loop (- n 1) (cons a fibs) next))))))

(count-down 5 values) 
```

现在手动写样式有点烦人，所以引入协程可能会很方便。打破你不使用的规则`set!`我选择使用一个共享变量`fibs`，在该变量中`generate-fibs`重复使用新的斐波那契数。当`count-down`倒计时结束时，例程仅读取值。

```
(define (make-coroutine co-body)
  (letrec ([state (lambda () (co-body resume))]
           [resume (lambda (other)
                     (call/cc (lambda (here)
                                (set! state here)
                                (other))))])
    (lambda ()
      (state))))

(define fibs '())

(define generate-fib
  (make-coroutine 
   (lambda (resume)
     (let next ([a 0] [b 1])
       (set! fibs (cons a fibs))
       (resume count-down)
       (next b (+ a b))))))

(define count-down
  (make-coroutine   
   (lambda (resume)
     (let loop ([n 10])
       (if (zero? n)
           fibs
           (begin
             (resume generate-fib)
             (loop (- n 1))))))))

(count-down) 
```

还有一个好处，你会得到一个带有通信线程的版本：

```
#lang racket
(letrec ([result #f]
         [count-down 
          (thread 
           (λ ()
             (let loop ([n 10] [fibs '()])
               (if (zero? n)
                   (set! result fibs)
                   (loop (- n 1) (cons (thread-receive) fibs))))))] 

         [produce-fibs
          (thread
           (λ ()
             (let next ([a 0] [b 1])
               (when (thread-running? count-down)
                 (thread-send count-down a)
                 (next b (+ a b))))))])
  (thread-wait count-down)
  result) 
```

线程版本是特定于 Racket 的，其他版本应该可以在任何地方运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-24T18:40:28.497

建立一个列表会很困难。但是仍然可以显示结果（以非常糟糕的方式）

```
#lang racket

(define (each-fib fn)
  (letrec
    ((next (lambda (a b)
             (fn a)
             (next b (+ a b)))))
    (next 0 1)))

(define (take-n-fibs n fn)
  (let/cc k
        (begin
          (each-fib (lambda (x) 
                      (if (= x (fib (+ n 1)))
                          (k (void))
                          (begin
                            (display (fn x))
                            (newline))))))))

(define fib
  (lambda (n)
    (letrec ((f
              (lambda (i a b)
                (if (<= n i)
                    a
                    (f (+ i 1) b (+ a b))))))
      (f 1 0 1)))) 
```

请注意，我正在使用常规斐波那契函数作为转义（就像我说的那样，以一种非常糟糕的方式）。我想没有人会推荐这样的编程。

反正

```
(take-n-fibs 7 (lambda (x) (* x x))) 
0
1
1
4
9
25
64 
```

# javascript - Javascript 文件监视程序

> ID：11178147
> 
> 赞同：2
> 
> 时间：2012-06-24T14:11:30.767
> 
> 标签：javascript, asp.net, javascript-events

我正在开发一个 Web 应用程序（Intranet），并且必须查看特定文件夹（例如 c:\docs\）以获取插入的文件。我想通过 java-script 来做到这一点，以便检测客户端每次将文件插入特定目录时。

提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T14:33:22.283

[您可以使用django](https://www.djangoproject.com/)构建自己的应用程序。它有非常安全的方法来处理用户模型和处理文件。

问题是，您想要一个基于 Web 的界面供用户管理他们的文档，还是想要在人们直接在文件系统中修改时监控文档？

对于前者，我想说 django 是一个非常好的选择，可以立即构建自己的应用程序。

**编辑**

对于后者，您可以使用 node.js。这是一个有趣的项目，可以帮助您入门 - [https://github.com/mikeal/watch](https://github.com/mikeal/watch)

# np-hard - np 硬闭包

> ID：11178149
> 
> 赞同：-1
> 
> 时间：2012-06-24T14:11:39.367
> 
> 标签：np-hard

`if l1 is in NP-HARD`, 所以对于每个 L2!=empty 集, `l1*l2 is in np-hard`.

什么时候：

```
l1*l2={(w1,w2) , w1 in L1 and w2 in L2} 
```

这是真的还是假的，为什么？

我不能批准它，但我也找不到反例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T08:22:19.060

L1 * L2 是 NP 难的。

证明：令 L 为 NP 中的一种语言，令 f 为 L 到 L1 的约简，令 w2 在 L2 中。定义 g(x) = (f(x), w2)。现在 g 是 L 到 L1*L2 的多项式时间多对一约简，因为很明显：

x in L <==> (f(x), w(2)) in L1*L2

# emacs - 如何在开发中的 SLIME 中快速重新加载和重启

> ID：11178152
> 
> 赞同：4
> 
> 时间：2012-06-24T14:11:51.880
> 
> 标签：emacs, lisp, common-lisp, slime, sbcl

我开始使用 emacs 和 slime 来开发一些小服务。

我找到了一种在更改后重新加载代码的方法，但我希望这更方便、更快捷。

这就是我现在的做法：

*   1）启动emacs，启动粘液，然后在粘液中：

    2）（加载“init.lisp”）；加载一些不会改变的初始化代码

    3）（加载“myseervice.lisp”）；这包含我正在处理的代码

    4）（我的服务：开始）

    5）此时seeervice正在运行，我可以对其进行测试。然后我对 myseervice.lisp 进行更改，以对其进行修改。要将代码交换到新版本，我这样做：

    6）（我的服务：停止）

    7）（加载“myservice.lisp”）

    8) 转到 4) 重新开始...

* * *

到目前为止，这有效。但是手动停止、重新加载和启动并不好玩。并且调用之间有大量的 slime 输出，因此很难重用之前键入的命令 4)-7)。

为了有一个解决方案，我启动了一个 devhelper 包，它应该只在一个命令中为我执行此操作，但它不起作用：

```
(defpackage :devhelper
  (:use :common-lisp :myservice)
  (:export :start :reload))

(in-package :devhelper)

(defun start ()
  (myservice:start))

(defun reload ()
  (myservice:stop)
  (load "myservice.lisp") ;I think it is not possible to load it here, 
                          ;because this module is using the file that it is just loading
                          ;But it does not have to work this way, 
                          ;I just like any good solution
  (myservice:start)) 
```

我想我现在可以这样做：

*   1）启动emacs，启动粘液，然后在粘液中：

    2）（加载“init.lisp”）；加载一些不会改变的初始化代码

    3a）（加载“myseervice.lisp”）；这包含我正在处理的代码

    3b）（加载“devhelper.lisp”）

    4）（开发助手：开始）

    5）此时seeervice正在运行，我可以对其进行测试。然后我对 myseervice.lisp 进行更改，以对其进行修改。要将代码交换到新版本，我只是梦想我可以：

    6）（开发助手：重新加载）

但它在这一点上冻结了。

而且我并不坚持这个 devhelper 的想法，我只是想要一个更顺畅的开发周期。

一个真正的 lisper 会如何做到这一点？我对这一切都很陌生，我来自传统的编程背景；) 使用 IDE 和导入。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T16:25:48.477

**历史**

在 SLIME/Emacs 中重用以前的命令并不困难。

命令`M-p`并`M-n`获取上一个或下一个输入。`M-r`并`M-s`允许您在输入中搜索（使用正则表达式）。

**从缓冲区执行**

另一种方法是将命令写到 Lisp 文件中，在缓冲区中打开文件，然后您可以从那里执行它们。

**重新加载**

您的重新加载想法没问题。您可以关闭*服务*，加载新代码并再次启动*服务*。你应该找出它冻结的原因。你应该调试它。您的手册和编码版本之间的区别之一是：停止、加载和启动之间的时间在编码版本中要短得多。您应该检查是否有问题。

**更高级的代码组织**

通常，当您拥有多个文件时，使用一个或多个*系统*来组织代码是有意义的。如果您的代码位于使用文件编译器编译代码的文件中，这也是有意义的。这样您就可以尽早收到警告和错误。通常在 Common Lisp 开发人员`ASDF`中用作系统工具。许多实现还有自己的（或多或少的特性）。

系统工具为您提供了一些可以在系统上使用的命令：

*   load：如果需要（或强制）加载编译或源代码
*   compile：必要时（或强制）编译代码
*   编译和加载：必要时（或强制）编译和加载代码...

通常它会发出编译或加载代码所需的最少量命令。但是您可以强制它重新加载或重新编译所有内容。

通常一个系统可以有子系统。例如，子系统可以是编译*服务*。如果您更改代码，请保存它和`compile and load`子系统。ASDF（或类似工具）将编译更改的文件并加载它们。

更高级：为系统工具编写自己的命令，然后停止正在运行的*服务*，编译/加载更改，然后启动*服务*。

**推荐：**

启动您的版本，找出它挂起的原因。

# html - a4j:commandButton 动态值

> ID：11178155
> 
> 赞同：0
> 
> 时间：2012-06-24T14:12:11.557
> 
> 标签：html, jsf-2

我正在使用 jsf2，用过滤器制作一些数据表。每个过滤器 - `<a4j:commandButton>`。但过滤器必须采用 2 种不同的样式。例如过滤器说：“2行”，所以“2”将大而粗，“行”将小而斜体。也许这个问题是简单的 HTML 问题，我不知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T02:36:12.397

`<a4j:commandButton>`生成一个 HTML`<input type="submit">`元素。不可能对其值的部分进行不同的样式设置。这是 HTML 中的一个限制。您可以做的最好的事情是使用您通过 CSS 设置为按钮背景图像的图像。但这在本地化方面很笨拙。

更好的做法是使用`<a4j:commandLink>`. 你可以自由地按照你想要的方式设置它的值，你可以将任何 HTML/JSF 嵌套在`<a4j:commandLink>`. 您总是可以添加一些带有边框、背景等的 CSS 镜头，以使链接看起来像一个按钮。

# c - 此代码是否找到 k 列的范数？

> ID：11178159
> 
> 赞同：0
> 
> 时间：2012-06-24T14:12:34.820
> 
> 标签：c, norm

此代码是否可以正常工作以找到 K 列的范数？

```
double norm2x2(double A[5][7], int K)
{
    K=K-1;
    double max=fabs(A[0][K]);
    int i;
    for(i=1;i<5;i++)
        if(fabs(A[i][K])>max)
            max=fabs(A[i][K]);
    return max;
} 
```

我写了这个算法作为问题的答案：编写一个 C 程序，获取一个 5X7 数组作为参数并计算第 K 列的范数，其中 K 也是一个参数；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T14:17:53.583

是的。更准确地说，它计算`K`第 -th 列的最大范数，其中`K`是该列的从 1 开始的索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T14:18:23.257

# iphone - 从 Cocos2d Hud 层调用另一个方法

> ID：11178161
> 
> 赞同：0
> 
> 时间：2012-06-24T14:12:42.640
> 
> 标签：iphone, objective-c, cocos2d-iphone, box2d-iphone

我有两个类文件 hudlayer.m 和 actionlayer.m

我**在 hudlayer.m 中**有一个名为 jumpone 的方法，我在 actionlayer.m 中有一个名为**jumpone的方法**

```
-(void) jumpone {
    _heroBody->ApplyLinearImpulse(b2Vec2(_playerVelX/[_lhelper pixelsToMeterRatio], 1.25), _heroBody->GetWorldCenter()); 
} 
```

以及在 hudlayer.m 中称为 jump 的另一种方法

```
-(void)jump {
   ActionLayer *aob = [[ActionLayer alloc] init]; 
   [aob jumpone];
} 
```

问题是当我从**actionlayer.m**调用 Jumpone 方法时，我的精灵会跳转（即调用的方法）

我的action层的init方法

```
- (id)initWithHUD:(HUDLayer *)hud
{
    if ((self = [super init])) {

        [self setupWorld]; 
    }
    return self;
} 
```

但是当我**从 hudlayer.m 通过 jump 方法**调用 jumpone 时，它​​失败了，我的应用程序崩溃了。任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T18:32:09.270

每次调用 jump 它都会创建一个新的 ActionLayer 实例。然后，你建立了一个新世界，一切都变得纠缠不清。此外，它的内存泄漏。

让你将 ActionLayer 变成一个 HUDLayer 的 iVar 并调用

```
 aob = [[ActionLayer alloc] init]; 
```

在 HUD 的 init 方法中。不要忘记在 HUDLayer 的 dealloc 中释放 aob

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T18:50:18.453

您的问题的最佳解决方案是向 hudlayer 和操作层添加标签

例如：hudlayer.tag=1；actionlayer.tag=2;

然后`getChildByTag`像这样使用：

```
[[[[CCDirector sharedDirector]runningScene] getChildByTag:1]jumpone]; 
```

# math - 将十进制转换为十六进制/二进制

> ID：11178162
> 
> 赞同：0
> 
> 时间：2012-06-24T14:12:57.487
> 
> 标签：math, floating-point, binary, hex, decimal

我有一个小数学问题。

有没有办法将十进制数（例如 3.14）转换为十六进制或二进制？如果可能的话，有人可以在这里放置一些教程或解释的链接吗？（我不希望它用于某种语言，我通常在数学中需要它。）请帮忙。

**编辑**：

在代码中传递的输入：

```
0.1 
```

ASM 代码中的输出：

```
415740h 
```

另一个输入：

```
0.058 
```

编译器的另一个输出：

```
00415748h 
```

但是这是怎么做到的呢？怎么可能转换？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T02:44:06.500

我不将您的输出样本识别为浮点数的编码或 .1 和 .058 的其他常见表示。我怀疑这些数字是汇编器或编译器存储浮点编码的地址。

换句话说，您编写了一些包含浮点文字的文本，汇编器或编译器将该文字转换为浮点编码，将其存储在某个地址，然后将该地址放入加载浮点的指令中 -从内存中点编码。

这一假设与这两个数字相差 8 的事实是一致的。由于双精度浮点数通常为 8 个字节，因此第二个地址 (0x415748) 比第一个地址 (0x415740) 多 8 个字节。

用浮点数对数字进行编码的过程大致是这样的：

令 x 为要编码的数字。

如果 x 为正，则将 s（符号位）设置为 0，如果 x 为负，则设置为 1。将 x 设置为 x 的绝对值。

将 e（指数）设置为 0。重复以下任何适当的操作：

*   如果 x 为 2 或更大，则将 1 加到 e 并将 x 除以 2。重复直到 x 小于 2。
*   如果 x 小于 1，则将 -1 添加到 e 并将 x 乘以 2。重复直到 x 至少为 1。

完成上述操作后，x 至少为 1 且小于 2。此外，原始数等于 (-1) ^s ·2 ^e ·x。也就是说，我们用符号位 (s)、2 的指数 (e) 和有效位 (x) 来表示数字，它在 [1, 2) 中（包括 1，不包括 2）。

设置 f = (x-1)·2 ^(52)。将 f 舍入到最接近的整数（如果它是两个整数之间的平局，则舍入到偶数）。如果 f 现在是 2 ^(52)，则将 f 设置为 0 并将 e 加 1。（当 x 表示为二进制数字时，此步骤会查找“小数点”之后的 x 的 52 位，并在第 52 位之后^(四舍五入)，如果在该位置四舍五入将 x 向上舍入 2，则它会调整指数，这超出了我们想要的区间。）

将 1023 添加到 e。这对于 x 没有数值意义；它只是浮点编码的一部分。解码时，减去 1023。

现在，将 s、e 和 f 转换为二进制数字，s 只使用一位数字，e 使用 11 位数字，f 使用 52 位数字。如有必要，包括前导零，以便 e 用 11 个二进制数字表示，f 用 52 个二进制数字表示。连接这些数字，你就有了 64 位。这是双精度浮点数的常见 IEEE 754 编码。

有一些特殊情况：如果原始数为零，则对 s、e 和 f 使用零。（s 也可以是 1，表示一个特殊的“负零”。如果在添加 1023 之前，e 小于 -1022，则必须进行一些调整以获得“非正规”结果或零，我没有此刻进一步描述。如果在加1023之前，e大于1023，那么数字的大小太大而无法用浮点数表示。可以通过设置e（加1023后）将其编码为无穷大到 2047 和 f 到零。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T14:17:42.993

十进制转浮点： [http ://sandbox.mc.edu/~bennet/cs110/flt/dtof.html](http://sandbox.mc.edu/~bennet/cs110/flt/dtof.html)

# jquery - 将 ID 传递给弹出窗口的 jQuery UI 对话框

> ID：11178168
> 
> 赞同：2
> 
> 时间：2012-06-24T14:14:36.357
> 
> 标签：jquery, asp.net, html, dialog, parameter-passing

我一直在使用 Visual Studio 在 MCV 3 中创建一个视频游戏网站，并且无法弄清楚如何将我的页面中的 ID 传递到弹出对话框以从我的数据库中显示正确的开发人员。

我现在要放置的页面是我用来执行基本 CRUD 的 DeveloperManager 页面，我正在尝试执行的功能是当我单击删除链接以打开一个对话框，要求确认应删除该开发人员，然后将其删除。

我已经有一个页面调用 DeveloperManager/Delete，如果我现在只是单击正在传递`item.DeveloperID`，它会显示正确的开发人员并在确认后将其删除。但只是为了方便，我想在对话框中打开该页面。

正如您将看到的那样，当我单击“创建新”按钮时，我已经设法打开了一个对话框，但它不使用参数只是打开页面创建了一个开发人员并关闭它。

这是 DeveloperManager 页面的代码

```
@model IEnumerable<ReviewSite.Models.Developer>

@{
    ViewBag.Title = "Index";
}

<h2>Developers</h2>

<p>
    @Html.ActionLink("Games","Index","GameManager")
    @Html.ActionLink("Developers","Index","DeveloperManager")
    @Html.ActionLink("Publishers","Index","PublisherManager")
    @Html.ActionLink("Genres","Index","GenreManager")
</p>

<button id="createLink">Create New</button>

<table>
    <tr>
        <th>
            Developer Name
        </th>
        <th>
            Developer URL
        </th>
    </tr>

    @foreach (var item in Model) 
    {
        <tr>
            <td>
                <span class = "DeveloperName" >@Html.DisplayFor(modelItem => item.DeveloperName)</span>
            </td>
            <td>
                <span class = "DeveloperURL" >@Html.DisplayFor(modelItem => item.DeveloperURL)</span>
            </td>
            <td>
                @Html.ActionLink("Edit", "Edit", new { id = item.DeveloperID }, new { id = "editLink" }) |
                @Html.ActionLink("Details", "Details", new { id=item.DeveloperID }) |
                @Html.ActionLink("Delete", "Delete", new { id = item.DeveloperID}, new { @class = "deleteLink"})
            </td>
        </tr>
    }

    </table>

<script type="text/javascript">
    $(document).ready(function () {
        var $createDialog = $('<div></div>')
        .load('/DeveloperManager/Create')
        .dialog({
            autoOpen: false,
            title: 'Create Developer',
            modal: true
        });
        $('#createLink').click(function() {
            $createDialog.dialog('open');

            return false;
        });
    });
</script> 
```

当我单击删除时，它将此页面称为对话框

```
@model ReviewSite.Models.Developer

@{
ViewBag.Title = "Delete";
}

<h2>Delete</h2>

<p>
@Html.ActionLink("Games","Index","GameManager")
@Html.ActionLink("Developers","Index","DeveloperManager")
@Html.ActionLink("Publishers","Index","PublisherManager")
@Html.ActionLink("Genres","Index","GenreManager")
</p>

<h3>Are you sure you want to delete @Model.DeveloperName?</h3>
<fieldset>
<legend>Developer</legend>

<div class="display-label">Developer Name</div>
<div class="display-field">
    @Html.DisplayFor(model => model.DeveloperName)
</div>

<div class="display-label">DeveloperURL</div>
<div class="display-field">
    @Html.DisplayFor(model => model.DeveloperURL)
</div>

</fieldset>
@using (Html.BeginForm()) {
<p>
    <input type="submit" value="Delete" /> |
    @Html.ActionLink("Back to List", "Index")
</p>
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T16:23:14.353

[http://jsfiddle.net/umwMU/6/](http://jsfiddle.net/umwMU/6/)

将 item.DeveloperID 分配给链接上的属性。

`@Html.ActionLink("Delete", "Delete", new { id = item.DeveloperID}, new { @class = "deleteLink", @devid = item.DeveloperID })`

然后在为对话框加载 html 时在查询字符串上使用该 ID。

```
$('.deleteLink').click(function(evt) {
    evt.preventDefault();

    var developerID = $(this).attr("devid");

    var url = '/DeveloperManager/Delete/' + developerID;
    var $deleteDialog = $('#deleteDialog').load(url, function() {
        $deleteDialog.dialog({
            autoOpen: true,
            title: 'Delete Developer',
            modal: true
        });
    });
}); 
```

# ruby - OpenStruct 是否支持嵌套？如果是，我如何使用 Nokogiri 构造 XML？如果没有，可以使用 Nokogiri 和 JSON 来完成吗？

> ID：11178171
> 
> 赞同：1
> 
> 时间：2012-06-24T14:15:17.783
> 
> 标签：ruby, xml, json, nokogiri, openstruct

@Jamie 提供的早期解决方案似乎仅适用于少数场景。解决方案是

```
require 'nokogiri'
require 'ostruct'

xml = <<-'XML'
<Catalog>
    <Interface></Interface>
        <Dialog></Dialog>
        <Manifest></Manifest>
</Catalog>
XML

collection = [
    OpenStruct.new(book: '1984', pen: 'George Orwell'),
    OpenStruct.new(book: 'Thinking, Fash and Slow', pen: 'Daniel Kahneman')
]

doc = Nokogiri::XML(xml) 
catalog = doc.root

node_set = Nokogiri::XML::NodeSet.new(doc)
collection.each do |object|
    book = Nokogiri::XML::Node.new('Book', doc)
    book_author = Nokogiri::XML::Node.new('Book_Author', doc)

    book.content = object.book
    book_author.content = object.pen

    node_set << book
    node_set << book_author
end

catalog.first_element_child.before(node_set)

puts doc.to_xml 
```

虽然我有以下 XML 要使用 Nokogiri 构建。我只是想知道，如果这不能使用 OpenStruct 完成。这可以使用 Json 完成吗？如果是，您能否建议我如何使用 Nokogiri 和 Json 构建它。

下面是这个XML，我要构造...

```
<CatalogOrder>
        <CatalogStoreNumber>657758</CatalogStoreNumber>
        <CatalogStoreId>CTH6536</CatalogStoreId>
        <CatalogStoreLocation>UnitedStates</CatalogStoreLocation>
        <CatalogOwnerId>TYCT11190</CatalogOwnerId>
        <CatalogOwner>McGrawHill Pub.</CatalogOwner>
        <CatalogList>
            <CatalogProductInfo>
                <ProductType>Book</ProductType>
                <ProductName>The Client</ProductName>                          
                <ProductId>CRSUS113246A</ProductId>
                <ProductCategory>Crime And Suspense</ProductCategory>
                <ProductSubCategory>Vintage Books</ProductSubCategory>
                <ProductPrice>45.50 USD</ProductPrice>
                <ProductAuthor>
                        <AuthorFirstName>John Grisham</AuthorFirstName>
                    <AuthorMiddleName>Willbur</AuthorMiddleName>
                    <AuthorContact>19876648981</AuthorContact>
                </ProductAuthor>
            </CatalogProductInfo>
            <CatalogProductInfo>
                <ProductType>Pen</ProductType>
                <ProductName>Reynolds</ProductName>                        
                <ProductId>PRREY546647</ProductId>
                <ProductCategory>Misc. Stationary</ProductCategory>
                <ProductSubCategory>Stationary Items</ProductSubCategory>
                <ProductPrice>3.00 USD</ProductPrice>
                <ProductAuthor>
                    <AuthorFirstName>Ryan Reynolds</AuthorFirstName>
                    <AuthorMiddleName>William</AuthorMiddleName>
                    <AuthorContact>16577589898</AuthorContact>
                </ProductAuthor>
            </CatalogProductInfo>
            <CatalogListType>ProductCollection</CatalogListType>
            <CatalogListSource>Web</CatalogListSource>
    </CatalogList>
    <CatalogVerificationLog>
            <CatalogVerificationStatus>Verified</CatalogVerificationStatus>
            <CatalogVerificationDateTime>2012-03-12T13:00:15+5:30</CatalogVerificationDateTime>
            <CatalogVerificationId>64774A</CatalogVerificationId>
            <CatalogVerificationRequestedBy>User_121</CatalogVerificationRequestedBy>
    </CatalogVerificationLog>
    </CatalogOrder> 
```

我有以下以 OpenStruct 格式组织的数据...

```
require 'ostruct'
require 'nokogiri'

collection = [
OpenStruct.new(:catalogStoreNumber => '657758',
:catalogStoreId => 'CTH6536',
:catalogStoreLocation => 'UnitedStates', 
:catalogOwnerId => 'TYCT11190',
:catalogOwner => 'McGrawHill Pub.',
:catalogList => OpenStruct.new(
    :catalogProductInfo => OpenStruct.new(
        :productType => 'Book',
        :productName => 'The Client',
    :productId => 'CRSUS113246A',
        :productCategory => 'Crime And Suspense',
        :productSubcategory => 'Vintage Books',  
        :productPrice => '45.50 USD',
        :productAuthor => OpenStruct.new(
                :authorFirstName =>'John Grisham',
            :authorMiddleName=> 'Willburt',
            :authorContact => '19876648981')),
:catalogProductInfo => OpenStruct.new(
        :productType => 'Pen',
        :productName => 'Reynolds',
        :productId => 'PRREY546647',
        :productCategory => 'Misc. Stationary',
        :productSubcategory => 'Stationery Items',  
        :productPrice => '3.00 USD',
        :productManufacturer => 'Reynolds Inc.',
        :productAuthor => OpenStruct.new(
            :authorFirstName => 'Ryan Reynolds',
            :authorMiddleName => 'William',
            :authorContact => '16577589898')),
:catalogListType => 'ProductCollection',
:catalogListSource => 'Web'
),
:catalogVerificaitionLog => OpenStruct.new(
        :catalogVerificationStatus => 'Verified',
    :catalogVerificationDateTime => '2012-03-12T13:00:15+5:30',
    :catalogVerificationId => '64774A',
    :catalogVerificationRequestedBy => 'user_121')
)] 
```

我不确定 OpenStruct 是否可行，因为它缺乏嵌套功能。有没有其他方法可以使用 JSon 来实现这一点而没有任何突出的限制？请更正我之前的代码。

要查看这个较早的问题，如何使用 Nokogiri 在 NodeSet 中添加子节点单击 [这里] (http://stackoverflow.com/questions/10300095/how-to-add-child-nodes-in-nodeset-using-nokogiri)

我看到以下 OpenStruct 的问题......

我想访问第一个“catalogProductInfo”的“productType”，我说“collection.catalogList.catalogProductInfo.productType.content”，我收到以下错误

```
"undefined method `productType' for # (NoMethodError) 
```

我被困在这里，如果这种情况想出去。如果无法使用 OpenStruct 组织数据。这可以使用 JSON 来完成吗？? 还建议我做 Nokogiri 和 JSon 的方法。帮帮我。

# virtualization - What does it mean to add a virtual disk image to a virtual CD/DVD drive on a virtual machine?

> ID：11178172
> 
> 赞同：0
> 
> 时间：2012-06-24T14:15:25.620
> 
> 标签：virtualization, virtual-machine, virtualbox, disk

I'm currently installing virtual box, and one of the steps requires that I add a disk image (in my case, an ubuntu ISO file) to a virtual CD/DVD drive listed under the virtual machines Storage.

From what I understand the ISO basically contains all the contents of ubuntu. And once I've allocated enough disk space for my virtual machine, I need to install ubuntu by reading from this ISO file into my virtual hard drive.

So- is that the reason why I need to add the ISO image to my dvd/cd? Because it acts as an ACTUAL cd/dvd? My understanding is limited - I just want more clarification about this process!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T14:28:44.150

.iso files are images of the entire content of a CD. They are meant to be burnt on a actual CD. But there are now several programs allowing to read the content of an .iso file without actually writing the data to a CD.

You're right in everything you said. Virtual Box simulates (almost) everything of a real computer: disks, drives, memory, USB ports... The drive is initially empty, i.e. has no CD/DVD inside. Then you choose which CD should be simulated inside the drive. It can be either the actual CD on your physical machine, or a CD image, i.e. a .iso file. When some program inside the virtual machine wants to access the data written on what it thinks is the CD, Virtual Box reads the .iso file and answer the program, as if the data came from a CD.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T14:29:38.290

Virtual box uses virtual drives. These drives act as 'actual' drives on the guest OS, in your case Ubuntu would be the guest OS.

When you create a new virtual machine, it is clean, nothing has been installed yet.

In order to install Ubuntu on the machine you will need to load the ISO image into the virtual CD/DVD drive to install it.

Note: A ISO is a 'disk image' that contains the entire contents of a disk in a single file, that can be loaded into virtual drives, or burned to physical CD/DVDs

Here is a small tutorial on install Ubuntu to virtual box, the screen shots may differ a little bit, but the process will generally be the same for you.

[http://osxdaily.com/2012/03/27/install-run-ubuntu-linux-virtualbox/](http://osxdaily.com/2012/03/27/install-run-ubuntu-linux-virtualbox/)

# php - 发送多个 XMLHttpRequest 时，仅最后一个请求返回成功

> ID：11178177
> 
> 赞同：4
> 
> 时间：2012-06-24T14:16:02.603
> 
> 标签：php, ajax, jquery, xmlhttprequest

我有一个为用户动态创建（使用 jQuery）输入框的页面。然后，用户可以在他创建的每个输入框中输入值。单击保存按钮后，将调用一个 javascript 函数，该函数遍历用户创建的所有输入框，并使用 XMLHttpRequest 将这些值发送到 process.php 文件，该文件将这些值插入数据库。

如果我一次只发送一个请求，此代码可以正常工作。但是，如果我循环它并在每次迭代时从每个框发送值（意味着使用循环发送多个请求），则只有最后一个请求会成功。除了最后一个调用之外的所有其他调用都被中止（使用萤火虫找到它）。

知道为什么会这样吗？

我的代码：

```
<script>
function saveTimeSlots(){
    var ajaxRequest;
    try{
        ajaxRequest = new XMLHttpRequest();
    }
    catch(e){
        alert('Issue with browser.')
    }
    ajaxRequest.onreadystatechange = function(){
        if( ajaxRequest.readyState==4 ){
            alert(ajaxRequest.responseText); //This returns empty except for last call
        }
    }
    var timeSlots = document.getElementById('formSlots').childNodes;
    var date = $.datepicker.formatDate('dd-mm-yy', new  Date($('#datepicker').datepicker("getDate")));
    for(j=0; j<timeSlots.length; ++j){
        var time = timeSlots[j].getElementsByTagName("input")[0].value;
        var status = 1;
        var queryString = "?date=" + date + "&time=" + time + "&status=" + status;
        ajaxRequest.open("GET", "process.php" + queryString, true);
        ajaxRequest.send(null);
    }
}
</script>
<input type="button" value="Save time slots" class="custom-button" onclick="saveTimeSlots()"/> 
```

以下是process.php的代码

```
<?php
mysql_connect( $dbhost,$user,$pwd );
mysql_select_db( $dbase ) or die( mysql_error() );

$date = mysql_real_escape_string( $_GET['date'] );
$time = mysql_real_escape_string( $_GET['time'] );
$status = mysql_real_escape_string( $_GET['status'] );

$query = "INSERT INTO time_slots (`date`,`time`,`status`) VALUES ('" . $date . "','" . $time . "'," . $status . ")";
echo $query;
if( mysql_query( $query ) ){
    echo "Success";
}else{
    echo mysql_error();
}
mysql_close();
}
?> 
```

这是 Firebug 显示的内容：

```
GET http://localhost/process.php?date=24-06-2012&time=1&status=1 Aborted
GET http://localhost/process.php?date=24-06-2012&time=2&status=1 Aborted            
GET http://localhost/process.php?date=24-06-2012&time=3&status=1 200 OK 31ms 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-24T14:24:44.260

您不能将 的实例`XMLHttpRequest`用于多个请求。为每个请求创建一个新实例。

由于您已经在使用 jQuery，我建议使用[`$.ajax`](http://api.jquery.com/jQuery.ajax/)(或[`$.get`](http://api.jquery.com/jQuery.get/)) 来获取请求。

```
function saveTimeSlots(){
    $('#formSlots').children().each(function() {
        var time = $(this).find('input:first').val();
        var status = 1;
        var queryString = "?date=" + date + "&time=" + time + "&status=" + status;
        $.get("process.php" + querystring, function(responseText) {
            alert(responseText);
        });
    });
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-24T14:24:45.140

您`XMLHttpRequest`对所有请求使用相同的对象，因此一旦您启动请求，下一个请求就会启动另一个请求，这会中止前一个请求。

`XMLHttpRequest`为每个请求创建一个新对象，或者只使用[jQuery 的 ajax](http://api.jquery.com/jQuery.ajax/)。拥有 jQuery 而不使用它是不好的。

# python - Numpy 数组广播规则

> ID：11178179
> 
> 赞同：26
> 
> 时间：2012-06-24T14:16:10.073
> 
> 标签：python, numpy, array-broadcasting

我在理解 Numpy 中数组广播的规则时遇到了一些麻烦。

显然，如果您对两个具有相同尺寸和形状的数组执行逐元素乘法，一切都很好。此外，如果将多维数组乘以标量，它也可以工作。这个我明白。

*但是如果你有两个不同*形状的 N 维数组，我不清楚广播规则到底是什么。该[文档/教程](http://www.scipy.org/EricsBroadcastingDoc)解释说：*为了广播，操作中两个数组的**尾轴**大小必须相同或其中之一必须是一个。*

好的，所以我假设通过*尾随轴*他们指的`N`是`M x N`数组中的。那么，这意味着如果我尝试将两个具有相同列数的二维数组（矩阵）相乘，它应该可以工作吗？除了它不...

```
>>> from numpy import *
>>> A = array([[1,2],[3,4]])
>>> B = array([[2,3],[4,6],[6,9],[8,12]])
>>> print(A)
[[1 2]
 [3 4]]
>>> print(B)
[[ 2  3]
 [ 4  6]
 [ 6  9]
 [ 8 12]]
>>> 
>>> A * B
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ValueError: shape mismatch: objects cannot be broadcast to a single shape 
```

由于两者`A`都有`B`两列，我原以为这会起作用。所以，我可能在这里误解了“尾轴”一词，以及它如何应用于 N 维数组。

有人可以解释为什么我的示例不起作用，以及“尾随轴”是什么意思吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-24T14:25:05.157

好吧，在链接的文档页面上解释了尾轴的含义。如果您有两个具有不同维度编号的数组，例如 one`1x2x3`和 other `2x3`，那么您只比较尾随的公共维度，在这种情况下是`2x3`。但是，如果您的两个数组都是二维的，那么它们对应的大小必须相等或者其中一个必须是`1`. 数组具有大小`1`的维度称为奇异维度，并且可以沿它们广播数组。

在你的情况下，你有一个`2x2`and `4x2`and `4 != 2`and not `4`or `2`equals `1`，所以这不起作用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-01-10T21:09:46.440

来自[http://cs231n.github.io/python-numpy-tutorial/#numpy-broadcasting](http://cs231n.github.io/python-numpy-tutorial/#numpy-broadcasting)：

> 一起广播两个数组遵循以下规则：
> 
> 1.  如果数组的秩不同，则在较低秩数组的形状前面加上 1，直到两个形状的长度相同。
>     
>     
> 2.  如果这两个数组在维度上具有相同的大小，或者如果其中一个数组在该维度上的大小为 1，则称这两个数组在维度上是兼容的。
>     
>     
> 3.  如果数组在所有维度上都兼容，则可以一起广播。
> 4.  广播后，每个数组的行为就好像它的形状等于两个输入数组形状的元素最大值。
> 5.  在一个数组的大小为 1 而另一个数组的大小大于 1 的任何维度中，第一个数组的行为就好像它是沿该维度复制的一样
> 
> 如果此解释没有意义，请尝试阅读[文档](http://docs.scipy.org/doc/numpy/user/basics.broadcasting.html)或[此解释中的解释](https://scipy.github.io/old-wiki/pages/EricsBroadcastingDoc)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-24T07:15:29.043

我们应该考虑关于广播的两点。第一：什么是可能的。第二：有多少可能的事情是由numpy完成的。

我知道这可能看起来有点混乱，但我会通过一些例子来说明这一点。

让我们从零开始。

假设我们有两个矩阵。第一个矩阵有三个维度（命名为 A），第二个有五个维度（命名为 B）。numpy 尝试匹配最后/尾随维度。所以 numpy 不关心 B 的前两个维度。然后 numpy 将这些尾随维度相互比较。并且当且仅当它们相等或其中一个为 1 时，numpy 会说“好的，你们两个匹配”。如果这些条件不满足，numpy 会“抱歉……这不是我的工作！”。

但是我知道您可能会说比较最好以可设计时可以处理的方式进行（4 和 2 / 9 和 3）。您可能会说它可以通过整数复制/广播（示例中为 2/3）。我同意你的看法。这就是我开始讨论的原因是区分什么是可能的和什么是 numpy 的能力。

# c - 在 eclipse make 文件项目中包含标准 c 库

> ID：11178189
> 
> 赞同：1
> 
> 时间：2012-06-24T14:17:28.757
> 
> 标签：c, eclipse, embedded

我正在研究具有硬件特定库的嵌入式系统。我正在使用eclipse制作文件项目。在 build/makefile 中包含了特定的硬件文件，但我想在我的项目中包含标准 c 库我该怎么做，请给我一个出路。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T14:38:50.273

试试这个：点击项目->属性->C/C++ 通用->路径和符号（见下面的截图）。

![在此处输入图像描述](../Images/0fda9549417cdadc6628f14521c42606.png)

现在选择左侧面板上的语言（`GNU C`可能）并输入您需要的包含目录。

# javascript - Rangy SurroundContents 替换

> ID：11178191
> 
> 赞同：3
> 
> 时间：2012-06-24T14:17:43.633
> 
> 标签：javascript, rangy

我正在考虑在网页上实现一个简单的 2 按钮切换，以在具有 H1 标题和 H2 之间切换一些选定的文本。环绕内容方法效果很好，但是我在尝试替换现有的父标记元素节点时遇到了问题。我已经尝试了各种尝试做到这一点的方法，但没有取得太大的成功。

基本功能如下。使用相同的选定文本并一个接一个地运行这两个函数将产生一些输出，如下所示：

选择“测试文本”的文本后，然后选择 H1 选项： `<h1>test text</h1>`

如果再次选择相同的文本并且这次按下 H2 选项：`<h1><h2>test text</h2></h1>`

```
function surroundSelectedWithH1() {
    var element = document.createElement("h1");

    // removed code to setup range to save space
    if (range) {
        range.surroundContents(element);
    }
}

function surroundSelectedWithH2() {
    var element = document.createElement("h2");

    // removed code to setup range to save space
    if (range) {
        range.surroundContents(element);
    }
} 
```

这很好，并且可以预期，但我真的在寻找一种方法来删除原始父标题元素，以便标题元素不会嵌套（例如 - 文本被 h1 或 h2 包围，而不是两个都）。我确实尝试访问 parentNode 等，但没有设法使这种方法发挥作用。我已经尝试查看以下 parentElement 建议[使用 rangy 库获取所选文本的父节点](https://stackoverflow.com/questions/10560155/getting-the-parent-node-for-selected-text-with-rangy-library)但是我无法让 rangy 将更改的父元素写回 DOM 或有一种令人满意的方式来确定 DOM 中的位置对象是为了替换它。它很快就变成了一种笨拙的方法，必须有更好的选择。

我知道 rangy CssApplier 模块可以处理这种情况，但我需要使用实际元素而不是 css。

我还注意到，在使用 rangy 进行文本编辑器实现的 raptor 编辑器上，在应用标题时会遇到完全相同的问题：[http ://www.raptor-editor.com/demo](http://www.raptor-editor.com/demo)

这个问题也很相关，但据我所知，execCommand 无法处理这个特定的元素问题 - [Javascript: how to un-surroundContents range](https://stackoverflow.com/questions/4479151/javascript-how-to-un-surroundcontents-range)

亲切地接受任何帮助或建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-11-07T14:20:11.083

尝试：

```
highlighter.unhighlightSelection() 
```

# c - OpenGL how to set a shader texture from the program (sampler2D)

> ID：11178196
> 
> 赞同：2
> 
> 时间：2012-06-24T14:18:18.100
> 
> 标签：c, opengl, shader, d

I want to combine 2 textures in a GLSL shader to 1.

the problem is that I fail to set the sampler2D in the shader from my program. (the shader/program compiles correctly, the textures load correctly, the vertex shader is correct too) I tried it with the following code from a tutorial:

```
glUniform1i(program.getUniformLocation("Texture0"), 0);
glUniform1i(program.getUniformLocation("Texture1"), 1);

//texture 0, first texture
glActiveTexture(GL_TEXTURE0);
glBindTexture(GL_TEXTURE_2D, colorTexture.handle);

//texture 1, other texture
glActiveTexture(GL_TEXTURE1);
glBindTexture(GL_TEXTURE_2D, normalTexture.handle); 
```

the fragment shader code looks like this

```
uniform sampler2D Texture0;
uniform sampler2D Texture1;

void main(void)
{
    vec4 color = texture2D(Texture0, vec2(gl_TexCoord[0]));
    vec4 normal = texture2D(Texture1, vec2(gl_TexCoord[0]));
    gl_FragColor = normal + color;
} 
```

it gets drawn with

```
glUseProgram(program.handle);
glColor3f(1, 1, 1);
    glBegin(GL_QUADS);
    glTexCoord2f(0, 0);
    glVertex3f(0, 0, 0);
    glTexCoord2f(1, 0);
    glVertex3f(500, 0, 0);
    glTexCoord2f(1, 1);
    glVertex3f(500, 500, 0);
    glTexCoord2f(0, 1);
    glVertex3f(0, 500, 0);
    glEnd(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T19:41:30.113

try changing the second sampler to use gl_TexCoord[1]

```
uniform sampler2D Texture0;
uniform sampler2D Texture1;

void main(void)
{
    vec4 color = texture2D(Texture0, vec2(gl_TexCoord[0]));
    vec4 normal = texture2D(Texture1, vec2(gl_TexCoord[1]));
    gl_FragColor = normal + color;
} 
```

# ruby-on-rails - Rails 3，指南针不适用于@mixin

> ID：11178205
> 
> 赞同：0
> 
> 时间：2012-06-24T14:19:17.527
> 
> 标签：ruby-on-rails, compass-sass, mixins

我有两个带有以下示例代码的 .scss 文档：

表.scss：

```
@mixin ftable {
    table {
    font-family: "Lucida Sans Unicode", "Lucida Grande", Sans-Serif;
    font-size: 12px;
    margin: 45px;
    width: 480px;
    text-align: left;
    border-collapse: collapse;
    }
} 
```

page.scss：

```
#projects-listing {
    @include ftable;
} 
```

从 application.scss 中按此顺序需要它们：

```
 *= require ./tables
 *= require_tree ./partials 
```

其中 partials 目录包含我的 page.scss 文件。

当我加载页面时，我得到一个未定义的 mixin ftable 异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T12:46:08.067

如果你想使用 Sass mixins（包括 compass）你需要使用 sass`@import`函数而不是 manifest 样式`require`函数。

试试这个`application.css.scss`：

```
@import 'tables'
@import 'page'
@import 'any other files you have' 
```

顺序很重要——那些带有 mixin 的文件需要在使用 mixin 的文件之前先被导入。

# php - Empty value clause for a string not working

> ID：11178210
> 
> 赞同：0
> 
> 时间：2012-06-24T14:20:24.203
> 
> 标签：php, string

I am trying to get value with ajax and the values are in form of string, but the problem is when I'm trying to use a condition of if value empty then return this or else do that

My code is

```
if (empty($title) || empty($thumbnail) || empty($link))
{
    echo "404";
}
else
{
    some custom line
} 
```

My problem is that a 404 is returned even if the value of any one of them (`title`, `thumbnail`, or `link`) is not empty. Can any one point me where I am wrong?

Here's how I am getting value from ajax:

```
$title = mysql_real_escape_string($_REQUEST['title']);
$thumbnail = mysql_real_escape_string($_REQUEST['thumbnail']);
$link = mysql_real_escape_string($_REQUEST['link']); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T14:45:16.617

首先我建议你不要使用空，因为它有一些特定的行为。

第二：我不明白你为什么使用mysql_real_escape_string，你必须查询数据库？

此外，我猜您（正如@havelock 指出的那样）如果没有设置任何值，则想要获得 404。

我是为了这个：

```
if($title && $thumbnail && $link){
    //all fine..
}
else 404 
```

# .net - 同时使用 HttpClient 是否安全？

> ID：11178220
> 
> 赞同：183
> 
> 时间：2012-06-24T14:22:08.197
> 
> 标签：.net, c#-4.0, concurrency, dotnet-httpclient

在我能找到的所有用法示例中`HttpClient`，它用于一次性调用。但是，如果我有一个持久的客户端情况，可以同时发出多个请求怎么办？`client.PostAsync`基本上，一次针对同一实例调用 2 个线程是否安全`HttpClient`。

我并不是真的在这里寻找实验结果。作为一个工作示例可能只是一个侥幸（并且是一个持久的），而失败的示例可能是一个错误配置问题。理想情况下，我正在为 HttpClient 中的并发处理问题寻找一些权威的答案。

* * *

## 回答 #1

> 赞同：182
> 
> 时间：2012-06-24T14:25:53.510

[根据 Microsoft Docs](https://docs.microsoft.com/en-us/dotnet/api/system.net.http.httpclient#remarks)，自 .NET 4.5 以下实例方法**是线程安全的**（感谢@ischell）：

```
CancelPendingRequests
DeleteAsync
GetAsync
GetByteArrayAsync
GetStreamAsync
GetStringAsync
PostAsync
PutAsync
SendAsync
PatchAsync 
```

* * *

## 回答 #2

> 赞同：102
> 
> 时间：2012-11-15T23:44:50.193

这是 Henrik F. Nielsen 关于 HttpClient 的另[一篇文章](https://docs.microsoft.com/en-us/archive/blogs/henrikn/httpclient-httpclienthandler-and-webrequesthandler-explained)，他说：

"*默认的 HttpClient 是开始发送请求的最简单方式。**单个 HttpClient 可用于同时发送任意数量的 HTTP 请求，**因此在许多情况下，您只需创建一个 HttpClient，然后将其用于所有请求。* ”

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2012-06-25T14:29:41.790

找到 Henrik F. Nielsen（HttpClient 的主要架构师之一）的一篇[MSDN 论坛帖子](http://social.msdn.microsoft.com/Forums/en-US/netfxnetcom/thread/4e12d8e2-e0bf-4654-ac85-3d49b07b50af/)。

快速总结：

*   > 如果您有相关的请求（或不会相互影响），那么使用相同的 HttpClient 很有意义。

*   > 一般来说，我会建议尽可能多地重用 HttpClient 实例。

# android - 从android中的XML文件中获取特定细节

> ID：11178225
> 
> 赞同：0
> 
> 时间：2012-06-24T14:23:06.557
> 
> 标签：android, xml, xml-parsing

我正在开发 android 中的 CRM 应用程序，其中，我在列表视图中显示所有联系人的详细信息。现在，我的要求是当我单击列表中的特定项目时，它应该只显示有关所选联系人的详细信息，例如姓名、地址、电子邮件等。数据来自我正在解析的 XML 文件使用 SAX 解析器。如何查询 XML 以获取选定的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T14:33:16.523

您正在填写`ListView`使用`Adapter`权吗？现在您可以在 中的选定视图中获取该项目`ListView`并将该项目传递给`Activity`.

例如，在您的`Adatper`班级内实现`onItemClickListener`：

```
public void onItemClick(AdapterView<?> a, View v, int position, long l) {
    // Remembers the selected Index
    Data item =getItem(position);
    Intent intent = new Intent(getApplicationContext(), DetailedActivity.class);
    intent.put("object",item);
    startActivity(intent);
} 
```

注意：项目“数据”类应该实现`Parsable`接口，以便它可以传递给`Activity`您的`DetailedActivity` `onCreate`方法获取该对象并`UI`根据其值更新。

# ruby - 从外部命令获取 ANSI 彩色输出

> ID：11178228
> 
> 赞同：0
> 
> 时间：2012-06-24T14:23:37.410
> 
> 标签：ruby, ansi-colors

我正在编写一个`watchr`运行我的 PHP 单元测试的小脚本。

当前脚本使用运行测试`system()`并将它们显示为彩色。

我正在尝试添加`libnotify`功能，但为此我需要解析输出并匹配正则表达式，以便通知将显示为绿色或红色。

`system()`不返回输出，`%x`确实返回，但`puts p`不显示颜色，我需要快速查看哪个测试失败。一种选择是运行两次测试 - 一次用于在终端窗口中显示，第二次用于检查要显示的通知，但我宁愿避免它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T14:49:52.633

`puts`确实显示颜色。问题是当您使用`%x`PHP 测试运行程序运行时，很可能会关闭彩色输出，因为它认为它没有在终端下运行。

`run_php_test | less`如果你在 shell 中做同样的事情。要修复它，您需要在 PHP 测试运行器上强制彩色输出。

**编辑**

运行子进程的最简单方法`pty`：

```
require 'pty'
puts PTY.spawn('run_php_test')[0].read 
```

# php - 如何使用通过 jQuery 的 AJAX 发布请求 + php 发送的数组？

> ID：11178232
> 
> 赞同：2
> 
> 时间：2012-06-24T14:23:49.720
> 
> 标签：php, javascript, jquery, ajax, arrays

我正在尝试在 ajax 请求中传递一个数组，但显然它不起作用......

```
 $.post("process.php", array,
            function(data) {
                document.getElementById("output").innerHTML = JSON.parse(data);
            }); 
```

我的问题是，如何使用流程文件中发送的数据？
数组是这样构建的：`[key (0/1/2...)] => ["prod_id"]`. id 不一样。
我在某处使用`$_POST["key"];`会工作，但它没有。

如果我可以**按原样**在进程文件中获取数组，那就更好了。

`process.php`（真的很基本 - 只是为了检查它是否工作。）：

`<?php print($_POST["test"]); ?>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T14:26:51.240

您需要构建一个数组元素的对象。例如：

你也可以试试：

```
{ 'key[]': [1, 2, 3] } 
```

**或者**

```
{ key: [1,2,3] } 
```

阅读更多关于**[$.post()](http://api.jquery.com/jQuery.post/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T14:27:30.453

尝试通过`{data: array}`而不是`array`. AJAX 调用需要一个对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T14:34:58.950

如果要传递数组，则必须“准备”密钥，如下所示：

```
{'key[]' : ['value1', 'value2', 'value3']} 
```

当您想在表单中传递数组并将名称属性设置为“key []”时，您会采用同样的方式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-24T14:48:58.813

为了在 php 中接收数据，您需要发送键/值对，但是您只发送一个值。

您在 php 中收到`$_POST[key]`将返回该键的值。

JS：

```
$.post("process.php", {myAray: array}, function(data) {
            $("#output").html(data);
}); 
```

php

```
 $array= $_POST['myArray']; 
```

要从 php 返回这个数组作为文本只是为了测试你的 ajax 可以使用`var_dump( $_POST)`或`var_dump($array);`

如果您打算从服务器接收 JSON 响应，则不需要使用 JSON.parse ，jQuery 将在内部解析 json。但是，您需要将“json”作为 dataType 参数添加到 $.post

```
$.post("process.php", {myAray: array}, function(data) {
            /* loop over json here*/
},'json'); 
```

# r - 如果在另一个数据框中标记，则替换数据框中的值

> ID：11178236
> 
> 赞同：1
> 
> 时间：2012-06-24T14:24:15.777
> 
> 标签：r, loops, merge, replace

我在一个名为“值”的数据框中有一些值

IE：

```
Sam Ned Ted Ann
500 430 57  212
410 265 69  341
189 554 153 457
236 311 590 271
50  568 234 442 
```

以及单独的数据框“标志”中的一些质量控制标志

```
Sam$F   Ned$F   Ted$F   Ann$F
1   1   1   0 
0   0   1   0
0   0   1   0
0   0   0   0
0   0   1   0 
```

如果标志中的等效条目是 1，我想用 NA 替换“值”中的数字，即导致以下结果

```
Sam Ned Ted Ann
NA  NA  NA  212
410 265 NA  341
189 554 NA  457
236 311 590 271
50  568 NA  442 
```

这个问题与这个问题非常相似：[Replacecing certain values in data.frame in R](https://stackoverflow.com/questions/8594747/replacing-certain-values-in-data-frame-in-r)

这已经通过“合并表”解决方案巧妙地解决了。

除了我有很多数据列可以执行此操作，而不仅仅是一个。但是，我应该能够获得相同的“合并表”解决方案来为我工作。

要合并 2 个表（并将 1 替换为 NA，我使用了以下

```
F2 <-Flags
F2[F2 == "1"] <- "NA"
# Create identical column names for values and F2 for matching
samples <-colnames(Rvalues)
colnames(F2) <-samples
#Create an ID column for F2 and values
F2$ID <- c(1,2,3,4,5)
Rvalues$ID <- c(1,2,3,4,5)
out2 <- merge(Rvalues, F2, by = c("ID"), all.x = TRUE) 
```

生成的 out2 数据帧如下：

```
ID  Sam.x   Ned.x   Ted.x   Ann.x   Sam.y   Ned.y   Ted.y   Ann.y 
1   1   500 430 57  212 NA  NA  NA  0
2   2   410 265 69  341 0   0   NA  0
3   3   189 554 153 457 0   0   NA  0
4   4   236 311 590 271 0   0   0   0
5   5   50  568 234 442 0   0   NA  0 
```

所以我想使用上面链接中发布的解决方案（由 Chase 发布），在一个循环中遍历每个样本的列。

我尝试了以下方法：

```
for [i in samples]
{
out3 <- transform(out2, [i]$new = ifelse(is.na([i].x), [i].y, [i].x), [i].x = NULL, [i].y = NULL)} 
```

它不工作（错误消息

```
"Error: unexpected '[' in:
"{
out3 <- transform(out2, newdata = ifelse(is.na(["") 
```

所以我有问题，没有 [] 括号它也不起作用。

非常感谢任何修复，非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T14:47:40.107

如果您的 'values' 和 'flags' data.frames 具有相同的维度和列顺序

```
values[flags == 1] <- NA 
```

# java - Jython - 使用 Python 数据结构还是 Java 数据结构更快？

> ID：11178243
> 
> 赞同：6
> 
> 时间：2012-06-24T14:24:46.277
> 
> 标签：java, python, jython

我试图了解是否以及在什么情况下应该使用 Python 类和/或 Java 类。

如果制作一种专业的字典/地图类，应该从 Python 的 dict 或 Java 的 HashMap 或 TreeMap 等中获得一个子类？

使用 Python 是很诱人的，因为它们更简单、更性感。但是，Jython 运行速度相对较慢的一个原因（在我看来是这样）似乎与动态类型有关。我最好说我对这一切都不是很清楚，也没有在夜间研究 Python/Jython 解释器代码，这让我感到羞耻。

无论如何，我突然想到 Java 类可能运行得更快，因为代码可能需要做的工作更少。OTOH 也许它必须做更多。或者也许里面什么都没有。有人知道吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T14:29:27.400

使用 Jython 的目的是您可以编写 Python 代码并让它在 JVM 上运行。不要通过将 Python 变成 Java 来破坏这一点。

如果 --***如果***-- 事实证明您的数据结构太慢，您可以直接将其替换为 Java 版本。但那是针对编程的优化阶段的，稍后会出现。

* * *

我想我应该试着回答你的问题。我*猜想*使用本机 Java 结构会更快（因为 JVM 可以比 Python 解释器推断出更多关于它们的信息），但这可能会被与 Jython 接口所需的额外处理抵消。只有测试会告诉你！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-24T16:30:22.140

通常，决定不应该是速度之一——无论如何，Python 类将根据 Java 类来实现，即使它们没有从它们继承。因此，速度应该大致相当，并且每个操作最多可以节省几个方法调用。

更大的问题是你打算在课堂上*做什么。*如果您将它与 Python API 一起使用，您将需要使用 Python 类型，或者类似它们的行为，这样*您*就不必执行实现整个 Mapping 协议的工作（只有您的类更改的位）。如果您使用 Java API，您肯定需要满足静态类型检查 - 这意味着您需要从 Java 的类继承。

如果这在您的情况下不容易回答，请从 Python 开始，因为您（正确 ;-) 发现它们“更简单、更性感”。如果您的课程没有超出您的项目边界，那么如果速度真的成为问题，那么以后更改应该是微不足道的 - 那时，您可能还会考虑诸如“它是否有助于实现它”之类的问题完全在 Java 级别？” 您希望已经认识到现在要考虑的优化是过早的。

# google-maps - 谷歌地图网站KML轨迹显示问题

> ID：11178248
> 
> 赞同：0
> 
> 时间：2012-06-24T14:25:14.593
> 
> 标签：google-maps, kml, kmz

我正在将记录的 GPS 轨迹转换为 KML/KMZ 文件，它们会在 Google 地球中正确显示。*但是，在 Google 地图网站*中打开相同的 KML 文件时，我会得到几千公里长的奇怪直线。

KML 下载： http: [//www.indunet.it/stackexchange/test.kml](http://www.indunet.it/stackexchange/test.kml)

直接链接到谷歌地图网站： [https ://maps.google.com/maps?q=http:%2F%2Fwww.indunet.it%2Fstackexchange%2Ftest.kml&hl=de&sll=37.230328,-95.712891&sspn=52.421131,114.169922&t =h&z=4](https://maps.google.com/maps?q=http:%2F%2Fwww.indunet.it%2Fstackexchange%2Ftest.kml&hl=de&sll=37.230328,-95.712891&sspn=52.421131,114.169922&t=h&z=4)

这是我的计算机上的 KML 文件的样子：

![在此处输入图像描述](../Images/53dc41791c683b456fa457773368bbc9.png)

我使用 FF、Chrome 和 IE 得到相同的结果，所以我猜这与生成的 KML 文件有关，但我不知道出了什么问题..

奇怪的是，放大到正确的区域（线的左上端，即意大利北部）会显示一些类似于原始轨道的轮廓：

![在此处输入图像描述](../Images/deab4db5eeb5a20a4bb4955e5e916b15.png)

在 Google 地球中正确显示（相同的 KML 文件）：

![在此处输入图像描述](../Images/212dc44ce1566c31b3b9c4a687c7b2c9.png)

有任何想法吗？

PS：我导出的所有曲目都得到了类似的结果。但是，标记总是正确显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T15:30:27.060

您的 kml 具有指定的坐标：11.30968602,46.35330003，

如果我添加第三个坐标，它会起作用： [11.30968602,46.35330003,0](http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmltest_linktoB.html?filename=http://www.geocodezip.com/indunet_test_kmlA.xml) [[在谷歌地图上](https://maps.google.com/maps?q=http%3a%2F%2Fwww.geocodezip.com%2Findunet_test_kmlA.xml&hl=en&ll=46.313976,11.25927&spn=0.142281,0.220757&sll=37.588909,-87.337822&sspn=0.005135,0.006899&t=m&z=120)]

或者如果我在最后删除逗号，它可以工作： [11.30968602,46.35330003](http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmltest_linktoB.html?filename=http://www.geocodezip.com/indunet_test_kmlB.xml) [[在谷歌地图上](https://maps.google.com/maps?q=http%3a%2F%2Fwww.geocodezip.com%2Findunet_test_kmlB.xml&hl=en&ll=46.313976,11.25927&spn=0.142281,0.220757&sll=37.588909,-87.337822&sspn=0.005135,0.006899&t=m&z=12)]

# c# - ThreadPool.QueueUserWorkItem 中的 AgrumenNullException

> ID：11178249
> 
> 赞同：0
> 
> 时间：2012-06-24T14:25:23.157
> 
> 标签：c#, threadpool, argumentnullexception, queueuserworkitem

我有一种方法，它经常被不同的踏板调用。有时我在被调用时得到一个 AgrumenNullException `ThreadPool.QueueUserWorkItem(display(angebot), null);`，说明参数`callBack`（第一个参数）为空。

我究竟做错了什么？

```
 public class ai : UserControl
{
    //...
    public void Display(Angebote angebot)
    {
        lock (_syncObj) { _current = angebot; }
        ThreadPool.QueueUserWorkItem(display(angebot), null);
    }
    private WaitCallback display(Angebote angebot)
    {
        // doing something
    }
    //...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T14:34:12.600

将按照返回的委托`ThreadPool.QueueUserWorkItem`中定义的方式完成工作。我推测您的方法有时会返回 null。`WaitCallback``display(Angebote)``display`

您的意图是`display(angebot)`在后台线程中执行，还是该方法识别应该执行什么方法？

如果您认为您的显示方法应该在后台线程中执行：

```
private WaitCallback display(Angebote angebot)
{
    // doing something in a background thread
} 
```

然后您的代码应如下所示：

```
ThreadPool.QueueUserWorkItem(display, angebot);

private void display(object state)
{
    Angebot angebot = (Angebot)state;
    // doing something in a background thread
} 
```

编辑：如果是后者在`display`确定要执行的后台线程，那么也许你有这样的东西：

```
private WaitCallback display(Angebote angebot)
{
    if (angebot.Something)
    {
         return new WaitCallback(BackgroundTask1);
    }
    else
    {
        return null;
    }
} 
```

但是由于您尚未发布该代码，因此我不确定。在这种情况下，返回`null`是无效的`ThreadPool.QueueUserWorkItem`。

# ruby-on-rails - 将PDF转换为具有透明背景的PNG

> ID：11178251
> 
> 赞同：4
> 
> 时间：2012-06-24T14:25:38.643
> 
> 标签：ruby-on-rails, heroku, imagemagick, transparency, rmagick

我们有一个 Ruby on Rails 应用程序，它需要将 PDF 转换为具有透明背景的 PNG。我们正在使用 rmagick 2.13.1。在我们的开发机器上，下面的代码完全按照我们想要的方式工作。

```
pages = Magick::Image.from_blob(book.to_pdf.render){ self.density = 300 }
page = pages[0]

image_file = Tempfile.new(['preview_image', '.png'])
image_file.binmode
image_file.write( page.to_blob { |opt| opt.format = "PNG" } ) 
```

然后我们保存 image_file，一切都很好。但是，当我们部署到 Heroku 上的评论服务器时，生成的图像具有白色背景。事实证明，Heroku 的 cedar 堆栈使用的是 imagemagick ImageMagick 6.5.7-8 2010-12-02，而我们在开发机器上使用的是 ImageMagick 6.7.5-7 2012-05-08。

我已经在网上搜索了可能适用于旧版本的旧帖子，以尝试找出如何生成透明 PNG。它肯定是受支持的，但是到目前为止，我还无法找出正确的设置组合。

为了验证问题不是 PDF 生成，我下载了在 Heroku 上生成的 PDF，并使用上面的代码（稍作修改以读取文件而不是生成文件）成功地将其转换为透明的 PNG。

我在各种组合中尝试过的一些事情是：

*   `page.matte = true`
*   `page.format = "PNG32"`
*   `page.background_color = "none"`
*   `page.transparent_color = "white"`
*   `page.transparent("white")`

所以，问题是“这可能吗？”。如果是这样，在写出图像之前我需要在图像上设置哪些设置？

我还在研究在 Heroku 上包含一个更新的 Imagemagick 的编译二进制文件。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-02-23T17:49:36.410

这应该不再是问题，因为 Heroku 在其各种堆栈上都有 ImageMagick 版本 6.7-6.9。

# php - 如果我使用缓冲会对性能产生重大影响吗？

> ID：11178256
> 
> 赞同：0
> 
> 时间：2012-06-24T14:26:06.100
> 
> 标签：php, output-buffering

我有一个客户希望对他的脚本进行一些修改。不幸的是，大部分代码都是“ionCubed”。现在我想我可以使用`ob_start($callback)`RegExes 来缓冲输出并更改它。我的问题是这会对脚本的加载产生重大影响吗？或者他们有更好的选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T14:54:15.150

输出缓冲在速度方面应该不会有太大影响，但当然会使用与输出大小一样多的内存。但是，RegEx 可能会对性能产生影响，具体取决于您正在执行的替换类型。尽可能使用`str_replace`。

最后，它总是会成为某种权衡。您应该实现一个基本示例，说明您最终想要做什么，并将性能与未​​修改的版本进行比较。您也可以尝试反汇编编码的脚本并直接更改它，尽管这可能非常具有挑战性，具体取决于您想要执行的替换类型。

另请记住，`str_replace`如果您想进行光学更改，通常更简单地将自定义 CSS 放入其中。

# android - Android：动态设置图像的麻烦

> ID：11178258
> 
> 赞同：1
> 
> 时间：2012-06-24T14:26:32.547
> 
> 标签：android

我正在使用单独的处理程序从资源文件夹动态更改 ImageView 中的图像资源。但有时，图像会最小化。什么可能导致这个问题？看起来它正在被重新绘制到一个非常小的尺寸。什么可能导致这个问题？

```
 int drawableId = -1;
private void loadImageViewWithImageString(ImageView imgView, String image) {

    try {
        Class<drawable> res = R.drawable.class;
        Field field = res.getField(image);
        drawableId = field.getInt(null);
    }
    catch (Exception e) {
        Log.e("MyTag", "Failure to get drawable id.", e);
    }
    handler.post(new Runnable() {

        @Override
        public void run() {
            if(drawableId != -1){
                //wDisplayImgView.setImageDrawable(getResources().getDrawable(drawableId));
                wDisplayImgView.setImageResource(drawableId);

            }else{
                wDisplayImgView.setImageDrawable(getResources().getDrawable(R.drawable.default_weather_icon));

            }
            wDisplayImgView.invalidate();
            subCoreLayout.invalidate();

        }

    });

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T14:37:16.163

`invalidate()`应该在 UI 线程上调用。尝试使用`postInvalidate()`。

# python - AutoKey Python - 如何进行正则表达式替换

> ID：11178260
> 
> 赞同：0
> 
> 时间：2012-06-24T14:26:57.880
> 
> 标签：python, regex, autokey

我正在使用[AutoKey](http://code.google.com/p/autokey/)，并且试图弄清楚如何在字符串中成功地执行正则表达式模式替换。作为测试，我保存了一个如下所示的脚本：

```
NewStr := RegExReplace("abc123123", "123$", "xyz")
keyboard.send_keys(NewStr) 
```

该脚本只返回一个空格，而不是我期望的正则表达式修改字符串。

我是 python 脚本的新手，我从 AutoHotKey 教程中获得了该代码，这与 AutoKey 不同，但 AutoKey 可能是在 AutoHotKey 之后建模的，所以我想我会尝试一下。

我一直遇到的问题是专门为 AutoKey 查找正则表达式示例。我将不胜感激任何可以让我更有效地编写专门与 AutoKey 配合使用的 python 脚本的工具建议。在此之前，我从来不需要学习 python，但是因为 AutoKey 将它用于其脚本引擎，所以我现在愿意学习它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T14:33:31.530

`.sub(replacement, string[, count=0])`

返回通过替换替换替换字符串中最左边的非重叠出现的 RE 获得的字符串。如果未找到该模式，则字符串原封不动地返回。

可选参数 count 是要替换的模式出现的最大数量；count 必须是非负整数。默认值 0 表示替换所有匹配项。

这是使用 sub() 方法的简单示例。它将颜色名称替换为单词 colour：

```
>>> p = re.compile( '(blue|white|red)')
>>> p.sub( 'colour', 'blue socks and red shoes')
'colour socks and colour shoes'
>>> p.sub( 'colour', 'blue socks and red shoes', count=1)
'colour socks and red shoes' 
```

# android - 密度独立

> ID：11178261
> 
> 赞同：1
> 
> 时间：2012-06-24T14:26:59.750
> 
> 标签：android, android-layout, resolution

我的应用程序中心有一个圆形。在 480x800 分辨率下，一切都很完美，但在 320x480 分辨率下，圆圈太小了。我在 drawable-hdpi 文件夹中有一个 circle.png，大小为 470px x 470px。我尝试在 drawable-mdpi 文件夹中添加一个 310x310 的 circle.png，但结果是一样的。这是布局xml的代码：

```
<ImageView
    android:id="@+id/indicator"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:adjustViewBounds="true"
    android:scaleType="fitCenter"

    /> 
```

在每种分辨率下，圆圈与显示器左右边缘的距离是否可能只有几个像素？

[http://imageshack.us/photo/my-images/857/apppv.jpg/](http://imageshack.us/photo/my-images/857/apppv.jpg/)

编辑：我最终以这种方式解决了这个问题：

```
LayoutParams lp = indicator.getLayoutParams();
lp.width = (int) (disW-(disW*0.06));
lp.height = (int) (disW-(disW*0.06));
indicator.setLayoutParams(lp); 
```

//这工作得很好，纵横比是正确的。

EDIT2：这根本不是一个解决方案，因为缩放图像的图像质量真的很差......但我找到了两个教程：http: [//developer.sonymobile.com/wp/2011/06/27/how- to-scale-images-for-your-android%E2%84%A2-application/](http://developer.sonymobile.com/wp/2011/06/27/how-to-scale-images-for-your-android%E2%84%A2-application/) http://android.creid.eu/how-to-resize-an-image-and-preserve-quality/

我必须弄清楚哪个是最好的方法...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T15:50:56.510

如果您作为链接附加的圆形图像是您选择的样式。你可以使用这个xml。并将此可绘制对象称为相对布局或背景，同时在 xml 中指定其布局：高度和布局：宽度。

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" android:shape="oval" >
    <gradient android:startColor="#FFFF0000" android:endColor="#80FF00FF" android:angle="270"/>
</shape> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T17:47:16.060

我的第一个想法是清理你的决议。

您的图像在数字上具有尴尬的尺寸。470 = 2 * 5 * 47。虽然从纯粹的数论角度来看，47 是一个迷人的数字，但在这里它对你没有好处，因为它不能被分解以使你受益。你的另一个维度，310 = 2 * 5 * 31，也好不到哪里去。问题是您正在使用（相对而言）47 和 31 的大素数。我不知道您的主图像是什么样的，但是，假设您只有 470x 和 310x 可以使用，它我的建议是将 470 倍放大，是的，放大到 480 倍，并从中导出所有较小的图像。我的推理如下。

***我的图像尺寸方法***

谷歌最近（好吧，不久前）将他们的文档放在一起，并为 Android 制作了一流的[设计指南](http://developer.android.com/design/index.html)。特别是，页面上有一个关于[支持多个屏幕](http://developer.android.com/guide/practices/screens_support.html)的漂亮小图形：

![Android 密度](../Images/883eb3e682aa0dd946497b5947f41435.png)

我想将这张图总结如下：

*   xdpi : 8 （我知道，我知道，我跳过了'h'。我认为这里很愚蠢）
*   高清：6
*   mdpi：4
*   低密度脂蛋白：3

但我不同意他们使用 mdpi 作为“基线”。相反，我将所有主图像设计为具有至少 24 的倍数的宽度和高度尺寸 - 上述整数的 LCM（最小公倍数）。有时添加一个因子 5 很方便，这将使 LCM 达到 120。如果看起来太大，我可能会使用 72 来代替 - 一个包含一堆 2 和 3 的奇妙数字。

无论如何，当我选择一个“基线”时，我选择的是一个数字，它的因数中有少数 2 和 3，有时是 5。然后我将该基线乘以 2 的某个幂，通常是 4或 8，确定我的主图像的大小。这使我能够以多种不同的方式缩小母版以适应设计需求。顺便说一句，这就是 Apple 等人决定事情的方式。（你有没有注意到 iPhone 的 480 = 2 * 2 * 2 * 2 * 2 * 3 * 5？而对于 320，你将 3 换成另一个 2。）

无论如何，480 的主图像尺寸应该适合你，因为它似乎在绝对尺寸方面符合你的要求（如果我错了，请纠正我），并且一开始的轻微放大不应该花费你任何有损保真度的东西，因为你只是要把它缩小，或者安卓会。

虽然所有这些都不能直接解决你的问题，但我认为它会帮助你一点，并将事情带到一个更灵活的基础上。

所以这是我的第一个想法:)

***使用 LinearLayout 实现百分比***

我的第二个想法是带来一些布局技巧。这会更简单一些，并且会更直接地解决您的“平等边界”问题。

使用根据此伪 XML 组织的 LinearLayout：

```
<LL width=match height=wrap horizontal>
<View width=0 height=0 weight=.05 invisible/>
<ImageView width=wrap height=wrap src=mycircle/>
<View width=0 height=0 weight=.05 invisible/>
</LL> 
```

不可见视图将充当间隔，其宽度将由布局引擎在运行时确定，总计 0.05 + .05 = .1 = 屏幕宽度的 10%，迫使你的圆圈占据剩余的90%。（您当然可以将 .05 调整为您喜欢的任何值。）然后，Android 将选择正确的 ?dpi 并将其强制为屏幕尺寸的 90%。您在选择上述各种图像尺寸时所付出的努力将在缩放图像时获得保真度的红利。

这就是我对解决问题的最佳方法的看法。将奇怪的 47 和 31 素数转换为图像尺寸的因素，以支持附近的数字（48 和 32），它们是低素数 2、3 甚至 5 的组合，然后使用不可见的间隔视图强制 Android 的布局引擎。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T14:30:07.657

您可以为这个简单的图形使用 9 个补丁。这是一个很好的解释什么是9补丁以及如何使用它。 [http://radleymarx.com/blog/simple-guide-to-9-patch/](http://radleymarx.com/blog/simple-guide-to-9-patch/)

# silverlight - 无论滚动如何，如何保持 ScrollViewer 中的元素可见

> ID：11178263
> 
> 赞同：0
> 
> 时间：2012-06-24T14:27:03.247
> 
> 标签：silverlight, xaml, scrollviewer

在 Silverlight 中，是否可以让内部的某些元素`ScrollViewer`保持可见？我的意思是，无论当前滚动位置在哪里，某些元素都应该始终可见。

以这个 XAML 为例（你可以把它放在 XamlPad 的 KaXaml 中）：

```
<Page
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
  <Grid>  
    <ScrollViewer Width="250" Height="100" HorizontalScrollBarVisibility="Visible">
      <StackPanel>
        <Grid Width="350" Height="50">
          <Grid.ColumnDefinitions>
            <ColumnDefinition Width="50" />
            <ColumnDefinition Width="50" />
            <ColumnDefinition Width="50" />
            <ColumnDefinition Width="50" />
            <ColumnDefinition Width="50" />
            <ColumnDefinition Width="50" />
            <ColumnDefinition Width="50" />
          </Grid.ColumnDefinitions>
          <Button Content="1" Grid.Column="0" BorderThickness="2" Width="50" />
          <Button Content="2" Grid.Column="1" BorderThickness="2" Width="50" />
          <Button Content="3" Grid.Column="2" BorderThickness="2" Width="50" />
          <Button Content="4" Grid.Column="3" BorderThickness="2" Width="50" />
          <Button Content="5" Grid.Column="4" BorderThickness="2" Width="50" />
          <Button Content="6" Grid.Column="5" BorderThickness="2" Width="50" />
          <Button Content="X" Grid.Column="6" BorderThickness="2" Width="50" />
        </Grid>
        <Grid Width="350" Height="50">
          <Grid.ColumnDefinitions>
            <ColumnDefinition Width="50" />
            <ColumnDefinition Width="50" />
            <ColumnDefinition Width="50" />
            <ColumnDefinition Width="50" />
            <ColumnDefinition Width="50" />
            <ColumnDefinition Width="50" />
            <ColumnDefinition Width="50" />
          </Grid.ColumnDefinitions>
          <Button Content="1" Grid.Column="0" BorderThickness="2" Width="50" />
          <Button Content="2" Grid.Column="1" BorderThickness="2" Width="50" />
          <Button Content="3" Grid.Column="2" BorderThickness="2" Width="50" />
          <Button Content="4" Grid.Column="3" BorderThickness="2" Width="50" />
          <Button Content="5" Grid.Column="4" BorderThickness="2" Width="50" />
          <Button Content="6" Grid.Column="5" BorderThickness="2" Width="50" />
          <Button Content="X" Grid.Column="6" BorderThickness="2" Width="50" />
        </Grid>
      </StackPanel>
    </ScrollViewer>
  </Grid>
</Page> 
```

无论您向左或向右滚动多少，我都希望将“X”按钮保持在视线范围内。当然，向下或向上滚动时，“X”按钮应跟随滚动。

我并不是说我的 XAML 的结构是理想的，但每一行都是一个数据绑定到不同的项目，所以每一行都是一个数据模板。我不能在滚动查看器中放置一个大网格，或者将列而不是行作为模板（至少，我认为我不能）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T03:26:06.420

不用出汗，只需在这样的面板中将这些元素分层到 Scrollviewer 上即可；

```
<Grid>

  <ScrollViewer>
     ... Scroll Viewer Embedded Stuff ...
  </ScrollViewer>
  <StackPanel Orientation="Horizontal" 
              HorizontalAlignment="Center" VerticalAlignment="Top" Margin="5">
     <Button Content="Button1"/>
     <Button Content="Button1"/>
     <Button Content="Button1"/>
     <Button Content="Button1"/>
     <Button Content="Button1"/>
  </StackPanel>

</Grid> 
```

您甚至可以更进一步，设置一个 EventTrigger 以使您的按钮在 MouseEnter 上可见并在 MouseLeave 上消失，如果您愿意，但这应该可以帮助您入门。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T03:32:45.423

使用 DataGrid 并将 X 按钮作为冻结列可能会更幸运。

# less - 用于 Shopify 主题开发的 LESS CSS 和转义 Liquid 语法

> ID：11178265
> 
> 赞同：3
> 
> 时间：2012-06-24T14:27:11.753
> 
> 标签：less, liquid, shopify

我正在创建 Shopify 主题，并使用 LESS 将 Shopify 需要的样式表编译为 style.css.liquid。一切正常，我开始添加 lquid 过滤器和 if 语句。

当它位于 css 属性中时，我可以使用 Liquid 语法：

```
@brand-colour: ~"{{ settings.brand_colour }}"; 
h1{ color: @brand-colour;} 
```

编译成如下内容：

```
h1 {color: {{ settings.brandcolour }}; 
```

这很好。

我不能做的是在没有像这样的 css 属性之前插入一个流动的语句：

```
{% if settings.full-bg %}
background-color: … 
```

我试过逃避它

```
~"{% settings… %}" 
```

乃至

```
@var: "{% if settings.full-bg %}" 
```

然后运行

```
@{var} 
```

但是我的编译器不喜欢它……</p>

有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T22:31:42.363

如果有人感兴趣，我解决这个问题的方法是将我的 shopify / Liquid 内容放在评论中，如下所示：

```
/* {% if settings.repeating-pattern %} */
background: url(~"{{ 'repeating-pattern-header.png' | asset_url }}");
/* {% endif %} */ 
```

Shopify 对此表示敬意。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-14T14:41:30.450

仅对于可能偶然发现此页面的其他任何人的信息，您实际上不需要处理这样的变量：

```
@brand-colour: ~"{{ settings.brand_colour }}"; 
h1{ color: @brand-colour;} 
```

您实际上可以像这样使用[SASS 插值](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#interpolation_)来做到这一点：

```
h1 { color: #{'{{ settings.brand_colour }}'}; } 
```

通俗地说，插值只是包装一个变量`#{' '}`，告诉 SASS 在编译 CSS 时将其输出为纯文本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-03T13:54:53.630

如果有人有兴趣使用 Sass 变量作为文件名和文件类型（例如自动生成 @2x 媒体查询的 mixin），代码如下：

```
background-image: url(#{'{{ "'}#{$filename}.#{$filetype}#{'" | asset_url }}'}); 
```

# ruby-on-rails - Ruby on rails 从视图路由到控制器中的自定义方法

> ID：11178267
> 
> 赞同：17
> 
> 时间：2012-06-24T14:27:22.870
> 
> 标签：ruby-on-rails

我有一个控制器名称职位。在我的`/config/routes.rb`，我用过这个 -

```
resources :posts 
```

**/app/controllers/posts_controller.rb：**

```
class PostsController < ApplicationController
    def new
            @post = Post.new
    end

    def show
            @post = Post.find(params[:id])
    end

    def categoryshow
            @post = Post.find(params[:category])
    end

    def index
            @posts = Post.all
    end

    def create
            @post = Post.new(params[:post])
            if @post.save
                    flash.now[:success] = "Your Post Successful"
                    redirect_to @post
            else
                    render 'new'
            end
    end
end 
```

我是 Rails 新手，经常对路线感到困惑。我有另一个 static_pages 控制器。里面有一个`home.html.erb`文件。

我想做的是打电话 -

```
def categoryshow
            @post = Post.find(params[:category])
end 
```

帖子控制器的“categoryshow”方法来自`/app/views/static_pages/home.html.erb`

我该如何管理？如果我使用“posts_path”，它会转到索引操作而不是 categoryshow 操作。

#

我通读了链接并从那里尝试了几件事。这是我面临的问题：

当我在 config/routes.rb 中尝试这个时

```
resources :posts do

    collection do

          get 'categoryshow'

    end

end 
```

这会生成一个“categoryshow_posts_path”

在我看来，我使用了这个：

```
<ul class="users">

     <%= Post::CATEGORIES.each do |category| %>

<li>

     <%= link_to category,categoryshow_posts_path %>

</li>

<% end %>

</ul> 
```

我的帖子控制器有以下方法：

def 类别显示

```
 @post = Post.find(params[:category]) 
```

结尾

在这种情况下，我收到以下错误：

**ActiveRecord::RecordNotFound in PostsController#categoryshow**

**找不到没有 ID 的帖子**

* * *

其次，我尝试使用您提供的链接中提到的非资源路由：

```
 match ':posts(/:categoryshow(/:category))' 
```

在视图中，我正在使用这个：

类别

```
 <ul class="users">

 <%= Post::CATEGORIES.each do |category| %>

 <li>

     <%= link_to category,"posts/#{category}" %>

 </li> 

<% end %>

</ul> 
```

在这种情况下，我们的非资源路由只有在没有其他现有资源路由匹配时才会匹配。但是，我看到显示操作是匹配的，并且我收到以下错误消息：

这是表演动作：

定义显示

```
 @post = Post.find(params[:id]) 
```

结尾

**ActiveRecord::RecordNotFound in PostsController#show**

**找不到 id=Politics 的帖子**

*   我真的很感谢这里的任何帮助！

*   谢谢（悉达多）

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-24T14:39:37.333

查看[路由文档的“添加更多 RESTful 操作”部分](http://guides.rubyonrails.org/routing.html#adding-more-restful-actions)。

```
resources :posts do
  collection do
    get 'categoryshow'
  end
end 
```

或者：

```
resources :posts do
  get 'categoryshow', :on => :collection
end 
```

如果这不能满足您的确切需求，那么之后的部分将讨论添加任意路由。

请注意，路由文件是明确排序的：如果您在其他东西捕获路由之后尝试匹配路由，则第一个路由获胜。

# jasper-reports - 访问 Jasper 报告时级联输入控件为空

> ID：11178270
> 
> 赞同：0
> 
> 时间：2012-06-24T14:27:37.990
> 
> 标签：jasper-reports, jasperserver

*我通过一个独立的 URL*调用 jasper 报告，通过该URL传递运行报告所需的输入控件之一。

例如 http://localhost:8080/jasperserver/flow.html?_flowId=viewReportFlow&standAlone=true&reportUnit=xyz&ParentFolderUri=abcd&j_username=xyz&j_password=xyz& **parameter1=value1&**。. .

如您在上面的*独立 URL*中看到的，我传递了 JasperServer 用户名和密码、reportUnit 名称和位置等必填参数，以及报表输入参数，即“ **parameter1** ”，它可以具有类似于“ **value1** ”的值。

我为此输入值使用了强制的、只读的和可见的输入控件。它的值将来自*独立的 URL*，显示在框中，但是是只读的，因此无法更改。

到目前为止，该报告工作得非常好。

但是当我的客户拒绝这个想法时，悲剧就开始了。他希望我的报告有一个完全不可见的输入控件，并且输入值将通过*独立的 URL*传递，就像上图所示。

然后我的客户让我参考**[这个](http://jasperforge.org/plugins/mwiki/index.php/Jasperserver/Cascading_input_controls)**并让我处理级联输入控件。

最近我在这个报告中添加了一个级联输入控件。输入控件类型是单个选择查询，它利用了我通过*独立 URL*传递给报表的两个参数。

现在，当 Jasper 服务器使用输入参数响应*独立 URL*时，所有其他静态参数都正常工作，除了级联参数。

当我单击级联输入的选择框时，我可以看到所需的选项一秒钟，然后，在我查看选择列表时它就变空了。

但是当我使“Parameter1”输入控件可见时，级联输入控件起作用了！

然后我就隐形了，级联的输入控制变成了一个自己做事不听主人的野兽。

我无法理解为什么会这样。有人可以为我提供解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T06:41:09.717

我已经找到了一个临时解决方案。

我使“Parameter1”输入控件可见且只读。

接下来，我使用了一个样式表并定义了一个样式规则，该规则将影响该输入控件在网页上的显示，使“显示：无”。

我通过 URL 传递了样式表的名称。所以这个样式表用于报告。

现在，“Parameter1”输入控件对最终用户是不可见的，我的报告仍然在运行，没有人知道它只是一个修复程序。

# visual-studio-2010 - VS 2010 不加载 PDB

> ID：11178271
> 
> 赞同：3
> 
> 时间：2012-06-24T14:27:39.337
> 
> 标签：visual-studio-2010, debugging

我有一个 VS 2010 解决方案，我在 x64 Windows Server 2008 R2 机器上以调试模式构建。编译会在 .exe 旁边生成一个 .pdb 文件。当我运行带有调试器的项目时，我收到以下错误消息：

> “找不到调试信息或不匹配。包含/排除设置禁用加载。”

此时我无法在代码中插入断点。但是，当我手动加载符号（使用模块窗口）时，它们会正确加载，我可以再次插入断点。我尝试从存储库中重建、清理和重新克隆我的代码。没有什么帮助。.pdb 显然存在并且匹配。为什么 VS 不能立即加载它们？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-24T14:31:14.810

更新：事实证明，可以选择从加载中排除特定符号文件。

去：

> 工具->选项->调试->符号->指定排除的模块

并确保不排除任何内容。

# python - 根据简单的计算从视图中触发 Mako 命令

> ID：11178274
> 
> 赞同：0
> 
> 时间：2012-06-24T14:27:45.217
> 
> 标签：python, python-2.7, pyramid

我的继承模板中有**n 个 def 块**，根据从视图传递的变量值，在继承**模板中显示其中一个块。**

目前，我在 View 文件中进行计算，然后决定哪个 def 可见，然后将其作为键值与其他要显示的数据一起在字典中传递给继承模板并在那里，使用**`if-elif-endif`**子句评估此键的值以查看要显示的 def，然后手动调用该 def**`**${self.val_of_key_nn()}**`**

我想知道是否有办法摆脱这个 if-elif-endif bock 并**`self.def_to_call()`**直接从视图将命令传递给模板？

示例代码：

```
#defs is a key in the passed-dictionary.
#I want to reduce this block to a single-line code
% if defs == '1':  
${self.block_1()}
% elif defs == '2':
${self.block_2()}
% else:
${self.block_default()}
% endif 
```

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T22:45:41.900

菲尔，你的问题是最及时的......截至 2012 年 6 月，他们正在努力使这种能力在未来的 Pyramid 版本中更加明确。

目前有一种方法可以做到这一点，但它没有记录，如果你使用它，你应该认为它可能在未来发生变化。与其只从您的视图可调用返回一个字典，而是返回一个元组： 您希望呈现的特定 def 的（带引号的）名称在哪里，并且`('defname', {...})` 是像往常一样的字典。`'defname'``{...}`

如果您对此建议的未来方法感兴趣，它将 defname 放在模板路径（资产规范）中：

[https://github.com/Pylons/pyramid/commit/ea009a6d4a1ffa8585faa85581848f6e74a57dfc](https://github.com/Pylons/pyramid/commit/ea009a6d4a1ffa8585faa85581848f6e74a57dfc)

仅供其他感兴趣的读者参考：在 zzzeek 的博客[这里](http://techspot.zzzeek.org/2012/06/18/server-side-templates-and-api-centric-development/)有一篇关于这种技术用例的优秀文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T16:31:01.093

例如：

```
<%
    defdict = {'1': block_1, '2': block_2}
%>

${defdict.get(defs, block_default)()} 
```

# javascript - JSONP 格式必须是完美的吗？查看示例

> ID：11178277
> 
> 赞同：4
> 
> 时间：2012-06-24T14:28:16.530
> 
> 标签：javascript, jquery, jsonp

我正在使用 JSONP 尝试从 WOT API 中获取一些结果。请参阅下面的代码：

```
 // Prepare the URL
  var url='http://api.mywot.com/0.4/public_link_json?hosts=amazon.co.uk/&callback=cbfunc';

  // Lookup
  $.getJSON(url, function(data){
    alert('success');
  }); 
```

由于某种原因，这似乎失败了（因为我在浏览器中没有收到警报）。经过一番研究，似乎返回的 JSONP 在回调函数的末尾有一个空格（在最后一个大括号和右括号之间）：

```
cbfunc({ "amazon.co.uk": { "target": "amazon.co.uk", "0": [ 95, 88 ], "1": [ 95, 87 ], "2": [ 95, 87 ], "4": [ 95, 87 ] } } ) 
```

使用在线 JSON 格式化程序 (http://jsonformatter.curiousconcept.com/) 后，看起来这个单个空间正在抛出整个 $.getJSON() 函数，因为它无法处理空间？

JSONP 格式真的那么具体吗？我以为 Javascript 忽略了空格？我是否正确诊断了这一点？我可以做些什么来处理 JSONP 并删除空间？

在此先感谢，我正在使用 jQUery BTW。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-24T14:31:20.527

> 我是否正确诊断了这一点？

不，这与空格无关。Javascript 与空格无关 :-)

您应该`callback=?`在您的 url 中使用，而不是按照文档`callback=cbfunc`的 JSONP 部分中的[说明](http://api.jquery.com/jQuery.getJSON/)使用。

这是现场演示：http: [//jsfiddle.net/Ssfk2/](http://jsfiddle.net/Ssfk2/)

jQuery 将 替换为`?`您正在使用的匿名成功回调的名称。

# android - 存储 XmlPullParser 的位置

> ID：11178282
> 
> 赞同：3
> 
> 时间：2012-06-24T14:29:08.677
> 
> 标签：android, xml, xml-parsing, xmlpullparser

我正在使用 XmlPullParser 来解析 Android 中的 xml 文件。但是，我想随时暂停解析​​器。

我使用从 RandomAccessFile 创建的 Filechannels。然后我使用 Channels.newInputstream() 方法创建一个 Inputstream。

我的想法是存储每个 xml 开始标签的位置，当我暂停然后恢复操作时，我将文件通道的位置设置为上一个存储的位置。

但是我面临 XMLPullParser 使用 8231 字节缓冲区的问题。这意味着我无法知道 xml 开始标记的确切位置。

我看到 xmlpullparser 有一个 getLineNumber() 方法，但是我看不到任何 set 方法。

有谁知道我如何知道文件中 xml 开始标记的确切位置？

此致。

# android - 在android中从服务器异步获取图像？

> ID：11178294
> 
> 赞同：1
> 
> 时间：2012-06-24T14:30:54.577
> 
> 标签：android

我的服务器数据库中有 400 张图像。我能够获取这些图像并在我的模拟器中显示。但是从服务器获取图像需要很多时间。因此我想异步获取图像。我怎样才能完成这项任务？帮我解决这个问题......将提前感谢......

我想将以下代码转换为异步任务......

我的代码：

```
public View getView(.......)
{
ImageView myimgview = (ImageView) view.findViewById(R.id.imageView100);
drawable = LoadImageFromWebOperations(v.getTag().toString());
myimgview.setImageDrawable(drawable);
---
---
---
}

private Drawable LoadImageFromWebOperations(String url) {
try {
    InputStream is = (InputStream) new URL(url).getContent();
    Drawable d = Drawable.createFromStream(is, "image.png");
    return d;
    }
catch (Exception e) 
{
    System.out.println("Exc=" + e);
    return null;
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T15:41:28.247

简单的解决方案是在java中使用异步任务

听一些例子

```
 private class DownloadImages AsyncTask<String, Void, String> {
    @Override
    protected String doInBackground(String... urls) {
    //use your async task hear 
    //in your case call LoadImageFromWebOperations(urls[0])
    }

    @Override
    protected void onPostExecute(String result) {

    }
} 
```

并通过传递所需的图像 url 调用此异步任务

```
 DownloadImages task = new DownloadImages ();
    task.execute(new String[] { "http://your image url.com" }); 
```

听到这个很好的教程

[http://www.vogella.com/articles/AndroidPerformance/article.html#asynctask](http://www.vogella.com/articles/AndroidPerformance/article.html#asynctask)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T14:34:50.313

我使用[Prime](https://github.com/DHuckaby/Prime)来加载我的所有图像，它可以轻松解决这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T15:09:52.890

您可以将线程与处理程序结合使用：

```
public void setImageInThread(final ImageView imageView, final String url) {
    final Handler handler = new Handler() {
        @Override
        public void handleMessage(Message message) {
            Drawable result = (Drawable) message.obj;
            imageView.setImageDrawable(result);
        }
    };

    new Thread() {
        @Override
        public void run() {
            Drawable drawable = getDrawable(url);
            Message message = handler.obtainMessage(1, drawable);
            handler.sendMessage(message);
        }
    }.start();
} 
```

getDrawable 是您同步获取图像的函数。

# javascript - 如何检查浏览器对 HTML5 表单属性的支持？

> ID：11178296
> 
> 赞同：2
> 
> 时间：2012-06-24T14:30:59.490
> 
> 标签：javascript, html

如何检查浏览器是否支持`formtarget`or`form`属性？

Modernizr 在这里没有任何帮助，我什至无法在网络上找到有关`form`浏览器当前支持状态的信息。尽管快速测试显示除 IE 9 之外的所有当前浏览器都支持它们。

那么如何检查浏览器是否处理这些`form*`属性呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T15:01:33.950

干得好：

```
if("formtarget" in document.createElement("input")){
    //good job, browser
}else{
    //nope
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T15:37:44.350

*input*上的*form*属性是一种特殊情况。它在 HTML5 功能之前用于引用父表单，但现在它也用作属性，因此在 IE 上会出现误报。

 *有一个检查功能，但它涉及与 DOM 的交互，这可能会影响性能，但无论如何都可以。希望能帮助到你。

```
function testInputFormSupport() {
    var input = document.createElement('input'),
         form = document.createElement('form'),
         formId = 'test-input-form-reference-support';
    // Id of the remote form
    form.id = formId;
    // Add form and input to DOM
    document.body.appendChild(form);
    document.body.appendChild(input);
    // Add reference of form to input
    input.setAttribute('form', formId);
    // Check if reference exists
    var res = !(input.form == null);
    // Remove elements
    document.body.removeChild(form);
    document.body.removeChild(input);
    return res;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T14:39:11.663

看看[这个网站](http://wufoo.com/html5/)。它涵盖了所有新的表单功能，并提供了一个方便的小功能来测试属性的支持

```
// Function to test for attribute support
function elSupportsAttr(el, attr) {
  return attr in document.createElement(el);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-24T14:38:34.900

尝试

```
if ("attribute" in document.createElement("tag")) 
```

来自[如何使用 Javascript 判断 HTML 属性是否存在](https://stackoverflow.com/questions/4091197/how-can-i-tell-of-a-html-attribute-exists-or-not-using-javascript)*

# c#-4.0 - 尝试写入注册表时的访问问题

> ID：11178297
> 
> 赞同：0
> 
> 时间：2012-06-24T14:31:06.183
> 
> 标签：c#-4.0

我想在我的注册表中写一个值。我使用 C# 4.0。我使用以下代码。

```
RegistryKey rk = baseRegistryKey;

RegistryKey sk1 = rk.CreateSubKey(subKey);

sk1.SetValue(KeyName.ToUpper(), Value); 
```

> 此子键值为“SOFTWARE\POS”

这在我以前的机器上运行良好。它是 Windows 7，32 位操作系统。现在我使用的是 Windows 7、64 位操作系统。现在这个程序在执行`RegistryKey sk1 = rk.CreateSubKey(subKey);` 行时会产生以下错误。

> “拒绝访问注册表项 'HKEY_LOCAL_MACHINE\SOFTWARE\POS'。”

我也以管理员身份登录。但是 CreateSubKey 方法在 Microsoft.Win32 命名空间下。

请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T07:10:58.293

您需要让您的应用程序以管理员身份运行。如果您想强制您的应用程序以管理员身份运行，您需要将清单文件添加到您的项目中，并将以下行添加到清单文件中：

```
<requestedExecutionLevel level="requireAdministrator" /> 
```

希望这对您有用并解决您的问题。

# asp.net - WinDBG - 不包括符号路径

> ID：11178302
> 
> 赞同：3
> 
> 时间：2012-06-24T14:31:50.993
> 
> 标签：asp.net, debugging, windbg

我试图在一个非常大的 ASP.NET 应用程序中跟踪可能的内存泄漏。在尝试在实时环境中使用此工具之前，我正在尝试熟悉 WinDBG。

我已按照以下文章中的说明进行操作，我发现这很有帮助：[http](http://humblecoder.co.uk/uncategorized/spotting-a-memory-leak-with-windbg-in-net) ://humblecoder.co.uk/uncategorized/spotting-a-memory-leak-with-windbg-in-net 。我能够创建 ASP.NET 进程的“内存转储”文件，并显示委托正在导致文章中指定的内存泄漏。我指的是文章开头的段落：“接下来我们需要符号”。我没有使用 File\Symbol File Path 添加符号文件；在 WinDBG 中，但我似乎仍然能够调试应用程序并按照本文的其余步骤进行操作。ASP.NET 应用程序不需要符号路径吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T15:06:30.380

因为 .NET 程序集包含元数据，包括每个方法的名称及其参数，所以符号不是获取托管线程的可读堆栈跟踪所必需的。

符号可以提供的一件事是每个语句的文件名和行号，因此您可以更轻松地确定堆栈跟踪中的哪些帧对应于源代码中的哪些行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T14:30:28.637

正如迈克尔所说，符号对于托管代码并不是绝对必要的，因为大多数相关信息在运行时都可以作为元数据使用，但是如果您正在研究本机代码，那么拥有符号非常有用。

对于许多情况，您可以只`.symfix`告诉 WinDbg 使用 Microsoft 的公共符号服务器。这将使您能够访问代码中所有 CLR 和 Win32 特定调用的符号。`.reload`如果您设置了路径，请记住执行。

如果您的代码还包含本机非 Microsoft 程序集，则需要将相应 PDB 文件的位置附加到符号路径。为此使用`.sympath`命令。

要对符号加载进行故障排除，请使用该`!sym noisy`命令。

有关更多信息，[请参阅此](http://support.microsoft.com/kb/311503)。

# emacs - 在 emacs 中使用 CEDET 在 c++ 程序中导航

> ID：11178303
> 
> 赞同：2
> 
> 时间：2012-06-24T14:31:50.917
> 
> 标签：emacs, tags, navigation, cedet

我想使用 emacs 进行更高效的 c++ 编程。但是，我是使用此编辑器的初学者。我从 CEDET 开始。现在我有一个关于跳转到函数定义的简单问题：

例如，当我包含 fstream 标头并使用函数“void open(...)”时，我可以将光标放在此函数上并获取有关“open()”的位置和用法的正确信息。现在，我必须做什么（例如关于标记）才能使用“导航”跳转到包含“打开”定义的文件？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T19:36:17.293

如果您希望能够从函数调用跳转到该函数的定义，那么您可能正在考虑`tags`功能。您是否查看过[有关 etags 的 EmacsWiki 页面](http://emacswiki.org/emacs/EmacsTags)，看看是否是您所追求的？在[emacs 手册部分中还有关于 tags](http://www.gnu.org/software/emacs/manual/html_node/emacs/Tags.html#Tags)的更多信息。

# html - 即使给出了更清晰的信息，也无法将 div 完全包裹在浮动 div 周围

> ID：11178305
> 
> 赞同：0
> 
> 时间：2012-06-24T14:32:05.573
> 
> 标签：html, css

您好，我有一个围绕三个浮动 div 的包装器 div，我想将包装器包装在这些 div 周围，但我不能完全包装它们，我给浮动 div 一个 top :25px ，所以这个 div 恰好在下面溢出 25 px包装，

这是我的页面[http://jsfiddle.net/vpcxP/](http://jsfiddle.net/vpcxP/)，看看浮动div如何溢出底部的主容器div

PS:我不想给出溢出：隐藏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T14:44:49.157

您是否尝试在#mainContainer 的底部添加填充？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T14:46:23.357

对于 #mainContainer 而不是 height:auto 使用 overflow:auto

```
#mainContainer
{
overflow:auto;
width: 835px;
margin:0 auto; 
position:relative;
top:50px;
background-repeat:no-repeat;
background-image:url("Images/mainContainerBG.jpg");
box-shadow: 3px 10px  20px 5px #000; 
```

}

您可能还需要调整宽度。将其设置为 900 像素左右。您似乎重新定义了 .column 的样式。删除该属性并将其用于列。

```
.column
{
width:280px;
height:452px;
top:25px;
float:left;
left:5px;
box-shadow:3px 10px 7px 3px #4f4848;
background-color:#2c2b2b;
margin-left:5px;

} 
```

# android - Android：在 setOnClickListener 中启动意图

> ID：11178308
> 
> 赞同：0
> 
> 时间：2012-06-24T14:32:21.453
> 
> 标签：android

我有一个带有 android:onClick="getGraph" 的按钮，因此我在单击它时创建了一个函数，它检索位于 CheckByDate.java 的用户输入

```
public void getGraph (View view)
{
    tv = (TextView)findViewById(R.id.textView1);
    textDay = (EditText) findViewById(R.id.textDay);
    textMonth = (EditText) findViewById(R.id.textMonth);
    textYear = (EditText) findViewById(R.id.textYear);
    day = textDay.getText();
    month = textMonth.getText();
    year = textYear.getText();

    date = day + "/" + month + "/" + year;

    Intent dategraphintent = new Intent(CheckByDate.this, DateGraph.class);
    dategraphintent.putExtra("date", date);
    startActivity(dategraphintent);
} 
```

然后，在我的 DateGraph.java 中，我放了这样的东西

```
public Intent getIntent(Context context)
{
    String date;
    date = getIntent().getStringExtra("date");
       .
       .
       .
       .   //This is where the date will interact with my web service, then receive 
       .   //an array set of values, and plot as a graph
       .
       .
} 
```

但是，我不知道，当我点击按钮时，它会强制关闭，我完全不知道，有什么想法吗？我试过用你的方法，还是我犯了一些愚蠢的错误？？拜托我需要你的帮忙....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T14:35:22.360

你定义了你的方法

```
public Intent getthisIntent(Context context) {} 
```

有一个参数，你调用它没有参数

```
getthisIntent(); 
```

你必须使用

```
getthisIntent(YourActivity.this); 
```

* * *

> 然后按钮将值传递给新意图，并在没有新的 xxx.java 文件的情况下启动它？

当您不想拥有另一个`Activity`时，您想使用`Intent`什么？这毫无意义。如果您想`Activity`在单击时调用 new `Button`，则应使用以下代码段：

```
Intent i = new Intent(YourActivity.this, NewActivity.class);
startActivity(i); 
```

* * *

> 我有一个按钮，这个按钮将从 EditText 中获取值，然后使用这个值来启动一个新的 Intent

```
gen.setOnClickListener(new View.OnClickListener() 
    {
        public void onClick(View v) 
        {   
            day = textDay.getText().toString();
            month = textMonth.getText().toString();
            year = textYear.getText().toString();
            date = day + "/" + month + "/" + year;
            Intent i = new Intent(YourActivity.this, NewPlotActivity.class);
            i.putExtra("date", date);
            startActivity(i); // this will start new Activity where you plot a graph.
        } 
```

然后，在您的**NewPlotActivity**中，您可以使用`getIntent().getStringExtra("date");`

**注意：**不要忘记添加`<activity android:name=".NewPlotActivity"></activity>`到您的**Manifest.xml**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T14:41:13.543

你违反了你的方法签名！！，用上下文对象调用你的方法，使用：

```
getthisIntent(YourActivity.this);
getthisIntent(getApplicationContext()); 
```

# sencha-touch - 如何知道 NestedList 中叶项的父项？

> ID：11178309
> 
> 赞同：0
> 
> 时间：2012-06-24T14:32:27.803
> 
> 标签：sencha-touch, extjs, sencha-touch-2

有没有一种方法可以知道叶子点击项目的父项目？就像我有一个结构如下的商店：

```
root: {
        items: [
            {
                text: 'Parent1',
                items: [
                    { text: 'Child1', leaf: true },
                    { text: 'Child2', leaf: true },
                    ............ 
```

当我点击叶子项目时，我需要知道哪个父母拥有这个叶子项目。我找不到任何关于这个的特殊方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T14:38:08.010

在 itemtap 和 Leafitemtap 中，记录被传递给监听器。

从这里，您可以使用以下方法获取父记录：

```
record.parentNode 
```

# wordpress - 301 文件夹重定向到父文件夹

> ID：11178310
> 
> 赞同：1
> 
> 时间：2012-06-24T14:32:28.057
> 
> 标签：wordpress, .htaccess, redirect

我需要将 /portfolio/year/ 重定向到 /portfolio/。

我目前写的 301 的问题（重定向 301 /portfolio/year [http://example.com/portfolio/](http://example.com/portfolio/)）是当有人尝试访问 /portfolio/year/2000 或其中的任何其他页面时它会重定向 /年/。

有没有办法可以做这个重定向？我需要阻止机器人和人们访问空白的 /portfolio/year/ 页面，而不会破坏其余的内部页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T17:19:54.900

您不必为此使用 PHP。只需将旧的 RewriteRule 替换为这个：`RewriteRule ^portfolio/year/?$ portfolio [R=301]`url`$`末尾的 确保在`portfolio/year/`or之后没有更多字符`portfolio/year`

# macos - GNU 汇编器（Mac OS X 64 位）：非法指令：4

> ID：11178313
> 
> 赞同：0
> 
> 时间：2012-06-24T14:33:09.600
> 
> 标签：macos, assembly, x86-64, system-calls, gnu-assembler

我是 GNU Assembler 的新手，我正在尝试执行这段代码：

```
.globl _main
_main:
    movl $1, %eax
    movl $0, %ebx
    int $0x80 
```

该程序应通过系统调用 exit ( `1`) 退出。编译它（没有警告）：

```
gcc test.s 
```

但是运行它会给我错误：`Illegal instruction: 4`

感谢帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T15:11:44.320

如果您正在编译 64 位可执行文件，那么您应该编写如下内容：

```
movq $0x2000001, %rax
movq $0, %rdi
syscall 
```

[来源](http://thexploit.com/secdev/mac-os-x-64-bit-assembly-system-calls/)。

# java - C中字符串的散列函数

> ID：11178321
> 
> 赞同：0
> 
> 时间：2012-06-24T14:34:28.830
> 
> 标签：java, c

我想实现一种散列技术，`C`其中字符串的所有排列都具有相同的散列键。
例如`abc`&`cab`两者都应该有相同的键。

我曾考虑添加`ascii`值然后检查`frequency of characters`[重要否则两者`abc`&`aad`将具有我们不想要的相同键]。
但是，它似乎效率不高。

有没有更好的散列函数可以很好地解决冲突并且也不会导致稀疏散列表？

Java [ ] 内部使用了哪种散列技术`for strings`，不仅可以最大限度地减少冲突，而且操作 [ `insertion ,deletion, search`] 足够快？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-24T14:35:38.070

为什么不在散列之前对字符串的字符进行排序？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-24T14:41:48.427

显而易见的技术是简单地对字符串进行排序。您可以简单地将排序后的字符串用作查找键，也可以使用任何认为合适的算法对其进行散列。或者，您可以使用字符串的游程编码 (RLE) 表示形式（因此 RLE 为`banana`）`a3bn2`，并可选择对其进行散列。

很大程度上取决于您要对散列做什么，以及它们对冲突的抵抗力。一个简单的 CRC（循环冗余校验和）可能就足够了，或者可能是 MD5 或 SHA1 等加密校验和对您来说不够安全。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-24T14:40:18.097

> Java [用于字符串] 内部使用了哪种散列技术，它不仅可以最大限度地减少冲突，而且操作 [插入、删除、搜索] 是否足够快？

Java 中用于提高速度的基本“技巧”是***缓存哈希值***，使其成为 a 的成员变量，`String`因此您只需计算一次。但是这只能在 Java 中工作，因为字符串是*不可变*的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-24T14:49:00.137

关于散列的主要规则是“不要发明自己的散列算法。永远。”。您可以只对字符串中的字符进行排序并应用标准散列策略。

如果您对散列感兴趣，[还](http://crackstation.net/hashing-security.htm)请阅读。

# magento - 在 magento 中不使用 local.xml 进行主题开发时

> ID：11178329
> 
> 赞同：4
> 
> 时间：2012-06-24T14:36:07.187
> 
> 标签：magento

我在 Magento 社区中听到很多人提到使用`local.xml`for Magento 主题开发的好处

我可以理解好处，实际上我想不出任何使用它可能有害的情况。

是否有特定的情况`local.xml`是错误的选择？如果有，那会是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T15:28:11.857

MagePsycho 的观点都是正确的，所以我将提供以下补充。

`local.xml`布局文件只适用于最终实现者，当然——分布式模块的制造者应该确保他们的模块配置和使用新的布局更新文件。这可能会或可能不会在原始问题中假设，但值得一提。

此外，在多站点安装的情况下，如果多个站点主题共享一组共同的布局更新，但一个或多个站点需要进一步更新，那么最好创建一个自定义模块，该模块配置一个布局文件来收集共同的本地布局变化。这允许`local.xml`不包含重复布局更新的主题特定文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T15:14:48.673

`local.xml`主题布局文件总是最后加载。因此，您可以覆盖现有布局节点并根据项目要求自定义布局。

此外，`local.xml`在单个布局 xml 仅包含必要的 xml 布局更新的意义上，使用是防升级的。

您可能需要一些时间来调整设计，`local.xml`因为您无法评论不必要的块节点；您必须通过 xml 删除节点删除块。此外，在对块位置进行排序时，您必须小心。

但是，一旦您完成了一个主题的使用`local.xml`，您就可以轻松地将相同的概念（经过一些修改）用于其他主题。

总的来说，使用 local.xml：

*   使您的系统更耐升级
*   为未来的项目节省时间
*   更少的文件 = 更少的开销 :)

希望这有点道理:)

干杯!

# android - 如何在 Ubuntu 上使用 openjdk 构建 android 项目？

> ID：11178332
> 
> 赞同：6
> 
> 时间：2012-06-24T14:36:59.410
> 
> 标签：android, ubuntu, openjdk

我发现[在 Ubuntu 10.10 上使用 Android SDK 真的需要 Sun Java 吗？我更喜欢 OpenJDK](https://stackoverflow.com/questions/4074711/is-sun-java-really-necessary-for-using-android-sdk-on-ubuntu-10-10-i-prefer-ope)，但我无法在 Ubuntu 上构建 android 项目。当我尝试：

```
$ ant debug 
```

我有：

```
Unable to locate tools.jar. Expected to find it in /usr/lib/jvm/java-6-openjdk/lib/tools.jar

...

BUILD FAILED
/home/kuba/projects/Android/android-sdk-linux/tools/ant/build.xml:651: The following error occurred while executing this line:
/home/kuba/projects/Android/android-sdk-linux/tools/ant/build.xml:672: Unable to find a javac compiler;
com.sun.tools.javac.Main is not on the classpath.
Perhaps JAVA_HOME does not point to the JDK.
It is currently set to "/usr/lib/jvm/java-6-openjdk/jre" 
```

我有java版本：

```
$ java -version
java version "1.6.0_20"
OpenJDK Runtime Environment (IcedTea6 1.9.13) (6b20-1.9.13-0ubuntu1~10.10.1)
OpenJDK Client VM (build 19.0-b09, mixed mode, sharing) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-24T14:42:43.043

确保您已安装 openjdk `JDK`。默认情况下，您可能只`JRE`安装了。如果你打开`Synaptic`，搜索`openjdk`然后你会看到`JDK`和`JRE`。选择JDK包并安装。我认为实际的包名是`openjdk-6-jdk`.

或使用命令行

```
# sudo apt-get install openjdk-6-jdk 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-24T14:53:38.903

Android官网推荐使用Sun/Oracle官方JDK，可以在[http://www.oracle.com/technetwork/java/javase/downloads/index.html](http://www.oracle.com/technetwork/java/javase/downloads/index.html)下载，不支持使用OpenJDK，非常不推荐.

你不需要在你的系统中安装官方的JDK，如果这是你所担心的，只需下载你选择的JDK的* .bin版本（我建议1.6版本），通过执​​行*解压所有东西.bin 在终端中，只需像这样修改 2 个环境变量：

*   `PATH`，将 jdk 可执行文件的路径添加`path_to_jdk/bin/`到您的`PATH`
*   `JAVA_HOME`, 设置`JAVA_HOME`为你的 jdk 的通用路径，而不是`bin`or`lib`路径，就像以前没有 bin，只有 path_to_jdk/

`/etc/bash.bashrc`您可以通过编辑或 您的本地来修改此变量`.bashrc`，我建议编辑下的一个`/etc`

您还想从系统中删除实际的 OpenJDK。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-11T15:11:23.667

我通过安装`gcj-jdk`. 在安装这个包之前，我有`java-7-openjdk`，但`tools.jar`在它的目录中没有。安装后`gcj-jdk`，我`tools.jar`在 ant 想要的目录中找到并创建了一个符号链接。

# c# - BeginInvoke 未在 WPF 应用程序中的线程内触发

> ID：11178334
> 
> 赞同：3
> 
> 时间：2012-06-24T14:37:13.810
> 
> 标签：c#, .net, wpf

我在 WPF 应用程序中有这个简单的代码：

```
ThreadStart start = delegate()
{
    Thread.Sleep(5000);
    Console.WriteLine("HEY!");

    Dispatcher.CurrentDispatcher.BeginInvoke(
        DispatcherPriority.Normal,
        new Action(
            delegate()
            {
                Console.WriteLine("Inside invoke?!");
            }
        )
    );
};

new Thread(start).Start(); 
```

`HEY!`片刻后被打印出来，并且应用程序*没有*像使用线程所期望的那样被阻塞，但是，为什么我从来没有看到`Inside invoke?!`？我还尝试了不同的优先级，例如`Send`，我认为这是最高优先级。

我也尝试过在里面设置断点，但它从未停止过。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-24T15:09:01.143

**首先是一些基础知识 -**

*   每个线程都有自己的 Dispatcher，并且 Dispatcher.CurrentDispatcher 将始终返回当前正在执行的线程的 Dispatcher。
*   BeginInvoke 根据 DispatcherPriority 指定的优先级异步执行您指定的委托。

**代码问题 -** 您将委托放置在您创建的辅助线程的调度程序队列中。但是在辅助线程有时间执行它之前，您的辅助线程退出了它的调度程序。这就是为什么委托永远不会被处决的原因。

有两种方法可以实现这一点 -

*像这样同步调度调度程序上的委托 -*

```
Dispatcher.CurrentDispatcher.Invoke(
                    DispatcherPriority.Normal,
                    new Action(
                        delegate()
                        {
                            Console.WriteLine("Inside invoke?!");
                        }
                    )
                ); 
```

*或者您可以像这样在主线程（通常称为 UI 线程）的调度程序上将其排队 -*

```
Application.Current.Dispatcher.BeginInvoke(
                    DispatcherPriority.Normal,
                    new Action(
                        delegate()
                        {
                            Console.WriteLine("Inside invoke?!");
                        }
                    )
                ); 
```

# .net - 这个控件叫什么，它是否存在于 Windows 中？（从 iTunes/Mac 控制）

> ID：11178347
> 
> 赞同：-1
> 
> 时间：2012-06-24T14:39:17.193
> 
> 标签：.net, wpf, winforms, user-controls

![在此处输入图像描述](../Images/3390e38f4187d6a4ffdadada69ff450b.png)

如果您从未使用过 iTunes，这基本上就像一个带有图像而不是文本的垂直列表框，因此您选择其中一个，它会改变一些东西。我想知道：

1.  这个叫什么
2.  它存在于 .NET 中还是我必须创建自己的？

编辑：我希望它存在于 WinForms 但告诉我它是否也存在于 WPF 中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T14:55:08.310

我知道的唯一类似的控件`FlowDocumentReader`来自 WPF：

![FlowDocumentReader 示例](../Images/ae36f065e9a9a589f22a3c2520811803.png)

请参阅[MSDN](http://msdn.microsoft.com/en-us/library/aa970909.aspx)。

# bash - Bash：等到用户完全登录 X

> ID：11178350
> 
> 赞同：4
> 
> 时间：2012-06-24T14:39:52.827
> 
> 标签：bash

我有一个由 anacron 每天启动的 bash 脚本，它不时需要一些用户输入。这应该通过图形对话框来完成，例如 kdialog 提供。

有三个选项需要考虑：

*   “是的，今天开始任务” -> 运行任务
*   “不，今天不启动任务” -> 退出脚本
*   错误，用户未完全登录到 X -> 1 分钟后重试

到目前为止，这是我的代码（脚本以相关用户身份运行）：

```
while ! kdialog --title "Task $DATE" --msgbox "Please make preparations for today's task and press OK"
do
   logger -t task "waiting for display to become available"
   sleep 1m
done 
```

这行得通，除了我没有看到任何使用 YesNo 对话框的选项并区分按钮单击“否，今天不开始”和“错误，X 服务器尚不可供用户使用”——因为kdialog 在两种情况下都返回退出代码 1。

我考虑过使用不同的程序来检查 X 服务器是否已经可用，但我没有想出使用哪个程序的想法。有人有更好的主意吗？（使用带有 KDE4 的 Kubuntu 10.04，如果需要该信息......）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T20:21:16.610

查看：

```
xprop -root

```

**xprop**带有**x11-utils**软件包，很可能与 X11 一起安装...

另请查看**man 1 xprop中的****SEE ALSO**部分：

 **```
也可以看看
       X(7)、xdpyinfo(1)、xwininfo(1)、xdriinfo(1)、glxinfo(1)、xvinfo(1)

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T14:49:03.593

只需使用任何标准的 X 程序。，我建议，`xdpyinfo`因为它只是文本。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-25T00:56:50.050

考虑将其[设为自动启动条目](http://standards.freedesktop.org/autostart-spec/autostart-spec-latest.html)，因为 1）您可能实际上并不需要*每天*启动它，以及 2）否则您需要找到显示。**

# android - 基于 Webapp 的 Android 键盘

> ID：11178352
> 
> 赞同：1
> 
> 时间：2012-06-24T14:40:00.147
> 
> 标签：android, gwt, web-applications, cordova, android-input-method

我正在编写一个 Android 键盘。现在我到了必须重写 KeyboardView 的地步，我问自己为什么不切换到 Web 应用程序而不是原生 Android 应用程序。因此，我以后可以轻松地将应用程序部署到其他平台而无需重写。

我的方法是将 Android 应用程序用作我的网络应用程序的容器，可能与 GWT 结合使用。我也在考虑使用PhoneGap。

问题是，到目前为止，我还没有发现任何关于人们使用 webapps 作为 InputMethod 的信息。现在我想知道将 webapps 用于此任务是否合理甚至可能，或者它们是否仅适用于正常活动。

有没有人尝试过这样做或一些提示为什么或为什么不这样做？

# c# - 将 c++ 结构转换为 c# 结构

> ID：11178354
> 
> 赞同：0
> 
> 时间：2012-06-24T14:40:27.973
> 
> 标签：c#, c++, struct

谁能告诉我如何将以下结构转换为 c#

```
typedef struct DES_ks
{
    union
    {
        DES_cblock cblock;
        /* make sure things are correct size on machines with
         * 8 byte longs */
        DES_LONG deslong[2];
    } ks[16];
} DES_key_schedule 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T14:55:42.637

您需要查找 DES_cblock 和 DES_LONG 的 typedef 来翻译它。但是，为了让您开始，您需要继续阅读[`StructLayoutAttribute`](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.structlayoutattribute%28v=vs.100%29.aspx). 将 C union 转换为 C# 的方法是使用显式布局结构：

```
[StructLayout(LayoutKind.Explicit)]
public struct DES_ks
{
  [FieldOffset(0)]
  public DES_cblock cblock;
  [FieldOffset(0)]
  [MarshalAs(UnmanagedType.ByValArray, SizeConst = 2)]
  public DES_LONG[] deslong;
} 
```

感谢@Konrad 修复了我暂时的精神错乱；因为你想产生一个联合，你需要所有的字段在内存中重叠。在 C# 中，这是通过告诉编译器将它们布置在相同的偏移量（在本例中为 0）来实现的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T14:54:22.827

[C# 没有联合。](http://social.msdn.microsoft.com/Forums/en-US/csharplanguage/thread/60150e7b-665a-49a2-8e2e-2097986142f3/). 最接近的方法是使用 FieldOffset。但是，如果您的结构没有直接传递给外部函数，那么您最好使用更面向对象的方法。我建议只使用两种类型的数组创建一个结构，并将您不使用的数组设置为空。

# wpf - 如何识别 WPF 控件是否为容器控件？

> ID：11178356
> 
> 赞同：0
> 
> 时间：2012-06-24T14:40:37.800
> 
> 标签：wpf, wpf-controls

在运行时，我正在创建一个**WPF 控件**。它可以是任何 WPF 控件。

我想知道这个 WPF 控件是否是一个**容器控件**。即这个控件是否可以嵌入/包含另一个控件。

是否存在任何可以实现上述目标的属性？例如，标签、面板、组框可以包含其他控件，如按钮，但 textBOX 不能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T15:53:27.877

在 WPF 中有一些控制扩展的基类。

*   [`ContentControl`](http://msdn.microsoft.com/en-us/library/system.windows.controls.contentcontrol.aspx)：大多数控件都由此扩展，因为大多数控件可以在其中存储某种类型的单个*内容*。
*   [`ItemsControl`](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol)：这些是**集合**控件的类型，其中包含*内容*的集合。
*   [`Panel`](http://msdn.microsoft.com/en-us/library/system.windows.controls.panel.aspx)：这些是布局的特殊控件。他们实现[`ArrangeOverride`](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.arrangeoverride.aspx)和[`MeasureOverride`](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.measureoverride.aspx)方法来测量/安排其中的子控件。它们中的大多数还公开了附加属性以供最佳使用。

* * *

话虽如此，您通常希望使用`is`运算符来检查您的控件是否继承了您想要的内容。您可以是具体的或一般的，但通常您希望尽可能一般。我不确定您所说的“容器”是什么意思，这就是为什么我列出了三 (3) 个可以包含其他控件的典型基本控件。例如：

```
if (myControl is ContentControl)
{
    // Do something here.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T14:45:10.327

[这里](http://msdn.microsoft.com/en-us/library/bb675291%28v=vs.90%29.aspx)和[这里](http://msdn.microsoft.com/en-us/library/bb514628%28v=vs.90%29.aspx)提到的所有控件除了[`TabControl`](http://msdn.microsoft.com/en-us/library/system.windows.controls.tabcontrol%28v=vs.90%29.aspx)继承自[`Panel`](http://msdn.microsoft.com/en-us/library/system.windows.controls.panel%28v=vs.90%29.aspx)

因此，您可以执行以下操作：

```
if (myControl is Panel || myControl is TabControl)
{
    // Then it's a container
} 
```

# java - rich:listShuttle 格式化

> ID：11178362
> 
> 赞同：0
> 
> 时间：2012-06-24T14:41:41.187
> 
> 标签：java, css, jsf, richfaces

每当我的源列表中的项目数超过 17 时，列表格式就会出错，它会在列表顶部产生一个空白区域。滚动条始终存在，当我将项目从源列表移到目标列表时，源列表中的计数为 17 或更少，格式很好。是否有解决方法来控制格式。以下是图片：未格式化（超过 17 项）和格式化（少于 18 项。）

![在此处输入图像描述](../Images/a48708c123d03f137f4595e6b81cd9f0.png) ![在此处输入图像描述](../Images/c6d0055ea37fdf1e9bf3961cb66eeddb.png)

```
<div class="add-company-input-section">

        <h:panelGrid id="ModalPanel" columns="2" columnClasses="rc,lc">

            <label style="font-weight:bold;margin-top:5px">Name: </label>
            <h:inputText id="companyName"  value="#{companyAdminAction.companyName}"/>

            <label style="font-weight:bold;margin-top:5px">Website: </label>
            <h:inputText id="websiteName"  value="#{companyAdminAction.website}"/>

            <br/>

        </h:panelGrid>

                    <h3 style="color:#C88039; padding-bottom:5px;">Jurisdictions: </h3>
            <rich:listShuttle id="companyJurisdictionShutle"
                              sourceValue="#{companyAdminAction.statesList}"
                              targetValue="#{companyAdminAction.selectedStates}"
                              var="item" orderControlsVisible="false" fastOrderControlsVisible="false"
                              sourceCaptionLabel="Available"
                              targetCaptionLabel="Selected">
                <rich:column>
                    #{item}
                </rich:column>
            </rich:listShuttle>

    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T17:56:07.897

这是由于 css 依赖，将样式类添加到我的 listshuttle 修复了它。

```
 <style type="text/css">
    .lishShuttle td{vertical-align:top;}
   </style>

      <rich:listShuttle id="companyJurisdictionShutle"
                                  sourceValue="#{companyAdminAction.jurisdictionList}"
                                  targetValue="#{companyAdminAction.targetJurisdictionList}"
                                  converter="#{dmpJurisdictionConverter}"
                                  rowKeyConverter="dmpJurisdictionConverter"
                                  rowClasses=""
                                  var="item" orderControlsVisible="false" fastOrderControlsVisible="false"
                                  sourceCaptionLabel="Available"
                                  targetCaptionLabel="Selected" styleClass="lishShuttle">
                    <rich:column>
                        #{item}
                    </rich:column>
                </rich:listShuttle> 
```

# charts - 谷歌散点图点在另一个点之上

> ID：11178366
> 
> 赞同：2
> 
> 时间：2012-06-24T14:41:58.003
> 
> 标签：charts, google-visualization, scatter

我正在使用 Google Scatter Charts 并已将其全部修复并运行，但我使用的某些数据存在问题。

在我的数据中，我可以有多个具有相同 X 和 Y 坐标的点，因此当它们显示在我的图表上时，其中一些无法被点击。

有谁知道任何解决方案？

# matlab - Matlab中预计算函数的缓存结果

> ID：11178367
> 
> 赞同：2
> 
> 时间：2012-06-24T14:42:09.790
> 
> 标签：matlab, memoization

我有两个数组，`x`并且`y`. `x`是函数的输入，`y`是函数值。例如，`x = [ 1 2 3 4 5 6 7 8 9 10]`，`y = [ 3 6 2 4 1 6 7 0 1 8 ]`。两者的长度相同。

假设我有另一个数组`z`包含（与和`[ 2 3 8 9 10 3]`的长度不同），是否有任何函数可以在不使用 for 循环遍历数组的每个元素的情况下产生输出（相应索引处的返回值）？`x``y``[6 2 0 1 8 2]`

太感谢了

edit1* 如果数组中的数字不是整数，我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T14:52:58.390

我认为你只是想要：

```
y(z); 
```

这将返回 y 向量的第 z 个元素。你可能想要

```
y(x(z)); 
```

这将在您的示例中返回相同的结果，因为`x`只是值 1 到 10。

这两者都`z`可以只包含正整数，而在第二种情况下`x`也必须只包含正整数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T18:11:12.920

如果您使用的是 2008b 之后的 MATLAB 版本，您可以使用[containers.Map](http://www.mathworks.nl/help/techdoc/ref/containers.mapclass.html)类做您想做的事，即使是非整数、非连续或非数字值：

```
 x  = [ 1 2 3 4 5 6 7 8 9 10];
 y  = [ 3 6 2 4 1 6 7 0 1 8 ];
 z  = [ 2 3 8 9 10 3];
 F  = containers.Map(x,y);
 % for a single element:
 Fz1 = F(z(1))
 % for multiple elements at the same time, you need to use arrayfun
 Fz = arrayfun(@(x)(F(x)),z) 
```

Map 类实际上创建了一个所谓的 hashmap，因此您可以将几乎任何值映射到其他值（例如字符串、单元格、数组...）。

当该项目不存在时，它将返回错误。

如果您不能使用 MATLAB 2008b 或更高版本，则非整数域值有三种可能性。

使用插值方法，例如`interp1`. 这可能会给出错误的值（在事先未提供的值上）。您可以使用`ismember(z, x)`.

其次，您可以发明自己的从非整数到整数的方案（例如，如果您的所有值都是 0.5 的倍数，乘以 2）并使用 Oli 显示的解决方案。

另一种解决方案是使用`struct`s 来模仿地图的行为。然后你只需要从你的域值转换为有效的字段名称（即在 MATLAB 中是有效变量名称的字符串，这可以通过使用该`genvarname`函数来实现）。

如果不考虑四舍五入，这最后两个解决方案有点脏并且容易出错。所以我认为他们只是最后的手段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T14:43:17.350

```
y(z) 
```

这就是你所需要的......

# html - 如何停止文本框在 WebKit 中的容器内移动

> ID：11178370
> 
> 赞同：0
> 
> 时间：2012-06-24T14:42:16.567
> 
> 标签：html, css, google-chrome, webkit

如果在文本框内单击，按住鼠标按钮并开始上下拖动，文本框将在容器内移动。问题仅在 WebKit 中。

**重要的是不要改变绝对容器内的输入结构，该容器隐藏了溢出**

[http://jsfiddle.net/V66ts/](http://jsfiddle.net/V66ts/)

```
<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Untitled Document</title>

<style type="text/css">
.inputOverGateContainer
{
    top:0px;
    width: 100px;
    height: 22px;
    background-color: transparent;
    position: absolute;
    -moz-border-radius: 10px;
    -webkit-border-radius: 10px;
    -khtml-border-radius: 10px;
    border-radius: 10px;
    overflow: hidden;
    z-index: 5;
    padding-left:3px;
    padding-right:3px;
     -webkit-touch-callout: text;
    -webkit-user-select: text;
    -khtml-user-select: text;
    -moz-user-select: text;
    -ms-user-select: text;
    user-select: text;

}

.inputOverGate
{   

    font-size:17px;
    background-color: #fff;
    border: 1px solid #000;
    outline: none;
    width: 100%;
    height: 100%;
    color:#8292b4;
    text-shadow: 1px 1px 3px #000;
    -webkit-touch-callout: text;
    -webkit-user-select: text;
    -khtml-user-select: text;
    -moz-user-select: text;
    -ms-user-select: text;
    user-select: text;

}
</style>
</head>

<body>
    <div class="inputOverGateContainer"><input  class="inputOverGate" name="" type="text"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T14:48:20.813

您需要删除`.inputOverGate`该类的高度声明。我已经更新了你的小提琴演示：http: [//jsfiddle.net/V66ts/1/](http://jsfiddle.net/V66ts/1/)

# javascript - 是否可以在 NodeJS 中模拟键盘/鼠标事件？

> ID：11178372
> 
> 赞同：17
> 
> 时间：2012-06-24T14:42:44.497
> 
> 标签：javascript, node.js, console

想象一下，当从控制台调用 NodeJS 模块时，会输出一些介绍性消息，然后等待用户输入（单击 enter 或 esc）。这个模块已经拥有并完成了我们需要的一切，除了 - 等待用户输入提示。所以我们想知道（我个人对 NodeJS 非常陌生）是否可以以编程方式执行控制台模块并在其上触发输入事件，以便它不会等待并立即继续工作？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2015-02-05T05:22:07.567

您可以为此使用可能使用[RobotJS](https://github.com/octalmage/robotjs)。

示例代码：

```
var robot = require("robotjs");

// Type user's password or something. 
robot.typeString("abc123"); 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2017-10-23T20:16:47.763

正如 Jason 提到的，您可以使用[RobotJS](https://www.npmjs.com/package/robotjs)进行关键模拟，但需要几个步骤才能正确构建适用于**Windows** paltform 的robotsJS：

1.  您需要 Windows 构建工具才能运行`npm install --global windows-build-tools`（需要一些时间，因为它大约 120MB）
2.  运行`npm install robotjs --save-dev`
    你完成了！
    如果这是用于**电子**应用程序，那么您还需要以下第三步：
3.  跑`npm rebuild --runtime=electron --target=1.7.9 --disturl=https://atom.io/download/atom-shell --abi=57`

    （1.7.9 是我的`electron --version`，abi 是我安装的相应8.7，您可以[在此处](https://nodejs.org/en/download/releases/)`node --version`查看节点版本的 abi 版本[查找 NODE_MODULE_VERSION 列]）

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-03-13T12:55:34.257

如果您只需要将密钥发送到您的操作系统，node-key-sender 库是 RobotJs 的替代品。它是跨平台和非常小的库。

安装它`npm install --save-dev node-key-sender`。

并使用以下命令将“enter”发送到键盘：

```
var ks = require('node-key-sender');
ks.sendKey('enter'); 
```

查看文档页面：[https](https://www.npmjs.com/package/node-key-sender) ://www.npmjs.com/package/node-key-sender 。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-09-30T00:46:02.803

回复@Venryx。他们是正确的，robotjs 会有延迟，特别是如果你必须先加载节点，但是，如果你已经加载了节点，那么可能值得一试

```
robot.setKeyboardDelay(0) 
```

延迟的默认设置为 10 毫秒。这对我帮助很大。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-09-08T15:44:22.043

我已经尝试过`robotjs`and `node-key-sender`，但它们会导致每个关键事件的大量延迟/卡顿。（经常发送时尤其明显）

为了解决这个问题，我找到了一种直接`node-ffi-napi`调用 Windows user32`SendInput`函数的方法：[https ://stackoverflow.com/a/50412529/2441655](https://stackoverflow.com/a/50412529/2441655)

至少在我的情况下，这实现了更好的性能。（当然，缺点是它只能在 Windows 上运行）

# php - PHP：看不到上传目录

> ID：11178373
> 
> 赞同：0
> 
> 时间：2012-06-24T14:42:45.370
> 
> 标签：php, cakephp

几天来我一直在苦苦挣扎，试图找出为什么我无法将文件（`move_uploaded_file`）从临时目录移动到我设置的目录（`/img/uploads/photos`）。

经过大量测试和挠头后，我决定将上传函数中发生的任何事情写入 CakePHP 的 CakeLog。

虽然我已经物理创建了：`/img/uploads/photos`，但当我使用`CakeLog::write('debug', 'Does directory exist?: '.json_encode(file_exists('/img/uploads/photos/')));`它时会记录`false`。或者`is_dir`，也返回`false`

为什么会这样……谁能帮帮我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T14:47:38.673

我怀疑你做了一个目录`/img/uploads/photos/`？它可能与您的其他文件在同一个目录中，`/var/www/yoursite/img/uploads/photos/`或者类似的地方。

您可以使用一些技巧`$_SERVER{'DOCUMENT_ROOT'}`，如您可以在[http://php.net/manual/en/function.file-exists.php看到的](http://php.net/manual/en/function.file-exists.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T14:47:27.510

`/img/uploads/photos/`当你说你已经创建了目录时，我不相信你。这是一条绝对路径，从**机器的根开始**计算。您更有可能在某处（例如`/var/www/img/uploads/photos/`或`/home/caboone/public_html/img/uploads/photos/`）的 web 目录中创建了该文件夹。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T14:49:13.913

路径`/img/...`意味着路径是相对于磁盘根目录`img`的，即它表示硬盘最顶层的目录。我怀疑那是目录所在的位置。不要以 a 开始路径`/`以使其相对于您正在使用的文件。文件路径不是 URL！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-24T14:50:10.940

1.  将文件从一个目录移动到另一个目录时使用绝对路径。用于`dirname(__FILE__)`获取**绝对**当前工作目录，然后添加路径的其余部分。
2.  按照@Alex 的建议，为目录设置适当的权限。使用`chmod()`并将权限设置为 777 (ugo+w) [user+group+others world-writeable]。

# redirect - 会员登录页面只是将会员送回主页

> ID：11178382
> 
> 赞同：0
> 
> 时间：2012-06-24T14:44:09.600
> 
> 标签：redirect, login

我网站的成员应该在成功输入他们的登录信息后被发送到成员目录。但是，在点击“登录”按钮后，它们都被发送回我网站的主页。

我的网站最近发生了一些变化，这可能是原因，但我不知道是什么原因。我根本没有触及登录编码。

我指的登录页面是[http://www.teleworkrecruiting.com/page25.html](http://www.teleworkrecruiting.com/page25.html)

任何反馈将不胜感激。

谢谢你，帕梅拉

代码：

```
 <div id="Ggeo768" class="dfltc">
<h1 align="center"> <font face="arial">Login Required </font></h1>
<div align="center"><FONT face="Arial">Members, log in to access the latest hiring        companies and 
jobs.<BR>
</FONT> <font face="Arial">If you are not a registered user, <a      href="telecommute.html">  CLICK HERE</a> 

and sign up for access!</font></div>
<p align="center">
<form method="post" action="/"dir09.php">

<div align="center">User ID: 
 <input type="text" name="uid" size="8" />
<br /><br>
Password: 
 <input type="password" name="pwd" SIZE="8" />
<br /><br>
<input type="submit" value="Log in" />
</div>
</form>
<div align="center"></p> </div>
 </body>

</html></div>
</div>

<div id="Oobj590" style="position:absolute;z-index:7;visibility:visible;           left:563px;top:25px;width:158px;height:65px;">
<div id="Grtf591" class="dfltt">
<div align="center"><font face="Arial" class="fsx05" color="#ffffff">         <B>Telecommuting<br>
Job Seekers<br>
<a href="telecommute.html"><font color="#ffffff">Click Here</font></a><br></B></font>    </div>
</div>
</div>

<div id="Oobj1325" style="position:absolute;z-index:8;visibility:visible;    left:275px;top:824px;width:400px;height:19px;">
 <div id="Grtf608" class="dfltt">
<div align="center"><font face="Arial" class="fsx01" color="#ff0000">Lost your     username or password?&nbsp; </font><font face="Arial" class="fsx01">Write to <a         href="mailto:admin@teleworkrecruiting.com?subject=Lost username or password"          title="Administrator">admin@teleworkrecruiting.com</a><br></font></div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T15:18:39.820

（跟进上面的评论）

在`page25.html`中，注意`form`标签的声明：

`<form method="post" action="/"dir09.php">``action`-属性中有一个额外的撇号！用这个替换它：

`<form method="post" action="/dir09.php">`

# ios - 离线缓存清单在 iPhone 上被忽略

> ID：11178391
> 
> 赞同：1
> 
> 时间：2012-06-24T14:46:05.130
> 
> 标签：ios, html5-appcache

我有一个演示应用程序，它应该是创建[可在移动设备上运行的离线](http://www.stevefenton.co.uk/Puzzle/)应用程序的示例。我创建了一个[清单文件](http://www.stevefenton.co.uk/Puzzle/manifest.appcache)，并使用正确的 MIME 类型为其提供服务，但应用程序中的主图像始终在线获取，如果我进入飞行模式，尽管图像在缓存中，但不会加载。

为什么图片不在离线缓存中？

**更新**

我现在有一个有效的应用程序缓存清单，但在 iPhone 上我随机无法获得主图像 - 即使在线时也是如此。我有一个手动刷新按钮，通常会在第二次或第三次尝试时获取图像，但是当我从主屏幕打开应用程序时，它有一个“？” 而是占位符。

**更新**

我已经简化了很多示例并纳入了很多建议，但仍然存在问题。这是我到目前为止尝试过的步骤。

1.  完全删除了 JavaScript - 页面只显示静态图像

2.  将所有图像替换为小于 25kb 的文件

3.  `NETWORK: *`在清单中添加了一个

4.  移动`NETWORK: *`到`CACHE:`标题上方。

5.  尝试将“manifest.appcache”重命名为“cache.manifest”

它在 Firefox 中以离线模式工作，磁盘缓存为空（即确保它只能使用离线缓存！），但在 IOS 上仍然显示可怕的蓝色问号（在 iPhone 4s 上测试）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T14:52:25.230

由于缺少文件，您的缓存文件似乎无效。尝试使您的路径相对，例如`Puzzle/page.png`。

运行[验证器](http://manifest-validator.com/)会出现以下错误：

> ```
> Line 3: Resource not found
> 
> http://www.stevefenton.co.uk/Puzzle/CACHE
> 
> Line 4: Resource not found
> 
> http://www.stevefenton.co.uk/index.html
> 
> Line 5: Resource not found
> 
> http://www.stevefenton.co.uk/apple-touch-icon.png
> 
> Line 6: Resource not found
> 
> http://www.stevefenton.co.uk/page.png
> 
> Line 7: Resource not found
> 
> http://www.stevefenton.co.uk/knight.png
> 
> Line 10: Resource not found
> 
> http://www.stevefenton.co.uk/style.css 
> ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T13:34:09.950

经过大量的试验和错误后，我可以确认我已经解决了这个问题。

答案很奇怪，但我已经仔细检查以确保单独进行此更改会导致问题出现/消失。

如果您的应用要添加到 IOS 主屏幕，通常建议使用以下元标记：

```
<meta name="apple-mobile-web-app-capable" content="yes"> 
```

但实际上，不要添加这个。从我的演示应用程序中删除此标签立即解决了 IOS 5.1.1 上的问题 - 因此您需要决定是否必须具有离线缓存或是否必须具有全屏样式，而不是在 Safari 中运行。

# c# - 在多边形中生成均匀分布点的算法

> ID：11178414
> 
> 赞同：9
> 
> 时间：2012-06-24T14:49:23.973
> 
> 标签：c#, math, polygon, point

我正在寻找一种算法来在多边形内生成均匀分布的点。

这是场景：

我有一个多边形，由每个点的角（x，y）处的点的坐标指定。而且我有在多边形内生成的点数。

例如，假设我有一个包含 5 个点的多边形： (1, 1) ; (1, 2) ; (2, 3) ; (3, 2) ; 和 (3, 1)

我需要在该多边形内生成 20 个等距的点。

注意：某些多边形可能不支持均匀分布的点，但我希望以一种尽可能一致地覆盖多边形所有区域的方式分布点。（我的意思是我不想要一个分数比另一个多的部分）

有没有算法可以做到这一点？或者图书馆

我正在开发一个 C# 应用程序，但任何语言都可以，因为我只需要算法并且可以翻译它。

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-24T16:04:04.750

我使用的简单方法是：

1.  对多边形进行三角剖分。剪耳是完全足够的，因为您所需要的只是将多边形分解成一组不重叠的三角形。

2.  计算每个三角形的面积。从每个三角形中采样与该三角形相对于整体的面积成比例。每个样本只需一个统一的随机数。

3.  一旦确定一个点来自给定的三角形，就在三角形上均匀采样。这本身比你想象的要容易。

所以实际上这一切都归结为如何在三角形内采样。这很容易做到。一个三角形由 3 个顶点定义。我称它们为 P1、P2、P3。

1.  选择三角形的任何边。生成一个沿该边缘均匀分布的点 (P4)。因此，如果 P1 和 P2 是相应端点的坐标，则如果 r 在区间 [0,1] 上均匀分布，则 P 将是沿该边缘的均匀采样点。

    P4 = (1-r)*P1 + r*P2

2.  接下来，沿 P3 和 P4 之间的线段进行采样，但这样做不均匀。如果 s 是区间 [0,1] 上的均匀随机数，则

    P5 = (1-sqrt(s))*P3 + sqrt(s)*P4

r 和 s 当然是独立的伪随机数。然后 P5 将被随机采样，在三角形上均匀。

好消息是它不需要拒绝方案来实现，所以长而细的多边形不是问题。而对于每个样本，成本只是需要为每个事件生成三个随机数。由于剪耳是相当简单的完成并且是一项高效的任务，因此采样将是有效的，即使对于看起来令人讨厌的多边形或非凸多边形也是如此。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-24T15:27:08.543

一个简单的方法是：

1.  计算边界框
2.  在该框中生成点
3.  丢弃不在感兴趣多边形中的所有点

这种方法会产生一定数量的浪费点。对于三角形，它永远不会超过 50%。对于任意多边形，这可以任意高，因此您需要查看它是否适合您。

对于任意多边形，您可以首先将多边形分解为三角形，这样您就可以得到保证的浪费点上限：50%。

对于等距的点，从空间填充曲线生成点（并丢弃不在多边形中的所有点）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-02-26T21:51:09.857

您可以使用劳埃德算法：

[https://en.m.wikipedia.org/wiki/Lloyd%27s_algorithm](https://en.m.wikipedia.org/wiki/Lloyd%27s_algorithm)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-11-16T10:28:45.463

您可以尝试 {spatialEco} 包（[https://cran.r-project.org/web/packages/spatialEco/index.html](https://cran.r-project.org/web/packages/spatialEco/index.html)）并应用功能 sample.poly （[https://www.rdocumentation.org/packages /spatialEco/versions/1.3-2/topics/sample.poly](https://www.rdocumentation.org/packages/spatialEco/versions/1.3-2/topics/sample.poly) )

**你可以试试这段代码：**

```
library(rgeos)
library(spatialEco)

mypoly = readWKT("POLYGON((1 1,5 1,5 5,1 5,1 1))")
plot(mypoly)
points = sample.poly(mypoly, n= 20, type = "regular")
#points2 = sample.poly(mypoly, n= 20, type = "stratified")
#another type which may answer your problem
plot(points, col="red", add=T) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-24T17:57:04.337

简单的答案来自一个更简单的问题：如何从均匀分布中生成给定数量的随机分布点，这些点都适合给定多边形内？

简单的答案是：找到多边形的边界框（假设它是 [a,b] x [c,d]），然后继续生成实数对，一个来自 U(a,b)，另一个来自U(b,c)，直到你有 n 个坐标对适合你的多边形。这很容易编程，但是，如果您的多边形非常锯齿，或者很薄且倾斜，则非常浪费和缓慢。

为了获得更好的答案，找到最小的旋转矩形边界框，并在转换后的坐标中执行上述操作。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-06-24T16:00:16.593

1.  遗传算法可以相当快地做到这一点参考
    遗传[算法用于具有几何约束的图形布局](http://www.cs.iusb.edu/~danav/papers/dvci06.pdf)

2.  你可以使用 Force-Directed Graph 来解决这个问题......
    看看[http://en.wikipedia.org/wiki/Force-based_algorithms_(graph_drawing)](http://en.wikipedia.org/wiki/Force-based_algorithms_%28graph_drawing%29)
    它绝对会让你大吃一惊。

我从来没有尝试过，
但我记得有可能为图中的某些顶点设置修复

你的算法最终会像

1.  创建图 G = V 中顶点的闭合路径
2.  将顶点固定到位
3.  将 N 个顶点添加到图形中，并将它们与具有相等张力值 1.0 的边完全连接
4.  Run_force_graph(G)

将图缩放到有界框

虽然它不是绝对的，因为一些凸形可能会产生奇怪的结果（拿一颗星）

最后：没读过，但标题和摘要似乎相关，
请查看 [Consistent Graph Layout for Weighted Graphs](http://www.cs.iusb.edu/~danav/papers/172_Vrajitoru.pdf)

希望这可以帮助...

* * *

## 回答 #7

> 赞同：-4
> 
> 时间：2012-06-24T18:10:06.470

更好的答案来自更好的问题。假设您要放置一组 n 个瞭望塔来覆盖一个多边形。您可以将其视为一个优化问题：找到 n 个点的 2n 个坐标，以最小化适合您目标的成本函数（或最大化价值函数）。一个可能的成本函数可以为每个点计算到其最近邻居或多边形边界的距离，以较小者为准，并计算该序列的方差作为“不均匀性”的度量。您可以使用如上所述获得的一组随机 n 点作为初始解决方案。

我在某本书中看到过这样的“瞭望塔问题”。算法、微积分或优化。

@Youssef：抱歉耽搁了；一个朋友来了，网络中断了。

@others：有一些耐心，不要那么高兴。

# linux - nasm 程序分段错误

> ID：11178416
> 
> 赞同：1
> 
> 时间：2012-06-24T14:49:41.113
> 
> 标签：linux, stack, segmentation-fault, arguments, nasm

我试图更好地理解 nasm 中的堆栈，所以我制作了这个程序来尝试将“参数”传递给 nasm 中的“函数”。我对这个大会很陌生。

```
section .data
v0s0msg0:       db 'Enter something',10
v1t0msg0L:      equ $-v0s0msg0

section .bss
v2i0inp0        resb 256
v3v0temp0   resb 256

section .text
global _start
_start:
;This is a nasm program to help me understand the stack better
mov eax,4
mov ebx,1
mov ecx,v0s0msg0
mov edx,v1t0msg0L
int 80h

mov eax,3
mov ebx,0
mov ecx,v2i0inp0
mov edx,256
int 80h

push dword v2i0inp0
call f0m0test0

mov eax,1
mov ebx,0
int 80h

f0m0test0:
pop dword[v3v0temp0]
mov eax,4
mov ebx,1
mov ecx,v3v0temp0
mov edx,256
int 80h
ret 4 
```

我可以组装它，链接它，然后运行它就好了，但是在运行它时，在我输入输入后，它只是在两个“？”之后说分段错误。寻找字符。

我试过改变

```
pop dword[v3v0temp0] 
```

类似于：

```
pop v3v0temp0 
```

甚至：

```
mov v3v0temp0,dword[ebp] 
```

和许多类似的事情，但它们最终都作为分段错误，或者作为汇编器中的错误说：操作码和操作数的无效组合我非常感谢帮助使这个程序工作，也请解释一下堆栈，使用前缀“dword”，以及“[]”字符的用途。我想解释一下如何将堆栈用于“参数”。我在 linux 操作系统上运行这个，Ubuntu 提前谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T17:09:39.477

```
f0m0test0:
pop dword[v3v0temp0] 
```

This pops the return address off the stack, not the parameter.

```
mov eax,4
mov ebx,1
mov ecx,v3v0temp0
mov edx,256
int 80h
ret 4 
```

Since you've already `pop`ed something (though not the intended parameter) off stack, `ret 4` above is almost definitely wrong.

I think you want just:

```
f0m0test0:
mov eax,4
mov ebx,1
mov ecx,[esp+4]
mov edx,256
int 80h
ret 4 
```

Alternatively, instead of the callee cleaning up the parameter with `ret 4`, have the caller do it (which, I believe, is the usual calling convention):

```
push dword v2i0inp0
call f0m0test0
add esp,4 
```

# html - CSS - 图像溢出技巧

> ID：11178417
> 
> 赞同：1
> 
> 时间：2012-06-24T14:49:48.170
> 
> 标签：html, css

我坚持使用一些设计技术，我想制作这样的图像项框

![在此处输入图像描述](../Images/b5b298eccebf1206bf2225ef0b2139c6.png)

实际图像的最大高度为**300px**，宽度为**225px**。包括图像和文本的项目框的宽度和高度为**190px x 190px**我正在使用此图像[http://farm8.staticflickr.com/7122/7424355198_72620895bd_m.jpg](http://farm8.staticflickr.com/7122/7424355198_72620895bd_m.jpg)

我尝试使用`overflow: hidden`图像项来隐藏它的高度以显示图像文本。但我得到的只是这样[http://jsfiddle.net/Dkh4q/](http://jsfiddle.net/Dkh4q/)

谁能说出我犯的错误？

谢谢！

**更新**

有关预期结果的更多信息，如果您可以登录 zerply，请查看此[http://zerply.com/christievdc/portfolio](http://zerply.com/christievdc/portfolio)示例。

**概括**

最后，我犯了一个愚蠢的错误，我在**addmenu-item中添加了额外的****}**东西。谢谢答主！

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T14:59:20.143

试试这个，对于可变的宽度和高度，你需要使用一些 javascript。

```
.addmenu-item {
margin-top:25px;
float:left;
overflow:auto;
background: #F4F4F4;
-moz-border-radius: 5px;
-webkit-border-radius: 5px;
border-radius: 5px;
-webkit-transition: color 50ms cubic-bezier(0.470, 0.000, 0.745, 0.715);
-moz-transition: color 50ms cubic-bezier(0.470, 0.000, 0.745, 0.715);
-o-transition: color 50ms cubic-bezier(0.470, 0.000, 0.745, 0.715);
transition: color 50ms cubic-bezier(0.470, 0.000, 0.745, 0.715);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T15:12:46.587

嗨，您在此元素中有一个额外的**{ ：**

```
.addmenu-item {
width: 190px;
height: 190px;
background: #F4F4F4;
-moz-border-radius: 5px;
-webkit-border-radius: 5px;
border-radius: 5px;
-webkit-transition: color 50ms cubic-bezier(0.470, 0.000, 0.745, 0.715);
-moz-transition: color 50ms cubic-bezier(0.470, 0.000, 0.745, 0.715);
-o-transition: color 50ms cubic-bezier(0.470, 0.000, 0.745, 0.715);
transition: color 50ms cubic-bezier(0.470, 0.000, 0.745, 0.715);
}
} <-------- 
```

删除这个，必须工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T15:04:45.450

不确定您使用的是插件还是与 jQuery 相关的东西，但希望以下内容会有所帮助。

```
<style type="text/css">
    .container{
         border: 1px solid #CCC;
         border-radius: 8px;
         height: 190px;
         width: 190px;
         float: left;
     }
    .container .image{
         height: 160px;
         width: 190px;
         overflow: hidden;
     }
    .container .caption{
         font-weight: bold;
         color: #666;
         background-color: #CCC;
         height: 14px; /* height 30px; */
         padding: 8px 6px;
     }
     .shadow{
         box-shadow: 4px 4px 10px #AAA; /* adds a nice little shadow */
     }
</style>

<div class="container shadow">
    <div class="image"><img src="..."/></div>
    <div class="caption">Text goes here</div>
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-13T01:20:07.123

另一种选择是使用纯 CSS 并使容器的背景图像成为所需的图像，并将背景大小属性设置为“覆盖”：

[http://www.w3schools.com/cssref/playit.asp?filename=playcss_background-size&preval=cover](http://www.w3schools.com/cssref/playit.asp?filename=playcss_background-size&preval=cover)**

# c# - 具有大密钥大小的 RSA 加密

> ID：11178418
> 
> 赞同：1
> 
> 时间：2012-06-24T14:49:49.340
> 
> 标签：c#, encryption, cryptography, rsa, padding

我正在尝试使用 RSACryptoServiceProvider 加密一个 256 字节的数组，但每次我都会遇到“错误长度”的异常。

```
byte[] seed = new byte[256];
byte[] cypherSeed = new byte[256];

RNGCryptoServiceProvider gen = new RNGCryptoServiceProvider();
gen.GetBytes(seed);

using (RSACryptoServiceProvider rsaCryptoServiceProvider = new RSACryptoServiceProvider(2560))
{
   RSAParameters param = new RSAParameters();
   param.Exponent = this.exponent;
   param.Modulus = this.modulus;

   // set public keys
   rsaCryptoServiceProvider.ImportParameters(param);
   cypherSeed = rsaCryptoServiceProvider.Encrypt(seed, false);
} 
```

我究竟做错了什么？？！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T14:57:32.723

你忘了考虑填充。消息大小小于密钥大小，因为 RSA 需要块的其余部分进行填充。

如果使用 PKCS#1 v1.5 填充，则需要 11 字节的填充，如果使用更强的 OAEP 填充，则需要 2*hashsize + 2 字节作为填充。

请参阅[RSACryptoServiceProvider.Encrypt 方法](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rsacryptoserviceprovider.encrypt.aspx)

您还应该考虑使用混合加密，使用 RSA 加密随机密钥，并使用该密钥加密实际消息。

# iphone - 预取是否应该返回任何错误？

> ID：11178424
> 
> 赞同：1
> 
> 时间：2012-06-24T14:50:30.627
> 
> 标签：iphone, ios, cocoa, core-data

我想看看我是否对使用 Core Data 进行预取有正确的理解。我正在为 Message 对象执行 batchSize 为 20 的提取请求，与 MBDate 属性具有一对一的关系。我预取这个属性：

```
[fetchRequest setRelationshipKeyPathsForPrefetching:
           [NSArray arrayWithObjects:@"date", nil]]; 
```

预取命令通过，如以下输出所示：

```
CoreData: annotation: Prefetching with key 'date'.  Got 9 rows.
CoreData: annotation: total fetch execution time: 0.0094s for 20 rows 
```

但是，在第一批中，如果我这样做

`if(message.date.isFault) NSLog(@"isFault");`,

它总是输出`isFault`，即使我预取了它！如果我尝试访问 MBDate 对象的任何属性，则会触发错误请求：

```
CoreData: sql: SELECT 0, t0.Z_PK, t0.Z_OPT, t0.ZDATE, t0.ZDATESTRING FROM ZMBDATE t0 WHERE  t0.Z_PK = ? 
CoreData: annotation: sql connection fetch time: 0.0008s
CoreData: annotation: total fetch execution time: 0.0014s for 1 rows.
CoreData: annotation: fault fulfilled from database for : 0x85d22b0 <x-coredata://736D04C4-7DB3-40B7-B208-79B5DFD68260/MBDate/p61> 
```

为什么预取不通过？为什么我的对象仍然有缺陷？我知道很难给出任何明确的答案，但任何提示或想法都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T06:44:46.650

你可以在不设置批量大小的情况下尝试同样的事情吗？

*fetchBatchSize*下的 NSFetchRequest 类参考中有一个奇怪的注释：

> 如果您设置非零批量大小，则执行提取时返回的对象集合被分成多个批次。执行获取时，会评估整个请求并记录所有匹配对象的身份，但一次从持久存储中获取不超过 batchSize 对象的数据。执行请求返回的数组将是一个代理对象，可以根据需要透明地对批次进行故障处理。

就好像你设置了 batchSize 返回的对象无论如何都会出错。

# php - Laravel 类和 API 自动包含

> ID：11178425
> 
> 赞同：0
> 
> 时间：2012-06-24T14:50:38.827
> 
> 标签：php, laravel

Laravel 的新手（来自 Java spring），同时使用

```
Route::get('/', function()
{
    return "Hello World!";
}); 
```

上面，我们不需要包含任何头文件（在这个和所有其他 LaraveL 的配置文件中），为什么会这样！，因为 Route 在不同的命名空间中

[http://laravel.com/api/class-Laravel.Routing.Route.html](http://laravel.com/api/class-Laravel.Routing.Route.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T15:18:00.357

Laravel 使用 PHP 的 class_alias 函数 [1] 使一些核心类在没有命名空间的情况下可用。在 'aliases' 选项 [2] 中的 application/config/application.php 中有一个用于配置 Laravel\Autoloader 类的这些类的列表。

1.  [http://php.net/class_alias](http://php.net/class_alias)
2.  [https://github.com/laravel/laravel/blob/master/application/config/application.php#L141-183](https://github.com/laravel/laravel/blob/master/application/config/application.php#L141-183)

# javascript - 如何在模板中将数据从 Flask 传递到 JavaScript？

> ID：11178426
> 
> 赞同：151
> 
> 时间：2012-06-24T14:50:39.793
> 
> 标签：javascript, python, flask, jinja2

我的应用程序调用返回字典的 API。我想将此字典中的信息传递给视图中的 JavaScript。具体来说，我在 JS 中使用 Google Maps API，所以我想向它传递一个包含长/纬度信息的元组列表。我知道这`render_template`会将这些变量传递给视图，以便它们可以在 HTML 中使用，但是我如何将它们传递给模板中的 JavaScript？

```
from flask import Flask
from flask import render_template

app = Flask(__name__)

import foo_api

api = foo_api.API('API KEY')

@app.route('/')
def get_data():
    events = api.call(get_event, arg0, arg1)
    geocode = event['latitude'], event['longitude']
    return render_template('get_data.html', geocode=geocode) 
```

* * *

## 回答 #1

> 赞同：176
> 
> 时间：2012-06-24T14:59:00.967

您可以`{{ variable }}`在模板中的任何位置使用，而不仅仅是在 HTML 部分中。所以这应该工作：

```
<html>
<head>
  <script>
    var someJavaScriptVar = '{{ geocode[1] }}';
  </script>
</head>
<body>
  <p>Hello World</p>
  <button onclick="alert('Geocode: {{ geocode[0] }} ' + someJavaScriptVar)" />
</body>
</html> 
```

把它想象成一个两阶段的过程：首先，Jinja（Flask 使用的模板引擎）生成你的文本输出。这将发送给执行他看到的 JavaScript 的用户。如果您希望 Flask 变量在 JavaScript 中作为数组可用，则必须在输出中生成数组定义：

```
<html>
  <head>
    <script>
      var myGeocode = ['{{ geocode[0] }}', '{{ geocode[1] }}'];
    </script>
  </head>
  <body>
    <p>Hello World</p>
    <button onclick="alert('Geocode: ' + myGeocode[0] + ' ' + myGeocode[1])" />
  </body>
</html> 
```

Jinja 还提供了来自 Python 的更高级的构造，因此您可以将其缩短为：

```
<html>
<head>
  <script>
    var myGeocode = [{{ ', '.join(geocode) }}];
  </script>
</head>
<body>
  <p>Hello World</p>
  <button onclick="alert('Geocode: ' + myGeocode[0] + ' ' + myGeocode[1])" />
</body>
</html> 
```

您还可以使用`for`循环、`if`语句等，更多信息请参见[Jinja2 文档](http://jinja.pocoo.org/docs/)。

另外，请查看 Ford 的回答，他指出[`tojson`](http://jinja.pocoo.org/docs/2.10/templates/#tojson)过滤器是[Jinja2 标准过滤器集的](http://jinja.pocoo.org/docs/dev/templates/#builtin-filters)补充。

*2018 年 11 月编辑：`tojson`现在包含在 Jinja2 的标准过滤器集中。*

* * *

## 回答 #2

> 赞同：130
> 
> 时间：2014-04-14T21:58:01.140

将几乎所有 Python 对象转换为 JavaScript 对象的理想方法是使用 JSON。JSON 是一种很好的系统间传输格式，但有时我们会忘记它代表 JavaScript Object Notation。这意味着将 JSON 注入模板与注入描述对象的 JavaScript 代码相同。

Flask 为此提供了一个 Jinja 过滤器：[`tojson`](http://flask.pocoo.org/docs/templating/#standard-filters)将结构转储为 JSON 字符串并将其标记为安全，以便 Jinja 不会自动转义它。

```
<html>
  <head>
    <script>
      var myGeocode = {{ geocode|tojson }};
    </script>
  </head>
  <body>
    <p>Hello World</p>
    <button onclick="alert('Geocode: ' + myGeocode[0] + ' ' + myGeocode[1])" />
  </body>
</html> 
```

这适用于任何可序列化 JSON 的 Python 结构：

```
python_data = {
    'some_list': [4, 5, 6],
    'nested_dict': {'foo': 7, 'bar': 'a string'}
} 
```

```
var data = {{ python_data|tojson }};
alert('Data: ' + data.some_list[1] + ' ' + data.nested_dict.foo + 
      ' ' + data.nested_dict.bar); 
```

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2017-06-30T07:17:51.370

在 HTML 元素上使用[数据属性](https://developer.mozilla.org/en-US/docs/Learn/HTML/Howto/Use_data_attributes)可以避免使用内联脚本，这反过来意味着您可以使用[更严格的 CSP 规则](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/script-src#Unsafe_inline_script)来提高安全性。

像这样指定数据属性：

```
<div id="mydiv" data-geocode='{{ geocode|tojson }}'>...</div> 
```

然后在静态 JavaScript 文件中访问它，如下所示：

```
// Raw JavaScript
var geocode = JSON.parse(document.getElementById("mydiv").dataset.geocode);

// jQuery
var geocode = JSON.parse($("#mydiv").data("geocode")); 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2017-05-15T18:21:54.707

或者，您可以添加一个端点来返回您的变量：

```
@app.route("/api/geocode")
def geo_code():
    return jsonify(geocode) 
```

然后做一个 XHR 来检索它：

```
fetch('/api/geocode')
  .then((res)=>{ console.log(res) }) 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2018-07-04T17:30:01.967

工作答案已经给出，但我想添加一个检查，以防烧瓶变量不可用。当您使用：

```
var myVariable = {{ flaskvar | tojson }}; 
```

如果存在导致变量不存在的错误，则由此产生的错误可能会产生意想不到的结果。为了避免这种情况：

```
{% if flaskvar is defined and flaskvar %}
var myVariable = {{ flaskvar | tojson }};
{% endif %} 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-02-10T11:34:45.013

对于那些想要将变量传递给使用烧瓶获取的脚本的人来说，这只是另一种替代解决方案，我只能通过在外部定义变量然后调用脚本来使其工作，如下所示：

```
 <script>
    var myfileuri = "/static/my_csv.csv"
    var mytableid = 'mytable';
    </script>
    <script type="text/javascript" src="/static/test123.js"></script> 
```

如果我在其中输入 jinja 变量`test123.js`不起作用，您将收到错误消息。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-12-29T19:05:35.710

```
<script>
    const geocodeArr = JSON.parse('{{ geocode | tojson }}');
    console.log(geocodeArr);
</script> 
```

这使用 jinja2 将地理编码元组转换为 json 字符串，然后 javascript`JSON.parse`将其转换为 javascript 数组。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-12-09T05:13:39.437

好吧，我有一个棘手的方法来完成这项工作。思路如下——

在 HTML body 中制作一些不可见的 HTML 标签，如`<label>, <p>, <input>`etc.，并在标签 id 中制作模式，例如，在标签 id 中使用列表索引，在标签类名称中使用列表值。

在这里，我有两个相同长度的列表 maintenance_next[] 和 maintenance_block_time[]。我想使用烧瓶将这两个列表的数据传递给 javascript。所以我取了一些不可见的标签标签并将其标签名称设置为列表索引的模式并将其类名设置为索引处的值。

```
{% for i in range(maintenance_next|length): %}
<label id="maintenance_next_{{i}}" name="{{maintenance_next[i]}}" style="display: none;"></label>
<label id="maintenance_block_time_{{i}}" name="{{maintenance_block_time[i]}}" style="display: none;"></label>
{% endfor%}
```

在此之后，我使用一些简单的 javascript 操作在 javascript 中检索数据。

```
<script>
var total_len = {{ total_len }};

for (var i = 0; i < total_len; i++) {
    var tm1 = document.getElementById("maintenance_next_" + i).getAttribute("name");
    var tm2 = document.getElementById("maintenance_block_time_" + i).getAttribute("name");

    //Do what you need to do with tm1 and tm2.

    console.log(tm1);
    console.log(tm2);
}
</script>
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2022-01-26T16:41:33.157

真棒线程！这有很大帮助！这是我完成的伪代码：

***我的页面.html***

```
<script>
    var user = {{username}}
</script> 
```

***我的页面.js***

```
console.log('username = ' + user) 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2017-11-22T04:28:56.370

有些js文件来自网络或者库，不是自己写的。他们得到变量的代码如下：

```
var queryString = document.location.search.substring(1);
var params = PDFViewerApplication.parseQueryString(queryString);
var file = 'file' in params ? params.file : DEFAULT_URL; 
```

[此方法](https://stackoverflow.com/questions/47346167/flask-render-template-with-url-parameter)使js文件不变（保持独立），并正确传递变量！

# objective-c - 以编程方式启用/禁用 iOS 锁定

> ID：11178430
> 
> 赞同：0
> 
> 时间：2012-06-24T14:51:02.820
> 
> 标签：objective-c, ios

我正在寻找一种方法来使用您的位置来确定您是否需要解锁手机，例如在家里您只需滑动即可打开，但当您离开时，您需要输入您的密码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T14:57:30.133

不，您不能，因为您的应用程序将在沙盒中运行，因此它无法与整个系统（跳板等）进行交互。

# drupal-7 - 在首页插入一块固定大小的块

> ID：11178432
> 
> 赞同：0
> 
> 时间：2012-06-24T14:51:33.450
> 
> 标签：drupal-7, drupal-theming

我想做一个块，其内容等于插入的最后一篇文章。也必须有一个固定的尺寸，并且永远留在家里。怎么做？

另见图片：

![在此处输入图像描述](../Images/a7a420f02b4c88ff3a02b45705a75f12.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T11:30:03.410

启动 Views，创建一个显示节点的新块视图，在*sort criteria*下，使用节点发布日期，然后在*Pager*下，选择*Display a specified number of items*并将其设置为 1。

转到*Structure -> Blocks*并设置您的新块视图以显示在主页/首页上。

# ios - 如何阻止 iOS 将小的直角三角形字符转换为矩形盒装三角形符号？

> ID：11178433
> 
> 赞同：34
> 
> 时间：2012-06-24T14:52:03.480
> 
> 标签：ios, unicode

![在此处输入图像描述](../Images/62f399834ce54d8df6c2b896a829a393.png) 我尝试输入小直角三角形和右箭头字符，iOS 将它们转换为分别带有直角三角形和右箭头的矩形图标。我可以声明一种不同的字体来阻止这种情况的发生吗？或者是否有我需要关闭的默认设置？

所有需要的是一个黑色的小直角三角形：

十进制十六进制
▸ 9656 ▸ 25B8

这是代码：

```
NSString *title = [NSString  stringWithFormat:@"%d payments of %@ ➡ ▶", duration, [Utils formatPrice:payment]];
   [button setTitle: title forState: UIControlStateNormal]; 
```

任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-18T09:02:18.927

这不是关于改变字体，而是关于 unicode 变化。在 Unicode 6.1 上，一个 unicode 代码点可以有多个字形，您可以使用变体选择器选择那些字形。

关于 emoji，您可以使用 U+FE0E(@"\U0000FE0E") 选择文本样式图表。（并且，U+FE0F(@"\U0000FE0F") 用于 Apple Color Emoji）。

例如，LEFT-POINTING TRIANGLE 的 unicode 码位为 U+25C0(@"\U000025C0")，您可以指定不使用 Apple Color Emoji，而是使用非颜色符号，如 @"\U000025C0\U0000FE0E"。

此外，iOS 模拟器（适用于 Mountain Lion 上的 iOS6）和实际设备（iOS6）在变体选择器处理方面存在一些差异，我猜可能是因为 Mountain Lion 对 Unicode 6.1 有更多支持。

例如，如果我没有指定选择器，我会在 iOS6 设备上看到非颜色三角形，但在 iOS6 模拟器（Mountain Lion）上看到 Apple 颜色三角形，用于 UIBarButton。

因此，最好同时检查模拟器和实际设备，但无论如何始终使用 Unicode 变体选择器看起来更安全。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2016-05-12T14:15:23.443

强制浏览器在 iPad/iPhone 上呈现 HTML 实体有点挑战性，但我设法找到了解决方案，这就是诀窍。

而不是直接使用 HTML 实体：

```
&#9664; <!-- ◀ BLACK LEFT-POINTING TRIANGLE -->
&#9654; <!-- ▶ BLACK RIGHT-POINTING TRIANGLE --> 
```

我在 HTML 中创建了支持元素，其中包含以下类：

```
<span class="left-pointing-triangle">&nbsp;</span>
<span class="right-pointing-triangle">&nbsp;</span> 
```

使用 CSS [::after](https://developer.mozilla.org/en-US/docs/Web/CSS/::after)伪元素覆盖了内容：

```
.left-pointing-triangle::after {
  content: "\25C0 \FE0E";
}
.right-pointing-triangle::after {
  content: "\25B6 \FE0E";
} 
```

重要的部分是使用`content: "\25C0 \FE0E"`，而不仅仅是符号本身`content: "\25C0"`。它可以在不同 iOS 版本的 iPad 和 iPhone 上完美运行。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2016-10-20T07:53:40.803

我使用这些 un​​icode 字符来阻止 iOS 摆弄：

直角三角形：► (►)

左三角形：◄ (◄)

## 更新

如果您要寻找更多的三角形：

上三角：▲ (▲)

下三角：▼ (▼)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-26T19:24:34.227

要显示黑色右箭头表情符号，我们应该选择`&#9656;`代替`&#9654;`或`&#9658;`以避免Apple Emoji

`&#9656;`比其他两个小，但您可以设置`font-size`来调整它。为我工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-27T22:23:54.193

您可以在现代浏览器上渲染 SVG 中的小三角形。

直角三角形：

```
<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="8" height="16" viewBox="0 0 5 10">
  <polygon fill="black" points="0,0 5,5 0,10" />
</svg> 
```

左三角形：

```
<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="8" height="16" viewBox="0 0 5 10">
  <polygon fill="black" points="0,5 5,0 5,10" />
</svg> 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2012-06-24T17:50:07.663

这似乎是 25B8 的系统字体字形。我假设 2B05（左黑箭头）和 25C0（黑左三角）也会发生同样的情况。它们是 Apple Emoji 的一部分。

您可能想尝试使用不同的字体。

希望有帮助。

# c++ - 类声明或定义中的静态变量？

> ID：11178434
> 
> 赞同：13
> 
> 时间：2012-06-24T14:52:05.067
> 
> 标签：c++, static-members

我是 C++ 新手。
我有这样的课：

```
class CodeTest
{
private:
    static const int TOTAL=100;
}; 
```

是*声明*还是*定义*？`TOTAL`_

 **当我阅读 Scott Meyer 的书时，有人提到在实现文件中我们需要定义如下内容：

```
const int CodeTest::TOTAL; 
```

为什么需要这个？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-24T15:05:13.747

*头文件之外的*实现文件中的声明是必需的，因为否则每个包含此头文件的翻译单元都将定义自己的对象（即，它自己的变量存储）。

这将违反[单一定义规则](http://en.wikipedia.org/wiki/One_Definition_Rule)。结果将是，例如，如果变量在一个翻译单元中发生更改，则该更改对于其他翻译单元将是不可见的。现在，这不是那么相关，因为变量是恒定的。然而，获取它的地址也会在不同的翻译单元中产生不同的指针。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-24T15:11:00.400

由于这引起了一些争议，我查看了标准，@Nawaz 是对的，我错了。

**9.4.2/2**

> 如果`static`数据成员是 const 整数类型 [...]。如果在程序中使用该成员，则该成员仍应在名称空间范围内定义，并且名称空间范围定义不应包含初始值设定项。

所以你有一个声明，变量被初始化为一个值。在类之外，您**必须**定义变量，但不能为其赋值。

具有`const`整数类型的部分仅适用于这种特殊情况 - 即您*可以*在类内部初始化所述类型，但**必须**在外部定义所有`static`数据成员。

 **### 要回答这个问题：

无论定义是否需要在类外部（取决于您是否*使用*成员），类内部的任何内容（初始化与否）**都只是一个声明**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T15:07:17.830

**问题的第一部分：**

这一行：`static const int TOTAL=100;`是一个声明，后面跟着一个初始化。

`TOTAL`是一个标识符。

**问题的第二部分**

`const int CodeTest::TOTAL`需要初始化变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-12T11:07:35.860

```
static const int TOTAL=100; // is a declaration followed by an initialisation. 
```

从 C++ 标准第 3.1 节：

> 声明将名称引入翻译单元或重新声明先前声明引入的名称。声明指定这些名称的解释和属性。

下一段声明声明是一个定义，除非......它在类定义中声明了一个静态成员：

```
struct X
{
    int a;         // defines a
    static int b;  // declares b
}; 
```

您可以在此处阅读有关定义和声明的更多信息：[SO：定义和声明之间有什么区别？](https://stackoverflow.com/questions/1410563/what-is-the-difference-between-a-definition-and-a-declaration)****

# c# - 从后面的代码访问输入隐藏字段 Title 属性

> ID：11178438
> 
> 赞同：1
> 
> 时间：2012-06-24T14:53:13.807
> 
> 标签：c#, asp.net

我有一个 HTML 隐藏字段：

```
<input type="hidden" title="aaa" value="bbb"  id="TAB" runat="server" /> 
```

我想从后面的代码中访问 title 属性，比如如果它是 input="text"，则有一个选项 TAB.ToolTip，但不是用于“隐藏”。是否可以获得标题，因为它像属性一样存在？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T15:10:05.417

我假设您的控件被网络服务器识别为 HtmlInputHidden 实例。您应该能够使用 Attributes 属性获取控件的所有属性（请参阅[http://msdn.microsoft.com/en-us/library/system.web.ui.htmlcontrols.htmlcontrol.attributes(v=vs.90 )](http://msdn.microsoft.com/en-us/library/system.web.ui.htmlcontrols.htmlcontrol.attributes%28v=vs.90%29) )

在你后面的代码中：

```
 TAB.Attributes["title"] = "aaa"; 
```

# facebook - 如何使用 Facebook 最新的 PHP SDK 发布嵌入式视频？

> ID：11178439
> 
> 赞同：0
> 
> 时间：2012-06-24T14:53:23.310
> 
> 标签：facebook, video, sdk, facebook-php-sdk, publish

我知道这个问题已经被提出了很多次，但是他们在 Facebook 不断地改变事情，而我在网络上发现的众多方法中没有一种对我有用。也许它以前有效，但不再有效。

我有一个网页，在我们的皮肤 jwplayer 中播放视频。所有 og 标签都设置得很漂亮，因此当访问者喜欢该页面时，它的标题、描述、拇指和自定义 Flash 播放器会很好地共享在用户墙上。视频甚至可以直接在墙上播放，在嵌入式和定制的 Flash 播放器中。所以一切都按预期工作。

但是！.. 我们希望将我们的新帖子自动发布到 Facebook 上的网站页面上，并且我们希望它们看起来与共享时完全相同。人们可能会期望通过 PHP SDK 简单地发布一个链接就足够了，其余的工作将由 facebook 完成。但事实并非如此。在后一种情况下，它似乎不注意 og 标签。

这样做的正确方法是什么？是否可以强制 facebook 查看 og 标签？或者如何以类似的方式发布带有视频的帖子，但通过 PHP SDK？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T15:31:52.287

> 人们可能会期望通过 PHP SDK 简单地发布一个链接就足够了，其余的工作将由 facebook 完成。但事实并非如此。

你*到底*在发布什么——只是一个链接，还是*包含*链接的帖子？

（有关创建提要对象的两种*类型*之间的区别，请参阅[https://developers.facebook.com/docs/reference/api/user/#posts](https://developers.facebook.com/docs/reference/api/user/#posts)与[https://developers.facebook.com/docs/reference/api/用户/#links](https://developers.facebook.com/docs/reference/api/user/#links) )

> 是否可以强制 facebook 查看 og 标签？

通常它不需要任何进一步的操作。

但是，您是否尝试过在发布之前通过[Facebook 调试器将您的新帖子 URL 放入？](https://developers.facebook.com/tools/debug)

# java - 是否可以在spring web flow驱动的html页面之间传输数据？

> ID：11178445
> 
> 赞同：0
> 
> 时间：2012-06-24T14:54:08.717
> 
> 标签：java, javascript, spring, jakarta-ee, spring-webflow

我知道在之间传递数据`jsp`在 spring web flow 之间传递数据。

是否可以在spring web flow驱动的html页面之间传输数据。我不想使用 HTML5 本地存储功能。

例子：

`Page 1:`员工 ID 的搜索框。
`Page 2:`员工详细信息的搜索结果。

我能想到的两种方法：

1.  *通过ajax获取第1页*的员工详细信息，并将结果传递到*第2页*。
2.  将员工 id 传递到*第 2 页*并通过 ajax in 获取结果`onload`。

在这两种情况下，我都需要传递任何变量/数据。我对此感到困惑。

Spring webflow中是否有任何我可以使用的东西？

在此先感谢，伊斯瓦尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T15:12:25.430

当然你可以做任何一个。您需要在两者之间有一个侦听器来接受来自第 1 页的员工 ID，搜索详细信息，将结果放入请求或会话范围，然后重定向到显示页面。你甚至不需要 Spring web flow 来做这件事；一个简单的控制器就可以了。

我什至不明白你为什么需要两页。从一个文本框或下拉列表中进行选择以填充同一页面上的第二个文本框是很常见的。

# javascript - 从画布中动态“卸载”处理 JS 草图

> ID：11178450
> 
> 赞同：8
> 
> 时间：2012-06-24T14:54:27.360
> 
> 标签：javascript, processing, processing.js

我正在使用一些 javascript 来允许用户使用以下方法动态加载单击到画布元素的草图：

> Processing.loadSketchFromSources('canvas_id', ['sketch.pde']);

如果我第二次（或第三次...）调用 Processing.loadSketchFromSources(...) ，它会将第二次（或第三次...）.pde 文件加载到画布上，这是我所期望的。

我希望用户能够单击另一个链接来加载不同的草图，从而有效地卸载前一个。有没有我可以调用的方法（或我可以使用的技术）来检查 Processing 是否有另一个草图正在运行，如果有，告诉它先卸载它？

我忽略了某种 Processing.unloadSketch() 方法吗？我可以简单地放下画布 DOM 对象并重新创建它，但是 (1) 在我需要针时似乎使用锤子，并且 (2) 它会导致我想避免的屏幕闪烁。

我不是 JS 专家，但我已尽力查看 processing.js 源代码以查看可能存在的其他功能，但我碰壁了。我想也许我可以查看 Processing.Sketches.length 以查看是否已经加载了某些内容，但是只是将其从数组中弹出似乎不起作用（不认为会这样）。

我正在使用 ProcessingJS 1.3.6。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T02:54:29.113

如果其他人来寻找解决方案，这就是我所做的。请注意，这被放置在一个闭包内（为简洁起见，此处不包括在内）——因此*this.launch = function()*，等等等等等等... YMMV。

```
/**
 * Launches a specific sketch. Assumes files are stored in
 * the ./sketches subdirectory, and your canvas is named g_sketch_canvas
 * @param {String} item The name of the file (no extension)
 * @param {Array} sketchlist Array of sketches to choose from
 * @returns true
 * @type Boolean
 */
this.launch = function (item, sketchlist) {
    var cvs = document.getElementById('g_sketch_canvas'),
        ctx = cvs.getContext('2d');
    if ($.inArray(item, sketchlist) !== -1) {
        // Unload the Processing script
        if (Processing.instances.length > 0) {
            // There should only be one, so no need to loop
            Processing.instances[0].exit();
            // If you may have more than one, then use this loop:
             for (i=0; i < Processing.instances.length; (i++)) {
            //  Processing.instances[i].exit();
            //}
        }
        // Clear the context
        ctx.setTransform(1, 0, 0, 1, 0, 0);
        ctx.clearRect(0, 0, cvs.width, cvs.height);
        // Now, load the new Processing script
        Processing.loadSketchFromSources(cvs, ['sketches/' + item + '.pde']);
    }
    return true;
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T09:33:46.120

我不熟悉 Processing.js，但该站点的示例代码有：

```
var canvas = document.getElementById("canvas1");
// attaching the sketchProc function to the canvas
var p = new Processing(canvas, sketchProc);
// p.exit(); to detach it 
```

因此，在您的情况下，您需要在创建第一个实例时保留它的句柄：

```
var p1 = Processing.loadSketchFromSources('canvas_id', ['sketch.pde']); 
```

当您准备“卸载”并加载新草图时，我猜（但不知道）您需要自己清除画布：

```
p1.exit();
var canvas = document.getElementById('canvas_id'); 
var context = canvas.getContext('2d');
context.clearRect(0, 0, canvas.width, canvas.height);
// Or context.fillRect(...) with white, or whatever clearing it means to you 
```

然后，从事物的声音，您可以随意附加另一个草图：

```
var p2 = Processing.loadSketchFromSources('canvas_id', ['sketch2.pde']); 
```

同样，我实际上并不熟悉该库，但这从文档中看起来很简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-23T14:43:17.240

从 processing.js 1.4.8 开始，Andrew 接受的答案（以及我在这里找到的其他答案）似乎不再起作用。

这对我有用：

```
 var pjs = Processing.getInstanceById('pjs');
    if (typeof pjs !== "undefined") {
      pjs.exit();
    }

    var canvas = document.getElementById('pjs')
    new Processing(canvas, scriptText); 
```

其中`pjs`是运行脚本的画布元素的 id。

# objective-c - 我们可以访问 iPhone 联系人吗？

> ID：11178454
> 
> 赞同：0
> 
> 时间：2012-06-24T14:54:32.443
> 
> 标签：objective-c, ios, xcode4.3

我认识了很多新朋友。我想知道我最近打电话、发消息或添加的联系人。

好吧，没有应用程序。所以我要做一个。

可能吗？我们有 API 吗？

# django - django celery rabbitmq 执行延迟

> ID：11178455
> 
> 赞同：0
> 
> 时间：2012-06-24T14:54:37.793
> 
> 标签：django, rabbitmq, celery, django-celery

我使用Django-Celery +rabbitmq执行一些异步任务，我定义了一个队列'sendmail'来执行发送电子邮件任务，发送邮件由特定任务触发（这个任务有自己的队列），但现在我遇到了一个问题，之后具体任务完成，邮件有时一次发送，有时需要5-20分钟。我想知道是什么原因造成的。

调用 task.delay() 时，Django-celery 会将 taskname 和 param 作为消息打包到 rabbitmq。

我想知道消息什么时候到rabbitmq，但是使用web管理工具只能看到总消息，看不到每条消息的详细信息，尤其是消息到达的时间。Django-celery 日志只能看到从代理时间和执行任务时间得到的工作。我想知道所有相关的时间点以确定主要消耗的时间是哪一步。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T16:30:22.490

Django-Celery 确实（我相信）按任务报告任务数据。当您同步数据库时，它会创建一组可通过管理员访问的监控表。但是，为了将这些任务记录在这些表中，您需要在 django 上下文中运行 celerycam 程序（python ./manage.py celerycam）。celerycam 程序会每隔一秒左右（默认情况下）拍摄您的任务的“快照”，并记录有关它们的信息。另一个有用的监控工具是 celerymon 程序（它也必须在 django 上下文中运行）。这是一个命令行 ncurses 程序，可在任务发生时报告有关任务的实时信息。最后，rabbitmqctrl 有很多选项可能有助于监控。

这是文档中一个特别有用的页面：http: [//celery.github.com/celery/userguide/monitoring.html](http://celery.github.com/celery/userguide/monitoring.html)

无论如何，这是我在使用 celery 时用来监控我的任务的。

# sql-server - 在 SQL Server 代理作业中处理 OLAP 多维数据集失败

> ID：11178457
> 
> 赞同：2
> 
> 时间：2012-06-24T14:54:44.893
> 
> 标签：sql-server, process, ssas, jobs, cube

我有这个 SQL Server 代理工作。在远程服务器上处理 OLAP 多维数据集的工作中有一个步骤。步骤类型是 Analysis Services 命令。下面是命令：

```
<Process xmlns="http://schemas.microsoft.com/analysisservices/2003/engine">
  <Object>
    <DatabaseID>DatabaseName</DatabaseID>
  </Object>
  <Type>ProcessFull</Type>
</Process> 
```

处理该步骤时，它会在 40 分钟后失败，并显示以下错误消息：

以用户身份执行：DOMAIN\user。Microsoft.AnalysisServices.Xmla.ConnectionException：连接超时或丢失。

现在，我在远程 Analysis Services 服务器上授予了该用户管理员权限。我可以从 Management Studio 中连接到此服务器并成功处理数据库。

但由于某种原因，这项工作似乎无法处理多维数据集。

帮助？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T01:22:50.223

听起来可能需要增加 ExternalCommandTimeout 属性。如果是这种情况，请连接到 Management Studio 中的分析服务服务器实例。右键单击服务器并选择属性。选择“显示高级（全部）属性”并增加“ExternalCommandTimeout”的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T11:49:41.700

40 分钟似乎是 SSAS 的超时时间。

您的 DSV 是否连接到多个数据源？它可能连接到第一个并在第二个失败。或者它可能是您的 sql server 上的死锁。您是否在服务器上运行 sp_who2 以查看进程的状态？

# javascript - javascript + svg：在样式之外声明时获取填充

> ID：11178458
> 
> 赞同：0
> 
> 时间：2012-06-24T14:54:49.310
> 
> 标签：javascript, svg

我想在 svg 中替换另一个渐变，所以我需要迭代（可能递归）每个 svg 项目以获得

我查看了 svg doc @ MDN [https://developer.mozilla.org/fr/SVG/Element/ellipse](https://developer.mozilla.org/fr/SVG/Element/ellipse) 但它已损坏（访问被拒绝，没有示例，很多损坏的链接）

和 MSDN 上的完全不同 [http://msdn.microsoft.com/en-us/library/ie/ff972071%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/ie/ff972071%28v=vs.85%29.aspx)

所以我搜索有关如何访问 svg 元素的填充属性的任何指针，但是它已被定义。类似于 getComputedFill 函数

```
<svg 
 version="1.1"
   xmlns="http://www.w3.org/2000/svg" 
   xmlns:svg="http://www.w3.org/2000/svg"
   xmlns:dc="http://purl.org/dc/elements/1.1/"
   xmlns:cc="http://creativecommons.org/ns#"
   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
   xmlns:xlink="http://www.w3.org/1999/xlink"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"

 >
  <defs>
    <script>
        <![CDATA[

        function infothis(ref)
        {
        alert(ref + " " + ref.fill + " " + ref.fillOpacity); // why can't I get "url(#grad1)"  and 0.5 when clicking ellipse1
        //alert(ref.style.getPropertyValue("fill"));           // somewhat okwhy can't I get "url(#grad2)"  when clicking ellipse2

        }

        ]]>
    </script>
    <linearGradient 
    dc:title="red black filter" 
    dc:rights="CC-BY" 
    dc:description="basic filter ranging from black to red"
    id="grad1" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:rgb(0,0,0);stop-opacity:1" />
      <stop offset="100%" style="stop-color:rgb(255,0,0);stop-opacity:1" />
    </linearGradient>

    <linearGradient id="grad2" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:rgb(0,0,0);stop-opacity:1" />
      <stop offset="100%" style="stop-color:rgb(255,0,255);stop-opacity:1" />
    </linearGradient>

    <ellipse id="ellipse0" cx="150" cy="170" rx="85" ry="55" fill="url(#grad2)" />
  </defs>

  <ellipse id="ellipse1" cx="200" cy="70" rx="85" ry="55" fill="url(#grad1)" fill-opacity="0.5" onclick="infothis(this)" />
  <ellipse id="ellipse2" cx="100" cy="70" rx="85" ry="55" style="fill:url(#grad2)" onclick="infothis(this)" />
  <use  xlink:href="#ellipse0"/>
</svg> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T19:06:44.320

这个怎么样...

```
alert(document.defaultView.getComputedStyle(ref, null).getPropertyValue("fill")); 
```

# python - Win32com.client com_error

> ID：11178464
> 
> 赞同：2
> 
> 时间：2012-06-24T14:56:13.183
> 
> 标签：python, error-handling

今天突然出现以下错误。

```
import win32com.client
xl=win32com.client.Dispatch("Excel Application")

Traceback (most recent call last):
  File "<pyshell#3>", line 1, in <module>
    xl=win32com.client.Dispatch("Excel Application")
  File "C:\Python27\lib\site-packages\win32com\client\__init__.py", line 95, in Dispatch
    dispatch, userName = dynamic._GetGoodDispatchAndUserName(dispatch,userName,clsctx)
  File "C:\Python27\lib\site-packages\win32com\client\dynamic.py", line 108, in     _GetGoodDispatchAndUserName
    return (_GetGoodDispatch(IDispatch, clsctx), userName)
  File "C:\Python27\lib\site-packages\win32com\client\dynamic.py", line 85, in  _GetGoodDispatch
    IDispatch = pythoncom.CoCreateInstance(IDispatch, None, clsctx, pythoncom.IID_IDispatch)
com_error: (-2147221005, 'Invalid class string', None, None) 
```

怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T15:07:41.340

对于 anwser 来说可能有点晚了，但是您缺少 Excel 和 Application 之间的点。“Excel.Application”）。

# css - 在css中包含父元素中的子元素

> ID：11178465
> 
> 赞同：1
> 
> 时间：2012-06-24T14:56:16.540
> 
> 标签：css, jquery-ui, parent-child, jquery-ui-draggable

我有一个包含在包装器中的水平 jquery-ui 拖放列表，其中元素是动态添加的。（每个元素的宽度为223px，每增加一个新元素，列表宽度增加223px）

```
$("#list_wrapper").animate({
width: "+=446"
}, 'slow')
$("#list_items").animate({
width: "+=223"
}, 'slow') 
```

这两个元素的样式是：

```
#list_wrapper{
width:672px;
position:relative;
}

#list_items {
height: 290px;
width: 672px;
position: relative;
padding: 0 0 0 2px;
z-index: 0;
cursor: e-resize;
border-width: 0 2px;
} 
```

现在，要浏览列表，我们可以拖动列表或者为了方便我创建了导航按钮。每次单击导航按钮时，“#list_items”元素都会向右或向左移动 223 像素：

```
$("#btn_next").click(function () {
$("#list_items").animate({
left: "-=223"
}, 100);
});
$("#btn_prev").click(function () {
$("#list_items").animate({
left: "+=223"
}, 100); 
```

为了确保列表不会超出视图，我已将这些属性添加到 .draggable。

```
$("#list_items").draggable({
axis: "x",
containment: "parent"
}); 
```

这可以确保列表在拖动时保留在容器中（“#cart_wrapper”），但是当使用导航按钮时，此方法失败。那么，在使用导航按钮时，是否有任何 css 技巧可用于将列表保留在其父级中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T19:44:53.263

我没有测试你的代码，但也许你可以在点击事件上这样做：

*   获取当前的**左**值，可以通过拖动改变
*   计算与下一个/上一个 223 像素（或下一个）的差异
*   对这种差异进行动画处理（所以你要确保一个元素是焦点）
*   在左边检查你没有低于 0
*   在右边缘检查您是否只击中 223px * 项目并且不要越过它

使用您的代码，您可以将元素移动到无限中，因为您不检查是否到达边缘。:)

# c# - C# 从 HTML 文档中提取内容

> ID：11178466
> 
> 赞同：4
> 
> 时间：2012-06-24T14:56:18.357
> 
> 标签：c#, html, windows-phone-7

我想知道如何在发布链接时执行类似于 Facebook 的操作，或者缩短可以获取页面标题及其内容的链接服务。

例子：

![例子](../Images/4f315867c5b4427f49c11e074dabc1b9.png)

我的想法是只从网页中获取纯文本，例如，如果 url 是报纸的文章，我如何才能只获取新闻的文本，如图所示。现在我一直在尝试使用 HtmlAgilityPack，但我永远无法清除文本。

请注意，此应用适用于 Windows Phone 7。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T15:05:11.110

你在正确的轨道上`HtmlAgilityPack`。

如果您想要网站的所有文本，请选择`innerText`属性。但我建议您使用`meta description`标签（如果有）。

**编辑**- 去`meta description`。我相信这就是 Facebook 正在做的事情：

*Facebook 链接示例*

![Facebook 链接示例](../Images/561df51c8dd1dfb5e00f147c9ed0f463.png)

*网站来源*

![网站来源](../Images/a6cdfdd91126c8fde51ca130e5483dc5.png)

# android - 如何同时播放多个声音文件？

> ID：11178469
> 
> 赞同：2
> 
> 时间：2012-06-24T14:56:36.833
> 
> 标签：android, media-player, soundpool

对于我的应用程序，我需要同时播放多个曲目，并且需要一些听众才能知道曲目何时完成。

SoundPool 似乎是显而易见的选择，但不幸的是，我找不到在曲目结束时收到通知的解决方案。

我还考虑过使用多个 Android MediaPlayer 实例，但我担心会出现性能问题。

还有其他选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T14:14:29.773

如果使用 MediaPlayer，则可以使用 OnCompletionListener。同时播放多首曲目也没有问题。就像 gian1200 说的。试试看，也许性能不是真正的问题。

# mysql - 用户更新配置文件和mysql更新

> ID：11178479
> 
> 赞同：0
> 
> 时间：2012-06-24T14:57:59.267
> 
> 标签：mysql

我将以用户个人资料编辑页面为例。表格中有 12 个不同的字段（年龄、性别、吸烟、饮酒……）。所有这些字段都在单个表中。当用户保存数据时，mysql update 语句用于设置所有数据，即使只更改了一个字段。

```
UPDATE profile SET age=22, smoke=1, drink=1, ... 
```

但我想知道这是否是正确的方法。更好的方法是首先检查哪个字段已更改并仅为该字段设置数据？为此，我会将所有当前值放入隐藏输入中。它看起来像这样：

```
<input type="hidden" name="oldAge" value="<?php echo $age; ?>" />
<input type="text" name="age" value="<?php echo $age; ?>" />
<input type="hidden" name="oldGender" value="<?php echo $gender; ?>" />
<input type="text" name="gender" value="<?php echo $gender; ?>" />

<?php
//...
if($_POST['oldAge']!=$_POST['age']){
  $updateQuery .= ", age=$_POST['age']";
}
if($_POST['oldGender']!=$_POST['gender']){
  $updateQuery .= ", gender=$_POST['gender']";
}  
//...  
?> 
```

通过这种方式设置的数据更少，这可以使 mysql 性能更好。这是否有任何意义，还是只是不必要地使事情复杂化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T15:03:57.397

你只是让事情变得复杂，你宁愿做的只是保持这个领域的“年龄”并在其中呼应老年。一旦用户更改了值并发送了表单，只需更新数据中的值。要检查它是否与之前的相同，请对更改应用 javascript 验证，并在用户提交表单而不更改任何值的情况下警告“未进行任何更改”。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T10:50:42.050

我使用 javascript jquery 进行检查，因为我已经使用它来使用 ajax 发送发布数据。

```
var oldValues = $('form').serialize().split("&"); 
var values = '';        
var valChanged = false;
var curValues = '';
$("input[type='submit']").click(function() {
  $(this).closest('form').submit(function() {
        curValues = $(this).serialize().split("&");
        for(var i in curValues){          
          valChanged = false;          
          for(var i2 in oldValues){
            if(oldValues[i2].split("=")[0]==curValues[i].split("=")[0] && (oldValues[i2].split("=")[1])!=(curValues[i].split("=")[1])){
              valChanged = true;
              break;
            }
          }
          if(valChanged==true){
            values = values+curValues[i]+"&"; 
          }          

        }

        $.ajax({
          type: "POST",
          url: $(this).closest('form').attr('action'),
          data: values,
          success: function(msg){                              
              //saving done
              closeDialog(200);                            
          }           
        });     
        return false;           
  });
}); 
```

# delphi - 映射网络驱动器 (WebDAV) 不适用于 Windows XP

> ID：11178480
> 
> 赞同：4
> 
> 时间：2012-06-24T14:58:31.637
> 
> 标签：delphi, winapi, windows-networking

我在使用 API 方法 WNetAddConnection2 在 Windows XP 下映射网络驱动器 (WebDAV) 时遇到问题。在 Windows 7 下或者它就像一个魅力。我的代码：

```
function ConnectDrive(Drive: string; Folder: string;
Username: string; Password: string; RestoreAtLogon: Boolean): HRESULT;

var
  NetResource: TNetResource;
  dwFlags: DWORD;
begin
  with NetResource do
  begin
    dwType := RESOURCETYPE_DISK;
    lpLocalName := PChar(Drive);
    lpRemoteName := PChar(Folder);
    lpProvider := nil;
  end;

  if (RestoreAtLogon) then
    dwFlags := CONNECT_UPDATE_PROFILE
  else
    dwFlags := 0;

  Result := WNetAddConnection2(NetResource, PChar(Password),
    PChar(Username), dwFlags);
end; 
```

每次我尝试连接时，Windows 都会告诉我：“找不到网络名称”或“找不到网络路径”

正如我之前所说，在 Windows 7 下没有问题。

如果我使用像 Netdrive 这样的商业工具，这个程序在 XP、Vista 或 Windows 7 下安装驱动器没有问题。

有人有想法吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T21:39:33.203

你的问题可能有无数的原因......但你可以尝试：

*   **最重要的是**：完全修补您的 Windows 安装（Windows 更新 - 最新的 SP 和更新）。您可以解决可以修复的错误（[webdav-redirector-list](http://greenbytes.de/tech/webdav/webdav-redirector-list.html)）
*   确保您能够解析 webdav 服务器的名称（您使用的是 netbios (wins)、dns、hosts 文件吗？）
*   指定 FQDN
*   指定 IP 地址
*   尝试使用`http://servername`or`httpS(if supported)`代替 UNC ( `\\servername`)
*   尝试使用 NET USE 命令查看映射是否成功（将[WebDAV 文件夹映射为网络驱动器号](http://smallvoid.com/article/winnt-webdav-network-drive.html)）
*   检查 IIS 级别的身份验证配置（[映射 WebDav 网络驱动器](http://social.msdn.microsoft.com/Forums/en/wwsapi/thread/31a4797a-d841-4815-90f0-1fe5645d6077#c29c528b-fc89-4683-a4b8-005504c42a9e)）
*   检查这些解决方法：[WebDav@Wikipedia](http://en.wikipedia.org/wiki/Webdav#Microsoft_Windows)
*   使用网络嗅探器捕获和分析故障期间的网络流量（WireShark、网络监视器等）

希望这可以帮助！

# android - LDAP 更改 Active Directory 上的用户密码

> ID：11178481
> 
> 赞同：2
> 
> 时间：2012-06-24T14:58:34.823
> 
> 标签：android, active-directory, passwords, unboundid-ldap-sdk

我声明我是 LDAP 的完全初学者。
我必须让用户通过 Android 设备更改自己的密码。用户没有管理权限。
使用[UnboudId LDAP SDK](http://www.unboundid.com/products/ldap-sdk) for Java 我可以绑定到服务器并使用以下代码获取用户条目：

```
final SocketFactory _socket_factory;
final SSLUtil _ssl_util = new SSLUtil(new TrustAllTrustManager());
try {               
  _socket_factory = _ssl_util.createSSLSocketFactory();             
}
catch (Exception e) {
  Log.e(LOG_TAG, "*** Unable to initialize ssl", e);
}

LDAPConnectionOptions _ldap_connection_options = new LDAPConnectionOptions();
_ldap_connection_options.setAutoReconnect(true);
_ldap_connection_options.setConnectTimeoutMillis(30000);
_ldap_connection_options.setFollowReferrals(false);
_ldap_connection_options.setMaxMessageSize(1024*1024);

LDAPConnection _ldap_connection = new LDAPConnection(_socket_factory, _ldap_connection_options, [host ip], 636, [username], [password]);

Filter _filter = Filter.create("(userPrincipalName=" + [username] + ")");
SearchRequest _search_request = new SearchRequest([base DN], SearchScope.SUB, _filter);
_search_request.setSizeLimit(1000);
_search_request.setTimeLimitSeconds(30);            

SearchResult _search_result = _connection.search(_search_request); 
```

这有效，我得到 1 个条目和所有相关属性。现在我的任务是用新的[新密码]更改密码[密码]。
我的尝试：

```
PasswordModifyExtendedRequest _password_modify_request = new PasswordModifyExtendedRequest([found entry DN], [password], [new password]);
PasswordModifyExtendedResult _password_modify_result = (PasswordModifyExtendedResult)_ldap_connection.processExtendedOperation(_password_modify_request); 
```

由于 LDAPException，这不起作用

```
LDAPException(resultCode=2 (protocol error), errorMessage='0000203D: LdapErr: DSID-0C090C7D, comment: Unknown extended request OID, data 0, vece��', diagnosticMessage='0000203D: LdapErr: DSID-0C090C7D, comment: Unknown extended request OID, data 0, vece��') 
```

然后我试过了

```
final Modification _replace_modification = new Modification(ModificationType.REPLACE, "unicodePwd", _get_quoted_string_bytes([new password]));
LDAPResult _result = _connection.modify([found entry DN], _replace_modification); 
```

由于 LDAPException，这不起作用

```
LDAPException(resultCode=50 (insufficient access rights), errorMessage='00000005: SecErr: DSID-031A0F44, problem 4003 (INSUFF_ACCESS_RIGHTS), data 0) 
```

最后我试过了

```
final Modification _delete_old_modification = new Modification(ModificationType.DELETE, "unicodePwd", _get_quoted_string_bytes([password]));
final Modification _add_new_modification = new Modification(ModificationType.ADD, "unicodePwd", _get_quoted_string_bytes([new password]));
final ArrayList<Modification> _modifications = new ArrayList<Modification>();
_modifications.add(_delete_old_modification);
_modifications.add(_add_new_modification);
LDAPResult _result = _connection.modify([found entry DN], _modifications); 
```

由于 LDAPException，这不起作用

```
LDAPException(resultCode=19 (constraint violation), errorMessage='00000005: AtrErr: DSID-03190F00, #1:0: 00000005: DSID-03190F00, problem 1005 (CONSTRAINT_ATT_TYPE), data 0, Att 9005a (unicodePwd)��', diagnosticMessage='00000005: AtrErr: DSID-03190F00, #1: 0: 00000005: DSID-03190F00, problem 1005 (CONSTRAINT_ATT_TYPE), data 0, Att 9005a (unicodePwd) ��') 
```

现在我没有更多的想法......任何帮助将不胜感激，在此先感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T13:09:15.487

```
final Modification _delete_old_modification = new Modification(ModificationType.DELETE, "unicodePwd", ('"' + oldPassword + '"').getBytes("UTF-16LE"));
final Modification _add_new_modification = new Modification(ModificationType.ADD, "unicodePwd", ('"' + newPassword + '"').getBytes("UTF-16LE")); 
```

成功了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T17:05:36.693

最后，我能够解决密码更改中的 CONSTRAINT_ATT_TYPE 问题。我已将最小密码使用期限设置为 4 天，因此 AD 不允许我更新密码。AD 为所有此类违规引发一般错误 CONSTRAINT_ATT_TYPE。将最小密码年龄设置为 0（无）后，一切正常。AD 密码历史记录也会更新。

参考： [http ://www.javaxt.com/Tutorials/Windows/How_to_Authenticate_Users_with_Active_Directory](http://www.javaxt.com/Tutorials/Windows/How_to_Authenticate_Users_with_Active_Directory)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-01T09:59:42.550

这可能是一个过时的答案，但非常感谢！

“最小密码年龄”是我的问题的根源 CONSTRAINT_ATT_TYPE

# google-apps-script - 如何设置标签小部件的日期格式？

> ID：11178487
> 
> 赞同：0
> 
> 时间：2012-06-24T14:59:19.597
> 
> 标签：google-apps-script

我不明白如何将这些碎片放在一起。

剧本：

*   从 google 电子表格中获取数据范围。
*   将数据过滤到新数组中
*   将数据添加到小部件标签。

日期显示为“Tue Oct 06 1942 00:00:00 GMT-0400 (EDT)”，我想要“1942 年 10 月 6 日”。

我如何使用：

```
Utilities.formatDate(new Date(), "GMT", "yyyy-MM-dd'T'HH:mm:ss'Z'"); 
```

和

```
grid.setWidget(i +1, 2, ui.createLabel(mapData[i][3])); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T16:59:34.740

看起来你已经自己回答了你的问题

采用

```
var dt = Utilities.formatDate(new Date(), "GMT", "MM dd, yyyy");
grid.setWidget(i+1, 2, ui.createLabel(dt)); 
```

# javascript - 文档样式表 cssRules

> ID：11178493
> 
> 赞同：1
> 
> 时间：2012-06-24T15:00:42.247
> 
> 标签：javascript, css, stylesheet

几天前，我遇到了在网页上获取 cssRules 数据的问题。

```
document.styleSheets[i].cssRules 
```

仅适用于具有相同域样式表路径的样式标签和链接标签。

因此，如果我使用来自不同域的样式表，则很难访问这些规则，

或者，如果我从本地文件系统浏览 html 页面 - 即使从本地文件系统样式表和位于 Web 的样式表也无法访问规则。换句话说 - 从本地 fs html 页面的任何样式表中获取规则是不可能的。

如果我使用数据 url，也无法获得规则，例如：

```
<link rel="stylesheet" href="data:text/css;base64,Kntjb2xvcjpyZWQ7fQ=="> 
```

我不知道为什么会出现这种不公平的行为，但我希望有一天我会意识到这些限制的真正原因。

因为我真的不明白为什么要阻止js访问css规则时浏览器本身访问并呈现它们没有任何问题（跨域，本地文件系统等）

关于如何访问这些规则的任何建议？

就我而言，我编写了一个适用于每个网站的 js 扩展（所以我不能简单地将所需的 css 移动到我的域中）。

# c - C中的指针和函数歧义

> ID：11178494
> 
> 赞同：0
> 
> 时间：2012-06-24T15:00:47.473
> 
> 标签：c, function, pointers

请看下面的代码：

```
char* test ( )
{
    char word[20];
    printf ("Type a word: ");
    scanf ("%s", word);
    return word;
}

void main()
{
    printf("%s",test());
} 
```

当函数返回时，变量`word`被销毁并打印一些垃圾值。但是当我更换

```
char word[20]; 
```

经过`char *word;`

它打印正确的值。据我说，指针变量应该像字符数组一样被销毁，输出应该是一些垃圾值。谁能解释一下歧义？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T15:04:23.320

未定义的行为就是这样 - 未定义。有时它似乎会起作用，但这只是巧合。在这种情况下，未初始化的指针可能恰好指向有效的可写内存，而该内存没有用于其他任何内容，因此它成功地写入和读取了该值。这显然不是你应该指望的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T15:10:01.260

无论哪种方式，您都有未定义的行为，但纯粹从“这里发生了什么”的角度来看，两者之间仍然存在一些差异。

当你使用一个数组时，它保存的数据被分配在堆栈上。当函数返回时，该内存将不再是堆栈的一部分，并且几乎肯定*会*在调用过程中被覆盖`printf`。

当您使用指针时，您的数据将被写入指针碰巧指向的任何随机位置。尽管写入存在未定义的行为，但简单的统计数据表明，如果您（例如）拥有约 40 亿个位置的 32 位地址空间，则命中将在新的几条指令中被覆盖的地址空间的机会*相当*低。

你显然不应该做任何一个，*但*你得到的结果也并不特别令人惊讶。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T15:10:55.453

因为char数组是在函数中定义和声明的，所以它是一个局部变量，函数返回后就不再存在了。如果您使用 char 指针并为其*分配内存*，那么它将保留，您所需要的只是指针（又名数字）。

```
int main(int argc, char* argv[]) {
    printf("%s", test());
    return 0;
}

char* test(void) {
    char* str = (char*)malloc(20 * sizeof(char));
    scanf("%19s", str);
    return str;
} 
```

请注意我如何使用 %19s 而不是 %s。如果用户输入 20 个或更多字符，您当前的函数很容易导致缓冲区溢出。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-24T18:34:08.050

在程序执行期间，它首先会`main`在进程内存的堆栈段中为函数创建激活记录。在该`main`激活记录中，它将为该函数（`main`）的局部变量分配内存，并为内部目的分配更多内存。在您的程序`main`中没有任何局部变量，因此它不会为`main`激活记录中的局部变量分配任何内存。

然后在执行调用函数的语句时`test`，它会为调用函数（）再创建一个激活记录，并为局部变量`test`分配`20`字节`word`。

一旦控件退出函数`test`，为该函数创建的激活记录将从该堆栈中弹出。然后它将继续执行`printf`被调用函数的剩余语句（）`main`。这里 printf 试图打印`test`已经从堆栈中弹出的函数局部变量中的字符。所以这种行为是未定义的，有时它可能会打印正确的字符串，否则它会打印一些垃圾字符串。

所以在这种情况下，只有动态内存才会出现。借助动态内存，我们可以控制变量的生命周期（或范围）。所以使用如下的动态内存。

```
char *word = NULL:
word = (char *) malloc(sizeof(char) * 20); 
```

注意：注意对 malloc 返回值的 NULL 检查，并且不要忘记`printf`在 main 函数之后释放分配的内存。

# javascript - transport.openOutputStream 的低级版本？

> ID：11178495
> 
> 赞同：0
> 
> 时间：2012-06-24T15:00:50.093
> 
> 标签：javascript, xulrunner, gecko

对于代理的负载和压力测试，我正在使用 XULRunner 和[Crowbar](http://simile.mit.edu/wiki/Crowbar)模拟 Firefox 浏览器。

它工作得很好，并且与我们的 (Perl) 加载+压力工具很好地融合在一起，该工具可以获取目标 URL 列表，并`WWW::Curl`根据我的喜好触发尽可能多的 HTTP GET 加载。

但是，我们的 perl 脚本压力工具（在我将它与 crowbar 集成之前）还可以从池中选择一个源 IP 地址来模拟几个不同的客户端。由于 Crowbar 本身就是您将所有请求发送到的代理，因此我想实现一个 HTTP-param 来移交应该用于出站连接的 IP 地址（比如`?ip=4.5.6.7`）。

浏览 crowbar 的源代码，我注意到它使用 JS-call `transport.openOutputStream`，这不会让您选择出站 IP 地址。

有没有人建议我应该使用哪个（可能是本机 Gecko）功能来选择配置给客户端机器的 IP 地址之一？我有点迷失在 Mozilla 提供的所有文档中，只需要正确的轻推或继续的指针。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T20:26:50.420

XULRunner/Firefox 没有选择出站 IP 地址的功能 - 它总是通过操作系统的路由表进行。因此出站地址仅由目标地址确定。[最好的办法是在nsISocketTransportService.createTransport()](https://developer.mozilla.org/en/XPCOM_Interface_Reference/nsISocketTransportService#createTransport%28%29)中指定一个代理。

# codebase - 共享 WP7 和 WP8 的代码库

> ID：11178496
> 
> 赞同：1
> 
> 时间：2012-06-24T15:00:52.067
> 
> 标签：codebase, windows-phone-8

我正在研究针对 WP7 和 WP8 的新业务应用程序的架构。对于 WP7，我们将使用 silverlight 应用程序模型，并希望在迁移到 WP8 时准备重用代码（我们将希望使用 WP8 上的附加功能）。

由于 WP8 也将支持 xaml 和 C#，您对如何组织应用程序结构有什么特别的建议，请选择适当的方法。

**总结以下建议：**

1.  分离代码和 UI。
2.  对于业务逻辑，您可以使用 C# Windows Phone 类库（7.1 适用于 WP7 和 WP8）
3.  如果您执行大量异步操作，请考虑使用 Windows Phone 的任务并行库。
4.  为 WP8 特定功能使用单独的库。仅将其连接到 WP8。
5.  您可能希望将通用 UI 移动到单独的库中，因为 Wp7 和 Wp8 都应该支持它（根据我的实验）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T19:24:43.790

> 如何组织应用程序结构，选择合适的方法。

好吧，在使用 Windows Phone 时，MVVM 总是很受欢迎。任何良好的干净结构，遵循[SOLID](http://en.wikipedia.org/wiki/SOLID_%28object-oriented_design%29)原则都可以。

Windows Phone 8 将支持新的 C# 5.0 语言功能，因此如果您有大量异步代码，请考虑使用适用于 Windows Phone 7 的[Task Parallel Library](http://nuget.org/packages/System.Threading.Tasks/3.0.1)，因为所有返回 Task 的调用都将支持`await`C# 5.0 中的新运算符。

Windows Phone 8 中最重要的变化是新的、性能更好的控件。如果你想用相同的代码库支持两个平台，你想尝试尽可能地将你的 UI 代码与应用程序的其余部分分开。您很可能还希望分离 UI 逻辑，例如 ViewModel。

考虑为您的业务逻辑提供至少一个单独的程序集，用于处理数据查询操作和/或计算。

至于新功能，如 C++ 开发/WinRT 互操作，将通过单独的程序集完成，无论如何您只能从 Windows Phone 8 程序集中引用；*这意味着它不应该为您当前*的应用程序结构提供任何问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T23:06:12.633

当前的答案似乎没有详细说明实际项目结构的样子，所以我想我可以在这里分享我的：

您在下面看到的是我的应用程序的结构，它有 4 个版本：(WP7,WP8)X(Pro,ad funded)

代码和输出文件夹（bin7、bin8、...）放在第一个子目录中。项目文件放置在适当命名的子目录中。代码文件和资产链接到单个项目中。“属性”文件夹中的文件对于每个版本都是特殊的（其他 GUID、名称、动态磁贴图标等）。这样我必须按一次 F6 并且我拥有当前版本的所有 XAP。（只需要用一个小脚本来收集它们）

（仅供参考，“Pro”版本是使用 #ifdef 编译器标志实现的。）

![我的 WP7+WP8(+](../Images/166fe46a5f72239e9ccb968a1d56a18d.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T15:31:37.823

Silverlight 是基于 C# 的框架，您在帖子中混合了语言和框架，唯一需要考虑的是[WP7 仅支持 C# 3.0 功能](http://social.msdn.microsoft.com/Forums/ta/windowsphone7series/thread/07c8770b-5c20-4c4d-877c-2fdd160eb370)，WP8 可能会是一个更高级的工作台，带有 DirectX 和 C# 4 或更好，我们不还不知道，但是 WP8 还提供对 C 和 C++ 的全面支持。

Silverlight 很长时间没有收到重大更新或新闻。如果您真的想针对这 2 个操作系统，我建议使用共享的 C# 3.0 代码库，尽可能避免使用 Silverlight，考虑到 WP7 设备在以下方面几乎已死，这可能是一个更好的选择更新和核心功能；它们是基于 Silverlight 的设备，带有 XNA 用于游戏，但一些硬件相关功能非常低端，加上微软很长时间没有谈论 Silverlight，这个关于 C/C++ 支持的新更新可能会改变游戏规则开发商。

还有 C# 5.0 即将推出，WP7 已经很旧了，它可能会在几周内变旧，我也不知道你的项目的细节，但你可能需要计划几个月/几周的时间来提供支持和各种修复，我认为你可能应该有一个很好的理由来启动一个针对 WP7 平台的 C# 3.0 项目，我不是在讨论 WP7 作为操作系统，我是在讨论考虑近期和缺乏Microsoft 的一些项目的支持和新闻。

与讨论此事的 Microsoft 团队保持联系[https://twitter.com/#!/wpdev](https://twitter.com/#!/wpdev)，看看您是否可以获得更详细的图片。

最后请记住，可能唯一值得考虑的共同点是对 C# 3.0 语言的支持，框架可能会有所不同，或者可能更方便地采用新的框架，同样使用 C/C++，您可以获得无限大量的新图书馆。

# c# - 通过 C# MVC3 中的成员身份创建新用户时，如何使用生成的密码或临时密码？

> ID：11178499
> 
> 赞同：0
> 
> 时间：2012-06-24T15:01:36.553
> 
> 标签：c#, asp.net-mvc-3, asp.net-membership

我正在使用 Membership.CreateUser 创建一个客户联系人，并且我想在每次创建联系人时提供一个生成的密码。制作团队将为新的客户联系人设置帐户。

我遇到的问题是当我通过通用密码时，该方法失败。当我通过模型提供自己的密码时，它可以正常工作。

我正在寻找解决方法或更好的做法。

提前感谢您的帮助！

以下是代码示例：

```
 [HttpPost]
    public ActionResult RegisterClientContact(RegisterClientContactViewModel model)
    {
        if (ModelState.IsValid)
        {
            //Create Generic password - First initial Last initial 1234
            string genericPassword = model.FirstName.Substring(0, 1).ToLower() + model.LastName.Substring(0, 1).ToLower() + "1234";

            //Attempt to register the Client Contact
            MembershipCreateStatus createStatus;
            Membership.CreateUser(model.Email, genericPassword, model.Email, null, null, true, null, out createStatus);

            if (createStatus == MembershipCreateStatus.Success)
            {
                Roles.AddUserToRole(model.Email, "Client");
                FormsAuthentication.SetAuthCookie(model.Email, false /*create persistent cookie*/);

                Person person = new Person();
                person.FirstName = model.FirstName;
                person.LastName = model.LastName;
                person.Email = model.Email;
                person.Phone = model.Phone;
                person.Active = true;

                db.Persons.Add(person);
                db.SaveChanges();

                ClientContact clientPerson = new ClientContact();
                clientPerson.ClientPersonId = person.Id;
                clientPerson.Title = model.Title;
                clientPerson.ClientId = model.ClientId;

                db.ClientPersons.Add(clientPerson);
                db.SaveChanges();

                return RedirectToAction("Index", "ClientContact");
            }
        }

        return View("An Error has occured");
    } 
```

[顺便说一句，鉴于这篇](http://msdn.microsoft.com/en-us/library/system.web.security.membership.generatepassword.aspx)文章，我似乎应该能够传递我自己的密码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T15:14:46.747

这可能是因为您的默认密码不符合 ASP.NET Membership 默认密码复杂性要求。默认密码需要为**7 个字符**。异常应该准确地告诉您问题所在。有关如何配置 Membership 的 minRequiredPasswordLength 设置的更多详细信息，请参阅以下 MSDN 页面。

[Membership.MinRequiredPasswordLength 属性](http://msdn.microsoft.com/en-us/library/system.web.security.membership.minrequiredpasswordlength)

# flash - ActionScript 语法错误

> ID：11178501
> 
> 赞同：0
> 
> 时间：2012-06-24T15:01:41.387
> 
> 标签：flash, actionscript, actionscript-2, unreal-development-kit

我需要一些帮助来解决一些编译错误。

我正在学习一个教程（在[http://www.youtube.com/watch?v=E8oM808ETWs](http://www.youtube.com/watch?v=E8oM808ETWs)）并输入了视频中显示的所有代码。当我尝试发布时，出现了两个编译错误：

> 场景 = 场景 1，图层 = 动作，帧 = 1，第 16 行“{”预期
> 场景 = 场景 1，图层 = 动作，帧 = 1，第 33 行语法错误。

这是我的代码

```
import flash.external.ExternalInterface
import gfx.motion.Tween
_global.gfxExtentions = true;

var angle:Number;

function init()
{
    _root.Health._yrotation = 30;
    _root.Ammo._yrotation = 30;
    angle = 0;
}

init();

_root.onEnterFrame = function();
{
    angle +=0.1;
    var sined:Number = Math.sin(angle) + 2;
    sined /=2;

    _root.Health.Title._z = -200 * sined;
    _root.Health.Bar._z = -500 * sined;
    _root.Health.Value._z = -200 * sined;
    _root.Health.Background._z = 200 * sined;

    _root.Ammo.Title._z = -200 * sined;
    _root.Ammo.Bar._z = -500 * sined;
    _root.Ammo.Value._z = -200 * sined;
    _root.Ammo.Background._z = 200 * sined;

    _root.Weapon._z = -200 * sined;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T15:06:48.610

```
_root.onEnterFrame = function(); // <-- lose this semi-colon
{ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-09T12:52:04.253

场景 = 场景 1，图层 = 图层 1，帧 = 1，第 3 行“）”预期

attachMovie('basket','basket', 2, {_x: Stage.width-50, _y: Math.random()*(Stage.height:-150) +50});

# c++ - 字体轮廓 Beizier 样条曲线和 DirectWrite

> ID：11178505
> 
> 赞同：0
> 
> 时间：2012-06-24T15:02:18.563
> 
> 标签：c++, opengl, fonts, directx, directwrite

我正在考虑可能将 DirectWrite 用于将在 DirectX 11 版本和 OpenGL 3.1+ 版本中出现的项目。

据了解，DirectWrite 使用位于 Direct3D 10.1 之上的 Direct2D（直到 DirectX 11.1 发布）。这意味着要在 Direct3D 11 中使用 DirectWrite，目前，我必须创建一个 Direct3D 10.1 设备和一个 Direct3D 11 设备，然后在这两个设备之间共享资源，这似乎带来了一些同步开销。另一个问题是我似乎无法通过这种设置将文本直接渲染到 d3d11 后备缓冲区，对吧...？

我也不知道是否有可能在任何实际意义上将 DirectWrite 与 OpenGL 结合起来..？我的猜测不是...

太好了......我也在考虑编写自己的字体渲染器，我希望能够根据它们的贝塞尔样条轮廓来渲染字体，以实现分辨率独立。我知道 GetGlyphOutline() 函数，但根据 MSDN 库，它似乎正在被弃用并且“......不应在新应用程序中使用”。查看 MSDN 上的 DirectWrites 参考页面，我看不到任何方法可以像使用 GetGlyphOutline() 那样在 Bezier 样条信息中获得相同的信息。您可以获得包含在 ID2D1SimplifiedGeometrySink 中的轮廓信息，但我看不到您如何从 ID2D1SimplifiedGeometrySink 中获得纯贝塞尔曲线、控制点、信息，您只能将其用于使用我的 D2D（D3D10.1）进行绘图在这一点上没有那么感兴趣。

有没有办法使用非弃用方法 DirectWrite 或其他方法来获取字体轮廓轮廓？

正如您可能知道的那样，我对 DirectWrite 和 Direct2D 都不太熟悉。我试图弄清楚该采取什么方向。是否值得走 DirectWrite/D2D 道路，或者制作我自己的字体渲染器，或者其他一些绝妙的想法 :)。有什么建议么？

PS我目前正在为Win7平台开发，发布后会迁移到Win8。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T07:49:47.730

幸运的是你有一点倒退。Direct2D 使用 DirectWrite，而不是相反。从技术上讲，您可以单独使用 DirectWrite（请参阅：`IDWriteBitmapRenderTarget`）。如果您处于原型设计阶段，使用 Direct2D 将软件渲染到`IWICBitmap`创建的通过`IWICImagingFactory::CreateBitmap()`（或者只是包装您已经创建的位图并`IWICBitmap`自己实现）可能会更容易。您使用`ID2D1Factory::CreateWicBitmapRenderTarget()`，调用`ID2D1RenderTarget::BeginDraw()`，然后创建您的`IDWriteTextFormat`和/或`IDWriteTextLayout`通过`IDWriteFactory`，然后在渲染目标上调用`DrawText()`或，然后。然后你复制到一个硬件纹理中，然后按照你喜欢的方式绘制它。`DrawTextLayout()``EndDraw()`

# memory - CUDA 全局内存，它在哪里？

> ID：11178506
> 
> 赞同：1
> 
> 时间：2012-06-24T15:02:40.247
> 
> 标签：memory, cuda, global

我知道在 CUDA 的内存层次结构中，我们有共享内存、纹理内存、常量内存、寄存器，当然还有我们使用 cudaMalloc() 分配的全局内存。

我一直在搜索我能找到的任何文档，但我还没有遇到任何明确解释什么是全局内存的文档。

我相信分配的全局内存位于显卡本身的 GDDR 上，而不是与 CPU 共享的 RAM，因为其中一份文档确实指出主机端无法取消引用指针。我对吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T16:02:59.643

全局内存是一个虚拟地址空间，可以映射到设备内存（显卡上的内存）或页面锁定（固定）的主机内存。后者要求 CC > 1.0。

局部、常量、纹理和局部内存在全局内存中分配，但通过不同的地址空间和缓存访问。

在 CC > 2.0 上，通用地址空间允许将共享内存映射到全局地址空间；但是，共享内存始终驻留在每个 SM 片上内存中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T15:30:33.237

全局内存在芯片外，但在显卡上。

本地内存存储在全局内存中，但地址是交错的，当数组存储在那里时，当 warp 中的每个线程从其数组中的相同索引读取时，访问会合并。

常量和纹理内存也（最初）存储在全局内存中，但它缓存在片上缓存中。

共享内存以及 L1 和 L2 高速缓存在芯片上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T15:12:11.107

[这在CUDA C 编程指南](http://developer.download.nvidia.com/compute/DevZone/docs/html/C/doc/CUDA_C_Programming_Guide.pdf)的第 3.2.2 节中进行了讨论。简而言之，所有类型的内存，即共享内存、常量内存、纹理内存和全局内存，都驻留在设备（即 GPU）本身的内存中。

但是，您可以明确将部分内存声明为“已映射”，即主机上的内存可从设备访问。为此，请参阅编程指南的第 3.2.4 节。

# javascript - 从节点连接中抛出错误并在服务器错误处理程序中捕获它

> ID：11178507
> 
> 赞同：2
> 
> 时间：2012-06-24T15:03:07.470
> 
> 标签：javascript, node.js, error-handling

我想通过抛出服务器级错误来处理我不喜欢传入数据格式的情况。

```
var net = require('net');

var server = net.createServer(function(c) {
  c.on('data', function() {
    // ***THROW ERROR***
  });
});

server.on('error', function (e) {
    // ***CATCH IT****
});

server.listen(8124); 
```

该示例是对节点文档中的复制和粘贴的快速修改。

我试过`throw new Error("error");`无济于事！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T15:20:11.223

看来答案很简单。

```
var net = require('net');

var server = net.createServer(function(c) {
  c.on('data', function() {
    c.server.emit('error', '!!!simple!!!');
  });
});

server.on('error', function (e) {
    // ***CATCH IT****
});

server.listen(8124); 
```

# ajax - twitter bootstrap typeahead 2.0.4 ajax错误

> ID：11178512
> 
> 赞同：0
> 
> 时间：2012-06-24T15:03:50.547
> 
> 标签：ajax, twitter-bootstrap, typeahead

如果我使用 2.0.0 版本，我有以下代码肯定会返回正确的数据结果，但由于某种原因，引导程序的 typeahead 插件给了我一个错误。我将其粘贴在代码示例下方：

```
<input id="test" type="text" />

$('#test').typeahead({
    source: function(typeahead, query) {
        return $.post('/Profile/searchFor', { query: query }, function(data) {                
            return typeahead.process(data);
        });
    }
}); 
```

当我运行这个例子时，我得到了一个 jQuery 错误，上面写着以下内容：

```
**
item is undefined
matcher(item=undefined)bootst...head.js (line 104)
<br/>(?)(item=undefined)bootst...head.js (line 91)
<br/>f(a=function(), b=function(), c=false)jquery....min.js (line 2)
<br/>lookup(event=undefined)bootst...head.js (line 90)
<br/>keyup(e=Object { originalEvent=Event keyup, type="keyup", timeStamp=145718131, more...})bootst...head.js (line 198)
<br/>f()jquery....min.js (line 2)
<br/>add(c=Object { originalEvent=Event keyup, type="keyup", timeStamp=145718131, <br/>more...})jquery....min.js (line 3)
<br/>add(a=keyup charCode=0, keyCode=70)jquery....min.js (line 3)
<br/>[Break On This Error]  
<br/>return item.toLowerCase().indexOf(this.query.toLowerCase())** 
```

有什么想法吗？...相同的代码在插件的 2.0.0 版本中有效，但无法写入我的淘汰对象模型。

这是 2.0.0 版本的有效输入代码：

```
var searchFunction = function(typeahead, query) {
        $.ajax({
            url: "/Profile/searchFor?tableName=" + tableName + "&query=" + query + "&extendedData=" + $("#" + extendedData).val(),
            success: function(data) {
                if (data.errorText != null) {
                    toggleLoading("false");
                    showDialog(data.errorText, "Error");
                    return;
                }                
                var result = data.results.split("::");
                typeahead.process(result);
            },
            select: function(event, ui) {
            }
        });
    }

    $("#" + inputBoxId).typeahead({
        source: searchFunction,
        onselect: function(obj) {
        }
    }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T19:14:49.227

# 1) Bootstrap typeahead v2.0.2 解决方案

看看[这个拉取请求](https://github.com/twitter/bootstrap/pull/3012)，它看起来就像你正在寻找的东西（它是来自 bootstrap typeahead v2.0.2 的一个分支）。

我自己使用它并且它正在工作:)

# 2) Bootstrap typeahead v.2.1.0-work in progress 解决方案

你也可以试试[这个解决方案](https://github.com/twitter/bootstrap/pull/3682)。我刚刚更改了我的项目以使用这个，因为它将在未来的版本中得到支持并且它看起来更干净:)

就我而言：

```
$("#typeahead").typeahead({
  source: function(query, process) {
    $.post('url_path', { q: query, limit: 4 }, function(data) {
      process(data);
    }); // end of post
  }
}); 
```

其中脚本**url_path**需要 2 个参数**q**（字符串）和**limit**（结果限制）并返回 json 响应（数组）：

对限制为**4的查询****i**的示例响应：

 **> [“阿姆”、“跛行 Bizkit”、“蕾哈娜”、“威尔·史密斯”]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T11:50:33.410

对于试图生成 JSON 数据（不使用 php json_encode）并想知道为什么[Terry Rosen 的 bootstrap-typeahead fork](https://github.com/tcrosen/twitter-bootstrap-typeahead)不适用于 ajax 调用的人

返回的 JSON 数据的格式必须为：-

[{"id":"1","name":"旧车"},{"id":"2","name":"卡斯特罗电车"},{"id":"3"," name":"绿色老爷车"},{"id":"4","name":"停在古董街的汽车"}]

**注意引号**

花了一整天的时间试图找出问题所在，我认为把它贴在这里是明智的。也许，我对 JSON 的理解是错误的，但是即使没有引用 id 和 name 字段，firebug 也会将返回的数据显示为有效的 JSON。此外，**响应标头应设置为 'application/json'**。希望这可以帮助某人。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-26T12:04:36.083

在 2.0.4 版上，typeahead 有问题，不接受函数作为源，只接受数组。我升级到 2.1，它按预期工作。**

# ruby-on-rails - Rails 资产管道 - 如何在资产路径中包含资产？

> ID：11178518
> 
> 赞同：6
> 
> 时间：2012-06-24T15:04:40.497
> 
> 标签：ruby-on-rails, asset-pipeline, erb

我已经转换了我的这个多皮肤应用程序，以利用 Rails 3.1 中引入的资产管道。在大多数情况下，它非常简单，我爱上了预处理能力，它允许您在 CSS/JS 文件中使用内联 Ruby。

不过，我遇到了一个大问题，尽管 Sprockets 的强大功能似乎很难解决。我的应用程序可以使用在运行时选择的任意数量的皮肤（或“身份”）运行。这个“身份”参数设置了缓存目录、数据库连接、视图路径——实际上还有资产路径。虽然所有“身份”都可以拥有自己的样式表，但也有一个共享的样式表，用于所有实例。所以资产文件夹结构看起来像这样：

在 /app/assets/stylesheets/aplication.css.erb 中：

```
<% require_asset("shared.css") %>
<% require_asset("overrides.css") %> 
```

这会加载两个样式表，关键是它使用配置的资产路径来解析它们（这就是我使用`require_assets`而不是标准`require`和`include`指令的原因，因为它们不会命中解析器）。它返回找到的第一个匹配项，并允许我非常轻松地覆盖部分或全部默认样式。所以

```
/app/assets/stylesheets/shared.css 
```

可以通过在实例资产文件夹中放置同名文件来覆盖

```
/app/assets/[identity]/stylesheets/shared.css 
```

如果不存在这样的文件，它会默默地回退到默认的 shared.css。

这一切都非常出色——我对 JavaScript、图像和字体使用了相同的技术，并且在预编译期间一切都得到了整齐的处理和打包。但。有一种我无法实现的（横向）继承；*有时*一个身份的皮肤与另一个身份非常相似，只有几十行不同（例如相同的布局但具有不同的配色方案），我真的希望能够做这样的事情：

资产/样式表/application.css.erb：

```
<% require_asset("shared.css") %>
<% require_asset("overrides.css") %> 
```

资产/current_identity/stylesheets/overrides.css：

```
<% require_asset("../../some_other_identity/stylesheets/overrides.css") %>
/* followed by the dozen or so lines that differ for this skin */
... 
```

这失败了，因为在当前上下文中，“some_other_identity”不在资产路径中 - Rails 在开发模式下找不到文件，当然它也不包含在预编译期间。如果我确实将它包含在资产路径中，它会加载错误的 overrides.css （*只能有一个*）。所以我一直在尝试把这样的东西放在 overrides.css 的顶部：

```
<%= File.read(Rails.root.join("app/assets/some_other_identity/stylesheets/overrides.css")) %>
/* rest of CSS */
... 
```

事实上，这正如预期的那样有效。但。因为我现在使用资产管道来提供所有资产，所以我不能再使用固定路径引用 CSS 中的图像 - 我必须使用`<%= asset_path("some_image.png") %>`这样的路径解析器才能发挥其魔力。这意味着 my`overrides.css`是真的`overrides.css.erb`，当然，当你这样做时，ERB 预处理不会发生`File.read()`。所以，我被困住了！帮助！任何人？

**编辑：**如果我使用

```
<%= ERB.new(File.read(Rails.root.join("app/assets/some_other_identity/stylesheets/overrides.css.erb"))).result %> 
```

它确实尝试解析 ERB，但我得到了

```
undefined method `asset_path' for main:Object 
```

这当然是由于我`asset_path("some_image.png")`在我试图包含的文件中使用了 etc 。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T18:41:10.300

好的，经过数小时的搜索，我发现了[Sprockets 中可用的辅助方法列表——如果从 GitHub 上](http://rubydoc.info/gems/sprockets/2.0.3/Sprockets/Context)[的 Sprockets 手册页](https://github.com/sstephenson/sprockets)链接到它，我会节省很多时间（有一个链接，但它指向 #整我）。来自 Sprockets API 文档：

*   `(Object) evaluate(path, options = {})`
*   在文件上读取`path`和运行处理器。
*   **这使您可以捕获资产的结果并将其直接包含在另一个中。**
*   `<%= evaluate "bar.js" %>`

答对了！我将包含指令更改为：

```
<%= evaluate(Rails.root.join("app/assets/some_other_identity/stylesheets/overrides.css.erb")) %> 
```

并且 CSS 得到处理并插入结果，就像我希望它工作的方式一样。

# visual-studio-2010 - MFC - 两个 CDialog 之间的通信

> ID：11178521
> 
> 赞同：2
> 
> 时间：2012-06-24T15:05:08.550
> 
> 标签：visual-studio-2010, mfc, dialog

我有一个基于 MFC 对话框的应用程序。

主对话框包含一个子对话框（用于 CTabCtrl 控件）。

*   CDialog mainDlgClass；

*   CMyChildDialog childDlgClass;

我如何能够从主对话框修改子对话框的控件或发送消息的可能性，例如：通过 PostMessage 并使用`RegisterWindowMessage`以便我可以修改子对话框的控件？

我不知道如何检索子对话框的句柄。

```
void mainDlgClass::check() 
{
   if(condition)
       PostMessage_to_the_child_dialog(***);
   OR
   if(condition)
       Modify_CStatic_text_on_the_child_dialog(***);

} 
```

编辑：

结构截图：

资源编辑器

![资源编辑器](../Images/2241454fc5c3f8285d02d3267505006e.png)

包含 ChidlDialog 的主对话框 + CTabCtrl

![主对话框](../Images/f4a49b34628223adf1b3d2422d1eefb0.png)

子对话框设置了 WS_CHILD 属性。

解决。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T15:54:38.870

假设第二个对话框是主对话框的子对话框（它有 WS_CHILD 样式），它必须由主对话框创建。子对话框仅限于父窗口的客户区。

您可以在子对话框类中提供公共成员函数（访问器）以供主对话框访问并更改您需要的任何内容。或者，如果它们被声明为公共的（类似 OOP 的），您可以直接访问子类的子对话框控件。

问题是您可能将第二个对话框称为子对话框，而它实际上不是子对话框（没有 WS_CHILD 样式）。不过，如果第二个对话框生成为无模式，您可以使用上述方法。

如果是模态的，方法可能会有所不同，因为主对话框被禁用；因此，用户无法访问主对话框控件。如果是这种情况，您能否提供更多信息？

例如，在什么情况下，您要更改控件。

# django - django编辑用户和userprofile对象

> ID：11178525
> 
> 赞同：1
> 
> 时间：2012-06-24T15:05:21.060
> 
> 标签：django

所以我在 django 中创建了一个通用的“帐户”页面。我使用了 django-registration 插件，目前有一个（djang-standard）用户对象，以及一个 UserProfile 和 UserProfileForm 对象。

我想这是一个风格或最佳实践的问题。我的计划是“正确的”还是有“更好/推荐/标准的方式”来做到这一点？

我打算做的是从 request.user 创建 UserProfile 即：

```
form = UserProfileForm(instance=User) 
```

（并将该表单发送到视图），并在 UserProfileForm 中：

```
class UserProfileForm(forms.ModelForm):
    class Meta:
        model = UserProfile

    def __init__(self,*args,**kwargs):
        super(UserProfileForm, self).__init__(*args, **kwargs)
        if kwargs.has_key('instance'):
            self.user = kwargs['instance'] 
```

我的 UserProfile 非常像这样：

```
class UserProfile(models.Model):
    user = models.OneToOneField(User)
    points = models.IntegerField(default=0) #how is the user going with scores? 
```

以及用户在哪里`django.contrib.auth.models`。

好的！编辑和保存的处理将通过`mixin`django 的东西来完成，或者更可能是因为我还没有阅读过我自己的处理 post 和 get 的用户定义视图的 mixins。但是忽略这一点 - 因为我确定我应该使用 mixins - 上面的“对吗？” 或者有什么建议吗？

干杯！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T10:32:14.653

查看[django docs 上的用户配置文件](https://docs.djangoproject.com/en/dev/topics/auth/#storing-additional-information-about-users)，那里列出了基础知识。您还应该看看在[视图中使用表单](https://docs.djangoproject.com/en/dev/topics/forms/#using-a-form-in-a-view)。

一些具体的反馈：

*   您获得了正确的 UserProfile 模型，但是每次添加新用户时都必须创建一个实例（通过管理界面或在您的一个视图中以编程方式）。您可以通过注册到 User`post_save`信号来做到这一点：

    ```
    def create_user_profile(sender, instance, created, **kwargs):
        if created:
            UserProfile.objects.create(user=instance)
    post_save.connect(create_user_profile, sender=User) 
    ```

*   您应该使用 的实例来初始化 ModelForm `UserProfile`，而不是`User`. 您始终可以使用`request.user.get_profile()`（如果您 `AUTH_PROFILE_MODULE`在 settings.py 中定义）获取当前用户配置文件。您的视图可能如下所示：

    ```
    def editprofile(request):
        user_profile = request.user.get_profile()
        if request.method == 'POST':
            form = UserProfileForm(request.POST, instance=user_profile)
            if form.is_valid():
                form.save()
                return HttpResponseRedirect('/accounts/profile')
        else:
            form = UserProfileForm(instance=user_profile)
        # ... 
    ```

*   无需在您的 ModelForm 中进行**初始化**覆盖。无论如何，您将使用 UserProfile 实例调用它。如果要创建新用户，只需调用 User 构造函数：

    ```
    user = User()
    user.save()
    form = UserProfileForm(instance = user.get_profile())
    # ... 
    ```

# java - Java如何提高50 Gigabit文件的读取

> ID：11178527
> 
> 赞同：8
> 
> 时间：2012-06-24T15:05:27.120
> 
> 标签：java, file, bufferedreader

我正在阅读一个 50G 文件，其中包含数百万行由换行符分隔的行。目前我正在使用以下语法来读取文件

```
String line = null;
BufferedReader br = new BufferedReader(new InputStreamReader(new FileInputStream("FileName")));
while ((line = br.readLine()) != null)
{
// Processing each line here
// All processing is done in memory. No IO required here.
} 
```

由于文件太大，处理整个文件需要 2 小时。我能否改进从硬盘读取文件的操作，以便 IO（读取）操作花费最少的时间。我的代码的限制是我必须处理每一行的顺序。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-24T15:15:45.057

> 处理整个文件需要 2 小时。

50 GB/2 小时大约等于 7 MB/s。这一点也不差。一个好的（现代）硬盘应该能够持续保持更高的速率，所以您的瓶颈可能不是 I/O？您已经在使用 BufferedReader，正如其名称所说，它正在缓冲（在内存中）它读取的内容。您可以尝试使用比默认大小（8192 字节）更大的缓冲区创建阅读器，如下所示：

```
BufferedReader br = new BufferedReader(
    new InputStreamReader(new FileInputStream("FileName")), 100000); 
```

请注意，使用默认的 8192 字节缓冲区和 7 MB/s 吞吐量，BufferedReader 每秒将重新填充其缓冲区几乎 1000 次，因此降低该数字确实有助于减少一些开销。但是，如果您正在执行的处理而不是 I/O 是瓶颈，那么任何 I/O 技巧都不会对您有太大帮助。您也许应该考虑将其设为多线程，但它是否可行以及如何实现取决于“处理”在这里的含义。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-24T15:08:17.540

您唯一的希望是并行读取和处理内部内容。您的策略应该是永远不要要求整个文件内容一次在内存中。

从分析代码开始，您必须查看时间花费在哪里。重写花费最多时间的部分并重新配置文件以查看它是否有所改进。不断重复，直到获得可接受的结果。

我会考虑 Hadoop 和分布式解决方案。比您的更大的数据集现在会被常规处理。你可能需要在你的思维中更有创意。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-24T15:31:17.893

如果没有 NIO，您将无法打破吞吐量障碍。例如，尝试使用`new Scanner(File)`而不是直接创建阅读器。最近看了一下源代码，它使用了 NIO 的文件通道。

但我建议的第一件事是运行一个空循环`BufferedReader`，除了阅读之外什么都不做。注意吞吐量——还要注意 CPU。如果循环使 CPU 瘫痪，那么 IO 代码肯定有问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-24T19:56:16.423

1.  Disable the antivirus and any other program which adds to disk contention while reading the file.

2.  Defragment the disk.

3.  Create a raw disk partition and read the file from there.

4.  Read the file from an SSD.

5.  Create a 50GB Ramdisk and read the file from there.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-24T21:24:22.540

我认为通过重新考虑您要解决的问题，您可能会获得最佳结果。您加载这个 50Gig 文件显然是有*原因的。*考虑是否没有更好的方法来分解存储的数据并仅使用您真正需要的数据。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-07T21:07:05.220

您阅读文件的方式很好。可能有一些方法可以更快地获得它，但它通常需要了解你的瓶颈在哪里。因为 IO 吞吐量实际上处于较低端，所以我假设计算具有性能副作用。如果它不太长，您可以向您展示整个程序。

或者，您可以在没有循环内容的情况下运行程序，并查看通读文件需要多长时间：)

# ruby - 使用 RSpec 进行性能测试

> ID：11178530
> 
> 赞同：2
> 
> 时间：2012-06-24T15:06:08.083
> 
> 标签：ruby, unit-testing, rspec

我正在尝试将性能测试合并到*非 Rails*应用程序的测试套件中，但遇到了一些问题。

1.  我不需要每次都运行性能测试，我该如何排除它们？评论和取消评论`config.filter_run_excluding :perf => true`似乎是个坏主意。
2.  如何报告基准测试结果？我认为 RSpec 有一些机制。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T21:58:43.770

第一个问题部分解决，第二个问题用这段代码完全解决`spec/spec_helper.rb`

```
class MessageHelper
  class << self
    def messages
      @messages ||= []
    end

    def add(msg)
      messages << msg
    end
  end
end

def message(msg)
  MessageHelper.add msg
end

RSpec.configure do |c|
  c.filter_run_excluding :perf => !ENV["PERF"]

  c.after(:suite) do
    puts "\nMessages:"
    MessageHelper.messages.each {|m| puts m}
  end
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-04-21T19:01:48.737

我创建了[rspec-benchmark](https://github.com/piotrmurach/rspec-benchmark) Ruby gem 用于在 RSpec 中编写性能测试。它对测试速度、资源使用和可扩展性有很多期望。

例如，要测试您的代码有多快：

```
expect { ... }.to perform_under(60).ms 
```

或者与另一个实现进行比较：

```
expect { ... }.to perform_faster_than { ... }.at_least(5).times 
```

或测试计算复杂度：

```
expect { ... }.to perform_logarithmic.in_range(8, 100_000) 
```

或者查看分配了多少对象：

```
expect {
  _a = [Object.new]
  _b = {Object.new => 'foo'}
}.to perform_allocation({Array => 1, Object => 2}).objects 
```

要过滤您的测试，您可以将规范分离到一个`performance`目录中并添加一个 rake 任务

```
require 'rspec/core/rake_task'

desc 'Run performance specs'
RSpec::Core::RakeTask.new(:perf) do |task|
  task.pattern = 'spec/performance{,/*/**}/*_spec.rb'
end 
```

然后在需要时运行它们：

```
rake perf 
```

# android - 如何在android中跳过html数据中的图像标签？

> ID：11178533
> 
> 赞同：6
> 
> 时间：2012-06-24T15:06:46.927
> 
> 标签：android

我在 db 中的数据与其中的图像标签一起以 html 格式存储。因此，当我从数据库中获取数据时，我将删除 html 标签并将其设置为 textview。我的问题是即使删除了 html 标签，模拟器中也会显示一个小方框，表示有一些图像。如何在模拟器中删除那些指示该 html 数据中图像的方框？帮我解决这个...

提前致谢

我的代码：

```
textView.setText(Html.fromHtml(htmlString)); 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-24T15:14:22.513

你可以`<img.+?>`在`htmlString`.

```
textView.setText(Html.fromHtml(htmlString.replaceAll("<img.+?>", ""))); 
```

*未经测试*

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-06-23T12:24:01.953

因为图像看起来像：

```
<img ...></img> 
```

和

```
<img... /> 
```

此解决方案将匹配两种情况：

```
String htmlBody = htmlString.replaceAll("<img.+/(img)*>", "");
textView.setText(Html.fromHtml(htmlBody)); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-07-01T19:22:28.697

没有一个答案能够删除所有可能的`img`标签。

最合适的答案是

```
String htmlBody = htmlString.replaceAll("(<(/)img>)|(<img.+?>)", ""); 
```

它将删除并标记两者。并且不删除两个图像之间的任何内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-24T15:34:22.983

嗨看看这个例子

```
 String temp="<img>helloo</img><b> this is test</b>";
     temp=   temp.replace("<img>", "");
     temp=   temp.replace("</img>", "");
             textView.setText(Html.fromHtml(temp)); 
```

# c++ - opengl 3d纹理问题

> ID：11178535
> 
> 赞同：4
> 
> 时间：2012-06-24T15:06:48.647
> 
> 标签：c++, opengl

我正在尝试在 opengl 中使用 3d 纹理来实现体积渲染。每个体素都有一个 rgba 颜色值，当前呈现为面向屏幕的四边形。（用于测试目的）。我似乎无法让采样器在着色器中给我一个颜色值。四边形总是以黑色结束。当我更改着色器以生成颜色（基于 xyz 坐标）时，它可以正常工作。我正在使用以下代码加载纹理：

```
glGenTextures(1, &tex3D);
glBindTexture(GL_TEXTURE_3D, tex3D);
unsigned int colours[8];

colours[0] = Colour::AsBytes<unsigned int>(Colour::Blue);
colours[1] = Colour::AsBytes<unsigned int>(Colour::Red);
colours[2] = Colour::AsBytes<unsigned int>(Colour::Green);
colours[3] = Colour::AsBytes<unsigned int>(Colour::Magenta);
colours[4] = Colour::AsBytes<unsigned int>(Colour::Cyan);
colours[5] = Colour::AsBytes<unsigned int>(Colour::Yellow);
colours[6] = Colour::AsBytes<unsigned int>(Colour::White);
colours[7] = Colour::AsBytes<unsigned int>(Colour::Black);

glTexImage3D(GL_TEXTURE_3D, 0, GL_RGBA, 2, 2, 2, 0, GL_RGBA, GL_UNSIGNED_BYTE, colours); 
```

颜色数组包含正确的数据，即前四个字节的蓝色值分别为 0、0、255、255。在渲染之前，我将纹理绑定到第二个纹理单元，如下所示：

```
glActiveTexture(GL_TEXTURE1);
glBindTexture(GL_TEXTURE_3D, tex3D); 
```

并使用以下代码进行渲染：

```
shaders["DVR"]->Use();
shaders["DVR"]->Uniforms["volTex"].SetValue(1); 
shaders["DVR"]->Uniforms["World"].SetValue(Mat4(vl_one));
shaders["DVR"]->Uniforms["viewProj"].SetValue(cam->GetViewTransform() * cam->GetProjectionMatrix());

QuadDrawer::DrawQuads(8); 
```

我以前使用这些类来设置着色器参数，它们工作正常。quaddrawer 绘制八个实例化的四边形。顶点着色器代码如下所示：

```
#version 330

layout(location = 0) in vec2 position;
layout(location = 1) in vec2 texCoord;

uniform sampler3D volTex;
ivec3 size = ivec3(2, 2, 2);
uniform mat4 World; 
uniform mat4 viewProj;

smooth out vec4 colour;

void main()
{
    vec3 texCoord3D;

    int num = gl_InstanceID;

    texCoord3D.x = num % size.x;
    texCoord3D.y = (num / size.x) % size.y;
    texCoord3D.z = (num / (size.x * size.y));

    texCoord3D /= size;
    texCoord3D *= 2.0;
    texCoord3D -= 1.0;

    colour = texture(volTex, texCoord3D);
    //colour = vec4(texCoord3D, 1.0);   

    gl_Position = viewProj * World * vec4(texCoord3D, 1.0) + (vec4(position.x, position.y, 0.0, 0.0) * 0.05);

} 
```

取消注释我将颜色值设置为等于 texcoord 的行可以正常工作，并使四边形着色。片段着色器很简单：

```
#version 330

smooth in vec4 colour;
out vec4 outColour;

void main()
{
    outColour = colour;
} 
```

所以我的问题是，我做错了什么，为什么采样器没有从 3d 纹理中获取任何颜色值？

[编辑] 想通了，但不能自己回答（新用户）：

一旦我发布了这个我想通了，我会提出答案来帮助其他人（这不是专门的 3d 纹理问题，而且我以前也遇到过，D'oh！）。我没有为纹理生成 mipmap，并且默认的放大/缩小过滤器没有设置为 GL_LINEAR 或 GL_NEAREST。繁荣！没有纹理。2d 纹理也会发生同样的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T15:26:20.550

一旦我发布了这个我想通了，我会提出答案来帮助其他人（这不是专门的 3d 纹理问题，而且我以前也遇到过，D'oh！）。我没有为纹理生成 mipmap，并且默认的放大/缩小过滤器没有设置为 GL_LINEAR 或 GL_NEAREST。繁荣！没有纹理。2d 纹理也会发生同样的事情。

# sql - CREATE FILE 遇到操作系统错误 5（无法检索此错误的文本。原因：15105）

> ID：11178536
> 
> 赞同：72
> 
> 时间：2012-06-24T15:07:06.713
> 
> 标签：sql, sql-server-2008, sql-server-express

我在文件夹中有一个`.mdf`来自 MS SQL EXPRESS 的数据库文件：

```
C:\Program Files\Microsoft SQL Server\MSSQL10.SQLEXPRESS\MSSQL\DATA 
```

我想将它附加到**MS 2008 R2** (MSSQL10_50.MSSQLSERVER) 但使用 Server Management Studio 我收到以下错误：

`CREATE FILE encountered operating system error 5(failed to retrieve text for this error. Reason: 15105) while attempting to open or create the physical file`

你知道如何解决它吗？

* * *

## 回答 #1

> 赞同：138
> 
> 时间：2012-06-24T15:11:44.307

我能够解决以管理员身份运行 MS SQL Management Studio 的问题。

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2013-01-31T16:56:34.087

这是 Windows 权限问题。如果您使用 Windows 身份验证连接到服务器，则该 Windows 用户需要对该文件的权限。如果您使用 SQL Server 身份验证连接到您的服务器，则 SQL Server 实例帐户（MSSQL$，例如 MSSQL$SQLEXPRESS）需要对该文件的权限。建议以管理员身份登录的其他解决方案基本上完成了同样的事情（有点大锤:)。

如果数据库文件位于 SQL Server 的数据文件夹中，那么它应该已经从该文件夹继承了 SQL Server 帐户的用户权限，因此 SQL Server 身份验证应该有效。我建议修复该文件夹的 SQL Server 实例帐户权限。如果数据文件在其他地方并且 SQL Server 帐户没有权限，那么您以后可能会遇到其他问题。同样，更好的解决方案是修复 SS 帐户权限。除非您总是以管理员身份登录...

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-01-20T18:51:08.380

右键单击文件 mdf 和 ldf 属性 -> 安全 -> 完全权限

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-07-08T15:03:43.193

授予管理员权限或完全控制我的数据库安装位置解决了我的问题

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-11-22T16:27:59.227

我有同样的问题。经过几次尝试，我意识到将 sql server 与 windows 身份验证连接解决了这个问题。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-02-27T14:12:52.687

开始->运行-> `services.msc`->滚动服务列表，直到找到SQL Server->右键单击->属性->登录选项卡：

然后选择`Local System Account`并选中`Allow service to interact with desktop`复选框。

重新启动服务。

[![服务](../Images/5ff1b2b78b7b241e2d012e3ece708520.png)](https://i.stack.imgur.com/KWqjW.png)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-06-01T20:30:18.477

我遇到了类似的错误。

```
CREATE FILE encountered operating system error **32**(failed to retrieve text for this error. Reason: 15105) while attempting to open or create the physical file 
```

我使用以下命令附加数据库：

```
EXEC sp_attach_single_file_db @dbname = 'SPDB',
@physname = 'D:\SPDB.mdf' 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-05-09T19:39:47.627

正如其他建议以管理员身份运行将有所帮助。

但是，这仅当 windows 用户实际上是运行 sql server 的机器上的管理员时。

例如，当从远程计算机使用 SSMS 时，如果用户只是运行 SSMS 的计算机上的管理员而不是运行 SQL Server 的计算机上的管理员，则使用“以管理员身份运行”将无济于事。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-11-30T15:00:02.423

当文件的所有者被删除时，也会出现同样的问题。发生这种情况时，如果您转到文件的属性，您将看到一个 SID 而不是用户名。取得文件的所有权（给自己完全控制权）。完成后，您可以对文件执行任何操作。

登录时我已经完成了这项工作，因为管理员没有做到这一点。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-01-04T13:19:49.657

我在带有 SQL 2005 的 Windows 2003 上遇到了这个问题。我必须将文件的所有权作为我的 Windows 用户帐户，并且我让数据库以这种方式附加。

您必须右键单击该文件，选择属性，单击确定以通过信息屏幕，单击高级按钮，从可用帐户或组列表中选择您的帐户，应用该更改，然后单击属性屏幕上的确定。完成所有操作后，您将能够管理文件权限。

我使用 Windows 身份验证登录 SSMS，并且能够正确附加数据库。

干杯!

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2013-05-23T12:49:19.090

1.**复制**你的**--.MDF,--.LDF 文件**到这个位置 对于 2008 服务器 **C:\Program Files\Microsoft SQL Server\MSSQL10.MSSQLSERVER\MSSQL\DATA** **2.**在 sql server 2008 中使用**ATTACH**并选择相同的位置添加

 ***** * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-12-09T09:54:37.150

以管理员身份打开 SSMS 并以 SQL Auth vs Windows Auth 身份运行不起作用。

有效的方法是将我的文件名更改为 LDF 和 MDF 文件所在的相同位置。

```
alter database MyDB
add file ( name = N'FileStreamName', 
filename = N'D:\SQL Databases\FileStreamSpace' ) 
to filegroup DocumentFiles; 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-08-21T07:53:09.220

将您的文件复制`--.MDF`到此`--.LDF`位置 对于 2008 服务器`C:\Program Files\Microsoft SQL Server\MSSQL10.MSSQLSERVER\MSSQL\DATA 2`。

在 sql server 2008 中使用 ATTACH 并选择相同的位置进行添加

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-07-15T19:22:54.630

我的解决方案稍微复杂一些。在验证服务运行的用户、以本地和域管理员身份运行 MSSMS 并检查文件夹权限后，我仍然收到此错误。我的解决方案？

文件夹所有权仍由本地帐户维护。

**属性 > 安全 > 高级 > 所有者 >（域/本地用户/组 SQL 服务正在运行）**

这为我解决了这个问题。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2014-05-13T04:45:46.670

就我而言，尝试在新驱动器上创建数据库时出现错误。为了克服这个问题，我在该驱动器中创建了一个新文件夹并将用户属性 Security 设置为完全控制它（设置 Modify 可能就足够了）。结论：为用户设置驱动器/文件夹属性安全性以“修改”。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2013-04-24T15:14:33.357

如果您已经以管理员身份运行，请确保您使用的用户具有正确的服务器角色。

1.  以 sa 身份登录（如果可以）
2.  展开安全文件夹
3.  展开登录文件夹
4.  右键单击您要使用的用户
5.  选择属性
6.  选择服务器角色
7.  选择所有服务器角色
8.  点击确定
9.  重启 SSMS
10.  使用修改后的用户登录

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2015-08-25T06:22:49.107

以下是步骤：

1.  右键单击 .mdf 和 .ldf 文件。
2.  然后选择属性。
3.  在安全 -> 高级 -> 权限上添加用户

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2018-12-11T21:33:32.770

这是我的情况。我被要求为数据库附加文件。我得到的文件名如下

*   devdb.mdf 和 devdb.ldf

我继续附加文件并不断获取文件正在被另一个进程使用。

我对系统视图 select name,physical_name from sys.master_files 进行了查询；并看到确切的文件名已被另一个数据库使用，因此每次我尝试附加文件时，我一直收到错误文件正在被另一个进程（sql server）使用

因此，如果您收到这样的消息，那么还要查询系统视图 sys.master_files 并查看哪个数据库可能已经在使用同名文件。此后，您将弄清楚该怎么做。

谢谢。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2015-12-01T15:07:22.910

还原在另一台服务器上备份的数据库时出现此错误。经过长时间的斗争，这就是我所做的

1.  启用即时文件初始化，

2.  授予服务帐户和我自己的 Windows 帐户的文件夹权限（完全控制），

3.  重新启动 SQL 服务。之后数据库恢复。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2018-03-17T11:10:06.957

我刚刚决定在 D: 而不是 C: 中创建文件，并且一切正常。windows 7...10 在文件和文件夹的共享和授权方面有很多问题..

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2019-02-20T09:58:03.737

如果您有挂载点，请将 SQL Server 服务帐户相应地添加到卷安全性

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2017-05-12T21:10:44.130

我们遇到了这个问题，当分离数据库的 windowsuser 和附加数据库的 windowsuser 不同时。当 windowsuser 分离数据库，尝试附加它时，它工作正常，没有问题。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2018-11-03T09:20:25.883

就我而言，以管理员身份运行没有帮助。我通过在配置管理器中将内置帐户更改为本地系统解决了这个问题。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2016-01-20T21:27:29.433

关键是“操作系统错误5”。微软在他们的网站上列出了各种错误代码和值

[https://msdn.microsoft.com/en-us/library/windows/desktop/ms681382(v=vs.85).aspx](https://msdn.microsoft.com/en-us/library/windows/desktop/ms681382(v=vs.85).aspx)

ERROR_ACCESS_DENIED 5 (0x5) 访问被拒绝。

* * *

## 回答 #25

> 赞同：-2
> 
> 时间：2014-03-13T18:49:25.310

没有必要做这一切。只需右键单击数据库文件并为每个人添加权限。这肯定会奏效。****

# php - 在 PHP 文件中，让 {$variable} 做相当于

> ID：11178547
> 
> 赞同：0
> 
> 时间：2012-06-24T15:08:45.183
> 
> 标签：php

> **可能重复：**
> [简单粗暴的 PHP 模板……没有这个可以工作`eval`吗？](https://stackoverflow.com/questions/3930053/dirt-simple-php-templates-can-this-work-without-eval)

假设我有一个名为`template.tpl`. 的内容`template.tpl`是：

```
<html>
<body>This is a variable: {$variable}</body>
</html> 
```

PHP 有没有办法将 template.tpl 呈现为 PHP 文件，然后理解它`{$variable}`应该被处理为`<?php echo $variable; ?>`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T15:21:58.040

输出缓冲几乎是微不足道的。

```
$variable = 'I am a variable';
$output = '';
ob_start();
require 'template.tpl';
$output = ob_get_clean();
echo $output; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T15:21:12.370

如果您*必须*做这种事情，请使用[Smarty 模板语言](http://www.smarty.net/)。这就是它的作用，而且它足够受欢迎，它必须做正确的事情。

但是，我强烈建议不要这样做。在这里查看我的相关答案：[Dirt-simple PHP templates...可以在没有 `eval` 的情况下工作吗？](https://stackoverflow.com/questions/3930053/dirt-simple-php-templates-can-this-work-without-eval/3958625#3958625)

# regex - 如何进行 reg exp 替换，仅替换 Tcl 中相同字符的某些出现

> ID：11178548
> 
> 赞同：1
> 
> 时间：2012-06-24T15:08:56.690
> 
> 标签：regex, tcl

我想在 tcl 中取一个表达式并将其转换`_`为`<`，`>`如果它们围绕一个数字。一些例子：

*   `bla_bla_4_`->`bla_bla<4>`
*   `bla_bla_4` ->`bla_bla_4`
*   `bla_4_`->`bla<4>`

我该怎么做？[我在regsub 的手册](http://www.tcl.tk/man/tcl8.4/TclCmd/regsub.htm)中找不到它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T15:34:01.420

You need the right pattern.

```
set parts {"bla_bla_4_" "bla_bla_4" "bla_4_"}
foreach part $parts {
   regsub -all {_(\d+)_} $part {<\1>} result
   puts "$part -> $result"
} 
```

This returns

```
bla_bla_4_ -> bla_bla<4>
bla_bla_4 -> bla_bla_4
bla_4_ -> bla<4> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T15:33:16.450

Should work:

```
regsub -all {_(\d+)_} $Line "<\\1>" Line 
```

# zend-framework - 如何根据语言进行链接 Zend

> ID：11178550
> 
> 赞同：0
> 
> 时间：2012-06-24T15:08:59.093
> 
> 标签：zend-framework, multilingual

该应用程序位于 Zend Framework 中。它是多语言的，菜单按钮使用语言文件翻译成英语或荷兰语。但是如何使用菜单按钮重定向到使用相同链接的其他内容？例如，en 版本链接到 ../Support，我希望 nl 版本链接到 ../Help 荷兰语页面将具有不同的内容（文本、图像），因此我将有不同的 index.phtml、indexnl.phtml。

我没有在这个网站上找到实际上解释这对非 zend 专家有好处的信息。帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T16:46:59.590

有多种方法可以处理这个问题。

**示例 1**

创建指向*单独*操作的单独路由。所以：

*   `/Support`=>`supportenAction()`默认情况下会渲染`supporten.phtml`
*   `/Help` =>`supportnlAction()`默认情况下会渲染`supportnl.phtml`

**示例 2**

创建指向*单个*操作的单独路由。所以：

*   `/Support`=>`supportAction()`
*   `/Help` =>`supportAction()`

然后在操作中根据 URL 呈现正确的视图：

```
$this->render('index' . $language); 
```

根据您的控制器代码的结构，您可能更喜欢这些示例中的任何一个。

# jquery-mobile - 使用加载 jquery mobile 失去风格

> ID：11178556
> 
> 赞同：0
> 
> 时间：2012-06-24T15:09:58.630
> 
> 标签：jquery-mobile

我有一个这种格式的页面：

```
<div id="index" data-role="page">
     <div id="container"></div>
</div> 
```

我将页面内容加载到#container 中，如下所示：

```
<script type="text/javascript">
 $(document).ready(function(){
    $('#container').load("pages/content.html");
 }); 
</script> 
```

“pages/content.html”有这个内容：

```
<div data-role="content">

    <a href="pages/calendar.html" data-role="button">Calendar</a>
</div> 
```

问题是按钮不带有jquery mobile的样式..我试着做。触发器（'create'）但没有成功。

有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T22:35:45.953

像这样的东西应该工作：

```
$(document).ready(function(){
    $('#container').html('<div data-role="content"><a href="pages/calendar.html" data-role="button">Calendar</a></div>');
    $('#container').trigger('create');
 }); ​ 
```

交换`.html`您的`.load`代码。请参阅[jsFiddle](http://jsfiddle.net/dMG85/)：如果您注释掉`$('#container').trigger('create');`该链接将保持未格式化。

# javascript - 带有谷歌地图地址查找的 jQuery 自动完成功能

> ID：11178562
> 
> 赞同：0
> 
> 时间：2012-06-24T15:10:43.583
> 
> 标签：javascript, jquery, jquery-plugins, google-maps-api-3, jquery-autocomplete

如何在 jsfiddle中重现[此插件？](http://gmap3.net/examples/address-lookup.html)到目前为止的代码[在这里](http://jsfiddle.net/VBFxp/2/)。我的问题是 - 我可以看到使用 firebug 的每个请求都有响应数据，但没有显示自动完成列表。谢谢你们的时间。

直接从小提琴添加代码 - HTML：

```
<!-- required js libraries -->
<script type="text/javascript" src="jquery-1.7.1.min.js"></script> <!-- jQuery is directly loaded from fiddle, so in the live example I skipped this line -->
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script type="text/javascript" src="http://gmap3.net/js/gmap3-4.1-min.js"></script>
<script type="text/javascript" src="https://raw.github.com/jbdemonte/autocomplete/master/jquery-autocomplete.min.js"></script>

<!-- this is required to help autocomplete plugin -->
<link rel="stylesheet" type="text/css" href="https://raw.github.com/jbdemonte/autocomplete/master/jquery-autocomplete.css" />

<input type="text" id="address" size="60"/>
<div id="test" style="height:350px; width:600px"></div>​ 
```

这是javascript：

```
/*This one initializes the map*/
$("#test").gmap3();

/*This is the autocomplete code*/
$('#address').autocomplete({
  source: function() {
    $("#test").gmap3({
      action:'getAddress',
      address: $(this).val(),
      callback:function(results){
        if (!results) return;
        $('#address').autocomplete(
          'display', 
          results,
          false
        );
      }
    });
  },
  cb:{
    cast: function(item){
      return item.formatted_address;
    },
    select: function(item) {
      $("#test").gmap3(
        {action:'clear', name:'marker'},
        {action:'addMarker',
          latLng:item.geometry.location,
          map:{center:true}
        }
      );
    }
  }
});​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T15:50:09.190

可以通过将输入包装在容器中并在该容器和地图之间添加一些边距来使您的版本正常工作。我不认为 css 是从 github 资源正确交付的，因为我还必须添加一些额外的 z-index 以使结果列表显示在地图顶部

工作演示：http: [//jsfiddle.net/VBFxp/3/](http://jsfiddle.net/VBFxp/3/)

# linux - 无论文件夹嵌套如何，如何将存档中的所有文件解压到一个文件夹中？

> ID：11178564
> 
> 赞同：1
> 
> 时间：2012-06-24T15:10:57.287
> 
> 标签：linux, archive, tar

在我的一个应用程序中，用户可以上传图像和档案（ZIP、RAR）。上传档案时，应将其提取。但是，有些用户会上传包含各种子文件夹（在存档内）中的文件的存档

因此，我正在寻找的是一个 tar 命令，它将从存档中提取**所有**文件到一个文件夹中，无论存档的结构是什么。

这可以用一个命令来完成吗？如果是，该命令是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T15:23:56.770

> 这可以用一个命令来完成吗？

不，`tar`不支持`-j`标志`unzip`，也不提供任何替代标志。

检查以下替代方案：
[TAR – 提取丢弃目录结构](https://superuser.com/questions/71846/tar-extract-discarding-directory-structure)

# c#-4.0 - 获取按子目录和文件名字母顺序排序的递归文件列表

> ID：11178566
> 
> 赞同：0
> 
> 时间：2012-06-24T15:11:10.837
> 
> 标签：c#-4.0, sorting

我试图对文件列表进行排序，但没有成功。

它递归地获取文件，但没有任何顺序。

这是代码：

```
private void Step2_Load(object sender, EventArgs e)
{
    foreach (string file in GetFiles(PathClient))
    {
        string flist = "";
        if (file.Contains(PathClient + "\\"))
            flist = file.Replace(PathClient + "\\", "");
        else
             flist = file.Replace(PathClient, "");

         LB_FULL.Items.Add(flist);
    }
.
.
.

static IEnumerable<string> GetFiles(string path)
{
    Queue<string> queue = new Queue<string>();
    queue.Enqueue(path);
    while (queue.Count > 0)
    {
        path = queue.Dequeue();
        try
        {
            foreach (string subDir in Directory.GetDirectories(path))
                queue.Enqueue(subDir);
        }
        catch (Exception ex)
        {
            //ex
        }
        string[] files = null;
        try
        {
            files = Directory.GetFiles(path);
        }
        catch (Exception ex)
        {
            //ex
        }
        if (files != null)
        {
            for (int i = 0; i < files.Length; i++)
            {
                yield return files[i];
            }
        }
    }
} 
```

我试过使用 OrderBy，但它只按文件名排序，而不考虑子文件夹。

我想先按子文件夹排序，然后按文件名。

例如。

```
/
/file_a.bla
/file_b.bla
/file_c.bla
/sub1/file_a.bla
/sub1/file_b.bla
/sub2/_file_x.bla
/testsub/a.bla
... 
```

等等。

任何想法如何管理它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T17:53:13.580

是否需要进行自己的递归搜索，还是可以使用适当的 Directory.GetFiles 重载？

无论如何，使用该重载，您可以按照我认为您想要的方式对文件进行排序（您没有提到您希望如何排序子子目录）：

```
string dirToSearch = @"C:\temp";
string[] files = Directory.GetFiles(dirToSearch, "*.*", SearchOption.AllDirectories);
var mySortedFiles = files.OrderBy(r => Path.GetDirectoryName(r)).
    ThenBy(p => p.Count(c => c == Path.PathSeparator)).
    ThenBy(s => Path.GetFileNameWithoutExtension(s)).
    Select(t => t.Replace(dirToSearch, ""));

foreach (string s in mySortedFiles)
    Console.WriteLine(s);

Console.ReadLine(); 
```

例如，这给出了：

```
\CrossJoinA-H.sql
\ip-to-country.csv
\Kalimba.mp3
\LoadAssembly.sql
\ProcToUseAssembly.sql
\test.txt
\a\New Bitmap Image.bmp
\a\New Text Document.txt
\a\c\New Text Document.txt
\b\New Text Document.txt
\b\New Text Document (2).txt 
```

# c# - 这是否可以通过 C++ 或 C# 中的某种数学运算将一百万位数字转换为 1000 位数字？

> ID：11178567
> 
> 赞同：-2
> 
> 时间：2012-06-24T15:11:18.720
> 
> 标签：c#, c++

我正在研究项目并遇到了问题。现在我想知道是否有减少大数字的位数？例如将一百万位数字转换为 1000 位数字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T15:16:45.937

如果您尝试描述的对象存在冗余，或者您可以处理轻微的数据丢失，则有很多降维方法：

*   主成分分析
*   小波
*   b-adic 表示您的数字以获得适当的 b
*   其他压缩算法（有损或无损）

# haskell - 在网络路由中派生 PathInfo 类？

> ID：11178572
> 
> 赞同：1
> 
> 时间：2012-06-24T15:11:54.620
> 
> 标签：haskell, happstack

我正在阅读 Happstack 中的[网络路由教程](http://www.happstack.com/docs/crashcourse/WebRoutes.html#web-routes)，但我不知道这是在做什么：

```
$(derivePathInfo ''Sitemap)

class PathInfo a where
  toPathSegments :: a -> [String]
  fromPathSegments :: URLParser a 
```

文档只是说：

> 我们使用 template-haskell 为 Sitemap 类型派生 PathInfo 的实例。

但它在哪里“存储”它？我认为haskell没有状态，是`PathInfo`我们自己的东西，还是happstack的一部分？

如果有人可以解释一下，对于傻瓜？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T16:13:22.663

它生成为 Sitemap 类型定义 PathInfo 类实例的代码。这不像“类型全局常量”那样是“状态”。例如，`toPathSegments (Article (ArticleId 5))`将返回类似`["Article", "5"]`的内容，而后者又将用于生成类似`"/Article/5"`. 另一个函数 ,`fromPathSegments`是逆运算，解析`"/Article/5"`回`Article (ArticleId 5)`.

您可以手动编写此实例：

```
instance PathInfo Sitemap where
    toPathSegments Home = ["Home"]
    toPathSegments (Article (ArticleId x)) = ["Article", show x]
    fromPathSegments = ... 
```

模板 Haskell 仅用于减少对该样板代码的需求。

你可能想阅读《 [Learn You a Haskell for Great Good!](http://learnyouahaskell.com/chapters)》一书中[关于类型类的章节！](http://learnyouahaskell.com/types-and-typeclasses)这是针对 Haskell 初学者的。

# wpf - 如何创建附加属性来更改资源的属性？

> ID：11178575
> 
> 赞同：0
> 
> 时间：2012-06-24T15:12:04.907
> 
> 标签：wpf, styles, resourcedictionary, attached-properties, drawingbrush

我有一个`DrawingBrush`像这样的资源：

```
<DrawingBrush x:Key="Calendar" Stretch="Uniform">
    <DrawingBrush.Drawing>
        <DrawingGroup>
            <DrawingGroup.Children>
                <GeometryDrawing Geometry="F1 M 28.0917,2.13333C 42.4005,2.13333 54,13.7329 54,28.0417C 54,42.3504 42.4004,53.95 28.0917,53.95C 13.7829,53.95 2.18334,42.3504 2.18334,28.0417C 2.18334,13.7329 13.7829,2.13333 28.0917,2.13333 Z ">
                    <GeometryDrawing.Pen>
                        <Pen Thickness="4" LineJoin="Round" Brush="#FF000000"/>
                    </GeometryDrawing.Pen>
                </GeometryDrawing>
                <GeometryDrawing Geometry="F1 M 16.9667,16.7083L 39.7167,16.7083L 39.7167,41.625L 16.9667,41.625L 16.9667,16.7083 Z ">
                    <GeometryDrawing.Pen>
                        <Pen Thickness="2.66667" StartLineCap="Square" EndLineCap="Square" MiterLimit="2.75" Brush="#FF000000"/>
                    </GeometryDrawing.Pen>
                </GeometryDrawing>
                <GeometryDrawing Brush="#FF000000" Geometry="F1 M 15.6333,15.9583L 40.7167,15.9583L 40.7167,25.2917L 15.6333,25.2917L 15.6333,15.9583 Z "/>
                <GeometryDrawing Brush="#FFFFFFFF" Geometry="F1 M 18.2167,11.9583L 22.9667,11.9583L 22.9667,20.875L 18.2167,20.875L 18.2167,11.9583 Z ">
                    <GeometryDrawing.Pen>
                        <Pen Thickness="1.33333" StartLineCap="Square" EndLineCap="Square" MiterLimit="2.75" Brush="#FF000000"/>
                    </GeometryDrawing.Pen>
                </GeometryDrawing>
                <GeometryDrawing Brush="#FFFFFFFF" Geometry="F1 M 33.7167,11.925L 38.4667,11.925L 38.4667,20.8417L 33.7167,20.8417L 33.7167,11.925 Z ">
                    <GeometryDrawing.Pen>
                        <Pen Thickness="1.33333" StartLineCap="Square" EndLineCap="Square" MiterLimit="2.75" Brush="#FF000000"/>
                    </GeometryDrawing.Pen>
                </GeometryDrawing>
                <GeometryDrawing Brush="#FF000000" Geometry="F1 M 28.0154,36.2658L 28.0154,37.4894L 21.6254,37.4894C 21.6169,37.1934 21.6615,36.908 21.7592,36.6333C 21.915,36.1815 22.165,35.7425 22.5091,35.3162C 22.8533,34.8899 23.3617,34.4091 24.0344,33.8738C 25.0782,32.983 25.776,32.295 26.1279,31.81C 26.4799,31.3249 26.6558,30.8551 26.6558,30.4005C 26.6558,29.9473 26.4894,29.5653 26.1566,29.2544C 25.8238,28.9435 25.3904,28.7881 24.8565,28.7881C 24.2915,28.7881 23.8393,28.9442 23.5001,29.2565C 23.161,29.5688 22.9892,30.0018 22.985,30.5556L 21.7614,30.4196C 21.8449,29.5345 22.1576,28.86 22.6993,28.3962C 23.241,27.9323 23.9686,27.7004 24.882,27.7004C 25.8054,27.7004 26.5358,27.9596 27.0733,28.4779C 27.6107,28.9963 27.8795,29.6385 27.8795,30.4047C 27.8795,30.7942 27.8065,31.1769 27.6607,31.5529C 27.5148,31.9289 27.2726,32.3251 26.9341,32.7415C 26.5957,33.1579 26.0115,33.7215 25.1816,34.4325C 24.4692,35.0216 24.0008,35.4214 23.7763,35.6317C 23.5518,35.842 23.3667,36.0533 23.2208,36.2658L 28.0154,36.2658 Z "/>
                <GeometryDrawing Brush="#FF000000" Geometry="F1 M 33.3178,37.4894L 33.3178,35.1781L 28.9671,35.1781L 28.9671,33.9545L 33.5897,27.8364L 34.5414,27.8364L 34.5414,33.9545L 35.765,33.9545L 35.765,35.1781L 34.5414,35.1781L 34.5414,37.4894L 33.3178,37.4894 Z M 33.3178,33.9545L 33.3178,30.1774L 30.4648,33.9545L 33.3178,33.9545 Z "/>
            </DrawingGroup.Children>
        </DrawingGroup>
    </DrawingBrush.Drawing>
</DrawingBrush> 
```

我可以这样使用它：

```
<Rectangle Fill="{DynamicResource Calender}" /> 
```

现在，我的问题是：如何创建附加属性来更改资源上的所有画笔？例如我可以创建这个：

```
<Rectangle Fill="{DynamicResource Calendar}" attached:IconHelper.Foreground="Blue" /> 
```

在我`Rectangle`和我的资源中，我可以获得：

```
<DrawingBrush x:Key="Calendar" Stretch="Uniform">
    <DrawingBrush.Drawing>
        <DrawingGroup>
            <DrawingGroup.Children>
                <GeometryDrawing Geometry="blah blah">
                    <GeometryDrawing.Pen>
                        <Pen Brush={attached:ReadItFromAboveRectangle}/>
                    </GeometryDrawing.Pen>
                </GeometryDrawing>
                <GeometryDrawing Geometry="blah blah">
                    <GeometryDrawing.Pen>
                        <Pen Brush={attached:ReadItFromAboveRectangle}/>
                    </GeometryDrawing.Pen>
    <!-- etc... --> 
```

有没有办法读取资源`Rectangle`中的附加属性`Calendar`？或者有没有其他方法可以做到这一点？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T15:18:26.643

`FrameworkPropertyMetadataOptions.Inherits`这可能会让您使用- [http://www.thomaslevesque.com/2011/10/01/wpf-creating-parameterized-styles-with-attached-properties/](http://www.thomaslevesque.com/2011/10/01/wpf-creating-parameterized-styles-with-attached-properties/)来创建附加属性并使其可继承给它的孩子

# compiler-construction - 类型类，泛型记忆

> ID：11178579
> 
> 赞同：1
> 
> 时间：2012-06-24T15:13:04.180
> 
> 标签：compiler-construction, f#, type-inference

y 类型发生了一些非常奇怪的事情，我很不明白这是否合理。我倾向于认为不是。

此代码工作正常：

```
 type DictionarySingleton private () = 
      static let mutable instance = Dictionary<string*obj, obj>()
      static member Instance = instance

   let  memoize  (f:'a -> 'b) = 
      fun (x:'a) ->
         let key = f.ToString(), (x :> obj)
         if (DictionarySingleton.Instance).ContainsKey(key) 
         then let r = (DictionarySingleton.Instance).[key]
              r :?> 'b
         else 
              let res = f x 
              (DictionarySingleton.Instance).[key] <- (res :> obj)
              res 
```

而这个抱怨

```
 type DictionarySingleton private () = 
      static let mutable instance = Dictionary<string*obj, _>()
      static member Instance = instance

   let  memoize  (f:'a -> 'b) = 
      fun (x:'a) ->
         let key = f.ToString(), (x :> obj)
         if (DictionarySingleton.Instance).ContainsKey(key) 
         then let r = (DictionarySingleton.Instance).[key]
              r :?> 'b
         else 
              let res = f x 
              (DictionarySingleton.Instance).[key] <- (res :> obj)
              res 
```

区别只是字典定义中的下划线。推断的类型是相同的，但是从 r 到类型 'b 的动态转换会出现错误。

**'这个运行时强制......运行时类型测试在某些类型上是不允许的，等等......'**

我错过了什么还是一个粗糙的边缘？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T18:58:40.720

如果您分两步编译，首先是 Type `DictionarySingleton`，然后是 Function `memoize`。看起来编译器首先尝试找出下划线的类型（可能是泛型类型），然后在确定它之前`obj`它还尝试推断 r 的类型。所以到那时它还没有与 统一`obj`，这就是如果你一次编译它会失败的原因。

# mysql - 用于存储类银行账户和交易的数据库结构

> ID：11178580
> 
> 赞同：3
> 
> 时间：2012-06-24T15:13:04.563
> 
> 标签：mysql, database-design, database-schema, banking

我们正在为我们自己的商店添加类似银行的子系统。

我们已经有客户，所以每个人都会被分配一个帐户，并且可以进行某种交易（添加到帐户中或从中减去）。

因此，我们至少需要**帐户**实体、**交易**一和操作，然后必须重新计算总体余额。

你将如何构建你的数据库来处理这个问题？

有没有我可以模拟的标准银行系统？

顺便说一句，我们在 mysql 上，但也会研究一些 nosql 解决方案来提高性能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T02:02:13.443

我不认为您需要 NoSQL 来提高速度，因为它不太可能需要太多/任何并行性，并且不确定您可能需要多不面向模式。除非您开始处理复杂的业务需求以分析数以百万计的客户和数亿笔交易（例如盈利能力），即便如此，这仍然是一种数据仓库式的问题，您可能不会在您的事务模式上运行如果它变得那么大，那将是第一位的。

在关系设计中，我倾向于避免任何需要重新计算余额的设计，因为那样你最终会得到余额修复程序等。通过适当的索引和足够简单的设计，你可以对交易进行简单的 SUM（正数和负数） ) 以取得平衡。在交易上具有良好一致的符号约定（对于是否添加或减去没有歧义 - 始终添加值）和适当的约束（交易类型数量有限，您可以指定所有存款为正数且所有取款为负数的约束条件) 你可以让数据库确保没有像负存款这样的异常情况。

即使您想以某种方式缓存余额，您仍然可以依靠这种简单的机制来增加交易表上的触发器来更新帐户汇总表。

我不喜欢把这些放在数据库之外的中间层。您的基本会计应该相当简单，可以在数据库引擎中快速处理，以便执行查询的任何人或应用程序的任何部分都将获得相同的答案，而无需涉及任何客户端代码逻辑。因此，数据库使用约束、触发器和存储过程的组合确保了略高于参考完整性的完整性（可能不允许关闭余额为非零的帐户，可能不允许余额变为负数等），在根据需要增加复杂性的顺序。我不是在谈论你所有的业务逻辑，

在真正的银行业务（即 COBOL 应用程序）中，通常是数据库模式（通常是非关系型和非规范化的——其中很多东西早于 SQL），你会看到很多东西，比如 12 个月的过去余额桶，这些东西在帐户翻转。这些系统使用的一些数据库是分层的。这就是代码真正重要的地方，因为一切都在代码中完成。再一次，它有点过时并且受到各种问题的影响（即可能很像 NatWest 正在经历的事情），而 NoSQL 是一种回归这种以代码为王的看待事物的方式的趋势。我只是倾向于在长时间处理这些事情后思考 - 我不喜欢缓存余额的系统，我不喜欢你真的没有时间点问责制的系统 - 即

我确信有人拥有类似银行的数据库设计的“标准”模式，但尽管多年来构建了几个类似会计的系统，但我不知道它们 - 账户和交易并不那么复杂，一旦你超越这个概念，一切都得到高度定制。

例如，在某些情况下，您可能会根据 GAAP 和按时间支付的合同按某种时间表确认合同收益。在银行业务中，您有很多与利息相关的事情，资金成本等利率不同。一旦您开始将业务需求与资金进出会计的基础知识混合在一起，一切都会变得独一无二。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T15:19:39.373

你没有说你的应用程序中是否有一个中间层，在 UI 和数据库之间。如果这样做，您可以选择在哪里标记交易并重新计算余额。如果该数据库完全由一个应用程序拥有，您可以将计算移至中间层并仅使用该数据库进行持久化。

Spring 是一个框架，它有一个很好的基于注解的方式来声明事务。它基于 POJO；EJB 的替代方案。它是依赖注入、面向方面编程和优秀库的三足凳。也许它可以帮助您构建和实现您的应用程序。

如果您确实有中间层，并且它是用面向对象的语言编写的，那么我建议您看看 Martin Fowler 的“分析模式”。它已经存在了很长时间，但是关于金融系统的这一章今天和它最初写的时候一样好。

# c# - C# MongoDB 设置 ReadPreference

> ID：11178585
> 
> 赞同：2
> 
> 时间：2012-06-24T15:14:27.247
> 
> 标签：c#, mongodb

可能就在我面前，但我不确定如何在 C# 驱动程序中设置 ReadPreference.Secondary 设置？我想将查询负载分配到我的辅助节点而不是默认节点。我已经在节点本身上设置了 slaveOk() 。

任何帮助/示例将不胜感激。我只是找不到设置该属性的好例子。

谢谢，

小号

**编辑**：所以也许 ReadPreference 还没有在 C# 驱动程序中实现......看起来就是这样。那么我会使用slaveok吗？

类似于以下之一？：

```
var mongoServer = MongoServer.Create("mongodb://localhost/?
replicaSet=myset;slaveOk=true");

var db = mongoServer.GetDatabase("MyDb");
var coll = db.GetCollection("MyColl"); 
```

或者

```
var cs= db.CreateCollectionSettings<BsonDocument>("Users");
cs.SlaveOk = true;
var coll = db.GetCollection(cs); 
```

**EDIT2：** 看起来我可能需要修改连接字符串来装饰每个 Mongo 实例？

```
mongodb://serverA:27017,serverB:27017,serverC:27017/?safe=true;replicaset=myreplicaset;slaveok=true 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T12:06:29.947

是的，C# 驱动程序中尚未实现 ReadPreferences。我们 10gen 一直在等待实现 ReadPreferences，直到包括 mongos 在内的所有驱动程序都可以同时实现。这种支持应该大约在服务器版本 2.2 时提供。

# asp.net-mvc - ASP.NET MVC3 和实体框架模型中的下拉列表帖子

> ID：11178586
> 
> 赞同：0
> 
> 时间：2012-06-24T15:14:44.147
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我有 3 张桌子：

速率配置文件

*   RateProfileID
*   个人资料名称

速度

*   费率ID
*   RateProfileID
*   面板ID
*   其他要更新的东西

控制板

*   面板ID
*   面板名称

我有这些模型。我有一个使用 RateProfile 模型的编辑页面。我显示 RateProfile 的信息以及与之关联的所有 Rates。这很好用，我可以很好地更新它。但是，我还添加了一个下拉列表，以便我可以按 PanelID 过滤费率。我需要它来回发更改，以便它可以显示过滤后的费率。

我在用着

```
@Html.DropDownList("PanelID", (SelectList)ViewData["PanelDropDown"], new { onchange = "$('#RateForm').submit()" }) 
```

对于我的下拉列表。每当它回发到我的 HttpPost Edit 方法时，它似乎都缺少有关 Rates 导航属性的所有信息。这很奇怪，因为我认为它会完全按照我在表单中的输入/提交按钮所做的事情（实际上将整个模型传递回我的 HttpPost 编辑操作并执行我想要它执行的操作）。panelID 正确地传递给我的 HttpPost Edit 方法并传递到下一个视图，但是当我尝试查询 Model.Rates 导航属性时为空（仅当帖子来自下拉列表时。当帖子来自时一切正常我的提交输入）。

获取编辑：

```
 public ActionResult Edit(int id, int panelID = 1)
    {

        RateProfile rateprofile = db.RateProfiles.Single(r => r.RateProfileID == id);
        var panels = db.Panels;

        ViewData["PanelDropDown"] = new SelectList(panels, "PanelID", "PanelName", panelID);
        ViewBag.PanelID = panelID;

        return View(rateprofile);
    } 
```

HttpPost 编辑：

```
 [HttpPost]
    public ActionResult Edit(RateProfile rateprofile, int panelID)
    {
        var panels = db.Panels;
        ViewData["PanelDropDown"] = new SelectList(panels, "PanelID", "PanelName", panelID);
        ViewBag.PanelID = panelID;
        if (ModelState.IsValid)
        {
            db.Entry(rateprofile).State = EntityState.Modified;

            foreach (Rate dimerate in rateprofile.Rates)
            {
                db.Entry(dimerate).State = EntityState.Modified;
            }
            db.SaveChanges();
            return View(rateprofile);
        }
        return View(rateprofile);
    } 
```

看法：

```
@model  PDR.Models.RateProfile
@using (Html.BeginForm(null,null,FormMethod.Post, new {id="RateForm"}))
{
    <div>
        @Html.Label("Panel")
        @Html.DropDownList("PanelID", (SelectList)ViewData["PanelDropDown"], new { onchange = "$('#RateForm').submit()" })
    </div>
    @{var rates= Model.Rates.Where(a => a.PanelID == ViewBag.PanelID).OrderBy(a => a.minCount).ToList();}
    @for (int i = 0; i < rates.Count; i++)
        {
            <tr>
                <td>
                    @Html.HiddenFor(modelItem => rates[i].RateProfileID)
                    @Html.HiddenFor(modelItem => rates[i].RateID)
                    @Html.HiddenFor(modelItem => rates[i].PanelID)

                    @Html.EditorFor(modelItem => rates[i].minCount)
                    @Html.ValidationMessageFor(model => rates[i].minCount)
                </td>
                <td>
                    @Html.EditorFor(modelItem => rates[i].maxCount)
                    @Html.ValidationMessageFor(model => rates[i].maxCount)
                </td>
                <td>
                    @Html.EditorFor(modelItem => rates[i].Amount)
                    @Html.ValidationMessageFor(model => rates[i].Amount)
                </td>
            </tr>
        }
     <input type="submit" value="Save" />
} 
```

总结一下我的问题，我认为以下查询仅在帖子来自提交按钮时有效，而不是来自我的下拉列表时。

```
@{var rates= Model.Rates.Where(a => a.PanelID == ViewBag.PanelID).OrderBy(a => a.minCount).ToList();} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T15:25:58.920

它在呈现的页面中看起来如何？您可能有两个元素以相同的名称/ID 呈现：

```
 @Html.DropDownList("PanelID", (SelectList)ViewData["PanelDropDown"], new { onchange = "$('#RateForm').submit()" 
```

和

```
@Html.HiddenFor(modelItem => rates[i].PanelID) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T15:27:58.247

我建议您使用 Firefox/Firebug 来检查它正在发出的实际请求。我无法想象如果通过提交与按钮触发表单会以不同的方式发布，但我想这是可能的。

在更大的范围内，我会对您的设计发表一些评论。

1.  我会为您的选择使用 ViewBag 属性，而不是对 ViewData 进行基于键的访问。这将在您的控制器和视图中更具可读性。

2.  考虑有一个单独的操作来填充由下拉列表过滤的信息。根据 PanelID 在您的视图中呈现该操作，并通过 AJAX 调用该操作以获取新的 HTML，而不是执行完整的表单发布。

3.  避免在标记中应用处理程序。相反，将可选的脚本部分添加到您的母版页，并在需要时将脚本添加到您的页面，以通过该部分应用您的行为。这允许您通过主控器控制特定于视图的脚本在文档中的放置位置，并使您的行为与文档结构分开，这是可读性的最佳实践。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T17:19:12.873

我发现了问题。看起来是因为我只循环了我的导航属性的一个子集（按 panelID 过滤的速率），从视图返回的模型只有导航属性的子集可供它使用。保存更改后，我刚刚重新定义了我的模型（再次从数据库中调用记录），现在看起来不错。

IE。我的导航属性中应该有 140 条记录，通过 panelID == 1 过滤将其缩小到 28 条记录。由于某种原因，实体框架决定它不想维护与其他 112 条记录的关系，所以当我将下拉列表更改为按 panelID == 2 过滤时，唯一可用的记录都有 panelID == 1 并返回 null .

# javascript - Google Closure Compiler，如何优雅地处理 JSC_INEXISTENT_PROPERTY？

> ID：11178589
> 
> 赞同：2
> 
> 时间：2012-06-24T15:15:11.323
> 
> 标签：javascript, google-closure-compiler

我正在使用一种设计模式，该模式使用 return 语句来公开公共类方法。

问题是：我在 Closure Compiler 的高级模式下收到很多**警告**`JSC_INEXISTENT_PROPERTY`，这使得检查真正重要的警告变得困难。

我使用的模式示例：

```
// ==ClosureCompiler==
// @compilation_level ADVANCED_OPTIMIZATIONS
// ==/ClosureCompiler==

/**
 * @constructor
 */
var MyClass = function() {

    var someFunc = function(myString) {
        console.log(myString);
    }

    return {
        myPublicFunc: someFunc
    };
}

var myClassInstance = new MyClass();
myClassInstance.myPublicFunc('Hello World'); 
```

警告：

```
JSC_INEXISTENT_PROPERTY: Property myPublicFunc never defined on MyClass \
    at line 16 character 0
myClassInstance.myPublicFunc('Hello World'); 
```

输出（格式化）：

```
(new function() {
    return {
        a: function(a) {
            console.log(a)
        }
    }
}).a("Hello World"); 
```

这很奇怪，因为 Closure 理解了代码在做什么并正确编译了代码，并`myPublicFunc`一致地重命名为`a`. 那么为什么我会收到这个警告呢？难道我做错了什么？

注意：我不想关闭这些警告，因为它也会隐藏我真正关心的警告。我也不想使用带引号的字符串或导出，因为我确实希望 Closure 压缩这些。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T14:16:44.740

您的函数注释不正确。它实际上不是构造函数，在这种情况下，`new`关键字是不必要的。您的函数只是返回一个带有`myPublicFunc`属性的匿名类型。

要注释这样的模式，您可以使用记录类型：

```
/** @return {{myPublicFunc: function(string) }} */
var MyClass = function() {

    var someFunc = function(myString) {
        console.log(myString);
    }

    return {
        myPublicFunc: someFunc
    };
};

var myClassInstance = MyClass(); // new keyword not needed
myClassInstance.myPublicFunc('Hello World'); 
```

Another annotation option is to create an interface and type-cast the returned object to be that interface. This option would be useful when multiple functions return an object that conforms to the same interface.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T15:51:41.317

You can also use:

```
/** @type {function(new:{myPublicFunc: function(string)} )} */
var MyClass = function() {... 
```

The function can be called with "new" but doesn't return an instance of "MyClass".

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T15:21:55.007

添加

```
MyClass.prototype.myPublicFunc = null; 
```

会解决问题，虽然我不知道这是否是最好的解决方案。

我真的不知道编译器是如何工作的，但我可以想象，如果你有一个构造函数，它期望实例属性被分配给构造函数`this`内部或`MyClass.prototype`.

如果您删除`@constructor`注释并省略`new`，则不会出现警告（但编译后的代码只有`console.log("Hello World");`.

# c - 汇编/C/GDB：代码转十六进制

> ID：11178591
> 
> 赞同：0
> 
> 时间：2012-06-24T15:15:32.703
> 
> 标签：c, assembly, gdb, hex

如何查看某些汇编程序命令的十六进制表示？

这是来自 gdb：

```
0x8048395 <simple+1>            mov    %esp,%ebp
0x8048397 <simple+3>            mov    $0x1,%eax
0x804839c <simple+8>            pop    %ebp                               
0x804839d <simple+9>            ret 
```

“simple”是这个程序的c函数。我试过

```
dump ihex value dump.hex simple 
```

这导致

```
:020000040804EE
:0183940000E8
:00000001FF 
```

和

```
dump ihex memory dump.hex 0x8048394 0x804839d 
```

这导致了一些不同的事情

```
:020000040804EE
:098394005589E5B8010000005D07
:00000001FF 
```

为什么它们不同？其中之一是正确的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T18:13:43.487

要查看实际字节，您可以简单地使用：

```
disas /r simple 
```

如果你想将文件转储到原始二进制文件

```
dump binary memory file.bin 0x8048394 0x804839d 
```

`ihex`格式是[**Intel Hex 格式**](http://en.wikipedia.org/wiki/Intel_HEX)，并不像看起来那么简单。

此外，当您使用时，`dump value`您正在转储函数地址的值，而不是函数本身的代码。这就是`dump memory`.

**UPDATE**: Actually, when you do `dump <format> value dump.hex simple`, it dumps the content of `simple`, but not knowing how to dump a function value, it dumps it as if it were a `char` value, that is, it dumps the first byte of the function. If you want to dump the address of the function, just do: `dump <format> value dump.hex &simple`.

# asp.net-mvc - 一个视图中的两个模型，仅验证其中一个

> ID：11178593
> 
> 赞同：2
> 
> 时间：2012-06-24T15:15:55.123
> 
> 标签：asp.net-mvc, asp.net-mvc-3, view, model

我有一个包含 ParentModel 的视图，其中包含 2 个模型。我只想验证一个或另一个的字段。不是都。假设我有：

```
public ParentModel{
  public BlueUser BlueUser {get; set;}
  public GreenUser GreenUser {get; set;}
} 
```

因此，用户选择他是 GreenUser 还是 BlueUser。每种类型的用户都有不同的字段，并且根据用户选择的用户类型，我只想验证该特定类型用户的字段。如何做到这一点？

编辑：两个表单/模型必须在同一个视图上，也许有一些 JQuery 或 Partials？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-24T18:03:18.033

使用 创建一个表单，使用创建另一个表单，`HtmlHelper<BlueUser>`并将`HtmlHelper<GreenUser>`它们发布到不同的操作。

首先，视图模型是：

```
@model ParentModel 
```

然后使用`HtmlHelperFor`为每个子模型创建一个 HtmlHelper：

```
@{
   var blueHtml = Html.HtmlHelperFor(Model.BlueUser);
   var greenHtml = Html.HtmlHelperFor(Model.GreenUser);
}

@using (blueHtml.BeginForm("BluePost", null)) {
   @blueHtml.EditorForModel()
}

@using (greenHtml.BeginForm("GreenPost", null)) {
   @greenHtml.EditorForModel()
} 
```

最后，在控制器中为每个表单创建一个不同的 POST 操作：

```
[HttpPost]
public ActionResult BluePost(BlueUser model) {
   ...
}

[HttpPost]
public ActionResult GreenPost(GreenUser model) {
   ...
} 
```

这是扩展方法：

```
public static class HtmlHelperFactoryExtensions {

   public static HtmlHelper<TModel> HtmlHelperFor<TModel>(this HtmlHelper htmlHelper) {
      return HtmlHelperFor(htmlHelper, default(TModel));
   }

   public static HtmlHelper<TModel> HtmlHelperFor<TModel>(this HtmlHelper htmlHelper, TModel model) {
      return HtmlHelperFor(htmlHelper, model, null);
   }

   public static HtmlHelper<TModel> HtmlHelperFor<TModel>(this HtmlHelper htmlHelper, TModel model, string htmlFieldPrefix) {

      var viewDataContainer = CreateViewDataContainer(htmlHelper.ViewData, model);

      TemplateInfo templateInfo = viewDataContainer.ViewData.TemplateInfo;

      if (!String.IsNullOrEmpty(htmlFieldPrefix))
         templateInfo.HtmlFieldPrefix = templateInfo.GetFullHtmlFieldName(htmlFieldPrefix);

      ViewContext viewContext = htmlHelper.ViewContext;
      ViewContext newViewContext = new ViewContext(viewContext.Controller.ControllerContext, viewContext.View, viewDataContainer.ViewData, viewContext.TempData, viewContext.Writer);

      return new HtmlHelper<TModel>(newViewContext, viewDataContainer, htmlHelper.RouteCollection);
   }

   static IViewDataContainer CreateViewDataContainer(ViewDataDictionary viewData, object model) {

      var newViewData = new ViewDataDictionary(viewData) {
         Model = model
      };

      newViewData.TemplateInfo = new TemplateInfo { 
         HtmlFieldPrefix = newViewData.TemplateInfo.HtmlFieldPrefix 
      };

      return new ViewDataContainer {
         ViewData = newViewData
      };
   }

   class ViewDataContainer : IViewDataContainer {

      public ViewDataDictionary ViewData { get; set; }
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T17:03:44.037

解决方案 1

你所做的是使用依赖验证，它不是默认内置的，只有`Compare`属性，你可以构建自己的属性，如果单选按钮值是必需的，或者你可以使用[Mvc.ValidationTookit 之类的东西](http://blogs.msdn.com/b/simonince/archive/2011/09/29/mvc-validationtookit-alpha-release-conditional-validation-with-mvc-3.aspx)

* * *

解决方案 2

例如，当用户选择蓝色用户时，您使用 javascript 在表单提交事件中检查他根据他选择的内容选择了什么，您将引导他执行不同的操作，并将适当的模型作为参数传递

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T18:03:01.487

**服务器端实现**

1.  您应该看到两个表格。

2.  每个表格都应该在后期控制器中执行不同的操作。

**动画的客户端实现**

1.  您可以使用任何您喜欢的 JavaScript 库来禁用一个表单，而另一个启用鼠标焦点。

# json - 微处理器与网页通信？

> ID：11178594
> 
> 赞同：0
> 
> 时间：2012-06-24T15:15:58.750
> 
> 标签：json, tcp, arduino, microprocessors

我目前正在从事一个项目，我想从网页控制微处理器（Arduino）。

微处理器不会物理连接到计算机。

*   什么是最好的通信协议？（我目前的选择是 TCP）。
*   序列化要发送的对象的最佳方法是什么？（我目前的选择是 JSON）。

服务器端是用 NodeJs 编写的。

由于我是这种开发的新手，我非常感谢有关该主题的任何意见！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T15:23:57.847

如果没有关于您计划使用哪个 arduino 以及您可能使用哪些屏蔽来实现界面的详细信息，很难做出明确的陈述。

我认为使用适当的屏蔽来提供以太网接口 TCP 将是一个可以接受的选择。

我倾向于说您将很难构建一个适合 Arudino 内存足迹的 JSON 解释器。这些器件中的大多数具有 32K 的程序存储器和 1 或 2K 的数据存储器。对于像这样的嵌入式设备，在线上简洁的二进制协议更为常见，并且更容易适应设备的限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T15:28:52.127

有一个名为[aJson](https://github.com/interactive-matter/aJson/)的库，它允许您在 Arduino 中进行 JSON 解析。我已经使用该库来解析来自Arduino 的 32K 程序内存中[的 YQL 调用的响应：)](http://hardwarefun.com/tutorials/accessing-yql-from-arduino)

我建议使用 Arduino 的以太网或 Wifi shield 使其连接到互联网，然后您可以使用 Arduino 的以太网库进行 HTTP 调用。响应格式可以是 JSON。

# java - 如何在java中存储无符号短？

> ID：11178597
> 
> 赞同：3
> 
> 时间：2012-06-24T15:16:42.480
> 
> 标签：java, nio, netty, unsigned

所以通常我使用 Netty，它是 BigEndianHeapChannelBuffer 来接收 Java 中的 unsinged short（来自 c++ 软件）。当我这样做时：

`buf.readUnsignedByte(); buf.readUnsignedByte();`

它返回： `149 and 00`。直到现在一切都很好。因为服务器将 149 作为无符号短 [2 字节] 发送。

而不是这个，我想收到 unsigned short （重启我的应用程序后的ofc）：

`buf.readUnsignedShort();`

神奇的事情发生了。它返回：`38144`。

下一步是检索无符号字节： `short type = buf.readUnsignedByte(); System.out.println(type);`

它返回：`1`这是正确的输出。

谁能帮我解决这个问题？我看得更深，这就是 netty 所做的：

```
public short readShort() {
    checkReadableBytes(2);
    short v = getShort(readerIndex);
    readerIndex += 2;
    return v;
}

public int readUnsignedShort() {
    return readShort() & 0xFFFF;
} 
```

但我仍然无法弄清楚出了什么问题。我希望能够阅读那 149。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T14:37:14.960

[您还可以从 Java DataInputStream](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/DataInputStream.html)中借用一个页面。[readUnsignedShort](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/DataInputStream.html#readUnsignedShort%28%29) () 实现：

```
public final int readUnsignedShort() throws IOException {
    int ch1 = in.read();
    int ch2 = in.read();
    if ((ch1 | ch2) < 0)
        throw new EOFException();
    return (ch1 << 8) + (ch2 << 0);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T15:40:03.390

答案是改变字节顺序。感谢 Roger 在评论中写道：

> 没有多少魔法，149*256+0=38144。您已指定 BigEndian，因此这似乎是正确的，首先发送最高有效字节

和：

> @mickula 短是两个字节，其中一个字节的“价值”是另一个字节的 256 倍，因为您使用 BigEndian，所以第一个字节是“价值”更多的字节。类似于数字1、2和3的十进制数123。第一个位置是下一个位置的10倍，是下一个位置的10倍，以此类推。所以 1 * 100 + 2 * 10 + 3 = 123 当数字一次传输一个时。如果您将 1、2 和 3 视为小端序，您将使用 1 + 2 * 10 + 3 * 100 = 321。256 是因为一个字节的大小是 256。-

感谢他的评论，我刚刚通过添加以下内容在服务器引导程序中切换了字节​​序：
`bootstrap.setOption("child.bufferFactory", new HeapChannelBufferFactory(ByteOrder.LITTLE_ENDIAN));`

# mysql - MySQL：获取一张表中两个值之间的差异（多个用户 ID）？

> ID：11178599
> 
> 赞同：2
> 
> 时间：2012-06-24T15:16:55.350
> 
> 标签：mysql

我试图找到一个解决方案，但即使看起来很简单也没有成功。所以这可能是一个新手问题......

我有一个包含 3 列的**用户分数表：**

```
date          userid   points
2012-05-01    1        23
2012-06-01    1        34
2012-07-01    1        44
2012-05-01    2        78
2012-06-01    2        94
2012-07-01    2        99
2012-06-01    3         2
2012-07-01    3         9 
```

现在我需要**为每个用户**获取2012-05-01 和 2012-06-01 之间的点**差**。

 **不存在的用户点数（例如 userid 3）必须计算为 2 - 0 ...为此我想我可以使用 COALESCE(qa_points,0)。

我读到了组合[两个子查询](https://stackoverflow.com/questions/2326733/finding-the-difference-between-two-values-in-the-same-column-in-mysql)进行计算，但未能实现它。

任何帮助表示赞赏。

PS：这不起作用：

```
SELECT t1.userid, t1.points - t2.points AS mpoints FROM (
        SELECT userid,points FROM `userscores` 
        WHERE YEAR(date) = YEAR('2012-05-01') 
        AND MONTH(date) = MONTH('2012-05-01') ) 
        AS t1
    JOIN (
        SELECT userid,points FROM `userscores` 
        WHERE YEAR(date) = YEAR('2012-04-01') 
        AND MONTH(date) = MONTH('2012-04-01') ) 
        AS t2
    ORDER BY mpoints DESC, t1.userid DESC; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T15:35:43.610

我想您的查询将如下所示：

```
 SELECT ul.userid, 
           ul.points - COALESCE(uf.points, 0) AS points_difference
      FROM userscores ul 
 LEFT JOIN 
           (SELECT userid, points FROM userscores WHERE `date` = '2012-05-01') AS uf
        ON uf.userid = ul.userid
     WHERE ul.date = '2012-06-01' 
```

使用 LEFT JOIN 是因为您告诉过可能没有`this user/former date`组合记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T15:49:51.170

使用此查询：

```
SELECT t1.userid, 
( t1.points - (case t2.date when '2012-05-01' then t2.points else 0 end)) 
AS mpoints FROM userscores as t1
INNER JOIN  userscores as t2
ON t1.date = '2012-06-01' AND t1.userid=t2.userid 
```**

# wordpress - 通过 wp-login.php 登录后重新加载页面，thickbox 弹出

> ID：11178602
> 
> 赞同：1
> 
> 时间：2012-06-24T15:17:00.677
> 
> 标签：wordpress, login, thickbox

我在弹出窗口中打开 wp-login.php，所以我可以登录，但所有内容都保留在厚框弹出窗口中。
我想在成功登录后关闭弹出窗口并重新加载页面，但我不知道我要做什么。

谢谢

# android - 谷歌地图在单独的活动中导致：java.lang.IllegalStateException：无法执行活动的方法

> ID：11178604
> 
> 赞同：0
> 
> 时间：2012-06-24T15:17:46.083
> 
> 标签：android, android-mapview, mapactivity

我目前在访问 Hello Mapview 时遇到了一些问题，[http://developer.android.com/training/tutorials/views/hello-mapview.html](http://developer.android.com/training/tutorials/views/hello-mapview.html)，但我认为我做得正确。我想在单独的活动中显示地图。

**地图.xml：**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

 <com.google.android.maps.MapView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mapview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:clickable="true"
    android:apiKey="working key"
    />

</LinearLayout> 
```

**应该显示我的地图的按钮 onclick 事件**

```
public void showMap(View v){

    Intent intent = new Intent(getBaseContext(), GoogleMapsActivity.class);
    startActivity(intent);
} 
```

**GoogleMapsActivity.java**

```
public class GoogleMapsActivity extends MapActivity
{
MapView mapView;

@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.map);

    mapView = (MapView) findViewById(R.id.mapview);
    mapView.setBuiltInZoomControls(true);
} 
```

该活动已添加到我的清单中，包括 Google api 等。如果我将地图放在我的主要活动中，但它不在我的`GoogleMapsActivity`. 请告诉我我在这里错过了什么。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T15:59:33.290

问题是我的清单文件中的拼写错误，

```
<activity android:name=".GoogleMapActivity" /> //missing an "s" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T15:25:40.453

来自[https://developers.google.com/maps/documentation/android/reference/](https://developers.google.com/maps/documentation/android/reference/)：

*每个进程只支持一个 MapActivity。同时运行的多个 MapActivity 可能会以意想不到的方式干扰。*

基本上，您只能拥有 1 `MapActivity`，而`MapView`s 只能托管在 a 中`MapActivity`。你想要的基本上是不可能的。

编辑：不确定它是否适合您，但您可以尝试标记您的第二个活动，`android:process=":remote"`看看是否有效，但我对此表示怀疑。

编辑：显然有些混乱。查看[https://developers.google.com/maps/documentation/android/reference/com/google/android/maps/MapView](https://developers.google.com/maps/documentation/android/reference/com/google/android/maps/MapView)。这表明：

*MapView 只能由 MapActivity 构造（或膨胀）。这是因为它依赖于在后台访问网络和文件系统的线程；这些线程必须由 MapActivity 中的生命周期管理来引导。切片缓存在应用程序目录中的文件系统上。缓存是自动管理的，因此您无需对其进行任何操作，并且可以随时将其删除。*

我将重申：您不能在任何其他活动中显示 MapView。

# javascript - 为什么我的简单 if 语句在 javascript 中不呈现假？

> ID：11178605
> 
> 赞同：-2
> 
> 时间：2012-06-24T15:17:46.770
> 
> 标签：javascript

我调用这样的函数：

```
call_facebook(103138046395999, "samåkning.se", "http://www.facebook.com/samakning", "page");
call_facebook(16089699074, "Jag ska köra bil, vem vill åka med", "http://www.facebook.com/groups/16089699074/", "grupp") 
```

该函数如下所示：

```
function call_facebook(id, name, link, type){
  //snip
  console.log(type)
  if (type = "grupp"){
    var postid=fbposts[fbpost].id.split("_");
    return "https://www.facebook.com/groups/"+postid[0]+"/permalink/"+postid[1]+'/'
  }
  else {
    return fbposts[fbpost].actions[0].link;
  }
}
//snip
}; 
```

我已经确认他们有不同的类型参数，但第一种情况`if (type = "grupp")`总是以`true`. 为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T15:19:24.960

单个等号字符 ( `=`) 不进行比较。它分配！因此，您的`if`语句总是分配`"grupp"`到`type`并返回`true`。

使用`==`或`===`比较。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T15:20:26.020

我猜你的意思是

```
if (type == "grupp"){ 
```

您必须使用`==`来比较值。只有一个`=`用于分配值。

# objective-c - 关闭前的 UIAlertView 验证

> ID：11178607
> 
> 赞同：1
> 
> 时间：2012-06-24T15:17:50.030
> 
> 标签：objective-c, ios, uialertview

有没有办法在关闭警报之前为 UIAlertView 中的文本字段添加验证检查？例如检查用户凭据，如用户名和密码，如果不正确，则更新 UIAlertView 中的文本以表明凭据不正确。仅在验证检查通过时关闭 UIAlertView。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T15:32:38.503

我认为您希望将[UIActionSheet](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIActionSheet_Class/Reference/Reference.html#//apple_ref/occ/cl/UIActionSheet)子类化以提供此行为。在我看来，它无法验证文本输入并保持 UIAlertView 处于打开状态。

或者，如果输入的密码不正确，您可以验证输入的文本并重新显示 UIAlertView。

# android - Admob 需要未发布应用的市场网址（需要 MY_AD_UNIT_ID）

> ID：11178612
> 
> 赞同：7
> 
> 时间：2012-06-24T15:18:21.473
> 
> 标签：android, admob, ads, adview

我想在我的新应用程序上放置广告。我导入了 Google Admob SDK 但无法启动新的 AdView 对象，因为它需要“MY_AD_UNIT_ID”。

要接收我的 MY_AD_UNIT_ID，我必须将我的应用添加到 admob。Admob 需要 maket://-link 到我的应用程序。但我不想发布没有广告的应用程序。我做错了吗？

**编辑：我刚刚注意到您可以删除 market:// 并将该字段完全留空。这样您就可以在没有任何市场 URL 的情况下添加您的应用程序。由于有很多关于 MY_AD_UNIT_ID 的问题，我将保持开放状态。**

真诚的，沃尔芬

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T15:22:22.713

通过以基本 URI 格式添加包名称，您可以轻松预测应用的市场 URI。例如，如果您的应用有 package `com.example.app`，它的`market://`链接将是`market://details?id=com.example.app`.

# eclipse - Eclipse 中的 VLC 编译错误（在 Ubuntu 中）

> ID：11178616
> 
> 赞同：1
> 
> 时间：2012-06-24T15:19:13.820
> 
> 标签：eclipse, ubuntu, compilation, vlc

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T07:09:36.260

当我删除 c99 编译器选项时，错误消失了，所以这个错误与 Linux（Ubuntu）中的 C99 编译器选项有关。

# python - 列表创建列表

> ID：11178619
> 
> 赞同：0
> 
> 时间：2012-06-24T15:19:32.160
> 
> 标签：python

在我的python代码中，我想创建一个列表列表...在一个循环中...但是在循环完成后，我最终在所有元素中都得到了相同的列表...是因为指向而不是指向列表存储？如果是这样，我该如何解决我的问题？以下是我的代码

```
 list_lists=list()
    list_temp=list()
    for i in xrange(n):
        ind_count =0
        del list_temp[0:len(list_temp)]
        for j in xrange(no_words):
            if inp[i] == words[j]:
                list_temp.append(j)
        list_lists.append(list_temp) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-24T15:22:55.713

不要删除列表中的项目 ( `del list_temp[0:len(list_temp)]`)，只需分配一个新列表：`list_temp = list()`。您还可以使用简写：`list_temp = []`

您面临的问题是您总是重复使用您在第二行中创建的相同列表：`list_temp = list()`. 您只是一遍又一遍地插入对这个列表的引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-15T09:58:25.607

似乎这与您所做的相同：

```
n = 10
b = []
for x in range(n):
... b.append([])
b
[[], [], [], [], [], [], [], [], [], []] 
```

（所以 b 是 n 个列表的列表）

以下似乎是/做同样的事情：

```
a = [[]]*n
a
[[], [], [], [], [], [], [], [], [], []] 
```

（a 也是 n 个列表的列表）

```
a == b
True

b[0].append(4)
b
[[4], [], [], [], [], [], [], [], [], []] 
```

（说得通）

然而：

```
a[0].append(4)
a
[[4], [4], [4], [4], [4], [4], [4], [4], [4], [4]] 
```

# c# - DataFormatString 格式百分比错误

> ID：11178621
> 
> 赞同：4
> 
> 时间：2012-06-24T15:19:47.127
> 
> 标签：c#, asp.net, .net

我从数据库中有这个字段：

数据类型：数字 (7, 3)

所以将允许最大数量

9999.99

进入数据库。

我把号码

10.000

进入数据库，现在我正在使用以下方法从数据库中检索：

```
<asp:GridView> 
```

我指定：

```
<asp:BoundField DataFormatString="{0:p}" /> 
```

它输出

1,000.00%

这应该是

10.00%

为什么不是？

我也不能将 <% %> 服务器运行时标签放入：

```
<asp:TemplateField /> 
```

为什么是这样？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-24T15:26:03.820

百分比以小数形式存储，其中 0 = 0% 和 1 = 100%。您应该将值存储为 0.1，而不是 10。

该行`<asp:BoundField DataFormatString="{0:p}" />`会将您的值 10.000 格式化为 1,000.00%。

看[这里](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.boundfield.dataformatstring.aspx)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-24T15:26:48.933

[它的行为与 MSDN 上的标准数字格式字符串](http://msdn.microsoft.com/en-us/library/dwhawy9k)页面中的描述完全相同：

> 结果：数字乘以 100 并以百分比符号显示。

因此*，要么*您不应该使用该格式字符串，*要么*您应该将值保持为 1 的比例，而不是百分比。

# javascript - jquery 下拉菜单行为不正常

> ID：11178625
> 
> 赞同：0
> 
> 时间：2012-06-24T15:20:17.097
> 
> 标签：javascript, jquery, html, css

我的下拉菜单有以下 jquery 代码：

```
var active = 0;

   $(document).ready(function(){
    jQuery("#dropmenu ul").css({display:"none"});
    // For 1 Level
    jQuery("#dropmenu li:has(ul) a").append('');
    jQuery("#dropmenu li ul a span").text('');
    // For 2 Level
    jQuery("#dropmenu li ul li:has(ul) a").append('');
    jQuery("#dropmenu li ul li ul a span").text('');

    jQuery("#dropmenu li").hover(function(){
    if(active != 1){
    jQuery($('.active').parent()).find("ul:first").css('display', 'none');
    jQuery(this).find("ul:first").fadeIn('fast');
    active = 1;
    }
    },
    function(){
    jQuery(this).find("ul:first").fadeOut('fast');
    jQuery($('.active').parent()).find("ul:first").fadeIn('fast');
    active = 0;
    }); });

    //ACTIVATE 
    $(document).ready(function(){
        jQuery($('.active').parent()).find("ul:first").css('display', 'block');
    }); 
```

代码要做的是检查并查看哪个元素有一个`active`类，并在页面加载时显示它。

HTML 看起来像这样：

```
<ul id="dropmenu">
    <li><a  class="active" href="index.php">home</a>
        <ul>
            <li><a href="#">Euro 2012</a></li>
            <li><a href="#">FIA Cup</a></li>
            <li><a href="#">Previous Events</a></li>
            <li><a href="#">Event 2012-2013</a></li>
            <li class="last"><a href="#">Pre Season</a></li>
        </ul>
    </li>
    <li><a href="#" >home</a></li>
    <li><a href="#">blabl</a></li>
    <li><a href="#">dropdown</a>
        <ul>
            <li><a href="#">Euro 2012</a></li>
            <li><a href="#">FIA Cup</a></li>
            <li><a href="#">Previous Events</a></li>
            <li><a href="#">Event 2012-2013</a></li>
            <li class="last"><a href="#">Pre Season</a></li>
        </ul>
    </li>
    <!-- ... -->
</ul> 
```

现在，当页面加载时，会显示默认下拉菜单，但是一旦您将鼠标悬停在其他菜单项上，如果它们没有下拉菜单，它将显示默认菜单并隐藏，如果您快速浏览菜单项，它将继续重复动画。如何避免动画的重复以及菜单为空时如何避免显示默认菜单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T03:34:34.497

我说废弃这个并寻找可以做到这一点的脚本，如果你只是花时间去谷歌，有很多，这里有一个有用的链接：

[http://vandelaydesign.com/blog/web-development/jquery-drop-down-menus](http://vandelaydesign.com/blog/web-development/jquery-drop-down-menus)

我个人使用这个插件来制作下拉菜单：

[http://filamentgroup.com/lab/jquery_ipod_style_and_flyout_menus/](http://filamentgroup.com/lab/jquery_ipod_style_and_flyout_menus/)

您可以在 html 和 css 的帮助下使用此插件做很多事情来制作一排下拉菜单...该插件使用 jQuery 和 jQuery UI 进行设计，您可以根据需要自定义它，这里是链接jQueryUI 网站，如果你还没有去过：[http ://www.jqueryui.com/themeroller](http://www.jqueryui.com/themeroller)

# google-app-engine - Google App Engine 搜索的 TransientError

> ID：11178629
> 
> 赞同：1
> 
> 时间：2012-06-24T15:21:07.723
> 
> 标签：google-app-engine

我正在尝试按日期字段运行查询和排序。

```
q = self.request.get("q")
index = search.Index(name="transaction")

sort_options = search.SortOptions(
    expressions=[
        search.SortExpression(expression='timestamp_date', direction=search.SortExpression.DESCENDING)
    ],
    limit=1000)
options = search.QueryOptions(limit=30, cursor=search.Cursor(), sort_options=sort_options)

results = index.search(search.Query(query_string=q, options=options)) 
```

在开发服务器上，代码有效，但结果*未正确排序*。在生产服务器上它根本不起作用；它给出了以下错误：

```
Search failed
Traceback (most recent call last):
  File "/base/data/home/apps/s~xxx/pre-24.359846149527858049/main.py", line 78, in get
    results = index.search(search.Query(query_string=q, options=options))
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/api/search/search.py", line 2609, in search
    _CheckStatus(response.status())
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/api/search/search.py", line 414, in _CheckStatus
    raise _ERROR_MAP[status.code()](status.error_detail())
TransientError 
```

我想知道如何使它在生产服务器上工作以及如何在开发服务器上正确排序。我知道它的实验技术，但我想看看这是否是我忽略的东西

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T17:21:17.037

您需要为所有 SortExpressions 提供默认值。这将在即将发布的版本中明确说明。此外，还没有明确支持默认日期值，因此您需要输入一个默认数值，表示自 1970 年 1 月 1 日以来的天数。在下面的代码中，我通过指定值 0 使用日期 1970-01-01 作为默认值。

```
sort_options = search.SortOptions(
    expressions=[
        search.SortExpression(expression='timestamp_date', default_value=0)
    ]) 
```

另请注意，您不需要指定direction=search.SortExpression.DESCENDING，因为这是方向的默认值。您也不需要为限制指定默认值 1000。

# eclipse - Ubuntu 服务器上的 ZendDebugger

> ID：11178633
> 
> 赞同：0
> 
> 时间：2012-06-24T15:21:22.593
> 
> 标签：eclipse, debugging, zend-framework, ubuntu-server

我喜欢调试我的 PHP 应用程序。所以，我安装了 ZendDebugger。我下载并放置了`ZendDebugger.so`文件

```
/usr/lib/php5/modules/ZendDebugger.so 
```

并将此代码粘贴到`php.ini`文件中：

```
zend_extension=/usr/lib/php5/modules/ZendDebugger.so 
```

这个路径是正确的，我也尝试了其他几个路径。

我也尝试过`php.ini`文件中的其他代码。

我使用 Ubuntu 服务器并在 Ubuntu 上使用 PDT 扩展进行 Eclipse。

但是没有安装调试器。我可以在 phpinfo 中找到的唯一信息是：

> 该程序使用 Zend 脚本语言引擎：Zend Engine v2.3.0，版权所有 (c) 1998-2011 Zend Technologies

我不知道该怎么办？我在互联网上搜索了很多次，并将其与干净的服务器安装绑定。

# three.js - ThreeJS：创建一个完全适合窗口的背景图像？

> ID：11178637
> 
> 赞同：5
> 
> 时间：2012-06-24T15:21:44.427
> 
> 标签：three.js

在 ThreeJS (JavaScript/WebGL) 中，如何创建一个静态背景图像，它是场景的一部分，但会调整大小以完全适合整个内部浏览器窗口？当我使用 CSS 时它可以工作，但是当我想要通过 renderer.domElement.toDataURL('image/png') 制作“屏幕截图”时，背景图像不会显示。谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-04T00:41:00.260

您可以使用单独的背景场景来渲染背景图像。

```
var bg = new THREE.Mesh(
  new THREE.PlaneGeometry(2, 2, 0),
  new THREE.MeshBasicMaterial({map: backgroundTexture})
);

// The bg plane shouldn't care about the z-buffer.
bg.material.depthTest = false;
bg.material.depthWrite = false;

var bgScene = new THREE.Scene();
var bgCam = new THREE.Camera();
bgScene.add(bgCam);
bgScene.add(bg); 
```

然后在您的渲染循环中，在您的真实场景之前绘制 bgScene。

```
renderer.autoClear = false;
renderer.clear();
renderer.render(bgScene, bgCam);
renderer.render(scene, cam); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-10T16:31:45.960

我不清楚您是否要制作全景查看器或类似的东西...

如果这是您的目标，那么我给出的答案是为了解决将 equirectangular 图像插入渲染球体的问题（可以通过鼠标和/或 deviceOrientation [智能手机中的加速度计] 控制）：

[https://stackoverflow.com/a/37129356/1920145](https://stackoverflow.com/a/37129356/1920145)

# c# - 自动更改 WPF 中列表视图列的宽度

> ID：11178645
> 
> 赞同：1
> 
> 时间：2012-06-24T15:23:50.060
> 
> 标签：c#, wpf, listview

我如何自动（或者可能使用重新计算方法）在项目更改后自动调整 WPF 中列表视图的宽度（例如，使用新的源、过滤器或手动添加或更改项目），使得宽度每列的宽度恰好容纳最大项目长度（或列名长度）的宽度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T15:40:16.057

也许您可以将宽度属性绑定到列表中的“最大”项？猜猜你可以使用自定义转换器...

干杯——乔克

# ios - 设置 child.frame = parent.bounds？

> ID：11178648
> 
> 赞同：0
> 
> 时间：2012-06-24T15:24:16.163
> 
> 标签：ios, uiview, frame, bounds

这样做在逻辑上是否有效：

```
child.frame = parent.bounds 
```

假设我想添加新的 CALayer 作为视图的默认图层子层，并且我希望新的 CALayer 位于 (0,0) 并具有与其父级完全相同的大小。然后我会这样写：

```
self.customSublayer.frame = self.view.layer.bounds; 
```

我认为这在任何情况下都应该没有问题，但我想要其他意见:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T15:27:06.623

这是执行此操作的标准方法，我认为您不需要任何其他选择

# gem - 在非 Rails 应用程序中需要 Gemfile 中的所有宝石？

> ID：11178649
> 
> 赞同：5
> 
> 时间：2012-06-24T15:24:21.573
> 
> 标签：gem, bundler

当我们编写`Rails`应用程序时，它需要为我们定义的所有 gem `Gemfile`。

如何让非 Rails 应用程序做到这一点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-04T08:07:33.230

```
require 'rubygems'
require 'bundler'
Bundler.require(:default) 
```

以上需要特定组中的宝石，注意命名组之外的宝石在 :default 组中

见这里：[https ://bundler.io/v2.0/guides/groups.html](https://bundler.io/v2.0/guides/groups.html)

# c# - 页面加载后无法检索在 ASPX 中绑定的 DDL SelectedValue

> ID：11178652
> 
> 赞同：0
> 
> 时间：2012-06-24T15:25:11.120
> 
> 标签：c#, asp.net

我在 ASPX 文件中有以下标记/代码块。ddl 的绑定在代码隐藏文件中的 Page_Load 事件之后触发。如果我要使用这样的流程，这会导致我无法获得下拉列表的选定值。

但是出于某种目的，我要求它以这种方式工作。知道当触发回发（单击按钮）时如何获取下拉列表选择的值吗？

```
Page URL: page.aspx?para1=0&para2=value 
```

ASPX 页面

```
<% 
    if (Convert.ToInt32(Request.QueryString["para1"]) == 0)
    {
        ddl.DataValueField = "value"; 
        ddl.DataTextField = "text"; 
        ddl.DataSource = ds; //ds is valid, exact code not shown
        ddl.DataBind(); 
    } else {
        //write in this area
        Response.Write("Not 0");
    }
%> 
<form runat="server" id="user_form" class="form-horizontal"> 
<asp:ToolkitScriptManager ID="ToolkitScriptManager1" runat="server"> 
</asp:ToolkitScriptManager> 
<asp:UpdatePanel ID="updPanel" runat="server"> 
    <ContentTemplate> 
        <asp:DropDownList runat="server" ID="ddl"> 
        </asp:DropDownList> 
        <%-- this button will call btnSave_Click to get the ddl's value--%>
        <asp:Button runat="server" ID="btn" Text="Button" OnClick="btn_Click" />
    </ContentTemplate> 
</asp:UpdatePanel> 
</form> 
```

代码背后

```
protected void Page_Load(object sender, EventArgs e) 
{ 
    if (!IsPostBack) 
    { 
        //do my stuff 
    } 
} 

protected void btn_Click(object sender, EventArgs e) 
{ 
    int intValue = Convert.ToInt32(ddl.SelectedValue); 
    //do my stuff 
} 
```

ASPX Page 代码块将在 Page_Load / page 的生命周期之后运行，然后将根据 url 参数确定要做什么。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T17:16:50.180

您总是可以放入一个隐藏对象并使用 jquery 基于某个操作将值复制到隐藏值而​​无需回发，并且会像您希望它那样在客户端执行它

# php - 如何检查用户是否喜欢 Facebook 页面，如果是则重定向到另一个页面？

> ID：11178653
> 
> 赞同：-3
> 
> 时间：2012-06-24T15:25:23.617
> 
> 标签：php, facebook

我想创建一个 PHP 脚本来检查用户是否喜欢该页面。如果用户喜欢该页面，他将被重定向到另一个 URL，如果不是，则要求用户喜欢该页面，并且出现 facebook 喜欢按钮，以便用户可以喜欢。

请问这怎么做？我设法掌握了这个脚本并得到了错误。请问有什么帮助吗？

谢谢

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />
        <title>Facebook "If-Like" Application | ThreeDots</title>
    </head>
    <body>
    <?php
        include_once( "facebook.php" );

        $fbAppArray = array(
            'appId'  => 'YOUR_APPLICATION_ID',
            'secert' => 'YOUR_APPLICATION_SECRET',
            'cookie' => true
        );

        $fbAppObj = new Facebook( $fbAppArray );

        $signedRequest = $fbAppObj->getSignedRequest();

        function parsePageSignedRequest()
        {
            if( isset( $_REQUEST['signed_request'] ) )
            {
                $encoded_sig = null;
                $payload = null;

                list( $encoded_sig, $payload ) = explode( '.', $_REQUEST['signed_request'], 2 );

                $sig = base64_decode( strtr( $encoded_sig, '-_', '+/' ) );
                $data = json_decode( base64_decode( strtr( $payload, '-_', '+/' ), true ) );

                return $data;
            }

            return false;
        }

        if( $signedRequest = parsePageSignedRequest() )
        {
            if( $signedRequest->page->liked )
            {
                // What to show the user if he liked the application...
            }else{
                // Please like the application so you will be able to see the contents...
            }
        }
    ?>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T15:36:49.227

# jquery - RequireJS & Jquery - 一个文件中有多个模板？

> ID：11178658
> 
> 赞同：4
> 
> 时间：2012-06-24T15:26:17.093
> 
> 标签：jquery, backbone.js, underscore.js, requirejs

我正在使用 require.js 将一些模板文件加载到我的应用程序中，如下所示：

```
define(function(require) {
    var App = require('app'),
    TeamListTmpl = require('text!templates/team-list.html'),
    PlayerListTmpl = require('text!templates/player-list.html'),
    PlayerItemTmpl = require('text!templates/player-item.html'); 
```

然后，使用 Backbone，我像这样引用模板：

```
var PlayerItemView = Backbone.View.extend({
    tagName: "li",
    template: _.template(PlayerItemTmpl), 
```

拥有单独的模板文件有点烦人，我想将所有模板合并到一个 html 文件中并提取单独的元素。我试过这个：

```
 define(function(require) {
        var App = require('app'),
        Templates = require('text!templates/templates-combined.html'); 
```

模板组合的 html 文件如下所示：

```
<div id="some-element-1">1</div>
<div id="some-element-2">2</div>
<div id="some-element-3">3</div> 
```

但这由于某种原因不起作用：

```
$(Templates).find("#some-element-1").html(); 
```

我也试过：

```
$('#some-element-1', Templates).html(); 
```

有什么方法可以从一个组合文件中提取单个模板文件而不先将其添加到 DOM 中？也许改用javascript模板？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-24T16:29:49.110

我猜你想使用[`filter`](http://api.jquery.com/filter/)而不是[`find`](http://api.jquery.com/find/)：

```
var some_element_1 = $(Templates).filter('#some-element-1').html(); 
```

你看，`find`在`$(Templates)`:

> 获取当前匹配元素集中每个元素的后代，由选择器、jQuery 对象或元素过滤。

所以它会在这三个 s 中找到东西，`<div>`而不是`<div>`s 本身；`filter`，另一方面，搜索元素集：

> 将匹配元素集减少为匹配选择器或通过函数测试的元素。

当你说 时`var x = $(Templates)`，你的`x`样子是这样的：

```
[
   <div id="..."></div>,
   <div id="..."></div>,
   <div id="..."></div>
] 
```

如果我们查看那些s 的*后代*`<div>`（即`find`），我们不会找到`#some-element-1`，但如果我们查看*匹配元素*本身的集合（即`filter`），那么我们会找到`#some-element-1`。

如果出于某种原因您真的想使用`find`，您可以在您的模板周围包装另一个`<div>`以强制它们成为以下内容的后代`$(Template)`：

```
<div>
    <div id="some-element-1">1</div>
    <div id="some-element-2">2</div>
    <div id="some-element-3">3</div>
</div> 
```

* * *

我还建议您将模板包装在`<script>`元素中，而不是`<div>`s：

```
<script type="text/x-template" id="some-element-1">1</script>
<script type="text/x-template" id="some-element-2">2</script>
<script type="text/x-template" id="some-element-3">3</script> 
```

浏览器会将`<script>`s 视为不透明的黑盒子（前提是您使用了正确的`type`属性），但它可能会尝试解释和更正`<div>`s 的内容。问题是您的模板可能不是有效的 HTML，直到您处理并填写它们之后；如果您让浏览器处理无效的 HTML，它可能会尝试更正它，这可能会使您的模板变得一团糟。

# php - 带有子文件夹的多语言站点

> ID：11178660
> 
> 赞同：0
> 
> 时间：2012-06-24T15:26:23.927
> 
> 标签：php, multilingual

请帮助我处理必须重定向到正确语言的 php 文件。网站架构是 site.com/en site.com/fr

我的鳕鱼：

```
<?php
$sites = array(
"en" => "/en/index",
);

$lang = substr($_SERVER['HTTP_ACCEPT_LANGUAGE'], 0, 2);

if (!in_array($lang, array_keys($sites))){
$lang = 'en';
}
// перенаправление на субдомен
header('Location: ' . $sites[$lang]);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T15:55:41.517

您可以将`$_SERVER['PHP_SELF']`包含相对于文档根目录的路径的变量附加到您的语言文件夹。

如果您的路径是`site.com/fr/file`，则此变量将包含`/fr/file`. 当您删除此部分的第一部分时，您将获得被调用脚本的“语言无关”路径，您可以将其附加到所需的语言目录。

如果您的路径与您描述的一样，您可以尝试以下解决方案（未经测试！）：

```
<?php
$sites = array(
"en" => "/en",
);

$lang = substr($_SERVER['HTTP_ACCEPT_LANGUAGE'], 0, 2);

if (!in_array($lang, array_keys($sites))){
$lang = 'en';
}

$path_to_script = substr($_SERVER['PHP_SELF'], 3);

header('Location: ' . $sites[$lang] . $path_to_script);
?> 
```

编辑：澄清方法：如果站点是`site.com/fr/123/index.php`，则变量`$path_to_script`将包含`/123/index.php`，没有前导语言目录的脚本目录。然后，您可以将其附加到所需的语言目录并获得所需的路径：`/en/123/index.php`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T15:33:06.060

`/en/index` should be `/en/index.php` except if you are using Apache's mod_rewrite (not by default). Please provide more details of what is not working so we can help you more.

EDIT: Furthermore, you could give the user the option of choosing language as 'HTTP_ACCEPT_LANGUAGE' might not be set. In that case, the only choice would be English, which would limit your public.

Some people even recommend about geolocalization, but I find it good enough to add a little drop down menu with languages.

# android - Android 应用安装错误：com.android.ddmlib.SyncException: Directory not empty

> ID：11178662
> 
> 赞同：2
> 
> 时间：2012-06-24T15:26:39.207
> 
> 标签：android, eclipse, android-emulator

启动应用程序时经常出现以下错误：

```
[2012-06-24 11:08:53 - Myapp] Failed to install Myapp.apk on device 'emulator-5554': Directory not empty
[2012-06-24 11:08:53 - Myapp] com.android.ddmlib.SyncException: Directory not empty
[2012-06-24 11:08:53 - Myapp] Launch canceled! 
```

到目前为止，我发现的唯一补救方法是使用“清除用户数据”启动模拟器，这没什么大不了的，除非所有耗时的自定义都丢失了。

任何人都可以对此有所了解吗？

# youtube-javascript-api - 当 YouTube 视频达到特定时间戳时触发事件？

> ID：11178665
> 
> 赞同：2
> 
> 时间：2012-06-24T15:26:58.350
> 
> 标签：youtube-javascript-api

API 文档不包含在 YouTube 视频达到特定时间戳时触发 javascript 事件的明显方法。你知道任何解决方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T16:14:08.603

您可以创建一个计时器，它会在第二秒检查视频是否已达到某个时间戳。为了限制不必要的函数调用，仅在到达您设定的时间时才开始时间

```
var timeout = setTimeout(function(){
  var interval = setInterval(function(){
    if(player.getCurrentTime() === <you_set_time>){
        clearInterval(interval);
        // Your logic
    }

  },1000);
},<your_set_time_in_millisecs>); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T17:49:41.310

为避免不必要的处理，您可以等待播放器进入 PLAYING 状态，然后，将剩余时间放入一个 setTimeout 函数，直到时间戳。

在缓冲的情况下，每当播放器恢复播放状态时，调用相同的函数，清除之前的 setTimeout 并设置新的（如果剩余时间为正）

这是 jsfiddle POC：http: [//jsfiddle.net/V6rgy/](http://jsfiddle.net/V6rgy/)

# asp.net-mvc - 在 AuthorizeAttribute 中获取帖子数据？

> ID：11178668
> 
> 赞同：3
> 
> 时间：2012-06-24T15:27:11.447
> 
> 标签：asp.net-mvc, validation, authorize-attribute

**你好，**

我将在让用户进入操作之前验证一些数据，如果数据没有验证，那么我需要重定向到另一个操作。

问题是我如何从 AuthorizeAttribute 中获取发送到操作的帖子数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T15:32:33.087

我不确定这是否是您所要求的，但这将使您能够从`MyAuthorizeAttribute`.

```
[AttributeUsage(AttributeTargets.Class | AttributeTargets.Method, AllowMultiple = true, Inherited = true)]
public class MyAuthorizeAttribute : FilterAttribute, IAuthorizationFilter
{
    public void OnAuthorization(AuthorizationContext filterContext)
    {
        var httpContext = filterContext.RequestContext.HttpContext;
        var request = httpContext.Request;
        // do stuff with request
    }
} 
```

然后，您可以获取在请求中发送的任何数据。

# android - 从 SQLite 加载动态图像

> ID：11178670
> 
> 赞同：0
> 
> 时间：2012-06-24T15:27:20.480
> 
> 标签：android, image

我从 SQLite 表返回了一个字符串，并想从可绘制文件夹中加载图像。是否可以？

例如 ：

```
String name = sql.getName(1); //name is now Barney
img.setImageResource(R.drawable.name); 
```

可以这样加载吗？

我试过了。

```
int imageid = getResources().getIdentifier("com.tes.test.main:drawable/" + name.toLowerCase(), null, null);
img.setImageResource(imageid); 
```

也不行。:(

任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T17:52:12.997

第一个。几周前，我将它用于 VideoView。图片必须几乎相同。

在我的位置，我将视频存储在 /raw 文件夹中。

```
mVideoView.setVideoPath("android.resource://your-package-name/raw/"+videoName); 
```

第二。为什么不将图片保存到数据库中并从那里读取呢？像这样：

```
byte[] blob = cursor.getBlob(2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T08:27:59.837

啊，我找到了。

```
String image = "test";
int pimageid = getResources().getIdentifier("com.yourpackage.name:drawable/"+image,null,null);
img.setImageResource(pimageid); 
```

# android - JAX-WS SOAP 和/或 JAX-RS REST Android，数据未出现在我的应用程序中

> ID：11178672
> 
> 赞同：0
> 
> 时间：2012-06-24T15:27:58.653
> 
> 标签：android, web-services, rest, soap, jax-ws

我的计划是构建一个可以在我的 Android 应用程序和任何 Web 框架（如 CodeIgniter 或 YII）上读取的 Web 服务，但我希望它首先在 Android 上实现。我已经尝试弄清楚我需要什么，但我只能获得一些来源，因为我没有这方面的任何经验。

我试图在 REST 和 SOAP 之间学习，

**REST**：我首先选择 REST，然后尝试本[教程](http://avilyne.com/?p=105)，但是我在 Eclipse 和 Netbeans IDE 上构建的 Web 服务存在问题，这就是我在我的 tomcat 服务器上运行我的 Web 服务时发生的情况，Tomcat 未能启动并在控制台上显示为这样。（实际上，我已经在那个教程页面上发布了这个问题，但是作者还没有回答我的问题）。

```
Jun 21, 2012 7:49:11 AM org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: C:\Program Files\Java\jre7\bin;C:\Windows\Sun\Java\bin;C:\Windows\system32;C:\Windows;C:/Program Files/Java/jre7/bin/client;C:/Program Files/Java/jre7/bin;C:/Program Files/Java/jre7/lib/i386;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program Files\ATI Technologies\ATI.ACE\Core-Static;C:\Program Files\WIDCOMM\Bluetooth Software\;C:\Program Files\Java\jdk1.6.0_16\bin;C:\Program Files\Java\jdk1.7.0_01\bin;C:\opencv\build\common\tbb\ia32\vc10\;C:\opencv\build\x86\vc10\bin\;C:\Server\apache-tomcat-6.0.26\bin;;D:\Progima\Eclipse JEE Indigo\eclipse;;.
Jun 21, 2012 7:49:11 AM org.apache.tomcat.util.digester.SetPropertiesRule begin
WARNING: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property ‘source’ to ‘org.eclipse.jst.jee.server:Luna’ did not find a matching property.
Jun 21, 2012 7:49:12 AM org.apache.coyote.AbstractProtocolHandler init
INFO: Initializing ProtocolHandler ["http-bio-8080"]
Jun 21, 2012 7:49:12 AM org.apache.coyote.AbstractProtocolHandler init
INFO: Initializing ProtocolHandler ["ajp-bio-8009"]
Jun 21, 2012 7:49:12 AM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 612 ms
Jun 21, 2012 7:49:12 AM org.apache.catalina.core.StandardService startInternal
INFO: Starting service Catalina
Jun 21, 2012 7:49:12 AM org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.12
java.lang.IllegalAccessError: class com.sun.media.sound.AbstractPlayer cannot access its superclass com.sun.media.sound.AbstractMidiDevice
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClass(Unknown Source)
at java.security.SecureClassLoader.defineClass(Unknown Source)
at java.net.URLClassLoader.defineClass(Unknown Source)
at java.net.URLClassLoader.access$100(Unknown Source)
at java.net.URLClassLoader$1.run(Unknown Source)
at java.net.URLClassLoader$1.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1591)
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1521)
at org.apache.catalina.startup.ContextConfig.checkHandlesTypes(ContextConfig.java:1956)
at org.apache.catalina.startup.ContextConfig.processAnnotationsStream(ContextConfig.java:1919)
at org.apache.catalina.startup.ContextConfig.processAnnotationsJar(ContextConfig.java:1806)
at org.apache.catalina.startup.ContextConfig.processAnnotationsUrl(ContextConfig.java:1765)
at org.apache.catalina.startup.ContextConfig.processAnnotations(ContextConfig.java:1751)
at org.apache.catalina.startup.ContextConfig.webConfig(ContextConfig.java:1255)
at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:882)
at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:317)
at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:89)
at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5081)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)
at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1033)
at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:774)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)
at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1033)
at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:291)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)
at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)
at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:727)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)
at org.apache.catalina.startup.Catalina.start(Catalina.java:620)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:303)
at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:431) 
```

但是当我尝试在 Eclipse >> General >> Switch Location 上右键单击 Tomcat 服务器，然后再次运行时，Tomcat 是可以启动的。tomcat 已启动，但是当我运行 localhost:8080[slash]RestWebServiceDemo[slash]rest[slash]person （基于本[教程](http://avilyne.com/?p=105)）时，它仍然出现错误 404。我不知道会发生什么。

**SOAP**：然后，我想尝试 REST 之外的其他解决方案。我找到了这个[教程](http://javatutorialspoint.blogspot.com/2012/02/android-web-service-access-using-ksoap2.html)，我已经尝试过了，我在 Eclipse 和 Netbeans 双方都构建了 Web 服务。在 Eclipse 中，当我尝试启动服务器时，我上面描述的同样的事情再次发生。在Netbeans上，webservice运行正常，可以正常启动，可以运行wsdl localhost:9090[slash]Ladodi[slash]Hello?wsdl。但是，当我尝试从我的 Android 获取它时，数​​据没有出现在我的 TextView 上。

我的 Netbeans 上的代码如下所示。我构建了两个操作，带参数和不带参数，因为在教程上，操作是不带参数的，当然我后面的操作需要参数。

```
package love.care;

import javax.jws.WebMethod;
import javax.jws.WebParam;
import javax.jws.WebService;

/**
 *
 * @author Setyadi
 */
@WebService()
public class Hello {

    /**
     * Web service operation
     */
    @WebMethod(operationName = "Hai")
    public String Hai(@WebParam(name = "nama")
    String nama) {
        //TODO write your implementation code here:
        return "Hai";
    }

    /**
     * Web service operation
     */
    @WebMethod(operationName = "Kerupuk")
    public String Kerupuk() {
        //TODO write your implementation code here:
        return "Cocote";
    }

} 
```

这是我的 Eclipse 上的 android 代码，用于获取“Kerupuk”操作（不带参数）。

```
package in.figure.on.mobile;

import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.PropertyInfo;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapPrimitive;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;

import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;

public class WebServiceActivity extends Activity{

    private static final String NAMESPACE = "http://care.love/";
    private static String URL = "http://localhost:9090/Ladodi/Hello?wsdl"; 
    private static final String METHOD_NAME = "Kerupuk";
    private static final String SOAP_ACTION =  "http://care.love/Kerupuk";

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.map);

        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);  

        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
        envelope.dotNet = true;
        envelope.setOutputSoapObject(request);

        HttpTransportSE ht = new HttpTransportSE(URL);
        try {
         ht.call(SOAP_ACTION, envelope);
            SoapPrimitive response = (SoapPrimitive) envelope.getResponse();

            TextView helloTV = (TextView) findViewById(R.id.textHello);
            helloTV.setText("Asaa :"+response.toString());

        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

这是我的 Eclipse 上用于获取“Hai”操作（带参数）的 android 代码，我想将“AdityaSetyadi”作为参数传递。

```
package in.figure.on.mobile;

import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.PropertyInfo;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapPrimitive;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;

import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;

public class WebServiceActivity extends Activity{

    private static final String NAMESPACE = "http://care.love/";
    private static String URL = "http://localhost:9090/Ladodi/Hello?wsdl"; 
    private static final String METHOD_NAME = "Hai";
    private static final String SOAP_ACTION =  "http://care.love/Hai";

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.map);

        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);  

          PropertyInfo propInfo = new PropertyInfo();
          propInfo.setName("nama");
          propInfo.setValue("AdityaSetyadi");
          propInfo.setType(PropertyInfo.STRING_CLASS);
          request.addProperty(propInfo);

        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
        envelope.dotNet = true;
        envelope.setOutputSoapObject(request);

        HttpTransportSE ht = new HttpTransportSE(URL);
        try {
         ht.call(SOAP_ACTION, envelope);
            SoapPrimitive response = (SoapPrimitive) envelope.getResponse();

            TextView helloTV = (TextView) findViewById(R.id.textHello);
            helloTV.setText("Asaa :"+response.toString());

        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

两者的区别在于PropertyInfo。我尝试使用 addProperty 传递参数，我尝试使用本[教程](http://www.ibm.com/developerworks/webservices/library/ws-android/index.html)中的代码，但是当尝试像这样编写代码时。但是 addProperty 已被弃用，所以我尝试在上面编写代码。

```
 PropertyInfo propInfo=new PropertyInfo();
        propInfo.name="arg0";
        propInfo.type=PropertyInfo.STRING_CLASS;

        request.addProperty(propInfo, "John Smith"); 
```

**但是**数据仍然没有出现在我的TextView上，我不知道该怎么办。有人可以帮忙吗？或者再给我一个教程。在此先感谢，最好的问候，@AdityaSetyadi

:'(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T09:58:21.130

由于您的 Web 服务是 JAX-WS 而不是 .NET，因此我建议您替换`envelope.dotNet = true;`为`envelope.dotNet = false;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T04:45:35.173

你为什么不试试这个`SoapObject respone = (SoapObject) envelope.bodyIn;` 而不是这条线

```
SoapPrimitive response = (SoapPrimitive) envelope.getResponse(); 
```

如果你想添加参数，还有另一种方法

```
request.addProperty("parameter",value); 
```

代替`PropertyInfo`

和其他重要的事情可能是你做了这一切

1）将使用互联网权限添加到项目的清单文件中

2）请检查`NAMESPACE`，`SOAP_ACTION`是否根据您的正确书写`Webservice`。`webservice`您可以通过在浏览器中打开来验证它。有`NAMESPACE`，`SOAP_ACTION`两者都提到了。

如果您有任何疑问，请随时问我。

# css - 如何覆盖！重要？

> ID：11178673
> 
> 赞同：310
> 
> 时间：2012-06-24T15:28:06.563
> 
> 标签：css

我创建了一个自定义样式表，它覆盖了我的 Wordpress 模板的原始 CSS。但是，在我的日历页面上，原始 CSS 具有使用`!important`声明设置的每个表格单元格的高度：

```
td {height: 100px !important} 
```

有什么方法可以覆盖它吗？

* * *

## 回答 #1

> 赞同：439
> 
> 时间：2012-06-24T15:36:46.427

## Overriding the !important modifier

1.  Simply add another CSS rule with `!important`, and give the selector a higher specificity (adding an additional tag, id or class to the selector)
2.  add a CSS rule with the same selector at a later point than the existing one (in a tie, the last one defined wins).

Some examples with a higher specificity (first is highest/overrides, third is lowest):

```
table td    {height: 50px !important;}
.myTable td {height: 50px !important;}
#myTable td {height: 50px !important;} 
```

Or add the same selector after the existing one:

```
td {height: 50px !important;} 
```

### Disclaimer:

It's almost never a good idea to use `!important`. This is bad engineering by the creators of the WordPress template. In viral fashion, it forces users of the template to add their own `!important` modifiers to override it, and it limits the options for overriding it via JavaScript.

But, it's useful to know *how* to override it, if you sometimes have to.

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-09-17T09:12:22.437

除了覆盖由`style`属性设置的样式之外，只有在样式表中的选择器具有冲突的[特性](http://www.w3.org/TR/CSS21/cascade.html#specificity)[`!important`](http://www.w3.org/TR/CSS21/cascade.html#important-rules)时才应该使用。

但即使你有冲突的特异性，最好为异常创建一个更具体的选择器。在您的情况下，最好`class`在您的 HTML 中有一个，您可以使用它来创建一个不需要`!important`规则的更具体的选择器。

```
td.a-semantic-class-name { height: 100px; } 
```

我个人从不`!important`在我的样式表中使用。请记住，CSS 中的 C 用于级联。使用`!important`将打破这一点。

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2017-12-14T00:47:26.713

免责声明：不惜一切代价避免 !important 。

这是一个肮脏的，肮脏的黑客，但是您可以通过在您尝试覆盖重要的属性上使用（无限循环或非常持久的）动画来覆盖！重要，没有！重要。

```
@keyframes forceYellow {
  from {
    background-color: yellow;
  }
  to {
    background-color: yellow;
  }
}

div {
  width: 100px;
  height: 100px;
  margin: 0 auto;
  background: red !important;
  animation: 1s linear infinite forceYellow;
}
```

```
<div></div>
```

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2014-05-18T19:12:44.070

好的，这是关于 CSS 重要性的快速课程。我希望下面的帮助！

首先，样式的每个部分都以权重命名，因此与该样式相关的元素越多，它就越重要。例如

```
#P1 .Page {height:100px;} 
```

比以下更重要：

```
.Page {height:100px;} 
```

因此，当使用重要时，理想情况下，应该只在真正需要时才使用它。所以要覆盖 decleration，使样式更具体，但也要有覆盖。见下文：

```
td {width:100px !important;}
table tr td .override {width:150px !important;} 
```

我希望这有帮助！！！

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2014-10-09T11:01:42.270

**使用 JavaScript 覆盖**

```
$('.mytable td').attr('style', 'display: none !important'); 
```

为我工作。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2016-08-31T14:02:03.817

这也有帮助

```
td[style] {height: 50px !important;} 
```

这将覆盖任何**内联样式**

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2019-12-05T22:04:22.190

`height`在任何情况下，您都可以使用覆盖`max-height`。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2021-10-17T06:31:59.397

您可以通过在选择器中上升来使用更高的特异性。

```
td {height: 100px !important}
/* higher precedence */
table td {height: 200px !important}
```

您可以[在此处查看有关如何覆盖 css 的详细文章](https://imjignesh.com/how-css-override-works/)。

* * *

## 回答 #9

> 赞同：-4
> 
> 时间：2016-10-26T13:25:31.570

我想添加一个尚未提及的答案，因为我已尝试上述所有方法均无济于事。我的具体情况是我使用的是semantic-ui，它`!important`在元素上内置了属性（非常烦人）。我尝试了一切来覆盖它，最后只有一件事起作用（使用jquery）。如下：

```
$('.active').css('cssText', 'border-radius: 0px !important'); 
```

# spring - 我们可以在为商业应用程序工作时扩展 Spring 源代码吗？

> ID：11178675
> 
> 赞同：0
> 
> 时间：2012-06-24T15:28:20.477
> 
> 标签：spring, open-source, licensing

我一直按原样使用 Spring Framework 类。

但是，我正在考虑通过扩展其 WebServiceTemplate 类来自定义 Spring-WS (WebService) 行为。

WebServiceTemplate 目前只提供“sendAndReceive”，但我想让它只做一个“发送”。然后一个单独的线程执行“接收”。（这样做是为了反映依赖于消息传递的现有工作流程）。

所以我想延长课程..

在从开源代码扩展商业应用程序之前，我需要注意哪些事情？另外，我可以自由使用源代码并根据需要复制吗？

更新：看起来 Spring 使用与 Apache 相同的许可证

[http://www.apache.org/licenses/LICENSE-2.0](http://www.apache.org/licenses/LICENSE-2.0)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T15:33:03.260

Spring-WS use [Apache License](http://static.springsource.org/spring-ws/site/license.html). You are free to modify and use in commercial project. There are some restrictions (e.g., you can't use the Spring trademark), but this should be ok for most projects.

# java - 极长的垃圾收集时间

> ID：11178676
> 
> 赞同：15
> 
> 时间：2012-06-24T15:28:28.737
> 
> 标签：java, garbage-collection, jvm

我们有一个运行 Java 6、Tomcat 6、Spring Framework 3、Hibernate 4、EhCache 的 Web 应用程序。我们遇到了一个垃圾收集时间过长的问题，可能需要 30 秒或更长时间，导致应用程序无响应。

我们目前正在测试中，但除了明显的：添加更多内存之外，我想知道是否可以调整某些方面来减少垃圾收集时间。

内存使用的主要贡献者是 EHCache，因为我们正在积极缓存。但是我总是发现很难调整 EHCache 存储的大小（新的 EhCache 字节大小存储会给我们带来各种问题，因为缓存的对象图可能非常大）。

这些是我对 JVM 的设置

```
JAVA_OPTS="$JAVA_OPTS -server -Xms256m -Xmx704m XX:OnOutOfMemoryError=/usr/share/scripts/on_server_crash.sh -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/var/log/tomcat6 -XX:MaxPermSize=192m -XX:+UseConcMarkSweepGC 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T17:41:48.900

为了减少 GC 时间，你能做的最好的事情就是使用堆外内存。如果您可以移动尽可能多的大数据，即使使用 100 MB 的堆外内存，您也可以将完整的 GC 时间减少到低至 10 毫秒。我相信 Ehcache 支持堆外数据存储，但如果它不支持或者你不能使用它，我建议你看看替代方案。

鉴于您只有 700 MB 的最大内存大小，您似乎在内存非常有限的服务器上运行。否则，我建议您从最大 8 或 16 GB 开始，如果您认为自己并不真正需要它，请减小内存大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T22:54:49.840

FourSquare 的人提供了一个出色的工具。检查此链接和他们拥有的快速示例。[Foursquare 堆工具。](https://github.com/foursquare/heapaudit). 根据您在上述任何工具中找到的诊断结果，解决问题的最有序解决方案将是添加更多 RAM 或增加 CPU 处理器的功率。如果您愿意接受某些基础架构更改，请查看[Azul Systems 的 Zing](http://www.azulsystems.com/technology/java-heap-size)。但我认为第二种选择可能有点牵强。

# iphone - 游戏中心 cocos2d 问题

> ID：11178677
> 
> 赞同：1
> 
> 时间：2012-06-24T15:28:30.307
> 
> 标签：iphone, ios, xcode, cocos2d-iphone, game-center

我是否需要 iPhone 开发者证书和应用商店中提供的应用才能实现游戏中心。

在您的游戏中实现游戏中心排行榜是否容易，如果是这样的话，有任何关于这样做的教程。我已经有一个计分器，但不知道如何将它添加到游戏中心。

任何关于在 cocos2d 中实现游戏中心的好教程，如果是的话，我可以看到一个链接（是的，我看过一些教程，但我想推荐一个好的教程）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T16:12:14.977

您需要一个 iPhone 开发者帐户来测试和实施游戏中心。您不需要在 App Store 上拥有应用程序，您可以在未发布的项目上对其进行测试。我建议您阅读以下教程，该教程非常清楚地解释了有关排行榜的所有内容：

[排行榜教程](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-game-center-achievements-and-leaderboards-part-1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T16:17:10.593

是的 - 但无论如何你都会在设备上进行测试。不，您有一个“沙盒”版本的 Game Center，其中测试了不在应用商店/开发版本上的游戏。

实施排行榜的难度取决于您使用的 cocos2D 版本。从经验来看，第 1 版比第 2 版更具挑战性。这是一些关于我如何实现它的代码；

```
- (void)showLeaderboardForCategory:(NSString *)category
{

        // Create leaderboard view w/ default Game Center style
        GKLeaderboardViewController *leaderboardController = [[GKLeaderboardViewController alloc] init];

        // If view controller was successfully created...
        if (leaderboardController != nil)
        {
            // Leaderboard config
            leaderboardController.leaderboardDelegate = self;   // The leaderboard view controller will send messages to this object
            leaderboardController.category = category;  // Set category here
            leaderboardController.timeScope = GKLeaderboardTimeScopeAllTime;  

            // Create an additional UIViewController to attach the GKLeaderboardViewController to
            myViewController = [[UIViewController alloc] init];

            [[[CCDirector sharedDirector] openGLView] addSubview:myViewController.view];

            // Tell UIViewController to present the leaderboard
            [myViewController presentModalViewController:leaderboardController animated:YES];
        }
}

- (void)leaderboardViewControllerDidFinish:(GKLeaderboardViewController *)leaderboardController
{

    [myViewController dismissModalViewControllerAnimated:YES];
    myViewController.view = nil;
    [myViewController release];

} 
```

（归功于我最初使用的 SO 帖子 -[排行榜没有添加到屏幕 cocos2d 中](https://stackoverflow.com/questions/6724844/leaderboard-doesnt-add-in-the-screen-cocos2d)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T17:47:48.030

Rod Strougo 和 Ray Wenderlich 的书“Learning Cocos2d”（2012）提供了一些很好的示例代码，用于实现游戏中心排行榜和成就。Itterheim 和 Loew 的“Learn cocos2d Game Development with iOS5”也提供了很好的例子。

我遵循了 Strougo 的例子，它第一次或多或少地工作了。但是人们坚持（我做过）的是如何测试。如果你做的不对，它看起来就像它实际上不起作用。听起来您还没有开始使用 GC，所以我不会尝试解释该怎么做。请注意，当需要进行测试时，您需要遵循的程序并不完全显而易见。

# c# - 使用 WPF 播放 MIDI 文件并与视觉效果同步时间

> ID：11178682
> 
> 赞同：3
> 
> 时间：2012-06-24T15:29:24.410
> 
> 标签：c#, wpf, midi, naudio

我正在使用 C#/Windows Presentation Foundation 编写应用程序。它正在用脚的形状可视化舞蹈的步伐。目前我正在将音乐作为 WAV 文件播放，并使用 Timer 计时。

由于**计时器**的不规则性，音乐与步骤**不同步**。我需要某种**同步**，这就是我想使用**MIDI 文件**的原因。

为了同步这些步骤，我需要在音乐中的**每次事件都发生一个事件，**然后显示下一步。在这种情况下，我将不再使用 Timer。

我已经看过**NAudio 了**。我发现播放 MP3 文件的教程对我没有帮助。我创建了一个**MidiFile 对象**，但我不知道如何播放它。我知道 MIDI 文件包含有关如何播放音乐（用于合成器）的信息，但我不想实现自己的播放器。

1.  用 NAudio**播放**MIDI 文件的**简单**方法是什么？

***   我怎样才能在音乐的每个时间**接收事件？**

    *   是否有 NAudio 的**替代品**可以更好地帮助我？

    *   是否有可以与我的可视化同步的 MIDI 替代方案？** 

 **我感谢各种帮助。我一直在寻找一段时间，并认为我可能正在寻找错误的方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T15:44:39.283

如果您想更深入地了解 midi 内部结构，这看起来是一个非常酷的库和可供探索的源代码。

[http://code.google.com/p/midi-dot-net/](http://code.google.com/p/midi-dot-net/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-08-21T16:06:38.410

使用[DryWetMIDI](https://github.com/melanchall/drywetmidi)（我是作者）播放 MIDI 文件以及触发播放事件非常简单：

```
namespace SimplePlaybackApp
{
    class Program
    {
        private static Playback _playback;

        static void Main(string[] args)
        {
            var midiFile = MidiFile.Read("The Greatest Song Ever.mid");

            var outputDevice = OutputDevice.GetByName("Microsoft GS Wavetable Synth");

            _playback = midiFile.GetPlayback(outputDevice);
            _playback.EventPlayed += OnEventPlayed;
            _playback.Start();

            SpinWait.SpinUntil(() => !_playback.IsRunning);

            Console.WriteLine("Playback stopped or finished.");

            outputDevice.Dispose();
            _playback.Dispose();
        }

        private static void OnEventPlayed(object sender, MidiEventPlayedEventArgs e)
        {
            // ... do something
        }
    }
} 
```

[回放](https://melanchall.github.io/drywetmidi/articles/playback/Overview.html)文章和[回放 API](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Devices.Playback.html)参考中的更多信息。**

# ruby-on-rails - Paypal - 付款后重定向到我自己的页面

> ID：11178686
> 
> 赞同：1
> 
> 时间：2012-06-24T15:30:42.833
> 
> 标签：ruby-on-rails, paypal, paypal-sandbox

我想在成功付款后自动将用户重定向到我自己的“谢谢”页面。目前我正在沙盒帐户下和我的本地主机上使用 Paypal。

有什么办法吗？我试图在沙盒中浏览管理员帐户，但我没有找到有用的东西......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T22:36:20.967

您只需向按钮添加一个“返回”变量。

如果您手动创建按钮，它只是一个名为“return”的隐藏字段，其值设置为您的感谢页面。例如：

`<input type="hidden" name="return" value="http://www.mysite.com/thanks.html"/>`

如果您使用的是编码按钮，那么您可以在 PayPal 网站的按钮向导页面中进行设置。

来自 PayPal 的支付标准文档 [ [https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_html_Appx_websitestandard_htmlvariables](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_html_Appx_websitestandard_htmlvariables) ]（很长，所以只需搜索“return”）：

> **返回**
> 
> 买家完成付款后，PayPal 将他们的浏览器重定向到的 URL。例如，在您的网站上指定一个显示“感谢您的付款”页面的 URL。
> 
> 默认 – PayPal 将浏览器重定向到 PayPal 网页。

# android - 如何重复一定数量的代码

> ID：11178691
> 
> 赞同：0
> 
> 时间：2012-06-24T15:31:36.693
> 
> 标签：android, xml, web-services

我创建了一个连接到网络服务器并读取 xml 文件的应用程序，网络服务器上的 xml 将每 5 分钟更新一次。我想通过使用我的应用程序连接到网络服务器来获取这个更新的 xml 文件。我怎样才能做到这一点？这是我的应用程序的示例代码

```
 HandlingXMLStuff doingwork=new HandlingXMLStuff();
        try {
            URL website=new URL(FinalURL);
            SAXParserFactory spf=SAXParserFactory.newInstance();
            SAXParser sp=spf.newSAXParser();
            XMLReader xr=sp.getXMLReader();         
            xr.setContentHandler(doingwork);
            xr.parse(new InputSource(website.openStream()));

        } catch (MalformedURLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (ParserConfigurationException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (SAXException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

这是处理xml文件的类代码

```
public class HandlingXMLStuff extends DefaultHandler{

    String street1=null,street2=null,street3=null,street4=null;

    @Override
    public void startElement(String uri, String localName, String qName,
            Attributes attributes) throws SAXException {
        // TODO Auto-generated method stub

        if(localName.equals("Street1"))
        {
             street1=attributes.getValue("data");

        }
        if(localName.equals("Street2"))
        {
            street2=attributes.getValue("data");

        }
        if(localName.equals("Street3"))
        {
            street3=attributes.getValue("data");

        }
        if(localName.equals("Street4"))
        {
            street4=attributes.getValue("data");

        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T15:34:34.400

因此，为此您应该决定使用`Service`, 确切地`System Service`称为`AlarmManager`.

我建议你看一些教程，也可以查看[A simple example of Alarm Service, using AlarmManager](http://android-er.blogspot.sk/2010/10/simple-example-of-alarm-service-using.html)，[AlarmManager reference](http://developer.android.com/reference/android/app/AlarmManager.html)。

# compiler-errors - libdft_api.h:36:25: 致命错误：sys/syscall.h：No such file or directory

> ID：11178694
> 
> 赞同：2
> 
> 时间：2012-06-24T15:31:48.277
> 
> 标签：compiler-errors, cygwin, fatal-error

在 Windows XP 中编译 libdft 时遇到问题。

我使用 cygwin 终端对其进行编译，并在 devel 中安装了所有内容，并修改了 Makefile 以避免操作系统检查。

但是当我尝试 make 命令时，它会返回错误：

> libdft_api.h:36:25: 致命错误：sys/syscall.h：No such file or directory

我试图找到 syscall.h 但它不存在，如下所示。

```
Administrator@simon-4b7c3fa57 /cygdrive/c/libdft_linux-i386/src
$ cygcheck -l cygwin | grep syscall.h 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-31T14:52:52.120

I'm having a similar problem. From what I've gathered from Google, `syscall.h` is a system file specific to the architecture of your machine. Cygwin doesn't emulate a Linux machine its only some tools and APIs to create a look and feel of one, so that's why the file doesn't exist. For example: In a full Linux OS it could be found in `/usr/include/i386-linux-gnu/sys/`

You'll need to use a similar file found in windows somewhere or try and compile your code in a Linux VM.

# c# - 优化 SDF 文件大小

> ID：11178699
> 
> 赞同：0
> 
> 时间：2012-06-24T15:32:38.180
> 
> 标签：c#, windows-phone, sql-server-ce

我最近开始学习 Linq 和 SQL。作为一个小项目，我正在为 Windows Phone 编写一个字典应用程序。该项目分为两个应用程序。一个应用程序（当前在我的 PC 上运行）在我的 PC 上生成一个 SDF 文件。第二个应用程序在我的 Windows Phone 上运行并搜索数据库。但是我想优化数据使用。字典的原始条目写在一个 TXT 文件中，文件大小约为 39MB。该文件具有以下布局

```
germanWord \tab englishWord \tab group
germanWord \tab englishWord \tab group 
```

该文件被解析为具有下表的 SDF 数据库。

包含_version *(rowversion)、Id (int IDENTITY)、Word (nvarchar(250))、Language (int)列的**Word* 表 此表包含文件中的每个单词。该语言是我代码中的一个标志，我在以后想添加更多语言时使用它。单词-语言对是独一无二的。

 *Table *Group* with columns *_version (rowversion), GroupId (int IDENTITY), Caption (nvarchar(250))*
此表包含不同的组。每个小组都出席一次。

*包含_version (rowversion)、EntryId (int IDENTITY)、WordOneId (int)、WordTwoId(int)、GroupId(int)*列的表*Entry* 此表将翻译链接在一起。*WordOneId*和*WordTwoId是**Word* Table中一行的外键，它们包含一行的 id。*GroupId*定义单词所属的组。

 ***我选择这种布局是为了减少数据占用。原始文本文件多次包含一些德语（或英语）单词。大约有 60 个组在重复自己。以编程方式，我将字数从大约 1.800.000 减少到大约 1.100.000。*Group*表中有大约 50 行。尽管字数减少，SDF 的文件大小约为 80MB。这是原始数据大小的两倍多。还有一点是为了加快翻译的搜索速度，我打算对*Word表的**Word*列进行索引。通过添加此索引，文件将增长到 130MB 以上。

 *拥有约 60% 原始数据的 SDF 怎么会是原来的两倍？

有没有办法优化文件大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T20:31:30.377

数据库文件必须包含原始文件中的所有数据，除了行元数据——它还将包含基于指定数据类型的字符串——我相信你的选择是`NVARCHAR`每个字母使用两个字节。结合这些考虑，我不会感到惊讶，数据库文件比使用 ISO-Latin-1 字符集的相同数据的文本文件大两倍多。*****

# windows - 调试windows程序时如何查看printf？

> ID：11178701
> 
> 赞同：0
> 
> 时间：2012-06-24T15:32:49.093
> 
> 标签：windows, winapi, mfc

> **可能重复：**
> [非控制台应用程序项目中的 C++ 控制台](https://stackoverflow.com/questions/11085025/c-console-in-a-non-console-application-project)

我正在调试以 winmain 开头的 windows 程序。里面有 smome printf，我想知道我是否可以在某处查看 printf 输出？我需要一些特殊的工具吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T15:40:20.330

假设您使用的是 VC++，您可以使用[OutputDebugString](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363362%28v=vs.85%29.aspx)在 IDE 中显示输出。

就像是：

```
wchar_t buffer[512]
wsprintf(buffer, L"Value is %d\n", value);
OutputDebugString(buffer); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T16:47:47.190

尝试这个：

```
AllocConsole();
freopen("CONOUT$", "wb", stdout);
// your printf()

fclose(stdout);
FreeConsole(); 
```

# .htaccess - 将每个传入请求重定向到特定路径保留文件和查询？

> ID：11178702
> 
> 赞同：1
> 
> 时间：2012-06-24T15:32:50.513
> 
> 标签：.htaccess, apache2

由于我对 apache 不擅长，有人能指出我正确的方向吗？

我目前有这样的网址
`www.domain.com/public/my_file.php?query=thing&another=thing`

我想做的是重写我的代码，这样我就不再使用`/public/`部分了，但在那之后我仍然需要支持所有爬虫和人们链接到的旧网址。

**那么我将如何做 301 重定向保留`public/`部分之后的所有内容？**

（示例）需要 使用 301 重定向将此类内容重定向
`www.domain.com/public/my_file.php?query=thing&another=thing`
到此。
`www.domain.com/my_file.php?query=thing&another=thing`

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T16:46:54.097

```
Redirect 301 /public/my_file.php /my_file.php 
```

查询字符串默认传递。

* * *

编辑：

要重定向公用文件夹中的所有内容，请使用以下命令：

```
RedirectMatch 301 /public/(.*) /$1 
```

# ravendb - 为什么在 RavenDB 中存储 Nancy.DynamicDictionary 只保存属性名称而不保存属性值？

> ID：11178704
> 
> 赞同：3
> 
> 时间：2012-06-24T15:33:02.340
> 
> 标签：ravendb, dynamic-language-runtime, nancy

我正在尝试保存（RavenDB build 960）通过其内置传递到 Nancy 模块的表单数据项的名称和值`Request.Form`。

如果我保存一个简单的`dynamic`对象实例（带有测试属性和值），那么一切正常，并且属性名称和值都被保存。但是，如果我使用 Nancy 的`Request.Form`，则只保存动态属性名称。

我知道在检索动态数据（RavenJObjects 等）时，我将不得不处理与恢复正确类型有关的进一步问题，但现在，我想首先解决保存动态名称/值的问题。

这是整个测试请求和代码：

**提琴手请求 (PUT)** ![在此处输入图像描述](../Images/fe965c2b13ccabd8f2cff3a787ea481f.png)

**南希模块**

```
Put["/report/{name}/add"] = parameters =>
    {
        reportService.AddTestDynamic(Db, parameters.name, Request.Form);
        return HttpStatusCode.Created;
    }; 
```

**服务**

```
public void AddTestDynamic(IDocumentSession db, string name, dynamic data)
{
    var testDynamic = new TestDynamic
    {
            Name = name,
            Data = data
    };
    db.Store(testDynamic);
    db.SaveChanges();
} 
```

**测试动态类**

```
public class TestDynamic
{
    public string Name;
    public dynamic Data;
} 
```

**Request.Form 在运行时的动态内容** ![在此处输入图像描述](../Images/4d6198a1ef48fbf49248fcc1a59a8cc1.png)

**生成的 RavenDB 文档**

```
{
  "Name": "test",
  "Data": [
    "username",
    "age"
  ]
} 
```

**注意**： Request.Form 的类型是`Nancy.DynamicDictionary`。我认为这可能是问题所在，因为它继承自`IEnumerable<string>`而不是预期的`IEnumerable<string, object>`. 我认为 RavenDB 正在枚举`DynamicDictionary`并且只取回动态成员名称而不是成员名称/值对。

谁能告诉我如何或是否可以将 Request.Form 视为一个`dynamic`对象，以将其保存到 RavenDB？如果可能的话，我想避免任何手工枚举`DynamicDictionary`来构建`dynamic`实例，以便 RavenDB 可以正确序列化。

谢谢你

**编辑 1** @Ayende

DynamicDictionary 似乎实现了该`GetDynamicMemberNames()`方法：

![南希动态词典](../Images/b0719d64000fbc5f514b3b3b3ef872a9.png)

查看 GitHub 上的代码可以发现以下实现：

```
public override IEnumerable<string> GetDynamicMemberNames()
{
    return dictionary.Keys;
} 
```

这是您希望在这里看到的吗？

**编辑 2** @TheCodeJunkie

感谢代码更新。为了测试这一点，我有：

1.  从 GitHub 创建了 NancyFx/Nancy 主分支的本地克隆
2.  将 Nancy.csproj 添加到我的解决方案中并引用了该项目
3.  运行与上面相同的测试

**来自新 DynamicDictionary 的 RavenDB 文档**

```
{
  "Name": "test",
  "Data": {
    "$type": "Nancy.DynamicDictionary, Nancy",
    "username": {},
    "age": {}
  }
} 
```

您可以看到生成的文档是一个改进。`DynamicDictionary`RavenDB 现在可以正确获取类型信息，并且虽然动态属性名称已正确序列化，但不幸的是动态属性值没有。

下图显示了新的外观`DynamicDictionary`。对我来说一切都很好，新的字典界面清晰可见。我唯一注意到的是调试器中的动态“结果视图”（与“动态视图”相反）只显示属性名称而不是它们的值。“动态视图”和以前一样显示（见上图）。

**DynamicDictionary 在运行时的内容** ![在此处输入图像描述](../Images/b6529996a37e6a302c7c3092918b7ec1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T07:34:50.740

生物分形，问题是动态字典，在 JSON 中，类型可以是对象或列表，它们不能同时是。对于动态对象序列化，我们依靠 GetDynamicMemberNames() 的实现来获取属性，我认为不存在。

# c - Variables and allocation inside of a loop

> ID：11178713
> 
> 赞同：0
> 
> 时间：2012-06-24T15:33:41.450
> 
> 标签：c, memory-management, compiler-construction, memory-leaks

Recently I stumbled upon source code where programmer declared variables inside one infinite loop depending on *if/else* conditions. What I found odd is that the code ran and it didn't implied any memory leaks. First I thought that maybe it was architecture specific thing (the code was for ARM) but I ran some tests and I found out that binaries on IA32 compiled with GCC acted in same way.

My approach was like this: I've created two small program foo.c and bar.c

Foo.c:

```
#include <stdio.h>

int main(void)
{
   int i;

   for(i=0; i<10; i++) {
      char buf[10];
      buf[i] = 0;
      printf("buf[%d] (@ %#x) == %d\n", i, &buf, buf[i]);
   }

   return(0);
} 
```

Bar.c:

```
#include <stdio.h>

int main(void)
{
   int i;

   for(i=0; i<10; i++) {
      char *ptr;
      ptr = (char *) malloc(10);
      ptr[i] = 0;
      printf("buf[%d] (@ %#x) == %d\n", i, &ptr, ptr[i]);
   }

   return(0);
} 
```

The reason behind making explicit distinction between declaring an array in *Foo.c* and allocating memory in *Bar.c* was that first I thought that maybe compiler auto-magically detects that it's the same variable and just ignoring the declaration after initial *for* iteration which of course shouldn't be the case in *Bar.c* because I explicitly allocate the memory.

What was really weird to me that in both examples the address of both an array and allocated memory stays the same after initial *for* iteration.

I do not completely understand that and I don't have my copy of *K&R* with me so I'll be thankful for an explanation. (Also if I made any mistake in my reasoning I'd be glad for pointing it out.)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T15:37:44.513

不要打印指针的地址`ptr`（这是循环内的常量，因为`ptr`在当前调用帧中是局部变量），而是打印指针本身：

```
 printf ("buf[%d] == %d, ptr == %p\n", i, ptr[i], (void*) ptr); 
```

（请记住，如果`a`是一个数组，你确实有`&a == a`并且它们的类型是兼容的，但是如果`p`是一个指针，你通常没有`&p == p`，并且它们的类型是不兼容的）

当然，如果您`malloc`在循环内有一些指针，您通常希望`free`该指针位于循环体的末尾。

您应该学习使用`gcc -Wall -g`（在 Linux 上，甚至可能使用`-Wextra`）进行编译和使用调试器`gdb`（在 Linux 上）。

[valgrind](http://valgrind.org/)是 Linux 上捕获内存泄漏的有用工具。您可以使用[Boehm 的保守垃圾收集器](http://www.hpl.hp.com/personal/Hans_Boehm/gc/)来“避免”它们（通过使用`GC_malloc`而不是，而不是为-ing 显式内存`malloc`而烦恼）。`free`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-16T02:27:56.797

```
#include <stdio.h>
#include <stdlib.h>
int main(void)
{
    int i;
    for(i=0; i<10; i++) {
    char *ptr;
    ptr = malloc(10);
    ptr[i] = 0;
    printf("buf[%d] ptr is %#x, &ptr is %#x, ptr[i] is %d\n", i, ptr, &ptr, ptr[i]);
    }
    return 0;
} 
```

我在 bar.c 的输出中添加了 ptr。现在你可以找到答案了。这是新的源代码 bar.c。我修复了其他人提到的所有错误。你可以通过“gcc -o bar bar.c”编译它并运行“./bar”。

输出是：

```
 ./bar
    buf[0] ptr is 0x820a008, &ptr is 0xbfb9dc48, ptr[i] is 0
    buf[1] ptr is 0x820a018, &ptr is 0xbfb9dc48, ptr[i] is 0
    buf[2] ptr is 0x820a028, &ptr is 0xbfb9dc48, ptr[i] is 0
    buf[3] ptr is 0x820a038, &ptr is 0xbfb9dc48, ptr[i] is 0
    buf[4] ptr is 0x820a048, &ptr is 0xbfb9dc48, ptr[i] is 0
    buf[5] ptr is 0x820a058, &ptr is 0xbfb9dc48, ptr[i] is 0
    buf[6] ptr is 0x820a068, &ptr is 0xbfb9dc48, ptr[i] is 0
    buf[7] ptr is 0x820a078, &ptr is 0xbfb9dc48, ptr[i] is 0
    buf[8] ptr is 0x820a088, &ptr is 0xbfb9dc48, ptr[i] is 0
    buf[9] ptr is 0x820a098, &ptr is 0xbfb9dc48, ptr[i] is 0 
```

您可以发现 ptr 的值在每一行都发生了变化，但 &ptr 的值保持不变。结论：ptr在每次“for”迭代时分配不同的内存，但ptr的地址并没有改变。

# php - 如何在 PHP 中使“服务器太忙而无法处理您的请求”？

> ID：11178714
> 
> 赞同：1
> 
> 时间：2012-06-24T15:33:41.923
> 
> 标签：php, load, server-load

现在我没有时间优化和升级服务器，每月一到两次服务器达到临界负载（基本上是mysql），而且速度非常慢。

我想显示一条静态消息，说明发生这种情况时服务器太忙。

我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T15:57:40.293

有一个功能：[http ://www.php.net/manual/en/function.sys-getloadavg.php](http://www.php.net/manual/en/function.sys-getloadavg.php)

示例用法：

```
<?php
$maxLoad = 10;
$load = sys_getloadavg();
if ($load[0] > $maxLoad) {
    header('HTTP/1.1 503 Too busy, try again later');
    die('Server too busy. Please try again later.');
}else{
    show_my_page();
} 
```

# java - 文件未写入设备

> ID：11178719
> 
> 赞同：0
> 
> 时间：2012-06-24T15:34:46.857
> 
> 标签：java, android, file, fileoutputstream, objectoutputstream

我一直在尝试一百种不同的方法来解决我的问题，但由于某种原因，它们简单地不起作用。我正在尝试一种快速而肮脏的方式，以使我的应用程序持久化。它基本上得到了很多在销毁时需要保存的对象，所以我想我会让它把对象放入一个 ArrayList 中，然后使用 ObjectOutputStream 将 ArrayList 写入文件。

```
public void onStop() {
    super.onStop();
    Log.d("Event", "Stopped");
    FileOutputStream fos = null;
    ObjectOutputStream oos = null;
    try {
        fos = openFileOutput("Flights", MODE_WORLD_WRITEABLE);
        oos = new ObjectOutputStream(fos);
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    ArrayList<Flight> alFlightList = new ArrayList<Flight>();
    Iterator it = flightMap.entrySet().iterator();
    while (it.hasNext()) {
        Map.Entry pairs = (Map.Entry)it.next();
        alFlightList.add((Flight) pairs.getValue());
    }
    try {
        oos.writeObject(alFlightList);
        oos.close();
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        Log.d("Info", "File created!");
    }      
} 
```

我得到了一个类似的算法来再次读取它，但它抱怨没有任何文件可供读取。我知道使用文件进行持久化并不是最佳实践，但正如前面提到的，这应该是一个快速而肮脏的解决方案。（但我现在用在它上面的时间，还不如花在制作数据库上。._.）谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T15:53:44.193

从关于[保存持久状态](http://developer.android.com/reference/android/app/Activity.html#SavingPersistentState)的文档中，

> 活动通常会处理两种持久状态：类似文档的共享数据（通常使用内容提供程序存储在 SQLite 数据库中）和内部状态，例如用户偏好。
> 
> 对于内容提供者数据，我们建议活动使用“就地编辑”用户模型。也就是说，用户所做的任何编辑都会立即有效地进行，而无需额外的确认步骤。支持这个模型通常很简单，遵循两个规则：
> 
> 创建新文档时，会立即为其创建后备数据库条目或文件。例如，如果用户选择写一封新电子邮件，一旦他们开始输入数据，就会为该电子邮件创建一个新条目，这样如果他们在那之后进入任何其他活动，这封电子邮件将现在出现在草稿列表中。当一个活动的 onPause() 方法被调用时，它应该提交给支持的内容提供者或记录用户所做的任何更改。这可确保将要运行的任何其他活动都可以看到这些更改。您可能希望在活动生命周期的关键时刻更加积极地提交数据：例如在开始新活动之前、完成自己的活动之前、用户在输入字段之间切换时等。

因此，如果您想“正确”地执行此操作，我会将数据保存在`onPause`...中，并且我可能会使用某种 SQLite 数据库保存状态。您还应该使用 . 在单独的线程上执行文件 I/O `AsyncTask`，因为这种事情可能会阻塞 UI 线程并使您的应用程序崩溃。

如果您想要一种快速而肮脏的方式来做到这一点（**即，如果您没有在 Android 市场上发布此应用程序**），那么我敢打赌，问题在于您正在尝试执行文件 I/O `onDestroy`，这不是保证被调用。这是执行文件读/写的另一个原因`onPause`。

我建议的最后一件事是阅读有关[内部/外部存储](http://developer.android.com/guide/topics/data/data-storage.html#filesInternal)的文档。可能是您没有写入正确的目录，因为您没有这样做的文件权限。您应该像这样执行文件 I/O：

```
String FILENAME = "FLIGHTS";

FileOutputStream fos = openFileOutput(FILENAME, Context.MODE_PRIVATE);
fos.write(...);
fos.close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T15:49:48.953

替换 /sdcard/Flights 中的 Flight，否则它会在空空间中创建一个文件。:) 我不确定它是否会起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T17:26:24.330

为什么不用数据库？并在创建或重新启动应用程序时从数据库中回调所有设置？

您还可以使用 onpause() 或 onstop() 方法将所有数据存储到数据库中。

# asp.net - what's the issue with AttachDbFilename

> ID：11178720
> 
> 赞同：10
> 
> 时间：2012-06-24T15:34:50.107
> 
> 标签：asp.net, sql-server

Apparently, using `AttachDbFilename` and `user instance` in your connection string is a bad way to connect to a DB. I'm using SQL server express on my local machine and it all seems to work fine. But what's the proper way to connect to SQL server then?

Thanks for your explanation.

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-24T15:58:27.617

Using`User Instance`意味着 SQL Server 正在创建该数据库文件的特殊副本以供您的程序使用。如果您有两个不同的程序使用相同的连接字符串，它们将获得两个完全不同的数据库副本。这会导致*很多*混乱，因为人们将使用他们的程序测试更新数据，然后在 Management Studio 中连接到他们数据库的不同副本，并抱怨他们的更新不起作用。这使他们经历了一系列有缺陷的野鹅追逐步骤，试图解决错误的问题。

[本文更深入地介绍了如何使用此功能](http://msdn.microsoft.com/en-us/library/ms143684.aspx)，但请注意第一个注意事项：**该`User Instance`功能已被弃用**。在 SQL Server 2012 中，首选的替代方案是（按此顺序，恕我直言）：

1.  创建或将您的数据库附加到 SQL Server 的真实实例。然后，您的连接字符串将只需要指定实例名称、数据库名称和凭据。不会有混淆，因为 Management Studio、Visual Studio 和您的程序都将连接到数据库的单个副本。

2.  使用容器进行本地开发。[这是Anna Hoffman 和 Anthony Nocentino](https://docs.microsoft.com/en-us/shows/Data-Exposed/Learn-How-to-Deploy-SQL-Server-2019-in-Containers-in-Just-Minutes)的精彩入门视频，我还有一些其他资源[在这里](https://www.sentryone.com/blog/aaronbertrand/vs-code-mac-sql-linux-docker)、[这里](https://sqlblog.org/2021/07/13/t-sql-tuesday-140-containers)和[这里](https://sqlblog.org/2020/03/15/attaching-restoring-databases-inside-a-container)。如果您使用的是 M1 Mac，您将无法使用成熟的 SQL Server 实例，但如果您可以使用*大多数*SQL Server 功能（[此处列举了遗漏](https://docs.microsoft.com/en-us/azure/azure-sql-edge/features)），则可以使用 Azure SQL Edge。

3.  用于`SqlLocalDb`本地开发。我相信我昨天向您指出了这篇文章：“ [SQL Server 2012 Express LocalDB 入门](http://www.mssqltips.com/sqlservertip/2694/getting-started-with-sql-server-2012-express-localdb/?utm_source=AaronBertrand)”。

4.  使用[SQL Server 紧凑](http://msdn.microsoft.com/en-us/library/aa983341.aspx)。我最不喜欢这个选项，因为功能和语法不一样 - 所以它不一定会为您提供您最终想要部署的所有功能。[精简版也已被弃用，所以就是](https://stackoverflow.com/a/20364011/61305).

当然，如果您使用的版本 < SQL Server 2012，`SqlLocalDb`则不是一种选择——因此您应该创建一个真正的数据库并始终如一地使用它。为了完整性，我只提到了 Compact 选项——我认为这几乎和使用`AttachDbFileName`.

**编辑：**我在这里写过关于这个的博客：

*   [坏习惯：使用 AttachDBFileName](http://blogs.sqlsentry.com/aaronbertrand/bad-habits-attachdbfilename/)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2017-05-11T13:38:24.820

以防有人遇到问题。

`AttachDBFile` 当使用包含with的连接字符串附加数据库时`SQLEXPRESS`，我注意到此连接是使用数据库的 ASP.NET 应用程序独有的。当作为提供者建立连接时，该连接确实阻止了对文件级别上所有其他进程的访问`System.Data.SqlClient`。

为了确保连接可与其他进程共享，请改用 DataBase 在连接字符串 Example 或连接字符串中指定数据库名称：

```
Data Source=.\SQLEXPRESS;DataBase=PlaCliGen;User ID=XXX;password=ZZZ; Connect Timeout=30 
```

, 其中`PlaCliGen`是 SQLEXPRESS 服务器知道数据库的名称（或逻辑名称）。

通过使用 AttachDBFile 连接到数据库，该文件提供了 .mdf 文件的路径，该文件 `(namely : replacing DataBase = PlacliGen by AttachDBFile = c:\vs\placligen\app_data\placligen.mdf)` 以独占方式连接，并且没有其他进程可以连接到数据库。

# wordpress - (wordpress) Displaying Cubepoints and Ranks in bbpress replies

> ID：11178721
> 
> 赞同：0
> 
> 时间：2012-06-24T15:34:56.183
> 
> 标签：wordpress, bbpress

i've been searching for a while now on how to show Cubepoints Points and Ranks in bbPress replies right below the user avatar and name...

Found the template file where to show the info, tho not sure this would be the correct one to grab the reply-author info, the "loop-single-reply.php" (using the default bbpress template files as a child-theme) and just bellow bbp_reply_author_link(); i'm placing the output (correct me if i'm wrong), and i discovered the functions to calculate and display Cubepoints and Ranks (cp_displayPoints($user->ID); & cp_module_ranks_getRank($user->ID)), correct me if i'm wrong again ^^

The question is, since working with bbpress is way more harder then wordpress due to the lack of easy to reach documentation (like wordpress codex), how can I get the reply-author ID and display the Cubepoints and Ranks, am I in the right way? what am I missing? thank you in advance!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T23:30:10.160

我找到了问题的解决方案，它是这样的：

```
<td class="bbp-reply-author">

        <?php do_action( 'bbp_theme_before_reply_author_details' ); ?>

        <?php bbp_reply_author_link( array( 'sep' => '<br />' ) ); ?>
        <!--Ranking -->
        <div class="bbp-ranking">
        <span class="bbp-rank"><?php echo cp_module_ranks_getRank(bbp_get_reply_author_id()); ?></span><br />
        <span class="bbp-points"><?php echo cp_getPoints(bbp_get_reply_author_id(); ?></span>
        </div>
        <!--Ranking -->

        <?php do_action( 'bbp_theme_after_reply_author_details' ); ?>

    </td> 
```

在循环-single-reply.php

# c++ - Restrict the number of object instantiations from a class to a given number

> ID：11178724
> 
> 赞同：2
> 
> 时间：2012-06-24T15:35:47.367
> 
> 标签：c++, object, instantiation

Given a class, I would like to limit the number of objects created from this class to a given number, say 4.

Is there a method to achieve this?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T15:45:14.510

基本思想是计算某个静态变量中创建的实例的数量。我会这样实现它。存在更简单的方法，但这种方法有一些优点。

```
template<class T, int maxInstances>
class Counter {
protected:
    Counter() {
        if( ++noInstances() > maxInstances ) {
            throw logic_error( "Cannot create another instance" );
        }
    }

    int& noInstances() {
        static int noInstances = 0;
        return noInstances;
    }

    /* this can be uncommented to restrict the number of instances at given moment rather than creations
    ~Counter() {
        --noInstances();
    }
    */
};

class YourClass : Counter<YourClass, 4> {
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-24T15:38:12.373

您正在寻找**实例管理器模式**。基本上，您所做的就是将该类的实例化限制为管理器类。

```
class A
{
private: //redundant
   friend class AManager;
   A();
};

class AManager
{
   static int noInstances; //initialize to 0
public:
   A* createA()
   {
      if ( noInstances < 4 )
      {
         ++noInstances;
         return new A;
      }
      return NULL; //or throw exception
   }
}; 
```

一种更短的方法是从构造函数中抛出异常，但这很难做到：

```
class A
{
public:
   A()
   {
       static int count = 0;
       ++count;
       if ( count >= 4 )
       {
           throw TooManyInstances();
       }
   }
}; 
```

# c# - Matching Two Array Indexes - c# / Windows Phone 7

> ID：11178727
> 
> 赞同：0
> 
> 时间：2012-06-24T15:36:19.433
> 
> 标签：c#, arrays, windows-phone-7

I am trying to create a program which will substitute a character in place of another. I have created two arrays, odd and even as follows:

```
char[] odd = { 'a', 'c', 'e', 'g', 'i', 'k', 'm', 'o', 'q', 's', 'u', 'w', 'y' };
char[] even ={ 'b', 'd', 'f', 'h', 'j', 'l', 'n', 'p', 'r', 't', 'v', 'x', 'z' }; 
```

Now, if the input is *'a'*, it has to put *'b'* and if the input is *'b'*, it has to print *'a'*.

So i thought it is best to match the index of both the arrays since they have equal count. the basic idea is this :

the input is *'a'*, so the compiler takes the index of *'a'* - 0 into account and substitutes the value at even with the index 0 - *'b'*.

so I thought of assigning a spare character *'j'*, which will find the index of the input and outputs the corresponding character from the array - `even[]`.

I tried few times but could not get a solution. Kindly help me in this...

This is what I have tried.

The desired input maybe like this : Hello The desired output should be this: Gfkkp

This supposedly gives me the desired result.

```
private void superSecretFormula(string myName)  
{
    string read = myName;
    int count = read.Length;

    char[] odd = { 'a', 'c', 'e', 'g', 'i', 'k', 'm', 'o', 'q', 's', 'u', 'w', 'y' };
    //char[] j;

    char[] even = { 'b', 'd', 'f', 'h', 'j', 'l', 'n', 'p', 'r', 't', 'v', 'x', 'z' };
    for (int i = 0; i < count; i++)
    {
        for (int j = 0; j < 13 ; j++)
        {
            if (read[i]==odd[j])
            {
                int k = j;
                textBlock1.Text = textBlock1.Text + Convert.ToString(char.ToUpperInvariant(even[k]));
            }
            if (read[i] == even[j])
            {
                int k = j;
                textBlock1.Text = textBlock1.Text + Convert.ToString(char.ToUpperInvariant(odd[k]));
            }
        }
    }
} 
```

Kindly comment on the quality and approach in solving this problem, as I am a newbie and I am starting to learn code only now. Thanks

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T16:16:08.687

假设您所有的替换都是独一无二的，我会考虑将您的结构更改为这样的结构以简化使用。

```
class Program
{
    static void Main(string[] args)
    {
        var subs = new Substitutes {{'a', 'b'}, {'c', 'd'}};

        Console.WriteLine(subs['a']); //Prints b
        Console.WriteLine(subs['b']); //Prints a
    }

    class Substitutes : Dictionary<char, char>
    {
         public new void Add(char item, char substitute)
         {
             base.Add(item, substitute);
             base.Add(substitute, item);
         }
    }
} 
```

现在只需检查键是否存在，替换字符串中的所有字符就很简单了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T18:13:24.170

一种方法是创建一个类，该类包含对包含应转置字母的两个字典的引用；类似于OP的原始两个数组。然后创建一个方法来转换输入字符串：

```
public class TransposeLetters
{
    public Dictionary<char, char> Odd { get; private set; }
    public Dictionary<char, char> Even { get; private set; }

    public TransposeLetters()
    {
        Odd = new Dictionary<char, char>();

        // capital leters
        for( int i = 65; i <= 90; i += 2 )
        {
            Odd.Add( (char)i, (char)( i + 1 ) );
        }

        // small letters
        for( int i = 97; i <= 122; i += 2 )
        {
            Odd.Add( (char)i, (char)( i + 1 ) );
        }

        Even = Odd.ToDictionary( x => x.Value, x => x.Key );
    }

    public string Convert( string str )
    {
        // ensure only letters are passed into the method
        var cleansed = str.Where( char.IsLetter );

        var transposed = cleansed.Select( x => Odd.ContainsKey( x ) ? Odd[x] : Even[x] );

        var result = new string( transposed.ToArray() );

        return result;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T16:28:16.550

以最少的修改坚持您的原始想法。

```
Array.IndexOf(odd, 'a'); //will return 0
Array.IndexOf(odd, 'b')' //will return -1 
```

所以....

```
if(Array.IndexOf(odd, inputChar) > -1 )
{
    Console.WriteLine(even[Array.IndexOf(odd, inputChar)]);
}
else
{
    Console.WriteLine(odd[Array.IndexOf(even, inputChar)]);
} 
```

文档：http: [//msdn.microsoft.com/en-us/library/eha9t187.aspx](http://msdn.microsoft.com/en-us/library/eha9t187.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-24T16:03:15.093

我不知道你在哪里需要帮助。一个小函数替换`odd`相应字符串中包含的字符串的每个字符，`even`反之亦然，如下所示：

```
static char[] odd = { 'a', 'c', 'e', 'g', 'i', 'k', 'm', 'o', 'q', 's', 'u', 'w', 'y' };
static char[] even = { 'b', 'd', 'f', 'h', 'j', 'l', 'n', 'p', 'r', 't', 'v', 'x', 'z' };

static string Substitute(string input)
{
    char[] result = new char[input.Length];
    int i = 0;
    bool found = false;
    foreach (char c in input.ToCharArray())
    {
        found = false;
        result[i] = c;
        for (int j = 0; j < odd.Length; j++)
        {
            if (odd[j] == c)
            {
                result[i] = even[j];
                found = true;
                break;
            }
        }

        if (!found)
        {
            for (int j = 0; j < even.Length; j++)
            {
                if (even[j] == c)
                {
                    result[i] = odd[j];
                    break;
                }
            }
        }
        i++;
    }
    return new string(result);
} 
```

您还可以通过创建从每个输入字符到输出字符的某种映射来优化这一点，该映射只需要创建一次然后被缓存：

```
static char[] odd = { 'a', 'c', 'e', 'g', 'i', 'k', 'm', 'o', 'q', 's', 'u', 'w', 'y' };
static char[] even = { 'b', 'd', 'f', 'h', 'j', 'l', 'n', 'p', 'r', 't', 'v', 'x', 'z' };
static int[] mapping = null;

static string Substitute(string input)
{
    if (mapping == null)
    {
        mapping = new int[Math.Max(odd.Select(x => (int)x).Max(), even.Select(x => (int)x).Max()) + 1];

        for (int i = 0; i < mapping.Length; i++) mapping[i] = i;

        // Note: Make sure 'odd' and 'even' are arrays of the same length
        for (int i = 0; i < odd.Length; i++) mapping[(int)odd[i]] = (int)even[i];
        for (int i = 0; i < even.Length; i++) mapping[(int)even[i]] = (int)odd[i];
    }

    char[] result = new char[input.Length];
    int j = 0;
    foreach (char c in input.ToCharArray())
    {
        int charcode = (int)c;
        result[j] = charcode >= mapping.Length ? c : (char)mapping[charcode];
        j++;
    }
    return new string(result);
} 
```

# java - How to create instance of org.springframework.dao.DataAccessException?

> ID：11178728
> 
> 赞同：8
> 
> 时间：2012-06-24T15:36:30.597
> 
> 标签：java, database, spring, hibernate, exception

I need to create JUnit test for handling of DataAccessException,

but when I try:

```
 throw new DataAccessException(); 
```

Receive:

```
 Cannot instantiate the type DataAccessException 
```

Why? What can I do? Thanks.

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-24T15:50:07.130

*DataAccessException*是一个抽象类，不能实例化。而是使用具体类之一，例如*new DataRetreivalFailureException("this was the reason")*或创建您自己的类：

```
throw new DataAccessException("this was the reason") {}; 
```

你会得到一个从 DataAccessException 派生的匿名类。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-24T15:39:22.870

> 为什么？

仅仅因为`DataAccessException`是[抽象类](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/dao/DataAccessException.html)。您不能实例化抽象类。

> 我能做些什么？

如果您检查层次结构：

```
extended by java.lang.RuntimeException
              extended by org.springframework.core.NestedRuntimeException
                  extended by org.springframework.dao.DataAccessException 
```

由于`NestedRuntimeException`也是抽象的，你可以抛出一个`new RuntimeException(msg);`（不推荐）。您可以选择其他答案的建议-使用其中一个具体类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-23T15:28:33.053

如果您查看源代码，您会注意到它是一个**抽象类**，请查看：

```
package org.springframework.dao;

import org.springframework.core.NestedRuntimeException;

public abstract class DataAccessException extends NestedRuntimeException {
    public DataAccessException(String msg) {
        super(msg);
    }

    public DataAccessException(String msg, Throwable cause) {
        super(msg, cause);
    }
} 
```

如您所知，抽象类无法扩展......

但是您可以以其他方式使用它，这是使用它的一种方式，例如：

```
public interface ApiService {
    Whatever getSomething(Map<String, String> Maps) throws DataAccessException;
} 
```

# dom - What ember.js component is responsible for inserting templates into the DOM?

> ID：11178729
> 
> 赞同：3
> 
> 时间：2012-06-24T15:36:39.497
> 
> 标签：dom, ember.js

I am building an ember.js/rails application. All the handlebar templates are stored in .js files. I'd like to understand how they get inserted into the DOM when the router changes state. **Which part of ember does this?** How do I tell ember to place templates?

Right now I can only get my templates appended to the `<body>` I have a [jsFiddle here](http://bit.ly/MItOcl).

I am aware of setting `rootElement` on Ember.Application, however I want the app to control other elements of the page.

**Handlebars / HTML**:

```
<script type="text/x-handlebars" data-template-name="application">
    <h2>I'm the content</h2>
    <p>This should be inbetween the header &amp; footer</p>
    <p><strong>time</strong> {{time}}</p>
</script>

<header>
    <h1>Application</h1>
</header>
<article>
    <div id="content"></div>
</article>
<footer>
    <a href="http://blog.deanbrundage.com" target="_blank">by Dean</a>
</footer> 
```

**​JavaScript**:

```
window.App = Ember.Application.create();

App.Router = Em.Router.extend({
    initialState: 'root.home',
    root: Em.Route.extend({
        home: Em.Route.extend({
            view: App.ApplicationView
        })
    })
});

App.ApplicationController = Em.Controller.extend({
    time: Date()
});
App.ApplicationView = Em.View.extend({
    templateName: 'application'
});

App.initialize(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T16:55:17.223

Ember.js 中的当前实现将 附加`ApplicationView`到`rootElement`应用程序的 ，请参见[此处](https://github.com/emberjs/ember.js/blob/541d085ae039a190d24213d1476de53029355bf9/packages/ember-application/lib/system/application.js#L157-166)。

一种可能的解决方案是覆盖`appendTo`您的`ApplicationView`，请参阅[http://jsfiddle.net/pangratz666/m8L6Z/](http://jsfiddle.net/pangratz666/m8L6Z/)：

**JavaScript**：

```
App.ApplicationView = Em.View.extend({
    templateName: 'application',
    appendTo: function(){
        this._super('#content');
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T01:44:19.047

如果您使用 master，则模板的插入和更改是通过 outlet 处理的。查看[官方指南](http://emberjs.com/guides/outlets/)。

如果您使用的是旧版本的 Ember，则更多的是手动过程。

# c# - I got this error message : Access denied for user (Using password YES)

> ID：11178730
> 
> 赞同：0
> 
> 时间：2012-06-24T15:36:42.003
> 
> 标签：c#, .net, mysql, wpf, xampp

I have a question.

I just created an app using WPF. and trying to connect the database to retrieve the data. for the first time, I try to use the local database at my computer. using XAMPP and mysql.

Using the XAMPP, I can retrieve the data normally. Now I want to use the database at my website. But when I run the app, it fails and shows me this error message:

> Access denied for user '[my user]' (using password: YES)

FYI, I already created a username and password. I also granted all the privileges using the wizard, but still won't work.

Here is my connection string:

```
MySqlConnection conn = new MySqlConnection("Server=[IP Address]; Database=[database name];Uid=[user id];Pwd=[password];"); 
```

Is there any mistake in my connection string?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T15:57:57.303

MySQL 凭据会考虑发出请求的计算机的主机名。例如，在服务器上发出的请求可能看起来像 user@localhost。来自名为 client 的计算机的调用看起来像 user@client。这些中的每一个都需要有自己的用户帐户，除非您使用通配符登录的主机名部分。我猜您使用的帐户是特定于主机名的，因此您需要对主机名进行通配符或为它所说的未经授权的帐户输入一个条目。

这个链接谈了一点。

[http://dev.mysql.com/doc/refman/5.6/en/account-names.html](http://dev.mysql.com/doc/refman/5.6/en/account-names.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T15:18:31.780

终于我找到了答案。。

答案是您只需要在您的主机上添加服务器“%”。添加 '%' 后，您可以为 .NET 应用程序添加另一个 IP 地址以访问数据库。

在 .NET 中，使用您从主机添加的 IP 地址更改服务器。谢谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-31T08:22:07.487

就像 Philip Tinney 说的，您可以通配主机名部分。我在我们的开发服务器上使用了这个（不推荐用于生产服务器）：

```
update mysql.user set host = '%' where host='localhost'; 
```

然后我不得不重新启动服务器以使 MySQL 使用它（可能我可以重新启动 MySQL 服务）。

# java - java- which way is easy to implement yet secure, for end user authentication in a web app/web service

> ID：11178735
> 
> 赞同：0
> 
> 时间：2012-06-24T15:37:36.753
> 
> 标签：java, oauth, jax-rs, basic-authentication, digest-authentication

I am going to create an application which will have a regular web interface where a user can sign up, access some resources.

I am reading up on different means of authentication- Basic authentication, digest authentication, openid , oauth, oauth2...

What I want to know is, if I implement basic or digest authentication, then is it secure? Because in many sites that I visited, the talk was about oauth and how secure it is. Open ID was also mentioned in some of the sites I visited...

The current usage scenario for which I am looking at end user authentication is for a web interface in a web app. Another usage scenario is for a JAX-RS based web service. Which means of authentication is secure for these 2 usage scenarios? Ideally I want to use the same means of auth in both scenarios...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T19:12:04.680

对于面向用户的部分，开箱即用的 Web 浏览器支持 Basic 和 Digest。如果您使用 cookie 建立会话，基于表单或 OpenID 的身份验证也将起作用。如果您使用 Basic，请务必使用 SSL，因为密码将在未加密的消息头中传递。

OAuth 旨在授权第 3 方客户端，以便他们可以在不知道用户密码的情况下访问用户拥有的资源，并且不必具有与用户自己相同的访问级别。我建议将其用于编程 API。

# r - 绘制刻度线控制

> ID：11178738
> 
> 赞同：1
> 
> 时间：2012-06-24T15:38:03.187
> 
> 标签：r, plot, axis, axis-labels

这是我的问题：

```
myd <- data.frame (V1 = paste ("V", 1:1000), V2 = rnorm(1000))

plot(myd[,1], myd[,2]) 
```

![在此处输入图像描述](../Images/1c6eb611e5eee9c1d741fd50934cb112.png)

由于我的绘图在轴上很忙，我只想在每 100 处放置刻度标记并显示相应的标签。仅刻度（无标签）显示在两百刻度之间。例如，刻度和标签在 1、100、200、300.....1000，刻度仅在 50、150、250、350 ......950

我怎样才能做到这一点？

编辑：

例子 ：

```
|   |    |    |    |     |    |
V1       V100      V200      V300 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T15:49:15.270

你可以使用：

```
plot(myd[,1], myd[,2], xaxt="n")
axis(1, at=seq(0,1000,50)) 
```

还可以查看`?axis`有关刻度和标签的详细信息。

## 更新的答案

```
axis(1, at=seq(0,1000,100), label=paste0("V", seq(0, 1000, 100)))
axis(1, at=seq(50,1000,100), label=F, tick=T) 
```

# c# - 如何消除 TabControl 上的空白？

> ID：11178739
> 
> 赞同：0
> 
> 时间：2012-06-24T15:38:05.590
> 
> 标签：c#, winforms, tabcontrol

有人可以知道如何避免 TabControl 上的页面和 TabControl 本身之间的左右间隙（每个大约 5-10 像素）。我什么都试过了。所有边距和填充均为零。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T00:01:21.333

一位愤怒的微软程序员在 TabPage 的源代码中留下了一条注释：

```
 //HACK: to ensure that the tabpage draws correctly (the border will get clipped and
    // and gradient fill will match correctly with the tabcontrol).  Unfortunately, there is no good way to determine
    // the padding used on the tabpage.
    // I would like to use the following below, but GetMargins is busted in the theming API:
    //VisualStyleRenderer visualStyleRenderer = new VisualStyleRenderer(VisualStyleElement.Tab.Pane.Normal);
    //Padding themePadding = visualStyleRenderer.GetMargins(e.Graphics, MarginProperty.ContentMargins); 
```

归功于：Hans Passant :-)

# regex - 需要知道不允许特定字符串的正则表达式格式

> ID：11178741
> 
> 赞同：-1
> 
> 时间：2012-06-24T15:38:22.403
> 
> 标签：regex

我需要知道不允许字符串“delete all”的正则表达式，但它应该接受所有“delete”后跟任何内容。

例如，它不应允许“全部删除”，但应允许“删除 1”、“删除 xyz”等...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T15:47:14.070

使用负前瞻`/delete(?!\s*all)/`将匹配“ *delete* *1* ”中的“ delete ”，但不会匹配“ *delete all* ”中的“delete ”。

有关更多详细信息，请阅读[http://www.regular-expressions.info/lookaround.html](http://www.regular-expressions.info/lookaround.html)

# css - 如何将列表元素左、右和居中对齐

> ID：11178742
> 
> 赞同：0
> 
> 时间：2012-06-24T15:38:24.310
> 
> 标签：css, position, alignment

看看这个小提琴：http: [//jsfiddle.net/ugxNK/](http://jsfiddle.net/ugxNK/)

我希望第一个列表元素位于左上角，中间位于中间，右侧位于右下角。

对于不同的屏幕尺寸，我怎么能动态地做到这一点？

我只知道将它们与边距对齐。

问候！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T15:40:35.053

向列表项添加宽度，如下所示：

```
.panel li
{
    display: inline-block;
    width:33%;
} 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/ugxNK/2/)**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T15:43:20.513

您可以使用`first-child`,`last-child`和等选择器`nth-child(n)`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T15:42:11.457

也许尝试以百分比形式显示它们？

> .panel li { 浮动：左；宽度：40%；显示：块；文本对齐：左 }
> 
> .panel li.center { 宽度：20%; 文本对齐：左 }
> 
> .panel li.right { 文本对齐：右 }

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-24T15:45:34.367

你可以这样写：

```
.left { float:left }
.right { float:right }
ul{text-align:center; overflow:hidden} 
```

检查这个[http://jsfiddle.net/ugxNK/4/](http://jsfiddle.net/ugxNK/4/)

# gtk - GTK+ 3.0：如何将 Gtk.TreeStore 与自定义模型项一起使用？

> ID：11178743
> 
> 赞同：10
> 
> 时间：2012-06-24T15:38:37.483
> 
> 标签：gtk, gtk3, pygobject, gobject, gtktreeview

我正在尝试在 Python 中开发 GTK 应用程序，但我真的坚持正确使用[`gtk.TreeStore`](http://developer.gnome.org/gtk3/stable/GtkTreeStore.html). 我的主要问题：我已经解析了一些 JSON，并且我有自己的数据结构，它基本上是一个 Python 列表和两种对象：一种表示项目集合（集合不能嵌套），另一种表示项目（它可能出现在列表中以及集合中）。

我已经熟悉 a 的基本用法`TreeStore`并设法在屏幕上正确呈现项目。我不知道如何处理树存储只能存储 gobject 类型的事实（此时我不确定，因为我对 gobject 类型系统了解不多）。C 的文档列出了以下（PixBuf 除外）可以插入并自动映射到 Python 数据类型的基本类型：

> 例如，gtk_tree_store_new(3, G_TYPE_INT, G_TYPE_STRING, GDK_TYPE_PIXBUF)；将创建一个新的 GtkTreeStore，其中包含三列，分别为 int、string 和 GdkPixbuf 类型。

此外，它说您可以插入任何[`GType`](http://developer.gnome.org/gobject/unstable/gobject-Type-Information.html#GType). 文档中的链接直接指向本段：

> 一个数值，表示已注册类型的唯一标识符。

我对该主题的研究到此结束，谷歌发现大部分是 GTK 2.x 教程，除了等之外，没有关于插入其他数据类型`str`的内容`int`。
问题：

*   是否可以实现新的 GType（或任何其他可以在树存储中插入自定义数据的接口）以及如何实现？
    我已经尝试过，`GObject`但没有帮助。

*   如何摆脱同时保留两个数据结构？
    即我的解析结果和 Treestore 中的重复信息。

*   如何处理混合内容？
    就我而言，我有具有不同附加信息的集合和项目（在树视图中镜像为有或没有子节点的节点）。

如果上述问题解决了，我在处理选择时也摆脱了这个问题：很难匹配一个简单的类型`str`或者`int`匹配我之前插入的一个项目。这样的属性必须是一个键，你仍然会用解析结果搜索列表，这是无效的。

先感谢您！

与问题没有直接关系的其他信息：

* * *

`TreeModel`在我阅读[GTK 2 教程](http://scentric.net/tutorial/sec-custom-models.html#sec-custom-models-when)之前，我认为实现自定义可能是一个可行的挑战：

> 然而，所有这些都是有代价的：你**不可能在不到一千行的时间内编写一个有用的自定义模型**，除非你去掉所有的换行符。编写自定义模型并不像听起来那么困难，而且值得付出努力，尤其是因为如果您有大量数据需要跟踪，它会产生更清晰的代码。

这仍然有效吗？

* * *

~~我刚刚遇到[http://www.pygtk.org/articles/subclassing-gobject/sub-classing-gobject-in-python.htm](http://www.pygtk.org/articles/subclassing-gobject/sub-classing-gobject-in-python.htm)这有帮助吗？与 PyGTK 2.0 一样多的资源。~~已弃用。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-24T19:35:45.740

问题解决了！对于遇到同样问题的其他人，我将收集一些有用的资源和我的示例代码。如果你知道怎么做也没关系，但它真的没有记录在案。

*   `GObject`正确地从属性派生：http:
    [//python-gtk-3-tutorial.readthedocs.org/en/latest/objects.html](http://python-gtk-3-tutorial.readthedocs.org/en/latest/objects.html)

*   如何欺骗 TreeView 接受自定义值`CellRendererText`，包括用于实现传递给的函数的有用片段`set_cell_data_func`（需要适应`TreeView`）
    [如何使 GtkListStore 连续存储对象属性？](https://stackoverflow.com/questions/3488285/how-to-make-gtkliststore-store-object-attribute-in-a-row)

*   关于 TreeViews 的一般良好文档
    [http://python-gtk-3-tutorial.readthedocs.org/en/latest/treeview.html](http://python-gtk-3-tutorial.readthedocs.org/en/latest/treeview.html)

完整的示例代码，用于让 TreeView 填充人员并在单击按钮时打印所选人员：

```
from gi.repository import Gtk
from gi.repository import GObject

class Person (GObject.GObject):
    name = GObject.property(type=str)
    age = GObject.property(type=int)
    gender = GObject.property(type=bool, default=True)

    def __init__(self):
        GObject.GObject.__init__(self)

    def __repr__(self):
        s = None
        if self.get_property("gender"): s = "m"
        else: s = "f"
        return "%s, %s, %i" % (self.get_property("name"), s, self.get_property("age"))

class MyApplication (Gtk.Window):

    def __init__(self, *args, **kwargs):
        Gtk.Window.__init__(self, *args, **kwargs)
        self.set_title("Tree Display")
        self.set_size_request(400, 400)
        self.connect("destroy", Gtk.main_quit)
        self.create_widgets()
        self.insert_rows()
        self.show_all()

    def create_widgets(self):
        self.treestore = Gtk.TreeStore(Person.__gtype__)
        self.treeview = Gtk.TreeView()
        self.treeview.set_model(self.treestore)
        column = Gtk.TreeViewColumn("Person")

        cell = Gtk.CellRendererText()
        column.pack_start(cell, True)

        column.set_cell_data_func(cell, self.get_name)

        self.treeview.append_column(column)
        vbox = Gtk.VBox()
        self.add(vbox)
        vbox.pack_start(self.treeview, True, True, 0)

        button = Gtk.Button("Retrieve element")
        button.connect("clicked", self.retrieve_element)
        vbox.pack_start(button, False, False, 5)

    def get_name(self, column, cell, model, iter, data):
        cell.set_property('text', self.treestore.get_value(iter, 0).name)

    def insert_rows(self):
        for name, age, gender in [("Tom", 19, True), ("Anna", 35, False)]:
            p = Person()
            p.name = name
            p.age = age
            p.gender = gender
            self.treestore.append(None, (p,))

    def retrieve_element(self, widget):
        model, treeiter = self.treeview.get_selection().get_selected()
        if treeiter:
            print "You selected", model[treeiter][0]

if __name__ == "__main__":
    GObject.type_register(Person)
    MyApplication()
    Gtk.main() 
```

# c# - MSChart 标注水平对齐到数据点 WinForms

> ID：11178744
> 
> 赞同：0
> 
> 时间：2012-06-24T15:38:48.520
> 
> 标签：c#, .net, annotations, mschart, callouts

我需要帮助，我在 C Sharp 中将 MSChart 用于 .NET4.0 WinForms，现在当我绘制图表时，注释到处都是。

![标注无处不在！ 真的很乱！](../Images/35f59228afa1d7fd194e52fd1dee343f.png)

我真正喜欢的是这个（我手动移动了标注来制作这个截图）

![图表渲染后用鼠标手动定位标注](../Images/f2d7d370101689ede83f1149c8db402e.png)

所以我想知道，有没有一种方法可以确保所有标注注释绝对保持在相应数据点锚点的垂直底部顶部？我不希望标注向左或向右移动....

感谢大家...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T17:38:20.703

MSChart 使用 SmartLabel 技术来显示标签。

您可以更改此属性

```
Chart1.Series["Series1"].SmartLabels.MovingDirection =  
LabelAlignment.Bottom | LabelAlignment.Top; 
```

您可以查看这些链接

[http://www.codeproject.com/Articles/24644/What-c](http://www.codeproject.com/Articles/24644/What-can-SmartLabels-Technology-do-for-me) ​​an-SmartLabels-Technology-do-for-me http://support2.dundas.com/OnlineDocumentation/WebChart2005/UsingSmartLabels.html [http://msdn. microsoft.com/en-us/library/system.web.ui.datavisualization.charting.smartlabelstyle.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.datavisualization.charting.smartlabelstyle.aspx)

# mysql - CodeIgniter - 数据库插入后返回值

> ID：11178745
> 
> 赞同：0
> 
> 时间：2012-06-24T15:38:55.893
> 
> 标签：mysql, codeigniter

我有一个适用于我的模型的表格：

```
public function addGame($data, $parent_id = '0') {

    // passing variables from POST
    ...

    // insert array
    $ins = array(
        ...
    );

    $q = $this->db->insert('games',$ins);
    $last = $this->db->insert_id();
    return site_url().'/'.$last.'/'.$slug;
} 
```

控制器：

```
public function addGame() {

    $this->load->model('contrib_model');

    if ($this->form_validation->run()) {
        $this->contrib_model->addGame($this->input->post()); //submits data
    } else {
        $this->layout->view('contribute/addGame', $data); //loads view
    }
} 
```

我的意思是 - 想要最后一个`return`值......返回。我使用压缩，所以我不能`echo`这样做（无论如何它都不合适）。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T15:52:51.843

正如 Esailija 建议的那样，我通过创建视图解决了这个问题。首先，我使用的是简单的布局引擎，所以我不得不摆脱它。现在我的控制器看起来像这样（重要部分）：

> ```
>  if ($this->form_validation->run()) {
>         $data['submit'] = $this->contrib_model->addGame($this->input->post()); //submits data
>         $this->load->view('contribute/emptyPage', $data); //loads view
>     } else {
>         $this->layout->view('contribute/addGame', $data); //loads view
>     } 
> ```

如您所见，第一次加载视图是不同的——那是纯 CodeIgniter 视图。在contribute/emptyPage.php 我只有这个：

```
<?php echo $submit; ?> 
```

它的工作原理应该是 - 只返回新地址，我可以用它来重定向（`header('Location...`例如）。

# android - 将新项目插入 MySQL 后刷新 ListView

> ID：11178749
> 
> 赞同：0
> 
> 时间：2012-06-24T15:39:19.543
> 
> 标签：android, mysql, listview, refresh

我尝试了很多方法和建议，但我的代码并不正确。这是我所做的。需要添加什么代码，以便在添加新项目后，项目显示在列表中？

这是上下文：

在操作栏中，有一个“添加项目”按钮。对话框打开，在对话框的 onclick 中，它将您在单个字段中输入的单词插入数据库（MySQL），关闭对话框，然后......这就是我的麻烦所在......没有.

编辑：我已经尝试过了——yourAdapter.notifyDataSetChanged(); 我根本不知道把它放在哪里或如何使用它，因为它不会改变任何东西。

```
 public class Items extends ListActivity {

List<String> items = null;
String NewItem;
ArrayAdapter<String> adapter;
ListView listView;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    items = new ArrayList<String>();

    new task().execute();

}

 // Class that sets up ListView and populates from database on initial Activity Load
class task extends AsyncTask<String, String, Void> {

    @Override
    protected Void doInBackground(String... params) {

        // HttpPost ... etc
                    // BufferRedReader .. etc 

    }

    protected void onPostExecute(Void v) {

        String item;
        try {
            // JSON Stuff
            }
        } catch (JSONException e1) {

 //  Here is where ListView is set up when Activity/page first starts

        listView = getListView();
        listView.setTextFilterEnabled(true);
        listView.setOnItemClickListener(new OnItemClickListener() {

            public void onItemClick(AdapterView<?> arg0, View arg1,
                    int arg2, long id) {

                Intent i = new Intent(getApplicationContext(), Rate.class);
                i.putExtra("name", items.get(arg2));
                i.addFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION);
                startActivity(i);

            }
        });

        adapter = new ArrayAdapter<String>(Items.this, R.layout.list, items);
        setListAdapter(adapter);

    }
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    // Handle item selection
    switch (item.getItemId()) {
    case R.id.Add_Item:

        final Dialog dialog = new Dialog(Items.this);
        dialog.setContentView(R.layout.insert_dialog);
        dialog.setTitle("Insert Item");
        dialog.setCancelable(true);
        dialog.show();

        final EditText etInsert = (EditText) dialog
                .findViewById(R.id.etInsertItem);

        Button bInsert = (Button) dialog.findViewById(R.id.bInsert);
        bInsert.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {

                NewItem = etInsert.getText().toString();
                new insertTask().execute();

                dialog.dismiss();

            }
        });

        return true;
    case R.id.About:

        return true;
    default:
        return super.onOptionsItemSelected(item);
    }
}

 // This Class is the "inserting item" task inside the dialog

class insertTask extends AsyncTask<String, String, Void> {

    @Override
    protected Void doInBackground(String... params) {

        try {
            // HttpPost Stuff ... running insert Script to Database here

        } 

    }

    protected void onPostExecute(Void v) {

            // Add ListView Refresh Here????

    }

}
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T15:52:41.463

`adapter.notifyDataSetChanged();`更新数据后直接使用。这应该足够了。你也可以把`notifyDataSetChanged();`适配器本身放进去，更新模型数据后就行了。

顺便提一句。我在您的代码中没有看到列表更新。当然，您必须在调用之前更新列表的模型数据`notifyDataSetChanged();`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T15:47:14.133

你可以尝试使用

```
yourAdapter.notifyDataSetChanged(); 
```

在你的`onPostExecute`方法中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T15:57:33.363

在`list<String> items`适配器中用于获取 ListItems 的数据。您需要将新项目添加到此列表中，即然后`items`调用asyncTask`adapter.notifyDataSetChanged();`的。`onPostExecute()``insertTask`

# selenium - 脚本在尝试关闭模式对话框时挂起

> ID：11178751
> 
> 赞同：0
> 
> 时间：2012-06-24T15:39:25.760
> 
> 标签：selenium, webdriver, selenium-webdriver

尝试在浏览器中关闭模式对话框时出现问题。该代码类似于以下代码：

```
 1) driver.switchTo().window(1);
                2) driver.close();
                3) driver.switchTo().window(0); 
```

问题是代码执行挂在第 2 行。我相信这是因为浏览器（无 Web）对话框显示“您正在查看的网页正在尝试关闭窗口......”出现。在我手动关闭确认对话框后脚本继续。所以，我想知道是否有人对如何处理这个问题有任何想法。我使用带有 webdriver 2.24.1 的 IE8 浏览器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T10:44:27.580

谢谢你的帮助！确实通过执行以下 JS 解决了这个问题

```
((JavascriptExecutor)driver).executeScript("window.open(\"\", \"_self\");window.close();"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T20:05:31.190

如果 AJ 的解决方案：

```
driver.close();
driver.switchTo().alert().accept(); 
```

不起作用，我建议[提交一个错误](http://code.google.com/p/selenium/issues/entry)。在此问题得到解决之前，这里有一个简单的解决方法，可以抑制对话框：

```
((JavascriptExecutor)driver).executeScript("window.onbeforeunload = function(){};");
driver.close(); 
```

# asp.net-mvc-3 - mvc 3 条件远程验证

> ID：11178760
> 
> 赞同：2
> 
> 时间：2012-06-24T15:41:04.300
> 
> 标签：asp.net-mvc-3, validation

这是我的模型：

```
public class StockRequestModel
  {
    public int StockID { get; set; }
    public int CategoryID { get; set; }
    public int ItemID { get; set; }
    public string TranCode { get; set; }

    [Remote("CheckAvailableStocks", "Validation", AdditionalFields = "ItemID")]
    public int ItemQuantity { get; set; }

    public decimal ItemValue { get; set; }
    public int PurchaseOrderID { get; set; }
    public int MaterialRequesitionID { get; set; }
    public int ReturnedByID { get; set; }
    public string Remarks { get; set; }
    public DateTime LastUpdateDate { get; set; }
  } 
```

这个模型被我网站上的多个页面使用。请帮助我了解如何仅在某些页面上启用/禁用此遥控器？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T15:45:48.733

我会为每个视图创建单独的视图模型，并从所有通用的类中**继承**它

```
public class StockRequestBase
{
   public int StockID { get; set; }
   public int CategoryID { get; set; }
   public int ItemID { get; set; }
   public string TranCode { get; set; }
   //other common properties
}
public class AddStockRequest : StockRequestBase
{
   [Remote("CheckAvailableStocks", "Validation", AdditionalFields = "ItemID")]
   public int ItemQuantity { get; set; }
}
public class AddStockRequestOptional : StockRequestBase
{
    public int ItemQuantity { get; set; }
    public string AnotherSpecificAttribute { set;get;}
} 
```

# c# - 如果我使用 Task.Wait() 而不是 await，则未显示 MessageDialog 任务

> ID：11178764
> 
> 赞同：2
> 
> 时间：2012-06-24T15:41:58.640
> 
> 标签：c#, .net, windows-runtime, async-await

我不知道等待任务和使用 task.Wait() 之间的区别，但是对于 MessageDialog.ShowAsync 方法，第一个它可以工作，但不能与第二个（而这两种语法适用于其他异步方法）。

如果有人能解释为什么我会感兴趣！

```
// this don't work, no dialog is shown (and UI is block)
var dialog = new MessageDialog("fail");
var task = dialog.ShowAsync().AsTask();
task.Wait();

// this work
var dialog = new MessageDialog("success");
var task = dialog.ShowAsync().AsTask();
await task; 
```

你会问我为什么要这样做，因为我需要在 catch 块中显示一个对话框（以显示错误消息）并等待用户关闭对话框，然后在 catch 块之后继续（是的，我们可以'不要在 catch 块中使用 await，但我们可以使用 Task.Wait()，我已经成功地将它与其他异步方法一起使用）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T16:16:13.583

显示对话框（并响应其中的按钮单击）必须从 UI 线程完成。但是，如果您调用`Wait()`UI 线程，您基本上是在说该线程上不会发生任何其他事情，直到`Task`完成为止。这就是无法显示对话框的原因，这也是您的应用程序冻结的原因。

所以，UI 线程在等待对话框，而对话框在等待 UI 线程，这是一个经典的[死锁](http://en.wikipedia.org/wiki/Deadlock)。我相信`Wait()`在 UI 线程上使用是 C# 5 GUI 应用程序中死锁的最常见原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T15:50:06.473

task.Wait() 阻塞直到任务完成，而 await 继续处理。我的猜测是，因为 UI 被阻止，消息对话框无法出现。

# c# - C# listview imagelist 快速添加很多项

> ID：11178765
> 
> 赞同：4
> 
> 时间：2012-06-24T15:42:01.820
> 
> 标签：c#, listview, imagelist, addrange

我的表单上有一个 C# 中的 ListView 和 ImageList，并读取了一个最多包含大约 1000 个文件的目录。我使用 AddRange 方法使用 fileItems DummyItems 的计数预先填充 ListView 和 ImageList，以避免 ListView 闪烁和闪烁。

现在在第二步中，我只想在从文件系统读取真实项目时将正确的项目信息分配给虚拟项目。项目文本到目前为止没有问题，但我无法替换虚拟图像。如果我尝试这样做，它总是会抛出一个无效的参数异常。使用 RemoveAtIndex 或 RemoveAtKey 删除图像然后重新添加将花费我很长时间来遍历 1000 个文件。使用 ImageList 中的“RemoveAtKey”，1000 个文件需要 8 分钟。“RemoveAtKey”是我发现的瓶颈。如果我之前尝试清除所有图像并再次使用 AddRange 重新填充，我的项目图像将变为空白或发生异常。有人知道我如何从 1000 个文件名的文件中快速获取 1000 个不同的缩略图，然后使用另一种方法将其快速放入列表视图控件中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-14T15:52:26.453

首先，您可能希望使用以下代码创建一个名为“ListViewNF”的新用户控件：

```
class ListViewNF : System.Windows.Forms.ListView
{
    public ListViewNF()
    {
        //Activate double buffering
        this.SetStyle(ControlStyles.OptimizedDoubleBuffer | ControlStyles.AllPaintingInWmPaint, true);

        //Enable the OnNotifyMessage event so we get a chance to filter out 
        // Windows messages before they get to the form's WndProc
        this.SetStyle(ControlStyles.EnableNotifyMessage, true);
    }

    protected override void OnNotifyMessage(Message m)
    {
        //Filter out the WM_ERASEBKGND message
        if(m.Msg != 0x14)
        {
            base.OnNotifyMessage(m);
        }
    }
} 
```

这解决了高速添加项目到列表视图时的闪烁问题。

我仍在为您的其他问题做一些研究和测试。

# android - 把模型放在前面？

> ID：11178768
> 
> 赞同：1
> 
> 时间：2012-06-24T15:42:21.233
> 
> 标签：android, android-emulator, libgdx

我有一个云模型，它继续在背景场景后面（在代码中称为“墙”）。我如何将云模型带到前面，使其永远不会落后？

代码如下：

```
public class RocketBlast extends DemoWrapper implements InputProcessor, ApplicationListener {
private static final Vector2 GRIDSIZE = new Vector2(16, 16);

FloorGrid floor;
private DecalBatch decalBatch;
private SpriteBatch spriteBatch2d;
private GroupStrategy strategy;
// private DecalSprite[] walls = new DecalSprite[5];
private DecalSprite wall;
private ArrayList<DecalSprite> walls = new ArrayList<DecalSprite>();

private MeshHelper cloud;
private DecalSprite shadow;
// camera
private Camera cam;
private GuOrthoCam oCam;
private GuPerspCam pCam;
private String camType = "ortho";
private boolean debugRender = true;
private Vector2 screenSize;
private Vector2 last = new Vector2(0, 0);
private Builder builder;

@Override
public void create() {
    Gdx.gl.glEnable(GL10.GL_DEPTH_TEST);
    Gdx.gl10.glDepthFunc(GL10.GL_LESS);

    builder = new Builder();
    builder.addIslands();

    screenSize = new Vector2(Gdx.graphics.getWidth(), Gdx.graphics.getHeight());

    oCam = new GuOrthoCam(screenSize.x, screenSize.y, GRIDSIZE);
    oCam.position.set(8, 1, -17);
    oCam.setTargetObj(builder.target);

    pCam = new GuPerspCam(50, 50, 50);

    cam = oCam; 

    floor = new FloorGrid(GRIDSIZE);

    String objfile = "data/volumetric_cloud_tutorial.obj";
    cloud = new MeshHelper(objfile);
    cloud.scale(0.5f, 0.5f, 0.5f);
    cloud.setPos(1, 1f, 5);
    cloud.setColor(1, 1, 0);
    cloud.setMotion(1,0, 0, 0.02f);
    cloud.setTexture();

    addWalls();

    // batches
    strategy = new CameraGroupStrategy(cam);
    decalBatch = new DecalBatch(strategy);
    spriteBatch2d = new SpriteBatch();
    spriteBatch2d.enableBlending();

    Gdx.input.setInputProcessor(this);
}

private ArrayList<DecalSprite> addWalls() {

    wall = new DecalSprite().build("data/i.png");
    wall.sprite.rotateY(90);
    wall.sprite.setPosition(GRIDSIZE.x, 1, 8);
    wall.sprite.setDimensions(17, 2);
    walls.add(wall);

    return walls;
}

@Override
public void render() {
    GL10 gl = Gdx.app.getGraphics().getGL10();
    gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);

    float delta = Gdx.graphics.getDeltaTime();

    cam.update();
    cam.apply(gl);

    setUpLighting(gl);

    gl.glColor4f(0, 1, 0, 1f);
    floor.render(gl, GL10.GL_LINE_STRIP);
    gl.glColor4f(1, 0, 0, 1f);

    for (DecalSprite oneWall : walls) {
        decalBatch.add(oneWall.sprite);
    }

    cloud.update(delta);
    cloud.render(gl, GL10.GL_TRIANGLES);

    //decalBatch.add(shadow.sprite);

    decalBatch.flush();

    cam.update();
    cam.apply(gl);
    // decalBatch.add(player.sprite);
    decalBatch.flush();

    cam.update();
    cam.apply(gl);

    // turn off lighting for 2d sprites
    gl.glDisable(GL10.GL_LIGHTING);

    gl.glPopMatrix();

    oCam.handleKeys();

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T16:50:37.140

深度仅表示“与相机的距离”。

我不是 libgdx 专家，但它看起来像是在使用 XZ 平面来绘制世界，并且将相机视为在“Y”轴上向下看。

如果是这种情况（如果我错了，请纠正我），那么你需要你的云的 Y 值大于你的背景（更靠近相机）。

尝试将墙的 Y 位置设置为“-1”，将云设置为“0”，看看是否可行。您也可以通过调整深度来分层其他对象。

# jquery - Struts2：jQuery中的Result未收到Ajax响应

> ID：11178771
> 
> 赞同：1
> 
> 时间：2012-06-24T15:42:38.257
> 
> 标签：jquery, struts2

我向一个类发送一个 Ajax 请求`Action`并尝试从`Result`.
这是我的 jQuery 代码：

```
$('#button').click(function(){                    
            $.get('ajax.action','query="hi server:)")',function(x,r,s){                    
            alert("server said :"+r+"-stat-"+s.status);                    
            }) 
```

这里的响应总是“成功”，而不是预期的响应。
这是我的 Action 类的 execute()。

```
String response;
String query;
     @Override
    public String execute() throws Exception {

        response=query+" - Struts added :";        

        setResponse(response);

        return SUCCESS;
    } 
```

已经编写了用于字符串响应和查询的 getter 和 setter（此处未显示）。
这是我的`Result`课

```
public class AjaxResponse implements Result {

@Override
public void execute(ActionInvocation ai) throws Exception {

    System.out.println("I am the Ajax Rsponse RESULT");// this is displayed in the console
     PrintWriter out =
                ServletActionContext.getResponse().getWriter();
    try {
        ServletActionContext.getResponse().setContentType("text/plain");

        ValueStack valueStack = ai.getStack();
       // Object resObj= valueStack.findValue("response");
        out.print("hi I am server ...");

        System.out.println("Response WROTE---");
    } catch (Exception e) {
        e.printStackTrace();

    }finally{

    out.close();
        System.out.println("Response Close "); // this is displayed in the console
    }        
} 
```

}

这是我如何将 Result 类添加到 struts.xml

```
 <result-types>        
        <result-type name="ajaxResponse" class="com.app.ajax.AjaxResponse" />  
 </result-types> 
```

这是我宣布行动的方式

```
<action name="ajax" class="com.app.action.AjaxSupport">
        <result type="ajaxResponse"/>
    </action> 
```

警报总是只给出*SUCCESS*，而不是预期的结果 'hi I am server ...' 。
控制台显示 Result 类的打印结果-("I am the Ajax Response RESULT","Response WROTE---","Response Close") 我使用了一个单独的 Result 类来松散耦合任务并在操作中执行业务逻辑班级。
请任何人让我知道我的问题在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T01:02:35.367

问题不在于 Struts，而在于我检查结果是否正确。

```
$.get('ajax.action', 'query="hi server")', function(x, r, s) {                    
    alert("server said: " + r + "-stat-" + s.status); 
```

根据此警报，输出为：

```
server said: success-stat-200 
```

问题是看到这个*成功*。与回调函数的参数混淆。

这`'r'`是响应的状态（我认为是响应）， s 是`xmlHttpRequest`对象。

我不得不检查 not `r`，但这`x`是真正的预期值。打印 x 的值，出现服务器发送的真实值。

# deploying - 使用和发布我的 WCF 和 MVC 项目

> ID：11178773
> 
> 赞同：0
> 
> 时间：2012-06-24T15:42:50.487
> 
> 标签：deploying

我是一个完整的新手。我正在使用 SQLServer 2008 数据库、WCF 项目和 Visual Studio 2010 中的 MVC3 项目构建我的第一个 Web 应用程序。我的主机是 godaddy，所以我试图从 Godaddy 启动我的 MVC 项目开始。这给了我很多问题，我决定暂时忘记它并尝试在我的本地主机上启动我的网站。现在我有两个问题：

首先：在 IIS 中创建网站然后使用发布方法“Web Deploy”在 Visual Studio 中发布并标记为 IIS 应用程序后，我的 WCF 和我的 MVC 项目都已正确发布。在输出框中，我收到消息“开始 Web 部署将应用程序/包发布到某个 url (localhost:port/IIS-websitename) ......发布已成功部署...... " 如果我​​然后转到上面提到的 url，我会收到错误 "找不到网页"。

第二个问题：在我成功发布了我的 WCF 项目后，我认为我应该能够在我的 MVC 项目中向该服务添加一个服务引用以使用我的 WCF，但是在我的“添加服务引用”中没有发现任何服务Visual Studio 中的对话框！！

谁能帮帮我吗？我对这些技术（IIS、Web 部署等）一无所知，只知道如何创建我的 Web 应用程序。抱歉，如果我遇到愚蠢但我一直在尝试一些我什至不知道我现在在做什么 3 天的东西。所以我恳求有人牵着我的手，带领我完成我认为应该是一项非常简单的任务。

非常感谢提前！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T15:51:01.923

关于 MVC 应用程序：

顾名思义，MVC 与控制器一起使用。您应该有一个具有方法的控制器，比如说 MainController 和 sayHi() 方法，并且该方法显示您的视图，即 index.cshtml。所以你调用它的方式是：localhost:port/MainController/sayHi（你可能需要在控制器之前添加网站名称，取决于你的配置）

关于 WCF 服务：

在您的网站位置下，您应该有一个 myservice.svc 文件，其中包含以下行：

```
<%@ ServiceHost Language="C#" Debug="true" Service="my.service.namespace.MyService" %> 
```

您的 Web.config 文件应如下所示：

```
<service name="my.service.namespace.MyService"
           behaviorConfiguration="">
    <endpoint
      address="mex"
      binding="mexHttpBinding"
      contract="IMetadataExchange" />
    <endpoint
      contract="my.service.interface.IMyService"
      binding="wsHttpBinding"
      bindingConfiguration="" />
  </service> 
```

请注意，Web.config 中的服务名称应与 myservice.svc 中的相同。

然后调用你需要输入的服务：localhost:port/path/to/servicefile/MyService

因此，如果 myservice.svc 位于 inetpub/www/test/myservice.svc 下，则调用 localhost:port/test/myservice

# c# - 建立与数据库的连接的开销

> ID：11178774
> 
> 赞同：1
> 
> 时间：2012-06-24T15:42:54.997
> 
> 标签：c#, asp.net, sql-server

我想知道连接到数据库的性能。关闭每个查询之间的数据库连接是否可以，或者我应该尝试将其保持打开状态直到完成？打开/关闭连接的速度惩罚高吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-24T15:47:39.120

ADO.NET 将为您“汇集”连接。当你关闭一个连接时，它并没有真正关闭，而是放在一个池中。当使用相同的连接字符串请求新连接时，池中的连接将被重用。池是如此之快，以至于在实践中，打开连接几乎是免费的。

最佳做法是在需要时打开连接，然后在以下情况下立即关闭：

```
using (var db = new SqlConnection(connectionString)) {
    ... retrieve data ...
} 
```

如果你这样编码，你根本不必担心连接寿命。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T15:48:02.807

由于与创建、打开和关闭连接相关的开销（其中一些甚至在使用连接池的情况下），理想情况下，您应该连接一次，检索所有数据，然后关闭并释放连接。您应该确保使用该`using`方法，以免无意间让连接打开的时间过长。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T15:57:26.593

根据我的经验，打开和关闭连接是有好处的，`low volume application`但是`high volume application`打开和关闭连接的成本变得很重要。因此，它完全依赖于上下文。在为大型应用程序工作时，[连接池](http://msdn.microsoft.com/en-us/library/8xx3tyca.aspx)会发挥作用。`ADO.NET`绝对处理连接池。

# c - 从文件中的单词中删除字母 C - 有问题的符号

> ID：11178775
> 
> 赞同：0
> 
> 时间：2012-06-24T15:42:57.917
> 
> 标签：c, file, copy, std, ctype

准确地说，我正在尝试从文件 A 复制到文件 B，每个单词中都没有字母“e”和“t”（the、peter 等），程序运行良好，但在outfile 的结尾我得到了一个奇怪的迹象。

```
Input: What says Lucentio to this shame of ours?
Output: What says  to this shame of ours?˙ 
```

（你能看到角色`˙`吗？）

我不想要它，我不知道那是什么，但它不是 EOF，我试图将其排除在复制之外，但它不起作用。我需要一些帮助。

代码：

```
char signHold[1];

int main(int *argc, char** argv)
{
    FILE* infile;
    FILE* outfile;

    char* string = NULL;
    if(argc != 3)
    {
        printf(stderr,"Error: Improper number of arguments");
        return EXIT_FAILURE;
    }
    remove(argv[2]);
    infile = fopen(argv[1],"r");
    while(feof(infile) == 0)
    {
        string = getWord(infile);
        if(checkDenied(string))
        addToFile(outfile, argv[2], string);

        addToFile(outfile, argv[2], signHold);
    }
    fclose(infile);
    free(string);
    return EXIT_SUCCESS;
}

char* getWord(FILE* ptr)
{
    char* tempString;
    size_t memSize = 0;
    int c;

    tempString = expandRealloc(NULL,sizeof(char));
    while(c = fgetc(ptr))
    {
        if(isalpha(c) != 0)
        {
            tempString = expandRealloc(tempString, (memSize+1)*sizeof(char)+1);
            tempString[memSize] = c;
            memSize++;
        }
        else
        {
            signHold[0] = c;
            break;
        }
    }
    tempString[memSize] = '\0';
    return tempString;
}

short int checkDenied(const char* str)
{
    int i;

    i = strspn("e", str);

    if(i >= 1)
    {
        i = strspn("t", str);
        if(i >= 1)
        {
            return EXIT_SUCCESS;
        }
    }
    return EXIT_FAILURE;
}

short int addToFile(FILE* ptr, char* directory, char* text)
{
    ptr = fopen(directory,"a+");
    fprintf(ptr,"%s", text);
    fclose(ptr);
    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T17:11:47.520

这是状态机。让它使用可变大小的缓冲区留给读者一个练习；-)

```
#include <stdio.h>
#include <stdlib.h>
#include <ctype.h>

int main(int argc, char **argv)
{
    FILE *infile;
    FILE *outfile;

    char buff[100];
    size_t len,idx;
    int ch, state;

    if(argc != 3)
    {
        fprintf(stderr,"Error: Improper number of arguments");
        return EXIT_FAILURE;
    }
    infile = fopen(argv[1],"r");
    outfile = fopen(argv[2],"w");

    len = 0;
    for (state=0; state >= 0; ) {
        ch = fgetc(infile);
        if (isalpha(ch)) {
            if (ch == 'e') state |= 1;
            else if (ch == 't') state |= 2;
            if (state != 3) buff[len++] = ch;
            continue;
        }
    /* no character, this must be the end of a word. */
        if (state != 3) for(idx=0; idx < len; idx++ ) {
            fputc(buff[idx], outfile);
            }
        if (ch == EOF) {state = -1; continue;}
        fputc(ch, outfile);
        len = 0; state = 0;
        }
    fclose(infile);
    fclose(outfile);
    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T18:54:05.290

我相信这是存储在 signHold[1] 中的垃圾内存。您只允许 1 个字符并且不 NUL 终止它。这意味着当你写出问号时，它还会写出它之后第一个'\0'之前的任何内存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T16:07:02.640

首先，您假设在文件末尾`fgetc`返回`0`，但事实并非如此。它返回`EOF`。也许您正在阅读`EOF`，将其分配给一个字符，即`signHold[0]`（这可能导致任何事情，因为`EOF`不适合`char`）

然后您继续打印`signHold`其中包含一个随机字符，后**跟谁知道什么，**因为该字符串不是 NUL 终止的（它的大小是 1 并且它的第一个字符不是 ' `\0'`。也就是说，您正在打印任何可能发生在之后的内容`signHold`.（顺便说一句，这也是未定义的行为）。

# vb.net - Windows api GetClientRect 问题

> ID：11178776
> 
> 赞同：1
> 
> 时间：2012-06-24T15:43:04.823
> 
> 标签：vb.net

我正在使用以下函数和代码来尝试在 vb.net 中获取客户端窗口的大小，我认为我的 Rect 结构没有任何问题。

为什么我会收到此错误：

> 算术运算导致溢出。

你能让这个为我工作吗？

```
Private Declare Function GetClientRect Lib "user32" (ByVal _
    hwnd As IntPtr, ByVal lpRect As Rect) As Boolean

Dim lobbywindow As Long = windowhwnd
Dim lobbyrect As New Rect

GetClientRect(lobbywindow, lobbyrect) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T19:58:39.273

请参阅[pinvoke.net/default.aspx/user32.getclientrect](http://www.pinvoke.net/default.aspx/user32.getclientrect)的 Rect，因为您需要为它声明一个结构。

# javascript - 销毁调用者

> ID：11178778
> 
> 赞同：0
> 
> 时间：2012-06-24T15:43:15.303
> 
> 标签：javascript, c++, v8

A`v8::Handle<v8::Object>`将本机类与它的一些成员打包在一起。这就是它的工作方式：

```
someobj = window.createNewWrappedClassObject();
[object Object] { fn1:[function], fn2:[function] .... destroy:[function] };

someobj.fn1(); [...] // do something with someobj
someobj.destroy();   // when done, call destroy(). now someobj not only would be
                     // inoperable, it would also get set to {} or null or etc. 
```

, `someobj.fn1()`,`someobj.fn2()`是`someobj.destroy()`包装函数。构造函数中的初始化逻辑如下所示：

```
WrappedClass::GetWrappedObject(){
    Local<ObjectTemplate> objectTemplate = ObjectTemplate::New();
    objectTemplate->SetInternalFieldCount(1);
    this->instance = objectTemplate->NewInstance();
    this->instance->SetPointerInInternalField(0, this);
    this->instance->Set(String::New("fn1"), 
        FunctionTemplate::New(Fn1)->GetFunction());
    [...] // so on
} 
```

现在的问题是，当调用`destroy()`我想要做的基本上是强制对该对象的所有引用变为`null`. 所以这就是我的想法：

```
 Handle<Value> WrappedClass::Fn1(const Arguments& args){
    WrappedClass * CurrentInstance = 
        static_cast<WrappedClass *>(args.This()->GetPointerFromInternalField(0));
    CurrentInstance->~WrappedClass();
    CurrentInstance->instance->Clear(); // tricky part right here and
    args.This()->Clear();               // also here on these two lines
    return v8::Null(); 
} 
```

怎么了？什么都没有发生，该函数实际上永远不会返回。我通过不调用来解决这个问题 `->Clear()`，而是`someobj = someobj.destroy();`在 JS 中调用。

但这是有趣的部分。运行多次后，整台电脑都疯了。资源管理器窗口丢失字体，丢失窗口装饰，任务栏中的系统时间消失，开始菜单显示黑色矩形而不是图标。你给它命名。

为什么会这样？我应该如何将调用对象设置为 null 呢？

# javascript - Javascript 下载链接

> ID：11178779
> 
> 赞同：1
> 
> 时间：2012-06-24T15:43:18.073
> 
> 标签：javascript, hyperlink, download, save

有什么方法可以创建下载文件的链接，而无需用户右键单击并选择“将链接文件另存为”？您需要 PHP 来执行此操作还是只能使用 Javascript 执行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T15:50:54.477

这是一些示例，您可以如何使用 JavaScript 执行此操作，但它仅适用于 IE

```
<html>
<head>
<title>xbs_saveas_gt</title>
<script type="text/javascript">
function go_saveas() {
    if (!!window.ActiveXObject) {
        document.execCommand("SaveAs");
    } else if (!!window.netscape) {
        var r=document.createRange();
        r.setStartBefore(document.getElementsByTagName("head")[0]);
        var oscript=r.createContextualFragment('<script id="scriptid" type="application/x-javascript" src="chrome://global/content/contentAreaUtils.js"><\/script>');
        document.body.appendChild(oscript);
        r=null;
        try {
            netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");
            saveDocument(document);
        } catch (e) {
            //no further notice as user explicitly denied the privilege
        } finally {
            var oscript=document.getElementById("scriptid");    //re-defined
            oscript.parentNode.removeChild(oscript);
        }
    }
}
</script>
</head>
<body>
<a href="#" onclick="go_saveas();return false">save the document</a><br />
</body>
</html> 
```

或者您可以`document.print()`将其保存为 PDF 文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T15:47:22.597

标识文件下载的 HTTP 响应标头由服务器发送，因此无法使用 JavaScript 发送。您可能需要一些服务器端代码行来设置正确的标头（如 PHP 的`header()`函数）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T15:52:16.240

您可以使用 php 和 header-function 解决这个问题，如下所示：

```
<?php
$fileToOpen = "document.txt"; // the file that you want to download
header("Content-disposition: attachment; filename=$fileToOpen");
header("text/plain"); // Depending on the file
echo file_get_contents($fileToOpen); 
```

因此，您的链接将直接指向 php 文件而不是文档...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-24T15:54:01.293

简单的PHP：

```
<?php
    header("Content-type: application/octet-stream");
    header("Location:filenamegoeshere.txt");
    header("Pragma: no-cache");
    header("Expires: 0");
?> 
```

# javascript - 快速加载流 - HTML/HTML5/Javascript

> ID：11178780
> 
> 赞同：0
> 
> 时间：2012-06-24T15:43:19.843
> 
> 标签：javascript, performance, html, video, streaming

我可以访问一些直播 URL，所以我正在制作一个 HTML5 应用程序，这样我就可以观看它们，并在需要时切换 URL。我遇到的唯一问题是流加载非常缓慢（播放前超过 10-12 秒）。一旦播放它们就永远不会停止或滞后，因此服务的服务器确实有很好的带宽。我知道可以在 2 秒内加载它们，但是 HTML5 中的视频标签并没有这样做..

我可以加载 3 个视频标签（一个用于下一个流，一个用于上一个流，一个已经在播放，但这不太方便，而且它可能会降低同时运行的 3 个流的互联网连接速度）。

有谁知道如何快速加载流，因此在播放之前它不会缓冲那么多（不需要缓冲超过它的需要，因为它是实时的，所以不可能在流上快进） ? 也许以低质量开始流，以便它可以立即开始播放，然后在缓冲时提高质量？

我不想要任何 Flash 脚本，我只想要 HTML/Javascript。

如果您能提供帮助，那就太棒了！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T20:12:43.853

我最近自己创建了一个直播/网络视频流 html5 应用程序。它使用非常基本的代码。如果我在具有良好带宽的服务器上有一个好的源视频文件，那么加载时间非常短，视频通常在几秒钟内加载。

这是完整的代码 - 它使用 javascript 来允许切换全屏视频，PHP 代码用于表单操作以返回视频 URL：

```
<!DOCTYPE html>
<html>

<script type="text/javascript">
function goFullscreen(id) {
var element = document.getElementById(id);       
if (element.mozRequestFullScreen) {
  element.mozRequestFullScreen();
} else if (element.webkitRequestFullScreen) {
  element.webkitRequestFullScreen();
}  
}
</script>
<body>

<form action="<?php echo $_SERVER['PHP_SELF']; ?>" method="get">
<input type="text" size="100" name="searched" value="<?php echo $_GET['searched']; ?>" /> 
<input type="submit" name="submit" value="Search" />
</form>

<br>
<br>

<video class="video_player" id="player" width="100%" controls="controls" autoplay="autoplay">
<source src="<?php echo $_GET['searched']; ?>"/>
Your browser does not support the HTML5 video tag.  Use a better browser!
</video>

<button onclick="goFullscreen('player'); return false">View Fullscreen!</button>

</body>
</html> 
```

# php - 正确使用MVC在Joomla控制器中展示前端

> ID：11178784
> 
> 赞同：2
> 
> 时间：2012-06-24T15:43:38.687
> 
> 标签：php, model-view-controller, joomla, content-management-system

我正在开发一个 Joomla 组件，我有许多任务要在组件中执行。我目前正在做的是拥有一个视图和对应的控制器。现在，如果用户请求某些任务，我只需在控制器中调用相应的方法。在这个方法本身中，我编写了所有显示给用户的 HTML 代码。一切正常。

我唯一的疑问是，我是否仍然遵循 MVC 模型并且我的组件会被 Joomla 社区接受吗？

**如果这不是正确的方法，请告诉我如何从单个控制器为不同的任务设置不同的视图。视图位于views>name>tmpl>default.php 和view>name>tmpl>sample.php**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T00:47:49.670

这似乎需要一个多部分的答案，所以，

1.  JED“社区”有几个很好的文档可以帮助您提交内容，其中包括[服务条款](http://extensions.joomla.org/tos)、[扩展目录常见问题解答](http://docs.joomla.org/Joomla!_Extension_Directory_FAQs)和关于2010 年底开始的“[增强批准流程](http://community.joomla.org/blogs/community/1339-jed-enhanced-approval-process.html)”的博客条目。

2.  就“社区”而言，处理来自同一控制器的不同视图的“正确”方法可能是确保最终用户/设计师可以使用 Joomla! 的覆盖。因此，您目录中的每个文件`tmpl`都应尽可能仅包含 HTML 和多个文件`<?php echo $this->myVariable; ?>`，并偶尔使用循环来解开一组数据以进行显示。您的控制器不应生成 HTML，如果生成了，则最终用户/设计人员将无法为您的组件创建模板覆盖。

3.  如果您查看标准的 Joomla！2.5 组件 Controllers 和 sub-controller 的排列往往与 view 相匹配，例如，如果你看`com_content`有一个对应的 controller 和 view for `articles`, `article`and `featured`。

4.  话虽如此，根据用户正在执行的操作，对相同的内容进行不同的处理是可以接受的，并且得到支持`tmpl`。这是通过使用[调用 URL 的形式](http://docs.joomla.org/JController_and_its_subclass_usage_overview#Master_Controller)来实现的。例如，我们的一个组件呈现相同的视图，但基于用户权限，他们可能正在查看tmpl 或tmpl 文件。实现这一点的代码非常简单。`view``task`[`controller.task`](http://docs.joomla.org/JController_and_its_subclass_usage_overview#Master_Controller)`edit``run`

例如

```
if($canDo->get('core.edit')) {
    $plan = '<a href="'.JRoute::_( 'index.php?option=com_easystaging&task=plan.edit&id='. $row->id ).'">'.$row->name.'</a>';
} elseif ($canDo->get('easystaging.run')) {
    $plan = '<a href="'.JRoute::_( 'index.php?option=com_easystaging&task=plan.run&id='. $row->id ).'">'.$row->name.'</a>';
} else {
    $plan = $row->name;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T16:59:50.270

最初不打算回答这个问题，但“被 Joomla 社区接受”说服我投入我的两个比特。

恕我直言，典型的 Joomla 用户不是 MVC、PHP 甚至开发方面的专家，所以我首先关心的是让他们“接受”它。我尝试在 Joomla Content 组件等普遍接受的组件以及用户如何与之交互之后对任何组件开发进行建模。当您为文章添加新菜单项时，请注意选项的组织方式 - 存档、单篇、类别、精选等。这是用户理解的组织，因此我相应地组织 MVC

也许不是技术上完美的答案，但归根结底，Joomla CMS 通常适用于非技术用户，所以我通常首先从他们的角度来看，确保我在技术上保持健全。

# php - 无法找出简单 PHP/MySQL“Q&A”数据库中的错误

> ID：11178785
> 
> 赞同：1
> 
> 时间：2012-06-24T15:44:14.370
> 
> 标签：php, mysql

我正在创建一个简单的问题数据库，这里有一些细节可以开始：

首先，我没有使用 PDO - 它是一个旧的 web 应用程序，这个问题与升级到 PDO 无关。

**数据库**

```
CREATE TABLE IF NOT EXISTS `questions` (
  `id` int(11) unsigned NOT NULL auto_increment,
  `question` varchar(255) NOT NULL,
  `userID` int(11) unsigned NOT NULL,
  `active` tinyint(1) NOT NULL default '1',
  PRIMARY KEY  (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=4 ; 
```

**已经在数据库中：**

```
INSERT INTO `apl_questions` (`id`, `question`, `userID`, `active`) VALUES
(1, 'Do you have a dog?', 1, 1),
(2, 'Have you ever been arrested?', 1, 1),
(3, 'Pick yes or no...', 1, 1); 
```

**PHP的**

```
$questionsResult = mysql_query("select * from questions where userID = 1 AND active = 1"); // Get all activated questions
    if(mysql_num_rows($questionsResult) > 0){
        $questions = mysql_fetch_assoc($questionsResult);
        var_dump($questions);
    } 
```

**结果（PHP的）**

```
array(4) { ["id"]=> string(1) "1" ["question"]=> string(18) "Do you have a dog?" ["userID"]=> string(1) "1" ["active"]=> string(1) "1" } 
```

正如你所看到的，这只是抓取第一行 - 当它**应该**抓取所有行时，因为所有 3 行的用户 ID 和“活动”列都是 1。有人在这里看到任何可能导致这个问题的东西吗？如果我将查询放入 PHP MyAdmin，则查询可以正常工作 - 所以我必须在这一点上假设它是 PHP ......这让我大吃一惊！

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T15:47:56.550

似乎 mysql_fetch_assoc 是*行*获取，与*批量*获取相反，这意味着它将在给定数组中每行获取行。

您必须循环，例如在 php 页面中：

```
while ($row = mysql_fetch_assoc($result)) {
   echo $row["userid"];
   echo $row["fullname"];
   echo $row["userstatus"];
} 
```

rgds。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T15:47:43.947

尝试：

```
$questionsResult = mysql_query("select * from questions where userID = 1 AND active = 1"); // //Get all activated questions
if(mysql_num_rows($questionsResult) > 0){
    while($questions = mysql_fetch_assoc($questionsResult)){
      var_dump($questions);
    }
 } 
```

# ruby-on-rails-3 - Capistrano 未能“git ls-remote ...”并“没有返回状态码...”

> ID：11178790
> 
> 赞同：1
> 
> 时间：2012-06-24T15:44:53.723
> 
> 标签：ruby-on-rails-3, git, capistrano

谁能帮我理解这里发生了什么？詹金斯已经完美地工作了一段时间，突然间我一直遇到这个问题。是的，我确实尝试过搜索这个问题，但似乎我是唯一一个遇到过这个问题的人，因为我在任何地方都找不到任何关于它的信息。

请注意，以下一些信息已因隐私问题而更改，但我主要担心的是消息“没有返回状态代码 pid 74937 退出 2”，该消息不断添加到 git ls-remote 命令中。我不知道这是从哪里来的，也不知道这意味着什么。

我应该注意到我可以从我的本地机器上“ **cap deploy** ”就好了。我没有收到任何错误，并且应用程序已部署到远程服务器。

任何信息都会有所帮助，谢谢。

```
* executing `deploy'
* executing `deploy:update'
** transaction: start
* executing `deploy:update_code'
updating the cached checkout on all servers
executing locally: "git ls-remote git@github.com:private/repo.git (no"
sh: -c: line 0: syntax error near unexpected token `('
sh: -c: line 0: `git ls-remote git@github.com:private/repo.git (no'
*** [deploy:update_code] rolling back
* executing "rm -rf /rails_apps/private/releases/20120624130104; true"
servers: ["SERVER_IP"]
[SERVER_IP] executing command
command finished in 529ms
Command git ls-remote git@github.com:private/repo.git (no returned status code pid 74937 exit 2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T16:06:35.727

所以事实证明我忘记了一些我添加到 deploy.rb 以确定部署时我在哪个分支上的代码。好吧，capistrano 显然在寻找当前分支时遇到了问题。我能够通过添加以下内容来解决此问题...

```
def determine_branch
  git_branch = $1 if `git branch` =~ /\* (\S+)\s/m
  if git_branch =~ /no/
    "master"
  else
    git_branch
  end
end 
```

# ios - 如何在完成块中正确使用 renderInContext？

> ID：11178795
> 
> 赞同：0
> 
> 时间：2012-06-24T15:45:58.237
> 
> 标签：ios, uikit, core-animation

我的视图/层层次结构如下所示：

```
CustomUIView  [A]
  |
  +--- UIImageView [B] 
```

首次显示 UI 时，视图 [B] 显示默认图像（游戏板）。

作为对用户事件的反应，我创建了一些`CALayer`对象并将它们作为子层添加到 view`[A]`的支持层。然后我使用它们来渲染动画，在视觉上改变游戏板的部分，因为它们在层次上位于图像视图的顶部。这工作得很好。

动画完成后，我想截取生成的图层状态的屏幕截图，将其设置为新图像，`[B]`然后在游戏中的下一步移动之前丢弃临时子图层。

我的代码如下所示：

```
[CATransaction begin];
[CATransaction setCompletionBlock:^{
    UIImage *snapshot = [self.view snapshot];
    self.snapshotVIew.image = snapshot;
    for (CALayer *tileLayer in tempLayers)
    {
        [tileLayer removeFromSuperlayer];
    }
}];

CAAnimationGroup *animGroup = [CAAnimationGroup animation];
animGroup.animations =@[contentAnimation, zoom];
animGroup.duration = 0.5f;
animGroup.removedOnCompletion = NO;
animGroup.fillMode = kCAFillModeForwards;
for (CALayer* tileLayer in tempLayers)
{
    [tileLayer addAnimation:animGroup forKey:nil];
}
[CATransaction commit]; 
```

我的自定义视图的快照方法非常标准：

```
- (UIImage*) snapshot {
    UIGraphicsBeginImageContextWithOptions(self.bounds.size, YES, [[UIScreen mainScreen] scale]);
    [self.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage* img = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return img;
} 
```

问题似乎是`renderInContext`的文档说：

> 将接收器及其子层渲染到指定的上下文中。此方法直接从层树渲染，*忽略添加到渲染树的任何动画*。

由于最后一个突出显示的句子，一旦层被删除，一切看起来都和以前一样。显然，当完成块运行时，图层树似乎没有更新完成动画状态，所以我的截图没有考虑到这一点。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T18:23:17.767

尝试渲染图层的presentationLayer：

```
[self.layer.presentationLayer renderInContext:UIGraphicsGetCurrentContext()]; 
```

或者，不要使用 removedOnCompletion = NO，而是在添加动画后将图层的属性设置为其最终状态。然后当动画完成时，图层将反映更改后的外观，您可以渲染正常图层。

# java - Pootle，如何禁用自动翻译建议

> ID：11178799
> 
> 赞同：0
> 
> 时间：2012-06-24T15:47:03.417
> 
> 标签：java, translation, pootle

我正在使用 Pootle 作为大型项目的本地化软件。我的问题是，每次我们更改某些内容时，有些单词会自动翻译成错误的文本。

就像我们有文本一样：Ping、Chat、Bet.... 这些都是新文本，Pootle 会自动将其翻译成所有语言，当然这是完全错误的方式。如何禁用这种疯狂的翻译？我不希望任何愚蠢的软件翻译，甚至向高薪人工翻译建议错误的文本。

我们今天尝试创建新项目，并且我们导入了所有语言翻译。在导出文件中现在可以了，但是当翻译者要翻译时，它显示他这个错误的自动翻译文本并且在评论框中显示--> 翻译者评论：75％。

现在的问题是，翻译者只需更改 1 个单词，然后单击导出。和 wualaa.... 所有文本都会自动损坏。

请帮帮我，哪个愚蠢的工具在做这样的想法？如何永久禁用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T15:34:52.640

您可能想在 freenode 上尝试 irc://irc.freenode.net/#pootle 直接与用户和开发人员交谈。

听起来像您使用 Pootle 直接翻译 .properties 文件。翻译者评论似乎与在旧翻译迁移到新翻译时进行模糊匹配的代码有关。所以 75% 意味着两个来源之间有 75% 的匹配，然后重复使用翻译的文本。但是由于 .properties 没有模糊状态的概念，我的猜测是你得到了翻译（请检查是这样的，并且它们实际上并没有在 UI 中显示为模糊）。

我更喜欢使用 Pootle 上的 PO 文件来完成我们所有的 .properties 工作。所以我使用 Translate Toolkit 中的 prop2po，然后在 Pootle 上发布 PO 文件。我发现这让我可以更好地控制翻译状态（PO 有翻译和模糊的概念，而 .properties 没有这些概念）。

# python - 从 ZODB 腌制我的字典，但我的字典尺寸较小？

> ID：11178814
> 
> 赞同：1
> 
> 时间：2012-06-24T15:48:59.923
> 
> 标签：python, pickle

我使用 ZODB，我想将我的`'database_1.fs'`文件复制到另一个`'database_2.fs'`，所以我打开了它的根字典，`'database_1.fs'`然后我 ( `pickle.dump`) 将它放在一个文本文件中。

然后我`pickle.load`将它（ ）放在一个字典变量中，最后我用字典变量更新另一个的根字典`'database_2.fs'`。

它有效，但我想知道为什么 the 的大小`'database_1.fs'`不等于 other 的大小`'database_2.fs'`。

它们仍然是彼此的副本。

```
def openstorage(store):             #opens the database
    data={}
    data['file']=filestorage
    data['db']=DB(data['file'])
    data['conn']=data['db'].open()
    data['root']=data['conn'].root()
    return data

def getroot(dicty):
    return dicty['root']

def closestorage(dicty):              #close the database after Saving
    transaction.commit()
    dicty['file'].close()
    dicty['db'].close()
    dicty['conn'].close()
    transaction.get().abort() 
```

那就是我要做的：-

```
import pickle

loc1='G:\\database_1.fs'
op1=openstorage(loc1)
root1=getroot(op1)

loc2='G:database_2.fs'
op2=openstorage(loc2)
root2=getroot(op2)

>>> len(root1)
215
>>> len(root2)
0

pickle.dump( root1, open( "save.txt", "wb" ))
item=pickle.load( open( "save.txt", "rb" ) )          #now item is a dictionary

root2.update(item)

closestorage(op1)
closestorage(op2)

#after I open both of the databases
#I get the same keys in both databases
#But `database_2.fs`  is smaller that `database_2.fs` in size I mean.

>>> len(root2)==len(root1)==215      #they have the same keys 
True 
```

笔记：

(1) 原文中有持久化的字典和列表`database_1.fs`

(2) 两者具有相同的长度和相同的索引。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T03:13:30.507

谷歌搜索后，我发现 any `data.fs`made by`ZODB`实际上存储了一些关于您的旧对象副本的信息，从而允许 ZODB 提供对象撤消功能以及多版本并发控制。所以为了解决这种行为，您实际上可以使用该`pack`方法。打包存储意味着删除未使用的对象修订。

不管怎么说，还是要谢谢你

# android - 无法构建：未从 SDK 文件夹加载文件 dx.jar

> ID：11178815
> 
> 赞同：8
> 
> 时间：2012-06-24T15:49:06.770
> 
> 标签：android, sdk, build, jar, dx

我注意到在我的 Eclipse 程序的“控制台”框中，它说“C:\Program Files\Android\android-sdk\platform-tools\lib”，所以它有 2 个反斜杠 \platform-tools\lib，这个是由于我的安装不完整引起的，所以它找不到“dx.jar”所以当我去导出和编译项目应用程序时，我现在得到这个无法构建的错误：文件 dx.jar 没有从SDK文件夹！

我已经尝试从 sdk manager 中删除并重新安装 sdk 工具，但我仍然遇到同样的问题。请问有人可以帮忙吗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T20:57:02.747

尝试使用特权模式更新 SDK Manager。我遇到了同样的问题，正在解决它更新 SDK 工具并重新启动 Eclipse。

# javascript - Backbone.js 我们可以没有任何 tagName 吗？

> ID：11178816
> 
> 赞同：4
> 
> 时间：2012-06-24T15:49:12.060
> 
> 标签：javascript, jquery, backbone.js, underscore.js

我刚开始使用backbone.js，我注意到的一件事是有时我不希望任何`tagName`包含/封装我的视图的模板代码。如果我把它留在`''`or ，我会在我的代码中变得`'span'`不必要。`div``span`

我发现的替代方法是从我的模板中删除包含标签（`<div class="photo_box">`在我的示例中如下所示），并将其用作`tagName`我的视图。大多数时候，这个标签将包含一个类 ( `.photo_box`)，我仍然需要执行一个`addClass`to (this.el)。我真的不喜欢分散我的模板代码。

还有其他方法吗？

**JS**

```
// Views
PhotoListView = Backbone.View.extend({
    tagName: 'span',

    render: function() {
        _.each(this.model.models, function(photo) {
            $(this.el).append(new PhotoListItemView({ model: photo }).render().el);
        }, this);
        return this;
    }
});

PhotoListItemView = Backbone.View.extend({
    tagName: 'span',

    template: _.template($('#tpl-PhotoListItemView').html()),

    render: function() {
        $(this.el).html(this.template( this.model.toJSON() ));
        return this;
    }

}); 
```

**HTML**

```
<!-- Templates -->
<script type="text/template" id="tpl-PhotoListItemView">
                <div class="photo_box">
                    <div class="photo_container">
                        <img src="img/profiling/<%= photo_id %>.jpg" class='photo' />
                    </div>
                </div>
</script> 
```

**结果**

```
<div id="photo_list">
    <span>
        <span>
                    <div class="photo_box">
                        <div class="photo_container">
                            <img src="img/profiling/f_001.jpg" class="photo">
                        </div>
                    </div>
        </span>
        <span>
                    <div class="photo_box">
                        <div class="photo_container">
                            <img src="img/profiling/f_002.jpg" class="photo">
                        </div>
                    </div>
        </span>
    </span>
</div> 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-24T16:04:20.210

你总是可以使用[`setElement`](http://backbonejs.org/#View-setElement)：

> **设置元素** `view.setElement(element)`
> 
> 如果您想将 Backbone 视图应用到不同的 DOM 元素，请使用**setElement**，它还将创建缓存`$el`引用并将视图的委托事件从旧元素移动到新元素。

并完全忘记`tagName`：

```
PhotoListItemView = Backbone.View.extend({
    template: _.template($('#tpl-PhotoListItemView').html()),
    render: function() {
        this.setElement(this.template(this.model.toJSON()));
        return this;
    }
}); 
```

演示：http: [//jsfiddle.net/ambiguous/XWEMg/](http://jsfiddle.net/ambiguous/XWEMg/)

* * *

顺便说一句，由于其[允许的内容](http://www.w3.org/TR/html-markup/terminology.html#phrasing-content)[`<span>`](http://www.w3.org/TR/html-markup/span.html)有限，对于容器（甚至是临时容器）来说是一个糟糕的选择；如果您开始将任意 HTML 放入. A是一个更安全的选择，因为它几乎可以容纳任何东西。`<span>`[`<div>`](http://www.w3.org/TR/html-markup/div.html)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-24T16:03:25.197

您不需要手动添加类名。您可以使用该`className`属性：

```
PhotoListItemView = Backbone.View.extend({
    tagName: 'span',
    className: 'photo_box', 
```

* * *

顺便说一句，我推荐这种 HTML 结构：

```
<ul id="photo_list">
    <li>
        <img src="img/profiling/f_001.jpg" class="photo">
    </li>
    <li>
        <img src="img/profiling/f_003.jpg" class="photo">
    </li>
</ul> 
```

# ios - 同时从 iOS 应用上传数据

> ID：11178818
> 
> 赞同：1
> 
> 时间：2012-06-24T15:49:17.863
> 
> 标签：ios, multithreading, background-process

我需要将文件上传到 iOS 应用程序中的服务器。我希望在应用程序运行时发生这种情况，但是以并发方式（在单独的线程上），因此上传对应用程序的用户是不可见的。

在“背景”中运行任何东西似乎都很复杂，所以我想确保我的问题是正确的。我想知道的是：

1）当应用程序在前台时，我可以有一个“后台线程”，其中包含一个计时器，当数据可用时将数据上传到服务器？

2）如果是这样，当用户将另一个应用程序带到前台时，上传任务会发生什么？

3）如果是这样，实现这种并发的最佳实践是什么？冷下来，线程将是我首先考虑的事情，但可能有更好、更简单的方法来实现这一点。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T16:07:17.000

答案是 Grand Central Dispatch 或 Operation Queues。有关更多详细信息，请参阅[并发编程指南](https://developer.apple.com/library/ios/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/Introduction/Introduction.html)。

1）通过使用调度队列或操作队列，您无需担心有计时器或轮询数据。系统处理所有这些细节。当您获得要上传的数据时，您创建一个简单的上传任务，将该任务发送到队列，队列负责所有调度。

2) 队列将被暂停。当您的应用程序恢复时，队列也将恢复。您的任务必须能够处理可达性问题和网络超时。此外，您必须记住，您的应用程序可能随时被终止。在进入后台之前保存状态。

3）不要使用线程；使用队列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T15:59:29.777

> 1）当应用程序在前台时，我可以有一个“后台线程”，其中包含一个计时器，当数据可用时将数据上传到服务器？

是的，可以创建一个后台工作线程，在数据可用时启动

> 2）如果是这样，当用户将另一个应用程序带到前台时，上传任务会发生什么？

这取决于，请阅读此以获取更多信息

*   [在 iOS 多任务处理中进入后台时线程的行为](https://stackoverflow.com/questions/4762232/behaviour-of-threads-when-entering-background-in-ios-multitasking/4762772#4762772)
*   [应用未激活时 iOS 后台下载](https://stackoverflow.com/questions/8861390/ios-background-downloads-when-the-app-is-not-active)

> 3）如果是这样，实现这种并发的最佳实践是什么？冷下来，线程将是我首先考虑的事情，但可能有更好、更简单的方法来实现这一点。

正如您所说，最好的方法是使用 NSThread 和线程机制

# tracking - 在 Facebook Insights 上，如果启用了经过身份验证的推荐，“总推荐”是什么意思？

> ID：11178820
> 
> 赞同：1
> 
> 时间：2012-06-24T15:49:25.007
> 
> 标签：tracking, facebook-opengraph, facebook-insights

当经过身份验证的推荐打开时，在 Facebook Insights -> Open Graph -> Overview 上，“总推荐”是指点击还是指用户也接受 oAuth 对话框？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T11:56:19.557

这基本上意味着有多少用户点击了在 Facebook 上共享的链接。它不是通过推荐的总安装量的指标。

# javascript - 从 Windows 8 Metro 中的 People App 检索联系人缩略图

> ID：11178822
> 
> 赞同：1
> 
> 时间：2012-06-24T15:49:46.200
> 
> 标签：javascript, windows, contacts, thumbnails, microsoft-metro

我使用以下代码从我的 Metro 应用程序中的人员应用程序中检索联系人姓名：

```
 function selectContact() {

    var picker = Windows.ApplicationModel.Contacts.ContactPicker();
    picker.commitButtonText = "Select";
    picker.selectionMode = Windows.ApplicationModel.Contacts.ContactSelectionMode.contacts;
            picker.pickMultipleContactsAsync().done(function (contacts) {
        if(contacts.length>0){
            var j =document.getElementById("contactlist");
            contacts.forEach(function (contact) {
                j.innerHTML += contact.name + "<br>";
            });
} 
```

现在，我需要检索联系人缩略图并将其添加到我的应用程序中。联系人有一个 getThumbnailAsync() 方法，但我不知道如何使用它...我使用了下面的代码，但 thumbnail.size 始终为零：

```
 contacts.forEach(function (contact) {
        contact.getThumbnailAsync().done(function (thumbnail) {
            if (thumbnail.size > 0) {
                var imageBlob = window.URL.createObjectURL(thumbnail,false);
                document.getElementById("contactlist").innerHTML += "<img id=" + i + " /><br>";
                document.getElementById(i).src = imageBlob;
                i++;
            }

        });
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T02:00:22.093

你的代码对我来说看起来不错。我会检查您的用户帐户是否允许应用程序使用您的图像。您可以在 PC 设置中指定：

![在此处输入图像描述](../Images/54fee4cc48defd0e75d4920b041c20d5.png)

可能只是您不允许这样做，因此该方法始终为图像返回 0 长度。

**编辑：**抱歉，我刚刚重新阅读了您的问题，并看到您在谈论 People 应用程序。抱歉，我不确定，但我会在此处留下此答案，以防其他人在尝试访问已登录用户的帐户图片时偶然发现此问题。

# workflow - 如何在我的 Salesforce 站点上启用工作流和批准？

> ID：11178825
> 
> 赞同：0
> 
> 时间：2012-06-24T15:50:01.410
> 
> 标签：workflow, salesforce

我正在尝试将工作流添加到我的 Salesforce 应用程序并按照 Cookbook 教程进行操作，我发现菜单中的“创建”下应该有一个标题为“工作流和批准”的选项，但我没有此选项。我能做些什么？我读到必须启用工作流，但我找不到在哪里执行此操作。

有经验的人吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T23:19:53.270

[并非所有版本的 Salesforce 都有可用的工作流程，您需要 Enterprise 或 Unlimited](http://www.salesforce.com/crm/editions-pricing.jsp?d=70130000000rynQ&internal=true) — 您使用的是哪个版本？如果您使用的是开发人员组织，则应该没有问题，因为它拥有一切可供您使用的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-03T13:24:18.980

工作流规则仅适用于那些拥有支持工作流的正确版本的销售人员。作为一家拥有 20 个用户许可证的小型企业，对于我们来说，实施更昂贵的 salesforce 版本来支持工作流程（每人每月增加约 100 美元）并不是很划算。

# jquery - 将一些元素添加到列表中但在段落之前

> ID：11178826
> 
> 赞同：0
> 
> 时间：2012-06-24T15:50:01.743
> 
> 标签：jquery, append

我有这样的结构。

```
<ul class="gallerylist">
<li>
    <image ...>
    <input ...>
</li>
<li>
    <image ...>
    <input ...>
</li>
<li>
    <image ...>
    <input ...>
</li>
<p style="clear:both;">&nbsp;</p>
</ul> 
```

由于视觉校正，我必须使用`<p style="clear:both;">&nbsp;</p>`部分，并且我正在通过 JQuery 动态添加新的列表项：

```
$('ul.gallerylist').append('<li><img .../><br/><input .../></li>'); 
```

但正如您可以猜到的那样，它被附加在`<p style="clear:both;">&nbsp;</p>`零件之后，它会破坏视觉校正。

**我的问题是：**`p`在 ul 中添加 li 作为最后但在标签之前的哪种方式是正确的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T15:50:55.210

### 笔记

我认为您的 HTML 标记无效，不能像您所做的那样放置`p`在其中。`ul`最好将其包装`p`在另一个中`li`并用于`CSS`完成您的工作。

例如：

***HTML***

```
<ul class="gallerylist">
    <li>
        <img src="">
        <input type="text">
    </li>
    <li>
        <img src="">
        <input type="text">
    </li>
    <li>
        <img src="">
        <input type="text">
    </li>
    <!-- wrap within li and assign a class to that li-->
    <li class="makeclear">
            <p>&nbsp;</p>
    </li>
</ul> 
```

***CSS***

```
/* apply css to that li*/
.makeclear{
    clear:both;
} 
```

***jQuery***

```
$('ul.gallerylist li.makeclear')
         .before('<li><img src=""/><br/><input type="text"/></li>'); 
```

**[演示](http://jsfiddle.net/QStkd/399/)**

阅读[.before()](http://api.jquery.com/before/)，它将通过选择器在匹配元素之前插入一个元素。

**或者**

```
$('<li><img src=""/><br/><input type="text"/></li>')
                   .insertBefore('ul.gallerylist li.makeclear'); 
```

**[演示](http://jsfiddle.net/QStkd/398/)**

阅读 jQuery [.insertBefore()](http://api.jquery.com/insertBefore)

***但是，有效的标记是必要的，否则 IE 会让你发疯。下面的评论可以给你一些线索。***

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T15:56:53.477

`P`标签不是一个有效的孩子，`UL`所以你的 html 是无效的

您需要将您的更改 `P`为`LI`您可以出于样式目的给它一个不同的类

现在您将需要在 last 之前插入`LI`

```
 $('ul.gallerylist li:last').before('<li><img .../><br/><input .../></li>'); 
```

# android - 将 android 小部件移动到托盘

> ID：11178830
> 
> 赞同：1
> 
> 时间：2012-06-24T15:50:10.787
> 
> 标签：android, android-widget, widget, android-4.0-ice-cream-sandwich, tray

一些默认小部件（如“直接联系拨号”）可移动到收藏夹托盘 [1]。如何创建这样一个可移动到收藏夹托盘的小部件？

[1] [http://developer.android.com/design/get-started/ui-overview.html](http://developer.android.com/design/get-started/ui-overview.html)

最好的祝福。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T20:57:25.310

这些是捷径。您可以通过[`ACTION_CREATE_SHORTCUT`](https://developer.android.com/reference/android/content/Intent.html#ACTION_CREATE_SHORTCUT)处理`AndroidManifest.xml`. 处理此操作的 Activity 应该提供一些内容，以允许用户选择应用程序中的哪个项目来创建快捷方式。

# regex - 正则表达式不适用于段落标签

> ID：11178831
> 
> 赞同：-3
> 
> 时间：2012-06-24T15:50:20.687
> 
> 标签：regex, pcre

我正在尝试修复一些 HTML，它运行良好。但有一件事是给我带来麻烦；特别是打开和关闭`<p></p>`标签。我需要解决两种情况：a）删除`<p> </p>`序列。b) 删除段落中的结束和开始空格。我正在这样做：

```
preg_replace("#<p>\s*</p>#","",$str);
preg_replace("#\s?(</?p>)\s?#", '$1', $str); 
```

但两者都没有取代任何东西。我做错了什么，不完全正确？

**编辑**：原始代码

```
$source=preg_replace("#\s?(</?p>)\s?#", '$1', $source); //Replace possible innecessary blank spaces
return preg_replace("#<p>\s*</p>#","",$source); //Delete all posible empty pharagraphs 
```

谢谢 :D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T05:50:56.123

```
$source = preg_replace('#<p>\s*</p>|(?<=<p>)\s+|\s+(?=</p>)#', '', $source); 
```

使用单引号以获得更清晰的反斜杠。你的意思是 \s 还是 \\s？幸运的是，在这种情况下，这并不重要。

上面的 PCRE 将删除 <p> </p> 标签之间只有空格（或没有空格），<p> 之后的空格和 </p> 之前的空格。不过，我不明白为什么您的原始代码不起作用。您应该在任何 <p> 或 </p> 标记之前或之后删除一个空格（即`" </p> "`会变成`"</p>"`.

如果您仍然遇到问题，则需要发布更多代码。您是否正确传递了变量等？尝试为您的问题编写一个最小案例并发布整个程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T15:58:52.960

第二个正则表达式将不起作用，因为`</p>`不再存在，您需要先运行它。为什么你需要正则表达式来删除空格，你可以使用修剪

```
$str = trim(preg_replace("#<p>(.*)</p>#Us", "$1", $str)); 
```

但是您可能不应该使用正则表达式来解析 html，因为 stackoverflow 上提到了很多次。

编辑：

```
preg_replace("/\s*<\/?p>\s*/", "", $str); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T15:56:40.300

您需要将其分配回`$str`：

```
$str = preg_replace ($pattern, $replacement, $str); 
```

确保您没有处理一些特殊类型的空白。如果是这样，则使用复杂模式：

```
$pattern = '/<p>(&nbsp;|[\s\p{Z}\p{C}\x85\xA0\x{0085}\x{00A0}\x{FFFD}]+)*<\/p>/iu'; 
```

要删除段落中的开始和结束空格，请使用模式：

```
$pattern = '/(?<=<p>)(&nbsp;|[\s\p{Z}\p{C}\x85\xA0\x{0085}\x{00A0}\x{FFFD}]+)*/iu';
$pattern = '/(&nbsp;|[\s\p{Z}\p{C}\x85\xA0\x{0085}\x{00A0}\x{FFFD}]+)*(?=<\/p>)/iu'; 
```

# entity-framework - UI 设计模式

> ID：11178832
> 
> 赞同：1
> 
> 时间：2012-06-24T15:50:39.060
> 
> 标签：entity-framework, model-view-controller, design-patterns

我一直在阅读 MVP、MVVM 并在几个实践项目中使用过 asp.net MVC。这些模式大多被称为 UI 模式，这让我有点困惑，因为我曾经认为只有 Views（在 MVC 中）是 UI，而 Model 是数据访问层 + BLL。我的问题是，如果我使用实体框架（edmx）作为我的模型，为什么我需要有一个单独的数据访问层（DAL）以及这个数据访问层在这种情况下实际上会做什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T16:00:36.087

MVC 和其他模式被认为是 UI/表示模式，因为它们的主要任务是接受来自外部源的请求并显示结果。这些模式的 M 部分通常是指用作帮助填充视图的 DTO（数据传输对象）的简单模型（也称为视图模型）。

业务逻辑，如果它比 CRUD 操作更密集，通常与此分离。这允许不同类型的前端应用程序（这里是 MVC 站点，那里是实际的手机/平板电脑应用程序）以不同的方式与数据交互。

换句话说，MVC 之类的东西实际上只是实际做事的业务逻辑之上的一个皮肤。

您需要问自己将 EF 部分与项目的其余部分分开是否有意义。如果您对数据进行的不仅仅是 CRUD 操作，我会说是的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T16:07:12.697

您不需要明确需要单独的 DAL，因为 EF 同时是您的数据访问层和模型。如果您将 POCO 用于您的模型，则需要一个层来处理这些对象的持久性。因此，如果您使用 NH 作为 OR/M，那么您的模型仅由 POCO 对象组成，而 NH 是您的 DAL。通常 NH 隐藏在单独的层中，但这并不是必需的。如果涉及 GUI，您的实体不会直接用于绑定等。MVVM 为其引入了 ViewModel，它充当 GUI 和域模型之间的层，并提供模型所需的所有数据图形用户界面。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T16:46:33.397

实际上，视图和控制器都处理 UI。基本上，除了模型层之外的所有东西都是针对 UI 的，并且是关于 UI 的。你必须明白，像 REST API 这样的东西也只是一种不同的用户界面。

至于您的研究，我建议您更仔细地研究 Model2 MVC 和 HMVC 作为模式。前者是最接近经典 MVC 的东西，你可以为 web 做。后者有非常有趣的用例并解决了可重用性问题（并且在分布式系统中也有一些潜力）。

**现在主要问题。**

您将域业务逻辑（在域对象中）与数据访问逻辑（在数据映射器中）分开，因为您获得了以下功能：

*   代码解耦，关注点分离
*   独立进行单元测试的能力

基本上，这让您拥有代码库，其中添加特定更改（如添加缓存或模型级别授权检查）不需要您重写整个代码库。

存储机制本身也变得更加灵活。您可以轻松更改特定域对象的数据的存储位置。例如，您可以将用户详细信息和身份验证移动到 noSQL 数据库。这不会对您的业务逻辑的工作方式产生任何影响。当您在较大的团队中工作或维护旧代码时，这将成为一个关键问题，因为很难掌握整个系统并保持这些知识是最新的。

**至于数据访问层的作用**：它获取域对象（包含域业务逻辑的事物）并从中存储数据或将信息检索到数据源层中。

另外，我建议研究/观看：

*   [坚实的原则](http://en.wikipedia.org/wiki/SOLID_(object-oriented_design))
*   [单元测试](http://www.youtube.com/watch?v=wEhu57pih5w&feature=relmfu)（我建议观看 Clean Code Talks 的所有讲座）

> [**免责声明：**我的主要语言是 PHP，并且只对 web 上下文中的 MVC 相关模式有经验（主要是使用它的 Model2 变体，因为 web 本身的明显局限性），这塑造[了我对](https://stackoverflow.com/a/5864000/727208)MVC 结构的理解。]

# git - 与本地 Github 存储库的远程服务器同步

> ID：11178833
> 
> 赞同：-3
> 
> 时间：2012-06-24T15:50:50.990
> 
> 标签：git, github, sync, local

我一直在与来自一个主存储库（一个主存储库）的另外 3 人一起工作，我们都在一个开发服务器上工作。在测试代​​码时，我们遇到的主要问题是本地到远程同步。我使用 NetBeans 作为编辑器，NetBeans 有很好的同步工具，但有时会有点生气并且不能很好地同步，所以我在谷歌上搜索了一些 rsync 脚本，这些脚本会将代码从我的本地存储库同步到远程服务器。

基本上，我需要一些 sh ​​脚本来确定更改了什么文件并将该文件推送到服务器，在测试时，如果服务器上一切正常，我会将更改推送到我的 GitHub 存储库。我找到了一些 lftp 脚本和 rsync 脚本，但是因为我也不知道 sh，所以没有用。所以，每一个帮助都是感激的。

感谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T02:52:55.223

您可以在远程服务器上设置 git，为服务器添加远程，然后提交并推送到该服务器。如果使用正确，rsync 也应该可以工作。

# google-apps-script - 如何知道哪个 UI 元素是焦点

> ID：11178836
> 
> 赞同：1
> 
> 时间：2012-06-24T15:50:55.520
> 
> 标签：google-apps-script

我有一个文本框的事件处理函数，它执行以下操作，

*   搜索用户的联系人并显示与文本框模式匹配的联系人

应该对另外两个文本框执行相同的功能。

由于文本框的值是使用“e.parameter.textbox1NAME”获得的，因此我添加了另外两个函数作为事件处理程序，

```
textbox2.addKeyUpHandler('search2');
textbox3.addKeyUpHandler('search3'); 
```

此外

```
textbox1.addKeyUpHandler('search1'); 
```

这三个函数之间的唯一区别是使用的模式是“e.parameter.textbox1NAME”还是“e.parameter.textbox2NAME”或“e.parameter.textbox3NAME”

我认为这是低效的，有没有办法知道哪个元素调用了处理程序或者哪个元素是焦点？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T16:56:03.397

您可以使用单个函数并找出从 e.parameter.source 编辑的文本框。例如

```
function onKeyUp(e){
  // Make sure the ID and the name of the widgets are the same.
  var src = e.parameter.source;
  var newValue = e.parameter[src]; 
  // Next steps
} 
```

由于您的大多数问题都是相当基本的，因此我建议您在在这里提出问题之前先对 stackoverflow、问题跟踪器和旧的 Google Apps 脚本论坛进行一些研究。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T16:10:48.973

如果我理解正确，它类似于：我有 1-n 个盒子，并且想要将特定事件的处理程序绑定到它。解决方案（使用 jquery）是对 dom 对象（框）使用选择器并附加一个处理程序，例如单击所有对象，如下所示：

```
$('.textboxes').click(function(e){
    console.log(e.currentTarge) // <-- Here current Target is your DOM Object.
}) 
```

此外 this 引用绑定到函数副本，因此它与对象的上下文一起执行。查看以下站点的示例： [jquery click event](http://api.jquery.com/click/)或 [jquery bind function](http://api.jquery.com/bind/)

干杯悠闲

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T17:48:20.837

斯里克的回答很聪明！我喜欢它并想试一试......这里有一个例子来说明！

```
function multitext_test() {
  var app = UiApp.createApplication().setHeight('150').setWidth('200');
  app.setTitle("test these textboxes");
  var panel = app.createFlowPanel();
  var txt1 = app.createTextBox().setName('txt1').setId('txt1');
  var txt2 = app.createTextBox().setName('txt2').setId('txt2');
  var txt3 = app.createTextBox().setName('txt3').setId('txt3');
  var label = app.createLabel('type in any of these textBoxes').setId('label')
  app.add(panel.add(txt1).add(txt2).add(txt3).add(label));
  var QHandler = app.createServerHandler("key").addCallbackElement(panel);
  txt1.addKeyUpHandler(QHandler);
  txt2.addKeyUpHandler(QHandler);
  txt3.addKeyUpHandler(QHandler);
//  
  var doc = SpreadsheetApp.getActive();
  doc.show(app);
}
//
function key(e){
  var app = UiApp.getActiveApplication();
  var src = e.parameter.source;
  var newValue = e.parameter[src]; 
  var act= app.getElementById(src)
  label = app.getElementById('label')
  label.setText("You typed '"+newValue+"' in textBox nr "+src.substring(3));
  act.setStyleAttribute('background','yellow');
  return app
} 
```

# sql - SQL Server 配置管理器 2012

> ID：11178839
> 
> 赞同：2
> 
> 时间：2012-06-24T15:51:05.107
> 
> 标签：sql, sql-server, sql-server-2012

我已经安装了 Microsoft® SQL Server® 2012 Express，但是我找不到 SQL Server Services 来运行它，所以我可以连接到 SQL Server ![SQL Server 配置管理器 2012](../Images/5eddf68dcab4ae20419141a2f691aa90.png)，我该如何添加它，以便我可以运行它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T15:56:34.457

在您的屏幕截图中，SSCM 正在本地计算机 ( `localhost`) 上查找 SQL Server 服务。存在以下两个问题之一：

1.  您还没有像您认为的那样在该本地计算机上安装 SQL Server
2.  或者您在与实际安装的 SQL Server 实例不同的计算机上

您也可能在管理单元中看不到任何 SQL Server 服务`services.msc`。验证您的安装。如果您打算在运行 SSCM 的计算机上安装 SQL Server，则需要重新运行安装并确保选择了数据库引擎以安装要安装的功能。您可以只选择管理工具。

# android - AndroidAnnotations：如何更改布局？

> ID：11178841
> 
> 赞同：0
> 
> 时间：2012-06-24T15:51:20.903
> 
> 标签：android, android-layout, android-activity, android-annotations

我的活动中有登录和游戏布局。我会在我的项目中使用 AndroidAnnotations，因为这很酷！但我不知道，如何正确地将登录布局更改为游戏布局。

登录布局的初始化我会用注释来做：

```
@EActivity(R.layout.login)
public class MyActivity extends Activity { 
```

这可能是改变活动内部布局的失败方法吗？什么是干净的方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T16:06:49.197

不......这就是预期使用android注释的方式。如果这就是您要问的，那么您没有语法错误。

除了将您引导至安装页面外，我能做的不多，可以在下面找到。

## [Eclipse 项目配置](https://github.com/excilys/androidannotations/wiki/Eclipse-Project-Configuration)

* * *

只需使用两个单独`Activity`的 s 来登录和游戏。当用户登录时，您将启动新的游戏活动，

```
startActivity(this, GameActivity.class); 
```

这远比留在当前活动中并简单地交换布局进出更可取。一项活动应该专注于您试图实现的特定方面。游戏和登录在功能上完全不同，因此将它们的功能分成单独的活动绝对是有意义的。

# c++ - 如何在 C++ 中获得特定的序列

> ID：11178842
> 
> 赞同：0
> 
> 时间：2012-06-24T15:51:33.663
> 
> 标签：c++, sequence

如何获得 C++ 中特定的序列？

我需要顺序：1,2,2,2,3,4,4,4,5,6,6,6,7,8,8,8

和 1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8

和 1,1,0,0,1,1,0,0,1,1,0,0

使用计数器 1,2,3,4,5,6,7,...

```
#include <iostream>
using namespace std;
int main()
{
    int n, i, seq;
    cin >> n;
    for (i = 0; i < n; i++)
    {
        ........
    }
    cout << seq << endl;
    return 0;
} 
```

我需要结果：

1,2,2,2,3,4,4,4,5,6,6,6,7,8,8,8

和

1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8

和

1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T15:54:23.980

分解`i`成`i / 4`and `i % 4`，从那里它应该很容易。

# android - 是否可以为 android 构建可以从 adb shell 执行的 CLI 应用程序？

> ID：11178844
> 
> 赞同：0
> 
> 时间：2012-06-24T15:51:53.087
> 
> 标签：android, shell, command-line-interface, adb

只是想知道是否可以构建可以从 adb shell 运行的 CLI 应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T16:08:24.763

目前这是可能的，尽管没有官方支持/鼓励。

最简单的方法可能是设置一个项目目录，并在其中设置一个带有 Android.mk 和 C 源代码的 jni 文件夹 - 使用 hello-jni ndk 示例作为指南。

然后将 Android.mk 中的 BUILD_SHARED_LIBRARY 更改为 BUILD_EXECTUABLE 并正常从父项目目录运行 ndk-build。

您可能还可以使用 ndk 独立工具链生成功能，或者过去有时有各种非官方的包装系统使 ndk gcc 更易于（ab）使用。

没有多余的地方可以将可执行文件放在安全设备上。由于可执行位的挂载级别阻塞，SD 卡已失效。从大约 Android 2.2 开始，目录 /data/local 可由 adb shell 用户写入，在早期版本中，有一个 /sqlite_stmt_journals 目录，人们经常滥用这些目录进行测试。

另一种可能性是使用 APK 在其私有存储中部署可执行文件并使它们在世界范围内可读和可执行（可能需要 jni 调用 chmod() 来为其他人设置执行位，或者我想你可以执行 chmod shell效用）。缺点是 shell 必须使用长 /data/data/some.package.name 路径，其中中间 /data 文件夹不可浏览！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T16:12:56.690

是的，使用 C 的 Android NDK 是可能的。您*可能*需要 root 才能将二进制文件存储在某个地方以执行，请注意，它不会从 sdcard 中运行，通常 /data/local/tmp 是其中之一去提醒。当您将二进制文件推送到上述位置时，您必须在二进制文件本身上设置权限的执行位才能运行它。很可能还必须更改所有权和组所有者。

您的里程将因 ROM 而异。

# c# - 使用 C# Winforms 将行插入 SQL Server

> ID：11178847
> 
> 赞同：0
> 
> 时间：2012-06-24T15:52:24.773
> 
> 标签：c#, .net, sql-server, insert

我刚开始使用 SQL Server 2008。我有一个 winforms 应用程序，它必须将应用程序中的数据插入数据库，并且一些文本框值可能为空。在谷歌搜索后，我发现了一些东西，但我会解释一下。

我发现此代码将记录插入数据库（不包括连接代码）

```
stringInsert += "INSERT INTO MyDatabase(dateTime, Name, Surname)";
stringInsert += "VALUES(@Date, @NameString, @SurnameString)";

SqlCommand cmd = new SqlCommand(stringInsert, con);

cmd.CommandType = CommandType.Text;
cmd.Parameters.Add(new SqlParameter("@Date", strTime));
cmd.Parameters.Add(new SqlParameter("@Name", StringName));
cmd.Parameters.Add(new SqlParameter("@Surname", StringSurname));

if (string.IsNullOrEmpty(StringName))
   cmd.Parameters.Add(new SqlParameter("@Name", DBNull.Value.ToString()));
else
   cmd.Parameters.Add(new SqlParameter("@Name", StringName)); 
```

但是其他人写了该方法`cmd.Parameters.AddWithValue("@Name" , StringName);`

自动执行 if else 因为 if`StringName`为 null 或为空它设置`DBNull.Value`

现在我的问题是：

1.  我不明白如何`cmd.Parameters.Add(new SqlParameter("@Name", StringName));`将 stringInsert 修改为 StringName。“@Name”只是字符串的一部分，所以符号“@”可能会做一些我不知道的事情？通常，当我需要以这种方式排除转义时，我会使用 @ 符号 @"c:\home"

2.  `cmd.Parameters.AddWithValue("@Name" , StringName);`即使`StringName`为空或为空，它是否正确使用？

3.  这是在 WinForm 应用程序中使用许多文本框将数据提交到 SQL Server DB 的正确方法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T16:01:32.307

1) @Name 是一个占位符。您要求 NET 引擎将 @Name 占位符替换为相同命名参数的值。（这对于不支持命名参数的 ADO NET 提供程序是不同的）
2）当您想在数据库中插入 NULL 时，您应该使用 DBNull.Value，所以您的代码应该是`cmd.Parameters.AddWithValue("@Name" , string.IsNullOrEmpty(StringName) ? DBNull.Value : StringName);`
3）是的，这是正确的方法去。始终使用参数化查询。和`using`声明`

# c++ - _stprintf_s 将“10”视为“1”

> ID：11178849
> 
> 赞同：-2
> 
> 时间：2012-06-24T15:52:37.510
> 
> 标签：c++, c

我试图将一个数字传递给一个 BYTES 数组 - 但将该数字视为一个字符数组。这是我的代码：

```
for(int i=1;i<=totalFiles;i++)
{
    BYTE* input = new BYTE[sizeof(DWORD) * sizeof(TCHAR)];
    _stprintf_s((TCHAR*)input, sizeof(DWORD) * sizeof(TCHAR), _T("%d"), i);

    QueueToThreadPool(input);
} 
```

由于某种原因，当 i=10 或 i=11（等等）输入时，只得到“1”的值而不是 i 的值。这是为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T16:57:14.767

我猜您的程序是作为 UNICODE 程序构建的，但是无论使用该字符串，都将其视为纯 ASCII 字符串。因此，第一个 UNICODE 字符（为零）的最高有效字节被视为字符串的结尾。

# c# - 具有服务器端和客户端的应用程序：如何将数据从服务器端重定向到客户端？

> ID：11178851
> 
> 赞同：0
> 
> 时间：2012-06-24T15:52:48.463
> 
> 标签：c#, .net, wcf

我应该实现一个为某些客户端提供服务的应用程序，同时与其他远程服务进行通信。换句话说，这个应用程序应该是它的客户端的服务器，但它也应该是远程服务的客户端。我应该将 NetTcpBinding 与回调一起用于与远程服务的通信以及与客户端的通信：

*   它应该向远程服务发送请求并通过回调接收来自它们的响应；
*   它应该接收来自客户端的请求并使用回调向它们发送响应。

这两种类型的通信应该在不同的线程上开发，但需要同时访问（读取和写入）共享数据：例如，当应用程序从客户端接收数据时，它应该将其中一些数据“重定向”到某些远程服务。

我可以在两个单独的线程中实现应用程序的两侧，并使用一个或多个单例对象来共享从客户端或远程服务接收到的公共数据。我可以使用共享`Queue<T>`作为单例对象（`T`从远程服务或客户端接收的数据类型在哪里）：这样，当我的服务应用程序从客户端接收数据时，它会将接收到的数据排入队列；同样，当它从远程服务接收数据时，将它们放在同一个队列中；最后，读取入队的数据：一些数据被发送到远程服务，而另一些数据被发送到客户端。

1.  我想我需要一个`Queue<T>`共享对象。
2.  然后我需要一个线程`ServiceHost`来为客户端实例化。
3.  `ServiceHost`另一个线程实例化远程服务的代理。

    *   这是对的吗？还是有更简单、更高效或更多 OOP 的解决方案？
    *   如何处理队列中数据的重定向？理论上，任何接收到的数据（来自远程服务或客户端）都可以立即处理并重定向，但问题是服务器端（从客户端接收数据）可能会使用客户端来重定向一些数据到远程服务，但客户端可能正忙于从其他远程服务接收数据。

你能告诉我互联网上任何完整的例子吗？

# excel - 根据数值从多个工作表中复制行

> ID：11178855
> 
> 赞同：2
> 
> 时间：2012-06-24T15:53:49.297
> 
> 标签：excel, excel-2010, vba

我有多个销售工作表，销售人员在其中放置了他们对特定销售的信心水平。我刚刚开始学习 VBA，所以我不是一无所知，但我不得不承认这超出了我的想象。

如果一行的置信度超过 60%，我希望将整行复制到新工作表中。

数据从第 8 行开始，置信百分比列是 V 列。

我希望将 VBA 脚本应用于总共 9 个工作表，它们的名称为：

*   杰夫
*   约翰
*   蒂姆
*   皮特
*   乍得
*   鲍勃
*   凯文
*   麦克风
*   账单

我希望将置信度超过 60% 的所有行复制到主表或“安装”表，从第 8 行再次开始。我想通过“安装”表上的按钮运行脚本。

这是我正在使用的图片：

![擅长](../Images/aa03a1d0eac0b9341d9ccd6b6e49fa83.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T00:35:46.540

下面的代码

*   将所有九张纸（如果名称存在）中的第 8 行复制到一张名为“安装”的纸上
*   任何低于 60% 的记录都会被自动过滤并从主工作表中删除（比在复制前自动过滤九个工作表中的每一个更有效）
*   在顶部添加空白行以在第 8 行开始“安装”

*如果您确实需要从第 1 行到第 7 行的标题行，那么可以从其中一张推销员表中复制这些行 - 让我知道 *

```
Sub QuickCombine()
Dim ws1 As Worksheet
Dim ws2 As Worksheet
Dim rng1 As Range
Dim strShts()
Dim strWs As Variant
Dim lngCalc As Long

With Application
.ScreenUpdating = False
lngCalc = .Calculation
.Calculation = xlCalculationManual
End With

Set ws1 = Sheets("Install")
ws1.UsedRange.Cells.Clear

strShts = Array("Jeff", "John", "Tim", "Pete", "Chad", "Bob", "Kevin", "Mike", "Bill")
For Each strWs In strShts
On Error Resume Next
Set ws2 = Sheets(strWs)
On Error GoTo 0
If Not ws2 Is Nothing Then
Set rng1 = ws2.Range(ws2.[v8], ws2.Cells(Rows.Count, "v").End(xlUp))
rng1.EntireRow.Copy ws1.Cells(ws1.Cells(Rows.Count, "v").End(xlUp).Offset(1, 0).Row, "A")
End If
Set ws2 = Nothing
Next
With ws1
    .[v1] = "dummy"
    .Columns("V").AutoFilter Field:=1, Criteria1:="<60%"
    .Rows.Delete
.Rows("1:7").Insert
End With
With Application
.ScreenUpdating = True
.Calculation = lngCalc
End With
End Sub 
```

# linux - 让cron作业等到另一个作业完成

> ID：11178857
> 
> 赞同：5
> 
> 时间：2012-06-24T15:54:03.257
> 
> 标签：linux, cron, crontab

目前我正在尝试做这样的事情：

*   1 个 cron 作业 backup_daily
*   2 cron 作业 backup_weekly
*   3 cron 作业备份_月度

因此，可能发生的情况是，例如每天和每周将在同一天运行。至少其中一个会失败，因为应该备份的文件被另一个备份进程锁定。因此，一种简单的解决方案是在不同时间运行作业。但是由于我们不能准确地说出一份工作需要多长时间，所以这有点难看。

所以我在想的是一个代理脚本，所以我不会做上面的 cron 工作，而是做类似的事情

*   1 cron 作业 check_if_anybackup_is_running_and_run_backup_daily_else_wait_till_finished
*   2 cron 作业 check_if_anybackup_is_running_and_run_backup_weekly_else_wait_till_finished
*   3 cron 作业 check_if_anybackup_is_running_and_run_backup_monthly_else_wait_till_finished

那么我唯一关心的是它们以任何时间的偏移量开始，这样它们就不会相互阻塞。还应该明智地选择“等待”时间，这样他们就不会在同一时刻“重新检查”并再次相互阻塞（对于 3 个进程，我们可以使用偏移量 +1 每周处理，+2 处理每月，甚至/不均匀的计数器复查时间）

但是，我不确定如何使用 linux 脚本来实现这一点。我不确定“正确”的程序是什么。使用在进程启动时创建的锁定文件并检查它？如果它被锁定会发生什么？只是使用睡眠并在时间 X 之后再次检查锁定文件是一种“好”的方法吗？我不确定当我在 linux 线程上使用 sleep 时会发生什么 - 我的意思是：“计数器”是否已调度并耗尽处理器功率，或者是否存在某种中断，处理器将在一段时间后发送给等待的进程X（比如“基于事件”？）你能想到更好的方法吗？一些 linux 脚本代码片段将是完美的，因为那不是我以前做过的事情

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-24T17:10:26.700

我会将所有三个脚本合并为一个具有不同参数的脚本。喜欢`do_backup.sh daily`。

您对使用相同的锁定文件是正确的。我会更进一步，在这个锁定文件中写下你的进程 PID。这样，如果您的进程发现 lockfile 存在，它不仅会退出，而且会检查创建此文件的进程是否仍在运行。这样，即使您的进程崩溃并且没有删除锁定文件 - 您的整个系统仍然是安全的。

这是我在脚本中使用的示例，以确保同时只运行一个副本：

```
#!/bin/sh

PID_FILE=$0.pid
[ -f $PID_FILE ] && {
   pid=`cat $PID_FILE`
   ps -p $pid && {
      echo Already running...
      exit
   }
   rm -rf $PID_FILE
}

echo $$ > $PID_FILE 
```

然后在您的脚本中，您只需包含此文件

```
source pid.sh 
```

# php - PHP 似乎在使用 Securimage Captcha 时同时执行 if 和 else

> ID：11178858
> 
> 赞同：1
> 
> 时间：2012-06-24T15:54:09.873
> 
> 标签：php, if-statement, validation, captcha

我正在尝试使用 PHP 验证码来验证网站上的联系表单，过去几天我遇到了障碍，表单在 FF、Chrome、Safari 但不是 IE 上运行良好。我在这里搜索了很多帖子，但没有找到任何似乎可以解决我的问题的东西，所以我希望你们中的一些专家可以在这里帮助我:)。这仅在 IE 上的事实让我感到困惑，因为我能想到的唯一问题是会话变量，它在 ie 中似乎工作正常。

下面是验证我的联系表单发送的验证码的主要代码。我应该指出，验证码肯定是通过邮件发送的，因为我已经检查了标题和代码：`var_dump($securimage->check($_POST['captcha_code']))`当验证码正确或不正确时，如您所料，正确返回 true 和 false。

主要问题似乎是，如果验证码输入正确并且`$securimage->check($_POST['captcha_code'])`在 IE 上返回 true，则该语句`if ($captcha_result == FALSE)`正在执行，但也使用相应 else 中的 mail() 函数发送电子邮件。由于某种原因，`$formSent = 2;`似乎没有在 mail() 函数所在的 else 中运行。我尝试了 if 和 else 值的组合，但都没有运气。这一定是我某处的用户错误......

```
<?php
session_start();
include('securimage/securimage.php');

        if (isset($_POST['query_form'])) {

            if ($_POST['name'] == "Your name" || $_POST['email'] == "Your E-mail" || $_POST['message'] == "Message") {
                $formSent = 1; //display the notification bar wth error.
            } 
            else {

                //validate the captcha code now.
                $securimage = new Securimage();
                //var_dump($securimage->check($_POST['captcha_code']));
                $captcha_result = $securimage->check($_POST['captcha_code']);

                //ERROR - IE runs the first if and the mail function below for some reason.
                if ($captcha_result == FALSE) {
                    $formSent = 3; //display the notification bar wth captcha error.    
                }

                else if ($captcha_result !== FALSE) {               
                    $to = 'email';
                    $subject = 'subject';
                    $message = "Name: " .  $_POST['name'] . "\r\n" . "Email: " . $_POST['email'] . "\r\n" . "Phone: " . $_POST['phone'] . "\r\n" . "Message: " . $_POST['message'] ;
                    $headers = 'From: email' . "\r\n" .
                        'Reply-To: ' . $_POST['email'] . "\r\n";

                    mail($to, $subject, $message, $headers);
                    $formSent = 2; //display the notification bar with success.     

                }
            }

        }

?> 
```

# gmail - 本机 php 邮件功能似乎不适用于 Gmail

> ID：11178859
> 
> 赞同：4
> 
> 时间：2012-06-24T15:54:11.387
> 
> 标签：gmail, php

我正在尝试使用本机 PHP 函数通过 gmail SMTP 发送简单的测试电子邮件，但它不起作用。浏览包括 Stack Overflow 在内的各种论坛，我看到的唯一解决方案是推荐第三方电子邮件库/框架/api 的解决方案。这是否意味着 PHP`mail()`不适用于 Gmail，如果是，为什么？

以下是代码：

```
<?php
$to ="mail2@yahoo.com";
$sbj ="test mail";
$msg ="testing! testing!! testing!!!";

ini_set("SMTP", "ssl://smtp.gmail.com");
ini_set("smtp_port", 465);
ini_set("sendmail_from", "mail1@gmail.com");

$header ="From: " .ini_get("sendmail_from");

mail($to, $sbj, $msg, $header);

?> 
```

我得到的错误信息：

> 警告：mail()：无法在“ssl://smtp.gmail.com”端口 465 连接到邮件服务器，请验证 php.ini 中的“SMTP”和“smtp_port”设置或在 C:\wamp 中使用 ini_set() \www\test\web1\test1.php 第 12 行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T16:00:17.920

最适合您的课程是[phpmailer](http://code.google.com/a/apache-extras.org/p/phpmailer/downloads/list)。Gmail 有很好的例子（简单和高级）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T16:07:39.793

> 这是否意味着 PHP 的 mail() 不适用于 Gmail，如果是，为什么？

Gmail 服务器要求用户在发送任何邮件之前进行身份验证，`mail()`不提供任何身份验证方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T16:09:59.160

我将 Pear 与 Gmail 一起使用。效果很好。

[http://pear.php.net/package/Mail/redirected](http://pear.php.net/package/Mail/redirected)

# boost - bjam 行为怪异？

> ID：11178863
> 
> 赞同：1
> 
> 时间：2012-06-24T15:54:33.587
> 
> 标签：boost, bjam

我认为这段代码的输出是

```
Hello World 1
Hello World 2 3 
```

但我明白了

```
Hello World 1
Hello World 2 Hello World 3 
```

这是果酱代码

```
rule weird ( a : b + : c * : d ? )
{
  echo "Hello World $(a)" ;
  echo "Hello World $(b)" ;
}

weird 1 : 2 3 ; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T03:47:15.403

Jam 的变量扩展规则与其他语言有很大不同。来自[boost jam 文档](http://www.boost.org/boost-build2/doc/html/jam/language.html)：

> 变量扩展后的标记的结果是标记的组件的乘积，其中每个组件是文字子字符串或替换变量引用的列表。

因此 jam 正在将“Hello World $(b)”扩展为“Hello World $(b[1])”“Hello World$(b[2])”并回应这一点。

如果要“Hello World 2 3”，则需要将 echo 参数拆分为两个标记

```
echo "Hello World" $(b) ; 
```

# c# - 将属性本身传递给 C# 中的参数

> ID：11178864
> 
> 赞同：57
> 
> 时间：2012-06-24T15:54:34.140
> 
> 标签：c#, properties, parameter-passing

我正在寻找一种将属性本身传递给函数的方法。不是财产价值。函数事先并不知道将使用哪个属性进行排序。此示例中最简单的方法是：使用不同的参数类型创建 4 个覆盖。另一种方法是使用`typeof()`内部函数。当 Class1 有数百个属性时，这两种方式都是不可接受的。到目前为止，我找到了以下方法：

```
class Class1
{
    string vehName;
    int maxSpeed;
    int fuelCapacity;
    bool isFlying;
}

class Processor
{
    List<Class1> vehicles = null;
    Processor(List<Class1> input)
    {
        vehicles = input;
    }

    List<Class1> sortBy(List<Class1> toSort, string propName)
    {
        if (toSort != null && toSort.Count > 0)
        {
            return toSort.OrderBy(x => typeof(Class1).GetProperty(propName).GetValue(x, null)).ToList();
        }
        else return null;
    }
}

class OuterUser
{
    List<Class1> vehicles = new List<Class1>();
    // ... fill the list
    Processor pr = new Processor(vehicles);
    List<Class1> sorted = pr.sortBy("maxSpeed");
} 
```

我不喜欢这种方法，因为在将字符串传递给处理函数时存在“人为错误”的风险。当字符串由代码的其他部分生成时，这将更加难看。请提出更优雅的方法来实现 Class1 属性的传递以进行进一步处理。使用恕我直言的最佳选择将是（或类似的东西）：

```
vehicles = sortBy(vehicles, Class1.maxSpeed); 
```

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-06-24T16:01:57.693

您可以将属性访问器传递给该方法。

```
List<Class1> SortBy(List<Class1> toSort, Func<Class1, IComparable> getProp)
{
    if (toSort != null && toSort.Count > 0) {
        return toSort
            .OrderBy(x => getProp(x))
            .ToList();
    }
    return null;
} 
```

你可以这样称呼它：

```
var result = SortBy(toSort, x => x.maxSpeed); 
```

* * *

但是您可以更进一步，编写自己的扩展方法。

```
public static class CollectionExtensions
{
    public static List<TSource> OrderByAsListOrNull<TSource, TKey>(
        this ICollection<TSource> collection, Func<TSource,TKey> keySelector)

        if (collection != null && collection.Count > 0) {
            return collection
                .OrderBy(x => keySelector(x))
                .ToList();
        }
        return null;
    }
} 
```

现在你可以像这样排序

```
List<Class1> sorted = toSort.OrderByAsListOrNull(x => x.maxSpeed); 
```

但是也

```
Person[] people = ...;
List<Person> sortedPeople = people.OrderByAsListOrNull(p => p.LastName); 
```

请注意，我将第一个参数声明为是`ICollection<T>`因为它必须满足两个条件：

1.  它必须有一个`Count`属性
2.  它必须是一个`IEnumerable<T>`才能应用 LINQ 方法`OrderBy`。

`List<Class1>`是一个和许多其他集合一样`ICollection<T>`的数组。`Person[]`

* * *

到目前为止，我已经展示了如何读取属性。如果该方法需要设置一个属性，您还需要向它传递一个 setter 委托

```
void ReadAndWriteProperty(Func<Class1, T> getProp, Action<Class1, T> setProp) 
```

`T`属性类型在哪里。

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2012-06-24T16:02:53.060

您可以使用 lambda 表达式来传递属性信息：

```
void DoSomething<T>(Expression<Func<T>> property)
{
    var propertyInfo = ((MemberExpression)property.Body).Member as PropertyInfo;
    if (propertyInfo == null)
    {
        throw new ArgumentException("The lambda expression 'property' should point to a valid Property");
    }
} 
```

用法：

```
DoSomething(() => this.MyProperty); 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2015-10-07T12:32:26.587

我发现@MatthiasG 的答案中缺少的是如何获取属性值而不仅仅是其名称。

```
public static string Meth<T>(Expression<Func<T>> expression)
{
    var name = ((MemberExpression)expression.Body).Member.Name;
    var value = expression.Compile()();
    return string.Format("{0} - {1}", name, value);
} 
```

利用：

```
Meth(() => YourObject.Property); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-10-15T18:46:19.333

很好的解决方案在这里...

[在 C# 中通过引用传递属性](https://stackoverflow.com/questions/1402803/passing-properties-by-reference-in-c-sharp)

```
void GetString<T>(string input, T target, Expression<Func<T, string>> outExpr)
{
    if (!string.IsNullOrEmpty(input))
    {
        var expr = (MemberExpression) outExpr.Body;
        var prop = (PropertyInfo) expr.Member;
        prop.SetValue(target, input, null);
    }
}

void Main()
{
    var person = new Person();
    GetString("test", person, x => x.Name);
    Debug.Assert(person.Name == "test");
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-06-24T15:59:56.103

你为什么不为此使用Linq？喜欢：

```
vehicles.OrderBy(v => v.maxSpeed).ToList(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-24T16:15:23.833

只是从上面的答案中添加。您还可以为订单方向做一个简单的标志。

```
public class Processor
{
    public List<SortableItem> SortableItems { get; set; }

    public Processor()
    {
        SortableItems = new List<SortableItem>();
        SortableItems.Add(new SortableItem { PropA = "b" });
        SortableItems.Add(new SortableItem { PropA = "a" });
        SortableItems.Add(new SortableItem { PropA = "c" });
    }

    public void SortItems(Func<SortableItem, IComparable> keySelector, bool isAscending)
    {
        if(isAscending)
            SortableItems = SortableItems.OrderBy(keySelector).ToList();
        else
            SortableItems = SortableItems.OrderByDescending(keySelector).ToList();
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-09-03T04:15:28.710

我想给出一个简单易懂的答案。

函数的参数是这样的：`System.Func<class, type of the property>`

我们像这样传递属性：`Function(x => x.Property);`

这是代码：

```
class HDNData
{
    private int m_myInt;

    public int MyInt
    {
        get { return m_myInt; }
    }

    public void ChangeHDNData()
    {
        if (m_myInt == 0)
            m_myInt = 69;
        else
            m_myInt = 0;
    }
}

static class HDNTest
{
    private static HDNData m_data = new HDNData();

    public static void ChangeHDNData()
    {
        m_data.ChangeHDNData();
    }

    public static void HDNPrint(System.Func<HDNData, int> dataProperty)
    {
        Console.WriteLine(dataProperty(m_data));//Print to console the dataProperty (type int) of m_data
    }
}

//******Usage******
HDNTest.ChangeHDNData();
//This is what you want: Pass property itself (which is MyInt) to function as parameter in C#
HDNTest.HDNPrint(x => x.MyInt); 
```

# haskell - 网络路由不同的返回类型

> ID：11178868
> 
> 赞同：0
> 
> 时间：2012-06-24T15:55:08.297
> 
> 标签：haskell, happstack

通过[happstack-lite 教程](http://www.happstack.com/C/ViewPage/9)：

我们构建具有返回类型的函数`ServerPart Reponse`：

```
homePage :: ServerPart Response 
```

但是，在[web-routes crash course 中](http://www.happstack.com/docs/crashcourse/WebRoutes.html#web-routes)，我们的函数将签名更改为以下内容：

```
homePage :: RouteT Sitemap (ServerPartT IO) Response 
```

我们之前不是有ServerPart，而不是ServerPartT吗？此外，是否有更简单的方法可以切换到网络路由，而无需更改每个方法的类型签名？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T16:25:47.697

`ServerPart`被简单地定义为`type ServerPart a = ServerPartT IO a`。在 Happstack 8 中，我们可能会将其更改为`type ServerPart = ServerPartT IO`这意味着我们可以编写类似 的类型`RouteT Sitemap ServerPart Response`，但在那之前，我们必须`ServerPartT`直接使用，因为类型同义词不能“部分应用”。但是，它们*是*相同的类型。也就是说，`ServerPart Response`只是`ServerPartT IO Response`.

> 此外，是否有更简单的方法可以切换到网络路由，而无需更改每个方法的类型签名？

并不真地。我喜欢在早期为“处理程序”定义我自己的类型，然后我可以更改它的定义。例如，`type Handler = ServerPart Response`and `homePage :: Handler`，然后当我添加 web-routes 时，我只需重新定义 Handler `type Handler = RouteT Sitemap (ServerPartT IO) Response`。

您的编辑器可能具有搜索和替换功能，例如在 Vim 中：

```
:%s/:: ServerPart Response/:: RouteT Sitemap (ServerPartT IO) Response/g 
```

# python - 克服python中的appengine 500字节字符串限制？考虑文本

> ID：11178869
> 
> 赞同：2
> 
> 时间：2012-06-24T15:55:33.303
> 
> 标签：python, string, google-app-engine, text, limit

我明白了：

```
BadValueError: Property   is 804 bytes long; it must be 500 or less. Consider Text instead, which can store strings of any length. 
```

我读到了这个：[http](http://blog.zmxv.com/2012/02/appengine-go-sdks-500-byte-string.html) ://blog.zmxv.com/2012/02/appengine-go-sdks-500-byte-string.html和这个：[App Engine BadValueError On Bulk Data Upload - TextProperty was constred as StringProperty](https://stackoverflow.com/questions/3434090/app-engine-badvalueerror-on-bulk-data-upload-textproperty-being-construed-as-s)但我仍然不明白如何快速解决。

它说，考虑文字？我愿意考虑文字！:)

如果我将用户输入限制为 500 个字符，那会解决所有问题吗？谢谢..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-24T16:34:38.860

所以考虑`TextProperty`.

从切换。

```
yourproperty = db.StringProperty() 
```

到

```
yourproperty = db.TextProperty() 
```

你会没事的。请记住，`TextProperty`没有**索引**。

# django - django forms - 根据值其他字段验证或自动填充字段

> ID：11178875
> 
> 赞同：0
> 
> 时间：2012-06-24T15:56:20.450
> 
> 标签：django, django-models, django-forms, foreign-keys

我有 3 个与外键链接的模型：

```
class Region(models.Model):
    name = models.CharField(max_length=20)

class Zipcode(models.Model):
    zipcode =  models.IntegerField()
    name = models.CharField(max_length=20)
    region = models.ForeignKey(Region)

class Address(models.Model):
    street = models.Charfield(max_length=40)
    zipcode = models.ForeignKey(Zipcode)
    region = models.ForeignKey(Region) 
```

在下一步中，我根据模型制作了一个表格`Address`。

现在我想`region`在用户填写字段时自动填写`zipcode`字段。

我知道可以计算后端等中的值，但是`region`当用户选择该字段时，是否可以几乎“实时”完成该`zipcode`字段？在某种程度上它也可以在用户的​​表单中看到？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T17:08:45.000

我认为您需要为此进行某种 ajax 查找。例如，只要有人输入邮政编码，javascript（我建议使用 jquery）就会被设置为执行 ajax 请求。或许如果邮政编码文本框长度为 6，那么 onChange 事件将请求 URL“/ajax/get_region/60604/”，该 URL 将映射到下面的视图并传入邮政编码。该视图可能会返回一个 json 响应，该响应将指示该邮政编码的区域。最后，在 javascript 回调函数中可以更新您网站上的对话框以指示区域。

我的建议是该区域甚至不需要回传到网络服务器……这里的 ajax 查找仅用于显示目的，然后在 POST 期间再次计算。但是，话又说回来，我不知道您是否希望用户能够手动输入区域和邮政编码。

**视图.py**

```
import json
from django.http import HttpResponse

def ajax_region_from_zip(request, zip):

    # do your logic to lookup the zipcode from the region
    region, lookup_success = get_region_form_zip(zip)        

    response = Response(content_type='application/json')
    response.write(json.dumps({"success":lookup_success, "region":region ))
    return response 
```

最后，如果您*确实*希望用户能够在表单中编辑区域和邮政编码，您需要确保区域和邮政编码始终保持一致，并且您可能希望在用户的表单中构建一个检查提交。此外，如果用户禁用了 javascript，如果用户选择了错误的区域，您将需要向用户提供错误信息。您可以覆盖表单上的 clean() 方法，该方法也会从邮政编码中查找区域。如果它与前端表单发布的区域不匹配，它将返回错误消息。

**表格.py**

```
class AddressForm(forms.ModelForm):
    ....
    ....
    def clean(self):
        cleaned_data = self.cleaned_data
        zip = cleaned_data.get('zip', None)
        region = cleaned_data.get('region', None)
        region_lookup, lookup_success = get_region_form_zip(zip)
        if not region == region_lookup:
            forms.ValidationError("This zipcode is not in the given region.")
        return cleaned_data 
```

请注意，这些代码示例尚未经过测试，但希望能够理解。
希望这可以帮助，

乔

# uiviewcontroller - 需要从 appdelegate 加载 UIViewController 并在 Storyboard App 中加载时隐藏 UITabBarController

> ID：11178888
> 
> 赞同：0
> 
> 时间：2012-06-24T15:58:17.703
> 
> 标签：uiviewcontroller, uitabbarcontroller, uistoryboard, uiapplicationdelegate

我有一个应用程序，如果它是用户第一次运行该应用程序，我需要在该应用程序中显示一个欢迎屏幕，然后仅显示该应用程序的一些第一次设置信息。我认为最好的放置位置是在 appdelegate (didFinishLaunchingWithOptions) 中，如果错误可能需要更正。在应用程序委托中，我调用此方法：

```
-(void) checkSetupOccured
{

    NSString *filePath = [self dataFilePath];
    if (![[NSFileManager defaultManager] fileExistsAtPath:filePath])
    {
        //File doesn't exist, first time ran or installed
        UITabBarController *MyTabViewController = (UITabBarController *)self.window.rootViewController;
        [MyTabViewController setSelectedIndex:3];
        WelcomeHomeViewController *welcomeHomeViewController = [[MyTabViewController viewControllers] objectAtIndex:3];
        [welcomeHomeViewController viewDidLoad];
        //Need help here I think  - Anyway to hide MyTabViewController when its presented?
     }

} 
```

我经历了很多线程，不断弹出的内容是：

```
 //[MyTabViewController presentModalViewController:WelcomeHomeViewController animated:YES];
 //self.navigationController.navigationBarHidden = YES;
 //[self setHidesBottomBarWhenPushed:YES]; 
```

我已经用这些尝试了很多不同的地方，可能只需要退后一步放松一下，但我现在找不到解决方案。还要注意**这不在 UITableView**中。任何帮助将不胜感激，我总是在回答时标记我的问题已回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T17:19:20.067

好的，这是我在 if 语句中输入的内容：

```
 UITabBarController *MyTabViewController = (UITabBarController *)self.window.rootViewController;

    [MyTabViewController setSelectedIndex:3];
    UINavigationController *welcomeHomeViewController = [[MyTabViewController viewControllers] objectAtIndex:3];
            UITabBar *tabBar = MyTabViewController.tabBar;
    tabBar.hidden = YES;
    [welcomeHomeViewController viewDidLoad]; 
```

这对我来说确实很糟糕，如果有更好的方法，请告诉我。只是想发布答案，以防其他人可以从中得到帮助。

编辑：该栏仍然可见 :( ，但没有按钮可以按下，只有一个黑色条带。任何帮助将不胜感激。至少用户无法访问该栏，但我最终需要隐藏它。

编辑：好啦！很高兴我解决了这个问题，真的希望这可以帮助其他人！

在这里，在appsdevs帖子中修改： [如何隐藏标签栏控制器？](https://stackoverflow.com/questions/7466829/how-to-hide-tab-bar-controller/7466975#7466975)

```
UITabBarController *MyTabViewController = (UITabBarController *)self.window.rootViewController;

    for(UIView *view in MyTabViewController.view.subviews)
    {
        if([view isKindOfClass:[UITabBar class]])
        {
            [view setFrame:CGRectMake(view.frame.origin.x, 480, view.frame.size.width, view.frame.size.height)];
        } else 
        {
          [view setFrame:CGRectMake(view.frame.origin.x, view.frame.origin.y, view.frame.size.width, 480)];
        }
    }

    [MyTabViewController setSelectedIndex:3];
    UINavigationController *welcomeHomeViewController = [[MyTabViewController viewControllers] objectAtIndex:3];

    [welcomeHomeViewController viewDidLoad]; 
```

# javascript - 添加链接时JQuery停止工作

> ID：11178891
> 
> 赞同：0
> 
> 时间：2012-06-24T15:59:00.453
> 
> 标签：javascript, jquery, html, css

我正在学习 JQuery 并且正在使用通过图片滑动文本的 JQuery 脚本：

```
<script>
        $(document).ready(function() {
            var currentImg = 1,
                totalImages = 4
                loopTime = 1000,
                intervalId = null;

            function displayTitle(imgNbr) {
                $('.title').hide();
                $('#image'+imgNbr).prev('div').show();
            }

            $('img').on('mouseover', function() {
                clearInterval(intervalId);
                displayTitle($(this).parent().attr('id').substring(5));
            }).on('mouseout', function() {
                currentImg = $(this).parent().attr('id').substring(5);
                startLoop();
            })

            function startLoop() {
                intervalId = setInterval(function() {
                    displayTitle(currentImg);
                    currentImg = ((currentImg == totalImages) ? 1 : parseInt(currentImg)+1);
                }, loopTime);
            }
            startLoop();
        });
   </script> 
```

但是当我尝试在 [div] 和图像标签之间添加 [a href="#"] 标签时，它会停止工作。你能帮我修一下吗？谢谢。

```
<div class="imgcontainer">
    <div class="title">title 1</div>
    <div class="img" id="image1"><a href="#"><img src="images/image1.jpg" /></a></div>
</div>

<div class="imgcontainer">
    <div class="title">title 2</div>
    <div class="img" id="image2"><a href="#"><img src="images/image2.jpg" /></a></div>
</div>    

<div class="imgcontainer">
    <div class="title">title 3</div>
    <div class="img" id="image3"><a href="#"><img src="images/image3.jpg" /></a></div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T16:04:48.523

改变：

```
displayTitle($(this).parent().attr('id').substring(5)); 
```

至：

```
displayTitle($(this).parents('div').attr('id').substring(5)); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/zAZst/1/)**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T16:03:59.307

它停止工作，因为 div 不再是前面的兄弟。您应该更改调用以用于`prevAll('div')`选择与 div 选择器匹配的所有前面的兄弟姐妹。

该`prev`函数仅匹配当前元素之前的第一个兄弟元素，并且仅在它匹配选择器时才匹配。在这种情况下，您添加了一个中间元素，即锚标记，因此 div 不再是前面的第一个同级元素，并且选择器不匹配任何内容。 `PrevAll`考虑与选择器匹配的所有前面的兄弟。在你的情况下，只有一个。如果您进一步更改标记以引入其他 div，则必须调整选择器以从集合中选择合适的一个。

```
function displayTitle(imgNbr) {
    $('.title').hide();
     $('#image'+imgNbr).prevAll('div').show();
} 
```

# java - AndEngine gles2 物理

> ID：11178892
> 
> 赞同：1
> 
> 时间：2012-06-24T15:59:05.250
> 
> 标签：java, android, andengine, avd

我试图在 AndEngine 示例包中复制并粘贴一个物理示例。

没有出现错误，但是当我运行它时，模拟器说“不幸的是 PhysicsActivity 已停止”。

模拟器在 API 15 上，gpu 开启，磁场支持和加速度计也开启。

以下是代码：

```
package physics.jet;

import org.andengine.engine.camera.Camera;
import org.andengine.engine.options.EngineOptions;
import org.andengine.engine.options.ScreenOrientation;
import org.andengine.engine.options.resolutionpolicy.RatioResolutionPolicy;
import org.andengine.entity.primitive.Rectangle;
import org.andengine.entity.scene.IOnAreaTouchListener;
import org.andengine.entity.scene.IOnSceneTouchListener;
import org.andengine.entity.scene.ITouchArea;
import org.andengine.entity.scene.Scene;
import org.andengine.entity.scene.background.Background;
import org.andengine.entity.shape.IAreaShape;
import org.andengine.entity.sprite.AnimatedSprite;
import org.andengine.entity.util.FPSLogger;
import org.andengine.extension.physics.box2d.PhysicsConnector;
import org.andengine.extension.physics.box2d.PhysicsFactory;
import org.andengine.extension.physics.box2d.PhysicsWorld;
import org.andengine.extension.physics.box2d.util.Vector2Pool;
import org.andengine.extension.physics.box2d.util.constants.PhysicsConstants;
import org.andengine.input.sensor.acceleration.AccelerationData;
import org.andengine.input.sensor.acceleration.IAccelerationListener;
import org.andengine.input.touch.TouchEvent;
import org.andengine.opengl.texture.TextureOptions;
import org.andengine.opengl.texture.atlas.bitmap.BitmapTextureAtlas;
import org.andengine.opengl.texture.atlas.bitmap.BitmapTextureAtlasTextureRegionFactory;
import org.andengine.opengl.texture.region.TiledTextureRegion;
import org.andengine.opengl.vbo.VertexBufferObjectManager;
import org.andengine.ui.activity.SimpleBaseGameActivity;
import org.andengine.util.debug.Debug;

import android.hardware.SensorManager;
import android.widget.Toast;

import com.badlogic.gdx.math.Vector2;
import com.badlogic.gdx.physics.box2d.Body;
import com.badlogic.gdx.physics.box2d.BodyDef;
import com.badlogic.gdx.physics.box2d.BodyDef.BodyType;
import com.badlogic.gdx.physics.box2d.FixtureDef;
import com.badlogic.gdx.physics.box2d.joints.MouseJoint;
import com.badlogic.gdx.physics.box2d.joints.MouseJointDef;

/**
 * @author albrandroid
 * @author Nicolas Gramlich
 * @since 10:35:23 - 28.02.2011
 */
public class PhysicsActivity extends SimpleBaseGameActivity implements IAccelerationListener, IOnSceneTouchListener, IOnAreaTouchListener {
    // ===========================================================
    // Constants
    // ===========================================================

    private static final int CAMERA_WIDTH = 720;
    private static final int CAMERA_HEIGHT = 480;

    private static final FixtureDef FIXTURE_DEF = PhysicsFactory.createFixtureDef(1, 0.5f, 0.5f);

    // ===========================================================
    // Fields
    // ===========================================================

    private BitmapTextureAtlas mBitmapTextureAtlas;

    private TiledTextureRegion mBoxFaceTextureRegion;
    private TiledTextureRegion mCircleFaceTextureRegion;

    private Scene mScene;

    private PhysicsWorld mPhysicsWorld;
    private int mFaceCount = 0;

    private MouseJoint mMouseJointActive;
    private Body mGroundBody;

    // ===========================================================
    // Constructors
    // ===========================================================

    // ===========================================================
    // Getter & Setter
    // ===========================================================

    // ===========================================================
    // Methods for/from SuperClass/Interfaces
    // ===========================================================

    @Override
    public EngineOptions onCreateEngineOptions() {
        Toast.makeText(this, "Touch the screen to add objects.", Toast.LENGTH_LONG).show();

        final Camera camera = new Camera(0, 0, CAMERA_WIDTH, CAMERA_HEIGHT);

        return new EngineOptions(true, ScreenOrientation.LANDSCAPE_FIXED, new RatioResolutionPolicy(CAMERA_WIDTH, CAMERA_HEIGHT), camera);
    }

    @Override
    public void onCreateResources() {
        BitmapTextureAtlasTextureRegionFactory.setAssetBasePath("gfx/");

        this.mBitmapTextureAtlas = new BitmapTextureAtlas(this.getTextureManager(), 64, 64, TextureOptions.BILINEAR);
        this.mBoxFaceTextureRegion = BitmapTextureAtlasTextureRegionFactory.createTiledFromAsset(this.mBitmapTextureAtlas, this, "face_box_tiled.png", 0, 0, 2, 1); // 64x32
        this.mCircleFaceTextureRegion = BitmapTextureAtlasTextureRegionFactory.createTiledFromAsset(this.mBitmapTextureAtlas, this, "face_circle_tiled.png", 0, 32, 2, 1); // 64x32
        this.mBitmapTextureAtlas.load();
    }

    @Override
    public Scene onCreateScene() {
        this.mEngine.registerUpdateHandler(new FPSLogger());

        this.mScene = new Scene();
        this.mScene.setBackground(new Background(0, 0, 0));
        this.mScene.setOnSceneTouchListener(this);
        this.mScene.setOnAreaTouchListener(this);

        this.mPhysicsWorld = new PhysicsWorld(new Vector2(0, SensorManager.GRAVITY_EARTH), false);
        this.mGroundBody = this.mPhysicsWorld.createBody(new BodyDef());

        final VertexBufferObjectManager vertexBufferObjectManager = this.getVertexBufferObjectManager();
        final Rectangle ground = new Rectangle(0, CAMERA_HEIGHT - 2, CAMERA_WIDTH, 2, vertexBufferObjectManager);
        final Rectangle roof = new Rectangle(0, 0, CAMERA_WIDTH, 2, vertexBufferObjectManager);
        final Rectangle left = new Rectangle(0, 0, 2, CAMERA_HEIGHT, vertexBufferObjectManager);
        final Rectangle right = new Rectangle(CAMERA_WIDTH - 2, 0, 2, CAMERA_HEIGHT, vertexBufferObjectManager);

        final FixtureDef wallFixtureDef = PhysicsFactory.createFixtureDef(0, 0.5f, 0.5f);
        PhysicsFactory.createBoxBody(this.mPhysicsWorld, ground, BodyType.StaticBody, wallFixtureDef);
        PhysicsFactory.createBoxBody(this.mPhysicsWorld, roof, BodyType.StaticBody, wallFixtureDef);
        PhysicsFactory.createBoxBody(this.mPhysicsWorld, left, BodyType.StaticBody, wallFixtureDef);
        PhysicsFactory.createBoxBody(this.mPhysicsWorld, right, BodyType.StaticBody, wallFixtureDef);

        this.mScene.attachChild(ground);
        this.mScene.attachChild(roof);
        this.mScene.attachChild(left);
        this.mScene.attachChild(right);

        this.mScene.registerUpdateHandler(this.mPhysicsWorld);

        return this.mScene;
    }

    @Override
    public void onGameCreated() {
        this.mEngine.enableVibrator(this);
    }

    @Override
    public boolean onSceneTouchEvent(final Scene pScene, final TouchEvent pSceneTouchEvent) {
        if(this.mPhysicsWorld != null) {
            switch(pSceneTouchEvent.getAction()) {
                case TouchEvent.ACTION_DOWN:
                    this.addFace(pSceneTouchEvent.getX(), pSceneTouchEvent.getY());
                    return true;
                case TouchEvent.ACTION_MOVE:
                    if(this.mMouseJointActive != null) {
                        final Vector2 vec = Vector2Pool.obtain(pSceneTouchEvent.getX() / PhysicsConstants.PIXEL_TO_METER_RATIO_DEFAULT, pSceneTouchEvent.getY() / PhysicsConstants.PIXEL_TO_METER_RATIO_DEFAULT);
                        this.mMouseJointActive.setTarget(vec);
                        Vector2Pool.recycle(vec);
                    }
                    return true;
                case TouchEvent.ACTION_UP:
                    if(this.mMouseJointActive != null) {
                        this.mPhysicsWorld.destroyJoint(this.mMouseJointActive);
                        this.mMouseJointActive = null;
                    }
                    return true;
            }
            return false;
        }
        return false;
    }

    @Override
    public boolean onAreaTouched(final TouchEvent pSceneTouchEvent, final ITouchArea pTouchArea, final float pTouchAreaLocalX, final float pTouchAreaLocalY) {
        if(pSceneTouchEvent.isActionDown()) {
            final IAreaShape face = (IAreaShape) pTouchArea;
            /*
             * If we have a active MouseJoint, we are just moving it around
             * instead of creating a second one.
             */
            if(this.mMouseJointActive == null) {
                this.mEngine.vibrate(100);
                this.mMouseJointActive = this.createMouseJoint(face, pTouchAreaLocalX, pTouchAreaLocalY);
            }
            return true;
        }
        return false;
    }

    @Override
    public void onAccelerationAccuracyChanged(final AccelerationData pAccelerationData) {

    }

    @Override
    public void onAccelerationChanged(final AccelerationData pAccelerationData) {
        final Vector2 gravity = Vector2Pool.obtain(pAccelerationData.getX(), pAccelerationData.getY());
        this.mPhysicsWorld.setGravity(gravity);
        Vector2Pool.recycle(gravity);
    }

    @Override
    public void onResumeGame() {
        super.onResumeGame();

        this.enableAccelerationSensor(this);
    }

    @Override
    public void onPauseGame() {
        super.onPauseGame();

        this.disableAccelerationSensor();
    }

    // ===========================================================
    // Methods
    // ===========================================================

    public MouseJoint createMouseJoint(final IAreaShape pFace, final float pTouchAreaLocalX, final float pTouchAreaLocalY) {
        final Body body = (Body) pFace.getUserData();
        final MouseJointDef mouseJointDef = new MouseJointDef();

        final Vector2 localPoint = Vector2Pool.obtain((pTouchAreaLocalX - pFace.getWidth() * 0.5f) / PhysicsConstants.PIXEL_TO_METER_RATIO_DEFAULT, (pTouchAreaLocalY - pFace.getHeight() * 0.5f) / PhysicsConstants.PIXEL_TO_METER_RATIO_DEFAULT);
        this.mGroundBody.setTransform(localPoint, 0);

        mouseJointDef.bodyA = this.mGroundBody;
        mouseJointDef.bodyB = body;
        mouseJointDef.dampingRatio = 0.95f;
        mouseJointDef.frequencyHz = 30;
        mouseJointDef.maxForce = (200.0f * body.getMass());
        mouseJointDef.collideConnected = true;

        mouseJointDef.target.set(body.getWorldPoint(localPoint));
        Vector2Pool.recycle(localPoint);

        return (MouseJoint) this.mPhysicsWorld.createJoint(mouseJointDef);
    }

    private void addFace(final float pX, final float pY) {
        this.mFaceCount++;
        Debug.d("Faces: " + this.mFaceCount);

        final AnimatedSprite face;
        final Body body;

        if(this.mFaceCount % 2 == 0) {
            face = new AnimatedSprite(pX, pY, this.mBoxFaceTextureRegion, this.getVertexBufferObjectManager());
            body = PhysicsFactory.createBoxBody(this.mPhysicsWorld, face, BodyType.DynamicBody, FIXTURE_DEF);
        } else {
            face = new AnimatedSprite(pX, pY, this.mCircleFaceTextureRegion, this.getVertexBufferObjectManager());
            body = PhysicsFactory.createCircleBody(this.mPhysicsWorld, face, BodyType.DynamicBody, FIXTURE_DEF);
        }
        face.setUserData(body);
        face.animate(200);

        this.mScene.registerTouchArea(face);
        this.mScene.attachChild(face);

        this.mPhysicsWorld.registerPhysicsConnector(new PhysicsConnector(face, body, true, true));
    }

    // ===========================================================
    // Inner and Anonymous Classes
    // ===========================================================
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T15:46:15.737

您必须在设备上运行它，因为 AndEngineGles2 在模拟器上不起作用

# ios - 我可以在我的商业 iPhone 应用程序中使用“CC-BY”许可的 3D 模型吗？

> ID：11178895
> 
> 赞同：-1
> 
> 时间：2012-06-24T15:59:26.033
> 
> 标签：ios, licensing, app-store

这些天我在做一个 iphone 游戏，因为我不擅长 3D 建模，所以我从 blendswap.com 下载了一些有用的“CC-BY”许可 3D 模型。我已经将它们渲染成一些 2D 精灵形式并在我的 gmme 中使用这些精灵。这合法吗？如果这是合法的，我应该如何在我的游戏中“归功于”模型的原作者？我应该在游戏的主菜单上添加“关于”/“信用”按钮吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T16:01:42.413

是的——这是合法的。这几乎是知识共享的全部意义，尤其是特定的 CC 许可。只要许可证不包含 NC（非商业）或 ND（无衍生）条款，您以这种方式使用应该没问题。

关于页面是一个非常常见的地方，可以为此添加适当的功劳。

请注意，CC-BY 的条款要求您以版权所有者要求的方式给予信用。如果版权所有者在提供您下载模型的许可证时没有提出任何具体要求，那么最好的努力可能包括作者的姓名，并提及您使用该作品的 CC-BY 许可证，以及其他人可以找到该模型的链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T12:50:19.453

> 这些天我在做一个 iphone 游戏，因为我不擅长 3D 建模，所以我从 blendswap.com 下载了一些有用的“CC-BY”许可 3D 模型。

Blendswap[支持多种创作共用许可证](http://www.blendswap.com/licenses/)，包括 CC-BY。

> 我已经将它们渲染成一些 2D 精灵形式并在我的游戏中使用这些精灵。这合法吗？

CC-BY 是一种版权许可，是一种授予公众分享和使用创意作品许可的标准化方式。在它下（[链接取自 Blendswap](http://creativecommons.org/licenses/by/3.0/)），您可以使用它并在特定条件下对其进行修改：

> **你是自由的**：
> 
> *   **to Share——**复制、分发和传播作品
> *   **to Remix——**将作品改编成商业用途

将 3D 模型变成 2D 精灵是一种重新混合。你可以这样做，是的。

> 如果这是合法的，我应该如何在我的游戏中“归功于”模型的原作者？我应该在游戏的主菜单上添加“关于”/“信用”按钮吗？

可以，但有一些条件：

> *   **署名**——您必须以作者或许可人指定的方式对作品进行署名（但不得以任何方式表明他们认可您或您对作品的使用）。

你需要明白：

> **注意**——对于任何重用或分发，您必须向他人说明本作品的许可条款。最好的方法是使用指向[此网页](http://creativecommons.org/licenses/by/3.0/)的链接。

所以在你的游戏学分中你应该给出归属。

Blendswap[以这种方式铸造它](http://www.blendswap.com/licenses/)：

> 此许可允许其他人分发、混音、调整和构建您的作品，甚至商业化，只要他们将原创作品归功于您。就其他人可以对您在署名下获得许可的作品执行的操作而言，这是提供的最宽松的许可。
> 
> 该许可证授予世界上每个人（在法律适用的情况下）将混合用于任何目的（甚至是商业目的）的许可，但在归属要求下，即原作者要求在衍生作品中的混合使用工作用户。如果混合的用户不相信原始作者，则用户无权使用混合。

他们没有对游戏中的使用给出太多建议，但是就像电影有学分卷轴（他们建议在电影的情况下给予学分）一样，游戏通常也有类似的东西。把学分放在那里。还要说明您在哪个许可证下使用该模型并说明哪个模型。

# ruby-on-rails - 带有葡萄问题的 Rails 3

> ID：11178898
> 
> 赞同：0
> 
> 时间：2012-06-24T15:59:38.400
> 
> 标签：ruby-on-rails, ruby, module, routes, grape-api

我一直在关注这个帖子

[http://martinciu.com/2011/01/mounting-grape-api-inside-rails-application.html](http://martinciu.com/2011/01/mounting-grape-api-inside-rails-application.html)

我将模块放入 lib 目录并将该行添加到*routes.rb*中，如图所示

当我做

```
rails s 
```

我得到一个错误，说

```
uninitialized constant MyApp (NameError) 
```

少了什么东西？我需要将模块放在其他地方吗？或者让rails知道它在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T16:05:41.863

该博文的作者在评论中澄清了这个问题：

> 您可以在 config/routes.rb 文件中添加 'require "lib/api"，或者您可以通过将此行添加到 config/application.rb 来自动要求 lib 目录中的所有文件；
> 
> config.autoload_paths += %W(#{config.root}/lib)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T16:04:27.433

好吧，这很容易。我忘了在 routes.rb 中要求“myApp”......

# java - GWT：如何在屏幕加载期间使用来自服务器的值更新组合值？

> ID：11178899
> 
> 赞同：0
> 
> 时间：2012-06-24T15:59:44.660
> 
> 标签：java, google-app-engine, gwt

我是 GWT 的新手。我正在编写一个简单的 GWT 程序，其中有一个组合框（ 的一个实例`ValueListBox`），其中列出了从 1 到 12 的数字，代表一年中的月份。我的要求是将当前月份设置为屏幕加载的组合。如果我从客户端获取当前月份的值并将其设置为组合，它工作正常。但是，如果我使用 RPC 从服务器端获取当前月份的值并将其设置为组合，则它不起作用。它总是设置变量的初始值。`(currentMonth = 0 )`就我而言，无论从服务器返回的值如何，它都是零。任何人都可以帮我解决这个问题吗？

```
import java.io.IOException;
import java.util.ArrayList;
import java.util.List;

import com.google.gwt.core.client.EntryPoint;
import com.google.gwt.core.client.GWT;
import com.google.gwt.text.shared.Renderer;
import com.google.gwt.user.client.rpc.AsyncCallback;
import com.google.gwt.user.client.ui.RootPanel;
import com.google.gwt.user.client.ui.ValueListBox;

public class Sample implements EntryPoint {

    private int currentMonth = 0;

    private final MyServiceAsync service = GWT.create(MyService.class);

    public void onModuleLoad() {

        setCurrentMonth();

        final ValueListBox<Integer> monthCombo = new ValueListBox<Integer>(new Renderer<Integer>() {

            @Override
            public String render(Integer object) {
                return String.valueOf(object);
            }

            @Override
            public void render(Integer object, Appendable appendable) throws IOException {
                if (object != null) {

                    String value = render(object);
                    appendable.append(value);
                }
            }
        });

        monthCombo.setValue(currentMonth);
        monthCombo.setAcceptableValues(getMonthList());

        RootPanel rootPanel = RootPanel.get();
        rootPanel.add(monthCombo);
    }

    private List<Integer> getMonthList() {
        List<Integer> list = new ArrayList<Integer>();

        for (int i = 1; i <= 12; i++) {
            list.add(i);
        }

        return list;
    }

    private void setCurrentMonth() {

        service.getCurrentMonth(new AsyncCallback<Integer>() {

            @Override
            public void onSuccess(Integer month) {
                currentMonth = month;
            }

            @Override
            public void onFailure(Throwable caught) {

            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T19:35:53.647

GWT 中的 RPC 调用是异步的。这意味着当您调用*setCurrentMonth()*时，它会将请求发送到服务器并**立即返回**。它不会在返回之前等待收到响应。

结果是*onModuleLoad()*中剩余的代码很可能在调用*onSuccess()*方法**之前**被执行。

 *实现您尝试做的正确方法是从*onSuccess()*方法本身更新 ValueListBox 。这可以通过首先使 ValueListBox 成为实例变量来完成。然后在*onSuccess()*你可以有：

```
public void onSuccess(Integer month) {
    monthCombo.setValue(month);
} 
```*

# izpack - 在 Ubuntu 12.04 上安装 IzPack 的问题

> ID：11178900
> 
> 赞同：0
> 
> 时间：2012-06-24T15:59:47.787
> 
> 标签：izpack, ubuntu-12.04, java-home

我刚刚在我的计算机上安装了 Ubuntu 12.04，并试图让 IzPack 正常工作但无济于事。我已经很好地安装了 IzPack，但是设置 JAVA_HOME 环境变量会导致问题。

我安装了 JDK（我需要用 IzPack 编译），现在我试图找出哪个路径是我的 JAVA_HOME 变量的正确路径。

在 /usr/lib/jvm 我有以下内容：

*   java-1.6.0-openjdk-amd64
*   java-6-openjdk-common
*   java-6-openjdk-amd64
*   java-7-openjdk-amd64

**我的问题是，这些和哪个是我的 JAVA_HOME 有什么区别？**此外，我尝试将其中的每一个都设置为 JAVA_HOME，当我尝试使用 IzPack 进行编译时，我收到以下错误消息：

**警告：未设置 JAVA_HOME 环境变量。如果由于找不到 sun.* 类而导致构建失败，则需要将 JAVA_HOME 环境变量设置为 java 的安装目录。**

此外，IzPack 网站说我还需要设置以下变量，如果有人可以帮助我找到以下内容的正确路径，那就太好了。谢谢！

*   导出 JAVA_HOME=/usr/java/j2sdk1.4.2_06
*   导出 JAVA_JAR=/usr/java/java_jar
*   导出 JRE_HOME=/usr/java/j2sdk1.4.2_06/jre
*   导出 CLASSPATH=/usr/java/j2sdk1.4.2_06/bin
*   导出 PATH=/usr/java/j2sdk1.4.2_06/bin:/usr/java/j2sdk1.4.2_06/jre/bin:$PATH

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T21:19:32.060

在尝试了几个小时的不同修复后，我用谷歌搜索无济于事，我发现我正在使用的 IzPack 版本（**最新的非测试版，4.3.5**）**错误地通知用户 JAVA_HOME 未设置，而实际上是。**

在完成我自己的示例安装 XML 文件后，它正确编译并按预期工作。显然，我想在开始编译之前正确设置我的 JAVA_HOME，我没想过继续编译看看发生了什么，因为 IzPack 不断告诉我 JAVA_HOME 没有设置，我认为我的编译不会因此无法工作。

**因此，那些在尝试编译时正确设置 JAVA_HOME 后遇到此错误的人，只需忽略它并继续，无论错误消息如何，它都应该正常工作。**

# windows - 每五秒 Ping 客户端 PC 是否会导致问题？

> ID：11178906
> 
> 赞同：0
> 
> 时间：2012-06-24T16:00:25.940
> 
> 标签：windows, networking

我有一个游戏区，里面有 20 台客户端 PC 和一台服务器。如果我从我的服务器上运行一个脚本（PHP/VB.NET），每五秒 ping 一次客户端 PC 以查看它们是否打开/关闭，这会对玩游戏的用户造成任何问题吗？或者它对我运行的计算机的性能有什么负面影响？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T16:05:26.257

Ping 的成本相当低，它只发送几个字节并测量它从目标计算机接收答案的速度。如果您只是每 5 秒 ping 一次，它不应该在目标计算机上造成任何明显的性能损失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T16:09:47.133

如果 PC 配备现代处理器，而且现代交换机上的 LAN 端口具有速度千兆端口，它不会造成任何混乱。

让 ping 处于`bytes=32`（默认），不要手动将其更改为更高的字节。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T07:21:07.517

你可能需要一个心跳任务......就像一个带有心跳的线程和套接字

# java - 全屏窗口不会使用 KeyListener 或 KeyBoardFocusManager 获得键盘输入

> ID：11178908
> 
> 赞同：7
> 
> 时间：2012-06-24T16:00:40.697
> 
> 标签：java, swing, fullscreen, keylistener, key-bindings

我在让我`KeyBoardFocusManger`的全屏工作时遇到问题`Window`。无论如何，它只是不会获得键盘输入。我使用 a`System.exit(0)`和 a`println()`来查找对 keypressed/released/typed 方法的任何调用，但没有引发错误。我试过了`KeyListeners`；但是在我读完[这个](https://stackoverflow.com/questions/286727/java-keylistener-for-jframe-is-being-unresponsive)之后，我改成了 a `KeyboardFocusManager`，同样的事情仍然发生。我真的很绝望；从我的判断`Window`来看，键盘没有得到焦点？

这是我的主要内容：

```
public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {

        @Override
        public void run() {
            // Determine if full-screen mode is supported directly
            GraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment();
            GraphicsDevice gs = ge.getDefaultScreenDevice();
            if (gs.isFullScreenSupported()) {
                Frame frame = new Frame(gs.getDefaultConfiguration());
                SpaceInvaderUI spaceInvaderUI = new SpaceInvaderUI(frame);
                // Enter full-screen mode
                gs.setFullScreenWindow(spaceInvaderUI);
            } else {
                JOptionPane.showMessageDialog(null, "Does not support full screen!", "Error 0x01", JOptionPane.ERROR_MESSAGE);
                System.exit(1);
            }
        }
    });
} 
```

这是包含`KeyBoardFocusManger`, 并添加到`addListeners()`方法中的 UI：

```
class SpaceInvaderUI extends Window {

    private JPanel drawingPanel;
    private Image background;
    private JButton btnExit;

    public SpaceInvaderUI(Frame frame) {
        super(frame);
        try {
            background = ImageIO.read(getClass().getResourceAsStream("background.png"));
        } catch (Exception ex) {
            JOptionPane.showMessageDialog(null, "Could not extract resource: " + ex.getMessage(), "Error 0x02", JOptionPane.ERROR_MESSAGE);
            System.exit(2);
        }
        createWindow();
    }

    private void createComponents() throws HeadlessException {
        drawingPanel = new DrawingPanel(background, this);
        btnExit = new JButton("Exit");
    }

    private void createWindow() {
        createComponents();
        addListeners();
        addComponentsToWindow();
    }

    private void addComponentsToWindow() {
        add(drawingPanel, BorderLayout.CENTER);
        add(btnExit, BorderLayout.SOUTH);
    }

    private void addListeners() {
        KeyboardFocusManager manager = KeyboardFocusManager.getCurrentKeyboardFocusManager();
        manager.addKeyEventDispatcher(new MyDispatcher());
        btnExit.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent ae) {
                System.exit(0);
            }
        });
    }

    private class MyDispatcher implements KeyEventDispatcher {

        @Override
        public boolean dispatchKeyEvent(KeyEvent e) {
            if (e.getID() == KeyEvent.KEY_PRESSED) {
                System.out.println("pressed");
                System.exit(0);
            } else if (e.getID() == KeyEvent.KEY_RELEASED) {
                System.out.println("released");
                System.exit(0);
            } else if (e.getID() == KeyEvent.KEY_TYPED) {
                System.out.println("Typed");
                System.exit(0);
            }
            return false;
        }
    }
} 
```

退出按钮只是因为我厌倦了通过任务管理器杀死我的应用程序。最后，这是我的面板，游戏将在上面进行，我的背景画在上面：

```
public class DrawingPanel extends JPanel {

    private final Image background;
    private final SpaceInvaderUI invaderUI;

    DrawingPanel(Image background, SpaceInvaderUI invaderUI) {
        this.background = background;
        this.invaderUI = invaderUI;
    }

    @Override
    protected void paintComponent(Graphics grphcs) {
        super.paintComponent(grphcs);
        grphcs.drawImage(background.getScaledInstance((int) invaderUI.getWidth(), (int) invaderUI.getHeight(), Image.SCALE_SMOOTH), 0, 0, this);
    }
} 
```

先感谢您。

编辑：我现在尝试在我的上使用键绑定，`drawingPanel`但当我按*f2*时仍然没有任何反应：

```
class SpaceInvaderUI extends Window {

    private JPanel drawingPanel;
    private Image background;
    private JButton btnExit;

    public SpaceInvaderUI(Frame frame) {
        super(frame);
        try {
            background = ImageIO.read(getClass().getResourceAsStream("background.png"));
        } catch (Exception ex) {
            JOptionPane.showMessageDialog(null, "Could not extract resource: " + ex.getMessage(), "Error 0x02", JOptionPane.ERROR_MESSAGE);
            System.exit(2);
        }
        createWindow();
    }

    private void createComponents() throws HeadlessException {
        drawingPanel = new DrawingPanel(background, this);
        btnExit = new JButton("Exit");
    }

    private void createWindow() {
        createComponents();
        addListeners();
        addComponentsToWindow();
    }

    private void addComponentsToWindow() {
        add(drawingPanel, BorderLayout.CENTER);
        add(btnExit, BorderLayout.SOUTH);
    }

    private void addListeners() {
        Action exit = new AbstractAction() {

            public void actionPerformed(ActionEvent e) {
                System.exit(0);
            }
        };
        drawingPanel.getInputMap().put(KeyStroke.getKeyStroke("F2"),
                exit);
        btnExit.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent ae) {
                System.exit(0);
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T16:13:04.597

为什么在 Swing GUI 中使用 AWT 组件？我担心（但不确定）这样做，您可能会失去一些 Swing 功能。

如果您仅捕获选择键选择键击来控制游戏，请考虑使用[Key Bindings](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)。

**编辑**：
不，AWT 组件没有错，但仍然可能不应该使用。

**编辑 2**：
由于某种原因，您的顶级窗口没有聚焦。继续测试代码...

**编辑 3**：
使用 JFrame 对我有用：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class Test3 {
   public static void main(String[] args) {
      EventQueue.invokeLater(new Runnable() {

         @Override
         public void run() {
            GraphicsEnvironment ge = GraphicsEnvironment
                  .getLocalGraphicsEnvironment();
            GraphicsDevice gs = ge.getDefaultScreenDevice();
            if (gs.isFullScreenSupported()) {
               SpaceInvaderUI spaceInvaderUI = new SpaceInvaderUI(gs.getDefaultConfiguration());
               gs.setFullScreenWindow(spaceInvaderUI);
            } else {
               JOptionPane.showMessageDialog(null,
                     "Does not support full screen!", "Error 0x01",
                     JOptionPane.ERROR_MESSAGE);
               System.exit(1);
            }
         }
      });
   }
}

// class SpaceInvaderUI extends JWindow {
class SpaceInvaderUI extends JFrame {

   private JPanel drawingPanel;
   private Image background;
   private JButton btnExit;

   public SpaceInvaderUI(GraphicsConfiguration gc) {
      super(gc);
      createWindow();
      addKeyBindings();
      setUndecorated(true);
   }

   private void addKeyBindings() {
      int condition = JPanel.WHEN_IN_FOCUSED_WINDOW;
      InputMap inputMap = drawingPanel.getInputMap(condition );
      ActionMap actionMap = drawingPanel.getActionMap();

      boolean released = false;
      KeyStroke upArrowKeyStrokePressed = KeyStroke.getKeyStroke(KeyEvent.VK_UP, 0, released );
      String upArrowPressed = "up arrow pressed";
      inputMap.put(upArrowKeyStrokePressed , upArrowPressed);
      actionMap.put(upArrowPressed, new AbstractAction() {

         @Override
         public void actionPerformed(ActionEvent arg0) {
            System.out.println("up arrow pressed");
         }
      });

      released = true;
      String upArrowReleased = "up arrow released";
      KeyStroke upArrowKeyStrokeReleased = KeyStroke.getKeyStroke(KeyEvent.VK_UP, 0, released );
      inputMap.put(upArrowKeyStrokeReleased , upArrowReleased);
      actionMap.put(upArrowReleased , new AbstractAction() {

         @Override
         public void actionPerformed(ActionEvent arg0) {
            System.out.println("up arrow released");
         }
      });

   }

   private void createComponents() throws HeadlessException {
      drawingPanel = new DrawingPanel(background, this);
      btnExit = new JButton("Exit");
   }

   private void createWindow() {
      createComponents();
      addListeners();
      addComponentsToWindow();
   }

   private void addComponentsToWindow() {
      add(drawingPanel, BorderLayout.CENTER);
      add(btnExit, BorderLayout.SOUTH);
   }

   private void addListeners() {
//      KeyboardFocusManager manager = KeyboardFocusManager
//            .getCurrentKeyboardFocusManager();
//      manager.addKeyEventDispatcher(new MyDispatcher());
      btnExit.addActionListener(new ActionListener() {

         @Override
         public void actionPerformed(ActionEvent ae) {
            System.exit(0);
         }
      });
   }
//
//   private class MyDispatcher implements KeyEventDispatcher {
//
//      @Override
//      public boolean dispatchKeyEvent(KeyEvent e) {
//         System.out.println("in dispatch. KeyEvent := " + e);
//         if (e.getID() == KeyEvent.KEY_PRESSED) {
//            System.out.println("pressed");
//            System.exit(0);
//         } else if (e.getID() == KeyEvent.KEY_RELEASED) {
//            System.out.println("released");
//            System.exit(0);
//         } else if (e.getID() == KeyEvent.KEY_TYPED) {
//            System.out.println("Typed");
//            System.exit(0);
//         }
//         return false;
//      }
//   }
}

class DrawingPanel extends JPanel {

   private final Image background;
   private final SpaceInvaderUI invaderUI;

   DrawingPanel(Image background, SpaceInvaderUI invaderUI) {
      this.background = background;
      this.invaderUI = invaderUI;
      setBackground(Color.pink);
   }

   @Override
   protected void paintComponent(Graphics grphcs) {
      super.paintComponent(grphcs);
   }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-24T16:48:24.817

如this related 所示，您可以对按钮*和*键绑定[`FullScreenTest`](https://stackoverflow.com/a/7457102/230513)使用相同的`Action`实例。

 *附录：@nIcE cOw 问，我们可以*通过使用**and来**添加多个键* ，*并使用同一个**类*吗？`JComponent` *`InputMap` *`ActionMap` *`AbstractAction`***

 ***是的，多个键绑定是可能的；我有时会调用`doClick()`以获得视听反馈，如此[处所示](https://stackoverflow.com/a/5797965/230513)。****

# java - 将拦截器的结果传递给链中的下一个拦截器

> ID：11178909
> 
> 赞同：2
> 
> 时间：2012-06-24T16:01:09.993
> 
> 标签：java, interceptor, spring-aop, chain

可以请任何人建议这样做的方法吗？假设我想将interceptorA invoke() 方法的结果传递给interceptorB，而不是只让方法调用通过它们。

```
<bean id="personTarget" class="com.mycompany.PersonImpl">
    <property name="name" value="Tony"/>
    <property name="age" value="51"/>
</bean>

<bean id="interceptorA" class="com.example.MySampleInterceptor"/>
<bean id="interceptorB" class="org.springframework.aop.interceptor.DebugInterceptor"/>

<bean id="person" 
    class="org.springframework.aop.framework.ProxyFactoryBean">
    <property name="proxyInterfaces" value="com.mycompany.Person"/>

    <property name="target" ref="personTarget"/>
    <property name="interceptorNames">
        <list>
            <value>interceptorA</value>
            <value>interceptorB</value>
        </list>
    </property>
</bean> 
```

一种可能的方法似乎是反过来订购拦截器并执行以下操作：

```
public class DebugInterceptor implements MethodInterceptor {

    public Object invoke(MethodInvocation invocation) throws Throwable {
        System.out.println("Before: invocation=[" + invocation + "]");
        Object rval = invocation.proceed();
        System.out.println("Invocation returned");
        return rval;
    }
} 
```

具有前一个拦截器的第一个拦截器使用结果值。

# php - 为什么我生成的 OAuth 签名与 Twitter 的不同？

> ID：11178912
> 
> 赞同：1
> 
> 时间：2012-06-24T16:01:42.347
> 
> 标签：php, oauth, twitter, base64

我正在编写一个脚本来与 twitter 交谈——除了生成正确的签名之外，一切似乎都很好，我得到了一个访问错误。但是，更改我的变量以匹配 twitter 文档中的变量会产生不同的结果。在[https://dev.twitter.com/docs/auth/creating-signature](https://dev.twitter.com/docs/auth/creating-signature)的底部，它说：

```
For example, the output given the base string and signing key 
given on this page is 
      B6 79 C0 AF 18 F4 E9 C5 87 AB 8E 20 0A CD 4E 48 A9 3F 8C B6 
```

我的代码产生几乎相同的东西——只是没有空格和小写。但是，当我使用 base64_encode() 时，我得到的值与文档 ( `tnnArxj06cWHq44gCs1OSKk/jLY=`) 中的值不同，即使尝试使用不同的大小写/间距/等：

```
echo base64_encode('B679C0AF18F4E9C587AB8E200ACD4E48A93F8CB6');
echo strtolower(base64_encode('B679C0AF18F4E9C587AB8E200ACD4E48A93F8CB6'));
echo base64_encode('B6 79 C0 AF 18 F4 E9 C5 87 AB 8E 20 0A CD 4E 48 A9 3F 8C B6');
echo base64_encode(strtolower('B6 79 C0 AF 18 F4 E9 C5 87 AB 8E 20 0A CD 4E 48 A9 3F 8C B6')); 
```

结果：

```
QjY3OUMwQUYxOEY0RTlDNTg3QUI4RTIwMEFDRDRFNDhBOTNGOENCNg==
qjy3oumwquyxoey0rtldntg3qui4rtiwmefdrdrfndhbotngoencng==
QjYgNzkgQzAgQUYgMTggRjQgRTkgQzUgODcgQUIgOEUgMjAgMEEgQ0QgNEUgNDggQTkgM0YgOEMgQjY=
YjYgNzkgYzAgYWYgMTggZjQgZTkgYzUgODcgYWIgOGUgMjAgMGEgY2QgNGUgNDggYTkgM2YgOGMgYjY= 
```

我在这里遗漏了一些明显的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T16:17:43.037

你对 Base64 有误解。

Base64 采用任意值 (0-255) 的字节数组，并使用数字 0-9、AZ、az 和 + 和 / 将这些字节编码为可打印的数据字符串。

正如 base10 使用数字 0-9，base2 使用 0 和 1 一样，base64 使用字母表中的字符来表示数字。`A`base64 中的 an与`a`. 因此，您`strtolower()`在 base64 编码的字符串上使用不会带来任何乐趣。

行。现在回到推特，他们说结果是：

```
B6 79 C0 AF 18 F4 E9 C5 87 AB 8E 20 0A CD 4E 48 A9 3F 8C B6 
```

这些是十六进制数字。这不是 base64 编码的值。如果你对它进行 base64，你会得到别的东西（更多数据要遵循）。

如果将其放入字符串中，并尝试对字符串进行 base64 编码，您将再次失败。Twitter 并不是说​​“这是你应该得到的字符串”。这就是说，这是你应该得到的字节数组。

弗什泰？

* * *

这段代码

```
$p = pack("C*", 0xB6, 0x79, 0xC0, 0xAF, 0x18, 0xF4, 0xE9, 0xC5, 0x87,
          0xAB, 0x8E, 0x20, 0x0A, 0xCD, 0x4E, 0x48, 0xA9, 0x3F, 0x8C, 0xB6);
$b64 = base64_encode($p);
echo "base64: " . $b64 . "\n"; 
```

产量：

```
base64: tnnArxj06cWHq44gCs1OSKk/jLY= 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T16:24:51.107

您首先需要将十六进制字符串转换为二进制：

```
$bin = pack('H*', 'B679C0AF18F4E9C587AB8E200ACD4E48A93F8CB6');
var_dump(base64_encode($bin) === 'tnnArxj06cWHq44gCs1OSKk/jLY='); 
```

# c# - 保护对编辑用户详细信息的访问

> ID：11178917
> 
> 赞同：1
> 
> 时间：2012-06-24T16:02:04.260
> 
> 标签：c#, asp.net, asp.net-mvc-3, authentication, forms-authentication

在我认为是一项非常常见的任务的方向上，我遇到了一些绊脚石。您在哪里验证登录用户是否被允许编辑一条数据。在这种情况下，a`User`有一个 Id、EmailAddress、Name 和一个`Address`对象集合。An`Address`包含几个属性，一个是 UserId，它所属的用户的 id。应该只允许用户编辑`Address`属于他们的对象。编辑`Address`何时/何地检查用户是否被允许这样做。

我这周刚刚学习了 ASP.NET MVC3，并且正在将其付诸实践。我创建了一个 Web 应用程序，该应用程序使用默认的 MembershipProvider 登录用户（我将在以后将其替换为自定义的）。最终结果是登录后，`User.Identity.Name`控制器中的属性返回用户的电子邮件地址。

如果用户想查看自己的详细信息，我会`Addresses`调用`AccountController`. 如下。

```
[Authorize]
public ActionResult Addresses()
{
    IEnumerable<Address> addresses = _myService.GetUserAddresss(User.Identity.Name));
    return View(addresses);
} 
```

现在，如果用户想要编辑地址详细信息，他们可以调用一个操作来获取地址并显示它，并调用一个操作来保存对地址的编辑。

```
[Authorize]
public ActionResult Address(int id)
{
    Address address= _myService.GetAddress(id));
    return View(address);
}

[Authorize]
[HttpPost]
public ActionResult Address(EditAddressModel model)
{
    Address address = _myService.SaveDetail(model.Address));
    return View(address );
} 
```

上述方法的缺陷在于，如果用户访问 url `../Account/Address/12`。然后他们可以查看和编辑`Address`id 为 12 的（如果存在），无论他们是否创建了它。

我正在遵循 N 层方法。因此，我让控制器与服务对话，该服务与业务逻辑层对话，该服务与存储库对话，最后使用 Entity Framework 4 与数据库对话。授权检查应该在哪里进行？

我考虑了以下解决方案，但无法确定合适的方法。

**理念一**

在控制器类中，因为控制器有权访问 User.Identity.Name 属性。使用此属性，它可以检查从服务返回的 Address 中的 userid 是否与当前登录的用户匹配。如果没有，则显示错误页面，否则让他们正常查看/编辑。

`Address`优点 - 实现简单，只需在服务返回对象后添加额外的 if 语句。控制器有权访问 User.Identity.Name。

缺点 - 数据返回给控制器，由控制器决定用户看不到它。感觉就像“只有用户可以编辑自己的地址”的业务逻辑已经渗透到控制器中。

**想法 2**

在业务层。控制器使用 userId 和 detailId ( `_myService.GetAddress(User.Identity.Name, detailId));`) 调用服务，该服务又调用业务层。业务层有一个方法`public Address GetAddress(int userId, int addressId)`当业务层被请求从数据库中获取一个`Address`时，它会检查返回的地址是否属于用户并返回它。如果不是，则返回 null。因此，控制器将从服务获得空响应，并显示适当的错误消息。

优势 - 用户仅编辑其详细信息的业务逻辑位于业务层中。

缺点 - 由于业务逻辑无法访问 User.Identity.Name，因此服务和业务类中的每个方法都需要一个 userId 参数，这感觉是错误的和不必要的膨胀。

**想法 3**

如上，除了 Service 和 Business 层类之外，还有一个名为 UserId 的属性。这用于检查用户是否可以访问数据库资源。这可以在创建期间或调用服务之前设置。IE

```
[Authorize]
public ActionResult Address(int id)
{
    _myService.User = User.Identity.Name;
    Address address = _myService.GetAddress(id));
    return View(address);
} 
```

优势 - 用户仅编辑其详细信息的业务逻辑位于业务层中。无需将 userId 传递给每个方法调用。

缺点 - 我从未见过使用这种方法的示例。而且我觉得不对。并不是说我使用 WCF 作为服务层。但我敢肯定，如果我是的话，拥有这个额外的财产是行不通的。

**想法4**

访问业务层中的 User.Identity.Name，而无需将其通过服务从控制器传递到业务层。不确定是否可能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T16:48:53.550

只需在每个查询中包含用户的 ID。你已经在想法二中做到了这一点。作为安全审计的一部分，如果作为团队的一部分执行此操作，请确保每个数据访问方法都包含参数，并且还在其 where 子句中对数据库的查询中使用该用户 ID 或名称。集成测试在这里可以帮助为用户创建一条记录，并尝试通过调用传入另一个用户名参数的方法来按 id 加载它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T16:50:00.263

我建议在您的业务逻辑层中进行授权。您可以在应用程序中的任何您喜欢的位置访问当前用户的主体（只要它是同一个应用程序域）。您需要做的就是访问静态成员 HttpContext.Current，您可以检索当前 HttpContext 的用户主体。

[主体 HttpContext.Current.User](http://msdn.microsoft.com/en-us/library/system.web.httpcontext.user.aspx)

显然，包含此代码的程序集将需要引用 System.Web。我认为这在网络应用程序中不应该是一个大问题。

为了进一步将您的业务逻辑与对该静态成员的调用分离，我建议使用[适配器模式](http://en.wikipedia.org/wiki/Adapter_pattern)来包装调用并检索用户的原则。这样，如果您决定放弃 Membership 以支持其他一些身份验证/授权框架，或者您选择模拟它，您就没有与 HttpContext.Current 的具体耦合。

下面是访问当前上下文的用户原则的适配器示例。

```
public interface IUserAdapter
{
    IPrincipal GetUserPrincipal();
    void SetAuthenticationCookie(IUser user);
    void SignOut();
}

// my business logic representation of a user
public interface IUser
{
    int Id { get; set; }
    string Name { get; set; }
}

public class WebUserAdapter : IUserAdapter
{
    public IPrincipal GetUserPrincipal()
    {
        return HttpContext.Current.User;
    }

    public void SetAuthenticationCookie(IUser user)
    {
        FormsAuthentication.SetAuthCookie(user.Id.ToString(), false);
    }

    public void SignOut()
    {
        FormsAuthentication.SignOut();
    }
} 
```

# ruby - 常量与按需实例化的对象 - 哪个是最佳的？

> ID：11178919
> 
> 赞同：1
> 
> 时间：2012-06-24T16:02:14.823
> 
> 标签：ruby, oop, optimization, memory-management, garbage-collection

采取以下方法（用 Ruby 编写，但这个问题可以应用于大多数 OO 语言）

```
# Getter method which returns an alert
def alertView
  _alertView = AlertView.new
  _alertView.title = "This is the title"
  _alertView.body = "This is the body of my alert"
  _alertView
end 
```

假设在应用程序的整个生命周期中定期调用此方法。标题和正文属性字符串每次都会被实例化为新对象。

为了优化这一点，我们可以执行以下操作：

```
ALERT_TITLE = "This is the title"
ALERT_BODY  = "This is the body of my alert"

# Getter method which returns an alert
def alertView
  _alertView = AlertView.new
  _alertView.title = ALERT_TITLE
  _alertView.body = ALERT_BODY
  _alertView
end 
```

这样，`ALERT_TITLE`and`ALERT_BODY`字符串只在定义类时实例化一次，然后在整个应用程序的生命周期中重用。

我的问题是：第二种方法是最优的吗？虽然这意味着垃圾收集器的工作量更少并且内存使用可能更稳定，但这也意味着应用程序一直在占用更多内存，而不是释放当前不需要的对象。我在将它应用到我的应用程序中的所有常量字符串或根本不应用这种方法以及在需要时定义每个字符串之间左右为难。

第三种方法是使用类变量，但与第二种方法相比，它提供的唯一优势是变量是延迟加载的。

```
# Getter method which returns an alert
def alertView
  _alertView = AlertView.new
  _alertView.title = @@alert_title ||= "This is the title"
  _alertView.body = @@alert_body ||= "This is the body of my alert"
  _alertView
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T17:30:13.140

上述两种变体并不完全相等。观察：

```
1.9.3p194 :001 > A = 'a'
 => "a" 
1.9.3p194 :002 > s1 = A # constant assignment
 => "a" 
1.9.3p194 :003 > s2 = A
 => "a" 
1.9.3p194 :004 > s1 << 'b'
 => "ab" 
1.9.3p194 :005 > s2 # you changed s2 as well!
 => "ab" 
1.9.3p194 :006 > s1 = 'a' # literal assignment
 => "a" 
1.9.3p194 :007 > s2 = 'a'
 => "a" 
1.9.3p194 :008 > s1 << 'b'
 => "ab" 
1.9.3p194 :009 > s2 # s2 stayed the same.
 => "a" 
```

当两个变量被分配相同的常量时，内存中仍然**只有一个**字符串实例。当您分配文字字符串时，每个变量在内存中都有自己的实例（这不适用于符号，您在另一条评论中正确地指出了这一点）。因此，一切都取决于您想要实现（或避免）什么，创建多少实例等等。

如果问题真的与字符串有关，就像您的示例中那样，我会说您不再关心效率并开始关心代码可读性，因为所有这些都是当今程序可用内存的**一小部分**。

所以，从程序员的角度来看，我建议你做任何你认为更清洁的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T16:18:04.960

好吧，无论如何，在 C# 和 Java 中，这些都同样是最优的。由于所谓的“字符串实习”，编译器会识别出您每次都在实例化相同的字符串，因此它将为每个新的 AlertView 对象提供与您正在使用的两个字符串相同的两个对象引用。

现在，Ruby 是一种解释性语言，而且……不是 C# 或 Java……我不确定它是否这样做。所以，希望其他人也能回答。但我的第一个猜测是它确实实现了字符串内部化——仅仅是因为，即使它被解释了，它仍然应该能够在遇到字符串常量时轻松识别它们，并以其他语言处理它们的相同（优化）方式处理它们。

# javascript - 为什么这个非常简单的 javascript/jquery 代码不能正常工作

> ID：11178921
> 
> 赞同：1
> 
> 时间：2012-06-24T16:02:37.817
> 
> 标签：javascript, jquery

我有一个非常简单的 JavaScript/jquery 代码，它不能正常工作。问题似乎是在循环运行时似乎没有计算 id 为“circle”的 div 的定位。只需要知道问题发生的原因以及是否有可用的修复程序。

这是链接[http://jsfiddle.net/TDRyS/](http://jsfiddle.net/TDRyS/) 基本上我要做的是尝试将球向上移动，一旦它与顶部的距离为 500 像素。

**编码：**

```
var maxa = document.width;
var maxb = document.height;
$(document).ready(function() {

    dothis();
});

function dothis() {
    var left = parseInt(document.getElementById('circle').style.left);
    var top = parseInt(document.getElementById('circle').style.top);
    if (top >= 500) {
        $("#circle").animate({
            top: "-=" + Math.floor(Math.random() * 100 + 1) + "px",
            left: "-=" + Math.floor(Math.random() * 100 + 1) + "px"
        }, 1000);
    }
    else {
        $("#circle").animate({
            top: "+=" + Math.floor(Math.random() * 100 + 1) + "px",
            left: "+=" + Math.floor(Math.random() * 100 + 1) + "px"
        }, 1000);

    }

    dothis();
}​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T16:09:39.133

您需要在再次调用函数之前设置超时\将函数作为回调传递

**[现场演示](http://jsfiddle.net/TDRyS/8/embedded/result/)**

**完整代码：**

```
var maxa = document.width;
var maxb = document.height;
var up = false;
$(document).ready(function() {

    doThis();
});

function doThis() {

    var left = parseInt(document.getElementById('circle').style.left);
    var top = parseInt(document.getElementById('circle').style.top);
    if (top < 50) {
        up = false;
    }
    if (top >= 500 || up) {

        up = true;
        $("#circle").animate({
            top: "-=" + Math.floor(Math.random() * 100 + 1) + "px",
            left: "-=" + Math.floor(Math.random() * 100 + 1) + "px"
        }, 500, doThis);
    }
    else {
        $("#circle").animate({
            top: "+=" + Math.floor(Math.random() * 100 + 1) + "px",
            left: "+=" + Math.floor(Math.random() * 100 + 1) + "px"
        }, 500, doThis);

    }
}​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T16:15:09.433

这有几个问题：

1.  您无法从 DOM 元素的“样式”属性中读取来自 CSS 的样式信息。无论如何，您都在使用 jQuery；它可以为您提供样式信息。
2.  对“动画”的调用不会同步完成。您可以将“dothis”作为第三个参数传递，jQuery 将在动画完成时调用您的函数。

[这](http://jsfiddle.net/TDRyS/6/)是一个工作版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T16:10:02.523

要计算左侧和顶部，您还可以使用：

```
$("#circle").position().left // or .top (relative to parent object)

$("#circle").offset().left // or .top (relative to window) 
```

无论如何，代码对我来说似乎是错误的，因为您一直在调用“动画”；在调用另一个动画之前，不要让动画“运行”任何时间（如果 top>500px 则执行讨厌的函数递归）。

您要做的是 - 等待动画完成，使用时间延迟或使用某些事件 - 如果 top>500，则使用计时器每 n 毫秒检查一次。如果是这样，停止当前动画并在相反方向开始一个新动画

# matlab - 不同图像堆栈的图像标准化、图像范围和图像缩放

> ID：11178925
> 
> 赞同：6
> 
> 时间：2012-06-24T16:02:54.523
> 
> 标签：matlab, image-processing, normalization

我对图像标准化、图像范围和图像缩放感到非常困惑。我正在使用一种算法（我已在[上一个问题](https://stackoverflow.com/questions/10863734/image-processing-algorithm-in-matlab/)中上传了该算法），在应用该算法后，我使用[维基百科](http://en.wikipedia.org/wiki/Normalization_%28image_processing%29)中的这个公式来规范化图像：

![在此处输入图像描述](../Images/99ceaf337a4855c540d54d9282f4c2a9.png)

使用`getrangefromclass(filtImag1{i})`MATLAB，应用算法之前的矩阵范围是 [0 255]，应用算法之后的范围是 [0 1]。

问题是我需要找到一个参考来确定归一化公式是否正确？我也有 5 叠图像，每叠包含 600 张图像。我已经为每个堆栈应用了算法，因为算法的结果是每个堆栈有 10 张图像，所以我最终会得到 50 张图像，我需要对它们进行分析和比较。我找到了 50 个图像的最大值和最小值，然后将每个图像传递到公式中以对图像进行归一化。

虽然图像的范围是 [0 1] 但图像的最大值是：max = 3.6714e+004

为什么？不应该是1吗？这是正常化的正确方法吗？如何应用缩放？我需要这样做吗？

这是规范化代码：

```
%%%%%%%%%%%%%%Find Min and Max between the results%%%%%%%%%%%%%%%%%%%%%%% 
pre_max = max(filtImag1{1}(:));
for i=1:10
   new_max = max(filtImag1{i}(:));
    if (pre_max<new_max)
        pre_max=max(filtImag1{i}(:));
    end
end
new_max = pre_max;

pre_min = min(filtImag1{1}(:));
for i=1:10
   new_min = min(filtImag1{i}(:));
    if (pre_min>new_min)
        pre_min = min(filtImag1{i}(:));
    end
end
new_min = pre_min;

%%%%%%%%%%%%%%normalization %%%%%%%%%%%%%%%%%%%%%%%
 for i=1:10
 temp_imag = filtImag1{i}(:,:);
 x=isnan(temp_imag);
 temp_imag(x)=0;
 t_max = max(max(temp_imag));
 t_min = min(min(temp_imag));
 temp_imag = (double(temp_imag-t_min)).*((double(new_max)-double(new_min))/double(t_max-t_min))+(double(new_min));
 imag_test2{i}(:,:) = temp_imag;
 end 
```

**编辑** 我已经根据建议的答案更改了代码，但结果是黑色图像

%找到它们之间的最大值和最小值 pre_max = max(sTStack{1}(:)); 对于 i=1:40 newMax = max(sTStack{i}(:)); 如果（pre_max

pre_min = min(sTStack{1}(:)); 对于 i=1:40 newMin = min(sTStack{i}(:)); if (pre_min>newMin) pre_min = min(sTStack{i}(:)); 结束 t_min = pre_min;

%%%%%%%%%%%%%%%%%%%%%% 标准化图像：%%%%%%%%%%%%%%%%%%%%%% %%%%%

对于 i=1:40 NTstack{i} = (sTStack{i} - t_min)/(t_max-t_min); 结尾

对于 i=10:10:40 图，imshow(NTstack{i}); colorbar 颜色图喷射端

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-24T18:36:57.563

您提供的 Wikipedia 片段是正确的，可用于使用以下 MATLAB 代码对图像进行标准化：

```
%% Create an Example Image:
rand('seed', 1982);
n = 16;
myImg= rand(n,n)*.2 + .5;

%% Normalize the Image:
myRange = getrangefromclass(myImg(1));
newMax = myRange(2);
newMin = myRange(1);

myImgNorm = (myImg - min(myImg(:)))*(newMax - newMin)/(max(myImg(:)) - min(myImg(:))) + newMin; 
```

一些图像的问题在于，尽管它们只占据了一小部分可能的值。如果您的值可以介于 0 和 1 之间，则黑色为 0，白色为 1。但是，如果图像中最暗的点是 0.5，而最亮的点是 0.7，那么它可能看起来褪色到您的处理或用户何时被可视化（请注意，出于这个原因，MATLAB 的 imagesc 会在显示之前自动对图像进行规范化）。

如果您使用 hist(myImg(:)) 查看图像的直方图，您可以知道图像实际使用的允许值是多少。在标准化图像中，最小值为 0，最大值为 1（或您使用的任何范围）。

实现这个等式的一个常见错误是没有正确放置括号，在缩放之前没有减去图像的最小值，或者没有加回“newMin”。

您可以在以下代码和图像中一起查看所有内容。请注意原始图像 (1) 仅使用了一小部分空间 (2)，因此当我们不让 imagesc 自动缩放 clim 参数时，它看起来已经褪色。然而，一旦我们对 (3) 进行归一化，图像就会同时具有非常暗和非常亮的值，并且直方图从 0 一直延伸到 1 (4)。虽然尚不清楚您的代码在做什么或没有做什么，但将其与此示例进行比较应该可以解决您的问题。

```
%% Create an Example Image:
rand('seed', 1982);
n = 16;
myImg= rand(n,n)*.2 + .5;

%% Normalize the Image:
myRange = getrangefromclass(myImg(1));
newMax = myRange(2);
newMin = myRange(1);

myImgNorm = (myImg - min(myImg(:)))*(newMax - newMin)/(max(myImg(:)) - min(myImg(:))) + newMin;

%% Display the Image:
figure(42);
clf;

% Display the original:
subplot(2,2,1);
imagesc(myImg);
set(gca, 'clim', [0,1]);;
title('(1) Original Image');

% Display the hist of the original:
subplot(2,2,3);
hist(myImg(:))
xlim([0,1]);
title('(2) Histogram Of Original Image');

% Display the normalized image:
subplot(2,2,2);
imagesc(myImgNorm);
title('(3) Normalized Image');

% Display the hist of the normalized image:
subplot(2,2,4);
hist(myImgNorm(:))
title('(4) Histogram of Normalized Image');
xlim([0,1]);

colormap gray 
```

![在此处输入图像描述](../Images/f538475506df1378e5dc657345d088f3.png)

**编辑：**

此外，关于 getrangefromclass(...) 如何解决您的问题，还有一些重要的注意事项需要说明。此函数返回“基于其类的图像的默认显示范围”——即，它返回 MATLAB 认为该数据类型表示图片的合理值范围。对于 uint8 数据，这是 [0, 255]。对于 int16，这是 [-32768, 32767]。对于您的情况，双精度，范围是 [0, 1] 不是因为这是最小值和最大值，而是因为这是常规的，双精度数据类型具有特殊的表示形式，使该范围非常合理。*请注意，范围与您的数据实际无关*. 如果您的数据小于或大于最小值，则最大值将与 MATLAB 认为适合图片的数据完全不同。在双重或单一的情况下，您的价值可能会大得多。要将值标准化到 [0, 1] 之间，我们可以使用我们一直在讨论的代码。

在这种情况下，我们创建了一个具有大正负值的随机图像，但我们会将它们全部缩放到零和一之间。也就是说，我们将最暗的颜色设为 0，将亮的颜色设为 1——而在此之前，最小的是负千位，最大的是正千位。但是，请注意当 x 轴值更改为 0,1 时，直方图形状如何保持不变。这应该说明为什么 MATLAB 范围是 [0,1] 但您的最小值/最大值不同——这很好，您的规范化代码将修复零和一之间的所有内容。

```
randn('seed', 1982);
myImg = randn(n,n)*1000;
% Normalize the Image:
myRange = getrangefromclass(myImg(1));
newMax = myRange(2);
newMin = myRange(1);

myImgNorm = (myImg - min(myImg(:)))*(newMax - newMin)/(max(myImg(:)) - min(myImg(:))) + newMin;

% Display the Image:
figure(42);
clf;

% Display the original:
subplot(2,2,1);
imagesc(myImg);
% set(gca, 'clim', [0,1]);;
title('(1) Original Image');
colorbar
% Display the hist of the original:
subplot(2,2,3);
hist(myImg(:))
title('(2) Histogram Of Original Image');
axis tight;

% Display the normalized image:
subplot(2,2,2);
imagesc(myImgNorm);
title('(3) Normalized Image');
colorbar

% Display the hist of the normalized image:
subplot(2,2,4);
hist(myImgNorm(:))
title('(4) Histogram of Normalized Image');
axis tight;

colormap gray 
```

![在此处输入图像描述](../Images/16620a6a61c5f5462260492dccbe6901.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-24T19:46:35.250

回答了你之前的问题，我想我理解你的困惑。

首先，输入图像是类型`uint8`（因此范围为 [0,255]），并且由于我们需要对信号执行处理（巴特沃斯滤波），因此必须转换为`double`数据类型以避免值被截断。

现在在处理结束时，生成的“图像”是类型`double`但具有任意范围（它们代表信号中的平均能量）。现在，如果我们想要显示这些图像甚至对它们执行图像处理（您试图`medfilt2`在原始代码中应用），MATLAB 期望图像类型`double`在 [0,1] 范围内。

我在代码中使用的公式和您刚刚提供的公式是兼容的，只是我正在对 [0,1] 的范围进行归一化，因此`newMax = 1`，`newMin = 0`方程式最终就像我之前描述的那样简单：

```
 img = ( img - min(img(:)) ) ./ ( max(img(:)) - min(img(:)) ); 
```

请记住，您应该单独对每个图像进行归一化，即在公式中为图像本身计算最小值/最大值，而不是从整个图像组中计算。如果您回顾我提出的解决方案，图像存储在一个单元格数组中，并且使用 CELLFUN 完成计算以分别获取每个图像的最小值/最大值：

```
Tf = cellfun(@(x)reshape((x-min(x))./range(x),sz), Tf, 'Uniform',false); 
```

显然，信号被存储为线性化向量（每个都在一个单元格中），因此我们将每个信号标准化为 [0,1] 范围，然后我们将其重新整形为适当的图像矩阵。

现在，如果你想在那之后返回`uint8`图像，一个简单的调用`im2uint8`就足够了。

我应该补充一点，我们上面执行的线性变换类型称为最小/最大归一化，但它肯定不是唯一的类型（有关其他示例，请参见此[答案](https://stackoverflow.com/a/4889663/97160)）。人们还可以研究其他对比度增强技术（想想直方图均衡[等](https://stackoverflow.com/a/6576340/97160)）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-24T18:29:53.263

我通常`mat2gray`从图像处理工具箱中使用这些目的：[mat2gray](http://www.mathworks.se/help/toolbox/images/ref/mat2gray.html)。我应用了与您在上面提到的完全相同的线性插值。在内部它调用[imlincomb](http://www.mathworks.se/help/toolbox/images/ref/imlincomb.html)。

您所指的问题让我相信您以某种方式错误地执行了上述等式。

# javascript - 粘性标题 - 相对于动态标题长度的正文位置

> ID：11178931
> 
> 赞同：1
> 
> 时间：2012-06-24T16:03:54.610
> 
> 标签：javascript, css, sticky

试图让标题粘在页面顶部 - `postion:fixed`- 有效

但是在这样做时，主体不能相对于标题放置 - 如果`position:relative` [Demo](http://jsfiddle.net/waBxU/2/)

我想要达到的目标 -

*   与滚动一起移动的粘性标题

*   与上述标题相对高度的主体（高度是动态的）

到目前为止我做了什么：[**DEMO**](http://jsfiddle.net/BGr97/1/)

我正在尝试找到一个**纯 CSS**（甚至可能吗？）解决方案，但一直没有成功 - 任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T16:10:40.457

尝试添加`padding-top: XXX`到正文包装器 div，其中 XXX 等于标题高度。为了使用纯 CSS 做到这一点（具有固定的标题和可滚动的正文），您必须预先知道标题的高度。否则它将覆盖身体 div 的顶部。

# spring - Spring RestTemplate 给出“500”错误，但 URL 相同，credentails 在 RestClient 和 Curl 中有效

> ID：11178937
> 
> 赞同：23
> 
> 时间：2012-06-24T16:04:26.997
> 
> 标签：spring

一个 Url，Credentials 在 RestClient UI 以及 Curl 中工作，当我通过 Spring RestTemplate 访问相同的内容时，我得到“500”错误。

我正在使用以下代码：

```
MultiValueMap<String, Object> map = new LinkedMultiValueMap<String, Object>();
map.add("name", user);
map.add("password", password);
restTemplate.postForObject(url, request, Employee.class, map); 
```

请让我知道您的建议或意见以解决问题。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2015-04-06T08:30:15.900

我建议创建您的`HttpComponentsClientHttpRequestFactory`并将其传递给您`RestTemplate`，如下所述：

```
ClientHttpRequestFactory requestFactory = new     
      HttpComponentsClientHttpRequestFactory(HttpClients.createDefault());

RestTemplate restTemplate = new RestTemplate(requestFactory); 
```

通过这种方式，您可以在测试应用程序时避免服务器端问题（例如遇到错误代码 500）。

我遇到了在我的本地环境中而不是在服务器上工作的相同问题。

在构建它时传递`HttpClients.createDefault()`给你是一个很好的做法`HttpComponentsClientHttpRequestFactory`，因为默认情况下，这个工厂使用系统属性`HttpClient`为你的工厂创建，这可能会在真实的服务器环境中造成很多痛苦。您也可以通过您的自定义`HttpClient`.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-01-07T06:40:04.850

```
RestTemplate header Accept problem 
--> accept - text/plain, application/json, */*

HttpClient 4.x header Accept
--> accept - application/json 
```

所以我修好了

```
HttpHeaders headers = new HttpHeaders();
headers.add("Accept", MediaType.APPLICATION_JSON_VALUE); 
```

[http://www.manning-sandbox.com/message.jspa?messageID=119733](http://www.manning-sandbox.com/message.jspa?messageID=119733)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-07-10T12:26:25.337

我也遇到过服务器响应为**“500 Internal server error”的情况**

虽然我收到了**Postman**对相同参数值的成功响应。所以问题不在服务器端。

问题是参数名称**拼写错误，应用程序参数和服务器参数之间的拼写不匹配**

```
Server parameter        -> requestLabel
Application parameter   -> requestLable 
```

希望像我这样的新人能从中得到帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-03-05T12:34:31.880

如果您的数据合约类缺少默认构造函数，则可能会发生这种情况 - 因此 Jackson 无法构造它。**您可以尝试通过向您的类添加私有**默认构造函数来解决此问题（尽管它是私有的，但 Jackson 将能够构造您的类实例）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-02-07T02:34:19.560

下面工作正常

对于帖子：

restTemplate.postForObject(url, parametersMap, Employee.class);

url 是：String - REST API URL parametersMap - MultiValueMap Employee - 需要从 JSON 响应转换的对象

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-03-26T10:23:45.503

您将名称和密码作为 uri 变量传递：

```
public <T> T postForObject(java.lang.String url,
                                     @Nullable
                                     java.lang.Object request,
                                     java.lang.Class<T> responseType,
                                     java.util.Map<java.lang.String,?> uriVariables)

                          throws RestClientException 
```

[docs.spring.io](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/client/RestTemplate.html#postForObject-java.lang.String-java.lang.Object-java.lang.Class-java.lang.Object...-)

如果您有一些网址，例如： **[http://yourhost:8080/dosomethingwithemployee/name/password](http://yourhost:8080/dosomethingwithemployee/name/password)**并且您从 url 本身提取了名称和密码，那么它可能会起作用。

```
String url = "http://yourhost:8080/dosomethingwithemployee/{name}/{password}"
restTemplate.postForObject(url, request, Employee.class, map); 
```

但是，我认为您一直在尝试在请求正文中发送名称和密码：

```
public SomeType getResponse(String login, String password) {
        MultiValueMap<String, String> headers = new LinkedMultiValueMap<>();
        headers.add("Content-Type", "application/json");
        Employee employee = new Employee();
        employee.setName(login);
        employee.setPassword(password);
        SomeType responseBody = post("http://locahost:8080/dosomethingwithemployee", employee, headers, SomeType.class);
        return responseBody;
    }

    public <T> T post(String url, Object requestObject, MultiValueMap<String, String> headers, Class<T> responseType) {
        RestTemplate restTemplate = new RestTemplate();
        restTemplate.getMessageConverters().add(new MappingJackson2HttpMessageConverter());
        restTemplate.getMessageConverters().add(new StringHttpMessageConverter());

        HttpEntity request = new HttpEntity(requestObject, headers);
        T responseObject = restTemplate.postForObject(url, request, responseType);

        return responseObject;
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-05-22T21:16:08.217

虽然回答为时已晚，但如果上述解决方案不起作用，以下解决方案将对某人有所帮助。对我来说，错误在于 Request 对象及其标头。您的请求对象应根据 api 的要求生成 JSON。它不应该有任何额外的字段或额外的 getter 方法。就我而言，我有额外的 getter 方法，它添加了不必要的字段来请求

```
postForEntity = restTemplate.postForEntity(uri,entity,String.class); 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2021-01-07T07:51:56.040

我遇到过同样的问题。重新启动我的本地服务器重置连接并为我解决了问题。

# c# - 使用 WPF 检索数据哪个更快？

> ID：11178945
> 
> 赞同：0
> 
> 时间：2012-06-24T16:05:04.297
> 
> 标签：c#, .net, wpf

我有一个 .net 应用程序并想访问我网站上的数据库。

哪个检索数据更快？

1.  直接从我的.net 应用程序连接数据库？
2.  使用像 php 这样返回 xml/json 的第三方？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T16:12:07.597

不完全确定速度，这取决于你想做什么。如果你建立一个连接，想要检索 1000 条记录，做一些特殊的工作来过滤它们（不能移动到 SQL 查询中），然后最后只处理 3 条记录，为你做这件事的 web 服务会更快因为您只需要从服务器下载 3 条记录，而不是全部 1000 条。

但是，从安全角度来看，客户端应用程序无论如何都不应该直接连接到数据库。

您甚至不一定需要使用“像 php 这样的第三方”。看看 C#.NET 应用程序的 WCF 服务。

总而言之，很难以任何确定性或具体性发表评论，因为您并不具体说明您究竟想对您的应用程序做什么。

# html - 如何在 CSS 中创建双底边框

> ID：11178946
> 
> 赞同：7
> 
> 时间：2012-06-24T16:05:23.033
> 
> 标签：html, css, border

我想在标题的底部创建一个双边框，其中有两条不同粗细的线，中间有 1px 的空间。具体来说，顶线的粗细为 2px，底线为 1px。

这是我要在美学上实现的目标的图像示例-

![在此处输入图像描述](../Images/501145803482aaa625eb40b96daca625.png)

使用此设计方面的其他网站 - [http://www.rollingstone.com/](http://www.rollingstone.com/)

到目前为止，我已经尝试过 - “border-bottom: 1px Solid #000;” 没有运气。我将不胜感激任何进一步的建议

非常感谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-24T16:31:58.707

你可以做这样的事情，因为它不需要额外的标记。

[http://jsfiddle.net/aNc9X/](http://jsfiddle.net/aNc9X/)

![在此处输入图像描述](../Images/af75d681056aae1509fe9f76191aa8a2.png)

如此处所示：http: [//nicolasgallagher.com/multiple-backgrounds-and-borders-with-css2/demo/borders.html](http://nicolasgallagher.com/multiple-backgrounds-and-borders-with-css2/demo/borders.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T16:19:28.653

两个问题：

1.  您需要指定`double`而不是`solid`.
2.  您需要指定`3px`而不是`1px`. （一个像素不足以显示双边框加上它们之间的间隙）

您的最终代码如下所示：

```
border-bottom: 3px double #000; 
```

另见：http: [//jsfiddle.net/qRUwk/](http://jsfiddle.net/qRUwk/)

但是，标准 CSS 不能以不同的粗细显示两个边框。为此，您需要有额外的标记。有一些技巧可以用`before:`和`after:`样式来做到这一点，但它们变得相当复杂。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T16:31:12.990

试试这个 **CSS**

```
.title{
    font-size:35px;
    font-weight:bold;
    border-bottom:1px solid #000;
}
.title span{
    margin-bottom:4px;
    display:block;
    border-bottom:5px solid #000;
} 
```

**HTML**

```
<div class='title'>
    Title Here
<span class='border'></span>
<div>​ 
```

[**演示。**](http://jsfiddle.net/heera/xdVLP/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-24T16:13:49.783

尝试使用 div 和边框底部创建这些关键行，检查一下：

[http://jsfiddle.net/R2puF/](http://jsfiddle.net/R2puF/)

```
.divA{
  height: 1px;
  border-bottom: 2px solid black;
}
.divB{
  height: 1px;
  border-bottom: 1px solid black;
}​ 
```

然后你的HTML：

```
<h1>Title Here</h1>
<div class="divA"></div>
<div class="divB"></div>​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-13T14:11:45.460

我发现最好的方法是使用

```
<hr> 
```

如果你应用一个类，即：

```
<hr class="double"> 
```

然后像这样的CSS：

```
.double { 
  height: 3px; 
  border-top: 3px solid #ccc; 
  border-bottom: 1px solid #ccc; 
} 
```

它会给你想要的效果。希望这对仍在寻找的人有所帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-24T16:18:57.223

@Spudley - 我不知道边框的“双”值，这很有用，但没有给出更厚的上线。

Martin 的答案比我最初的答案（现在已编辑）要好，因为它不使用额外的 div，但是您可以使用他的技术而不必使用这样的图像（这是 Martin 小提琴中的修改代码）：

```
<h1><span>Hello World!</span></h1>​

h1 {font-size: 40px;
border-bottom: solid 2px black;
display: inline-block;}

h1 span{
border-bottom:solid 1px black;
padding: 3px;
}​ 
```

[jsfiddle在这里](http://jsfiddle.net/aQq96/1/)

顺便说一句，rollingstone 网站主要使用双线边框的图像，而不是实际的 css。我相信您知道，但是您可以右键单击并从您的网络浏览器中选择检查元素来探索网站是如何构建的。最好的学习方式！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-24T16:20:53.150

这是使用 RollingStone.com 中使用的背景图像的解决方案

```
h1{font-size:40px;}
h1 span{
    background: transparent url(http://assets.rollingstone.com/images/fe/layout/oxfordLine.gif) scroll repeat-x bottom left;
    padding: 0 0 8px;
}​ 
```

根据需要调整填充。

现场演示：http: [//jsfiddle.net/martinschaer/aQq96/](http://jsfiddle.net/martinschaer/aQq96/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-09-21T14:28:31.807

另一种选择是结合使用**边框**和一些**盒子阴影**技巧。核实：

```
h1 {
  border-bottom: 4px solid black;
  box-shadow: 0px 3px 0px 0px white, 0px 4px 0px 0px black;
} 
```

*工作演示：* [http ://codepen.io/jonathanhigley/pen/GpqMEm](http://codepen.io/jonathanhigley/pen/GpqMEm)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-02-21T07:40:27.947

以下是其他几种可能性：

**方法#01：**

我们可以使用黑色等纯色`linear-gradient()`组合填充标题的背景`transparent`，使其看起来像轮廓。

**必要的CSS：**

```
.heading {
  /* Make heading inline-block so that its width becomes dependent on content. 
     Ohterwise heading will take full available width as it is a block element. */
  display: inline-block;
  vertical-align: top;

  // Draws the outer (thin) border...
  border-bottom: 1px solid black;

  // Draws the inner (thick) border...
  background: linear-gradient(to top, transparent 3px, black 3px,
                                      black 6px, transparent 6px) no-repeat;
} 
```

**工作示例：**

```
.heading {
  background: linear-gradient(to top, transparent 3px, black 3px, black 6px, transparent 6px) no-repeat;

  border-bottom: 1px solid black;

  display: inline-block;
  vertical-align: top;
  padding-bottom: 10px;
}
```

```
<h1 class="heading">Title Here</h1>
```

* * *

**方法#02：**

1.  `border-bottom`使用 CSS属性绘制外部（细）轮廓。
2.  使用 CSS`linear-gradient()`函数创建一个看起来像边框的图像。
3.  用`background-size`CSS 属性控制它的大小。
4.  `background-position`将其放置在具有属性的所需位置。

**必要的CSS：**

```
.heading {
  // Draws the outer (thin) border...
  border-bottom: 1px solid black;

  // Draws the inner (thick) border...
  background-image: linear-gradient(black, black);
  background-repeat: no-repeat;
  background-size: 100% 3px;  // Increase / Decrease 2nd value will change height of image
  background-position: left bottom 3px;
} 
```

**工作示例：**

```
.heading {
  background-image: linear-gradient(black, black);
  background-repeat: no-repeat;
  background-size: 100% 3px;
  background-position: left bottom 3px;

  border-bottom: 1px solid black;

  display: inline-block;
  vertical-align: top;
  padding-bottom: 10px;
}
```

```
<h1 class="heading">Title Here</h1>
```

* * *

**截屏：**

[![带有双底边框的标题](../Images/b22c2bc303b9480b2f934f2cb6adfc24.png)](https://i.stack.imgur.com/3Fkdv.png)

* * *

**有用的资源：**

*   [规格](https://www.w3.org/TR/css3-images/#linear-gradients)
*   [MDN](https://developer.mozilla.org/en-US/docs/Web/CSS/linear-gradient)
*   [CSS技巧教程](https://css-tricks.com/css3-gradients/)

# dependencies - 是否可以在门户启动时定义 portlet 的初始化顺序？

> ID：11178948
> 
> 赞同：2
> 
> 时间：2012-06-24T16:05:28.870
> 
> 标签：dependencies, liferay, portlet, startup

我想在门户服务器启动时指定 Portlet 的初始化顺序。

是否可以？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T05:48:15.807

是的，有可能。

您可以通过设置依赖portlet的`required-deployment-contexts`属性来指定插件的部署顺序。`liferay-plugin-package.properties`

**例子：**

如果您的 portlet`my-custom-portlet`依赖于其他插件，那么您可以指定如下：

1) 对于单一依赖`required-deployment-contexts`：

```
required-deployment-contexts=my1-other-portlet 
```

2）对于多个`required-deployment-contexts`：

```
required-deployment-contexts=\
    my-other-theme,\
    my1-other-portlet,\
    my-other-hook,\
    my2-other-portlet 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-24T16:05:30.570

是的，您可以在 portlet 依赖项的定义上指定部署顺序。设置`required-deployment-contexts=MyPrevPortlet`在`liferay-plugin-package.properties`.

# batch-file - 使用批处理文件在文件中段落的最后一行之后插入新行

> ID：11178949
> 
> 赞同：2
> 
> 时间：2012-06-24T16:05:29.357
> 
> 标签：batch-file

我想使用批处理脚本在文件中的段落末尾插入一行。在我的文件中，段落的最后一行不清楚。它是具有“LoadModule name moduleName”形式的变量。

新行：“LoadModule new_module 模块/mod_newmod.so”

我的文件 input.conf

```
abc def xyz 

LoadModule foo_module libexec/mod_fooa.so
LoadModule proxy_module libexec/mod_proxy.so
LoadModule lmn_module libexec/mod_abc.so
LoadModule xyz_module libexec/mod_def.so

ExtendedStatus controls whether Apache will generate "full" status 
```

结果：

```
abc def xyz 

LoadModule foo_module libexec/mod_fooa.so
LoadModule proxy_module libexec/mod_proxy.so
LoadModule lmn_module libexec/mod_abc.so
LoadModule xyz_module libexec/mod_def.so
LoadModule new_module module/mod_newmod.so

ExtendedStatus controls whether Apache will generate "full" status 
```

在 LoadModule 段落的最后插入一个新行“LoadModule new_module module/mod_newmod.so”。请为此提出解决方案。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T16:50:07.397

```
@echo off
setlocal
set "file=test.txt"
set "here="
for /f "delims=:" %%A in ('findstr /lnbc:"LoadModule" "%file%" 2^>nul') do set here=%%A
if defined here (
  >"%file%.new" (
    for /f "tokens=1* delims=:" %%A in ('findstr /n "^" "%file%"') do (
      echo(%%B
      if %%A==%here% echo(LoadModule new_module module/mod_newmod.so
    )
  )
  move /y "%file%.new" "%file%"
)
type "%file%" 
```

此解决方案假定您现有的行都不以`:`. 如果任何行确实以 . 开头，则需要不同的解决方案`:`。

***编辑***- 如果 test.txt 不存在或 test.txt 不包含任何以“LoadModule”开头的现有行，则更新答案以不执行任何操作。

# php - 用php从xml文件中只读取第一个节点

> ID：11178952
> 
> 赞同：0
> 
> 时间：2012-06-24T16:05:35.797
> 
> 标签：php, xml

我正在尝试将 xml 数据读入 php。我设法用这个 scipt 读取了所有“标题”数据。问题是我只需要 xml 中的第一个“标题”元素！不幸的是，我立刻得到了所有这些。如何只读取第一个“标题”节点？

```
<?php

$filename = $_SERVER['DOCUMENT_ROOT'].'images/albums/album.xml';
if (file_exists($filename)) {
$doc = new DOMDocument(); 
$doc->load($filename); 
$destinations = $doc->getElementsByTagName("title"); 

foreach ($destinations as $destination) { 
    foreach($destination->childNodes as $child) { 
        if ($child->nodeType == XML_CDATA_SECTION_NODE) { 
            echo ('<br/><strong>Värskemad pildid:</strong><br/><a      href="/images/albums/index.html" src=""/>' . $child->textContent .  '</a>');
        } 
    } 
} 

} else {
die(nothing);
}
?> 
```

我的 xml 看起来像这样：

```
<album version="v6">
<title><![CDATA[2012-06-06 NK maakondlik laager]]></title>

<slide>
    <title><![CDATA[2012 NK maakondlik laager 003]]></title>

<description><![CDATA[text here]]></description>
        <date>05.06.2012 19:12</date>

    <image width="1069" height="813">slides/2012 NK maakondlik laager 003.JPG</image>
    <thumb width="240" height="180">thumbs/2012 NK maakondlik laager 003.JPG</thumb>
<info filesize="3.84 MB" date="05.06.2012 19:12" resolution="3456 x 2592 px" flash="Flash did not fire, auto" focus="5.0mm" 
exposure="1/320s" aperture="3.4" distance="" metering="Center weighted average" 
cameramake="Panasonic" cameramodel="DMC-TZ5" camera="DMC-TZ5" sensor="OneChipColorArea" iso="100"/>
</slide>

<slide>
    <title><![CDATA[2012 NK maakondlik laager 004]]></title>

<description><![CDATA[text here]]></description>
    <date>05.06.2012 19:22</date>

    <image width="1069" height="813">slides/2012 NK maakondlik laager 004.JPG</image>
    <thumb width="240" height="180">thumbs/2012 NK maakondlik laager 004.JPG</thumb>
<info filesize="4.07 MB" date="05.06.2012 19:22" resolution="3456 x 2592 px" flash="Flash did not fire, auto" focus="5.0mm" 
exposure="1/250s" aperture="3.4" distance="" metering="Center weighted average" 
cameramake="Panasonic" cameramodel="DMC-TZ5" camera="DMC-TZ5" sensor="OneChipColorArea" iso="100"/>
</slide> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T17:08:05.683

Try:

```
<?php
$filename = $_SERVER['DOCUMENT_ROOT'].'images/albums/album.xml';
if (file_exists($filename)) {
$xml = simplexml_load_file($filename);
echo $xml->title[0];
} else {
die("nothing");
}
?> 
```

# c++ - 尝试在 Windows 环境中禁用设备

> ID：11178954
> 
> 赞同：6
> 
> 时间：2012-06-24T16:05:46.030
> 
> 标签：c++, windows

通过这次 WE 回家，我遇到了一个关于 Steam 视频游戏的问题：我经常出现延迟，通过网络搜索，我发现这来自一些控制设备，例如我的 WE 键盘。

解决方案是在设备管理器（人机界面设备部分）中使用标准的右键单击 => 禁用操作停用某些 HID 设备。所以我开始编写一个小实用程序来在启动游戏时禁用这些设备，并在退出后重新启用它们。

使用 SetupDI API 函数，我设法隔离了我想禁用的设备，但是当我通过应用 DICS_DISABLE 操作禁用它们时，而不是像我用鼠标右键方法禁用它们一样，这些设备在设备管理器。我必须更新设备的驱动程序才能让它们回到设备管理器中。我也尝试了 DICS_STOP 操作，但是有了这个，设备就会从 DM 中消失......

在这个操作中我有什么遗漏吗？

这是我的原型代码：（控制台应用程序，x64）=> 系统是 x64，如果我的应用程序是 32 位，所有设备操作都会失败。

```
#include <stdio.h>
#include <Windows.h>
#include <setupapi.h>
#include <devguid.h>
#include <regstr.h>

#pragma comment (lib, "Newdev.lib")
#pragma comment (lib, "Setupapi.lib")

int main(int argc, void * argv[])
{
    HDEVINFO hDevInfo;
    SP_DEVINFO_DATA DeviceInfoData;
    DWORD i;
    SP_PROPCHANGE_PARAMS params; // params to set in order to enable/disable the device

    // Create a HDEVINFO with all present devices.
    hDevInfo = SetupDiGetClassDevs(NULL,
        0, // Enumerator
        0,
        DIGCF_PRESENT | DIGCF_ALLCLASSES );

    if (hDevInfo == INVALID_HANDLE_VALUE)
    {
        // Insert error handling here.
        return 1;
    }

    // Enumerate through all devices in Set.

    DeviceInfoData.cbSize = sizeof(SP_DEVINFO_DATA);
    for (i=0;SetupDiEnumDeviceInfo(hDevInfo,i,
        &DeviceInfoData);i++)
    {
        DWORD DataT;
        LPTSTR buffer = NULL;
        LPTSTR servBuffer = NULL;
        DWORD buffersize = 0;
        DWORD servBufferSize = 0;

        //
        // Call function with null to begin with,
        // then use the returned buffer size (doubled)
        // to Alloc the buffer. Keep calling until
        // success or an unknown failure.
        //
        //  Double the returned buffersize to correct
        //  for underlying legacy CM functions that
        //  return an incorrect buffersize value on
        //  DBCS/MBCS systems.
        //
        while (!SetupDiGetDeviceRegistryProperty(
            hDevInfo,
            &DeviceInfoData,
            SPDRP_DEVICEDESC,
            &DataT,
            (PBYTE)buffer,
            buffersize,
            &buffersize))
        {
            if (GetLastError() ==
                ERROR_INSUFFICIENT_BUFFER)
            {
                // Change the buffer size.
                if (buffer) LocalFree(buffer);
                // Double the size to avoid problems on
                // W2k MBCS systems per KB 888609.
                buffer = (LPTSTR)LocalAlloc(LPTR,buffersize * 2);
            }
            else
            {
                // Insert error handling here.
                break;
            }
        }

        while (!SetupDiGetDeviceRegistryProperty(
            hDevInfo,
            &DeviceInfoData,
            SPDRP_SERVICE,
            &DataT,
            (PBYTE)servBuffer,
            servBufferSize,
            &servBufferSize))
        {
            if (GetLastError() ==
                ERROR_INSUFFICIENT_BUFFER)
            {
                // Change the buffer size.
                if (servBuffer) LocalFree(servBuffer);
                // Double the size to avoid problems on
                // W2k MBCS systems per KB 888609.
                servBuffer = (LPTSTR)LocalAlloc(LPTR,servBufferSize * 2);
            }
            else
            {
                // Insert error handling here.
                break;
            }
        }

        if (strstr((char *)buffer, "(HID)") && NULL == servBuffer)
        {
            printf("New device found : %s\n", buffer);
            printf("disabling...\n");
            // init the structure
            params.ClassInstallHeader.cbSize = sizeof(SP_CLASSINSTALL_HEADER);
            params.ClassInstallHeader.InstallFunction = DIF_PROPERTYCHANGE;
            params.HwProfile = 0;
            params.Scope = DICS_FLAG_CONFIGSPECIFIC;
            params.StateChange = DICS_DISABLE;
            // prepare operation
            if (!SetupDiSetClassInstallParams(hDevInfo, &DeviceInfoData, &params.ClassInstallHeader, sizeof(params)))
            {
                printf("Error while preparing params !\n");
                break;
            }
            // launch op
            if (!SetupDiCallClassInstaller(DICS_DISABLE, hDevInfo, &DeviceInfoData))
            {
                printf("Error while calling OP ! Return code is %x\n", GetLastError());
                continue;
            }
            printf("done.\n\n");
        }

        if (buffer) LocalFree(buffer);
    }

    if ( GetLastError()!=NO_ERROR &&
        GetLastError()!=ERROR_NO_MORE_ITEMS )
    {
        // Insert error handling here.
        return 1;
    }

    //  Cleanup
    SetupDiDestroyDeviceInfoList(hDevInfo);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-24T16:16:34.470

你的参数错了，你需要

```
SetupDiCallClassInstaller(DIF_PROPERTYCHANGE, hDevInfo, &DeviceInfoData) 
```

用一个填充`SP_PROPCHANGE_PARAMS`。`DeviceInfoData`

参见[这个](http://read.pudn.com/downloads62/sourcecode/windows/comm/217489/%E6%93%8D%E4%BD%9C%E7%BD%91%E5%8D%A1/jyqywk.cpp__.htm)例子。（是中文的，看代码就够了）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-03T11:55:28.943

用过devcon！试试[这个](http://support.microsoft.com/kb/311272)：devcon disable

# ruby-on-rails - 如何在 ActiveRecord 模型中创建默认关联？

> ID：11178956
> 
> 赞同：1
> 
> 时间：2012-06-24T16:05:56.573
> 
> 标签：ruby-on-rails, ruby, activerecord, ruby-on-rails-3.2

在 Rails 3.2 中，我试图在创建 a`OdontologicUnity`时设置默认实例`User`。

用户：

```
require "odontological_unity"
class User < ActiveRecord::Base

    attr_accessible :odontologic_unity, ...
    ...

    belongs_to :odontologic_unity

    after_create :associate_default_unity

    private 
    def associate_default_unity
      ou = OdontologicUnity::DEFAULT
      ou.save!
      self.update_attribute :odontologic_unity, ou
    end

end 
```

牙科学统一：

```
# encoding: UTF-8
class OdontologicUnity < ActiveRecord::Base
  ...

  DEFAULT = OdontologicUnity.new(
    name: 'Actualiza el nombre',
    address: 'Actualiza la dirección',
    nit: 'Actualiza el NIT',
    mission: "Actualiza la misión",
    vision: "Actualiza la visión"
  )
end 
```

该代码可以正常工作而不会引发异常，但是当我查看我的数据库时，我得到了这个（`odontological_unity_id: nil`）：

`User Load (0.4ms) SELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1 [["id", 9]] => #<User id: 9, email: "user2@example.com", password_digest: "$2a$10$BPDmM6stW0sO6tQbwwJCxuWO4hvWIAeSzogEl2GGiqmo...", remember_token: "ltU5RBcifDsr9uPIci9z_A", names: "Example User", lastnames: "Some Lastnames", identity_document_number: "1515", odontological_unity_id: nil, created_at: "2012-06-24 15:00:17", updated_at: "2012-06-24 15:02:05">`

奇怪的是`OdontologicUnity`记录实际上是创建的，但没有与用户相关联。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T16:34:57.577

我建议您使用一种方法来创建默认用户，而不是常量。关于您的问题，请尝试使用 before create 并分配 id：

```
before_create :associate_default_unity

def associate_default_unity
  ou = OdontologicUnity::DEFAULT
  ou.save!
  self.write_attribute :odontologic_unity_id, ou.id
end 
```

# wordpress - wordpress 排除目录

> ID：11178960
> 
> 赞同：0
> 
> 时间：2012-06-24T16:06:41.720
> 
> 标签：wordpress, mod-rewrite

我有一个简单的问题，但我没有在网上找到解决方案：我需要从我的电脑上名为“stopdebiti2012b”的测试网络服务器中排除财政目录，其中包含 wordpress 核心，在 wp-content/themes/ 我有主题“stopdebiti "并且我创建了一个名为 "blog/" 的目录，我需要将其从 mod_rewrite 中排除，但没有发生任何事情。

我已经使用了互联网上解释的所有常见解决方案..但是什么也没发生？

我该如何解决这个问题？

```
 # BEGIN WordPress
   <IfModule mod_rewrite.c>
   RewriteEngine On
   RewriteBase /stopdebiti2012b/
   RewriteRule ^index\.php$ - [L]
   RewriteCond %{REQUEST_FILENAME} !-f
   RewriteCond %{REQUEST_FILENAME} !-d
   RewriteRule . /stopdebiti2012b/index.php [L]
   </IfModule>

   # END WordPress 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T16:51:38.027

尝试添加此行

```
RewriteCond %{REQUEST_URI} !^/(blog|blog/.*)$ 
```

后

```
RewriteBase /stopdebiti2012b/ 
```

# java - 如何搁浅 executorservice

> ID：11178962
> 
> 赞同：1
> 
> 时间：2012-06-24T16:06:55.320
> 
> 标签：java, multithreading, threadpool, executorservice

我的程序流程是这样的：
我需要按用户的请求进行顺序处理
在 C++ 中我将使用 boost asio 和每个用户一个链，但我必须在 java 中编码
所以我打算为每个用户创建一个 SingleThreadExecutor 并将用户的任务发布到它的执行程序中
但是如果用户数量变大，我认为这种方法会因为线程数量大而变慢
所以我在寻找替代解决方案，我脑海中的另一种方法是每个用户一个队列，以及如何将该队列转移到固定线程池，需要在这里指教，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T16:18:53.410

在我发布问题后仅 5 分钟就找到了解决方案 T_T
It's [here](https://stackoverflow.com/questions/826212/java-executors-how-to-be-notified-without-blocking-when-a-task-completes)，CallbackTask 方法看起来很有希望。

# javascript - 按下下一个和上一个按钮时，如何使用 javascript 和 jquery 更改文本值？

> ID：11178964
> 
> 赞同：0
> 
> 时间：2012-06-24T16:07:04.733
> 
> 标签：javascript, jquery

我有以下可见的值为“1-99”的HTML：

```
<ul class="controls-buttons question-controls">

   <li>
      <a href="#" title="Previous" id="orderPrevious><img src="/Images/control-double-180.png"></a>
   </li>
   <li>
      <a id="orderRange">1 - 99</a>
   </li>

   <li>
      <a href="#" title="Next" id="orderNext"><img src="/Images/control-double.png"></a>
   </li>             
</ul> 
```

有没有一种方法可以改变 orderRange，以便在单击上一个和下一个链接时像这样改变？理想情况下，我想要某种方式，这并不意味着我必须对大量 if 和 else 语句进行硬编码。

```
 1-99      > 100-199
1-99      < 100-199 > 200-299
100-199 < 200-299 > 300-399
200-299 < 300-399
etc .. 
```

更改后，我想使用本地存储来存储值，如下所示：

```
 var store = window.localStorage;
   store.setItem('Range', xxx) 
```

我希望有一个人可以帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T16:14:33.760

```
function changeRange(delta){
   var orderRange=document.getElementById('orderRange'),
   range=orderRange.innerHTML.split(' - ')
   range=[parseInt(range[0])+delta,parseInt(range[1])+delta]
   if(range[0]<0) return
   orderRange.innerHTML=range.join(' - ')
   var store = window.localStorage;
   store.setItem('Range', orderRange.innerHTML)
}
document.getElementById('orderNext').onclick=function(){changeRange(100);}
document.getElementById('orderPrevious').onclick=function(){changeRange(-100);} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T16:18:10.850

这是一个解决方案：

```
function change(d) {
    var $field = $('#orderRange');
    var nums = $field.text().split('-').map(function(a){return parseInt(a,10)+d*100});
    if (nums[0]<0) return;
    else if (nums[0]==101) nums[0]=100;
    else if (nums[0]==0) nums[0]=1;
    $field.html(nums.join(" - "));
}

$('#orderPrevious').click(function(){change(-1)});
$('#orderNext').click(function(){change(+1)}); 
```

[示范](http://jsfiddle.net/dystroy/v97B7/)

# ios - 在 UITextView 中格式化 Web 链接

> ID：11178967
> 
> 赞同：0
> 
> 时间：2012-06-24T16:07:22.627
> 
> 标签：ios, uitextview

我知道我可以在 UITextView 中放置一个链接，例如“http://stackoverflow.com/”并自动检测到它。我想知道是否有办法设置 UITextView，以便链接在 UITextView 中显示为“访问 StackOverflow”，或者我是否必须使用 UIWebView 来执行此操作。我相当确定我必须使用 UIWebView，但我想确定一下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T19:10:18.453

据我所知，您不能这样做，并且从阅读其他帖子来看，似乎有一种未记录的方法，但这会使您的应用程序被拒绝（http://stackoverflow.com/questions/2454067/display- html-text-in-uitextview)。为什么不简单地使用网络视图？因为这就是它的设计目的！;)

乔纳森

# c# - Castle 动态代理不向代理写入自定义属性

> ID：11178968
> 
> 赞同：4
> 
> 时间：2012-06-24T16:07:23.903
> 
> 标签：c#, castle-dynamicproxy

我有简单的单元测试来重现情况：

```
[Test]
public void Castle_Writes_Attribute_To_Proxy()
{
    var generator = new ProxyGenerator();
    var proxy = generator.CreateClassProxy<MyType>();

    var type = proxy.GetType();

    var prop = type.GetProperty("SomeProp");

    var attrs = prop.GetCustomAttributes(typeof(DescriptionAttribute), true);

    Assert.That(attrs.Length, Is.Not.EqualTo(0));
}

public class MyType
{
    [Description("some description here")]
    public virtual string SomeProp { get; set; }
} 
```

测试失败，因为 Castle 动态代理不写入自定义属性，

可以将父属性写入生成的代理吗？

解决方案：使用`Attribute.GetCustomAttributes(...)`

```
var attrs = Attribute.GetCustomAttributes(prop, typeof(DescriptionAttribute)); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T20:24:44.147

`Attribute.GetCustomAttributes(...)`相反，您使用[的方法不适用于 properties](http://msdn.microsoft.com/en-us/library/dwc6ew1d.aspx)。

# c - Ubuntu 上的套接字（不允许操作）

> ID：11178970
> 
> 赞同：5
> 
> 时间：2012-06-24T16:07:58.413
> 
> 标签：c, linux, sockets, ubuntu

我是新手，刚刚在 linux 下使用 c++ 迈出了第一步。所以我有一些关于套接字的任务。我正在遵循指南，尤其是[这个](http://beej.us/guide/bgipc/output/html/multipage/unixsock.html)指南。并且代码示例不起作用。我从这个开始：

```
#include <stdio.h>
#include <stdlib.h>
#include <errno.h>
#include <string.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <sys/un.h>

#define SOCK_PATH "echo_socket"

int main(void)
{
    int s, s2, t, len;
    struct sockaddr_un local, remote;
    char str[100];

    if ((s = socket(AF_UNIX, SOCK_STREAM, 0)) == -1) {
        perror("socket");
        exit(1);
    }

    local.sun_family = AF_UNIX;
    strcpy(local.sun_path, SOCK_PATH);
    unlink(local.sun_path);
    len = strlen(local.sun_path) + sizeof(local.sun_family);
    if (bind(s, (struct sockaddr *)&local, len) == -1) {
        perror("bind");
        exit(1);
    }
return 0;
} 
```

我发现要编译它（Code::Blocks），还必须包含以下内容：

```
#include <unistd.h> 
```

但成功运行后，我收到消息“绑定：不允许操作”。怎么了？我试图在root下运行它，但它仍然无法正常工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-05T10:10:14.397

某些 Unix 系统不允许您在任何地方创建套接字。确保您拥有正确的权限和正确的文件系统。（在手机的 sdcard 上使用的 Fat32 不允许在文件中添加额外的标志，这可能会给您带来麻烦）最后，在较新的系统上，运行类似 selinux 的安全设备可能会阻止套接字的创建。

在我的例子中，我不得不改变

```
#define SOCK_PATH "echo_socket" 
```

至

```
#define SOCK_PATH "/dev/socket/echo_socket" 
```

之后它立即起作用。（可执行文件在 root shell 中启动）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-11T07:37:39.397

因为没有权限。你可以 `#define SOCK_PATH "/home/username/echo_socket"` ，它会正常运行。

# jquery - jQuery 和 OnClick

> ID：11178976
> 
> 赞同：1
> 
> 时间：2012-06-24T16:08:43.767
> 
> 标签：jquery, onclick, fadeout

```
<script type="text/javascript">
$(document).ready(function() {
$("body").css("display", "none");
$("body").fadeIn("slow");
    $("a.link").click(function(event){
        event.preventDefault();
        linkLocation = this.href;
        $("body").fadeOut("slow", redirectPage);        
    }); 
    function redirectPage() {
        window.location = linkLocation;
    }
});
</script> 
```

使用“onclick”时，“fadeOut”不起作用。不使用“href”可以实现吗？

```
<a class="link" onclick="window.location='index.php'">index.php</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T16:15:31.153

您的脚本适用于此：

```
<a class="link" href="http://google.de">index.php</a> 
```

它淡出“正文”，然后重定向到谷歌。

它也可以在没有 href 的情况下工作：

```
<a class="link">index.php</a> 
```

在这种情况下，它只会“刷新”当前页面。

如果您不想将链接存储在 href 属性中，可以这样做：

```
<a class="link" data-link="index.php">index.php</a> 
```

这是有效的 HTML，您可以读取新的而不是 href 属性：

```
$(this).attr('data-link'); 
```

您不必在链接中设置另一个“onclick”处理程序。因为这个会首先触发，在 jQuery 事件处理程序完成之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T16:15:14.793

为什么不？

```
<a class="link" href='index.php'>index.php</a> 
```

您正在为一个事件使用 2 个单击处理程序，这会导致意外行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T16:26:47.993

您已经在标记中定义了一个 onclick 处理程序，该处理程序会立即更改 windows.location。

另一个处理程序（通过 JQuery 定义）也被触发，但没有时间运行，因为第一个处理程序更改了页面。

您必须消除标签中的 ont 才能看到淡出。

# ios - 我需要在 ARC 下发布 CGColorSpaceRef 吗？

> ID：11178979
> 
> 赞同：7
> 
> 时间：2012-06-24T16:09:19.263
> 
> 标签：ios, core-graphics, automatic-ref-counting

假设我有这段代码：

```
CGColorSpaceRef colorSpaceRGB = CGColorSpaceCreateDeviceRGB();

CGContextSetStrokeColorSpace(context, colorSpaceRGB);
CGContextSetFillColorSpace(context, colorSpaceRGB); 
```

之后我画了一些。`colorSpaceRGB`完成后，如果我使用 ARC ，是否需要手动释放？像这样：

```
CGColorSpaceRelease(colorSpaceRGB); 
```

还是我什么都不用做？

谢谢 ：）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-24T16:29:19.167

是的。根据 Apple 的文档：因为 CGColorSpaceRelease 函数等价于 CFRelease，除了如果 cs 参数为 NULL 不会导致错误。如果您创建、复制或显式保留 Core Foundation 对象，您有责任在不再需要它时释放它（请参阅 Core Foundation 的内存管理编程指南）。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2017-12-26T17:23:45.740

Swift 4.0 更新：

这在当前版本的 Swift 中不再需要。

```
CGColorSpaceRelease(colorSpace) 
```

这行代码现在给出以下消息：

'CGColorSpaceRelease' 不可用：Core Foundation 对象自动进行内存管理

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-24T16:17:48.980

是的，我相信是这样，即使在 ARC 下也是如此。

您需要`CGColorSpaceRelease`按照文档[CGColorSpace Documentation](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CGColorSpace/Reference/reference.html)调用。

# html - css - 如何隐藏嵌套在div中的href链接？

> ID：11178985
> 
> 赞同：0
> 
> 时间：2012-06-24T16:10:23.547
> 
> 标签：html, css

我有一个 div，里面有一个锚标签。我想将“a”标签的显示设置为无。我该怎么做呢？看起来像-

```
<div id="upper">
    <a href="http://myLink">Hide Me!</a>
    <p>Not to hide this text </p>
</div> 
```

我试着做 -

```
#upper a {display:none;} 
```

但是，由于某种原因，这不起作用。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T23:51:48.467

如果有人建议，不要`#upper a {display:none !important;}`因为这会在未来引入更多的问题，而不是立即解决。

`#upper a {display:none;}`除非在某处有更具体的规则覆盖它，否则可以工作，这可以用 firebug 或 Chrome 检查器等进行检查。

# c - 将字符串 (char) 转换为数组 (int)

> ID：11178986
> 
> 赞同：-1
> 
> 时间：2012-06-24T16:10:28.413
> 
> 标签：c, string

我有一个`file.txt`包含一些 int 变量。我需要将第三组数字转换为 int `array`，以便我可以按照我想要的方式操作数据：

```
EX: file.txt
============

111111 1001 20120131 30
122222 2002 20110230 25
133333 3003 20100325 12
144444 1001 20110526 18
155555 1001 20100524 25
166666 2002 20120312 30
177777 2003 20120428 28
188888 3003 20111214 15
199999 3002 20101113 27
199999 1001 20101202 29
133333 1001 20120715 25
155555 1001 20100204 24
177777 3003 20110102 30 
```

我需要逐行读取文件，并`fscanf`为此选择了函数：

```
FILE *fp;

int n1, n2, n4;
char n3[9];
int array[9]

[...]

while (fscanf (fp, "%d %d %s %d", &n1, &n2, n3, &n4); 
```

现在我有了字符串，如何将其转换为 int 数组？我试过：

```
for (i = 0; i < strlen(n3); i++)
    array[i] = atoi(strlen[i]) 
```

但它出错了......我该如何解决这个问题？

它返回给我：

```
warning: passing argument 1 of ‘atoi’ makes pointer from integer without a cast [enabled by default]
/usr/include/stdlib.h:148:12: note: expected ‘const char *’ but argument is of type ‘char’ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T16:13:36.673

你需要类似的东西：

```
int array[HUGE];

for (int i = 0; i < HUGE && fscanf(fp, "%d %d %s %d", &n1, &n2, n3, &n4) == 4; ++i)
{
    array[i] = atoi(n3);
} 
```

基本问题是如果你不知道你的文件有多少行，那么你就不知道你的收件人数组有多大。更安全的解决方案是使用带有`malloc`and的动态数组`realloc`。

在这点上，将字符串读入 a`char[9]`也是**非常**危险的：如果文件包含错误的数据，你的程序就会死掉，或者更糟。首先使用 将文件逐行读入字符串`fgets`，然后分别标记和解析每一行，例如使用`strtoul`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T16:15:31.883

至少据我了解您的问题，您只真正关心第三列中的数字。假设是这种情况，我想我会做更多这样的事情：

```
for (i=0; i<elements(array); i++)
    if (0 == fscanf(infile, "%*d %*d %d %*d", array+i))
        break; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T16:17:45.180

如果您真的只想将第三个元素作为整数，那么为什么不在调用 fscanf 时将其作为整数读入呢？即，我认为以下内容将大致完成您想要的操作：

```
#define MAX_VALUES 9

FILE *fp;

int n1, n2, n3, n4;
int array[MAX_VALUES]
int num_values;

while (fscanf (fp, "%d %d %d %d", &n1, &n2, &n3, &n4) && (num_values<MAX_VALUES))
    array[num_values++] = n3; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-24T18:42:29.207

如果您想要每行包含 8 个单个数字的数组，那么您可以执行以下操作：

```
for ( i = 0; i < 8; i++ ) {
    array[i] = n3[i] - '0';
} 
```

但是，正如其他人所说，对于 n3[] 和 array[] 的长度依赖文件格式并不是一个好主意，即使我在将 strlen() 替换为 8 时做了完全相同的事情。

我可能会 strtok() 使用空格作为分隔符的每一行，然后对数据进行一些验证以确保它是您的想法。

PS第三列看起来像一个日期，你确定要一个int数组吗？

# ruby-on-rails - 如何跨模型共享验证？

> ID：11178988
> 
> 赞同：2
> 
> 时间：2012-06-24T16:10:36.050
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我在模型 TipoMovimiento 中有这个验证：

```
class TipoMovimiento < ActiveRecord::Base
  before_validation :default_values

  validates :codigo, :numericality => {:greater_than => 0}
  validates :codigo, :descripcion, :sintetico, :presence => true
  validates :codigo, :descripcion, :sintetico, :uniqueness => true
  validates :descripcion, :length => {:minimum => 3}
  validates :sintetico, :length => {:minimum => 2}

private
  def default_values
    self.estado ||= true if self.estado.nil?
    self.codigo ||= TipoMovimiento.maximum(:codigo) + 1
  end
end 
```

此外，我还有其他具有相同字段的模型，我不想对它们重复这些验证。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T16:20:04.253

我认为您应该使用[自定义验证](http://guides.rubyonrails.org/active_record_validations_callbacks.html#performing-custom-validations)或[继承](http://mediumexposure.com/multiple-table-inheritance-active-record/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T16:22:22.613

我要做的是创建一个单独的模型：

```
module Validator                                                                                                                                              
  def self.included(base)
    base.send :validates, :name, :presence => true
  end
end

class User < ActiveRecord::Base
  include Validator
end 
```

# c# - 如何通过会员创建用户而不在创建后登录他们的帐户？

> ID：11178991
> 
> 赞同：0
> 
> 时间：2012-06-24T16:10:54.103
> 
> 标签：c#, asp.net-mvc, asp.net-membership

我有一个登录用户使用 Membership.CreateUser 创建另一个用户（不同的角色）。创建用户后，登录的用户自动开机，新创建的用户登录。

目标是让登录的用户创建一个新用户并继续在他们自己的凭据下登录的应用程序中工作。

我不知道如何改变这一点。任何帮助，将不胜感激。

这是我的代码：

```
 [HttpPost]
    public ActionResult RegisterClientContact(RegisterClientContactViewModel model)
    {
        if (ModelState.IsValid)
        {
            //Create Generic password - First initial Last initial 1234
            string genericPassword = model.FirstName.Substring(0, 1).ToLower() + model.LastName.Substring(0, 1).ToLower() + "1234";

            //Attempt to register the Client Contact
            MembershipCreateStatus createStatus;
            Membership.CreateUser(model.Email, genericPassword, model.Email, null, null, true, null, out createStatus);

            if (createStatus == MembershipCreateStatus.Success)
            {
                Roles.AddUserToRole(model.Email, "Client");
                FormsAuthentication.SetAuthCookie(model.Email, false /*create persistent cookie*/);

                Person person = new Person();
                person.FirstName = model.FirstName;
                person.LastName = model.LastName;
                person.Email = model.Email;
                person.Phone = model.Phone;
                person.Active = true;

                db.Persons.Add(person);
                db.SaveChanges();

                ClientContact clientPerson = new ClientContact();
                clientPerson.ClientPersonId = person.Id;
                clientPerson.Title = model.Title;
                clientPerson.ClientId = model.ClientId;

                db.ClientPersons.Add(clientPerson);
                db.SaveChanges();

                return RedirectToAction("Index", "ClientContact");
            }
        }

        return View("An Error has occured");
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T16:15:06.180

尝试删除这两行。

```
Roles.AddUserToRole(model.Email, "Client"); 
FormsAuthentication.SetAuthCookie(model.Email, false /*create persistent cookie*/); 
```

# ruby-on-rails - button_tag 像 link_to rails 3

> ID：11178992
> 
> 赞同：5
> 
> 时间：2012-06-24T16:11:24.503
> 
> 标签：ruby-on-rails

我需要使用此代码：

```
<%= button_tag :class => "btn btn-primary" do %>
 <%= t('.follow_all')%>
<% end %> 
```

html输出：

```
<button class="btn btn-primary" name="button" type="submit">
 Follow all
</button> 
```

如果可能的话，**我怎样才能像链接一样使用这个按钮，比如：**

```
<%= button_tag new_user_registration_path, :class => "btn btn-primary" do %>
     <%= t('.follow_all')%>
    <% end %> 
```

我需要使用`button_tag`助手。我不能使用`link_to`助手，或者如果可能的话，**如何在不使用表单的情况下从按钮发送参数？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-24T16:30:34.883

那这个呢：

```
<%= button_tag(:type => 'button') do %>
  <% link_to t('.follow_all'), new_user_registration_path %>
<% end %> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-24T16:14:32.837

使用`button_to`：[http ://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-button_to](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-button_to)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-10T04:36:32.757

试试这个：

```
<%= button_tag onclick: "location.href='{new_user_registration_path}'",
  type: :button, class: "btn btn-primary" do %>
  <%= t('.follow_all')%>
<% end %> 
```

# java - 使 JFrame 中的 JTextArea 或 JEditorPane 可滚动

> ID：11178994
> 
> 赞同：7
> 
> 时间：2012-06-24T16:11:55.613
> 
> 标签：java, swing, jscrollpane, jtextarea

我一直在做一些关于 Swing 的研究，以便用 Java 构建一个 css 编辑器。我一直试图在 JTextArea 中导出 CSS 和 HTML（我将在创建 .css 文档之后。）这是我的主布局在单击“构建”菜单项后调用的 GridLayout。

```
package csseditor_gui_built;
import java.awt.GridLayout;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JTextArea;
import javax.swing.JScrollPane;
import javax.swing.JScrollBar;
import javax.swing.text.DefaultCaret;
import java.awt.Font;
import java.awt.Color;

public class ExportGridLayout extends JFrame {
    public ExportGridLayout(String HTML, String CSS){

        GridLayout layout = new GridLayout(1,2,2,2);
        setLayout(layout);

        JTextArea textAreaHtml = new JTextArea();
        JTextArea textAreaCss = new JTextArea();

        //Creating a new font.
        Font fontumuz = new Font("Courier New", Font.PLAIN, 12);

        // Setting constructor strings
        textAreaHtml.setText(HTML);
        textAreaCss.setText(CSS);

        //Additional details..
        textAreaHtml.setEditable(false);
        textAreaCss.setEditable(false);

        //Appending font to the textArea's
        textAreaHtml.setFont(fontumuz);
        textAreaCss.setFont(fontumuz);

        // Adding the objects to JFrame
        add(textAreaHtml);
        add(textAreaCss);

    }
} 
```

这很简单。只需帮我在这些 textArea 中添加滚动条或窗格即可。网站上的任何其他建议都不起作用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-24T16:22:34.047

就是这样...

`JTextArea text = new JTextArea();`

`JScrollPane scroll = new JScrollPane(text);`

**编辑部分**

`add(scroll);`

这是一个可以帮助您的工作代码：

```
import java.awt.*;
import javax.swing.*;

public class JTextAreaExample
{
    private void createAndDisplayGUI()
    {
        JFrame frame = new JFrame("JTextArea Scrollable");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JPanel contentPane = new JPanel();
        contentPane.setLayout(new GridLayout(1, 2, 2, 2));

        JTextArea tArea1 = new JTextArea();
        tArea1.setLineWrap(true);
        JTextArea tArea2 = new JTextArea();
        tArea2.setLineWrap(true);
        tArea1.setText("I got a long long line of text in my JTextArea");
        tArea2.setText("I got a long long line of text in my JTextArea");

        JScrollPane scroller1 = new JScrollPane();
        JScrollPane scroller2 = new JScrollPane();
        scroller1.setViewportView(tArea1);
        scroller2.setViewportView(tArea2);

        contentPane.add(scroller1);
        contentPane.add(scroller2);

        frame.setContentPane(contentPane);
        frame.setSize(100, 100);
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
    }

    public static void main(String... args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                new JTextAreaExample().createAndDisplayGUI();
            }
        });
    }
} 
```

# python - 在列表python中组合n长度的字符串

> ID：11178997
> 
> 赞同：1
> 
> 时间：2012-06-24T16:12:18.380
> 
> 标签：python

每当我使用排列时，我都必须创建排列列表，因为它返回一个位于 0x0190A5D0 的“itertools.permutations 对象”。然后在创建列表之后，我必须组合每个列表中的字符串，以便获得我最初想要的排列。如果它是一个数字，那么我必须再次将它们全部设为整数。

两部分问题：

1）有没有更简单的方法来进行排列和创建数字列表？

2) 下面我创建了一个 5 位数字的排列。但是，在我有“12345”的地方，我希望用户输入他们自己的号码。因此格式化字符串 b=['s%s%s...] 必须是 n %s 和 n x。有人知道怎么做吗？

（仅供参考，我的程序试图在给定用户输入的情况下找到具有相同数字的下一个最大数字，因此 12345 下一个最大数字是 12354）

**这两个问题都在下面得到了回答，请参阅两个回答。谢谢！！！**

```
def nexthighest():
    from itertools import permutations
    numb = str(12345)
    a = list(permutations(numb))
    b = ['%s%s%s%s%s' % xxxxx for xxxxx in a]  #<-- this is where the n length problem occurs
    c = list(map(int,b))
    for i in c:
        if i >12345:
            print(i)
            break 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T16:25:52.437

您不需要构建所有这些列表。只需遍历 from 的返回值`permutations`，将每个排列加入并解析为整数，因为它来自：

```
def nexthigher(n):
    for p in permutations(sorted(str(n))):
        i = int("".join(p))
        if i > n:
            return i 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T16:16:20.133

我可以为你回答第二部分：

```
b = ["".join(x) for x in a] 
```