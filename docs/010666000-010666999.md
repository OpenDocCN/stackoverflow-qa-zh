# StackOverflow 问答 10666000-10666999

# objective-c - 如何检查日期是否在具有特定重复的日期范围内？

> ID：10666008
> 
> 赞同：0
> 
> 时间：2012-05-19T14:25:02.093
> 
> 标签：objective-c, ios, date

我想创建一个简单的药丸提醒 iOS 应用程序（让我们暂时将通知放在一边）。我想为具有重复的药丸创建单个数据库记录，并检查特定日期是否与重复“生成”的日期相交。

示例：我设置了从 4 月 12 日开始到 4 月 20 日结束的药片期，每 2 天重复一次，下午 3 点。所以这个药片在这个日期有效：

*   4 月 12 日下午 3 点
*   4 月 14 日下午 3 点
*   4 月 16 日下午 3 点
*   4 月 18 日下午 3 点
*   4 月 20 日下午 3 点

**问题：**

*   哪种数据可以描述“每 2 天”的信息？NSDateInterval 会是一个很好的解决方案吗？

*   如何验证特定日期是否符合我的重复计划？（即检查 4 月 13 日是否是上一个示例的有效日期并得到“否”作为答案）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T08:15:15.617

这是一个应该满足您的条件的示例类：

主文件

```
#import <Foundation/Foundation.h>
#import "DateChecker.h"

int main(int argc, const char * argv[])
{
    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];

    // Specify a period in days
    NSInteger period = 2;

    // Set the start/end/current days.  These can be retrieved from a database or elsewhere
    NSDate *startDate = [NSDate dateWithString:@"2012-04-12 00:00:00 +0000"];
    NSDate *endDate = [NSDate dateWithString:@"2012-04-20 00:00:00 +0000"];
    NSDate *currentDate = [NSDate dateWithString:@"2012-04-14 00:00:00 +0000"];

    // Actually do the checking.  This could alternatively be offloaded to a function in DateChecker
    if([DateChecker date:currentDate isBetweenDate:startDate andDate:endDate])
    {
        if([DateChecker date:currentDate fallsOnStartDate:startDate withInterval:period])
        {
            NSLog(@"The date %@ falls in the specified date period & is on the interval date.", currentDate);
        }
        else
        {
            NSLog(@"The date %@ falls in the specified date period & is NOT on the interval date.", currentDate);
        }
    }
    else
    {
        NSLog(@"The date %@ does not fall in the specified date period.", currentDate);
    }

    [pool release];

    return 0;
} 
```

日期检查器.h

```
#import <Foundation/Foundation.h>

@interface DateChecker : NSObject
{
}
+ (BOOL)date:(NSDate*)date fallsOnStartDate:(NSDate*)beginDate withInterval:(NSInteger)daysInterval;
+ (BOOL)date:(NSDate*)date isBetweenDate:(NSDate*)beginDate andDate:(NSDate*)endDate;

@end 
```

日期检查器.m

```
#import "DateChecker.h"

@implementation DateChecker

+ (BOOL)date:(NSDate*)date fallsOnStartDate:(NSDate*)beginDate withInterval:(NSInteger)daysInterval
{
    NSDateComponents *components;
    NSInteger days;

    // Get the number of days since the start date
    components = [[NSCalendar currentCalendar] components: NSDayCalendarUnit fromDate: beginDate toDate: date options: 0];
    days = [components day];

    // If the number of days passed falls on the interval, then retrun YES
    if(days % daysInterval == 0)
    {
        return YES;
    }
    else
    {
        return NO;
    }
}

+ (BOOL)date:(NSDate*)date isBetweenDate:(NSDate*)beginDate andDate:(NSDate*)endDate
{
    if ([date compare:beginDate] == NSOrderedAscending)
        return NO;

    if ([date compare:endDate] == NSOrderedDescending) 
        return NO;

    return YES;
}

@end 
```

这应该让您了解如何编写一个可以处理您的要求的类。我将它作为命令行应用程序运行，它似乎工作正常。功能

```
+ (BOOL)date:(NSDate*)date isBetweenDate:(NSDate*)beginDate andDate:(NSDate*)endDate 
```

是从[如何检查 NSDate 是否发生在其他两个 NSDate 之间](https://stackoverflow.com/questions/1072848/how-to-check-if-an-nsdate-occurs-between-two-other-nsdates)慷慨地获得的。

# javascript - js jquery搜索并在输入名称时保持可见

> ID：10666009
> 
> 赞同：0
> 
> 时间：2012-05-19T14:25:22.037
> 
> 标签：javascript, jquery, search

我的 html 中有这段代码：

```
<form>
        <div style="width:530px; height:220px; overflow-y:scroll;">

              <div class="people">
                <label class="checkbox_1" for="1">
                  <img src="1.jpg" />
                  <span>
                    Jolly Bob Monumir
                  </span>
                </label>
                <input type="checkbox" name="people[]" value="1" id="1" />
              </div>

              <div class="people">
                <label class="checkbox_1" for="2">
                  <img src="2.jpg" />
                  <span>
                    Jonathan Monumir
                  </span>
                </label>
                <input type="checkbox" name="people[]" value="2" id="4" />
              </div>

              <div class="people">
                <label class="checkbox_1" for="3">
                  <img src="3.jpg" />
                  <span>
                    Misoury Crow
                  </span>
                </label>
                <input type="checkbox" name="people[]" value="3" id="3" />
              </div>

              <div class="people">
                <label class="checkbox_1" for="4">
                  <img src="4.jpg" />
                  <span>
                    Michael Crow
                  </span>
                </label>
                <input type="checkbox" name="people[]" value="4" class="checkbox_1" id="4" />
              </div>

        </div>                
    </form> 
```

页面加载后应显示整个表单。现在我想要一个输入框，当我在这个框中输入人的名字时，它应该自动让那些包含我输入的字母的名字（带有“人”类的 div）可见。

示例：我键入“Jo”，应显示包含 Jolly Bob Monumir 和 Jonathan Monumir 的 div，而其他应保持隐藏。然后当我输入“Cro”时，Misoury Crow 和 Michael Crow 应该是可见的。等等。我怎样才能用 jquery 做到这一点？提前致谢

更新：我发现了这个，它就像一个魅力！

```
$('#search-criteria').on('keyup', function(){
    $('div.people').hide();
    var txt = $('#search-criteria').val();
    $('div.people').each(function(){
       if($(this).text().toUpperCase().indexOf(txt.toUpperCase()) != -1){
           $(this).show();
       }
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T14:54:46.243

我认为您正在寻找类似[jqueryui](http://jqueryui.com/demos/autocomplete/)的自动完成[功能](http://jqueryui.com/demos/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T15:13:44.807

我添加了一个`input`字段，您可以在其中键入：

```
<input type="text" id="people_name"> 
```

和 jQuery 代码是：

```
$('input#people_name').on('keyup', function() {
  var value = this.value.trim();
    if(value.length) {
        $('div.people span').filter(function() {
            return new RegExp(value, 'i').test($(this).text());
        }).closest('div.people').show();
    } else $('div.people').hide();
}); 
```

**[演示](http://jsfiddle.net/thecodeparadox/5qGQJ/3/)**

*注意：您可以使用任何自动完成插件。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T19:17:57.787

更新：我发现了这个，它就像一个魅力！

```
$('#search-criteria').on('keyup', function(){
    $('div.people').hide();
    var txt = $('#search-criteria').val();
    $('div.people').each(function(){
       if($(this).text().toUpperCase().indexOf(txt.toUpperCase()) != -1){
           $(this).show();
       }
    });
}); 
```

# php - PHP 提示下载忽略新行

> ID：10666015
> 
> 赞同：0
> 
> 时间：2012-05-19T14:25:48.947
> 
> 标签：php, download, newline, prompt

我希望我的 php 脚本的用户能够从我的服务器下载某个文本文件的内容，但我不希望他们直接从我的服务器下载它，所以我想通过一个名为 download.php 的 php 文件

我使用此代码触发文件提示

```
header("Content-Type: text/plain");
header("Content-Disposition: attachment; filename=textfile.txt");
header("Content-Length: " . filesize('textfile.txt');

$fp = fopen('textfile.txt', "r");
fpassthru($fp);
fclose($fp); 
```

代码有效，文件被下载，但似乎代码忽略了该文本文件的新行。

假设原始文本文件的内容是

```
单词1
字2
词3
字4
单词5

```

下载文件的内容将是

```
word1word2word3word4word5
```

如何修复下载的文件实际上保留了原始文本文件的新行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T14:57:02.660

这是将文本文件 EOL 从 Linux、Windows 和 Mac 转换为 Windows 的代码。因此，无论您的文件有什么 EOL，它都可以在 Win 上正常打开。

```
header("Content-Type: text/plain");
header("Content-Disposition: attachment; filename=textfile.txt");
header("Content-Length: " . filesize('textfile.txt'));

$f = file_get_contents('textfile.txt');
$f = str_replace("\r\n", "\n", $f); //Convert Windows to Unix
$f = str_replace("\r", "\n", $f); //Convert Mac to Unix
$f = str_replace("\n", "\r\n", $f); //Convert Unix to Windows
echo $f; 
```

代码很短，但对于大文件来说不太好。

# android - 如何将视图动态添加到已在 xml 布局中声明的 RelativeLayout？

> ID：10666019
> 
> 赞同：16
> 
> 时间：2012-05-19T14:26:30.700
> 
> 标签：android, android-layout, android-widget

`RelativeLayout`我在 xml 布局文件中声明了a 。现在我想将`Views`代码添加到现有的布局中。我`Button`通过代码向这个现有布局动态添加了一个，如下所示：

```
rLayout = (RelativeLayout)findViewById(R.id.rlayout); 
        LayoutParams lprams = new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT);
        Button tv1 = new Button(this); 
        tv1.setText("Hello"); 
        tv1.setLayoutParams(lprams); 
        tv1.setId(1); 
        rLayout.addView(tv1); 
```

现在我需要`Button`在已经添加的右侧添加另一个`Button`. 我找不到将新按钮添加到先前添加的按钮右侧的方法。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-19T15:00:19.977

`RelativeLayout.RIGHT_OF`添加第二个添加的规则`Button` `LayoutParams`：

```
 // first Button
    RelativeLayout rLayout = (RelativeLayout) findViewById(R.id.rlayout);
    RelativeLayout.LayoutParams lprams = new RelativeLayout.LayoutParams(
            RelativeLayout.LayoutParams.WRAP_CONTENT,
            RelativeLayout.LayoutParams.WRAP_CONTENT);
    Button tv1 = new Button(this);
    tv1.setText("Hello");
    tv1.setLayoutParams(lprams);
    tv1.setId(1);
    rLayout.addView(tv1);

    // second Button
    RelativeLayout.LayoutParams newParams = new RelativeLayout.LayoutParams(
            RelativeLayout.LayoutParams.WRAP_CONTENT,
            RelativeLayout.LayoutParams.WRAP_CONTENT);
    Button tv2 = new Button(this);
    tv1.setText("Hello2");
    newParams.addRule(RelativeLayout.RIGHT_OF, 1);
    tv2.setLayoutParams(newParams);
    tv2.setId(2);
    rLayout.addView(tv2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T14:45:15.100

也许这可以帮助你，试试吧。

```
rLayout = (RelativeLayout)findViewById(R.id.rlayout);
LayoutParams lprams = new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT);

TableLayout tl=new TableLayout(this);
rLayout.addView(tl); 

TableRow tr1=new TableRow(this);
tl.addView(tr1);

Button btn1 = new Button(this);
btn1.setText("Hello");
btn1.setLayoutParams(lprams);
btn1.setId(1);
tr1.addView(btn1);

TextView tv1 = new TextView(this); 
tv1.setWidth(40);
tv1.setHeight(LayoutParams.WRAP_CONTENT);
tr1.addView(tv1);

Button btn2 = new Button(this);
btn2.setText("World");
btn2.setLayoutParams(lprams);
btn2.setId(2);
tr1.addView(btn2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T14:33:48.133

创建另一个按钮：

```
Button tv2 = new Button(this);
tv2.setText("World");
tv2.setLayoutParams(lprams);
tv2.setId(2); 
```

将其添加到您的 RelativeLayout：

```
rLayout.addView(tv2); 
```

# android - Urban Airship：默认状态栏通知的自定义图标

> ID：10666022
> 
> 赞同：4
> 
> 时间：2012-05-19T14:26:43.853
> 
> 标签：android, urbanairship.com, android-notifications, android-notification-bar

`CustomPushNotificationBuilder`如果您想对状态栏通知进行任何修改，包括简单地更改图标，Urban Airship 建议创建自定义通知。

不幸的是，使用`RemoteView`通知会带来许多与定制制造商和/或平台特定皮肤相关的不必要的影响，[包括文本颜色](https://stackoverflow.com/questions/4867338/custom-notification-layouts-and-text-colors/4935191)和对私有资源的引用（例如`@*android:drawable/notify_panel_notification_icon_bg_tile`在 Honeycomb/ICS 上）。

必须有一种简单的方法来交换图标而不使用`RemoteView`. 如何？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-19T14:29:08.660

我发现通过覆盖`BasicPushNotificationBuilder`，我可以非常简单地设置图标：

```
BasicPushNotificationBuilder nb = new BasicPushNotificationBuilder() {
    @Override
    public Notification buildNotification(String alert,
            Map<String, String> extras) {
        Notification notification = super.buildNotification(alert,
                extras);
        // The icon displayed in the status bar
        notification.icon = R.drawable.notification;
        // The icon displayed within the notification content
        notification.contentView.setImageViewResource(
                android.R.id.icon, R.drawable.notification);
        return notification;
    }
};
// Set the custom notification builder
PushManager.shared().setNotificationBuilder(nb); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-17T16:26:57.497

我们在默认通知工厂中提供了很多功能，例如大样式（收件箱、文本、图像）、棒棒糖功能（隐私、优先级）和交互式通知按钮。如果您只是想设置图标和强调色，我建议如下：

```
 UAirship.takeOff(this, new UAirship.OnReadyCallback() {
        @Override
        public void onAirshipReady(UAirship airship) {
            // Perform any airship configurations here

            // Create a customized default notification factory
            DefaultNotificationFactory defaultNotificationFactory = new DefaultNotificationFactory(getApplicationContext());
            defaultNotificationFactory.setSmallIconId(R.drawable.ic_notification);
            defaultNotificationFactory.setColor(NotificationCompat.COLOR_DEFAULT);

            // Set it
            airship.getPushManager().setNotificationFactory(defaultNotificationFactory);
        }
    }); 
```

可以在此处找到有关该课程的完整文档 - [http://docs.urbanairship.com/reference/libraries/android/latest/reference/com/urbanairship/push/notifications/DefaultNotificationFactory.html](http://docs.urbanairship.com/reference/libraries/android/latest/reference/com/urbanairship/push/notifications/DefaultNotificationFactory.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-17T12:13:13.600

我知道这是一个老问题，但 UrbanAirship 经常更新，所以我决定帮助可能访问此页面的其他人。从 6.0.1 版开始，`BasicNotificationBuilder`不再有。为了使用图标和颜色等自定义通知，您需要扩展`NotifcationFactory`类并覆盖该`createNotification`方法。

如下例所示：

```
public class MyNotificationFactory extends NotificationFactory {

public MyNotificationFactory(Context context){
    super(context);
}

@Override
public Notification createNotification(PushMessage pushMessage, int i) {
    NotificationCompat.Builder builder = new NotificationCompat.Builder(getContext())
            .setContentTitle(getContext().getResources().getString(R.string.app_name))
            .setContentText(pushMessage.getAlert())
            .setSmallIcon(R.drawable.your_icon_here)
            .setColor(getContext().getResources().getColor(R.color.your_color_here))
            .setAutoCancel(true);

    return builder.build();
}

@Override
public int getNextId(PushMessage pushMessage) {
    return NotificationIDGenerator.nextID();
} 
```

}

最后，您必须在应用程序类或初始化 UA 的任何位置将其设置为 UrbanAirship 的新通知工厂：

```
UAirship.shared().getPushManager().setNotificationFactory(new MyNotificationFactory(getApplicationContext())); 
```

# java - JAAD 阻止其他提供商工作

> ID：10666023
> 
> 赞同：3
> 
> 时间：2012-05-19T14:26:47.707
> 
> 标签：java, audio, javasound, aac

我正在使用带有 SPI 的 JAAD 通过 JavaSound 播放 m4a 文件，我工作得很好。

但是，我想以这种方式支持多种格式 - 但每当我尝试播放另一种格式时，JAAD 似乎会尝试处理它然后失败（显然因为它只处理 AAC。）

我假设这是 JAAD 中的一个错误，因为所有其他 SPI 库都可以相互配合。有没有一种很好的方法可以解决它，直到它被修复，或者是否有另一个可以与 Javasound 一起使用的 AAC 库，我可以使用它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T21:03:49.283

有一个使用由 Michael Berry 创建的 jaad 的解决方法：这是 url

[https://code.google.com/p/quelea-projection/source/browse/Quelea/src/org/quelea/sound/AudioTrack.java?spec=svn0352523f49cf20d41d1a7dc098af1db38000cc6d&r=0352523f49cf20d41d1a7dc098af1db38000cc6d](https://code.google.com/p/quelea-projection/source/browse/Quelea/src/org/quelea/sound/AudioTrack.java?spec=svn0352523f49cf20d41d1a7dc098af1db38000cc6d&r=0352523f49cf20d41d1a7dc098af1db38000cc6d)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-24T18:16:53.643

因为我花了一段时间才找到 berry150 的代码，所以这里是解决方案：首先，您必须在类路径中订购 jar，以便在 JAAD 之前加载 JLayer、MP3SPI 和 Tritonous Share。然后要获取 AudioInputStream，请使用以下代码：

```
if (getAudioFormat().equals(".mp3")) {
    audioStream = AudioSystem.getAudioInputStream(file); // Obtains an audio input stream of the song
            }
else if (getAudioFormat().equals(".m4a")){
    audioStream = new AACAudioFileReader().getAudioInputStream(file);
            } 
```

所以发生的情况是，如果音频是 mp3，来自 Javasound 的 getAudioStreamMethod() 将首先被调用，因为它的 JAR 是首先加载的。如果音频是 .m4a，则创建 ACCAudioFileReader() 的新实例并调用 JAAD 库的 getAudioInputStream()。

# coffeescript - 为什么或等于在咖啡脚本中破坏我的 REPL？

> ID：10666031
> 
> 赞同：2
> 
> 时间：2012-05-19T14:28:19.213
> 
> 标签：coffeescript

如果我用 Coffeescript 1.3.3 打开一个 REPL 并输入：

```
y ?= 5 
```

或者

```
y = 5
y ||= 6 
```

我收到一个 y 未定义的错误...用于编译最后一个有效，但第一个仍然错误..这是预期的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T17:02:53.763

```
coffee> y = 5
5
coffee> y ||= 6
Error: In repl, the variable "y" can't be assigned with ||= because it has not been defined. 
```

这是因为每次评估都涉及单独的编译。解决方法是将其作为全局对象的属性进行访问。

```
coffee> y = 5
5
coffee> global.y
5
coffee> @y
5
coffee> @y &&= 6
6
coffee> y
6 
```

# html - 为什么会在外面破 何时应用边距和填充？

> ID：10666032
> 
> 赞同：20
> 
> 时间：2012-05-19T14:28:21.463
> 
> 标签：html, css

我知道这是非常基本的 CSS。如何保持跨度包含在 div 中？目前，跨度超出了 div 的顶部和底部。

```
div {
  width: 200px;
  margin: 10px;
  background-color: #ff0;
}
span {
  margin: 5px;
  padding: 5px;
  background-color: #fc0;
}
```

```
<body>
  <div>
    <span>span</span>
  </div>
</body>
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-05-19T14:41:32.323

要回答您的问题，这不仅仅是`padding`or的问题`margin`，还有[`width`](http://www.w3.org/TR/CSS2/visudet.html#the-width-property),[`display`](http://www.w3.org/TR/CSS2/visuren.html#display-prop)和[box model](http://www.w3.org/TR/CSS2/box.html)的问题。

[jsFiddle](http://jsfiddle.net/JUbkt/1/)

```
span {
    display: inline-block;
} 
```

这将尊重您应用于跨度的任何填充、边距或宽度。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-19T14:30:18.173

内联元素不会消耗垂直填充和边距空间。您可以制作 span `display: block`，但如果没有更多细节，我不知道这是否能实现您的目标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T15:19:34.657

内联、非替换框（例如跨度）的垂直填充、边框和边距从内容区域的顶部和底部开始，与“行高”无关。但在计算行框高度时只使用“行高”。因此，您在这里看到重叠：http: [//jsfiddle.net/Q9AED/](http://jsfiddle.net/Q9AED/)

如果您想使用简单的解决方案，可以使用 line-height 而不是 display: inline-block: [using line-height](http://jsfiddle.net/Q9AED/1/)。

display: inline-block 适用于 Safari >= 2, Opera >= 9, IE >= 8, Firefox > 3。但你可以在 IE < 8 中模仿 inline-block: display: inline; 缩放：1。

# windows - $之间的区别？和 PowerShell 中的 $LastExitCode

> ID：10666035
> 
> 赞同：83
> 
> 时间：2012-05-19T14:28:45.160
> 
> 标签：windows, powershell, command-line

`$?`在 PowerShell 中，和有什么区别`$LastExitCode`？

我阅读[了有关自动变量](http://technet.microsoft.com/en-us/library/dd347675.aspx)的信息，它说：

> `$? Contains the execution status of the last operation. It contains TRUE if the last operation succeeded and FALSE if it failed.`
> 
> `$LastExitCode Contains the exit code of the last Windows-based program that was run.`

在它的定义中`$?`并没有解释成功和失败的含义。

* * *

我之所以问，是因为我假设`$?`当且仅当 $LastExitCode 为 0 时它才是 True，但我发现了一个令人惊讶的反例：*[$LastExitCode=0 but $?=False in PowerShell。将 stderr 重定向到 stdout 会产生 NativeCommandError](https://stackoverflow.com/questions/10666101)*。

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2012-05-19T14:30:39.140

`$LastExitCode`是本机应用程序的返回码。`$?`只是返回`True`或`False`取决于最后一个命令（cmdlet 或本机）是否无错误退出。

对于 cmdlet 失败通常意味着异常，对于本机应用程序，它是一个非零退出代码：

```
PS> cmd /c "exit 5"
PS> $?
False
PS> cmd /c "exit 0"
PS> $?
True 
```

`Ctrl`使用+取消 cmdlet`C`也将被视为失败；对于本机应用程序，这取决于它们设置的退出代码。

# .net - 自定义注释 Asp.Net MVC 4 的客户端验证

> ID：10666045
> 
> 赞同：6
> 
> 时间：2012-05-19T14:29:57.870
> 
> 标签：.net, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

我指的是这篇文章：

[http://haacked.com/archive/2009/11/19/aspnetmvc2-custom-validation.aspx](http://haacked.com/archive/2009/11/19/aspnetmvc2-custom-validation.aspx)

它显示了如何在 Asp.Net MVC 2 中创建自定义注释。但是，客户端验证脚本，尤其是“MicrosoftMvcJQueryValidation”在 Asp.Net MVC4 中不可用。我在一篇文章中读到它是 Asp.Net Futures 项目的一部分。我想使用 Jquery 连接我的客户端验证。在我的项目模板脚本文件夹中，我看到名为：

```
jquery.validate.min.js
jquery.validate.unobtrusive.min.js
jquery.unobtrusive-ajax.min.js 
```

有什么办法可以利用这些现有的脚本吗？还是我必须强制下载期货项目？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-19T14:34:49.367

那篇文章专门针对使用 MicrosoftAjax 的 MVC 2。MVC 4 不再包含 MS Ajax 文件，因为它们已被弃用，首选方法是使用 jquery。

要验证您的设置，请确保这些脚本在您的布局中

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.min.js")" type="text/javascript"></script> 
```

这两个设置存在于 web.config 文件的 appSettings 部分

```
<add key="ClientValidationEnabled" value="true"/>
<add key="UnobtrusiveJavaScriptEnabled" value="true"/> 
```

因此，当您向 ViewModels 添加数据注释时，您将获得客户端和服务器端验证

```
public class MyModel 
{
    [Required]
    [StringLength(30)]
    public string FirstName { get; set; }

    [Required]
    [StringLength(30)]
    public string LastName { get; set; }
} 
```

在你看来，只要确保你有这样的代码

```
<div>
    @Html.LabelFor(model => model.FirstName)
</div>
<div>
    @Html.TextBoxFor(model => model.FirstName) <br/>
    @Html.ValidationMessageFor(model => model.FirstName)
</div>

<div>
    @Html.LabelFor(model => model.LastName)
</div>
<div>
    @Html.TextBoxFor(model => model.LastName) <br/>
    @Html.ValidationMessageFor(model => model.LastName)
</div> 
```

**更新**

这是一个自定义验证器的示例，我称之为 RateRequiredIfCustomIndexRate 这是它的 javascript 方面，因此它被添加到 jquery 验证中

```
$("document").ready(function () {

    var isCustomRateRequired = document.getElementById("IsCustomRateRequired");

    isCustomRateRequired.onchange = function () {
        if (this.checked) {
            $('#Rate').attr('disabled', 'disabled');
            $('#Rate').val('');
        }
        else {
            $('#Rate').removeAttr('disabled');
        }
    };
});

jQuery.validator.addMethod("raterequiredifcustomindexrate", function (value, element, param) {
    var rateRequired = $("#CustomRateRequired").val();
    if (rateRequired && value == "") {
        return false;
    }
    return true;
});

jQuery.validator.unobtrusive.adapters.addBool("raterequiredifcustomindexrate"); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-26T14:12:37.613

这里缺少的关键是服务器端验证器必须实现 IClientValidatable 接口：

```
public class RateRequiredIfCustomIndexRateAttribute : ValidationAttribute, IClientValidatable
{
    public override bool IsValid(object value)
    {
        return false;
    }

    public IEnumerable<ModelClientValidationRule> GetClientValidationRules(ModelMetadata metadata, ControllerContext context)
    {
        yield return new ModelClientValidationRule
        {
            ErrorMessage = this.ErrorMessage,
            ValidationType = "raterequiredifcustomindexrate"
        };
    }
} 
```

一旦你这样做了，客户端验证应该正确连接。您可以通过确保您的输入字段具有属性“data-val-raterequiredifcustomindexrate”属性来验证这一点。

# terminal - 将标准输出直接缓存

> ID：10666047
> 
> 赞同：-1
> 
> 时间：2012-05-19T14:30:08.080
> 
> 标签：terminal

有谁碰巧知道如何将终端中的 STDOUT 定向到缓存？有时我想从其他地方的 STDOUT 复制文本，例如我的邮件程序，手动复制输出或创建一个新的临时文件对我来说似乎总是有点不方便。

是否有捷径可寻？

非常感谢！

亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T14:32:50.790

目前还不清楚你在问什么。但是，如果您正在谈论将标准输出捕获到文件，同时仍然能够在控制台上看到它，那么您可以使用`tee`（假设您使用的是 *nix）：

```
./myApp | tee stdout.txt 
```

# php - PHP：使用“Ymd H:i”的日期格式

> ID：10666048
> 
> 赞同：0
> 
> 时间：2012-05-19T14:30:17.783
> 
> 标签：php, sql, arrays

为什么第一个示例代码工作正常，而第二个产生错误？

`SolDate`等于 2010-10-10、10: `depT`15:00 和`arrT`11:30:15。我正在使用该功能从和`strtotime`中删除秒数。`depT``arrT`

**第一**

```
$i = 0;
    foreach ($result1 as $row):
        $data[] = array($i,array('xxx','yyy','zzz'),
        "2010-10-10 10:15",
        "2010-10-10 11:30");
        $i++;
    endforeach; 
```

**第二**

```
$i = 0;
        foreach ($result1 as $row):
            $data[] = array($i,array('xxx','yyy','zzz'),
            date("Y-m-d H:i", strtotime($row['SolDate'] . ' ' . $row['depT'])),
            date("Y-m-d H:i", strtotime($row['SolDate'] . ' ' . $row['arrT'])));
            $i++;
        endforeach; 
```

我正在使用此代码创建 jpGraph 甘特图。问题是第一种方法生成甘特图，而第二种方法产生以下错误消息：

> JpGraph 错误 6007：自动甘特图大小的完整性检查失败。宽度 (=1348) 或高度 (=35667) 大于 MAX_GANTTING_SIZE。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T14:33:16.307

您的示例不清楚，因为您使用的是 2010-10-10，但在第二个示例中，您`date("Y-m-m ...")`在第 5 行。这可能会引发错误吗？

# jquery - 排序/排序机制

> ID：10666051
> 
> 赞同：0
> 
> 时间：2012-05-19T14:30:25.700
> 
> 标签：jquery

我需要一种机制来允许用户控制列表中多个项目的顺序。我很好奇是否有人对可以选择和拖放以重新排序的项目列表的 jQuery 插件有任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T14:32:02.000

[JQuery UI Sortable](http://jqueryui.com/demos/sortable/)非常适合我。

# javascript - 在不重新加载页面/网站的情况下更改 window.location.hash

> ID：10666053
> 
> 赞同：1
> 
> 时间：2012-05-19T14:30:41.323
> 
> 标签：javascript, hash

如果位置哈希发生变化，哪些浏览器仍会刷新页面，哪些不会？当前的浏览器不会重新加载网站吗？

需要使用 window.location.hash 更改哈希而不重新加载网站

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T14:31:47.147

任何浏览器都不应导致页面重新加载并更改哈希值。

# graph - 如何将迷宫转换为图表？

> ID：10666054
> 
> 赞同：3
> 
> 时间：2012-05-19T14:30:51.557
> 
> 标签：graph, maze

我正在尝试将迷宫数据结构转换为图形。迷宫就像一个网格，细胞之间有一些墙壁。

```
maze[8][8][4] is how the maze is represented.
If maze[i][j][0] = 1 it means you can't go up from (i,j)
if maze[i][j][1] = 1 it means you can't go down from (i,j)
// and so on 
```

我想把这个迷宫转换成图表我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T14:35:33.980

你可以通过两种方式做到这一点：

1.从您的初始矩阵创建一个邻接矩阵。邻接矩阵的形式为：

> ```
> h[i][j] = 0, if there is no direct link from i to j 
> (i and j are not neighbors in the maze)
> h[i][j] = 1, if there is a direct link from i to j 
> (i and j are neighbors in the maze) 
> ```

2.为每个节点创建邻居列表：在和之间是否有直接链接`j`的邻居列表中。`i``i``j`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T16:17:51.733

将输入数据视为邻接矩阵。将迷宫想象成一条路径，每个连接段都会创建顶点。并且每个角都是一个节点（包括开始和结束），如果连接存在，则矩阵中有一个值。如果不是，您可以使用 INF 或 -1 来判断没有路由。无论如何，您可以使用 Dijkstra 的最短数学算法来解决这个问题。网络上有很多关于它的信息。

[http://www.geeksforgeeks.org/greedy-algorithms-set-6-dijkstras-shortest-path-algorithm/](http://www.geeksforgeeks.org/greedy-algorithms-set-6-dijkstras-shortest-path-algorithm/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T14:35:38.880

对于每个相邻单元格，如果它们之间没有墙，则使它们在图中连接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-01T16:46:08.997

```
 game=[[1,1,1,1,1,1,1],
         [1,'A',1,1,0,0,1],
         [1,0,0,0,0,1,1],
         [1,0,0,1,1,1,1],
         [1,1,0,0,0,'B',1],
         [1,1,1,1,1,1,1]]
    rows=len(game)
    cols=len(game[0])
    graph={}
    for i in range(1,rows-1):
       for i in range(1,rows-1):
          if(game[i][j]!=1):
          adj=[]
          for ele in [(i-1,j),(i+1,j),(i,j-1),(i,j+1)]:
               if game[ele[0]][ele[1]] == 0 or game[ele[0]][ele[1]]=='B' :
                       adj.append((ele[0],ele[1]))
          graph[(i,j)]=adj
    print(graph)

    {(1, 1): [(2, 1)],
    (1, 4): [(2, 4), (1, 5)],
    (1, 5): [(1, 4)],
    (2, 1): [(3, 1), (2, 2)],
    (2, 2): [(3, 2), (2, 1), (2, 3)],
    (2, 3): [(2, 2), (2, 4)],
    (2, 4): [(1, 4), (2, 3)],
    (3, 1): [(2, 1), (3, 2)],
    (3, 2): [(2, 2), (4, 2), (3, 1)],
    (4, 2): [(3, 2), (4, 3)],
    (4, 3): [(4, 2), (4, 4)],
    (4, 4): [(4, 3), (4, 5)],
    (4, 5): [(4, 4)]} 
```

我添加了大小为 1 的填充以使代码更简单，迷宫的实际大小为 (row-1,cols-1)，

# xml - 带有命名空间的 XSLT 导致问题

> ID：10666056
> 
> 赞同：0
> 
> 时间：2012-05-19T14:31:03.887
> 
> 标签：xml, xslt, namespaces, transformation

我想从下面的 XML 中获取“LIVE”。我读过类似的帖子，因此一直在使用 local-name() 函数，但无论我使用什么 XSLT，我都无法获得它。

```
<?xml version="1.0"?>
<cns:customer xmlns:cns="https://services.cns.com" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="https://services.cns.com docs/xsd/customer.xsd">
    <cns:userId>1001</cns:userId>
    <cns:status>LIVE</cns:status>
    <cns:type wholesale="true" suspended="false">W1</cns:type>
    <cns:properties>
        <cns:property>
            <cns:name>Name</cns:name>
            <cns:value>Bob</cns:value>
        </cns:property>
    </cns:properties>
</cns:customer> 
```

这是我正在使用的 XSLT。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="text" encoding="UTF-8"/>
    <xsl:template match="//*[local-name()='status']/text()">
        <xsl:value-of select="."/>
    </xsl:template>
</xsl:stylesheet> 
```

我正在使用 Oxygen 应用程序进行测试。我认为处理器是 Saxon 6.5.5。

我得到的输出是：

```
1001
LIVE
W1

    Name
    Bob 
```

谢谢，保罗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T15:02:36.997

根据您最近对问题的编辑来回答。

只需使用：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="text" encoding="UTF-8"/>
    <xsl:template match="//*[local-name()='status']/text()">
        value: <xsl:value-of select="."/>
    </xsl:template>
</xsl:stylesheet> 
```

1001, W1 ....etc 与任何模板都不匹配，因此由默认模板处理，它只是将其回显到输出中。

现在您还使命名空间版本工作：

```
<xsl:template match="/c:customer/c:status" xmlns:c="https://services.cns.com">
    value: <xsl:apply-templates select="text()"/>
</xsl:template> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T14:38:25.733

您应该使用 XSLT 处理器注册名称空间。但是如果你不能，你应该能够执行下面的 XPath 表达式：

```
//*[local-name()="status"]/text() 
```

# c# - 无法以编程方式触发输入事件

> ID：10666058
> 
> 赞同：0
> 
> 时间：2012-05-19T14:31:15.617
> 
> 标签：c#, asp.net, user-input

![网页表格](../Images/d023a9d4b3e2414f828ae6780804bd21.png)

大家好 - 我需要用户从对话框中选择一个文件。然后我只需要该文件的路径。我一直在寻找，似乎唯一的方法是使用`<input>`但我不能让用户点击`choose file`按钮，它必须以编程方式“点击”

任何帮助都会很有用。

***PS。这是我使用 ASP>NET 的第二天 - 我也不知道 javascript***

艾登

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T14:35:27.727

您可以使用 jQuery 为 的事件应用事件处理程序`change`，`input type="file"`但有些浏览器会将文件路径名返回到文件，有些会显示一个虚拟路径（具有正确的文件名），而其他浏览器只会给出文件名没有路径。

编辑：要以编程方式单击文件对话框，您可以使用 css 隐藏它`display: none`，然后执行`$("#<%=myFileInput.ClientID%>").click();`提示对话框。

# solr - 我想在 Solr 的 DataImporthandler 中使用多个数据源，并在查询父实体中的数据库后在子实体中传递 URL 值

> ID：10666061
> 
> 赞同：4
> 
> 时间：2012-05-19T14:31:26.167
> 
> 标签：solr

我想在 Solr 的 DataImporthandler 中使用多个数据源，并在查询父实体中的数据库后在子实体中传递 URL 值。这是我的 rss-data-config 文件：

```
<dataConfig>
    <dataSource type="JdbcDataSource" name="ds-db" driver="com.mysql.jdbc.Driver" url="jdbc:mysql://localhost:3306/HCDACoreDB" 
                            user="root" password="CDA@318"/>
    <dataSource type="URLDataSource" name="ds-url"/>
    <document>
        <entity name="feeds" query="select f.feedurl, f.feedsource, c.categoryname from feeds f, category c where f.feedcategory = c.categoryid">

        <field column="feedurl" name="url" dataSource="ds-db"/>
        <field column="categoryname" name="category" dataSource="ds-db"/>

        <field column="feedsource" name="source" dataSource="ds-db"/>

        <entity name="rss"
                transformer="HTMLStripTransformer" 
                forEach="/RDF/channel | /RDF/item" 
                processor="XPathEntityProcessor" 
                url="${dataimporter.functions.encodeUrl(feeds.feedurl)}" > 

            <field column="source-link" dataSource="ds-url" xpath="/rss/channel/link" commonField="true" />
            <field column="Source-desc" dataSource="ds-url" xpath="/rss/channel/description" commonField="true" />
            <field column="title" dataSource="ds-url" xpath="/rss/channel/item/title" />
            <field column="link" dataSource="ds-url" xpath="/rss/channel/item/link" />
            <field column="description" dataSource="ds-url" xpath="/rss/channel/item/description" stripHTML="true"/>
            <field column="pubDate" dataSource="ds-url" xpath="/rss/channel/item/pubDate" />
            <field column="guid" dataSource="ds-url" xpath="/rss/channel/item/guid" />
            <field column="content" dataSource="ds-url" xpath="/rss/channel/item/content" />
            <field column="author" dataSource="ds-url" xpath="/rss/channel/item/creator" />
        </entity>

    </entity>
</document> 
```

我正在做的是在第一个名为提要的实体中，我正在查询数据库并希望使用 feedurl 作为子实体名称 rss 的 URL。

运行数据导入时出现的错误是：java.net.MalformedURLException: no protocol: nullselect f.feedurl, f.feedsource, c.categoryname from feeds f, category c where f .feedcategory = c.categoryid

URL us NULL 意味着它没有将 feedurl 分配给 URL。

关于我做错了什么的任何建议？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T13:28:00.193

这是一个例子：

```
<?xml version="1.0" encoding="UTF-8"?>
<dataConfig>
    <dataSource name="db1" ... />
    <dataSource name="db2"... />
    <document>
        <entity name="outer" dataSource="db1" query=" ... ">
            <field column="id" />
            <entity name="inner" dataSource="db2" query=" select from ... where id = ${outer.id} ">
                <field column="innercolumn" splitBy=":::" />
            </entity>
        </entity>
    </document> 
```

这个想法是有一个嵌套实体的定义，它对另一个数据库进行额外的查询。

您可以像这样访问父实体字段**${outer.id}**

# c# - MVC3 Html Helper 方法来访问父容器？

> ID：10666062
> 
> 赞同：0
> 
> 时间：2012-05-19T14:31:29.783
> 
> 标签：c#, asp.net-mvc-3

如何访问父容器以在 Html Helper 方法中更改其 css？

我知道如何返回 Html，但我不知道当 Html Helpers 实际上应该呈现 Html，而不是更改现有标记时，它是否可以访问父容器。

如果不是，我怎么能将 HtmlStrings 添加在一起，例如：

```
var htmlstring = htmlHelper.ActionLink(linkText, actionName, controllerName);
return new HtmlString("<li>") + htmlstring + new HtmlString("</li>"); 
```

有什么建议么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T00:46:28.680

要将 Html 字符串添加在一起，或者更确切地说是 ActionLink 和文本，请使用以下命令：

```
new HtmlString("<li>" + 
               htmlHelper.ActionLink(linkText, actionName, controllerName)
               + "</li>"); 
```

# css - 是否可以在 CSS 样式表中设置 I-Frame 源？

> ID：10666063
> 
> 赞同：1
> 
> 时间：2012-05-19T14:31:39.170
> 
> 标签：css

我有一个使用媒体查询的 CSS 样式表。我的主页只是一个 100% x 100% 的背景图像，我想在其上放置一个居中的 iframe，它将有一个基于媒体查询结果的源。

例如：

**CSS**

```
@media all and (max-width: 500px) and (min-width: 400px), (min-width: 1151px)

.frame1{
 position:absolute;
 width:390px;  
 left:50%;
 margin-left:-195px;
 } 
```

**HTML**

```
 <iframe class="frame1"></iframe> 
```

因此宽度范围是 400px 到 500px，对于此范围内的任何屏幕，内容都将位于居中的 iframe 中，更宽的屏幕具有更大的背景图像可见边距。现在我的问题是我希望 iframe 源根据屏幕大小而改变，所以我可以在小屏幕上将源作为 mobile.htm（显示网站的非常基本版本），在标准.htm（中级版本）上大屏幕上的平均屏幕和 large.htm（包括其他内容）。

但是，我无法得到任何我想这样做的东西。我假设由媒体查询确定它必须是 CSS 中列出的 iframe 的属性？我尝试了以下每种组合：

帧源：**__** .htm；

iframe 源代码：***_*** .htm；

框架源：url（***_* __** .htm）；

iframe src: url( ***_* __** .htm);

框架源：url（“ ***_* _** .htm”）；

等等

*下划线为页面名称。

但到目前为止，没有任何效果。

有谁知道这是否可能？如果有怎么办？并且请温柔地解释我对此很陌生，在我前进的过程中尝试自学并学习零碎的东西，因为我需要它们来实现我想要的......到目前为止进展顺利，但让我难过几天了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T14:40:39.793

您可以[根据属性进行匹配，](http://www.w3.org/TR/selectors/#attrnmsp)但不能仅使用 CSS 设置属性¹

但是，您可以使用一小段 JavaScript 来检测媒体查询的结果（尽管是间接的）：

*   使用媒体查询将属性值应用于`IFRAME`
*   使用 JavaScript 选择具有该属性值的元素（[jQuery 选择器](https://stackoverflow.com/questions/1180067/jquery-find-by-inline-css-attribute)将适用于此，尽管可能涉及一些迭代）
*   `src`相应地更新

然而，媒体查询和 JavaScript 之间并没有直接的关联。来自一篇关于将媒体查询与 JS 配对的文章：

> 据我所知，JavaScript 无法直接访问媒体查询。您无法读出上面的示例媒体查询是否已触发。

[全文](http://www.quirksmode.org/blog/archives/2010/08/combining_media.html)建议一些基于脚本的变通方法来从脚本返回与媒体查询结果一致的结果。

^(1 - 至少不是以广泛支持的基于标准的方式。有一些黑客可以使用 IE 专有表达式在 CSS 中执行代码（现在所有这些都已弃用）。)

# haskell - 如果在 Haskell 中使用 HXT 解析 RSS 文件时标签丢失

> ID：10666068
> 
> 赞同：3
> 
> 时间：2012-05-19T14:32:20.743
> 
> 标签：haskell, rss, hxt

我必须在 Haskell 中解析一个 RSS 文件，然后执行以下操作：

```
atTag tag = deep (isElem >>> hasName tag)
getRSSDetails = atTag "channel" >>>
   proc p -> do 
      fTitle         <- gotoAndTake "title"        -< p
      fLink          <- gotoAndTake "link"         -< p
      fDescription   <- gotoAndTake "description"  -< p
      fLanguage      <- gotoAndTake "language"     -< p
      fGenerator     <- gotoAndTake "generator"    -< p
      fCopyright     <- gotoAndTake "copyright"    -< p
      fWebMaster     <- gotoAndTake "webMaster"    -< p
      fLastBuildDate <- gotoAndTake "lastBuildDate" -< p
                where gotoAndTake a = (getChildren >>> 
                          isElem >>> 
                          hasName a >>> 
                          getChildren >>> 
                          getText) 
```

我的问题是，当缺少一个标签时，假设 RSS 文件中的“lastBuildDate”比我得到一个空列表，但我只想用“”替换该项目。

我怎样才能做到这一点 ？？谢谢，

```
main = do
   rssFeeds <- runX (parseRSS "rss.xml" >>> getRSSDetails)
   print rssFeeds 
```

EDIT1：通过 `orElse`在 gotoAndTake a ... 的末尾添加 (constA "") 来解决

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T13:45:19.733

通过添加解决

```
orElse (constA "") 
```

在......的最后

```
where gotoAndTake a = (getChildren >>> 
                   isElem >>> 
                   hasName a >>> 
                   getChildren >>> 
                   getText) 
```

# prolog - Prolog 递归调用

> ID：10666069
> 
> 赞同：0
> 
> 时间：2012-05-19T14:32:22.913
> 
> 标签：prolog

所以，我有一个序言谓词，例如是这样的：

```
getSomething([Head|Tail],List,MaxV,MaxK,BestThing) :-
           %I call other functions that work just fine
           makeaverage(List,Med),
           compare(Med,MaxV,Comp),
           (Comp < MaxK, 
           getSomething(Tail,List,MaxV,Comp,Head);
           getSomething(Tail,List,MaxV,MaxS,BestThing)),
           write(BestThing). 
```

问题是最好的事情实际上是 _G267 并写返回：

事物 1 事物 2 事物 3 _G267

我真的需要Thing1，但是当谓词递归返回时，一切都搞砸了......所以......一些帮助会很棒:)。

我修好了它 ：

```
 getSomething([Head],List,MaxV,MaxK,BestThing) :-
           makeaverage(List,Med),
           compare(Med,MaxV,Comp),
           MaxK = Comp,
           BestTHing = Head .
    getSomething([Head|Tail],List,MaxV,MaxK,BestThing) :-
           getSomething(Tail,List,MaxV,Comp1,Head1),
           makeaverage(List,Med),
           compare(Med,MaxV,Comp),
           (Comp < MaxK
           ->
           MaxK = Comp,
           BestThing = Head;
           MaxK = Comp,
           BestThing = Head1). 
```

或者类似的想法是你递归地使用未初始化的变量，并在一个元素列表部分中的最后一次递归调用结束时初始化它们......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T21:03:32.673

只需复制我之前的评论作为答案：

`BestTHing`应该`BestThing`在第一个子句中`getSomething`，

`getSomething`这会将 的第四个参数与其第一个参数的单个元素统一起来。

# visual-studio-2010 - VS 2010 扩展访问加载类型

> ID：10666070
> 
> 赞同：0
> 
> 时间：2012-05-19T14:32:28.273
> 
> 标签：visual-studio-2010, vs-extensibility

我目前正在尝试编写代码生成器，我希望用户通过下拉菜单为类上的属性选择目标类型，但要填充下拉菜单，我需要知道项目可用的类型。

如何通过 VS 扩展访问当前项目已加载的属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T15:34:34.703

在这里查看我的答案： [如何访问项目代码元数据？](https://stackoverflow.com/questions/10523918/how-to-access-project-code-meta-data/10642840#10642840)

您应该能够从我提供的代码片段中获取类型。

# php - MYSQL PHP 未选择数据库 - 找不到错误

> ID：10666073
> 
> 赞同：2
> 
> 时间：2012-05-19T14:32:54.060
> 
> 标签：php, mysql

```
<?
require_once('etcore.php');
mysql_connect($dburl,$dbuser,$dbpass) or die(mysql_error()); 
mysql_select_db("rshost") or die(mysql_error());
$username=strtoupper(clean($_POST['username']));
$password=md5($_POST['password']);
$andover = mysql_query("SELECT * FROM users WHERE usernameupper='$username' AND password='$password'") or die(mysql_error().__LINE__);
$numberofthings = mysql_num_rows($andover) or die(mysql_error().__LINE__);
if ($numberofthings = 1) {
    $getit=mysql_fetch_array($andover) or die(mysql_error().__LINE__);
    $_SESSION['id'] = $getit['id'];
    header('Location: index.php');
}
else {
?>
<h1>Login:</h1>
<img src='http://media.idownloadblog.com/wp-content/uploads/2011/12/Warning.png' width="25" height="25" />
<strong style="color:#F03;">Incorrect Username and/or Password </strong><br>
<form method="POST" action="login.php">
Username: <input name="username" type="text" /><br />
Password: <input name="password" type="password" /><br />
<input name="submit" type="submit" value="Log In!" /><br />
</form>
<? } ?> 
```

这是我正在使用的代码。每当我运行代码时，我都会在第 7 行收到错误“未选择数据库”。任何帮助将不胜感激。谢谢！顺便说一句：数据库用户、密码和 URL 都在“etcore.php”文件中，所以那里没有问题。我也尝试用字符串替换这些变量并得到相同的错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T14:39:18.963

怎么样：

```
mysql_select_db("rshost", mysql_connect($dburl,$dbuser,$dbpass)) 
```

甚至更好：

```
$handle = mysql_connect($dburl,$dbuser,$dbpass);
mysql_select_db("rshost", $handle); 
```

也许是为了更好地了解和理解： [手册页](http://php.net/manual/en/function.mysql-select-db.php)

在部分**参数**`$handle`中，所以很清楚为什么它可能或不使用参数 可能不起作用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T14:43:29.843

授予数据库权限。可能是您没有访问数据库的用户权限，请检查此

```
mysql> grant all privileges on Databasename.* to 'username'@'localhost' identified by password 
```

# facebook - facebook api /me/events/not_replied

> ID：10666074
> 
> 赞同：0
> 
> 时间：2012-05-19T14:33:04.613
> 
> 标签：facebook, api

我正在尝试从我这里获取 events/not_replied，但我得到的只是一个空数组....

我试过那些：

```
$facebook->api('/me/events/not_replied','GET'); 
```

和

```
$facebook->api('/me/events/not_replied'); 
```

和

```
$access_token = $facebook->getAccessToken();
$url = 'https://graph.facebook.com/me/events/not_replied?access_token='.$access_token;

$string = file_get_contents($url);
$json_a=json_decode($string,true); 
```

等等...

没有工作。任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T03:19:19.783

您需要请求“user_events”权限。

# boost - 为什么不只是 boost::filesystem 标头？

> ID：10666084
> 
> 赞同：5
> 
> 时间：2012-05-19T14:34:25.657
> 
> 标签：boost, boost-filesystem

出于求知欲，我想知道为什么 boost::filesystem 库有一个编译组件，而在其他情况下不需要编译组件。编译部分中有什么不能在 hpp 中？

真正让我困惑的是，无论如何我都会在我的计算机上编译这部分（在使用库之前），因此我希望每次构建应用程序时都可以甚至更喜欢执行我在 BJam 中所做的相同编译。

为什么会有额外的*.so/* .a 文件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-21T08:17:04.500

一些 boost 库只有头文件，而其他一些需要构建（系统、文件系统、图形、mpi、序列化等）；可以将几个 boost 库配置为仅头文件或单独构建。

单独构建的库的优势非常明显：您自己的项目编译速度更快，并且依赖的外部代码更少。

然而，构建复杂性是一种权衡。

# git - 如何让 `git clone --recursive` 重新创建子模块的遥控器和分支？

> ID：10666085
> 
> 赞同：18
> 
> 时间：2012-05-19T14:34:38.460
> 
> 标签：git, git-submodules, git-clone, cloning, git-remote

我有一个包含几个子模块的项目。其中许多是从 GitHub fork 克隆的，我为我的自定义模块添加了一个分支。一个典型的设置是这样的：

在本地文件夹中：MyProject1/Frameworks/SomeAmazingRepo/

```
$ git branch -vva
*my-fork                       123456 [my-fork/my-fork] Latest commit msg from fork
master                         abcdef [origin/master] Latest commit msg from original repo
remotes/my-fork/my-fork        123456 [my-fork/my-fork] Latest commit msg from fork
remotes/my-fork/master         abcdef [origin/master] Latest commit msg from original repo
remotes/origin/HEAD            -> origin/master
remotes/origin/master          abcdef [origin/master] Latest commit msg from original repo

$ git remote -v
my-fork                        git@github.com:MyUser/SomeAmazingRepo.git (fetch)
my-fork                        git@github.com:MyUser/SomeAmazingRepo.git (push)
origin                         git://github.com/OriginalOwner/SomeAmazingRepo.git (fetch)
origin                         git://github.com/OriginalOwner/SomeAmazingRepo.git (push) 
```

我`git clone --recursive`的项目开始一个新的衍生项目，当它开始递归时，它会吐出一个错误，声称它找不到这些存储库的存储提交。经检查，似乎没有添加遥控器，并且分支在 master ...

在本地文件夹中：MyProject2/Frameworks/SomeAmazingRepo/

```
$ git branch -vva
*master                        abcdef [origin/master] Latest commit msg from original repo
remotes/origin/HEAD            -> origin/master
remotes/origin/master          abcdef [origin/master] Latest commit msg from original repo

$ git remote -v
origin                         git://github.com/OriginalOwner/SomeAmazingRepo.git (fetch)
origin                         git://github.com/OriginalOwner/SomeAmazingRepo.git (push) 
```

唯一的补救措施是手动将遥控器添加到所有存储库（非常乏味）。

在上面有两个跟踪分支但只有一个远程（origin => my github fork）的情况下存在类似的问题。在这种情况下，它会找到提交并检查它，但无法重新创建跟踪分支，留下一个“悬空”提交......非常可怕，因为它没有警告你！

如何克隆我的项目，以便它可靠地重新创建子模块的遥控器和分支？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-12T12:20:15.023

[`git clone --recursive`](http://git-scm.com/docs/git-clone)相当于`git submodule update --init --recursive`。

并且[git 子模块更新](http://git-scm.com/docs/git-submodule)只会签出记录的 SHA1（记录在父 repo 中）：

> 更新已注册的子模块，即克隆缺少的子模块并签出包含存储库的索引中指定的提交。
> **这将使子模块 HEAD 分离**。

2012：因此在子模块中找不到活动分支是常态。
A`git submodule foreach 'git checkout master'`至少可以设置主分支（如果您确定所有记录的 SHA1 都应该是每个子模块的“主”分支的一部分。

* * *

2013-2014：**您可以配置`.gitmodules`文件以在子模块中指定要结帐的分支**。
请参阅“[如何从特定分支更新我的 git 子模块？](https://stackoverflow.com/a/23511133/6309) ”

```
cd /path/to/your/parent/repo
git config -f .gitmodules submodule.<path>.branch <branch> 
```

* * *

您在子模块中本地添加的任何远程，例如`my-fork`，根本不会记录在父存储库中。
因此，当您再次克隆该父 repo 时，它将初始化和更新`.gitmodules`文件中记录的子模块（您可以[更改该地址](https://stackoverflow.com/questions/913701/changing-remote-repository-for-a-git-submodule?rq=1)，但每个子模块只有*一个*关联）。
如果您有其他远程地址要关联到每个子模块，则需要一个脚本来自动化该过程。

如“[子模块的真实性质](https://stackoverflow.com/questions/1979167/git-submodule-update/1979194#1979194)”中所述，子模块主要用于记录/访问历史中的*固定*点。
您可以直接在子模块中开发，但您需要去那里创建正确的分支和/或添加正确的遥控器。

> 它吐出一个错误，声称找不到这些存储库的存储提交。

每次在子模块中提交时，您需要：

*   将其推送到关联的远程（即记录在`.gitmodules`父仓库中的远程）
*   返回父回购并提交所述父。

但：

如果您在`my-fork`该子模块的关联远程仓库*不是*“ ”时推送到“ `my-fork`”...那么下一个克隆将无法签出该子模块提交。

* * *

2014 年 8 月更新 (Git 2.1)

请参阅[Matthew Chen (](https://github.com/charlesmchen) [)](https://github.com/charlesmchen)的[提交 9393ae7](https://github.com/git/git/commit/9393ae79c9b4d3deade544be9ce057b7fa290490)：[`charlesmchen`](https://github.com/charlesmchen)

## 子模块：文档“ `sync --recursive`”

> " `git submodule sync`" 命令支持该`--recursive`标志，但文档没有提及这一点。
> 该标志很有用，例如当远程在子模块的子模块中更改时。

* * *

更新 Git 2.23（2019 年第三季度）

您还可以考虑[`git clone --recurse-submodule --remote-submodules`](https://stackoverflow.com/a/3797061/6309)：这将使用已在其跟踪分支而不是其 gitlink 父 repo SHA1 签出的子模块进行克隆。

# firefox-addon - 面板中的工具提示

> ID：10666086
> 
> 赞同：6
> 
> 时间：2012-05-19T14:34:40.840
> 
> 标签：firefox-addon, firefox-addon-sdk

似乎您从属性获得的工具提示`title="test"`未显示在面板内。

还测试了[在面板中加载的 stackoverflow](https://builder.addons.mozilla.org/addon/1053193/latest/)，当您将鼠标悬停在热、周、月上时没有工具提示。但是自定义工具提示有效，例如当您将鼠标悬停在标签上时。

有没有办法在附加 SDK 面板中启用工具提示，或者唯一的方法是自定义工具提示？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T14:16:21.783

不，显示 HTML 元素的工具提示需要[在浏览器中使用特殊代码](http://hg.mozilla.org/mozilla-central/file/0e2cc686b07b/browser/base/content/browser.js#l3090)。此代码适用于内置浏览器，但不适用于 SDK 嵌入面板中的浏览器。这可能值得作为 SDK 错误提交，但与此同时 - 自定义工具提示是要走的路。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-30T20:50:44.543

是的，有办法。这从 Firefox 31 开始有效

```
var panel = require("sdk/panel").Panel({
    width: 400,
    height: 400,
    contentURL: "http://stackoverflow.com/",
});

panel.show();

require('sdk/view/core').getActiveView(panel)
    .setAttribute('tooltip', 'aHTMLTooltip'); 
```

# php - suhosin 是否强制 php.ini 中的某些选项？

> ID：10666089
> 
> 赞同：0
> 
> 时间：2012-05-19T14:34:59.287
> 
> 标签：php, suhosin

我似乎无法更改 php.ini 中的某些值。

例如：display_errors = On

我只能在运行时打开它。

我怀疑 suhosin 搞砸了，有没有办法绕过它？

是的，我确定我正在编辑正确的文件，但看看这个，取自 phpinfo()：

额外的.ini文件解析/etc/php5/fpm/conf.d/pdo.ini, /etc/php5/fpm/conf.d/suhosin.ini

但是我打开 suhosin.ini 里面什么都没有，只有 extension=suhosin.so

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T16:03:38.323

尝试将此添加到您的 php.ini 或 suhosin.ini：

```
suhosin.disable.display_errors = Off 
```

# actionscript-3 - 我对 Citrus Engine 的一般问题

> ID：10666098
> 
> 赞同：1
> 
> 时间：2012-05-19T14:35:45.570
> 
> 标签：actionscript-3

我是柑橘引擎的新手，我今天才发现这个引擎。我正在制作我的第一个 Flash 游戏，我认为这个引擎是我的选择。我只想问一些一般性的问题。

很抱歉在没有探索的情况下询问，但我可以为我的英雄制作自定义技能吗？就像按 1 是斜线，2 是三斜线，3 是压力炸弹技能。

我可以在 CE 中为我的老板、敌人、子弹等制作自定义课程吗？

如果我想将我的游戏上传到 Newgrounds（只需要一个 SWF）。Citrus Engine 能否生成一个 SWF 文件来包装我的游戏中的所有内容？我对此表示怀疑，因为 CE 必须有一个英雄、地面等的 swf。请让我知道这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T16:46:27.227

是的，对于你所有的问题。

[看这个视频。](http://www.youtube.com/watch?v=HSwWCwLPw04&feature=fvwrel)

这是一款巴西游戏，已开始使用 CE 进行开发。您所看到的是用它制作的，但似乎今天的项目正在使用另一个框架。

# windows - $LastExitCode=0，但在 PowerShell 中 $?=False。将标准错误重定向到标准输出会产生 NativeCommandError

> ID：10666101
> 
> 赞同：54
> 
> 时间：2012-05-19T14:36:14.267
> 
> 标签：windows, powershell, command-line

为什么 PowerShell 在下面的第二个示例中显示出令人惊讶的行为？

首先，一个理智行为的例子：

```
PS C:\> & cmd /c "echo Hello from standard error 1>&2"; echo "`$LastExitCode=$LastExitCode and `$?=$?"
Hello from standard error
$LastExitCode=0 and $?=True 
```

没有惊喜。我向标准错误打印一条消息（使用`cmd`'s `echo`）。我检查变量`$?`和`$LastExitCode`. 正如预期的那样，它们分别等于 True 和 0。

但是，如果我要求 PowerShell 通过第一个命令将标准错误重定向到标准输出，我会收到 NativeCommandError：

```
PS C:\> & cmd /c "echo Hello from standard error 1>&2" 2>&1; echo "`$LastExitCode=$LastExitCode and `$?=$?"
cmd.exe : Hello from standard error
At line:1 char:4
+ cmd <<<<  /c "echo Hello from standard error 1>&2" 2>&1; echo "`$LastExitCode=$LastExitCode and `$?=$?"
    + CategoryInfo          : NotSpecified: (Hello from standard error :String) [], RemoteException
    + FullyQualifiedErrorId : NativeCommandError

$LastExitCode=0 and $?=False 
```

我的第一个问题，为什么是 NativeCommandError？

其次，为什么运行成功`$?`时为 False为 0？PowerShell[关于自动变量](http://technet.microsoft.com/en-us/library/dd347675.aspx)的文档没有明确定义. 我一直认为当且仅当为 0 时它为真，但我的示例与此相矛盾。`cmd``$LastExitCode``$?``$LastExitCode`

* * *

以下是我在现实世界中遇到这种行为的方式（简化）。这真的是FUBAR。我正在从另一个调用一个 PowerShell 脚本。内部脚本：

```
cmd /c "echo Hello from standard error 1>&2"
if (! $?)
{
    echo "Job failed. Sending email.."
    exit 1
}
# Do something else 
```

简单地运行`.\job.ps1`它，它工作正常，并且不发送任何电子邮件。但是，我是从另一个 PowerShell 脚本调用它，记录到一个文件`.\job.ps1 2>&1 > log.txt`。在这种情况下，将发送一封电子邮件！您在脚本之外使用错误流执行的操作会影响脚本的内部行为。*观察一个现象会改变结果。*这感觉就像是量子物理学而不是脚本！

[有趣的是：`.\job.ps1 2>&1`可能会或不会爆炸，具体取决于您运行它的位置]

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2012-10-12T20:32:09.590

（我使用的是 PowerShell v2。）

' `$?`' 变量记录在`about_Automatic_Variables`：

```
美元？
  包含上一次操作的执行状态

```

这是指最近的 PowerShell 操作，而不是最后一个外部命令，这是您在`$LastExitCode`.

在您的示例中，`$LastExitCode`是 0，因为最后一个外部命令是`cmd`，它*成功地*回显了一些文本。但是`2>&1`导致消息`stderr`被转换为输出流中的错误记录，这告诉 PowerShell 在最后一次*操作*`$?`期间发生错误，导致`False`.

为了进一步说明这一点，请考虑以下内容：

```
> java -jar foo；$?; $LastExitCode
无法访问 jarfile foo
错误的
1

```

`$LastExitCode`是 1，因为那是 java.exe 的退出代码。`$?`是 False，因为 shell 做的最后一件事失败了。

但如果我所做的只是切换它们：

```
> java -jar foo；$LastExitCode; 美元？
无法访问 jarfile foo
1
真的

```

... 然后`$?`是 True，因为 shell 所做的最后一件事是打印`$LastExitCode`到主机，这是成功的。

最后：

```
> &{ java -jar foo }; $?; $LastExitCode
无法访问 jarfile foo
真的
1

```

...这似乎有点违反直觉，但现在`$?`是*True*，因为脚本块的执行是*成功*的，即使在其中运行的命令不是。

* * *

返回到`2>&1`重定向......这会导致输出流中出现错误记录，这就是关于`NativeCommandError`. shell 正在转储整个错误记录。

当您想要做的只是管道`stderr` *和* `stdout`在一起时，这可能特别烦人，因此它们可以组合在一个日志文件或其他东西中。谁想要 PowerShell 插入他们的日志文件？？？如果我这样做`ant build 2>&1 >build.log`了，那么任何错误都会`stderr`导致 PowerShell 的多*管闲事*$0.02 被附加，而不是在我的日志文件中获得干净的错误消息。

但是，输出流不是*文本*流！重定向只是*对象*管道的另一种语法。错误记录是对象，因此您所要做的就是在重定向之前将该流上的对象转换为*字符串：*

从：

```
> cmd /c "从标准错误中回显你好 1>&2" 2>&1
cmd.exe：来自标准错误的问候
在行：1 字符：4
+ cmd &2" 2>&1
    + CategoryInfo : NotSpecified: (Hello from standard error :String) [], RemoteException
    + FullyQualifiedErrorId : NativeCommandError

```

到：

```
> cmd /c "从标准错误回显你好 1>&2" 2>&1 | %{ "$_" }
来自标准错误的你好

```

...并重定向到文件：

```
> cmd /c "从标准错误回显你好 1>&2" 2>&1 | %{ "$_" } | 开球.txt
来自标准错误的你好

```

...要不就：

```
> cmd /c "从标准错误回显你好 1>&2" 2>&1 | %{ "$_" } >out.txt

```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-10-01T18:51:50.953

这个错误是 PowerShell 对错误处理的规范设计的一个无法预料的结果，因此很可能它永远不会被修复。如果您的脚本仅与其他 PowerShell 脚本一起使用，那么您是安全的。但是，如果您的脚本与来自广阔世界的应用程序交互，则此错误可能会咬人。

```
PS> nslookup microsoft.com 2>&1 ; echo $?

False 
```

明白了！尽管如此，在一些痛苦的抓挠之后，你永远不会忘记这一课。

## 使用`($LastExitCode -eq 0)`代替`$?`

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-05-19T14:52:08.130

*（注意：这主要是推测；我很少在 PowerShell 中使用许多本机命令，其他人可能比我更了解 PowerShell 内部）*

我猜你在 PowerShell 控制台主机中发现了一个差异。

1.  如果 PowerShell 在标准错误流中提取内容，它将假定一个错误并抛出一个`NativeCommandError`.
2.  PowerShell 只能在*监视*标准错误流时才能够接收到它。
3.  PowerShell ISE*必须对其进行*监控，因为它不是控制台应用程序，因此本机控制台应用程序没有可写入的控制台。这就是为什么在 PowerShell ISE 中无论`2>&1`重定向运算符如何都会失败的原因。
4.  如果您使用重定向运算符，控制台主机*将*`2>&1`监视标准错误流，因为标准错误流上的输出必须被重定向并因此被读取。

我的猜测是控制台 PowerShell 主机很懒惰，如果不需要对其输出进行任何处理，它只会将本机控制台命令交给控制台。

我真的认为这是一个错误，因为 PowerShell 的行为因主机应用程序而异。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2019-12-17T14:33:43.873

**更新**： v7.2 的*预览*版现在包含修复以下问题的*实验性功能- 请参阅*[此答案](https://stackoverflow.com/a/66726535/45375)；但是请注意，不能*保证*实验性功能成为官方功能。

* * *

**从 v7.1 开始的问题**总结：

**PowerShell 引擎在应用于外部程序调用的重定向**方面仍然存在**错误`2>`**：

根本原因是**using`2>`导致 stderr（标准错误）输出*通过 PowerShell 的错误流***（请参阅[about_Redirection](https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.core/about/about_Redirection)）进行路由，这会产生以下不良后果：

*   如果`$ErrorActionPreference = 'Stop'`碰巧生效，则使用`2>`意外触发*脚本终止错误*，即*中止*脚本（即使在表单`2>$null`中，其意图显然是*忽略*stderr 行）。请参阅[此 GitHub 问题](https://github.com/PowerShell/PowerShell/issues/4002)。

    *   解决方法：（临时）设置`$ErrorActionPreference = 'Continue'`
*   由于`2>`当前触及错误流，如果发出了至少一条 stderr 行`$?`，则自动成功状态变量始终设置为`$False`，然后不再反映命令的真实成功状态。请参阅[此 GitHub 问题](https://github.com/PowerShell/PowerShell/issues/10512)。

    *   [解决方法，如您的答案](https://stackoverflow.com/a/12679208/45375)中所建议的那样：仅`$LASTEXITCODE -eq 0`在调用外部程序后用于测试是否成功。
*   使用`2>`，stderr 行会意外记录在自动`$Error`变量（记录会话中发生的所有错误的变量）中 - 即使您使用`2>$null`. 请参阅[此 GitHub 问题](https://github.com/PowerShell/PowerShell/issues/11133)。

    *   解决方法：缺少跟踪添加了多少错误记录并`$Error.RemoveAt()`一一删除它们，没有。

* * *

通常，不幸的是，***默认情况下*****，某些 PowerShell 主机通过 PowerShell 的错误流从外部程序路由 stderr 输出***，即将**其视为*错误*输出**，这是**不合适**的，因为**许多外部程序也使用 stderr 来获取*状态*信息**，或者更一般地，用于任何*不是数据*（`git`作为一个主要示例）：并非每个 stderr 行都可以假定代表一个*错误*，并且 stderr 输出的存在*并不*意味着失败。*

 ***受影响的主机**：

*   过时的[Windows PowerShell ISE](https://docs.microsoft.com/en-us/powershell/scripting/components/ise/introducing-the-windows-powershell-ise#support)和可能的其他基于 GUI 的旧 IDE，*而不是*Visual Studio Code。

*   通过**[*PowerShell 远程处理*](https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.core/about/about_Remote)****或在****[*后台作业*](https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.core/about/about_Jobs)****中执行外部程序[](https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.core/about/about_Remote)*[](https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.core/about/about_Jobs)*****时（这两种调用机制共享相同的基础架构并使用`ServerRemoteHost`PowerShell 附带的主机）。**

 ****在非远程、非后台调用中**表现如预期的主机（它们将 stderr 行传递到显示器并正常打印它们）：****

 ***   ***终端*（控制台）**，包括[Windows 终端](https://github.com/microsoft/terminal)。

*   带有[PowerShell 扩展的](https://marketplace.visualstudio.com/items?itemName=ms-vscode.PowerShell)**[Visual Studio Code](https://code.visualstudio.com/)**；此跨平台编辑器 (IDE) 旨在取代 Windows PowerShell ISE。

[此GitHub 问题](https://github.com/PowerShell/PowerShell/issues/3996)中讨论了主机之间的这种不一致。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-12-06T23:19:21.827

# 电源外壳 7.1

有一个[新的实验功能](https://docs.microsoft.com/en-us/powershell/scripting/learn/experimental-features?view=powershell-7.1#psnotapplyerroractiontostderr)可以启用“理智”的行为：

```
Enable-ExperimentalFeature PSNotApplyErrorActionToStderr 
```

不幸的是，此功能不能仅在当前范围内启用，它将为整个用户帐户（所有带有参数的用户`-Scope AllUsers`）启用，并且需要启动新的 PS 会话才能生效。

现在这个示例代码......

```
& cmd /c "echo Hello from standard error 1>&2" 2>&1
echo "`$LastExitCode=$LastExitCode and `$?=$?"
echo "`$Error.Count=$($Error.Count)" 
```

...输出人们所期望的：

```
Hello from standard error
$LastExitCode=0 and $?=True
$Error.Count=0 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-22T09:47:13.087

对我来说，这是 ErrorActionPreference 的问题。从 ISE 运行时，我在第一行中设置了 $ErrorActionPreference = "Stop" 并且拦截了所有事件，并将 *>&1 作为参数添加到调用中。

所以首先我有这条线：

```
& $exe $parameters *>&1 
```

就像我说的那样不起作用，因为我在文件的前面有 $ErrorActionPreference = "Stop" （或者它可以在用户启动脚本的配置文件中全局设置）。

因此，我尝试将其包装在 Invoke-Expression 中以强制执行 ErrorAction：

```
Invoke-Expression -Command "& `"$exe`" $parameters *>&1" -ErrorAction Continue 
```

这也不起作用。

所以我不得不回退到临时重写ErrorActionPreference：

```
$old_error_action_preference = $ErrorActionPreference

try
{
    $ErrorActionPreference = "Continue"
    & $exe $parameters *>&1
}
finally
{
    $ErrorActionPreference = $old_error_action_preference
} 
```

这对我有用。

我已经把它包装成一个函数：

```
<#
    .SYNOPSIS

    Executes native executable in specified directory (if specified)
    and optionally overriding global $ErrorActionPreference.
#>
function Start-NativeExecutable
{
    [CmdletBinding(SupportsShouldProcess = $true)]
    Param
    (
        [Parameter (Mandatory = $true, Position = 0, ValueFromPipelinebyPropertyName=$True)]
        [ValidateNotNullOrEmpty()]
        [string] $Path,

        [Parameter (Mandatory = $false, Position = 1, ValueFromPipelinebyPropertyName=$True)]
        [string] $Parameters,

        [Parameter (Mandatory = $false, Position = 2, ValueFromPipelinebyPropertyName=$True)]
        [string] $WorkingDirectory,

        [Parameter (Mandatory = $false, Position = 3, ValueFromPipelinebyPropertyName=$True)]
        [string] $GlobalErrorActionPreference,

        [Parameter (Mandatory = $false, Position = 4, ValueFromPipelinebyPropertyName=$True)]
        [switch] $RedirectAllOutput
    )

    if ($WorkingDirectory)
    {
        $old_work_dir = Resolve-Path .
        cd $WorkingDirectory
    }

    if ($GlobalErrorActionPreference)
    {
        $old_error_action_preference = $ErrorActionPreference
        $ErrorActionPreference = $GlobalErrorActionPreference
    }

    try
    {
        Write-Verbose "& $Path $Parameters"

        if ($RedirectAllOutput)
            { & $Path $Parameters *>&1 }
        else
            { & $Path $Parameters }
    }
    finally
    {
        if ($WorkingDirectory)
            { cd $old_work_dir }

        if ($GlobalErrorActionPreference)
            { $ErrorActionPreference = $old_error_action_preference }
    }
} 
```*****

# ruby-on-rails - Emberjs + data + rails - Uncaught TypeError：无法调用未定义的方法'map'

> ID：10666107
> 
> 赞同：6
> 
> 时间：2012-05-19T14:36:53.157
> 
> 标签：ruby-on-rails, ember.js, ember-data

当我尝试使用 emberjs + ember 数据从 rails db 加载数据时，出现此错误

> 未捕获的类型错误：无法调用未定义的方法“地图”

这是咖啡脚本代码：

```
window.Cosmetics = Ember.Application.create

Cosmetics.store = DS.Store.create
  revision: 4
  adapter: DS.RESTAdapter.create 
    bulkCommit: false

Cosmetics.admin_user = DS.Model.extend({
  name: DS.attr('string')
  email: DS.attr('string')
});

Cosmetics.view = Ember.View.extend
  templateName: 'ember/views/aaa'

Cosmetics.admin_user.reopenClass
  url: 'admin/user'

Cosmetics.store.findAll(Cosmetics.admin_user) 
```

控制器获取正确的 JSON 数据。我尝试从互联网上找到的示例中映射代码，但没有任何帮助。有任何想法吗？我想我做错了什么。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T20:08:17.947

我有完全相同的问题。`index`为我解决的问题是在我的控制器的操作中呈现 JSON 时添加根节点。这意味着改变这一行：

```
format.json { render json: @things } 
```

对此：

```
format.json { render json: { things: @things }} 
```

这是因为 Ember-data 需要 JSON 对象中的根节点，但 Rails 默认不包含它。

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-14T21:38:56.600

找到问题了，不知道解决办法。

如果您的资源在命名空间下提供服务，例如

```
App.Event = DS.Model.extend({
  name: DS.attr('string'),
});

App.Event.reopenClass({
  url: 'api/event'
}) 
```

当 ember-data 解析 json 响应时，它会执行类似`json[plural]`in `findAll`which should be的操作`json['events']`，但是复数计算为 be `json['api/events']`，因此会出现错误。我会四处打听，可能会为此提出一张票。

**更新**

我在[这里为此创建了一张票](https://github.com/emberjs/data/issues/289)

**解决方法**

作为一个黑客，我正在这样做：

```
def index
  respond_to do |format|
    format.json { render json: { 'api/events': Event.all } }
  end
end 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-24T16:21:11.033

ember-data 期望 findAll 结果嵌套在模型的复数形式下：

ember-data 的预期：

```
{
    "users": [
        {
            "activated": null, 
            "created_at": "2012-05-14T19:35:44Z", 
            "email": "john@doe.com", 
            "id": 1, 
            "name": "john doe", 
            "updated_at": "2012-05-15T20:23:06Z"
        }
    ]
} 
```

在您的示例中得到了什么：

```
[
    {
        "activated": null, 
        "created_at": "2012-05-14T19:35:44Z", 
        "email": "john@doe.com", 
        "id": 1, 
        "name": "john doe", 
        "updated_at": "2012-05-15T20:23:06Z"
    }
] 
```

具体来说，错误来自 ember 获取 JSON 响应并在“users”键下的所有内容上运行“map”，在您的情况下它不存在，因此“map”被称为“未定义”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T15:01:51.780

问题的根本原因是[rest_adapter.js](http://github.com/emberjs/data/blob/master/packages/ember-data/lib/adapters/rest_adapter.js)中的复数函数，因此解决方案是修复它；）

```
 DS.RESTAdapter.reopenClass({
    pluralize: function(name) {
      if (!this.plurals[name])
        name = name.substring(name.lastIndexOf('/')+1);

      return this.plurals[name] || name + "s";
    }
  }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-03T14:33:50.397

~~我终于找到了解决方案！~~

我不确定这是否应该以这种方式完成，但这足以摆脱批量提交。所以商店应该是这样的：

```
Cosmetics.store = DS.Store.create
  revision: 4
  adapter: DS.RESTAdapter.create 
```

`bulkCommit: false`导致`Uncaught TypeError: Cannot call method 'map' of undefined`错误。

~~在 Rails 应用程序中使用时，此问题似乎仅与 ember-data 有关。~~

我似乎*有点*匆忙，因为似乎解决了问题，引起了其他人;|

# java - 如何存储 cookie 以用于与 HttpClient 的后续连接

> ID：10666110
> 
> 赞同：0
> 
> 时间：2012-05-19T14:37:29.177
> 
> 标签：java, android

我有以下代码将登录详细信息发布到网站。它可以工作，但我怎样才能拥有会话 cookie，所以我不必再次登录其他页面

编辑：更新的代码

进口...

```
public class Login extends Activity {
    Button bLogin;
    EditText teUsername, tePassword;
    CheckBox chbRememberPass;

    HttpClient httpclient;
    HttpResponse response;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.login);
        initialiseVars();
        httpclient = new DefaultHttpClient();

        bLogin.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                checkLoginDetails();
                test0();
            }
        });
    }

    private void initialiseVars() {
        bLogin = (Button) findViewById(R.id.bLogin);
        teUsername = (EditText) findViewById(R.id.etUsername);
        tePassword = (EditText) findViewById(R.id.etPassword);
        chbRememberPass = (CheckBox) findViewById(R.id.chkRememberPass);
    }

    private void checkLoginDetails() {

        HttpPost httppost = new HttpPost(
                "mywebsite/login.php");
        // Add your data
        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(5);
        nameValuePairs.add(new BasicNameValuePair("username", "admin"));
        nameValuePairs.add(new BasicNameValuePair("password", "pass"));

        try {
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
            Log.d("myapp", "works till here. 2");
            try {
                ResponseHandler<String> responseHandler = new BasicResponseHandler();
                String responseBody = httpclient.execute(httppost, responseHandler);

                    Log.d("firstCon",responseBody);

            } catch (ClientProtocolException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }
        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        }

    }

    private void test0() {

        HttpGet httppost = new HttpGet(
                "https://mywebsite/userSettings.php");

        try {
            response = httpclient.execute(httppost);
            //String responseBody = EntityUtils.toString(response.getEntity());         
            try {
                Log.d("secondCon", test());

            } catch (Exception e) {
                // TODO Auto-generated catch block
                Log.d("seconderror", e.toString());
            }

        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

    }

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T14:44:32.910

与其创建一个新的`DefaultHttpClient`，不如重用它。您的 cookie 存储在 中`DefaultHttpCilent`，因此如果您继续重复使用同一个实例，您的 cookie 将自动为您处理。

# c# - 如何知道本地化中先前选择的语言？

> ID：10666112
> 
> 赞同：0
> 
> 时间：2012-05-19T14:37:32.250
> 
> 标签：c#, .net, wpf, localization

我有两种语言，英语和古吉拉特语的 UI。如果，在关闭 UI 时语言是古吉拉特语，那么在打开时语言也应该是古吉拉特语。我怎么知道这个：?? 语言选择的代码在这里。

```
ComboBoxItem englishLanguageItem = new ComboBoxItem()
        { 
            Content = Strings.MainWindow_Language_Selection_English_Label
        };

        ComboBoxItem gujaratiLanguageItem = new ComboBoxItem()
        {
            Content = Strings.MainWindow_Language_Selection_Gujarati_Label
        }; 
```

请提供一些有关它的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T15:45:12.233

不确定我是否理解您的问题。您需要知道最后选择的语言是什么，所以当您的程序重新打开时，它会使用该语言？

如果是这样，您必须将其保存在某个地方，也许是在注册表中。

在这里您可以查看如何操作：http: [//www.codeproject.com/Articles/3389/Read-write-and-delete-from-registry-with-C](http://www.codeproject.com/Articles/3389/Read-write-and-delete-from-registry-with-C)

# java - 在java中查找两个圆之间距离的最有效方法？

> ID：10666116
> 
> 赞同：15
> 
> 时间：2012-05-19T14:38:02.297
> 
> 标签：java, performance, math, trigonometry

所以显然计算平方根不是很有效，这让我想知道找出两个圆之间的距离（我在下面称为范围）的最佳方法是什么？

![查找两个圆之间的范围](../Images/20160ec05c714780464e588fc9a6b656.png)

所以通常我会解决：

```
a^2 + b^2 = c^2
dy^2 + dx^2 = h^2
dy^2 + dx^2 = (r1 + r2 + range)^2
(dy^2 + dx^2)^0.5 = r1 + r2 + range
range = (dy^2 + dx^2)^0.5 - r1 - r2 
```

当您只查找“范围”为 0 的碰撞情况时，尝试避免平方根可以正常工作：

```
 if ( (r1 + r2 + 0 )^2 > (dy^2 + dx^2) ) 
```

但是，如果我试图计算出距离，我最终会得到一些笨拙的方程式，例如：

```
 range(range + 2r1 + 2r2) = dy^2 + dx^2 - (r1^2 + r2^2 + 2r1r2) 
```

这不会去任何地方。至少我不知道如何从这里解决它的范围......

显而易见的答案是三角法，首先找到 theta：

```
 Tan(theta) = dy/dx
  theta = dy/dx * Tan^-1 
```

然后找到下位点 Sin(theta) = dy/h h = dy/Sin(theta)

最后计算出范围 range + r1 + r2 = dy/Sin(theta) range = dy/Sin(theta) - r1 - r2

这就是我所做的，并且有一个看起来像这样的方法：

```
private int findRangeToTarget(ShipEntity ship, CircularEntity target){

    //get the relevant locations
    double shipX = ship.getX();
    double shipY = ship.getY();
    double targetX =  target.getX();
    double targetY =  target.getY();
    int shipRadius = ship.getRadius();
    int targetRadius = target.getRadius();

    //get the difference in locations:
    double dX = shipX - targetX;
    double dY = shipY - targetY;

    // find angle 
    double theta = Math.atan(  ( dY / dX ) );

    // find length of line ship centre - target centre
    double hypotemuse = dY / Math.sin(theta);

    // finally range between ship/target is:
    int range = (int) (hypotemuse - shipRadius - targetRadius);

    return range;

} 
```

所以我的问题是，使用 tan 和 sin 是否比求平方根更有效？

我也许可以重构我的一些代码以从另一种方法（我必须解决它）中获取 theta 值，这值得吗？

还是完全有另一种方式？

如果我问的很明显，或者犯了任何基本错误，请原谅，我已经很久没有用高中数学做任何事情了......

欢迎任何提示或建议！

****编辑****

具体来说，我正在尝试在游戏中创建一个“扫描仪”设备，以检测敌人/障碍物何时接近/消失等。扫描仪将通过音频或图形条或其他东西传递此信息。因此，虽然我不需要确切的数字，但理想情况下我想知道：

1.  目标比以前更近/更远
2.  目标 A 比目标 B、C、D 更近/更远……
3.  一个（希望是线性的？）比率，表示目标与船的距离相对于 0（碰撞）和最大范围（某个常数）
4.  一些目标会非常大（行星？）所以我需要考虑半径

我希望有一些聪明的优化/近似可能（dx + dy +（更长的dx，dy？），但有所有这些要求，也许不是......

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-19T16:54:58.910

[`Math.hypot`](http://docs.oracle.com/javase/6/docs/api/java/lang/Math.html#hypot%28double,%20double%29)旨在获得更快、更准确的表格计算`sqrt(x^2 + y^2)`。所以这*应该*只是

```
return Math.hypot(x1 - x2, y1 - y2) - r1 - r2; 
```

我无法想象任何代码会比这更简单，也不会更快。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-19T14:46:06.573

如果您真的需要准确的距离，那么您将无法真正避免平方根。三角函数至少和平方根计算一样糟糕，如果不是更糟的话。

但是，如果您只需要*近似*距离，或者如果您只需要各种圆组合的*相对距离，那么您肯定可以做一些事情。*例如，如果您只需要相对距离，请注意平方数与其平方根具有相同的大于关系。如果您只是比较不同的配对，请跳过平方根步骤，您将得到相同的答案。

如果您只需要近似距离，那么您可能会认为它`h`大致等于较长的相邻边。这个近似值的偏差永远不会超过两倍。或者您可以为三角函数使用查找表——这比查找任意平方根的查找表更实用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T15:53:03.900

我厌倦了首先弄清楚当我们使用 tan、sine 时的答案是否与使用 sqrt 函数时相同。

```
public static void main(String[] args) throws Exception {
    // TODO Auto-generated method stub
     double shipX = 5;
        double shipY = 5;
        double targetX =  1;
        double targetY =  1;
        int shipRadius = 2;
        int targetRadius = 1;

        //get the difference in locations:
        double dX = shipX - targetX;
        double dY = shipY - targetY;

        // find angle 
        double theta = Math.toDegrees(Math.atan(  ( dY / dX ) ));

        // find length of line ship centre - target centre
        double hypotemuse = dY / Math.sin(theta);
        System.out.println(hypotemuse);
        // finally range between ship/target is:
        float range = (float) (hypotemuse - shipRadius - targetRadius);
        System.out.println(range);

        hypotemuse = Math.sqrt(Math.pow(dX,2) + Math.pow(dY,2));
        System.out.println(hypotemuse);
        range = (float) (hypotemuse - shipRadius - targetRadius);
        System.out.println(range);
} 
```

我得到的答案是：4.700885452542996

1.7008854

5.656854249492381

2.6568542

现在，与 sqrt 更正确的值之间似乎存在差异。

1.  谈论性能：考虑您的代码片段：

我计算了表演时间——结果如下：

```
 public static void main(String[] args) throws Exception {
    // TODO Auto-generated method stub
    long lStartTime = new Date().getTime(); //start time
    double shipX = 555;
        double shipY = 555;
        double targetX =  11;
        double targetY =  11;
        int shipRadius = 26;
        int targetRadius = 3;

        //get the difference in locations:
        double dX = shipX - targetX;
        double dY = shipY - targetY;

        // find angle 
        double theta = Math.toDegrees(Math.atan(  ( dY / dX ) ));

        // find length of line ship centre - target centre
        double hypotemuse = dY / Math.sin(theta);
        System.out.println(hypotemuse);
        // finally range between ship/target is:
        float range = (float) (hypotemuse - shipRadius - targetRadius);
        System.out.println(range);

        long lEndTime = new Date().getTime(); //end time

          long difference = lEndTime - lStartTime; //check different

          System.out.println("Elapsed milliseconds: " + difference);
} 
```

答案 - 639.3204215458475、610.32043、经过的毫秒数：2

当我们尝试使用 sqrt root one 时：

```
public static void main(String[] args) throws Exception {
    // TODO Auto-generated method stub
    long lStartTime = new Date().getTime(); //start time
    double shipX = 555;
        double shipY = 555;
        double targetX =  11;
        double targetY =  11;
        int shipRadius = 26;
        int targetRadius = 3;

        //get the difference in locations:
        double dX = shipX - targetX;
        double dY = shipY - targetY;

        // find angle 
        double theta = Math.toDegrees(Math.atan(  ( dY / dX ) ));

        // find length of line ship centre - target centre

       double hypotemuse = Math.sqrt(Math.pow(dX,2) + Math.pow(dY,2));
        System.out.println(hypotemuse);
        float range = (float) (hypotemuse - shipRadius - targetRadius);
        System.out.println(range);

        long lEndTime = new Date().getTime(); //end time

          long difference = lEndTime - lStartTime; //check different

          System.out.println("Elapsed milliseconds: " + difference);
} 
```

答案 - 769.3321779309637、740.33215、经过的毫秒数：1

现在，如果我们检查差异，两个答案之间的差异也很大。

因此我会说，如果你让游戏更准确，数据会更有趣，它对用户来说应该是更有趣的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-19T16:24:11.240

在“硬”几何软件中通常提出的问题`sqrt`不是它的性能，而是随之而来的精度损失。在您的情况下，`sqrt`非常符合要求。

如果您发现这`sqrt`确实会带来性能损失 - 您知道，仅在需要时进行优化 - 您可以尝试使用线性近似。

```
f(x) ~ f(X0) + f'(x0) * (x - x0)
sqrt(x) ~ sqrt(x0) + 1/(2*sqrt(x0)) * (x - x0) 
```

因此，您计算一个查找表 (LUT)`sqrt`并在给定`x`的情况下使用最近的`x0`. 当然，这限制了您可能的范围，当您应该回退到常规计算时。现在，一些代码。

```
class MyMath{
    private static double[] lut;
    private static final LUT_SIZE = 101;
    static {
        lut = new double[LUT_SIZE];
        for (int i=0; i < LUT_SIZE; i++){
            lut[i] = Math.sqrt(i);
        }
    }
    public static double sqrt(final double x){
        int i = Math.round(x);
        if (i < 0)
            throw new ArithmeticException("Invalid argument for sqrt: x < 0");
        else if (i >= LUT_SIZE)
            return Math.sqrt(x);
        else
            return lut[i] + 1.0/(2*lut[i]) * (x - i);
    }
} 
```

（我没有测试此代码，请原谅并纠正任何错误）

此外，在写完这一切之后，可能已经有一些近似的、高效的、替代的数学库了。您应该寻找它，但前提*是*您发现性能确实是必要的。

# url - Heroku + Node.js：如何使用带有变音符号的网址？

> ID：10666120
> 
> 赞同：1
> 
> 时间：2012-05-19T14:38:26.123
> 
> 标签：url, node.js, heroku

我有一个 Node.js 应用程序，它在一些 url 中使用了变音符号。当我在本地运行 node.js 时，一切正常。

现在我想将此应用程序部署到 Heroku。在本地运行 Heroku 的工头也可以正常工作，但是一旦我部署并尝试访问任何变音符号 URL，我就会收到“500 内部服务器错误”。

Heroku 在运行 Node.js 时是否支持 url 中的变音符号？如果是这样，知道我可能做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T02:57:27.993

要使用元音变音（或其他特殊字符），您需要对字符进行[“url-encode”或“percent encode”](https://en.wikipedia.org/wiki/Percent-encoding)，以便它们可以在 URL 中正确使用。在您的情况下，变音符号可以替换为代码`%d6`（参见[此图表](https://en.wikipedia.org/wiki/ISO/IEC_8859-1#Codepage_layout)），但您可能对 javascript 函数更感兴趣[`encodeURIComponent`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURIComponent)，它可以让您以编程方式对事物进行编码。另请参阅[此答案](https://stackoverflow.com/a/6554045/28037)。

# c# - 从 Sandcastle 生成的文档中隐藏从 Object 继承的方法？

> ID：10666123
> 
> 赞同：1
> 
> 时间：2012-05-19T14:38:57.653
> 
> 标签：c#, documentation, sandcastle

如何从 Sandcastle 生成的文档中隐藏从 Object 类（例如 Equals、Finalize、GetHashCode、GetType 等）继承的方法。我有一个名为 LicenseManager 的类，它有一个方法，对象继承的方法阻塞了显示。

我正在使用最新版本的 Sandcastle + Sandcastle 帮助文件生成器。

[http://cl.ly/3Y2p1C0m1a3f160z0y2v](http://cl.ly/3Y2p1C0m1a3f160z0y2v)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T14:44:17.393

在“Sandcastle Help File Builder”中找到了执行此操作的选项。

在可见性选项组中设置 (DocumentInheritedFrameworkMembers = false)。

# java - 在java中将String转换为double。更改打印双精度的格式

> ID：10666127
> 
> 赞同：1
> 
> 时间：2012-05-19T14:39:43.830
> 
> 标签：java, csv

我正在用 java 读取以下 CSV 文件和

```
1191196800.681 - !AIVDM,1,1,,,13aG?N0rh20E6sjN1J=9d4<00000,0*1D 
```

这是我读取此 CSV 文件并将 CSV 文件的第一列（字符串）转换为双精度的代码

```
public class ReadCSV {

public static void main(String[] args) {

    try {
        BufferedReader CSVFile = new BufferedReader(new FileReader(
                "C:\\example.txt"));

        try {
            String dataRow = CSVFile.readLine();

            while (dataRow != null) {
                String[] dataarray = dataRow.split("-");

                String temp = dataarray[0];

                double i = Double.parseDouble(temp);

                System.out.println(temp);
                System.out.println(i);
                dataRow = CSVFile.readLine();

            }

        } catch (IOException e) {
            e.printStackTrace();
        }
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    }

} 
```

}

当我执行代码时，我得到以下值

```
1191196800.681 
1.191196800681E9 
```

为什么变量“temp”和“i”的值不一样。我必须在代码中进行哪些更改才能获得以下值：

```
1191196800.681 
1191196800.681 
```

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-19T14:42:21.940

temp 和 i 完全相同，只是 double 值以科学计数法格式化。例如，如果您喜欢使用[DecimalFormat](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/DecimalFormat.html) ，您可以采用不同的格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T15:03:36.463

是的 vizier 是正确的，您需要做的是：

```
public static void main(String[] args) throws Exception {
    // TODO Auto-generated method stub
    String dataRow = "1191196800.681";

        String[] dataarray = dataRow.split("-");

        String temp = dataarray[0];
        DecimalFormat df = new DecimalFormat("#.###");
        double i = Double.parseDouble(temp);

        System.out.println(temp);
        System.out.println(df.format(i));

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T14:52:50.220

另一个结果是科学计数法，但相同。

如果你想改变你可以使用的表示`String.format("%.3f", i)`，它表示带有 3 位小数的数字

# php - Javascript 事件 - 将值发送到数据库

> ID：10666128
> 
> 赞同：1
> 
> 时间：2012-05-19T14:39:52.483
> 
> 标签：php, javascript, database

我无法将数据发送到数据库。正在发送这些值，但它们都将进入第一个放置区字段。我需要每个 dropzone 值进入数据库中的正确字段。

我尝试在 javascript 中添加不同的侦听器和 if 语句，但它对我不起作用。

的HTML：

```
<ul id="images">
<li><a id="img1" draggable="true"><img src="images/1.jpg"></a></li>
<li><a id="img2" draggable="true"><img src="images/2.jpg"></a></li>
<li><a id="img3" draggable="true"><img src="images/3.jpg"></a></li>
</ul>

//dropzones

<div class="drop_zones">
<div class="drop_zone" id="drop_zone1" droppable="true">
</div>

<div class="drop_zone" id="drop_zone2"  droppable="true">
</div>

<div class="drop_zone" id="drop_zone3" droppable="true">
</div>
</div>

   <button id = "post" onClick="postdb();">Post info</button> 
```

的JavaScript：

```
var addEvent = (function () {
    if (document.addEventListener) {
        return function (el, type, fn) {
            if (el && el.nodeName || el === window) {
                el.addEventListener(type, fn, false);
            } else if (el && el.length) {
                for (var i = 0; i < el.length; i++) {
                    addEvent(el[i], type, fn);
                }
            }
        };
    } else {
        return function (el, type, fn) {
            if (el && el.nodeName || el === window) {
                el.attachEvent('on' + type, function () {
                    return fn.call(el, window.event);
                });
            } else if (el && el.length) {
                for (var i = 0; i < el.length; i++) {
                    addEvent(el[i], type, fn);
                }
            }
        };
    }
})();

var dragItems;
updateDataTransfer();
var dropAreas = document.querySelectorAll('[droppable=true]');

function cancel(e) {
    if (e.preventDefault) {
        e.preventDefault();
    }
    return false;
}

function updateDataTransfer() {
    dragItems = document.querySelectorAll('[draggable=true]');
    for (var i = 0; i < dragItems.length; i++) {
        addEvent(dragItems[i], 'dragstart', function (event) {
            event.dataTransfer.setData('obj_id', this.id);
            return false;
        });
    }
}

addEvent(dropAreas, 'dragover', function (event) {
    if (event.preventDefault)
        event.preventDefault();

    this.style.borderColor = "#000";
    return false;
});

addEvent(dropAreas, 'dragleave', function (event) {
    if (event.preventDefault)
        event.preventDefault();

    this.style.borderColor = "#ccc";
    return false;
});

addEvent(dropAreas, 'dragenter', cancel);

// drop event handler
addEvent(dropAreas, 'drop', function (event) {
    if (event.preventDefault)
        event.preventDefault();

    // get dropped object
    var iObj = event.dataTransfer.getData('obj_id');
    var oldObj = document.getElementById(iObj);

    // get its image src
    var oldSrc = oldObj.childNodes[0].src;
    oldObj.className += 'hidden';

    var oldThis = this;

    setTimeout(function () {
        oldObj.parentNode.removeChild(oldObj); // remove object from DOM

        // add similar object in another place
        oldThis.innerHTML += '<a id="' + iObj + '" draggable="true"><img src="' + oldSrc + '" />      </a>';

        // and update event handlers
        updateDataTransfer();

function postdb(){

if (document.querySelectorAll('[droppable=true]')){

     var dropDetails = oldThis.id + '=' + iObj;

     $.post("a-2.php", dropDetails);
   }

        oldThis.style.borderColor = "#ccc";
    }, 500);

    return false;
}); 
```

和我的 php：

```
 $sql="INSERT INTO table_answers (drop_zone1, drop_zone2, drop_zone3) VALUES         ('$_POST[drop_zone1]','$_POST[drop_zone2]','$_POST[drop_zone3]')"; 
```

请问有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T15:05:49.423

```
var u = $('drop_zone1'); 
if(u){ 
  $.post("post.php", y); 
}; 
```

（我假设这是 jQuery。）

1.  `#`在选择器的开头添加: `$('#drop_zone1');`。

2.  jQuery 结果集总是评估为真值。我不清楚您要在这里验证什么条件...

3.  在 PHP 代码中，您在`$sql2`第一个中创建查询`if`，而不是`$sql`在其他两个中。

* * *

编辑 - 现在我们知道您在 setTimeout 中尝试做什么，这个简化的功能应该可以工作：

```
setTimeout(function() {
    oldObj.parentNode.removeChild(oldObj); // remove object from DOM

    // add similar object in another place
    oldThis.innerHTML += '<a id="' + iObj + '" draggable="true"><img src="' + oldSrc + '" />      </a>';

    // and update event handlers
    updateDataTransfer();
/*
    this part has been removed, see edit below
    var dropDetails = oldThis.id + '=' + iObj;
    // now dropDetails should look something like "drop_zone1=img1"

    $.post("post.php", dropDetails);
*/
    oldThis.style.borderColor = "#ccc";
}, 500); 
```

* * *

再进行一次编辑，一次提交所有删除的元素：

```
function postdb() {
  var postDetails = {};
  var dropZones = document.querySelectorAll('[droppable=true]');
  var allZonesDropped = true;
  for(var ix = 0; ix < dropZones.length; ++ix) {
    var zone = dropZones[ix];
    var dropped = zone.querySelector('[draggable=true]');
    if(dropped) {
      var dropTag = dropped.id;
      postDetails[zone.id] = dropTag;
    } else {
      allZonesDropped = false;
    }
  }
  if(allZonesDropped) {
    $.post("a-2.php", dropDetails);
  } else {
    alert('Not all targets have elements in them');
  }
  return false;
}); 
```

请注意放置此功能的位置 - 您编辑的问题在`setTimeout`通话中间有它，它肯定不会起作用。

* * *

关于您的 PHP 代码：您应该**真正**了解[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli)并使用准备好的语句，而不是盲目地将用户输入插入到查询中。如果你想学习，[这里有一个相当不错的 PDO 相关教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。

# c# - 从 Web 的 XML 文件中获取值

> ID：10666130
> 
> 赞同：2
> 
> 时间：2012-05-19T14:40:22.633
> 
> 标签：c#, xml, windows-phone-7, xml-parsing

从 web 的 xml 获取日出时间和日落时间。这是xml的链接：

[http://www.yr.no/sted/Norge/Oslo/Oslo/Blindern/varsel.xml](http://www.yr.no/sted/Norge/Oslo/Oslo/Blindern/varsel.xml)

我尝试使用以下信息： http: [//www.jeffblankenburg.com/2010/10/25/31-days-of-windows-phone-day-25-talking-to-external-apis/](http://www.jeffblankenburg.com/2010/10/25/31-days-of-windows-phone-day-25-talking-to-external-apis/)

我试图通过这样做将他的信息更改为我的信息，但只得到 NullReferenceException：

```
private void GoButton_Click(object sender, RoutedEventArgs e)
{
    if (NetworkInterface.GetIsNetworkAvailable())
    {
        WebClient twitter = new WebClient();

        twitter.DownloadStringCompleted += new DownloadStringCompletedEventHandler(twitter_DownloadStringCompleted);
        twitter.DownloadStringAsync(new Uri("http://www.yr.no/sted/Norge/Oslo/Oslo/Blindern/varsel.xml"));
    }
}

void twitter_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
{
    if (e.Error != null) return;

    XElement xmlTweets = XElement.Parse(e.Result);

    string name = xmlTweets.Element("weatherdata").Element("location").Element("country").Value;
    TwitterName.Text = name;

} 
```

这是来自网络的xml文件的剪辑。它很大，但我只需要日落时间和日出时间。请帮忙。

```
<weatherdata>
<location>
<name>Blindern</name>
<type>Byområde</type>
<country>Norge</country>
<timezone id="Europe/Oslo" utcoffsetMinutes="120"/>
<location altitude="90" latitude="59.9406284402542" longitude="10.7230684724138" geobase="ssr" geobaseid="73738"/>
</location>
<credit>...</credit>
<links>...</links>
<meta>...</meta>
<sun rise="2012-05-19T04:30:13" set="2012-05-19T21:58:34"/>
<forecast>...</forecast>
<observations>...</observations>
</weatherdata> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T14:48:21.823

该元素已经在`<weatherdata>`节点上，因此您无需再次查询它。

```
string name = xmlTweets.Element("location").Element("country").Value; 
TwitterName.Text = name; 
```

# iphone - 如何在地图视图上显示 NSMutableArray 结果

> ID：10666131
> 
> 赞同：0
> 
> 时间：2012-05-19T14:40:28.460
> 
> 标签：iphone, objective-c, ios, nsmutablearray, mkmapview

我正在尝试使用 获取位置`Google Places API`并将它们显示在`mapView`我有一个`NSMutableArray`名为 myList 的位置上。myList的`NSLog`输出是

```
Project[3151:15803] mylist array (
    "<ObjectInfo: 0x81aa040>",
    "<ObjectInfo: 0x81aa140>",
    "<ObjectInfo: 0x81aa170>",
    "<ObjectInfo: 0x81aa1a0>",
    "<ObjectInfo: 0x81aa1d0>",
    "<ObjectInfo: 0x81a9f20>",
    "<ObjectInfo: 0x81a9f50>",
    "<ObjectInfo: 0x81a9f80>",
    "<ObjectInfo: 0x81a9fb0>",
    "<ObjectInfo: 0x81aa260>",
    "<ObjectInfo: 0x81aa290>",
    "<ObjectInfo: 0x81aa2c0>",
    "<ObjectInfo: 0x81aa2f0>",
    "<ObjectInfo: 0x81aa320>",
    "<ObjectInfo: 0x81aa350>",
    "<ObjectInfo: 0x81aa380>",
    "<ObjectInfo: 0x81aa3b0>",
    "<ObjectInfo: 0x81aa450>",
    "<ObjectInfo: 0x81aa480>",
    "<ObjectInfo: 0x81aa4b0>" 
```

我正在尝试将其放置在地图上 `[self.mapView addAnnotations:myList];`

似乎我需要以某种方式访问​​坐标并以这种方式显示位置。我不确定。谢谢你的帮助。

这是我的代码：

```
- (CLLocationManager *)locationManager 
{
    if (locationManager != nil) 
    {
        return locationManager;
    }

    locationManager = [[CLLocationManager alloc] init];
    [locationManager setDesiredAccuracy:kCLLocationAccuracyNearestTenMeters];
    [locationManager setDelegate:self];

    return locationManager;

}

- (void)showAnnotation
{

    MKCoordinateRegion region;
    region.center = theCoordinate;
    MKCoordinateSpan span;
    span.latitudeDelta = 0.01;
    span.longitudeDelta = 0.01;
    region.span=span;
    [mapView setRegion:region animated:TRUE];

    DDAnnotation *annotation = [[[DDAnnotation alloc] initWithCoordinate:theCoordinate addressDictionary:nil] autorelease];

    NSLog(@"mylist array %@", myList);

    [self.mapView addAnnotations:myList];

}

- (void)viewDidLoad {
    [super viewDidLoad];

    locationManager = [[CLLocationManager alloc] init];
    locationManager.desiredAccuracy = kCLLocationAccuracyBest;
    locationManager.delegate = self;
    [locationManager startUpdatingLocation];

    UIActivityIndicatorView *activityIndicator = [[UIActivityIndicatorView alloc] initWithFrame:CGRectMake(0.0f, 0.0f, 32.0f, 32.0f)];
    [activityIndicator setCenter:CGPointMake(160.0f, 208.0f)];
    [activityIndicator setActivityIndicatorViewStyle:UIActivityIndicatorViewStyleWhiteLarge];
    activityIndicator.tag = INDICATOR_VIEW;
    [self.view addSubview:activityIndicator];
    [activityIndicator release];

    self.myTable = [[[UITableView alloc] initWithFrame:CGRectMake(0, 0, 320, 400) style:UITableViewStylePlain] autorelease];
    [self.myTable setDelegate:self];
    [self.myTable setDataSource:self];  
    [self.myTable setBackgroundColor:[UIColor clearColor]];
    [self.myTable setRowHeight:74];
    [self.myTable setSeparatorColor:[UIColor clearColor]];
    //[self.myTable setScrollEnabled:NO];

   // self.myTable.separatorStyle = UITableViewCellSeparatorStyleNone; // none style

    [self.view addSubview:self.myTable];

    if ([ProjUtil connectedToWeb]) {

        self.locationManager = [[[CLLocationManager alloc] init] autorelease];
        self.locationManager.delegate = self; // send loc updates to myself
        [self.locationManager startUpdatingLocation];

        //UIActivityIndicatorView *activityIndicator = (UIActivityIndicatorView *)[self.view viewWithTag:INDICATOR_VIEW];

        [activityIndicator startAnimating];
        [backBt setEnabled:NO];
        [myTable setUserInteractionEnabled:NO ];
    }   else {
        UIAlertView* alert = [[[UIAlertView alloc] initWithTitle:@"" message:@"Internet connection fails" delegate:nil cancelButtonTitle:@"Ok" otherButtonTitles:nil] autorelease];
        [alert show];
        return;
    }

}

// Listen to change in the userLocation
-(void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context 
{       
    MKCoordinateRegion region;
    region.center = self.mapView.userLocation.coordinate;  

    MKCoordinateSpan span; 
    span.latitudeDelta  = 0.05; // Change these values to change the zoom
    span.longitudeDelta = 0.05; 
    region.span = span;

    [self.mapView setRegion:region animated:YES];
}

- (UITableViewCell *)tableView:(UITableView *)tableView1 cellForRowAtIndexPath:(NSIndexPath *)indexPath{ 

    UILabel* nameLb;
    UILabel* detailsLb; 

    UITableViewCell *cell = [tableView1 dequeueReusableCellWithIdentifier:@"log-cell"]; 

    if (cell == nil) {

        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault 
                                       reuseIdentifier:@"log-cell"] autorelease];

        UIImage* img = [ImgUtil image:[NSString stringWithFormat:@"butList3_%d.png", [[SelectCategory instance] select] + 1 ]];
        UIImageView* bgImage = [[[UIImageView alloc] initWithImage:img ]autorelease];
        [cell addSubview:bgImage ];
        [cell sendSubviewToBack:bgImage ];

        nameLb = [[[UILabel alloc] initWithFrame:CGRectMake(40, 5, 250, 40)] autorelease];
        [nameLb setNumberOfLines:4];
        [nameLb setBackgroundColor:[UIColor clearColor]];
        [nameLb setTextColor:[UIColor whiteColor]];
        [nameLb setTag:NAME_TEXT];
        [nameLb setFont:[UIFont fontWithName:@"Helvetica-Bold" size:15]];
        [nameLb setMinimumFontSize:10];

        [cell addSubview:nameLb];

        detailsLb = [[[UILabel alloc] initWithFrame:CGRectMake(40, 45, 250, 20)] autorelease];
        [detailsLb setBackgroundColor:[UIColor clearColor]];
        [detailsLb setTextColor:[UIColor whiteColor]];
        [detailsLb setTag:DETAILS_TEXT];
        [detailsLb setFont:[UIFont fontWithName:@"Helvetica" size:12]];
        [cell addSubview:detailsLb];

    }else {

        nameLb = (UILabel*)[cell viewWithTag:NAME_TEXT];
        detailsLb = (UILabel*)[cell viewWithTag:DETAILS_TEXT];

    }

    ObjectInfo* obj = [myList objectAtIndex:indexPath.row ] ;
    nameLb.text = [obj name];

    double distance = [ProjUtil getDistanceWithLat1:currentLocation.latitude long1:currentLocation.longitude lat2:obj.location.latitude long2:obj.location.longitude];
    detailsLb.text = [NSString stringWithFormat:@"%.2f miles", [ProjUtil kmToMi:distance]];

    [cell setSelectionStyle:UITableViewCellSelectionStyleNone];
    [cell setBackgroundColor:[UIColor clearColor]];

    ///[cell setAccessoryType:UITableViewCellAccessoryDisclosureIndicator];
    return cell;

} 

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{ 

    MoreInfoCtrl* _ctrl = [MoreInfoCtrl make];
    _ctrl.object = [myList objectAtIndex:indexPath.row];
    [self.navigationController pushViewController:_ctrl animated:YES];

} 

-(void) findCodeWithCoord:(CLLocationCoordinate2D) _coord{
    //[[SelectCategory instance] getCategoryText]

    NSString* request = [NSString stringWithFormat:LINK,_coord.latitude , _coord.longitude , [[SelectCategory instance] getCategoryText]];
    //NSLog(@"%@", request);
    request = [request stringByAddingPercentEscapesUsingEncoding:NSASCIIStringEncoding];
    //NSLog(@"%@", request);
    NSObject* requestJSON = [ServerInfoResuest getServerInfoWithAddress:request];
    NSMutableDictionary* allInfo = (NSMutableDictionary* ) requestJSON;

    if ([[allInfo objectForKey:@"status"] isEqualToString:@"OK"]) {
        self.myList = [ObjectParse parserManager:[allInfo objectForKey:@"results"]]; 
//        NSLog(@"allinfo dict is %@", allInfo);

    }

    [myTable reloadData];
    UIActivityIndicatorView *activityIndicator = (UIActivityIndicatorView *)[self.view viewWithTag:INDICATOR_VIEW];

    [activityIndicator stopAnimating];

    [backBt setEnabled:YES];
    [myTable setUserInteractionEnabled:YES ];

}
- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation
{   
    //[self.delegate locationUpdate:newLocation];
    currentLocation = newLocation.coordinate;
    //  errorLabel.text = [newLocation description];
    [manager stopUpdatingLocation]; 
    [self findCodeWithCoord:currentLocation];

    [locationManager stopUpdatingLocation]; 
    theCoordinate.latitude = newLocation.coordinate.latitude;
    theCoordinate.longitude = newLocation.coordinate.longitude;
    [self showAnnotation];
}

- (MKAnnotationView *)mapView:(MKMapView *)theMapView viewForAnnotation:(id <MKAnnotation>)annotation{
    if ([annotation isKindOfClass:[MKUserLocation class]])
        return nil;

    AddressAnnotation* adr = (AddressAnnotation*) annotation;
    MKPinAnnotationView* pinView = (MKPinAnnotationView *)
    [mapView dequeueReusableAnnotationViewWithIdentifier:adr.placeTitle];
    if (!pinView)
    {
        MKPinAnnotationView* customPinView = [[[MKPinAnnotationView alloc]
                                               initWithAnnotation:annotation reuseIdentifier:adr.placeTitle] autorelease];
        //      customPinView.pinColor = MKPinAnnotationColorRed;
        customPinView.image = [UIImage imageNamed:[NSString stringWithFormat:@"wpin.png"]];

        AddressAnnotation* adr = (AddressAnnotation*) annotation;

        UIButton* rightButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
        [rightButton addTarget:self action:@selector(clDetails) forControlEvents:UIControlEventTouchUpInside];
        [rightButton setTitle:annotation.title forState:UIControlStateNormal];
        customPinView.rightCalloutAccessoryView = rightButton;

        customPinView.draggable = YES;
        customPinView.animatesDrop = NO;
        customPinView.canShowCallout = YES;

  forControlEvents:UIControlEventTouchUpInside];
        //  customPinView.rightCalloutAccessoryView = rightButton;

        return customPinView;
    }
    return nil; 
}

- (void)locationManager:(CLLocationManager *)manager
       didFailWithError:(NSError *)error
{

    UIActivityIndicatorView *activityIndicator = (UIActivityIndicatorView *)[self.view viewWithTag:INDICATOR_VIEW];
    [activityIndicator stopAnimating];
    [backBt setEnabled:YES];
    [myTable setUserInteractionEnabled:YES ];
    [locationManager stopUpdatingLocation];

}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T17:18:36.063

创建注释时，您应该给它一个包含纬度和经度的 CLLocationCoordinate2D。你当然会从你必须解析的 JSON 对象中得到它。下面的行绝对是正确的，这就是您所要做的，这将通过您的 myList 并将每个注释添加到地图视图中。确保您的注释包含经度和纬度（即坐标）

```
[self.mapView addAnnotations:myList]; 
```

检查下面的链接，很棒的教程。

[http://iphonebyradix.blogspot.com/2011/07/working-with-google-places-api.html](http://iphonebyradix.blogspot.com/2011/07/working-with-google-places-api.html)

# php - 根据同一页面上的 if 条件禁用/启用 php 中的表单值

> ID：10666134
> 
> 赞同：0
> 
> 时间：2012-05-19T14:40:58.337
> 
> 标签：php, javascript

在这里我想做的是基于if条件的值，应该禁用总表单，我该怎么做，这是我尝试过的代码....

```
if ($today1 >= $saturday && $today1 <= $season1)
    {
     document.getElementById('season').disabled = false;
    }
    else if($today1 >= $startdate_offseasona1 && $today1 <= $enddate_offseasona1 )
    {
    document.getElementById('season').disabled = true;
    }
    else if($today1 >= $startdate_seasona2 && $today1 <= $season2)
    {
    document.getElementById(seasons).disabled = false;
    } 
```

我的表格如下：

```
<form action="" method="POST" id="season" name="season">
Min_Custom_League_size<input type="text" name="min_custom_league_size" size="40"/><br/>
Max_Custom_League_size:<input type="text" name="max_custom_league_size" size="40"/><br/>
Ranked_League_size:<input type="text" name="ranked_league_size" size="40"/><br/>
Screen_Capacity:<input type="text" name="screen_capacity" size="40"/><br/>
Wide_Release_Screens:<input type="text" name="wide_release_screens" size="40"/><br/>
Limited_Release_Screens:<input type="text" name="limited_release_screens" size="40"/><br/>
Starting_Auction_Budget:<input type="text" name="starting_auction_budget" size="40"/><br/>
Weekly_Auction_Allowance:<input type="text" name="weekly_auction_allowance" size="40"/><br/>
Minimum_Auction_Bid:<input type="text" name="minimum_auction_bid" size="40"/><br/>
<input type="submit" value="submit" name="submit" />
</form> 
```

我如何根据 if 条件值执行此操作...我的代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T14:50:47.803

您正在混合 PHP（服务器端）和 JavaScript（客户端），但您不能这样做。无论如何，您必须禁用`<input>`元素，而不是表单本身。

以下是仅使用 PHP 的方法：

```
<?php
$disableForm = $today1 >= $startdate_offseasona1 && $today1 <= $enddate_offseasona1;
?>
<form action="" method="POST" id="season" name="season">
    Min_Custom_League_size<input type="text" <?php if($disableForm) echo 'disabled="disabled"'?> name="min_custom_league_size" size="40"/><br/>
<!-- repeat for all input elements -->
</form> 
```

这是一种无条件禁用输入的纯 JavaScript 方法：

```
<script>
window.onload = function() {
    var frm = document.getElementById('season');
    var inputs = frm.getElementsByTagName('input');
    for(var i=0; i<inputs.length; i++) {
        inputs[i].disabled = true;
    }
}
</script> 
```

注意：您的最后一个`else if`块中也有一个错字，应该是`disabled`，而不是`diabled`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T14:59:35.000

使用它来禁用表单中的所有元素。同样，您可以启用表单元素

```
var theform = document.getElementById('seasons');
for (i = 0; i < theform.length; i++) {
var formElement = theform.elements[i];
if (true) {
formElement.disabled = true;
}
} 
```

# java - 将 JS 数组从 Servlet 传递给 jQuery

> ID：10666139
> 
> 赞同：-1
> 
> 时间：2012-05-19T14:42:01.023
> 
> 标签：java, jquery, jsp, servlets

我在jsp中创建以下字符串响应

[[[1,2,3,4],[5,6,7,8]],[[9,10,11,12],[13,14,15,16]]]

并在 jquery 中获得此响应，

但我把它当作一维数组，我只需要这样的数组

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T14:45:00.550

使响应json编码，然后使用

```
var obj = jQuery.parseJSON(response); 
```

# jquery - 从页面顶部滑动导航菜单 - Jquery

> ID：10666148
> 
> 赞同：4
> 
> 时间：2012-05-19T14:43:09.343
> 
> 标签：jquery, menu, navigation, slideup

嗨，我是 jQuery 新手，我希望在一段时间后将导航菜单从页面顶部滑出。大约 3/4 秒的用户在页面上。我可能会在菜单滑出页面后添加一个箭头按钮来拉下菜单，但目前我只需要知道如何上下滑动它。我想我可能需要修改我的 CSS 才能使这项工作也有效。

任何提示的帮助将不胜感激。

有关更多详细信息，请参阅 jsFiddle：http: [//jsfiddle.net/headex/tJNXD/](http://jsfiddle.net/headex/tJNXD/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T14:55:16.397

我会这样做：

首先，我在这里使用 `$(nav)`选择器，但您可以先将其调整为您的代码。此外，您需要输入您的菜单：`position: relative;`或`position: absolute;`

***让它滑出：***

```
$(nav).animate({"top":$(nav).height() * -1},"slow"); 
```

***让它滑入：***

```
$(nav).animate({"top":0},"slow"); 
```

如果你想在 3 秒后弹出，我们开始：

```
function MenuOut()
{
     /* The sample code I put on top */
     $(nav).animate({"top":$(nav).height() * -1},"slow");
} 
```

然后你把它放在你的 Js 页面上：

```
/* This will run once the document is ready */
$(function()
{
    setTimeout("MenuOut",3000); /* 3000 represent 3000 milliseconds, so 3 seconds */
}); 
```

现在按钮：

```
function MenuIn()
{
    $(nav).animate({"top":0},"slow");
} 
```

然后你把它绑定到你的按钮上，如下所示：

```
$('#theButton').on(
{
    click: function()
    {   
        /* Hide the button, and then show up the menu */
        $(this).animate({"top":$(this).height() * -1},"slow",function()
        {
            /* I putted this in a callback function, so the 2 animations will be one after the other, not at the same time ! */
            MenuIn();
        });
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T15:15:56.297

首先，在您加载的 jsfiddle 链接中，您没有加载 jquery，而是加载了 Mootools。所以你想要使用的是 jQuery，对吗？

如果是这样，你可以使用这样的东西......

```
var timeout = null;

$('#masterNav').hover(function() {
    clearTimeout(timeout);
}, function() {
    timeout = setTimeout('$("#nav").slideUp(500)', 750);
}); 
```

# matlab - Matlab中的自协方差和交叉协方差函数不使用内置函数

> ID：10666151
> 
> 赞同：0
> 
> 时间：2012-05-19T14:43:48.823
> 
> 标签：matlab, covariance

`x`并且`y`是 1x100000 个向量。

![问题](../Images/c76a546a9372f67df65870a876ee8a6e.png)

我计算了 和 的均值和`x`方差`y`。当我想计算自协方差和互协方差函数时，由于我的循环，模拟可能持续 5 分钟。不允许使用`xcorr`, `xcov`, `mean`,`cov`等`var`。

请帮我。

提前致谢。

```
%%Mean of Vector x

Nx=length(x);
mx= sum(x)/Nx;

%%Mean of Vector y

Ny=length(y);
my=sum(y)/Ny;

%%Variance of x

varx=0;

for i=1:Nx
   varx=varx+(abs(x(i)-mx)^(2));
end
varx=varx/Nx;

%%Variance of y

vary=0;
for j=1:Ny 
   vary=vary+(abs(y(j)-my)^(2));
end
vary=vary/Ny;

%%Auto-Covariance function of x

for k=1:Nx  

Cxx(k)=0;

for i=1:(Nx-k+1)    
   Cxx(k)=Cxx(k)+(x(i+k-1)-mx)*conj((x(i)-my));  
end
end

%%Auto-Covariance function of y

for s=1:Ny  

Cyy(s)=0;

for j=1:(Ny-s+1)    
   Cyy(s)=Cyy(s)+(y(j+s-1)-my)*conj((y(j)-mx));  
end
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T15:42:01.237

使用以下事实`FFT(corr(x, y)) = FFT(x) * conj(FFTy))`：

```
corrxy = ifft(fft(x) .* conj(fft(y)));
corrxy = [corrxy(end - length(x) + 2:end); corrxy(1:length(x))]; 
```

要获得交叉协方差，只需将相关性乘以标准差：

```
covarxy = corrxy * sqrt(varx) * sqrt(vary); 
```

要获得自协方差，请计算`x`与自身之间的互协方差。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T15:41:40.570

重写这段代码：

```
%%Auto-Covariance function of x
for k=1:Nx  
    Cxx(k)=0;
    for i=1:(Nx-k+1)    
       Cxx(k)=Cxx(k)+(x(i+k-1)-mx)*conj((x(i)-my));  
    end
end 
```

以下代码取出内部 for 循环：

```
% x is a [Nx x 1] vector (lets say Nx = 50)
Cxx = zeros(Nx,1); % [Nx x 1] vector of zeros
for k = 1:Nx,
  a = (x(k:Nx)    -mx); % If k=3, then x(3:50) and a is [Nx-k+1 x 1]
  b = (x(1:Nx-k+1)-my); % If k=3, then x(1:48) and b is [Nx-k+1 x 1]
  Cxx(k) = a'*conj(b);  % Cxx(k) is always 1x1\. (*) is a matrix multiply
end 
```

由于`x`是一个非常大的向量，并且取出最后一个 for 循环`for k=1:Nx`的方法是制作一个 [Nx x Nx] 矩阵，我现在将把它留在上面的答案中。另外，如果您有[Parallel Computing Toolbox](http://www.mathworks.com/products/parallel-computing/)`parfor`中的功能，那么您可以将其并行化以使其运行得更快。

# python - 质数检查 Python

> ID：10666154
> 
> 赞同：3
> 
> 时间：2012-05-19T14:44:18.960
> 
> 标签：python, primes

我写了这个非常简单的素数检查：

```
prime = int(input())
if prime % prime == 0 and prime % 2 != 0 and prime % 3 != 0 or prime == 2 or prime == 3:
    print("true")
else:
    print("false") 
```

...这似乎以某种方式起作用，但我不确定它是否正确，有人可以确认吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-19T14:50:55.710

就这么简单：

```
def isprime(n):
    """check if integer n is a prime"""
    # range starts with 2 and only needs to go up the squareroot of n
    for x in xrange(2, int(n**0.5)+1):
        if n % x == 0:
            return False
    return True 
```

有关令人印象深刻的素数生成器，请参见[此处](https://stackoverflow.com/questions/567222/simple-prime-generator-in-pyt#)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-19T14:48:04.390

> 我不确定它是否正确

它不是。举一个反例，它认为这`25`是一个素数。更糟糕的是，这样的反例数不胜数。

[维基百科](http://en.wikipedia.org/wiki/Prime_number#Testing_primality_and_integer_factorization)值得阅读各种（正确的）方法来做到这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T14:52:19.350

Wikipedia 关于[素数](http://en.wikipedia.org/wiki/Primality)的文章可以帮助您设计更好的算法。它们有很多，但基本的并不那么复杂。

*   首先，抛开素数必须是大于 1 的正整数这一事实。这个不变量意味着如果 n < 2，您可以立即返回 false。在您的代码中， n=0 失败。
*   在一种天真的方法中，您可以检查 n 从 1 到 n 的所有除数。如果你只找到两个，那么你知道这是一个素数。
*   更直观的方法可能是得出每个数字都可以被 1 和自身整除的结论，因此，您只能检查 2 和 n-1 之间的除数。在你找到 n 的除数的那一刻，你可以得出 n 不是素数的结论。
*   一种改进的方法认识到所有偶数都可以被 2 整除，因此，如果 n 不能被 2 整除，那么从那里你只能检查奇数除数。
*   最后，您不需要检查直到 n 的所有除数。检查除数直到 n 的平方根就足够了。如果您在达到该阈值时还没有找到除数，那么您可以得出结论 n 是素数。

# python - 如何检查列表的所有元素是否符合条件？

> ID：10666163
> 
> 赞同：268
> 
> 时间：2012-05-19T14:45:37.220
> 
> 标签：python, list, for-loop, while-loop

我有一个包含 20000 个列表的列表。我使用每个列表的第三个元素作为标志。只要至少一个元素的标志为0，我就想在这个列表上做一些操作，就像：

```
my_list = [["a", "b", 0], ["c", "d", 0], ["e", "f", 0], .....] 
```

一开始，所有标志都是 0。我使用 while 循环检查是否至少一个元素的标志为 0：

```
def check(list_):
    for item in list_:
        if item[2] == 0:
            return True
    return False 
```

如果`check(my_list)`返回`True`，那么我将继续处理我的列表：

```
while check(my_list):
    for item in my_list:
        if condition:
            item[2] = 1
        else:
            do_sth() 
```

实际上，我想在迭代时删除 my_list 中的一个元素，但不允许在迭代时删除项目。

原始 my_list 没有标志：

```
my_list = [["a", "b"], ["c", "d"], ["e", "f"], .....] 
```

由于在迭代元素时无法删除元素，因此我发明了这些标志。但是`my_list`包含许多项目，并且`while`循环在每个循环中读取所有项目，并且`for`消耗大量时间！你有什么建议吗？

* * *

## 回答 #1

> 赞同：482
> 
> 时间：2012-05-19T15:04:53.403

这里最好的答案是使用[`all()`](http://docs.python.org/library/functions.html#all)，这是这种情况的内置函数。我们将其与[生成器表达式](https://www.youtube.com/watch?v=t85uBptTDYY)相结合，以干净有效地产生您想要的结果。例如：

```
>>> items = [[1, 2, 0], [1, 2, 0], [1, 2, 0]]
>>> all(flag == 0 for (_, _, flag) in items)
True
>>> items = [[1, 2, 0], [1, 2, 1], [1, 2, 0]]
>>> all(flag == 0 for (_, _, flag) in items)
False 
```

请注意，`all(flag == 0 for (_, _, flag) in items)`它直接等同于`all(item[2] == 0 for item in items)`，在这种情况下阅读起来会更好一些。

而且，对于过滤器示例，列表理解（当然，您可以在适当的情况下使用生成器表达式）：

```
>>> [x for x in items if x[2] == 0]
[[1, 2, 0], [1, 2, 0]] 
```

如果您想检查至少一个元素是否为 0，则更好的选择是使用[`any()`](http://docs.python.org/library/functions.html#any)更具可读性的选项：

```
>>> any(flag == 0 for (_, _, flag) in items)
True 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-05-19T14:55:19.923

如果要检查列表中的任何项目是否违反条件，请使用`all`：

```
if all([x[2] == 0 for x in lista]):
    # Will run if all elements in the list has x[2] = 0 (use not to invert if necessary) 
```

要删除所有不匹配的元素，请使用`filter`

```
# Will remove all elements where x[2] is 0
listb = filter(lambda x: x[2] != 0, listb) 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-19T14:54:07.593

您可以像这样使用 itertools 的 takewhile，一旦满足使您的语句失败的条件，它将停止。相反的方法是 dropwhile

```
for x in itertools.takewhile(lambda x: x[2] == 0, list)
    print x 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-08T09:56:55.003

这种方式比使用更灵活`all()`：

```
my_list = [[1, 2, 0], [1, 2, 0], [1, 2, 0]]
all_zeros = False if False in [x[2] == 0 for x in my_list] else True
any_zeros = True if True in [x[2] == 0 for x in my_list] else False 
```

或更简洁地说：

```
all_zeros = not False in [x[2] == 0 for x in my_list]
any_zeros = 0 in [x[2] for x in my_list] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-13T05:56:38.037

另一种使用方式`itertools.ifilter`。这检查真实性和过程（使用`lambda`）

样本-

```
for x in itertools.ifilter(lambda x: x[2] == 0, my_list):
    print x 
```

# omnet++ - 我如何在 omnet++ 中定义将使用其他参数定义的参数？

> ID：10666164
> 
> 赞同：0
> 
> 时间：2012-05-19T14:45:39.390
> 
> 标签：omnet++

这是我拥有的ini文件定义：

```
[General]
network = AQM
**.Nodes = 100  # Numer of Nodes
**.Qmax = 1000  # Buffer Size
**.Qref = 0.25*par("Qmax") 
```

我希望 Qref 是 Qmax 的 0.25。

我怎样才能实现它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T11:57:49.843

您可以命名变量并在之后使用它们：

```
[General]
network = AQM
**.Nodes = ${cnt=100} # Numer of Nodes
**.Qmax = 1000 # Buffer Size
**.Qref = 0.25*${cnt} 
```

这甚至适用于范围或列表：

```
**.var1 = ${i=0..1 step 0.2}
**.var2 = ${i} * 0.01 
```

# jquery - Jquery 事件触发错误。需要关闭吗？

> ID：10666165
> 
> 赞同：1
> 
> 时间：2012-05-19T14:45:46.090
> 
> 标签：jquery, closures, this, mouseenter, mouseleave

我的功能是触发第二个`mouseleave()`事件而不是第一个事件，导致`nth-child(1)`&`nth-child(2)`有一个 .css 属性，`bottom:99px`当我希望他们使用将`mouseleave()`属性设置为的第一个事件时`bottom:94px`

经过一些研究，我相当确定我需要关闭我的（this）语句，以便当我在第二轮参数中调用它时，它可以在新范围内工作..？

```
$(document).ready(function(){

    $('#rows').on('mouseenter', "div.row div:nth-child(1), div.row div:nth-child(2)",this , function() {
        $('img',this).stop().animate({"bottom":"0px"}, "fast"); 
    });

    $('div',this).off("mouseleave").on("mouseleave", function() {
        $('img',this).stop().animate({"bottom":"94px"}, "fast");    
    }); 

// need closure here? 

    $('#rows').on('mouseenter', "div.row div:nth-child(3), div.row div:nth-child(4)",this , function() {
        $('img',this).stop().animate({"bottom":"0px"}, "fast"); 
    });

    $('div',this).off("mouseleave").on("mouseleave", function() {
        $('img',this).stop().animate({"bottom":"99px"}, "fast");    
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T15:21:38.810

我猜你想要这个：

```
$('#rows').on('mouseenter', "div.row div:nth-child(1), div.row div:nth-child(2)", this , function() {
    $('img', this).stop().animate({"bottom":"0px"}, "fast");

    // when placed inside, the value of this makes more sense?
    $('div', this).off("mouseleave").on("mouseleave", function() {
        $('img',this).stop().animate({"bottom":"94px"}, "fast");    
    }); 
}); 
```

在您编写的此语句中， 的值`this`可能是`window`，因此`$('div', this)`将针对页面上的所有 div 。

```
$('div', this).off("mouseleave").on("mouseleave", function() {
    $('img',this).stop().animate({"bottom":"94px"}, "fast");    
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T15:47:22.050

我想也许以下是你需要的。这段代码未经测试，但它至少会给你要点：

```
$( document ).ready( function () {

  var rows, selector, listeners = {};

  rows = $( '#rows' );

  listeners.mouseenter = function () {

    $( 'img', this ).stop().animate( { "bottom" : "0px" }, "fast" );

  };

  listeners.mouseleave = function ( event ) {

    $( 'img', this ).stop().animate(

      { "bottom" : event.data.bottom + "px" }, "fast"

    );

  };

  selector = "div.row div:nth-child(1), div.row div:nth-child(2)";

  rows.on( 'mouseenter', selector, listeners.mouseenter );

  rows.off( 'mouseleave', selector );

  rows.on( 'mouseleave', selector, { bottom : 94 }, listeners.mouseleave );

  selector = "div.row div:nth-child(3), div.row div:nth-child(4)";

  rows.on( 'mouseenter', selector, listeners.mouseenter );

  rows.off( 'mouseleave', selector );

  rows.on( 'mouseleave', selector, { bottom : 99 }, listeners.mouseleave );

} ); 
```

在这种情况下，处理程序内部`this`将是与选择器匹配的元素（第 n 个子元素`div`）`div.row`。

# ipad - 加载没有 Segue 的视图表单 StoryBoard

> ID：10666168
> 
> 赞同：11
> 
> 时间：2012-05-19T14:46:07.543
> 
> 标签：ipad, ios5, uistoryboard

我真的很喜欢在 Storyboard 中布置我的所有视图，但有时我会根据由代码生成的按钮显示视图，因此不会有 Segue 参考 - 它会完全断开连接故事板。不过，我仍然想在情节提要中设计它，这样我就可以很好地概览我的所有屏幕。

加载 UIViewControler 时，我是否可以加载情节提要中设计的 XIB（或情节提要中的任何内容）？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-20T01:39:45.383

我在我的项目中这样做：

```
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
UIViewController *myController = [storyboard instantiateViewControllerWithIdentifier:@"MyViewController"];
[self.navigationController pushViewController: myController animated:YES]; 
```

只需确保您已正确设置控制器的标识符即可。您可以通过以下方式做到这一点：

1.  在 Storyboard 中选择控制器
2.  在实用程序面板中，单击属性检查器。无论您决定在 Identifier 字段中添加什么，都将在“instantiateViewControllerWithIdentifier”语句中进行。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-08-28T15:08:32.857

您必须将**Storyboard ID**分配给您的视图控制器。

*IB > 显示身份检查器 > 身份 > 故事板 ID*

[![故事板 ID](../Images/f90b1f02a3b2f652c80345304093b317.png)](https://i.stack.imgur.com/2ga56.png)

# 迅速

```
let storyboard = UIStoryboard(name: "Main", bundle: nil)
let viewcontroller = storyboard.instantiateViewControllerWithIdentifier("viewController")
                     as? UIViewController
if let navigationController = self.navigationController {
    navigationController.pushViewController(viewcontroller!, animated: true)
} 
```

# objective-c - 加载 Dropbox 路径时出错

> ID：10666170
> 
> 赞同：0
> 
> 时间：2012-05-19T14:46:33.207
> 
> 标签：objective-c, xcode, dropbox

我必须从 Dropbox 的某些文件夹中加载文档。这是错误：

```
DropboxSDK: error making request to /1/files/sandbox/lets/newFile.json - File not found 
```

但文件夹是他们的，甚至是文件！

如果我改为搜索：

```
/sandbox/newFile.json 
```

（我什至在沙盒文件夹中复制了 newFile.json）。在沙盒文件夹中加载其他文件夹似乎有错误。我该如何解决错误？

这是我下载文档的方式：

```
 [self.restClient loadFile:filename2 intoPath:getImagePath2]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T18:35:44.440

我发现生成此错误是因为该应用程序设置为仅文件夹访问。如果要访问所有文件夹，则必须具有完整的保管箱访问权限

# c++ - 我可以在 C++ 中创建一个强类型整数吗？

> ID：10666171
> 
> 赞同：6
> 
> 时间：2012-05-19T14:46:42.080
> 
> 标签：c++, visual-studio-2010, visual-c++, c++11

我想要在 Visual Studio 2010 中编译的 C++ 中的强类型整数。

我需要这种类型在某些模板中充当整数。特别是我需要能够：

```
StrongInt x0(1);                  //construct it.
auto x1 = new StrongInt[100000];  //construct it without initialization
auto x2 = new StrongInt[10]();    //construct it with initialization 
```

我见过这样的事情：

```
class StrongInt
{ 
    int value;
public: 
    explicit StrongInt(int v) : value(v) {} 
    operator int () const { return value; } 
}; 
```

或者

```
class StrongInt
{ 
    int value;
public: 
    StrongInt() : value(0) {} //fails 'construct it without initialization
    //StrongInt() {} //fails 'construct it with initialization
    explicit StrongInt(int v) : value(v) {} 
    operator int () const { return value; } 
}; 
```

由于这些东西不是 POD，所以它们不太有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T18:06:08.110

当我想要一个强类型整数时，我只使用枚举类型。

```
enum StrongInt { _min = 0, _max = INT_MAX };

StrongInt x0 = StrongInt(1);
int i = x0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T15:09:15.913

```
StrongInt x0(1); 
```

> 由于这些东西不是 POD，所以它们不太有效。

这两件事是不兼容的：你不能同时拥有构造函数语法和 POD。对于 POD，您需要使用例如`StrongInt x0 { 1 };`or `StrongInt x0 = { 1 };`，甚至`StrongInt x0({ 1 });`（这是一个非常迂回的复制初始化）。

# android - 仅为 TextView 复合可绘制对象实现 onClick

> ID：10666174
> 
> 赞同：28
> 
> 时间：2012-05-19T14:47:20.603
> 
> 标签：android, android-layout, onclick, textview

我需要在左侧有一些带有可绘制的文本，并且我想在用户单击/触摸图像时执行一些代码（只有图像，而不是文本），所以我使用了带有*TextView*和*ImageView*的*LinearLayout*可点击并启动 onClick 事件。XML 解析器建议我用带有*复合 drawable的**TextView*替换它，这将用更少的*XML*行绘制相同的东西。我的问题是“我可以指定我只想在 drawable 上处理 onClick 事件*TextView*而不是*TextView*本身？我见过一些解决方案，其中涉及编写自己的*TextView扩展*********，但如果可能的话，我只对能够在布局资源中执行此操作感兴趣，否则我将保留以下*XML*代码：********

 **```
<LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:orientation="horizontal" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="bottom"
            android:paddingTop="10dp"
            android:paddingLeft="10dp"
            android:paddingRight="10dp"
            android:text="@string/home_feedback_title"
            android:textColor="@android:color/primary_text_dark"
            android:textStyle="bold" 
            android:paddingBottom="4dp"/>

        <ImageView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/action_feedback" 
            android:clickable="true"
            android:onClick="onClickFeedback"
            android:contentDescription="@string/action_feedback_description"/>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2015-03-23T15:23:44.870

它非常简单。假设您在 TextView 'txtview' 的左侧有一个可绘制对象。以下将解决问题。

```
TextView txtview = (TextView) findViewById(R.id.txtview);
txtview.setOnTouchListener(new OnTouchListener() {
    @Override
    public boolean onTouch(View v, MotionEvent event) {
        if(event.getAction() == MotionEvent.ACTION_UP) {
            if(event.getRawX() <= txtview.getTotalPaddingLeft()) {
                // your action for drawable click event

             return true;
            }
        }
        return true;
    }
}); 
```

如果您想要正确的drawable，请将if语句更改为：

```
if(event.getRawX() >= txtview.getRight() - txtview.getTotalPaddingRight()) 
```

同样，您可以对所有复合可绘制对象执行此操作。

```
txtview.getTotalPaddingTop();
txtview.getTotalPaddingBottom(); 
```

此方法调用返回该侧的所有填充，包括任何可绘制对象。您甚至可以将它用于 TextView、Button 等。

单击[此处](http://developer.android.com/reference/android/widget/TextView.html#getTotalPaddingBottom())以获取来自 android 开发者网站的参考。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-19T17:24:35.547

你可以去任何一种方式。使用复合可绘制对象更快，因为它旨在进行优化。它使用更少的内存，因为您将 3 个视图减少为 1 个，并且布局更快，因为您失去了 1 个深度。

如果我是你，我会考虑退后一步，看看文本和图像是否都拦截了触摸以执行任何操作可能是一件好事。一般来说，触摸区域越大，越容易按压。一些用户实际上可能倾向于触摸文本而不是图像。

最后，如果您采用合并 2 的路线，您可能需要考虑使用 a`Button`而不是 a `TextView`。您可以设置按钮的样式，使其周围没有矩形。他们称之为无边框按钮。这很好，因为您会获得视觉反馈，即您单击了一个可操作的项目，而该项目通常是不可操作的`ImageView`。`TextView`

[如何在 Android 中创建无边框按钮](https://stackoverflow.com/questions/9167900/how-to-create-borderless-buttons-in-android)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-11-27T03:32:14.960

@Vishnuvathsan 的答案几乎是完美的，但`getRaw()`返回了触摸点的绝对 x 位置。如果 textview 不在视图的左边缘，则应使用 . 与 textview 的绝对位置进行比较`getLocationOnScreen`。下面的代码是一个检查左侧可绘制点击和右侧可绘制点击的示例。

```
textView.setOnTouchListener(new OnTouchListener() {
    @Override
    public boolean onTouch(View v, MotionEvent event) {
        if (event.getAction() == MotionEvent.ACTION_UP) {
            int[] textLocation = new int[2];
            textView.getLocationOnScreen(textLocation);

            if (event.getRawX() <=  textLocation[0] + textView.getTotalPaddingLeft()) {

                // Left drawable was tapped

                return true;
            }

            if (event.getRawX() >= textLocation[0] + textView.getWidth() - textView.getTotalPaddingRight()){

                // Right drawable was tapped

                return true;
            }
        }
        return true;
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-04T12:57:00.203

```
final int DRAWABLE_LEFT = 0;
final int DRAWABLE_TOP = 1;
final int DRAWABLE_RIGHT = 2;
final int DRAWABLE_DOWN = 3; 
```

这个点击监听器正在进入触摸监听器

```
 if (event.getAction() == MotionEvent.ACTION_DOWN) 
if (event.getAction() == MotionEvent.ACTION_DOWN) {
            if (event.getX() >= (tvFollow.getTop() - tvFollow.getCompoundDrawables()[DRAWABLE_TOP].getBounds().width())) {
                   // your action here
                return true; } } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-16T19:32:34.090

由于 getRaw() 和 getRight() 都返回整个屏幕坐标，因此如果您的视图不在屏幕的左边缘，这将不起作用。无论布局位置如何，以下解决方案都可以在任何地方使用。这是用于右侧可绘制触摸。

```
 textView.setOnTouchListener(OnTouchListener { _, event ->
                if (event.action == MotionEvent.ACTION_UP)
                {
                    if (event.x >= textView.width - textView.totalPaddingEnd)
                    {
                        <!---DO YOUR ACTIONS HERE--->
                        return@OnTouchListener true
                    }
                }
                true
            }) 
```

PS：科特林代码**

# jquery - 合并两个 JQuery 动画

> ID：10666175
> 
> 赞同：1
> 
> 时间：2012-05-19T14:47:26.513
> 
> 标签：jquery, jquery-ui

我正在`JQuery`制作动画，希望能得到社区的帮助。

## 客观的

我正在尝试创建地球的动画。地球开始从**左边**出现，然后开始**反弹**。在弹跳的同时，它也**向前****向右**移动。当它到达页面的**中心**时，它会停止。之后下一个动画开始。在下一个动画中，地球开始**旋转**。

## 我尝试了什么？

**我有两个动画作为一个单元**正常工作，但我无法将它们合并为一个单元。我完成了弹跳部分，但是当地球弹跳时，应该隐藏旋转效果，并且应该在弹跳效果结束后开始。

我尝试使用`hide()`延迟功能来做到这一点，但我无法让它工作。我将非常感谢您的帮助。 [这](http://apptec.net/5.html)是我到目前为止所实施的。

请帮我隐藏旋转动画**，直到**反弹结束。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T16:34:32.390

```
<script type="text/javascript">
 $zombie = $('img#flickr');
          function runit(){
            $("#main_content").hide();
            $zombie
             .animate({ opacity: 1 },"fast")

             .animate({top:'500px',left:'100px'}, {duration:500})
             .animate({top:'0px', left:'180px'}, {duration:600})
             .animate({top:'400px', left:'180px'}, {duration:700})
             .animate({top:'0px', left:'260px'}, {duration:800})
             .animate({top:'300px', left:'320px'}, {duration:900})
             .animate({top:'50px', left:'360px'}, {duration:1000})
             .animate({top:'200px', left:'420px'}, {duration:1100})
             .animate({top:'80px', left:'460px'}, {duration:1200})
             .animate({top:'150px', left:'480px'}, {duration:1200})          
             .animate({top:'104px', left:'495px'}, 1300,function(){
                   $("#main_content").show();
                });
          }
        runit()
</script> 
```

# emacs - 下划线作为词的一部分，表示前向词不起作用

> ID：10666178
> 
> 赞同：13
> 
> 时间：2012-05-19T14:47:36.440
> 
> 标签：emacs, emacs23, nxhtml

我试图让下划线被视为[此处](https://stackoverflow.com/questions/1545851/how-to-make-forward-word-backward-word-treat-underscore-as-part-of-a-word)和[此处](https://stackoverflow.com/questions/1545851/how-to-make-forward-word-backward-word-treat-underscore-as-part-of-a-word)`forward/backward-word`描述的函数的单词的一部分。我特别想让它在模式下工作，但真的希望它在所有模式下都能像这样工作。`nxhtml`

我`site-start.el`用多种不同的方式修改了我的文件，但无济于事。但是如果我在缓冲区中手动执行命令`M-x modify-syntax-table`，它就可以正常工作。我只是不能让它成为默认行为。

这是我尝试放入`site-start.el`文件的内容：

```
;; 1
;; thought  this would apply it to all modes - no error, but did not work
(modify-syntax-entry ?_ "w") 

;; 2
;; thought this would automatically set it on a mode change - no error, but did not work
(defun change-major-mode-hook ()
(modify-syntax-entry ?_ "w"))

;; 3
;; thought  this would apply it to all modes - no error, but did not work
(modify-syntax-entry ?_ "w")

;; 4
;; this produced a symbol's value as variable is void error
(modify-syntax-entry ?_ "w" nxhtml-mode-syntax-table) 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-19T14:52:13.007

你试过`nxhtml-mode-hook`直接修改吗？像这样：

```
(add-hook 'nxhtml-mode-hook
          (lambda () (modify-syntax-entry ?_ "w"))) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-19T15:05:51.577

Trey 回答了您非常具体的问题。

但是 Emacs 已经有一个级别的字符组织，可以满足你的要求：sexp。如果您学习了 sexp 命令而不是*破坏*单词命令，那么您可以根据情况通过“单词”或“符号”删除。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-20T02:18:08.550

作为 event_jr，我建议您学习使用基于 sexp 的命令，例如`C-M-f`和`C-M-b`。但是，如果您真的只想跳过标识符（并忽略括号之类的内容），那么与其尝试更改所有主要模式下的所有语法表（最终可能会产生无法预料的后果），我建议您只需使用新的基于符号的运动命令。例如`(global-set-key [remap forward-word] 'forward-symbol)`。对于某些命令（如`kill-word`），您需要`kill-symbol`自己编写，但应该很容易做到。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-04-29T18:39:53.130

您可以修改标准语法表，而不是像 Trey Jackson 建议的那样为每个主要模式添加挂钩。不同的模式继承自标准语法表，因此您的修改有望适用于所有模式：

```
(modify-syntax-entry ?_ "w" (standard-syntax-table)) 
```

这将影响常规文本、XML、Python 等。

有些模式比较顽固，修改标准语法表不会影响它们，因为它们在初始化期间会覆盖一些符号。一个例子是`cc-mode`。您仍然必须明确修改他们的表。

# jquery - 如何通过单击外部隐藏弹出窗口

> ID：10666179
> 
> 赞同：4
> 
> 时间：2012-05-19T14:47:41.703
> 
> 标签：jquery

我试图想出一种方法，以便一旦#email-popup 或#phone-popup 可见，如果用户单击可见弹出窗口以外的任何位置，那么它将隐藏弹出窗口。

我在下面的代码中隐藏弹出窗口的方法效果不佳......

到目前为止我的 JQuery

```
$(".email").click(function(){
    $("#email-popup").show("fast");
});
$(".phone").click(function(){
   $("#phone-popup").show();
});

$(document).click(function() {
     $("#email-popup").hide("fast");                        
     $("#phone-popup").hide("fast");
}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-19T14:50:15.533

你已经接近了——当用户在弹出窗口中点击时停止传播：

```
$("#email-popup, #phone-popup").on("click", function(e){
  e.stopPropagation();
});

$(".email").on("click", function(e){
  e.stopPropagation();
  $("#email-popup").show("fast");
});

$(".phone").on("click", function(e){
  e.stopPropagation();
  $("#phone-popup").show();
}); 
```

此外，您在文档单击中有一些重复的代码。您将电子邮件弹出窗口隐藏了两次。

```
$(document).on("click", function() {
  $("#email-popup, #phone-popup").hide("fast");
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T14:51:24.747

您可以检查单击的元素的 ID（不适用于元素的子元素）：

```
$(".email").click(function(e){
    e.stopPropagation();
    $("#email-popup").show("fast");
});
$(".phone").click(function(e){
    e.stopPropagation();
    $("#phone-popup").show("fast");
});

$(document).click(function(e) {
     if (!(e.target.id === 'email-popup' || e.target.id === 'phone-popup')) {
         $("#email-popup, #phone-popup").hide("fast");                        
     }
}); 
```

[**示范**](http://jsfiddle.net/u6ECV/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T14:57:29.797

效果不好怎么办？会发生什么？顺便说一句，您在处理程序中隐藏`#email-popup`了两次。`click`

# ms-access - 在哪里可以编辑在 Access 2007 中定义的现有查询？

> ID：10666184
> 
> 赞同：1
> 
> 时间：2012-05-19T14:48:29.577
> 
> 标签：ms-access, ms-access-2007

我必须对 Access 2007 应用程序进行一些维护。我以前从未真正使用过它，所以我正在努力找出隐藏的东西。此应用程序分为两个 ACCDB - 一个用于应用程序，一个用于数据。在应用程序内部，我试图追踪各种查询的定义位置，但运气不佳。

我查看了数据 ACCDB 并从侧边栏选择了“查询”类别。查询不存在。在应用程序 ACCDB 的 Visual Basic 编辑器中，它们也不会出现在“Microsoft Office 访问类对象”中。

如果我单击“创建”，然后单击“查询设计”，它似乎会打开一个设计器，我可以在其中选择这些查询。但是，我似乎仍然无法弄清楚如何实际编辑现有的（这是我真正想做的）。

我到底在哪里可以编辑它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T16:32:38.433

在左侧的侧边栏上，您可以选择不同的类别`Tables`，例如`Queries`等；但是，查询也可以存储在of 和`RecordSource`of`Forms`控件中。例如，有一个财产。查询可以存储为 VBA 代码或宏中的 SQL 字符串，甚至可以使用 VBA 动态创建。`Reports``RowSource``ListBox``ComboBox``RowSource`

# javascript - 使用 jQuery 不检查隐藏的 td:s

> ID：10666188
> 
> 赞同：1
> 
> 时间：2012-05-19T14:49:05.773
> 
> 标签：javascript, jquery

我正在使用下面的代码来检查所有复选框，但问题是有时复选框有一个`<td>`带有 style="display:none;"的父级 css 属性，不应检查。

如何修改下面的代码以忽略不可见的复选框？

```
// Check / uncheck all checkboxes
$('.check_all').click(function() {
    $(this).parents('form').find('input:checkbox').attr('checked', $(this).is(':checked'));
});` 
```

（`<td>`:s 不可见的原因是由于 quicksearch.js）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-19T14:51:26.283

使用**[:visible](http://api.jquery.com/visible-selector/)**选择器：

```
$(this).parents('form').find('input:checkbox:visible').attr('checked', $(this).is(':checked')); 
```

# asp.net - 身份栏

> ID：10666189
> 
> 赞同：0
> 
> 时间：2012-05-19T14:49:27.990
> 
> 标签：asp.net, sql, stored-procedures

存储过程

```
CREATE PROCEDURE [dbo].[Insert_Customer]
@id int,
@FName  varchar(50) ,
@MName  varchar(50) ,
@LName  varchar(50) ,
@Age    int ,
@Citizen varchar(50),
@Gender varchar(50) ,
@DOB    varchar(50) ,
@Status varchar(50) ,
@Nationality    varchar(50) ,

@Country    varchar(50) ,
@State  varchar(50) ,
@City   varchar(50) ,
@Address    varchar(MAX)    ,
@Pin    varchar(50) ,
@AccNo int IDENTITY (100,1),
@Branch varchar(50) ,

@IDProof    varchar(50) ,
@IDNo   varchar(50) ,
@IDName varchar(50) ,
@DOI    varchar(50) ,
@Date datetime
AS
BEGIN

Insert into tbl_Customer1   
values(@id,@FName,@MName,@LName,@Age,@Citizen,@Gender,@DOB,@Status,@Nationality)

Insert into tbl_Customer2 
values(@id,@Country,@State,@City,@Address,@Pin,@accno ,@Branch)

Insert into tbl_Customer3 
values(@id,@IDProof,@IDNo,@IDName,@DOI,@Date)

END 
```

这里的错误是

> 消息 156，级别 15，状态 1，过程 Insert_Customer，第 28 行
> 关键字“IDENTITY”附近的语法不正确。
> 消息 137，级别 15，状态 2，过程 Insert_Customer，第 42 行
> 必须声明标量变量“@accno”。
> 消息 137，级别 15，状态 2，过程 Insert_Customer，第 44 行
> 必须声明标量变量“@IDProof”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T14:58:26.627

您不能声明 INT IDENTITY 变量/参数。如果特定列定义为 IDENTITY 列，则不必添加它的值插入语句。如果您不指定列值，则会自动设置标识号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T15:00:36.037

```
@AccNo int IDENTITY (100,1), 
```

您不能将参数设置为身份。为什么你首先需要它？

这应该只在你的桌子上。

您能解释一下为什么需要它以便我们为您提供帮助吗？

# haskell - Haskell 索引离线文档

> ID：10666191
> 
> 赞同：1
> 
> 时间：2012-05-19T14:49:44.223
> 
> 标签：haskell, documentation, offline

我正在为 Dash ( [http://kapeli.com/dash](http://kapeli.com/dash) ) 生成 Haskell 文档集。

我正在尝试对 http://www.haskell.org/ghc/docs/7.0-latest/html/libraries/index.html 上的文档进行索引[，并且在](http://www.haskell.org/ghc/docs/7.0-latest/html/libraries/index.html)[http://www](http://www.haskell.org/ghc/docs/7.0-latest/html/libraries/doc-index-All.html)似乎有一个完整的索引[.haskell.org/ghc/docs/7.0-latest/html/libraries/doc-index-All.html](http://www.haskell.org/ghc/docs/7.0-latest/html/libraries/doc-index-All.html)。

但是，似乎有很多库（我发现了一些库、base、ghc 和 haskell2010），它们复制了相同的功能（据我所知）。

我应该索引哪些库？您希望在 Haskell 文档浏览器中找到什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T16:46:58.077

您应该交叉引用`base`. 诸如此类的其他库`haskell2010`仅用于针对旧版本的语言提供稳定的标准。`ghc`只是一个开发人员库，我不希望你成为目标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T23:21:42.100

我认为这里有两个不同的问题。

# 要索引哪些模块？

好吧，如果您设法索引整个[hackage](http://hackage.haskell.org)并让您的系统方便地使用这么多功能，那将是很酷且非常有用的。

否则，您可以限制自己使用[Haskell Platform](http://lambda.haskell.org/platform/doc/current/index.html)中的包。

# 功能重复

在 Haskell 模块中，可以重新导出在其他模块中定义的实体（函数、类型）。这并不特定于 base vs haskell2012。

我不知道您在文档浏览器中提供了什么界面，但您可以显示找到该实体的所有模块。这就是 Hoogle 所做的：[http](http://www.haskell.org/hoogle/?hoogle=Int) ://www.haskell.org/hoogle/?hoogle=Int （参见那里的第一个条目）。

# nhibernate - Nhibernate queryover order by random

> ID：10666195
> 
> 赞同：4
> 
> 时间：2012-05-19T14:50:41.290
> 
> 标签：nhibernate

我正在尝试编写一个返回随机排序结果的查询。我发现这篇文章[Linq Orderby random ThreadSafe for use in ASP.NET](https://stackoverflow.com/questions/3339192/linq-orderby-random)这给了我一些如何做到这一点的基本线索。但我得到以下异常：

从范围“”引用的“Accomodations.DAL.Model.Generated.Accomodation”类型的变量“x”，但未定义

这是我的查询：

```
 var query = session.QueryOver<Accomodation>()
                                   .OrderBy(x => (~(x.Id & seed)) & (x.Id | seed)).Asc; // this is the problematic line of code                    

                if (searchParams.District != 0)
                    query = query.Where(x => x.District.Id == searchParams.District);

                if (searchParams.Region != 0)
                    query = query.Where(x => x.Region.Id == searchParams.Region);

                if (searchParams.Location != 0)
                    query = query.Where(x => x.Location.Id == searchParams.Location);

                var futureCount = query.Clone().Select(Projections.RowCount()).FutureValue<int>();

                SearchAccomodationResultItem resultItemAlias = null;

                var futurePage = query                        
                    .SelectList(list => list
                        .Select(x => x.Id).WithAlias(() => resultItemAlias.Id)
                        .Select(x => x.AccomodationType.Id).WithAlias(() => resultItemAlias.AccomodationTypeId)
                        .Select(x => x.Region.Id).WithAlias(() => resultItemAlias.RegionId)
                        .Select(x => x.Name).WithAlias(() => resultItemAlias.Title)
                        .Select(x => x.MaxCapacity).WithAlias(() => resultItemAlias.MaxCapacity)
                        .Select(x => x.MinPrice).WithAlias(() => resultItemAlias.MinPrice)
                        .Select(x => x.MinStayLength).WithAlias(() => resultItemAlias.MinStayLength)
                        .Select(x => x.MainImageName).WithAlias(() => resultItemAlias.ImgSrc)                           
                        )                        
                    .TransformUsing(Transformers.AliasToBean<SearchAccomodationResultItem>())                        
                    .Skip(skip)                        
                    .Take(searchParams.PageSize)
                    .Future<SearchAccomodationResultItem>();

                searchResults = futurePage.ToList();
                numberOfResults = futureCount.Value;                    
            }); 
```

任何建议将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T14:57:23.853

这是如何做到这一点的一个很好的例子。这是我目前正在使用的一种技术。

[http://puredotnetcoder.blogspot.com/2011/09/nhibernate-queryover-and-newid-or-rand.html](http://puredotnetcoder.blogspot.com/2011/09/nhibernate-queryover-and-newid-or-rand.html)

## 编辑

下面是从上面的文章中摘录的，我对它进行了一些修改以包括在内`Skip`。

```
public IList<CmsTestimonial> GetRandomTestimonials(int count, int skip) {  
  return Session  
    .QueryOver<CmsTestimonial>()  
    .OrderByRandom()
    .Take(count)  
    .Skip(skip)
    .List();  
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T12:49:57.260

要将上述方法与分页一起使用，您可以存储用户的种子（可能基于每个会话），然后在 SQL 中使用 RAND(seed) 函数 - 因为您使用相同的种子，它将生成相同的序列伪随机数，因此允许分页

# python - 使用 Django 1.4 在调试中提供静态文件非常令人沮丧

> ID：10666197
> 
> 赞同：1
> 
> 时间：2012-05-19T14:50:50.440
> 
> 标签：python, django, static-files

我喜欢 Django，但是在开发中获取静态文件是非常痛苦的。我已经安装了网络资产以使工作更轻松。基本上，我的资产在我当前的配置下是 404，但管理资产很好（？！）。我的项目布局是这样的；

```
myapp/
    common/
        static/
            bootstrap/
                img/
                less/
                js/
        templates/
        __init__.py
        assets.py
        urls.py
        models.py
        views.py
    projects/
        templates/
        static/
        __init__.py
        assets.py
        urls.py
        models.py
        views.py
    public/ <- (static files collected here)
settings.py 
```

在我的设置中，我配置了以下值

```
__DIR__ = os.path.abspath(os.path.dirname(__file__))
MEDIA_ROOT = os.path.join(__DIR__, 'media')
MEDIA_URL = '/media/'
STATIC_ROOT = os.path.join(__DIR__, 'public')
STATIC_URL = '/static/' 
```

我的网址是这样配置的；

```
urlpatterns = patterns('',
    url(r'^projects/', include('myapp.projects.urls')),
    url(r'^admin/', include(admin.site.urls)),
    url(r'^$', include('myapp.common.urls')),
)

urlpatterns += staticfiles_urlpatterns() 
```

同样，assets.py 看起来很标准；

```
from django_assets import register, Bundle

js = Bundle(
    'bootstrap/js/bootstrap-alert.js',
    'bootstrap/js/bootstrap-button.js',
    'bootstrap/js/bootstrap-carousel.js',
    'bootstrap/js/bootstrap-collapse.js',
    'bootstrap/js/bootstrap-modal.js',
    'bootstrap/js/bootstrap-popover.js',
    'bootstrap/js/bootstrap-scrollspy.js',
    'bootstrap/js/bootstrap-tab.js',
    'bootstrap/js/bootstrap-tooltip.js',
    'bootstrap/js/bootstrap-transition.js',
    'bootstrap/js/bootstrap-typeahead.js',
    output='bootstrap/script.js',
    debug=False
)

register('js', js) 
```

我的基本模板非常基础；

```
{% load assets %}
{% assets 'js' %}
    <script type="text/javascript" src="{{ ASSET_URL }}"></script>
{% endassets %} 
```

因此，当 runserver 运行时，所有 js 文件都被捆绑到 1 个标签中，并带有以下 url `http://localhost:8000/static/bootstrap/script.js?ed501ad2`。但是这个 404 的消息“找不到'bootstrap/script.js'”。

但是，如果我登录 /admin 应用程序，那么所有 css 资产都会正确呈现。我已经运行了 collectstatic 并验证了资产确实存在于`public/`目录中。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T15:01:53.680

您是否根据 django-assets 文件的要求添加`django_assets.finders.AssetsFinder`了您的内容？`STATICFILES_FINDERS`

[http://elsdoerfer.name/docs/webassets/django/index.html](http://elsdoerfer.name/docs/webassets/django/index.html)

# html - 将变量从 HTML 传递到 ActionScript

> ID：10666201
> 
> 赞同：0
> 
> 时间：2012-05-19T14:50:56.487
> 
> 标签：html, actionscript-3

我正在尝试将变量从我的网页发送到 Flash 对象。但它不起作用。

这是我在网页内调用动画的方式：

```
<object type="application/x-shockwave-flash" data="/flash/Reintegrate.swf" width="1150" height="800" value="idu=Salut"></object> 
```

这是我在 AS3 中的代码，LblTst 什么也没显示：

```
var userid:String = loaderInfo.parameters.idu;
LblTst.text = userid; 
```

任何想法 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T14:56:02.997

`<object>`在标签之间添加：

```
...><param name="flashvars" value="idu=Salut"/></object> 
```

# c++ - 使用 perl 或 C++ 运行程序

> ID：10666209
> 
> 赞同：3
> 
> 时间：2012-05-19T14:52:10.860
> 
> 标签：c++, perl, fork

我正在寻找一种对 C++ 程序进行评分的方法。

我希望能够执行许多具有标准输入/输出路径的程序，因此每个程序都需要在适当的时间输出和输入信息。

做这个的最好方式是什么？我看到有人说编写一个调用 fork() 的 C++ 程序，但我的问题是如何与相同的输入和输出屏幕交互？（换句话说，一旦你分叉了那个进程，你能提供那个进程的输入并查看它的输出吗？） perl 脚本会更好吗？

如果是这样，您能否给我几行 perl 脚本以及它的外观。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T16:05:13.737

您应该使用 Posix popen 或 open3 打开程序并与它的标准输入和标准输出交互。你应该可以用任何语言做到这一点；我个人会使用 Ruby 和 rspec 进行评分。

[http://pubs.opengroup.org/onlinepubs/009604499/functions/popen.html](http://pubs.opengroup.org/onlinepubs/009604499/functions/popen.html)

确保以具有受限权限的用户身份运行学生的代码并使用 chroot 监狱！

# javascript - 骨干一次性ajax请求

> ID：10666216
> 
> 赞同：0
> 
> 时间：2012-05-19T14:53:27.110
> 
> 标签：javascript, backbone.js

我有一个使用 Rails 后端制作的简单列表样式的 Backbone 应用程序。

我有一个收藏：

```
var ItemList = Backbone.Collection.extend({
  model: Item,

  initialize: function(id) {
    this.id = id;
  },

  url: function(){
    return '/lists/' + this.id + '/items';
  },

}); 
```

所有标准的 CRUD 操作都可以在模型中正常工作。但我有一条“额外”路线——“清除”，它将在一次演出中清除列表中的所有项目。路线将是：

```
/lists/[:id]/clear 
```

因为这超出了正常的 CRUD 操作，有没有办法将它连接到正常的 Collection 中，或者我是否做一些单独的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T16:03:24.043

您可以添加自己的方法来执行`/lists/:id/clear`，然后[`reset`](http://documentcloud.github.com/backbone/#Collection-reset)在完成时对集合执行：

```
clear: function() {
    var _this = this;
    $.ajax({
        url: '/lists/' + this.id + '/clear',
        //...
        success: function() {
            _this.reset();
        }
    });
} 
```

当您`reset`不带任何参数调用时，它会从集合中删除所有模型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T16:08:06.013

您可以在您的集合上调用一个方法`destroy`，在其中您可以采用几种方法之一来发出 AJAX 请求（为了与 Backbone 协调）。请注意，您可能不想调用您的集合方法`clear`，因为 Backbone 模型已经有一个`clear`具有不同语义的方法。

1.  创建一个`Backbone.Model`具有正确 URL 和 ID 的一次性实例，然后在其上调用“destroy”
2.  使用“delete”方法调用 Backbone.sync，并使用仅具有“url”属性和具有正确 ID 的空“toJSON”函数的一次性模型对象
3.  进行直接的 jQuery`$.ajax`调用。

# c# - 如何将流写入隔离存储中的 xml 文件

> ID：10666224
> 
> 赞同：1
> 
> 时间：2012-05-19T14:54:24.007
> 
> 标签：c#, windows-phone-7, stream, isolatedstorage, onedrive

我正在尝试在我的应用程序中实施 SkyDrive 备份。一切正常，除了我不知道如何轻松地将流（使用从 SkyDrive 下载的备份）保存到独立存储中。

我知道我可以对流进行去序列化而不是保存它，但这会不必要地复杂化。

所以，这是我的问题：

我有一个来自 SkyDrive 的文件的流，我需要将它作为文件“Settings.XML”保存到独立存储中。

所以基本上我需要将“流”写入隔离存储中的 Settings.xml 文件

```
 static void client_DownloadCompleted(object sender, LiveDownloadCompletedEventArgs e, string saveToPath)
    {
        Stream stream = e.Result; //Need to write this into IS

        try
        {
            using (IsolatedStorageFile myIsolatedStorage = IsolatedStorageFile.GetUserStoreForApplication())
            {
                using (IsolatedStorageFileStream fileStream = myIsolatedStorage.OpenFile(saveToPath, FileMode.Create))
                {
                    //How to save it?

                }
            }
        }... 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T15:01:13.510

使用 Steam 的 CopyTo() 方法 - [http://msdn.microsoft.com/en-us/library/dd782932.aspx](http://msdn.microsoft.com/en-us/library/dd782932.aspx)

```
using (IsolatedStorageFileStream fileStream = myIsolatedStorage.OpenFile(saveToPath, FileMode.Create))    
{    
  stream.CopyTo(fileStream);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T15:15:46.823

最快和最简单的做法是将字节逐块从一个流复制到下一个流 - 请参阅[如何将一个流的内容复制到另一个流中的已接受答案？](https://stackoverflow.com/questions/230128/best-way-to-copy-between-two-stream-instances-c-sharp)

* * *

但是，如果网络流有可能损坏或包含无效数据，那么在保存之前反序列化流并进行验证可能是值得的。

# php - 在php中获取调整大小图像的宽度和高度

> ID：10666226
> 
> 赞同：0
> 
> 时间：2012-05-19T14:54:33.163
> 
> 标签：php, image, resize

我有一个图片上传器，可以创建多种尺寸的上传图片：

```
// Variables
$alpha = $_GET['a'];
$method = $_GET['m'];
$extension = $_GET['e'];

// Configuration
$methods = array
(
'original'  =>  true,
'icon'      =>  array(48, 48),
'small'     =>  array(110, 80),
'medium'    =>  array(360, 0),
'square'    =>  array(186, 186)
); 
```

这是图像的输出：

```
// Output
public function output($method)
{
    echo '<img src="'.WEB.$method.'/'.$this->alpha().'.'.$this->extension.'" width="" height="" alt="'.stripslashes($this->title).'" title="'.stripslashes($this->title).'"/>';
} 
```

我想填充图像的宽度和高度，使用 $methods 数组，我试过这个：

```
$r_width = $methods[$method][0];
$r_height = $methods[$method][1];

(...)  width="'.$this->r_width.'" height="'.$this->r_height.'"  (...) 
```

但它不显示任何东西。怎么了 ？

如果有帮助，这里是 resizer.php ( [http://pastebin.com/gpP4mWSL](http://pastebin.com/gpP4mWSL) ) 和图像类 ( [http://pastebin.com/etJARPeY](http://pastebin.com/etJARPeY) )

编辑：在查看页面上，这是我显示图像的方式：

```
<a href="<?php echo WEB.$image->alpha(); ?>/"><?php $image->output('small'); ?></a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T14:58:36.367

检查是否可以使用此函数获取图像的高度和宽度[getimagesize](http://php.net/manual/en/function.getimagesize.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T14:59:21.333

您是否像必须设置的那样设置图像类参数 r_width 和 r_height ？

你应该在你的代码中有这样的东西：

```
<?php
$image = new Image();
(...)
$image->r_width = $r_width;
$image->r_height = $r_height;
(...)
$image->output($method);
?> 
```

# recursion - 累加器、conj 和递归

> ID：10666228
> 
> 赞同：13
> 
> 时间：2012-05-19T14:54:49.873
> 
> 标签：recursion, clojure, accumulator, cons

我已经从 4clojure.com 解决了 45 个问题，并且在尝试使用递归和累加器解决一些问题的过程中发现了一个反复出现的问题。

我将尽我所能解释我正在做的最好的事情，以最终得到令人毛骨悚然的解决方案，希望一些 Clojurers 会“得到”我没有得到的东西。

例如，问题 34 要求编写一个以两个整数作为参数的函数（不使用*range*）并创建一个范围（不使用 range ）。简单地说，你做 (... 1 7) 你得到 (1 2 3 4 5 6)。

现在这个问题不是关于解决这个特定问题。

如果我*想*使用递归和累加器解决这个问题怎么办？

我的思考过程是这样的：

*   我需要编写一个带有两个参数的函数，我从*(fn [xy] )开始*

*   我需要递归，我需要跟踪一个列表，我将使用一个累加器，所以我在第一个函数中编写了第二个函数，并接受一个额外的参数：

    (fn [xy]
    ((fn g [xy acc] ...) x y '())

*（显然我无法在 SO 上正确格式化 Clojure 代码！？）*

在这里我已经不确定我做对了：第一个函数*必须*正好有两个整数参数（不是我的调用），我不确定：如果我想使用累加器，我可以使用累加器而不创建嵌套函数？

然后我想*conj*，但我不能这样做：

```
(conj 0 1) 
```

所以我做了一些奇怪的事情来确保我首先有一个序列，我最终得到了这个：

```
(fn
   [x y]
   ((fn g [x y acc] (if (= x y) y (conj (conj acc (g (inc x) y acc)) x)))
    x
    y
    '())) 
```

但是这会产生这个：

```
(1 (2 (3 4))) 
```

而不是这个：

```
(1 2 3 4) 
```

所以我最终做了一个额外的*展平*，它可以工作，但它非常难看。

我开始理解一些事情，在某些情况下，我什至开始以一种更流行的方式“思考”，但我在编写解决方案时遇到了问题。

例如在这里我决定：

*   使用蓄能器
*   通过递增*x*直到达到*y来递归*

但我最终得到了上面的怪物。

有*很多*方法可以解决这个问题，再一次，这不是我所追求的。

我所追求的是，​​在我决定 cons/conj、使用累加器和递归之后，我可以得到这个（不是我写的）：

```
#(loop [i %1
        acc nil]
  (if (<= %2 i)
    (reverse acc)
    (recur (inc i) (cons i acc)))) 
```

而不是这个：

```
((fn
  f
  [x y]
  (flatten
   ((fn
     g
     [x y acc]
     (if (= x y) acc (conj (conj acc (g (inc x) y acc)) x)))
    x
    y
    '())))
 1
 4) 
```

我认为这是能够解决一些问题的开始，但我对我倾向于产生的丑陋解决方案有点失望......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-19T17:19:17.350

我认为这里有几件事要学习。

**首先**，一种通用规则-递归函数通常具有自然顺序，而添加累加器则相反。你可以看到，因为当一个“正常”（*没有*累加器）递归函数运行时，它会做一些工作来计算一个值，然后递归生成列表的尾部，最后以一个空列表结束。相比之下，使用累加器时，您从空列表开始并在前面添加东西 - 它*在另一个方向*增长。

所以通常，当你添加一个累加器时，你会得到一个相反的顺序。

现在通常这无关紧要。例如，如果您生成的不是一个序列，而是一个重复应用*交换*运算符（如加法或乘法）的值。那么无论哪种方式，您都会得到相同的答案。

但在你的情况下，这很重要。您将向后获取列表：

```
(defn my-range-0 [lo hi] ; normal recursive solution
  (if (= lo hi)
    nil
    (cons lo (my-range-0 (inc lo) hi))))

(deftest test-my-range-1
  (is (= '(0 1 2) (my-range-0 0 3))))

(defn my-range-1 ; with an accumulator
  ([lo hi] (my-range-1 lo hi nil))
  ([lo hi acc]
    (if (= lo hi)
      acc
      (recur (inc lo) hi (cons lo acc)))))

(deftest test-my-range-1
  (is (= '(2 1 0) (my-range-1 0 3)))) ; oops!  backwards! 
```

通常，您可以做的最好的解决方法就是在最后反转该列表。

但这里有另一种选择——我们实际上可以倒着做。而不是*增加*下限，您可以*减少*上限：

```
(defn my-range-2
  ([lo hi] (my-range-2 lo hi nil))
  ([lo hi acc]
    (if (= lo hi)
      acc
      (let [hi (dec hi)]
        (recur lo hi (cons hi acc))))))

(deftest test-my-range-2
  (is (= '(0 1 2) (my-range-2 0 3)))) ; back to the original order 
```

[注意-下面还有另一种反转方式；我没有很好地构建我的论点]

**其次**，正如您在`my-range-1`和中看到的那样`my-range-2`，使用累加器编写函数的一种好方法是作为具有两组不同参数的函数。这为您提供了一个非常干净（恕我直言）的实现，而无需嵌套函数。

* * *

你还有一些关于序列的更一般`conj`的问题，等等。这里的clojure有点乱，但也很有用。上面我一直在用基于缺点的列表给出一个非常传统的观点。但 clojure 鼓励您使用其他序列。与 cons 列表不同，向量向右而不是向左增长。所以*另*一种扭转该结果的方法是使用向量：

```
(defn my-range-3 ; this looks like my-range-1
  ([lo hi] (my-range-3 lo hi []))
  ([lo hi acc]
    (if (= lo hi)
      acc
      (recur (inc lo) hi (conj acc lo)))))

(deftest test-my-range-3 ; except that it works right!
  (is (= [0 1 2] (my-range-3 0 3)))) 
```

这里`conj`是添加到右边。我没用`conj`in `my-range-1`，所以这里重写一下更清楚：

```
(defn my-range-4 ; my-range-1 written using conj instead of cons
  ([lo hi] (my-range-4 lo hi nil))
  ([lo hi acc]
    (if (= lo hi)
      acc
      (recur (inc lo) hi (conj acc lo)))))

(deftest test-my-range-4
  (is (= '(2 1 0) (my-range-4 0 3)))) 
```

请注意，这段代码看起来*非常*相似，`my-range-3`但结果是向后的，因为我们从一个空列表开始，而不是一个空向量。在这两种情况下，都`conj`在“自然”位置添加新元素。对于右侧的向量，但对于左侧的列表。

我突然想到你可能并不真正理解什么是列表。基本上 a`cons`创建一个包含两个东西（它的参数）的盒子。第一个是内容，第二个是列表的其余部分。所以列表`(1 2 3)`基本上是`(cons 1 (cons 2 (cons 3 nil)))`。相比之下，向量`[1 2 3]`更像一个数组（尽管我认为它是使用树实现的）。

所以`conj`有点令人困惑，因为它的工作方式取决于第一个参数。对于列表，它会调用`cons`并在左侧添加内容。但是对于向量，它将数组（类似事物）扩展到右侧。另外，请注意，`conj`将现有序列作为第一个参数，将要添加的东西作为第二个参数，而`cons`反过来（要添加的东西首先出现）。

* * *

以上所有代码可在[https://github.com/andrewcooke/clojure-lab获得](https://github.com/andrewcooke/clojure-lab)

* * *

update: i rewrote the tests so that the expected result is a quoted list in the cases where the code generates a list. `=` will compare lists and vectors and return true if the content is the same, but making it explicit shows more clearly what you're actually getting in each case. note that `'(0 1 2)` with a `'` in front is just like `(list 0 1 2)` - the `'` stops the list from being evaluated (without it, `0` would be treated as a command).

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-19T15:07:56.750

阅读完所有内容后，我仍然不确定您为什么需要蓄能器。

```
((fn r [a b]
    (if (<= a b) 
       (cons a (r (inc a) b)))) 
  2 4)
=> (2 3 4) 
```

似乎是一个非常直观的递归解决方案。我在“真实”代码中唯一要改变的是使用惰性序列，这样你就不会在大范围内用完堆栈。

**我是如何得到那个解决方案的：**

当你考虑使用递归时，我发现尝试用你能想到的尽可能少的术语来陈述问题，并尝试将尽可能多的“工作”交给递归本身是有帮助的。

特别是，如果您怀疑可以删除一个或多个参数/变量，这通常是要走的路——至少如果您希望代码易于理解和调试；有时您最终会为了提高执行速度或减少内存使用而牺牲简单性。

在这种情况下，我开始写的时候的想法是：“函数的第一个参数也是范围的开始元素，最后一个参数是最后一个元素”。递归思维是你必须训练自己去做的事情，但一个相当明显的解决方案是说：一个*范围* `[a, b]`是一个以元素开头的序列，`a` *后跟*一个*范围*。`[a + 1, b]`所以范围确实可以递归地描述。我写的代码几乎是这个想法的直接实现。

**附录：**

我发现在编写函数式代码时，最好避免使用累加器（和索引）。有些问题需要它们，但如果你能找到摆脱它们的方法，那么你通常会做得更好。

**附录2：**

关于递归函数和列表/序列，编写此类代码时*最*有用的思考方式是用“列表的第一项（头）”和“列表的其余部分（尾）”来说明您的问题.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-19T16:36:41.537

如果我使用累加器解决了这个问题，我会这样做：

```
user=> (defn my-range [lb up c]
         (if (= lb up)
           c
           (recur (inc lb) up (conj c lb))))
#'user/my-range 
```

然后调用它

```
#(my-range % %2 []) 
```

当然，我会使用`letfn`或其他东西来解决没有`defn`可用的问题。

所以是的，你确实需要一个内部函数来使用累加器方法。

我的思考过程是，一旦完成，我想要返回的答案将在累加器中。（这与您的解决方案形成鲜明对比，您在找到结束条件方面做了很多工作。）所以我寻找我的结束条件，如果我已经达到它，我会返回累加器。否则，我将下一个项目附加到累加器上，并在较小的情况下重复出现。所以只有两件事要弄清楚，结束条件是什么，以及我想把什么放在累加器中。

使用向量有很大帮助，因为`conj`它会附加到它上面，并且不需要使用`reverse`.

[顺便说一句，我也在使用 4clojure](http://www.4clojure.com/user/nhughes)。我最近很忙，所以我落后了。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-19T17:11:22.940

我无法添加您已经收到的已经很好的答案，但我会回答一般。在学习 Clojure 的过程中，您可能会发现使用 Clojure 内置函数可以解决许多但并非所有解决方案，例如 map 以及根据序列考虑问题。这并不意味着您不应该递归地解决问题，但是您会听到——我相信这是明智的建议——Clojure 递归是用于解决您无法以其他方式解决的非常低级的问题。

我碰巧做了很多 .csv 文件处理，最近收到一条评论说 nth 创建依赖项。确实如此，并且使用地图可以让我通过名称而不是位置来比较元素。

我不会在已经投入生产的两个小型应用程序中丢弃使用 nth 和 clojure-csv 解析数据的代码。但下一次我会以更有序的方式思考问题。

很难从谈论向量和 nth、loop .. recur 等的书籍中学习，然后意识到学习 Clojure 会让你从那里成长。

我发现学习 Clojure 的好处之一是社区相互尊重且乐于助人。毕竟，他们正在帮助那些在 CDC Cyber​​ 上使用打孔卡学习的第一门语言是 Fortran IV，而他的第一门商业编程语言是 PL/I 的人。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-19T16:48:36.770

看起来您的问题更多是关于“如何学习”，而不是技术/代码问题。你最终会编写那种代码，因为无论你从什么方式或来源学习一般的编程或具体的 Clojure，都会在你的大脑中创建一条“神经高速公路”，让你以这种特定的方式思考解决方案，然后你最终会编写代码像这样。基本上，每当您遇到任何问题（在这种特殊情况下是递归和/或累积）时，您最终都会使用那个“神经高速公路”并且总是想出那种代码。

摆脱这条“神经高速公路”的解决方案是暂时停止编写代码，远离那个键盘，开始阅读大量现有的 clojure 代码（从 4clojure 问题的现有解决方案到 github 上的开源项目）并思考深入了解（甚至阅读一个函数 2-3 次才能真正让它在你的大脑中安定下来）。这样一来，您最终会破坏现有的“神经高速公路”（生成您现在编写的代码），并创建一条新的“神经高速公路”，以生成漂亮且惯用的 Clojure 代码。另外，尽量不要一看到问题就跳到输入代码，而是给自己一些时间来清晰而深入地思考问题和解决方案。

# python - 如何解决 Python TypeError：“模块”对象不可调用？

> ID：10666233
> 
> 赞同：1
> 
> 时间：2012-05-19T14:55:25.347
> 
> 标签：python, import, module, callable

我正在尝试编写一组 Python 类，这些类将查询数据库以检索一些值，然后构造一个网络图。问题是每当我尝试为我的一个类调用构造函数时都会收到此错误相关代码如下

```
class NetworkConstructor:  
def __init__(self):
    self.nodes=dict()
    self.queryservice=QueryService()
    self.graph=networkx.Graph() 
```

QueryService 类的相关位是

```
def __init__(self):
    self.connect()

def connect(self):
    self.conn=MySQLdb.Connect(host="xxx", port=3306,user="xxx",passwd="xxx",db="xxx")
    self.cursor=self.conn.cursor() 
```

我也导入了所有必需的库

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T14:58:34.923

看起来您的 QueryService 类位于同名模块中。尝试

```
self.queryservice=QueryService.QueryService() 
```

# magento - 如何用新的替换 Magento 的 Varien 库？

> ID：10666234
> 
> 赞同：-1
> 
> 时间：2012-05-19T14:55:39.870
> 
> 标签：magento

我想下载并用新的 varien library 替换整个“Lib_Varien”或“varien library”。我该怎么做？或从哪里可以下载 Magento 版本的 Varien 库？更换是否会造成任何干扰..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T23:44:12.483

它被称为升级。你去一个新版本的 Magento。像这样对 Varien 库进行模块化更改的事情太多了。

# c# - 我应该如何保持 2 ConcurrentDictionaries 同步？

> ID：10666237
> 
> 赞同：0
> 
> 时间：2012-05-19T14:56:07.013
> 
> 标签：c#, multithreading, locking, task-parallel-library, concurrentdictionary

[我喜欢ConcurrentDictionary](http://msdn.microsoft.com/en-us/library/dd287189)的无锁操作，并在两个对象中使用它：

```
 ConcurrentDictionary<datetime,myObj> myIndexByDate
 ConcurrentDictionary<myObjSummary, ConcurrentDictionary<int, myObj> myObjectSummary Index 
```

这两个对象需要保持同步。这样做的唯一方法是使用锁，从而避免并发字典的所有好处吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T23:26:30.443

我将创建一个带有 2 个字典的自定义类，并仅对容易更改字典的方法（添加、删除）使用锁定。

您不会失去并发字典的好处，因为此方法所需的代码比使用普通字典所需的代码少得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T23:14:47.500

ConcurrentDictionary 仅对特定实例的操作是“线程安全的”。例如，在调用 ConcurrentDictionary.TryAdd() 调用时，没有其他线程可以修改集合...

这并不意味着当您从一个字典中获取一个值并将其添加到另一个字典中时，该值仍然存在于原始字典中，而您将其添加到第二个字典中。

您可能有一个不变量，详细说明当您将一个值从一个字典移动到另一个字典时，原始字典中的任何值都不能被删除（或者至少*是那个*值，但使用 ConncurrentDictionary 很难保证。

# vb.net - LINQ to SQL 选择等于或不等于

> ID：10666238
> 
> 赞同：0
> 
> 时间：2012-05-19T14:56:07.880
> 
> 标签：vb.net, linq, linq-to-sql

在下面的 LINQ 查询中，我想当 Loc=Locale.Gr 时返回 GrID=100 的所有记录，而当 Loc 是其他所有记录时，返回 GrID <> 100 的所有其他记录。

我怎样才能实现这一目标？我尝试了以下类似的方法，但这是完全错误的。

```
PrivateSub Test(Byval Loc as Locale)
    Private Const GrID as integer = 100
    Dim Query = From c In Mob Where c.CountryID = IIf(Loc = Locale.Gr, GrID, <> GrID) select c
End Sub 
```

更新：

当然我可以使用类似的东西

```
If Loc = Locale.Gr Then
 Query = From c In Mob Where c.CountryID = GrID 
Else
 Query = From c In Mob Where Not c.CountryID = GrID 
End If 
```

但这不是优雅的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T15:02:01.933

以合乎逻辑的方式考虑它 - 当您想要返回记录时有两个条件：

> Loc = Locale.Gr AND GRID = 100
> 
> Loc <> Locale.Gr AND GRID <> 100

现在`Where`通过将这两个条件与 OR 组合来创建一个子句（因为其中只有一个条件为真），您就有了查询。

# performance - 超过 200 家商店拥有多家商店和相同的产品？

> ID：10666240
> 
> 赞同：1
> 
> 时间：2012-05-19T14:56:15.783
> 
> 标签：performance, magento

我们有 25 万种产品，我们想要创建 200 多个不同的站点（多站点），所有商店都将拥有相同的产品，但不同的领域和不同的设计。Magento 多站点功能对我们有好处，但您需要匹配每个产品和每个站点，这意味着像“catalog_product_website”（和其他一些表）这样的表的 50m（分钟）记录以及平面目录和索引将是一个真正的问题。

如果我们使用商店和商店视图，那么用户群将是相同的，而且平面目录也会有问题。

所以我的问题是，有没有办法让所有这些商店都像单一商店一样运作？或者有什么方法可以让它发挥出色的性能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T00:10:01.373

最简洁的答案是不。

虽然 Magento 是为多站点应用程序而构建的，但我认为它不适合运行 200 多家商店和 250,000 种产品。

在这种规模下，我会说就 Magento Enterprise 与 Magento 联系，看看他们要说什么。哦，准备好支付 15,000 美元/服务器/年的价格。

# c++ - 在 ffmpeg 中检测超时

> ID：10666242
> 
> 赞同：9
> 
> 时间：2012-05-19T14:56:24.147
> 
> 标签：c++, ffmpeg

我正在编写一些广泛使用 ffmpeg 的软件，它是多线程的，具有多个类实例。

如果网络连接断开，ffmpeg 会挂起读取。我找到了一种方法来分配 ffmpeg 定期触发的回调以检查它是否应该中止：

```
static int interrupt_cb(void *ctx) 
{ 

// do something 
    return 0;
} 

static const libffmpeg::AVIOInterruptCB int_cb = { interrupt_cb, NULL }; 
```

...

```
AVFormatContext* formatContext = libffmpeg::avformat_alloc_context( );
formatContext->interrupt_callback = int_cb; 
if ( libffmpeg::avformat_open_input( &formatContext, fileName, NULL, NULL ) !=0 ) {...} 
```

这一切都很好，但在网络上我找不到 *ctx 包含的内容以及如何确定回调应该返回 1 还是 0。我无法分配静态“中止”标志，因为该类有很多实例。我也无法调试代码，因为出于某种原因，Visual Studio 拒绝在返回 0 上设置断点；行，声称没有可执行代码与该位置相关联。有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-19T15:14:06.673

在 ffmpeg[文档](http://ffmpeg.org/doxygen/trunk/structAVIOInterruptCB.html)中找到：

> 在阻塞操作期间，回调以**opaque**作为参数调用。如果回调**返回 1**，阻塞操作将被中止。

这是代码中 AVIOInterruptCB 结构类型的声明 int_cb 变量：

```
static const libffmpeg::AVIOInterruptCB int_cb = { interrupt_cb, NULL }; 
```

您将不透明参数声明为`NULL`.

我建议像这样重写初始化代码：

```
AVFormatContext* formatContext = libffmpeg::avformat_alloc_context( );
formatContext->interrupt_callback.callback = interrupt_cb;
formatContext->interrupt_callback.opaque = formatContext; 
```

您将能够访问内部的 formatContext 实例`interrupt_cb`：

```
static int interrupt_cb(void *ctx) 
{ 
    AVFormatContext* formatContext = reinterpret_cast<AVFormatContext*>(ctx);
// do something 
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-19T09:06:18.280

您不仅可以传递 AVFormatContext* formatContext，还可以传递任何其他指向某个实例的有用指针，其中包含要确定的有用数据，哪个线程超时

# c - C中的函数指针数组

> ID：10666245
> 
> 赞同：3
> 
> 时间：2012-05-19T14:56:47.363
> 
> 标签：c, function, function-pointers

我想创建一个函数指针数组并能够在 for 循环中调用它们。我怎样才能做到这一点？我试过了：

```
void (**a) (int);
a[0] = &my_func1;
a[1] = &my_func2;
a[2] = &my_func3;

for ( i = 0; i < 3; i++){
    a[0]();
    (*a[0])(); // Neither does work
} 
```

但是我想我缺少一些语法：

```
error: too few arguments to function ‘*(a + (long unsigned int)((long unsigned int)i * 8ul))’ 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-19T15:00:33.087

您声明的函数应采用 int 作为参数：

```
a[0](1); 
```

另请注意，您为函数声明了一个指向指针的指针，但您没有为它们分配任何内存（我假设这仅在示例中）否则它可能应该是：

```
void (*a[3]) (int); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-19T15:00:21.997

您声明这`a`是一个指向（或指向的指针数组）一个以 an`int`作为参数的函数的指针 - 因此您需要在调用函数时传递一个 int ，例如`a[0](42);`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-19T15:01:47.887

我想下面的代码是你需要的。

```
typedef void * func_pointer(int);

func_pointer fparr[10];

for(int i = 0; i<10; i++)
{
     fparr[i](arg); //pass the integer argument here
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-19T15:01:05.437

1）您在哪里分配或定义了数组来存储函数地址？

2) 在循环中你总是调用 (*a[0])();,应该有循环计数器

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-19T15:03:00.983

你可以`typedef void (*pfun)(int);`然后`pfun a[3];`就是你想要的数组。

以下代码可能对您有用：

```
typedef void (*pfun)(int);

int main() {
    pfun a[3];
    a[0] = myfunc1;    // or &myfunc1 whatever you like
    a[1] = myfunc2;
    a[2] = myfunc3;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-19T15:05:21.893

你忘了给你的函数一个参数。

```
void (**a) (int); // here it takes an int argument
a[0] = &my_func1;
a[1] = &my_func2;
a[2] = &my_func3;

for ( i = 0; i < 3; i++){
    a[0](); // here you do not give an argument
} 
```

但是要小心，你没有为你的`a`数组分配内存，它会因为一个很好的分段错误错误而失败。

```
void my_func1(int i) {
    ;
}
void my_func2(int i) {
    ;
}
void my_func3(int i) {
    ;
}

int main() {
    void (**a) (int);
    a = malloc(3*sizeof(void*)); // allocate array !
    a[0] = &my_func1;
    a[1] = &my_func2;
    a[2] = &my_func3;

    for (int i = 0; i < 3; i++){
        a[i](1); // respect your own function signature
    }
    free(a); // it's always a good habit to free the memory you take
    return 0;
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-19T15:19:59.210

您可以使用所需的大小定义函数数组，并使用以下函数对其进行初始化：

```
void my_func1(int x){}
void my_func2(int x){}
void my_func3(int x){}

void (*a[])(int)={my_func1,my_func2,my_func3};

int i;
for(i=0;i<sizeof a/sizeof*a;++i)
  a[i](i); 
```

任何函数名之前的地址运算符“&”都是多余的。

# opengl - 对于任何了解 OpenGL 的人

> ID：10666249
> 
> 赞同：-2
> 
> 时间：2012-05-19T14:57:17.080
> 
> 标签：opengl, glut, freeglut, glu

我很困惑。我一直在尝试从 OpenGL 开始，但我根本没有任何成功。

细节：我似乎一直在尝试使用 Mesa 3D，它甚至不是严格的官方 OpenGL 实现。Mesa 3D 甚至使用 GPU 吗？我有 4.0 版（类似于 OpenGL 1.3 版实现）。我不知道如何获得另一个实现库；我什至不知道还有什么其他人。（Mesa 3D 由我的 dev-cpp 编译器提供）

事实上，我并没有完全理解 OpenGL 是什么。

此外，我无法让 freeglut 或 glut 或 glu 工作。他们正在调用不存在的函数，例如 gluOrtho 和 gluPerspective。这是由于使用 Mesa 3D 造成的吗？有什么办法可以让这些整个库真正工作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T15:17:00.263

> 事实上，我并没有完全理解 OpenGL 是什么。

OpenGL 本身只是一个 API 规范：一组您可以调用的函数、特殊值和标记以及每个调用的效果。然后实现遵循这个规范来提供一个工作的 OpenGL。

OpenGL 是光栅化绘图 API，针对在 3D 空间中绘制图元进行了优化。即你提供一个 3D 坐标流和一个绘图模式，即绘制点、线或三角形，然后 OpenGL 会将 3D 数据转换为 2D 屏幕空间并在画布上绘制平面图元。更高版本的 OpenGL 不再是严格的 3D 到 2D，而是需要所谓的着色器，这是描述将任意维度几何图形转换为 2D 屏幕空间的小程序。

附加功能是在绘图时将图像数据（纹理）作为附加数据源进行采样和插值。

* * *

> 细节：我似乎一直在尝试使用 Mesa 3D，它甚至不是严格的官方 OpenGL 实现。

为什么？如果您使用的是 Windows，那么您应该使用 GPU 驱动程序提供的 OpenGL 实现，而不是一些随机库（尽管 Mesa3D 并非完全随机）。

OpenGL 实际上并不是你安装的某个库，它是 GPU 驱动程序提供的一组函数。对于 GPU 驱动程序不提供 OpenGL 的情况，您可以使用软件光栅化器实现。

> Mesa 3D 甚至使用 GPU 吗？

依靠。在 Windows Mesa3D 上，它只是一个软件光栅器。但是对于 X.org（Linux、FreeBSD 等），Mesa3D 是 GPU 驱动程序的开源 OpenGL 前端，因此如果 X.org 配置为使用 Mesa3D 可以使用的驱动程序，您可以通过 mesa 获得 GPU 加速。

> 我不知道如何获得另一个实现库；我什至不知道还有什么其他人。（Mesa 3D 由我的 dev-cpp 编译器提供）

通常，您将 OpenGL 作为 GPU 驱动程序的一部分。在 Linux 上安装开源 GPU 驱动程序时，这会自动安装 Mesa3D。但也有闭源驱动程序，它们使用完全不同的代码库。

这一点非常重要：*您不需要专门的 OpenGL 库来进行 OpenGL 开发。*

通常您的编译器附带一个“opengl32.lib”（如果在 Windows 上 - 在其他平台上，您只需告诉链接器链接到系统 OpenGL）。然而，这只是链接器的目录，实际的 OpenGL 实现将提供什么。

在 Windows 上，系统 opengl32.dll 仅导出 OpenGL-1.1。对于高于此的任何功能，都有所谓的扩展机制来加载更高版本的功能。您通常通过像[GLEW这样的库（在这种情况下实际上是一个库）来执行此操作](http://glew.sf.net)

# asp.net-mvc - 如何在 ValidationResult 中传递 memberNames IEnumerable？

> ID：10666255
> 
> 赞同：0
> 
> 时间：2012-05-19T14:58:33.470
> 
> 标签：asp.net-mvc, asp.net-mvc-3, validation

我有一个继承`IValidatableObject`了我的验证通过`IEnumerable<ValidationResult>`函数验证的类。在这个函数中，我设法检查所有字段并返回一条`ValidationResult`消息。

但是，我的问题是`membernames.ToArray()`只传递一个值。我在调试视图页面时证明了这一点，并在检查该字段是否有效时使用`Html.ViewData.ModelState.IsValid("<fieldname>")`

下面是当我返回包含所有无效字段的 ValidationResult 消息时的代码。将`string.Join(",", membernames.ToArray())`返回字段的集合。（即“名”、“姓”）

```
List<string> membernames = new List<string>();

//Firstname
if (FirstName.Trim() == string.Empty)
{
   isValid = false;
   membernames.Add(@"""FirstName""");
}

//Lastname
if (LastName.Trim() == string.Empty)
{
   membernames.Add(@"""LastName""");
   isValid = false;
}

if (!isValid)
{
    yield return new ValidationResult("Please complete all fields marked with *", new[] { string.Join(",", membernames.ToArray()) });
} 
```

我是否传递了正确的类型`new[] { .. }`？

请指教。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T15:29:12.020

In Mvc3 :

in Controller:

```
ModelState.AddModelError("FirstName", "FirstName Minimum 2 Char");
ModelState.AddModelError("FirstName", "FirstName Maximum 20 Char");
ModelState.AddModelError("LastName", "Error Message"); 
```

if You Want only one Error Message for All property:

```
ModelState.AddModelError("", "First Error Message");
ModelState.AddModelError("", "Second Error Message"); 
```

in View:

```
@using (Html.BeginForm()) {
    @Html.ValidationSummary()

    @Html.LabelFor(model => model.FirstName)
    @Html.EditorFor(model => model.FirstName)
    @Html.ValidationMessageFor(model => model.FirstName)

    @Html.LabelFor(model => model.LastName)
    @Html.EditorFor(model => model.LastName)
    @Html.ValidationMessageFor(model => model.LastName)

   //other fields...
} 
```

don't forget jquery and Validation plugin:

```
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script> 
```

# javascript - Chrome 用户脚本错误：“不安全的 JavaScript 尝试访问框架”

> ID：10666258
> 
> 赞同：6
> 
> 时间：2012-05-19T14:58:49.653
> 
> 标签：javascript, google-chrome, iframe, greasemonkey, userscripts

```
// the iframe of the div I need to access
var iframe = document.getElementsByTagName("iframe")[2];
var innerDoc = iframe.contentDocument || iframe.contentWindow.document;

// resize 'player' in the iframe
innerDoc.getElementById('player').width = "1000px";
innerDoc.getElementById('player').height = "650px"; 
```

在此网址的用户脚本中运行：[http ://www.free-tv-video-online.me/player/sockshare.php?id=24DA6EAA2561FD60](http://www.free-tv-video-online.me/player/sockshare.php?id=24DA6EAA2561FD60)

**为什么 Chrome 会出现此错误并使脚本失败？：**

```
Unsafe JavaScript attempt to access frame with URL http://www.sockshare.com/embed/24DA6EAA2561FD60 
from frame with URL http://www.free-tv-video-online.me/player/sockshare.php?id=24DA6EAA2561FD60\. 
Domains, protocols and ports must match. 
```

*（我只是一个基本的 Javascript 用户）*

* * *

最终代码，非常感谢回答者：

```
// ==UserScript==
// @name       Resize
// @include    http://www.free-tv-video-online.me/player/sockshare.php*
// @include    http://www.sockshare.com/*
// ==/UserScript==

if (!(window.top === window.self)) {
    var player = document.getElementById('player');
    setSize(player);
}

function setSize(player) {
    player.style.setProperty("width", "1000px");
    player.style.setProperty("height", "650px");
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-19T22:35:44.863

确实，出于安全原因，普通 javascript 无法访问位于不同域中的 iframe 内容。 **但是**，这绝不会阻止 Chrome、Tampermonkey 或 Greasemonkey 中的用户脚本。

您可以在用户脚本中处理 iframe 内容，因为 Chrome（和 Firefox）处理 iframe 的页面就像它们是主页一样。考虑到这一点，编写此类页面的脚本非常简单。

例如，假设您在***domain_A.com***有此页面：

```
<html>
<body>
    <iframe src="http://domain_B.com/SomePage.htm"></iframe>
</body>
</html> 
```

如果您`@match`像这样设置指令：

```
// @match http://domain_A.com/*
// @match http://domain_B.com/* 
```

然后您的脚本将运行两次——一次在主页上，一次在 iframe 上，就好像它是一个独立页面一样。

所以如果你的脚本是这样的：

```
// ==UserScript==
// @name  _Test iFrame processing in Chrome and Tampermonkey
// @match http://domain_A.com/*
// @match http://domain_B.com/*
// ==/UserScript==

if (/domain_A\.com/i.test (document.location.href) ) {
    //Main page
    document.body.style.setProperty ("background", "lime", "important");
}
else {
    //iFrame
    document.body.style.setProperty ("background", "pink", "important");
} 
```

您会看到浅绿色的主页，以及粉红色的 iframed 页面。

或者，您可以像这样进行测试：

```
if (window.top === window.self) {
    //--- Code to run when page is the main site...
}
else {
    //--- Code to run when page is in an iframe...
} 
```

* * *

* * *

正如您所发现的（根据对另一个答案的评论），您可以[在 Chrome 上禁用相同的来源策略](https://stackoverflow.com/q/3102819/331508)。**不要这样做！** 你会让自己对坏人设置的各种恶作剧敞开心扉。除了邪恶的网站，许多名义上“好”的网站——允许用户发布内容——可能会跟踪、破解或欺骗你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T15:53:37.570

出于安全原因，您的浏览器不允许您从另一个域访问 iframe 中的 javascript。

在此处查看最佳答案：

[jQuery 跨域 iframe 脚本](https://stackoverflow.com/questions/3083112/jquery-cross-domain-iframe-scripting)

# cakephp - saveAll() 不向模型添加 belongsTo 键

> ID：10666259
> 
> 赞同：0
> 
> 时间：2012-05-19T14:58:59.790
> 
> 标签：cakephp, model

我有 2 个模型，Guest 和 Asset。资产属于客人。在提交时，我使用 saveAll() 来 a) 创建来宾表条目和 b) 资产信息。这很好用，但我需要将 Guest.id 添加到 Asset.guest_id （我的印象是当我使用 saveAll() 时会自动完成。

有什么建议吗？

```
 // Asset model belongsTo:
     public $belongsTo = array(
    'User' => array('className' => 'User'),
    'AssetType' => array('className' => 'AssetType'),
    'Status' => array('className' => 'Status'),
    'Guest' => array('className' => 'Guest')
);

 // Controller:
 public function index() {
        pr($this->request->data);
        if($this->request->is("post")) {
            if($this->Asset->saveAll($this->request->data)) {
                $this->Session->setFlash("A new asset has been loaded");
            }
        }
        $assetTypes = $this->Asset->AssetType->find('list');
        $this->set("assetTypes", $assetTypes);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T19:15:13.643

问题似乎是我的资产模型中有一个 hasOne 和 belongsTo 。

我删除了那个hasOne，只设置了belongsTo，它可以工作！

# apache - mod-rewrite 有时会暴露底层 URL - 奇怪的行为

> ID：10666260
> 
> 赞同：1
> 
> 时间：2012-05-19T14:59:02.433
> 
> 标签：apache, .htaccess, mod-rewrite

我正在与 mod_rewrite 作斗争。我有以下两条规则都直接指向 example.com/products.php

（注意每条规则的第一行只是强制执行尾部正斜杠）

```
RewriteEngine on
RewriteBase /

#RULE 1
RewriteRule ^products$ /products/ [R]
RewriteRule ^products/$ products.php [L]

#RULE 2
RewriteRule ^products/hardware$ /products/hardware/ [R]
RewriteRule ^products/hardware/$ products.php [L]** 
```

规则 1 旨在映射`/products/`到`products.php`

规则 2 旨在映射`/products/hardware/`到`products.php`

我的问题是规则 1 似乎工作正常，浏览器中显示的 URL 是`example.com/products/` 但是当我进入`example.com/products/hardware/`浏览器时，它显示正确的页面但 URL 变回`example.com/products.php`（暴露底层 url）

知道为什么规则 2 会导致显示基础 URL 吗？

干杯

标记

# python - 编辑表单时，Django DateTImeField 格式丢失

> ID：10666261
> 
> 赞同：2
> 
> 时间：2012-05-19T14:59:05.047
> 
> 标签：python, django, forms, datetime

我有这样的形式：

```
class EventForm(ModelForm):
    reg_due_date = forms.DateTimeField(input_formats=('%d/%m/%Y %H:%M',), widget=forms.TextInput(attrs={ 'class': 'datePicker','readonly':'true'})) 
```

和

```
class Event(models.Model):
    reg_due_date = models.DateTimeField() 
```

一切都很好，当我使用 jQuery DateTimePicker 时，我在输入字段中有正确的日期时间格式。但是当我尝试通过这部分代码编辑表单时，我看到出现了几秒钟，这是完全不可接受的。它来自哪里？

```
def editEventInfo(request,event_id):
    if request.method == 'GET':
        if event_id:
            event = Event.objects.get(pk=event_id)
            form = EventForm(instance=event) # An unbound form
        else:
            form = EventForm() # An unbound form
        return render_to_response('events/editEvent.html', {
            'form': form,
        },context_instance=RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T15:29:58.537

`input_formats`是表单字段用于将输入字符串解析为日期的格式列表，打印的内容由格式本地化驱动。

您需要激活`USE_L10N = True`或覆盖`DATETIME_FORMAT`

请参阅[https://docs.djangoproject.com/en/1.4/topics/i18n/formatting/](https://docs.djangoproject.com/en/1.4/topics/i18n/formatting/)和[https://docs.djangoproject.com/en/1.4/ref/settings/#datetime-format](https://docs.djangoproject.com/en/1.4/ref/settings/#datetime-format)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-13T08:06:46.527

上面的答案并没有解决我的问题，我不得不覆盖默认的 DATETIME_INPUT_FORMATS 并将我的格式放在首位，因为 django 在匹配元组时立即选择格式。

在我将它放入设置和我的自定义格式优先级之后，它呈现正确。

```
DATETIME_INPUT_FORMATS = (
    '%m/%d/%Y %I:%M %p',
    '%Y-%m-%d %H:%M:%S',     # '2006-10-25 14:30:59'
    '%Y-%m-%d %H:%M:%S.%f',  # '2006-10-25 14:30:59.000200'
    '%Y-%m-%d %H:%M',        # '2006-10-25 14:30'
    '%Y-%m-%d',              # '2006-10-25'
    '%m/%d/%Y %H:%M:%S',     # '10/25/2006 14:30:59'
    '%m/%d/%Y %H:%M:%S.%f',  # '10/25/2006 14:30:59.000200'
    '%m/%d/%Y %H:%M',        # '10/25/2006 14:30'
    '%m/%d/%Y',              # '10/25/2006'
    '%m/%d/%y %H:%M:%S',     # '10/25/06 14:30:59'
    '%m/%d/%y %H:%M:%S.%f',  # '10/25/06 14:30:59.000200'
    '%m/%d/%y %H:%M',        # '10/25/06 14:30'
    '%m/%d/%y',              # '10/25/06') 
```

# java - 将android应用程序连接到gmail服务器

> ID：10666266
> 
> 赞同：0
> 
> 时间：2012-05-19T14:59:44.437
> 
> 标签：java, android, gmail

有什么方法可以将我的 android 应用程序连接到 gmail 服务器，以便我可以登录、注册并从那里获取我的联系人。我正在做的是开发一个 android 应用程序，它必须连接到 gmail 服务器并在我登录后从那里获取我的 gmail 联系人。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T15:08:03.537

普通电子邮件服务中的 Gmail，因此您可以使用 imap 连接和下载数据。

# java - AsyncTask 嵌套或自己的类？

> ID：10666268
> 
> 赞同：0
> 
> 时间：2012-05-19T15:00:00.490
> 
> 标签：java, android, android-asynctask

通常将 AsyncTask 创建为 Activity 中的私有类更好，还是将它们分开在自己的类中？

```
public class MyActivity extends Activity {
  private class DownloadPage extends AsyncTask {
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T15:21:12.620

Activity 里面的 AsyncTask 更适合在完成后台任务后，你可以轻松地改变视图。

在单独的类中，您需要通过`context`，其结果来自单独的类，然后您必须从单独的类中获取结果。

但是有时当我们在应用程序中需要更多 asyncTask 时，单独的类非常有用，并且如果您的活动中有大量代码，那么最好使用单独的类。

所以 AsyncTask 适合在 Activity 内部与视图交互......当我们在应用程序中需要更多 asynctask 时，单独的类也适合。

所以它完全取决于要求......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T15:21:47.360

中的私有类可以`Activity`访问所有私有成员，包括`context`，这不仅有助于完成工作，还有助于展示`ProgressDialog`。

# java - java this关键字

> ID：10666276
> 
> 赞同：3
> 
> 时间：2012-05-19T15:01:03.120
> 
> 标签：java, this

我已经读过，在 Java 中，您不必将**this**关键字显式绑定到对象，它是由解释器完成的。它与 Javascript 相反，你总是必须知道**this**的值。但是 Java 中的**this**在哪里指向类或对象？还是有所不同？这个问题是我尝试理解基本 OO 概念和设计模式的一部分，因此我可以将它们应用于 Javascript。谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-19T15:03:20.390

在 Java 中，`this`总是指一个对象而不是一个类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T15:04:53.227

在java中`this is refer Current object`

像

```
public class Employee{

String name,adress;

Employee(){

 this.name="employee";
 this.address="address";

}

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T15:04:56.377

`this`指当前对象。

*在实例方法或构造函数中，this 是对当前对象的引用——调用其方法或构造函数的对象。您可以使用 this 从实例方法或构造函数中引用当前对象的任何成员。*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-19T15:05:50.327

[Java 语言规范](http://docs.oracle.com/javase/specs/)指出：

> 当用作主要表达式时，关键字 this 表示一个值，该值是对调用实例方法的对象（第 15.12 节）或正在构造的对象的引用。

即它总是指向一个对象，而不是一个类。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-07T15:20:33.590

在java中'this'是一个关键字，基本上用来指代当前对象。在下面的示例中，setter 方法使用“this”来设置当前对象的名称和年龄的值。

```
public class Person {

  String name;
  int age;

  public String getName() {
    return name;
  }

  public void setName(String name) {
    this.name = name;
  }

  public int getAge() {
    return age;
  }

  public void setAge(int age) {
    this.age = age;
  }

  public static void main(String[] args) {
    Person p = new Person();
    p.setName("Rishi");
    p.setAge(23);
    System.out.println(p.getName() + " is " + p.getAge() + " years old");
  }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-19T15:05:37.633

从官方文档（在[这里](http://docs.oracle.com/javase/tutorial/java/javaOO/thiskey.html)找到）：

> 在实例方法或构造函数中，`this`是对当前对象的引用——正在调用其方法或构造函数的对象。您可以使用 this 从实例方法或构造函数中引用当前对象的任何成员。

这意味着在任何类的代码中，当您编写 时`this`，您指定您指的是当前对象这一事实。

作为旁注，您不能`this`与静态字段或方法一起使用，因为它们不属于任何特定对象（类的**实例**）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-10-20T05:56:28.130

this 关键字总是用于引用当前类的对象。其中 this() 用于当前的类构造函数。例如：

```
 class circle {

        public int radius;
        public Circle() {
           this.radius = 10; //any default value
        }

        public Circle(int radius) {
           this.radius = radius  // here this.radius will set instance variable radius
        }
        public int areaOfCircle() {
              return 3.14*radius*radius;
        }
    } 
```

# c# - 使用“ConcurrentDictionary.GetOrAdd()”时避免过时（逻辑损坏）数据，包括复制代码

> ID：10666284
> 
> 赞同：5
> 
> 时间：2012-05-19T15:01:17.480
> 
> 标签：c#, multithreading, concurrency, thread-safety, task-parallel-library

[本文的底部](http://msdn.microsoft.com/en-us/library/dd997369.aspx)描述了使用 GetOrAdd 可能如何导致（如果我理解正确的话）损坏/意外结果。

**剪辑/**

> ConcurrentDictionary 专为多线程场景而设计。您不必在代码中使用锁来添加或删除集合中的项目。但是，一个线程总是可以检索一个值，而另一个线程通过给同一个键一个新值来立即更新集合。
> 
> 此外，虽然 ConcurrentDictionary 的所有方法都是线程安全的，但并非所有方法都是原子的，特别是 GetOrAdd 和 AddOrUpdate。传递给这些方法的用户委托是在字典的内部锁之外调用的。（这样做是为了防止未知代码阻塞所有线程。）因此，可能会发生以下事件序列：
> 
> 1) threadA 调用 GetOrAdd，没有找到任何项目并通过调用 valueFactory 委托创建一个新项目以添加。
> 
> 2）threadB同时调用GetOrAdd，调用了它的valueFactory委托，在threadA之前到达了内部锁，因此它的新键值对被添加到字典中。
> 
> 3）threadA的用户委托完成，线程到达锁，但现在看到item已经存在
> 
> 4）threadA执行“Get”，并返回threadB之前添加的数据。
> 
> 因此，不能保证 GetOrAdd 返回的数据与线程的 valueFactory 创建的数据相同。调用 AddOrUpdate 时会发生类似的事件序列。

**问题**

验证数据并重试更新的正确方法是什么？一个不错的方法是根据旧值的内容尝试/重试此操作的扩展方法。

这将如何实施？我可以依赖结果 ( `verify`) 作为有效的最终状态，还是必须重试并使用不同的方法重新检索这些值？

**代码**

以下代码在更新值时存在竞争条件。期望的行为是 AddOrUpdateWithoutRetrieving() 将以不同的方式增加各种值（使用`++`or `Interlocked.Increment()`）。

我还想在一个单元中执行多个字段操作，如果之前的更新由于竞争条件而没有“采取”，则重试更新。

运行代码，您将看到控制台中出现的每个值开始增加 1，但每个值都会漂移，并且有些值会在前面/后面进行几次迭代。

```
namespace DictionaryHowTo
{
    using System;
    using System.Collections.Concurrent;
    using System.Collections.Generic;
    using System.Linq;
    using System.Text;
    using System.Threading;
    using System.Threading.Tasks;

    // The type of the Value to store in the dictionary:
    class FilterConcurrentDuplicate
    {
        // Create a new concurrent dictionary.
        readonly ConcurrentDictionary<int, TestData> eventLogCache = 
             new ConcurrentDictionary<int, TestData>();

        static void Main()
        {
            FilterConcurrentDuplicate c = new FilterConcurrentDuplicate();

            c.DoRace(null);
        }

        readonly ConcurrentDictionary<int, TestData> concurrentCache = 
            new ConcurrentDictionary<int, TestData>();
        void DoRace(string[] args)
        {
            int max = 1000;

            // Add some key/value pairs from multiple threads.
            Task[] tasks = new Task[3];

            tasks[0] = Task.Factory.StartNew(() =>
            {

                System.Random RandNum = new System.Random();
                int MyRandomNumber = RandNum.Next(1, 500);

                Thread.Sleep(MyRandomNumber);
                AddOrUpdateWithoutRetrieving();

            });

            tasks[1] = Task.Factory.StartNew(() =>
            {
                System.Random RandNum = new System.Random();
                int MyRandomNumber = RandNum.Next(1, 1000);

                Thread.Sleep(MyRandomNumber);

                AddOrUpdateWithoutRetrieving();

            });

            tasks[2] = Task.Factory.StartNew(() =>
            {
                AddOrUpdateWithoutRetrieving();

            });
            // Output results so far.
            Task.WaitAll(tasks);

            AddOrUpdateWithoutRetrieving();

            Console.WriteLine("Press any key.");
            Console.ReadKey();
        }
        public class TestData : IEqualityComparer<TestData>
        {
            public string aStr1 { get; set; }
            public Guid? aGud1 { get; set; }
            public string aStr2 { get; set; }
            public int aInt1 { get; set; }
            public long? aLong1 { get; set; }

            public DateTime aDate1 { get; set; }
            public DateTime? aDate2 { get; set; }

            //public int QueryCount { get; set; }
            public int QueryCount = 0;//

            public string zData { get; set; }
            public bool Equals(TestData x, TestData y)
            {
                return x.aStr1 == y.aStr1 &&
                    x.aStr2 == y.aStr2 &&
                       x.aGud1 == y.aGud1 &&
                       x.aStr2 == y.aStr2 &&
                       x.aInt1 == y.aInt1 &&
                       x.aLong1 == y.aLong1 &&
                       x.aDate1 == y.aDate1 &&
                       x.QueryCount == y.QueryCount ;
            }

            public int GetHashCode(TestData obj)
            {
                TestData ci = (TestData)obj;
                // http://stackoverflow.com/a/263416/328397
                return 
                  new { 
                         A = ci.aStr1, 
                         Aa = ci.aStr2, 
                         B = ci.aGud1, 
                         C = ci.aStr2, 
                         D = ci.aInt1, 
                         E = ci.aLong1, 
                         F = ci.QueryCount , 
                         G = ci.aDate1}.GetHashCode();
            }
        }
        private   void AddOrUpdateWithoutRetrieving()
        {
            // Sometime later. We receive new data from some source.
            TestData ci = new TestData() 
            { 
              aStr1 = "Austin", 
              aGud1 = new Guid(), 
              aStr2 = "System", 
              aLong1 = 100, 
              aInt1 = 1000, 
              QueryCount = 0, 
              aDate1 = DateTime.MinValue
            };

            TestData verify = concurrentCache.AddOrUpdate(123, ci,
                (key, existingVal) =>
                {
                    existingVal.aStr2 = "test1" + existingVal.QueryCount;
                    existingVal.aDate1 = DateTime.MinValue;
                    Console.WriteLine
                     ("Thread:" + Thread.CurrentThread.ManagedThreadId + 
                          "  Query Count A:" + existingVal.QueryCount);
                    Interlocked.Increment(ref existingVal.QueryCount);
                    System.Random RandNum = new System.Random();
                    int MyRandomNumber = RandNum.Next(1, 1000);

                    Thread.Sleep(MyRandomNumber);
                    existingVal.aInt1++;
                    existingVal.aDate1 = 
                         existingVal.aDate1.AddSeconds
                         (existingVal.aInt1);  
                    Console.WriteLine(
                          "Thread:" + Thread.CurrentThread.ManagedThreadId + 
                           "  Query Count B:" + existingVal.QueryCount);
                    return existingVal;
                });

            // After each run, every value here should be ++ the previous value
            Console.WriteLine(
                "Thread:"+Thread.CurrentThread.ManagedThreadId + 
                 ": Query Count returned:" + verify.QueryCount + 
                 " eid:" + verify.aInt1 + " date:" +  
                 verify.aDate1.Hour + " "  + verify.aDate1.Second + 
                 " NAME:" + verify.aStr2
                );
        }

    }
} 
```

**输出**

```
Thread:12: Query Count returned:0 eid:1000 date:0 0 NAME:System

Thread:12  Query Count A:0
Thread:13  Query Count A:1
Thread:12  Query Count B:2
Thread:12: Query Count returned:2 eid:1001 date:0 41 NAME:test11

Thread:12  Query Count A:2
Thread:13  Query Count B:3
Thread:13: Query Count returned:3 eid:1002 date:0 42 NAME:test12

Thread:13  Query Count A:3
Thread:11  Query Count A:4
Thread:11  Query Count B:5
Thread:11: Query Count returned:5 eid:1003 date:0 43 NAME:test14

Thread:11  Query Count A:5
Thread:13  Query Count B:6
Thread:13: Query Count returned:6 eid:1004 date:0 44 NAME:test15 
```

……

```
Thread:11  Query Count A:658
Thread:11  Query Count B:659
Thread:11: Query Count returned:659 eid:1656 date:0 36 NAME:test1658

Thread:11  Query Count A:659
Thread:11  Query Count B:660
Thread:11: Query Count returned:660 eid:1657 date:0 37 NAME:test1659

Thread:11  Query Count A:660
Thread:11  Query Count B:661
Thread:11: Query Count returned:661 eid:1658 date:0 38 NAME:test1660

Thread:11  Query Count A:661
Thread:11  Query Count B:662
Thread:11: Query Count returned:662 eid:1659 date:0 39 NAME:test1661 
```

在此代码中，“eid”应始终比查询计数多 1,000，但在迭代中，两者之间的差异从 1 到 7 不等。这种不一致可能会导致某些应用程序失败或报告不正确的数据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T20:00:01.173

[此提交基于对文章“<em>如何：从 ConcurrentDictionary 添加和删除项目” http://msdn.microsoft.com/en-us/library/dd997369](http://msdn.microsoft.com/en-us/library/dd997369.aspx)底部的注释的错误理解。 [aspx](http://msdn.microsoft.com/en-us/library/dd997369.aspx)和一个基本的并发错误 - 共享对象的并发非原子修改。

首先，让我们澄清一下链接文章的真正含义。我将使用 AddOrUpdate 作为示例，但 GetOrAdd 的推理是等效的。

假设您从多个线程调用 AddOrUpdate 并指定相同的键。假设已经存在具有该键的条目。每个线程都会出现，注意已经有一个具有指定键的条目，并且 AddOrUpdate 的更新部分是相关的。这样做时，没有线程会锁定字典。相反，它将使用一些互锁指令来自动检查条目键是否存在。

所以，我们的几个线程都注意到key存在，需要调用updateValueFactory。该委托被传递给 AddOrUpdate；它引用现有的键和值并返回更新值。现在，所有涉及的线程都将同时调用工厂。它们都将以一些以前未知的顺序完成，并且每个线程都将尝试使用原子操作（使用互锁指令）将现有值替换为其刚刚计算的值。没有办法知道哪个线程会“获胜”。获胜的线程将存储其计算值。其他人会注意到字典中的值不再是作为参数传递给他们的 updateValueFactory 的值。作为对这一认识的回应，他们将放弃操作并丢弃刚刚计算的值。

接下来，让我们澄清一下为什么在运行此处列出的代码示例时会得到奇怪的值：

回想一下，传递给 AddOrUpdate 的 updateValueFactory 委托使用 REFERENCES 现有的键和值并返回更新值。AddOrUpdateWithoutRetrieving() 方法中的代码示例开始直接对该引用执行操作。它不是创建新的替换值并修改 THAT，而是修改existingVal 的实例成员值——一个已经在字典中的对象——然后简单地返回该引用。它不是原子的——它读取一些值，更新一些值，读取更多，更新更多。当然，我们在上面已经看到，这同时发生在多个线程上——它们都修改了相同的对象。难怪结果是在任何时候（当代码示例调用 WriteLine 时），对象都包含源自不同线程的成员实例值。

字典与此无关——代码只是以非原子方式修改线程之间共享的对象。这是最常见的并发错误之一。两种最常见的解决方法取决于具体情况。要么使用共享锁使整个对象修改原子化，要么先原子地复制整个对象，然后修改本地副本。

对于后者，请尝试将其添加到 TestData 类：

```
private Object _copyLock = null;

private Object GetLock() {

    if (_copyLock != null)
        return _copyLock;

    Object newLock = new Object();
    Object prevLock = Interlocked.CompareExchange(ref _copyLock, newLock, null);
    return (prevLock == null) ? newLock : prevLock;
}

public TestData Copy() {

    lock (GetLock()) {
        TestData copy = new TestData();
        copy.aStr1 = this.aStr1;
        copy.aStr2 = this.aStr2;
        copy.aLong1 = this.aLong1;
        copy.aInt1 = this.aInt1;
        copy.QueryCount = this.QueryCount;
        copy.aDate1 = this.aDate1;
        copy.aDate2 = this.aDate2;
        copy.zData = this.zData;

        return copy;
    }
} 
```

然后修改工厂如下：

```
TestData verify = concurrentCache.AddOrUpdate(123, ci,
    (key, existingVal) =>
    {
        TestData newVal = existingVal.Copy();
        newVal.aStr2 = "test1" + newVal.QueryCount;
        newVal.aDate1 = DateTime.MinValue;
        Console.WriteLine("Thread:" + Thread.CurrentThread.ManagedThreadId + "  Query Count A:" + newVal.QueryCount);
        Interlocked.Increment(ref newVal.QueryCount);
        System.Random RandNum = new System.Random();
        int MyRandomNumber = RandNum.Next(1, 1000);

        Thread.Sleep(MyRandomNumber);
        newVal.aInt1++;
        newVal.aDate1 = newVal.aDate1.AddSeconds(newVal.aInt1);
        Console.WriteLine("Thread:" + Thread.CurrentThread.ManagedThreadId + "  Query Count B:" + newVal.QueryCount);
        return newVal;
    }); 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-19T18:15:53.657

可能正确的方法是不关心返回的值是否不是由`valueFactory`. 如果这不可接受，则需要使用锁。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-19T22:00:53.867

没有总能奏效的一般保护措施。但一个常见的解决方法是返回 a`Lazy<T>`而不是 a `T`。这样创建不需要的懒惰并没有害处，因为永远不会启动。只有一个 Lazy 会使其成为 key 对应的最终值。只会返回一个特定的 Lazy 实例。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-20T09:24:48.220

你可以使用[这个](http://blogs.msdn.com/b/pfxteam/archive/2012/02/04/10264111.aspx)`GetOrAdd`人自己的实现。请注意，即使在这里也可以调用工厂，而无需将其结果添加到字典中。但是你会知道发生了什么。

# java - JMenuItem：如何使用 3 个键设置加速器？

> ID：10666287
> 
> 赞同：3
> 
> 时间：2012-05-19T15:01:37.737
> 
> 标签：java, swing, jmenuitem

请看下面的代码

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class MenuActions extends JFrame
{
    private JMenuBar jmb;
    private JMenu file;
    private JMenuItem open;

    public MenuActions()
    {
        jmb = new JMenuBar();
        file = new JMenu("File");
        open = new JMenuItem("Open");
        open.addActionListener(new MenuAction());
        open.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_O,KeyEvent.VK_P,ActionEvent.CTRL_MASK));

        file.add(open);
        jmb.add(file);

        this.setJMenuBar(jmb);

        getContentPane().add(new JPanel());

        this.setSize(200,200);
        this.setVisible(true);
        this.validate();
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    }

    private class MenuAction implements ActionListener
    {
        public void actionPerformed(ActionEvent ae)
        {
            JOptionPane.showMessageDialog(null,"OK");

        }
    }
    public static void main(String[]args)
    {
        new MenuActions();
    }
} 
```

在这里，当同时按下 CTRL+O+P 时，我需要触发 JMenuItem 的 EventHandler，所以它会显示 JOptionPane 说“OK”。但正如你所看到的，我的尝试给出了一个错误！当这三个键同时按下时，我该怎么做？请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T15:28:12.473

看起来您使用的是错误版本的 KeyStroke.getKeyStroke() 方法 - 甚至找不到采用 3 个 int 参数的方法。不过，如果你愿意，你可以使用`CTL`++而 不是`ALT`++`P``CTL``O``P`

尝试使用这个版本： [http](http://docs.oracle.com/javase/7/docs/api/javax/swing/KeyStroke.html#getKeyStroke(java.lang.String) ://docs.oracle.com/javase/7/docs/api/javax/swing/KeyStroke.html#getKeyStroke(java.lang.String )

像这样：`KeyStroke.getKeyStroke("control alt P")`

在这里试试这个代码示例：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class MenuActions extends JFrame
{
    private JMenuBar jmb;
    private JMenu file;
    private JMenuItem open;

    public MenuActions()
    {
        jmb = new JMenuBar();
        file = new JMenu("File");
        open = new JMenuItem("Open");
        open.setAction(new MenuAction("Open", null, "Click to Open an Existing File.", KeyStroke.getKeyStroke("control alt P")));
        open.setAccelerator(KeyStroke.getKeyStroke("control alt P"));

        file.add(open);
        jmb.add(file);

        this.setJMenuBar(jmb);

        getContentPane().add(new JPanel());

        this.setSize(200,200);
        this.setVisible(true);
        this.validate();
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    }

    private class MenuAction extends AbstractAction
    {
        public MenuAction(String title, ImageIcon image
                                        , String toolTipText
                                        , KeyStroke acceleratorKey)
        {
            super(title, image);
            putValue(SHORT_DESCRIPTION, toolTipText);
            putValue(SHORT_DESCRIPTION, toolTipText);
            putValue(ACCELERATOR_KEY, acceleratorKey);
        }
        public void actionPerformed(ActionEvent ae)
        {
            JOptionPane.showMessageDialog(null,"OK");
        }
    }
    public static void main(String[]args)
    {
        new MenuActions();
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-19T16:02:26.343

给@Pete

您可以组合任何 non_chars 加速器，但不能用于范围`[a-z]`&&中的键`[0-9]`

对于 JMenu(Item) 加速器，您可以使用

`KeyEvent`或`Character.valueOf('char')`字符`[a-z]`&&`[0-9]`

并作为第二个参数

`Event`or `ActionEvent`or `InputEvent`，注意每个 API 实现不同的键盘映射

可以结合 KeyStroke 但按位 | 或 & 但返回奇怪的按键

```
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.InputEvent;
import java.awt.event.KeyEvent;
import javax.swing.*;
import javax.swing.border.BevelBorder;

public class MenuExample extends JPanel {

    private static final long serialVersionUID = 1L;
    private Icon errorIcon = UIManager.getIcon("OptionPane.errorIcon");
    private Icon infoIcon = UIManager.getIcon("OptionPane.informationIcon");
    private Icon warnIcon = UIManager.getIcon("OptionPane.warningIcon");
    private Icon questIcon = UIManager.getIcon("OptionPane.questionIcon");
    private JTextPane pane;
    private JMenuBar menuBar;

    public MenuExample() {
        menuBar = new JMenuBar();
        JMenu formatMenu = new JMenu("Justify");
        formatMenu.setMnemonic('J');
        MenuAction leftJustifyAction = new MenuAction("Left", errorIcon);
        MenuAction rightJustifyAction = new MenuAction("Right", infoIcon);
        MenuAction centerJustifyAction = new MenuAction("Center", warnIcon);
        MenuAction fullJustifyAction = new MenuAction("Full", questIcon);
        JMenuItem item;
        item = formatMenu.add(leftJustifyAction);
        item.setMnemonic('L');
        item.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_N, ActionEvent.ALT_MASK));
        item = formatMenu.add(rightJustifyAction);
        item.setMnemonic('R');
        item.setAccelerator(KeyStroke.getKeyStroke(ActionEvent.CTRL_MASK | KeyEvent.VK_N, ActionEvent.CTRL_MASK & KeyEvent.VK_B));// CTRL +N
        item = formatMenu.add(centerJustifyAction);
        item.setMnemonic('C');
        item.setAccelerator(KeyStroke.getKeyStroke(InputEvent.ALT_MASK | Character.valueOf('p'), InputEvent.ALT_MASK & Character.valueOf('o')));//ALT+F9
        item = formatMenu.add(fullJustifyAction);
        item.setMnemonic('F');
        item.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_A, Event.CTRL_MASK | Event.SHIFT_MASK));
        menuBar.add(formatMenu);
        menuBar.setBorder(new BevelBorder(BevelBorder.RAISED));

    }

    class MenuAction extends AbstractAction {

        public MenuAction(String text, Icon icon) {
            super(text, icon);
        }

        public void actionPerformed(ActionEvent e) {
            try {
                pane.getStyledDocument().insertString(0, "Action [" + e.getActionCommand() + "] performed!\n", null);
            } catch (Exception ex) {
                ex.printStackTrace();
            }
        }
    }

    public static void main(String s[]) {
        MenuExample example = new MenuExample();
        example.pane = new JTextPane();
        example.pane.setPreferredSize(new Dimension(250, 250));
        example.pane.setBorder(new BevelBorder(BevelBorder.LOWERED));
        JFrame frame = new JFrame("Menu Example");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setJMenuBar(example.menuBar);
        frame.getContentPane().add(example.pane, BorderLayout.CENTER);
        frame.pack();
        frame.setVisible(true);
    }
} 
```

# windows - 如何将 MSVS (Microsoft Visual Studio) 2008 Express 安装到 C: 和 D: 驱动器（而不是 C: D: E: 它提供的）

> ID：10666292
> 
> 赞同：0
> 
> 时间：2012-05-19T15:01:56.893
> 
> 标签：windows, visual-studio

我有驱动器 C: 和 D: 定期备份。E: 没有备份，但它拥有最多的可用空间（120 Gb 而不是 D: 上的 80 Gb）。

当我指定路径 D:\Program Files... 从 2008 Express ISO 安装 C# 时，我收到一条消息：

磁盘空间要求：C：887 MB 和 D：80Mb 和 E：229 MB

如何规避E盘：使用？这有什么用途？也许仅适用于临时数据？

E: 不会备份，我会失败 MSVS 恢复 :(

我已经找到了一些方法来做到这一点，但它们太愚蠢或太笨拙了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T15:41:02.943

在这种情况下，使用 E: 将用于临时文件。VS 安装程序安装到系统驱动器（.NET 和 VC++ 等运行时，带有 VS2010 和更高版本的 Windows/.NET SDK）和目标驱动器（VS 本身和其他工具）。

但安装程序也需要工作空间，为此它会自动使用可用空间最多的驱动器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T14:47:23.830

我有另外两种方法，但它们现在没用而且有点奇怪：

1.  将尽可能多的视频复制到驱动器 E: 以减少其可用空间。安装程序将使用 D: 然后。

2.  （例如，在 Windows XP 上）“删除”驱动器 E: 并将 msvs 安装程序复制到 D:（之后删除）或 DVD。之后，我们可以通过控制面板的管理图标安全地恢复它。

但从理查德的回答来看，不需要。我看到了 - 安装后驱动器 E: 上没有出现新文件。因此，对于较少的碎片，最好使用 E:。

# c# - 如何检查内部类属性

> ID：10666294
> 
> 赞同：1
> 
> 时间：2012-05-19T15:02:02.307
> 
> 标签：c#, reflection

这是一些课程

```
public class ClassA
{
    public string Name    { get; set; }
    public string Color   { get; set; }
    public ClassB ClassB_ { get; set; }

    public class ClassB
    {
        public string Name { get; set; }
        public float  Age  { get; set; }
    }
} 
```

现在，我想打印以控制 ClassA 的所有公共属性，所以我使用它

（ obj 是该方法获取并打印出他的所有属性的一些参数）

```
 var allProp = obj.GetType().GetProperties(); 
```

但是当我的应用程序看到 ClassA 的 ClassB 对象时——我还想打印出所有 ClassB 属性——而且我不知道如何在运行时知道 ClassB 是类而不是原始对象，以及在运行时我怎么能打印出所有 ClassB 属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T15:19:33.873

试试这个代码：

```
Type type = Type.GetType("ClassA+ClassB");
var allProp = type.GetProperties(); 
```

如果您需要类型的动态名称，请尝试使用下一个代码：

```
string fullname = typeof(ClassA.ClassB).FullName; 
```

# eclipse - Eclipse Helios Java EE 6：目标无法访问，标识符“bean”解析为空

> ID：10666295
> 
> 赞同：1
> 
> 时间：2012-05-19T15:02:14.897
> 
> 标签：eclipse, jsf, tomcat

我通读了[Java EE 6 上的答案：Target Unreachable, identifier 'helloBean' resolved to null](https://stackoverflow.com/questions/9809511/java-ee-6-target-unreachable-identifier-hellobean-resolved-to-null?answertab=votes#tab-top)关于标识符被解析为 null。我在这里面临类似的问题。我的开发环境是Eclipse Helios和tomcat 7.0。

实际上，我的 faces-config.xml 和 web.xml 都符合 JSF2.0，但是，这并不能解决问题。当我有 faces-config 包含 bean 时，它可以工作。一旦我把它取下来，即使我有 @ManagedBean 注释，它也不起作用。我在 tomcat 启动控制台消息和日志中看不到错误或警告。

感谢是否有人可以提供帮助。

我正在使用的 faces-config.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<faces-config
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd"
    version="2.0">

 <managed-bean>
  <managed-bean-name>userManagedBean</managed-bean-name>
  <managed-bean-class>UserManagedBean</managed-bean-class>
  <managed-bean-scope>session</managed-bean-scope>
 </managed-bean>
</faces-config> 
```

# scheme - 理解 Scheme 中的符号

> ID：10666297
> 
> 赞同：1
> 
> 时间：2012-05-19T15:02:33.040
> 
> 标签：scheme, symbols, sicp

我很难理解 Scheme 中的符号。以下让我感到困惑：

```
1 ]=> (symbol? 'x)
; Value: #t    
1 ]=> (symbol? '('x))
; Value: #f 
```

我以为我明白为什么第一个是符号，但为什么`'('x))`不是呢？有人可以解释为什么吗？

对于它的价值，我正在运行 MIT/GNU Scheme。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T15:36:26.480

In scheme`'...`是`(quote ...)`.

因此`'x`是 的简写`(quote x)`。并且`'(1 2 3)`是速记`(quote (1 2 3))`。

计算引用表达式时，引用的值不会作为表达式计算，而只是简单地返回。

引用的`(quote x)`是符号。`x`所以`(quote x)`计算为符号`x`。

`(quote (1 2 3))`引用的值是一个列表。它评估为`(1 2 3)`。

在您稍微复杂的示例中，您有

`'('x)` 这是 的简写`(quote ((quote x)))`。

这将评估为 list `((quote x))`。在大多数方案中打印为`('x)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T15:21:59.310

`'('x)`是一个列表，而不是一个符号。Scheme 中的符号是字母数字的，就像变量和关键字一样。符号也是如此`'a`， 也是`'supercalafragalistic`，但是`'(1 2 3)`是数字列表。

我不确定到底是什么让你失望，但它可能是`'`. `'`可以用来制作符号，也可以用来制作列表和其他东西。不是所有以它开头的东西`'`都是一个符号。

# php - PHP 让 imap 打开工作

> ID：10666299
> 
> 赞同：0
> 
> 时间：2012-05-19T15:02:39.513
> 
> 标签：php, cakephp, imap, gmail-imap

我刚刚将我的应用程序移至云托管。我正在使用 imap_open 访问我的 gmail 帐户中的邮件。它工作得很好。

```
$hostname = '{imap.gmail.com:993/imap/ssl}INBOX';
$username = '...@gmail.com';
$password = '****';
$inbox = imap_open($hostname,$username,$password) or die('Cannot connect to Gmail: ' . imap_last_error()); 
```

现在我收到一个错误**Unable to create selectable TCP socket (1176 >= 1024)**有人知道这个错误吗？我很感激任何帮助。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T15:05:18.867

在我看来，您已经达到了打开文件描述符的最大数量。也许重新启动您的系统？

# javascript - html：从不同域加载外部文档

> ID：10666302
> 
> 赞同：0
> 
> 时间：2012-05-19T15:02:51.603
> 
> 标签：javascript, html, dom

假设，我有一个 domain1.com，那里有一个 html 页面： [http ://domain1.com/test.html](http://domain1.com/test.html)

然后，还有另一个带有 data.html 页面的 [domain2.com：http://domain2.com/data.html](http://domain2.com/data.html)

是否可以将 data.html 加载到 test.html 页面中进行处理，我该怎么做？

我的dom / javascript知识比较生疏，所以我想问一下这样做的方法是什么？

基本上，我想将它加载到某个隐藏的框架中或使用 xml 请求（或任何它的名称），然后使用 JS 处理该数据。这应该适用于常规的当前浏览器，并且不需要任何额外的设置来允许跨域请求（如果存在问题）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T15:19:59.717

Normally, you can't. But you have options, and a bit of "extra settings"

*   [Cross-Origin Resource sharing (CORS)](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing) would be the easy, straight-forward solution, if the remote server and the browser supports it. You'd need a bit of "extra settings" on the server side. Afterwards, use AJAX with modified headers to allow CORS.

*   [JSON-P](http://en.wikipedia.org/wiki/JSONP) which is a JS object wrapped in a callback. Still, some more extra settings on the server. You need to determine the receiving callback's name, encode the data in JSON and wrap the JSON in a function call. Afterwards load it in a dynamic script tag.

*   A server proxy. This has the most "extra settings" but grants you more flexibility. You would want to ask a server script on your domain to load a page from the other domain (something like wget or curl). Since you request your server to load the page for you, you only need the usual AJAX on the client-domain part.

# python - 在python中用“，”分割

> ID：10666304
> 
> 赞同：1
> 
> 时间：2012-05-19T15:03:14.490
> 
> 标签：python, regex, string

我正在尝试用逗号“，”分割字符串

例如：

```
"hi, welcome"  I would like to produce ["hi","welcome"] 
```

然而：

```
"'hi,hi',hi" I would like to produce ["'hi,hi'","hi"]

"'hi, hello,yes','hello, yes','eat,hello'" I would like to produce ["'hi, hello,yes'","'hello, yes'","'eat,hello'"]

"'hiello, 332',9" I would like to produce ["'hiello, 332'","9"] 
```

我不认为`.split()`可以使用该功能，有谁知道我可以做到这一点的方法，也许是正则表达式？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-19T15:08:26.307

您可以将 csv 模块与`quotechar`参数一起使用，也可以将输入转换为使用更标准的`"`字符作为引号字符。

```
>>> import csv
>>> from cStringIO import StringIO
>>> first=StringIO('hi, welcome')
>>> second=StringIO("'hi,hi',hi")
>>> third=StringIO("'hi, hello,yes','hello, yes','eat,hello'")
>>> fourth=StringIO("'hiello, 332',9")
>>> rfirst=csv.reader(first,quotechar="'")
>>> rfirst.next()
['hi', ' welcome']
>>> rsecond=csv.reader(second,quotechar="'")
>>> rsecond.next()
['hi,hi', 'hi']
>>> rthird=csv.reader(third,quotechar="'")
>>> rthird.next()
['hi, hello,yes', 'hello, yes', 'eat,hello']
>>> rfourth=csv.reader(fourth,quotechar="'")
>>> rfourth.next()
['hiello, 332', '9']

>>> second=StringIO('"hi,hi",hi') # This will be more straightforward to interpret.
>>> r=csv.reader(second)
>>> r.next()
['hi,hi', 'hi']
>>> third=StringIO('"hi, hello,yes","hello, yes","eat,hello"')
>>> r=csv.reader(third)
>>> r.next()
['hi, hello,yes', 'hello, yes', 'eat,hello'] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T16:24:10.617

使用正则表达式，正如您所要求的：

```
import re

>>>pattern = re.compile(r"([^',]+,?|'[^']+,?')")
>>>re.findall(pattern, "hi, welcome")
['hi', 'welcome']

>>>re.findall(pattern, "'hi, hello,yes','hello, yes','eat,hello'")
["'hi, hello,yes'", "'hello, yes'", "'eat,hello'"]

>>>re.findall(pattern, "'hi,hi',hi")
 ["'hi,hi'", 'hi']

>>>re.findall(pattern, "'hiello, 332',9")
["'hiello, 332'", '9'] 
```

模式的第一部分`[^',]+,?`，捕获不带引号和不带逗号的段。它的末尾可能有一个逗号，也可能没有（如果它是最后一段）。

第二部分，`'[^']+,?'`，捕获用引号括起来的段。它不应该有更多的内部引号，但它可能有逗号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T15:11:40.377

您可以使用带有分隔符和引号字符的[csv 阅读器](http://docs.python.org/library/csv#reader-objects)。这似乎与您的期望相符。`,``'`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-20T00:10:50.240

直接这样做没有`csv`或`re`没有问题：

```
def splitstring(s):
    result = []
    for i, piece in enumerate(s.split("'")):
        if piece:
            if i % 2:  # odd pieces are between quotes
                result.append("'" + piece + "'")
            else:  # even pieces aren't
                for subpiece in piece.split(","):
                    if subpiece:
                        result.append(subpiece)
    return result 
```

# windows-phone-7 - 交互触发器不允许触发属性更改事件

> ID：10666309
> 
> 赞同：1
> 
> 时间：2012-05-19T15:03:52.610
> 
> 标签：windows-phone-7, mvvm, pivot, interaction, selectedindex

我的问题是为什么我在使用交互触发器时看到一些意外行为，而不是在使用普通点击事件时。

在我的 WP7 应用程序中，我有一个带有三个枢轴项的枢轴控件。在第一个枢轴项目上有一个按钮，它执行某些操作，然后需要设置当前枢轴项目以显示最后一个。我在其他工具中使用 MVVM 和 Prism。

因此，视图是：

```
 <controls:Pivot Name="myPivot" SelectedIndex="{Binding Path=PivotIndex, Mode=TwoWay}">
   <controls:PivotItem Header="first">
    <Button Content="Search">
        <i:Interaction.Triggers>
         <i:EventTrigger EventName="Click">
            <i:InvokeCommandAction  Command="{Binding myViewModel.SearchCommand, Source={StaticResource ViewModelLocator}}"/>
             </i:EventTrigger>
        </i:Interaction.Triggers>
    </Button>
  </controls:PivotItem>
   <controls:PivotItem Header="second"></controls:PivotItem>
   <controls:PivotItem Header="third"></controls:PivotItem>
</controls:Pivot> 
```

ViewModel 是这样的：

```
public class myViewModel : NotificationObject
{
    private int mPivotIndex;
    public int PivotIndex
    {
        get { return mPivotIndex; }
        set
        {
            mPivotIndex = value;
            RaisePropertyChanged(() => this.PivotIndex);
        }
    }
    public DelegateCommand SearchCommand { get; set; }
    public myViewModel() 
    {
        this.SearchCommand = new DelegateCommand(() => OnSearch());
    }

    public void OnSearch()
    {
        //do something
        this.PivotIndex = 2;            
    }
} 
```

所有这些工作正常，显示枢轴，按钮触发事件并调用 OnSearch() 方法，属性的值已更改。

但是，枢轴显示不会更改为显示名为“第三”的枢轴项目。

我摆弄了很长时间，最终发现如果我删除交互触发器并将视图更改为：

```
 <Button Content="Search" Click="Search_Click" /> 
```

并在后面添加代码：

```
private void Search_Click(object sender, System.Windows.RoutedEventArgs e)
{ ((myViewModel)this.DataContext).OnSearch(); } 
```

然后一切正常。

这有点令人不满意，因为我喜欢在所有页面上对命令事件保持相同的方法，这是不同的。但是在被这种行为困扰了这么久之后，我很高兴终于找到了可行的方法。

但我还是想知道为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T15:56:37.197

不确定，但这可能与线程有关...尝试以下操作，看看是否可以解决问题：

```
public void OnSearch()
{
    Dispatcher.BeginInvoke(() => {
        this.PivotIndex = 2;
    });
} 
```

# java - Osmdroid 禁用双击缩放

> ID：10666310
> 
> 赞同：2
> 
> 时间：2012-05-19T15:04:02.760
> 
> 标签：java, android, openstreetmap, osmdroid

有没有办法在 Osmdroid 的 MapView 中禁用双击缩放？我通过调用禁用音高缩放

```
mapView.setMultiTouchControls(false); 
```

但我不知道要双击什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T17:07:31.953

我用自己的gestureDetector设置了自己的onTouchListener来拦截onDoubleTap。这有效地停止了地图视图的标准双击。

一些代码片段。

```
mGestureDetector = new GestureDetector(this, this);
mMapView.setOnTouchListener(mOnTouchListener);

public OnTouchListener mOnTouchListener = new OnTouchListener() {
    @Override
    public boolean onTouch(View v, MotionEvent event) {
        if (mGestureDetector.onTouchEvent(event))
            return true;
        else
            return false;
    }
};

@Override
public boolean onDoubleTap(MotionEvent arg0) {
    Log.v(TAG, "onDoubleTap");
    return true;
} 
```

# xcode - 使用 xcode，我如何区分文件的工作副本和存储库中的最新提交？

> ID：10666312
> 
> 赞同：37
> 
> 时间：2012-05-19T15:04:11.953
> 
> 标签：xcode, version-control

使用 xcode，我想查看文件的工作副本与存储库中的最新提交之间的差异。我知道，如果我承诺，我可以得到比较。而且我知道我使用'git diff'从命令行执行此操作。但是有没有办法从 xcode GUI 做到这一点？

我一直在想一定有办法做到这一点，但找不到。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2016-04-16T06:37:27.403

这是屏幕截图。

**单击右上角的版本编辑器按钮（突出显示的框）：**

[![在此处输入图像描述](../Images/e80100fed0f3cb8164ecd5a474a1e894.png)](https://i.stack.imgur.com/Allhl.png)

**然后，单击要与之比较的修订（页脚突出显示的框）：**

[![在此处输入图像描述](../Images/fbf2f2429f3af883443ac1595177884b.png)](https://i.stack.imgur.com/7X1QZ.png)

* * *

**此外，您可以使用这些按钮浏览每个更改：`<`和`>`**

[![在此处输入图像描述](../Images/27227dce0e9ac0bf0f92949b600458d0.png)](https://i.stack.imgur.com/1nmaP.gif)

* * *

**最后，您可以使用“放弃更改”撤消单个更改，如下所示：**

[![在此处输入图像描述](../Images/93423e05b8eedb6ac1c4ed818d766ce6.png)](https://i.stack.imgur.com/qLNuo.gif)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-19T15:30:44.050

这不完全是差异，但您可以使用版本编辑器按钮进行并排比较，就在 Xcode 窗口右上角的“编辑器”一词上方。

[它是屏幕1](http://i.stack.imgur.com/s9kOE.png)右上角的 Assistant Editor 图标右侧的箭头图标。提交/取消答案也有效。菜单：source_control --> 提交（然后取消）。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2017-03-28T18:00:22.637

Phillip 和 Donn 都有正确的答案，但我提供了一个额外的屏幕截图来说明为什么使用“显示版本编辑器”按钮是这个问题的正确答案。我认为这应该是公认的答案，并且应该删除所有其他答案以避免混淆。:)

如下面的屏幕显示所示，“显示版本编辑器”显示了一个拆分视图，它是选定修订版之间的视觉差异，默认为左侧的本地修订版和右侧的最新 repo 修订版。关键是使用底部居中的箭头浏览各个差异。箭头之间的数字表示当前差异和差异总数。

[![版本编辑器视图](../Images/c4d91e0ed73f29d757eb0752f384007f.png)](https://i.stack.imgur.com/D15QH.png)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-12-15T19:41:17.667

如果您纯粹想查看与上**一次**提交的区别，那么您可以按照**Commit**的快捷方式进行操作，即 do: `Opt` `Cmd``C`。我发现这可以更快地访问。此外，您将看到您所做的所有更改，而不仅限于单个文件。

[![在此处输入图像描述](../Images/1fc661984aa6c2a4d072b4a149a314e4.png)](https://i.stack.imgur.com/20sET.png)

如果您想与之前的 2-3 次提交进行比较，则必须使用其他答案已经提到的比较按钮。

**编辑：**

Xcode10 有一个**更改栏**。从 Xcode 中的 WWDC 2018 源代码控制工作流中看到[这一刻](https://developer.apple.com/videos/play/wwdc2018/418/?time=218)

[![在此处输入图像描述](../Images/262a3770fcdc8707282135a257e366f5.png)](https://i.stack.imgur.com/5gIGW.png)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-07-05T10:30:51.873

所以，对于那些已经更新到 Xcode 12 并感到完全失落的可怜灵魂，只需转到`View`-> `Show Code Review`。旧版本编辑器（或类似的东西）将在那里。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-20T02:31:35.917

我发现了一种方法来做我想做的事。如果您点击存储库页面上的提交按钮，您将看到提交视图，该视图提供了一个机会来区分每个文件即将提交的版本与当前分支中的最新提交。您可以查看您的差异，然后取消提交。

# java - 连接到基于文件的 derby 数据库

> ID：10666313
> 
> 赞同：6
> 
> 时间：2012-05-19T15:04:15.553
> 
> 标签：java, netbeans, database-connection, derby

我想使用 apache derby 处理基于文件的数据库。我想知道是否有人可以carify如何使用netbeans作为IDE来连接和创建这个数据库。我通过 derby 手册试图弄清楚这一点，但我得到的只是“嵌入式 Derby JDBC 数据库连接”，我被告知这不是基于文件的方法，无论哪种方式，连接似乎都不起作用。任何帮助将非常感激

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T15:30:10.210

要创建一个，您的 jdbc url 将是: `jdbc:derby:foo;create=true`，它将在 derby 系统目录中创建一个名为 foo 的数据库。如果要在硬盘驱动器的绝对位置创建一个，请指定绝对路径。`jdbc:derby:/home/me/foo;create=true`.

创建数据库后，您可以使用相同的 url 连接到它，或者您可以删除该`;create=true`部分。

您可以通过系统属性设置 derby 系统目录，例如`System.setProperty("derby.system.homeSystem.setProp", "/home/bar/whatever");`. 我认为您需要在启动 derby 数据库之前执行此操作，但之后我从未尝试过这样做。我发现为应用程序设置 derby 系统主页并指定相对数据库 url 可以更好地工作，但这是个人喜好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T12:28:27.343

毫无疑问，您要使用的驱动程序是 derby.jar 中的嵌入式驱动程序。与其像有足够多的例子那样进入“事物的编码方面”，我更喜欢在开始编码之前使用 netbeans 本身来完成所有事情。

由于我使用嵌入式方法将wireshark / tcpdump / nmap 文件转换为数据库条目，因此我使用了一种稍微不同的方法。

由于我更喜欢​​ Derby 的最新稳定版本而不是已安装的版本，所以我有一个稍微不同的方法，它允许我使用我想要的任何版本，以及将数据库放在文件中我想要的任何 ar/w 数据目录中系统。

1.  创建：mkdir -p $HOME/opt/derby 和 cd ~/opt/derby。
2.  从 db.apache.org 下载最新版本，unbundle 位于 $HOME/opt/derby/
3.  创建符号链接：ln -s `pwd`/ *version* `pwd` /latest。
4.  创建符号链接：ln -s `pwd`/latest`pwd`
5.  启动netbeans。

从这里开始，您可以在 netbeans 中执行所有操作：

1.  创建一个 Ant 库并将其命名为“ASF-Derby-Emb.”：Tools->Ant Libraries->New Library。
2.  在设置面板中，将类路径设置为 /home/[loginid]/opt/derby/default/lib/derby.jar，并且可以选择添加 derbytools.jar。
3.  如果您已下载源代码，请单击源选项卡并添加到源代码的路径中。
4.  单击 javadoc 选项卡和 /home/[loginid]/opt/derby/default/javadocs

当您开始编码时，只需添加 ASF-Derby-Emb 库，它就会自动复制到您的“dist”中。

现在设置 JavaDB。

1.  设置服务选项卡：Window->Services 并选择该选项卡。
2.  选择 JavaDB 并右键单击并停止可能正在运行的 JavaDB。
3.  选择 JavaDB 并右键单击并单击 Properties 菜单项，这将弹出一个属性对话框。
4.  浏览到 JavaDB 安装目录：$HOME/opt/derby/default。
5.  要么保留数据库安装目录位置，要么浏览到要放置它的目录，但请确保您具有读/写访问权限。
6.  单击“确定”，现在您有了不同的 JavaDB 安装和数据库位置。

只需更改数据库位置，您就可以将数据库放在您想要的任何位置。或者您可以在代码中完成与 url 相同的操作：jdbc:derby://*数据库位置目录。*

无论如何，现在我可以设置我的数据库了。

1.  选择 JavaDB 并右键单击并选择“创建数据库”并填写对话框，数据库将在属性文件中设置的目录中初始化。
2.  创建连接：选择 JavaDB，然后选择已创建的数据库的名称。

从这一点来看，有三种选择：

1.  什么都不做并创建创建表等所需的代码。
2.  创建一个项目并创建一个名为 sql 的顶级项目目录，并将定义表等的所有 sql 脚本放在该目录中。
3.  使用'内置设施：Service->jdbc:derby://??? 并使用出现的工具创建表并允许您输入必要的 sql。

就个人而言，（2）我发现最初是最好的方法。如果您有预先存在的带有 .sql 扩展名的 sql 脚本，只需在项目下打开它们，它们将被加载到 sql 编辑器中并可以在那里执行。

或者，可以使用 (3) 并保存生成的脚本。

无论如何，在编码开始之前可以创建很多东西。有很多方法可以做到这一点。我宁愿在编码之前创建所有内容——它使开发测试用例变得更加容易，并且使用前面的内容我不必跳进跳出 netbeans 来修改东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T06:08:42.540

当您下载 NetBeans 7.1.2 时，您将获得 glassfish 应用服务器的“全部”包。安装 w/glassfish 后，在 IDE 中，您应该能够选择 Services 选项卡 > Expand Databases，您应该会看到 Java DB。R. 单击 Java DB 并选择启动服务器。然后 R。再次单击并选择创建数据库。输入数据库名称、用户和密码。顺便说一句，我通常将 APP 用于用户和密码，因为这样它也成为默认模式，我不必为生产环境进行任何更改。

现在在 Java DB 组中，您应该会看到您创建的新数据库。R. 单击它并选择连接。您应该会在 Databases 组下看到一个连接项。展开此项，您应该会看到以粗体显示的 APP 架构，表明它是默认架构。展开它并 R。单击 Tables 选择 Create Table，您将获得一个帮助您填充表格的 ui。重复直到创建所有表。使用 ide 创建表的其他方法是右键单击表并选择执行命令，您可以在其中运行 DDL 来定义表模式。这是我创建数据库的方式，将我的脚本保存为 .sql 文件，这样我就可以删除数据库并根据需要重新运行它。

这是我用来在 derby 中创建表的 dbinit.sql 脚本的示例。

```
create table usertable (
    username varchar(128) NOT NULL CONSTRAINT USER_PK PRIMARY KEY ,
    password varchar(128) NOT NULL,
    email varchar(128) NOT NULL,
    firstname varchar(128) NOT NULL,
    lastname varchar(128) NOT NULL
);

create table grouptable(
    username varchar(128) NOT NULL,
    groupid  varchar(128) NOT NULL,
    CONSTRAINT GROUP_PK PRIMARY KEY(username, groupid),
    CONSTRAINT USER_FK FOREIGN KEY(username) REFERENCES usertable(username)
        ON DELETE CASCADE ON UPDATE RESTRICT
);

insert into usertable(username,password,firstname,lastname) 
    values ('admin', '21232f297a57a5a743894a0e4a801fc3','','');
insert into grouptable(username,groupid) values ('admin', 'USER');
insert into grouptable(username,groupid) values ('admin', 'ADMIN'); 
```

您可以通过右键单击数据库 R 轻松删除您创建的数据库。单击要删除的数据库并选择删除。并重用您的脚本来重新生成它。

![在此处输入图像描述](../Images/955131bbbcf8dfcdc7a15edfedfbc0ee.png)

希望这可以帮助！:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T08:26:05.217

如果您想在 Derby 中拥有基于文件的数据库，您应该下载[Derby](http://db.apache.org/derby/derby_downloads.html)

解压缩文件。在 bin 目录中运行 startNetworkServer.bat。它将启动 derby 服务器，该服务器将侦听端口号 1527 。

现在在您的 java 代码中：

> DriverName=org.apache.derby.jdbc.ClientDriver
> 
> ConnectionString =jdbc:derby://localhost:1527/schema_name;create=true

Morover，您也可以像我们在 oracle 中一样查询 derby DB。

运行位于 bin 目录中的 ij.bat。然后在提示符下：

> connect '在此处指定连接 url'

你可以像 oracle 提示一样触发 sql 查询。

如果您想在不同的端口上运行 derby 服务器，请在 cmd 处执行以下命令：

> 启动网络服务器.bat -p 1234

# javascript - 未在 iframe 上触发的事件

> ID：10666318
> 
> 赞同：0
> 
> 时间：2012-05-19T15:04:52.667
> 
> 标签：javascript, events, iframe

我在我的页面中包含了一个 iframe 并添加了一个这样的按键事件

```
<iframe src = 'mySrchere.com' onkeypress = 'alert(8)'></iframe> 
```

但是事件没有触发。为什么会发生这种情况..所以我不能用 iframe 附加事件？是因为它是另一个文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T15:12:37.747

问题是这样的：`iframe`标签不支持`onkeypress`. 您可以在此处查看适用的标签列表：http `onkeypress`: [//www.w3schools.com/jsref/event_onkeypress.asp](http://www.w3schools.com/jsref/event_onkeypress.asp)

# iphone - 连接 nsstring 并排除空值

> ID：10666322
> 
> 赞同：3
> 
> 时间：2012-05-19T15:05:00.700
> 
> 标签：iphone, objective-c, ios, xcode, nsstring

我正在尝试连接一些 NSString，但想排除那些为空的。我正在使用这个解决方案：

```
[NSString stringWithFormat:@"%@/%@/%@", three, two, one]; 
```

但是如果其中一个字符串为空怎么办？我想排除它。有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-19T15:09:39.750

你可以这样做：

```
[NSString stringWithFormat:@"%@/%@/%@", three ?: @"", two ?: @"", one ?: @""]; 
```

或者更好的可能是拥有一个可变字符串并构建它：

```
NSMutableString *string = [[NSMutableString alloc] initWithCapacity:0];
if (three) {
    [string appendFormat:@"%@/", three];
}
if (two) {
    [string appendFormat:@"%@/", two];
}
if (one) {
    [string appendFormat:@"%@/", one];
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-19T15:11:32.793

你可以有一个像

```
- (NSString *)stringOrEmptyString:(NSString *)string
{
    if (string)
        return string;
    else
        return @"";
} 
```

然后就做

```
[NSString stringWithFormat:@"%@/%@/%@", 
    [self stringOrEmptyString:three], 
    [self stringOrEmptyString:two], 
    [self stringOrEmptyString:one]]; 
```

**更新：**

或者，如果您不想在有空白值的情况下使用斜杠，您也可以执行以下操作：

```
NSMutableArray *array = [[NSMutableArray alloc] init];

if (one)
    [array addObject:one];
if (two)
    [array addObject:two];
if (three)
    [array addObject:three]; 
```

然后你可以得到你的 NSString 结果，比如：

```
[array componentsJoinedByString:@"/"] 
```

而且，当然，如果你在一个非 ARC 世界，你会想要一个 final `[array release]`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T15:12:46.350

你可以做一个循环并检查每个对象。

```
NSString *myString = [[NSString alloc] init];
NSArray *myObjects = [[NSArray alloc] initWithObjects:three,two,one,nil];
for(NSString *currentObject in myObjects) {
    if(![currentObject isEqualToString:@""]) myString = [NSString stringWithFormat:@"%@/%@",myString,currentObject];
} 
```

# php - onbeforeunload 仅在 onload 未完成时触发弹出窗口

> ID：10666323
> 
> 赞同：0
> 
> 时间：2012-05-19T15:05:04.437
> 
> 标签：php, javascript, onload, onbeforeunload

我试图找出用户是否在页面加载完成之前离开，但我在页面加载完成后遇到了一些问题，因为我不知道如何禁用它。这是搜索加载页面的一部分，因此当页面加载完成时，用户会被重定向到结果页面，但使用此脚本会询问用户是否要在搜索完成后离开页面。代码如下，适用于页面加载未完成和完成时。关于如何仅在页面加载完成之前触发此事件的任何想法，或者有没有其他方法可以实现这一点？

谢谢你。

```
<?php

$var = <<<EOF

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Title</title>
    <script language="JavaScript">
      window.onbeforeunload = confirmExit;
      function confirmExit()
      {
        return "message?";
      }
    </script>
</head>
<body>
asdf
</body>
</html>

EOF;

    print $var;
    flush();
    ob_flush();    
$i = 0;
while($i < 10){
    print $i.'<br />';
    flush();
    ob_flush();    
    sleep(1);
    $i++;
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T02:24:33.080

```
window.onload = function(){
  // Called once the page is fully loaded to make onbeforeunload a no-op 
  window.onbeforeunload = null;
} 
```

确保这是文档中的第一个函数，因此它首先被绑定。

# sorting - 如何在 python 中使用排序输出进行 izip 压缩？

> ID：10666328
> 
> 赞同：1
> 
> 时间：2012-05-19T15:05:36.043
> 
> 标签：sorting, iterator, python, yield

由于没有更好的名字，我想在 Python 中做一个“izip_sorted”。该函数的输入是许多迭代，每个迭代。输出是具有排序输出的单个迭代。

```
print([x for x in izip_sorted([0,4,8], [1,3,5], [12,12,42],[])]) 
```

**编辑：**这是一个简单的例子。真正的用途将是大约 40 个输入迭代，每个迭代大约有 100000 个元素。每个元素都是一个类，存储一个字典和实现`__cmp__`，以便可以对元素进行排序。数据太大，无法一次全部读取。

应该打印

```
[0, 1, 3, 4, 5, 8, 12, 12, 42] 
```

我有一个解决方案，但我是 python 新手，我不知道它非常*Pythonic*。这可以改进吗？只有 1 个元素发生变化的那种似乎很浪费......

```
def izip_sorted(*iterables):
    """
    Return an iterator that outputs the values from the iterables, in sort order
    izip_sort('ABF', 'D', 'CE') --> A B C D E F
    """
    iterators = [iter(it) for it in iterables]
    current_iterators = []
    for it in iterators:
        try:
            current_iterators.append((next(it), it))
        except StopIteration:
            pass
    current_iterators.sort(key=lambda x: x[0])
    while(current_iterators):
        yield current_iterators[0][0]
        try:
            current_iterators[0] = (next(current_iterators[0][1]), current_iterators[0][1])
            current_iterators.sort(key=lambda x: x[0])
        except StopIteration:
            current_iterators = current_iterators[1:] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T15:29:50.880

If the inputs are not sorted, then they must all be realized (essentially, turned from an iterable into a list). You can't sort without looking at the data. [LattyWare's solution](https://stackoverflow.com/a/10666382/25050) is the most pythonic.

If on the other hand, the input iterables are known to be sorted, you can use [heapq.merge](http://docs.python.org/library/heapq.html#heapq.merge):

```
>>> from heapq import merge
>>> merge(*iterables) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-19T15:11:06.177

我认为您正在寻找的是链接迭代的所有值，然后对它们进行排序。为此，我们可以简单地[结合](http://docs.python.org/library/functions.html#sorted)[`itertools.chain()`](http://docs.python.org/library/itertools.html#itertools.chain)和[内置](http://docs.python.org/library/functions.html#sorted)：[`sorted()`](http://docs.python.org/library/functions.html#sorted)

```
>>> from itertools import chain
>>> sorted(chain([0,4,8], [1,3,5], [12,12,42],[]))
[0, 1, 3, 4, 5, 8, 12, 12, 42] 
```

如果你有一个可迭代的列表，你会想要使用[`itertools.chain.from_iterable()`](http://docs.python.org/library/itertools.html#itertools.chain.from_iterable).

```
>>> iterables = [[0,4,8], [1,3,5], [12,12,42],[]]
>>> sorted(chain.from_iterable(iterables))
[0, 1, 3, 4, 5, 8, 12, 12, 42] 
```

编辑：对于您的确切问题，假设您知道输入列表已排序，并且每个输入列表的最后一项不会大于下一个列表的第一项，我们只需根据第一个值进行排序（使用`sorted()`'s关键功能）然后将它们链接起来。

```
>>> from operator import itemgetter
>>> iterables = [[0,4,8], [1,3,5], [12,12,42]]
>>> sorted(iterables, key=itemgetter(0))
[[0, 4, 8], [1, 3, 5], [12, 12, 42]]
>>> list(chain.from_iterable(sorted(iterables, key=itemgetter(0))))
[0, 4, 8, 1, 3, 5, 12, 12, 42] 
```

问题是，您提供给我们的数据不符合这些规则，因此答案不正确。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-19T15:11:07.567

这不是`zip`。`zip`将几个迭代压缩成一个可迭代的产生元组。您的功能很简单：

```
sorted(itertools.chain(*iterables)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-19T15:12:07.177

你也可以这样做：

```
sorted([item for iterable in iterables for item in iterable]) 
```

# c# - 如何使用 weka 中保存的模型将类分配给实例

> ID：10666332
> 
> 赞同：-1
> 
> 时间：2012-05-19T15:05:39.797
> 
> 标签：c#, java, data-mining, classification, weka

在我决定发布我遇到的问题之前，我已经阅读了很多帖子，但我仍然无法得到明确的答案。所以这里是：

使用 weka，我用我的训练数据训练了一个 NaiveBayesTree，如下所示：

```
(the values are simplified, and there's 20000 rows in the training set)
AF3,F7,F3,FC5,T7,T8,FC6,F4,F8,AF4,Action
-1,2,0,1,0,0,-1,-0,-0,-0,NEUTRAL
-2,1,0,2,-0,0,-0,0,-1,-0,RIGHT
-1,1,0,2,-0,0,-1,0,-1,-0,LEFT 
```

现在我想在我的程序中使用保存的模型来确定给定的 128 行测试数据中的类分布。对于这 128 行，我没有分配类（动作属性）。基本上我希望模型回答这个问题:)

所以测试行看起来像这样：

```
-1,1,0,2,-0,0,-1,0,-1,-0,? 
```

到目前为止，我已经想出了这个代码：

```
Classifier nbTree = (Classifier)SerializationHelper.read(Model) as NBTree;
Instances testInstances = TestSet();
testInstances.setClassIndex(10);

for (int i = 0; i < testInstances.numInstances(); i++)
{
    Instance instance = testInstances.instance(i);
    double assignedClass = nbTree.classifyInstance(instance);
    double[] distributionForInstance = nbTree.distributionForInstance(instance);
} 
```

但它总是为每个assignedClass 生成0，并且distributionForInstance 总是只有一个元素具有不同的值：

```
0,9412543332996
0,9412543332996
0,9412543332996
0,9412543332996
0,0577106296809467
0,315216251505317
0,9412543332996
0,9412543332996
0,315216251505317
0,315216251505317
0,863366140658458
0,9412543332996
0,9412543332996
0,9412543332996
0,9412543332996
0,783615619462732 
```

我现在转了两天，非常感谢一些帮助:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T07:46:43.090

我做了更多的研究，发现了这篇文章：[http](http://weka.wikispaces.com/Making+predictions) ://weka.wikispaces.com/Making+predictions ，它帮助我编写了以下代码：

```
Classifier nbTree = (Classifier)SerializationHelper.read(Model) as NBTree;
Instances testDataSet = new Instances(new BufferedReader(new FileReader(arff)));
testDataSet.setClassIndex(10);
Evaluation evaluation = new Evaluation(testDataSet);

for (int i = 0; i < testDataSet.numInstances(); i++)
{
    Instance instance = testDataSet.instance(i);
    evaluation.evaluateModelOnceAndRecordPrediction(nbTree, instance);
}

foreach (object o in evaluation.predictions().toArray())
{
    NominalPrediction prediction = o as NominalPrediction;
    if (prediction != null)
    {
        double[] distribution = prediction.distribution();
        double predicted = prediction.predicted();
    }
} 
```

此代码允许我检查在给定实例上预测的类以及所考虑的所有类的概率值。我希望这会对某人有所帮助:)

# java - LWJGL、openGL 多纹理

> ID：10666341
> 
> 赞同：1
> 
> 时间：2012-05-19T15:06:13.077
> 
> 标签：java, opengl, lwjgl

假设我有一个金字塔...我知道如何绘制它，并且我知道如何为整个金字塔设置纹理，但是如何为每面墙设置不同的纹理？

`GL11.glBindTexture(GL11.GL_TEXTURE_2D, texture.getTextureID());`我通过在之前添加这个来设置纹理`GL11.glBegin(GL11.GL_TRIANGLES);`

我尝试通过`GL11.glBindTexture(GL11.GL_TEXTURE_2D, texture.getTextureID());`在设置金字塔顶点坐标的每 3 行之后添加来绑定纹理，但`GL11.glBindTexture(GL11.GL_TEXTURE_2D, texture.getTextureID());`如果它介于`GL11.glBegin(GL11.GL_TRIANGLES);`和`GL11.glEnd();`

**编辑**

我分别画了每一面墙，它起作用了，但我不喜欢那样……这对我来说看起来很棘手……这是做我想做的事的好方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T16:49:26.220

我认为最好的方法是你所做的，分别绘制它们。您通常希望每个“批次”都指代一种材料。

如果你真的想要，你可以将四种纹理打包成一张纸，让每面墙用独特的 texcoords 挑选出其中的一部分，但这可能是不必要的复杂性，除非你的性能受到太多批次的影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T16:52:26.313

我认为在 GL 中没有直接的方法可以做到这一点。您可能希望将纹理组合成一张大图像，然后使用纹理坐标选择正确的子图像。

即使你让它适用于有限数量的纹理，例如通过切换纹理单元并在另一个上使用白色像素（或使用高级 GLSL 东西），它也可能无法扩展到性能：[http://origin- developer.nvidia.com/docs/IO/8230/BatchBatchBatch.pdf](http://origin-developer.nvidia.com/docs/IO/8230/BatchBatchBatch.pdf)

# python - 有没有一种有效的方法来只获取列表的 K 个组合？

> ID：10666343
> 
> 赞同：1
> 
> 时间：2012-05-19T15:06:48.117
> 
> 标签：python, algorithm

假设我有一个从 1 到 8 的简单列表，并且只想要包含 7 个字符的组合。我怎样才能有效地做到这一点？是否可以在不迭代整个列表的情况下做到这一点？

例如，这会执行整个列表：

```
import itertools
stuff = [1, 2, 3,4,5,6,7,8]
count = 0
for L in range(0, len(stuff)+1):
    for subset in itertools.combinations(stuff, L):
        print(subset)
        count = count + 1
print count #returns 256 results with 8 matching the 7 length 
```

如果您将 L in 更改`itertools.combinations(stuff, L):`为 7，那么它可以工作，但它会给您很多重复项（72 个结果，大多数是重复项）。我知道我可以从上面的代码中提取我想要的 7 项，但是对于更大的列表，我这样做似乎效率低下。有什么建议么？

在这种情况下，我正在寻找的最终结果是：

```
(1, 2, 3, 4, 5, 6, 7)
(1, 2, 3, 4, 5, 6, 8)
(1, 2, 3, 4, 5, 7, 8)
(1, 2, 3, 4, 6, 7, 8)
(1, 2, 3, 5, 6, 7, 8)
(1, 2, 4, 5, 6, 7, 8)
(1, 3, 4, 5, 6, 7, 8)
(2, 3, 4, 5, 6, 7, 8) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-19T15:15:46.297

`itertools.combinations`工作得很好：

```
>>> for c in itertools.combinations(stuff, 7):
...     print(c)
...     
(1, 2, 3, 4, 5, 6, 7)
(1, 2, 3, 4, 5, 6, 8)
(1, 2, 3, 4, 5, 7, 8)
(1, 2, 3, 4, 6, 7, 8)
(1, 2, 3, 5, 6, 7, 8)
(1, 2, 4, 5, 6, 7, 8)
(1, 3, 4, 5, 6, 7, 8)
(2, 3, 4, 5, 6, 7, 8) 
```

重复是由您`combinations`在循环中运行的事实引起的。

# angularjs - Angularjs：学习 ngChecked 的工作原理

> ID：10666345
> 
> 赞同：1
> 
> 时间：2012-05-19T15:07:17.210
> 
> 标签：angularjs

我尝试修改 ng-checked 示例，以便单击其中一个复选框会自动更新另一个。

单击 A，然后单击 B，然后再次单击 A，并没有达到我的预期。

我应该查看文档的哪一部分以了解正在发生的事情？

[http://jsfiddle.net/cantcopy/ev62U/](http://jsfiddle.net/cantcopy/ev62U/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-21T00:21:29.980

为什么不将两个复选框连接到同一个模型？

```
<div ng-app>
  A - Check me to check both: 
    <input type="checkbox" ng-model="master"><br/>
  B - Check me to check both:
    <input type="checkbox" ng-model="master">
</div>​ 
```

[http://jsfiddle.net/ev62U/133/](http://jsfiddle.net/ev62U/133/)

==================================================== =================================

解释你的小提琴：

`ng-checked`不更新模型，它只更新视图（复选框），一旦表达式发生变化。

单击 A：`master`更改为`true`，B 复选框正在查看其`ng-checked`值，因此也更新要检查的视图。

单击 B：`master2`更改为`false`，A 复选框正在查看其`ng-checked`值，因此也将视图更新为未选中。

单击A：`master`设置为`true`，这并不是真正的更改，因为值已经是`true`，因此它不会触发B的更新。

# android - Android 中的自定义字体，就像 iOS 中一样

> ID：10666346
> 
> 赞同：1
> 
> 时间：2012-05-19T15:07:21.773
> 
> 标签：android, fonts, webview

我正在编写基于 WebView 的 iOS。在 iOS 中，您可以加载自定义字体并在应用程序列表中设置它们。通过这种方式，您只需引用字体名称即可加载它们。我想知道是否有类似于 Android 的东西可以让我重用 ios 应用程序中使用的一些 Web 代码，并避免区分代码中的字体加载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T15:15:52.193

你检查过[http://www.barebonescoder.com/2010/05/android-development-using-custom-fonts/](http://www.barebonescoder.com/2010/05/android-development-using-custom-fonts/) 和[http://www.barebonescoder.com/2010/05/android-development-using-custom-字体/](http://www.barebonescoder.com/2010/05/android-development-using-custom-fonts/) ?

# javascript - 使用 Mocha 测试 javascript - 如何使用 console.log 调试测试？

> ID：10666349
> 
> 赞同：124
> 
> 时间：2012-05-19T15:07:52.220
> 
> 标签：javascript, node.js, mocha.js

我正在使用 javascript 测试运行程序“Mocha”。

我有一个失败的测试，所以我会使用`console.log`.

但是当测试运行时，没有输出（只有来自 Mocha 的测试结果）。似乎摩卡已经捕获并压制了我的`console.log`输出！

如何让 Mocha 显示我的输出？（对于失败的测试）？

**编辑：**

深表歉意！—`console.log`在测试期间确实有效！我一定期待它会抑制输出，而且我没有正确检查自己的代码。感谢您的回复。所以...话虽这么说...也许抑制通过测试的输出实际上会很好？唔...

在相关说明中：我想使用`console.log`，因为我在尝试让 Eclipse 调试器连接到 node.js 时遇到了很多麻烦。

我是唯一一个觉得这很棘手的人吗？你们如何调试node.js？使用调试器还是使用`console.log`语句？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-05-19T15:24:21.230

您正在使用哪些摩卡咖啡选项？

也许这与使用记者（-R）或ui（-ui）有关？

```
console.log(msg); 
```

在我的测试运行期间工作正常，虽然有时会有点愚蠢。大概是由于测试运行的异步性质。

这是我正在使用的选项（mocha.opts）：

```
--require should
-R spec
--ui bdd 
```

嗯..刚刚测试没有任何 mocha.opts 并且`console.log`仍然有效。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2013-11-07T20:13:34.637

如果您正在测试异步代码，则需要确保放置`done()`在该异步代码的回调中。在测试对 REST API 的 http 请求时，我遇到了这个问题。

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2016-02-28T20:49:20.450

您可能还会将您`console.log`的期望放在失败且未被捕获的期望之后，因此您的日志行永远不会被执行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-25T12:23:34.643

我对`node.exe`使用`mocha`.

就我而言，我通过删除一些默认的“node.exe”别名来解决它。

我正在使用[适用于 Windows](https://gitforwindows.org/) (2.29.2) 的 Git Bash，并且一些默认别名是从`/etc/profile.d/aliases.sh`,

```
 # show me alias related to 'node'
  $ alias|grep node
  alias node='winpty node.exe'` 
```

要删除别名，更新`aliases.sh`或干脆做

```
unalias node 
```

我不知道为什么对缓冲输出`winpty`有这种副作用，但是直接使用，我没有更多的标准输出问题。`console.info``node.exe`

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2020-05-17T02:46:42.530

使用[调试](https://www.npmjs.com/package/debug)库。

```
import debug from 'debug'
const log = debug('server'); 
```

用它：

```
log('holi') 
```

然后运行：

```
DEBUG=server npm test 
```

就是这样！

# c++ - 从指针 C++ 更改数据

> ID：10666352
> 
> 赞同：-1
> 
> 时间：2012-05-19T15:08:08.863
> 
> 标签：c++, function

在下面的截获函数中，我有`buff`一个指向缓冲区的指针，如何在不创建自己的新缓冲区的情况下更改数据？

```
int WINAPI OwnRecv(SOCKET s, char FAR *buff, int len, int flags)
{
    if(s == ServerSocket)
    {
        int received = pTrampolineRecv(s, buff, len, flags);

        if(received <= 0)
        {
            return received;
        }

            unsigned char ReceiveBuffer[1024]; // how can i avoid creatin this by changing buff directly?
        do_decrypt((const unsigned char *) buff, ReceiveBuffer, received, KeyTest, NULL);
        buff = (char *) ReceiveBuffer;

        return received;
    }
    return pTrampolineRecv(s, buff, len, flags);
} 
```

**更新**

我添加了我的`do_decrypt`功能

```
bool do_decrypt(const unsigned char *in, unsigned char *out, int inlen)
{
  int buflen, tmplen;

  if(!EVP_DecryptUpdate(&Decrypt_ctx, out, &buflen, in, inlen))
  {
        return false;
  }

  if(!EVP_DecryptFinal_ex(&Decrypt_ctx, out + buflen, &tmplen))
    {
        return false;
  }

  return true;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T15:15:52.107

如果`do_decrypt`不排除它，只需`buff`作为调用的第二个参数传入，并进行适当的转换以使此“工作”（编译）。

```
do_decrypt((const unsigned char *) buff, buff, received, KeyTest, NULL); 
```

这意味着您的输入和输出缓冲区是相同的，这可能在被调用函数中存在问题。

在这种情况下（以及在任何情况下），您还需要确保输出缓冲区中有足够的空间来保存解密的数据，否则会发生缓冲区溢出，您将遇到大麻烦。例如 - 在您的代码中，假设有 2048 个字节而不是 1024 个字节。似乎您应该（假设解密不会改变数据长度）允许`received`在 `ReceiveBuffer.

您对`ReceiveBuffer`to的分配`buff`仅具有本地范围：调用者将看不到此更改。在任何情况下，这样做都会使函数的使用变得非常混乱，因为它可能会也可能不会更改输入值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T15:13:43.990

在直接跳到 WinAPI 代码之前，你绝对应该看一下关于指针的 C++ 教程。

此外，不推荐使用 FAR 关键字。

最简单的想法是

```
do_decrypt ((const unsigned char*) buff, (unsigned char *) buff, received, KeyTest, NULL); 
```

所以基本上 -`buff`作为输入和输出变量。

但我不推荐使用它，因为我不知道`do_decrypt`函数是如何工作的——解密时你可能会弄乱自己的数据。仅在 do_decrypt 使用某种（可能更小的）内部缓冲区时才使用上述内容。

也许尝试进一步澄清这个问题，因为现在我无法就这个问题给你更多建议。

编辑：因此，由于其他答案，您可以在以下情况下使用上述解决方案：

1.  结果数据将适合输入缓冲区（输出大小 <= 输入大小）
2.  `do_decrypt`功能允许*就地*操作 - 因此，修改正在读取的数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T15:15:51.860

如果 Bartek 的答案不起作用——即，如果`do_decrypt`不支持对输入和输出使用相同的缓冲区——那么你需要将数据从`ReceiveBuffer`into复制`buff`，可能使用`strcpy`（如果它是空终止的）或`memcpy`（如果不）。

# c# - 通过 C# 管理 Excel

> ID：10666354
> 
> 赞同：0
> 
> 时间：2012-05-19T15:08:23.040
> 
> 标签：c#, excel

好的，这就是我要找的。我正在开发一个只处理 Excel 文件的应用程序（主要是 .xls，但可能会升级到 .xlsx）......现在，我正在寻找处理 2003 年的文件。

在我的应用程序中，我有一个“打开”按钮，用户单击并找到该文件。我已经做到了。

但是知道，我不知道在找到文件后如何处理它。我想删除一些行/列作为开始，然后我想做一些排序和计算。如果有人可以让我上路，我相信我可以通过它:)

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T15:28:50.827

For excel 2003 and earlier versions (xls) you can use [NPOI](http://npoi.codeplex.com/), it's open soruce and works well, here are some examples to get you started :

[http://www.leniel.net/2009/07/creating-excel-spreadsheets-xls-xlsx-c.html](http://www.leniel.net/2009/07/creating-excel-spreadsheets-xls-xlsx-c.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T15:12:09.783

处理excel时，基本上有两种选择

1) 办公室互操作程序集 [这是 MSDN 上的一篇文章](http://msdn.microsoft.com/en-us/library/ms173186%28v=vs.80%29.aspx)
2) 某种完全托管的库。（在 codeplex/google 或类似网站上搜索）

[这是关于服务器上的 SO 读写 excel 文件](https://stackoverflow.com/questions/3781824/read-write-excel-file-on-server)的类似问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T15:19:34.617

您可以使用 Microsoft.Jet.OLEDB.4.0 驱动程序来处理 xls 文件。例如，请参阅[这个问题](https://stackoverflow.com/questions/6789648/query-excel-sheet-in-c-sharp)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-19T23:13:08.967

如果你只是使用 Office 2007，你可以使用[http://epplus.codeplex.com](http://epplus.codeplex.com)

# vim - searchpair() 总是返回 0

> ID：10666355
> 
> 赞同：1
> 
> 时间：2012-05-19T15:08:23.670
> 
> 标签：vim

这似乎是一个愚蠢的问题，但它必须提出。

我刚刚尝试了 vim 的功能并遇到了“searchpair”。所以我开始使用它。

我使用该函数的缓冲区如下所示：

```
xyz
xyz
[
xyz
xyz
[
xyz
]
xyz
xyz
]
xyz
xyz 
```

我将光标定位在第一行。之后我更改为 Ex-mode 并执行了命令

```
echo searchpair('[', '', ']') 
```

放在`0`屏幕上。

显然`searchpair`没有在我的缓冲区中找到这对括号，所以我进一步使用了参数和缓冲区。然而它总是返回 0。

学习`:h searchpair()`对我也没有帮助。

也许你们中的某个专家可以帮助我获得一些智慧。

PS：我用

```
VIM - Vi IMproved 7.2 (2008 Aug 9, compiled Jul 12 2010 02:31:36) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T15:31:25.630

你忘了逃避你的`[]`.

这个版本：

```
:echo searchpair('\[','','\]') 
```

有效，但仅当光标位于要匹配的字符上时执行。

返回的数字是找到匹配项的行号。

此外，`:`不会让您进入“Ex 模式”，而是让您进入“命令行”模式。

# php - 如何将变量值从 php 发送到 jquery？

> ID：10666357
> 
> 赞同：0
> 
> 时间：2012-05-19T15:08:51.460
> 
> 标签：php, javascript, jquery, ajax, post

我需要在单击表中的链接时调用一个函数并传递一个变量以对数据库进行新查询。

在实践中，我在我的数据库表中显示了一个数据表。我想在新页面中查看它们（但只有我选择的行）。

`id`单击时，如何将锚元素属性中的 ID 发送到服务器（使用 jquery） ？

* * *

*意大利语版本*
Io necessito di richiamare una funzione sull' onclick di un link presente in una tabella e passargli un variabile per effettuare una nuova interrogazione al db。

来吧 posso 票价？

In pratica, mostro in una tabella dei dati di una tabella del db。e poi voglio visionarli in una nuova pagina (ma solo la riga scelta da me)

come posso fare per inviare al mio javascript (uso jquery) il valore id selezionato

* * *

这是我的代码：

```

```
<?php 
```

打印（”

制作表格的代码

<...
<td><a id=rich".$idrichiesta." href=\"#\" onclick=vediticket(".$idrichiesta.")> vedi 链接 < ./a>

...

`efunction vediticket(ID){
  $.ajax({
            type: "POST",
            url: "inc.miapagina.inc.php",
            data: "idric="+ID,

            success:function(msg){
                      ("#mydiv").html(msg);
                     }
           });
     }`e` 

            回答 #1

赞同：2

时间：2012-05-19T15:12:27.747

一个错字我发现你错过了 $

```
success:function(msg){
    $("#mydiv").html(msg);
} 
```

最后还有一个“`e”！

我建议先尝试清理您的代码！！！

            回答 #2

赞同：1

时间：2012-05-19T15:32:27.203

我真的不知道您的代码中所有这些符号是什么。您的代码很混乱，难以阅读。你需要清理它。而且我认为 JavaScript 中没有一个名为“efunction”的关键字。我也不知道你为什么把所有东西都放在 PHP`print()`中。这更难维护。

将此用于您的 td（而**不是**在 PHP 中`print()`，但您可以将其作为常规 html 使用，然后`<?php ?>`在属性中单独回显变量）：

```
<td><a href="#" id="rich<?php echo $idrichiesta; ?>">Click here</a></td> 
```

这在你的 JavaScript 文件中：

```
$('td a').click(function() {
    var ID = $(this).attr('id').replace('rich','');
    $.ajax({
        type: "POST",
        url: "inc.miapagina.inc.php",
        data: "idric=" + ID,
        success: function(msg) {
            $("#mydiv").html(msg); // what is #mydiv? you need to change this to the actual element you want the message to be put into
        }
    });
});​ 
```

也不要使用内联 JavaScript（`onclick=""`等）。这是不好的做法，因为它很难维护。像上面一样以编程方式注册事件，而不是内联，如果您要使用 jQuery。以编程方式注册事件（如上）是[Unobtrusive JavaScript](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)。

我希望这有帮助。

            回答 #3

赞同：0

时间：2012-05-19T15:27:15.500

your code is not very clear: you seem to have put everything inside a php print call? That's not a very good idea. Instead only open the <\?php tag when you really need dynamic content from the server. To answer your specific question, all you need to do is echo or print your php variable, just like you would when dynamically creating an html id for instance from a php variable:

```
<script type="text/javascript">

function vediticket(ID){
  $.ajax({
            type: "POST",
            url: "inc.miapagina.inc.php",
            data: "idric=" + <?php echo $idrichiesta;?>,
… 
```

hum correction sorry... obviously the php echo should be in the function call, not the function definition… of the inconvenience of doing two things at once: so keep your original code and when you call the function do:

```
vediticket(<?php echo $idrichiesta;?>); 
```

            回答 #4

赞同：0

时间：2012-05-19T15:19:12.213

```
<td id="rich<?php echo $idrichiesta ?>">

$('td').click(function()
{
var ID = this.id.replace('rich', '');
$.ajax({
            type: "POST",
            url: "inc.miapagina.inc.php",
            data: ({idric: ID}),

            success:function(msg){
                      $("#mydiv").html(msg);
                     }
           });
}); 
```

```

# c# - C# 在列表中查找对象

> ID：10666358
> 
> 赞同：2
> 
> 时间：2012-05-19T15:08:51.840
> 
> 标签：c#, list, find, exists

我有一个清单。我想知道如何编写 LINQ 来查找它们是否存在 id = "CLR" 的 MyTypes 的 obj。

我想知道它是否存在及其索引。因此，如果它存在，那么我可以通过它的索引替换为 MyTypes 的新对象，否则添加它。

我知道我可以通过迭代 List 中的项目来做到这一点，但这比使用 LINQ 语句要耗时。如果我错了，请纠正我。

任何人都可以提供帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-19T15:13:18.543

您实际上并不需要 LINQ。有方便的[`List<T>.FindIndex`](http://msdn.microsoft.com/en-us/library/x1xzf2ca%28v=vs.100%29.aspx)方法

```
List<Foo> foos = ...
int index = foos.FindIndex(foo => foo != null && foo.Id == "CLR");

if(index != -1)
{
     Foo replacement = ...
     foos[index] = replacement;
}
else
{
     Foo toAdd = ...
     foos.Add(toAdd);
} 
```

顺便说一句，您确定您实际上不需要某种查找表吗？您的使用模式表明您不是一个`Dictionary<string, Foo>`或类似的而不是一个列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T15:15:48.380

除非您打算在某个时候迭代整个集合，否则使用 Dictionary 可能更有意义。这样做将允许您按键定位项目，按键检查项目是否存在，并按键插入。不仅如此，这些类型的操作在字典上更快，因为它本质上是一个哈希表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T15:13:07.453

它可能是这样的：

```
MyType item = MyList.FirstOrDefault(x => x.id == "CLR");

if (item != null)
{
    int index = MyList.IndexOf(item);
    // do something
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-19T15:13:25.947

我认为你想要的是

```
var obj = myList.FirstOrDefault(x => x.id == "CLR");
if(obj != null)
{
    //do stuff here
} 
```

# synonym - LyX 中的同义词建议

> ID：10666359
> 
> 赞同：6
> 
> 时间：2012-05-19T15:08:53.653
> 
> 标签：synonym, lyx

**LyX**是否有任何软件包可以为Microsoft Word 之类的单词提供同义词建议？

**快速解决方案**--> 在这里下载您喜欢的词库的 .dat 和 .idx 文件[！](http://lyx.org/trac/browser/dictionaries/trunk/thes "点击我！")把它们放在一个文件夹中。从 Tool>Preferences>paths 设置该文件夹的同义词库路径

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T10:09:18.687

您正在寻找同义词库。是的，LyX 对此提供支持。阅读帮助 > 用户指南的第 6.15 节。

# random - AWS DynamoDB - 随机选择记录/项目？

> ID：10666364
> 
> 赞同：44
> 
> 时间：2012-05-19T15:09:18.723
> 
> 标签：random, amazon-web-services, record, amazon-dynamodb

任何想法如何从 DynamoDB 表中随机选择项目/记录？我不相信 API 中对此有任何规定。

我考虑过维护一个 NumericId|MyOtherKey ("NumericIdTable") 表，然后生成一个介于 0 和我拥有的记录总数之间的随机数，然后从 NumericIdTable 获取该项目，但从长远来看它不会起作用。

欢迎提出想法/想法。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-05-20T23:45:46.077

我想出的一种方法是从 DynamoDB 表中选择一个随机项目：

1.  在表中所有可能的 RangeKey 上生成一个随机 RangeKey
2.  使用此 RangeKey 和 RangeKeyCondition GreaterThan 以及限制为 1 查询表

例如，如果您使用 UUID 作为 RangeKey 的标识符，您可以获得如下所示的随机项目

```
RandomRangeKey = new UUID
RandomItem = Query( "HashKeyValue": "KeyOfRandomItems",
                    "RangeKeyCondition": { "AttributeValueList":
                                "RandomRangeKey",
                                "ComparisonOperator":"GT"}, 
                    "Limit": 1 ) 
```

这样您就可以得到一个随机项目并且只消耗 1 个读取容量。

通过生成比表中使用的最小 UUID 更小的 UUID，有可能错过对随机变量的第一次查询。这个机会随着表的扩大而缩小，您可以使用 SmallerThan 比较在同一个随机键上轻松发送另一个请求，从而确保随机项目的命中。

* * *

如果您的 Tabledesign 不允许可随机化的 RangeKey，您可以按照您的方法创建一个单独的 RandomItem 表并将 ID 存储在可随机化的 RangeKey 下。一个可能的表结构是

```
*RandomItemTable
   TableName - HashKey
   UUID - Rangekey
   ItemId 
```

请记住，对于这种方法，您需要管理原始表和随机表之间的冗余。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2014-12-09T21:43:42.700

如果您使用 GUID 作为表的哈希键，则可以执行以下操作：

```
var client = new AmazonDynamoDBClient();

var lastKeyEvaluated = new Dictionary<string, AttributeValue>() 
{ 
    { "YOUR_HASH_KEY", new AttributeValue(Guid.NewGuid().ToString()) } 
};

var request = new ScanRequest()
{
    TableName = YOUR_TABLE_NAME,
    ExclusiveStartKey = lastKeyEvaluated,
    Limit = 1
};
var response = client.Scan(request); 
```

这每次都会给你一个随机记录，因为它会生成一个随机 GUID 作为 lastKeyEvaluated。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-20T03:36:04.477

天真的方法是 1）使用描述表调用来获取该表中的 N（总行数） 2）在 1 和 N 之间选择一个随机数 i 3）扫描。停下来，直到你看到 i 行

我正在考虑一种更好的方法来做到这一点。当我有一个好的答案时，我会更新。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-13T19:33:24.790

对于某些用例，我会推荐下一种方法：

1.  创建一个扫描所有 dynamodb 表并将“pk”和“sk”保存到单独文件的脚本。

2.  将 lambda 层中的所有“pk”和“sk”对保存为本地依赖项（如果使用 nodejs，请搜索“package.json 中的本地依赖项”）。

3.  在 lambda 中导入本地依赖项并选择一个随机项。

4.  定期运行脚本以获取本地依赖项中一组令人耳目一新的“pk”和“sk”。

我认为如果您没有非常大的 dynamodb 表并且不需要经常包含新的“pk”和“sk”，这种方法就足够了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-13T06:27:14.500

一种简单有效的方法：

1.  检索表中的所有项目。由于 DynamoDB 限制只能获取 1MB 的数据，因此在此操作中**仅**`ProjectionExpression`用于检索您的主分区键。
***   从上面的结果中，您将获得项目的总数。现在，只需生成一个介于 0 和项目计数之间的随机数。我们称这个随机数为**n**。*   从 1 的结果中，取第**n**个项目，这将是该随机项目的主分区键值。*   使用您刚刚计算的随机项的主分区键值执行另一个 DynamoDB 查询，以获取所有必要的列值。**

# ruby-on-rails - 如何在 RefineryCMS 测试中登录用户？

> ID：10666365
> 
> 赞同：2
> 
> 时间：2012-05-19T15:09:19.330
> 
> 标签：ruby-on-rails, rspec2, refinerycms

我正在refineryCMS 中开发一个自定义控制器，它放置在应用程序的根目录中

```
class ExchangeController < ApplicationController
    def exchange
    end
end 
```

它工作正常，但要对其进行测试，我需要像这样登录炼油厂用户

```
describe "Exchange action" do
   login_refinery_user
   it 'should return a 200' do
    get '/exchange' 
    response.code.should == '200'
   end
end 
```

但它只是不起作用:(（未定义的局部变量或方法`login_refinery_user'）没有调用该登录方法我得到找不到表'refinery_roles'

有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T23:57:25.460

对于 Refinery 2，所需要的只是 spec/support/devise.rb 中的以下几行：

```
RSpec.configure do |config|
  config.include Devise::TestHelpers, :type => :controller
  config.extend  ::Refinery::Testing::ControllerMacros::Authentication, :type => :controller
  config.extend  ::Refinery::Testing::RequestMacros::Authentication, :type => :request

end 
```

[现在“login_refinery_user”将与来自https://github.com/resolve/refinerycms/blob/master/testing/lib/refinery/testing/controller_macros/authentication.rb](https://github.com/resolve/refinerycms/blob/master/testing/lib/refinery/testing/controller_macros/authentication.rb)和 [https://github.com](https://github.com/resolve/refinerycms/blob/master/testing/lib/refinery/testing/request_macros/authentication.rb)的其他助手一起可用 [/resolve/refinerycms/blob/master/testing/lib/refinery/testing/request_macros/authentication.rb](https://github.com/resolve/refinerycms/blob/master/testing/lib/refinery/testing/request_macros/authentication.rb)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T16:16:43.750

这就是我使用 Refinery 1.0.9 的方式，可能需要针对 Refinery 2 进行调整

创建一个名为“controller_macros.rb”的文件并将其放在 spec/support/refinery/ 下

在 controller_macros.rb 中定义 login_refinery_user

```
module Refinery
  module ControllerMacros
    def login_refinery_user
      before (:each) do
        @refinery_user = Factory(:refinery_user)
        @request.env["devise.mapping"] = Devise.mappings[:admin]
        sign_in @refinery_user
      end
    end
  end
end 
```

在您的 factory.rb 文件中确保您有以下两个工厂

```
factory :user do
  sequence(:username) { |n| "person#{n}" }
  sequence(:email) { |n| "person#{n}@cucumber.com" }
  password  "greenandjuicy"
  password_confirmation "greenandjuicy"
end

factory :refinery_user, :parent => :user do
  roles { [ Role[:refinery] ] }

  after_create do |user|
    Refinery::Plugins.registered.each_with_index do |plugin, index|
      user.plugins.create(:name => plugin.name, :position => index)
    end
  end
end 
```

在您的 spec_helper.rb 文件中，将控制器宏模块包含到您的控制器测试中，并确保您有 Devise 测试助手

```
RSpec.configure do |config|
  config.include ::Devise::TestHelpers, :type => :controller
  config.extend  ::Refinery::ControllerMacros, :type => :controller
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-15T12:23:23.527

帮助我的是确保您将插件/引擎名称添加到当前登录用户允许访问的插件列表中：

```
refinery_login_with :refinery_user 

before do
  logged_in_user.plugins = logged_in_user.plugins | %w(<plugin name>)
end 
```

# java - onClick 找不到它的方法

> ID：10666366
> 
> 赞同：0
> 
> 时间：2012-05-19T15:09:27.443
> 
> 标签：java, android

当我单击一个按钮时，它的方法不会被调用，但会引发异常。为什么？

```
Caused by: java.lang.NoSuchMethodException: myMethod [class android.view.View] 
```

主.xml：

```
android:onClick="myMethod" 
```

活动：

```
public class MyActivity extends Activity {
//onCreate etc

    public void myMethod() {
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T15:10:30.610

```
 public void myMethod(View view) {

    } 
```

你忘了`View`参数`myMethod`

如果你没有视图，那么你可以调用方法`myMethod(null)`

# c# - 崩溃和可见有什么区别？

> ID：10666369
> 
> 赞同：-1
> 
> 时间：2012-05-19T15:09:49.167
> 
> 标签：c#, wpf

> **可能重复：**
> [Visibility.Collapsed 和 Visibility.Hidden 之间的区别](https://stackoverflow.com/questions/886742/difference-between-visibility-collapsed-and-visibility-hidden)

我正在进行本地化。我无法理解可见性和崩溃的含义。

```
 public Visibility CompanyModificationAllowed
    {
        get
        {
            if ((User.Priviledges & PriviledgeConstants.USER) != 0)
                return Visibility.Visible;

            return Visibility.Collapsed;
        }
    } 
```

简要说明。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T15:12:40.563

*   可见：元素可见。
*   Collapsed：元素没有，布局甚至没有空间。
*   隐藏：元素不可见，但布局为其保留空间。

[http://msdn.microsoft.com/en-us/library/system.windows.visibility.aspx](http://msdn.microsoft.com/en-us/library/system.windows.visibility.aspx)

# jsf - p:fileUpload 在哪里保存我的文件？

> ID：10666370
> 
> 赞同：5
> 
> 时间：2012-05-19T15:09:58.207
> 
> 标签：jsf, file-upload, glassfish, primefaces

我的页面上有 ap:fileUpload 功能，每次上传文件时，我似乎都无法在 web.xml 文件中指定的文件夹中找到它。

我已将以下 jar 添加到我的库中：primefaces-3.2.jar commons-io-2.3.jar commons-fileupload-1.2.2.jar

这是我的 web.xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="http://java.sun.com/xml/ns/javaee"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
     version="3.0">

    <filter> 
        <filter-name>PrimeFaces FileUpload Filter</filter-name> 
        <filter-class>org.primefaces.webapp.filter.FileUploadFilter</filter-class> 
    <init-param> 
        <param-name>uploadDirectory</param-name> 
        <param-value>C:\Users\SomeUser\Documents\NetBeansProjects\System\Upload\</param-value> 
    </init-param> 
    <init-param> 
        <param-name>thresholdSize</param-name> 
        <param-value>1000000</param-value> 
    </init-param> 
    </filter>

    <filter-mapping>
        <filter-name>PrimeFaces FileUpload Filter</filter-name>
        <servlet-name>Faces Servlet</servlet-name>
    </filter-mapping>

    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>

    <error-page>
        <error-code>404</error-code>
        <location>/404.jsf</location>
    </error-page>

    <context-param>  
    <param-name>primefaces.THEME</param-name>  
    <param-value>aristo</param-value>  
</context-param>  

</web-app> 
```

我正在使用以下产品：PrimeFaces 3.2、JSF 2.0 和 GlassFish 3.1.1

任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-19T15:16:24.447

它默认将其存储在由`java.io.tmpdir`系统属性标识的系统默认临时目录中。您可以使用`UploadedFile#getContents()`或`UploadedFile#getInputStream()`获取文件内容并将其写入所需的文件夹。但是您也可以通过过滤器的初始化参数来更改默认上传位置。

把它放在`<filter>`文件上传过滤器的元素中：

```
<init-param>
    <param-name>uploadDirectory</param-name>
    <param-value>/path/to/uploads</param-value>
</init-param> 
```

请注意，当您运行 Windows 时，它将与启动 Web 服务器的磁盘相关。所以如果是`C:\`，那么上面的 init 参数实际上会解析为`C:\path\to\uploads`. 您还应该确保该文件夹已经预先准备好，因此存在并且是可写的。

# java - 将程序转换为小程序

> ID：10666372
> 
> 赞同：1
> 
> 时间：2012-05-19T15:10:15.540
> 
> 标签：java, applet

你好朋友，我想在我们的网站上添加一个滑块益智游戏，用于教育目的。我们找到了一个源代码，但它是一个程序而不是一个小程序。我们如何将它转换为一个工作小程序？该程序是

```
import javax.swing.JFrame;
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.event.*;
///////////////////////////////////////////// class SlidePuzzle
class SlidePuzzle {
    //============================================= method main
    public static void main(String[] args) {
        JFrame window = new JFrame("Slide Puzzle");
        window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        window.setContentPane(new SlidePuzzleGUI());
        window.pack();  // finalize layout
        window.show();  // make window visible
        window.setResizable(false);
    }//end main
}//endclass SlidePuzzle

/////////////////////////////////////////////////// class SlidePuzzleGUI
// This class contains all the parts of the GUI interface
class SlidePuzzleGUI extends JPanel {
    //=============================================== instance variables
    private GraphicsPanel    _puzzleGraphics;
    private SlidePuzzleModel _puzzleModel = new SlidePuzzleModel();
    //end instance variables

    //====================================================== constructor
    public SlidePuzzleGUI() {
        //--- Create a button.  Add a listener to it.
        JButton newGameButton = new JButton("New Game");
        newGameButton.addActionListener(new NewGameAction());

        //--- Create control panel
        JPanel controlPanel = new JPanel();
        controlPanel.setLayout(new FlowLayout());
        controlPanel.add(newGameButton);

        //--- Create graphics panel
        _puzzleGraphics = new GraphicsPanel();

        //--- Set the layout and add the components
        this.setLayout(new BorderLayout());
        this.add(controlPanel, BorderLayout.NORTH);
        this.add(_puzzleGraphics, BorderLayout.CENTER);
    }//end constructor

    //////////////////////////////////////////////// class GraphicsPanel
    // This is defined inside the outer class so that
    // it can use the outer class instance variables.
    class GraphicsPanel extends JPanel implements MouseListener {
        private static final int ROWS = 3;
        private static final int COLS = 3;

        private static final int CELL_SIZE = 80; // Pixels
        private Font _biggerFont;

        //================================================== constructor
        public GraphicsPanel() {
            _biggerFont = new Font("SansSerif", Font.BOLD, CELL_SIZE/2);
            this.setPreferredSize(
                   new Dimension(CELL_SIZE * COLS, CELL_SIZE*ROWS));
            this.setBackground(Color.black);
            this.addMouseListener(this);  // Listen own mouse events.
        }//end constructor

        //=======================================x method paintComponent
        public void paintComponent(Graphics g) {
            super.paintComponent(g);
            for (int r=0; r<ROWS; r++) {
                for (int c=0; c<COLS; c++) {
                    int x = c * CELL_SIZE;
                    int y = r * CELL_SIZE;
                    String text = _puzzleModel.getFace(r, c);
                    if (text != null) {
                        g.setColor(Color.gray);
                        g.fillRect(x+2, y+2, CELL_SIZE-4, CELL_SIZE-4);
                        g.setColor(Color.black);
                        g.setFont(_biggerFont);
                        g.drawString(text, x+20, y+(3*CELL_SIZE)/4);
                    }
                }
            }
        }//end paintComponent

        //======================================== listener mousePressed
        public void mousePressed(MouseEvent e) {
            //--- map x,y coordinates into a row and col.
            int col = e.getX()/CELL_SIZE;
            int row = e.getY()/CELL_SIZE;

            if (!_puzzleModel.moveTile(row, col)) {
                // moveTile moves tile if legal, else returns false.
                Toolkit.getDefaultToolkit().beep();
            }

            this.repaint();  // Show any updates to model.
        }//end mousePressed

        //========================================== ignore these events
        public void mouseClicked (MouseEvent e) {}
        public void mouseReleased(MouseEvent e) {}
        public void mouseEntered (MouseEvent e) {}
        public void mouseExited  (MouseEvent e) {}
    }//end class GraphicsPanel

    ////////////////////////////////////////// inner class NewGameAction
    public class NewGameAction implements ActionListener {
        public void actionPerformed(ActionEvent e) {
            _puzzleModel.reset();
            _puzzleGraphics.repaint();
        }
    }//end inner class NewGameAction

}//end class SlidePuzzleGUI

class SlidePuzzleModel {
    private static final int ROWS = 3;
    private static final int COLS = 3;

    private Tile[][] _contents;  // All tiles.
    private Tile     _emptyTile; // The empty space.

    //================================================= constructor
    public SlidePuzzleModel() {
        _contents = new Tile[ROWS][COLS];
        reset();               // Initialize and shuffle tiles.
    }//end constructor

    //===================================================== getFace
    // Return the string to display at given row, col.
    String getFace(int row, int col) {
        return _contents[row][col].getFace();
    }//end getFace

    //======================================================= reset
    // Initialize and shuffle the tiles.
    public void reset() {
        for (int r=0; r<ROWS; r++) {
            for (int c=0; c<COLS; c++) {
                _contents[r][c] = new Tile(r, c, "" + (r*COLS+c+1));
            }
        }
        //--- Set last tile face to null to mark empty space
        _emptyTile = _contents[ROWS-1][COLS-1];
        _emptyTile.setFace(null);

        //-- Shuffle - Exchange each tile with random tile.
        for (int r=0; r<ROWS; r++) {
            for (int c=0; c<COLS; c++) {
                exchangeTiles(r, c, (int)(Math.random()*ROWS)
                                  , (int)(Math.random()*COLS));
            }
        }
    }//end reset

    //==================================================== moveTile
    // Move a tile to empty position beside it, if possible.
    // Return true if it was moved, false if not legal.
    public boolean moveTile(int r, int c) {
        //--- It's a legal move if the empty cell is next to it.
        return checkEmpty(r, c, -1, 0) || checkEmpty(r, c, 1, 0)
            || checkEmpty(r, c, 0, -1) || checkEmpty(r, c, 0, 1);
    }//end moveTile

    //================================================== checkEmpty
    // Check to see if there is an empty position beside tile.
    // Return true and exchange if possible, else return false.
    private boolean checkEmpty(int r, int c, int rdelta, int cdelta) {
        int rNeighbor = r + rdelta;
        int cNeighbor = c + cdelta;
        //--- Check to see if this neighbor is on board and is empty.
        if (isLegalRowCol(rNeighbor, cNeighbor) 
                  && _contents[rNeighbor][cNeighbor] == _emptyTile) {
            exchangeTiles(r, c, rNeighbor, cNeighbor);
            return true;
        }
        return false;
    }//end checkEmpty

    //=============================================== isLegalRowCol
    // Check for legal row, col
    public boolean isLegalRowCol(int r, int c) {
        return r>=0 && r<ROWS && c>=0 && c<COLS;
    }//end isLegalRowCol

    //=============================================== exchangeTiles
    // Exchange two tiles.
    private void exchangeTiles(int r1, int c1, int r2, int c2) {
        Tile temp = _contents[r1][c1];
        _contents[r1][c1] = _contents[r2][c2];
        _contents[r2][c2] = temp;
    }//end exchangeTiles

    //=================================================== isGameOver
    public boolean isGameOver() {
        for (int r=0; r<ROWS; r++) {
            for (int c=0; c<ROWS; c++) {
                Tile trc = _contents[r][c];
                return trc.isInFinalPosition(r, c);
            }
        }

        //--- Falling thru loop means nothing out of place.
        return true;
    }//end isGameOver
}//end class SlidePuzzleModel

////////////////////////////////////////////////////////// class Tile
// Represents the individual "tiles" that slide in puzzle.
class Tile {
    //============================================ instance variables
    private int _row;     // row of final position
    private int _col;     // col of final position
    private String _face;  // string to display 
    //end instance variables

    //==================================================== constructor
    public Tile(int row, int col, String face) {
        _row = row;
        _col = col;
        _face = face;
    }//end constructor

    //======================================================== setFace
    public void setFace(String newFace) {
        _face = newFace;
    }//end getFace

    //======================================================== getFace
    public String getFace() {
        return _face;
    }//end getFace

    //=============================================== isInFinalPosition
    public boolean isInFinalPosition(int r, int c) {
        return r==_row && c==_col;
    }//end isInFinalPosition
}//end class Tile 
```

我试图像小程序一样编辑它，但它没有被初始化

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.event.*;
import java.io.*;
import java.awt.*;
import java.util.*;
import java.applet.*;
import javax.swing.*;
import java.awt.event.*;
import javax.swing.event.*;
/////////////////////////////////;////////////////// class SlidePuzzleGUI
// This class contains all the parts of the GUI interface
class SlidePuzzleGUI  extends JApplet {
    //=============================================== instance variables
    private GraphicsPanel    _puzzleGraphics;
    private SlidePuzzleModel _puzzleModel = new SlidePuzzleModel();
    //end instance variables
 JPanel controlPanel = new JPanel();

    //====================================================== constructor
    public SlidePuzzleGUI() {
        //--- Create a button.  Add a listener to it.
        JButton newGameButton = new JButton("New Game");
        newGameButton.addActionListener(new NewGameAction());

        //--- Create control panel

        controlPanel.setLayout(new FlowLayout());
        controlPanel.add(newGameButton);

        //--- Create graphics panel
        _puzzleGraphics = new GraphicsPanel();

        //--- Set the layout and add the components
        this.setLayout(new BorderLayout());
        this.add(controlPanel, BorderLayout.NORTH);
        this.add(_puzzleGraphics, BorderLayout.CENTER);
    }//end constructor

    //////////////////////////////////////////////// class GraphicsPanel
    // This is defined inside the outer class so that
    // it can use the outer class instance variables.
    class GraphicsPanel extends JPanel implements MouseListener {
        private static final int ROWS = 3;
        private static final int COLS = 3;

        private static final int CELL_SIZE = 80; // Pixels
        private Font _biggerFont;

        //================================================== constructor
        public GraphicsPanel() {
            _biggerFont = new Font("SansSerif", Font.BOLD, CELL_SIZE/2);
            this.setPreferredSize(
                   new Dimension(CELL_SIZE * COLS, CELL_SIZE*ROWS));
            this.setBackground(Color.black);
            this.addMouseListener(this);  // Listen own mouse events.
        }//end constructor

        //=======================================x method paintComponent
        public void paintComponent(Graphics g) {
            super.paintComponent(g);
            for (int r=0; r<ROWS; r++) {
                for (int c=0; c<COLS; c++) {
                    int x = c * CELL_SIZE;
                    int y = r * CELL_SIZE;
                    String text = _puzzleModel.getFace(r, c);
                    if (text != null) {
                        g.setColor(Color.gray);
                        g.fillRect(x+2, y+2, CELL_SIZE-4, CELL_SIZE-4);
                        g.setColor(Color.black);
                        g.setFont(_biggerFont);
                        g.drawString(text, x+20, y+(3*CELL_SIZE)/4);
                    }
                }
            }
        }//end paintComponent

        //======================================== listener mousePressed
        public void mousePressed(MouseEvent e) {
            //--- map x,y coordinates into a row and col.
            int col = e.getX()/CELL_SIZE;
            int row = e.getY()/CELL_SIZE;

            if (!_puzzleModel.moveTile(row, col)) {
                // moveTile moves tile if legal, else returns false.
                Toolkit.getDefaultToolkit().beep();
            }

            this.repaint();  // Show any updates to model.
        }//end mousePressed

        //========================================== ignore these events
        public void mouseClicked (MouseEvent e) {}
        public void mouseReleased(MouseEvent e) {}
        public void mouseEntered (MouseEvent e) {}
        public void mouseExited  (MouseEvent e) {}
    }//end class GraphicsPanel

    ////////////////////////////////////////// inner class NewGameAction
    public class NewGameAction implements ActionListener {
        public void actionPerformed(ActionEvent e) {
            _puzzleModel.reset();
            _puzzleGraphics.repaint();
        }
    }//end inner class NewGameAction
 public void init() { System.out.println("Applet initializing");
SlidePuzzleGUI d = new SlidePuzzleGUI();
controlPanel.add(d);
}
public void start() {
System.out.println("Applet starting");
}
public void stop() {
System.out.println("Applet stopping");
}
public void destroy() {
System.out.println("Applet destroyed");
}
public static void main(String args[]){
JFrame frame = new JFrame("Code Converter");
frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
SlidePuzzleGUI a = new SlidePuzzleGUI();
a.init();

frame.setContentPane(new SlidePuzzleGUI());
frame.pack();
frame.show();

}//end class SlidePuzzleGUI
} 
```

**我做错了什么？我需要做什么才能正确转换它？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T15:13:36.773

[除了让您阅读有关如何创建 GUI 和 JApplet 的Oracle Swing Applet 教程](http://docs.oracle.com/javase/tutorial/deployment/applet/index.html)，然后重新编写或修改此代码以成为Applet之外，我担心在这里给出一个简单的总结涉及的内容太多。

至于你做错了什么

*   你有任何错误或例外吗？
*   你的代码目前在做什么？
*   您是否有任何调试代码可以帮助您检查程序运行时的状态？
*   您似乎还没有向小程序的 contentPane 添加任何内容，并且似乎正在尝试`init()`直接调用该方法。这表明你还没有看过教程——你应该在来这里之前先做这件事。

我可以说你需要一个扩展 JApplet 的类，你不需要或有一个 main 方法，你会想要将你的 GUI 用于创建 JPanel，你会经常在你的gui类的构造函数，然后在applet的`init()`方法中将其添加到JApplet的contentPane中，但是细节太重要了，不能忽略。再次阅读教程，如果您遇到困难并有特定的可回答问题，请再次阅读。

请注意，通常您会希望避免使用“借用”代码，尤其是在游戏早期。最好研究代码，然后使用从下载的代码中获得的想法从头开始编写自己的程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T00:46:26.177

> 想在我们的网站上添加一个滑块益智游戏..

不要对代码进行任何转换。相反，将类添加到 Jar，编写 JNLP 文件以启动它（类似于 applet HTML），并为用户提供一个按钮`Play Slider Puzzle`

当（/如果）用户决定点击链接时，应用程序。将使用[Java Web Start](https://stackoverflow.com/tags/java-web-start/info)直接从站点下载和启动。

这种方法将提供更好的用户体验，部署问题更少。

# php - 在 Joomla 网站后面集成 CRM 或 Webapp

> ID：10666378
> 
> 赞同：0
> 
> 时间：2012-05-19T15:10:36.943
> 
> 标签：php, security, joomla, user-management

我试图弄清楚如何做到这一点，但我似乎无法找到解决方案。

我用 php/sql 和 java 编写了一个 crm/客户端管理软件。它适用于自己的数据库等，它是从头开始编写的，所有手写代码。

我想要做的是使用 joomla 网站作为导航的前端 + 访问者浏览公共部分等

加上两种不同类型的注册用户（免费和付费）能够访问 webapp 的某些部分，主要是不同的 .php 文件

我应该从哪里开始寻找？
我可能会在 joomla 页面的 html 模块中集成一些部分（如配置文件管理等）。
我还可以在 joomla 导航中包含指向 php 文件的链接，以便它们整体显示。但是，我需要能够使用 joomla 用户帐户保护那些 php，这样即使有人拥有链接也无法访问它们，除非登录

有任何想法吗？指针？指南？抱歉有点含糊，但我真的迷路了，不知道如何开始

提前感谢

加法：有没有什么办法可以强制joomla创建一个空白页？
没有菜单，没有 css，只有 html 和 body 标签，然后我可以`include`把我的整个 php 文件放在那里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T15:44:28.090

[您应该使用位于此处的](http://api.joomla.org/li_Joomla-Platform.html)Joomla Api

该文档就是您所需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T23:46:45.057

一个简单的解决方案是通过 iframe 拉入您的 crm。您可以创建一篇文章并将 html（即 iframe）放在那里，或者您可以创建一个做同样事情的 Joomla 组件。

要解决向用户显示受限页面的问题，您可以使用 Joomla 的本地用户管理来限制谁可以看到哪些页面（如果您在文章中放置 iframe）。同样，在使用 Joomla 的 MVC 框架进行开发时，您将能够执行相同的过程。

# xml - xpath，计数元素错误：“结果是包含 1 个元素的 NodeSet”

> ID：10666383
> 
> 赞同：4
> 
> 时间：2012-05-19T15:11:06.650
> 
> 标签：xml, xpath

我开始在 w3cschool 学习 xpath。我正在尝试评估游戏中的玩家数量。（所以计算屏幕名称和 text() 元素/属性）

这是我的示例 xml：

```
<game>
    <info>
        <name>My Game</name>
        <description>A <i>very</i> interesting game.</description>
        <started>2012-03-01T18:00:00Z</started>
        <players number="2">
            <screenname player="1">Alice</screenname>
            <screenname player="2">Bob</screenname>
        </players>
        <rounds>2</rounds>
        <winner player="2"/>
    </info>
</game> 
```

我使用的 xpath 查询是：

```
//game/info/players[count(.//screenname/text())] 
```

但我只得到：

```
"Result is a NodeSet containing 1 element" 
```

（工具： http: [//www.whitebeam.org/library/guide/TechNotes/xpathtestbed.rhtm](http://www.whitebeam.org/library/guide/TechNotes/xpathtestbed.rhtm)）

是什么导致了这个错误？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-19T15:19:58.237

您的 XPath 查询应该是：

```
count(/game/info/players/screenname) 
```

您现在使用的 XPath 要求所有`game/info/players`具有非零数量`screenname/text()`后代节点的节点。由于只有一个`players`元素，因此生成的节点集仅包含一个元素。

请记住，XPath 是一系列`axis::nodetest[predicate]`由步骤 ( ) 分隔的轴节点测试谓词表达式 ( `/`)。只有axis-nodetest是发送到下一步的结果集的一部分——谓词永远不会出现在结果集中，因为它只用于过滤。

# ios - 为 Apple Developer Program 创建新 Apple ID 的优势

> ID：10666387
> 
> 赞同：2
> 
> 时间：2012-05-19T15:11:28.067
> 
> 标签：ios, iphone, iphone-developer-program

我正在开发一个 iPhone 应用程序。
我有一个问题要问注册 Apple Developer Program 的人。

您是否为 Apple Developer Program 创建了新的 Apple ID？
或者您是否使用了与购买 iTunes 项目（音乐、应用程序等）相同的 Apple ID。

我应该创建一个新的 Apple ID 还是使用现有的 Apple ID？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T15:17:24.823

如果希望保持井井有条，一个好主意是创建另一个更“面向业务”的 Apple ID，但最终它是您的选择。

# jquery - Rails 3 - 资产/javascripts 中的 jquery 未在页面加载时运行

> ID：10666395
> 
> 赞同：1
> 
> 时间：2012-05-19T15:12:16.113
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3

我刚刚设置了rails，我已经设置了我的自定义索引页面，让我的CSS 从资产/样式表工作，我的javascript 正在从资产/javascripts 工作。

如果我将它放在我的 index.html 中的“脚本”标签中，或者如果我从 Firebug 控制台运行一些随机 jQuery 代码，jQuery 也可以工作。

但是，从我的资产/javascripts 中的 js 文件中的页面加载时不会执行任何 Jquery 代码。知道为什么吗？

我怀疑这可能与我的页面加载不同文件的顺序有关，但我看不到任何可以检查或修复此问题的地方。

我的 application.js 中有这个 -

```
//= require jquery
//= require jquery_ujs
//= require_tree . 
```

我的布局文件的头部有这个，如果它是相关的 -

```
<%= javascript_include_tag "application" %>
<%= stylesheet_link_tag    "application", :media => "all" %>
<%= csrf_meta_tags %> 
```

这是我的服务器日志在页面加载时的输出 -

```
Started GET "/" for 192.168.2.3 at Sat May 19 15:58:47 +0100 2012
Processing by HomeController#index as HTML
Rendered home/index.html within layouts/application (0.1ms)
Compiled application.js  (8ms)  (pid 15001)
Completed 200 OK in 158ms (Views: 157.7ms | ActiveRecord: 0.0ms)

Started GET "/assets/jquery.js?body=1" for 192.168.2.3 at Sat May 19 15:58:51 +0100   2012
Served asset /jquery.js - 304 Not Modified (0ms)

Started GET "/assets/jquery_ujs.js?body=1" for 192.168.2.3 at Sat May 19 15:58:51 +0100 2012
Served asset /jquery_ujs.js - 304 Not Modified (0ms)

Started GET "/assets/home.js?body=1" for 192.168.2.3 at Sat May 19 15:58:51 +0100 2012
Served asset /home.js - 304 Not Modified (0ms)

Started GET "/assets/application.js?body=1" for 192.168.2.3 at Sat May 19 15:58:51 +0100 2012
Served asset /application.js - 304 Not Modified (22ms)

Started GET "/assets/application.css?body=1" for 192.168.2.3 at Sat May 19 15:58:51 +0100 2012
Served asset /application.css - 304 Not Modified (0ms)

Started GET "/assets/home.css?body=1" for 192.168.2.3 at Sat May 19 15:58:51 +0100 2012
Served asset /home.css - 304 Not Modified (0ms) 
```

我在 Firebug 中没有收到任何错误，或者任何表明它不起作用的东西。

# sharepoint - 列表“行踪”SharePoint 的错误输出项“名称”

> ID：10666396
> 
> 赞同：0
> 
> 时间：2012-05-19T15:12:19.853
> 
> 标签：sharepoint

我的程序获取列表共享点的版本历史元素的数据并将数据放入 txt
文件中。输出“名称”列表项和“位置”。一切正常，但不幸的是输出“名称”非常糟糕。在我看来这一行的问题

```
string strFirstName = Convert.ToString(objVersion["Name"]); 
```

输出不良：

Name 4049;#Zabiyakin Makar ,#STALT\Zabiyakin,# Zabiyakin@stalt.ru,#,#Zabiyakin Makar Location В Name 4049;#Zabiyakin Makar ,#STALT\Zabiyakin,# Zabiyakin@stalt.ru,#,#Zabiyakin Makar位置 首页

我想要输出：

名称 Zabiyakin Makar 位置 В 名称 Zabiyakin Makar 位置 首页

代码程序：

```
using System;
using Microsoft.SharePoint;
using Microsoft.SharePoint.WebControls;
using System.IO;
namespace ControlTest.Layouts.ControlTest
{
    public partial class ApplicationPage1 : LayoutsPageBase
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            //string ListUrl = "/Deps/sup/Lists/Whereabouts";
            SPList objList = SPContext.Current.Web.Lists["Whereabouts"];
            SPQuery objQuery = new SPQuery();
            objQuery.Query = "<Where><Gt><FieldRef Name=\"ID\"/><Value                 
            Type=\"Counter\">0 </Value></Gt></Where>";
            SPListItemCollection objItemColl = objList.GetItems(objQuery);  
            foreach (SPListItem objItem in objItemColl) 
            {
                SPListItemVersionCollection objVerisionColl = objItem.Versions;
                if (objVerisionColl.Count > 1)
                {
                    foreach (SPListItemVersion objVersion in objVerisionColl)  
                    {
                        int versionID = objVersion.VersionId; 
                        DateTime timeofcreation = objVersion.Created;  
                        string strVersionLabel = objVersion.VersionLabel;
                        SPListItem objLstItm = objVersion.ListItem;
                        string strFirstName = Convert.ToString(objVersion["Name"]);
                        //string strFirstName = 
                        ((SPFieldUserValue)objVersion["Name"]).User.Name;
                        string strPlace = Convert.ToString(objVersion["location"]);
                        System.IO.TextWriter writer = new 
                        StreamWriter(@"C:\custommenuoutput.txt", true);
                        writer.WriteLine(string.Format("Name: {0} location: {1}", 
                        strFirstName, strPlace));
                        writer.Close();

                    }

                }
              }
           }
     }
  } 
```

如何做出好的输出？请帮我 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T22:36:18.920

您需要使用 SPUserFieldValue 来获取友好名称。请参阅下面的示例。

```
SPSite site = new SPSite("http://spvm");
SPWeb web = site.OpenWeb();
SPList list = web.Lists["DemoList"];
SPListItem item = list.GetItemById[1];
SPFieldUserValue objUserFieldValue = new SPFieldUserValue(web, item["User"].ToString()); 
```

获得此对象 SPFieldUserValue ( objUserFieldValue) 后，您可以通过以下方式检索该用户的每个属性。

```
objUserFieldValue.User.LoginName;
objUserFieldValue.User.Name;
objUserFieldValue.User.ID;
objUserFieldValue.User.Groups;
objUserFieldValue.User.Roles;
objUserFieldValue.User.Email;
objUserFieldValue.User.Sid;
objUserFieldValue.User.UserToken; 
```

# javascript - JavaScript全局不保持范围？创建一个自动完成的 web 服务 json 对象

> ID：10666410
> 
> 赞同：0
> 
> 时间：2012-05-19T15:14:28.470
> 
> 标签：javascript, jquery, json, web-services

嗨，我正在尝试自动完成城市列表，但返回的 json 对象未格式化用于自动完成，需要一个名为“label”的字段：“cityname”来显示自动完成，所以我正在尝试使用重新格式化 json 对象一个ajax调用并将其写入全局变量，问题是一旦ajax调用返回，我的jsData是[]一个空数组......我做错了什么？为什么全局变量不保留一个值？

[http://www.andymatthews.net/read/2012/03/27/jQuery-Mobile-Autocomplete-now-available](http://www.andymatthews.net/read/2012/03/27/jQuery-Mobile-Autocomplete-now-available)

```
<script>
        $("#nec").bind("pageshow", function(e) {
            var jsData = [];

            $.ajax({
                   url: "http://localhost:8084/REST/resources/cities",
                   data:{},
                   type: 'GET',
                   crossDomain: true,
                   dataType: 'jsonp',
                   jsonp: 'jsonp',
                   jsonpCallback: 'jsoncallback',
                   error: function(error){
                       console.log(error);
                   },
                   success: function(result) {
                       for (i = 0; i < result.length; i++){
                             jsData.push({label:result[i].name, value:result[i]}); 
                        }
                        console.log(JSON.stringify(jsData));   
                       },
                });

            $("#textinput").autocomplete({
                target: $('#suggestions'),
                source: jsData,
                minLength: 1
            });

});
    </script> 
```

我在 JS 方面有点新鲜，所以有几件事我还没有掌握

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T15:23:20.997

你必须把

```
 $("#textinput").autocomplete({
     target: $('#suggestions'),
     source: jsData,
     minLength: 1
 }); 
```

在你的`success()`职能范围内。

因为，`jsData`成为更新内`success()`。事件的匿名函数的执行`pageshow`比`success()`. 因此，在该函数内`jsData`保持为空。

您可以通过自动完成本身检索数据。[**看这里**](http://jqueryui.com/demos/autocomplete/#remote-jsonp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T15:17:12.393

问题是这`jsData`不是全局的，而是在匿名函数内部。

```
 var jsData = [];   // make that here.

    $("#nec").bind("pageshow", function(e) {

        $.ajax({
               url: "http://localhost:8084/REST/resources/cities",
               data:{},
               type: 'GET',
               crossDomain: true,
               dataType: 'jsonp',
               jsonp: 'jsonp',
               jsonpCallback: 'jsoncallback',
               error: function(error){
                   console.log(error);
               },
               success: function(result) {
                   for (i = 0; i < result.length; i++){
                         jsData.push({label:result[i].name, value:result[i]}); 
                    }
                    console.log(JSON.stringify(jsData));   
                   },
            });

        $("#textinput").autocomplete({
            target: $('#suggestions'),
            source: jsData,
            minLength: 1
        }); 
```

虽然，我不建议使用全局变量。但是，如果它对你有用，那是你的愿望。

# jquery-ui - Jquery droppable 获取多个可拖动的id

> ID：10666415
> 
> 赞同：1
> 
> 时间：2012-05-19T15:14:38.510
> 
> 标签：jquery-ui, jquery, drag-and-drop

当我拖放到某个 div 时，我想获得多个拖动的 id。`$(ui.draggable).attr('id');`仅获得第一个 ID。

```
 Drag  <ul id="demo" > 
         <li id="1" ></li>
         <li id="2" ></li>
        <li id="3" ></li>
        </ul>

         <div class="drop"> drop here!! </div> 
```

查询

```
$(".drop").droppable({ 
                drop: function(event, ui) {

  var m_id = $(ui.draggable).attr('id');// only gets 1st id

      // i need to get multiple dragged id 

            1,2,3..     

            }       
            }); 
```

请帮帮我！！谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T15:22:05.400

```
var m_id = [];
$.each($(ui.draggable), function(i,e) {
   m_id.push(e.id);
});

//gives array with all ID's, could be joined with join()
//for comma seperated list 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-24T06:11:04.747

```
$("li").draggable({ revert: true });

$(".drop").droppable({
drop: function(event, ui) {
    var id = ui.draggable.attr("id");
    alert(id);
}
}); 
```

# jquery - 将添加/删除类应用于特定标签 Jquery

> ID：10666419
> 
> 赞同：2
> 
> 时间：2012-05-19T15:15:19.737
> 
> 标签：jquery, asp.net-mvc-3

我有一个这样的菜单列表..

```
 </div>
            <ul id="menu">
                <li id="About">@Html.ActionLink(@MvcWebRole1.Resources.Shared.Layout.About, "About", "Home")</li>
                <li id="Services">@Html.ActionLink(@MvcWebRole1.Resources.Shared.Layout.Services, "Services", "Home")</li>
                <li id="Partners">@Html.ActionLink(@MvcWebRole1.Resources.Shared.Layout.Partners, "Partners", "Home")</li>
.....
..... 
```

当我单击具有 jquery 功能的按钮时，我想将类添加/删除到特定标签。

我如何将这个应用到特定菜单>li>id="About"？

我已经尝试过这样的事情，但它不起作用..

```
$('#menu li About').removeClass('classname'); 
```

和

```
$('#menu li').attr(About).removeClass('classname'); 
```

和

```
if ($('#menu li').attr("id") == "About")
  $('#menu li').removeClass('classname'); 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T15:16:56.660

你的选择器是错误的。选择您需要的 ID。尝试：

```
('#About').removeClass('classname'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T15:17:08.610

```
$('#menu li#About').removeClass('classname'); 
```

要不就

```
$('li#About').removeClass('classname'); 
```

或者

```
$('#About').removeClass('classname'); 
```

或者

```
$('#About', '#menu').removeClass('classname'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-19T15:17:34.477

关闭。这段代码：

```
$('#menu li About') 
```

正在寻找一个 id 元素，`menu`其中包含一个名为的元素，该元素包含一个*名为*`li`的元素。您需要指定它是另一个 id（并且是 id 上的一个 id ）： *`About``li`*

 *```
$('#menu li#About') 
```

当然，由于 id 在文档中*应该是*唯一的，这*应该也可以*工作：

```
$('#About') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-19T15:18:51.107

请熟悉 jQuery 选择器的工作方式 ( [http://api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/) )。

您正在寻找的是您在`#menu`-Part 上使用的 ID 选择器，因此`$('#About')`将是正确的选择器。*

# java - JMF java.util.NoSuchElementException 看不到我的网络摄像头

> ID：10666420
> 
> 赞同：0
> 
> 时间：2012-05-19T15:15:20.910
> 
> 标签：java, eclipse, webcam, capture, jmf

我想在 ubuntu 11.10 上使用我的网络摄像头在 Java 中捕获图像

```
 Vector deviceList = CaptureDeviceManager.getDeviceList( new RGBFormat());
        System.out.println(deviceList.toString());
        //gets the first device in deviceList
        device = (CaptureDeviceInfo) deviceList.firstElement(); 
```

我有异常“java.util.NoSuchElementException”

我安装了 jmf-2_1_1e-linux-i586.bin 并在我的项目的参考库中添加了 jmf.jar。

我的网络摄像头正常工作。

我应该怎么做才能看到我的网络摄像头？

感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T15:21:31.393

Please check the Vector API, you can look that:

```
/**
 * Returns the first component (the item at index <tt>0</tt>) of 
 * this vector.
 *
 * @return     the first component of this vector.
 * @exception  NoSuchElementException  if this vector has no components.
 */
public synchronized Object firstElement() 
```

The deviceList is empty. You should call the isEmpty() method before calling the firstElement() method. If the isEmpty() return true, you can't call the firstElement() method.

```
if(deviceList!=null && !deviceList.isEmpty()){
    device = (CaptureDeviceInfo) deviceList.firstElement();
} 
```

# javascript - 如何循环遍历多维关联javascript数组？

> ID：10666421
> 
> 赞同：1
> 
> 时间：2012-05-19T15:15:37.793
> 
> 标签：javascript, loops, multidimensional-array, associative-array

我有“多维关联”javascript数组（实际上是具有属性的对象，因为JS不能有本机关联数组）：

```
var multiArray={ AAA:"one", BBB:"two", CCC:{ 0:"xxx", 1:"yyy", 2:"zzz"} }; 
```

我需要从这个数组中获取这样的字符串：

'AAA=一 & BBB=二 & CCC=xxx,yyy,zzz'

我怎么做？

如果我使用两个这样的简单循环：

```
for(var key in multiArray)
{
        for(var subkey in multiArray[key])
        {
            string = string + multiArray[key][subkey]+",";
        }
} 
```

我得到这样的东西：

'AAA = o,n,e & BBB = t,w,o & CCC = xxx, yyy,zzz'

这不是我需要的。

**任何仅**使用 Javascript 的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T15:22:52.250

好的，我在这里创建了一个小提琴：http: [//jsfiddle.net/bJ6HH/](http://jsfiddle.net/bJ6HH/)。它适用于任何深度的嵌套。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T15:40:09.747

我会使用类似的功能

```
var multiArray={ AAA:"one", BBB:"two", CCC:{ 0:"xxx", 1:"yyy", 2:"zzz"} };

function objToStr(o,delim) {
    if (/^(string|boolean|number)$/.test(typeof o)) return o;
    delim = delim || '&'; // delimiter
    var arr = [], isArray = true;
    for (var j in o) {
        if (isNaN(parseInt(j))) { isArray = false; break; }
    }
    if (isArray) {
        for (var j in o) arr[j] = objToStr(o[j],delim);
        return arr.join(',');
    }
    for (var j in o) {
        if (typeof o[j] != 'object') arr.push(j+'='+o[j]);
        else arr.push(j+'='+objToStr(o[j],delim));
    }
    return arr.join(delim);
}
console.log(objToStr(multiArray,'&')) 
```

**编辑：**如果这将是一个 GET 查询，您将需要在此处转义必要的字符。另外，我不确定您对以下数组的结果有何期望，因此我无法编写适合您需求的最佳代码。

```
var multiArray={ AAA:"one", BBB:"two", CCC:{ 0:"xxx", 1:"yyy", 2:{a:1, b:2}} }; 
```

# php - 如何停止接收重复邮件？

> ID：10666433
> 
> 赞同：0
> 
> 时间：2012-05-19T15:16:11.137
> 
> 标签：php

当用户按下提交按钮时，我在管理员邮箱中收到了 7 份重复邮件。我怎样才能只收到一封邮件。这是我的代码。

```
$MyCoupon = 0;
$cResult=mysql_query("select * from codes WHERE status='active'");
while($cRow = mysql_fetch_assoc($cResult)){
    if($_POST['coupon_used']==$cRow['code'] || $_POST['invoice']=="invoice"){

            $coupon = ($_POST['coupon_used']!="" ? $_POST['coupon_used'] : "invoice");

            $aRes = mysql_query("SELECT * FROM `adverts` WHERE `ad_id`='".$_POST['ad_id']."'");
            $aRow = mysql_fetch_assoc($aRes);

            $updateQuery = "UPDATE `adverts` SET `message_status`='awaiting approval',`target_impressions`='".$_POST['ad_impressions']."',`recurring`='".$_POST['ad_recurring']."',`coupon_used`='".$coupon."',`POIO`='".$_POST['ad_POIO']."' WHERE `ad_id`='".$_POST['ad_id']."'";         
            $updateResult=mysql_query($updateQuery) or die("Unexpected error: record could not be added.".mysql_error());
            include_once("update_ads_from_database.php");

            //SEND EMAIL to CC
                $to = "mymail@gmail.com";
            $headers = 'MIME-Version: 1.0' . "\r\n";
            $headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
            $headers .= 'From: Do-Not-Reply@domain.com';
            $subject = 'New self-serve mail';
            $message = "The following self-service ad has just been submitted:<br>";
            $message .= $aRow['contact_name']."<br>".$aRow['contact_phone']."<br>".$aRow['contact_email'];
            $message .= "<br><br>Description:".$aRow['description']."<br>Content:".stripslashes($aRow['value'])."<br><br>";
            $message .= "Click <a href=\"http://www.domain.com/admin/approve_self_ad.php\">here</a> to approve it.";
            mail($to,$subject,$message,$headers);
            $goodCoupon++; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T15:28:07.537

您为在数据库中找到的每个优惠券代码发送一封电子邮件。您可以创建一条电子邮件，并在循环后发送：

```
$MyCoupon = 0;
// Init empty message body
$message = "";
$cResult=mysql_query("select * from codes WHERE status='active'");
while($cRow = mysql_fetch_assoc($cResult)){
    if($_POST['coupon_used']==$cRow['code'] || $_POST['invoice']=="invoice"){
        $coupon = ($_POST['coupon_used']!="" ? $_POST['coupon_used'] : "invoice");
        $aRes = mysql_query("SELECT * FROM `adverts` WHERE `ad_id`='".$_POST['ad_id']."'");
        $aRow = mysql_fetch_assoc($aRes);
        $updateQuery = "UPDATE `adverts` SET `message_status`='awaiting approval',`target_impressions`='".$_POST['ad_impressions']."',`recurring`='".$_POST['ad_recurring']."',`coupon_used`='".$coupon."',`POIO`='".$_POST['ad_POIO']."' WHERE `ad_id`='".$_POST['ad_id']."'";        
        $updateResult=mysql_query($updateQuery) or die("Unexpected error: record could not be added.".mysql_error());
        include_once("update_ads_from_database.php");

        // Add info on current row to email body
        $message .= "The following self-service ad has just been submitted:<br>";
        $message .= $aRow['contact_name']."<br>".$aRow['contact_phone']."<br>".$aRow['contact_email'];
        $message .= "<br><br>Description:".$aRow['description']."<br>Content:".stripslashes($aRow['value'])."<br><br>";
        $message .= "Click <a href=\"http://www.domain.com/admin/approve_self_ad.php\">here</a> to approve it.";

        $goodCoupon++;
    } // end if
} // end while

//SEND EMAIL to CC
$to = "mymail@gmail.com";
$headers = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
$headers .= 'From: Do-Not-Reply@domain.com';
$subject = 'New self-serve mail';
mail($to,$subject,$message,$headers); 
```

# c++ - 缩放和旋转模板匹配

> ID：10666436
> 
> 赞同：30
> 
> 时间：2012-05-19T15:16:24.557
> 
> 标签：c++, image-processing, opencv, computer-vision, template-matching

我正在使用匹配模板的方法`CV_TM_CCORR_NORMED`来比较两个图像......我想让这个旋转和缩放不变......有什么想法吗？

我尝试对图像和模板的傅里叶变换使用相同的方法，但旋转后的结果仍然不同

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-05-19T15:52:07.737

当您的对象在场景中旋转或缩放时，模板匹配`matchTemplate`效果不佳。

您应该尝试使用`Features2D`Framework 中的 openCV 功能。例如`SIFT`或`SURF`描述符和`FLANN`匹配器。此外，您将需要`findHomography`方法。

[这](http://docs.opencv.org/doc/tutorials/features2d/feature_homography/feature_homography.html#feature-homography)是在场景中查找旋转对象的一个​​很好的示例。

**更新：**

简而言之，算法是这样的：

1.  查找对象图像的关键点 1.1。从这些关键点中提取描述符

2.  寻找场景图像的关键点 2.1 从关键点中提取描述符

3.  通过匹配器匹配描述符

4.  分析你的比赛

有不同类别的 FeatureDetectors、DescriptorExtractors 和 DescriptorMatches，您可以阅读它们并选择适合您任务的那些。

*   [openCV FeatureDetector](http://docs.opencv.org/modules/features2d/doc/common_interfaces_of_feature_detectors.html#featuredetector) （上述算法中的步骤 1 和 2）
*   [openCV DescriptorExtractor](http://docs.opencv.org/modules/features2d/doc/common_interfaces_of_descriptor_extractors.html#descriptorextractor)（上述算法中的步骤 1.1 和 2.1）
*   [openCV DescriptorMatcher](http://docs.opencv.org/modules/features2d/doc/common_interfaces_of_descriptor_matchers.html#descriptormatcher)（上述算法中的第 3 步）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-08T05:55:42.073

**旋转不变**

对于每个关键点：

1.  取关键点周围的区域。
2.  用梯度或其他方法计算该区域的方位角。
3.  将此角度上的图案和请求区域旋转到 0。
4.  计算这个旋转区域的描述符并匹配它们。

**尺度不变**

见[BRISK](http://www.robots.ox.ac.uk/~vgg/rg/papers/brisk.pdf)方法

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-04-10T14:49:12.890

有比通过特征检测和单应性匹配模板比例和旋转不变更简单的方法（如果你知道它真的只有旋转和比例，但其他一切都是不变的）。对于真正的对象检测，上述建议的基于关键点的方法效果更好。

如果您知道它是同一个模板并且不涉及透视变化，您可以使用图像金字塔进行尺度空间检测，并在该金字塔的不同级别上匹配您的模板（通过简单的东西，例如 SSD 或 NCC）。在金字塔的较高（=较低分辨率）级别上找到粗略的匹配会很便宜。事实上，它非常便宜，您还可以在低分辨率级别上粗略地旋转模板，当您将模板回溯到更高分辨率级别时，您可以使用更细粒度的旋转步进。这是一种非常标准的模板匹配技术，在实践中效果很好。

# cocoa - 基于 NSView 的自定义控件绘图更新被延迟。为什么？

> ID：10666439
> 
> 赞同：1
> 
> 时间：2012-05-19T15:17:00.810
> 
> 标签：cocoa, custom-controls, nsoutlineview

我有一个基于视图`NSOutlineView`，它显示来自核心数据存储的条目（源实体）。大纲视图中的视图使用自定义控件，该控件被实现为`NSView`. 此控件根据数值 (0-7) 显示圆形彩色标记。此值存储为 Source 实体的属性，旨在作为一种实现类似 Finder 的标记方法的方法。

整个事情都是使用与 IB 的绑定来连接的。

我附上了一张截图，希望能让我的意图清楚。

这一切都很好，但对于一个非常烦人的细节。当数值改变时（从屏幕右侧），自定义控件仅在大纲视图中的选择改变时更新。显然，立即反映这种变化会更好，但到目前为止我失败了。我尝试了各种场景，`setNeedsDisplay: YES`基本上都被忽略了。

有任何想法吗？

![在此处输入图像描述](../Images/524a0cb061057571853d957f5e6003d4.png)

编辑：我用自定义控件实现了一个设置器：

```
- (void) setLabelValue: (NSNumber*) aValue {
    labelValue = aValue;
    [self setNeedsDisplay: YES];
} 
```

推理`setNeedsDisplay:`会触发重新绘制，在`drawRect:`方法中我查询值以建立正确的颜色：

```
- (void)drawRect: (NSRect) dirtyRect {
    // Label value between '1' and '7' indicate that a label was assigned. Determine label color and border color.
    if ([[self labelValue] intValue] > 0) {
        NSColor *aBackgroundColor = [NSColor clearColor];
        switch ([[self labelValue] intValue]) {
            case 1:
                aBackgroundColor = [NSColor colorWithCalibratedRed:...];
                break;
            case 2:
                aBackgroundColor = [NSColor colorWithCalibratedRed:...];        
                break;
            case 3:
                aBackgroundColor = [NSColor colorWithCalibratedRed:...];
                break;
            case 4:
                aBackgroundColor = [NSColor colorWithCalibratedRed:...];    
                break;
            case 5:
                aBackgroundColor = [NSColor colorWithCalibratedRed:...];        
                break;
            case 6:
                aBackgroundColor = [NSColor colorWithCalibratedRed:...];            
                break;
            case 7:
                aBackgroundColor = [NSColor colorWithCalibratedRed:...];        
                break;
        }
        // Draw border first.
        ...
        // Draw label color.
        ...
    } 
    // Label value of '0' indicates that no label was assigned.
    if ([[self labelValue] intValue] == 0) {
        NSBezierPath *aPath = [NSBezierPath bezierPathWithRoundedRect: ...];
        [[NSColor clearColor] set];
        [aPath fill];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T16:40:20.567

我使用通知重新实现了整个过程。我无法使用绑定让它工作。这是我所做的：

（屏幕左侧）的控制器`NSOutlineView`使用以下方法为其元素分配视图：

```
- (NSView *) outlineView: (NSOutlineView *) outlineView viewForTableColumn: (NSTableColumn *) tableColumn item: (id) anItem 
```

当与文件（图像、PDF 等）关联的实体被添加到大纲视图时，该特定项目的项目视图（的自定义子类）会注册对实体属性`NSTableCellView`更改的兴趣：`labelValue`

```
[[NSNotificationCenter defaultCenter] addObserver: aView selector: @selector(labelValueChanged:) name: @"LabelValueChanged" object: nil]; 
```

当 labelValue 属性发生更改时（通过单击屏幕右侧的按钮之一），该控制器会触发通知：

```
[[NSNotificationCenter defaultCenter] postNotificationName:@"LabelValueChanged" object:[self selectedSource]]; 
```

通过 Notification 系统，该方法`labelValueChanged:`被项目视图（在 中`NSOutlineView`）调用，这使实际绘制标签的自定义视图组件的显示无效：

```
- (void) labelValueChanged: (NSNotification*) aNotification {
    // A notification was received that the label was changed. Mark the label object of the receiver
    // if the object in the notification (anObject) matches the object of the receiver (objectValue).
    id anObject = [aNotification object];
    if (anObject == [self objectValue]) {
        [[self label] setNeedsDisplay:YES];
    }
} 
```

感谢@KenThomases 的建议。

# css - 在 JQuery Mobile 中垂直对齐按钮

> ID：10666446
> 
> 赞同：2
> 
> 时间：2012-05-19T15:17:25.750
> 
> 标签：css, jquery-mobile

我正在开发一个 JQuery Mobile 应用程序。这个应用程序在“内容”部分有一个按钮，我想在“内容”部分的底部对齐。我的 html 看起来像这样：

```
<div id="myPage" data-role="page">
    <div data-role="header" data-position="fixed">
        <a href="/page1" data-icon="arrow-l" data-iconpos="notext" class="ui-btn-left jqm-home">Back</a>
        <h1>My App</h1>
        <a href="/page3" class="ui-btn-right" data-role="button" rel="external" data-transition="slide">Next</a>
    </div>

    <div data-role="content">
        <ul data-role="listview"> 
            <li data-role="list-divider">
              Step 2 of 3
            </li>            
        </ul><br /><br />

        <!-- Main content Goes Here -->
        <br />

        <!-- I want the following button to be vertically aligned to the bottom so that it sits on top of the footer content -->
        <input type="button" value="View Table" onclick="return viewTable();" data-mini="true" />

    </div>

    <div data-role="footer" class="ui-bar" data-position="fixed"> 
      <!-- My Footer Content -->
    </div>
</div> 
```

如何垂直对齐该按钮，使其位于页脚上方？如果我把它放在页脚本身，由于使用的颜色，它看起来不正确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T21:40:57.370

我想到的一种方法是将您的按钮包装在一个带有 id 的 div 中，并添加一些绝对定位到底部的 css。例子：

**html**

```
<div id="viewTableBtn">
    <input type="button" value="View Table" onclick="return viewTable();" data-mini="true" />
</div> 
```

**css**

```
#viewTableBtn{
    position:absolute;
    bottom:15px;
    width:94%;
}​ 
```

# c++ - 内联函数调用推理

> ID：10666448
> 
> 赞同：1
> 
> 时间：2012-05-19T15:17:32.527
> 
> 标签：c++, assembly, disassembly

因此，我正在对编译器进行一些试验（我在 C++ 的“职业生涯”中已经到了那个地步），我注意到一个调用`_rotl`被直接编译/汇编；我的意思是，不是程序集执行 a `call`，而是（尽管只有 2 个）操作码似乎直接剪切/粘贴到调用所在的位置。

这背后的原因是什么？我相信这个词是“内联函数”，但我可能弄错了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-19T15:35:19.040

它不是一个内联函数，它是一个[*内在函数*](http://en.wikipedia.org/wiki/Intrinsic_function)。旨在利用目标处理器的特定功能。它无条件地内联，并且没有以其他方式声明函数内联，通常只产生一条机器代码指令。在 _rotl() 的情况下，使用 x86 ROL 指令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T15:24:55.167

C++ 中的`inline`关键字建议编译器将某些函数（通常很短）内联，以减少`call`汇编命令（处理器指令）造成的开销。

但是，这只是一个建议，因此其他未明确标记的短函数`inline`也可以内联，并且它也可以忽略您的内联请求，尤其是在函数非常大的情况下。

内联操作本身基本上将函数的主体复制到它使用的每个地方，而无需调用它。

你可以随时用谷歌搜索它并找到更多信息。

编辑：内联通常仅/主要在优化打开时发生；尝试打开和关闭它们并比较反汇编。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T15:28:35.767

内联是为了提高效率而进行的。`call`首先，它通过实质上插入函数“内联”来节省 a 的成本。也就是说，制作该函数的副本并将其插入到最初调用的位置。其次，由于空间局部性，要执行的代码更靠近，这有助于缓存。

如果函数在循环中被调用，则通常是内联的，在这种情况下，这种开销变得更加重要。您可以使用`inline`关键字向编译器*提示*您希望内联函数，但编译器没有义务这样做。您有时可以使用编译器特定的关键字来强制内联。例如，`__forceinline`使用 VC++。

# networking - 在 OSI 网络模型中，为什么网络层在数据链路层之上

> ID：10666450
> 
> 赞同：5
> 
> 时间：2012-05-19T15:17:52.013
> 
> 标签：networking, layer, ethernet, osi

我一直觉得在 OSI 中，数据链路层和网络层应该交换位置，因为总体而言，模型中的层似乎从用户特定（应用层）转向网络特定（物理层）。现在，鉴于数据链路层的MAC地址是一个比网络层更接近用户的人工制品，我认为数据链路层应该在网络层之上。

现在，我确信网络层位于数据链路层之上是有充分且合乎逻辑的理由的；但这种推理使我无法理解；谁能给我理由？我的意思是网络层高于数据链路层的原因。

谢谢，丹

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-19T15:54:01.460

> 现在，鉴于数据链路层的MAC地址是一个比网络层更接近用户的人工制品，我认为数据链路层应该在网络层之上。

MAC 地址更接近硬件，而不是用户，并且根本不存在，特定于 IEEE 802 LAN 架构。

数据链路层封装了网络上*相邻*节点之间的通信。它位于网络层和物理层之间，因为它使用物理层提供的服务，提供网络层需要的服务。

网络层封装了网络上*任意*节点之间的通信，添加了协调转发所需的路由信息​​，通过一系列彼此相邻的节点到达最终目的地。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-19T16:23:47.610

网络层在数据链路层之上，主要是因为网络层比数据链路层对网络有更广阔的视野。数据链路层（以太网、WiFI 等）涉及网卡、网卡和本地网络之间的链路。网络层（主要是 IP）讨论 IP 地址以及主机必须如何路由网络数据包以实现端到端通信。

快速总结一下 OSI 堆：

*第 1 层*：**物理**层 -> 铜线、光纤、无线等 - 谈论频率、比特编码等。

*第 2 层*：**数据链路**层 -> 以太网、WiFi、蓝牙等 - 讨论网卡、它们之间的链接并允许创建本地网络（通过专用或共享媒体）。

*第 3 层*：**网络**层 -> 主要是 IP - 讨论 IP 地址和数据包路由以实现端到端通信。

*第 4 层*：**传输**层 -> 主要是 TCP/UDP - 提供“端口”的概念，允许相同 IP 地址之间的流复用。TCP 还提供数据包的流量控制、拥塞控制、按顺序传送和重传。

*第 5 层*：**会话**层 -> 它的一些特性（例如连接）通常由 TCP 在真实网络中提供。有关详细信息，请参阅[维基百科文章](http://en.wikipedia.org/wiki/OSI_model#Layer_5%3a_session_layer)。

*第 6 层*：**表示**层 -> 它的一些功能（例如上下文传输或加密）通常由实际网络中的应用层实现。有关详细信息，请参阅[维基百科文章](http://en.wikipedia.org/wiki/OSI_model#Layer_6%3a_presentation_layer) 。

*第 7 层*：**应用**层 -> HTTP、SMTP、POP，还有 Skype、ed2k、torrent 等，允许联网的应用程序和服务通过其特定协议进行通信。

如果您问自己，是的，仍然有网络设备按照最初的构想实现 OSI 堆栈。我已经看到其中一些仍在运行。也许我们可以打开另一个线程来知道他们的名字和目的......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-02-10T06:14:47.857

在 OSI 模型中，网络层负责可能跨**多个网络（链路）的数据包****“源到目的地”**传递，而数据链路层监督同一网络上**“两个”**系统的数据包传递。

# assembly - 分段错误 x86 <_dl_debug_state>

> ID：10666451
> 
> 赞同：2
> 
> 时间：2012-05-19T15:17:56.363
> 
> 标签：assembly, gdb, segmentation-fault, glibc

我有一些由我自己的编译器制作的 asm 程序，当我想运行它们时，它们最后会出现分段错误。所有指令都按我想要的方式执行，但执行由段错误完成。

当我尝试使用 gdb 来查看段错误时，它似乎总是出现在以下行：0x11ee90 <_dl_debug_state> push %ebp>

我什至不知道这条线是什么，首先如何防止它导致段错误。

这是这种程序的一个例子：

```
 file    "test_appel.c"
    .text                
.globl f  
    .type f, @function  
f:                        
    pushl   %ebp                     
    movl    %esp,   %ebp               
    subl    $16,    %esp
    movl    8(%ebp), %eax 
    pushl   %eax                        
    movl    12(%ebp), %eax 
    popl    %ecx          
    imull   %ecx,   %eax  
    movl    %eax,   16(%ebp) 
    movl    16(%ebp), %eax 
    leave
    ret         
    .section    .rodata
.LC0:
    .string "appel à fonction pour la multiplication\n"
.LC1:
    .string "resultat 2 * 3 = %d\n"
    .text                
.globl main  
    .type main, @function  
main:                        
    pushl   %ebp                     
    movl    %esp,   %ebp               
    andl    $-16,   %esp  
    subl    $32,    %esp
    movl    $2, %eax 
    movl    %eax,   8(%ebp) 
    movl    $3, %eax 
    movl    %eax,   12(%ebp) 
    movl    12(%ebp), %eax 
    movl    %eax    ,4(%esp) 
    movl    8(%ebp), %eax 
    movl    %eax    ,0(%esp) 
    call    f
    movl    %eax,   4(%ebp) 
    movl    4(%esp),    %eax    
    movl    (%esp), %ecx     
    pushl   %eax             
    pushl   %ecx             
    movl     $.LC0, %eax 
    movl    %eax,   (%esp)  
    call    printf         
    popl    %ecx             
    popl    %eax             
    movl    %eax,   4(%esp)   
    movl    %ecx,   (%esp)    
    movl    4(%esp),%eax      
    movl    (%esp), %ecx     
    pushl   %eax             
    pushl   %ecx             
    movl    4(%ebp), %eax 
    movl    %eax,   %edx
    movl    %edx,   4(%esp)                    
    movl    $.LC1,  (%esp)  
    call    printf                            
    popl    %ecx             
    popl    %eax             
    movl    %eax,   4(%esp)   
    movl    %ecx,   (%esp)    
    leave
    ret 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T21:30:55.037

> segfault，它似乎总是出现在以下行：`0x11ee90 <_dl_debug_state> push %ebp>`

那只是意味着您已经损坏或耗尽了堆栈。

实际上，您的编译器确实似乎发出了会破坏整个堆栈的代码。特别是这些说明：

```
movl    %eax,   8(%ebp)
...
movl    %eax,   12(%ebp) 
```

*调用者*（这是 libc 的一部分）中损坏的局部变量，因此在`main`返回后看到崩溃也就不足为奇了。

您可能打算发出:`movl %eax, -8(%ebp)`和`movl %eax, -12(%ebp)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T14:48:54.337

问题是您正在破坏返回指令。如您所知，ebp + 4 始终包含执行被调用函数后控件跳转的返回指令地址。在您的情况下，您有这样的声明：

```
 movl    %eax,   4(%ebp) 
```

您正在将“f()”的返回值写入 ebp+4，这会破坏返回指令地址。你删除这个语句你不会得到分段错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T21:30:17.283

`when i try to use gdb in order to look at the segfault, it appears that it always occurs at the line : 0x11ee90 <_dl_debug_state> push %ebp>`

当在函数调用期间将基指针 :`%ebp`推入堆栈时，会发生分段错误。**这看起来像是之前**发生的堆栈损坏的后果。

您没有从 GDB 共享完整的堆栈跟踪，也没有共享地址空间信息。

在 gdb 中，当它出现段错误时，会执行 a`disassemble`以获取更多信息，并`bt`获取所有被调用的函数来实现这一点。

# inversion-of-control - 使用 Ninject 3.0 常规绑定进行装饰时出现循环依赖错误

> ID：10666452
> 
> 赞同：0
> 
> 时间：2012-05-19T15:18:15.467
> 
> 标签：inversion-of-control, ninject, decorator, cyclic-reference

请参阅下面的示例代码。它是一个过于简化的场景，用于演示我在使用该`WhenInjectedInto`方法绑定时遇到的问题。这一直适用于 ninject 的早​​期版本。但是有些如何升级到 3.0 我看不出问题出在哪里。`WhenInjectedInto`如果方法得到正确应用，我不应该得到一个循环依赖异常（即装饰器被注入自身） 。

另请注意，这是一个过于简化的场景，因此类和接口遵循约定，因此对于此代码示例，可能可以使用默认约定和更少的 ioc 代码来实现解决方案，但请记住我的实际场景我不会'没有类和接口如此流畅地遵循约定。

```
using System;
using System.Collections.Generic;
using System.Linq;
using NUnit.Framework;
using Ninject.Extensions.Conventions;
using Ninject.Extensions.Conventions.BindingGenerators;
using Ninject.Syntax;

namespace Ninject.Usage.Spike
{
public class ElderlyPerson : IPerson
{
    private readonly IPerson _actual;

    public ElderlyPerson(IPerson actual)
    {
        _actual = actual;
    }

    public string Name { get { return string.Format("Sir {0}", _actual.Name); } }
}

public class Person : IPerson
{
    public string Name { get; protected set; }
}

public interface IPerson { string Name { get; } }

[TestFixture]
public class Class1
{
    [Test]
    public void Test()
    {
        using(var k = new StandardKernel())
        {
            k.Bind<IPerson>().To<ElderlyPerson>().InSingletonScope();
            k.Bind(x => x.FromThisAssembly()
                            .SelectAllClasses()
                            .Where(t => t.IsAssignableFrom(typeof (IPerson)))
                            .BindWith<MyGenerator>()
                            .Configure(c => c.WhenInjectedInto<ElderlyPerson>().InSingletonScope()));

            var person = k.Get<IPerson>();
            Assert.That(person.Name, Is.StringContaining("Sir"));
        }
    }
}

public class MyGenerator : IBindingGenerator
{
    public IEnumerable<IBindingWhenInNamedWithOrOnSyntax<object>> CreateBindings(Type type, IBindingRoot bindingRoot)
    {
        return type == typeof(ElderlyPerson) 
            ? Enumerable.Empty<IBindingWhenInNamedWithOrOnSyntax<object>>() 
            : new[] { bindingRoot.Bind(typeof(IPerson)).To(type) };
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T22:56:07.540

你的`Where`条件不对！你不能分配`IPerson`给`Person`. 切换参数。

# javascript - 在内存中保留新大小的调整大小的图像？

> ID：10666454
> 
> 赞同：0
> 
> 时间：2012-05-19T15:18:41.953
> 
> 标签：javascript

仅使用 javascript（没有 php）可能：

剪辑、裁剪或调整图像大小并使用新的高度和宽度将新图像保存在内存中？

通常，调整大小的图像以新大小显示在浏览器中。但如果你看一下属性，大小与原始图像相同。

# java - 如何配置码头以使用带有 HTTPS 协议的球衣 servlet

> ID：10666456
> 
> 赞同：1
> 
> 时间：2012-05-19T15:18:46.903
> 
> 标签：java, ssl, https, jetty, jersey

请帮我。我在[http://wiki.eclipse.org/Jetty/Howto/Configure_SSL](http://wiki.eclipse.org/Jetty/Howto/Configure_SSL)上阅读，我需要配置`$Jetty_Home/etc/jetty.xml`和指定我的密钥库

```
<Call name="addConnector">
  <Arg>
    <New class="org.eclipse.jetty.server.ssl.SslSelectChannelConnector">
      <Arg>
        <New class="org.eclipse.jetty.http.ssl.SslContextFactory">
          <Set name="keyStore"><SystemProperty name="jetty.home" default="." />/etc/keystore</Set>
          <Set name="keyStorePassword">OBF:1vny1zlo1x8e1vnw1vn61x8g1zlu1vn4</Set>
          <Set name="keyManagerPassword">OBF:1u2u1wml1z7s1z7a1wnl1u2g</Set>
          <Set name="trustStore"><SystemProperty name="jetty.home" default="." />/etc/keystore</Set>
          <Set name="trustStorePassword">OBF:1vny1zlo1x8e1vnw1vn61x8g1zlu1vn4</Set>
        </New>
      </Arg>
      <Set name="port">8443</Set>
      <Set name="maxIdleTime">30000</Set>
    </New>
  </Arg>
</Call> 
```

但我不明白如何指定我的球衣 servlet 需要使用 https 可能需要在 web.xml 中指定？

这是我的源代码：

```
import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;

import javax.ws.rs.Consumes;
import javax.ws.rs.POST;
import javax.ws.rs.Path;
import javax.ws.rs.Produces;
import javax.ws.rs.core.MediaType;
import javax.ws.rs.core.Response;

import com.sun.jersey.core.header.FormDataContentDisposition;
import com.sun.jersey.multipart.FormDataParam;
@Path("/")
public class Uploader {

        //post method
    @POST
        //full path is: https://localhost:8443/loguploadservice/uploader
    @Path("/uploader")
    @Consumes(MediaType.MULTIPART_FORM_DATA)
    @Produces("text/plain")
    public Response upload(
        @FormDataParam("file") InputStream uploadedInputStream,
        @FormDataParam("file") FormDataContentDisposition fileDetail) {

        String uploadedFileLocation = "d://uploaded/"
            + fileDetail.getFileName();

        // save it
        writeToFile(uploadedInputStream, uploadedFileLocation);

        String output = "File uploaded to : " + uploadedFileLocation;

        return Response
                .status(200)
                .entity(output).build();

    }
        /**
        *write data to file
        */
    private void writeToFile(InputStream uploadedInputStream,
        String uploadedFileLocation) {

         try {
            OutputStream out = new FileOutputStream(new File(
                    uploadedFileLocation));
            int read = 0;
            byte[] bytes = new byte[1024];

            while ((read = uploadedInputStream.read(bytes)) != -1) {
                out.write(bytes, 0, read);
            }

            out.flush(); //flush data
            out.close(); //close output stream
            uploadedInputStream.close();

        } catch (IOException e) {
            e.printStackTrace();
        }

        }
  } 
```

# sql - SQL 是否有任何有限状态机定义？

> ID：10666459
> 
> 赞同：2
> 
> 时间：2012-05-19T15:18:55.180
> 
> 标签：sql, standards, grammar, fsm, automata

有谁知道是否有 SQL 的有限状态机定义，例如 PL/SQL、SQL92 或 SQL99..

不知道有没有sql的语法定义。。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T15:20:35.600

Yes, ANTLR has SQL and PL/SQL grammars:

[http://www.antlr.org/grammar/list](http://www.antlr.org/grammar/list)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-03T14:10:15.070

这可能不是您正在寻找的，但它可以提供帮助

SQLite 所理解的 SQL

[https://sqlite.org/lang.html](https://sqlite.org/lang.html)

# ruby - 如何从 Twitter 标签搜索中提取唯一的 HTTP 链接？

> ID：10666473
> 
> 赞同：-3
> 
> 时间：2012-05-19T15:20:57.760
> 
> 标签：ruby, twitter

我想编写一个 ruby​​ 程序，它将使用提供的主题标签获取最近 100 条最新推文中的所有唯一 http 链接。这真的很紧急也很重要。

请指导我应该从哪里开始？

等待您的指导和有益的回应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T15:29:58.307

此 API 调用将获取最后 100 条包含“#ruby”的推文。

实体将包含 URL

```
https://search.twitter.com/search.json?q=%23ruby&include_entities=true 
```

我建议您阅读[Twitter 搜索文档](https://dev.twitter.com/docs/using-search)和[实体文档](https://dev.twitter.com/docs/tweet-entities)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T19:36:11.290

这是一个已解决的问题。你可以直接使用[Twitter API](https://dev.twitter.com/)，或者使用我的[Twitter URL Extractor](https://github.com/CodeGnome/twitter_url_extractor)，它在 GitHub 上的 GPL 下可用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T21:00:26.580

如果您可以使用 gem，那么您应该看看[Twitter ruby​​ gem](http://twitter.rubyforge.org/)。

```
tweets_result=Twitter.search("#tag_to_search -rt", :rpp => 100) 
```

它将为您提供 100 个结果（不包括转发，从而保持一些唯一性）。

要显示结果：

```
tweets_result.each{|x| puts x.text} 
```

# java - 挂毯中的装订图 5

> ID：10666478
> 
> 赞同：3
> 
> 时间：2012-05-19T15:21:29.927
> 
> 标签：java, binding, tapestry

在我的动作课中，我想要一个字符串映射。在我的 tml 中，我想使用文本字段访问此地图。就像是

```
<t:form>
    <t:textfield value="myMap['key1']"/>
    <t:textfield value="myMap['key2']"/>
... 
```

我不坚持语法，但是目前挂毯中有这样的东西吗？如果没有，我需要以最简单的方式创建这样的转换吗？类型强制？自定义组件？我开始学习挂毯，所以请随意冗长:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T19:17:36.497

另一种选择是绑定您自己的 tml 前缀。[这里](http://wiki.apache.org/tapestry/Tapestry5HowToAddMapBindingPrefix)有一个绑定前缀的例子。

我们编写了自己的前缀，`map`它允许我们像这样获取 tml 中的值：

```
${map:myMap.key1} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T20:41:40.880

好的，我想通了。我做了一个简单的组件 MapField：

```
@Parameter(required=true)
Map<String, String> map;

@Parameter(required=true, allowNull=false, defaultPrefix = BindingConstants.LITERAL)
String key;

public String getMapValue() {
    return map.get(key);
}

public void setMapValue(String value) {
    map.put(key, value);
} 
```

tml：

```
<html xmlns:t="http://tapestry.apache.org/schema/tapestry_5_3.xsd">
    <t:textfield value="mapValue"/>
</html> 
```

就是这样。现在我们可以在其他 tml 中使用它：

```
<t:mapField key="existingOrNot" t:map="myMap"/> 
```

在页面中，我们只需要`myMap`作为属性：

```
@Property @Persist Map<String, String> myMap; 
```

可能还有更多事情要做，比如将所有额外的 html 参数传递给文本字段等

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-20T23:11:34.207

您将需要在您的 java 类中创建一个访问器方法。

最直接的方法是添加一个方法：

`getMapValue(String key){...}`

然后你可以改变你的 tml 来使用

`value="getMapValue('key1')"`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-22T11:15:00.587

您应该能够像这样遍历密钥集：

```
<form t:type="Form">
    <t:Loop t:source="myMap.keySet()" t:value="currentKey"> 
        <input type="text" t:type="Textfield" t:value="currentValue"/>
    </t:Loop>
</form> 
```

您必须在类文件中添加一些代码来存储当前映射键并提供对当前值的访问权限：

```
@Property
private Object currentKey;

@Persist
@Property
private Map<String,String> myMap;

public String getCurrentValue() {
     return this.myMap.get(this.currentKey);
}

public void setCurrentValue(final String currentValue) {   
    this.myMap.put(this.currentKey, currentValue);
} 
```

（这个答案改编自我[之前的一个答案](https://stackoverflow.com/questions/2433410/tapestry-loop-through-hashmap/2434992#2434992)。）

# iphone - HTML 内容适合 UIWebview 而无需缩小

> ID：10666484
> 
> 赞同：54
> 
> 时间：2012-05-19T15:22:03.250
> 
> 标签：iphone, objective-c, uiwebview

我正在使用`UIWebView`来呈现一些 HTML。但是，虽然我的 webview 的宽度是 320，但我的 HTML 仍然显示为全宽并且可以水平滚动。

我想实现与本机邮件应用程序相同的东西，即它适合该宽度内的所有内容而不缩小 - 本机邮件应用程序如何呈现这样的 HTML？

## 更新

我认为使用视口元标记会有所帮助，但我无法让它工作。

这是正在发生的事情：

![在此处输入图像描述](../Images/e5416b56fb16563ad7b6bba5ce8f3098.png)

如您所见，内容不适合设备宽度。我已经尝试了很多`viewport`元标记的组合。以下是我尝试 Martins 建议时发生的情况的示例。

可以在[此处](http://dl.dropbox.com/u/50941418/2-build.html)找到原始 HTML 。

本机邮件应用程序呈现此 HTML 的方式[**是这样**](http://dl.dropbox.com/u/50941418/iphone_ex.PNG)的。

* * *

## 回答 #1

> 赞同：133
> 
> 时间：2012-05-22T13:00:02.650

这是你要做的：

在拥有 Web 视图的 UI 控制器中，将其设为`UIWebViewDelegate`. 然后在设置要加载的 URL 的地方，将委托设置为控制器：

```
NSString *urlAddress = @"http://dl.dropbox.com/u/50941418/2-build.html";
NSURL *url = [NSURL URLWithString:urlAddress];
NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
[webView loadRequest:requestObj];  
webView.delegate = self; 
```

最后实现`webViewDidFinishLoad:`正确设置缩放级别：

**此选项适用于 iOS 5.0 和 >**

```
- (void)webViewDidFinishLoad:(UIWebView *)theWebView
{
  CGSize contentSize = theWebView.scrollView.contentSize;
  CGSize viewSize = theWebView.bounds.size;

  float rw = viewSize.width / contentSize.width;

  theWebView.scrollView.minimumZoomScale = rw;
  theWebView.scrollView.maximumZoomScale = rw;
  theWebView.scrollView.zoomScale = rw;  
} 
```

我希望这有帮助...

选项 B，您可以尝试更改 HTML（此示例可以完成工作，但从 HTML 解析的角度来看并不完美。我只是想说明我的观点。它确实适用于您的示例，并且可能适用于大多数情况。 40 可能可以通过编程方式检测到，我没有尝试对此进行研究。

```
NSString *urlAddress = @"http://dl.dropbox.com/u/50941418/2-build.html";
NSURL *url = [NSURL URLWithString:urlAddress];

NSString *html = [NSString stringWithContentsOfURL:url encoding:[NSString defaultCStringEncoding] error:nil];
NSRange range = [html rangeOfString:@"<body"];

if(range.location != NSNotFound) {
  // Adjust style for mobile
  float inset = 40;
  NSString *style = [NSString stringWithFormat:@"<style>div {max-width: %fpx;}</style>", self.view.bounds.size.width - inset];
  html = [NSString stringWithFormat:@"%@%@%@", [html substringToIndex:range.location], style, [html substringFromIndex:range.location]];
}

[webView loadHTMLString:html baseURL:url]; 
```

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2013-03-06T06:41:42.750

只需添加以下内容：

```
webView.scalesPageToFit = YES; 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-22T09:50:09.100

通常，您应该使用视口元标记。但是它的使用非常不稳定，主要是如果你想要一个跨平台的网页。

这也取决于你有什么内容和CSS。

对于我的 iPhone 主页，它必须从纵向自动调整为横向，我使用这个：

```
<meta name="viewport" content="width=device-width; minimum-scale=1.0; maximum-scale=1.0; user-scalable=no"> 
```

如果您需要特殊调整大小，也可以使用事件：

```
<body onorientationchange="updateOrientation();"> 
```

在您的 javascript 中使用相应的功能：

```
function updateOrientation() {
  if(Math.abs(window.orientation)==90)
      // landscape
  else
      // portrait   
} 
```

**编辑 ：**

看到您的页面源代码，似乎您是使用网络编辑器制作的，不是吗？

好的，我明白了。您的主 div 的宽度为 600 像素。iphone屏幕分辨率为320x480。600 > 320 所以它超出了屏幕边界。

现在，让我们做一些简单的操作：

```
320 / 600 = 0.53
480 / 600 = 0.8 
```

因此，您希望最小缩小 0.5 倍，最大缩小 0.8 倍。让我们改变视口：

```
<meta name="viewport" content="width=device-width; minimum-scale=0.5; maximum-scale=0.8; user-scalable=no"> 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-11-01T21:20:37.763

对我有用的是在 Interface Builder 中选择 UIWebView 并选中“Scales Page To Fit”框：

![在此处输入图像描述](../Images/24ef42b4592ac90acf84d8b1c4b1ec7e.png)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-07-29T13:45:18.237

```
@implementation UIWebView (Resize)

- (void)sizeViewPortToFitWidth {
    [self stringByEvaluatingJavaScriptFromString:[NSString stringWithFormat:@"document.querySelector('meta[name=\"viewport\"]').setAttribute('content', 'width=%d;', false); ", (int)self.frame.size.width]];
}

@end 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-11-29T10:40:28.237

**斯威夫特 3：**

> 使用此扩展可以根据 webview 的大小调整 webview 内容的大小。

```
extension UIWebView {
    ///Method to fit content of webview inside webview according to different screen size
    func resizeWebContent() {
        let contentSize = self.scrollView.contentSize
        let viewSize = self.bounds.size
        let zoomScale = viewSize.width/contentSize.width
        self.scrollView.minimumZoomScale = zoomScale
        self.scrollView.maximumZoomScale = zoomScale
        self.scrollView.zoomScale = zoomScale
    }
} 
```

**如何调用？**

```
webViewOutlet.resizeWebContent() 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-01-30T21:44:28.147

您可以`NSAttributedString`从 HTML 生成一个（在后台执行）：

```
@implementation NSAttributedString (Utils)

+ (void)parseHTML:(NSString *)html withCompletion:(void (^)(NSAttributedString *completion, NSError *error))completion
{
    dispatch_async(dispatch_get_global_queue( DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^(void){
        NSError * __autoreleasing *error = nil;
        NSAttributedString *result = [[NSAttributedString alloc] initWithData:[html dataUsingEncoding:NSUTF8StringEncoding]
                                                                      options:@{NSDocumentTypeDocumentAttribute: NSHTMLTextDocumentType,
                                                                                NSCharacterEncodingDocumentAttribute: @(NSUTF8StringEncoding)}
                                                           documentAttributes:nil error:error];
        NSError *safeError = (error != nil) ? *error : nil;
        dispatch_sync(dispatch_get_main_queue(), ^(void){
            completion(result, safeError);
        });
    });
}

@end 
```

并通过`UITextView`实例展示它：

```
[NSAttributedString parseHTML:htmlString withCompletion:^(NSAttributedString *parseResult, NSError *error) {
        bodyTextView.attributedText = parseResult;
}]; 
```

但是，某些布局功能可能会因这种方法而损坏。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-02-17T14:09:36.590

我通过取消勾选“缩放页面以适应”解决了这个问题 [![在此处输入图像描述](../Images/eea804e6b6a7b8a7bb2faeec6fe59267.png)](https://i.stack.imgur.com/Z41Wh.png)

# java - 自动装配来自不同模块的 bean

> ID：10666486
> 
> 赞同：6
> 
> 时间：2012-05-19T15:22:17.397
> 
> 标签：java, spring, hibernate, autowired

我有一个大型应用程序，我想将其分解为可管理的模块。我正在使用 Spring 和 Jpa（Hibernate 作为提供者）。我提出了一个结构，其中我有一个包含所有实体和 dao 类的核心模块，其他模块使用关于持久性的核心模块，每个模块都有自己的一组服务类和控制器。

![在此处输入图像描述](../Images/6fd3e5d9bbf58a4c6f83de1c6b523bb5.png)

所有的 Jpa 和 spring 配置文件都在核心模块中。通过这种设置，我面临着在使用核心模块的模块中自动装配 dao bean 的问题。所以我的问题是，是否可以从其他模块中的核心模块自动装配 bean（或者可能使用跨模块的上下文）？如果有更好的方法，我也愿意接受有关结构的建议。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T15:32:02.493

**核心模块**必须是必须在每个子上下文模块中设置的父 Spring 上下文。通过这种方式，自动装配没有问题

每个子上下文都可以从父级访问所有 bean，但请注意父级看不到子级

根据您配置应用程序的方式，您可以通过多种方式执行此操作，即

1.  将您的核心模块在一个单独的 jar 中分发给每个模块，如本文所述[在多个 Webapps 之间共享一个 spring 上下文](http://springtips.blogspot.com.es/2007/06/using-shared-parent-application-context.html)
2.  以编程方式，在每个子模块中都有您的核心 spring xml，您可以这样做：

    ```
    ClassPathXmlApplicationContext parentAppContext = new ClassPathXmlApplicationContext();
    parentAppContext.setConfigLocation("spring-core.xml"); // this is your core spring xml
    parentAppContext.refresh();
    ClassPathXmlApplicationContext moduleAppContext = new ClassPathXmlApplicationContext();
    moduleAppContext.setConfigLocation("others.xml");
    moduleAppContext.setParent(parentAppContext);
    moduleAppContext.refresh(); 
    ```

# hadoop - hadoop中的SUCCESS和part-r-00000文件是什么

> ID：10666488
> 
> 赞同：44
> 
> 时间：2012-05-19T15:22:47.023
> 
> 标签：hadoop, mapreduce

虽然我经常在我的 Ubuntu 机器上使用 Hadoop，但我从来没有想过`SUCCESS`和`part-r-00000`文件。输出总是驻留在`part-r-00000`文件中，但是文件有什么用`SUCCESS`呢？为什么输出文件有名字`part-r-0000`？是否有任何意义/任何命名法，或者这只是一个随机定义的？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-05-19T16:14:31.600

见[http://www.cloudera.com/blog/2010/08/what%E2%80%99s-new-in-apache-hadoop-0-21/](http://www.cloudera.com/blog/2010/08/what%E2%80%99s-new-in-apache-hadoop-0-21/)

> 成功完成作业后，MapReduce 运行时会在输出目录中创建一个 _SUCCESS 文件。这对于需要仅通过检查 HDFS 来查看结果集是否完整的应用程序可能很有用。(MAPREDUCE-947)

这通常由作业调度系统（例如 OOZIE）使用，以表示在所有数据都已输出时可以开始对该目录内容的后续处理。

**更新**（回应评论）

输出文件默认命名为 part-x-yyyyy 其中：

*   `x`是 'm' 或 'r'，取决于作业是仅地图作业还是减少
*   `yyyyy`是 mapper 或 reducer 任务编号（从零开始）

因此，具有 32 个减速器的作业将具有名为 part-r-00000 到 part-r-00031 的文件，每个减速器任务一个。

# php - Erratic 500 error on Codeigniter app

> ID：10666493
> 
> 赞同：0
> 
> 时间：2012-05-19T15:23:27.757
> 
> 标签：php, codeigniter, error-handling

My CI app has been working well so far.

However I noticed that when a longer SQL query is requested (for example on the home page where around 50 blog posts are shown) there is a serious problem.

Sometimes the page loads fine. Unpredictably, as I reload that same page - with no change in content - the browser keeps hanging until I get back an Apache 500 error. This happens on multiple browsers.

CI error logs show nothing. PHP error logs show nothing.

I've noticed this is not an issue with smaller queries (ie, 20 posts), but am unsure if it has anything to do with the problem, after all, it does download 50 posts on some attempts.

I know this is hard to explain in detail, but if anyone could give me any pointers on how to debug I'd be very grateful. Glad to add any info.

The app is running on a Plesk 9 RHEL server, PHP 5.3.8, MySQL 5.5.17, CI 2.1.0.

php error log file

```
-rw-rw-r-- 1 apache       apache              0 May 19 10:46 php_errors.log 
```

php.ini info

```
error_log   /var/log/php_errors.log /var/log/php_errors.log
log_errors  On                      On 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T21:40:24.453

在这里使用火花调试工具栏：http: [//getsparks.org/packages/Debug-Toolbar/versions/HEAD/show](http://getsparks.org/packages/Debug-Toolbar/versions/HEAD/show)

然后观察你的查询加载的时间，查看你的内存等。慢慢地将你的帖子数从 20 增加到 30 到 50 到 100 等，直到发生错误 - 看看是否有什么问题。

我怀疑发生了 PHP 超时，要么是因为您将超时值配置为低（应该在 230 左右），要么是您的查询写得非常糟糕且效率低下，导致服务器需要很长时间才能使用更大的查询返回结果.

# java - ArrayOutOfBounds Exception

> ID：10666495
> 
> 赞同：1
> 
> 时间：2012-05-19T15:23:42.607
> 
> 标签：java, arrays

I have been using this - 1 resolution for a while now, and was wondering if there is a way to correct the for loop arrayoutofbounds without the use of -1\. Please advise?

```
for(int i = 0; i < hand.length - 1 ; i++)
        {
            if(this.hand[i].getRank() == this.hand[i + 1].getRank())
                return true;
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T15:30:31.777

假设等级是`int`

```
 int prevRank = this.hand[0].getRank();
    for(int i = 1; i < hand.length; i++)
    {
        int currentRank = this.hand[i].getRank();
        if(currentRank == prevRank)
            return true;
        prevRank = currentRank;
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T15:30:35.477

您可以`i +1`在尝试从数组中读取之前检查元素是否存在。

像这样的东西会起作用：

```
for(int i = 0; i < hand.length; i++)
        {   
            if(i + 1 < this.hand.length && this.hand[i].getRank() == this.hand[i + 1].getRank())
                return true;
        } 
```

虽然我认为它不一定比你已经拥有的更好。也许有人会争辩说我的版本更明确，但我会说你已经拥有的就可以了。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-19T15:28:57.860

Remember, if you want to iterate over all the items in a collection, you can use the `for-each` form:

```
for (YourClass item : collection) {
    // do something with item
} 
```

[http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html](http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html)

**EDIT:** just to show a way to use the iterator.

```
int nextToCompare = 1; // the index of the next item in the array to compare with the current item
for (Item item : this.hand) {
    if (nextToCompare < this.hand.length // checks if there is next item to compare
            && item.getRank() == this.hand[nextToCompare++].getRank()) {
        return true;
    }
}
return false; 
```

One cons of this method is that it iterates trough the entire array, rather than over `n - 1` elements.

I think the method you posted is actually a good solution, in terms of efficiency and clarity.

# objective-c - Custom UITableViewCell does not appear on second load

> ID：10666496
> 
> 赞同：0
> 
> 时间：2012-05-19T15:23:43.227
> 
> 标签：objective-c, ios, uitableview

I have a custom uitableview with custom uitableviewcell in my view cell. The cell doesn't show on second load. That is, when I go from this view to another and back to this view.

This is how I load my table in my view.

```
CropTableViewController *cropTblViewCon = [[CropTableViewController alloc]init];
 self.cropTableViewController = cropTblViewCon;
cropTableViewController.view.frame = cropTblView.frame;
[cropTblView removeFromSuperview];  
[self.view addSubview:cropTableViewController.view];
self.cropTblView = cropTableViewController.tableView; 
```

This is how I go another view

```
AppDelegate_iPhone *appDelegate = [[UIApplication sharedApplication] delegate];
AddPestReportStepOne *report = [[AddPestReportStepOne alloc]init];
[appDelegate.navCon pushViewController:report animated: YES];   
[report release]; 
```

This is how I load my table cell in my custom table view.

```
static NSString *CellIdentifier = @"CustomCropCell";    
CustomCropCell *cell = (CustomCropCell *) [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
tableView.scrollEnabled = NO;
//  tableView.separatorStyle = UITableViewCellSeparatorStyleNone;
    NSArray *topLevelObjects = [[NSBundle mainBundle] 
                              loadNibNamed:@"CustomCropCell" owner:nil options:nil];

    for (id currentObject in topLevelObjects){

        if ([currentObject isKindOfClass:[UITableViewCell class]]) {
            cell = (CustomCropCell *) currentObject;
            break;
        }
    }
}
//if (counter<6 ) {

CropEntity *crop = [[CropEntity alloc] init];
crop=[ cropList objectAtIndex:counter];

NSString *imgStr = [NSString stringWithFormat:@"%@%@%@",domainName,cropImagePath, [crop cropImage]];    
UIImage *image = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:imgStr]]];
CGSize size = CGSizeMake(80, 80);
[cell setBackgroundColor: [UIColor clearColor]];
image = [Utilities scale:image toSize:size ];
[cell.columnOne setTag: [[crop cropId] integerValue] ];
[cell.columnOne setTitle:[crop cropName] forState:UIControlStateNormal];
[cell.columnOne setTitleColor:[UIColor blackColor] forState:UIControlStateNormal];
[cell.columnOne setTitleEdgeInsets:UIEdgeInsetsMake(0.0, -image.size.width, -75.0, 0.0)]; // Left inset is the negative of image width. counter = counter+ 1;
[cell.columnOne setImage:image forState:UIControlStateNormal];
[cell.columnOne setImageEdgeInsets:UIEdgeInsetsMake(-15.0, 0.0, 0.0, -cell.columnOne.titleLabel.bounds.size.width)]; // Right inset is the negative of text bounds width.   
[cell.columnOne setBackgroundColor: [UIColor clearColor]];
counter = counter + 1; 
```

It seems that the rows are not removed. My cellforrowat indexpath keep increasing...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T17:00:22.983

好的，我假设您想将 UITableView 添加到 ViewController。以下是执行此操作的步骤：

(1) 您已经创建了一个 UIViewController，无论是通过代码还是界面构建器

(2) 创建一个 UITableView，并将它添加到你的 UIViewController

```
UITableView *tableView = [[UITableView alloc] 
                          initWithFrame:CGRectMake(0, 0, 320, 440) 
                          style:UITableViewStylePlain];

// Set up the tableView delegate and datasource

[self.view addSubview:tableView];

[tableView release]; 
```

我确定您将 tableView 添加到 UIViewController 是有原因的（没有理由有额外的 UITableViewController。如果不只是使用 UITableViewController，并设置 UITableView。

另外，请记住您创建 tableView 的位置。例如，如果您在 init 或 viewDidLoad 中创建它并使用 UINavigationController，则当您点击 UINavigationController 上的后退按钮时，不会调用 ViewDidLoad 或 init。自己试试，放个NSLog语句来测试。

所以要么使用 viewDidAppear 要么 [tableView reloadData];

编辑：

想想你的代码，你创建了一个 UITableViewContoller，然后你从它的超级视图中删除它的 UITableView（没有意义），然后你将 UITableViewControllers 视图（UITableView）添加到 self.view，我猜这是一个 UIViewController。当然这不可能是你想要做的。

我建议阅读 Apple 的 View Programming guide，以更好地理解 UIViewControllers 和 Views。

[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CocoaViewsGuide/Introduction/Introduction.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CocoaViewsGuide/Introduction/Introduction.html)

# iphone - 如何擦除子视图中的线条

> ID：10666499
> 
> 赞同：1
> 
> 时间：2012-05-19T15:24:18.030
> 
> 标签：iphone, objective-c, uiviewcontroller, drawrect

我正在开发一个照片应用程序，您可以在其中在照片上画线。背景是照片，通过drawrect我在子视图上画线。

一切正常，但我如何擦除子视图上的线条（如橡皮擦），我尝试使用 clearColor 作为 setStroke。

是否可以像这样擦除线条。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T16:16:44.550

如果要使用完全透明的颜色进行绘制，则必须将混合模式设置为`kCGBlendModeCopy`任何效果。

这通常通过`CGContextSetBlendMode`函数来​​完成。如果你`UIBezierPath`用于绘图，你也可以使用该`strokeWithBlendMode:alpha:`方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T17:49:34.857

@omz 给出的响应的实现可能是：（
假设`imgBlank`放置`UIImageView`在视图控制器的主视图之上）

```
-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event{
    UITouch *touch = [touches anyObject];
    CGPoint currentPoint = [touch locationInView:self.imgBlank];
    NSValue *valCurrPoint=[NSValue valueWithCGPoint:CGPointMake(currentPoint.x, currentPoint.y)];
    [self.dots addObject:valCurrPoint];
    [self performSelector:@selector(draw:) withObject:valCurrPoint afterDelay:0];
}

-(void)draw:(NSValue*)pointz{
    CGPoint point=[pointz CGPointValue];
    UIGraphicsBeginImageContextWithOptions(self.imgBlank.frame.size,NO,0);
    [self.imgBlank.image drawInRect:CGRectMake(0, 0, self.imgBlank.frame.size.width, self.imgBlank.frame.size.height)];
    CGContextSetLineCap(UIGraphicsGetCurrentContext(), kCGLineCapRound);
    CGContextSetLineWidth(UIGraphicsGetCurrentContext(),tickness);//set the tickness here
    CGContextSetBlendMode(UIGraphicsGetCurrentContext(), kCGBlendModeClear);
    CGContextSetRGBStrokeColor(UIGraphicsGetCurrentContext(), 1.0f, 1.0f, 1.0f, 1.0);
    CGContextBeginPath(UIGraphicsGetCurrentContext());  
    CGContextSetShouldAntialias(UIGraphicsGetCurrentContext(), YES);
    CGContextMoveToPoint(UIGraphicsGetCurrentContext(), _lastPoint.x, _lastPoint.y);
    CGContextAddLineToPoint(UIGraphicsGetCurrentContext(), point.x, point.y);
    CGContextStrokePath(UIGraphicsGetCurrentContext());
    self.imgBlank.image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    _lastPoint = point;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-20T20:46:12.650

我尝试使用@omz 在 UIBezierPath 中使用 strokeWithBlendMode:alpha: 执行此操作的第二个建议：效果很好。这是代码：

```
if (pen) {
    [self updateColorFromPen];
    [path setLineWidth:3.0];
} else if (eraser) {
    [[UIColor clearColor] setStroke];
    [path setLineWidth:42.0];
    [path strokeWithBlendMode:kCGBlendModeCopy alpha:1];
} 
```

# mysql - Mysql加入与重复

> ID：10666502
> 
> 赞同：0
> 
> 时间：2012-05-19T15:24:38.273
> 
> 标签：mysql, database-normalization

我今天阅读了这篇关于连接性能的博客文章[http://www.andrewrollins.com/2009/06/21/mysql-join-performance/ 。](http://www.andrewrollins.com/2009/06/21/mysql-join-performance/)正如所见，加入可能会以某种方式降低性能。

现在让我们以两个表 user_profile 和 user_gallery 为例。

```
user_profile
user_id | avatar | nickname | ...

user_gallery
image_id | user_id | image | caption | is_avatar 
```

在页面浏览用户时，会列出用户及其昵称和头像图像。

我可以通过加入在用户列表中获取图像

```
INNER JOIN user_gallery ON user_gallery.user_id=user_profile.user_id WHERE user_gallery.is_avatar=1 
```

或者我可以在**头像**字段中添加一个图像路径。在这种情况下，我不需要使用**is_avatar**字段，并且我拥有在表 user_profile 中显示用户所需的所有数据。所以不需要额外的连接。但是由于头像图像是用户图库的一部分，这意味着**头像**的值也在 user_gallery 表中，因此有一个重复值。

考虑到这个确切的情况，严格遵循可能会降低性能的规范化规则真的值得吗？在这种情况下什么会更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T15:31:34.757

在我看来，合乎逻辑的选择是放弃该`is_avatar`领域，而只是`user_profile.avatar`参考`image_id`...

# c# - 使用 Random 对象生成颜色

> ID：10666508
> 
> 赞同：1
> 
> 时间：2012-05-19T15:25:52.580
> 
> 标签：c#

我有一个非常简单的表格，带有 16 个标签的网格，我希望从我选择的 12 种颜色中随机设置每个标签的背景颜色。

这是我的代码：

```
private void btnRandom_Click(object sender, EventArgs e)
    {
        txtA1.BackColor = RandomColor();
        txtA2.BackColor = RandomColor();
        txtA3.BackColor = RandomColor();
        txtA4.BackColor = RandomColor();
        txtB1.BackColor = RandomColor();
        txtB2.BackColor = RandomColor();
        txtB3.BackColor = RandomColor();
        txtB4.BackColor = RandomColor();
        txtC1.BackColor = RandomColor();
        txtC2.BackColor = RandomColor();
        txtC3.BackColor = RandomColor();
        txtC4.BackColor = RandomColor();
        txtD1.BackColor = RandomColor();
        txtD2.BackColor = RandomColor();
        txtD3.BackColor = RandomColor();
        txtD4.BackColor = RandomColor();
    }

    private Color RandomColor()
    {            
        Random rand = new Random();
        int r = rand.Next(1, 12);
        switch (r)
        {
            case 1:
                return Color.FromKnownColor(KnownColor.DodgerBlue);
            case 2:
                return Color.FromKnownColor(KnownColor.MediumAquamarine);
            case 3:
                return Color.FromKnownColor(KnownColor.Teal);
            case 4:
                return Color.FromKnownColor(KnownColor.OrangeRed);
            case 5:
                return Color.FromKnownColor(KnownColor.LightCoral);
            case 6:
                return Color.FromKnownColor(KnownColor.Red);
            case 7:
                return Color.FromKnownColor(KnownColor.MediumOrchid);
            case 8:
                return Color.FromKnownColor(KnownColor.MediumPurple);
            case 9:
                return Color.FromKnownColor(KnownColor.DarkOrchid);
            case 10:
                return Color.FromKnownColor(KnownColor.Lime);
            case 11:
                return Color.FromKnownColor(KnownColor.PaleGreen);
            case 12:
                return Color.FromKnownColor(KnownColor.SeaGreen);
            default:
                return Color.FromKnownColor(KnownColor.White);
        }
    } 
```

但是发生的事情是所有 16 个标签都被分配了相同的背景色，而不是每个标签都被单独随机分配。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-19T15:28:02.407

**问题的可能原因**

`Random`这是因为您每次调用该方法时都在创建对象`RandomColor()`，并且几乎同时调用它几次。

**解释**

当您编写`new Random();`伪随机函数时，会根据当前时间使用种子启动。种子是确定`Random`对象返回的值（伪随机函数的值）的值。这意味着当您`Random`使用相同的种子创建两个对象时，它们在后续`Next()`方法中返回相同的值。

在您的情况下，您多次调用该方法，因此种子可能是相同的，这就是它为所有标签返回相同值的原因。

**建议的解决方案**

为了修复它，移到`Random rand = new Random();`方法之外，只为一个类实例创建一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T15:29:19.883

“如果你在方法级别使用新的 Random() 作为本地时间相关的种子会重复自己。” [链接](http://www.dotnetperls.com/random) 在随机类中使用静态变量：

```
private static Random rand = new Random();

private void btnRandom_Click(object sender, EventArgs e)
    {
        //code here
    }

    private Color RandomColor()
    {
        int r = rand.Next(1, 12);
        //switch here
        return Color.White;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T15:30:41.193

尝试类似的东西

```
static Random _r = new Random();
    static void F()
    {
    int n = _r.Next(5);
    // Can return 0, 1, 2, 3, or 4
    Console.WriteLine(n);
    } 
```

[随机http://www.dotnetperls.com/random](http://www.dotnetperls.com/random)上的精彩页面

# android - Loading Page export tool for mobile app

> ID：10666513
> 
> 赞同：0
> 
> 时间：2012-05-19T15:27:05.087
> 
> 标签：android, iphone, ios, image, mobile

Does anyone know of a tool that takes an image or images and exports it to all the various iPhone and android size specifications?

Recreating all the minor variations is a bear. I was looking a phatch as a possible solution, but wanted to see if there was already something written.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T17:26:20.687

我知道一个仅限 iOS 的应用程序，它可以通过简单的拖放帮助为 iPhone 创建 HD/SD 图像，可以在 Mac AppStore 中查看它，称为 ShipIt！[http://itunes.apple.com/us/app/shipit!/id492043869?mt=12](http://itunes.apple.com/us/app/shipit!/id492043869?mt=12)

至于安卓我不知道。

# php - 使用 .htacces 重写带有查询字符串的 URL

> ID：10666514
> 
> 赞同：1
> 
> 时间：2012-05-19T15:27:11.010
> 
> 标签：php, .htaccess, query-string

我有一个页面是 www.example.com/page_name.php?var1=dynamic_var1&var2=dynamic_var2

我想使用 .htaccess 文件使它看起来像这样 www.example.com/page_name/dynamic_var1/dynamic_var2

到目前为止我已经尝试过了

```
RewriteRule ^page_name/(.*)/(.*)$ page_name.php?var1=$1&var2=$2 [NC] 
```

问题是当它进入数据库时​​它是这样的

```
SELECT * FROM table_name WHERE id=dynamic_var1/dynamic_var2.php/dynamic_var1 LIMIT 1 
```

我也试过这个

```
RewriteRule page_name/(\w+)/(\w+) page_name.php?var=$1&var2=$2 
```

它正在加载页面，但没有任何图片或 css 文件或任何东西，当我使用 firebug 时，它说它无法加载给定的 URL。

当我尝试这个时

```
RewriteRule ^page_name/(\w+)/(\w+)$ page_name.php?var=$1&var2=$2 
```

它给了我内部服务器错误

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T15:30:23.503

不要尝试从`.htaccess`文件中拆分 URL。您为什么不尝试简单地将整个查询字符串传递给您`index.php`或您想要的任何其他脚本并在那里解析请求......

```
RewriteRule ^(.+)$ index.php?url=$1 [QSA,L] 
```

一种更简单的方法是将所有请求简单地重定向到一个`index.php`执行类似操作的文件中 -

`index.php`-

给定`http://yourdomain.com/user/123`

```
$originalURL = $_GET['url'];
$URLParts = explode('/',$originalURL); 
```

现在你有`$URLParts`

```
Array (
 'user',
 '123'
) 
```

现在您可以轻松地将这些值放入您的 SQL 查询中。

**不过要注意**SQL 注入！始终使用[`mysql_real_escape_string()`](http://php.net/manual/en/function.mysql-real-escape-string.php)并确保清理任何传入数据...

# activerecord - Timestamp Column from Joined Table Becomes String

> ID：10666517
> 
> 赞同：1
> 
> 时间：2012-05-19T15:27:35.003
> 
> 标签：activerecord

I have a table named `subs` which has many `articles`. The `articles` table has a timestamp column called `published`.

```
Sub.select( "subs.*,MAX(articles.published) published").joins("LEFT OUTER JOIN articles ON subs.id=articles.sub_id").group("subs.id").first.published.class
=> String
Article.select("max(published) published").group("id").first.published.class
=>  ActiveSupport::TimeWithZone 
```

I want to get an `ActiveSupport::TimeWithZone` object back from the first query.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-07T01:58:59.863

**导轨 3**

Rails 根据其数据库列定义确定如何键入转换属性。例如，假设您的模型`created_at`上有一个方法。`Sub`加载记录时`read_attribute`使用（[ActiveRecord::AttributeMethods::Read](https://github.com/rails/rails/blob/3-2-stable/activerecord/lib/active_record/attribute_methods/read.rb)）。这用于`type_cast_attribute`确定如何根据列信息转换值。例如，如果您使用的是 PostgreSQL，它可能会使用：

```
Sub.columns.detect { |c| c.name == "created_at" }.type_cast_code("v")
=> "ActiveRecord::ConnectionAdapters::PostgreSQLColumn.string_to_time(v)" 
```

但是 Rails 不知道如何处理`Sub`模型上没有的列。所以它只返回一个`String`. 如果您需要使用`ActiveSupport::TimeWithZone`对象，可以使用以下方式转换值：

```
published = Sub.select( "subs.*,MAX(articles.published) published").joins("LEFT OUTER JOIN articles ON subs.id=articles.sub_id").group("subs.id").first.published
published.present? ? Time.zone.parse(published) : nil 
```

**导轨 4**

在 Rails 4 中，Rails 对这种类型转换更加智能。当 SQL 被执行时，[`ActiveRecord::Result`](https://github.com/rails/rails/blob/master/activerecord/lib/active_record/result.rb)被创建并且`column_types`被传递给初始化器。在您的示例`Sub.select`查询中，该`published`列将被转换为一个`Time`对象。

# ruby-on-rails-3 - heroku rake aborted! could not connect to server: Connection timed out

> ID：10666523
> 
> 赞同：0
> 
> 时间：2012-05-19T15:28:23.067
> 
> 标签：ruby-on-rails-3, deployment, heroku

Recently I have resetted my database on heroku by the below command.

```
heroku pg:reset SHARED_DATABASE 
```

And I have ran the below command.

```
heroku run rake db:migrate 
```

The response I have received is shown below.

```
rake aborted!
could not connect to server: Connection timed out
Is the server running on host "ec2-23-23-203-225.compute-1.amazonaws.com" and accepting
TCP/IP connections on port 5432?

Tasks: TOP => db:migrate
(See full trace by running task with --trace) 
```

Any idea?

Thank you.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T18:49:08.470

今天我可以在 status.heroku.com 上看到共享 db 问题 - 现在还可以吗？您可能受到共享数据库服务器中断的影响。

# svn - 发布版本时使用 svn 的最佳“工作实践”

> ID：10666524
> 
> 赞同：0
> 
> 时间：2012-05-19T15:28:25.320
> 
> 标签：svn, tags, dependencies, branch

我正在使用 svn 在我的工作中实施更好的“工作实践”。我们已经使用 svn 几年了，但我们只是使用它，我认为它的容量是 20%；我们将它用于源代码版本控制，但我们不使用标签或分支概念。

对于未来，我们希望能够在每次修订或发布后借助标签保留应用程序代码的快照。[这是帮助我找到最佳策略方向的文章](http://www.thousandtyone.com/blog/TheWhenAndWhyOfSVNBranchesTagsAndTrunk.aspx)。[这也给了我一些理解](http://www.methodsandtools.com/archive/archive.php?id=12)，但给我留下了更多的问题。

这是我要遵循的模式：

*   团队不断地在主干上工作。
*   主干在每个修订版和每个发行版都被标记，以便可以获得任何版本的快照。
*   标记后，团队继续在主干上工作。
*   如果团队想要尝试任何东西，他们会分支代码并在完成后将更改合并回主干。

问题是我们还有一个应用程序依赖的自制框架。在我们的上下文中，标签的帮助是能够纠正现有版本中的一个小错误，而无需将最新版本发送给客户端；后备箱中的版本。正如您所想象的，框架与应用程序不在同一组文件夹中，因此，我认为必须创建与应用程序发布相关联的框架代码标签会非常难过。考虑到框架本身也可以在没有应用程序特定要求的情况下进行更改。

出于这个原因，如果在应用程序的先前版本中发现框架中的错误，我不知道哪种是创建标签和减轻痛苦的最佳策略。目前，应用程序是指框架，该框架的库位于每个应用程序解决方案的 libs 文件夹中。在这种情况下你会怎么做？哦，我必须指出该框架有 400 000 行代码。复制和过去的解决方案将被拒绝。:)

如果我必须修复以前版本中的错误，我该如何处理标签？我知道每次我想签入标签结构时，Subversion 都会通知我。即使Subversion通知我，我是否必须使用标签创建一个分支，更正错误，然后将修改合并/签入回标签文件夹？

我的应用程序中也有依赖项，例如[DataDynamics.ActiveReports](http://www.datadynamics.com/Products/ActiveReports/Overview.aspx)和[Mindscape.LightSpeed](http://www.mindscapehq.com/products/lightspeed)，它们也是 Visual Studio 中的依赖项，因为这些应用程序集成在 IDE 中。如果我必须更正使用这些 IDE 插件以前版本的以前版本中的错误，我该如何处理？

最后，如果您能寄给我一些书籍或文章来帮助我对所有这些问题进行更深入的解释，我们将不胜感激。

非常感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T16:20:34.323

嗯，框架是一个软件产品，框架的客户是使用它的应用程序。所以框架应该遵循与应用程序本身相同的规则。

所以这是场景。您发布了应用程序的 A3.0 版本。此版本使用框架的 F2.4 版本。该框架的 SVN 存储库有一个 F2.4 版本的标签。SVN 存储库有一个 A3.0 版本的标签。

您的应用程序的客户端在 A3.0 版本中发现了一个错误。您创建一个名为 A3.0.1 的新分支，您将在其中修复错误。框架与此错误有关。因此，您在此分支中修复应用程序的代码，将修复合并到适用的主干，准备就绪后，您进行发布并创建名为 A3.0.1 的标记。在分支和标签中，您仍在使用框架的 F2.4 版本。

客户端在 A3.0.1 中发现了另一个错误。因此，您创建了一个名为 A3.0.2 的新分支来修复此错误。经过调查，您意识到这是为框架而来的。所以你要求框架团队修复这个错误，并为你提供 F2.4.1 版本。在框架团队中，他们创建了一个分支 F2.4.1 来修复错误。一旦准备就绪，他们就会发布 F2.4.1 并为此版本创建一个标签。您在分支 A3.0.2 中包含 F2.4.1，确保错误已修复（也许您还需要在应用程序代码中进行一些更改），准备就绪后，您发布版本 A3.0.2 并为它。您的版本 A3.0.2 现在依赖于框架 F2.4.1。

关于 VS 插件，如果它们不向后兼容，除了保留旧版本之外，我没有看到任何其他解决方案。但我不会依赖 IDE，更不用说 IDE 的特定插件来创建和构建软件。IDE 应该是可互换的，至少应该有一种独立于 IDE 的软件构建方式。

# mysql - 使用 IN 的 SQL 嵌套查询很慢

> ID：10666531
> 
> 赞同：0
> 
> 时间：2012-05-19T15:29:04.167
> 
> 标签：mysql, sql, full-text-search

我在 MySQL 中有 WordNet 词法数据库。我正在寻找给定单词的同义词。目前，数据以多对多关系的形式显示在三个表中：

**words** - (147,000 行)
wordid, word

**synsets** - (119,000 行)
synsetid

**sense** - (206,000 行)
wordid, synsetid

所有表都设置了索引。

每个词可以有几个同义词，每个同义词可以有几个词。我希望返回给定单词的所有同义词的所有单词。每个单词往往有大约 2 个同义词（一个用于动词用法，一个用于名词）我为此使用的 SQL 查询是：

```
SELECT w.word
FROM sense s
INNER JOIN words w
ON s.wordid = w.wordid
WHERE s.synsetid 
IN
(
SELECT s.synsetid
FROM words w
INNER JOIN sense s
ON w.wordid = s.wordid 
WHERE w.word = "word_to_search"
)
AND w.word <> 'word_to_search' ORDER BY synsetid 
```

然而，这似乎需要很长时间（~0.75 秒）。当您拆分查询时，内部查询大约需要 0.0005 秒，而每个外部查询都需要大约 0.0005 秒。

那么我做错了什么？有没有更合适的方式来构造这个查询？

**编辑：**

所以我在阅读下面的链接文章后想出的解决方案是：

```
SELECT w.word
FROM sense s
INNER JOIN words w
ON s.wordid = w.wordid
JOIN
(
SELECT s.synsetid
FROM words w
INNER JOIN sense s
ON w.wordid = s.wordid 
WHERE w.word = "word_to_search"
) i
ON i.synsetid = s.synsetid 
```

这在 ~0.0008 秒内执行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T15:32:38.673

[避免 IN 和 NOT IN](http://www.componentworkshop.com/blog/2009/06/26/sql-server-basics-avoiding-in-and-not-in)（在你的情况下只是 IN）`INNER JOIN ON`可以提高性能。

**编辑：**

这些链接：

[链接 1](http://explainextended.com/2009/06/16/in-vs-join-vs-exists/)

[链接 2](http://explainextended.com/2010/05/27/left-join-is-null-vs-not-in-vs-not-exists-nullable-columns/)

研究 JOINS 与 IN 和其他可互换操作的有效性。然而，他们得出结论，不需要避免 IN 和 NOT **IN**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T15:35:55.823

也许这个（更新）

```
SELECT w2.word, synsetid
FROM words w
INNER JOIN synset s  on  s.wordId = w.wordID
INNER JOIN words2 w2 on w2.wordID = s.wordID
WHERE w.word = "word_to_search"
GROUP BY w2.word, synsetid
ORDER BY synsetid, w2.word 
```

现在我想我明白你想要什么了。与请求的单词相同的同义词集中的所有单词。

# javascript - 如何将此 jquery 代码连接到此悬停？

> ID：10666536
> 
> 赞同：-1
> 
> 时间：2012-05-19T15:29:31.307
> 
> 标签：javascript, jquery, html

我试图弄清楚如何将 PHP 文件中使用的这行 HTML（激活悬停弹出窗口）代码连接到以下 jquery 代码。我已经让它在单个悬停实例中工作，但我计划在整个页面上进行多次悬停。

HTML 代码：

```
<a class="que" href="http://www.google.com">okok</a> 
<div class="launch">test</div> 
```

jQuery代码：

```
$(document).ready(function() {
    $("div.launch").css({'display':'block','opacity':'0'})
    $("a.que").hover(
        function () {
            $(this).next('.launch').animate({
                opacity: 1
            }, 500);
        },
        function () {
            $(this).sibling('div').stop().animate({
                opacity: 0
            }, 200);
        }
    )
}); 
```

非常感谢您的帮助... :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T15:32:33.970

只需更改您的 jQuery 选择器以匹配您想要具有悬停效果的所有元素。jQuery 选择器是 jQuery 语句的一部分，它告诉您选择哪些项目。

```
$(selectorGoesHere).takeSomeAction; 
```

选择器与您用于 CSS 的格式相同，因此，例如，`class="someClass"`在 jQuery 中，任何带有 的元素都将被选中`$(".someClass")`。jQuery 选择器可以同时引用多个匹配项，因此刚才使用的 jQuery 语句将选择*具有该类的每个元素*并执行您选择的任何操作。

例如，如果您想使用 jQuery 将 every 设置`div`为红色背景，您可以使用：

```
$("div").css("background-color","#FF0000"); 
```

分解后，该语句查找每个`div`元素（由选择器指定），然后将 CSS 样式应用于`background-color: #FF0000`文档`div`中的每个元素。

[http://jsfiddle.net/joycse06/hzm5p/1/](http://jsfiddle.net/joycse06/hzm5p/1/)是使用您的代码具有多个悬停效果的示例。只需按照该链接获取示例如何将您已经编写的 jQuery 语句应用于多个 HTML 元素。

**编辑：**根据下面的代码，更改您的 jQuery 以匹配[http://jsfiddle.net/hzm5p/5/](http://jsfiddle.net/hzm5p/5/)

```
jQuery(document).ready(function() {
    jQuery("div.launch").css({'display':'block','opacity':'0'})

    jQuery("a.que").hover(
        function () {
            jQuery(this).parent().next('.launch').animate({
                opacity: 1
            }, 500);
        },
        function () {
            jQuery(this).parent().next('.launch').stop().animate({
                opacity: 0
            }, 200);
        }
    )
});​ 
```

只需添加`.parent()`以获取包含`p`元素，然后获取`.next('.launch')`元素。

**编辑 2：**对于 Wordpress 中的 jQuery，您需要在`functions.php`文件中的某处包含以下行：

```
wp_enqueue_script("jquery"); 
```

此外，Wordpress 使用的 jQuery 似乎是为“兼容模式”设计的，这意味着 $ 快捷方式默认情况下不可用。您需要使用`jQuery`代替 $，除非您使用[http://digwp.com/2011/09/using-instead-of-jquery-in-wordpress/中提到的一些解决方法](http://digwp.com/2011/09/using-instead-of-jquery-in-wordpress/)

**编辑 3：**使用以下代码测试 jQuery 加载：

```
if (jQuery) {  
    alert("jQuery loaded"); 
} else {
    alert("jQuery not loaded");
} 
```

如果它已加载，那么我不知道该告诉你什么。如果不是，您需要在 Wordpress 中找出原因并加载它，否则您需要重新编写代码以使用非 jQuery 脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T15:34:19.943

您可以将 class`que`用于所有`<a>`标签，并将class用于该标签旁边的`launch`所有s 。`div``<a>`

# java - 我不应该在 Java 中执行 `String s = new String("a new string");`，即使使用自动字符串实习？

> ID：10666537
> 
> 赞同：6
> 
> 时间：2012-05-19T15:29:31.490
> 
> 标签：java, string, object, string-interning

好的，这个问题是这个问题的延伸

[Java 字符串："String s = new String("silly");"](https://stackoverflow.com/questions/334518/java-strings-string-s-new-stringsilly)

上面的问题和这个问题问的一样，但我有一个新的怀疑点。

根据`Effective Java`上述问题的答案，我们不应该**这样**做`String s = new String("a new string");`，因为那会创建不必要的对象。

我不确定这个结论，因为我认为 Java 正在做[自动字符串实习](http://en.wikipedia.org/wiki/String_interning)，这意味着对于一个字符串，无论如何内存中只有一个副本。

那么让我们看看`String s = new String("a new string");`。

`"a new string"`已经是在内存中创建的字符串。

当我这样做时`String s = new String("a new string");`，那`s`是也`"a new string"`。所以根据`automatic string interning`,`s`应该是指向 的同一个内存地址`"a new string"`吧？

那么我们怎么能说我们创造了不必要的对象呢？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-19T15:38:34.187

```
 String a = "foo"; // this string will be interned
String b = "foo"; // interned to the same string as a
boolean c = a == b; //this will be true
String d = new String(a); // this creates a new non-interned String
boolean e = a == d; // this will be false
String f = "f";
String g = "oo";
String h = f + g; //this creates a new non-interned string
boolean i = h == a // this will be false
File fi = ...;
BufferedReader br = ...;
String j = br.readLine();
boolean k = a == j; // this will always be false. Data that you've read it is not automatically interned 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T15:44:04.463

您可能想阅读更多关于JVM 中的**字符串文字池的信息。**快速谷歌搜索将我指向这篇文章： [http](http://www.xyzws.com/Javafaq/what-is-string-literal-pool/3) ://www.xyzws.com/Javafaq/what-is-string-literal-pool/3 这似乎很有效。

此外，您可能对整数文字池以及 Java 中的其他文字池感兴趣。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T15:42:14.067

使用 "=" 而不是 "=new String" 更好，因为它可能会导致单个实例而不是多个实例。

# c# - Windows Phone 7 上的 HttpWebRequest

> ID：10666542
> 
> 赞同：2
> 
> 时间：2012-05-19T15:30:03.303
> 
> 标签：c#, .net, windows-phone-7, httpwebrequest

我有这个代码：

```
 private HttpWebRequest request;
        private HttpWebResponse wResponse;
        private CookieContainer cookieContainer = new CookieContainer();
        #region PRIVATE METHODS
        private void RunRequest(string url)
        {
            request = HttpWebRequest.Create(new Uri(url)) as HttpWebRequest;
            request.UserAgent = "Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10_6_7; en-US) AppleWebKit/534.16 (KHTML, like Gecko) Chrome/10.0.648.205 Safari/534.16";
            request.ContentType = "application/x-www-form-urlencoded";
            request.CookieContainer = cookieContainer;
            request.Method = "GET";

            StartWebRequest(request);

            //Do smthng
            while (wResponse == null) { }
        }

        private void StartWebRequest(HttpWebRequest request)
        {
            request.BeginGetResponse(FinishWebRequest, request);
        }

        private void FinishWebRequest(IAsyncResult result)
        {
            wResponse = (result.AsyncState as HttpWebRequest).EndGetResponse(result) as HttpWebResponse;
        }
        #endregion 
```

并且 wRequest 变量没有填充任何响应。在 AsyncState 我有这个： ![HttpWebRequest 错误](../Images/c348b4a476fe60dc878f003fdf585e90.png)

可能是什么问题呢？

ps 相同的代码在桌面应用程序上运行良好。

谢谢，帕维尔。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T17:09:18.830

您的代码中有两个问题。

1.  您没有正确使用异步回调方法：

    代替

    `request.BeginGetResponse(FinishWebRequest, request);`

    和

    `request.BeginGetResponse(new AsyncCallback(FinishWebRequest), request);`

2.  为 GET 请求指定 Content-Type 是无效的，这对于 POST 请求是必不可少的。修改`RunRequest()`方法：

    ```
    private void RunRequest(string url, string method)
    {
        request = HttpWebRequest.Create(new Uri(url)) as HttpWebRequest;
        request.UserAgent = "Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10_6_7; en-US) AppleWebKit/534.16 (KHTML, like Gecko) Chrome/10.0.648.205 Safari/534.16";
        request.Method = method; // method can be GET, POST etc.
        if (method == "POST")
            request.ContentType = "application/x-www-form-urlencoded";
        request.CookieContainer = cookieContainer;
        ...
    } 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T15:49:41.353

使用 GET 操作时没有理由指定 ContentType；删除它应该可以解决问题！

# cocoa - NSTextView：替换所有选项卡

> ID：10666544
> 
> 赞同：3
> 
> 时间：2012-05-19T15:30:21.990
> 
> 标签：cocoa, nstextview

我有一个`NSTextView`我想使用空格而不是制表符的地方。我虽然我会`replaceOccurrencesOfString:withString:options:range:`在`textStorageWillProcessEditing:`我的，`textview delegate`但它不起作用（撤消中断）。

请问，有谁知道如何实现这样的功能？还有其他方法吗？

编辑：这就是我在`textStorageWillProcessEditing:`方法中所拥有的：

```
ts = [notification object];
[[ts mutableString] replaceOccurrencesOfString:@"\t"
                                    withString:@"  "
                                       options:NSLiteralSearch
                                         range:[ts editedRange]]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T12:47:36.873

您可以覆盖 keyUp: 方法。如果 event.keyCode == keycodefortabwhichidontknow :) 那么你可以插入四个空格。

如果没有，当然只需调用 [super keyDown:theEvent];

# java - 从片段设置进度条可见性？

> ID：10666545
> 
> 赞同：1
> 
> 时间：2012-05-19T15:30:22.537
> 
> 标签：java, android

我想知道如何从几个片段中设置例如progressBar 可见性？

```
class MyActivity extends FragmentActivity {

  public setProgressBar(boolean toggle) {
    progressBar.setVisibility(toggle);
  }
} 
```

现在我想从 MyActivity 中调用 setProgressBar(true/false)，也可以从任何 Fragment 类中调用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T15:33:21.980

在您的 Fragment 调用`getActivity()`中，将其转换为`MyActivity`并调用`setProgressBar(toggle)`

`((MyActivity) getActivity()).setProgressBar(toggle);`

# sql - Firebird SQL Server 内部函数

> ID：10666556
> 
> 赞同：2
> 
> 时间：2012-05-19T15:30:59.697
> 
> 标签：sql, function, firebird, internal

我有一个通过 LAN 部署的 Firebird 2.1.1 数据库。在最近的一次升级中，我使用了一个 FB 内部函数 (COALESCE)。当我在我的开发机器上测试我的 Delphi 应用程序时，没有任何问题。

但是当我尝试在生产机器上运行查询时，我收到一条错误消息，告诉我该功能 (COALESCE) 不可用。

Coalesce 是 FB 内置的内部函数。它不是 UDF 或存储过程，它是内置的。

问：为什么使用 Coalesce 的查询可以在我的开发机器上工作，但不能在生产机器上工作？

更多信息：

*   两者都有 XP pro SP2
*   我的程序是在 Delphi 3.0 中使用 BDE 开发的
*   顺便说一句：我在工作站（生产机器）上安装了 FB 服务器，并且，瞧，使用 Coaclesce 的查询有效！我以为 Coaclesce 是一个内部函数？！我不想在每台机器上都安装 FB Server。在三个不同的地点有七十多个工作站。

通常我在一台运行 XP 的机器上安装了 FB (ver 2.1.1)。这是我指定的数据库服务器。运行我的应用程序的所有工作站都从该服务器获取数据。我升级了我的应用程序并更改了驻留在我的客户端应用程序使用的服务器上的 FB 数据库的架构。我所做的更改之一是我第一次使用 FB 内部函数。具体来说，我正在使用函数 COALESCE。当我在工作站上运行我的应用程序时，我收到以下错误消息： -SQL 错误代码 = -804 -Function unknown -COALESCE 在工作站上运行的应用程序正在对使用 COALESCE 的服务器上的数据库运行 select 语句。

这是有趣的部分：包含 COALESCE 的查询在我的开发机器（这是我们网络上的另一个工作站）上运行良好，但在我的用户工作站（生产机器）上运行良好。所以我问自己“我的开发计算机有什么不同？” 好吧，它上面有FB服务器。所以我在用户的工作站上安装了 FB 服务器（FB 现在在我们的服务器上 + 在运行我的应用程序的工作站上）并且：我不再收到错误了！我的应用程序仍在使用服务器的数据库（而不是工作站的数据库），但好像通过在客户端工作站上拥有完整的 FB 服务器，我的应用程序现在可以找到内部 FB 功能。

我一直假设 FB 内部功能是服务器安装的一部分。它们不需要复制到工作站，也不需要声明。它们就像 SUM、MIN、MAX 或 AVG。

问：为什么 Firebird 内部函数不能在 Firebird 客户端计算机上运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T04:53:29.733

Firebird 的客户端库“fbclient.dll”（或者可能重命名为“gds32.dll”）解析语句并验证所使用的 SQL 关键字。

不必在客户端机器上安装服务器。

所发生的事情是机器运行的是旧版本的客户端库（可能 BDE 已经分发了旧的“gds32.dll”），无法识别“COALESCE”关键字。当您安装服务器版本 2.1.1 时，它还会安装更新的客户端模块，并可能将系统目录中的旧“gds32.dll”替换为兼容的“fbclient.dll”（服务器安装程序中默认选中的选项） Firebird 2.1，重命名为“gds32.dll”。

您可以尝试重现问题，在工作站中搜索“fbclient.dll”和“gds32.dll”的所有副本，然后注意它们是否真的是旧版本，并尝试仅替换此特定文件，而不安装服务器在客户端机器中。

# ios - 如何检查模态视图当前是否在我的 self.window.rootViewController 上？

> ID：10666560
> 
> 赞同：11
> 
> 时间：2012-05-19T15:31:48.440
> 
> 标签：ios, cocoa-touch, uiviewcontroller

我需要检查根视图控制器上是否还有模态视图。我面临的问题是我有来自某个需要显示的线程的第二个模态视图。我想延迟第二个模态视图，直到第一个模态视图消失。我不能在第一个被解雇后启动它，因为第二个模式视图是有条件的。

```
[self.window.rootViewController presentModalViewController:vc animated:YES]; 
```

我想做什么（随时提出更好的替代方法）：

1.  检查`self.window.rootViewController`当前是否有一个模态视图显示在顶部（或仍在动画模态视图）。
2.  采用`performSelector:afterDelay:0.1`
3.  再次检查，如果需要，再次延迟

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-19T15:51:42.837

获取`rootViewController.presentedViewController`（在 iOS 5.0+ 中可用）或`rootViewController.modalViewController`（在 iOS 2.0+ 中可用）并查看它是否为 nil。

此外，您**不想**从辅助线程呈现第二个视图控制器，所有 UI工作**都**必须在主线程上完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-01T09:58:17.040

我也遇到过这种问题。我想从推送中弹出一个模式，在我这样做之前，我想检查是否已经出现了某个屏幕，如果是，则关闭这些并弹出我的屏幕下面是代码。

```
 // Dismiss all the modals which are currently shown.
    - (void) dismissAllModalsIfAnyWithCompletion:(void(^)(BOOL success)) completion{

            BOOL hiddenByModal = nil != [[UIApplication sharedApplication].keyWindow.rootViewController presentedViewController];
        if (hiddenByModal) {
//We need to dismiss the existing modal and after completion pop up the new modal.
            [[UIApplication sharedApplication].keyWindow.rootViewController dismissViewControllerAnimated:NO completion:^{
                // After dismissing let the handler know.
                completion(YES);
            }];
        }
        else{
// If there is no modal, then simply let the handler know to pop the new modal.
            completion(YES);
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T15:49:37.690

我很想做一些更具确定性的事情。有一段代码负责执行两种模式显示，并让它跟踪第一个模式出现和消失的时间，这样，如果它收到一条显示第二个模式的消息，它知道是要这样做还是只是设置一个“待定” “ 旗帜。当它被告知第一个已被解雇时，它可以检查第二个是否未决。

# flash - 移动应用程序的 Spark 顶部水平菜单

> ID：10666566
> 
> 赞同：0
> 
> 时间：2012-05-19T15:32:35.973
> 
> 标签：flash, apache-flex, menu, flex-spark

我是 Flash 新手。在我的移动应用程序中，我需要一个简单的水平菜单（或工具栏），屏幕顶部有 3-4 个项目。ViewMenu 非常适合这项任务，但我找不到将其显示在顶部的方法 - 可能吗？
据我了解，mx:MenuBar 不适用于移动设备。是否有任何其他组件可以用作菜单？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T09:32:41.930

您可以使用 Spark 标注组件。[这是来自ActionScript 参考文档](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/Callout.html)的示例屏幕截图：

![在此处输入图像描述](../Images/60d80f033cf97cc9902cec6423e6a003.png)

标注的内容可以是包含菜单项列表的视图。

标注是在 Flex 4.6 中引入的。

这里有两个关于如何实现它的教程：

[将标注容器添加到移动应用程序](http://help.adobe.com/en_US/flex/mobileapps/WS7dd5c1363434bb706aafb086131b54b6ec7-8000.html)。

[带有源的标注组件示例。](http://devgirl.org/2011/10/17/flex-mobile-development-callout-component-sample-with-source/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T15:50:57.780

是的，它被称为 ActionBar：

Adobe 文档 - [ActionBar](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/ActionBar.html)

博客示例：[样式化操作栏](http://blogs.adobe.com/jasonsj/2011/05/tutorial-styling-the-actionbar.html)

# apache - 使用 .htaccess 文件重定向到子域

> ID：10666568
> 
> 赞同：0
> 
> 时间：2012-05-19T15:32:40.200
> 
> 标签：apache, .htaccess, mod-rewrite

在我的根文件夹中，我有一个主目录。我希望将对 mydomain.com 或 www.mydomain.com 的所有请求转发到 home.mydomain.com。在我的 cPanel 中，我已经将子域 home.mydomain.com 设置为指向 mydomain.com/home。

这是我目前在 .htaccess 文件中的内容：

```
RewriteEngine On
Options +SymLinksIfOwnerMatch
RewriteRule ^(.*)$ \/home\/$1 [L] 
```

这成功地将 mydomain.com 和 www.mydomain.com 分别转发到 mydomain.com/home 或 www.mydomain.com/home。但是 home.mydomain.com/filename 给了我一个内部服务器错误，而不是在 mydomain.com/home/filename 上提供文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T19:02:25.353

我不确定我是否理解确切的要求，但您似乎想将所有 (www.)mydomain.com 请求重写到 /home 目录，而您的子域 home.mydomain.com*已经*指向该目录，因此应该被豁免从那个重写指令。如果由于某种原因 (www.)mydomain.com 也无法设置为指向 /home，则您需要一个重写条件，例如

```
RewriteEngine On
Options +SymLinksIfOwnerMatch
RewriteCond %{HTTP_HOST} ^(www\.)?mydomain\.com$ [NC]
RewriteRule ^(.*)$ /home/$1 [L] 
```

我还删除了不需要的反斜杠。您可以使用[htaccess 测试器](http://htaccess.madewithlove.be/)轻松在线检查重写规则。

# java - 在 Linux 上的何处安装 GlassFish？

> ID：10666569
> 
> 赞同：13
> 
> 时间：2012-05-19T15:32:44.483
> 
> 标签：java, linux, glassfish, admin, application-server

**免责声明：**我对 Linux 比较陌生。我曾讨论过将其放在 SuperUser 或 ServerFault 上，因为答案*确实*需要将 Linux 解释为一个系统（而不是特定的编程问题），但是从 Java 开发人员的角度来看，我对此很感兴趣，我认为这是一个特定的问题，因为我安装 GlassFish 的位置极大地影响了我的 Java 配置，并最终影响了应用程序配置。更不用说在其他网站上发布这个问题可能不会引起 Java 开发人员的任何关注，尤其是系统管理员，他们可能对 Java 的了解不够，无法充分参与这个决定。

我正在尝试决定在哪里安装 GlassFish，在我看来，我（实际上）有 4 个可行的选项：

*   `/opt/glassfish/`
*   `/usr/local/glassfish/`
*   `/home/myUsers/glassfish/`（这是所有 OGS 文档在其示例中显示的内容）
*   `/home/ogs/glassfish`（作为自己的用户，类似于有时设置 Apache Web 服务器的方式）

我想知道每种方法的优点（考虑到 Linux 如何以不同方式处理这些目录的性质、FHS 等）和缺点是什么。

我读过将它安装在`opt/`. 但是，我通常将 3rd 方软件安装到`usr/local/`，所以我有点不确定这是否是一种策略。

Oracle GlassFish Server (OGS) 文档都展示了（但从不直接推荐）GlassFish 安装在您的主目录 ( `home/myUser/`) 下。

再说一次，我读到安装守护程序类型的服务是相当普遍的（我想*我*会使用 GlassFish，我在其中启动它一次，它只会在日常维护或崩溃时出现）作为他们的自己的用户 ( `home/ogs/glassfish/`)。

我**确信**这个决定也会受到我将如何使用 GlassFish 的影响，所以让我用一些限制来限定这个问题：

*   我打算在同一台物理机上的 4 个虚拟机上部署 4 个 OGS 实例，并将它们集群到同一个域中（4 个服务器实例中的 1 个将是域的管理服务器）
*   几个应用程序将同时部署到这个集群（所有 3 个非管理节点），并且应该 24/7/365 运行，除非它们崩溃（希望不会经常！）或者我需要维护或调整它们
*   每个应用程序都非常大，我想用**真正的管理员**配置它们，而不是“基本”de minimis，默认设置

如果这些没有提供足够具体的信息来帮助做出这个选择，请询问，我可以更具体。

我想，当尘埃落定在一天结束时，我正在（或多或少）寻找一个矩阵，其中四个目录选项中的每一个（加上我省略的任何其他明显的选项）与它们各自的优点和缺点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T16:13:03.600

还可以选择使用 Linux 发行版的包管理系统来安装 Glassfish。例如，在 Ubuntu 上，您可以使用

```
sudo apt-get install glassfish-appserv 
```

并让它安装到包所有者认为应该安装的任何地方。

我自己倾向于避开上述选项，因为我喜欢自己控制 Glassfish（或任何其他 Java 服务器/软件）的确切版本以及安装位置，但我只是想把它扔在那里，因为这是你可以做的事情之一。

现在对于您提供的各个选项：

**/opt/glassfish/** 就我而言，这是首选选项。它将软件保存在常规 Linux 安装之外的单独目录中，并允许您提到的挂载和分区优势。

**/usr/local/glassfish/** 我不太喜欢这个，因为 /usr/local 通常被使用发行版的包管理软件（apt/yum/etc）安装的第三方软件使用，并且在大多数发行版上都有bin等目录和它下的lib。在它下面放一个 glassfish 的目录，会使它不合适。

此外，我更喜欢将系统目录与不使用发行版包管理工具的自定义软件分开。

**/home/myUsers/glassfish/** , **/home/ogs/glassfish**

这2个，不推荐。

它们只在大多数地方进行了描述，因为作者不想假设用户对这些盒子具有 root 访问权限，在这种情况下，主目录将是您唯一可以保证拥有的目录。如果您拥有该系统并正在管理它，则这些限制不适用。

请记住，主目录是针对特定用户的。我始终建议使用具有所需权限的个人用户帐户来管理服务器软件。将软件放在某人的主目录中意味着您要么

1.  为需要管理 Glassfish 的每个人提供该用户帐户的密码
2.  授予多个用户对特定用户主目录的读/写访问权限。

无论哪种方式，这都不是好的系统管理策略。

这里没有太多关于 Java 的观点，但如果你问我，那就没有必要了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T00:38:12.017

关于先前的建议，仍然存在一些权衡：

*   如果放置在 /opt 或 /usr/local 中，您将必须对这些目录具有读/写访问权限，这意味着您必须对框具有 root 访问权限。在某些环境（IT 控制平台）中，IT 不允许您拥有 root 访问权限。您必须将安装、修补和升级 GlassFish 二进制文件的责任委派给 IT。
*   如果放置在 /opt 或 /usr/local 中，那么您还必须将域目录 (--domaindir) 放置在单独的位置，除非您希望它们由 root 拥有（不太可能）。这是在 Linux 上安装 GlassFish 2.x RPM 的默认设置。GlassFish 3.x 没有安装 RPM（无论如何来自 Oracle），但您仍然可以将两者分开。这不是一个糟糕的权衡，但您应该了解一些事情。
    *   如果放置在“主目录”中，则您有权升级核心二进制文件、安装补丁等，与 IT 分开。根据组织职责，这种方法有好/坏/丑。

希望这可以帮助。

# macos - Binutils stat 非法选项 -c

> ID：10666570
> 
> 赞同：7
> 
> 时间：2012-05-19T15:33:04.830
> 
> 标签：macos, gnu, bsd, stat, binutils

我在脚本中使用 stat 两次，一次是查找文件文件权限，一次是查找文件的大小。

```
 `stat -c %A "$directory/$file"`
 `stat -c %s "$directory/$file"` 
```

我正在使用 OSX 10.7，目录和文件是我所在的当前目录和文件的变量。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-19T15:38:46.337

Darwin`stat`使用`-f`参数，而不是`-c`，因为它是 GNU 扩展。

您应该从[homebrew](https://brew.sh/)、[macports](https://www.macports.org/)或[fink](http://www.finkproject.org/)下载 gnu binutils，然后`gstat`使用`stat`.

如果您不想安装 gnu binutils 而更喜欢使用标准 BSD 工具，那么：

```
stat -f%p t.c 
```

将返回模式（八进制）和

```
stat -f%z t.c 
```

将返回大小。

# html - 表格的边框半径没有按预期工作

> ID：10666573
> 
> 赞同：77
> 
> 时间：2012-05-19T15:33:24.483
> 
> 标签：html, css, html-table

我想在整个表格周围添加一个边框半径。但是以下代码在最新版本的 Firefox 和 Google Chrome 中都不起作用。

```
table {
  border-spacing: 0;
  width: 600px;
  margin: 30px;
  border: 1px solid #CCCCCC;
  border-radius: 6px 6px 6px 6px;
  -moz-border-radius: 6px 6px 6px 6px;
  -webkit-border-radius: 6px 6px 6px 6px;
  box-shadow: 0 1px 1px #CCCCCC;
}

table th:first-child {
  border-radius: 6px 0 0 0;
  -moz-border-radius: 6px 0 0 0;
  -webkit-border-radius: 6px 0 0 0;
}

table th:last-child {
  border-radius: 0 6px 0 0;
  -moz-border-radius: 0 6px 0 0;
  -webkit-border-radius: 0 6px 0 0;
}

table td:first-child,
.bordered th:first-child {
  border-left: medium none;
}

table th {
  background-color: #DCE9F9;
  background-image: -moz-linear-gradient(center top, #F8F8F8, #ECECEC);
  background-image: -webkit-gradient(linear, 0 0, 0 bottom, from(#F8F8F8), to(#ECECEC), color-stop(.4, #F8F8F8));
  border-top: medium none;
  box-shadow: 0 1px 0 rgba(255, 255, 255, 0.8) inset;
  text-shadow: 0 1px 0 rgba(255, 255, 255, 0.5);
}

table td,
table th {
  border-left: 1px solid #CCCCCC;
  border-top: 1px solid #CCCCCC;
  padding: 10px;
  text-align: left;
}
```

```
<table class="bordered">
  <thead>
    <tr>
      <th><label>Labels</label></th>
      <th><label>Labels</label></th>
      <th><label>Labels</label></th>
      <th><label>Labels</label></th>
      <th><label>Labels</label></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><label>Value</label></td>
      <td><label>Value</label></td>
      <td><label>Value</label></td>
      <td><label>Value</label></td>
      <td><label>Value</label></td>
    </tr>
  </tbody>
</table>
```

[JSFiddle](http://jsfiddle.net/XvdX9/521/)

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2012-05-19T15:58:47.353

`border-collapse: separate !important;`工作。

谢谢。

**HTML**

```
<table class="bordered">
    <thead>
        <tr>
            <th><label>Labels</label></th>
            <th><label>Labels</label></th>
            <th><label>Labels</label></th>
            <th><label>Labels</label></th>
            <th><label>Labels</label></th>
        </tr>
    </thead>

    <tbody>
        <tr>
            <td><label>Value</label></td>
            <td><label>Value</label></td>
            <td><label>Value</label></td>
            <td><label>Value</label></td>
            <td><label>Value</label></td>                            
        </tr>
    </tbody>                    
</table> 
```

**CSS**

```
table {
    border-collapse: separate !important;
    border-spacing: 0;
    width: 600px;
    margin: 30px;
}
.bordered {
    border: solid #ccc 1px;
    -moz-border-radius: 6px;
    -webkit-border-radius: 6px;
    border-radius: 6px;
    -webkit-box-shadow: 0 1px 1px #ccc;
    -moz-box-shadow: 0 1px 1px #ccc;
    box-shadow: 0 1px 1px #ccc;
}
.bordered tr:hover {
    background: #ECECEC;    
    -webkit-transition: all 0.1s ease-in-out;
    -moz-transition: all 0.1s ease-in-out;
    transition: all 0.1s ease-in-out;
}
.bordered td, .bordered th {
    border-left: 1px solid #ccc;
    border-top: 1px solid #ccc;
    padding: 10px;
    text-align: left;
}
.bordered th {
    background-color: #ECECEC;
    background-image: -webkit-gradient(linear, left top, left bottom, from(#F8F8F8), to(#ECECEC));
    background-image: -webkit-linear-gradient(top, #F8F8F8, #ECECEC);
    background-image: -moz-linear-gradient(top, #F8F8F8, #ECECEC);    
    background-image: linear-gradient(top, #F8F8F8, #ECECEC);
    -webkit-box-shadow: 0 1px 0 rgba(255,255,255,.8) inset;
    -moz-box-shadow:0 1px 0 rgba(255,255,255,.8) inset;
    box-shadow: 0 1px 0 rgba(255,255,255,.8) inset;
    border-top: none;
    text-shadow: 0 1px 0 rgba(255,255,255,.5);
}
.bordered td:first-child, .bordered th:first-child {
    border-left: none;
}
.bordered th:first-child {
    -moz-border-radius: 6px 0 0 0;
    -webkit-border-radius: 6px 0 0 0;
    border-radius: 6px 0 0 0;
}
.bordered th:last-child {
    -moz-border-radius: 0 6px 0 0;
    -webkit-border-radius: 0 6px 0 0;
    border-radius: 0 6px 0 0;
}
.bordered th:only-child{
    -moz-border-radius: 6px 6px 0 0;
    -webkit-border-radius: 6px 6px 0 0;
    border-radius: 6px 6px 0 0;
}
.bordered tr:last-child td:first-child {
    -moz-border-radius: 0 0 0 6px;
    -webkit-border-radius: 0 0 0 6px;
    border-radius: 0 0 0 6px;
}
.bordered tr:last-child td:last-child {
    -moz-border-radius: 0 0 6px 0;
    -webkit-border-radius: 0 0 6px 0;
    border-radius: 0 0 6px 0;
} 
```

[jsFiddle](http://jsfiddle.net/tapas_23571113/XvdX9/10/)

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2012-05-19T15:43:35.650

它可以工作，这是所使用工具的问题： jsFiddle 的**规范化 CSS**通过隐藏浏览器的默认值来导致问题...
参见[http://jsfiddle.net/XvdX9/5/](http://jsfiddle.net/XvdX9/5/)

**编辑：**来自 jsFiddle 的
[normalize.css](http://fiddle.jshell.net/css/normalize.css)`border-collapse: collapse`样式表将指令添加到所有表中，并在 CSS2.1 中以完全不同的方式呈现它们：

*   [分离边界模型](http://www.w3.org/TR/CSS21/tables.html#separated-borders)
*   [崩溃的边界模型](http://www.w3.org/TR/CSS21/tables.html#collapsing-borders)

这两个模型之间的差异可以在另一个小提琴中看到：http: [//jsfiddle.net/XvdX9/11/](http://jsfiddle.net/XvdX9/11/)（单元格上有一些透明度，左上角有一个巨大的边界半径，以便看看会发生什么在桌子上与其单元格）

在关于 HTML 表格的同一个 CSS2.1 页面中，还解释了浏览器应该/可以对分离边框模型中的空单元格做什么、折叠边框模型之间的区别`border-style: none`、`border-style: hidden`如何计算宽度以及应该使用哪个边框如果表格、行和单元格元素在同一边框上定义了 3 种不同的样式，则显示。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2018-10-12T08:47:52.490

这是我使用包装器的解决方案，只是删除`border-collapse`可能并不总是有帮助，因为您可能想要有边框。

```
.wrapper {
  overflow: auto;
  border-radius: 6px;
  border: 1px solid red;
}

table {
  border-spacing: 0;
  border-collapse: collapse;
  border-style: hidden;

  width:100%;
  max-width: 100%;
}

th, td {
  padding: 10px;
  border: 1px solid #CCCCCC;
}
```

```
<div class="wrapper">
  <table>
    <thead>
      <tr>
        <th>Column 1</th>
        <th>Column 2</th>
        <th>Column 3</th>
      </tr>
    </thead>

    <tbody>
      <tr>
        <td>Foo Bar boo</td>
        <td>Lipsum</td>
        <td>Beehuum Doh</td>
      </tr>
      <tr>
        <td>Dolor sit</td>
        <td>ahmad</td>
        <td>Polymorphism</td>
      </tr>
      <tr>
        <td>Kerbalium</td>
        <td>Caton, gookame kyak</td>
        <td>Corona Premium Beer</td>
      </tr>
    </tbody>
  </table>  
</div>
```

这篇文章有帮助：[https ://css-tricks.com/table-borders-inside/](https://css-tricks.com/table-borders-inside/)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-12-07T20:15:21.913

对这个老问题的注释：

我的*reset.css*已设置`border-spacing: 0`，导致角落被切断。我必须将其设置`3px`为我的半径才能正常工作（值将取决于所讨论的半径）。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2017-07-20T06:03:42.013

```
<div class="leads-search-table">
                    <div class="row col-md-6 col-md-offset-2 custyle">
                    <table class="table custab bordered">
                    <thead>

                        <tr>
                            <th>ID</th>
                            <th>Title</th>
                            <th>Parent ID</th>
                            <th class="text-center">Action</th>
                        </tr>
                    </thead>
                            <tr>
                                <td>1</td>
                                <td>News</td>
                                <td>News Cate</td>
                                <td class="text-center"><a class='btn btn-info btn-xs' href="#"><span class="glyphicon glyphicon-edit"></span> Edit</a> <a href="#" class="btn btn-danger btn-xs"><span class="glyphicon glyphicon-remove"></span> Del</a></td>
                            </tr>
                            <tr>
                                <td>2</td>
                                <td>Products</td>
                                <td>Main Products</td>
                                <td class="text-center"><a class='btn btn-info btn-xs' href="#"><span class="glyphicon glyphicon-edit"></span> Edit</a> <a href="#" class="btn btn-danger btn-xs"><span class="glyphicon glyphicon-remove"></span> Del</a></td>
                            </tr>
                            <tr>
                                <td>3</td>
                                <td>Blogs</td>
                                <td>Parent Blogs</td>
                                <td class="text-center"><a class='btn btn-info btn-xs' href="#"><span class="glyphicon glyphicon-edit"></span> Edit</a> <a href="#" class="btn btn-danger btn-xs"><span class="glyphicon glyphicon-remove"></span> Del</a></td>
                            </tr>
                    </table>
                    </div>
                </div> 
```

CSS

```
.custab{
    border: 1px solid #ccc;
    margin: 5% 0;
    transition: 0.5s;
    background-color: #fff;
    -webkit-border-radius:4px;
    border-radius: 4px;
    border-collapse: separate;
} 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2020-10-03T23:43:21.830

只需添加`overflow:hidden`到表中`border-radius`。

```
.tablewithradius {
  overflow:hidden ;
  border-radius: 15px;
} 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2021-05-29T16:56:23.413

不用担心..只需添加溢出：隐藏；然后应用边界半径。边框半径将应用于所有四个边。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2020-09-07T15:20:09.743

要使用边框半径，我在表格中有一个 20px 的边框半径，然后将边框半径放在表头的第一个子项（th）和表头的最后一个子项上。

```
table {
  border-collapse: collapse;
  border-radius:20px;
  padding: 10px;
}

table th:first-child {
  /* border-radius = top left, top right, bottom right, bottom left */
    border-radius: 20px 0 0 0; /* curves the top left */
    padding-left: 15px;
}

table th:last-child {
    border-radius: 0 20px 0 0; /* curves the top right */
} 
```

但是，如果这是使用表格数据 (td) 完成的，这将不起作用，因为它会在每个表格行上添加一条曲线。如果您的表中只有 2 行，这不是问题，但任何其他行也会将曲线添加到内行。您只希望这些曲线位于表格的外侧。因此，为此，在最后一行添加一个 id。然后您可以将曲线应用于它们。

```
/* curves the first tableData in the last row */

#lastRow td:first-child {
    border-radius: 0 0 0 20px; /* bottom left curve */
}

/* curves the last tableData in the last row */

#lastRow td:last-child {
    border-radius: 0 0 20px 0; /* bottom right curve */
} 
```

# c# - Windows8 Metro 应用程序分辨率检测问题 C#

> ID：10666576
> 
> 赞同：0
> 
> 时间：2012-05-19T15:33:54.750
> 
> 标签：c#

我有一个问题，在 Metro 应用程序中，该应用程序如何检测安装它的显示器分辨率。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T20:57:24.207

安装时，您无法检测到任何东西。

可以在应用运行时检测分辨率，这一点很清楚。安装应用程序后可以更改分辨率。

我使用以下代码：

```
 Size renderSize = Window.Current.Content.RenderSize;
  var resolution = renderSize; 
```

确保 Window.Current.Content 不为空。

# python - 如何在 Mac OS X 10.7.4 上安装 lxml？我已经用尽了所有选项

> ID：10666578
> 
> 赞同：6
> 
> 时间：2012-05-19T15:34:04.490
> 
> 标签：python, macos, osx-lion, installation, lxml

尝试了各种途径，但没有运气。我正在使用 10.7.4 的 MBP。我不记得上次在我的 Mac 上使用 Python 安装任何东西时遇到这么多问题是什么时候了。请帮助我在本地机器上使用 lxml，而不是依赖 SVN 提交，更新以在 Linux 机器上远程运行。

```
$ sudo STATIC_DEPS=true /usr/bin/easy_install-2.7 lxml
Password:
Searching for lxml
Reading http://pypi.python.org/simple/lxml/
Reading http://codespeak.net/lxml
Best match: lxml 2.3.4
Downloading http://lxml.de/files/lxml-2.3.4.tgz
Processing lxml-2.3.4.tgz
Running lxml-2.3.4/setup.py -q bdist_egg --dist-dir /tmp/easy_install-mbyEtk/lxml-2.3.4/egg-dist-tmp-O_t_3P
Building lxml version 2.3.4.
Latest version of libiconv is 1.14
Downloading libiconv into libs/libiconv-1.14.tar.gz
error: [Errno 60] Operation timed out 
```

尝试了以下没有运气

`$ python setup.py build`

```
$ STATIC_DEPS=true sudo easy_install --allow-hosts=lxml.de,*.python.org lxml
$ sudo pip install lxml

llvm-gcc-4.2 -fno-strict-aliasing -fno-common -dynamic -g -Os -pipe -fno-common -fno-strict-aliasing -fwrapv -mno-fused-madd -DENABLE_DTRACE -DMACOSX -DNDEBUG -Wall -Wstrict-prototypes -Wshorten-64-to-32 -DNDEBUG -g -fwrapv -Os -Wall -Wstrict-prototypes -DENABLE_DTRACE -arch i386 -arch x86_64 -pipe -I/usr/include/libxml2 -I/System/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -c src/lxml/lxml.etree.c -o build/temp.macosx-10.7-intel-2.7/src/lxml/lxml.etree.o -w -flat_namespace

unable to execute llvm-gcc-4.2: No such file or directory

error: command 'llvm-gcc-4.2' failed with exit status 1 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-19T15:37:45.170

我首先安装了[MacPorts](http://www.macports.org/)，然后：

```
$ sudo port install python27 py27-lxml 
```

这给了我一个正常运行的 lxml 安装。

关于您的错误消息，您似乎缺少`pip`用于构建的编译器命令`lxml`（llvm-gcc-4.2）。您是否安装了 OS X 开发工具？`/usr/bin/llvm-gcc-4.2`您应该在;中找到该文件。如果它不存在，您可能需要下载并安装开发包。

您可以通过 App Store 安装 XCode 开发人员工具。如果您阅读应用商店中的评论，您会注意到为了使命令行工具可用，您需要单独安装它们。在 XCode 中，转到 Preferences->Downloads 并下载“命令行工具”包。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-25T18:45:31.593

对于正在浏览此页面的未来用户，这里是在 Mac OSX 上安装 lxml 的分步指南。

1.  转到 Xcode，然后转到首选项，然后转到下载选项卡，然后选择“命令行工具”。下载命令行工具

2.  转到应用程序，然后是实用程序，然后是终端，然后打开终端。在终端中，输入“easy_install pip”。注意：如果显示“错误：/usr/local/bin/pip: Permission denied”，则输入“chmod 777 /usr/local/bin/”。现在再次尝试第 2 步。

3.  类型： pip install "Cython>=0.18"

4.  完成后，输入：pip install lxml

5.  打开python IDLE，测试是否可以导入lxml，玩得开心！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-03T03:46:56.853

我必须这样做：“ *sudo port uninstall py-lxml* ”、“ *sudo port uninstall py24-lxml* ”和“ *sudo port install py27-lxml* ”，然后我用 pip 卸载了 lxml，然后用 pip 重新安装了它！

# image - 为什么 GIF 格式不是自然图像最紧凑的格式？

> ID：10666583
> 
> 赞同：3
> 
> 时间：2012-05-19T15:35:16.923
> 
> 标签：image, algorithm, compression, gif

我们样本试卷中的完整问题：

> 通过突出显示算法的相关部分来解释为什么 GIF 格式不是用于表示具有自然内容的图像的最紧凑格式。

我知道使用 GIF 对于自然图像来说不是很好，因为它仅限于 256 种颜色，但为什么它不能提供足够紧凑的文件呢？如果有的话，你会认为更少的颜色意味着更小的文件大小。

在我们的笔记中，我们被告知使用的 LZW 压缩比 Huffman 更好，原因有几个（包括它只通过一次的事实）。霍夫曼编码/压缩会导致文件更小吗？

[根据 Wikipedia](http://en.wikipedia.org/wiki/GIF#PNG_and_other_alternatives)，PNG 格式提供比 GIF 更好的压缩。LZW 很可能是罪魁祸首，但*为什么呢？*哪些“算法部分”支持它“不是表示图像的最紧凑格式”的论点，尤其是对于自然图像？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-19T16:24:10.467

我不确定 LZW 编码的细节，但我相信它通过构建公共位序列字典（每次出现时都必须*相同）来压缩数据。*这意味着线条图等压缩得非常好，因为它们包含许多“纯”颜色区域（即相同的像素颜色重复*相同*，连续多次。）如果您有一个 100 个白色像素的区域，您可以通过说它是“连续100 个*相同的白色像素”来压缩它。*

“自然图像”，例如数码相机产生的图像，*不包含纯色区域*。一张蓝色墙壁的照片实际上会包含许多不同深浅的蓝色——相机噪点至少会使每个像素与其相邻像素略有不同。LZW 将无法找到许多重复序列，因此无法对数据进行太多压缩。

* * *

JPEG 比 GIF 实现了更小的文件大小，因为它不害怕从图片中丢失一点信息——它是有损的。诀窍在于，JPG 的设计目的是只丢失人类*无论如何都不擅长看到的信息。*（见注 1。）我们擅长在图片的“平滑”区域看到伪影，但不擅长在图像中的锐利过渡附近看到伪影。

它也是一种完全不同的压缩算法，基于将图像编码为二维频域表示（数字信号处理类型的东西），而不是试图找到重复的比特子序列。

* * *

注 1：JPEG 是一种“感知”压缩方法。它发挥了人类视觉的优势和劣势——“平滑”颜色区域的小错误很容易看到，但图像“繁忙”区域的小错误很容易在细节中被遗漏。

MP3 音频的工作原理相同。它丢弃了我们听不到的信息；例如，如果有一个响亮的声音，然后是一个安静的声音，我们通常听不到安静的声音 - 我们的耳朵已经被大声的声音淹没了，并且不会听到它之后的安静声音。MP3 编码抛弃了安静的声音，专注于正确处理响亮的声音。

* * *

笔记2：

我刚刚意识到我实际上并没有解决PNG。

PNG 比 GIF 实现了更好的压缩，因为它在无损压缩之前应用了预过滤步骤（即`DEFLATE`，大致相当于 LZW。）请参阅[Wikipedia 对 PNG 过滤的解释](http://en.wikipedia.org/wiki/Portable_Network_Graphics#Filtering)。

这个想法是相邻像素可能彼此略有不同（由于噪声），但它们的值*大致*相同。

假设我们有数据：

```
132 133 134 135 136 137 138 
```

LZW 看着这个并说“这些值都是不同的；我无法压缩它。”

PNG根据值之间的差异来看待这一点：

```
132 +1 +1 +1 +1 +1 +1 +1 
```

即第一个数据元素为`132`，后面的元素相加得到`1`。*这种*表示用 LZW 压缩得很好。

# android - Google+ API 应用程序准备就绪

> ID：10666585
> 
> 赞同：1
> 
> 时间：2012-05-19T15:35:34.533
> 
> 标签：android, google-plus

嗨，我正在尝试为 Android 制作 google+ 应用程序，能否解释一下并告诉我这句话的确切含义，“ **Google+ API 目前提供对公共数据的只读访问权限**。

我想制作一个类似于其他开发人员制作自己的应用程序的方式类似于 facebook 和 twitter 的应用程序，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T15:37:45.933

这意味着API目前只允许访问**公开**的数据，并且你只能用它**读取**数据*（即你不能做任何“写”操作）*

相反，twitter 的 API 允许访问**私人**数据*（如直接消息）*，并进行一些**写入**操作，如发布新推文。

# javascript - 运行文本：暂停、停止

> ID：10666586
> 
> 赞同：2
> 
> 时间：2012-05-19T15:35:47.883
> 
> 标签：javascript, settimeout, setinterval

我有`<p>`元素：

```
<p id="news_title">Text goes here</p> 
```

我在此 JavaScript 的帮助下运行文本：

```
(function(){
var j = 0;
var el = document.getElementById("news_title");
var interval;
function runEngine(){
    interval = setInterval(function(){
        if (j===200){
            j=-200;
        }
        el.style.left = j + "px";
        j++;
    },20);
}

window.onload = function(){
    runEngine();
};
})(); 
```

标记的脚本运行良好，但我想暂停文本`onmouseover`并`onmouseout`让它继续运行。另外，`onclick`我想永远停止它。

```
el.onmouseover = function(){
   clearInterval(interval);
};  // pausing , working nicely

el.onmouseout = function(){
    runEngine();
};  // also working 
```

但是，`onclick`它不起作用。即使我清除了间隔，`onmouseout`处理程序也会导致文本再次运行。我怎样才能防止这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T15:40:02.080

单击时，设置一个标志。然后检查`onmouseout`处理程序中的标志：

```
var clicked = false;

el.onclick = function() {
    clicked = true;
};

el.onmouseout = function() {
    if (!clicked) {
        runEngine();
    }
}; 
```

# ruby - 为什么将 Ruby 站点迁移到新服务器时会出错？

> ID：10666587
> 
> 赞同：0
> 
> 时间：2012-05-19T15:35:47.893
> 
> 标签：ruby, mongrel

我正在尝试将 Ruby 服务器迁移到新服务器。我在其`mongrel.log`文件中看到错误：

```
/usr/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in gem_original_require: no such file to load -- yahoo-weather (MissingSourceFile)
from /usr/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in require
from /usr/lib/ruby/gems/1.8/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:184:in require
from /home/dianahot/rails_apps/dianahotels/config/initializers/included_libraries.rb:9
from /usr/lib/ruby/gems/1.8/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:173:in load_without_new_constant_marking
from /usr/lib/ruby/gems/1.8/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:173:in load
from /usr/lib/ruby/gems/1.8/gems/rails-2.3.14/lib/initializer.rb:622:in load_application_initializers
from /usr/lib/ruby/gems/1.8/gems/rails-2.3.14/lib/initializer.rb:621:in each
from /usr/lib/ruby/gems/1.8/gems/rails-2.3.14/lib/initializer.rb:621:in load_application_initializers
from /usr/lib/ruby/gems/1.8/gems/rails-2.3.14/lib/initializer.rb:176:in process
from /usr/lib/ruby/gems/1.8/gems/rails-2.3.14/lib/initializer.rb:113:in send
from /usr/lib/ruby/gems/1.8/gems/rails-2.3.14/lib/initializer.rb:113:in run
from /home/dianahot/rails_apps/dianahotels/config/environment.rb:12
from /usr/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in gem_original_require
from /usr/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in require
from /usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/../lib/mongrel/rails.rb:147:in rails
from /usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/mongrel_rails:113:in cloaker_
from /usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/../lib/mongrel/configurator.rb:149:in call
from /usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/../lib/mongrel/configurator.rb:149:in listener
from /usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/mongrel_rails:99:in cloaker_
from /usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/../lib/mongrel/configurator.rb:50:in call
from /usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/../lib/mongrel/configurator.rb:50:in initialize
from /usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/mongrel_rails:84:in new
from /usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/mongrel_rails:84:in run
from /usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/../lib/mongrel/command.rb:212:in run
from /usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/mongrel_rails:281
from /usr/bin/mongrel_rails:23:in load
from /usr/bin/mongrel_rails:23 
```

这些线是什么意思？

* * *

编辑：

我尝试手动安装 yahoo-weather gem，但出现以下错误：

```
gem install yahoo-weather
Fetching: nokogiri-1.5.2.gem (100%)
Building native extensions.  This could take a while...
ERROR:  Error installing yahoo-weather:
        ERROR: Failed to build gem native extension.

        /usr/bin/ruby extconf.rb
checking for libxml/parser.h... yes
checking for libxslt/xslt.h... no
-----
libxslt is missing.  please visit http://nokogiri.org/tutorials/installing_nokogiri.html for help with installing dependencies.
-----
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
        --with-opt-dir
        --without-opt-dir
        --with-opt-include
        --without-opt-include=${opt-dir}/include
        --with-opt-lib
        --without-opt-lib=${opt-dir}/lib
        --with-make-prog
        --without-make-prog
        --srcdir=.
        --curdir
        --ruby=/usr/bin/ruby
        --with-zlib-dir
        --without-zlib-dir
        --with-zlib-include
        --without-zlib-include=${zlib-dir}/include
        --with-zlib-lib
        --without-zlib-lib=${zlib-dir}/lib
        --with-iconv-dir
        --without-iconv-dir
        --with-iconv-include
        --without-iconv-include=${iconv-dir}/include
        --with-iconv-lib
        --without-iconv-lib=${iconv-dir}/lib
        --with-xml2-dir
        --without-xml2-dir
        --with-xml2-include
        --without-xml2-include=${xml2-dir}/include
        --with-xml2-lib
        --without-xml2-lib=${xml2-dir}/lib
        --with-xslt-dir
        --without-xslt-dir
        --with-xslt-include
        --without-xslt-include=${xslt-dir}/include
        --with-xslt-lib
        --without-xslt-lib=${xslt-dir}/lib

Gem files will remain installed in /usr/lib/ruby/gems/1.8/gems/nokogiri-1.5.2 for inspection.
Results logged to /usr/lib/ruby/gems/1.8/gems/nokogiri-1.5.2/ext/nokogiri/gem_make.out
root@server2 [/usr/lib/ruby/gems/1.8/gems]# % gem install yahoo-weather
-bash: fg: %: no such job
root@server2 [/usr/lib/ruby/gems/1.8/gems]# 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T15:46:16.833

猜测一下，你错过了雅虎天气宝石。

我强烈建议您使用[bundler](http://gembundler.com) - 它可以更轻松地将应用程序部署到具有所有依赖项的一致版本的新机器上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T16:23:52.613

Yahoo-weather gem 安装失败，因为它对 Nokogiri 的依赖失败。发生这种情况是因为：

```
libxslt is missing.  please visit http://nokogiri.org/tutorials/installing_nokogiri.html for help with installing dependencies. 
```

根据错误输出中列出的路径名，我怀疑您使用的是 Linux 系统。您需要确保安装了适当的 libxml 和 libxslt。Nokogiri 页面应该有助于解决这个问题。

# sql - 如何从 sysobjects 中排除复制表

> ID：10666590
> 
> 赞同：0
> 
> 时间：2012-05-19T15:36:02.913
> 
> 标签：sql, sql-server, sql-server-2008

我正在运行以下查询，由于生产数据库正在使用复制，因此我们在结果中获取了为复制添加的所有表（例如 MSpeer_conflictdetectionconfigrequest、MSpeer_conflictdetectionconfigresponse）。

```
SELECT name FROM sysobjects WHERE type='U' AND name != 'sysdiagrams' 
```

我们需要调整这个查询，使这些表不显示。我当然可以做一个`name NOT IN ()`并将它们全部列出，但我正在寻找一个更好的解决方案。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T15:44:17.007

```
SELECT name .
FROM sysobjects 
WHERE type='U' 
  AND name != 'sysdiagrams' 
  AND replinfo = 0 
```

但是： http: [//msdn.microsoft.com/en-us/library/ms177596.aspx](http://msdn.microsoft.com/en-us/library/ms177596.aspx) 请注意 sysobjects 和 replinfo 似乎已弃用。

```
0=not replicated
128 = merge - table or indexed view
1=transactional - table or indexed view - log based
3=transactional - table or indexed view - log based with custom sync object
33=transactional - table or indexed view - immediate updating

35=transaction- table or indexed view - log based with custom sync object
and custom filter
129 =merge and transactional - table or indexed view

64 - procs used by immediate updating
512 - all other procsprocs, views, functions 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T17:47:35.473

由于您使用的是 SQL 2008，我建议使用 ff：

```
select * from sys.tables where is_ms_shipped = 0 
```

# c# - Appharbor上的多个活动结果集（MARS）如何启用？

> ID：10666596
> 
> 赞同：3
> 
> 时间：2012-05-19T15:37:37.853
> 
> 标签：c#, asp.net-mvc-3, entity-framework, appharbor, sql-server-mars

这是我在 stackoverflow 上的第一个问题，请耐心等待。

在我的本地项目中，我将 ASP.NET MVC 3 和 Entity Framework 4.3 与 SQL Express 一起使用。

在我的连接字符串中，我将 MARS 设置为 true；

但是当我将我的项目部署到 Appharbor 时，Appharbor 会注入自己的连接字符串，

其中 MARS 未在连接字符串中设置。所以我明白了：

```
There is already an open DataReader associated with this Command which must be closed first.

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.InvalidOperationException: There is already an open DataReader associated with this Command which must be closed first. 
```

到目前为止，我在这方面看到的最佳解决方案：http: [//support.appharbor.com/kb/add-ons/using-sequelizer](http://support.appharbor.com/kb/add-ons/using-sequelizer)

他们在哪里有这个代码：

```
var configuration = System.Web.Configuration.WebConfigurationManager.OpenWebConfiguration("~");
var connectionString = configuration.ConnectionStrings.ConnectionStrings["ConnectionstringAlias"].ConnectionString;
if (!connectionString.Contains("MultipleActiveResultSets=True;"))
{
    connectionString += "MultipleActiveResultSets=True;";
}

configuration.ConnectionStrings.ConnectionStrings["ConnectionstringAlias"].ConnectionString = connectionString;
configuration.Save(); 
```

我不知道把它放在哪里，试图把它放在全局下

Application_Start() 方法

但这给了我这个错误：

```
Server Error in '/' Application.

Object reference not set to an instance of an object.

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.NullReferenceException: Object reference not set to an instance of an object.

Source Error: 

Line 50: 
Line 51:             var configuration = System.Web.Configuration.WebConfigurationManager.OpenWebConfiguration("~");
Line 52:             var connectionString = configuration.ConnectionStrings.ConnectionStrings["ConnectionstringAlias"].ConnectionString;
Line 53:             if (!connectionString.Contains("MultipleActiveResultSets=True;"))
Line 54:             {

Source File: C:\Users\William\Documents\Visual Studio 2010\Projects\xxx\xxx\Global.asax.cs    Line: 52 

Stack Trace: 

[NullReferenceException: Object reference not set to an instance of an object.]
   Educationexpander.MvcApplication.Application_Start() in C:\Users\William\Documents\Visual Studio 2010\Projects\xxx\xxx\Global.asax.cs:52 
```

有没有人可以解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T20:53:11.760

*更新：现在可以使用 Sequelizer 管理面板为注入的连接字符串启用多个活动结果集 (MARS)。这是推荐的方法，因为`web.config`不再需要修改，这会导致`AppDomain`启动期间重新加载*

答案在上面的评论中，这只是形式化。

您需要使用正确的`ConnectionstringAlias`（感谢@chris-sainty），并且必须在应用程序设置中启用文件系统写入，才能将更新的配置写入磁盘。

# apache - .htaccess 的一些错误不知道出了什么问题

> ID：10666599
> 
> 赞同：1
> 
> 时间：2012-05-19T15:37:49.603
> 
> 标签：apache, mod-rewrite, url-rewriting

嘿伙计们，我不知道我在这里做错了什么。

www.example.com/data/stuff1/stuff2/stuff3

到

www.example.com/anything.php?par1=data&&par2=stuff1/stuff2/stuff3

这就是我写的。请帮我找出我的错误。附言。我对.htaccess 很陌生。

谢谢！

```
 RewriteEngine On    # Turn on the rewriting engine
 #RewriteCond %{REQUEST_URI} !www\.a3k\.in
 RewriteRule     /([^/]+)/?(.*)$ /anything.php?api=$1&&data=$2    [NC,L] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T16:03:32.900

a 中的路径`RewriteRule`不包含前面的斜杠，并且由于您没有添加 a`^`来标记路径的开头，这可能会导致错误行为。所以试试这个：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/]+)/(.*)$ anything.php?api=$1&data=$2 [NC,L] 
```

此外，我添加了一个`RewriteCond %{REQUEST_FILENAME}`以确保不会重写实际存在的文件的 URL。

# css - 如何在图像内部获取表格以在 twitter bootstrap 上正确调整大小

> ID：10666603
> 
> 赞同：0
> 
> 时间：2012-05-19T15:38:22.937
> 
> 标签：css, wordpress, twitter-bootstrap, responsive-design

我正在使用基于 twitter bootstrap 的响应式 wordpress 主题。由于某种原因，侧边栏图像未正确调整大小。（您可以通过查看 [site][1] 并尝试调整大小来了解我的意思。）我通过向小部件声明一个固定大小来解决此问题，然后使用绝对相对定位将表单定位在其中。当您在桌面上时，图像/联系表格看起来不错，但是当您压缩布局（例如在 iphone 上）时，联系表格和图像无法正确调整大小。我不知道从这里去哪里，有点卡住了。

这是我现在正在使用的 css（可能不正确。）谢谢！

```
.widget .signupForm {
    /* Box always has colour, pic always on right */
    background-color: #06d0d2;
    background-image: url(http://noahsdad.com/wp-content/uploads/2012/05/noahs-dad-side-bar.jpg);
    background-position: right bottom;
    background-repeat: no-repeat;

    /* height ensures full pic is shown  */
    height: 300px;    

    /* allow us to position contents */
    position: relative;
}

/* Absolutely position the form within the widget */
.widget .signupForm form {
 position: absolute;
 right: 160px;  
 bottom: 0px;
}

.widget .signupForm form input {
 display: block;
}

@media screen and (min-width: 768px) {

/* now just resize the widget box and move the form */

.widget .signupForm {
 width: 300px; 
 height: 240px;
 background-size: 100%;    
}

    .widget .signupForm form {
        right: 120px;   
        bottom: 0px;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T16:07:45.997

我可以在 800px 的宽度上检测到 3 个问题：

*   `.widget .signupForm`宽度为 300 像素。应该是`auto`或`100%`。然后如果需要，表单元素将相应地调整大小（顺便说一下，提交按钮与文本输入具有相同的文本和背景。看起来我们有 2 个信息要输入，而实际上它是操作按钮。它不需要是白色的在蓝色上，也许深灰色就足够了。不过，我不是设计师；））
*   Facebook 小部件具有固定宽度。它是否存在此小部件的移动版本？
*   Instagram 的同样问题：图像的 HTML 宽度属性为 300（像素）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T09:08:40.043

以下 css 在调整大小时适用于您的页面。不确定哪个文件正在应用它。在你的 css 文件中找到这个类并为其添加一个宽度，比如`width:300px`你是否希望它是一个完美的正方形或任何其他值。

```
.widget .signupForm {
    background-color: #06D0D2;
    background-image: url("http://noahsdad.com/wp-content/uploads/2012/05/noahs-dad-side-bar.jpg");
    background-position: right bottom;
    background-repeat: no-repeat;
    height: 300px;
    width:300px; /* code added here */
    position: relative;
} 
```

希望它有所帮助，如果我没有理解您的问题或者这不是您正在寻找的解决方案 - 请发表评论..

# c# - 纹理不出现

> ID：10666605
> 
> 赞同：1
> 
> 时间：2012-05-19T15:38:39.853
> 
> 标签：c#, directx, textures

![在此处输入图像描述](../Images/551d019127f5ec2888e245a682218051.png)之前发过这个，有人回复了任何建议，所以我想再发一次。我意识到我们在这里谈论的是旧技术，但仍然 - 我被困住了。所以任何想法 - 任何东西 - 都会受到赞赏。

我目前正在学习“开始 C# 编程”，并且在第 7 章绘制纹理时遇到了问题。

我使用了与演示 CD 上相同的代码，虽然我不得不将纹理的路径更改为绝对路径，但在渲染时它显示为灰色。

我已经调试了程序以写入文件加载的纹理，这很好 - 没有问题。所以在那之后出现了问题。

以下是一些代码片段：

```
public void InitializeGraphics()
{
    // set up the parameters
    Direct3D.PresentParameters p = new Direct3D.PresentParameters();
    p.SwapEffect = Direct3D.SwapEffect.Discard;
    ...
    graphics = new Direct3D.Device( 0, Direct3D.DeviceType.Hardware, this,
    Direct3D.CreateFlags.SoftwareVertexProcessing, p );
    ...
    // set up various drawing options
    graphics.RenderState.CullMode = Direct3D.Cull.None;
    graphics.RenderState.AlphaBlendEnable = true;
    graphics.RenderState.AlphaBlendOperation = Direct3D.BlendOperation.Add;
    graphics.RenderState.DestinationBlend = Direct3D.Blend.InvSourceAlpha;
    graphics.RenderState.SourceBlend = Direct3D.Blend.SourceAlpha;
    ...
}

public void InitializeGeometry()
{
    ...
    texture = Direct3D.TextureLoader.FromFile( 
            graphics, "E:\\Programming\\SharpDevelop_Projects\\AdvancedFrameworkv2\\texture.jpg", 0, 0, 0, 0, Direct3D.Format.Unknown,
            Direct3D.Pool.Managed, Direct3D.Filter.Linear, 
            Direct3D.Filter.Linear, 0 );
...
}

protected virtual void Render()
{
    graphics.Clear( Direct3D.ClearFlags.Target, Color.White , 1.0f, 0 );
    graphics.BeginScene();

    // set the texture
    graphics.SetTexture( 0, texture );

    // set the vertex format
    graphics.VertexFormat = Direct3D.CustomVertex.TransformedTextured.Format;

    // draw the triangles
    graphics.DrawUserPrimitives( Direct3D.PrimitiveType.TriangleStrip, 2, vertexes );

    graphics.EndScene();
    graphics.Present();
    ...
} 
```

我无法弄清楚这里出了什么问题。显然，如果我在窗口中加载纹理，它会显示得很好——所以书中给出的代码示例中有些地方不对劲。它实际上不起作用，大概我的环境有问题。

# image-processing - 在噪声数据上测试图像处理算法

> ID：10666608
> 
> 赞同：1
> 
> 时间：2012-05-19T15:38:47.727
> 
> 标签：image-processing, noise, training-data

我写了一个图像处理程序来训练一些分类器来识别图像中的一些对象。现在我想测试我的算法对噪声的响应。我希望该算法对噪声具有一定的鲁棒性。

我的问题是，我应该使用训练数据集的噪声版本训练分类器，还是使用数据集的原始版本训练分类器，并查看它在噪声数据上的性能。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T15:55:37.180

为了显示分类器的稳健性，可以在最初训练的分类器上使用高噪声测试数据。根据该性能，可以使用嘈杂的数据再次训练，然后再次测试。显然，对于应用程序开发，如果包含极其嘈杂的样本可以提高准确性，那么这就是要走的路。文献说要有尽可能多的训练样本。但是，有时这会降低特定情况下的性能。

# backbone.js - 需要收藏吗？

> ID：10666610
> 
> 赞同：0
> 
> 时间：2012-05-19T15:38:59.187
> 
> 标签：backbone.js

抱歉，这是一个菜鸟问题，但如果我在应用程序首次加载时只需要一些初始数据是始终需要的集合，还是模型可以获取数据并将其直接传递给视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T16:00:15.313

骨干中的任何内容都不是真正“必需的”。这是一个非常薄的、不止一种方法的框架。Jeremy 建议以这种方式处理可以在初始页面加载中引导的数据，因此您的 HTML 可以将初始数据作为 JSON 包含在`<script>`标签中。您可以将该 JSON 传递给 Backbone.Collection（如果它是类似记录的列表）或新的 Backbone.Model（如果它是单个域对象）。您也可以只使用模型并调用`model.fetch`来获取初始数据。模型与集合更多地是关于具有名称/值对的单个域对象与迭代、排序、过滤很常见的许多对象的列表。

# hadoop - 将 Mahout 模型输出导出为 Weka 输入

> ID：10666611
> 
> 赞同：3
> 
> 时间：2012-05-19T15:39:23.327
> 
> 标签：hadoop, weka, mahout, decision-tree

我想使用 Mahout 决策树训练过程的输出模型作为基于 Weka 的分类器的输入模型。

由于基于数百万训练记录的复杂决策树的训练对于单节点 Weka 分类器几乎是不切实际的，我想使用 Mahout 来构建模型，例如使用[Random Forest Partial Implementation](https://cwiki.apache.org/MAHOUT/partial-implementation.html)。

虽然上述算法在训练时可能会出现问题，但在单台机器上使用 Weka 进行预测相当简单。

在 Mahout [wiki 站点上](https://cwiki.apache.org/MAHOUT/data-formats.html)，声明用于导入的数据格式包括 Weka ARFF 格式，但不用于导出。

**是否可以使用Mahout 中**的一些现有实现来训练将在基于**Weka 的简单**系统的生产中使用的模型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T17:51:59.657

我认为不可能按照您的要求进行操作：.arff 是一种数据格式，导入/导出菜单中的所有其他选项也是如此。Weka 可以保存/加载的分类器实际上是 Weka 的 java对象，使用 Java 的接口`Classifier`写入文件。`Serializable`它们不是可移植的树，因为它们是比创建它们的 JVM 更持久的 Java 对象。因此，为了做你想做的事，Mahout 或 Weka 都必须能够生成/读取彼此的代码，而这不是我能找到任何文档的东西。

我的经验是，有几百万条训练记录（每个包含约 45 个数字特征/列），使用默认选项的 Weka 随机森林实现非常快（在单个 2.26GHz 内核上以秒为单位运行），因此可能没有必要打扰 Mahout。不过，您的数据集很可能有不同的结果。

# c++ - 在 OpenCL 上读取错误数据

> ID：10666612
> 
> 赞同：1
> 
> 时间：2012-05-19T15:40:01.697
> 
> 标签：c++, c, arrays, memory, opencl

我遇到了内核写入数据错误的地方或主机有时读取数据不正确的问题。我将相同的数据（写入数据的索引）写入两个具有不同类型的全局数组。为了确保索引正确，使用了通过 atom_inc 递增的全局计数器。从主机上的第二个阵列读取数据时会出现此问题。例如：

```
.....
output array index: 442: (output1 value:442.0000     output2 value:442) 
output array index: 443: (output1 value:443.0000     output2 value:443) 
output array index: 444: (output1 value:444.0000     output2 value:444) 
output array index: 445: (output1 value:445.0000     output2 value:445) 
output array index: 446: (output1 value:446.0000     output2 value:1152892928) 
output array index: 447: (output1 value:447.0000     output2 value:447) 
output array index: 448: (output1 value:448.0000     output2 value:1152909312) 
output array index: 449: (output1 value:449.0000     output2 value:1152917504) 
output array index: 450: (output1 value:450.0000     output2 value:1152925696)
...... 
```

正如您在指标 446、448、449 和 450+ 中看到的，输出 2 包含错误值。这可能是什么原因？

设备：ATI Radeon HD5750

代码示例：

```
#include <stdio.h>
#include <math.h>
#include <OpenCL/OpenCL.h>

// wtf example
const char *programSource =
"__kernel void kernel1(__global uint *counter,\n" \
"__global float *weights,\n" \
"__global uint *weights_pos)\n" \
"{\n"\
"const uint global_size = get_global_size(0);\n" \
"const uint global_id = get_global_id(0);\n" \
"uint local_id = get_local_id(0);\n" \

"if(global_id == 0) {\n" \
"counter[5] = 0; // set index of pos in weights to zero\n" \
"}\n" \

"uint insert_index = atom_inc(&counter[5]);\n" \
"weights[insert_index] = insert_index;\n" \
"weights_pos[insert_index] = insert_index;\n" \
"}";

void art_process_sinogram(const char* tiff_filename,
                          const float *angles2,
                          const unsigned int n_angles2,
                          const unsigned int n_ray2s,
                          const float distanc2e)
{
  /******************************
   * OPENCL ENVIRONMENT
   */
  cl_int status;
  cl_uint numPlatforms = 0;
  cl_platform_id *platforms = NULL;
  cl_device_id device_id;

  //discover platforms
  status = clGetPlatformIDs(0, NULL, &numPlatforms);
  platforms = (cl_platform_id*)malloc(numPlatforms * sizeof(cl_platform_id));
  status = clGetPlatformIDs(numPlatforms, platforms, NULL);

  //discover devices
  cl_uint numDevices = 0;
  cl_device_id *devices = NULL;

  status = clGetDeviceIDs(platforms[0], CL_DEVICE_TYPE_ALL, 0, NULL, &numDevices);
  devices = (cl_device_id*)malloc(numDevices * sizeof(cl_device_id));
  status = clGetDeviceIDs(platforms[0], CL_DEVICE_TYPE_ALL, numDevices, devices, NULL);
  device_id = devices[1];
  //create context
  cl_context context = NULL;
  context = clCreateContext(NULL, numDevices, devices, NULL, NULL, &status);

  cl_program program = clCreateProgramWithSource(context, 1, (const char **)&programSource, NULL, &status);
  clBuildProgram(program, 0, NULL, NULL, NULL, NULL);
  cl_kernel  kernel_weights = clCreateKernel(program, "kernel1", &status);

  //create queue
  cl_command_queue command_queue1 = clCreateCommandQueue(context, device_id, 0, &status);

  /******************************
   * HARDWARE PARAMETERS
   */
  cl_uint wavefronts_per_SIMD = 7;
  size_t global_work_size;
  size_t local_work_size = 64;

  cl_uint max_compute_units;

  clGetDeviceInfo(device_id, CL_DEVICE_MAX_COMPUTE_UNITS, sizeof(cl_uint), &max_compute_units, NULL);

  size_t wg_count = max_compute_units * wavefronts_per_SIMD;
  global_work_size = wg_count * local_work_size;

  /**************************** DATA PART *************************************/

  size_t w_portion_size = 768 * sizeof(cl_float);
  size_t w_pos_portion_size = 768 * sizeof(cl_uint);

  size_t counters_data_size = 6 * sizeof(cl_uint);
  cl_uint counters_data[6];
  counters_data[0] = 1;
  counters_data[1] = 2; // max number of the cells intersected by the ray
  counters_data[2] = 3;
  counters_data[3] = 4;
  counters_data[4] = 5; // same to the number of rays
  counters_data[5] = 0; // counter inside kernel

  /*****************
   * Main buffers
   */
  cl_mem weights1_buffer = clCreateBuffer(context,
                                          CL_MEM_READ_WRITE,
                                          w_portion_size,
                                          NULL,
                                          NULL);

  cl_mem weights_pos1_buffer = clCreateBuffer(context,
                                              CL_MEM_READ_WRITE,
                                              w_pos_portion_size,
                                              NULL,
                                              NULL);
  /*****************
   * Supplement buffers (constant)
   */
  cl_mem counters_data_buffer = clCreateBuffer(context,
                                               CL_MEM_READ_ONLY,
                                               counters_data_size,
                                               NULL,
                                               &status);

  cl_event supplement_buffer_ready[1];

  status = clEnqueueWriteBuffer(command_queue1,
                                counters_data_buffer,
                                CL_FALSE,
                                0,
                                counters_data_size,
                                counters_data,
                                0,
                                NULL,
                                &supplement_buffer_ready[0]);

  status = clSetKernelArg(kernel_weights, 0, sizeof(void *), (void *)&counters_data_buffer);
  status = clSetKernelArg(kernel_weights, 1, sizeof(void *), (void *)&weights1_buffer);
  status = clSetKernelArg(kernel_weights, 2, sizeof(void *), (void *)&weights_pos1_buffer);

  status = clEnqueueNDRangeKernel(command_queue1,
                                  kernel_weights,
                                  1, // work dimensional 1D, 2D, 3D
                                  NULL, // offset
                                  &global_work_size, // total number of WI
                                  &local_work_size, // nomber of WI in WG
                                  1, // num events in wait list
                                  supplement_buffer_ready,  // event wait list
                                  NULL); // event

  clFinish(command_queue1);
  cl_float *output1 = (cl_float *) clEnqueueMapBuffer(command_queue1,
                                                      weights1_buffer,//*pmain_weights_buffer,
                                                      CL_TRUE,
                                                      CL_MAP_READ,
                                                      0,
                                                      w_portion_size,
                                                      0, NULL, NULL, NULL);
  cl_uint *output2 = malloc(w_portion_size);
  status = clEnqueueReadBuffer(command_queue1, weights_pos1_buffer,
                               CL_TRUE, 0, w_pos_portion_size, output2,
                               0, NULL, NULL);

  clFinish(command_queue1);
  for(int i = 0; i < 790; ++i) {
    printf("output array index: %d: (output1 value:%.4f \t output2 value:%d) \n", i, output1[i], output2[i]);
  }
} 
```

**解决方案：**

内核应该是这样的（需要检查索引）：

```
 __kernel void k_1(__global uint *counter, 
                    __global uint *weights, 
                    __global uint2 *weights_pos)
 {
    const uint global_size = get_global_size(0);
    const uint global_id = get_global_id(0);
    uint local_id = get_local_id(0);

    uint insert_index = atom_inc(&counter[5]);
    if(insert_index < 768) {
       weights[insert_index]= insert_index;
       weights_pos[insert_index].x = insert_index;
       weights_pos[insert_index].y = insert_index;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T16:23:21.427

您正在搞乱缓冲区尺寸。

1）您的缓冲区每个包含 768 个元素（请参阅`w_portion_size`和的初始化`w_pos_portion_size`）

2) 我机器上的工作组大小是 896（见初始化`wg_count`）

3) 你打印出 790 个值。

除此之外，这里还有一个概念性错误：

```
if(global_id == 0) {
     counter[5] = 0; // set index of pos in weights to zero
}
//atomic increments on counter[5] 
```

您不能假设第一个虚拟处理器将在其他虚拟处理器之前执行此行。您应该完全删除此行，因为您`counter[5]`在主机端进行了初始化。（我相信这是您的问题的原因，但我无法重现）。

解决这些问题后，您的代码似乎运行良好（英特尔实现）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T03:52:20.690

内核应该是这样的（需要检查索引）：

```
__kernel void k_1(__global uint *counter, 
                __global uint *weights, 
                __global uint2 *weights_pos)
{
   const uint global_size = get_global_size(0);
   const uint global_id = get_global_id(0);
   uint local_id = get_local_id(0);

   uint insert_index = atom_inc(&counter[5]);

   if(insert_index < 768) {
     weights[insert_index]= insert_index;
     weights_pos[insert_index].x = insert_index;
    weights_pos[insert_index].y = insert_index;
   }
} 
```

# c++ - Blitz++ 数组作为全局数组

> ID：10666618
> 
> 赞同：1
> 
> 时间：2012-05-19T15:40:54.003
> 
> 标签：c++, global-variables, blitz++

我正在开发一个具有许多功能的 C++ 项目。我不想将它们写在主程序中，而是想为每个函数编写一个单独的 .cpp 文件。这些函数中的大多数都将作用于某些数组，因此我希望将这些数组设为全局。因此，我在一个名为 globals.cpp 的单独 .cpp 文件中声明了所有数组，并将它们放入以 extern 为前缀的 globals.h 文件中。我像往常一样编写了函数和主程序，但是当我编译时，我得到了一个

这是我所拥有的：

//globals.cpp

```
#include <iostream>
#include <blitz/blitz.h>
#include <blitz/array.h>
#include "prototype.h"
#include "globals.h"

BZ_USING_NAMESPACE(blitz)

Array<double,2> A(5,5); 
```

在 globals.h 文件中我有

```
#ifndef GLOBALS_H
#define GLOBALS_H
extern Array<double,2> A(5,5);
#endif 
```

然后我有一个函数add.cpp，例如

```
#include <iostream>
#include <blitz/blitz.h>
#include <blitz/array.h>
#include "prototype.h"
#include "globals.h"

BZ_USING_NAMESPACE(blitz)

void add.cpp(){
   for(int i=0;i<5;i++){
      A(i,i)=i*i;
   }
} 
```

我显然将它包含在prototype.h文件中

```
#ifndef GLOBALS_H
#define GLOBALS_H
void add();
#endif 
```

最后我有了主程序 mainprog.c

```
#include <iostream>
#include <blitz/blitz.h>
#include <blitz/array.h>
#include "prototype.h"
#include "globals.h"

BZ_USING_NAMESPACE(blitz)
int main(){
   add();
   cout<<A<<endl;
   return 0;
} 
```

但是，当我编译时，我收到错误 `globals.h:6:8: error: 'Array' does not name a type

然后 add.cpp 函数中出现错误，说明未声明错误 A。

如何将闪电战阵列声明为全局？谢谢`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T15:45:41.670

问题是您导入命名空间（`BZ_USING_NAMESPACE`）的宏位于您的 globals.h 包含之下。因此，您尝试在 globals.h 中引用的 Array 类实际上是 blitz::Array 或此时的东西。

对于一个简单的修复，只需使用 globals.h 中的 BZ_USING_NAMESPACE 就在您对 A 的声明上方。

永远记住在该头文件中包含头文件所需的所有内容。

```
#ifndef GLOBALS_H
#define GLOBALS_H

#include <blitz/blitz.h> //No idea if the Array class needs this header.
#include <blitz/array.h>
BZ_USING_NAMESPACE(blitz)

extern Array<double,2> A(5,5);
#endif 
```

# javascript - Can I write a regex expression where one symbol matches twice?

> ID：10666623
> 
> 赞同：0
> 
> 时间：2012-05-19T15:41:23.497
> 
> 标签：javascript, regex

I'm matching words with regex in javascript. The following expression uses whitespace to separate the potential matches:

```
/(\W)(foo)(\W)/g 
```

This works most of the time, but it fails when there are two matches separated by a single space. (e.g. "foo foo") I think this is because the space that separates them is the last `\W` of the first match and the first of the second.

Is there any way to modify this expression to work in this edge case?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T15:42:34.673

You can use `\b` instead of `\W`. It matches a zero-width *word boundary* (a boundary between a `\w` and a `\W` or the start/end of the string, while `\W` matches a character which may not exist at the start or end of a string.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T15:23:08.383

Javascript regexes have lookahead, so you can probably do something like this:

```
/(\W)(foo)(?=\W)/g 
```

I don't think lookbehinds are available, but there are [other techniques that have the same effect](http://blog.stevenlevithan.com/archives/mimic-lookbehind-javascript).

Of course, this is functionally different, in that the lookahead doesn't capture, so it depends on the nature of your problem. The main point here it not that it doesn't capture, but that it doesn't *match*; thereby avoiding your problem.

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-19T15:48:14.657

Give this a try, I think it will work for you:

```
/(\W)(foo| )(\W)/g 
```

This will tell the regex to match `foo` or `whitespace` between the two `\W`s.

# javascript - 音频注释

> ID：10666627
> 
> 赞同：4
> 
> 时间：2012-05-19T15:42:10.737
> 
> 标签：javascript, html

我正在处理我的第一个任务，即允许用户使用 javascript 对类似于声音云的音频文件进行注释。但我不知道从哪里开始。如果有人能指出我正确的方向，那将很有帮助。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-08-21T04:07:51.667

我目前也在寻找音频注释工具。这是我到目前为止发现的两个：

*   **WaveSurfer.js**：
    *   [https://github.com/katspaugh/wavesurfer.js](https://github.com/katspaugh/wavesurfer.js)
    *   [http://wavesurfer-js.org/example/annotation/](http://wavesurfer-js.org/example/annotation/)
*   **峰.js**：
    *   [https://github.com/bbc/peaks.js](https://github.com/bbc/peaks.js)
    *   [https://waveform.prototyping.bbc.co.uk/](https://waveform.prototyping.bbc.co.uk/)
    *   [http://audiovideo.jeffreyeverhart.com/audio-annotation/peaks.html](http://audiovideo.jeffreyeverhart.com/audio-annotation/peaks.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T15:54:49.607

这个 javascript 库是 soundcloud 使用的

[http://www.schillmania.com/projects/soundmanager2/](http://www.schillmania.com/projects/soundmanager2/)

我们用它来为歌曲添加 html**定时歌词**-

[http://www.wackykites.com](http://www.wackykites.com)

如果有帮助，请随意获取并使用您在我们页面上找到的任何代码，尽管可能不会被注释为只是一个有趣的试验。

查看与歌词和时间相关的来源，如果这些是从“用户评论”数据库中输出的，那么它们本质上就是“定时评论”

# java - android片段的最佳实践？

> ID：10666629
> 
> 赞同：1
> 
> 时间：2012-05-19T15:42:27.007
> 
> 标签：java, android, android-fragments

目前我正在调用和构建这样的片段：

```
if (getSupportFragmentManager().findFragmentById(R.id.fragment_list) == null) {
     list = new MyListFragment();
     getSupportFragmentManager().beginTransaction().add(R.id.fragment_list, list).commit();
} 
```

但是我想知道这是否是所谓的最佳实践，因为在我看来，这似乎是很多样板代码。有没有更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T16:55:54.010

使用 XML 布局和片段类。在这里，我创建了一个包含 2 个片段的布局。该类使布局膨胀`fragment_actionbarcompat.xml`（该代码未在此处显示，但它是一个基本布局文件）。我为包含 2 个片段的活动创建了一个布局文件。

ActionBarCompatFragment 类覆盖 onCreateView 方法以扩大其布局。这将被注入到片段标签布局中。

在您的情况下，您通常不只是添加一个 plain `ListFragment`，而是扩展`ListFragment`并将您的自定义代码添加到其中。这是一种更好地支持模型-视图-控制器等花哨模式的方法。片段是独立的隔间，因此您可以根据需要在活动之间重复使用它们。在大多数情况下，您的类将拥有加载片段所需数据的逻辑。

**ActionBarCompatFragment.java**

```
@Override
public final View onCreateView(LayoutInflater inflater, ViewGroup root, Bundle savedInstanceState) {
    final int layoutId = R.layout.fragment_actionbarcompat;
    return inflater.inflate(layoutId, root, false);
} 
```

**文件：activity_main.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <fragment
        android:id="@+id/ActionBarCompatFragment"
        android:layout_width="@dimen/ActionBarSize"
        android:layout_height="match_parent"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        class="com.packagename.app.ActionBarCompatFragment" >

        <!-- Preview: layout=@layout/fragment_actionbarcompat -->
    </fragment>

    <fragment
        android:id="@+id/ComposerFragment"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:layout_toRightOf="@id/ActionBarCompatFragment"
        class="com.packagename.app.ComposerFragment" >

        <!-- Preview: layout=@layout/fragment_composer -->
    </fragment>

</RelativeLayout> 
```

# matlab - 在 Matlab 中计算一个棘手的总和

> ID：10666640
> 
> 赞同：0
> 
> 时间：2012-05-19T15:44:08.293
> 
> 标签：matlab, sum

使用以下变量：

```
m = 1:4; n = 1:32;
phi = linspace(0, 2*pi, 100);
theta = linspace(-pi, pi, 50);

S_mn = <a 4x32 coefficient matrix, corresponding to m and n>; 
```

我如何计算*m*和*n*的总和`S_mn*exp(1i*(m*theta + n*phi))`，即

![$\sum_m \sum_n S_mn exp(i(m\theta+n\phi))](../Images/24586f4a534c3f6032c39b6ec92f35e4.png)

我想过像这样的事情

```
[m, n] = meshgrid(m,n);
[theta, phi] = meshgrid(theta,phi);
r_mn = S_mn.*exp(1i*(m.*theta + n.*phi));
thesum = sum(r_mn(:)); 
```

但这需要`theta`and`phi`具有与 and 相同数量的元素，`m`并且`n`它只给了我一个元素作为回报 - 我想要一个大小为 的矩阵`meshgrid(theta,phi)`，而不管`theta`and的大小`phi`（即我希望能够评估总和作为和的函数`theta`）`phi`。

在matlab中如何计算？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T16:58:57.363

因为我不知道S是什么...

```
S = randn(4,32);

[m,n] = ndgrid(1:4,1:32);
fun = @(theta,phi) sum(sum(S.*exp(sqrt(-1)*(m*theta + n*phi)))); 
```

对我来说很好。

```
fun(pi,3*pi/2)
ans =
          -15.8643373238676 -      1.45785698818839i 
```

如果您现在希望对大量值 phi 和 theta 执行此操作，那么现在一对循环是简单的解决方案。或者，您可以在一次计算中完成所有操作，尽管数组会变得更大。还是不难。支付意愿？

您确实意识到 meshgrid 和 ndgrid 都需要两个以上的参数吗？所以是时候学习如何使用 bsxfun 了，然后挤压。

```
[m,n,theta,phi] = ndgrid(1:4,1:32,linspace(-pi, pi, 50),linspace(0, 2*pi, 100));
res = bsxfun(@times,S,exp(sqrt(-1)*(m.*theta + n.*phi)));
res = squeeze(sum(sum(res,1),2)); 
```

或者这样做，会快一点。之前的计算花费了我的机器 0.07 秒。最后一个花费了 0.05，因此通过大量使用 bsxfun 可以节省一些钱。

```
m = (1:4)';
n = 1:32;
[theta,phi] = ndgrid(linspace(-pi, pi, 50),linspace(0, 2*pi, 100));
theta = reshape(theta,[1,1,size(theta)]);
phi = reshape(phi,size(theta));
res = bsxfun(@plus,bsxfun(@times,m,theta*sqrt(-1)),bsxfun(@times,n,phi*sqrt(-1)));
res = bsxfun(@times,S,exp(res));
res = squeeze(sum(sum(res,1),2)); 
```

如果你需要做2000次以上，那么它应该需要100秒来做。支付意愿？喝杯咖啡放松一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T17:00:10.840

有几种方法可以解决这个问题。

一种方法是创建一个函数（-handle），将总和作为 theta 和 phi 的函数返回，然后用于`arrayfun`求和。另一个是完全矢量化计算，尽管这将使用更多内存。

`arrayfun`版本：

```
[m, n] = meshgrid(m,n);

sumHandle = @(theta,phi)sum(reshape(...
    S_mn.*exp(1i(m*theta + n*phi)),...
    [],1)) 

[theta, phi] = meshgrid(theta,phi);

sumAsFunOfThetaPhi = arrayfun(sumHandle,theta,phi); 
```

矢量化版本：

```
[m, n] = meshgrid(m,n);
m = permute(m(:),[2 4 1 3]); %# vector along dim 3
n = permute(n(:),[2 3 4 1]); %# vector along dim 4

S_mn = repmat( permute(S_mn,[3 4 1 2]), length(theta),length(phi));

theta = theta(:); %# vector along dim 1 (phi is along dim 2 b/c of linspace)

fullSum = S_mn.* exp( 1i*(...
    bsxfun(@plus,...
       bsxfun(@times, m, theta),...
       bsxfun(@times, n, phi),...
    )));

sumAsFunOfThetaPhi = sum(sum( fullSum, 3),4); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T16:58:58.507

首先保存每个变量的大小：

```
size_m = size(m);
size_n = size(n);
size_theta = size(theta);
size_phi = size(phi); 
```

像这样使用[ngrid](http://www.mathworks.com/help/techdoc/ref/ndgrid.html)函数：

```
[theta, phi, m, n] = ngrid(theta, phi, m, n) 
```

这将为您提供一个具有 4 维的数组（每个变量一个：theta、phi、m、n）。现在你可以计算这个：

```
m.*theta + n.*phi 
```

现在你需要让 S_mn 有 4 个维度，大小为 size_theta、size_phi、size_m、size_n，如下所示：

```
S_tpmn = repmat(S_mn, [size_theta size_phi size_m size_n]); 
```

现在你可以这样计算你的总和：

```
aux_sum = S_tpmn.*exp(1i*(m.*theta + n.*phi)); 
```

最后，您可以将最后 2 个维度（m 和 n）相加，得到一个具有 2 个维度的数组，其大小为 size_theta by size_phi：

```
final_sum = sum(sum(aux_sum, 4), 3); 
```

注意：我现在无法访问 Matlab，所以我无法测试这是否真的有效。

# objective-c - Objective C - NSURL - 引号

> ID：10666641
> 
> 赞同：0
> 
> 时间：2012-05-19T15:44:16.233
> 
> 标签：objective-c, nsstring, nsurlconnection, nsurl, quotation-marks

我已经在网站上搜索了没有结果的答案，所以在这里我有一个问题。

我正在使用 CouchDB，我将使用视图，但问题是`NSURL`当我为`NSURLConnection`.

这是我的代码：

```
NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"http://127.0.0.1:5984/users/_design/search/_view/phone?key=\"0701010100\""]]; 
```

如果我不使用这些引号，CouchDB 认为这是一个数字。

感谢大家的帮助。

马库斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T15:48:44.977

使用[-stringByAddingPercentEscapesUsingEncoding：](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/instm/NSString/stringByAddingPercentEscapesUsingEncoding%3a)

```
NSURL *url = [NSURL URLWithString:[[NSString stringWithFormat:@"http://127.0.0.1:5984/users/_design/search/_view/phone?key=\"0701010100\""] stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]]; 
```

# php - 我可以在网站 PHP 脚本中睡一小时吗？

> ID：10666646
> 
> 赞同：1
> 
> 时间：2012-05-19T15:45:05.773
> 
> 标签：php, email

我有一个处理我的电子邮件订阅的 PHP 脚本。

它做了类似的事情：

```
foreach email to be sent:
    mailer->send-email
    print "Email sent to whoever." 
```

我现在遇到了我的网络主机的速率限制。邮件库有一个内置的节流器，它会休眠以确保我保持在速率之下。但是，这可能会导致网页需要几个小时才能实际加载。

客户端浏览器会放弃页面加载吗？任何建议的更好的解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T15:51:15.117

为什么这是在网页加载时完成的？这应该是一个计划运行的离线后端进程。（查看`cron`调度任务。）

任何长时间运行的进程都应该委托给后端服务来处理该进程。应用程序界面（例如网页）应该尽快响应用户，而不是强迫用户等待（超过一个*小时*？）等待响应。

应用程序可以跟踪后端进程的进度，通常是通过一些共享数据源（例如简单的数据库），并将该进度呈现给用户。没关系。但是这个过程本身应该发生在应用程序之外。

例如，在高水平...

1.  安排一个 PHP 脚本运行以处理电子邮件。
2.  当脚本启动时，将一条记录保存到数据库中，表明它已启动。
3.  每次脚本达到某种里程碑时，更新数据库记录以表明这一点。
4.  脚本完成后，更新数据库记录以表明这一点。
5.  有一个 Web 应用程序来检查该数据库记录并向用户显示后端进程的当前状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T15:51:44.570

您可能不在乎，但即使您强制此脚本保持活动状态，也不应故意通过网络服务器运行长时间运行的脚本。Webserver 使用资源繁重的线程或进程来运行您的脚本，并且它们可用于服务器 Web 请求的数量有限。一个长时间运行的脚本基本上会将其中一个从可用于服务器 Web 访问者的进程池中取出。

相反，请使用直接执行 php 二进制文件的 cron 作业。具体来说，不要使用`wget`或`lynx`任何其他 Web 浏览器之类的程序作为 cron 作业的一部分，因为这些方法通过 Web 服务器运行脚本。cron 命令应该包括类似

`php /full/path/to/the/script.php`

# asp.net-mvc - 以前使用“添加视图...”对话框后如何更改 MVC 操作的关联视图

> ID：10666648
> 
> 赞同：1
> 
> 时间：2012-05-19T15:45:14.883
> 
> 标签：asp.net-mvc, view

如果我在 Microsoft MVC 中的新控制器操作上使用“添加视图”，它将创建一个新视图，并且在从控制器调用它时我不必显式引用此视图：

```
return View(); 
```

但是，如果稍后我想将我的操作指向不同的视图怎么办？由于我的动作已经隐式绑定到通过“添加视图”对话框创建的视图，我发现覆盖这种隐式关系的唯一方法是在从动作返回时显式识别新视图：

```
return View("NewView"); 
```

有没有办法将“NewView”视图重新关联到控制器操作，就像第一个视图通过“添加视图”对话框隐式绑定一样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T15:30:49.087

为了隐含

```
return View(); 
```

要使用不同的命名视图开箱即用，您必须更改控制器操作的名称。

如果您关心“魔术字符串”并且希望更好地感觉视图确实存在，我建议您查看[T4MVC](http://t4mvc.codeplex.com/)，它会自动为您的视图生成强类型常量。

# objective-c - 用于创建动态对象的 Objective C 策略

> ID：10666649
> 
> 赞同：0
> 
> 时间：2012-05-19T15:45:27.207
> 
> 标签：objective-c, oop, dynamic

我有一个名为 City 的超类和一堆从这个类继承的子类。例如伦敦和纽约。这些子类中的每一个都有自己独特的方法和实例变量。

当我的应用程序启动时，我对当前位置进行地理编码并根据我当前所在的城市实例化子类。

现在我定义了多个属性来访问这些类，所以

```
@property (nonatomic, strong) London *london;
@property (nonatomic, strong) NewYork *newYork;
...
... 
```

我在任何时候都只需要一个这种类型的对象，所以只希望定义一个属性来访问这个对象。就像是

```
@property (nonatomic, strong) City *city; 
```

有没有一种方法可以动态创建我需要的子类而无需声明多个属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T16:08:11.260

您绝对可以在 Objective-C 中实现子类。您可以执行以下操作来实例化一个城市：

```
self.city = [[NewYork alloc] init]; 
```

调用特定于城市的方法：

```
if ([self.city isKindOfClass:[NewYork class]])
{
      // call some NewYork methods e.g..
      [(NewYork *)self.city doNewYorkThing];
}
else if ([self.city isKindOfClass:[London class]])
{
      // call some London methods e.g.
      [(London *)self.city doLondonThing];
} 
```

“isKindOfClass:”、“isMemberOfClass:”、“conformsToProtocol:”和“respondsToSelector:”方法是您熟悉的有用的类方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T15:53:54.287

“动态地”是一个灵活的概念。:) 你当然可以写类似...

```
self.city = [[London alloc] init]; 
```

...然后使用 City 中定义的任何方法。如果 London 定义了自己的实现，您将获得这些方法的覆盖版本。如果你真的真的**知道**它是伦敦的物体，你也可以这样做：

```
[(London *)city somethingSpecial]; 
```

# jquery - jQuery验证div

> ID：10666650
> 
> 赞同：1
> 
> 时间：2012-05-19T15:45:38.387
> 
> 标签：jquery, jquery-validate

我正在使用**jquery.validate.js**插件进行对话框验证。我的问题是，我只想提交第一个有问题的字段来获得一个类，并且字段错误在字段旁边的淡出 div 中显示为提示。（现在写插件在每个字段上添加标签）

![在此处输入图像描述](../Images/a2c7e7bb4816864a34d86107262fa226.png)

我希望我足够清楚！

先感谢您！！！

（如果您需要更多，请询问）

**编辑**

它的代码

```
$("#wdw1003_useraddform").validate({
    rules : {
        wdw1003_username : {
            required : true
        },
        wdw1003_password : {
            required : true
        },
        wdw1003_fullname : {
            required : true
        },
        wdw1003_email : {
            required : true,
            email : true
        }
    },
    messages : {
        wdw1003_username : {
            required : "Field User Name is required"
        },
        wdw1003_password : {
            required : "Password is required"
        },
        wdw1003_fullname : {
            required : "Field Full Name is required"
        },
        wdw1003_email : {
            required : "Field E-mail is required",
            email : "Is not a valid e-mail"
        }
    }
}); 
```

**在 ankur20us 评论后编辑**

表格是用这行生成的

```
$form = new Form('useraddform', '#', $id."_");
$form -> setRequired('<img src="images/required.png" alt="Required" align="absmiddle" />', '<img src="images/required.png" alt="Required" align="absmiddle" />' . $trans -> translate('denotes required field'));
$form -> addElement('text', 'username', $trans -> translate('User Name'));
$form -> addElement('password', 'password', $trans -> translate('Password'));
$form -> addElement('text', 'fullname', $trans -> translate('Full Name'));
$form -> addElement('text', 'email', $trans -> translate('E-mail'));
$form -> addElement('select', 'perms', $trans -> translate('Permissions'), array('options' => $perms, 'value' => 'level1'));
$form -> addElement('select', 'status', $trans -> translate('Status'), array('options' => $status, 'size' => "1"));
$form -> addElement('textarea', 'comments', $trans -> translate('Comments'));
$form -> addElement('select', 'lang', $trans -> translate('Language'), array('options' => $langs, 'size' => "1"));
$form -> addElement('submit', 'submit', $trans -> translate('Create User'), array('style' => "clear:both; float:right; margin-right: 8%;")); 
```

上面的 javascript 来自这些行

```
 $form -> addRule('username', 'required', $trans -> translate('Field User Name is required'));
$form -> addRule('password', 'required', $trans -> translate('Password is required'));
$form -> addRule('fullname', 'required', $trans -> translate('Field Full Name is required'));
$form -> addRule('email', 'required', $trans -> translate('Field E-mail is required'));
$form -> addRule('email', 'email', $trans -> translate('Is not a valid e-mail')); 
```

所以我不能改变太多！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T16:02:46.453

[演示](http://www.position-relative.net/creation/formValidator/demos/demoValidators.html) 这就是你所需要的，这个插件支持这种小费类型的东西，并且为了它工作只是做

```
<form id='validateMe'>
<input value=""  class="validate[required] text-input" type="text" name="reqplaceholder" id="reqplaceholder" />
<input type='submit' value='Validate'/>
</form> 
```

**Jquery 部分编码**

```
jQuery("#validateMe").validationEngine(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T22:04:30.317

这是我找到的解决方案。我像这样在我的页面中创建了一个隐藏的 div

```
<div id="validationMessageBox" class="ui-corner-all" style="display: none;">
    <div id="validationMessageBoxSymbol" class="ui-icon ui-icon-alert"></div>
    <div id="validationMessageBoxMessage"></div>
</div> 
```

然后我使用 jquery.validate API 的 showErrors:function(errors) 来显示隐藏的 div 更新它的消息并将其定位在第一个缺失元素旁边。最后是淡出。

最终代码如下。

```
$("#wdw1003_useraddform").validate({
    rules : {
        wdw1003_username : {
            required : true
        },
        wdw1003_password : {
            required : true
        },
        wdw1003_fullname : {
            required : true
        },
        wdw1003_email : {
            required : true,
            email : true
        }
    },
    messages : {
        wdw1003_username : {
            required : "Field User Name is required"
        },
        wdw1003_password : {
            required : "Password is required"
        },
        wdw1003_fullname : {
            required : "Field Full Name is required"
        },
        wdw1003_email : {
            required : "Field E-mail is required",
            email : "Is not a valid e-mail"
        }
    },
    showErrors : function(errors) {
        var error = this.errorList[0];
        if(undefined != error) {
            var $element = $(error.element);
            var message = error.message;
            $element.addClass("ui-state-error");
            $("#validationMessageBox").addClass("ui-state-error").css({
                left : $element.offset().left + $element.width() + 15,
                top : ($element.offset().top)
            });
            $("#validationMessageBoxMessage").html(message);
            $("#validationMessageBox").show("fast");
            $element.removeClass("ui-state-error", 2000);
            $("#validationMessageBox").fadeOut(2000);
        }
    },
    onclick : false,
    onkeyup : false,
    onfocusout : false
}); 
```

# c# - UI语言如何更改？

> ID：10666652
> 
> 赞同：0
> 
> 时间：2012-05-19T15:45:57.327
> 
> 标签：c#, mvvm, localization

在这里，我对 UI 语言有点困惑。如果语言改变了，会发生什么？整个文件夹被更改或文化被加载？我无法了解实际发生的情况。

```
 Properties.Strings.MainWindow_Language_Selection_English_Label="English"
  Properties.Strings.MainWindow_Language_Selection_Gujarati_Label="ગુજરાતી" 
```

请解释发生了什么。

```
 private void LanguageSelection_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        ComboBoxItem item = LanguageSelection.SelectedItem as ComboBoxItem;
        if (item.Content.ToString() == Properties.Strings.MainWindow_Language_Selection_English_Label)
        {
            CultureManager.UICulture = new System.Globalization.CultureInfo("en");
        }
        else if (item.Content.ToString() == Properties.Strings.MainWindow_Language_Selection_Gujarati_Label)
        {
            CultureManager.UICulture = new System.Globalization.CultureInfo("gu");
        }

        Settings.Default["UILanguage"] = CultureManager.UICulture.Name;
        Settings.Default.Save();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T01:41:41.093

通常，在应用程序线程上设置文化将在显示的下一个表单上生效，因此要完成这项工作，您可能需要一个登录/语言选择窗口，您可以在其中设置主线程的文化，然后显示应用程序的主窗口。

围绕此问题进行了一些尝试以使语言选择立即生效（在 WPF 中更容易），但这就是开箱即用的工作方式。

但是，在 WPF 中，如果您直接将 UI 元素绑定到资源，则可以通过在资源属性上引发属性更改事件来更新 UI。实现这一点的最简单方法（除了为 .resx 文件创建新的代码生成器）是将资源包装在模型类中，如下所示：

```
public class StringRes : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged = delegate {};

    public string Login
    {
        get { return Properties.Strings.Login; }
    }

    public string Password
    {
        get { return Properties.Strings.Password; }
    }

    public void NotifyLanguageChanged()
    {
        PropertyChanged(this, new PropertyChangedEventArgs("Login"));
        PropertyChanged(this, new PropertyChangedEventArgs("Password"));
    }
}

public class MainWindow
{
    private StringRes _resources;

    private void LanguageSelection_SelectionChanged()
    {
        System.Threading.Thread.CurrentThread.CurrentUICulture = GetCurrentCulture();
        _resources.NotifyLanguageChanged();
    }
} 
```

如果您已将 UI 元素绑定到 StringRes 类的实例，则它们将在您在模型中引发通知更改事件时更新。

# php - wamp服务器1045错误？

> ID：10666656
> 
> 赞同：0
> 
> 时间：2012-05-19T15:46:36.007
> 
> 标签：php, joomla, wamp

我在本地机器上安装了 wamp 服务器和 joomla。它给 phpmyadmin 没有访问错误 1045。我按照网上的一些说明进行操作，一切都已修复。我不得不删除该安装，因为 joomla 安装出错。现在，当我再次尝试安装 wamp 时，我遇到了相同的 phpmyadmin 错误。尝试了一切，但无法使其正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T12:00:43.083

您是否尝试将您的根密码输入到 config.inc.php 文件（在 Wamp 的应用程序 > phpmyadmin 文件夹中找到）？（另外，你[在 Wamp 的官方网站上看过这个帖子](http://forum.wampserver.com/read.php?2,24792,24807)吗？）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T16:18:02.060

听起来您可能使用了错误的用户名、密码或主机登录。或者您认为它的设置与数据库中的实际设置不匹配。

或者 phpmyadmin 的 config.inc.php 文件有错误的帐户信息，或者使用错误的方法登录。

尝试另一个 WAMP 包并在更改数据库帐户信息时要小心（知道帐户的 Host 字段的用途，它应该始终是 localhost 或 127.0.0.1）。

[http://en.wikipedia.org/wiki/Comparison_of_WAMPs](http://en.wikipedia.org/wiki/Comparison_of_WAMPs)

# python - Python 是否可以在不使用递归的情况下生成排除一组数字的随机数？

> ID：10666661
> 
> 赞同：32
> 
> 时间：2012-05-19T15:46:56.443
> 
> 标签：python, recursion, random, range

我查看了[Python Docs](http://docs.python.org)（我可能误解了），但我没有看到有一种方法可以在不调用递归函数的情况下执行此操作（如下所示）。
我想做的是生成一个随机值，其中不包括中间的值。

换句话说，
假设我想`X`成为一个不在的随机数
`range(a - b, a + b)`
我可以在第一次通过时执行此操作吗，
或者
1\. 我是否必须不断生成一个数字，
2\. 检查是否在`range()`，
3\. 洗涤漂洗？

至于为什么我不想写一个递归函数，
1.它“感觉”我不应该这样做
2.我这样做的数字集实际上可能会非常大，并且
......我听说堆栈溢出很糟糕，我可能只是在这样做时过于谨慎。

我确信有一种很好的、​​Pythonic 的、非递归的方式来做到这一点。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-05-19T16:06:34.593

生成一个随机数并将其映射到您想要的数字范围内。

如果您想在`1-4`or之间生成一个整数`7-10`，不包括`5`and `6`，您可以：

1.  生成范围内的随机整数`1-8`
2.  如果随机数大于 4，则添加`2`到结果中。

映射变为：

```
Random number:    1  2  3  4  5  6  7  8
Result:           1  2  3  4  7  8  9 10 
```

这样做，您永远不需要“重新滚动”。上面的例子是针对整数的，但它也可以应用于浮点数。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-05-19T15:56:41.267

使用随机选择（）。在此示例中，a 是您的下限，b 和 c 之间的范围被跳过，d 是您的上限。

```
import random
numbers = range(a,b) + range(c,d)
r = random.choice(numbers) 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-05-19T16:03:47.300

一种可能的解决方案是将随机数移出该范围。例如

```
def NormalWORange(a, b, sigma):
    r = random.normalvariate(a,sigma)
    if r < a:
        return r-b
    else:
        return r+b 
```

这将产生一个正态分布，在 (ab,a+b) 范围内有一个洞。

编辑：如果你想要整数，那么你需要做更多的工作。如果您想要 [c,ab] 或 [a+b,d] 范围内的整数，那么以下内容应该可以解决问题。

```
def RangeWORange(a, b, c, d):
    r = random.randrange(c,d-2*b) # 2*b because two intervals of length b to exclude
    if r >= a-b:
        return r+2*b
    else:
        return r 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-05-19T15:56:48.793

我可能误解了你的问题，但你可以在没有递归的情况下实现这个

```
def rand(exclude):
    r = None
    while r in exclude or r is None:
         r = random.randrange(1,10)
    return r

rand([1,3,9]) 
```

但是，您仍然会循环遍历结果，直到找到新的结果。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-05-19T15:56:12.440

最快的解决方案是（用 a 和 b 定义禁区， c 和 d 是包括禁区在内的一组好的答案）：

```
offset = b - a
maximum = d - offset
result = random.randrange(c, maximum)
if result >= a:
    result += offset 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-20T19:07:30.147

Li-aung Yip 的回答使递归问题变得毫无意义，但我必须指出，可以进行任何程度的递归而不用担心堆栈。它被称为“尾递归”。Python 不直接支持尾递归，因为 GvR 认为它不酷：

[http://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html](http://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html)

但是你可以解决这个问题：

[http://paulbutler.org/archives/tail-recursion-in-python/](http://paulbutler.org/archives/tail-recursion-in-python/)

我觉得有趣的是，stick 认为递归“感觉不对”。在非常面向函数的语言中，例如 Scheme，递归是不可避免的。它允许您在不创建状态变量的情况下进行迭代，这是函数式编程范式严格避免的。

[http://www.pling.org.uk/cs/pop.html](http://www.pling.org.uk/cs/pop.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-19T15:58:58.060

您仍然需要*一些*范围，即不包括中间值的最小-最大可能值。

你为什么不先随机选择你想要的范围的“一半”，然后在该范围内选择一个随机数？例如：

```
def rand_not_in_range(a,b):
    rangechoices = ((0,a-b-1),(a+b+1, 10000000))
    # Pick a half
    fromrange = random.choice(rangechoices)
    # return int from that range
    return random.randint(*fromrange) 
```

# jquery - 如何通过 .get() 为 jQuery 数组设置关联索引？

> ID：10666670
> 
> 赞同：0
> 
> 时间：2012-05-19T15:48:47.557
> 
> 标签：jquery

我得到了以下函数，它遍历所有 table`th`并根据`selectors`值构建一个数组。

输出是一个数值数组，包含子对象作为值。

现在`.get()`允许我构建数组，但我不知道如何将其设置为关联数组。

**问题：**如何将第一个表格单元格值添加为关联数组索引？

```
( function( $ ) 
{
    $.fn.loadTableData = function( selectors )
    {
        var id = $( this ).attr( 'id' );

        /**
         * Get the output array keys from the <thead/tfoot> cell/th #ids
         */
        var columns = $( '#' + id + ' table th' ).map( function($) 
        {
            // This assumes that your headings are suitable to be used as
            // JavaScript object keys. If the headings contain characters 
            // that would be invalid, such as spaces or dashes, you should
            // use a regex here to strip those characters out.
            return jQuery( this ).attr( 'id' );
        } );

        /**
         * Get the cell data, based on the selector object values by index
         * @return row 
         */
        var cell_data = $( '#' + id + ' table tr' ).map( function( index )
        {
            var row = {};

            // Skip empty rows (example: <thead/tfoot>)
            if ( 0 === $( this ).find( 'td' ).length )
                return;

            // Find all of the table cells on this row.
            $( this ).find( 'td' ).each( function( index, value ) 
            {
                // Skip empty keys
                if ( undefined == selectors[ index ] )
                    return;

                // Determine the cell's column name by comparing its index
                // within the row with the columns list we built previously.
                var row_name = columns[ index ];

                // Add a new property to the row object, using this cell's
                // column name as the key and the cell's text as the value.
                if ( 'text' === selectors[ index ] )
                {
                    row[ row_name ] = $( this ).text();
                }
                else
                {
                    row[ row_name ] = $( this ).find( selectors[ index ] ).val();
                }
            } );

            // Finally, return the row's object representation, to be included
            //  in the array that $.map() ultimately returns.
            return row;

            // Don't forget .get() to convert the $ set to a regular array.
        } ).get();

        return cell_data;
    };
} )( jQuery ); 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T15:55:52.977

javascript 中没有关联数组。只需使用一个对象：

```
var myObject = new Object(); 
```

然后您可以在该对象中使用数字或字符串：

```
myObject = { 'foo' : 'bar' } 
```

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T12:14:48.467

最后的解决方案并不难：使用`.each()`而不是，`.map()`然后分配给输出`object[ final_index ]`而不是使用`.get()`.

# python - 如何将 python 脚本中的队列公开给其他软件？

> ID：10666673
> 
> 赞同：0
> 
> 时间：2012-05-19T15:49:18.960
> 
> 标签：python, django, queue, python-2.7, django-1.4

我在 python 中编写了一个守护程序脚本，它从队列中获取字典并根据这些字典中的信息处理文件。现在我想从一个单独的 Django 脚本在该队列中插入一些额外的字典。是否可以将队列作为文件公开给其他软件？如果没有，还有其他解决方案吗？

我的项目在 debian linux 上运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T15:53:29.810

如果你从 django 脚本启动守护进程，那么你只需要从 django 脚本使用对象的方法（或直接访问它的队列）。

如果守护进程已经启动，那么您需要进程间通信。套接字或管道是一些选项。定期检查文件的内容是另一种解决方案，但反应不快。

[你可以看看官方文档。](http://docs.python.org/library/ipc.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T16:26:56.003

当涉及到相当琐碎的通信设置时，我不是 ipc 的忠实粉丝。构建基于网络的客户端服务器模型也会增加很多开销。因为很可能这两个进程将在同一台机器上运行。

您可以创建一个基于文件的队列，要么腌制它，要么使用某种序列化格式。您单独的 django 脚本的客户端将填充该文件。您的 deamin 将监视该文件，并将反序列化或 depickled 队列对象附加到 deamon 的队列对象。

如果您正在运行 gnu/linux 操作系统，则使用[pynotify来查看文件。](http://home.gna.org/py-notify/)

# google-maps-api-3 - 导航地图google api v3时出现奇怪的警报

> ID：10666675
> 
> 赞同：1
> 
> 时间：2012-05-19T15:49:24.820
> 
> 标签：google-maps-api-3

一个奇怪的问题发生在我身上。当我加载地图时，此警报出现在我的地图上：

```
Dados do mapa
Dados cartográficos ©2012 Google, MapLink 
```

我是巴西人，所以在英语中，此警报将是：

```
Map Data
Cartographic data ©2012 Google, MapLink 
```

这个想法最近开始......大约3或4天。我不知道我能做些什么来解决这个问题......任何人都可以帮助我吗？

如果这有帮助：Firebug 检测到此警报的域是：`maps.googleapis.com`

我的应用程序包括 google api，如下所示：

```
<script src="http://maps.google.com/maps/api/js?sensor=false" type="text/javascript"></script> 
```

我在这里提出另一个问题，因为我找不到谷歌支持电子邮件来谈论当有人违反谷歌使用条款时他们在 api v3 上发出的警报。

我正在阅读这个问题，我真的没有违反使用条款，因为我试图像测试一样在我的本地机器上升级应用程序，但我仍然收到警报。我不想违反谷歌代码来推迟警报，所以我真的需要与支持者交谈以解决问题。任何人都有任何支持者的电子邮件，我真的需要解决这个问题。

非常感谢您的宝贵时间。

Heitor Polizeli Rodrigues 巴西科学计算机学生 UNESP - 3º Year - 5 学期

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T16:01:14.743

这是地图上方的大告示，像这样……？

![在此处输入图像描述](../Images/5e61606070ca27521135e6fb2a1e3355.png)

通常这意味着您隐藏了使用条款或版权链接或 Google 徽标。这*可能*表明 Google 检测到您正在内部网络上使用免费 API。

# javascript - JQuery Mobile 动态插入 UL 列表给出错误

> ID：10666676
> 
> 赞同：0
> 
> 时间：2012-05-19T15:49:32.523
> 
> 标签：javascript, jquery, jquery-mobile

我正在使用 JQuery Mobile 和 Mustache Templating 创建一个移动应用程序。但是我在创建 ul 列表时遇到了问题。

一个非常简单的例子就是这个。

```
 var html = '';
        html += '<ul data-role="listview" data-theme="g"><li><a href="acura.html">Acura</a></li><li><a href="audi.html">Audi</a></li><li><a href="bmw.html">BMW</a></li></ul>

$('#listpage #test_view').html(html).trigger('create'); 
```

我一次又一次遇到的问题是一个看起来像这样的错误：

```
Uncaught TypeError: Cannot read property 'jQuery171025502100912854075' of undefined 
```

填充信息是这样的：

```
Uncaught TypeError: Cannot read property 'jQuery171025502100912854075' of undefined
$.widget._createSubPagesbase:5113
$.widget.refreshbase:4947
$.widget._createbase:4832
$.Widget._createWidgetbase:1065
$.widget._createWidgetbase:1182
$.widget.$.(anonymous function).(anonymous function)base:966
$.widget.bridge.$.fn.(anonymous function)base:1028
e.extend.eachbase:2
e.fn.e.eachbase:2
$.widget.bridge.$.fn.(anonymous function)base:1023
$.widget.enhancebase:1228
$.widget.enhanceWithinbase:1207
$.widget.options.themebase:5198
f.event.dispatchbase:3
f.event.add.h.handle.ibase:3
f.event.triggerbase:3
f.fn.extend.triggerbase:3
e.extend.eachbase:2
e.fn.e.eachbase:2
f.fn.extend.triggerbase:3
setPageContentcomponents:248
displayLoginbase:13133
loginbase:13230
f.Callbacks.nbase:2
f.Callbacks.o.fireWithbase:2
e.extend.readybase:2
c.addEventListener.B 
```

这只发生在我尝试动态创建页面时。有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T20:56:05.457

我看到的两件事是在下一行的末尾添加一个单引号和一个分号。

```
html += '<ul data-role="listview" data-theme="g"><li><a href="acura.html">Acura</a></li><li><a href="audi.html">Audi</a></li><li><a href="bmw.html">BMW</a></li></ul> //<- missing single quote and semi colon 
```

更正：

```
html += '<ul data-role="listview" data-theme="g"><li><a href="acura.html">Acura</a></li><li><a href="audi.html">Audi</a></li><li><a href="bmw.html">BMW</a></li></ul>'; //<- There we go much better 
```

[尝试通过类似jshint](http://www.jshint.com/)或[jslint](http://jslint.com)的方式运行您的 javascript，以帮助您识别此类错误。

# c# - 如何检测当前登录用户是否正在运行进程？

> ID：10666685
> 
> 赞同：3
> 
> 时间：2012-05-19T15:50:57.223
> 
> 标签：c#, .net, shell, process

环境 - C#、.net 4.0、VS 2010

您好，我已经为 Windows 编写了一个简单的 shell 替换。当用户登录时，shell 会自动启动。当用户退出我的 shell 时，会启动普通的 Windows“explorer.exe”。

现在，当用户退出（并正确支持这一点）时，我需要能够检查当前登录用户是否正在运行“explorer.exe”。这可以防止代码不必要地再次启动它，从而导致“Windows 资源管理器”应用程序窗口。

我已经看到了无数关于如何检查和查看进程是否正在运行的示例......但没有看到它是否正在为当前登录的用户运行。

下面的代码将检查“explorer.exe”是否已经在运行，如果没有，将启动它。但是在某些情况下，此代码在不需要时会测试为阳性！

例如，当使用快速用户切换时......另一个用户登录到机器，结果，“explorer.exe”显示在进程列表中。但是，当“explorer.exe”正在运行时，它并没有为当前登录的用户运行！因此，当我的 shell 退出时，代码测试为正，并且“explorer.exe”没有启动。用户只剩下黑屏，没有外壳！

那么，如何修改下面的代码来测试当前登录用户是否正在运行“explorer.exe”？

```
Process[] Processes = Process.GetProcessesByName("explorer");
if (Processes.Length == 0)
{
   string ExplorerShell = string.Format("{0}\\{1}", Environment.GetEnvironmentVariable("WINDIR"), "explorer.exe");
   System.Diagnostics.Process prcExplorerShell = new System.Diagnostics.Process();
   prcExplorerShell.StartInfo.FileName = ExplorerShell;
   prcExplorerShell.StartInfo.UseShellExecute = true;
   prcExplorerShell.Start();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T16:33:18.057

您可以从您的进程中获取 SessionID，然后查询 Processes 并获取具有相同 SessionID 的 Explorer 实例，假设您的程序名为“NewShell”：

```
 Process myProc = Process.GetProcesses().FirstOrDefault(pp => pp.ProcessName.StartsWith("NewShell"));
  Process myExplorer = Process.GetProcesses().FirstOrDefault(pp => pp.ProcessName == "explorer" && pp.SessionId == myProc.SessionId);

  if (myExplorer == null)
    StartExplorer() 
```

顺便提一句。如果您使用`ProcessName.StartsWith("NewShell")`而不是`ProcessName == "NewShell"`then 它也将在 VS 调试器下工作（它将 vshost 添加到 exe）

# c# - C# Linq to Entities：连接子句中的表达式之一的类型不正确。类型推断失败

> ID：10666688
> 
> 赞同：4
> 
> 时间：2012-05-19T15:51:11.150
> 
> 标签：c#, linq, join, where, inference

我正在尝试使用 C# linq 将两个表连接到实体。

一张桌子有客户，另一张桌子有许可证。这些表由 Client_ID 和 ClientLicence_ClientID 连接。由于某种原因（它们不是我的表），Client_ID 是一个 int，而 ClientLicence_ClientID 是一个字符串。

我的代码是：

```
var licences = (from client in entities.Clients
                            join licence in entities.ClientLicences
                            on new { clientId = SqlFunctions.StringConvert((double)client.Client_ID) } equals
                            new { licence.ClientLicence_ClientID }
                            into clientGroup
                            where (filter.clientId == 0 || client.Client_ID == filter.clientId)
                            select licence); 
```

当我尝试编译它时，我得到一个错误：join 子句中的表达式之一不正确。调用“GroupJoin”时类型推断失败。

如果我注释掉 where 语句，那么它就可以工作（尽管没有过滤结果）。

过滤器变量是一个传递给函数的类。它只有一个属性：int clientId。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-19T15:54:01.683

看看你的加入：

```
join licence in entities.ClientLicences on
new { clientId = SqlFunctions.StringConvert((double)client.Client_ID) }
equals
new { licence.ClientLicence_ClientID }
into clientGroup 
```

关键类型是：

*   具有名为的属性的匿名类型`clientId`
*   具有名为的属性的匿名类型`ClientLicence_ClientID`

这两种匿名类型无法比较相等。实际上，我怀疑您在这里根本不需要匿名类型。我希望这能奏效：

```
join licence in entities.ClientLicences on
SqlFunctions.StringConvert((double)client.Client_ID)
equals
licence.ClientLicence_ClientID
into clientGroup 
```

（显然你不需要所有的新行——为了清楚起见，我只是想把各个位分开。）

您声称没有该`where`子句它可以工作 - 但这将非常令人惊讶，因为它是一个问题的连接。

# php - 为 PHP exec() 方法传递交互式参数

> ID：10666700
> 
> 赞同：2
> 
> 时间：2012-05-19T15:53:03.150
> 
> 标签：php, exec, proc-open

需要帮助来实现以下内容。我有一个 C 程序文件如下：

```
#include <stdio.h>

main()
{
  int x;
  int args;

  printf("Enter an integer: ");
  if (( args = scanf("%d", &x)) == 0) {
      printf("Error: not an integer\n");
  } else {
      printf("Read in %d\n", x);
  }
  if (( args = scanf("%d", &x)) == 0) {
      printf("Error: not an integer\n");
  } else {
      printf("Read in %d\n", x);
  }
} 
```

我生成了 a.out，现在我想使用 exec("a.out", $output) 来调用它。但我的问题是我得到了如何在它要求时传递整数的值。我尝试使用 proc_open() 但我无法理解它的用法。如果您能给我一段 PHP 代码，它可以处理这个以传递这两个值并最终打印收到的结果，我将不胜感激。

此致

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T16:11:04.887

我的猜测是

```
$descriptorspec = array(
   0 => array("pipe", "r"),
   1 => array("pipe", "w")
);

$process = proc_open('/full/path/to/a.out', $descriptorspec, $pipes);

if (is_resource($process)) {
    list ($out, $in) = $pipes;

    fwrite($out, "5\n");
    fwrite($out, "7\n");

    echo stream_get_contents($in);
} 
```

# jpql - JPQL BETWEEN 日期间隔

> ID：10666707
> 
> 赞同：0
> 
> 时间：2012-05-19T15:53:48.603
> 
> 标签：jpql

我试图在某个日期间隔内获取所有 MainIntervals。但我总是为空。

这是 JPA 实体

```
@Table(name="MAIN_INTERVAL")
 @NamedQueries({
 @NamedQuery(name = MainInterval.FIND_ALL, query = " select m from MainInterval m"),
 @NamedQuery(name = MainInterval.FIND_BETWEEN, 
    query = "select m from MainInterval m where m.mainIntervalStart 
    BETWEEN :startDate AND :endDate 
    AND m.mainIntervalEnd BETWEEN :startDate AND :endDate"
   )  }) 

public class MainInterval implements Serializable {

public static final String FIND_ALL = "MainInterval.findAll";
 public static final String FIND_BETWEEN = "MainInterval.findBetween";

private static final long serialVersionUID = 1L;
@Id
@GeneratedValue(strategy = GenerationType.AUTO)
@Column(name="MAIN_INTERVAL_ID")
private Long id;

@Column(name="MAIN_INTERVAL_START")
@Temporal(javax.persistence.TemporalType.DATE)
private Date mainIntervalStart;

@Column(name="MAIN_INTERVAL_END")
@Temporal(javax.persistence.TemporalType.DATE)
private Date mainIntervalEnd; } 
```

在 EJB SessionBeans 我有方法：

```
public List<MainInterval> findMainIntervalsBetween(Date startDate, Date endDate){
      List<MainInterval> resultList = em.createNamedQuery(MainInterval.FIND_BETWEEN, MainInterval.class)
              .setParameter("startDate", startDate, TemporalType.DATE).setParameter("endDate", endDate, TemporalType.DATE).getResultList();
      return resultList;
} 
```

但是当我使用 CDI 从 JSF 调用它时，结果列表始终为空。虽然我有一些 MainIntervals 满足 startDate 和 endDate 之间的条件。

我将非常感谢教程的每个答案或链接。最好的祝福！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T16:58:38.173

您的查询是：

```
select m from MainInterval m where m.mainIntervalStart 
BETWEEN :startDate AND :endDate 
AND m.mainIntervalEnd BETWEEN :startDate AND :endDate 
```

第一行的间隔是 [01.05.2012, 31.05.2012]，第二行的间隔是 [01.05.2012, 01.08.2012]。查询的参数是 10.05.2012, 20.05.2012。

因此，对于您的第一行：

```
m.mainIntervalStart BETWEEN :startDate AND :endDate 
01.05.2012          BETWEEN 10.05.2012 AND 20.05.2012 : false 
```

所以第一行没有返回。

对于您的第二行：

```
m.mainIntervalStart BETWEEN :startDate AND :endDate 
01.05.2012          BETWEEN 10.05.2012 AND 20.05.2012 : false 
```

所以第二行也不返回。

在我看来一切都很正常。

# aviary - Aviary HTM5L 示例在 iOS Safari 中不起作用（照片似乎一直在加载）

> ID：10666713
> 
> 赞同：0
> 
> 时间：2012-05-19T15:54:35.027
> 
> 标签：aviary

我拿了示例 HTML5 并在 iOS Safari 中进行了尝试。

示例照片出现，但不断加载，无法执行 Aviary 编辑操作。

有人有解决方案吗？

这是直接来自 Aviary 网站的示例代码：[http://www.aviary.com/web-documentation](http://www.aviary.com/web-documentation)

```
<!-- Load Feather code -->

<script type="text/javascript" src="http://feather.aviary.com/js/feather.js"></script>

<!-- Instantiate Feather -->

<script type="text/javascript">

        var featherEditor = new Aviary.Feather({

            apiKey: '12345678',

            apiVersion: 2,

            tools: 'all',

            appendTo: 'injection_site',

            onSave: function(imageID, newURL) {

                var img = document.getElementById(imageID);

                img.src = newURL;

            }

        });

        function launchEditor(id, src) {

            featherEditor.launch({

                image: id,

                url: src

            });

            return false;

        }

</script>

    <div id="injection_site"></div>

    <img id="image1" src="http://images.aviary.com/imagesv5/feather_default.jpg"/>

    <!-- Add an edit button, passing the HTML id of the image and the public URL ot the image -->

    <p><input type="image" src="http://advanced.aviary.com/images/feather/edit-photo.png" value="Edit photo" onclick="return launchEditor('image1', 'http://images.aviary.com/imagesv5/feather_default.jpg');" /></p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T23:39:56.240

我通过 api@aviary.com 联系了 Aviary，他们提到他们今天修复了一个错误。现在可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-03T08:31:15.673

您必须将此代码放在实时服务器上，本地似乎在这里不起作用。Aviary Web 文档说“在您的服务器上设置一个位置，以便 Aviary 发送服务器到服务器的 HTTP POST”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-08T22:24:42.617

以防万一...您必须在照片中添加完整的“src”。相反，我们使用 "src='/upload/miPhoto.png'" 你必须使用 "src=' [http://localhost:8080/project/upload/miPhoto.png](http://localhost:8080/project/upload/miPhoto.png) '" 希望这会有所帮助！

# qt - 在 Qt 中使用鼠标设置多边形 ROI

> ID：10666715
> 
> 赞同：1
> 
> 时间：2012-05-19T15:54:50.777
> 
> 标签：qt, polygon, roi

任何人都知道我该如何实现这个？我想要一个基本上与 matlab 中的 impoly 或 imageJ 中的“多边形部分”工具完全相同的功能，您可以在其中单击以形成多边形部分，然后可以调整每个节点等。我也想访问从 Qt 到这个函数，因为我正在尝试为我编写的一个小程序制作一个 gui。

另外，我想避免调用 matlab 函数，因为它是不是免费的图像处理工具箱的一部分。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T16:26:28.483

我认为实现这一点的最佳方法是使用 Qt Graphics View 框架。创建一个场景，其中一个项目在后面显示您的图像，并在顶部添加代表多边形角的可拖动项目。

您的选择工具可能应该是 QGraphicsObject 的子类，将多边形角作为子项托管，并且在用户重新调整选择时更新角下方的 QGraphicsPolygonItem。由于 QGraphicsObject 继承 QObject，您可以在选择更改时使用 QPolygonF 或 QPolygon 参数发出信号，通知应用程序的其他部分

这个演示应该是您需要的角落调整功能的一个很好的例子。

[Qt Pathstroke 演示](https://doc.qt.io/qt-5/qtwidgets-painting-pathstroke-example.html)

（嗯，这个例子实现了从头开始绘制和拖动控制点。我相信你可以通过使用 QGraphicsEllipseItem 来做到这一点，并对它们的位置变化做出反应）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T16:58:12.137

我认为您需要自己编写代码。在[C++ GUI Programming with Qt 4](https://rads.stackoverflow.com/amzn/click/com/0132354160)一书中有一个很好的例子（网上有一个 PDF 副本；我认为这是合法的），他们向您展示了如何使用节点和链接创建图表。本章称为“使用图形视图进行基于项目的渲染”。

基本思想是你有一些可拖动的节点，它们是标志设置为的[QGraphicsItems](http://qt-project.org/doc/qt-4.8/QGraphicsItem.html)，然后是连接它们的一些链接，它们是[QGraphicsLineItems](http://qt-project.org/doc/qt-4.8/qgraphicslineitem.html)。所有这些都将进入一个表示 ROI 的复合 QGraphicsItem ，所有这些都将进入一个[QGraphicsScene](http://qt-project.org/doc/qt-4.8/qgraphicsscene.html)，由[QGraphicsView](http://qt-project.org/doc/qt-4.8/qgraphicsview.html)显示。`ItemIsMovable``true`

底线：没有 MATLAB 函数的内置副本，但所有工具都在那里。

# qt - 将 QML PathView 限制为 1 次索引滑动

> ID：10666717
> 
> 赞同：3
> 
> 时间：2012-05-19T15:54:53.390
> 
> 标签：qt, view, indexing, qml

我使用 pathview 元素创建了一种页面切换器，它工作正常，但如果你用力轻弹，它会轻弹几页。我想知道是否有一种方法可以将我的 pathview 元素限制为一次只能更改 1 个索引？

**编辑：** 我不想知道如何创建自己的切换器，我已经有了一个路径视图，可以在我手指后面的页面上顺利运行等等。我只想知道如何将路径视图限制为仅更改 1 个索引一次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T21:52:01.563

你可以尝试使用`MouseArea`和`incrementCurrentIndex`/`decrementCurrentIndex`

```
Rectangle {
    // ...
    PathView {
        id: path_view
        anchors.fill: parent
        interactive: false
        // model, delegate, etc...
        MouseArea {
            anchors.fill: parent
            property int x_pos
            onPressed: {
                x_pos = mouse.x
            }
            onReleased: {
                if (x_pos > mouse.x) {
                    path_view.incrementCurrentIndex()
                }
                else {
                    path_view.decrementCurrentIndex()
                }
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T15:56:47.377

Qt 5 似乎有这个功能，所以我会一直这样直到那时。

# iphone - 模拟在背景中按下网页上的按钮，用于触发动作

> ID：10666718
> 
> 赞同：0
> 
> 时间：2012-05-19T15:55:15.187
> 
> 标签：iphone, ios

假设您在 iOS GUI 上有一个按钮。按下此按钮现在应该会触发网页上的按钮（触发操作）。执行此操作时，该网页不应可见。我怎样才能做到这一点？

我的猜测是，我阅读并解析了网页，如果我找到了按钮操作，我会以某种方式触发它。由于我不是网络程序员，我想知道如何继续或继续阅读这样的任务。

我需要这个任务，因为页面上没有 JSON 或 XML Web 服务可以让生活更轻松。

非常感谢您的任何意见

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T16:03:12.807

好的，假设您已经在屏幕外（或隐藏）的 UIWebView 中加载了网页，并且该网页上的提交按钮在代码中看起来有点像以下代码：

```
<form id="my_submit_button" etc... > 
```

只需调用以下命令：

```
NSString* javascript = @"document.forms['my_submit_button'].submit();";
[myUIWebView stringByEvaluatingJavaScriptFromString: javascript]; 
```

希望这可以帮助！

# database - 解释对专业化和泛化的限制

> ID：10666721
> 
> 赞同：1
> 
> 时间：2012-05-19T15:55:30.200
> 
> 标签：database, er-diagrams

我在我的 DBMS 大学试卷中发现了这个问题。我很困惑它是否属于 ER 图主题或其他内容。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T07:46:52.567

它与整个 DBMS 流程和知识有关，特别是 DBMS 架构/设计流程的一部分。对于该主题的详细解释，是的，这在 UML 图 - ER 图下展开。

# javascript - 嵌入式 youtube 剪辑 - 下一个播放？

> ID：10666722
> 
> 赞同：0
> 
> 时间：2012-05-19T15:55:34.553
> 
> 标签：javascript, youtube

我在页面上嵌入了一些 youtube 剪辑。第一次完成后是否可以播放第二个剪辑？

# c# - 限制对存储在 sd 卡 C# 上的文件夹（及其所有文件和子目录）的访问

> ID：10666723
> 
> 赞同：0
> 
> 时间：2012-05-19T15:55:50.560
> 
> 标签：c#, directory, sd-card, rights

嗨，有没有办法限制对存储在 SD 卡上的文件夹的访问？我试过这个，但它不起作用......欢迎任何想法。谢谢...

```
public static void setRight(string dirName,string account, FileSystemRights rights, AccessControlType controlType)
    {
        DirectoryInfo dir = new DirectoryInfo(dirName);

        DirectorySecurity dSecurity = new DirectorySecurity();// Directory.GetAccessControl(dirName);

        // Add the FileSystemAccessRule to the security settings.
        dSecurity.AddAccessRule(new FileSystemAccessRule(account, rights, controlType));

        // Set the new access settings.
        dir.SetAccessControl(dSecurity);
        Directory.SetAccessControl(dirName, dSecurity);

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T16:07:55.940

尝试使用[`File.Encrypt`](http://msdn.microsoft.com/en-us/library/system.io.file.encrypt)and[`File.Decrypt`](http://msdn.microsoft.com/en-us/library/system.io.file.decrypt)方法。您可以使用递归来加密目录，方法是加密目录中的所有文件。

# php - 如何计算几何平均值（pascal 或 php）

> ID：10666726
> 
> 赞同：0
> 
> 时间：2012-05-19T15:56:21.737
> 
> 标签：php, arrays, pascal, average

我想在您的支持下解决这个问题。假设变量 $ar 中有一个数组，并且这个数组中存在 5 个数字，所以我想通过 Pascal 或 PHP 编程语言计算这些数字的几何平均值。我能怎么做 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T09:29:26.280

“标准”中的可能解决方案`Pascal`：

```
program GeometricAvarage;

const SIZE = 5;

function GeoAvg(A:array of real):real;
var
  avg: real;
  i: integer;

begin
avg := 1;
for i:=0 to (SIZE) do
  avg := avg * A[i];
avg :=Exp(1/SIZE*Ln(avg));
Result:=avg;
end;

begin

var
ar: array [1..SIZE] of real :=(1,2,3,4,5);

writeln('Geometric Avarage = ', GeoAvg(ar)); {Output should be =~2.605}
readln;
end. 
```

如果你想使用动态数组，这应该在`Delphi`或`ObjectPascal`例如完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T16:05:43.803

这是`PHP`版本：

```
function geometric_average($a) {  
   foreach($a as $i=>$n) $mul = $i == 0 ? $n : $mul*$n;  
   return pow($mul,1/count($a));  
}

//usage
echo geometric_average(array(2,8)); //Output-> 4 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-14T12:16:09.543

对于对此有疑问的人，正如我在对 PHP 答案的评论中所述，该答案可能并不适合所有人，尤其是那些希望找到大数或大量数字的几何平均值/平均值的人，如 PHP根本不会存储它。

非常简单的解决方案是将初始数组分成块，计算平均值，然后将它们相乘：

```
function geometricMean(array $array)
{
    if (!count($array)) {
        return 0;
    }

    $total = count($array);
    $power = 1 / $total;

    $chunkProducts = array();
    $chunks = array_chunk($array, 10);

    foreach ($chunks as $chunk) {
        $chunkProducts[] = pow(array_product($chunk), $power);
    }

    $result = array_product($chunkProducts);
    return $result;
} 
```

请注意`10`- 它是块中元素的数量，如果需要，您可以更改它。如果你得到`INF`结果，请尝试降低它。

# java - 使用java的路径中的空间

> ID：10666727
> 
> 赞同：1
> 
> 时间：2012-05-19T15:56:28.537
> 
> 标签：java

你好，我有一个大问题。我正在制作一个 java 程序，我必须在有空格的文件夹中调用一个 exe 文件。该程序还有 2 个参数，路径中总是有空格。例子：

C:\Users\Program File\convert image\convert.exe C:\users\image exe\image.jpeg C:\Users\out put\out.bmp

我必须在 Windows 中执行此操作，但我想将它推广到每个操作系统。

我的代码是：

```
Runtime run = Runtime.getRuntime();<br/>
String path_current = System.getProperty("user.dir");<br/>
String [] uno = new String[]{"cmd","/c",path_current+"\\\convert\\\convert.exe",path_current+"\\\f.jpeg", path_current+"\\\fr.bmp"};<br/>
Process proc2 = run.exec(uno);<br/>
proc2.waitFor();<br/> 
```

这不起作用。我尝试删除字符串数组并在路径前后插入一个带有“\”的简单字符串，但这不起作用。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T15:59:34.317

您可能想使用： [http://commons.apache.org/io/api-1.4/org/apache/commons/io/FilenameUtils.html#separatorsToSystem(java.lang.String)](http://commons.apache.org/io/api-1.4/org/apache/commons/io/FilenameUtils.html#separatorsToSystem(java.lang.String))

另见这个答案：

[是否有 Java 实用程序可以将字符串路径转换为使用正确的文件分隔符字符？](https://stackoverflow.com/questions/1697303/is-there-a-java-utility-which-will-convert-a-string-path-to-use-the-correct-file)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T16:25:06.597

删除“cmd”和“/c”，并使用单个正斜杠代替三重反斜杠。

# asp.net-mvc-2 - 在 wamp 服务器中运行 ASP.NET

> ID：10666729
> 
> 赞同：3
> 
> 时间：2012-05-19T15:56:37.220
> 
> 标签：asp.net-mvc-2, wampserver

是否可以在 WAMP 服务器中运行 .aspx 网站？如果是，那么您将如何做到这一点？请回复

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-19T16:10:29.553

过去可以通过 mod_aspdotnet 让 Apache 直接与 ASP.NET 引擎/系统进行接口，但该模块前段时间被放弃了。

您现在执行此操作的方式是让 Apache 作为前端服务器（端口 80），让 IIS 作为后端服务器（8080）。然后使用 Apache 的 ProxyPass 指令将特定网站或 URL 代理到运行 ASP.NET 代码的 IIS，并将输出返回给 Apache，后者将其传递给访问者/客户端。

这不是一个糟糕的选择，而且效果很好。

您只需要确保您在不同的 IP 上运行 Apache 和 IIS，或者在相同的 IP 但不同的端口上运行。

# php - php中有什么方法可以使SWITCH运算符比较案例严格吗？

> ID：10666735
> 
> 赞同：5
> 
> 时间：2012-05-19T15:56:48.897
> 
> 标签：php, if-statement, switch-statement

我有这样的控制结构：

```
switch ($var) {
   case TRUE: 
   break;

   case FALSE:
   break;

   case NULL:
   break;
} 
```

而且我的`NULL`案例从未被调用，因为正如我在 php 手册中发现的那样：

> 请注意， switch/case 确实**比较松散**。

我知道我可以使用`IF`，`SWITCH`但我不喜欢，我的`IF's`每个.`CASE``SWITCH`

有没有办法以某种方式重写`SWITCH`或使用一些技巧来使其比较值严格？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-19T15:59:12.450

是的，你可以

```
switch (true) {
   case $var === TRUE: 
   break;

   case $var === FALSE:
   break;

   case $var === NULL:
   break;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T15:59:09.433

这就是 switch 构造的工作方式——你无能为力。

我看到的唯一方法是对 PHP 源代码进行一些修改并重新编译它；但是，然后，您将不再运行“PHP” *（并且您的代码将依赖于“PHP”以外的其他东西）*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-03T21:44:12.240

*2020 年更新*

PHP 8 有一个严格的`switch`; **[`match`](https://www.php.net/manual/en/control-structures.match.php)**.

```
match ($var) {
  true => ...,
  false => ...,
  null => ...,
}; 
```

与switch有一些细微的差别。`match`是一个表达式（返回结果），分支只支持单行表达式。

# javascript - 使用 jQuery 进行 AJAX 调用并获取结果

> ID：10666736
> 
> 赞同：0
> 
> 时间：2012-05-19T15:56:49.917
> 
> 标签：javascript, jquery, html

```
jQuery.ajax({
    type: "POST",
    url: "index.php?page=Chat",
    data: { action: "sendMessage" },
}).done(function(msg) {
    jQuery("#main").append(msg);
}); 
```

我的 PHP 代码简单地返回一个字符串

```
return 'myString'; 
```

不幸`myString`的是没有添加到`#main-container`. 这段代码有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T16:43:41.430

OP 试图将 php 页面视为函数，但 php 页面不能像函数一样返回值。因此这个问题的解决方案是在 php 页面中打印 $mystring 而不是返回它。

# php - 将图像保存在数据库中

> ID：10666738
> 
> 赞同：2
> 
> 时间：2012-05-19T15:57:05.167
> 
> 标签：php, mysql

将图像保存在 mysql 数据库中的最佳技术是什么。我应该将图像保存为 blob 数据还是将其保存在目录中。每次用户访问他或她的个人资料时都会显示图像。-提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-19T15:58:14.823

最好的技术是将它们保存在文件系统中并将它们的路径保存在数据库中。

数据库用于数据，文件系统用于文件。

* * *

我过去用来确保没有重复项的技术是对文件的内容进行哈希处理并将其保存为结果，所以我得到如下内容：

```
42efb15825666918118ba72128195246dbae4976.jpg 
```

实际名称保存在数据库中。这是，重复的机会可以忽略不计。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-19T16:01:18.270

最好的技术是 Truth 所说的，此外，为了保证您的图像将具有唯一的名称，请使用当前时间戳在您的目录中重命名它们。

# linux - 如何更改整个文件系统中文件名中的单个字母？

> ID：10666739
> 
> 赞同：3
> 
> 时间：2012-05-19T15:57:14.150
> 
> 标签：linux, file-io, command-line, filesystems

我有数百个文件名中带有特殊字符（'æ'、'ø' 和 'å'）的文件。

如果不重命名，我无法将这些复制到我的外部 mntfs 磁盘。

这些文件位于数十个不同的文件夹中。那里还有成千上万个没有这些字母的其他文件。

我想用它们的占位符（'ae'，'oe'和'aa'）替换特殊字符，同时保持文件名的其余部分不变。

我在ubuntu上。我正在考虑使用 grep、sed 和 tr，但我不知道具体如何。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T16:03:54.477

您可以使用`rename`util-linux 包中的命令。例如，

```
find / -type f -exec rename 'â' 'a' {} \; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T16:21:23.713

[convmv](http://www.j3e.de/linux/convmv/man/)用于在编码之间转换文件名。我相信它可以解决您的问题，即使它可能不是*您*所要求的。

# mysql - 在 MySQL 中不起作用

> ID：10666743
> 
> 赞同：1
> 
> 时间：2012-05-19T15:57:35.220
> 
> 标签：mysql, sql, mysql-error-1241

我在使用 sql 查询时遇到问题

这是我的查询：

```
SELECT `rooms`.*  
FROM `rooms`  
WHERE (`rooms`.`room_id` NOT IN (
    SELECT * 
    FROM `reservations` `res` 
    WHERE ('2012-05-03' NOT BETWEEN res.expected_checkin_date 
    AND res.expected_checkout_date) 
    AND ('2012-05-08' NOT BETWEEN res.expected_checkin_date 
    AND res.expected_checkout_date))) 
```

问题是当第二个`select`返回null时，它显示以下错误：

`#1241 - Operand should contain 1 column(s)`

有谁能够帮助我？

`EDIT`

当我运行此查询时，它会显示所有行，甚至包括第二行内的行，`select` 我不知道为什么？

```
SELECT `rooms`.*, `type`.*, `status`.* FROM `rooms` INNER JOIN `room_types` AS `type` ON `type`.`room_type_id` = `rooms`.`room_type_id` AND `type`.`num_beds` >= 1 AND type.room_type_id=2 INNER JOIN `room_statuses` AS `status` ON `status`.`room_status_id` = `rooms`.`room_status_id` WHERE (`rooms`.`room_id` NOT IN (SELECT `res`.`room_id` FROM `reservations` `res` WHERE (res.expected_checkin_date >= '2012-05-01' AND res.expected_checkin_date < '2012-05-31') AND (res.expected_checkout_date >= '2012-05-31' AND res.expected_checkout_date < '2012-05-31'))) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-19T16:00:12.270

我想你想要类似的东西

```
SELECT `reservations`.`room_id` FROM `reservations` 
```

对于子选择，因为`room_id`这是您与`NOT IN`运算符匹配的内容。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-19T16:03:36.607

```
SELECT `rooms`.*  
FROM `rooms`  
WHERE (`rooms`.`room_id` NOT IN (
    SELECT * 
    FROM `reservations` `res` 
    WHERE ('2012-05-03' NOT BETWEEN res.expected_checkin_date 
    AND res.expected_checkout_date) 
    AND ('2012-05-08' NOT BETWEEN res.expected_checkin_date 
    AND res.expected_checkout_date))) 
```

NOT in 必须限制在 where 中的相同值列表，所以 * 将不起作用，除非 reservations 只有一个 room_Id

```
SELECT `rooms`.*  
FROM `rooms`  
WHERE (`rooms`.`room_id` NOT IN (
    SELECT res.Room_ID 
    FROM `reservations` `res` 
    WHERE ('2012-05-03' NOT BETWEEN res.expected_checkin_date 
    AND res.expected_checkout_date) 
    AND ('2012-05-08' NOT BETWEEN res.expected_checkin_date 
    AND res.expected_checkout_date))) 
```

# iphone - iOS shuffle 图标，如音乐应用程序中的

> ID：10666745
> 
> 赞同：0
> 
> 时间：2012-05-19T15:57:42.187
> 
> 标签：iphone, ios, uitableview

如何在 UITableViewCell 中获得这种效果？图标位置就在标签的右侧。

另外，这个洗牌图标是我应该使用的标准吗？我有一个类似的应用程序，用户可以在其中随机播放单词，如果他们按下它，每个单词都会以随机顺序播放。

![在此处输入图像描述](../Images/02f04275431fb7131dde3eca68286673.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T16:06:45.133

您可以使用 UIKit Artwork Extractor [1] 提取所有苹果标准图标并在您的应用程序中使用它们。苹果对此没有任何问题（到目前为止）。

[1] [https://github.com/0xced/UIKit-Artwork-Extractor/blob/master/README.md](https://github.com/0xced/UIKit-Artwork-Extractor/blob/master/README.md)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T08:47:22.497

（假设您单击该图标以随机播放列表）它就像添加一个以该图像视图为背景的自定义按钮一样简单，作为单元格的子视图。但相应地设置框架，如

```
UIButton *shuffbutton=[UIButton buttonWithType:UIButtonTypeCustom];
        shuffbutton.frame=CGRectMake(100,5, 30, 30);
[shuffbutton setBackgroundImage:[UIImage imageNamed:@"shuffle_icon.png"] forState:UIControlStateNormal];

        [shuffbutton addTarget:self action:@selector(shuffle:) forControlEvents:UIControlEventTouchUpInside];
[cell addSubview:shuffbutton]; 
```

# javascript - 根据提交按钮更改隐藏输入字段的值

> ID：10666752
> 
> 赞同：0
> 
> 时间：2012-05-19T15:59:14.097
> 
> 标签：javascript, html, tcl

我的页面中有多个表单，根据隐藏的输入值，调用不同的部分。

现在我的问题是，我的一个表单中有 2 个输入按钮，根据我单击的按钮，我需要发送适当的隐藏输入类型，

例如在下面的表格中。如果我单击生成密码按钮，我希望目标值（隐藏输入字段的值）作为 generate_password

如果我单击锁定密码，我希望目标值是 user_locked。这是我的代码。

```
 puts "<input type=\"hidden\" name=\"target\" value=\"user_locked\">"
    puts "<tr><td colspan='4'> New User request Review</td></tr>"
    puts "<tr><td><label for=\"full_name\"> Full Name </label></td>"
    puts "<td><input type=\"text\" value =\"$name\" name =\"full_name\" readonly=\"readonly\"></td>"

    puts "<tr><td><input type=\"button\" value=\"Generate Password\" onclick=\"if(confirm('Are you user you want to add this user?')){submit()};\"></td>"
    puts "<td><input type=\"button\" value=\"Lock User\" onclick=\"if(confirm('Are you user you want to add this user?')){submit()};\"></tr>" 
```

好吧，基本上我根据隐藏字段调用不同的函数，

```
set target "";      catch { set target $CGI_DATA(target) }
switch $target {
    "confirm"   { set id [UpdateUserData $id] }
    "user_locked    { DeleteUser $id }
    "user_confirmed"        { NewUserConfirmed}
    "newuser"   { NewUserReview }
    default     { }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T16:08:15.670

在 HTML 中：

```
<input type="hidden" id="target" name="target" value="user_locked"> 
```

...

```
<input type="button" value="Generate Password" id="generate_button"/>
<input type="button" value="Lock User" id="lock_user"/> 
```

在 JS (jQuery) 中：

```
$("#generate_password,#lock_user").click(function(){
    ("#target").val($(this).attr("id"));
    $("form.myform").submit();
}); 
```

您可以更改这些元素的 ID 和类，但要确保 JS 和 HTML 匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T16:09:15.403

您的 onclick 事件的代码可以在确认时执行此操作，而不仅仅是提交表单。如果你使用 jQuery：

```
if(confirm('Are you user you want to add this user?')){
    $("input[name=target]").val('Generate password');
    submit();
} 
```

另一个输入按钮的那个应该非常相似。

您也有可能知道按下了哪个按钮以另一种方式提交表单。如果我没记错的话，在 PHP 中，至少按钮的名称是在 _REQUEST 变量中传递的。

# c# - 如何发布到朋友的通知区？

> ID：10666758
> 
> 赞同：1
> 
> 时间：2012-05-19T16:00:48.957
> 
> 标签：c#, facebook, notifications, facebook-c#-sdk

我有一个网站 facebook 应用程序。我可以登录并发布到用户墙。我真正想要的是当用户在我的网站上创建图像时，他可以创建通知几个朋友以对图像执行操作。我怎样才能做到这一点 ？我有此代码，但在我的通知区域没有看到通知？

```
 var f = new FacebookClient();
        dynamic result = f.Get("oauth/access_token", new
        {
            client_id = FACEBOOK_APP_ID,
            client_secret = FACEBOOK_SECRET,
            grant_type = "client_credentials"
        });

        var token = result.access_token as string;

        var reqClient = new FacebookClient(token);
        var args = new Dictionary<string, object>();
        args["message"] = "Invitation to action message";
        args["data"] = "Invitation to action data";

        var reqResult = reqClient.Post("/" + facebookId.ToString() + "/apprequests", args); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T11:41:29.920

应用程序生成的请求转到书签计数器，而不是顶部通知（带有地球图像）。

应用程序无法向用户发送这种通知（我知道）。您可以在[社交渠道指南](http://developers.facebook.com/docs/channels/)中查看可供您使用的选项，也可以查看[请求文档](http://developers.facebook.com/docs/requests/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-14T05:10:35.013

使用[应用通知](https://developers.facebook.com/docs/concepts/notifications/)。我链接到的指南显示了很多文档。

# java - 尝试避免返回 NULL 时键入安全警告

> ID：10666760
> 
> 赞同：4
> 
> 时间：2012-05-19T16:01:01.437
> 
> 标签：java, generics, type-safety

在 Ecipe，Java 中，我正在研究一种方法，它可以做很多事情，最后需要返回一个带有参数 Element 的生成列表。此列表可能为 null，在这种情况下，我希望该方法返回一个空列表。这是为了防止`if(list != null)`在任何地方都需要检查，因为 for 语句使用空列表。

我通过以下方式执行此操作：

```
return tempList == null ? Collections.EMPTY_LIST : tempList; 
```

然而，这给出了以下警告：

> 类型安全：类型 List 的表达式需要未经检查的转换才能确认为`List<Element>`.

Eclipse 建议的所有解决方案都不起作用。我猜问题在于`Collections.EMPTY_LIST`返回一个通用列表，但不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-19T16:14:35.667

如果您真的想避免局部变量声明，请使用此语法。

```
return elements == null ? Collections.<Element>emptyList() : elements; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-19T16:02:39.203

用于[`Collections.emptyList()`](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#emptyList%28%29)空的、类型安全的和不可变的列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T16:17:10.017

你为什么不直接回来`new ArrayList<Element>()`？

# java - 你如何洗牌非标准的一副牌？

> ID：10666766
> 
> 赞同：2
> 
> 时间：2012-05-19T16:01:53.510
> 
> 标签：java

我正在制作一个玩 UNO 游戏的程序。在 UNO 牌组中，有些牌是重复的，因此我不能只列出整数列表；我必须使用对象。我计划在牌组中使用 LinkedList，但我知道 LinkedList 上的洗牌速度非常慢。

我的问题是，我应该......

1.  完全避免使用 LinkedList，只使用 ArrayList
2.  使用 ArrayList 或类似的，随机播放，然后将内容放入 LinkedList
3.  构造一个 ArrayList，然后制作我自己的 shuffle 例程（也就是不使用 Random），在我们进行时添加到 LinkedList
4.  无论如何洗牌LinkedList（如，它并不是那么糟糕）

这不是家庭作业；这是为了帮助玩得开心:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T16:11:26.103

您可以用纯整数表示卡片。如果一个整数代表一种卡牌，而Uno拥有多张相同类型的卡牌，只需多次使用该卡牌对应的整数即可。

洗牌和交易很容易。

要开始游戏，请设置一个固定大小的整数类型的哑数组（不需要应用花哨的链表或 Arraylist），它可以容纳整个牌组（大小 = N）。用表示 Uno 牌组的整数填充此数组，包括表示重复卡片的重复整数。将 UNDEALT 设置为 N。

要随机播放，请执行以下代码一些适度（100？）次：

```
 1)  Pick a random number from 1 to UNDEALT, R.
 2)  Exchange the the first array slot with the Rth slot. 
```

交易，处理：

```
 1) Give out the card in the UNDEALT slot.
 2) Decrement UNDEALT. 
```

您也可以使用更高级的数据结构来完成所有这些工作，但没有任何意义。鉴于所涉及的总信息是 100 个数据项，除非你做一些非常愚蠢的事情，否则它会比人快。但我的座右铭是：如果简单有效，就坚持简单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T16:19:45.057

一些想法：

*   没有理由为此坚持使用 LinkedList。您可以轻松地使用 ArrayList 来获取第一张和最后一张卡片。事实上，[ArrayList 的性能似乎*更*适合删除单个元素](https://stackoverflow.com/questions/6101789/why-does-javas-arraylists-remove-function-seem-to-cost-so-little)。

*   您还可以对具有相同整数的元素数组进行洗牌。如中所示，没有理由不能对如下所示的数组使用[洗牌算法：](http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle)

`cards[] = {1, 1, 1, 1, 2, 3, 4, 5, 6, 6}`，其中 1 = "Wild"，2 = "Draw Four"，或者你有什么。

在我看来，使用 Array(List) 会更容易做到这一点。这里的区别在于使用数组的*值*进行游戏，而不是使用它们的*键*来确定卡片是什么。

如果你愿意，你可以对对象做同样的事情；您根据数组索引对数组进行洗牌，但使用数组中的值（表示卡片的对象）来了解卡片的实际含义。

编辑：显然Java会为你洗牌！[http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#shuffle(java.util.List)](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#shuffle(java.util.List))

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T16:04:46.670

如果你不经常洗牌，它不会那么慢。

洗牌的一种方法是将第一张牌与另一张牌随机排列。使用 LinkedList并没有*那么*慢。另一方面，将它复制到/从 ArrayList 将需要一些时间。

# uml - 演员是与系统进行物理交互的人，还是让某人这样做的人？

> ID：10666767
> 
> 赞同：1
> 
> 时间：2012-05-19T16:01:54.073
> 
> 标签：uml, use-case

我有一个场景，客户打电话并在车库预约。在绘制 UML 用例图时，与将此约会放置在系统中相关的参与者是 (a) 客户，还是 (b) 员工？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T01:50:18.697

将手指放在键盘和鼠标上的人就是演员。从业务角度来看，打电话的人很重要，但不如与系统交互的客户服务代表重要。

知道参与者是 CSR 有助于屏幕设计师甚至开发人员，因为他们会从这个角度工作，从这个角度询问需求或设计说明，系统会因此变得更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T11:14:16.230

存在冲突的原因是因为你开始绘制这些用例时的项目点。

在您的示例中，您已经知道有一个 CSR 使用“系统”进行预订。

然而，设计可以从头开始。如果发生这种情况，最初的广泛用例将是“客户希望进行预订”。这可能会导致许多不同的情况，即客户将拨打电话号码，自动服务将进行预订，客户到达车库并使用终端进行预订或（如您的情况）与一个企业社会责任（但是那是电话或face2face），他们进行预订。

在许多示例中，客户将是系统中的主要参与者。但是，在您的设计中，CSR 是拿着鼠标/键盘/电话/笔或其他任何东西的人，您不需要设计客户和 CSR 之间的迭代！大多数社会几年前就这样做了:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T13:53:12.687

两者都可以。这取决于。没有单一的好方法可以对此进行建模。我个人会选择客户。

顺便说一句，将电话作为系统的一部分包含在内是完全可以的。因此，系统的边界不必由屏幕、鼠标、键盘来定义。打印机也可能包含在系统中。我已经编写了用例，其中用户打印一些信息并将其归档是非常必要的。

谁是这里的重要演员？客户对吗？有趣的是，Alistair Cockburn 用演员和“利益”模型扩展了 Ivar Jacobson 的演员和目标模型。他的建议是，如果用户目标失败，还要考虑谁在乎（或受到伤害）。

让演员恰到好处重要吗？集思广益以找到针对系统的所有用户目标很有用。当你确信你已经找到了所有的目标时，演员就不再那么重要了。你会根据这个决定“编写”一个完全不同的用例吗？是否会根据该决定的结果构建不同的系统？

谁发起互动？是什么事件发起的呢？此事件是客户决定打电话预约。

您可以将客户建模为主要参与者，将员工建模为次要参与者，帮助客户实现用户目标。都使用电话和系统来达到目标​​，客户由员工帮助。他们如何做到这一点正是设计？

另一个考虑是“演员”是一个角色。因此，您可以使用角色 Appointment Maker。有些人非常关心将职称与角色分开，因为职称所扮演的角色通常具有一定的灵活性。

也有人认为在描述用例时使用“系统”是不可取的。他们认为这是一个设计/实施决策，因此他们更喜欢中立的“表演者”。表演者可以是一个系统，也可以是一个人。在用例文本中，他们使用“发起者”和“执行者”，在用例文本的介绍中，他们解释说“发起者”在用例中是约会制定者。

我个人认为，如果将用例描述为好像客户是操作系统的人，那会更好。员工只是将信息从系统传递给客户，反之亦然。

推荐阅读 Alistair Cockburn 的书。他的见解确实帮助我解决了这样的问题。它还有助于理解与用例相关的 UML

# android - ProGuard 错误找不到超类或接口 org.apache.http.entity

> ID：10666769
> 
> 赞同：23
> 
> 时间：2012-05-19T16:02:26.833
> 
> 标签：android, proguard

我总是遇到 ProGuard 以下错误：

```
[2012-05-19 17:50:13 - xxx] Warning: there were 13 unresolved references to      program class members.
[2012-05-19 17:50:13 - xxx]          Your input classes appear to be     inconsistent.
[2012-05-19 17:50:13 - xxx]          You may need to recompile them and try again.
[2012-05-19 17:50:13 - xxx]          Alternatively, you may have to specify the option 
[2012-05-19 17:50:13 - xxx]          '-dontskipnonpubliclibraryclassmembers'.
[2012-05-19 17:50:13 - xxx] Error: Please correct the above warnings first.
[2012-05-19 17:55:40 - xxx] Proguard returned with error code 1\. See console
[2012-05-19 17:55:40 - xxx] Note: there were 239 duplicate class definitions.
[2012-05-19 17:55:40 - xxx] Warning: org.apache.http.entity.mime.FormBodyPart:    can't find superclass or interface org.apache.james.mime4j.message.BodyPart
[2012-05-19 17:55:40 - xxx] Warning: org.apache.http.entity.mime.HttpMultipart: can't find superclass or interface org.apache.james.mime4j.message.Multipart
[2012-05-19 17:55:40 - xxx] Warning: org.apache.http.entity.mime.MinimalField: can't find superclass or interface org.apache.james.mime4j.parser.Field 
```

我的 proguard.cfg 文件是：

```
-keep class android.support.v4.app.** { *; }
-keep interface android.support.v4.app.** { *; }
-keep class com.actionbarsherlock.** { *; }
-keep interface com.actionbarsherlock.** { *; }

-keepattributes *Annotation*
-keepattributes SourceFile, LineNumberTable

-libraryjars /libs/crittercism_v2_0_1.jar
-libraryjars /libs/dropbox-android-sdk-1.2.2.jar
-libraryjars /libs/FlurryAgent.jar
-libraryjars /libs/httpmime-4.0.3.jar
-libraryjars /libs/json_simple-1.1.jar 
```

我已经添加了所有的外部库，为什么总是出现这些错误？有人可以帮忙吗？

**编辑 21.05.2012：** 问题是如果你添加“Dropbox”jar 和“ActionBarSherlock”。如果我只添加“Dropbox”，我没有问题。如果我只添加“ActionBarSherlock”，我没有问题。但如果我同时添加两者，我会得到上面的错误。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-05-21T08:10:03.443

如果您在项目中添加了“ActionBarSherlock”和“DropBox”罐子，问题就存在了。要解决此问题，请将以下行添加到您的 proguard-project.txt 文件中：

```
-dontwarn org.apache.** 
```

警告将被忽略，它会起作用，因为每个罐子都在工作。所以我认为，如果两者都添加，这将是 ProGuard 中的错误。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-19T16:15:20.807

可能你需要：

> -保留类 org.apache.http.**
> 
> -保持接口 org.apache.http.**

这当然是假设 ProGuard 抱怨 apache 类。诚然，我有些猜测，因为我不是 ProGuard 方面的专家。

# android - 使用部分标题刷新列表视图

> ID：10666775
> 
> 赞同：0
> 
> 时间：2012-05-19T16:03:19.330
> 
> 标签：android

如本例所示，我正在使用带有节标题的列表视图。

[http://eshyu.wordpress.com/2010/08/15/cursoradapter-with-alphabet-indexed-section-headers/](http://eshyu.wordpress.com/2010/08/15/cursoradapter-with-alphabet-indexed-section-headers/)

问题是如果我删除或添加一个项目，这些部分都是错误的。这些部分似乎是在适配器的构造函数中设置的，因此似乎没有办法在不创建新适配器的情况下刷新这些部分。有没有办法在不创建新适配器的情况下正确地重新创建节标题

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T16:20:59.783

您不必创建新适配器来更新 ListView 的内容。只需将您的适配器存储在一个字段中并使用以下代码更新您的列表：

```
mAdapter.setList(yourNewList);
mAdapter.notifyDataSetChanged(); 
```

为了澄清这一点，您的 Activity 应如下所示：

```
private YourAdapter mAdapter;

protected void onCreate(...) {

    ...

    mAdapter = new YourAdapter(this);
    setListAdapter(mAdapter);

    updateData();
}

private void updateData() {
    List<Data> newData = getYourNewData();
    mAdapter.setList(yourNewList);
    mAdapter.notifyDataSetChanged();
} 
```

# mysql - MySQL：根据时间戳间隔选择数据

> ID：10666776
> 
> 赞同：0
> 
> 时间：2012-05-19T16:03:22.050
> 
> 标签：mysql

我的数据集是一个包含 3 行的表：硬盘驱动器的 ID、空白空间的百分比、时间戳。该表每 20 分钟附上每个 HDD（其中 1200 个）的新状态。

如果我想选择我的 HDD 池的最后一个状态，我会选择 MAX（时间戳），如果我想要最旧的，我会选择 MIN（时间戳）。

但是假设我有一个给定的时间戳，我怎么能要求 MySQL 从这个时间戳附近或多或少的 X 秒中检索数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T16:07:50.847

```
WHERE yourTimeStamp 
  between TIMESTAMPADD(SECOND,-3,yourtimestamp) 
      and TIMESTAMPADD(SECOND, 3,yourtimestamp) 
```

其中 -3 和 + 3 被替换为 X

[http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_timestampadd](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_timestampadd)以获得更多帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T16:09:56.527

像这样：

```
WHERE timestamp BETWEEN DATE_SUB('<given_timestamp>', INTERVAL 5 SECOND) 
    AND DATE_ADD('<given_timestamp>', INTERVAL 5 SECOND); 
```

As mentioned in the other answer, your query is slow when selection is based on the `timestamp`field.

您可以`INDEX`在该列上添加一个以加快速度：

```
ALTER TABLE <table_name> ADD INDEX(`timestamp`) 
```

请注意，根据表的大小，第一次添加索引需要一段时间。其次，它会减慢`INSERT`查询速度并增加数据库的大小。这对每个人来说都是不同的，所以你只需要通过测试来找出答案。

# android - 如何从可编辑转换为浮动

> ID：10666783
> 
> 赞同：0
> 
> 时间：2012-05-19T16:04:02.957
> 
> 标签：android, casting

我想让 EditText 中的文本转换为浮动

任何人都知道如何从 EditText.getText() 转换为浮动？

* * *

我使这个解决方案 float Salary= new Float(salaryET.getText().toString());

它工作正常

感谢每一个人

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T16:05:38.423

```
String str = EditText.getText().toString;
try{
     Float f = new Float(str);
     System.out.println("Float value is: = " + f);
}catch (Exception e){
   System.out.println("Exception: " + e.getMessage());
} 
```

使用上面的代码将可编辑转换为浮动。还为转换时的任何异常添加了 try catch 块。

**更新：：：**

```
Float f = Float.parseFloat(str);//you can also use this 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T16:06:53.220

```
Float f = Float.valueOf(EditText.getText().toString()); 
```

此代码将`EditText`文本转换为浮点数

# java - 找不到符号方法 console();

> ID：10666786
> 
> 赞同：0
> 
> 时间：2012-05-19T16:04:14.930
> 
> 标签：java, console

这是我的代码：---

```
import java.lang.*;
class Console
{
        public static void main(String args[])
        {
            char i;
            i=System.console().readLine("this is how we give he input to the string");
            System.out.println("this is what we want to print:0)");
            System.out.println(i);

        }
} 
```

我得到的输出是这样的： -

输出：-

```
.java:7: cannot find symbol
symbol  : method console()
location: class java.lang.System
    i=System.console().readLine("this is how we give he input to the string");
                ^
1 error

Tool completed with exit code 1 
```

如果有人可以帮助我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-26T06:43:13.213

此外，一些 IDE 的控制台类有问题（可能是因为他们自己使用它来将输出重定向到窗口/对话框）

所以一个非常好的解决方法是使用：

```
 BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
    String str = br.readline();
    //or if you want a char
    char i = str.charAt(0); 
```

希望有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T16:07:59.170

jdk版本的错误，因为它必须是jdk1.6或更高版本，并且当更改为较新的jdk时，出现编译问题，`System.console().readLine()`返回a `String`，但你分配`char`

# c - 在 Linux 上从消息队列中读取时出现错误“错误地址”

> ID：10666789
> 
> 赞同：5
> 
> 时间：2012-05-19T16:04:57.423
> 
> 标签：c, linux, unix, message-queue

当我需要使用 Linux 消息队列编写简单的时间服务器和客户端时，我有任务。服务器打开一个消息队列，客户端发送一个带有其 PID 的请求（类型为 1 的消息），服务器读取该消息并发送一条 PID 类型的消息（取自读取的消息）。我把所有的代码都放在下面，因为我不知道我在哪里犯了错误。我不是 Linux 编程专家。甚至不知道我写的服务器是否正确。

服务器和客户端包含的文件（我需要这样写）。

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>
#include <sys/msg.h>
#include <sys/ipc.h>
#include <sys/types.h>
#include <string.h>
#include <signal.h>

#define QUEUE 100
#define PERM_ALL 0777

typedef struct my_msgbuf {
    long mtype;
    int pid;
} ClientMessage;

typedef struct my_msgbuf2 {
    long mtype;
    struct tm time;
} TimeMessage; 
```

服务器

```
int m_queue;

void cleanup(int signum) {
    if (msgctl(m_queue, IPC_RMID, NULL) == -1) {
        printf("Something happen on clean up\n");
        exit(1);
    }
    exit(signum);
}

int main() {
    ClientMessage pid_message;
    TimeMessage t;
    time_t clock;
    struct tm *cur_time;

    if ((m_queue = msgget(QUEUE, PERM_ALL | IPC_CREAT)) == -1) {
        printf("Can't create and open message queue\n");
        exit(1);
    }
    printf("created message queue = %d\n", m_queue);
    fflush(stdout);
    //t = malloc(sizeof(TimeMessage));
    signal(SIGINT, cleanup);

    while (1) {
        if (msgrcv(m_queue, &pid_message, sizeof(pid_message.pid), 1, 0) == -1) {
            break;
        } else {
            t.mtype = pid_message.pid;
            clock = time(NULL);
            cur_time = localtime(&clock);
            memcpy(&t.time, cur_time, sizeof(struct tm));
            msgsnd(m_queue, &t, sizeof(struct tm), 0);
        }
    }

    cleanup(0);
} 
```

客户

```
int main() {
    int m_queue;
    TimeMessage *t;
    ClientMessage client;

    if ((m_queue = msgget(QUEUE, PERM_ALL)) == -1) {
        perror("Error in opening queue");
        exit(1);
    }

    client.mtype = 1;
    client.pid = getpid();

    while (1) {
        if (msgsnd(m_queue, &client, sizeof(client.pid), 0) == -1) {
            perror("Error sending to queue");
            exit(1);
        } else {
            if (msgrcv(m_queue, t, sizeof(struct tm), client.pid, 0) == -1) {
                perror("Error reading from queue");
                exit(1);
            }   
            printf("time: %d:%d:%d\n", t->time.tm_hour, t->time.tm_min, t->time.tm_sec);
        }
    }
    return 0;
} 
```

两个程序都编译没有错误，但客户端返回“从队列读取错误”msgrcv 返回 -1。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-22T17:39:59.983

After adding the `perror` it appears that you have got the error stating `"Bad Address"` (*EFAULT*) which means that "The address pointed to by *msgp* (buffer) isn't accessible". From the code it appears that there has been no memory allocated to `TimeMessage *t` so you can either allocate memory or just change it to `TimeMessage t` and pass `&t` instead of `t` to `msgrcv`. Also size should be `sizeof t` (assuming the change from `*t` to `t`, or `sizeof(TimeMessage)` for `*t`) instead of `sizeof(struct tm)` (& obviously you would change `printf` statement accordingly)
Hope this helps!

# node.js - Node.js For-Loop 内部异步回调

> ID：10666790
> 
> 赞同：0
> 
> 时间：2012-05-19T16:05:00.343
> 
> 标签：node.js, asynchronous, for-loop, callback

我必须遵循评估密码是否在用户密码历史记录中的功能。这是代码：

```
isPasswordInPwdHistory : function(redisClient, userId, encPassword, cb) {

        var key = 'user:' + userId + ':pwdhistory';
        redisClient.llen(key, function(err, reply) {
            if (err) {
                status.results = [ ];
                xutils.addStatusResultsItem(status.results, err, null, null, null);
                cb(status);
            }
            else {
                var numPwds = reply;

                var match = false;
                var funcError;

                for (i=0; i <= numPwds - 1; i++) {
                    var error;
                    var pwdValue;
                    redisClient.lindex(key, i, function(err, reply) {
                        if (err) {
                            console.log('lindex err = ' + err);
                            error = err;
                        }
                        else {
                            console.log('lindex reply = ' + reply);
                            console.log('lindex encPassword = ' + encPassword);
                            console.log('lindex (encPassword === reply) = ' + (encPassword === reply));
                            pwdValue = reply;
                        }
                    });

                    console.log('for-loop error = ' + error);
                    console.log('for-loop pwdValue = ' + pwdValue);
                    console.log('for-loop (encPassword === pwdValue) = ' + (encPassword === pwdValue));

                    if (error) {
                        funcError = error;
                        break;
                    }
                    else if (encPassword === pwdValue) {
                        console.log('passwords match');
                        match = true;
                        break;
                    }
                }

                console.log('funcError = ' + funcError);
                console.log('match = ' + match);

                if (funcError) {
                    status.results = [ ];
                    xutils.addStatusResultsItem(status.results, err, null, null, null);
                    cb(status);
                }
                else
                    cb(match);
            }
        });
    } 
```

这是控制台输出：

```
for-loop error = undefined
for-loop pwdValue = undefined
for-loop (encPassword === pwdValue) = false
funcError = undefined
match = false
isPasswordInPwdHistory = false
lindex reply = 5f4f68ed57af9cb064217e7c28124d9b
lindex encPassword = 5f4f68ed57af9cb064217e7c28124d9b
lindex (encPassword === reply) = true 
```

一旦我离开 redisClient.lindex() 调用的范围，我就会丢失这些值。如何在 for 循环中传递这些值以进行评估？

**更新**

当发出 redisClient.lindex() 回调时，我稍微重构了代码以处理新密码 (encPassword) 与索引 i 处现有密码的匹配。

```
isPasswordInPwdHistory : function(redisClient, userId, encPassword, cb) {

        var status = new Object();
        var key = 'user:' + userId + ':pwdhistory';

        redisClient.llen(key, function(err, reply) {
            if (err) {
                status.results = [ ];
                xutils.addStatusResultsItem(status.results, err, null, null, null);
                cb(status);
            }
            else {
                var numPwds = reply;
                var loopCt = 0;

                for (i=0; i <= numPwds - 1; i++) {
                    loopCt++;
                    redisClient.lindex(key, i, function(err, reply) {
                        if (err) {
                            status.results = [ ];
                            xutils.addStatusResultsItem(status.results, err, null, null, null);
                            cb(status);
                        }
                        else if (encPassword === reply) {
                            status.results = [ ];
                            xutils.addStatusResultsItem(status.results, null, 0, null, true);
                            cb(status);
                        }
                        else if (loopCt === numPwds && encPassword !== reply) {
                            status.results = [ ];
                            xutils.addStatusResultsItem(status.results, null, 0, null, false);
                            cb(status);
                        }
                    });
                }
            }
        });
    } 
```

不幸的是，即使 encPassword === 回复为真并且我发出 cb(status)，调用者仍看到状态 === 未定义。发出 cb(status) 后如何永久退出 for 循环？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T18:15:56.770

看起来您的逻辑中混合了同步和异步思维。您的`for`循环将尽可能快地触发对 Redis 的请求，而无需等待 Redis 响应（这是异步 IO 的本质）。因此，当您的代码运行时`console.log('funcError = ' + funcError);`，`console.log('match = ' + match);`Redis 甚至可能还没有响应`i`循环中的第一个值（与您在输出中找到的值相匹配）。

我可能会研究像[async](https://github.com/caolan/async)这样的库来帮助完成这项任务；特别是，[`whilst`看起来它可能很合适](https://github.com/caolan/async#whilst)。也许是这样的：

```
var numPwds = reply;
...
var match = false;
var i = 0;

async.whilst(
  // keep looping until we have a match or we're done iterating the list
  function () { return match == false && i < numPwds; },

  // this is our function to actually check Redis
  function (callback) {
    redisClient.lindex(key, i, function(err, reply) {
      if (err) {
        console.log('lindex err = ' + err);
        error = err;
      }
      else {
        if (encPassword === reply) { match = true; } // this will cause `whilst` to stop.
      }
      i++;
      callback();
    });
  },

  function (err) {
    // this is called when our first function that calls
    // return match == false && i < numPwds
    // returns false, which will happen when we're out of list elements to check
    // or we have a match. At this point, match being true or false
    // let us know if we found the password.
  }
); 
```

最后一点，除非您需要支持在“已使用密码”列表中多次显示相同的密码，否则您可以通过使用集合或排序集合来为自己省去很多麻烦。

# android - 使用 html 标签解析文本

> ID：10666798
> 
> 赞同：0
> 
> 时间：2012-05-19T16:06:23.500
> 
> 标签：android, xml-parsing, saxparser, domparser

我必须从服务器解析一个 xml 文件；我尝试使用 DOm 解析器和 Sax 解析器，但我无法解析 html 标签，并且在找到第一个“<”时停止

这是我的解析器类：

```
public class XMLParser {

    // constructor
    public XMLParser() {

    }

    public String getXmlFromUrl(String url) {
        String xml = null;
        BufferedReader in = null;

        try {
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);

            HttpResponse httpResponse = httpClient.execute(httpPost);
            in =  new BufferedReader(new InputStreamReader(
                    httpResponse.getEntity().getContent(), "UTF-8"));

            StringBuffer sb=new StringBuffer("");
             String line = "";
             String NL = System.getProperty("line.separator");

             while ((line = in.readLine()) != null)
                {
                    sb.append(line );
                    sb.append(NL );
                    line=in.readLine();
                }
             in.close();

            xml = sb.toString();;

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        // return XML
        return xml;
    }

    public Document getDomElement(String xml){
        Document doc = null;
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        try {

            DocumentBuilder db = dbf.newDocumentBuilder();

            InputSource is = new InputSource();
                is.setCharacterStream(new StringReader(xml));
                doc = db.parse(is); 

            } catch (ParserConfigurationException e) {
                Log.e("Error: ", e.getMessage());
                return null;
            } catch (SAXException e) {
                Log.e("Error: ", e.getMessage());
                return null;
            } catch (IOException e) {
                Log.e("Error: ", e.getMessage());
                return null;
            }

            return doc;
    }

     public final String getElementValue( Node elem ) {
         Node child;
         if( elem != null){
             if (elem.hasChildNodes()){
                 for( child = elem.getFirstChild(); child != null; child = child.getNextSibling() ){
                     if( child.getNodeType() == Node.TEXT_NODE  ){
                         return child.getNodeValue();
                     }
                 }
             }
         }
         return "";
     }

     /**
      * Getting node value
      * @param Element node
      * @param key string
      * */
     public String getValue(Element item, String str) {     
            NodeList n = item.getElementsByTagName(str);        
        return this.getElementValue(n.item(0));
    }

  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T16:25:29.817

您应该使用 HTML 解析器，因为 Web 上可用的大多数 html 内容不符合 XML 规范。在简单的情况下，正则表达式就足够了，但在复杂的情况下，您可能需要一个 HTML 解析器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T16:14:05.120

如果您的 HTML 格式不正确（例如包含不关闭的标签），那么这些解析器都不会工作。您最终可能不得不手动解析（例如，通过使用正则表达式和[Pattern](http://developer.android.com/reference/java/util/regex/Pattern.html)类）。如果 HTML 格式正确，您应该发布您收到的错误，并且可能是指向该页面的链接。

# android - Android Open GL ES 纹理问题

> ID：10666801
> 
> 赞同：1
> 
> 时间：2012-05-19T16:06:33.690
> 
> 标签：android, opengl-es

我遇到了一个我认为可能与纹理坐标有关的问题，下图显示了正在渲染的瓷砖贴图 - 但是有时瓷砖之间会出现间隙，如以下网址的屏幕截图所示（一半向下屏幕瓷砖之间有间隙）。

[http://img15.imageshack.us/img15/4724/tileproblem.png](http://img15.imageshack.us/img15/4724/tileproblem.png)

我的纹理区域被声明为

```
public class TextureRegion {    
public final float u1, v1;
public final float u2, v2;
public final Texture texture;

public TextureRegion(Texture texture, float x, float y, float width, float height) {
    this.u1 = x / texture.width;
    this.v1 = y / texture.height;
    this.u2 = this.u1 + width / texture.width;
    this.v2 = this.v1 + height / texture.height;        
    this.texture = texture;
    }
} 
```

平铺纹理来自地图集，大小为 32x32 像素，我使用的是 GL_Nearest

作为 Open GL 的新手，我不太明白我需要更改什么。

纹理创建示例

```
tile = new TextureRegion(items, 192,160,34,34); 
```

干杯

斯图尔特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T01:14:14.877

确保您的纹理是基数 2，例如 128x256 或 512x512 等。

# android - ZXing无法扫描二维码

> ID：10666805
> 
> 赞同：0
> 
> 时间：2012-05-19T16:07:03.737
> 
> 标签：android, zxing

我是 Android 开发的新手，和许多其他人一样，我正在拼命尝试将 ZXing 集成到我的项目中。我必须为 Android 制作一个独立的 QR 扫描应用程序。（我使用的是 2.3.3 sdk）。

我必须解释一下，我已经尝试通过阅读有关该主题的所有答案来找到解决问题的方法，但我根本没有成功。

这是我所做的：

1.  [我从这里](http://code.google.com/p/zxing/downloads/list)下载了 ZXing 2.0 Release

2.  然后，我只需将文件拖到我的项目中即可将资产、src 和 res 添加到我的项目中。

3.  我通过右键单击我的项目 > 构建路径 > 配置构建路径来引用位于“核心”文件夹中的 core.jar 存档。我将 ir 添加为外部 JAR。

这是要说明的[图像](http://i1191.photobucket.com/albums/z478/peperamirez89/Capture.jpg)。

1.  在这里，我在 ID 和其他一些资源中遇到了一些错误。发生这种情况是因为我引用了错误的 R.java，所以我通过将“import com.google.zxing.client.android.R”更改为“import com.android.novaqr.R”解决了这个问题，这是我的项目包裹。

2.  然后我补充说：

    ```
    <uses-permission android:name="android.permission.CAMERA"/> 
    ```

和

```
 <activity android:name="com.google.zxing.client.android.CaptureActivity"
    android:screenOrientation="landscape"
    android:configChanges="orientation|keyboardHidden"
    android:theme="@android:style/Theme.NoTitleBar.Fullscreen"
    android:windowSoftInputMode="stateAlwaysHidden">
      <intent-filter>
        <action android:name="android.intent.action.MAIN"/>
        <category android:name="android.intent.category.DEFAULT"/>
      </intent-filter>
      <intent-filter>
        <action android:name="com.google.zxing.client.android.SCAN"/>
        <category android:name="android.intent.category.DEFAULT"/>
      </intent-filter>
    </activity> 
```

到 AndroidManifest.xml

所以现在我的代码没有错误，这里是我需要帮助的地方：当我按下按钮时，我需要手机进行扫描。我已经尝试了很多关于这个主题的其他问题的解决方案，但我没有成功。

我希望我的问题很清楚，如果没有，请告诉我，我会尝试更具体

任何帮助都会非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T16:10:59.593

*强烈*建议您不要完全复制和粘贴我们的应用程序。听起来您在 Android 方面的经验还不够丰富，无法以这种方式使用它。

相反，您可以通过 Intent 使用应用程序的扫描服务，这更容易且受支持：[http ://code.google.com/p/zxing/wiki/ScanningViaIntent](http://code.google.com/p/zxing/wiki/ScanningViaIntent)

# ruby-on-rails - Rails：急切地加载一个belongs_to与：条件引用自我

> ID：10666808
> 
> 赞同：3
> 
> 时间：2012-05-19T16:07:22.133
> 
> 标签：ruby-on-rails, eager-loading, belongs-to

在我的模型中，有父母、孩子和命名的孩子组。组属于父母，孩子属于父母，孩子可能属于同一个父母的一组。

组可能会被删除，然后使用相同的名称但不同的 id 重新创建。一个孩子通过名称而不是 id 来引用它的组，因此如果该组被重新创建，它将属于同一个组。同名的组可能存在多个父级，所以我们需要区分它们。

```
class Parent < ActiveRecord::Base
  has_many :groups
  has_many :children
end

class Group < ActiveRecord::Base
  belongs_to :parent

  has_many :children,
    :foreign_key => :group_name,
    :primary_key => :name,
    :conditions => proc { "children.parent_id = #{self.parent_id}" }
end

class Child < ActiveRecord::Base
  belongs_to :parent

  belongs_to :group,
    :foreign_key => :group_name,
    :primary_key => :name,
    :conditions => proc { "groups.parent_id = #{self.parent_id}" }
end 
```

在我尝试急切地加载儿童组之前，这非常有效。`Child.where(...).includes(:group)`给`undefined method parent_id' for #<Class:0x00000002dcc290>`. 条件 proc 是 Child 类，而`self`不是 Child 对象。

我如何渴望加载这样的关联？还是我的模型结构很愚蠢？已经想到了组的复合主键，但我宁愿不这样做，因为默认情况下 rails 不支持。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T17:03:17.967

我最终手动编写了 Rails 在急切加载时所做的大致代码：

```
class Child
  def self.eager_load_groups(children)
    keys = children.map {|c|
      "(#{connection.quote(c.parent_id)}, #{connection.quote(c.group_name)})"
    }
    keys.uniq!
    return if keys.empty?

    groups = Group.where('(parent_id, name) IN (' + keys.join(',') + ')')
    groups_by_key = Hash[groups.map {|g| [[g.parent_id, g.name], g] }]

    for c in children
      c.group = groups_by_key[[c.parent_id, c.group_name]]
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T16:38:08.130

看起来 :finder_sql 选项适用于 has_many 关系。不幸的是，它不是 belongs_to 关系的选项。

```
class Group < ActiveRecord::Base
  belongs_to :parent

  has_many :children,
    :foreign_key => :group_name,
    :primary_key => :name,
    :finder_sql => proc { "select distinct children.id from children where children.parent_id = #{self.parent_id}" }
end 
```

# cuda - Cuda 可以更快地找到组合吗？

> ID：10666812
> 
> 赞同：1
> 
> 时间：2012-05-19T16:07:44.983
> 
> 标签：cuda

我想知道 Cuda 是否对这类问题有用（以及如何在 Cuda 中解决它）。基本上我一直在使用 python 来查找列表的组合，但是随着数据变大，我认为在 gpu 上运行它可能是一个有趣的想法。

假设我有一个列表`[1, 2, 3,4,5,6,7,8]`，我只想要`7`组合然后我会得到：

```
(1, 2, 3, 4, 5, 6, 7)
(1, 2, 3, 4, 5, 6, 8)
(1, 2, 3, 4, 5, 7, 8)
(1, 2, 3, 4, 6, 7, 8)
(1, 2, 3, 5, 6, 7, 8)
(1, 2, 4, 5, 6, 7, 8)
(1, 3, 4, 5, 6, 7, 8)
(2, 3, 4, 5, 6, 7, 8) 
```

随着数据变大，需要很长时间。我一直在使用`itertools.combinations`which 从我身上抽象出所有东西，所以如果我尝试自己编程，是否有任何资源或代理代码可以查看？大多数与组合相关的算法都是递归的，我的 Cuda 卡不支持递归。

关于从哪里开始的任何建议/提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T17:53:52.880

我做了一个小型 CUDA 项目，通过尝试排列来进行装箱：

[http://www.dahlsys.com/software/fill_media/index.html](http://www.dahlsys.com/software/fill_media/index.html)

# iphone - 存储省市与plist协调

> ID：10666814
> 
> 赞同：0
> 
> 时间：2012-05-19T16:07:48.563
> 
> 标签：iphone, ios, xml, plist

.plist中如何存储省、市、坐标信息？这些信息应该随我的应用程序一起提供。我尝试了以下格式，但它不起作用。有没有其他方法可以替代 plist？由于 plist 不适合查询。

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
<key>ProvinceN</key>
<array>
        <dict>
        <key>cityName</key>
        <string>cityM</string>
        <key>latitude</key>
        <integer>32.5543</integer>
        <key>longitude</key>
        <integer>88.3237</integer>
        </dict>
</array>
</dict>
</plist> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T16:49:20.037

您可以使用 SQLite 数据库而不是 plist。如果您不知道如何使用它，[这里](http://www.raywenderlich.com/913/sqlite-101-for-iphone-developers-making-our-app)有一个很好的教程。另外，为了在将数据库复制到您的 xCode 项目之前对其进行管理，我建议您使用 mozilla firefox 的 SQLite 管理器扩展。

如果您需要更多信息，很容易在互联网上找到 SQLite 教程，在谷歌上搜索类似“iPhone sqlite 教程”的内容。

希望对你有帮助！

# jquery - ckeditor用jquery加载数据

> ID：10666826
> 
> 赞同：0
> 
> 时间：2012-05-19T16:08:56.363
> 
> 标签：jquery, ckeditor

我在从 Jquery 中将内容加载到 CKeditor 时遇到了一些麻烦。我有一个邮件模式列表，并且对于每一个我都有一个编辑链接，所以用户应该能够编辑模式（在 CKeditor 中）。

我的 Jquery 看起来像这样：

```
$(document).ready(function() {
    $(".flip").click(function(){
        $("#editor").ckeditor();
        $.get("test.php", function(data){
            $("#editor").val(data);
        });
        $(".editMailSchema").slideToggle("slow");   
  });
}); 
```

html 元素如下所示：

```
<div class="editMailSchema">
    <textarea id="editor" name="editor"></textarea>
</div> 
```

该元素正在被搜索，但没有来自 test.php 的内容。test.php 看起来像这样：

```
<?php
echo "test";
?> 
```

谁能指导我正确的方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T17:30:21.247

[插入](http://ckeditor.com/blog/CKEditor_for_jQuery)

```
//for setting or getting the data of the Ckeditor use
// Get the editor data.
var data = $( 'textarea.editor' ).val();
// Set the editor data.
$( 'textarea.editor' ).val( 'my new content' ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T07:19:55.483

我通过像这样编辑我的 jquery 代码来修复它：

```
 $(".flip").click(function(){
        $("#mailSchema1").ckeditor();
        $.get("php/settings/test.php", function(data){
            $('#mailSchema1').val(data);
        });
        $(".editMailSchema").slideToggle("slow");   
  }); 
```

现在它可以工作了:)

# java - AudioInputStream() 不会停止

> ID：10666827
> 
> 赞同：1
> 
> 时间：2012-05-19T16:09:00.183
> 
> 标签：java, swing, audio, io, jmenuitem

我已经使用`AudioInputStream`.

当我按下 时`On`，将播放背景音频，并`Off`停止播放背景音频。

这是我的音频播放部分代码的一部分：

```
public void playSound(int i)
{
    try 
    {
        .  //Others buttons sound
        .  //Others buttons sound
    if(i == 3 || i == 4)
    {
        AudioInputStream audioInputStream = AudioSystem.getAudioInputStream(new File("Background.wav"));
        Clip clip3 = AudioSystem.getClip( );
        clip3.open(audioInputStream);
        if(i == 3)
        {
            clip3.loop(Clip.LOOP_CONTINUOUSLY);
            clip3.start();
            settingSubMenuItem3.setEnabled(false);
            settingSubMenuItem4.setEnabled(true);
        }
        if(i == 4)
        {
            clip3.stop();
            settingSubMenuItem3.setEnabled(true);
            settingSubMenuItem4.setEnabled(false);
        }
    }
    catch(Exception e)
    {
        System.out.println("Error with playing sound.");
        e.printStackTrace();
    }
} 
```

这是`ButtonListener`部分：

```
private class MenuItemListener implements ActionListener
{
    public void actionPerformed(ActionEvent e)
    {
        if(e.getSource() == settingSubMenuItem3)
        {
            playSound(3);
        }
        if(e.getSource() == settingSubMenuItem4)
        {
            playSound(4);       
        }
    }
} 
```

当我按下按钮时，我的代码可以播放音频`On`，但是当我按下`Off`按钮时，它不起作用。

在编译和运行过程中没有错误。

我的代码有什么错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T16:10:48.473

您的 AudioInputStream 变量 audioInputStream 和 Clip 变量 clip3 是该方法的本地变量。您尝试停止的对象与当前正在播放的对象不同。

使它们成为类字段，在调用它们的方法之前检查它们是否不为空，如果您试图停止当前播放的对象，请不要创建新对象，您应该没问题。

就像是：

```
public void playSound(int i) {
  try {
     // ...
     if (i == 3 || i == 4) {
        if (i == 3) {
           audioInputStream = AudioSystem
                 .getAudioInputStream(new File("Background.wav"));
           clip3 = AudioSystem.getClip();
           clip3.open(audioInputStream);
           clip3.loop(Clip.LOOP_CONTINUOUSLY);
           clip3.start();
           settingSubMenuItem3.setEnabled(false);
           settingSubMenuItem4.setEnabled(true);
        }
        if (i == 4) {
           if (clip3 != null && clip3.isActive()) {
              clip3.stop();
              settingSubMenuItem3.setEnabled(true);
              settingSubMenuItem4.setEnabled(false);
           }
        }
     }
  } catch (Exception e) {
     System.out.println("Error with playing sound.");
     e.printStackTrace();
  }
} 
```

再次，制作 audioInputStream 和 clip3 非静态类字段。

顺便说一句，我会避免像你正在做的那样使用诸如 3 和 4 之类的“魔术”数字，因为这可能会在 6 个月后成为调试的恶魔。而是给每个 JButton 自己的动作。它不应该少。

# php - php数学函数结果错误输出

> ID：10666829
> 
> 赞同：0
> 
> 时间：2012-05-19T16:09:15.623
> 
> 标签：php, session, math

我从 yahoo Finance 中获取了白银的价值，并将当前价值增加了​​ 0.10 .. 它显示了正确的结果..

```
$yql_base_url = "http://query.yahooapis.com/v1/public/yql?";

$params = array(
    'q'      => 'select * from html where url=@url and xpath=@xpath;',
    'url'    => 'http://finance.yahoo.com/q?s=XAGUSD%3DX&ql=1',
    'xpath'  => '//*[@id="yfs_g00_xagusd=x"]',
    'env'    => 'http://datatables.org/alltables.env',
    'format' => 'json',
);

$yql_query_url = $yql_base_url . http_build_query($params);

$session = curl_init($yql_query_url);
curl_setopt($session, CURLOPT_RETURNTRANSFER, true);
$json   = curl_exec($session);
$phpObj = json_decode($json);

if ($phpObj->query->count > 0) {
    $price = $phpObj->query->results->span->content;
}
?>
<div>  <?php echo $price; ?> which is current value </div>
<div><?php echo $price + .10; ?> where 0.10 is added</div> 
```

**[点击此处运行代码](http://codepad.viper-7.com/gyayWd)**

但是当我尝试黄金价格时，结果显示错误的输出，即 1 或 2

```
$yql_base_url = "http://query.yahooapis.com/v1/public/yql?";

$params = array(
    'q'      => 'select * from html where url=@url and xpath=@xpath;',
    'url'    => 'http://finance.yahoo.com/q?s=XAUUSD%3DX&ql=1',
    'xpath'  => '//*[@id="yfs_g00_xauusd=x"]',
    'env'    => 'http://datatables.org/alltables.env',
    'format' => 'json',
);

$yql_query_url = $yql_base_url . http_build_query($params);

$session = curl_init($yql_query_url);
curl_setopt($session, CURLOPT_RETURNTRANSFER, true);
$json   = curl_exec($session);
$phpObj = json_decode($json);

if ($phpObj->query->count > 0) {
    $price = $phpObj->query->results->span->content;
}
?>
<div> <?php echo $price; ?> which is current value</div>
<div> <?php echo $price + .10; ?> where 0.10 is added</div> 
```

**[点击此处运行代码](http://codepad.viper-7.com/6XyP65)**

任何人都可以在这件事上帮助我..任何建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T16:16:04.080

我现在无法执行 PHP 代码，但我认为这是您的数字格式的问题。

数为`1,597.2800`。逗号`,`不是有效字符，因此 1,597.2800 被转换为 1。然后，如果您有 0.1，则结果为 1.1。

由于您的号码首先被视为字符串，因此您应该在执行任何操作之前删除逗号。一个简单的`str_replace(',', '', $price);`应该工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T16:18:07.817

白银的价值是`28.7100`——它可以转换为一个浮点数——这就是为什么添加`0.10`它起作用的原因。

另一方面，您获得的黄金价值是`1,597.2800`——它不能转换为数字**（注意`','`）** ——这就是为什么添加`0.10`它不起作用的原因。

您必须通过删除该字符串将该字符串转换为可以转换为浮点数的字符串`','`；这可以通过以下方式完成[`str_replace()`](http://fr2.php.net/str_replace)：

```
$str = '1,597.2800';
$str = str_replace(',', '', $str); 
```

然后，添加`0.10`它成为可能：

```
var_dump($str + 0.10); 
```

会给 ：

```
float 1597.38 
```

之后，您当然可以重新格式化新的计算值。 为了做到这一点，
您通常需要使用该功能。[**`number_format()`**](http://fr.php.net/number_format)

例如，您可以使用如下内容：

```
$str = '1,597.2800';
$str = str_replace(',', '', $str);
$price = $str + 0.10;
echo number_format($price, 2); 
```

你会得到以下输出：

```
1,597.38 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T16:24:29.540

问题是`1,597`. PHP 不会将该字符串作为数字。它停在逗号处。

删除逗号并将字符串转换为数字。

`<?php echo floatval(str_replace(',','',$price)) + .10; ?>`

如果您愿意，您可以不进行显式数字转换，因为会`+`强制进行隐式转换：

`<?php echo str_replace(',','',$price) + .10; ?>`

用来`number_format()`把逗号放回去。`,2`指定小数位数：您可能需要 4 。

`<?php echo number_format(floatval(str_replace(',','',$price)) + .10,2); ?>`

# javascript - 动画 JQueryUI ProgressBar 值更改

> ID：10666831
> 
> 赞同：1
> 
> 时间：2012-05-19T16:09:27.173
> 
> 标签：javascript, jquery, jquery-ui, progress

我有一个 jqueryui 进度条，我正在使用一些 ajax 更新它的值。但是，由于值变化的差异，它有点生涩。有没有办法为变化设置动画，使其从 A 值滑到 B 值，而不是从 A 值跳到 B 值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T16:13:41.587

我不知道是否有内置的方法来做到这一点（从未接触过 jquery-ui），但如果没有，我会建议这样：

```
(pseudocode)
When you get a new value...

setTimeout(function() {
    my_plugin.value += 1;
    val--;

    if(val < 1) my_plugin.value = val; // in case val is float.
    else setTimeout(arguments.callee, delay);
}, delay); 
```

其中 val = 您从 ajax 请求中收到的值。

# jquery - 拖动多个id时无法获取所有id

> ID：10666832
> 
> 赞同：1
> 
> 时间：2012-05-19T16:09:29.670
> 
> 标签：jquery, jquery-ui, jquery-ui-draggable

当我拖放到某个 div 时，我想获得多个拖动的 id。

`$(ui.draggable).attr('id');`仅获得第一个 ID。

不工作：

```
var m_ids = [];
$.each($(ui.draggable), function(i,e) {
    m_ids.push(e.id);  // not getting multiple ids
    alert(m_ids);
}); 
```

拖

```
<ul id="demo" > 
     <li id="1" ></li>
     <li id="2" ></li>
     <li id="3" ></li>
</ul>

<div class="drop"> drop here!! </div> 
```

查询

```
$(".drop").droppable({ 
    drop: function(event, ui) {
        var m_id = $(ui.draggable).attr('id');// only gets 1st id
        var m_ids = [];
        $.each($(ui.draggable), function(i,e) {
             m_ids.push(e.id);  // not getting multiple ids
             alert(m_ids);
        });
    }       
}); 
```

请帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T16:13:30.383

你试过了吗：

```
var m_ids = [];

$.each($(ui.draggable), function(i,e) {
   m_ids.push(e.id);  // getting all id's of matched elements in $(ui.draggable) selector
});

console.log(m_ids); 
```

如果只有一个元素，`$(ui.draggable)`可能只包含一个元素，而其他元素可能是子元素，请使用 . 检查控制台`console.log($(ui.draggable))`。

# matlab - Matlab防止在循环中的图之间调整轴大小

> ID：10666835
> 
> 赞同：0
> 
> 时间：2012-05-19T16:09:58.480
> 
> 标签：matlab, octave

好的，所以我有一个绘图循环，可以绘制一个扩展和收缩的对象。每一帧的数据都在一个巨大的矩阵中。

我找到了对象的 x、y、z 坐标的每一帧的最小值和最大值。所以我得到了物体扩展范围的限制平面。

绘图循环有几个绘图命令。循环的第一行是 clf：

```
for frame = 1:N    %N is the number of frames
  clf;
  hold on;
  axis([minX maxX minY maxY minZ maxZ]);
  % Plotting commands...(skipped here)
  drawnow;
end 
```

轴周期性变化。它们不会在连续帧之间发生变化，但会在第 300 帧时发生变化，然后会在第 700 帧时变回并再次执行此操作。

我已经检查了 get(gcf, 'CurrentAxes') 并且值不同。不知道为什么。轴限制是恒定的。

编辑：对于某些数据集，这不会发生，但有些轴会按照所述定期更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T17:06:09.807

尝试将`axis`命令放在绘图命令之后。

# ruby-on-rails - 如何在 Gem Bundler 中指定小于版本

> ID：10666838
> 
> 赞同：0
> 
> 时间：2012-05-19T16:10:33.130
> 
> 标签：ruby-on-rails, bundler

我正在尝试指定 factory_girl_rails 版本小于 3.0，因为我没有安装 ruby​​ 1.9 并且 3.0 与 1.8.x 不兼容。我已经尝试了几种方法，但它总是尝试安装 3.0.0 并且在 ruby​​ 依赖项上失败。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T16:28:35.890

[据此](http://guides.rubyonrails.org/3_0_release_notes.html#rails-3-requires-at-least-ruby-1-8-7)，Rails 3.0 应该仍然与 Ruby 1.8.7 兼容（他们直到 4.0 才放弃对 Ruby 1.8 的支持）。

但是，如果你把它放在你的 Gemfile 中，bundler 应该使用 Rails 的最新 2.3 版本（3.0 之前的最后一个小版本）：

```
gem 'rails', '~>2.3' 
```

# c - struct 中的结构数组

> ID：10666839
> 
> 赞同：0
> 
> 时间：2012-05-19T16:10:36.143
> 
> 标签：c, arrays, struct

```
#include <stdio.h>
#include <stdlib.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <arpa/inet.h>

typedef struct user {
    char *username;
    struct sockaddr_in addr;
} user;

user* users;

typedef struct room
{
  char *roomname;
  user* users;
} room;

room* rooms;

int addToUsersArray(char *username) {
    int i = 0;

    for(; i<10; i++) {
            if(users[i].username=='\0') {
                    users[i].username = username;
                return 1;
            } else if(strcmp(users[i].username, username) == 0)
                return -1;
    }
    return -1;
}

void initUsersArray() {  
    users = (user*) calloc(10, sizeof(user)); 
}

void initRoomsArray() {  
rooms = (room*) calloc(10, sizeof(room));
    int i =0;   
    for(;i<10;i++)      
         rooms[i].users = (user*) calloc(10,sizeof(user));  
}

int addToRoomsArray(char *roomname) {
    int i = 0;

    for(; i<10; i++) {
            if(rooms[i].roomname=='\0') {
                    rooms[i].roomname = roomname;
                return 1;
            } else if(strcmp(rooms[i].roomname, roomname) == 0)
                return -1;
    }
    return -1;
}

int addUserToRoom(char *roomname, user usr) {
    int i = 0;
    int k = 0;

    for(; i<10; i++) {
            if(rooms[i].roomname=='\0') {
                    rooms[i].roomname = roomname;
                    return 1;
            } else if(strcmp(rooms[i].roomname, roomname) == 0) {
            for(;k<10;k++) {
                if(rooms[i].users[k].username==NULL) { //This line makes trouble
                    rooms[i].users[k] = usr;
                }
            }
        }

    }
    return -1;
}

int main(int argc, char** argv) {
    initUsersArray();  
    initRoomsArray();      
    char *username = "Max";
    addToUsersArray(username);
    username = "Ma1x";
    addToUsersArray(username);
    printf("%s\n",users[0].username);
    printf("%s\n",users[1].username);

struct sockaddr_in addr;
    addr.sin_family = AF_INET;
    addr.sin_port = htons(4444);
    addr.sin_addr.s_addr = inet_addr("127.0.0.1");  

char *room = "sportchat";
addToRoomsArray(room);
room = "berlinchat";
addToRoomsArray(room);

    printf("%s\n",rooms[0].roomname);
    printf("%s\n",rooms[1].roomname);

user michi;
michi.username = "michi";
michi.addr = addr;

struct sockaddr_in addr2;
    addr2.sin_family = AF_INET;
    addr2.sin_port = htons(1234);
    addr2.sin_addr.s_addr = inet_addr("127.0.1.1");

user willi;
willi.username = "willi";
willi.addr = addr2;

addUserToRoom(room,michi);
addUserToRoom(room,willi);

    return 1;
} 
```

运行 addUserToRoom(room,michi) 时出现分段错误。我仍然有点不确定使用结构。注释掉`rooms[i].users[k] = usr;`分段错误时消失。我在 unix 系统上使用 gcc。gcc 是否分析带有空块的 if 表达式？

**编辑** 我如何实现可变数量的用户和房间？我想我必须使用 realloc。但是怎么做？问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T16:21:22.357

你永远不会分配内存，也不会初始化

```
room.users 
```

因此，当您尝试访问 rooms[i].users[k] 时，您会遇到分段错误。

作为旁注：永远不要使用全局变量，否则您会做愚蠢的事情（当您使用与结构成员同名的全局变量时更是如此）。此外，始终在 for 循环的第一部分初始化您的迭代变量。（你知道人们死于少于那个吗？：P）

这是您的主要功能的示例：

```
int main() {
    room* rooms;
    user* users;

    initUsersArray(users);
    initRoomsArray(rooms);

    char *username = "Max";
    addToUsersArray(users,username);
    username = "Ma1x";
    addToUsersArray(users,username);
    printf("%s\n",users[0].username);
    printf("%s\n",users[1].username);

    struct sockaddr_in addr;
    addr.sin_family = AF_INET;
    addr.sin_port = htons(4444);
    addr.sin_addr.s_addr = inet_addr("127.0.0.1");

    char *room = "sportchat";
    addToRoomsArray(rooms,room);

    /* ... */

    return 1;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T16:25:25.690

该代码有几个问题。要回答这个问题，您还没有分配`rooms[i].users`数组。

# c# - 如何验证 Azure 负载均衡器？

> ID：10666846
> 
> 赞同：5
> 
> 时间：2012-05-19T16:11:13.843
> 
> 标签：c#, asp.net, azure, load-balancing

我希望能够配置 Azure 负载均衡器模拟器，这样对 Web 应用程序的两次连续调用将始终导致对不同实例的调用。

我怎么能做到这一点？如何验证负载均衡器是否按预期工作？使用 HttpContext.Current.Request.Url 并查看端点端口是否更改？

提前致谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-19T17:03:18.997

可用于您的 Windows Azure Web 和 Worker 角色的默认负载均衡器是软件负载均衡器，并没有太多可配置性，但它们可以在循环设置中工作。如果您想测试此行为，您需要执行以下操作：

1.  创建启用 RDP 访问的服务的两个（或更多）实例，以便您可以 RDP 到这两个实例
2.  RDP 到您的两个实例并在其中运行 NETMON 或任何网络监视器解决方案。
3.  现在从您的桌面访问您的 Windows Azure Web 应用程序
4.  您需要了解，当从您的桌面建立网络连接时，根据网络设置（默认 60 秒），连接仍然有效，因此您需要等到通过默认超时才能再次访问您的 Windows Azure Web 应用程序。
5.  当您将再次访问您的 Windows Azure Web 应用程序时，您可以验证请求到达下一个实例的时间。请务必通过连接超时，否则您的请求将由同一实例处理。

注意：如果您不想使用 RDP，您当然也可以创建一个测试 ASP.NET 页面来根据您的特定实例编写一些特殊代码，这将显示该页面特定于某个实例。最好的方法是读取实例 ID，如下所示：

```
int instanceID = RoleEnvironment.CurrentRoleInstance.Id; 
```

如果您想更好地控制 Windows Azure 负载平衡，我建议您使用 Windows Azure 流量管理器，它可以帮助您通过循环、性能或基于备份的方案将流量路由到您的站点。更多关于使用 Traffis Manager 的信息在这篇[文章中](https://azure.microsoft.com/en-us/documentation/articles/traffic-manager-overview/)。

# git - 如何重命名在其子目录中包含子模块的 git repo（项目）

> ID：10666847
> 
> 赞同：19
> 
> 时间：2012-05-19T16:11:18.267
> 
> 标签：git, git-submodules

我从没想过重命名 git repo，更具体地说，它是包含项目的顶级文件夹，会如此困难。是的，该项目包含一些子模块，但它是需要重命名的**顶级文件夹，而不是****子模块文件夹**。Git 似乎在其子模块机制中记录了一些奇怪的*绝对路径。*

让我们假设

1.  您的所有项目都位于`/tmp`.
2.  你有一个`proj_master`和`proj_mod`。
3.  您克隆`porj_master`为`proj_ALL`然后克隆`prom_mod`为其中的子模块。
4.  你重命名`proj_ALL`为`proj_onebillion`. 然后黑魔法发生了。

以下步骤将重现我提到的问题。我使用的 git 版本是：

```
$ git --version
git version 1.7.9.5 
```

* * *

1.  初始化`proj_master`.

    ```
    $ cd /tmp
    $ mkdir proj_master; cd proj_master
    $ git init .
    $ touch README
    $ git add .; git commit -m "hello proj_master" 
    ```

2.  初始化`proj_mod`.

    ```
    $ cd /tmp
    $ mkdir proj_mod; cd proj_mod
    $ git init .
    $ touch README
    $ git add .; git commit -m "hello proj_mod" 
    ```

3.  克隆`proj_master`为`proj_ALL`和克隆`proj_mod`为子模块。

    ```
    $ cd /tmp
    $ git clone proj_master proj_ALL
    $ cd proj_ALL
    $ git submodule add /tmp/proj_mod ./mod
    $ git add .; git commit -m "hello proj_ALL"
    $ git status   % Everything is OK. 
    ```

4.  重命名`proj_ALL`为`proj_onebillion`. 遇到致命错误。

    ```
    $ cd /tmp
    $ mv proj_ALL proj_onebillion
    $ cd proj_onebillion
    $ git status
    fatal: Not a git repository: /tmp/proj_ALL/.git/modules/mod 
    ```

* * *

需要注意的一件事是`.git`子模块目录中的文件。

```
$ cat /tmp/proj_ALL/mod/.git 
gitdir: /tmp/proj_ALL/.git/modules/mod 
```

是的，绝对路径。我第一次意识到 git 知道顶级 repo 文件夹范围之外的东西。

而已。我再重复一次，我重命名顶级项目文件夹，而不是子模块文件夹。我检查了[schmuck 的问题](https://stackoverflow.com/questions/9878860/how-can-i-rename-a-git-repository-with-submodules)，它试图重命名子模块文件夹，因此似乎对我的问题没有太大帮助。

如果我错过了以前应该阅读的内容，我深表歉意。对所有人来说，欢迎任何建议。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-19T17:00:32.337

你有几个选择，它们最终是一样的：

**再次克隆**

而不是重命名文件夹 - 只需再次克隆

```
$ cd /project/original
$ cd ..
$ mkdir moved
$ git init
$ git pull ../original master
$ git submodule init
$ git submodule update 
```

比较`original/.git/config`并`moved/.git/config`解决任何显着差异（[缺少的分支需要创建](https://stackoverflow.com/a/4754797/761202)- 缺少的遥控器只需要添加到配置文件中）。

**修复路径**

您可以重命名您的项目文件夹，它只需要稍作调整。

*   修复您的子模块 .git 文件引用。

即这些文件：

```
$ cd /project/moved
$ find -name .git -type f 
```

您需要做的就是编辑它们以指向正确的目录

*   修复您的子模块 .git 配置文件

即这些文件：

```
$ cd /project/moved
$ find .git/modules/ -name config 
```

在这里，更新`worktree`设置：

```
[core]
    ...
    worktree = /original/path/submodule 
```

至

```
[core]
    ...
    worktree = /moved/path/submodule 
```

就是这样。

**关于版本的说明**

1.7.8 引入了对子模块使用 .git 文件并[使用绝对路径](http://comments.gmane.org/gmane.comp.version-control.git/193492)，这在 1.7.10 中已修复 - 因此问题仅适用于使用 git 版本 1.7.8 和 1.7.9 创建的 git repos。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-07-02T16:18:34.230

将具有 git 子模块的项目从一个文件夹移动到另一个文件夹时，在同一台机器上，有一些硬编码的链接需要更新。

首先，所有子模块都有一个 .git 文件，它们在其中存储 git 配置文件夹的绝对路径（这些位于主项目的 .git 文件夹中，分组到模块文件夹中）。要修复所有这些问题，请从主项目的根目录运行以下命令：

```
find . -name .git -print0 -type f | xargs -0 sed -i 's|<OLD PATH>|<NEW PATH>|g' 
```

其次，git 子模块的配置文件有一行保存工作目录，也是绝对的。要一次更新所有引用，请从主项目的根目录运行以下命令：

```
find . -name config -print0 -type f | xargs -0 sed -i 's|<OLD PATH>|<NEW PATH>|g' 
```

所做的假设是您的操作系统是某种形式的 *nix，并且您已经安装了包 sed。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-15T04:29:20.163

您还需要检查每个子模块的`gitdir`.

它应该在子模块的文件夹`.git`文件中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-06T14:38:00.060

您需要实际修改两个文件

```
.git/modules/<path-to-submodule>/config
<path-to-submodule>/.git 
```

# php - 使用 PHP cURL 在开源应用程序上安装 ssl

> ID：10666848
> 
> 赞同：1
> 
> 时间：2012-05-19T16:11:20.823
> 
> 标签：php, security, ssl, curl

我正在开发一个开源 PHP 应用程序。该应用程序可能需要连接到我的服务器，以传输敏感数据。我在我的服务器上安装了 SSL，我认为我已经正确设置了它，但我希望这里有人可以确认。

该应用程序将在其他用户服务器上使用，因此它将是服务器到服务器的通信。

连接到我的服务器时，我会将用户服务器视为客户端。我的服务器永远不会连接到他们的服务器，所以他们不需要 SSL（对吗？）。

我在连接期间使用 cURL 进行调用（对我的服务器）和 POST 数据。所以我卷曲到一个`https`地址。

现在我想就是这样。一旦我 cURL 一个`https`地址，一切都是安全的。我可以安全地发送我喜欢的任何内容（信用卡号、密码等），而无需担心中间人。故事结局。

但是在阅读之后，我注意到有些人在他们的 cURL 会话中做其他事情——比如包括一个证书（.crt 文件）：

```
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, true);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);
curl_setopt($ch, CURLOPT_CAINFO, getcwd() . "/CAcerts/BuiltinObjectToken-EquifaxSecureCA.crt"); 
```

这对开源安全吗？我也应该这样做吗？或者我对我所拥有的东西安全吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T16:33:34.263

根据您安装 cURL 的系统，它可能有也可能没有足够的信息来验证 SSL 证书（这可以通过将中间证书和根证书链接到您的网站证书来改进）。你也可以在这里阅读：[http ://curl.haxx.se/docs/sslcerts.html](http://curl.haxx.se/docs/sslcerts.html)

有时明确地发布一个包是有意义的，特别是因为 cURL 往往会与旧的证书包一起发布。您可以在此处下载更新的版本（取自 Firefox 源代码）：[http ://curl.haxx.se/docs/caextract.html](http://curl.haxx.se/docs/caextract.html)

如果您的软件将专门与您自己的服务器通信，您还可以发布一个仅包含您自己的公共证书的捆绑包。这将允许您使用免费的自签名证书:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T16:24:41.973

如果另一端的服务器专门为您提供了客户端证书并且不接受来自拥有这些客户端证书的客户端以外的其他客户端的任何连接，则您将客户端证书附加到 CURL 调用中。

如果你在这里谈论一个网站，你甚至不需要在这里担心。

但是，如果您谈论的是您为任何安全资源访问的一些服务提供商，并且如果他们要求您提供客户端证书，他们会为您颁发它们并明确告诉您使用它们。

例如，我们有一个只有私人成员才能访问的系统。我们有一个 RPC 端点，其他成员向该端点发送请求。而且由于我们只允许访问我们的成员（私人而不是像网站那样公开），我们向他们颁发客户端证书并明确指示他们将这些证书与他们的服务调用一起附加。

# windows-server-2008 - Win server 2008 上 3GB 文件的 gawk 错误

> ID：10666854
> 
> 赞同：1
> 
> 时间：2012-05-19T16:12:01.137
> 
> 标签：windows-server-2008, gawk

**背景**：我正在尝试将 3GB csv 文本文件（20M 行 x 46 col）加载到 SQLite 表中。数据导入失败并出现错误：“当表需要 46 个值时，记录 3,493,675 只有 2 个字段”。我想知道该记录是否只有 2 个字段（已损坏）或其他地方是否有问题（我的怀疑）。

所以我尝试使用 gawk 查看“违规”记录：

**gawk -F, "NF<46 {打印 FNR,$1,NF}"**

但收到一条错误消息（在运行 Windows 2008 的服务器上，具有 8 个 procs，16GB RAM | 我没有管理员权限）：

**“grow_top_buffer: iop->buf: 无法分配 1,073,741,826 字节的内存（空间不足）”。**

我用谷歌搜索了这个错误，看到了一些 2003 年关于错误的帖子，但没有得到解决方案。

**所以，问题来了**：我的 4GB RAM Win 7 笔记本电脑上有相同的数据文件，并且相同版本的 gawk 工作正常——它读取整个 20M 记录……并且文件中的所有 20M 记录都有表所需的 46 个字段。

我尝试了几种不同的 gawk 语句，但在服务器上都失败了——都在我的电脑上工作。

问题：为什么在Win服务器上使用gawk缓冲内存错误？

谢谢，彼得

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T16:25:06.597

如果服务器计算机运行 32 位版本的 Windows，而您的 PC 运行 64 位版本的 Windows，gawk 可能能够在您的 PC 上分配比服务器上更多的（虚拟）内存。这是因为它可能无法处理服务器上的内存量。

关于您的问题， awk 不应该需要大量内存来以您想要的方式处理文件。在我看来，这就像一个笨拙的错误。尝试其他版本的 awk，例如 Kernighan 的[One True awk](http://www.cs.princeton.edu/~bwk/btl.mirror/)

# jquery - Jquery在dom中找到具有相同类的prev元素

> ID：10666863
> 
> 赞同：2
> 
> 时间：2012-05-19T16:12:30.550
> 
> 标签：jquery, dom-traversal

关于优秀 jQuery 的另一个问题

当我单击具有相同类的元素时，我想找到一个类说 abc 的 dom 元素。现在搜索应该正好是前一个元素。

我写的代码：

```
$(this)
    .closest('.abc')
    .parent()
    .prevAll()
    .find('.abc')
    .first()
    .triggerHandler("focus"); 
```

这是搜索父级以前的dom并搜索abc，但是如果以前的dom中不存在类'abc'，我想搜索直到找到abc，也尝试使用jquery的prevuntil仍然没有运气。

如果有人可以帮助我，非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-19T16:25:57.503

您可以使用它来获取上一个元素：

```
var $current = $(this); //the element you have
var $elems = $('.abc'); //the collection of elements

var $previous = $elems.eq($elems.index($current) - 1); //the one you needed 
```

*   [jsFiddle 演示](http://jsfiddle.net/pg7RL/1/)
*   [`.index()`](http://api.jquery.com/index/)

我不会说这是最有效的代码，但在不了解 DOM 树的情况下，这是我能想到的最好的代码。如果您仅`$('.abc')`在 DOM 可能已更改时重新运行并且仅使用缓存版本 ( `$elems`) 应该没问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T16:18:40.787

这是一种快速而肮脏的方法：

```
$('.abc').click(function(){
    var clicked = this;
    var last;
    // Go though all elements with class 'abc'
    $('.abc').each(function(){
        if(this == clicked) return false;
        last = this;
    });
    if(last) $(last).triggerHandler("focus");
}); 
```

# android - 画布上的动画

> ID：10666865
> 
> 赞同：0
> 
> 时间：2012-05-19T16:13:16.110
> 
> 标签：android, canvas

我正在开发在画布上绘制图像的应用程序，现在我想在该画布上绘制第二个图像。例如看图片...... ![在此处输入图像描述](../Images/c1986f182a9d12acfee006a972b29688.png)

第一个图像如下所示....当我点击某个地方时，它会显示如下，但是图像中显示的另一件事（胸腺嘧啶）它应该在画布中显示为淡入淡出 ![在此处输入图像描述](../Images/98899e2b6a498afdea9555df3de7624d.png) 我是怎么做没有得到任何东西任何人都可以帮助我.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T16:59:54.743

要绘制位图，您可以使用[Canvas](http://developer.android.com/reference/android/graphics/Canvas.html)类的 canvasObject.drawBitmap() 方法。drawBitmap 将绘画对象作为其参数之一，您可以通过编程方式改变绘画对象的 alpha 值以创建淡入效果。[Paint](http://developer.android.com/reference/android/graphics/Paint.html)类有一个 setAlpha(value) 方法来执行此操作。我自己没有尝试过，但这应该可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T16:23:01.990

这听起来很复杂，尽管并非不可能实现。我认为实现这一点需要的不仅仅是标准的[View](http://developer.android.com/reference/android/view/View.html)类，更像是您需要使用[SurfaceView](http://developer.android.com/reference/android/view/SurfaceView.html)类，您可以更好地控制绘制的内容以及何时何地绘制。如果您不熟悉 Android 2D 图形，那么[这里](http://developer.android.com/guide/topics/graphics/index.html)是一个不错的起点。

# python - 龙卷风和基于 Python 的守护进程之间的最佳通信方式是什么？

> ID：10666877
> 
> 赞同：1
> 
> 时间：2012-05-19T16:15:02.600
> 
> 标签：python, sockets, tornado

我使用 Tornado 作为 Web 服务器。我用 Python 编写了一些守护进程，它们在服务器硬件中运行。有时，Web 服务器需要向守护进程发送一些数据并接收一些计算结果。有两种工作方式： 1\. 异步模式：服务器向守护进程发送一些数据，很快就不需要结果。我可以使用消息队列完美地做到这一点吗？2\. 同步模式：服务器向守护进程发送数据，等待得到结果。我应该使用套接字吗？

那么，tornado 和基于 Python 的守护进程之间的最佳通信方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T16:49:09.040

[ZeroMQ](http://www.zeromq.org/)可用于此目的。它具有用于不同目的的各种套接字，并且速度足够快，永远不会成为您的瓶颈。对于异步，您可以使用 DEALER/ROUTER 套接字，对于严格同步模式，您可以使用 REQ/REP 套接字。

您可以为此使用 python 绑定 --> [http://www.zeromq.org/bindings:python](http://www.zeromq.org/bindings:python)。

对于异步模式，您可以从[zguide 第 3 章路由器到经销商异步路由](http://zguide.zeromq.org/py:chapter3#Router-to-Dealer-Routing)中尝试类似的操作：

在您的情况下，图中的“客户端”将是您的 Web 服务器，而您的守护进程将是“工作者”。

![zguide 路由器经销商异步路由](../Images/95c4d7111aca551745ec37cd2c6788d8.png)

* * *

对于同步，您可以尝试一个[简单的请求-回复代理](http://zguide.zeromq.org/py:chapter2#A-Request-Reply-Broker)或一些变体来满足您的需要。

![一个简单的请求-回复-代理](../Images/b5d7cb305a9f53ba0cb208c04c39530e.png)

上图显示了在 REQ/REP 套接字上发送/接收的严格同步循环。通读 zguide 链接以了解其工作原理。他们在页面上还有一个 python 代码片段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T18:13:30.740

根据规模 - 简单的事情就是在 Tornado 中使用 HTTP 和 AsyncHTTPClient。对于我们应用程序中的请求<->响应情况，我们将使用这种方法达到 300 个连接/秒。

对于第一种情况 Fire and forget，您也可以使用 AsyncHTTP 并让服务器关闭连接并继续工作......

# google-maps - 同一方向的两条路线？

> ID：10666879
> 
> 赞同：0
> 
> 时间：2012-05-19T16:15:15.963
> 
> 标签：google-maps, routes, angle

我有以下路线：

![在此处输入图像描述](../Images/da058454aea1e1a5fa7c48760e36f944.png)

红色是从 A 到 B，蓝色是从 A' 到 B'，绿色是从 A'' 到 B''。我有 A、B、A'、B'、A'' 和 B'' 的纬度/经度（我正在使用 Google Maps API），我想知道是否有算法来确定两条路线是否有同一方向。

例如，图中红色和蓝色路线的方向相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T16:40:51.790

从 A 中找到 B 的方位。[可动式的页面](http://www.movable-type.co.uk/scripts/latlong.html)是标准参考。

但是，您也可以在 Google Maps API v3 中使用[几何库：](https://developers.google.com/maps/documentation/javascript/geometry)

```
var a = new google.maps.LatLng(...);
var b = new google.maps.LatLng(...);
var bearing = google.maps.geometry.spherical.computeHeading(a,b) 
```

# java - 类中的枚举助手（java）

> ID：10666881
> 
> 赞同：1
> 
> 时间：2012-05-19T16:15:34.123
> 
> 标签：java, enums

如果我在 Java 类中有一个 Enum 作为助手，有没有办法在它所帮助的类之外引用该 Enum？

基本上，我所拥有的是：

```
class Account extends MyClass {
    HashMap<Property, String> property = new HashMap<Property, String>();
    public Account() {
    }

    public enum Property {
        USERID,
        PASSWORD;
    }
} 
```

我希望能够在 Account 类之外访问 Property 枚举。我想这样做的原因是因为这是另一个的子类，并且我希望能够在不引用唯一枚举名称的情况下访问给定子类的属性（即：不将每个子类称为，比如说， AccountProperty 或 ResearchProperty 或 TaskProperty... 等）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T16:17:19.720

您的枚举是公开的，因此您可以使用`Account.Property`它从`Account`课堂外访问它

编辑 ：

如果我得到了你需要的东西，你想做类似的事情

```
Property p = Account.Property.PASSWORD;
Property p1 = Product.Property.CODE; 
```

产品在哪里

```
public class Product extends MyClass{
    HashMap<Account.Property, String> property = new HashMap<>();
    public Product() {
    }

    public static enum Property {
        CODE,
        PRICE;
    }
} 
```

你想在你的`MyClass`.

问题是这两行都需要导入，你不能导入两个同名的类，所以唯一的解决方案是做这样的事情

```
Account.Property p = Account.Property.PASSWORD;
Product.Property p1 = Product.Property.CODE; 
```

我想你必须处理为每个类`instanceof`使用正确的`Property`枚举，因为没有办法扩展枚举！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T17:18:25.350

可能类似于以下内容（但这没有类型检查）：

```
import java.util.*;
abstract class MyClass {
    Map<Object,String> properties=new HashMap<Object,String>();
}
class Account extends MyClass {
    enum Property {
        userid,password
    }
    //static Set<Property> keys=EnumSet.allOf(Property.class);
}
class Research extends MyClass {
    enum Property {
        red,green;
    }
    static Set<Property> keys=EnumSet.allOf(Property.class);
}
public class So10666881 {
    public static void main(String[] args) {
        Account account=new Account();
        account.properties.put(Account.Property.userid,"user");
        account.properties.put(Account.Property.password,"pass");
        for(Account.Property property:Account.Property.values())
            System.out.println(property+"="+account.properties.get(property));
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T16:16:32.047

只需将枚举声明为公共顶级枚举类（在其自己的文件中）

# pycassa - pycassaShell 键绑定箭头不起作用 ^[[A

> ID：10666883
> 
> 赞同：0
> 
> 时间：2012-05-19T16:16:17.390
> 
> 标签：pycassa

在 pycassaShell 中，如果我按箭头键移动光标，我会看到 ^[[A 到 ^[[D 字符附加，普通的 python 控制台解释器不会发生这种情况

注意：

Python 2.6.5, / Ubuntu 10.04 pycassa 刚刚使用[http://pycassa.github.com/pycassa/installation.html](http://pycassa.github.com/pycassa/installation.html)安装 并首先运行[http://python-distribute.org/distribute_setup.py](http://python-distribute.org/distribute_setup.py)，没有它，它抱怨

运行 pucassaShell 时出现此警告：
[I]: IPython not found, fall back to default interpreter。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T17:12:57.440

[http://pycassa.github.com/pycassa/assorted/pycassa_shell.html](http://pycassa.github.com/pycassa/assorted/pycassa_shell.html)

# ios - IOS AVPlayer获取fps

> ID：10666884
> 
> 赞同：6
> 
> 时间：2012-05-19T16:16:28.757
> 
> 标签：ios, avplayer, frame-rate

我试图弄清楚如何通过 AVPlayer 检索视频帧速率。AVPlayerItem 有一个 rate 变量，但它只返回一个介于 0 和 2 之间的值（播放时通常为 1）。有人知道如何获得视频帧速率吗？

干杯

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-20T06:04:19.607

使用`AVAssetTrack's` `nominalFrameRate` `property`.

下面的方法得到`FrameRate`：这里`queuePlayer`是`AVPlayer`

```
-(float)getFrameRateFromAVPlayer
{
  float fps=0.00;
  if (self.queuePlayer.currentItem.asset) {
    AVAssetTrack * videoATrack = [[videoAsset tracksWithMediaType:AVMediaTypeVideo] lastObject];
    if(videoATrack)
    {
        fps = videoATrack.nominalFrameRate;
    }
  }
  return fps;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-09-24T05:48:53.967

Swift 4 版本的答案：

```
let asset = avplayer.currentItem.asset

let tracks = asset.tracks(withMediaType: .video)

let fps = tracks?.first?.nominalFrameRate 
```

请记住处理 nil 检查。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-02-23T00:08:58.690

对于在不同版本的 iOS 上播放的相同媒体，返回的这个nominalFrameRate 似乎存在差异。我有一个用 ffmpeg 以每秒 1 帧（125 帧）编码的视频，每 25 帧有一个关键帧，在 iOS 7.x 上的应用程序中加载时（标称）帧速率为 1.0，而在 iOS 8.x 上（标称）帧速率为 0.99。这似乎是一个非常小的差异，但是在我的情况下，我需要精确地导航到电影中的给定帧，而这种差异会破坏这种导航（电影是一系列演示幻灯片的编码）。鉴于我已经知道我的应用需要播放的视频的帧速率（例如 1 fps），我可以简单地依赖这个值而不是动态确定帧速率（通过nominalFrameRate 值），但是我想知道为什么 iOS 版本之间存在如此的差异，就这个nominalFrameRate 而言。有任何想法吗？

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-06-14T16:38:40.000

AVPlayer 上的速率值是相对于它正在播放的实时的速度，例如 0.5 是慢动作，2 是双倍速度。

正如 Paresh Navadiya 指出的那样，轨道也有一个nominalFrameRate 变量，但这似乎有时会产生奇怪的结果。到目前为止，我发现的最佳解决方案是使用以下内容：

```
CMTime frameDuration = [myAsset tracksWithMediaType:AVMediaTypeVideo][0].minFrameDuration;
float fps = frameDuration.timescale/(float)frameDuration.value; 
```

上面给出了可变帧速率的稍微出乎意料的结果，但可变帧速率无论如何都有一些奇怪的行为。除此之外，它在我的测试中与 ffmpeg -i 匹配。

编辑 - -

我发现有时上面给出的时间是 kCMTimeZero。我为此使用的解决方法是创建一个带有轨道输出的 AVAssetReader，获取第一帧和第二帧的 pts，然后将两者相减。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-22T10:16:41.237

我不知道有什么`AVPlayer`可以帮助您计算帧速率。

`AVPlayerItem` `rate`属性是播放速率，与帧速率无关。

更简单的选择是获取 a`AVAssetTrack`并读取其`nominalFrameRate`属性。只需创建一个`AVAsset`，您将获得一系列曲目。

或用于`AVAssetReader`逐帧读取视频，获取其呈现时间并计算同一秒内有多少帧，然后平均几秒钟或整个视频。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-07-23T13:51:16.923

这不再起作用了，API 发生了变化，而且这篇文章已经过时了。:( swift 4 的答案也很酷，这个答案是相似的。

您从 获取视频轨道`AVPlayerItem`，然后检查那里的 FPS。:)

```
private var numberOfRenderingFailures = 0
func isVideoRendering() -> Bool {
    guard let currentItem = player.currentItem else { return false }

    // Check if we are playing video tracks
    let isRendering = currentItem.tracks.contains { ($0.assetTrack?.mediaType == .video) && ($0.currentVideoFrameRate > 5) }
    if isRendering {
        numberOfRenderingFailures = 0
        return true
    }
    numberOfRenderingFailures += 1
    if numberOfRenderingFailures < 5 {
        return true
    }
    return false
} 
```

# android - 具有线性渐变背景的Android GLSurfaceView OpenGL ES？

> ID：10666889
> 
> 赞同：1
> 
> 时间：2012-05-19T16:17:29.487
> 
> 标签：android, opengl-es, background, glsurfaceview, linear-gradients

使用此代码，我可以清除背景并添加颜色：

```
gl.glEnable(GL10.GL_DEPTH_TEST);    
gl.glClearColor(0.0f, 0.25f, 0.35f, 1.0f);
gl.glClear(GL10.GL_COLOR_BUFFER_BIT); 
```

如何将其更改为具有线性渐变背景？例如，顶部为白色，底部为蓝色？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T16:45:14.600

没有清除渐变的方法，但我只是绘制一个彩色四边形而不是清除颜色：

```
void drawFrame() {
   glDisable(GL_DEPTH_TEST);
   //draw screen aligned quad with color gradient 
   //    (top two vertices white, bottom two blue)
   drawGradientQuad();

   glClear(GL_DEPTH_BUFFER_BIT); //no need to clear color

   glEnable(GL_DEPTH_TEST);
   //draw rest of scene
} 
```

# jquery - jQuery 验证适用于 input type="submit"，但不适用于 html 按钮元素。为什么？

> ID：10666890
> 
> 赞同：3
> 
> 时间：2012-05-19T16:17:29.493
> 
> 标签：jquery, validation, button, jquery-validate

使用 ASP.NET，为什么当使用 input type="submit" 元素而不是 html 按钮元素时，bassistance.de jQuery 验证插件会阻止表单提交？

使用 html 按钮 (type="submit") 标记时会触发验证，但仍会提交表单。

有没有办法让 jQuery 验证插件与 html 按钮元素一起工作？

一个简单的例子：

```
<html xmlns="http://www.w3.org/1999/xhtml">
    <head runat="server">
        <script type="text/javascript">
            $(document).ready(function () {
                $("#form1").validate({
                    rules: {
                        txtFirstName: {
                            required: true
                        }
                    },
                    messages: {
                        txtFirstName: {
                            required: "* First Name required<br/>"
                        }
                    }
                });
            });
        </script>
    </head>

    <body>
        <form id="form1" runat="server">
            <input id="txtFirstName" name="txtFirstName" type="text" />
            <input id="btnSubmit1" type="submit" runat="server" value="Submit" /> <!-- WORKS! -->
            <button it="btnSubmit2" type="submit" runat="server">Submit</button> <!-- DOESN'T WORK -->
        </form>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-19T16:20:19.767

它似乎是这样设计的：

```
// when a submitHandler is used, capture the submitting button
if (validator.settings.submitHandler) {
  inputsAndButtons.filter(":submit").click(function () {
    validator.submitButton = this;
  });
} 
```

不幸的是，这似乎已成定局，别无选择。上的文档`:select`似乎对此有了更多的了解：

> 选择`:submit`器通常适用于按钮或输入元素。请注意，某些浏览器将元素视为`type="default"`隐式处理，而其他浏览器（例如 Internet Explorer）则不会。

一种解决方案是将您绑定`button`到调用验证的函数。在下面的示例中，我们看到这是通过锚点完成的：

```
$("#myform").validate();
$("a.check").click(function() {
  $("#myform").valid();
}); 
```

# jquery - jquery地址插件，获取上一页，并重定向到它

> ID：10666897
> 
> 赞同：0
> 
> 时间：2012-05-19T16:18:26.553
> 
> 标签：jquery, browser-history, jquery-address

有谁知道如何使用 jquery 地址插件获取上一页，以便我可以重定向回它？

[http://www.asual.com/jquery/address/](http://www.asual.com/jquery/address/)

# java - Android：从特定线程执行方法

> ID：10666899
> 
> 赞同：0
> 
> 时间：2012-05-19T16:18:58.597
> 
> 标签：java, android

我正在开发一个 Android 应用程序。应用程序可以将 HTTP 请求发布到特定的 Web 服务器。该发布请求必须异步运行，因此我创建了一个线程来完成这项工作。但是我需要一个将在线程结束时调用的回调，并且必须从调用`post`方法的线程中调用它。

我的`post`方法如下所示：

```
interface EndCallback
{
    public void Success(String response);
    public void Fail(Exception e);
}

public void post(final String url, final List<NameValuePair> data, EndCallback callback)
{
    Thread t = Thread.currentThread();
    (new Thread()
    {
        public void run()
        {
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost(url);
            try
            {
                httppost.setEntity(new UrlEncodedFormEntity(data));
                HttpResponse r = httpclient.execute(httppost);

                HttpEntity en = r.getEntity();
                String response = EntityUtils.toString(en);

                //I want to call callback.Success(response)
                //here from thread t
            } 
            catch (Exception ex)
            {
                //And I want to call callback.Fail(ex)
                //here from thread t
            }
        }
    }).start();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T16:33:16.850

您可能想要使用处理程序。处理程序用于将请求发布到 GUI 线程。

对于成功处理，请使用以下代码：

```
final Handler successHandler = new Handler()
{
    @Override
    public void handleMessage(Message message)
    {
        callback.Success(response);
    }
};

successHandler.sendEmptyMessage(0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T16:34:59.980

对于大多数应用程序来说，*强烈*建议不要在Android 上创建新线程。这似乎是[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)的理想场所。它具有在线程之间切换的内置方法，无需手动管理线程创建。

我在类似情况下使用的一种方法是将任务与`enum`可能的成功状态结合起来：

```
class HttpPostTask extends AsyncTask<Void, Void, ResponseStatus> {

    @Override
    protected ResponseStatus doInBackground( Void... params ){

        try {
            // do your HTTP stuff
            return ResponseStatus.SUCCESS;
        } catch( Exception e ){
            return ResponseStatus.FAILURE;
        }

    }

    @Override
    protected void onPostExecute( ResponseStatus status ){
        switch( status ){
        case SUCCESS:
            // run your success callback
            break;
        case FAILURE:
            // run the failure callback
            break;
        }
    }

}

enum ResponseStatus {
    SUCCESS,
    FAILURE
} 
```

该`doInBackground`方法将在由操作系统管理的单独线程中运行。当该线程完成时，`onPostExecute`将在启动任务的线程上运行，该线程通常是 UI 线程。

如果您需要设置回调对象，只需将构造函数添加到 HttpPostTask 并执行您需要的任何初始化。然后，您的客户端代码将只需要创建和执行任务：

```
new HttpPostTask().execute(); 
```

您也可以将参数传递给`execute()`它，它接受类签名中第一个泛型类型的可变数量的参数。中的`params`变量`doInBackground`是一个传递给执行的东西的数组，它们都是相同的类型。

`execute`例如，如果您想发布到多个 URL，则传递参数很有用。对于大多数依赖项，在构造函数中设置它们是最简单的方法。

# objective-c - 当属性不相关时通过 XPath 获取 XML 元素

> ID：10666901
> 
> 赞同：0
> 
> 时间：2012-05-19T16:19:25.187
> 
> 标签：objective-c, xml, xpath, gdata, gdataxml

我正在寻找一种从 YouTube 提要（例如[http://gdata.youtube.com/feeds/api/users/USERNAME/uploads](http://gdata.youtube.com/feeds/api/users/USERNAME/uploads)）接收 XML 元素（条目的 id）的方法。

提要如下所示：

```
<feed xmlns="http://www.w3.org/2005/Atom" xmlns:media="http://search.yahoo.com/mrss/" xmlns:openSearch="http://a9.com/-/spec/opensearch/1.1/" xmlns:gd="http://schemas.google.com/g/2005" xmlns:yt="http://gdata.youtube.com/schemas/2007" gd:etag="W/&quot;DUcFQncyfCp7I2A9WhVUFE4.&quot;">
<id>tag:youtube.com,2008:user:USERNAME:uploads</id>
<updated>2012-05-19T14:16:53.994Z</updated>
  ...
    <entry gd:etag="W/&quot;DE8NSX47eCp7I2A9WhVUFE4.&quot;">
        <id>tag:youtube.com,2008:video:MfPpj7f6Jj0</id>
        <published>2012-05-18T13:30:38.000Z</published>
  ... 
```

我想获得条目中的第一个标签（标签：youtube.com，2008 ...）。

在谷歌搜索了几个小时并浏览了 GDataXML wiki 之后，我一无所知，因为 XPath 和 GData 都无法提供正确的元素。我的第一个猜测是，他们不能忽略提要和条目标签中的属性。

使用 XPath 的解决方案会很棒，但同样欢迎使用 Objective-C 中的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T17:56:10.183

由于默认命名空间，您可能在尝试使 XPath 工作时遇到问题。

如果你只想要第一个标签`entry`，你可以使用这个：

```
/*/*[name()='entry']/*[1] 
```

如果你特别想要第一个`id`，你可以使用这个：

```
/*/*[name()='entry']/*[name()='id'][1] 
```

此外，如果您可以使用 XPath 2.0，您可以完全跳过谓词并使用 * 作为命名空间前缀：

```
/*/*:entry/*:id[1] 
```

# android - 是否可以在 android 应用程序中将文件保存为 .odt 或 .doc？

> ID：10666903
> 
> 赞同：0
> 
> 时间：2012-05-19T16:19:40.517
> 
> 标签：android, save, notepad

我正在创建一个使用不同字体的记事本 android 应用程序。我可以将文件另存为 .txt，但该扩展名不保存使用的字体，所以我想知道是否有任何方法可以将文件另存为 .odt 或 .doc。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T16:37:08.497

ODT 文件与 txt 文件完全不同，它实际上是一个包含多个文件的 zip 文件（您可以通过将任何 odt 文件重命名为 zip 文件并提取其内容来检查这一点）并且为了在 java 中保存 ODT 文件，您可以在 java 中创建 OdfTextDocument 的对象使用 ODF 工具包库

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T16:37:12.443

ODT 和 DOC 格式都相对复杂，对于您需要的东西来说可能是多余的。

但是，如果您想走这条路，最强大的解决方案是使用像[Aspose.Words](http://aspose.com)这样的库。

如果您将文件存储为 HTML 会怎样？这将为您提供更简单的字体和格式。

# opengl - 为各向异性过滤生成 ripmap

> ID：10666910
> 
> 赞同：1
> 
> 时间：2012-05-19T16:20:12.077
> 
> 标签：opengl

对于三线性过滤，我使用 gluBuild2DMipmaps 来生成 mipmap。各向异性过滤是否有类似的东西，还是我需要自己生成 ripmap？如果是后者，人们使用什么工具？

有点相关：告诉我的程序实际上是使用各向异性过滤的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T16:45:50.027

[由 OpenGL 和图形硬件实现的](http://www.opengl.org/registry/specs/EXT/texture_filter_anisotropic.txt)各向异性过滤不使用 ripmap。它通过对纹理进行大量采样来工作。Mipmap*有很大*帮助，并且会在存在时使用（以及在使用适当的缩小过滤器时）。

您的程序不使用各向异性过滤。单个纹理可以进行各向异性过滤，就像单个纹理可能使用也可能不使用 mipmap 过滤等一样。因此，您关于判断您的程序是否正在使用它的问题没有意义。

如果您通过指定非 1.0 最大各向异性值为该纹理打开它，单个纹理将使用它。驱动程序可以在某些条件下使用控制面板设置强制它开启，但您无能为力。

# ocaml - 为什么在 OCaml 中更喜欢柯里化而不是元组参数？

> ID：10666913
> 
> 赞同：12
> 
> 时间：2012-05-19T16:20:20.547
> 
> 标签：ocaml, tuples, currying

[“Caml 简介”](http://www.cs.jhu.edu/~scott/pl/lectures/caml-intro.html)说

> 请注意，在 Caml 中，最好将 Curried 函数定义用于多参数函数，而不是元组。

将`'a -> 'b -> 'c`调用约定与`'a * 'b -> 'c`.

在使用 SML/NJ 时，我习惯于对输入和输出都使用元组类型：`('a * 'b) -> ('c * 'd)`所以使用元组来表达多个输入似乎与我表达多个输出的方式是对称的。

为什么对元组参数的 OCaml 函数声明建议使用柯里化？仅仅是允许柯里化/部分评估带来的更大灵活性，还是从 OCaml 编译器的实现细节中获得的其他好处？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-20T08:27:11.777

我认为很多都是约定俗成的——OCaml 中的标准库函数是柯里化的，而在标准 ML 中它们通常不是除了一些高阶函数。但是，语言中存在一个差异：运算符（例如`(*)`）在 OCaml 中被柯里化（例如`int -> int -> int`）；而它们在标准 ML 中是 uncurried 的（例如`op*`can be `(int * int) -> int`）。正因为如此，内置的高阶函数（例如 fold）也采用在 OCaml 中柯里化而在标准 ML 中未柯里化的函数；这意味着要让您的函数使用它，您需要遵循各自的约定，并且从那里开始。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-19T16:34:02.013

是的，主要是符号的方便和部分应用的灵活性。Curried 函数在 OCaml 中是惯用的，编译器可能会比元组函数更好地优化它们（而 SML 编译器通常针对元组进行优化）。

元组的优点是您提到的参数/结果对称性（在组合函数时特别有用），也许还有符号熟悉度（至少对于来自非函数世界的人来说）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-19T19:10:59.367

关于 OCaml 中的优化的一些评论。

在 OCaml 中，我注意到在将元组作为参数传递时总是分配元组。即使在 ocaml 中在主堆中分配速度很快，当然也比什么都不做要长。因此，每次您将元组作为参数传递时，都会花费一些时间来分配和填充元组。

我预计 ocaml 编译器会优化不需要构建元组的情况。例如，当您内联被调用函数时，您可能只使用元组组件而不使用元组本身。因此元组可以被忽略。不幸的是，在这种情况下，OCaml 不会删除无用的元组并仍然执行分配。出于这个原因，在代码的关键部分使用元组可能不是一个好主意。

# sql - MVC3 - 扩展类和更新 SQL 表

> ID：10666914
> 
> 赞同：1
> 
> 时间：2012-05-19T16:20:26.380
> 
> 标签：sql, asp.net-mvc, asp.net-mvc-3, entity-framework-4

我正在使用 MVC3 和实体框架。我有一个名为 User 的类，它有 20 个不同的属性。我已经创建了一个数据库并用一些数据填充了它。我想打破 Addresses 属性并使其成为自己的类。

```
namespace NameSpace.Domain.Entities
{
public class User
{
    public int UserId { get; set; }
    ...
    ...
    public string AddressOne { get; set; }
    public string AddressTwo { get; set; }
 }
} 
```

我想像这样打破两个地址

```
namespace NameSpace.Domain.Entities
{
public class User
{
    public int UserId { get; set; }
    ...
    ...
    public Addresses Addresses { get; set; }
 }
public class Addresses
{
    public string AddressOne { get; set; }
    public string AddressTwo { get; set; }
 }
} 
```

这是我的问题：

由于我已经有数据表填充了数据，我如何在服务器资源管理器中更新它？

谢谢（如果您需要更多信息，请告诉我）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T16:25:23.600

如果您首先使用 EF 代码 4.3，您可以使用迁移的概念来实现您想要的。

您将需要进行基于代码的手动迁移，因为您的更改对于框架本身来说有点高级。

进一步阅读：http: [//blogs.msdn.com/b/adonet/archive/2012/02/09/ef-4-3-code-based-migrations-walkthrough.aspx](http://blogs.msdn.com/b/adonet/archive/2012/02/09/ef-4-3-code-based-migrations-walkthrough.aspx)

# c# - 在 C# 中创建用于生成 SQL 语句的接口

> ID：10666915
> 
> 赞同：1
> 
> 时间：2012-05-19T16:20:33.283
> 
> 标签：c#, sql

是否有一种更简洁的方法可以使用 LINQ 类型接口或任何其他类型的接口来执行以下操作。我通常使用 NHibenate，但由于我正在构建的系统的动态特性，我需要执行以下操作。

```
StringBuilder select = new StringBuilder("select ");
select.Append("Column1, ");
select.Append("Column2, ");
select.Append("Column3 ");
select.Append("from TableName tn");
select.AppendFormat("where tn.Column1 = {0}", 12);

DataSet dataSet = select.ExecuteSelect() // is an extension method that takes a string builder 
```

所有字符串值都来自 MetaColumn 和 MetaTable 元存储，它允许我构造语句。幸运的是，它们相当简单。没有连接，只有插入和更新。最多有 50 个不同的表，列范围为 100+-。我希望能够做类似的事情

```
string statement = select allColumns from new TableName<"TableName">() where UniqueKey<"Column1">(12); 
```

像这样的东西......有什么想法吗？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T16:38:51.107

看看一些微 ORM。[简单数据](https://github.com/markrendle/Simple.Data)应该适合你

# php - Android从数据库中获取数据

> ID：10666926
> 
> 赞同：1
> 
> 时间：2012-05-19T16:22:16.037
> 
> 标签：php, android, mysql, sql-server, database

我决定为我的 android applikation 尝试一些数据库连接。但是我需要一些关于结构的建议。

我开始知道，为了使用 Android 从数据库中获取数据，我需要使用 php 脚本。我在这个领域完全是新手，对我来说这听起来有点尴尬。因此，我想我可以创建一个应用程序连接到的 Java 服务器，除此之外，该服务器还从数据库中获取数据并返回。

从性能的角度来看，什么是最好的？让应用程序本身从数据库中获取数据，还是连接到为您获取数据的服务器？安全性如何？为了澄清，无论如何我都会有一个 Java 服务器来处理其他事情。

![在此处输入图像描述](../Images/284cc5676961f4da9a8ea4b46da4a482.png)

对 Vista 的绘画技巧感到抱歉。感谢您的任何意见！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T17:09:39.863

就像其他人所说的，你使用 PHP 还是 Java 并不重要。但你在正确的轨道上。大多数开发人员在他们的 HTTP 服务器上创建一个 Web 服务，并且应用程序与之对话。这通常采用 HTTP 上的 JSON 或 XML 字符串的形式。流行的选择是使用 REST 架构，它本质上告诉您，您在服务上访问的内容是资源，您可以基于此构建您的服务。

对于 PHP 与 Java 的问题，这完全取决于您，您可以更快地设置并且更熟悉。**我还要说 Java 在 Android 的情况下具有生产力优势，因为您可以创建普通的旧 Java 对象作为结果模型，并在服务器和 Android 客户端之间共享该代码。**你得到这个是因为你可以使用像 Gson 库这样的东西，它将对象序列化和反序列化为 JSON 格式。您也可以使用 Google AppEngine 来托管您的 Java 代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T16:33:05.533

那么这个问题与我想说的android编程无关。

假设您以 json 格式将提取的数据返回到您的设备，那么整个性能问题在某种程度上受限于 java 或 php 在从数据库中检索数据并将其转换为 json 并发送到客户端时的性能。

就简单的操作而言，在这两种情况下效率都不会很重要，这只是开发人员的偏好问题。

# perl - Perl：在数组中获取所有增加和减少的条带（用于生物信息学）

> ID：10666929
> 
> 赞同：3
> 
> 时间：2012-05-19T16:22:50.413
> 
> 标签：perl, bioinformatics

我是 Perl 的新手，我在 Perl 中设计某个函数时遇到了麻烦。

该函数应该找到并返回所有增加和减少的条带。这意味着什么？如果两个位置是相邻数字，则它们是邻居。即（2,3）或（8,7）。增加的地带是增加的邻居地带。即（3,4,5,6）。递减带的定义类似。在每个数组的开头添加一个 0，在末尾添加数组的长度+1。没有邻居的单个数字正在减少。0 和 n+1 正在增加。

所以如果我有数组 (0,3,4,5,9,8,6,2,1,7,10) 我应该得到以下结果： 增加条是：(3,4,5) (10) (0) 递减条是：(9,8), (6), (2,1) (7)

我试图将问题减少到只得到所有递减条，但据我所知：http: [//pastebin.com/yStbgNme](http://pastebin.com/yStbgNme)

代码在这里：

```
sub getIncs{
    my @$bar = shift;
    my %incs;
    my $inccount = 0;
    my $i=0;
    while($i<@bar-1){
        for($j=$i; 1; $j++;){
            if($bar[$j] == $bar[$j+1]+1){
                $incs{$inccount} = ($i,$j);
            } else {
                $inccount++;
                last;
            }
        }
    } 
```

//edit1：我找到了一个包含上述函数 getStrips() 的 Python 程序，但我的 Python 充其量只是零星的。[http://www.csbio.unc.edu/mcmillan/Media/breakpointReversalSort.txt](http://www.csbio.unc.edu/mcmillan/Media/breakpointReversalSort.txt)

//edit2: 每个数字恰好是数组中的一个时间所以不能有重叠。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T20:23:32.930

```
use strict;
my @s = (0,3,4,5,9,8,6,2,1,7,10);
my $i = 0;
my $j = 0; #size of @s
my $inc = "Increasing: ";
my $dec = "Decreasing: ";

# Prepend the beginning with 0, if necessary
if($s[0] != 0 || @s == 0 ) { unshift @s, 0; }
$j = @s;

foreach(@s) {
  # Increasing
  if( ($s[$i] == 0) || ($i == $j-1) || ($s[$i+1] - $s[$i]) == 1 || ($s[$i] - $s[$i-1] == 1)) {
    if($s[$i] - $s[$i-1] != 1) { $inc .= "("; }
    $inc .= $s[$i];    
    if($s[$i+1] - $s[$i] != 1) { $inc .= ")"; }
    if($s[$i+1] - $s[$i] == 1) { $inc .= ","; }
  }

  #Decreasing
  if( ($s[$i]-$s[$i-1] != 1) && ($s[$i+1] - $s[$i] != 1) && ($s[$i] != 0) && ($i != $j-1) ) {
    if($s[$i-1] - $s[$i] != 1) { $dec .= "("; }
    $dec .= $s[$i];
    if($s[$i] - $s[$i+1] != 1) { $dec .= ")"; }
    if($s[$i] - $s[$i+1] == 1) { $dec .= ","; }
  }
  $i++;
}

$inc =~ s/\)\(/\),\(/g;
$dec =~ s/\)\(/\),\(/g;
print "$inc\n";
print "$dec\n"; 
```

结果：

```
Increasing: (0),(3,4,5),(10)
Decreasing: (9,8),(6),(2,1),(7) 
```

# javascript - Dojo：设置内容窗格以显示 .php 文件

> ID：10666933
> 
> 赞同：0
> 
> 时间：2012-05-19T16:23:02.080
> 
> 标签：javascript, dojo, digit

我可能在做一些非常错误和愚蠢的事情，但我似乎无法弄清楚这一点。我有一个按钮，当按下它时，我想设置一个不同的内容窗格来运行并显示一个 .php 文件。当我按下按钮时，以下内容不执行任何操作：

```
dojo.addOnLoad(
        function() {
            dojo.connect(dojo.byId("mainPanel"), "onclick", callRecordsPressed);
});

function callRecordsPressed() {
       digit.byId("mainPanel").setContent('modules/content_panes/callrecords.php'); 
} 
```

我也尝试过运行 get 但这也无济于事：

```
 function callRecordsPressed() {
            digit.byId("mainPanel").setContent(alert(dojo.xhrGet({
                url: 'modules/content_panes/callrecords.php',
                load: callRecordsCallBack,
                error: callRecordsError
            })));

        }

        // Function that will be called when the find user button is pressed
        function callRecordsCallBack(data, ioArgs){
        }

        function callRecordsError(data, ioArgs){
            alert('Error when attempting load call records!');
        } 
```

我在哪里定义内容窗格：

```
 <div class="centerPanel" data-dojo-type="dijit.layout.ContentPane"
             data-dojo-props="region: 'center'" id="mainPanel" >

            This is the right pane

        </div> 
```

我也尝试过 setHref(..) ，但这似乎也没有效果。有没有固定的方法来做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T22:19:09.350

如果您的内容窗格确实已创建，这就是您做错了什么

函数 callRecordsPressed() { digit.byId("callRecordsButton").setContent(alert(dojo.xhrGet({ url: 'modules/content_panes/callrecords.php', 加载: callRecordsCallBack, 错误: callRecordsError })));

```
 } 
```

应该看起来像这样：

```
function callRecordsPressed() {
        digit.byId("callRecordsButton").set('href', 'modules/content_panes/callrecords.php');
    } 
```

# jquery - 是否有用于处理文本框编辑的 jquery 事件？

> ID：10666936
> 
> 赞同：4
> 
> 时间：2012-05-19T16:23:44.280
> 
> 标签：jquery

我正在寻找一种在文本框文本发生更改时绑定到事件的方法。现在，我有这样的事情：

```
$("#inputPane").change(function() { alert("Changed!"); }); 
```

但是，只有在文本框失去焦点时才会调用它。每当添加、删除或剪切/粘贴新字符时，我都想获得一个事件。

我不想为此使用任何第三方插件。使用纯 jquery 会更好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T16:25:29.337

最好的选择是使用[`keyup`](http://api.jquery.com/keyup/)事件。

```
$("#inputPane").keyup(function() {
    alert("Changed!");
}); 
```

但是，您应该考虑到它会在单击*任何*键时触发，甚至`Ctrl`, `Alt`,`Shift`等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-19T16:28:31.923

您可能需要几个事件来涵盖键入的字符、粘贴等。

```
$("#inputPane").on('keyup paste click whatever', function() {
    alert("Changed!");
}); 
```

如果由于某种原因它多次触发：

```
var fire = true;

$("#inputPane").on('keyup paste click whatever', function() {
    if (fire) {
       fire=false;            
       alert("Changed!");
    }
    setTimeout(function() {fire=true}, 200);
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-19T16:29:04.297

这是一个如何捕捉任何变化的例子

```
$('#Textbox1, #Textbox2').each(function () {

    $(this).bind("propertychange keyup input paste", function (event) {
        alert("changed");
    });
}); 
```

我在一组文本框上使用它，它只触发一次

# php - PHP：数组的转换

> ID：10666943
> 
> 赞同：1
> 
> 时间：2012-05-19T16:24:12.937
> 
> 标签：php, arrays

有以下数组：

```
arr1 = array(array('xxx',3),array('yyy',2)); 
```

我需要将其转换为数组`arr2`，其中每个条目的出现次数等于数组中的第二列值`arr1`。例如，对于上面给出的`arr1`，`arr2`应该如下：

```
arr2 = array(array('xxx'),array('xxx'),array('xxx'),array('yyy'),array('yyy')); 
```

我写了下面的代码，但我的问题是：*是否有可能以更简单的方式做同样的事情？*

```
for ($i=0; $i<count($arr1); $i++) {
  for ($j=0; $j<$arr1[i][1]; $j++) {
     $arr2[] = array($arr1[0]);
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T16:34:03.170

我认为 a[`foreach`](http://php.net/manual/en/control-structures.foreach.php)更简单，更容易阅读。

```
$arr1 = array(array('xxx', 3), array('yyy', 2));
$arr2 = array();

foreach ($arr1 as $arr)
{
    for ($i = 0; $i < $arr[1]; $i++)
    {
        $arr2[] = array($arr[0]);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T16:46:15.933

```
foreach ($arr1 as $entry) {
    $arr2[] = array_fill(0, $entry[1], array($entry[0]));
}
$arr2 = call_user_func_array('array_merge', $arr2); 
```

我不会用它。它的可读性要差得多。

# c# - 与 IIS 的端口冲突

> ID：10666948
> 
> 赞同：0
> 
> 时间：2012-05-19T16:24:53.967
> 
> 标签：c#, networking, port, communication

我有一个 IIS 服务器运行一个使用端口 80 的网站，并且我还有一个应用程序通过端口 80 从另一台计算机进行通信。无论如何都可以在端口 80 上运行它们吗？

我的应用程序使用端口 80 监听 tcplistener 的唯一原因是端口 80 在客户端的防火墙上默认打开。

谢谢，罗希特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T16:28:01.350

您不能有多个进程在同一 IP 地址的同一端口上侦听。如果您的服务器有多个网络接口，您可以将 IIS 设置为侦听一个地址，并将您自己的应用程序设置为侦听另一个地址。

如果您的服务器只有一个网络地址，您需要选择另一个端口。如果您的 IIS 实现不侦听 HTTPS 流量，443 是一个不错的选择。其他选项可能是 21 (FTP)、22 (SSH)、23 (telnet) 或 25 (SMTP)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T16:27:51.697

您需要将计算机的 NIC 与两个 IP 地址绑定。然后，您的应用程序可以在一个 IP 地址上侦听端口 80，而 IIS 可以在另一个 IP 地址上侦听。您必须配置 IIS 以绑定到特定的 IP 地址；而不是默认的“全部未分配”。

但除此之外，每个侦听器的 IP:Port 绑定必须是唯一的。

有关配置 IIS 7 站点绑定的信息，请参阅[TechNet IIS 绑定](http://technet.microsoft.com/en-us/library/cc731692%28v=ws.10%29)。

# java - Spring 3 在自定义 bean 中接收 servletContext

> ID：10666949
> 
> 赞同：3
> 
> 时间：2012-05-19T16:25:02.197
> 
> 标签：java, spring, autowired, inject, applicationcontext

我的问题是我无法在我的 bean 中获取 servletcontext。我创建了自定义 bean“FileRepository”，我需要在那里获取 ServletContext。这是代码

```
package com.pc.webstore.utils;

import java.io.File;
import java.nio.file.Files;

import javax.servlet.ServletContext;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.context.annotation.Configuration;
import org.springframework.web.context.ServletContextAware;
public class FileRepository implements ServletContextAware {

private ServletContext servletContext;

public String saveFile(File file){
    File tempdir = (File) servletContext.getAttribute("javax.servlet.context.tempdir");
            ...
}

@Override
public void setServletContext(ServletContext servletContext) {
    this.servletContext = servletContext;
    }
} 
```

在 ApplicationContext.xml 中注册

```
 <bean id="fileStorage" class="com.pc.webstore.utils.FileRepository"/> 
```

当 saveFile(File file) 启动时，我收到 Nullpointerexception 因为 servletContext == null。

**那么为什么 servletcontext 不注入呢？** 我在 web.xml 中注册了 ContextLoaderListener

```
 <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener> 
```

我发现有一些范围。可能有问题。简要告诉我有关 applicationsontext 范围的信息或提供链接请求。感谢帮助。我花了很多时间来解决这个问题。

经过一些调试后，我了解到实际上在应用程序启动时调用了 servletcontextaware 的 setServletContexr 方法，但是当我尝试从我的控制器中使用 FileRepository 存储文件时，它已经是另一个带有 null servletContext 字段的对象。

有没有办法在我想要的时候在我的自定义 bean 中自动处理 servlet 上下文，比如在控制器中？

最后我通过 ServletContextAware 获得了 servletContext。我改变了创建fileRepository bean的方式。由此

```
public String create(@Valid Item item, BindingResult bindingResult, Model uiModel, HttpServletRequest httpServletRequest, FileRepository fileRepository)     { 
```

对此

```
@Autowired
private FileRepository fileRepository;

@RequestMapping(method = RequestMethod.POST, produces = "text/html")
public String create(@Valid Item item, BindingResult bindingResult, Model uiModel, HttpServletRequest httpServletRequest) { 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T17:13:02.533

ContextLoaderListener 加载一个 ApplicationContext，它成为应用程序的全局父上下文。那里没有 ServletContext。ServletContext 仅存在于 SERVLET 的 CONTEXT 中（请原谅术语的重载），例如 DispatcherServlet。每个 DispatcherServlet（通常只有一个）注册一个子上下文，该子上下文指向由 ContextLoaderListener 注册的全局父上下文。ApplicationContexts 就像类加载器。当 IOC 容器“寻找”一个 bean 时，每个 ApplicationContext 都可以“向上”查看其父级以尝试找到它，但它不能向下看。子级也可以覆盖其父级上下文中的 bean 定义。

现在......您的问题似乎是您的 bean 是在没有 ServletContext 的全局父上下文中定义的。（它不能“向下”看它的孩子来找到它。）

您需要做的是将 fileStorage bean 定义“向下”移动到 DispatcherServlet 的 ApplicationContext 中。

在 web.xml 中定义 DispatcherServlet 时，通常会指定它可以在哪里找到定义其子上下文的文件。像这样：

```
<servlet>
    <servlet-name>dispatcherServlet</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
      <param-name>contextConfigLocation</param-name>
      <param-value>classpath:/web-context/*.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet> 
```

将该 bean 定义向下移动到 contextConfigLocation 指定的位置，一切都应该按您的预期工作。

# mysql - 加入两个 MySQL 表，但有附加条件？

> ID：10666965
> 
> 赞同：0
> 
> 时间：2012-05-19T16:26:26.673
> 
> 标签：mysql, sql

我有两张桌子：

产品：

```
+-------------------------------------------------+
|   id   |    name   |   category     |   price   |
+-------------------------------------- ----------+
|    1   |    item1  |      1         |   0.99    |
|    2   |    item2  |      2         |   1.99    |
|    3   |    item3  |      3         |   2.95    |
|    4   |    item4  |      4         |   2.50    |
+-------------------------------------------------+ 
```

图片：

```
+--------------------------------------------------+
|   id   |    file_name    |   p_id   |   priority |
+-------------------------------------- -----------+
|    1   |      image1     |     1    |      0     |
|    2   |      image2     |     1    |      1     |
|    3   |      image3     |     2    |      2     |
|    4   |      image4     |     3    |      2     |
|    5   |      image5     |     3    |      3     |
|    11  |      image6     |     3    |      5     |
|    16  |      image7     |     4    |      1     |
|    19  |      image8     |     4    |      7     |
+--------------------------------------------------+ 
```

我需要获取所有产品信息，以及产品图像的文件名。请注意，一个产品可以有多个图像；我想要优先级**最低的那个。**另外，我只想要特定类别的产品的结果。

所以，假设我需要类别 {1,2,3} 中产品的信息，那么在查询运行后结果应该返回：

```
+-----------------------------------------------------------------+
|   id   |    name   |   category     |   price   |   file_name   |
+-------------------------------------- ----------+---------------+
|    1   |    item1  |      1         |   0.99    |     image1    |
|    2   |    item2  |      2         |   1.99    |     image3    |
|    3   |    item3  |      3         |   2.95    |     image4    |
+-------------------------------------------------+---------------+ 
```

我曾尝试编写几个不同的连接语句，但它们都不起作用；这并不奇怪，因为我在 SQL 方面完全是个新手。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T17:01:29.643

我将添加一步一步的教程，首先获得正确的连接，然后添加一些条件来过滤类别，最后，分组并使用带有子选择的 have 子句。您将需要在代码中使用最后一个选择。我还在 mysql 实例上对此进行了测试，并且可以正常工作。我正在使用 group by 以防您需要一些其他复杂的东西。有一个例子很好。语法是 ansii sql，它应该适用于所有数据库，而不仅仅是 mysql

```
-- get everything by joining
select p.*, i.file_name
from products p 
join image i on (p.id = i.p_id)

/* get everything by joining 
 *  + filter by category
 */
select p.*, i.file_name
from products p 
join image i on (p.id = i.p_id)
where p.category in (1,2,3)

/* get everything by joining 
* + filter by category
* + image is the one with the lowest priority
* note: selecting the priority is not necessary 
* but it's good for demonstration purposes
*/
select p.*, i.file_name, i.priority
from products p 
join image i on (p.id = i.p_id)
where p.category in (1,2,3)
group by p.id 
having i.priority = (select min(priority) from image where p_id = p.id) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T17:13:32.627

这是答案：

```
select a.id, a.name, a.category, a.price, b.filename as file_name 
from products a left join (
    select i.p_id, i.filename from (select id, min(priority) as min_p 
    from images group by p_id) q 
    left join images i on q.id = i.id
) b on a.id = b.p_id 
where a.category in (1, 2, 3); 
```

解释：

首先，您需要为每个优先级最低的产品设置一个位置，即来自以下查询：

```
select id, min(priority) as min_p from images group by p_id; 
```

结果将是：

```
+----+----------+
| id | lowest_p |
+----+----------+
|  1 |        0 |
|  2 |        2 |
|  3 |        2 |
|  4 |        1 |
+----+----------+
4 rows in set (0.00 sec) 
```

下一步将是获得一个外连接，在这种情况下，我会选择（根据我的喜好任意）左连接：

```
select i.p_id, i.filename from (select id, min(priority) as min_p 
from images group by p_id) q left join images i on q.id = i.id; 
```

简而言之，此查询会产生您想要的内容：

```
+------+----------+
| p_id | filename |
+------+----------+
|    1 | image1   |
|    2 | image3   |
|    3 | image4   |
|    4 | image7   |
+------+----------+
4 rows in set (0.00 sec) 
```

现在你只需要装饰它，再次使用左连接：

```
select a.id, a.name, a.category, a.price, b.filename as file_name 
from products a left join (
    select i.p_id, i.filename from (select id, min(priority) as min_p 
    from images group by p_id) q 
    left join images i on q.id = i.id
) b on a.id = b.p_id 
where a.category in (1, 2, 3); 
```

你会得到你想要的：

```
+------+-------+----------+-------+-----------+
| id   | name  | category | price | file_name |
+------+-------+----------+-------+-----------+
|    1 | item1 |        1 |  0.99 | image1    |
|    2 | item2 |        2 |  1.99 | image3    |
|    3 | item3 |        3 |  2.95 | image4    |
+------+-------+----------+-------+-----------+
3 rows in set (0.00 sec) 
```

您还可以将产品放在左连接的右侧，这取决于您在没有可用图像的产品时的预期。上面的查询将显示如上的视图，file_name 字段为“null”。

另一方面，如果您将产品放在 hte left join 的右侧，它将不会显示任何内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T17:03:12.343

基于 sarwar026 的回答...

```
SELECT p.id, name, priority, price, file_name
FROM Products p, Images i
WHERE p.id = i.p_id
  AND i.priority = (SELECT MIN(priority) FROM Images ii WHERE ii.p_id = p.id)
  AND p.category IN (1,2,3) 
```

（在带有表副本的 mysql 数据库上进行测试）

# php - javascript facebook 在墙上发布

> ID：10666969
> 
> 赞同：0
> 
> 时间：2012-05-19T16:26:44.380
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk

关于这个问题有很多答案，但我找不到正确的解决方案！我有调用登录名的javascript，但没有发布到墙上的权限

```
window.fbAsyncInit = function() {
    FB.init({
      appId: '<?php echo $this->getAppID; ?>',
      cookie: true,
      xfbml: true,
      oauth: true
    });
    FB.Event.subscribe('auth.login', function(response) {
      window.location.reload();
    });
    FB.Event.subscribe('auth.logout', function(response) {
      window.location.reload();
    });
  };
  (function() {
    var e = document.createElement('script'); e.async = true;
    e.src = document.location.protocol +
      '//connect.facebook.net/en_US/all.js';
    document.getElementById('fb-root').appendChild(e);
  }()); 
```

在 php 代码中，它非常简单地添加到数组中，例如：

```
 $facebook->getLoginUrl(array(
'scope' => 'publish_stream'                                         )); 
```

但是我怎样才能将它添加到这个 url 的 javascript 按钮以请求允许发布到用户的墙上

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T16:48:52.263

您使用范围参数请求权限：

```
FB.login(function(response) {
   alert(response);
 }, {scope: 'email,user_likes'}); 
```

[阅读更多](https://developers.facebook.com/docs/reference/javascript/FB.login/)：

**编辑：**

Javascript：

```
function login() {
FB.login(function(response) {
   alert(response);
 }, {scope: 'email,user_likes'});
} 
```

HTML：

`<div onclick="login();return false;">click here to login</div>`

# cocoa - 如何不在大纲视图中显示某些节点 ？

> ID：10666971
> 
> 赞同：0
> 
> 时间：2012-05-19T16:27:07.383
> 
> 标签：cocoa, cocoa-bindings, nsoutlineview, nstreecontroller

在 Apple 的 Mail 应用程序中，在左侧的大纲视图中，收件箱或文件夹以层次结构显示，但文件夹或电子邮件中的电子邮件根本不显示。

我想重现此功能。

我有一个连接到树控制器的大纲视图。对象（节点）被添加到树控制器并显示在大纲视图中。如何防止某些对象出现？具体来说，我有包含自定义对象实例的文件夹节点。就像在 Mail.app 中一样，我只想在大纲视图中显示文件夹，并将自定义对象显示在另一个视图中。

根据要求提供一些控制器代码；在这里，我将节点添加到在大纲视图中选择的 folderNode：

```
indexPath = [treeController selectionIndexPath];
indexPath = [indexPath indexPathByAddingIndex:[[[[treeController selectedObjects] objectAtIndex:0] children] count]];//want to insert the new node at the end of the folder node's array of children
    ...
[treeController insertObject:customObjectNode atArrangedObjectIndexPath:indexPath];
NSLog(@"No. of items selected in tree controller/outline view is %i",[[treeController selectedNodes] count]); //if the folderNode is a leaf, this gives 0, i.e. no selection

// if the folderNode is not a leaf, the added child automatically becomes selected by NSOutlineView. In that case I keep its parent selected (the folder) so the next customObjectNode can be added
[self selectParentFromSelection];//however this method will then do nothing because at this point nothing is selected. Now this whole paragraph of code cannot be repeated because nothing is selected so the first line of code doesn't work. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T16:40:41.357

您是否使用任何其他需要继续处理孩子的树控制器？

如果没有，只需将文件夹节点返回`YES`到`-isLeaf`（并且对于 childNodes 键为 nil）。

# facebook-graph-api - 在照片中标记自定义打开的图形对象

> ID：10666976
> 
> 赞同：-1
> 
> 时间：2012-05-19T16:27:37.157
> 
> 标签：facebook-graph-api, tagging

我可以在照片中标记除用户以外的其他内容吗？我想创建可在 facebook 照片上标记的自定义开放图形对象。如果没有，facebook api 上是否有任何计划允许这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T23:27:09.503

您也可以在打开的图表故事中标记人员。[https://developers.facebook.com/docs/opengraph/actions/#taggingpeople](https://developers.facebook.com/docs/opengraph/actions/#taggingpeople)

# python - Matplotlib 问题

> ID：10666977
> 
> 赞同：1
> 
> 时间：2012-05-19T16:27:40.270
> 
> 标签：python, plot, matplotlib

> **可能重复：**
> [用 Python 绘图](https://stackoverflow.com/questions/10647500/plotting-with-python)

我一直在使用 Matprolib 进行绘图。我发现它非常有用，但我不知道如何使用 'fill_between()' 函数。我已经尝试过多次修复它，但我无法直截了当。

我一直在研究几个教程，但我还没有找到非常有用的教程（根据我的任务）。

我的任务是填充所有线条共有的区域，就像这样：

[应该做什么](http://img4.imageshack.us/img4/8007/noerror.png)

这就是系统所做的：

[应该做什么](http://img36.imageshack.us/img36/4656/errorfz.png)

有什么办法吗？任何人都知道如何以正确的方式使用“fill_between()”吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T16:49:25.070

您可以使用该`where`选项。如[示例](http://matplotlib.sourceforge.net/examples/pylab_examples/fill_between_demo.html)中所示，您可以执行以下操作：

```
fill_between(x, myzero, y1, where=y2>=y1, facecolor='blue', interpolate=True) 
```

其中 y2 是有时在顶部的线。不过，您必须对每一行都执行此操作。

另一种选择是定义最少的函数并在其下方填充，尽管您需要事先知道 ys 是在相同点定义的，或者使用插值使它们都在相同点定义。

```
mymin = np.minimum(y1,y2,y3)
fill_between(x, myzero, mymin) 
```

希望有帮助。

编辑：要从所有为相同 x 值定义的几个函数中找到最小值，您可以使用以下命令：

```
def OverallMinimum(*ys):
    mymin = y[0].copy()
    for y in ys:
        min = np.minimum(mymin,y)
    return mymin 
```

然后您可以使用`fill_between`上面的第二个在该函数的零和最小值之间绘制。

# java - 在 MySQL 语句中传递变量

> ID：10666978
> 
> 赞同：0
> 
> 时间：2012-05-19T16:27:42.443
> 
> 标签：java, mysql, variables

我正在尝试在 Java 中的 MySQL 语句中将字符串变量记录到数据库中。

我读过[这个](https://stackoverflow.com/questions/6566031/how-to-insert-variable-into-a-table-in-mysql)和[这个](https://stackoverflow.com/questions/6573124/how-to-insert-variable-as-a-string-into-mysql-in-java)，但我没有成功。

这是我的代码：

```
public void registerUser( String userName, String password ) {

    try {
        String insertQuery = "INSERT INTO Credentials ('11', name, pass) VALUES('11', ?, ?)";
        pstmt = connection.prepareStatement(insertQuery);
        pstmt.setString(2, userName);
        pstmt.setString(3, password);
        pstmt.executeUpdate();
//          statement.executeUpdate("INSERT INTO Credentials VALUES(3, 'userName', 'password')");
    } catch (SQLException e) {
        e.printStackTrace();
    } finally {
        // close the connection when done
        try {
            if (connection != null) {
                connection.close();
            }
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }//END finally

}//END registerUser 
```

如您所见，这段代码正在获取两个字符串值，它应该将它们放入数据库中。但我找不到合适的解决方案。

有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T16:28:38.630

这个：

```
pstmt.setString(2, userName);
pstmt.setString(3, password); 
```

需要是：

```
pstmt.setString(1, userName);
pstmt.setString(2, password); 
```

您只在 PreparedStatement 中设置了两个变量，因此您需要从 1 开始计数*。setter*方法中使用的整数需要与语句中的问号匹配，而不是与给定 SQL 字符串的参数列表匹配。

# .htaccess - 使用 mod_rewrite 路径问题的漂亮 URL

> ID：10666987
> 
> 赞同：0
> 
> 时间：2012-05-19T16:29:17.527
> 
> 标签：.htaccess, mod-rewrite, friendly-url

我正在使用 MOD_REWRITE 通过单个文件引导所有 URL。目的是允许漂亮的网址，例如：

[http://mysite.com/shop/electrical/hoover](http://mysite.com/shop/electrical/hoover)

或者

[http://mysite.com/shop/checkout](http://mysite.com/shop/checkout)

等等等等

我使用以下 .htaccess 文件实现了这一点：

```
# Turn on the RewriteEngine
RewriteEngine On
#
#  Rules
#
RewriteCond %{REQUEST_FILENAME} !-f 
RewriteCond %{REQUEST_FILENAME} !-d 
RewriteRule . urlbug.htm 
```

这是完成所有工作的精简 HTML 文件：

```
<!doctype html>
<html class="no-js" lang="en"> 
<head>
<meta charset="utf-8">
<title>My web page</title>
<link type="text/css" href="css/ui-lightness/jquery-ui-1.8.20.custom.css" media="all"    rel="stylesheet"/>
</head>
<body>
<div id="accordion"><h3><a href="#">Home</a></h3><div>
<ul class="submenu"><li><a href="#" title="Clear Counters">Clear Counters</a></li></ul>
</div>
<h3><a href="#">Maintan Tables</a></h3>
<div>
<ul class="submenu">
<li><a href="#" title="Stock">Stock</a></li>
<li><a href="#" title="Categories">Categories</a></li>
<li><a href="#" title="Designers">Designers</a></li>
</ul>
</div>
<h3><a href="#">User Database</a></h3><div><ul class="submenu"></ul></div>
</div>
<script src="js/libs/jquery-1.7.1.min.js"></script>
<script src="js/libs/jquery-ui-1.8.20.custom.min.js"></script>
<script src="js/plugins.js"></script>
</body></html> 
```

如果您访问以下 URL，则此方法有效：

[http://www.facebookanswers.co.uk/code/foobar/works](http://www.facebookanswers.co.uk/code/foobar/works)

但是，如果您尝试使用如下 URL：

[http://www.facebookanswers.co.uk/code/foobar/no/longer/works](http://www.facebookanswers.co.uk/code/foobar/no/longer/works)

然后会加载 URL，但是不会加载任何 CSS 或 JS 文件。

这是因为我使用的是相对 URL。

如果我改为使用绝对 URL，那么一切正常。我设置了一个不同的文件夹来演示这一点：

[http://www.facebookanswers.co.uk/code/foobar2/works](http://www.facebookanswers.co.uk/code/foobar2/works)

和

[http://www.facebookanswers.co.uk/code/foobar2/works/as/well](http://www.facebookanswers.co.uk/code/foobar2/works/as/well)

这是带有绝对 URL 的代码：

```
<!doctype html>
<html class="no-js" lang="en"> 
<head>
<meta charset="utf-8">
<title>My web page</title>
<link type="text/css" href="http://www.facebookanswers.co.uk/code/foobar2/css/ui-lightness/jquery-ui-1.8.20.custom.css" media="all" rel="stylesheet"/>
</head>
<body>
<div id="accordion"><h3><a href="#">Home</a></h3><div>
<ul class="submenu"><li><a href="#" title="Clear Counters">Clear Counters</a></li></ul>
</div>
<h3><a href="#">Maintan Tables</a></h3>
<div>
<ul class="submenu">
<li><a href="#" title="Stock">Stock</a></li>
<li><a href="#" title="Categories">Categories</a></li>
<li><a href="#" title="Designers">Designers</a></li>
</ul>
</div>
<h3><a href="#">User Database</a></h3><div><ul class="submenu"></ul></div>
</div>
<script src="http://www.facebookanswers.co.uk/code/foobar2/js/libs/jquery-1.7.1.min.js"></script>
<script src="http://www.facebookanswers.co.uk/code/foobar2/js/libs/jquery-ui-1.8.20.custom.min.js"></script>
<script src="http://www.facebookanswers.co.uk/code/foobar2/js/plugins.js"></script>
</body>
</html> 
```

沿着这条线的某个地方，路径变得混乱。解决这个问题的最佳方法是什么？如果可能，我想保留相对 URL，因为我正在开发的代码将在许多站点上使用。如果我必须使用绝对 URL，这并不是世界末日，而且我知道绝对 URL 有性能优势，但是浏览器会愉快地加载 URL，但随后认为它存储在其他地方，这似乎很奇怪！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T16:37:25.680

使用根相对 URL。

问题是浏览器看到像[http://www.facebookanswers.co.uk/code/foobar/no/longer/works](http://www.facebookanswers.co.uk/code/foobar/no/longer/works)这样的 URL，因此相对链接将解析为[http://www.facebookanswers.co.uk/代码/foobar/no/longer/works/code/foobar2/css](http://www.facebookanswers.co.uk/code/foobar/no/longer/works/code/foobar2/css) ...等等。

而是使用这个...

```
<link type="text/css" href="/code/foobar2/css/ui-lightness/jquery-ui-1.8.20.custom.css" media="all" rel="stylesheet"/> 
```

通过以 / 开头，您将强制它相对于网站的根目录，但通过不指定域，如果您在另一个站点上部署它就可以正常工作。这实际上只是一个 HTML 问题，而不是一个 mod 重写问题。

查看您的服务器访问日志，您会看到正在请求哪些页面，并且您会发现它们不是您所期望的。

站点范围的资源始终最好使用根相对 URL 来引用 - 这意味着您不需要根据您在站点中的位置来调整它们，并且它使它们可以在站点之间移植（如果您像我一样方便将您的开发站点放在具有不同域名的本地计算机上 - 我在 www.example.com 本地工作时使用 www.example.com.dev）

# c# - 命令未在 WPF C# 中 DataGrid 上的行级 ContextMenu 中执行

> ID：10666988
> 
> 赞同：0
> 
> 时间：2012-05-19T16:29:18.257
> 
> 标签：c#, wpf, datagrid

我的模板是这样声明的-

```
<DataGrid.Resources>

    <ContextMenu x:Key="RowMenu" DataContext="{Binding PlacementTarget.DataContext, RelativeSource={RelativeSource Self}}">
        <MenuItem Header="Remove" Command="{Binding Cancel}" />
    </ContextMenu>

</DataGrid.Resources> 
```

我正在使用行样式应用模板 -

```
<DataGrid.RowStyle>

    <Style TargetType="DataGridRow">
        <Setter Property="ContextMenu" Value="{StaticResource RowMenu}" />
    </Style>

</DataGrid.RowStyle> 
```

菜单显示正常

但是当单击上下文菜单项时，该命令（在 ItemListViewModel 上）不执行

```
public class ItemListViewModel : INotifyPropertyChanged
{
    public void Cancel()
    {
        MessageBox.Show("Cancel test");
    }
...
} 
```

我的绑定工作正常，因为我可以做这样的事情 -

```
 foreach (ItemListViewModel ul in mylist.SelectedItems)
        MessageBox.Show(item.FullDescription); 
```

我整晚都在试图弄清楚这一点。今天刚开始使用WPF。

请有人告诉我哪里出错了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T16:35:18.473

我不认为你可以绑定到一个简单的方法。您需要绑定到应该是`ICommand`接口实现的命令。在您的情况下，您需要创建一个实现该接口的类并将该类类型的属性添加到您的模型中。

请参阅此示例作为参考：http: [//msdn.microsoft.com/en-us/magazine/dd419663.aspx](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T02:20:23.277

我决定 ListView 更适合我的需求，我正在使用它。我不再尝试将上下文菜单绑定到项目，而是为整个列表视图提供一个上下文菜单，并在需要的 ContextMenuOpen 事件中简单地启用或禁用项目。

# javascript - Backbone.Collection.fetch 抛出“对象 [...] 没有方法 '_validate'”

> ID：10666989
> 
> 赞同：3
> 
> 时间：2012-05-19T16:29:36.010
> 
> 标签：javascript, backbone.js

我有一个简单的 Backbone 集合，它从（远程）资源中提取对象列表。`Collection.fetch`但是，调用失败并出现以下错误：

```
Object [object Object] has no method '_validate' 
```

我猜这是在集合尝试在添加时为每个 JSON 对象创建模型实例时发生的。谁能解释为什么会发生这种情况？

这是我正在使用的代码。非常裸露的骨头...

```
/* Models */

var SomeModel = Backbone.View.extend({});

/* Collections */

var SomeCollection = Backbone.Collection.extend({
    url: 'http://localhost:8000/api/some/resource/?format=json',
    model: SomeModel,

    parse: function(data) {
        return data.objects
    }
});

var SomeView = Backbone.View.extend({
    collection: new SomeCollection(),

    initialize: function() {
        this.collection.fetch();
    },
}); 
```

这是资源响应的示例：

```
{
  "meta": {
    "count": 100
  },
  "objects": {
    {"title": "Title", "id": 1},
    {"title": "Title 2", "id": 2}
  }
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-19T16:37:04.737

您可能没有将集合的`model`选项设置为有效的 Backbone.Model 子类。当集合获取数据时，它将实例化模型并调用`set`，这将调用`_validate`，有效的`Backbone.Model`子类将具有，但您的实例没有。有关详细信息，请参阅[Backbone.Collection.fetch 的注释源代码](http://documentcloud.github.com/backbone/docs/backbone.html)。

感谢您发布代码。这就是问题所在。您的`SomeModel`extends`View`而不是`Model`. 我的猜测是复制/粘贴/忘记编辑。

```
var SomeModel = Backbone.View.extend({}); 
```

# ios - 为什么 Xcode 找不到我的 MKMap 框架，导致错误消息？

> ID：10666992
> 
> 赞同：1
> 
> 时间：2012-05-19T16:30:48.353
> 
> 标签：ios, frameworks, mapkit

我正在使用 MKMapView 创建一个界面。但是，我一直收到这些错误消息，并且我认为我已经正确链接了框架。在ContactViewController类头文件的开头，我#import <MapKit/MapKit.h>。

![错误信息](../Images/fa568efa99dac5965f485a8d32d31166.png)

我相信我已经正确链接了框架，所以我的项目，如下所示。我错过了什么吗？为什么这不起作用？

![与图书馆链接](../Images/0d2d0d4d1199f6e3ea07681c06a0a9ad.png)

感谢你的帮助！R

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T19:13:02.690

我有这个完全相同的问题，你有权像你一样链接它，但是你还必须在你的文件中包含框架。

[#import 使用尖括号 < > 和引号“”](https://stackoverflow.com/questions/1044360/import-using-angle-brackets-and-quote-marks)

希望这可以帮助，

比安卡

# powershell - Powershell - 将本地安装的应用程序泵入列表框

> ID：10666996
> 
> 赞同：0
> 
> 时间：2012-05-19T16:31:49.090
> 
> 标签：powershell, listbox, foreach, powershell-2.0

所以我试图获取所有本地安装的应用程序并将它们放入列表框中。但是，我遇到了一些问题。每当我使用以下代码时：

```
$prog = (get-wmiobject win32_product -computer $current_hostname.text -property Name).Name
foreach($program in $prog)
 {
 $program_list_current.items.add($program)
 } 
```

列表框中返回的是应用程序以及每个应用程序开头的一些其他文本/字符串。在某些情况下，将 '-property Name' 替换为 ' | 选择名称'，什么都没有返回。

我使用上述语法是因为下面的代码有效（它获取机器的 AD 组并将每个组放入列表框中）：

```
$processnames_t = (Get-ADComputer -Identity $current_hostname.text -Property MemberOf).MemberOf 
foreach ($processname in $processnames_t)
{
[void]$AD_list_current.Items.Add($processname)
} 
```

关于为什么它适用于 AD 组但不适用于已安装的应用程序的任何想法？也许与 get-wmiobject 的性质有关？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T18:01:21.060

我无法真正重现您所看到的问题。但是，对于程序名称，您可以替换

```
$prog = (get-wmiobject win32_product -computer $current_hostname.text -property Name).Name 
```

和

```
$prog = get-wmiobject win32_product -computer $current_hostname.text | Select -Exp Name 
```

单独选择名称不起作用，因为它返回对象而不是字符串。在这种情况下，要将其用作列表框项，您需要字符串。

# ruby-on-rails - 后台进程中的分叉和线程有什么区别？

> ID：10666997
> 
> 赞同：4
> 
> 时间：2012-05-19T16:31:59.200
> 
> 标签：ruby-on-rails, ruby, background-process

阅读它指出的 spawn gem 的文档：

> 默认情况下，spawn 将使用 fork 生成子进程。您可以通过在调用它时告诉 spawn 方法或通过配置您的环境来将其配置为执行线程。例如，您可以这样告诉 spawn 在调用中使用线程，

使用 fork 或 thread 有什么区别，任何一个决定的影响是什么，我怎么知道使用哪个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T17:06:57.543

线程意味着您在同一进程的另一个线程中运行代码，而分叉意味着您分叉一个单独的进程。

一般来说，线程意味着您将使用更少的内存，因为您不会有一个单独的应用程序实例（如果您有一个可写的 ruby​​ 副本，例如 ree，则此优势会减弱）。线程之间的通信也容易一些。

根据您的 ruby​​ 解释器，ruby 可能无法有效地使用额外的内核（jruby 擅长于此，MRI 更糟糕）因此产生一堆额外的线程会影响您的 Web 应用程序的性能并且不会充分利用您的资源 - MRI 一次只运行一个线程

分叉创建单独的 ruby​​ 实例，以便您更好地利用多个内核。您也不太可能对您的主应用程序产生不利影响。分叉时需要小心一点，因为您在分叉时共享打开的文件描述符，因此您通常希望重新打开数据库连接、内存缓存连接等。

使用 MRI 我会使用分叉，使用 jruby 有更多用于线程的案例

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-19T16:54:38.393

Fork 创建另一个进程，并且进程通常被设计为独立于应用程序中发生的任何其他事情运行。进程不共享资源。

然而，线程是为不同的目的而设计的。如果您希望并行化某个任务，则可能需要使用线程。

“fork() 导致两个进程之间的父子关系。线程创建导致进程的所有线程之间的对等关系。”

[在此链接](http://gauss.ececs.uc.edu/Users/Franco/ForksThreads/forks.html)上阅读更广泛的解释。

# c++ - QWebkit 显示本地网页

> ID：10666998
> 
> 赞同：1
> 
> 时间：2012-05-19T16:32:21.680
> 
> 标签：c++, qt, qtwebkit

我正在一个基于 QtWebKit 的类似浏览器的项目中工作。
它可以像任何其他浏览器一样显示任何网页，但我无法显示本地html文档！

我在 QMainWindow 中使用 QtWebView 并且正在加载页面

```
view->show(); 
```

谁能告诉我出了什么问题？

非常感谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T01:02:53.333

我没有看到与加载普通网页有什么不同，但无论如何这是从我的回答中得出[的](https://stackoverflow.com/questions/8020569/how-to-load-a-web-page-from-resources-in-qt/8021096#8021096)：

```
#include <QtGui/QApplication>
#include <QWebView>

int main(int argc, char* argv[])
{
    QApplication a(argc, argv);
    QWebView view;
    view.setUrl(QUrl("file:///home/luca/mypage.html"));
    view.show();
    return a.exec();
} 
```

# visual-studio-2010 - ThisWorkbook.Application.Workbooks.Open 中的 AccessViolationException

> ID：10666999
> 
> 赞同：2
> 
> 时间：2012-05-19T16:32:22.507
> 
> 标签：visual-studio-2010, vsto, excel-interop

我正在做一个项目，我需要在 Excel 中自动化一些工作流程，但我遇到了一个非常讨厌的障碍。在项目中，我使用 Visual Studio Tools For Office 创建文档级加载项。用户使用作为该项目一部分的功能区控件来自动从项目外部的工作簿复制工作表。外部工作簿从 SQL blob 加载并写入磁盘。加载项代码打开每个工作簿，将工作表复制到加载项工作簿中，然后关闭该外部工作簿。通常，第一个工作簿可以正常工作，但打开后续工作簿将引发 AccessViolationException。

```
 public void AddSheetFromTempFile(string tempfilePath)
    {
        Sheets sheets = null;
        Excel.Workbook workbook = null;
        Excel.Workbooks books = null;
        try
        {
            books = this.Application.Workbooks;

            //Throws AccessViolationException
            workbook = books.Open(tempfilePath, 0, true, 5,
                String.Empty, String.Empty, true, XlPlatform.xlWindows,
                String.Empty, true, false, 0, true, true, false);

            sheets = workbook.Worksheets;

            sheets.Copy(After: this.GetLastWorksheet());

            workbook.Close(SaveChanges: false);
        }
        finally
        {
            if (sheets != null)
            {
                Marshal.FinalReleaseComObject(sheets);
            }

            if (workbook != null)
            {
                Marshal.FinalReleaseComObject(workbook);
            }

            if (books != null)
            {
                Marshal.FinalReleaseComObject(books);
            }

            GC.Collect();
            GC.WaitForPendingFinalizers();
        }
    }

   //extension method for getting last worksheet
   public static Microsoft.Office.Interop.Excel.Worksheet 
   GetLastWorksheet(this Microsoft.Office.Tools.Excel.WorkbookBase workbook)
   {
        int veryHiddenSheets = 0;

        foreach(Worksheet sheet in workbook.Worksheets)
        {
            if(sheet.Visible == XlSheetVisibility.xlSheetVeryHidden)
            {
                veryHiddenSheets++;
            }
        }
        int lastIndex = workbook.Worksheets.Count - veryHiddenSheets;
        return workbook.Worksheets[lastIndex];
    } 
```

因此，我将问题缩小到一组可重复的步骤。此问题似乎源于您将一些 N 工作表添加到工作簿，然后删除它们并重新添加工作表的情况。我启用了此处建议的本机调试[http://social.msdn.microsoft.com/forums/en-US/vsto/thread/48cd3e88-d3a6-4943-b272-6d7ea81e11e3](http://social.msdn.microsoft.com/forums/en-US/vsto/thread/48cd3e88-d3a6-4943-b272-6d7ea81e11e3)。当出现上述异常时，我看到以下调用堆栈。

```
ntdll.dll!_ZwWaitForSingleObject@12()  + 0x15 bytes 
ntdll.dll!_ZwWaitForSingleObject@12()  + 0x15 bytes 
kernel32.dll!_WaitForSingleObjectExImplementation@12()  + 0x43 bytes    
[External Code]

First-chance exception at 0x2ff2489e in Excel.exe: 0xC0000005: Access violation reading   location 0x00000000.
A first chance exception of type 'System.AccessViolationException' occurred in PublicCompModel.DLL
An exception of type 'System.AccessViolationException' occurred in PublicCompModel.DLL but was not handled in user code 
```

不确定我是否误用了 COM 对象，但我确实觉得很奇怪，我可以通过删除所有工作表来复制它，而且这是 Excel 本地的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T14:42:55.180

经过大量的调试，与微软 VSTO 团队的支持票，以及一些漫长的夜晚，我终于得到了答案。问题不是源于我的代码，而是源于工作簿本身。最初，我们将代码编写为一个独立的项目，然后从我们用户的电子表格模型中集成工作表。关键问题是，当您开始从其他工作簿复制工作表时，您会随身携带对工作簿的命名引用。我们的用户组为我们提供了一个文件，其中包含数百个我们以前从未见过的错误引用。

即使您使用 Application 对象抑制警告，这些事件仍会在后台触发。C# 操作工作簿状态时触发的大量事件导致 AccessViolationException。

我学到的教训：确保清理工作簿并观察工作簿在没有您的代码的情况下的行为。由于时间问题，我们不得不在微软调试我们的代码时用 VBA 重写解决方案。在我们清理资源之前，VBA 代码运行更稳定，这可能源于它被解释并且根据我的观察运行在单个线程上的事实。

顺便说一句，如果您在文档加载项的上下文中使用 VSTO，您应该小心释放引用。在许多情况下，您可能不需要这样做，因为 Excel 可能会为您清理这些。释放 COM 对象被认为是[危险](http://blogs.msdn.com/b/visualstudio/archive/2010/03/01/marshal-releasecomobject-considered-dangerous.aspx)的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T22:52:44.673

我记得有类似的东西。虽然我不记得具体细节，但这是我保存和关闭工作簿的模板。我希望这在某种程度上有所帮助。

```
 xlWorkBook.SaveAs(fileName, Microsoft.Office.Interop.Excel.XlFileFormat.xlWorkbookNormal, misValue, misValue, misValue, misValue, Microsoft.Office.Interop.Excel.XlSaveAsAccessMode.xlExclusive, misValue, misValue, misValue, misValue, misValue);
    xlWorkBook.Close(true, misValue, misValue);
    xlApp.Quit();

    //Release objects
    releaseObject(xlWorkSheet);
    releaseObject(xlWorkBook);
    releaseObject(xlApp); 
```

...

```
private void releaseObject(object obj)
{
    try
    {
        System.Runtime.InteropServices.Marshal.ReleaseComObject(obj);
        obj = null;
    }
    catch (Exception ex)
    {
        obj = null;
        Response.Write("Exception Occured while releasing object " + ex.ToString());
    }
    finally
    {
        GC.Collect();
    }
} 
```