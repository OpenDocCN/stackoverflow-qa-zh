# StackOverflow 问答 10072000-10072999

# c++ - C++ 类型转换：将指针从 void 指针转换为类指针

> ID：10072004
> 
> 赞同：24
> 
> 时间：2012-04-09T10:38:29.477
> 
> 标签：c++, pointers, void

如何将指向 void 对象的指针转换为类对象？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-04-09T10:42:09.477

带一个`static_cast`. 请注意，只有当指针确实指向指定类型的对象时，您才必须这样做；也就是说，指针的值`void`取自指向此类对象的指针。

```
thing * p = whatever(); // pointer to object
void * pv = p;          // pointer to void
thing * p2 = static_cast<thing *>(pv); // pointer to the same object 
```

如果您发现自己需要这样做，您可能需要重新考虑您的设计。您正在放弃类型安全，从而可以轻松编写无效代码：

```
something_else * q = static_cast<something_else *>(pv);
q->do_something();  // BOOM! undefined behaviour. 
```

# postgresql - 有没有办法取消heroku数据库

> ID：10072005
> 
> 赞同：0
> 
> 时间：2012-04-09T10:38:33.513
> 
> 标签：postgresql, heroku

是否可以取消分叉（使 master 成为分叉的） heoroku 数据库。

只需执行[https://devcenter.heroku.com/articles/fast-database-changeovers](https://devcenter.heroku.com/articles/fast-database-changeovers)，当我取消关注它时，它就会变成分叉数据库（这不应该发生，所以我将票发布到 heroku）但暂时有什么办法将分叉的数据库提升为主数据库。

这是我的 pg:info

```
=== HEROKU_POSTGRESQL_ROSE (DATABASE_URL)
Plan         Ika
Status       available
Data Size    13.56 GB
Tables       23
PG Version   9.1.3
Created      2012-03-05 05:11 UTC
Forks        HEROKU_POSTGRESQL_MAROON

Status       available
Data Size    9.19 GB
Tables       23
PG Version   9.1.3
Created      2012-04-09 09:49 UTC
Forked From  HEROKU_POSTGRESQL_ROSE (DATABASE_URL) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T12:20:34.100

我很确定分叉不是只读的，并且与任何其他数据库相同。因此，如果您希望它成为您的主数据库，只需推广它：

```
heroku pg:promote YOUR_FORK_DB_NAME 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T02:00:39.077

在取消关注的时间点，未关注的追随者成为分叉。

这使它成为它自己的完整读/写数据库。

要使其成为您的“主”数据库，您可以使用 pg:promote 来更新 DATABASE_URL。

# symfony - Symfony 2 SecurityBundle 身份验证通过表单登录引发 BadCredentialsException

> ID：10072011
> 
> 赞同：0
> 
> 时间：2012-04-09T10:38:49.980
> 
> 标签：symfony

这是我的实体：

```
<?php

namespace Trade\TradeBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Symfony\Component\Validator\Constraints as Assert;
use Symfony\Bridge\Doctrine\Validator\Constraints\UniqueEntity;
use Symfony\Component\Security\Core\User\UserInterface;

/**
 * @ORM\Entity(repositoryClass = "Trade\TradeBundle\Repository\UserRepository")
 * @ORM\Table(name = "user")
 * @UniqueEntity(fields = "username", message = "The username already exists.")
 */
class User implements UserInterface
{
/**
 * @ORM\id
 * @ORM\Column(name = "id", type = "integer")
 * @ORM\GeneratedValue(strategy = "AUTO")
 */
protected $id;

/**
 * @ORM\Column(name = "username", type = "string", length = 20, unique = true)
 *
 * @Assert\NotBlank(
 *      message = "The username cannot be blank."
 * )
 */
protected $username;

/**
 * @ORM\Column(name = "password", type = "string", length = 40)
 *
 * @Assert\NotBlank(
 *      message = "The password cannot be blank."
 * )
 * @Assert\MinLength(
 *      limit = 8,
 *      message = "The password '{{ value }}' is too short. It should have {{ limit }} characters or more."
 * )
 * @Assert\MaxLength(
 *      limit = 16,
 *      message = "The password '{{ value }}' is too long. It should have {{ limit }} characters or less."
 * )
 */
protected $password;

/**
 * @ORM\Column(type = "string", length = 40)
 */
protected $salt;

public function __construct()
{
    $this->salt = md5(uniqid(null, true));
}

/**
 * Get id
 *
 * @return integer
 */
public function getId()
{
    return $this->id;
}

/**
 * Set username
 *
 * @param string $username
 */
public function setUsername($username)
{
    $this->username = $username;
}

/**
 * Get username
 *
 * @return string
 */
public function getUsername()
{
    return $this->username;
}

/**
 * Set password
 *
 * @param string $password
 */
public function setPassword($password)
{
    $this->password = $password;
}

/**
 * Get password
 *
 * @return string
 */
public function getPassword()
{
    return $this->password;
}

public function getSalt()
{
    return $this->salt;
}

public function getRoles()
{
    return array('ROLE_USER');
}

public function eraseCredentials()
{
}

public function equals(UserInterface $user)
{
    return $this->username === $user->getUsername();
}
} 
```

这是我的存储库：

```
<?php

namespace Trade\TradeBundle\Repository;

use Doctrine\ORM\EntityRepository;
use Symfony\Component\Security\Core\User\UserProviderInterface;
use Symfony\Component\Security\Core\User\UserInterface;

/**
 * UserRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class UserRepository extends EntityRepository implements UserProviderInterface
{
public function loadUserByUsername($username)
{
    return $this->getEntityManager()->findOneByUsername($username);
}

public function refreshUser(UserInterface $user)
{
    return $this->loadUserByUsername($user->getUsername());
}

public function supportsClass($class)
{
    return $class === 'Trade\TradeBundle\Entity\User';
}
} 
```

这是security.yml：

```
security:
    encoders:
        Trade\TradeBundle\Entity\User:
            algorithm: sha1
            encode_as_base64: false
            iterations: 1

role_hierarchy:
    ROLE_ADMIN:       ROLE_USER
    ROLE_SUPER_ADMIN: [ROLE_USER, ROLE_ADMIN, ROLE_ALLOWED_TO_SWITCH]

providers:
    main:
        entity: { class: TradeTradeBundle:User, property: username }

firewalls:
    dev:
        pattern:  ^/(_(profiler|wdt)|css|images|js)/
        security: false

    secured_area:
        pattern:    ^/
        form_login:
            check_path: /account/signin_check
            login_path: /account/signin
        logout:
            path:   /account/signout
            target: /
        anonymous: ~

access_control:
    - { path: ^/account/signin, roles: IS_AUTHENTICATED_ANONYMOUSLY }
    - { path: ^/account, roles: ROLE_USER }
    - { path: ^/admin, roles: ROLE_ADMIN } 
```

这是我的控制器动作：

```
/**
 * @Route("/account/signin", name = "account_signin")
 * @Route("/account/signin_check", name = "account_signin_check")
 * @Method({"GET", "POST"})
 */
public function signInAction()
{
    $request = $this->getRequest();
    $session = $request->getSession();

    $user = new \Trade\TradeBundle\Entity\User();
    $form = $this->createForm(new \Trade\TradeBundle\Form\Type\UserType(), $user);

    if ($request->attributes->has(SecurityContext::AUTHENTICATION_ERROR))
    {
        $error = $request->attributes->get(SecurityContext::AUTHENTICATION_ERROR);
    }
    else
    {
        $error = $session->get(SecurityContext::AUTHENTICATION_ERROR);
        $session->remove(SecurityContext::AUTHENTICATION_ERROR);
    }

    return $this->render('TradeTradeBundle:Account:signin.html.twig', array('form' => $form->createView(), 'error' => $error));
} 
```

这是我的表单类：

```
<?php

namespace Trade\TradeBundle\Form\Type;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilder;

class UserType extends AbstractType
{
public function buildForm(FormBuilder $builder, array $options)
{
    $builder->add('username', 'text', array('required' => false));
    $builder->add('password', 'password', array('required' => false));
}

public function getName()
{
    return 'user';
}

public function getDefaultOptions(array $options)
{
    return array(
        'data_class' => 'Trade\TradeBundle\Entity\User'
    );
}
} 
```

这是我的表格：

```
{% if error %}
    <div class="alert alert-error">{{ error }}</div>
{% endif %}
<form action="{{ path('account_signin_check') }}" method="post" class="form-inline" novalidate>
    <table class="table">
        <tr>
            <td style="width: 120px;">{{ form_label(form.username) }} <span class="required">*</span></td>
            <td style="width: 220px;">{{ form_widget(form.username, { 'attr': {'placeholder': 'Username'} }) }}</td>
            <td class="form-error" id="email_error">{{ form_errors(form.username) }}</td>
        </tr>
        <tr>
            <td>{{ form_label(form.password) }} <span class="required">*</span></td>
            <td>{{ form_widget(form.password, { 'attr': {'placeholder': 'Password'} }) }}</td>
            <td class="form-error" id="password_error">{{ form_errors(form.password) }}</td>
        </tr>
        <tr>
            <td colspan="2" style="text-align: right;">
                {{ form_rest(form) }}
                <input type="reset" value="Cancel" class="btn" />
                <input type="submit" value="Sign in" class="btn btn-danger" />
            </td>
        <td>&nbsp;</td>
        </tr>
    </table>
</form> 
```

当我尝试登录时，会显示 BadCredentialsException。我不知道为什么。我想我根据 Symfony 的文档做的一切都是正确的，请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T03:51:48.400

尝试使用 _username 和 _password 之类的输入名称，或者在您的 security.yml 中尝试将其放在 secure_area 下

```
username_parameter: username
password_parameter: password 
```

也许它可以帮助你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-04T17:15:28.273

这已经很老了，但我希望我的回答可以帮助其他人。

我在尝试将表单组件的使用与安全组件混合使用时遇到了完全相同的问题。

不幸的是，这是不可能的，因为安全组件在调用 login_check 函数时依赖于输入表单“名称”参数（名称的 html 定义） **_username**和**_password 。**不能用表单组件定义（无法定义输入元素的这个可选参数）。

当给元素命名时

> ->添加（'我的名字'，...

实际上，这是通知元素的 id 参数，而不是“名称”参数。buidlForm 函数给出的“name”将是“somename[my_name]”（其中 somename 是 Form 类的 getName() 函数返回的值），不能是安全组件要求的“_username”。

也许一种解决方法是在安全定义文件中将 username_parameter 定义为“somename [my_name]”，以便组件查找它，但我什至没有尝试过，因为这是一个非常讨厌的 hack。

编辑：实际上我用于另一个问题的另一种解决方法是在 Form 类的 getName() 函数中返回一个空字符串，因此我们得到：“my_name”作为输入元素属性，而不是“somename [my_name]”。所以也许我们可以尝试将“_username”和“_password”值赋予名称属性（没有尝试过）。

# html - 在 JSP 方法中实现 HTML 标签

> ID：10072014
> 
> 赞同：1
> 
> 时间：2012-04-09T10:39:01.370
> 
> 标签：html, jsp

我在jsp中创建了一个方法。在该方法中，我使用了一些 html 标签，使用 out.println(); 方法，但它会让你无法解决。

这是我的代码：

```
<%! public int display(int start){

        int limit;
        limit = DEFAULT >= testList.size() ? testList.size() : DEFAULT;
        System.out.println("size : "+ testList.size());
        System.out.println("limit : "+ limit);
            for(int count = start; count < limit; count++){
        TestDetail detailContain = (TestDetail)testList.get(count); 
        tcName = detailContain.getTestName();
        System.out.println("id : "+ tcName);
        tcSource = detailContain.getSource();
        tcDescription = detailContain.getDrescription();
        idVal = detailContain.getID();
        out.println("<tr>");
        out.println("<td width = '5%'><input id='"+idVal+"' type = 'checkbox' name = 'Tests' value = '"+tcName+"'/></td>");
        out.println("<td width = '20%'><a href = './"+tcSource+"'>"+tcName+"</a></td>");
        out.println("<td width = '75%'>"+tcDescription+"</td>");
        out.println("</tr>");

        }
         return limit;
    }
            %> 
```

它给出了这个错误：

org.apache.jasper.JasperException：无法为 JSP 编译类：

jsp文件中的第108行出现错误：/Xyz/def/abc.jsp out cannot be resolve

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T11:20:59.093

您收到此错误是因为您在 java 方法中写入“out.println”。当您使用声明标记来定义您自己的方法时，它无法访问所有 J​​SP 代码所在的“服务”方法。您可以将 Object 输出流作为参数传递给您的方法，如下所示，然后使用 out。打印

```
public int display(int start,**OutputStream outObject**)

        outObject.println("<tr>");
        outObject.println("<td width = '5%'><input id='"+idVal+"' type = 'checkbox' name = 'Tests' value = '"+tcName+"'/></td>");
        outObject.println("<td width = '20%'><a href = './"+tcSource+"'>"+tcName+"</a></td>");
        outObject.println("<td width = '75%'>"+tcDescription+"</td>");
        outObject.println("</tr>"); 
```

# php - PHP foreach 迭代两次而不是一次

> ID：10072015
> 
> 赞同：0
> 
> 时间：2012-04-09T10:39:16.170
> 
> 标签：php

我对 php 中的 foreach 函数有疑问：

目前我有：

```
<html>
<body>

<?php

$x=array("one","two","three", "four", "five", "six", "seven", "eight"); 

foreach ($x as $value)
  {
    echo $value . "<br />";
  }
?> 
```

哪个输出：

```
one
two
three 
four
five
six
seven
eight 
```

但是我如何使 foreach 循环迭代两次而不是一次，以便我得到：

```
two
four 
six 
eight 
```

这甚至可能吗？还是只使用 for 循环更好？

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T10:42:35.780

您的意思是跨过所有其他条目吗？你应该只使用一个 for 循环：

```
for($i = 1; $i < count($x); $i += 2)
{
    echo $x[$i] . '<br />';
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-09T10:44:20.183

```
<?php
    $i=1;

    $x=array("one","two","three", "four", "five", "six", "seven", "eight"); 

    foreach ($x as $value) {
        $i++;
        if($i%2==0){
          continue;
        }
      echo $value . "<br />";
    }
  ?> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-09T10:43:23.847

如果“迭代两次”是指“跳过奇数条目”：

```
$odd = FALSE;
foreach ($x as $value)
{
    $odd = !$odd;
    if($odd){
        continue;
    }

    echo $value . "<br />";
} 
```

（如果您选择使用 foreach，您需要自己计算。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-09T10:42:50.713

```
$cnt = 0;
foreach ($x as $value)
{
  $cnt++;
  if ($cnt % 2 == 1) continue;
  echo $value . "<br />";
} 
```

我想为@GordonM 带来这个
仅`for`在假设数组按顺序索引顺序时才有效，
例如

```
 array(2=>'one', 1=>'two', 4=>'three' ...) 
```

会把你拖下地狱

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-09T10:43:25.963

也许这就是你想要的。

```
$t=count($x);
for($i=0;$i<$t;$i++){
   if($i%2==0 && $i>0){
      echo $x[$i]."<br>";
   }
} 
```

问候！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-09T12:09:09.060

```
<?php

$x=array("one", "two", "three", "four", "five", "six", "seven", "eight"); 
$i=2;
foreach ($x as $value) {
     if( ($i % 2)==0 ) {
        echo $value . "<br />";
     }
    $i++;
  }
?> 
```

# swing - 如何在框架中加载下一个面板，该面板已经使用 setContentPanel() 设置了面板

> ID：10072016
> 
> 赞同：0
> 
> 时间：2012-04-09T10:39:17.000
> 
> 标签：swing, jframe, jpanel, next

我有一个 JFrame 类和两个 JPanel 类。首先，我想在调用Jframe main()时添加Panel1，当点击Panel1中的“Next>”按钮时，想打开Panel2。

现在我正在尝试运行 JFrame，它通过调用 jFrameObj.setContentPane(Panel1) 打开 Panel1。后来我的控制移动到 Panel1 现在我怎么能在同一个 jFrameObj 上做 setContentPane(Panel2) ？

这是我的功能的正确方法吗？如果有其他方法，请推荐我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T13:37:05.747

这是一个简单的程序，说明了[CardLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)用于所需任务的用法。您可能还想看看这篇[文章](http://java.sun.com/developer/technicalArticles/GUI/swing/wizard/)（从 2005 年开始，所以有些事情可能已经改变）。

```
import java.awt.*;
import javax.swing.*;

public class CardLayoutTestApplet extends JApplet {

    @Override
    public void init() {
        final Container pane = getContentPane();
        final CardLayout paneLayout = new CardLayout();

        JPanel panel1 = new JPanel();
        JButton button1 = new JButton("Next>>");
        panel1.add(button1);

        button1.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                paneLayout.show(pane, "Card2");
            }
        });

        JPanel panel2 = new JPanel();
        panel2.add(new JLabel("Second Panel"));

        pane.setLayout(paneLayout);
        pane.add(panel1, "Card1");
        pane.add(panel2, "Card2");
    }
} 
```

# ruby-on-rails - Rails 中的 LINQ 等效项

> ID：10072018
> 
> 赞同：3
> 
> 时间：2012-04-09T10:39:23.287
> 
> 标签：ruby-on-rails

我是 Rails 的新手，我想知道 Rails 中是否有类似 LINQ 的概念？

我正在尝试将值存储在对象中并查询对象而不将其保存在数据库中，就像在 LINQ 中一样？

在 Rails 中真的有可能吗？

请建议。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T10:54:17.680

您可以在[ActiveRecord 指南](http://guides.rubyonrails.org/active_record_querying.html)中找到答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T12:47:18.170

据我了解，您正在寻找类似 LINQ to Object 的方法。我认为您可以尝试查看[DataMapper](http://datamapper.org/)和这篇[文章](http://nutrun.com/weblog/2008/05/29/datamapper-without-a-database.html)。

# android - 如何在 Android 中做出这样的摆动效果？（见视频）

> ID：10072019
> 
> 赞同：2
> 
> 时间：2012-04-09T10:39:30.603
> 
> 标签：android

也许有人知道，如何制作像这个视频中那样的摆动效果？

[http://www.youtube.com/watch?feature=player_embedded&v=gz2hgEdGuqQ#](http://www.youtube.com/watch?feature=player_embedded&v=gz2hgEdGuqQ#)

当位图通过拉伸/移动/捏合等某些区域来响应用户手势时。是否有一些图书馆可以做到这一点，或者你认为这都是编码的草根？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T21:17:52.050

检查 ApiDemos，Android SDK 中的示例之一。

运行它，打开 Graphics -> BitmapMesh。

触摸图像，查看它是否执行您想要的类似操作。

SDK函数为[Canvas.drawBitmapMesh](http://developer.android.com/reference/android/graphics/Canvas.html#drawBitmapMesh%28android.graphics.Bitmap,%20int,%20int,%20float%5B%5D,%20int,%20int%5B%5D,%20int,%20android.graphics.Paint%29)

这个“网格”是改变源位图映射到目标画布的顶点数组。

然后，您的任务是使这些顶点具有动画和生命力。使用某种简单的物理（张力、动画）来制作效果。

# menu - 你如何为多色扩展菜单 css 类？

> ID：10072021
> 
> 赞同：0
> 
> 时间：2012-04-09T08:33:58.203
> 
> 标签：menu, css, color-picker

我已经通过屏幕选项激活了扩展菜单，并且在我的菜单项中我指定了一个基于添加到 screen.css 文件中的 css 代码的类。

例如，在“主页”菜单项中，我指定了一个“红色”类，并在 css 中添加了以下代码。

```
 .red { color: #FF0000} 
```

不幸的是，这并没有转换为模板，我不确定我做错了什么。

用萤火虫检查这个我注意到正在添加类，但是颜色变化没有出现。

```
 <li id="menu-item-154" class="red menu-item menu-item-type-post_type menu-item-
       object-page current-menu-item page_item page-item-148 current_page_item menu-
       item-154"> <a href="http://domain.com/WP-folder/?page_id=148">Home</a> 
```

谁能提供一些建议来完成这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T14:06:44.120

颜色也可以在其他类之一中指定。
您可以尝试删除它，也可以尝试通过 CSS`important`属性强制颜色。

尝试：

```
.red { color: #FF0000 !important;} 
```

# jquery-plugins - 在 Liferay 6.1 portlet 中使用 jRecorder

> ID：10072022
> 
> 赞同：0
> 
> 时间：2012-04-09T10:39:39.127
> 
> 标签：jquery-plugins, liferay-6

我正在使用[jRecorder](http://www.sajithmr.me/jrecorder/)录制音频并将其发送到服务器。我已经在一个带有 servlet 的简单 Web 应用程序上对其进行了测试，一切正常。但是当我将相同的代码集成到 liferay portlet 时，它会产生问题。它使用主机路径来指定要在 Liferay 中上传的 serverlet我正在使用 Action URL 代替 servlet url，但是这个 url 没有被底层 swf 命中。请给我任何解决方案..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T21:59:01.753

您必须尝试使用​​资源 URL 代替操作 URL。

并请放置一些有问题的演示代码，以便更好地帮助您。

# ios - 为 AIR 开发扩展：是否可以在 Windows 上启动

> ID：10072024
> 
> 赞同：0
> 
> 时间：2012-04-09T10:40:01.833
> 
> 标签：ios, actionscript-3, flash, air

我需要为 iOS 开发小型 AIR 扩展。问题来了：是否可以在 Windows 上启动它（并使用 AIR 内置模拟器进行调试）？或者我从一开始就需要 MAC OS 和 iPad？

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T11:07:41.267

您可以在任何平台上编写/调试，但如果您需要访问特定设备/操作系统的数据/IO 设备，而不是您需要在相应的设备/操作系统上进行调试以构建应用程序

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T20:22:55.820

如果您的目标是 iOS，确保它在 iOS 设备上*真正*运行的唯一方法是在 iOS 设备上对其进行测试。AIR 设备模拟器让我可以做 iOS 上实际上不允许的事情，比如在运行时加载另一个带有资产的 swf。模拟器没有抱怨，但在我的 iPod 上运行的编译版本却抱怨。

此外，您无法判断模拟器的性能，因为您的计算机将比实际设备强大得多。

不过，模拟器可能足以让您开始一个简单的“hello world”项目。

# flash - IE 中的 RTMP 流不在 Safari、Firefox 中？bu

> ID：10072028
> 
> 赞同：1
> 
> 时间：2012-04-09T10:40:11.727
> 
> 标签：flash, apache-flex, internet-explorer, video, rtmp

我有一个灵活的应用程序流媒体视频。直到上周，它在使用我们 CDN 中的视频时运行良好。但是，现在直播流将仅在某些浏览器中正常工作。

NetStream 对象将连接并开始播放流，但只是处于恒定缓冲状态。从未显示任何视频。

有些人只在 FF 中工作，而不是在 Chrome、Safari 或 IE 中工作。对我来说，它只能在 IE 中正确流式传输！

有没有人经历过这样的事情？我正在使用相同的代码，所有这些代码都曾经出色地工作过。

非常感谢任何帮助！

本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T06:34:52.847

我经历过，它让我头疼！我终于发现自 Flash player 11.1.102.62 版本以来有一个错误。您将[在 Adob​​e 的 bugbase 平台中](https://bugbase.adobe.com/index.cfm?event=bug&id=3117684)找到相关的 bug 。

对于我的用户，我建议在[这里解释一个临时解决方法](http://www.bestkicker.com/forum/13-annonces-officielles/30403-incompatibilite-firefox-adobe-flash-player-111-streaming-video-rtmp.html#1)，并将必要的文件放在我的网站上。我希望你会一点法语。

它有帮助吗？

# cpu - 谁或如何更改处理器模式、CPU 状态、CPU 特权级别？

> ID：10072034
> 
> 赞同：6
> 
> 时间：2012-04-09T10:40:52.847
> 
> 标签：cpu

我正在阅读有关 linux 设备驱动程序的信息，其中提到内核以特权模式运行，这使其可以不受限制地访问所有硬件。如何防止用户程序在此模式下设置 CPU？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T15:18:06.113

如果您想了解这些内容，最好的方法之一是通过代码遵循 Linux 引导过程[内核引导过程](http://duartes.org/gustavo/blog/post/kernel-boot-process)。例如，假设您采用在 x86 架构上运行的 Linux。引导时发生的事情是 BIOS 将控制权交给了引导加载程序。tern 中的引导加载程序将控制权交给内核。

然后内核通过一个过程来启动。最初大部分内容都是用汇编语言编写的 - 请参阅 /arch/x86/boot/header.S

然后它转到 /arch/x86/boot/main.c。在 main 函数的末尾，您会看到对`go_to_protected_mode()`

您可以在 /arch/x86/boot/pm.c 中看到该功能

所以，一旦你启动到内核，它就成为 CPU 的网关，你的代码在内核提供的虚拟机中运行。由于用户程序必须通过此虚拟机执行所有操作，因此用户程序无法在其他模式下运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-26T06:06:00.633

用户模式只能通过产生某种中断来改变它的特权模式。看起来中断的目的是为了改变程序的特权模式。在产生任何正常中断时，特权模式被提升，一些内核代码开始运行......结论：通过中断自己，用户模式程序无法提升特权并继续运行自己的代码......这就是如此巨大的安全性机制运作。

比尔麦克

# javascript - 在表单提交时发送元素 ID

> ID：10072036
> 
> 赞同：0
> 
> 时间：2012-04-09T10:41:03.173
> 
> 标签：javascript, jquery

我需要从删除的项目（使用 jqueryui draggables/droppables/sortables）中提取的元素 id 中获取的数据通过表单（通过电子邮件发送）连同此处的数据一起发送：

```
 function submitForm() {
$.ajax({type:'POST',
       url: 'send_tile.php',
       data:$('#tiles_collected').serialize(), 
       success: function(response) {
    $('#tiles_collected').find('.form_result').html(response);
}});

return false;
   } 
```

获取ID的功能是这样的（不确定它是否工作正常）：

```
 function getSku() {
var myIds = new array();
        $("#collection li").each(function(index, element){
              alert($(this).attr('id'));
           myIds.push(element.id);

            }); 
```

表格如下所示：

```
 <form id="tiles_collected" name='tiles_collected' method="post" onsubmit="return submitForm();">
      Email:<input name='email' id='email' type='text'/><br />
      Name:<input name='name' id='name' type='text' /><br />
       Zip code: <input name='zip' id='zip' type='text' /><br />
       <input type='hidden' id='sku' />
       <input type="submit" name="submit" value="Email collection to yourself and us" /><br/>
       <div class="form_result"></div>
       </form> 
```

谁能给我一个帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T11:47:03.473

要仅将 ID 添加到发送到服务器的数据中，您可以使用扩展或仅将它们添加到 Ajax 函数中。

延长：

```
function submitForm() {
    var MyData = $('#tiles_collected').serialize();
    $.extend(MyData, {IDs: myIds});  //myIds will have to be accessable, right now it's a local variable in your getSku() function

    $.ajax({type:'POST',
       url: 'send_tile.php',
       data: MyData, 
       success: function(response) {
            $('#tiles_collected').find('.form_result').html(response);
       }
    });
    return false;
} 
```

或者直接添加它们：

```
function getSku() {
    var myIds = new array();
    $("#collection li").each(function(index, element){
        myIds.push(element.id);
    });
    return myIds;
}

var IDs = getSku();

$.ajax({type:'POST',
    url: 'send_tile.php',
    data: {data : $('#tiles_collected').serialize(), ids : IDs},
    success: function(response) {
        $('#tiles_collected').find('.form_result').html(response);
    }
}); 
```

# android - 谷歌 API 地图缩放

> ID：10072040
> 
> 赞同：2
> 
> 时间：2012-04-09T10:41:42.067
> 
> 标签：android, map, zooming

```
 import com.google.android.maps.MapActivity;
 import com.google.android.maps.MapView;

 import android.os.Bundle;

 public class Map2Activity extends MapActivity {
/** Called when the activity is first created. */
MapView map;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    map = (MapView)findViewById(R.id.mvMain);
    map.setBuiltInZoomControls(true);
}

@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
}
 } 
```

清单文件

```
<uses-sdk android:minSdkVersion="8"/>
<uses-permission android:name="android.permission.INTERNET"/>

<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>

  <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <uses-library android:name="com.google.android.maps" /> 
```

主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<com.google.android.maps.MapView
             android:layout_width="fill_parent"
             android:layout_height="fill_parent"
             android:apiKey="01VR0PIBfyfgbR5DlOlcEBPG9F5WfE7ZBPg"
             android:tag="@+id/mvMain"
             android:enabled="true"
             android:clickable="true" />

</LinearLayout> 
```

我没有使用这两个语句获取地图（强制关闭应用程序）map = (MapView)findViewById(R.id.mvMain); map.setBuiltInZoomControls(true);
如果它必须工作，我需要付出什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T10:52:08.800

改变

```
android:tag="@+id/mvMain" 
```

到

```
android:id="@+id/mvMain" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T11:11:30.337

使用它：--main.xml--

```
 <?xml version="1.0" encoding="utf-8"?>
   <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
       android:orientation="vertical" android:layout_width="fill_parent"
       android:layout_height="fill_parent">
    <RelativeLayout android:layout_width="fill_parent"
            android:layout_height="fill_parent">
            <com.google.android.maps.MapView
                android:id="@+id/mapView" android:layout_width="fill_parent"
                android:layout_height="fill_parent" android:enabled="true"
                android:clickable="true" android:apiKey="0zWsBUUrp7PHyoVnmV5qN5nHhXhZ-VJHhlnjYig" />
            <LinearLayout android:id="@+id/zoom"
                android:layout_width="wrap_content" android:layout_height="wrap_content"
                android:layout_alignParentBottom="true"
                android:layout_centerHorizontal="true" />
        </RelativeLayout>
 </LinearLayout> 
```

在你的活动中使用它——

```
 LinearLayout zoomLayout = (LinearLayout)findViewById(R.id.zoom);  
    View zoomView = mapView.getZoomControls(); 

    zoomLayout.addView(zoomView, 
        new LinearLayout.LayoutParams(
            LayoutParams.WRAP_CONTENT, 
            LayoutParams.WRAP_CONTENT)); 
    mapView.displayZoomControls(true); 
```

希望它会帮助你..

# iphone - CGPoint 本地到全球问题

> ID：10072043
> 
> 赞同：0
> 
> 时间：2012-04-09T10:41:56.860
> 
> 标签：iphone, objective-c, uiviewcontroller, uiscrollview, cgpoint

我被困在 Objective C ViewController 基础应用程序中的本地到全局点问题

我有一个 ScrollView 作为 ViewController 的子视图，它一次有大约 13 到 15 个 UIButtons 作为子视图，在 ScrollView 的视图中只有 3 个 UIButton。

我想要的是获取 UIButton 的 CGPoint(Global)，它是 ScrollView 的子视图，但不是 ScrollView 内的本地 CGpoint。

有没有办法将本地 CGPoint 转换为全局 CGPoint。

谢谢Guyz KK

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T10:56:20.597

说你有一个`UIButton myButton`，试试：

`CGPoint globalPoint = [[[UIApplication sharedApplication] keyWindow] convertPoint:CGPointZero fromView:myButton]`;

并转换回来

`CGPoint localPoint = [myButton convertPoint:globalPoint fromView:[[UIApplication sharedApplication] keyWindow]]`;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T10:58:15.587

但是不只是添加包含对象的坐标吗？事实上，如果您有一个视图位于

```
x: 10 y: 10: w: 100 h: 100 
```

在另一个视野中

```
x: 10 y: 10 w: 20 h: 20 
```

第二个的中心是：（20,20），而x和y之和得到全局中心，即（30.30）

# mysql - MySql - 切换值

> ID：10072044
> 
> 赞同：0
> 
> 时间：2012-04-09T10:41:58.593
> 
> 标签：mysql

我在 mySql 中有以下场景，是否可以使用更新语句更新值？

当 1.A 匹配 2.C 时，我想将值表 1.A 设置为 2.B 的值

```
Table1

columnA

Table2

columnB
columnC 
```

我正在考虑运行以下命令-它会起作用吗？

```
Update Table1 SET Table1.columnA=Table2.columnB
WHERE Table1.columnA = Table2.columnC 
```

非常感谢任何帮助，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T10:53:50.670

您可以使用此查询 -

```
Update
  Table1, Table2
SET
  Table1.columnA = Table2.columnB
WHERE
  Table1.columnA = Table2.columnC; 
```

...或者这个带有 JOIN 子句的查询 -

```
Update Table1 JOIN Table2
  ON Table1.columnA = Table2.columnC  
SET
  Table1.columnA = Table2.columnB 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T10:43:37.250

像这样的东西怎么样：

```
UPDATE Table1 
    JOIN Table2 
        ON Table1.columnA = Table2.columnC
SET Table1.columnA=Table2.columnB 
```

# android - 如何获得活动的圆形对话框主题

> ID：10072045
> 
> 赞同：14
> 
> 时间：2012-04-09T10:42:08.940
> 
> 标签：android

我需要创建一个看起来像圆角对话框的活动。

对于这个要求，我设置

```
 android:theme="@android:style/Theme.Dialog" 
```

现在我的活动看起来像一个对话框，但我需要把它的角弄圆。

然后我创建了带有属性的 xml 并将这个可绘制对象设置为我的活动主题，但现在我的活动看起来不像对话框。

请建议我可以做什么，以使我的活动看起来像带圆角的对话框。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-04-09T11:53:14.020

你可以制作自己的`theme`圆角。首先你需要一个`drawable`背景`Activity`：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" >

    <corners android:radius="15dp" />

    <solid android:color="#565656" />

    <stroke
        android:width="3dp"
        android:color="#ffffff" />

    <padding
        android:bottom="6dp"
        android:left="6dp"
        android:right="6dp"
        android:top="3dp" />

</shape> 
```

接下来制作您自己的主题来扩展父主题`Theme.Dialog`：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <style name="ThemeWithCorners" parent="android:Theme.Dialog">
        <item name="android:windowBackground">@drawable/another_test_drawable</item>
    </style>

</resources> 
```

这将在文件夹中命名`styles.xml`的文件中`res/values`。`Activity`在你想要的 android manifest 中使用这个主题：

```
//...
<activity
            android:name=".ActivityName"
            android:label="@string/app_name"
            android:theme="@style/ThemeWithCorners" >
//... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T10:50:09.880

首先，创建一个圆角形状，如下所示：

对话bg.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">
    <corners android:radius="15dp" />
</shape> 
```

然后，转到您的活动的布局 xml 文件，并将其更改为 android:backgorund 属性，如下所示

```
<RelativeLayout 
    android:layout_width="..." 
    android:layout_height="..." 
    android:background="@drawable/dialogbg">
    <!--views here...-->
</RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-23T00:53:44.123

如果对于任何人，上述答案不起作用，请尝试这样做：

需要像上面的任何例子一样首先创建一个圆形：

`<?xml version="1.0" encoding="utf-8"?> <shape xmlns:android="http://schemas.android.com/apk/res/android"> <corners android:radius="8dp" /> </shape>`

1.将此形状设置为活动的布局。2.创建如下自定义样式：`

```
<style name="mycustomtheme" parent="android:Theme.Dialog">
    <item name="android:windowBackground">@android:color/transparent</item>
</style> 
```

`

现在在您的活动中设置主题 `<activity android:name=".MainActivity" android:label="@string/app_name" android:theme="@style/mycustomtheme" >`

# oracle - 从基于 Oracle XML 类型列的视图中访问数据

> ID：10072055
> 
> 赞同：1
> 
> 时间：2012-04-09T10:43:00.680
> 
> 标签：oracle, xmltype

我正在尝试从在 XML 类型列上创建的 Oracle 视图中获取数据。
例如：以下是 XSD：

```
`<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema">`
`<xsd:element name="MsrFact" type="MsrNode"/>`
`<xsd:complexType name="MsrNode">`

```
`<xsd:sequence>`

```
 `<xsd:element name="shipTo" type="MsrValue"/>`
`<xsd:element name="billTo" type="MsrValue"/>`
`<xsd:element name="FormulaeItem"  type="MsrValue" maxOccurs="10"/>`
```

`</xsd:sequence>`
```  `</xsd:complexType>`
`<xsd:complexType name="MsrValue">`

```
`<xsd:sequence>`

```
 `<xsd:element name="name"   type="xsd:string"/>`
`<xsd:element name="street" type="xsd:integer"/>`
```

`</xsd:sequence>`
```  `</xsd:complexType>`
`</xsd:schema>`
```

插入的xml是：

```
`<MsrFact xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">`

 `<MsrNode>`

```
 `<shipTo>`
     `<name>shipTo</name>`
   `</shipTo>`
```

```
 `<billTo>`
     `<name>billTo</name>`
   `</billTo>`
```

```
 `<FormulaeItem>`
    `<name>FormulaeItem1</name>`
  `</FormulaeItem>`
```

```
 `<FormulaeItem>`
     `<name>FormulaeItem2</name>`
     `<street>100</street>`
  `</FormulaeItem>`
```

```
 `<FormulaeItem>`
     `<name>FormulaeItem3</name>`
   `</FormulaeItem>`
```

 `</MsrNode>`
`</MsrFact>` 
```

桌子： `temptab( ogrid number(10), xdata xmltype);`

看法： `CREATE OR REPLACE VIEW`
`MsrFactView(orgid,shipTo,shipToR, billTo,billToR, FormulaeItem,FormulaeItemR)`
`AS SELECT ogrid,`
`extractValue(xdata, '/MsrFact/shipTo/name'),`
`extractValue(xdata, '/MsrFact/shipTo/street'),`
`extractValue(xdata, '/MsrFact/billTo/name'),`
`extractValue(xdata, '/MsrFact/billTo/street'),`
`extractValue(xdata, '/MsrFact/FormulaeItem/name'),`
`extractValue(xdata, '/MsrFact/FormulaeItem/street')`
`FROM temptab;`

我无法在此视图上编写直接选择查询，因为它给出了错误
SQL 错误：ORA-01427：单行子查询返回多于一行
01427。00000 -“单行子查询返回多于一行”

有没有办法从这个视图中获取数据？谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T13:08:26.600

extractValue 仅从给定路径中提取单个值，但由于 FormulaeItem 可以有很多，因此您不能在此处使用 extractValue。此外，使用 extractValue 是一种旧的、不推荐的方式来查询 XML。您应该使用新的 XMLTable 方法。

```
create or replace view MsrFactView as
select tt.ogrid,
st.name shiptoName, st.street shiptoStreeet,
bt.name billtoName ,bt.street billtoStreet,
fi.name formulaeitemname ,fi.street formulaeitemstreet
FROM
temptab tt,
XMLTABLE(
    '/MsrFact/MsrNode'
    passing tt.xdata
    columns
        shipto  XMLTYPE path '/MsrNode/shipTo'
        billto  XMLTYPE path '/MsrNode/billTo'
        formulaeitem XMLTYPE path '/MsrNode/FormulaeItem'
) nd,
XMLTable (
    '/shipTo'
    passing nd.shipto
    columns
    name varchar2(4000) path '/shipTo/name'
    street number path '/shipTo/street'
) st,
XMLTABLE (
    '/billTo'
    passing nd.billto
    columns
    name varchar2(4000) path '/billTo/name'
    street number path '/billTo/street'
) bt,
XMLTable (
    '/FormulaeItem'
    passing nd.formulaeitem
    columns
    name varchar2(4000) path '/FormulaeItem/name'
    street number path '/FormulaeItem/street'
) fi
/ 
```

不过要记住的一件事是，每个“MsrNode”不会得到一行，因为每个 MsrNode 有 1-n 个 FormulaeItem。将其视为连接 2 个具有 1-n 关系的表的 SQL 查询。就像在这种情况下一样，父表的每 1 行都会获得 'n' 行。

因此，在您的情况下，对于每个 MsrNode，您将在视图中获得与该节点中的 FormulaeItems 数量一样多的行。

# java - “-”被字符 %2D1 取代？

> ID：10072066
> 
> 赞同：0
> 
> 时间：2012-04-09T10:43:53.053
> 
> 标签：java

我在 IE
[https://localhost/myApp/4117-1Space/WebHome中输入以下网址](https://localhost/myApp/4117-1Space/WebHome)

当我在我的 java 类中执行 context.getURL().toString() 时，我得到字符串 url 作为
[https://localhost/myApp/4117%2D1Space/WebHome](https://localhost/myApp/4117%2D1Space/WebHome)。

所以在这里我得到 %2D1 而不是字符“-”。**有没有办法让我得到确切的词，即 4117-1Space 而不是 4117%2D1Space？** 在这里，我可以用“-”以编程方式替换 %2D1 以进行快速修复，但也会有其他特殊字符将被这些字符替换。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T10:47:47.257

你总是可以做一个

```
URLDecoder.decode(context.getURL().toString(), "UTF-8"); 
```

但是您也许可以通过其他一些上下文方法直接获得正确的路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T10:47:21.663

尝试像这样使用[URLDecoder](http://docs.oracle.com/javase/1.4.2/docs/api/java/net/URLDecoder.html)

```
String result = URLDecoder.decode(context.getURL().toString(),"UTF-8"); 
```

# php - 返回关注我的用户的 mysql 查询返回此错误：未定义的属性：stdClass::$user_id

> ID：10072067
> 
> 赞同：0
> 
> 时间：2012-04-09T10:44:04.203
> 
> 标签：php, mysql

此代码适用于我的追随者系统。我想查询数据库以显示关注我的用户。函数 show_users_following_you(my id) 在第 9 行返回错误。有人可以解释它的来源吗？

此代码适用于我的追随者系统。我想查询数据库以显示关注我的用户。函数 show_users_following_you(my id) 返回错误。有人可以解释它来自哪里吗？

```
function show_users_following_you($user_id=0){

    if ($user_id > 0){

        $follow = array();

        $fsql = "select follower_id from following where user_id='". $user_id ."'";
        $fresult = mysql_query($fsql);

        while($f = mysql_fetch_object($fresult)){
            array_push($follow, $f->user_id);
        }

        if (count($follow)){
            $id_string = implode(',', $follow);
            $extra =  " and id in ($id_string)";
        }else{
            return array();
        }
    }

    $users = array();
    $sql = "select id, username from users where status='active' $extra order by username";
    $result = mysql_query($sql);

    while ($data = mysql_fetch_object($result)){

        $users[$data->id] = $data->username;

    }

    return $users;

} 
```

**评论表结构是**

两列：

user_id 对应谁被关注， Follower_id 对应谁在做关注。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T10:48:07.893

```
$fsql = "select follower_id from following
    where user_id='$user_id'";
$fresult = mysql_query($fsql);

while($f = mysql_fetch_object($fresult)){
     array_push($follow, $f->user_id);
} 
```

您获取的对象具有属性`follower_id`，但您正在尝试读取`user_id`。

（此外，请确保`$user_id`使用`mysql_real_escape_string`或 PDO 转义动态值（在本例中为 ）。就目前而言，这可能对 SQL 注入开放。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T10:48:53.730

代替

```
[...]
while($f = mysql_fetch_object($fresult)){
   array_push($follow, $f->user_id);
} 
```

尝试

```
[...]
while($f = mysql_fetch_object($fresult)){
   array_push($follow, $f->User_id);
} 
```

问候！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T10:49:45.403

请更正查询

“从 user_id='$user_id' 的关注中选择 follower_id”

至

“从下面的 user_id=' 中选择 user_id”。$user_id ."'"

# iphone - 使用 CoreGraphics 绘图

> ID：10072069
> 
> 赞同：1
> 
> 时间：2012-04-09T10:44:20.123
> 
> 标签：iphone, core-graphics, undo

我正在使用 CoreGraphics 实现自由手绘，这对我来说效果很好，现在我想为此绘图实现撤消功能，以便用户可以清除他的最后一笔。

这是我使用 UITouchesBegin 和 UITouchesMoved 的绘图方法。

```
-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event{
    UITouch *touch  = [touches anyObject];

    previousPoint2  = previousPoint1;
    previousPoint1  = [touch previousLocationInView:self];
    currentPoint    = [touch locationInView:self];

    // calculate mid point
    CGPoint mid1    = midPoint(previousPoint1, previousPoint2);
    CGPoint mid2    = midPoint(currentPoint, previousPoint1);

    CGMutablePathRef path = CGPathCreateMutable();
    CGPathMoveToPoint(path, NULL, mid1.x, mid1.y);
    CGPathAddQuadCurveToPoint(path, NULL, previousPoint1.x, previousPoint1.y, mid2.x, mid2.y);
    CGRect bounds = CGPathGetBoundingBox(path);
    CGPathRelease(path);

    drawBox = bounds;

    //Pad our values so the bounding box respects our line width
    drawBox.origin.x        -= self.lineWidth * 2;
    drawBox.origin.y        -= self.lineWidth * 2;
    drawBox.size.width      += self.lineWidth * 4;
    drawBox.size.height     += self.lineWidth * 4;

    UIGraphicsBeginImageContext(drawBox.size);
    [self.layer renderInContext:UIGraphicsGetCurrentContext()];
    curImage = UIGraphicsGetImageFromCurrentImageContext();
    [curImage retain];
    UIGraphicsEndImageContext();

    [self setNeedsDisplayInRect:drawBox];
}

-(void)drawRect:(CGRect)rect {
    [curImage drawAtPoint:CGPointMake(0, 0)];
    CGPoint mid1 = midPoint(previousPoint1, previousPoint2);
    CGPoint mid2 = midPoint(currentPoint, previousPoint1);

    context = UIGraphicsGetCurrentContext();

    [self.layer renderInContext:context];

    CGContextMoveToPoint(context, mid1.x, mid1.y);
    // Use QuadCurve is the key
    CGContextAddQuadCurveToPoint(context, previousPoint1.x, previousPoint1.y, mid2.x, mid2.y);

    CGContextSetLineCap(context, kCGLineCapRound);
    CGContextSetLineWidth(context, self.lineWidth);
    CGContextSetStrokeColorWithColor(context, self.lineColor.CGColor);

    CGContextStrokePath(context);

    [super drawRect:rect];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T11:34:01.500

在我看来，有两种方法可以实现这一点

1.  您可以在 NSArray 中保存路径并在调用`drawRect`方法时在循环中绘制所有路径，然后在撤消时删除最后一个对象，将其添加到缓冲区数组并重绘所有数组。

2.  您可以获得一个离线缓冲区画布，您可以在其中绘制点时创建图像，每次绘制时更新它。在这里，您还需要创建一个点数组，但不是每次都重绘。当您撤消时，只需删除最后一个对象并在数组中绘制点时创建一个新的缓冲区画布。

# python - Gnuplot：第 0 行：绘制预期的函数

> ID：10072070
> 
> 赞同：1
> 
> 时间：2012-04-09T10:44:20.087
> 
> 标签：python, gnuplot

我有一个用 gnuplot 生成图形的 python 脚本。但我有一个错误：

gnuplot> plot ^ line 0：绘制预期的函数

```
 g=Gnuplot.Gnuplot(persist=1)
    g.title('Read&Write Performance')
    g.xlabel('minutes')
    g.ylabel('MB/s')
    g('set term png')
    g('set out')
    g('set yrange [0:70]')
    d1=Gnuplot.Data(self.time,self.list1,title="perfr", with_="line")
    d2=Gnuplot.Data(self.time,self.list2,title="perfw", with_="line")
    time.sleep(2)
    g.hardcopy('bench.png',terminal = 'png')
    g.reset() 
```

self.list1= [12, 15, 17] self.list2 = [43, 48, 49]

我不明白为什么我有这个错误。

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T15:37:17.647

在对源代码进行了**非常简短**的查看之后，似乎 g.plot() 不会将绘图发送到窗口（例如 x11），而是发送到当前配置 gnuplot 以发送绘图的任何位置。所以，（我认为）最简单的解决方案是——

```
g('set terminal png')
g('set output "bench.png"')
g.plot(d1)  #d1 should not be in "bench.png"
#This might work to plot both datasets together ... g.plot(d1,d2) 
```

只要 gnuplot-py 的内部在`plot`发出命令时不重置 gnuplot 脚本，这应该可以工作。我非常怀疑这种情况，因为该`__call__`方法似乎是 API 的重要组成部分。

# objective-c - cocos 2d中如何实现匀速运动？

> ID：10072073
> 
> 赞同：1
> 
> 时间：2012-04-09T10:44:42.000
> 
> 标签：objective-c, ios, cocos2d-iphone

我是 cocos2 的绝对初学者，实际上我昨天开始处理它。我想做的是沿着贝塞尔曲线移动图像。我就是这样做的

```
- (void)startFly
{    
[self runAction:[CCSequence actions:
                 [CCBezierBy actionWithDuration:timeFlying bezier:[self getPathWithDirection:currentDirection]],
                 [CCCallFuncN actionWithTarget:self selector:@selector(endFly)],
                 nil]];

} 
```

我的问题是图像移动不均匀。一开始它移动得很慢，然后逐渐加速，最后它移动得非常快。我应该怎么做才能摆脱这种加速？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T02:30:56.043

我建议查看 Line Drawing Starter Kit... 我已将其用于应用程序以使精灵以均匀的速度跟随路径

[http://www.learn-cocos2d.com/store/line-drawing-game-starterkit/](http://www.learn-cocos2d.com/store/line-drawing-game-starterkit/)

# objective-c - NSPredicateEditor 不调整 NSTextField 的大小

> ID：10072076
> 
> 赞同：3
> 
> 时间：2012-04-09T10:44:46.980
> 
> 标签：objective-c, cocoa, nspredicateeditor

有没有可行的方法来`NSPredicateEditor`调整大小`NSTextField`？

我得到的只是子类`NSPredicateEditorRowTemplate`化并在我的类中编写以下函数：

```
- (void)setTextFieldFrameWithPredicateEditor:(NSPredicateEditor *)predicateEditor{
    NSArray *arr = [self templateViews];
    NSView *view = [arr lastObject];
    NSSize needSize = NSMakeSize(NSMaxX(predicateEditor.frame), 17);
    [view setFrameSize:needSize];
} 
```

通过设置锚点（边距）没有影响`[view setAutoresizingMask:(NSViewMaxXMargin | NSViewWidthSizable)]`

每次按按钮显示 NSPredicateEditor 时，我都会调用此函数，并且每次在 function 中调用`-(IBAction)predicateEditorChanged:(NSPredicateEditor *)sender`。它似乎工作正常，但是当我多次更改设置 NSPredicateEditor 有时调整大小开始工作不正确。

请提供任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T22:26:52.873

一种选择是创建自定义 NSPredicateEditorRowTemplate 并覆盖 templateViews 方法。

像这样：

```
- (NSArray *)templateViews {
    NSArray *views = [super templateViews];
    NSView *lastView = [views lastObject];
    NSRect viewFrame = lastView.frame;
    viewFrame.size.width = 100.0f;
    lastView.frame = viewFrame;
    return views;
} 
```

然后将宽度设置为您需要的任何值。

# animation - XNA spritesheet 动画

> ID：10072078
> 
> 赞同：1
> 
> 时间：2012-04-09T10:44:50.897
> 
> 标签：animation, xna, sprite-sheet

第一次使用 XNA 创建一个简单的 RPG 游戏。

每当我朝不同的方向移动时，试图让我的角色面对不同的方式。

问题是，当我启动时，我什至看不到我的纹理，奇怪的是，当我走过游戏中的特定位置时，整个 spritesheet 变得可见，对于我的 AI NPC 来说也是如此：s.. 就像他们'重新放置在背景后面，我移动的矩形是透明的（所以我可以用它看穿背景）。

当我创建类的实例时，会发送 FrameWidth 和 FrameHeight。（height = 0（从 spritesheet 的顶部开始），width = spritesheetwidth / 4（取出单个 sprite）。）

速度是角色移动的速度。

```
 public override void Update(GameTime gameTime)
    {
        ObjectRectangle = new Rectangle(CurrentFrame * FrameWidth, 0, FrameWidth, FrameHeight);
        Origin = new Vector2(ObjectRectangle.Width / 2, ObjectRectangle.Height / 2);
        Position += Velocity;

        ObjectRectangleX = (int)PositionX;
        ObjectRectangleY = (int)PositionY;

        #region movement
        if (Keyboard.GetState().IsKeyDown(Keys.D) && Pastkey.IsKeyUp(Keys.A) && Pastkey.IsKeyUp(Keys.W) && Pastkey.IsKeyUp(Keys.S))
        {
            AnimateRight(gameTime);
            VelocityX = 2;
        }
        else if (Keyboard.GetState().IsKeyDown(Keys.A) && Pastkey.IsKeyUp(Keys.D) && Pastkey.IsKeyUp(Keys.W) && Pastkey.IsKeyUp(Keys.S))
        {
            AnimateLeft(gameTime);
            VelocityX = -2;
        }
        else if (Keyboard.GetState().IsKeyDown(Keys.W) && Pastkey.IsKeyUp(Keys.A) && Pastkey.IsKeyUp(Keys.D) && Pastkey.IsKeyUp(Keys.S))
        {
            AnimateUp(gameTime);
            VelocityY = -2;
        }
        else if (Keyboard.GetState().IsKeyDown(Keys.S) && Pastkey.IsKeyUp(Keys.A) && Pastkey.IsKeyUp(Keys.W) && Pastkey.IsKeyUp(Keys.D))
        {
            AnimateDown(gameTime);
            VelocityY = 2;
        }
        else
        {
            Velocity = Vector2.Zero;
        }

        Pastkey = Keyboard.GetState();

        #endregion
    }

    #region Animations

    public void AnimateDown(GameTime gameTime)
    {
        CurrentFrame = 2;
    }
    public void AnimateRight(GameTime gameTime)
    {
        CurrentFrame = 3;
    }
    public void AnimateLeft(GameTime gameTime)
    {
        CurrentFrame = 1;
    }
    public void AnimateUp(GameTime gameTime)
    {
        CurrentFrame = 0;
    }

    #endregion

} 
```

绘制方法如下所示：

```
 public virtual void Draw(SpriteBatch spriteBatch)
    {

        spriteBatch.Draw(ObjectTexture, Position, ObjectRectangle, Color.White, 0f, Origin, 1.0f, SpriteEffects.None, 0f);
        GameList.Add(this);
    } 
```

（忽略列表。添加）

所以我需要帮助是将纹理“锁定”到矩形。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T11:31:02.620

这些线条看起来没有必要

```
ObjectRectangleX = (int)PositionX;
ObjectRectangleY = (int)PositionY; 
```

您可能会看到的一件事是 .Draw 调用中的最终参数。您现在将其设为 0f，即图层深度，如果该值低于您的地形，则地形将绘制在顶部……我认为，取决于您的 spritebatch.begin() 参数。您可以在此处阅读更多内容，其中解释了有关层深度的更多信息。 [https://gamedev.stackexchange.com/questions/23619/2d-layerdepth-not-working-xna-4-0](https://gamedev.stackexchange.com/questions/23619/2d-layerdepth-not-working-xna-4-0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T14:06:16.077

我最初的想法是你在知道帧数据之前计算值。

移动此代码

```
ObjectRectangle = new Rectangle(CurrentFrame * FrameWidth, 0, FrameWidth, FrameHeight);
Origin = new Vector2(ObjectRectangle.Width / 2, ObjectRectangle.Height / 2);
Position += Velocity;

ObjectRectangleX = (int)PositionX;
ObjectRectangleY = (int)PositionY; 
```

到底部你的更新方法会给你更好的结果。此外，您似乎没有更新 PositionX 或 PositionY。您应该改用 Position.X 和 Position.Y。

编辑 - 您正在更改源图像的位置。因此，当您在屏幕上移动时，您的位置会更新，将源矩形移动到更接近应有的位置。因此，只需注释掉以下两行就可以解决它。

```
ObjectRectangleX = (int)PositionX;
ObjectRectangleY = (int)PositionY; 
```

编辑 2 - 澄清

要修复源矩形并保持 AI 正常工作，您需要执行以下操作。在 CharacterAnimation.cs 和 Monster.cs 的 Update 方法中，注释掉这两行

```
ObjectRectangleX = (int)PositionX;
ObjectRectangleY = (int)PositionY; 
```

然后在 Monster.cs 中的 Enemymovement(CharacterAnimation hero) 方法中修改这些行 (45,46)

```
ObjectcentreX = ObjectRectangle.X + (ObjectTexture.Width / 2);
ObjectcentreY = ObjectRectangle.Y + (ObjectTexture.Height / 2); 
```

成为

```
ObjectcentreX = (int)PositionX + (ObjectTexture.Width / 2);
ObjectcentreY = (int)PositionY + (ObjectTexture.Height / 2); 
```

# data-structures - 建议有关高级数据结构的资源

> ID：10072080
> 
> 赞同：0
> 
> 时间：2012-04-09T10:45:01.113
> 
> 标签：data-structures

请建议我学习高级数据结构主题的任何资源（视频讲座或书籍或网站）。更准确地说：二进制索引树、段树、后缀树、字典、哈希映射、绳索、尝试等。如果它在基于这些概念的编程竞赛中经常被问到示例问题，那么它是一个加分项。

PS：我尝试了一些关于同一主题的早期帖子，但它们没有满足我的查询，所以我不得不重新发布。确切地说，我不想要基本的数据结构主题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T10:49:03.913

如果您还没有，我建议您解决[计算机编程的艺术。](http://www-cs-faculty.stanford.edu/~uno/taocp.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T10:49:48.540

我认为数据结构和算法是联系在一起的。
所以我推荐“算法简介”
如果你觉得这本书太重了……“C 中的数据结构”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T15:56:15.157

找到这一切的最佳地点是互联网。只要继续搜索，您就会在每个主题上找到一些不错的东西。在这里您可以找到有关后缀树/数组的帮助：

[http://www.cs.ucdavis.edu/~gusfield/cs224f09/](http://www.cs.ucdavis.edu/~gusfield/cs224f09/)

段树：

[http://community.topcoder.com/tc?module=Static&d1=tutorials&d2=lowestCommonAncestor#Segment_Trees](http://community.topcoder.com/tc?module=Static&d1=tutorials&d2=lowestCommonAncestor#Segment_Trees)

二进制索引树：

[http://community.topcoder.com/tc?module=Static&d1=tutorials&d2=binaryIndexedTrees](http://community.topcoder.com/tc?module=Static&d1=tutorials&d2=binaryIndexedTrees)

如果我在其他主题上也发现了一些好东西，我会编辑我的帖子并添加它们。希望能帮助到你。:)

# objective-c - 将 NSString 提供给 segue 上的其他类

> ID：10072085
> 
> 赞同：0
> 
> 时间：2012-04-09T10:45:18.150
> 
> 标签：objective-c, ios, class

在一个类中，有一个包含所有朋友及其 ID 的列表。现在，当您单击 UITableView 中的项目时，会出现聊天 ( `[self performSegueWithIdentifier: @"showChat" sender: self];`)。但在 ChatViewController 类中，我需要从 FirstViewController 访问变量 userID。我尝试了在互联网上找到的所有内容，但总是出错或变量为空。在 FirstViewController 中是一个 NSString `userid`，那么如何在 ChatViewController.m 中访问它？我尝试制作变量`@public`，我尝试`@property`使用 readwrite 等等，但它不起作用。例如这个：

```
FirstViewController *fvc = [[FirstViewController alloc] initWithNibName:@"FirstViewController" bundle:nil];
userID = fvc.userID; 
```

只是给出一个空字符串..

感谢帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T11:04:36.150

您需要有`prepareForSegue:`方法来传递变量。

实现方法如下：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    // Make sure your segue name in storyboard is the same as this line
    if ([[segue identifier] isEqualToString:@"showChat"])
    {
        // Get reference to the destination view controller
        ChatViewController *cvc = [segue destinationViewController];

        // Set the object to the view controller here, like...
        cvc.userID = self.userID;
    }
} 
```

您可以在此处找到有关通过 segue 传递值的[教程。](http://www.raywenderlich.com/5191/beginning-storyboards-in-ios-5-part-2)

**更新**

类似的问题已经[在这里问过](https://stackoverflow.com/questions/7864371/ios5-how-to-pass-prepareforsegue-an-object)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-09T11:07:33.530

你在 ChatViewController 中编写这段代码吧。你在哪里创建了一个新的 FirstViewController 实例。这是新实例的用户 ID 始终为空的问题。

```
FirstViewController *fvc = [[FirstViewController alloc] initWithNibName:@"FirstViewController" bundle:nil];
userID = fvc.userID; 
```

您需要拥有 FirstViewController 的旧实例，或者当您将 FirstViewController 转到 ChatViewController 时，您必须将此值传递给 userID = fvc.userID;

```
 ChatViewController *cvc = [ChatViewController new];
    cvc.userID = self.userID;
[self.navigationController pushViewController:cvc animated:YES]; 
```

请记住，您已经在 ChatViewController 中设置了属性并合成了用户 ID。

# magento - 如何在 magento 中插入超过 300000 个产品

> ID：10072087
> 
> 赞同：0
> 
> 时间：2012-04-09T10:45:50.230
> 
> 标签：magento, range, product

我需要在 magento 中插入超过 300000 个产品。我已经插入了 250000 个产品。但在那之后我不知道为什么我不能再导入任何 .csv 文件了。我可以在 magento 导入工具中选择文件，但它会停止进一步工作并只显示加载图像。我需要尽快解决这个问题。

寻找你的答案。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T11:46:04.113

去

```
Magento admin->System->Index Management 
```

全选并将索引模式设置为手动。

**更新 1**

```
Go to System->Configuration->Developer->Log Settings 
```

值应该是：

```
Yes
system.log
exception.log 
```

保存配置。确保在 ftp 服务器上 (mage root)/var/log 是可写的，并且有 2 个可写文件：system.log 和 exception.log

您可以通过以下方式使它们可写： chmod 777 -R ./var 以防您处于法师根目录中。

之后再次开始导入，当系统挂起时，检查 var/log 目录 .log 文件是否有任何错误。

# struts2 - Struts 2 转换问题（在项目转换器上抛出 ClassNotFoundException）

> ID：10072094
> 
> 赞同：1
> 
> 时间：2012-04-09T10:46:58.060
> 
> 标签：struts2, type-conversion

我正在使用 Struts 2 类型转换将字符串转换为日期，反之亦然。

我创建了一个转换器

```
package gov.nrhm.fmis.infra;

import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.sql.Date;
import java.util.Map;  

import org.apache.struts2.util.StrutsTypeConverter;

import com.opensymphony.xwork2.conversion.TypeConversionException;

public class DateConverter extends StrutsTypeConverter {

    @Override
    public Object convertFromString(Map arg0, String[] arg1, Class arg2) {
        // TODO Auto-generated method stub    

        System.out.println("DateConverter converting string to date...");

        String dateStrInput = arg1[0];

        SimpleDateFormat formatter = new SimpleDateFormat("dd/mm/yyyy"); 

        try {
          java.util.Date parsedDate = formatter.parse(dateStrInput); 

          return new Date(parsedDate.getTime());    
        }
        catch(ParseException e) { 
          e.printStackTrace(); 
          throw new TypeConversionException("Invalid format...");  
        }

    }

    @Override
    public String convertToString(Map arg0, Object arg1) {
        // TODO Auto-generated method stub       

        System.out.println("DateConverter converting date to string...");

        Date date = (Date)arg1;       

        SimpleDateFormat formatter = new SimpleDateFormat("dd/mm/yyyy"); 

        String dateStrOutput = formatter.format(date);

        return dateStrOutput;     
    }

} 
```

我的操作包含一个必须由 Struts 2 转换的 bean infraBean。下面给出了 Bean：package gov.nrhm.fmis.pojo;

```
import gov.nrhm.fmis.common.util.MISConstants;
import gov.nrhm.fmis.common.util.WorkflowStatus;

import java.io.Serializable;
import java.sql.Date;                             
import java.sql.Types;    

import javax.persistence.Column;
import javax.persistence.Embedded;
import javax.persistence.Entity;
import javax.persistence.FetchType;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.JoinColumn;
import javax.persistence.ManyToOne;  
import javax.persistence.SequenceGenerator;
import javax.persistence.Table;

import org.hibernate.annotations.Parameter;
import org.hibernate.annotations.Type;

@Entity
@Table(name = "tt_infra_maintenance", schema = MISConstants.MIS_DB_SCHEMA_NAME) 
public class InfraMaintenanceBean implements Serializable {   

    @Id         
    @GeneratedValue(generator = "seq_tt_infra_id", strategy = GenerationType.AUTO)
    @SequenceGenerator(name = "seq_tt_infra_id", sequenceName = "nrhm_fmis.seq_infra_id")
    private Long infraId;     

    @Column(name="order_num")
    private String orderNum;  

    @Column(name="receipt_amount") 
    private Double receiptAmount;   

    @Column(name="receipt_date") 
    private Date receiptDate;

    @Column(name="exp_amount")
    private Double expAmount;

    private Date expDate;

    @Column(name="certificate_amount")
    private Double certAmount;  

    @ManyToOne(targetEntity = AgencyBean.class, fetch = FetchType.LAZY)
    @JoinColumn(name = "agency_id", insertable = true, updatable = false) 
    private AgencyBean agency; 

    @ManyToOne(targetEntity = QuarterBean.class, fetch = FetchType.LAZY)
    @JoinColumn(name = "quarter", insertable = true, updatable = false)
    private QuarterBean quarter;  

    @ManyToOne(targetEntity = FinancialYearBean.class, fetch = FetchType.LAZY)
    @JoinColumn(name = "fin_year_id", insertable = true, updatable = false)
    private FinancialYearBean finYear;             

    @Type(type = "org.hibernate.type.EnumType", parameters = {
            @Parameter(name = "enumClass", value = "gov.nrhm.fmis.common.util.WorkflowStatus"),
            @Parameter(name = "type", value = "" + Types.VARCHAR) })
    private WorkflowStatus workflowStatus = WorkflowStatus.MKR_WIP;  

    @Embedded    
    private Remarks remarks; 

    //I have not entered the getter and setter  
} 
```

现在我创建了 xwork-conversion.properties 文件。内容如下： java.sql.Date=gov.nrhm.fmis.infra.DateConverter

现在，当我启动 tomcat 时，它给出了 ClassNotFoundException，即 Struts 2 无法找到 DateConverter。我已经检查了 10 次正确的路径，没有问题。

StackTrace 信息如下：

```
[2012-04-09 14:14:26,023] main INFO  config.BeanSelectionProvider - Choosing bean (struts) for interface com.opensymphony.xwork2.ActionProxyFactory
[2012-04-09 14:14:26,023] main INFO  config.BeanSelectionProvider - Choosing bean (struts) for interface com.opensymphony.xwork2.conversion.ObjectTypeDeterminer
[2012-04-09 14:14:26,023] main INFO  config.BeanSelectionProvider - Choosing bean (struts) for interface org.apache.struts2.dispatcher.mapper.ActionMapper
[2012-04-09 14:14:26,023] main INFO  config.BeanSelectionProvider - Choosing bean (jakarta) for interface org.apache.struts2.dispatcher.multipart.MultiPartRequest
[2012-04-09 14:14:26,023] main INFO  config.BeanSelectionProvider - Choosing bean (struts) for class org.apache.struts2.views.freemarker.FreemarkerManager
[2012-04-09 14:14:26,023] main DEBUG config.BeanSelectionProvider - Choosing bean (struts) for class org.apache.struts2.views.velocity.VelocityManager to be loaded from the ObjectFactory
[2012-04-09 14:14:26,023] main INFO  config.BeanSelectionProvider - Choosing bean (struts) for interface org.apache.struts2.components.UrlRenderer
[2012-04-09 14:14:26,023] main INFO  config.BeanSelectionProvider - Choosing bean (struts) for interface com.opensymphony.xwork2.validator.ActionValidatorManager
[2012-04-09 14:14:26,023] main INFO  config.BeanSelectionProvider - Choosing bean (struts) for interface com.opensymphony.xwork2.util.ValueStackFactory
[2012-04-09 14:14:26,023] main INFO  config.BeanSelectionProvider - Choosing bean (struts) for interface com.opensymphony.xwork2.util.reflection.ReflectionProvider
[2012-04-09 14:14:26,023] main INFO  config.BeanSelectionProvider - Choosing bean (struts) for interface com.opensymphony.xwork2.util.reflection.ReflectionContextFactory
[2012-04-09 14:14:26,023] main INFO  config.BeanSelectionProvider - Choosing bean (struts) for interface com.opensymphony.xwork2.util.PatternMatcher
[2012-04-09 14:14:26,023] main INFO  config.BeanSelectionProvider - Choosing bean (struts) for interface org.apache.struts2.dispatcher.StaticContentLoader
[2012-04-09 14:14:26,023] main INFO  config.BeanSelectionProvider - Choosing bean (struts) for interface com.opensymphony.xwork2.UnknownHandlerManager
[2012-04-09 14:14:26,023] main DEBUG util.LocalizedTextUtil - Added default resource bundle 'org/apache/struts2/struts-messages' to default resource bundles = [org/apache/struts2/struts-messages, com/opensymphony/xwork2/xwork-messages]
[2012-04-09 14:14:26,023] main INFO  config.BeanSelectionProvider - Loading global messages from messages
[2012-04-09 14:14:26,033] main DEBUG util.LocalizedTextUtil - Added default resource bundle 'messages' to default resource bundles = [messages, org/apache/struts2/struts-messages, com/opensymphony/xwork2/xwork-messages]
[2012-04-09 14:14:26,053] main DEBUG impl.XWorkConverter - processing conversion file [xwork-conversion.properties]
[2012-04-09 14:14:26,053] main ERROR impl.XWorkConverter - Conversion registration error
java.lang.ClassNotFoundException: gov.nrhm.fmis.infra.DateConverter                                      
    at org.codehaus.plexus.classworlds.strategy.SelfFirstStrategy.loadClass(SelfFirstStrategy.java:50)
    at org.codehaus.plexus.classworlds.realm.ClassRealm.loadClass(ClassRealm.java:244)
    at org.codehaus.plexus.classworlds.realm.ClassRealm.loadClass(ClassRealm.java:230)
    at org.mortbay.jetty.webapp.WebAppClassLoader.loadClass(WebAppClassLoader.java:363)
    at org.mortbay.jetty.webapp.WebAppClassLoader.loadClass(WebAppClassLoader.java:325)
    at com.opensymphony.xwork2.util.ClassLoaderUtil.loadClass(ClassLoaderUtil.java:146)
    at com.opensymphony.xwork2.ObjectFactory.getClassInstance(ObjectFactory.java:96)
    at com.opensymphony.xwork2.ObjectFactory.buildBean(ObjectFactory.java:149)
    at com.opensymphony.xwork2.ObjectFactory.buildBean(ObjectFactory.java:139)
    at com.opensymphony.xwork2.conversion.impl.XWorkConverter.createTypeConverter(XWorkConverter.java:738)
    at com.opensymphony.xwork2.conversion.impl.XWorkConverter.loadConversionProperties(XWorkConverter.java:771)
    at com.opensymphony.xwork2.conversion.impl.XWorkConverter.loadConversionProperties(XWorkConverter.java:751)
    at com.opensymphony.xwork2.conversion.impl.XWorkConverter.setObjectFactory(XWorkConverter.java:184)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.opensymphony.xwork2.inject.ContainerImpl$MethodInjector.inject(ContainerImpl.java:293)
    at com.opensymphony.xwork2.inject.ContainerImpl$ConstructorInjector.construct(ContainerImpl.java:431)
    at com.opensymphony.xwork2.inject.ContainerBuilder$5.create(ContainerBuilder.java:207)
    at com.opensymphony.xwork2.inject.Scope$2$1.create(Scope.java:51)
    at com.opensymphony.xwork2.inject.ContainerImpl$ParameterInjector.inject(ContainerImpl.java:462)
    at com.opensymphony.xwork2.inject.ContainerImpl.getParameters(ContainerImpl.java:477)
    at com.opensymphony.xwork2.inject.ContainerImpl.access$000(ContainerImpl.java:34)
    at com.opensymphony.xwork2.inject.ContainerImpl$MethodInjector.inject(ContainerImpl.java:293)
    at com.opensymphony.xwork2.inject.ContainerImpl$ConstructorInjector.construct(ContainerImpl.java:431)
    at com.opensymphony.xwork2.inject.ContainerBuilder$5.create(ContainerBuilder.java:207)
    at com.opensymphony.xwork2.inject.Scope$2$1.create(Scope.java:51)
    at com.opensymphony.xwork2.inject.ContainerImpl$ParameterInjector.inject(ContainerImpl.java:462)
    at com.opensymphony.xwork2.inject.ContainerImpl.getParameters(ContainerImpl.java:477)
    at com.opensymphony.xwork2.inject.ContainerImpl.access$000(ContainerImpl.java:34)
    at com.opensymphony.xwork2.inject.ContainerImpl$MethodInjector.inject(ContainerImpl.java:293)
    at com.opensymphony.xwork2.inject.ContainerImpl$ConstructorInjector.construct(ContainerImpl.java:431)
    at com.opensymphony.xwork2.inject.ContainerBuilder$5.create(ContainerBuilder.java:207)
    at com.opensymphony.xwork2.inject.Scope$2$1.create(Scope.java:51)
    at com.opensymphony.xwork2.inject.ContainerImpl$ParameterInjector.inject(ContainerImpl.java:462)
    at com.opensymphony.xwork2.inject.ContainerImpl.getParameters(ContainerImpl.java:477)
    at com.opensymphony.xwork2.inject.ContainerImpl.access$000(ContainerImpl.java:34)
    at com.opensymphony.xwork2.inject.ContainerImpl$MethodInjector.inject(ContainerImpl.java:293)
    at com.opensymphony.xwork2.inject.ContainerImpl$ConstructorInjector.construct(ContainerImpl.java:431)
    at com.opensymphony.xwork2.inject.ContainerBuilder$5.create(ContainerBuilder.java:207)
    at com.opensymphony.xwork2.inject.Scope$2$1.create(Scope.java:51)
    at com.opensymphony.xwork2.inject.ContainerBuilder$3.create(ContainerBuilder.java:93)
    at com.opensymphony.xwork2.inject.ContainerBuilder$7.call(ContainerBuilder.java:487)
    at com.opensymphony.xwork2.inject.ContainerBuilder$7.call(ContainerBuilder.java:484)
    at com.opensymphony.xwork2.inject.ContainerImpl.callInContext(ContainerImpl.java:574)
    at com.opensymphony.xwork2.inject.ContainerBuilder.create(ContainerBuilder.java:484)
    at com.opensymphony.xwork2.config.impl.DefaultConfiguration.createBootstrapContainer(DefaultConfiguration.java:241)
    at com.opensymphony.xwork2.config.impl.DefaultConfiguration.reloadContainer(DefaultConfiguration.java:182)
    at com.opensymphony.xwork2.config.ConfigurationManager.getConfiguration(ConfigurationManager.java:55)
    at org.apache.struts2.dispatcher.Dispatcher.init_PreloadConfiguration(Dispatcher.java:374)
    at org.apache.struts2.dispatcher.Dispatcher.init(Dispatcher.java:418)
    at org.apache.struts2.dispatcher.ng.InitOperations.initDispatcher(InitOperations.java:69)
    at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.init(StrutsPrepareAndExecuteFilter.java:51)
    at org.mortbay.jetty.servlet.FilterHolder.doStart(FilterHolder.java:99)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:40)
    at org.mortbay.jetty.servlet.ServletHandler.initialize(ServletHandler.java:570)
    at org.mortbay.jetty.servlet.Context.startContext(Context.java:139)
    at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1191)
    at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:481)
    at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:434)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:40)
    at org.mortbay.jetty.handler.HandlerCollection.doStart(HandlerCollection.java:147)
    at org.mortbay.jetty.handler.ContextHandlerCollection.doStart(ContextHandlerCollection.java:120)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:40)
    at org.mortbay.jetty.handler.HandlerCollection.doStart(HandlerCollection.java:147)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:40)
    at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:117)
    at org.mortbay.jetty.Server.doStart(Server.java:210)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:40)
    at org.mortbay.jetty.plugin.Jetty6PluginServer.start(Jetty6PluginServer.java:134)
    at org.mortbay.jetty.plugin.AbstractJettyMojo.startJetty(AbstractJettyMojo.java:332)
    at org.mortbay.jetty.plugin.AbstractJettyMojo.execute(AbstractJettyMojo.java:277)
    at org.mortbay.jetty.plugin.AbstractJettyRunMojo.execute(AbstractJettyRunMojo.java:195)
    at org.mortbay.jetty.plugin.Jetty6RunMojo.execute(Jetty6RunMojo.java:183)
    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:107)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:319)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
    at org.apache.maven.cli.MavenCli.execute(MavenCli.java:534)
    at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
[2012-04-09 14:14:26,093] main INFO  spring.StrutsSpringObjectFactory - Initializing Struts-Spring integration...
[2012-04-09 14:14:26,093] main INFO  spring.SpringObjectFactory - Setting autowire strategy to name
[2012-04-09 14:14:26,093] main INFO  spring.StrutsSpringObjectFactory - ... initialized Struts-Spring integration successfully
[2012-04-09 14:14:26,093] main DEBUG impl.XWorkConverter - processing conversion file [xwork-conversion.properties]
[2012-04-09 14:14:26,093] main ERROR impl.XWorkConverter - Conversion registration error
java.lang.ClassNotFoundException: gov.nrhm.fmis.infra.DateConverter                                      
    at org.codehaus.plexus.classworlds.strategy.SelfFirstStrategy.loadClass(SelfFirstStrategy.java:50)
    at org.codehaus.plexus.classworlds.realm.ClassRealm.loadClass(ClassRealm.java:244)
    at org.codehaus.plexus.classworlds.realm.ClassRealm.loadClass(ClassRealm.java:230)
    at org.mortbay.jetty.webapp.WebAppClassLoader.loadClass(WebAppClassLoader.java:363)
    at org.mortbay.jetty.webapp.WebAppClassLoader.loadClass(WebAppClassLoader.java:325)
    at com.opensymphony.xwork2.util.ClassLoaderUtil.loadClass(ClassLoaderUtil.java:146)
    at com.opensymphony.xwork2.ObjectFactory.getClassInstance(ObjectFactory.java:96)
    at com.opensymphony.xwork2.spring.SpringObjectFactory.getClassInstance(SpringObjectFactory.java:212)
    at com.opensymphony.xwork2.spring.SpringObjectFactory.buildBean(SpringObjectFactory.java:132)
    at com.opensymphony.xwork2.ObjectFactory.buildBean(ObjectFactory.java:139)
    at com.opensymphony.xwork2.conversion.impl.XWorkConverter.createTypeConverter(XWorkConverter.java:738)
    at com.opensymphony.xwork2.conversion.impl.XWorkConverter.loadConversionProperties(XWorkConverter.java:771)
    at com.opensymphony.xwork2.conversion.impl.XWorkConverter.loadConversionProperties(XWorkConverter.java:751)
    at com.opensymphony.xwork2.conversion.impl.XWorkConverter.setObjectFactory(XWorkConverter.java:184)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.opensymphony.xwork2.inject.ContainerImpl$MethodInjector.inject(ContainerImpl.java:293)
    at com.opensymphony.xwork2.inject.ContainerImpl$ConstructorInjector.construct(ContainerImpl.java:431)
    at com.opensymphony.xwork2.inject.ContainerImpl.inject(ContainerImpl.java:492)
    at com.opensymphony.xwork2.inject.ContainerImpl$7.call(ContainerImpl.java:532)
    at com.opensymphony.xwork2.inject.ContainerImpl.callInContext(ContainerImpl.java:581)
    at com.opensymphony.xwork2.inject.ContainerImpl.inject(ContainerImpl.java:530)
    at com.opensymphony.xwork2.config.impl.LocatableFactory.create(LocatableFactory.java:32)
    at com.opensymphony.xwork2.inject.ContainerBuilder$4.create(ContainerBuilder.java:130)
    at com.opensymphony.xwork2.inject.Scope$2$1.create(Scope.java:51)
    at com.opensymphony.xwork2.inject.ContainerImpl$ParameterInjector.inject(ContainerImpl.java:462)
    at com.opensymphony.xwork2.inject.ContainerImpl.getParameters(ContainerImpl.java:477)
    at com.opensymphony.xwork2.inject.ContainerImpl.access$000(ContainerImpl.java:34)
    at com.opensymphony.xwork2.inject.ContainerImpl$MethodInjector.inject(ContainerImpl.java:293)
    at com.opensymphony.xwork2.inject.ContainerImpl$ConstructorInjector.construct(ContainerImpl.java:431)
    at com.opensymphony.xwork2.inject.ContainerImpl.inject(ContainerImpl.java:492)
    at com.opensymphony.xwork2.inject.ContainerImpl$7.call(ContainerImpl.java:532)
    at com.opensymphony.xwork2.inject.ContainerImpl.callInContext(ContainerImpl.java:581)
    at com.opensymphony.xwork2.inject.ContainerImpl.inject(ContainerImpl.java:530)
    at com.opensymphony.xwork2.config.impl.LocatableFactory.create(LocatableFactory.java:32)
    at com.opensymphony.xwork2.inject.ContainerBuilder$4.create(ContainerBuilder.java:130)
    at com.opensymphony.xwork2.inject.Scope$2$1.create(Scope.java:51)
    at com.opensymphony.xwork2.inject.ContainerImpl$ParameterInjector.inject(ContainerImpl.java:462)
    at com.opensymphony.xwork2.inject.ContainerImpl.getParameters(ContainerImpl.java:477)
    at com.opensymphony.xwork2.inject.ContainerImpl.access$000(ContainerImpl.java:34)
    at com.opensymphony.xwork2.inject.ContainerImpl$MethodInjector.inject(ContainerImpl.java:293)
    at com.opensymphony.xwork2.inject.ContainerImpl$ConstructorInjector.construct(ContainerImpl.java:431)
    at com.opensymphony.xwork2.inject.ContainerImpl.inject(ContainerImpl.java:492)
    at com.opensymphony.xwork2.inject.ContainerImpl$7.call(ContainerImpl.java:532)
    at com.opensymphony.xwork2.inject.ContainerImpl.callInContext(ContainerImpl.java:581)
    at com.opensymphony.xwork2.inject.ContainerImpl.inject(ContainerImpl.java:530)
    at com.opensymphony.xwork2.config.impl.LocatableFactory.create(LocatableFactory.java:32)
    at com.opensymphony.xwork2.inject.ContainerBuilder$4.create(ContainerBuilder.java:130)
    at com.opensymphony.xwork2.inject.Scope$2$1.create(Scope.java:51)
    at com.opensymphony.xwork2.inject.ContainerImpl$ParameterInjector.inject(ContainerImpl.java:462)
    at com.opensymphony.xwork2.inject.ContainerImpl.getParameters(ContainerImpl.java:477)
    at com.opensymphony.xwork2.inject.ContainerImpl.access$000(ContainerImpl.java:34)
    at com.opensymphony.xwork2.inject.ContainerImpl$MethodInjector.inject(ContainerImpl.java:293)
    at com.opensymphony.xwork2.inject.ContainerImpl$ConstructorInjector.construct(ContainerImpl.java:431)
    at com.opensymphony.xwork2.inject.ContainerImpl.inject(ContainerImpl.java:492)
    at com.opensymphony.xwork2.inject.ContainerImpl$7.call(ContainerImpl.java:532)
    at com.opensymphony.xwork2.inject.ContainerImpl.callInContext(ContainerImpl.java:581)
    at com.opensymphony.xwork2.inject.ContainerImpl.inject(ContainerImpl.java:530)
    at com.opensymphony.xwork2.config.impl.LocatableFactory.create(LocatableFactory.java:32)
    at com.opensymphony.xwork2.inject.ContainerBuilder$4.create(ContainerBuilder.java:130)
    at com.opensymphony.xwork2.inject.Scope$2$1.create(Scope.java:51)
    at com.opensymphony.xwork2.inject.ContainerImpl.getInstance(ContainerImpl.java:507)
    at com.opensymphony.xwork2.inject.ContainerImpl.getInstance(ContainerImpl.java:517)
    at com.opensymphony.xwork2.inject.ContainerImpl$9.call(ContainerImpl.java:548)
    at com.opensymphony.xwork2.inject.ContainerImpl.callInContext(ContainerImpl.java:574)
    at com.opensymphony.xwork2.inject.ContainerImpl.getInstance(ContainerImpl.java:546)
    at com.opensymphony.xwork2.config.impl.DefaultConfiguration.reloadContainer(DefaultConfiguration.java:186)
    at com.opensymphony.xwork2.config.ConfigurationManager.getConfiguration(ConfigurationManager.java:55)
    at org.apache.struts2.dispatcher.Dispatcher.init_PreloadConfiguration(Dispatcher.java:374)
    at org.apache.struts2.dispatcher.Dispatcher.init(Dispatcher.java:418)
    at org.apache.struts2.dispatcher.ng.InitOperations.initDispatcher(InitOperations.java:69)
    at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.init(StrutsPrepareAndExecuteFilter.java:51)
    at org.mortbay.jetty.servlet.FilterHolder.doStart(FilterHolder.java:99)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:40)
    at org.mortbay.jetty.servlet.ServletHandler.initialize(ServletHandler.java:570)
    at org.mortbay.jetty.servlet.Context.startContext(Context.java:139)
    at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1191)
    at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:481)
    at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:434)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:40)
    at org.mortbay.jetty.handler.HandlerCollection.doStart(HandlerCollection.java:147)
    at org.mortbay.jetty.handler.ContextHandlerCollection.doStart(ContextHandlerCollection.java:120)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:40)
    at org.mortbay.jetty.handler.HandlerCollection.doStart(HandlerCollection.java:147)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:40)
    at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:117)
    at org.mortbay.jetty.Server.doStart(Server.java:210)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:40)
    at org.mortbay.jetty.plugin.Jetty6PluginServer.start(Jetty6PluginServer.java:134)
    at org.mortbay.jetty.plugin.AbstractJettyMojo.startJetty(AbstractJettyMojo.java:332)
    at org.mortbay.jetty.plugin.AbstractJettyMojo.execute(AbstractJettyMojo.java:277)
    at org.mortbay.jetty.plugin.AbstractJettyRunMojo.execute(AbstractJettyRunMojo.java:195)
    at org.mortbay.jetty.plugin.Jetty6RunMojo.execute(Jetty6RunMojo.java:183)
    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:107)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:319)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
    at org.apache.maven.cli.MavenCli.execute(MavenCli.java:534)
    at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
[2012-04-09 14:14:26,103] main DEBUG providers.XmlConfigurationProvider - Loaded [BUILDER] {PackageConfig Name:struts-default namespace: parents:[]}
[2012-04-09 14:14:26,223] main DEBUG validator.DefaultValidatorFactory - Loading validator definitions.
[2012-04-09 14:14:26,373] main DEBUG interceptor.I18nInterceptor - new I18nInterceptor()
[2012-04-09 14:14:26,383] main DEBUG interceptor.I18nInterceptor - new I18nInterceptor()
[2012-04-09 14:14:26,393] main DEBUG interceptor.I18nInterceptor - new I18nInterceptor()
[2012-04-09 14:14:26,413] main DEBUG providers.XmlConfigurationProvider - Loaded [BUILDER] {PackageConfig Name:convention-default namespace: parents:[{PackageConfig Name:struts-default namespace: parents:[]}]}
[2012-04-09 14:14:26,413] main DEBUG providers.XmlConfigurationProvider - Loaded [BUILDER] {PackageConfig Name:spring-default namespace: parents:[]}
[2012-04-09 14:14:26,413] main DEBUG providers.XmlConfigurationProvider - Loaded [BUILDER] {PackageConfig Name:tiles-default namespace: parents:[{PackageConfig Name:struts-default namespace: parents:[]}]} 
```

如果有人能解决这个问题，我将不胜感激，因为我必须赶上最后期限。

（而且由于某些限制，我也不能使用注释）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T18:35:53.043

在 xwork-conversion.properties 文件中查找尾随空格。

我遇到了同样的问题`ClassNotFoundException`。我需要做的就是消除尾随空格。所以请检查您是否可能无意中写了：

```
'java.sql.Date=gov.nrhm.fmis.infra.DateConverter ' 
```

不敢相信它会有所作为，但确实如此！:-)

# iphone - 我怎样才能同时录制一首用 AVPlayer 和一个 wav 文件播放的歌曲？

> ID：10072097
> 
> 赞同：1
> 
> 时间：2012-04-09T10:47:05.170
> 
> 标签：iphone, objective-c, avaudioplayer, avplayer, avaudiorecorder

我正在开发一个应用程序，我必须在其中同时录制一首歌曲和一个 wav 文件。我正在播放来自 iPod 音乐库的歌曲，并且在视图控制器上我放置了一个点击按钮，点击该按钮一个 wav 文件开始但是当我开始使用 AVAudioRecorder 录制时，我的 wav 文件停止工作。这是我的 ipod 音乐库的代码：-

```
- (void) mediaPicker: (MPMediaPickerController *) mediaPicker didPickMediaItems: (MPMediaItemCollection *) collection 

{
MPMediaItem *item = [[collection items] objectAtIndex:0];
NSURL *url = [item valueForProperty:MPMediaItemPropertyAssetURL];

[self dismissModalViewControllerAnimated: YES];

// Play the item using AVPlayer

AVPlayerItem *playerItem = [[AVPlayerItem alloc] initWithURL:url];
player = [[AVPlayer alloc] initWithPlayerItem:playerItem];
[player play];  
} 
```

这是我播放wav文件的代码：-

```
-(void)playAudio:(NSString *)path
{
SystemSoundID soundIDWav;
NSString *sound = [NSString stringWithFormat:@"%@%@",[[NSBundle mainBundle] resourcePath], @"/wavFile.wav"];
NSURL *filePath = [NSURL fileURLWithPath:path isDirectory:NO];
AudioServicesCreateSystemSoundID((__bridge CFURLRef)filePath, &soundIDWav);
AudioServicesPlaySystemSound(soundIDWav);
} 
```

我正在通过 AVAudioRecorder 录制这两个...请帮助。在此先感谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T12:43:52.670

创建音频会话

```
audioSession.delegate = self;
[audioSession setCategory:AVAudioSessionCategoryPlayAndRecord error:nil];
[audioSession setActive:YES error:nil]; 
```

现在在 AVAudioPlayer 中播放您的文件，同时使用 AVAudioRecorder 开始录制

# c# - 将下拉列表中的值分配给 td 表

> ID：10072110
> 
> 赞同：0
> 
> 时间：2012-04-09T10:48:08.683
> 
> 标签：c#, asp.net

我在这样的asp页面中循环创建一个表：

```
 foreach (ListItem item in check.Items)
            {
                if (item.Selected)
                {

                    DropDownList drop = new DropDownList();

                    drop.Items.Add("1");
                    drop.Items.Add("2");

                    drop.DataValueField = "1";
                    drop.DataValueField = "2";

                    TableRow row = new TableRow();
                    TableCell celula = new TableCell();
                    celula.Style.Add("width", "200px");
                    celula.Style.Add("background-color", "red");

                    celula.RowSpan = 2;
                    celula.Text = item.Value;
                    TableCell celula1 = new TableCell();
                    celula1.Style.Add("background-color", "green");
                    celula1.Style.Add("width", "200px");

                    celula1.RowSpan = 2;

                    TableCell celula2 = new TableCell();
                    celula2.Style.Add("width", "200px");
                    celula2.Style.Add("background-color", "blue");
                    celula2.Text = "unu";
                    TableRow row1 = new TableRow();
                    TableCell cel = new TableCell();
                    cel.Text = "lalala";
                    cel.Style.Add("background-color", "brown");

                    celula1.Controls.Add(drop);
                    row.Cells.Add(celula);
                    row.Cells.Add(celula1);
                    row.Cells.Add(celula2);
                    row1.Cells.Add(cel);
                    this.tabel.Rows.Add(row);
                    this.tabel.Rows.Add(row1);

                }
            } 
```

对于我检查的每个值，都会创建一个新行，其中包含选中复选框的值、一个下拉列表和另外 2 个单元格。现在我想为我创建的每个下拉列表制作一些东西。因此，如果我为第一行选择 1，则会出现某些内容，如果我为另一行选择 1，则会出现其他内容。我做了一个 selectedindexchanged 但如果我从第一行中选择 1 它将显示在两行中。我如何分别参考我在循环中创建的每个下拉列表？我正在使用带有 c# 的 Asp.Net Web 应用程序

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T11:38:28.050

如下修改您的代码。

```
protected void Page_Load(object sender, EventArgs e)
{        
    LoadData();
} 
```

定义 LoadData 函数如下

```
 private void LoadData()
 {
     foreach (ListItem item in check.Items)
     {
         if (item.Selected)
         {

             DropDownList drop = new DropDownList();

             drop.Items.Add("1");
             drop.Items.Add("2");

             drop.DataValueField = "1";
             drop.DataValueField = "2";
             drop.AutoPostBack = true;

             // assign id property to dropdown.

             drop.ID = "ddl_" + item.value.ToString();

             // add event handled for dynamically generated dropdown      
             drop.SelectedIndexChanged += new EventHandler(ddl_SelectedIndexChanged);

             TableRow row = new TableRow();
             TableCell celula = new TableCell();

             // assing ID property to cell.

             celula.ID = "celula_" + item.value.ToString();
             celula.Style.Add("width", "200px");
             celula.Style.Add("background-color", "red");

             celula.RowSpan = 2;
             celula.Text = "item " + item.Value.ToString();
             TableCell celula1 = new TableCell();
             celula1.Style.Add("background-color", "green");
             celula1.Style.Add("width", "200px");

             celula1.RowSpan = 2;

             TableCell celula2 = new TableCell();
             celula2.Style.Add("width", "200px");
             celula2.Style.Add("background-color", "blue");
             celula2.Text = "unu";
             TableRow row1 = new TableRow();
             TableCell cel = new TableCell();
             cel.Text = "lalala";
             cel.Style.Add("background-color", "brown");

             celula1.Controls.Add(drop);
             row.Cells.Add(celula);
             row.Cells.Add(celula1);
             row.Cells.Add(celula2);
             row1.Cells.Add(cel);
             this.tabel.Rows.Add(row);
             this.tabel.Rows.Add(row1);
         }
     }

    } 
```

如下处理事件

```
protected void ddl_SelectedIndexChanged(object sender, EventArgs e)
{
    DropDownList dd = (DropDownList)sender;

    // you can get dropdown from table row over here.
    // process with it as per your requirement.

    string strdropdownID = ((System.Web.UI.Control)(dd)).ID;

    string id = strdropdownID.Split('_')[1].ToString();
    string tblcID = "celula_" + id.ToString();
    TableCell celula = (TableCell)tabel.FindControl(tblcID);
    celula.RowSpan = Convert.ToInt32(dd.SelectedValue);
} 
```

希望这对你有用......快乐的编码......

# sql-server - 如何保证某些行是唯一的（一种辅助键）SQL

> ID：10072114
> 
> 赞同：1
> 
> 时间：2012-04-09T10:48:29.757
> 
> 标签：sql-server

无论如何要在 SQL 中创建辅助键吗？

假设我有一个包含列的表`ID, SECID1, SECID2`

关键是`ID`，但我也希望它`SECID1, SECID2`作为关键，以保证我没有两个具有相同`SECID1`and的条目`SECID1`。

如果可能的话，我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T10:51:49.383

有可能，这里有文档和解释： [http ://www.w3schools.com/sql/sql_unique.asp](http://www.w3schools.com/sql/sql_unique.asp)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-09T10:50:50.600

是的，可以添加复合列唯一约束或唯一索引（下面我使用唯一约束）

```
CREATE TABLE YourTable
(
ID INT PRIMARY KEY, 
SECID1 INT, 
SECID2 INT,
UNIQUE(SECID1,SECID2)
) 
```

一定需要代理`ID`列吗？如果这是一个多对多关系表，我通常只有一个 2 列 PK（有时根据访问该表的查询，反向键顺序的唯一索引/约束）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-09T10:51:33.417

您可以创建任意数量的`UNIQUE KEY`约束来实现此类唯一性检查/约束。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-09T10:54:21.220

你想要的是一个[唯一的钥匙](http://msdn.microsoft.com/en-us/library/ms191166.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-09T12:48:07.150

1）您可以使用[UNIQUE NONCLUSTERED 约束](http://msdn.microsoft.com/en-us/library/ms177420.aspx)或[UNIQUE NONCLUSTERED 索引](http://msdn.microsoft.com/en-us/library/ms188783.aspx)：

```
CREATE TABLE MyTestTable
(
    ID  INT NOT NULL,
    A   INT NOT NULL,
    B   INT NOT NULL,
    C   INT NULL,
    CONSTRAINT PK_MyTestTable PRIMARY KEY(ID)
);
GO
ALTER TABLE MyTestTable
ADD CONSTRAINT UQ_MyTestTable_A_B UNIQUE NONCLUSTERED (A, B);
GO

CREATE UNIQUE NONCLUSTERED INDEX IUN_MyTestTable_A_B
ON MyTestTable(A, B);
GO
SELECT  i.name, i.index_id, i.type, i.type_desc, i.is_unique, i.is_primary_key
FROM    sys.indexes i
WHERE   i.object_id = OBJECT_ID('dbo.MyTestTable')
GO 
```

结果：

```
name                index_id type type_desc    is_unique is_primary_key
------------------- -------- ---- ------------ --------- --------------
PK_MyTestTable      1        1    CLUSTERED    1         1
UQ_MyTestTable_A_B  2        2    NONCLUSTERED 1         0
IUN_MyTestTable_A_B 3        2    NONCLUSTERED 1         0 
```

**注意 1**：您可以看到它`CONSTRAINT PK_MyTestTable`被创建为一个`CLUSTERED UNIQUE INDEX`并且`CONSTRAINT UQ_MyTestTable_A_B UNIQUE NONCLUSTERED`被创建为“非集群索引”。

**注 2（SQL 2008+）**`UNIQUE NONCLUSTERED CONSTRAINT` ：对我来说，在 SQL Server 2008 中，an和 an之间的主要区别`UNIQUE NONCLUSTERED INDEX`是能够[在 NC 索引中包含非索引列，](http://msdn.microsoft.com/en-us/library/ms190806.aspx)因此：

```
CREATE UNIQUE NONCLUSTERED INDEX IUN_MyTestTable_A_B_#_C
ON MyTestTable(A, B)
INCLUDE (C); --Nonindexed column
GO
SELECT  i.name, i.index_id, i.type, i.type_desc, i.is_unique, i.is_primary_key, i.is_disabled
FROM    sys.indexes i
WHERE   i.object_id = OBJECT_ID('dbo.MyTestTable')
GO 
```

结果：

```
name                    index_id    type type_desc    is_unique is_primary_key is_disabled
----------------------- ----------- ---- ------------ --------- -------------- -----------
PK_MyTestTable          1           1    CLUSTERED    1         1              0
UQ_MyTestTable_A_B      2           2    NONCLUSTERED 1         0              0
IUN_MyTestTable_A_B     3           2    NONCLUSTERED 1         0              0
IUN_MyTestTable_A_B_#_C 4           2    NONCLUSTERED 1         0              0 
```

您可以使用`CREATE UNIQUE NONCLUSTERED INDEX ... ... INCLUDE(...)`创建[覆盖索引](http://www.simple-talk.com/sql/learn-sql-server/using-covering-indexes-to-improve-query-performance/)并从执行计划中消除 KeyLookup 或 RID Lookup。

**注 3 (SQL 2008+)**：此外，您可能有[UNIQUE NONCLUSTERED FILTERED 索引](http://technet.microsoft.com/en-us/library/cc280372.aspx)。

```
CREATE TABLE Invoice
(
    InvoiceID INT PRIMARY KEY, 
    InvoiceDate DATE NOT NULL, 
    Total NUMERIC(8,2) NOT NULL,
    --Business rule: one invoice may have only one child invoice
    ParentInvoiceID INT NULL REFERENCES Invoice(InvoiceID)
);
GO
INSERT Invoice(InvoiceID, InvoiceDate, Total, ParentInvoiceID)
VALUES  (1, '2011-01-01', 1000, NULL), (2, '2011-02-02', 2000, NULL);
GO
SET ANSI_WARNINGS ON;
GO
--Business rule: one invoice may have only one child invoice
CREATE UNIQUE NONCLUSTERED INDEX IUF_Invoice_ParentInvoiceID
ON Invoice(ParentInvoiceID)
WHERE ParentInvoiceID IS NOT NULL;
GO
--OK
INSERT Invoice(InvoiceID, InvoiceDate, Total, ParentInvoiceID)
VALUES  (3, '2012-03-03', 1005, 1);
GO
--Error
INSERT Invoice(InvoiceID, InvoiceDate, Total, ParentInvoiceID)
VALUES  (4, '2012-04-04', 1005, 1);
GO 
```

结果：

```
Msg 2601, Level 14, State 1, Line 1
Cannot insert duplicate key row in object 'dbo.Invoice' with unique index 'IUF_Invoice_ParentInvoiceID'.
The statement has been terminated. 
```

2）您可以使用[UNIQUE CLUSTERED 约束](http://msdn.microsoft.com/en-us/library/ms177420.aspx)或[UNIQUE CLUSTERED 索引](http://msdn.microsoft.com/en-us/library/ms188783.aspx)：

```
IF OBJECT_ID('dbo.MyTestTable') IS NOT NULL
    DROP TABLE MyTestTable;
GO
CREATE TABLE MyTestTable
(
    ID  INT NOT NULL,
    A   INT NOT NULL,
    B   INT NOT NULL,
    C   INT NULL,
    CONSTRAINT PK_MyTestTable PRIMARY KEY NONCLUSTERED(ID)
);
GO
ALTER TABLE MyTestTable
ADD CONSTRAINT UQ_MyTestTable_A_B UNIQUE CLUSTERED (A, B);
GO
SELECT  i.name, i.index_id, i.type, i.type_desc, i.is_unique, i.is_primary_key, i.is_disabled
FROM    sys.indexes i
WHERE   i.object_id = OBJECT_ID('dbo.MyTestTable')
GO 
```

结果：

```
name               index_id    type type_desc     is_unique is_primary_key is_disabled
------------------ ----------- ---- ------------- --------- -------------- -----------
UQ_MyTestTable_A_B 1           1    CLUSTERED     1         0              0
PK_MyTestTable     2           2    NONCLUSTERED  1         1              0 
```

或者

```
ALTER TABLE MyTesttable
DROP CONSTRAINT UQ_MyTestTable_A_B;
GO
CREATE UNIQUE CLUSTERED INDEX IUN_MyTestTable_A_B2
ON MyTestTable(A, B);
GO
SELECT  i.name, i.index_id, i.type, i.type_desc, i.is_unique, i.is_primary_key, i.is_disabled
FROM    sys.indexes i
WHERE   i.object_id = OBJECT_ID('dbo.MyTestTable')
GO 
```

结果：

```
name                 index_id    type type_desc    is_unique is_primary_key is_disabled
-------------------- ----------- ---- ------------ --------- -------------- -----------
IUN_MyTestTable_A_B2 1           1    CLUSTERED    1         0              0
PK_MyTestTable       2           2    NONCLUSTERED 1         1              0 
```

# c++ - 为小部件存储画家是否有意义？

> ID：10072118
> 
> 赞同：2
> 
> 时间：2012-04-09T10:49:00.153
> 
> 标签：c++, qt

我有一个从 QFrame 派生的自定义小部件。我需要非常频繁地绘制它（基本上，每次鼠标移动都会更新一张图片）。我检查了 Qt Basic 绘图示例：他们重写了paintEvent，创建了一个画家并进行了绘画（画家在其生命周期结束时死去，面对最后的花括号）。

对于我的小型测试应用程序，性能不是问题，但我想更好地理解绘画操作（或者更确切地说：在经常调用的方法中实例化临时对象的成本），所以我想知道：如果自定义 QFrame 持有指向一个（永久）画家并将其用于绘画，这是否比每次调用paintEvent时创建和删除一个更好？

谢谢你的时间，路易丝

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T11:10:35.657

简单地说：别担心。

Qt 在幕后做了一些神奇的事情来快速创建 QPainter - 值得注意的是，状态的“重”部分（绘画引擎）由在同一绘画设备上运行的所有 QPainter 共享。（见[这里](http://swik.net/Trolltech/Trolltech+Labs+Blogs/Qt+4.4+and+painting+performance/b2ekm)。）

现在，如果您从处理程序调用一堆需要画家的`paintEvent`函数，请将它们的引用传递给 QPainter - 无需为每个单独的调用创建一个。
但一般来说，不用担心。使用您在示例中看到的相同习惯用法，并且仅在您实际*测量*实例化 QPainters 是代码中的瓶颈时尝试做“更聪明”的事情。

（这不仅限于 QPainter - Qt 为重物做了很多“幕后”共享、写入时复制类型操作。示例和教程展示了您应该如何使用 API（它们是通常质量很高）。遵循示例，仅在您有需要更复杂管理的特定原因/用例时才尝试超越它们。）

# iphone - Iphone - 如何使用公钥加密 NSData 并使用私钥解密？

> ID：10072124
> 
> 赞同：27
> 
> 时间：2012-04-09T10:49:28.650
> 
> 标签：iphone, nsdata, encryption

我正在将 UIImage 转换为 NSData。现在我需要使用公钥加密该 NSData，我需要使用私钥解密。请提供一步一步的过程。我需要使用哪种算法？有没有好的加密和解密库？还提供一些用于加密和解密的代码片段。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-09T11:13:29.183

我已经尝试**了 NSString 的 RSA 加密和解密**，您可以修改它并使其适用于**NSData**

将 Security.Framework 添加到您的项目包中。

**ViewController.h 代码如下：**

```
#import <UIKit/UIKit.h>
#import <Security/Security.h>

@interface ViewController : UIViewController
{
SecKeyRef publicKey;
SecKeyRef privateKey;
    NSData *publicTag;
    NSData *privateTag;
}
- (void)encryptWithPublicKey:(uint8_t *)plainBuffer cipherBuffer:(uint8_t *)cipherBuffer;
- (void)decryptWithPrivateKey:(uint8_t *)cipherBuffer plainBuffer:(uint8_t *)plainBuffer;
- (SecKeyRef)getPublicKeyRef;
- (SecKeyRef)getPrivateKeyRef;
- (void)testAsymmetricEncryptionAndDecryption;
- (void)generateKeyPair:(NSUInteger)keySize;
@end 
```

**ViewController.m 文件代码如下：**

```
#import "ViewController.h"

const size_t BUFFER_SIZE = 64;
const size_t CIPHER_BUFFER_SIZE = 1024;
const uint32_t PADDING = kSecPaddingNone;
static const UInt8 publicKeyIdentifier[] = "com.apple.sample.publickey";
static const UInt8 privateKeyIdentifier[] = "com.apple.sample.privatekey";

@implementation ViewController

-(SecKeyRef)getPublicKeyRef { 

    OSStatus sanityCheck = noErr; 
    SecKeyRef publicKeyReference = NULL;

    if (publicKeyReference == NULL) { 
        [self generateKeyPair:512];
                NSMutableDictionary *queryPublicKey = [[NSMutableDictionary alloc] init];

        // Set the public key query dictionary.
        [queryPublicKey setObject:(__bridge id)kSecClassKey forKey:(__bridge id)kSecClass];
        [queryPublicKey setObject:publicTag forKey:(__bridge id)kSecAttrApplicationTag];
        [queryPublicKey setObject:(__bridge id)kSecAttrKeyTypeRSA forKey:(__bridge id)kSecAttrKeyType];
        [queryPublicKey setObject:[NSNumber numberWithBool:YES] forKey:(__bridge id)kSecReturnRef];

        // Get the key.
        sanityCheck = SecItemCopyMatching((__bridge CFDictionaryRef)queryPublicKey, (CFTypeRef *)&publicKeyReference);

        if (sanityCheck != noErr)
        {
            publicKeyReference = NULL;
        }

//        [queryPublicKey release];

    } else { publicKeyReference = publicKey; }

    return publicKeyReference; }

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Release any cached data, images, etc that aren't in use.
}

- (void)testAsymmetricEncryptionAndDecryption {

    uint8_t *plainBuffer;
    uint8_t *cipherBuffer;
    uint8_t *decryptedBuffer;

    const char inputString[] = "How to Encrypt data with public key and Decrypt data with private key";
    int len = strlen(inputString);
    // TODO: this is a hack since i know inputString length will be less than BUFFER_SIZE
    if (len > BUFFER_SIZE) len = BUFFER_SIZE-1;

    plainBuffer = (uint8_t *)calloc(BUFFER_SIZE, sizeof(uint8_t));
    cipherBuffer = (uint8_t *)calloc(CIPHER_BUFFER_SIZE, sizeof(uint8_t));
    decryptedBuffer = (uint8_t *)calloc(BUFFER_SIZE, sizeof(uint8_t));

    strncpy( (char *)plainBuffer, inputString, len);

    NSLog(@"init() plainBuffer: %s", plainBuffer);
    //NSLog(@"init(): sizeof(plainBuffer): %d", sizeof(plainBuffer));
    [self encryptWithPublicKey:(UInt8 *)plainBuffer cipherBuffer:cipherBuffer];
    NSLog(@"encrypted data: %s", cipherBuffer);
    //NSLog(@"init(): sizeof(cipherBuffer): %d", sizeof(cipherBuffer));
    [self decryptWithPrivateKey:cipherBuffer plainBuffer:decryptedBuffer];
    NSLog(@"decrypted data: %s", decryptedBuffer);
    //NSLog(@"init(): sizeof(decryptedBuffer): %d", sizeof(decryptedBuffer));
    NSLog(@"====== /second test =======================================");

    free(plainBuffer);
    free(cipherBuffer);
    free(decryptedBuffer);
}

/* Borrowed from:
 * https://developer.apple.com/library/mac/#documentation/security/conceptual/CertKeyTrustProgGuide/iPhone_Tasks/iPhone_Tasks.html
 */
- (void)encryptWithPublicKey:(uint8_t *)plainBuffer cipherBuffer:(uint8_t *)cipherBuffer
{

    NSLog(@"== encryptWithPublicKey()");

    OSStatus status = noErr;

    NSLog(@"** original plain text 0: %s", plainBuffer);

    size_t plainBufferSize = strlen((char *)plainBuffer);
    size_t cipherBufferSize = CIPHER_BUFFER_SIZE;

    NSLog(@"SecKeyGetBlockSize() public = %lu", SecKeyGetBlockSize([self getPublicKeyRef]));
    //  Error handling
    // Encrypt using the public.
    status = SecKeyEncrypt([self getPublicKeyRef],
                           PADDING,
                           plainBuffer,
                           plainBufferSize,
                           &cipherBuffer[0],
                           &cipherBufferSize
                           );
    NSLog(@"encryption result code: %ld (size: %lu)", status, cipherBufferSize);
    NSLog(@"encrypted text: %s", cipherBuffer);
}

- (void)decryptWithPrivateKey:(uint8_t *)cipherBuffer plainBuffer:(uint8_t *)plainBuffer
{
    OSStatus status = noErr;

    size_t cipherBufferSize = strlen((char *)cipherBuffer);

    NSLog(@"decryptWithPrivateKey: length of buffer: %lu", BUFFER_SIZE);
    NSLog(@"decryptWithPrivateKey: length of input: %lu", cipherBufferSize);

    // DECRYPTION
    size_t plainBufferSize = BUFFER_SIZE;

    //  Error handling
    status = SecKeyDecrypt([self getPrivateKeyRef],
                           PADDING,
                           &cipherBuffer[0],
                           cipherBufferSize,
                           &plainBuffer[0],
                           &plainBufferSize
                           );
    NSLog(@"decryption result code: %ld (size: %lu)", status, plainBufferSize);
    NSLog(@"FINAL decrypted text: %s", plainBuffer);

}

- (SecKeyRef)getPrivateKeyRef {
    OSStatus resultCode = noErr;
    SecKeyRef privateKeyReference = NULL;
//    NSData *privateTag = [NSData dataWithBytes:@"ABCD" length:strlen((const char *)@"ABCD")];
//    if(privateKey == NULL) {
        [self generateKeyPair:512];
        NSMutableDictionary * queryPrivateKey = [[NSMutableDictionary alloc] init];

        // Set the private key query dictionary.
        [queryPrivateKey setObject:(__bridge id)kSecClassKey forKey:(__bridge id)kSecClass];
        [queryPrivateKey setObject:privateTag forKey:(__bridge id)kSecAttrApplicationTag];
        [queryPrivateKey setObject:(__bridge id)kSecAttrKeyTypeRSA forKey:(__bridge id)kSecAttrKeyType];
        [queryPrivateKey setObject:[NSNumber numberWithBool:YES] forKey:(__bridge id)kSecReturnRef];

        // Get the key.
        resultCode = SecItemCopyMatching((__bridge CFDictionaryRef)queryPrivateKey, (CFTypeRef *)&privateKeyReference);
        NSLog(@"getPrivateKey: result code: %ld", resultCode);

        if(resultCode != noErr)
        {
            privateKeyReference = NULL;
        }

//        [queryPrivateKey release];
//    } else {
//        privateKeyReference = privateKey;
//    }

    return privateKeyReference;
}

#pragma mark - View lifecycle

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
    privateTag = [[NSData alloc] initWithBytes:privateKeyIdentifier length:sizeof(privateKeyIdentifier)];
    publicTag = [[NSData alloc] initWithBytes:publicKeyIdentifier length:sizeof(publicKeyIdentifier)];
    [self testAsymmetricEncryptionAndDecryption];

}

- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
}

- (void)viewWillDisappear:(BOOL)animated
{
    [super viewWillDisappear:animated];
}

- (void)viewDidDisappear:(BOOL)animated
{
    [super viewDidDisappear:animated];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
    } else {
        return YES;
    }
}

- (void)generateKeyPair:(NSUInteger)keySize {
    OSStatus sanityCheck = noErr;
    publicKey = NULL;
    privateKey = NULL;

//  LOGGING_FACILITY1( keySize == 512 || keySize == 1024 || keySize == 2048, @"%d is an invalid and unsupported key size.", keySize );

    // First delete current keys.
//  [self deleteAsymmetricKeys];

    // Container dictionaries.
    NSMutableDictionary * privateKeyAttr = [[NSMutableDictionary alloc] init];
    NSMutableDictionary * publicKeyAttr = [[NSMutableDictionary alloc] init];
    NSMutableDictionary * keyPairAttr = [[NSMutableDictionary alloc] init];

    // Set top level dictionary for the keypair.
    [keyPairAttr setObject:(__bridge id)kSecAttrKeyTypeRSA forKey:(__bridge id)kSecAttrKeyType];
    [keyPairAttr setObject:[NSNumber numberWithUnsignedInteger:keySize] forKey:(__bridge id)kSecAttrKeySizeInBits];

    // Set the private key dictionary.
    [privateKeyAttr setObject:[NSNumber numberWithBool:YES] forKey:(__bridge id)kSecAttrIsPermanent];
    [privateKeyAttr setObject:privateTag forKey:(__bridge id)kSecAttrApplicationTag];
    // See SecKey.h to set other flag values.

    // Set the public key dictionary.
    [publicKeyAttr setObject:[NSNumber numberWithBool:YES] forKey:(__bridge id)kSecAttrIsPermanent];
    [publicKeyAttr setObject:publicTag forKey:(__bridge id)kSecAttrApplicationTag];
    // See SecKey.h to set other flag values.

    // Set attributes to top level dictionary.
    [keyPairAttr setObject:privateKeyAttr forKey:(__bridge id)kSecPrivateKeyAttrs];
    [keyPairAttr setObject:publicKeyAttr forKey:(__bridge id)kSecPublicKeyAttrs];

    // SecKeyGeneratePair returns the SecKeyRefs just for educational purposes.
    sanityCheck = SecKeyGeneratePair((__bridge CFDictionaryRef)keyPairAttr, &publicKey, &privateKey);
//  LOGGING_FACILITY( sanityCheck == noErr && publicKey != NULL && privateKey != NULL, @"Something really bad went wrong with generating the key pair." );
    if(sanityCheck == noErr  && publicKey != NULL && privateKey != NULL)
    {
        NSLog(@"Successful");
    }
//  [privateKeyAttr release];
//  [publicKeyAttr release];
//  [keyPairAttr release];
}

@end 
```

如果您需要更多帮助，请告诉我。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-04-09T12:16:48.797

**NSData+AESCrypt.h**

```
#import <Foundation/Foundation.h>

@interface NSData (AESCrypt)

- (NSData *)AES256EncryptWithKey:(NSString *)key;
- (NSData *)AES256DecryptWithKey:(NSString *)key;

+ (NSData *)dataWithBase64EncodedString:(NSString *)string;
- (id)initWithBase64EncodedString:(NSString *)string;

- (NSString *)base64Encoding;
- (NSString *)base64EncodingWithLineLength:(NSUInteger)lineLength;

- (BOOL)hasPrefixBytes:(const void *)prefix length:(NSUInteger)length;
- (BOOL)hasSuffixBytes:(const void *)suffix length:(NSUInteger)length; 
```

**NSData+AESCrypt.m**

```
#import "NSData+AESCrypt.h"
#import <CommonCrypto/CommonCryptor.h>

static char encodingTable[64] = 
{
    'A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P',
    'Q','R','S','T','U','V','W','X','Y','Z','a','b','c','d','e','f',
    'g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v',
    'w','x','y','z','0','1','2','3','4','5','6','7','8','9','+','/'
};

@implementation NSData (AESCrypt)

- (NSData *)AES256EncryptWithKey:(NSString *)key{
  // 'key' should be 32 bytes for AES256, will be null-padded otherwise
  char keyPtr[kCCKeySizeAES256 + 1]; // room for terminator (unused)
  bzero( keyPtr, sizeof( keyPtr ) ); // fill with zeroes (for padding)

  // fetch key data
  [key getCString:keyPtr maxLength:sizeof( keyPtr ) encoding:NSUTF8StringEncoding];

  NSUInteger dataLength = [self length];

  //See the doc: For block ciphers, the output size will always be less than or 
  //equal to the input size plus the size of one block.
  //That's why we need to add the size of one block here
  size_t bufferSize = dataLength + kCCBlockSizeAES128;
  void *buffer = malloc( bufferSize );

  size_t numBytesEncrypted = 0;
  CCCryptorStatus cryptStatus = CCCrypt( kCCEncrypt, kCCAlgorithmAES128, kCCOptionPKCS7Padding,
                                      keyPtr, kCCKeySizeAES256,
                                      NULL /* initialization vector (optional) */,
                                      [self bytes], dataLength, /* input */
                                      buffer, bufferSize, /* output */
                                      &numBytesEncrypted );
  if( cryptStatus == kCCSuccess )
  {
    //the returned NSData takes ownership of the buffer and will free it on deallocation
    return [NSData dataWithBytesNoCopy:buffer length:numBytesEncrypted];
  }

  free( buffer ); //free the buffer
  return nil;
}

- (NSData *)AES256DecryptWithKey:(NSString *)key{

  // 'key' should be 32 bytes for AES256, will be null-padded otherwise
  char keyPtr[kCCKeySizeAES256+1]; // room for terminator (unused)
  bzero( keyPtr, sizeof( keyPtr ) ); // fill with zeroes (for padding)

  // fetch key data
  [key getCString:keyPtr maxLength:sizeof( keyPtr ) encoding:NSUTF8StringEncoding];

  NSUInteger dataLength = [self length];

  //See the doc: For block ciphers, the output size will always be less than or 
  //equal to the input size plus the size of one block.
  //That's why we need to add the size of one block here
  size_t bufferSize = dataLength + kCCBlockSizeAES128;
  void *buffer = malloc( bufferSize );

 size_t numBytesDecrypted = 0;
 CCCryptorStatus cryptStatus = CCCrypt( kCCDecrypt, kCCAlgorithmAES128, kCCOptionPKCS7Padding,
                                      keyPtr, kCCKeySizeAES256,
                                      NULL /* initialization vector (optional) */,
                                      [self bytes], dataLength, /* input */
                                      buffer, bufferSize, /* output */
                                      &numBytesDecrypted );

  if( cryptStatus == kCCSuccess )
  {
    //the returned NSData takes ownership of the buffer and will free it on deallocation
    return [NSData dataWithBytesNoCopy:buffer length:numBytesDecrypted];
  }

  free( buffer ); //free the buffer
  return nil;
}

#pragma mark -

+ (NSData *)dataWithBase64EncodedString:(NSString *)string
{
   return [[[NSData allocWithZone:nil] initWithBase64EncodedString:string] autorelease];
}

- (id)initWithBase64EncodedString:(NSString *)string
{
   NSMutableData *mutableData = nil;

   if( string )
   {
      unsigned long ixtext = 0;
      unsigned long lentext = 0;
      unsigned char ch = 0;
      unsigned char inbuf[4], outbuf[3];
      short i = 0, ixinbuf = 0;
      BOOL flignore = NO;
      BOOL flendtext = NO;
      NSData *base64Data = nil;
      const unsigned char *base64Bytes = nil;

      // Convert the string to ASCII data.
      base64Data = [string dataUsingEncoding:NSASCIIStringEncoding];
      base64Bytes = [base64Data bytes];
      mutableData = [NSMutableData dataWithCapacity:base64Data.length];
      lentext = base64Data.length;

      while( YES )
     {
         if( ixtext >= lentext ) break;
         ch = base64Bytes[ixtext++];
         flignore = NO;

         if( ( ch >= 'A' ) && ( ch <= 'Z' ) ) ch = ch - 'A';
         else if( ( ch >= 'a' ) && ( ch <= 'z' ) ) ch = ch - 'a' + 26;
         else if( ( ch >= '0' ) && ( ch <= '9' ) ) ch = ch - '0' + 52;
         else if( ch == '+' ) ch = 62;
         else if( ch == '=' ) flendtext = YES;
         else if( ch == '/' ) ch = 63;
         else flignore = YES;

         if( ! flignore )
         {
           short ctcharsinbuf = 3;
           BOOL flbreak = NO;

           if( flendtext ) 
           {
              if( ! ixinbuf ) break;
              if( ( ixinbuf == 1 ) || ( ixinbuf == 2 ) ) ctcharsinbuf = 1;
              else ctcharsinbuf = 2;
              ixinbuf = 3;
              flbreak = YES;
           }

            inbuf [ixinbuf++] = ch;

            if( ixinbuf == 4 ) 
           {
              ixinbuf = 0;
              outbuf [0] = ( inbuf[0] << 2 ) | ( ( inbuf[1] & 0x30) >> 4 );
              outbuf [1] = ( ( inbuf[1] & 0x0F ) << 4 ) | ( ( inbuf[2] & 0x3C ) >> 2 );
              outbuf [2] = ( ( inbuf[2] & 0x03 ) << 6 ) | ( inbuf[3] & 0x3F );

              for( i = 0; i < ctcharsinbuf; i++ )
                 [mutableData appendBytes:&outbuf[i] length:1];
           }

           if( flbreak )  break;
        }
     }
 }

  self = [self initWithData:mutableData];
  return self;
}

#pragma mark -

   - (NSString *)base64Encoding
   {
       return [self base64EncodingWithLineLength:0];
   }

   - (NSString *)base64EncodingWithLineLength:(NSUInteger)lineLength
   {
       const unsigned char   *bytes = [self bytes];
       NSMutableString *result = [NSMutableString stringWithCapacity:self.length];
       unsigned long ixtext = 0;
       unsigned long lentext = self.length;
       long ctremaining = 0;
       unsigned char inbuf[3], outbuf[4];
       unsigned short i = 0;
       unsigned short charsonline = 0, ctcopy = 0;
       unsigned long ix = 0;

       while( YES )
       {
           ctremaining = lentext - ixtext;
           if( ctremaining <= 0 ) break;

           for( i = 0; i < 3; i++ )
           {
               ix = ixtext + i;
               if( ix < lentext ) inbuf[i] = bytes[ix];
               else inbuf [i] = 0;
           }

           outbuf [0] = (inbuf [0] & 0xFC) >> 2;
           outbuf [1] = ((inbuf [0] & 0x03) << 4) | ((inbuf [1] & 0xF0) >> 4);
           outbuf [2] = ((inbuf [1] & 0x0F) << 2) | ((inbuf [2] & 0xC0) >> 6);
           outbuf [3] = inbuf [2] & 0x3F;
           ctcopy = 4;

           switch( ctremaining )
           {
              case 1:
                 ctcopy = 2;
                 break;
              case 2:
                 ctcopy = 3;
                 break;
           }

          for( i = 0; i < ctcopy; i++ )
              [result appendFormat:@"%c", encodingTable[outbuf[i]]];

          for( i = ctcopy; i < 4; i++ )
              [result appendString:@"="];

          ixtext += 3;
          charsonline += 4;

          if( lineLength > 0 )
          {
             if( charsonline >= lineLength )
             {
                 charsonline = 0;
                 [result appendString:@"\n"];
             }
          }
     }

     return [NSString stringWithString:result];
  }
#pragma mark -
 - (BOOL)hasPrefixBytes:(const void *)prefix length:(NSUInteger)length
 {
     if( ! prefix || ! length || self.length < length ) return NO;
      return ( memcmp( [self bytes], prefix, length ) == 0 );
  }

  - (BOOL)hasSuffixBytes:(const void *)suffix length:(NSUInteger)length
  {
      if( ! suffix || ! length || self.length < length ) return NO;
       return ( memcmp( ((const char *)[self bytes] + (self.length - length)), suffix, length ) == 0  );
  } 
```

您可以使用以下代码：

```
NSData *encryptedData = [UIImagePNGRepresentation(/*your image*/) AES256EncryptWithKey:/*your enc key*/];

NSData *plainData = [encryptedData AES256DecryptWithKey:/*your enc key*/];

UIImage *img =[UIImage imageWithData:plainData]; 
```

# string - Scala 中 java.lang.String 的引用相等

> ID：10072130
> 
> 赞同：5
> 
> 时间：2012-04-09T10:50:04.680
> 
> 标签：string, scala, reference, equality, referenceequals

人们会期望，即使字符串是不可变的，对于 Scala 中的 java.lang.String 对象，值相等和引用相等也不相同。这意味着两个 string-holding `val`s 不应该是引用相等的，即使它们的字符串相同。但这是我在 2.9.1.final REPL 中得到的：

```
scala> val s1 = "a"; val s2 = "a"
s1: java.lang.String = a
s2: java.lang.String = a

scala> s1 eq s2
res0: Boolean = true 
```

知道为什么结果不是`false`吗？`List("a")`与而不是`"a"`按预期进行的相同实验。该`eq`方法在[AnyRef](http://www.scala-lang.org/api/current/scala/AnyRef.html)中被标记为 final 。有没有专门为`String`or完成的编译器魔法`java.lang.String`？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-09T10:56:12.420

是的，它是编译器的魔法。具体来说，它被称为*实习*。Java 也这样做，这只是出于效率原因，例如内存使用和允许在不比较每个字符的情况下进行比较。这是[关于它的 Wikipedia 文章](http://en.wikipedia.org/wiki/String_interning)。您还可以使用该`intern()`方法手动实习字符串。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-09T11:08:25.003

来自[Java 语言规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.10.5)：

> 字符串文字是对类实例的引用`String`（第 4.3.1 节、第 4.3.3 节）。
> 
> 此外，**字符串字面量始终指代同一个 class 实例`String`**。这是因为字符串文字 - 或者更一般地说，作为常量表达式值的字符串（第 15.28 节） - 是“内部的”，以便使用方法共享唯一实例`String.intern`。

# php - 如何在控制器中构建干净的重定向？

> ID：10072134
> 
> 赞同：0
> 
> 时间：2012-04-09T10:50:36.090
> 
> 标签：php, zend-framework, redirect

现在，当我想在控制器中执行操作后重定向时，我需要编写：

```
function anActionAction(){
    $this->redirect("a string url like mysite/controller/action");
} 
```

有没有办法以更清洁的方式构建 url？

例如在视图脚本中，如果我想获得一个动作，我会使用带有数组的 url 帮助器，例如：

```
echo $this->url(array('controller'=>'snippets','action'=>'index')); 
```

那么有没有办法在重定向方法中传递数组而不是字符串？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T11:10:08.873

使用[**重定向器**操作助手](http://framework.zend.com/manual/en/zend.controller.actionhelpers.html#zend.controller.actionhelpers.redirector)：

```
$this->_helper->redirector($action, $controller = null, $module = null, $params = null) 
```

这将间接调用`gotoSimple()`此操作助手的方法。

# java - eclipse中的SWTBot-如何找到项目的弹出菜单（右键菜单）

> ID：10072136
> 
> 赞同：2
> 
> 时间：2012-04-09T10:50:44.977
> 
> 标签：java, swtbot

在我的 SWTBot 测试中，我试图打开（并单击）右键单击项目资源管理器中打开的项目时出现的菜单（包含新建、重构、导入等的菜单）

我试着用

```
`treeItem.contextMenu("Refactor").menu("Rename...").click(); 
```

得到了`WidgetNotFoundException`。

请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T09:50:31.693

这是目前 SWTBot 中的一个已知错误...

您无法访问上下文菜单的子菜单。见[https://bugs.eclipse.org/bugs/show_bug.cgi?id=261360](https://bugs.eclipse.org/bugs/show_bug.cgi?id=261360)

2个选择：

*   ... 按快捷键（SWT.ALT | SWT.SHIFT，'R'）
*   bot.menu("重构").menu("重命名...").click();

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-05T16:42:18.183

您可以使用现在的本机功能：

```
new SWTBotMenu(ContextMenuHelper.contextMenu(bot.tree(), "Refactor", "Rename...")).click(); 
```

# android - 如何将 webview 添加到 listview

> ID：10072140
> 
> 赞同：-2
> 
> 时间：2012-04-09T10:50:57.973
> 
> 标签：android

我想创建一个列表视图，其中包含每一行上的 webview。Webviews 被动态添加到相对布局中。我该怎么做？请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T13:29:08.793

这不太可能运作良好。您通常不能将可滚动的内容（例如 a `WebView`）放入 a 的行中`ListView`。

如果您尝试显示的 HTML 有限，请使用`TextViews`行，将您的 HTML 转换为`TextView`可以通过`Html.fromHtml()`.

# wpf - 窗口标题和任务栏 wpf 的两个不同图标

> ID：10072143
> 
> 赞同：2
> 
> 时间：2012-04-09T10:51:10.500
> 
> 标签：wpf

有什么方法可以为相同的窗口标题栏和任务栏设置两个不同的图标吗？任何设置图标大小的方法都不同于 16*16 提前谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T11:39:18.903

Ico 文件可以包含不同大小的帧（如 16x16 和 32x32）。窗口标题栏和任务栏将选择适当大小的图标 ( [http://msdn.microsoft.com/en-us/library/system.windows.window.icon.aspx](http://msdn.microsoft.com/en-us/library/system.windows.window.icon.aspx) )。

而且在 WPF 中，您可以根据需要修改窗口镶边（窗口边框和标准按钮），因此您可以在那里显示您想要的任何图标（[http://blogs.msdn.com/b/wpfsdk/archive/2008/ 09/08/custom-window-chrome-in-wpf.aspx](http://blogs.msdn.com/b/wpfsdk/archive/2008/09/08/custom-window-chrome-in-wpf.aspx) )

# java - 可以在equals和hashcode中使用getter吗？

> ID：10072144
> 
> 赞同：7
> 
> 时间：2012-04-09T10:51:15.103
> 
> 标签：java

我有下面的代码覆盖了 equals() 和 hashcode() 方法。

```
public boolean equals(Object obj)
 {
   if (obj == null)
     return false;
   if (!(obj instanceof Name))
     return false;
   Name name = (Name) obj;
   return this.name.equals(name.name);
 }

 public int hashCode()
 {
   return name.hashCode();
 } 
```

我可以在这里替换以下 2 行：

```
return this.name.equals(name.name);
return name.hashCode(); 
```

和

```
return this.getName().equals(name.getName());
return getName().hashCode(); 
```

我的意思是我可以直接在equals和hashcode方法中使用getter而不是使用属性吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T10:52:57.600

**是**的，你可以使用这个，

`hashcode()`并且`equals()`是字段方法，它们可以直接访问私有成员，但是如果访问器方法中包装了一些逻辑怎么办，所以使用访问器方法访问字段总是安全的

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-11-09T15:00:53.177

`equals() & hashCode()`是的，我强烈建议在实现中使用 getter 。据我所知，这不会以任何方式伤害您。

当您比较两个代理对象时，没有 getter 的实现`equals()`将无法为您提供正确的结果。

*例如：*如果您尝试比较底层 hibernate dao 返回的两个代理对象，您将永远不会从您的方法中收到*true*`equals()`，即使它们是相同的对象。

**更新**

> 使用 getter 方法而不是直接访问。这是因为作为 other 传递的对象实例可能是代理对象，而不是实际实例。要初始化此代理，您需要使用 getter 方法访问它。

检查[此](http://www.ideyatech.com/effective-java-equals-and-hashcode/)以获取更多信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-09T11:00:05.383

你可以，但你为什么要？选项 A：编译器将其内联，因此无论如何您最终都会引用该字段。选项 B：编译器没有内联调用，即您引入了一个额外的方法调用。

易读性也有影响——如果该`name`字段可以在类中直接访问，为什么不直接引用它呢？我觉得这更容易阅读，但有些人觉得它不一致。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T10:52:59.067

是的，你为什么不能呢？

将来，对于这样的事情，我建议您尝试一下。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-09T10:54:35.900

是的你可以。为什么不？你有什么疑问？

# ravendb - Include的正确使用方法

> ID：10072152
> 
> 赞同：3
> 
> 时间：2012-04-09T10:52:10.723
> 
> 标签：ravendb

我有两个类（它们保存在 RavenDB 中）：

```
public class Game
{
    public int Id { get; set; }
    public int HomeTeamId { get; set; }
    public int AwayTeamId { get; set; }
    public DateTime GameTime { get; set; }
    public string Location { get; set; }
    public int HomeTeamScore { get; set; }
    public int AwayTeamScore { get; set; }
}

public class Team
{
    public int Id { get; set; }
    public string Name { get; set; }
    public int? PositionInGroup { get; set; }
    public int? PositionInPlayOffs { get; set; }
    public string Group { get; set; }
} 
```

我想输出所有带有团队名称、日期和位置的游戏，如下所示：

> 波兰 - 希腊，2012-06-08 18:00:00 - 华沙​​ (POL)

我知道我可以在 Game 实体中包含主队名称和客队名称，但我不想这样做，而是想使用 Include RavenDB 包含功能。

我写了这段代码：

```
// Print the schedule
var games = session
    .Query<Game>()
    .Customize(c => c.Include<Game, Team>(i => i.Id))
    .OrderBy(x => x.GameTime)
    .ToList();

foreach (var g in games)
{
    var homeTeam = session.Load<Team>(g.HomeTeamId);
    var awayTeam = session.Load<Team>(g.AwayTeamId);
    Console.WriteLine(
        string.Format("{0} - {1}, {2} - {3}",
        homeTeam.Name,
        awayTeam.Name,
        g.GameTime,
        g.Location));
} 
```

如果我理解正确，当我在循环中加载主队和客队时，不应该向服务器发出获取请求？但是当我查看日志时，我可以看到：

> 请求 #1 654：GET - 0 毫秒 - Euro2012 - 200 - /docs/teams/34
> 
> 找到带有关键“teams/34”的文档

向服务器发出的第一个请求如下所示：

> 请求 #1 648：GET - 5 毫秒 - Euro2012 - 200 - /indexes/dynamic/Games?query=&start=0&pageSize=128&aggregation=None&sort=GameTime&include=Id(teams/)

所以看起来团队应该被“包括在内”

难道我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T14:03:15.260

我不熟悉查询的 Customize() 部分。你可以自己做 Include() 。这里有一个例子：

[http://inaspiralarray.blogspot.com/2012/03/keeping-domain-model-pure-with-ravenb.html](http://inaspiralarray.blogspot.com/2012/03/keeping-domain-model-pure-with-ravendb.html)

Include() 是一个 IRavenQueryable，它位于 Raven.Client.Lightweight 程序集中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-09T18:45:59.890

您包含错误的 ID，您需要：

```
.Customize(c => c.Include<Game, Team>(i => i.AwayTeamId ))
.Customize(c => c.Include<Game, Team>(i => i.HomeTeamId )) 
```

# mysql - 循环外键约束失败mysql

> ID：10072153
> 
> 赞同：2
> 
> 时间：2012-04-09T10:52:35.200
> 
> 标签：mysql, sql, database, database-design

如果我在 InnoDB 引擎上设计了一个数据库，并且我有 3 个无法删除的表，因为每个表都说“外键约束失败”——这是否意味着设计错误？

请看下面的结构：

```
CREATE TABLE IF NOT EXISTS `account` (
  `account_id` smallint(5) unsigned NOT NULL AUTO_INCREMENT,
  PRIMARY KEY (`account_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;

CREATE TABLE IF NOT EXISTS `identity` (
  `identity_id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `user_id` int(10) unsigned DEFAULT NULL,
  `account_id` smallint(5) unsigned DEFAULT NULL,
  PRIMARY KEY (`identity_id`),
  KEY `fk_details1` (`user_id`),
  KEY `fk_account1` (`account_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;

CREATE TABLE IF NOT EXISTS `user` (
  `user_id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `login` varchar(64) NOT NULL DEFAULT '',
  `password` varchar(32) NOT NULL DEFAULT '',
  `default_identity_id` int(10) unsigned DEFAULT NULL,
  PRIMARY KEY (`user_id`),
  UNIQUE KEY `login_UNIQUE` (`login`),
  KEY `fk_identity1` (`default_identity_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;

--
-- Constraints for table `identity`
--
ALTER TABLE `identity`
  ADD CONSTRAINT `fk_details1` FOREIGN KEY (`user_id`) REFERENCES `user` (`user_id`) ON DELETE CASCADE ON UPDATE CASCADE,
  ADD CONSTRAINT `fk_account1` FOREIGN KEY (`account_id`) REFERENCES `account` (`account_id`) ON DELETE CASCADE ON UPDATE CASCADE;

--
-- Constraints for table `user`
--
ALTER TABLE `user`
  ADD CONSTRAINT `fk_identity1` FOREIGN KEY (`default_identity_id`) REFERENCES `identity` (`identity_id`) ON DELETE CASCADE ON UPDATE CASCADE; 
```

我怀疑问题出在 default_identity_id ... 我应该将它作为标志移动到身份表吗？

请指教！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T08:34:47.423

由于 ypercube 没有创建答案，我会的。

[MySQL 数据库设计。在 1to1 表中插入行](https://stackoverflow.com/questions/6691366/mysql-database-design-inserting-rows-in-1to1-tables/6692054#6692054)

这回答了我的问题 - 它比仅仅将表格相互指向要好得多和灵活得多。谢谢。

# javascript - 如何在 OS X 上安装 Javascript 运行时解释器？

> ID：10072159
> 
> 赞同：17
> 
> 时间：2012-04-09T10:53:28.197
> 
> 标签：javascript, macos, terminal

安装 OS X Xcode 后，可以使用“>ruby somefile.rb”命令在终端中运行 ruby​​ 代码（或使用 run 命令从 TextWrangler 内部）。您还可以在终端中运行 ruby​​ 解释器并在单行中键入代码，同时解释器保留变量对象。

想要 Javascript 的相同可能性。我必须在 OS X 上安装什么（如果有的话）才能拥有该功能？不是在寻找将在 Terminal.app 中运行的解释器这样的 IDE？

我假设这是 Stackoverflow 允许的问题，基于其他关于各种语言的 IDE 的允许问题，例如： [Mac OS X 上 Python 的好的 IDE 是什么？](https://stackoverflow.com/questions/893162/whats-a-good-ide-for-python-on-mac-os-x)

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-04-09T11:15:12.207

OS X 自带的 JavaScriptCore 框架中有一个 Javascript 解释器。这个解释器叫做 jsc，可以在以下路径找到：

```
 /System/Library/Frameworks/JavaScriptCore.framework/Versions/Current/Helpers/jsc 
```

有一个内置函数 ，`quit()`它将退出交互模式。

如果您想让它更易于使用，我建议创建一个指向路径中某个位置的符号链接，例如：

```
sudo ln -s /System/Library/Frameworks/JavaScriptCore.framework/Versions/Current/Helpers/jsc /usr/local/bin 
```

这将在`/usr/local/bin`.

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-04-09T11:05:20.753

[节点.js](https://nodejs.org/)。它是 V8 引擎 + 库 + REPL。

虽然 Node 通常用于 web/网络相关的应用程序，但其核心只是一个普通的 JS 引擎，甚至可以用于 shell 脚本。

您可以[从安装程序](https://nodejs.org/en/download/)安装它，`brew`或者仅从`./configure && make`Node.js 的 tarball 安装它。

还有[犀牛](https://www.mozilla.org/rhino/)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-09T11:05:23.187

v8。它是 google chrome 中使用的 javascript 引擎。不过，您必须为 mac OS X 编译它。[这里](http://kourge.net/node/123)有一个很好的教程。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-09T11:07:12.443

你有两个选择：

1.  在浏览器中使用控制台：chrome、safari、firefox 等浏览器自带控制台，可以运行 javascript。在 chrome 上打开打开的控制台。按**CTRL** + **SHIFT** + **J**

2.  安装 Nodejs：正如其他人指出的那样，尝试[http://nodejs.org/](http://nodejs.org/)使用它可以在类似于 irb 的终端应用程序中运行 javascript

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-01-04T09:18:20.123

在 macOS Big Sur 上，您可以通过添加本地用户二进制文件夹轻松访问您的 OS JavaScript 解释器。`/usr/local/bin`您可以在其中创建一个新的符号链接

```
% ln -s /System/Library/Frameworks/JavaScriptCore.framework/Versions/A/Helpers/jsc /usr/local/bin/ 
```

然后，您只需键入即可访问操作系统的 JavaScript 解释器

```
% jsc 
```

*提示：不要忘记，没有`console`对象，你可以`debug(...)`使用*

# android - Android 光标适配器布局问题。？

> ID：10072160
> 
> 赞同：1
> 
> 时间：2012-04-09T10:53:32.373
> 
> 标签：android, android-layout, android-adapter, custom-adapter

在我的应用程序中，我使用的是适配器。我击中了这里。实际上我需要将**xml/filename.xml**显示如下。

我想显示如下代码。

我已经手动完成了，但是有没有像我们所说的布局这样的方法。 `xml >layout> filename.xml`它显示

如何将这样的编码写入 xml 文件到 res/xml/..？

```
<cursor-adapter xmlns:android="http://schemas.android.com/apk/res/android"
      xmlns:app="http://schemas.android.com/apk/res/com.example.android.xmladapters"
      app:uri="content://com.android.contacts/contacts"
      app:selection="has_phone_number=1"
      app:layout="@layout/contact_item">

      <bind app:from="display_name" app:to="@id/name" app:as="string" />
      <bind app:from="starred" app:to="@id/star" app:as="drawable">
            <map app:fromValue="0" app:toValue="@android:drawable/star_big_off" />
            <map app:fromValue="1" app:toValue="@android:drawable/star_big_on" />
      </bind>
      <bind app:from="_id" app:to="@id/name" app:as="com.example.android.xmladapters.ContactPhotoBinder" />

    </cursor-adapter> 
```

# php - youtube api json feed php错误

> ID：10072163
> 
> 赞同：0
> 
> 时间：2012-04-09T10:53:45.397
> 
> 标签：php, api, youtube, json

好的，所以我想要实现的是使用 youtube api 来获取一些提要。提要是 json-c 编码的。所以我尝试使用 file_get_contents 方法将 json feedurl 转换为字符串并进行 json 解码。这是代码片段：

```
$feedURL = "https://gdata.youtube.com/feeds/api/videos?q=surfing&v=2&alt=jsonc";
$json = file_get_contents($feedURL,0,null,null);
$result = json_decode($json, true);
echo $result;
$id = $result->{'data'}->{'items'}[0]->{'id'};
echo "The video id is: ".$id; 
```

但我收到这个愚蠢的错误警告：file_get_contents(https://gdata.youtube.com/feeds/api/videos?q=surfing&v=2&alt=jsonc) [function.file-get-contents]: failed to open stream: Connection在第 13 行的 /opt/lampp/htdocs/date.php 中被拒绝 注意：尝试在第 16 行的 /opt/lampp/htdocs/date.php 中获取非对象的属性 注意：尝试在第 16 行获取非对象的属性第 16 行的 /opt/lampp/htdocs/date.php 注意：尝试在第 16 行的 /opt/lampp/htdocs/date.php 中获取非对象的属性

该文件的名称是 date.php，我在代理服务器后面的 linux 机器上的 localhost 上运行它。

我认为连接被拒绝的事情表明可能存在IP冲突或其他问题。我不知道。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T10:58:43.310

尝试：

```
 $url = 'http://www';

 $proxy = 'tcp://xxx:8080';

 $context = array(
    'http' => array(
        'proxy' => $proxy,
        'request_fulluri' => True,
        ),
    );

 $context = stream_context_create($context);

 $body = file_get_contents($url, False, $context); 
```

```
 foreach($result["data"]["items"] as $val) {
  echo $val["id"]."<br/>";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T11:00:25.847

您似乎正在关闭连接的代理。已经有了file_get_contents通过代理访问问题的答案

[代理后面的file_get_contents？](https://stackoverflow.com/questions/1336262/file-get-contents-behind-a-proxy)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T11:07:27.980

您可以使用`curl`

```
$feedURL = "https://gdata.youtube.com/feeds/api/videos?q=surfing&v=2&alt=jsonc";
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $feedURL);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
curl_setopt($ch,CURLOPT_SSL_VERIFYPEER,false);
//curl_setopt($ch,CURLOPT_PROXY,"x.x.x.x:8888"); // Proxy Use
$json = curl_exec($ch);

$result = json_decode($json, true);
foreach($result['data']['items'] as $items)
{
    var_dump($items['id']);
} 
```

# c# - OleDbAdapter SelectCommand Excel c#

> ID：10072165
> 
> 赞同：1
> 
> 时间：2012-04-09T10:53:51.237
> 
> 标签：c#, excel, oledbcommand, oledbdataadapter

我想从 Excel 文件中唯一的一张表中查询数据。

```
 MyCommand = new System.Data.OleDb.OleDbDataAdapter("select * from [Sheet1$] ", MyConnection); 
```

此行查询来自 Sheet1 的数据。问题是我不知道输入文件中工作表的名称是什么。有什么方法可以编写命令字符串，以便无论名称是什么，它都可以访问工作表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T06:19:29.610

如果您在工作簿中**始终**只有一张工作表，那么您可以通过首先获取工作表名称然后将其放入查询中来做到这一点：

```
DataTable dt = MyConnection.GetOleDbSchemaTable(OleDbSchemaGuid.Tables, null);
string sheetName = dt.Rows[0]["TABLE_NAME"].ToString(); 
```

如果您有多个工作表，那么这将返回**按字母顺序排列**的第一个工作表。

# android - 在android中将DB项目从英语转换为西班牙语

> ID：10072171
> 
> 赞同：1
> 
> 时间：2012-04-09T10:54:23.687
> 
> 标签：android, locale

我想开发一个支持多语言的安卓应用程序。如果用户更改语言，我如何在运行时将数据库中的数据转换为相应的语言。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T11:46:56.077

创建基于语言环境的 strings.xml 文件。为此，您需要为相应的语言环境创建文件夹，例如，当您想要德语时，创建一个名为“res/values-de/”的文件夹，并保留带有翻译的 strings.xml 文件在其中。要测试应用程序，要对其进行测试，我们可以通过 Home > Menu > Settings > Locale & text > Select locale 设置不同的语言环境。

希望这会帮助你。

# networking - 开始使用 802.11p WAVE for VANET

> ID：10072174
> 
> 赞同：2
> 
> 时间：2012-04-09T10:54:38.330
> 
> 标签：networking, wifi, wireless, ns2, 802.11p

我正计划构建一个基于车辆间通信的应用程序。

最初我想使用笔记本电脑和移动电话上可用的标准 wifi，但后来我遇到了 WAVE 协议（IEEE 802.11p）（因为它是专门为此类应用设计的）。

1.  我可以在 802.11p wifi 上使用笔记本电脑/手机吗？如果不，
2.  我可以获得支持此协议的硬件吗（请提供更多信息）？如果不，
3.  我可以使用标准 Wifi 并构建应用程序并假设它可以在 802.11p 协议上轻松实现（我不知道协议之间的差异）吗？如果不，
4.  应该模拟我的应用程序（可能使用 ns2）？（这是我最后的选择）

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T16:04:34.923

有某些 wifi 卡可以将收音机调到 802.11p 频率，例如这个：http: [//www.mikrotik.com/pdf/R52.pdf](http://www.mikrotik.com/pdf/R52.pdf)是一个便宜的选择。从软件方面：

*   最近版本的 Linux 中的 ath5k 驱动程序已经支持具有必要 PHY 设置的半速率通道
*   您还需要修改 MAC 以符合 802.11p
*   您需要一个兼容 802.11p 的法规数据库
*   能够将无线电切换到 802.11p 模式的东西（例如通过修改 iw）。

WAVE 还假设了一个特定的协议栈，从网络层的角度来看，使用 IPv6 或 WSMP。如何开发 WAVE 应用程序是一个很好的问题，我不知道您可以使用任何公共 SDK 或实现。

# php - 使用动态命名空间重新声明类

> ID：10072175
> 
> 赞同：1
> 
> 时间：2012-04-09T10:54:52.047
> 
> 标签：php, namespaces

我正在尝试找到一种使用闭包“重新声明”类的方法。这是我到目前为止所得到的：

* * *

我有两个相同的简单类，除了命名空间。test2.php 中的命名空间称为“bla”，在 new.php 中称为“newname”。除此之外，它们完全相同。

```
namespace bla; //test2.php
class A
{
    public function __construct()
    { }

    public function bla()
    {
        echo '[A bla]';
    }
} 
```

* * *

```
include ("new.php");
include ("test2.php");

use newname\A as A; // <-- dynamic

$a = new A();
$a->bla(); 
```

所以这段代码只是简单地执行'new.php'类中的方法，而不是'test2.php'中的类。这实际上是我需要的。但我的问题是代码的最后一部分。通常我会使用命名空间：

```
$a = new bla\A(); //Defined in 'test2.php'
$a->bla(); 
```

但是由于“用作”声明，我必须将该行更改为：

```
$a = new A(); //Defined in 'test2.php'
$a->bla(); 
```

所以在“A()”前面没有命名空间。

有没有办法保留“bla\A()”命名空间（在 test2.php 中定义），但它仍然从“new.php”调用方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T11:04:02.807

在这种情况下，要从每个类调用，您应该编写 =>

```
$bla = new bla/A("");
$bla->bla();        // to call from bla.php 
```

和二等

```
$newname = new newname/A("");
$newname->something(); // to call from newname.php 
```

它会起作用，您不需要使用 use 关键字过度使用脚本

将类写在一个具有这样命名空间的文件中也是一种好习惯 =>

```
namespace bla{
     class A{
        // content
     }
}

namespace newname{
     class A{
        // content
     }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T11:05:26.363

正如评论中所说，它不是“关闭”主题，而只是动态命名空间主题。

我认为您不能`use`动态使用 tue 关键字。但是，PHP 是一种动态语言，您可以通过元编程动态选择所需的类：

```
$wantedClass = 'myWantedNamespace\MyWantedClass';
$instance    = new $wantedClass(); 
```

# lucene.net - 搜索已过时？

> ID：10072177
> 
> 赞同：0
> 
> 时间：2012-04-09T10:55:03.000
> 
> 标签：lucene.net

```
Hits hits = searcher.Search(query); 
```

> 警告 1 'Lucene.Net.Search.Hits' 已过时：'参见 Searcher.Search(Query, int), Searcher.Search(Query, Filter, int) 和 Searcher.Search(Query, Filter, int, Sort)' \档案.cs 65

那么我将如何搜索？使用 TopDocs？

如果是的话

```
TopDocs hits = searcher.Search(query, 10); 
```

我怎么知道它找到了多少个节点？以及如何获得单曲？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T12:36:53.183

1- `Hits`已弃用，因为它会在每读取 100 个结果时静默进行后台搜索，以便能够进行文档缓存。因此，它在速度上是低效的。

2- TopDocs 有`TotalHits`字段

3-`indexReader.Document(td.ScoreDocs[i].Doc)`

# c# - 我可以检查事务性 msmq 队列中的项目吗

> ID：10072178
> 
> 赞同：4
> 
> 时间：2012-04-09T10:55:02.967
> 
> 标签：c#, .net, msmq, transactional

我正在使用事务性 msmq 队列。在添加新项目之前，我需要检查队列中的项目和尚未提交的项目。

我可以检查队列中的所有项目，但是如何检查已出列但仍未提交的项目？

**更新：** 我有几个从属实例和一个主服务器。每个从站可以上传数据（大文件）到主站并从主站下载新数据。

Slaves 在 msmq 队列中注册 master 上的上传和下载操作，然后启动事务，出队操作，对大文件进行操作，如果可以，则提交事务，否则回滚事务。

我必须拒绝所有上传注册，直到我确定该文件已完全上传，因为多个奴隶不必同时上传一个文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T11:06:35.927

对我来说，这听起来更像是您的客户端/服务结构的**架构问题**，而不是 MSMQ 相关的问题。

**如果我在数据库上使用事务，我会直观地期望所有客户端只有在提交后**才能看到任何更改。在您的场景中，MSMQ 的行为就像我对 DBMS 的期望一样。

总而言之，据我了解您的任务，我认为您可能*看错了位置*。**考虑在服务中的**某处跟踪上传。如果您需要确保客户端一次不会上传多个文件，您应该在其中实现这一点。

您可能的选择取决于您的环境（我们还不知道）。您可以使用某种缓存来管理客户端连接，或者您可以使用锁来同步上传，或者将您的服务配置为仅接受 X 连接，或者...

# sparql - 无法使用 sparql 从 dbpedia 查询

> ID：10072181
> 
> 赞同：2
> 
> 时间：2012-04-09T10:55:37.517
> 
> 标签：sparql, semantic-web

我想使用他们的 sparql 接口从 dbpedia 查询 (http://dbpedia.org/sparql)

我想得到的摘要

```
http://dbpedia.org/page/Herbie_Mann 
```

我知道我必须调用抽象本体

```
http://dbpedia.org/ontology/abstract 
```

我最后的 sparsql 查询如下：

```
SELECT ?abstract
WHERE {
{ <http://dbpedia.org/page/Herbie_Mann> <http://dbpedia.org/ontology/abstract> ?abstract}
} 
```

但我什么也看不见。

请帮助我，因为我是语义网的初学者！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-09T11:25:43.720

不要使用`<.../page/Herbie_Mann>`但是`<.../resource/Herbie_Mann>`。第一个 URI 只是描述艺术家的 HTML 页面的 URL。您对艺术家本人的属性感兴趣。第二个 URI 是标识艺术家的 URI。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-09T11:26:41.363

试试这个查询，其中 Herbie Mann 的 URI 包含 /resource 而不是 /page：

```
SELECT ?abstract
WHERE { 
  <http://dbpedia.org/resource/Herbie_Mann> <http://dbpedia.org/ontology/abstract>?abstract
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-09T11:29:14.537

得到了我的答案

问题 ：

```
http://dbpedia.org/page/Herbie_Mann 
```

它应该是

```
http://dbpedia.org/resource/Herbie_Mann 
```

# asp.net - QueryString 在请求中不可见

> ID：10072188
> 
> 赞同：1
> 
> 时间：2012-04-09T10:55:56.680
> 
> 标签：asp.net, httphandler, webforms, webrequest

我正在编写 HttpHandler，但无法访问 Request 对象中的 QueryString（QueryString 为空）。我不确定是编码问题还是其他问题。

URL 示例（方法是 GET ）

[http://localhost/reportserver?%2fReports.Test%2fUserView&rs:SessionID=xz1mcizuiahcfcew2nklm4i3&rs:command=Render&rs:Format=RGDI&rc:Page=1&rc:RGDIVersion=10.0.2&rc:Toolbar=false&rs:ErrorResponseAsXml=true&rs:AllowNewSessions=false](http://localhost/reportserver?%2fReports.Test%2fUserView&rs:SessionID=xz1mcizuiahcfcew2nklm4i3&rs:command=Render&rs:Format=RGDI&rc:Page=1&rc:RGDIVersion=10.0.2&rc:Toolbar=false&rs:ErrorResponseAsXml=true&rs:AllowNewSessions=false)

网络配置

<httpHandlers> <add verb="*" path="*" type="ProxyWeb.MyProxy"/> </httpHandlers>

感谢帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T10:23:04.853

我的问题的解决方案是从站点中删除所有页面。由于某些原因，页面会弄乱到处理程序的路由。

# iphone - 未找到 CorePlot-CocoaTouch.h 文件

> ID：10072195
> 
> 赞同：1
> 
> 时间：2012-04-09T10:57:15.837
> 
> 标签：iphone, ios4, ios5

我正在开发一个使用 coreplot 绘制图形的应用程序。当我在开发项目的系统上运行项目时，没有问题。当我将它移动到其他系统然后进行构建时，它显示以下错误

未找到 CorePlot-CocoaTouch.h 文件

我该如何解决？

我也无法创建这个项目的 ipa。我现在正在从构建产品中创建它。任何帮助表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-10-16T11:06:45.673

如果您使用的是 CorePlot 2，请改用此导入：

```
#import <CorePlot/ios/CorePlot.h> 
```

我发现工作的其他解决方案是添加

```
use_frameworks! 
```

到你的 Podfile。这样您就可以像这样使用导入：

```
#import <CorePlot/CorePlot.h> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T11:27:39.590

您需要设置标题搜索路径和库搜索路径。
请参阅 [此链接](http://web.archive.org/web/20120420110857/http://www.switchonthecode.com/tutorials/using-core-plot-in-an-iphone-application)以了解如何执行此操作..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-31T09:53:13.770

还有一个解决方案是添加标题搜索路径/core-plot-master/framework，然后当出现其他错误时，在添加的搜索路径前面选择递归，这对我有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-23T20:06:55.557

我正在使用 Xcode 10 并且收到此错误，对我有用的是设置“用户标题搜索路径”与“标题搜索路径”具有相同的值，我使用的是旧版本的 CorePlot，他们导入了 CorePlot -CocoaTouch.h 使用引号，因此我相信 XCode 正在寻找 @User Header 搜索路径来搜索头文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-01T05:08:05.980

对于 core-plot 版本 2.4，我这样做是为了让它编译：

1.  在“targets->Build settings->Header Search Paths”中，我添加了 core-plot/CocoaPods

2.  我更换了：

    #import "CorePlot-CocoaTouch.h"

和：

```
#import "CorePlot.h" 
```

# asp.net-mvc - 消除静态属性——我可以使用哪些模式？

> ID：10072198
> 
> 赞同：0
> 
> 时间：2012-04-09T10:57:31.370
> 
> 标签：asp.net-mvc, asp.net-mvc-3, session, c#-4.0

我目前有一种类型，我注入到我的控制器中，用于获取和设置会话数据。

我使用它是为了获得相关的会话信息，`_sessionData.Username`而不是使用`Session["username"]`.

我想在我的所有视图中使用此会话信息，并且以前会通过使 SessionData 成员静态而不是将 SessionData 类注入我的控制器来完成此操作。

我想避免使用静态成员以及必须将对象传递给每个控制器中的视图。

哪种模式最适合这种情况？你如何解决同样的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T11:03:41.687

为什么不直接使用 Session["username"]？您可以将静态调用包装在这样的实例中：

```
public class MySessionClass
{
    public string GetSessionValue(String value)
    {
        return Session[value];
    }
} 
```

您可以获得实例的维护和灵活性，然后可以在测试中模拟，而无需重新重写 Session 类

**更新**

至于在您的视图中使用您的实例，是什么阻止您编写代码块并对其进行更新和使用？您应该能够像 MVC 中的任何其他代码块一样针对它编写代码。**但是**，我建议不要这样做，因为它违背了分层架构的目的。您可以像访问任何 HTML 页面一样直接访问会话，也可以将其作为对象从控制器传递。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T11:55:17.077

依赖注入将在这里为您提供帮助。采用任何依赖注入框架并将其与您的 MVC 应用程序集成。例如，要将 Ninject 集成到您的 MVC 应用程序中，请参阅此[博客文章](http://www.planetgeek.ch/2010/11/13/official-ninject-mvc-extension-gets-support-for-mvc3/)。

一旦您将 DI 框架与您的应用程序集成。向 DI 框架注册 SessionData 类。根据您的方案为 SessionData 类选择一个有效的生命周期。如果您查看这些 DI 框架，它们会提供多种生命周期配置，例如每次调用实例、每次会话、单例。

现在在任何你想要的地方注入 SessionData 依赖项。对于控制器，您可以创建一个包含此依赖项的 BaseController 作为公共属性，例如

```
[Inject]
public SessionData SessionContext {get;set;} 
```

对于 View 部分，您需要查看传递的[强类型模型](http://msdn.microsoft.com/en-us/library/dd394711.aspx)。这个过程在这里是相似的。创建一个 BaseModel，在此处保留一个 SessionData 属性，其余的由 DI 框架完成。这里的最后一步是将此模型传递给渲染的每个视图。

# java - Glassfish - 重新加载 META-INF/resources 文件夹中的 XHTML/JSP 文件

> ID：10072200
> 
> 赞同：0
> 
> 时间：2012-04-09T10:57:44.747
> 
> 标签：java, jakarta-ee, jsf-2, glassfish-3, servlet-3.0

servlet 3.0 规范允许将静态资源（如 js/css/jsp/xhtml 文件）打包到位于 WEB-INF 文件夹中的 jar 的 META-INF/resources 文件夹中。

如果我想在战争已经部署时对那些 XHTML 文件进行更改，我该怎么做？

我已经尝试在上下文根目录下创建具有相同文件夹结构的相同 XHTML 文件的副本，但它似乎不起作用。

我尝试通过 jconsole 查看动态重新加载 xhtml 文件，但找不到任何可以帮助我的东西

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T16:38:05.953

在玩了一会儿之后，我意识到您需要先将具有相同文件夹结构的文件复制到上下文根目录，然后重新启动服务器。对上下文根中的 xhtml 文件的后续编辑现在将获取对它们的更改，而无需重新启动服务器。

# delphi - Delphi XE2中的UTF8Encode

> ID：10072201
> 
> 赞同：2
> 
> 时间：2012-04-09T10:57:46.130
> 
> 标签：delphi, unicode, delphi-7, delphi-xe2

我正在尝试使用转换字符串

```
Var
 encode:ansistring;
begin
  encode:=UTF8Encode('اختبار');
  showmessage(encode);
end; 
```

它在 Delphi 7 中运行良好

但在 Delphi XE2 中，它将文本作为问号发送

有什么建议么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-09T11:51:34.110

在您的 Delphi 7 代码中，您可能编写了如下内容：

```
var
  UTF8: string;
  InputString: WideString;//I guess that you used WideString
.....
UTF8 := UTF8Encode(InputString); 
```

这在 Delphi 7 中很好，`string`其中`AnsiString`. 在 XE2 中，泛型`string`类型现在`UnicodeString`是 UTF-16 编码的别名。这意味着当上面的代码由 XE2 编译时，返回的 UTF-8 编码缓冲区`UTF8Encode`被解释为 UTF-16 编码文本。这种不匹配是导致你的字符串充满问号的原因。

所以，如果你只是写

```
var
  UTF8: AnsiString;
  InputString: string;//aliased to UnicodeString
.....
UTF8 := UTF8Encode(InputString); 
```

那么您将拥有与 Delphi 7 代码相同的行为。

但是，这不是在 Unicode Delphi 中执行此操作的方法。相反，您应该使用该`UTF8String`类型。这被定义为`AnsiString(65001)`表示带有代码页的 8 位字符单元的字符串`65001`，即 UTF-8 代码页。当您这样做时，您根本不需要调用`UTF8Encode`，因为附加到字符串类型的编码意味着编译器可以生成代码来转换字符串。现在你可以简单地写：

```
var
  UTF8: UTF8String;
  InputString: string;//aliased to UnicodeString
.....
UTF8 := InputString; 
```

Delphi 2009 及更高版本的 Unicode 方面的主要参考资料是[Marco Cantù 的白皮书：Delphi and Unicode](http://edn.embarcadero.com/article/38980)，我建议您在继续之前阅读。

# python - Python中的非成员与成员函数

> ID：10072204
> 
> 赞同：19
> 
> 时间：2012-04-09T10:58:10.250
> 
> 标签：python, encapsulation, member-functions, non-member-functions

我对 Python 比较陌生，并且努力使语言的特性与我从 C++ 和 Java 背景中养成的习惯相协调。

我遇到的最新问题与封装有关，特别是 Meyer 的“ *Effective C++* ”的第 23 条最好地总结了一个想法：

> [首选非成员非朋友函数而不是成员函数](https://stackoverflow.com/questions/5989734/effective-c-item-23-prefer-non-member-non-friend-functions-to-member-functions)。

暂时忽略缺乏`friend`机制，**非成员函数是否也被认为比 Python 中的成员函数更可取**？

一个强制性的，愚蠢的例子：

```
class Vector(object):
    def __init__(self, dX, dY):
        self.dX = dX
        self.dY = dY

    def __str__(self):
        return "->(" + str(self.dX) + ", " + str(self.dY) + ")"

    def scale(self, scalar):
        self.dX *= scalar
        self.dY *= scalar

def scale(vector, scalar):
    vector.dX *= scalar
    vector.dY *= scalar 
```

给定`v = Vector(10, 20)`，我们现在可以调用`v.scale(2)`或`scale(v, 2)`将向量的大小加倍。

考虑到我们在这种情况下使用属性这一事实，**这两个选项中的哪一个（*如果有的话*）更好，为什么？**

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-09T11:05:03.553

有趣的问题。

与大多数来自 Java 程序员的问题不同，您从不同的地方开始，Java 程序员倾向于假设您需要类，而实际上您并不需要。通常，在 Python 中，除非您专门进行数据封装，否则拥有类是没有意义的。

当然，在您的示例中，您实际上正在这样做，因此使用类是合理的。就个人而言，我会说，既然你*确实*有一个类，那么成员函数是最好的方法：你专门对那个特定的向量实例进行操作，所以函数作为一个方法是有意义的向量。

您可能想让它成为一个独立函数（我们实际上并没有使用“成员”或“非成员”这个词）是如果您需要使其与多个不一定相互继承的类一起使用一个共同的基地。多亏了鸭子类型，这样做是相当普遍的做法：指定您的函数需要一个具有一组特定属性或方法的对象，然后对它们做一些事情。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-09T12:00:32.160

一个自由函数也让您可以灵活地为第一个参数使用鸭子类型。

成员函数为您提供了将功能与类相关联的表现力。

相应地选择。通常，函数的创建是平等的，因此它们都应该对类的接口有相同的假设。一旦您发布了一个免费功能`scale`，您实际上就是在宣传该功能`.dX`并且`.dY`是`Vector`. 那可能不是你想要的。您这样做是为了换取与其他具有`.dX`和的对象重用相同功能的能力`.dY`。这可能对你没有价值。所以在这种情况下，我当然更喜欢成员函数。

对于喜欢自由函数的好例子，我们只需要看看标准库：`sorted`是一个自由函数，而不是 的成员函数`list`，因为从概念上讲，您应该能够创建对任何可迭代序列进行排序的列表。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-09T12:21:24.747

**更喜欢非成员非朋友函数而不是成员函数**

这是一种设计理念，可以而且应该扩展到所有 OOP Paradigm 编程语言。如果你理解了这个的本质，这个概念就很清楚了

如果您不需要对类的成员进行私有/受保护的访问，则您的设计没有理由包含该类的成员函数。反过来想，在设计一个类时，在枚举所有属性之后，您需要确定足以构成该类的最小行为集。您可以使用任何可用的公共方法/成员函数编写的任何成员函数都应该公开。

**这在 Python 中适用多少**

在某种程度上，如果你小心的话。与其他 OOP 语言（如 Java/C++）相比，Python 支持较弱的封装，这主要是因为没有私有成员。（有一种叫做私有变量的东西，程序员可以通过在变量名称前加上一个“_”前缀来轻松编写它。通过名称修饰功能，这成为类私有。）。因此，如果我们从字面上完全采用 Scott Meyer 的话，完全考虑到应该从 Class 访问的内容与应该从外部访问的内容之间存在细微差别。最好留给设计者/程序员来决定一个函数是否应该是类的一个组成部分。我们可以轻松采用的一种设计原则，`"Unless your function required to access any of the properties of the class you can make it a non-member function".`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-09T11:04:47.173

看看你自己的例子——非成员函数必须访问 Vector 类的数据成员。这不是封装的胜利。尤其是当它更改传入对象的数据成员时。在这种情况下，最好返回一个缩放的向量，并保持原始向量不变。

此外，您不会意识到使用非成员函数的类多态性的任何好处。例如，在这种情况下，它仍然只能处理两个分量的向量。如果它利用向量乘法功能，或者使用一种方法来迭代组件，那就更好了。

**总之：**

1.  使用成员函数对您控制的类的对象进行操作；
2.  使用非成员函数来执行纯粹的通用操作，这些操作是根据本身是多态的方法和运算符实现的。
3.  在方法中保留对象变异可能会更好。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-05-07T18:59:50.427

由于`scale`依赖于向量的成员乘法，我会考虑将乘法实现为一种方法并定义`scale`为更通用：

```
class Vector(object):
    def __init__(self, dX, dY):
        self._dX = dX
        self._dY = dY

    def __str__(self):
        return "->(" + str(self._dX) + ", " + str(self._dY) + ")"

    def __imul__(self, other):
        if other is Vector:
            self._dX *= other._dX
            self._dY *= other._dY
        else:
            self._dX *= other
            self._dY *= other

        return self

def scale(vector, scalar):
    vector *= scalar 
```

因此，类接口丰富且流线型，同时保持封装性。

# ruby - 属性值无

> ID：10072206
> 
> 赞同：1
> 
> 时间：2012-04-09T10:58:14.840
> 
> 标签：ruby, ruby-on-rails-3

有人能告诉我为什么会这样吗？

我使用 Ruby on Rails 创建了一个社交网站。这是我第一次使用 RoR 编程。

我有一个名为“Friendship”的模型，其中包含一个属性“blocked”来指示用户是否阻止了另一个用户。

当我在 IRB 中运行以下命令时 -

```
friendship = u.friendships.where(:friend_id => 22).first 
```

IRB给了我-

```
 Friendship Load (0.6ms)  SELECT `friendships`.* FROM `friendships` WHERE `friendships`.`user_id` = 17 AND `friendships`.`friend_id` = 22 LIMIT 1
=> #<Friendship id: 33, user_id: 17, friend_id: 22, created_at: "2012-04-07 10:29:49", updated_at: "2012-04-07 10:29:49", blocked: 1> 
```

如您所见，“阻塞”属性的值为“1”。

但是当我运行以下

```
1.9.2-p290 :030 > friendship.blocked    
=> nil 
```

- 它说，blocked 的值是'nil'而不是'1'。为什么会这样？这可能是一个非常愚蠢的错误，但我是 RoR 的新手，所以请帮助我！

我最初没有包含“阻塞”的访问器方法..我试过了，仍然给出相同的结果..以下是友谊模型..

```
class Friendship < ActiveRecord::Base
    belongs_to :friend, :class_name => "User"
    validates_uniqueness_of :friend_id , :scope => :user_id

    attr_accessor :blocked
    attr_accessible :blocked
end 
```

这是表的架构：

```
1.9.2-p290 :009 > friendship.class
=> Friendship(id: integer, user_id: integer, friend_id: integer, created_at: datetime, updated_at: datetime, blocked: integer) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T11:24:48.490

`attr_accessor :blocked`创建两个方法：

```
def blocked
  @blocked
end

def blocked=val
  @blocked = val
end 
```

这重写了 AR`blocked`方法，它应该返回属性值

所以你应该从你的代码中删除这一行。

# c++ - 我什么时候需要 C++ 中的匿名类？

> ID：10072208
> 
> 赞同：14
> 
> 时间：2012-04-09T10:58:25.550
> 
> 标签：c++, anonymous-class

C++中有一个叫做匿名类的特性。它与 C 中的匿名结构类似。我认为这个功能是出于某些需要而发明的，但我不知道那是什么。

我可以举一些真正需要匿名类的例子吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-09T11:21:07.307

该功能之所以存在，是因为`struct`并且`class`是同一件事-您可以对一个做任何事情，也可以对另一个做任何事情。它的用途与 C 中的匿名完全相同`struct`；当您想将一些东西组合在一起并声明它的一个或多个实例，但不需要按名称引用该类型时。

它在 C++ 中不太常用，部分原因是 C++ 设计倾向于更面向类型，部分原因是您不能为匿名类声明构造函数或析构函数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-09T11:16:40.883

从严格意义上讲，它并不是真正需要的，而且从来没有。即，您总是可以指定一个名称，例如`anonymous1`，`anonymous2`等等。但是跟踪不必要的名称总是很麻烦。

有用的地方是在任何想要对数据进行分组而不给该组命名的地方。我可以举几个例子：

```
class foo {
  class {
  public:
    void validate( int x ) { m_x = x; }
    bool valid() { return m_exists; }
  private:
    int m_x;
    bool m_exists;
  } maybe_x;
}; 
```

在这种情况下 the`int`和 the`bool`逻辑上属于一起，因此将它们分组是有意义的。然而，对于这个具体的示例，创建一个实际的可选类型或使用其中一个可用的类型可能是有意义的，因为这种模式也很可能在其他地方使用。在其他情况下，这种分组模式可能非常特别，以至于它应该只留在那个类中。

不过，我确实假设匿名类很少使用（我可能在我的生活中只使用过几次）。通常，当一个人想要对数据进行分组时，这不是特定于类或范围的，而是一种在其他地方也有意义的分组。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-09T11:19:15.063

使用匿名类是为了保持与现有 C 代码的兼容性。例子：

在某些 C 代码中，将 typedef 与匿名结构结合使用很普遍。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-09T11:01:34.120

制作嵌套函数有时可能会有所帮助，例如：

```
void foo() {
  class {
    void operator()(){
    }
  } bar;
  bar();
} 
```

但是现在我们有了 lambdas 和匿名类，仅出于兼容性原因。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-18T00:24:15.360

有一个匿名结构的例子，可以与 Qt 5 的 Signal/Slot 系统一起使用，带有 ANY 类并且没有 QObject 派生要求：

```
void WorkspaceWidget::wwShowEvent()
{
    //Show event: query a reload of the saved state and geometry
    gcmessage("wwShowEvent "+ this->title());
    struct{void* t; void operator()(){ static_cast<WorkspaceWidget*>(t)->wwReloadWindowState(); }}f;
    f.t=this;
    QObject::connect( &reloadStateTimer, &QTimer::timeout, f);
    reloadStateTimer.start();
}

void WorkspaceWidget::wwReloadWindowState()
{
    gcmessage( dynamic_cast<QObject*>(this)->metaObject()->className());
} 
```

基本上，我需要将计时器信号连接到非 QObject 派生类，但希望正确传递 mt“this”。

QObject::connect 可以连接到 Qt 5 中的普通函数，所以这个匿名类实际上是一个函子，它本身保持 this 指针，仍然传递槽连接。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-10-28T21:19:21.060

您也可以匿名使用 auto 进行操作（vs2015）

```
struct {

    auto* operator->() {return this;}
    //do other functions

} mystruct; 
```

# c#-3.0 - 通过 AT COMMAND 使用调制解调器拨号

> ID：10072209
> 
> 赞同：1
> 
> 时间：2012-04-09T10:58:25.697
> 
> 标签：c#-3.0, at-command

我用 C# 编写了一个项目，我想通过 AT COMMAND 拨号到其他项目，但我的项目无法正常工作，因为它可以正确连接，我听到对方的声音，但听不到我的声音，
我的调制解调器是语音
，我使用 ATDT0941221225425 ;

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T20:46:11.777

您的问题有点令人困惑，但您似乎在说您的调制解调器确实拨号和连接，但您没有听到按键音？

如果这是正确的，您可能需要在命令字符串中添加更多命令。

在发送 DT 命令之前尝试将 ATM1L3 发送到调制解调器。这应该将调制解调器监视器扬声器设置为打开，直到检测到载波信号 (M1) 并处于最大响度 (L3)。

不幸的是，我手头没有调制解调器来测试这个，我主要是根据 15 岁以上的知识来工作。

[在http://seriss.com/people/erco/unixtools/hayes.html](http://seriss.com/people/erco/unixtools/hayes.html)有 Hayes 调制解调器命令的参考，在[http://en.wikipedia.org/wiki/Hayes_command_set](http://en.wikipedia.org/wiki/Hayes_command_set)上还有关于 Hayes 命令集的维基百科文章有一个清单。

# batch-file - 如何创建适用于 Program Files 和 Program Files(x86) 的 exe？

> ID：10072210
> 
> 赞同：0
> 
> 时间：2012-04-09T10:58:25.957
> 
> 标签：batch-file, nsis, batch-processing

我正在尝试使用 NSIS 脚本创建一个 exe 文件，在我的脚本中，我正在复制一个批处理文件和一个已安装的 Jasper 服务器目录中的文件夹（它可以是任何目录）

这是我的 NSIS 脚本——

```
 * Section 
     SetOutPath "C:\PROGRA~2\JASPER~1.0\buildomatic"

      File /r "C:\Users\Desktop\K-installer\backup3101"
       File "C:\Users\Desktop\K-installer\batch\demo.bat"
         ExecWait '"C:\PROGRA~2\JASPER~1.0\buildomatic\demo.bat"'
    SectionEnd  * 
```

当 jasper 服务器安装在 Program Files(x86) 中时，它工作正常。我如何将它概括为 Program Files 和 Program Files(x86)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T11:09:21.803

这可能不是很优雅，但您可以检查“Program Files(x86)”的目录“C:\PROGRA~2\JASPER~1.0\buildomatic”是否存在，并检查“C:\PROGRA~1\JASPER~1.0”是否存在\buildomatic” 表示“程序文件”。然后，您可以在那里进行单独的分支并根据您的需要处理所有事情。

在这里您可以找到方法：

[http://nsis.sourceforge.net/IfFileExists_Changes_Section_Flags](http://nsis.sourceforge.net/IfFileExists_Changes_Section_Flags)

我希望这对你有所帮助。

编辑：您可能想尝试这样的事情（警告未测试）：

```
Section /o "Program Files(x86)"   prg2
    SetOutPath "C:\PROGRA~2\JASPER~1.0\buildomatic"
    File /r "C:\Users\Desktop\K-installer\backup3101"
    File "C:\Users\Desktop\K-installer\batch\demo.bat"
    ExecWait '"C:\PROGRA~2\JASPER~1.0\buildomatic\demo.bat"'
SectionEnd

Section /o "Program Files)"   prg1
    SetOutPath "C:\PROGRA~1\JASPER~1.0\buildomatic"
    File /r "C:\Users\Desktop\K-installer\backup3101"
    File "C:\Users\Desktop\K-installer\batch\demo.bat"
    ExecWait '"C:\PROGRA~1\JASPER~1.0\buildomatic\demo.bat"'
SectionEnd

Function .onInit
IfFileExists C:\PROGRA~1\JASPER~1.0\buildomatic Prog1Exists PastProg1Exists
Prog1Exists:
  ; Use the macro from sections.nsh
  !insertmacro SelectSection ${prg1}
PastProg1Exists:

IfFileExists C:\PROGRA~2\JASPER~1.0\buildomatic Prog2Exists PastProg2Exists
Prog2Exists:
  ; Use the macro declared above
  !insertmacro SelectSection ${prg2}
PastProg2Exists:

FunctionEnd 
```

# python - 获取密钥中的第二项

> ID：10072214
> 
> 赞同：1
> 
> 时间：2012-04-09T10:58:52.950
> 
> 标签：python, networkx

在网络 xi 中使用图可以从图 G 中调用节点 n 的以下属性：

```
G.node[n]  

{'type': 'a', 'pos': [0.22, 0.33]} 
```

我可以访问不同的属性（键），如下所示

```
G.node[n]['pos'] 
```

但我不知道如何只访问“pos”的第一个或第二个元素？IE

```
0.22 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T11:00:50.327

这为您提供了第一个元素：

```
G.node[n]['pos'][0] 
```

# jquery - Jquery无限滚动 - div不是body滚动条

> ID：10072216
> 
> 赞同：10
> 
> 时间：2012-04-09T10:59:07.757
> 
> 标签：jquery

假设我有 div，我想获取数据并将数据推送到该 div。当用户在 div 内滚动时，将获取下一组数据并将其推送到 div 中。如何使用 jQuery 检测滚动条位置？我不想使用任何插件。我需要 jQuery 代码。这是示例链接，例如 http://www.stevefenton.co.uk/cmsfiles/assets/File/infinitescroller.html，但它使用了插件。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-04-09T11:03:47.420

类似的东西怎么样：

```
$(window).scroll(function() {
   if($(window).scrollTop() + $(window).height() == $(document).height()) {
       var new_div = '<div class="new_block"></div>';
       $('.main_content').append(new_div.load('/path/to/script.php'));
   }
}); 
```

当滚动条到达页面底部时，这将在主页面容器中添加一个新元素。它还使用从外部脚本加载的内容填充这个新元素。

* * *

如果要检测用户是否已将特定 div 滚动到底部：

```
$('.some_element').bind('scroll', function(){
   if($(this).scrollTop() + $(this).innerHeight() >= $(this)[0].scrollHeight){
      var new_div = '<div class="new_block"></div>';
      $('.main_content').append(new_div.load('/path/to/script.php'));
   }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-09T11:25:06.950

此代码已经过测试和验证可以正常工作。当您滚动 div 时，代码通过比较滚动条高度与滚动条位置来检查滚动条是否到达底部。如果是这样，它会调用一个获取更多内容并将其附加到 div 的方法。

享受！

科比

```
$(document).ready(function () {
        $("div").scroll(function () {
            var $this = $(this);
            var height = this.scrollHeight - $this.height(); // Get the height of the div
            var scroll = $this.scrollTop(); // Get the vertical scroll position

            var isScrolledToEnd = (scroll >= height);

            $(".scroll-pos").text(scroll);
            $(".scroll-height").text(height);

            if (isScrolledToEnd) {
                var additionalContent = GetMoreContent(); // Get the additional content

                $this.append(additionalContent); // Append the additional content

            }
        });
    }); 
```

根据您的评论，这里是工作的整个 HTML 页面源代码（在 IE 9 下测试）：

** 请确保您引用的是 jquery 库 **

```
 <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Test Image</title>
        <script src="assets/js/jquery.js" type="text/javascript"></script>
        <script type="text/javascript">
            $(document).ready(function () {
                $("div").scroll(function () {
                    var $this = $(this);
                    var height = this.scrollHeight - $this.height(); // Get the height of the div
                    var scroll = $this.scrollTop(); // Get the vertical scroll position

                    var isScrolledToEnd = (scroll >= height);

                    $(".scroll-pos").text(scroll);
                    $(".scroll-height").text(height);

                    if (isScrolledToEnd) {
                        var additionalContent = GetMoreContent(); // Get the additional content

                        $this.append(additionalContent); // Append the additional content

                    }
                });
            });

            function GetMoreContent() {
                return "<p>This is the div content</p><p>This is the div content</p><p>This is the div content</p><p>This is the div content</p><p>This is the div content</p>";
            }
        </script>
    </head>
        <body>
            <div style="overflow: scroll;height: 150px; border: 1px solid red;">
                <p>This is the div content</p>
                <p>This is the div content</p>
                <p>This is the div content</p>
                <p>This is the div content</p>
                <p>This is the div content</p>
                <p>This is the div content</p>
            </div> 

            Scroll Height: <span class="scroll-height"></span>   <br/>
            Scroll position: <span class="scroll-pos"></span>   
        </body>
    </html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T11:11:37.127

我认为`.scrollTop()`是你选择的武器。[jQuery API](http://api.jquery.com/scrollTop/)

> 获取匹配元素集中第一个元素的滚动条的当前垂直位置。

因此，请确保将其绑定到正确的元素。我猜直接在 div 上应该可以工作。

> 垂直滚动位置与在可滚动区域上方的视图中隐藏的像素数相同。如果滚动条位于最顶部，或者元素不可滚动，则此数字将为 0。

所以可能你必须找到一种方法来计算 div 的高度，就好像它会在没有滚动条的情况下被拉伸，以便将这些数字与加载事件的拍摄建立有意义的关系。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-25T09:59:59.237

为了实现这种行为，您不需要 jquery 或 jquery 插件，您只需`Vanilla Javascript`使用`IntersectionObserver API`.

您需要做的就是放置元素并在它们出现在屏幕上时进行监听。

您可以使用一些 javascript 和 html 行来完成此操作，它比在浏览器中侦听滚动事件的性能要高得多

我最近在这里整理了一篇关于无限滚动和这种特定行为的[文章](https://dioxmio.medium.com/infinite-scroll-done-the-right-way-33cb7be18407)

我希望它可以为您提供指导，以满足您的特定需求

# inversion-of-control - 超越世界/宇宙

> ID：10072219
> 
> 赞同：3
> 
> 时间：2012-04-09T10:59:47.410
> 
> 标签：inversion-of-control, immutability, racket

我想我会尝试使用世界/宇宙无突变方法的简单 GUI 应用程序，但尝试自己实现“世界/宇宙”程序设计。

我在下面有我的小草图，但我很快得出结论，虽然我可以使用教学包，但我不知道如何自己实现教学包功能。

我猜我应该使用延续，但这似乎不是 Universe.rkt 源中的方法。

我总是可以把程序塞进画布类，（就像早期的游戏，比如slidey和same一样），但我真的想了解如何实现程序控制的“世界/宇宙”风格。

```
;;;;----
#lang racket/gui

; simple drawing program
; mousedown starts recording a list of points
; mousechanged starts recording a new list
; paint callback paints the list of lists as lines.

(define diagramframe (new frame% [label "paint"] [width 300]
                                 [height 300] [x 1000][y 300]))

;(define lines '(((0 . 0) (0 . 300) (250 . 250) (150 . 176))))
(define lines '(((0 . 0) (0 . 300) (250 . 250) (150 . 176)) 
                ((10 . 4) (280 . 10))))

(define paintcanvas% 
  (class canvas%
    (init-field mouse-event-callback)
    (super-new)
    (define dc (send this get-dc))
    (define/override (on-event mouse-event)
      (mouse-event-callback mouse-event))))

(define (paint-cb c dc)  
  (for-each (λ (line) (send dc draw-lines line)) lines))

(define (me-cb mouse-event)
   (let ((x (send mouse-event get-x))
        (y (send mouse-event get-y)))
    (when (and (send mouse-event get-left-down)
               (send mouse-event moving?))
      (if (send mouse-event button-changed?)
          ; if true append as new list
          '()  
          ; if false append existing list
          '()))))

(define Paintcanvas (new paintcanvas% 
                         [parent diagramframe]
                         [paint-callback paint-cb]
                         [mouse-event-callback me-cb]))

(define (main world)
 (when world (main (??? world)))
  (send diagramframe show #t))

(main lines)

(send diagramframe show #t)

;;----- 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T11:13:59.317

这是我将如何做到的。

请注意，GUI 事件循环充当程序主程序。使用计时器事件来实现即时。

```
 #lang racket/gui

;;;
;;; WORLD
;;;

(define-struct world (lines))
(define the-world (make-world '((0 . 0) (0 . 300) (250 . 250) (150 . 176) (10 . 4) (280 . 10))))

;;;
;;; USER LAND
;;;

(define (on-mouse-event world event)
  (if (and (send event get-left-down)
           (send event moving?)
           #; (send event button-changed?))
      (let ((x (send event get-x))
            (y (send event get-y)))
        (make-world (cons (cons x y) (world-lines world))))
      world))

(define (on-paint world dc)  
  (send dc draw-lines 
        (map pair->point (world-lines world))))

(define (pair->point p)
  (make-object point% (car p) (cdr p)))

;;;
;;; SYSTEM
;;;

(define user:on-paint on-paint)

(define diagramframe (new frame% [label "paint"] [width 300] [height 300] [x 1000][y 300]))

(define paintcanvas% 
  (class canvas%
    (inherit get-dc refresh)
    (super-new)

    (define/override (on-paint)
      (send (get-dc) suspend-flush)
      (user:on-paint the-world (get-dc))
      (send (get-dc) resume-flush))

    (define/override (on-event mouse-event)
      (let* ([old-world the-world]
             [new-world (on-mouse-event the-world mouse-event)])
        (if (eq? old-world new-world)
            (super on-event mouse-event)
            (begin
              (set! the-world new-world)
              (refresh)))))))

(define paintcanvas (new paintcanvas% [parent diagramframe]))
(send diagramframe show #t) 
```

# php - 根据下拉列表中的更改更改网格视图中的数据

> ID：10072220
> 
> 赞同：3
> 
> 时间：2012-04-09T10:59:58.953
> 
> 标签：php, yii

我在mysql中有3个表

1.  我拥有 Cityid Cityname 的城市

2.  我有 labelid langid 和 text 的标签

3.  我在其中启用了 langid、langname 和启用的语言表

现在这 3 个表是相互关联的，因为 cityname=labelid 文本将保存实际名称语言将保存语言名称，例如

城市表将是`

*   城市标识=1，城市名称=3000

*   城市标识=2，城市名称=3001

`

标签表将是

*   labelid =3000, langid=1, text=纽约

    *   labelid =3000, langid=23, text=New York in Chinese

    *   labelid= 3001, langid=1, text= 孟买

语言表将是

*   `langid=1, lagname=english, 启用=1

*   langid=23，langname=chinese，启用=1`

现在我实现的是在网格视图中显示城市的数据并显示所有语言的下拉列表`enabled=1`

我想要做的是根据我们从下拉列表中选择的语言更改网格的内容。

因此，当在下拉菜单中选择中文时，所有城市名称都应以中文显示。

我的视图代码是

```
$Labelcriteria = new CDbCriteria;
$Labelcriteria->condition = ("enabled=1");
$langarray= Language::model()->findAll($Labelcriteria);
$i=-1;
foreach ($langarray as $lang)
{
    $i=$i+1;
    $langName[$i]=$lang->langname;
}

//echo CHtml::dropDownList('select_box_name','select_value',$langName,array('onchange' => 'alert(1)',));

echo CHtml::link('Advanced Search','#',array('class'=>'search-button')); ?>    

<div class="search-form" style="display:none">    
    <?php    
    $this->renderPartial('_search',array('model'=>$model,));
    ?>
</div><!-- search-form -->    

<?php
echo CHtml::dropDownList('select_box_name','select_value',$langName, array(
    'onchange'=>'alert(1)',
    'ajax' => array(
        'type'=>'POST', //request type
        'url'=>CController::createUrl('cityController/dynamiccities'), 
     )
));

$this->widget('zii.widgets.grid.CGridView',
    array('id'=>'city-grid',
    'dataProvider'=>$model->search(),
    'filter'=>$model,
    'columns'=>array('citycode', 'cityname',array('class'=>'CButtonColumn',),),));
?> 
```

虽然我的模型是

```
public function search()
{    
    $criteria=new CDbCriteria;

    $criteria->select = 't.citycode,lbl.text as cityname ';
    $criteria->join = 'inner join labels lbl on t.cityname=lbl.labelid inner join language lng on lbl.langid=lng.langid';
    $criteria->order = 'lbl.text ASC';
    $criteria->condition=$someway_to_change_dynamically_using_dropdown;

    $criteria->compare('citycode',$this->citycode,true);
$criteria->compare('cityname',$this->cityname,true);    

    //  $criteria->compare('cityid',$this->cityid);
    //  $criteria->compare('seq_no',$this->seq_no);
    //  $criteria->compare('enable',$this->enable);

    return new CActiveDataProvider($this, array('criteria'=>$criteria,));
} 
```

任何帮助将不胜感激

这是呈现视图文件的控制器操作

```
public function Admin()
    {
    $model=new City();
    $model->unsetAttributes();  // clear any default values

    if(isset($_GET['City']))
        $model->attributes=$_GET['City'];
    $this->render('admin',array('model'=>$model));

     } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T09:46:41.970

好的，我试着绕开它，我想我有它。

您希望默认以英语显示所有城市名称，但有一个包含所有可用语言的下拉菜单。切换语言时，以该语言显示城市名称。

因此，您需要使用下拉指定的参数填充所有名称的网格视图，但默认为英文。你大部分时间都在那里。

您的国家/地区被拉到这里：

```
....dget('zii.widgets.grid.CGridView',
    array('id'=>'city-grid',
    'dataProvider'=>$model->search(),
.... 
```

我猜您只想在网格视图中显示代码和翻译后的名称？

所以小部件将变为：

```
$this->widget('zii.widgets.grid.CGridView',
    array('id'=>'city-grid',
    'dataProvider'=>$model->search(),
    'filter'=>$model,
    'columns'=>array(
        'citycode', 
        array(        
             'name'=>'Country',
             'value'=>'$data->getLabel("'.$langId.'")',
        ),  
        array('class'=>'CButtonColumn')
    ),
)); 
```

然后，在您的城市模型上，您需要一种方法来根据语言的 ID 获取其语言变体，因此将其放入您的模型中：

```
public function getLabel($id){
    return $this->labels[$id]->text;
} 
```

您还需要为每个城市名称的标签提供适当的关系。因为您低于 Yii 1.1.9 并且您没有将它们拉到一起（加入），所以我们需要一个手动功能来将 FK 加入 FK。

将此添加到您的城市模型中：

```
 public function getLabels(){
      return Labels::model()->findAll(array(
          'condition'=>'labelid = :labelid',
          'params'=>array(':labelid'=>$this->cityname)
      ));
 } 
```

并将其搜索功能更改为：

```
public function search()
{    
  $criteria=new CDbCriteria;

  $criteria->order = 'lbl.text ASC';
  $criteria->compare('citycode',$this->citycode,true);
  $criteria->compare('cityname',$this->cityname,true);  
  $criteria->compare('cityid',$this->cityid);
  $criteria->compare('seq_no',$this->seq_no);
  $criteria->compare('enable',$this->enable);

  return new CActiveDataProvider($this, array('criteria'=>$criteria,));
} 
```

现在您需要修改将正确的变量发送到视图中的操作：

```
public function Admin($lang=1)
{
    $model=new City();
    //populate the filters
    $model->attributes = $_GET['City'];
    $this->render('admin',array('model'=>$model, 'langId'=>$lang));
 } 
```

然后搜索表单需要显示所有可用的国家，您已经在此处提取了这些国家：

```
$Labelcriteria = new CDbCriteria;
$Labelcriteria->condition = ("enabled=1");
$langarray= Language::model()->findAll($Labelcriteria);
$i=-1;
foreach ($langarray as $lang)
{
    $i=$i+1;
    $langName[$i]=$lang->langname;
} 
```

这可以在不改变结果的情况下替换为：

```
 $langarray = Language::model()->findAll(array('condition'=>'enabled=1','select'=>'langname')); 
```

....我认为

无论哪种方式，您都拥有那里的国家，并且已经在下拉列表中填充它们。

因此，所有这些都应该为您提供一个带有语言下拉列表的视图和一个网格视图，其中城市名称默认填充有英文名称，但如果您传递带有 ID 的 lang 参数，它将显示具有该语言的城市。

您如何实现 Javascript 以实际更新 Ajax 上的网格视图将影响您的页面布局、框架和拆分更多视图的其余部分。但我们可以再谈一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-22T14:17:16.860

您可以使用它来根据 a`GridView`上的选择更新 a 的内容`CHtml::dropDownList`。

1）js脚本用于捕获select的onchange：

```
Yii::app()->clientScript->registerScript('sel_status', "
        $('#selStatus').change(function() {
            //alert(this.value);
            $.fn.yiiGridView.update('milestone-category-grid', {
                    data: $(this).serialize()
            });            
            return false;
        });
    "); 
```

2）选择代码：

```
$data = CHtml::listData(Status::model()->findAll('IsProcess=?',array(1)), 'ID', 'Description');

$select = key($data);

echo CHtml::dropDownList(
    'dropDownStatus',
    $select,            // selected item from the $data
    $data,       
    array(
        'style'=>'margin-bottom:10px;',
        'id'=>'selStatus',
    )
); 
```

3）对于gridview小部件：

```
 $this->widget('bootstrap.widgets.TbGridView',array(
        'id'=>'milestone-category-grid',
        'afterAjaxUpdate' => 'installSortable',
        'enableSorting' => false,
        'dataProvider'=>$model->search($select),
        'rowCssClassExpression'=>'"items[]_{$data->ID}"',
        'columns'=>array(
            'Description',
        ),
    )); ?> 
```

4）在`Search`您相应模型的函数中，以下代码需要捕获正在传递的 GET 变量，在这种情况下，它是`dropDownStatus`，赋予选择的名称（如果需要，使用 Firebug 来获取正在传递的变量的名称通过）：

```
public function search($status=false)
    {
        // Warning: Please modify the following code to remove attributes that
        // should not be searched.

        $criteria=new CDbCriteria;

        if ($status!==false) {
            $criteria->condition='StatusID=:StatusID';
            $criteria->params=array('StatusID'=>$status);
        }

        if (isset($_GET['dropDownStatus'])) {
            $criteria->condition='StatusID=:StatusID';
            $criteria->params=array('StatusID'=>$_GET['dropDownStatus']);
            $criteria->order='Position ASC';
        }

... 
```

[参考](http://www.yiiframework.com/wiki/648/update-gridview-with-dropdown-selection/)

# windows-phone-7 - 使用 Facebook C# SDK 授权原生 WP7 应用程序

> ID：10072222
> 
> 赞同：0
> 
> 时间：2012-04-09T11:00:07.973
> 
> 标签：windows-phone-7, login, facebook-c#-sdk

我刚刚使用 NuGet 在我的 WP7 应用程序中安装了 Facebook C# SDK，所以我确信它是最新版本。但是，我似乎在任何地方都找不到 WP7 的任何文档……我要做的就是使用 Facebook 对用户进行身份验证以获取他们的 Facebook ID。有人可以告诉我如何使用 Facebook C# SDK 来做到这一点，或者将我链接到一篇解释这一点的最新文章。

谢谢，亚历克斯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T22:56:08.063

根据 C# SDK 的文档，您使用 Javascript SDK 进行身份验证，然后将其 AJAX 到您的服务器。

[请参阅http://csharpsdk.org/docs/web/getting-started.html](http://csharpsdk.org/docs/web/getting-started.html)的“获取访问令牌”部分

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T11:57:19.520

[您是否在如何开始使用适用于 WP7 的 Facebook C# SDK 中](https://stackoverflow.com/questions/5382473/how-to-get-started-with-the-facebook-c-sharp-sdk-for-wp7)看到答案？? 他们似乎提供了样本/示例/演练

# autoit - 使用 autoit--compiled 运行便携式应用程序

> ID：10072223
> 
> 赞同：1
> 
> 时间：2012-04-09T11:00:22.963
> 
> 标签：autoit, portable-executable

嗨，我想知道如何制作一个在 autoit gui 中运行的便携式应用程序。要使用什么命令/功能，所以当我编译 gui 脚本和便携式应用程序时，我希望便携式应用程序在 gui 中运行。一个例子会很棒。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-12T19:51:47.570

您使用 Autoit 创建的 exe 文件可以复制到任何 win32 系统，您将能够运行。如果这就是您在便携式下的意思，那就是答案。

你不能用autoit制作android应用程序或任何类似的东西它不是java它不是cross splatform它是一个Windows自动化工具而且它本身就是一种编程语言但仅适用于Windows系统

# asp.net - 为什么会话在插入数据并从 SQL LITE 获取数据时为空

> ID：10072231
> 
> 赞同：0
> 
> 时间：2012-04-09T11:01:12.170
> 
> 标签：asp.net, sql-server-2008, sqlite

我已经编写了一个代码来将数据插入到`SQL LITE`数据库中，如下所示

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        count = 0;
       Session["x"] = "session value";

    }
}

protected void Button1_Click(object sender, EventArgs e)
{
    string path = Server.MapPath("bin/sampldb.db");
    SQLiteConnection conn = new SQLiteConnection("Data Source=" + path + "");
    try
    {
        conn.Open();
        SQLiteCommand cmd = new SQLiteCommand();
        cmd.Connection = conn;
        string txt="insert into stu values("+TextBox1.Text  +",'"+TextBox2.Text+"')";
        cmd.CommandType = CommandType.Text;
        cmd.CommandText  = txt;
        cmd.ExecuteNonQuery();
        conn.Close(); 
    }
    catch (Exception ex)
    {
        Label1.Visible = true;
        Label1.Text = "Error:" + ex.Message;
    }

} 
```

在检索数据时插入后`Session`我`null`不知道为什么

```
 protected void Button2_Click(object sender, EventArgs e)
{
    if (Session["x"] != null) // Getting Null here
    {
        Label1.Visible = true;
        Label1.Text = Session["x"].ToString();
        DataSet m_oDataSet = new DataSet();
        string path = Server.MapPath("bin/sampldb.db");
        SQLiteConnection conn = new SQLiteConnection("Data Source=" + path + "");
        try
        {
            conn.Open();
            SQLiteCommand cmd = new SQLiteCommand();
            cmd.Connection = conn;
            cmd.CommandType = CommandType.Text;
            string txt = "select * from stu";
            cmd.CommandText = txt;

            SQLiteDataAdapter adp = new SQLiteDataAdapter();
            adp.SelectCommand = cmd;
            adp.Fill(m_oDataSet);
            GridView1.DataSource = m_oDataSet.Tables[0];
            GridView1.DataBind();

        }
        catch (Exception ex)
        {
            Label1.Visible = true;
            Label1.Text = "Error:" + ex.Message;
        }
        finally
        {
            conn.Close();
        }

    }
} 
```

测试时相同的代码`Sql server 2008`可以正常工作

```
protected void BtnSqlInsert_Click(object sender, EventArgs e)
{
    SqlConnection con = new SqlConnection(cnstr);
    con.Open();
    SqlCommand cmd = new SqlCommand("Insert into [User] values ('" + TextBox1.Text + "','" + TextBox2.Text + "')", con);
    cmd.ExecuteNonQuery();
    con.Close();
}
protected void BtnSqlGet_Click(object sender, EventArgs e)
{
    if (Session["x"] != null) //Able to get session here
    {
        Label1.Visible = true;
        Label1.Text = Session["x"].ToString();
    }
} 
```

我的`sql lite`路径来自`Bin`文件夹，如图所示

![在此处输入图像描述](../Images/ea8cc98a3b1b136e6fa793bd677c152e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T12:14:46.370

您的应用程序写入 DB（位于 BIN 文件夹中）。这会导致应用重启 => 进程内会话丢失。您不应该解决后果（通过使用 StateServer 模式），您应该解决最初的原因 - 将 db 文件移动到另一个文件夹中，远离 BIN 文件夹。

# c# - 如何使列表框滚动到c#asp.net web应用程序中的选定项目

> ID：10072232
> 
> 赞同：0
> 
> 时间：2012-04-09T11:01:14.380
> 
> 标签：c#, asp.net, listbox

我正在尝试使列表框滚动到列表中的选定项目。任何人都可以告诉如何在 C# asp.net Web 应用程序中执行此操作吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-09T11:04:32.083

检查[MaintainScrollPositionOnPostBack](http://msdn.microsoft.com/en-us/library/system.web.ui.page.maintainscrollpositiononpostback.aspx)属性。您可以找到它并将其设置在 Page 指令中。

# mercurial - tortoise hg：当某物被推送到中央仓库时如何得到通知

> ID：10072233
> 
> 赞同：5
> 
> 时间：2012-04-09T11:01:27.257
> 
> 标签：mercurial, notifications, push, tortoisehg

我正在使用 Mercurial 进行版本控制。团队之间共享一个中央仓库，我们任何人都可以推/拉它。

当任何其他用户将某些内容推送到中央仓库时，我如何获得通知。

我试图根据[https://www.mercurial-scm.org/wiki/NotifyExtension编辑我的 hgrc 文件](https://www.mercurial-scm.org/wiki/NotifyExtension)

如下

```
 [extensions]
hgext.notify =

[hooks]
# Enable either changegroup or incoming.
# changegroup will send one email for each push,
# whereas incoming sends one email per changeset.
changegroup.notify = python:hgext.notify.hook
#incoming.notify = python:hgext.notify.hook

[email]
from = **myemailaddresshere**

[smtp]
host = localhost

# presently it is necessary to specify the baseurl for the notify
# extension to work. It can be a dummy value if your repo isn't
# available via http
[web]
baseurl = **http://repoip:port/**

[notify]
# multiple sources can be specified as a whitespace separated list
sources = serve push pull bundle
# set this to False when you're ready for mail to start sending
test = True

[reposubs]
* = **toemailaddresshere**

#config = /path/to/subscription/file
# you can override the changeset template here, if you want.
# If it doesn't start with \n it may confuse the email parser.
# here's an example that makes the changeset template look more like hg log:
template = \ndetails: {baseurl}{webroot}/rev/{node|short}\nchangeset: {rev}:{node|short}\nuser: {author}\ndate: {date|date}\ndescription:\n{desc}\n
maxdiff = 300 # max lines of diffs to include (0=none, -1=all) 
```

然后我试图推动中小企业的变化。但这并没有触发任何电子邮件。你能检查一下我的 .hgrc 文件中有什么错误吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T16:50:40.763

您的通知扩展程序配置为处于测试模式。也许设置`test = False`会有所帮助？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-13T09:42:07.007

`template`并且`maxdiff`应该在该`[notify]`部分中。在您的示例中，它们位于该`[reposubs]`部分中。

您可以使用`hg help`来检查通知扩展是否已启用。

# c# - 当前上下文中不存在名称“ConfigurationManager”

> ID：10072234
> 
> 赞同：3
> 
> 时间：2012-04-09T11:01:33.637
> 
> 标签：c#, winforms

大家好，我收到以下错误：“当前上下文中不存在名称‘ConfigurationManager’”

```
// namespaces
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Data.SqlClient;
using System.Configuration;
using System.IO;

namespace Database1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }
        public static string GetConnectionString(string strConnection)
        {
            //variable to hold our connection string for returning it

            string strReturn = "";
            //check to see if the user provided a connection string name
            //this is for if your application has more than one connection string

            if (!string.IsNullOrEmpty(strConnection)) //a connection string name was        
            {
                //get the connection string by the name provided
                strReturn = ConfigurationManager.ConnectionStrings[strConnection].ConnectionString;

            }
            else //no connection string name was provided
            {
                //get the default connection string
                strReturn = ConfigurationManager.ConnectionStrings["YourConnectionName"].ConnectionString;
            }
            //return the connection string to the calling method
            return strReturn;
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-09T11:03:37.087

您是否添加了对 System.Configuration.dll 的引用？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-09T11:10:28.060

您必须添加对 System.Configuration.dll 的引用

当您右键单击并单击“添加引用”按钮

在打开的弹出窗口中单击 .Net 选项卡

在那里您应该能够找到 System.Configuration.dll 文件

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-07-14T10:05:00.597

这是路径：

```
C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0\System.Configuration.dll 
```

您也可以添加对`:System:`

```
C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0\System.Configuration.Install.dll 
```

（希望能帮助到你 ：））

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-09T11:40:42.027

您使用的是哪个版本的 .NET Framework 和 Visual Studio？

ConfigurationManager 仅在 .NET 2 及更高版本中可用。如果您使用的是 .NET Framework 1.x 和 Visual Studio 2002/2003，则根本无法使用此类。

[http://msdn.microsoft.com/en-us/library/system.configuration.configurationmanager.aspx](http://msdn.microsoft.com/en-us/library/system.configuration.configurationmanager.aspx)

单击此页面顶部的“其他版本”链接，您将看到它支持的所有版本。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-06-22T11:54:01.747

我在使用 .Net Core 时遇到了同样的问题，但使用`Install-Package System.Configuration.ConfigurationManager`在包管理器中运行的 .NET 为我解决了这个问题。

# iphone - Objective-c super init 是类方法还是实例方法？

> ID：10072240
> 
> 赞同：1
> 
> 时间：2012-04-09T11:02:06.863
> 
> 标签：iphone, objective-c, xcode, class

我是目标 c 的新手。我知道这`-init()`是一个`instance method`并返回一个对象，例如`myObj＝[myObj init];`将返回一个对象`myObj.`

但是，如果`self ＝[super init];`通常是`super refer to parent`class eg `NSObject`which is a `class, not instance`.

所以，`Is -init() instance method or class method for super init?`

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T11:09:56.980

`init`是一个实例方法。您调用它的事实`super`不会改变它。

请记住，`super`这并不代表您的对象的类，而是您的对象在类层次结构中被视为其父类的实例。

而且你从不打电话`myObj＝[myObj init];`——你打电话`myObj = [[MyObj alloc] init]`。`myObj`注意（一个变量）和`MyObj`（这个变量是一个实例的类）之间的大小写差异。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T11:05:17.607

一般`init`是这样使用后`alloc`的：

```
MyObject* obj = [[MyObject alloc] init]; 
```

并`alloc`创建对象实例，`init`实例方法也是如此，当你重写它时，总是调用父类是一个好习惯`init`。

尝试阅读这篇[文章](http://macdevelopertips.com/objective-c/objective-c-initializers.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T11:11:25.207

Super 是指当前**对象**中父类的方法。调用`super init`将调用`init`当前对象 ( `self`) 上的方法，但将使用超类的实现。所以**no** -`init`不是静态方法（由于`+`在 init 方法之前，这将是可见的）。`super whatMethodYouWantFromSuperclass`即使它不是静态的，您也可以调用。静态方法不是在对象 ( `self`) 上调用，而是在类 ( `[NSObject yourStaticMethod]`) 上调用。

# gdb - 如何通过编译器优化器传递混淆程序的跟踪协议？

> ID：10072245
> 
> 赞同：0
> 
> 时间：2012-04-09T11:02:27.460
> 
> 标签：gdb, compiler-optimization, deobfuscation

在 GDB 脚本的帮助下：

```
file ./program
b *0x12345
run
while 1
x/i $pc
ni
end
quit 
```

我得到了一个混淆程序的跟踪协议：

```
 ...

0x484e0:    bx  lr
?? ()
0x43d88:    b   0x43db8
?? ()
0x43db8:    ldr r3, [r11, #-16]
?? ()
0x43dbc:    mov r0, r3
?? ()
0x43dc0:    sub sp, r11, #12
?? ()
0x43dc4:    pop {r4, r5, r11, pc}
?? ()
0x3fb94:    ldr r3, [r11, #-8]
?? ()
0x3fb98:    mov r0, r3
?? ()
0x3fb9c:    sub sp, r11, #4
?? ()
0x3fba0:    pop {r11, pc}
?? ()
0x3da68:    ldr r3, [r11, #-8]

        ... 
```

Kris Kaspersky 写道，通过编译器优化器传递跟踪器协议是一个好主意，以便更好地理解这个程序。但是我不知道应该使用什么编译器以及应该以什么方式使用。

PS我应该怎么做才能摆脱不必要的行：“？？（）”？我应该怎么做才能将 GDB 重定向到文件中？

**编辑：**

书籍：Kris Kaspersky “Искусство дизассемблирования”，俄语书籍（翻译 - “拆卸的艺术”）。第 39 章，第 822 页（在列表下）。我不知道是否存在英语类似物。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T03:16:03.323

> Kris Kaspersky 写道，通过编译器优化器传递跟踪器协议是一个好主意，以便更好地理解这个程序。但是我不知道应该使用什么编译器以及应该以什么方式使用。

我知道编译器是什么，但仍然不知道你在说什么。如果您提供指向您正在阅读的文档的链接，您可能会得到更好的答案。

> 我应该怎么做才能摆脱不必要的行：“？？（）”？

用于`grep`过滤掉它们，例如

```
grep -v '\?' trace.txt > clean-trace.txt 
```

或者

```
grep '^0x' trace.txt > clean-trace.txt 
```

> 我应该怎么做才能将 GDB 重定向到文件中？

```
(gdb) set logging on  # output will now be copied to gdb.txt 
```

# ruby-on-rails-3 - 从字段中使用表别名的 ActiveRecord 查询

> ID：10072248
> 
> 赞同：1
> 
> 时间：2012-04-09T11:03:14.667
> 
> 标签：ruby-on-rails-3, activerecord

如何将此查询放入 rails 3.2 中的范围？关键是访问两个不同的表条目并选择它们共同的信息。

```
SELECT u1.FirstName, u2.FirstName
FROM User AS u1, User AS u2
WHERE u2.LastName=u1.LastName 
```

您知道以更好的性能实现这一目标的其他方法吗？

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T16:05:36.327

假设我理解你的问题，你可以这样做：

```
User.joins('join users as u2 on users.last_name = u2.last_name and users.id != u2.id') 
```

这将为您提供与任何其他用户具有相同姓氏的所有用户。

# c# - 通用函数 对不同类型的集合进行排序

> ID：10072250
> 
> 赞同：3
> 
> 时间：2012-04-09T11:03:24.807
> 
> 标签：c#, .net, asp.net-mvc-3, linq, entity-framework

我有许多类型的集合我想按不同的属性对每个集合进行排序。比如`IEnumerable<Employee>`会按`Name`and`Age`属性排序， `IEnumerable<Department>`会按`NumberOfEmployees`and`DepartmentName`属性排序。我`PaginatedList`习惯在对集合进行排序后对其进行分页。

```
public class PaginatedList<T> : List<T>
{
  public PaginatedList(IEnumerable<T> source, Int32 pageIndex, Int32 pageSize , Func<T,Object> orderBy)
  {
    this.AddRange(source.OrderBy(orderBy).Skip((PageIndex - 1) * PageSize).Take(PageSize));
  }
} 
```

请注意第 4 个参数，它将传递给 OrderBy 扩展方法的排序委托。

我正在使用通用方法来生成第 4 个元素

```
public Func<T, Object> SortingFactory<T>(String sortby) 
{
  switch (typeof(T).ToString())
  {
    case "Employee":
      switch(sortby)
      {
        case "Name":
           return new Func<Employee,String>(delegate(Employee e) { return e.Name; });
           break;                            
        case "Age":
           return new Func<Employee,Int32>(delegate(Employee e) { return e.Age; });
           break;
      }
      break;
    case "Department":
      switch(sortby)
      {
        case "NumberOfEmployees":
           return new Func<Department,Int32>(delegate(Department d) { return d.NumberOfEmployees; });
           break;                            
        case "DepartmentName":
           return new Func<Department,String>(delegate(Department d) { return d.DepartmentName; });
           break;
      }
      break;
  }
} 
```

但它给了我一个编译错误`Cannot implicitly convert type 'System.Func<Employee,String>' to 'System.Func<T,object>'`

我也尝试将输出标记为，`Func<Object,Object>`但我得到了同样的错误。

我犯了什么错误以及如何使用这种方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T13:18:51.570

说我理解得很好

```
public class PaginatedList<T> : List<T>
{
  public PaginatedList(IEnumerable<T> source, Int32 pageIndex, Int32 pageSize )
  {
    this.AddRange(GetOrderFor<T>().Skip((PageIndex - 1) * PageSize).Take(PageSize));
  }
}

public static class Helpers
    {

        public static Func<T, object> GetSortExpression<T>(string sortExpressionStr)
        {
            var param = Expression.Parameter(typeof (T), "x");
            var sortExpression = Expression.Lambda<Func<T, object>>(Expression.Convert(Expression.Property(param, sortExpressionStr), typeof(object)), param);
            return sortExpression.Compile();
        }

        public static IOrderedEnumerable<T> GetOrderFor<T>(this IEnumerable<T> list)
        {
            switch (typeof (T).Name)
            {
                case "Employee":
                    return list.OrderBy(GetSortExpression<T>("Name")).ThenBy(GetSortExpression<T>("Age"));
                case "Category":
                    return list.OrderBy(GetSortExpression<T>("Name")).ThenBy(GetSortExpression <T> ("Id"));
            }
            return null;
        }
    } 
```

如果我误解了，我认为 GetSortExpression 方法的简单用法可以帮助您避免错误

```
case "Employee":
      switch(sortby)
      {
        case "Name":
           return Helpers.GetSortExpression<T>("Name");                           
        case "Age":
           return Helpers.GetSortExpression<T>("Age");
      } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T13:26:29.760

您的代码的主要问题源于尝试在泛型类型之间进行转换。这里给出的解决方案应该避免这种情况。

您应该能够使用该`Comparer<T>`课程。以下是对 s 进行排序的示例`Employee`：

```
class EmployeeComparer : Comparer<Employee>
{
    string property;

    public EmployeeComparer(string Property)
    {
        this.property = Property;
    }

    public override int Compare(Employee x, Employee y)
    {
        switch (this.property)
        {
            case "Name":
                return Comparer<string>.Default.Compare(x.Name, y.Name);
            case "Age":
                return Comparer<int>.Default.Compare(x.Age, y.Age);
            default:
                return 0;
        }
    }
} 
```

这`DepartmentComparer`将非常相似。

编辑：这是`property`抽象为基类的字段，经过修改`EmployeeComparer`：

```
abstract class PropertyComparer<T> : Comparer<T>
{
    protected string property;

    public PropertyComparer(string Property)
    {
        this.property = Property;
    }
}

class EmployeeComparer : PropertyComparer<Employee>
{
    public EmployeeComparer(string Property) : base(Property)
    {

    }

    public override int Compare(Employee x, Employee y)
    ...
} 
```

然后您可以编写一个函数来获取所需类型的比较器：

```
Comparer<T> GetComparer(string Property)
{
    // Sadly, you cannot switch on a Type
    if (typeof(T) == typeof(Employee))
    {
        return new EmployeeComparer(Property) as Comparer<T>;
    }
    else if (typeof(T) == typeof(Department))
    {
        return new DepartmentComparer(Property) as Comparer<T>;
    }
    else
    {
        return Comparer<T>.Default;
    }
} 
```

那很可能属于`PaginatedList`该类：

```
public class PaginatedList<T> : List<T>
{
    Comparer<T> GetComparer(string Property)
    ...

    public PaginatedList(IEnumerable<T> source, int pageIndex, int pageSize, string orderBy)
    {
        Comparer<T> comparer = GetComparer(orderBy);
        this.AddRange(source.OrderBy(x => x, comparer).Skip((PageIndex - 1) * PageSize).Take(PageSize));
    }
} 
```

HTH。我没有测试它，但是如果您发现错误，请发表评论。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T14:40:13.913

您需要一个更通用的版本`SortingFactory`，它会返回任何类型的 lambda。基本上，这会将字符串转换为可用于排序的强类型表达式：

```
public Expression<Func<T, To>> SortingFactory<T, To>( String sortby )
{
    // Entity type
    System.Type dataType = typeof( T );

    // Entity - main parameter (x =>
    ParameterExpression rootExp = Expression.Parameter(dataType, "x" );

    // property (x => x.Property
    PropertyInfo pi = dataType.GetProperty( sortby );

    // put together
    Expression expr = Expression.Property( rootExp, pi );
    return Expression.Lambda<Func<T, To>>( expr, rootExp );
} 
```

我没有它，但你可能想检查它`pi`不为空。这还假设传入的字符串是标量属性，而不是实体或集合 - 这有点棘手。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-09T21:07:58.287

> ```
> Cannot implicitly convert type 'System.Func<Employee,String>' to 'System.Func<T,object>' 
> ```

此错误告诉您`Func<X, string>`不继承自`Func<X, object>`（即使字符串继承自对象）。这是一个非常常见的泛型错误！ `List<Customer>`不继承自`List<object>`. 如果是这样，你可以摆脱这个：

```
List<Customer> c = new List<Customer>();
List<object> x = (List<object>) c;
x.Add(x)
//List<object> is-a object, so the statement is valid,
//  but a List<Customer> is not a Customer, breaks the instance referenced by c
// instead of breaking c's instance, you get a runtime exception on line 2 - invalid cast. 
```

* * *

许多答案都转向表达操纵的东西。我觉得锤子太重了，无法解决这个问题......

您需要做的是删除/隐藏第二个通用参数，就像我在[这里](https://stackoverflow.com/questions/7737355/store-multi-type-orderby-expression-as-a-property/7742446#7742446)所做的那样。

```
public interface IOrderer<T>
{
  IOrderedEnumerable<T> ApplyOrderBy(IEnumerable<T> source);
  IOrderedEnumerable<T> ApplyOrderByDescending(IEnumerable<T> source);
  IOrderedEnumerable<T> ApplyThenBy(IOrderedEnumerable<T> source);
  IOrderedEnumerable<T> ApplyThenByDescending(IOrderedEnumerable<T> source);
} 

public class Orderer<T, U> : IOrderer<T>
{
  private Func<T, U> _orderFunc;
  public Orderer(Func<T, U> orderFunc)
  { _orderFunc = orderFunc; }
  public IOrderedEnumerable<T> ApplyOrderBy(IEnumerable<T> source)
  { return source.OrderBy(_orderFunc); }
  public IOrderedEnumerable<T> ApplyOrderByDescending(IEnumerable<T> source)
  { return source.OrderByDescending(_orderFunc); }
  public IOrderedEnumerable<T> ApplyThenBy(IOrderedEnumerable<T> source)
  { return source.ThenBy(_orderFunc); }
  public IOrderedEnumerable<T> ApplyThenByDescending(IOrderedEnumerable<T> source)
  { return source.ThenByDescending(_orderFunc); }
} 
```

然后你的方法：

```
public class PaginatedList<T> : List<T>
{
  public PaginatedList(
    IEnumerable<T> source,
    Int32 pageIndex, Int32 pageSize,
    IOrderer<T> orderer)
  {
    IEnumerable<T> query = orderer.ApplyOrderBy(source)
      .Skip((PageIndex - 1) * PageSize)
      .Take(PageSize)  
    this.AddRange(query);
  }
} 
```

或者，当你想要多重排序（不可避免地会发生）时，这个：

```
public class PaginatedList<T> : List<T>
{
  public PaginatedList(
    IEnumerable<T> source,
    Int32 pageIndex, Int32 pageSize,
    List<IOrderer<T>> orderers)
  {
    IEnumerable<T> query = source;

    if (orderers.Any())
    {
      IOrderer<T> firstOrder = orderers.First();
      IOrderedEnumerable<T> orderedQuery = firstOrder.ApplyOrderBy(source);
      foreach(IOrderer<T> nextOrder in orderers.Skip(1))
      {
        orderedQuery = nextOrder.ApplyThenBy(orderedQuery);
      }
      query = orderedQuery;
    }

    this.AddRange(query.Skip((PageIndex - 1) * PageSize).Take(PageSize));
  }
} 
```

之后，您只需向 IOrderer 和 Orderer 添加一些属性，以便它知道它是否应该是 asc/desc，并且您应该将所有排序都包装起来。

* * *

（更有趣，你的分拣工厂）

```
public IOrderer<T> SortingFactory<T>(String sortby)
{
  switch (typeof(T).ToString())
  {
    case "Employee":
       switch(sortby)
       {
         case "Name":
            return new Orderer<Employee, string>(e => e.Name); //hmm, not sure this will work.
            break; 
```

# java - Android sqlite 插入数据 SQLiteException

> ID：10072251
> 
> 赞同：1
> 
> 时间：2012-04-09T11:03:25.507
> 
> 标签：java, android, sqlite

```
 @Override
    public void onCreate(SQLiteDatabase db) {
        db.execSQL(DATABASE_CREATE);
        // providers data
//      db.execSQL("insert  into "
//              + TABLE_PROVIDERS
//              + " (_id, provider_id, parent_id, title, image, sh_n, enable, visible, image_bg, type, is_group, hide_in_search, limit_min, limit_max, off_on_line, invoice_search) "
//              + "VALUES (1,600,101,'Источники оплаты','',1,1,0,'','',1,1,0,0,0,0)");

        ContentValues cv = new ContentValues();
        cv.put("_id", 1);
        cv.put("provider_id", 600);
        cv.put("parent_id", 101);
        cv.put("title", "Bla");
        cv.put("image", "bla");
        cv.put("sh_n", 1);
        cv.put("enable", 1);
        cv.put("visible", 1);
        cv.put("image_bg", "");
        cv.put("type", "");
        cv.put("is_group", 1);
        cv.put("hide_in_search", 1);
        cv.put("limit_min", 10);
        cv.put("limit_max", 10000);
        cv.put("off_on_line", 1);
        cv.put("invoice_search", 1);

        db.insertOrThrow(TABLE_PROVIDERS, null, cv);
} 
```

现在我按照建议做，逐行插入：

```
import java.util.*;

import android.content.*;
import android.database.*;
import android.database.sqlite.*;

public class ProviderDataSource {

    private SQLiteDatabase database;
    private MySQLiteHelper dbHelper;

    public ProviderDataSource(Context context) {
        dbHelper = new MySQLiteHelper(context);
    }

    public void open() throws SQLException {
        database = dbHelper.getWritableDatabase();
    }

    public void close() {
        dbHelper.close();
    }

    public List<Provider> getProvidersByParentId(long parentId) {

        List<Provider> providersList = new ArrayList<Provider>();

        Cursor cursor = database.query(MySQLiteHelper.TABLE_PROVIDERS, new String[] { "provider_id", "title", "image" }, " parent_id=" + parentId,
                null, null, null, null);

        cursor.moveToFirst();
        while (!cursor.isAfterLast()) {
            Provider provider = cursorToProvider(cursor);
            providersList.add(provider);
            cursor.moveToNext();
        }
        cursor.close();
        System.out.println("getProvidersByParentId");
        return providersList;
    }

    private Provider cursorToProvider(Cursor cursor) {

        Provider provider = new Provider();
        provider.setId(cursor.getInt(1));
        provider.setTitle(cursor.getString(3));
        provider.setImg(cursor.getString(4));

        return provider;

    }

} 
```

它不起作用。似乎没有插入该行，并且 getProvidersByParentId 方法返回的数组为空。Parent_id 作为参数是 101。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T11:08:42.157

您的插入语句是错误的。在 SQLite 中，您不能通过用逗号分隔来插入多条记录，实际上您需要为此准备单独的插入命令。但如果您的 SQLite 版本是**3.7.11**，那么它是可能的。

读[这个](https://stackoverflow.com/questions/1609637/is-it-possible-to-insert-multiple-rows-at-a-time-in-an-sqlite-database)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T11:29:56.273

你可以用这样的for循环来做到这一点

// 添加一个按钮单击事件，如

字符串[] arr1 = 新字符串[n]; 字符串[] arr2 = 新字符串[n]; 字符串[] arr3 = 新字符串[n];

```
addButton.setOnClickListener
            (
                new View.OnClickListener()
                {
                    @Override public void onClick(View v) {

                               for(int i=1;1<4;i++){

            try
            {
                // ask the database manager to add a row given the two strings

                //db object of database manager class 

                db.addValues
                (
                    arr1[i] , 
                    arr2[i] , 
                    arr3[i] , 

                );

                           }
catch (Exception e)
            {
                Log.e("Add Error", e.toString());
                e.printStackTrace();
            }

                                }

                                     ); 
```

//插入函数

```
public void addValues(String Col1, String Col2,
                          String col3)

{

ContentValues values = new ContentValues();

        values.put(Columns1, Col1);
        values.put(Columns2, Col2);
        values.put(Columns3, Col3);

try{
            db.insert(Course_Info_Table, null, values);

}
        catch(Exception e)
        {

        }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T11:46:22.337

用于`ContentValues`将数据插入到这样的表中。

```
SQLiteDatabase db = this.getWritableDatabase();
        ContentValues cv = new ContentValues();

        cv.put("_id", 1);
        cv.put("provider_id", 600);
        cv.put("parent_id", 0);

        cv.put("title", "Источники оплаты");
        cv.put("image", "");
        cv.put("sh_n", 1);
        cv.put("enable", 1);
        cv.put("visible", 0);
        cv.put("image_bg", "");
        cv.put("type", "");
        cv.put("is_group", 1);
        cv.put("hide_in_search", 1);
        cv.put("limit_min", 0);
        cv.put("limit_max", 0);
        cv.put("off_on_line", 0);
        cv.put("invoice_search", 0);
        db.insertOrThrow(TABLE_PROVIDERS, null, cv);
          db.close(); 
```

**对于多条记录，多次调用此方法。**

```
public void insertMydata(int _id, int provider_id, int parent_id /*....add more parameters as you required */){

                SQLiteDatabase db = this.getWritableDatabase();
            ContentValues cv = new ContentValues();

            cv.put("_id", _id);
            cv.put("provider_id", provider_id);
            cv.put("parent_id", parent_id);
               /*
                 ......
                 ..... 
                 put more code here for other columns
                 ......
               */
                db.insertOrThrow(TABLE_PROVIDERS, null, cv);
                db.close();

} 
```

# java - 使用哪个 Java Web 框架和 Web 应用程序服务器？

> ID：10072258
> 
> 赞同：-1
> 
> 时间：2012-04-09T11:04:00.363
> 
> 标签：java

我有 Intranet 高度用户交互的 ASP.net 应用程序，现在我将用 Java 开发它，因为它是必需的。我需要知道我应该使用什么样的 java web 框架......全栈框架或 MVC 框架？我将使用 jQuery、javascript、ajax 以及客户端和服务器端验证。哪个框架最适合我的应用程序？我需要了解 Glassfish、Websphere 和 Weblogic 以及任何其他应用程序服务器的比较。哪一个适合我的 Web 应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T12:22:59.070

从来没有“最好的 Web 框架”或“最好的应用服务器”。每个框架和服务器都有其优点和缺点。

我强烈建议自己概述一下当前可用的不同 Java Web 框架。

哪个 Web 框架和哪个应用程序服务器最适合您的需求实际上取决于您的应用程序。同样，没有“最好的产品”。

与应用程序服务器一起评估 Web 框架。

# android - 线程更新不适用于选定的客户端

> ID：10072259
> 
> 赞同：26
> 
> 时间：2012-04-09T11:04:00.683
> 
> 标签：android, eclipse, debugging

当我打开 ddms 透视图时，我收到消息-----线程更新不适用于选定的客户端。它还告诉我使用工具栏按钮启用-----但我看不到这样的按钮。有什么问题。请帮忙。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-05-31T07:02:25.923

在 DDMS 透视图中，左侧应该有“设备”窗口（按标准）。否则，通过转到菜单 Window -> Show View -> Other 打开它。在弹出窗口中导航到 Android -> 设备，然后按 OK。

该按钮（您找不到）是“设备”窗口左侧的第五个按钮，该按钮与您收到错误的“线程”窗口具有相同的图标。按下它，它应该会更新，您可以看到线程。

更多细节和图片[看这里](http://spacetech.dk/android-thread-updates-not-enabled-for-selected-client-use-toolbar-button-to-enable.html)

# android - 在 android 中播放 Flash .swf 文件？

> ID：10072264
> 
> 赞同：0
> 
> 时间：2012-04-09T11:04:27.343
> 
> 标签：android, flash

我有这个代码：

```
 package flash.play;

       import android.app.Activity;
       import android.os.Bundle;
        import android.os.Environment;
     import android.webkit.WebView;

     public class flashplay extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    WebView wv=(WebView) findViewById(R.id.wv);
    wv.getSettings().setJavaScriptEnabled(true);
    wv.getSettings().setPluginsEnabled(true);
    String url ="file:///android_asset/abcd.swf";

    wv.getSettings().setPluginsEnabled(true);

    wv.loadUrl(url);

}
 } 
```

但是我在模拟器上只得到一个白屏有人可以帮我在 Webview 上播放这个文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T12:57:59.103

请将此添加到您的 AndroidMainfest.xml

**安卓：硬件加速 = “真”**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T11:17:46.170

您应该在设备上对其进行测试。不在模拟器上

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T11:27:32.437

我对我所做的是创建了一个 html 文件并在 WebView 中调用我的 html 文件。在我的 html 文件中，我使用 swfobject 加载我的 swf 文件。我希望这可以帮助别人。

# ios - 如何使用 ASIHTTPDownloadCache 进行缓存？

> ID：10072266
> 
> 赞同：0
> 
> 时间：2012-04-09T11:04:28.720
> 
> 标签：ios, asihttprequest

在我的代码中，我正在下载应用程序生命周期开始时的所有图像：

```
[ASIHTTPRequest setDefaultCache:[ASIDownloadCache sharedCache]];

     NSURL *url = [NSURL URLWithString:[item imagePath]];
     __block ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];
     [request setCompletionBlock:^{
     //NSData *responseData = [request responseData];
     //[iw setImage: [UIImage imageWithData:responseData] forState:UIControlStateNormal];   
}];

[request setFailedBlock:^{
     // NSError *error = [request error];
     //[iw setImage:nil forState:UIControlStateNormal];         
}];

[request setCacheStoragePolicy:ASICachePermanentlyCacheStoragePolicy];
     [request startSynchronous];
}]; 
```

所有图像名称都是唯一的。而且它们不会经常变化。我需要的是，在应用程序完成后也将图像保留在缓存中。当我再次打开应用程序时，它会从下载的缓存中读取它。
可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T11:12:46.590

这确实是可能的。您的缓存存储策略已经正确。

您还需要指定适当的缓存策略，请参阅[http://allseeing-i.com/ASIHTTPRequest/How-to-use#about_cache_policies](http://allseeing-i.com/ASIHTTPRequest/How-to-use#about_cache_policies)

这里重要的是要注意数据的到期日期。在默认模式下，ASIHTTPRequest 会关心过期日期，如果数据过期，将重新加载数据。根据我的经验，服务器通常没有指定适当的到期日期，因此请考虑使用`ASIOnlyLoadIfNotCachedCachePolicy`.

如果您愿意，您也可以自己指定到期日期（这对您来说可能更有趣，因为您的图像有时会发生变化）。按照我的链接，您需要的所有信息都在那里（请参阅“其他与缓存相关的功能”）。

哦，还有一件事：ASIHTTPRequest 不再是*最新的*了。开发商已放弃该项目。因此 ASIHTTPRequest 不支持 ARC 等。如果可以，请切换到另一个框架，如 AFNetworking 或 RestKit。

# css - 为什么我的 css 内容框在 Firefox 和 Internet Explorer 中的大小不同？

> ID：10072273
> 
> 赞同：0
> 
> 时间：2012-04-09T11:05:01.587
> 
> 标签：css, html

*编辑/已解决*找到我自己的答案。对于每个想知道的人来说，它是：

```
DIV{-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0;} 
```

我有以下 CSS 代码，我认为它非常“正常”，因此我应该被所有浏览器平等地解释。问题是，在 Firefox 中，该框比 Internet Explorer 中的框宽约 20 像素。原因是什么？我怎样才能让它们同样宽？

这是CSS代码：

```
<style type="text/css">
.commentbox{
background-color: #ffffff;
width: 200px;

border-top-color: #D1D1D1;
border-top-style: solid;
border-top-width: 1px;

border-bottom-color: #D1D1D1;
border-bottom-style: solid;
border-bottom-width: 1px;        

border-left-color: #D1D1D1;
border-left-style: solid;
border-left-width: 1px;

border-right-color: #D1D1D1;
border-right-style: solid;
border-right-width: 1px;    

box-shadow: 1px 1px 1px rgba(0, 0, 0, 0.09);
padding-bottom: 9px;
padding-left: 9px;
padding-right: 9px;
padding-top: 9px;

position:relative;
display:block;
}

.title{
padding-top: 5px;
padding-bottom: 5px;
font-family: Verdana;
font-size: 12px;
}

.count{
text-align:right;
}
</style> 
```

和 HTML 代码：

```
<body bgcolor="#f3f3f3">
<div class="commentbox">
<div class="title">some long long long text that might take up two lines</div>
<div class="count">123</div>
</div> 
```

这是一个[jsfiddle示例](http://jsfiddle.net/vvAXu/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T11:15:08.340

您的 Doctype 或缺少 Doctype 会导致浏览器以 Quirks 模式呈现您的页面。在这种模式下，他们倾向于模仿古代浏览器的错误，而不是遵循标准。Quirks 模式下的浏览器之间存在许多不一致的地方。

Internet Explorer 中的错误之一是它位于元素的`padding`内部`width`。(new, draft,experimental)`box-sizing`属性允许浏览器故意这样做。

您应该使用触发标准模式的 Doctype 以避免与标准代码不一致。

HTML 4.01 Strict 通常是现代文档的最佳选择。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
   "http://www.w3.org/TR/html4/strict.dtd"> 
```

您还可以考虑 HTML 5 草案：

```
<!DOCTYPE HTML> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T14:52:49.863

如果是 CSS3，请尝试使用`box-sizing: content-box | border-box | inherit` [http://htmlbook.ru/css/box-sizing](http://htmlbook.ru/css/box-sizing)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T11:13:26.933

你看到哪个版本的 ie 有什么不同。我正在用 ie9 尝试这个，它们对我来说是一样的。我把它放在 fiddle 中以查看[myfiddle](http://jsfiddle.net/ryanwfiorini/XNLCG/)。

试着阅读这篇文章，看看这是否解释了你所看到的。
[http://en.wikipedia.org/wiki/Internet_Explorer_box_model_bug](http://en.wikipedia.org/wiki/Internet_Explorer_box_model_bug)

# vb.net - 如何从 RowCommand 上的 DataTable 中删除 DataRow

> ID：10072276
> 
> 赞同：1
> 
> 时间：2012-04-09T11:05:13.567
> 
> 标签：vb.net, gridview, datatable

我正在尝试从数据表中删除网格视图中选定的行，但它似乎没有删除。如果语句 Table.Rows.Count = 0 不起作用，我正在尝试在网格视图中使用一行。

```
Protected Sub GridView1_RowCommand(sender As Object, e As System.Web.UI.WebControls.GridViewCommandEventArgs) Handles GridView1.RowCommand
    Dim index As Integer = Convert.ToInt32(e.CommandArgument)

    Dim Table As New DataTable
    Table = GridView1.DataSource
    Dim iOriPrice As Double
    iOriPrice = Table.Rows(index).Item("sPrice")
    Table.Rows(index).Delete()
    'reset table and set to gridview
    If Table.Rows.Count = 0 Then
        Table.Reset()
        GridView1.DataSource = Table
        GridView1.DataBind()
        lblTotalAm.Text = ""
        lblTotalMsg.Text = "Shopping Cart is empty"
        Session.Add("BuyTable", Table)
        btnBuyNow.Visible = False
    Else
        'calculate total sum and 
        Dim newTotal As Double
        newTotal = Convert.ToDouble(lblTotalAm.Text) - iOriPrice
        lblTotalAm.Text = newTotal
        Session.Add("BuyTable", Table)
        GridView1.DataSource = Table
        GridView1.DataBind()
    End If

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T11:09:08.063

从哪里来？`index`_ `Table.Rows(index).Delete()`

无论如何，这只是*在内存中*`Delete()`标记要删除的记录。您需要添加一个以将其从数据库中删除。 *`Adapter.Update()`*

# iphone - 如何从 iPhone 的文档目录中删除超过两天的文件

> ID：10072281
> 
> 赞同：-1
> 
> 时间：2012-04-09T11:05:25.600
> 
> 标签：iphone

我有一个应用程序，我在其中录制声音文件并将其存储在应用程序文档目录中。

我想要的是，它应该只包含昨天和几天前的文件，并从 iPhone 应用程序的文件夹中删除所有其他文件。有没有办法做到这一点？

谢谢 ..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-09T11:21:59.633

请看下面的代码。

```
//Get the Document directory path.
 #define kDOCSFOLDER [NSHomeDirectory() stringByAppendingPathComponent:@"Documents"]

//Delete files by iterating items of the folder.
NSFileManager* fm = [[[NSFileManager alloc] init] autorelease];
NSDirectoryEnumerator* en = [fm enumeratorAtPath:kDOCSFOLDER];    
NSError* err = nil;
BOOL res;

NSString* file;
while (file = [en nextObject]) {
            // Date comparison.
    NSDate   *creationDate = [[fm attributesOfItemAtPath:file error:nil] fileCreationDate];
    NSDate *yesterDay = [[NSDate date] dateByAddingTimeInterval:(-1*24*60*60)];

    if ([creationDate compare:yesterDay] == NSOrderedAscending)
    {
        // creation date is before the Yesterday date
        res = [fm removeItemAtPath:[kDOCSFOLDER stringByAppendingPathComponent:file] error:&err];

        if (!res && err) {
            NSLog(@"oops: %@", err);
        }

    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T11:12:04.653

如果你搜索得很少，你会得到这个：

```
 [fileManager removeItemAtPath: fullPath error:NULL]; 
```

因此，您可以使用以下方式获取文件的创建日期：

```
NSFileManager* fileManager = [NSFileManager defaultManager];
NSDictionary* dict = [fileManager attributesOfItemAtPath:filePath error:nil];
NSDate *date = (NSDate*)[dict objectForKey: NSFileCreationDate]; 
```

比较 if 条件中的这些日期并删除这些文件。

> 更新 1：删除超过两天的文件的工作代码。

```
// Code to delete images older than two days.
   #define kDOCSFOLDER [NSHomeDirectory() stringByAppendingPathComponent:@"Documents"]

NSFileManager* fileManager = [[[NSFileManager alloc] init] autorelease];
NSDirectoryEnumerator* en = [fileManager enumeratorAtPath:kDOCSFOLDER];    

NSString* file;
while (file = [en nextObject])
{
    NSLog(@"File To Delete : %@",file);
    NSError *error= nil;

    NSString *filepath=[NSString stringWithFormat:[kDOCSFOLDER stringByAppendingString:@"/%@"],file];

    NSDate   *creationDate =[[fileManager attributesOfItemAtPath:filepath error:nil] fileCreationDate];
    NSDate *d =[[NSDate date] dateByAddingTimeInterval:-2*24*60*60];

    NSDateFormatter *df=[[NSDateFormatter alloc]init];// = [NSDateFormatter initWithDateFormat:@"yyyy-MM-dd"];
    [df setDateFormat:@"EEEE d"]; 

    NSString *createdDate = [df stringFromDate:creationDate];

     NSString *twoDaysOld = [df stringFromDate:d];

    NSLog(@"create Date----->%@, two days before date ----> %@", createdDate, twoDaysOld);

    // if ([[dictAtt valueForKey:NSFileCreationDate] compare:d] == NSOrderedAscending)
    if ([creationDate compare:d] == NSOrderedAscending)

    {
        if([file isEqualToString:@"RDRProject.sqlite"])
        {

            NSLog(@"Imp Do not delete");
        }

        else
        {
             [[NSFileManager defaultManager] removeItemAtPath:[kDOCSFOLDER stringByAppendingPathComponent:file] error:&error];
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-09-14T10:34:30.460

请快速检查以下代码：

```
func cleanUp() {
    let maximumDays = 2.0
    let minimumDate = Date().addingTimeInterval(-maximumDays*24*60*60)
    func meetsRequirement(date: Date) -> Bool { return date < minimumDate }

    func meetsRequirement(name: String) -> Bool { return name.hasPrefix(applicationName) && name.hasSuffix("log") }

    do {
        let manager = FileManager.default
        let documentDirUrl = try manager.url(for: .documentDirectory, in: .userDomainMask, appropriateFor: nil, create: false)
        if manager.changeCurrentDirectoryPath(documentDirUrl.path) {
            for file in try manager.contentsOfDirectory(atPath: ".") {
                let creationDate = try manager.attributesOfItem(atPath: file)[FileAttributeKey.creationDate] as! Date
                if meetsRequirement(name: file) && meetsRequirement(date: creationDate) {
                    try manager.removeItem(atPath: file)
                }
            }
        }
    }
    catch {
        print("Cannot cleanup files: \(error)")
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T11:42:22.880

请检查以下代码：

```
NSArray *dirContents = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:[NSHomeDirectory() stringByAppendingPathComponent:@"Documents"] error:nil];
for (NSString *file in dirContents) {
    NSError *error= nil;
    NSDictionary *dictAtt = [[NSFileManager defaultManager] attributesOfItemAtPath:/*file path*/ error:&error];

    NSDate *d =[[NSDate date] dateByAddingTimeInterval:-86400];
    if ([[dictAtt valueForKey:NSFileCreationDate] compare:d] == NSOrderedAscending) {
        [[NSFileManager defaultManager] removeItemAtPath:/*file path*/ error:&error];
    }
} 
```

# watir - 如何提取 watir 中的悬停框信息并将其打印到 STDOUT

> ID：10072282
> 
> 赞同：0
> 
> 时间：2012-04-09T11:05:25.830
> 
> 标签：watir, watir-webdriver, firewatir

我必须将悬停框信息内容打印到标准输出上，我以下面的方式尝试了它对我不起作用。

```
data = $browser.div(:class => "homeSectionLabel textWidget",:text => /Pool A/ ).hover

print "Data  #{data} \n" 
```

另一个问题是我有其他名为 Pool B 的小部件具有相同的类名。如何访问该悬停信息

```
<div class="widgetContainer poolContainer">
<div class="healthBadge healthUnknown" style="top: -5px; left: -5px;"></div>
<div class="homeSectionLabel textWidget">Pool‌·A</div>
<div class="perfDisplay homePoolPerf">
</div>
<div class="homePoolVolText textWidget">9‌·Volumes,‌·0‌·Snapshots</div>
<div class="spaceMeterContainer poolMeter" style="width: 265px; height: 20px;">
</div>
<table class="tableWidget homeTiers" cellspacing="0" cellpadding="0" border="0">
</table>
</div> 
```

Anyhelp 真的很感激。

谢谢！
阿迪亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T21:42:42.427

目前这不是一个答案，但我要说的内容不适合评论

div 中文本中的“内容”通常使用 .text 方法访问

'tooltip' 文本可以通过多种方式完成，可以通过 alt 属性，可以通过 'onmouseover' 事件触发的 javascript，或者通常通过 :hover psuedoclass 由 CSS 驱动。

如果一个 div 只是更改它的显示属性或位置以便它对用户可见，那么您需要做的就是弄清楚如何定位该 div，并从中获取 .text

mydata = browser.div(:how => 'what').text

如果 div（或其他容器）的内容由于鼠标悬停/悬停而发生变化，那么您需要模拟该操作，稍等片刻以允许客户端代码运行，然后从中获取 .text被改变的容器。

* * *

如果没有看到有代码在其上运行的页面，很难判断是哪种情况，尽管鉴于我在您提供的代码中没有看到类似“onmouseover”之类的东西，我的第一个赌注是这是由 CSS 驱动的。

您上面的代码正在返回执行 .hover 方法的 div 对象的结果，据我所知，这将是 nil ，因为该方法会导致某些事情发生，但不会返回值。

'Pool A' 是您要捕获的文本，还是您的 mouse_over 导致其他文本对用户可见？如果它是您鼠标悬停的内容，那么您是否搜索过 HTML 以查看是否可以找到出现在其他 div 中的文本？

如果您只需要从给定类的每个 div 中获取文本，请尝试这样的操作

```
browser.divs(:class => "homeSectionLabel textWidget").each do |div|
  puts div.text
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T20:06:10.420

根据最近的评论，这将从页面上的所有 div 中收集类名并将其打印到控制台。

```
$browser.divs.each do |div|
puts div.class
end 
```

如果您希望将“puts div.class”放在文件中，请将其替换为文件指令。这里的任何输出都是简单的 Ruby。

# java - 带有路径变量的多个值的请求映射 - Spring 3.0

> ID：10072284
> 
> 赞同：12
> 
> 时间：2012-04-09T11:05:40.650
> 
> 标签：java, spring, spring-mvc, spring-3

```
@RequestMapping(value = {"/userDetails", "/userDetails/edit/{id}"}, method = RequestMethod.GET)
public String userDetails(Map Model,****) {
//what goes here? 
} 
```

我对该`userDetails`方法的论点是什么？我如何区分`/userDetails`和`/userDetails/edit/9`在方法内？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-09T11:40:58.453

理想情况下，我们可以通过`@PathVariable`在方法参数中使用注释来获取路径变量，但是在这里您使用了 url 数组，`{"/userDetails", "/userDetails/edit/{id}"}`因此这将在提供请求时出错`localhost:8080/domain_name/userDetails`，在这种情况下，不会向 @PathVariable 提供 id。

因此，您可以通过在方法中使用参数 HttpServletRequest request 并使用以下请求对象来获得差异（通过哪个请求） -

字符串 uri = request.getRequestURI();

代码是这样的 -

```
 @RequestMapping(value = {"/userDetails", "/userDetails/edit/{id}"}, method=RequestMethod.GET)
   public String userDetails(Map Model,HttpServletRequest request) {
   String uri = request.getRequestURI();  
  //put the condition based on uri
 } 
```

# c# - 从超类的泛型方法调用子类的泛型方法

> ID：10072285
> 
> 赞同：1
> 
> 时间：2012-04-09T11:05:46.660
> 
> 标签：c#, generics, .net-3.5

我有两个类：超类和派生的子类：超类。我有一个通用方法：

```
public void DoSmth<T>(T obj)
    where T : Superclass
{
    if(typeof(T).IsSubclassOf(typeof(Subclass))
    {
        DoSmth2<T>(obj);
    }
    //...
}

public void DoSmth2<T>(T obj)
    where T : Subclass
{ 
    //... 
} 
```

如您所见，我想从超类的泛型方法中调用子类的泛型方法。但是编译器说我不能这样做：

```
The type 'T' cannot be used as type parameter 
'T' in the generic type or method 'DoSmth2<T>(T)'. 
There is no implicit reference conversion from 'T' to 'Subclass' 
```

我使用.Net 3.5。我知道我不能像上面写的那样做，但是有什么办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T11:15:27.827

你不能，但你也不必。

```
public void DoSmth<T>(T obj)
    where T : Superclass
{

   //untested but something like this
    Subclass obj2 = (obj as Subclass);   
    if(obj2 != null)
    {
        DoSmth2(obj2);
    }
    //...
} 
```

# c++ - 在 parallel_for 中定义的变量范围

> ID：10072286
> 
> 赞同：1
> 
> 时间：2012-04-09T11:05:53.130
> 
> 标签：c++, multithreading, thread-safety, parallel-for

要并行执行循环，我正在使用：

```
int testValues[16]={5,2,2,10,4,4,2,100,5,2,4,3,29,4,1,52};
parallel_for (1, 100, 1, [&](int i){ 
    int var1;
    for (var1=1; var1<=20000; var1++) {
        int var2, var3, var4;
        double u[45],pl;
        int values[16]={-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1};
        /* ... */
        for (var4=0; var4<16; var4++) {
            if (values[var4] != testValues[var4]) break;
        }
        /* ... */
    }
} 
```

我可以确定`parallel_for`块内定​​义的所有变量（即`var1`, `var2`, `var3`, `var4`, `u`, `pl`, `values`）对于每个循环迭代都具有局部范围，即不会在线程或循环迭代之间共享？

此外，只要多个线程`testValues`只是读取（而不是写入），就可以安全地访问它们吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T11:12:45.463

lambda 中的所有变量对于执行它的线程都是本地的，所以是的，它们是安全的。

从/向 testValues 数组读取/写入在理论上是一种竞争条件，但如果您确保您只在同一时间读取而不是写入，或者只写入数组的不同部分，它应该是安全的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T11:35:22.183

在循环内声明的变量`parallel_for`遵循标准的 C++ 范围规则，因此它们对于执行该部分代码的每个线程都是本地的。

您只需要担心在外部声明的变量，如果以不安全的方式访问，可能会造成数据竞争。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T12:49:59.653

这只不过是一个 C++11 lambda 表达式。的使用`parallel_for`不会以任何方式使其特别。所以它遵循这样一个表达式所遵循的所有规则。

就个人而言，我不会将`&`其用作捕获表达式，因为它太松散了，尤其是对于像这样的事情，您需要仔细控制在 lambda 表达式中使用哪些变量。

但是，是的，在 lambda 中声明的所有变量都将是线程本地的堆栈变量。这包括 lambda 函数的参数列表，但不包括捕获表达式，即使您使用“按值”捕获也是如此。

按值捕获的变量默认为 const，因此应将它们视为只读副本并且通常是安全的。如果 lambda 函数被声明为可变的，那么我不确定规则是如何工作的。

# php - 将 Python 字典转换为 PHP 的关联数组

> ID：10072287
> 
> 赞同：0
> 
> 时间：2012-04-09T11:06:07.083
> 
> 标签：php, python, python-2.7

我用python写了一个排序算法。

它返回一个 Python Dictionary 对象。

如何将 Python 中的字典作为关联 arr 放入我的 PHP 代码中？

我是否必须在 PHP 中再次编写整个排序算法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T11:15:52.817

序列化为 JSON 将是最简单的事情：

Python：

```
import json
fp = open('/tmp/mydict', 'w+')
json.dump(myDict, fp) 
```

然后在php中：

```
$myDict = json_decode(file_get_contents('/tmp/mydict')); 
```

但是重新排序-python中的字典没有排序。如果要按顺序保存并加载有序，请保存 python 列表并加载 php 数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T11:12:11.940

您可以做的是将字典对象保存为Python`json`或`xml`在 Python 中，然后在 PHP 中使用`json_decode`或`simple_xml`将其加载为数组或对象

你不需要排序算法......`PHP`有很多

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T11:13:30.417

只需使用 usort 函数：您的比较器可以传递给它。 [http://php.net/usort](http://php.net/usort)

# rubygems - 联系salesforce rest api时指定redirect_url

> ID：10072288
> 
> 赞同：1
> 
> 时间：2012-04-09T11:06:08.927
> 
> 标签：rubygems, salesforce, omniauth

我正在尝试从我的 rails 应用程序联系 salesforce api。我将omniauth-salesforce gem 用于oauth。当我初始化时`OAuth2::Client`，我的选项哈希如下所示

```
{ :site => 'https://login.salesforce.com',
:authorize_url => '/services/oauth2/authorize',
:token_url     => '/services/oauth2/token'
} 
```

现在，由于我的重定向 url 是动态的，我想在联系 salesforce 时将其添加到选项哈希中，以便它可以获取此动态 url 并将访问令牌发送回此 URL。请让我知道如何添加它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T07:33:32.843

请查看 Force.com REST API 工具包。它包含示例 HTML 页面，其中显示了传递重定向 URL 的方式。您还可以查看更多详细信息@http [://wiki.developerforce.com/page/Getting_Started_with_the_Force.com_REST_API](http://wiki.developerforce.com/page/Getting_Started_with_the_Force.com_REST_API)

# c# - 如何在 ASP.NET 上将 treeview 的子节点回发设置为 false？

> ID：10072289
> 
> 赞同：1
> 
> 时间：2012-04-09T11:06:09.857
> 
> 标签：c#, asp.net, treeview, postback

我有一个树视图，我不想在单击任何子节点时回发。我将获得选定的子节点值。当我设置“node_.SelectAction = TreeNodeSelectAction.None;”时，我找到了一个解决方案 我无法选择任何子节点，也没有突出显示它。

等待你的帮助。对不起我的恩。

ASP:

```
<asp:TreeView ID="TreeView1" runat="server"></asp:TreeView> 
```

CS：

```
TreeView1.Nodes.Clear();
TreeView1.TreeNodeExpanded += new TreeNodeEventHandler(TreeView1_TreeNodeExpanded);

DataTable dt = ImzaDll.Imza.KategorileriGetir(true);

foreach (DataRow row in dt.Rows)
{
   TreeNode node_ = new TreeNode();
   node_.Text = row["ACIKLAMA"].ToString();
   node_.Value = row["KATEGORI"].ToString();
   TreeView1.Nodes.Add(node_);
}

void TreeView1_TreeNodeExpanded(object sender, TreeNodeEventArgs e)
{
   addChildNodes(e.Node);
}

private void addChildNodes(TreeNode node)
{
    DataTable dt = ImzaDll.Imza.KutuphaneBasliklariGetir(true, node.Value.ToString());

    foreach (DataRow row in dt.Rows)
    {
        TreeNode childNode = new TreeNode();
        childNode.Text = row["BASLIK"].ToString();
        childNode.Value = row["KUTUPHANE_ID"].ToString();
        childNode.ToolTip = row["BASLIK"].ToString() + " kütüphanesini ekle";
        childNode.Target = "_new";

        node.ChildNodes.Add(childNode);
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-09T11:35:22.950

您可以设置树视图子节点的 CSSClass，例如

```
 <asp:TreeView LeafNodeStyle-CssClass="childnode" runat="server">....</asp:TreeView> 
```

然后使用 jquery 你得到类并设置 return false 如下所示。

```
 $(".childnode").click(function(){
                 return false;
      }) 
```

...同样的方式你可以设置 RootNodeStyle-CssClass、ParentNodeStyle-CssClass 类并使用 jquery 来设置它们...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-29T07:18:42.103

您可以删除 link('a') 标签属性的 href 以停止回发

```
$('#ctl00_ContentPlaceHolder1_tvHierarchyView table tr td>a').click(function () {  
      var treeViewData = window["<%=tvHierarchyView.ClientID%>" + "_Data"];        
      if (treeViewData.selectedNodeID.value != "") {      
            var selectedNode=document.getElementById(treeViewData.selectedNodeID.value);    
            var value = selectedNode.href.substring(selectedNode.href.indexOf(",") + 3, selectedNode.href.length - 2);                  
            var text = selectedNode.innerHTML;  
          alert("Text: " + text + "\r\n" + "Value: " + value);  
       } else {  
               alert("No node selected.")  
          }  
              $(this).removeAttr("href");

          ///  ...................... rest of your code

}); ///  End of click function    
}); /// End of document ready function 
```

这里步骤说明：

1.  通过使用检查元素获取包含树表的 dev id：
2.  从选定的子节点获取详细信息。
3.  获取子节点的详细信息后，删除属性“href”以避免回发。
4.  对选定的节点详细信息执行任何功能（例如，使用 ajax 传递选定的值）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-29T10:36:16.417

```
TreeNode tn = new TreeNode();

tn.SelectAction = TreeNodeSelectAction.None; OR tn.SelectAction = TreeNodeSelectAction.Expand; 
```

这两者都不会导致回发。

# android - GPS - 在android中获取纬度和经度

> ID：10072290
> 
> 赞同：0
> 
> 时间：2012-04-09T11:06:15.620
> 
> 标签：android, gps, locationmanager

我正在使用以下代码来获取当前的纬度和经度。但是没有显示任何祝酒词。

```
public void onCreate(Bundle savedInstanceState) {  

                super.onCreate(savedInstanceState);  

                setContentView(R.layout.main);  

                /* Use the LocationManager class to obtain GPS locations */    
                LocationManager mlocManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE);   
                LocationListener mlocListener = new MyLocationListener();    
                mlocManager.requestLocationUpdates( LocationManager.GPS_PROVIDER, 0, 0, mlocListener);   
                 }     

             /* Class My Location Listener */    
            public class MyLocationListener implements LocationListener     {   
                @Override       
                public void onLocationChanged(Location loc)       {  
                    Log.i("","loccccccccccc");  
                    loc.getLatitude();        
                    loc.getLongitude();     
                    String Text = "My current location is: " +         "Latitud = " + loc.getLatitude() +         "Longitud = " + loc.getLongitude();    
                     Toast.makeText( getApplicationContext(), Text, Toast.LENGTH_LONG).show();    
                     }        

                @Override    
                public void onProviderDisabled(String provider)       {    
                    Toast.makeText( getApplicationContext(), "Gps Disabled", Toast.LENGTH_SHORT ).show();     
                    }         

                @Override     
                 public void onProviderEnabled(String provider)       {     
                    Toast.makeText( getApplicationContext(), "Gps Enabled", Toast.LENGTH_SHORT).show();   
                    }        

                 @Override        
                 public void onStatusChanged(String provider, int status, Bundle extras)       {     

                }        }
              } 
```

使用了所有权限：

```
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />  

    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />  

    <uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS" />  

    <uses-permission android:name="android.permission.ACCESS_MOCK_LOCATION" />  

    <uses-permission android:name="android.permission.CONTROL_LOCATION_UPDATES" />  

    <uses-permission android:name="android.permission.INTERNET" /> 
```

提前感谢您的
帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T11:15:55.467

与 NETWORK_PROVIDER 相比，GPS_PROVIDER 速度较慢。而且在室内可能无法正常工作。如果您想使用 GPS_PROVIDER，请打开 GPS。否则使用 NETWORK_PROVIDER。

通过[这个](https://stackoverflow.com/questions/5337333/android-onlocationupdate-not-called-with-gps-provider)

注意：与 GPS_Provider 相比，Network_provider 不是那么准确。但它很快..

[另请参阅此链接](https://stackoverflow.com/questions/3145089/what-is-the-simplest-and-most-robust-way-to-get-the-users-current-location-in-a/3145655#3145655)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T11:17:23.547

GPS在室内模式下不起作用......取决于地点......它在室外模式下完美运行......所以在外面检查一下......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T11:26:22.017

@Sneha——

1) 是否打印了这一行`Log.i("","loccccccccccc");`

2）[检查这个](http://www.firstdroid.com/2010/04/29/android-development-using-gps-to-get-current-location-2/)

3）尝试使用标准

4）在移动（设备）上测试它并在外面测试它，因为 GPS 在里面不起作用。

# ruby-on-rails-3.1 - 如何测试控制器的 Rspec，

> ID：10072291
> 
> 赞同：0
> 
> 时间：2012-04-09T11:06:18.870
> 
> 标签：ruby-on-rails-3.1, rspec

如何在 RSpec for Controller 中纠正此错误，

1) SellersController GET 索引查找活动失败/错误：assigns(:activity).should eq([activity])

```
 expected: [#<Activity id: 65, transactable_type: "admin", transactable_id: 1, action_type: "seller", user_id: 1, is_approved: false, approved_by: nil, created_at: "2012-04-09 11:02:17", updated_at: "2012-04-09 11:02:17", associatable_type: nil, associatable_id: nil>]
        got: nil

   (compared using ==) 
```

Seller_rspec.rb

```
describe "GET index" do
    it "find the Activity" do
 activity = Activity.create!(:transactable_type=>"admin",:transactable_id=>1,:action_type=>"seller",:user_id =>1,:is_approved=>0)
     get :index,{:is_approved => activity.to_param,:user_id=>1,:approved_by=>"admin"}
     assigns(:activity).should eq([activity])
    end 
```

在控制器中

```
 def index
        @activities=Activity.find(:all,:select => 'DISTINCT transactable_type,transactable_id,action_type,is_approved,approved_by',:conditions=>["is_approved= ?  and user_id=? and approved_by IS NULL",false,current_user.id])
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T11:54:17.773

您正在将代码放入控制器中，该控制器应该进入模型。在 Activity 模型中创建一个方法或范围，例如：

```
def self.find_not_approved(current_user_id)
      find(:all,
           :select => 'DISTINCT transactable_type,transactable_id,action_type,is_approved,approved_by',
           :conditions= ["is_approved= ?  and user_id=? and approved_by IS NULL",
           false,
           current_user_id])
end 
```

所以你可以在控制器中拥有（我已经组成了方法名称）：

```
 def index
    @activities = Activity.find_not_appoved(current_user.id)
  end 
```

只是为了回答您的问题，它不应该是- 因为您正在检查控制器中的 @activities 变量而不是 @activity *。*`assigns(:activities).should eq([activity])``assigns(:activity).should eq([activity])`

# themes - Liferay主题开发

> ID：10072292
> 
> 赞同：1
> 
> 时间：2012-04-09T11:06:24.247
> 
> 标签：themes, liferay

我想问一个关于liferay主题的问题。什么会更容易和更好？创建新主题或修改已经存在于 liferay 页面的主题？

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T11:43:15.363

那是一样的：通过使用 Liferay SDK 创建一个新主题，默认主题将被克隆，然后您可以覆盖一些 css、模板等。

创建新主题：[http ://www.liferay.com/documentation/liferay-portal/6.1/development/-/ai/creating-a-the-4](http://www.liferay.com/documentation/liferay-portal/6.1/development/-/ai/creating-a-the-4)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T23:58:38.170

> 当您在 sdk 中创建主题时，它是基于父主题或经典主题构建的。

作为参考，请查看主题的 build.xml。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-21T13:42:26.087

作为制作了几个自定义主题的人，最好修改现有主题。您应该修改的所有文件都在 /docroot/diffs/* 下

对于图像，我在图像下创建了一个 /custom 文件夹，我将所有这些文件夹放在其中。

对于模板，我主要修改了navigation.vm和portal_normal.vm文件。我完全改变了导航的处理方式。

我还彻底修改了 css 以实现我们想要的外观。我为此创建了一个 custom.css 文件。

这是我创建的自定义子导航菜单，它允许在子元素上出现过度状态。

```
<nav id="navigation_sub_menu">
<ul>
    #foreach ($nav_item in $nav_items)

        #if ($nav_item.isSelected() && $nav_item.hasChildren())
            <ul class="child-menu">
                #foreach ($nav_child in $nav_item.getChildren())
                    #set ($nav_child_upper = $nav_child.getName())
                    #if ($nav_child.isSelected())
                        <li class="sub_menu">
                            <a class="selected" href="$nav_child.getURL()" $nav_child.getTarget()>$nav_child_upper.toUpperCase()</a>
                        </li>
                    #else
                        <li>
                            <a href="$nav_child.getURL()" $nav_child.getTarget()>$nav_child_upper.toUpperCase()</a>
                        </li>
                    #end
                #end
            </ul>
        #end
    #end
</ul> 
```

# actionscript-3 - 使用 Actionscript 3.0 创建一个按钮来更新 RSS 阅读器的字符串参数

> ID：10072293
> 
> 赞同：0
> 
> 时间：2012-04-09T11:06:26.670
> 
> 标签：actionscript-3, actionscript

我想创建几个按钮，用户可以从中选择来更改我的 RSS Reader in Air for Android 的 XML 文件。这是按钮需要更新的内容：

```
var rssURL: URLRequest = new URLRequest("http://newsrss.bbc.co.uk/rss/newsonline_world_edition/front_page/rss.xml"); 
```

上面的 XML 是我选择的默认 XML。他们需要什么代码才能做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T15:20:50.403

所以这听起来很简单...您想创建一个按钮，将新值传递给您的 URL Request() 对吗？听起来你是新人。你可以做一些更简单的事情。

1.  创建你的按钮
2.  Actionscript 你的按钮到鼠标点击的事件处理程序。
3.  为每个按钮创建一个函数

在函数中创建一个新的 URL 请求。例如：

Button1 转到函数 button1click 在该函数中，您将拥有您的 RSS URL 阅读器代码。var rssURL: URLRequest = new URLRequest("http://newsrss.bbc.co.uk/rss/newsonline_world_edition/front_page/rss.xml");

Button2 转到函数 button2click 在该函数中，您将拥有另一个 RSS URL 阅读器代码。var rssURL: URLRequest = new URLRequest("http://www.secondRSSFeed.com/XML.xml");

我不知道我脑海中的真实代码，但它看起来像**伪代码**。

> button1.EventListener.Click(button1Click)
> 
> 功能按钮1点击{ Rss阅读器代码}

# delphi - 寻求免费的EXIF组件

> ID：10072296
> 
> 赞同：1
> 
> 时间：2012-04-09T11:07:01.683
> 
> 标签：delphi, exif

我有 100 多 GB 的照片可以追溯到 25 年前。它们按类别排列在目录树中，并带有嵌套的子目录。

我想在任何这些目录中搜索给定月份（例如四月）拍摄的所有照片。

我不认为 Windows 搜索会起作用，因为这可能是文件创建数据，这可能是一两个月后，我终于将文件从 SD 卡更多地传输到 PC。

也许搜索 EXIF 数据？是否有免费的 VCL 组件可以帮助我做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-09T11:18:22.300

如果您的 EXIF 数据良好，Windows Search（至少在 Vista/7 中，对于 XP 中的 Windows Search 4 不太确定）应该索引它并允许您在学习正确的语法后通过它进行查询。在 Windows 7 的搜索中，“拍摄日期：2011-04-01..2011-04-30”之类的内容可能会起作用。

也就是说，为了更具体地回答您的问题，[CCR Exif](https://delphihaven.wordpress.com/ccr-exif/)是一个 Delphi 类库，用于读取/编辑/删除图片中的 EXIF/IPTC/XMP 元数据。它在 MPL 1.1 下可用。

您仍然需要编写所有代码来遍历目录树并进行搜索，但这可以处理所有元数据工作。

# java - 随时停止线程

> ID：10072297
> 
> 赞同：1
> 
> 时间：2012-04-09T11:07:02.037
> 
> 标签：java, multithreading, interrupt, terminate

我有一个方法，应该中断一个线程，但事实并非如此。我是否需要始终检查 while 方法中中断的线程以停止线程？我怎样才能随时终止线程？

```
solverTh = new Thread(new Runnable() {
        @Override
        public void run() {
            while(somethingistrue){
                //do lot of stuff here for long time
            }
        }
    });
    solverTh.start(); 
}

public void terminate(){
    if(solverTh != null){
        solverTh.interrupt();
    }
} 
```

好吧，比我认为的“很多东西”无关紧要，但我会发布它。它进行openGL操作，我将布尔变量“终止”添加到它现在工作的代码中，我只是想找到一个更好的解决方案：（glc是一个GLCanvas，rotmultiplecube方法旋转3个对象）无论如何我已经解决了这个问题现在，感谢您的回答。

```
 terminated = false;
            try {
                Thread.sleep(2000);
            } catch (InterruptedException ex) {
                Logger.getLogger(BruteForce.class.getName()).log(Level.SEVERE, null, ex);
            }

            int colorToBeSolved = Statics.RED_BLUE_TABLE[stateToBeSolved];
            System.out.println(stateToBeSolved + "," + colorToBeSolved);
            if(entities[0].getColor() != colorToBeSolved){
                if(terminated) return;
                fullRotate(Statics.FIRST_ROW, Statics.DOWN);
            }
            if(entities[1].getColor() != colorToBeSolved){
                if(terminated) return;
                fullRotate(Statics.SECOND_COL, Statics.RIGHT);
            }
            if(entities[2].getColor() != colorToBeSolved){
                if(terminated) return;
                fullRotate(Statics.THIRD_COL, Statics.RIGHT);
            }
            if(entities[3].getColor() != colorToBeSolved){
                if(terminated) return;
                fullRotate(Statics.SECOND_ROW, Statics.DOWN);
            }
            if(entities[6].getColor() != colorToBeSolved){
                if(terminated) return;
                fullRotate(Statics.THIDR_ROW, Statics.DOWN);
            }

            for(int i = 0; i < 9; ++i){
                int col = i % 3;
                int row = 3 + i/3;
                while(entities[i].getState() != stateToBeSolved){
                    for(int j = 0;j < 2; ++j){
                        if(entities[i].getState() != stateToBeSolved){
                            if(terminated) return;
                            fullRotate(col, Statics.LEFT);
                            if(terminated) return;
                            fullRotate(row, Statics.UP);
                            if(terminated) return;
                            fullRotate(col, Statics.RIGHT);
                            if(terminated) return;
                            fullRotate(row, Statics.DOWN);
                        }
                    }
                    for(int j = 0;j < 2; ++j){
                        if(entities[i].getState() != stateToBeSolved){
                            if(terminated) return;
                            fullRotate(col, Statics.RIGHT);
                            if(terminated) return;
                            fullRotate(row, Statics.UP);
                            if(terminated) return;
                            fullRotate(col, Statics.LEFT);
                            if(terminated) return;
                            fullRotate(row, Statics.DOWN);
                        }
                    }
                }
            }
        } 
```

和全旋转方法：

```
private void fullRotate(int selectionIndex, int direction){
    for(int i = 0; i < 9; ++i){
        glc.rotMultipleCubeSlow(selectionIndex, direction);
        try {
            Thread.sleep(20);
        } catch (InterruptedException ex) {
            terminate();
        }
    }
    glc.setMovesText(selectionIndex, direction);        
    glc.setMultipleStateAndColorsByTable(selectionIndex, direction);
    glc.isEntitiesRight();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T11:43:55.270

```
while(somethingistrue !Thread.currentThread().isInterrupted()){
  //do lot of stuff here for long time
} 
```

不必为阻塞 IO 工作。使用肮脏的技巧：覆盖 Thread.interrupt() 关闭 IO 对象，导致 IOException，如果处理得当，可能会结束线程运行方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T13:08:04.170

优雅的解决方案是修改您的 fullRotate() 方法以抛出 InterruptedException。

```
private void fullRotate(int selectionIndex, int direction)
       throws InterruptedException{
    for(int i = 0; i < 9; ++i){
        glc.rotMultipleCubeSlow(selectionIndex, direction);
        Thread.yield();
    }
    glc.setMovesText(selectionIndex, direction);        
    glc.setMultipleStateAndColorsByTable(selectionIndex, direction);
    glc.isEntitiesRight();
} 
```

*   当您调用 Thread.interrupt() 时，当调用任何抛出它的方法时会导致 InterruptedException，在您的情况下是 Thread.sleep() 或 Thread.yield()。这意味着最好的方法是使用它来实际中断计算。
*   如果您想立即响应您的 Thread.interrupt()，您仍然需要检查 Thread.currentThread().isInterrupted()
*   如果（终止）返回，您可以删除；或用 Thread.currentThread().isInterrupted() 检查替换它。删除会很好，因为 fullRotate() 中的 Thread.sleep(20)/Thread.yield() 会抛出 InterruptedException。如果没有所有这些 if(terminated) ，代码也会更干净。
*   使用 Thread.yield() 代替 Thread.sleep(20)。显然你不想睡觉，因为你放了 20 毫。20 milis 非常接近上下文切换时间量。线程将更多或更少地睡眠。你不希望它无缘无故地睡得更多，所以使用 yield()。

你的线程 run() 然后变成：

```
solverTh = new Thread(new Runnable() {
    @Override
    public void run() {
        while(somethingistrue && 
              !Thread.currentThread().isInterrupted()) {
            try {
                //do lot of stuff here for long time
            } catch (InterruptedException ex) {
                // handle stop processing 
            }
        }
    }
});
solverTh.start(); 
```

您**还必须从以下内容中删除**try catch：

```
 try {
            Thread.sleep(2000);
        } catch (InterruptedException ex) {
            Logger.getLogger(BruteForce.class.getName()).log(Level.SEVERE, null, ex);
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T11:48:45.557

当一个线程正在运行时（消耗 CPU 周期），那么默认情况下它不会（自动）响应`Thread.interrupt()`。您将不得不编写代码来明确地执行此操作。

`//do lot of stuff here for long time`分成 2 个或更多步骤，并在这些步骤之间插入检查`Thread.currentThread().isInterrupted()`- if true - break out ，否则继续。这是实现您想要的唯一安全方法。

这取决于长期运行的东西是什么，您必须设计步骤并决定何时最好检查中断和突破。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T11:39:12.627

中断线程的唯一方法是让它自行退出。由于死锁的可能性，Java 甚至没有实现直接中断。因此，您的线程代码必须如下所示：

```
solverTh = new Thread(new Runnable() {
    @Override
    public void run() {
        while(somethingistrue) 
            // Do a little stuff here
        }
    }
});
solverTh.start(); 
```

并且`somethingistrue`是线程中断的一种信号。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-09T11:40:45.377

唯一可以可靠地阻止一个线程从另一个线程执行的是操作系统。所以，选择并不多：

1) 通知线程自行停止。这个方案有点取决于线程在做什么。如果它在另一个处理器上运行或卡在阻塞调用上，您无法解除阻塞，（注意，可以说服许多阻塞调用提前返回），可能会出现问题。

“很多东西”在做什么？

2) 使用操作系统调用来终止线程。这可能是一个可行的选择，具体取决于线程的作用。如果有任何可能在线程持有重要资源的公共锁时终止线程（例如，它在 malloc() 的中间并且内存管理器被锁定），那么您可能会遇到麻烦。您必须确定线程正在做什么才能以这种方式安全地中止它。

3）使用单独的进程来运行“东西”。这显然可以正常工作，但通常涉及缓慢而痛苦的进程间通信来传递数据和返回结果。

4）设计应用程序，使其不需要终止线程。一些应用程序不需要终止任何线程，除非在应用程序关闭时，所以没有问题 - 操作系统可以停止任何事情。在应用程序运行期间必须“停止”线程并且正在运行冗长的 CPU 密集型操作或被阻塞很长且可能不确定的时间段的情况下，通过将线程的优先级设置为最小/空闲来“孤立”线程让它最终消亡是另一种常见的方法。

最糟糕的情况是一个线程长时间运行大量使用内存管理器或其他公共锁的东西，可能在一个你不知道它在做什么的库中，不能被钩住和读/写数据以“孤立”的方式关闭意味着无法启动另一个线程来使用数据。那时你真的很笨，你可能不得不终止应用程序并重新启动。最好避免线程可以进入这种状态的设计:)

5) 忘记一个 - 如果线程正在使用您可以获得的数据，将某些内容设置为 NULL、0、MaxInt 或其他类似 bodge 可能会导致在运行长内容的线程中引发异常。当执行从长的东西中冒出来时，线程可以检查异常处理程序中的中断状态，如果设置则退出。

# java - 异常处理输出消息

> ID：10072301
> 
> 赞同：0
> 
> 时间：2012-04-09T11:07:10.197
> 
> 标签：java

我编写了下面的代码，取自 Java How to program 9th Edition - Paul 和 Michelle Harvey - 代码工作正常，但问题是每次执行它时，它都会给我不确定的异常处理结果 - 例如请查看代码片段的输出。你能帮我理解为什么会发生这种行为吗？

```
 public class Test {

    public static void main(String[] args) {

        try {
            // call method throwException
            throwException();
        }// end try

        catch (Exception e) {
            System.out.println("Exception handled in main");
        }// end catch

        // call method doesNotThrowException
        doesNotThrowException();

    }

    private static void throwException() throws Exception {
        try {
            System.out.println("Method throwException.");
            throw new Exception(); // generate exception
        }

        catch (Exception exception) {
            System.err.println("Exception handled in method throwException");
            throw exception;
        }

        // executes regardless of what occurs in try ... catch block
        finally {
            System.err.println("Finally executed in throwException.");
        }
    }// end of method throwException

    private static void doesNotThrowException() {
        try {
            System.out.println("Method doesNotThrowException.");
        }

        // catch does not execute as the method does not throw any exceptions
        catch (Exception exception) {
            System.err.println(exception);
        }// end catch

        // executes regardless of what occurs in try ... catch block
        finally {
            System.err.println("Finally executed in doesNotThrowException");
        }
    }// end of deosNotThrowException

}//end Test Class 
```

输出：1）

```
Method throwException.
Exception handled in method throwException
Finally executed in throwException.
Finally executed in doesNotThrowException
Exception handled in main
Method doesNotThrowException. 
```

2)

```
Exception handled in method throwException
Finally executed in throwException.Method throwException.

Finally executed in doesNotThrowException
Exception handled in main
Method doesNotThrowException. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T11:23:52.323

不同运行的不同输出是因为您使用了 2 个不同的输出流：*out*和*err*。刷新此类 I/O 流由操作系统决定，并且它在每次运行时以不同的方式执行此操作，具体取决于与您的程序无关的其他因素。操作系统唯一保证的是*out*的顺序和*err*的顺序被保留，而不是它们之间的顺序。

# couchdb - 如何在 CouchDB 上插入“典型”字段值？

> ID：10072307
> 
> 赞同：1
> 
> 时间：2012-04-09T11:07:30.780
> 
> 标签：couchdb

当我有几个文档，其中有一个字段的值是从一小组选项中选择的时，是否有任何工具可以防止引入错误的值？

谢谢

雨果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T14:00:00.527

根据您要完成的具体工作，[验证功能](http://wiki.apache.org/couchdb/Document_Update_Validation)听起来像是您需要的。所有验证功能（每个设计文档 1 个，每个数据库的设计文档数量根据您的需要）在每次写入之前运行。如果任何验证函数抛出错误，则拒绝写入。

# jquery - 为每个元素提供唯一的 id 并使用 jquery 访问它们

> ID：10072314
> 
> 赞同：0
> 
> 时间：2012-04-09T11:08:13.257
> 
> 标签：jquery, html, css

我试图根据用户输入打印实时输出以进行搜索。所以我试图将每个结果的标题添加到某个宽度和高度的 div 元素中。我想将每个 div 元素的条目限制为 8。因此对于不同的搜索，要显示的 div 的数量会有所不同。我使用下面的代码，因为#test 不是唯一的，所以所有输出标题都将显示在一个 div 中，而不是每个包含 8 个标题的 div 中。我想知道我们如何创建一个具有唯一 id 的 div 并使用 jquery 函数为这些独特的 div 添加标题..我该怎么做？

```
for(var count5=0;count5

{ $(".panel1").append('<div id="test"  style="width:200px; height:120px; background-color:#000000; float:left; margin-left:10px; margin-top:10px; color:#ffffff;"></div>');

    for(count4=num; count4<num1; ++count4)
    {   
             $("#test").append(prsnArray[count4].term + '<br>');
    }
num=num+8
num1=num1+8} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T11:16:06.360

不要将您的人员数组中的术语附加到 id 为“test”的 div（这不是应该的唯一性），而是将它们附加到新创建的 div 中。

```
 var $newDiv = $('<div style="width:200px; height:120px; background-color:#000000; float:left; margin-left:10px; margin-top:10px; color:#ffffff;"></div>') ; 
 $(".panel1").append($newDiv);

 for(count4=num; count4<num1; ++count4){   
    $newDiv.append(prsnArray[count4].term + '<br>');
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T11:17:48.900

拳头，修复你的标记！`<br>`看起来很难看，您应该使用列表或定义列表。

对于 div 的 id，您可以使用全局变量作为计数器并将其与 id 连接，例如

```
myvar++;
$('#test'+myvar).doSth(...) 
```

或者您可以向 div 添加一个类

```
<div id="test1" class="mydivs"> ... </div> 
```

进而

```
var newid = $('.mydivs').length + 1;
while($('#test'+newid).length > 0){newid++;} 
```

# asp.net - 带有母版页按钮的 asp.net 中的验证控件

> ID：10072316
> 
> 赞同：0
> 
> 时间：2012-04-09T11:08:18.407
> 
> 标签：asp.net, validation

我在提交页面上有很多文本框，并且都有一个验证器。我想用母版页上的提交按钮来控制它们。它可以工作，但其他按钮也会导致验证。验证摘要始终显示为单击提交按钮或任何其他按钮。我该如何控制这种情况？(asp.net)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T11:17:49.947

对于每个单独的提交使用“ValidationGroup”。这是示例：

```
<asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
<asp:RequiredFieldValidator ControlToValidate="TextBox1" ValidationGroup="Submit" ID="RequiredFieldValidator1" runat="server" ErrorMessage="RequiredFieldValidator"></asp:RequiredFieldValidator>
<asp:TextBox ID="TextBox2" runat="server"></asp:TextBox>
<asp:RequiredFieldValidator ControlToValidate="TextBox2" ValidationGroup="Submit" ID="RequiredFieldValidator2" runat="server" ErrorMessage="RequiredFieldValidator"></asp:RequiredFieldValidator>
<asp:Button ID="Button1" ValidationGroup="Submit" runat="server" Text="Button" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T11:12:11.540

我认为您可以通过使用 ValidationGroup 属性来解决此问题。

[http://msdn.microsoft.com/en-us/library/ms227424.aspx](http://msdn.microsoft.com/en-us/library/ms227424.aspx)

[http://www.w3schools.com/aspnet/prop_webcontrol_imagebutton_validationgroup.asp](http://www.w3schools.com/aspnet/prop_webcontrol_imagebutton_validationgroup.asp)

谢谢

迪普

# hibernate - Hibernate 中的最终课程

> ID：10072323
> 
> 赞同：2
> 
> 时间：2012-04-09T11:08:34.297
> 
> 标签：hibernate, lazy-loading

我对 Hibernate 的最终课程有疑问。阅读我已阅读的 Hibernate 文档：

> 您可以持久化未实现 Hibernate 接口的最终类​​；但是，您将无法使用代理进行延迟关联获取，这最终会限制您的性能调整选项。

然后我开发了一个简单的例子，我创建了两个最终类 Foo 和 Bar。Foo 与 Bar 是一对多的关系。Foo 和 Bar 使用 @Entity 注释，并在字段级别访问时使用 @OneToMany(mappedBy="foo", cascade={CascadeType.ALL}) 和 @ManyToOne 进行注释。

然后我创建了一个测试，它插入了一个 Foo 和许多 Bar。然后我通过 id 找到一个 Foo 对象，然后我调用 getBars() 它充当一个懒惰的，Hibernate 进行查询并返回所有 Bars。

我错过了什么？，它不应该创建这个查询，因为类是最终的，但查询是执行的。

非常感谢您的帮助。

# xcode - 避免 TableView 中隐藏选择器中的空间？

> ID：10072326
> 
> 赞同：0
> 
> 时间：2012-04-09T11:08:45.670
> 
> 标签：xcode, uitableview, picker

我在 TableView 中插入了一个 Picker。我把它藏起来了，但空间还在，我怎样才能清除这个空间？

谢谢！

# 32bit-64bit - 从 uint32 迁移到 uint64

> ID：10072332
> 
> 赞同：0
> 
> 时间：2012-04-09T11:09:16.653
> 
> 标签：32bit-64bit, integer-overflow

我正在一个使用 32 位无符号整数来存储时间戳值的项目中工作。当项目部署在现场时，大约 49 天后，柜台`overflowed`.

我们决定将 32 位无符号整数更改为 64 位无符号整数。但是简单地用 64 位整数替换 32 位整数是行不通的，因为计数器变量在很多地方使用，我们不确定替换是否真的有效。此外，如果此计数器值作为参数传递给某个函数或从函数返回，则该函数也需要修改。这很乏味。

有没有一种流畅的迁移方式，让原始项目和修改后的项目之间没有功能差异？

我期待一个 linux 工具或编译器捷径方法来解决这个问题。

# javascript - jquery mobile javascript验证json密钥

> ID：10072334
> 
> 赞同：1
> 
> 时间：2012-04-09T11:09:29.290
> 
> 标签：javascript, json

我的移动应用程序读取一个外部 json 对象。如何在 javascript 中检查动态生成的 json 结构中是否存在关键节点？我尝试了 hasOwnProperty 或 containsKey 方法，但没有运气。

示例 json 数据：

```
{  "element1": 
  {  "element2": { "Number":  "0" }, 
     "element3": { "Number":  "1" }, 
     "element4": { "Number":  "2" }
  } 
} 
```

由于这些元素是动态生成的，我想检查这个结构中是否存在关键 element3。data.element1.hasOwnProperty("element3") 没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T08:10:19.233

是的，hasOwnProperty() 方法不适用于 Json 对象。它适用于 Java 脚本对象。因此，您只需使用 eval() 方法将此 Json 对象转换为 Java Script 对象并检查该对象内部。

当您转换上述 Json 结构时，它将在另一个对象（例如 JSObject）中创建一个对象（element1）。element1 将包含属性 element2、element3 和 element4。所以你的代码应该是这样的。

```
var MyObject={  "element1": 
  {  "element2": { "Number":  "0" }, 
     "element3": { "Number":  "1" }, 
     "element4": { "Number":  "2" }
  } 
}

var JSObject=eval('(' + MyObject+ ')');

var IsExistElement3 = JSObject.element1.hasOwnProperty("element3"); 
```

# java - 从 JComboBox 获取输入值

> ID：10072335
> 
> 赞同：2
> 
> 时间：2012-04-09T11:09:29.793
> 
> 标签：java, swing, jcombobox

如何获取可编辑的输入`JComboBox`。当用户向组合提供输入时，我如何从中获取输入文本？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-09T11:49:14.673

您需要从组合框编辑器中通过[`combo.getEditor().getItem()`](http://docs.oracle.com/javase/7/docs/api/javax/swing/ComboBoxEditor.html#getItem%28%29).

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-09T11:47:07.233

如果您需要在 a 上选择的文本`JComboBox`并且您确定它是 a`String`而不是任何其他对象，只需使用类似`String text = (String)myCombobox.getSelectedItem()`. 如果您拥有的东西`Model`不是 a `String`，那么您需要将其强制转换为适当的类，然后使用该`toString()`对象的方法。如果您需要更多帮助，您应该粘贴一些代码，至少声明和初始化您的`JComboBox`...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T15:09:04.410

看看oracle教程就知道了。他们确实解释了如何处理常见的 Swing 组件[http://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html](http://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html)

# asp.net-mvc - 如何将值从 Telerik mvc ajax 网格传递到控制器

> ID：10072338
> 
> 赞同：0
> 
> 时间：2012-04-09T11:10:04.373
> 
> 标签：asp.net-mvc, telerik, telerik-grid

我有 2 个 Telerik mvc ajax 网格，需要根据第一个网格上的选定行进行填充。

下面是我的代码：

```
@(Html.Telerik().Grid<PurchaseRequest>()
   .Name("grdPurchaseRequest")
   .DataBinding(binding => binding.Ajax()
     .Select("GetPurchaseRequests", "PurchaseOrder"))
   .DataKeys(keys => keys
    .Add(o => o.PurchaseRequestID))
  .Columns(cols =>
  {
    cols.Bound(c => c.PurchaseRequestID).ReadOnly().Hidden();
    cols.ForeignKey(c => c.ProjectID,(System.Collections.IEnumerable)ViewData["prProjects"],
               "ProjectID", "ProjectName");
    cols.Bound(c => c.FullName);
    cols.Bound(c => c.RequestDate).Format("{0:MM/dd/yyyy}");
    cols.Bound(c => c.Remarks);
    cols.Bound(c => c.CheckedBy);
    cols.Bound(c => c.ApprovedBy);
  })
  .ClientEvents(clientEvents => clientEvents.OnRowSelect("onRowSelected"))
  .RowAction(row =>
  {
    row.Selected = row.DataItem.PurchaseRequestID.Equals(ViewData["id"]);
  })
  .Pageable()
  .Sortable()
  .Filterable()
  .Selectable() 
```

)

====第二个网格=====

这是将根据第一个网格上的选定记录填充的第二个网格

```
 @(Html.Telerik().Grid<PurchaseRequestDetail>().HtmlAttributes(new { style = "width: 50%"   })
 .Name("grdDetails")    
 .DataKeys(keys => keys
    .Add(o => o.PurchaseRequestDetailID)
    .RouteKey("PurchaseRequestDetailID"))
 .Columns(cols =>
 {
    cols.ForeignKey(c => c.ItemID, (System.Collections.IEnumerable)ViewData["prItems"],
                    "ItemID", "ItemName").Width(200).Title("Description");
    cols.Bound(d => d.ItemQuantity).Width(100).Title("Quantity");
    cols.Bound(d => d.ItemValue).Width(100).Title("Value per quantity").Format("Php  {0:###,###.00}");
    cols.Bound(d => d.TotalPrice).Width(500).Format("Php {0:###,###.00}")
        .Aggregate(aggs => aggs.Sum())
        .ClientFooterTemplate("Php <#= $.telerik.formatString('{0:n}', Sum) #>");
})    
 .DataBinding(binding => binding.Ajax()
    .Select("GetPurchaseRequestDetails", "PurchaseOrder", new { purchaseRequestID = "<#= PurchaseRequestID #>" }))
 .ClientEvents(clientEvents => clientEvents.OnDataBinding("onDataBinding"))
 .Pageable()
 .Sortable() 
```

)

脚本代码

```
<script type="text/javascript">
  var purchaseRequestID;
  var purchaseRequestName;
  function onRowSelected(e) {
    var detailsGrid = $('#grdDetails').data('tGrid');
    purchaseRequestID = e.row.cells[0].innerHTML;
    purchaseRequestName = e.row.cells[1].innerHTML;
    // update ui text
    $('#purchaseRequestName').text(purchaseRequestName);
    // rebind the related grid
    //alert(purchaseRequestID);
    //location.href = "/PurchaseOrder/Index/" + purchaseRequestID;
    detailsGrid.rebind();
}
function onDataBinding(e) {
    e.data = $.extend(e.data, { purchaseRequestID: purchaseRequestID });
} 
```

以下是控制器中的代码：

```
[HttpPost]
public ActionResult Create(PurchaseOrder purchaseorder)
    {
       if (ModelState.IsValid)
       {
           HERE, I WANT TO BE ABLE TO GET AND SAVE THE SELECTED ROW IN THE VIEW
           //purchaseorder.PurchaseRequestID = ViewBag.SelectedID;
           db.PurchaseOrders.Add(purchaseorder);
           db.SaveChanges();
           return RedirectToAction("Index");
        }

        ViewBag.SupplierID = new SelectList(db.Suppliers, "SupplierID", "Name", purchaseorder.SupplierID);
        ViewBag.OfficeID = new SelectList(db.Offices, "OfficeID", "OfficeName", purchaseorder.OfficeID);
        return View(purchaseorder);
    } 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T11:01:08.663

如果你们中的一些人可能遇到同样的问题，我使用了 HiddenFor 来解决这个问题。请建议您是否有比这更好的方法。

```
@Html.HiddenFor(model => model.PurchaseRequestID)

and then i updated the script

<script type="text/javascript">
var purchaseRequestID;
var purchaseRequestName;
function onRowSelected(e) {
    var detailsGrid = $('#grdDetails').data('tGrid');
    purchaseRequestID = e.row.cells[0].innerHTML;
    purchaseRequestName = e.row.cells[1].innerHTML;
    // update ui text
    $('#purchaseRequestName').text(purchaseRequestName);
    $('#PurchaseRequestID').val(purchaseRequestID);
    detailsGrid.rebind();
}
function onDataBinding(e) {
    e.data = $.extend(e.data, { purchaseRequestID: purchaseRequestID });
} 
```

# c++ - 为所有 ofstreams 设置默认精度的方法

> ID：10072347
> 
> 赞同：3
> 
> 时间：2012-04-09T11:11:03.363
> 
> 标签：c++, global, iostream, precision

嗨，我正在尝试找出是否有办法为 ofstreams 设置默认精度。为了澄清，我可以毫无问题地设置我定义的 ofstream 的精度。我只是找不到一种方法，所以当我创建一个 ofstream 时，它默认具有这种精度。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T11:19:40.043

也许通过`ofstream`在其构造函数中派生您自己的版本来设置精度：

```
#include <fstream>

struct my_ofstream : std::ofstream {
    explicit my_ofstream(std::streamsize prec = 5)
    {
        this->precision(prec);
    }
};

int main()
{
   my_ofstream f1;  // default precision 5
   my_ofstream f2(10);
} 
```

# ios - 使用webkit私有框架访问iphone的浏览历史

> ID：10072348
> 
> 赞同：3
> 
> 时间：2012-04-09T11:11:04.833
> 
> 标签：ios, ios5, webkit, iphone-3gs

嗨，我请求请在将其标记为重复之前完整阅读该问题。

我正在尝试通过使用 Webkit 私有框架来获取 iphone 浏览历史记录。我从 github 站点获取了它的标题。但我没有得到用于完成我的任务的标题或方法。我尝试使用以下代码，但它没有返回任何内容，甚至不返回 null。

```
WebHistory *history=[WebHistory optionalSharedHistory];
NSDate *now = [NSDate date];
//id date;
NSArray *arr = [history orderedItemsLastVisitedOnDay:now];
NSLog(@"%@",[history allItems]); 
```

我正在内部应用程序中编写，所以我不介意这个私有框架。但我就是不能越狱。请指导我正确的方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T20:11:47.620

为了使 optionalSharedHistory 方法返回除 null 之外的任何内容，它必须在应用程序中方便的位置进行实例化和设置。像根视图控制器或 AppDelegate。

```
// Create a shared WebHistory object
WebHistory *myHistory = [[WebHistory alloc] init];
[WebHistory setOptionalSharedHistory:myHistory]; 
```

希望这可以帮助！

# visual-studio-2010 - 将第三方 DLL 复制到我的 vs2010 安装项目失败

> ID：10072349
> 
> 赞同：0
> 
> 时间：2012-04-09T11:11:08.867
> 
> 标签：visual-studio-2010, dll, setup-project

我有一个需要连接到外部设备的 vs 2010 winforms 应用程序，为此它需要使用一些第三方 DLL。这些 DLL 已被复制到程序集文件夹并从那里引用，并且引用的“复制本地”属性设置为 true。

我的应用程序已经非常愉快地在我的开发机器上运行，现在是时候创建我的设置项目了。但是，在我的安装项目的 Detected Dependencies 文件夹中没有这些 DLL 的迹象，即使我的安装项目构建和安装正常，当我在安装后尝试在测试机器上运行应用程序时，我得到一个类类型错误，当我查看安装文件夹时，没有这些 DLL 的迹象。

有人能给我一些线索，让我知道我需要做什么才能将第三方 DLL 放入我的安装项目中，以便它们正确安装并且我安装的应用程序可以使用它们吗？

谢谢，卡尔

# ruby-on-rails - rails 3.2 引擎，前置引擎的布局

> ID：10072352
> 
> 赞同：1
> 
> 时间：2012-04-09T11:11:25.517
> 
> 标签：ruby-on-rails, ruby-on-rails-3, layout, rails-engines

我正在寻找一种将引擎布局注入 main_app 布局的方法，我发现了这个有趣的示例：

[https://github.com/shageman/rails_container_and_engines](https://github.com/shageman/rails_container_and_engines)

但是如果我添加一些东西，`app/engines/web_engine1/app/assets/stylesheets/web_engine1/welcome.css`它就不能按预期工作。

一个用例可能是：

(main_app) application.css (具有全局样式，例如背景颜色) (page_engine) application.css (继承 (main_app) application.css 并为 h1 标签添加特殊颜色)

你有一个简单的例子可以管理这种情况吗？

# asp.net-mvc - MVC、存储库模式和 DataLoadOptions

> ID：10072353
> 
> 赞同：2
> 
> 时间：2012-04-09T11:11:27.133
> 
> 标签：asp.net-mvc, asp.net-mvc-3, repository-pattern

我有一个运行 MVC3 的小项目。我使用 LINQ 从数据库中获取数据。我使用与 MVC3 附带的预制示例相同的架构设计来构建我的项目。在这样的项目中，应用程序被拆分，在本主题中，我想重点关注 Model.cs 文件。我现在每个控制器都有一个，举个例子，我有一个 HighscoreController.cs 和一个 HighscoreModels.cs。在模型类中，我定义了一个 Service 类，它引用了一个数据上下文和一些使用这个数据上下文来查询数据库的方法。现在我遇到了一个问题，其中一些方法正在执行相同的查询，因此我想建立一个访问数据库的中心点，所以我想我会实现存储库模式，所以我做到了。

```
 private IRepository _repository;

    public HighscoreService()
        : this(new Repository())
    { }

    public HighscoreService(IRepository repository)
    {
        _repository = repository;
    } 
```

现在数据库调用在存储库中处理，并且通过 _repository 引用从 Service 类使用存储库。

我的存储库是这样构建的：

```
 public class Repository : IRepository
   {
    private MyDataContext _dataContext;

    public Repository()
    {
        _dataContext = new MyDataContext();
    }

    public Member MemberByName(string memberName)
    {
        Member member = CompiledQueries.MemberByName(_dataContext, memberName);
        return member;
    }
    } 
```

当我尝试将 DataLoadOptions 与此存储库模式结合使用时，就会出现我面临的问题。

因为当您使用 dataloadoptions 时，在应用新的 dataloadoptions 之前，您必须没有对数据上下文进行过先前的查询。而且由于我的存储库在所有方法中都重用了数据上下文，所以这根本行不通。我一直在尝试两件事，一是通过 using 语句在每个方法中重新创建数据上下文，以确保每次都刷新数据上下文。但是，当我将存储库中的结果返回到我的模型中并且范围在存储库模式内耗尽时，我遇到了问题，因为 using 语句结束，这意味着结果不能与例如 .Count() 或 .Count() 一起使用。 ToList() 因为为我提供数据的数据上下文已被终止。我还尝试了另一种解决方案，它在整个存储库中使用相同的数据上下文，但在每个使用 dataloadoptions 的方法中创建一个新实例。这感觉很脏；）那么任何人都可以给我一个关于如何将 DataLoadOptions 与存储库模式一起使用的建议吗？并避免我刚才描述的问题。或者我不应该使用 dataloadoptions 并选择另一种方式吗？顺便说一下，我使用 DataLoadOptions 的原因是我想从相关表中获取一些数据。

作为一个小问题：在上面的代码示例中，您可以看到我已将 CompiledQueries 放在它自己的 .cs 文件中。这是一个糟糕的设计吗？是否有关于在 MVC 应用程序中放置已编译查询的位置的指南？

感谢您阅读并希望我的问题有一些答案；）提前非常感谢。如果您需要更多信息，请询问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T22:17:42.170

我绝不是专家`DataLoadOptions`，但从您的问题和我所读到的内容来看，您似乎需要使用它来进行急切加载。参考这个：

“因为当您使用 dataloadoptions 时，在应用新的 dataloadoptions 之前，您必须没有对 datacontext 进行过先前的查询。”

..对我来说，这听起来像是一个缺点或设计缺陷`DataLoadOptions`（我个人使用实体框架，而不是 LINQ to SQL）。虽然我认为 ngm 和 CrazyCoderz 在前 2 条评论中提供的每个 HTTP 请求都有一个数据上下文是个好主意，但我认为这不会解决您的问题。如果您想在单个 HTTP 请求中重用单个数据上下文，一旦执行第一个查询，听起来您将无法将`DataLoadOptions`数据上下文设置为新值。

我在 vslive vegas 上看到了一个演示文稿，演示者提供了您提到的解决方案之一，在每个存储库方法中创建了一个新的数据上下文。您在这里要做的是在终止 using 语句并返回方法结果**之前调用 ToList() 或 ToArray()。**

正如您所提到的，这会使未预加载到枚举中的对象在方法返回后无法访问。但是，如果您已经执行了查询并将其转换为 a `List`、`Collection`、`Array`或其他一些具体`IEnumerable`的 ，则不再需要访问`Count()`or`ToList()` **方法**。相反，您可以使用`Array.Length`or`List.Count`或`Collection.Count` **properties**。

还有什么阻止您在每个存储库方法中创建新的数据上下文？意思是，在执行存储库方法之后，您需要数据上下文来做什么，因为它已经被处理掉了？

**回复评论**

对于您的第一个查询，您可以这样做吗？

```
public Member GetSomeRandomMember()
{
    Member[] members = null;
    using (var context = new MyDataContext())
    {
        // execute the query to get the whole table
        members = context.Members.ToArray();
    }

    // do not need to query again
    var totalRows = members.Length;
    var skipThisMany = PerformRandomNumberComputation(totalRows);
    return members.Skip(skipThisMany).FirstOrDefault();
} 
```

当然，如果您的 Members 表有很多行，这可能不是最佳选择。在这种情况下，您需要执行 2 个查询—— 1 个用于计数，第二个用于选择行。您可以通过打开 2 个上下文来实现：

```
public Member GetSomeRandomMember()
{
    using (var context1 = new MyDataContext())
        var totalRows = context1.Members.Count();

    var skipThisMany = PerformRandomNumberComputation(totalRows);

    Member member = null;
    using (var context2 = new MyDataContext())
        member = context2.Members.Skip(skipThisMany).FirstOrDefault();

    return member;
} 
```

对于你评论的第二部分，我不确定我明白你在说什么。无论如何，数据的获取和对其进行的更改都应该在一个单一的操作中进行：

```
public void SaveMember(int id, string email, bool isSuspended)
{
    using (var context = new MyDataContext())
    {
        var member = context.Members.Single(m => m.Id == id);
        member.Email = email;
        member.IsSuspended = isSuspended;
        context.SaveChanges(); // or whatever the linq to sql equivalent is
    }
} 
```

如果要将整个实体传递给存储库方法，则仍应将其查询出来，以便将其附加到正确的上下文：

```
public void SaveMember(Member member)
{
    var memberDto = member;
    using (var context = new MyDataContext())
    {
        member = context.Members.Single(m => m.Id == memberDto.Id);
        member.Email = memberDto.Email;
        member.IsSuspended = memberDto.IsSuspended;
        context.SaveChanges(); // or whatever the linq to sql equivalent is
    }
} 
```

# vmware - 将 VMware 实例迁移到 cloudstack

> ID：10072356
> 
> 赞同：0
> 
> 时间：2012-04-09T11:11:38.513
> 
> 标签：vmware, citrix, xen

如何在保留 IP 信息的同时将 VM 从 vmware 环境迁移到 Xen 服务器上的 cloudstack？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-12T04:44:31.637

您可以从 vcenter 导入 o​​va 并将其转换为 vhd 格式。转换后将此 vhd 放在任何 Web 服务器中，因此可以通过 Web 浏览器下载它。在 cloudstack 中登录，转到全局设置并找到 secstorage.allowed.internal.sites并将Web服务器IP添加到此值。重新启动管理服务器。再次登录cloudsatck，转到模板，单击注册模板。填写表格，选择管理程序作为xen服务器，在url部分给出vhd文件的填充url，选择操作系统类型，选择公共和特色。并提交

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T08:33:54.937

为了从 vmware 转换为 xen，我过去遵循了这些说明并且它们工作了 - [http://forums.citrix.com/thread.jspa?threadID=151210&tstart=0](http://forums.citrix.com/thread.jspa?threadID=151210&tstart=0)。

我没有玩太多 Clo​​udstack，但最新的管理指南（本周刚刚发布）中有迁移信息和一些关于 VMware 迁移的评论 - [http://support.citrix.com/article/CTX133299](http://support.citrix.com/article/CTX133299)。

# vim - 使用vim代码折叠标记生成索引（内容）

> ID：10072357
> 
> 赞同：3
> 
> 时间：2012-04-09T11:11:46.713
> 
> 标签：vim

在我的 .vimrc 我有线条

```
:set foldmethod=marker
:set foldmarker=SECTION:,ENDSECTION: 
```

用于自定义代码折叠。在我的文件中，相应语言中的注释字符在代码折叠标记之前，然后是相应部分的标题。例如

```
# SECTION: First Section
some code
# SECTIION: Subsection
some more code
# ENDSECTION: 
# ENDSECTION: 

# SECTION: Second Section
some other code
# ENDSECTION: 
```

该结构具有为文件生成内容所需的所有内容，例如

```
First Section
    Subsection
Second Section 
```

（理想情况下，该索引具有类似于 vim 帮助系统的标记，因此我可以轻松跳转到相应的 SECTION；我不知道如何实现这一点）。我可以想到一个生成此文本的简单 perl 脚本，但我更喜欢基于 vim 脚本的解决方案，该脚本在新窗口中显示索引。也许已经有一个解决方案可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T19:41:36.873

把它放在你的 vimrc 中并运行`:MkIdx`or `<leader>z`。您也可以将范围传递给命令，但默认为整个缓冲区。

```
function! MkIdx() range
      let items = filter(getline(a:firstline, a:lastline), 'v:val =~ ''\C^\s*#\s\+SECTION''')
      new
      call setline(1, map(items, 'substitute(v:val, ''^\(\s*\)[^:]\+:\(.\+\)'', ''\1\2'', '''')'))
      " Mapping to jump to section:
      nnore <silent><buffer><leader>x :<C-U>call Go2Section()<CR>
endfunction

function! Go2Section()
      let section = matchstr(getline('.'), '^\s*\zs.*')
      quit
      call search('\C# SECTION:\s\+'.section, 'cw')
endfunction

command! -bar -range=% MkIdx <line1>,<line2>call MkIdx()
" Mapping to build the index:
nnore <silent><leader>z :<C-U>MkIdx<CR> 
```

编辑：将索引放在新缓冲区上。

编辑2：不要留下空行。

编辑 3：允许跳回带有`<leader>x`.

# iphone - 每次用户单击按钮时在随机位置绘制图像

> ID：10072358
> 
> 赞同：-4
> 
> 时间：2012-04-09T11:11:55.940
> 
> 标签：iphone, objective-c, xcode, uiimageview, uiimage

每次用户单击我的应用程序中的按钮时，我想在随机位置绘制图像。（如果不清楚，我制作了[这个视频来说明这一点。）](http://youtu.be/WGnFD4ArHjQ)

这该怎么做？

我尝试过的是以下内容。

```
int num,x,y;
-(IBAction)button{
  num++;
  x = arc4random%320;
  y = arc4random%480;
  UIImageView *flower_xxx; 
```

（我想“xxx”喜欢这个“flower_%03d,num”）

```
 flower_xxx.center = CGPoint(x,y);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T11:34:25.993

可以使用的示例如下：

```
...
UIImageView *im = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"img.png"]];
[im setFrame:CGRectMake(arc4random()%320, arc4random()%460, 20, 20)];
[self.view addSubview:im];
... 
```

认为这是您在按钮事件中放置的内容，并将图像随机放置在主视图中。

也认为这是一个可以从中汲取灵感并做得更好的例子^_^

# css - CSS 图像乱码

> ID：10072361
> 
> 赞同：0
> 
> 时间：2012-04-09T11:12:04.780
> 
> 标签：css

有人可以帮我做一些 CSS 图像定位吗？

我正在尝试制作一个顶部和底部是单独图像的列。我这样做是为了得到一个漂亮的曲线，但是当图像被放入时，右列会在左 div 下方而不是向右浮动。我尝试过绝对定位，但似乎什么也没做。任何帮助将不胜感激，谢谢。

CSS：

```
#column-top{
    width:735px;
    height:40px;
    float:left;
    background-image:url(images/opactop.png);
}

#column_left_content{
    width:735px;
    min-height:500px;
    margin-right:0px;
    float:left;
    background-image:url(images/opaccontent.png);
    background-repeat:repeat-y;
}

#column_bottom{
    width:735px;
    height:40px;
    float:left;
    background-image:url(images/opacbottom.png);   
}

#column_right{
    width:160px;
    height:900px;
    float:right;
    background-image:url(images/opac.png);
    background-repeat:repeat-y;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T11:33:39.087

这是我给你的小提琴。你不需要浮动顶部和底部。left 浮动两个中间的并将它们放在容器 div 中。 [jsfiddle](http://jsfiddle.net/ryanwfiorini/BT586/)

# asp.net-mvc - Umbraco 5 Jupiter 中的 URL 重写

> ID：10072362
> 
> 赞同：2
> 
> 时间：2012-04-09T11:12:10.550
> 
> 标签：asp.net-mvc, url-rewriting, umbraco5

我想在 Umbraco 5 中进行简单的 URL 重写，就像我们在以前的版本中所做的那样，即更改 UrlRewriting.config 文件，或者我们曾经在 Asp .Net 中这样做

```
<rewriter>
 <rewrite url="~/en/faq.aspx" to="~/faq.aspx" />
</rewrite> 
```

我知道我们可以在应用程序中创建新区域，然后在 areaRegisteration.cs 中添加新路由。但是随后出现了将这些控制器映射到默认视图的问题，因为视图位于：视图 > 应用程序的 Umbraco 目录中。

例如，

我创建了一个名为“En”的新区域，并在 EngAreaRegisteration.cs 中添加了 Route，即

```
context.MapRoute("en_property","en/{city}/{controller}/{action}",new {  } ); 
```

那么我如何将操作映射到任何 Umbraco 页面，我不认为重定向是一种解决方案，因为重定向会改变 URL，

我的网址是这样的，en/paris/property/book

我正在使用 Umbraco 5.0.1 Web 部署。

提前致谢

雪儿

# java - 区别 b/w Hibernate 的 Sessionfactory.getCurrentSession() 和 SessionFactory.openSession()

> ID：10072367
> 
> 赞同：17
> 
> 时间：2012-04-09T11:12:21.660
> 
> 标签：java, hibernate, orm, persistence

我在两者之间有点困惑。据我所知，两者都返回休眠会话，`SessionFactory.getCurrentSession()`返回基于`<property name="current_session_context_class">`在 hibernate.cfg.xml 中设置的属性的上下文会话我们不应该总是采用这种方法吗？

增加了什么附加值`SessionFactory.openSession()`？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-04-09T12:23:24.750

`sf.getCurrentSession()`每次第一次调用时都会打开一个会话。如果一个会话不存在，这将创建一个全新的会话，如果一个会话已经存在，则使用一个现有会话。

在 Tomcat 中，这将会话与使用底层`ThreadLocal`对象创建的线程相关联。但是由于 Tomcat 使用线程池，完全有可能一个请求可能会接收到一个已经与它关联的会话的线程，因此引入了甚至不创建全新会话的可能性。另一件事是您获得的 Session 会`sf.getCurrentSession()`自动刷新和关闭。

`sf.openSession()`另一方面，该方法创建一个新会话，但不尝试将其与线程相关联。但是请记住`sf.openSession()`，它引入了另一个障碍，它希望用户自己处理会话的关闭和刷新，而不是让 Hibernate 自动为我们做这件事。

`sf.getCurrentSession()`通常就足够了。`sf.openSession()`提供并促进对会话存储和管理位置的更高级别的管理。这当然是一个高级选项。

# java - 如何在struts项目的服务器中进行更改

> ID：10072369
> 
> 赞同：3
> 
> 时间：2012-04-09T11:12:22.300
> 
> 标签：java, struts

我基本上是一个 php 程序员，最终我不得不从事一个 java 项目。java项目是用struts框架完成的，我们已经给出了改变基于“X”的结果列表的任务。当我在本地系统中设置项目并对 java 文件进行更改时说 abc.java 并构建新类。这些更改在我的本地系统上运行良好。但是当我用服务器中的新构建类替换 abc.class 文件时，它不起作用。对此问题的任何帮助将不胜感激。

我在本地系统中设置了 appache tomcat 7.0。并使用 net beans 7.0 IDE 构建新的类文件。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T12:34:10.313

当您重新启动网络服务器时，您的更改可能会可见。

您应该做的是自动化构建：您应该使用 ant 或 maven 创建一个战争文件[http://en.wikipedia.org/wiki/WAR_file_format_(Sun](http://en.wikipedia.org/wiki/WAR_file_format_(Sun) ) 并让您的脚本将此战争文件上传到您的本地服务器/生产服务器。服务器将自动检测新的 webapp 版本并进行部署。

理想情况下，您的部署任务应该从您的版本控制系统（git、cvs、svn）执行检查，执行所需的单元测试、集成测试等。只有当所有测试都通过时，才能将 webapp 部署到您的服务器上。

# c# - 哪个声明最好使用，Collection 还是 IEnumerable？

> ID：10072370
> 
> 赞同：0
> 
> 时间：2012-04-09T11:12:25.187
> 
> 标签：c#, c#-4.0, c#-3.0

我可以用两种方式编写代码来实现我的目标，但想知道哪一种是最好的做法？

```
Collection<MyClass> obj = new Collection<MyClass>(); 
```

或者

```
IEnumerable<MyClass> obj = new Collection<MyClass>(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T11:15:47.403

在这种情况下，`IEnumerable<MyClass> obj = new Collection<MyClass>()`根本没有任何意义，因为您有一个无法添加项目的空集合（因为`IEnumerable`不允许这样做）。这有什么用？

除此之外，如果我们谈论的是不会暴露给方法之外的代码的局部变量，那么唯一重要的是方便和清晰。您可以通过使用第一种形式的等效项来最大化这两种情况：

```
var obj = new Collection<MyClass>(); 
```

如果对象*暴露*给外部代码（例如，通过属性，或者如果它由方法返回），那么您应该选择对给定类的公共接口最有意义的类型。这意味着，根据经验，您应该尽可能*使用最少专业化的类型，并且始终首选接口*。

因此，如果您要公开`obj`您应该使用`IEnumerable`如果集合不打算由您的代码的用户修改。否则，您应该尽可能使用`ICollection`；如果还不够的话`IList`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T11:13:39.147

就个人而言，我更喜欢

```
var obj = new Collection<MyClass>(); 
```

这甚至可以成功编译到带有 VS.NET 2008 及更高版本的 .NET 2.0。

请[参阅`var`](http://msdn.microsoft.com/en-us/library/bb383973.aspx).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T11:19:45.067

我个人认为这取决于您想要达到的特异性水平。

谨记`Collection<T>`暗示`IList<T>, ICollection<T>, IEnumerable<T>, IList, ICollection, IEnumerable`。

正如乔恩已经指出的那样，您给出的示例没有任何意义，因为您正在创建一个无法添加的空集合，但给出了一个不同的示例，特异性水平开始发挥作用。

Collection 有一组特定的成员，如果需要这些成员，请使用它。如果您想对集合中的数据不那么具体，您可以强制转换为 Collectioin 实现的任何接口。问题是，如果您正在创建一个`Collection<T>`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T11:29:04.570

这完全取决于要求。如果处理 DAL 或返回数据库对象，则 IEnumerable 更可取。

声明为 Collection 将提供更多功能。 [你可以在那里得到更多的想法。](https://stackoverflow.com/questions/3559868/list-ilist-ienumerable-iqueryable-icollection-which-is-most-flexible-return)

# java - java - 变量名的变量？或者有什么类似于 MACRO 的吗？

> ID：10072374
> 
> 赞同：0
> 
> 时间：2012-04-09T11:12:52.143
> 
> 标签：java, variables, nested-class

是否可以为变量 Names 创建变量？像这样

```
class example {   
  String VAR1 = "id";
  String VAR2 = "mark";

   public foo()
    {
     int VAR1;
     int VAR2;
    }
} 
```

或者说我有嵌套类 Parent 和 Child。

```
class Parent { 
   char a;
   //some variables

   class child {
     //char b = Parent.a;
   }
} 
```

我有很多这样的课程。所以我需要用 MACRO 之类的东西替换 'Parent.a' 中的 'Parent'，这样我就不想单独更改其子课程中的每个 'Parent'。

有什么可能的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T11:18:59.753

您的第一个示例在 Java 中是不可能的。如果您更改代码，则第二个示例有效：

```
class Parent {
    char a;

    class child {
        char b = a;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T11:48:43.673

```
class Parent { 

       // Main parent
       char a;
       //some other fields

       // The child class
       class Child {

         // The main child
          char a = Parent.a;
         //some other fields

       }

       // this is what you need
       public char getChild() {
           Child child = new Child();
           return child.a;
       }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T12:22:21.207

如果您想要一种方便的方式来重命名变量，那么请使用[可以让您做到这一点](http://www.wikihow.com/Rename-Variables-in-Eclipse-%28Java%29)的 IDE 。

这类事情（或至少应该）超出了编程语言设计的范畴。

# android - android获取在线视频文件并提取缩略图

> ID：10072375
> 
> 赞同：3
> 
> 时间：2012-04-09T11:13:14.450
> 
> 标签：android

我正在尝试获取存储在 Amazons S3 上的视频（我有一个指向 .mp4 文件的公共链接）并从视频的第一帧中提取缩略图。

这里有关于这样做但针对本地文件或 Youtube 文件的问题。

有没有人有这样做但针对在线文件的示例？

我正在尝试 MediaMetadataRetriever 类，但我无法让它发挥作用。

谢谢

# jsp - Dojo 小部件未在 FireFox 中加载

> ID：10072376
> 
> 赞同：1
> 
> 时间：2012-04-09T11:13:17.313
> 
> 标签：jsp, dojo

我们在应用程序中加载 dojo 小部件时遇到问题。dojo 库上传到网络发布者，其文件夹结构类似于 - www.wp-mydemopath.com/web/fw/tools/ssue/ui/1.6/auessome/dojo

我们在所有页面通用的 jsp 中加载 dojo 组件。我们通过以下方式加载 dojo 组件-

```
djConfig = {
            isDebug: false,
            debugAtAllCosts: false,
            parseOnLoad: true,
            baseUrl: "http://www.wp-mydemopath.com/web/fw/tools/ssue/ui/1.6/auessome/dojo/",
            modulePaths: {
                xwt: "www.wp-mydemopath.com/web/fw/tools/ssue/ui/1.6/auessome/xwt/"
            } 
```

在这里，我们在脚本标签中定义它-

```
src="http://www.wp-mydemopath.com/web/fw/tools/ssue/ui/1.6/auessome/dojo/dojo.js" 
```

一旦我们注册了 dojo 模块路径和 dojo.js，我们将通过以下方式加载所有必需的 dojo 小部件 -

```
<script type="text/javascript">
    dojo.require("dojo.parser");

    dojo.require("dijit.dijit");

    dojo.require("xwt.widget.toolbar.Toolbar");

    dojo.require("xwt.widget.form.FilteringSelect");

    //and functionality will be defined here
</script> 
```

问题是，当上面的代码在 Internet Explorer 中使用时，它工作正常。但是，如果我们在 Firefox 中使用相同的代码，则无法加载 dojo 小部件。我们在 firebug 控制台中收到以下错误-

> 无法加载 dojo.parser，上次尝试为 ./parser.js。

同样，它无法加载任何小部件。请帮助解决此问题。在不同的博客中为许多人寻找相同的问题，但没有人得到解决方案。我发现firefox会设置一个限制，我尝试通过将参数设置为false来传递这个限制。即使这样也没有用。虽然它有效，但它不是一个可行的解决方案，因为我们不能要求最终用户在他们的浏览器中进行设置。请帮我解决这个问题。提前致谢。

问候，

库玛吉·阿鲁里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T17:04:18.307

首先有几件事..

[djconfig 已弃用](http://dojotoolkit.org/reference-guide/1.7/releasenotes/1.6.html#djconfig-deprecated)

你在使用跨域吗？无需将路径引用为绝对路径。此外，baseUrl 默认为 dojo.js 的位置，所以删除它。

事实上，'xwt' 命名空间被定位为 dojox、dojo 和 dijit 的兄弟，所以你实际上不需要定义它。

我建议使用该页面上的锅炉。“data-”前缀是新的mojo mon，以下就足够了：

```
<script src="http://www.wp-mydemopath.com/web/fw/tools/ssue/ui/1.6/auessome/dojo/dojo.js" 
  data-dojo-config="isDebug: false,debugAtAllCosts: false,parseOnLoad: true"><!-- //required for FF3 and Opera (TidyHTML in JSP) --></script> 
```

这个评论的原因`<!-- //required for FF3 and Opera (TidyHTML in JSP) -->`是，JSP 服务器最常整理输出，检测错误的 DOM 层次结构和结束标记；问题是脚本标签不应该是自动关闭的

# java - GWT CellTable 自动换行

> ID：10072384
> 
> 赞同：0
> 
> 时间：2012-04-09T11:14:33.740
> 
> 标签：java, gwt, celltable

我想设置固定的列宽，但是当内容（字符串）长于列宽时，列宽会拉伸到字符串的宽度。![在此处输入图像描述](../Images/1b8e7a145cca5f624445f61b49b04717.png)

但我需要有静态的列宽，不可修改，当内容较长时，将内容转移到下一行。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T11:44:54.487

假设你有代码

```
cellTable.addColumn(column1);
cellTable.addColumn(column2);
cellTable.setColumnWidth(column1, 120.0, Unit.PX);
cellTable.setColumnWidth(column2, 350.0, Unit.PX); 
```

在你 style.css

```
.wordWrap{
 width:100%;
 word-wrap: break-word;
} 
```

然后设置CSS

```
cellTable.setStyleName("wordWrap"); 
```

# java - XStream 和 Object 类序列化

> ID：10072385
> 
> 赞同：5
> 
> 时间：2012-04-09T11:14:39.807
> 
> 标签：java, xstream

我有 bean 有可以包含不同类型的对象。现在，当我创建 XML 时，它会将类属性添加到序列化对象。我想更改例如类简单名称。

示例 Java：

```
public class MyParentClass {

private Object childObjectAttribute; // Can be any instance of any interface ...

// Getters & setters etc.. 
```

XStream 初始化：

```
public XStream getXStream()
{
    XStream xstream = new XStream();
    Class<?>[] c = { MyInterfaceImpl.class }; // MyInterfaceImpl has of course @XStreamAlias("MyInterface")
    xstream.processAnnotations(c);
    xstream.alias(MyInterface.class.getSimpleName(), MyInterface.class, MyInterfaceImpl.class);
    return xstream;
} 
```

示例 XML：

```
<myParentClass>
    <childObjectAttribute class="com.example.PossibleClass"/>
</myParentClass> 
```

我想将 com.example.PossibleClass 更改为 PossibleClass 或其他内容。那可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-09T12:01:55.227

是的你可以！它有助于减小生成文档的大小。这样做是个好习惯。
使用[XStream.alias()](http://x-stream.github.io/javadoc/com/thoughtworks/xstream/XStream.html#alias%28java.lang.String,%20java.lang.Class%29)方法。

这对我有用。

```
PersonX person = new PersonX("Tito", "George");
XStream xstream = new XStream();
xstream.alias("MyPerson", PersonX.class);
String str = xstream.toXML(person);
System.out.println(str); 
```

无别名

```
<co.in.test.PersonX>
  <firstName>Tito</firstName>
  <lastName>George</lastName>
</co.in.test.PersonX> 
```

有别名

```
<MyPerson>
  <firstName>Tito</firstName>
  <lastName>George</lastName>
</MyPerson> 
```

以下方法不起作用吗？

```
workxstream.alias("PossibleClass", PossibleClass.class); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-03T14:06:52.257

是的，如果您想要类的简单名称并且您知道对象的包，您可以：

```
XStream xstream = new XStream();
xstream.aliasPackage("", "com.example"); 
```

输出xml：

```
<myParentClass>
    <childObjectAttribute class="PossibleClass"/>
</myParentClass> 
```

# orientdb - OrientDB：电影教程

> ID：10072390
> 
> 赞同：1
> 
> 时间：2012-04-09T11:15:05.167
> 
> 标签：orientdb

我正在尝试使用 OrientDB 通过 select 语句执行 gremlin 查询。我确定我看到了一个使用演示数据库中的电影示例的教程。但是，我已经阅读了太多关于数据库的文档，以至于我现在一辈子都找不到它。有人有它的链接吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T00:04:15.253

也许您正在寻找的教程就是这个

[http://markorodriguez.com/2011/09/22/a-graph-based-movie-recommender-engine/](http://markorodriguez.com/2011/09/22/a-graph-based-movie-recommender-engine/)

不是orientdb，而是neo4j。

由于两者都支持 gremlin 和 orientdb 都是 100% 兼容蓝图，因此本教程适用于它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-05T16:45:10.297

You can find a list of presentations [here](https://github.com/orientechnologies/orientdb/wiki/Presentations)

# mysql - 匹配数据库中的两列

> ID：10072396
> 
> 赞同：0
> 
> 时间：2012-04-09T11:15:28.780
> 
> 标签：mysql, url-rewriting, pattern-matching, url-routing

我将为客户实施新的设计/网站结构，但我有一个小问题。由于我创建的 URL 有点不同，我预计 SEO 排名会由于一堆损坏的 URL 而出现问题。我的想法是将现有的 URL（来自旧站点）与我创建的新 URL 相匹配。

我偶然发现的问题如下：

旧**网址**`http://www.example.com/category/numeric_id-item-name_item_code.html`和**新**网址一样`http://www.example.com/item_name-item_code.`

在 MySQL 中，我创建了一个新数据库，第一列包含旧网站中的 item_name 和 item_code，第二列包含新数据库中的相同信息。

想法如下： 示例：假设我们有一个名为*spring* Leaf 的项目，代码为*sl34*。旧 URL 类似于`http://www.example.com/springs/53-spring-leaf-sl34.html`. 要匹配此 URL，有 3 种可能性：

1.  如果产品在新网站上`http://www.example.com/spring-leaf-sl34`
2.  万一他们修改了名字`http://www.example.com/iron-spring-leaf-sl34`
3.  如果产品不在新网站上：`http://www.example.com/springs`

我需要帮助来创建这些匹配项。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T07:18:41.723

因此，显然，我找到了某种快速解决方法：

```
CREATE
   VIEW `database`.`url_view` 
    AS
(SELECT old_table.old_url, new_table.new_url FROM old_table LEFT JOIN new_table ON old_table.product_code=new_table.product_code); 
```

这会将旧 URL 与新 URL 相关联，并且如果旧 URL（产品）不再可用，它将插入 (NULL) 条目。

# regex - =~ 在 Perl 中的行为如何？

> ID：10072397
> 
> 赞同：1
> 
> 时间：2012-04-09T11:15:29.710
> 
> 标签：regex, perl

我有以下`perl`脚本：

```
$myVariable = "some value";
//... some code ...
$myVariable =~ s/\+/ /g;
$myVariable =~s/%([a-fA-F0-9][a-fA-F0-9])/pack("C", hex($1))/seg;
//.. some more code ... 
```

从`perl`文档中阅读，我认为`=~`运算符返回一个`boolean`值，即`true`or `false`。

我的问题是：上述`$myVariable`涉及的操作是否会影响其价值。

注意`$myVariable`' 值在我的脚本中设置为 a `string`，它是`$_`变量的`split`. 我认为这不应该影响该操作的行为。

PS 如果您需要我的脚本中的更多代码，现在就告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T11:19:33.547

`$myVariable`被改变了，但是因为你在做替换（`s///`），而不是因为匹配或替换的结果是布尔值；`=~`不是喜欢`=`，是喜欢`==`。如果你想要动作的布尔结果，你需要分配它。

```
$result = $myVariable =~ s/\+/ /g; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T11:55:51.060

我们正在谈论

```
leftvalue =~ rightvalue 
```

rightvalue 必须是以下其中一项：

```
m/regexp/
s/regexp/replacement/
tr/regexp/translation/ 
```

leftvalue 可以是任何左值。

`leftvalue =~ rightwalue`表达式始终计算为布尔值，但该值未分配给 leftvalue ！这个布尔值就是表达式本身的值！所以你可以在 if 子句中很好地使用它：

```
if (leftvalue =~ rightvalue) {
    // do something
} 
```

*   `m/regexp/`永远不会改变任何事情。它只是测试，如果正则表达式匹配左值。
*   `s/regexp/replacement/`还测试 regexp 是否与 leftvalue 匹配，如果匹配，则将匹配部分替换为`replacement`. 如果正则表达式匹配，`leftvalue =~ rightvalue`则为真，否则为假。
*   `tr/regexp/replacement/`与 类似`s///`，但使用翻译而不是替换。

所以这可以正常工作：

```
my @a=('acbc123','aubu123');
foreach (@a) {
    if ($_ =~ s/c(\d)/x$1/g;) {
        $_ .= 'MATCHED!';
    }
} 
```

结果将是：

```
a[0] = 'acbx123MATCHED!' 
```

'c'，后跟一个数字确实匹配正则表达式。所以 ist 被 'x' 和那个数字取代。因为它匹配，所以 if 语句为真，并且“匹配！” 附在字符串上。

```
a[1] = 'aubu123' 
```

正则表达式不匹配。没有任何东西被替换，并且 if 语句是错误的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-09T23:54:19.630

绑定运算符只是将目标变量“绑定”到其中一个运算符。它不影响价值。替换运算符 ,`s///`通常会更改目标值并返回它所做的替换次数。

```
 my $count = $target =~ s/.../.../;
 my $count = ( $target =~ s/.../.../ );  # same thing, clarified with () 
```

从 Perl v5.14 开始，`/r`替换运算符有一个标志，它只保留目标值，而不是返回计数，而是返回修改后的值：

```
 my $modified = $target =~ s/.../.../r; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-09T11:23:48.737

=~ 本身并没有什么意义，它还需要在它的右边做一些事情来处理它左边的变量。

要查看变量是否**与模式匹配**，请使用右侧的 m//，您可能希望将其用作布尔值，但您也可以在其他意义上使用它。这不会改变 $foo：

```
$foo =~ m/pattern/ 
```

要**替换**模式，您可以在右侧使用 s///，这会改变 $foo：

```
$foo =~ s/pattern/replacement/; 
```

要**翻译**$foo 中的单个字符，请使用右侧的 tr///，这会改变 $foo：

```
$foo =~ tr/abc/def/; 
```

# iphone - viewControllers 中的常见视图 - 代码可重用性

> ID：10072399
> 
> 赞同：1
> 
> 时间：2012-04-09T11:15:44.020
> 
> 标签：iphone, ios

**在我的大多数viewControllers**中，我几乎没有共同的视图。我注意到的是，我可以为所有**viewController**重用单个代码，这绝对是明智的。为此，我决定创建一个具有静态方法 的类**Utils**

```
+(void)createCommonViews:(float)yAxis:(NSString*)text; 
```

在我的例子中，常见的视图是三个标签和两个图像。

**问题**：我无法从**Utils**添加这些视图。我想知道如何将 self 作为参数发送，以便我可以从 Utils 添加视图。在 viewController 之外添加视图可能是错误的。在那种情况下，有什么解决办法？将所有这些视图放在 a 中，将**Utils**方法的`UIView`返回类型设置为，然后添加到**viewController （在从****viewController**调用方法之后）可能会解决我的问题。但我正在寻找的是**其他**一些解决方案。 **`UIView``UIView`**

 ******* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T11:21:28.023

```
+(void) createCommonViews:(float)yAxis withText:(NSString*) text toTarget:(UIViewController*) target
{
//create views
    [target addSuview:view];
} 
```

但我认为返回一个 Uiview 然后在 UIViewController 中添加它是一个更好的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T11:25:23.567

您尝试的方法是将您的视图对象作为单例。这充其量是不常见的，最坏的情况是等待发生的崩溃。更好的设计是让每个视图控制器类都有自己的自定义视图实例，如下所示：

```
@interface MyCommonView : UIView

// ...

@end

@interface MyViewController_A : UIViewController {
   MyCommonView *commonView;
}

@property (strong, nonatomic) IBOutlet MyCommonView *commonView;

@end

// Meanwhile somewhere else...

@interface MyViewController_B : UIViewController {
   MyCommonView *commonView;
}

@property (strong, nonatomic) IBOutlet MyCommonView *commonView;

@end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T11:25:51.877

创建一个 viewController 作为所有常见内容的父视图，将其命名为 CommonViewController 然后在您希望它出现的所有视图控制器中实现它

```
-(void) viewDidLoad 
{
   [self.view addSubView:[[CommonViewController alloc] initWithRect:..];
} 
```

或者使用 xib 文件******

# android - 从 sdcard 读取文本文件并使用电话间隙显示

> ID：10072400
> 
> 赞同：3
> 
> 时间：2012-04-09T11:15:47.030
> 
> 标签：android, cordova

我有 example.txt 文件 sdcard，我想使用手机间隙显示它。我对 android 和手机间隙非常陌生，请帮忙。这是我的 example.txt 文件：

```
 <h2>This file is in sdcard</h2> 
```

这是我的phonegap.java

```
 package com.example.phonegap;
    import org.apache.cordova.DroidGap;

     public class Phonegap extends DroidGap{
        /** Called when the activity is first created. */
      @Override
      public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        super.loadUrl("file:///android_asset/www/myfile.html");
       }

    } 
```

这是www中的myfile.html：

```
 <!DOCTYPE html>
     <html>
     <head>
      <title>FileReader Example</title>

    <script type="text/javascript" charset="utf-8" src="cordova-1.5.0.js"></script>
    <script type="text/javascript" charset="utf-8">

    // Wait for PhoneGap to load
    //
    function onLoad() {
        document.addEventListener("deviceready", onDeviceReady, false);
    }

    // PhoneGap is ready
    //
    function onDeviceReady() {
        window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, gotFS, fail);
    }

    function gotFS(fileSystem) {
        fileSystem.root.getFile("file:///sdcard/example.txt", {create: true}, gotFileEntry, fail);
    }

    function gotFileEntry(fileEntry) {
        fileEntry.file(gotFile, fail);
    }

    function gotFile(file){
        readDataUrl(file);
        readAsText(file);
    }

    function readDataUrl(file) {
        var reader = new FileReader();
        reader.onloadend = function(evt) {
            console.log("Read as data URL");
            console.log(evt.target.result);
        };
        reader.readAsDataURL(file);
    }

    function readAsText(file) {
        var reader = new FileReader();
        reader.onloadend = function(evt) {
            console.log("Read as text");
            console.log(evt.target.result);
        };
        reader.readAsText(file);
    }

    function fail(evt) {
        console.log(evt.target.error.code);
    }

    </script>
  </head>
  <body>
    <h1>Example</h1>
    <p>Read File</p>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T15:29:36.817

更改此行：

```
fileSystem.root.getFile("file:///sdcard/example.txt", {create: true}, gotFileEntry, fail); 
```

变成这样：

```
fileSystem.root.getFile("example.txt", {create: false}, gotFileEntry, fail); 
```

假设您要读取的文件是“example.txt”并且位于 /sdcard 文件夹中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T09:22:50.353

我也遇到了同样的问题。我不认为Phonegap中的API文档是对的，所以我参考*了JavaScript：权威指南*，我发现了两个关键点：

1.  我准备阅读的文件的位置。--> 我发现默认的父路径是：/mnt/sdcard。所以“/mnt/sdcard/temp/test.txt”文件写成`fileSystem.root.getFile("temp/test.txt", null, gotFileEntry, fail)`

2.  之后`reader.readAsText(file)`，只是使用`element.innerHTML = reader.result` 无法在 HTML 文件中显示结果。所以我添加了一个回调：

    ```
    reader.onload = function(){
        element.innerHTML = reader.result
    } 
    ```

调整这两个部分后，我的代码就可以工作了！

StackOverflow 有非常严格的上传格式政策，所以我无法上传确切的代码。但是你可以联系我索要代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T04:48:46.357

我假设 example.txt 位于 SD 卡的根目录（不位于文件夹中）。然后更改以下代码，

```
function gotFS(fileSystem) {
        fileSystem.root.getFile("file:///sdcard/example.txt", {create: true}, gotFileEntry, fail);
    } 
```

至

```
function gotFS(fileSystem) {
        fileSystem.root.getFile("example.txt", {create: true}, gotFileEntry, fail);
    } 
```

并尝试在以下函数中使用警报，

```
function readAsText(file) {
        alert("readAstext");
        var reader = new FileReader();
        reader.onloadend = function(evt) {

               console.log("Read as text");
                console.log(evt.target.result);
                alert("content : "+evt.target.result);
            };
            reader.readAsText(file);
} 
```

如果这不起作用，请在 HTML 中将以下代码添加到您的 body 标记中

```
 <body onload='onLoad();'> 
```

让我知道您可能遇到的问题。谢谢，，

# php - 如果我执行准备好的语句、清理用户输入并且从不使用 exec()、eval() 等，我的网站的安全性会如何受到损害？

> ID：10072406
> 
> 赞同：2
> 
> 时间：2012-04-09T11:15:58.550
> 
> 标签：php, security

还有哪些其他漏洞可以被恶意使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T11:23:19.293

您还需要转义输出，实现良好的会话安全性（假设是身份验证系统）并保护您的服务器（系统文件的 ftp / ssh / http 等）

# windows-7 - GnuPG 在生成密钥时卡住了

> ID：10072415
> 
> 赞同：0
> 
> 时间：2012-04-09T11:16:43.953
> 
> 标签：windows-7, gnupg

我正在尝试使用`gpg.exe --gen-key`命令生成 GPG 密钥。输入包括密码在内的所有详细信息后，该过程会陷入循环并不断重复以下消息。

```
gpg: NOTE: you should run 'diskperf -y' to enable the disk statistics
gpg: DBG: rndw32: get performance data problem
gpg: NOTE: you should run 'diskperf -y' to enable the disk statistics
gpg: DBG: rndw32: get performance data problem
gpg: NOTE: you should run 'diskperf -y' to enable the disk statistics
gpg: DBG: rndw32: get performance data problem 
```

我在 Windows 7 上使用 gnupg-w32-1.0.6。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-07T07:25:33.013

来自 rndw32.c：

```
 /* Get disk I/O statistics for all the hard drives */
        for (nDrive = 0;; nDrive++) {
            char diskPerformance[SIZEOF_DISK_PERFORMANCE_STRUCT];
        char szDevice[50];

        /* Check whether we can access this device */
        sprintf (szDevice, "\\\\.\\PhysicalDrive%d", nDrive);
        hDevice = CreateFile (szDevice, 0, FILE_SHARE_READ | FILE_SHARE_WRITE,
                      NULL, OPEN_EXISTING, 0, NULL);
        if (hDevice == INVALID_HANDLE_VALUE)
            break;

        /* Note: This only works if you have turned on the disk performance
         * counters with 'diskperf -y'.  These counters are off by default */
        if (DeviceIoControl (hDevice, IOCTL_DISK_PERFORMANCE, NULL, 0,
                     diskPerformance, SIZEOF_DISK_PERFORMANCE_STRUCT,
                     &dwSize, NULL))
        {
            if ( debug_me )
            log_debug ("rndw32#slow_gatherer_nt: iostats drive %d\n",
                                      nDrive );
            (*add) (diskPerformance, dwSize, requester );
        }
        else {
            log_info ("NOTE: you should run 'diskperf -y' "
                  "to enable the disk statistics\n");
        }
        CloseHandle (hDevice);
        } 
```

如果您使用远程连接，似乎解决方案可能是这个：（摘自 microfocus.com）

```
 Enabling Remote Monitoring for Windows XP

    An error message might occur when trying to monitor a computer that is running the Windows XP operating system. If so, enable monitoring remotely.

        Open Windows Explorer on the target Windows XP computer.
        Choose Tools > Folder Options .
        Click the View tab.
        Uncheck the Use Simple File Sharing check box.
        Click OK.
        Verify privileges on the target Windows XP computer as follows:
            If the system root is on an NTFS partition, you must possess at least READ access to the following files:
                %SystemRoot%\System32\Perfc009.dat
                %SystemRoot%\System32\Perfh009.dat
            You must possess at least READ access to the following registry keys on the remote computer:
                HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\SecurePipeServers\winreg
                HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Perflib
        Reboot the Windows XP computer.

    A user who possesses administrator rights to the remote computer can now view the remote counters. 
```

如果有人在本地机器上遇到这个问题，也许答案可能是启用它的另一种方式：

检查是否使用此命令启用：

```
 DISKPERF 
```

如果不是，请尝试使用以下方法启用它：

```
 DISKPERF - Y 
```

我知道这篇文章已经有两年的历史了，但是由于我在 Debian 操作系统上使用 GPG 时遇到了类似的问题，而且我在其他网站上找到的完整答案很少，我想它可以为其他人节省一些时间。

顺便说一句，就我而言，我没有陷入困境。也许您提到的循环是因为它试图从安装在系统上的多个磁盘获取静态/报告？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T05:11:51.293

I still don't know the cause and fix to the problem above. I tried the same on another machine and it worked. So I just copied the folder `C:\gnupg` to my machine and things started to work normally ever since. Looks like gpg can't generate keys on this machine.

# java - Tomcat JAASRealm - 只返回一个 Principal

> ID：10072417
> 
> 赞同：1
> 
> 时间：2012-04-09T11:17:03.747
> 
> 标签：java, tomcat, servlets, jaas

我已经使用 JAAS auth 创建了简单的 Web 应用程序，一切正常，但我需要在 servlet 中获取用户的角色列表，我得到了主题，但它没有返回任何角色列表和相关主体。它只返回第一个添加的主体？为什么会这样？如何获得角色？

这是我的消息来源：

AccLoginModule.java

```
public class AccLoginModule implements LoginModule {
        public Subject subject;
        private CallbackHandler callbackHandler;
        private Map<String, ?> sharedState;
        private Map<String, ?> options;

        private AccPrincipal principal;
        private boolean committed = false;

        @Override
        public boolean abort() throws LoginException {
            System.out.println("abort");
            if (!committed)
                return false;
            if (principal != null) {
                logout();
                principal = null;
            }
            return true;
        }

        @Override
        public boolean commit() throws LoginException {
            try {
                if (subject.getPrincipals().size() == 0) {
                    subject.getPrincipals().add(new AccPrincipal("principal 1"));
                    subject.getPrincipals().add(new AccPrincipal("principal 2"));
                    subject.getPrincipals().add(new AccRole("Acc User"));
                    subject.getPrincipals().add(new AccRole("Acc User1"));
                }
                return true;
            } catch (Exception e) {
                e.printStackTrace();
                return false;
            }
        }

        @Override
        public boolean login() throws LoginException {
            // System.out.println("login");

            if (callbackHandler == null)
                throw new LoginException("No CallbackHandler specified");
            Callback callbacks[] = new Callback[2];
            callbacks[0] = new NameCallback("Username: ");
            callbacks[1] = new PasswordCallback("Password: ", false);

            // Interact with the user to retrieve the username and password
            String username = null;
            String password = null;
            try {
                callbackHandler.handle(callbacks);
                username = ((NameCallback) callbacks[0]).getName();
                password = new String(((PasswordCallback) callbacks[1]).getPassword());
                return true;
            } catch (Exception e) {
                throw new LoginException(e.toString());
            }
        }

        @Override
        public boolean logout() throws LoginException {
            System.out.println("logout");
            committed = false;
            subject.getPrincipals().remove(principal);

            return false;
        }

        @Override
        public void initialize(Subject subject, CallbackHandler callbackHandler, Map<String, ?> sharedState, Map<String, ?> options) {
            this.subject = subject;
            this.callbackHandler = callbackHandler;
            this.sharedState = sharedState;
            this.options = options;

        }

        public Subject getSubject() {
            return subject;
        }

        public void setSubject(Subject subject) {
            this.subject = subject;
        }

    } 
```

会计准则

```
public class AccPrincipal implements Principal, Serializable {

    /**
     * 
     */
    private static final long serialVersionUID = 5002820876845306935L;

    private final String  loginResponse;

    public AccPrincipal(String lr) {
        this.loginResponse=lr;
    }

    @Override
    public String getName() {
        return loginResponse;
    }

    public String getLoginResponse() {
        return loginResponse;
    }

    @Override
    public int hashCode() {
        final int prime = 31;
        int result = 1;
        result = prime * result + ((loginResponse == null) ? 0 : loginResponse.hashCode());
        return result;
    }

    @Override
    public boolean equals(Object obj) {
        if (this == obj)
            return true;
        if (obj == null)
            return false;
        if (getClass() != obj.getClass())
            return false;
        AccPrincipal other = (AccPrincipal) obj;
        if (loginResponse == null) {
            if (other.loginResponse != null)
                return false;
        } else if (!loginResponse.equals(other.loginResponse))
            return false;
        return true;
    }
} 
```

角色

```
public class AccRole implements Principal, Serializable {

    /**
     * 
     */
    private static final long serialVersionUID = 2764250372647034496L;
    private String name;

    public AccRole(String name){
        this.name = name;
    }

    @Override
    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    @Override
    public int hashCode() {
        final int prime = 31;
        int result = 1;
        result = prime * result + ((name == null) ? 0 : name.hashCode());
        return result;
    }

    @Override
    public boolean equals(Object obj) {
        if (this == obj)
            return true;
        if (obj == null)
            return false;
        if (getClass() != obj.getClass())
            return false;
        AccRole other = (AccRole) obj;
        if (name == null) {
            if (other.name != null)
                return false;
        } else if (!name.equals(other.name))
            return false;
        return true;
    }

} 
```

上下文.xml

```
<Context>
    <Realm className="org.apache.catalina.realm.JAASRealm" appName="acczk"
        userClassNames="com.laws.acc.jaas.AccPrincipal"
        roleClassNames="com.laws.acc.jaas.AccRole">
    </Realm>

</Context> 
```

MyServlet.java

```
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
       final Subject subject = Subject.getSubject(AccessController.getContext());
       for (Principal princ : subject.getPrincipals()) {
           System.out.println(princ.getName());
       }
    } 
```

安慰：

```
09.04.2012 17:11:29 org.apache.catalina.startup.Catalina start
INFO: Server startup in 1385 ms
principal 1 
```

如何获得所有实体主体（主体+角色）？我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T15:55:54.533

Tomcat 和 Java EE 通常不会那样工作。您无法以您正在做的方式访问主题。

有关完整说明，请参阅此答案：[Tomcat-Jaas - 如何检索主题？](https://stackoverflow.com/questions/13066477/tomcat-jaas-how-to-retrieve-subject/13331151#13331151)

# jquery - 在 Joomla 中更改默认 img 样式

> ID：10072418
> 
> 赞同：0
> 
> 时间：2012-04-09T11:17:05.733
> 
> 标签：jquery, joomla, content-management-system

当类别设置为博客时，我试图覆盖默认的 img 标记样式。

我已经更改了 html 编辑器并在 CMS 中尝试了很多东西，但没有什么能让我删除或更改添加的样式属性。它是这样出来的：

```
<img src="picture.jpg" alt="alt text" width="100" height="123" style=" float:left; margin: 3px; border: 1px solid #cccccc;"/> 
```

我需要修改样式部分，只需将其全部删除，这样我就可以使用样式表对其进行样式设置。

我找到了这个 jquery 方法：[用 jquery 改变 img src](https://stackoverflow.com/questions/6568424/changing-the-img-src-with-jquery)

```
 <script>
    $('.items-leading img').attr('style',function(i,e){
 return e.replace("float:left; margin: 3px; border: 1px solid #cccccc;","");
});

  </script> 
```

并将其添加到标签的顶部。但它不起作用;(

请帮忙 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T14:46:05.460

如果要删除 img 标签的样式，只需使用以下代码：

```
<script type="text/javascript">
    $(function(){
            $('.items-leading img').css({});
    });
</script> 
```

# grails - grails 从控制器返回 xml 字符串

> ID：10072421
> 
> 赞同：0
> 
> 时间：2012-04-09T11:17:32.223
> 
> 标签：grails, controller, xmlhttprequest

在游戏应用程序中，我们使用 grails 来进行所有服务端交互。在一种情况下，我们希望从服务器保存和检索游戏状态。我假设将在 Unity 3D 中的游戏应用程序将从其下载的应用程序发出 url 请求，而控制器反过来只会返回 xml 字符串。以下代码是否足够。某些数据未反映在调用此请求的游戏应用程序中的方式。虽然我们可以看到正确调用的 url。

```
render outxml
         return false 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-11-04T18:25:52.197

这对我有用：

```
def search(String property, String value) {
def c = Stmt.createCriteria()
def xml = c.list {like property, "%$value%"}
render(text: xml.stm[0], contentType: "text/xml", encoding: "UTF-8") 
```

然后像这样调用：

```
http://localhost:8080/search?property=account&value=876543291&description=test&entries=20 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T12:20:13.287

如果`outxml`是包含您想要的 XML 响应的字符串（或 GString），那么`render outxml`应该可以正常工作。在这种情况下，您不需要有 return 语句。

你回来有什么特别的原因`false`吗？你想达到什么目的？

# python - 为什么在 Python 中创建一个类比实例化一个类要慢得多？

> ID：10072428
> 
> 赞同：28
> 
> 时间：2012-04-09T11:18:26.577
> 
> 标签：python, performance, class, memory-management

我发现创建一个类比实例化一个类要慢得多。

```
>>> from timeit import Timer as T
>>> def calc(n):
...     return T("class Haha(object): pass").timeit(n)

<<After several these 'calc' things, at least one of them have a big number, eg. 100000>>

>>> calc(9000)
15.947055101394653
>>> calc(9000)
17.39099097251892
>>> calc(9000)
18.824054956436157
>>> calc(9000)
20.33335590362549 
```

是的，创建 9000 个类需要 16 秒，并且在随后的调用中变得更慢。

还有这个：

```
>>> T("type('Haha', b, d)", "b = (object, ); d = {}").timeit(9000) 
```

给出类似的结果。

但实例化不会受到影响：

```
>>> T("Haha()", "class Haha(object): pass").timeit(5000000)
0.8786070346832275 
```

在不到一秒的时间内 5000000 个实例。

是什么让创作如此昂贵？

为什么创建过程会变慢？

**编辑：**

如何重现：

开始一个新的 python 进程，最初的几个“calc(10000)”在我的机器上给出了 0.5 的数字。尝试一些更大的值，calc(100000)，它甚至不能在 10 秒内结束，中断它，然后 calc(10000)，给出 15 秒。

**编辑：**

附加事实：

如果你在 'calc' 变慢后使用 gc.collect() ，你可以在开始时获得 'normal' 速度，但在随后的调用中时间会增加

```
>>> from a import calc
>>> calc(10000)
0.4673938751220703
>>> calc(10000)
0.4300072193145752
>>> calc(10000)
0.4270968437194824
>>> calc(10000)
0.42754602432250977
>>> calc(10000)
0.4344758987426758
>>> calc(100000)
^CTraceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "a.py", line 3, in calc
    return T("class Haha(object): pass").timeit(n)
  File "/usr/lib/python2.7/timeit.py", line 194, in timeit
    timing = self.inner(it, self.timer)
  File "<timeit-src>", line 6, in inner
KeyboardInterrupt
>>> import gc
>>> gc.collect()
234204
>>> calc(10000)
0.4237039089202881
>>> calc(10000)
1.5998330116271973
>>> calc(10000)
4.136359930038452
>>> calc(10000)
6.625348806381226 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-04-09T11:37:14.663

这可能会给你直觉：

```
>>> class Haha(object): pass
...
>>> sys.getsizeof(Haha)
904
>>> sys.getsizeof(Haha())
64 
```

类对象**比**该类的实例更复杂和昂贵的结构。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2014-09-04T05:39:39.513

啊哈哈哈！明白了！

[这可能是在没有这个补丁](https://github.com/python/cpython/commit/ef15a5a230c13d6c69c73141b1c4adf8a676fed9)的 Python 版本上完成的吗？（提示：**它是**）

如果需要证明，请检查行号。

**Marcin 是对**的：当结果看起来很糟糕时，你可能得到了一个糟糕的基准。运行`gc.disable()`，结果会自行重现。它只是表明，当您禁用垃圾收集时，您会得到垃圾结果！

* * *

更清楚地说，运行长基准测试的原因是：

*   `timeit`禁用垃圾收集，因此过大的基准测试需要更多（指数）更长的时间

*   `timeit`没有恢复异常的垃圾收集

*   您以异步异常退出长时间运行的进程，关闭垃圾收集

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-04-09T11:40:17.113

以下功能的快速分解：

```
def a():
    class Haha(object):
         pass

def b():
    Haha() 
```

给出：

```
2           0 LOAD_CONST               1 ('Haha')
            3 LOAD_GLOBAL              0 (object)
            6 BUILD_TUPLE              1
            9 LOAD_CONST               2 (<code object Haha at 0x7ff3e468bab0, file "<stdin>", line 2>)
            12 MAKE_FUNCTION            0
            15 CALL_FUNCTION            0
            18 BUILD_CLASS         
            19 STORE_FAST               0 (Haha)
            22 LOAD_CONST               0 (None)
            25 RETURN_VALUE 
```

和

```
2           0 LOAD_GLOBAL              0 (Haha)
            3 CALL_FUNCTION            0
            6 POP_TOP             
            7 LOAD_CONST               0 (None)
            10 RETURN_VALUE 
```

因此。

从外观上看，它只是在创建类时做了更多的事情。它必须初始化类，将其添加到字典以及其他任何地方，而在这种情况下，`Haha()`只需调用一个函数。

正如您注意到当垃圾收集速度太慢时再次加速垃圾收集，所以 Marcin 说这可能是内存碎片问题是正确的。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-09T11:36:16.537

**它不是**：只有你人为的测试显示类创建缓慢。事实上，正如@Veedrac 在他的回答中所显示的那样，这个结果是 timeit 禁用垃圾收集的产物。

**Downvoters：**给我看一个非人为的例子，其中类创建很慢。

在任何情况下，您的时间都会受到当时系统负载的影响。它们实际上只对几乎同时进行的比较有用。我为 9000 个班级创作获得了大约 0.5 秒的时间。事实上，ideone 大约需要 0.3 秒，即使重复执行：http: [//ideone.com/Du859](http://ideone.com/Du859)。甚至没有上升趋势。

因此，总而言之，它在您的计算机上比其他计算机慢得多，并且在其他计算机上重复测试没有上升趋势（根据您最初的说法）。测试大量实例化确实显示速度变慢，大概是因为该过程消耗了大量内存。您已经证明分配大量内存会减慢进程。做得好。

完整的ideone代码：

```
from timeit import Timer as T
def calc(n):
return T("class Haha(object): pass").timeit(n)

for i in xrange(30):
print calc(9000) 
```

# c# - 一个简单的 Wpf MVVM 绑定问题

> ID：10072430
> 
> 赞同：2
> 
> 时间：2012-04-09T11:18:58.803
> 
> 标签：c#, wpf, mvvm

我正在尝试使用 WPF MVVM。我在 XAML 中编写了以下代码

```
<UserControl x:Class="Accounting.Menu"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"  
             xmlns:local="clr-namespace:Accounting"
             mc:Ignorable="d" 
             d:DesignHeight="105" d:DesignWidth="300">
    <UserControl.DataContext>
        <local:MenuViewModel/>
    </UserControl.DataContext>
    <StackPanel>
       <StackPanel>
                <TextBlock Text="{Binding Path=MenuHeader}"/>
       </StackPanel>
       <ListBox ItemsSource="{Binding Path=MenuItems}" Height="70"/>             
    </StackPanel>     
</UserControl> 
```

我有一个`MenuViewModel`with 属性`MenuHeader`和`MenuItems`. 我在运行时获得了这两个属性的值。前者绑定到 text ，`TextBlock`后者绑定到 ItemSource `ListBox`。但是当我运行解决方案时，TextBlock 和 ListBox 是空的。

**编辑：ViewModel 代码**

```
 public class MenuViewModel: ViewModelBase
    {
        AccountingDataClassesDataContext db;

        private string _menuType;
        public string MenuHeader { get; set; }
        public ObservableCollection<string> MenuItems { get; set; }

        public MenuViewModel()
        { 

        }

        public MenuViewModel(string menuType)
        {
            this._menuType = menuType;
            db = new AccountingDataClassesDataContext();
            if (menuType == "Vouchers")
            {
                var items = db.Vouchers.OrderBy(t => t.VoucherName).Select(v => v.VoucherName).ToList<string>();

                if (items.Any())
                {
                    MenuItems = new ObservableCollection<string>(items);
                    MenuHeader = "Vouchers";
                }
            }
            else
            {
                System.Windows.MessageBox.Show("Menu not found");
            }

        }
    } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T11:43:10.700

您正在使用 ViewModel 的默认构造函数在 XAML 中创建 ViewModel，该构造函数什么都不做。您所有的人口代码都在从未调用过的非默认构造函数中。

`View.DataContext = ViewModel`更常用的方法是在代码中创建 ViewModel，然后显式使用或隐式使用 DataTemplate将其注入视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T11:48:09.803

我认为您必须触发 OnPropertyChanged 事件。我不确定您是否使用 MVVM 库（例如，由于您从 ViewModelBase 继承，您可能正在使用 MVVM Light），它们将 OnPropertyChanged 包装在 RaisePropertyChanged 事件处理程序中。触发事件将通知 WPF 更新 UI。

```
string m_MenuHeader;
public string MenuHeader 
{ 
    get
    {
        return m_MenuHeader;
    } 
    set
    {
        m_MenuHeader=value; OnPropertyChanged("MenuHeader");
    }
} 
```

# multithreading - 具有更改优先级功能的优先级队列，可保持元素有序

> ID：10072437
> 
> 赞同：3
> 
> 时间：2012-04-09T11:19:27.423
> 
> 标签：multithreading, data-structures, scheduling, priority-queue

如果两个线程具有相同的优先级，我正在寻找一种按优先级和先到先服务（FCFS）调度线程的方法。我正在考虑使用一堆队列或类似的东西。问题是，即使我实现了自己的优先级队列，更改优先级的能力也会破坏插入该队列的顺序。

为了解决这个问题，我可以节省每个线程的插入时间，并按插入时间对优先级队列进行排序（作为主要优先级参数的辅助参数），但我相信有一种数据结构的组合可以解决没有使用插入时间的问题。

复杂度应该是`O(logN)`（有一些`O(N)`复杂的天真的解决方案，例如有一个常规队列，并且每当我们必须弹出一个线程时迭代队列）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T11:27:37.107

可能是我没有正确解决您的问题，但您可以为每个优先级设置一个单独的列表。
因此，每个线程都根据其优先级添加到相应的列表中。而且由于您总是在列表的末尾添加并从头部删除，您将拥有 FCFS 行为。

您还可以创建一个优先级队列来检索具有最低优先级的下一个线程（O(1) 来获取下一个线程和 O(logN) 来插入。为了比较，您可以使用每个节点的优先级和插入时间的组合。

# iphone - AFNetworking 监控所有下载过程

> ID：10072441
> 
> 赞同：0
> 
> 时间：2012-04-09T11:20:05.717
> 
> 标签：iphone, objective-c, ios, afnetworking

我正在尝试从远程下载文件，现在我可以监控每个文件的下载成功状态

```
[operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) { 
```

但是有什么方法可以监控整个下载过程吗？我怎么知道所有下载都已完成？

我尝试开始下载请求

```
[afhttpClient enqueueBatchOfHTTPRequestOperations:operationArray 
                                              progressBlock:progressBlock 
                                            completionBlock:completionBlock]; 
```

似乎不起作用，那么上面的代码和在循环中使用[操作开始]开始下载请求有什么区别？

@mattt（如果你能看到这个）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T11:58:26.713

您很可能有一个用于下载图像的 URL 对象的 NSArray。您需要做的是创建一个等于 URL 对象计数的整数值。每次您成功下载图像或绝对无法下载图像时（例如在几次超时或收到 404 HTTP 状态代码后），您都需要减少该整数（请注意，它应该是原子属性，因为块在不同的线程）。一旦计数达到零 - 所有请求都已完成。您还可以使用该整数来更新进度条或简单地通知用户“已下载 #/15 图像”。如果您需要任何其他说明，请告诉我。

不幸的是我没有使用过 AFHTTPClient，所以我不能准确地告诉你这两个操作之间的区别，但是从上下文来看，第一个几乎同时异步执行所有请求，而后一个使用连续方法，其中第二个请求只会在第一个完成后启动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T16:20:59.483

如果您想要的是每个操作的持续进度更新，下载的字节数和预期的总数，那么我强烈推荐 Peter Steinberger 的[AFDownloadRequestOperation](https://github.com/steipete/AFDownloadRequestOperation)。

此类派生自 AFHTTPRequestOperation 并`progressiveDownloadProgressBlock`在操作队列级别添加了每个操作，而不仅仅是每个操作完成的进度，这正是我认为您正在寻找的。另一个很大的好处是，它使可恢复/部分下载比核心 AFNetworking 实现更容易访问。

它很容易使用（来自 GitHub 项目的 README.md 的示例）：

```
[pdfRequest setProgressiveDownloadProgressBlock:^(NSInteger bytesRead,
            long long totalBytesRead, long long totalBytesExpected,
            long long totalBytesReadForFile, long long totalBytesExpectedToReadForFile)
{
    self.downloadProgress = totalBytesReadForFile/(float)totalBytesExpectedToReadForFile;
}]; 
```

我在一些企业 iOS 项目中使用它来下载数 GB 的文件，我可以告诉你，它与 AFNetworking 的 1.0.1 版本配合得很好。

希望对您有所帮助……</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T08:12:53.150

您可以创建 NSOperationQueue 并将所有 AFHTTPRequestOperation 放入其中。使用 KVO 观察“操作”。当计数变为零时，即表示所有操作都已完成。

# facebook - Facebook fb：活动选项卡无法刷新

> ID：10072444
> 
> 赞同：2
> 
> 时间：2012-04-09T11:20:56.277
> 
> 标签：facebook, xfbml

我有一个 facebook XFBML 活动选项卡，使用通常的`<fb:activity ...></fb:activity>`；代码直接来自[https://developers.facebook.com/docs/reference/plugins/activity/](https://developers.facebook.com/docs/reference/plugins/activity/)。

如果用户在页面加载时登录到 facebook，它可以正常工作。

如果用户最初没有登录，则该框为空白（很公平）。当他按下我页面上的登录按钮登录 facebook 并注册我的应用程序时，我尝试使用以下功能刷新活动插件：

```
FB.XFBML.parse(); 
```

（见[http://developers.facebook.com/docs/reference/javascript/FB.XFBML.parse/](http://developers.facebook.com/docs/reference/javascript/FB.XFBML.parse/)）

但是，在 30 秒后，此操作失败，活动框留空并在控制台上显示以下错误：

```
1 XFBML tags failed to render in 30000ms 
```

有谁知道为什么会这样？

# google-visualization - 非常奇怪的 JSAPI 可视化图表加载缓慢

> ID：10072446
> 
> 赞同：2
> 
> 时间：2012-04-09T11:21:06.623
> 
> 标签：google-visualization

我知道之前有人问过类似的问题。但我宁愿解释我的，因为我觉得手头有一个更大的问题。

好吧，我在 ASP.NET MVC 环境中工作。我在 _Layout.js 文件中初始化了一组 jQuery 和脚本。我在所有剩余的 jQuery 引用的末尾添加了[https://www.goolge.com/jsapi 。](https://www.goolge.com/jsapi)1\. 现在，最近，并非总是如此，但有时（实际上在过去 4 天里很常见）......我意识到我的谷歌图表没有加载或加载非常缓慢。

2.  我使用了 fiddler，我使用了 firebug 等，但是在浏览器调用“Sending request google ....”的阶段请求停止并等待并继续等待。

3.  我认为这是因为提琴手和萤火虫有一些延迟，但事实并非如此。所以这就是我尝试的方法，每当出现问题时，我都会立即关闭所有提琴手和萤火虫并打开命令提示符并执行 ping www.google.com ......令人惊讶的是“请求超时”。我也立即打开浏览器并尝试打开 www.google.com ......它搜索然后突然重定向到 google.co.in 因为我位于印度。

现在，最近有人遇到过类似的问题吗？我希望这是暂时的......或者我有什么遗漏吗？

# java - overriding equals in superclass but not in subclass?

> ID：10072448
> 
> 赞同：0
> 
> 时间：2012-04-09T11:21:09.083
> 
> 标签：java, class

I have overridden `equals()` and `hashCode()` in my ClassA.

```
ClassA {
   //overridden equals() and hashCode()
} 
```

ClassB extends ClassA.

```
ClassB extends ClassA{
   //....
} 
```

Now if my code calls `classBInstance.equals(classBInstanceTwo)`, does this call ClassA's `equals` method?

Thanks!

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T11:31:06.087

Yes it does. But this can easily break the equals/hashcode contract ([javadoc](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html#equals%28java.lang.Object%29)). For Example:

a equals b == b equals a

a equals b == a equals c == b equals c

So in the class B you shouldn't add new fields, which you want to use in equals/hashcode.

A possible solution is to use Class A as a field in Class B.

In the book Effective Java of Joshua Bloch there is a nice article about the problems with it.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T11:25:14.323

Yes. All methods in Java are virtual by default.

# javascript - Windows 7 小工具未加载

> ID：10072449
> 
> 赞同：0
> 
> 时间：2012-04-09T11:21:09.430
> 
> 标签：javascript, html, dom-events, windows-desktop-gadgets

我正在为 Windows 7 开发一个简单的小工具作为学习练习。我在[这篇](http://odetocode.com/articles/463.aspx)文章（在*小工具和脚本*子主题下）中读到，要初始化小工具，您应该使用`document.onreadystatechange`诸如`onLOad`. 我也在我浏览过的示例项目代码中看到了它。这就是我为我的项目提出的。

```
document.onreadystatechange = function()
{
    if(document.readyState == "complete")
    {
        System.Gadget.settingsUI = "settings.html";  //this line enables the settings UI
        System.Gadget.onSettingsClosed = settingsClosed;
    }
} 
```

但是，当我在工作中使用此代码段时，它不起作用。小工具中的“选项”按钮不显示。如果我使用`onLoad`，它可以工作。我已经安装了 2 个小工具。他们每个人都使用这两种方法。一用一`onLoad`用`document.onreadystatechange`。而且它们都有效！

现在我很困惑为什么它不适用于我的小工具。有没有我忽略的重要部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T14:45:33.260

尝试这些方法，将您移动`onsettingsclosed`到不同的事件并用它调用函数

```
document.onreadystatechange = function()
{    
    if(document.readyState=="complete")
    {
        var searchTags = System.Gadget.Settings.read("searchTags");
        if(searchTags != "")
        {
            searchBox.value = searchTags;
        }       
    }        
}

System.Gadget.onSettingsClosing = function(event)
{
    if (event.closeAction == event.Action.commit) 
    {
        var searchTags = searchBox.value;
        if(searchTags != "")
        {
            System.Gadget.Settings.write("searchTags", searchTags);
        }
        event.cancel = false;
    }
} 
```

# parser-generator - PEG 和空格/注释

> ID：10072451
> 
> 赞同：12
> 
> 时间：2012-04-09T11:21:33.080
> 
> 标签：parser-generator, peg

我有一些使用 ANTLR 编写解析器的经验，我正在尝试（用于自学:)）将其中一个移植到 PEG（解析表达式语法）。

当我试图了解这个想法时，有一件事让我觉得很麻烦，以至于我觉得我错过了一些东西：如何处理空白。

在 ANTLR 中，处理空格和注释的正常方法是将标记放在隐藏通道中，但是使用 PEG 语法没有标记化步骤。考虑到 C 或 Java 等语言几乎在任何地方都允许使用注释，因此人们想立即“隐藏”注释，但由于注释可能具有语义含义（例如在生成代码文档、类图等时），因此不只是想丢弃它们。

那么，有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-13T11:13:34.543

因为没有单独的标记化阶段，所以没有“时间”来丢弃某些字符（或标记）。

由于您熟悉 ANTLR，因此可以这样想：假设 ANTLR 只处理 PEG。所以你只有解析器规则，没有词法分析器规则。现在你将如何丢弃空格？（你不能）。

所以，你的问题的答案是：你不能，你必须在 PEG 中用空格规则乱扔你的语法：

### ANTLR

```
add_expr
 : Num Add Num
 ;

Add   : '+';
Num   : '0'..'9'+;
Space : ' '+ {skip();}; 
```

### 聚乙二醇

```
add_expr
 : num _ '+' _ num
 ;

num : '0'..'9'+;
_   : ' '*; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T17:08:30.553

可以嵌套 PEG 解析器。这个想法是第一个解析器使用字符并将标记提供给第二个解析器。第二个 PEG 解析器使用令牌并完成实际工作。

当然，这意味着您放弃了 Parsing Expression Grammar 与其他解析方案相比的一个优势：PEG 的简单性。

# gwt - 如何以编程方式禁用浏览器缓存

> ID：10072452
> 
> 赞同：0
> 
> 时间：2012-04-09T11:21:33.580
> 
> 标签：gwt, browser, disable-caching

我对禁用浏览器缓存有疑问。我已经找到了一些解决方案，只是想知道是否有更好或更常见的方法。所以我有 GWT 应用程序，为了禁用兑现，我可以使用下一个选项：

1.  添加到 URL 虚拟参数
2.  放入 HTML 页面`<meta http-equiv="pragma" content="no-cache">`
3.  设置 HTTP 标头：

    ```
    header("Pragma-directive: no-cache");  
    header("Cache-directive: no-cache");  
    header("Cache-control: no-cache");  
    header("Pragma: no-cache");  
    header("Expires: 0"); 
    ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T12:06:09.673

最重要的是

```
header("Expires: Sat, 26 Jul 1997 05:00:00 GMT");  #Expires sometime in the past
header("Cache-control: no-cache");                 #Disables caching 
```

另外，将唯一参数添加到url中以确保。如果您使用浏览器后退按钮，有时整个 DOM 会被缓存并且不会获取新内容，除非您使用 javascript 动态执行此操作并向您的请求添加唯一 ID。

通常，您希望在服务器配置中设置大多数这些标头，以便您也可以使用正确的标头提供普通图像和其他静态内容。

# entity-framework - EF 4.3 中的 DropCreateDatabaseIfModelChanges 发生了什么？

> ID：10072454
> 
> 赞同：1
> 
> 时间：2012-04-09T11:21:57.073
> 
> 标签：entity-framework, code-first

通过删除 EF 4.3 中的 EdmMetadata 表，**DropCreateDatabaseIfModelChanges**似乎不再有效。可以？

或者

有没有办法像我在 EF 4.2 的 SEED 方法中那样声明初始化程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T11:55:26.840

`EdmMetadata`在 EF 4.3 Code First 模型中已过时，而是使用`_MigrationHistory`表来检查模型和数据库之间的兼容性。

（请注意，如果可能，将 _MigrationHistory 表设为系统表。这意味着要查看它，您可能需要在 SQL Management Studio 或您的首选工具中展开“系统表”。）

在 EF 4.3 中，当 DbContext 与 Code First 方法一起使用时，会`Database.Create`尝试使用 Code First 迁移来创建数据库并执行 DDL。`Database.Create`为您执行初始自动迁移。作为此过程的一部分，迁移将创建一个名为的表`_MigrationHistory`，并在该表中插入一行，其中包含 Code First 模型的压缩版本。DropCreateDatabaseIfModelChanges初始化器使用该**方法通过检查****_MigrationHistory**表`Database.CompatibleWithModel`来确定 Code First 模型是否与用于创建数据库的模型匹配。

 **[http://blog.oneunicorn.com/2012/01/13/ef-4-3-beta-1-what-happened-to-that-edmmetadata-table/](http://blog.oneunicorn.com/2012/01/13/ef-4-3-beta-1-what-happened-to-that-edmmetadata-table/)**

# java - 获取连接到 RMI 服务的客户端数量

> ID：10072458
> 
> 赞同：3
> 
> 时间：2012-04-09T11:22:12.563
> 
> 标签：java, sockets, rmi

我有一个`Remote`通过 RMI 导出的服务。我可以获得连接到此服务的客户端数量吗？

我强烈希望使用本机方法（计算套接字）而不是构建我自己的解决方案，其中客户需要自己注册，因为我需要它来进行错误检测，并且本机解决方案最不容易出错。

获得确切的客户数量会很好，但大多数情况下我只是想知道它是否为 0。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T00:39:45.907

没有“连接到 RMI 服务的客户端数量”这样的东西，因为没有“连接到 RMI 服务”这样的状态。RMI 没有显式连接。它具有底层的秘密 TCP 连接，但它们本质上是瞬态的。

您可以计算不同的传入`RemoteServer.getClientHost()`值，但是您假设主机 = 客户端，并且您仍然无法知道客户端最后一次呼叫您的时间。除非您的应用程序知道，在这种情况下，您需要自己计算它们，例如在登录和注销步骤或与您的应用程序中对应的任何步骤。

# select - Wicket 中的彩色下拉菜单

> ID：10072462
> 
> 赞同：2
> 
> 时间：2012-04-09T11:22:43.840
> 
> 标签：select, colors, wicket

是否可以在 Wicket 的下拉菜单中添加彩色项目？Dropdown 将从枚举类中获取其值。例如，枚举类具有“红、黄、绿”元素。根据元素，下拉菜单的部分将是绿色、红色、黄色。我怎样才能做到这一点？是否可以在 DropDownChoice 上使用 AttributeModifier？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T10:37:18.750

见[http://examples8x.wicket.apache.org/compref/wicket/bookmarkable/org.apache.wicket.examples.compref.SelectPage](http://examples8x.wicket.apache.org/compref/wicket/bookmarkable/org.apache.wicket.examples.compref.SelectPage)

Select 组件比 DropDownChoice 更灵活，但由于每个 <option> 使用了一个 SelectOption 组件，它也消耗更多内存。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T11:24:37.947

试试这个.....

```
<style type="text/css">
    OPTION.red{color:red}
    OPTION.yellow{color:yellow}
    OPTION.green{color:green}
</style>

<select id="myselect">
    <option value="1" class="red">red</option>
    <option value="2" class="yellow">yellow</option>
    <option value="3" class="green">green</option>
</select> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T13:11:41.187

[在 wiki 上](https://cwiki.apache.org/WICKET/how-to-modify-an-attribute-on-a-html-tag.html)详细介绍了几种方法，可以在呈现时动态添加或更改 html 标记上的属性。

# android - 安装引荐来源网址未在 android 网络市场上跟踪

> ID：10072467
> 
> 赞同：8
> 
> 时间：2012-04-09T11:23:22.800
> 
> 标签：android, installation, referrer

通过手机上的市场应用程序安装应用程序时，该应用程序将正确接收传递给它的推荐人信息（如此处所述：[http ://code.google.com/mobile/analytics/docs/android/#android-market -跟踪](http://code.google.com/mobile/analytics/docs/android/#android-market-tracking)）。

但是，当通过基于 Web 的市场安装具有相同推荐人的相同应用程序时，推荐人信息将被删除并且应用程序不会接收到。这使得从网络上针对您的应用程序的广告系列无法跟踪。

是否可以通过 android 网络市场跟踪安装引荐来源网址？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T23:48:11.543

不可以，无法从基于网络的 Google Play 商店跟踪安装引荐来源网址。这是[最新 SDK 的一个已知问题](https://developers.google.com/analytics/devguides/collection/android/v2/campaigns#known-issues)。

> Google Play 广告活动跟踪目前不支持从网络 Play 商店启动的网络到设备安装。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-28T06:21:48.410

这里可能有点晚了。幸运的是，这有助于我们跟踪来自网络商店的安装。

接收器类：

```
public class OwnReceiver extends BroadcastReceiver {

public static final String ACTION_UPDATE_DATA = "ACTION_UPDATE_DATA";
private static final String ACTION_INSTALL_REFERRER = "com.android.vending.INSTALL_REFERRER";
private static final String KEY_REFERRER = "referrer";

public OwnReceiver() {
}

@Override
public void onReceive(Context context, Intent intent) {
    if (intent == null) {
        Log.e("ReferrerReceiver", "Intent is null");
        return;
    }
    if (!ACTION_INSTALL_REFERRER.equals(intent.getAction())) {
        Log.e("ReferrerReceiver", "Wrong action! Expected: " + ACTION_INSTALL_REFERRER + " but was: " + intent.getAction());
        return;
    }
    Bundle extras = intent.getExtras();
    if (intent.getExtras() == null) {
        Log.e("ReferrerReceiver", "No data in intent");
        return;
    }

    MyApplication.setReferrerDate(context.getApplicationContext(), new Date().getTime());
    //Contro.setReferrerData(context.getApplicationContext(), (String) extras.get(KEY_REFERRER));
    MyApplication.setReferrerData(context.getApplicationContext(), (String) extras.get(KEY_REFERRER));
    LocalBroadcastManager.getInstance(context).sendBroadcast(new Intent(ACTION_UPDATE_DATA));
}
} 
```

MainActivity 中的用法：

```
private final BroadcastReceiver mUpdateReceiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {
       someMethod(); //send received data to your method and use it your way
    }
}; 
```

someMethod 你接收数据的地方：

```
 private void someMethod(){
    String referrerDataRaw = MyApplication.getReferrerDataRaw(getApplicationContext());

    if(referrerDataRaw.toLowerCase().contains(matchx.toLowerCase())){        
        Log.i("true",referrerDataRaw);
        Toast.makeText(getBaseContext(),"Install referrer found",Toast.LENGTH_SHORT).show();
        //postBack();
    }
    else {
        Log.i("false","no referrer found");
        Toast.makeText(getBaseContext(),"no referrer found",Toast.LENGTH_SHORT).show();
    }

} 
```

**如果您要发送回发，则此**奖励****

 **```
public void postBack() {
   // String postTest = "https://play.google.com/store/apps/details?id=com.neon.myApp&referrer=utm_source=someOne&utm_medium=cpr&utm_term=testytest";
    String referrerDataRaw = MyApplication.getReferrerDataRaw(getApplicationContext());

   // Toast.makeText(this, "raw : " + postTest, Toast.LENGTH_SHORT).show();
    String[] split  = referrerDataRaw.split("=");
    String end = split[split.length - 1];

    Toast.makeText(this,  AppConstant.lin + end, Toast.LENGTH_SHORT).show();

    StringRequest strReq = new StringRequest(Request.Method.POST,
            AppConstant.lin + end, new Response.Listener<String>() {

        @Override
        public void onResponse(String response) {
            Toast.makeText(getBaseContext(),"postback sent",Toast.LENGTH_SHORT).show();

        }
    }, new Response.ErrorListener() {

        @Override
        public void onErrorResponse(VolleyError error) {

        }
    });

    // Adding request to request queue
    MyApplication.getInstance().addToRequestQueue(strReq, tag_string_req);
} 
```

[在 github https://github.com/SimonMarquis/Android-InstallReferrer](https://github.com/SimonMarquis/Android-InstallReferrer)上得到了这种灵魂的大部分帮助**

# c# - 由于用户身份导致的通信问题

> ID：10072468
> 
> 赞同：1
> 
> 时间：2012-04-09T11:23:25.297
> 
> 标签：c#, asp.net-mvc, web-config

我在机器上有一个网站，`A`它调用 webService om machine `B`。

（两者都托管在 IIS7 上，机器人在同一域下）

我收到通讯错误。

两个应用程序池具有相同的域全局标识。

当我将两个池更改为本地身份时 - 一切正常。

网络配置`A`：

我认为这是问题所在：

```
 <security mode="Message">
    <transport clientCredentialType="Windows" proxyCredentialType="None"
        realm="" />
    <message clientCredentialType="Windows" negotiateServiceCredential="true"
        algorithmSuite="Default" /> 
```

如：

```
 </bindings>
    <client>
      <endpoint address="http://upload.webapp.qasite-services.com/UploadService.svc/soap" binding="basicHttpBinding" bindingConfiguration="soap" contract="WebAppUploadService.IUploadService" name="soap" />  
      <endpoint address="https://webservice.s4.exacttarget.com/Service.asmx"
            binding="customBinding" bindingConfiguration="SoapBinding"
            contract="ExactTargetClient.Soap" name="Soap" />
            <endpoint address="http://accounts5.qasite.com/toolbar/ClientServices/TemplateParams.asmx" 
            binding="basicHttpBinding" bindingConfiguration="GetTemplateParamSoap" 
            contract="ServiceReference.GetTemplateParamSoap" name="GetTemplateParamSoap" />
                  <!--<endpoint address="http://qa-srv07.conduit-il.com:81/CPServices/BundlatorManagerService.svc"
binding="wsHttpBinding" bindingConfiguration="WSHttpBinding_IBundlatorService"
contract="BundlatorManagerService.IBundlatorService" name="WSHttpBinding_IBundlatorService">
    <identity>
      <servicePrincipalName value="host/QA-SRV07.Conduit-IL.com" />
          <dns value="dev-srv07.conduit-il.com"/>
    </identity>
  </endpoint>-->
      <endpoint address="http://qa-srv07:81/CPServices/BundlatorManagerService.svc" binding="wsHttpBinding" contract="BundlatorManagerService.IBundlatorService"
              name="IBundlatorServiceClient" />
</client> 
```

会是这样吗？

这是错误：

```
Server Error in '/' Application.
________________________________________
Security Support Provider Interface (SSPI) authentication failed. The server may not be running in an account with identity 'host/qa-srv07'. If the server is running in a service account (Network Service for example), specify the account's ServicePrincipalName as the identity in the EndpointAddress for the server. If the server is running in a user account, specify the account's UserPrincipalName as the identity in the EndpointAddress for the server.
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.ComponentModel.Win32Exception: Security Support Provider Interface (SSPI) authentication failed. The server may not be running in an account with identity 'host/qa-srv07'. If the server is running in a service account (Network Service for example), specify the account's ServicePrincipalName as the identity in the EndpointAddress for the server. If the server is running in a user account, specify the account's UserPrincipalName as the identity in the EndpointAddress for the server.

Source Error: 
An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.

Stack Trace: 

[Win32Exception (0x80004005): Security Support Provider Interface (SSPI) authentication failed. The server may not be running in an account with identity 'host/qa-srv07'. If the server is running in a service account (Network Service for example), specify the account's ServicePrincipalName as the identity in the EndpointAddress for the server. If the server is running in a user account, specify the account's UserPrincipalName as the identity in the EndpointAddress for the server.]
   System.ServiceModel.Security.WindowsSspiNegotiation.GetOutgoingBlob(Byte[] incomingBlob, IExtendedProtectionSupport extendedProtectionSupport) +5902777
   System.ServiceModel.Security.SspiNegotiationTokenProvider.GetNextOutgoingMessageBody(Message incomingMessage, SspiNegotiationTokenProviderState sspiState) +1146
   System.ServiceModel.Security.IssuanceTokenProviderBase`1.GetNextOutgoingMessage(Message incomingMessage, T negotiationState) +83
   System.ServiceModel.Security.IssuanceTokenProviderBase`1.DoNegotiation(TimeSpan timeout) +431

[SecurityNegotiationException: SOAP security negotiation with 'http://qa-srv07:81/CPServices/BundlatorManagerService.svc' for target 'http://qa-srv07:81/CPServices/BundlatorManagerService.svc' failed. See inner exception for more details.]
   System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg) +10257978
   System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type) +539
   BrandToolbar.Manager.TrackingChannels.BundlatorManagerService.IBundlatorService.GetBundleItemsBySsoId(Guid ssoId) +0
   BrandToolbar.Manager.TrackingChannels.TrackingChannelsManager.GetAllBundlesForSsoId(Guid ssoId, IList`1& bundleItems) in d:\Conduit\RnD\Server\WebSites\Writers\Dev-Accounts-4.2-TC\Accounts\Managers\TrackingChannels\BrandToolbar.Manager.TrackingChannels\TrackingChannelsManager.cs:311
   BrandToolbar.Manager.TrackingChannels.TrackingChannelsManager.GetAllToolbarsAndBundlesForSsoId(Guid ssoId) in d:\Conduit\RnD\Server\WebSites\Writers\Dev-Accounts-4.2-TC\Accounts\Managers\TrackingChannels\BrandToolbar.Manager.TrackingChannels\TrackingChannelsManager.cs:141
   BrandToolbar.Account.Controllers.DistributionTools.TrackingChannelsController.Index() in d:\Conduit\RnD\Server\WebSites\Writers\Dev-Accounts-4.2-TC\Accounts\BrandToolbar.Account\Controllers\DistributionTools\TrackingChannelsController.cs:102
   lambda_method(ExecutionScope , ControllerBase , Object[] ) +30
   System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters) +236
   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters) +31
   System.Web.Mvc.<>c__DisplayClassd.<InvokeActionMethodWithFilters>b__a() +85
   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation) +657347
   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodWithFilters(ControllerContext controllerContext, IList`1 filters, ActionDescriptor actionDescriptor, IDictionary`2 parameters) +288
   System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) +658084
   System.Web.Mvc.Controller.ExecuteCore() +125
   System.Web.Mvc.<>c__DisplayClass8.<BeginProcessRequest>b__4() +48
   System.Web.Mvc.Async.<>c__DisplayClass1.<MakeVoidDelegate>b__0() +21
   System.Web.Mvc.Async.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _) +15
   System.Web.Mvc.Async.WrappedAsyncResult`1.End() +85
   System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) +51
   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +454
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +263 
```

# java - 在java中创建动态引用

> ID：10072470
> 
> 赞同：0
> 
> 时间：2012-04-09T11:23:34.737
> 
> 标签：java, reference

我有两节课。

```
package utilities;

public class PostCaller {

    public String getUrl() {
        return url;
    }
    public void setUrl(String url) {
        this.url = url;
    }
    public String getRequest() {
        return request;
    }
    public void setRequest(String request) {
        this.request = request;
    }

    String request  = null;
    String url      = null;

}

public class TestLoader {

    public static void main(String[] args) throws Exception {
        Object obj = Class.forName("utilities.PostCaller").newInstance();
        System.out.println(obj.getClass().getName()); // This prints utilities.PostCaller
    }
} 
```

我想创建 PostCaller 的新实例并从 TestLoader 类调用它的方法。在这里，我有一个创建该实用程序的引用的问题。PostCaller 类。这意味着，我想创建一个引用变量，其名称由字符串动态给出（例如：utilities.PostCaller）。在这里，虽然我创建了实用程序的新实例。PostCaller，但我不能调用它的方法，因为我没有创建它的引用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T11:36:10.277

据我了解，您只是想测试您的 PostCaller ......如果属实，[EasyMock](http://www.easymock.org/)库可以在这种情况下帮助 ypu。你可以通过谷歌搜索很多例子，这里有一个[http://tersesystems.com/2007/06/25/easymock-examples](http://tersesystems.com/2007/06/25/easymock-examples)。

# android - “android.widget.LinearLayout”不能在ListView onItemClick 中转换为“android.widget.TextView”

> ID：10072471
> 
> 赞同：2
> 
> 时间：2012-04-09T11:23:35.607
> 
> 标签：android, textview, android-listview, toast

我正在尝试`Toast`从`ListView`.

```
listView1.setOnItemClickListener(new OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView<?> a, View v, int pos, long id){
          // Now you have the id, you can set the background colour.
         Toast.makeText(getBaseContext(),((TextView)v).getText(), Toast.LENGTH_LONG).show();
    }
}); 
```

我得到的错误：

```
Error: android.widget.LinearLayout cannot be cast to android.widget.TextView 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T11:29:51.153

如果您的`ListView`行布局不只包含 a`TextView`您将得到该异常（`TextView`不能用 a`LinearLayout`或其他东西包装）。相反，您可以这样做：

```
public void onItemClick(AdapterView<?> a, View v, int pos, long id){
    LinearLayout parent = (LinearLayout) v;
    TextView t = (TextView) parent.findViewById(R.id.the_id_of_the_textview);
    Toast.makeText(getBaseContext(), t.getText(), Toast.LENGTH_LONG).show();
} 
```

# c++ - 用于读取数据矩阵代码的 C++ 库

> ID：10072475
> 
> 赞同：6
> 
> 时间：2012-04-09T11:23:52.313
> 
> 标签：c++, image-processing, computer-vision, barcode

我正在寻找一个用于读取数据矩阵代码的 C++ 库，特别是 ECC 200 代码（而不是 QR 代码）。我找到[了 libdmtx](http://www.libdmtx.org/)和[zxing](http://code.google.com/p/zxing/wiki/InterestingLinks)。zxing 是java，但是好像有C++ 端口。有没有人有使用这些库或可能使用其他库阅读 ECC 200 代码的经验？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T16:48:10.773

ZXing 的 C++ 端口中的 DM 支持与 Java 是最新的（许多一维代码并非如此）。它在测试应用程序中默认不启用，但很容易启用（并且[将来会默认启用。](http://code.google.com/p/zxing/issues/detail?id=1208)）

我没有任何实际使用 DM 解码器的个人经验，但它包含在测试套件中，我相信它可以在 Android 应用程序中使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-09T17:39:42.157

那么这是一个真正的答案。我已经成功使用了 libdmtx 和 libzxing。Libdmtx 更直接，因为它仅限于数据矩阵。根据我的经验，奇怪的是，结果并不总是确定性的。Libzxing 也很好，但是当您进行实际生产（数百万或读数）时，由于内存管理不完美，它有时会崩溃。它真的很好，但对于真正的生产环境来说并不完美。

这两个库 libzxing 和 libdmtx 都要求您拥有图像的数据矩阵死点并且非常大。这意味着您需要自己进行预本地化。我设法通过仅使用图像例程并寻找“L”形状然后使用最小面积平方边界框等进行一些智能来做到这一点。然后我使用libzxing的解码和错误校正步骤本身，这仍然不是完美的。

如果您选择生产环境，要么在您自己的限制范围内自己做所有事情，如果您不喜欢这样做，请使用付费软件包，这反过来又不会完全适合您的应用程序并且需要花钱。

libzxing-cpp 的最佳端口是用户 glassenchidna 的端口。[https://github.com/glassechidna/zxing-cpp](https://github.com/glassechidna/zxing-cpp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T10:46:22.113

我目前正在尝试使用 libdmtx [http://www.libdmtx.org/](http://www.libdmtx.org/)

它支持各种接口。它似乎在这里和其他地方都有很好的评论......

（但我正在寻求有关构建实用程序的帮助:-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-20T13:37:20.607

由于没有对我的问题发布“真实”答案，至少没有对这些库之一有阅读二维矩阵代码经验的人给出答案，我想我会发布自己的经验。

我尝试了这两个库，并且都可以读取代码，但是对于我的情况，性能还不够好。在我的情况下，代码通常不是“完美”的，点可能会丢失，大小不同，代码可能有点歪斜。这两个库在阅读这些代码时都有问题。

最后，我使用了一个商业（非免费）库[Sapera](http://www.teledynedalsa.com/imaging/products/software/sapera/)。Sapera 能够更好地阅读不完美的代码。我使用 Sapera 是因为它过去曾在我的公司中使用过，但很有可能其他商业机器视觉库（如 Halcon）也表现良好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-12-04T05:18:01.827

我大量使用了 Halcon，包括解码 DataMatrix。我可以告诉你，它真的很好用。即使由于读取圆形物体或歪斜的印刷品而导致失真，它仍然能够在短时间内很好地读取它们。

唯一的缺点，也是一个很大的缺点，就是价格。运行时许可证非常昂贵，并且您需要开发许可证才能购买运行时许可证，这更加昂贵。除非您的项目有足够的资金，否则由于这个原因，这可能不是一个选择。祝你好运！

# scala - Scala 更好的 println

> ID：10072476
> 
> 赞同：5
> 
> 时间：2012-04-09T11:23:53.847
> 
> 标签：scala, echo, parentheses, println

我经常发现自己在做这样的事情：

```
println(foo) 
```

当我想做的时候：

```
println foo 
```

编译器不允许这样做。

还有，println是拗口，我真的只想说：

```
echo foo 
```

所以，在一个基础包对象中，我创建了 println 的 echo 版本：

```
def echo(x: Any) = Console.println(x) 
```

很简单，有广泛的回声应用，很棒。

现在，我如何调用 echo 而无需将 Any 包装在括号中打印？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-09T12:42:24.007

```
object ∊ {def cho(s: Any) {println(s)}}

∊cho "Hello world" 
```

将节省您的手指。

[它之所以有效，是因为 ∊ 是 Unicode Sm 集中的数学符号，因此在 Scala 中](https://stackoverflow.com/questions/7656937/valid-identifier-characters-in-scala)算作运算符，因此在放置在字母数字字符旁边时不需要空格。

你也可以

```
object echo {def -(s: Any) {println(s)}}

echo-"Hello world" 
```

效果很好IMO。

*多年后编辑*：另一个几乎解决方案，使用StringContext：

```
implicit class PimpMyString(sc: StringContext) {
  def echo(args: Any*) = println(sc.raw(args: _*))
}

echo"Hello World" 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-09T11:52:45.160

定义

```
trait ShortCuts {
  def echo(x: Any) = Console.println(x)
  def trace[T](x: T): T = { echo(x); x }
  // ...
}

object ↬ extends ShortCuts 
```

并愉快地使用没有括号：

```
↬ echo "hello!" 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-09T14:10:41.590

Scalaz 有一个增强`Identity`类型，它有一个[`println`](http://scalaz.github.com/scalaz/scalaz-2.9.1-6.0.4/doc.sxr/scalaz/Identity.scala.html#48606)方法。

```
scala> import scalaz._; import Scalaz._
import scalaz._
import Scalaz._

scala> val foo = 1
foo: Int = 1

scala> foo println
1 
```

如果您不想依赖 scalaz，您可以创建自己的皮条客身份并将其隐含在包对象中。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-09T11:42:47.623

您想要实现的目标在 Scala 中是不可能实现的。

括号只能以所谓的无点语法删除，其中您必须在函数的左侧有一个上下文对象，因此在您的情况下，您只能实现以下内容，这无论如何都没有任何意义：

```
Console println x 
```

虽然我可以理解你为什么要实现这一点，可能更好地考虑其他语言的更简单的语法结构，但我建议坚持标准的 Scala 做事方式，所以只需使用`println(x)`或考虑其他语言。为这样一个基本的标准功能创建一个委托方法肯定会给您在将来管理项目时带来麻烦——因此绝对是该`echo`方法的“禁忌”。

对于这样的情况，有一句老话：在罗马，做罗马人做的事。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-09T18:39:22.410

这里有一组有趣的响应，从无法完成到可以完成，使用这种符号相关的 hack 或使用这种依赖 (Scalaz)

@Nikita 正确地指出，人们可以很容易地在他们的 IDE 中添加一个片段（如果这就是你的滚动方式），它会执行 println “legwork”。虽然这是真的，但您通常必须停止输入才能执行 ctrl-pr 或您决定使用的任何组合键，这会破坏您的流程，IMO。因此，本着创建“更好”的 println 的精神，这是我的看法：

创建一个基础包对象，您的子包（模型、视图、dao 等）将从（基本上是您自己的 PreDef）继承

```
package com
package object company {

  // echo(foo)
  def echo(x: Any) = Console.println(x)

  // foo.echo   
  class AnyProvidesEcho(x: Any) { def echo = Console.println(x) }
  @inline implicit def any2Echo(x: Any) = new AnyProvidesEcho(x)
} 
```

用法：

```
val list = List(1,2,3)
val string = "c'est beacoup mieux mit butter"

list foreach echo
echo(string)
string.echo 
```

# java - 我得到异常 org.hibernate.MappingException: No Dialect mapping for JDBC type: -9

> ID：10072481
> 
> 赞同：0
> 
> 时间：2012-04-09T11:24:24.313
> 
> 标签：java, hibernate

我正在使用休眠。我写了一个原生 sql 查询。此查询将在 sqlSever 命令提示符中执行。

```
try
    {
        session=HibernateUtil.getInstance().getSession();
        transaction=session.beginTransaction();

        SQLQuery query = session.createSQLQuery("SELECT AP.PROJECT_NAME, AP.SKILLSET, PA.START_DATE, PA.END_DATE, RS.EMPLOYEE_ID, RS.EMPLOYEE_NAME, RS.REPORTING_PM FROM RESOURCE_MASTER RS,SHARED_PROPOSAL S, ACTUAL_PROPOSAL AP, PROJECT_APPROVED PA, PROJECT_ALLOCATION PL WHERE RS.EMPLOYEE_ID = PL.EMPLOYEE_ID AND PA.PROJECT_ID = PL.PROJECT_ID AND PA.SHARED_PROPOSAL_ID = S.SHARED_PROPOSAL_ID AND S.ACTUAL_PROPOSAL_ID=AP.ACTUAL_PROPOSAL_ID");
            List<Object[]> obj=query.list();
            Object[] object=new Object[arrayList.size()];
             for (int i = 0; i < arrayList.size(); i++) {
                 object[i]=arrayList.get(i);
                System.out.println(object[i]);
            }
            arrayList.get(0);
            String name=(String)arrayList.get(0);
            logger.info("In find All searchDeveloper");

    }catch(Exception exception)
    {
        throw new PPAMException("Contact admin","Problem retrieving resource master list",exception);
    } 
```

我收到以下异常：**org.hibernate.MappingException：JDBC 类型没有方言映射：-9**

此查询在 SqlServer 命令提示符中执行。我映射了七张表。如果我删除 ACTUAL_PROPOSAL AP 表，它会正确执行。

请帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T13:23:32.587

当**休眠方言无法为 db 列类型找到对应的 java 数据类型**时，就会出现问题。要解决它，您需要使用`addScalar()`方法指定每个结果项的数据类型。

例如，

```
sess.createSQLQuery("SELECT ID,NAME,BIRTHDATE FROM CATS")
 .addScalar("ID", Hibernate.LONG) 
  //If u r using newer version of hibernate use new LongType()
  //instead of Hibernate.LONG
 .addScalar("NAME", Hibernate.STRING)
 .addScalar("BIRTHDATE", Hibernate.DATE) 
```

[在此处](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/querysql.html#d0e13646)阅读 API 文档或在[此处](http://www.roseindia.net/hibernate/hibernate-native-sql.shtml)阅读示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-21T07:35:49.680

就像更新一样。ManuPK 是正确的，但不推荐使用 Hibernate.String、Hibernate.Date、Hibernate.Long。见[http://opensource.atlassian.com/projects/hibernate/browse/HHH-5138](http://opensource.atlassian.com/projects/hibernate/browse/HHH-5138)

# javascript - event.stopPropagation(); 不符合预期

> ID：10072484
> 
> 赞同：0
> 
> 时间：2012-04-09T11:24:37.327
> 
> 标签：javascript, jquery, jquery-events, stoppropagation

我阅读了几篇相关的文章，`event.stopPropagation();`但所提供的解决方案都不适合我。基本上我所拥有的是一个手风琴小部件，默认情况下所有元素都折叠起来。在每个元素标题（dt 标签）上还有一个复选框。单击复选框不应触发手风琴使其元素展开。

```
<dt data-toggle="collapse">
<span class="subscribe-checkbox"><button type="button" class="btn toggle-btn" data-toggle="button"></button></span>
</dt>
<dd>
<p>Accordion content...</p>
</dd> 
```

单击跨度（应充当复选框）应将“选中”类添加到其中。然而，它也扩展了手风琴元素（dd 标签）。我在 jQuery 中所做的是：

```
$('.accordion-group .btn.toggle-btn').click(function (event) {
event.stopPropagation();
}); 
```

虽然没有显示手风琴内容（这很好），但该`<span>`元素也不会更改类，因此它不会成为“已检查”。我也试过了`.live()`，也没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T11:01:35.957

您必须使用`addEventListener`然后使用布尔`Capture`参数来控制父元素的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T11:37:14.617

stopPropagation() 不起作用，因为`<dd>`不是 的父`<span>`级，因此事件不会从 传播`<span>`到`<dd>`。

您将不得不稍微重构处理程序，可能会删除整个代码的父元素的单击处理程序，并为`<dd>`

# delphi - OmniXML 发生了什么？

> ID：10072488
> 
> 赞同：10
> 
> 时间：2012-04-09T11:24:43.003
> 
> 标签：delphi, omnixml

似乎对 OmniXML 有很大的热情，但是omnixml.com 离线，Google Code 项目是空的。这个库发生了什么，我在哪里可以找到代码（因为它是开源的）？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-12T14:04:55.570

如果您单击“Source ”链接， [OmniXML Google Code 项目](https://code.google.com/p/omnixml/)确实有可用的源代码，但是您需要一个 Subversion 客户端来获取源代码。

我创建了一个本地 Mercurial 存储库，其中包含我可以轻松收集的版本和一些修改。我会将整个 repo 存档并放到网上供任何人下载...

可在[http://www.traumazone.com/OmniXML.7z获得](http://www.traumazone.com/OmniXML.7z)

来自官方的改动：

*   支持[Ondřej Pokorný创建的 xml:space 属性](http://www.kluug.at/xlsx-ods-delphi.php)
*   改组源代码并创建 Delphi 2007 和 XE 包
*   使用来自上游来源的最新版本更新了第 3 方单位（例如`jedi.inc`，[`GpDelphiUnits`](https://code.google.com/p/gpdelphiunits/)）
*   将可选的 useBoolStrs 参数添加到 SetNodeTextBool

Mercurial 历史可在存档中找到，因此您可以随时回滚到不同的版本（我很少收集这些版本）。

# java - 计算文本区域中的单词数

> ID：10072492
> 
> 赞同：3
> 
> 时间：2012-04-09T11:25:07.070
> 
> 标签：java, string, swing, jtextarea

大家好，我关于堆栈溢出的第一个问题

```
import javax.swing.*;
import java.util.*;
import java.awt.event.*;

public class TI extends JFrame implements ActionListener
{
static int count=0;
String ct;
JTextField word;
JTextArea tohide;
public static void main(String arg[])
{
    TI ti=new TI();
}

public TI()
{

    JPanel j=new JPanel();
    JLabel def=new JLabel("Enter the text to be encrypted");
    word=new JTextField("",20);
    tohide=new JTextArea("",5,20);
    JButton jb=new JButton("COUNT");
    tohide.setBorder(BorderFactory.createLoweredBevelBorder());
    j.add(def);
    j.add(tohide);
    j.add(word);
    j.add(jb);
    add(j);
    setSize(500,500);
    setVisible(true);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setLocationRelativeTo(null);
    jb.addActionListener(this);

}

public void actionPerformed(ActionEvent ae)
{

    String txt=tohide.getText();
    StringTokenizer stk=new StringTokenizer(txt," ");
    while(stk.hasMoreTokens())
    {
        String token=stk.nextToken();
        count++;
    }
    ct=Integer.toString(count);;
    word.setText(ct);

   }

    } 
```

我想计算在文本区域中输入的字数。有一个逻辑错误。当我不断点击计数按钮时，字数会增加。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-09T11:28:27.553

`count`在重新计算字数之前，您永远不会将 重置为 0。似乎不需要`count`成为类变量。做出这种改变将使这种错误变得不可能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-09T12:05:30.983

使用`javax.swing.text.Utilities`哪个有

```
public static final int getWordStart(JTextComponent c, int offs)
public static final int getWordEnd(JTextComponent c, int offs) 
```

用空格分隔是不够的。分隔符也可以是制表符、\n 等字符

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T13:11:46.667

```
public void actionPerformed(ActionEvent ae) {
    word.setText(String.valueOf(tohide.getText().split("\\s").length));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-03T09:11:46.250

我正在使用以下代码来完成任务。它背后的想法是每对单词都用空格分隔。因此使用空间分割似乎很简单。如果单词包含回车，则必须在计数之前将回车替换为空字符串。我希望它有所帮助

```
 public int WordCount(String Words){
   //Initiate Result
     String s = Words+" "; //Add space after the received string
     String result ="";
     int i = 0;
     int count = s.length();

    try {

        for (i = 0; i <= count - 1; i++) {
              if (count - i > 1) {

                String tempString = s.substring(0, s.indexOf(" "));

                if (s.contains(" ") && (!s.isEmpty())) {
                    s = s.substring(s.indexOf(" ") + 1, s.length());
                    //get substring between " " and lenght ;
                } else {
                    if(!s.isEmpty()) {
                        //output nothing
                    } 
                }
            } else {
                //output nothing;
            }

        }

    } catch (Exception ex) {
        System.out.println(ex.getMessage());
    }

    return i;

} 
```

# android - 如何让ListView的Adapter中的OnClick调用Activity的函数

> ID：10072495
> 
> 赞同：12
> 
> 时间：2012-04-09T11:25:19.863
> 
> 标签：android, onclick, android-listview, custom-adapter

我有一个带有 ListView 的 Android 应用程序，ListView 可以正常设置，但现在我希望 ListView 中的图像可以点击。我通过使用 2 个类、Activity 类（父级）和 ArrayAdapter 来填充列表。在 ArrayAdapter 中，我为列表中我希望可点击的图像实现了 OnClickListener。

到目前为止，一切正常。

但是现在我想在运行列表中的图像的 onClick 时从活动类中运行一个函数，但我不知道如何。以下是我使用的 2 个类。

首先是Activity类：

```
public class parent_class extends Activity implements OnClickListener, OnItemClickListener
{
    child_class_list myList;
    ListView myListView;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        // setup the Homelist data
        myList     = new child_class_list (this, Group_Names, Group_Dates);
        myListView = (ListView) findViewById(R.id.list);

        // set the HomeList
        myListView.setAdapter( myList );
        myListView.setOnItemClickListener(this);
    }

    void function_to_run()
    {
        // I want to run this function from the LiscView Onclick
    }

    public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) 
    {
        // do something
    }
} 
```

以及我想从 Activity 类调用函数的 ArrayAdapter：

```
public class child_class_list extends ArrayAdapter<String>
{
    // private
    private final Context context;
    private String[]        mName;
    private String[]        mDate;

    public child_class_list (Context context, String[] Name, String[] Date) 
    {
        super(context, R.layout.l_home, GroupName);
        this.context        = context;
        this.mName      = Name;
        this.mDate  = Date;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) 
    {
        LayoutInflater inflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View rowView = inflater.inflate(R.layout.l_home, parent, false);

        ImageView selectable_image = (ImageView) rowView.findViewById(R.id.l_selectable_image);
        selectable_image.setOnClickListener(new OnClickListener()
        {
            public void onClick(View v) 
            {
                // I want to run the function_to_run() function from the parant class here
            }
        }
        );

        // get the textID's
        TextView tvName = (TextView) rowView.findViewById(R.id.l_name);
        TextView tvDate = (TextView) rowView.findViewById(R.id.l_date);

        // set the text
        tvName.setText      (mName[position]);
        tvDate.setText  (mDate[position]);

        return rowView;
    }
} 
```

如果有人知道如何从 arrayadapter 运行活动类中的函数或如何在活动类中设置图像 onClickListener，我会非常感谢帮助。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-04-09T11:29:22.390

在里面`onClick()`做这样的事情：

```
((ParentClass) context).functionToRun(); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-09T15:40:11.687

只是为了清楚地扩展提供的答案在 BaseAdapter 中，您可以通过调用来获取父类`this.getActivity();`如果然后将其类型转换为实际的活动类，则可以根据下面的@AdilSoomro 答案调用一个函数，这样您实际上最终会得到这样的结果

```
public class MyAdapter extends BaseAdapter<Long> {
    public MyAdapter(Activity activity,
            TreeStateManager<Long> treeStateManager, int numberOfLevels) {
        super(activity, treeStateManager, numberOfLevels);
    }

    @Override
    public void handleItemClick(final View view, final Object id) {
        ((MyActivity) this.activity).someFunction();
    }
} 
```

然后只需在 MyActivity 中声明 someFunction 来做你想做的事

```
 protected void someFunction(){
//    Do something here
    } 
```

# ios - 我可以从 OS X 上的 AddressBook 中获取一个人的显示名称或复合名称吗？

> ID：10072502
> 
> 赞同：4
> 
> 时间：2012-04-09T11:26:02.787
> 
> 标签：ios, macos, cocoa, abaddressbook

我在这些页面中遇到过`ABRecordCopyCompositeName()`，但是在关注它之后，我预感它仅适用于 iOS 平台。AddressBook 应用程序本身，`ABPeoplePicker`显然在内部做了类似的事情，那么 OS X 是否有等效的 API？在自己建立之前检索头衔、名字、中间名、姓氏、后缀并确定它是否是一家公司是一件乏味的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-10T02:10:48.213

不幸的是，正如您所推测`ABRecordCopyCompositeName`的那样，在撰写本文时，它仅在 iOS 上可用。OS X 中似乎没有等效的公共 API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-20T17:16:21.303

`ABPerson`的超类`ABRecord`具有`displayName`我们所需要的属性。

# ruby - 如何使用树顶解析包含空格和转义符号的解析目录路径？

> ID：10072508
> 
> 赞同：0
> 
> 时间：2012-04-09T11:26:51.093
> 
> 标签：ruby, regex, parsing, grammar, treetop

我需要解析一些包含目录路径的字符串。问题是包含转义的空格和其他转义的符号。例如：

```
"/dir_1/dir_2/dir_3/dir/another/dest_dir\ P\&G/" 
```

请注意， 之前有一个空格`P\&G/`。

这是我的树顶语法（alpha_digit_special 开头包含空格）

```
rule alpha_digit_special
  [ a-zA-Z0-9.+&\\]
end

rule path_without_quotes
  ([/] alpha_digit_special*)+ 
end

rule quot_mark
  ["]
end

rule path_with_quotes
  quot_mark path_without_quotes quot_mark
end

rule path
  path_with_quotes / path_without_quotes
end 
```

我`nil`在解析这个字符串后得到。那么如何指定规则以使字符串可以包含转义的空格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-18T23:49:55.407

您不能使用 alpha_digit_special* 来处理反斜杠转义空格。相反，您必须使用重复的字符单元，其中一个字符单元可以是反斜杠字符对，也可以是单个非反斜杠字符。像这样的东西应该工作：

```
rule alpha_digit_special
  [a-zA-Z0-9.+&\\]
end

rule path_character
  '\\' (alpha_digit_special / ' ')
  /
  alpha_digit_special
end

rule path_without_quotes
  ([/] path_character* )+ 
end 
```

请注意，上述内容不接受反斜杠字符（不是空格，也不是 alpha_digit_special 集中）。我想你可以看到如何改变它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T11:31:02.543

你试过了`\s`吗？

```
test = "dest_dir P&G" 
test.match(/[a-zA-Z0-9_\s\&]+/)
 => #<MatchData "dest_dir P&G"> 
```

# c# - C# 中的正则表达式匹配和替换

> ID：10072510
> 
> 赞同：-1
> 
> 时间：2012-04-09T11:26:52.723
> 
> 标签：c#, regex, replace

我有类似的字符串

```
[any characters]{$\prime$}[any characters]$[any characters]{$\prime$}[any characters]$[any characters] 
```

我想替换`$\prime$`$"The second one" 里面的那个被替换为 \prime 所以replace的输出是

```
[any characters]{$\prime$}[any characters]$[any characters]{\prime}[any characters]$[any characters] 
```

如何使用 Reqex.Replace 做到这一点

这是我使用的代码

```
trannsformContent = Regex.Replace(trannsformContent, @"(\$)(?<cont>.*?)(\$)\\prime(\$)(?<cont1>.*?)(\$)", @"${cont}\prime{cont1}$", RegexOptions.Compiled | RegexOptions.Singleline | RegexOptions.IgnoreCase); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T06:43:09.697

我找到了解决方案：

```
trannsformContent = Regex.Replace(trannsformContent, @"\${1}(?<cont>.*?)\${1}\\prime\${1}(?<cont1>.*?)\${1}", @"$$${cont}\prime${cont1}$", RegexOptions.Compiled | RegexOptions.Singleline | RegexOptions.IgnoreCase); 
```

# c# - 从本地存储读取图像文件单声道为android

> ID：10072513
> 
> 赞同：0
> 
> 时间：2012-04-09T11:27:38.870
> 
> 标签：c#, android, xamarin.android

在 android 的单声道中，我有一个应用程序可以将图像保存到本地存储以进行缓存。当应用程序启动时，它会先尝试从缓存中加载图像，然后再尝试从 Web 加载它们。

我目前很难找到一种从本地存储读取和加载它们的好方法。

我目前正在使用与此等效的东西：

```
 List<byte> byteList = new List<byte>();
        using (System.IO.BinaryReader binaryReader = new System.IO.BinaryReader(context.OpenFileInput("filename.jpg")))
        {
            while (binaryReader.BaseStream.IsDataAvailable())
            {
                byteList.Add(binaryReader.ReadByte());
            }
        }
        return byteList.toArray(); 
```

OpenFileInput() 返回一个不给我长度的流，所以我必须一次读取一个字节。它也无法寻找。这似乎导致图像的加载速度比它们加载的速度慢得多。相比之下，从 Resrouce.Drawable 加载图像几乎是瞬间完成的，但在我的方法中，加载 8kb 文件时会有一个非常明显的暂停，可能是 300 毫秒。这似乎是一项非常明显的任务，但我尝试了许多解决方案并搜索了很多建议但无济于事。

我还注意到，当不在 UI 线程上运行时，这段代码似乎会因 EndOfStream 异常而崩溃。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-09T15:42:39.637

你打算用 做什么`List<byte>`？您想“从缓存中加载图像”，但没有指定要将它们加载*到*.

如果要将它们加载到[Android.Graphics.Bitmap](http://androidapi.xamarin.com/?link=T%3aAndroid.Graphics.Bitmap)中，可以使用[BitmapFactory.DecodeStream(Stream)](http://androidapi.xamarin.com/monodoc.ashx?link=M%3aAndroid.Graphics.BitmapFactory.DecodeStream(System.IO.Stream))：

```
Bitmap bitmap = BitmapFactory.DecodeStream(context.OpenFileInput("filename.jpg")); 
```

这将删除`List<byte>`中介。

如果您真的需要所有字节（无论出于何种原因），您可以依赖与[Context.FilesDir](http://androidapi.xamarin.com/?link=P:Android.Content.Context.FilesDir)`System.Environment.GetFolderPath(System.Environment.SpecialFolder.Personal)`相同的事实，这将使用，允许：`context.OpenFileInput()`

```
byte[] bytes = System.IO.File.ReadAllBytes(
        Path.Combine (
            System.Environment.GetFolderPath(System.Environment.SpecialFolder.Personal),
            "filename.jpg")); 
```

但是，如果这确实是一个缓存，您应该使用[Context.CacheDir](http://androidapi.xamarin.com/?link=P%3aAndroid.Content.Context.CacheDir)而不是`Context.FilesDir`Path.GetTempPath[返回](http://androidapi.xamarin.com/?link=M%3aSystem.IO.Path.GetTempPath())：

```
byte[] cachedBytes = System.IO.File.ReadAllBytes(
        Path.Combine(System.IO.Path.GetTempPath(), "filename.jpg")); 
```

# ajax - 使用 MongoDb 和 Nodejs 进行 ajax 分页的最佳方法是什么？

> ID：10072518
> 
> 赞同：14
> 
> 时间：2012-04-09T11:27:41.487
> 
> 标签：ajax, node.js, mongodb, mongoose, infinite-scroll

我有 mongodb 和 NodeJs。连接是通过[mongoosejs](http://mongoosejs.com)完成的。
开发ajax无限滚动的最佳方法是什么？我应该使用 limit 和 offset 吗？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-04-09T11:37:16.440

当您对数据集进行分页时，“跳过和限制”方法效率不高。它实际上是一个[Shlemiel the Painter 的算法](http://en.wikipedia.org/wiki/Schlemiel_the_Painter's_algorithm)。

范围查询效率更高（当索引支持时）。例如，假设您正在显示推文。您的页面大小为 20，并且您在第 1000 页上并且想要加载第 1001 页。

这个查询

```
db.tweets.find().sort({created_at: -1}).skip(1001*20).limit(20) 
```

效率**远**低于

```
db.tweets.find({created_at: {$lt: last_displayed_date}}).
          sort({created_at: -1}).limit(20); 
```

（前提是您有索引`created_at`）。

你明白了：当你加载一个页面时，记下最后一条推文的时间戳，并用它来查询下一页。

# iphone - 更改 UITableViewCell 的图像

> ID：10072522
> 
> 赞同：2
> 
> 时间：2012-04-09T11:28:21.877
> 
> 标签：iphone, objective-c, cocoa-touch, uitableview

我有一个使用 UITableViewCellStyleDefault 样式的 UITableView。我还设置了详细配件：

```
 cell.accessoryType= UITableViewCellAccessoryDetailDisclosureButton; 
```

我希望代码是这样的，当详细附件被推送时，从而生成委托方法附件ButtonTappedForRowWithIndexPath: ，该特定单元格的图像更改为另一个图像。

我怎样才能做到这一点？我是否需要以某种方式重新创建单元格？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T11:38:16.160

不，您只需将其他图像添加到单元格的图像视图中

```
UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
cell.imageView.image = [UIImage imageNamed:@"IMAGENAME"]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-09T11:41:56.737

```
- (void)tableView:(UITableView *)tableView accessoryButtonTappedForRowWithIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *aCell = [tableView cellForRowAtIndexPath:indexPath];
    // Now You have your sekected cell, you can set the image which you have set on this cell
    UIImageView  *aView = (UIImageView*)[aCell viewWithTag:1];
    // Now change the image of aView
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-09T11:38:38.967

在您的 accessoryButtonTappedForRowWithIndexPath 方法中使用 --

```
UITableViewCell *cell = [tableView.delegate cellForRowAtIndexPath:indexPath];
cell.accessoryView = [[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"yourImage.png"]] autorelease]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-09T11:34:45.467

我从来没有这样做过，但我尝试了类似的东西

```
-accessoryButtonTappedForRowWithIndexPath..{
    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
    // change the view of cell here
} 
```

只是一个想法，请在您的问题中添加一些您迄今为止尝试过的代码。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-09T11:37:45.383

您更改了基础数据结构的图像。之后，在适当的索引路径重新加载单元格。

例如，我假设您的数据是一个简单的 NSArray，其中包含 NSDictionary 对象。字典包含一些键，例如“text”和“image”。在`cellForRowAtIndexPath:`您将使用适当字典中的值来设置 cell.text 和 cell.image。

所以，在`accessoryButtonTappedForRowWithIndexPath:`（或者也许你想要`didSelectRowAtIndexPath:`？），你会做这样的事情：

```
NSDictionary* dict = [myArray objectAtIndex:indexPath.row];
[dict setValueForKey:@"image":myNewImage];
[self.tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation: UITableViewRowAnimationAutomatic]; 
```

请记住，这是伪代码，未经测试，但会给你如何做的想法。

# ruby-on-rails - rails 迁移不适用于空下来的功能

> ID：10072523
> 
> 赞同：2
> 
> 时间：2012-04-09T11:28:22.527
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, rails-migrations

我生成了一个带有空下来功能的 rails 3.2 迁移，因为迁移是不可逆的（而且我不想抛出异常）。我成功运行了迁移，但没有任何效果。当我回滚并再次运行 db:migrate 时，效果确实适用。

我通过用什么都不做的代码填充空的向下函数轻松解决了这个问题，但它仍然很丑陋。

有谁知道为什么会这样？这是一个rails错误吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-09T11:42:06.377

抛出异常是为了防止破坏您的数据库，如果它是不可逆转的，那么这可能是正确的做法。你`#down`可能看起来像这样：

```
 def down
    raise ActiveRecord::IrreversibleMigration, "Explain why its irreversable!"
  end 
```

这将为其他人省去很多麻烦，因为它清楚地通知了不可逆转的迁移并解释了其背后的原因:)

**编辑：**我无法确认 Rails 3.2.3 的这种行为。我已经创建了几个没有 的不同迁移`#down`，并且没有引发异常。也许这是您的代码中的某些内容，您没有显示出来。

**编辑 2：**回顾一下，当你使用 up/down 方法时，你有责任提高`ActiveRecord::IrreversibleMigration`. 在其他情况下，什么都不会发生（`#down`在 AR 中定义只会返回 nil）。使用`#change`. 在某些情况下，可以通过在此处定义来引发上述异常`#inverse`：[https](https://github.com/rails/rails/blob/565bfb9cd49285ebaa170141b4996c22ba81de43/activerecord/lib/active_record/migration/command_recorder.rb#L39) ://github.com/rails/rails/blob/565bfb9cd49285ebaa170141b4996c22ba81de43/activerecord/lib/active_record/migration/command_recorder.rb#L39这是预期的行为。

# mysql - 如何在 Java 中使用 JPA 检索表中的最后 2 条记录

> ID：10072528
> 
> 赞同：0
> 
> 时间：2012-04-09T11:28:35.827
> 
> 标签：mysql, eclipselink

我正在尝试从“Execution”表中检索“Vulcano”表中的最后 5 个插入数据，我正在使用 EclipseLink，Facade 类目前调用此查询；

这是我正在使用的 Facade 类的一部分；

```
 public ArrayList<ExecutionPOJO> getLatestsVulcanoExecutions() {
    ArrayList<ExecutionPOJO> vulcanoExecutions = new ArrayList<ExecutionPOJO>();
    //SELECT x FROM Magazine x order by x.title asc, x.price desc

   **List<Execution> excutionVulcanoList = em.createQuery("select s from Execution s order by s.vulcano_idVulcanoID desc limit 2 ").getResultList();** 
```

如果我使用上述查询，我​​会收到此错误：

```
Caused by: java.lang.IllegalArgumentException: An exception occurred while creating a query in EntityManager: 
Exception Description: Syntax error parsing the query [select s from Execution s order by s.vulcano desc limit 2], line 1, column 50: syntax error at [limit].
Internal Exception: MismatchedTokenException(80!=-1) 
```

但是，如果我删除限制标签，我会收到此错误；

```
Caused by: Exception [EclipseLink-8021] (Eclipse Persistence Services - 2.3.0.v20110604-r9504): org.eclipse.persistence.exceptions.JPQLException
Exception Description: Error compiling the query [select s from Execution s order by s.vulcano desc], line 1, column 36: invalid ORDER BY item [s.vulcano] of type [uk.ac.aston.tomtom.entity.Vulcano], expected expression of an orderable type. 
```

.

```
@Entity
public class Execution implements Serializable {
    ...
@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
private int idExecution;

@ManyToOne(targetEntity = Vulcano.class)
private Vulcano vulcano;

*//Few others @ManyToOne 
//also @oneToMany*

    public Vulcano getVulcano() {
    return vulcano;
}

public void setVulcano(Vulcano vulcano) {
    this.vulcano = vulcano;
  }

//other getter and setter
} 
```

这是另一个实体；

```
@Entity
public class Vulcano implements Serializable {
   ...
@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
private int idVulcano;

@OneToMany(targetEntity=Execution.class, mappedBy="vulcano", cascade=CascadeType.ALL)
private List<Execution> executions;

    public List<Execution> getExecutions() {
    return executions;
}

public void setExecutions(List<Execution> executions) {
    this.executions = executions;
}

//other getters and setters 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T13:43:04.737

限制不是 JPQL 的一部分，因此不能使用。相反，您将在查询上调用 setMaxResults 以限制返回的结果。

或者，您可以使用本机 SQL 查询，其中 Select * 可以使用 EntityManager createNativeQuery api 而不是 createQuery。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T11:33:12.557

尝试

```
SELECT * FROM Magazine x order by x.title asc, x.price desc 
```

代替

```
SELECT x from Magazine x ... 
```

# c# - 如何删除“预期;”之类的错误 在 Tridion 弹出页面中？

> ID：10072529
> 
> 赞同：-2
> 
> 时间：2012-04-09T11:28:54.903
> 
> 标签：c#, asp.net, tridion

我正在自定义功能区工具栏并向其添加一个按钮。每当我单击该按钮时，它将打开一个 aspx 页面，允许作者选择一些数据，这些数据将附加到现有的 RTF 字段内容中。

但是当打开弹出窗口时，浏览器（Internet Explorer）中出现以下错误。

我在文件后面的代码中继承了 Tridion 页面。当我尝试使用 Response.Write() 函数时，它会给出类似“Expected ;”的错误。请告诉我为什么会出现这样的错误？早期响应表示赞赏。提前致谢。

PFB相关代码：文件内容后面的aspx页面代码：

```
namespace ButtonReference.Popups
{     
    [ControlResourcesDependency(new Type[] { typeof(Popup), typeof(Tridion.Web.UI.Controls.Button), typeof(Stack), typeof(Dropdown), typeof(List) })]
    [ControlResources("RTFExtensions.ButtonReferenece")]
    public partial class PopupReference : TridionPage
    {
        protected override void OnInit(EventArgs e)
        {
            base.OnInit(e);

            TridionManager tm = new TridionManager();

            tm.Editor = "PowerTools";
            System.Web.UI.HtmlControls.HtmlGenericControl dep = new System.Web.UI.HtmlControls.HtmlGenericControl("dependency");
            dep.InnerText = "Tridion.Web.UI.Editors.CME";
            tm.dependencies.Add(dep);

            System.Web.UI.HtmlControls.HtmlGenericControl dep2 = new System.Web.UI.HtmlControls.HtmlGenericControl("dependency");
            dep2.InnerText = "Tridion.Web.UI.Editors.CME.commands";
            tm.dependencies.Add(dep2);

            //Add them to the Head section 
            this.Header.Controls.Add(tm); //At(0, tm); 
        }

        protected void Page_Load(object sender, EventArgs e)
        {
            mySession = new Tridion.ContentManager.Session(@"");
            if (!Page.IsPostBack)
            {
                try
                {
                   if (true)                   
                             {}
                    else
                    {
                        //Response.Write("Invalid schema chosen");
                        return;
                    }
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-11T08:12:48.223

小备注：由于您的页面将用作简单的弹出窗口，因此您不需要加载与域模型相关的 JavaScript 内容。不加载它会减少页面的加载时间。为此，您需要将`IsStandAloneView`Tridion Manager 属性设置为 false：

```
tm.IsStandAloneView = false; 
```

# scala - 播放 2.0 eclipsify 命令时源已损坏？

> ID：10072535
> 
> 赞同：4
> 
> 时间：2012-04-09T11:29:42.717
> 
> 标签：scala, view, playframework-2.0

更新：我发现另一个有类似问题的[http://groups.google.com/group/play-framework/browse_thread/thread/c502be978a320cb7/28bc3a3253933aed?show_docid=28bc3a3253933aed](http://groups.google.com/group/play-framework/browse_thread/thread/c502be978a320cb7/28bc3a3253933aed?show_docid=28bc3a3253933aed)

如果我运行 Play，然后尝试使用源进行 eclipsify，Play 说它找不到文件。

> [todolist] $ eclipsify with-source=true [info] 即将
> 为您的项目创建 Eclipse 项目文件。[警告] [未找到]
> org.scala-lang#scala-library;2.9.1!scala-library.jar(src) (0ms)

重现步骤。

1.  命令：播放新测试
2.  接受名称
3.  命令： 1、选择 Create a simple Scala application
4.  命令：cd 测试
5.  命令：播放
6.  命令： eclipsify with-source=true

我将有一个工作的 eclipse 项目和引用的 jar 文件。但是我不会将源代码编译到 jar 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T11:38:11.887

尝试执行 a`play clean`并再次执行命令。如果仍然失败，请在[灯塔中提出错误](https://play.lighthouseapp.com/projects/57987-play-framework/overview)

# php - 用php生成缓存文件？

> ID：10072539
> 
> 赞同：0
> 
> 时间：2012-04-09T11:30:05.633
> 
> 标签：php, mysql, caching

我正在使用[http://datatables.net/examples/](http://datatables.net/examples/)来轻松控制表。我正在从 MySQL 表中生成超过 30,000 条记录的表，并且加载速度非常慢。我想缓存这张表，并认为一切都会更快。我使用过`ob_get_contents()`，但缓存文件大小为 26MB。如何创建缓存文件以使一切更快？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T11:43:10.090

如果输出缓冲区大小为 26MB，那么问题是浏览器在服务器生成页面后下载页面需要很长时间。您应该限制返回的行数，或者使用分页系统。

对于分页，我会做这样的事情：

有一个像这样的网址：`http://website.com/script.php?start=3000`

然后做类似的事情

```
$start = mysql_real_escape_string($_GET['start']);
$sql = "SELECT * FROM table LIMIT $start, 100"; 
```

然后，您希望在链接到下一页的页面上打印出一个 URL：

```
$nextpage = $start + 100;
echo "<a href='/script.php?start=$nextpage'>Next Page</a>"; 
```

# classification - 如何在 Weka 中使用新训练的 NaiveBayes 分类器对未标记的数据集进行分类

> ID：10072540
> 
> 赞同：1
> 
> 时间：2012-04-09T11:30:11.563
> 
> 标签：classification, weka, bayesian

我有一个未标记的数据集，我想用我新训练的分类器在 Weka 中使用 NaiveBayes 分类对其进行分类。所以实际上，当在 weka 的分类模式下，如果我给出选项 Supplied Test set，那么只有当它被标记并评估并给出准确性时，它才会接受测试集。但我想要的是使用 train.csv 或 train.arff 文件对其进行训练，然后给它一个新的看不见且未标记的 test.csv 或 test.arff 文件，并对它进行分类并根据训练文件中的类给它标签。但是，如果我向 wweka 提供一个未标记的文件作为测试文件，它会给出：

> 错误：训练和测试集不兼容

我的训练和测试文件的示例格式如下：

```
火车.csv 文件：
文章故事.......曲棍球课
1 0 ...... 0 政治
0 0 .......1 运动
.
.
.
.
. 运动的

```

和 Test.csv 文件：

```
文章故事.......曲棍球课
0 1 ...... 0      
1 0 ........1      
.
.
.
.
.

```

那么如何使用 NaiveBayes 分类器对 Weka 中未标记的数据集进行分类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-08T10:08:09.540

看来您缺少类标签。Weka 要求训练集和测试集以相同的顺序具有完全相同的属性。现在有两种情况：

**你知道你的测试集的类**

性能是通过将实际类标签与预测类标签进行比较来计算的。您需要像在训练集中一样在测试集中提供类标签。

**你不知道你的测试集的类**

为了计算性能，Weka 需要将预测的类与实际的类进行比较。如果您没有实际的课程，则无法计算性能。你只能预测类。`class`如果您只想进行预测，则必须为您的测试实例添加一个缺少值的标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-28T06:48:22.490

您不能将其全部留空，您需要在类字段上为每个类标签设置至少一个（作为 weka 的某种“线索”）

*   文章故事.......曲棍球课
*   0 1 ...... 0 政治
*   1 0 ........1 运动
*   1 1 ........1 ?
*   1 1 ........1 ?

前两行将提供 weka 预测类的示例。然后，您可以使用训练有素的模型预测尽可能多的没有类（？）的实例

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T00:11:28.387

即使您的测试集被标记，Weka 在第一阶段也不会看到它。它将使用您使用训练数据开发的分类器，然后将分类器应用于您提供的测试集。然后分类器预测每个实例类，然后 Weka 跟踪正确或不正确的分类。所以，你在这里所做的正是你想要实现的。该错误表明训练集和测试集不兼容，因为我相信您已从测试集中删除了“类”标签。不用担心。保持原样，您从 Weka 获得的准确度是分类器的实际性能。希望有帮助。

# php - 对属性的公共数组进行排序

> ID：10072547
> 
> 赞同：4
> 
> 时间：2012-04-09T11:31:17.063
> 
> 标签：php, javascript, arrays, algorithm, underscore.js

我正在努力解决我确信之前已经解决的数组问题。我能想到的最好的类比是产品比较功能，其中选择了 2-3 个产品并列出了它们的特性供用户比较。

我有 2-3 个特征数组。阵列可以具有相同的特性。我需要并排显示一个数组表，其中元素按“最常见”排序。因此，如果所有三个数组都具有相同的特征，它将位于顶部。然后将列出两个相似的特征，等等。如果两个数组共享一个特征，第三个数组将有一个空白单元格。

后端是用 PHP 编写的。前端是Javascript。我将下划线用于其他一些功能，因此它的数组函数可用。

我只是无法理解为完成这项工作而必须做的事情的组合！任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T10:02:16.887

我设法找到了一个我认为可以解决这个问题的解决方案，使用来自 mainegreen 的建议，使用二级结构来记录每个类别的频率，以及一个自定义排序函数，它使用这个频率数组的值进行比较。下面的示例实现；

```
function getCategories(products) {
var categories = [], frequency = {};
for (var i = 0; i < products.length; i++) {
    for (var c in products[i]) {
        if (products[i].hasOwnProperty(c)) {
            if (frequency.hasOwnProperty(c)) {
                frequency[c]++;
            } else {
                categories.push(c);
                frequency[c] = 1;
            }
        }
    }
}
categories.sort(function (a,b) { return frequency[b]-frequency[a]; });
return categories;
} 
```

这将适用于以下一系列产品；

```
var products = [
    {
        cat1: 'val1',
        cat2: 'val1',
    }, {
        cat2: 'val2',
        cat3: 'val2',
    }, {
        cat2: 'val3',
        cat3: 'val3',
        cat4: 'val3',
    }
]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T12:51:46.393

如果我理解正确，我不确定我是否这样做，但是如果您尝试以这样一种方式对多个数组中的项目进行排序，即每个数组的“特征”被排序，最共享的列在顶部，那么你不能有一个辅助数组来实现共享特征计数吗？因此，您将遍历您的第一组数组，并在找到每个特征时，为该特征增加一个计数器。

然后，当您在显示例程中时，您将有一个循环例程在您用来计算特征计数的数组上工作？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T17:05:52.407

您可以从产品中合并`array_keys()`以进行比较，然后遍历键（==“特征”）并将它们分类为例如三个新数组（'shared'、'common'、'uncommon'）。

拥有该数组后，重建产品数组，为未使用的键留下空白字段。

# android - 由意图过滤器启动时调试应用程序

> ID：10072550
> 
> 赞同：6
> 
> 时间：2012-04-09T11:31:39.827
> 
> 标签：android, debugging, android-intent

我通常通过按 Eclipse 中的小“错误”图标来调试我的应用程序。

但现在我在清单中插入了这样的意图过滤器：

```
 <action android:name="android.hardware.usb.action.USB_DEVICE_ATTACHED" /> 
```

当插入 USB 电缆时，应用程序现在会自动启动 - 我无法再调试它了。不再有任何断点处的停止。

**通过意图启动时，我将如何调试应用程序？**

非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2018-01-06T17:48:09.887

我有一个 Nexus 6P，在我的开发人员选项中有一个“等待调试器”切换。这对我有用。您还必须选择您的应用程序作为要调试的应用程序。“选择调试应用程序”。当然，您必须安装应用程序的可调试版本。只需在 Eclipse 或 Android Studio 中进行调试启动。

[![在此处输入图像描述](../Images/cfce87ba0e7439198cc8f3489d59c7a8.png)](https://i.stack.imgur.com/WX6eR.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-10-19T21:37:06.380

我遇到了这个问题，我用下面的代码解决了这个问题。该代码基于先前的答案。（感谢您的想法！）

1.  将此代码放在断点之上。
2.  使用调试变体运行应用程序，而不是发布。此步骤在设备上放置一个可调试的 APK。
3.  杀死应用程序。
4.  通过您的 Intent 启动应用程序。该应用程序将在此代码处暂停，并使用“等待调试器”向您的日志发送垃圾邮件。
5.  在工作室中，单击“将调试器附加到 Android 进程”
6.  如果一切顺利，应用程序应该在您的断点处停止。

等待太久，它会 ANR！

```
 //TODO: Remove me.  Debug only!
    while (!Debug.isDebuggerConnected()) {
        try {
            Log.d(TAG, "Waiting for debugger");
            Thread.sleep(1000);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T22:08:46.327

解决方案是这样的，由于 Intent 过滤器启动，在应用程序启动时延迟。然后只要应用程序在那里可见就运行到调试窗口，附加应用程序进程和中提琴，您可以像以前一样调试应用程序

# sencha-touch - 如何在煎茶中添加画布标签

> ID：10072553
> 
> 赞同：0
> 
> 时间：2012-04-09T11:31:55.430
> 
> 标签：sencha-touch

任何人都知道如何在煎茶中添加画布标签

```
 html: <canvas width='500' id='canvas' height='100'/>, 
```

但我不知道在哪里定义画布以及如何在 sencha 中调用它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T19:44:01.773

您可以在您的视口或您正在使用的任何面板中定义一个 Ext.Component 并将 html 属性设置为`<canvas../>`然后每当您需要引用它时，您可以通过 id（不推荐）或通过获取对组件并访问其 el.dom

一位开发人员在这里发表了一篇博客文章：http: [//j-query.blogspot.com/2011/02/sencha-touch-ipad-signature-javascript.html](http://j-query.blogspot.com/2011/02/sencha-touch-ipad-signature-javascript.html)

# c# - 加密加密数据

> ID：10072555
> 
> 赞同：2
> 
> 时间：2012-04-09T11:32:14.727
> 
> 标签：c#, encryption, cryptography, rsa

我想加密我使用 RSA 加密的加密数据。但是当我使用另一个公钥加密加密数据时。错误是“未指定的错误”

我认为问题来自密钥大小。

我的密钥大小是 1024 位。

简短的源代码：

1.  第一步：使用密钥大小为 1024 位的 RSA 公钥加密数据

    ```
    byte[] encryptedData = RSAalg.Encrypt(dataToEncrypt, false); 
    ```

2.  第二步：使用另一个密钥大小为 1024 位的 RSA 公钥加密数据

    ```
    byte[] encryptedData1 = RSAalg1.Encrypt(encryptedData, false); 
    ```

错误显示在第二步。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T15:08:03.150

由于填充，您无法`encryptedData`使用 1024 位密钥加密 1024 位数据（这是应该的）。

如果您使用的是 .NET 和 C#，那么 Encrypt with`false`意味着您使用 PKCS#1 填充，它（从内存中）将允许您加密 117 个字节（而不是 128 个字节）。

注意：您不应该重复第二次加密以获得结果 - 但您应该问自己为什么要使用两个密钥（具有相同的密钥长度）对该数据进行两次加密。如果您想要更高的安全性，那么您应该使用更大的密钥（一次）。OTOH，如果您想要多个密钥来解密数据，那么您需要一种不同的策略。

# r - 在 R 中，在 Ubuntu control-4 下退出 - 为什么？我怎样才能阻止它？

> ID：10072558
> 
> 赞同：1
> 
> 时间：2012-04-09T11:32:27.720
> 
> 标签：r, ubuntu, xfce

在 R 中，在带有 xfce4 的 Ubuntu 11.10 下运行，如果我不小心键入了 key control-4，R会*立即*退出- 不问任何问题 - 如果我创建了一个太大的作业，这有时会很有用。

问题是我偶尔会在工作中不小心按到 ctrl-4 并丢失它，这很烦人。

如何将此键码更改为其他内容？还是失败了，只是完全删除它？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T11:54:05.033

Ctrl-4 正在发送 Unix Quit 信号。Ctrl-\ 会这样做。

要在 shell 中禁用，请执行以下操作：

```
trap '' 3 
```

然后运行 ​​R，尝试 ctrl-\ 或 ctrl-4 - 但是您想要 SIGQUIT 的任何其他内容都会在该 shell 中忽略它。改为发送 SIGKILL（kill -9）。

# mongodb - 无法在 Ubuntu 11.04 上重新启动 mongodb

> ID：10072563
> 
> 赞同：14
> 
> 时间：2012-04-09T11:33:05.353
> 
> 标签：mongodb

我已经安装了 mongodb，当我输入以下命令时，我收到了这些消息

```
root@amila:~# service mongodb status    
mongodb stop/waiting
root@amila:~# service mongodb restart    
restart: Unknown instance:     
root@amila:~# service mongodb stop    
stop: Unknown instance: 
```

我想重新启动 mongodb。但无法重新启动。

编辑：这里是 /etc/mongodb.conf

dbpath=/var/lib/mongodb logpath=/var/log/mongodb/mongodb.log

日志附加=真

bind_ip = 127.0.0.1
auth = true

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-09T14:04:07.830

鉴于 start 命令的输出，这是正确启动的。当您处于运行状态时，它似乎已停止。您需要查看日志文件：

```
/var/log/mongodb/mongodb.log 
```

这会告诉你为什么 mongod 停止了。有几个可能的原因，但如果没有看到输出，就很难明确回答。我的一般建议：

1.  ~~不要使用 bind_ip - 一般而言这是一个坏主意~~更新（2016 年）：删除它是因为导致我在 2012 年写回此内容的 bind_ip 问题已得到修复，现在甚至在官方包中默认启用。没有设置作为故障排除步骤值得尝试，但一般使用它不是一个坏主意。
2.  检查端口 27017 上运行的其他内容
3.  在 mongodb.conf 文件中明确指定端口，即使您想使用默认端口

最后，看看这个关于如何修复文件权限的答案，以防万一出现问题（通常是由于在某些时候以 root 身份运行引起的）：

[意外关闭后mongodb崩溃](https://stackoverflow.com/questions/12838459/mongodb-crashes-after-unexpected-shutdown/12856930#12856930)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-19T10:06:42.787

对不起，如果您考虑这个“考古学”。

我不知道这是否是同一个问题，但我现在面临着类似的事情。我的日志结束：

```
Mon Nov 19 10:25:37 [initandlisten] exception in initAndListen: 12596 old lock file, terminating
Mon Nov 19 10:25:37 dbexit: 
Mon Nov 19 10:25:37 [initandlisten] shutdown: going to close listening sockets...
Mon Nov 19 10:25:37 [initandlisten] shutdown: going to flush diaglog...
Mon Nov 19 10:25:37 [initandlisten] shutdown: going to close sockets...
Mon Nov 19 10:25:37 [initandlisten] shutdown: waiting for fs preallocator...
Mon Nov 19 10:25:37 [initandlisten] shutdown: lock for final commit...
Mon Nov 19 10:25:37 [initandlisten] shutdown: final commit...
Mon Nov 19 10:25:37 [initandlisten] shutdown: closing all files...
Mon Nov 19 10:25:37 [initandlisten] closeAllFiles() finished
Mon Nov 19 10:25:37 dbexit: really exiting now 
```

所以我认为锁定文件没有正确关闭（例如关闭时）。你应该使用

```
mongod --repair 
```

但它对我不起作用，所以我只是删除`/var/lib/mongodb/mongod.lock`然后启动服务器。这不是安全的方式，而且如果您这样做，您的数据库中的数据可能会损坏。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-08-13T15:16:02.683

很抱歉重新讨论这个线程，但我把它放在这里是因为我遇到了完全相同的问题并且它有效。

取自这里：

[http://pastebin.com/6hP42r69](http://pastebin.com/6hP42r69)

```
sudo -u mongodb mongod --repair -dbpath /var/lib/mongodb 
```

我正在运行 linux mint 15 和当前的 mongodb 版本。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-03-19T08:52:36.980

我遇到了同样的问题，我解决了运行问题：

`$ service mongod restart`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-08-01T20:13:59.867

我解决了这个手动删除 .lock 文件的问题

> sudo rm -i /var/lib/mongodb/mongod.lock

然后重新启动

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-09T19:13:40.703

看起来 Mongo 由于某种原因无法启动。除了亚当已经提供的建议。

*   检查您是否具有对数据目录的写入权限。
*   检查您是否具有对 /var/log 目录的写入权限。
*   mongod 是以 root 身份运行还是以其他用户身份运行？检查 mongodb 的 init 脚本以查看 mongod 以什么用户身份运行。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-02-14T08:10:31.430

有时，问题可能是由于没有足够的可用存储空间而`journaling`无法顺利进行。

做了一个`tail -100 /var/log/mongodb/mongod.log`发现这个错误：

`exception in initAndListen: 15926 Insufficient free space for journals, terminating` 请在 /var/lib/mongodb/journal 中至少提供 3379MB 或使用 --smallfiles`

`smallfiles=true`通过放入我的 MongoDB 配置文件来解决它`/etc/mongod.conf`。

然后`sudo rm /var/lib/mongodb/mongod.lock`

然后使用重新启动 MongoDB 实例`service mongod start`

希望这有帮助。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-01-26T12:36:58.450

一种可能的情况可能是 mongod.lock（这导致了我的问题）。

在以下位置打开您的日志文件

> /var/log/mongodb/mongod.log

看看你是否因为 mongod.lock 文件有任何异常。复制它的位置并将其删除

> sudo rm /var/lib/mongodb/mongod.lock

然后运行

> sudo 服务 mongod 重启

检查现在是否一切正常。

> sudo 服务 mongod 状态

预期输出将是`mongod start/running`

# email - 使用 Java 访问用户电子邮件地址的日历

> ID：10072565
> 
> 赞同：1
> 
> 时间：2012-04-09T11:33:17.427
> 
> 标签：email, calendar, webdav, thunderbird

我有一个要求。我需要访问公司特定域上的用户电子邮件。我需要获取该用户的日历并将其发布到 Web 应用程序。我已经筋疲力尽地寻找任何可以帮助我做到这一点的 API。公司使用的电子邮件客户端是 Thunder Bird，所以，具体来说，我需要从 Thunder Bird 访问该特定用户的日历。谁能告诉我一些建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T22:34:18.510

库马尔

您的问题非常不精确（提供电子邮件/日历的服务器是什么样的？是否有 LDAP 域？等等）。我想您是在谈论旧的 Exchange Server，因为某些域和 WebDAV 以及搜索时的问题？但我也许可以给你至少一点帮助，这可能会让你走上其他程序员已经走过的路，这样你就可以找到一个简单快速的解决方案。

今天我完成了一个 M$ Exchange 2003 连接器作为概念验证。我告诉你，作为一名学生，我在实习期间*真的*很难。尽管如此，我还是研究、搜索、查询和惹恼了其他人，以获取有用 API 的提示，但没有一个能够实现我的目的。

我发现一个很好用的小框架叫做[Sardine WebDAV Client for Java](https://code.google.com/p/sardine/)。该项目非常轻量级，尽管它有助于了解 WebDAV 的工作原理，即使您可以随时查看来源。

所有其他解决方案都针对许多不同的适用于 Linux 的 MAPI CC++ 库。这对我来说是没有选择的。

那么，我有什么选择？不能直接访问客户的 Exchange 2k3 服务器，只有一个电子邮件帐户。所以你们都可以原谅我，但我发现通过 OWA 向 E2k3 服务器发出 POST 请求要容易得多，因为它是被激活的，而不是尝试一些重型 lib 支持的访问方式。

也许这对您有用 - 从 OWA 表单获取表单字段信息并构建您发布到服务器的连接字符串。也许这是一个可以给你一个想法的字符串。所以你需要像这样调用一个DLL：

```
HttpPost httpPost = new HttpPost("https://" + getUrl()
        + "/exchweb/bin/auth/owaauth.dll");

httpPost.setEntity(new StringEntity("destination=https%3A%2F%2F"
    + getUrl() + "%2Fexchange%2F&flags=0&username=" + getUser()
    + "&password=" + getPassword()
    + "&SubmitCreds=Log+On&trusted=4&flags=4", "UTF-8")); 
```

如何进行基于表单的身份验证的信息来自这里：[Exchange 2003 Forms-Based Authentication](http://developer.gnome.org/evolution-exchange/stable/ximian-connector-fba.html)。如您所见，我从浏览器中获取了用于与 E2k 通信的 Link。下一步很简单 - 发送请求并等待...

```
HttpResponse response = httpclient.execute(httpPost); 
```

如果您得到了良好的响应，那么您可以过滤掉 Session ID。成功登录后的下一步是搜索约会。因此，您应该通过向 M$ 询问一些信息来找到在已建立的 WebDAV 连接上使用的适当方法：[搜索方法](http://msdn.microsoft.com/en-us/library/exchange/aa143053%28v=exchg.65%29.aspx)

然后，您阅读它可以做什么。我继续使用著名的 Find-Machine 并查询[Searching Calendar Folders with WebDAV](http://msdn.microsoft.com/en-us/library/aa123570.aspx)。

之后，您可以像这样创建一个 POST 请求：

```
HttpPost hp = new HttpPost(
    "https://owa.SERVER.de/exchange/USER/Calendar") {
     @Override
     public String getMethod() {
         return "SEARCH";
     }
    }; 
```

现在您可以使用 SEARCH 方法。这很好，因为您的程序已准备好发送请求。

```
hp.setEntity(new StringEntity(QUERY, ContentType.TEXT_XML));
HttpResponse response = httpclient2.execute(hp); 
```

我知道这不是完美的解决方案。因为有两种情况让我感到疑惑。首先：我检索了一个会话 ID，但我不需要在任何地方重复使用它，只要我将它保存在一个字段中。其次：我需要调用另一个 HttpClient。我现在无法解释。如果我使用与登录相同的 HttpClient，那么所有请求都是徒劳的。这就是为什么我不得不调用另一个 HttpClient。

最后也是最困难的一步是查询查询，因为我唯一的调试帮助是 HTTP 错误号和 MSDN 中的错误描述。对此感到抱歉。嗯，这真的很好用。我通过反复试验得到了它的支持。

```
private final static String QUERY = "<?xml version=\"1.0\"?><g:searchrequest   
    xmlns:g=\"DAV:\"><g:sql> Select \"DAV:href\", \"urn:schemas:calendar:dtstart\",   
    \"urn:schemas:calendar:dtend\", \"urn:schemas:mailheader:subject\", 
    \"urn:schemas:calendar:duration\" FROM Scope('SHALLOW TRAVERSAL OF 
    \"/exchange/USER/Calendar\"')</g:sql></g:searchrequest>"; 
```

这不是特定的查询。我只是从另一个文档中替换它并删除了所有我不需要的东西。

我希望这对你有所帮助。关于提供 Thunderbird 约会/日历日期我什么也说不出来，因为这超出了我的知识范围。

最好的问候和晚安，

赛摩

# iphone - iPhone 图层动画的关键路径？

> ID：10072566
> 
> 赞同：0
> 
> 时间：2012-04-09T11:33:32.917
> 
> 标签：iphone, core-animation, calayer

我有一个图层，我想修改它的大小。但是有一些事情让我很烦恼。正在修改它的变换属性，与在图层上制作基本动画相同。这是：

```
layer.transform = CATransform3DMakeScale(0.5, 0.5, 1); 
```

如同：

```
CABasicAnimation *scale = [CABasicAnimation animationWithKeyPath: @"transform.scale"];
scale.fromValue = [NSNumber numberWithDouble:startScale];
scale.toValue = [NSNumber numberWithDouble:endScale];
[layer addAnimation:scale forKey:@"animateScale"]; 
```

另外，是否有一些列表可以让我看到哪些键路径可用于基本动画？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T12:49:26.037

你可以找到它的头文件。它将被标记为 Animatable。看看[这个](https://stackoverflow.com/a/9717421/641062)答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T03:28:08.647

是的，结果非常相似。

第一种方法使用 CALayers 的隐式动画功能。

使用 CABasicAnimation 为您提供了更多的控制和其他选项，但代价是更多的设置。

# azure - 如何从原始令牌中获取 ACS 令牌我们得到身份提供者

> ID：10072568
> 
> 赞同：0
> 
> 时间：2012-04-09T11:33:43.550
> 
> 标签：azure, acs

我从 acs 获取令牌，如这篇文章[Validating a SWT Token REST WCF Service中所述](https://stackoverflow.com/questions/8931287/validating-a-swt-token-rest-wcf-service/8949763#8949763)

但我无法提取 ACS 令牌。你能帮我吗？实际上，提取 acs 令牌“JsonNotifyRequestSecurityTokenResponse.FromJson”的类我无法得到它，因为提供的链接不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T11:45:39.367

我想你几个小时前在我的问题上发布了这个问题作为答案，然后将其删除。所以我查找了我的旧项目并找到了您需要的代码：

```
using System;
using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.IdentityModel.Policy;
using System.IdentityModel.Tokens;
using System.IO;
using System.Runtime.Serialization;
using System.Runtime.Serialization.Json;
using System.Text;
using System.Web;
using System.Xml.Linq;
using Thinktecture.IdentityModel.Extensions;

namespace Security {
    [DataContract]
    public class JsonNotifyRequestSecurityTokenResponse {
        [DataMember(Name = "appliesTo", Order = 1)]
        public string AppliesTo { get; set; }

        [DataMember(Name = "context", Order = 2)]
        public string Context { get; set; }

        [DataMember(Name = "created", Order = 3)]
        public string Created { get; set; }

        [DataMember(Name = "expires", Order = 4)]
        public string Expires { get; set; }

        [DataMember(Name = "securityToken", Order = 5)]
        public string SecurityTokenString { get; set; }

        [DataMember(Name = "tokenType", Order = 6)]
        public string TokenType { get; set; }

        public DateTime ValidFrom { get; set; }
        public DateTime ValidTo { get; set; }
        public GenericXmlSecurityToken SecurityToken { get; set; }

        public static JsonNotifyRequestSecurityTokenResponse FromJson(string jsonString) {
            JsonNotifyRequestSecurityTokenResponse rstr;

            var memoryStream = new MemoryStream(Encoding.Unicode.GetBytes(jsonString));
            var serializer = new DataContractJsonSerializer(typeof(JsonNotifyRequestSecurityTokenResponse));

            rstr = serializer.ReadObject(memoryStream) as JsonNotifyRequestSecurityTokenResponse;
            memoryStream.Close();

            ParseValues(rstr);
            return rstr;
        }

        private static void ParseValues(JsonNotifyRequestSecurityTokenResponse rstr) {
            rstr.ValidFrom = ulong.Parse(rstr.Created).ToDateTimeFromEpoch();
            rstr.ValidTo = ulong.Parse(rstr.Expires).ToDateTimeFromEpoch();
            rstr.SecurityTokenString = HttpUtility.HtmlDecode(rstr.SecurityTokenString);
            var xml = XElement.Parse(rstr.SecurityTokenString);

            string idAttribute = "";
            string tokenType = "";

            switch (rstr.TokenType) {
                case SecurityTokenTypes.Saml11:
                    idAttribute = "AssertionID";
                    tokenType = SecurityTokenTypes.Saml11;
                    break;
                case SecurityTokenTypes.Saml2:
                    idAttribute = "ID";
                    tokenType = SecurityTokenTypes.Saml2;
                    break;
                case SecurityTokenTypes.SWT:
                    idAttribute = "Id";
                    tokenType = SecurityTokenTypes.SWT;
                    break;
            }

            if (tokenType == SecurityTokenTypes.Saml11 || tokenType == SecurityTokenTypes.Saml2) {
                var tokenId = xml.Attribute(idAttribute);
                var xmlElement = xml.ToXmlElement();
                SecurityKeyIdentifierClause clause = null;

                if (tokenId != null) {
                    clause = new SamlAssertionKeyIdentifierClause(tokenId.Value);
                }

                rstr.SecurityToken = new GenericXmlSecurityToken(
                     xmlElement,
                     null,
                     rstr.ValidFrom,
                     rstr.ValidTo,
                     clause,
                     clause,
                     new ReadOnlyCollection<IAuthorizationPolicy>(new List<IAuthorizationPolicy>()));
            }
        }

        private class SecurityTokenTypes {
            public const string Saml2 = "urn:oasis:names:tc:SAML:2.0:assertion";
            public const string Saml11 = "urn:oasis:names:tc:SAML:1.0:assertion";
            public const string SWT = "http://schemas.xmlsoap.org/ws/2009/11/swt-token-profile-1.0";
        }
    }
} 
```

您应该`Thinktecture.IdentityModel.Extensions`从以下网址获取程序集：http: [//identitymodel.codeplex.com/](http://identitymodel.codeplex.com/)

我希望这有帮助。

**编辑 - SWT 令牌处理**

我不知道它是否有帮助，但我找到了一个`SWTModule`应该处理 SWT 令牌的方法。

```
public class SWTModule : IHttpModule {

    void IHttpModule.Dispose() {

    }

    void IHttpModule.Init(HttpApplication context) {
        context.BeginRequest += new EventHandler(context_BeginRequest);
    }

    void context_BeginRequest(object sender, EventArgs e) {
        //HANDLE SWT TOKEN VALIDATION
        // get the authorization header
        string headerValue = HttpContext.Current.Request.Headers.Get("Authorization");

        // check that a value is there
        if (string.IsNullOrEmpty(headerValue)) {
            throw new ApplicationException("unauthorized");
        }

        // check that it starts with 'WRAP'
        if (!headerValue.StartsWith("WRAP ")) {
            throw new ApplicationException("unauthorized");
        }

        string[] nameValuePair = headerValue.Substring("WRAP ".Length).Split(new char[] { '=' }, 2);

        if (nameValuePair.Length != 2 ||
             nameValuePair[0] != "access_token" ||
             !nameValuePair[1].StartsWith("\"") ||
             !nameValuePair[1].EndsWith("\"")) {
            throw new ApplicationException("unauthorized");
        }

        // trim off the leading and trailing double-quotes
        string token = nameValuePair[1].Substring(1, nameValuePair[1].Length - 2);

        // create a token validator
        TokenValidator validator = new TokenValidator(
             this.acsHostName,
             this.serviceNamespace,
             this.trustedAudience,
             this.trustedTokenPolicyKey);

        // validate the token
        if (!validator.Validate(token)) {
            throw new ApplicationException("unauthorized");
        }

    }
} 
```

你还需要`TokenValidator`：

```
public class TokenValidator {
    private string issuerLabel = "Issuer";
    private string expiresLabel = "ExpiresOn";
    private string audienceLabel = "Audience";
    private string hmacSHA256Label = "HMACSHA256";

    private string acsHostName;

    private string trustedSigningKey;
    private string trustedTokenIssuer;
    private string trustedAudienceValue;

    public TokenValidator(string acsHostName, string serviceNamespace, string trustedAudienceValue, string trustedSigningKey) {
        this.trustedSigningKey = trustedSigningKey;
        this.trustedTokenIssuer = String.Format("https://{0}.{1}/",
             serviceNamespace.ToLowerInvariant(),
             acsHostName.ToLowerInvariant());

        this.trustedAudienceValue = trustedAudienceValue;
    }

    public bool Validate(string token) {
        if (!this.IsHMACValid(token, Convert.FromBase64String(this.trustedSigningKey))) {
            return false;
        }

        if (this.IsExpired(token)) {
            return false;
        }

        if (!this.IsIssuerTrusted(token)) {
            return false;
        }

        if (!this.IsAudienceTrusted(token)) {
            return false;
        }

        return true;
    }

    public Dictionary<string, string> GetNameValues(string token) {
        if (string.IsNullOrEmpty(token)) {
            throw new ArgumentException();
        }

        return
             token
             .Split('&')
             .Aggregate(
             new Dictionary<string, string>(),
             (dict, rawNameValue) => {
                 if (rawNameValue == string.Empty) {
                     return dict;
                 }

                 string[] nameValue = rawNameValue.Split('=');

                 if (nameValue.Length != 2) {
                     throw new ArgumentException("Invalid formEncodedstring - contains a name/value pair missing an = character");
                 }

                 if (dict.ContainsKey(nameValue[0]) == true) {
                     throw new ArgumentException("Repeated name/value pair in form");
                 }

                 dict.Add(HttpUtility.UrlDecode(nameValue[0]), HttpUtility.UrlDecode(nameValue[1]));
                 return dict;
             });
    }

    private static ulong GenerateTimeStamp() {
        // Default implementation of epoch time
        TimeSpan ts = DateTime.UtcNow - new DateTime(1970, 1, 1, 0, 0, 0, 0);
        return Convert.ToUInt64(ts.TotalSeconds);
    }

    private bool IsAudienceTrusted(string token) {
        Dictionary<string, string> tokenValues = this.GetNameValues(token);

        string audienceValue;

        tokenValues.TryGetValue(this.audienceLabel, out audienceValue);

        if (!string.IsNullOrEmpty(audienceValue)) {
            if (audienceValue.Equals(this.trustedAudienceValue, StringComparison.Ordinal)) {
                return true;
            }
        }

        return false;
    }

    private bool IsIssuerTrusted(string token) {
        Dictionary<string, string> tokenValues = this.GetNameValues(token);

        string issuerName;

        tokenValues.TryGetValue(this.issuerLabel, out issuerName);

        if (!string.IsNullOrEmpty(issuerName)) {
            if (issuerName.Equals(this.trustedTokenIssuer)) {
                return true;
            }
        }

        return false;
    }

    private bool IsHMACValid(string swt, byte[] sha256HMACKey) {
        string[] swtWithSignature = swt.Split(new string[] { "&" + this.hmacSHA256Label + "=" }, StringSplitOptions.None);

        if ((swtWithSignature == null) || (swtWithSignature.Length != 2)) {
            return false;
        }

        HMACSHA256 hmac = new HMACSHA256(sha256HMACKey);

        byte[] locallyGeneratedSignatureInBytes = hmac.ComputeHash(Encoding.ASCII.GetBytes(swtWithSignature[0]));

        string locallyGeneratedSignature = HttpUtility.UrlEncode(Convert.ToBase64String(locallyGeneratedSignatureInBytes));

        return locallyGeneratedSignature == swtWithSignature[1];
    }

    private bool IsExpired(string swt) {
        try {
            Dictionary<string, string> nameValues = this.GetNameValues(swt);
            string expiresOnValue = nameValues[this.expiresLabel];
            ulong expiresOn = Convert.ToUInt64(expiresOnValue);
            ulong currentTime = Convert.ToUInt64(GenerateTimeStamp());

            if (currentTime > expiresOn) {
                return true;
            }

            return false;
        } catch (KeyNotFoundException) {
            throw new ArgumentException();
        }
    }
} 
```

# php - PHP 输出缓冲在脚本启动之前包含一些内容

> ID：10072569
> 
> 赞同：0
> 
> 时间：2012-04-09T11:33:52.077
> 
> 标签：php, output-buffering

我有一个站点，我在其中缓冲一些输出

```
ob_start();
... 
```

它运行良好，直到今天我将我的 debian 从旧的**php5.3**更新到最新的**php5.3.3-7** +squeeze8
现在我有时在第一次调用它之前在输出缓冲区中有一些东西

请不要回答诸如此类的事情

> “必须在发送任何输出之前调用标头。” （我知道，我经常使用输出缓冲区）

当我设置一个额外的 ob_get_clean(); 在我脚本的第一行，它有效

```
<?
ob_get_clean(); 
```

看起来，如果我把第一行放在 php 会预先创建一些输出

```
<? print_r(ob_get_clean()); ?> 
```

然后我看到，缓冲区中已经有一个空字符串：

> “”

在所有其他页面上都没有，有 ob_get_clean(); 包含

> 无效的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T01:06:11.107

我找到了：

我前面没有隐形字符，这是不同的：我调用 ob_end_clean() 一次太多了：

这是我的代码，在我调用的函数中：

```
function print_something(){
ob_start();

echo some stuff...

echo ob_get_clean();
ob_end_clean(); // this was the bug! 
} 
```

看来，您可以清除主输出缓冲区；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T11:35:53.303

你有没有可能在你的`<?php`某个地方前面有一些“”？或错误的文件编码问题通常是某种性质，请检查您的文件并包含文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T11:36:45.537

> 现在我有时在第一次调用它之前在输出缓冲区中有一些东西

如果您向我们提供有关该神秘数据的一些信息，将会容易得多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T11:40:32.820

也许是BOM字符的情况？更多信息[在这里](http://en.wikipedia.org/wiki/Byte_order_mark)

# c - 为什么在表示有符号数时，二进制补码优先于二进制补码被更广泛地使用

> ID：10072573
> 
> 赞同：3
> 
> 时间：2012-04-09T11:34:24.370
> 
> 标签：c

后一种表示看起来更容易理解。为什么大多数语言都选择前一种？我想二进制补码中一定有一些独特的因此有利的特性，它们使数据操作更容易。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T11:41:05.830

语言不指定数字格式；硬件可以。问英特尔为什么他们设计他们的 ALU 来做 2 的补码

答案将是因为数学运算在 2s 补码中更规律；正数和负数需要在 1s 补码中以不同方式处理，这意味着 CPU 中基本数学所需的硬件/微码增加一倍。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-09T11:39:52.043

来自[维基百科](http://en.wikipedia.org/wiki/Two%27s_complement)

> 二进制补码系统的优点是加法、减法和乘法的基本算术运算是相同的，无论输入和输出被解释为无符号二进制数还是二进制补码（假设溢出被忽略）。此属性使系统更易于实现并且能够轻松处理更高精度的算术。此外，零只有一个表示，消除了与负零相关的微妙之处，后者存在于一个补码系统中。

# sql - SQL查询不排序描述

> ID：10072577
> 
> 赞同：0
> 
> 时间：2012-04-09T11:34:46.940
> 
> 标签：sql, sqlite

此 sql 命令在 sqlitemanager 中运行良好，但在我的 android 应用程序中，这不排序 desc ...

```
select t._id,  u.name, c.commdate, c.message
from tickets t, users u, comments c
where c.userid = u._id and c.ticketid = t._id
and t.status = 5
group by t._id
having max(c.commdate)
order by c.commdate desc 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T12:01:28.227

我觉得“拥有”部分是个问题。尝试（未经测试）；

```
SELECT t._id, u.name, c.commdate, c.message
FROM tickets t
JOIN comments c ON (t._id = c.ticketid)
-- Find most decent comments on tickets, but handle lack of any comments
LEFT JOIN (
    SELECT c2.ticketid, MAX(c2.commdate) as max_commdate
    FROM comments c2
) AS latest ON (c.ticketid = latest.ticketid AND c.commdate = latest.max_commdate)
JOIN users u ON (c.userid = i._id)
WHERE t.status = 5
ORDER BY t._id DESC, c.commdate DESC 
```

# objective-c - 一个字符串中的多个变量

> ID：10072578
> 
> 赞同：1
> 
> 时间：2012-04-09T11:34:48.043
> 
> 标签：objective-c, nsstring

我目前有这段代码：

```
NSString *strURL = [NSString stringWithFormat:@"http://www.sample.com   /phpFile.php?firstname=%@",txtfirstName.text];

NSString *strURL2 = [NSString stringWithFormat:@"http://www.sample.com/phpFile.php?lastname=%@",txtlastName.text]; 
```

但问题是这会创建两个不同的行，我希望名字、姓氏和其他所有内容都在一行上。

那么有没有可能做类似的事情：

```
NSString *strURL = [NSString stringWithFormat:@"http://www.sample.com   /phpfile.php?firstname=%@",txtfirstName.text,txtlastName.text,txtheight.text,txtweight.text]; 
```

还是我需要做一些更复杂的事情？

提前致谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-09T11:37:46.060

```
NSString *strURL = [NSString stringWithFormat:@"http://www.sample.com/phpfile.php?firstname=%@&txtlastName=%@&txtheight=%@&txtweight=%@",txtfirstName.text,txtlastName.text,txtheight.text,txtweight.text]; 
```

使用它并喜欢这样

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T04:52:07.507

```
NSString *strURL = [@"http://www.sample.com/phpfile.php" appendStringWithFormat:@"?firstname=%@&txtlastName=%@&txtheight=%@&txtweight=%@",txtfirstName.text,txtlastName.text,txtheight.text,txtweight.text]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T10:23:32.687

试试这个代码：

```
NSString *subStringURL = [NSString stringWithFormat:@"firstname=%@&txtlastName=%@&txtheight=%@&txtweight=%@",txtfirstName.text,txtlastName.text,txtheight.text,txtweight.text];

NSString *strURL = [NSString stringWithFormat:@"http://www.sample.com/phpfile.php?%@",subStringURL]; 
```

如果您需要更多帮助，请参阅此链接：[stringWithFormat: NSString 类的方法](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/doc/uid/20000154-stringWithFormat_)

希望这对您有所帮助。

# inheritance - 具有抽象关系的 JPA 2 Inheritance.TABLE_PER_CLASS

> ID：10072579
> 
> 赞同：2
> 
> 时间：2012-04-09T11:34:52.793
> 
> 标签：inheritance, jpa, jpa-2.0, java-ee-6, one-to-many

我有以下实体：

```
@Entity
public class Owner{
@Id
@Column(name = "OWNER_ID")

    @OneToMany()
    @JoinColumn(name = "OWNER_ID")
    private Set<Parent> parents;
    ...
}

@Entity
@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)
public class Parent{
    @Id
    @Column(name = "PARENT_ID")
    ...
}

@Entity
public class ChildA extends Parent{
    ...
}

@Entity
public class ChildB extends Parent{
    ...
} 
```

}

问题是当我尝试使用父元素持久化 Owner 时出现以下异常：

org.springframework.dao.InvalidDataAccessResourceUsageException：无法插入集合：[sample.Owner.parents#1]；SQL [更新父集OWNER_ID=? 其中 PARENT_ID=?]; org.springframework.dao.InvalidDataAccessResourceUsageException：无法插入集合：[sample.Owner.parents#1]；SQL [更新父集OWNER_ID=? 其中 PARENT_ID=?]; 嵌套异常是 org.hibernate.exception.SQLGrammarException：无法插入集合：[sample.Owner.parents#1] 嵌套异常是 org.hibernate.exception.SQLGrammarException：无法插入集合：[sample.Owner.parents#1]

如果我将 InheritanceType 更改为 JOINED 它工作正常。关于为什么它试图坚持父抽象类而不是子特定类的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T12:22:31.643

Hibernate 要求与每类表层次结构的多态关联是双向的（[2.2.4.1\. 每类表](http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html/entity.html#d0e1191)）：

```
public class Owner {
    @OneToMany(mappedBy = "owner")
    private Set<Parent> parents;
    ...
}

public clas Parent {
    ...
    @ManyToOne
    @JoinColumn(name = "OWNER_ID")
    private Owner owner;
    ...
} 
```

# android - android opengl GLUtil.texImage2d

> ID：10072581
> 
> 赞同：-1
> 
> 时间：2012-04-09T11:35:14.413
> 
> 标签：android, opengl-es

我有一个 bmp 大小 =512*512，现在我想用它来渲染一个表面，因为表面不平坦，我将表面切割成小块矩形（num = rowMax * colMax），代码如下：

```
draw(GL10 gl)
{  
  int[] textures = new int[];
  gl.glBindTexture(...);
  gl.glTxtParameterf(...);

 for(int row =0; row< maxRow; row++)
 {
   for(int col=0; col<maxCol; col++
  { 
     GLUtil.texImage2D(GL10.GL_TEXTURE_2D , bitmap,0 );// bitmap is the 512*512 bmp
    //generate 4 point coordinate
    ...

    //generate texture uv coordinate 
    ...
    //draw it
   gl.glDrawArray(...);    
    }  
  } 
```

它工作正常。

但是当我接受声明时：
GLUtil.texImage2D(GL10.GL_TEXTURE_2D , bitmap,0 ); 在循环之外，（因为我认为这可能需要很多时间）它不起作用，我不知道

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T12:03:02.483

也许我不了解您的程序的工作方式，但据我了解，您需要绘制 num 个不同的纹理。

如果您将 texImage2D 排除在循环之外，您将只加载一个纹理而不是 num 纹理，因此显然这不起作用。

关于open gl的另一件事是，您不需要每次绘制时都调用GLUtil.texImage2D，而只需每次纹理更改时调用。

一旦调用了texImage2D，bitmap的当前状态就会保存到GL上下文的纹理内存中，在之前调用的纹理名称下`glBindTexture(GL10.GL_TEXTURE_2D, /*texture name here*/)`，所以下次需要绘制纹理时，只需要调用名称为的glBindTexture即可纹理，就是这样，不需要昂贵的操作。

您应该做的是使每个纹理的名称（表示纹理的唯一整数）是它的位置 (=(row * maxCol) + col) + 1 （这样您就没有名为 0 的纹理（保留纹理名称）。

此外，您应该创建一个名为 mDirty 的大小为 num 的布尔数组，以便当对应于单元格位置的纹理发生更改并需要重新加载时，每个单元格都为真。

这样，您可以在循环中只检查是否`mDirty[(row * maxCol) + col] == true`，如果为真，则调用 texImage2D，并将 mDirty[(row * maxCol) + col] 设置为 false 以指示纹理在 gl 内存中更新。

# php - php_browscap.ini 文件

> ID：10072584
> 
> 赞同：0
> 
> 时间：2012-04-09T11:35:38.330
> 
> 标签：php, codeigniter

我正在做一个项目，我想保存用户登录，我必须在其中保存用户浏览器名称和操作系统。我正在使用 get_browser 函数。我下载了 php_browscap.ini 文件。我必须在哪里保留这个文件以及我必须在我的 php.ini 文件中进行哪些更改，以便 get_browser 正常工作

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T12:10:30.720

配置 php.ini 以实现 get_browser() 无缝工作通常很棘手。

我建议不要重新发明轮子，而只使用漂亮的项目 phpbrowsecap（可在[https://github.com/garetjax/phpbrowscap](https://github.com/garetjax/phpbrowscap)获得）。这不是我的项目，但我在我的个人项目中使用它并且可以正常工作！:)

额外的好处是定期自动更新browsecap（并在本地缓存它）。

# windows-phone-7 - 使用 Codeplex 的 Google 分析时市场测试套件中的错误

> ID：10072590
> 
> 赞同：0
> 
> 时间：2012-04-09T11:36:30.607
> 
> 标签：windows-phone-7, google-analytics

我在我的应用程序中使用 Microsoft Silverlight Analytics Framework 来跟踪页面。一切正常，我也得到了 GA 网站上的值。但问题是当我在市场测试工具包中运行应用程序时，我收到错误“在“MainPage.xaml”中按下后退按钮不会关闭对话框”。

```
 <Application.ApplicationLifetimeObjects>       
 <shell:PhoneApplicationService 
        Launching="Application_Launching" Closing="Application_Closing" 
        Activated="Application_Activated" Deactivated="Application_Deactivated"/>
    <local:AnalyticsService WebPropertyId="UA-1234-1" />
</Application.ApplicationLifetimeObjects> 
```

但是当我从文件中删除 local:AnalyticsService 时，它​​没有给出错误。

伙计们帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T04:52:56.950

大家好，我在 msaf 源代码中遇到了问题。在 Microsoft.WebAnalytics.WP7 项目和文件名 - WebAnalyticsService.cs 他们正在使用弹出窗口并且他们没有关闭弹出窗口。如果您关闭弹出窗口，则该项目将通过市场。但我不确定在哪里关闭弹出窗口。

# android - 具有多个按钮的 android 小部件

> ID：10072591
> 
> 赞同：8
> 
> 时间：2012-04-09T11:36:32.357
> 
> 标签：android, button, click, widget

我开发了一个带有多个按钮的 android 小部件。它工作正常，我第一次添加。但是当我重新启动设备按钮时不会触发。这就是我所做的

这是xml配置

```
<receiver android:name="com.islem.widget.MyWidgetMain" android:label="@string/app_name">
<intent-filter>
    <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
    <!-- Broadcast Receiver that will also process our self created action -->
    <action android:name="com.islem.widget.KalanWidgetMain.ACTION_WIDGET_RECEIVER1"/>
    <action android:name="com.islem.widget.KalanWidgetMain.ACTION_WIDGET_RECEIVER2"/>
    <action android:name="com.islem.widget.KalanWidgetMain.ACTION_WIDGET_RECEIVER3"/>
    <action android:name="com.islem.widget.KalanWidgetMain.ACTION_WIDGET_RECEIVER4"/>
    <action android:name="com.islem.widget.KalanWidgetMain.ACTION_WIDGET_RECEIVER5"/>
    <action android:name="com.islem.widget.KalanWidgetMain.ACTION_WIDGET_RECEIVER6"/>
    <action android:name="com.islem.widget.KalanWidgetMain.ACTION_WIDGET_RELOAD_ALARM"/>

</intent-filter>
<meta-data android:name="android.appwidget.provider" android:resource="@xml/k_widget_provider" /> 
```

这是 onUpdate 方法

```
 @Override
public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {      

    for (int appWidgetId : appWidgetIds) {

        RemoteViews remoteViews = new RemoteViews(context.getPackageName(), R.layout.kalan_widget_main);

        Intent refreshButtonIntent = new Intent(context, KalanWidgetMain.class);
        refreshButtonIntent.setAction(ACTION_WIDGET_RECEIVER1);

        Intent voiceTabIntent = new Intent(context, KalanWidgetMain.class);
        voiceTabIntent.setAction(ACTION_WIDGET_RECEIVER2);

        Intent dataTabIntent = new Intent(context, KalanWidgetMain.class);
        dataTabIntent.setAction(ACTION_WIDGET_RECEIVER3);

        Intent smsTabIntent = new Intent(context, KalanWidgetMain.class);
        smsTabIntent.setAction(ACTION_WIDGET_RECEIVER4);

        Intent prevButtonIntent = new Intent(context, KalanWidgetMain.class);
        prevButtonIntent.setAction(ACTION_WIDGET_RECEIVER5);

        Intent nextButtonIntent = new Intent(context, KalanWidgetMain.class);
        nextButtonIntent.setAction(ACTION_WIDGET_RECEIVER6);

        refreshButtonIntent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, appWidgetId);
        voiceTabIntent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, appWidgetId);
        dataTabIntent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, appWidgetId);
        smsTabIntent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, appWidgetId);
        prevButtonIntent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, appWidgetId);
        nextButtonIntent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, appWidgetId);

        PendingIntent refreshButtonPendingIntent = PendingIntent.getBroadcast(context, appWidgetId, refreshButtonIntent, PendingIntent.FLAG_CANCEL_CURRENT);
        PendingIntent voiceTabPendingIntent = PendingIntent.getBroadcast(context, appWidgetId, voiceTabIntent, PendingIntent.FLAG_UPDATE_CURRENT);
        PendingIntent dataTabPendingIntent = PendingIntent.getBroadcast(context, appWidgetId, dataTabIntent, PendingIntent.FLAG_UPDATE_CURRENT);
        PendingIntent smsTabPendingIntent = PendingIntent.getBroadcast(context, appWidgetId, smsTabIntent, PendingIntent.FLAG_CANCEL_CURRENT);
        PendingIntent prevButtonPendingIntent = PendingIntent.getBroadcast(context, appWidgetId, prevButtonIntent, 0);
        PendingIntent nextButtonPendingIntent = PendingIntent.getBroadcast(context, appWidgetId, nextButtonIntent, 0);

        remoteViews.setOnClickPendingIntent(R.id.kalanRefresh, refreshButtonPendingIntent);
        remoteViews.setOnClickPendingIntent(R.id.kalanTabVoiceBg, voiceTabPendingIntent);
        remoteViews.setOnClickPendingIntent(R.id.kalanTabDataBg, dataTabPendingIntent);
        remoteViews.setOnClickPendingIntent(R.id.kalanTabSMSBg, smsTabPendingIntent);
        remoteViews.setOnClickPendingIntent(R.id.kalanPrev, prevButtonPendingIntent);
        remoteViews.setOnClickPendingIntent(R.id.kalanNext, nextButtonPendingIntent);
        appWidgetManager.updateAppWidget(appWidgetIds, remoteViews);

        KalanUpdater.registerWidget(context, appWidgetManager, appWidgetId); 
        appWidgetManager.updateAppWidget(appWidgetId, remoteViews);
    }
} 
```

这是 onReceive 方法

```
 @Override
public void onReceive(Context context, Intent intent) {

    System.out.println("on onReceive");     
    Toast.makeText(context, "onReceive", Toast.LENGTH_SHORT).show();

    // v1.5 fix that doesn't call onDelete Action
    final String action = intent.getAction();
    if (AppWidgetManager.ACTION_APPWIDGET_DELETED.equals(action)) {
        final int appWidgetId = intent.getExtras().getInt(
                AppWidgetManager.EXTRA_APPWIDGET_ID,
                AppWidgetManager.INVALID_APPWIDGET_ID);
        if (appWidgetId != AppWidgetManager.INVALID_APPWIDGET_ID) {
            this.onDeleted(context, new int[] { appWidgetId });
        }
    } else {

        if (intent.getAction().equals(ACTION_WIDGET_RECEIVER1) || intent.getAction().equals(ACTION_WIDGET_RECEIVER2) ||
                intent.getAction().equals(ACTION_WIDGET_RECEIVER3) || intent.getAction().equals(ACTION_WIDGET_RECEIVER4) ||
                intent.getAction().equals(ACTION_WIDGET_RECEIVER5) || intent.getAction().equals(ACTION_WIDGET_RECEIVER6) ||
                intent.getAction().equals(ACTION_WIDGET_RELOAD_ALARM) 
                ) {             
            int appWidgetId = intent.getExtras().getInt(AppWidgetManager.EXTRA_APPWIDGET_ID, AppWidgetManager.INVALID_APPWIDGET_ID);
            System.out.println("appWidgetId:" + appWidgetId + ", action:" + action);

        }

        super.onReceive(context, intent);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T11:45:10.070

当手机重启时，它会调用`onEnable`而不是`onUpdate`。

- 更新 -

```
int[] allids = AppWidgetManager
.getInstance(Context)
.getAppWidgetIds(new ComponentName(Context, YourAppWidgetProvider.class); 
```

这将获得受 YourAppWigetProvider 控制的所有 id。阅读更多关于[这个](http://developer.android.com/reference/android/appwidget/AppWidgetManager.html)

# blackberry - 使用 Sax 生成解析阿拉伯文本？

> ID：10072592
> 
> 赞同：1
> 
> 时间：2012-04-09T11:36:37.160
> 
> 标签：blackberry, java-me

我正在使用 netbeans 开发 LWUIT 项目以在 Blackberry 环境中运行。这个项目将从.net web 服务读取数据，我使用了 ksoap2 和 Sax Parser。解析器看起来像这样

```
 public static Vector ParseSAX(String input ,final String[] elements) {

    final Vector values = new Vector();

    try {
        SAXParserFactory factory = SAXParserFactory.newInstance();
        SAXParser saxParser = factory.newSAXParser();

        DefaultHandler handler = new DefaultHandler() {
            public void startElement(String uri, String localName, String qName,
                    Attributes attributes) throws SAXException {
              for(int u = 0;u < elements.length;u++){
                if (qName.equalsIgnoreCase(elements[u].toString())) {
                    flag = true;
                    }
                }
            }

            public void endElement(String uri, String localName,
                    String qName) throws SAXException {
            }

            public void characters(char ch[], int start, int length) throws SAXException {
                if (flag) {
                    values.addElement(new String(ch, start, length));
                    flag  = false;
                }
            }
        };

         InputStreamReader inputStream = new InputStreamReader(new ByteArrayInputStream(input.getBytes()), "UTF-8");
        InputSource is = new InputSource();
        is.setEncoding("UTF-8");
        is.setCharacterStream(inputStream);
          saxParser.parse(is, handler);

    } catch (Exception e) {
        e.printStackTrace();
    }
    return values;
} 
```

我关心解析阿拉伯字符。

顺便说一句，我将项目编码转换为 UTF-8 并在 project.properties 和 private.properties 中更改了 javac.encoding=UTF-8 我添加了 runtime.encoding=UTF-8

如果我将此代码放在独立项目中，它运行良好。

如果我在BB项目或web项目中添加，会产生吗？

我不知道我能做什么？

# svn - 为什么 mercurial 在转换时会尝试到达 svn 根目录？

> ID：10072594
> 
> 赞同：0
> 
> 时间：2012-04-09T11:36:53.240
> 
> 标签：svn, ubuntu, mercurial

我正在尝试将 svn 项目转换为 mercurial 项目。我使用的是 mercurial 2.1.2，我的 svn 客户端是 1.6.12，Ubuntu 11.10 操作系统上有 python 2.7.2。

我对我的示例 repo 具有读/写访问权限：**http** ://svn.companyname.com/projectname/Server/。

当我尝试使用以下方式转换此存储库时：

```
hg convert -s svn http://svn.pozitron.com/DubaiFirst/Server/trunk 
```

我收到以下错误：

```
abort: log stream exception '("Server sent unexpected return value (403 Forbidden) in response to OPTIONS request for '**http://svn.companyname.com**'", 175002)' 
```

看到 Url 是公司 svn root 并且我无权访问它。所以我想知道为什么 mercurial 试图到达 svn 树的根？我能做些什么来防止它发生吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T01:23:55.897

我不知道为什么，但是您可以`svnsync`用来镜像要在本地转换的存储库部分吗？无论如何，在转换之前我已经看到了很多关于 svnsync 到本地的建议，因为转换过程非常健谈，并且确实从本地访问 repo 中受益——这也减少了再次尝试的痛苦，因为一个人总是重做几次转换在完全按照自己的意愿获得选项之前（`--filemap、--branchmap、--authormap 等）。

# asp.net - 计算列 - 需要介绍

> ID：10072595
> 
> 赞同：0
> 
> 时间：2012-04-09T11:37:02.727
> 
> 标签：asp.net, sql-server, vb.net, sql-server-2008

问题就是标题本身。我被要求在 SQL Server 中使用计算列。但是当我在谷歌上搜索它时，我发现它主要用于显示多个列的组合值。如果将其视为永久列，则使用它可能会降低性能。所以我想知道

1.  的优点和缺点
2.  我们需要在何时何地实现这一点

如果可能的话，请指导我如何解决以下问题（使用计算列。如果不可能，为什么？）。或任何其他方式来实现此要求。我的要求是使用一个列来识别该表的哪个列已更新。所以我可以比较这些值并识别变化。

**编辑**：下面的表结构。

```
table structure
 ColA int ID (PK) - autonumber.
 ColB Nvarchar
 ColC Nvarchar
 ColD Int
 ColE Int
 ColF Nvarchar

-- Updatation can happen any one the coloumns other than ColA 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T06:12:34.110

这听起来像您需要触发器，而不是计算列。您的最后一句话表明您要“比较值并确定更改。”。你的最终目标是什么？您是否尝试保留此信息，以便未来的数据阅读器可以使用该信息？还是为了您自己的编程需求，以便在数据更改时您可以通过编程完成某些事情？在这两种情况下，触发器都会让您有机会在变化时询问正在发生的变化。您可以使用 COLUMNS_UPDATED() 之类的 @isme: 在触发器内建议。

# wordpress - 在 Wordpress Admin 中移动子菜单

> ID：10072597
> 
> 赞同：2
> 
> 时间：2012-04-09T11:37:05.520
> 
> 标签：wordpress, submenu

我刚刚在我的 Wordpress 管理员中创建了一个自定义菜单`add_menu_page`，如何在这个新的顶级菜单下移动已经存在的子菜单（例如外观 > 标题）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-03-21T19:03:10.717

经过一番研究，我发现您可以调用全局 $submenu。使用此变量，您可以像这样移动已经存在的子菜单：

```
global $submenu

foreach ($submenu['index.php'] as $key => $subItem) {
    if ($subItem[2] === 'update-core.php') {
        $submenu['options-general.php'][0.1] = $subItem;

        ksort($submenu['options-general.php']);
    }
}
unset($submenu['index.php'][$key]; 
```

我还没有弄清楚的一件事是如何让 wp 管理员识别父级的更改（当我在这个子菜单页面上时，子菜单没有展开）。

希望为这个答案找到一些改进。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-26T09:51:32.313

```
For adding submenu to main menu.Follow the below steps:

1\. Go to Appearance->Menus.In Menus window,on right hand side,you will see the added 
   menus list.Just move the mouse over the menu name which you want to be the sub menu,an 
   hand symbol will come,then just drag and move the menu little bit to the right side 
   below the main menu to which you want this menu to be the sub menu. 
```

# c# - 两个接口和两个类之间的关系。

> ID：10072598
> 
> 赞同：1
> 
> 时间：2012-04-09T11:37:05.883
> 
> 标签：c#, interface, class-diagram

所以我想设计这样的团队/球员关系：每个球员都属于一个球队，但因为我想用界面练习，所以我制作了 ITeam 和 IAthlete，然后制作了 BasketballTeam 和 BasketballPlayer。然后我写了这段代码：

```
public interface IAthlete
{
     string GetName();
     string GetSport(); 
}

public interface ITeam
{
     void AddPlayer(IAthlete player);
     IAthlete[] GetAthletes();
     string GetName();
     int GetNumberOfPlayers();
}

public class BasketballPlayer:IAthlete
{
    private string name; 

    public string GetName()
    {
        return this.name; 
    }

    public string GetSport()
    {
        return "Basketball"; 
    }

    public BasketballPlayer(string name)
    {
        this.name = name; 
    }

    public void Run(int distance)
    {
        Console.WriteLine(this.name + " just ran " + distance.ToString() + " meters."); 
    }

    public bool Shoot()
    {
        Console.WriteLine("Successful shot for " + this.name);
        return true; 
    }
}

public class BasketballTeam: ITeam      
{
    BasketballPlayer[] players;
    int numberOfPlayers; 
    private string name; 

    public void AddPlayer(BasketballPlayer player)
    {
        this.players[this.numberOfPlayers] = player;
        this.numberOfPlayers++; 
    }

    public IAthlete[] GetAthletes()
    {
        return this.players; 
    }

    public string GetName()
    {
        return this.name; 
    }

    public int GetNumberOfPlayers()
    {
        return this.numberOfPlayers; 
    }

    public BasketballTeam(string name)
    {
        this.numberOfPlayers = 0; 
        this.name = name;
        this.players = new BasketballPlayer[10]; 
    }
}

class Program
{
    static void Main(string[] args)
    {
        BasketballTeam bt = new BasketballTeam("MyTeam");
        BasketballPlayer bp = new BasketballPlayer("Bob");

        bt.AddPlayer(bp);

        foreach (BasketballPlayer player in bt.GetAthletes())
        {
            Console.WriteLine(player.GetName()); 
        }

        foreach (IAthlete a in bt.GetAthletes())
        {
            Console.WriteLine(a.GetName()); 
        }
    }
} 
```

但它不会编译，因为我正在使用这个：

```
public void AddPlayer(BasketballPlayer player) 
```

在 BasketballPlayer 而不是这个

```
public void AddPlayer(IAthlete player) 
```

我认为它应该可以工作，因为BasketballPlayer 是一名运动员。如果我将其更改为 IAthlete，那么我可以制作另一个像这样的课程：

```
public class HockeyPlayer : IAthlete
{
    private string name;

    public string GetName()
    {
        return this.name;
    }

    public string GetSport()
    {
        return "Hockey";
    }

    public HockeyPlayer(string name)
    {
        this.name = name;
    }

    public void Run(int distance)
    {
        Console.WriteLine(this.name + " just ran " + distance.ToString() + " meters.");
    }
} 
```

然后在我的主要内容中执行此操作：

```
 HockeyPlayer hp = new HockeyPlayer("Henry");
 bt.AddPlayer(hp); 
```

这在逻辑上是错误的，因为我将 HockeyPlayer 添加到了 BasketballTeam 中。它应该是这样的，我应该小心不要那样做吗？我究竟做错了什么？如何使用类图显示这一点？这会导致松耦合吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T11:39:58.983

您试图违反[Liskov 替换原则](http://en.wikipedia.org/wiki/Liskov_Substitution_Principle)。

任何可以用超类型完成的事情——比如添加一个`HockeyPlayer`——也可以用一个子类型完成——包括`BasketballTeam`.

相反，您应该使用泛型：

```
class Team<TPlayer> where TPlayer : IAthlete {
    public ReadOnlyCollection<TPlayer> Players { get; }
    public string Name { get; }
    public void AddPlayer(TPlayer player);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T12:17:54.763

这是对您的代码的一些想法。首先，在 C# 中，您可以使用属性，而不是 Get 和 Set 方法。

```
public interface IAthlete
{
    string Name { get; }
    string Sport { get; }
} 
```

使用自动属性，您可以要求编译器为属性生成后台存储。还可以考虑创建基类 Player，它将包含 Name 和 Sport 属性的实现。

```
public class Player : IAthlete
{
    public Player(string name, string sport)
    {
        Name = name;
        Sport = sport;
    }

    public string Name { get; private set; }
    public string Sport { get; private set; }        
} 
```

现在在实现某些播放器时，您只需将值传递给基类构造函数。而且您的自定义播放器将仅保留特定于他们的功能（无代码重复）。还建议使用字符串格式，而不是连接字符串：

```
public class BasketballPlayer : Player
{
    public BasketballPlayer(string name)
        : base(name, "Basketball")
    {
    }

    public void Run(int distance)
    {
        Console.WriteLine("{0} just ran {1} meters.", Name, distance);
    }

    public bool Shoot()
    {
        Console.WriteLine("Successful shot for " + Name);
        return true;
    }
} 
```

现在关于团队。如果您不想在您的 BasketballTeam 中包含 FootballPlayers，那么您应该创建参数化团队。还可以考虑使用 IEnumerable：

```
public interface ITeam<TPlayer>
    where TPlayer : IAthlete
{
    void AddPlayer(TPlayer player);
    IEnumerable<TPlayer> Players { get; }
    string Name { get; }
    int NumberOfPlayers { get; }
} 
```

同样，对于通用功能，您可以创建基类。请记住，在添加新玩家之前，您应该检查团队中当前有多少玩家。

```
public class Team<TPlayer> : ITeam<TPlayer>
    where TPlayer : IAthlete
{
    private readonly List<TPlayer> _players = new List<TPlayer>();

    public Team(string name, int teamSize)
    {
        Name = name;
        TeamSize = teamSize;            
    }

    public void AddPlayer(TPlayer player)
    {
        if (_players.Count == TeamSize)
            throw new Exception("Players number exceeded");

        _players.Add(player);
    }

    public string Name { get; private set; }
    public int TeamSize { get; private set; }

    public IEnumerable<TPlayer> Players
    {
        get { return _players; }
    }

    public int NumberOfPlayers 
    {
        get { return _players.Count; }
    }       
} 
```

自定义团队实施变得非常容易。您只需告诉它将拥有哪种类型的玩家，并将团队名称和团队规模传递给基础团队实施团队。

```
public class BasketballTeam : Team<BasketballPlayer>
{
    public BasketballTeam(string name)
        : base(name, 10)
    {
    }
} 
```

现在你的程序就像一个魅力：

```
class Program
{
    static void Main(string[] args)
    {
        BasketballTeam bt = new BasketballTeam("MyTeam");
        BasketballPlayer bp = new BasketballPlayer("Bob");

        bt.AddPlayer(bp);

        foreach (BasketballPlayer player in bt.Players)
        {
            Console.WriteLine(player.Name);
        }

        foreach (IAthlete a in bt.Players)
        {
            Console.WriteLine(a.Name);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T13:27:24.443

逻辑上，

这些应该是您的基类： Team ， Player

这些应该是您的派生类：BasketballTeam、BasketballPalyer

这些应该是 Player 上的接口： IPlay() ， IRun ， IGetName 等。无论哪个适用

等等...

指导原则：动词更适合接口，名词更适合类。要求中的名词最适合代码中的类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T11:46:05.453

如果您的界面旨在供各种游戏使用，**那么您似乎在这里错过了 Game**并且可能需要使用**Generics**：

```
public interface IGame
{
   string Name {get;}
   ...
}

public class Bastketball : IGame
{
   ...
}

public interface ITeam<TGame> where TGame: class, IGame
{
   void AddPlayer(IPlayr<TGame> player);
   ...
}

public interface IPlayer<TGame> where TGame: class, IGame
{
   ...

} 
```

**这将防止曲棍球运动员加入篮球队。**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-09T11:49:24.287

[斯拉克斯](https://stackoverflow.com/a/10072631/11963 "您试图违反 Liskov 替换原则。")是正确的。您可以向您添加一个通用约束，`ITeam`以不接受所有玩家，而只接受一种类型的玩家：

```
public interface ITeam<T> where T : IAthlete
{
     void AddPlayer(T player);
     IAthlete[] GetAthletes();
     //  or: T[] GetAthletes();
     string GetName();
     int GetNumberOfPlayers();
} 
```

`BasketballTeam`实现可能如下所示：

```
public class BasketballTeam : ITeam<BasketballPlayer>
{
    BasketballPlayer[] players;
    // […]

    public void AddPlayer(BasketballPlayer player)
    {
        this.players[this.numberOfPlayers] = player;
        this.numberOfPlayers++;
    }

    public IAthlete[] GetAthletes()
    {
        return this.players; 
    }

    // or:
    // public BasketballPlayer[] GetAthletes()
    // {
    //     return this.players; 
    // }

    // […]
} 
```

# django - 链式 QuerySet 过滤器是否等同于使用 Django ORM 在单个过滤器中定义多个字段？

> ID：10072605
> 
> 赞同：2
> 
> 时间：2012-04-09T11:37:31.043
> 
> 标签：django, django-models, filtering

过滤查询集时，我想知道以下是否等效。

```
User.objects.filter(username='josh').filter(email__startswith='josh')
User.objects.filter(username='josh', email__startswith='josh') 
```

我无法想象生成的 SQL 在两者之间会有什么不同。该文档似乎也没有提及任何差异。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T12:31:23.593

您可以在 shell 中执行这些查询并打印出生成的 SQL，例如：

```
>>> print User.objects.filter(username='josh').filter(email__startswith='josh').query 
```

我测试了一个类似的查询，就像你在这里一样，生成的 SQL 代码没有区别。两个语句最终都使用相同的 WHERE 语句。

此外，在这种情况下，无论您是链接过滤器还是一步应用它们，都不应该有任何区别。

但是在某些情况下，过滤顺序很重要。看看[这里](https://docs.djangoproject.com/en/dev/ref/models/querysets/#methods-that-return-new-querysets)和[这里](https://docs.djangoproject.com/en/dev/topics/db/queries/#spanning-multi-valued-relationships)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T12:45:47.890

Django QuerySets 是惰性的，运行：

```
User.objects.filter(username='josh').filter(email__startswith='josh') 
```

甚至

```
a = User.objects.filter(username='josh')
a = a.filter(email__startswith='josh') 
```

仅生成一个数据库查询，当您尝试访问数据时执行该查询。此类查询同意 where 子句中的所有过滤器和排除项。

# linux - 如何转义附加到 LD_PRELOAD 的库路径中的空格？

> ID：10072609
> 
> 赞同：3
> 
> 时间：2012-04-09T11:37:54.133
> 
> 标签：linux, unix, ld-preload

我在 Linux 上遇到 LD_PRELOAD 问题。我正在尝试在启动我的应用程序之前加载一个存在于名称中带有空格的目录中的库：

```
> export LD_PRELOAD='/home/myuser/MyApp\ Test/lib/mylib.so' 
```

但是，路径没有被正确采用。它在空间存在的地方被分割，所以它尝试预加载这些：

```
ERROR: ...: object '/home/myuser/MyApp' from LD_PRELOAD cannot be preloaded: ignored
ERROR: ...: object 'Test/lib/mylib.so' from LD_PRELOAD cannot be preloaded: ignored 
```

我已经逃离了“MyApp Test”中的空间。通过这样的路径的正确方法是什么？

编辑：按照建议在没有转义空间的情况下导出，呈现相同的结果：

> export LD_PRELOAD='/home/myuser/MyApp Test/lib/mylib.so'

以及（没有引号，只是转义空格）：

> 导出 LD_PRELOAD=/home/myuser/MyApp\Test/lib/mylib.so

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-09T12:42:22.570

动态加载器可能只是对空间进行了简单的拆分，在这种情况下，它不可能将空间视为路径的一部分。

您可以通过创建指向要预加载的不包含任何空格的库的符号链接来解决此问题。

**编辑：**

由[http://ubuntuforums.org/showthread.php?t=1142062确认](http://ubuntuforums.org/showthread.php?t=1142062)

> 与 PATH 或 LD_LIBRARY_PATH 等其他变量一样，此变量可能包含由冒号分隔的库名称列表。但是...为了与旧系统兼容，可以用空格分隔 LD_PRELOAD 元素。并且较旧的系统不理解转义，因此如果它们包含空格，则不可能将完整的库路径放入 LD_PRELOAD 中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-22T18:02:59.313

实际上，您可以通过将带有空格的路径添加到 LD_LIBRARY_PATH 然后使用不带路径名的 LD_PRELOAD 来解决此问题。例如：

```
export LD_LIBRARY_PATH="/home/myuser/MyApp\ Test/lib/":${LD_LIBRARY_PATH}
export LD_PRELOAD=mylib.so 
```

# php - 在 php 中将 blob 保存到磁盘

> ID：10072611
> 
> 赞同：1
> 
> 时间：2012-04-09T11:38:07.830
> 
> 标签：php, mysql, database, blob

我的数据库中保存了一个 blob（一个文本文件）。我可以检索它，然后在打印文本文件内容的返回值上使用 echo。但是，我真的不确定如何将文件保存到磁盘

`header("content-type: file/txt");`

这似乎将当前的 php 文件保存到磁盘，所以我猜我需要以某种方式修改它以使用我的 blob？它是否正确？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T11:45:33.240

做这样的事情：

```
header('Content-disposition: attachment; filename=blob.txt');
header('Content-Type: application/octet-stream');
readfile('...path to your file'); 
```

或者

```
header('Content-disposition: attachment; filename=blob.txt');
header('Content-Type: application/octet-stream');
echo $blob; 
```

那应该强制下载到客户端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T11:44:37.643

header('content-disposition: attachment; filename=test.txt');

将 test.txt 更改为文件名

# ruby-on-rails - link_to 为 nil 执行未定义的方法“+”：NilClass 错误

> ID：10072612
> 
> 赞同：1
> 
> 时间：2012-04-09T11:38:09.343
> 
> 标签：ruby-on-rails, ruby-on-rails-3

在使用此代码获取我的链接以向我显示 3 个数据库条目作为表中的链接后，我得到未定义的方法 `+' for nil:NilClass 错误对于没有这些字段的公司，此错误。

```
<td><%= link_to  @company.office_adress_street + ", " + @company.office_adress_city + ", " + @company.office_adress_postcode, "http://maps.google.com/?q=" + @company.office_adress_street + ", " + @company.office_adress_city + ", " + @company.office_adress_postcode, :target => '_blank' %></td> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T11:40:33.007

您应该检查每个对 @company.XXX 属性的调用都不会返回 nil，更好的是字符串连接的结构应该如下：

```
"#{link_to(@company.office_adress_street)}, #{@company.office_adress_city}, #{@company.office_adress_postcode}" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-09T14:37:49.873

我建议您向模型（或装饰器）添加一个方法

```
def address
  [office_address_street, office_address_city, office_address_postcode].compact.join(', ')
end 
```

那么在你看来：

```
<td><%= link_to  @company.address, "http://maps.google.com/?q=" + @company.address, :target => '_blank' %></td> 
```

如果您决定使用装饰器，您还可以创建一个`link_to_address`返回链接的方法，然后将视图简化为：

```
<td><%= @company.link_to_address %></td> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T11:41:47.217

确保它`@company`有一个`office_adress_street`属性（等等......）并且它不是`nil`（它`@company.office_adress_street`应该是一个字符串）。

也许有一个错字？`adress`还是`address`？

如果打算`@company`有时没有`office_adress_street`属性，请使用[link_to_if](http://apidock.com/rails/ActionView/Helpers/UrlHelper/link_to_if)帮助器：

`<td><%= link_to_if @company.office_adress_street, @company.office_adress_street + ", " + @company.office_adress_city + ", " + @company.office_adress_postcode, "http://maps.google.com/?q=" + @company.office_adress_street + ", " + @company.office_adress_city + ", " + @company.office_adress_postcode, :target => '_blank' %></td>`

# asp.net - asp.net url 路由

> ID：10072613
> 
> 赞同：0
> 
> 时间：2012-04-09T11:38:15.580
> 
> 标签：asp.net, vb.net

我要做的基本上是能够输入网址，它会根据那里的用户`mysite/username`名将它们重定向到那里的页面（ ）。`mysite/Profle/Default.aspx?username=username`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T14:52:49.083

我认为这可能需要的不仅仅是 URL 重写。

由于 and 之间没有真正的区别（可以通过 urlrewrite 正则表达式区分）`mysite/username`，`mysite/directory`您可能需要做更多类似的事情。

在您的 global.asax 中，覆盖 BeginRequest 函数。检查请求路径是否与已知用户名匹配。如果是，请重定向。如果没有，让请求自然继续。请注意，如果您的用户名与站点中的目录匹配，这可能会给您带来麻烦。此外，它确实为恶意用户提供了一种方法（尽管很耗时），通过了解哪些名称重定向到登录页面来找出您网站的用户名。

```
 protected void Application_BeginRequest(object sender, EventArgs e)
    {
        var url = HttpContext.Current.Request.RawUrl;

        IEnumerable<string> userNames = GetKnownUserNames(); //Get known user names from your repository

        if (userNames.Contains(url))
        {
            Response.Redirect(String.Format("mysite/Profle/Default.aspx?username={0}", url));
        }
    } 
```

您可能需要进行一些调整才能使比较正常工作，但这会做到这一点。

# linux - 如何使用 tar 使用来自用户输入的绝对路径来备份目录？

> ID：10072616
> 
> 赞同：1
> 
> 时间：2012-04-09T11:38:20.513
> 
> 标签：linux, bash, backup

我有一个脚本，它从用户那里获取输入作为绝对路径（使用 fselect 对话框）。

```
backupdir=$(user_select "choose a directory backup destination"); 
```

我用了

```
tar cvzf backup.tar.gz $backupdir 
```

但是，这包括绝对目录路径（* 1），所以我尝试（不使用脚本）：

```
tar czvf backup.tar.gz -C $PATH directory-to-backup 
```

因此，在我的脚本中，我可以使用：

```
pathtodir = dirname $backupdir 
```

获取备份目录的 $PATH 但我需要我希望备份的目录的名称，即：

```
dirname = ..
tar czvf backup.tar.gz -C $PATH $dirname 
```

**如何获得 $dirname 的名称？**

[1 - “从成员名称中删除前导 `/'”]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T12:25:03.130

好吧，老实说，一开始我很难弄清楚这个问题。我想我们在评论中对此进行了排序。

所以你有`$backupdir`哪个包含备份目录的绝对路径，加上`$pathtodir`哪个是备份目录的父目录。

您现在可以在 Bash 中使用字符串替换，如下所示：

```
# Replace $pathtodir with empty string inside $backupdir
relativepath=${backupdir//$pathtodir/}
# Now remove the leading slash, if any
relativepath=${relativepath#/} 
```

如果我仍然误解了某些内容，请告诉我，我会相应地调整答案。

# c# - 如何使用winforms以多列模式将项目添加到TreeViewAdv

> ID：10072618
> 
> 赞同：4
> 
> 时间：2012-04-09T11:38:29.920
> 
> 标签：c#, winforms, treeview

我正在玩这个名为[TreeViewAdv](http://sourceforge.net/projects/treeviewadv/)的控件。我已经添加了控件并添加了几列试图了解它是如何工作的。但直到现在，当我将项目添加到控件时，我得到的只是空节点。控件提供的示例根本不清楚，当我试图弄清楚如何将数据添加到其中时，这让我很头疼。无论如何，这是我到目前为止所做的，我希望有人能引导我走向正确的方向。

```
 TreeModel _model = new TreeModel();
    treeViewAdv1.Model = _model;

    treeViewAdv1.BeginUpdate();
    for (int i = 0; i < 20; i++)
    {

        Node parentNode = new Node("root" + i);
        _model.Nodes.Add(parentNode);

        for (int n = 0; n < 2; n++)
        {
            Node childNode = new MyNode("child" + n);
            parentNode.Nodes.Add(childNode); 
        }

    }

    treeViewAdv1.EndUpdate(); 
```

无论如何，我得到的只是空节点，我真的不知道如何将数据添加到其他列......任何帮助将不胜感激......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-01-12T14:44:46.317

显然这个问题很老，但我无法找到这个问题的任何答案，所以我想我会尝试为某人节省一些未来的挫败感。

要显示多列，首先将 UseColumns 属性更改为 true。
然后将所需的列添加到 Columns 集合属性。
接下来使用 NodeControls 集合属性创建将显示的数据类型的列表，以及它们应该如何格式化（复选框、文本框等）。确保设置 1）DataPropertyName（稍后会用到），2）ParentColumn（显示 treeView 中的哪一列应该显示数据。最后，创建一个继承自 Node 类的新类，并添加一个 public与每个 NodeControl 同名的属性。然后在添加节点时，使用具有正确值的新类。

```
 private class ColumnNode: Node
        {
            public string NodeControl1="";  // This sould make the DataPropertyName specified in the Node Collection.
            public string NodeControl2 = "";
            public string NodeControl3 = "";
            public ColumnNode(string nodeControl1, string nodeControl2, int nodeControl3)
            {
                NodeControl1 = nodeControl1;
                NodeControl2 = nodeControl2;
                NodeControl3 = nodeControl3.ToString();
            }
        } 
```

然后在添加 TreeModel _model = new TreeModel();

```
_treeViewAdv.Model = _model;
_treeViewAdv.BeginUpdate();
for (int i = 0; i < 20; i++)
{

    Node parentNode = new ColumnNode("root" + i, "",0);
    _model.Nodes.Add(parentNode);

    for (int n = 0; n < 2; n++)
    {
        Node childNode = new ColumnNode("child" + n,"Further Information",1);
        parentNode.Nodes.Add(childNode); 
    }

}
_treeViewAdv.EndUpdate(); 
```

作为参考，本例中 treeViewAdv 的设计器代码如下所示：

```
private Aga.Controls.Tree.TreeViewAdv _treeViewAdv;
private Aga.Controls.Tree.TreeColumn Column1;
private Aga.Controls.Tree.TreeColumn Column2;
private Aga.Controls.Tree.TreeColumn Column3;
private Aga.Controls.Tree.NodeControls.NodeTextBox NodeControl1;
private Aga.Controls.Tree.NodeControls.NodeTextBox NodeControl2;
private Aga.Controls.Tree.NodeControls.NodeTextBox NodeControl3;

private InitializeComponent()
{     
    // Left out all other initialization, since this was long enough already.
    this.treeViewAdvPrint = new Aga.Controls.Tree.TreeViewAdv();
    this.Column1 = new Aga.Controls.Tree.TreeColumn();
    this.Column2 = new Aga.Controls.Tree.TreeColumn();
    this.Column3 = new Aga.Controls.Tree.TreeColumn();
    this.NodeControl1 = new Aga.Controls.Tree.NodeControls.NodeTextBox();
    this.NodeControl2 = new Aga.Controls.Tree.NodeControls.NodeTextBox();
    this.NodeControl3= new Aga.Controls.Tree.NodeControls.NodeTextBox();

    // 
    // _treeViewAdv
    // 
    this._treeViewAdv.BackColor = System.Drawing.SystemColors.Window;
    this._treeViewAdv.Columns.Add(this.Column1);
    this._treeViewAdv.Columns.Add(this.Column2);
    this._treeViewAdv.Columns.Add(this.Column3);
    this._treeViewAdv.DefaultToolTipProvider = null;
    this._treeViewAdv.DragDropMarkColor = System.Drawing.Color.Black;
    this._treeViewAdv.GridLineStyle = ((Aga.Controls.Tree.GridLineStyle)((Aga.Controls.Tree.GridLineStyle.Horizontal | Aga.Controls.Tree.GridLineStyle.Vertical)));
    this._treeViewAdv.LineColor = System.Drawing.SystemColors.ControlDark;
    this._treeViewAdv.Location = new System.Drawing.Point(12, 12);
    this._treeViewAdv.Model = null;
    this._treeViewAdv.Name = "_treeViewAdv";
    this._treeViewAdv.NodeControls.Add(NodeControl1);
    this._treeViewAdv.NodeControls.Add(NodeControl2);
    this._treeViewAdv.NodeControls.Add(NodeControl3);
    this._treeViewAdv.SelectedNode = null;
    this._treeViewAdv.Size = new System.Drawing.Size(443, 356);
    this._treeViewAdv.TabIndex = 6;
    this._treeViewAdv.Text = "_treeViewAdv";
    this._treeViewAdv.UseColumns = true;

    // 
    // Column1
    // 
    this.Column1.Header = "Column 1";
    this.Column1.SortOrder = System.Windows.Forms.SortOrder.None;
    this.Column1.TooltipText = null;
    this.Column1.Width = 290;
    // 
    // Column3
    // 
    this.Column3.Header = "Column 3";
    this.Column3.SortOrder = System.Windows.Forms.SortOrder.None;
    this.Column3.TextAlign = System.Windows.Forms.HorizontalAlignment.Center;
    this.Column3.TooltipText = null;
    // 
    // Column2
    // 
    this.Column2.Header = "Column 2";
    this.Column2.SortOrder = System.Windows.Forms.SortOrder.None;
    this.Column2.TextAlign = System.Windows.Forms.HorizontalAlignment.Center;
    this.Column2.TooltipText = null;
    this.Column2.Width = 91;
    // 
    // NodeControl1
    // 
    this.NodeControl1.DataPropertyName = "NodeControl1";
    this.NodeControl1.IncrementalSearchEnabled = true;
    this.NodeControl1.LeftMargin = 3;
    this.NodeControl1.ParentColumn = this.Column1;
    // 
    // NodeControl2
    // 
    this.NodeControl2.DataPropertyName = "NodeControl2";
    this.NodeControl2.IncrementalSearchEnabled = true;
    this.NodeControl2.LeftMargin = 3;
    this.NodeControl2.ParentColumn = this.Column2;
    // 
    // NodeControl3
    // 
    this.NodeControl3.DataPropertyName = "NodeControl3";
    this.NodeControl3.IncrementalSearchEnabled = true;
    this.NodeControl3.LeftMargin = 3;
    this.NodeControl3.ParentColumn = this.Column3;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-09T02:25:26.943

似乎使用这种出色控制的入门价格是数小时，数小时，令人头疼的挫败感。

这是你需要做的：

```
private void Form1_Load(object sender, EventArgs e)
{
    TreeModel _model = new TreeModel();
    treeViewAdv1.Model = _model;

    treeViewAdv1.BeginUpdate();
    for (int i = 0; i < 20; i++)
    {

        Node parentNode = new Node("root" + i);
        _model.Nodes.Add(parentNode);

        for (int n = 0; n < 2; n++)
        {
            Node childNode = new Node("child" + n);
            parentNode.Nodes.Add(childNode);
        }

    }

    NodeTextBox ntb = new NodeTextBox();
    ntb.DataPropertyName = "Text";       
    this.treeViewAdv1.NodeControls.Add(ntb);

    treeViewAdv1.EndUpdate();

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-09T16:56:33.263

以防万一你还在为这个问题苦苦挣扎，或者其他人也有同样的麻烦：空节点的解决方案是将视图组件分配给树。

TreeViewAdv 使用 MVC，它要求您分配一个视图，尽管这在示例项目中并不明显。TreeViewAdv 源中 NodeControls 文件夹下的 NodeTextBox 类是您可以使用的查看器之一。您需要将它添加到您的表单并通过其 DataPropertyName 属性将其连接到树控件，如下所示：

```
this._tBox.DataPropertyName = "Text"; 
```

其中 _tBox 是 NodeTextBox 实例。不用说，我只是浪费了几个小时来弄清楚这一点。希望它可以帮助别人。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T12:35:26.773

您需要先实例化列，然后将它们附加到 TreeView。毕竟在相同单元格索引的所有列中添加新单元格。希望有所帮助

# database - 2NF 和 3NF 中的关系

> ID：10072625
> 
> 赞同：1
> 
> 时间：2012-04-09T11:39:22.207
> 
> 标签：database, third-normal-form

这是我已经完成的作业，我只需要确认它是否正确完成或提示如何解决它。谢谢。
这是问题：

关系疫苗旨在记录有关婴儿及其疫苗接种的信息：特定婴儿何时接种了特定疫苗；接种疫苗的地点；谁接种了疫苗。下面给出了关系标题：
Vaccine( **VaccineCode, InfantId, Date** , InfantName, InfantAddress, MedicalCentreCode,MedicalCentreName, MedicalCentreAddress,NurseId, NurseName)

除了以主键作为决定因素的函数依赖之外，Vaccine 还具有以下重要的函数依赖：
FD1:InfantId -> InfantName
FD2:InfantId -> InfantAddress
FD3:MedicalCentreCode -> MedicalCentreName
FD4:MedicalCentreCode -> MedicalCentreAddress
FD5:NurseId - > 护士姓名

首先在 2NF 中给出这个关系，然后在 3NF 中给出。

我的解决方案：
2NF:
Infant( **InfantID** , InfantName,InfantAddress)
Rest( **VaccineCode, InfandID, Date** , MedicalCentreCode, MedicalCentreName, MedicalCentreAddress, NurseId, NurseName)

现在婴儿在 2NF 和 3NF 中，但休息关系不在 3NF 中。所有这些关系的 3NF 看起来像这样（当然根据我的说法）：
VaccinationDetails( **VaccineCode, InfantID, Date** ,MedicalCentreCode NurseId)

婴儿（婴儿**ID**、婴儿姓名、婴儿地址）

医疗中心（**医疗**中心代码，医疗中心名称，医疗中心地址）

护士( **NurseId** , NurseName)

我的解决方案是 2NF 和 3NF 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T22:07:31.093

2NF 要求关系 a) 在 1NF 中，并且 b) 没有部分密钥依赖关系。

`Infant (InfantID, InfantName,InfantAddress)`从原始关系投影是正确的。InfantName 和 InfantAddress 在功能上依赖于 InfantID；InfantID 是键 {VaccineCode, InfantId, Date} 的一部分。

> 现在婴儿在 2NF 和 3NF 中，但休息关系不在 3NF 中。

这是正确的。3NF 要求 a) 关系在 2NF 中，并且 b) 没有传递依赖。从 {VaccineCode, InfantId, Date} 到 MedicalCentreCode 到 {MedicalCentreName, MedicalCentreAddress} 有一个传递依赖关系。所以通过投影消除传递依赖给你

*   婴儿 { **InfantID** , InfantName,InfantAddress}
*   MedicalCentres { **MedicalCentreCode** , MedicalCentreName, MedicalCentreAddress}
*   疫苗接种 { **VaccineCode, InfantID, Date** , MedicalCentreCode, NurseId, NurseName}

还有另一个涉及 NurseID 和 NurseName 的传递依赖。投射那个给你的

*   婴儿 { **InfantID** , InfantName,InfantAddress}
*   MedicalCentres { **MedicalCentreCode** , MedicalCentreName, MedicalCentreAddress}
*   护士 { **NurseID** , NurseName}
*   疫苗接种 { **VaccineCode, InfantID, Date** , MedicalCentreCode, NurseId}

这四个关系现在至少都在 3NF 中。（前三个在 5NF 中。）

**超越你的家庭作业**

但这有一个小问题。就目前而言，您可以输入“综合医院”的医疗中心代码，以及不在该处工作的护士的身份证号码。您可能会考虑如何表达这种依赖关系，以及由此产生的关系可能是什么样子。

# xcode - 雪豹的 Xcode DMG 始终无法安装

> ID：10072626
> 
> 赞同：0
> 
> 时间：2012-04-09T11:39:30.863
> 
> 标签：xcode, osx-snow-leopard

我正在运行 Snow Leopard 10.6.8 并尝试为 Snow Leopard 安装 Xcode 4.2。[（这个，来自开发中心的蓝色下载链接）。](http://i.imgur.com/YiEer.png)

但是，当我尝试打开它时，DMG 总是给出[这个错误（无法识别）。](http://i.imgur.com/6m1pV.png)

有没有人有这个问题的经验？除了这个之外，所有其他 DMG 都应该工作，这似乎很奇怪。这是否意味着我的计算机与 Xcode 4.2 不兼容？还是我下载错了？

我希望这是一个可以接受的问题，因为我希望有人已经解决了这个问题。一般谷歌搜索一个无法识别的 DMG 只产生了“重新下载 DMG”，我已经做了 3 次。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T11:57:37.737

尽管下载了 3 次 DMG，但我还是尝试了 Safari 而不是 Chrome，并且它运行良好。

如果其他人有类似的“DMG 无法识别”错误并在这里找到他们的方式：尝试其他浏览器。

# sql - 从触发器回滚事务

> ID：10072627
> 
> 赞同：11
> 
> 时间：2012-04-09T11:39:44.537
> 
> 标签：sql, sql-server-2008, sql-server-2008-r2

在 MS SQL Server 2008 R2 中，我们需要一个预插入和预更新触发器来检查某些内容并允许或回滚（通过`raiserror`）正在运行的插入/更新。

**问题**：在`INSTEAD OF`触发器中。真的必须明确编写插入或更新吗？因为我们希望完成默认的插入或更新，并且只进行“预检查”。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-09T11:44:04.850

是的。

您确实需要编写显式`INSERT`or `UPDATE`。

触发器运行`INSTEAD OF`DML 操作。如果您将触发器留空，则除了创建和填充的`INSERTED`/表之外不会发生任何操作。`DELETED``tempdb`

尽管从评论中的讨论来看，我根本不会为此使用触发器，而是使用唯一的过滤索引`CREATE UNIQUE INDEX ix ON T(a,b,c) WHERE c <> ''`。在处理并发时，这可能会提高性能并避免潜在的逻辑问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-09T11:55:43.580

`INSTEAD OF`除非您想替换实际的插入或更新，否则您可能不需要触发器。在您的情况下，您需要一个`FOR INSERT, UPDATE`触发器。

当有人尝试在titles 表中添加或更改数据时，此示例触发器会向客户端打印一条消息。

```
USE pubs
IF EXISTS (SELECT name FROM sysobjects
      WHERE name = 'reminder' AND type = 'TR')
   DROP TRIGGER reminder
GO
CREATE TRIGGER reminder
ON titles
FOR INSERT, UPDATE 
AS RAISERROR ('inserts and updates to the titles table is not allowed', 16, 1)
GO 
```

你也可以使用类似`IF EXISTS`或`COLUMNS_UPDATED`的东西。

这是另一个使用回滚的示例。

```
USE pubs
IF EXISTS (SELECT name FROM sysobjects
      WHERE name = 'employee_insupd' AND type = 'TR')
   DROP TRIGGER employee_insupd
GO
CREATE TRIGGER employee_insupd
ON employee
FOR INSERT, UPDATE
AS
/* Get the range of level for this job type from the jobs table. */
DECLARE @min_lvl tinyint,
   @max_lvl tinyint,
   @emp_lvl tinyint,
   @job_id smallint
SELECT @min_lvl = min_lvl, 
   @max_lvl = max_lvl, 
   @emp_lvl = i.job_lvl,
   @job_id = i.job_id
FROM employee e INNER JOIN inserted i ON e.emp_id = i.emp_id 
   JOIN jobs j ON j.job_id = i.job_id
IF (@job_id = 1) and (@emp_lvl <> 10) 
BEGIN
   RAISERROR ('Job id 1 expects the default level of 10.', 16, 1)
   ROLLBACK TRANSACTION
END
ELSE
IF NOT (@emp_lvl BETWEEN @min_lvl AND @max_lvl)
BEGIN
   RAISERROR ('The level for job_id:%d should be between %d and %d.',
      16, 1, @job_id, @min_lvl, @max_lvl)
   ROLLBACK TRANSACTION
END 
```

我不确定您是否有交易，但在您的情况下，您需要以下内容：

```
USE myDatabase

    IF EXISTS (SELECT name FROM sysobjects
          WHERE name = 'myTable' AND type = 'TR')
       DROP TRIGGER tr_myTrigger
    GO
    CREATE TRIGGER tr_myTrigger
    ON myTable
    FOR INSERT, UPDATE
    AS

if(exists(select * from inserted where rtrim(c) <> ''))
begin
  -- check to make sure the insert(s) are unique

    if(exists(
      select * from inserted i
      join dbo.myTable t on i.a = t.a and i.b = t.b and i.c = t.c)

    begin
      raiserror('Duplicate(s) found', 16, 1)
      rollback transaction
    end
end 
```

# iphone - Objective-C iPhone - 在 Safari 中打开多个 URL

> ID：10072633
> 
> 赞同：1
> 
> 时间：2012-04-09T11:40:09.997
> 
> 标签：iphone, objective-c, url, ios5, safari

我知道如何在 Safari 中使用`[[UIApplication sharedApplication] openURL:url];`. 这很好，但我需要做的是我有多个 URL，并且我想在启动 Safari 时打开更多带有这些 URL 的选项卡。
我尝试多次调用`openURL`，但它只打开一次 Safari，其他 url 被忽略。
有什么方法可以从我的应用程序中打开 Safari 中的多个选项卡？
谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T11:50:50.447

当您调用 时`UIApplication openURL:`，您的应用程序将被置于后台，不再被允许执行这些操作。我不认为 iOS Safari 支持打开多个标签。选项卡可能以更节省内存的方式实现（即仅加载您看到的选项卡，保存其他选项卡的图片，直到您切换到它们）。这将有助于了解您为什么要打开多个选项卡。

一些建议：

*   打开指向“启动器”页面的链接，该页面会将您带到您想要的页面
*   使用 UIWebView 并自己实现选项卡
*   在您的应用程序中创建某种菜单，一次只打开一个页面

# android - 任何活动都可重用 AsyncTask

> ID：10072635
> 
> 赞同：1
> 
> 时间：2012-04-09T11:40:25.550
> 
> 标签：android, thread-safety, android-asynctask

我的目标是有一个 AsyncTask

*   可以执行多次（当然一次一个任务）
*   可以取消其当前任务
*   可以被任何活动使用
*   可以执行许多不同的任务
*   屏幕旋转（或电话等）没有任何问题

为了实现这一点，我创建了如下所示的类。但是我对线程的经验（和理解）非常有限。而且由于我不知道调试多个线程的任何方法，因此（对我而言）无法知道这是否可行。所以我真正要问的是：这段代码可以吗？

而且由于目前没有使用它的代码，这里有一个使用它的示例：

```
Data2Get d2g = new Data2Get(this, Data2Get.OpCountNumbers);
d2g.setParam("up2Num", String.valueOf(800));
LongOpsRunner.getLongOpsRunner().runOp(d2g); 
```

所以，我们开始吧。这是每个想要执行长任务（操作 - 操作）的活动都应该实现的接口：

```
public interface LongOpsActivity {
    public void onTaskCompleted(OpResult result);
} 
```

这是一个包含任何任务的任何结果的类：

```
public class OpResult {

    public LongOpsActivity forActivity;
    public int opType;
    public Object result;

    public OpResult(LongOpsActivity forActivity, int opType, Object result){
        this.forActivity = forActivity;
        this.opType = opType;
        this.result = result;
    }
} 
```

最后是最重要的部分，单例异步任务类：

```
import java.util.HashMap;
import java.util.Map.Entry;
import java.util.concurrent.locks.Condition;
import java.util.concurrent.locks.ReentrantLock;

import android.os.AsyncTask;

public class LongOpsRunner extends AsyncTask<Void, OpResult, Void> {

    public class Data2Get implements Cloneable {

        // one id for each operation
        public static final int OpCountNumbers = 1;
        public static final int OpCountLetters = 2;

        public LongOpsActivity forActivity;
        public int opType;
        private HashMap<String, String> params = new HashMap<String, String>();

        public Data2Get(LongOpsActivity forActivity, int opType) {
            this.forActivity = forActivity;
            this.opType = opType;
        }

        public void setParam(String key, String value) {
            params.put(key, value);
        }

        public String getParam(String key) {
            return params.get(key);
        }

        public void clearParams() {
            params.clear();
        }

        @Override
        protected Object clone() throws CloneNotSupportedException {
            // deep clone
            Data2Get myClone = (Data2Get) super.clone();
            myClone.clearParams();
            for (Entry<String, String> entry : params.entrySet()) {
                myClone.setParam(new String(entry.getKey()), new String(entry.getValue()));
            }
            return myClone;
        }
    }

    private class IntermediateResult extends OpResult {

        public IntermediateResult(LongOpsActivity forActivity, int opType, Object result) {
            super(forActivity, opType, result);
        }
    }

    // not really needed
    private class FinalResult extends OpResult {

        public FinalResult(LongOpsActivity forActivity, int opType, Object result) {
            super(forActivity, opType, result);
        }
    }

    private final ReentrantLock lock = new ReentrantLock();
    private final Condition executeOp = lock.newCondition();
    private volatile boolean finished = false;
    private volatile boolean waiting = true;
    private volatile boolean shouldCancel = false;
    private volatile boolean activityHasBeenNotified = true;
    private Data2Get startingOpParams = null;
    private Data2Get currentOpParams = null;
    private FinalResult currentOpResult;

    protected Void doInBackground(Void... nothing) {

        try {
            lock.lockInterruptibly();

            do {
                waiting = true;
                while (waiting) {
                    executeOp.await();
                }

                shouldCancel = false;
                activityHasBeenNotified = false;
                boolean opCancelled = false;
                try {
                    currentOpParams = (Data2Get) startingOpParams.clone();
                } catch (CloneNotSupportedException cns) {
                    // do nothing
                }

                switch (currentOpParams.opType) {
                case Data2Get.OpCountNumbers:
                    int numberCounter = 0;
                    int numLoopCount = 0;
                    while ((!opCancelled) & (numLoopCount <= 5000000)) {
                        if (!shouldCancel) {
                            numberCounter = (numberCounter + 1)
                                    % Integer.parseInt(currentOpParams.getParam("up2Num"));
                            if (numberCounter == 0) {
                                numLoopCount++;
                                publishProgress(new IntermediateResult(
                                        currentOpParams.forActivity,
                                        currentOpParams.opType,
                                        "Numbers loop count:" + numLoopCount));
                            }
                        } else {
                            opCancelled = true;
                            activityHasBeenNotified = true;
                        }
                        if (!opCancelled) {
                            currentOpResult = new FinalResult(
                                    currentOpParams.forActivity,
                                    currentOpParams.opType,
                                    "Numbers loop completed.");
                            publishProgress(currentOpResult);
                        }
                    }
                    break;
                case Data2Get.OpCountLetters:
                    int letterLoopCount = 0;
                    char ch = 'a';
                    while (!opCancelled & (letterLoopCount <= 5000000)) {
                        if (!shouldCancel) {
                            ch++;
                            if (Character.toString(ch).equals(currentOpParams.getParam("up2Letter"))) {
                                ch = 'a';
                                letterLoopCount++;
                                publishProgress(new IntermediateResult(
                                        currentOpParams.forActivity,
                                        currentOpParams.opType,
                                        "Letters loop count:" + letterLoopCount));
                            }
                        } else {
                            opCancelled = true;
                            activityHasBeenNotified = true;
                        }
                        if (!opCancelled) {
                            currentOpResult = new FinalResult(
                                    currentOpParams.forActivity,
                                    currentOpParams.opType,
                                    "Letters loop completed.");
                            publishProgress(currentOpResult);
                        }
                    }
                    break;
                default:
                }

            } while (!finished);

            lock.unlock();
        } catch (InterruptedException e) {
            // do nothing
        }
        return null;
    }

    public void cancelCurrentOp() {
        shouldCancel = true;
    }

    @Override
    protected void onProgressUpdate(OpResult... res) {
        OpResult result = res[0];
        if (result instanceof IntermediateResult) {
            // normal progress update
            // use result.forActivity to show something in the activity
        } else {
            notifyActivityOpCompleted(result);
        }
    }

    public boolean currentOpIsFinished() {
        return waiting;
    }

    public void runOp(Data2Get d2g) {
        // Call this to run an operation
        // Should check first currentOpIsFinished() most of the times
        startingOpParams = d2g;
        waiting = false;
        executeOp.signal();
    }

    public void terminateAsyncTask() {
        // The task will only finish when we call this method
        finished = true;
        lock.unlock(); // won't this throw an exception?
    }

    protected void onCancelled() {
        // Make sure we clean up if the task is killed
        terminateAsyncTask();
    }

    // if phone is rotated, use setActivity(null) inside
    // onRetainNonConfigurationInstance()
    // and setActivity(this) inside the constructor
    // and all that only if there is an operation still running
    public void setActivity(LongOpsActivity activity) {
        currentOpParams.forActivity = activity;
        if (currentOpIsFinished() & (!activityHasBeenNotified)) {
            notifyActivityOpCompleted(currentOpResult);
        }
    }

    private void notifyActivityOpCompleted(OpResult result) {
        if (currentOpParams.forActivity != null) {
            currentOpParams.forActivity.onTaskCompleted(result);
            activityHasBeenNotified = true;
        }
    }

    private static LongOpsRunner ref;

    private LongOpsRunner() {
        this.execute();
    }

    public static synchronized LongOpsRunner getLongOpsRunner() {
        if (ref == null)
            ref = new LongOpsRunner();
        return ref;
    }

    public Object clone() throws CloneNotSupportedException {
        throw new CloneNotSupportedException();
    }

} 
```

我希望有人能帮助完成这项工作，因为它不仅对我有用，而且对许多其他人也很有用。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T11:56:07.217

试试`Loaders`。我从 simple `AsyncTask`s 切换到`AsyncTaskLoader`s ，他们解决了很多问题。如果您将 Loader 实现为独立类，它将满足您的所有要求，尤其是当涉及到旋转时，这是 old 的最大问题`AsyncTask`。

# java - 找不到有效的认证路径

> ID：10072638
> 
> 赞同：3
> 
> 时间：2012-04-09T11:40:39.323
> 
> 标签：java, https, war, executable-jar

我使用以下命令在我的系统中创建了一个证书：

```
keytool -export -file test.cert -keystore test -storepass 123456 -alias sriram 
Ans: Certificate stored in file <test.cert>. 
```

我已使用以下命令将此证书导入到新系统的 cacerts 中：

```
keytool -importcert -trustcacerts -file "path-to-public-cert" -keystore JAVA_HOME/jre/lib/security/cacerts".

The output is something like this:Trust this certificate? [no]: yes Certificate was added to keystore. 
```

但是当我在新系统中运行我的 jar 文件时，我仍然收到[链接](http://pastie.org/3719394)错误......我哪里出错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T14:35:25.030

尝试阅读 Apache Tomcat [SSL 配置](http://tomcat.apache.org/tomcat-6.0-doc/ssl-howto.html)方法。

在[编辑 Tomcat 配置文件](http://tomcat.apache.org/tomcat-6.0-doc/ssl-howto.html#Edit_the_Tomcat_Configuration_File)段落中，它解释了您可以拥有`keystoreFile`连接器配置的属性。

```
<Connector 
           port="8443" maxThreads="200"
           scheme="https" secure="true" SSLEnabled="true"
           keystoreFile="${user.home}/.keystore" keystorePass="changeit"
           clientAuth="false" sslProtocol="TLS"/> 
```

# cmd - 如何使用 cmd 执行 .sql 脚本（sybase）文件

> ID：10072642
> 
> 赞同：0
> 
> 时间：2012-04-09T11:40:49.780
> 
> 标签：cmd, sqlcmd, sap-ase

我有创建表的 .sql (sybase) 文件，即“Create_table_mytable.sql”

但在创建表之前，它会检查现有表并删除相同的表。

这是脚本的样子：-

```
setuser 'dbo'
go 

    IF EXISTS (SELECT 1 FROM sysobjects o, sysusers u WHERE o.uid=u.uid AND o.name = 'mytable' AND u.name = 'dbo' AND o.type = 'U') 
    begin
        print 'dropping mytable'
         drop table   mytable   
        print 'dropped mytable'  
    end
go    
    IF NOT EXISTS (SELECT 1 FROM sysobjects o, sysusers u WHERE o.uid=u.uid AND o.name = 'mytable' AND u.name = 'dbo' AND o.type = 'U')
    begin       
        create table mytable (
                id numeric(9,0)     IDENTITY ,
                description             varchar(50)     not null
                )

                GRANT SELECT ON dbo.mytable TO my_user

                GRANT INSERT ON dbo.mytable TO my_user

                GRANT DELETE ON dbo.mytable TO my_user
    end
    go

end
go

setuser  
go 
```

这是cmd文件的内容：-

```
@ECHO ON

ECHO ">> START <<  mytable.sql" >> %LOG%
%SQL% -S %SERVER% -U %USER% -P %PWD% -D %DB% -i mytable.sql >> %LOG%

@ECHO OFF 
```

这是日志文件的内容：-

```
">> START <<  mytable.sql" 
Msg 102, Level 15, State 1:
Server 'myserver', Line 14:
Incorrect syntax near 'go'.
">>> SYBASE SCRIPT COMPLETE <<< " 
```

***注意：如果使用 Sybase Intrective SQL 或 ASE 工具执行相同的脚本，则可以正常运行。***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T06:38:53.760

很好，我得到了答案。这是我在删除表后错过的内容：-

```
use db
go 

setuser 'dbo'
go

IF EXISTS (SELECT 1 FROM sysobjects o, sysusers u WHERE o.uid=u.uid AND o.name = 'mytable' AND u.name = 'dbo' AND o.type = 'U')
begin
print 'dropping mytable'
    drop table mytable
    print 'dropped table - mytable'
end
go 

IF (@@error != 0)
BEGIN
    PRINT "Error CREATING table 'mytable'"
    SELECT syb_quit()
END
go

IF NOT EXISTS (SELECT 1 FROM sysobjects o, sysusers u WHERE o.uid=u.uid AND o.name = 'mytable' AND u.name = 'dbo' AND o.type = 'U')
begin       
    create table mytable (
            id numeric(9,0)     IDENTITY ,
            description             varchar(50)     not null
            )

            GRANT SELECT ON dbo.mytable TO my_user

            GRANT INSERT ON dbo.mytable TO my_user

            GRANT DELETE ON dbo.mytable TO my_user

end
go

setuser  
go 
```

# scala - 这可以在 Scala 中为空吗？

> ID：10072645
> 
> 赞同：7
> 
> 时间：2012-04-09T11:41:18.233
> 
> 标签：scala, null, this

我刚刚阅读[了这个问题](https://stackoverflow.com/questions/9853645/)并偶然发现了以下引用：

> Scala 将`==`其视为在 class 中定义如下`Any`：
> 
> ```
> final def == (that: Any): Boolean = 
>   if (null eq this) (null eq that) else (this equals that) 
> ```

这`(null eq this)`部分让我想知道：实际上是否可以在空指针上调用方法？可以`this`在`null`Scala 中吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-09T11:48:35.343

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-09T11:47:21.613

`null`是[`Null`](http://www.scala-lang.org/api/current/scala/Null.html)类的唯一实例，它是一个有效的对象。`Null`是所有引用类型的子类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T11:48:44.547

我对 Scala 还是很陌生，但我认为这是可能的唯一方法是因为“null”本身是 Null 的一个实例，而不是像 Java 中的“null”这样的特殊值。

[http://blog.sanaulla.info/2009/07/12/nothingness/](http://blog.sanaulla.info/2009/07/12/nothingness/)

这篇文章帮助我更好地理解了这一点。

# objective-c - 无法从 sqlite3 数据库中选择

> ID：10072646
> 
> 赞同：2
> 
> 时间：2012-04-09T11:41:19.483
> 
> 标签：objective-c, ios, sqlite

我从 sqlite3 数据库读取时遇到了一些问题。

```
-(void) readMessengesFromDatabase {
    sqlite3 *database;

    messenges = [[NSMutableArray alloc] init];

    if(sqlite3_open([databasePath UTF8String], &database) == SQLITE_OK) {
        NSLog(@"Connection OK");
        const char *sqlStatement = "select * from MessagesData";
        sqlite3_stmt *compiledStatement;
        if(sqlite3_prepare_v2(database, sqlStatement, -1, &compiledStatement, NULL) == SQLITE_OK) NSLog(@"connect to table OK");    else NSLog(@"connect to table FALSE");
        if(sqlite3_prepare_v2(database, sqlStatement, -1, &compiledStatement, NULL) == SQLITE_OK) { //не проходит условие
            NSLog(@"Connection to table OK");
            while(sqlite3_step(compiledStatement) == SQLITE_ROW) {
                NSLog(@"Read rows OK");
                NSString *dbMessageID = [NSString stringWithUTF8String:(char *)sqlite3_column_text(compiledStatement, 0)];
                NSString *dbMessageText = [NSString stringWithUTF8String:(char *)sqlite3_column_text(compiledStatement, 1)];
                NSString *dbMessageDate = [NSString stringWithUTF8String:(char *)sqlite3_column_text(compiledStatement, 2)];
                NSString *dbMediaOrNot = [NSString stringWithUTF8String:(char *)sqlite3_column_text(compiledStatement, 3)];

                Message *messege = [[Message alloc] initWithName:dbMessageText messageID:dbMessageID messageDate:dbMessageDate mediaOrNot:dbMediaOrNot];

                [messenges addObject:messege];

                [messege release];
            }
        }
        sqlite3_finalize(compiledStatement);
    }
    sqlite3_close(database);    
} 
```

我的第一个 NSLog 向我展示了与数据库的连接是否正常。但下一步“从 MessagesData 中选择 *”并`if(sqlite3_prepare_v2(database, sqlStatement, -1, &compiledStatement, NULL) == SQLITE_OK) NSLog(@"connect to table OK"); else NSLog(@"connect to table FALSE");`显示“连接到 FALSE 表”。尝试从我的数据库表中选择终端并得到错误**“无法打开数据库文件”**。我的错误在哪里？我在我的代码中没有看到任何问题......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T11:59:47.213

如果您打印返回的错误代码，`sqlite3_prepare_v2`则诊断问题会容易得多。数值可以在[这个页面](http://www.sqlite.org/c3ref/c_abort.html)上找到。

```
int errorCode = sqlite3_prepare_v2(database, sqlStatement, -1, &compiledStatement, NULL);
if(errorCode != SQLITE_OK) {
    NSLog(@"Connect to table failed: %d", errorCode); 
} 
```

但是，如果您甚至无法在`sqlite3`命令行工具中从数据库中进行选择，我建议您检查该文件是否存在、是否可读且格式是否正确。

尝试在您的模拟器中重现错误（如果失败，请将数据库文件复制到您的计算机，例如使用 Organizer）。尝试使用`sqlite3`（我知道您确实尝试过，但请确保您正在检查以下内容）运行查询。

如果您收到消息`Error: file is encrypted or is not a database`，则表示数据库文件已损坏。如果你得到`Error: no such table:`，这意味着你的数据库不存在，**是空**的，或者根本没有得到表。如果你得到（如你的问题）：（`Error: unable to open database`你在打开 sqlite 期间得到这个，而不是在执行查询时得到），这意味着 sqlite 无法读取文件（例如权限）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T14:02:01.740

好吧，我猜你的数据库无法连接。[从这里](https://stackoverflow.com/questions/9887785/sqlite-database-load-fails-issue-with-sqlite-prepare-statement-iphone-xcod/9888240#9888240)试试我的答案...

我在这里提到了几件事，我相信你会很好的

让我知道它有效

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T12:06:35.727

编写代码来检查表是否存在。在你执行查询选择之前，你应该检查创建表是否不存在......

NSLog(@"连接正常");

```
 sqlite3_exec(database,"CREATE TABLE IF NOT EXISTS MessagesData (ID INTEGER PRIMARY KEY AUTOINCREMENT ,"
                             "FirstName TEXT,LastName TEXT"));

   const char *sqlStatement = "select * from MessagesData"; 
```

如果它有效，请喜欢它

# java - 在 Java 中对这个字符使用正则表达式需要什么表达式？|

> ID：10072647
> 
> 赞同：0
> 
> 时间：2012-04-09T11:41:30.157
> 
> 标签：java, regex, string, split

简单的问题，但对我没有任何作用。我正在尝试使用此字符 | 拆分字符串 （是的，直棒的东西）

但相反，它将我的整个字符串拆分为单个字符。这个角色的正则表达式是什么？

“|”或“\|”或“\p|” 由于某种原因，所有这些都不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T11:45:12.697

这对我来说没有问题：

```
public static void main(String[] args) {
    String s = "apples|bananas|oranges";
    for (String string : s.split("\\|")) {
        System.err.println(string);
    }
} 
```

我明白了

```
apples
bananas
oranges 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T11:44:20.820

您需要将它转义两次，`\\|`因为它`|`是 Java 和正则表达式中的特殊字符。

# c++ - 线参数的大小

> ID：10072649
> 
> 赞同：1
> 
> 时间：2012-04-09T11:41:30.337
> 
> 标签：c++, visual-studio, visual-c++, visual-c++-2010

是否有任何参数可以从输入中读取整行？我知道有 getline(buffer, size_of_the_line) 函数，但我不想将 size_of_the_line 属性限制为我定义的数字，但没有限制。有这样的事情吗？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T11:42:49.197

是的，使用[`std::getline()`](http://en.cppreference.com/w/cpp/string/basic_string/getline)，它会将整行读入`std::string`：

```
std::string line;
std::getline(std::cin, line); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-09T11:43:56.140

`<string>`是的，在header中定义了一个自由函数：

[标准::getline](http://en.cppreference.com/w/cpp/string/basic_string/getline)

```
#include <iostream>
#include <string>

int main()
{
    std::string line_of_input;
    std::getline(std::cin, line_of_input); // limited only by the max size of string
} 
```

# email - 如何从保管箱登录过程中获取用户电子邮件？

> ID：10072653
> 
> 赞同：3
> 
> 时间：2012-04-09T11:41:47.813
> 
> 标签：email, ios5, login, dropbox

我是 dropbox 1.2 的新手，在我的应用程序中，我需要在用户登录到 dropbox 后获取用户电子邮件，在 dropbox 1.0 中，我从属性“ `email`”中获取了这个值`DBAccountInfo.h`，但是在我更新到 Dropbox 1.2 API 之后，我没有找到该属性，有人可以帮助我如何获取该用户的电子邮件信息吗？谢谢你

**更新**

我已将 Dropbox 更改日志从 1.0 读到 1.1“从 DBAccountInfo 中删除了电子邮件。API 中不推荐使用此字段。userId 是引用帐户的推荐方式。”

所以我们不能再得到那个用户的电子邮件信息了。

# qt - Qt 如何支持图形实现？

> ID：10072655
> 
> 赞同：-4
> 
> 时间：2012-04-09T11:42:03.573
> 
> 标签：qt

在 Qt 中，如何支持图形的实现，即绘制图形？我们有没有其他功能的 Qt 类或库？这里要绘制的图表是在电流和电压之间绘制的线性图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T13:17:03.333

对于图形插值和外推，您可以使用 qwt 库..

[http://qwt.sourceforge.net/](http://qwt.sourceforge.net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T13:12:14.977

与 Qt 一样广泛和它试图涵盖的领域一样多，您必须意识到 Qt 不是您的 GUI 项目的一站式商店。话虽如此，您的问题的答案只是“是”。当然这是可能的。但不是 Qt 中的本机功能。（除非有人在这里证明我错了。我不知道这样的功能） Qt 提供了您可能想要的所有蜡笔，但并不总是为您绘制。

然而幸运的是，有些人以 Qt 为基础开发了各种附加库。例如有[Qwt](http://qwt.sourceforge.net/)。正如他们自己所说：*“Qwt 库包含主要对具有技术背景的程序有用的 GUI 组件和实用程序类。”*

它们为具有各种线型的绘图提供了许多小部件，以适合某些数据集。我敢肯定，您将能够在那里找到适合您需求的东西。或者，如果没有，您可以扩展其功能以满足您的需求。

Ps：我在这里假设您希望最终绘制数据。如果不是这种情况，这可能是矫枉过正。

# android - 如何在android的广播接收器类中添加AlertDialog？

> ID：10072658
> 
> 赞同：1
> 
> 时间：2012-04-09T11:42:07.150
> 
> 标签：android, android-layout, android-intent, android-emulator, sms

我正在开发一个短信应用程序。这样，一旦 SMS 进入收件箱，它就会显示一些警报。我想在下面的代码中添加警报。可能吗？

```
public class SMSReceiver extends BroadcastReceiver
{
        @Override
        public void onReceive(Context context, Intent intent)
        {
                Bundle bundle = intent.getExtras();        
        SmsMessage[] msgs = null;

        if(null != bundle)
        {

            Object[] pdus = (Object[]) bundle.get("pdus");
            msgs = new SmsMessage[pdus.length];
            byte[] data = null;

            for (int i=0; i<msgs.length; i++){
                msgs[i] = SmsMessage.createFromPdu((byte[])pdus[i]);                

            }

        }
        }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T11:54:49.743

`Activity`在您的应用程序中创建一个并`Activity`从您的`BroadcastReceiver`

现在`AlertDialog`在`onCreate`方法内启动`Activity`

创建`style.xml`内部`res/values`文件夹并将其放入其中

```
<style name="Theme.Transparent" parent="android:Theme">
        <item name="android:windowIsTranslucent">true</item>
        <item name="android:windowBackground">#000000</item>
        <item name="android:windowNoTitle">true</item>

    </style> 
```

通过在您的文件中放置一个属性来使`Activty`透明化，因此只会显示。`android:theme="@style/Theme.Transparent"``Activity``AndroidManifest.xml``AlertDialog`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T12:17:32.570

据我了解，您无法从广播接收器启动活动。如果是这种情况，这将帮助您：

```
 Intent i=new Intent(context,ActivityName.class);
    startActivity(i); 
```

和“如何显示 AlertDialog”，遵循 Ravi 的回答是你能做的最好的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T12:23:43.860

调用新的活动集对话框主题并从广播接收器的 onReceive 方法调用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T10:10:00.227

您应该使用通知管理器：http: [//developer.android.com/guide/topics/ui/notifiers/notifications.html](http://developer.android.com/guide/topics/ui/notifiers/notifications.html)

具体来说谷歌说（他们的重点）：

> 后台服务**不应该**为了接收用户交互而自行启动活动。该服务应该创建一个状态栏通知，在用户选择时启动该活动。

您说的是 BroadcastReceiver 而不是服务，但我怀疑它仍然适用。

# c# - 如何从我的自定义文本框中隐藏信息？(Windows 电话)

> ID：10072659
> 
> 赞同：-1
> 
> 时间：2012-04-09T11:42:07.267
> 
> 标签：c#, silverlight, windows-phone-7, silverlight-4.0, silverlight-3.0

在我的 Windows Phone 应用程序中，我有一个登录页面。当我将一些文本放入 Pass`TextBox`时，数据应该用这个符号隐藏：“*”。如何隐藏自定义文本框中的信息？

```
<ValidationControl:ValidationControl x:Name="txtPIN"  GotFocus="PinTextBox_GotFocus" Margin="0,0,45,0" TextWrapping="Wrap" ValidationContent="Please insert a valid id" LostFocus="PinBoxLostFocus" InputScope="Number" HorizontalAlignment="Right" Width="200"  MinWidth="220" MinHeight="80"  MaxLength="4" Foreground="Black" Background="#DEFFFFFF" ValidationRule="{StaticResource pinValidationRule}" TextChanged="txtPIN_TextChanged">
    <ValidationControl:ValidationControl.ValidationSymbol>
        <Image Source="img.png" Height="40" Width="40" />
    </ValidationControl:ValidationControl.ValidationSymbol>
</ValidationControl:ValidationControl> 
```

**更新**

```
 <ValidationControl:ValidationControl x:Name="txtPIN"  GotFocus="PinTextBox_GotFocus" Margin="0,0,45,0" TextWrapping="Wrap" ValidationContent="Please insert a valid id" LostFocus="PinBoxLostFocus" InputScope="Password" HorizontalAlignment="Right" Width="200"  MinWidth="220" MinHeight="80"  MaxLength="4" Foreground="Black" Background="#DEFFFFFF" ValidationRule="{StaticResource pinValidationRule}" TextChanged="txtPIN_TextChanged"> 
```

它不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T09:38:11.950

**System.Security.SecureString**在 Windows Phone 平台上不可用！

看看[SecureString 类](http://msdn.microsoft.com/en-us/library/system.security.securestring.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T11:49:06.843

你可以用`System.Security.SecureString`它来保持加密..

# c# - 创建 Windows 窗体应用程序以运行 Web 项目代码

> ID：10072666
> 
> 赞同：0
> 
> 时间：2012-04-09T11:42:56.810
> 
> 标签：c#, c#-4.0, windows-forms-designer

我正在用 C# 创建 Windows 窗体应用程序。我有一个网络应用程序。我想编写一个 Windows 窗体应用程序，在其中提供 Web 应用程序所需的所有输入详细信息。

我对 Windows 窗体应用程序完全陌生。

基本上我想添加三个三个文本框，从中读取数据并在 Web 应用程序中运行代码。

简而言之，我想让 Web 应用程序作为 Windows 窗体应用程序运行。

任何人都可以分享一些想法。

那将非常有帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T12:21:43.827

根据您的总结，“简而言之，我想让 Web 应用程序作为 Windows 窗体应用程序运行。” 我假设您希望能够在 Windows 窗体应用程序中运行 Web 应用程序。像这样的东西有很多用途，尤其是在 Intranet 应用程序中。

您需要做的就是：

1.  将 WebBrowser 控件拖到您的 Windows 窗体应用程序上。
2.  在“属性”窗口的“事件”选项卡中，将新的事件处理程序添加到 Load 事件。
3.  在表单背后的代码中，只需调用您的站点的 Navigate() 方法即可。

    ```
    private void Form1_Load(object sender, EventArgs e)
    {
        webBrowser1.Navigate("http://blahhhhhh");
    } 
    ```

# zend-framework - 在 Zend Framework 中从视图级别设置 onload

> ID：10072668
> 
> 赞同：0
> 
> 时间：2012-04-09T11:43:09.790
> 
> 标签：zend-framework, view, onload

我面临一个问题，我不确定我想做的事情是否有意义。事实上，我想从一个特定的视图设置布局的主体加载。在我的方法中，不应修改 onload，以防用户不在一个视图中。你知道这是否可能吗？

亲切的问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T12:00:56.163

您可以使用路由上下文来做到这一点。您可以为要添加 onload 的操作/操作添加唯一类。然后根据body标签的类使用一些javascript库。一旦你有了对各种模块、控制器和动作都是唯一的主体类，你就可以将它们用作 jQuery（或你正在使用的任何 JavaScript 库）中的选择器的一部分。参考：[路由上下文](https://gist.github.com/244249)

希望能帮助到你

# android - 减少显示进度条的延迟

> ID：10072675
> 
> 赞同：0
> 
> 时间：2012-04-09T11:43:35.877
> 
> 标签：android, delay, progressdialog

当我在按钮的单击方法中使用以下代码创建进度条时。但是单击按钮后需要 2-3 秒才能显示进度条。如何减少启动进度条的延迟。

```
 public void getProgressBar() {

    progressBar = new ProgressDialog(this);
    progressBar.setCancelable(true);
    progressBar.setMessage("Loading...");
    progressBar.setProgressStyle(ProgressDialog.STYLE_SPINNER);
    progressBar.show();
    progressBarStatus = 0;

    new Thread(new Runnable() {
        public void run() {
            while (progressBarStatus < 100) {

                progressBarStatus = doSomeTasks();////I am loading service 
                progressBarHandler.post(new Runnable() {
                    public void run() {
                        progressBar.setProgress(progressBarStatus);
                    }
                });
            }

                if (progressBarStatus >= 100 ) {

                    progressBar.dismiss();
                    startActivity(new Intent(getApplicationContext(),
                            StatisticDisplay.class));

            }
        }
    }).start();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T11:49:37.777

请改用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)。链接中的示例代码很好地介绍了如何执行此操作。本质上，您在 doInBackground() 中完成工作，使用 onProgressUpdate() 发布您的进度并在 onPostExecute() 中开始您的活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T11:58:27.807

```
 public class BackgroundAsyncTask extends AsyncTask<Void, Integer, Void> {

  int myProgress;

  @Override
  protected void onPostExecute(Void result) {
   // TODO Auto-generated method stub
  }

  @Override
  protected void onPreExecute() {
   // TODO Auto-generated method stub
   myProgress = 0;
  }

  @Override
  protected Void doInBackground(Void... params) {
   // TODO Auto-generated method stub
   while(myProgress<100){
    myProgress++;
    publishProgress(myProgress);
       SystemClock.sleep(100);
   }
   return null;
  }

  @Override
  protected void onProgressUpdate(Integer... values) {
   // TODO Auto-generated method stub
   progressBar.setProgress(values[0]);
  }
} 
```

# css - 如何使用 CSS3 resize 属性强制设置宽度的 HTML 元素也可以调整大小？

> ID：10072676
> 
> 赞同：1
> 
> 时间：2012-04-09T11:43:38.810
> 
> 标签：css, resize

我有这个简单的情况：

```
<textarea style="width:500px;resize:auto"></textarea> 
```

现在这工作正常，浏览器在右下角显示调整大小句柄。但是，我只能水平使盒子变大，但不能变小（例如：http: [//jsfiddle.net/AzJEM/](http://jsfiddle.net/AzJEM/)）。

我不想使用 javascript，因为我认为必须有一些 CSS 方法来做到这一点。任何人都可以给我一个提示？

编辑：我只对 HTML5 感兴趣，所以不需要在答案中支持 IE。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T14:01:35.467

使用最小宽度选项：

```
<textarea style="width:500px;resize:auto; min-width:500px; min-height:120px"></textarea> 
```

# .net - 从 .net 应用程序调用 Microsoft Exchange Web 服务在开发中有效，但在服务器上无效

> ID：10072687
> 
> 赞同：2
> 
> 时间：2012-04-09T11:44:27.673
> 
> 标签：.net, exchangewebservices

在我的开发机器上，我下载并安装了 Microsoft Exchange Web Services api。我在 .net Web 应用程序中添加了对 Microsoft.Exchange.WebServices dll 的引用。我创建了一个页面，允许用户在其他用户的 Outlook 日历中设置日历约会。我有这个代码：

```
ExchangeService myService =new ExchangeService(ExchangeVersion.Exchange2007_SP1);
myService.Credentials = new WebCredentials("myName", "myPassword");
myService.AutodiscoverUrl("myEmailAddress@myCompany.com");

Appointment a = new Appointment(myService);
a.Subject = "Test Appointment";
a.Start = new DateTime(2012,5,15,14,45,0,DateTimeKind.Local);
a.End = new DateTime(2012,5,15,15,45,0,DateTimeKind.Local);
a.RequiredAttendees.Add(new Attendee("myEmailAddress@myCompany.com");
a.Save(SendInvitationMode.SendOnlyToAll); 
```

如果我在我的开发机器上运行它，它可以正常工作并创建约会。

如果我将 Web 应用程序发布到本地服务器并尝试运行它，我会收到以下信息：

> 客户端访问服务器版本与访问资源的邮箱服务器版本不匹配。将 AutoDiscover 与正在访问的资源的地址一起使用，以确定用于访问指定资源的正确 URL。

我不知道这是什么意思。

如果我继续访问服务器，打开 IIS 并浏览到该站点，它可以完美运行。

所以，它可以在我的开发框上运行——可以在我的 Outlook 日历中创建约会。如果我在服务器上运行，打开 IIS 并运行它，它就会运行 - 它可以创建约会。如果我使用[http://mylocalServer/myTestApp/OutlookReminder.aspx](http://mylocalServer/myTestApp/OutlookReminder.aspx)在浏览器中运行它- 它会出现上面的错误消息。

# internationalization - WHMCS，以编程方式更改语言

> ID：10072691
> 
> 赞同：0
> 
> 时间：2012-04-09T11:45:03.490
> 
> 标签：internationalization, whmcs

有没有办法以编程方式更改 WHMCS 语言，即使使用钩子也是如此？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T15:42:11.657

客户端： [http ://demo.whmcs.com/index.php?language=Spanish](http://demo.whmcs.com/index.php?language=Spanish)

管理员端：设置->我的帐户->语言

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T12:32:03.433

WHMCS API 没有更改语言的功能。因此，最好的办法是使用动作挂钩，当该挂钩执行时，您需要通过直接与数据库交互来更改语言。您将直接使用`mysql_query()`函数，因为 WHMCS 本身已经建立了连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-15T20:50:15.990

正如user1904473所说。为了给用户一个更改语言的选项，您必须向查询中添加一次语言：

```
<a href="{$smarty.server.PHP_SELF}?language=English">English</a>
<a href="{$smarty.server.PHP_SELF}?language=Portuguese-br">Portugues</a>
<a href="{$smarty.server.PHP_SELF}?language=Spanish">Spanol</a>
<h2>{$LANG.accountstats}</h2> 
```

# rspec - 使用 RSpec，有没有办法断言模型的特定属性是否无效？

> ID：10072711
> 
> 赞同：2
> 
> 时间：2012-04-09T11:46:49.507
> 
> 标签：rspec, rspec-rails

我是 RSpec 的新手，我有一个测试场景，我在其中编写：

```
my_object.should_not be_valid 
```

它工作正常。但是，我想测试模型的特定属性是否无效。是这样一种现成的 RSpec 行为吗？我可以写类似的东西：

```
my_object.should_not be_valid(:name) 
```

理想情况下，我也希望能够测试错误的数量，例如：

```
my_object.should_not be_valid(:name => 1) 
```

但这对我来说现在并不重要。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T12:03:06.400

根据[这个](http://blog.davidchelimsky.net/2009/1/13/rspec-1-1-12-is-released/)，你应该可以这样写：

```
describe Person do
  it "should validate presence of email" do
    person = Person.new(:email =>; nil)
    person.should_not be_valid
    person.should have(1).error_on(:email)
  end
end 
```

或者像下面一样，通过使用[这些 rspec 匹配器](https://github.com/joshknowles/rspec-on-rails-matchers)：

```
describe Person do
  it { should validate_presence_of(:email) }
end 
```

# github - Launchpad 和 github 同步

> ID：10072713
> 
> 赞同：3
> 
> 时间：2012-04-09T11:46:55.220
> 
> 标签：github, launchpad

我让启动板自动从 github 导入我的项目代码。如果我在启动板上进行更改，例如添加翻译，有没有办法自动将它们导出到 github？还是我应该切换到启动板进行代码托管？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T22:16:35.770

您可以使用`bzr-git`插件中的“dpush”命令将 Launchpad 上的更改推送回 Git。

例如：

```
$ bzr branch lp:~yourusername/yourproject/translations
$ cd translations
$ bzr dpush github:yourgithubusername/yourgithubrepo,branch=translations 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T16:19:24.573

我尝试做同样的事情，发现托管在 git 上的 bzr-git-ng 插件： [https ://github.com/termie/git-bzr-ng](https://github.com/termie/git-bzr-ng)

到目前为止，我自己没有尝试同步。检查上面链接中的额外说明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T12:00:29.937

我没有看到一种双向“往返”机制来保持集市和 git repo 同步。

这给您留下了类似的集市导出机制[`fast-export`](http://doc.bazaar.canonical.com/plugins/en/fastimport-plugin.html)（在“[将集市转换为 git](http://dgleich.wordpress.com/2011/01/22/convert-bazaar-to-git/) ”中进行了描述）。
但是这个过程似乎不是增量的，这至少可能会导致第一次导出创建不同的历史记录（不同的 SHA1），从而使您的第一次导出成为`git push -force`（不理想）

因此，如果您选择的开发环境将在不久的将来成为启动板，那么现在切换到其专用的 VCS 会更简单。

# sharepoint - 下载 url 为 http:// 的文件 /_layouts/DocIdRedir.aspx?ID= 使用网络请求

> ID：10072719
> 
> 赞同：0
> 
> 时间：2012-04-09T11:47:34.983
> 
> 标签：sharepoint

我有一个网站集，其中激活了文档 ID 功能。文档从另一个站点（其中文档 ID 也被激活）存档到此站点集合，我拥有的关于移动文件的唯一信息是源和目标之间相同的文档 ID。我需要使用网络请求下载文件，但我的代码给出了“401 Unauthorized Exception”。我的代码如下：

```
string url = "http://<site collection>/_layouts/DocIdRedir.aspx?ID=<doc id>";
HttpWebRequest request = HttpWebRequest.Create(url) as HttpWebRequest;            
request.Method = "Get";            
request.PreAuthenticate = true;
var  credential= new NetworkCredential(username, password, domainname);
request.Credentials = credential;
HttpWebResponse response = request.GetResponse() as HttpWebResponse; 
```

我需要进行某种身份验证，但无法弄清楚。任何帮助将不胜感激。

感谢和问候 Arjabh

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T18:31:21.880

尝试在里面运行你的代码

```
SPSecurity.RunWithElevatedPrivileges(delegate()
{
//code goes here
}); 
```

堵塞

# video - 调整 FFmpeg H.264 解码器

> ID：10072720
> 
> 赞同：0
> 
> 时间：2012-04-09T11:47:37.343
> 
> 标签：video, ffmpeg, decoding, libx264

我正在使用 FFmpeg`avcodec`解码实时视频——`avcodec_decode_video2`确切地说是来自 libx264 的函数。如何减少每帧的解码时间？目前每帧需要 20 毫秒（帧大小约为`1.5 KB`）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T08:12:22.587

好的，可能对某人有帮助。顺便说一句，对于解码，我们使用函数

```
avcodec_video_decode2
```

来自 FFMPEG。我们可以通过两种方式减少延迟。第一种：开启

```
AVCodecContext *ctx->thread_count=N
```

但在这种情况下，我们得到一个有延迟的流，但它不适合实时视频。第二种方法是使用编码器，它将在基于切片的模式下编码图像，例如 libx264。在这种情况下，定义上不存在延迟。但它有一些限制，例如线程数是切片数。

# google-chrome - 谷歌浏览器上未触发 jquery .live 'focus' 事件

> ID：10072723
> 
> 赞同：0
> 
> 时间：2012-04-09T11:47:48.730
> 
> 标签：google-chrome, jquery, browser-support

我想知道这是 chrome 或 jQuery 中的错误，还是我误解了 .live 函数的用法

```
$('.input_form input[type="radio"]').live({
    'change':function(){
        console.log("this is a radio button");
    }
}); 
```

当我在所有主要浏览器中单击类“input_form”的单选按钮时，上面的代码将输出发送到控制台窗口

但是下面的代码：

```
$('.input_form input[type="radio"]').live({
    'focus':function(){
        console.log("this is a radio button");
    }
}); 
```

将输出发送到所有浏览器中的控制台窗口，除了 google chrome (10)

唯一的区别是作为我的事件触发器从“更改”更改为“焦点”。

有人能解释一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T11:52:13.673

如果使用 jQuery 1.7+，你可能应该这样做：

```
$(document).on({
    change: function(){
        console.log("this is a radio button on change");
    },
    focus: function() {
        console.log("this is a radio button on focus");
    }
}, '.input_form input[type="radio"]'); 
```

如果仍在使用实时，并且不需要地图，请执行以下操作：

```
$('.input_form input[type="radio"]').live('focus', function(){
    console.log("this is a radio button");
}); 
```

或使用地图：

```
$('.input_form input[type="radio"]').live({
    focus: function(){
        console.log("this is a radio button");
    }
}); 
```

在 webkit 中，只有在使用选项卡时才会自动单击单选按钮。但是，您可以将焦点设置在元素上，尽管您为什么要这样做超出了我的理解，但这是可能的：

```
$(document).on({
    click: function(){
        console.log("this is a radio button on click");
        $(this).focus();
    },
    focus: function() {
        console.log("this is a radio button on focus");
    }
}, '.input_form input[type="radio"]'); 
```

[小提琴](http://jsfiddle.net/adeneo/b7SVR/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T11:56:31.083

我不确定，但认为你将不得不使用`focusin`而不是`focus`.

```
$('.input_form input[type="radio"]').live({
    'focusin': function(){
        console.log("this is a radio button");
    }
}); 
```

至少前一段时间`focusin`是处理`live`和的标准化事件`focus`。

并且`blur`被称为`focus out`

* * *

笔记：

> 当某个元素或其中的任何元素获得焦点时，focusin 事件将发送到该元素。这与焦点事件不同，它支持检测父元素上的焦点事件（换句话说，它支持事件冒泡）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T12:19:49.340

检查这个问题 [1]，它指出焦点事件不会在 chrome 和 safari 中的单选按钮上触发。

[1] [https://stackoverflow.com/a/5744926/1317080](https://stackoverflow.com/a/5744926/1317080)

# c++ - 只有在安装 Visual Studio 后，C++ 程序才能在 XP SP2 上运行

> ID：10072725
> 
> 赞同：3
> 
> 时间：2012-04-09T11:47:56.673
> 
> 标签：c++, visual-studio, winapi, windows-xp

我有一个 C++ 程序。这很简单 - 显示图像（启动屏幕）并启动另一个应用程序，然后在启动另一个应用程序时关闭。实际上，这个：[http](http://www.olsonsoft.com/blogs/stefanolson/post/A-better-WPF-splash-screen.aspx) ://www.olsonsoft.com/blogs/stefanolson/post/A-better-WPF-splash-screen.aspx有非常小的变化（我的启动画面图像和我的程序是启动而不是示例一）。

它在我的 Windows 7 开发人员机器上运行良好。它还可以在安装了 Windows XP SP2 和 Visual Studio 2008 的另一台（虚拟）机器上运行。但它不能在没有 Visual Studio 的同一台虚拟 Windows XP SP2 机器上工作。它显示错误：“无法在动态链接库 msvcrt.dll 中找到入口点 memmove_s”。

我发现可能存在问题出在 WindowsCodec DLL 中（clear XP SP2 安装中没有这样的 DLL，但它在带有 Visual Studio 的 XP SP2 的 Windows/system32 文件夹中）所以我将它复制到了 clear 系统上的应用程序文件夹中。之后程序部分工作（启动后启动另一个应用程序）但没有显示启动画面图像。

安装 Microsoft Visual C++ Redistributable Package（2008 和 2010）没有帮助。

我发现了在 Visual Studio 中使用静态链接的建议（项目属性中的**多线程 (/MT)**选项 -> C/C++ -> 代码生成），但它也没有帮助。

我也尝试过 DependencyWalker，但找不到两个测试系统的依赖项有任何差异。

任何人都知道为什么会发生这种情况？我是 C++ 的新手，希望这是我不知道的显而易见的事情......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T12:05:29.280

您的程序依赖于 .NET 框架，至少是 3.0 版。默认情况下，这在 XP SP2 安装中不可用。如果您没有看到 windowscodecs.dll，那么您没有安装正确版本的 .NET。这在您安装 VS2008 时确实有效，因为它还安装了 .NET。

下载[地址在这里](http://www.microsoft.com/download/en/details.aspx?displaylang=en&id=22)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T14:45:58.580

C++ 程序依赖于编译它的 crt 库的特定版本。如果正在运行的系统在本地程序目录或系统 WinSxS 目录中没有该版本。这是使用 VS 2005 或 2008 编译的 C++ 程序的特定问题。有关更多信息，请参见此处：[http ://en.wikipedia.org/wiki/Side-by-side_assembly](http://en.wikipedia.org/wiki/Side-by-side_assembly)

如果您使用 VS 2010，您可能会看到这个问题消失了，因为它使用不同的方法来解决依赖关系。

# jboss - 启动 JBoss 服务器时出错

> ID：10072726
> 
> 赞同：5
> 
> 时间：2012-04-09T11:48:04.813
> 
> 标签：jboss

我对 JBoss 很陌生。目前我有一个要求，我需要在 JBoss 上部署应用程序（已经在 Tomcat 上运行）。我下载了 JBoss，但是版本 7 中的目录结构不同。

我正在运行`bin\standalone.conf.bat`文件来启动服务器，但是我收到以下错误：

```
Calling "C:\Program Files\jboss-as-7.1.1.Final\bin\standalone.conf.bat"
===============================================================================

JBoss Bootstrap Environment

JBOSS_HOME: C:\Program Files\jboss-as-7.1.1.Final

JAVA: C:\Program Files\Java\jdk1.6.0_30\bin\java

JAVA_OPTS: -XX:+TieredCompilation -Dprogram.name=standalone.bat -Xms64M -Xmx51
2M -XX:MaxPermSize=256M -Dsun.rmi.dgc.client.gcInterval=3600000 -Dsun.rmi.dgc.se
rver.gcInterval=3600000 -Djava.net.preferIPv4Stack=true -Dorg.jboss.resolver.war
ning=true -Djboss.modules.system.pkgs=org.jboss.byteman -Djboss.server.default.c
onfig=standalone.xml

===============================================================================

Unable to set property fileName on class org.jboss.logmanager.handlers.FileHandl
er: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.
java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces
sorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.jboss.logmanager.PropertyConfigurator.configureProperties(Propert
yConfigurator.java:187)
    at org.jboss.logmanager.PropertyConfigurator.configureHandler(PropertyCo
nfigurator.java:312)
    at org.jboss.logmanager.PropertyConfigurator.configure(PropertyConfigura
tor.java:128)
    at org.jboss.logmanager.PropertyConfigurator.configure(PropertyConfigura
tor.java:86)
    at org.jboss.logmanager.LogManager.readConfiguration(LogManager.java:246
)
    at org.jboss.logmanager.LogManager.readConfiguration(LogManager.java:231
)
    at java.util.logging.LogManager$2.run(LogManager.java:267)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.util.logging.LogManager.readPrimordialConfiguration(LogManager.j
ava:265)
    at java.util.logging.LogManager.getLogManager(LogManager.java:248)
    at java.util.logging.Logger.<init>(Logger.java:225)
    at java.util.logging.LogManager$RootLogger.<init>(LogManager.java:1092)
    at java.util.logging.LogManager$RootLogger.<init>(LogManager.java:1089)
    at java.util.logging.LogManager$1.run(LogManager.java:180)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.util.logging.LogManager.<clinit>(LogManager.java:157)
    at org.jboss.modules.Main.main(Main.java:275)
Caused by: java.io.FileNotFoundException: C:\Program Files\jboss-as-7.1.1.Final\
standalone\log\boot.log (The system cannot find the path specified)
    at java.io.FileOutputStream.open(Native Method)
    at java.io.FileOutputStream.<init>(FileOutputStream.java:194)
    at org.jboss.logmanager.handlers.FileHandler.setFile(FileHandler.java:15
2)
    at org.jboss.logmanager.handlers.FileHandler.setFileName(FileHandler.jav
a:183)
    ... 21 more
17:11:18,420 INFO  [org.jboss.modules] JBoss Modules version 1.1.1.GA
java.lang.IllegalStateException: JBAS018704: Could not create server data direct
ory: C:\Program Files\jboss-as-7.1.1.Final\standalone\data
    at org.jboss.as.server.ServerEnvironment.<init>(ServerEnvironment.java:3
88)
    at org.jboss.as.server.Main.determineEnvironment(Main.java:242)
    at org.jboss.as.server.Main.main(Main.java:83)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.
java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces
sorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.jboss.modules.Module.run(Module.java:260)
    at org.jboss.modules.Main.main(Main.java:291)
Press any key to continue . . . 
```

如何解决问题并让服务器正常运行？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-09T11:52:03.147

尝试在**管理员模式下**运行 JBoss或为您的**JBoss**文件夹授予访问错误中提到的日志文件的适当权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-09T02:31:09.353

如果您使用的是 Eclipse，则以管理员模式启动它可以解决问题，如果不是，您可以在管理员模式下启动命令提示符，然后从那里运行启动脚本。

设置管理员模式： [https ://technet.microsoft.com/en-us/magazine/ff431742.aspx](https://technet.microsoft.com/en-us/magazine/ff431742.aspx)

# ruby-on-rails - 使用机架中间件的参数调用控制器操作

> ID：10072734
> 
> 赞同：6
> 
> 时间：2012-04-09T11:48:51.023
> 
> 标签：ruby-on-rails, ruby, rack

有没有办法可以将参数传递给中间件的控制器操作调用？

这是控制器代码中的操作

```
# in my_controller.rb
# 
def print_name(name)
    render :text => "Hello, #{name}!"
end 
```

这是我的中间件中调用此操作的代码

```
# in middleware
#
def call(env)
  env['action_controller.instance'].class.action(:print_name).call(env)
end 
```

这当然引起`ArgumentError`。

我不知道如何将参数传递给`action`调用。这是来源：

```
# in action_pack/lib/action_controller/metal.rb
#
def self.action(name, klass = ActionDispatch::Request)
      middleware_stack.build(name.to_s) do |env|
        new.dispatch(name, klass.new(env))
      end
end 
```

如您所见，它从提供的控制器操作返回一个机架端点。我认为我无法在这里提出论点。

我最终使用动态更改控制器`class_eval`，然后从该代理方法调用控制器方法。

```
# in middleware
#
def define_proxy_method(klass)
      klass.class_eval do
            def call_the_real_method
              print_name(request.env['fake_attribute'])
            end
      end
 end

def call(env)
  define_proxy_method(env['action_controller.instance'].class)
  env['fake_attrbute'] = "Yukihiro"
  env['action_controller.instance'].class.action(:call_the_real_method).call(env)
end 
```

这似乎很脏，我想知道更好的方法。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T17:34:31.943

你不想为你的行为提出论据。中间件应该只与请求环境交互，而不是尝试直接调用控制器。

您可以在 params 哈希中传递相同的值：

```
# middleware
#
def call(env)
  request = Rack::Request.new(env)
  request['name'] = get_name
end 
```

并从控制器中的 params 哈希中读取：

```
# my_controller.rb
# 
def print_name
    render :text => "Hello, #{params['name']}!"
end 
```

# iphone - iPhone - 按下按钮加载新的 UIView

> ID：10072743
> 
> 赞同：1
> 
> 时间：2012-04-09T11:49:37.827
> 
> 标签：iphone, objective-c, cocoa-touch, uiview

假设我有一个 UITableView 并在选择一个新的表格行（从而触发委托方法）时，我想加载一个新的 UIView（我在情节提要中创建）并将一个数据项传递给它。

显然，新的 UIView 被添加为故事板中的 UIViewController 并具有自己的控制器类..

我该怎么做呢？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T11:54:42.633

尝试这样的事情：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    DetailViewController *dvController = [[DetailViewController alloc] initWithNibName:@"DetailView" bundle:[NSBundle mainBundle]];
    [self.navigationController pushViewController:dvController animated:YES];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T12:45:26.517

如果您使用的是故事板而不是 XIB 文件，请使用此代码...

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    DetailViewController *dvController = [self.storyboard instantiateViewControllerWithIdentifier:@"DetailViewController"];

    [self.navigationController pushViewController:dvController animated:YES];
} 
```

您还需要将 Interface Builder 中的“标识符”字段设置为`self.storyboard instantiateViewControllerWithIdentifier:`

干杯!

# python - 从单词中删除重复字符

> ID：10072744
> 
> 赞同：9
> 
> 时间：2012-04-09T11:50:00.643
> 
> 标签：python, nlp, nltk

我想知道将“haaaaapppppyyy”之类的内容转换为“haappyy”的最佳方法是什么。

基本上，在解析俚语时，人们有时会重复字符以增加重点。

我想知道最好的方法是什么？使用`set()`不起作用，因为字母的顺序显然很重要。

有任何想法吗？我正在使用 Python + nltk。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-04-09T11:56:50.863

可以使用正则表达式来完成：

```
>>> import re
>>> re.sub(r'(.)\1+', r'\1\1', "haaaaapppppyyy")     
'haappyy' 
```

`(.)\1+`将任何字符 ( `.`) 后跟一个或多个相同字符（因为 backref`\1`它必须相同）替换为两倍的字符。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-09T11:57:45.923

您可以使用以下方法压缩多次出现的字母`itertools.groupby`：

```
>>> ''.join(c for c, _ in groupby("haaaaapppppyyy"))
'hapy' 
```

同样，您可以`haappyy`从`groupby`with

```
>>> ''.join(''.join(s)[:2] for _, s in groupby("haaaaapppppyyy"))
'haappyy' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-13T13:57:02.853

您应该在没有减少或正则表达式的情况下执行此操作：

```
>>> s = 'hhaaaaapppppyyy'
>>> ''.join(['' if i>1 and e==s[i-2] else e for i,e in enumerate(s)])
'haappyy' 
```

重复次数被硬编码到`>1`及`-2`以上。一般情况：

```
>>> reps = 1
>>> ''.join(['' if i>reps-1 and e==s[i-reps] else e for i,e in enumerate(s)])
'hapy' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T11:54:53.377

这是一种方法（仅限于 python 不会说英语的明显限制）。

```
>>> s="haaaappppyy"
>>> reduce(lambda x,y: x+y if x[-2:]!=y*2 else x, s, "")
'haappyy' 
```

# regex - 正则表达式匹配包含两个单词的字符串

> ID：10072745
> 
> 赞同：-1
> 
> 时间：2012-04-09T11:50:03.017
> 
> 标签：regex, perl

我有这样的字符串

1.  `Start the function "function name" (any words here ie .*) (0x10)`或者
2.  `'Lets start function "function name" (any words here ie .*) (0x0B)`等等等等。
3.  `function "function name" will start (any words here ie .*) (0x0C).`

实际上，我需要一个正则表达式来匹配字符串中特定顺序`Start`的`function`单词，而不需要`Start`单词应该在行首，`string2`
即`Start`应该是第一次出现，`function`单词应该是第二个，无论它们在字符串中的位置如何。

上面的第三个字符串将不匹配，因为`Start`word 在 word 之后`function`。如果 Reg ex 匹配，那么我需要捕获`"function name"`ie`string inside double quotes` 和`(0x10)ie hex values`inside `()`。

我尝试了以下没有帮助的正则表达式

`^(?=.*\bStart\b)(?=.*\bfunction\b)"(.*?)".*\((\b0[xX][0-9a-fA-F]+\b)\).*$`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T12:13:40.373

```
#!/usr/bin/env perl

use strict; use warnings;

my @s = (
    'Start the function "function name" with (0x10)',
    'Lets start function "function name" with (0x0B)',
    'function "function name" will start with (0x0C)',
    'Start function "API"tovalue:"Enabled"(0x01)',
);

for my $s (@s) {

    my ($f, $h) = ($s =~ m{
            [Ss]tart
            [ ]
            .*?
            function
            [ ]
            "( [^"]+ )"
            [^(]+
            [(]
            ( 0x[[:xdigit:]]+ )
            [)]
        }x
    ) or next;

    print "Function name: '$f'. Hex value: '$h'\n";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T12:53:42.367

我认为将字符串的验证和字段提取分开更清楚。

这个程序说明了我的观点

```
use strict;
use warnings;

my @data = (
  'Start the function "function_one" with (0x10)',
  'Lets start function "function_two" with (0x0B)',
  'function "function_three" will start with (0x0C)',
);

for (@data) {
  next unless /\bstart\b.*\bfunction\b/i;
  printf "%s %s\n", $1, $2 if /"(.*?)".*\(0x([0-9a-f]+)\)/i;
} 
```

**输出**

```
function_one 10
function_two 0B 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T12:07:59.503

我会简化。你不需要前瞻。

```
.*\bStart\b.*\bfunction\b.*"(.*?)".*\((0[xX][0-9a-fA-F]+)\).* 
```

而且，如果您使用查找功能而不是匹配项，则可能可以跳过开头和结尾的 .* ..

也就是说，我不熟悉 Perl，所以我不确定我发布的作品或如何在 Perl 中使用 find。如果您需要，也许其他人可以提供帮助。但是，至少，你得到了大致的想法。

编辑：忘记`.*`之前`"`

# install4j - 在 install4J 中自动启动

> ID：10072749
> 
> 赞同：4
> 
> 时间：2012-04-09T11:50:10.960
> 
> 标签：install4j

是否有一个集成功能可以让我在 Install4J 安装程序完成后自动启动程序？理想情况下添加“安装完成后开始”按钮。

我看到安装程序的完成表单上有字段“激活后脚本”属性，但不确定是否可以使用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-15T14:21:00.903

只需将“执行启动器”操作添加到“完成屏幕”即可。当您这样做时，install4j IDE 还会询问您是否要向完成屏幕添加确认问题。

# javascript - Javascript：日期自动增加 +1 值（将字符串转换为日期对象）

> ID：10072751
> 
> 赞同：-1
> 
> 时间：2012-04-09T11:50:18.467
> 
> 标签：javascript, string, validation, date

我使用`Date()`函数将字符串转换为日期对象。问题是，如果我把`Date("April , 31 ,2012")` 它当作`May , 01 , 2012`（在剩下的日子里工作）请从下面的代码中检查我的方法是否正确。

```
function TestDate(objValue,strError){

    var ret=true;
    var frmdate=objValue.value;
    var datesplit=frmdate.split("-");
    var y =datesplit[0];
    var m=datesplit[1];
    var d=datesplit[2];
    var testdate;
    // Create date object using given input data
    testdate = new Date(m+"/"+d+"/"+y);
    alert("Created date"+testdate.toString());
    var td=testdate.getDate();
    var tm=testdate.getMonth()+1;
    var ty =testdate.getFullYear();
    alert(d+"="+td);
    alert(m+"="+tm);
    alert(y+"="+ty);
    var valid=((d==td) && (m==tm) && (y==ty));
    alert(valid);
    if(valid == false)
    {
        ret =false;
    }
    return ret;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T11:54:41.783

正如@ajreal 在评论中所说，四月只有 30 天。

内部日期对象增加月份以具有有效日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T12:40:56.220

编码：

```
testdate = new Date(m+"/"+d+"/"+y); 
```

取决于字符串的非标准、实现特定的解析。最好使用您开始使用的数据来明确创建日期：

```
testdate = new Date(y, m - 1, d); 
```

至于验证日期，使用 yyyy-mm-dd 格式的 ISO8601 兼容日期的简单函数是：

```
function validateDate(dateString) {
  var bits = dateString.split('-');
  var date = new Date(bits[0], bits[1] - 1, bits[2]);
  return date && date.getFullYear() == bits[0] && date.getDate() == bits[2];
} 
```

这样，如果传递给函数的字符串转换为日期，您可以检查这样创建的日期是否与输入匹配。如果不是，则它无效并且该函数返回 false。如果字符串没有变成日期，它也会返回 false。

# ruby-on-rails-3 - Rails 教程 - 奇怪的 RSpec 行为

> ID：10072755
> 
> 赞同：0
> 
> 时间：2012-04-09T11:50:37.057
> 
> 标签：ruby-on-rails-3, railstutorial.org

我目前在Rails Tutorial (beta) 的[第 10.3.2 节](http://ruby.railstutorial.org/chapters/user-microposts?version=3.2#sec%3acreating_microposts)中，遇到了 RSpec 的一些问题。

`rspec spec/ runs`完美，但是如果我`rspec spec/requests/micropost_pages_spec.rb`按照教程中的描述进行操作，我会收到以下错误：

```
Failures:

  1) Micropost pages micropost creation with invalid information should not create a micropost
     Failure/Error: before { visit root_path }
     ActionView::Template::Error:
       undefined method `model_name' for NilClass:Class
     # ./app/views/shared/_micropost_form.html.erb:1:in `_app_views_shared__micropost_form_html_erb__567210303736562711_70234980477780'
     # ./app/views/static_pages/home.html.erb:8:in `_app_views_static_pages_home_html_erb___61006871036382679_70234970424160'
     # ./spec/requests/micropost_pages_spec.rb:11:in `block (3 levels) in <top (required)>' 
```

在 Web 浏览器中手动执行测试似乎也能完美运行。

不确定我是否做错了什么，或者教程中是否存在“错误”。谁能给个提示？

* * *

**更新 1：**这是[GitHub 上整个项目](https://github.com/znq/sample_app/tree/396d503d52b437790859917ce710c1aa59d3a426)的链接。

* * *

**更新2：**我现在发现，当我重新启动`rails server`时，我第一次点击页面时也会收到错误。但是当我第二次加载页面（重新加载）时，它可以完美运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T16:24:25.390

发现了问题。相当愚蠢的错误。在我的`static_pages_controller.rb`我有

```
 def home
    def home
      @micropost = current_user.microposts.build if signed_in?
    end
  end 
```

无论如何，感谢您的提示。

# android - 如何将贴纸（图像）添加到位图

> ID：10072758
> 
> 赞同：0
> 
> 时间：2012-04-09T11:50:49.403
> 
> 标签：android, bitmapimage

嗨，一个正在开发的绘图 android 应用程序。在那我想在位图中添加一个贴纸（图像）然后我可以保存图像..

请任何人知道这件事请ping我。提前致谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T12:10:36.830

类似的东西？将位图绘制到画布并绘制文本然后保存？

```
drawingCache = Bitmap.createBitmap(300, 400, Bitmap.Config.ARGB_8888);

Canvas canvas = new Canvas(drawingCache);
Paint paint = new Paint();

// Draw your bitmap to the canvas
canvas.drawBitmap(bitmap, 0, 0, paint);

Paint watermarkPaint = new Paint();
watermarkPaint.setColor(Color.WHITE);
watermarkPaint.setAlpha(150);
watermarkPaint.setTextSize(30);
watermarkPaint.setTextAlign(Paint.Align.LEFT);
watermarkPaint.setFlags(Paint.ANTI_ALIAS_FLAG);

canvas.drawText("Watermark", 100, 100, watermarkPaint); 
```

# sencha-touch - Sencha 2.0 应用程序文件大小问题 -

> ID：10072763
> 
> 赞同：0
> 
> 时间：2012-04-09T11:51:33.520
> 
> 标签：sencha-touch, sencha-touch-2

我开发了一个小的 Sencha Touch 2.0 应用程序。这是网址：

[http://apps.swarnendude.com/sencha/iphonetest/iphoneTest.html?url=http://apps.innofied.com/sencha/gts](http://apps.swarnendude.com/sencha/iphonetest/iphoneTest.html?url=http://apps.innofied.com/sencha/gts)

该应用程序在 Android 2.3、iPad、iPhone、Blackberry Playbook 中运行良好。但是当我在***Blackberry Torch (OS: 6.0)***中测试时应用程序崩溃了，给出了这个错误：

“**您请求的页面无法加载。对于此设备来说太大了**”

文件大小的生产版本是：

sencha-touch.js：90.5Kb

应用程序-all.js：401.4Kb

应用程序-all.css：151.5Kb

其他资源：10Kb

因此，总共大约 650Kb。我认为尺寸可以进一步减小，但我没有其他选择。我在 SASS 文件和 JS 中使用最少的 css 配置（只有那些是必需的）。有没有人遇到同样的问题？有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T11:46:19.730

您似乎试图最小化您的应用程序，因此在这种情况下，您无能为力。

我使用的是 Blackberry Bold，当我使用本机浏览器时偶尔会看到这个。但在某些情况下，**Opera Mini**和**Bolt Browser**是传递这些错误的好建议。

# drools - 打破硬（或软）约束

> ID：10072766
> 
> 赞同：1
> 
> 时间：2012-04-09T11:51:55.967
> 
> 标签：drools, drools-planner

就像问题说的那样。之后

```
solver.solve(); 
```

我想查看违反的特定规则（带有值）。我怎样才能从解决方案中得到它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T09:01:05.153

示例已经这样做了，看看这个方法：

```
org.drools.planner.examples.common.business.SolutionBusiness#getScoreDetailList() 
```

但它还没有标准化，看[这个问题](https://issues.jboss.org/browse/JBRULES-3328)。

# java - 要改变什么？爪哇

> ID：10072768
> 
> 赞同：-7
> 
> 时间：2012-04-09T11:52:03.200
> 
> 标签：java, minecraft

```
[SEVERE] java.lang.NoSuchMethodError: net.minecraft.server.ContainerEnchantTable.doEnchantment(Lnet/minecraft/server/EntityHuman;Ljava/util/List;IZ)Z
2012-04-09 13:34:42 [SEVERE]    at net.minecraft.server.mod_MultiplayerSupport.doEnchant(mod_MultiplayerSupport.java:80)
2012-04-09 13:34:42 [SEVERE]    at net.minecraft.server.mod_MultiplayerSupport.handlePacket(mod_MultiplayerSupport.java:51)
2012-04-09 13:34:42 [SEVERE]    at net.minecraft.server.ModLoaderMp.handleAllPackets(ModLoaderMp.java:110)
2012-04-09 13:34:42 [SEVERE]    at net.minecraft.server.Packet230ModLoader.handle(Packet230ModLoader.java:158)
2012-04-09 13:34:42 [SEVERE]    at net.minecraft.server.NetworkManager.b(NetworkManager.java:234)
2012-04-09 13:34:42 [SEVERE]    at net.minecraft.server.NetServerHandler.a(NetServerHandler.java:118)
2012-04-09 13:34:42 [SEVERE]    at net.minecraft.server.NetworkListenThread.a(NetworkListenThread.java:78)
2012-04-09 13:34:42 [SEVERE]    at net.minecraft.server.MinecraftServer.w(MinecraftServer.java:557)
2012-04-09 13:34:42 [SEVERE]    at net.minecraft.server.MinecraftServer.run(MinecraftServer.java:455)
2012-04-09 13:34:42 [SEVERE]    at net.minecraft.server.ThreadServerApplication.run(SourceFile:490)
2012-04-09 13:34:42 [SEVERE] Unexpected exception
java.lang.NoSuchMethodError: net.minecraft.server.ContainerEnchantTable.doEnchantment(Lnet/minecraft/server/EntityHuman;Ljava/util/List;IZ)Z
    at net.minecraft.server.mod_MultiplayerSupport.doEnchant(mod_MultiplayerSupport.java:80)
    at net.minecraft.server.mod_MultiplayerSupport.handlePacket(mod_MultiplayerSupport.java:51)
    at net.minecraft.server.ModLoaderMp.handleAllPackets(ModLoaderMp.java:110)
    at net.minecraft.server.Packet230ModLoader.handle(Packet230ModLoader.java:158)
    at net.minecraft.server.NetworkManager.b(NetworkManager.java:234)
    at net.minecraft.server.NetServerHandler.a(NetServerHandler.java:118)
    at net.minecraft.server.NetworkListenThread.a(NetworkListenThread.java:78)
    at net.minecraft.server.MinecraftServer.w(MinecraftServer.java:557)
    at net.minecraft.server.MinecraftServer.run(MinecraftServer.java:455)
    at net.minecraft.server.ThreadServerApplication.run(SourceFile:490) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T11:55:04.907

“没有这样的方法”向我暗示包含该类的 JAR 已过时。代码中的某些对象正在调用具有与 JAR 中不同的签名的方法。找到该类所在的 JAR 并在 Google 上进行更新。

# html - 如何从 XML 文件中的特定标签中提取值到 HTML 页面中？

> ID：10072769
> 
> 赞同：2
> 
> 时间：2012-04-09T11:52:09.393
> 
> 标签：html, xml

我有一个 XML 文件。

```
<key>457</key>
    <dict>
        <key>Track ID</key><integer>457</integer>
        <key>Name</key><string>Love me do</string>
        <key>Artist</key><string>The Beatles</string>
        <key>Album Artist</key><string>The Beatles</string>
        <key>Composer</key><string>John Lennon/Paul McCartney</string>
        <key>Album</key><string>The Beatles No.1</string>
        <key>Genre</key><string>Varies</string>
        <key>Kind</key><string>AAC audio file</string>
</dict> 
```

为此，我删除了很多文件（这是一首歌曲，每首歌曲大约多出 20-30 行 XML）。我想做的是从每首歌曲中提取“艺术家”字符串，然后删除所有重复的字符串，然后将其输出到 HTML 文件中；最好以一种在找到新版本的 .xml 时自动刷新的方式，从而保持更新的文件，但如果这过于复杂，那很好。

我已经研究过用 jQuery 做这件事的方法，并且我已经建议了 PHP，但我不确定哪个更好/更干净；而且我不确定我将如何去做。

非常感谢，

亨利。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T11:58:27.933

你到底想达到什么目的？如果您需要基于 XML 文件定期重新生成的 HTML 文件，那么您可能想要为它编写一个程序（例如，BeautifulSoup Python 库允许您非常轻松地解析 XML/HTML 文件）并在每次运行时运行它需要更新 HTML 文件（您也可以为其设置 cron 作业）。

如果您需要能够动态地从 XML 中获取数据，您可以使用一些 JavaScript 库并从 xml 文件加载 XML，然后将其动态添加到页面中。

例如，这个 Python 程序将解析一个 XML 文件 (file.xml) 并创建一个包含 XML 文件数据的 HTML 文件 (song_information.html)。

```
from BeautifulSoup import BeautifulStoneSoup

f = open("file.xml")
soup = BeautifulStoneSoup(f.read())
f.close()

html = """<!DOCTYPE html>
<html>
<head>
<title>Song information</title>
</head>
<body>
"""

for key in soup.dict.findAll('key'):
    html += "<h1>%s</h1>\n" % key.contents[0]
    html += "<p>%s</p>\n" % key.nextSibling.contents[0]

html += """</body>
</html>
"""

f = open("song_information.html", "w")
f.write(html)
f.close() 
```

它将以下 HTML 写入 song_information.html 文件：

```
<!DOCTYPE html>
<html>
<head>
<title>Song information</title>
</head>
<body>
<h1>Track ID</h1>
<p>457</p>
<h1>Name</h1>
<p>Love me do</p>
<h1>Artist</h1>
<p>The Beatles</p>
<h1>Album Artist</h1>
<p>The Beatles</p>
<h1>Composer</h1>
<p>John Lennon/Paul McCartney</p>
<h1>Album</h1>
<p>The Beatles No.1</p>
<h1>Genre</h1>
<p>Varies</p>
<h1>Kind</h1>
<p>AAC audio file</p>
</body>
</html> 
```

当然，这是简化的。如果您需要实现 unicode 支持，您需要像这样编辑它：

```
from BeautifulSoup import BeautifulStoneSoup
import codecs

f = codecs.open("file.xml", "r", "utf-8")
soup = BeautifulStoneSoup(f.read())
f.close()

html = """<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Song information</title>
</head>
<body>
"""

for key in soup.dict.findAll('key'):
    html += "<h1>%s</h1>\n" % key.contents[0]
    html += "<p>%s</p>\n" % key.nextSibling.contents[0]

html += """</body>
</html>
"""

f = codecs.open("song_information.html", "w", "utf-8")
f.write(html)
f.close() 
```

此外，您可能需要生成更复杂的 HTML，因此您可能想尝试一些模板系统，例如[Jinja2](http://jinja.pocoo.org/docs/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T12:07:07.303

我会在 PHP 中执行此操作：将您的 XML 放入一个字符串，然后（因为只有您将使用它），将其编码为 JSON，将其解码为 assoc 数组，然后运行 ​​foreach 循环以提取艺术家，最后删除重复项，然后将其另存为 HTML。然后，您可以添加一个 cron 作业来定期运行它，并生成 HTML。运行此代码，然后链接到它给出的结果。

```
$contents = '<key>Blah.... lots of XML';

$xml = simplexml_load_string($contents);
$json = json_encode($xml);
$array = json_decode($json, true);

print_r($array); 
```

一旦我知道了生成的数组的结构，我就可以完成代码了。但它看起来像这样：

```
foreach($array['dict']['artist'] as $artist) {
    $artists[] = $artist;
}

// Now $artists holds an array of the artists

$arists = array_unique($artists);

// Now there are no duplicates

foreach($artists as $artist) {
    $output .= '<p>',$artist,'</p>';
}

// Now each artist is put in it's own paragraph.

// Either output the output
echo $output;

// Or save it to a file (in this case, 'artists.html')

$fh = fopen('artists.html', 'w') or die("Can't open file");
fwrite($fh, $output);
fclose($fh); 
```

由于第一个循环中的行需要进行一些调整，因此这并不完全有效`foreach`，但这是一个起点。

# asp.net - 如何使用带有垂直滚动的转发器控件修复表头？

> ID：10072770
> 
> 赞同：1
> 
> 时间：2012-04-09T11:52:11.670
> 
> 标签：asp.net, css, vb.net

当我向下滚动时，我必须修复表的标题，我想看到列标题直到记录结束。我做了这个，但我面临一个问题。我从数据库中获取数据，这是一个动态数据，所以当我在表格中显示它时，布局变得很奇怪。因为如果有一列超过 1000 个单词会改变它的宽度，而我用百分比提到表格单元格宽度。我如何解决标题保留在顶部的问题，并且布局不会受到任何数据的干扰。我不想使用 jQuery

```
.gridScrollDiv
{
border:1px solid #CCCCCC;
height: 500px;
overflow: scroll;
overflow-x: hidden;
}

<div class="gridScrollDiv">
    <table id="tblData" class="grid" style="width: 100%;" cellpadding="0">
        <thead style="position:absolute;">
            <tr>
                <th style="width:40%;">
                    Code
                </th>
                <th style="width:40%;">
                    Description
                </th>
                <th style="width:20%;">
                    Date
                </th>
            </tr>
        </thead>
        <tbody>
            <asp:Repeater ID="rptLoation" runat="server">
                <ItemTemplate>
                    <tr>
                        <td style="width:40%; word-wrap:breake-word;">
                            <%# DataBinder.Eval(Container.DataItem, "Code")%>
                        </td>
                        <td style="width:40%; word-wrap:breake-word;">
                            <%# DataBinder.Eval(Container.DataItem, "Description")%>
                        </td>
                        <td style="width:20%; word-wrap:breake-word;">
                            <%# DataBinder.Eval(Container.DataItem, "RegistrationDate")%>
                        </td>
                    </tr>
                </ItemTemplate>
            </asp:Repeater>
        </tbody>
    </table>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T13:52:29.330

您可以使用如下代码。我已经修改了css。

```
.gridScrollDiv
    {
        border: 1px solid #CCCCCC;
        height: 500px;
        overflow-y: scroll;
    } 
```

从中继器中取出标题。

```
<table style="width: 100%;">
    <tr style="font-weight: bold;">
        <tr>
            <td style="width: 40%; text-align: left">
                Code
            </td>
            <td style="width: 40%; text-align: left">
                Description
            </td>
            <td style="width: 20%; text-align: left">
                Date
            </td>
        </tr>
</table>
<div class="gridScrollDiv">
    <asp:Repeater ID="rptLoation" runat="server">
        <HeaderTemplate>
            <table style="width: 100%;">
        </HeaderTemplate>
        <ItemTemplate>
            <tr>
                <td style="width: 40%; word-wrap: breake-word;">
                   <div style="width: 350px; overflow-x: scroll;"> 
                   <%# DataBinder.Eval(Container.DataItem, "Code")%>
                   </div>
                </td>
                <td style="width: 40%; word-wrap: breake-word;">
                     <div style="width: 350px; overflow-x: scroll;">
                    <%# DataBinder.Eval(Container.DataItem, "Description")%>
                    </div>
                </td>
                <td style="width: 20%; word-wrap: breake-word;">
                    <div style="width: 350px; overflow-x: scroll;">
                    <%# DataBinder.Eval(Container.DataItem, "RegistrationDate")%>
                    </div>

                </td>
            </tr>
        </ItemTemplate>
        <FooterTemplate>
            </table>
        </FooterTemplate>
    </asp:Repeater>
</div> 
```

这可能会解决您的目的....

# javascript - 如何通过 Javascript 从 Gmail 源代码访问 VIEW_DATA 变量

> ID：10072771
> 
> 赞同：1
> 
> 时间：2012-04-09T11:52:12.290
> 
> 标签：javascript, gmail

当您检查 Gmail 的客户端源代码时。有一个`VIEW_DATA`变量包含许多与用户数据相关的东西。是否可以通过 Javascript 访问这些数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T13:02:46.620

看起来在使用后的某个时间点`VIEW_DATA`被重置为`undefined`，也许是为了节省内存。Gmail 似乎将几乎所有东西都整齐地隐藏在封闭中，这使得从全球环境中获取它变得困难。

一种可能（<em>但脆弱）的方法是在 DOM 中查询定义的`<script>`元素`VIEW_DATA`，这将为您提供原始脚本，让您`eval()`在自己的上下文中使用它。例如：

```
// get all of the <script> elements on the page
var scripts = document.getElementsByTagName( 'script' ),
    thisScript, varViewDataPos, viewDataScript, viewData
;

// loop through each one looking for VIEW_DATA being defined
for( var i = 0; i < scripts.length; i++ ) {
  thisScript = scripts[ i ].textContent;
  varViewDataPos = thisScript.indexOf( 'var VIEW_DATA=' );

  if( varViewDataPos >= 0 ) {
    // might as well toss everything before VIEW_DATA is defined
    viewDataScript = thisScript.slice( varViewDataPos );
    break;
  }
}

// eval what we found (if anything), but in a closure to avoid polluting
// the global namespace
viewData = ( function( script ) {
  eval( script );
  return VIEW_DATA;
} )( viewDataScript );

console.log( viewData || 'Oops, script not found.' ); 
```

就像我说的那样，就像任何屏幕抓取一样，这非常脆弱。如果谷歌在你周围移动任何东西，你可能会发现自己突然评估你不想要的东西，比如最终会破坏页面的函数调用。需要您自担风险使用它。

您可能会发现最终其他方法（例如尝试在 DOM 中查找您要查找的数据）更为明智。

# c++ - QtWebKit 2.2 加载特定网站时的段错误

> ID：10072774
> 
> 赞同：1
> 
> 时间：2012-04-09T11:52:24.737
> 
> 标签：c++, qt, qtwebkit

在过去的几个月里，我一直在组装我自己的基于 QtWebKit 的浏览器（[WildFox](http://www.mayaposch.com/wildfox.php)，BSD 许可），这是一次非常愉快的体验。然而，我注意到奇怪的崩溃，基本上从一开始就是这样。昨天，当它无法重复加载我的个人网站 www.mayaposch.com 时，我决定深入研究这些崩溃。

事件顺序如下：我使用`load()`or`setUrl()`告诉`QWebView`元素加载[http://www.mayaposch.com](http://www.mayaposch.com)，`loadFinished()`返回 false，表示页面加载过程中出现问题，然后应用程序分段错误。

我正在使用 Qt 4.8（最新的 SDK），发布和调试库（动态）。

使用 gdb 运行调试构建时的堆栈跟踪：

```
0   WTF::HashTable<WTF::RefPtr<WebCore::ResourceLoader>, std::pair<WTF::RefPtr<WebCore::ResourceLoader>, WTF::RefPtr<WebCore::SubstituteResource> >, WTF::PairFirstExtractor<std::pair<WTF::RefPtr<WebCore::ResourceLoader>, WTF::RefPtr<WebCore::SubstituteResource> > >, WTF::PtrHash<WTF::RefPtr<WebCore::ResourceLoader> >, WTF::PairHashTraits<WTF::HashTraits<WTF::RefPtr<WebCore::ResourceLoader> >, WTF::HashTraits<WTF::RefPtr<WebCore::SubstituteResource> > >, WTF::HashTraits<WTF::RefPtr<WebCore::ResourceLoader> > >::isEmpty() const D:\Dev\Qt\SDK\Desktop\Qt\4.8.0\mingw\bin\QtWebKitd4.dll 0   0xbcd036e   
1   WTF::HashMap<WTF::RefPtr<WebCore::ResourceLoader>, WTF::RefPtr<WebCore::SubstituteResource>, WTF::PtrHash<WTF::RefPtr<WebCore::ResourceLoader> >, WTF::HashTraits<WTF::RefPtr<WebCore::ResourceLoader> >, WTF::HashTraits<WTF::RefPtr<WebCore::SubstituteResource> > >::isEmpty() const D:\Dev\Qt\SDK\Desktop\Qt\4.8.0\mingw\bin\QtWebKitd4.dll 0   0xbcc7315   
2   WebCore::DocumentLoader::cancelPendingSubstituteLoad(WebCore::ResourceLoader*)  D:\Dev\Qt\SDK\Desktop\Qt\4.8.0\mingw\bin\QtWebKitd4.dll 0   0xb3cbb96   
3   WebCore::ResourceLoader::didCancel(WebCore::ResourceError const&)   D:\Dev\Qt\SDK\Desktop\Qt\4.8.0\mingw\bin\QtWebKitd4.dll 0   0xb62277f   
4   WebCore::SubresourceLoader::didCancel(WebCore::ResourceError const&)    D:\Dev\Qt\SDK\Desktop\Qt\4.8.0\mingw\bin\QtWebKitd4.dll 0   0xb75859c   
5   WebCore::ResourceLoader::cancel(WebCore::ResourceError const&)  D:\Dev\Qt\SDK\Desktop\Qt\4.8.0\mingw\bin\QtWebKitd4.dll 0   0xb622900   
6   WebCore::ResourceLoader::cancel()   D:\Dev\Qt\SDK\Desktop\Qt\4.8.0\mingw\bin\QtWebKitd4.dll 0   0xb62285a   
7   WebCore::cancelAll(WTF::HashSet<WTF::RefPtr<WebCore::ResourceLoader>, WTF::PtrHash<WTF::RefPtr<WebCore::ResourceLoader> >, WTF::HashTraits<WTF::RefPtr<WebCore::ResourceLoader> > > const&) D:\Dev\Qt\SDK\Desktop\Qt\4.8.0\mingw\bin\QtWebKitd4.dll 0   0xb3c8725   
8   WebCore::DocumentLoader::stopLoadingSubresources()  D:\Dev\Qt\SDK\Desktop\Qt\4.8.0\mingw\bin\QtWebKitd4.dll 0   0xb3cbfa4   
9   WebCore::DocumentLoader::stopLoading()  D:\Dev\Qt\SDK\Desktop\Qt\4.8.0\mingw\bin\QtWebKitd4.dll 0   0xb3ca9e0   
10  WebCore::FrameLoader::stopAllLoaders(WebCore::ClearProvisionalItemPolicy)   D:\Dev\Qt\SDK\Desktop\Qt\4.8.0\mingw\bin\QtWebKitd4.dll 0   0xb2f3694   
11  WebCore::FrameLoader::continueLoadAfterNavigationPolicy(WebCore::ResourceRequest const&, WTF::PassRefPtr<WebCore::FormState>, bool) D:\Dev\Qt\SDK\Desktop\Qt\4.8.0\mingw\bin\QtWebKitd4.dll 0   0xb2f7d29   
12  WebCore::FrameLoader::callContinueLoadAfterNavigationPolicy(void*, WebCore::ResourceRequest const&, WTF::PassRefPtr<WebCore::FormState>, bool)  D:\Dev\Qt\SDK\Desktop\Qt\4.8.0\mingw\bin\QtWebKitd4.dll 0   0xb2f76a1   
13  WebCore::PolicyCallback::call(bool) D:\Dev\Qt\SDK\Desktop\Qt\4.8.0\mingw\bin\QtWebKitd4.dll 0   0xb56e06c   
14  WebCore::PolicyChecker::continueAfterNavigationPolicy(WebCore::PolicyAction)    D:\Dev\Qt\SDK\Desktop\Qt\4.8.0\mingw\bin\QtWebKitd4.dll 0   0xb56ed26   
15  WebCore::FrameLoaderClientQt::callPolicyFunction(void (WebCore::PolicyChecker::*)(WebCore::PolicyAction), WebCore::PolicyAction)    D:\Dev\Qt\SDK\Desktop\Qt\4.8.0\mingw\bin\QtWebKitd4.dll 0   0xb141188   
16  WebCore::FrameLoaderClientQt::dispatchDecidePolicyForNavigationAction(void (WebCore::PolicyChecker::*)(WebCore::PolicyAction), WebCore::NavigationAction const&, WebCore::ResourceRequest const&, WTF::PassRefPtr<WebCore::FormState>)  D:\Dev\Qt\SDK\Desktop\Qt\4.8.0\mingw\bin\QtWebKitd4.dll 0   0xb146959   
17  WebCore::PolicyChecker::checkNavigationPolicy(WebCore::ResourceRequest const&, WebCore::DocumentLoader*, WTF::PassRefPtr<WebCore::FormState>, void (*)(void*, WebCore::ResourceRequest const&, WTF::PassRefPtr<WebCore::FormState>, bool), void*)   D:\Dev\Qt\SDK\Desktop\Qt\4.8.0\mingw\bin\QtWebKitd4.dll 0   0xb56e7ef   
18  WebCore::FrameLoader::loadWithDocumentLoader(WebCore::DocumentLoader*, WebCore::FrameLoadType, WTF::PassRefPtr<WebCore::FormState>) D:\Dev\Qt\SDK\Desktop\Qt\4.8.0\mingw\bin\QtWebKitd4.dll 0   0xb2f25e9   
19  WebCore::FrameLoader::loadWithNavigationAction(WebCore::ResourceRequest const&, WebCore::NavigationAction const&, bool, WebCore::FrameLoadType, WTF::PassRefPtr<WebCore::FormState>)    D:\Dev\Qt\SDK\Desktop\Qt\4.8.0\mingw\bin\QtWebKitd4.dll 0   0xb2f1fc5   
20  WebCore::FrameLoader::loadURL(WebCore::KURL const&, WTF::String const&, WTF::String const&, bool, WebCore::FrameLoadType, WTF::PassRefPtr<WebCore::Event>, WTF::PassRefPtr<WebCore::FormState>) D:\Dev\Qt\SDK\Desktop\Qt\4.8.0\mingw\bin\QtWebKitd4.dll 0   0xb2f17f1   
21  WebCore::FrameLoader::loadFrameRequest(WebCore::FrameLoadRequest const&, bool, bool, WTF::PassRefPtr<WebCore::Event>, WTF::PassRefPtr<WebCore::FormState>, WebCore::ReferrerPolicy) D:\Dev\Qt\SDK\Desktop\Qt\4.8.0\mingw\bin\QtWebKitd4.dll 0   0xb2f1086   
22  WebCore::FrameLoader::urlSelected(WebCore::FrameLoadRequest const&, WTF::PassRefPtr<WebCore::Event>, bool, bool, WebCore::ReferrerPolicy, WebCore::ShouldReplaceDocumentIfJavaScriptURL)    D:\Dev\Qt\SDK\Desktop\Qt\4.8.0\mingw\bin\QtWebKitd4.dll 0   0xb2ece3e   
23  WebCore::FrameLoader::changeLocation(WTF::PassRefPtr<WebCore::SecurityOrigin>, WebCore::KURL const&, WTF::String const&, bool, bool, bool)  D:\Dev\Qt\SDK\Desktop\Qt\4.8.0\mingw\bin\QtWebKitd4.dll 0   0xb2ec9de   
24  WebCore::ScheduledURLNavigation::fire(WebCore::Frame*)  D:\Dev\Qt\SDK\Desktop\Qt\4.8.0\mingw\bin\QtWebKitd4.dll 0   0xbc30de8   
25  WebCore::NavigationScheduler::timerFired(WebCore::Timer<WebCore::NavigationScheduler>*) D:\Dev\Qt\SDK\Desktop\Qt\4.8.0\mingw\bin\QtWebKitd4.dll 0   0xb3cd565   
26  WebCore::Timer<WebCore::NavigationScheduler>::fired()   D:\Dev\Qt\SDK\Desktop\Qt\4.8.0\mingw\bin\QtWebKitd4.dll 0   0xbc7adb2   
27  WebCore::ThreadTimers::sharedTimerFiredInternal()   D:\Dev\Qt\SDK\Desktop\Qt\4.8.0\mingw\bin\QtWebKitd4.dll 0   0xb4a84e6   
28  WebCore::ThreadTimers::sharedTimerFired()   D:\Dev\Qt\SDK\Desktop\Qt\4.8.0\mingw\bin\QtWebKitd4.dll 0   0xb4a8433   
29  WebCore::SharedTimerQt::timerEvent(QTimerEvent*)    D:\Dev\Qt\SDK\Desktop\Qt\4.8.0\mingw\bin\QtWebKitd4.dll 0   0xb686a5a   
30  QObject::event  qobject.cpp 1157    0x6a22499a  
31  QApplicationPrivate::notify_helper  qapplication.cpp    4550    0xa4c020    
32  QApplication::notify    qapplication.cpp    3932    0xa49973    
33  QCoreApplication::notifyInternal    qcoreapplication.cpp    876 0x6a213252  
34  QCoreApplication::sendEvent qcoreapplication.h  231 0x6a283f54  
35  QEventDispatcherWin32::event    qeventdispatcher_win.cpp    1135    0x6a23ac60  
36  QApplicationPrivate::notify_helper  qapplication.cpp    4550    0xa4c020    
37  QApplication::notify    qapplication.cpp    3932    0xa49973    
38  QCoreApplication::notifyInternal    qcoreapplication.cpp    876 0x6a213252  
39  QCoreApplication::sendEvent qcoreapplication.h  231 0x6a283f54  
40  QCoreApplicationPrivate::sendPostedEvents   qcoreapplication.cpp    1500    0x6a21416d  
41  qt_internal_proc    qeventdispatcher_win.cpp    496 0x6a238a2f  
42  USER32!IsDialogMessageW C:\Windows\syswow64\user32.dll  0   0x75a46238  
43  operator+       0   0x7113ae    
44  USER32!AllowForegroundActivation    C:\Windows\syswow64\user32.dll  0   0x75a468ea  
45  qt_fast_timer_proc  qeventdispatcher_win.cpp    428 0x6a2387c8  
46  USER32!GetMessageExtraInfo  C:\Windows\syswow64\user32.dll  0   0x75a47d31  
47  ??      0 
```

故障线（拆卸）表示为：

```
0xbcd036e  <+0x0006>         mov    0xc(%eax),%eax 
```

这是内部`QtWebKit`故障吗？从堆栈跟踪我会说它是，但我缺乏对其内部的了解来说明出了什么问题。崩溃最常发生在我的个人网站上，但其他人也报告说它在其他网站上也崩溃了，包括在中断加载时（例如，在加载完成之前单击链接）。

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T12:32:52.237

在与 Net147 (Jonathan Liu) 讨论 #Qt @ Freenode IRC 后，确定这确实是由于 webkit 中的一个错误：[https ://bugs.webkit.org/show_bug.cgi?id=83565](https://bugs.webkit.org/show_bug.cgi?id=83565)

> 崩溃是由函数 ResourceLoader::didCancel() 中 Source/WebCore/loader/ResourceLoader.cpp 中的空指针取消引用引起的。m_documentLoader->cancelPendingSubstituteLoad(this) 被调用而不检查 m_documentLoader 是否为空。

我发现最有趣的是我的代码触发了这个错误，而 Qt 浏览器演示没有。任何愿意弄清楚为什么会这样的人都非常欢迎:)

# android - Android 中哪个列表视图的可用性更好？

> ID：10072782
> 
> 赞同：1
> 
> 时间：2012-04-09T11:53:21.130
> 
> 标签：android

我想在 android 应用程序中添加一个列表视图。在列表视图中必须是文本和图片区域。为了更好的可用性，我必须将图片放在文本左侧还是右侧？

*   图片 - 文字
*   **或者**
*   文字 - 图片

例如：

1.  联系人姓名 - 联系人照片
2.  公司名称-公司标志
3.  拍摄照片位置 - 照片预览....等

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T12:01:42.250

您可以根据您的要求自定义列表视图，无论您想采用哪种方式，完全取决于您，并且没有这样的偏好。但总的来说，我观察到的是照片在左边，文本在后面，看起来更美观。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T12:36:33.410

虽然没有这样的规则，但最好把图片放在左边，文字放在图片右边，因为**一张图说一千多个单词：** 要实现这一点，您需要创建自定义列表视图。请参阅[自定义 ListView 教程](http://www.intransitione.com/blog/advanced-listview-populating-a-list-with-images-and-text/)

如果你做同样的事情（左边的图片和右边的文字），那么你可能会得到如下图所示的结果

![在此处输入图像描述](../Images/2b5a424743fb303dedb1c2157377f330.png)

# android - 未在列表视图单击中启动另一个活动

> ID：10072785
> 
> 赞同：1
> 
> 时间：2012-04-09T11:53:39.727
> 
> 标签：android, listview, android-listview

这是我的代码。我在这里使用一些数组数据填充列表视图。当我点击列表时，我可以使用 Toast 来检测它。但我无法调用另一个活动。代替 Toast 事件。
公共类 ListView 扩展 ListActivity {

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setListAdapter(new ArrayAdapter<String>(this, R.layout.foodjoint, RESTAURANTS));

    android.widget.ListView lv = getListView();
    lv.setTextFilterEnabled(true);

    lv.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            // When clicked, show a toast with the TextView text
            Toast.makeText(getApplicationContext(), ((TextView) view).getText(),
                    Toast.LENGTH_SHORT).show();
            myClickHandler();
        }
    });

    //      ListView restuList=ListView();

}

static final String[] RESTAURANTS = new String[] {
    "Restaurant 1", "Restaurant 2", "Restaurant 3", "Restaurant 4", "Restaurant 5",
    "Restaurant 6", "Restaurant 7", "Restaurant 8", "Restaurant 9", "Restaurant 10",
    "Restaurant 11", "Restaurant 12", "Restaurant 13", "Restaurant 14", "Restaurant 15"
};
public void myClickHandler() {
    finish();
    Intent gotoLIst=new Intent(ListView.this,MenuActivity.class);
    startActivity(gotoLIst);
} 
```

这是我的 XmL 文件

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@color/AliceBlue "
    android:padding="10dp"
    android:textSize="16sp"
    android:focusableInTouchMode="false"
    android:clickable="false"
    android:focusable="false" > 
```

我需要调用另一个活动@listView onitemClick。

实际上，我使用了另一个也使用一些列表视图的活动。该活动包含一些错误。这就是它不起作用的原因。感谢 Luksprog 帮助我找到答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T11:57:00.117

开始新的之后，您可能会想要`finish()`当前`Activity`的：

```
public void myClickHandler() {
    Intent gotoLIst=new Intent(ListView.this,MenuActivity.class);
    startActivity(gotoLIst);
    finish();
} 
```

# magento - 样式化 Magento 块

> ID：10072787
> 
> 赞同：0
> 
> 时间：2012-04-09T11:53:58.840
> 
> 标签：magento

我已使用以下代码将新产品块添加到我的主页

```
<block type="catalog/product_new" name="homepage.newproducts" as="homepageNewproducts" template="catalog/product/new.phtml"> 
```

我还为此自定义布局设置了产品和列数，如下所示

```
<action method="setProductsCount"><count>6</count></action>
<action method="addColumnCountLayoutDepend"><layout>homepage_layout</layout><count>3</count></action> 
```

我的问题是，是否有一种简单的方法可以将标记或类或标识符添加到块中以使我能够对其进行样式设置。我知道我可以使用magento应用的body类，也许是products-grid类，但我真正想做的是为3/4/5列网格创建一些通用样式，然后能够简单地更改xml到新的列数，并在前端正确显示。

我希望这是有道理的？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-09T12:11:14.990

试试那些：

```
<action method="setHtmlClass"><value>class</value></action>
<action method="setElementClass"><class>class</class></action>
<action method="setValueProperties"><value>class="class"</value></action>
<action method="setGridHtmlClass"><value>class</value></action> 
```

如果这不起作用，另一种选择是：

1.  [用您的自定义重写覆盖](http://magedev.com/2009/06/03/magento-overriding-model-block-or-helper/)块目录/product_new。
2.  将方法 addClass 添加到重写的类中。
3.  在模板调用方法getClass。

# android - 由于数据库关闭，无法恢复活动

> ID：10072791
> 
> 赞同：0
> 
> 时间：2012-04-09T11:54:29.950
> 
> 标签：android, android-cursor

我正在使用 rawQuery 方法将数据列表作为 Cursor 并使用 startManagingCursor() 和 stopManagingCursor() 方法。Activity1 和 Activity2 没有问题，但是当我尝试从 Activity3 转到 Activity2 时，它说`04-09 17:37:59.629: E/AndroidRuntime(6509): java.lang.RuntimeException: Unable to resume activity {com.nepways.nlocate/com.nepways.nlocate.BusinessOrganizationActivity}: java.lang.IllegalStateException: database /data/data/com.nepways.nlocate/databases/nLocateDatabaseNew.db already closed` 有人有帮助吗？
**更新代码**

```
 public class BusinessActivity extends Activity implements OnItemClickListener {

    private ArrayList<Business> businessList = new ArrayList<Business>();
    private BusinessListAdapter businessListAdapter;
    private ListView lvBusiness;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.business_list);

        businessList = getIntent().getParcelableArrayListExtra("businessList");

        businessListAdapter = new BusinessListAdapter(this, businessList);

        lvBusiness = (ListView) findViewById(R.id.lvBusiness);
        lvBusiness.setAdapter(businessListAdapter);
//      lvBusiness.setOnItemClickListener(this);
    }

    @Override
    public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
        // TODO Auto-generated method stub

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        menu.add("Search").setIcon(R.drawable.ab_search).setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);
//      return super.onCreateOptionsMenu(menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        if(item.getTitle().toString().equalsIgnoreCase("Search")) {
            startActivity(new Intent(this, SearchActivity.class));
        }
        return super.onOptionsItemSelected(item);
    }

    @Override
    protected void onDestroy() {
        super.onDestroy();
    }

    @Override
    protected void onResume() {
        super.onResume();
    }

    @Override
    protected void onPause() {
        super.onPause();
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T11:56:41.177

请打开您的数据库，清楚地提到您的数据库已关闭。

打开数据库调用 `getReadableDatabase()`

# mysql - MySQL 基本命令

> ID：10072796
> 
> 赞同：0
> 
> 时间：2012-04-09T11:54:49.607
> 
> 标签：mysql, sql

我只是 MySQL 的新手，我想编写一个 SELECT 语句，返回居住在印第安纳州、俄亥俄州、密歇根州和伊利诺伊州的客户的客户 ID 和客户名称（字母顺序），其名称以字母 A 开头或 B。

这是使用 DESCRIBE CUSTOMER_TBL 的 CUSTOMER_TBL 结构；

```
 Name                         Null?                      Type
    -------------------------------------------------------------
   CUST_ID                      NOT NULL                   VARCHAR2(10)
   CUST_NAME                    NOT NULL                   VARCHAR2(30)
   CUST_ADDRESS                 NOT NULL                   VARCHAR2(20)
   CUST_CITY                    NOT NULL                   VARCHAR2(12)
   CUST_STATE                   NOT NULL                   CHAR(2)
   CUST_ZIP                     NOT NULL                   CHAR2(5)
   CUST_PHONE                                              NUMBER(10)
   CUST_FAX                                                NUMBER(10) 
```

这是我的解决方案。我只需要知道我是否正确。谢谢

```
 SELECT CUST_ID,CUST_NAME FROM CUSTOMER_TBL
   WHERE IN('Indiana','Ohio','Ohio','Michigan','Illinois') AND WHERE LIKE(A% OR B%)
   ORDER BY CUST_ID,CUST_NAME 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T11:57:25.993

```
SELECT CUST_ID,CUST_NAME FROM CUSTOMER_TBL
WHERE CUST_STATE IN('Indiana','Ohio','Ohio','Michigan','Illinois') AND (CUST_NAME LIKE 'A%' OR CUST_NAME LIKE 'B%') 
ORDER BY CUST_ID,CUST_NAME 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T11:58:18.600

你`CUST_STATE`是一`CHAR(2)`列，所以我假设它包含州代码，而不是州名。因此，您应该使用州代码，而不是印第安纳州、俄亥俄州等：

```
SELECT CUST_ID, CUST_NAME
FROM CUSTOMER_TBL
WHERE CUST_STATE IN ('IN','OH','MI','IL') AND (
    CUST_NAME LIKE 'A%' OR
    CUST_NAME LIKE 'B%'
)
ORDER BY CUST_NAME 
```

纠正州代码，以防错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T11:58:42.437

您的查询中有几处错误：

*   您应该先尝试一下，而不仅仅是问它是否正确。
*   在`WHERE`语句中嵌套条件时，不要重复 where itslef。
*   您应该提及您尝试与条件匹配的列。

因此，您的查询应如下所示：

```
SELECT CUST_ID, CUST_NAME 
FROM CUSTOMER_TBL
WHERE CUSTOMER_City IN('Indiana','Ohio','Ohio','Michigan','Illinois') 
    AND ( CUST_NAME LIKE 'A%' OR CUST_NAME LIKE 'B%' )
ORDER BY CUST_ID,CUST_NAME 
```

# java - 使用什么 DS 在 Java 中的字符串集中搜索字符串？

> ID：10072799
> 
> 赞同：1
> 
> 时间：2012-04-09T11:54:53.210
> 
> 标签：java, data-structures

我有几个字符串（大约 100 个），我想将它们存储在数据结构中，然后我想在其中搜索特定字符串以检查它是否存在。在这种情况下，Java 中的 DS 最适合快速搜索。

实际用例是我想为书籍创建一个目录，并且需要找出是否存在特定的标题。

所有的字符串都是唯一的。我不想自己实现任何 DS，但想使用 Java 中已经存在的任何集合。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T12:02:38.790

显而易见的选择是使用[Set](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html)接口的实现。这公开了一个方便的[contains](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html#contains%28java.lang.Object%29)方法，您可以使用它来测试特定标题是否存在。您还可以使用 Map 的实现，例如[HashMap](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)将 String 与对象相关联。这将允许您存储有关您的图书的信息并轻松访问它。

使用 Set 或 Map 的优点是搜索特定键非常有效。集合中不能有重复的项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T11:59:30.143

为什么不使用任何**List**来存储所有字符串并使用**contains()**方法来查找它是否存在于您的**List**中。

你甚至可以使用**Set**但在这种情况下你的字符串必须是唯一的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T11:59:04.327

使用[Set](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html)实现。该`contains`方法将告诉您是否存在特定`String`标题

# sharepoint-2010 - 我在 SharePoint 2010 中看不到匿名访问菜单

> ID：10072802
> 
> 赞同：2
> 
> 时间：2012-04-09T11:54:54.647
> 
> 标签：sharepoint-2010, anonymous-access

我很困惑，因为在 SharePoint 2010 的中央管理面板中**启用匿名访问**后，我在“**网站设置**” -> “**网站权限**”中看不到**匿名访问**

 ****任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T12:36:05.133

当您`Enable to anonymous access`从 Web 应用程序的管理中心打勾时。

`Anonymous Access`比在功能区中找到选项卡更容易。

您应该进入您的 Web 应用程序，而不是单击站点操作（功能区）-> 站点权限->（单击功能区的编辑选项卡），您可能会发现`Anonymous Access`选项卡

![在此处输入图像描述](../Images/ca9ca78082539079da0c421b86325bfb.png)

啤酒花它的帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-16T09:28:56.770

转到**CENTRAL ADMIN** --> 选择您的 Web 应用程序 --> 单击**Authentication Providers** -- 单击**Default**，然后选中复选框 **Enable anonymous access**单击 SAVE.. 在此之后重新启动您的站点，您应该可以看到“匿名访问”****

# java - 如何获得不同的随机数？

> ID：10072807
> 
> 赞同：0
> 
> 时间：2012-04-09T11:55:21.053
> 
> 标签：java, android

> **可能重复：**
> [非重复随机数数组](https://stackoverflow.com/questions/9052519/non-repeating-random-number-array)

我有一个包含许多元素的字符串数组（因为我还没有完成应用程序，我不知道确切的数字），大概是 200 个。我想得到这个数组的 20 个随机元素，但要确定每个随机元素只出现一次，例如，我不想在这 20 个元素中加入第 5 个元素（例如）两次。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T12:09:03.793

我假设它是Java。
如果这是正确的，您可以执行以下操作：

```
public void getRandomElementsOfArray(String[] array)
{
    int maxLength = 200; // Insert length of your array
    int[] usedRandoms;
    String[] randomElements = String[20];
    int random = new Random().nextInt();

    for(int i = 0; i<21; i++) // Loops are NOT my strongest point. you'd better check this
    {
        while(random > maxLength || random < 0 || !Arrays.asList(usedRandoms).contains(random)) // Loop while random is smaller then 0 (the smallest index) or bigger then the length of your array or already used
        {
            random = new Random();
        }

        randomElements[i] = array[random];
        usedRandoms[i] = random;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T12:12:11.980

我建议你遵循一个相当直接的策略。您需要一个已经选择的集合元素 - 在您的情况下，HashSet 可能是合适的，给定 X 的字符串数组大小：

*   选择 0 到 X-1 之间的元素
*   检查它是否在 Selected set 中，如果是则重新开始
*   将其添加到选定集
*   如果你选择了足够多的元素突破，否则重新开始

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T12:13:06.673

找到下面的代码生成随机数

```
/** Generate 10 random integers in the range 0..99\. */
public final class RandomInteger {

public static final void main(String... aArgs){
log("Generating 10 random integers in range 0..99.");

//note a single Random object is reused here
Random randomGenerator = new Random();
for (int idx = 1; idx <= 10; ++idx){
  int randomInt = randomGenerator.nextInt(100);
  log("Generated : " + randomInt);
}

log("Done.");
}

 private static void log(String aMessage){
System.out.println(aMessage);
}
} 
```

# javascript - cakePhp 中的 Ajax 自动完成- NetworkError: 404 Not Found

> ID：10072809
> 
> 赞同：0
> 
> 时间：2012-04-09T11:55:34.453
> 
> 标签：javascript, ajax, cakephp, jquery

我正在尝试通过在我的视图页面中使用 jquery UI 库（jquery 自动完成）来进行 ajax 调用，以根据用户输入获取部门名称。自动完成功能看起来像

```
$( "#auto_complete" ).autocomplete({
        source: function( request, response ) {
            $.ajax({
                url:  "/employees/getAddress",
                dataType: "jsonp",
                data: {
                    featureClass: "P",
                    style: "full",
                    maxRows: 12,
                    name_startsWith: request.term
                },
                success: function( data ) {

                    response( $.map( data.geonames, function( item ) {
                        return {
                            label: item.name,
                            value: item.id
                        }
                    }));
                }
            });
        },
        minLength: 2,
        select: function( event, ui ) {
            log( ui.item ?
                "Selected: " + ui.item.label :
                "Nothing selected, input was " + this.value);
        },
        open: function() {
            $( this ).removeClass( "ui-corner-all" ).addClass( "ui-corner-top" );
        },
        close: function() {
            $( this ).removeClass( "ui-corner-top" ).addClass( "ui-corner-all" );
        }
    }); 
```

在这里，我正在呼吁采取行动，称为 getAddress()

看起来像

```
 class EmployeesController extends AppController {

//var $components = array('Autocomplete');
public $components = array('RequestHandler');
var $helpers = array('Javascript', 'Ajax');
    /**
     * index method
     *
     * @return void
     */
    //var $helpers = array('Ajax');
 public function getAddress() {
        $this->log($this->params, 'debug');
        $this->layout = 'ajax';
        $departments = $this->Department->find('all', array(
        'conditions'=>array('Department.name LIKE'=>$this->params['url']['q'].'%'),
        'fields'=>array('name', 'id')));
        $this->log($departments, 'debug');
        //$this->set('departments', $departments);
        $this->set(compact('departments'));
} 
```

但是每当我进行ajax调用时，我都会出错

**“网络错误：404 未找到 - [http://localhost/employees/getAddress?callback=jQuery1710012251482368207167_1333972423088&featureClass=P&style=full&maxRows=12&name_startsWith=sal&_=1333972426249](http://localhost/employees/getAddress?callback=jQuery1710012251482368207167_1333972423088&featureClass=P&style=full&maxRows=12&name_startsWith=sal&_=1333972426249) ”**

如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T12:06:10.190

我猜您在 url 中缺少项目文件夹，请尝试：

```
 var webroot = '<?php echo $this->webroot; ?>';
$( "#auto_complete" ).autocomplete({
        source: function( request, response ) {
            $.ajax({
                url:  webroot + "employees/getAddress",
                dataType: "jsonp",
                data: {
                ...... 
```

或者您可以在 layouts/default.ctp 中定义 webroot 并使用它

# asp.net - 如果 2 个或更多用户同时单击同一页面，则其他用户更改登录

> ID：10072812
> 
> 赞同：2
> 
> 时间：2012-04-09T11:55:49.547
> 
> 标签：asp.net

在我的应用程序中，当两个或多个用户登录时，如果他们同时（在确切时间）点击同一页面，那么其他人登录会更改一个人的登录名。我的页面加载事件的代码如下。

```
MembershipUser mUser = Membership.GetUser();

if (mUser != null)
{
    aspUserId.Value = mUser.ProviderUserKey.ToString();
    DBHandler dbHandler = new DBHandler();
    SqlCommand cmd = new SqlCommand();
    cmd.Parameters.AddWithValue("@AspNetUserID", mUser.ProviderUserKey);
    string sPMSUserId = dbHandler.GetSingleValue(cmd, "get_PMSUserId");
    hdnUserID.Value = sPMSUserId;

}
else
{
    Response.Redirect("~/index.aspx");
} 
```

hdnUserID 用于将值传递给 sqlDatasource 选择语句参数。aspUserId 也是我用来测试用户的 aspnet_UserID 的。我使用检查元素对其进行了测试。我发现它的值被其他用户的 aspnet_UserID 更改了。

在 DBHandler 中，我使用了连接字符串，就像

```
string strconn = ConfigurationManager.ConnectionStrings["strconn"].ConnectionString; 
```

用这样的代码

```
 public string GetSingleValue(SqlCommand sqlcmdWithParameters, string CommandText) 
{ 
    string sReturn = ""; 
    SqlConnection sqlcon = new SqlConnection(strconn); 
    sqlcmdWithParameters.Connection = sqlcon; 
    sqlcmdWithParameters.CommandType = CommandType.StoredProcedure; 
    sqlcmdWithParameters.CommandText = CommandText; 
    try 
    { 
        sqlcon.Open(); 
        sReturn = Convert.ToString(sqlcmdWithParameters.ExecuteScalar()); 
    } 
    catch (Exception ex) 
    { 
        sReturn = "-1"; 
    } 
    finally 
    { 
        sqlcon.Close(); 
    } 
    return sReturn; 
} 
```

最后我找到了问题的原因。是的，这是由于缓存

在 .aspx 页面上，我将 OutputCache 指令作为

```
 <%@ OutputCache Duration ="1" NoStore ="true" VaryByParam ="*" %> 
```

这使我的页面缓存 1 秒。如果另一个页面在 1 秒内发出请求，则即使它是另一个用户的，也会返回缓存中的页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T12:00:42.093

你`DBHandler`看起来像什么？您是否以某种方式为所有数据库工作共享一个连接（例如，该连接是 的静态成员`DBHandler`）？

您在此处发布的代码可能不是问题。您更有可能在没有适当锁定的情况下无意中在请求之间共享资源。

# javascript - 这即检查如何工作？

> ID：10072816
> 
> 赞同：2
> 
> 时间：2012-04-09T11:56:10.053
> 
> 标签：javascript

我在几个在线示例中看到了这种检测 IE 的方法：

```
if (/*@cc_on!@*/false) { // check for Internet Explorer 
```

这是否类似于 IE 在 HTML 中识别的条件注释？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T12:01:41.500

该语句控制IE 中评论内容的[条件编译](http://msdn.microsoft.com/en-us/library/8ka90k2e%28v=vs.85%29.aspx)。如果 IE 看​​到这条评论，它实际上会将评论块的内容编译为纯代码。现在诀窍发生`!`在评论中。

IE 编译`!`就像它被写入源代码一样，因此它将代码处理为`if (!false)`，而所有其他浏览器将其视为`if (false)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-09T07:26:09.057

[我们在这里](http://pipwerks.com/2008/11/25/dealing-with-internet-explorer-in-your-javascript-code/)有一个很好的描述

**条件编译。**

这种方法是目前首选的方法。[Dean Edwards 在他的博客文章Sniff](http://dean.edwards.name/weblog/2007/03/sniff/)中描述了这种方法的瑰宝。据我所知，这是检测 IE 最干净、最可靠的方法。

```
var isMSIE = /*@cc_on!@*/false; 
```

很简单，不是吗？没有用户代理，没有 20 行条件语句和字符串搜索。

这段代码是如何工作的？Internet Explorer 使用 JScript，一种由 Microsoft 开发的专有形式的 JavaScript (ECMAScript)。JScript 有一个称为条件编译的功能，它允许我们在特殊格式的注释中添加特定于 JScript 的 JavaScript。其他 JavaScript 编译器会忽略此代码，认为它是注释，而 JScript 会识别并处理它。

/*@cc_on 开始注释，@*/ 结束注释。

当任何非 IE 浏览器看到 var isMSIE = /*@cc_on!@*/false; 时，它实际上将其视为 var isMSIE = false;。Internet Explorer 的 JScript 会在注释中添加感叹号，表示 IE 会看到 var isMSIE = !false;。请记住，感叹号反转布尔值，所以 !false 等价于 true。

正如 Dean 指出的那样，有一种更简单的方法来编写它（尽管它的可读性略差）：

```
var isMSIE/*@cc_on=1@*/; 
```

如果一个变量在声明时没有赋值，默认情况下它会返回'falsy'（null）。因此，非 IE 浏览器会将此行视为 var isMSIE；而 Internet Explorer 的 JScript 会将其视为 var isMSIE=1; （分配 1 使变量“真实”）。

我更喜欢通过从 isMSIE 中删除 MS 来缩短它，使其简单地为 isIE。注意：最好的做法是给布尔值一个暗示布尔值代表什么的名称，通常采用准问题格式。使用普通的旧 var IE 不会告诉我们变量是布尔值，也不会告诉我们布尔值正在回答什么问题。var isIE 可以。

```
var isIE/*@cc_on=1@*/;
if(isIE){
   //Do something. I suggest downloading Firefox.  ^_^
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T12:01:27.590

[微软](http://msdn.microsoft.com/en-us/library/8ka90k2e%28v=vs.85%29.aspx)对此提供了一些有用的见解。

似乎这个声明告诉脚本浏览器是否支持条件编译，如果支持，则执行后面的任何代码

```
/*@  ...

... @*/ 
```

# html - 禁用java脚本的css

> ID：10072817
> 
> 赞同：0
> 
> 时间：2012-04-09T11:56:22.697
> 
> 标签：html, css

我有一个用 html 编码的日期和时间选择器，我如何禁用这个特定项目的 css 规则？

我的代码如下：

```
<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<title>TaskManager</title>

</head>

<style>
select {  

padding:10px 10px;

width:300px;

background:#262626;

border-bottom: 1px double #171717;

border-top: 1px double #171717;

border-left:1px double #333;

border-right:1px double #333;
}

div.box .mesaj{

padding:7px 7px;

width:285px;

background:#262626;

border-bottom: 1px double #171717;

border-top: 1px double #171717;

border-left:1px double #333;

border-right:1px double #333;

overflow:scroll;

height:150px;

}

div.box .buttonu

{

margin:0 0 10px 0;

padding:5px 7px;

background:#CC0000;

border:0px;

position: relative;

top:5px;

left:320px;

width:100px;

border-bottom: 1px double #660000;

border-top: 1px double #660000;

border-left:1px double #FF0033;

border-right:1px double #FF0033;

}

</style>
<script src="datetimepicker_css.js"></script>

<body>

     <form name="myform" action="/addtasknow.html" method="post">
     <div class="box">

     <h1>Add New Task</h1>
     <label>
     <span>Partner</span>
     <select name="f_friend">
     %body%
     </select>
     </label>
     <label>
     <span>Date and Time</span>
     <input type="Text" id="demo1" maxlength="25" size="25"/>

     <img src="images2/cal.gif" onclick="javascript:NewCssCal ('demo1','yyyyMMdd','dropdown',true,'12')" style="cursor:pointer"/>
     <label>
     <input type="submit" class="buttonu" value="Add Alarm" />
     </div>

</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T12:07:22.730

一个简单的 jquery 技巧就可以做到

```
$('#demo1').addClass('newClass'); 
```

使用您想要的所有属性创建一个新类

```
margin : opx !important; 
```

它将强制 css 将元素设置为 0px 边距。

# java - 比较两个日期的最简单方法是什么

> ID：10072820
> 
> 赞同：-2
> 
> 时间：2012-04-09T11:56:32.027
> 
> 标签：java

> **可能重复：**
> [比较java中的日期](https://stackoverflow.com/questions/2592501/compare-dates-in-java)

我从服务器获取 yyyy-MM-dd 格式的两个日期。我必须在这两个日期之间进行比较。我使用 compareTo() 方法比较两个日期。假设我的服务器将始终以 yyyy-MM-dd 格式返回非空值，那么比较两个日期的更简单方法是什么？

定义方法

```
void compareTwoDates(String startDate, String endDate){
        switch(startDate.compareTo(endDate)){
            case -1:
                //START DATE IS BIGGER THAN END DATE
                System.out.println(endDate+" IS BIGGER THAN "+startDate);
                break;
            case 0:
                //BOTH DATE ARE SAME
                System.out.println("SAME DATE");
                break;
            case 1:
                //END DATE IS BIGGER
                System.out.println(startDate+" IS BIGGER THAN "+endDate);
                break;
        }
    } 
```

使用以下方式调用该方法

```
compareTwoDates("2012-05-06", "2012-04-08");
compareTwoDates("2012-04-09", "2012-04-09");
compareTwoDates("2012-04-09", "2011-05-10"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T12:01:59.563

使用方法[Date.before()](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Date.html#before%28java.util.Date%29)和[Date.after()](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Date.html#after%28java.util.Date%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T12:02:30.670

不要把 String 当作日期来比较……这种方法只会带来痛苦和痛苦。

就像是：

```
 SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
    Date d1 = sdf.parse("2012-04-04");
    Date d2 = sdf.parse("2012-04-05"); 
```

将满足您的需求，然后您可以使用 Date compareTo 方法，它将比较应该比较的日期，而不是作为没有年、月等上下文的字符串值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T12:15:28.203

检查这个样本。

```
 if(date1.after(date2)){
           System.out.println("Date1 is after Date2");
        }
        if(date1.before(date2)){
             System.out.println("Date1 is before Date2");
        }
        if(date1.equals(date2)){
             System.out.println("Date1 is equal Date2");
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T12:02:22.387

使用 java.util.Calendar 类 - before 和 after 将完成工作。

解析字符串使用 java.text.SimpleDateFormat

# scala - 播放表单参数有助于破译编译错误

> ID：10072825
> 
> 赞同：0
> 
> 时间：2012-04-09T11:56:50.803
> 
> 标签：scala, view, playframework, playframework-2.0

我有一个这样定义的控制器：

```
package controllers

import play.api._
import play.api.mvc._
import models.Task
import play.api.data.Form

object Application extends Controller {

  def index = Action {
    // Compiler error on Form
    Ok(views.html.index(List[Task](), Form("label" -> "This is a label")))  
  }

  def tasks = TODO

  def newTask = TODO

  def deleteTask(id: Long) = TODO

} 
```

然后我定义了一个视图：

```
@(tasks: List[Task], taskForm: Form[String])

@import helper._

@main("Todo list") {

  <h1>@tasks.size task(s)</h1>

  <ul>
    @tasks.map { task =>
      <li>
        @task.label

        @form(routes.Application.deleteTask(task.id)) {
          <input type="submit" value="Delete">
        }
      </li>
    }
  </ul> 

} 
```

这会产生以下编译器错误：

> 重载方法值适用于替代方案： [T](mapping: (String, play.api.data.Mapping[T]))play.api.data.Form[T]
> [T](mapping: play.api.data. Mapping[T])play.api.data.Form[T] 不能应用于 ((java.lang.String, java.lang.String)) Application.scala /todolist/app/controllers 第 11 行 Scala 问题

你能帮我破译编译器的输出吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T12:08:57.507

这是你的问题：`Form("label" -> "This is a label")`。您正在尝试调用方法`Form.apply(p: (String, String))`并且对象中没有这样的方法[`Form`](https://github.com/playframework/Play20/blob/master/framework/src/play/src/main/scala/play/api/data/Form.scala)。

# ant - 如何使用 ant 将 jar 文件包含到 ear 文件的 lib 文件夹中？

> ID：10072835
> 
> 赞同：6
> 
> 时间：2012-04-09T11:57:30.687
> 
> 标签：ant

我有以下文件夹结构：

```
project.ear
        lib folder
            ProjectEJBClient.jar
        META-INF folder
        projectEJB.jar 
```

我的`build.xml`包含以下几行来创建 EAR 包

```
<ear destfile="${build.dir}/myapp.ear" appxml="${src.dir}/metadata/application.xml">
      <fileset dir="${build.dir}" includes="ProjectEJBClient.jar"/>
      <fileset dir="${build.dir}" includes="projectEJB.jar"/>
</ear> 
```

上面的代码无法使用包含该`ProjectEJBClient.jar`文件的 lib 文件夹创建 EAR 包

我想创建一个 lib 文件夹并复制`ProjectEJBClient.jar`到该 lib 文件夹中。

在这个过程之后，我想用这个 lib 文件夹制作一个 EAR 项目。

我不知道如何创建 lib 文件夹并将其复制`ProjectEJBClient.jar`到该文件夹​​中并将该文件夹包含到 project.ear 中。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-10T07:58:26.490

使用[zipfileset](https://ant.apache.org/manual/Types/zipfileset.html)：

```
 <ear destfile="${build.dir}/myapp.ear" appxml="${src.dir}/metadata/application.xml">
    <zipfileset dir="." prefix="lib">
      <include name="ProjectEJBClient.jar"/>
    </zipfileset>
    <fileset dir="${build.dir}" includes="projectEJB.jar"/>
  </ear> 
```

这`prefix="lib"`将确保罐子`/lib`在您的耳朵下方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-08T05:46:01.537

就我而言，它不起作用，因为我需要包含几个文件，并且我在 apache-ant-1.9.1 和 jdk1.7.0_60 下以不同的方式使用 zipfileset 解决了问题：

```
<ear earfile="${dst_dir}/${ear_file}" appxml="${dep_dir}/ear/application.xml">
  <zipfileset 
    dir="${m2.home}/commons-codec/commons-codec/1.9" 
    prefix="lib" 
    includes="**/*.jar"/>
  <zipfileset
    dir="${m2.home}/log4j/log4j/1.2.17"
    prefix="lib"
    includes="**/*.jar"/>
  <fileset dir="${dst_dir}" includes="${jar_file}"/>
  <fileset dir="${dst_dir}" includes="${war_file}"/>
</ear> 
```

# php - SMTP 不适用于 php 邮件程序类

> ID：10072841
> 
> 赞同：3
> 
> 时间：2012-04-09T11:58:08.607
> 
> 标签：php, email, phpmailer

我有两个帐户：

no-reply@weddinggrabs.com
no-reply@appovio.com

和

传入 POP3：pop.secureserver.net (995)
传出 SMTP：smtpout.secureserver.net (80, 3535, 25, 465)

这些使用电子邮件客户端（如 Thunderbird、邮箱等）工作，但不使用 php-mailer：

```
 error_reporting(0);
        require_once ("class.phpmailer.php");// PHP MAILER FOR SENDING EMAILS

        $mail = new PHPMailer();

        define('EMAIL_HOST','smtpout.secureserver.net');
        define('EMAIL_USER','no-reply@weddinggrabs.com');
        define('EMAIL_PASSWORD','xxxxxxxx');

        $mail->IsSMTP();                    
        $mail->Port     = 465;              
        $mail->Host     = EMAIL_HOST;       
        $mail->Username = EMAIL_USER;       
        $mail->Password = EMAIL_PASSWORD;   
        $mail->SMTPAuth = true;             

        $mail->FromName = "Administrator";
        $mail->From = "Administrator";
        $mail->AddAddress($email); 
        $mail->WordWrap = 50;   
        $mail->IsHTML(true);    
        $mail->Subject  = "Seating Arrangements on Event";
        $mail->Body     = "Dear WeddingWire Customer";

        if($mail->Send()) return "true";        

        return  "false"; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T18:20:03.267

你试过 $mail->SMTPSecure='ssl' 吗？一些 SMTP 服务器需要这个。

使用 $mail->ErrorInfo 检查错误有时会给出提示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T08:38:27.823

使用此信息，您可以像这样配置 phpmailer：

```
$mail->SMTPAuth = true; // enable SMTP authentication
$mail->SMTPDebug = 2; // enables SMTP debug
$mail->SMTPSecure = "ssl"; // sets the prefix to the servier 
```

我认为这对你会有帮助。要么它会起作用，要么表明真正的问题出现在您的邮件中。如果这不起作用，请检查一些事情

1.  您的主机是否有权通过 SMTP 主机进行中继？
2.  您的主机在 SMTP 之前是否需要 POP？
3.  您的主机是否需要 SMTP 身份验证？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T17:36:24.747

从托管此文件的服务器，调用 smtpout.secureserver.net 是否正确解析？尝试 ping 它并查看 IP 地址是否符合您的预期

除此之外，如果您将“true”参数传递给 PHPMailer()，我会使用异常，因此请尝试以下操作：

```
$mail = new PHPMailer(true);
try
{
    $mail->IsSMTP();                    
    $mail->Port     = 465;              
    $mail->Host     = EMAIL_HOST;       
    $mail->Username = EMAIL_USER;       
    $mail->Password = EMAIL_PASSWORD;   
    $mail->SMTPAuth = true;             

    $mail->FromName = "Administrator";
    $mail->From = "Administrator";
    $mail->AddAddress($email); 
    $mail->WordWrap = 50;   
    $mail->IsHTML(true);    
    $mail->Subject  = "Seating Arrangements on Event";
    $mail->Body     = "Dear WeddingWire Customer";
    $mail->Send();
} catch( phpmailerException $e ) {
    echo $e->errorMessage();
    exit(0);
} 
```

这至少应该让您深入了解引发的错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T14:27:25.807

您是否尝试过使用`$mailer->SmtpSend();` [本教程](http://www.askapache.com/php/phpfreaks-eric-rosebrocks-phpmailer-tutorial.html#External_SMTP_Servers_PHP_Mail)似乎建议您需要。

# linux - 解析“控制”文件的脚本问题

> ID：10072843
> 
> 赞同：-1
> 
> 时间：2012-04-09T11:58:15.623
> 
> 标签：linux, bash, debian

我正在编写一个函数来解析 debian 控制文件以获取包构建依赖项。下面是所说的功能，它不起作用。

Debian 控制文件仅由某些“标题”（即：）分隔，这些“标题”`Build-Depends:`后面总是跟一个冒号（`:`）。这导致多个依赖项可能被列在多行上，而同一行上没有`Build-Depends`标题（否则我已经可以使用它了）。

我看到的具体问题是我从 grep 行收到“找不到命令”错误。“命令”是控制文件中的文字/文本。我对脚本的了解有限。我用“google”把它拼凑在一起，所以我一定会很感激任何提示。

```
function FindDep ()
{
  CheckVar=0
  echo "Running Find Depend."
  ControlPath=$TmpBuild/Deb-ConfFiles/$1/debian/control
  cat $ControlPath | while read line ;  
  do
    TempVar=`grep Build-Depends $line`
    if [ "$TempVar" != "" ]; then
       BuildDep=`sed s/Build-Depends://g $TempVar | sed s/Build-Depends-Indep\://g | grep -o '[a-z]*[-]*[a-z]*'`
       CheckVar=1
    elif [ $CheckVar == 1 ]; then
        TempVar=`grep : $line`
        if [ "TempVar" != "" ]; then   
           BuildDep="$BuildDep `sed s/Build-Depends://g $TempVar | sed s/Build-Depends-Indep\://g | grep -o '[a-z]*[-]*[a-z]*'`"
        else
           CheckVar=0
        fi
    fi
  done
  echo "Here is what is listed as dep for " $1 "--" $BuildDep
  for y in $BuildDep; do
    echo $y
    IsInstalled="dpkg -s $y | grep Status"
    if [ "$IsInstalled" == "" ]; then
      echo "installing " $y
      dpkg -i $y > /dev/null 2>&1
      if [ $? -gt 0 ]; then
        apt-get -f --force-yes --yes install >/dev/null 2>&1
      fi
      dpkg -i $y > /dev/null 2>&1
    fi
  done
  echo "Ending Find Depend"
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T13:57:03.013

首先转义引用变量的每一行，例如，将这个...

```
ControlPath=$TmpBuild/Deb-ConfFiles/$1/debian/control 
```

对此：

```
ControlPath="$TmpBuild/Deb-ConfFiles/$1/debian/control" 
```

这就是为什么：

```
$ y=hello world
bash: world: command not found

$ y="hello world"

$ cat $y       
cat: hello: No such file or directory
cat: world: No such file or directory

$ cat "$y"
cat: hello world: No such file or directory 
```

# javascript - Internet Explorer 9/JavaScript：禁用 ActiveX 的确认警报/弹出窗口

> ID：10072850
> 
> 赞同：1
> 
> 时间：2012-04-09T11:58:30.363
> 
> 标签：javascript, activex, internet-explorer-9, settings

![我不想每次都出现这个](../Images/73e5de6c5f1cc2d853ab0b85db1ae4e2.png)

我已经从 Tools->Security->Custom... 启用了脚本

...如果此处不相关，请帮助迁移到适当的论坛/子站点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T12:11:27.000

您需要更改网站所属安全区域的安全警报。

它将在 InternetOptions-> 安全选项卡下完成，选择您要更改的区域，然后按**“自定义级别...”**按钮。

在**“ActiveX 控件和插件”**部分启用/禁用/提示您想要的。

# asp.net - 没有提交的 ASP.net 按钮

> ID：10072858
> 
> 赞同：5
> 
> 时间：2012-04-09T11:59:14.247
> 
> 标签：asp.net

是否有不会提交表单数据的 ASP 按钮。

每当我单击一个 asp 按钮时，它都会发布表单数据，我想更改该行为以便发布一些其他表单数据，我将以编程方式创建它。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-02-04T08:49:28.063

使用属性 UseSubmitBehaviour="false" 解决了我的问题

```
<asp:Button ID="button1" runat="server" UseSubmitBehavior="false" Text="just a button" /> 
```

此属性自 .Net v2.0 起可用，有关详细信息：[Button.UseSubmitBehavior 属性](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.button.usesubmitbehavior(v=vs.110).aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-09T12:00:40.063

您需要使用 JavaScript 并拦截`onclick`事件，然后进行 Ajax 调用。

在事件处理程序中，返回`false`并且您的表单将不会被提交。像这样的东西：

```
<script>
    function on_s() {
       /// do some AJAX with JQuery or any other library
       $.ajax({ url: "your_asp_entry.aspx" });
       // you can add some processing to the AJAX call
       return false;
    }
</script>
<body>
<form runat="server">
<asp:Button id="b1" Text="Submit" runat="server" OnClick="return on_s();" />
</form>
</body> 
```

在`your_asp_entry.aspx`你做任何你需要调用你的 C# 函数/方法的事情。

更新：在 OP 谈到他/她需要调用 C# 函数的评论后更改了答案。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-09T12:03:06.613

添加 `onclientclick="Javascript:return false;"`到 aspbutton

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-16T22:54:11.267

这里的根本问题是`<button>`默认情况下 a 将提交其父表单，除非另有说明（例如`type="button"`）。

这是一个[相关的答案](https://stackoverflow.com/a/10812667/1146547)，讨论了添加`UseSubmitBehavior="false"`ASP 属性以在按钮上设置正确的类型属性。

这里是来自 MDN 的[文档](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/button)，它解释了`type="submit"`未指定时的默认类型。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-01T07:32:37.547

这是一个没有表单提交的示例按钮 html 按钮，只需使用带有 runat="server" 和**type="button"**的 html 按钮。

```
<input id="butDelete" runat="server" class="btn btn-danger" type="button" 
value="Delete" OnServerClick="butDelete_ServerClick" onclick="if 
(!confirm('Sure?')) return;"/> 
```

# c - request_irq 返回 EBUSY 并且 free_irq 表示 IRQ 是空闲的

> ID：10072864
> 
> 赞同：1
> 
> 时间：2012-04-09T11:59:52.843
> 
> 标签：c, linux-kernel, kernel-module, interrupt-handling

我正在为 8 号 IRQ 开发一个驱动程序，它对应于 RTC 时钟。我有以下问题。当我使用 request_irq 请求该 IRQ 时，我得到一个 EBUSY 错误。我认为首先使用 free_irq(8,NULL) 应该可以解决问题（至少它适用于内核版本 2.6.24-23-generic）。但是，当我使用它时，我收到错误“尝试释放已经免费的 IRQ 8”。检查 /proc/interrupts 我看到以下内容：

`8: 1 0 IO-APIC-edge rtc0`

这是我在 dmesg 中遇到的错误：

```
[14876.256173] ------------[ cut here ]------------
[14876.256182] WARNING: at kernel/irq/manage.c:1195 __free_irq+0x91/0x190()
[14876.256185] Hardware name: Aspire 7720     
[14876.256187] Trying to free already-free IRQ 8
[14876.256189] Modules linked in: cmos_driver_alarm(O+) cmos_driver_ioctl(O) nls_cp437 vfat fat usb_storage uas listapci_driver(O) cmos_driver_read(O) aes_i586 cryptd aes_generic fuse mxl5005s zl10353 dvb_usb_ce6230 dvb_usb dvb_core arc4 joydev nouveau iwl3945 iwlegacy mac80211 ir_lirc_codec lirc_dev drm_kms_helper snd_hda_codec_realtek ir_mce_kbd_decoder ttm ir_sanyo_decoder firewire_ohci sdhci_pci sdhci cfg80211 drm ir_sony_decoder ir_jvc_decoder snd_hda_intel snd_hda_codec snd_pcm mmc_core tg3 intel_agp intel_gtt agpgart r852 sm_common nand nand_ecc ir_rc6_decoder iTCO_wdt firewire_core snd_page_alloc i2c_i801 r592 snd_hwdep serio_raw nand_ids ir_rc5_decoder libphy iTCO_vendor_support crc_itu_t i2c_core mtd memstick psmouse rc_rc6_mce ir_nec_decoder thermal battery pcspkr processor video button ac acer_wmi mxm_wmi evdev sparse_keymap rfkill ene_ir wmi rc_core vboxnetflt(O) vboxdrv(O) vhba(O) snd_seq snd_timer snd_seq_device snd soundcore ext4 crc16 jbd2 mbcache sr_mod cdrom sd_mod pata_acpi hid_logitech_dj usbhid hid ata_generic ata_piix libata scsi_mod uhci_hcd ehci_hcd usbcore usb_common [last unloaded: cmos_driver_alarm]
[14876.256283] Pid: 10363, comm: insmod Tainted: G        W  O 3.3.1-1-ARCH #1
[14876.256286] Call Trace:
[14876.256292]  [<c01351f2>] warn_slowpath_common+0x72/0xa0
[14876.256296]  [<c01a89e1>] ? __free_irq+0x91/0x190
[14876.256299]  [<c01a89e1>] ? __free_irq+0x91/0x190
[14876.256303]  [<c01352c3>] warn_slowpath_fmt+0x33/0x40
[14876.256306]  [<c01a89e1>] __free_irq+0x91/0x190
[14876.256310]  [<c01a8b23>] free_irq+0x43/0xa0
[14876.256314]  [<f803501e>] init_driver+0x1e/0xc8 [cmos_driver_alarm]
[14876.256318]  [<c0101124>] do_one_initcall+0x34/0x170
[14876.256325]  [<f8035000>] ? 0xf8034fff
[14876.256330]  [<c018f295>] sys_init_module+0x8c5/0x1a70
[14876.256342]  [<c04ae85f>] sysenter_do_call+0x12/0x28
[14876.256345] ---[ end trace 81112f980bdc845e ]--- 
```

知道我做错了什么吗？先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T12:07:39.907

事情是你`NULL`作为参数传递给`free_irq`. 该功能`request_irq`在允许您释放它之前检查它是否匹配。

看看函数[`_free_irq`](http://lxr.free-electrons.com/source/kernel/irq/manage.c#L1173)：

```
/* desc is obtained via irq_to_desc */
action_ptr = &desc->action;
for (;;) {
        action = *action_ptr;

        if (!action) {
                WARN(1, "Trying to free already-free IRQ %d\n", irq);
                raw_spin_unlock_irqrestore(&desc->lock, flags);

                return NULL;
        }

        /* If dev_id doesn't match it just goes on. */
        if (action->dev_id == dev_id)
                break;

        action_ptr = &action->next;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T08:46:09.573

很有可能，作者已经足够好地请求`IRQF_SHARED`设置了标志的 IRQ 行。`request_irq`在这种情况下，使用,调用`IRQF_SHARED`应该允许您的模块与 RTC 模块共享 IRQ 行。

# jquery - jquery mobile在多页上动态更改页脚

> ID：10072865
> 
> 赞同：0
> 
> 时间：2012-04-09T11:59:53.110
> 
> 标签：jquery, mobile

对于我的移动应用程序，我使用具有多页布局（一个 html，多个页面）的 jquery mobile。我在具有相同页脚 ID 的所有页面上引用了页脚。在其中一页上，页脚文本已更改。如何将此更改传播到我的多页 jquery 移动应用程序的其他页面上的所有其他页脚。

```
 <div data-role="page" id="page1">
  <header data-role="header"></header>      
      <div class="content" data-role="content"></div>
  <footer id="myfooter" data-role="footer"</footer>
    </div>
    <div data-role="page" id="page2">
  <header data-role="header"></header>      
      <div class="content" data-role="content"></div>
  <footer id="myfooter" data-role="footer"</footer>
    </div>
    <div data-role="page" id="page3">
  <header data-role="header"></header>      
      <div class="content" data-role="content"></div>
  <footer id="myfooter" data-role="footer"</footer>
    </div> 
```

在第 2 页，用户选择了一个日期，该日期包含在 page2 的页脚中：

```
 $('#page2' ).bind('pageshow',function(event){   
       var infoFooter = '<center>Date: ' + date_footer + '</center>';
       $('#myFooter').empty().append(infoFooter);
    }); 
```

如何将此更改传播到所有页面上的所有页脚？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T12:17:53.287

您应该能够通过选择元素的另一个方面来更新页面上的所有元素（除了使用 '#' 符号按 id 选择）。这个想法是根据他们都共享的属性/方面进行选择，例如您专门为他们提供的类。

我还发现成功的方法是选择“以”“某物”开头的属性，如下所示：

```
$("[id^=myFooter]").empty().append(infoFooter); 
```

这将找到所有具有以“myFooter”开头的 id 的元素。您可能需要绑定到 #page2 以外的其他内容才能使其工作，但它也有可能以任何方式传播。

[您可以在此处](http://api.jquery.com/attribute-starts-with-selector/)查看其他类似选择的示例。

# c# - 是否可以强制执行 XAML 编码准则？

> ID：10072866
> 
> 赞同：2
> 
> 时间：2012-04-09T11:59:57.240
> 
> 标签：c#, .net, xaml

是否可以强制执行 XAML 编码准则？

例如，如果不遵守规则，可以将 StyleCop 设置为抛出错误，但据我所知，这不适用于 XAML，StyleCop 仅分析 C# 源代码。

是否有强制执行 XAML 编码准则的工具或签入策略？

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T13:45:32.637

[Resharper 可能有你正在寻找的东西。](http://www.jetbrains.com/resharper/features/xaml_editor.html)

升级到版本 6 后我没有做过 xaml 工作，所以我没有任何个人经验。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T20:40:16.760

尝试使用 Xaml Styler（VS 扩展）。您可以直接从 vs 下载它。此外，还有一些其他强大的扩展用于此目的，例如 Code maid。祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T19:44:13.443

Microsoft XAML 工具包具有 FxCop 集成

[http://archive.msdn.microsoft.com/XAML](http://archive.msdn.microsoft.com/XAML)

# asp.net - 按钮单击调用带有参数的 MVC 操作方法

> ID：10072869
> 
> 赞同：0
> 
> 时间：2012-04-09T12:00:16.090
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-2

我想用参数调用 MVC 动作

```
location.href = '<%: Url.Action("mAction", "mControl", "new {IDs='+selectedIDs+'}) %>'; 
```

或者`location.href = '<%: Url.Action("mAction", "mControl", "new {IDs=123}) %>';`

我得到错误：

> CS1010：常量换行

如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T12:06:32.777

新的奇怪的报价

你能试一下吗

```
location.href = '<%: Url.Action("mAction", "mControl", new {IDs=123}) %>'; 
```

# html - 动态创建页面的Phonegap离线应用程序

> ID：10072874
> 
> 赞同：2
> 
> 时间：2012-04-09T12:00:37.947
> 
> 标签：html, jquery-mobile, cordova, offline

我开始研究电话差距。基本上我正在使用本地存储来添加大量记录。当应用程序离线时，我希望它通过数据库并使用 jquery mobile 为每条记录创建一个页面。我希望应用程序是跨平台的。

因为离线时没有服务器，我可以用什么语言来创建动态页面？还是我必须开始使用 appcelerator 之类的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T16:06:52.670

这一切都可以通过使用[jsRender的客户端模板来完成](http://borismoore.github.com/jsrender/demos/step-by-step/index.html)

这是我的[博客文章，其中包含](http://roughlybrilliant.com/jsrender_json_apis_and_jquery_mobile)从 flickr api 提取 json 数据并在浏览器中呈现页面的示例。可能是一个好的开始。自从第一次写这篇文章以来，语法已经发生了一些变化，因此请检查 jsRender 文档，以确保随着项目的进行而准确的语法。

# sql - 将经典 ASP 迁移到 Win2008/IIS7/SQL Server 2008。现在一些插入/更新从 ASP 非常慢，但从 Management Studio 非常快

> ID：10072876
> 
> 赞同：1
> 
> 时间：2012-04-09T12:00:40.797
> 
> 标签：sql, sql-server-2008, iis-7, asp-classic

标题很好地涵盖了它。我是 Windows 2008 R2、IIS7 和 SQL Server 2008 的新手。

一些非常基本的插入和更新语句在 Management Studio 中运行得非常快，但在经典 ASP 页面中运行时每个都需要几秒钟。

正如您所料，在以前的带有 IIS 6 和 SQL Server 2000 的 Windows 2003 Box 上一切正常。

关于从哪里开始的任何提示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T19:41:14.693

自己找到了解决方案。

似乎在新的 64 位 Windows 2008 服务器上使用在以前的 32 位 Windows 2003 服务器上运行良好的过时 SQL 连接类型很糟糕。

上一个连接字符串：

```
"Driver={SQL Server};SERVER=(local);DATABASE=db1;UID=me;Password=pass;" 
```

更新到这个使事情变得更快：

```
"Provider=SQLNCLI10;Data Source=(local);Initial Catalog=db1;User ID=me;Password=pass" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T03:37:31.080

更改 SQL 提供程序对我的机器没有帮助，然后我通过手动打开和关闭数据库连接来运行脚本：

```
conn.Open
sql = "SELECT ... :"
Set rs_test= Conn.Execute(sql, ,1)

conn.Close
conn.Open

sql = "SELECT ... :"
Set rs_test= Conn.Execute(sql, ,1)

conn.Close
conn.Open

sql = "SELECT ... :"
Set rs_test= Conn.Execute(sql, ,1)

conn.Close
conn.Open 
```

它确实运行得更快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-09T10:11:16.140

除了上面的解决方案，将连接字符串更改为使用服务器名称而不是 . 或（本地）为我工作。

改变这个

```
"Provider=SQLNCLI10;Data Source=(local);Initial Catalog=db1;User ID=me;Password=pass" 
```

到

```
"Provider=SQLNCLI10;Data Source=MYSERVERNAME;Initial Catalog=db1;User ID=me;Password=pass" 
```

# haskell - Haskell 读取 args 值

> ID：10072878
> 
> 赞同：2
> 
> 时间：2012-04-09T12:00:44.260
> 
> 标签：haskell, functional-programming, args

我在读取haskell中的参数值时遇到了一点问题：

我有这样声明的选项：

```
options :: [OptDescr ArgFlag]
options = [Option [] ["help"] (NoArg Help) "",
           Option [] ["version"] (NoArg Version) "",
           Option ['a'] [] (NoArg FSAll) "",
           Option ['L'] [] (ReqArg FSLevel "NUM") ""] 
```

我读了这样的论点（我可以读到哪个论点是活动的）：

```
main = do
         args <- getArgs
         case getOpt RequireOrder options args of
             ([Version], [], []) -> do ...

             ([Help], [], []) -> do ...

             (flags, files, []) -> do ........ *

             otherwise -> do ... 
```

在有“*”字符的地方，我需要读取可能的“-l 3”标志的值 -> 我通过谷歌搜索但我什么也没找到（虽然可能是错误的关键字）。他们只是检测论点是否无处不在，而不是它的价值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T12:14:55.410

我想你已经定义了

```
data ArgFlag = Help
             | Version
             | FSAll
             | FSLevel String 
```

带有辅助功能

```
unFSLevel :: ArgFlag -> Maybe String
unFSLevel (FSLevel value) = Just value
unFSLevel _               = Nothing 
```

然后你可以得到这样的值：

```
case listToMaybe $ mapMaybe unFSLevel of
     Just value -> -- code to handle the -L flag having this value
     Nothing    -> -- code to handle there not being an -L flag 
```

（您需要从[Data.Maybe](http://www.haskell.org/ghc/docs/latest/html/libraries/base-4.5.0.0/Data-Maybe.html)`mapMaybe`导入和导入。）`listToMaybe`

# batch-file - 如何使用 Windows 批处理文件多次执行一行？

> ID：10072879
> 
> 赞同：6
> 
> 时间：2012-04-09T12:00:54.607
> 
> 标签：batch-file

下面是我的要求。

```
@echo off
cls
Set Sleep=0
:start
echo This is a loop
xx.exe yyyyy.dll /p:InputDataSource=Table:table.xml
Set /A Sleep+=1
echo DisplayingSleepvalue
echo %Sleep%
goto start 
```

在这里，我想执行`xx.exe yyyyy.dll /p:InputDataSource=Table:table.xml`这条线**30 次**.... 任何人都可以帮我解决这个问题。

谢谢，
马纳萨

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-09T12:12:11.407

试试这种方式： -

```
@echo off
cls
Set Sleep=0
:start
if %Sleep% == 30 ( goto end )
xx.exe yyyyy.dll /p:InputDataSource=Table:table.xml
echo This is a loop
Set /A Sleep+=1
echo %Sleep%
goto start
:end
echo "am 30 now"
pause 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-09T12:06:08.050

您可以使用`GOTO`带有递增计数器的循环，但`FOR /L`循环效率更高。

```
for /l %%N in (1 1 30) do someCommand 
```

通过键入`HELP FOR`或`FOR /?`从命令行研究可用的文档。

如果要重复整个代码块，请将代码块括在括号中。您可以使用`FOR` `%%N`变量代替`Sleep`变量。

```
@echo off
cls
for /l %%N in (1 1 30) do (
  echo This is a loop
  xx.exe yyyyy.dll /p:InputDataSource=Table:table.xml
  echo DisplayingSleepvalue
  echo %%N
) 
```

您的示例不需要它，但如果您想在循环中操作环境变量，则必须使用延迟扩展。正常扩展`%sleep%`仅在解析整个循环时扩展一次，而您需要在`!sleep!`每次循环迭代的执行时扩展该值。延迟扩展必须先启用，然后才能使用。

```
@echo off
setlocal enableDelayedExpansion
cls
set sleep=0
for /l %%N in (1 1 30) do (
  echo This is a loop
  xx.exe yyyyy.dll /p:InputDataSource=Table:table.xml
  set /a sleep+=1
  echo DisplayingSleepvalue
  echo !sleep!
) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-28T01:37:56.497

你有循环，只需添加一些数学。

```
@echo off
set executecounter=0
:loop
(Insert your command here)
set /a executecounter=%executecounter%+1
if "%executecounter%"=="30" goto done
goto loop
:done
echo Complete!
pause 
```

这将在每次命令执行时增加计数器，当它执行 30 次时，程序将结束。

# ios5 - xcode 4.3.2 分发证书中的“未找到包含任何...的未过期配置文件”错误

> ID：10072881
> 
> 赞同：2
> 
> 时间：2012-04-09T12:01:11.897
> 
> 标签：ios5, certificate, distribution

专家！

几天前，我正在使用以前版本的 xcode。那个时候我的发行证书工作得很好。但现在我使用的是 xcode 4.3.2 我遇到了新问题 Code Sign error: No unexpired provisioning profile found that contains any keychain's signing certificate。

我还尝试了 URL [Code Sign 错误中的所有条件：未找到包含任何钥匙串签名证书的未过期配置文件](https://stackoverflow.com/questions/9982788/code-sign-error-no-unexpired-provisioning-profiles-found-that-contain-any-of-th/10054207#10054207)

而且这个证书是有效的。我通过钥匙链访问检查了它。请任何人向我发送我的问题的正确答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T05:19:52.933

我自己解决了这个问题。这里首先我撤销了我的分发证书。在我创建了适合我的应用程序包 ID 的应用程序 ID 之后，我创建了另一个分发证书，其中包含我的应用程序 ID 和包 ID 例如：Players-com.NevproBusinessSolutions.my_app 在此之后我下载了该证书。并且用 iPhone 打开也可以用 xcode 配置。然后我检查了 code_in_sighning.. 在那里我找到了 mu 分发证书。选择那个并构建并运行我的应用程序而不会出错。:) 所以我可以通过 App loader 将我的应用上传到应用商店

# visual-c++ - 如何使用 libvlc 设置端口以在 C++ 中侦听？

> ID：10072885
> 
> 赞同：0
> 
> 时间：2012-04-09T12:01:32.097
> 
> 标签：visual-c++, media-player, vlc, libvlc

我使用播放视频的 libvlc 创建了一个媒体播放器实例 - libvlc_media_player_play (mPlayerInstance)

现在，我怎样才能让这个播放器监听特定的端口并播放正在流式传输到该端口的内容？

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T08:34:12.110

作为 VLC 命令

```
libvlc_instance_t     *p_inst;
libvlc_media_t        *p_m;
libvlc_media_player_t *p_mp;
//...
p_inst = libvlc_new(0, NULL);
p_m = libvlc_media_new_path(p_inst, "rtp://@:<listenport>/path");    
p_mp = libvlc_media_player_new(p_inst);

libvlc_media_player_set_media(p_m); 
```

当流开始时，vlc 实例将开始播放。

# linux - 如何通过 bash 提取一些文本

> ID：10072895
> 
> 赞同：1
> 
> 时间：2012-04-09T12:02:24.277
> 
> 标签：linux, bash, parsing, shell

我有一个输出：

```
 <artifactId>prj-parent</artifactId>
 <version>1.11.1-Beta01-SNAPSHOT</version> 
```

如何使用 linux 命令仅提取 1.11.1-Beta01-SNAPSHOT ？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T12:14:49.763

您可以使用`grep`：

```
 echo $string | grep -P -o '(?<=<version>).*?(?=</version>)' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-09T12:12:18.693

```
grep '<version>' | replace "<version>" "" "</version>" "" 
```

每行一个条目

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-09T13:07:00.610

```
awk -F '[<>]' '$2 == "version" {print $3}' 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-09T12:21:04.410

GNU sed：

```
sed -nr '/<\/?version>/s///gp' 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-09T12:14:42.490

```
a="<artifactId>prj-parent</artifactId>\n<version>1.11.1-Beta01-SNAPSHOT</version>"
echo $a | grep -oe "<version>.*</version>" | cut -d">" -f2- | cut -d"<" -f1 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-09T18:18:58.673

发射器：

```
$ txr -c "@(skip)
 <artifactId>@aid</artifactId>
 <version>@version</version>" data.txt
aid="prj-parent"
version="1.11.1-Beta01-SNAPSHOT" 
```

只是设置`eval`了该命令和 shell 变量`version`。您可以检查`aid`正确的工件 ID。如果`txr`找不到匹配项，它将失败并打印 word `false`。在`eval`这`false`将创建一个失败的终止状态：

```
if $(txr -c "@(skip)
 <artifactId>@aid</artifactId>
 <version>@version</version>") ; then
  echo "version captured: $version"
else
  echo "failed to match, uh oh!"
fi 
```

使用 TXR 提取 XML 不如使用 XML 解析器然后访问节点结构那么理想，但它比使用简单的正则表达式更健壮得多只有一小部分例子。

对于这些类型的任务，您并没有真正拥有拥有严格测试套件的软件工程解决方案的奢侈。甚至事先不知道数据的变化，或者可能存在大量难以发现错误的数据（例如从大日志中提取）。（如果说，日志中每 10,000 个条目中有 2 个被提取错误，有人会发现这个错误吗？）数据也可以改变。明天有人更改了 XML，而您的 regex hack 提取了一些错误的文本作为版本。

最好的方法是编写非常具体的匹配，它只允许输入之间相关的预期变化，并且如果存在不匹配则抱怨。

# java - 如何在 Windows 上安装 Boilerpipe？

> ID：10072902
> 
> 赞同：0
> 
> 时间：2012-04-09T12:02:42.077
> 
> 标签：java, netbeans, web-scraping, web-mining, boilerpipe

谁能告诉我如何在带有 Netbeans 的 Windows 上使用锅炉管？如果您能给我一些 java 代码来开始它，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T12:20:36.623

尝试查看他们的[Wiki](http://code.google.com/p/boilerpipe/w/list)和他们的[QuickStart](http://code.google.com/p/boilerpipe/wiki/QuickStart)。下面的示例代码...

```
public static void main(final String[] args) throws Exception {
    URL url;
    url = new URL("http://www.example.com/some-location/index.html");

    // NOTE We ignore HTTP-based character encoding in this demo...
    final InputStream urlStream = url.openStream();
    final InputSource is = new InputSource(urlStream);

    final BoilerpipeSAXInput in = new BoilerpipeSAXInput(is);
    final TextDocument doc = in.getTextDocument();
    urlStream.close();

    // You have the choice between different Extractors

    // System.out.println(DefaultExtractor.INSTANCE.getText(doc));
    System.out.println(ArticleExtractor.INSTANCE.getText(doc));
} 
```

# rabbitmq - Appharbor 共享一个 RabbitMQ 实例

> ID：10072903
> 
> 赞同：0
> 
> 时间：2012-04-09T12:02:45.870
> 
> 标签：rabbitmq, appharbor

是否可以从 Appharbor 中的多个应用程序共享 RabbitMQ 实例？这是消息传递的好处之一。为此，我需要知道 RabbitMQ 服务器的 url，它可以从 Appharbor 配置变量中读取。但这是*在*应用程序中。

如何从另一个应用程序获取网址？由于配置页面上的此文本，我不想对其进行硬编码：

“访问下面的配置变量应该以编程方式完成，因为附加提供者可能会在不通知的情况下更新这些值。”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T20:14:26.640

在后台工作人员和网络工作人员之间共享配置可以无缝工作，因为工作人员使用相同的配置。

我们正在尝试找出在多个应用程序之间共享附加组件的好方法。

# java - 调试器中的 java 下载管理器

> ID：10072905
> 
> 赞同：1
> 
> 时间：2012-04-09T12:02:55.823
> 
> 标签：java

有时在调试过程中会出现 sun.jkernel.DownloadManager。为什么会这样？

[http://www.docjar.com/html/api/sun/jkernel/DownloadManager.java.html](http://www.docjar.com/html/api/sun/jkernel/DownloadManager.java.html)

```
/**
 * Handles the downloading of additional JRE components.  The bootstrap class
 * loader automatically invokes DownloadManager when it comes across a resource
 * that can't be located.
 *
 *@author Ethan Nicholas
 */
 public class DownloadManager extends BootClassLoaderHook { 
```

# c - 用 C 语言在 Linux 上发出哔哔声

> ID：10072909
> 
> 赞同：16
> 
> 时间：2012-04-09T12:03:06.430
> 
> 标签：c, linux, ioctl, beep, external-dependencies

我想使用系统蜂鸣器（如果蜂鸣器不可用/无法访问，则仅使用扬声器）生成具有特定频率和长度（针对不同声音信号）的蜂鸣声。我知道可以通过使用 ioctl 来做到这一点，但这需要 root 访问权限，这是我不想要的。

我知道我可以只使用“beep”命令，但这将是一个依赖项，如果可能的话，不应该使用它（根本没有外部依赖项，只有基本的 linux 库和 C）。

我目前拥有的是以下代码（但这需要超级用户权限才能运行）：

```
#include <stdlib.h>
#include <fcntl.h>
#include <linux/kd.h>

int main(int argc, char *argv[])
{
 int fd = open("/dev/console", O_RDONLY);
 if (fd == -1 || argc != 3) return -1;
 return ioctl(fd, KDMKTONE, (atoi(argv[2])<<16)+(1193180/atoi(argv[1])));
} 
```

如果没有其他方法可以做到这一点，那么我将使用哔声，但我真的很想避免依赖并将哔声直接集成到我的脚本中，但我相信这里有人会知道解决方案/解决方法。

我真的不想要外部库，因为程序应该尽可能轻量级。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-11T13:09:20.557

请查看标准的 linux`beep`源代码。 [http://www.johnath.com/beep/beep.c](http://www.johnath.com/beep/beep.c)

它使用 KIOCSOUND ioctl 发出“哔”声，但您不需要超级用户权限即可播放。我已将其配置为“哔”组中的用户可以读取和执行。

所以我的 UID 为 1000 的标准用户在 GID 为 501 的组中（我称之为“哔”）。除此之外，我必须这样做`chmod 4750 /usr/bin/beep`，现在我可以在不要求超级用户权限的情况下播放哔哔声（在 20-20000Hz 范围内）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-09T15:02:04.020

如果您的终端支持，最基本的哔声仍然是 '\a' ：

```
fprintf(stdout, "\aBeep!\n" ); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-09T12:34:05.840

我认为这样做的唯一方法是使用 suid 给我自己的程序 root 访问权限，或者使用`beep`已经有 suid 的 。我想我会再添加一个依赖项，因为`beep`无论如何都不会太大。

感谢您提供所有答案，我确信其他库非常适合更复杂的信号，但我需要一个非常简单的库！

我认为这个问题可以标记为已解决/已关闭。

如果有人找到一种在没有超级用户权限的情况下使用控制台创建哔声的方法，我仍然对这个解决方案感兴趣:)

再次感谢大家。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-12-21T18:20:25.707

打开（“/dev/tty”，O_RDONLY）；相反， /dev/console 将在不需要超级用户权限的情况下为终端控制台使用声音 OK。但是，即使对于超级用户，X 会话中的虚拟控制台也会因声音而失败。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-09T12:05:42.887

尝试使用诸如[OpenAL](http://connect.creativelabs.com/openal/default.aspx)之类的音频库。

# ruby-on-rails - 瘦启动不起作用，但rails服务器可以

> ID：10072910
> 
> 赞同：0
> 
> 时间：2012-04-09T12:03:15.093
> 
> 标签：ruby-on-rails, thin

我无法`Rails`通过以下方式运行我的应用程序`thin`：

```
$ bundle exec thin start
Could not find babosa-0.3.6 in any of the sources
Run `bundle install` to install missing gems. 
```

但默认`Rails` `WEBrick`服务器运行良好：

$ rails server => Booting WEBrick => Rails 3.1.3 应用程序开始在[http://0.0.0.0:3000](http://0.0.0.0:3000)上开发 => 调用 -d 来分离

我已经跑了`bundle install`，我很确定我已经安装了`babosa`gem。（我可以要求它`irb`） 那么为什么我`thin`拒绝工作呢？

# powershell - 将 cmdlet 的结果值存储在 Powershell 中的变量中

> ID：10072911
> 
> 赞同：21
> 
> 时间：2012-04-09T12:03:25.617
> 
> 标签：powershell

我想运行一个 cmdlet 并将结果的**值**存储在一个变量中。

例如

```
C:\PS>Get-WSManInstance -enumerate wmicimv2/win32_process | select Priority 
```

它列出了带有标题的优先级。以第一个为例：

```
Priority
--------
8 
```

如何将它们存储在变量中？我试过了：

```
$var=Get-WSManInstance -enumerate wmicimv2/win32_process | select Priority 
```

现在变量是：`@{Priority=8}`我希望它是`8`.

问题2：

我可以用一个 cmdlet 存储两个变量吗？我的意思是在管道之后存储它。

```
C:\PS>Get-WSManInstance -enumerate wmicimv2/win32_process | select Priority, ProcessID 
```

我想避免这种情况：

```
$prio=Get-WSManInstance -enumerate wmicimv2/win32_process | select Priority
$pid=Get-WSManInstance -enumerate wmicimv2/win32_process | select ProcessID 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-04-09T12:44:32.087

使用`-ExpandProperty`国旗`Select-Object`

```
$var=Get-WSManInstance -enumerate wmicimv2/win32_process | select -expand Priority 
```

更新以回答另一个问题：

请注意，您也可以只访问该属性：

```
$var=(Get-WSManInstance -enumerate wmicimv2/win32_process).Priority 
```

因此，要将其中的多个转换为变量：

```
$var=Get-WSManInstance -enumerate wmicimv2/win32_process
   $prio = $var.Priority
   $pid = $var.ProcessID 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-09T13:41:02.930

只需访问`Priority`从管道返回的对象的属性：

```
$var = (Get-WSManInstance -enumerate wmicimv2/win32_process).Priority 
```

`Get-WSManInstance`（如果返回多个对象，这将不起作用^(。2)）

对于第二个问题：要获得两个属性，有多种选择，可能最简单的方法是让*一个*变量* 包含一个具有两个单独属性的对象：

```
$var = (Get-WSManInstance -enumerate wmicimv2/win32_process | select -first 1 Priority, ProcessID) 
```

然后使用，假设只有一个进程：

```
$var.Priority 
```

和

```
$var.ProcessID 
```

如果有多个进程`$var`将是一个可以索引的数组，因此要获取第一个进程的属性（使用数组文字语法`@(...)`，因此它始终是一个集合¹）：

```
$var = @(Get-WSManInstance -enumerate wmicimv2/win32_process | select -first 1 Priority, ProcessID) 
```

然后使用：

```
$var[0].Priority
$var[0].ProcessID 
```

¹ PowerShell 对命令行很有帮助，但在脚本中没有那么有用 在将管道的结果分配给变量时有一些额外的逻辑：如果没有返回对象，则设置`$null`，如果返回，则分配该对象，否则为数组被安排了。强制数组返回一个包含零个、一个或多个（分别）元素的数组。

² PowerShell V3 中的这一变化（在撰写候选版本时），在对象数组上使用成员属性将返回这些属性值的数组。

# asp.net - ASP.NET Web API 只返回集合中的一个对象

> ID：10072913
> 
> 赞同：0
> 
> 时间：2012-04-09T12:04:14.233
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-4, asp.net-web-api

我的 ASP.NET Web API 中有以下操作：

```
 public IEnumerable<Car> carssOfUser(int id, String username, String password)
    {

        using (var context = new CarEntities())
        {
            // Authorization. Allow user only to get his own cars
            User userQueried = context.Users.Where(u => u.id == id).FirstOrDefault();
            if (!userQueried.username.Equals(username))
            {
                throw new HttpResponseException(HttpStatusCode.Unauthorized);
                //return null;
            }

            IEnumerable<Car> cars = context.Cars.Where(p => p.ownerId == id).ToList();
            return cars;
        }
    } 
```

但是，如果我从 Android 应用程序查询它以获取给定用户的汽车（通过 json）.. 假设 id 为 2，它返回 9 辆汽车的集合（这是正确的，用户 2 有 9 辆汽车），但只有第一辆汽车有正确的字段值（名称、价格等），其余汽车在所有字段中为空。

这真的很奇怪，因为当我添加这些代码行时出现了问题：

```
// Authorization. Allow user only to get his own cars
            User userQueried = context.Users.Where(u => u.id == id).FirstOrDefault();
            if (!userQueried.username.Equals(username))
            {
                throw new HttpResponseException(HttpStatusCode.Unauthorized);
                //return null;
            } 
```

删除它后，一切正常，所有汽车在字段中都有正确的值（不再是空值）......

您知道如何解释这种 imo 非常奇怪的行为吗？

我认为这并不重要（因为我没有这种授权的所有其他操作都可以正常工作），但我想提一下，从 Android 应用程序中我使用 gson 进行反序列化，而在服务器端我使用 JSON。 NET 进行序列化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T12:30:54.047

我查看了数据库访问代码，并将授权代码放入 using 语句：

```
 using (var context = new GeoDiaryEntities())
    {
        // Authorization. Allow user only to get his own travels
        User userQueried = context.Users.Where(u => u.id == id).FirstOrDefault();
        if (!userQueried.username.Equals(username))
        {
            throw new HttpResponseException(HttpStatusCode.Unauthorized);
        }
    } 
```

它有帮助，现在可以工作了。但是，我不确定为什么在单独的上下文中执行此代码有帮助..有什么想法吗？

# java - 获取下一个有效日期

> ID：10072914
> 
> 赞同：0
> 
> 时间：2012-04-09T12:04:22.920
> 
> 标签：java, date

我正在编写一个需要执行以下操作的 java 应用程序。

我必须避免一周中的两天（外部可配置）说 TUESDAY 和 FRIDAY 来做一些业务逻辑处理。我想知道下一个可用的日子。例如：如果今天是星期二，我应该得到下一个可用的星期三，或者如果今天是星期四，那么下一个可用的应该是星期一。

有人可以指导我解决这个问题吗？这听起来很简单，但它真的很棘手。

这是我到目前为止所做的

```
 List<String> exceptionDays = new ArrayList<String>();
  exceptionDays.add("SUNDAY");
  exceptionDays.add("MONDAY");
  exceptionDays.add("FRIDAY");

  Date today = new Date();

      Calendar calendar = Calendar.getInstance();
      calendar.setTime(today);

  int dayOfWeek = calendar.get(Calendar.DAY_OF_WEEK);

  if (dayOfWeek == Calendar.FRIDAY) {
      calendar.add(Calendar.DATE, 3);
  } else if (dayOfWeek == Calendar.SATURDAY) {
      calendar.add(Calendar.DATE, 2);
  } else {
      calendar.add(Calendar.DATE, 1);
  }
  String strDateFormat = "E";
  SimpleDateFormat sdf = new SimpleDateFormat(strDateFormat);

  strDateFormat = "EEEE";
  sdf = new SimpleDateFormat(strDateFormat);

  Date nextBusinessDay = calendar.getTime();
  System.out.println(sdf.format(nextBusinessDay).toUpperCase());
  if(exceptionDays.contains(sdf.format(nextBusinessDay).toUpperCase())){
      if(sdf.format(nextBusinessDay).toUpperCase().equals("FRIDAY")){
          calendar.add(Calendar.DATE, 3);
      }else if(sdf.format(nextBusinessDay).toUpperCase().equals("SATURDAY")){
          calendar.add(Calendar.DATE, 2);
      } else
          calendar.add(Calendar.DATE, 1);

   nextBusinessDay = calendar.getTime();
  }
  DateFormat df = new SimpleDateFormat("dd-MMM-yy");
    String format = df.format(nextBusinessDay.getTime());
  System.out.println("Today            : " + df.format(today));
  try {
    System.out.println("Next business day: " + df.parse(format));

      System.out.println("Next business day: " + df.format(nextBusinessDay)); 
```

如果看起来很笨拙，请忽略上面的逻辑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T12:12:45.630

简单使用`Calendar`

```
List<Integer>  avoidingDays = new ArrayList<Integer>();
avoidingDays.add(Calendar.MONDAY);
Calendar cal = Calendar.getInstance();
while(avoidingDays.contains(cal.get(Calendar.DAY_OF_WEEK)) ){cal.add(Calendar.DATE, 1}
return cal; 
```

# php - PHP的最佳IDE，最好支持版本控制

> ID：10072915
> 
> 赞同：-3
> 
> 时间：2012-04-09T12:04:33.790
> 
> 标签：php, version-control, ide

我的代码只是分为文件系统上的几个文件夹，而不是一棵文件树。我正在寻找一个支持 PHP 和源代码控制的环境（比如 TortoiseSVN，但任何其他都可以）来自包含文件夹的结果（但确实会从根目录带来结果），并且无法从包含文件夹中控制文件的版本...

如果有人知道如何解决这些问题，那就太棒了。也许其他一些框架建议虽然放弃 NetBeans 感觉很丢脸。看起来真的很有希望。

使用 Windows 7

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T12:06:47.473

不知道它是否**是最好的 IDE**，但我发现支持 PHP 的 Eclipse 相当不错。它还为您需要的所有版本控制系统提供插件：CVS、SVN、Mercurial、GIT，应有尽有。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T12:07:23.950

你试过[aptana](http://aptana.com/)吗？它是一个 Eclipse 插件或独立版本，具有相当好的功能。

# tomcat - 为 windows 配置 Tomcat 服务器

> ID：10072916
> 
> 赞同：0
> 
> 时间：2012-04-09T12:04:39.710
> 
> 标签：tomcat

我已经在我的系统中安装了 apache-tomcat-6.0.35-windows-x86。如何配置它并正确设置类路径？提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T12:09:59.737

你不需要设置任何东西。Tomcat 会忽略您的`CLASSPATH`环境变量，所有 Java EE 应用服务器也是如此。只需使用目录中的启动脚本启动它`/bin`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T13:54:10.593

你不需要设置任何东西。Tomcat 会忽略您的 CLASSPATH 环境变量，所有 Java EE 应用服务器也是如此。只需使用 /bin 目录中的启动脚本启动它。

这也适用于Linux服务器吗？？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T18:38:04.117

如果您确实出于某种原因确实想要设置类路径，则 setclasspath.bat 用于在从批处理文件启动时为任何正在运行的进程设置类路径。

从服务启动时，您可以通过运行以下命令设置类路径： bin\tomcat#w.exe 其中 # 是您正在运行的 Tomcat 的版本。

这将弹出一个用户界面，让您为 Tomcat 服务设置许多项目。

# php - 如果字段值不存在而不使用忽略，则插入，唯一

> ID：10072918
> 
> 赞同：0
> 
> 时间：2012-04-09T12:04:47.600
> 
> 标签：php, mysql

如果字段中仅不存在特定值，如何插入记录

```
 INSERT INTO `users` (fb_id, username) 
    SELECT '.$id_signed_in.', '.$user_signed_in.' FROM `users` 
    WHERE  NOT EXISTS (SELECT * FROM `users` 
                      WHERE fb_id='.$id_signed_in.') 
    LIMIT 1' 
```

这似乎不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T12:15:51.767

请试试这个，

```
INSERT INTO `users` (fb_id, username) 
SELECT '.$id_signed_in.', '.$user_signed_in.' FROM `users` 
WHERE fb_id NOT IN(SELECT fb_id FROM `users` 
                  WHERE fb_id='.$id_signed_in.') 
LIMIT 1' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T12:54:46.217

简单的方法：

如果您希望字段是唯一的，请将其设置为唯一并删除重复的条目（如果存在）。

您可以使用

```
insert ignore into users (fb_id, username) values ('$id_signed_in','$user_signed_in') 
```

在这里，您必须将 fb_id 设置为唯一以防止重复条目。如果数据库中不存在 fb_id，它只会插入。

另一种不使用 ignore, unique 的方法：

```
$res = mysql_query("select id from users where fb_id='$id_signed_in'");
if(!(mysql_num_rows($res)>0)){
    mysql_query("insert into users (fb_id, username) values ('$id_signed_in','$user_signed_in')");
} 
```

# java - 如何正确处理默认变量值不正确

> ID：10072919
> 
> 赞同：1
> 
> 时间：2012-04-09T12:04:49.037
> 
> 标签：java

这可能是一个基本问题，通过代码更好地解释：

```
 public void checkStatus {
        int status = UNKNOWN;
        if (somecondition) {
             status = STATUS_UP;
        } elseif (someothercondition) {
             status = STATUS_DOWN;
        }
    } 
```

所以问题是，根据定义，我不知道所有可能影响状态的可能条件，并且我不希望编译器通过不初始化状态局部变量来抛出“我的未定义”错误。

底线是我的应用程序无法在状态设置为 UNKNOWN 的情况下工作，我刚刚将其设置为关闭编译器。

问题：我怎样才能优雅地处理这个问题，我考虑过在方法结束时抛出一个致命的异常，如果状态仍然设​​置为 UNKNOWN，但这感觉有点“丑陋”。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T12:11:49.267

您可以将状态变量的某些默认值仅放在 else 条件中，以便如果任何`if`条件未通过，则至少 status 获得一些默认值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T12:13:25.773

我建议您尝试使用枚举而不是整数。

您的代码可以在 UNKNOWN 状态下工作 - 如果您正在编写 if/else if/else 或使用 switch 时的默认条件，那么这就是您从 else 子句返回的内容。

抛出异常也可以工作。这是您的设计选择。如果未知状态确实是异常情况，则应使用异常。如果它很常见，我会倾向于枚举。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T12:13:50.437

您可以断言或抛出异常。

[http://docs.oracle.com/javase/1.4.2/docs/guide/lang/assert.html](http://docs.oracle.com/javase/1.4.2/docs/guide/lang/assert.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-09T12:14:51.420

我总是将 a`throw`放在链的末尾`if / then / else`，并且不预先将默认值分配给变量。如果抛出异常，它不仅告诉我应用程序无法继续，还会报告无法继续的原因。而且，一旦发现无法继续，它就会这样做，这对于错误报告来说是非常可取的（通常，您希望尽快报告错误）。

有一种特殊情况，当您以`somecondition`s 组合的方式构建代码时，您*永远不会*跑出`if / then / else`链的尾部，但编译器无法自动验证它。例如，您之前验证了输入，并且您知道代码中没有可以更改它的路径。在这种特定情况下，您应该使用断言而不是抛出异常，因为它表明您对代码的推理存在错误，而不是简单的编码错误。

# php - 即使发生错误，如何继续在 Facebook 上发帖？

> ID：10072921
> 
> 赞同：0
> 
> 时间：2012-04-09T12:05:18.163
> 
> 标签：php, facebook, facebook-graph-api

**首先我要弄清楚几件事**

1.这不是垃圾群成员正常点赞和评论

2.只有我使用这个应用程序

1.  我有权在群组和页面上发帖 (manage_pages,Publish_stream)

**在其详细信息和代码下方**

我为发布创建了一个循环，以便我下面的代码从我的数据库中加载组 ID 数据，然后在该组上发布，但问题是，如果发生任何错误，脚本将停止工作，即使发生错误，我也想继续

所以问题**如何继续在其他群组墙上发帖，即使发生错误？**意味着我不在乎我的帖子是否不在显示错误的那个组上发布，而是在其他组上发布

下面是这个的代码

```
//basically making loop so that we can post on each group which id we get from database 

    //now getting total groups ids record so that we stop the loop when loop reaches its target 

        $query3 = mysql_query("SELECT * FROM groupids");
        $num_rows = mysql_num_rows($query3);
        $increaser = 2 ;

    //now will make loop
        for ( $counter = 1; $counter <= $num_rows ; $counter += 1) {

            //at this time we just echo all groups ids than we convert it to post

            $query4 = mysql_query("SELECT * FROM groupids WHERE ID=$increaser LIMIT 1");
            $row4 = mysql_fetch_array($query4);
            $group_id = $row4["gids"];

            //for posting you simpley set here some coding who post on wall

            $response = $facebook->api('/' . $group_id . '/feed','POST',$WallPost);

            //its updates value so that we get new group id on next level of loop 
            $increaser += 1 ;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T12:37:36.290

我猜是 $facebook->api 如果没有发布权限或其他东西会引发异常。如果是这样，那就很容易了。只需用 try - catch 语句包装调用：

```
try {
     $response = $facebook->api('/' . $group_id . '/feed','POST',$WallPost);
}
catch(Exception $e) {
    //An exception occurred but don't do anything
} 
```

# c# - InputScope 类型 NumericPassword 在我的情况下不起作用

> ID：10072927
> 
> 赞同：2
> 
> 时间：2012-04-09T12:06:09.813
> 
> 标签：c#, silverlight, windows-phone-7, silverlight-4.0, silverlight-3.0

当我尝试使用 InputScope 类型 NumericPassword 时？它不会隐藏输入日期：

[http://msdn.microsoft.com/en-us/library/system.windows.input.inputscopenamevalue%28v=vs.95%29.aspx](http://msdn.microsoft.com/en-us/library/system.windows.input.inputscopenamevalue%28v=vs.95%29.aspx)

这是我的代码：

```
 <ValidationControl:ValidationControl x:Name="txtPIN"  GotFocus="PinTextBox_GotFocus" Margin="0,0,45,0" TextWrapping="Wrap" ValidationContent="Please insert a valid id" LostFocus="PinBoxLostFocus" InputScope="NumericPassword" HorizontalAlignment="Right" Width="200"  MinWidth="220" MinHeight="80"  MaxLength="4" Foreground="Black" Background="#DEFFFFFF" ValidationRule="{StaticResource pinValidationRule}" TextChanged="txtPIN_TextChanged">
                    <ValidationControl:ValidationControl.ValidationSymbol>
                        <Image Source="/img.png" Height="40" Width="40" />
                    </ValidationControl:ValidationControl.ValidationSymbol>
                </ValidationControl:ValidationControl> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T03:35:35.323

它对我有用，ValidationControl 用户控件是什么？首先尝试使用一个简单的文本框控件，看看它是否有效。

# spring - 旧版应用程序中的 Spring Security 实现

> ID：10072930
> 
> 赞同：0
> 
> 时间：2012-04-09T12:06:18.910
> 
> 标签：spring, spring-security

假设我有一个执行不同操作的屏幕名称 ITEM：

保存、更新和删除。

我给了一个角色为 ADMIN 的用户 ADMIN，而 ADMIN 角色只能在这个屏幕上执行 SAVE 和 UPDATE 操作。如何使用 Spring Security 自定义它

方法级别安全性仅对角色进行检查，但不会更进一步，但必须通过 spring 安全性来实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T12:13:15.193

1) 您可以做的第一件事是根据角色隐藏/禁用选项 URL。因此，具有管理员以外角色的用户无法查看/单​​击保存和更新。
2）代替编写方法级代码使用拦截器，拦截每个请求并检查角色。
检查此[问题](https://stackoverflow.com/questions/7173910/role-based-access-control-with-spring-mvc)以获取更多详细信息。

# ruby - 部署到 Heroku Git 时说我没有将 Gemfile.lock 签入版本控制并且无法通过捆绑程序安装 gem

> ID：10072934
> 
> 赞同：0
> 
> 时间：2012-04-09T12:06:42.917
> 
> 标签：ruby, git, windows-7, heroku, gemfile

我正在尝试使用 GIT 在 Heroku 上部署 Rails 应用程序。我应用了我在 stackoverflow 中找到的所有我认为相关的解决方案。

这是我所做的：

**STEP 1：以下是我得到的命令和结果：**

```
Hesham@HESHAM-PC /c/rails_projects/first_app (Hesh1)

$ git push heroku1 master

Enter passphrase for key '/c/Users/Hesham/.ssh/id_rsa':
Counting objects: 77, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (55/55), done.
Writing objects: 100% (77/77), 27.15 KiB, done.
Total 77 (delta 8), reused 71 (delta 6)

-----> Heroku receiving push  
-----> Ruby/Rails app detected  
-----> Detected Rails is not set to serve static_assets
       Installing rails3_serve_static_assets... done  
-----> Configure Rails 3 to disable x-sendfile
       Installing rails3_disable_x_sendfile... done  
-----> Configure Rails to log to stdout
       Installing rails_log_stdout... done  
-----> Gemfile detected, running Bundler version 1.0.7
       Unresolved dependencies detected; Installing...  
       Using --without development:test  
       Windows Gemfile.lock detected, ignoring it.  
       You have modified your Gemfile in development but did not check
       the resulting snapshot (Gemfile.lock) into version control  

       You have added to the Gemfile:
       * source: rubygems repository https://rubygems.org/
       * rails (= 3.2.3)
       * sqlite3
       * sass-rails (~> 3.2.3)
       * coffee-rails (~> 3.2.1)
       * uglifier (>= 1.0.3)
       * jquery-rails
       FAILED: http://devcenter.heroku.com/articles/bundler
 !     Heroku push rejected, failed to install gems via Bundler

To git@heroku.com:fierce-mountain-7869.git
 ! [remote rejected] master -> master (pre-receive hook declined)
error: failed to push some refs to 'git@heroku.com:fierce-mountain-7869.git'

Hesham@HESHAM-PC /c/rails_projects/first_app (Hesh1) 
```

**STEP2：当我得到上述结果时，我运行了以下内容：**

```
Hesham@HESHAM-PC /c/rails_projects/first_app (Hesh1)

$ bundle update

You are trying to install in deployment mode after changing
your Gemfile. Run `bundle install` elsewhere and add the
updated Gemfile.lock to version control.

If this is a development machine, remove the Gemfile freeze
by running `bundle install --no-deployment`.

You have added to the Gemfile:
* source: rubygems repository https://rubygems.org/
* rails (= 3.2.3)
* sqlite3
* sass-rails (~> 3.2.3)
* coffee-rails (~> 3.2.1)
* uglifier (>= 1.0.3)
* jquery-rails

Hesham@HESHAM-PC /c/rails_projects/first_app (Hesh1) 
```

**STEP3：我按照建议运行了这个：**

```
Hesham@HESHAM-PC /c/rails_projects/first_app (Hesh1)

$ bundle install --no-deployment

Using rake (0.9.2.2)  
Using i18n (0.6.0)  
Using multi_json (1.2.0)  
Using activesupport (3.2.3)  
Using builder (3.0.0)  
Using activemodel (3.2.3)  
Using erubis (2.7.0)  
Using journey (1.0.3)  
Using rack (1.4.1)  
Using rack-cache (1.2)  
Using rack-test (0.6.1)  
Using hike (1.2.1)  
Using tilt (1.3.3)  
Using sprockets (2.1.2)  
Using actionpack (3.2.3)  
Using mime-types (1.18)  
Using polyglot (0.3.3)  
Using treetop (1.4.10)  
Using mail (2.4.4)  
Using actionmailer (3.2.3)  
Using arel (3.0.2)  
Using tzinfo (0.3.33)  
Using activerecord (3.2.3)  
Using activeresource (3.2.3)  
Using coffee-script-source (1.2.0)  
Using execjs (1.3.0)  
Using coffee-script (2.2.0)  
Using rack-ssl (1.3.2)  
Using json (1.6.6)  
Using rdoc (3.12)  
Using thor (0.14.6)  
Using railties (3.2.3)  
Using coffee-rails (3.2.2)  
Using jquery-rails (2.0.2)  
Using bundler (1.1.3)  
Using rails (3.2.3)  
Using sass (3.1.15)  
Using sass-rails (3.2.5)  
Using sqlite3 (1.3.5)  
Using uglifier (1.2.4)  
Your bundle is complete! Use `bundle show [gemname]` to see where a bundled gem is installed.

Hesham@HESHAM-PC /c/rails_projects/first_app (Hesh1) 
```

**STEP4：我仍然得到相同的结果：**

```
Hesham@HESHAM-PC /c/rails_projects/first_app (Hesh1)

$ git push heroku1 master

Enter passphrase for key '/c/Users/Hesham/.ssh/id_rsa':
Counting objects: 77, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (55/55), done.
Writing objects: 100% (77/77), 27.15 KiB, done.
Total 77 (delta 8), reused 71 (delta 6)

-----> Heroku receiving push  
-----> Ruby/Rails app detected  
-----> Detected Rails is not set to serve static_assets  
       Installing rails3_serve_static_assets... done  
-----> Configure Rails 3 to disable x-sendfile  
       Installing rails3_disable_x_sendfile... done  
-----> Configure Rails to log to stdout  
       Installing rails_log_stdout... done  
-----> Gemfile detected, running Bundler version 1.0.7  
       Unresolved dependencies detected; Installing...  
       Using --without development:test  
       Windows Gemfile.lock detected, ignoring it.  
       You have modified your Gemfile in development but did not check
       the resulting snapshot (Gemfile.lock) into version control  

       You have added to the Gemfile:
       * source: rubygems repository https://rubygems.org/
       * rails (= 3.2.3)
       * sqlite3
       * sass-rails (~> 3.2.3)
       * coffee-rails (~> 3.2.1)
       * uglifier (>= 1.0.3)
       * jquery-rails
       FAILED: http://devcenter.heroku.com/articles/bundler
 !     Heroku push rejected, failed to install gems via Bundler

To git@heroku.com:fierce-mountain-7869.git
 ! [remote rejected] master -> master (pre-receive hook declined)
error: failed to push some refs to 'git@heroku.com:fierce-mountain-7869.git'

Hesham@HESHAM-PC /c/rails_projects/first_app (Hesh1) 
```

`git add Gemfile.lock`我还使用and添加了 Gemfile 和 Gemfile.lock并`git add Gemfile`确保 .gitignore 中没有提到它们

为了成功部署到 Heroku，我还能尝试什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-06T21:22:28.877

> 这是由于 Heroku 不允许 Gemfile 中的条件，即使在开发组中也是如此。

[http://www.johnplummer.com/rails/heroku-error-conditional-rbfsevent-gem.html](http://www.johnplummer.com/rails/heroku-error-conditional-rbfsevent-gem.html)

# python - 当我有键时从字典中读取值

> ID：10072941
> 
> 赞同：1
> 
> 时间：2012-04-09T12:07:09.067
> 
> 标签：python, django, django-templates

我已经传递给模板字典参数，比如

```
parameters={
'value':'some_value',
'style':{}
} 
```

在模板里面我需要阅读**some_value**

```
src="{{value['value']}}" 
```

如何读取该值，因为我像上面那样尝试但出现错误**无法解析剩余部分**？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T12:11:33.120

Django 模板使用语法`{{ dictvar.key }}`来执行查找，请参阅[Django Docs](https://docs.djangoproject.com/en/dev/topics/templates/)。所以在你的情况下，这将是`{{ value.value }}`

# windows-phone-7 - Windows Phone 应用程序中的值错误

> ID：10072947
> 
> 赞同：-2
> 
> 时间：2012-04-09T12:07:41.873
> 
> 标签：windows-phone-7

我在页面的最后一行的值有错误。该程序所做的是计算您在屏幕上单击了多少次。

请帮我。

我尝试将值添加为整数和所有内容，但是在值存在 savecount 问题之前没有发生任何事情然后我通过添加一个女贞作为整数来修复它我认为我以这种方式解决了它。

你认为我必须在使用的东西中添加一些东西吗？

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Net;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Shapes;
using Microsoft.Phone.Controls;
using System.Windows.Navigation;
using System.Windows.Threading;

namespace TapToCount
{
    public partial class MainPage : PhoneApplicationPage
    {
        private int count;
        private int savedCount;
        // Constructor
        public MainPage()
        {
            InitializeComponent();
        }
        protected override void OnMouseLeftButtonDown(MouseButtonEventArgs e)
        {
            base.OnMouseLeftButtonDown(e);
            this.count++;
            this.CountTextBlock.Text = this.count.ToString("N0");
        }
        private void ResetButton_Click(object sender, RoutedEventArgs e)
        {
            this.count = 0;
            this.CountTextBlock.Text = this.count.ToString("N0");
        }
        protected override void OnNavigatedFrom(NavigationEventArgs e)
        {
            base.OnNavigatedFrom(e);

            // Persist state when leaving for any reason (Deactivated or Closing):
            this.savedCount.value= this.count;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T13:13:08.583

`savedCount`是一个`int`。它没有`value`属性或字段。只需使用

```
this.savedCount = this.count 
```

虽然我怀疑它会给你你想要的结果。你可能想制作`savedCount`一个静态的

# mysql - Heroku（Postgres）上的 Where 子句中断但在本地运行良好（MySQL）

> ID：10072952
> 
> 赞同：0
> 
> 时间：2012-04-09T12:08:16.367
> 
> 标签：mysql, postgresql, heroku

我有以下代码行，在本地运行良好，但在推送到生产（Heroku）时会中断：

```
def self.find_unresolved_with_approved_client
  self.joins(:client).where('clients.approved = true AND wish.status <> "Resolved"')
end 
```

我的heroku日志中的错误如下：

```
2012-04-09T11:49:14+00:00 app[web.1]: ActionView::Template::Error (PGError: ERROR:  column "Resolved" does not exist
2012-04-09T11:49:14+00:00 app[web.1]:     16:       %th{ :class => :span10 } Subject
2012-04-09T11:49:14+00:00 app[web.1]:     17:       %th{ :class => :span4 } Status
2012-04-09T11:49:14+00:00 app[web.1]: LINE 1: ...ERE (clients.approved = true AND wishes.status != "Resolved"...
2012-04-09T11:49:14+00:00 app[web.1]: : SELECT  "wishes".* FROM "wishes" INNER JOIN "clients" ON "clients"."id" = "wishes"."client_id" WHERE (clients.approved = true AND wishes.status != "Resolved") ORDER BY wishes.id LIMIT 25 OFFSET 0): 
```

当它在本地进行文字比较时，为什么要尝试在 Production 上进行列比较？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T12:27:53.410

您应该将查询更改为 .where('clients.approved = ? AND wish.status != ?', true, 'Resolved') 这让适配器为您构建查询，这应该可以解决不同数据库存在的问题查询语法略有不同

# c++ - 为什么我不能使用 GetProcAddress 在 DLL 中调用 C++ 静态类工厂方法？

> ID：10072954
> 
> 赞同：0
> 
> 时间：2012-04-09T12:08:38.363
> 
> 标签：c++, windows, dll

我正在尝试使用以下标题加载一个假设的插件：

```
#ifndef _DLL_H_
#define _DLL_H_

#if BUILDING_DLL
# define DLLIMPORT __declspec (dllexport)
#else /* Not BUILDING_DLL */
# define DLLIMPORT __declspec (dllimport)
#endif /* Not BUILDING_DLL */

class DLLIMPORT DllClass
{ 

  public:

    virtual ~DllClass(void);
    static DllClass* getPCFilter(); 
    virtual int Process(int a, int b);

  protected:

    DllClass();
};

#endif /* _DLL_H_ */ 
```

我的主机代码确实：

```
HINSTANCE hinstDLL;
hinstDLL = LoadLibrary(L"PCFilter.dll");

if(hinstDLL)
{
    typedef DllClass*(*Factory)();
    Factory fun1;

  fun1 = (Factory)GetProcAddress(hinstDLL, "DllClass::getPCFilter"); 
```

dll 打开，但 GetProcAddress 未找到静态工厂方法。我不应该这样做吗？

我已经尝试摆脱静态方法，而是在类声明之后执行以下操作：

```
extern "C" DLLIMPORT void* getPCFilterInstance()
{
    return (void*)new DllClass();
} 
```

但是，在编译主机源代码时，链接器会抱怨：

```
In function `getPCFilterInstance'::
[Linker Error] undefined reference to `_imp___ZN8DllClassC1Ev' 
```

我可以通过链接到 .a 库来解决这个问题。但是DLL的想法不是不需要在编译时链接吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T12:11:24.290

您忽略了函数名称将被修饰（“名称修饰”）或在 DLL 接口中根本不可见（在给定名称下）的事实。据我所知`GetProcAddress`，链接器不会进行任何名称解构（当静态导入带有导出类的 DLL 时）。

据我所知，最佳实践是提供一个工厂函数，该函数具有未修饰的名称和预定义的调用约定，与 COM 所规定的非常相似（请参阅 参考资料`DllGetClassObject`）。

**注意：**我应该补充一点，根据使用的编译器/链接器，装饰（“损坏”）名称会有所不同。不同的编译器，不同的规则。因此，如果不进行大量修补，它们甚至可能彼此不兼容。

**编辑：**关于问题：

> 但是DLL的想法不是不需要在编译时链接吗？

嗯，是的，也不是。在 Windows 上，整个过程与 unixoid 系统中的过程有些不同。加载器将负责解决依赖关系等问题，但重点是有两种加载 DLL 的方法。一种是静态导入 DLL，在这种情况下，名称解析在程序运行之前完成（或在此之前失败），另一种是通过`LoadLibrary`和朋友动态加载 DLL，然后使用`GetProcAddress`. 后者有一种变体（由链接器支持），称为延迟加载。最终它仍然只是第二种方法。

通过让链接器关心要解析的名称并且仍然能够处理加载 DLL 的失败或在运行时解析名称，**延迟加载**可能会提供您想要的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T12:12:52.713

您可以使用`extern "C"`语句以与您在代码中声明的名称相同的名称导出函数 - 否则它将被 c++ 编译器破坏

# ios - 当我在 splitviewcontroller 中更改方向时，rightbarbuttomitem 超出范围

> ID：10072963
> 
> 赞同：1
> 
> 时间：2012-04-09T12:10:02.447
> 
> 标签：ios, uinavigationcontroller, uisplitviewcontroller, rightbarbuttonitem

我有一个 SplitViewController，导航上有一个 rightbarbuttonitem，当我将方向从纵向更改为横向时，它会调整大小，我的 rightbarbuttonitem 超出范围

rightbarbuttomitem 是一个自定义视图（蓝色背景）。

我附上一些问题的图片：

![NavigationcController 纵向](../Images/411bb2b3cd20ff566959a1ebdb64abe1.png)

![横向导航控制器](../Images/70d60899f57a068fa8afac0ac78fa94d.png)

我的代码：

在 appdelegate 中：

```
masterViewController = [[MasterViewController alloc] initWithFeed:feedData];
    UINavigationController *masterNavigationController = [[UINavigationController alloc] initWithRootViewController:masterViewController];

    detailViewController = [[DetailViewController alloc] initWithFeed:[feedData.secciones objectAtIndex:0]];
    [detailViewController setSeccionData:[feedData.secciones objectAtIndex:0]];
    UINavigationController *detailNavigationController = [[UINavigationController alloc] initWithRootViewController:detailViewController];
    detailNavigationController.navigationBar.tintColor = [UIColor getHexColorWithRGB:@"e2de09" alpha:1.0f];

    self.splitViewController = [[UISplitViewController alloc] init];
    self.splitViewController.delegate = detailViewController;

    masterViewController.delegate=detailViewController;
    self.splitViewController.viewControllers = [NSArray arrayWithObjects:masterNavigationController, detailNavigationController, nil];

    self.window.rootViewController=self.splitViewController; 
```

并在我的 DetailViewController 中使用自定义视图初始化 rightbarbuttonitem：

```
self.navigationItem.rightBarButtonItem=nil;
NSArray *buttons;

    buttons = [NSArray arrayWithObjects:@"send",@"reload",nil];
    tools=[[Toolbar alloc] initWithFrame:CGRectMake(0, 0, 110, 30) parentController:detalleDG buttons:buttons];

tools.delegate=self;    

UIBarButtonItem *btnRight=[[UIBarButtonItem alloc] initWithCustomView:tools.view];
self.navigationItem.rightBarButtonItem=btnRight; 
```

我试过 detailNavigationController.navigationBar.autoresizingMask=UIViewAutoresizingFlexibleWidth; 或 tools.view.autoresizingMask=UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight; 但没有

有什么建议吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T13:35:51.053

在这一行

```
tools=[[Toolbar alloc] initWithFrame:CGRectMake(0, 0, 110, 30) parentController:detalleDG buttons:buttons]; 
```

尝试改变这个

```
tools=[[Toolbar alloc] initWithFrame:CGRectMake(0, 0, xxxxx.frame.size.width, xxxx.frame.size.height) parentController:detalleDG buttons:buttons]; 
```

您可以根据 bartool 的屏幕大小或视图的屏幕更改“xxxxxx”以自动获取宽度和高度

有帮助吗？

# eclipse - Eclipse RCP：将图像添加到列表

> ID：10072964
> 
> 赞同：3
> 
> 时间：2012-04-09T12:10:20.547
> 
> 标签：eclipse, eclipse-rcp, jface

我想将图像添加到 Eclipse RCP 列表中的项目。我提供了一个自定义的 LabelProvider，它看起来像：

```
package com.puresol;

import org.eclipse.jface.viewers.LabelProvider;
import org.eclipse.swt.graphics.Image;
import org.eclipse.ui.ISharedImages;
import org.eclipse.ui.PlatformUI;

public class MyListLabelProvider extends LabelProvider {

    private final Image folderImage = PlatformUI.getWorkbench()
        .getSharedImages().getImage(ISharedImages.IMG_OBJ_FOLDER);

    @Override
    public void dispose() {
        folderImage.dispose();
    }

    @Override
    public String getText(Object element) {
        return element.toString();
    }

    @Override
        public Image getImage(Object element) {
        return folderImage;
    }
} 
```

我通过以下方式添加此标签提供程序：

```
listViewer.setLabelProvider(new MyListLabelProvider()); 
```

我确实得到了正确的文字，但没有图像。我确信由于调试代码而使用了我的标签提供程序，并且我也可以更改提供的标签文本。我只是没有看到图像。图像已加载且非空。

我需要打开什么才能显示标签？我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T12:14:45.707

我不确定`ListViewer`是否能够显示图像。尝试切换到单列`TableViewer`，看看是否有帮助。

# javascript - 使用 JQuery 检查所选文本是否是较大节点的一部分

> ID：10072965
> 
> 赞同：0
> 
> 时间：2012-04-09T12:10:23.540
> 
> 标签：javascript, jquery, html

我正在使用 JQuery 编写文档编辑器，并且已经实现了基本格式设置：选择文本，单击一个按钮，文本被包含在适当的标签中。

为了改善这一点，我现在需要检查选择前后的文本，查看标签是否已经打开等。有没有简单的方法来检查选择是否是更大节点的一部分？

例如，如果我要在下面的文本中选择“跳转”并单击，正确的行为是删除`<strong>`它，因为它已经在一个`<strong>`节点中。

```
The <strong>quick brown fox jumps over the lazy dog</strong>. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T12:27:55.547

将其包裹在临时标签中，使其成为可选的 DOM 元素

```
The <strong>quick brown fox <tmp>jumps</tmp> over the lazy dog</strong>. 
```

然后调用临时标签的父级并将其与正在应用的标签进行比较。

```
var $tmp = $('tmp');
var enclosingTagType = $tmp.parent()[0].tagName;
if (enclosingTagType == requestedTagType {
  ....profit...
} 
```

甚至

```
$tmp.closest(requestedTagType) 
```

看看它是否包裹在所有...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T12:52:56.377

在这里，试试这个：

[http://jsbin.com/asajuk/7/edit](http://jsbin.com/asajuk/7/edit)

```
var getSelectedNode = function ()
    {
        var node, selection;
        if (window.getSelection)
        {
            selection = getSelection();
            node = selection.anchorNode;
        }
        if (!node && document.selection)
        {
            selection = document.selection
            var range = selection.getRangeAt ? selection.getRangeAt(0) : selection.createRange();
            node = range.commonAncestorContainer ? range.commonAncestorContainer : range.parentElement ? range.parentElement() : range.item(0);
        }
        if (node)
        {
            return (node.nodeName == "#text" ? node.parentNode : node);
        }
    }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T14:12:18.567

> 为了改善这一点，我现在需要检查选择前后的文本，查看标签是否已经打开等。有没有简单的方法来检查选择是否是更大节点的一部分？

（标签是 [in HTML, with `<`] 打开的，但你真正的意思是[一个*元素*是否已经*开始*](http://www.w3.org/TR/REC-html40/intro/sgmltut.html#h-3.2.1)。区别对于你理解你在这里做什么至关重要。）

因为文档中的一个节点是文档*树*的一部分，而一个文本节点最多可以是一个非文本节点的子节点，所以*每个*文本选择都是“更大节点的一部分”。但是，你是否能找出那个节点是什么，是否*容易*做到，取决于你的能力和浏览器，因为它取决于浏览器的布局引擎使用的 DOM 实现。

例如，在基于 Gecko 的浏览器（如 Firefox）和基于 WebCore 的浏览器（如 Chrome/Google Chrome）中，您可以执行

```
var selection = window.getSelection(); 
```

在选择。然后，`selection`您将获得对实现`Selection`(Gecko) 或`DOMSelection`(WebCore) 接口的对象的引用，该对象具有诸如`anchorNode`引用实现`Text`接口的对象的属性（请参阅[MDN](https://developer.mozilla.org/en/DOM/window.getSelection)上的 Gecko DOM 参考）。

该对象表示选择开始所在的文本节点，它有一个`parentNode`属性可以让您获取元素节点对象，并通过其`tagName`or`nodeName`属性获取元素类型名称：

```
var textParent = selection.anchorNode.parentNode;
var textParentType = textParent.nodeName; 
```

的值`textParent.parentNode`也可以用来向上遍历文档树的上一层。

`anchorNode`当和`focusNode`属性引用不同的文本节点对象时，必须格外小心，因为选择通常不仅跨越多个文本节点，而且跨越多个元素。也就是说，在表格中，用户可以轻松选择文本“foobar”，如`<td>foo</td><td>bar</td>`.

通过运行时功能测试和异常处理，您可以确定支持哪个接口，而无需求助于容易出错的浏览器嗅探。

> 例如，如果我要在下面的文本中选择“跳转”并单击，正确的行为是删除`strong`它，因为它已经在一个`strong`节点中。

您可能需要重新考虑这一点。`strong`也许你只是选择了一个不好的例子，但元素中的元素可以有价值`strong`；内部元素的 CSS 属性不一定是多余的。另一个例子是强调`em`用户可能想要使用该`strong`元素的元素中已经存在的文本。

避免使用 jQuery；你不需要它，仔细检查你甚至不会想要它。

# java - WebService:wsdl 文件没有生成

> ID：10072972
> 
> 赞同：0
> 
> 时间：2012-04-09T12:10:58.610
> 
> 标签：java, web-services

我正在构建一个 web 服务，但是当我测试 webservice 时发生错误。并且 wsdl 文件也没有生成。所以如何从 web 服务生成 wsdl 文件？我使用了 netbeans IDE 6.9.1。我的代码如下：

```
@WebService(targetNamespace = "http://my.org/ns/")
public class vendor1 implements Serializable {

  static String licenseType = "Subscription";
  String re = "successfully";

  @WebMethod(operationName = "licence")
  public String licence(@WebParam(name = "fullName") String fullName, @WebParam(name = "company") String company, @WebParam(name = "emailID") String emailID, @WebParam(name = "phone") String phone, @WebParam(name = "address") String address, @WebParam(name = "city") String city, @WebParam(name = "state") String state, @WebParam(name = "country") String country, @WebParam(name = "zipcode") String zipcode, @WebParam(name = "productID") String productID, @WebParam(name = "activationPeriod") int levelID, @WebParam(name = "levelID") int activationPeriod, @WebParam(name = "password") String password) throws Exception {
    Connection con = connectToDb();
     re = insertIntoCustomerTlb(con, fullName, company, emailID, phone, address, city, state, country, zipcode, productID, levelID);
     re= insertIntoLicenseKeyTlb(con, emailID, licenseType, fullName, productID, activationPeriod);
     re=insertIntoNoOfLicensesTlb(con, emailID);
     con.close();

     //String re="successfully";
     return re;
  }

  public Connection connectToDb() throws ClassNotFoundException, SQLException {
    Connection con = null;
    // String re = null;
    String url = "jdbc:mysql://localhost:3306/";
    String db = "plm";
    String driver = "com.mysql.jdbc.Driver";
    Class.forName(driver);
    con = DriverManager.getConnection(url + db, "root", "root");
    return con;
  }

  public String insertIntoCustomerTlb(Connection con, String fullName, String company, String email, String phone, String address, String city, String state, String contry, String zipCode, String productID, int levelID) {
    if (company == null) {
        company = " ";
    }
    /*if(address==null)
    {
    address=" ";
    }
    if(city==null)
    {
    city=" ";
    }
    if(state==null)
    {
    state=" ";
    }
    String re=null;*/

    /*Connection con = null;

    String url = "jdbc:mysql://localhost:3306/";
    String db = "jdbctutorial";
    String driver = "com.mysql.jdbc.Driver";*/
    String CustomerInfoQuery = "insert into `tlb_customer_master`(`Full_Name`,`Company`,`Email`,`Phone`,`Address`,`City`,`State`,`Country`,`Zip_Code`,`Product_ID`,`Level_ID`) values (?,?,?,?,?,?,?,?,?,?,?)";
    //try{
    //  Class.forName(driver);
    //con = DriverManager.getConnection(url+db,"root","root");
    try {
        //Statement st = con.createStatement();
        //int rowsAffected =st.executeUpdate(");
        // System.out.println("1 row affected");
        PreparedStatement ps = con.prepareStatement(CustomerInfoQuery);
        ps.setString(1, fullName);
        ps.setString(2, company);
        ps.setString(3, email);
        ps.setString(4, phone);
        ps.setString(5, address);
        ps.setString(6, city);
        ps.setString(7, state);
        ps.setString(8, contry);
        ps.setString(9, zipCode);
        ps.setString(10, productID);
        ps.setInt(11, levelID);
        ps.execute(CustomerInfoQuery);
        ps.close();
    } catch (SQLException s) {
        re = "error";
    }
    return re;
}

public String insertIntoCustomerValidationTlb(Connection con, String email, String password) {
    String CustomerInfoQuery = "insert into `tlb_customer_validation_master`(`Email`,`Password`) values (?,?)";
    try {

        PreparedStatement ps = con.prepareStatement(CustomerInfoQuery);

        ps.setString(1, email);
        ps.setString(2, password);

        ps.execute(CustomerInfoQuery);
        ps.close();
    } catch (SQLException s) {
        re = "error";
    }

    return re;

}

public String insertIntoLicenseKeyTlb(Connection con, String emailID, String licenseType, String fullName, String productID, int activationPeriod) {

    try {
        Statement st = con.createStatement();
        if (activationPeriod == 1) {
            String queryLicenseKey1 = "insert into `tlb_license_key_master`(`Email`,`License_Type`,`Full_Name`,`Product_ID`,`Activation_Date`,`Expiry_Date`) VALUES('" + emailID + "','" + licenseType + "','" + fullName + "','" + productID + "',now(),DATE_ADD(now(), INTERVAL 1 MONTH))";
            // String queryLicenseKey2 ="insert into tlb_license_key_master (Major_Version,Minor_Version) values(select Major_Version,Minor_Version from tlb_product_master where Product_ID="+productID+")";
            int rowsAffected1 = st.executeUpdate(queryLicenseKey1);
        }
        if (activationPeriod == 6) {
            String queryLicenseKey1 = "insert into `tlb_license_key_master`(`Email`,`License_Type`,`Full_Name`,`Product_ID`,`Activation_Date`,`Expiry_Date`) VALUES('" + emailID + "','" + licenseType + "','" + fullName + "','" + productID + "',now(),DATE_ADD(now(), INTERVAL 6 MONTH))";
            // String queryLicenseKey2 ="insert into tlb_license_key_master (Major_Version,Minor_Version) values(select Major_Version,Minor_Version from tlb_product_master where Product_ID="+productID+")";
            int rowsAffected1 = st.executeUpdate(queryLicenseKey1);
        }
        if (activationPeriod == 12) {
            String queryLicenseKey1 = "insert into `tlb_license_key_master`(`Email`,`License_Type`,`Full_Name`,`Product_ID`,`Activation_Date`,`Expiry_Date`) VALUES('" + emailID + "','" + licenseType + "','" + fullName + "','" + productID + "',now(),DATE_ADD(now(), INTERVAL 12 MONTH))";
            // String queryLicenseKey2 ="insert into tlb_license_key_master (Major_Version,Minor_Version) values(select Major_Version,Minor_Version from tlb_product_master where Product_ID="+productID+")";
            int rowsAffected1 = st.executeUpdate(queryLicenseKey1);
        }

        //int rowsAffected2 =st.executeUpdate(queryLicenseKey2);
        st.close();
    } catch (SQLException ex) {
        re = "error";
    }
    return re;
}

public String insertIntoNoOfLicensesTlb(Connection con, String emailID) {

    try {
        String queryNoOfLicenses1 = "select * from tlb_no_of_licenses where Email= '" + emailID + "'";

        Statement st = con.createStatement();
        ResultSet rs = st.executeQuery(queryNoOfLicenses1);

        int count = 0;
        while (rs.next()) {
            count++;
        }
        if (count == 0) {
            String queryNoOfLicenses2 = "insert into `tlb_no_of_licenses` values('" + emailID + "',1,1,0)";
            int rowsAffected2 = st.executeUpdate(queryNoOfLicenses2);
        } else {
            String queryNoOfLicenses2 = "UPDATE `tlb_no_of_licenses` SET No_Of_Licenses=No_Of_Licenses+1,Active_Licenses=Active_Licenses+1,Disabled_Licenses=No_Of_Licenses-Active_Licenses";
            int rowsAffected2 = st.executeUpdate(queryNoOfLicenses2);

        }
        rs.close();
        st.close();
    } catch (SQLException ex) {
        re = "error";
    }
    return re;
}

  public String insertBillingTlb(Connection con, String email) {
    String CustomerInfoQuery = "insert into `tlb_customer_validation_master`(`Email`,`Bill_Paid`) values (?,?)";
    try {
       PreparedStatement ps = con.prepareStatement(CustomerInfoQuery);

       ps.setString(1, email);
       ps.setString(2, "N");

       ps.execute(CustomerInfoQuery);
       ps.close();
     } catch (SQLException s) {
       re = "error";
     }
     return re;
  }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T12:14:56.890

由于您使用的是 Netbeans，因此创建 Web 服务相当简单。

请阅读这篇文章： http: [//netbeans.org/kb/docs/websvc/jax-ws.html](http://netbeans.org/kb/docs/websvc/jax-ws.html)

按照步骤操作，如果您有疑问，请在此处发布

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T12:54:14.407

您必须排除所有您不想被视为 Web 服务方法的公共方法：

```
Caused by: com.sun.xml.internal.bind.v2.runtime.IllegalAnnotationsException: 3 counts of IllegalAnnotationExceptions
java.sql.Connection is an interface, and JAXB can't handle interfaces.
    this problem is related to the following location:
        at java.sql.Connection
        at private java.sql.Connection jaxws.InsertIntoCustomerTlb.arg0
        at jaxws.InsertIntoCustomerTlb
java.sql.Connection does not have a no-arg default constructor.
    this problem is related to the following location:
        at java.sql.Connection
        at private java.sql.Connection jaxws.InsertIntoCustomerTlb.arg0
        at jaxws.InsertIntoCustomerTlb
java.lang.StackTraceElement does not have a no-arg default constructor.
    this problem is related to the following location:
        at java.lang.StackTraceElement
        at public java.lang.StackTraceElement[] java.lang.Throwable.getStackTrace()
        at java.lang.Throwable
        at private java.lang.Throwable jaxws.ClassNotFoundExceptionBean.exception
        at jaxws.ClassNotFoundExceptionBean 
```

`@WebMethod(exclude = true)`解决方案：向所有不想公开为 Web 服务方法的公共方法添加一个

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-11T23:58:23.413

您需要添加`-J-Djavax.xml.accessExternalSchema=all`到`netbeans_default_options`文件 /etc/netbeans.conf 中。

在此更改之后，您的 netbeans 将能够使用您的 Web 服务解析 WSDL 文件。

# c# - 调用工作流服务而不将其作为服务添加到解决方案中

> ID：10072974
> 
> 赞同：1
> 
> 时间：2012-04-09T12:11:21.970
> 
> 标签：c#, workflow-foundation, workflow-foundation-4, workflow-activity, workflowservice

我正在开发一个调用工作流服务的 asp .net 项目。我想调用该服务而不将其作为服务添加到解决方案中。我正在使用以下代码

```
XNamespace ns = "http://schemas.microsoft.com/2003/10/Serialization/";

var factory = new ChannelFactory<IGenericService>(new BasicHttpBinding(), new EndpointAddress("http://localhost:2757/BPMNSimple.xamlx"));

var proxy = factory.CreateChannel();

var request = Message.CreateMessage(MessageVersion.Soap11, "http://tempuri.org/IService/TestSimple", new XElement(ns + "string", "45"));

var response = proxy.GetData(request); 

var xml = (XElement)XElement.ReadFrom(response.GetReaderAtBodyContents());
var message = xml.Value;
lblMessage.Text = message.ToString(); 
```

在 xamlx 文件中，接收活动采用一个字符串参数，而 sendreplytoreceive 活动提供 2 个参数作为输出。运行此代码时出现以下错误：

```
System.ServiceModel.CommunicationException: The server did not provide a meaningful reply;   
this might be caused by a contract mismatch, a premature session shutdown or an internal server error. Server stack trace: 
at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout) 
at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation) 
at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message) Exception rethrown at [0]: 
at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg) 
at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type) 
at _Default.IGenericService.GetData(Message request) 
at _Default.Page_Load(Object sender, EventArgs e) in c:\Users\marios\Documents\Visual Studio 2010\WebSites\WebSite2\Default.aspx.cs:line 63 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T12:18:01.633

首先，在服务端打开 IncludeExceptionDetailsInFaults。您将能够从[http://msdn.microsoft.com/en-us/library/system.servicemodel.description.servicedebugbehavior.includeexceptiondetailinfaults.aspx](http://msdn.microsoft.com/en-us/library/system.servicemodel.description.servicedebugbehavior.includeexceptiondetailinfaults.aspx)获得更多信息。

您需要在服务 web.config 中添加如下内容：

```
 <serviceDebug includeExceptionDetailInFaults="true" /> 
```

Eidt：所以接下来要尝试的是使用内置的错误处理来查看您是否可以看到服务端发生了什么。阅读这篇[MSDN 文章](http://msdn.microsoft.com/en-us/library/ms733025.aspx)。您需要添加以下内容：

```
<configuration>
 <system.diagnostics>
  <sources>
        <source name="System.ServiceModel" 
                switchValue="Information, ActivityTracing"
                propagateActivity="true">
        <listeners>
           <add name="traceListener" 
               type="System.Diagnostics.XmlWriterTraceListener" 
               initializeData= "c:\log\Traces.svclog" />
        </listeners>
     </source>
  </sources>
</system.diagnostics> 
```

这将创建一个 WCF 日志文件，您可以（希望）在其中看到与您的请求相关的错误。

# javascript - 一个 onClick 中有更多功能的问题

> ID：10072977
> 
> 赞同：2
> 
> 时间：2012-04-09T12:11:27.523
> 
> 标签：javascript

我有两个功能，我需要在一个中执行`onClick`。第一个是确认提交，如果用户按下`yes`它应该执行第二个功能。它不适合我。请提供任何帮助。

在我的代码下方：

```
<Script>

function checkSubmit(){

if(confirm('Are you sure you want to submit the data?');)
    sendData();
}

</Script> 
```

按钮：

```
<input type="submit" id="send_data"  class="send_data" value="Send" onclick="checkSubmit()"/> 
```

谢谢大家^_^

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T12:16:32.557

你几乎是对的。我认为你的分号在你的 if 语句中搞砸了。

***[看看这个 jsFiddle：](http://jsfiddle.net/DotNetScott/qRyp4/)***

```
function checkSubmit() { 
    if (confirm('Are you sure you want to submit the data?')) 
        sendData(); 
}

function sendData() { alert("data sent"); } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T12:15:50.830

您应该使用标准的事件绑定机制：

```
elem.addEventListener('click', yourFunc, false); // for good browsers

elem.attachEvent('onclick', yourFunc);  // for old IE versions 
```

您可以根据需要添加任意数量的侦听器

这是一个参考：

[https://developer.mozilla.org/en/DOM/element.addEventListener#Legacy_Internet_Explorer_and_attachEvent](https://developer.mozilla.org/en/DOM/element.addEventListener#Legacy_Internet_Explorer_and_attachEvent)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T12:24:55.217

只是你的 if 语句中有一个分号。你需要这样的东西：

```
function checkSubmit() {
    var b = confirm('Are you sure you want to submit the data?');
    if ( b ) {
        sendData();
    } else {
        return false;
    }
} 
```

编辑：如果您想停止提交表单，您可以这样做：

```
<form name="example" action="your url here" method="get" onsubmit="return checkSubmit();">
    <input type="text" name="name" />
    <input type="submit" id="send_data" class="send_data" value="Send" />
</form> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-09T12:29:37.777

```
<Script>  

function checkSubmit(){

if(confirm('Are you sure you want to submit the data?'))  //you have small error here
    sendData();

 }
</Script> 
```

# c++ - 如何在eclipse中设置C++标准

> ID：10072982
> 
> 赞同：3
> 
> 时间：2012-04-09T12:11:53.807
> 
> 标签：c++, eclipse

我通常通过在 Eclipse 中添加 -std=c++0x 来设置标准`project properties --> C/C++ Build --> Settings --> Tool Settings --> Miscellaneous`。还有其他方法可以设置吗？

# jakarta-ee - 启动停止 JMS 消息侦听器

> ID：10072983
> 
> 赞同：0
> 
> 时间：2012-04-09T12:11:54.180
> 
> 标签：jakarta-ee, ejb, jms, message-driven-bean

我编写了两个类，一个 JMS 消息发送器和 JMS 消息监听器类，它们需要与在不受我控制的其他系统上配置的 SonicMQ 交互。我需要将 JMS 消息发送到特定队列并从其他队列接收 JMS 消息。这两个队列都是使用 SonicMQ 在其他服务器上配置的。

现在我可以通过在需要的地方创建一个实例来调用 JMS 发送者类。

但是如何启动实现 MessageDrivenBean、MessageListener 的 JMS 消息侦听器？我浏览了一些需要在 ejb-jar.xml 中配置的文档。但是我可以控制它的收听吗？

另外，我们是否需要在 weblogic-ejb-jar.xml 中进行任何配置，因为服务器不在我的控制范围内？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T08:34:41.717

我在 weblogic 中实现了外部服务器以连接到 SonicMQ。只需进行配置，weblogic 就会注意与 SonicMQ 的连接。

# c - C中的简单http服务器，多个进程无法正常工作

> ID：10072989
> 
> 赞同：2
> 
> 时间：2012-04-09T12:12:17.203
> 
> 标签：c, http, tcp

## 通过添加 fseek(file, 0, 0) 一旦完成响应来解决。

我正在编写一个非常简单的 http 服务器，它将用 HTTP 响应回复任何 GET 请求。响应内容将在程序启动时传递给程序，例如

```
$./server test1.html 999 
```

该命令将打开监听 999 端口，如果有任何 GET 请求，服务器将发送“http headers”+“test1.html 的内容”给请求的客户端。

fork() 部分不能正常工作，我第一次可以得到正确的响应，但是之后，新客户端将不会从服务器收到任何东西（cookie 和缓存被清除）。

我调试了，程序会 fprintf() 正确的内容，问题是“客户端不会收到它们”。

下面是我的代码，有一个名为 get_mime_type() 的函数，你可以忽略它并将 mime 设置为“text/html”或任何你想要的。

有什么提示吗？

顺便说一句，我也想避免使用多个进程来处理多个连接，关于实现单进程、单线程 http 服务器的任何想法？

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <errno.h>
#include <string.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <sys/wait.h>
#include <sys/stat.h>
#include <netinet/in.h>
#include <netdb.h>
#include <arpa/inet.h>
#include <signal.h>
#include <dirent.h>
#include <time.h>
#include <unistd.h>

#define BACKLOG 1024
#define RFC1123FMT "%a, %d %b %Y %H:%M:%S GMT"
#define DEBUG 1

/**
 * Get the mime type of a file
 *
 * Pre-Condition: 1\. mime-types.tsv is in current directory, and it is correct
 *                2\. file exists and all right
 */
char *get_mime_type(char *filename) {
  // Get extension
  char *ext;   // file extension
  if ((ext = strrchr(filename, '.')) == NULL) {
    fprintf(stderr, "Error: Cannot get the extension of \"%s\".\n", filename);
    exit(1);
  }
  ext += sizeof(char);  // get rid of the `.'

  // Read in mime-types.tsv and try to get the mime-type regarding to current file's extension
  // No detailed error-checking according to pre-condition
  FILE *mime_file;
  mime_file = fopen("mime-types.tsv", "r");

  int BUF_MAX = 1024;
  char *buffer = (char *)malloc(sizeof(char) * BUF_MAX);
  char *mime;
  fgets(buffer, BUF_MAX, mime_file);
  int linum = atoi(buffer);
  while (linum-- > 0) {
    fgets(buffer, BUF_MAX, mime_file);
    if ((strncasecmp(buffer, ext, strlen(ext))) == 0) {
      buffer[strlen(buffer) - 1] = '\0';
      mime = buffer;
      while (*mime != ' ') {
    mime += sizeof(char);
      }
      mime += sizeof(char);
      free(buffer);   // TODO: is this all right?
      fclose(mime_file);
      return mime;
    }
  }
  free(buffer);
  fclose(mime_file);
  return NULL;
}

void sigchld_handler(int s)
{
  while(waitpid(-1, NULL, WNOHANG) > 0);
}

/**
 * Get sockaddr, IPv4 or IPv6:
 */
void *get_in_addr(struct sockaddr *sig_action)
{
  if (sig_action->sa_family == AF_INET) {
    return &(((struct sockaddr_in*)sig_action)->sin_addr);
  }

  return &(((struct sockaddr_in6*)sig_action)->sin6_addr);
}

/**
 * Open a socket and listen to it, send information once got requests
 */
int run_server(char *filename, char *port) {
  // open file and get its information
  FILE *file;
  struct stat statbuf;
  if (stat(filename, &statbuf) < 0) {
    fprintf(stderr, "Error: Unable to open \"%s\".\n", filename);
    exit(1);
  }
  if (S_ISDIR(statbuf.st_mode)) {
    fprintf(stderr, "Error: %s is a directory, expected a file.\n", filename);
    exit(1);
  }
  if ((file = fopen(filename, "r")) == NULL) {
    fprintf(stderr, "Error: Unable to open \"%s\".\n", filename);
    exit(1);
  }
  char *mime = get_mime_type(filename);
  if (mime == NULL) {
    fprintf(stderr, "Error: the type of \"%s\" cannot be recognised.\n", filename);
    exit(1);
  }
  int file_len = S_ISREG(statbuf.st_mode) ? statbuf.st_size : -1;
  time_t mtime = statbuf.st_mtime; // last modified time, used in header

  // init sock
  int server_fd, client_fd;
  struct addrinfo hints, *server_info, *p_server_info;
  struct sockaddr_storage client_addr;
  socklen_t sock_in_size;
  struct sigaction sig_action;
  int yes = 1;
  char client_ip[INET6_ADDRSTRLEN];
  int return_value; // store return value of getaddrinfo

  memset(&hints, 0, sizeof(hints));
  hints.ai_family = AF_UNSPEC;
  hints.ai_socktype = SOCK_STREAM;
  hints.ai_flags = AI_PASSIVE;

  if ((return_value = getaddrinfo(NULL, port, &hints, &server_info)) != 0) {
    fprintf(stderr, "getaddrinfo: %s\n", gai_strerror(return_value));
    return 1;
  }
  // TODO ? free hints? free p_server_info
  // bind
  for (p_server_info = server_info; p_server_info != NULL; p_server_info = p_server_info->ai_next) {
    if ((server_fd = socket(p_server_info->ai_family, p_server_info->ai_socktype,
                p_server_info->ai_protocol)) == -1) {
      perror("server: socket");
      continue;
    }

    if (setsockopt(server_fd, SOL_SOCKET, SO_REUSEADDR, &yes,
           sizeof(int)) == -1) {
      perror("setsockopt");
      exit(1);
    }

    if (bind(server_fd, p_server_info->ai_addr, p_server_info->ai_addrlen) == -1) {
      close(server_fd);
      perror("server: bind");
      continue;
    }
    break;
  }

  if (p_server_info == NULL) { // not bind
    fprintf(stderr, "server: failed to bind\n");
    return 2;
  }

  freeaddrinfo(server_info);

  // listen
  if (listen(server_fd, BACKLOG) == -1) {
    perror("listen");
    exit(1);
  }

  // reap dead processes
  sig_action.sa_handler = sigchld_handler;
  sigemptyset(&sig_action.sa_mask);
  sig_action.sa_flags = SA_RESTART;
  if (sigaction(SIGCHLD, &sig_action, NULL) == -1) {
    perror("sigaction");
    exit(1);
  }

  printf("server: waiting for connections...\n");

  while (1) {
    sock_in_size = sizeof(client_addr);
    client_fd = accept(server_fd, (struct sockaddr *) &client_addr, &sock_in_size);
    if (client_fd == -1) {
      perror("accept");
      continue;
    }
    inet_ntop(client_addr.ss_family,
          get_in_addr((struct sockaddr *)&client_addr),
          client_ip, sizeof(client_ip));
    printf("server: got connection from %s\n", client_ip);

    if (!fork()) { // child process
      close(server_fd);
      FILE* response = fdopen(client_fd, "a+"); // response file
      // response header
      time_t now;
      char timebuf[128];
      now = time(NULL);
      strftime(timebuf, sizeof(timebuf), RFC1123FMT, gmtime(&now));

      fprintf(response, "HTTP/1.1 200 OK\r\n");
      fprintf(response, "Server: server\r\n");
      fprintf(response, "Date: %s\r\n", timebuf);

      strftime(timebuf, sizeof(timebuf), RFC1123FMT, gmtime(&mtime));
      fprintf(response, "Last-Modified: %s\r\n", timebuf);
      fprintf(response, "Content-Type: %s\r\n", mime);
      fprintf(response, "Content-Length: %d\r\n", file_len);
      fprintf(response, "Connection: close\r\n");
      fprintf(response, "\r\n");

      // response content
      char buf[1024];
      int n;
      while ((n = fread(buf, 1, sizeof(buf), file)) > 0) {
        fwrite(buf, 1, n, response);
      }
      fclose(response);
      fclose(file);
      close(client_fd);
      exit(0);
    }
  }
  fclose(file);
  close(server_fd);
  return 0;
}

int main(int argc, char *argv[])
{
  if (argc != 3) {
    fprintf(stderr, "Usage: $server filename port\n");
    exit(1);
  }
  char *filename = argv[1];
  char *port = argv[2];
  return run_server(filename, port);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T12:56:14.260

> 顺便说一句，我也想避免使用多个进程来处理多个连接，关于实现单进程、单线程 http 服务器的任何想法？

你可能想看看`select()/poll()/epoll()`它们都提供了一种机制来检查是否有任何被监视的文件描述符可用于读取或写入。如果您想了解有关事件驱动编程的更多信息，我建议您自己使用`epoll()`.

如果您不想编写所有事件处理代码（这真的很无聊，相信我），请查看[libevent](http://www.libevent.org)。除了事件处理框架，它还提供了一个非常基本的 HTTP-Server，您可能想看看。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T13:02:07.230

循环结束时 get_mime_type() 中的 free() 是不行的。mime 指向它，然后你将 mime 返回给调用者。

顺便说一句：(sizeof (char) == 1)，并且您不应该强制转换 malloc() 的返回值。

```
for (p_server_info = server_info; p_server_info != NULL; p_server_info = p_server_info->ai_next) {
    if ((server_fd = socket(p_server_info->ai_family, p_server_info->ai_socktype,
                p_server_info->ai_protocol)) == -1) {
      perror("server: socket");
      continue;
    } 
```

看来您有一个结构服务器信息的链接列表。对于列表中的每个元素，您都在分配一个套接字，但 server_fd 在每次循环迭代时都会重新分配。似乎对于 > 1 的列表长度，您在这里泄漏了文件描述符。

```
// response content
      char buf[1024];
      int n;
      while ((n = fread(buf, 1, sizeof(buf), file)) > 0) {
        fwrite(buf, 1, n, response);
      } 
```

您需要在此处检查并使用 fwrite() 的返回值。response 是一个 fdopen()ed 文件描述符，它可能在任何时候都不能完全写入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-02T17:01:28.917

原作者已经解决了。我认为问题很少，应该以这种方式解决。

1.  到服务器的文件应该在子进程侧打开并在那里关闭。

> `if ((file = fopen(filename, "r")) == NULL) { fprintf(stderr, "Error: Unable to open \"%s\".\n", filename); exit(1); }`

这个块应该在子进程内完成。

2.  在父进程中我们不需要client_fd，所以它应该被关闭。

在这些更改之后，使用 telnet 连接会得到正确的结果。早些时候，客户端没有获取文件内容，并且客户端直到超时才关闭。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-09T12:20:30.307

“简单”和“HTTP”不能很好地混合。**[HTTP](http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol)标准**（例如[RFC2616](http://www.ietf.org/rfc/rfc2616.txt)等）**很复杂**（超过一百页）。不要假装在一个简单的自包含程序中完全实现了那个复杂的协议。

所以你要么实现一个小的不完整的 HTTP 子集（它可能不适用于大多数浏览器或 HTTP 客户端），或者你必须使用一些可以帮助你制作完整 HTTP 服务器的东西，例如一些 HTTP 服务器库，如[onion](https://github.com/davidmoreno/onion)或[libmicrohttpd](http://www.gnu.org/software/libmicrohttpd/)（和它们不再很简单），或者插入您的 Web 应用程序，可能使用[fastcgi](http://en.wikipedia.org/wiki/FastCGI)（或 SCGI、Jserve 等）将其“连接”或“插入”到真正的 Web 服务器中。

# css - 带有表格或无表格表单的响应式 HTML 页面设计（PC、平板电脑、智能手机）

> ID：10072991
> 
> 赞同：1
> 
> 时间：2012-04-09T12:12:20.497
> 
> 标签：css, html, twitter-bootstrap, responsive-design

我正在开发一个基于 PC 的 Web 应用程序，但预计在不久的将来会支持平板电脑和智能手机。我们使用 Twitter Bootstrap (http://twitter.github.com/bootstrap/index.html) 和 JQuery 作为 CSS/Javascript 核心。

对于大多数以前的开发，我们使用表格来布局我们的表单，因为大多数应用程序都是针对桌面使用的，因此使用表格来布置表单（大多数是两列）以确保对齐等是正确的。

然而，现在我们正在考虑添加屏幕空间有限的移动设备，并且考虑到并非所有表格都可以在智能手机中访问，我开始想知道我们是否应该保留表格并创建无表格表格对于移动设备。我确信 Twitter Bootstrap 将为我们提供对无表格表单的必要支持，但我仍然想知道它是否是 2012 年的一个主要问题？

作为一个新的应用程序，我们还可以选择强制用户使用最新的浏览器版本来访问该应用程序，但这对移动优先设计意味着什么？

我知道多年来一直在讨论这个问题，但我正在寻找 2012 年使用可用工具查看这个问题的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T16:15:28.387

在我看来，Twitter Bootstrap 非常适合编写无表格表单。该代码对于表单来说有点臃肿，但它在不同的屏幕分辨率上重新调整大小非常好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T19:12:12.310

使用引导程序！

它具有响应式设计，这意味着它旨在适用于各种屏幕尺寸。

[在这里，您可以获得表格的官方文档。](http://twitter.github.com/bootstrap/base-css.html#forms)

您可以尝试查看它在小屏幕设备上的显示效果，只需调整屏幕宽度，使其更窄。当您调整屏幕大小时，您会看到所有组件都重新适应屏幕。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T12:25:41.693

您可以创建自己的自定义框架（可以这么说），该框架将基于响应式或流体设计。它将是基于 div（或无表格）的结构，没有任何固定的 px 值。（即 em/% 中的所有填充/边距/字体/宽度等）与正常的基于固定像素的 CSS 相比，CSS 会变得稍微复杂一些。

我使用响应式设计创建了一个新页面，它在所有现代桌面浏览器以及移动/平板电脑上都运行良好。

# css - CSS3 过渡想要添加颜色并将其淡化

> ID：10072993
> 
> 赞同：24
> 
> 时间：2012-04-09T12:12:28.283
> 
> 标签：css, css-transitions

我想让一个 DIV 背景（没有背景颜色）闪烁红色，然后再次变为空白。现在我已经使用 JS 向有问题的 DIV 添加了一个新的 CLASS（它添加了红色），并使用 CSS3 为背景颜色添加了缓动。但它可以缓解它，我想要的是它变成红色然后缓解。我想我可以通过使用 JS 在延迟后添加多个 CLass 来做到这一点。但是 CSS3 能完全做到这一点吗？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-04-09T12:40:10.453

如果你想要像高亮一样的东西，你可能想要使用 CSS3 动画。旧版浏览器不支持它们。检查[caniuse](https://caniuse.com/css-animation)。

单击链接时会调用突出显示。这是 CSS（没有供应商前缀）：

```
@keyframes highlight {
    0% {
        background: red
    }
    100% {
        background: none;
    }
}

#highlight:target {
    animation: highlight 1s;
}
```

```
<div id="highlight"><a href="#highlight">Highlight</a></div>
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T12:30:07.227

一种方法是使用 jQuery UI animate 方法，该方法扩展了“普通”jQuery animate() 以影响背景颜色等内容。

像这样的转换在 css3 中是可能的，但显然没有那么广泛的浏览器支持。

```
#maDiv {
   -webkit-transition:background-color 0.5s linear;
   -moz-transition: background-color 0.5s linear;
   -o-transition: background-color 0.5s linear;
   height: 20px;
   width: 20px;
   background:#000;
}

#maDiv:hover {
    background: #ff0;
} 
```

这将在用户悬停 Div 时淡出颜色，并在鼠标离开时淡出，超过 0.5 秒。有关浏览器支持的详细信息，请参阅此处的“css3 转换”：http: [//www.html5rocks.com/en/features/presentation](http://www.html5rocks.com/en/features/presentation)

# php - 在 PHP 和 MySQL 中一次从多个表单中插入多个值

> ID：10072996
> 
> 赞同：3
> 
> 时间：2012-04-09T12:12:44.587
> 
> 标签：php, mysql, html, insert

我正在为我的论文创建一个系统供学校使用。有一个方面我无法工作。我希望能够同时为多个人设置出勤率。这里有一张图片可以向您展示表单的外观：

![多次出席表格](../Images/7ebad9d4c5da25ea0a7e5795021cbc58.png)

所有值都设置为**present** ，因此如果需要，只能将一对夫妇更改为**缺席。**按下表单底部的按钮后，我希望它导航到确认页面。我使用 MySQl 查询来获取尚未设置出勤的员工列表，并使用**包含**标签将其放置在 HTML 表单中。我必须生成列表的代码如下：

```
<?php
// Get a list of all items and display them in ID order
$dynamicList = "";
$sql = mysql_query("SELECT StaffID, StaffName FROM StaffDetails WHERE StaffID NOT IN (SELECT StaffID FROM StaffAttendance WHERE AttendanceDate = curdate()) ORDER BY StaffID ASC");

// Show list
$productCount = mysql_num_rows($sql);
$setTodaysAttendanceList = "";
if ($productCount > 0) {
while($row = mysql_fetch_array($sql)) {
    $StaffID = $row["StaffID"];
    $StaffName = $row["StaffName"];
    $setTodaysAttendanceList .= '<tr style="font-size:15px;">
  <td><a href="../staff_member_details.php?id=' . $StaffID . '">' . $StaffID . '</a></td>
  <td><a href="../staff_member_details.php?id=' . $StaffID . '">' . $StaffName . '</a></td>
  <td><label>
<select name="attendance_status" id="attendance_status">
<option value="Present">Present</option>
<option value="Absent">Absent</option>
</select>
</label></td>
  <td><label>
<textarea cols="21" rows="5" name="notes" id="notes" placeholder="Enter notes here..."></textarea>
</label></td>
</tr>';
}
} else {
$setTodaysAttendanceList = "There are no records listed at this time";
}
mysql_close();
?> 
```

然后在 HTML 中我有这个：

```
<form action="set_multiple_staff_attendance_confirm.php" enctype="multipart/form-data" name="StaffAttendanceForm" id="StaffAttendanceForm" method="post">
    <?php echo $setTodaysAttendanceList; ?>
    <tr style="font-size:15px;">
      <td></td>
      <td></td>
      <td></td>
      <td><label>
      <input type="submit" name="addNewRow" id="addNewRow" value="Add Staff Attendance Records" />
      </label></form></td>
    </tr> 
```

当它重定向到下一页时，我有一个如下所示的插入查询：

```
<?php
// Add row to database
if (isset($_POST['staff_id'])) {
$staff_id = mysql_real_escape_string($_POST['staff_id']);
$attendance_status = mysql_real_escape_string($_POST['attendance_status']);
$notes = mysql_real_escape_string($_POST['notes']);

$sql .= mysql_query("INSERT INTO StaffAttendance (StaffID, AttendanceDate, AttendanceStatus, Notes) VALUES
('$staff_id', now(), '$attendance_status', '$notes')") or die (mysql_error());
$editid = mysql_insert_id();
}
?> 
```

我知道这是一个漫长而复杂的询问方式，但我只是表明我已经尝试过并且完全被卡住了！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T12:25:15.920

在我看来，您正在检查`$_POST["staffid"]`，但您的选择菜单已`name="attendance_status"`设置。

您应该像这样设置选择菜单的名称：

```
name="attendance_status[]" 
```

然后在您的 php 脚本中您读取一个数组 - 而不是一个单一的值 - 当你这样做时`$_POST["attendance_staff"]`。

编辑：只有当您还有一个包含所有相应人员 ID 的数组时，这才有效。您可以通过对名称为`staffid[]`且值为 staffid 的每一行使用隐藏输入来获得此信息。

然而，更可靠的方法可能是在每个可保存表单元素的名称中使用 Staffid，正如 David-SkyMesh 在对您的帖子的评论中指出的那样。

编辑：例如，您可以使用此代码来命名您的表单元素（未经测试）：

```
<select name="$staffID_attendance_status" id="$staffID_attendance_status">
    <option value="Present">Present</option>
    <option value="Absent">Absent</option>
</select>
<textarea cols="21" rows="5" name="$staffID_notes" id="$staffID_notes" placeholder="Enter notes here..."></textarea>
<input type='hidden' name='staffID[]' value='$staffID'> 
```

请注意，这还将为您的所有表单元素提供唯一的 id，如果您希望您的 HTML 进行验证，这是必要的。

然后在你的脚本中你可以这样做：

```
foreach ($_POST["staffID"] as $staffID) {
    $staff_id = mysql_real_escape_string($staffID);
    $attendance_status = mysql_real_escape_string($_POST[$staff_id . "_attendance_status"]);
    $notes = mysql_real_escape_string($_POST[$staff_id . "_notes"]);

    $sql .= mysql_query("INSERT INTO StaffAttendance (StaffID, AttendanceDate, AttendanceStatus, Notes) VALUES ('$staff_id', now(), '$attendance_status', '$notes')") or die (mysql_error());
    $editid = mysql_insert_id();
} 
```