# StackOverflow 问答 11327000-11327999

# iphone - 我想将 iPad 虚拟键盘用作台式计算机的外围设备

> ID：11327004
> 
> 赞同：0
> 
> 时间：2012-07-04T10:13:51.013
> 
> 标签：iphone, ios, ipad, keyboard, peripherals

我想将 iPad 虚拟键盘用作台式计算机的外围设备，就像原来的键盘一样，有什么想法吗？我没有在网上找到任何东西。对我来说一个好的解决方案是一个 40 PIN 苹果适配器到 USB 或 PS2 连接器，最好是这个适配器是无线的。

# mysql - 如果在mysql中插入触发器后出错

> ID：11327009
> 
> 赞同：0
> 
> 时间：2012-07-04T10:14:09.847
> 
> 标签：mysql, triggers

假设我有两个用于 table 的`X`触发器`after insert`和`before insert`触发器，并且我正在尝试将值插入到 table 中`X`。

如果在我插入值时触发器发生错误`after insert`，我的插入值会怎样？它在我的表中还是回滚？

# java - Java 企业应用程序在装有 Sun JDK 1.6 的 Linux PC 上启动非常缓慢

> ID：11327010
> 
> 赞同：0
> 
> 时间：2012-07-04T10:14:16.823
> 
> 标签：java, linux, jboss

我们的 Java 企业应用程序（Spring、Hibernate、JSF、JBoss）通常启动大约 1 分钟。
我们在 Windows（SUN/Oracle JDK 1.6）和 AIX（IBM JDK 1.6）上运行我们的应用程序。
我尝试使用 Sun JDK 1.6 在 Linux（16GB，i5）上运行它。
但由于某种原因，应用程序在 Linux 上启动时间过长 - 从 5 到 30 分钟。
我通过 jvisualvm 连接到 JVM 并尝试分析线程转储 - 没有任何坏锁、睡眠、等待等。
我将 JDK 更改为 IBM JDK 1.6，现在应用程序启动大约 4-5 分钟。但它也太长了。
电脑没有过载。
没有我的应用程序的 JBoss 启动速度很快。

有什么问题？
如何找到我的应用程序或 linux 或 PC 的问题？

**更新：**
服务器已重新启动，此问题消失。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T12:26:37.107

我已经遇到了类似的情况。Tomcat 启动太晚了（大约 3 分钟）。我发现 OpenJDK 与 powerpc 不兼容的问题（尤其是 IO 操作）。所以我们用 IBMJDK 改变了 openJDK。之后那个问题就没有了。检查您的处理器类型并找到兼容的 jdk。

# php - 使用 php 从 mysql 表创建基于类别的数组

> ID：11327013
> 
> 赞同：0
> 
> 时间：2012-07-04T10:14:21.750
> 
> 标签：php, mysql, arrays

我已经从表中检索了一些数据。像数组一样

![在此处输入图像描述](../Images/bc274745b1dd0eee846d6b121e97d49b.png)

我想要数组是..

```
 $subpro[HardDisk] = array (H1000 => 1200,H500 => 700);
    $subpro[Ip] = array (4IP => 400 , 2IP => 200);
    $subpro[Ram] = array (..);
    $subpro[processor] = array (...); 
```

php代码..

```
while($row=mysql_fetch_array($res))
    {
        if(sizeof($subpro[$row['category']]>0) 
array_put_to_position($subpro[$row['category']],$row['rate'], 2,$row['name']);
        else
                        $subpro[$row['category']]=array($row['name']=>$row['rate']);                
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T11:21:42.930

除非我误解了这个问题，否则答案很简单。

```
$subpro = array();
while($row = mysql_fetch_array($res)) {
  $subpro[$row['category']][$row['name']] = $row['rate'];
} 
```

# validation - 等一下，我如何验证表的存在

> ID：11327017
> 
> 赞同：0
> 
> 时间：2012-07-04T10:14:28.220
> 
> 标签：validation, watir

我在 RadRails IDE 中使用 watir。我需要验证页面上是否存在表格。我怎样才能做到这一点？我无法检查表中是否存在某些文本，因为我可以在另一个表中具有相同的文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T08:41:03.323

您“只是”必须有一种方法来唯一地标识表。我将假设该表具有`id`属性。

```
browser.table(:id => "one").present?
# => returns true or false 
```

# google-maps - 样式化 Google 地图 - Javascript API v3 - 海岸线轮廓？

> ID：11327019
> 
> 赞同：10
> 
> 时间：2012-07-04T10:14:35.740
> 
> 标签：google-maps, google-maps-api-3

我正在尝试设计一个谷歌地图以匹配我得到的设计，在设计上，所有国家的*外围*都有一个笔划，以及划分边界的一个笔划。

我要达到的效果如下： ![在此处输入图像描述](../Images/3f698bc900d2380d72688dd58b98911e.png)

我的样式代码目前如下：

```
var styles =   [
        {
          featureType: "water",
          stylers: [
            { visibility: "on" },
            { color: "#ffffff" }
          ]
        },{
          featureType: "landscape",
          stylers: [
            { color: "#f7f7f5" }
          ]
        },{
          featureType: "road",
          stylers: [
            { visibility: "off" }
          ]
        },{
          featureType: "poi",
          stylers: [
            { visibility: "off" }
          ]
        },{
          featureType: "administrative.country",
          stylers: [
            { color: "#d2cdcd" },
            { weight: 1 }
          ]
        },{
          featureType: "administrative.country",
          elementType: "labels",
          stylers: [
            { visibility: "off" }
          ]
        },{
          featureType: "administrative.province",
          elementType: "geometry",
          stylers: [
            { visibility: "off" }
          ]
        },{
          featureType: "administrative.locality",
          elementType: "labels",
          stylers: [
            { visibility: "off" }
          ]
        },{
          featureType: "administrative.province",
          elementType: "labels",
          stylers: [
            { visibility: "off" }
          ]
        },{
          featureType: "water",
          elementType: "geometry.stroke",
          stylers: [
            { color: "#4cfff5" }
          ]
        }
      ]; 
```

知道我所追求的是否可能吗？

谢谢！

**编辑：上述风格给了我以下**

![在此处输入图像描述](../Images/95d317798f4201c3b541de720965f83f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-29T16:00:30.243

您目前只能定义水的填充，但不能定义轮廓。

# android - 使用 rawQuery 插入数据库

> ID：11327022
> 
> 赞同：0
> 
> 时间：2012-07-04T10:14:37.227
> 
> 标签：android, sqlite

我刚学安卓。我有一段使用 ContentValues 的工作代码：

我的常数：

```
public static final String TABLE_NAME = "numbers";
public static final String COL_ID = "_id";
public static final String COL_NUMBER = "number"; 
```

这样我创建表：

```
db.execSQL( "CREATE TABLE " + TABLE_NAME + "( " + COL_ID +
            " integer primary key autoincrement, " + COL_NUMBER +
            " integer not null );" ); 
```

通过这种方式，我将值添加到表中：

```
ContentValues values = new ContentValues();
values.put( SQLHelper.COL_NUMBER, 1 );
long id = db.insert( SQLHelper.TABLE_NAME, null, values ); 
```

它可以工作，但是当我用 rawQuery 替换插入时，它不再插入到表中：

```
db.rawQuery( "INSERT INTO " + SQLHelper.TABLE_NAME + " VALUES( NULL, 1 )", null ); 
```

我在哪里犯错？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T10:20:26.563

> db.rawQuery --> 运行提供的 SQL 并在结果集上返回一个 Cursor。
> 
> db.execSQL--> 执行不是 SELECT/INSERT/UPDATE/DELETE 的单个 SQL 语句。

*   [看这里。](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html)

# javascript - Javascript 函数范围

> ID：11327024
> 
> 赞同：2
> 
> 时间：2012-07-04T10:14:40.840
> 
> 标签：javascript, requirejs

我有`bar`我需要调用的功能。我是使用回调的新手，据我所知，回调仍在 ajax 的范围内，所以它看不到`bar`. 是否可以在 ajax 成功时调用 bar？`bar`在模块中定义`top`。

```
define(["top"], function() {
    function foo(callback) {
        $.ajax({
            type: "GET",
            cache: false,
            dataType: 'json',
            url: "http://asdf/qwer",
            success: function(response) {
                callback(response);
            }
        });
    }
    foo(function(response) {
        bar(response);      
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T10:22:23.817

假设您的`top.js`外观与此类似：

```
define( function() {
  return {
    'bar': function( data ){
             // some code here
           }
  };
} ); 
```

（请注意，该函数必须在此处导出/返回！）

您可以像这样访问该`bar()`功能：

```
define(["top"], function( top ) {
    function foo(callback) {
        $.ajax({
            type: "GET",
            cache: false,
            dataType: 'json',
            url: "http://asdf/qwer",
            success: function(response) {
                callback(response);
            }
        });
    }
    foo(function(response) {
        top.bar(response);      
    });
}); 
```

请参阅[require.js 文档，了解如何在`define()`函数](http://requirejs.org/docs/api.html#defdep)中使用依赖项。

`define()`您应该为每个必需的模块在内部的函数中添加一个参数。在示例情况下，这是`top`参数。之后，您可以使用此参数调用需求模块的所有导出属性。

# objective-c - 在 Objective-C 中使用 ViewController

> ID：11327025
> 
> 赞同：0
> 
> 时间：2012-07-04T10:14:46.977
> 
> 标签：objective-c, nsviewcontroller

这是我的 AppDelegate.m 文件：

```
#import "AppDelegate.h"
#import "LoginViewController.h"

@implementation AppDelegate

@synthesize window = _window;
@synthesize viewController = _viewController;

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
self.viewController = [[LoginViewController alloc]    initWithNibName:@"LoginWindowController" bundle:nil];
[self.window setContentView:[self.viewController view]];
}

- (BOOL)applicationShouldHandleReopen:(NSApplication *)theApplication hasVisibleWindows:(BOOL)flag {

[self.window makeKeyAndOrderFront:self];

return YES;
}

@end 
```

这是我的 LoginViewController.m：

```
#import "LoginViewController.h"

@interface LoginViewController ()

@end

@implementation LoginViewController
@synthesize usernameField;
@synthesize passwordField;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {
    // Initialization code here.
}

return self;
}
- (IBAction)loginPressed:(NSButton *)sender
{
NSLog(@"Username = %@", [self.usernameField stringValue]);
NSLog(@"Password = %@", [self.passwordField stringValue]);
}

@end 
```

按下登录按钮时如何切换回主视图？它位于自动创建的文件 MainMenu.xib 中。网上大部分教程都是针对iOS的，在处理视图方面略有不同。如何为视图转换设置动画？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T10:21:32.100

你需要一个导航控制器。看看这个：[UINavigationController](http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html)。

# jsp - 单击按钮调用动作类

> ID：11327029
> 
> 赞同：0
> 
> 时间：2012-07-04T10:14:52.120
> 
> 标签：jsp, jakarta-ee, struts

单击jsp上的按钮时如何调用动作类？我正在使用`struts 1.3`框架

下面是代码片段：

```
<html:button property="delete" onclick="/deleteZeroScoreCard.do" value="Delete"></html:button> 
```

`"/deleteZeroScoreCard"`在`struts-config.xml`文件中定义

我得到以下编译错误

```
Syntax error on token "Non Terminating Regular Expression", no accurate correction available 
```

编辑：

`Struts-config.xml`片段

```
 <form-bean name="initiationfrm" type="com.mindcraft.mis.zero.actionform.afInitiation"></form-bean>

    <action name="initiationfrm" path="/deleteZeroScoreCard" type="com.mindcraft.mis.zero.actionclass.acZeroScoreCardDeletion">
        <forward name="viewdatauploaddppage2" path="zeroInitPage"></forward>

    </action> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T12:39:56.550

onclick 属性将运行 JavaScript，并且“/deleteZeroScoreCard.do”不是有效的 JavaScript。你需要类似 onclick="location.href='/deleteZeroScoreCard.do';" 反而。

为什么不避免使用 JavaScript 而使用表单呢？例如：

```
<html:form action="deleteZeroScoreCard" method="POST">
    <html:button property="delete" value="Delete"/>
</html:form> 
```

# php - MySQL PHP 不更新

> ID：11327030
> 
> 赞同：-1
> 
> 时间：2012-07-04T10:14:52.060
> 
> 标签：php, mysql, sql

我需要有关我的 php 代码的帮助，该代码应该更新我的 mysql 数据库。我试过这样：

```
<?php mysql_connect("servername","name","passwort"); 
mysql_select_db("dbname"); 
$name = $_GET["name"]; $points = $_GET["points"]; 
$query = "UPDATE highscore SET points=".$points." WHERE name='".$name."'";

mysql_query($query) 
mysql_close(); ?> 
```

我用以下方式调用它：

```
http://.../write.php?name=%22Alexa%20Bomkamp%22&points=%22100 
```

但实际上什么也没发生。没有错误，也没有更新。有谁知道我做错了什么？

感谢帮助 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T10:25:00.280

首先，您应该检查是否`$_GET`获取了您调用脚本时使用的参数。A`print_r($_GET);`就足够了。

其次，您的代码看起来很糟糕。您缺少换行符，等等。更可怕的是，你**完全易受**SQL[注入](http://en.wikipedia.org/wiki/SQL_injection)攻击。**永远不要**让 SQL 执行包含未经转义和未经检查的用户输入的命令。稍微增加一些参数，您很容易丢失您的数据库。

另一件事是，从您的代码来看，您正在使用一种不好的做法。如果我输入一个对数据库来说是新的名称怎么办。在这种情况下，该`UPDATE`语句将失败，您将需要使用它`INSERT INTO`来代替。

```
<?php
$link = mysql_connect( 'servername', 'loginname', 'password' ) or die('Unable to connect.');
mysql_select_db( 'database', $link ) or die('Unable to select database.');

$query = 'UPDATE `highscore` SET `points`=' .mysql_real_escape_string($_GET['points']). ' WHERE `name`="' .mysql_real_escape_string($_GET['name']). '";';
mysql_query( $query, $link );
mysql_close($link);
?> 
```

`%22`此外，您的请求中有一个不需要的内容。用 调用代码`?name=Alexa Bompkamp&points=100`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T10:22:00.197

url 错误**%22**需要**“** htmlentity 避免它并且数字也包含**%22**

使用此网址调用： .../write.php?name=Alexa%20Bomkamp&points=100

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T10:23:57.280

试试这个代码：

```
<?php
$conn = mysql_connect("servername","name","passwort"); 
mysql_select_db("dbname");
if (mysql_error()) {
    echo "<br />". mysql_errno(). " : ". mysql_error();
}
$name = $_GET["name"]; $points = $_GET["points"]; 
$query = "UPDATE highscore SET points=$points WHERE name='$name'";

mysql_query($query, $conn);
mysql_close($conn);
?> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-04T10:25:08.497

如果您在发送请求时对参数进行编码，请对其进行解码。在为参数赋值时，请使用另一件事`mysql_real_escape_string()`来避免 SQL 注入`get`

# java - 我可以以编程方式为 Android 创建界面吗

> ID：11327034
> 
> 赞同：0
> 
> 时间：2012-07-04T10:15:11.553
> 
> 标签：java, android, interface

我正在学习 Android 开发，我读到如果你想创建一个界面，你需要使用 XML 文件。

但是，Android 在`android.views`和 中有类`android.widgets`。我可以以编程方式创建相同的界面吗？我不想知道怎么做，只要我能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T10:17:34.830

**几乎**所有您可以通过 xml 执行的操作都可以通过编程方式重现它。

这是您可以阅读的最佳资源：

[http://developer.android.com/guide/topics/ui/declaring-layout.html](http://developer.android.com/guide/topics/ui/declaring-layout.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T10:16:13.423

是的，你可以这么做。只需查看文档 :)

# facebook - Spotify 中的 Facebook 个人资料图片

> ID：11327035
> 
> 赞同：0
> 
> 时间：2012-07-04T10:15:13.913
> 
> 标签：facebook, facebook-graph-api, manifest, spotify

我想在我的 spotify 应用程序中显示 facebook 个人资料图片，但我应该在清单文件中允许哪些 url？

我知道我可以通过 http://graph.facebook.com/[user_id]/picture 检索图像，但这只是对实际图像的重定向。除非我在清单文件中允许，否则该图像仍将被阻止。

到目前为止，我只测试了 3 个配置文件，并且图像位于这 2 个服务器上。

[https://fbcdn-profile-a.akamaihd.net/](https://fbcdn-profile-a.akamaihd.net/)

[http://profile.ak.fbcdn.net/](http://profile.ak.fbcdn.net/)

我猜有不少服务器保存着个人资料图片，我怎样才能让我的应用程序面向未来？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T14:12:21.863

我们自己的显示个人资料图像的应用程序使用以下两个条目`RequiredPermissions`：

```
"RequiredPermissions": [    
    "https://fbcdn-profile-*.akamaihd.net", 
    "http://*.fbcdn.net"    
], 
```

这两个（注意星号）也应该适合您的应用程序。不过，我不能保证 Facebook 将来不会改变它！:-P

# jquery - JqG rid - 在 loadComplete 事件中触发重新加载

> ID：11327037
> 
> 赞同：2
> 
> 时间：2012-07-04T10:15:17.370
> 
> 标签：jquery, jqgrid

如果页码高于 loadComplete 事件中的总页数，我希望能够重新加载 jqgrid。我正在将网格设置保存到浏览器本地存储中，如本答案 - [Persisting jqGrid column preferences](https://stackoverflow.com/questions/8422878/persisting-jqgrid-column-preferences/8436273#8436273)

我添加了一个调用来触发网格的重新加载并将页面设置回 1，但它似乎在 loadComplete 方法中不起作用。我已经调试了代码并调用了该方法。

Javascript：（重要的部分是 jqGrid 定义中的 loadComplete 函数）

```
$(document).ready(function() {          
    var $grid = $('#grid'),
    cm = [ 
        { name: 'Id', index: 'Id', width: 120, align: 'left', editable: false,sortable: true,hidden: true,hidedlg: true,Key: true}, 
        { name: 'Status', index: 'Status', width: 80, align: 'left', editable: false,sortable: true,hidden: true,hidedlg: false,Key: false}, 
        { name: 'Reference', index: 'Reference', width: 80, align: 'left', editable: false,sortable: true,hidden: false,hidedlg: false,Key: false}, 
        { name: 'CustomerReference', index: 'CustomerReference', width: 140, align: 'left', editable: false,sortable: true,hidden: false,hidedlg: false,Key: false}, 
        { name: 'Logged', index: 'Logged', width: 100, align: 'left', editable: false,sortable: true,hidden: false,hidedlg: false,Key: false}
     ],
     saveObjectInLocalStorage = function (storageItemName, object) {
         if (typeof window.localStorage !== 'undefined') {
             window.localStorage.setItem(storageItemName, JSON.stringify(object));
         }
     },
     removeObjectFromLocalStorage = function (storageItemName) {
         if (typeof window.localStorage !== 'undefined') {
             window.localStorage.removeItem(storageItemName);
         }
     },
     getObjectFromLocalStorage = function (storageItemName) {
         if (typeof window.localStorage !== 'undefined') {
             return $.parseJSON(window.localStorage.getItem(storageItemName));
         }
     },
     myColumnStateName = function (grid) {
         return window.location.pathname + '#' + grid[0].id;
     },
     saveColumnState = function (perm) {
         var colModel = this.jqGrid('getGridParam', 'colModel'), i, l = colModel.length, colItem, cmName,
         postData = this.jqGrid('getGridParam', 'postData'),
         columnsState = {
             search: this.jqGrid('getGridParam', 'search'),
             page: this.jqGrid('getGridParam', 'page'),
             sortname: this.jqGrid('getGridParam', 'sortname'),
             sortorder: this.jqGrid('getGridParam', 'sortorder'),
             rowNum: this.jqGrid('getGridParam', 'rowNum'),
             permutation: perm,
             colStates: {}
         },
         colStates = columnsState.colStates;

         if (typeof (postData.filters) !== 'undefined') {
             columnsState.filters = postData.filters;
         }

         for (i = 0; i < l; i++) {
             colItem = colModel[i];
             cmName = colItem.name;
             if (cmName !== 'rn' && cmName !== 'cb' && cmName !== 'subgrid') {
                 colStates[cmName] = {
                     width: colItem.width,
                     hidden: colItem.hidden
                 };
             }
         }
         saveObjectInLocalStorage(myColumnStateName($grid), columnsState);
     },
     myColumnsState,
     isColState,
     restoreColumnState = function (colModel) {
         var colItem, i, l = colModel.length, colStates, cmName,
         columnsState = getObjectFromLocalStorage(myColumnStateName($grid));

         if (columnsState) {
             colStates = columnsState.colStates;
             for (i = 0; i < l; i++) {
                 colItem = colModel[i];
                 cmName = colItem.name;
                 if (cmName !== 'rn' && cmName !== 'cb' && cmName !== 'subgrid') {
                     colModel[i] = $.extend(true, {}, colModel[i], colStates[cmName]);
                 }
             }
         }
         return columnsState;
    },
    firstLoad = true;

    myColumnsState = restoreColumnState(cm);
    isColState = typeof (myColumnsState) !== 'undefined' && myColumnsState !== null;

    $grid.bind('SaveSettings', function() { saveColumnState.call($grid, $grid.jqGrid('getGridParam', 'remapColumns')); });
    $grid.jqGrid({url: '/Databind/',
        datatype: 'json',
        mtype: 'GET',
        height: '100%', 
        width: 940, 
        shrinkToFit: false, 
        colModel: cm,
        rowNum: isColState ? myColumnsState.rowNum : 15,
        rowList: [5,10,15,30,50],
        pager: $('#gridPager'),
        page: isColState ? myColumnsState.page : 1,
        sortname: isColState ? myColumnsState.sortname : 'BillingRecordId',
        sortorder: isColState ? myColumnsState.sortorder : 'asc',
        search: isColState ? myColumnsState.search : false,
        viewrecords: true,
        loadComplete: function () {
            if (firstLoad) {
                firstLoad = false;
                if (isColState) {
                    $(this).jqGrid('remapColumns', myColumnsState.permutation, true);
                }
             }
             saveColumnState.call($(this), this.p.remapColumns);

             if($(this).jqGrid('getGridParam', 'page') > $(this).jqGrid('getGridParam', 'lastpage')) {
                 alert('reloading'); //this message shows
                 $(this).trigger('reloadGrid', [{ page: 1}]); //this doens't refresh the grid
              }

          }
     }).navGrid('#gridPager', { edit: false, add: false, del: false, refresh: false, search: false });

    $grid.jqGrid('navButtonAdd', '#gridPager', {
        buttonicon: 'ui-icon-closethick',
        caption: 'Reset Settings',
        title: 'Reset Settings',
        onClickButton: function () {
            removeObjectFromLocalStorage(myColumnStateName($grid));
            $grid.unbind('SaveSettings');
            window.location.reload();
        }
    });

    $grid.jqGrid('navButtonAdd', '#gridPager', {
        buttonicon: 'ui-icon-transferthick-e-w',
        caption: 'Choose Columns',
        title: 'Choose Columns',
        onClickButton: function () {
            $(this).jqGrid('columnChooser', {
                done: function (perm) {
                    if (perm) {
                        this.jqGrid('remapColumns', perm, true);
                        saveColumnState.call(this, perm);
                    }
                 }  
             });
         }
     });
});

$(window).unload( function () { $('#grid').trigger('SaveSettings'); }); 
```

我已经阅读并找不到解决方案。我尝试将 trigger.('reloadGrid') 移动到 gridComplete 函数中，但它也不起作用。始终显示警报消息，但网格未刷新。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T11:13:25.353

我找到了一种解决方法，但它并不完美。如果我使用 setTimeout 为重新加载调用添加延迟，则一切正常。我添加了一个额外的检查以确保 lastPage 超过 0，否则空网格将不断重新加载。

```
loadComplete: function () {
    if (firstLoad) {
        firstLoad = false;
        if (isColState) {
            $(this).jqGrid('remapColumns', myColumnsState.permutation, true);
        }
    }
    saveColumnState.call($(this), this.p.remapColumns);

    var lastPage = $(this).jqGrid('getGridParam', 'lastpage');
    var page = $(this).jqGrid('getGridParam', 'page');
    if(lastPage > 0 && page > lastPage) {                    
        setTimeout(function () { $('#grid').trigger('reloadGrid', [{ page: 1}]); },150);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-12T08:04:29.180

## 介绍

这适用于 jqGrid javascript 版本 4.4.4。

主要问题是 reloadGrid 在我们想要的时候不起作用。为了理解为什么我会解释我今天学到的关于 reloadGrid 的一切。如果这些都不感兴趣，请随时跳到解决方案。

## reloadGrid 的工作原理

`reloadGrid`具有以下伪代码：

1.  运行 treeGrids 的预处理逻辑
2.  为多选运行预处理逻辑
3.  运行页面逻辑和滚动逻辑的预处理逻辑
4.  填充网格的数据（通过调用`populate()`或`populateVisible()`）

两者都`populate`具有`populateVisible`相同的伪代码：

1.  检查内部变量`loading`，，`if (loading) { return; } else {/*load data*/}`
2.  为分页和分组运行预处理
3.  放`loading = true`
4.  将数据加载到内存中（取决于通过 ajax 或字符串或本地的数据类型）
5.  用加载的内存填充网格
6.  放`loading = false`

## 如何解决这个问题

我无法想象没有 ajax 会有问题。因此，我将只关注ajax。

网格提供了许多有用的事件，我们可以在 ajax 过程中挂钩。不幸的是，我们可以挂钩的所有 jqGrid 事件都发生在第 6 步之前。这意味着`loading`当我们的事件处理程序被触发时，它总是等于 true。因为当它调用时`loading`is false`reloadGrid`不会做任何事情`populate()`。

为了解决这个问题，我们需要能够注入我们的逻辑，以便`loading`在设置为 false 后重新加载到某个位置。我发现的最简单的方法是将我们的逻辑注入到 ajax 完成事件中。对于上面给定的问题，它将如下所示。

```
function reloadGridIfPageIsBeyondLast() {
    if($(this).jqGrid('getGridParam', 'page') > $(this).jqGrid('getGridParam', 'lastpage')) {
        $(this).trigger('reloadGrid', [{ page: 1}]);
    }
}

$('#grid').jqGrid('setGridParam', { 
    ajaxGridOptions: {
        complete: reloadJqGridIfPagePastLast
    }
} 
```

# wpf - WPF MVVM 窗口导航

> ID：11327041
> 
> 赞同：1
> 
> 时间：2012-07-04T10:15:45.193
> 
> 标签：wpf, mvvm, navigation, window

我将 MVVM 模式应用于我的应用程序，该应用程序将有几十个屏幕（使用各自的 ViewModel）。现在我陷入了一个非常简单的问题......谁有责任创建新窗口，实例化 viewModel 并将一个分配给另一个？

我认为在 View 甚至 ViewModel 中这样做是错误的。我看到许多建议使用外部框架的回复，这对我来说不是一个选择。

你怎么看？

Windows 的官方推荐是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T13:51:45.630

这就是我所做的：

*   1 个以 mainviewmodel 作为应用程序根的主窗口
*   需要时使用视图模型登录视图
*   所有子/模块的视图模型第一种方法
*   对话服务视图模型驱动的对话
*   为 windows 驱动的 windowservice 视图模型

mainviewmodel 通过 MEF 组成模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-29T20:40:53.443

让我们尝试一个示例：用户单击一个按钮，然后显示一个带有是/否的确认对话框。通常你会在按钮的事件处理程序中引发通知：

```
private void Button_Click(object sender, MouseRoutedEventArgs e)
{
    var result = MessageBox.Show("Confirm?", MessageBoxButton.YesNo);
    if (result == true)
        //something
    else
        //something else
} 
```

现在，由于我们有 MVVM，*业务逻辑*（这里是`if/else`）必须移到 ViewModel 中。但是*UI*必须保留在 UI 控件上！假设这是 ViewModel：

```
public class VM
{
    public void DoSomething()
    {
        //raise the confirmation interaction
    }
} 
```

ViewModel 不能拥有 UI……但可以拥有与用户交互所需的抽象。

这可能是交互的界面：

```
public interface IConfirmationInteraction
{
    bool? RaiseConfirmationRequest(string message);
} 
```

所以 ViewModel 可以有这样的属性：

```
public IConfirmationInteraction ConfirmInteraction { get; } 
```

`VM`不实例化它，`VM`接受别人传递的接口实例。例如在构造函数中：

```
public VM(IConfirmationInteraction confirmInteraction)
{
    if (confirmInteraction == null)
        throw new ArgumentNullException(nameof(confirmInteration));
    ConfirmInteraction = confirmInteraction;
} 
```

所以它的方法可以变成：

```
public void DoSomething()
{
    var result = ConfirmInteraction.RaiseConfirmationRequest("Confirm?");
    if (result == true)
        //do something
    else
        //do something else
} 
```

用户界面呢？您可以创建使用 UI 元素的具体交互：

```
public class UIConfirmationInteraction : IConfirmationInteraction
{
    public bool? RaiseConfirmationRequest(string message)
    {
        return MessageBox.Show(message, MessageBoxButton.YesNo);
    }
} 
```

你明白重点了吗？我们保存了模式：ViewModel 与逻辑一起行动，将不同的抽象组合在一起，但对实现、消息框、按钮等一无所知。您可以将这些交互实现为 UI 交互，例如在拥有以下内容的 UI 控件`VM`：

```
public class MyControl : USerControl
{
    public MyControl()
    {
        DataContext = new VM(new UIConfirmationInteraction());
    }
} 
```

但是您也可以将它们实现为自动结果，例如，当您想要运行测试列表尝试默认答案“是”或默认答案“否”时：

```
public class YesConfirmationInteraction : IConfirmationInteraction
{
    public bool? RaiseConfirmationRequest(string message)
    {
        return true;
    }
} 
```

这称为“**依赖注入**”。在谷歌上试试，你可以找到几十个教程。在这种情况下，我*通过构造函数*构建了一个依赖注入。

这是一种可靠的方式，您可以通过 ViewModel 手动构建 UI 控件之间的所有桥梁，但保留模式。

# asp.net-mvc-3 - 如何检查用户是否在客户端使用Jquery授权？

> ID：11327043
> 
> 赞同：0
> 
> 时间：2012-07-04T10:15:52.380
> 
> 标签：asp.net-mvc-3, jquery-ui-tabs, form-authentication

我正在为 asp.net MVC3 Razor 视图工作。我创建了基于每次单击左侧菜单的动态加载选项卡。

还有我的jQuery：

```
var form = $("ul#autotab li").click(function () {

                $tabs = $("#tabs").tabs({
                    tabTemplate: "<li id='" + tab_title + "'><a href='#{href}'>#{label}</a> <span class='ui-icon1 ui-icon-close'>x</span></li>",
                    add: $.ajax({
                        type: "GET",
                        url:'/Product/GetDetailsForTab/',
                        success: function (result) {
                            $("#tabs" + counter).html(result);
                        }
                    })
                });
                $tabs.tabs("add", "#tabs" + tab_counter, tab_title);
            } 
```

在这里，如果我单击左侧菜单之一，我想检查用户是否在 jquery 选项卡功能中授权。如果用户未授权意味着它应该重定向默认登录页面。`'/Product/GetDetailsForTab/'`我已经在ActionResult中设置了 Authorize 属性。

上面的代码正在运行，但问题是，如果未经授权，它将重定向一个带有标签内容的登录页面。在这里，我需要在新窗口中重定向页面而不是标签内容区域。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T10:18:58.200

您可以查看 Phil Haack 的[以下博客文章](http://haacked.com/archive/2011/10/04/prevent-forms-authentication-login-page-redirect-when-you-donrsquot-want.aspx)。在其中他说明了一个很好的解决方案，它允许您防止表单身份验证模块在 AJAX 请求的情况下重定向到登录页面，但返回一个真实的 401 状态代码，您可以在客户端脚本中拦截并采取相应的行动。

# jsp - 如何在 JSP 中从 Web 应用程序上下文定义 src 属性

> ID：11327046
> 
> 赞同：3
> 
> 时间：2012-07-04T10:15:54.627
> 
> 标签：jsp, absolute-path, contextpath

我想在 src 属性中使用绝对路径，同时在 JSP 中包含 Javascript 和 CSS 文件。

使用相对 URL 不符合我的目的，类似于下面的：

```
<script type="text/javascript" src="../js/jquery-1.6.4.min.js"></script> 
```

如果我使用绝对 URL，

```
<script type="text/javascript" src="/appName/js/jquery-1.6.4.min.js"></script> 
```

然后我又硬编码了不合适的网络应用程序名称......

我发现的最佳选择是：

```
<base href="${pageContext.request.contextPath}"  /> 
```

但是，它只适用于 href 属性，如`<a href="home.jsp" />`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T10:19:05.737

你得到了你的解决方案：

```
<script src="${pageContext.request.contextPath}/js/jquery.js"></script>
<a href="${pageContext.request.contextPath}/home.jsp">Home</a> 
```

或者，使用 JSTL：

```
<script src="<c:url value="/js/jquery.js"/>"></script>
<a href="<c:url value="/home.jsp"/>">Home</a> 
```

JSTL 标记还有一个额外的优势，即如果禁用 cookie，它还会将会话 ID 添加到 URL，以便使用 URL 重写来跟踪会话。

# c# - ASP.NET - 在 UpdatePanel 内的 ListView 内使用 LinkBut ton 触发异步回发

> ID：11327047
> 
> 赞同：2
> 
> 时间：2012-07-04T10:15:55.397
> 
> 标签：c#, asp.net, listview, updatepanel, linkbutton

好的，我的第一篇文章，我希望标题有意义。

我有一个更新面板，里面有一个文件上传控件，里面有一个按钮来触发上传。下面我有一个 ListView，它被数据绑定在后面的文件中，其中包含一个上传的文件列表。更新面板有一个指向上传按钮的“PostBackTrigger”。

所有这些都按应有的方式工作。对于列出的每个项目，都有一个链接按钮可以删除该特定文件。这也可以正常工作，但问题是：它不会触发回发，我在搜索网络后尝试了多种方法，更不用说 stackoverflow 的答案了。我尝试了很多，但即使实施了看起来最好的解决方案，也没有真正发生。

ascx 文件（是的，如果重要的话，它是一个用户控件）：

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server">
<ContentTemplate>
    <asp:Label ID="LabelUploadFile" runat="server" Text="Upload fil:"></asp:Label>
    <br />
    <asp:FileUpload ID="FileUploadDocument" runat="server" />
    <br />
    <asp:DropDownList ID="DropDownListDocumentType" runat="server"></asp:DropDownList>
    <br />
    <asp:Button ID="ButtonUploadFile" runat="server" Text="Upload fil" CssClass="nice small radius action button" onclick="ButtonUploadFile_Click" />
    <br />
    <br />
    <br />
    <asp:ListView ID="ListViewDocuments" runat="server" OnItemCommand="ListViewDocuments_ItemCommand">
        <LayoutTemplate>
            <table border="0" cellpadding="1">
                <tr>
                    <th align="left">Type</th>
                    <th align="left">Dokument</th>
                    <th></th>
                </tr>
                <tr id="itemPlaceholder" runat="server"></tr>
            </table>
        </LayoutTemplate>
        <ItemTemplate>
            <tr>
                <td><asp:Label runat="server" ID="lblName"><%#Eval("Type") %></asp:Label></td>
                <td><asp:Label runat="server" ID="lblType"><%#Eval("Dokument") %></asp:Label></td>
                <td><asp:LinkButton ID="DeleteButton" OnClientClick="return confirm('Slet dokument?');" CommandName="Delete" CommandArgument='<%# Eval("id")%>' runat="server" Text="Slet"></asp:LinkButton></td>
            </tr>
        </ItemTemplate>
        <EmptyDataTemplate>
            <tr>
                <td>&nbsp;</td>
                <td>Du har ikke uploadet filer endnu.</td>
                <td>&nbsp;</td>
            </tr>
        </EmptyDataTemplate>
    </asp:ListView>
</ContentTemplate>
<Triggers>
    <asp:PostBackTrigger ControlID="ButtonUploadFile" />
    <asp:AsyncPostBackTrigger ControlID="ListViewDocuments" EventName="ItemCommand" />
</Triggers> 
```

（注意 asyncpostbacktrigger 只是我尝试过的另一个解决方案，我没有删除它。还有一个脚本管理器，它只是没有在上面的代码中表示）

来自后台文件的 ListViewDocuments_ItemCommand：

```
protected void ListViewDocuments_ItemCommand(object sender, ListViewCommandEventArgs e)
    {
        if (e.CommandName == "Delete")
        {
            //Send the file's ID to the data layer for deletion
            _talentDataAccess.DeleteTalentFileByFileId(Convert.ToInt32(e.CommandArgument));
            //Rebind the listveiw with a new list of files.
            _fillFileList();
        }
    } 
```

所以就像我说的，技术上一切正常，但简而言之，链接按钮不会刷新更新面板。

如果有任何问题或需要其他代码片段，我会及时回复。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T10:47:37.440

有可能是在`CommandName="Delete"`引发事件`ItemDeleted`，`ItemDeleting` 而不是`ItemCommand`。虽然我不得不说如果是这种情况，那么我希望页面由于没有这些事件而崩溃（有关更多详细信息，请参阅[MSDN](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listview.itemcommand.aspx)）。

也就是说，当我使用删除（或编辑）字作为命令时，我发现了问题。所以我会尝试以下

1.  将命令的名称更改为类似 `CommandName="ItemDelete"`. `ListViewDocuments_ItemCommand`现在火了吗
2.  另外 - 要查看是否是更新面板导致问题，我会暂时将其删除，直到您确信 item 命令按您的意愿触发。

希望它可以帮助一些

# vba - 在 vb6 中重新加载列表视图

> ID：11327051
> 
> 赞同：4
> 
> 时间：2012-07-04T10:16:10.887
> 
> 标签：vba, vb6

我正在研究 Vb6。我有一个列表视图，它显示表中的数据，但是当我更新数据库值时，我想将数据重新加载到列表视图中。它被重新加载，但以前的数据也与新数据一起出现。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T10:56:10.937

称呼

```
 YourListView.ListItems.Clear 
```

在您（重新）将任何数据加载到列表视图之前。

# iphone - 通过使用情节提要单击表格单元格来推送到下一个视图

> ID：11327052
> 
> 赞同：3
> 
> 时间：2012-07-04T10:16:12.837
> 
> 标签：iphone

我有两个视图控制器 FirstVC 和 SecondVC。我在 FirstVC 中有一个表格视图。我只是想通过单击 FirstVC 表视图的任何单元格来推动我对 SecondVC 的看法。我正在为这个视图使用故事板。我没有用于视图的单独 NIB 文件。

谢谢你的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T10:41:29.113

![在此处输入图像描述](../Images/cfcef251bb18762c5d746f3e5fdcfc75.png)如果您使用的是故事板，则只需控制单击并从 tableview 单元格拖动到 nextviewcontroller 并从下拉列表中选择 push。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T10:23:08.407

在 FirstVC 表视图委托中，

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
{
     SecondVC *objSecondVC = [[SecondVC alloc] initWithNIBName: @"SecondVC" bundle: nil];
     [self.navigationController pushViewController: objSecondVC animated: YES];
     [objSecondVC release];
     objSecondVC = nil;
} 
```

请不要忘记将 FirstVC 标头中的 SecondVC 导入为

```
#import "SecondVC.h" 
```

# image - Gwt 在 ImageCell 中更改图像大小

> ID：11327056
> 
> 赞同：1
> 
> 时间：2012-07-04T10:16:24.953
> 
> 标签：image, gwt, image-size, celltable

我用 gwt 创建了一个小的 CellTable。在该表中，我想添加一些图像。为此，我使用以下代码：

```
Column<Company, String> columnflag = new Column<Company, String>(new ImageCell()) {
    public String getValue(Company company) {
        return company.getImageSmall();
    }
  }; 
```

这工作正常。但是我想改变图像的大小？有谁知道我该怎么做？我什么也没找到... 设置固定列宽和高无济于事。

格雷茨

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T10:39:16.350

您可以尝试以下代码：

```
ImageCell imageCell = new ImageCell() {
    @Override
    public void render(com.google.gwt.cell.client.Cell.Context context, String value, SafeHtmlBuilder sb) {
        super.render(context, value, sb);
        String imagePath = "images/yourImage.png";
        sb.appendHtmlConstant("<img src = '"+imagePath+"' height = '20px' width = '20px' />");

    }
};
Column<Company, String> columnflag = new Column<Company, String>(imageCell) {
    @Override
    public String getValue(Form object) {
            return "";
    }
}; 
```

# html - wordpress 新手

> ID：11327061
> 
> 赞同：-1
> 
> 时间：2012-07-04T10:16:34.553
> 
> 标签：html, wordpress, mamp

这可能是非常基本的事情，但我遇到了一些麻烦。
我正在尝试转换我在 HTML 中创建的网站并在 wordpress 中创建它，我一直在网上查看教程，我发现的只是有关如何从模板创建 wordpress 网站的教程，而不是从我自己的 html。
到目前为止，我已经使用 MAMP 在本地安装了 wordpress。我知道我需要切掉我网站的每个部分（页眉、侧边栏、内容、页脚等）。我必须在“主题”文件夹中创建网站吗？（htdocs > mysite > wp-content > 主题 > mytheme）？

我知道这是一个非常普遍的问题，但我们将不胜感激。

在此先感谢，汤姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T10:23:31.303

在您的文件夹中创建一个新文件`wp-content > themes`夹并开始将 html 文件转换为 wordpress 模板并将其放入此文件夹中

您可以了解更多关于 wp 主题 [http://codex.wordpress.org/Theme_Development](http://codex.wordpress.org/Theme_Development)

一切顺利

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T11:14:40.477

我要在这里插话只是为了引导你远离“陷阱”。当您开始构建自己的第一个 Wordpress 主题时，典型的新手错误是尝试在 Wordpress 附带的默认主题（即二十一和二十一）之上构建它。

不要那样做——它们是真正可怕的主题，让初学者的工作比需要的困难得多。商业 WP 主题很少像那些狗那样构建。

如果您已经拥有所有标记，那么最好的办法是获取基于 Chris Coyier 原始空白主题的[HTML 5 Reset 空白主题并开始构建。](http://html5reset.org/#wordpress)

更容易、更清洁、更快捷。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T11:47:30.217

下面提到的一切都相当准确。你必须在里面创建一个文件夹

> wp-内容/主题

随意命名。从那时起，您必须研究 wordpress codex，以便能够从数据库中提取内容并相应地显示您想要的内容。Lynda.com 有一段来自 Chris Coyier 的精彩视频，他自己使用自定义字段、类别页面等创建了自己的自定义主题。但是，您必须付费。网上有很多资源，你只需要在循环等方面找到你想要的东西。

要设置页面模板，请确保您在顶部对其进行评论，然后它将作为页面模板从您的后端 wordpress 中可用，即。

```
<?php 
/*
    Template Name: Test Category
*/
?> 
```

请记住，这是您的朋友。[http://codex.wordpress.org/](http://codex.wordpress.org/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-04T10:24:18.200

> Blockquote 我必须在“主题”文件夹中创建网站吗？

是的你是。您可以通过安装在 wordpress 中的基本主题看到文件夹结构必须是怎样的。您的模板定义必须在该文件夹结构中才能在 wordpress 后端中选择。

有很好的软件可以创建 wordpress 主题，例如 [Link to Artisteer Website]artisteer [1](http://www.artisteer.com/)。

# mysql - MySQL 和字母大小写

> ID：11327062
> 
> 赞同：1
> 
> 时间：2012-07-04T10:16:36.470
> 
> 标签：mysql, linux

当我尝试以小写形式查询我的 MySQL 表时出现错误：

```
mysql> select * from selection_vc limit 1;
ERROR 1146 (42S02): Table 'mydb.selection_vc' doesn't exist 
```

当我使用大写时，一切正常：

```
mysql> select * from SELECTION_VC limit 1;
+-------------+-------------+-------------+--------+
| CAMPAIGN_ID | CONTACT_ID  | COLUMN_NAME | MONTH  |
+-------------+-------------+-------------+--------+
| ALCA-32515W | ALCA-2X08DX | A           | 201207 |
+-------------+-------------+-------------+--------+
1 row in set (0.00 sec) 
```

我只有在表名上有这个错误（功能？），列名可以以小写或大写形式访问。这只发生在我在 Linux 上安装的数据库中，我的 Mac 上的数据库没有这个问题。

我错过了 MySQL 配置中的某些内容还是这是一个错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T10:18:37.377

如手册的[标识符大小写敏感性](http://dev.mysql.com/doc/en/identifier-case-sensitivity.html)部分所述：

> 在 MySQL 中，数据库对应于数据目录中的目录。数据库中的每个表对应于数据库目录中的至少一个文件（可能更多，取决于存储引擎）。触发器也对应于文件。因此，底层操作系统的大小写敏感性在数据库、表和触发器名称的大小写敏感性中起作用。这意味着此类名称在 Windows 中不区分大小写，但在大多数 Unix 中都区分大小写。一个值得注意的例外是 Mac OS X，它基于 Unix，但使用不区分大小写的默认文件系统类型 (HFS+)。

它接着说：

> 为避免因数据库或表名的字母大小写引起的数据传输问题，您有两种选择：
> 
> *   `lower_case_table_names=1`在所有系统上使用。这样做的主要缺点是，当您使用[`SHOW TABLES`](http://dev.mysql.com/doc/en/show-tables.html)or时[`SHOW DATABASES`](http://dev.mysql.com/doc/en/show-databases.html)，您看不到原始字母大小写的名称。
>     
>     
> *   `lower_case_table_names=0`在 Unix 和`lower_case_table_names=2`Windows 上使用。这将保留数据库和表名的字母大小写。这样做的缺点是您必须确保您的语句在 Windows 上始终以正确的字母大小写引用您的数据库和表名。如果您将语句转移到字母大小写很重要的 Unix，如果字母大小写不正确，它们将不起作用。
>     
>     
>     
>     ***例外***：如果您正在使用`InnoDB`表并试图避免这些数据传输问题，则应[`lower_case_table_names`](http://dev.mysql.com/doc/en/server-system-variables.html#sysvar_lower_case_table_names)在所有平台上设置为 1 以强制将名称转换为小写。

# java - Groovy 依赖注入

> ID：11327065
> 
> 赞同：5
> 
> 时间：2012-07-04T10:16:43.087
> 
> 标签：java, grails, groovy, dependency-injection

我想将一个 Log4j Logger（或者在一般情况下为任何类）注入到我所有具有 log 属性的类中：

```
def log 
```

这是在 Grails 中自动完成的。我想在普通的 groovy 应用程序中具有相同的功能，假设所有 groovy 文件在`src`. Log4j 的特点是，记录器需要知道要记录的类。( `Logger.getLogger(Class clazz)`)

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-04T10:26:57.293

你见过Groovy 1.8 中`@Log` [添加的注解吗？](http://www.canoo.com/blog/2010/09/20/log-groovys-new-and-extensible-logging-conveniences/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-04T10:33:02.660

[`@Log4j`Groovy 使用类上的注解](http://www.canoo.com/blog/2010/09/20/log-groovys-new-and-extensible-logging-conveniences/)对此提供本机支持。这将创建一个`log`指向 Log4J Logger 的字段，该字段与所讨论的类同名，即：

```
package com.example
import groovy.util.logging.Log4j

@Log4j
public class LogExample {
} 
```

相当于

```
package com.example
public class LogExample {
  private static final Logger log = Logger.getLogger(LogExample.class)
} 
```

# php - 如何使用 php 播放 mp3 音乐？

> ID：11327066
> 
> 赞同：0
> 
> 时间：2012-07-04T10:16:44.390
> 
> 标签：php, html

我在网站上有一个目录，里面有几首音乐。

我想要的是单击一个简单的按钮并听其中一首音乐。

这可能使用php吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T13:12:20.640

PHP 是一个服务器端脚本，更多地用于数据处理和与数据库交互。您正在寻找的是客户端脚本，因此使用 javascript 或 flash 是播放 MP3 的更好方法。有很多免费的 JS 和 Flash 插件供您在 Internet 上下载或安装。

我个人最喜欢的是 SoundManager2， [http://www.schillmania.com/projects/soundmanager2/](http://www.schillmania.com/projects/soundmanager2/) ，它更像是一个开发类型的 API，用于创建和定制您自己的应用程序。它是迄今为止最灵活的音频播放器之一，因为它具有令人难以置信的小型优化构建。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T10:18:49.380

有这个脚本生成器，您可以在其中让您的网页播放音频。这是链接： [http ://www.scriptgenerator.net/44/Audio-player-script-generator/](http://www.scriptgenerator.net/44/Audio-player-script-generator/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-04T10:19:02.560

您可以使用 HTML5：

```
var snd = new Audio("file.wav"); // buffers automatically when created
snd.play(); 
```

然后您可以使用 onclicks 等并触发`snd.play()`

但是看你的问题，我认为 HTML5 不支持 mp3 ......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-04T10:26:44.503

当然，仅使用 PHP 是不可能的（因为 PHP 是服务器端，我认为你想玩客户端）。但是，无论使用 javascript / flash，这都可以轻松完成。

如果你想变得很酷（并且不必支持旧的用户代理），你可以使用 html5 的原生[音频](https://developer.mozilla.org/en/HTML/Element/audio)。

我对尝试使用 JS 并退回到 flash的[AudioManager 2玩得很开心。](http://www.schillmania.com/projects/soundmanager2/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-04T10:20:55.593

媒体处理由浏览器管理。最好的方法是从您的 PHP 中推出一个嵌入音频的 HTML 页面，请参阅：-

[http://www.w3schools.com/html/html_sounds.asp](http://www.w3schools.com/html/html_sounds.asp)

如果没有在 HTML 中正确嵌入它们，浏览器会将它们视为要下载的文件，然后由每个浏览器决定它使用什么助手来播放它们，或者它们是否只是保存到磁盘上。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-04T10:26:58.793

好的，直接用 php 播放歌曲不是正确的方法，或者你可能甚至找不到安全的方法来做到这一点，网上有一些非常好的选择，我的意思是 jquery 插件，如 jwPlayer，你可以在谷歌上搜索更多。这可以帮助您设置带有播放列表的完整音频播放器。但是我再次不确定您的想法是什么，我创建了一个简单的功能来帮助您播放歌曲。

```
<?php

  function getUploadedFiles($directory){
    $folder = opendir($directory);
    while ($file = readdir($folder)) {
    if($file !== '.' && $file !== '..')
    {
        $filename = $directory.'/'.$file;
        $file_array[] = array('filename' => $file);
    }
}
return $file_array;
  }

$music = getUploadedFiles('music');

foreach($music as $value)
{
    echo '<a href="music/'.$value['filename'].'">'.$value['filename'].'</a>';
}

  ?> 
```

功能将主要取决于安装在用户机器内的浏览器或音乐播放器，因此永远不要相信用户将拥有什么+您的文件路径将可见。

我仍然建议寻找一个稳定的 jquery html5 插件，它支持 flash 作为后备，您可以轻松地设置带有播放列表的完整音频播放器。

# ruby-on-rails - 在简单的表单输入（Rails）中调用 JS

> ID：11327069
> 
> 赞同：2
> 
> 时间：2012-07-04T10:17:00.653
> 
> 标签：ruby-on-rails, simple-form

我在我的应用程序中使用简单的表单，我有一个内联 js 来设置字段名称并在用户单击字段时取消设置并修改它，如下所示

`input type="text" class="ftext" value="First Name" onclick="if(this.value=='First Name') this.value='';" onblur="if(this.value=='') this.value='First Name'"`

我正在尝试使用简单的表单 inpt 来做到这一点`<%= f.input :password, :required => true, :class => "ftext" %>`，但无法在 web.xml 中找到任何解决方案。

请就此向我提出建议。

谢谢，巴兰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T14:07:44.313

我们可以通过使用**“input_html”**选项来做到这一点，如下所示：

```
<%= f.input :email, :required => true, :autofocus => true, :input_html => { :onclick => "customFunction()", :class => "stext", :style => "padding-left:93px;width:170px;" } %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-04-26T05:28:02.630

像这样的任何东西都适用于rails 5

```
<%= f.input :email, :required => true, :autofocus => true, onclick: "yourFunction()" %> 
```

# objective-c - 这些符号（-fno-objc-arc）是什么意思？

> ID：11327070
> 
> 赞同：4
> 
> 时间：2012-07-04T10:17:02.133
> 
> 标签：objective-c, ios, xcode

我在我的项目中混合了代码，两者都应用了 ARC 的编码风格，有些则没有。然后我遇到了一个设置一些符号或标志的解决方案：-fno-objc-arc

我的问题是，这些标志是什么？这些符号是什么意思-fno-objc-arc？还有更多这些吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-04T11:12:36.830

该`-fno-objc-arc`标志是用于*编译器*的，而不是用于*链接器*的。它告诉编译器您的 Objective C 代码将手动执行所有释放和保留。这是必要的，因为新添加的 ARC 模式[禁止显式使用`retain`, `release`, `autorelease`,`dealloc`等](http://developer.apple.com/library/ios/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)；即使通过选择器，您也无法调用它们。

将所有代码转换为 ARC 可能是一项艰巨的任务，因此编译器同时支持新旧代码样式。您必须告诉编译器您正在编译的文件是旧文件还是新文件；你通过传递`-fno-objc-arc`标志来做到这一点。

还有许多其他编译器标志。它们让您可以控制编译和优化代码的方式、向您报告错误和警告的方式、标头所在的路径等等。在终端窗口中键入`man gcc`以查看编译器选项列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T10:23:17.420

ARC 代表自动引用计数。以下是从 Apple Developer 网站获取的一些信息：

> **自动引用计数**
> 
> Objective-C 的自动引用计数 (ARC) 使内存管理成为编译器的工作。通过使用 Apple LLVM 编译器启用 ARC，您将永远不需要再次键入 retain 或 release，从而大大简化了开发过程，同时减少了崩溃和内存泄漏。编译器全面了解您的对象，并在每个不再使用的对象立即释放它，因此应用程序运行速度与以往一样快，性能可预测且流畅。

在编译旧的、不兼容的代码时禁用 ARC 是很常见的。

# php - 如何设置类别输出的样式

> ID：11327071
> 
> 赞同：1
> 
> 时间：2012-07-04T10:17:02.117
> 
> 标签：php, wordpress, foreach, categories

我从某人那里得到了一点帮助，并且一直在使用以下内容在每个帖子下显示我的类别标题（杂志风格的 wordpress 博客）。它还排除了主题所依赖的类别（每个帖子都必须是这只猫的一部分才能显示在首页上）。

```
<?php
    // For each of the categories, create them as category variables
    foreach((get_the_category()) as $category) {
        // If the category is NOT the cat_name (category name) then echo some stuff
        // So grab all... except where they match cat_name (exclude basically)
        if ($category->cat_name != 'Featured') {
            echo '<a href="' . get_category_link( $category->term_id ) . '" title="' . sprintf( __( "View all posts in %s" ), $category->name ) . '" ' . '>' . $category->name.'</a> ';
        }
    }
?> 
```

但是，我想为每个显示的类别标题设置样式，即；

由此

`Movie Music TV Funny`

对此

`[Movies] [Music] [TV] [Funny]`

这很容易做到吗？能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T10:22:37.343

只需修改这一行：

```
echo '<a href="' . get_category_link( $category->term_id ) . '" title="' . sprintf( __( "View all posts in %s" ), $category->name ) . '" ' . '>&#91;' . $category->name.'&#93;</a> '; 
//added &#91; = [ and &#93; = ] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T10:20:58.127

```
echo '<a href="' . get_category_link( $category->term_id ) . '" title="' . sprintf( __( "View all posts in %s" ), $category->name ) . '" ' . '>[' . $category->name.']</a> '; 
```

# types - 在运行时访问 clojure 类型提示

> ID：11327076
> 
> 赞同：3
> 
> 时间：2012-07-04T10:17:14.140
> 
> 标签：types, clojure

假设我定义了一个包含一些类型提示的记录，如下所示：

```
(defrecord person [name sex ^Integer age city]) 
```

有没有办法在运行时使用`person`类或实例来确定指定了哪些类型提示`person`？目的是根据字段的类型改变使用的gui组件（注意字段的值可能是nil，所以我不能用值的类型来确定字段的类型）。

我尝试了一些明显的事情，但没有得到任何地方：

```
; no metadata on the class, an instance, or the keys or vals of an instance
=> (meta person)
nil
=> (meta (person. "Geoff" "male" 30 "Moon base"))
nil
=> (map meta (keys (person. "Geoff" "male" 30 "Moon base")))
(nil nil nil nil)
=> (map meta (vals (person. "Geoff" "male" 30 "Moon base")))
(nil nil nil nil)
; the field is of type Object
=> (filter (fn [x] (= "age" (.getName x))) (.getFields person))
(#<Field public final java.lang.Object matt.clarity.scratch.person.age>)
; no metadata on the fields of the class
=> (map meta (.getFields person))
(nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T11:38:24.577

我认为你应该从不同的角度来处理这个问题：

*   创建一个定义字段和数据类型的地图
*   使用此映射生成适当的 defrecord 和任何查看器/属性编辑器

该地图可能类似于：

```
 {:name java.lang.String
   :sex  java.lang.String
   :age  java.lang.Integer} 
```

然后，此地图将用作驱动系统其余部分的元数据......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T11:33:43.710

似乎在记录字段上应用类型提示对反射没有任何影响，因此它们被忽略了。

```
user=> (set! *warn-on-reflection* true)
user=> (defrecord user [^String name])     
user=> (.indexOf "z" (:name (user. "Superman")))
Reflection warning, NO_SOURCE_PATH:16 - call to indexOf can't be resolved.
-1 
```

此外，我不建议对与您的业务逻辑相关的内容使用类型提示，我更愿意使用我自己的数据标签来描述要在 UI 控件中显示的数据类型。可以定义一个协议，该协议具有获取特定类型字段类型的方法，然后在定义记录时在您的记录上实现该协议。

就像是：

```
user=> (defprotocol DescribeData (getFieldTypes [this]))
user=> (defrecord User [name age] DescribeData (getFieldTypes [_] {:name String :age Integer}))
user=> (def u (User. "Superman" 1000))
user=> (getFieldTypes u)
{:name java.lang.String, :age java.lang.Integer} 
```

这样，您可以将任何对象传递给 UI 层，并且 UI 层将与任何实现该协议的对象一起使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T12:53:44.477

没有简单的方法可以在运行时访问类型提示。您必须将 defrecord 包装在您自己的宏中，该宏可以访问如下提示：

```
(->> (-> '(defrecord Foo [^Integer a b c]) 
         macroexpand-1
         (nth 2)
         (nth 3))
     (drop-last 2)
     (map #(vec [% (-> % meta :tag)]))) ; => ([a Integer] [b nil] [c nil]) 
```

但是，我宁愿建议使用@mikera 的答案并构建一个宏，该宏发出一个defrecord 和一个包含字段-> 类型映射的defvar。

# javascript - 如何获得用户当前位置的最大准确性

> ID：11327083
> 
> 赞同：0
> 
> 时间：2012-07-04T10:17:36.800
> 
> 标签：javascript, geolocation

我正在使用此代码来获取准确的用户位置...

```
watchID=navigator.geolocation.watchPosition(handleGetCurrentPosition, handleGetCurrentPositionError, {enableHighAccuracy:true});

function handleGetCurrentPosition(location)
{   
    document.getElementById("lat").value = location.coords.latitude;
    document.getElementById("lon").value = location.coords.longitude;
    document.getElementById("accu").value =location.coords.accuracy;
    document.forms["myform"].submit();
}

function handleGetCurrentPositionError(){
    alert("Location could not be found.")
} 
```

bt 我得到的结果不准确。我使用的代码有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T10:25:36.403

准确性取决于您`Geolocation`设备的功能。`navigator.geolocation`只是`API`与该设备一起使用的一个。如果设备不支持高精度，你就不能用它做任何事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T10:35:17.773

这是下面的代码以获得准确的位置。我已经用 HTML 5 编写了这段代码。

1.  在 html 文档中创建地图占位符。

< output id="mapToYou" >正在搜索您的当前位置...</output >

1.  在页面加载中调用此 js 脚本。

```
    window.addEventListener("加载", function() {
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition（成功，错误）；
        } 别的 {
            错误（'不支持'）；
        }
    }，错误的）;

    功能成功（位置）{
        var mapToYou = document.querySelector('#mapToYou');
        alert("知道了！");
        var latlng = new google.maps.LatLng(position.coords.latitude,position.coords.longitude);
        var myOptions = {
                    缩放：15，
                    中心：latlng，
            地图类型控制：假，
            导航控制选项：{
                风格：google.maps.NavigationControlStyle.SMALL
            },
            mapTypeId：google.maps.MapTypeId.ROADMAP
        };

        var googleMap = new google.maps.Map(mapToYou, myOptions);
        var 标记 = 新的 google.maps.Marker({
          位置：latlng，
          地图：谷歌地图，
          标题：“你来了！”
        });
    }

    功能错误（味精）{
        var mapToYou = document.querySelector('#mapToYou');
        mapToYou.innerHTML = typeof msg == 'string' ? 味精：“失败”；
        mapToYou.className = '失败';

        // console.log(参数);
    }

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T10:33:03.883

我在[http://www.geoplugin.com](http://www.geoplugin.com)找到了这个有用的链接，它提供了一个非常好的位置过滤 API，并且在预测用户位置方面具有非常可怕的精度。

这是如何使用的示例：[http ://www.jquery4u.com/api-calls/geo-location-2-lines-javascript/#.T_QZrxdo3IU](http://www.jquery4u.com/api-calls/geo-location-2-lines-javascript/#.T_QZrxdo3IU)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T10:22:09.390

你试过谷歌的位置 API 吗？

如果没有，这里是链接： [https ://developers.google.com/maps/documentation/directions/](https://developers.google.com/maps/documentation/directions/)

实际上有很多由谷歌开发的 API 来提高定位的准确性

# android - 尝试将条形码扫描仪应用程序集成到我自己的 android 应用程序中时出现多个错误

> ID：11327091
> 
> 赞同：1
> 
> 时间：2012-07-04T10:18:08.140
> 
> 标签：android, barcode, zxing, integrate

我是 Android 编程的新手，如果我要问一些愚蠢的问题，我很抱歉。

我正在创建一个应用程序，并且我正在尝试按照此处的说明集成 ZXing Barcode Scanner： [http ://code.google.com/p/zxing/source/browse/trunk/android-integration/src/com /google/zxing/integration/android/IntentIntegrator.java](http://code.google.com/p/zxing/source/browse/trunk/android-integration/src/com/google/zxing/integration/android/IntentIntegrator.java)

到目前为止我所做的。我为我的应用程序创建了一些按钮，并为应该使用 ZXing 进行扫描的按钮设置了 On Click 操作。值：IntentIntegrator。然后，我将链接中的代码复制粘贴到包中的 IntentIntegrator.java 文件中。按照 eclipse 中给出的建议，我在 com.google.zxing.integration.android 包中创建了 IntentResult 类。

这一刻我在这里。这两天我一直在阅读建议、意见，我已经从头开始了，但是没有用。所以我再试一次。谁能告诉我，一步一步，如何将这个应用程序集成到我自己的程序中？或者，如果我到目前为止所做的事情是正确的，为什么当我在模拟器上作为 Android 项目运行时，我会得到至少 20 个错误，例如：http: [//s17.postimage.org/n9w5lddof/errors .png](http://s17.postimage.org/n9w5lddof/errors.png)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T14:32:17.497

你基本上做了正确的事。但是，您包含的多个副本`IntentIntegrator`或已针对与您捆绑的版本不同的版本进行编译。也就是说，不，您还没有真正按照指示正确集成它。

最快的方法是将这两个类复制到源代码树中。不需要其他 JAR 或源文件。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-04T10:27:24.193

你遵循这些步骤吗？

[http://code.google.com/p/zxing/wiki/GettingStarted](http://code.google.com/p/zxing/wiki/GettingStarted)

并尝试[将 ZXing 库直接集成到我的 Android 应用程序中](https://stackoverflow.com/questions/4782543/integration-zxing-library-directly-into-my-android-application)？？

# actionscript-3 - 将 NFC 阅读器与 Adob e AIR 结合使用

> ID：11327093
> 
> 赞同：2
> 
> 时间：2012-07-04T10:18:13.617
> 
> 标签：actionscript-3, flash, air, adobe, nfc

我有一个 ACS ACR122U NFC 读卡器和一个智能卡。我试过谷歌搜索，但似乎找不到任何允许我通过 NFC 读/写的本机扩展。

你们中有人有我可以阅读的资源吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T09:43:16.027

[这](http://code.google.com/p/ane-lab/)可用于 Android 和 AIR。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-13T04:59:59.950

在这里你可以找到 NFC (beam) 原生扩展[http://www.devactionscript.com/free-ane/near-field-communication-nfc-beam-ane-adobe-air-native-extensions-for-android/](http://www.devactionscript.com/free-ane/near-field-communication-nfc-beam-ane-adobe-air-native-extensions-for-android/)

# android - 在网格视图上实现滑动手势

> ID：11327095
> 
> 赞同：4
> 
> 时间：2012-07-04T10:18:21.010
> 
> 标签：android, gridview, swipe-gesture

我想在**GridView**上实现滑动手势。例如：我有 3*3 **GridView**和 9 个图像，当我用手指滑动我想要删除的图像时，如果你有任何想法，有人可以帮助我。

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2016-02-14T16:59:35.313

这是一个例子，对我有用

```
public class GameActivity extends AppCompatActivity {

    private GestureDetectorCompat detector;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_game);

        detector = new GestureDetectorCompat(this, new MyGestureListener());

        GridView board = (GridView) findViewById(R.id.board);
        board.setOnTouchListener(new View.OnTouchListener() {
            @Override
            public boolean onTouch(View v, MotionEvent event) {
                detector.onTouchEvent(event);
                return false;
            }
        });
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        detector.onTouchEvent(event);
        return super.onTouchEvent(event);
    }

    class MyGestureListener extends GestureDetector.SimpleOnGestureListener {

        private static final int SWIPE_THRESHOLD = 100;
        private static final int SWIPE_VELOCITY_THRESHOLD = 100;

        @Override
        public boolean onDown(MotionEvent event) {
            return true;
        }

        @Override
        public boolean onFling(MotionEvent event1, MotionEvent event2,
                               float velocityX, float velocityY) {

            float diffY = event2.getY() - event1.getY();
            float diffX = event2.getX() - event1.getX();
            if (Math.abs(diffX) > Math.abs(diffY)) {
                if (Math.abs(diffX) > SWIPE_THRESHOLD && Math.abs(velocityX) > SWIPE_VELOCITY_THRESHOLD) {
                    if (diffX > 0) {
                        onSwipeRight();
                    } else {
                        onSwipeLeft();
                    }
                }
            } else {
                if (Math.abs(diffY) > SWIPE_THRESHOLD && Math.abs(velocityY) > SWIPE_VELOCITY_THRESHOLD) {
                    if (diffY > 0) {
                        onSwipeBottom();
                    } else {
                        onSwipeTop();
                    }
                }
            }
            return true;
        }        
    }

    private void onSwipeLeft() {

    }

    private void onSwipeRight() {

    }

    private void onSwipeTop() {

    }

    private void onSwipeBottom() {

    }
} 
```

# iphone - CoreData 无法完成从 xml 提要中检索数据并使用托管对象进行操作的错误

> ID：11327098
> 
> 赞同：0
> 
> 时间：2012-07-04T10:18:28.567
> 
> 标签：iphone, objective-c, ios, core-data, core-data-migration

我有错误 - CoreDate 无法完成从.. 检索数据的错误。应用程序`Item *currentItem = (Item *)[self.fetchedObjectsArray objectAtIndex:currentItemIndex]`在下面的代码中立即崩溃。但是，它确实显示了几个提要，然后崩溃了。重现错误也很困难，即使它确实被重现，它也会在收到不同数量的提要后崩溃。有谁知道我将如何调试这样的问题？

```
- (void) showNextFeed {
if ([self.fetchedObjectsArray count] <= 0) 
     return;
if (feedAnimating) 
     return;

feedAnimating = YES;

//start off the left of the screen
self.newsTitleView.center = CGPointMake(-self.newsTitleView.frame.size.width * 0.5, self.newsTitleView.center.y);

//start off the right of the screen
self.newsItemTitleLabel.center = CGPointMake(self.view.frame.size.width + self.newsItemTitleLabel.frame.size.width * 0.5, self.newsItemTitleLabel.center.y);

//update the content
currentItemIndex = (currentItemIndex + 1 < [self.fetchedObjectsArray count]) ? (currentItemIndex + 1) : 0;
Item *currentItem = (Item*)[self.fetchedObjectsArray objectAtIndex:currentItemIndex];
self.newsTitleView.backgroundColor = [UIColor colorWithHexString:currentItem.belongsTo.color];
self.newsFeedTitleLabel.text = currentItem.belongsTo.feedTitle;
self.newsItemTitleLabel.text = currentItem.itemTitle; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T12:26:26.000

您首先应该确保`currentItemIndex`（我认为是类 ivar）已正确初始化。可能值得检查它在哪里被操纵。

也是如此`fetchedObjectsArray`。它还在哪里被改变，改变和你的方法会相互干扰吗？

实际上，该错误表明核心数据中的某个项目在视图仍然需要时已被删除或更改（就像您的 up`showNextFeed`方法中的情况一样）。

最后，您是否考虑过使用`NSFetchedResultsController`? 使用它，线程和错误检查要容易得多，您可以将大部分棘手的持久性存储更新和获取留给核心数据，而不是维护自己的结果数组。（你已经有很多代码只是为了检查你是否越界......）

# c# - Xml(De)Serializing 时保持多对多关系

> ID：11327103
> 
> 赞同：0
> 
> 时间：2012-07-04T10:18:56.530
> 
> 标签：c#, serialization, deserialization

我有一个`Model`类，其中包含`Message`s 和`Signal`s 的列表。

每个`Message`可以包含 0、1 或更多信号。A`Signal`可以同时包含 0、1 或更多消息。在使用 XmlSerializer 反序列化时，我在维护消息和信号之间的关系时遇到了麻烦，同时还避免了重复的对象（在我的应用程序中，除了 XmlSerializer 之外不能使用任何东西）。

```
class Model
{
    private MessageCollection messages;
    public MessageCollection Messages { get { return messages; } }

    private SignalCollection signals;
    public SignalCollection Signals { get { return signals; } }

    public Model()
    {
        // the collection classes automatically set the Model property of any
        // Messages/Signals added to its appropriate owner (this)
        this.messages = new MessageCollection(this);
        this.signals = new SignalCollection(this);
    }
}

class Message
{
    [XmlIgnore] // set by MessageCollection
    public Model Model { get; set; }

    public List<Signal> Signals
    {
        get { ??? }
    }
}

class Signal
{
    [XmlIgnore] // set by SignalCollection
    public Model Model { get; set; }

    public List<Message> Messages
    {
        get { return this.Model.Messages.Where(x => x.Signals.Contains(this)).ToList(); }
    }
}
```

我的想法是将 a 存储`List<uint> SignalIndices`在`Message`类中，其中包含信号的索引，因为它们在`Model.Signals`列表中。但是，假设 XmlSerializer 在序列化/反序列化时不会弄乱索引是否安全？此外，这种方法意味着`Message.Signals`获取`[XmlIgnore]`属性并依赖另一个使用`SignalIndices`列表的 Linq 来实现与`Signal.Messages`.

换句话说，是否有可能通过与 MessageCollection 和 SignalCollection 类一起使用的类似技术来始终确保数据一致性（也在反序列化过程中，其中对象构造的顺序未定义），同时还具有“真实"`List<Signal>`不使用 Linq 的 Message 类中的信号 ( ) 列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T10:33:49.927

如果在 signalcollection 中对模型的引用纯粹是为了设置模型属性，您可以在消息本身中使用 signalcollection 类

```
class Message
{
    [XmlIgnore] // set by MessageCollection
    public Model Model { get{return signals==null ? null : signals.Model;} set{signals=new SignalCollection(value);} }

    SignalCollection signals;
    public SignalCollection Signals
    {
        get { return signals; }
    }
} 
```

或者有一个从 List 派生的新信号类，它公开了一个模型属性。

如果以上不是一个选项，您可以向模型添加一个在反序列化后触发的方法（通过使用[OnDeserializedAttribute](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.ondeserializedattribute.aspx)）

```
class Model
{
     [OnDeserialized]
     private void restoreModelSignals(StreamingContext context)
    {
        //bit of linq here though
        foreach(var s in messages.SelectMany(m=>m.Signals))
             s.Model=this;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T10:34:22.630

如果您为 Message 和 Signal 添加唯一的 id，那么您可以添加一个新的 MessageSignals 单例类，该类序列化为 Message id 和 Signal id 的键值对。然后您可以序列化和反序列化所有消息、所有信号和所有消息信号对。然后，您将使用 MessageSignal 类作为查找来获取消息的所有信号

```
 public IEnumerable<Signal> Signals
  {
    get
    {
      return from signal in Signals
      from ms in MessageSignals
      where ms.MessageId == this.MessageId && ms.SignalId==signal.Id
      select signal;
    }
  } 
```

这与大多数数据库中处理多对多关系的方式非常相似。

# .net - 使用 Graphics.DrawString() (.NET 4.0) 绘制时受背景影响的字符样式

> ID：11327114
> 
> 赞同：0
> 
> 时间：2012-07-04T10:19:21.993
> 
> 标签：.net, winforms, graphics, gdi, drawstring

背景：我正在使用 WinForms 和 .NET4.0 开发旧版地图应用程序。标签、道路、图标被绘制到一个单独的位图，称为“覆盖”，与地形不同。叠加层的背景是透明的，稍后将在地形位图上绘制。

**问题是在位图上绘制文本时，文本样式受到位图背景的影响。**我向您展示了叠加层的示例图片：

![在此处输入图像描述](../Images/79aa9b671046660884c0b658a712ce2e.png)

看看标签“修道院”和“白色”。“白色”已经画在完全透明的背景上，现在看起来就像是用粗体写的一样。而“abbey”中的“ab”看起来像常规文本，因为它已被绘制在图标上。

这是生成标签的代码：

```
var bmp = new Bitmap(mapControl.Width, mapControl.Height);
using (var graphics = Graphics.FromImage(bmp))
{
    var labelRectangle = GetLabelBorders();
    Color labelBackgroundColor = Color.FromArgb(128, Color.FromName("LightPink"));
    SolidBrush sb = new SolidBrush(labelBackgroundColor);
    graphics.FillRectangle(sb, labelRectangle );
    graphics.DrawRectangle(WhitePen, labelRectangle .X, labelRectangle .Y, 
                 labelRectangle .Width - 1, labelRectangle .Height - 1);
    Font timesnew8 = new Font("TimesNew", 8);
    StringFormat strForm = new StringFormat();
    strForm.Alignment = StringAlignment.Near;
    graphics.DrawString("abbey", timesnew8, Brushes.Black, labelRectangle , strForm);
} 
```

**我希望文本看起来不粗体。我怎样才能做到这一点？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T11:44:38.883

正如前面的评论所说：尝试在您的 Graphics 对象上使用[TextRenderingHint](http://msdn.microsoft.com/en-us/library/system.drawing.graphics.textrenderinghint.aspx)属性来查看它是否以不同的方式呈现文本。

# c# - 我应该为 dateTime 使用哪个字符（例如对于 int，我们使用 %d）

> ID：11327117
> 
> 赞同：0
> 
> 时间：2012-07-04T10:19:26.407
> 
> 标签：c#

当我们想像`int`我们使用（％d）一样将某物传递给数据库时，如下所示

`...string.format("select * from Table where code=%d",100)...`

`%d`当我们想通过时，我应该使用什么来代替`dateTime`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-04T10:22:11.680

不要使用 string.format() 进行数据库参数替换，你最终会陷入 SQL 注入。SqlCommand 有Parameters 属性，可以将参数添加到集合中

像这样使用参数化查询：

```
SqlCommand cmd = new SqlCommand()
cmd.Parameters.AddWithValue("@yourParam",value); 
```

如果在代码中使用 Using 块，效率会更高。

像这样

```
using(SqlConnection con = new SqlConnection("ConnString"))
using(SqlCommand cmd =  new SqlCommand(con))
{
   // do some stuffs. like add parameters. 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T10:33:05.153

除了@Ravi 的回答。

你应该避免像这样连接你的 SQL 查询，因为它会允许[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)。

在您的情况下，我会考虑使用 ORM（[实体框架](http://msdn.microsoft.com/en-us/library/aa697427%28v=vs.80%29.aspx)、[NHibernate](http://nhforge.org/Default.aspx)、[Dapper](http://code.google.com/p/dapper-dot-net/)），但如果您只想使用`SqlCommand`，您的查询看起来有点像这样：

```
using(var connection = new SqlConnection("your connectionstring goes here"))
{
    using(var command = new SqlCommand("select* from Table where code=@dateTime", 
                                                                             connection))
    {
        command.Parameters.AddWithValue("@dateTime", DateTime.Now);

        var reader = command.ExecuteReader();
    }
} 
```

这是来自维基百科的一个示例，它显示了连接 sql 语句的问题：

`statement = "SELECT * FROM users WHERE name = '" + userName + "';"`

如果`userName`只包含 a会发生什么`'`？

最终的 SQL 语句将如下所示：

`SELECT * FROM users WHERE name = '''`

这是不正确的，将引发错误。通过暴露这一点，您可以对您的数据做非常有害的事情！

# android - 为 Odin 打包已编译的 Android 内核

> ID：11327118
> 
> 赞同：0
> 
> 时间：2012-07-04T10:19:28.333
> 
> 标签：android, kernel, android-source

我已经编译了我的内核，现在有哪些正确的步骤可以让它准备好被刷新？

# alfresco - dotcmis / alfresco / delete => 创建 => 搜索延迟

> ID：11327119
> 
> 赞同：2
> 
> 时间：2012-07-04T10:19:31.680
> 
> 标签：alfresco, cmis, dotcmis

我尝试将 dotcmis 和 alfresco 集成到我的应用程序中。在创建单元测试时，我遇到了这个问题： - 我通过删除“myfolder”（如果有）来设置我的测试环境 - 我创建了 myfolder 并将文档放入其中

然后我尝试查找文档： - 第一次（当 myfolder 之前不存在时），搜索返回 0 个结果 - 下一次，当 myfolder 之前存在并被我的测试设置删除时，我得到一个异常：

```
Apache Chemistry OpenCMIS - runtime error
HTTP Status 500 - <!--exception-->runtime<!--/exception--><p><!--message-->Node does     not exist: missing://missing/missing(null)<!--/message--></p><hr noshade='noshade'/><!--    stacktrace--><pre>
org.apache.chemistry.opencmis.commons.exceptions.CmisRuntimeException: Node does not exist: missing://missing/missing(null)
at org.alfresco.opencmis.AlfrescoCmisExceptionInterceptor.invoke(AlfrescoCmisExceptionInterceptor.java:80)
at ... 
```

当我去 Alfresco 时，该文件存在。似乎文件夹和文档还不能用于查询，但为什么呢？如果我在测试环境in​​it中添加注释，则找到该文件

也许我做错了什么，但什么？

这是我的代码：

```
[TestMethod()]
[DeploymentItem(@"Files\SearchTest_1", @"Files\SearchTest_1")]
public void SearchTest_2()
{
    string myfoldername = "myfolder";

    // Session creation
    var p = new Dictionary<String, String>();
    p[SessionParameter.User] = _userName;
    p[SessionParameter.Password] = _userPassword;
    p[SessionParameter.BindingType] = BindingType.AtomPub;
    p[SessionParameter.AtomPubUrl] = _serverUrl;

    var session = DotCMIS.Client.Impl.SessionFactory.NewInstance().GetRepositories(p)[0].CreateSession();
    session.DefaultContext.CacheEnabled = false;
    var operationContext = session.CreateOperationContext();
    operationContext.IncludeAcls = true;

    // Delete and create back folder and document
    // /*
    DotCMIS.Client.IFolder rootFolder = this._testSession.GetRootFolder(operationContext);
    DotCMIS.Client.IFolder myFolder = null;
    Dictionary<String, Object> properties = null;

    // Le dossier de destination des tests existe-t-il ?
    var myFolderExists = rootFolder.GetChildren(operationContext).Any(child => child.Name.Equals(myfoldername));
    if (myFolderExists)
    {
        myFolder = (DotCMIS.Client.IFolder)session.GetObjectByPath(String.Format(@"/{0}", myfoldername), operationContext);
        myFolder.DeleteTree(true, DotCMIS.Enums.UnfileObject.Delete, true);
    }

    properties = new Dictionary<String, Object>();
    properties[PropertyIds.Name] = myfoldername;
    properties[PropertyIds.ObjectTypeId] = "cmis:folder";
    myFolder = rootFolder.CreateFolder(properties);
    rootFolder.Refresh();

    myFolder = (DotCMIS.Client.IFolder)session.GetObjectByPath(String.Format(@"/{0}", myfoldername), operationContext);

    FileInfo sourceFile = new FileInfo(@"Files\SearchTest_1\SearchTest_1.pdf");
    properties = new Dictionary<String, Object>();

    properties[PropertyIds.ObjectTypeId] = "cmis:document";
    properties[PropertyIds.Name] = sourceFile.Name;

    using (var fileStream = sourceFile.OpenRead())
    {
        var contentStream = new DotCMIS.Data.Impl.ContentStream();
        contentStream.MimeType = "application/pdf";
        contentStream.Stream = fileStream;
        contentStream.Length = fileStream.Length;
        //this._testSession.CreateDocument(properties, this._testSession.CreateObjectId(myFolder.Id), contentStream, null);
        DotCMIS.Client.IDocument createdDocument = myFolder.CreateDocument(properties, contentStream, null);
    }

    // */

    // Recherche
    string query = @"SELECT * FROM cmis:document WHERE cmis:name = 'SearchTest_1.pdf'";
    var results = this._testSession.Query(query, false, operationContext).ToArray();
    Assert.AreEqual(1, results.Length);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T11:15:01.950

您是否使用带有 Solr 的 Alfresco 4.0 进行索引？Solr 索引最终是一致的，这意味着更新可能需要一段时间（默认配置中最多 15 秒）才能显示在搜索结果中。

如果您需要立即显示更新，您可以切换到 Lucene 作为索引子系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T09:18:30.890

我不认为 solr 的“最终一致”方面是生产中的问题。可能是在测试时，但我更喜欢在生产中拥有更好的系统并且在调试中遇到一些问题而不是相反。

为了在调试中解决我的问题，我首先放置了一个 Thread.Sleep(20)... 并且它有效，但是.. 调试时很长。

我的第二个似乎可行的解决方案是使用 url 地址检查 solr 的索引状态：8080/solr/admin/cores?action=REPORT（我的代码中的 _solrStateUrl）。问题是默认情况下它只能通过 SSL 访问。所以你需要从afresco服务器获取文件“browser.p12”，放到你的项目中。

所以我做了 2 种方法： - CheckIndexingState 正在解析 xml 响应以查找正在进行的事务 - WaitForIndexingDone 在 CheckIndexingState 上循环

这段代码可能不是很安全，但它只是为了测试......

这里是。希望这会帮助某人...

```
private bool CheckIndexingState()
{
    ServicePointManager.ServerCertificateValidationCallback += new RemoteCertificateValidationCallback(delegate(object sender2, X509Certificate certificate, X509Chain chain, SslPolicyErrors sslPolicyErrors) { return true; });
    System.Net.HttpWebRequest request = (HttpWebRequest)System.Net.WebRequest.Create(_solrStateUrl);
    request.ClientCertificates.Add(new X509Certificate2(@"ssl/browser.p12", "alfresco"));
    var sb = new System.Text.StringBuilder();
    byte[] buffer = new byte[256];
    int nbRead = -1;
    using (var stream = request.GetResponse().GetResponseStream())
    {
        while (nbRead != 0)
        {
            nbRead = stream.Read(buffer, 0, 256);
            sb.Append(System.Text.Encoding.UTF8.GetString(buffer, 0, nbRead));
        }
    }

    String state = sb.ToString();

    try
    {
        XmlDocument doc = new XmlDocument();
        doc.LoadXml(sb.ToString());

        var node = doc.SelectSingleNode(@"/response/lst[@name='report']/lst[@name='alfresco']/long[@name='Count of transactions in the index but not the DB']");
        int count = Int32.Parse(node.InnerText);
        if (count > 0)
            return false;

        node = doc.SelectSingleNode(@"/response/lst[@name='report']/lst[@name='alfresco']/long[@name='Count of acl transactions in the index but not the DB']");
        count = Int32.Parse(node.InnerText);
        if (count > 0)
            return false;

        node = doc.SelectSingleNode(@"/response/lst[@name='report']/lst[@name='alfresco']/long[@name='Count of missing transactions from the Index']");
        count = Int32.Parse(node.InnerText);
        if (count > 0)
            return false;

        node = doc.SelectSingleNode(@"/response/lst[@name='report']/lst[@name='alfresco']/long[@name='Count of missing acl transactions from the Index']");
        count = Int32.Parse(node.InnerText);
        if (count > 0)
            return false;
    }
    catch (Exception)
    {
        throw;
    }

    return true;

} 
```

# drupal - Drupal 6 输入过滤器丢失

> ID：11327123
> 
> 赞同：0
> 
> 时间：2012-07-04T10:20:04.947
> 
> 标签：drupal, filter, drupal-6

我刚刚接管了 Drupal 6 的安装，并且 img 标签正在从常见问题解答显示中删除，尽管它们在编辑模式下仍然可见。我知道这可以通过输入过滤器进行控制，但是输入过滤器未显示在“管理”>“站点”配置菜单中。如何启用此菜单项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T13:10:23.957

您需要寻找的是`Text formats`. 像这样的东西`admin/config/content/formats`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T13:48:18.117

你在 - 看到什么`<yoursite>/admin/settings/filters`？那里列出了输入格式吗？

# android - 如何在CursorLoader Android中实现AsyncTask PublishProgress效果

> ID：11327125
> 
> 赞同：2
> 
> 时间：2012-07-04T10:20:15.500
> 
> 标签：android

美好的一天，众所周知，通过 AsyncTask，我们获得了 PublishProgress() 方法，该方法可用于定期更新主 UI 线程。当您从 sdcard 或任何地方加载大量图像并在每个完成加载时显示它们时，这特别有用。

如何使用 CursorLoader（关于加载图像）实现定期更新 UI 的相同任务？.. 或者 CursorLoader 是否足够快以至于仅使用进度对话框就足够了？

我认为您可以使用处理程序，但不太确定如何使用。谢谢

# ios - iOS 中的 .ttf 字距调整：如何读取字距调整信息？

> ID：11327131
> 
> 赞同：5
> 
> 时间：2012-07-04T10:20:48.403
> 
> 标签：ios, cocos2d-iphone, kerning

我在 iOS 应用程序（cocos2d、OpenGL）中使用自定义字体并且没有字距调整。字体已经有字距调整信息（在我的 Mac 上的 TextEdit 和 Pages 字距调整对看起来不错），但是当我在应用程序中使用此字体时 - 字距调整不适用。有没有办法在 iOS 应用程序中使用带有自定义 .ttf 字体的字距调整对？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T13:55:12.240

这不是您的问题的答案。

为 kern 目的获取 .fnt 文件的替代解决方案。

[如何为 cocos2d 字体创建 .fnt 文件](https://stackoverflow.com/questions/8279384/cocos2d-how-to-create-fnt-file-for-font-texture-atlas)

# javascript - KnockoutJS 复制数据开销

> ID：11327138
> 
> 赞同：0
> 
> 时间：2012-07-04T10:21:02.537
> 
> 标签：javascript, knockout.js, overhead

在过去的几天里，我对 Knockoutjs 越来越感兴趣。它看起来很有前途，因为它模拟了 MVVM 模式和类似 WPF 的绑定，但我确实有一些疑问，只要它为非 RIA Web 应用程序带来一些有用的东西（当我说 RIA 时，我的意思是浏览器应用程序中的复杂性，比如说 ERP，无论如何比在表格中添加几行并隐藏一个更复杂的东西）

假设您有一个包含 10 个项目的组合框，您需要能够在客户端创建另外 2 个项目并将它们保存在服务器上。

在我看来，您必须使用 Obs 创建一个视图模型。预填充 10 个项目的数组，并在组合框中呈现 10 个项目（作为 10 个选项元素）。

基本上，您将有 2 次循环两次项目集合，并在 js 视图模型和组合框（选项）中呈现项目。

现在想象一下，如果您有 30 个控件，那么不会有关于剔除视图模型和带有预填充数据的 html 控件的信息是开销吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T10:34:57.257

每种情况都不同，但我认为您通常不需要呈现这些组合框选项以及在 Knockout 视图模型中定义它们 - Knockout 将为您构建选项 HTML。我在一个复杂的对象图中以这种方式填充了许多组合框。当页面首次加载时，对象图的初始状态在页面中呈现为对象文字，然后我将其传递给我的顶级 Knockout 视图模型构造函数，该构造函数通过映射插件创建整个结构（创建子视图模型等）。然后所有的保存和更新都是通过小的离散 Ajax 操作和映射插件重新映射来完成的。

# android - 如何使用 ProGuard 追溯水平合并的类？

> ID：11327140
> 
> 赞同：1
> 
> 时间：2012-07-04T10:21:08.487
> 
> 标签：android, proguard

我们正在使用 ProGuard 来混淆和优化我们的 Android 应用程序，到目前为止，我们一直保持所有类/合并优化处于活动状态。这样做的问题是：如果在水平合并到不同类的方法中发生错误，回溯工具不会恢复该步骤，因此行号变得无用并且无法追踪错误。

我们刚刚遇到的一个特殊示例是将静态辅助方法合并到一个类中，该类是我们链接的第 3 方 JAR 的一部分——我们甚至没有源代码。由于 retrace 向我显示了该 3rd 方类中的行号（因为辅助方法已合并到其中），所以我无法继续。

有没有办法在优化过程中追溯合并到其他类中的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T13:57:09.927

标准的 java 类文件格式不提供一种方法来表示有关最终在单个类文件中的不同源文件的调试信息（尽管 dalvik 格式可以）。因此，ProGuard 可以合并类，但不能合并它们的所有调试信息。在堆栈跟踪中引用合并类的行获取这些类之一的名称。不过，行号继续引用原始源文件，这可能会有所帮助。

然而，更复杂的是，内联方法获取调用的行号。这种调试信息的丢失也会影响堆栈跟踪及其去混淆。

# jquery - 如何检查太多单选按钮组的值以启用提交按钮？

> ID：11327143
> 
> 赞同：1
> 
> 时间：2012-07-04T10:21:17.130
> 
> 标签：jquery, forms, radio-button

我的表单中有太多具有不同名称的单选按钮，如果仅选中所有单选按钮组（换句话说，每个单选按钮名称已被选中），我想启用提交按钮。我怎样才能用 jQuery 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T10:36:54.113

首先你需要收集所有电台组`name`的。然后您需要遍历所有无线电组并检查它们是否都被检查。例如：

```
$(function() {
    $('input:radio').change(function(){
        var names = [];
        var allChecked = true;
        $('input:radio').each(function(){
            if(names.indexOf($(this).attr('name')) === -1) {
                names.push($(this).attr('name'));
            }
        });
        for(var i = 0, cnt = names.length; i < cnt; i++) {
            if(!$('input[name="' + names[i] + '"]').is(':checked')) {
                allChecked = false;
            }
        }
        if(allChecked) {
            $('#submit').removeAttr('disabled');
        }
    })
});​ 
```

请参阅jsFiddle 上的[演示。](http://jsfiddle.net/antyrat/FxD6L/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T11:02:41.977

HTML：

```
<form>
   <input type="radio" name="a">
   <input type="radio" name="a">
   <input type="radio" name="a">
   <input type="radio" name="a">|
   <input type="radio" name="b">
   <input type="radio" name="b">
   <input type="radio" name="b">
   <input type="radio" name="b">|
   <input type="radio" name="c">
   <input type="radio" name="c">
   <input type="radio" name="c">
   <input type="radio" name="c">
   <input id="mysubmit" type="submit" value="Submit" disabled="disabled"/>
</form> 
```

查询：

```
$().ready(function(){
   $('form input:radio').change(function(){
        var rButtons = $('form input:radio');
        var rValues = $.map(rButtons, function(e, i) {
               return $('input[name="'+ e.name +'"]').is(':checked');
        }).toString().split(',');
        // -1 for if no match
        if($.inArray('false', rValues) == -1) {
            $('#mysubmit').removeAttr('disabled');
        }
    });

}); 
```

更新了此答案以符合您的要求。 [小提琴演示](http://jsfiddle.net/WsgFx/5/)

# symfony - 停留在prePersist功能时如何取消保存实体

> ID：11327149
> 
> 赞同：11
> 
> 时间：2012-07-04T10:21:33.240
> 
> 标签：symfony, doctrine-orm

我有一个问题：在一个过程中，我想取消在 prePersit 函数中保存实体：

```
/**
 * @ORM\PrePersist
 */
public function setTranslationsValue2()
{
    if((null===$this->getContent())or($this->getContent()==''))
    {
        //wanna stop saving this item???
       return false;
    }
} 
```

在上面的函数中，我不想再保存这个实体，也不想停止我的进程（该进程仍然保存另一个s）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T11:03:13.147

您不能在实体中使用 prePersist 注释来做到这一点。您的方法的问题是您无法访问模型中的 entityManager ，但您需要告诉他不要坚持您的实体。

您可以按照教义文档中的说明使用事件侦听器：http: [//docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/events.html#implementing-event-listeners](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/events.html#implementing-event-listeners)

然后，您将监听 prePersist 事件，查看是否有任何类型的实体要求持久化，并查看您的条件是否为真。如果是这样，您可以告诉 entityManager 分离实体。

**但**我想你可以通过将内容设置为 notNull 并将内容转换为 null 如果长度 < 1 来做更简单的事情。确保保留正确的实体是你的域逻辑的一部分，我不会在实体本身或一些事件监听器。如果你有很多这样的听众和条件，你最终会遇到许多没人知道的神奇约束。

除了上述方法之外，您还可以实现一个 valid() 方法并检查是否满足某些条件。如果 valid() 为真，您的域逻辑只会保留实体。更好的方法是使用 symfony2 验证器来验证您的实体，然后采取相应的行动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-16T18:57:46.643

只需抛出 new Exception("Some message...");

# php - 使用没有数据库的 SESSION 创建在线用户列表？

> ID：11327151
> 
> 赞同：0
> 
> 时间：2012-07-04T10:21:47.107
> 
> 标签：php

我想在没有数据库解决方案的情况下为我的网站维护一个在线用户列表（以减少负载）。

是否可以通过会话来实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T10:24:01.380

我认为您应该为此使用内存缓存。session 和 cookie 都有大小限制，这显然不是正确的选择

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T10:24:18.143

也许您可以稍微修改这个类以包含用户名：

[PHP 报告当前在线的用户数](http://www.phpclasses.org/package/382-PHP-Reports-the-number-of-users-that-are-currently-online-.html)

# phpunit - PHPunit 和 getopt

> ID：11327167
> 
> 赞同：4
> 
> 时间：2012-07-04T10:22:18.213
> 
> 标签：phpunit

我正在尝试测试一个使用第三方库的组件，该第三方库利用 getopt 检索命令行参数。

有什么办法可以让我在 PHPunit 中工作吗？

我尝试在组件调用之前插入它：

```
$args = explode( ' ', 'scriptName -q staging_to_xxx -w 250 -c 500' );
$_SERVER['argv'] = $args; 
```

但这不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T23:56:27.330

您可以使用 php.ini 设置，`register_argc_argv=false`以允许您设置 argv 和 argc 全局变量。似乎 getopt 使用全局变量，这意味着这种方法将起作用。

```
<?php
$GLOBALS['argv']=array(
    'argv_test.php',
    '-a999',
    '-b',
    );
$GLOBALS['argc']=count($argv);
var_export(getopt("a:b"));
?> 
```

如果您已将该脚本称为“argv_test.php”，则首先正常运行：

```
$ php  argv_test.php -a777 -b
array (
  'a' => '777',
  'b' => false,
) 
```

然后通过覆盖 ini 设置运行：

```
$ php -d register_argc_argv=false argv_test.php
array (
  'a' => '999',
  'b' => false,
) 
```

# linux - 如何在 Ubuntu 中安装缓存档案

> ID：11327173
> 
> 赞同：0
> 
> 时间：2012-07-04T10:22:31.413
> 
> 标签：linux, emacs

[通过emacs-snapshot PPA](http://emacs.naquadah.org/)将我的 Emacs 更新到最新版本（GNU Emacs 24.1.50.1）后：

```
sudo aptitude update
sudo aptitude safe-upgrade 
```

当我使用 rinari 对 Rails 项目进行编程时收到警告。

我厌倦了等待作者解决这个问题。所以我决定将我的 Emacs '回滚'到我安装的先前版本。

我在**/var/cache/apt/archives/**目录中找到档案：

```
/var/cache/apt/archives/emacs-snapshot_2%3a20120608-1~ppa1~precise1_amd64.deb
/var/cache/apt/archives/emacs-snapshot_2%3a20120609-1~ppa1~precise1_amd64.deb
/var/cache/apt/archives/emacs-snapshot_2%3a20120614-1~ppa1~precise1_amd64.deb
/var/cache/apt/archives/emacs-snapshot_2%3a20120615-1~ppa1~precise1_amd64.deb
/var/cache/apt/archives/emacs-snapshot_2%3a20120622-1~ppa1~precise1_amd64.deb
/var/cache/apt/archives/emacs-snapshot_2%3a20120629-1~ppa1~precise1_amd64.deb
/var/cache/apt/archives/emacs-snapshot_2%3a20120701-1~ppa1~precise1_amd64.deb
/var/cache/apt/archives/emacs-snapshot-bin-common_2%3a20120608-1~ppa1~precise1_amd64.deb
/var/cache/apt/archives/emacs-snapshot-bin-common_2%3a20120609-1~ppa1~precise1_amd64.deb
/var/cache/apt/archives/emacs-snapshot-bin-common_2%3a20120614-1~ppa1~precise1_amd64.deb
/var/cache/apt/archives/emacs-snapshot-bin-common_2%3a20120615-1~ppa1~precise1_amd64.deb
/var/cache/apt/archives/emacs-snapshot-bin-common_2%3a20120622-1~ppa1~precise1_amd64.deb
/var/cache/apt/archives/emacs-snapshot-bin-common_2%3a20120629-1~ppa1~precise1_amd64.deb
/var/cache/apt/archives/emacs-snapshot-bin-common_2%3a20120701-1~ppa1~precise1_amd64.deb
/var/cache/apt/archives/emacs-snapshot-common_2%3a20120608-1~ppa1~precise1_all.deb
/var/cache/apt/archives/emacs-snapshot-common_2%3a20120609-1~ppa1~precise1_all.deb
/var/cache/apt/archives/emacs-snapshot-common_2%3a20120614-1~ppa1~precise1_all.deb
/var/cache/apt/archives/emacs-snapshot-common_2%3a20120615-1~ppa1~precise1_all.deb
/var/cache/apt/archives/emacs-snapshot-common_2%3a20120622-1~ppa1~precise1_all.deb
/var/cache/apt/archives/emacs-snapshot-common_2%3a20120629-1~ppa1~precise1_all.deb
/var/cache/apt/archives/emacs-snapshot-common_2%3a20120701-1~ppa1~precise1_all.deb
/var/cache/apt/archives/emacs-snapshot-gtk_2%3a20120608-1~ppa1~precise1_all.deb
/var/cache/apt/archives/emacs-snapshot-gtk_2%3a20120609-1~ppa1~precise1_all.deb
/var/cache/apt/archives/emacs-snapshot-gtk_2%3a20120614-1~ppa1~precise1_all.deb
/var/cache/apt/archives/emacs-snapshot-gtk_2%3a20120615-1~ppa1~precise1_all.deb
/var/cache/apt/archives/emacs-snapshot-gtk_2%3a20120622-1~ppa1~precise1_all.deb
/var/cache/apt/archives/emacs-snapshot-gtk_2%3a20120629-1~ppa1~precise1_all.deb
/var/cache/apt/archives/emacs-snapshot-gtk_2%3a20120701-1~ppa1~precise1_all.deb 
```

那么，如何安装指定版本（旧版本）的 Emacs？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T17:07:14.090

您可以选择您知道它正在运行的正确版本并手动安装它。请注意，包是相互关联的，因此您可能需要一组相应的文件，例如：

```
/var/cache/apt/archives/emacs-snapshot-common_2%3a20120608-1~ppa1~precise1_all.deb
/var/cache/apt/archives/emacs-snapshot-gtk_2%3a20120608-1~ppa1~precise1_all.deb
/var/cache/apt/archives/emacs-snapshot-bin-common_2%3a20120608-1~ppa1~precise1_amd64.deb 
```

当您确定所需的软件包版本时，只需使用以下命令安装它们`dpkg`：

```
$ sudo dpkg -i file1.deb file2.deb ... 
```

它可能会告诉您正在降级软件包，但您可以继续。您还可以卸载当前的 emacs 快照包。

另一种选择是通过强制版本从精确的存储库中选择要安装的版本。首先，您确定您在 repos 中可用的版本：

```
$ apt-cache show emacs-snapshot 
```

这将告诉您类似的信息：

```
Package: emacs-snapshot
Priority: optional
Section: editors
Installed-Size: 14390
Version: 2:20120701-1~ppa1~precise1 
```

然后，您可以强制安装一个版本

```
$ sudo apt-get install emacs-snapshot=2:20120701-1~ppa1~precise1 
```

（可用包中显示的版本）。

# mysql - 有没有办法管理mysql的等待时间

> ID：11327174
> 
> 赞同：0
> 
> 时间：2012-07-04T10:22:37.067
> 
> 标签：mysql, time-wait

每当我们触发插入查询时，该特定表都会被锁定一段时间。该时间可以是几微秒或几秒，具体取决于需要在数据库中插入的行。

我正在为一所拥有超过 lac 用户的大学开发应用程序。

我正在处理它，因为最近几天我在谷歌上搜索它，我得到了如下的静态数据

```
10 simple read query = 1 simple write query 
```

主要问题是`notification`，每当老师发布一些更新时，我都会通知学生，只有那些感兴趣的学生才会收到通知。因此，一个更新可能有 10000+ 个通知，这肯定需要 3-5 秒`(waiting time)`。所以所有读取都将在队列中。

那么有什么办法可以缩短等待时间呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T10:33:51.830

也许您可以使用 InnoDB 代替 MyISAM，因为前者具有行级锁定，而后者在写入时具有表级锁定。如果您使用 InnoDB 作为表引擎，则只有一行被锁定，但任何其他内容仍可能被查看。

# iphone - NSMutableArray 索引难度

> ID：11327178
> 
> 赞同：0
> 
> 时间：2012-07-04T10:22:51.133
> 
> 标签：iphone, ios, xcode

删除`iCarousel`视图时，像这样：</p>

`[carousel removeItemAtIndex:index animated:YES];`

如何维护/保留已删除的视图/索引，即使是不同的`viewController`？因为根据我的经验，它会返回它的视图，或者将删除的索引放在一个数组中？这可能吗？

已经尝试将数组添加到`app delegate`，但仍然没有运气。还没试过`singleton`。但是有没有其他方法，谢谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T11:20:41.323

是的，您可以在 AppDelegate 中创建一个数组并将索引放入该数组。但在此之前，您应该以这种方式从 NSInteger(int) 创建 NSNumber 对象：

```
// This line should be in your delegate
NSMutableArray *indexesArray = [[NSMutableArray alloc] init]; 

// In your controller: 
NSInteger index = 1; // Use your index instead
NSNumber *indexObject = [NSNumber numberWithInt:index];
AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
[appDelegate.indexesArray addObject:indexObject]; 
```

视图也是如此。您也可以将 UIView 对象存储在 NSMutableArray 中。

```
UIView *view = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 100, 100)];
[appDelegate.viewsArray addObject:view]; 
```

# objective-c - 通过弱指针在块中分配 ivar

> ID：11327182
> 
> 赞同：8
> 
> 时间：2012-07-04T10:23:04.677
> 
> 标签：objective-c, automatic-ref-counting, objective-c-blocks, ivar, declared-property

`isFinished`我的接口文件中有一个只读属性：

```
typedef void (^MyFinishedBlock)(BOOL success, NSError *e);

@interface TMSyncBase : NSObject {
     BOOL isFinished_;
}

@property (nonatomic, readonly) BOOL isFinished; 
```

我想`YES`稍后将其设置为一个块，而不创建保留周期`self`：

```
- (void)doSomethingWithFinishedBlock:(MyFinishedBlock)theFinishedBlock {
    __weak MyClass *weakSelf = self;
    MyFinishedBlock finishedBlockWrapper = ^(BOOL success, NSError *e) {
        [weakSelf willChangeValueForKey:@"isFinished"];
        weakSelf -> isFinished_ = YES;
        [weakSelf didChangeValueForKey:@"isFinished"];
        theFinishedBlock(success, e);
    };

    self.finishedBlock = finishedBlockWrapper; // finishedBlock is a class ext. property
} 
```

我不确定这是不是正确的方法。这段代码会泄漏、损坏还是没问题？也许我忽略了一种更简单的方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T10:40:22.223

传递块变量可以是 nil，在调用之前检查或在函数开始时添加断言，否则你会崩溃

由于您没有保留 self 并且我们假设您在执行代码时在后台线程上执行了一些长任务，weakSelf 可以为零（希望您使用的是 ARC 和 5.0，因此您有 niled 弱引用）。

如果您没有真正的弱引用（< 5.0，没有 ARC，编译器仍会接受 __weak 但没关系），这将导致崩溃。

如果对象指针为 nil，使用 '->' 访问 ivar 也会导致崩溃，因此您需要确保它不会发生。

即使您按照 dasblinkenlight 编写的代码执行代码，如果此时 weakSelf 为 nil，它也可能崩溃，假设您在后台线程上调度块，然后在块执行之前释放对象，这使得 weakSelf nil 从而通过使用'- >' 会导致崩溃。在这种情况下，我将修改代码如下：

```
__weak MyClass *weakSelf = self;
MyFinishedBlock finishedBlockWrapper = ^(BOOL success, NSError *e) {
    MyClass *strongSelf = weakSelf;
    //! whatever task you want executed
    strongSelf.isFinished = YES;
    theFinishedBlock(success, e);
}; 
```

您也可以测试 weakSelf 是否为 nil 以防止执行昂贵的任务，如果它没有意义（对象已经被破坏）。但这取决于用例。

但是在使用块进行编程时还需要考虑其他情况，例如：您可以有一个作业对象实例，其唯一作用是在后台执行某些任务，在这种情况下，此代码可能会失败，因为您将创建新任务和它可以在后台线程上执行块之前被释放，在这种情况下，您应该保留自己并且不要在对象中保留块（这将阻止保留循环）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-07T10:14:18.013

一个轻微的解决方法是创建一个方法并让编译器为您处理它。工作正常，但我不确定这是否是正确的方法。有人可以告诉它是否正确吗？

```
__weak MyClass *weakSelf = self;
MyFinishedBlock finishedBlockWrapper = ^(BOOL success, NSError *e) {
    [weakSelf makeIsFinishedYes];
};

- (void)makeIsFinishedYes
{
    isFinished_ = YES;
} 
```

# c++ - SyntaxError：html 地图文件中的解析错误 - ogmaps ReferenceError：找不到变量：GUnload

> ID：11327183
> 
> 赞同：1
> 
> 时间：2012-07-04T10:23:04.877
> 
> 标签：c++, html, qt, google-maps, google-maps-api-3

完整 html`ogmap`地图代码的链接：[http ://code.google.com/p/earthhtml/source/browse/trunk/ogmap.html](http://code.google.com/p/earthhtml/source/browse/trunk/ogmap.html)

此地图文件从所有浏览器打开*（在最小化和最大化浏览器一次之后）*，
但是
**当它尝试从我的 C++ 代码执行它时，如下所示：**

```
void MainScreen::on_button1_clicked()
{
    map->clearCoordinates();
    map->load(QUrl("file:///home/anisha/Desktop/fwdgooglemaps/ogmaps/ogmap.html"));
} 
```

**显示以下错误：**

```
"SyntaxError: Parse error on line:1148 Source:file:///home/anisha/Desktop/fwdgooglemaps/ogmaps/ogmap.html"

"ReferenceError: Can't find variable: GUnload on line:186 Source:file:///home/anisha/Desktop/fwdgooglemaps/ogmaps/ogmap.html" 
```

此处显示第 1148 行。

```
function preloadRasterTile (uris,tile,zoom,x,y,transparent,htmlList)
{
    var url = getTileUrl (uris,tile,zoom);
    transparent&&/MSIE 6/i.test (navigator.userAgent)?
    htmlList.push(['<div style="left:', 256*x, "px;top:", 256*y, "px;filter:progid:DXImageTransform.Microsoft.AlphaImageLoader (sizingMethod = crop, src = '", url, '"', '__src__ = "'+url+'"', "></div>"].join ("")) : htmlList.push (['<img style = "position:absolute; left:',256*x," px="px">'].join(""))
} 
```

编辑：

我刚刚注释了第186行，引用错误消失了，但语法错误仍然存​​在。不涉及浏览器。**我正在 qt 小部件上加载这个缓存的地图。**

**编辑2：**

* * *

代码现在在这一行显示另一个错误： `else if (0 < minzoom><widthinearthunits><heightinearthunits><actions.length>;i++)`

在功能`repositionInlineZoomControls`上。

**javascript的index.html文件如下：**

谷歌地图 JavaScript API 示例

```
<script type="text/javascript"> 

var map;    
var latlng            = new google.maps.LatLng (28.635308, 77.22496);

var directionsDisplay = new google.maps.DirectionsRenderer ();
var directionsService = new google.maps.DirectionsService ();

var pointsArray       = new Array();
var arrayToBeReturned = new Array();

function initialize ()
{
    var myOptions = 
    {
        zoom:4,
        center:latlng,
        mapTypeId:google.maps.MapTypeId.ROADMAP
    };

    map = new google.maps.Map (document.getElementById ("map"), myOptions);
    directionsDisplay.setMap (map); 
    }

    function addMarker (x, y)
{
    var initialPoint       = new google.maps.LatLng (x, y);
    var initialPointMarker = new google.maps.Marker ({
                                position:initialPoint,
                                map:map,
                                draggable:false,
                                flat:true
                                });
}

 var arrayMarkers = new Array();
var arrayIndex   = 0;

function Open(x, y)
{   var newPosition = new google.maps.LatLng (x, y);
    map.setCenter (newPosition);        

    directionsDisplay.setMap (map);

    google.maps.event.addListener (map, "click", 
                            function (event)
                            {
                                //alert("You clicked the map."+ event.latLng.toString(4));

                                arrayMarkers [arrayIndex] = event.latLng;

                                var s0  = event.latLng.lat();
                                var s1  = event.latLng.lng();
                                var s01 = new google.maps.LatLng (s0, s1);

                                var point1 = new google.maps.Marker ({
                                                                position:arrayMarkers [arrayIndex],
                                                                draggable:false,
                                                                map:map,
                                                                flat:true
                                                                }); 
                                if (arrayIndex == 1)
                                    displayRoute ();

                                arrayIndex++;
                            });

}

function displayRoute ()
 {
    var start = arrayMarkers [0];
    var end   = arrayMarkers [1];

    var request = {
                origin:start,
                destination:end,
                travelMode:google.maps.TravelMode.DRIVING
                };

    directionsService.route (request, 
                        function (result, status) 
                        {
                            if (status == google.maps.DirectionsStatus.OK)
                            {
                                directionsDisplay.setDirections (result);

                                pointsArray = result.routes[0].overview_path;

                                var i = 0;
                                var j = 0;

                                for (j = 0; j < pointsArray.length; j++)
                                {                                       
                                    arrayToBeReturned [i] = pointsArray[j].lat ();
                                    i++;
                                    arrayToBeReturned [i] = pointsArray[j].lng ();
                                    i++;

                                    var point1 = new google.maps.Marker ({
                                        position:pointsArray[j],
                                        draggable:false,
                                        map:map,
                                        flat:true
                                        });
                                }
                            }
                        });

    getCoordinates();
}

function getCoordinates ()
{       
    return arrayToBeReturned;
}

</script> 
</head>
<body onload="initialize()" topmargin="0" leftmargin="0">
<div id="map" style="width: 641px; height: 671px"></div>
<div id="directionsPanel" style="float:right;width:1000%;height 100%"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T06:55:14.593

那条 htmlList.push 行至少看起来有点可疑，尤其是引号的使用对我来说似乎不正确。似乎单引号和双引号在某处混合在一起。例如，传递给 AlphaImageLoader 的 src 参数以单引号开头，但以双引号结尾。

通常，即使可以同时使用双引号和单引号，在使用引号时保持一致也是一个好主意。从长远来看，这将有所帮助。

我可能会使用更冗长但更具可读性的功能。我试图解决引用问题：

```
function preloadRasterTile (uris,tile,zoom,x,y,transparent,htmlList) 
{
    var url = getTileUrl (uris,tile,zoom);
    if (transparent && /MSIE 6/i.test(navigator.userAgent)) {
        htmlList.push([
            '<div style="left:', 256*x, 'px;',
            'top:', 256*y, 'px;',
            'filter:progid:DXImageTransform.Microsoft.AlphaImageLoader (sizingMethod = crop, src = "', url, '"', '__src__ = "'+url+'"', 
            '></div>'].join (""));
    } else {
        htmlList.push([
            '<img style = "position:absolute;',
            'left:', 256*x, 'px;">'].join(""));
    }
} 
```

# mono - 为 Mac OS 构建 MonoGame 框架

> ID：11327185
> 
> 赞同：0
> 
> 时间：2012-07-04T10:23:12.660
> 
> 标签：mono, monodevelop, monogame

我正准备移植游戏，这是我的第一次。我正在运行 Windows 7 并拥有来自 github 的最新版本的 MonoGame 以及 MonoDevelop 3.0.3.2。

当我尝试在 MonoDevelop 中加载 MonoGame.Framework.MacOS 解决方案时，它无法加载并给我这个错误： 无法加载项目 'MonoGame\MonoGame.Framework\MonoGame.Framework.MacOS.csproj' with unknown item type '{ 948B3504-5B70-4649-8FE4-BDE1FB46EC69};{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}'

当我尝试打开 iOS 解决方案时会发生类似的情况。但是，我能够成功构建 Windows、Linux 和 Android 解决方案。

请指教！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-10T23:45:25.123

我只是看看[https://nuget.codeplex.com/workitem/3714](https://nuget.codeplex.com/workitem/3714)并复制这一行： xmlns="http://schemas.microsoft.com/packaging/2011/08/nuspec.xsd"

在此文件 MonoGame-develop/MonoGame.Framework.Content.Pipeline/MonoGame.Framework.Content.Pipeline.MacOS.csproj 的 xmlns=...." 上

所以接下来我成功地构建了这个项目。毕竟，我会在文件夹 MonoGame.Framework/bin/MacOS/Release 中生成 .dll 并在我的游戏项目中引用它们（我也删除了旧的引用）。

我希望它可以帮助你！

# android - Android CM9/AOKP ThemeChooser Eclipse 示例？我在哪里可以找到它？

> ID：11327187
> 
> 赞同：0
> 
> 时间：2012-07-04T10:23:16.687
> 
> 标签：android, themes, cyanogenmod

我想制作一个 CM9/AOKP ThemeChooser 主题，但我不知道如何开始创建它。

是否有有效的 Ecplipse 项目？

我在哪里可以找到它？

非常感谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T20:09:35.887

这是 Ricardo Cerqueira 的帖子，其中包含 CM9 主题模板： https: [//plus.google.com/115049428938715274412/posts/Epq3Xt83Bpd](https://plus.google.com/115049428938715274412/posts/Epq3Xt83Bpd)

与他在 README 文件中描述的普通应用程序相比，构建主题时存在一些复杂性。因此，关于使用 Eclipse，我相信您可以将其用作编辑器，但如果您也希望它能够编译，则可能需要进行一些广泛的修改。

# php - 试图减少 WebApp 的带宽消耗

> ID：11327189
> 
> 赞同：0
> 
> 时间：2012-07-04T10:23:20.400
> 
> 标签：php, mobile, cordova

对于PhoneGap webapp（Android + iOS），我想使用某种机制来建立持久连接，因为我必须发出非常小但非常频繁的服务器（PHP）请求，并且标头消耗的带宽成为一个问题。我已经阅读了很多关于可能的解决方案的内容，但是它们对于我的水平（业余）来说太先进了，或者非常不稳定/实验性的。

摆脱标题开销的最简单方法是什么？我也对商业解决方案持开放态度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T09:58:58.880

[NodeJs](http://nodejs.org)可以成为您问题的最佳解决方案。

而[socket.io](http://socket.io)是您想要的模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T10:02:50.197

压缩就是答案...尝试在 Apache 上启用 gzip 压缩：

[https://serverfault.com/questions/137823/how-to-enable-either-gzip-or-deflate-compression-via-htaccess](https://serverfault.com/questions/137823/how-to-enable-either-gzip-or-deflate-compression-via-htaccess)

gzip 也被广泛使用：

```
<ifModule mod_gzip.c>
  mod_gzip_on Yes
  mod_gzip_dechunk Yes
  mod_gzip_item_include file \.(html?|txt|css|js|php|pl)$
  mod_gzip_item_include handler ^cgi-script$
  mod_gzip_item_include mime ^text/.*
  mod_gzip_item_include mime ^application/x-javascript.*
  mod_gzip_item_exclude mime ^image/.*
  mod_gzip_item_exclude rspheader ^Content-Encoding:.*gzip.*
</ifModule> 
```

# node.js - nodejs / express：如何使用数据发布到外部表单？

> ID：11327196
> 
> 赞同：2
> 
> 时间：2012-07-04T10:24:05.080
> 
> 标签：node.js, post, websocket, express

在使用要发布到表单的数据构建字符串后，如何使用 nodejs 和 expressjs 对另一个站点上的外部公共表单进行 POST？

我找不到一个简单的示例或文档，只能继续寻找如何处理和解析 POST 到您自己的应用程序中的表单。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T10:39:18.880

Node.js 使这变得非常简单，并且在他们的官方文档中。

[http://nodejs.org/api/http.html#http_http_request_options_callback](http://nodejs.org/api/http.html#http_http_request_options_callback)

```
var options = {
  host: 'www.google.com',
  port: 80,
  path: '/upload',
  method: 'POST'
};

var req = http.request(options, function(res) {
  console.log('STATUS: ' + res.statusCode);
  console.log('HEADERS: ' + JSON.stringify(res.headers));
  res.setEncoding('utf8');
  res.on('data', function (chunk) {
    console.log('BODY: ' + chunk);
  });
});

req.on('error', function(e) {
  console.log('problem with request: ' + e.message);
});

// write data to request body
req.write('data\n');
req.write('data\n');
req.end(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T03:57:52.917

由于问题询问有关提交表单的问题，我认为格式化请求正文也是一个问题。您可以自己对表单进行编码；但也可以使用其他库为方便起见。

[https://github.com/mikeal/request/](https://github.com/mikeal/request/)是一个非常好用的好方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-26T14:02:44.247

我用[针](https://github.com/tomas/needle)：

```
var needle = require('needle');

needle.post(fullUrl, {
        query : query,
        maxRows : maxRows,
        format : resultsFormat
    }, function(err, response, body)
    {
        if(!err && response.statusCode == 200)
        {
            ///code here
        }
    }); 
```

# java - 需要方向：.setObject 与 .setString 并将列信息从 GUI 保存到数据库

> ID：11327198
> 
> 赞同：0
> 
> 时间：2012-07-04T10:24:10.007
> 
> 标签：java, sql, jdbc

我的代码有很多重复，所以我将简写这些部分。我不知道我的代码有什么问题，因为没有报告错误.. 什么也没发生。

我正在使用 Netbeans GUI、jdbc 和 MS SQL。我的连接与preparedstatment = pst connection = conn等连接牢固。

我的目标是将文本和列保存到 SQL 中的单个结果集表中。

代码由操作中的私有 void 激活：

```
 private void INSERT1saveCustomers() {
    int index=1;
    int count = jTable1.getRowCount();

    for(int i=0;i<count;i++){

        SET0 = new Object[1][count];
        SET0[0][i] = txtTestiNIMI1.getText(); } 
```

这对所有名为 SET 的对象重复。然后以类似的方式定义 SAVE

```
SAVE = new Object[1][count];  
SAVE[0][i] = jTable1.getModel().getValueAt(i,0); 
```

然后我将其引入我的两个 SQL 查询

```
String sqla1 = "INSERT INTO MIT(MTY_KOD,MTY_TYY,MTY_ALU,MTY_PARA1,MTY_PARA2,MTY_TOL,MTY_KAN) values(?,?,?,?,?,?,?)";
  try{
    pst = conn.prepareStatement(sqla1);

   pst.setObject(1, SET0);
   pst.setObject(2, SET2);
   pst.setObject(3, SET1);
   pst.setObject(4, SAVE);
   pst.setObject(5, SAVE3);
   pst.setObject(6, SAVE5);
   pst.setObject(7, SET3);
   rs = pst.executeQuery();
   }

catch(Exception e){}

 String sqlb1 = "INSERT INTO TEST(TET_KOD,TET_LUK,TET_ARE,TET_YRE,TET_PVF,TET_TEMP,TET_HUM,TET_DATE, TET_VIR, TET_ERR) values(?,?,?,?,?,?,?,?,?,?)";
 try{
       pst = conn.prepareStatement(sqlb1);

   pst.setObject(1, SET0);
   pst.setObject(2, SAVE4);
   pst.setObject(3, SAVE6);
   pst.setObject(4, SAVE7);
   pst.setObject(5, SET4);
   pst.setObject(6, SET5);
   pst.setObject(7, SET6);
   pst.setObject(8, SET2);
   pst.setObject(9, SAVE8);
   pst.setObject(10, SET7);
   rs = pst.executeQuery();
   }

catch(Exception e){}

    } 
```

没有报告错误...是的，我知道当前存在异常 e，但并非总是如此：P

信息永远不会保存。我也尝试过使用 pst.setString(x,SET.toString()) 来解决同样的问题，所以我不知道从哪里解决这个问题。任何帮助将不胜感激......谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T10:27:16.047

要插入、更新或删除数据，您必须使用`statement.executeUpdate()`.

并且请：不要吞下异常。这就是让你认为什么都没有发生的原因。发生了一些事情：抛出异常，但您选择忽略它：

```
catch (Exception e){} 
```

如果你不知道如何处理这个方法中的异常，那么让方法 throw 是：

```
public void foo() throws SQLException 
```

或者至少，抓住它，但将它重新包装到运行时异常中：

```
catch (SQLException e) {
    throw new RuntimeException(e);
} 
```

# javascript - 检查文件扩展名的一部分并使用 jquery 添加一个类

> ID：11327201
> 
> 赞同：0
> 
> 时间：2012-07-04T10:24:12.463
> 
> 标签：javascript, jquery

我正在尝试从文件名中检查以下内容：

`images/PRODUCT/icon/`

从包含以下内容的页面：`div.lookup-image-wrapper`

如果我将它们都匹配，那么我想向包含以下内容的图像添加一个类：

`images/PRODUCT/icon/`

**HTML：**

```
<div class="lookup-image-wrapper" style="text-align: center">

    <div id="divProductPicZ23280" style="display:none"></div>

    <div class="divProductPic" id="divProductPic23280">
        <img alt="Camping" border="0" id="ProductPic23280" name="ProductPic23280" src="images/Product/medium/23280.jpg">
    </div>

        <img alt="Show Picture 1" border="0" onclick="setcolorpicidx_23280(1);" src="http://i47.tinypic.com/o7szev.jpg" style="cursor:hand;cursor:pointer;">

        <img alt="Show Picture 2" border="0" onclick="setcolorpicidx_23280(2);" src="http://i47.tinypic.com/o7szev.jpg" style="cursor:hand;cursor:pointer;">

        <img alt="Show Picture 3" border="0" onclick="setcolorpicidx_23280(3);" src="http://i47.tinypic.com/o7szev.jpg" style="cursor:hand;cursor:pointer;">

        <img alt="Show Picture 4" border="0" onclick="setcolorpicidx_23280(4);" src="skins/skin_1/images/nopictureicon.gif" style="cursor:hand;cursor:pointer;">

        <img alt="Show Picture 5" border="0" onclick="setcolorpicidx_23280(5);" src="images/PRODUCT/icon/23280_5_.jpg" style="cursor:hand;cursor:pointer;"> 
```

**jQuery：**

```
$("img[src='images/PRODUCT/icon/']").addClass("selected highlight"); 
```

[http://jsfiddle.net/tVvKL/](http://jsfiddle.net/tVvKL/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T10:25:51.710

您可以使用，`wild card *`这将找到所有包含 src 的图像`images/PRODUCT/icon/`

```
$("div.lookup-image-wrapper > img[src*=images/PRODUCT/icon/]").addClass("selected highlight"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T10:31:46.590

作为一个有趣的替代方案，您可以在 CSS 中执行此操作，因为您所做的只是添加一个类 - [http://jsfiddle.net/spacebeers/tVvKL/1/](http://jsfiddle.net/spacebeers/tVvKL/1/)

例如：

```
 img[src*='images/PRODUCT/icon/'] { 
        border: 2px solid red;
    } ​

    img[src^='images/PRODUCT/icon/'] { 
        border: 2px solid red;
    } ​ 
```

IE7+、Firefox 3.0+、Safari 1.3+、Chrome 2+ 和 Opera 9.2+ 支持属性选择器

[http://www.impressivewebs.com/attribute-selectors/](http://www.impressivewebs.com/attribute-selectors/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T10:26:53.050

尝试

```
$("img[src*='images/PRODUCT/icon/']").addClass("selected highlight"); 
```

或者

```
$("img[src^='images/PRODUCT/icon/']").addClass("selected highlight"); 
```

检查[jQuery 属性选择器](http://api.jquery.com/category/selectors/)。

# mysql - 在 mySQL 中是否有整个数据库（不是每个表！）的自动增量？

> ID：11327209
> 
> 赞同：5
> 
> 时间：2012-07-04T10:25:05.380
> 
> 标签：mysql, auto-increment

mySQL 中的所有表是否有适当的本机非解决方法自动递增可能性？我的意思是，不仅仅是每张表自动增加，我的意思是数据库中的每个新行都有一个数字？

我在专业的预言机（？）设置上看到了这一点。主要优点是您对所有表中的所有行/元素都有唯一的 id，而不仅仅是 PER TABLE。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T10:35:12.547

PostgreSQL 可以像这样在每次插入时使用 a`CREATE SEQUENCE seq_name`和 using进行设置。`nextval(seq_name)`

MySQL 对此没有本机支持，您可以通过创建一个只有一列和`AUTO_INCREMENT`该列上的表来模拟 PostgreSQL SEQUENCE 的行为。

您总是先插入该表，然后读取该`LAST_INSERT_ID`表的 id 以获取您需要插入到表中的 id。这将是交易安全的，因此不会产生重复。

实现此目的的另一种方法是创建一个表，其中一列没有`AUTO_INCREMENT`，只有一行保存当前最大值。

每次您需要递增时，您执行`UPDATE seq_table SET seq_column = seq_colum+1;`递增更新本身就是原子的，但是您还需要在之后读取值，这会产生两个语句并且它们不是原子的，除非您围绕它们设置事务和适当的隔离级别。这种方法可以节省空间，但也会生成锁定查询。

尝试的多个线程`INSERT`将不得不等待其他人更新，`seq_table`然后才能自己更新并读取新值。

此外，您还必须使用适当的方法`UPDATE`将 on 和`SELECT`on包装在事务中，以避免读取其他线程在您增加它后增加的值。`seq_table``ISOLATION LEVEL`

这意味着这会`INSERTS`成为交易问题，但通常不会，所以我不推荐第二种方法。

# android - 在中心设置自定义文本 ActionBarSherlock

> ID：11327210
> 
> 赞同：2
> 
> 时间：2012-07-04T10:25:05.990
> 
> 标签：android, actionbarsherlock

是否可以在 Sherlock 操作栏的中心添加自定义文本？

我知道我们可以将它设置在右侧，就像我们添加按钮时一样，或者在徽标旁边，但是在栏的中心呢？

编辑：

我这样做了，它渲染了，但它只是不在栏中。

```
LayoutInflater linflater = (LayoutInflater) getSystemService(getApplicationContext().LAYOUT_INFLATER_SERVICE); 
View GalleryTitleView = linflater.inflate(R.layout.gallery_title_layout, null); 
GalleryTitleTv = (TextView) GalleryTitleView.findViewById(R.id.GalleryTitleTv); 
ActionBar.LayoutParams lp = new ActionBar.LayoutParams(ActionBar.LayoutParams.WRAP_CONTENT, ActionBar.LayoutParams.WRAP_CONTENT); 
lp.gravity = Gravity.CENTER_HORIZONTAL; 
GalleryTitleView.setLayoutParams(lp); 
getSupportActionBar().setCustomView(GalleryTitleView); 
getSupportActionBar().setDisplayShowCustomEnabled(true); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T10:29:08.730

使用设置为`ActionBar.LayoutParams`的自定义视图。`gravity``Gravity.CENTER`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T05:59:08.967

`Gallery_title_layout.xml`通过在 中设置 textview 的重力来进行更改`center|horizantal_Center`，我建议您使用相对布局

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-02T13:18:07.970

如果您希望文本完全居中在操作栏中，除了有其他操作和按钮；那么您需要将文本（视图）放在自定义视图中。根据我的经验，如果您将文本放在一个操作（视图或提供程序）中，您不能给它一个 MATCH_PARENT 的布局参数并期望它占据整个操作栏的长度。

这是有关如何放置自定义视图的教程：https: [//plus.google.com/+RomanNurik/posts/R49wVvcDoEW](https://plus.google.com/+RomanNurik/posts/R49wVvcDoEW)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-17T01:19:43.497

你可以试试这个：

```
View customView = LayoutInflater.from(this).inflate(R.layout.actionbar_title, null);
ActionBar.LayoutParams params = new ActionBar.LayoutParams(ActionBar.LayoutParams.WRAP_CONTENT,
                ActionBar.LayoutParams.MATCH_PARENT, Gravity.CENTER);
getSupportActionBar().setDisplayOptions(ActionBar.DISPLAY_SHOW_CUSTOM | ActionBar.DISPLAY_SHOW_HOME | ActionBar.DISPLAY_HOME_AS_UP ); 
```

# objective-c - 如何测量 NSRunAlertPanel 控件之间的间距

> ID：11327214
> 
> 赞同：1
> 
> 时间：2012-07-04T10:25:21.167
> 
> 标签：objective-c, macos, cocoa, nsrunalertpanel

如何找出 NSRunAlertPanel 控件之间的像素位置数。在 Interface Builder 中，我们可以使用 Option+Mouse 来查找像素长度。请帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T10:42:22.130

只是为了分享答案，如果真的需要测量 AlertPanel 间距，有一个简单的方法。

当警报运行时，按`Cmd`+ `Shft`+ `4`，在控件之间拖动，光标将显示以像素为单位的长度和宽度。

# dll - 尝试注册 dll，但出现错误 DllRegisterServer entry point was not found

> ID：11327215
> 
> 赞同：3
> 
> 时间：2012-07-04T10:25:23.850
> 
> 标签：dll, regsvr32, dllregistration

我有一个 .net 程序集 dll，我正在尝试使用 regsvr32 进行注册，但出现以下错误：

“已加载 dll 但未找到 DllRegisterServer 入口点”

在注册其他 dll 时也出现此错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T20:11:36.693

您应该阅读[有关 regsvr32](http://support.microsoft.com/kb/249873)的 Microsoft 知识库文章。DLL 必须是 COM 库才能注册。这会暴露错误消息中记录的入口函数 ( [DllRegisterServer )。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682162%28v=vs.85%29.aspx)这可能不是因为 DLL 不是为注册而设计的，或者在某种程度上是“损坏的”。[您可以使用DLL Export Viewer 查看](http://www.nirsoft.net/utils/dll_export_viewer.html)是否导出了函数。

如果您能提供有关您是否拥有 DLL 的源代码以及为什么需要注册它们的信息，那就太好了。[如果您有一个普通的 Win32 DLL，您可以通过使用LoadLibrary](https://stackoverflow.com/questions/5520584/call-function-from-dynamic-library/5520610#5520610)从本机代码加载它来访问函数。您需要使用 .NET 代码中的 P/Invoke。

# php - XSRF 令牌应该存储在 cookie 中还是会话中？

> ID：11327216
> 
> 赞同：1
> 
> 时间：2012-07-04T10:25:25.123
> 
> 标签：php, session, cookies, token, csrf

在我正在做的一个**PHP**项目中，我想实现一个反**XSRF**机制。我正在生成一个随机令牌并将其存储在我的会话中`$_SESSION['token']`。当我提交表单时，我将会话令牌包含在隐藏字段中并验证`transmitted token == stored token`.

我的问题是，如果我将此令牌存储在 cookie 中会产生什么安全影响？

我认为这两种解决方案都可以利用，`XSS`例如，我无法看到哪种存储最适合令牌。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T14:53:43.187

如果您按照正常程序生成令牌（类似于`sha1( $username.$private_per_session_passphrase)`），我认为这没有太大区别，您可以将令牌放入 cookie 或会话变量中，并且您应该清除 CSRF 漏洞。

要考虑的主要事情是，在您将收到的令牌与您的令牌（cookie/会话）匹配之前，POST 无法成功。换句话说，页面请求不应该是自包含的。

这些可能很有趣：

*   [可以使用（加密强）会话 cookie 作为 CSRF 令牌吗？](https://stackoverflow.com/questions/10685068/is-it-ok-to-use-the-cryptographically-strong-session-cookie-as-csrf-token)
*   [CSRF 令牌生成](https://stackoverflow.com/questions/1805838/csrf-token-generation?rq=1)
*   [为什么codeigniter2不以更安全的方式存储csrf_hash，比如session？](https://stackoverflow.com/questions/8781059/why-codeigniter2-doesnt-store-the-csrf-hash-in-a-more-secure-way-such-as-sessi)

并且这篇论文描述了 CSRF + XSS 攻击：
[https ://www.htbridge.com/publications/xss_csrf_practical_exploitation_of_post_authentication_vulnerabilities_in_web_applications.html](https://www.htbridge.com/publications/xss_csrf_practical_exploitation_of_post_authentication_vulnerabilities_in_web_applications.html)

# php - 复制现有图像并使用 php 重命名

> ID：11327217
> 
> 赞同：0
> 
> 时间：2012-07-04T10:25:25.393
> 
> 标签：php, image, file, user-profile

我对最简单的最简单的有点停电。

我有一个名为“userpics”的文件夹，在该文件夹中有 100x100 的个人资料图像，名称为 user-25.jpg。在该文件夹中还有一张名为 user-none.jpg 的带有剪影的图片，在非注册用户发表评论时用作评论功能上的图片。

我想要做的是当用户注册时，user-none.jpg（带有剪影）被复制并命名为例如user-26.jpg。用户随后可以从他的帐户上传新的个人资料图像。

我只是不知道如何复制图像。我试过这个：

```
function CreateDummyProfileImage($user_id) {

        $new_dummy = "images/userpics/user-".$user_id.".jpg";

        $dummy = "images/userpics/user-none.jpg";

        list($current_width, $current_height) = getimagesize($dummy);

        $this->imageSizeH = 100;
        $this->imageSizeW = 100;

        $canvas = imagecreatetruecolor($this->imageSizeW,  $this->imageSizeH);
        $current_image = imagecreatefromjpeg($dummy);

        imagecopy($canvas, $current_image, 0, 0, 0, 0, $current_width, $current_height);
        imagejpeg($canvas, $new_dummy, 100);   
    } 
```

但这似乎不起作用。

解决了 ：

```
/**********************************************************
     * Create a user with the basic info the user posted
     * in the creation form.
     * 
     * @param string    | The name of the user
     * @param string    | The users email address
     * @param string    | The password to login with
     **********************************************************/
    function CreateUser($name, $email, $password) { 

        /***
         * First we need no check if the email already exists in the system.
         * The statement right below will do that
         ***/
        $check_if_user_exists_sql = $this->db->selectSQL("email", "tdic_users", "email = '".$email."'");
        $check_if_user_exists_result = $this->db->SQLquery($check_if_user_exists_sql);

        if(mysql_num_rows($check_if_user_exists_result) > 0) {
            $this->main->txtOutput("The user with email ". $email ." is already registered", "TXT_ERR"); //The email already exists in the system! No further processing from here!
        } else {

            /*** If the email couldn't be found we will create a new user ***/

            /*** Array containing the fields required for user creation ***/
            $fields = array(
                "name" => $name, 
                "email" => $email, 
                "password" => $this->main->SaltMe(sha1($password)), 
                "user_date_created" => time(), //The current time
                "user_last_logged_in" => 0,
                "profileimage" => "user-none.jpg" //SET THIS INSTEAD OF COPYING THE AND RENAMING THE IMAGE
                );

            $create_user_sql = $this->db->insertSQL('tdic_users', $fields);
            $create_user_result = $this->db->SQLquery($create_user_sql);

            if($create_user_result) {
                $this->ActivationMail($name, $email);
                $this->main->txtOutput("You are now registered. In shorty you will recieve an email with an activation link. Please click that link to activate your account.", "TXT_OK"); //Everything went well - we will tell the user that!                
            } else {
               $this->main->txtOutput("An error occured", "TXT_ERR"); //Whoops! Something went wrong! This is unexpected!
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T10:35:19.417

您不需要为此接近 GD 函数 - 您只需[复制文件](http://www.php.net/copy)即可。

```
function CreateDummyProfileImage($user_id) {
    $res = copy("images/userpics/user-none.jpg", "images/userpics/user-".$user_id.".jpg");
    return 'image'.($res ? '' : ' not').' created';
} 
```

但是，您描述的模型并不完全是最佳的 - 无数次复制文件。更好的是在输出点有条件地显示一个文件或另一个：

```
$user_pic = 'path_to_user_pic.jpg';
$user_pic = file_exists($user_pic) ? $user_pic : 'path_to_silhouette.jpg'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-28T10:48:30.037

流复制相对较快

```
function stream_copy($src, $dest)
{
    $fsrc = fopen($src,'r');
    $fdest = fopen($dest,'w+');
    $len = stream_copy_to_stream($fsrc,$fdest);
    fclose($fsrc);
    fclose($fdest);
    return $len;
} 
```

# c# - 如何使用asp.net c#根据用户输入查询oracle数据库

> ID：11327218
> 
> 赞同：2
> 
> 时间：2012-07-04T10:25:27.767
> 
> 标签：c#, asp.net, oracle

当我尝试根据用户输入查询 oracle 数据库并填写数据集以 xml 格式显示时，我遇到了问题。在这里我写了我的代码：-

```
using System.Data.OracleClient;

[WebMethod]
public string CallCardDetails(string CallCardNo)
{
     //initialize
     DataSet ds = new DataSet();

     //connect
     using (OracleConnection conn = new OracleConnection("User Id=oraDB;Password=ora;Data Source=CCT"))
     {
            <<(1st method)>>
            string query = "SELECT idcard from CallCardTable where idcard= :pCallCardNo";                

            <<(2nd method)>>
            string query = "SELECT idcard from CallCardTable where idcard=@CallCardNo";

            OracleCommand cmd = new OracleCommand(query, conn);

            cmd.CommandType = CommandType.Text;
            conn.Open();

            <<(1st method parameter -)>>
            OracleParameter pCallCardNo = new OracleParameter();
            pCallCardNo.Value = CallCardNo;
            cmd.Parameters.Add(pCallCardNo);

            <<(2nd method parameter - )>>
            cmd.Parameters.Add("@CallCardNo", OracleType.VarChar).Value = CallCardNo;

            OracleDataAdapter dA = new OracleDataAdapter(query, conn);
            dA.Fill(ds);

            cmd.Dispose();
            cmd.Parameters.Clear();
            dA.Dispose();
            conn.Close();
        }
        return ds.GetXml();

 }

<<1st exception>>
System.Data.OracleClient.OracleException: ORA-01008: not all variables bound

at System.Data.OracleClient.OracleConnection.CheckError(OciErrorHandle errorHandle, Int32 rc)
at System.Data.OracleClient.OracleCommand.Execute(OciStatementHandle statementHandle, CommandBehavior behavior, Boolean needRowid, OciRowidDescriptor& rowidDescriptor, ArrayList& resultParameterOrdinals)
at System.Data.OracleClient.OracleCommand.Execute(OciStatementHandle statementHandle, CommandBehavior behavior, ArrayList& resultParameterOrdinals)
at System.Data.OracleClient.OracleCommand.ExecuteReader(CommandBehavior behavior)
at System.Data.OracleClient.OracleCommand.ExecuteDbDataReader(CommandBehavior behavior)
at System.Data.Common.DbCommand.System.Data.IDbCommand.ExecuteReader(CommandBehavior behavior)
at System.Data.Common.DbDataAdapter.FillInternal(DataSet dataset, DataTable[] datatables, Int32 startRecord, Int32 maxRecords, String srcTable, IDbCommand command, CommandBehavior behavior)
at System.Data.Common.DbDataAdapter.Fill(DataSet dataSet, Int32 startRecord, Int32 maxRecords, String srcTable, IDbCommand command, CommandBehavior behavior)
at System.Data.Common.DbDataAdapter.Fill(DataSet dataSet)

<<2nd exception>>
System.Data.OracleClient.OracleException: ORA-00936: missing expression

at System.Data.OracleClient.OracleConnection.CheckError(OciErrorHandle errorHandle, Int32 rc)
at System.Data.OracleClient.OracleCommand.Execute(OciStatementHandle statementHandle, CommandBehavior behavior, Boolean needRowid, OciRowidDescriptor& rowidDescriptor, ArrayList& resultParameterOrdinals)
at System.Data.OracleClient.OracleCommand.Execute(OciStatementHandle statementHandle, CommandBehavior behavior, ArrayList& resultParameterOrdinals)
at System.Data.OracleClient.OracleCommand.ExecuteReader(CommandBehavior behavior)
at System.Data.OracleClient.OracleCommand.ExecuteDbDataReader(CommandBehavior behavior)
at System.Data.Common.DbCommand.System.Data.IDbCommand.ExecuteReader(CommandBehavior behavior)
at System.Data.Common.DbDataAdapter.FillInternal(DataSet dataset, DataTable[] datatables, Int32 startRecord, Int32 maxRecords, String srcTable, IDbCommand command, CommandBehavior behavior)
at System.Data.Common.DbDataAdapter.Fill(DataSet dataSet, Int32 startRecord, Int32 maxRecords, String srcTable, IDbCommand command, CommandBehavior behavior)
at System.Data.Common.DbDataAdapter.Fill(DataSet dataSet) 
```

<<遵循 AVD 的答案后的第三个异常>> System.Data.OracleClient.OracleException: ORA-01036: 非法变量名称/编号

```
at System.Data.OracleClient.OracleConnection.CheckError(OciErrorHandle errorHandle, Int32 rc)
at System.Data.OracleClient.OracleParameterBinding.Bind(OciStatementHandle statementHandle, NativeBuffer parameterBuffer, OracleConnection connection, Boolean& mustRelease, SafeHandle& handleToBind)
at System.Data.OracleClient.OracleCommand.Execute(OciStatementHandle statementHandle, CommandBehavior behavior, Boolean needRowid, OciRowidDescriptor& rowidDescriptor, ArrayList& resultParameterOrdinals)
at System.Data.OracleClient.OracleCommand.Execute(OciStatementHandle statementHandle, CommandBehavior behavior, ArrayList& resultParameterOrdinals)
at System.Data.OracleClient.OracleCommand.ExecuteReader(CommandBehavior behavior)
at System.Data.OracleClient.OracleCommand.ExecuteDbDataReader(CommandBehavior behavior)
at System.Data.Common.DbCommand.System.Data.IDbCommand.ExecuteReader(CommandBehavior behavior)
at System.Data.Common.DbDataAdapter.FillInternal(DataSet dataset, DataTable[] datatables, Int32 startRecord, Int32 maxRecords, String srcTable, IDbCommand command, CommandBehavior behavior)
at System.Data.Common.DbDataAdapter.Fill(DataSet dataSet, Int32 startRecord, Int32 maxRecords, String srcTable, IDbCommand command, CommandBehavior behavior)
at System.Data.Common.DbDataAdapter.Fill(DataSet dataSet) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T02:09:01.820

这应该有效：

```
 public string CallCardDetails(string CallCardNo)
    {
        //initialize
        using (DataSet ds = new DataSet())
        {
            //connect
            using (OracleConnection conn = new OracleConnection("User Id=oraDB;Password=ora;Data Source=CCT"))
            {
                // Oracle uses : for parameters, not @
                string query = "SELECT idcard from CallCardTable where idcard= :pCallCardNo";

                // Let the using block dispose of your OracleCommand
                using (OracleCommand cmd = new OracleCommand(query, conn))
                {
                    // Note: be careful with AddWithValue: if there's a mismatch between the .NET datatype of
                    // CallCardNo and the idcard column you could have an issue.  Cast the value you provide
                    // here to whatever is closest to your database type (String for VARCHAR2, DateTime for DATE, Decimal for NUMBER, etc.)
                    cmd.Parameters.AddWithValue(":pCallCardNo", CallCardNo);
                    conn.Open();

                    // Again, wrap disposables in a using or use try/catch/finally (using will dispose of things in case of exceptions too)
                    using (OracleDataAdapter dA = new OracleDataAdapter(cmd))
                    {
                        dA.Fill(ds);

                        return ds.GetXml();
                    }
                }
            }
        }
    } 
```

编辑：在数据集周围添加了 using 块。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T10:32:24.983

您必须传递`command`对象而不是将*查询*传递给 DataAdapter。

问题在这里=>`OracleDataAdapter dA = new OracleDataAdapter(query, conn);`

尝试，

```
using (OracleConnection conn = new OracleConnection("User Id=oraDB;Password=ora;Data Source=CCT"))
 {
      string query = "SELECT idcard from CallCardTable where idcard=:CallCardNo";
      using(OracleCommand cmd = new OracleCommand(query, conn))
       {
            conn.Open();
            cmd.Parameters.Add(":CallCardNo", OracleType.VarChar,20).Value = CallCardNo;
            OracleDataAdapter dA = new OracleDataAdapter(cmd);
            dA.Fill(ds);
        }
  }
  return ds.GetXml(); 
```

# java - 验证请求源是来自 Internet 还是 Intranet

> ID：11327219
> 
> 赞同：2
> 
> 时间：2012-07-04T10:25:28.323
> 
> 标签：java, jakarta-ee, weblogic

我在 Internet 上运行的应用程序也包含一些管理模块。我不想让用户在 Internet 上访问我的管理模块。我希望来自 Intranet 的请求可以访问管理模块。有没有办法在不开发服务管理组件的新应用程序的情况下控制它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T12:08:03.500

如果您使用的是 servlet，则可以添加过滤器并分析客户端 IP 地址（请参阅[此问题](https://stackoverflow.com/questions/9326138/is-it-possible-to-accurately-determine-the-ip-address-of-a-client-in-java-servle)）。
请注意，不能保证您会以任何方式确定正确的地址。
更好的方法是将这种方法与某种身份验证（用户/密码、客户端证书等）结合起来。

如果可能的话，单独的应用程序也会更好。通过这种方式，您可以简化部署过程（应用程序在不同的端口中运行等）并使其更易于扩展，因为您的管理和常规应用程序负载、安全性、可用性等很可能具有不同的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T12:03:28.543

我不确定这是否适用于您的情况，但如果管理模块接受特定端口的连接，您可以尝试关闭路由器/网关上的此端口（或任何用于将 Intranet 与 Internet 连接的端口）设置，因此不允许外部任何人访问该模块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T15:45:13.643

从可移植 Java 的角度来看，最简单的方法是创建一个过滤器来检查 IP 地址和请求的 URL。如果 url 是管理模块的一部分并且 IP 是内部的，那么你继续这个链。否则，您将重定向或中止。

话虽如此，Weblogic 也可能有其他技术来实现这一点。但是看到您在 Weblogic 服务器上运行它，我将假设这是一个企业级应用程序。在这种情况下，出于安全目的和负载平衡，您可能需要考虑将其构建为单独的模块。随着越来越多的用户访问您的应用程序，您将需要更多的服务器来处理负载。但是，管理模块可能不需要相同的容量。因此，将管理模块作为自己的应用程序托管将允许您将其托管在一个内部应用程序服务器上，而应用程序本身则分布在更大的场中。

最后，请记住，欺骗 IP 地址相当容易，因此除非您有其他形式的身份验证（例如：用户名/密码、SSL 证书交换等），否则您的应用程序将面临一些重大的安全漏洞。

只是在做出架构决策时需要考虑的事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-15T21:23:48.443

什么是底层网络服务器？如果是 apache，请使用 .htaccess 规则。

[http://www.javascriptkit.com/howto/htaccess5.shtml](http://www.javascriptkit.com/howto/htaccess5.shtml)

# c# - 基于 COM 的 .net 插件框架

> ID：11327220
> 
> 赞同：0
> 
> 时间：2012-07-04T10:25:32.660
> 
> 标签：c#, .net, com, com-interop

我有一个必须使用 COM 插件的 ASP.NET MVC3 网站。为了做到这一点，我需要以某种方式定义一个接口。据我了解（我不是 COM 专家），这可以在 .NET 中完成并使用 tlbexp.exe 或 idl->midl->tlbimp 导出。

我走了第一种方式（使用 tlbexp）。我也尝试过 IDL，但无济于事（出于某种原因，可能会将实现的 COM 对象转换回 .NET 中的 tlbimp 接口）。

如果我的界面上没有事件，这种情况会很简单：

```
[ComVisible(true)]
[Guid("EFCFB783-0225-4D45-94CB-9A26B7CC19AF")]
public delegate void ItemStatusChanged(string itemGuid, string itemStatus);

[ComVisible(true)]
[Guid("35202AE5-392D-4015-993D-29966DA5DE31")]
[InterfaceType(ComInterfaceType.InterfaceIsDual)]
public interface ICOMOutputPlugin
{
    void Method1(string arg);
    void Method2(string arg);
    event ItemStatusChanged ItemStatusChanged;
}

[ComVisible(true)]
[Guid("93862C43-503C-4C96-9BAE-944F1087AB77")]
[InterfaceType(ComInterfaceType.InterfaceIsIDispatch)]
public interface ICOMOutputPluginEvents
{
    void ItemStatusChanged(string itemGuid, string itemStatus);
} 
```

我使用 tlbexp.exe 将其导出到 tlb，并使用 regtlibv12 注册 .tlb。插件开发人员将仅使用此类型库来导入接口。

现在我有一个 C++ 项目，它将成为一个插件，我在 VS2010 中添加新的简单 ATL 对象并将 IDL 更改为：

```
importlib("stdole2.tlb");
importlib("MyExp.tlb");

[
    uuid(E09BC67A-4192-4CA3-8FD0-5CBFC69B43AC)      
]
coclass DumpToFileOutputPlugin
{
    [default] interface ICOMOutputPlugin;
    [default, source] dispinterface ICOMOutputPluginEvents;
}; 
```

我的第一个问题是，由于某种原因，我无法通过类向导以“正常方式”添加连接点。当我将它定向到 MyExp.tlb 时，它根本不显示任何源接口。所以我手动完成了（使用另一个 .tlb 并重命名了所有内容）。

所以现在我有了这两种方法的 COM 对象：

```
STDMETHOD(add_ItemStatusChanged)(_ItemStatusChanged* value);
STDMETHOD(remove_ItemStatusChanged)(_ItemStatusChanged* value); 
```

在 .NET 端，插件管理器像这样实例化插件：

```
Type type = Type.GetTypeFromProgID(progID);
comObject = Activator.CreateInstance(type) as ICOMOutputPlugin;
comObject.ItemStatusChanged += (guid, status) => ItemStatusChanged(guid, status); 
```

最后一行奇迹般地调用了`add_ItemStatusChanged`我的 COM 对象上的方法。

在这里我被卡住了，我应该在这种方法中做什么？我目前的实现是：

```
HRESULT CDumpToFileOutputPlugin::add_ItemStatusChanged(_ItemStatusChanged* value)
{
        DWORD cookie;
        HRESULT ret = Advise(value, &cookie);
        _com_error err(ret);
        LPCTSTR errMsg = err.ErrorMessage();
        return ret;
} 
```

ret = CONNECT_E_CANNOTCONNECT(0x80040202) 和 errMsg 说“IDispatch 错误 #2”。显然，Advise 期望传递的 COM 对象实现`ICOMOutputPluginEvents`委托传递的对象没有的连接点接口......我该怎么办？

我是在.NET 端错误地订阅事件还是添加处理程序？

任何帮助如何解决这个问题将不胜感激。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-04T14:19:36.260

不要在 ASP.Net 的 COM 插件中使用“事件”，只需使用您调用的方法即可。即调用的方法`OnEventName`而不是事件。

COM 事件只是不适合处理 Web 表单回发。

# extjs - 按钮单击导航到另一个视图

> ID：11327221
> 
> 赞同：0
> 
> 时间：2012-07-04T10:25:35.953
> 
> 标签：extjs, extjs-mvc, extjs4.1

我有一个按钮，当用户单击它时，我需要显示不同的视图/页面（导航到不同的视图）。

例如，屏幕 A 有一个按钮，当我单击该按钮时，我需要导航到屏幕 B。

我的代码如下；

```
onLoginSuccess : function(){
Ext.create('Ext.container.Viewport', {

                    items: [
                    {
                        xtype: 'screenb'
                    }
                    ]
                });
} 
```

但是，这是什么原因，当我单击屏幕 A 中的按钮时，我导航到屏幕 B，屏幕 A 也出现在屏幕 B 上。我需要摆脱屏幕 A（在用户单击按钮并仅显示屏幕后二）

=====================**更新 2** =========================== =============

```
Ext.define('Proj.view.loca.Person' ,{
    extend: 'Ext.form.Panel', 
    alias : 'widget.person',

    items: [

            {
        xtype: 'textfield',
        fieldLabel: 'Name',
        name: 'name'
    }, {
        xtype: 'textfield',
        fieldLabel: 'School',
        name: 'school'
      }],
    buttons: [{
        text: 'Submit',
        handler: function() {
            var form = this.up('form').getForm();
            if (form.isValid()) {
                form.submit({
                    success: function(form, action) {
                    Ext.create('Ext.container.Viewport', {

                    items: [
                    {
                        xtype: 'screenb'
                    }
                    ]
                });

                    },
                    failure: function(form, action) {
                    // Navigate to some other view
                    }
                });
            }
        }
    }]
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T12:38:20.080

我认为实现这一目标的最佳方法是使用卡片布局。

大致是这样完成的：

```
Ext.application({
    name: 'BS',

    appFolder: 'app',

    refs:
    [{
        ref: 'viewport',
        selector: 'viewport'
    }],

    launch: function() {

        Ext.create('Ext.container.Viewport', {
            layout: 'card',
            items: [{
                xtype: 'panel',
                id: 'panel1',
            },{
                xtype: 'panel',
                id: 'panel2',        
            }]
        });
    },

    onLoginSuccess : function() {
        this.getViewport().getLayout().setActiveItem(1);        
    }

}); 
```

# c# - 如何在 WPF 中调整多个画布的大小？

> ID：11327228
> 
> 赞同：1
> 
> 时间：2012-07-04T10:25:56.567
> 
> 标签：c#, wpf, forms, xaml, canvas

我想同时调整多个形状的大小。这是我的 xaml 代码。它有 2 个名为 g6 和 g10 的画布，但在实际项目中我得到了近 100 个画布。有什么解决办法吗？

```
<Canvas
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    x:Name="svg2"
    Width="612"
    Height="800">
    <Canvas
        x:Name="g4"
        RenderTransform="1.3702001,0,0,1.4522231,268.12186,265.31238">
        <Canvas x:Name="g6">
            <Path
                x:Name="path8"
                Data="F1 M-153.219,-37.369C-153.219,-37.369 -153.168,-36.483 -153.579,-36.491 -153.99,-36.5 -162.189,-58.998 -172.418,-57.948 -172.419,-57.948 -163.557,-61.389 -153.219,-37.369L-153.219,-37.369z"
                Fill="#FFFFFFFF"
                Stroke="#FF000000"
                StrokeMiterLimit="4"
                StrokeThickness="0.172" />
        </Canvas>
        <Canvas x:Name="g10">
            <Path
                x:Name="path12"
                Data="F1 M-151.46,-38.783C-151.46,-38.783 -151.734,-37.933 -152.117,-38.073 -152.5,-38.212 -152.06,-61.988 -162.059,-64.269 -162.059,-64.269 -152.48,-64.673 -151.46,-38.783z"
                Fill="#FFFFFFFF"
                Stroke="#FF000000"
                StrokeMiterLimit="4"
                StrokeThickness="0.172" />
        </Canvas>
    </Canvas>
</Canvas> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T10:37:06.273

在您的代码中，您可以执行以下操作：

```
IEnumerable<Canvas> Collection = RootControl.Chidren.ofType<Canvas>();
foreach(Canvas c in Collection)
{
    c.Height = NewHeight;
    c.Width = NewWidth;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T13:28:12.033

根据目前的信息——

您可以在您的（或 CodeBehind 或您在/usercontrol中设置的任何对象）中创建`Width`和`Height`属性，并将您的每个对象绑定到它们；在代码中更改这些属性将调整 xaml 中所有画布的大小。`ViewModel``DataContext``Window``Width``Height``Canvas`

如果您不想为每个画布添加绑定，您可以为`Canvas`( [without`x:Key`](http://msdn.microsoft.com/fr-fr/library/ms745683%28v=VS.85%29.aspx#styling_targettype) ) 创建一个全局样式，该样式将自动应用于每个画布`Canvas`；但是您必须小心地将这种样式放在正确的位置，在您提供的当前 xaml 中，将其添加`style`到最顶层的 Canvas 资源中是有意义的。

像这样的东西 -

```
<Canvas xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"    
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        x:Name="svg2" Width="612" Height="800" >
    <Canvas.Resources>
        <Style TargetType="{x:Type Canvas}">
            <Setter Property="Width" Value="{Binding GlobalWidth}" />
            <Setter Property="Height" Value="{Binding GlobalHeight}" />
        </Style>
    </Canvas.Resources>

    <Canvas x:Name="g4" ... />
    <Canvas x:Name="g6" ... />
    <Canvas x:Name="g10" ... />
</Canvas> 
```

作为旁注，我建议您不要依赖转换后的 XAML。尝试重构它以使用适当的控制/面板，将相关部分提取到用户控件中，使用样式/触发器等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T10:52:12.337

您可以创建一个包含所有画布的 Viewbox... 向我们提供有关您项目的更多信息。

# magento - 如何在 magento 1.5 中添加自定义注册字段

> ID：11327229
> 
> 赞同：-1
> 
> 时间：2012-07-04T10:25:58.077
> 
> 标签：magento, magento-1.5

我曾尝试在 magento 1.5 0 中[添加自定义注册字段。我尝试按照在 magento 1.5 中添加自定义注册字段](https://stackoverflow.com/questions/6993392/adding-custom-registration-fields-in-magento-1-5)以及我创建的许多其他方式来执行此操作。但是，如果我在注册期间为该字段添加任何数据，它不会保存到表 customer_entity_varchar 中，也没有在表 eav_attribute 中添加任何属性。这是我的代码：

在`app/local/etc/modules/Mycustommodule_Customer.xml`我有这个：

```
<config>
    <modules>
        <Mycustommodule_Customer>
            <active>true</active>
            <codePool>local</codePool>
        </Mycustommodule_Customer>
    </modules>
</config> 
```

在`app/local/Mycustommodule/Customer/etc/config.xml`这个：

```
<?xml version="1.0"?>
<config>
    <modules>
        <Mycustommodule_Customer>
            <version>0.1.0</version>
        </Mycustommodule_Customer>
    </modules>
    <global> 
        <models>
            <Mycustommodule_Customer>
                <class>Mycustommodule_Customer_Model</class>
            </Mycustommodule_Customer>
        </models>
        <resources>
            <customerattribute_setup>
        <setup>
            <modules>Mycustommodule_Customer</modules>
            <class>Mycustommodule_Customer_Model_Entity_Setup</class>
        </setup>    
                <connection>
                    <use>core_setup</use>
                </connection>
            </customerattribute_setup>
            <customerattribute_write>
                <connection>
                    <use>core_write</use>
                </connection>
            </customerattribute_write>
            <customerattribute_read>
                <connection>
                    <use>core_read</use>
                </connection>
            </customerattribute_read>     
        </resources>
        <blocks>     
            <mycustommodule_customerattribute>
                <class>Mycustommodule_Customer_Block</class>
            </mycustommodule_customerattribute>    
        </blocks>       
        <helpers>
        <mycustommodule_customerattribute>
        <class>Mycustommodule_Customer_Helper</class>      
        </mycustommodule_customerattribute>
        </helpers>
        <fieldsets>
            <customer_account> 
                <phone><create>1</create><update>1</update></phone>
            </customer_account>
        </fieldsets>  
    </global>    
</config> 
```

在`app/local/Mycustommodule/Customer/Model/Entity/Setup.php`这个：

```
class Mycustommodule_Customer_Model_Entity_Setup  extends Mage_Customer_Model_Entity_Setup
{

    public function getDefaultEntities()
    {

        $defaultEntities = parent::getDefaultEntities();

        $defaultEntities['customer']['attributes']['phone'] = array(
                        'label'        => 'Phone Number',
                        'visible'      => 1,
                        'required'     => 1,
                        'position'     => 1,
                    );                           
        return $defaultEntities;
    }

} 
```

在`app/local/Mycustommodule/Customer/sql/customerattribute_setup/mysql4-install-0.1.0.php`这个：

```
$installer->startSetup();

$installer->addAttribute('customer','phone', array(
'label' => 'Phone Number',
'visible'   => 1,
'required'  => 1,
'position'  => 1,
));

$installer->endSetup();
// Get Customer Type ID
$read = Mage::getSingleton('core/resource')->getConnection('core_read');
$eid = $read->fetchRow(
    "select entity_type_id from {$this->getTable('eav_entity_type')} where entity_type_code = 'customer'"
);
$customer_type_id = $eid['entity_type_id'];

// Save Attribute to the customer_form_attribute
$attribute = $eavConfig->getAttribute($customer_type_id, 'phone');

// Here is where you determine in wich areas of magento the attributes are used
$attribute->setData('used_in_forms', array('customer_account_edit', 'customer_account_create', 'adminhtml_customer'));
$attribute->save(); 
```

我将文件添加到`app/design/frontend/default/mycustommodule/template/customer/form/register.phtml`和`app/design/frontend/default/mycustommodule/template/customer/form/edit.phtml`

我做错了什么或错过了什么？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T10:33:19.913

我希望下面的链接对你有帮助。

[如何为客户创建新字段](https://stackoverflow.com/questions/8426242/how-to-create-new-fields-for-customer)

只有视图（.phtml）文件路径从 1.5 到 1.6+

# objective-c - Objective-C中向tableView传递数据并了解对象作用域

> ID：11327235
> 
> 赞同：0
> 
> 时间：2012-07-04T10:26:17.670
> 
> 标签：objective-c, macos, cocoa, interface-builder

几周以来，我一直在使用直接 Objective-c，最近我一直在构建小型可可 mac 应用程序以开始这方面的工作。我现在正试图找出我在使用 IB 和 Cocoa 时遇到的一些怪癖，而且我相当肯定两者都与对象范围有关。

下面是我有问题的文件，其他导入并没有什么特别之处。这里奇怪的是，我的**list**变量将记录两个不同的数组，即使我使用**self**来定位类实例。也许我用错了这个关键字，或者我只是遗漏了一些明显的东西，但无论哪种方式，我的**list** var 肯定是由 update 和 create 方法独立跟踪的。

我的第二个问题是，如果不是由 IBAction 触发，我的**create**方法将不起作用。目前，我已将其链接到一个单独的按钮，以使用**更新**方法重新加载我的表格视图。*如果我将它设置为void*并直接从另一个控制器调用该方法，为什么我的**create**方法将不起作用？

 *```
#import "Lesson_14AppDelegate.h"
#import "TableViewController.h"
#import "Transaction.h"

@implementation TableViewController

@synthesize list, transaction;

- (id) init
{   
    self = [super init];
    if (self) 
    {
        Transaction *aTransaction = [[Transaction alloc] init];
        transaction = aTransaction;
        list = [[NSMutableArray alloc] init];
    }

    return self;
}

- (NSInteger) numberOfRowsInTableView: (NSTableView *) tableView 
    {
    return [self.list count];
}

- (id) tableView: (NSTableView *) tableView objectValueForTableColumn:(NSTableColumn *) tableColumn row: (NSInteger) row 
{
    Transaction *t = [self.list objectAtIndex:row];
    NSString *identifier = [tableColumn identifier];
    return [t valueForKey:identifier];
}

- (IBAction) update: (id) sender
{   
    [self.list addObject: self.transaction];
    [tableView reloadData];

    NSLog(@"list: %@", self.list);  
}

- (IBAction) create: (float) amount : (NSString *) description
{               
    [self.list addObject: description]; 
    [tableView reloadData];

    NSLog(@"list: %@", self.list);      
}

- (void) dealloc
{
    [self.list release];
    [self.transaction release];
    [super dealloc];
}

@end 
```*

# asp.net-mvc-3 - 在链接单击时将值从一个视图发布到另一个视图

> ID：11327237
> 
> 赞同：0
> 
> 时间：2012-07-04T10:26:30.200
> 
> 标签：asp.net-mvc-3, razor

我有两个视图，即索引视图和 Createdialog 视图。索引视图的代码是：

```
<p>Search For: &nbsp;</p>
@Html.TextBox("companyName", Model); 
```

Createdialog 视图的代码是：

```
@foreach(var item in Model.branch)
{    

    <tr>
    <td><a href="#">   
    @Html.DisplayFor(itemModel => item.companyName)
    </a></td>
    <td>@Html.DisplayFor(itemModel => item.branchName)</td>
    <td>@Html.DisplayFor(itemModel => item.address)</td>
    <td>
    @Html.ActionLink("Delete", "Delete", new { id = item.branchId })
    @Html.ActionLink("Select", "Index", new { id = item.companyName })
   </td>
</tr>      
} 
```

现在我要做的是，将公司 ID 的值从 createdDialog 视图发送到索引对话框视图，并在我单击选择链接时在文本框中显示 companyName。提供建议...谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T11:18:45.307

在你看来，你应该得到这样的东西：

代替

```
<td><a href="#">   
    @Html.DisplayFor(itemModel => item.companyName)
</a></td> 
```

采用

```
@Html.ActionLink(item.companyName, "Index", new { name = item.companyName }) 
```

在控制器中捕获它

```
[HttpGet]
public ActionResult Index(string name)
{
    return View("Index", name);
} 
```

祝你好运 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T10:41:43.343

您不会在 MVC 中将值从一个视图“发送”到另一个视图。相反，您将从视图发送数据到控制器操作，然后显示另一个视图。

你所拥有的很接近，但你想要在控制器中做的是接受`companyName`作为输入参数，如下所示：

```
[HttpGet]
public ActionResult Index(string id)
{
    // Perform any initialization or other operations

    // Show the Index view with the id (the companyName) as the Model
    return View("Index", id);
} 
```

# iphone - Xcode 中的错误“未设置视图出口。”

> ID：11327239
> 
> 赞同：2
> 
> 时间：2012-07-04T10:26:46.340
> 
> 标签：iphone, objective-c, xcode, viewcontroller

我在 Xcode 中遇到问题。每次我在模拟器中运行我的应用程序时，应用程序都会在黑屏视图中停止，并且调试器会编写以下代码：

> 2012-07-04 11:54:08.348 myApp [661:f803] ***由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：'-[UIViewController _loadViewFromNibNamed:bundle:] 加载了“myappViewController”笔尖，但视图出口没有放。'

搜索我读过的网络以设置视图和奥特莱斯视图之间的链接。

对于**“文件所有者”->“连接检查器”->“插座”**，我已将视图链接到视图。

结果总是一样的。同样的错误。

还有另一种方法可以绕过这个问题吗？

感谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T11:02:15.480

尝试在界面构建器中选择文件的所有者 在属性检查器中选择第三个选项卡（在悬停帮助中称为身份检查器）并确保自定义类属性设置为“myappViewController”

还要检查根 UIView 是否已连接到“文件所有者”，方法是在 Interface Builder 中选择根视图选择属性检查器中的最后一个选项卡（在悬停帮助中称为连接检查器）并检查引用插座。

记得检查两个地方的名称大小写是否匹配。

# liferay - 为 build.username.properties 提供 tomcat 路径

> ID：11327242
> 
> 赞同：0
> 
> 时间：2012-07-04T10:26:57.357
> 
> 标签：liferay

我正在使用 Windows 7 操作系统。

我已经下载了tomcat包并在里面解压了

```
D:\LiferayJulyServer\liferay-portal-6.1.0-ce-ga1\tomcat-7.0.23 
```

所以在`build.username.properties`life ray plugin SDK里面的文件里面

```
 app.server.type=tomcat
    app.server.dir=${project.dir}/../bundles/tomcat-6.0.26
    app.server.deploy.dir=${app.server.dir}/webapps
    app.server.lib.global.dir=${app.server.dir}/lib/ext
    app.server.portal.dir=${app.server.dir}/webapps/ROOT 
```

所以我的问题是，我可以这样提供tomcat的绝对路径吗

```
app.server.dir=D:\LiferayJulyServer\liferay-portal-6.1.0-ce-ga1\tomcat-7.0.23 
```

或者请告诉我这是否不是这样做的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T10:57:59.830

您可以在其中提供绝对路径，但您应该使用正斜杠“/”而不是反斜杠“\”作为目录分隔符，否则它们可能会被解释为转义以下字符。eg`...\tomcat`将被解释为`...<tab>omcat`哪个是不存在的目录。

Windows 将愉快地使用这些分隔符。

# objective-c - CGPoint 到 NSValue 和反向

> ID：11327249
> 
> 赞同：12
> 
> 时间：2012-07-04T10:27:31.523
> 
> 标签：objective-c, xcode, macos, cocoa

我有代码：

```
NSMutableArray *vertices = [[NSMutableArray alloc] init];

//Getting mouse coordinates
loc = [self convertPoint: [event locationInWindow] fromView:self];
[vertices addObject:loc]; // Adding coordinates to NSMutableArray

//Converting from NSMutableArray to GLfloat to work with OpenGL
int count = [vertices count] * 2; // * 2 for the two coordinates of a loc object
GLFloat []glVertices = (GLFloat *)malloc(count * sizeof(GLFloat));
int currIndex = 0;
for (YourLocObject *loc in vertices) {
    glVertices[currIndex++] = loc.x;
    glVertices[currIndex++] = loc.y;        
} 
```

`loc`是 CGPoint，所以我需要以某种方式从 CGPoint 更改为 NSValue 以将其添加到 NSMutableArray，然后将其转换回 CGPoint。怎么可能做到？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-04T10:30:30.367

该类[`NSValue`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsvalue_Class/Reference/Reference.html)有方法`+[valueWithPoint:]`和`-[CGPointValue]`？这是你想要的？

```
//Getting mouse coordinates
NSMutableArray *vertices = [[NSMutableArray alloc] init];
CGPoint location = [self convertPoint:event.locationInWindow fromView:self];
NSValue *locationValue = [NSValue valueWithPoint:location];
[vertices addObject:locationValue];

//Converting from NSMutableArray to GLFloat to work with OpenGL
NSUInteger count = vertices.count * 2; // * 2 for the two coordinates
GLFloat GLVertices[] = (GLFloat *)malloc(count * sizeof(GLFloat));
for (NSUInteger i = 0; i < count; i++) {
    NSValue *locationValue = [vertices objectAtIndex:i];
    CGPoint location = locationValue.CGPointValue;
    GLVertices[i] = location.x;
    GLVertices[i] = location.y;
} 
```

# iphone - 在 iphone 中解析 nsstring json 值？

> ID：11327250
> 
> 赞同：1
> 
> 时间：2012-07-04T10:27:34.910
> 
> 标签：iphone, ios, json, parsing, nsstring

我在 NSString 中有 JSON 值。我正在尝试解析来自 NSString JSonValue 的值。

NSString 值如：

```
result =  [{"no":"01","send":"2010-05-03 01:26:48","from":"0000000000","to":"1111111111","text":"abcd"}] 
```

我已经尝试使用下面的代码来解析值 no、send、from、to、text。

```
 NSString *jsonString = result;
    NSDictionary *jsonArray = [jsonString jsonValue]; //Am trying to save the values from NSString to NSDictionary the app getting crash here.
    NSLog(@"JsonDic : %@", jsonArray); 
```

任何人都可以帮助解析来自 NSString 的 JSon 值吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T10:42:01.657

对于 iOS5，您可以使用[NSJSONSerialization](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)。

```
NSError *error;
NSString *json = @"[{\"no\":\"01\",\"send\":\"2010-05-03 01:26:48\",\"from\":\"0000000000\",\"to\":\"1111111111\",\"text\":\"abcd\"}]";
id jsonObj = [NSJSONSerialization JSONObjectWithData:[json dataUsingEncoding:NSUTF8StringEncoding] options:NSJSONReadingAllowFragments error:&error]; 
```

你也可以使用[SBJson](http://stig.github.com/json-framework/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T10:41:53.697

戈皮纳特。我已经提到了代码，请试试这个。我已经测试了我可以得到否。

```
SBJSON *parser = [[SBJSON alloc] init];  

NSDictionary *jsonArray = (NSDictionary *) [parser objectWithString:result error:nil];  
NSLog(@"jsonArray : %@", jsonArray);

NSArray *depositArray = [jsonArray valueForKey:@"no"];
NSLog(@"depositArray : %@", depositArray); 
```

请测试并让我知道您是否遇到任何问题。谢谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T10:43:35.140

解析 JSON 有点复杂。

就我而言，我使用 SBJSON，你可以从这里下载：[http ://stig.github.com/json-framework/](http://stig.github.com/json-framework/)

这是一组简单的文件，可以放入您的项目中。我建议成立一个专门的小组。

完成后，您可以使用以下代码：

```
NSError *jsonError;
NSDictionary *jsonResults;

SBJsonParser* parser = [[SBJsonParser alloc]init];
jsonResults = [parser objectWithString:YOURSTRING error:&jsonError ];

if (jsonResults == nil) {
    UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Error" message:[NSString stringWithFormat:@"Something bad happened with JSON : %@ : %@",YOURSTRING,[ jsonError localizedDescription ]] delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [alertView show];
    [alertView release];
} else {   
   NSLog(@"JSON result : %@",jsonResults);

} 
```

如果您需要更多信息，可以在 SBJSon 上找到很好的教程，例如：[http ://www.touch-code-magazine.com/tutorial-fetch-and-parse-json/](http://www.touch-code-magazine.com/tutorial-fetch-and-parse-json/)

# java - 在 log cat 中获取初始化膨胀状态

> ID：11327252
> 
> 赞同：6
> 
> 时间：2012-07-04T10:27:46.267
> 
> 标签：java, android

它是一个 Android 小部件，我正在尝试向它添加自定义字体。

这是我的代码：

```
public void updateAppWidget(Context context,AppWidgetManager appWidgetManager,int appWidgetId)  
 {
    String currentTime = (String) df.format(new Date());

    RemoteViews updateViews = new RemoteViews(context.getPackageName(), R.layout.widget1);
    updateViews.setImageViewBitmap(R.id.widget1label, buildUpdate(currentTime, context));
    appWidgetManager.updateAppWidget(appWidgetId, updateViews);
 }

public Bitmap buildUpdate(String time, Context context) 
{
  Bitmap myBitmap = Bitmap.createBitmap(160, 84, Bitmap.Config.ARGB_4444);
  Canvas myCanvas = new Canvas(myBitmap);
  Paint paint = new Paint();
  Typeface clock = Typeface.createFromAsset(context.getAssets(),"batmfo.ttf");
  paint.setAntiAlias(true);
  paint.setSubpixelText(true);
  paint.setTypeface(clock);
  paint.setStyle(Paint.Style.FILL);
  paint.setColor(Color.WHITE);
  paint.setTextSize(65);
  paint.setTextAlign(Align.CENTER);
  myCanvas.drawText(time, 80, 60, paint);
  return myBitmap;
} 
```

方法有什么问题`buildUpdate()`吗？Eclipse 在 Logcat 中没有显示错误。

# c++ - 使用 C++ 在浏览器中打开 HTML 文件

> ID：11327256
> 
> 赞同：4
> 
> 时间：2012-07-04T10:28:04.780
> 
> 标签：c++, html, visual-studio-2010

我正在使用 Visual Studio 用 C++ 编写程序，我需要做的是创建一个 HTML 文件并在其中写入数据，然后我希望在浏览器中打开它。现在我可以创建文件，写东西，但我无法打开它，有人可以帮忙吗？

这可能是一个简单的问题，但我只是一个初学者。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T10:32:18.477

```
#include <windows.h>

void main()
{  
   ShellExecute(NULL, "open", "http://dreamincode.net",
                NULL, NULL, SW_SHOWNORMAL);
} 
```

[http://www.dreamincode.net/code/snippet357.htm](http://www.dreamincode.net/code/snippet357.htm) 您只需将代码中显示的上述 URL 替换为您的 html 文件的绝对路径即可。当然可以用变量来完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T10:31:43.740

```
 void CAboutDlg::OnButton1()
{
    CString strDir;
    char buffer[255];

    GetCurrentDirectory(255, buffer);

    strDir = buffer;

    strDir.TrimRight("\\");
    strDir += "\\";
    strDir += _T("helpindex.html");

    if( 32 >= (int)ShellExecute( NULL, "open", strDir, NULL, NULL, SW_SHOWNORMAL))
    {
        AfxMessageBox("::ShellExecuteFailed"
             " to open this link!");
    }  
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-13T15:05:27.190

试试这个......它对我来说很好......

```
#include <windows.h>
void main()
{ 
    LPCTSTR helpFile = "c\help\helpFile.html";
    ShellExecute(NULL, "open", helpFile, NULL, NULL, SW_SHOWNORMAL);
    system("PAUSE");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-10T18:04:51.280

如果您正在为 UWP 开发：

```
 Windows::System::Launcher::LaunchUriAsync(ref new Uri("https://www.google.com")); 
```

# c# - 如何向其所有者发送有关更新建议状态的电子邮件通知？

> ID：11327257
> 
> 赞同：0
> 
> 时间：2012-07-04T10:28:07.867
> 
> 标签：c#, asp.net, sql-server-2008-r2

我是一名新的 ASP.NET 开发人员，我正在为我的公司开发一个基于 Web 的建议框程序，员工可以在其中提交他们有的任何安全建议。现在，我正在研究这个系统的管理部分。

管理员将能够使用所有者的用户名查看 GridView 控件中列出的所有建议。在 GridView 的最后一列中，将在此处列出状态。当管理员单击其中一个建议的状态时，将出现一个新的弹出窗口 (asp.net ajax ModalPopUpExtender)，其中列出所有可能的状态，例如：已执行、已批准...等。当管理员选择其中一种状态，建议的状态将在数据库中更新。一切正常。我现在要做的是，当用户更新任何建议的状态时，将向所有者发送一封关于他的建议状态更新的电子邮件通知。**我已经编写了 Mail 功能，但我不知道如何获取所选建议的用户名，表明其状态已更新。谁能帮我解决这个问题？**

我真的很难获得更新建议的用户名。

仅供参考，我有以下数据库设计：

```
Employee Table: Username, Name...
SafetySuggestionsLog: ID, Title, Description, Username, StatusID
SafetySuggestionsStatus: ID, Status 
```

**ASP.NET 代码：**

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server">
            <ContentTemplate>
        <asp:GridView ID="GridView1" runat="server" AllowPaging="True" 
                        AllowSorting="True" AutoGenerateColumns="False" DataKeyNames="ID" 
                        width="900px" CssClass="mGrid" 
                        DataSourceID="SqlDataSource1" 
                        OnRowDataBound="GridView1_RowDataBound">
            <AlternatingRowStyle BackColor="White" ForeColor="#284775" CssClass="alt" />
            <HeaderStyle Font-Bold = "True" ForeColor="Black" Height="20px"/> 
            <Columns>
                <asp:BoundField DataField="ID" HeaderText="ID" InsertVisible="False" 
                    ReadOnly="True" SortExpression="ID" />
                <asp:BoundField DataField="Title" HeaderText="Title" SortExpression="Title" />
                <asp:BoundField DataField="Description" HeaderText="Description" 
                    SortExpression="Description" />
                <asp:BoundField DataField="Name" HeaderText="Name" SortExpression="Name" />
                <asp:BoundField DataField="Username" HeaderText="Username" 
                    SortExpression="Username" />
                <asp:BoundField DataField="DivisionShortcut" HeaderText="DivisionShortcut" 
                    SortExpression="DivisionShortcut" />
                <asp:BoundField DataField="Type" HeaderText="Type" SortExpression="Type" />

                <%-- This to make status be opened and edited through the Ajax ModalPopUp Window --%>
                <asp:TemplateField HeaderText="Status">
                    <ItemTemplate>
                        <asp:LinkButton runat="server" ID="lnkSuggestionStatus" Text='<%#Eval("Status")%>'
                                        OnClick="lnkSuggestionStatus_Click">
                        </asp:LinkButton>
                    </ItemTemplate>
                </asp:TemplateField>

                <%--<asp:HyperLinkField HeaderText="Status" 
                    SortExpression="Status" />--%>
            </Columns>
            <RowStyle HorizontalAlign="Center" />
        </asp:GridView>

        <asp:Button runat="server" ID="btnModalPopUp" style="display:none" />

        <AjaxToolkit:ModalPopUpExtender ID="modalPopUpExtender1"
                                        runat="server" 
                                        TargetControlID="btnModalPopUp" 
                                        PopupControlID="pnlPopUp" 
                                        BackgroundCssClass="popUpStyle"
                                        PopupDragHandleControlID="panelDragHandle" 
                                        OkControlID="OKButton">
        </AjaxToolkit:ModalPopUpExtender>

        <asp:Panel runat="server" ID="pnlPopUp">

                    <asp:RadioButtonList ID="StatusList" runat="server" RepeatColumns="1" RepeatDirection="Vertical"
                                            RepeatLayout="Table" TextAlign="Left" DataSourceID="SuggestionStatusDataSource"
                                            DataTextField="Status" DataValueField="ID">
                        <asp:ListItem id="option1" runat="server" Value="ACTIONED" />
                        <asp:ListItem id="option2" runat="server" Value="APPROVED" />
                        <asp:ListItem id="option3" runat="server" Value="PENDING" />
                        <asp:ListItem id="option4" runat="server" Value="TRANSFERRED" />
                    </asp:RadioButtonList>
                    <asp:SqlDataSource ID="SuggestionStatusDataSource" runat="server"
                                        ConnectionString="<%$ ConnectionStrings:testConnectionString %>"
                                        SelectCommand="SELECT * FROM [SafetySuggestionsStatus]"></asp:SqlDataSource>

                    <asp:Button ID="confirmButton" runat="server" Text="Confirm" 
                                OnClientClick="javascript:return confirm('Are you sure you want to send an email notification about the safety suggestion to the owner?')" 
                                OnClick="btnSendStatus_Click" />

            <asp:Button ID="OKButton" runat="server" Text="Close" />
        </asp:Panel>
        </ContentTemplate>
        </asp:UpdatePanel> 
```

**代码隐藏：**

```
protected void lnkSuggestionStatus_Click(object sender, EventArgs e)
    {
        LinkButton lnkSuggestionStatus = sender as LinkButton;

        //var safetySuggestionsId = 

        //get reference to the row selected 
        GridViewRow gvrow = (GridViewRow)lnkSuggestionStatus.NamingContainer;

        //set the selected index to the selected row so that the selected row will be highlighted
        GridView1.SelectedIndex = gvrow.RowIndex;

        //This HiddenField used to store the value of the ID
        HiddenField1.Value = GridView1.DataKeys[gvrow.RowIndex].Value.ToString();

        //show the modalPopUp
        modalPopUpExtender1.Show();
    }

    public void btnSendStatus_Click(object sender, EventArgs e) {

        var statusID = StatusList.SelectedValue;

        string connString = "Data Source=localhost\\sqlexpress;Initial Catalog=psspdbTest;Integrated Security=True";
        //For updating the status of the safety suggestion
        string updateCommand = "UPDATE SafetySuggestionsLog SET StatusID= @statusID where ID=@SafetySuggestionsID";
        using (SqlConnection conn = new SqlConnection(connString))
        {
            conn.Open();
            using (SqlCommand cmd = new SqlCommand(updateCommand, conn))
            {
                cmd.Parameters.AddWithValue("@statusID", Convert.ToInt32(statusID));
                cmd.Parameters.AddWithValue("@SafetySuggestionsID", Convert.ToInt32(HiddenField1.Value));
                cmd.ExecuteNonQuery();
            }
            //reset the value of hiddenfield
            HiddenField1.Value = "-1";
        }

        GridView1.DataBind();

        SendSuggestionStatusToUser(statusID);
    }

    protected void SendStatusByEmail(string toAddresses, string fromAddress, string MailSubject, string MessageBody, bool isBodyHtml)
    {
        SmtpClient sc = new SmtpClient("MAIL.Aramco.com");
        try
        {
            MailMessage msg = new MailMessage();
            msg.From = new MailAddress("pssp@aramco.com", "PMOD Safety Services Portal (PSSP)");

            // In case the mail system doesn't like no to recipients. This could be removed
            //msg.To.Add("pssp@aramco.com");

            msg.Bcc.Add(toAddresses);
            msg.Subject = MailSubject;
            msg.Body = MessageBody;
            msg.IsBodyHtml = isBodyHtml;
            sc.Send(msg);
        }
        catch (Exception ex)
        {
            throw ex;
        }

    }

    protected void SendSuggestionStatusToUser(string status)
    {
        string connString = "Data Source=localhost\\sqlexpress;Initial Catalog=psspdbTest;Integrated Security=True";

        using (SqlConnection conn = new SqlConnection(connString))
        {
            var sbEmailAddresses = new System.Text.StringBuilder(2000);
            string statusID = status;

            // Open DB connection.
            conn.Open();

            string cmdText2 = "SELECT Username FROM dbo.SafetySuggestionsLog";
            using (SqlCommand cmd = new SqlCommand(cmdText2, conn))
            {
                SqlDataReader reader = cmd.ExecuteReader();
                if (reader != null)
                {
                    while (reader.Read())
                    {
                        var sName = reader.GetString(0);
                        if (!string.IsNullOrEmpty(sName))
                        {
                            if (sbEmailAddresses.Length != 0)
                            {
                                sbEmailAddresses.Append(",");
                            }
                            // Just use the ordinal position for the user name since there is only 1 column
                            sbEmailAddresses.Append(sName).Append("@aramco.com");
                        }
                    }
                }
                reader.Close();
            }

            string cmdText3 = "UPDATE dbo.SafetySuggestionsStatus SET ID ..........";
            using (SqlCommand cmd = new SqlCommand(cmdText3, conn))
            {
                // Add the parameter to the command
                var oParameter = cmd.Parameters.Add("statusID", SqlDbType.Int);

                var sEMailAddresses = sbEmailAddresses.ToString();
                string description = "SELECT Description FROM dbo.SafetySuggestionsLog";
                string body = @"Good day, <br /><br />
                                <b> We just would like to notify you that your following safety suggestion: </b>"
                                    + description +
                                    @"<br /><br />
                            has been.
                            <br /> <br /><br /> <br />
                            This email was generated using the <a href='http://pmv/pssp/Default.aspx'>PMOD Safety Services Portal (PSSP) </a>. 
                            Please do not reply to this email.
                            ";

                int sendCount = 0;
                List<string> addressList = new List<string>(sEMailAddresses.Split(','));
                StringBuilder addressesToSend = new StringBuilder();

                if (!string.IsNullOrEmpty(statusID))
                {
                     SendStatusByEmail(addressesToSend.ToString(), "", "Notification of Your Safety Suggestion", body, true);
                     addressesToSend.Clear();
                }

            }
            conn.Close();
        }
    } 
```

注意：我知道我不应该在这里发布冗长的代码，而是因为我想向您解释我的工作并获得您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T10:34:39.037

从表 SafetySuggestionsLog 通过用户名获取用户

```
string sqlGetLog = string.format("select * from SafetySuggestionsLog where SafetySuggestionsID= {0}", Convert.ToInt32(HiddenField1.Value)); 
```

然后在您获得 SafetySuggestionsLog 项目/记录后，您获取用户名并使用它来获取用户对象

```
string userName = SafetySuggestionsLog.UserName; (just get the name from your returned record)

    string sqlGetUser = string.format("select * from Employee where UserName= '{0}'", userName); 
```

# svn - 如何在 windows bat 文件中使用 svn copy / svn rename 命令

> ID：11327258
> 
> 赞同：-2
> 
> 时间：2012-07-04T10:28:14.770
> 
> 标签：svn, batch-file, tortoisesvn, dos

`svn update`我们在 windows bat 文件中使用以下命令：

```
"%SVN%\TortoiseProc.exe" /command:update /path:"%SOURCE%" /closeonend:2 
```

我们如何使用`svn copy`和`svn rename`命令？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T10:38:39.910

正如您在[TortoiseSVN 文档](http://tortoisesvn.net/docs/nightly/TortoiseSVN_en/tsvn-automation.html)中看到的，您可以使用`/command:copy`Tortoise 但它会弹出分支/标签对话框。

与 相同`/command:rename`，通过对话框询问文件的新名称。

但是您可以使用 SVN 命令行客户端执行相同的操作：

```
svn copy "https://pathToRepo/trunk" "https://pathToRepo/myBranch" 
```

和

```
svn rename "https://pathToRepo/oldName.file" "https://pathToRepo/newName.file" 
```

这两个命令都适用于工作副本路径或 URL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T19:41:31.147

要使用 SVN CLI 命令，您*应该*使用 SVN，而不是 TortoiseSVN，后者只是一个前端。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T10:34:32.967

看看[文档](http://tortoisesvn.net/docs/nightly/TortoiseSVN_en/tsvn-automation.html)。它列出了您可以使用的命令及其参数。

但是，您不能以非交互方式使用`copy`和。`rename`为了使 Subversion 存储库中的事情自动化，您应该使用命令行 Subversion 客户端。

# unit-testing - 在单元测试的属性中传递对象

> ID：11327259
> 
> 赞同：0
> 
> 时间：2012-07-04T10:28:17.183
> 
> 标签：unit-testing, c#-4.0, mbunit

我怎么能在我的单元测试中传递一个对象？这是我的代码：

```
 [Test]          
    [Row( "test",5,new CustomField())]      
    public void Test_Constructor(string type, int number, CustomField customField)
    {
       .....
    } 
```

它返回错误：属性参数必须是属性参数类型的常量表达式、typeof 表达式或数组创建表达式

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T16:43:07.910

您可以使用工厂：

[http://gallio.org/wiki/doku.php?id=mbunit:da​​ta-driven_testing:factory](http://gallio.org/wiki/doku.php?id=mbunit:data-driven_testing:factory)

# c# - 在 Java 服务和 C# 客户端之间为 PubSub 选择哪种技术

> ID：11327261
> 
> 赞同：1
> 
> 时间：2012-07-04T10:28:25.763
> 
> 标签：c#, java, comet, publish-subscribe, cometd.net

您会为 Java 服务和 C# 桌面客户端之间的 PubSub 建议哪种技术。你觉得 CometD 怎么样？有什么不错的 .net API 吗？服务器和客户端将在同一个组织内运行，因此可以使用不同的协议 CometD 是一个正确的选择，还是使用 TCP 而不是 HTTP 会更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T15:58:17.393

由于您的应用程序在同一组织内运行，因此您可能能够使用比 HTTP 甚至 TCP 更有效的传输，具体取决于您的情况和要求。

数据分发服务 (DDS) 是 OMG 基于 Pub/Sub 的标准。标准化的语言绑定是 C、C++、Java 和 Ada，但也可以使用 C# 和其他语言。您的系统中可以混合使用不同的语言和操作系统。要分发的结构化数据类型以与语言无关的格式（按照标准是 OMG IDL 的子集）指定，然后将其转换为特定于语言的接口和数据类型以供您的应用程序使用。

它可以使用不同的传输层，例如 UDP 或 TCP。虽然我无法从您的简要描述中确定 DDS 是否是您的最佳选择，但我认为值得研究。有关非常简短的介绍和参考列表，请参阅[此 Wikipedia 条目](http://en.wikipedia.org/wiki/Data_distribution_service)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-13T17:49:38.883

您可能想查看一些消息传递协议，例如[AMQP](http://amqp.org/)和[STOMP](http://stomp.github.io/)。在 Java 和 .NET 中对这两种协议都有很好的支持，您可以选择消息代理，例如 RabbitMQ 或 ActiveMQ 等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T21:47:10.377

警告：我只用过 cometd（没有气氛甚至没有 java 的解决方案）

我喜欢 cometd，因为它上手速度非常快，而且文档也很好。javascript API也可以正常工作。

然后bayeux规范也可以在c#上实现：[https ://github.com/Oyatel/CometD.NET](https://github.com/Oyatel/CometD.NET)

[http://bugs.cometd.org/browse/COMETD-23](http://bugs.cometd.org/browse/COMETD-23)

# python - 在 django querystet 中使用 extra 结合 django 查找（不是额外的常量参数）

> ID：11327263
> 
> 赞同：1
> 
> 时间：2012-07-04T10:28:38.463
> 
> 标签：python, django, django-queryset

我想在 django 查询集中调用一个 postgresql 函数，该函数的参数与当前行相关。

假设我有以下查询集：

```
queryset = Baz.objects.filter(foo = 'foo', foo__bar = 'bar'). 
```

我想添加一个额外的参数来调用一个函数，这个函数的参数应该是 django 查找`foo_baz`解析到的名称。

在理想世界中，我想写：

```
queryset.extra(were = "my_function(foo__baz)") 
```

这将呈现为：

```
my_function("FOO_TABLE".baz) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T11:04:25.847

[您通常使用F() 对象](https://docs.djangoproject.com/en/dev/topics/db/queries/#filters-can-reference-fields-on-the-model)引用这样的列，但我不确定您是否可以`extra()`在这种情况下使用它们。希望这是您尝试的起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T19:09:43.087

以下是 django 开发人员对此问题的回应：

> `extra`往往造成的问题多于解决的问题。当前的趋势是弃用它而不是扩展它。
> 
> 实现目标的推荐方法是使用原始 SQL。

# boost - 使用 C++ 预处理器在 Fortran 中编译时定义的存储顺序

> ID：11327264
> 
> 赞同：0
> 
> 时间：2012-07-04T10:28:41.043
> 
> 标签：boost, fortran, c-preprocessor

我想在 Fortran 90 中获得一个灵活的（编译时间定义的）存储顺序。为此，我尝试使用 C++ 预处理器，包括一些 boost pp 头文件。

因此，例如，不要像这样访问 3D 数组：

```
myArray(k,i,j) 
```

我想要这个：

```
myArray(POINT3D(i,j,k)) 
```

并在编译时确定访问顺序。

现在我尝试过：

```
#include "boost_pp_cat.hpp"
#include "boost_pp_comma.hpp"

! ------ Define storage orders here --------- !
!Forward lookup {i,j,k} <- {1,2,3}
#define KIJ_ORDER_ARG1 k
#define KIJ_ORDER_ARG2 i
#define KIJ_ORDER_ARG3 j

! ------ Switch between storage orders ------ !
#define CURR_ORDER KIJ_ORDER

! ------ Generate all required macros ------- !
#define STOR_ORDER_ARG(storOrder, argNum) BOOST_PP_CAT(BOOST_PP_CAT(storOrder, _ARG), argNum)

#define CHOOSE_PARAM(storOrder, argNum) BOOST_PP_CAT(STOR_ORDER_ARG(storOrder, argNum), Param)

#define POINT3D(iParam, jParam, kParam) POINT3D_WITH_STORORDER(CURR_ORDER, iParam, jParam, kParam)

#define POINT3D_WITH_STORORDER(storOrder, iParam, jParam, kParam)     POINT3D_WITH_STORORDER_PRE(storOrder) 
#define POINT3D_WITH_STORORDER_PRE(storOrder) CHOOSE_PARAM(storOrder, 1), CHOOSE_PARAM(storOrder, 2), CHOOSE_PARAM(storOrder, 3) 
```

这将扩大

```
myArray(POINT3D(i,j,k)) 
```

到

```
myArray(kParam, iParam, jParam) 
```

.

差不多好了！现在我的问题：

1.  是否可以使用 C 预处理器做我想做的事？
2.  如果不是 - 你会使用什么技术？（我正在考虑制作我自己的专用“预处理器”python 脚本，但您还有其他建议吗？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T12:35:54.660

1：我不知道，但我个人无论如何都不会依赖预处理器来进行这种操作。

2：我会按照这些思路编写一个 Fortran 定义的类型

```
 type odd_storage_order_real_array
        integer, dimension(3) :: permutation
        real, dimension(:,:,:), allocatable :: elements
      contains
        procedure :: get_element_at
    end type odd_storage_order_real_array 
```

然后，您可以编写语句，例如

```
type(odd_storage_order_real_array) :: an_array
.
.
.
an_array%get_element_at(1,2,3) 
```

获取指定位置的元素。您会注意到我没有`get_element_at`为您编写该函数，但您的问题向我表明您自己编写它不会有任何问题。当然，它会根据需要使用`permutation`组件重新排序索引。您可能需要一个相应的`set_element_at`函数，以及用于在内置数组之间进行“类型转换”的函数。

如果您想为任何等级的数组提供单一类型，请将它们展平，如下所示：

```
type odd_storage_order_real_array
    integer, dimension(:), allocatable :: permutation
    real, dimension(:), allocatable :: elements
  contains
    procedure :: element_at
end type odd_storage_order_real_array 
```

**编辑**

回应OP的评论。我仍然不会使用预处理器。

我认为在这种情况下我要做的是编写一个函数来将数组从其“自然”顺序转置（推广到尽可能多的维度）到所需的顺序，并编写该函数的逆。在初始化时应用函数，在完成时应用反函数；执行成本不应该很大。我不知道这是否适合您的应用程序模式。

我真正要做的是尝试一些变化，看看哪一个给我最好的性能比：可编程性；换句话说，我将在搜索速度时制作 HPC 代码的不可读性（和不可维护性等）是有限度的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T12:37:07.193

如果有人读到这个：我选择了下面的解决方案。没有那么优雅、可扩展或可重用，但它完成了工作，让我可以使用没有扩展的“标准”fortran 预处理器（当您必须调试代码时，这是一个很大的优势，因为可以显示原始文件的行号）。

```
! ------ Define storage orders here --------- !
#define IJK_ORDER 1
#define KIJ_ORDER 2
#define IKJ_ORDER 3
! ------ Switch between storage orders ------ !
#ifdef GPU
  #define CURR_ORDER IJK_ORDER
#else
  #define CURR_ORDER KIJ_ORDER
#endif

! ------ Order dependent macros ------------- !
#if (CURR_ORDER == KIJ_ORDER)
  #define AT(iParam, jParam, kParam) kParam, iParam, jParam
#elif (CURR_ORDER == IKJ_ORDER)
  #define AT(iParam, jParam, kParam) iParam, kParam, jParam
#else
  #define AT(iParam, jParam, kParam) iParam, jParam, kParam
#endif

! ------ general macros --------------------- !
!note: this is just a rename. Same syntax can be used for domain definition and array access
!-> give it two seperate names to make the intention of the code clearer
#define DOM(iParam, jParam, kParam) AT(iParam, jParam, kParam) 
```

# facebook - 我的 Facebook 按钮共享有误

> ID：11327266
> 
> 赞同：1
> 
> 时间：2012-07-04T10:28:57.527
> 
> 标签：facebook, share

我有链接[http://muabannhadaklak.com/group/profile/group/9.html](http://muabannhadaklak.com/group/profile/group/9.html)，这个链接在我的网站上运行良好，但是当我在 facebook 上分享这个链接时，facebook 返回错误

`Database Error http://muabannhadaklak.com/group/profile... Message: Cannot modify header information - headers already sent by (output started at /home/muabannh/public_html/group/system/core/Exceptions.php:185)`

我不知道为什么，也不知道如何解决这个错误。我的框架 CodeIgniter

# iphone - 无法在 ipad 中添加子视图

> ID：11327268
> 
> 赞同：0
> 
> 时间：2012-07-04T10:29:14.847
> 
> 标签：iphone, ios, ipad, uiview, uiviewcontroller

我有一个 homeview 控制器，我要在其中添加一个子视图。该子视图是 uiview 的子类。但 homeview 控制器不显示子视图。

这是我的代码。

```
#import "HomeViewController.h"
@interface HomeViewController : UIViewController {

DetailView *viewDetailFinal;
}
@property (nonatomic, retain) DetailView *viewDetailFinal;

@implementation HomeViewController

@synthesize viewDetailFinal;
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {
    // Custom initialization
    viewDetailFinal = [[DetailView alloc] initWithFrame:CGRectMake(0, 0, 588, 899)];
}
return self;
}

- (void)viewDidLoad
{
   [self.view addSubview:viewDetailFinal];
}

#import "DetailView.h"

@interface DetailView : UIView{

}

-(void) loadView:(NSString *)str;

@implementation DetailView

- (id)initWithFrame:(CGRect)frame
{
   self = [super initWithFrame:frame];
   if (self) {
    // Initialization code

    [self loadView:@"my test text"];
   }
   return self;
}

-(void) loadView:(NSString *)str {
    UILabel *lbl = [[UILabel alloc] initWithFrame:CGRectMake(10, 10, 150, 25)];
    [lbl setFont:[UIFont boldSystemFontOfSize:12.0]];
    [lbl setTextColor:[UIColor blackColor]];
    [lbl setTextAlignment:UITextAlignmentCenter];
    [lbl setBackgroundColor:[UIColor blueColor]];
    [lbl setText:str];
} 
```

任何人都可以建议我错在哪里？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T10:39:45.747

在您实施该`-(void) loadView:(NSString *)str`方法时，您不会将标签添加到视图中：

```
-(void) loadView:(NSString *)str {
    UILabel *lbl = [[UILabel alloc] initWithFrame:CGRectMake(10, 10, 150, 25)];
    [lbl setFont:[UIFont boldSystemFontOfSize:12.0]];
    [lbl setTextColor:[UIColor blackColor]];
    [lbl setTextAlignment:UITextAlignmentCenter];
    [lbl setBackgroundColor:[UIColor blueColor]];
    [lbl setText:str];

    [self addSubView:lbl];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T11:21:40.103

首先将标签添加到您的视图中，如下所示....

```
-(void) loadView:(NSString *)str {
UILabel *lbl = [[UILabel alloc] initWithFrame:CGRectMake(10, 10, 150, 25)];
[lbl setFont:[UIFont boldSystemFontOfSize:12.0]];
[lbl setTextColor:[UIColor blackColor]];
[lbl setTextAlignment:UITextAlignmentCenter];
[lbl setBackgroundColor:[UIColor blueColor]];
[lbl setText:str];

[self addSubView:lbl];
} 
```

然后在你看来你的控制器类的加载方法......

```
- (void)viewDidLoad
{
    viewDetailFinal  = [[DetailView  alloc] initWithFrame:CGRectMake(0.0,0.0,320.0,460.0)];
    viewDetailFinal.backgroundColor = [UIColor redColor]; //Just for your verification
    [self.view addSubview:viewDetailFinal];
} 
```

这可能会帮助你

# php - jQuery .on('click') 即使在动态加载的页面上

> ID：11327270
> 
> 赞同：0
> 
> 时间：2012-07-04T10:29:18.477
> 
> 标签：php, jquery

我的网页上有一个故事上传系统，该系统将故事上传到指定文件夹中，并从中列出其内容到网页。我拆分了文本，所以只显示了 300 个字符，当用户点击它时，其余的就会显示出来。

这一个列出它：

```
<?php foreach($dataArray as $data) { ?>
    <div class="visible">
        <?php echo $data[0] . "<br/><center><a href='#' class='story_show'>Teljes Történet</a></center>";  ?>
    </div>
    <div class="hidden">
        <?php echo $data[1]; ?>
    </div>
<?php } ?> 
```

这是我的 jQuery：

```
$('.hidden').css('display', 'none');
$('.visible').click(function () {

    $('.hidden').css('display', 'inline');
}); 
```

该页面（`tortenetek.php`）通过 Ajax 加载到主页面（`blog.php`）。我像这样包含jQuery `blog.php`：

```
<link href='http://fonts.googleapis.com/css?family=Niconne&subset=latin,latin-ext' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" type="text/css" href="../css/stilus.css"/>
        <script type="text/javascript" src="../js/jquery-1.7.2.min.js"></script>
        <script type="text/javascript" src="../js/tinybox.js"></script>
        <script type="text/javascript" src="../js/ajax.js"></script>
        <link href="../css/lightbox.css" rel="stylesheet" />
        <script src="../js/lightbox.js"></script>
                <script src="../js/story.js"></script> 
```

`Story.js`是我正在使用的脚本文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T10:33:56.100

如果我正确理解了您的问题，那么您需要利用事件委托，通过将`.click()`调用更改为`.on()`调用，并传递与始终在 DOM 中的祖先元素匹配的选择器：

```
$('#someAncestor').on('click', '.visible', function(){
    $(this).next('.hidden').css('display', 'inline');
}); 
```

`this`请注意使用和的事件处理函数的变化`.next()`。当您单击*任何*元素时，您当前拥有的方式将显示*所有* 元素。`.hidden` *`.visible`*

 *`#someAncestor`必须是代码执行时存在于 DOM 中的元素。这是有效的，因为大多数 DOM 事件从它们起源的元素（目标）通过树冒泡。您可以在任何祖先元素中捕获该事件。*

# jquery - $(document).ready() 似乎无法与用户控件一起正常工作

> ID：11327271
> 
> 赞同：0
> 
> 时间：2012-07-04T10:29:18.717
> 
> 标签：jquery, asp.net, jcrop

我做了一个用户控件，并在 $(document).ready() 方法中放置了一些代码，但是当我放置断点时，通过 boxWidth 值并逐步执行，我可以明显看到 html 尚未加载，这就是为什么我得到未定义的值。我需要先加载 html，以便我可以获取 img 元素的宽度和高度来计算纵横比等。

屏幕截图如下：

![在此处输入图像描述](../Images/5f4d3f69b7935640f792facaae4381a8.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T10:32:17.077

您根本没有在任何地方声明这些变量。尝试这个：

```
var elem = $("#Body_Body_ucImageUploadAndCrop_CropImage"),
    boxWidth = elem.width(),
    boxHeight = elem.height();

elem.Jcrop({
    onSelect: storeCoords,
    boxWidth: boxWidth,
    boxHeight: boxHeight,
    aspectRatio: boxWidth / boxHeight
}); 
```

现在您的代码运行无错误，您可能只想在加载后访问图像：

```
$(window).on( "load", function() {
    //Code to run after window has loaded
}); 
```

应该这样做。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-04T10:33:56.183

您将寻找资源加载事件

```
$.load("image_id", function(){ ... }); 
```

# javascript - JavaScript 图像缩放和平移（拖动）

> ID：11327274
> 
> 赞同：2
> 
> 时间：2012-07-04T10:29:31.773
> 
> 标签：javascript, jquery, jquery-ui

关于缩放大图像和平移的任何建议？理想情况下内联在页面上。

我一直在使用 PanoJS（又名 GSV2），但现在更多人使用 iPhone/iPad/Android 类型的设备，这个库要么太慢，要么旧版本不支持拖动（我现在正在使用的那个） ）。

[http://code.google.com/p/panojs/](http://code.google.com/p/panojs/)

[http://www.dimin.net/software/panojs/](http://www.dimin.net/software/panojs/)

我目前的想法是，对于这些小处理器来说，使用平铺图像方法太多了（在最大缩放时试图从 3000 x 3000 像素的原始图像中拖动 144 个单独的图像，其中每个平铺图像为 250x250 像素）。

所以可能更多地关注以设定的宽度/高度加载原始图像......并且要么编写我自己的 JS 来缩放/拖动，要么使用另一个库（我目前似乎找不到）.. . 然后是使用 jQuery（使用 jQuery UI 支持可拖动），或者只是自己编写原始 JS 以减少代码量的问题。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-29T12:17:27.807

更重要的是回答我自己的问题，因为标准库似乎不能像我需要的那样工作，我最终创建了自己的解决方案：

[https://github.com/craigfrancis/zoomify](https://github.com/craigfrancis/zoomify)

目的是您可以复制此代码，然后根据您自己的特定要求对其进行自定义......所以理想情况下，您应该能够阅读/理解代码，而不是仅仅将其放入您的项目中并希望获得最好的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T21:28:28.660

我建议为屏幕宽度的移动设备制作一个视口。

将视口之外的所有图像设置为显示多个图块：无。然后当用户平移时，只需更新显示属性。

这样浏览器将主要计算一个大元素与几张图像一起移动，然后计算一些图像的开启和关闭状态。

与重新计算图形繁重的 div 元素相比，图形密集度要低得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-16T13:06:13.943

在环顾四周后，我决定使用[OpenSeadragon](https://openseadragon.github.io/)（[新 BSD](https://openseadragon.github.io/license/)许可证），这是一个基于 Web 的开源查看器，用于高分辨率可缩放图像（桌面和移动）。[我需要它用于具有多图像](https://openseadragon.github.io/examples/multi-image/)支持和[过滤](https://github.com/usnistgov/OpenSeadragonFiltering)功能的图像金字塔源（通过众多插件之一）

另一个强有力的竞争者是[OpenLayers](https://openlayers.org/) ( [2-Clause BSD](https://tldrlegal.com/license/bsd-2-clause-license-(freebsd)) )。[这是一个带有静态图像](https://openlayers.org/en/latest/examples/static-image.html)的简单示例，这是示例的[完整列表](https://openlayers.org/en/latest/examples/)。

# matlab - 仅在使用 portopt 和 ewstats 的循环期间令人费解的“下标分配维度不匹配”

> ID：11327275
> 
> 赞同：0
> 
> 时间：2012-07-04T10:29:34.470
> 
> 标签：matlab

我正在把头发扯下来。

我有一组 4 种资产的每日回报，使用 10 天的窗口循环遍历整个数据集（从`i`= 1 到 50），执行大量计算并构建最佳投资组合。这涉及使用`portopt`.

```
[PortRisk(:,i), PortReturn(:,i), PortWts(:,:,i)] = portopt(ExpReturn(i,:), ExpCovariance(:,:,i), [], [], ConSet); 
```

输入，`ExpReturn`并`ExpCovariance`使用生成`ewstats`

```
[ExpReturn(i,:), ExpCovariance(:,:,i)] = ewstats(RetSeries, 0.94) 
```

现在，在最后的第 50 次迭代中（并且只有第 50 次 - 所有之前的工作都很好），我收到以下错误：

```
??? Subscripted assignment dimension mismatch. Error in ==> Script at 10
[PortRisk(:,i), PortReturn(:,i), PortWts(:,:,i)] = portopt(ExpReturn(i,:), ExpCovariance(:,:,i), [], [], ConSet); 
```

请注意，我认为`RetSeries`as`ExpReturn`和`ExpCovariance`generate by `ewstats`are size`<50x4>`和`<4x4x50>`分别没有问题。

我已经尝试了我能想到的所有方法来查找错误，包括检查`size()`、使用断点、预分配矩阵等。奇怪的是，如果我删除循环，设置`i = 50`它就可以了。此外，如果不是`ewstats`我简单地使用`mean()`and `cov()`- 它们在第 50 次迭代中工作。`ExpReturn`例如，如果我用 a 替换一个`mean(RetSeries)`，它就可以工作。同样，用`ExpCovariance`-代替也`cov(RetSeries)`可以。但是两者`ExpReturn`并`ExpCovariance`在一起总是失败。

是什么导致了错误？

编辑：

使用`dbstop if error`，我可以看到：

```
PortRisk <10x50>
PortReturn <10x50>
PortWts<10x4x49>
ExpReturn <50x4>
ExpCovariance<4x4x50> 
```

所以问题是`PortWts`，但我不明白为什么现在它在其他 49 次迭代中不是正确的尺寸。此外，有问题的错误行是`PortWts`提到循环中的第一个点，所以事先没有弄乱它

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T10:41:38.713

尝试设置`dbstop if error`，然后再次运行您的代码。MATLAB 将在发生错误的确切位置进入调试模式。

这是Doug Hull的[截屏视频，展示了如何](http://blogs.mathworks.com/videos/2008/04/28/matlab-basics-using-dbstop-if-error/)

* * *

### 编辑

将违规行更改为：

```
[a,b,c] = portopt(ExpReturn(i,:), ExpCovariance(:,:,i), [], [], ConSet); 
```

然后分别分配：

```
PortRisk(:,i)  a;
PortReturn(:,i) = b;
PortWts(:,:,i) = c; 
```

现在，当它失败时，它将准确地向您显示哪个输出没有达到预期的大小。结合上面的技巧，您现在可以在出错时检查工作区中的变量，并找出问题所在。

* * *

### 编辑2

此外，在两者之间添加以下测试（分配之前）：

```
if isempty(a) || isempty(b) || isempty(c)
    keyboard          %# enter debug mode. Or issue an error
end 
```

# c# - 合同前置条件导致的IEnumerable多重枚举

> ID：11327276
> 
> 赞同：12
> 
> 时间：2012-07-04T10:29:42.257
> 
> 标签：c#, .net, ienumerable, validation, code-contracts

我有一个`IEnumerable`必须为非空的参数。如果有像下面这样的先决条件，那么将在此期间枚举集合。但是下次我引用它时会再次枚举，从而在 Resharper 中导致“IEnumerable 的可能多次枚举”警告。

```
void ProcessOrders(IEnumerable<int> orderIds)
{
    Contract.Requires((orderIds != null) && orderIds.Any());  // enumerates the collection

    // BAD: collection enumerated again
    foreach (var i in orderIds) { /* ... */ }
} 
```

这些变通办法让 Resharper 很高兴，但无法编译：

```
// enumerating before the precondition causes error "Malformed contract. Found Requires 
orderIds = orderIds.ToList();
Contract.Requires((orderIds != null) && orderIds.Any());
---
// enumerating during the precondition causes the same error
Contract.Requires((orderIds != null) && (orderIds = orderIds.ToList()).Any()); 
```

还有其他有效的解决方法，但可能并不总是理想的，例如使用 ICollection 或 IList，或执行典型的 if-null-throw-exception。

有没有像原始示例中那样与代码合同和 IEnumerables 一起使用的解决方案？如果没有，那么有人开发了一个很好的模式来解决它吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-04T10:35:35.880

使用设计用于处理`IEnumerable`s 的方法之一，例如[`Contract.Exists`](http://msdn.microsoft.com/en-us/library/dd412869)：

> 确定元素集合中的元素是否存在于函数中。
> 
> **退货**
> 
> 当且仅当谓词对集合中任何类型 T 的元素返回 true 时才为 true。

所以你的谓词可能只是 return `true`。

* * *

```
Contract.Requires(orderIds != null);
Contract.Requires(Contract.Exists(orderIds,a=>true)); 
```

# ios - iOS 设备应用分发证书

> ID：11327277
> 
> 赞同：0
> 
> 时间：2012-07-04T10:29:45.393
> 
> 标签：ios, provisioning

我正在尝试上传应用程序的二进制文件，以便我可以在应用程序购买中进行测试。我可以在预期的 iO​​S 设备上运行应用程序，这意味着开发配置文件工作正常。但是当我尝试存档文件时，我收到了如图所示的错误。由于我无法导入与错误中显示的配置文件关联的私钥，因此我想使用 keyChain 生成我自己的证书。所以我创建了证书，但我找不到向经销商发送邀请或上传证书的选项。我的个人资料状态是管理员。我该怎么办。

![分发文件中的错误](../Images/c086cfef357695cbb223ec77925fab56.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T10:58:15.313

您应该撤销您帐户中的分发证书。以便它再次询问`.cer`您帐户中的密钥文件。您可以`.cer`在钥匙串中创建文件`Request a Certificate from a Certificate Authority`并提供您的详细信息，如您的邮件 ID 等，以便它创建`.cer`文件，在 developer.apple.com 中，您可以在`cer`撤销分发证书后上传文件，以便它生成可以安装在您的系统中的证书。 ![在此处输入图像描述](../Images/e50d8764afbab5c944b1b955d65a8421.png) ![在此处输入图像描述](../Images/d97710efc713492d0ddb57a3842a533b.png)

# ruby-on-rails - Rails AJAX - 获取下拉选择以填充表格

> ID：11327282
> 
> 赞同：2
> 
> 时间：2012-07-04T10:30:09.867
> 
> 标签：ruby-on-rails, ajax, drop-down-menu, html-table, populate

我正在尝试使用 AJAX 从下拉列表中进行选择以填充同一页面中的表格，以便在不刷新页面的情况下显示更改。我已经完成了远程调用的代码，并将自定义操作添加到控制器，但我不知道如何将返回的信息放入我拥有的表中。目前，该表只是循环遍历所有项目，但我希望它只显示所选项目的信息。

我需要在 JS（rjs？）文件中写入什么来让它处理返回的信息，以及我需要对现有表进行哪些更改以确保它显示正确的信息？

下拉列表（使用 AJAX 调用）：

```
<%= collection_select :id, Project.all, :id, :name, :onchange => remote_function(:url=>{:action => 'populate_projects'}) %> 
```

控制器动作：

```
 def populate_projects
    @project = Project.find(params[:id])
 end 
```

和现有的表：

```
<table>
  <tr>
    <th>Name</th>
    <th>Category</th>
    <th>Budget</th>
    <th>Deadline</th>
    <th>Company ID</th>
    <th></th>
    <th></th>
    <th></th>
  </tr>

<% @projects.each do |project| %>
  <tr>
    <td><%= project.name %></td>
    <td><%= project.category %></td>
    <td><%= number_to_currency(project.budget, :unit => "&pound;") %></td>
    <td><%= project.deadline.strftime("%A, %d %B %Y") %></td>
    <td><%= project.company_id %></td>
    <td><%= link_to 'More', project %></td>
    <td><%= link_to 'Edit', edit_project_path(project) %></td>
    <td><%= link_to 'Delete', project, confirm: 'Are you sure?', method: :delete %></td>
  </tr>
<% end %>
</table> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T11:48:12.120

假设您正在使用 jquery

```
<%= collection_select :project, :id, Project.all, :id, :name, {}, {:onchange => '$.get("/populate_projects")'} %> 
```

然后在你的控制器中

```
def populate_projects
  @project = Project.find(params[:id])
  respond_to do |format|
    ...
    format.js { render 'populate_projects', :formats => [:js] }
    ...
  end
end 
```

最后，创建`populate_projects.js.erb`并编写任何更改表内容脚本。`@project`在该脚本中可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T10:49:09.243

创建一个部分`_project.html.erb`并在索引页面中呈现此部分。 `<%= render @projects %>` 在更改项目时，只需使用项目对象渲染部分内容并使用 rjs 更新页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T10:51:38.920

在 js(RJS) 文件中，您需要调用部分 HTML 文件，并且该文件具有您在问题中显示的表格。

我希望这可以帮助你。

谢谢。

# r - 创建函数 - 在括号中插入引号或设置变量

> ID：11327283
> 
> 赞同：0
> 
> 时间：2012-07-04T10:30:12.207
> 
> 标签：r, function, quotes

我正在尝试创建一个函数来选择数据框中的变量列表。标准很简单，两个选定变量之间的所有变量。

到目前为止我的代码：

```
var_bw <- function(v1, v2, data) {
  data[ ,which(names(data)==v1):which(names(data)==v2)]
} 
```

但是，需要在它们周围`v1`加上`v2`引号。必须直截了当...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T10:46:59.320

使用`substitute`：

```
var_bw <- function(v1, v2, data) {
  index <- which(names(data)==substitute(v1)):which(names(data)==substitute(v2)) 
  data[, index]
} 
```

一些使用示例`iris`：

```
head(var_bw(Sepal.Length, Petal.Length, iris))
  Sepal.Length Sepal.Width Petal.Length
1          5.1         3.5          1.4
2          4.9         3.0          1.4
3          4.7         3.2          1.3
4          4.6         3.1          1.5
5          5.0         3.6          1.4
6          5.4         3.9          1.7 
```

和

```
head(var_bw(Petal.Length, Species, iris))
  Petal.Length Petal.Width Species
1          1.4         0.2  setosa
2          1.4         0.2  setosa
3          1.3         0.2  setosa
4          1.5         0.2  setosa
5          1.4         0.2  setosa
6          1.7         0.4  setosa 
```

# google-places-api - Google Places Api 在土耳其

> ID：11327287
> 
> 赞同：1
> 
> 时间：2012-07-04T10:30:34.623
> 
> 标签：google-places-api

我可以在土耳其使用 google places api 吗？

因为当我发送参数时，我的结果为零

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T10:36:25.203

如果您正在输入参数（并且它们不是动态发送的），请尝试另一个国家/地区。如果您仍然获得零结果，那么您做错了什么。

# javascript - 暂存环境中的 Javascript 失败（jQuery 滑块）

> ID：11327290
> 
> 赞同：0
> 
> 时间：2012-07-04T10:30:45.063
> 
> 标签：javascript, jquery, ruby-on-rails, ruby-on-rails-3

您好，对于我运行暂存环境的项目。

我一直在忙于使用 jQuery 滑块（easySlider 1.7），并且在我的开发环境中遇到了一些奇怪的行为（创建下一个按钮和数字的双 html 实例），一段时间后我发现我已经包含了 easySlider.js 2次。

所以现在这是固定的发展！但是在我将它推送到我的暂存环境之后，它仍然包含双实例吗？

我尝试了以下方法：
将 staging.rb 设置覆盖到开发中，看看这是否是问题所在。
清除我的浏览器缓存并清除服务器缓存。

关于如何将我的开发同步到正确登台的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T11:05:25.263

我怀疑您在更改后没有预编译资产，因此在您的`/public/assets`文件夹中仍然有旧文件。

进入您的服务器并运行`rake assets:precompile`以查看问题是否消失。

如果您使用 capistrano，请确保在您的`deploy.rb`:

```
 load 'deploy/assets' 
```

您甚至在暂存环境中使用资产预编译吗？（意思是asset.debug 是真的） .. 有一次我部署到一个环境中，默认情况下rails 没有将所有JavaScript 合并到application.js 中，而是像在开发中一样包含它们。由于 capistrano 仍然在服务器上执行 assets:precompile，我最终得到了一个 application.js 文件，其中包含所有 JS 文件和每个源文件。`public/assets`在那种情况下我只需要删除

# ios - OAuth2“社交登录”流程（允许通过 Facebook/Twitter 进行 OAuth2 身份验证）：是否有任何示例/文献？

> ID：11327293
> 
> 赞同：18
> 
> 时间：2012-07-04T10:30:51.460
> 
> 标签：ios, api, ios5, oauth-2.0, facebook-oauth

我正在为基于 Web 的自定义社交网络应用程序开发本机移动应用程序。我们正在构建一个 REST API 来与 Web 服务器进行通信，并且我们选择了 OAuth2 作为身份验证方法（`grant_type=password`流程）。

该网络应用程序允许用户使用外部服务（即 Facebook 和 Twitter）登录和注册。我们需要在移动应用程序上也允许这样做。问题是：我们怎样才能做到这一点？

Pinterest 移动应用程序能够管理这种情况（见附图）。这里使用的流程是什么？

![Pinterest 登录视图](../Images/5918a7e660b9f54c230862e1be90d446.png)

它们的行为是否像经典的 OAuth 驱动的应用程序（移动应用程序直接与 Facebook API 一起充当 OAuth 客户端？）。如果是这样，那么如何通过 Pinterest 服务器对移动应用进行身份验证？它是否将 Facebook OAuth 访问令牌作为凭据传递？

问题的图形表示（参见 -`????`标记的箭头）：

```
Website API                 Mobile app                    Facebook OAuth

  +                           +                               +
  |                           |                               |
  |                           |       /oauth2/token           |
  |                           +------------------------------>|
  |                           |                               |
  |                           |       OAuth Access Token      |
  |                           |<-----------------------------+|
  |                           |                               |
  |           ????            |                               |
  |- - - - - - - - - - - - - -|                               |
  |                           |                               |
  |                           |                               |
  |    OAuth Access Token     |                               |
  |+------------------------->|                               |
  |                           |                               |
  |                           |                               |
  |   API Usage (w/ token)    |                               |
  |+------------------------->|                               |
  |<-------------------------+|                               |
  |                           |                               |
  |+------------------------->|                               |
  |<-------------------------+|                               |
  |                           |                               |
  |           ...             |                               |
  +                           +                               + 
```

**更新：** [这个问题和我的很相似](https://softwareengineering.stackexchange.com/questions/154108/ios-and-server-oauth-strategy)。如果这是正确的路径，那么第二+第三步（将 Facebook 令牌传输到我们的自定义 API，加上令牌本身的验证）就不可能了额外的 OAuth2 授权类型（即。`facebook_token`）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T18:26:16.547

您可以尝试使用您刚刚在移动设备上检索到的 fb 访问令牌。（可以是任何其他提供者）。将其发送到您的服务器以登录/注册/两者 Web 服务。在服务器端，您可以使用 fb sdk 和访问令牌检查谁是用户，登录用户并向他发送 cookie/会话。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T18:25:29.007

我不是 iOS 开发人员，但我目前正在使用开源 DotNetOpenAuth 库在 .NET 环境中开发类似的工作流程。也许看看它会有所帮助。

首先：身份验证方法取决于您要支持的提供商。

一些可以澄清的读物： http:
[//softwareas.com/oauth-openid-youre-barking-up-the-wrong-tree-if-you-think-theyre-the-same-thing](http://softwareas.com/oauth-openid-youre-barking-up-the-wrong-tree-if-you-think-theyre-the-same-thing) http://openid。 net/get-an-openid/what-is-openid/
[http://blog.bobcravens.com/2010/08/openid-and-oauth-using-dotnetopenauth-in-asp-net-mvc/](http://blog.bobcravens.com/2010/08/openid-and-oauth-using-dotnetopenauth-in-asp-net-mvc/) http:// stackoverflow.com/questions/7996124/how-to-authorize-mobile-apps-with-a-third-party-by-oauth-but-connect-to-my-servi

通用身份验证工作流程：
1\. Web 应用程序首先显示一个允许用户在各种 OpenID/OAuth 提供程序之间进行选择的区域。
2\. 您的应用程序重定向到提供者的服务器（在可能将一些应用程序信息添加到发布数据之后——请参阅特定提供者的 API 参考以获取详细信息）。OpenID 和 OAuth 都使用一系列重定向来获得用户身份验证。关键是身份验证发生在提供商的站点上，而这就是存储密码的地方。
3\. 用户登录所选的提供商，然后发生新的重定向到您的站点（通过回调 URL 机制）。
4\. 此重定向包括 OpenID / OAuth 提供者提供的有关经过身份验证的用户的信息。重定向至少会向您的应用程序提供一个“用户名”。
5\. 使用此信息来验证经过身份验证的用户是否可以进入您的站点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T19:48:10.100

斯特凡诺

为此，我们使用 StackMob。它工作得很好，实现起来也很简单。

StackMob SDK 通过 Facebook 和 Twitter 提供 OAUTH2 安全性和身份验证。

**更新**：[StackMob 自 2014 年 5 月起不再存在](http://thenextweb.com/insider/2014/02/12/paypal-owned-stackmob-shut-may-11-team-can-focus-mobile-payment-technology/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-02T07:08:17.850

为您的社交登录提供商创建不同的 OAuth 客户端 ID。

**例子：**

Facebook -- 客户 ID #1 Twitter -- 客户 ID #2

* * *

为您的社交流创建公共路线。

**例子：**

[http://www.test.com/auth/facebook/](http://www.test.com/auth/facebook/) [http://www.test.com/auth/facebook/callback/](http://www.test.com/auth/facebook/callback/)

社交提供者回调成功后，您需要以编程方式从数据存储中为相关用户获取数据，然后生成具有您希望为相关**客户端 ID**授予的任何预定义范围的**访问令牌**。

 *** * *

如果您有第 3 方通过尝试使用您的 API 直接尝试与您自己的客户进行交互，那么这将必须是一个两步过程。

首先，他们（客户）必须按照前面解释的方式完成社交登录过程。

然后在成功的社交提供者回调中，您需要向客户显示一个界面（可能是基于网络的），允许他们接受/拒绝第 3 方请求的权利范围。在最初的社交登录位上，您显然必须传递一个 long 或存储第 3 方请求的范围，以便将它传递给社交提供者回调步骤。**

# java - java使用FreeMarker模板写入文本文件

> ID：11327295
> 
> 赞同：1
> 
> 时间：2012-07-04T10:31:08.883
> 
> 标签：java, templates, freemarker

需要使用 Free Marker API 将数据写入文本文件，但当该行遇到 255 个字符时，应将剩余字符打印到下一行。

Free Marker 是否支持此功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T11:13:25.923

由于您可以将任何内容传递`java.io.Writer`给`Template.process`（或`Environment.process`），因此您可以传递一个写入文件并在行达到 255 个字符时插入 CR 的内容。当然，您必须实施`Writer`。

# ruby-on-rails - WhatsApp 红宝石宝石

> ID：11327298
> 
> 赞同：12
> 
> 时间：2012-07-04T10:31:16.793
> 
> 标签：ruby-on-rails, ruby, whatsapp

我只是想知道[Whatsapp](http://www.whatsapp.com)是否有类似于[PHP](https://github.com/venomous0x/WhatsAPI)中可用的 ruby​​ gem 。

我在谷歌上搜索，但找不到一个。

# ios - 将数据写入sqlite xCode

> ID：11327299
> 
> 赞同：1
> 
> 时间：2012-07-04T10:31:25.360
> 
> 标签：ios, xcode, sqlite

首先，我来自西班牙，对我的语法感到抱歉。我正在将一些数据写入 sqlite 数据库，这是我的代码：

```
@try {

    NSFileManager *fileMgr=[NSFileManager defaultManager];

    NSString *dbPath=[[[NSBundle mainBundle]resourcePath] stringByAppendingPathComponent:@"capturas.sqlite"];
    BOOL succes=[fileMgr fileExistsAtPath:dbPath];
    if(!succes)
    {
        NSLog(@"Cannot locate database '%@'.",dbPath);
    }
    if (!(sqlite3_open([dbPath UTF8String], &dbcapturas)==SQLITE_OK)) {
        NSLog(@"An error has occured: %@",sqlite3_errmsg(dbcapturas));
    }

    //sqlite3_stmt *sqlStatement;
    NSString *asd=numero.text;
    NSString *insertStatement=[NSString stringWithFormat:@"INSERT INTO captura(key,tecnico, fecha,provincia,municipio,latitud,longitud,altura,familia,especie,numero,comentario)Values(\"%@\", \"%@\", \"%@\", \"%@\", \"%@\", \"%@\", \"%@\", \"%@\", \"%@\", \"%@\", \"%@\", \"%@\")",asd,tecnico,fechaHora,tecnico,municipio,latitud,longitud,altura,tecnico,animal,asd,coment];
    char *error;
    if((sqlite3_exec(dbcapturas, [insertStatement UTF8String], NULL, NULL, &error))==SQLITE_OK)
    {
        NSLog(@"Person inserted.");
    }
    else
    {
        NSLog(@"Error: %s", error);
    }
} @catch (NSException *exception) { 
    NSLog(@"fail"); 
}
@finally {

} 
```

第一次单击保存按钮时，我得到：

> 2012-07-04 12:17:45.644 adasdasd[1783:f803] 插入的人。

我第二次得到：

> 2012-07-04 12:29:18.959 adasdasd[1840:f803] 错误：列键不唯一

所以我的代码应该没问题，但是当我打开数据库时它完全是空的，知道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T13:38:13.710

你的主包中有你的 SQLITE db 文件。主包中的所有文件都是只读的。您需要将 db 复制到 Documents 文件夹。

试试这个（来自[http://www.iphonedevsdk.com/forum/iphone-sdk-development/17262-sqlite-database-works-fine-on-simulator-but-is-readonly-on-device.html](http://www.iphonedevsdk.com/forum/iphone-sdk-development/17262-sqlite-database-works-fine-on-simulator-but-is-readonly-on-device.html)）：

```
- (void)createEditableCopyOfDatabaseIfNeeded
{
// First, test for existence.
BOOL success;
NSFileManager *fileManager = [NSFileManager defaultManager];
NSError *error;
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *writableDBPath = [documentsDirectory stringByAppendingPathComponent:@\"database_name.sql\"];
success = [fileManager fileExistsAtPath:writableDBPath];
// NSLog(@\"path : %@\", writableDBPath);
if (success) return;
// The writable database does not exist, so copy the default to the appropriate location.
NSString *defaultDBPath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@\"database_name.sql\"];
success = [fileManager copyItemAtPath:defaultDBPath toPath:writableDBPath error:&error];
if (!success)
{
NSAssert1(0, @\"Failed to create writable database file with message '%@'.\", [error localizedDescription]);
}
} 
```

# c# - 如何使用 Microsoft.Office.Interop.Word 区分 Microsoft Word 文件中的标题？

> ID：11327304
> 
> 赞同：0
> 
> 时间：2012-07-04T10:31:43.923
> 
> 标签：c#, ms-word, office-interop

我想在word文档中找到字体大小大于其下方文本的所有标题，所有标题的字体大小相同，否则所有标题都是粗体，而下面的文本不是粗体，我想保存所有这些标题都在一个列表中。我怎样才能做到这一点？我是 Office.Interop.Word 的学习者，任何帮助都会对我有很大帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T17:45:17.670

遍历每个段落，如果该段落符合您的要求（您应该澄清），则将其添加到列表中（您还应该澄清列表结构，如 List<> 还是 Word 文档中的列表，如 ListParagraph）。如果此代码没有帮助，请这样说并澄清您的问题：

```
foreach (MSWord.Paragraph paragraph in doc.Paragraphs)
{
    if (paragraph.Next() != null)
    {
        if (IsHeading(paragraph))
        {
            myList.Add(paragraph.Range.Text.ToString());
        }
    }
}

private static bool IsHeading(MSWord.Paragraph paragraph)
{
    float para1FontSize = 0;
    float para2FontSize = 0;
    bool para1IsBold = false;
    bool para2IsBold = false;

    para1FontSize = paragraph.Range.Font.Size;
    para2FontSize = paragraph.Next().Range.Font.Size;
    para1IsBold = paragraph.Range.Font.Bold.Equals(1);
    para2IsBold = paragraph.Next().Range.Font.Bold.Equals(0);

    return ((para1FontSize > para2FontSize) || (para1IsBold && !para2IsBold));
} 
```

# css - 具有“位置：固定”和“-webkit-backface-visibility：隐藏；”的元素的 Webkit 渲染怪癖？

> ID：11327308
> 
> 赞同：1
> 
> 时间：2012-07-04T10:32:03.143
> 
> 标签：css, ipad, google-chrome, webkit, mobile-safari

最近我在 Webkit 中遇到了一个渲染问题，我怀疑这是 Webkit 引擎的错误。但我没有足够的信心这么说。所以我想在这里问一下，看看你的想法。

用纯文本描述这个案例对我来说有点困难，所以我在这里准备了一个片段：http: [//jsfiddle.net/2eQXa/1/](http://jsfiddle.net/2eQXa/1/)

首先，您可以看到带有红色边框的黄色背景。这不是 <body> 标签的背景，而是一个 ID 为“backdrop”的 <div>，它具有 100% 的宽度和高度。默认情况下，它链接到“backdrop-no-problem”类。还有一个带有一些图像的水平列表。该列表被绿色边框包围。在列表中，有一些用红色虚线边框包裹的 Wikipedia 徽标。

我使用以下 3 台设备测试了该页面： 1\. Windows 7 上的 Chrome 21 2\. 第一代 iPad 上的移动 safari（运行 iOS4，我将其称为 iPad1） 3\. “新” iPad 上的移动 safari（运行 iOS5 , 我称之为 iPad3)

尝试单击“右”或“左”滚动列表。非常好。

要重现我的问题，首先单击“问题 #1”。这会将背景 div 从“位置：绝对”更改为“位置：固定”。然后单击“问题 #2”。这将添加“-webkit-backface-visibility: hidden;” 到元素（添加此样式的原因是为了确保 iPad 上的动画流畅）。

现在单击“左/右”滚动列表。您应该在所有三个浏览器中看到一个奇怪的行为：绿色 div 正确且平滑地滚动，但不是它的子元素。子元素只是与滚动父元素的位置“不同步”。运动不仅看起来迟钝，有时甚至卡住了。当滚动动画结束时，子元素会停在错误的位置。您必须将鼠标移到图片上（或在平板电脑上点击）才能触发更新，以便在正确的位置重新绘制元素。甚至 Chrome 显示出这种怪异让我觉得这是一个 Webkit 问题。

iPad3 的情况变得更糟了。在 iPad3 中你不需要添加“-webkit-backface-visibility: hidden;” （问题＃2）看到这种奇怪的行为。只需添加“位置：固定”（问题＃1）就可以了。奇怪的是，当您在 jsFiddle 中查看代码段时，这不会发生。如果您有兴趣，我已将源代码放在 pastebin 的单个文件中：

[http://pastebin.com/i4ARX4mD](http://pastebin.com/i4ARX4mD)

在写这个问题时，我看到了很多关于背面可见性的问题。我检查了一些，但没有一个符合我的问题。

欢迎提出想法或建议。谢谢！

（帖子已更新以修复许多错别字）

# mapreduce - 如何在hbase中加入表

> ID：11327316
> 
> 赞同：10
> 
> 时间：2012-07-04T10:32:33.077
> 
> 标签：mapreduce, hbase

我必须在 Hbase 中加入表。

我集成了 HIVE 和 HBase，效果很好。我可以使用 HIVE 进行查询。

但是有人可以帮助我如何在不使用 HIVE 的情况下加入 HBase 中的表。我认为使用 mapreduce 我们可以实现这一点，如果可以的话，任何人都可以分享一个我可以参考的工作示例。

请分享您的意见。

我心里有个办法。那是，

如果我需要加入表 A x B x C; 我可以使用 TableMapReduceUtil 来迭代 A，然后在 TableMapper 中从 B 和 C 获取数据。然后使用 TableReducer 写回另一个表 Y。

这种方法会不会很好。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-02T21:03:33.050

这当然是一种方法，但是如果您对每个扫描行进行 2 次随机读取，那么您的速度将会直线下降。如果您要显着过滤行或在 A 中有一个小数据集，这可能不是问题。

# 排序合并连接

然而，在 HBase 0.96 中可用的最佳方法是 MultipleTableInput 方法。这意味着它将扫描表 A 并使用允许表 B 匹配的唯一键写入其输出。

例如，表 A 发出 (b_id, a_info) 和表 B 将发出 (b_id, b_info) 在 reducer 中合并在一起。

这是一个排序合并连接的例子。

# 嵌套循环连接

如果您在行键上加入或加入属性按照表 B 排序，则可以在每个任务中都有一个扫描仪实例，该实例从表 B 中顺序读取，直到找到它正在寻找的内容。

例如，表 A 行键 =“companyId”，表 B 行键 =“companyId_employeeId”。然后对于表 A 中的每个公司，您可以使用嵌套循环算法获取所有员工。

### 伪代码：

```
for(company in TableA):
    for(employee in TableB):
        if employee.company_id == company.id:
            emit(company.id, employee) 
```

这是一个嵌套循环连接的示例。

## 更详细的连接算法在这里：

*   [http://en.wikipedia.org/wiki/Nested_loop_join](http://en.wikipedia.org/wiki/Nested_loop_join)
*   [http://en.wikipedia.org/wiki/Hash_join](http://en.wikipedia.org/wiki/Hash_join)
*   [http://en.wikipedia.org/wiki/Sort-merge_join](http://en.wikipedia.org/wiki/Sort-merge_join)

# javascript - jQuery：为 JSON 对象中的元素设置值

> ID：11327318
> 
> 赞同：2
> 
> 时间：2012-07-04T10:32:42.947
> 
> 标签：javascript, jquery

这可能很难解释，但我有这样的~~数组~~对象：

```
myobject = {
  "class1"     : "value1",
  "class2"     : "value2",
  "class3"     : "value3",
  ...
} 
```

我有脚本

```
$.each(myobject,function(i,val){
try{
    var it=0;
    $("." + i).each(function(it){
        switch($("." + i)[it].nodeName){
            case "SPAN":case "A":case "DIV":
                $("." + i).html(val);
            break;
            case "INPUT":
                switch($("." + i).attr("type")){
                    case "submit":
                        $("." + i).attr("value",val);
                    break;
                    case "text":case "password":case "email":
                        $("." + i).attr("placeholder",val);
                    break;
                }
            break;
            case "IMG":
                $("." + i).attr("alt",val);
                $("." + i).attr("title",val);
            break;
        }
    });
}catch(err){
    // Nothing
}
}); 
```

`span`, `a`,的代码效果`div`应该是这样的：

```
Was:  <span class="class1"></span>
Is:   <span class="class1">value1</span> 
```

对于`input`where `type=submit`，应该是这样的：

```
Was:  <input type="submit" class="class2" />
Is:   <input type="submit" class="class2" value="value2" /> 
```

、和的代码效果`span`，但这不会设置s。为什么？`a``div``input[type=submit]``placeholder`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T10:45:31.730

你正在尝试的是一种过于复杂的方式来做你想做的事。只需使用 jQuery 选择器的强大功能来按标签类型进行过滤：

```
$.each(myobject, function(k, v){
    $('span.' + k + ', ' +
      'a.' + k + ', ' +
      'div.' + k).html(v);

    $('input.' + k + '[type="submit"]').val(v);

    $('input.' + k + '[type="text"], ' +
      'input.' + k + '[type="password"], ' +
      'input.' + k + '[type="email"]').attr('placeholder', v);

    $('img.' + k).attr('title', v)
                 .attr('alt', v);
}); 
```

**编辑：**

## [看演示](http://jsfiddle.net/LJN9Q/3/)

（也许您可以通过查看演示和您的代码找出有什么不同以及为什么它不起作用）

# actionscript-3 - Stage3D 导致全屏（舞台）视频滞后/抖动

> ID：11327326
> 
> 赞同：0
> 
> 时间：2012-07-04T10:33:05.007
> 
> 标签：actionscript-3, video, netstream, stage3d

我目前在使用闪光灯时遇到了一些严重的问题。我加载了一个使用 Stage3D 的 swf，显示 3D 内容。当我以全屏尺寸覆盖视频播放器时，会导致视频内容出现大量滞后/抖动。视频内容在本地加载，因此无需考虑流式传输。这只发生在某些机器上，但考虑到项目，这不能忽视。

从那以后，我重新编码了我的项目以删除我使用 Loader 执行的任何形式的加载，只需将文件路径直接放入 netstream，然后将 netstream 附加到 StageVideo。但问题仍然存在，我束手无策。我什至在视频播放期间将 Stage3D 设置为不可见。

调试完全令人恐惧，因为这在我的机器上根本不是问题，但 10 个人中有 4 人报告了这个问题，我们不能像这样发布我们的产品。

任何解决此问题的帮助都将受到极大的重视和赞赏。

问候，

凯文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T10:47:46.323

就像 StageVideo 一样使用 GPU，就像 Stage3D 一样。所以我猜这两个阶段会在 GPU 上相互中断处理（尤其是在旧显卡上）。

所以我的回答是在您使用 Stage3D 时尝试停止该视频。

# eclipse - Eclipse 中的项目仅包含一个 .project 文件

> ID：11327328
> 
> 赞同：0
> 
> 时间：2012-07-04T10:33:17.777
> 
> 标签：eclipse, perforce

我有几个需要在 Eclipse 中维护的 Perforce 项目。我第一次成功导入，但此后我从工作区中删除了所有项目并从 P4 文件夹中删除了 Perforce 文件。我对 Perforce 不是很熟悉，所以我不确定为什么每当我尝试重新导入这些项目时，我得到的只是一个 .project 文件而不是整个包。

任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T15:13:35.803

也许您必须执行 Eclipse 等效的 'sync -f' 而不仅仅是 'sync'。如果您从客户端机器上物理删除文件，Perforce 服务器仍然认为您拥有它们，因此普通的“同步”命令不会重新发送它们。'sync -f' 命令重新发送所有文件，即使是服务器认为您已经拥有的文件。

# c++ - c++线程问题

> ID：11327330
> 
> 赞同：2
> 
> 时间：2012-07-04T10:33:45.840
> 
> 标签：c++, multithreading

我正在尝试使用以下代码在 C++ 中创建一个线程：

```
pthread_t mythread;
void* f (void*) = MyClass::myfunction;
pthread_create(&mythread, NULL, &f, NULL); 
```

它不工作。知道有什么问题吗？

myfunction 的类型为：

```
void* MyClass::myfunction(void* argv); 
```

返回的错误是：

```
error: declaration of ‘void* Class::f(void*)’ has ‘extern’ and is initialized

error: invalid pure specifier (only ‘= 0’ is allowed) before ‘::’ token

error: function ‘void* Class::f(void*)’ is initialized like a variable 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T10:42:18.353

您声明`f`为函数而不是函数指针。它应该是：

```
void* (*f) (void*) = &MyClass::myfunction;
      ^^^^

pthread_create(&mythread, NULL, f, NULL);
                                ^ no & since it's already a pointer 
```

这也仅在`myfunction`静态时才有效，因为您无法将指向成员函数的指针转换为指向函数的指针。

如果您确实需要线程在特定对象上执行非静态成员函数，那么一种方法是编写一个静态包装器，将对象作为参数：

```
class MyClass {
public:
    void start_thread() {
        // Pass "this" to the thread we're creating
        pthread_create(&mythread, NULL, &MyClass::thread_entry, this);
    }
private:
    static void * thread_entry(void * object) {
        // Call the member function on the object passed to the thread
        return static_cast<MyClass*>(object)->thread();
    }
    void * thread() {
        // do the interesting stuff, with access to the member variables
    }
}; 
```

当然，现在有一个标准线程库可以消除对这种舞蹈的需求：

```
std::thread thread(&MyClass::thread, this); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T10:47:05.823

Pthreads 需要一个**函数指针**，并且对于类，您只能使用函数指针指向静态方法。

如果您想在**特定对象上调用****类的特定方法**，则需要两个单独的数据部分：

 ***   指向类方法的指针（不要将它们与函数指针混淆）
*   指向对象的指针

这两个连接在一起可以非正式地称为*委托*。

* * *

PThreads 是一个 C 库，要与它进行互操作，您需要一些解决方法：

```
int pthread_create(pthread_t *thread, const pthread_attr_t *attr,
    void *(*start_routine)(void*),
    void *arg); 
```

我们将把类方法包装在一个静态类方法中，以便能够将它作为参数传递`start_routine`，并且我们将把指向对象本身的指针传递为`arg`.

见代码：

```
struct Foo {

    // wrapper method
    static void* threadStartingPoint(void* obj) {
        return ((Foo)obj)->threadFunc();
    }

    // your target method itself
    void* threadFunc() {
        // this is where you do your logic
    }
} 
```

这种解决方法允许您使用`pthread_create(thread, attr, Foo::threadStartingPoint, someObject)`.

* * *

请注意，如果您有幸拥有一个支持 的现代编译器`std::thread`，则可以使用它而不是 pthreads 并使代码更简单 - 您只需创建一个`std::function`对象并将其传递给`std::thread`的构造函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T10:42:07.323

您根本无法做您想做的事情-成员函数（除非它是静态的）需要一个要在其中调用的对象-即启动线程的进程不能只调用 MyClass::f() 因为它需要调用 something.f() - 它不知道某事是什么。

通常，通过定义一个静态成员函数来解决这个问题，该函数将对象作为参数，然后调用该对象的成员函数。**

# java - 多个 portlet 项目

> ID：11327333
> 
> 赞同：0
> 
> 时间：2012-07-04T10:33:52.890
> 
> 标签：java, portlet

有一个问题，如果我有一个严重的 portlet 如何调用其中一个？例如，如果我有一个 portlet，我会在其中写下他的名字`portlet.xml`

```
 <portlet-class>ru.my-portlet</portlet-class> 
```

当我想调用它时，我会这样写

```
<form name="form" action="<portlet:actionURL/>" method="post" enctype="multipart/form-data">
   <div id="up">
     <input id="fileUpload1" type="file" name="filename1"value="Browse..."/>
   </div>
   <div>
    <input id="btnSubmit" type="submit" value="Загрузить">
    <input type="button" id="del" onclick="deleting()" value="Удалить">
   </div>
</form> 
```

如果我有几个 portlet，我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T12:31:22.913

通常，无法获取另一个 portlet 的（操作、渲染、...） URL。Portlet 规范不包括这一点。

在符合 JSR-286 的门户容器中，可以使用 portlet 事件来更改另一个 portlet 的状态，或者使用公共呈现参数（假设 portlet 共享相同的门户页面）来影响另一个 portlet 的呈现行为。两者都在[这里](http://developers.sun.com/portalserver/reference/techart/jsr286/jsr286.html)讨论。

门户容器还可以提供特定于容器的 portlet 间通信扩展——它可能也值得检查容器的文档。

# javascript - YUI2 ColorPicker 默认值问题

> ID：11327354
> 
> 赞同：0
> 
> 时间：2012-07-04T10:35:02.750
> 
> 标签：javascript, yui, color-picker

我在一个项目中使用 YUI2[颜色选择器](http://developer.yahoo.com/yui/colorpicker/)来提供主题/配色方案更改功能。我将每个颜色选择器的默认 rgb 值设置为配色方案元素的当前 rgb 值。

选择器持有的 rgb 值很好，但是 Hue Slider 和 Picker Slider 没有更新以反映这一点。每当颜色选择器出现时，色调和选择器分别设置为 0 和 ffffff。

我已经搜索了文档并尝试了一些可能的方法来适当地更新色调/选择器滑块，但没有运气。

任何建议将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T10:12:37.593

经过更多的搜索和玩耍，我设法想出了一个解决方案。该过程有两个步骤；

# 第1步

您需要根据 rgb 值计算[HSV](http://en.wikipedia.org/wiki/HSL_and_HSV)（色相、饱和度、值）。这是使用下面的函数 rgbTohsv() 完成的，我在[这里](http://www.javascripter.net/faq/rgb2hsv.htm)得到了。它已从原始版本进行了修改，以说明 YUI HueSlider 和 PickerSlider 期望输入的方式。

```
function rgbTohsv (rgb) {
    var computedH = computedS = computedV = 0;

    //remove spaces from input RGB values, convert to int
    var r = parseInt( (''+rgb[0]).replace(/\s/g,''),10 ); 
    var g = parseInt( (''+rgb[1]).replace(/\s/g,''),10 ); 
    var b = parseInt( (''+rgb[2]).replace(/\s/g,''),10 ); 

    r=r/255; g=g/255; b=b/255;
    var minRGB = Math.min(r,Math.min(g,b));
    var maxRGB = Math.max(r,Math.max(g,b));

    // Black-gray-white
    if (minRGB==maxRGB) {
        computedV = minRGB;
        return [0,0,Math.round(computedV*100)];
    }

    // Colors other than black-gray-white:
    var d = (r==minRGB) ? g-b : ((b==minRGB) ? r-g : b-r);
    var h = (r==minRGB) ? 3 : ((b==minRGB) ? 1 : 5);
    computedH = 60*(h - d/(maxRGB - minRGB));
    computedS = (maxRGB - minRGB)/maxRGB;
    computedV = maxRGB;
    return [(360-computedH)/2,Math.round(computedS*100),Math.round(computedV*100)];
} 
```

**修改：**：色调滑块需要一个介于 180-0 之间的值，而不是通常的 0-360。除了较短的范围外，它也被反转，因此它从 180->0 开始。S 和 V 值必须是 0-100 之间的整数，而原始函数返回 0-1.0 值。这两个问题都已在上述功能中得到解决。

# 第2步

接下来，您需要设置颜色选择器的 hsv 值。所以 colourPicker 是您初始化的颜色选择器变量；

```
hsv = rgbTohsv(rgb);
colourPicker.hueSlider.setValue(hsv[0],0);
colourPicker.pickerSlider.setRegionValue(hsv[1],hsv[2]); 
```

默认情况下，更新色调滑块和选择器滑块在更新时会播放动画，您可以通过`false`在方法调用末尾添加一个变量来抑制它。

```
colourPicker.hueSlider.setValue(hsv[0],0,true);
colourPicker.pickerSlider.setRegionValue(hsv[1],hsv[2], true); 
```

# php - 如何使用 php 将 excel 数据导入现有的 mysql 表

> ID：11327355
> 
> 赞同：0
> 
> 时间：2012-07-04T10:35:07.697
> 
> 标签：php, mysql

我正在做一个项目，用户可以在其中创建一个新的联系人组，也可以使用 excel 数据更新现有的联系人组。

创建一个新的联系人组不是问题，但是将文档的内容插入数据库对我来说是一个主要问题。

或者哪种格式可以很容易地用 php.ini 导入到数据库中。

数据如下所示：

|名称 | |电子邮件 | |电话|

|我 | |我们@us.com| |080234444| ETC

任何意见、建议或方向将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T10:46:17.727

MySql 可以使用命令轻松地从文件中导入 CSV* 数据`LOAD DATA INFILE`。如果您需要解析其他 Excel 数据，则需要额外的方法和逻辑来读取文件并手动填充数据库。

您可以阅读有关[LOAD DATA INFILE的更多信息](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)

*基本上任何分隔文本（TSV 等）

请注意，分隔数据存在许多限制/哥特式，例如，无法在 csv 文本中保存未转义的逗号。确保您的源文件遵守并遵守 CSV 规则，否则您可能会收到损坏的数据。

编辑

现在您已经提供了一些数据示例，您可能想试试这个（或类似的东西）：

```
LOAD DATA INFILE `your filename` INTO `Table` 
Fields Terminated BY '|' 
Lines Terminated BY '\r\n'
IGNORE 1 LINES 
(@Col1, @Col2, @Col3, @Col4, @Col5)
SET Name = TRIM(@Col1), Email = TRIM(@Col3), Telephone = TRIM(@Col5) 
```

在这里，您将数据加载到临时变量中，然后将其插入到表中。请注意，该文件必须存在于本地计算机上。

编辑

试试这个固定的 SQL

```
LOAD DATA INFILE 'your filename' INTO TABLE `Table` 
Fields Terminated BY '|' 
Lines Terminated BY '\r\n'
IGNORE 1 LINES 
(@Col1, @Col2, @Col3, @Col4, @Col5)
SET Name = TRIM(@Col1), Email = TRIM(@Col3), Telephone = TRIM(@Col5) 
```

# jquery - 谷歌地图自动更新位置，但不是用户设置的缩放

> ID：11327359
> 
> 赞同：0
> 
> 时间：2012-07-04T10:35:12.083
> 
> 标签：jquery, google-maps, google-maps-mobile

我在 jquery/javascript 中每隔 x 秒自动更新一次谷歌地图。

更改位置时，地图会更改缩放级别（预期）。

但我想实现这一点：

如果用户手动更改了缩放级别，则地图应保持/保持用户设置的缩放级别。

代码与此类似：

```
 function calcRoute(user) {
     if(user)
     {
        start = document.getElementById("start_location").value;
     }
     end = document.getElementById("end_location").value;
     var request = {
        origin:start, 
        destination:end,
        travelMode: google.maps.DirectionsTravelMode.WALKING
    };

    directionsService.route(request, function(response, status) {
      if (status == google.maps.DirectionsStatus.OK) {
        directionsDisplay.setDirections(response);
        $('#txt_dur').text(response.routes[0].legs[0].duration.text);
        $('#txt_dist').text(response.routes[0].legs[0].distance.text);      

      }
    });
    //if(userZoom==true)
    //    map.setZoom(current_zoom);

  }

      function autoUpdate() {
         navigator.geolocation.getCurrentPosition(function(position) {
         var newPoint = new google.maps.LatLng(position.coords.latitude,
                                          position.coords.longitude);

         start = newPoint.toString();
         calcRoute(false);
      });

    setTimeout(autoUpdate, 5000);
   }

    autoUpdate(); 
```

我会更喜欢标准的谷歌地图事件，比如 zoom_changed，而不是为用户缩放创建自定义事件。

关于这个主题的任何方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T13:10:08.643

试试这样：

```
if (status == google.maps.DirectionsStatus.OK) {
    var tmpZoom = map.getZoom();   //added line
    directionsDisplay.setDirections(response);
    map.setZoom( tmpZoom );        //added line

    $('#txt_dur').text(response.routes[0].legs[0].duration.text);
    $('#txt_dist').text(response.routes[0].legs[0].distance.text);
} 
```

`map`你的`google.maps.Map`对象在哪里。

**PS**：为了防止两者都`center`被`zoom`方法更改，`setDirections`您可以指定[google.maps.DirectionsRendererOptions](https://developers.google.com/maps/documentation/javascript/reference#DirectionsRendererOptions)对象。`preserveViewport=true`

# eclipse - Eclipse，如何将一个项目的所有依赖项添加到另一个项目

> ID：11327361
> 
> 赞同：3
> 
> 时间：2012-07-04T10:35:12.890
> 
> 标签：eclipse, dependencies

我在 Eclipse 中有一个使用 Maven 构建的项目，它有数百个 JAR 作为参考库。有没有办法将所有这些参考库包含到另一个项目中？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-04T10:35:13.500

由于原始项目涉及 Maven 依赖项，因此有两种方法可以做到这一点。

## - 马文

要以 Maven 风格完成此操作，请参阅此问题。[如何在构建路径 Eclipse 中添加“Maven Managed Dependencies”库？](https://stackoverflow.com/questions/4859825/how-to-add-maven-managed-dependencies-library-in-build-path-eclipse)

## - 添加项目作为依赖项

执行此操作的更简单的方法（对于初学者和测试人员）是将原始项目作为对新项目的依赖项包含在内。

*   在您的原始项目中，前往 Properties > Java Build Path > Order and Export。选择新项目所需的所有依赖项。
*   在您的新项目中，前往 Properties > Java Build Path > Projects。现在添加原始项目。

# android - 自定义呼叫屏幕以覆盖android中的默认屏幕？

> ID：11327363
> 
> 赞同：0
> 
> 时间：2012-07-04T10:35:13.997
> 
> 标签：android, android-intent, android-contacts

我创建了广播接收器

```
<receiver android:name=".IncomingBroadcastReceiver">
<intent-filter>
  <action android:name="android.intent.action.PHONE_STATE"></action>                              
</intent-filter>
    </receiver> 
```

在清单文件中声明它并在接收广播接收器时调用一个活动以显示在默认呼叫屏幕的前面。

但是默认呼叫屏幕将我的活动向后推。是否有任何选项可以通过替换默认呼叫屏幕来使活动前景。

还有一个问题，在 Android 的联系人中，可以将 gif 图像作为联系人图标分配给联系人。但是在接听电话时，Gif 图像不会被播放。它还是。你知道原因吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T10:41:10.610

您无法更换呼叫屏幕，您只能检测到您不再处于领先地位（通过`onPause()`或`onWindowFocusChanged()`如果您不再处于领先地位，则再次开始您的活动。

“再问一个问题”确实不适合 stackoverflow —— 再发一篇关于新问题的帖子是如何问其他不相关的问题。您的 Gif 没有动画的原因很简单——Google 没有在呼叫屏幕上提供对动画 Gif 的支持，但是由于您将自己的活动放在它前面，您显然可以改变它。

# php - 检测 PHP 脚本是否以交互方式运行

> ID：11327367
> 
> 赞同：17
> 
> 时间：2012-07-04T10:35:24.703
> 
> 标签：php

我有一个脚本，它既可以作为网页运行，也可以通过控制台运行。

检测用于调用脚本的方法似乎很简单，但是当从控制台运行脚本时，我需要知道脚本是否以交互方式运行（用户键入命令，或从文件重定向输入） .

`php script.php` 相对 `php script.php < input_file`

这可能吗？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-07-04T10:40:47.980

我还需要一个比[`posix_isatty`](http://php.net/manual/en/function.posix-isatty.php)它可以检测到的更灵活的解决方案：

*   脚本是否从终端运行
*   脚本是通过管道还是从文件接收数据
*   输出是否被重定向到文件

在对 libc 头文件进行了一些试验和挖掘之后，我想出了一个非常简单的类，它可以完成上述所有工作以及更多工作。

```
class IOMode
{
    public $stdin;
    public $stdout;
    public $stderr;

    private function getMode(&$dev, $fp)
    {
        $stat = fstat($fp);
        $mode = $stat['mode'] & 0170000; // S_IFMT

        $dev = new StdClass;

        $dev->isFifo = $mode == 0010000; // S_IFIFO
        $dev->isChr  = $mode == 0020000; // S_IFCHR
        $dev->isDir  = $mode == 0040000; // S_IFDIR
        $dev->isBlk  = $mode == 0060000; // S_IFBLK
        $dev->isReg  = $mode == 0100000; // S_IFREG
        $dev->isLnk  = $mode == 0120000; // S_IFLNK
        $dev->isSock = $mode == 0140000; // S_IFSOCK
    }

    public function __construct()
    {
        $this->getMode($this->stdin,  STDIN);
        $this->getMode($this->stdout, STDOUT);
        $this->getMode($this->stderr, STDERR);
    }
}

$io = new IOMode; 
```

一些示例用法，以显示它可以检测到的内容。

输入：

```
$ php io.php
// Character device as input
// $io->stdin->isChr  == true

$ echo | php io.php
// Input piped from another command
// $io->stdin->isFifo == true

$ php io.php < infile
// Input from a regular file (name taken verbatim from C headers)
// $io->stdin->isReg  == true

$ mkdir test
$ php io.php < test
// Directory used as input
// $io->stdin->isDir  == true 
```

输出：

```
$ php io.php
// $io->stdout->isChr  == true

$ php io.php | cat
// $io->stdout->isFifo == true

$ php io.php > outfile
// $io->stdout->isReg  == true 
```

错误：

```
$ php io.php
// $io->stderr->isChr  == true

$ php io.php 2>&1 | cat
// stderr redirected to stdout AND piped to another command
// $io->stderr->isFifo == true

$ php io.php 2>error
// $io->stderr->isReg  == true 
```

我没有包含链接、套接字或块设备的示例，但它们没有理由不工作，因为它们的设备模式掩码在类中。

（未在 Windows 上测试 - 里程可能会有所不同）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-04T10:39:37.777

[`posix_isatty()`](http://php.net/manual/en/function.posix-isatty.php)

```
if (posix_isatty(0)) {
  // STDIN is a TTY
} else {
  // STDIN is a pipe or has no associated TTY
} 
```

显然，这只适用于 POSIX 兼容的操作系统，其中 PHP`posix`安装了扩展。我不知道 Windoze 等价物。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-06-21T16:32:03.220

对于 Windows，您可以使用：

```
$b = stream_isatty(STDIN);
if ($b) {
   echo "php script.php\n";
} else {
   echo "php script.php < input_file\n";
} 
```

[https://php.net/function.stream-isatty](https://php.net/function.stream-isatty)

# asp.net - 为什么这个 HttpFileCollection 每次上传的文件数都是一个？

> ID：11327373
> 
> 赞同：1
> 
> 时间：2012-07-04T10:35:38.980
> 
> 标签：asp.net, file-upload, radupload

虽然我没有上传任何文件，但它给了文件计数一个。请让我知道我错在哪里。

我这样做是为了 radupload telerik 控制

实际上 radupload 计数总是抛出 0

```
RadUpload1.UploadedFiles.Count 
```

这就是为什么我必须实施以下解决方案

```
 HttpFileCollection hfc = Request.Files;
        if (hfc.Count == 0)
        {
            errMessage = "Please upload a file ";
        }

 <telerik:RadUpload ID="RadUpload1" InitialFileInputsCount="1" MaxFileInputsCount="1"
                    Localization-Select="Browse" runat="server" TargetFolder="~/SlideImages" InputSize="42"
                    OverwriteExistingFiles="True" Skin="Office2010Silver" controlobjectsvisibility="None" MaxFileSize="1000">
                </telerik:RadUpload> 
```

# amazon-dynamodb - 亚马逊 Dynamodb 异常错误

> ID：11327374
> 
> 赞同：0
> 
> 时间：2012-07-04T10:35:43.980
> 
> 标签：amazon-dynamodb

当我们使用 http rest api 调用 dynamodb 时，会出现此错误

我能知道是什么问题吗？我们需要在 dynamodb url 中附加的所有必需的东西是什么？

[http://dynamodb.us-east-1.amazonaws.com/?aws_access_key=XXXXXXXXXXXXXXXX&aws_secret_access_key=ZZZZZZZZZZZZZZZZZZZZZ](http://dynamodb.us-east-1.amazonaws.com/?aws_access_key=XXXXXXXXXXXXXXXX&aws_secret_access_key=ZZZZZZZZZZZZZZZZZZZZZZ)

我们需要在这个 url 上附加更多参数吗？请告诉我？ **http://docs.amazonwebservices.com/amazondynamodb/latest/developerguide/UsingJSON.html#JSONMajorExample**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T00:11:18.117

您的解决方案在同一个链接中

[http://docs.amazonwebservices.com/amazondynamodb/latest/developerguide/MakingHTTPRequests.html](http://docs.amazonwebservices.com/amazondynamodb/latest/developerguide/MakingHTTPRequests.html)

> 如果您不使用其中一个 AWS 开发工具包，您可以使用 POST 请求方法通过 HTTP 执行 Amazon DynamoDB 操作。POST 方法要求您在请求的标头中指定操作，并在请求的正文中以 JSON 格式提供操作数据。

您需要使用该页面中提到的所有必需参数发出 POST 请求。

# javascript - 可拖动的 div Jquery UI

> ID：11327375
> 
> 赞同：0
> 
> 时间：2012-07-04T10:35:47.977
> 
> 标签：javascript, jquery, jquery-ui

我希望能够通过推动标题 div 来拖动主包装器。

我要拖动的主要包装器 div 是#popupContact

标题 div 称为#popupHeaderGradient。

现在我正在使用 Jquery UI，我让它与 $('#popupHeaderGradient').draggable();

但这仅允许我移动标题元素。

我希望它通过拖动标题元素来拖动整个主包装器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T10:39:07.480

```
$('#popupContact').draggable({handle: "#popupHeaderGradient"}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T10:39:16.693

使用句柄选项告诉jquery你想用什么作为“拖动句柄”

```
$('#popupContact').draggable({
   handle: '#popupHeaderGradient'
}); 
```

# iphone - 在 iOS 上从 Line-In 输入输出输入

> ID：11327377
> 
> 赞同：0
> 
> 时间：2012-07-04T10:36:03.857
> 
> 标签：iphone, objective-c, ios, core-audio, audiotoolbox

我有一个项目，我需要通过设备的扬声器输出通过线路输入或连接到 30 针连接器的附件进入的输入。在处理线路输入时，我发现很难检测是否有来自线路输入的输入，以及如何从该源获取输入，然后通过扬声器重播缓冲区。例如，尝试获取 kAudioSessionProperty_InputSource(s) 的属性不会返回任何内容。

# java - 调试 JAXB / JBOSS 行为所需的建议

> ID：11327385
> 
> 赞同：0
> 
> 时间：2012-07-04T10:36:30.817
> 
> 标签：java, spring, jboss, jaxb

我正在使用 Spring WebServiceTemplate.marshallSendAndReceive() 与 Web 服务进行通信。

如果我在应用程序服务器之外运行我的代码，它就可以正常工作。如果我*在*我的应用程序服务器 (JBOSS EPP) 中运行它，编组会产生明显不同的结果。

预期的 XML 看起来像

```
<root>
   <element1/>
</root> 
```

当我在 AppServer 中运行时，我得到类似

```
<root/> 
```

也就是说，我的子元素没有创建并附加到我的根元素。

我假设这与 JAXB 有关，但是当我调试代码时，我的 JAXBContext 似乎来自应用服务器内外的同一个 jar 文件。

是否有任何其他依赖项我需要注意并可以影响？

谢谢

戴夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T12:22:03.880

我的同事过去在使用 JAXB 时遇到了一些麻烦。这种麻烦是基于不同运行时环境中不同的 XML 解析器实现。在我们的例子中，某些环境有 xerxes 解析器，这会在并发执行的情况下导致一些错误。您可以尝试找出您的应用程序使用了哪个 xml 解析器，如果不同则更改它。我希望这些信息对你有用。

# iphone - 通过网站分发应用程序...？

> ID：11327386
> 
> 赞同：0
> 
> 时间：2012-07-04T10:36:32.237
> 
> 标签：iphone, xcode, ipad

我见过很少的网站，给 ipa 和 ipa 安装到任何 iPhone 设备.. 怎么可能我的 ipa 可以安装到任何 iPhone 设备上。没有应用商店？

[http://www.codeproject.com/KB/iPhone/abPlayer_iPhone/abPlayer_ipa.zip](http://www.codeproject.com/KB/iPhone/abPlayer_iPhone/abPlayer_ipa.zip) 这怎么可能？有什么帮助吗？

它是公开分发的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T10:57:37.560

您可以通过将应用程序上传到网站并通过特制 URL 访问它来为您的应用程序使用无线分发，类似于`itms://path/to/manifest.xml`. [可以在此处找到](http://developer.apple.com/library/ios/#featuredarticles/FA_Wireless_Enterprise_App_Distribution/Introduction/Introduction.html)示例清单文件。

但请注意，在没有企业分发配置文件的情况下使用此方法，您仍然需要配置您希望在其上运行应用程序的设备。普通开发者帐户最多只能使用 100 台设备。

如果您需要分发到 100 台以上的设备，您可以申请一个企业帐户，并且您不需要显式配置这些设备。但是，企业协议的条款规定它仅用于内部分发，而不是向公众分发。如果 Apple 发现您只是在使用企业发行版绕过 App Store，他们将关闭该帐户。如果你不能证明你只会将它用于内部分发/测试，他们甚至可能一开始就不会给你一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T10:48:55.287

为此，您需要在苹果注册[企业账户](https://developer.apple.com/programs/ios/enterprise/)，注册后，您可以在没有应用商店的情况下分发应用程序，并带有分发证书。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T10:38:35.330

是的，您可以在 testflightapp.com 上上传您的 ipa。他们将为您提供下载链接

# ruby-on-rails - 验证和测试 Rails 3 关联的完美方式（使用 RSpec/Remarkable）？

> ID：11327390
> 
> 赞同：16
> 
> 时间：2012-07-04T10:36:55.010
> 
> 标签：ruby-on-rails, validation

我对在 Rails 3 中进行测试还是很陌生，我使用 RSpec 和 Remarkable。我已经阅读了很多帖子和一些书籍，但我仍然有点不确定何时使用该协会的名称，何时使用它的 ID。

```
class Project < ActiveRecord::Base
  has_many :tasks
end

class Task < ActiveRecord::Base
  belongs_to :project
end 
```

由于良好的做法，我想保护我的属性免受批量分配：

```
class Task < ActiveRecord::Base
  attr_accessible :project  # Or is it :project_id??

  belongs_to :project
end 
```

首先，我想确保没有有效任务的项目**永远不会**存在：

```
class Task < ActiveRecord::Base
  validates :project, :presence => true      # Which one is the...
  validates :project_id, :presence => true   # ...right way to go??
end 
```

我还想确保分配的项目或项目 ID 始终有效：

```
class Task < ActiveRecord::Base
  validates :project, :associated => true     # Again, which one is...
  validates :project_id, :associated => true  # ...the right way to go?
end 
```

...当我使用 :related 时是否需要对 :presence 进行验证？

非常感谢您的澄清，似乎经过数小时的阅读和尝试使用 RSpec/Shoulda/Remarkable 测试东西后，由于所有的树木，我再也看不到森林了……

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-04T12:49:39.300

这似乎是正确的方法：

```
attr_accessible :project_id 
```

你也不必放在`:project`那里！无论如何都有可能做到`task.project=(Project.first!)`

然后检查是否存在`:project_id`使用以下内容（在使用`:project_id`时也设置`task.project=(...)`）：

```
validates :project_id, :presence => true 
```

现在确保关联的项目是有效的，如下所示：

```
validates :project, :associated => true 
```

所以：

```
t = Task.new
t.project_id = 1 # Value is accepted, regardless whether there is a Project with ID 1
t.project = Project.first # Any existing valid project is accepted
t.project = Project.new(:name => 'valid value') # A new valid project is accepted
t.project = Project.new(:name => 'invalid value') # A new invalid (or an existing invalid) project is NOT accepted! 
```

有点可惜的是，通过`t.project_id =`它分配一个ID时，并没有检查这个特定的ID是否真的存在。您必须使用自定义验证或使用[Validates Existence GEM](https://github.com/perfectline/validates_existence)来检查这一点。

要使用带有 Remarkable 匹配器的 RSpec 测试这些关联，请执行以下操作：

```
describe Task do
  it { should validate_presence_of :project_id }
  it { should validate_associated :project }
end 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-04T10:48:17.880

```
validates :project, :associated => true  
validates :project_id, :presence => true 
```

> 如果您想确定关联是否存在，则需要测试用于映射关联的外键是否存在，而不是关联对象本身。 [http://guides.rubyonrails.org/active_record_validations_callbacks.html](http://guides.rubyonrails.org/active_record_validations_callbacks.html)

```
attr_accessible :project_id 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-04T20:01:19.777

编辑：假设关联不是可选的......

我可以让它彻底验证的唯一方法是：

```
validates_associated :project
validates_presence_of :project_id, 
    :unless => Proc.new {|o| o.project.try(:new_record?)}
validates_presence_of :project, :if => Proc.new {|o| o.project_id} 
```

第一行验证关联的项目是否有效，如果有的话。第二行坚持`project_id`存在，除非关联的项目存在并且是新的（如果它是新记录，它还没有 ID）。第三行确保如果存在 ID，即如果关联的项目已经保存，则项目存在。

`project_id`如果您将保存的项目分配给 ，ActiveRecord 将分配给任务`project`。如果您将未保存/新项目分配给`project`，它将`project_id`留空。因此，我们希望确保它`project_id`存在，但仅在处理已保存的项目时；这是在上面的第二行中完成的。

反之，如果你给`project_id`代表一个真实项目的数字分配一个数字，ActiveRecord 将填充`project`相应的项目对象。但是，如果您分配的 ID 是伪造的，它将保留`project`为 nil。因此上面的第三行，确保我们有一个`project`if`project_id`被填写——如果你提供一个虚假的 ID，这将失败。

请参阅测试这些验证的 RSpec 示例：[https ://gist.github.com/kianw/5085085](https://gist.github.com/kianw/5085085)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-06-13T14:18:43.467

Joshua Muheim 的解决方案有效，但我讨厌不能简单地将项目链接到具有如下 ID 的任务：

```
t = Task.new
t.project_id = 123 # Won't verify if it's valid or not. 
```

所以我想出了这个：

```
class Task < ActiveRecord:Base

    belongs_to :project

    validates :project_id, :presence => true
    validate :project_exists

    private
    def project_exists
        # Validation will pass if the project exists
        valid = Project.exists?(self.project_id)
        self.errors.add(:project, "doesn't exist.") unless valid
    end

end 
```

# concurrency - Glassfish-3.1.2 - 我可以将 EntityManger 注入到无状态 bean 中吗

> ID：11327391
> 
> 赞同：0
> 
> 时间：2012-07-04T10:36:55.673
> 
> 标签：concurrency, glassfish, stateless

我在下面看到了这个博客，关于 Servlet 和将 EJB 注入其中。作者是从标准的角度写作的。

[http://tamanmohamed.blogspot.ie/2012/03/jpa-why-we-need-to-specifies-type-level.html](http://tamanmohamed.blogspot.ie/2012/03/jpa-why-we-need-to-specifies-type-level.html) http://tamanmohamed.blogspot.ie/2012/03/jpa-thread-safety -when-injecting.html

“将 EJB 3 有状态 bean 注入 servlet 实例字段不是线程安全的。同理，将带有 @PersistenceContext 的 EntityManager 注入 servlet 实例变量也不是线程安全的。EntityManager 的设计初衷不是线程安全的。”

无论如何，我开始担心我与同事在 Glassfish-3.1.2 实现中编写的代码。见下文。我认为它类似于我在 Duke 辅导教程中看到的代码，所以应该没问题（FaceServlets 使用 @PersistnceContext EntityManager 调用无状态请求 bean。）

但是我想我假设容器管理的 EntityManager 能够处理由许多 servlet 实例调用的无状态 bean 的大量并发调用。

这是对带有 Oracle 数据库的 Glassfish-3.1.2 的正确假设吗？到目前为止，它似乎工作得很好，但也许它不会承受重载。

提前感谢您的任何见解。对不起，我对这个很陌生。菲奥娜

```
Servlet
{
@EJB
private StatelessbeanBlah
:
}

@Stateless
StatelessBeanBlah
{
@PersistenceContext(unitname = "...")
private EntityManager em; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T12:41:46.080

您的问题有些混乱，因为 EntityManager 实例的线程安全性取决于您使用的是`Container-Managed Entity Managers`还是`Application-Managed Entity Managers`. 在第一种情况下，

> EntityManager 实例的持久性上下文由容器自动传播到在单个 Java Transaction API (JTA) 事务中使用 EntityManager 实例的所有应用程序组件。
> 
> ...
> 
> 通过自动传播持久性上下文，应用程序组件不需要将 EntityManager 实例的引用传递给彼此，以便在单个事务中进行更改。Java EE 容器管理容器管理的实体管理器的生命周期。

（参考[管理实体，Java EE 6 教程](http://docs.oracle.com/javaee/6/tutorial/doc/bnbqw.html)）

尝试在您的 persistence.xml 文件中定义一个可识别 JTA 的数据源，看看会发生什么。我并不热衷于将持久化上下文注入到 servlet，因为在开发 Java EE 6 Web 应用程序时有 JSF，并且在大多数情况下您不需要创建自己的 servlet，而且我对这项技术还很陌生， 也。但是，将持久性上下文注入到托管 bean 或企业 bean（如无状态 EJB）中，使用 JTA 感知数据源，绝对没问题并且线程安全。

# google-app-engine - 什么是 Google App Engine 实例？

> ID：11327395
> 
> 赞同：5
> 
> 时间：2012-07-04T10:37:11.867
> 
> 标签：google-app-engine

我正在尝试估算为应用内商店安装 GAE 的每月费用，但我并不真正了解什么是实例以及在一个实例中我能做什么。

我可以只拥有一个具有多个线程的实例来处理多个客户端吗？由于我每天每个应用程序都有 28 小时的免费实例 ( [http://cloud.google.com/pricing/](http://cloud.google.com/pricing/) )，这是否意味着我不会为一直运行的服务器应用程序付费？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T11:18:51.137

实例是虚拟服务器的实例，运行您的代码，能够为客户端提供请求。这通常是并行完成的（Goroutines、Java 线程、2.7 的 Python 线程），以最有效地使用可用资源。

响应时间取决于您在代码中执行的操作，并且通常取决于 IO。如果你有一个串行数据库查找的瀑布，它比你只有一个 multiget 并且可能是一个异步写入需要更长的时间。

与 GAE 的部分交易是 Google 为您处理弹性。如果有大量连接等待，新实例将根据需要启动（直到您的配额用完）。这意味着可能很难预先估计成本，因为您不确切知道代码的效率以及需要多少资源。我推荐一个方案，更多的使用意味着更多的收入，每个请求的收入高于每个请求的成本。:)

您可以调整设置，说您希望请求在队列中等待，或者总是有几个备用实例准备好为新请求提供服务，这将影响您的成本和用户的响应时间。

在 IaaS 场景中，您可以说您将使用 5 个实例，这就是成本，但实际上您可能在当地时间晚上只需要 1 个，而在一天的其余时间需要 25 个，这意味着您的用户很可能会看到连接断开或否则会有负面的用户体验。

免费实例通常能够在开发期间处理测试流量而不会耗尽配额。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T11:01:02.070

那么 AppEngine 可能会决定您需要运行多个实例来处理请求，因此将启动另一个实例。您将无法将其限制为一个正在运行的实例。事实上，有时不清楚为什么 AE 会在请求数似乎很低时启动另一个实例，但如果它决定它需要另一个暖实例来准备好处理请求，如果服务实例太接近它们的限制，它就会这样做。

# c# - 用分号连接字符串数组

> ID：11327397
> 
> 赞同：1
> 
> 时间：2012-07-04T10:37:17.293
> 
> 标签：c#, string

这是一种经常出现在我们框架的一部分中的模式。给定一个字符串数组，我们必须将它们全部连接起来，用分号分隔。

我想知道它可以以哪种优雅的方式完成。我已经在我们的代码库中看到了一些变化，并且总是，当我必须这样做时，我必须重新考虑。

我目前的模式是这样的：

```
String[] values = new String[] {"a","b","c","d"};
String concat = String.Empty;
foreach(String s in values)
{
   if(String.IsEmptyOrNullString(s) == false)
       concat + = ", ";
   concat += s;
} 
```

否定我的是 if 语句，我可以在循环之前插入第一项并从 for 循环开始，从索引 1 开始，但这不会增加可读性。

你有什么建议？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-04T10:40:00.360

您可以使用`string.Join()`：

```
String[] values = new String[] {"a","b","c","d"};
var concat = string.Join(", ", values); 
```

这将导致如下所示：

> A B C D

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T10:41:37.177

尝试：

```
var result = string.Join(",", values.Where(s => !string.IsNullOrEmpty(s))); 
```

# c# - 窗口拖动的动态边距

> ID：11327398
> 
> 赞同：0
> 
> 时间：2012-07-04T10:37:40.830
> 
> 标签：c#, wpf, math, coordinates, parent-child

好的，由于缺乏回复，所以完全重写了问题。我想要一个可拖动的窗口，但在拖动时，更改边距以延伸到窗口的旧位置。即窗口向右移动 X，向左扩展边距 X。现在我遇到了一些障碍，例如窗口由于某种原因被切断了边缘。这是我的代码，如果你能发现任何东西，请告诉我！

```
private void Window_LocationChanged(object sender, EventArgs e)
        {
            double TmpLeft = Math.Abs(this.Left - WinLeft);
            double TmpTop = Math.Abs(this.Top - WinTop);

        if (this.IsLoaded)
        {//depending on whether the window is moved left, right
            if (this.Left > WinLeft)
            {//depending on whether the window is moved up, down
                if (this.Top > WinTop)
                    bdr.Margin = new Thickness(TmpLeft, TmpTop, 0, 0);
                else
                    bdr.Margin = new Thickness(TmpLeft, 0, 0, TmpTop);
            }
            else
            {
                if (this.Top > WinTop)
                    bdr.Margin = new Thickness(0, TmpTop, TmpLeft+ 40, 0);
                else
                    bdr.Margin = new Thickness(0, 0, TmpLeft, TmpTop);
            }
        }
    }

private void Window_Loaded(object sender, RoutedEventArgs e)
        {
            WinLeft = this.Left;
            WinTop = this.Top;
            bdr.Height = this.ActualHeight;//I set these because they are auto
            bdr.Width = this.ActualWidth;  //before the window opens
        } 
```

目前整个窗口（将窗口背景设置为黄色，以便我可以看到边距）正在移动，因为我希望边距的左上角保持在原位。我还注意到，我单击以拖动窗口 (a `border`) 的区域也会四处移动，因此在我移动窗口时不再单击。希望这很清楚，评论任何进一步的问题。

**旧 - 仅阅读以了解我正在尝试做什么**

因此，我正在尝试创建一个具有弹出窗口的应用程序，该窗口带有从子窗口指向父窗口中特定位置的指针/线。我是这样实现的；

```
<Border Name="brdr" Margin="40,0,0,0" >
    //Content
</Border>

<Line
        Name="Pointer"
        X1="0"
        X2="40"
        Y1="55"
        Y2="50"
        StrokeThickness="2"
        Stroke="Black"
></Line> 
```

请注意边框上的 40 左侧`Margin`使窗口比它看起来更大，因此`Polygon`突出到左侧并指向父窗口（如果有更好/更酷/更优雅的方法，我会全力以赴） .

所以这很好，但现在我希望指针是动态的。例如，如果子窗口被拖动，则指针必须相对于父窗口的位置进行缩放。即它必须看起来好像两个窗口通过线路连接。现在我的计划是记录子窗口打开的点（因为它相对于父窗口打开，初始化时是正确的），然后使用这个和新位置点之间的差异（拖动后）找到新点该行应该去。我的代码可能比我以往任何时候都说得更好......

```
 private void Window_LocationChanged(object sender, EventArgs e)
    {
        if (this.IsLoaded)
        {
            brdr.Margin = new Thickness(Math.Abs(this.Left - WinLeft) + 40, Math.Abs(this.Top - WinTop), 0, 0);
            Pointer.X1 = Math.Abs(this.Left - WinLeft);
            Pointer.Y1 = Math.Abs(this.Top - WinTop) + 55;
            Pointer.X2 = Math.Abs(this.Left - WinLeft) + 40;
            Pointer.Y2 = Math.Abs(this.Top - WinTop) + 50;
        }
    }

    private void Window_Loaded(object sender, RoutedEventArgs e)
    {
        WinLeft = this.Left;
        WinTop = this.Top;
    } 
```

如您所见，我必须设置窗口边距，以便它延伸到旧位置。然后我将`Line`坐标重置为新值。正如我所说，所有这些值都是通过将打开窗口坐标与当前坐标进行比较来计算的。

我的问题是，这是不对的。看到有人能够解决这个问题会非常令人印象深刻。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T14:33:56.997

我很惊讶没有代码可以从窗口内坐标切换到屏幕坐标。在我的一个项目中，我必须在控件下方放置一个窗口。我用它来获取控件中间点的屏幕坐标：

```
 Point point = MyControl.PointToScreen(new Point((MyControl.ActualWidth / 2)
                                                          , MyControl.ActualHeight));
    PresentationSource source = PresentationSource.FromVisual(MyControl);
    double dpiX = (96 * source.CompositionTarget.TransformToDevice.M11);
    double dpiY = (96 * source.CompositionTarget.TransformToDevice.M22);
    XInScreenCoordinates = ((point.X * 96 / dpiX));
    YInScreenCoordinates = ((point.Y * 96 / dpiY)); 
```

如果我不这样做，则会出现放置错误，越向右错误越多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T07:51:37.520

实际上找到了这样做的好方法。我所做的是我设置了子窗口，`WindowState="Maximized"`然后将除 a 之外的所有内容都放置`Line`在 a 中`Canvas`，然后按照[http://denismorozov.blogspot.ie/2008/01/drag-controls-in-wpf-using.html](http://denismorozov.blogspot.ie/2008/01/drag-controls-in-wpf-using.html)（很棒的文章）我可以让我可以在我的窗户周围移动。我已经硬编码了这条线，这样当窗口打开时它就在正确的位置。由于其中一个点`Line`不应该移动，因此只需`Canvas_MouseMove`像这样更新事件中的另一个点即可；

```
Point p = border.TransformToAncestor(this).Transform(new Point(0, 0));
Line.X2 = p.X;
Line.Y2 = p.Y + 50; 
```

如果您想要一条连接两者的线，那么让您的窗口相对于父窗口显示的非常简单的方法。它给出了移动窗口的外观，但实际上是在最大化的透明窗口周围移动控件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T15:35:36.313

好的，我做了一个小应用程序：
有 MainWindow，内容非常简单的主窗口，一行和一个按钮：

```
<Grid>
    <Line x:Name="MyLine"  Stroke="Black" StrokeThickness="4" />
    <Button Name="MyButton"                Margin="248,101,0,0"
            HorizontalAlignment="Left"   VerticalAlignment="Top"
            Content="Button" />
</Grid> 
```

然后我做了另一个名为TestWindow的小尺寸（300 * 300）窗口。TestWindow 没有任何内容或代码。

MainWindow 背后的代码：

```
public partial class MainWindow : Window
{
    public TestWindow MyTestWindow;

    public MainWindow()
    {
        InitializeComponent();
        MyTestWindow = new TestWindow();
        MyTestWindow.Show();

        MyTestWindow.LocationChanged += new EventHandler(WinLocationChanged);
        MyTestWindow.SizeChanged += new SizeChangedEventHandler    (   WinSizeChanged);
        this.LocationChanged += new EventHandler(WinLocationChanged);
        this.SizeChanged += new SizeChangedEventHandler(WinSizeChanged);
    }

    void WinSizeChanged(object sender,  SizeChangedEventArgs e)  {
         UpdateLine();         }

    void WinLocationChanged(object sender, EventArgs e)        {            
         UpdateLine();         }

    void UpdateLine()
    {
        // 1\. get Window's center in in this window coordinates
        double CX_sc =0.0, CY_sc = 0.0;
          GetWindowCoordinatesInCurrentWindow(MyTestWindow, ref CX_sc, ref CY_sc);
        // 2\. Get Center of target Control coordinates in this window coordinates
        Point CenterButtonPoint = MyButton.TransformToAncestor(this).Transform(new Point(MyButton.ActualWidth / 2.0, MyButton.ActualHeight / 2.0));
        //3\. Change line's coord.
        MyLine.X1 = CX_sc;
        MyLine.Y1 = CY_sc;
        MyLine.X2 = CenterButtonPoint.X;
        MyLine.Y2 = CenterButtonPoint.Y;
    }

    void GetWindowCoordinatesInCurrentWindow(Window ChildWindow, ref double X, ref double Y)
    {
        Point CenterOfChildWindow = ChildWindow.PointToScreen(new Point((ChildWindow.ActualWidth / 2)
                                                    , ChildWindow.ActualHeight/2));
        Point UpperLeftOfCurrentWindow = this.PointToScreen(new Point(0, 0));
          PresentationSource source = PresentationSource.FromVisual(this);
        double dpiX = ( source.CompositionTarget.TransformToDevice.M11);
        double dpiY = (source.CompositionTarget.TransformToDevice.M22);
        X = (( CenterOfChildWindow.X -UpperLeftOfCurrentWindow.X ) /dpiX);
        Y = ( (CenterOfChildWindow.Y-UpperLeftOfCurrentWindow.Y   ) / dpiY );
    }

} 
```

它的作用是，每当一个窗口被移动或调整大小时，它都会在 MainWindow 中画一条线，将 Button 链接到 TestWindow 的中间。

好的好的，我知道这不是您想要的:=)，因为该行不能超出 MainWindow。但是这个想法是有一个透明的弹出窗口，它覆盖了你做同样事情的整个屏幕。

# java - Hibernate 中的高效删除

> ID：11327401
> 
> 赞同：0
> 
> 时间：2012-07-04T10:37:56.673
> 
> 标签：java, mysql, database, hibernate

我知道以下代码将从数据库中删除 id = 5 的记录：

```
 Query query = session.createQuery("delete from Class where id = 5");
 query.executeUpdate(); 
```

但在我删除它之前，需要将此记录的数据保存在一个变量中。所以我想选择id = 5，经过一些代码，我将其删除。如果我对它们使用两个不同的查询，那效率不高。因为这样我们在数据库中搜索该项目两次。

```
query = session.createQuery("from Class where id = 5");
//somecode
query = session.createQuery("delete Class where id = 5");
... 
```

所以我需要一种更有效的方法来做到这一点，并且做得更好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T10:42:36.567

无需创建查询即可删除记录。

```
query = session.createQuery("from Class where id = 5");
List list=query.list();
if(list.size()!=0)
 {
   ClassName obj = (ClassName)list.get(0);
   session.delete(obj);
  } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-04T10:44:03.260

Hibernate 有一个`Session.delete()`方法。如果您已经引用了要删除的实体，请使用它。无需查询。

这也将应用在关联上配置的潜在级联，而删除查询则不会。

# linux - 如何使用 shell 创建包文件夹？

> ID：11327402
> 
> 赞同：0
> 
> 时间：2012-07-04T10:38:00.777
> 
> 标签：linux, shell

我有这样的事情：

```
package="com.program.interesting.program.aplication" 
```

我想要一个脚本来创建这样的文件夹：

```
midir com
cd com/
mkdir program
cd program/
...
etc 
```

但我想自动执行此操作，无论我有多少文件夹。我想这很简单，但我不知道如何在 shell 上解析字符串，也不想看书，只是为了解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T10:40:11.590

您只需要转换`.`为`/`，仅此而已：

```
mkdir -p "$(echo $package | tr . /)" 
```

`-p`关键意味着`mkdir`需要自动创建所有必要的父目录。

如果可能包含空格，请`""`在命令替换周围使用。`$()``$package`

该`tr`命令`.`将字符串中的符号更改为斜线。

**例如**

```
$ echo com.program.interesting.program.aplication |tr . /
com/program/interesting/program/aplication 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T10:40:21.613

```
mkdir -p com/program/interesting/program/aplication 
```

# c# - 在不引用函数名的情况下递归到函数中

> ID：11327403
> 
> 赞同：0
> 
> 时间：2012-07-04T10:38:05.017
> 
> 标签：c#, multithreading, invoke

我有许多从后台线程调用的函数，但随后需要执行 GUI 操作。因此，在每个函数中，我将上下文切换到 GUI 线程。但是我想知道我的代码是否可以改进？

这是我的代码现在通常看起来的简化示例：

```
public void FunctionABC(string test)
{
  // Make sure we are in the GUI thread.
  if (!this.Dispatcher.CheckAccess()) 
  {
    this.Dispatcher.Invoke(DispatcherPriority.Normal, new Action(() => FunctionABC(test))); return; 
  }
  // main body of function
} 
```

我遇到的主要问题是必须在上下文切换中明确提及我自己的函数名称（我部分不喜欢这个，因为我在复制和粘贴代码时总是忘记更改名称！）

关于切换上下文的更通用方式的任何想法，例如，是否有任何方法可以通过一些避免显式命名函数的巧妙指针回调我自己的函数？

像这个片段这样的东西会很好（但是它不会构建）：

```
 this.Dispatcher.Invoke(DispatcherPriority.Normal, new Action(() => this(test))); return; 
```

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T10:45:42.047

将调度代码拉到一个单独的方法中怎么样？

```
public void Dispatch(Action action)
{
    if (!this.Dispatcher.CheckAccess()) 
    {
        this.Dispatcher.Invoke(DispatcherPriority.Normal, action);
    }
    else
    {
        action();
    }
} 
```

和：

```
Dispatch(() => FunctionABC(test)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T10:45:47.090

您可以采用这种可重用的方法：

```
private void ExecuteOnDispatcherThread(Action action)
{
    if (!this.Dispatcher.CheckAccess()) {
        this.Dispatcher.Invoke(DispatcherPriority.Normal, action); 
    }
    else {
        action();
    }
} 
```

并像这样调用它：

```
this.ExecuteOnDispatcherThread(() => FunctionABC(test)); 
```

# exception - 派生自异常类警告：CA2237：使用 SerializableAttribute 标记 ISerializable 类型

> ID：11327404
> 
> 赞同：11
> 
> 时间：2012-07-04T10:38:06.153
> 
> 标签：exception, code-analysis, compiler-warnings, .net

我从各种异常中派生了几个类。现在 VS 在这个问题的标题中给出警告。

1.  有人能解释一下禁止这条规则的含义吗？

2.  您能否从[此处](http://msdn.microsoft.com/query/dev11.query?appId=Dev11IDEF1&l=EN-US&k=k(CA2237)&rd=true)解释规则说*“不要禁止此规则中针对异常类的警告，因为它们必须可序列化才能在应用程序域中正常工作。”* ?

PS好吧，我自己有一个答案。您确实必须将异常标记为可序列化。在同一个 AppDomain 中，如果没有此属性，它们可以正常工作。但是，如果您尝试从其他域捕获它，则必须对其进行序列化才能跨越应用程序边界。这就是我发现这个的主要原因。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-04T14:35:57.730

这不完全是 Visual Studio 警告，它是 FxCop 工具产生的警告。您可以从 VS 分析菜单运行它。FxCop 是一种静态分析器，用于查找编译器不会标记的 .NET 程序中的常见问题。它的大多数警告都非常晦涩难懂，很少是真正严重的问题，您需要将其视为“您想过这个吗？” 一种工具。

它试图在这里提醒您的一个小事实是 Exception 类实现了 ISerializable 并具有 [Serializable] 属性。这是一个非常硬的要求，它使基本 Exception 对象可以跨应用程序域序列化。必要的，因为 Exception 不是从 MarshalByRefObject 派生的。并且有必要允许您在另一个应用程序域中运行的代码抛出您可以捕获的异常。

所以 FxCop 指出，您没有对自己的 Exception 派生类做同样的事情。如果您打算让引发异常的代码在另一个应用程序域中运行，这实际上只是一个问题。FxCop 不够聪明，无法知道您是否这样做，它只能提醒您，当您这样做时它会出错。这是非常罕见的，所以当你还不知道你是否会或者这对你来说听起来是否像中文时，请随意忽略警告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T10:43:01.143

如果您不打算在应用程序中使用多个 AppDomain，我认为您可以忽略它或抑制它。

# css - CSS 绝对定位困境

> ID：11327405
> 
> 赞同：0
> 
> 时间：2012-07-04T10:38:12.957
> 
> 标签：css, positioning

我对 CSS 非常有经验，但这让我感到困惑 - 如果它是一个简单的修复程序，我深表歉意。

我正在尝试为具有多个字段集的 Drupal 网络表单设置主题。这个想法是将字段集堆叠在一起。相对和绝对定位的一个相当简单的 CSS 问题 - 但是当包含的 div 折叠而不是保持它的形状时，它会变得非常错误。

我将字段集的设置`background-color`为绿色。包含边框有一个红色边框并且是相对定位的。

当字段集被绝对定位时，它们会像我预期的那样堆叠，但包含的 DIV 会崩溃并影响其他站点样式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T11:11:11.907

也许只是使用css在包含的div上放置一个高度？

或者使用一些 javascript 来获取最高字段集的高度并使包含 div 的高度？

或者从第一个字段集开始动态地执行每个字段集，然后当您移动到另一个字段集时，javascript 获取它的高度并将容器 div 设置为该高度等等。

# db2 - 通过查询创建 DB2 登录用户

> ID：11327406
> 
> 赞同：0
> 
> 时间：2012-07-04T10:38:16.530
> 
> 标签：db2

谁能告诉我在 DB2_9.5 中创建 LOGIN USER 的查询，我想通过从命令编辑器触发查询来创建它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T13:28:38.477

DB2 使用操作系统用户（或 LDAP 等）进行登录。这是[信息中心](http://publib.boulder.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.db2.luw.admin.sec.doc/doc/c0006306.html)的报价：

> 用户的认证是使用 DB2® 数据库系统之外的安全设施完成的。安全设施可以是操作系统的一部分，也可以是单独的产品。

在 DB2 中，数据库不处理用户帐户（IE，没有等效于 SQL Server 的[“SQL Server 身份验证模式”](http://msdn.microsoft.com/en-us/library/ms144284.aspx)）。

# android - 在editext中的用户输入文本有效之前，警告对话框不得关闭

> ID：11327407
> 
> 赞同：0
> 
> 时间：2012-07-04T10:38:33.783
> 
> 标签：android, android-edittext, android-alertdialog

我正在制作一个带有编辑文本的警报对话框。我希望它一直在屏幕上，直到用户在其中输入他的电子邮件。我怎样才能做到这一点？？我的代码如下：

```
final AlertDialog.Builder alert= new AlertDialog.Builder(this);
    alert.setMessage("Enter Email:");
    final EditText userid = new EditText(this);
    alert.setView(userid);
    userid.setInputType(InputType.TYPE_TEXT_VARIATION_EMAIL_ADDRESS);
    alert.setPositiveButton("Ok", new DialogInterface.OnClickListener() {

        public void onClick(DialogInterface dialog, int which) {
            if (userid.getText().toString().length()>0){
                userId = userid.getText().toString();               
                result();
            }else{

                Toast.makeText(getApplicationContext(), "Enter your email for future reference.", Toast.LENGTH_SHORT).show();
            }
        }
    });
    alert.show(); 
```

通过单击任何按钮，对话框将关闭。请告诉我如何在屏幕上保留 dailog 直到我需要它。提前谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T10:42:37.080

试试这个，

```
final AlertDialog.Builder alert= new AlertDialog.Builder(this);
    alert.setMessage("Enter Email:");
    final EditText userid = new EditText(this);
    alert.setView(userid);
    alert.setCancelable(false);
    userid.setInputType(InputType.TYPE_TEXT_VARIATION_EMAIL_ADDRESS);
    alert.setPositiveButton("Ok", new DialogInterface.OnClickListener() {

        public void onClick(DialogInterface dialog, int which) {
            if (userid.getText().toString().length()>0){
                userId = userid.getText().toString();               
                result();
                dialog.dismiss();
            }else{

                Toast.makeText(getApplicationContext(), "Enter your email for future reference.", Toast.LENGTH_SHORT).show();
            }
        }
    });
    alert.show(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T10:44:00.920

做这样的事情...

```
boolean flagEmail = false;
Pattern pattern = Pattern.compile(EMAIL_PATTERN);
            if (validate(email.getText().toString().trim())) 
            {
                flagEmail = true;
            } 
```

调用验证函数

```
public boolean validate(String emailId) {
    matcher = pattern.matcher(emailId);
    return matcher.matches();
} 
```

在您的条件中，如果`flagEmail = true;`然后让对话框按钮取消，否则会收到一条 Toast 消息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T10:44:13.260

您只需设置它，以便您的对话框不可取消：

```
alert.setCancelable(false); 
```

然后，如果用户在没有输入数据的情况下按下 OK 按钮，您可以执行以下操作：

```
alert.setOnDismissListener(new DialogInterface.OnDismissListener() { 
    public void onDismiss( DialogInterface dialog) { 
        //If userid get text not greater than 0
        //then reshow the alertdialog with alert.show();
    }
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-04T10:47:07.923

`alert.setCancelable(false);`和使用`TextUtils.isBlank(email)`

```
String email  = userid.getText().toString().trim();

if(!(TextUtils.isBlank(email))){//check here

}else{
        Toast.makeText(getApplicationContext(), "Enter your email for future reference.",                    
        Toast.LENGTH_SHORT).show();
        } 
```

# php - php从mysql结果创建链接

> ID：11327409
> 
> 赞同：0
> 
> 时间：2012-07-04T10:38:38.177
> 
> 标签：php, mysql, echo

我怎样才能使 $row['Fname'] 成为一个链接，当我单击它时，将我重定向到一个新页面，其中包含有关我单击的此条目的更多信息？

这是代码：

```
echo '<ol>'; 
while ($row = mysql_fetch_array($sql)){

echo '<li>';
echo '<img src="'.$row['Bio']. '" alt="" width="110" height="110">';
echo '  <dl>';
echo '  <dt>Name</dt>';
echo '  <dd>'.$row['Fname'].'</dd>';
echo '  <dt>Genre</dt>';
echo '  <dd>'.$row['Genre'].'</dd>';
echo '  <dt>Speciality</dt>';
echo '  <dd>'.$row['Specialty'].'</dd>';
echo ' </dl>';
echo '</li>';

}
echo '</ol>'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T10:50:37.183

只需使用

```
<dd><a href=pageyouwant.php?fname="'.$row['Fname'].'">'.$row['Fname'].'</a></dd> 
```

然后在 pageyouwant.php 中使用`$_GET['fname']`

pageyouwan.php

```
$fname = $_GET['fname'];

$sql = "SELECT * FROM table WHERE fname LIKE '%$fname%'"; 
```

在 php 中使用它，您可以获得有关 fname 的所有信息 :)

然后你就准备好了:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T10:41:38.510

使用这一行：

```
echo '  <dd><a href="'.$row['id'].'">'.$row['Fname'].'</a></dd>'; 
```

# c# - 用户定义的表单创建

> ID：11327417
> 
> 赞同：0
> 
> 时间：2012-07-04T10:39:09.550
> 
> 标签：c#, asp.net

我需要为表单创建动态字段。在网上和这里搜索并找到[了这个设计指南](https://stackoverflow.com/questions/792278/dynamic-form-generation-in-asp-net)，但它没有满足我的一些要求。我不需要确切的代码，但需要一般准则。

**用户**将拥有带有他可以添加的**属性的下拉列表。**每个**属性**分为两部分。第一部分供**用户**用于**SearchCombination**（**属性**组合），其他部分供**客户**使用。

IE。**用户**在 DropDownList 中选择**Age ，这应该在****SearchCombination页面上生成****AgeFrom/AgeTo** DropdownLists，在**Customer**页面上生成Day/Month/Year DropDownLists 。

 ****我该如何解决这个问题？同样，除非您愿意，否则我只需要指南，不需要真正的代码，所以请不要提出“您尝试过什么”的建议，这是设计问题。

**我看到的唯一解决方案是遵循上面的解决方案，而 SearchCombination 和 Costumer 控制组将是同一张桌子上的 UserControls**

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T10:52:16.050

这是一个很小的简单版本，希望这可以指导您正确的方向

```
 if(DropDownList.SelectedValue == "age")
    {
       DropDownList listFromAge = new DropDownList();
       listFromAge.DataSource = myAgeDataSource;
       Controls.Add(listFromAge);

       DropDownList listToAge = new DropDownList();
       listToAge.DataSource = myAgeDataSource;
       Controls.Add(listToAge);

    } 
```****

# sql-server - SQL Server 2008 时区转换

> ID：11327421
> 
> 赞同：4
> 
> 时间：2012-07-04T09:32:14.907
> 
> 标签：sql-server, timezone

在我的 Web 应用程序中，所有日期值在传递到 SQL 数据库之前都转换为 UTC，然后在应用程序中显示时转换回本地时间。所以底线是数据库中的所有日期都是UTC。

在我开始报告开发之前，它工作得很好。Crystal Reports 没有能力（我可以检测到）进行时区转换，因此我需要在 SQL 中进行转换，然后再将值传递给报表。

SQL Server 似乎具有更有限的转换日期时间值的能力。我看到的唯一功能是 SWITCHOFFSET。这个功能的问题是它不知道夏令时，这似乎是一个主要缺陷。在 asp.net 中，我可以传递带有时区的 datetime 值，它会自动将其转换为 UTC 时间，同时考虑到任何需要的夏令时调整。

虽然在 SQL 中，而不是说类似

```
SWITCHOFFSET (SomeDate,"Eastern Time"), 
```

我现在不得不说

```
SWITCHOFFSET(SomeDate, "-4:00"). 
```

但是，如果我从表中提取数据并要求提供夏时制开始的 3 月的所有数据，会发生什么情况？无论如何，其中一些是不正确的。我可以说 -4:00 或 -5:00，但显然不能同时说两者。

是否有其他功能可以对此进行调整，坦率地说，如果 SWITCHOFFSET 不知道如何进行夏令时转换，它似乎是半生不熟的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T09:49:28.373

我能想到的唯一方法是：

*   使用 C# 集成为此创建一个方法；）感谢天堂，您可以退回到该方法。

*   使用 VIEWS 针对它们运行报告。无论如何总是一个好主意，因为它将报告（在您的直接控制之外）与数据库模式分离，这是一个实现细节。我通常有一个报告模式，其中包含报告的所有视图作为另一个记录的 API。

最后但同样重要的是，您可以尝试摆脱 SQL Access 并使用 OData API，但这是一些工作。

无论如何，视图可以使用您编写的方法来转换时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T12:49:27.577

对于那些使用 SSRS Reports 的人，您可能能够检测到 SSRS 中的时区。有关更多信息，请参阅此处的帖子。

[在 SSRS 中使用时区](https://stackoverflow.com/questions/2969689/working-with-time-zones-in-ssrs)

# eclipse - 在 Eclipse 中，此平台上不可用的 Boost 线程编译错误

> ID：11327426
> 
> 赞同：2
> 
> 时间：2012-07-04T10:39:33.690
> 
> 标签：eclipse, boost, boost-thread

我正在编写一个必须使用库 boost/thread 的程序。我在我的 os X lion 上安装了带有 macports 的库。我在eclipse下的项目中包含库，然后编译我的程序。我有这个错误 Boost threads 在这个平台上不可用。在一篇文章中，我读到我必须在 GCC C++ -> Miscellaneous -> other flags 下使用 -pthread 标志，但我有同样的错误。任何想法？谢谢

# java - Pentaho 社区版目录结构、插件集成和 MySQL 连接

> ID：11327427
> 
> 赞同：0
> 
> 时间：2012-07-04T10:39:36.277
> 
> 标签：java, mysql, pentaho

我正在 Windows 环境中开发 Pentaho Community Edition，并从 Sourceforge.net 下载了最新的 Pentaho BI 服务器文件。（文件名 biserver-ce-4.5.0-stable.zip）并将其解压到 C:\Program Files\Pentaho这样我的目录结构就变成了

> C：\
> 
> ```
>  | 
>    -----Program Files  
> 
>          |----------administration-console
> 
>          |----------biserver-ce 
> ```

现在我为运行 PUC 和 PAC 所做的是首先从位于的 bat 文件启动 tomcat

> C:\Program Files\Pentaho\biserver-ce\tomcat\bin\startup.bat

Tomcat启动后，我从文件启动BI服务器

> C:\Program Files\Pentaho\biserver-ce\start-pentaho.bat

最后是管理控制台

> C:\Program Files\Pentaho\administration-console\start-pac.bat

第一个问题是我所做的是否正确。

其次，我在教程中看到管理面板左侧菜单包含主页、管理、状态、配置、实用程序等选项，但在我这边，我在管理控制台中只有两个选项，主页和管理。我如何添加/包含其他选项。

第三个问题是我已经下载`Pentaho Data Integration-CE-4.3.0`并`Pentaho Report Design -CE-3.9.0-GA`归档，但我如何将它们放在当前 Pentaho 目录结构中以访问它们。

第四个问题是如何将 Pentaho BI 服务器连接到本地系统中可通过 MySQL 访问的数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T03:19:36.743

1）这是正确的，但如果您没有为您的用户/休眠配置数据库，它将不会运行

2）他们使用的版本是企业版，你拥有的是社区版

3) 你不必将它们放在你的 Pentaho 目录结构中，因为它们是外部工具。为了使用它们，您必须在`*.xaction`文件中使用它们或将它们发布`KTR/KJB`到`PRPT`BI 服务器。

4) 您需要在本地数据库中运行脚本。脚本位于`biserver-ce/data`

# iphone - 如何在派生类中分配全局 NSInteger 对象

> ID：11327432
> 
> 赞同：0
> 
> 时间：2012-07-04T10:39:56.163
> 
> 标签：iphone, objective-c, ios, delegates

```
//AppDelegate.h
AppDelegate NSInteger myInt;
@property (readwrite, assign) NSInteger myInt;

//AppDelegate.m
@synthesize myInt;

//MyClass.h

AppDelegate *objAppDelegate;

//MyClass.m

objAppDelegate =  (AppDelegate *) [[UIApplication sharedApplication] delegate]; 
```

当我尝试为 myInt 赋值时

```
objAppDelegate.myInt=(NSInteger *)0; // <--- this gives warning: something like incompatible pointer to integer conversion like that 
```

那么，我该如何分配这个变量呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T10:42:59.810

`NSInteger`不是类类型。而且您正试图将其变量用作指针。当您将代码更改为`objAppDelegate.myInt = 0;`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T10:43:27.447

`objAppDelegate.myInt = (NSInteger)0;`

或者

`objAppDelegate.myInt = 0;`

您应该分配给没有指针的 N​​SInteger。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T10:43:57.867

NSInteger 不是一个对象，它是一个 typedef。

```
objAppDelegate.myInt=0; 
```

应该这样做。

# actionscript-3 - ActionScript 向 MATLAB 报告对象坐标

> ID：11327436
> 
> 赞同：0
> 
> 时间：2012-07-04T10:40:01.363
> 
> 标签：actionscript-3, sockets, matlab

我正在运行包含移动对象的 Flash 电影，用于视觉科学实验。我正在使用眼动追踪设备来监控跟随屏幕上的刺激时的眼动。Flash 似乎是控制我的刺激的好选择，因为它允许矢量缩放和平滑刺激运动。

眼动仪使用 MATLAB 运行。我想将对象的坐标从 ActionScript 输出到 MATLAB，以便在我的最终数据输出中，我可以将刺激位置与眼睛位置进行比较。

我知道我可以通过 TCP/IP 从 AS 与 MATLAB 进行通信（尽管实际过程对我来说是陌生的），并且想知道如何提取对象（圆形对象）的 X 和 Y 坐标并将它们发送到 MATLAB？

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T11:06:11.023

我不太了解 MATLAB 以及如何为它编程，但我会给你一个 AS3 方面的例子。如果你想首先使用 TCP/IP 通信，你需要定义一个服务器和一个客户端。ServerSocket 类仅支持 Flash 端的 AIR 应用程序，因此您应该决定是制作 Flash 端的服务器还是客户端。如果您希望它成为服务器，则需要编写如下内容：

```
const IP_ADDRESS:String = "127.0.0.1"; //for local hosting
const PORT:uint = 3444; //basically, you can take any port you want, but higher would be better so that it won't have issues with other programs using ports.

var OurServerSocket:ServerSocket = new ServerSocket();
var ConnectedSocket:Socket;
OurServerSocket.addEventListener(ServerSocketConnectEvent.CONNECT, HandleSocketConnection); //adding listener for socket connections, that we'll handle in our method.
OurServerSocket.bind(PORT, IP_ADRESS); //just binding our socket to the IP and port that we defined 
OurServerSocket.listen();

function HandleSocketConnection(e:ServerSocketConnectEvent):void
{
    ConnectedSocket = e.socket; //just saving connected socket instance
    ConnectedSocket.addEventListener(ProgressEvent.SOCKET_DATA, HandleSocketData); //adding listener to handle any data that comes through our connected socket
    trace("Connected: " + ConnectedSocket.remoteAddress);
}

function HandleSocketData(e:ProgressEvent):void
{
    var socket:Socket = e.target as Socket;
    var bytes:ByteArray = new ByteArray();
    socket.readBytes(bytes,0,0);
    var Data:String = bytes.toString(); //when the data comes in we store it in this string so that you can than manipulate easily
}

//use this function to send data through the connected socket
function WriteToSocket(data:String):void
{
    var dataArray:ByteArray = new ByteArray();
    dataArray.writeMultiByte(data, "utf-8");
    ConnectedSocket.writeBytes(dataArray); 
} 
```

如果您决定 Flash 端的客户端连接到您的服务器，如下所示：

```
var SocketConnection:Socket = new Socket();
SocketConnection.connect(IP_ADDRESS, PORT); 
```

然后，您可以使用相同的写作和阅读方法进行交流。

# facebook - Facebook 选项卡 HTTPS iFrame 滚动问题

> ID：11327437
> 
> 赞同：-3
> 
> 时间：2012-07-04T10:40:02.533
> 
> 标签：facebook, iframe, https, scroll

我有一个应用程序（https://www.facebook.com/claritycomms/app_483675254991438）

使用 http 时它工作正常，但是当移动到 HTTPS 时页面不再向下滚动，它被 iFrame 切断。

我不是编码员 - 我使用 Hype for Mac 构建了这个应用程序 - 该应用程序可以正常运行 3 天，但现在不行:(

任何人都可以帮忙吗

我尝试更改仪表板中的 setsize 参数，但选项甚至没有

帮助！

我有 1300 位想使用该应用程序的粉丝！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T11:27:56.093

这是一个已知问题 - [https://developers.facebook.com/live_status](https://developers.facebook.com/live_status)

取自 - [https://www.facebook.com/feeds/api_status.php](https://www.facebook.com/feeds/api_status.php)

```
{
   "push": {
      "status": "Complete",
      "updated": "2012-07-03T18:50:48-07:00",
      "id": 10156288
   },
   "current": {
      "health": 3,
      "subject": "Issues resizing Page Tab applications",
      "post_time": "2012-07-03T19:19:42-07:00"
   }
} 
```

此问题已得到确认，Facebook 正在处理它。修复程序应该很快就会出来。

# c# - WCF 回调、代理和线程安全

> ID：11327440
> 
> 赞同：5
> 
> 时间：2012-07-04T10:40:11.997
> 
> 标签：c#, .net, multithreading, wcf, thread-safety

给定一个配置为为每个新客户端创建一个新服务实例的 WCF 双工服务 (NetTcpBinding)（请参阅[模式发布-订阅](http://msdn.microsoft.com/en-us/library/ms752254.aspx)），您可以获得每个服务实例的特定回调实例。由于创建了不同的实例，因此可以同时从不同的线程调用属于不同回调的方法。

*   如果多个线程尝试在同一个回调上调用同一个方法会发生什么？
*   如果他们尝试调用不同的方法但调用相同的回调会发生什么？
*   我们应该管理从多个线程对这些方法的并发访问吗？在这两种情况下？

现在考虑与服务通信的客户端：为了确保客户端可以使用服务，您必须实例化一个新代理，并且为了调用服务中定义的方法，您必须调用代理的相应方法.

*   如果多个线程试图在同一个代理实例上调用同一个方法会发生什么？
*   如果他们尝试为同一个代理实例调用不同的方法会发生什么？
*   我们应该管理从多个线程对这些方法的并发访问吗？在这两种情况下？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T18:09:53.027

大多数问题的答案取决于您如何管理服务的并发性。没有明确的答案，因为这取决于您为`ConcurrencyMode`and设置的内容`InstanceContextMode`。WCF 的并发管理将使您能够微调服务的线程行为和性能。[MSDN 上提供了有关并发管理](http://msdn.microsoft.com/en-us/library/orm-9780596521301-02-08.aspx)的冗长而艰巨（但非常详细）的阅读。

`InstanceContextMode`允许您定义应如何实例化您的服务。对于执行大量繁重工作并处理大量调用的服务，一般的想法是使用实`PerCall`​​例化，因为每次都将在服务的单独实例上处理传入的客户端请求。

`ConcurrencyMode`，主要参与者，将允许您定义在给定时间可以访问服务实例的线程数。在`ConcurrencyMode=Single`中，一次只有一个线程可以访问服务实例。这也取决于您是否启用了`SynchronizationConext`，`SynchronizationConext=true`如果您的服务正在回答另一个请求，则客户端调用将排队。因此传入的服务调用将排队，直到前面的调用被首先处理。随着`ConcurrencyMode=Multiple`设置时，允许任意数量的线程访问服务实例，这意味着您的服务可以在线程池中有多少线程（与 CPU 能力直接相关）可用的情况下响应尽可能多的调用。多并发模式的问题在于，您的服务在接收和响应调用的顺序上并不那么可靠，因为默认情况下将不会管理状态，因为`SynchronizationContext`默认情况下将设置为 false。[MSDN 上提供了关于并发模式和线程安全的](http://msdn.microsoft.com/en-us/library/system.servicemodel.concurrencymode.aspx)简短摘要。

这些设置在与`InstanceContext`模式结合使用时会影响您的服务性能，请参阅[这篇非常不错的文章，其中探讨了各种并发模式和实例上下文设置及其对性能的影响](http://www.codeproject.com/Articles/89858/WCF-Concurrency-Single-Multiple-and-Reentrant-and)（尽管结果似乎仅在自托管环境中，可能不太代表您在 IIS 中托管时获得的时间）。

您管理服务并发性的方式将极大地影响其性能。理想情况下，您希望为您的服务提供尽可能多的线程（尝试增加 ThreadPool 的最小线程），并避免传入服务调用排队，只要您的服务有计算资源可供使用。但是过度使用多线程会牺牲状态管理和响应客户端请求的顺序。

# scala - Scala - 包和变量的混合？

> ID：11327458
> 
> 赞同：1
> 
> 时间：2012-07-04T10:41:16.553
> 
> 标签：scala

确实是一件很奇怪的事情。我有以下项目结构：

```
myproject/one/two 
```

在包里面`myproject`我有一个类：

```
abstract class A (two: Buffer[Int]) 
```

然后，在包裹内`one`我有：

```
object B extends A (Buffer[Int](1, 2, 3)) {

  val с = two.map(_ + 1)  // ERROR

} 
```

但是，错误说：

> 对象`map`不是包的成员 `myproject/one/two`

这显然是错误的，因为应该非常清楚我在这里不是指包，而是指局部变量......并且`two`在 in 之后也没有在 context-assist`this.`中`B`显示，但在`A`(Scala-IDE)中显示. 这是一种预期的行为，我做错了什么还是一个错误？

**更新：**

（同时由 Nicolas 建议：D）能够通过指定`two`为`val`（将其公开）来解决名称冲突。起初我没有注意到，但它是私有的，在后继类中不可用。尽管如此，我仍然想知道，Scala 为什么以及如何拿起一个包而不是说该变量不存在或不可访问？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T10:52:13.990

它并不像你想象的那么清楚。如果没有修饰符，则 two 对于抽象类 A class 是私有的`A`。因此，您的声明`a`等同于`abstract class A (private[this] A)`. 这意味着`two`从 object 看不到该字段`B`。一个直接的结果是编译器查看`two`可见的唯一定义`B`：包`two`。

# php - 在文件中传递命令？

> ID：11327465
> 
> 赞同：0
> 
> 时间：2012-07-04T10:41:42.043
> 
> 标签：php, variables, httpserver

我想从我的 php 脚本运行一个可执行文件，命令行中使用的命令是
where，profit 是可执行文件， profit.in 是输入文件。我编写了以下 php 脚本来运行在命令提示符下运行相同的程序

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T11:08:59.220

exec 不会将结果返回给`$profit`，请尝试以下方式：

```
exec('C:/xampp/htdocs/example/profit.exe < profit.in',$results,$status);
if ($status === 0)
{
    var_dump($results);//will be an array
} 
```

还要确保参数文件的路径正确，如果它不是由脚本生成的，最好使用绝对路径。

*笔记*
由于您的`exec`电话让我相信您正在使用 Windows 框，因此路径分隔符是一个**反斜杠**，您也应该转义：

```
exec('C:\\xampp\\htdocs\\example\\profit.exe < profit.in',$results,$status); 
```

是它应该是什么样子，imo。

刚刚想到第二个可能的问题：您在 Windows 机器上使用 xampp。如果您从命令行运行此脚本，请确保您使用的是正确的 exe: `php-cli.exe`，而不是`php.exe`:

# android - 创建和使用类似 android 4.0.4 呼叫屏幕的屏幕

> ID：11327469
> 
> 赞同：0
> 
> 时间：2012-07-04T10:41:54.453
> 
> 标签：android, android-layout

我想重用 android 4.0.4 通话屏幕。但我无法访问他们正在使用的一些小部件类。任何人都可以建议我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T10:52:00.137

Android 的源代码可用；没有什么能阻止您下载它，获取您感兴趣的小部件的源代码，并将该源代码（以及它需要的任何资源）包含在您的项目中。自 Android 推出以来，人们一直在这样做。

# database - “没有更多数据可以从套接字读取”异常 Tomcat DBCP

> ID：11327472
> 
> 赞同：2
> 
> 时间：2012-07-04T10:42:12.160
> 
> 标签：database, tomcat, oracle10g, connection-pooling, apache-commons-dbcp

我在 Oracle 10g 中使用 tomcat 的 DBCP。成功使用连接后，经过一段时间后，没有更多可用连接。我收到此异常

**没有更多数据可以从套接字读取**

下次重试时会发生此异常：

**OALL8 处于不一致状态**

下次重试时会发生此异常：

**Io 异常：软件导致连接中止：套接字写入错误**

之后发生此异常：

**封闭连接**

我的问题是这些异常的原因是什么？它们是由于 DBCP 或 Oracle 数据库中的一些错误导致的问题。

我正在使用 Tomcat 6、jdk 1.7、Oracle 10.2

# c - gdb如何检查二维数组元素

> ID：11327475
> 
> 赞同：2
> 
> 时间：2012-07-04T10:42:14.577
> 
> 标签：c, linux, debugging, gdb, multidimensional-array

我很高兴在 GDB 中进行调试，然后我遇到了一个可能包含错误值的二维数组。但是我似乎无法打印单个元素。

```
p array2D[0][0] 
```

给我

> 无法对不完整类型执行指针数学运算，尝试强制转换为已知类型或 void *。

我试图用谷歌搜索，但我找不到任何东西，我不确定我是否遗漏了一些明显的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T11:09:00.353

`p arr[0][0]`为我工作我的测试代码：

```
#include<stdio.h>
int main()
{
  int a[3][3];
  a[0][0]=1;
  a[0][1]=2;
  return 0;
} 
```

在 gdb 上：

```
(gdb) b test.c:6
Breakpoint 1 at 0x400473: file test.c, line 6.
(gdb) r
Starting program: a.out

Breakpoint 1, main () at test.c:6
6       a[0][1]=2;
(gdb) p a[0][0]
$1 = 1
(gdb) ptype a
type = int [3][3] 
```

所以这不是`p arr[0][0]`问题所在，而是其他问题。

# c# - CA1004 和异常/错误处理帮助

> ID：11327477
> 
> 赞同：2
> 
> 时间：2012-07-04T10:42:17.590
> 
> 标签：c#, generics, exception-handling, code-analysis

[CA1004：泛型方法应提供类型参数](http://msdn.microsoft.com/en-us/library/ms182150)

```
public static void IfNullAndNullsAreIllegalThenThrow<T>(object value)
{
    if (value == null && !(default(T) == null))
        throw new ArgumentException("Nulls are not allowed for this object.");
} 
```

我在网上找到了这个方法，说实话非常有用。但是，它违反了 CA1004 规则。我不确定是否有更好的方法来设计方法并且不违反规则。

* * *

示例用法：

```
public class SomeClass<T>
{
    public void SomeMethod(object obj)
    {
        // Ensure the actual object is not null if it shouldn't be.
        ThrowHelper.IfNullAndNullsAreIllegalThenThrow<T>(obj);

        // ...
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T10:48:33.053

`CA1004`警告您无法从方法的签名中推断出泛型类型参数。基本上，这意味着你只能这样称呼它：

```
Something obj = GetSomething();
IfNullAndNullsAreIllegalThenThrow<Something>(obj); 
```

另一方面，如果您重新定义方法，使其参数为 type `T`，则可以从传递的对象中推断出泛型类型参数：

```
public static void IfNullAndNullsAreIllegalThenThrow<T>(T value)
{
    if (value == null && !(default(T) == null))
        throw new ArgumentException("Nulls are not allowed for this object.");
} 
```

所以你可以简单地写：

```
Something obj = GetSomething();
IfNullAndNullsAreIllegalThenThrow(obj); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T11:03:44.630

这看起来像一个仅在内部使用的辅助方法。`internal`代替它`public`，警告应该消失。

# javascript - 验证链接的正则表达式

> ID：11327478
> 
> 赞同：1
> 
> 时间：2012-07-04T10:42:18.487
> 
> 标签：javascript, regex

我想验证我的输入框的 7 个首字母，我的代码不起作用。

```
<input type="text" value="www.example.com" id="txt_url"  
 onkeyup="if(!this.value.match(/^http\:\/\//) && (txt_url.lenght >= 7 )this.value='http://'+this.value" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T10:44:53.323

该代码不起作用的三个原因：

1.  `lenght`应该是`length`。
2.  `txt_url.length`应该是`this.value.length`。
3.  您在条件`)`结束时缺少关闭`if`。

工作版本：

```
<input type="text" value="www.example.com" id="txt_url"  
 onkeyup="if(!this.value.match(/^http\:\/\//) && (this.value.length >= 7))this.value='http://'+this.value" /> 
```

演示：http: [//jsfiddle.net/J5Uxt/](http://jsfiddle.net/J5Uxt/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T10:45:50.093

您使用的函数中存在拼写错误。(txt_url.lenght)。

我相信它应该是 txt_url.length。此外，如果您想验证 url，网上有更好的正则表达式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T11:20:46.393

您更正的代码是

```
<input type="text" value="www.example.com" id="txt_url"
onkeyup="if(this.value.match(/^http\:\/\//)==null 
&& this.value.length>7)this.value='http://'+this.value;" /> 
```

但是，如果您想自动为 ab.com 等较短的域名添加 http:// 前缀，那么您可以使用

```
<input type="text" value="www.example.com" id="txt_url"
onkeyup="if(this.value.match(/^h(t(t(p(\:(\/(\/)?)?)?)?)?)?/)==null)
this.value='http://'+this.value;" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T10:49:09.673

*   避免内联（DOM 零）事件并集中处理此类事情
*   你有一个错字`lenght`。
*   您是否确定要在键入时执行此操作，而不是在模糊或表单提交时执行此操作？如果您每次按下键时都修改字段值，这肯定会让用户感到烦恼

下面假设模糊，但您可以将事件更改为您想要的任何内容：

**jQuery：**

```
$(function() {
    $('#text_url').on('blur', function() {
        if (!/https?:\/\//.test($(this).val()))
            $(this).val('http://'+$(this).val());
    });
}); 
```

**原生 JS：**

```
document.addEventListener('DOMContentLoaded', function() {
    document.querySelector('#text_url').addEventListener('blur', function() {
        if (!/https?:\/\//.test(this.value))
            this.value = 'http://'+this.value;
    }, false);
}, false); 
```

# tridion - 如何在 Tridion 组件上设置 IsPublishedTo 状态？

> ID：11327484
> 
> 赞同：4
> 
> 时间：2012-07-04T10:42:45.320
> 
> 标签：tridion

从另一个环境恢复 Tridion CMS 数据库后，我们无法从代理中取消发布组件。如果我们发布到代理，那么我们可以取消发布。我们希望将 IsPublishedTo 状态设置为新环境中可用的发布目标。

TOM API 有一个 SetPublishedTo 方法可用于页面和组件模板，但不适用于组件。

如何为组件设置 PublishedStatus？是否可以使用 UpdateXML 或者我们是否需要执行数据库黑魔法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T11:10:10.727

我在命令行工具中使用以下基于 C# 的代码在 SDL Tridion 2009 环境切换后切换我所有项目的 PublishStates（您使用的是什么版本？）：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Tridion.ContentManager.Interop.TDS;
using Tridion.ContentManager.Interop.TDSDefines;
using System.Xml;

namespace SetAllItemsAsUnpublished
{
    /// <summary>
    /// A command line script that can enable/disable users
    /// </summary>
    class Program
    {
        static void Main(string[] args)
        {

            TDSE tdse = new TDSE();
            User currentUser = tdse.User;
            ListRowFilter listRowFilter = tdse.CreateListRowFilter();
            String xpath = "/tcm:ListPublishItems/*/*[local-name()='Page' or local-name()='Component']";
            listRowFilter.SetCondition("Recursive", true);
            listRowFilter.SetCondition("OnlyPublishedPages", true);
            listRowFilter.SetCondition("OnlyPublishedCPs", true);

            //listRowFilter.SetCondition("ItemType", ItemType.ItemTypePage);

            XmlNamespaceManager nsmgr = new XmlNamespaceManager(new NameTable());
            nsmgr.AddNamespace("tcm", "http://www.tridion.com/ContentManager/5.0");

            //Check that the user running the script is an Administrator
            if (currentUser.privileges == TDSPrivileges.TdsPrivilegeSystemAdministrator)
            {
                Publications publications = tdse.GetPublications();
                Console.WriteLine("There are " + publications.Count + " to be processed");
                int i = 0;
                foreach (Publication publication in tdse.GetPublications())
                {
                    ++i;
                    Console.WriteLine(" - Processing " + publication.Title + "(" + i + " of " + publications.Count + ")");
                    foreach( PublicationTarget target in tdse.GetPublicationTargets()){
                        Console.Write("     checking target: " + target.Title);
                        XmlDocument publishedItemsXml = new XmlDocument();
                        try
                        {
                            publishedItemsXml.LoadXml(publication.GetListPublishItems(target.ID, false, false, ListColumnFilter.XMLListID, listRowFilter));
                            foreach (XmlElement publishedItemNode in publishedItemsXml.SelectNodes(xpath, nsmgr))
                            {
                                String uri = publishedItemNode.Attributes["ID"].Value;
                                Console.Write(".");
                                if (publishedItemNode.LocalName == "Page")
                                {
                                    Page page = (Page)tdse.GetObject(uri, EnumOpenMode.OpenModeView, publication, XMLReadFilter.XMLReadAll);
                                    page.SetPublishedTo(target, false, currentUser);
                                    if (page.Info.IsCheckedOut)
                                    {
                                        page.CheckIn(true);
                                    }
                                }
                                else
                                {
                                    foreach (XmlElement ctRenderNode in publishedItemNode.SelectNodes("tcm:RenderWith", nsmgr))
                                    {
                                        String uriCT = ctRenderNode.Attributes["ID"].Value;
                                        ComponentTemplate ct = (ComponentTemplate)tdse.GetObject(uriCT, EnumOpenMode.OpenModeView, publication, XMLReadFilter.XMLReadAll);
                                        ct.SetPublishedTo(uri, target, false, currentUser);
                                        if (ct.Info.IsCheckedOut)
                                        {
                                            ct.CheckIn(true);
                                        }
                                    }                                
                                }
                            }
                            Console.WriteLine();
                        }
                        catch (Exception e)
                        {
                            Console.WriteLine(e.Message);
                        }
                    }
                }
            }
            else
            {
                //Warn when there is a non-admin user running the script
                Console.WriteLine("You must be an SDL Tridion CMS Administrator to run this application");
            }
            Console.WriteLine();
            Console.WriteLine("Done! Hit ENTER key to close");
            Console.ReadLine();
        }
    }
} 
```

所以基本上将 CT 设置为 UnPublished 应该可以满足您的需要，因为组件在技术上并未发布，它是基于该 CT 的组件表示。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-04T13:27:29.267

组件本身永远不会从 Tridion 发布，它们仅作为组件表示（组件 + 组件模板）的一部分发布。

组件模板上的`SetPublishedTo`方法将组件作为参数。因此，通过调用它，您可以将一个组件演示文稿设置为已发布或未发布。

取消发布组件的所有组件表示后，该组件将隐式变为未发布。

# php - PHP 套接字阻塞

> ID：11327494
> 
> 赞同：0
> 
> 时间：2012-07-04T10:43:27.287
> 
> 标签：php, sockets, tcp

基本上，我使用**阻塞**TCP 套接字和`socket_accept()`. 我遇到的问题是，由于明显的原因，由于 I/O 阻塞，在 PHP 能够操作的任何时间都只能有一个到套接字的连接。我对此很好，因为这是我所追求的行为。

但是，如果客户端要打开到我的 PHP 服务器的连接，如果他们只是让套接字保持打开状态并且不发送数据，那么套接字和守护进程将变得无用，因为阻塞 I/O 将不允许新请求。

有没有办法检测一个客户端只是不发送数据（如无传输超时）或类似的东西？我宁愿不使用非阻塞 I/O。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T10:48:49.887

您可以简单地调用[等价](http://www.php.net/manual/en/function.stream-set-timeout.php#100676) [`stream_set_timeout`](http://www.php.net/manual/en/function.stream-set-timeout.php)于使阻塞读取和写入在特定超时后终止：

```
$s = socket_create(AF_INET, SOCK_STREAM, SOL_TCP);
if (!socket_bind($s, '127.0.0.1', 0)) die("bind failed");
if (!socket_listen($s)) die("listen failed");
socket_getsockname($s, $localA, $localPort);
echo 'Listening on ' . $localA . ': ' . $localPort . "\n";

$c = socket_accept($s);

// Warning: Ugly hack ahead.
// This just mitigates the problem somewhat, and doesn't actually solve it
socket_set_option($c, SOL_SOCKET, SO_RCVTIMEO, array('sec'=>2,'usec'=>0));
socket_set_option($c, SOL_SOCKET, SO_SNDTIMEO, array('sec'=>2,'usec'=>0));

$r = socket_read($c, 1024);
echo 'read finished: got ' . var_export($r, true) . "\n"; 
```

请注意，这是一个 hack；恶意攻击者仍然只能每秒发送 1 个字节左右。

与其在这些疯狂的 hack 上花费时间，不如真正切换到非阻塞 IO 或在单独的线程/进程中处理接受的套接字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T11:24:17.763

我曾经使用 Tudor Barbu Thread 类为 Websocket 服务器做一些伪线程......

这是一个要点：[https ://gist.github.com/eda7d47ec4e475af531e](https://gist.github.com/eda7d47ec4e475af531e)

# c++ - Linux 中具有 c++ 后端的 Web 架构的最佳方式？

> ID：11327496
> 
> 赞同：0
> 
> 时间：2012-07-04T10:43:28.463
> 
> 标签：c++, architecture, web

我有渲染 GUI 的 php 前端，
从那里我喜欢在后端使用 c++ 引擎，它使用数据 xml 结构获取用户请求，这个 c++ 引擎负责处理数据并将其存储在数据库或文件中并返回现在对用户的响应
，我的前端是 lighthttpd 工作得很好，在后端我想避免编写 c/c++ 守护程序我喜欢使用业界公认的东西，我使用哪个服务器外壳来托管我的c++后端代码？
还有什么是在 php 和后端服务器之间建立连接的最佳方法？插座？PHP 套接字？

# console-application - 出现错误是检测到 cs0162 无法访问的代码

> ID：11327497
> 
> 赞同：-1
> 
> 时间：2012-07-04T10:43:30.157
> 
> 标签：console-application

```
using System; 
```

使用 System.Collections.Generic；使用 System.Text；

命名空间 ConsoleApplication1 { 类程序 { 静态无效 Main(string[] args) {

```
 }
    decimal ParseDecimal(string number)
    {
        if (number.Equals("0E+3", StringComparison.OrdinalIgnoreCase))
        {
            return 0;
        }

        return decimal.Parse(number, System.Globalization.NumberStyles.Any);
       Console.WriteLine(number);
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T10:45:39.427

此行无法访问：

```
Console.WriteLine(number); 
```

那是因为您是从前一行中的函数返回的。

# playframework-2.0 - Play framework 2.0 中的最大文件上传大小

> ID：11327499
> 
> 赞同：25
> 
> 时间：2012-07-04T10:43:35.530
> 
> 标签：playframework-2.0

**当我在播放框架 2.0**中上传大文件（大于 1 MB）时，我得到

**“413 请求实体太大”错误。**

你能请任何人建议如何摆脱这个吗？

谢谢，

**更新** 我已经通过将它添加到 application.conf 解决了这个问题

#设置最大文件大小

解析器.MultipartFormData.maxLength=10240K

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-06T08:09:20.717

请参阅[http://www.playframework.com/documentation/2.0.x/ScalaBodyParsers](http://www.playframework.com/documentation/2.0.x/ScalaBodyParsers)

或 Java 版本：[http ://www.playframework.com/documentation/2.0.x/JavaBodyParsers](http://www.playframework.com/documentation/2.0.x/JavaBodyParsers)

提炼：

```
// Accept only 10KB of data.
def save = Action(parse.text(maxLength = 1024 * 10)) { request =>
  Ok("Got: " + text)
} 
```

您可以在`application.conf`using中配置它`parsers.text.maxLength`。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-07-31T12:51:15.057

`parse.multipartFormData`并且`parse.temporaryFile`不要把`maxLength`让你像这样增加或减少默认值作为论据`parse.text(maxLength)`。

但您可以`parse.maxLength(maxLength, wrappedBodyParser)`改用：

```
// accepts 10 MB file upload
def save = Action(parse.maxLength(10 * 1024 * 1024, parse.multipartFormData)) { request =>
    request.body match {
        case Left(MaxSizeExceeded(length)) => BadRequest("Your file is too large, we accept just " + length + " bytes!")
        case Right(multipartForm) => {
            /* Handle the POSTed form with files */
            ...
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-11-12T10:33:27.243

对于播放版本 2.4.x：

> 对于在磁盘上缓冲内容的解析器，例如原始解析器或 multipart/form-data，使用**play.http.parser.maxDiskBuffer**属性指定最大内容长度，默认为 10MB。multipart/form-data 解析器还为数据字段的聚合强制执行文本最大长度属性。

[https://www.playframework.com/documentation/2.4.x/ScalaBodyParsers](https://www.playframework.com/documentation/2.4.x/ScalaBodyParsers)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-09-19T11:51:31.127

就我而言，我收到了 AJAX 请求错误（这是一个长文本）。对于这样的请求，您可以设置属性：

**parser.text.maxLength=1024K**

有关播放文档的更多信息：[https ://www.playframework.com/documentation/2.0/JavaBodyParsers](https://www.playframework.com/documentation/2.0/JavaBodyParsers)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-20T07:23:41.567

我正在使用`AnyContent`解析器。`controller`由于配置对我不起作用，我不得不更改代码以遵循

```
 def newQuestion = silhouette.SecuredAction.async(parse.maxLength(1024 * 1024, parse.anyContent)(ActorMaterializer()(ActorSystem("MyApplication")))) { 
    implicit request => {
      println("got request with body:" + request.body)
      val anyBodyErrors: Either[MaxSizeExceeded, AnyContent] = request.body
      anyBodyErrors match {
        case Left(size) => {
          Future {
            EntityTooLarge(Json.toJson(JsonResultError(messagesApi("error.entityTooLarge")(langs.availables(0)))))
          }
        }
        case Right(body) => {

          //val body:AnyContent = request.body
          val jsonBodyOption = body.asJson
}
} 
```

# javascript - jQuery Nested Sortable - 无法移动嵌套的预填充 LI 元素

> ID：11327500
> 
> 赞同：0
> 
> 时间：2012-07-04T10:43:37.353
> 
> 标签：javascript, jquery, jquery-ui, nested-sortable

我正在使用 Manuele J Sarfatti 的nestedSortable 1.3.5：[https ://github.com/mjsarfatti/nestedSortable](https://github.com/mjsarfatti/nestedSortable)

使用它我面临无法移动/拖动预填充子元素的问题。见这里：http: [//jsfiddle.net/gcWQQ/3/](http://jsfiddle.net/gcWQQ/3/)

任何想法，如何解决这个问题？

最好的问候，彼得

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T10:58:26.597

使用这些选项：

```
listType         : 'ol',
items            : 'li',
handle           : '.project-sortHandle',
toleranceElement : 'div' 
```

例如小提琴[http://jsfiddle.net/gcWQQ/4/](http://jsfiddle.net/gcWQQ/4/)

# java - 数据库分布

> ID：11327504
> 
> 赞同：6
> 
> 时间：2012-07-04T10:43:52.617
> 
> 标签：java, database, database-replication

有选择地分发数据的可能性是什么？

我用一个例子来解释我的问题。考虑一个包含所有数据的中央数据库。该数据库位于某个地理位置。

应用程序 A 需要中央数据库中存在的信息**子集。**此外，应用程序 A 可能位于与中央数据库所在的地理位置**不同（并且可能很远）的地理位置。**

因此，我考虑在应用程序 A 的同一位置创建一个新数据库，该数据库将包含中央数据库的信息子集。

哪种技术/产品允许我部署这样的配置？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T10:53:14.887

寻找[数据库复制](https://en.wikipedia.org/wiki/Replication_%28computing%29#Database_replication)。[SQL Server](http://msdn.microsoft.com/en-us/library/ms151198.aspx)肯定可以做到这一点，其他人（[Oracle](http://www.oracle.com/technetwork/database/focus-areas/data-integration/index.html)、[MySQL](https://dev.mysql.com/doc/refman/5.0/en/replication.html)等）也应该拥有它。

这个想法是另一个位置维护一个（子集）副本。更新是增量交换的。处理冲突的方式取决于您的应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T11:56:45.633

大多数主流数据库软件，如 MySql 和 SQL server 都可以完成这项工作，但它不是一个好的模型。随着应用程序（流量和用户）的增长，您不仅会在中央数据库服务器（可能正在为其他应用程序提供服务）上创建负载，而且还会滥用网络带宽在远程数据库之间传输数据和应用服务器。

一个更好的模型是让你的数据靠近应用服务器，而使用远距离的数据库仅用于备份和恢复目的。您可以根据应用程序的需要，使用 FC\IP SAN（或任何其他存储网络架构）作为存储网络模型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T15:33:03.027

您没有解决的一个大问题是应用程序 A 是否需要对数据进行只读访问，或者是否需要进行读写。

阅读需求时想到的直接概念是[sharding](http://en.wikipedia.org/wiki/Shard_%28database_architecture%29)。在 MySQL 中，这可以通过[partitioning](http://dev.mysql.com/doc/refman/5.1/en/partitioning.html)来完成。话虽如此，在您跳入分区之前，请确保您阅读了它们的[优缺点](http://www.mysqlperformanceblog.com/2010/12/11/mysql-partitioning-can-save-you-or-kill-you/)。在某些情况下，如果您的索引选择不当，或者您的分区方案没有经过深思熟虑，分区可能会减慢速度。

如果您的需求是只读的，那么这应该是一个相当简单的解决方案。您可以在主从上下文中使用 MySQL，并在从属环境中使用 App A。如果您需要读写，那么这将变得更加复杂。

根据您的写入需求，您可以将读取拆分到从站，将写入拆分到主站，但这会显着增加代码结构的复杂性（需要处理与多个数据库的多个连接）。这种布局的优点是您不需要复杂的数据库基础设施。

另一方面，您可以保持代码不变，并在 MySQL 中使用 Master-Master 复制。虽然没有得到甲骨文的官方支持，但很多人已经在这方面取得了成功。快速的 Google 搜索会为您找到大量博客、howtos 等列表。请记住，您的代码必须正确编写以支持这一点（例如：您不能对 PK 使用自动增量字段等）。

如果你有现金可以花钱，那么你可以看看一些更商业化的产品。Oracle DB 和 SQL Server 都支持这一点。

您还可以使用基于块的数据复制，例如[DRDB](http://www.drbd.org/) [（和 Mysql DRDB）](http://dev.mysql.com/doc/refman/5.0/en/ha-drbd.html)来处理节点之间的复制，但是您总是会遇到的问题是如果两个节点之间的链接发生故障会发生什么情况。

您将遇到的最大问题是如何在 2 个单独的数据库节点中处理冲突更新。如果您的数据与地理相关，那么这对您来说可能不是问题。

长话短说，这不是一个容易（或廉价）解决的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T19:59:23.320

每当您谈论复制数据库时，在设计阶段解决冲突的可能性非常重要。

在此基础上，SAP 的 Sybase Replication Server 将允许您使用 Sybase 数据库或第 3 方数据库来做到这一点。

在 Sybase 的世界中，这通常被称为企业汇总环境。可能有多个地理上独立的数据库，每个数据库都有一个他们主要控制的数据子集。在总部，有一台服务器在一个存储库中包含所有不同的子集。您可以选择复制整个表，或根据单个行/列中的值进行复制。

这使数据库保持松散一致的状态。交易率、地理隔离和网络固有的延迟将影响更新从一个数据库移动到另一个数据库的速度。如果网络连接暂时中断，Sybase Replication Server 会将事务排队，并在链路恢复后立即发送，但复制系统的可靠性和稳定性会受到网络连接稳定性的影响。

同样，正如其他人所说，它并不便宜，但实施和维护相对简单。

免责声明：我曾在 Sybase 工作过，现在仍然是 SAP 公司家族的一员。

# sql - 列出关系中的表名和列

> ID：11327510
> 
> 赞同：1
> 
> 时间：2012-07-04T10:44:14.827
> 
> 标签：sql, sql-server

我正在尝试获取一些返回以下内容的查询：

```
TableName | ColumnName | IsColumnInRelation | RelatedTable | RelationKind | InsertUpdateSepecification | IsNull | Describtion
-------------------------------------------------------------------------------------------------------------------------------------
  Company |  Personel  |        Yes         |   Employee   |      One     |           Cascade          |  True  | 'company employees'
  Company |     ID     |        No          |   --------   |      ---     |           -------          |  False | 'company pk'
  Company |     Name   |        No          |   --------   |      ---     |           -------          |  False | 'name of company'
  Company |  Country   |        Yes         |   Contries   |      Many    |           No Action        |  False | 'companies placement'
  Company |     .      |         .          |       .      |       .      |              .             |    .   | ''
  Company |     .      |         .          |       .      |       .      |              .             |    .   | ''
  Company |     .      |         .          |       .      |       .      |              .             |    .   | ''
  Company |     .      |         .          |       .      |       .      |              .             |    .   | '' 
```

有人可以帮忙吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T13:11:00.297

这应该给你你正在寻找的东西：

```
SELECT t.name AS [TableName]
    ,c.name AS [ColumnName]
    ,CASE WHEN COALESCE(tr.name, tr2.name) IS NULL THEN 'No' 
        ELSE 'Yes' END AS IsColumnInRelation
    ,COALESCE(tr.name, tr2.name) AS [RelatedTable]
    ,COALESCE(cr.name, cr2.name) AS [RelatedColumn] 
    ,CASE WHEN COALESCE(tr.name, tr2.name) IS NOT NULL THEN
        CASE WHEN i.object_id IS NOT NULL THEN 'One'
        ELSE 'Many' END
     END AS RelationKind
    ,COALESCE(f.update_referential_action_desc, f2.update_referential_action_desc) AS [InsertUpdateAction]
    ,COALESCE(f.delete_referential_action_desc, f2.delete_referential_action_desc) AS [DeleteAction]
    ,c.is_nullable AS [IsNull]
    ,p.value AS Description
FROM sys.columns c
    INNER JOIN sys.tables t
        ON t.object_id= c.object_id

    -- Used for the column description.
    LEFT JOIN sys.extended_properties p 
        ON c.object_id = p.major_id
        AND c.column_id = p.minor_id
        AND p.name = 'MS_Description'

    -- Used to identify if this is a primary key.
    -- If it is, then this is on the "One" side of the relationship.
    LEFT JOIN  sys.index_columns  ic
        ON ic.object_id = c.object_id 
        AND ic.column_id = c.column_id
    LEFT JOIN sys.indexes  i
        ON ic.object_id = i.object_id 
        AND i.is_primary_key = 1

    -- Used to get the tables and columns that relate to this column.
    LEFT JOIN sys.foreign_key_columns AS fc
        ON c.object_id = fc.parent_object_id
        AND c.column_id = fc.parent_column_id
    LEFT JOIN sys.columns cr
        ON cr.object_id = fc.referenced_object_id
        AND cr.column_id = fc.referenced_column_id
    LEFT JOIN sys.tables tr
        ON cr.object_id = tr.object_id

    -- Used to get the update/delete action for the [fc] relationship.
    LEFT JOIN sys.foreign_keys f
        ON f.object_id = fc.constraint_object_id

    -- Used to get the tables and columns that this column relates to.
    LEFT JOIN sys.foreign_key_columns AS fc2
        ON c.object_id = fc2.referenced_object_id
        AND c.column_id = fc2.referenced_column_id
    LEFT JOIN sys.columns cr2
        ON cr2.object_id = fc2.parent_object_id
        AND cr2.column_id = fc2.parent_column_id
    LEFT JOIN sys.tables tr2
        ON cr2.object_id = tr2.object_id

    -- Used to get the update/delete action for the [fc2] relationship.
    LEFT JOIN sys.foreign_keys f2
        ON f2.object_id = fc2.constraint_object_id
ORDER BY t.name, c.name, COALESCE(tr.name, tr2.name), COALESCE(cr.name, cr2.name) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T11:00:00.443

这里有一些可以帮助你的东西。它显示了您数据库上的所有关系：

```
SELECT
K_Table = FK.TABLE_NAME,
FK_Column = CU.COLUMN_NAME,
PK_Table = PK.TABLE_NAME,
PK_Column = PT.COLUMN_NAME,
Constraint_Name = C.CONSTRAINT_NAME
FROM INFORMATION_SCHEMA.REFERENTIAL_CONSTRAINTS C
INNER JOIN INFORMATION_SCHEMA.TABLE_CONSTRAINTS FK ON C.CONSTRAINT_NAME = FK.CONSTRAINT_NAME
INNER JOIN INFORMATION_SCHEMA.TABLE_CONSTRAINTS PK ON C.UNIQUE_CONSTRAINT_NAME = PK.CONSTRAINT_NAME
INNER JOIN INFORMATION_SCHEMA.KEY_COLUMN_USAGE CU ON C.CONSTRAINT_NAME = CU.CONSTRAINT_NAME
INNER JOIN (
SELECT i1.TABLE_NAME, i2.COLUMN_NAME
FROM INFORMATION_SCHEMA.TABLE_CONSTRAINTS i1
INNER JOIN INFORMATION_SCHEMA.KEY_COLUMN_USAGE i2 ON i1.CONSTRAINT_NAME = i2.CONSTRAINT_NAME
WHERE i1.CONSTRAINT_TYPE = 'PRIMARY KEY'
) PT ON PT.TABLE_NAME = PK.TABLE_NAME 
```

# html - HTML 元素中的自定义属性

> ID：11327513
> 
> 赞同：1
> 
> 时间：2012-07-04T10:44:22.030
> 
> 标签：html, custom-attributes

我的问题很简单

我们可以在一个元素中使用多少个自定义属性，例如

```
<input value="1" vcFlag="true" name="example" /> 
```

我使用 vcFlag="true" 作为自定义属性，我可以在这个输入元素中放入多少这样的属性。有没有限制。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T10:47:59.733

可以添加到 HTML 标记的属性数量没有（理论上的）限制：

> 每个 HTML 元素都可以指定任意数量的自定义数据属性，并带有任意值。

属性解析比节点解析慢，因此如果您使用大量自定义属性，您可能会减慢页面解析速度，特别是在某些旧浏览器上。

只需记住在它们前面加上与`data-`HTML 5 兼容的前缀： W3C 工作草案中的[数据属性](http://www.w3.org/TR/html5/global-attributes.html#embedding-custom-non-visible-data-with-the-data-attributes)。

在您的情况下，它应该是：

```
<input value="1" data-vcFlag="true" name="example" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T10:46:53.773

自定义属性没有限制。

感谢 HTML5，我们现在能够在所有 HTML 元素上嵌入自定义数据属性，这些新的自定义数据属性由两部分组成：

属性名称：

数据属性名称必须至少有一个字符长，并且必须以“data-”为前缀，并且不应包含任何大写字母。

属性值：

属性值可以是任何字符串。

高温高压

# java - Java中的继承简单说明

> ID：11327514
> 
> 赞同：0
> 
> 时间：2012-07-04T10:44:22.853
> 
> 标签：java, inheritance

所以，我有这个：

```
public class A {

    public int a = 0;
    public void m(){
        System.out.println("A"+a);
    }
} 
```

和这个：

```
public class B extends A {

    public int a = 5 ;
    public void m (){
        System.out.println("B"+a);
    }
    public static void main(String[] args) {
        A oa = new A();
        B ob = new B();
        A oab = ob;
        oa.m();
        ob.m();
        oab.m();

        System.out.println("AA"+oa.a);
        System.out.println("BB"+ob.a);
        System.out.println("AB"+oab.a);
    }
} 
```

**输出：**

```
A0
B5
B5
AA0
BB5
AB0 
```

* * *

我不明白为什么**oab.m();** 输出是**B5**而不是**A0**。谁可以给我解释一下这个？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-04T10:46:34.743

这就是多态性的全部意义所在。的具体类型`oab`是`B`（因为对象是用 创建的`new B()`）。所以方法`B.m()`被调用。

查看[http://en.wikipedia.org/wiki/Polymorphism_%28computer_science%29](http://en.wikipedia.org/wiki/Polymorphism_%28computer_science%29)中的 Animal 示例，了解它为何有用。当你有一只动物，而这只动物是猫时，你希望它会说“喵！” 当你让它说话时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T10:59:55.247

```
B ob = new B();
A oab = ob; 
```

类似于

```
A oab=new B(); 
```

`I don't understand why oab.m(); output is B5 instead of A0`

因为您创建对象`B`并将其引用到 A 所以`m()`被继承，这就是为什么被调用`B's version`的原因。`m()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T11:15:17.817

想象一下，您有以下内容：

```
public class C extends A {

public int a = 7 ;
public void m (){
    System.out.println("C"+a);
} 
```

现在，如果你的 Main 方法中有这个......

```
C oc = new C();
A oac = oc;
oac.m(); 
```

...您希望最后一次调用输出特定于 C 类的内容。

关键是**B 是 A**，**C 是 A**，但它们每个都有 A 包含的值的更具体版本，当您请求这些数据时，应该返回它们的具体版本。

现在你可以这样做：

```
// Get an instance of B or C, but you don't
// care which - could be either:
A someVersionOfA = getAnInstanceOfA(); 

// This works no matter if you've got an instance
// of B or C, but the result should vary accordingly:
someVersionOfA.m(); 
```

正如其他人提到的，将**A**视为“动物”，将**B**视为“猫”，将**C**视为“狗”。如果**m()**的意思是“发出一些声音”，那么调用 m() 应该会导致“喵”或“汪！” 取决于返回的实例*getAnInstanceOfA()*。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T11:04:58.803

在 Java 中有类似后期绑定（多态性）的东西。这意味着**方法的代码**不是在编译时（早期绑定）而是在运行时链接的。在调用JVM 时，正在从引用（在您的情况下）`oab.m();`检查对象的实际类型（类），并基于该信息调用该类的方法代码。这就是为什么返回。`aob``B``oab.m();``B5`

您还需要知道后期绑定仅适用于方法，而不适用于字段。对于字段值将由引用类型确定，因此`oab.a`将返回`0`not `5`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-04T10:46:45.760

```
A oa = new A();
B ob = new B();
A oab = ob; 
```

从上面的代码中，ob 是 B 类的一个实例。它可以存储在 A 类的变量中，因为 A 扩展了 B。但是由于存储的 Object 实例是 B 的，因此它不知道 A 的 m() 函数。因此输出是 `B5`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-04T10:47:28.370

在继承中，实际的方法调用取决于实际对象的类型，而不是引用的类型。

```
 B ob = new B();
 A oab = ob; 
```

这`oab`是一个类型的引用变量，`A`但它指向类型的对象，`B`即`ob`在运行时将从类`oab.m()`调用重写`m()`的方法`B`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-04T13:54:47.297

您刚刚将 B 的内部地址复制到 A 一个，并替换它。

B继承自A，所以没有编译问题。

最后，对 A 的引用被销毁，它现在是对 B 的引用的副本

# windows-phone-7 - 如果弹出窗口位于 WP7 的 RootVisual 级别，我如何从可视树中获取弹出窗口

> ID：11327517
> 
> 赞同：0
> 
> 时间：2012-07-04T10:44:37.923
> 
> 标签：windows-phone-7, popup, windows-phone, visual-tree

我需要在 VisualTree 中获得一个弹出窗口，它是 Application.Current.RootVisual 的兄弟。有没有办法做到这一点？

我暂时找不到解决方法。

我试图获得 RootVisual 的父级，但它没有这样的。

```
 var frame = Application.Current.RootVisual as PhoneApplicationFrame;
            FrameworkElement fi = (FrameworkElement)VisualTreeHelper.GetParent(frame); 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T11:57:26.637

那是错误的做法。

这是正确的，它像冠军一样工作：

```
 System.Collections.Generic.IEnumerable<Popup> popups = VisualTreeHelper.GetOpenPopups();
            Popup popup = popups.ElementAt(0); 
```

# vb.net - VB.Net - 重复数据删除的有效方法

> ID：11327518
> 
> 赞同：0
> 
> 时间：2012-07-04T10:44:47.360
> 
> 标签：vb.net, .net-2.0, ienumerable, deduplication

我正在处理一个针对 SQL 2000 数据库用 VB.Net 2.0 编写的遗留应用程序。

有一个表有约 125,000 行和 2 对具有相似数据的字段。

即 FieldA1、FieldB1、FieldA2、FieldB2

我需要处理一个组合的、不同的 FieldA、FieldB 列表。

使用 SQL 我已经确认有 ~140,000 不同的行。

由于应用程序中的框架非常严格，我只能将数据检索为 2 个 XML 对象、2 个 DataTable 对象或 2 个 DataTableReader 对象。我无法使用该框架执行自定义 SQL。

由于非常严格的数据库访问策略，我无法添加视图或存储过程来检索为单个列表。

将 2 个 XML / DataTable / DataTableReader 对象组合成单个不同的 IEnumerable 对象以供以后处理的最有效方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T10:50:41.027

我可能在这里遗漏了一些东西，但是您不能[使用 Merge 合并](http://msdn.microsoft.com/en-us/library/system.data.datatable.merge.aspx)两个 DataTables吗？

```
DataTableA.Merge(DataTableB) 
```

然后你可以使用`DataTableA.AsEnumerable()`

然后查看有关如何删除重复项的[答案或](https://stackoverflow.com/questions/4415519/best-way-to-remove-duplicate-entries-from-a-data-table)

您可以`DataView`按如下方式执行此操作：`dt.DefaultView.ToTable(True,[Column names])`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T16:31:20.177

这是我想出的解决方案。

使用`.Merge`（感谢马特的回答）结合 2 个数据表

以此为[基础](http://support.microsoft.com/kb/326176)，我想出了以下代码，以根据 2 列从 DataTable 中获取不同的行：

```
Private Shared Function GetDistinctRows(sourceTable As DataTable, ParamArray columnNames As String()) As DataTable

    Dim dt As New DataTable
    Dim sort = String.Empty

    For Each columnName As String In columnNames

        dt.Columns.Add(columnName, sourceTable.Columns(columnName).DataType)

        If sort.Length > 0 Then
            sort = sort & ","
        End If

        sort = sort & columnName

    Next

    Dim lastValue As DataRow = Nothing

    For Each dr As DataRow In sourceTable.Select("", sort)

        Dim add As Boolean = False

        If IsNothing(lastValue) Then
            add = True
        Else
            For Each columnName As String In columnNames
                If Not (lastValue(columnName).Equals(dr(columnName))) Then
                    add = True
                    Exit For
                End If
            Next
        End If

        If add Then
            lastValue = dr
            dt.ImportRow(dr)
        End If

    Next

    Return dt

End Function 
```

# java - 无法从服务器发布消息：Google Cloud Messaging

> ID：11327522
> 
> 赞同：7
> 
> 时间：2012-07-04T10:44:56.723
> 
> 标签：java, android, google-cloud-messaging

我正在阅读有关 GCM 的信息，同时我正在尝试 docs`(extras/google/gcm/gcm-server/)`和`extras/google/gcm/gcm-client/`.

客户端（设备）的注册过程工作正常。但是，当我尝试向已注册的设备发送消息时，它给了我错误，即使添加了一台设备或将多台设备添加到服务器。

这是代码：

```
@Override
  protected void doPost(HttpServletRequest req, HttpServletResponse resp)
      throws IOException, ServletException {
    List<String> devices = Datastore.getDevices();
    StringBuilder status = new StringBuilder();
    if (devices.isEmpty()) {
      status.append("Message ignored as there is no device registered!");
    } else {
      List<Result> results;
      // NOTE: check below is for demonstration purposes; a real application
      // could always send a multicast, even for just one recipient
      if (devices.size() == 1) {
        // send a single message using plain post
        String registrationId = devices.get(0);
        Result result = sender.send(getMessage(), registrationId, 5); //THIS IS LINE NUMBER 75
        results = Arrays.asList(result);
      } else {
        // send a multicast message using JSON
        MulticastResult result = sender.send(getMessage(), devices, 5);
        results = result.getResults();
      }
      // analyze the results
      for (int i = 0; i < devices.size(); i++) {
        Result result = results.get(i);
        if (result.getMessageId() != null) {
          status.append("Succesfully sent message to device #").append(i);
          String canonicalRegId = result.getCanonicalRegistrationId();
          if (canonicalRegId != null) {
            // same device has more than on registration id: update it
            logger.finest("canonicalRegId " + canonicalRegId);
            devices.set(i, canonicalRegId);
            status.append(". Also updated registration id!");
          }
        } else {
          String error = result.getErrorCodeName();
          if (error.equals(Constants.ERROR_NOT_REGISTERED)) {
            // application has been removed from device - unregister it
            status.append("Unregistered device #").append(i);
            String regId = devices.get(i);
            Datastore.unregister(regId);
          } else {
            status.append("Error sending message to device #").append(i)
                .append(": ").append(error);
          }
        }
        status.append("<br/>");
      }
    }
    req.setAttribute(HomeServlet.ATTRIBUTE_STATUS, status.toString());
    getServletContext().getRequestDispatcher("/home").forward(req, resp);
  }

  private Message getMessage() {
      Message.Builder builder = new Message.Builder();
      /*Message message = new Message.Builder()
          .collapseKey(collapseKey)
          .timeToLive(3)
          .delayWhileIdle(true)
          .addData("key1", "value1")
          .addData("key2", "value2")
          .build();*/
      return builder.build();
  } 
```

注意：代码与文档中给出的相同，我只是添加了`getMessage()`.

注册一台设备时，控制台出现错误

```
SEVERE: Servlet.service() for servlet SendAllMessagesServlet threw exception
com.google.android.gcm.server.InvalidRequestException: HTTP Status Code: 401
    at com.google.android.gcm.server.Sender.sendNoRetry(Sender.java:177)
    at com.google.android.gcm.server.Sender.send(Sender.java:121)
    at com.google.android.gcm.demo.server.SendAllMessagesServlet.doPost(SendAllMessagesServlet.java:75)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:286)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:845)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)
    at java.lang.Thread.run(Thread.java:662) 
```

***注意：***向 SendAllMessagesServlet.java:75 添加了注释。见上面的代码。

当不止一个

```
Error sending message to device #0: Unavailable 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-11T12:30:48.887

您可以按照[本指南](https://github.com/PushAppsService/PushAppsSDK/tree/master/Android/Guides)为 Android 应用程序生成浏览器密钥

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T12:36:36.913

按照这个链接的步骤。我有这个链接的工作，它的工作对我来说很好

[http://lalit3686.blogspot.in/2012/07/android-steps-to-run-gcm-demo.html](http://lalit3686.blogspot.in/2012/07/android-steps-to-run-gcm-demo.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T14:17:34.593

我不确定这是否有帮助，但关于 401，[文档说](https://developers.google.com/android/c2dm/#push-process)

“401：表示用于验证发件人的ClientLogin AUTH_TOKEN无效。”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T15:50:24.793

在 Google API 的控制台中，确保使用浏览器应用程序密钥（因为文档示例是浏览器应用程序）和服务器应用程序密钥。

再次使用新密钥生成war文件项目

```
ant war 
```

并再次尝试该过程，注册设备并发送消息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-04T12:38:34.850

在 Google API 的控制台中，确保您使用浏览器应用程序密钥（因为文档示例是浏览器应用程序）和服务器应用程序密钥。

然后，使用新密钥重新生成 war 文件项目。

通过注册设备并发送消息再次尝试该过程。

# android - 如何为我的相对布局设置 alpha 值？

> ID：11327523
> 
> 赞同：11
> 
> 时间：2012-07-04T10:45:05.200
> 
> 标签：android, layout, alpha

嗨，我正在尝试为我的相对布局设置 alpha 值，但是，我遇到了错误，如何解决这个问题帮助我.....

我的 xml 布局中有三个布局 第一个布局用于背景 第二个布局用于页眉 第三个布局用于页脚。我希望设置 alpha 值 2 和 3rd 布局所以我尝试了很多方法我仍然不知道请告诉如何设置 alpha 值

xml代码：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:layout_alignParentLeft="true"
    android:orientation="vertical" 
    android:background="@drawable/blue">

    <RelativeLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="60px"
        android:orientation="horizontal"
        android:layout_alignParentTop="true"
        android:background="@drawable/gradient_black"
        android:id="@+id/ttest">
       <ImageView
            android:id="@+id/imageView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"

        />

        <TextView
            android:id="@+id/header_text"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerVertical="true"
            android:layout_marginLeft="6dp"
            android:layout_toRightOf="@+id/imageView1"
            android:text="settings"
            android:textColor="@color/white"
            android:textSize="20sp" />

    </RelativeLayout>

    <RelativeLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="55px"

        android:background="@drawable/gradient_black"
        android:gravity="bottom"
        android:orientation="horizontal"
        android:layout_alignParentBottom="true" >
  <ImageView
            android:id="@+id/imageView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="ssss"
        />  

    </RelativeLayout>

</RelativeLayout> 
```

代码：

```
public class DesignActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        int width = getWindowManager().getDefaultDisplay().getWidth();
        int height = getWindowManager().getDefaultDisplay().getHeight();

        ImageView imgHead = (ImageView)findViewById(R.id.imageView1);

        ImageView imgbottom = (ImageView)findViewById(R.id.imageView2);

        imgbottom.setImageResource(R.drawable.back);
        imgbottom.setLayoutParams(new RelativeLayout.LayoutParams(width/8, height/8));

        imgHead.setImageResource(R.drawable.b);
        imgHead.setLayoutParams(new RelativeLayout.LayoutParams(width/8, height/8));
     //   RelativeLayout relative = (RelativeLayout)findViewById(R.id.ttest);

    }
} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-04T11:29:35.973

试试这个

```
AlphaAnimation alpha = new AlphaAnimation(0.5F, 0.5F);
alpha.setDuration(0); // Make animation instant
alpha.setFillAfter(true); // Tell it to persist after the animation ends
// And then on your layout
yourLayout.startAnimation(alpha); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-07-15T08:35:36.117

> 相对布局 RL; ...
> rl.setAlpha(0.5F);

```
<RelativeLayout
    android:id="@+id/rl"
    android:layout_width="200dp"
    android:layout_height="200dp"
    android:background="@drawable/bg"
    android:alpha="0.5"> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-03-13T14:04:23.283

在这些情况下，我通常倾向于同时设置颜色和 alpha，所以我只使用`rl.setBackgroundColor(0xAACCCCCC);`其中 A 是 alpha 值，C 是颜色，以十六进制格式。

eg：`rl.setBackgroundColor(0x88000000);`对于0.5透明的黑色背景。

或在 XML 中：`android:background="#88000000"`

# android - 有没有办法让键盘在特定屏幕中默认不弹出？

> ID：11327524
> 
> 赞同：0
> 
> 时间：2012-07-04T10:45:14.853
> 
> 标签：android

我有一个带有文本区域的表单的活动屏幕，以及表单下方的文本。当屏幕打开时，由于某种原因，键盘会自动弹出并为用户挡住屏幕的底部，造成一些混乱，因为他们看不到下面的文字。

有没有办法不让键盘默认弹出，只有当用户在文本区域内点击时才会弹出？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T10:50:45.463

在你的清单文件中使用这个

```
 <activity
        android:name=".YourActivityName"
        android:configChanges="keyboardHidden|orientation"
        android:windowSoftInputMode="stateHidden" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T10:53:10.827

在 xml 文件中的 textarea 上使用此属性

```
android:focusable="true"
android:focusableInTouchMode="true" 
```

# c# - 可观察集合 物品更新事件

> ID：11327527
> 
> 赞同：3
> 
> 时间：2012-07-04T10:45:23.927
> 
> 标签：c#, .net, wpf, datagrid, observablecollection

我正在使用 MVVM 编写 WPF 应用程序。我有我的物品的 ObservableCollection：

```
public ObservableCollection<VarValue> Values;

public class VarValue: INotifyPropertyChanging, INotifyPropertyChanged
{
    public double value
    {
        get
        {
            return this._value;
        }
        set
        {
            if (this._value != value)
            {
                this.OnvalueChanging(value);
                this.SendPropertyChanging();
                this._value = value;
                this.SendPropertyChanged("value");
                this.OnvalueChanged();
            }
        }
    }
} 
```

绑定到dataGrid1：

```
dataGrid1.ItemsSource = Values;

<DataGrid EnableColumnVirtualization="true" EnableRowVirtualization="true" Name="dataGrid1" DockPanel.Dock="Top" AutoGenerateColumns="False" Height="120" Width="Auto" CanUserReorderColumns="False" CanUserResizeColumns="False" CanUserResizeRows="False" CanUserSortColumns="False" SelectionUnit="Cell">
    <DataGridTemplateColumn.CellTemplate>
        <DataTemplate><TextBlock Text='{Binding Values.value}'/></DataTemplate></DataGridTemplateColumn.CellTemplate>
    <DataGridTemplateColumn.CellEditingTemplate>
        <DataTemplate><TextBox Text='{Binding Values.value, Mode=TwoWay}'/></DataTemplate></DataGridTemplateColumn.CellEditingTemplate>
</DataGrid> 
```

当用户编辑 dataGrid1 单元格时，我需要创建新的 VarValue 对象，并将其插入现有集合中。例如：

*   datagrid 包含一个值=1 的单元格
*   用户将其更改为 value=2
*   现在在表中必须是两个单元格：具有 1 和 2 值。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T11:17:18.477

您可以围绕 VarValue 创建一个包装器并将其绑定到您的网格中：

```
public class VarValueVM : INotifyPropertyChanged
{
    private VarValue _value;
    private ObservableCollection<VarValueVM> _values;

    public VarValueVM(VarValue value, ObservableCollection<VarValueVM> values)
    {
        _value = value;
        _values = values;
    }

    public double value
    {
        get
        {
            return _value.value;
        }
        set
        {
            if (this._value.value != value)
            {
                _values.Add(new VarValueVM(new VarValue() { value = value }, _values));
                this.SendPropertyChanged("value"); //In order to tell the grid that value did not change finally...
            }
        }
    }
} 
```

# java - 如何知道任何文件/程序与 Java 的哪个默认程序相关联？

> ID：11327528
> 
> 赞同：3
> 
> 时间：2012-07-04T10:45:26.910
> 
> 标签：java

我只是想知道如何知道与任何外部程序/文件关联的默认程序。对于 ex-默认情况下，一个 java 文件用哪个程序打开？我必须知道使用 Java 程序本身。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T10:50:42.820

在**窗户上**：

```
Runtime rt = Runtime.getRuntime();
Process pr = rt.exec("ftype > %YOUR_DIRECTORY%\\type_program.properties");
Properties prop = new Properties();
InputStream in = getClass().getResourceAsStream("%YOUR_DIRECTORY%\\type_program.properties");
prop.load(in); 
```

在**Unix\Linux**上：

您可以使用`file`特定扩展的命令并获取相应的映射。

此时，您在属性对象中获得了所有映射。请享用！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T10:55:26.017

如果你想用关联的程序打开一个文件，你真的不需要知道关联的程序，因为 Java 可以使用 java.awt.Desktop 类为你进行关联。

```
// application associated to a file extension
public static void open(File document) throws IOException {
    Desktop dt = Desktop.getDesktop();
    dt.open(document);
} 
```

# git - 查找文件出现在 git 分支中的日期/时间

> ID：11327535
> 
> 赞同：6
> 
> 时间：2012-07-04T10:45:57.767
> 
> 标签：git

如何获取文件第一次出现在分支中的日期。

目前我正在使用以下内容。问题在于，对于合并，它返回原始分支中的创建日期，而不是返回合并的日期。

`$ git log --first-parent --format=%ct FILE`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T21:01:34.370

看起来这个问题在 1.7.9.1 版本中已修复[https://github.com/git/git/blob/master/Documentation/RelNotes/1.7.9.1.txt](https://github.com/git/git/blob/master/Documentation/RelNotes/1.7.9.1.txt)

# java - 在 Spring 中是否可以引用另一个 bean 的一部分？

> ID：11327553
> 
> 赞同：1
> 
> 时间：2012-07-04T10:47:07.987
> 
> 标签：java, spring, properties, reference, javabeans

代码：

```
<bean id="bean1" ...
 <property name="Utils">
...
</bean> 
```

我想要做：

```
<bean id="bean2" ...
 <property name="Utils" ref="bean1.Utils"/> 
```

春天可以吗？或者类似的东西？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T10:50:43.393

是的

```
<bean id="bean1" ...>
 <property name="Utils" ref="utilBean">
</bean>

<bean id="utilBean" ...> 
```

和

```
<bean id="bean2" ...
 <property name="Utils" ref="utilBean"/> 
```

因为两者`utilBean`都是**单例**`bean1`，并且`bean2`具有相同的属性实例`Utils`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T11:13:01.937

您可以使用 PropertyPathFactoryBean。请参阅[http://static.springsource.org/spring/docs/2.5.x/reference/xsd-config.html#xsd-config-body-schemas-util-property-path](http://static.springsource.org/spring/docs/2.5.x/reference/xsd-config.html#xsd-config-body-schemas-util-property-path)：

```
<bean id="bean2" ...
  <property name="Utils">
    <bean id="bean1.Utils"
          class="org.springframework.beans.factory.config.PropertyPathFactoryBean"/> 
```

这也可以使用 bean1 中没有由 Spring 设置的属性，只要它有一个 getter。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T12:11:36.887

我很确定**Jigar Joshi**的[答案](https://stackoverflow.com/a/11327606/357360)是您所需要的 - 但如果不是，您可以使用[SpEL](http://static.springsource.org/spring/docs/3.0.5.RELEASE/reference/expressions.html)：

```
<bean id="bean2" ...
 <property name="Utils" value="#{bean1.getUtils()}"/> 
```

这是假设 bean1 公开了一个`getUtils()`方法。

请注意，这不是正统的，通常不是推荐的做法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T11:17:41.877

它可以定义为基于 xml 之类的；

```
<bean id="bean1">
 <property name="Utils" ref="bean2">
</bean> 
```

作为基于Java的注解；

```
@Autowired
Bean2 bean2; 
```

# classification - 如何同时为多个数据流提供隐马尔可夫模型（HMM）？

> ID：11327555
> 
> 赞同：1
> 
> 时间：2012-07-04T10:47:19.180
> 
> 标签：classification, sensors, hidden-markov-models

我已经建立了一个由 8 个加速度计组成的身体传感器网络。在每个样本（大约 30 Hz）处，每个加速度计都会给我一个 XY 和 Z 值。

我使用了 jahmm java 库对由一个加速度计组成的数据流进行分类。这工作正常。但现在我很困惑如何扩展我的代码，以便可以使用多个加速度计。

单个数据流如下所示：

```
 [-4.976763 7.096352 1.3488603]; [-4.8699903 7.417777 1.3515397];... 
```

该库允许定义特征向量的维度。在上面的流中，维度是 3。我想将维度提高到 3 x 8 = 24，然后简单地将所有加速度计连接成一个 24D 特征向量。

这是要走的路还是会恶化我的结果？

编辑：

我现在已经收集了我的数据，它看起来像这样（对于一位参与者）：

```
"GESTURE A",[{407 318 425};...{451 467 358};{427 525 445};][{440 342 456}...;{432 530 449};]
"GESTURE A",[{406 318 424};...{450 467 357};{422 525 445};][{440 342 456}...;{428 531 449};]
"GESTURE B",[{407 318 424};...{449 466 357};{423 524 445};][{440 342 456}...;{429 530 449};]
"GESTURE B",[{380 299 399};...{424 438 338};{404 500 426};][{433 337 449}...;{429 529 449};] 
```

{... ... ...} 之间的值代表一个加速度计。每个样本（在 30hz 左右）我有 8 个加速度计。一个样本在 [...] 内。每个手势示例我有大约 40 个 [...]

您是否建议我采用第一个传感器（[] 的每个块的第一个 {}）并使用结果序列创建一个模型，并且第二个直到第八个都相同？

这将为每个手势提供 8 个模型。比一个测试序列产生 8 个概率。所以我需要某种复数投票来获得覆盖类。这是你的意思吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T21:08:03.687

我建议每个加速度计使用一个 HMM，因此在您的情况下使用 8 个并行模型。然后，您可以单独评估每个通道并将所有内容放在一起以获得您的结果。所以你必须围绕库编写一些代码。

如果您想在一个 HMM 中处理所有内容，则必须编写自己的观察类型，它可以处理所有 8 个输入流，例如`MyObservation extends Observation`.

# android - 如果商业内核电话不支持模块，我如何为 Android 编写驱动程序？

> ID：11327556
> 
> 赞同：1
> 
> 时间：2012-07-04T10:47:22.173
> 
> 标签：android, kernel, driver

我看到许多 Android 内核都没有可加载模块支持，在这种情况下我如何编写和加载驱动程序？

例如，我有一个在 vanilla linux 内核下工作的驱动程序的代码库，我如何将它移植到 Android？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T10:50:34.740

你不能——这就是商用电话不支持模块的确切原因。如果 OEM 禁用模块支持，您别无选择，只能先更换内核。如果您可以只提供一个驱动程序，您将可以立即不受限制地访问手机，而这是 OEM 想要避免的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T11:43:45.140

如果您谈论的是商用电话和现有的硬件，那么您大概是在谈论通过 USB（或蓝牙或 wifi 等）连接的东西。对于这些，您也许可以使用适当的用户空间 api。例如，在支持 usb 主机的手机/平板电脑上，有一个主机 api，它可以让您访问设备，有点像使用 libusb 的方式，尽管有一些限制。

您当然应该能够获得任何运行 linux 内核的设备的内核源代码；那在内核许可证中。不幸的是，许多供应商发布的速度很慢 - 源代码发布的明显问题是一堆基于芯片组的标签外平板电脑，其制造商显然不向设备制造商提供内核和工具链源，导致手工操作下许可证违规。

但是回到商业硬件，通常（在 Tivo 的传统中）拥有内核源代码并不意味着该设备将允许您安装编译结果，或者即使您设法闪存引导加载程序也愿意执行它它。幸运的是，一些手机制造商在为开发人员和高级用户提供解锁个人或测试设备引导加载程序的方法方面做得越来越好——谷歌自己销售的设备就是典型的例子。

# actionscript-3 - 无法让 Flash 组件 (SWC) 访问实时预览中的库

> ID：11327561
> 
> 赞同：7
> 
> 时间：2012-07-04T10:47:36.160
> 
> 标签：actionscript-3, flash, actionscript, components

我正在构建一组 Flash 组件，它们能够将组件的皮肤替换为库中的另一个组件。

目前，我可以在运行应用程序后访问库，但不能在实时预览期间访问，我想知道组件在实时预览模式下运行时是否可以访问库（您可以拖动的模式舞台周围的组件并在“组件参数”窗口中更改其属性）

 ``Here is a simplified code that just looks to see if there is a symbol of the name specified and than instantiates it and adds it as a child.

```
package 
{
    import fl.core.UIComponent;
    import flash.display.MovieClip;
    import flash.system.ApplicationDomain;

    /**
     * ...
     * @author Roy Lazarovich
     */
    public class CompTest extends UIComponent 
    {
        private var customfile  :String;

        public function CompTest()
        {

        }

        override protected function configUI():void
        {

        }

        override protected function draw():void
        {
            super.draw();
        }

        private function setCustomFile():void
        {
            if (ApplicationDomain.currentDomain.hasDefinition(customfile))
            {
                var c:Class = Class(ApplicationDomain.currentDomain.getDefinition(customfile));
                var mc:MovieClip = new c();
                addChild(mc);
            }
        }

        [Inspectable(name = "_Custom File", defaultValue = "")]
        public function set _customfile(value:String):void
        {
            customfile = value;
            setCustomFile();

            drawNow();
        }

    }

} 
````  `谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T23:38:09.410

我不完全确定您已经尝试过什么来解决这种情况。但希望这可能会有所帮助。

右键单击库中的 MovieClip，选择 Linkage 并为其命名，即。我的东西。

在您的代码中，

```
newMyThing = new MyThing();
this.addChild(newMyThing);
trace("tada!"); 
```

希望这有助于或让您更接近解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T15:27:58.750

这在 LivePreview 中对我有用，只要我在 configUI 中应用它，而不是绘制：

```
public class EditableBitmap extends UIComponent 
{
    protected var placeholder:String = "None";
    protected var bitmap:Bitmap;
    protected var scale:Number = 1;

    [Inspectable(name = "Placeholder", type = String, defaultValue="None")]
    public function set Placeholder($value:String):void 
    { 
        placeholder = $value;
        configUI();
    }
    public function get Placeholder():String { return placeholder; }

    public function EditableBitmap() 
    {
        //Console.Debug("NEW EditableBitmap");
        super();
    }

    override protected function configUI():void 
    {
        //Console.Debug("EditableBitmap configUI: " + width);
        if (!isNaN(width))
        {
            wDim = width;
            hDim = height;
            graphics.clear();
            graphics.beginFill(0x000000, 0.1);
            graphics.drawRect(0, 0, wDim, hDim);
        }
        if (placeholder != "None" && placeholder != "")
        {
            var asset:Class = getDefinitionByName(placeholder) as Class;
            var data:BitmapData = new asset() as BitmapData;
            bitmap = new Bitmap(data);
        }
        super.configUI();
    }

    override protected function draw():void 
    {
        if (bitmap)
        {
            addChild(bitmap);
            bitmap.x = off_x * scale;
            bitmap.y = off_y * scale;
            bitmap.scaleX = bitmap.scaleY = scale;
        } 
    }
} 
```

**注意：**当我在编辑组件的 FLA 上工作时，位图仅从库中不一致地显示。有时有效，有时无效。但是，当我导出 SWC，然后将组件导入另一部电影时，它每次都能正常工作，无论是在 LivePreview 中还是在运行时。

**更新** 这似乎在 CS6 中不起作用，除非符号已经嵌入到组件中。SWC 我想看看我是否可以欺骗它，通过在 SWC 中嵌入一个图像，然后在目标文件。这没有用，但它确实指出了我如何做到这一点：

![在此处输入图像描述](../Images/a847fa5f492889879f3f94b304c1932e.png)

所以，这有点费力，但你可以通过以下方式解决这个问题：

1) 为组件 SWC 中的每个属性创建一个虚拟资产。2）在部署组件的文件中使用自定义类覆盖它

...所有这些都可能比它的价值更麻烦，但它应该为问题提供解决方案。``

# macos - node-expat 导致 npm 因 node install soap 而失败

> ID：11327563
> 
> 赞同：1
> 
> 时间：2012-07-04T10:47:43.423
> 
> 标签：macos, node.js, soap, osx-lion, npm

我正在尝试在 Mac OSX 上通过 NPM 安装 node js soap 模块，努力手动安装并指向 expat.h 等没有工作

**npm 安装肥皂**

```
npm http GET https://registry.npmjs.org/soap
npm http 304 https://registry.npmjs.org/soap
npm http GET https://registry.npmjs.org/node-expat
npm http GET https://registry.npmjs.org/request
npm http 304 https://registry.npmjs.org/node-expat
npm http 304 https://registry.npmjs.org/request

> node-expat@1.6.0 install /Users/test/test1/node_modules/soap/node_modules/node-expat
> node-waf configure build

Checking for program g++ or c++          : /usr/bin/g++ 
Checking for program cpp                 : /usr/bin/cpp 
Checking for program ar                  : /usr/bin/ar 
Checking for program ranlib              : /usr/bin/ranlib 
Checking for g++                         : ok  
Checking for node path                   : not found 
Checking for node prefix                 : ok /usr/local 
Checking for header expat.h              : not installed 
/Users/test/test1/node_modules/soap/node_modules/node-expat/wscript:14: error: the configuration failed (see '/Users/test/test1/node_modules/soap/node_modules/node-expat/build/config.log')
npm ERR! node-expat@1.6.0 install: `node-waf configure build`
npm ERR! `sh "-c" "node-waf configure build"` failed with 1
npm ERR! 
npm ERR! Failed at the node-expat@1.6.0 install script.
npm ERR! This is most likely a problem with the node-expat package,
npm ERR! not with npm itself.
npm ERR! Tell the author that this fails on your system:
npm ERR!     node-waf configure build
npm ERR! You can get their info via:
npm ERR!     npm owner ls node-expat
npm ERR! There is likely additional logging output above.

npm ERR! System Darwin 11.3.0
npm ERR! command "node" "/usr/local/bin/npm" "install" "soap"
npm ERR! cwd /Users/test/test1
npm ERR! node -v v0.8.1
npm ERR! npm -v 1.1.33
npm ERR! code ELIFECYCLE
npm ERR! message node-expat@1.6.0 install: `node-waf configure build`
npm ERR! message `sh "-c" "node-waf configure build"` failed with 1
npm ERR! 
npm ERR! Additional logging details can be found in:
npm ERR!     /Users/test/test1/npm-debug.log
npm ERR! not ok code 0 
```

用谷歌搜索它手动安装了 expat 等，但没有运气。请注意 Xcode 4.3 已安装并且命令行支持已到位。

我真的不确定如何摆脱以下两条消息。请帮忙。

```
Checking for node path                   : not found 
Checking for header expat.h              : not installed 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T10:55:04.450

node-waf 已在 node 0.8 中删除，并且鼓励二进制模块作者迁移到 node-gyp

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T09:36:36.727

现在在 1.6.1 中修复它工作正常 :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T00:05:24.213

您需要 libexpat 开发头文件，尝试使用 homebrew 或端口或任何包管理器安装 libexpat1-dev 包...

# rest - Web 开发：复杂流程：状态机是（唯一的？）方法吗？

> ID：11327564
> 
> 赞同：2
> 
> 时间：2012-07-04T10:47:45.777
> 
> 标签：rest, language-agnostic, web, state-machine

在 Web 开发中，以最小化（或消除）状态为目标，大量关注 REST 风格的架构。我见过的web框架都强调这种风格（Django、Rails、flask等）。

虽然我同意这总体上非常适合网络，但也有很多情况下这是不够的。特别是我正在考虑您希望用户遵循流程的情况，即您想要提供许多步骤并且这些步骤应该按特定顺序完成（可能带有可选步骤、偏离路径等）

一个很好的例子可能是购物车：首先你必须做出选择，然后输入你的地址，选择发货类型，输入你的付款细节，完成。您不希望用户跳过任何这些步骤，并且该过程可能会变得更加复杂。理想情况下，我希望在单独的位置定义此过程，以将此逻辑与实现的其余部分分开。

现在我的问题：

1.  有限状态机是通往这里的路吗？如果这些过程变得复杂并且需要进行大量更改（例如，这一步应该在这里，这一步应该进入这个过程等等），它们是否仍然可以很好地工作？

2.  Web 框架提供了哪些选项（不是我对最佳解决方案特别感兴趣）？

3.  什么是此类过程发生的有趣/好的例子？购物车是一个明显的例子，但我相信还有更多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T11:29:02.957

1.  是的，他们是。使用状态机（工作流）是您描述的问题的合适解决方案。如果设计得好，它可以让你的代码更干净，消除代码中的混乱。每个状态的逻辑和转换逻辑都封装在一个 State 类对象中，因此代码看起来更清晰、更易于维护。实现可能会有所不同（例如，您将转换逻辑保留在状态中或创建单独的转换管理器的位置）并且与离散数学中状态机的规范描述不匹配，因此您最好尝试更适合您的方法。

2.  对于 Ruby，您可以检查工作流程：[https](https://github.com/geekq/workflow) ://github.com/geekq/workflow或 stonepath：[https](https://github.com/bokmann/stonepath) ://github.com/bokmann/stonepath 。状态机模式也可以在 javascript 框架 (SpoutCore) 中找到。实现自己的小型状态机引擎并不难。

3.  有趣的例子？其中很多。处理订单、银行业务、游戏。我在创建包含生理测试、游戏、视频的行为校正模块时使用了状态机。从状态到状态的转换取决于测试是否正确回答，游戏是否成功等。

PS。我使用状态机和工作流的术语作为同义词，但它们并不相同；在这里讨论过：http: [//jmettraux.wordpress.com/2009/07/03/state-machine-workflow-engine/](http://jmettraux.wordpress.com/2009/07/03/state-machine-workflow-engine/)。您还可以在那里找到一些 Ruby 代码和链接。

# c# - 如何在 ASP 中的 SQL 连接中传递修改后的表名

> ID：11327566
> 
> 赞同：0
> 
> 时间：2012-07-04T10:47:57.693
> 
> 标签：c#, asp.net, .net, sql-server-2008, sql-server-2008-r2

我在 asp.net 中使用 SQL Server 2008 作为我的数据库。`<a>`在单击标签到 Web 表单时，我正在传递表名。那么，当我单击任何链接时，它如何根据收到的值更改其 sql 查询呢？

例如：

```
 <li class="last">
    <a href="category.aspx?cat=Architect&sub=Architects">Item 1.1</a>
 </li> 
```

这里`cat`包含表名和`sub`条件名。

另一方面，我正在做：

```
SqlConnection con=new SqlConnection("Data Source=ANURAG-PC;Initial Catalog=dbPortal;Persist Security Info=True;User ID=sa;Password=anurag");
SqlDataAdapter da;
DataSet ds=new DataSet();
static DataTable dt = new DataTable();

protected void Page_Load(object sender, EventArgs e) 
{
   if (IsPostBack == false)
   {
      string s = Request.QueryString["cat"];
      string s1 = Request.QueryString["sub"];

      da = new SqlDataAdapter("select * from Architect where subcategory3='" + s1 + "'",con);
      da.Fill(ds,"tab");
      dt = ds.Tables["tab"];
      DataGrid1.DataSource = dt;
      DataGrid1.DataBind();
   }
} 
```

所以我只想给出`Architect`我只想通过的表名`s`- 我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T10:53:09.920

我建议您为此考虑其他解决方案，因为您当前所做的将导致非常简单的 SQL 注入，并且您的数据库将面临很大风险。我建议你有一个所有表的枚举，并在查询字符串中传递表的 id 而不是表名，并且在进行字符串连接之前，你应该确保条件字符串在任何 sql 注入中都是有效的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T10:51:55.340

```
da = new SqlDataAdapter("select * from " + s + " where subcategory3='" + s1 + "'",con); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T11:41:58.560

你的设计并不是最优的；是否可以考虑将所有数据存储在链接到类别和子类别的中央表中？

有几个弱点；sql 的任何字符串连接都会让您面临 SqlInjection 攻击。例如，即使您从下拉列表中选择值，客户端脚本仍然可以修改组合框中的值，或者攻击者只需将数据发布到服务器端事件处理程序。

此外，必须从多个表中获取数据意味着您可能必须在结果中处理不同的模式；如果您期望这一点（即某些表的列比其他表多），那么您可以适当地处理它。

然后，您的查询将类似于：

```
protected void Page_Load(object sender, EventArgs e) 
{
   if (IsPostBack == false)
   {
      string s = Request.QueryString["cat"];
      string s1 = Request.QueryString["sub"];

      if(String.IsNullOrEmpty(s) || String.IsNullOrEmpty(s1)) { return; } //Improve Validation and error reporting

      using(SqlConnection conn = new SqlConnection("Data Source=ANURAG-PC;Initial Catalog=dbPortal;Persist Security Info=True;User ID=sa;Password=anurag"))
      {
        using(SqlCommand command = new SqlCommand(conn))
        {
            command.CommandType = CommandType.Text;
            command.CommandText = "SELECT * FROM Table WHERE Category = @Category AND SubCategory = @SubCategory";

            command.Parameters.Add(new SqlParameter() { Type = SqlDbType.String, Name = "@Category", Value = s });
            command.Parameters.Add(new SqlParameter() { Type = SqlDbType.String, Name = "@SubCategory", Value = s1 });

            conn.Open();

            using(SqlDataReader reader = command.ExecuteReader())
            {
                DataTable data = new DataTable("MyData");
                data.Load(reader);
                DataGrid1.DataSource = data;
                DataGrid1.DataBind();
            }

        }
      }
   }
} 
```

如果您坚持使用原始模型，那么您可能希望将表名列入白名单，以便您可以坚持使用参数化查询：

```
protected void Page_Load(object sender, EventArgs e) 
{
   if (IsPostBack == false)
   {
      string s = Request.QueryString["cat"];
      string s1 = Request.QueryString["sub"];

      if(String.IsNullOrEmpty(s) || String.IsNullOrEmpty(s1)) { return; } //Improve Validation and error reporting

      using(SqlConnection conn = new SqlConnection("Data Source=ANURAG-PC;Initial Catalog=dbPortal;Persist Security Info=True;User ID=sa;Password=anurag"))
      {
        using(SqlCommand command = new SqlCommand(conn))
        {
            command.CommandType = CommandType.Text;

            switch(s)
            {
                case "Architect":
                    command.CommandText = "SELECT * FROM Architect WHERE SubCategory = @SubCategory";
                    break;
                case "SomethingElse":
                    command.CommandText = "SELECT * FROM SomethingElse WHERE SubCategory = @SubCategory";
                    break;
                default:
                    return; //Again, improve error handling
            }

            command.Parameters.Add(new SqlParameter() { Type = SqlDbType.String, Name = "@SubCategory", Value = s1 });

            conn.Open();

            using(SqlDataReader reader = command.ExecuteReader())
            {
                DataTable data = new DataTable("MyData");
                data.Load(reader);
                DataGrid1.DataSource = data;
                DataGrid1.DataBind();
            }

        }
      }
   }
} 
```

不过，我要说的一个评论是，即使你实现了上面的任何一个例子，你仍然有一个大问题；您的数据访问代码、业务逻辑和演示代码现在都被整合到此页面背后的代码中。您将不得不在需要的任何地方重复此操作，从而导致大量重复，这在您需要修复错误时尤其成问题。

相反，您可能会[考虑创建类](https://stackoverflow.com/questions/923502/orm-and-layers)或使用[ORM](https://stackoverflow.com/questions/6296555/n-tiers-orm-how-to-implement-orm)为您处理所有这些工作，因此您改为请求 Architect 对象列表，或来自类或组件的 SomethingElse 列表，从而让 aspx 处理演示文稿. 这里还有一个[关于](https://stackoverflow.com/questions/194147/are-there-good-reasons-not-to-use-an-orm)为什么你可能*不想*使用 ORM 的讨论。

如果你遵循这条路线，你的代码可能会变成这样：

```
protected void Page_Load(object sender, EventArgs e) 
{
   if (IsPostBack == false)
   {
      string s = Request.QueryString["cat"];
      string s1 = Request.QueryString["sub"];
      //Still do validation on s and s1

      ObjectFactory of = new ObjjectFactory();
      DataGrid1.DataSource = ObjectFactory.GetObjects(s, s1);
      DataGrid1.DataBind();
    }
 } 
```

实际上，现在其他人的工作是担心如何获取对象并收集它们，从而大大减少了您在代码中的代码。此外，您可以轻松地在各种界面中重用它！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-04T10:52:55.173

像这样 ？

```
SqlConnection con=new SqlConnection("Data Source=ANURAG-PC;Initial Catalog=dbPortal;Persist Security Info=True;User ID=sa;Password=anurag");
    SqlDataAdapter da;
    DataSet ds=new DataSet();
    static DataTable dt=new DataTable();

        protected void Page_Load(object sender, EventArgs e) 
        {
            if (IsPostBack == false)
            {
                string s = Request.QueryString["cat"];
                string s1 = Request.QueryString["sub"];

                da = new SqlDataAdapter("select * from '"+s+"' where subcategory3='" + s1 + "'",con);
                da.Fill(ds);
                dt = ds.Tables[0];
                DataGrid1.DataSource = dt;
                DataGrid1.DataBind();

            }

        } 
```

# jquery - 使用 jQuery 插件初始化后向 TinyMCE 添加模糊事件

> ID：11327568
> 
> 赞同：0
> 
> 时间：2012-07-04T10:48:02.387
> 
> 标签：jquery, backbone.js, tinymce

我有一个使用 TinyMCE jQuery 插件创建的 TinyMCE 编辑器，初始化为

```
$('textarea').tinymce(mceOptions); 
```

我想为模糊事件添加一些行为，我见过的大多数解决方案都使用类似

```
tinyMCE.dom.Event.add(tinyMCE.getInstanceById("editor-id").getWin(), "blur", function(){
   // Blur operations
}); 
```

选项里面。

我不想这样做，因为 mceOptions 是从其他地方拉出来的，而这一切都发生在一个主干.js 视图的上下文中。在 blur 事件中，我将调用视图的方法，因此我不想告诉它在视图本身之外的任何其他地方执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T11:04:46.027

利用

```
$(tinymce.get("editor-id").getBody()).bind(
   'blur',
   function(){
      /*do whatever you want here*/
   }
); 
```

# php - 如何确定 php 是否正在从命令行运行

> ID：11327574
> 
> 赞同：1
> 
> 时间：2012-07-04T10:48:15.177
> 
> 标签：php

> **可能重复：**
> [确定 PHP 脚本的命令行与 http 执行的规范方法是什么？](https://stackoverflow.com/questions/173851/what-is-the-canonical-way-to-determine-commandline-vs-http-execution-of-a-php-s)

我有时从命令行运行 php 脚本。使用 cron 或其他一次性脚本。

我想知道它是否可以在 php 脚本中确定它是否通过命令行运行？

```
<?php

$isRunFromCommandLine = // set to (true:false) -- not sure how to do this

if($isRunFromCommandLine){
  echo 'You are running from command line';
}
else{
  echo 'You are not running php via command line'
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T10:50:43.790

> 我想知道它是否可以在 php 脚本中确定它是否通过命令行运行？

确实。检查[php_sapi_name](http://nl.php.net/manual/en/function.php-sapi-name.php) ( ) 的输出，它会告诉你是否在 CLI 模式下运行。

```
$cli = php_sapi_name( ) === 'cli';
var_dump( $cli ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T10:51:04.053

如果脚本通过浏览运行，则变量`$_SERVER['HTTP_USER_AGENT']`将设置，如果它是 vai 终端，则不会设置

```
if(isset($_SERVER['HTTP_USER_AGENT'])){
   echo "Via browse";
}
else{
   echo "Via terminal";
} 
```

# forms - Sencha Touch 2：将推送的数据加载到表单中

> ID：11327576
> 
> 赞同：2
> 
> 时间：2012-07-04T10:48:27.830
> 
> 标签：forms, sencha-touch-2, push

我在将数据加载到我推送 onSelect 的表单中时遇到了一些问题。（加载特定列表项的详细信息）

```
onProductSelect: function(_dataView, _record)
{
    Ext.getCmp('products').push({
        title: _record.data.name,
        data: _record.data,
        styleHtmlContent: true,
        xtype: 'productDetails'
    });
} 
```

我正在将另一个视图（productDetails）推送到我的 productView（它是一个 navigationView）上。数据（_record.data）在新的推送视图中可用

```
tpl: '{someField}' 
```

现在我想知道如何将这些数据（字段数据）放入表单的文本字段或按钮（或类似的东西）中。

如果有人更好地了解如何将数据放入视图/表单或如何更改视图（从列表到详细信息），请告诉我:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-19T20:03:17.833

以下是对您的代码的一些建议：

1.在 Sencha Touch 中使用下划线 ('_') 用于具有 get/set/apply/update 的变量。尽管您使用的是局部变量，但这是最佳实践。

2.单词'_record'希望是一个记录。如果是这样，那么您应该使用：

```
name = _record.get('name');
data = _record.getData(); 
```

填写表单的最佳方法是使用表单面板并将值添加到表单面板，而所有字段都分配了一个弹出器名称：

如果您的数据是：

```
data = {name: 'Kurt001', password: '12er51wfA!'} 
```

你可以使用这个：

```
Ext.define('App.view.ProductDetails', {
    extend: 'Ext.form.Panel',
    xtype: 'productdetails',

    config: {
        cls: 'product-details',
        scrollable: null,
        layout: 'vbox',

        defaults: {
            labelAlign: 'top',
            clearIcon: false
        },

        items: [{
            xtype: 'textfield',
            name: 'name'
        }, {
            xtype: 'passwordfield',
            name: 'password'
        }, {
            xtype: 'button',
            itemId: 'btnLogin'
        }]
    }
}); 
```

添加数据只需使用：

```
Ext.Viewport.down('.productdetails').setValues(data); 
```

选择：

```
var view = Ext.Viewport.down('.productdetails')
view.down('.textfield').setValue(data.name);
view.down('.passwordfield').setValue(data.password); 
```

选择

```
view.down('.field[name=name]').setValue(data.name);
view.down('.field[name=password]').setValue(data.password); 
```

要从一个视图获取数据到下一个视图，您可以遵循不同的选项：

1.将数据设置为当前视图并从该视图中获取它们。看起来你有一个清单。因此，您可以将数据应用于列表：

```
view.down('.list').myData = data; 
```

扩展版本是在配置中使用 myData 创建一个自定义列表。这样你就可以使用：

```
view.down('.list').setMyData(data); 
```

或者在你的情况下

```
_dataview.setMyData(data); 
```

2.使用商店。当您已经传递一条记录时，您可能希望将选定的字段添加到您的商店模型并简单地设置标志。

# android - 如何在 logcat 中显示我的 URL 地址（HttpPost）是什么？

> ID：11327580
> 
> 赞同：2
> 
> 时间：2012-07-04T10:48:37.777
> 
> 标签：android, http-post, tostring, logcat

我有一个登录屏幕，当用户单击登录按钮时，我需要向 URL 地址添加一些信息。这是我过去数据的代码：

```
private String postData() {
    HttpClient httpClient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost(PropertyManager.getLoginURL());

    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(4);
    nameValuePairs.add(new BasicNameValuePair("u", Uri.encode(PropertyManager.getUserId())));
    nameValuePairs.add(new BasicNameValuePair("p", Encryption.encrypt(PropertyManager.getPassword())));
    nameValuePairs.add(new BasicNameValuePair("v", PropertyManager.VER));
    nameValuePairs.add(new BasicNameValuePair("t", "0"));

    try {
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
        HttpResponse response = httpClient.execute(httppost);
        String responseBody = EntityUtils.toString(response.getEntity());
        Log.i("Server Response 1: ", responseBody);
        if (response.containsHeader("Set-Cookie")) {
                PropertyManager.setSessionID(extractSessionId(response.getHeaders("Set-Cookie")[0].getValue()));
        }
        return responseBody;
    } catch(UnsupportedEncodingException usee) {
        usee.printStackTrace();
    } catch(ClientProtocolException cpe) {
        cpe.printStackTrace();
    } catch(IOException ioe) {
        ioe.printStackTrace();
    }       
    return null;
} 
```

实际上，当我的设备通过 WiFi 和 3G 连接到 Internet 时，这种方法可以正常工作。但仅对于一台设备（索尼爱立信 - Xperia），当它连接到 3G（WiFi 可以）时，服务器会发送无意义的响应。

我需要查看我的连接地址及其详细参数。我写了这段代码：

```
Log.i("Requestd Connection", httppost.getURI().toString()); 
```

但是，我只能看到我的 URL，没有任何 nameValuePairs 参数。任何建议将不胜感激。

# installation - puppet recipe 安装 tarball

> ID：11327582
> 
> 赞同：9
> 
> 时间：2012-07-04T10:48:43.943
> 
> 标签：installation, tar, puppet, recipe

我想通过使用 puppet recipe 来安装 apache maven，但是我在任何地方都找不到有关如何执行此操作的示例。有人可以帮忙吗？Apache maven 打包为 tar.gz 文件。我正在为 puppet 使用独立设置。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-05T10:22:05.943

我使用[example42 中](https://github.com/example42)的这个片段：

```
define netinstall (
  $url,
  $extracted_dir,
  $destination_dir,
  $owner = "root",
  $group = "root",
  $work_dir = "/var/tmp",
  $extract_command = "tar -zxvf",
  $preextract_command = "",
  $postextract_command = ""
) {
  $source_filename = urlfilename($url)

  if $preextract_command {
      exec {
          "PreExtract $source_filename":
              command => $preextract_command,
              before  => Exec["Extract $source_filename"],
              refreshonly => true,
      }
  }

  exec {
      "Retrieve $url":
          cwd     => "$work_dir",
          command => "wget $url",
          creates => "$work_dir/$source_filename",
          timeout => 3600,
  }

  exec {
      "Extract $source_filename":
          command => "mkdir -p $destination_dir && cd $destination_dir && $extract_command $work_dir/$source_filename",
          unless  => "find $destination_dir | grep $extracted_dir",
          creates => "${destination_dir}/${extracted_dir}",
          require => Exec["Retrieve $url"],
  }

  if $postextract_command {
      exec {
          "PostExtract $source_filename":
              command => $postextract_command,
              cwd => "$destination_dir/$extracted_dir",
              subscribe => Exec["Extract $source_filename"],
              refreshonly => true,
              timeout => 3600,
              require => Exec["Retrieve $url"],    
      }
  }
} 
```

示例用法：

```
#Install prerequisites
exec { "VPSMonPrerequisites":
    command     => "yum install -y ${vpsmonitor::params::prerequisites}",
    unless      => "rpm -qi ${vpsmonitor::params::prerequisites}",
    timeout     => 3600,
}
#Install tgz from source url
netinstall { vpsmonitor:
    url                 => "${vpsmonitor::params::source_url}",
    extracted_dir       => "${vpsmonitor::params::extracted_dir}",
    destination_dir     => "${vpsmonitor::params::destination_dir}",
    postextract_command => "chown -R user. ${vpsmonitor::params::destination_dir}/${vpsmonitor::params::extracted_dir}",
    require             => [ Exec["VPSMonPrerequisites"], User["user"] ],
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-14T08:50:54.873

有一个 Puppet 模块可以为您完成这项工作：[dsestero/download_uncompress](https://forge.puppet.com/dsestero/download_uncompress)

例子：

```
$phpstorm_version = '2017.2.1'

download_uncompress { 'PhpStorm':
  download_base_url => 'https://download.jetbrains.com/webide',
  distribution_name => "PhpStorm-${phpstorm_version}.tar.gz",
  dest_folder       => '/opt',
  creates           => "/opt/phpstorm-${phpstorm_version}",
  uncompress        => 'tar.gz',
} 
```

# android - ListFragment 激活项背景

> ID：11327585
> 
> 赞同：0
> 
> 时间：2012-07-04T10:48:54.230
> 
> 标签：android, android-listview, android-support-library, android-listfragment

我有一个默认布局的 ListFragment，我使用 setItemChecked 检查项目。在 Honeycomb 和 ICS 上，选中的行会在我使用`simple_list_item_activated_1`布局时自动应用背景颜色。如何在预 HoneyComb 设备上实现相同的效果？在旧平台上既不可用，`state_activated`也不可用。`activatedBackgroundIndicator`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T11:43:55.540

我知道的唯一方法是创建一个带有公共布尔数组的自定义适配器，该数组跟踪列表中项目的选中状态，并使用该数组来控制`getView`.

```
if (checkedstate[position] == true){
    view.setBackgroundColor(Color.parseColor("#FF0000")); 
} else {
    view.setBackgroundColor(Color.parseColor("#000000")); 
} 
```

# python - 这是上下文管理器的有效用例吗？

> ID：11327590
> 
> 赞同：4
> 
> 时间：2012-07-04T10:49:09.707
> 
> 标签：python, with-statement

我正在为一些长期运行的控制台进程制作进度指示器，并打算像这样使用它：

```
pi = ProgressIndicator()
for x in somelongstuff:
    do stuff
    pi.update()
pi.print_totals() 
```

基本上，它应该输出某种带有点和破折号的进度条，最后输出类似“234234 bytes processing”的内容。

我认为将它用作上下文管理器会很好：

```
with ProgressIndicator() as pi:
    for x in somelongstuff:
       do stuff
       pi.update() 
```

然而，关于这个解决方案，我有几件事情让我担心：

*   额外的缩进使指示器功能看起来比实际更重要
*   我不想`ProgressIndicator`处理循环中可能发生的任何异常

这是上下文管理器的有效用例吗？您还能建议哪些其他解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T11:06:04.060

这绝对是一个有效的用例。如果您不想，上下文管理器不必处理异常，尽管您希望结束输出进度条的行以防止它与回溯混淆，并且不打印总数如果它通过异常退出。

关于缩进，我认为让用户看到进度实际上是一个非常重要的功能，因此它可以占用缩进级别。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T11:11:39.257

有一个 GUI 应用程序，它有一个非常相似的`ProgressTask`API，你可以像这样使用它：

```
def slow_func():
    t = nuke.ProgressTask()
    t.setMessage("Doing something")
    for x in range(100):
        do_something()
        t.setProgress(x+1) 
```

`ProgressTask.__del__`调用时，进度条 UI 消失。这在大多数情况下效果很好，但是如果引发异常（例如 by `do_something()`），则回溯对象会保留对该`ProgressTask`对象的引用，因此进度条会卡住（直到发生另一个回溯）

`ProgressTask`实现了上下文管理器协议，它可以使用该方法`__exit__`来确保进度条被隐藏。

对于命令行 UI（听起来像您正在编写），这可能不是问题，但您可以执行类似的清理任务，例如显示`######### 100% (error)`类型栏，并确保回溯输出没有混乱等

没有理由您的进度条类不能以两种方式使用 - 大多数上下文管理器都可以完美地用作常规对象和上下文管理器，例如：

```
lock = threading.Lock()
lock.acquire()
lock.release()
# or:
with lock:
    pass 
```

# php - PHP str_replace 将函数/文件作为模板系统的一部分包含在内

> ID：11327591
> 
> 赞同：4
> 
> 时间：2012-07-04T10:49:12.713
> 
> 标签：php, str-replace

概述：我正在为我的网站制作一个诱人的系统，目前进展顺利，并且正在按照我的预期工作，唯一的问题是当我想要像 {PAGE_SIDEBAR} 这样的东西来显示文件模板时/sidebar.php 或类似的东西。

我在用

```
//loads of other str_replace here
$body = str_replace("{PAGE_SIDEBAR}, include("template/sidebar.php"), $body);
echo $body; 
```

这可行，但是它包含正文开头的文件，而不是 {PAGE_SIDEBAR} 所在的位置。标签在哪里，它显示数字 1。

请参阅屏幕截图以获得更好的解释：

[渲染模板之前的样子](http://www.jamesmoorhouse.co.uk/stack_overflow/str_replace/before_str_replace.png)

[使用上面的插入代码](http://www.jamesmoorhouse.co.uk/stack_overflow/str_replace/include_method.png)

此外，对于兴趣点，使用 file_get_contents() 而不是 include() 的外观如何：http://www.jamesmoorhouse.co.uk/stack_overflow/str_replace/file_get_contents_method.png

理想情况下，我希望它可以像使用 include 方法一样工作，但会显示 file_get_contents 方法放置它的位置。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-04T10:51:50.100

您必须使用[输出缓冲](http://php.net/manual/en/ref.outcontrol.php)`include`捕获吐出的所有内容才能将其用作字符串：

```
ob_start();
include("template/sidebar.php");
$str_sidebar = ob_get_clean();
$body = str_replace("{PAGE_SIDEBAR}", $str_sidebar, $body);
echo $body; 
```

如果要替换很多占位符，您可能需要使用基于正则表达式的回调解决方案，这样您就不必为每个占位符重复此代码。[请参阅我的](https://stackoverflow.com/a/9784039/50079)答案以获取入门知识。

# google-chrome-extension - 谷歌浏览器扩展 - 防止 jquery ajax 请求上的 cookie 或使用 chome.extension

> ID：11327593
> 
> 赞同：2
> 
> 时间：2012-07-04T10:49:54.473
> 
> 标签：google-chrome-extension

我现在有一个很棒的 chrome 扩展。

如果用户没有付费让图像显示在主列表中，它基本上会遍历网络拍卖网站的 HTML 列表。显示默认图像。

*   我的插件使用 jQuery Ajax 请求来加载拍卖页面并找到主图像以显示为任何丢失图像的缩略图。效果很好。
*   该插件找到正确的图像 url 并将 HTML Dom 更新为新图像并设置新的宽度。

问题是，拍卖网站跟踪所有页面浏览量并将其保存到网站的“最近查看”部分，“用户可以看到他们点击的任何拍卖”

ISSUE - 我的插件使用 ajax，cookie 是通过 jQuery ajax 请求发送的。我很确定我无法修改此请求中的 cookie，因此拍卖网站会跟踪该请求，并且对于任何缺少图像的列表，此列表现在显示在我的“最近查看”中，即使我实际上没有导航到它。

1.  我可以删除 ajax 请求的 cookie（我认为我不能）
2.  chrome可以删除cookie吗（仅适用于ajax请求）
3.  我可以让 chrome 发出请求吗（例如 curl，没有 cookie？）

只是为了好奇。这是此拍卖网站上缺少图像的页面

[http://www.trademe.co.nz/Browse/SearchResults.aspx?searchType=all&searchString=toaster&type=Search&generalSearch_keypresses=9&generalSearch_suggested=0](http://www.trademe.co.nz/Browse/SearchResults.aspx?searchType=all&searchString=toaster&type=Search&generalSearch_keypresses=9&generalSearch_suggested=0)

感谢您的任何意见，约翰。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T11:05:47.417

您可以使用[`webRequest`](http://code.google.com/chrome/extensions/webRequest.html)API 拦截和修改请求（包括空白标头）。但是，它不能用于修改在 Chrome 扩展程序的上下文中创建的请求。如果您想将此 API 用于 cookie-blanking 目的，您必须在非扩展上下文中加载页面。通过[创建新选项卡](http://code.google.com/chrome/extensions/tabs.html#method-create)，或使用屏幕外选项卡（使用[实验性的 offscreenTabs API](http://code.google.com/chrome/extensions/experimental.offscreenTabs.html)。

另一种选择是使用[`chrome.cookie`](http://code.google.com/chrome/extensions/cookies.html)API，并绑定一个`onChanged`事件。然后，您可以拦截 cookie 修改，并使用[`chrome.cookies.set`](http://code.google.com/chrome/extensions/cookies.html#method-set).

最后一个选项是在隐身模式下创建一个新的窗口+标签。此方法不可靠，不应使用：

*   用户可以禁止访问隐身模式
*   用户可能在隐身模式下导航到页面，导致 cookie 字段被填充。
*   它具有破坏性：创建了一个新窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T10:58:10.670

大概这种 AJAX 交互是从内容脚本运行的？您可以从后台页面运行它并将数据传递给内容脚本吗？我**相信**后台页面在不同的上下文中运行，不应该发送正常的 cookie。

# visual-studio - Visual Studio 2005 / 2008 中的数据选项卡和数据集

> ID：11327597
> 
> 赞同：0
> 
> 时间：2012-07-04T10:50:27.043
> 
> 标签：visual-studio, visual-studio-2008, visual-studio-2005, bids

我在 VS 2005 和 VS 2008 中都建立了一些报告。

在 VS 2005 中，我在设计页面上有 3 个选项卡 - “预览”、“布局”和“数据”。

在 VS 2008 中，我只有 2 个 - 'Design' 和 'Preview'

任何人都可以在正确的方向上引导我，因为它是我在 VS 2008 中寻找的 * ***“数据”*** ***的****2005 选项卡中的内容**

 ***这显示了正在使用的 SQL 查询的非常简单的视图，并且可以轻松地进行修改。**

我在 VS 2008 中找不到这个，只有一个显示所有 HTML 代码的“查看代码”选项？？？

非常感谢任何帮助。

（我尝试这样做的原因是原始报告是在 VS 2005 中构建的，并且已转换为 VS 2008，现在需要编辑，如果我对报告中的 SQL 查询有一个简单的视图，这会容易得多）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T14:38:25.677

我会回答我自己的问题，因为我相信我已经找到了我正在寻找的东西。

启用“报告数据”工具栏后，您可以访问数据集、构建新数据集并隔离报告设计中使用的每个 sql 查询以便于编辑。*

# ruby - 错误路线已解决

> ID：11327598
> 
> 赞同：1
> 
> 时间：2012-07-04T10:50:26.943
> 
> 标签：ruby, ruby-on-rails-3, resources, routing, routes

我的 routes.rb 中有以下内容

```
resources :webcasts do

   resource :slide_deck do
      get 'wizard', :on => :collection
      resources :slides
   end

end 
```

[注意 slide_deck 是一个单一的资源]

运行`$rake routes`让我获得了与 slide_deck#wizard 相关的以下路线：

```
wizard_webcast_slide_deck GET    /webcasts/:webcast_id/slide_deck/wizard(.:format)          slide_decks#wizard 
```

我可以点击网址：`/webcasts/:webcast_id/slide_deck/wizard`没有问题。

我的问题是 url 助手；wizard_webcast_slide_deck，不解析到这个 url。

它解析为：`/webcasts/:webcast_id/slide_decks/wizard`[注意 slide_decks 的复数]

显然，我可以通过使用硬编码的 url 而不是 url 助手来解决这个问题，但是是什么导致了这个问题，我该如何解决呢？

# android - 禁用网络连接后，活动按钮不会触发 onClick 功能

> ID：11327599
> 
> 赞同：0
> 
> 时间：2012-07-04T10:50:29.877
> 
> 标签：android, android-emulator, android-activity

我正在编写一个应用程序，如果网络可用，它将向服务器发送 HTTP 请求，或者如果网络不可用，则将它们排队。`F8`在禁用网络（通过或飞行模式）后，我遇到了活动按钮不起作用的问题。在禁用网络之前，按钮正确触发其 onClick 功能，禁用网络后，按钮根本不会触发其 onClick 功能。

下面是我正在使用的代码。目前这是一个非常微不足道的应用程序（所有由 Eclipse 生成的存根代码），我只是无法弄清楚是什么导致了这个问题。有没有人遇到过这样的问题？感谢您的任何建议。

*在模拟器上的 Android 4.0.1 AVD 中运行此代码。*

**Activity_Main.xml**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >   

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/textView1"
    android:layout_alignParentBottom="true"
    android:layout_marginBottom="24dp"
    android:text="Send Request"
    android:onClick="SendRequestOnClick" />

</RelativeLayout> 
```

**MainActivity.java**

```
public class MainActivity extends Activity
{
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu)
    {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    public void SendRequestOnClick(View v)
    {
        Log.i(getPackageName(), "Button 1 Clicked!");

    }     
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T10:57:21.340

在你的 Java 类中试试这个

```
((Button)findViewById(R.id.button1)).setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            Log.i(getPackageName(), "Button 1 Clicked!");
        }
    }); 
```

`XML`并从文件中删除这一行`android:onClick="SendRequestOnClick"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T16:08:09.200

在设备上尝试了代码之后（在@anDroider 建议之后。谢谢！）事实证明，上面的代码可以正常工作，正如预期的那样。这似乎是模拟器中的错误或限制。我还注意到与网络连接相关的广播接收器没有在模拟器上触发的问题，这可能是相关的，也可能不是相关的（只是在这里注意它，以防有人偶然发现这样的问题）。

# iphone - 如何在苹果开发者网站创建配置帐户的设备中安装 iphone 应用程序？

> ID：11327607
> 
> 赞同：0
> 
> 时间：2012-07-04T10:50:43.573
> 
> 标签：iphone

我在 xcode 中开发了一个应用程序。现在我需要将它安装在 iphone 设备中以便我可以测试它。但我不知道如何做到这一点，因为我对这个领域很陌生。我想在苹果开发者的网站上安装它创建配置帐户（按照说明）。请我需要一步一步的指导如何做到这一点。我在这里呆了很长时间。如果您有任何链接或教程，请参考。提前谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T12:22:22.763

一切都详细解释希望这对你有帮助

[http://www.raywenderlich.com/8003/how-to-submit-your-app-to-apple-from-no-account-to-app-store-part-1](http://www.raywenderlich.com/8003/how-to-submit-your-app-to-apple-from-no-account-to-app-store-part-1)

[http://www.raywenderlich.com/8045/how-to-submit-your-app-to-apple-from-no-account-to-app-store-part-2](http://www.raywenderlich.com/8045/how-to-submit-your-app-to-apple-from-no-account-to-app-store-part-2)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-04T11:32:30.290

始终尝试阅读并使用 Apple 开发者网站来完成此操作。

你可以从[这里开始](https://developer.apple.com/ios/manage/overview/index.action)

但是我正在详细写下这些步骤。

以下是将 IPA 部署到 iPhone/IPAD 时必须执行的详细信息。

```
Create Developer account and Developer Certificate
Create  Key-chain certificate
Adding a Device
Create  App IDs
Create  Provisioning profiles
Build your App using the created Developer Certificate & Provisioning profiles. 
```

**创建开发者账号和开发者证书**

Step1：访问网站[http://developer.apple.com/iphone/program/](http://developer.apple.com/iphone/program/)

第二步：请点击“立即报名”按钮

第三步：将出现一个窗口，其中包含一些信息和一个继续按钮。单击继续按钮

步骤 4：将出现另一个窗口，询问“您是新用户还是已注册的 Apple 开发人员？” .

Step5：请选择正确的选项（假设我们之前注册了Apple开发者）。

Step6: 还有一个窗口会询问你的角色。它可能是个人或公司。

第7步：选择正确的选项并使用您的Apple ID登录。

**创建钥匙串证书**

Step8：注册后，您必须使用“钥匙串访问”工具。您可以在 Finder 搜索位置搜索“钥匙串”，然后双击显示的文件。这将用于验证您的计算机。

Step9：点击钥匙串访问菜单-->证书协助-->向证书颁发机构申请证书。

Step10：将出现一个新窗口，其中包含电子邮件地址、常用名称等部分。

Step11：在“用户电子邮件地址”字段中输入您用于苹果开发者证书的电子邮件地址。

Step12：使用任何一个名称作为通用名称。

Step13：点击“保存到磁盘”按钮。

Step14：另一个寡妇将出现两个组合框。它们是密钥大小和算法。

Step15: 选择 2048 作为 Key Size 和 RSA 作为算法

Step16：点击继续按钮。这将生成密钥并将其保存到您指定的位置。

Step17：在下一个窗口中单击“完成”。

Step18：请访问[http://developer.apple.com/iphone/manage/overview/index.action](http://developer.apple.com/iphone/manage/overview/index.action)

Step19：您可以在窗口左侧看到一个目录，如 Home、Certificates、Devices、App IDs、Provisioning、Distribution。

Step20：点击证书，然后点击“添加证书”按钮。

Step21：单击“选择文件”按钮并找到您之前保存的证书文件，然后点击提交按钮。

Step22：点击提交后，一封电子邮件将发送到您在 Keychain Access 的证书颁发机构 (CA) 申请表中指定的电子邮件地址。

Step23：打开您的邮件帐户并批准请求。

Step24：Approval 状态将显示在开发者站点 Certificates 部分。

Step25: 批准后，使用下载按钮下载证书并将证书保存到一个位置

Step26：双击该文件，您将看到一个对话框窗口，该窗口将询问将证书添加到密钥链的权限。

Step27：点击“确定”。这将在您的钥匙串中安装您的 iPhone 开发证书。

**添加设备**

Step28：iPhone 开发者计划允许您每个团队最多拥有 100 台设备。要注册设备，您必须拥有唯一设备标识 (UDID) 编号。这可以在 Xcode 中找到。

Step29：将设备与机器连接，然后打开XCode-->Window-->Organizer。

步骤 30：将在左侧的“设备”列表中出现一个窗口，其中包含您的设备名称。

Step31：单击设备名称并从“摘要”选项卡中复制标识符字符串。

Step32：现在我们要添加一个设备。转到我们之前登录的 Developer.Apple 站点。

Step33：点击“设备”，然后点击“添加设备”。

Step34：提供您从 XCode-->Window-->Organizer 复制标识符字符串的设备名称和设备 ID。

Step35：为了获取配置文件，您首先需要创建一个 App ID。App ID 允许应用程序进行通信它也可以用于
在一组应用程序之间共享钥匙串信息，例如密码。

Step36：要创建新的 App ID，请单击程序门户“App ID”部分中的“New App ID”按钮。

Step37：App ID 由 Apple 生成的 10 个字符的“Bundle Seed ID”前缀和团队管理员在 Program Portal 中创建的“Bundle Identifier”后缀组成。App ID 可能类似于以下示例：9F456G1234.com.apple.YourApplication 或 9F456G1234.com.YourApplication。

Step38：填写所有必填信息，然后单击提交按钮。

**创建配置文件**

提供三种类型的配置文件

他们是：

```
 Ad Hoc
 Development
 Distribution. 
```

**注意**：运行试用版时，Ad Hoc 和 Distribution 配置文件不可用。如果您正在运行试用版，则应使用开发人员的配置文件进行构建。

Step37：要创建它，点击Developer.Apple网站中的“iPhone Developer Program Portal”，在页面右侧，在“iPhone Developer Program”下。

Step38：点击页面左侧的“Provisioning”。

Step39：点击右上角的“New Profile”按钮，在开发选项卡下。

Step40：输入配置文件名称，选择您要用来验证配置文件的证书，选择要与此配置文件关联的 App ID，然后选择您希望配置文件支持的设备。

Step41：点击提交。

**使用创建的开发人员证书和配置文件构建您的应用程序。**

以下是添加新设备后安装配置文件的详细信息。

第 1 步：转到 Developer.Apple 站点 URL：[https ://developer.apple.com/devcenter/ios/index.action](https://developer.apple.com/devcenter/ios/index.action)

Step2：登录 - 使用您的用户名和密码登录

Step3：点击iOS Dev Center选项卡。您可以在窗口右侧看到iOS Developer Program部分。

Step4：您可以在 iOS Developer Program 部分看到一个名为“iOS Provisioning Portal”的选项卡。

Step5：点击选项卡。您可以在窗口左侧看到Home，Certificates，Devices，App IDs，Provisioning，Distribution的目录。您可以在Devices -->Available Devices部分看到新添加的设备。

第六步：进入配置选项卡-->配置文件。您可以在那里看到配置文件的状态为活动。

Step7：点击Provisioning profile名称对应的下载按钮，下载成功后文件将在您的Downloads文件夹中。

Step8：打开你的Xcode界面，进入Window-->Organizer。

Step9：点击管理器，您可以看到管理器窗口出现。

Step10：双击下载的配置文件。您可以在管理器窗口开发人员配置文件选项卡中看到配置文件。

第 11 步：您还可以在 Provisioning Profiles-->Included Devices 部分看到包括设备数量。

Step12：关闭Organizer窗口，进入Xcode-->Project-->EditActiveTarget“Your Project”选项卡。

Step13：切换到Build部分，在搜索区域搜索“Code Singing Identity”。

Step14：您可以在窗口中看到代码签名部分，并将代码签名身份和任何 IOS 设置为您的配置文件名称。

Step15：关闭窗口，进入 Build 菜单并使用 Clean All Target 选项清理项目的所有目标。

第 16 步：构建并运行应用程序。

**从 Xcode 4.3 创建 IPA 的步骤**

Step1：在构建设置中设置您的项目捆绑标识符名称和部署目标。

```
 to do this,please click on your project and click target-->summary tab. 
```

步骤2：从上面相同的窗口导航到 Build 选项卡并设置您的 Base SDK 、IOS 部署目标、目标设备系列。

Step3：在IDE右上角的scheme下拉菜单中，选择iOs device。

Spep4：在方案编辑器窗口中，选择左侧的“存档”方案并将构建配置设置更改为发布。

```
 to do this,please click on X-code menu:Product -->Edit Schema 
```

Step5：然后进入 X-code 菜单：Product 并选择 Archive。

Step6：完成上述操作后，应用程序将开始构建，并在构建过程完成后出现一个管理器窗口。

```
 if the Organizer window doesn't appeared, please go to X-code menu: Window -->Organizer 
```

Step7：管理器窗口将出现应用程序名称和创建日期和时间。请输入正确的评论。

Step8：点击分发按钮。

Step9：会出现一个窗口，选择“Save for Enterprise or Ad-Hoc Deployment”选项。

第十步：点击下一步按钮。

Step11：选择您的代码签名身份，然后单击下一步按钮。

Step12：点击下一步按钮后会出现一个保存窗口。选择您的位置并输入您的 IPA 名称。

步骤 13：单击确定。您应该能够在系统保存的路径中看到 IPA。

Step14：通过 iTunes 将 IPA 安装到您的设备

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T10:57:09.743

苹果开发者网站上有分步说明。

您需要创建和应用程序 ID，基于该 ID 创建一个配置文件，使用您的开发人员证书将其安装到您的设备上，并确保应用程序 ID 与应用程序本身中的 ID 匹配。

然后构建应用程序以发布，获取应用程序并将其放入 iTunes 并与您的设备同步

# sql - 关系 vs XML vs 图形数据库 - 优点和缺点 - 方便 - 未来

> ID：11327612
> 
> 赞同：1
> 
> 时间：2012-07-04T10:50:57.300
> 
> 标签：sql, xml, database, graph, relational

我想讨论并从有经验的用户那里获得关于这些主题的良好分析。我和他们三个一起工作。

*   SQL -> 成熟度。约束、触发器、分布式表...

*   XML -> 快速而强大的查询

*   图表 -> 直观的 OOP，在转换、连接、索引等方面最快和最优。通过设计，易于通过图形界面查看。

所以我的问题是，如果时间是唯一无法解决的问题，那么一旦图形数据库结合了强大的查询引擎（如 xquery）以及已建立的 SQL 数据库的所有功能（特别是远程表、约束、触发器），它们是否应该是未来？

您认为当今获取知识的最佳方式是什么？

# handlebars.js - 如果 helper else 未定义，则自定义车把

> ID：11327617
> 
> 赞同：15
> 
> 时间：2012-07-04T10:51:26.387
> 
> 标签：handlebars.js

我有一个自定义助手，如下：

```
Handlebars.registerHelper('hasAccess', function(val, fnTrue, fnFalse) { 
    return val > 5 ? fnTrue() : fnFalse();
}); 
```

和我的模板，如下：

```
{{#hasAccess this.access}}
    You have access!
{{else}}
    You do not have access
{{/hasAccess}} 
```

它有效，但 fnFalse 未定义。那么，我应该如何渲染“else”分支？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-07-04T11:10:04.713

Handlebars 为自定义助手提供了一个对象，其中包含要应用的不同功能，`options.fn`并且`options.inverse`. 请参阅[https://handlebarsjs.com/guide/block-helpers.html#conditionals](https://handlebarsjs.com/guide/block-helpers.html#conditionals)

你的助手可以写成

```
Handlebars.registerHelper('hasAccess', function(val, options) {
    var fnTrue = options.fn, 
        fnFalse = options.inverse;

    return val > 5 ? fnTrue(this) : fnFalse(this);
}); 
```

和一个演示

```
Handlebars.registerHelper('hasAccess', function(val, options) { 
    var fnTrue = options.fn, 
        fnFalse = options.inverse;

    return val > 5 ? fnTrue() : fnFalse();
});

var template = Handlebars.compile($('#tpl').html() );
$("body").append( "<h1>access : 1</h1>" );
$("body").append( template({access:1}) );

$("body").append( "<h1>access : 6</h1>" );
$("body").append( template({access:6}) );
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.11/handlebars.min.js"></script>

<script type='text/template' id='tpl'>
{{#hasAccess this.access}}
    You have access!
{{else}}
    You do not have access
{{/hasAccess}}
</script>
```

# c# - iTextSharp 将字体系列设置为块

> ID：11327620
> 
> 赞同：1
> 
> 时间：2012-07-04T10:51:34.763
> 
> 标签：c#, itextsharp, font-family

因为我使用动态文本，斜体或粗体文本可以在任何地方，将所有内容切成块不是一种选择，所以我必须使用 html 解析器。

输入字符串是

```
ąčęėįšųū90-žthis <i>is <b>bold ąčęėįšųū90-ž</i></b> text 
```

字符串使用 iTextSharp html 解析器格式化：

```
private Paragraph CreateSimpleHtmlParagraph(String text)
{
    //Our return object
    List<Chunk> c = new List<Chunk>();
    Paragraph p = new Paragraph();
    var styles = new StyleSheet();           
    using (StringReader sr = new StringReader(text))
    {
        //Parse and get a collection of elements
        List<IElement> elements = iTextSharp.text.html.simpleparser.HTMLWorker.ParseToList(sr, styles);
        foreach (IElement e in elements)
        {
            var chunks = e.Chunks;
            foreach (var chunk in chunks) //list of chunks
            {                        
                chunk.Font.SetFamily(""); //how to set font family here
            }
            p.Add(e);                    
        }
    }
    return p; //getting all the special chars (ąčęėįšųū90-ž...)
} 
```

主窗体中的代码：

```
Paragraph pr1 = CreateSimpleHtmlParagraph("ąčęėįšųū90-žthis <i>is <b>bold ąčęėįšųū90-ž</i></b> text");
doc.Add(pr1); 
```

但在 PDF 中我只看到

> š90- ž这*是**粗体š90-ž***文本

并且没有其他字符 ( `ąčęėį`)。我知道它与字体有关，但找不到问题在哪里。整个文档的字体应该是相同的，time new roman, arial, ect., 任何可以显示我的特殊字符（cp1257，波罗的海编码）的字体。

通常，当我必须格式化文本时，我会使用 Chunks 和我自己的字体：

```
Font arial10n = PdfFontManager.GetFont("c:\\windows\\fonts\\arial.ttf", 10);

colClientTxt.AddText(new Chunk(row["name"].ToString() + "\n", arial10n)); 
```

在 PdfFontManager 类中：

```
public static Font GetFont(string name, int size)
    {
        BaseFont baseFont = BaseFont.CreateFont(name, BaseFont.CP1257, BaseFont.EMBEDDED);
        Font font = new Font(baseFont, size);
        return font;
    } 
```

那么，如何设置字体系列，或者也许有另一种方式来格式化我的文本？

# ios - 如何自定义一些 UITableView 的单元格高度，但将其他的保留为默认值？

> ID：11327623
> 
> 赞同：0
> 
> 时间：2012-07-04T10:51:39.133
> 
> 标签：ios, objective-c, uitableview

要指定表格视图的单元格高度，我们使用委托方法，

```
- (CGFloat) tableView:(UITableView*)tableView heightForHeaderInSection:(NSInteger)section 
```

但是这种方法会询问每一行的单元格高度，如果我希望其中一些是默认值，我该怎么办？

对于单元格高度，我们可能会`UITableView#rowHeight`为委托方法内的那些默认行返回，**但我还希望自定义部分（不是全部）部分标题/单元格**。

但是我无法从表格视图中获取默认值，尤其是对于分组样式的表格视图，有人有解决方案吗？

谢谢！

编辑：我很抱歉没有说得很清楚。事实上，单元格高度不是我想要部分自定义的唯一一个，还有像节标题这样的其他东西（可能还有更多，比如删除按钮样式等）。

有没有不模仿默认行为的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T11:13:38.160

单元格的默认高度是 44 .. 所以当您的条件不满足时，您可以返回它..

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {

      if (YOUR_SPECIFIC_CONDITION) {  
     return 180.0;
     }
     return 44.0; 
 } 
```

愿这对你有帮助..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T02:01:02.207

如果您不想在所有情况下都使用默认行为，那么您仍然必须在非特殊情况下模仿默认行为。

对于标头，您仍然必须实施

```
- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section; 
```

在其中，您必须回答您不想更改的标题的默认高度，以及您想要更改的专用标题高度。

同样，在

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath*); 
```

您仍然必须模仿那些您不想更改的单元格的默认行为。

如果需要，您可以使用情节提要完成所有这些操作：为每个单元创建具有唯一标识符的专用单元，然后返回与它们相关的单元高度。如果您采用这条路线，那么您可能只需使用 dequeueReuaableCellWithIdentifier 并使用该标识符的高度值即可逃脱。只需使用一个唯一的单元格标识符，其高度适合您正在考虑的每个单元格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T10:53:39.170

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath 
{
    if (indexPath.row == 0 && indexPath.section==0) 
    {  
        return 180.0;
    }
    else
    {
        return 44.0;
    }
} 
```

# clojure - 在粘液中加载新的依赖项？

> ID：11327624
> 
> 赞同：5
> 
> 时间：2012-07-04T10:51:43.367
> 
> 标签：clojure, swank-clojure

我正在使用 emacs 和 swank-clojure。如何解决以下情况 -

1.  我在 project.clj 中添加了一个新的依赖项。
2.  我在 shell 中运行 lein deps 以获取新的 dep。
3.  我有一个现有的 slime 会话已打开，并且想要使用新 dep 中的功能。

如何让现有的 slime 会话加载新的依赖项？

谢谢，穆尔塔萨

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T10:57:54.313

您应该看一下[pomegranate](https://github.com/cemerick/pomegranate)，它旨在提供与您描述的功能相似（如果不相同）的功能。

[正如@gergek](https://stackoverflow.com/users/216798/georgek)在评论中指出的那样，`leiningen2`附带`pomegranate`，因此，如果您在 lein2 上，则必须在 slime REPL 中触发类似以下内容：

```
(require '[cemerick.pomegranate :as p])
(p/add-dependencies :coordinates '[[org.clojure/core.logic "0.7.5"]]) 
```

查看[`add-dependencies`文档](https://github.com/cemerick/pomegranate/blob/master/src/main/clojure/cemerick/pomegranate.clj#L85)以获取有关如何使用它的更多信息。

# javascript - JS新手：点击按钮后如何执行部分HTML

> ID：11327628
> 
> 赞同：1
> 
> 时间：2012-07-04T10:51:51.917
> 
> 标签：javascript, jquery

我对 JS 和 jQuery 还很陌生，我对此感到困惑。

我正在做一个电子商务，我有一个页面显示产品的详细信息。我有一个**缩略图轮播**。如果单击缩略图，则主图像将替换为所选图像。

然后，在页面的另一部分，我有一些小**颜色框**：如果您选择其中一个（例如红色），缩略图列表将被过滤并仅显示红色缩略图。这是通过自定义脚本完成的，该脚本将颜色框的类值与缩略图的类值相匹配。

我正在努力尝试显示所选颜色的更大图像。正确的用例是：

1.  用户打开产品页面
2.  大图查看器显示大图，例如红色版本的照片（对应于轮播中的第一个缩略图） - 可以
3.  轮播显示 5 个缩略图，3 个对应产品的红色版本，2 个对应黄色 - 可以
4.  用户玩轮播：点击缩略图会触发相应的大图 - 这没关系
5.  用户决定按颜色过滤并单击黄色小颜色框 - 可以
6.  轮播被过滤并仅显示产品黄色版本的缩略图 - 这没关系
7.  5\. 与过滤列表中的第一个缩略图对应的大图像应该被触发并且应该在大图像查看器中弹出 - 这就是我正在努力解决的问题。

这是**大图像查看器+轮播的代码**：

```
<div id="product">
    <!-- BIG IMAGE VIEWER - The first that gets loaded is the first big image corresponding to  the first thumbnail --> 
    <div id="productimg"><a href="full_size_red_01.jpg" class="cloud-zoom" id="zoom1" rel="position: 'inside', showTitle: false"><img src="big-red_01.jpg" alt="" title="M1" /></a></div>
     <!-- END BIG IMAGE VIEWER --> 

    <div id="productdet">
    <!-- THUMBNAILS CAROUSEL -->
      <ul id="mycarousel" class="jcarousel-skin-tango">
      <li><a href='full_size_red_01.jpg' class='cloud-zoom-gallery' rel="useZoom: 'zoom1', smallImage: 'big_red_01.jpg' " title='M1'><img src="thumb_red_01.jpg" alt="M1" class="Rosso/Red" /></a></li>
      <li><a href='full_size_red_02.jpg' class='cloud-zoom-gallery' rel="useZoom: 'zoom1', smallImage: 'big_red_02.jpg' " title='M1'><img src="thumb_red_02.jpg" alt="M1" class="Rosso/Red" /></a></li>
      <li><a href='full_size_red_03.jpg' class='cloud-zoom-gallery' rel="useZoom: 'zoom1', smallImage: 'big_red_03.jpg' " title='M1'><img src="thumb_red_03.jpg" alt="M1" class="Rosso/Red" /></a></li>
      <li><a href='full_size_yellow_01.jpg' class='cloud-zoom-gallery' rel="useZoom: 'zoom1', smallImage: 'big_yellow_01.jpg' " title='M1'><img src="thumb_yellow_01.jpg" alt="M1" class="Rosso/Red" /></a></li>
      <li><a href='full_size_yellow_02.jpg' class='cloud-zoom-gallery' rel="useZoom: 'zoom1', smallImage: 'big_yellow_02.jpg' " title='M1'><img src="thumb_yellow_02.jpg" alt="M1" class="Rosso/Red" /></a></li>

      </ul>
    <!-- END THUMBNAILS CAROUSEL -->
    </div> 
```

这是**颜色选择工具**的代码：

```
<div class="controls color">
    <label class="Rosso/Red"><input type="radio" name="modifiers[1]" value="1" /> Rosso/Red</label>                             
    <label class="Giallo/Yellow"><input type="radio" name="modifiers[1]" value="2" /> Giallo/Yellow</label>                             
    </div>
</div> 
```

缩略图+大图像查看器逻辑通过 jcarousel 进行管理。

管理缩略图过滤的自定义 js 是这样的：

```
var select = {
wrapper: null,
controls: null,
resetBtn: $('<p id="reset">Vedi tutti i colori</p>'),
images: null,
carousel: null,
carouselBtns: null,
isClickable: false,
init: function(){
    this.carousel = $('#mycarousel');
    this.wrapper = $('#productdet');
    this.controls = $('div.controls');
    this.images = this.wrapper.find('img');

},
filter: function(){
    this.controls.on('click', 'input[type="radio"]', function(){
        select.carouselBtns = select.wrapper.find('div.jcarousel-clip').nextAll('div');
        var filterName = $(this).closest('label').attr('class').split('/')[0],
            filteredImg = select.wrapper.find('img[class*="'+filterName+'"]'),
            itemLen = select.wrapper.find('li').length;

        if( filteredImg.length ){
            select.controls.find('label').removeClass('on');
            $(this).closest('label').addClass('on');

            select.images.closest('li').hide();

            select.wrapper.find('div.jcarousel-clip').nextAll('div.jcarousel-prev').click();
            filteredImg.closest('li').show(0, function(){
                if ( filteredImg.length < 5 ) {//itemLen

                    select.carouselBtns.hide();

                }
            });
        }

        select.isClickable = true;
        select.preventItemAdding();
    });
},
preventItemAdding: function(){
    var add = $('#add');

    if ( !select.isClickable ) {
        add.addClass('off');
    }else{
        add.removeClass('off');
    }
},

resetAll: function(){
    select.resetBtn.click(function(){
        select.controls.find('label').removeClass('on');
        select.images.closest('li').show();
        select.carousel.jcarousel('reload');

        select.carouselBtns.show();
        select.isClickable = false;
        select.preventItemAdding();
    });
}
}; 
```

任何帮助将非常感激。谢谢！！

解决方案

我在 JS 中的“过滤器”函数中添加了几行（感谢@vrutberg）：

```
var imageUrl = $(".jcarousel-item:visible:eq(0) .cloud-zoom-gallery").attr("rel").substr(31).slice(0, -2);
$("#productimg #wrap #zoom1 img").attr("src", imageUrl); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T13:03:46.237

如果我正确阅读了您的问题，我认为您需要做的是在`filter`函数退出之前添加一些代码，这基本上是这样做的：

1.  在图像轮播中找到第一个可见图像（提示：使用 :visible 选择器[http://api.jquery.com/visible-selector/](http://api.jquery.com/visible-selector/)）
2.  从中提取文件名
3.  在大图上设置正确的文件名

这应该够了吧。祝你好运！

# spring - 从 URL 中删除 jsessionid

> ID：11327631
> 
> 赞同：22
> 
> 时间：2012-07-04T10:51:56.877
> 
> 标签：spring, tomcat6, shiro, prettyfaces

我正在使用以下技术开发一个项目：

*   春天
*   ShiroFilter
*   漂亮的面孔
*   Tomcat服务器

当我在 tomcat 服务器上部署它时，我`"JSESSIONID 456jghd787aa"`在 URL 的末尾添加了一个。

我试图解决这个问题，但我无法做到。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-07-04T10:56:24.340

对于 tomcat 7，将其添加到 web.xml

```
<session-config>
  <!-- Disables URL-based sessions (no more 'jsessionid' in the URL using Tomcat) -->
  <tracking-mode>COOKIE</tracking-mode>
</session-config> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-04T11:04:41.880

以下过滤器可能会解决您的问题（来自[http://randomcoder.org/maven/site/randomcoder-website/cobertura/org.randomcoder.security.DisableUrlSessionFilter.html](http://randomcoder.org/maven/site/randomcoder-website/cobertura/org.randomcoder.security.DisableUrlSessionFilter.html)）

```
package com.companyname.projectname.web.filter;

import java.io.IOException;

import javax.servlet.Filter;
import javax.servlet.FilterChain;
import javax.servlet.FilterConfig;
import javax.servlet.ServletException;
import javax.servlet.ServletRequest;
import javax.servlet.ServletResponse;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpServletResponseWrapper;
import javax.servlet.http.HttpSession;

/**
 * Servlet filter which disables URL-encoded session identifiers.
 * 
 * <pre>
 * Copyright (c) 2006, Craig Condit. All rights reserved.
 * 
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 * 
 *   * Redistributions of source code must retain the above copyright notice,
 *     this list of conditions and the following disclaimer.
 *   * Redistributions in binary form must reproduce the above copyright notice,
 *     this list of conditions and the following disclaimer in the documentation
 *     and/or other materials provided with the distribution.
 *     
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 * POSSIBILITY OF SUCH DAMAGE.
 * </pre>
 */
public class DisableUrlSessionFilter implements Filter {

/*    private static Log logger = LogFactory.getLog(DisableUrlSessionFilter.class);
*/
    /**
     * Filters requests to disable URL-based session identifiers.
     */
    public void doFilter(ServletRequest request, ServletResponse response,
            FilterChain chain) throws IOException, ServletException {
        // skip non-http requests
        if (!(request instanceof HttpServletRequest)) {
            chain.doFilter(request, response);
            return;
        }

        HttpServletRequest httpRequest = (HttpServletRequest) request;
        HttpServletResponse httpResponse = (HttpServletResponse) response;

        // clear session if session id in URL
        if (httpRequest.isRequestedSessionIdFromURL()) {
            HttpSession session = httpRequest.getSession();
            if (session != null) {
                session.invalidate();
            }
        }

        // wrap response to remove URL encoding
        HttpServletResponseWrapper wrappedResponse = new HttpServletResponseWrapper(
                httpResponse) {
            @Override
            public String encodeRedirectUrl(String url) {
                return url;
            }

            @Override
            public String encodeRedirectURL(String url) {
                return url;
            }

            @Override
            public String encodeUrl(String url) {
                return url;
            }

            @Override
            public String encodeURL(String url) {
                return url;
            }
        };

        // process next request in chain
        chain.doFilter(request, wrappedResponse);
    }

    /**
     * Unused.
     */
    public void init(FilterConfig config) throws ServletException {
    }

    /**
     * Unused.
     */
    public void destroy() {
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-12T07:18:59.147

*   Tomcat 6，在您的 context.xml 中添加 disableURLRewriting="true"

*   Tomcat 7 和 ServletFilter 已经讨论过了

*   或以编程方式：

servletContext.setSessionTrackingModes(EnumSet.of(SessionTrackingMode.COOKIE));

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-06-03T21:40:18.887

您可以将该设置添加到您的 http 标记中，如下所示：

```
<http auto-config="false" disable-url-rewriting="true"> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-11-19T21:37:56.230

正如其他人所建议的那样，您将希望将其从 Tomcat 中取出，但如果您还没有设置 cookie，Shiro 将其附加到重定向的末尾仍然会有问题。关于这个问题有两张未解决的票：

[https://issues.apache.org/jira/browse/SHIRO-360](https://issues.apache.org/jira/browse/SHIRO-360)

[https://issues.apache.org/jira/browse/SHIRO-361](https://issues.apache.org/jira/browse/SHIRO-361)

我试图让 Tuckey 的 URL Re-write 工作并在一段时间后取得了部分成功。问题是 Shiro 没有调用 response.encodeURL() 并因此触发出站规则。我能够使用以下两条规则重定向入站请求以删除会话 ID：

```
<rule>
    <note>Remove jsessionid from embedded urls - for urls WITH query parameters</note>
    <from>^/(.*);JSESSIONID=.*[?](.*)$</from>
    <to type="redirect">/$1?$2</to>
</rule>

<rule>
    <note>Remove jsessionid from embedded urls - for urls WITHOUT query parameters</note>
    <from>^/(.*);JSESSIONID=.*[^?]$</from>
    <to type="redirect">/$1</to>
</rule> 
```

这至少使它不会显示在浏览器中，但它并不能完全解决问题，因为会话 ID 是在 URL 上发送的，并且在没有它的情况下被重定向到该位置。如果它根本不出现就更好了。

**更新：**

SHIRO-360 和 SHIRO-361 已修复，修复在 Shiro 1.3.0 中。根据 SHIRO-361 中的 Brian Demers：

> 设置`sessionManager.sessionIdUrlRewritingEnabled = false`为禁用将 JSESSIONID 附加到 URL。
> 
> 注意：如果用户禁用了 cookie，如果禁用，他们将无法登录。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-04T14:57:51.543

If you are not using Servlet 3.0, you can also achieve this using a PrettyFaces Rewrite Rule: [http://ocpsoft.org/support/topic/url-rewrite-removing-the-jsessionid-from-the-url#post-410](http://ocpsoft.org/support/topic/url-rewrite-removing-the-jsessionid-from-the-url#post-410)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-08-14T10:01:06.377

码头Webapp上下文：

```
Set<SessionTrackingMode> trackingModes = new HashSet<>();
trackingModes.add(SessionTrackingMode.COOKIE);
context.getSessionHandler().getSessionManager().setSessionTrackingModes(trackingModes); 
```

# facebook - FB iframe 画布高度

> ID：11327635
> 
> 赞同：3
> 
> 时间：2012-07-04T10:52:15.130
> 
> 标签：facebook, iframe, canvas, tabs, height

我的宽度比画布高度有问题；
我使用了以下代码：

```
<div id="fb-root"></div>
<script src="http://connect.facebook.net/en_US/all.js"></script>

<script type="text/javascript">

    window.fbAsyncInit = function()
    {
        FB.init({appId: 'my_app_id', status: true, cookie: true, xfbml: true});
        FB.Canvas.setAutoGrow();
    };

</script> 
```

在标签之前插入`</body>`

它工作得很好。

但是，如果我在应用程序内部导航，则不会调整高度。如果需要，它确实会增加，但在需要时它不会减少；所以在某些情况下所有页面都保持很高。

从应用程序设置页面只能选择宽度页面选项卡（narrow:520 或 widr:810）；选项卡高度没有可用的设置。

希望有人能帮助我，非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T11:06:37.170

> 但是，如果我在应用程序内部导航，则不会调整高度。如果需要，它确实会增加，但在需要时它不会减少；所以在某些情况下所有页面都保持很高。

FB.Canvas.setAutoGrow 不会减少 iframe 的高度，它只会在必要时增加它。

根据我的测试，将尺寸明确设置为比实际高度更小的高度也不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T11:03:25.853

是的 - 目前 Facebook 上存在许多处理身高问题的错误。

这只是其中之一 - [https://developers.facebook.com/bugs/394423653950625](https://developers.facebook.com/bugs/394423653950625)

修复程序应该很快就会出来。同时-知道您并不孤单：P我们也正在遭受这种痛苦……好吧……客户正在遭受这种痛苦，我们正在遭受客户的投诉：P

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T10:55:10.880

毕竟，真正的问题来自带有 http*s* 的 facebook

您可以在此处关注问题：

```
https://developers.facebook.com/live_status 
```

如果你知道的话，你也可以设置大小。

> FB.Canvas.setSize({ 宽度: YOUR_WIDTH, 高度: YOUR_HEIGHT });

问候

# c - 打印 char[] 核心转储 C

> ID：11327638
> 
> 赞同：0
> 
> 时间：2012-07-04T10:52:22.300
> 
> 标签：c, char, printf, coredump

我正在尝试做：

```
printf("Provider: %s\n", Props->providerName); 
```

其中结构成员（来自外部库）是：

```
char providerName[256]; 
```

导致核心转储，gdb 输出为：

```
Program terminated with signal 11, Segmentation fault.
[New process 73950    ]
#0  0xfee22290 in strlen () from /lib/libc.so.1 
```

我猜 char[] 可能不会以 null 终止，但最好的解决方案是什么？

干杯!

* * *

编辑：我正在使用的结构来自外部库，并且似乎不为空（我可以成功打印它的另一个成员`char alias[256];`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T10:57:55.110

`%s`与 printf 一起使用时，尽可能使用最大宽度指示器：

```
printf("Provider: %.255s\n", Props->providerName); 
```

如果您仍然遇到段错误，而 Props 不是`NULL`，则您的标头和库二进制文件之间可能存在冲突。假设您有新版本的标头定义：

```
struct Thing {
    int foo[256];
    int bar[256];
    int baz[256];
}; 
```

但库二进制文件已过时，使用以下定义：

```
struct Thing {
    int foo[256];
    int bar[256];
}; 
```

如果您现在尝试访问`baz`，即使其他成员工作正常，您也会遇到分段错误。

*（编辑：从“如果你得到一个段错误”添加文本到答案的结尾）*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T11:14:24.963

*更新：* 改进`printf()`为`putchar()`.

已经给出了其他一些很好的答案。但是，如果不希望更改 providerName，`break`则调用一个循环：

```
int i;
printf("Provider: ");
for (i = 0; i < N; ++i) {
    const char c = Props->providerName[i];
    if (!c) break;
    putchar(c);
}
putchar('\n'); 
```

自然，必须早先设置`const int N = 256`或`#define N 256`类似。如果需要，可以将循环封装在函数调用或宏中。

顺便说一句，无论如何，上面的循环都不`printf()`需要做任何事情；所以它运行得很快，如果这很重要的话。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T11:02:34.890

如果您想输入“IBM”作为提供者名称，请使用 strcpy(Props->providerName, "IBM")。或使用 gets(str) 在 str 中获取输入，然后使用。也是使用 gdb 编译程序并使用 p Props 打印值以检查 Props 指向的值的最佳方法

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T11:04:07.353

这似乎与中包含的数据类型无关`providerName`。

例如，很可能`Props`确实引用了无效的内存位置`NULL`。

您可以使用调试修改来测试它，如下所示：

```
char * p = Props->providerName;
printf("Provider: %s\n", p); 
```

我敢打赌它在尝试执行第一行时会崩溃。

实现这种更灵活的另一种方法可能是：

```
printf("Provider: %*s%s\n", 
  sizeof (Props->providerName), 
  Props ?Props->providerName :"<no properties available>", 
  Props ?(Props->providerName[sizeof(Props->Props->providerName) - 1] ?" <cut off>" :"") :""); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-04T10:56:11.960

`Props->providerName[255] = 0;`在使用它之前，它将确保您的数据以 NULL 终止。

# perl - Mojolicious - 无法使用 hypnotoad 启动应用程序

> ID：11327639
> 
> 赞同：5
> 
> 时间：2012-07-04T10:52:49.023
> 
> 标签：perl, mojolicious

正如标题所说，我不知道为什么。唯一发生的是工作目录中出现的 hypnotaod.pid 文件。没有正在运行的进程，没有在定义的端口上监听。另外- morbo 一切正常。

编辑：我已经跟踪了这家初创公司，[http ://pastebin.com/YWUSeMuu](http://pastebin.com/YWUSeMuu)

EDIT2：查看上面的 strace 输出后，似乎 hypnotad 将另一个“.pl”附加到脚本文件中。我已将文件名更改为 myapp，冲洗，重复[http://pastebin.com/NVK2rhu4](http://pastebin.com/NVK2rhu4)

任何想法都非常受欢迎。

```
[root@fedora16 Mojo]# ./myapp.pl version
CORE
  Perl        (v5.14.2, linux)
  Mojolicious (3.02, Rainbow)

OPTIONAL
  EV              (4.11)
  IO::Socket::IP  (0.16)
  IO::Socket::SSL (1.76)

This version is up to date, have fun!

[root@fedora16 Mojo]# hypnotoad -t myapp.pl
Everything looks good!

[root@fedora16 Mojo]# hypnotoad  myapp.pl
Starting hot deployment for Hypnotoad server 29432. 
```

现在的代码只是教程测试代码

```
use Mojolicious::Lite;

app->config(hypnotoad => {listen => ['http://*:3000']});
get '/' => {text => 'ALL GLORY TO THE HYPNOTOAD!'};
app->start; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-19T20:45:24.693

我也遇到了麻烦。只是当我碰巧仔细阅读了[hypnotoad](http://mojolicio.us/perldoc/Mojo/Server/Hypnotoad)文档页面时，我才看到它说“在端口 8080 上侦听”。果然，在我的浏览器中打开[http://127.0.0.1:8080](http://127.0.0.1:8080)加载了我的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-12T18:58:33.590

同样的事情发生在我身上，我删除了 app 目录中的 .pid 文件并再次启动了 hypnotoad，它工作得很好！希望这可以帮助。M。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-30T14:34:00.870

之前添加`plugin 'Config';`到您的应用程序中`app->config`

如果应用程序未加载“配置”插件，则不应用配置

PS。Mojo 的作者并不相信我`plugin 'Config'`在通过 hypnotoad 运行应用程序时执行的非常简单且出乎意料的命令。

**请投票以表明必须对此进行记录，** **因为当前的 DOC 过于含蓄，无法理解**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-08T20:12:39.873

我遇到过这个问题，每次都与文件权限问题有关。

在所有情况下，morbo 都会运行，但 hypnotoad 不会。

使用前景标志应该可以帮助您。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-04T11:11:29.787

首先要做的是尝试一个不同的端口（例如 3001），以防它遇到 3000 的问题。然后尝试调用它`MOJO_LOG_LEVEL=debug ...`以查看它是否提供更多信息。确保您有一个名为“log”的可写目录并检查它的输出。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-20T23:52:50.183

我遇到了类似的问题，使用--foreground，我设法找到了很多关于用户'nobody'拒绝权限的警告，在更改用户参数后，问题得到了解决。

很多事情都会使 hypnotoad 失败，尝试检查端口、文件、用户、组权限等。

# awk - awk 范围模式 - 在范围模式开始处做一些事情

> ID：11327640
> 
> 赞同：2
> 
> 时间：2012-07-04T10:52:54.740
> 
> 标签：awk, gawk

我需要知道，哪一行是与 awk 的范围模式匹配的行。假设我有以下输入：

```
some random text
some random text START this is first line I want to match with START
some random text
some random text
some random text
some random text START this line contains another START but I dont want matched this line
some random text
some random text END this line is last of my range
some random text
... input text countinues, more range matches can be found 
```

我想如何匹配：

```
/START/,/END/ {
if ((index($0,"START"))) {
# do something when range starts
}
#do some other things
} 
```

但后来我意识到，我的索引将在范围中间的第 6 行与 START 匹配。我正在考虑在第一次与索引匹配的 START 后升旗，但是有没有更优雅的方式，比如类似于 NR 的全局变量？

编辑：输入文本继续，可以找到更多范围匹配，如果我提出标志或使用计数，我将不得不在范围结束后重置标志/计数（添加索引（$ 0，“END”）），这是我不想要的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T11:03:53.333

您可以先将所有内容读入数组，然后仅对其第一个元素进行操作。我不确定它是否可以比标记标志更漂亮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T12:40:04.690

单程。尝试增加范围内的变量，只有当它等于 1 时才匹配范围的开头。在第二`START`行它将是 5 并且不会成功 check `i == 1`。

```
/START/,/END/ {
    ++i 
    if ( i == 1 ) { 
        print "Range starts"
    }   
    print "Other things"
} 
```

# php - 如何使用正确的编码在 PHP 中编写制表符分隔的文本文件？

> ID：11327646
> 
> 赞同：2
> 
> 时间：2012-07-04T10:53:30.447
> 
> 标签：php, encoding

此代码将制表符分隔的 txt 文件从数据库写入目录。我的字符编码有问题，因为它无法获取 ñ ， é 等非英文字符...我怎样才能正确编码？我知道我应该使用 UTF-8，但它在我的代码中的什么位置？db (latin1_swedish_ci) 中的字符似乎没问题，但文件中的字符不正常。谢谢

```
<?
     @chmod($export_txt, 0777);
    $fe = @fopen($export_txt."/export.txt", "w+");
    if($fe){           
        $somecontent = "";
        $fields_count = 0;           
        // fields headers
        $db->query($sql_view);
        if($row = $db->fetchAssoc()){
            foreach($row as $key => $val){
                if($fields_count++ > 0) $somecontent .= "\t";
                $somecontent .= $key;
            }
        }
        $somecontent .= "\r\n"; 

        $db->query($sql_view);
        while($row = $db->fetchAssoc()){
            $fields_count = 0;
            foreach($row as $key => $val){
                if($fields_count++ > 0) $somecontent .= "\t";
                $somecontent .= $val;                                                                          
            }
            $somecontent .= "\r\n"; 
        }  
        // write some content to the opened file.
        if (fwrite($fe, $somecontent) == FALSE) echo 'file_writing_error'." (export.txt)"; 
        fclose($fe);           

    }
    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T10:55:59.440

```
fwrite($fe, utf8_encode($somecontent)) 
```

# google-app-engine - 如何更改 appengine 应用程序的计费管理员？

> ID：11327648
> 
> 赞同：0
> 
> 时间：2012-07-04T10:53:41.400
> 
> 标签：google-app-engine

我想更改 appengine 应用程序的计费管理员。如何在不导致服务中断的情况下实现这一目标？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T19:44:36.890

待计费管理员需要从管理控制台启动此操作。请参阅[更改计费管理员](https://developers.google.com/appengine/docs/billing#Changing_the_Billing_Administrator)。

# c# - 如何将一组文件从应用程序上传到 Web 服务器？

> ID：11327649
> 
> 赞同：0
> 
> 时间：2012-07-04T10:53:47.093
> 
> 标签：c#, forms, file, post

使用 c#，我有一个使用`POST`HTTP 方法上传文件的方法。但是服务器需要一组文件。那么我应该改变什么，或者更一般地说，我怎样才能`POST`获得一个数组或文件列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T10:56:38.627

您可以使用 jquery 和像这里这样的上传插件：

[http://blueimp.github.com/jQuery-File-Upload/](http://blueimp.github.com/jQuery-File-Upload/)

# iphone - 从谷歌距离 API 和原生测距功能 +iphone 获得不同的结果

> ID：11327651
> 
> 赞同：0
> 
> 时间：2012-07-04T10:53:55.637
> 
> 标签：iphone, cllocationmanager, cllocation, cllocationdistance

我正在开发 iphone 应用程序，我需要在其中找到 2 个纬度和经度之间的点

我曾经使用过：-

```
CLLocation* newlocation = [[CLLocation alloc] initWithLatitude:19.0759837 longitude:72.8776559];
 CLLocation* oldLocation = [[CLLocation alloc] initWithLatitude:19.075655999999999 longitude:72.87979];
            float kilo1=[newlocation getDistanceFrom:oldLocation]/1000;    

            CLLocationDistance distance = [newlocation distanceFromLocation:oldLocation]; 
```

并检查了 googleulr:- [url](http://maps.googleapis.com/maps/api/distancematrix/xml?origins=19.0759837,72.8776559&destinations=19.075655999999999,72.87979&mode=driving&language=en-EN&sensor=false)

getDistanceFrom 和 distanceFromLocation 函数的距离为：0.227512KM 但在 webservice 中显示距离：0.300000

由于这两个结果之间存在很大差异，任何人都可以建议我遵循哪一个？在我看来，webservice 的结果是正确的。但我不能使用网络服务来找到 100 点的距离。因为这是不可行的，任何人都可以帮助我如何获得正确的值

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T12:02:25.413

您使用 iPhone GPS（getDistanceFrom）获取**空中距离，使用网络服务（您提供的 URL）获取****行驶距离**。所以两者都是准确的，但距离类型不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T11:26:38.950

CLLocation 给出了正确和准确的结果，因为它被 iPhone 的其他应用程序使用，您可以在 iPhone 的导航应用程序中看到它的结果，从而为您提供准确的位置。而网络服务可能会给出错误的结果或靠近位置的详细信息。

# c# - Asp.net SessionID 的字符串格式是什么？

> ID：11327652
> 
> 赞同：9
> 
> 时间：2012-07-04T10:53:57.713
> 
> 标签：c#, asp.net, session, string-formatting, sessionid

我想`Session.SessionID`在 URL 中使用 as 文件名和查询字符串。我想知道它的格式是否适合这些应用程序。例如，您不能在文件名中使用`'?'`或字符。`'<'`

SessionID 格式字符串对于文件名和查询字符串是否安全？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-04T11:22:09.000

从[这个 MSDN 链接](http://msdn.microsoft.com/en-us/library/system.web.sessionstate.sessionidmanager.aspx)

```
"The ASP.NET session identifier is a randomly generated number encoded into a 
 24-character string consisting of lowercase characters from a to z and numbers 
 from 0 to 5." 
```

所以答案是，是的，用于文件名和查询字符串是安全的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T10:56:16.593

会话 ID 可以使用它只是一个没有奇怪字符的字符串

# iphone - 在 UIWebView 中添加图像

> ID：11327653
> 
> 赞同：-2
> 
> 时间：2012-07-04T10:53:58.473
> 
> 标签：iphone, ios, uiwebview, uiimageview

我有一个`UIWebView`，我只是显示一些文本。我正在使用 html 文本来格式化`UIWebView`. 我怎样才能`image/UIImage`在其中包含一个？我需要显示具有固定框架的图像。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T10:58:15.390

使用`img`标签。将其注入您的 HTML 代码并以`UIWebView`.

这应该有帮助 -

```
NSString *html = @"<html><body style='margin:0;'><img width='300' height='300' src='my_test_image.jpg'></body></html>";
[web loadHTMLString:html baseURL:[NSURL fileURLWithPath:[[NSBundle mainBundle] bundlePath]]]; 
```

# mysql - 尝试检查数据库中是否已存在电子邮件

> ID：11327655
> 
> 赞同：0
> 
> 时间：2012-07-04T10:54:18.043
> 
> 标签：mysql, oop, class, pdo, rowcount

我正在尝试根据数据库中列出的电子邮件地址检查电子邮件地址，以确保它不匹配。

我尝试使用`rowCount`我理解的返回布尔值`true`或`false`是否找到匹配项。

但电子邮件地址仍会输入数据库。

这是我用来检查电子邮件的方法：

```
public function checkEmail(){
        if($this->post_data['reg_email'] == $this->post_data['reg_conf_email']){

            if(filter_var($this->post_data['reg_email'], FILTER_VALIDATE_EMAIL)){

                $stmt = $this->dbh->prepare("SELECT email FROM oopforum_users WHERE email = ?");
                $stmt->bindParam(1, $this->post_data['reg_email'], PDO::PARAM_STR);
                $stmt->execute();
                $result = $stmt->rowCount();
                if($this->result){
                    return true;
                }else{
                    return false;
                }
            }else{
                return false;
            }
        }else{
            return false;
        }
    } 
```

然后在我的调用程序中我有这个：

```
if($register->checkUsername()){

    if(!$register->checkEmail()){

          //continue...

    }else{
        $message = 'ERROR: That email is not valid, doesn\'t match the confirmation email or already exists on our database, please choose another one.';
    }

}else{
    $message = 'ERROR: That username is invalid or is already taken, please choose another one and ensure it is atleast 4 characters long.';
} 
```

为什么它不将电子邮件与数据库中的同一电子邮件匹配并抛出错误消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T12:07:16.420

```
<?php
  $email="SELECT count(*) as emailCount FROM oopforum_users 
          WHERE UPPER(email) ='".strtoupper($catid)."'";
  $rs_count=mysql_query($email) or die(mysql_error());
  $result = mysql_fetch_assoc($rs_count);
  if($result['emailCount'] > 0){
     echo "Email Exists !!";
  } else {
     echo "Email Doesn't Exists !!";
  }
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T11:05:21.177

> 我正在尝试根据数据库中列出的电子邮件地址检查电子邮件地址，以确保它不匹配。[...] 但电子邮件地址仍会输入数据库。

首先; 如果您的要求是您永远不能有两个用户使用相同的电子邮件地址，我认为您最好在数据库中强制执行它（猜测您使用的是 MySQL）：

```
ALTER TABLE oopforum_users ADD UNIQUE ( email ); 
```

一旦您在数据库中创建了唯一约束，就不可能两次插入电子邮件地址。这也可以用于代码中的好处；只需尝试插入该行，如果它失败并显示错误代码 1062，您就知道违反了唯一约束。这使您的代码更容易，并且在数据库上的密集度更低。

# javascript - 在javascript中删除和添加元素到函数参数列表

> ID：11327657
> 
> 赞同：4
> 
> 时间：2012-07-04T10:54:21.840
> 
> 标签：javascript, arguments

我用javascript写了一个观察者。您可以像这样触发事件：

```
ClassThatExtendsEvent.triggerEvent('EventName', arg1, arg2, ..., argn) 
```

有可变数量的参数，第一个参数是事件名称。我也有订阅者，它们保存在我的事件类的私有属性中。他们被这样称呼：

```
Event.prototype.triggerEvent = function() {

  var callbacks = this._events[eventName];      
  if(callbacks !== undefined) {
    for (var i = 0, l = callbacks.length; i < l; i++) {

      // I do not need the first argument here!!!
      callbacks[i].apply(callbacks[i], arguments);
    }
  }
} 
```

但是，订阅者确实知道事件名称，因此可以省略。但我不知道如何从列表中删除一个参数（因为它不是数组，但似乎是某种对象）。

我还需要读取事件名称，一旦它被删除，因为在通知直接订阅者之后，全局事件系统就会启动。这个全局事件系统需要名称。

因此整个函数看起来像这样：

```
Event.prototype.triggerEvent = function() {

  // First we deliver to direct subscribers
  var callbacks = this._events[eventName];      
  if(callbacks !== undefined) {
    for (var i = 0, l = callbacks.length; i < l; i++) {
      // I do NOT need the first argument here!!!
      callbacks[i].apply(callbacks[i], arguments);
    }
  }

  // Now we broadcast the event to the entire system

  // I DO need the first argument here!!!

  Facade.getInstance().broadcastEvent.apply(Facade.getInstance(), arguments);      

} 
```

你将如何实现这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-08T19:52:54.500

您可以像这样从对象中“借用”该`shift`方法：`Array()`

缓存`shift`方法

```
shift = [].shift; 
```

然后用它去掉第一个元素`arguments`（因为它只是一个类似对象的数组）

```
var firstArg = shift.apply(arguments); //in case you need it
.
.
.
callbacks[i].apply(callbacks[i], arguments); 
```

正如@casablanca 所说，

> 许多方法适用于任何行为类似于数组的东西（数字索引和长度属性）

该`shift`方法只是其中之一。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T10:58:29.930

只需创建一个删除第一个参数的新数组：

```
var newArgs = [];
for (var i = 1; i < arguments.length; i++) {
  newArgs.push(arguments[i]);
} 
```

并将新数组传递给`apply`：

```
callbacks[i].apply(callbacks[i], newArgs); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-15T22:08:48.350

Mohamed-Ted 是正确的，但如果您不需要第一个参数，您可以使用以下方法内联对参数的操作`Array.splice`：

```
callbacks[i].apply(callbacks[i], [].splice.call(arguments, 1)); 
```

where`1`指示要从中保留参数的参数列表中的位置。

# jquery - 带有两个链接的表格 - 表格行可点击 - jQuery

> ID：11327658
> 
> 赞同：0
> 
> 时间：2012-07-04T10:54:25.147
> 
> 标签：jquery, hyperlink, html-table, row, href

我有一个包含 2 个链接的表格，

*   如果我单击“按钮”，则链接应以“page1”为目标

*   如果我单击整行，则应定位“page2”

我目前坚持使用 jQuery Javascript - 有人可以给我一个建议吗？

HTML & JQuery / JS

```
<tr>
  <td><a href="page2.html" class="info"><img src="img/img.png" alt="image" class="tlogo"/></a></td>
  <td>Some Text</td>
  <td><a href="page1.html" class="tbutton">Go to page1</a></td>
</tr>

    $(document).ready(function() {
        $('#myTable tr').click(function() {
            var href = $(this).find("a").attr("href");
            if(href) {
                window.location = href;
            }
        });
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T10:59:00.133

如果单击按钮，也会触发行单击。阻止它的方法是使用`event.stopPropagation();`

这将取消之后将触发的任何事件，因此如果将其放在按钮单击事件中，则不会触发行单击事件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T11:03:57.250

尝试类似：

```
$(document).ready(function() {
    $('#myTable a').click(function(e){
        window.location = $(e.currentTarget).attr('href');
        e.stopPropagation();
    });

    /* Assuming that the link you want to go to on clicking the row is in the first td */

    $('#myTable tr').click(function(e) {
        window.location = $('#myTable tr a',e.currentTarget).attr('href');
        e.stopPropagation();
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T11:03:16.387

你可以做一件事：-

```
<tr>
  <td><a href="page2.html" class="info"><img src="img/img.png" alt="image" class="tlogo"/></a></td>
  <td>Some Text</td>
  <td><a href="page1.html" class="tbutton">Go to page1</a></td>
</tr>

$(document).ready(function() {
    $('.tbutton').click(function() {            
        window.location.href = page1.html;
    });
 $('"#mytable tr').click(function() {            
            window.location.href = page2.html;
        });
}); 
```

希望这会有所帮助:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T11:07:23.537

**工作演示** [http://jsfiddle.net/5ykup/4/](http://jsfiddle.net/5ykup/4/)

API：[http](http://api.jquery.com/event.stopPropagation/) ://api.jquery.com/event.stopPropagation/it：防止事件在 DOM 树中冒泡，防止任何父处理程序收到事件通知。

希望这可以帮助，

**代码**

```
 $("table tr").click(function(){
       alert("go to page1");        
    });

    $("table tr td a").click(function(event){
        alert("go to PAGE == 2"); 
        event.stopPropagation();
    }); 
```

# javascript - jQuery函数只工作一次

> ID：11327659
> 
> 赞同：0
> 
> 时间：2012-07-04T10:54:32.440
> 
> 标签：javascript, jquery

我确信这是一个基本问题，但我无法让下面的脚本多次运行。我尝试使用 .live() 和 .on() 也没有成功。它工作正常一次，但随后停止工作。

```
$('.chk_av').click(function(){
    var new_user=$('.new_uname').val();
    if(new_user=="")
    {
        return;
    }
    var data="new_user="+new_user+"&agent_id="+agent_id+"&key=1";
    $.ajax({
        type:"POST",
        url:"admin_includes/change_pwrd.php",
        data:data,
        success:function(html){
            if(html==1)
            {
                $('.js_alert3').text("Username already in use.").fadeOut(5000);
                return;
            }
            if(html==2)
            {
                $('.js_alert3').text("Username Free.").fadeOut(5000);
                return;
            }
        }
    })//end ajax
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T11:41:47.227

试试上面代码中你错过的 fadeIn() 代码。

```
$('.chk_av').click(function(){
        var new_user=$('.new_uname').val();
        if(new_user=="")
        {
            return;
        }
        var data="new_user="+new_user+"&agent_id="+agent_id+"&key=1";
        $.ajax({
            type:"POST",
            url:"admin_includes/change_pwrd.php",
            data:data,
            success:function(html){
                if(html==1)
                {
                    $('.js_alert3').text("Username already in use.").fadeIn().fadeOut(5000);
                    return;
                }
                if(html==2)
                {
                    $('.js_alert3').text("Username Free.").fadeIn().fadeOut(5000);
                    return;
                }
            }
        })//end ajax
    }); 
```

# android - Android 通知声音被系统通知抑制

> ID：11327660
> 
> 赞同：1
> 
> 时间：2012-07-04T10:54:35.410
> 
> 标签：android

我有一个简单的应用程序，它在传入的文本消息中查找文本模式，然后发出警报。根据文本，警报可能必须持续一分钟（如寻呼机）。通知警报声音正在关闭，但问题是.. 默认 SMS 通知警报接管（而我的警报应该持续一分钟或更长时间）。

我该如何处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T17:04:13.907

AudioManager.requestAudioFocus 向音频设备发出请求，如果被授予，则必须由 AudioManager.onAudioFocusChangeListener 处理。一旦你完成了你的工作，记得打电话给abandonAudioFocus！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T10:59:40.400

一种选择可能是在创建通知之前简单地提供一个短暂的延迟（让系统有时间先做它的事情），但是由于您希望声音持续长达一分钟或更长时间，我建议不要将声音播放为您的通知的一部分。相反，将其作为 mp3 播放（系统通知会短暂中断，但随后恢复播放）并在用户做正确的事情时提前取消播放（触摸您的通知，打开您的活动等）

# jquery - 使用 scrollto jquery 插件时是否需要绑定/取消绑定滚动事件？

> ID：11327661
> 
> 赞同：0
> 
> 时间：2012-07-04T10:54:40.957
> 
> 标签：jquery, scroll, scrollto, unbind

我正在创建一个水平滚动站点。每次单击菜单链接时，我都会使用 scrollto 滚动到所选部分，但是当我使用滚动而不是链接滚动到某个部分时，它会弄乱导航样式。我认为问题是我在滚动事件中有代码并且滚动到它也触发滚动事件¿？

我想要实现的是在以下情况下突出显示导航菜单中的当前链接：1）我单击它 2）我使用浏览器滚动条手动滚动到一个部分 3）我单击下一个/上一个链接

也许问题出在这部分：

```
var position = Math.abs( $('#slider ul').offset().left - 138 );
$('p.status').html( 'index:' + getCurrentSectionIndex(position) );

//disable the scroll event so it doesn't broke the flow
$('#slider').unbind('scroll',handler);

//scrolls to the selected section
$('#slider').scrollTo($('#' + $(this).attr('class')), 800, { axis: 'x' });

//enable again the scroll event
//$('#slider').bind('scroll',handler);
var timeout = setTimeout(function() {
    $('#slider').bind('scroll',handler);
}, 3000); 
```

我是 jquery 的新手，所以如果你看到任何可以改进的地方，请告诉我。欢迎任何建议:)

我不知道我是否解释得很好所以这是代码[jsfiddle](http://jsfiddle.net/oterox/hvjbH/)

我正在使用这个[问题的一些代码](https://stackoverflow.com/questions/3893124/use-jquery-to-change-a-class-dependent-on-scroll-position)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T14:31:01.610

好吧，我做了一个“更简单”的代码版本，它看起来就像你想要的那样工作。

[点击这里查看 jsfiddle 现场演示](http://jsfiddle.net/P3kka/)

一些更新是：

变量`index`接收当前项目的索引。

根据`index`，导航中的相应项目将使用`eq:()`选择器突出显示，我正在使用相同的方法滚动页面。

`onAfter`并且我使用ScrollTo 插件的回调 ( ) 再次绑定滚动事件：

```
$('#slider').scrollTo('ul li:eq(' + index + ')', 800, {
    axis: 'x',
    onAfter: function() {
        $('#slider').bind('scroll', handler);
    }
}); 
```

我是任何怀疑的性格！

# string - 不知道如何在字符串中搜索子字符串

> ID：11327666
> 
> 赞同：-5
> 
> 时间：2012-07-04T10:55:10.947
> 
> 标签：string, perl, mismatch

我有两个序列：

**一个**：`ATGCATGCATGCATGCATGC`

**乙**：`GATGATGCATAGCATGCATGTTTGCGATGAATCGC`

我想在序列**b中搜索序列****a**并给出匹配的位置。

 ***上述示例的输出：* `5`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-04T10:58:09.027

这个答案基于

> “我想在序列b中搜索序列a并给出匹配的位置。”

而不是您的问题标题似乎暗示了与您的帖子中实际不同的问题？

```
my $haystack = 'GATGATGCATAGCATGCATGTTTGCGATGAATCGC';
my $needle = 'ATGCATGCATGCATGCATGC';
my $pos = index($haystack, $needle);
if($pos != -1) {
  ....
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T12:13:10.940

```
my $a = 'GATGATGCATAGCATGCATGTTTGCGATGAATCGC'; 
my $b = 'ATGCATGCATGCATGCATGC'; 
my $p = index($a, $b) + 1;                      # returns 5 
```**

# sharepoint - SharePoint 2010 处理解决方案更新

> ID：11327669
> 
> 赞同：2
> 
> 时间：2012-07-04T10:55:47.497
> 
> 标签：sharepoint, auto-update

假设我有一个 SP2010 解决方案，它可以做很多事情：创建内容类型、实例化列表、添加事件接收器、Web 等等。现在假设我开发了新的东西：更改一些内容类型，更改一些事件接收器等。现有列表不会受到任何这些影响。我猜这是给定的，但我需要在任何地方应用更改。您将如何很好地处理解决方案更新？

我知道 SharePoint 有一个升级框架（请参阅 SPPersistedUpgradableObject.NeedsUpgrade），但我认为它适用于 SharePoint 产品本身的升级。

那么该怎么办？将当前版本号存储在某个属性包中，连接一个功能激活的事件接收器，在整个世界中递归（网络应用程序、站点、网络、列表......）并升级一切？必须有一些框架来帮助我解决这个问题，如果没有别的，那么至少应该在某个地方显示一个进度条，因为它可能需要 5 分钟或更长时间。欢迎所有想法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T20:26:20.570

这是我的做法：

在部署更新的功能之前，我在 Visual Studio 中打开该功能并更改 Version 属性（当我创建新功能时，我将版本设置为 1.0.0.0）。接下来，我单击 Manifest 按钮，展开 Edit Options 部分，然后输入 UpgradeActions 数据。

以下是我的一项升级功能的略微修改版本：

```
<?xml version="1.0" encoding="utf-8" ?>
<Feature xmlns="http://schemas.microsoft.com/sharepoint/">
 <UpgradeActions>
  <VersionRange BeginVersion="1.0.0.0" EndVersion="1.1.0.0">
   <CustomUpgradeAction Name="UpgradeTo1v1" />
  </VersionRange>
  <VersionRange BeginVersion="1.1.0.0" EndVersion="1.3.0.0">
   <CustomUpgradeAction Name="UpgradeTo1v3" />
  </VersionRange>
  <VersionRange BeginVersion="1.3.0.0" EndVersion="1.4.0.0">
   <CustomUpgradeAction Name="UpgradeTo1v4">
    <Parameters>
     <Parameter Name="OptionalParameter">Values go here</Parameter>
    </Parameters>
   </CustomUpgradeAction>
  </VersionRange>
 </UpgradeActions>
</Feature> 
```

然后我添加或修改我的特征接收器的 FeatureUpgrading 方法：

```
[SharePointPermission(SecurityAction.LinkDemand, ObjectModel = true)]
public override void FeatureUpgrading(
    SPFeatureReceiverProperties properties, 
    string upgradeActionName, 
    System.Collections.Generic.IDictionary<string, string> parameters)
{
    SPSite site = properties.Feature.Parent as SPSite;
    SPWeb web = site.RootWeb;
    switch (upgradeActionName)
    {
        case "UpgradeTo1v1":
            UpgradeTo1v1(site, properties, parameters);
            break;
        case "UpgradeTo1v3":
            UpgradeTo1v3(site, properties, parameters);
            break;
        case "UpgradeTo1v4":
            UpgradeTo1v4(site, properties, parameters);
            break;
    }
} 
```

我的私有升级方法以编程方式进行任何在部署更新的解决方案包时无法自动实现的更改。我使用以下 PowerShell 脚本部署解决方案包：

```
Write-Host "Upgrading solution: $SolutionPackageName" -NoNewline
Update-SPSolution -Identity $SolutionPackageName -LiteralPath $SolutionPackagePath -GACDeployment -Confirm:$false -Force
while ($Solution.JobExists)
{
    Start-Sleep -s 2
}
Write-Host " - Done."

if ($UpdateFeatureGuids -ne $null)
{
    foreach ($site in Get-SPSite -Limit All) 
    {
        $UpdateFeatureGuids | % { $site.QueryFeatures([Guid]$_, [bool]$true) } | % { 
            $definitionId = $_.DefinitionId
            $parentUrl = $_.Parent.Url
            Write-Host "Upgrading feature: $definitionId $parentUrl"
            $_.Upgrade([bool]$false) | % { 
                if ($_ -ne $null)
                {
                    Format-List -InputObject $_ -Property Message, InnerException -Force 
                }
            }
            Write-Host "Upgrading feature: $definitionId $parentUrl - Done."
        }
        $site.Dispose()
    }
} 
```

我真的希望`Update-SPSolution`有一个标志可以让您升级所有活动功能。我还没有遇到需要更新功能但不希望应用程序化升级的案例。因此，PowerShell 代码的其余部分为我完成了这项工作，方法是浏览所有网站集，根据预定义的列表查找所有需要升级的功能，然后在显示发生的任何错误的同时升级每个网站上的功能。

请注意，`Update-SPSolution`仅刷新现有文件。如果您已将新文件添加到解决方案包，它们将被忽略并且不会被部署。我希望功能的版本历史和升级能力不会因撤回/部署而无效，但我从未尝试过。通常，如果我需要添加新文件，我会创建一个新的解决方案包。

# printing - 在哪里可以找到 XPSDrv Redist 包（XPS Essentials 共享组件）？

> ID：11327675
> 
> 赞同：0
> 
> 时间：2012-07-04T10:56:11.907
> 
> 标签：printing, driver, xps, redistributable

我正在开发一个 XPSDrv，它打算在 Win XP 和 2003 中使用，因此，我需要安装 XPSDrv Redist 包作为我的驱动程序的先决条件。

确实，如果您查看[MS 文档](http://msdn.microsoft.com/en-us/windows/hardware/gg463345.aspx#EHB "质谱文档")，它会说：

> XPSDrv Redist 软件包 (XPSEPSC) 包含系统和驱动程序组件，这些组件可以安装 XPSDrv 打印机驱动程序，并使 XPSDrv 过滤器管道组件能够正常工作。XPSEPSC 将通过可执行包 (exe) 重新分发。您可以通过 Microsoft Connect 站点的“Windows Vista XPSDrv Driver Redistribution”访问 XPSEPSC 包和再分发协议

问题来了，因为我在任何地方都找不到XPSEPSC！他们建议的连接程序不存在，我能找到的 Windows 7 程序只有 .inf 和驱动程序文件，没有实际的 exe 包。

我真的很惊讶没有其他人对此有任何问题！

我知道我可以使用 XPS Essentials 包，但即使是这个[MS 博客](http://blogs.msdn.com/b/adrianford/archive/2008/08/01/where-to-get-the-latest-xps-print-path-bits.aspx "微软博客")也说你应该使用共享组件版本：

> 请注意，尽管 XPS 打印路径包含在 .Net Framework 3.0 及更高版本以及 XPS Essentials Pack 中，但对于打印驱动程序，Microsoft 建议使用 XPSDrv redist 软件包，以确保您的客户获得最佳体验。

啊！！有什么想法吗？

**更新**

我知道存在用于下载它的盲链接，但有人知道为什么没有共享组件的官方 MS 下载登录页面吗？另外，有人知道共享组件的语言包在哪里吗？（他们在上面的第一个链接中提到）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T14:23:23.887

我终于设法在支持请求期间询问了一位 MS 员工，他们建议使用 XPS 必需品，而不是共享组件，所以答案就是，不要打扰共享组件！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T11:23:25.237

Dot Net 3 redist 我的朋友，看起来包是它的一部分。

您可以从[http://www.microsoft.com/downloads/details.aspx?familyid=10CC340B-F857-4A14-83F5-25634C3BF043&displaylang=en](http://www.microsoft.com/downloads/details.aspx?familyid=10CC340B-F857-4A14-83F5-25634C3BF043&displaylang=en)安装可再发行包，请参阅 X86 Redist 包

或者您可以直接从[http://www.microsoft.com/downloads/details.aspx?familyid=EC2CA85D-B255-4425-9E65-1E88A0BDB72A&displaylang=en安装 .Net Framework 3.0 SP1](http://www.microsoft.com/downloads/details.aspx?familyid=EC2CA85D-B255-4425-9E65-1E88A0BDB72A&displaylang=en)

或者你可以安装 XPSEPSC

如果您想下载 XPSEPSC 特定包，您可以在此处获取 x86 包[http://go.microsoft.com/fwlink/?LinkId=96332](http://go.microsoft.com/fwlink/?LinkId=96332)。

Biblio：我从哪里得到我的资源。谷歌也**帮助了**:) [http://social.msdn.microsoft.com/forums/en-US/netfxsetup/thread/47bee01a-6440-4c2c-afd2-04e9907712f0/](http://social.msdn.microsoft.com/forums/en-US/netfxsetup/thread/47bee01a-6440-4c2c-afd2-04e9907712f0/) http://social.msdn.microsoft.com/Forums /en-US/netfxsetup/thread/1b49eb80-093a-4201-982d-b525a5e90c70/ [http://social.msdn.microsoft.com/forums/en-US/netfxsetup/thread/47bee01a-6440-4c2c-afd2-04e9907712f0 /](http://social.msdn.microsoft.com/forums/en-US/netfxsetup/thread/47bee01a-6440-4c2c-afd2-04e9907712f0/)

# unit-testing - 如何将单元测试代码与生产代码分开

> ID：11327678
> 
> 赞同：0
> 
> 时间：2012-07-04T10:56:14.427
> 
> 标签：unit-testing, blackberry

我的应用程序和单元测试在一个代码库中。我有备用入口点，当被调用时，它将只运行测试，这一切都很好。我在生产代码中有测试代码，我有点犹豫要不要在那里。如何将单元测试代码分离到单独的项目中？如果这不可能，那么将单元测试与生产代码分开的最佳推荐方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T13:04:03.563

我假设您没有使用 BBUnit（出于多种原因，我也没有使用）。因此，除非您的主项目是一个库，否则您不能只创建一个仅包含测试的单独测试项目，这将是首选方式（Android 正是这样做的）。所以你可能在主项目中有所有的测试代码。那么为什么不使用替代入口点，而不是使用预处理指令呢？这些可以从 BlackBerry Application Descriptor 打开和关闭。

# c# - 执行 PowerShell 脚本而不等待结果

> ID：11327680
> 
> 赞同：0
> 
> 时间：2012-07-04T10:56:16.880
> 
> 标签：c#, .net, powershell

我尝试从 c# 执行 PowerShell 脚本而不等待结果。

```
 string cmdArg = "MyScript.ps1";
 //Create New Runspace
 Runspace runspace = RunspaceFactory.CreateRunspace();
 runspace.ApartmentState = System.Threading.ApartmentState.STA;
 runspace.ThreadOptions = PSThreadOptions.UseCurrentThread;
 runspace.Open();

 //Adds the command
 pipeline.Commands.AddScript(cmdArg);
 pipeline.Commands[0].MergeMyResults(PipelineResultTypes.Error, PipelineResultTypes.Output);

 //Do not wait for a result
 pipeline.InvokeAsync();
 runspace.Close(); 
```

但它要等到脚本完成！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T11:00:24.657

这有帮助吗？

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms569311(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms569311(v=vs.85).aspx)

备注说明您应该使用 RunSpace.OpenAsync() 方法进行异步......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T20:54:47.190

使用`BeginInvoke`- 如此 msdn 示例中突出显示的 - [http://msdn.microsoft.com/en-us/library/windows/desktop/ee706580(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ee706580(v=vs.85).aspx)。脚本运行`asynchronously`并且`events are used to handle the output`.

```
// Invoke the pipeline asynchronously.
IAsyncResult asyncResult = powershell.BeginInvoke<PSObject, PSObject>(null, output); 
```

# android - 在 AsyncTask 中从 android 到 MySQL 数据库的 HTTPpost

> ID：11327681
> 
> 赞同：0
> 
> 时间：2012-07-04T10:56:18.887
> 
> 标签：android

我正在尝试将一些数据从我的 android 设备发送到`MySQL database`. 似乎数据库没有更新，并且`ProgressDialog`我`AsyncTask`的没有完成。

**所以这是我的 PHP 脚本**

```
 <?php 
   mysql_connect("localhost","$username","$password") or die(mysql_error());
   mysql_select_db("databaseName");

   $pcn =   $_POST['PCN'];
   $date = $_POST['Date'] ;

   $query_add="INSERT INTO data (`pcn`,`date`) VALUES ('$pcn','$date')";
   $query_exec=mysql_query($query_add) or die(mysql_error()); 
   mysql_close()
 ?> 
```

**然后我的java代码：**

```
protected void onPreExecute() {
      progressDialog=ProgressDialog.show(context,"Please Wait..","Sending data to database",false);
    }

  @Override
  protected String doInBackground(String... params) {

      try {
          httpclient = new DefaultHttpClient();
          httppost = new HttpPost("http://localhost/index.php");
          ArrayList<NameValuePair> postParameters = new ArrayList<NameValuePair>();
          postParameters.add(new BasicNameValuePair("PCN", pcn));
          postParameters.add(new BasicNameValuePair("Date", date));

          httppost.setEntity(new UrlEncodedFormEntity(postParameters));                   
          HttpResponse response = httpclient.execute(httppost);
          Log.i("postData", response.getStatusLine().toString());
       }
       catch(Exception e)
       {
            Log.e(TAG, "Error:  "+e.toString());
       }  

    return "";
}

protected void onPostExecute(String result) {

        progressDialog.dismiss(); 
        Toast.makeText(context, "Finished", Toast.LENGTH_LONG).show(); 

} 
```

**在我的清单文件中：**

```
<uses-permission android:name="android.permission.INTERNET"></uses-permission> 
```

**这是 LogCat 的输出**

```
07-04 12:52:34.025: E/SendToServer(15167): Error:  org.apache.http.conn.HttpHostConnectException: Connection to http://localhost refused 
```

我已经阅读了几个我不能使用的地方`http://localhost`，但是当我尝试时`http://10.0.0.2`它应该可以工作。

我不知道该怎么做，有人能指出我正确的方向吗？

**更新**

当我尝试`10.0.2.2`而不是`Localhost`LogCat 输出时：

```
Error:  java.lang.IllegalStateException: Target host must not be null, or set in parameters. scheme=null, host=null, path=10.0.2.2 
```

**更新 2**

现在，当我使用`http://10.0.2.2`永不`progressdialog`完成时，logcat 也没有向我显示任何异常

**更新 3**

我想我知道为什么我的应用程序不更新我的数据库。我的手机在我的工作站之外的另一个无线网络中..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T10:58:40.030

你的问题是这条线，

```
httppost = new HttpPost("http://localhost/index.php"); 
```

Android 不理解 url 中的 localhost。

使用系统的**静态 IP**或**10.0.2.2**代替**localhost**。

 ***** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T11:05:00.817

Android 不要使用**localhost**，试试**10.0.2.2**

更多细节在[这里](http://developer.android.com/tools/devices/emulator.html#networkaddresses)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T11:12:53.783

使用“10.0.2.2”时遇到的错误最常发生在`10.0.0.2`您必须使用时使用`http://10.0.2.2`。

确保您正在使用：

```
httppost = new HttpPost("http://10.0.2.2/index.php"); 
```

希望这能解决您的问题。****

# git - 带有 Git 的 Maven：从任意提交而不是 HEAD 中释放

> ID：11327683
> 
> 赞同：0
> 
> 时间：2012-07-04T10:56:24.227
> 
> 标签：git, maven, maven-release-plugin

我想做`mvn release`一个来自过去提交的工件；有人向同一个 SNAPSHOT 添加了多个提交，我希望将这些提交排除在外并移至下一个版本。给定以下`git log`输出：

```
commit ea05
Author: Y

commit 921d
Author: Y

commit 530c
Author: Y

commit 64e9
Author: X 
```

我希望 Maven`64e9`用于发布而不是`ea05`

我尝试做`git co 64e9`（分离的 HEAD），`mvn release:prepare`（工作）然后`mvn release:perform`它挂起，产生以下输出：

```
[INFO] Building ABC
[INFO]    task-segment: [release:perform] (aggregator-style)
[INFO] ------------------------------------------------------------------------
[INFO] [release:perform {execution: default-cli}]
[INFO] Checking out the project to perform the release ...
[INFO] Executing: /bin/sh -c cd /home/ABC/target && git clone ssh://repo/ABC.git /home/ABC/target/checkout
[INFO] Working directory: /home/ABC/target
[INFO] Executing: /bin/sh -c cd /home/ABC/target/checkout && git pull ssh://repo/ABC.git tag ABC-1.6
[INFO] Working directory: /home/ABC/target/checkout
(...hanged) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-19T20:37:14.700

@khmarbaise 感谢您的启发，这就是我最终解决问题的方法：

1.  将当前状态存储在单独的分支中
2.  `git reset --hard`所需提交的主人
3.  `git push --force origin`避免“您的分支在 N 次提交后落后于 'origin/master'，并且可以快进。”
4.  使用 Maven 的发布插件发布
5.  将另一个分支中“隐藏”的提交重新应用到下一个开发版本。

# asp.net-mvc-3 - Razor 引擎和 ember.js 可以一起工作吗？

> ID：11327690
> 
> 赞同：8
> 
> 时间：2012-07-04T10:56:52.227
> 
> 标签：asp.net-mvc-3, razor, ember.js, mustache, handlebars.js

我正在开发一个项目，其中另一个开发人员使用 ember.js 框架开发了一个 UI 作为独立的客户端解决方案。

我被要求将这项工作转移到 ASP.NET MVC3 项目中。

问题是，ember.js 在语法中使用了大括号和双大括号，这似乎干扰了 MVC3 使用的 razor 引擎。

我是否认为这两种技术（ASP MVC3 和 ember.js）不能一起工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T17:49:30.993

一种方法是将把手模板放在资源文件 (resx) 中，然后在类似于以下的匿名函数中将它们添加到 Ember：

```
<script type="text/javascript" src="path/to/ember.js">
<script type="text/javascript" src="path/to/your/app.js">
<script type="text/javascript">
    (function() {
        Ember.TEMPLATES["your template name"] = Ember.Handlebars.compile('<%= template as string from the resource file goes here %>');
    })();

    App.initialize();
</script> 
```

这应该*在*您调用应用程序的`initialize`方法之前发生

当您有多语言支持时，资源文件也是一个好主意

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-24T17:19:00.763

我正在开发大量使用 Ember 并且没有任何问题的 ASP.NET MVC 4 应用程序。

带有双括号的案例有非常简单的解决方法：只需使用`@:`. 之后的所有内容都`@:`被解释为纯文本。因此，这个带有车把表达式的剃刀标记将是有效的：

```
<ul>
@if (Model.SomeCondition)
{
    @:{{#each product in products}}
    <li>{{product.name}}</li>
    @:{{/each}}
}
</ul> 
```

更新：目前我正在使用 Ember 1.6 - 1.9 版本和 Ember Data 1.0.0-beta-8 - 1.0.0-beta-12 版本和 ASP.NET MVC 5.2 - 效果很好。很快将在最新的 Ember 1.9、Ember Data 和 Handlebars 2.0 上迁移所有项目

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T15:26:40.940

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-04T13:05:40.943

您应该能够使用 [http://weblogs.asp.net/scottgu/archive/2010/12/15/asp-net-mvc-3-razor-s-and-lt-text-gt-中详述的块syntax.aspx](http://weblogs.asp.net/scottgu/archive/2010/12/15/asp-net-mvc-3-razor-s-and-lt-text-gt-syntax.aspx)来包装您的 ember 模板，以便它们正确可用。

也就是说，您这样做并没有真正满足客户的要求。一个普通的 ASP.Net MVC 开发人员仍然需要学习 ember.js 才能使用这个代码库。您真正应该做的是使用 ASP.Net MVC 概念重写它，例如从模型、部分视图等创建页面。

# asp.net - 如何将字符串转换为下拉控件或在 datalist 中查找控件，其中 control.client id 已知 asp.net

> ID：11327693
> 
> 赞同：0
> 
> 时间：2012-07-04T10:57:03.740
> 
> 标签：asp.net, drop-down-menu, casting, selectedindexchanged, nested-datalist

我有一个数据列表，其中包含 datalistCity 中的两个 dropdownCountry 和一个用于动态添加 dropdownCountry 和 datalistCity 的按钮我想在 DropdownCountry 上填充 dropdowncity selectedindex 更改代码如下

aspx 代码

```
 <asp:DropDownList ID="DDSubOffCity"   OnSelectedIndexChanged='GetSelectedCityValue' AutoPostBack="false" runat="server" Width="355px"> <asp:ListItem Value="0">Select</asp:ListItem> </asp:DropDownList>
 <asp:DropDownList ID="DDSubOffCountry" runat="server" OnSelectedIndexChanged='GetSelectedCountryValue'  AutoPostBack="true" Width="355px">  <asp:ListItem Value="0">Select</asp:ListItem> </asp:DropDownList> 
```

数据列表项绑定背后的代码

```
DDSubOffCountry.Attributes.Add("onChange", "javascript:NewBufferDDCountryValue('" + DDSubOffCountry.ClientID + "','" + DDSubOffCountry.SelectedValue + "');");
            DDSubOffCity.Attributes.Add("onChange", "javascript:NewBufferDDCityValue('" + DDSubOffCity.ClientID + "', '" + DDSubOffCity.SelectedValue + "');");} 
```

javascript代码

```
function NewBufferDDCountryValue(objddCountry) 
        {
            try {
                if (objddCountry != 'null') {
                    var ctlDDl = objddCountry.toString();
                    var parts = ctlDDl.split('_', 4);
                    var indexId = parts[3];
                    var objHidden = document.getElementById('ContentPlaceHolder1_DataListOffices_hiddenDDSubOffCountry_' + indexId);
                    objHidden.value = document.getElementById(objddCountry).value;
                }
            } catch (e) { alert(e); }
        }

        function NewBufferDDCityValue(objddCity) 
        {
            try {
                if (objddCity != 'null') {
                    var ctlDDl = objddCity.toString();
                    var parts = ctlDDl.split('_', 4);
                    var indexId = parts[3];
                    var objHidden = document.getElementById('ContentPlaceHolder1_DataListOffices_hiddenDDSubOffCity_' + indexId);
                    objHidden.value = document.getElementById(objddCity).value;
                }
            } catch (e) { alert(e); }    
        } 
```

当 onselectedindexchange 事件发生时将在后面的代码上调用的函数

```
public void GetSelectedCountryValue(object sender, EventArgs e)
    {
        DropDownList drp = (DropDownList)sender;

        ScriptManager.RegisterClientScriptBlock(this, this.GetType(), " ", "javascript:NewBufferDDCountryValue('" + drp.ClientID + "');", true);
        var city = new City();
        string indexer = drp.ClientID;
        indexer=indexer.Split(Convert.ToChar("_"))[3];
        string senderCity ="ContentPlaceHolder1_DataListOffices_DDSubOffCity_" + indexer;

        DropDownList drpCity;
       /*****************/ 
```

如果其客户端 ID 仅为已知，如何查找控件。或如何将字符串转换为要填充的 dropdownCity drpCity = FindControl(senderCity);

```
 /********************/

        city.populateCity(drpCity, drp.SelectedValue);
    } 
```

在 GetSelectedCountryValue 函数中，您可以看到我有 dropdownCountry 的索引，现在我知道控件的名称，但无法弄清楚如何仅通过其 ClientId 找到该控件，任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T11:11:12.967

GetSelectedCountryValue 是 C# 方法，因此您可以直接使用 DDSubOffCountry.SelectedItem.Text，因为 DropDownList 是 Web 服务器控件

# javascript - 从顶部显示 div 元素以显示其内容

> ID：11327698
> 
> 赞同：0
> 
> 时间：2012-07-04T10:57:21.367
> 
> 标签：javascript, jquery, html, css

我有一个带有类面板的 div 元素。我想要的是当我单击带有类的锚标记时，`open`它应该显示带有类的 div 容器`panel`并将其向下滑动。

在我当前的代码中，我有两个与 class 的链接`open`。当我单击其中任何一个时，它会为面板设置动画。但是当我单击底部的锚标记时，直到我向上滚动才能看到该元素。

我怎样才能使这个动画成为可能，以便我点击页面上任何位置的链接，然后我必须看到面板被动画和显示？

这是我的代码在[这里](http://jsfiddle.net/buHJ5/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T11:01:06.050

我想到了2种方法，

首先：你设置面板的CSS位置：固定；用户可以从任何地方看到面板，

[这是演示](http://jsfiddle.net/buHJ5/1/)

或第二种方式：您为每次点击设置多个条件函数

```
 $('.openTop').click(function(e) {
          e.preventDefault();
          $('.panel').animate({top:'300'},500).show();
 });
 $('.openBottom').click(function(e) {
          e.preventDefault();
          $('.panel').animate({top:'1000'},500).show();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T11:50:44.037

这可以使用简单的方式完成

```
$(document).scrollTop() 
```

## JS：

```
$('.open').click(function(e) {
    e.preventDefault();
    var topVal = $(document).scrollTop() + 300;
    $('.panel').animate({top:'+='+topVal}).show();
}); 
```

参考**[现场演示](http://jsfiddle.net/SivaCharan/buHJ5/5/)**

# php - 如何转换 Facebook 图形 JSON 输出？

> ID：11327699
> 
> 赞同：-2
> 
> 时间：2012-07-04T10:57:26.333
> 
> 标签：php, json, facebook-graph-api

不确定我是否真的做对了，但从我在 youtube 上观看的教程中获得了一小段代码，不幸的是，这个人从未发布过第 2 部分或第 3 部分，所以只留下了他在第一个视频中写的内容。

我一直在尝试访问所有可用的 PUBLIC 帖子，并且看到了通过链接访问它们的简单方法：[https](https://graph.facebook.com/search?q=i) ://graph.facebook.com/search? q=i 通过了我的考试&type=post&locale=en_GB

它提供了似乎是大量信息的信息，但是我如何使用 PHP 将这个明显的 JSON 输出处理成可理解的信息？我已经在一个类似的网站上看到它在互联网上引起轰动，并想尝试自己做。

是否可以使用以下代码：

```
$fbquery = "https://graph.facebook.com/search?q=i hate my boss&type=post";
$fb = file_get_contents($fbquery, 'rb');
$fbarray = json_decode($fb, true);
echo $fbarray['message']; 
```

还是我在某个地方出错了？请记住，其可用的公共信息和使用任何地址栏中的链接都将产生和输出，而无需用户登录或使用访问令牌。

感谢您的帮助和赞赏！

戴夫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T11:36:38.617

你这里有几个问题。1）您应该对您的搜索字符串进行urlencode。二`$fbarray`是对象。你不会只得到一件物品。试试这个代码：

```
$str = "i hate my boss";
$str = urlencode($str);
$fbquery = "https://graph.facebook.com/search?q={$str}&type=post";
$fb = file_get_contents($fbquery, 'rb');
$fbarray = json_decode($fb, true);
foreach ($fbarray as $item) { 
   echo $item['message'];
} 
```

要测试这样的公共查询，您可以将您的`$fbquery`url 粘贴到浏览器的地址栏中，然后查看是否返回数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T11:09:39.753

在 json_decode 你得到一个对象。

如果你做 $fbarray->data 你会得到一个对象数组。循环每个对象并检查其类型。

喜欢

```
for(key in $fbarray->data){
  $element = $fbarray->data[key]; // you get each element.
  if($element->type =="photo") // check for different types
  {
     // display as photo.
    echo '<img src="$element->picture">';
  }
  if($element->type =="status") 
  {
     // display message.
    echo $element->message;
  }
} 
```

您可以使用像[jsonedtor](http://jsoneditor.appspot.com/)这样的在线 json 编辑器来获取树视图。这有助于理解 json 的树结构。

# odbc - Windows 服务器上的 Lotus Notes Domino ODBC 连接

> ID：11327704
> 
> 赞同：0
> 
> 时间：2012-07-04T10:57:45.610
> 
> 标签：odbc, db2, lotus-notes, lotus-domino, lotusscript

我是一名 Domino/Notes 程序员，刚开始将 LS 脚本写入其他外部数据库。

问题 1\. 我在 Domino 服务器上有一个到 DB2 AS400 服务器的 ODBC 连接。2\. 我需要访问 4 个 DB2 数据库。3\. 一个ODBC连接4个数据库就够了吗？

服务器管理员说不需要更多的 ODBC 连接。

我的 ODBC 经验告诉我，我需要为我需要访问的每个数据库建立一个唯一的连接。

我对吗？

提前致谢

哈尔，挪威

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T11:47:12.120

一个到 DB2 服务器的 ODBC 连接就足够了。您可以指定一个默认数据库，但您可以通过一个服务器连接对多个数据库进行操作。

反过来不是真的，我猜这就是混乱所在。当您创建到 Lotus Notes 数据库的 ODBC 连接时，您必须为正在访问的每个 Lotus Notes 数据库创建一个新的 ODBC 连接。

# classification - WEKA 工具包中隐马尔可夫模型的等价物是什么？

> ID：11327707
> 
> 赞同：4
> 
> 时间：2012-07-04T10:57:49.117
> 
> 标签：classification, sensors, weka, hidden-markov-models

我需要对来自由 8 个加速度计组成的传感器网络的数据流进行分类。每个加速度计都给我一个 XY 和 Z 值。因此，在每个样本中，我有 8 x 3 = 24 个加速度值。我以大约 30 赫兹的频率进行采样，执行时间约为 0.5 秒。

起初我想为此使用隐马尔可夫模型，但似乎 WEKA 工具包没有提供这样的东西。WEKA 相当于什么？

谢谢你。

编辑：如何格式化数据？

我已经收集了数据，现在我想使用 HMMWeka 进行分类。在[网站上](http://www.doc.gold.ac.uk/~mas02mg/software/hmmweka/index.html)它指出

> 数据实例必须有一个单一的、名义的、类属性和一个单一的、关系的、序列属性。这种关系属性中的实例可以由单个名义数据实例（在离散 HMM 的情况下）或多变量的数字属性（在高斯 HMM 的情况下）组成。

但我很困惑我需要如何呈现我的数据才能满足这一要求。

我的数据如下所示：

```
"GESTURE A",[{407 318 425};...{451 467 358};{427 525 445};][{440 342 456}...;{432 530 449};]
"GESTURE A",[{406 318 424};...{450 467 357};{422 525 445};][{440 342 456}...;{428 531 449};]
"GESTURE B",[{407 318 424};...{449 466 357};{423 524 445};][{440 342 456}...;{429 530 449};]
"GESTURE B",[{380 299 399};...{424 438 338};{404 500 426};][{433 337 449}...;{429 529 449};] 
```

所以对于每一个手势，我都有几个例子。{} 之间的数据代表一个加速度计的 XYZ 值。最上面的 [ ... ] 代表一个包含 8 个加速度计的样本。

我不明白如何从中创建 ARFF 文件？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T13:57:30.030

你试过[HMMWeka](http://www.doc.gold.ac.uk/~mas02mg/software/hmmweka/index.html)吗？它需要 weka 的开发者版本（3.7+）。

# javascript - 如何在禁用模式下停止按钮的悬停效果

> ID：11327708
> 
> 赞同：6
> 
> 时间：2012-07-04T10:57:52.863
> 
> 标签：javascript, css, javascript-events

如何在禁用模式下停止按钮的悬停效果。我尝试禁用按钮后无法停止悬停效果，但无法正常工作，请帮助我，我想更改以获得良好效果。

```
<div id="prevnexts">
            <button id="prevs" class="navButs tprev" disabled="">Prev</button>
            <button id="nexts" class="navButs tnext" enabled="enabled">Next</button>
</div> 
```

CSS

```
#prevnexts {
height: 22px;
left: 50px;
position: absolute;
top: 160px;
width: 75px;
}

 #prevnexts .tnext, #prevnexts .tprev {
background: url("images/next1.png") no-repeat scroll 0 0 transparent;
border: 1px solid transparent;
height: 25px;
text-indent: -9999px;
width: 33px;
cursor:pointer;
 }

button[disabled]:active, button[disabled],
input[type="reset"][disabled]:active,
input[type="reset"][disabled],
input[type="button"][disabled]:active,
input[type="button"][disabled],
select[disabled] > input[type="button"],
select[disabled] > input[type="button"]:active,
input[type="submit"][disabled]:active,
input[type="submit"][disabled]
{
 opacity:0.5;
 }

 #prevnexts .tprev 
{
background:url(images/prev1.png) no-repeat 0 0;
}

#prevnexts .tprev:hover

{
 background:url(images/prev1hover.png) no-repeat 0 0;
}

 #prevnexts.tnext:hover
 {
 background:url(images/next1hover.png) no-repeat 0 0;
  } 
```

javascript:

```
 $(document).ready(function() { 
    var cnt = 1;
    var maxLinkss =<?php echo $mypostall;  ?>;
    $("#prevs").attr("disabled","disabled");
    $(".tprev:hover").remove();
    $("#nexts").attr("enabled","enabled");   
    $(".navButs").click(function(){   
    if (this.id=="nexts") {
    cnt++;  
   console.log(" + ",cnt);    
   }
   else {
  cnt--;
  console.log(" - ",cnt);  

  }
  if (cnt<0) cnt=0;     
  if (cnt>maxLinkss-1) {
  $("#nexts").attr("disabled","disabled"); 

   }
   else {
    $("#nexts").removeAttr("disabled"); 

  }
  if (cnt==1) {
  $("#prevs").attr("disabled","disabled"); 

 }
 else {
  $("#prevs").removeAttr("disabled"); 
}
});  
}); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-29T21:36:32.073

使用 : [enabled](http://www.w3.org/TR/css3-selectors/#UIstates)，但 IE<9 不支持：

```
<style type="text/css">
.my_button{
   /* ... */
}

.my_button:hover:enabled{
   /* this will only show when the button is enabled, */
   /* and the user is hovering over it.. */
}
</style> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T15:54:13.547

您可以使用 css`:not()`选择器。例如：`button:not([enabled="enabled"])`。[此处](http://kilianvalkhof.com/2008/css-xhtml/the-css3-not-selector/)`:not()`有关选择器的更多信息。

# maven - Maven 没有在三个级别下引入依赖项

> ID：11327715
> 
> 赞同：2
> 
> 时间：2012-07-04T10:58:12.323
> 
> 标签：maven, dependencies

在我的应用程序中，我依赖于 activemq-core，链看起来像这样

```
activemq-core > fusemq-leveldb > hadoop-core > commons-configuration > commons-collections 
```

我`CircularFifoBuffer`在`commons-collections`我的应用程序中使用过。它编译得很好，但是当我编写测试时，它在运行时失败并出现 ClassNotFoundException。

我通过在顶层添加依赖来解决它。

传递依赖不起作用的任何原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T12:30:14.653

好吧，我建议你运行：

```
mvn dependency:tree -Dverbose 
```

可能是其他一些传递依赖覆盖了您期望/希望使用的版本。用这份详细的报告检查你的树，你就能弄清楚，我敢肯定。

# javascript - IE8 中未定义的 Window.opener？

> ID：11327723
> 
> 赞同：5
> 
> 时间：2012-07-04T10:58:26.750
> 
> 标签：javascript, internet-explorer-8, ckeditor

我不知道我哪里出了问题。在其他浏览器中，它工作正常：

```
function main__pageeditor_new_body_SetUrl()
    {
        function getUrlParam(parentObject, paramName)
        {
          var reParam = new RegExp('(?:[\?&]|&amp;)' + paramName + '=([^&]+)', 'i') ;            
          var match = parentObject.location.search.match(reParam) ;

           return (match && match.length > 1) ? match[1] : '' ;
        }

        var funcNum = getUrlParam(this, 'CKEditorFuncNum');

        this.opener.CKEDITOR.tools.callFunction(funcNum, arguments[0]);
} 
```

但是在 IE 中你会得到这个错误：

`'this.opener.CKEDITOR' is null or not an object`

为什么这行不通？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T16:00:07.707

对于任何想知道的人 - 这有很大帮助：

[http://docs.cksource.com/CKEditor_3.x/Developers_Guide/File_Browser_(Uploader)/Custom_File_Browser](http://docs.cksource.com/CKEditor_3.x/Developers_Guide/File_Browser_(Uploader)/Custom_File_Browser)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T11:07:32.303

出于安全原因，window.opener 并不总是在 IE8 中工作。我认为您可以将站点放在“受信任区域”中，以便它允许 window.opener 工作。

如果这两个窗口位于不同的域中，那么由于相同的源策略，它将无法在任何浏览器中运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T17:59:49.893

请测试一下什么是 NULL ？

```
this.opener
or
this.opener.CKEDITOR 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T18:00:56.963

当我的安全区域在 IE8 中为“Internet”时，window.opener 可以工作。试过 [开窗器](http://www.w3schools.com/js/tryit.asp?filename=try_win_opener)

接下来，我想在 CKEDITOR 本身上尝试这个，所以我去了[CKEDITOR DEMO](http://ckeditor.com/demo)

在那里，我使用开发人员工具栏打开了一个弹出窗口“ *window.open* ”，在弹出窗口中，我执行了以下代码，效果很好。

```
>>String(this.opener.CKEDITOR.tools.callFunction); 
```

回复

```
"function(f){var g=e[f];return g&&g.apply(window,Array.prototype.slice.call(arguments,1));}" 
```

此时，当一切都对我有用时，我会要求您上传您的代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-17T10:03:03.247

我通过[简单的搜索](https://www.google.com/search?q=window.opener+ie8)找到了这个：http : [//social.msdn.microsoft.com/Forums/en-US/iewebdevelopment/thread/0c014e78-8d35-4df3-93da-7f6a30b4ed8b/](http://social.msdn.microsoft.com/Forums/en-US/iewebdevelopment/thread/0c014e78-8d35-4df3-93da-7f6a30b4ed8b/)

那里提供的解决方案是：

> 在 Internet 选项的“安全”选项卡下，单击“受信任的网站”图标。现在选中标记为“启用保护模式”的复选框并重新启动 Internet Explorer。

我发现的另一个[资源](http://social.msdn.microsoft.com/Forums/br/iewebdevelopment/thread/6c2e23ca-9f85-440b-aec5-3a478528b268)建议也从受信任区域中删除该站点：

> 从受信任的站点列表中删除该站点...它可能已经映射到与开启程序（内部网）相同的安全区域。在 IE 中选择“文件”>“属性”对话框以确定页面/域映射到哪个安全区域。

鉴于到目前为止您可能已经尝试了几个建议，您可能已经更改了足够多的设置以处于奇怪的配置状态。我建议您将所有区域设置重置为默认值并从头开始。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-09T08:56:16.640

我在 http://localhost:8080 中运行的 Web 应用程序中遇到了问题 window.opener getting null。如果我放置了 IP 地址/主机名而不是 localhost，那么这个问题就不会发生。

让我们检查一下，我坚信这个解决方案很有帮助。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-08-16T04:00:13.010

您的“this”上下文可能会发生变化，具体取决于您使用该功能的方式。

改变：

```
this.opener.CKEDITOR.tools.callFunction(funcNum, arguments[0]); 
```

到：

```
window.opener.CKEDITOR.tools.callFunction(funcNum, arguments[0]); 
```

这能解决吗？

# javascript - 尝试检索变量以检查表单是否有效

> ID：11327727
> 
> 赞同：0
> 
> 时间：2012-07-04T10:58:34.490
> 
> 标签：javascript, jquery

我正在尝试从我的 JavaScript 表单中检索一个变量，以确定该表单之前是否已经过验证。

因此，当用户单击“提交”按钮时，将对其进行检查。我已经设置好了，所以当点击这个按钮时它可以运行一个函数。

验证码：

```
$(document).ready(function(){
    $('#email').keyup(function() {
        var email = $('#email').val();
        var minChars = 5;
        var characters_error = 'Not enough characters';
        $('#email_status').text("Checking..");  
        if (email != '') {
            if($('#email').val().length <= minChars)
            {
                //if it's bellow the minimum show characters_error text
                $('#email_status').text(characters_error);
            }
            else if ($('#email').val().length > minChars)
            {
                $.post('validation/refer_validation.php', {email: email}, function(data){
                    $('#email_status').text(data);
                }); 
            } else
            {
                $('#email_status').text('');
            }
         }
    });
}); 
```

按钮代码：

```
$(document).ready(function(){
    $("#submit").click(function () {
        if (validated != true)
        {
            // Tell the user that there is an error in the form.
        }
    });
}); 
```

请注意我是如何添加名为“已验证”的变量的，它应该设置在某个地方，但这是我感到困惑的地方。我将如何更新变量并将其返回给按钮？因为验证代码包含在 HTML 表单中，但如果我创建了一个变量，它可能总是将自身更新为默认值，因为该函数是在按键时调用的。

希望这一切都有意义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T11:02:10.007

与其使用提交按钮调用验证函数，不如在表单的 onsubmit 中调用它。如果您返回 true，它将继续并提交表单，如果您返回 false，它将取消表单提交。

```
<form  onsubmit="return validate();"> 
```

Onsubmit 在提交实际发生之前被调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T11:03:41.800

设置一个全局变量，即在所有函数之外，设置

```
var validated = false; 
```

然后相应地设置验证，并且应该在提交中阅读。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T11:07:04.467

使用变量**验证**作为全局变量，对于每个成功的验证使**验证为真**

然后当您单击提交按钮时它工作正常

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T11:08:40.570

与其抛出外部变量，不如记录表单已被验证为表单本身的数据属性这一事实。

此外，在单击按钮时进行验证会忽略表单可以通过 enter 键提交的事实，因此请在表单的提交事件上进行验证。

```
$(function() {
    $('#some_form').on('submit', function() {

        //validated before? forget it
        if ($(this).data('validated')) { alert('already validated'); return false; }

        //else, if first time, log that we're doing it
        $(this).data('validated', 'true');

        //do validation...
   });
}); 
```

# ruby-on-rails - 使用 Rails 3 + Heroku 即时缓存远程图像的策略？

> ID：11327731
> 
> 赞同：0
> 
> 时间：2012-07-04T10:58:43.673
> 
> 标签：ruby-on-rails, ruby, caching, heroku

我是一个 Rails 新手，所以我不确定我应该如何构建它，并希望得到一些输入。

基本上，我想向我的应用程序的用户展示一些图像（具有可预测的文件名）。我会把它们从远程主机上取下来，但我当然不想为每个请求都在那里进行热链接，所以我想以某种方式将它们缓存在我的服务器上。理想情况下，当有人第一次请求图像时，它会从远程服务器下载并呈现给用户，而对于同一图像的后续请求，它将像任何其他静态资产一样被提供和缓存。

通常我只会将图像下载到本地文件系统的`public`文件夹中，但由于我在 Heroku 上运行这个应用程序，所以我没有持久的写访问权限。在我的情况下，处理这一切的好策略是什么？不是在代码中寻找完整的解决方案，只是一些指针。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T19:06:37.280

这是我的处理方法：

首先，在任何地方你都会引用这些图像，而不是在你自己的应用程序中调用控制器上的动作。然后，编写该控制器操作以执行以下操作：

1.  给定一个文件名，
2.  检查图像是否存在于您的 S3 存储桶中；如果是这样，请将 S3 链接返回给它。
3.  如果没有，下载并存储到S3；然后将 S3 链接返回给它。

由于您使用的是 Heroku，因此更好的方法可能是让该操作启动 delay_job 以检索图像（并将其存储在 S3 中）。然后，在您的视图中，有一个轮询机制来定期询问控制器操作是否图像可用。如果不是，则显示加载图标，如果是，则显示图像（指向 S3 上图像的 URL）。在等待图像被缓存时，走这条路线不会占用你的一个测功机。

当然，如果您可以自己预先缓存所有这些远程图像，事情就可以简化。也许是一个 rake 任务，它下载所有这些图像并将它们存储在 S3 中。

希望这可以帮助。

# flash - as3 flash、浏览器、标签和焦点

> ID：11327733
> 
> 赞同：3
> 
> 时间：2012-07-04T10:58:48.837
> 
> 标签：flash, browser, focus

当我在浏览器中打开多个选项卡时，我可以使用 循环浏览它们`ctrl``tab`，但是如果我在任何时候将 Flash 应用程序聚焦然后`ctrl``tab`不再工作...我必须手动单击 Flash 区域外的某个位置，然后`ctrl``tab`.. .

有没有办法

(a) 包含 flash 的 html 以捕获`ctrl``tab`并从 flash 中窃取它

(b) flash 捕获`ctrl``tab`它对浏览器的关注的发布（并通知它或通过`ctrl``tab`事件）..

我敢肯定以前有人问过这个问题，而且我敢肯定，如果没有办法做到这一点，那肯定会惹恼开发人员..

有什么想法、技巧、建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T10:37:15.740

我不是专家，但我知道这个`ctrl``tab`东西是一个内置的热键，用于循环遍历数组的成员（如互联网窗口选项卡、按钮，甚至语言设置）。如果确实如此，我认为唯一的方法是在实际的 Flash 电影/文件中放置一些代码，说明忽略`ctrl``tab`组合键。

```
function f_keyDown(event:KeyboardEvent):void {
    // Keyboard.TAB == 9
    if (Event.keyCode == Keyboard.TAB) {
        trace('Pressed the TAB key!');
        if (event.ctrlKey == true) {
            //the CTRL key on Windows; the COMMAND key on Macs;
            trace('Pressed the CTRL key!');
            //something i don't know XD
        }
    }
}

stage.addEventListener(KeyboardEvent.KEY_DOWN, f_keyDown); 
```

您可能不得不弄乱*FocusManager*类...我不确定您将如何处理它。希望我能帮上一点...

# python - 根据用户输入制作形状

> ID：11327736
> 
> 赞同：0
> 
> 时间：2012-07-04T10:59:02.957
> 
> 标签：python

程序应该从用户那里得到两个数字。第一个数字是三角形的数量。第二个数字是每个三角形的行数。

它基于我们刚刚做的一个方形问题，即

```
numRows = input('Please enter the number of rows: ')
numRows = eval(numRows)
numAst  = 1 
for i in range(numRows):
    print(numAst*'*')
    numAst += 1 
```

我无法为我的生活弄清楚如何让它制作三角形。我知道我需要某种外部循环来重新启动内部循环，但我不知道该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T11:07:28.083

首先，将不安全的用户输入转换为整数有点危险`eval`，因此我将其`int`改为。

其次，您只需要使用三角形数量值创建一个嵌套循环即可重复内部循环`X`次数。当然，您需要更改内部循环函数以打印三角形。

试试这个，看看你能不能从上面的解释中理解：

```
numTris = input('Please enter the number of triangles: ')
numTris = int(numTris)
numRows = input('Please enter the number of rows: ')
numRows = int(numRows)
for _ in range(numTris):
    for numAst in range(1, numRows + 1):
        print(numAst * '*')
    print('') 
```

注意：该变量`_`通常按约定用于您不打算使用的值。在这种情况下，我们只需要它来创建循环，但不要在循环中使用它。

# sql-server - 在数据库中存储可变行/列 CSV 文件

> ID：11327737
> 
> 赞同：4
> 
> 时间：2012-07-04T10:59:07.597
> 
> 标签：sql-server, csv

我有大量由应用程序创建的 CSV 数据，我想将其存储在数据库中，最好是 SQL Server。该数据可以有任意数量的列和任意数量的行，并且将每个数据存储为单独的表没有多大意义。能够搜索这些数据也很棒。将这些数据放入数据库的最佳方法是什么。

例如（我在这里大大简化了事情），只考虑 3 个可能看起来像这样的 CSV 文件：

```
File 1:
aaa,bbb,ccc
ddd,eee,fff
ggg,hhh,iii

File 2:
jjj,kkk
lll,mmm

File 3:
nnn,ooo,ppp,qqq,rrr
sss,ttt,uuu,vvv,www
xxx,yyy,zzz,111,222
333,444,555,666,777 
```

我可能过于简化了，但由于严格的保密协议，我无法发布实际数据。

最好将它存储在数据库中吗？将有数千个文件，每个文件理论上可以具有不同的列宽和不同的行数。

**编辑：可以使用数据集市来实现这一目标吗？如果可以，如何实现？任何指针？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T11:49:37.070

对于每个文件，在“csv 文件”表中创建一条记录。

对于每个列名，在“csv 文件头名”表中创建一条记录，并带有相应的列索引。

为每个 csv 行创建一个键值哈希图，其中“键”是“列索引”，“值”是“行”数据。将此哈希映射序列化为 XML 字符串，然后将此 XML 存储在“csv 文件数据”表 XML 列中。

然后，您可以使用 XPath 选择 XML 行数据，加入“列索引”列以检索原始文件列标题。

**编辑：**

表

```
CSVFile
PK  FilePath
...
7   [\\server1\somedir\foo.csv]
9   [\\server1\dir\bar.csv]
...

CSVFileColumnHeader
PK  FileId  ColumnIndex ColumnName
...
980 7       5           [foo quant]
981 7       6           [foo size]
982 9       3           [bar depth]
..

CSVFileRowData
PK      FileId  RowIndex    RowDataAsXML
..  
1054    7       35          <ArrayOfSerialisableKeyValuePair>...<SerialisableKeyValuePair><Key>5</Key><Value>17</Value></SerialisableKeyValuePair><SerialisableKeyValuePair><Key>6</Key><Value>8cm</Value></SerialisableKeyValuePair>...</ArrayOfSerialisableKeyValuePair>
1055    7       36          <ArrayOfSerialisableKeyValuePair>...<SerialisableKeyValuePair><Key>5</Key><Value>8</Value></SerialisableKeyValuePair><SerialisableKeyValuePair><Key>6</Key><Value>35cm</Value></SerialisableKeyValuePair>...</ArrayOfSerialisableKeyValuePair>
1056    9       4           <ArrayOfSerialisableKeyValuePair>...<SerialisableKeyValuePair><Key>3</Key><Value>4 metres</Value></SerialisableKeyValuePair>...</ArrayOfSerialisableKeyValuePair>
... 
```

然后是这样的 XPath 查询：

```
SELECT  
    CFR.FileId                                      'FileId'
    ,tab.col.value('./Key[1]', 'INT')               'ColumnIndex'
    ,CFR.RowIndex                                   'RowIndex'
    ,tab.col.value('./Value[1]', 'VARCHAR(250)')    'RowValue'
    ,CFC.ColumnName                                 'ColumnName'
FROM 
            CSVFileRowData  CFR
CROSS APPLY RowDataAsXML.nodes('//SerialisableKeyValuePair')tab(col)
INNER JOIN  CSVFileColumnHeader CFC ON tab.col.value('./Key[1]', 'INT') = CFC.ColumnIndex 
```

将以这种格式返回数据：

```
FileId  ColumnIndex RowIndex    RowValue        ColumnName
...
7       5           35          [17]            [foo quant]
7       6           35          [8cm]           [foo size]
.. 
```

# c# - yyyyMMddtt 中的 DateTime.ParseExact 错误

> ID：11327738
> 
> 赞同：3
> 
> 时间：2012-07-04T10:59:10.820
> 
> 标签：c#, datetime

我有一个 DateTime 对象

```
DateTime dtt = new DateTime(2012, 6, 18, 12, 0, 0) 
```

我正在以这种方式将其转换为字符串

```
string str = dtt.ToString("yyyyMMddtt"); 
```

我得到`str`“20120618PM”

好到这里

但是当我尝试使用 DateTime.ParseExact() 将其转换回 DateTime 时，我收到一个错误 `String was not recognised a valid DateTime`

```
dtt = DateTime.ParseExact(str, "yyyyMMddtt", null); 
```

我什至尝试过提供文化，但仍然出现错误

```
dtt = DateTime.ParseExact(str, "yyyyMMddtt", CultureInfo.InvariantCulture); 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T11:06:03.093

根据[DateTime.ParseExact 方法](http://msdn.microsoft.com/en-us/library/w2sa9yss.aspx)的文档，您将`FormatException`在以下情况下得到一个。

> s 中的小时部分和 AM/PM 指示符不一致。

您根本没有小时部分，也没有任何协议导致例外。

如果你真的想坚持使用这种格式`yyyyMMddtt`，你必须自己解析 AM/PM 部分，并在此基础上修改`DateTime`. 然后，您可以使用 解析日期的剩余部分`yyyyMMdd`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T11:01:56.637

此字符串`"20120618PM"`不包含任何`time`.

您确定它与您得到的字符串相同吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T11:05:59.693

已更改格式 yyyyMMdd hh:mm:ss 希望它的 wrk

```
DateTime dtt = new DateTime(2012, 6, 18, 12, 0, 0);
string str = dtt.ToString("yyyyMMdd hh:mm:ss");
dtt = DateTime.ParseExact(str, "yyyyMMdd hh:mm:ss", null); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T11:15:48.370

正如 Martin 和 Asif 所建议的，您必须在字符串中包含小时，以便 ParseExact 确定 AM/PM。

```
 DateTime dtt = new DateTime(2012, 6, 18, 12, 0, 0);
    string str = dtt.ToString("yyyyMMddhhtt");
    dtt = DateTime.ParseExact(str, "yyyyMMddhhtt", CultureInfo.InvariantCulture); 
```

# javascript - asd 滚动条 - 如何在悬停 JS/jQuery 上暂停

> ID：11327739
> 
> 赞同：0
> 
> 时间：2012-07-04T10:59:15.943
> 
> 标签：javascript, jquery

我有一个简单的广告滚动条；] 需要帮助，在悬停时暂停它。

```
$(document).ready(function(mnmTicker){
  var mnmAdsInterval = 2000;
/* Do not modify code below */
var mnmAdsLenght = m3ads_numberadverts;
function mnmSlideAds(){
    hT = $('.someClass').find('a');
    hT2 = hT;
    slideMargin = document.getElementsByClassName('a')[0].offsetHeight;
    $(".someClass .a:first").clone().appendTo(".someClass");
    $(".someClass .a:first").animate({"marginTop":-+slideMargin,},1800, function(){
        $(this).remove();
    });

  };
  var interval = setInterval(mnmSlideAds, mnmAdsInterval); [/code] 
```

顺便提一句。我正在测试这个：

```
$('.someClass .a').hover(function() {
        clearInterval(interval);
    }, function() {
        interval = setInterval(mnmSlideAds, mnmAdsInterval); 
    }); 
```

但不工作;/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T11:20:17.260

您只禁用间隔，但也需要[`stop()`](http://api.jquery.com/stop/)动画：

```
$('.someClass .a').hover(function() {
    clearInterval(interval);
    $(".someClass .a:first").stop();
}, function() {
    interval = setInterval(mnmSlideAds, mnmAdsInterval); 
}); 
```

# java - HttpURLConnection：获取响应代码 400

> ID：11327753
> 
> 赞同：0
> 
> 时间：2012-07-04T11:00:20.133
> 
> 标签：java, http, httpurlconnection

我`HttpURLConnection`用来从 Java 访问服务器。

```
URL: http://clicks.pureleads.com/c/E1oTzCqNzcgtN8YfNs5wg25lxQ7X8*PEqjqks**E|l9gsgSg6ZyKU7FdR0WkUDvIZ2jgG9hhb1qfSlUJpaojsCMystWBEfw6EacQ4K)zd6CtREq0PA68Uj4rPqLEsBgQdK6pgV88epNw3LF7S3X4erNQmaF26N)47Eb8H9O58bmMrEwGTBJ*avyzVCGxuyuaAoqBkOBafBru3i44S*oP74Wu4toNaTW3onZrpV9qsIqsMb3kC9J2s4RDStFqTAzH0VPlO)ZI0SWtJAchAt76suO2vTJdu6WVynplETGZD4I6DvNiQ1CSnQtSE0G2ing(( 
```

对于编码 URL，我正在使用`URLEncoder.encode(url, "UTF-8");`

```
Encoded URL:
http://clicks.pureleads.com/c/E1oTzCqNzcgtN8YfNs5wg25lxQ7X8*PEqjqks**E%7Cl9gsgSg6ZyKU7FdR0WkUDvIZ2jgG9hhb1qfSlUJpaojsCMystWBEfw6EacQ4K)zd6CtREq0PA68Uj4rPqLEsBgQdK6pgV88epNw3LF7S3X4erNQmaF26N)47Eb8H9O58bmMrEwGTBJ*avyzVCGxuyuaAoqBkOBafBru3i44S*oP74Wu4toNaTW3onZrpV9qsIqsMb3kC9J2s4RDStFqTAzH0VPlO)ZI0SWtJAchAt76suO2vTJdu6WVynplETGZD4I6DvNiQ1CSnQtSE0G2ing(( 
```

当我尝试在浏览器中打开上述 URL 时，响应代码为`OK(200)`. 从 Java 中，服务器返回`response code 400`.

代码片段：

```
URI uri = new URI("http", "clicks.pureleads.com","/c/E1oTzCqNzcgtN8YfNs5wg25lxQ7X8*PEqjqks**E|l9gsgSg6ZyKU7FdR0WkUDvIZ2jgG9hhb1qfSlUJpaojsCMystWBEfw6EacQ4K)zd6CtREq0PA68Uj4rPqLEsBgQdK6pgV88epNw3LF7S3X4erNQmaF26N)47Eb8H9O58bmMrEwGTBJ*avyzVCGxuyuaAoqBkOBafBru3i44S*oP74Wu4toNaTW3onZrpV9qsIqsMb3kC9J2s4RDStFqTAzH0VPlO)ZI0SWtJAchAt76suO2vTJdu6WVynplETGZD4I6DvNiQ1CSnQtSE0G2ing((",null);
String url = uri.toString();
serverAddress = new URL(url);
connection = (HttpURLConnection) serverAddress.openConnection();
connection.setConnectTimeout(2000);
connection.setReadTimeout(2000);
connection.connect(); 
```

还尝试了`URLEncoder.encode(url,"UTF-8")`对 URL 进行编码。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T11:18:00.030

为我工作：

```
URI uri = new URI("http", "clicks.pureleads.com","/c/E1oTzCqNzcgtN8YfNs5wg25lxQ7X8*PEqjqks**E|l9gsgSg6ZyKU7FdR0WkUDvIZ2jgG9hhb1qfSlUJpaojsCMystWBEfw6EacQ4K)zd6CtREq0PA68Uj4rPqLEsBgQdK6pgV88epNw3LF7S3X4erNQmaF26N)47Eb8H9O58bmMrEwGTBJ*avyzVCGxuyuaAoqBkOBafBru3i44S*oP74Wu4toNaTW3onZrpV9qsIqsMb3kC9J2s4RDStFqTAzH0VPlO)ZI0SWtJAchAt76suO2vTJdu6WVynplETGZD4I6DvNiQ1CSnQtSE0G2ing((",null);
    String url = uri.toString();
    URL serverAddress = new URL(url);
    HttpURLConnection connection = (HttpURLConnection) serverAddress.openConnection();
    connection.setConnectTimeout(2000);
    connection.setReadTimeout(2000);
    connection.connect();

    InputStream inputStream = connection.getInputStream();

    String output = IOUtils.toString(inputStream); 
```

字符串输出包含以下内容：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
    <meta http-equiv="Refresh" content="1;URL='http://www.macys.com'">
<title></title>
</head>
<body onload='g();'>
<script type="text/javascript">
    var dest_url = "http://www.macys.com"
    var back_url = ""
    function g() {
        if (navigator.userAgent.indexOf("MSIE") != -1) {
           //The user has hit back button
           if (document.getElementById('final').value == 1) {
              document.getElementById('final').value = 0;
              //The ad opened in new window
              if (document.getElementById('hist').value == 0) {
                 self.location.replace(back_url);
              }
              //Ad opened in the same window
              else {
                 history.go(-1);
              }
           }
           else {
              //IE doesn't send referrer when used with replace
              var created_link = document.createElement("a");
              created_link.href = dest_url;
              document.body.appendChild(created_link);
              //set the back button variable and new window variable
              created_link.click(document.getElementById('final').value = 1,     document.getElementById('hist').value = history.length);
           }
        }
        else {
            if (document.images) {
                self.location.replace(dest_url);
            }
            else {
                self.location.href = dest_url;
            }
        }    
    }
</script>
<noscript><img src="noscript.gif"></noscript>
<form>
    <input type="hidden" name="u" value="0" id="final">
    <input type="hidden" name="h" value="-99" id="hist">
</form>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T11:19:31.527

我从执行您的代码中得到 200 响应，也许您在代理或类似的后面？

# sql - 内部查询返回多于一行

> ID：11327754
> 
> 赞同：0
> 
> 时间：2012-07-04T11:00:23.177
> 
> 标签：sql, oracle

我在 sql developer 中使用 oracle 11i ..

这是我的查询：

```
SELECT itm.stu_no,wm_concat(uif.names) 
FROM personal uif,Coll itm, Dep ihts
WHERE uif.stu_id IN('26',    '29',    '32')   
  and (uif.stu_no,uif.stu_no) in 
  (
       select itm.stu_no,itm.stu_test_no 
       from Col itm,Dep ihts  
       where itm.stu_no = ihts.stu_no
       AND itm.status = 'A'
       AND ihts.status = 'A'
  )
  AND itm.status = 'A'
  and  itm.stu_no=ihts.stu_no and ihts.status = 'A'
  group by itm.stu_no; 
```

内部查询（标记为**强文本**）返回...

```
stu_no             stu_test_no
-----------------------------------
123                 234 
```

但完整的查询没有返回任何行。

这是预期的结果..

```
stu_no              wm_concat(names)
------------------------------------------
123                  James Alex
234                  (null) 
```

有什么办法可以得到预期的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T11:15:37.863

它不起作用，因为您要求**两者**`uif.stu_no`兼而有之： (123,123) 不在 ((123,234)) 和 (234,234) 不在 ((123,234))`123` **`234`** 

 **你可以试试这个：

```
SELECT itm.stu_no,wm_concat(uif.names) 
FROM personal uif,Coll itm, Dep ihts
WHERE uif.stu_id IN('26',    '29',    '32')   
  and uif.stu_no in 
  (
       select itm.stu_no 
       from Col itm,Dep ihts  
       where itm.stu_no = ihts.stu_no
       AND itm.status = 'A'
       AND ihts.status = 'A'
       union all
       select itm.stu_test_no 
       from Col itm,Dep ihts  
       where itm.stu_no = ihts.stu_no
       AND itm.status = 'A'
       AND ihts.status = 'A'
  )
  AND itm.status = 'A'
  and  itm.stu_no=ihts.stu_no and ihts.status = 'A'
  group by itm.stu_no; 
```

但为什么不：

```
SELECT itm.stu_no,wm_concat(uif.names) 
FROM personal uif, Coll itm, Dep ihts
WHERE uif.stu_id IN('26',    '29',    '32')   
  and (uif.stu_no = itm.stu_no OR uif.stu_no = itm.stu_test_no)
  AND itm.status = 'A'
  and itm.stu_no = ihts.stu_no 
  and ihts.status = 'A'
  group by itm.stu_no; 
```**

# graph - 融合图表 - 饼图在零值上出错

> ID：11327758
> 
> 赞同：0
> 
> 时间：2012-07-04T11:00:42.147
> 
> 标签：graph, visualization, pie-chart, fusioncharts

我正在使用融合图来渲染饼图。在某些情况下，传递给图形字符串的所有值都将为零。那是以错误的方式返回图表，而不是显示没有数据显示。以下是我正在使用的图形标签。

```
 Int  PendingAmount =0;
Int PaidAmount =0;
"<graph showNames=\"1\" bgAlpha=\"0,0\" numberPrefix=\"Rs. \" decimalPrecision=\"0\"><set name=\"Paid\" value=\"" + PendingAmount + "\"  color=\"A4CFD7\"/>  <set name=\"Pending\" value=\"" + PaidAmount + "\" color=\"58A1C7\" /></graph>"; 
```

这就是图表的显示方式。

![在此处输入图像描述](../Images/b500992742309e54058a0f5f8ad24702.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T11:30:44.727

我在融合图表上遇到了类似的问题。我首先建议您使用他们的最新版本。他们可能已经解决了这个问题。

在我的情况下，我手动检查没有值或零值，然后用简单的 html 文本替换图表，如没有数据显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T05:21:52.410

如果您只定义图表元素，那么您将收到“No Data to Display”错误消息。

如果您定义了至少一个 set 元素，那么您将不会收到“没有要显示的数据”错误消息，因为有要显示的数据，但这次将呈现零数据，因此将呈现零饼图（仅图表画布）。

希望这可以帮助！

# jquery - CSS继承宽度不起作用

> ID：11327766
> 
> 赞同：3
> 
> 时间：2012-07-04T11:01:05.403
> 
> 标签：jquery, html, css

我目前正在尝试创建一个基于浏览器的日历，它允许将工作或会议等覆盖在顶部，这将使用 AJAX（或类似的）动态检索并显示给最终用户。

不幸的是，我的 CSS （非常）生锈了，或者这只是另一个让我难以理解的奇怪现象。

基本思想是`<div>`为每个会议或工作在`<td>`日历中正确的日期/时间创建一个。但是，我目前无法让这个 div 继承它的宽度，`<td>`因此它不会与其他日子重叠。

我正在使用的当前 CSS 包含...

```
td {
    border-left: solid 1px gray;
    border-right: solid 1px gray;
    border-bottom: solid 1px lightgray;
    border-top: solid 1px lightgray;
    **width: 12.5%;**
    height: 10px;
    font-size: 0.1em;
}

div.job { 
       position: absolute; 
       background: #C83636; 
       background: rgba(200, 54, 54, 0.7); 
       font-size: 8px; 
       color: white; 
       margin-top: 3px; 
       width: inherit; 
       height: 10px; 
} 
```

然后我将使用 jquery 创建这些 div，如下所示：
`$("#1-1").html("<div class='job'>Some test text</div>");`

据我目前的理解，这应该意味着 created`<div>`继承了`<td>`它所包含的宽度，因此很好地适合单元格。但是，当我测试它时，这在 Opera 或 Firefox 中都没有发生。
[我所看到的](http://i48.tinypic.com/2nvgdpw.png)

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T11:17:36.603

将位置：绝对更改为 div.job 类的位置：相对

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T11:16:24.183

也许在工作 div 上尝试“width:auto”？

可能还将 div 设置为“display:inline-block”。

我认为刚才发生的事情是你的工作 div 继承了 12.5% 的宽度，所以它们变成了 12.5% 的 12.5%（如果这有意义的话？）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T11:44:46.747

添加显示：内联块；到 div.job

这里有一点点修改......随意使用它

```
td {
 border-left: solid 1px gray;
 border-right: solid 1px gray;
 border-bottom: solid 1px lightgray;
 border-top: solid 1px lightgray;
 width: 12.5%;
 height: 10px;
 font-size: 1.1em;
}
div.job { 
 background: #C83636;
 background: rgba(200, 54, 54, 0.7);
 font-size: 1.1em;
 color: white; width: 100%; height: 100%;display:inline-block } 
```

# ruby - 在 Windows ftp 服务器上使用 ftp.nlst 让我感到困惑

> ID：11327769
> 
> 赞同：0
> 
> 时间：2012-07-04T11:01:11.487
> 
> 标签：ruby, ftp

所以我正在阅读`nlst`NET::FTP 模块（ruby-1.8.6）中方法的文档。显示的源代码是

```
# File net/ftp.rb, line 602
def nlst(dir = nil)
  cmd = "NLST"
  if dir
    cmd = cmd + " " + dir
  end
  files = []
  retrlines(cmd) do |line|
    files.push(line)
  end
  return files
end 
```

所以命令是按字面意思写在字符串中的`cmd`，通过执行`retrlines`并返回文件列表，对吗？

我不明白的是，在我的 windows ftp 服务器上没有这样的命令：

```
230 User logged in.
Remote system type is Windows_NT.
ftp> nlst
?Invalid command
ftp> 
```

然而该方法返回文件列表。这怎么可能？源代码似乎对命令没有某种抽象，而且 retrlines 的源代码也没有任何特别之处（对我而言）。

```
# File lib/net/ftp.rb, line 475
    def retrlines(cmd) # :yield: line
      synchronize do
        with_binary(false) do
          conn = transfercmd(cmd)
          loop do
            line = conn.gets
            break if line == nil
            yield(line.sub(/\r?\n\z/, ""), !line.match(/\n\z/).nil?)
          end
          conn.close
          voidresp
        end
      end
    end 
```

我追溯了`sendcmd`内部调用的方法，`transfercmd`但我真的不知道。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T12:08:14.917

问题是谁在告诉你`?Invalid command`？

在这种情况下，它是 FTP**客户端**，而不是服务器。

客户端只是它实现的命令的前端，将这些前端命令转换为服务器的正确 FTP 协议命令字符串。

您正在寻找的是客户端中的`nlist`(not `nlst`) 命令，它将`NLST`向服务器发出 FTP 协议命令。

```
ftp> help nlst
?Invalid help command nlst
ftp> help nlist
nlist           nlist contents of remote directory
ftp> 
```

# shell - 如何在 bash 脚本中运行带有参数的函数

> ID：11327771
> 
> 赞同：0
> 
> 时间：2012-07-04T11:01:23.923
> 
> 标签：shell

我试图在我的脚本之外运行一个函数。示例 test.sh：

```
DAYS=10
IP=1.2.3.4

Main {
   functionName ${DAYS} ${IP}
   }

 functionName() {
   echo $1
   echo "$2"
   } 
```

从命令行我正在尝试使用不同的参数运行脚本函数

```
./test.sh functionName 4 "1.3.4.5" 
```

无法让它工作，所以任何想法都会非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T11:08:47.400

如果您`source`是您的脚本，那么这些函数将在您当前的 shell 中可用：

```
. ./test.sh
functionName 4 "1.3.4.5" 
```

缺点是源脚本中不在函数中的任何代码都将运行。您可以通过（在源脚本中）进行如下测试来避免这种情况：

```
if [[ $0 == test.sh ]] 
then 
    Main
fi 
```

这可能就是为什么你有一个主？顺便说一句，你为什么使用全局变量？为什么不在 Main 中声明它们（使用`local`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T12:59:26.217

在函数内部，$1 是传递给函数的参数，而不是传递给脚本的参数。做就是了：

```
DAYS=${1-10}    # set DAYS to first argument, defaulting to "10"
IP=${2-1.2.3.4} # set IP to 2nd argument, defaulting to "1.2.3.4"

Main() {
    functionName ${DAYS} ${IP}
}

functionName() {
    echo $1
    echo "$2"
}
Main 
```

# database - 在设计数据库时需要指导

> ID：11327775
> 
> 赞同：0
> 
> 时间：2012-07-04T11:01:42.317
> 
> 标签：database, database-design

我正在尝试设计一个允许运动队更轻松地组织比赛的网站：

用户注册并加入团队。成员可以浏览可用的团队并向他们发送私人消息以组织比赛。比赛结束后，球队可以在彼此的页面上发表评论，提及他们的技能、体育精神等。这是我想象的数据库的样子：

**用户**

```
* UserID
* Username
* email 
```

**团队**

```
* TeamID
* TeamName
* OtherInfo 
```

**审查**

```
* FromID
* ToID
* Date
* Comments 
```

**信息**

```
* FromID
* ToID
* Content 
```

**UserTeam**（联结表）

```
* pk (UserID, TeamID) 
```

我不太确定如何为评论和消息建模。评论有一个 from 和一个 to 字段，所以我不能像在多对多情况下那样通过使用联结表来规范化设计。

注意：消息可以由成员和团队发送，并且可以由成员或团队接收。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T13:42:47.037

不确定问题是什么，但如果您的消息（和评论？）可以由团队或成员发送和接收，您需要区分消息的目的。添加一个`tinyint`或其他一些列，指示消息是否由个人/团队向个人/团队表示（因此您的查询知道使用相关表的`FromID`and `ToID`）。

团队规模如何？您所说的“成员可以浏览可用的团队并向他们发送私人消息以组织比赛”是什么意思？所有团队的规模都一样吗？人们可以自由地从一个团队跳到另一个团队吗？如果是这样，您需要跟踪团队成员以及是否需要其他成员。您可以在`Team`表或`UserTeam`联结表中执行此操作。

我还猜测您的网站需要登录功能。区分基本团队成员和团队的官方代表可能是一个好主意。因此，只有官方成员（或其他）能够在团队之间发送（和接收！）消息。（如果您打算实现一个简单的留言簿类型的解决方案，这一点可能没用。）

* * *

编辑。标准化的一个选项。

我在您当前的架构中没有发现任何问题，但您可以像这样组合 Review 和 Message 表：

**沟通**

*   消息 ID (PK)
*   FromID（FK 到用户，NOT NULL）
*   AnswerTo（FK 到 MsgID，NULL）
*   时间戳
*   评论/消息（tinyint [通讯的类型]，NOT NULL）
*   文本（非空）

Review/Message 列还可以区分人员和团队之间的消息，因此 FromID 也可以是 FK 到 TeamID。

# android - Android actionbar spinner 选中项、字幕和下拉列表

> ID：11327777
> 
> 赞同：15
> 
> 时间：2012-07-04T11:01:54.110
> 
> 标签：android, drop-down-menu, spinner, android-actionbar

如何使操作栏中的微调器选择不同的项目（显示在操作栏顶部）然后是下拉列表中的项目？示例是操作栏中带有微调器的谷歌邮件：

[![action_bar_pattern_spinner](../Images/16689d2540600657d2322dd61700fb1f.png)](http://developer.android.com/design/media/action_bar_pattern_spinner.png)

*   他们是如何实现这个功能的？
*   我可以更改操作栏中的选定项目而不影响下拉列表中的相同项目吗？
*   他们如何将操作栏中的选定项目更改为具有两行和不同字体但不影响下拉列表中的项目？
*   这是否可以通过 ICS 和操作栏 sherlock 中的操作栏微调器的默认实现来实现这一点，还是我们应该尝试使用自定义视图？

任何源代码、教程或文档都会非常有帮助。我已经在操作栏中有带适配器的绑定微调器，并且我在下拉菜单中有列表，但是我不能以任何方式修改项目而不影响下拉列表中的项目（因为它们是相同的）。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-31T13:59:59.373

要在操作栏微调器中获得与微调器列表中不同的视图，您可以使用[BaseAdapter](http://developer.android.com/reference/android/widget/BaseAdapter.html)或 ArrayAdapter 并覆盖一些方法：

```
 @Override
  public View getView(int position, View convertView, ViewGroup parent) {
    // Return a view which appears in the action bar.

    return yourCustomView..;
  }

  @Override
  public View getDropDownView(int position, View convertView, ViewGroup parent) {
    // Return a view which appears in the spinner list.

    // Ignoring convertView to make things simpler, considering
    // we have different types of views. If the list is long, think twice!
    return super.getView(position, null, parent);
  } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-30T11:15:38.930

it might be a bit too late, but the tutorial with commented codes can be found on the Android developer website: [http://developer.android.com/guide/topics/ui/actionbar.html#Dropdown](http://developer.android.com/guide/topics/ui/actionbar.html#Dropdown)

the basics is that during the activity OnCreate you have to set it to be a list:

```
 getActionBar().setNavigationMode(ActionBar.NAVIGATION_MODE_LIST); 
```

and then create a spinner adapter and a couple of callbacks just like you would do with a normal spinner.

hope it helps

# python - 选择一个应用程序框架来处理带有 Web 请求的离线分析

> ID：11327779
> 
> 赞同：0
> 
> 时间：2012-07-04T11:02:03.977
> 
> 标签：python, web

我目前正在尝试设计一个基于 Web 的应用程序，其中涉及用户发出的请求以触发对其先前输入的数据的分析。后台分析可以与Web服务器在同一台机器上进行，也可以在远程机器上运行，并且不会显着影响网站的性能，以便其他用户在后台分析的同时也可以提出分析请求。请求应进入某种形式的排队系统，一旦分析完成，结果应返回并由用户在其帐户中查看。

请问有人可以告诉我处理这个项目的最有效的框架吗？我目前在Linux上工作，分析软件是用Python编写的，我之前使用Django设计过动态站点。有什么与此兼容的东西可以工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T11:29:08.573

鉴于您的背景和已经用 Python 编写的分析代码，Django + Celery 似乎是一个明显的候选者。我们目前正在将此解决方案用于一个处理量很大的应用程序，该应用程序具有一个前端 django 服务器、一个专用数据库服务器和两个用于后台处理的不同 celery 服务器。将 celery 进程放在不同的服务器上可以使 djangon 前端响应无论 celery 服务器上的负载如何（如果需要，我们可以添加新的 celery 服务器）。

好吧，我不知道它是否是“最有效”的解决方案，但它确实有效。

# android - 当 ViewPager 显示 Fragment 时 EditText 自动打开软键盘

> ID：11327785
> 
> 赞同：31
> 
> 时间：2012-07-04T11:02:17.107
> 
> 标签：android

我的布局中有一个`Fragment`（兼容版本） 。`EditText`我正在使用 a`ViewFlipper`在片段之间翻转。当我到达这个特定`Fragment`的，软键盘会自动打开。这不是我想要的。这是我试图阻止或隐藏它的原因。

试过：

```
android:descendantFocusability="beforeDescendants" 
```

在片段的主视图上

试过：

```
android:windowSoftInputMode="stateHidden" 
```

和

```
android:windowSoftInputMode="stateAlwaysHidden" 
```

在活动清单中

试过：

```
InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
imm.hideSoftInputFromWindow(mViewPager.getChildAt(position).getWindowToken(), 0); 
```

在我的 ViewPager 的 OnPageChangeListener 上

试过：

```
InputMethodManager imm = (InputMethodManager)mContext.getSystemService(Context.INPUT_METHOD_SERVICE);
imm.hideSoftInputFromWindow(voucherView.findViewById(R.id.redeem_mobile_number).getWindowToken(), 0); 
```

在我的片段中的 onCreateView

试过：

```
InputMethodManager imm = (InputMethodManager)mContext.getSystemService(Context.INPUT_METHOD_SERVICE);
imm.hideSoftInputFromWindow(getView().findViewById(R.id.redeem_mobile_number).getWindowToken(), 0); 
```

在我的片段中的 onStart

试过：

```
voucherView.findViewById(R.id.redeem_mobile_number).clearFocus(); 
```

在我的片段中的 onCreateView

在我看来， onPageChangeListener 是这样做的地方，因为其他调用发生在软键盘实际打开之前。任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-07-05T09:07:23.847

[这篇](https://stackoverflow.com/questions/7200281/programatically-hide-show-android-soft-keyboard)文章有一个解决问题的方法。

答案是添加`android:focusableInTouchMode="true"`到`LinearLayout`包含`EditText`. 现在它不会自动调出软键盘。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-19T15:02:53.107

```
 <LinearLayout 
         android:id="@+id/layout"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
         android:focusable="true" 
        android:focusableInTouchMode="true"         
        >

    <EditText
        android:id="@+id/retailer_search_text"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
         />

</LinearLayout> 
```

跟着它走。并且 EditText 应该在 LinearLayout 内。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-04T11:04:42.477

你试过这个吗？

```
<activity
    android:name=".YourActivityName"
    android:configChanges="keyboardHidden|orientation"
    android:windowSoftInputMode="stateHidden" /> 
```

编辑：

试试这个（我现在很糟糕，但试试这个）:)

```
 Thread splashTread = new Thread() {
        @Override
        public void run() {
            try {

                sleep(1);
            } catch (InterruptedException e) {
                // do nothing
            } finally {
                runOnUiThread(new Runnable() {
                    public void run() {
                        InputMethodManager imm = (InputMethodManager)mContext.getSystemService(Context.INPUT_METHOD_SERVICE);
                        imm.hideSoftInputFromWindow(youreditText.getWindowToken(), 0);

                    }
                });

            }
        }
    };
    splashTread.start(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-05-09T07:11:53.423

将此添加到您在keyboardHidden 中的活动标签中`AndroidManifest.xml` ：不会让它自动打开软输入键盘。

```
android:configChanges="orientation|keyboardHidden|screenSize"
android:windowSoftInputMode="stateAlwaysHidden|adjustResize|stateHidden" 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-05-27T17:57:33.853

当我单击片段视图中的编辑文本时，我有一个令人不安的软键盘弹出并向上推所有视图（我的应用程序是嵌套片段的应用程序 - 片段中的片段）

我在这里和互联网上尝试了十几种解决方案，但除此之外没有任何帮助，即`EditText`在 XML 中编辑自身（不是上面的视图/不是清单/不是覆盖创建活动/不是任何其他）

通过在 EditText 的 xml 中添加`android:focusableInTouchMode="false"`行。

我在这个线程上从 ACengiz 借了解决方案

[在android中单击edittext时如何阻止虚拟键盘？](https://stackoverflow.com/questions/1845285/how-to-block-virtual-keyboard-while-clicking-on-edittext-in-android/21721742#21721742)

只有2个人投票给他？尽管对我来说，在头疼了几个小时之后，这是一个节省

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-10T08:41:57.003

这对我有用。

```
edittext.setInputType(InputType.TYPE_NULL);      
if (android.os.Build.VERSION.SDK_INT >= 11)   
{  
    edittext.setRawInputType(InputType.TYPE_CLASS_TEXT);  
    edittext.setTextIsSelectable(true);  
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-01-04T07:35:31.980

试试这个

```
exitText.setFocusableInTouchMode(true); 
```

# razor - razor mvc 4 rc中的空第一行

> ID：11327787
> 
> 赞同：8
> 
> 时间：2012-07-04T11:02:22.663
> 
> 标签：razor, asp.net-mvc-4

我已经从 mvc 3 迁移到 mvc 4 并遇到了以下问题。

```
@using InvoiceDocflow.Controllers
@{
    Response.ContentType = "text/xml";
}
<?xml version="1.1" encoding="UTF-8" ?>
<dc>
    @foreach (var dcLink in (IEnumerable<DcLink>)ViewData["SupportedDcs"])
    {
        <link rel="@dcLink.RelUri.ToString()" href="@dcLink.DcUri.ToString()" />
    }
</dc> 
```

这是我的看法。我的布局只有一行

```
@RenderBody() 
```

所以在 mvc 3`<?xml version="1.1" encoding="UTF-8" ?>`出现在第一行，但现在，它出现在第二行，第一行是空的。

![在此处输入图像描述](../Images/4e0cca4a7fb8c2f3acf5180cb50ad39c.png)

我可以让它像在 mvc 3 中一样在第一行渲染吗？

顺便一提。

```
@using InvoiceDocflow.Controllers
@{
    Response.ContentType = "text/xml";
}<?xml version="1.1" encoding="UTF-8" ?> 
```

这会起作用，但这根本不是我想做的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-09-23T19:49:51.677

在尝试返回缓存清单文件时，我在页面顶部遇到了类似的空白行问题。解决方案，添加一个 Response.Write("...")，这将在页面的第一行。

```
 @{
     Layout = null;
     Response.Write("CACHE MANIFEST");

} ....... 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-13T12:32:07.057

临时修复？ActionFilter 并去掉空的第一行？显然，如果合适，您还可以对响应进行其他缩小。

```
public class TranslationFilter : MemoryStream
{
    private Stream filter = null;

    public TranslationFilter(HttpResponseBase httpResponseBase)
    {
        filter = httpResponseBase.Filter;
    }

    public override void Write(byte[] buffer, int offset, int count)
    {
        var response = UTF8Encoding.UTF8.GetString(buffer);

        // remove all newlines
        response = response.Replace(System.Environment.NewLine, "");

        /* remove just first empty line
          if (response.Substring(0, 2) == "\r\n")
        {
            response = response.Substring(2, response.Length - 2);
        } */

        filter.Write(UTF8Encoding.UTF8.GetBytes(response), offset, UTF8Encoding.UTF8.GetByteCount(response));
    }
}

public class ResponseFilter : ActionFilterAttribute
{
    public ResponseFilter()
    {
    }

    public override void OnResultExecuted(ResultExecutedContext filterContext)
    {
        base.OnResultExecuted(filterContext);
        filterContext.HttpContext.Response.Filter = new TranslationFilter(filterContext.HttpContext.Response);
    }
} 
```

并将其添加到 Controller 方法中？

```
[ResponseFilter]
public ActionResult Index()
{
return View();
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-10-01T23:09:06.657

我知道这是一个老问题，但我在寻找解决这个问题的方法时发现了它。由于没有人有一个简单的解决方案，这里是我的：

我能够通过使用局部视图而不是普通视图来解决这个问题。我相信问题归结于布局，即使您将其设置为 null 它似乎仍然会添加一个空白的第一行。@{} 也会显示一个空白行，因此您必须将其移动到视图的底部。

所以只需添加一个局部视图并让您的控制器返回局部视图：

```
public ActionResult GenerateXML()
{
    return PartialView("_XML");
} 
```

然后在您的局部视图中，您需要像这样设置它（在底部使用您的 @{}）：

```
@model string
<?xml version="1.0" encoding="UTF-8" ?>
<response>
    <message>@Model</message>
</response>
@{ Response.ContentType = "text/xml";} 
```

这将产生一个 HTML 源代码：

```
<?xml version="1.0" encoding="UTF-8" ?>
<response>
    <message>Response Message</message>
</response> 
```

我希望这可以帮助遇到此问题的其他人。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-16T22:33:53.543

我知道您建议将标签移到末尾，`@{}`但为什么不在此之前放置。此外，这个空白是否会导致错误或问题？您可以清楚地看到这是因为您的代码创建的空白，而不是来自 mvc 或 razor。

也许是这样的：

```
@using InvoiceDocflow.Controllers
<?xml version="1.1" encoding="UTF-8" ?>
@{
 Response.ContentType = "text/xml";
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-02-07T19:25:07.740

上面的解决方案都不适合我，所以在花了很长时间试图修复它之后——它应该很容易，因为它只是一个空行——我写了一篇关于它的博客文章。

[http://devstuffs.wordpress.com/2014/02/07/first-line-empty-in-razor/](http://devstuffs.wordpress.com/2014/02/07/first-line-empty-in-razor/)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-08-05T12:11:22.413

我以这种方式解决了类似的问题：

**_ViewStart.cshtml**

```
@{
    Layout = null;
    Response.Write("<!DOCTYPE html>");
} 
```

**另一个.cshtml**

```
@model ViewModel<EshopWebsiteOrder>
<html>
<head>
    <meta charset="utf-8" /> 
```

最后，在一个地方定义通用 DOCTYPE 是有意义的。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-31T17:13:19.630

另一个没有 ResponseFilter 的简单修复。只需将 @using 放在 cshtml 文件的底部：

```
<?xml version="1.1" encoding="UTF-8" ?>
<dc>
    @foreach (var dcLink in (IEnumerable<DcLink>)ViewData["SupportedDcs"])
    {
        <link rel="@dcLink.RelUri.ToString()" href="@dcLink.DcUri.ToString()" />
    }
</dc>
@using InvoiceDocflow.Controllers
@{
    Response.ContentType = "text/xml";
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-03-13T08:20:57.613

如果你搬家：

```
<?xml version="1.1" encoding="UTF-8" ?> 
```

进入布局模板的顶部，然后让您的 xml 页面继承它并输出它应该工作的 xml 数据。

# php - 更改主键值的 getResult 数组键

> ID：11327798
> 
> 赞同：22
> 
> 时间：2012-07-04T11:02:43.690
> 
> 标签：php, doctrine-orm

是否可以更改 Doctrine2 中 getResult() 的数组键值？

例子：

`$qb->select('t.id, t.name')->from('Table', 't');`

当我打印这个时，我得到了，这不是我想要的：

`print_r($qb->getQuery()->getResult());

//Print result: Array ( [0] => Array ( [id] => 20 [name] => Name1 ) [1] => Array ( [id] => 21 [percentagem] => Name2 ) )`

我想要的是：

`Array ( [20] => Array ( [id] => 20 [name] => Name1 ) [21] => Array ( [id] => 21 [percentagem] => Name2 ) )`

建议，提示将不胜感激。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-03-10T19:24:54.930

我真的很高兴这件事有多酷：

```
$query = $this->getEntityManager()->createQuery('
            SELECT user FROM UserBundle:User user
            INDEX BY user.id
            WHERE user.id = 1
            '
        ); 
```

> INDEX BY 构造不会直接转换为 SQL，但会影响对象和数组的水合。在每个 FROM 和 JOIN 子句之后，您指定该类应在结果中索引的字段。默认情况下，结果由从 0 开始的数字键递增。但是，您可以使用 INDEX BY 指定任何其他列作为结果的键，但它实际上只对主字段或唯一字段有意义。

资料来源：[Doctrine ORM 2 使用 INDEX BY 的文档](https://www.doctrine-project.org/projects/doctrine-orm/en/2.6/reference/dql-doctrine-query-language.html#using-index-by)

*   请在 WHERE 之前使用 INDEX BY

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2015-07-24T14:25:41.263

但是，为了完整起见，您可以对查询生成器执行相同的操作，如下所示：

```
$queryBuilder = $this->getEntityManager()->createQueryBuilder();

$queryBuilder
    ->select('user')
    ->from('UserBundle:User', 'user', 'user.id')
    ->where('user.id = :userId')
    ->setParameter('userId', $userId)
;

var_dump(
    $queryBuilder->getQuery()->getArrayResult()
); 
```

如您所见，**索引**选项可用作查询构建器`from`方法的第三个参数：

```
/**
 * Creates and adds a query root corresponding to the entity identified by the given alias,
 * forming a cartesian product with any existing query roots.
 *
 * <code>
 *     $qb = $em->createQueryBuilder()
 *         ->select('u')
 *         ->from('User', 'u')
 * </code>
 *
 * @param string $from    The class name.
 * @param string $alias   The alias of the class.
 * @param string $indexBy The index for the from.
 *
 * @return QueryBuilder This QueryBuilder instance.
 */
public function from($from, $alias, $indexBy = null)
{
    return $this->add('from', new Expr\From($from, $alias, $indexBy), true);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-08T11:52:45.640

只需使用的第三个参数`->from(entity, alias, indexBy)`

所以与其

```
$qb->select('t.id, t.name')->from('Table', 't'); 
```

采用

```
$qb->select('t.id, t.name')->from('Table', 't', 'Table.id'); 
```

PS：@Francesco-Casula 用更多细节写了很好的答案，好吧。

# android - 在 Facebook、Twitter 和 Google Plus 应用中从其他应用打开页面 - Android

> ID：11327799
> 
> 赞同：12
> 
> 时间：2012-07-04T11:02:45.690
> 
> 标签：android, facebook, twitter, android-intent, google-plus

我正在开发一个需要集成不同社交网络的社交功能的应用程序：Facebook、Twitter、Google+。

现在，在 Facebook 和 Twitter 中，如果用户有本机应用程序，我会被识别，如果有，我会打开它并向他展示我的粉丝页面。

对于 Twitter，我使用下面的代码：

```
try {

  Intent intent = new Intent(Intent.ACTION_VIEW,
        Uri.parse("twitter://user?screen_name=[user_name]"));
    startActivity(intent);

    }catch (Exception e) {
        startActivity(new Intent(Intent.ACTION_VIEW,
             Uri.parse("https://twitter.com/#!/[user_name]"))); 
    } 
```

对于 Facebook，下一个代码：

```
try{

Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse("fb://profile/" + PROFILE_FACEBOOK_APP_ID));
startActivity(intent);

}catch(Exception e){

startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("http://www.facebook.com/UserNamePage")));
} 
```

现在我想为 Google+ 做同样的事情。我看到我可以用下一个 Url 浏览到我的粉丝页面`https://plus.google.com/MY_PAGE_ID/`，但它一直问我是想用 Google+ 应用程序还是用浏览器打开它，我希望他会用应用程序自动打开它，而不用问用户。

有没有一种简单的方法可以做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-04T12:14:32.540

找到了解决方案：

```
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setClassName("com.google.android.apps.plus",
"com.google.android.apps.plus.phone.UrlGatewayActivity");
intent.putExtra("customAppUri", "FAN_PAGE_ID");
startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-09-06T12:58:15.617

我认为这是相当安全的，因为我们不需要指定组件，只需指定 google+ 应用程序包名称：

```
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setData(Uri.parse("https://plus.google.com/[Google+ID]/"));
intent.setPackage("com.google.android.apps.plus"); // don't open the browser, make sure it opens in Google+ app
startActivity(intent); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-04T11:13:14.167

未知 google plus 是否需要 Intent 中的其他信息，但作为一般的 Android 解决方案，您可以显式设置目标。您将需要 google+ 的软件包名称。

更多信息在这里：http: [//developer.android.com/reference/android/content/Intent.html#setPackage%28java.lang.String%29](http://developer.android.com/reference/android/content/Intent.html#setPackage%28java.lang.String%29)

例如：

```
Intent.setPackage("com.google.android.apps.plus"); //Don't know the exact package name 
```

# javascript - 计数该对象在javascript中有另一个对象吗？

> ID：11327802
> 
> 赞同：-1
> 
> 时间：2012-07-04T11:03:12.703
> 
> 标签：javascript, javascript-objects

我的对象数据如下：

```
var object = '({10:{id:"10", v_title:"1", ' +
              '13:{id:"13", v_title:"1.1", ' +
                '15:{id:"15", v_title:"1.1.1 ", v_noofpara:"g2 ", v_description:"d1.1.1"}' +
              '}'+
           '},'+ 
           '11:{id:"11", v_title:"2", ' +
             '14:{id:"14", v_title:"2.1", ' +
               '16:{id:"16", v_title:"2.1.1 ", v_noofpara:"g1 ", v_description:"des2.1.1 "}' +
             '}' +
           '}' +
         '})' 
```

请注意，键值 10（祖父）有 13（父），而 13 有 15（子）。同样 11(parent) 有 14 和 14 有 16。

使用`hasOwnProperty`或任何其他方法都可以给我与关系的计数，以便进一步使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T11:34:11.723

由于您没有处理有效的 JSON 结构，因此您必须通过以下方式运行它`eval`：

```
var myObject = eval(object); 
```

现在您有一个有效的 Javascript 对象，您可以循环获取每个孩子的计数或每个第一个孩子的总和等。
请参阅有关[如何获取对象长度的](https://stackoverflow.com/questions/5533192/how-to-get-object-length-in-jquery)StackOverflow 问题。提供了有和没有 jQuery 的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T11:26:11.553

您可以使用*eval*将其转换为对象：

```
var o = eval(object); 
```

现在您可以使用 for..in 来迭代属性。您可以测试每个属性的值，如果它是一个对象，也可以对它执行 for..in ，直到*无穷*大。

# javascript - 更新原型变量 Javascript

> ID：11327804
> 
> 赞同：0
> 
> 时间：2012-07-04T11:03:16.043
> 
> 标签：javascript, oop, prototype

我正在做一个项目，我需要通过该方法从正在播放的视频中返回一个帧数`video.prototype.getCurrentFrame()`。我的脚本工作得非常好，除了这个方法返回的数字是“未定义”。我知道我的问题与我的变量范围有关，但我是 javascript 的新手，我似乎无法让它自己工作......

在我的方法`video.prototype.setUpPlayer`中，我有一个函数可以让我计算帧数，在该函数`'timeListener'`中我更新了一个名为 frame 的变量；如果我尝试通过它访问这个帧变量`video.prototype.getCurrentFrame()`，它不会达到更新的值。

到目前为止，这是我的代码：

```
var Video = function(aVideoId){
this.videoId = aVideoId;
this.frame;
this.videoContainer; 
this.myPlayer;
this.timeListener;
this.progressListener;
};

Video.prototype.getCurrentFrame = function(){
    return this.frame;
}

Video.prototype.setVideoContainer = function(){
        videoContainer = $('<div>', {
        id: this.videoId,
        class: 'projekktor',
        width: "100%",
        height: "100%",
    });
    $('#innerContainer').html(videoContainer);
}

Video.prototype.setUpPlayer = function(){
    videoId = this.videoId;

    myPlayer = projekktor('#' + videoId, {
        controls: "true",
        volume: 0.5,
        preload: false,
        autoplay: true,
        playlist: [{
            0: {
                src: '/' + videoId + '.mp4',
                type: 'video/mp4'
            },
            1: {
                src: '/' + videoId + '.mov',
                type: 'video/mov'
            },
            2: {
                src: '/' + videoId + '.ogv',
                type: 'video/ogv'
            }
        }]
    }, function() { // call back
        myPlayer.addListener('time', timeListener);
        myPlayer.addListener('progress', progressListener);
    });

    timeListener = function(duration) {
            $('#currentTime').html(duration);
            frame = Math.round(duration * 25);
            $('#currentFrame').html(frame); 
                            return this.frame = frame;

        }

    progressListener = function(value) {
            $('#progress').html(Math.round(value))
            $('#progress2').html(myPlayer.getLoadProgress());
        }   
} 
```

在此先感谢您的帮助 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T11:08:32.687

您需要`getCurrentFrame`从 的实例调用`Video`，而不是原型本身：

```
var video = new Video;
alert(video.getCurrentFrame()); 
```

您可以使用原型检索当前帧的唯一方法是使用`apply()`（这也需要一个实例）：

```
var video = new Video;
alert(Video.prototype.getCurrentFrame.apply(video)); 
```

* * *

**编辑：**似乎`timeListener`回调没有在视频实例的上下文中执行。您可能必须将回调显式*绑定*到正确的范围：

```
timeListener = function() 
    {
    //  ...
        this.frame = frame;
    //  ...
    }

var video = new Video;

// binding the correct context
myPlayer.addListener('time', timeListener.bind(video)); 
```

`this`在`timeListener`封现在`video`。

# html - 在 jquery 中查找 html 元素

> ID：11327807
> 
> 赞同：0
> 
> 时间：2012-07-04T11:03:26.580
> 
> 标签：html, jquery-selectors

我应该找到一个类并为此应用逻辑。我的代码结构如下。

```
<div class="class">

  <form>

    <ul>
      <li>xxx</li><li>xxx</li>
    </ul>

    <ul>
      <li>xxx</li><li>xxx</li>
    </ul>

    <ul class="ul_class">

      <li>
        <input ....><a ...><span ..></span>
        <a href="#" title="View History" class="hstry">
        <span class="hide">&nbsp;</span></a>
      </li>

      <li>xxx</li>

     </ul>

   </form> 
```

如何`hstry`在`ul`名为`ul_class`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T11:06:06.587

只需使用普通的 CSS 选择器来查找嵌套类，如下所示：

```
$( 'ul.ul_class .hstry' ) 
```

注意两个类之间的空格。没有它，它将匹配具有两个类的元素，而不是具有 class 的元素，该元素`hstry`低于`<ul>`具有 class 的某个元素`ul_class`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T11:06:56.743

如果您想要内容，请尝试

> var hstry = $('body').find('.hstry').html();

然后你可以用任何你想要的方式操作这个变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T11:07:04.760

使用 jquery： `$("ul.ul_class").find(".hstr");`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T11:09:19.523

```
$('ul.ul_class .hstry').html(); //for html content
$('ul.ul_class .hstry').text(); //for text data 
```

# vba - 将复选框名称、值和组名发送到方法 OnClick

> ID：11327810
> 
> 赞同：1
> 
> 时间：2012-07-04T11:03:44.263
> 
> 标签：vba, vbscript, excel, checkbox

我目前正在尝试在复选框的 onclick 事件中调用 Sub 。我想要做的是获取我单击的复选框的 groupName、Name 和 Value 参数，并将它们输入到一个 sub 中，该 sub 使用变量将组中的其余复选框切换为隐藏或取消隐藏。但是，我希望有多个组复选框具有相同的功能，而不是为每个 onclick 事件创建多个函数，我希望能够调用每次处理可见性变化的子程序。

![应用示例](../Images/f169812047aec4edf06087e19451dbf4.png)

考虑上面的图像。如果我将“管理员”复选框设置为 false，则应隐藏同一框中的“旧版本”复选框。如果我检查它为真，它应该再次显示。我也想对客户端框做同样的事情。我在网上看过很多人推荐使用 ActiveControl.Value 或 Application.Caller 但这些似乎都不起作用。到目前为止我使用的两个潜艇可以在下面找到。在当前状态下，应用程序错误

```
 admin_value = ActiveControl.Value 
```

这是完整的代码片段：

```
 Private Sub admin_toggle_Click()

      Dim admin_group As String
      Dim admin_name As String
      Dim admin_value As String

      admin_value = ActiveControl.Value
      admin_name = ActiveControl.Name
      admin_group = ActiveControl.GroupName

     Call toggle_options

  End Sub

  Private Sub toggle_options()

  Dim ctl As Control

  For Each ctl In Me.Controls

    If TypeOf ctl Is MSForms.CheckBox Then
        If ctl.GroupName = admin_group Then
        If ctl.Name <> admin_name Then
            If admin_value = True Then
            ctl.Visible = True
            Else
            ctl.Visible = False
            End If
        End If
        End If
    End If

Next ctl

End Sub 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T12:10:37.760

这是你正在尝试的吗？

```
Private Sub admin_toggle_Click()
    Dim ctl As Control

    Set ctl = admin_frame.ActiveControl
    ShowHideControls admin_frame, ctl
End Sub

Sub ShowHideControls(frme As Control, cb As Control)
    Dim c As Control

    For Each c In frme.Controls
        If TypeOf c Is MSForms.CheckBox Then
            If c.Name <> cb.Name Then
                If cb.Value = True Then
                    c.Visible = True
                Else
                    c.Visible = False
                End If
            End If
        End If
    Next
End Sub 
```

# objective-c - UIButton still calls IBAction after it's disabled

> ID：11327825
> 
> 赞同：2
> 
> 时间：2012-07-04T11:04:46.343
> 
> 标签：objective-c, uibutton, ibaction

I'm having a problem with the enabling/disabling of a UIButton, disabling the button works fine if I don't enable it again later in my code. When I do enable it later on it shows up as though it's disabled (the opacity changes) yet when I press it the attached IBAction function is still called.

The code:

```
- (void)loadDataFromURL:(NSURL *)URL withLoadIndicator:(UIActivityIndicatorView *)loadIndicator errorName:(NSString *)name sender:(id)sender andCallback:(SEL)selector{

    // Start loading indicator, block button so we will have only one call at a time
    [loadIndicator startAnimating];

    if ([sender isKindOfClass:[UIButton class]]) {
        UIButton *button = sender;
        [button setEnabled:NO];
    }

    // Run the data load sequence
    self.dispatchQueue = dispatch_queue_create("com.companyname.settingsqueue", 0);

    dispatch_async(self.dispatchQueue, ^{
        // Downloading JSON and using CoreData to put it into the sqlite database here
    });

    // After loading is complete stop animating and re-enable the button
    dispatch_async(dispatchQueue, ^{
        [loadIndicator stopAnimating];
        if ([sender isKindOfClass:[UIButton class]]) {
            UIButton *button = sender;
            button.enabled = YES;
        }
    });
} 
```

The strange thing is it works perfectly for the loadIndicator. The button I get from the sender parameter in the function does exist (it's not null). When I remove `button.enabled = YES;` it stays disabled as it should. Is there a way to enable it again after my async code has executed without the button still being enabled during the async execution?

Thanks in advance for helping me.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T15:03:44.297

I found the answer to my problem after extensive searching. Because I wasn't running all my UIView functions on the main thread the UI didn't update even though my function finished. Therefor the button disabled for a really short time and then enabled again, even though my overlaying UIView and UIActivityIndicator were not yet removed from the screen.

I hope this helps someone else with similar issues.

# javascript - 如何从 Freemarker 调用 JavaScript 函数？

> ID：11327826
> 
> 赞同：5
> 
> 时间：2012-07-04T11:04:53.377
> 
> 标签：javascript, freemarker

我有一些基本的 JavaScript 函数：

```
<script type="text/javascript">
    function someTestFunction(param1, param2) {
        //do something
    }
</script> 
```

和 Freemarker 代码：

```
<#if something==somethingElse>
    // call: someTestFunction(something, 123)
<#else>
    // call: someTestFunction(somethingElse, 345)
</#if> 
```

我的问题是：是否有可能，如果可以，如何从 freemarker 标签内部调用 someTestFunction() ？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-04T11:08:13.923

Freemarker 是一种 java 模板语言，这意味着它是在服务器上执行的。javascript 在客户端（用户的浏览器）上执行。您不能以这种方式从 java 服务器调用 javascript 函数。

您可以执行以下操作：

```
<script>
<#if something==somethingElse>
    someTestFunction(something, 123);
<#else>
     someTestFunction(somethingElse, 345);
</#if>
</script> 
```

这意味着 javascript 将根据设置的服务器变量在客户端执行。

# module - Wix：覆盖同一 msi 中的合并模块正在安装的文件？

> ID：11327830
> 
> 赞同：1
> 
> 时间：2012-07-04T11:05:05.387
> 
> 标签：module, merge, windows-installer, overwrite

我遇到了一个文件需要覆盖的情况，由合并模块安装，与相同的 msi 打包，即这个覆盖的过程应该发生在相同的 msi 安装中。

我实际上尝试过使用元素，但它没有用。

我考虑过添加自定义操作，但有两个困惑：何时启动此自定义操作？如果它删除了带有合并模块的那个，安装程序可能会在之后尝试恢复它。

有什么建议/解决方案吗？

谢谢一堆。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T06:33:36.227

在合并过程中，合并模块成为 MSI 的一部分。因此，在您的 MSI 内部，MSI 文件和 MSM 文件没有区别。

软件包中的文件是根据它们在[文件表](http://msdn.microsoft.com/en-us/library/windows/desktop/aa368596%28v=vs.85%29.aspx)中的顺序安装的。因此，使文件覆盖来自同一包的不同文件的唯一方法是确保它的序列更高。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-22T12:44:16.983

我遇到了同样的问题，我通过使用 Orca 从合并模块中删除文件（和组件）来解决它。然后我以与所有其他文件相同的方式将该文件的新版本添加到我的 WiX 项目中。

# realbasic - REALBasic：如何在窗口完全加载后运行代码

> ID：11327834
> 
> 赞同：1
> 
> 时间：2012-07-04T11:05:14.060
> 
> 标签：realbasic

我正在做一个 REALBasic 项目。我想让代码在窗口自动加载后运行。

如果我将代码放在 Open 事件处理程序中，代码会在窗口打开时运行，但在代码完成执行之前不会出现窗口。

所以我想让窗口打开并出现在屏幕上，然后代码自动运行而无需点击任何东西。

这可能吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T12:33:02.843

将您的代码放在一个[Timer](http://docs.realsoftware.com/index.php/Timer)中，并将其`Mode`设置为`ModeSingle`和一个短的`Period`（比如 10 毫秒）。一旦 GUI 完成加载，计时器将触发。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T16:27:44.260

或者您可以将您的代码放在一个线程中并在 Window.Open 事件中启动该线程。这样，如果代码需要一段时间，您的整个应用程序就不会“冻结”您。

有关 Real Studio 中线程的更多信息，请访问[http://docs.realsoftware.com/index.php/Thread](http://docs.realsoftware.com/index.php/Thread)

不过要注意 Threads。直接更新 GUI 控件可能是一件坏事——尤其是对于 Cocoa 构建的应用程序。

# opencv - 使用 OpenCV 检查物理门是否打开或关闭

> ID：11327835
> 
> 赞同：3
> 
> 时间：2012-07-04T11:05:16.263
> 
> 标签：opencv

用相机我必须检查一扇真正的门是打开还是关闭。这是一扇普通的木门（里面没有窗户），你可以在任何房子里找到它。

我想使用 OpenCV 进行图像识别。有了它，我想识别门的打开和关闭状态。

但我不确定我应该为此使用哪种算法或检测方法。什么是最好的选择？

* * *

编辑：

这是门的示例图像。我的一个想法是只扫描图像的一小部分（上角）并用当前图像检查“关闭状态”图像。截图中的小例子也是如此。

![在此处输入图像描述](../Images/847d6c4919708a85b9568f1c12182181.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-04-24T07:26:51.100

我已经在 opencv 上发布了类似内容的答案：http: [//answers.opencv.org/question/56779/detect-open-door-with-traincascade/](http://answers.opencv.org/question/56779/detect-open-door-with-traincascade/)

我的问题是检测具有稳定摄像机角度的门状态。

主要思想是使用洪水填充算法：

```
import cv2
from numpy import *

test_imgs = ['night_open.jpg', 'night_closed.jpg', 'day_open.jpg', 'day_closed.jpg']

for imgFile in test_imgs:
    img = cv2.imread(imgFile)
    height, width, channels = img.shape
    mask = zeros((height+2, width+2), uint8)

    #the starting pixel for the floodFill
    start_pixel = (510,110)
    #maximum distance to start pixel:
    diff = (2,2,2)

    retval, rect = cv2.floodFill(img, mask, start_pixel, (0,255,0), diff, diff)

    print retval

    #check the size of the floodfilled area, if its large the door is closed:
    if retval > 10000:
    print imgFile + ": garage door closed"
    else:
    print imgFile + ": garage door open"

    cv2.imwrite(imgFile.replace(".jpg", "") + "_result.jpg", img) 
```

结果非常好：

```
681
night_open.jpg: garage door open
19802
night_closed.jpg: garage door closed
639
day_open.jpg: garage door open
19847
day_closed.jpg: garage door closed 
```

[![车库门关闭](../Images/9009bb720d073af83fbefb632779db3d.png)](https://i.stack.imgur.com/dlfqg.jpg) [![车库门打开](../Images/8b71d3894d7684fec384086097e3f45f.png)](https://i.stack.imgur.com/ggXRi.jpg)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T11:56:34.210

您可以尝试背景检测算法。这个想法是门状态（打开/关闭）的变化将触发背景的变化。您可以使用此信息对事件进行进一步分类（开/关）。

优点：它会自动适应照明条件的微小变化，并且不需要校准。

这种方法的缺点是其他变化可能会触发一个事件：一个人走在走廊上，灯打开/关闭等。

您检测门上角的想法还不错。您应该手动标记所需区域，然后扫描该矩形以查看木质纹理是否仍然存在。LBP 是一个很好的纹理鉴别器，你可以用它来训练一个分类器来区分木材和非木材。不要忘记为白天/夜晚/晚上/日光/烛光放置样品。

最后，一个非常简单但可能有效的方法是遮盖门上的两个区域：一个是门本身，一个是安装在墙上的木制面具。然后算法根据一个非常简单的指标（平均亮度/颜色/强度/等）比较这两个区域。如果差异高于合理阈值，则可能门已打开，而您看到的是另一个房间（墙壁/窗户/地毯）中的东西

# image-processing - 从背景中提取图像

> ID：11327837
> 
> 赞同：0
> 
> 时间：2012-07-04T11:05:21.647
> 
> 标签：image-processing, imagemagick, webgl

我正在尝试构建一个爱好应用程序，它将人们的 Facebook 对话呈现为卡通片，问题是我需要对话中演员的卡通形象。我正在考虑从他的桌面配置文件中提取一个人的照片并渲染该图像的卡通版本。

有没有办法使用 webGL 或其他方式从背景中提取图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T13:51:28.087

这个问题非常广泛，因为从图像中提取特征并不是那么简单。WebGL 只是一个图形表示工具而不是 SDK，所以你可能在这里问错了人群（另外，因为你的目标是 Facebook 用户，WebGL 不是一个好的交易工具，因为它不支持 Internet Explorer用户）。

但是，可能会或可能不会帮助您的是[边缘检测算法](http://en.wikipedia.org/wiki/Edge_detection)，它可以帮助您构建解决方案，而[海报化过滤器](http://en.wikipedia.org/wiki/Posterization)也可以帮助您。这些效果可以使用 Canvas 和一个简单的[卷积矩阵](http://en.wikipedia.org/wiki/Convolution)来实现。

# c# - 多语言 wpf 应用程序

> ID：11327840
> 
> 赞同：15
> 
> 时间：2012-07-04T11:05:39.760
> 
> 标签：c#, .net, wpf, multilingual

我有一个 WPF 应用程序（英文），我想让用户选择不同的语言。我已经阅读了一些在运行时应用程序中更改语言的可能性，但我只想在安装期间选择一种语言并且从不更改它。

您是否认为最快和最简单的方法是开发不同版本的程序（仅更改文本语言）并让用户在安装过程中选择其中一个？可能重复代码只更改文本框或标签不是很优雅，但请注意，我已经用英语完成了应用程序，我不需要在运行时更改语言。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-07-04T11:53:44.323

您可以按照以下步骤操作：

1.  创建资源文件

    将此文件 StringResources.xaml 添加到 Resources 目录。这是一个例子：

    ```
    <ResourceDictionary 
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
         xmlns:system="clr-namespace:System;assembly=mscorlib">

         <system:String x:Key="close">Close</system:String>
    </ResourceDictionary> 
    ```

    您可以创建多个文件，每种语言一个。

2.  添加资源（启动应用程序时调用它）

    ```
    private void SetLanguageDictionary()
    {
         ResourceDictionary dict = new ResourceDictionary();
         switch (Thread.CurrentThread.CurrentCulture.ToString())
         { 
           case "en-US":
             dict.Source = new Uri("..\\Resources\\StringResources.xaml", UriKind.Relative);
             break;
           case "fr-CA":
             dict.Source = new Uri("..\\Resources\\StringResources.fr-CA.xaml", UriKind.Relative);
             break;
           default :
             dict.Source = new Uri("..\\Resources\\StringResources.xaml",UriKind.Relative);
             break;
         }
         this.Resources.MergedDictionaries.Add(dict);
    } 
    ```

3.  像这样使用资源 -

    ```
    <Button      
       x:Name="btnLogin"
       Click="btnLogin_Click"
       Content="{DynamicResource close}"
       Grid.Row="3"
       Grid.Column="0" 
       Padding="10" /> 
    ```

来源：[https ://www.codeproject.com/Articles/123460/Simplest-Way-to-Implement-Multilingual-WPF-Applica](https://www.codeproject.com/Articles/123460/Simplest-Way-to-Implement-Multilingual-WPF-Applica)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-04T13:14:45.937

我认为Aghilas提出的解决方案很好；但是您可以使用`StaticResource`而不是`DynamicResource`在步骤 3中使用，`DynamicResource`这在您的情况下不是必需的，因为您不会在应用程序运行时更改语言。

还可以查看这些文章，其中包含有关在 WPF 中使用 Resx 文件进行本地化的详细信息 -

[使用 ResX 文件本地化 WPF 应用程序](http://geekswithblogs.net/robp/archive/2008/04/03/localizing-a-wpf-application-with-resx-files.aspx)

[WPF 本地化](http://www.codeproject.com/Articles/37339/WPF-Localization)

[WPF 本地化指南 - 白皮书](http://wpflocalization.codeplex.com/releases/view/29389)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-01-17T13:21:42.130

只是为了改进@AghilasYakoub 的正确答案，我想我需要指出，`App.xaml`除了他所说的之外，应该将以下代码添加到文件中：

```
<Application.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="Resources/StringResources.xaml"/>
            <ResourceDictionary Source="Resources/StringResources.fr-CA.xaml"/>
        </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
</Application.Resources> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-18T12:23:54.557

如果要使用 RESX 文件而不是资源字典，可以使用 XAML 中的静态引用轻松完成。

```
<Window x:Class="MyApp.MainWindow"
                xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                xmlns:res="clr-namespace:MyApp.Resources">
    <Button Text="{x:Static res:MainWindow.MyTestKey}">
</Window> 
```

`Resource`文件夹中有,`MainWindow.resx`等`MainWindow.de.resx`，每个文件都包含一个`MyTestKey`带有翻译的键。

# drools - 使用 Drools5 的示例应用程序

> ID：11327841
> 
> 赞同：0
> 
> 时间：2012-07-04T11:05:41.523
> 
> 标签：drools

我正在研究 Drools5。我是这个 Drools 的新手。我需要这个 Drools 的示例工作示例。为此，我用谷歌搜索了很多，但我没有找到正确的。如果有人有想法可以给我答复.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T10:04:25.897

因为我和你在同一条船上，所以我搜索了很多学习资料。这是我的资源：

[http://www.jboss.org/drools](http://www.jboss.org/drools)项目的通用门户。

由于该项目具有很好的模块化子模块，因此它们是：

1.  [Drools Guvnor](http://www.jboss.org/drools/drools-guvnor.html)用于管理模块，用于管理规则包和带有版本的 POJO，也用于部署快照以供外部使用。

2.  [Drools Expert](http://www.jboss.org/drools/drools-expert.html)项目的专家系统核心。在这里，您可以初步了解在 drools 下规则处理是如何工作的。

3.  [Drools jBPM5](http://www.jboss.org/jbpm)用于业务工作流流程建模和集成。

4.  [用于复杂事件处理 (CEP) 的Drools Fusion](http://www.jboss.org/drools/drools-fusion.html)，您可以使用它进行您能想到的所有时间约束类型的模式匹配（顺便说一下，我最喜欢 ;）。

5.  [Drools Planner](http://www.jboss.org/drools/drools-planner.html)用于规划和业务资源优化。

对于他们每个人，都有一个完整的、我认为高质量的[文档](http://www.jboss.org/drools/downloads)。在那里，您真的可以开始深入研究。您也可以开始研究我的个人清单中的一个或另一个：

*   [流口水融合入门](http://javadude.wordpress.com/2012/03/08/getting-started-with-drools-fusion/#comments)，TheJavaDude
*   [在 Drools Guvnor 中创建类别、包、声明性模型、规则和快照](http://www.youtube.com/watch?v=585tmSp5HXU&feature=BFa&list=PL106C6B66AC0A8CD4)[视频]
*   [Mark Proctors 在 FOSDEM 对口水的介绍](http://www.youtube.com/watch?v=5nqOyuvGBHs)[视频]

我希望这有帮助。

问候，谢尔斯基

# curl - json_decode 返回空字符串

> ID：11327846
> 
> 赞同：1
> 
> 时间：2012-07-04T11:06:04.310
> 
> 标签：curl, json, string

我有一个 json 脚本，我需要使用 CURL 和 json_decode 将其转换为 PHP 数组。CURL 位是通过函数完成的。我的 $getcontent 有数据，但是一旦我把它通过 json_decode，$content 是空的。

它只是返回一个空字符串。

PHP

```
$url='http://lab.volzy.dk/index.json';
$getcontent = get_data($url);

$content = json_decode($getcontent, true);

if(empty($getcontent)) {
echo "getcontent empty";
} else {
echo "getcontent not empty";
}

if(empty($content)) {
echo "content empty";
} else {
echo "content not empty";
}

function get_data($url)
{
$ch = curl_init();
$timeout = 5;
curl_setopt($ch,CURLOPT_URL,$url);
curl_setopt($ch,CURLOPT_RETURNTRANSFER,1);
curl_setopt($ch,CURLOPT_CONNECTTIMEOUT,$timeout);
$data = curl_exec($ch);
curl_close($ch);
return $data;
} 
```

如果我从 URL 复制数据并将其放在单引号内，我会收到数据，但尝试从 URL 获取数据我什么也得不到。

有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T14:28:06.053

您的脚本运行良好，可能是 $timeout 吗？尝试将其设置得更高（15）。

```
function get_data($url)
{
    $ch = curl_init();
    $timeout = 5;
    curl_setopt($ch,CURLOPT_URL,$url);
    curl_setopt($ch,CURLOPT_RETURNTRANSFER,1);
    curl_setopt($ch,CURLOPT_CONNECTTIMEOUT,$timeout);
    $data = curl_exec($ch);
    curl_close($ch);
    return $data;
}

$url='http://lab.volzy.dk/index.json';
$getcontent = get_data($url);

$content = json_decode($getcontent, true);

var_dump($content); 
```

我得到了一个不错的 json 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T14:37:29.843

你的http请求好像没什么特别的，所以不需要curl，试试把你的get_data()换成file_get_contents('http://lab.volzy.dk/index.json');

# c++ - 为使用 GetComputerObjectName 启用哪些访问权限？

> ID：11327850
> 
> 赞同：0
> 
> 时间：2012-07-04T11:06:32.163
> 
> 标签：c++, winapi, visual-c++

我想通过`GetComputerObjectName`尝试获得计算机的简单 DisplayName：

```
//Get the buffer size
    bRet = GetComputerObjectName(NameDisplay, NULL, & ulSize);
    if(!bRet)
    {
        DWORD dw = 0;
        dw = GetLastError();
        MessageBox(NULL, TEXT("Could not get the computer name size."), TEXT("Failure."), MB_OK | MB_ICONERROR);
        exit(-1);
    }

    //Create a buffer large enough to contain the display name
    pBuffer = new TCHAR[ulSize+1];

    //Obtain the computer object name
    bRet = GetComputerObjectName(NameDisplay, pBuffer, &ulSize);
    if(!bRet)
    {
        MessageBox(NULL, TEXT("Could not get the computer name."), TEXT("Failure."), MB_OK | MB_ICONERROR);
        exit(-1);
    } 
```

但是调用`GetComputerObjectName`失败并显示**ERROR_CANT_ACCESS_DOMAIN_INFO。** 我已经尝试启用*特权**SE_SECURITY_NAME* 和 *SE_SYSTEM_PROFILE_NAME*，但这也不起作用。

任何人都知道如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T12:09:09.663

为什么不使用该[`GetComputerNameEx`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724301%28v=vs.85%29.aspx)功能。
试试下面的东西，

`ULONG sz = 0;
GetComputerNameEx(ComputerNameDnsFullyQualified, NULL,&sz);
cout << "size : " << (int)sz << endl;`

它运作良好。我刚刚在网络中的机器上尝试了你的代码，它对我来说也很好用。但是这段代码给出了网络中机器的全名。我猜它也适用于独立机器（就像使用[NET 命令](http://ss64.com/nt/net_useradmin.html)一样）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T12:19:38.767

如果机器不是域的一部分，则正常显示错误 ERROR_CANT_ACCESS_DOMAIN_INFO。如果您确定它是域的一部分，则可以检查防火墙是否阻止了传出端口 135。

# python - 在 Python 中使用通配符替换文件中的一行

> ID：11327865
> 
> 赞同：0
> 
> 时间：2012-07-04T11:07:29.150
> 
> 标签：python

所以希望我没有忽略正确的答案，但是......与 foo bar 主题保持一致。如果我有一个看起来像这样的文件：

```
blah boo who
bar blah blah
bar blah blah
foo some other chars
bar blah
black sheep 
```

我希望能够在不知道以下内容的情况下替换**以或包含开头的行`'foo'`**并替换整行。

我当前的代码很讨厌但可以工作，有没有办法在不加载文件和循环的情况下做到这一点？或者至少比这更有效？

```
filein = open("file", "r")
fileout = open("file.tmp", "w")
for line in filein:
    if line.startswith("foo"):
        fileout.write( "foo"+"my new numbers")
    else:
        fileout.write( line.replace('', '') )
filein.close()
fileout.close()
os.rename("file.tmp", "file") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T11:20:38.307

```
from fileinput import FileInput
with FileInput(files="file", inplace=True) as f:
    for line in f:
        if "foo" in line:
            line = "foo"+"my new numbers"+"\n"
        print(line, end='') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T12:19:52.130

如果您对正则表达式没问题并且文件可以放入内存，那么这应该可以工作：

```
file = open("file", "r")
data = file.read()
file.close()
data = re.sub(re.compile("^(.*)(foo)(.*)$",re.MULTILINE),'foo my new numbers',data)
file = open("file1", "w")
file.write(data)
file.close() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T11:17:51.723

更短的代码可以是：

```
import os
with open('file') as f1,open('file.tmp','w') as f2:
    lines=[x if 'foo' not in x.split() else "foo my new numbers\n" for x in f1]
    f2.writelines(lines)
os.rename("file.tmp", "file") 
```

**或者如果文件很大：**

```
import os
with open('data1.txt') as f1,open('file.tmp','w') as f2:
    for x in f1:
        if 'foo' in x.split():
            f2.write("foo my new numbers\n")
        else:
            f2.write(x)
os.rename("file.tmp", "file") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T11:30:19.373

其他选项：如果 text.split() 中的 "foo" 或者：如果 re.sub(r'foo\b', text)

# sql - 如何在 SQL 中找到最长的没有间隙的时间段？

> ID：11327866
> 
> 赞同：1
> 
> 时间：2012-07-04T11:07:31.140
> 
> 标签：sql, tsql, gaps-and-islands

> **可能重复：**
> [SQL：找到最长的日期间隔](https://stackoverflow.com/questions/1315262/sql-finding-longest-date-gap)

我有一个下面结构的表：

```
| LearnerId | FirstName | LastName |  EnrollmentDate  | CompletionDate | 
```

我需要使用 SQL 查询来获取学校在没有注册或完成学习者的情况下最长的时间。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T11:24:58.910

我假设您可以访问 CTE 和`ROW_NUMBER()`.

首先，您需要一个有序的日期列表。也就是说，不是两列，而是一列。然后，您可以非常简单地将一个日期与下一个日期进行比较。

由于您有两列中的数据，因此创建这个有序列表将相对昂贵。我希望为您着想，您没有大量的数据。

```
WITH
  all_dates
AS
(
  SELECT EnrolmentDate  AS event_date FROM yourTable GROUP BY EnrolmentDate
  UNION
  SELECT CompletionDate AS event_date FROM yourTable GROUP BY CompletionDate
)
,
  sequenced_dates
AS
(
  SELECT
    ROW_NUMBER() OVER (ORDER BY event_date) AS id,
    event_date
  FROM
    all_dates
)
SELECT
  MAX(DATEDIFF(DAY, first_event.event_date, second_event.event_date)) AS duration
FROM
  sequenced_dates    AS first_event
INNER JOIN
  sequenced_dates    AS second_event
    ON first_event.id = second_event.id - 1 
```

# android - 我正在从 sdcard 获取图像并将其显示在 imageview 上，现在我想将此图像插入数据库中，但它没有存储在数据库中

> ID：11327867
> 
> 赞同：0
> 
> 时间：2012-07-04T11:07:31.360
> 
> 标签：android, database, image, insert

我正在为客户创建一个应用程序来存储他们的图像和细节。我正在通过相机或 SD 卡浏览图像。我`ImageView`通过 sdcard 获取图像，但是当我将其插入数据库时​​，它没有插入数据库的图像列中。

我单击 sd 卡按钮来浏览图像。现在这张图片显示在`ImageView`.

```
Button btnsdcard = (Button) findViewById(R.id.custbtnimage);
    btnsdcard.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            Intent i = new Intent(
                    Intent.ACTION_PICK,
                    android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
            startActivityForResult(i, ACTIVITY_SELECT_IMAGE);
        }
    });

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub
    super.onActivityResult(requestCode, resultCode, data);
    switch (requestCode) {
    case 1:
        if (resultCode == RESULT_OK) {
            Uri selectedImage = data.getData();
            try {
                InputStream imgstream = getContentResolver()
                        .openInputStream(selectedImage);
                Bitmap btm = BitmapFactory.decodeStream(imgstream);
                ImageView img = (ImageView) findViewById(R.id.imagecust);
                img.setImageBitmap(btm);
                ByteArrayOutputStream bo = new ByteArrayOutputStream();
                btm.compress(Bitmap.CompressFormat.PNG, 100, bo);
                byte[] custimage = bo.toByteArray();
            } catch (FileNotFoundException e) {                 
                e.printStackTrace();
                Toast.makeText(getBaseContext(), "file not fount",
                        Toast.LENGTH_SHORT).show();
            }
    }   }
    } 
```

现在，当我单击保存按钮时，其他数据存储在数据库中，但图像列在数据库中为空，我没有收到任何错误。

```
 btnsave.setOnClickListener(new OnClickListener() {

        @SuppressLint("ParserError")
        public void onClick(View v) {
            // TODO Auto-generated method stub
            String name = custname.getText().toString();
            String address = custaddress.getText().toString();
            Long pincode = Long.parseLong(custpincode.getText().toString());
        String city = custcity.getText().toString();

            byte[] image=custimage;

            Customerprofile profile = new Customerprofile();
            profile.setName(name);
            profile.setAddress(address);
            profile.setPincode(pincode);
            profile.setCity(city);
            profile.setImage(image);

            insertcust(profile);
                        }

        private void insertcust(Customerprofile profile) {
            // TODO Auto-generated method stub
            DatabaseHelper mydbhelper = new DatabaseHelper(Myimage.this);
            SQLiteDatabase db = mydbhelper.getWritableDatabase();
            ContentValues values = new ContentValues();
            values.put(DatabaseHelper.KEY_NAME, profile.getName());
            values.put(DatabaseHelper.KEY_ADDRESS, profile.getAddress());
            values.put(DatabaseHelper.KEY_PINCODE, profile.getPincode());
            values.put(DatabaseHelper.KEY_CITY, profile.getCity());
            values.put(DatabaseHelper.KEY_IMAGE, profile.getImage());

            long adcid = db.insert(DatabaseHelper.DATABASE_TABLE, null,
                    values);

            db.close();

        }
    });
} 
```

谁能帮我给我解决方案将我的`ImageView`图像存储在数据库中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T11:32:19.683

您确实应该将图像存储在数据库以外的其他位置，只需将图像的路径放在数据库中即可。

如果你真的想把它放在数据库中，你需要创建一个`BLOB`类型来存储它的列（我提到这一点是因为你没有显示你的数据库结构）。

然后你需要将图像转换为字节数组，然后将其保存到数据库中。浏览你的代码，看起来你正在做所有这些......

发现你的问题。您正在使用局部变量，然后尝试在其范围之外引用它们。你有`byte[] custimage = bo.toByteArray();`你的`onActivityResult`，然后尝试`byte[] image=custimage;`在你`onClick`的范围之外使用它。

声明`custimage`为类字段，以便所有方法都可以访问它`byte[] custimage;`，将出现更改`onActivityResult`为`custimage = bo.toByteArray();`，它应该开始工作。

# php - 什么是会话 cookie？

> ID：11327872
> 
> 赞同：0
> 
> 时间：2012-07-04T11:07:52.520
> 
> 标签：php, session, session-cookies, remember-me, session-management

我正在阅读[这篇](http://jaspan.com/improved_persistent_login_cookie_best_practice)`standard session management cookie`文章，我想知道， （SSMC）到底是什么？

它还建议 SSMC 应为 a `session cookie`，因此在关闭浏览器时过期。

[因为这是一篇“改进”的文章，所以我试图在原始文章（这里](http://fishbowl.pastiche.org/2004/01/19/persistent_login_cookie_best_practice/)）中寻找任何定义。根据它，*“SSMC 在会话的整个生命周期内处理凭据，因此新分配的 cookie 将在下一个会话之前进行检查（此时它也将在使用后失效）。”*

我不明白的是，如果会话在浏览器关闭并且会话的生命周期凭据被删除时过期，用户将登录多长时间？以及应该如何使用它？文章中没有关于“普通”cookie（包含登录信息）是会话 cookie，因此它们应该有一个到期日期。

我真的很困惑，所以我希望有人能帮我解决这个问题。任何与此一样安全的替代方案也受到欢迎。谢谢！

**背景：**

我正在使用 cookie 编写一个记住我的功能。显然有 2 个 cookie；第一个是`SSMC`（标准会话管理 cookie），第二个是登录 cookie，包括：

*   用户名
*   `unique token`每次用户登录网站时都会重新生成的
*   A是一个**永远不会**改变`series id`的特定的唯一随机数`username`。这些也存储在数据库的表中。

# tcp - 无法使用 Live555 代理服务器流式传输 RTSP

> ID：11327873
> 
> 赞同：5
> 
> 时间：2012-07-04T11:07:56.150
> 
> 标签：tcp, udp, rtsp, vlc, live555

我正在将 Live555 流媒体用于记录和重新传输来自 IP 摄像机的 RTSP 流的应用程序。为此，我使用 openRTSP 进行录制，使用 live555 代理服务器重新传输摄像机流。对于一些摄像头，我们面临一个奇怪的问题，即摄像头录制成功，但是 live555 代理服务器无法为同一摄像头流生成新流（详细输出转储中没有失败的迹象，但是代理服务器生成的 rtsp url 不能被 rtsp 客户端解码）。由于我对 live555 代理服务器的详细信息一无所知，因此我无法解决这个问题。我尝试使用 VLC 流式传输相同的相机流，效果很好。这可能有什么问题。我特此附上详细输出以供参考。

```
E:\...\live\proxyServer>live555ProxyServer.exe -V rtsp://10.17.10.67/ch0_unicast_firststream
LIVE555 Proxy Server
        (LIVE555 Streaming Media library version 2012.05.17)

Opening connection to 10.17.10.67, port 554...
RTSP stream, proxying the stream "rtsp://10.17.10.67/ch0_unicast_firststream"
        Play this stream using the URL "rtsp://10.17.1.150/proxyStream"

(We use port 8000 for optional RTSP-over-HTTP tunneling.)
...remote connection opened
Sending request: DESCRIBE rtsp://10.17.10.67/ch0_unicast_firststream RTSP/1.0
CSeq: 2
User-Agent: ProxyRTSPClient (LIVE555 Streaming Media v2012.05.17)
Accept: application/sdp

Received 716 new bytes of response data.
Received a complete DESCRIBE response:
RTSP/1.0 200 OK
CSeq: 2
Date: Wed, Jul 04 2012 10:55:19 GMT
Content-Base: rtsp://10.17.10.67/ch0_unicast_firststream/
Content-Type: application/sdp
Content-Length: 540

v=0
o=- 1341385393116860 1 IN IP4 10.17.10.67
s=Session of first stream
i=First Codec Stream
t=0 0
a=tool:LIVE555 Streaming Media v2007.08.03
a=type:broadcast
a=control:*
a=range:npt=0-
a=x-qt-text-nam:Session of first stream
a=x-qt-text-inf:First Codec Stream
m=video 0 RTP/AVP 96
c=IN IP4 0.0.0.0
a=rtpmap:96 MP4V-ES/90000
a=fmtp:96 profile-level-id=5;config=000001B005000001B509000001000000012000847A98
28A02240A31F
a=control:track1
m=metadata 0 RTP/AVP 97
c=IN IP4 0.0.0.0
a=rtpmap:97 METADATA/64000
a=control:track2

ProxyServerMediaSession["rtsp://10.17.10.67/ch0_unicast_firststream/"] added new
 "ProxyServerMediaSubsession" for RTP/video/MP4V-ES track
ProxyServerMediaSession["rtsp://10.17.10.67/ch0_unicast_firststream/"] added new
 "ProxyServerMediaSubsession" for RTP/metadata/METADATA track
Sending request: OPTIONS rtsp://10.17.10.67/ch0_unicast_firststream/ RTSP/1.0
CSeq: 3
User-Agent: ProxyRTSPClient (LIVE555 Streaming Media v2012.05.17)

Received 122 new bytes of response data.
Received a complete OPTIONS response:
RTSP/1.0 200 OK
CSeq: 3
Date: Wed, Jul 04 2012 10:55:56 GMT
Public: OPTIONS, DESCRIBE, SETUP, TEARDOWN, PLAY, PAUSE

Opening connection to 10.17.10.67, port 554...
...remote connection opened
Sending request: OPTIONS rtsp://10.17.10.67/ch0_unicast_firststream/ RTSP/1.0
CSeq: 4
User-Agent: ProxyRTSPClient (LIVE555 Streaming Media v2012.05.17)

Received 122 new bytes of response data.
Received a complete OPTIONS response:
RTSP/1.0 200 OK
CSeq: 4
Date: Wed, Jul 04 2012 10:56:48 GMT
Public: OPTIONS, DESCRIBE, SETUP, TEARDOWN, PLAY, PAUSE

Opening connection to 10.17.10.67, port 554...
...remote connection opened
Sending request: OPTIONS rtsp://10.17.10.67/ch0_unicast_firststream/ RTSP/1.0
CSeq: 5
User-Agent: ProxyRTSPClient (LIVE555 Streaming Media v2012.05.17)

Received 122 new bytes of response data.
Received a complete OPTIONS response:
RTSP/1.0 200 OK
CSeq: 5
Date: Wed, Jul 04 2012 10:57:43 GMT
Public: OPTIONS, DESCRIBE, SETUP, TEARDOWN, PLAY, PAUSE

Sending request: OPTIONS rtsp://10.17.10.67/ch0_unicast_firststream/ RTSP/1.0
CSeq: 6
User-Agent: ProxyRTSPClient (LIVE555 Streaming Media v2012.05.17)

Received 122 new bytes of response data.
Received a complete OPTIONS response:
RTSP/1.0 200 OK
CSeq: 6
Date: Wed, Jul 04 2012 10:58:23 GMT
Public: OPTIONS, DESCRIBE, SETUP, TEARDOWN, PLAY, PAUSE

Sending request: OPTIONS rtsp://10.17.10.67/ch0_unicast_firststream/ RTSP/1.0
CSeq: 7
User-Agent: ProxyRTSPClient (LIVE555 Streaming Media v2012.05.17)

Received 122 new bytes of response data.
Received a complete OPTIONS response:
RTSP/1.0 200 OK
CSeq: 7
Date: Wed, Jul 04 2012 10:59:04 GMT
Public: OPTIONS, DESCRIBE, SETUP, TEARDOWN, PLAY, PAUSE

Sending request: OPTIONS rtsp://10.17.10.67/ch0_unicast_firststream/ RTSP/1.0
CSeq: 8
User-Agent: ProxyRTSPClient (LIVE555 Streaming Media v2012.05.17)

ProxyRTSPClient["rtsp://10.17.10.67/ch0_unicast_firststream/"]: lost connection
to server ('errno': 10057).  Resetting...
Opening connection to 10.17.10.67, port 554...
...remote connection opened
Sending request: OPTIONS rtsp://10.17.10.67/ch0_unicast_firststream/ RTSP/1.0
CSeq: 9
User-Agent: ProxyRTSPClient (LIVE555 Streaming Media v2012.05.17)

Received 122 new bytes of response data.
Received a complete OPTIONS response:
RTSP/1.0 200 OK
CSeq: 9
Date: Wed, Jul 04 2012 11:00:29 GMT
Public: OPTIONS, DESCRIBE, SETUP, TEARDOWN, PLAY, PAUSE

Opening connection to 10.17.10.67, port 554...
...remote connection opened
Sending request: OPTIONS rtsp://10.17.10.67/ch0_unicast_firststream/ RTSP/1.0
CSeq: 10
User-Agent: ProxyRTSPClient (LIVE555 Streaming Media v2012.05.17)

Received 123 new bytes of response data.
Received a complete OPTIONS response:
RTSP/1.0 200 OK
CSeq: 10
Date: Wed, Jul 04 2012 11:01:22 GMT
Public: OPTIONS, DESCRIBE, SETUP, TEARDOWN, PLAY, PAUSE

Sending request: OPTIONS rtsp://10.17.10.67/ch0_unicast_firststream/ RTSP/1.0
CSeq: 11
User-Agent: ProxyRTSPClient (LIVE555 Streaming Media v2012.05.17)

Received 123 new bytes of response data.
Received a complete OPTIONS response:
RTSP/1.0 200 OK
CSeq: 11
Date: Wed, Jul 04 2012 11:02:05 GMT
Public: OPTIONS, DESCRIBE, SETUP, TEARDOWN, PLAY, PAUSE

Sending request: OPTIONS rtsp://10.17.10.67/ch0_unicast_firststream/ RTSP/1.0
CSeq: 12
User-Agent: ProxyRTSPClient (LIVE555 Streaming Media v2012.05.17)

Received 123 new bytes of response data.
Received a complete OPTIONS response:
RTSP/1.0 200 OK
CSeq: 12
Date: Wed, Jul 04 2012 11:02:39 GMT
Public: OPTIONS, DESCRIBE, SETUP, TEARDOWN, PLAY, PAUSE

Sending request: OPTIONS rtsp://10.17.10.67/ch0_unicast_firststream/ RTSP/1.0
CSeq: 13
User-Agent: ProxyRTSPClient (LIVE555 Streaming Media v2012.05.17)

Received 123 new bytes of response data.
Received a complete OPTIONS response:
RTSP/1.0 200 OK
CSeq: 13
Date: Wed, Jul 04 2012 11:03:10 GMT
Public: OPTIONS, DESCRIBE, SETUP, TEARDOWN, PLAY, PAUSE

Sending request: OPTIONS rtsp://10.17.10.67/ch0_unicast_firststream/ RTSP/1.0
CSeq: 14
User-Agent: ProxyRTSPClient (LIVE555 Streaming Media v2012.05.17)

Received 123 new bytes of response data.
Received a complete OPTIONS response:
RTSP/1.0 200 OK
CSeq: 14
Date: Wed, Jul 04 2012 11:03:46 GMT
Public: OPTIONS, DESCRIBE, SETUP, TEARDOWN, PLAY, PAUSE 
```

等待你的回复。

问候，

索拉布·甘地

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-06-20T05:56:28.280

这可能主要是因为防火墙阻止了 udp 端口​​。尝试`-t`flag 强制通过 tcp 传输。

# scala - scala：折叠元组成功

> ID：11327874
> 
> 赞同：0
> 
> 时间：2012-07-04T11:07:56.323
> 
> 标签：scala, variables, tuples, local, fold

使用返回 Either[Fail, TupleX] 的表达式，我如何折叠结果而不必在成功块中定义本地 val？

```
// returns Either[Fail, Tuple2[String, String]]
val result = for{
  model <- bindForm(form).right
  key   <- dao.storeKey(model.email, model.password)
} yield (model.email, key)

result fold (
  Conflict(_),
  tuple2 => { // want to define email/key on this line
    val(email,key) = tuple2
    ...
  }
) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T11:23:01.620

像这样

```
result fold (Conflict(_), { case (email, key) => ... }) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T11:23:36.080

这是一个最小的工作示例：

```
case class Conflict(s: String)

def foo(result: Either[Conflict, Tuple2[String, String]]) = {
  result.fold(
    c => println("left: " + c.toString),
    { case (email, key) => println("right: %s, %s".format(email, key))}
  )
}

foo(Left(Conflict("Hi")))     // left: Conflict(Hi)
foo(Right(("email", "key")))  // right: email, key 
```

# ruby-on-rails - 使用参数 rails 创建获取 url

> ID：11327875
> 
> 赞同：0
> 
> 时间：2012-07-04T11:07:59.987
> 
> 标签：ruby-on-rails

我有一个搜索表单，在提交时我想发送一个获取请求，其中包含输入到文本字段中的参数

```
=form_for User.new, :url => 'search' do |f|
      = f.text_field :full_name, style: 'width: 84%;'
      = f.submit "Search", class: 'btn btn-primary', style: 'height: 40px;' 
```

我将如何使用参数构造 url？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T11:21:10.120

在明确`=form_for User.new, :url => 'search',:method => :get` 传递。`:method => :get`

# android - 如何使用 myConext 获取 getSystemService

> ID：11327876
> 
> 赞同：2
> 
> 时间：2012-07-04T11:08:04.703
> 
> 标签：android

我在下面给出，但它给出了无法实例化活动的异常

> java.lang.InstantiationException

下面是我的代码>

```
 public class GetDeviceIdActivity extends Activity{

Context myContext;
public GetDeviceIdActivity(Context myContext)
{
    this.myContext = myContext;

}

TelephonyManager telephonyManager = (TelephonyManager)myContext.getSystemService(Context.TELEPHONY_SERVICE);
String imei = telephonyManager.getDeviceId(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T11:18:25.317

你的方法是错误的，你已经在活动中，你不需要上下文来获取电话管理器上下文，使用下面的代码。或在 oncreate 方法中实例化 tm。或使用 this 关键字，或使用 activityname.this 关键字。

```
 public class GetDeviceIdActivity extends Activity{

     Context myContext;
     public GetDeviceIdActivity(Context myContext)
       {
          this.myContext = myContext;

                }

TelephonyManager telephonyManager = (TelephonyManager)getSystemService(Context.TELEPHONY_SERVICE);
String imei = telephonyManager.getDeviceId(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T11:12:41.860

尝试：

```
TelephonyManager telephonyManager = (TelephonyManager)getApplicationContext().getSystemService(Context.TELEPHONY_SERVICE);
String imei = telephonyManager.getDeviceId(); 
```

# c++ - 复制构造函数接受 const 引用的行为

> ID：11327878
> 
> 赞同：1
> 
> 时间：2012-07-04T11:08:07.140
> 
> 标签：c++, copy-constructor

在下面的代码中，在这一行

> A(A&B)

使用此编译器时会出现错误

c110.cpp:41: 错误：没有匹配函数调用'A::A(A)'</p>

c110.cpp:8：注意：候选人是：A::A(A&)

但是一旦我把它转换成

> A(常量 A&b)

很多很多提前谢谢

没有错误来。为什么会这样？

```
Code
class A
{
    public: 
    static int cnt;
    A(A& b)
    {
       cnt++;
       cout<<"cnt="<<cnt<<endl;
    }
    A()
    {
       cnt++;
       cout<<"cnt="<<cnt<<endl;
    }
    ~A()
    {
       cnt--;
       cout<<"cnt="<<cnt<<endl;
    }
};

  int A :: cnt=0;

  A fun(A b)
  {
  return b;
  }

 int main()
 {
     A a;
     A b=fun(a);
     return 0;
 } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-04T11:09:18.787

非`const`引用不能绑定到临时对象。如果你传递一个临时参数，`A&`是非法的，但`const A&`不是。

线

```
A b=fun(a); 
```

对返回的对象进行复制初始化`fun(a)`，这是一个临时的。

此外，复制构造函数*不应*采用非常量引用，因为从逻辑上讲，您不需要修改要从中复制的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T11:31:47.080

我认为使用 A(const A&) 类型的语法进行复制构造而不是 A(A&) 总是安全的，因为 RVO 可能发生或不发生，取决于它的编译器。

正如上面的问题 RVO 没有发生并且临时被创建，因此 A(const A&) 可以安全使用。

# mysql - mysql 查询和注射安全？

> ID：11327879
> 
> 赞同：0
> 
> 时间：2012-07-04T11:08:11.080
> 
> 标签：mysql

大家好，抱歉问了这么原始的问题……但我无法回答！我们必须输入字段：登录密码

和一个由此产生的 mysql

> 从 t_users 中选择 user.Ident、user.fname、user.lname 作为用户 WHERE user.login= :login 和 user.pass=:password 和 user.status=0

我不是黑客，我自己从来没有使用过 mysql 注入……所以我不能说它是安全的……因为将登录设置为 "' OR 1; #" 将不起作用。

**编辑 1**

如果我输入 login = "' OR 1; #" password = '52352352' 我明白了

```
 Error Number: 1064 
```

`You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' and user.pass='a32d2f2e60c1757c53cfbc3086d9ecc1' and user.status=0' at line 8`

**编辑 2** 问题已关闭，感谢您的回答！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T11:13:21.483

从 中删除等于 (==) 的双精度数`user.login= = :login`。Sql 与单个等号 (=) 进行比较。

**编辑：** 试试看..

```
SELECT user.Ident, user.fname, user.lname FROM t_users as user 
WHERE user.login=:login and user.pass=:password and user.status='0'; 
```

# c# - 使用大型数据库/数据集

> ID：11327881
> 
> 赞同：-1
> 
> 时间：2012-07-04T11:08:20.290
> 
> 标签：c#, sql-server-2008

我必须在 C# 中创建一个 Windows 窗体应用程序才能使用非常大的数据库。它必须非常快速地在数据库中找到信息。我的问题是使用大型数据库的最快方法是什么，可以非常快速地找到信息，任何提示、教程或文章都会对我有很大帮助。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T12:08:34.123

> 我的问题是使用大型数据库的最快方法是什么，可以非常快速地找到信息

与小型数据库相同的方式，称为正确编程。

看，无论大小——如果它是一个 SQL 数据库，你获取数据的唯一方法就是 SQL。没有神奇的捷径。大数据库 = 合适的服务器 + 良好的编程实践。时期。你需要找到所有以 JON 开头的人——你发出一个 select 语句，无论这些人表有 1000 还是 10 亿个条目。没有替代。

现在，我可以说“保持 SQL 语句简单”，但这同样适用于小型数据库。

避免返回过多，限制 UI 中的结果（在查询结果中没有人需要 10.000 个条目 - 拉 501，告诉超过 500 个并请添加更多条件），但同样：这通常是一个好习惯，不管有多大数据库是。

使用大数据无法摆脱的是愚蠢的编程错误，比如没有索引和强制表扫描，但是大数据意味着你有更大的机会做数据库的人实际上知道的不仅仅是“选择查找数据”的 SQL。哎呀，如果这真的是一个大型数据库并且您不是在做梦，那么服务器可能可以在一秒钟内使用蛮力查询一个 1 亿行的表 - 我的最后一个大型数据库可以（21000gb，我们添加了大约 1 亿行到每天都有一些桌子）。

限制结果集，保持数据库设计没有像没有索引这样的愚蠢错误，这就是你能做的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T11:54:30.357

最快的方法可能意味着几件事

最快的编写代码，以最短的访问时间来取回数据。

如果您的数据集非常大，那么您可能希望使用存储过程，因为您可以获得相关的数据库查询分析工具来优化它。

但是，如果您的查询很简单 - 即简单的 where 条件或没有连接，那么世界就是您的牡蛎。

它还取决于您的数据库，是 sql、oracle、postgres、mysql 还是 nosql 之类的东西，或者只是一个平面 csv 文件？它们都有点不同，因此可能会使用不同的建议。

50,000 行并不是那么大。大多数数据库都会处理它并大喊“MOAR”

# ios - 如何在 COCOS2D 的任何地方打开/关闭整个应用程序中的音乐和音效？

> ID：11327884
> 
> 赞同：1
> 
> 时间：2012-07-04T11:08:35.563
> 
> 标签：ios, objective-c, cocos2d-iphone, simpleaudioengine

我的游戏应用程序中有 8 个级别。每个级别的屏幕右上角都有声音控制按钮。当我单击该按钮时，它会打开/关闭声音。

如果它在一级关闭，它应该在所有级别都关闭。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T11:31:27.953

如果您使用 CocosDenshion 播放音乐，您只需调用

```
[[SimpleAudioEngine sharedEngine] setBackgroundMusicVolume: value];
[[SimpleAudioEngine sharedEngine] setEffectsVolume: value]; 
```

值在 0..1 范围内浮动

# javascript - 从 javascript 访问 Firefox 附加组件，尤其是 multifox

> ID：11327885
> 
> 赞同：1
> 
> 时间：2012-07-04T11:08:35.720
> 
> 标签：javascript, firefox, firefox-addon

首先，是否可以从 JavaScript 访问 Firefox 附加组件/扩展？如果是这样，如何从 JavaScript 执行 Multifox 命令？

我正在尝试隔离 Firefox 中的会话，以便多个用户可以同时登录到一个网站。我发现 multifox 是一种解决方案，但我不知道如何启动支持 multifox 的页面。让我知道是否有更好的选择。

# c# - 表格布局面板单元格边界和控件冲突

> ID：11327888
> 
> 赞同：0
> 
> 时间：2012-07-04T11:08:50.053
> 
> 标签：c#, .net, winforms, math, collision-detection

我刚刚完成了处理表格布局面板中的 UI 的程序的一部分。到目前为止，这已经奏效，但我注意到，在我可以在运行时围绕表单尝试我的控件（我添加的功能）之前，但现在它在单元格中，它们不能移动到其容器单元格之外。但是，这很好，正是我所需要的，但我发现控件（例如按钮）将正确包含在左侧的单元格和单元格的顶部边界中，但底部和右侧边界允许控制消失。下面是一些截图来演示：

![在此处输入图像描述](../Images/7f3dda02232ac0a13e6eb98380b9d1be.png)

在这里，我们看到按钮控件不能越过单元格的顶部和左侧边界。

![在此处输入图像描述](../Images/3669e006fd15a0ce97d9f736732b005c.png)

然而，在这里它似乎能够越过单元格的底部和右侧边界。

回顾我是如何让我的控件移动的，我遇到了一个我设置了一些变量的部分，如下所示：

```
public static void MouseMove(object sender, MouseEventArgs e)
         {
             Control control = sender as Control;
             Control container = sender as Control;
             if (control != null)
             {
                 if (Dragging)
                 {
                     if (direction != Direction.Vertical)
                     {
                         container.Left = Math.Max(0, e.X + container.Left - DragStart.X);
                     }
                     if (direction != Direction.Horizontal)
                     {
                         container.Top = Math.Max(0, e.Y + container.Top - DragStart.Y);
                     }
                 }
             }
         } 
```

我想在这里我没有设置底部和右侧容器边界，这是有道理的，但是在探索智能感知时，我似乎无法获得 container.right 和 container.bottom，因为它们带有以下工具提示：

```
"gets the distance, in pixels, between the right edge of the control, and the left edge of it's container's client area" 
```

和底部一样，只针对控件的底部和容器区域的顶部。

有没有解决的办法？也许某个地方的选项将控件的底部连接到单元格的底部边界，右边也是如此？

编辑1：或者，也许我需要改变我的mousemove事件以更好地处理碰撞，所以如果有人对此也有任何想法，那就太好了，我之前没有真正看过太多碰撞检测，尤其是在winforms中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T11:21:25.307

Control.right 是只读属性。尝试设置

```
if (direction != Direction.Vertical)
{
    container.Left = Math.Max(0, e.X + container.Left - DragStart.X);
    container.Left = Math.Min(container.Left, container.Parent.Width - container.Width;
}
if (direction != Direction.Horizontal)
{
    container.Top = Math.Max(0, e.Y + container.Top - DragStart.Y);
    container.Top = Math.Min(container.Top, container.Parent.Height - container.Height;
} 
```

# c - 对正整数使用负数的左移和右移操作

> ID：11327893
> 
> 赞同：0
> 
> 时间：2012-07-04T11:09:01.377
> 
> 标签：c

> **可能重复：**
> [左移，负移位计数](https://stackoverflow.com/questions/4945703/left-shifting-with-a-negative-shift-count)

在 16 位编译器上，为什么`32<<-3`或`32>>-1`结果为 0？这种行为的主要原因是什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T11:15:23.563

来自 K&R：

**移位运算符 << 和 >> 执行其左操作数的左移和右移，右操作数给定的位数必须为非负数**

# php - 编辑一个值jQuery的元素

> ID：11327895
> 
> 赞同：1
> 
> 时间：2012-07-04T11:09:10.087
> 
> 标签：php, jquery

我想使用 jQuery 用数据填充元素。

不幸的是，该元素保持空白。到目前为止，我使用了一种解决方法并使用了 textarea 而不是输入（由于某种原因正在工作）。

我不仅尝试

```
$('#input').val("Text") ; 
```

但是也

```
$('#input').text("text") ;
$('#input').attr("value", "Text") ; 
```

我不明白这种行为，在我的项目之外它工作得很好。也许忽略[完整的代码](http://pastebin.com/D59MxffL)会有所帮助。（请原谅代码混乱）

另外我还有一个小问题：我正在使用`async: false`使整个工作正常，如果我将其删除，则不会显示任何内容。但据我所知，这是不推荐使用的，我有什么替代方案？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T11:13:01.667

您的 HTML中没有`element`带有 ID 的`input`，我认为您想更改 的值`input elements`，请更改以下内容：

```
$('#input').val("Text") ; // this is an ID selector 
```

至

```
$('input').val("Text") ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T11:16:12.357

您的代码有一些错误，请检查。

```
<form id="editForm" method="POST" action="updatedata.php">
                **<input type="text" id="editHeading" name="editHeading" /></textarea><br>**
                <textarea id="editAuthor" name="editAuthor" /></textarea><br>
                <textarea id="editTag" name="editTag" type="text" /></textarea><br>
                <textarea id="editarea" name="editarea"></textarea><br>
                <input id="id" name="id">
                <input id="submitEditForm" name="submitEditForm" type="submit" /><br>

            </form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T11:18:13.900

仅供参考一些一般概念

```
$('input').val('foo'); //updates with value foo for all input elements
$('#input').val('foo'); //updates with value foo an input element with id #input

$('span#a').val('foo'); //wont work ,here we have to use .html 
$('span#a').html('foo'); //<span>foo</span> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T11:12:52.797

`#input`搜索带有 id 输入的元素。我在源代码上没有看到任何内容。

当您想更改单个输入字段的文本时，请给它一个唯一的 id。就像`id='sampleText'`然后改变它的价值一样，

`$("#sampleText").val("Your text");`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-04T11:57:43.353

地狱……我找到了。不是没有插入值，只是不可见 O_o

当之前被 jQuery 隐藏时，我的 Chrome 不会在输入中显示单词“test”。

使用 FF，一切正常。

# uitableview - 自定义 UITableView 看起来像 UIPickerView

> ID：11327900
> 
> 赞同：1
> 
> 时间：2012-07-04T11:09:28.193
> 
> 标签：uitableview, uipickerview

嗨，我是 iOS 应用程序开发的新手。我有一个要求，我应该有一个应该显示在 iPad 应用程序中的选取器视图。我试图增加 UIPickerView 的高度，但在 216 像素高度之后没有发生。我想知道是否有一种方法可以自定义 UITableView 以使其看起来像 UIPickerView 并模仿整个 pickerview 功能。但是我让tableview像pickerview一样滚动而感到震惊。

有什么方法可以让 UITableView 滚动到像 UIPickerView 滚动一样的功能。

请帮帮我！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T10:14:04.927

我只是找到了另一种方法，而不是将 UITableView 自定义为 UIPickerView，.. 我使用[了 AFPickerView Framework](https://github.com/arkichek/AFPickerView)。这对我有帮助，.!!!

# c# - 每行repeater绑定5个item

> ID：11327902
> 
> 赞同：3
> 
> 时间：2012-07-04T11:09:38.397
> 
> 标签：c#, asp.net, sql, repeater

我有一组来自数据库的项目。他们的数量可能会有所不同。我已将它们绑定在中继器中。现在我的以下示例将解释我想要什么：
我有 11 个来自数据库的项目，我希望它们按照每行 5 个项目进行分组。

*   第 1 行：5 个项目。
*   第 2 行：5 项。
*   第 3 行：1 项。

目前，我只是将它们绑定在转发器中。我该怎么做呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-04T11:35:15.600

是的。有可能的：

```
<asp:Repeater ID="rptItems" runat="server">
           <ItemTemplate>
               <asp:Literal runat="server" Text='<%# Eval("Value") %>'></asp:Literal>
               <div style="clear: both" runat="server" Visible="<%# (Container.ItemIndex+1) % 5 == 0 %>"></div>
           </ItemTemplate>
       </asp:Repeater> 
```

它为数字序列产生以下结果：

1 2 3 4 5

6 7 8 9 10

11 12 13 14 15

16 17 18 19 20

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-04T11:24:35.237

如果你可以使用 ListView，那么你可以使用 GroupItemCount 。像这样的 [MSDN 示例](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listview.groupitemcount)

```
<asp:ListView ID="ContactsListView" 
        DataSourceID="yourDatasource" 
        GroupItemCount="5"        
        runat="server">
        <LayoutTemplate>
          <table id="tblContacts" runat="server" cellspacing="0" cellpadding="2">
            <tr runat="server" id="groupPlaceholder" />
          </table>

        </LayoutTemplate>
        <ItemTemplate>
          <div> your Items here </div>
        </ItemTemplate>
        <GroupTemplate>
          <tr runat="server" id="ContactsRow" style="background-color: #FFFFFF">
            <td runat="server" id="itemPlaceholder" />
          </tr>
        </GroupTemplate>
        <ItemSeparatorTemplate>
          <td runat="server" style="border-right: 1px solid #00C0C0">&nbsp;</td>
        </ItemSeparatorTemplate>
      </asp:ListView> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-04T11:33:21.503

如果您想坚持使用中继器，我可以想到两种方法。

首先，您可以坚持使用平面项目列表，并让中继器在每 5 个项目之后插入一个“新行”。您应该可以在`<ItemTemplate>`类似的块中执行此操作

```
<% if ((Container.DataItemIndex % 5) == 4) { %>
    </div>
    <div>
<% } %> 
```

老实说，这不是很好。

或者，您可以使用[MoreLINQ](http://code.google.com/p/morelinq/)的[Batch](http://code.google.com/p/morelinq/source/browse/MoreLinq/Batch.cs)方法将您的项目批量处理`IEnumerable`为 5 个，然后使用两个*嵌套*转发器来呈现它们。设置外部中继器以将内部中继器包装在`<div>`标签中，并设置内部中继器的`DataSource='<%# Container.DataItem %>'`. 这应该会导致更清晰的标记。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-04T11:24:23.020

你可以试试下面，我说错了ListView，其实我说的是DataList

```
 <asp:DataList ID="DataList1" runat="server" RepeatColumns="5" 
        RepeatDirection="Horizontal" RepeatLayout="Flow">
        <ItemTemplate >
            <%--Your Item Data goes here--%>
        </ItemTemplate>            
    </asp:DataList> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-04T11:55:09.810

您可以使用*嵌套*数据控件（即`Repeater`）并处理`OnItemDataBound`事件以绑定内部中继器。

示例数据源组件：

```
public class Item
{
    public int ID { get; set; }
    public string Name { get; set; }

    public static List<List<Item>> getItems()
    {
        List<Item> list = new List<Item>()
        {
                new Item(){ ID=11, Name="A"},
                new Item(){ ID=12, Name="B"},
                new Item(){ ID=13, Name="C"},
                new Item(){ ID=14, Name="D"},
                new Item(){ ID=15, Name="E"},
        };

        /* Split the list as per specified size */

        int size = 2;
        var lists = Enumerable.Range(0, (list.Count + size - 1) / size)
                    .Select(index => list.GetRange(index * size,
                        Math.Min(size, list.Count - index * size)))
                    .ToList();

        return lists;
    }
} 
```

标记 (.aspx)

```
<asp:Repeater ID="outerRepeater"
            runat="server" onitemdatabound="outerRepeater_ItemDataBound"
            >
    <ItemTemplate>
    <p>
    Row
    </p>
    <asp:Repeater ID="innerRepeater"
                    runat="server">
        <ItemTemplate>
            <asp:Literal ID="literal1" runat="server" Text='<%# Eval("ID") %>' />
            <asp:Literal ID="literal2" runat="server" Text='<%# Eval("Name") %>' />
        </ItemTemplate>              
    </asp:Repeater>
    </ItemTemplate>              
</asp:Repeater> 
```

代码隐藏

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        outerRepeater.DataSource = Item.getItems();
        outerRepeater.DataBind();
    }
}
protected void outerRepeater_ItemDataBound(object sender, RepeaterItemEventArgs e)
{
    Repeater repeater = e.Item.FindControl("innerRepeater") as Repeater;
    repeater.DataSource = Item.getItems()[e.Item.ItemIndex];
    repeater.DataBind();
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-29T11:30:18.287

```
 <asp:Repeater ID="Repeater1" runat="server"
  OnItemDataBound="Repeater1_databinding">

                <HeaderTemplate>
                    <table id="masterDataTable" class="reportTable list issues" width="100%">
                        <thead>
                            <tr>
                                <asp:Literal ID="literalHeader" runat="server"></asp:Literal>
                            </tr>
                        </thead>
                        <tbody>
                </HeaderTemplate>
                <ItemTemplate>
                    <tr>
                        <asp:Literal ID="literals" runat="server"></asp:Literal>
                    </tr>
                </ItemTemplate>
                <FooterTemplate>
                    </tbody> </table>
                </FooterTemplate>
            </asp:Repeater>
    <input id="hdnColumnName" runat="server" clientidmode="Static" type="hidden" />
    <input id="hdnColumnOrder" runat="server" clientidmode="Static" type="hidden" />

// javascript Function

 <script type="text/javascript">
    $(document).ready(function () {
        $('#ddlReport').removeClass('required');
        $('.sort').click(function () {
            $('#hdnColumnName').val($(this).text());
            $('#hdnColumnOrder').val($(this).attr('class'));
            $(this).toggleClass("desc asc");
            $("#lnkSort").click();
        });
    });
</script>

 // Bind repeater

       DataTable dt = objReport.GetCustomRecord();
        fn = new List<string>();
        for (int i = 0; i < dt.Columns.Count; i++)
        {
            if (dt.Columns[i].ColumnName != "Maxcount" )
            {
                fn.Add(dt.Columns[i].ColumnName);
            }
        }

        Repeater1.DataSource = dt;
        Repeater1.DataBind();

protected void Repeater1_databinding(object sender, RepeaterItemEventArgs e)
{
    if (e.Item.ItemType == ListItemType.Header)
    {
        if (e.Item.FindControl("literalHeader") != null)
        {
            StringBuilder sb = new StringBuilder();
            Literal li = e.Item.FindControl("literalHeader") as Literal;

            fieldName().ForEach(delegate(string fn)
            {
                if (hdnColumnName.Value != fn.ToString())
                {
                    sb.Append("<th width=\"10%\"> <a id=\"btnCustomerName\" class=\"sort desc\" onclick=\"btnSorts_onclick()\" style=\"cursor:pointer;text-decoration: none !important;\" >"
                        + fn.ToString() + "</a></th>");
                }
                else
                {
                    if (hdnColumnOrder.Value == "sort asc")
                        sb.Append("<th width=\"10%\"> <a id=\"btnCustomerName\" class=\"sort desc\"  onclick=\"btnSorts_onclick()\" style=\"cursor:pointer;text-decoration: none !important;\" >"
                       + fn.ToString() + "</a></th>");
                    else
                        sb.Append("<th width=\"10%\"> <a id=\"btnCustomerName\" class=\"sort asc\" onclick=\"btnSorts_onclick()\" style=\"cursor:pointer;text-decoration: none !important;\">"
                                                   + fn.ToString() + "</a></th>");
                }
            });
            li.Text = sb.ToString();

        }

    }
    if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem)
    {
        if (e.Item.FindControl("literals") != null)
        {
            DataRowView drv = (DataRowView)e.Item.DataItem;
            Literal li = e.Item.FindControl("literals") as Literal;
            StringBuilder sb = new StringBuilder();
            fieldName().ForEach(delegate(string fn)
            {
                sb.Append("<td>" + drv[fn.ToString()] + "</td>");
            });
            li.Text = sb.ToString();
        }
    }
} 
```

# powershell - 如何包装 PowerShell 并调用以检查返回码？

> ID：11327903
> 
> 赞同：0
> 
> 时间：2012-07-04T11:09:39.370
> 
> 标签：powershell, command-line

我有一个命令行可执行文件，我需要在 PowerShell 中使用不同的选项重复调用它。

每次我都希望检查退出代码是否为 0。

有没有办法将调用和参数包装为一个函数？

```
& bob.bat -b
... error handling
& bob.bat -a -m "a path"
... error handling 
```

类似于：

```
function callBob ($paramList)
{
    & bob.bat $paramList
    ... error handling
}

callBob -b
callBob -a -m "a path"
etc... 
```

不幸的是，上面的代码似乎不能处理多个参数 - 我无法让第二个这样的东西工作，因为 callBob 只需要一个参数，所以我最终不得不传入一个似乎被引用的字符串传递给 & bob.bat。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T11:19:14.477

您可以使用 $args 访问参数：

```
function callBob
{
    Write-Host "Length: $($args.Length)"
    Write-Host "arg0: $($args[0])"
    Write-Host "arg1: $($args[1])"
    Write-Host "arg2: $($args[2])"
}

callBob -b
callBob -a -m "a path" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T11:19:40.747

你可以这样做：

```
function callBob{

bob.bat $args

}

callBob -b 
```

另外，如果你愿意的话，试试这个包装器（来自 PSAKE）：

```
function Exec
{
    [CmdletBinding()]
    param(
        [Parameter(Position=0,Mandatory=1)][scriptblock]$cmd,
        [Parameter(Position=1,Mandatory=0)][string]$errorMessage = ($msgs.error_bad_command -f $cmd)
    )
    & $cmd
    if ($lastexitcode -ne 0) {
        throw ("Exec: " + $errorMessage)
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T11:54:42.330

有几种方法可以做到这一点。

1）创建一个批处理文件并从中调用powershell脚本。

2）创建一个exe，然后从中调用powershell。您可以在 WPF 应用程序中获取退出代码，然后进行验证。

这取决于您的应用程序的复杂性和需求。我使用 WPF 应用程序来包装 powershell，因为我们不希望其他人通过转到 powershell 并执行来运行脚本。我们还在 WPF 应用程序中提供了安全登录。

如果您决定使用 WPF Applicaiton，请告诉我您是否需要帮助。

# java - 从 ICEfaces 中的 build.properties 获取值时出现问题

> ID：11327905
> 
> 赞同：0
> 
> 时间：2012-07-04T11:09:45.173
> 
> 标签：java, jsp, nullpointerexception, icefaces, filenotfoundexception

我想获取我从 build.properties 添加的属性的值

```
dergilik.host=http://172.171.1.155/ 
```

使用下面的代码

```
private final static String PROPERTIES_FILE = "build.properties";
private final static String HOST = "dergilik.host";
private final Properties props = new Properties();

private String getHost() {
    try {
        InputStream inp = new FileInputStream(PROPERTIES_FILE);
        props.load(inp);
        return props.getProperty(HOST);
    } catch (Exception e) {
        // TODO Auto-generated catch block
        System.out.println(e.getMessage());
        e.printStackTrace();
        return null;
    }        
} 
```

但是应用程序在`props.load(inp);`. 我也用 ClassLoader 类尝试过，发生了 NullPointerException。此外，我将 PROPERTIES_FILE 更改为“/ProjectName/build.properties”，但它不起作用。

那么如何让程序正确找到 build.properties 文件呢？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T11:52:12.370

如果您想在 Web 应用程序中访问

*   并且资源在 Web 应用程序内部并且您可以访问`ServletContext`，您应该使用`ServletContext.getResourceAsStream()`.
*   并且资源在 Web 应用程序之外，使用`context-param`web.xml 配置路径并尝试使用访问`ServletContext.getInitParameter()`

如果它不是 Web 应用程序并且存在于类路径中使用，

*   `Thread.currentThread().getContextClassloader().getResourceAsStream()`

# php - Zend Framework 移动版

> ID：11327910
> 
> 赞同：1
> 
> 时间：2012-07-04T11:09:56.643
> 
> 标签：php, zend-framework, mobile, wurfl

嗨，我尝试使用 Wurfl 插件将我的 zend 应用程序转换为移动版本，导致错误。出现的错误是：

致命错误：未捕获的异常“Zend_Application_Bootstrap_Exception”，消息“无法解析插件“useragent”；/opt/zend/library/Zend/Application/Bootstrap/BootstrapAbstract.php:330 中没有具有该名称的相应插件 堆栈跟踪：#0 /opt/zend/library/Zend/Application/Bootstrap/BootstrapAbstract.php(380) : Zend_Application_Bootstrap_BootstrapAbstract->getPluginResource('useragent') #1 /opt/zend/library/Zend/Application/Bootstrap/BootstrapAbstract.php(392): Zend_Application_Bootstrap_BootstrapAbstract->getPluginResources() #2 /opt/zend/library/Zend/Application /Bootstrap/BootstrapAbstract.php(622): Zend_Application_Bootstrap_BootstrapAbstract->getPluginResourceNames() #3 /opt/zend/library/Zend/Application/Bootstrap/BootstrapAbstract.php(583):

我的 wurfl 的 application.ini 配置是：

resources.useragent.wurflapi.wurfl_api_version = "1.1" resources.useragent.wurflapi.wurfl_lib_dir = APPLICATION_PATH "/../library/wurfl-php-1.1/WURFL/" resources.useragent.wurflapi.wurfl_config_file = APPLICATION_PATH "/configs/wurfl -config.php"

如此困惑需要帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T11:36:36.840

所以你得到这个错误 - '无法解析插件“useragent”你为什么不试试这个问题中提到的解决方案..它也处理这个“useragent”插件错误 - [在zend中设置wurfl时出现异常](https://stackoverflow.com/questions/8983330/exception-while-setting-up-the-wurfl-in-zend)

也看看这篇文章 -[使用 Zend 实现 WURFL 时出错](https://stackoverflow.com/questions/5301637/errors-when-implementing-wurfl-with-zend)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T13:05:54.357

我已经在此[链接中给出了使用 zend 实现移动布局的步骤](https://dineshkumarm.wordpress.com/2012/06/27/find-device-type-using-zend-framework/)

好心检查

# ios - 如何将文本粘贴到 iOS 中的 UITextView？

> ID：11327913
> 
> 赞同：0
> 
> 时间：2012-07-04T11:10:12.407
> 
> 标签：ios

我有一个 UITextView，我想使用按钮的单击事件将文本粘贴到该 UITextView 中。

你知道，当我单击一个按钮时，从任何地方复制的文本都会粘贴到该 UITextView 中。

我怎样才能做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T11:12:47.317

```
-(IBAction)buttonPressed:(id)sender
{
UIPasteboard *pasteboard = [UIPasteboard generalPasteboard];
MsgtextView.text = [NSString stringWithFormat:@"%@ %@",MsgtextView.text,pasteboard.string;
} 
```

检查这个

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T11:14:02.003

您可以使用[UIPasteboard](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIPasteboard_Class/Reference.html)类。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-04T11:17:44.633

试试这个代码

```
 UIPasteboard *pasteboard = [UIPasteboard generalPasteboard];
    textView.text = pasteboard.string; 
```

# javascript - Javascript 在悬停状态下制作下拉菜单 - HTML 中没有硬编码

> ID：11327914
> 
> 赞同：-1
> 
> 时间：2012-07-04T11:10:39.770
> 
> 标签：javascript, css, drop-down-menu, menu, hover

提前致谢。实际上，我已经尝试了几个 javascript 脚本来让它工作，但没有一个，但我对 javascript 的理解非常初级。

我无法调整链接本身的代码 - 它正在生成。但它是用一个 id 和一个类生成的。我想在文档中有一个引用链接 id 的脚本，这样当用户滚动链接时，就会出现一个隐藏的 ul（或 div）——就像一个普通的 CSS 导航下拉菜单，但是，我不能再改变代码实际的链接。我只能改变一般的CSS。

有没有可以做到这一点的javascript？我可以查询..

再次感谢你！

bb

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T13:22:45.053

Here i have done drop down menu using HTML and CSS only, which show/hide on menu link hover state.

HTML:

```
<div id="menu1" class="menu">
  <a href="#" id="link1">
    Menu-1
  </a>
  <div id="menulist1" class="menulist">
    <div>
      Option1
    </div>
    <div>
      Option2
    </div>
    <div>
      Option3
    </div>
    <div>
      Option4
    </div>
    <div>
      Option5
    </div>
  </div>
</div>
<div id="menu2" class="menu">
  <a href="#" id="link2">
    Menu-2
  </a>
  <ul id="menulist2" class="menulist">
    <li>
      Option1
    </li>
    <li>
      Option2
    </li>
    <li>
      Option3
    </li>
    <li>
      Option4
    </li>
    <li>
      Option5
    </li>
  </ul>
</div> 
```

CSS:

```
.menu{
  font-size:15px;
  display:inline-block;
  margin:0px;
  padding:0px;
}
.menu a{
  display:block;
  width:120px;
  text-align:center;
  background-color:#2211ce;
  color:#dccb00;
  text-decoration:none;
}
#menulist1{
  position:absolute;
  top:33px;
  border:1px solid #113399;
  background-color:#88a5ff;
  display:none;
}
#menulist2{
  position:absolute;
  top:20px;
  border:1px solid #113399;
  background-color:#88a5ff;
  display:none;
}
#menu1:hover #menulist1{
  display:block;
}

#menu2:hover #menulist2{
  margin-top:13px;
  display:block;
}

.menulist div{
  margin-left:0px;
  padding:3px;
  width:112px;
}
.menulist li{
  list-style:none;
  width:72px;
  padding:3px;
  margin-left:0px;
  display:block;
}

.menulist div:hover,.menulist li:hover{
  background-color:#1155ac;
  color:#dccb00;
} 
```

I have also done bins for above example, please click on [http://codebins.com/codes/home/4ldqpbo](http://codebins.com/codes/home/4ldqpbo)

# android - 相对布局内的表格布局

> ID：11327915
> 
> 赞同：2
> 
> 时间：2012-07-04T11:10:41.717
> 
> 标签：android

是否可以在相对布局中使用表格布局。例如：

在 main.xml 中：

```
< RelativeLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical">

<TableLayout
    xmlns:android="http://schemas.android.com/apk/res/android" 
    android:id="@+id/tableLayout1"  
    android:layout_width="match_parent" 
    android:layout_height="match_parent">

<TableRow 
        android:id="@+id/tableRow4"  
        android:layout_height="wrap_content"  
        android:layout_width="fill_parent"  
        android:gravity="center_horizontal" > 

<TextView  
            android:id="@+id/textView9"  
            android:layout_width="fill_parent"  
            android:layout_height="wrap_content"  
            android:textSize="18dp"  
            android:text="Weather Table"  
            android:gravity="center"> < /TextView>

</ TableRow>
</ TableLayout>
</ RelativeLayout> 
```

我如何在单个 xml 文件中使用两种类型的布局。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T11:27:21.633

1-删除您分配给 TableLayout("http://schemas.android.com/apk/res/android") 的命名空间。它看起来像：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TableLayout
        android:id="@+id/tableLayout1"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <TableRow
            android:id="@+id/tableRow4"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:gravity="center_horizontal" >

            <TextView
                android:id="@+id/textView9"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:gravity="center"
                android:text="Weather Table"
                android:textSize="18dp" >
            </TextView>
        </TableRow>
    </TableLayout>
</RelativeLayout> 
```

2-您的标签有不正确的空格，例如。使用`</ TableRow>`而`</TableRow>`不是它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-15T11:36:49.090

我最近做了这个，这里是代码：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<TableLayout android:layout_width="fill_parent" android:id="@+id/tl"
    android:layout_height="match_parent">
    <TableRow>

    <Button
        android:id="@+id/Bkanban"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="@string/left_arrow" />

    <EditText
        android:id="@+id/ETnew_task"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="500"
        android:inputType="text"
        android:hint="@string/to_do"
        />

    <Button
        android:id="@+id/Bplus"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:layout_gravity="right"
        android:text="+"></Button>
    </TableRow>
    </TableLayout> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T11:21:08.600

```
I am never using this but this is helps you. 
```

使drawable/table_shape.xml

```
<?xml version="1.0" encoding="utf-8"?>
<shape
  xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape= "rectangle"  >
        <solid android:color="#000"/>
        <stroke android:width="1dp"  android:color="#ff9"/>
</shape> 
```

布局/my_table.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="vertical"
  android:layout_width="match_parent"
  android:layout_height="match_parent">
            <TableRow android:id="@+id/tabla_cabecera" android:layout_width="match_parent" android:layout_height="match_parent"></TableRow>
            <TableLayout android:id="@+id/tabla_cuerpo" android:layout_height="match_parent" android:layout_width="match_parent">
                <TableRow android:id="@+id/tableRow1" android:layout_width="match_parent" android:layout_height="wrap_content">

                    <TextView android:background="@drawable/cell_shape" android:padding="5dp" android:id="@+id/textView1" android:layout_width="wrap_content" android:layout_height="wrap_content" android:textAppearance="?android:attr/textAppearanceMedium" android:text="TextView"></TextView>
                    <TextView android:background="@drawable/cell_shape" android:padding="5dp" android:id="@+id/textView1" android:layout_width="wrap_content" android:layout_height="wrap_content" android:textAppearance="?android:attr/textAppearanceMedium" android:text="TextView"></TextView>
                    <TextView android:background="@drawable/cell_shape" android:padding="5dp" android:id="@+id/textView1" android:layout_width="wrap_content" android:layout_height="wrap_content" android:textAppearance="?android:attr/textAppearanceMedium" android:text="TextView"></TextView>

                </TableRow>
                <TableRow android:id="@+id/tableRow2" android:layout_width="match_parent" android:layout_height="wrap_content">                    

                    <TextView android:background="@drawable/cell_shape" android:padding="5dp" android:id="@+id/textView1" android:layout_width="wrap_content" android:layout_height="wrap_content" android:textAppearance="?android:attr/textAppearanceMedium" android:text="TextView"></TextView>
                    <TextView android:background="@drawable/cell_shape" android:padding="5dp" android:id="@+id/textView1" android:layout_width="wrap_content" android:layout_height="wrap_content" android:textAppearance="?android:attr/textAppearanceMedium" android:text="TextView"></TextView>
                    <TextView android:background="@drawable/cell_shape" android:padding="5dp" android:id="@+id/textView1" android:layout_width="wrap_content" android:layout_height="wrap_content" android:textAppearance="?android:attr/textAppearanceMedium" android:text="TextView"></TextView></TableRow>

                <TableRow android:id="@+id/tableRow3" android:layout_width="match_parent" android:layout_height="wrap_content">                    

                    <TextView  android:background="@drawable/cell_shape" android:padding="5dp" android:id="@+id/textView1" android:layout_width="wrap_content" android:layout_height="wrap_content" android:textAppearance="?android:attr/textAppearanceMedium" android:text="TextView"></TextView>
                    <TextView android:background="@drawable/cell_shape" android:padding="5dp" android:id="@+id/textView1" android:layout_width="wrap_content" android:layout_height="wrap_content" android:textAppearance="?android:attr/textAppearanceMedium" android:text="TextView"></TextView>
                    <TextView android:background="@drawable/cell_shape" android:padding="5dp" android:id="@+id/textView1" android:layout_width="wrap_content" android:layout_height="wrap_content" android:textAppearance="?android:attr/textAppearanceMedium" android:text="TextView"></TextView>

                </TableRow>
                <TableRow android:id="@+id/tableRow4" android:layout_width="match_parent" android:layout_height="wrap_content">                    

                    <TextView android:background="@drawable/cell_shape" android:padding="5dp" android:id="@+id/textView1" android:layout_width="wrap_content" android:layout_height="wrap_content" android:textAppearance="?android:attr/textAppearanceMedium" android:text="TextView"></TextView>
                    <TextView android:background="@drawable/cell_shape" android:padding="5dp" android:id="@+id/textView1" android:layout_width="wrap_content" android:layout_height="wrap_content" android:textAppearance="?android:attr/textAppearanceMedium" android:text="TextView"></TextView>
                    <TextView  android:background="@drawable/cell_shape" android:padding="5dp" android:id="@+id/textView1" android:layout_width="wrap_content" android:layout_height="wrap_content" android:textAppearance="?android:attr/textAppearanceMedium" android:text="TextView"></TextView>

                </TableRow>
            </TableLayout>

</RelativeLayout> 
```

# date - 用于检查日期和扩展名的 Vbs 脚本

> ID：11327918
> 
> 赞同：0
> 
> 时间：2012-07-04T11:11:00.117
> 
> 标签：date, vbscript, file-extension

嗨，我无法获得下面的脚本来获取文件的扩展名，任何人都可以通过指出我出错的地方来帮助我吗？

```
dim fileSystem, folder, file 
dim path
dim count : count = 0
path = "C:\temp" 

Set fileSystem = CreateObject("Scripting.FileSystemObject") 
Set folder = fileSystem.GetFolder(path)

for each file in folder.Files     
    if file.DateLastModified > dateadd("h", -24, Now) & File.name = "txt" then 

count = count + 1

end if
Next

if count < 4 then

Set WshShell = WScript.CreateObject("WScript.Shell")
strcommand = "eventcreate /T ERROR /ID 666 /L Application /SO BESROffsite /D " & _  
Chr(34) & count & " Files found please check offsite copy " & Chr(34)  
WshShell.Run strcommand
wScript.Quit ( 1001 )

Else

Set WshShell = WScript.CreateObject("WScript.Shell")
strcommand = "eventcreate /T Information /ID 666 /L Application /SO BESROffsite /D " & _  
Chr(34) & count & " Files found offsite is working fine " & Chr(34)  
WshShell.Run strcommand
wScript.Quit ( 0 )
End if 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T11:20:59.250

`File.name`是包含扩展名的全名，用于测试扩展名；

```
if ... fileSystem.getExtensionName(file.name) = "txt" then 
```

您还需要逻辑`And`而不是~~按位~~连接`&`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T15:27:26.020

亚历克斯的答案是您想要的答案，但如果您仅使用 vbs 和字符串文件名，则仅供参考，没有文件系统对象集合，您可以通过以下方式实现相同的目的：

```
Right(strFilename, Len(strFilename) - Instrrev(strFilename, ".")) 
```

这基本上找到了最后“。”的位置。在文件名中，将其从文件名的长度中删除，然后为您提供与右侧相等的多个字符。这可以稍微修改为使用“Mid”命令而不是“Right”，但我认为在这种情况下它并不重要。

# json - 二维码限制

> ID：11327921
> 
> 赞同：13
> 
> 时间：2012-07-04T11:11:22.203
> 
> 标签：json, xml-serialization, barcode, qr-code

我必须使用自定义字段生成代码：`id`of `field+name`of `field+values`the field。

1.  我可以在二维码中编码的数据多长时间？我需要知道我可以插入多少个字段\值。

2.  我应该使用 XML、JSON 还是 CSV？什么是最通用和最有效的？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-04T14:25:18.003

XML / JSON 不符合 QR 码的字母数字模式，因为它将包含小写字母。您必须使用字节模式。最大值为 2,953 个字符。但是，实际的限制要少得多——可能只有几百个字符。

如果可以的话，最好对数据的超链接进行编码。

正如 Terence 所说，除了展示之外，没有读者会对 XML/JSON 做任何事情。无论如何，您都需要一个自定义阅读器来对这些数据做一些有用的事情。（这表明这不是 QR 码的好用例。）但是，如果您正在制作自己的阅读器，则可以使用 gzip 压缩来使有效负载更小。您的读者会知道解压缩它。

您可能会摆脱一些可行的方法，但这通常不是一个好方法。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-04T13:12:36.363

您可以拥有的最大字母数字字符数为[4,296](http://en.wikipedia.org/wiki/QR_code#Storage)。尽管这将需要最低形式的纠错并且很难扫描。

JSON 在数据存储方面通常比 XML 更有效。

但是，您将需要编写自己的应用程序来扫描代码——我不知道有什么可以处理原始 JSON 或 XML。不过，所有扫描仪都会向您显示文本。

# artificial-intelligence - 在棋盘游戏中使用具有 TD 学习的经典反向传播神经网络

> ID：11327923
> 
> 赞同：3
> 
> 时间：2012-07-04T11:11:32.127
> 
> 标签：artificial-intelligence, neural-network, reinforcement-learning

我想问一下在棋盘游戏中使用带有 TD-learning 方法的标准反向传播神经网络是否有意义？

我的方法看起来像：

1.  玩 1 场比赛。网络有时扮演贪婪策略和随机动作的玩家。
2.  对于每个存储的游戏位置（从终端 1 开始并移动到起始位置）计算估计的位置值和期望的位置值，例如

    ```
    boards_values[i]['desired_value'] = boards_values[i]['estimated_value'] + 0.4 * ( boards_values[i+1]['estimated_value'] - boards_values[i]['estimated_value'] ) 
    ```

3.  使用标准反向传播算法从整个游戏结束训练中为网络创建训练模式，每个训练模式在 1 个 epoch 内具有较小的学习率。

    ```
    NN.train([pattern], iterations=1, N=0.001, M=0.000001) 
    ```

我在井字游戏中尝试了上述的一些组合（不是从一个示例中学习，而是从 30-40 种模式中学习，降低/提高学习速度等），但从未训练过理想的玩家（它永远不会输给随机玩家）。NN 代理与随机玩家对战的最佳示例之一是：

（第一局：赢，平，输），（第二局：赢，平，输），（总和：赢，平，输）
（191,34,275），（159,102,239），（ 350, 136, 514) - 新鲜网
(427, 21, 52), (312, 16, 172), (739, 37, 224) - +50k 游戏后

输入格式为 18 个神经元：
对于每个板单元集，x 表示 (1,0)，空单元表示 (0,0)，o 表示 (0,1)。输出是 -1, 1 范围内的一个单位赢/输概率估计。

Tic tac toe 只是测试沙盒，当我成功完成它时，我将转向更复杂的纸牌游戏（'Lost Cities'）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T12:20:14.213

是的，这是相对标准的。这是 Tesauro 在他的[TDGammon 2.1](http://www.research.ibm.com/massive/tdl.html)程序中采用的方法，该方法训练了一个人工神经网络，使其在玩西洋双陆棋时比最好的人类玩家更好（在 150 万场比赛中自举后）。

但是，有很多警告：

*   众所周知，人工神经网络很难正确使用。您是否通过在一些简单的监督学习问题上进行测试来确保您的实现按预期执行？

*   TDGammon 使用神经网络为每个游戏状态提供启发式实用程序，并将其与 2 层 alpha/beta 修剪算法相结合。使用现代计算机，可以使用更深入的前瞻（例如，我最近编写了一个[alpha/beta 搜索算法](https://github.com/chris-taylor/aima-haskell)，可以轻松管理分支因子为 7 的游戏的 10 层搜索，在解释（非编译) 代码并在考虑启发式之前)。

*   TD Learning 并不是唯一的强化学习算法。我过去曾成功应用 SARSA 和 Q-Learning，它们通过优先探索看起来有希望的策略并忽略看起来不好的策略来加速搜索。您需要将它们与[探索策略](http://en.wikipedia.org/wiki/Reinforcement_learning#Exploration)结合起来，以确保它们有时会探索看起来很糟糕的策略，以避免陷入局部最小值。一个简单的策略，例如ε = 0.1 的[epsilon-greedy](http://en.wikipedia.org/wiki/Multi-armed_bandit#Semi-uniform_strategies)通常效果很好。

*   [资格跟踪](http://webdocs.cs.ualberta.ca/~sutton/book/7/node1.html)是加速强化学习算法学习的有效方式。使用资格迹的算法包括 TD(λ)、SARSA(λ) 和 Q(λ)。不过，您需要小心 - 现在有另一个参数需要拟合，这意味着在训练模型时要小心谨慎。使用测试集！

# php - 如何让第一页每次都等于 1

> ID：11327924
> 
> 赞同：0
> 
> 时间：2012-07-04T11:11:37.493
> 
> 标签：php

下面我有一行代码，它说明了用户当前在总页数中的哪个页。

```
<h1>CREATING QUESTIONS AND ANSWERS: SESSION (AAA) <?php echo $sessionMinus ?> OF <?php echo $_SESSION['initial_count'] ?></h1> 
```

因此，例如，该行可以读取：

```
CREATING QUESTIONS AND ANSWERS: SESSION (AAA) 3 OF 3 
```

现在我遇到的问题是，如果用户在第一页上，它不会显示数字 1。所以不是说 1 OF 3 或 1 OF 5，而是说 2 OF 3 或 2 OF 5。

所以我的问题是，当用户访问第一个会话（第一页）时，如何让第一页等于 1 OF ...？

以下是当前代码：

```
if(isset($_POST['sessionNum'])){
            //Declare my counter for the first time

            $_SESSION['initial_count'] = $_POST['sessionNum'];
            $_SESSION['sessionNum'] = $_POST['sessionNum'];
            $_SESSION['sessionCount'] = 0;

    }

else if ($_SESSION['sessionCount'] < $_SESSION['sessionNum']) {
    $_SESSION['sessionCount']++;
}

$sessionMinus =  $_SESSION['sessionCount']; 
```

`$_SESSION['sessionNum']`是会话的总数。因此，如果它是 3 OF 5，那么`$_SESSION['sessionNum']`就是 5。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T11:41:12.157

如果你想构建类似“Wizards”的东西，那么在会话中你会存储一些数据来跟踪用户活动和一般过程，你说“如果用户在第一个会话中......”这很令人困惑，最好说“如果用户处于第一步”

假设您要存储在会话中，“用户处于 3 个总步骤中的第 1 步”，您需要

```
$_SESSION["user_track"] = array(
 ("current") => 1,
 ("next")=>2,
 ("total") => 3,
 ("previous") => 0
); 
```

和一个检查每一步的 IF

```
if($_SESSION["user_track"]["next"] != $GLOBAL_STEP){
 /*
  $GLOBAL_STEP , a integer you defined in the current step say its 2
  and users next step matches 2 then he/she is on the correct step
 */
}else if($_SESSION["user_track"]["next"] == $_SESSION["user_track"]["total"]){
 /*At the ending step*/
}else{
 // couldn't proceed to next step, something went wrong
} 
```

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T11:49:55.417

我会建议 ：

*   使用单词“page”或“steps”而不是“session”，因为“session”与`$_SESSION`数组混淆。
*   为当前页面/步骤使用一个简单的`GET`参数（例如`yourpage.php?step=X`），默认情况下，步骤值为 1。

# mysql - 多表多列查询

> ID：11327936
> 
> 赞同：1
> 
> 时间：2012-07-04T11:12:31.510
> 
> 标签：mysql

我有以下表格：

**交易**： `Transaction_ID` `Datetime` `Giver_ID` `Recipient_ID` `Points` `Category_ID` `Reason`

**奖励**： `Reward_ID` `Title` `Description` `Image_URL` `Date_Inactive` `Stock_Count` `Cost_to_User` `Cost_to_System`

**采购**：`Purchase_ID` `Datetime` `Reward_ID` `Quantity` `Student_ID` `Student_Name` `Date_DealtWith` `Date_Collected`

* * *

工作人员奖励学生*积分*，这些积分将成为*交易*表的条目，如下所示：

**`Transaction_ID` `Datetime` `Giver_ID` `Recipient_ID` `Points` `Category_ID` `Reason`**
`8` `2011-09-07` `36761` `127963` `2` `1` `Excellent behaviour in behaviour unit`

然后，学生可以购买成为*购买表条目的**奖励*，如下所示：

 ***`Purchase_ID` `Datetime` `Reward_ID` `Quantity` `Student_ID` `Student_Name` `Date_DealtWith` `Date_Collected`**
`1570` `2012-05-30 12:46:36` `2` `1` `137616` `Bradley Richardson` `NULL` `NULL`

所有*奖励*都手动存储在*奖励*数据库表中：

**`Reward_ID` `Title` `Description` `Image_URL` `Date_Inactive` `Stock_Count` `Cost_to_User` `Cost_to_System`**
`1` `Lunch Time Queue Pass (month)` `Beat the queue and get to the hot food early!` `/user/74/167976.png` `2012-04-16 11:50:00` `0` `100` `0`

* * *

**我的问题是这样的：**

我可以使用什么 SQL 语句来返回**Student Name、Points Earned、Points Spent、Points Remaining**？

不久前我问[了一个类似的问题](https://stackoverflow.com/questions/10836001/doing-some-fairly-basic-sums-with-different-tables)，它提供了以下陈述。但是，经过检查，它似乎并不完全准确 - 特别是所用**积分**无法正常工作。

```
SELECT  Recipient_ID AS StudentID,
        SumOfPointsOfPurchasesMade.Points AS PurchasesMade,
        SumOfPointsEarned.Points AS PointsEarned,
        SumOfPointsEarned.Points - COALESCE(SumOfPointsOfPurchasesMade.Points, 0) AS CurrentPoints
FROM   
(
    SELECT SUM(Points) AS Points, Recipient_ID 
    FROM   transactions
    GROUP  BY Recipient_ID
) AS SumOfPointsEarned 
    LEFT JOIN 
    (
        SELECT purchases.Student_ID,  SUM(rewards.Cost_to_User) AS Points 
        FROM   purchases 
            INNER JOIN rewards 
            ON purchases.Reward_ID = rewards.Reward_ID
        GROUP  BY purchases.Student_ID
    ) AS SumOfPointsOfPurchasesMade 
    ON SumOfPointsEarned.Recipient_ID = SumOfPointsOfPurchasesMade.Student_ID
WHERE SumOfPointsEarned.Points < SumOfPointsOfPurchasesMade.Points
ORDER BY `CurrentPoints`  DESC 
```

提前致谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T11:23:29.643

您只需要使用[外连接](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)来组合表格，然后按学生分组：

```
SELECT purchases.Student_Name                               AS `Student Name`,
       SUM(transactions.Points)                             AS `Points Earned`,
       SUM(rewards.Cost_to_User)                            AS `Points Spent`,
       SUM(transactions.Points) - SUM(rewards.Cost_to_User) AS `Points Remaining`
FROM   transactions
  LEFT JOIN purchases ON purchases.Student_ID = transactions.Recipient_ID
  LEFT JOIN rewards   USING (Reward_ID)
GROUP BY purchases.Student_ID
ORDER BY `Points Remaining` DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T11:57:02.767

我愚蠢地意识到另一篇文章中的一个小错误解决了我遇到的问题：

```
SELECT SumOfPointsEarned.Points - COALESCE(SumOfPointsOfPurchasesMade.Points, 0) AS CurrentPoints
FROM   
(
    SELECT SUM(Points) AS Points, Recipient_ID 
    FROM   transactions 
            WHERE Recipient_ID= 137642
    GROUP  BY Recipient_ID
) AS SumOfPointsEarned 
    LEFT JOIN 
    (
        SELECT purchases.Student_ID,  SUM(rewards.Cost_to_User * purchases.Quantity) AS Points 
        FROM   purchases 
            INNER JOIN rewards 
            ON purchases.Reward_ID = rewards.Reward_ID 
                    WHERE Student_ID = 137642
        GROUP  BY purchases.Student_ID
    ) AS SumOfPointsOfPurchasesMade 
    ON SumOfPointsEarned.Recipient_ID = SumOfPointsOfPurchasesMade.Student_ID
ORDER BY CurrentPoints ASC 
```

这一行是问题所在：

`SUM(rewards.Cost_to_User * purchases.Quantity) AS Points`

没有数量的乘法。嗬！*

# java - 我可以在同一个包下的另一个类中调用一个类的静态方法吗？

> ID：11327938
> 
> 赞同：0
> 
> 时间：2012-07-04T11:12:34.637
> 
> 标签：java, methods, static

可以在同一个包中通过类名调用方法而无需创建类的对象或在java中无需继承

```
public class BoxWeight /*extends Box*/{
    public static void main(String[] args) {
        /*BoxWeight myCat = new BoxWeight();*/
        /*Box myAnimal = myCat;*/
        Box.testClassMethod();<------------ why this possible 
        /* myAnimal.testInstanceMethod();*/
    }   
}

public class Box /*extends Bicycle*/{

    public static void testClassMethod() {
        System.out.println("The class" + " method in Box.");
    }
    public void testInstanceMethod() {
        System.out.println("The instance " + " method in Box.");
    }
} 
```

我的问题不是这个，因为你似乎我的问题是这个“可以在同一个包中通过类名调用一个方法，而无需创建类的对象或在 java 中没有继承”，但我已经解决了这个问题，我想确认这是否可能

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T11:15:55.897

`ClassName.methodName()`如果声明了方法，则可以使用语法调用方法`static`，例如

```
class ClassName {
  static void methodName() {
    //...//
  }
} 
```

有关静态类成员的更多信息可以在[Java 教程](http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html)中找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T11:17:39.333

使您的方法静态，然后您可以通过类名调用该方法。

```
class A {
static void display(){

    System.out.println("Called..");
}
} 
```

在同一个包中，您可以将其称为 .

```
A.display(); 
```

# asp.net-mvc-3 - 使用 ninject 3 和 MVC 3 (.dll) 从程序集中加载模块

> ID：11327939
> 
> 赞同：0
> 
> 时间：2012-07-04T11:12:35.607
> 
> 标签：asp.net-mvc-3, ninject

我正在开发一个使用 ninject 2.2 的项目，所以我转换为 ninject 3.0，现在看来这段代码不再起作用了。

```
/// <summary>
/// Load your modules or register your services here!
/// </summary>
/// <param name="kernel">The kernel.</param>
private static void RegisterServices(IKernel kernel)
{
    kernel.Load("PFFTester.Persistence.dll");   
    kernel.Load("Pyrosphere.Providers.dll");       
} 
```

我在这两个 dll 中有 ninject 模块.. 但是我不想搜索所有程序集.. 因为我知道它们位于那些.. 这以前工作过！我没有收到任何错误，除非我启动 MVC 3，它尝试加载控制器但没有注入任何东西，所以它崩溃说找不到没有参数的构造函数.. 那么有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T12:01:53.003

找到了解决方案。确保 MVC 3 项目引用了 Ninject.MVC3 dll ！它会起作用。

# debugging - 使用 SysTick_Config 后无法调试

> ID：11327941
> 
> 赞同：3
> 
> 时间：2012-07-04T11:12:39.007
> 
> 标签：debugging, embedded, inline, stm32

我 - 一个嵌入式初学者 - 在嵌入式编程的黑魔法世界中奋战。到目前为止，我已经赢得了很多战斗，但是这个新错误似乎很难。

首先，我的嵌入式设置：

*   Olimex STM32-P207 (STM32F207)
*   Olimex ARM-USB-OCD-H JTAG
*   开放式强迫症
*   Eclipse（带CDT和GDB硬件调试）
*   代码源工具链
*   用于 RIDE（使用 GCC）的启动文件和链接器脚本（为 STM32F207 改编的内存映射）
*   STM32F2xx_StdPeriph_Lib_V1.1.0

使用那里的许多教程和问答，我能够设置 makefile、链接器和启动代码，并使用 STM 的标准库（经典的闪烁，使用按钮和中断等）运行一些简单的示例。然而，一旦我开始使用 SysTick 中断，事情就变得一团糟。

如果将 SysTick_Config() 调用添加到我的代码中（即使是空的 SysTick_Handler），...

```
int main(void)
{
  /*!< At this stage the microcontroller clock setting is already configured, 
       [...]
  */
  if (SysTick_Config(SystemCoreClock / 120000))
  {
    // Catch config error
    while(1);
  }
[...] 
```

...然后我的调试器从（内联）函数 NVIC_SetPriority() 开始，一旦我点击“运行”，我就会进入 HardFault_Handler()。这只发生在使用调试器时。否则代码运行正常（从闪烁的 LED 中看出）。

我已经阅读了很多并尝试了很多（修改编译器选项、链接器、启动、使用 SysTick_Config() 调用尝试其他代码），但没有解决这个问题。

一件事可能是一个提示：编译器在两种情况下（有和没有 SysTick_Config 调用）都从 0x00000184 开始。在没有 SysTick_Config 的情况下，调用此点位于 main() 的开头。使用 SysTick_Config 这指向 NVIC_SetPriority()。

有人知道发生了什么吗？关于我可以在哪里继续寻找解决方案的任何提示？

我不知道有什么进一步的信息有助于解决这个谜题。请告诉我，我很乐意提供缺失的部分。

非常感谢！

/edit1：添加了 arm-none-eabi-readelf、-objdump 和 -size 的结果。

/edit2：我删除了代码信息以为实际代码腾出空间。有了这个新的简化版本，调试开始于

```
08000184:   stmdaeq r0, {r4, r6, r8, r9, r10, r11, sp} 
```

阅读：

```
[ 2] .text             PROGBITS        08000184 008184 002dcc 00  AX  0   0  4
...
 2: 08000184     0 SECTION LOCAL  DEFAULT    2
...
46: 08000184     0 NOTYPE  LOCAL  DEFAULT    2 $d 
```

主程序

```
/* Includes ------------------------------------------------------------------*/
#include "stm32f2xx.h"

/* Private typedef -----------------------------------------------------------*/
/* Private define ------------------------------------------------------------*/
/* Private macro -------------------------------------------------------------*/
/* Private variables ---------------------------------------------------------*/
uint16_t counter = 0;

/* Private function prototypes -----------------------------------------------*/
/* Private functions ---------------------------------------------------------*/
void assert_failed(uint8_t* file, uint32_t line);
void Delay(__IO uint32_t nCount);
void SysTick_Handler(void);
/**
  * @brief  Main program
  * @param  None
  * @retval None
  */
int main(void)
{
  if (SysTick_Config(SystemCoreClock / 12000))
  {
    // Catch config error
    while(1);
  }
  /*
   * Configure the LEDs
   */
  RCC_AHB1PeriphClockCmd(RCC_AHB1Periph_GPIOF, ENABLE); // LEDs

  GPIO_InitTypeDef GPIO_InitStructure;
  GPIO_InitStructure.GPIO_Pin = GPIO_Pin_6 | GPIO_Pin_7 | GPIO_Pin_8 | GPIO_Pin_9;
  GPIO_InitStructure.GPIO_Mode = GPIO_Mode_OUT;
  GPIO_InitStructure.GPIO_OType = GPIO_OType_PP;
  GPIO_InitStructure.GPIO_Speed = GPIO_Speed_2MHz;
  GPIO_InitStructure.GPIO_PuPd = GPIO_PuPd_NOPULL;
  GPIO_Init(GPIOF, &GPIO_InitStructure);

  GPIOF->BSRRL = GPIO_Pin_6;

  while (1)
  {
    if (GPIO_ReadInputDataBit(GPIOF, GPIO_Pin_9) == SET)
    {
      GPIOF->BSRRH = GPIO_Pin_9;
    }
    else
    {
      GPIOF->BSRRL = GPIO_Pin_9;
    }
    Delay(500000);
  }
  return 0;
}

#ifdef  USE_FULL_ASSERT

/**
  * @brief  Reports the name of the source file and the source line number
  *         where the assert_param error has occurred.
  * @param  file: pointer to the source file name
  * @param  line: assert_param error line source number
  * @retval None
  */
void assert_failed(uint8_t* file, uint32_t line)
{ 
  /* User can add his own implementation to report the file name and line number,
     ex: printf("Wrong parameters value: file %s on line %d\r\n", file, line) */

  /* Infinite loop */
  while (1)
  {
  }
}
#endif

/**
 * @brief  Delay Function.
 * @param  nCount:specifies the Delay time length.
 * @retval None
 */
void Delay(__IO uint32_t nCount)
{
  while (nCount > 0)
  {
    nCount--;
  }
}

/**
  * @brief  This function handles Hard Fault exception.
  * @param  None
  * @retval None
  */
void HardFault_Handler(void)
{
  /* Go to infinite loop when Hard Fault exception occurs */
  while (1)
  {
  }
}

/**
  * @brief  This function handles SysTick Handler.
  * @param  None
  * @retval None
  */
void SysTick_Handler(void)
{
  if (counter > 10000 )
  {
    if (GPIO_ReadInputDataBit(GPIOF, GPIO_Pin_8) == SET)
    {
      GPIOF->BSRRH = GPIO_Pin_8;
    }
    else
    {
      GPIOF->BSRRL = GPIO_Pin_8;
    }
    counter = 0;
  }
  else
  {
    counter++;
  }
} 
```

/编辑3：

**Soultion**：因为解决方案隐藏在评论中，所以我把它放在这里：

我的链接器文件丢失**`ENTRY(your_function_of_choice);`**（例如 Reset_Handler）。添加这个使我的调试器再次工作（它现在从正确的点开始）。

谢谢大家！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T01:24:12.217

我有一种强烈的感觉，在编译器选项或链接器脚本中没有正确指定入口点......

无论代码在该部分的链接时首先出现`".text"`，它都具有入口点。

然而，入口点应该指向一个特殊的“ *init* ”函数，该函数将设置堆栈，初始化`".bss"`部分（可能还有其他部分），初始化基本操作所需的任何硬件（例如中断控制器，也许一些系统计时器）和标准库的任何剩余部分，然后才将控制权实际转移到`main()`.

我不熟悉这些工具和你的硬件，所以我不能准确地说出那个特殊的“ *init* ”函数是什么，但这就是问题所在。编译程序的入口点没有指向它。`NVIC_SetPriority()`在那里没有任何意义。

# java - JAVA - 最合适的数据结构

> ID：11327947
> 
> 赞同：5
> 
> 时间：2012-07-04T11:12:54.870
> 
> 标签：java, data-structures

我对 Java 有点陌生，但现在我面临着两难境地。我有一个错误列表，如下所示：

```
"ERROR CODE" "POSITION" "Error description"
"000" "1" "No error"
"001" "1" "Connection error"
"002" "1" "Error sending reversal or batch capture process"
"003" "1" "Error after authorization – message sent to host and answer received"
"004" "1" "Error sending message for authorization"
"005" "1" "Error receiving message from host" 
```

还有更多错误。

现在我正在研究一个 JAVA 库，我真正需要做的是以某种方式实现这个错误（错误永远不会改变，它们总是相同的），以便使用该库的开发人员可以通过给定的 ERROR_CODE 轻松识别错误描述。

例如：字符串 getError(ERROR_CODE); 并返回与 ERROR_CODE 关联的错误描述字符串。

我想声明 ENUM 数据结构，但我似乎无法使其正常工作。

非常感谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T11:28:19.550

您可以像这样使用枚举：

```
enum Error {

    ERROR_000("000", 1, "No error"),
    ERROR_001("001", 1, "Connection error"),
    ERROR_002("002", 1, "Error sending reversal or batch capture process"),
    ERROR_003("003", 1, "Error after authorization – message sent" +
                        "to host and answer received"),
    ERROR_004("004", 1, "Error sending message for authorization"),
    ERROR_005("005", 1, "Error receiving message from host");

    private final String code;
    private final int position;
    private final String description;
    private static final Map<String, Error> errorMap =
        new HashMap<String, Error>();

    static {
        for (Error error : Error.values()) {
            errorMap.put(error.code, error);
        }
    }

    Error(final String code, final int position, final String description) {
        this.code = code;
        this.position = position;
        this.description = description;
    }

    public static Error getError(String code) {
        return errorMap.get(code);
    }
    // add getters and setters here:
    public String getCode() { return this.code; }
    public int getPosition() { return this.position; }
    public String getDescription() { return this.description; }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T11:18:22.197

您可以使用 enum 构建结构：

```
public enum Error {

   public final int code;
   public final String message;

   e0 (000, "No Error"),
   e1 (001, "Connection error");

   public Error(int code, String message) {
      this.code = code;
      this.message = message;
   }

   public static Error byCode(int code) {
        return Error.valueOf("e"+code); // you may add try/catch on IllegalArgumentException, etc.
   }
} 
```

您可以根据需要添加任意数量的访问器（静态或非静态，例如，它们可以使用静态 HashMap 来按消息查找）。

自 java 1.5 起，您可以在 switch 语句中使用枚举值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T11:16:44.590

使用[java.util.Map](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html)实现（HashMap）。使用错误代码作为键，使用描述作为值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T11:15:56.757

```
enum ErrorCode{
 001,002
} 
```

和

```
class ErrorWrapper{
 private ErrorCode errorCode;
 private String description;
 //setters + getters    
} 
```

有一个`Map<ErrorCode, List<ErrorWrapper>>`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-04T11:17:09.563

只需使用一个

```
HashMap<String, String> 
```

因为你说你的错误代码是字符串，描述也是一个字符串。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-04T11:24:33.537

首先，“错误永远不会改变”在不久的将来会是错误的:)

我会使用一个属性文件来存储这些错误代码和描述（如果需要可以解析“位置”数据）

```
Properties properties = new Properties();
    try {
        properties.load(new FileInputStream("errors.properties"));
    } catch (IOException e) {} 
```

然后，您的 getError 方法将是：

```
public String getError(String errorCode){
     return properties.getProperty(errorCode);
} 
```

您的 errors.properties 文件将如下所示：

```
001=No error
002=Connection error 
```

我认为，这将更加动态

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-04T11:41:01.507

我为你写了一些东西；包括测试代码。只需在默认包中创建一个 Main 类，复制粘贴我的代码并运行它。您可以使用 Errors 类中的 getError(String code) 方法通过代码获取错误消息：

```
import java.util.*;
public class Main {
    public static void main(String[] args) {
        for(String code : new String[]{"000", "001", "002", "003", "004", "005"}) {
            System.out.println(Errors.getError(code));
        }
    }
}
class Errors {
    static {
        Errors.errors = new HashMap<String, Error>();
        for(String[] error : new String[][]{
                {"000", "1", "No error"},
                {"001", "1", "Connection error"},
                {"002", "1", "Error sending reversal or batch capture process"},
                {"003", "1", "Error after authorization – message sent to host and answer received"},
                {"004", "1", "Error sending message for authorization"},
                {"005", "1", "Error receiving message from host"}
        }) {
            Errors.errors.put(error[0], new Error(error[0], error[1], error[2]));
        }

    }
    private static Map<String, Error> errors;
    public static String getError(String code) {
        return Errors.errors.get(code).message;
    }
    private static class Error {
        private String code;
        private String position;
        private String message;
        public Error(String code, String position, String message) {
            super();
            this.code = code;
            this.position = position;
            this.message = message;
        }
        @Override
        public String toString() {
            return this.getClass().getSimpleName() + " | code: " + this.code + " | position: " + this.position + " | message: " + this.message;
        }
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-04T12:06:37.877

Java`enum`非常适合您的问题。我可以想到另一种在添加新错误代码或修改现有代码方面更灵活的方法。

1.  使用如下条目创建一个属性文件
    *   000-1=无错误
    *   001-1=连接错误
2.  将此文件捆绑在您的 jar 中，该文件将分发给开发人员。
3.  创建一个类并放置一个代码，该代码将从 jar 中读取此文件并创建这些名称值对的 Map（或 HashMap）。
4.  将此代码放在一个静态块中，以便在加载类时初始化 HashMap。
5.  该`getError(ERROR_CODE)`方法将简单地附加`-1`到输入错误代码并查询此 Map 并返回适当的错误消息。
6.  要添加新消息或修改现有消息，只需更改属性文件的内容即可。无需更改代码。

# android - 如何从 mp3 中提取元数据？

> ID：11327954
> 
> 赞同：15
> 
> 时间：2012-07-04T11:13:24.433
> 
> 标签：android, mp3

我有 mp3 文件的文件名。如何从这个 mp3 文件中提取艺术家、专辑、专辑图片等元数据？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-04T11:29:30.123

为 API 级别 10 或更高级别尝试此操作

```
 MediaMetadataRetriever mmr = new MediaMetadataRetriever();
 mmr.setDataSource(filePath);

String albumName = mmr.extractMetadata(MediaMetadataRetriever.METADATA_KEY_ALBUM)); 
```

等等...

寻求更多[帮助](http://developer.android.com/reference/android/media/MediaMetadataRetriever.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-12-22T11:24:03.797

```
 MediaMetadataRetriever mmr = new MediaMetadataRetriever();
         mmr.setDataSource(songsList.get(songIndex).get("songPath"));
         byte[] artBytes =  mmr.getEmbeddedPicture();
         if(artBytes!=null)
           {
        //     InputStream is = new ByteArrayInputStream(mmr.getEmbeddedPicture());
             Bitmap bm = BitmapFactory.decodeByteArray(artBytes, 0, artBytes.length);
             bSongImage.setImageBitmap(bm);
         }
         else
         {
             bSongImage.setImageDrawable(getResources().getDrawable(R.drawable.cmp));
         } 
```

**否则在音频文件中没有嵌入图像**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-20T09:22:23.790

```
MetaDataRetriever m_metaRetriever = new MetaDataRetriever();
m_metaRetriever.setDataSource(MainActivity.this,uriSound); 
```

该`setDataSource`方法的输入参数也应该包括上下文。否则它会抛出 illigalArgument 异常。

# java - 寻找简单的解决方案来描述一种方法

> ID：11327962
> 
> 赞同：0
> 
> 时间：2012-07-04T11:14:06.583
> 
> 标签：java, profiling

我正在寻找比 JProfiler 更简单的东西来分析 Java 方法，它可以挂接到 JVM。

我在一个对象上调用一个方法（在 JAVA 中）

```
ObjectX objectX= new ObjectX();

objectX.callSomeMethod(); 
```

我希望能够看到在这种情况下调用的所有方法和时间：

（调用树）

```
callSomeMethod()    time took        

  - callOtherMethod()  time took         

          call other method  time took    
          call security method  time took    

  - callMethodx....        time took       

  ..... 
```

有没有收集这些信息的工具？

更清楚地说，我正在寻找更简单的东西，比如 SLF4J 探查器

```
+ Profiler [BASIC] |
-- elapsed time [A] 220.487 milliseconds. 
-- elapsed time [B] 2499.866 milliseconds. 
-- elapsed time [OTHER] 3300.745 milliseconds.
-- Total [BASIC] 6022.568 milliseconds. 
```

但是在 SL4j 上，您必须手动将配置文件的代码放入代码中。

我在想可以通过另一个分析工具获得类似的东西。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T11:20:08.027

您正在寻找的是[Java Profilers](https://www.google.com/search?q=Java%20Profilers&qscrl=1)。[我建议您下载Yourkit](http://www.yourkit.com/)的演示版本并使用它来分析您的应用程序。

# c - 测量特定函数的最大和最小执行时间

> ID：11327963
> 
> 赞同：0
> 
> 时间：2012-07-04T11:14:14.153
> 
> 标签：c, profiling, performance

我正在使用两种方法将相同文本的 x 行写入文件进行一些简单的基准测试：

1.  直接刷机。

2.  创建一个新线程并通过异步队列完成通信（主线程在一侧插入，另一个线程从另一侧读取）。此方法用于尽量减少最慢的写入（由于刷新）

这是一段代码，应该给出程序的基本概念：

```
int i;
char * buf;
int buf_size;
double local_start, local_end, global_start, global_end;
double slowest, fastest;
double local_time_difference;

buf = "A string to be printed to a file \n";
buf_size = strlen(buf);
fastest = MAX_WRITE_TIME;
slowest = 0;

logger_init(atoi(argv[1]));

global_start = get_time();
for(i = 0 ; i < 100000000 ; i++) 
{
    local_start = get_time();
    logger_write(buf, buf_size);
    local_end = get_time();

    local_time_difference = local_end-local_start;

    if(local_time_difference < fastest && local_time_difference != 0)
        fastest = local_time_difference;

    if(local_time_difference > slowest)
        slowest = local_time_difference;

    if(i % 10000 == 0)
        usleep(1);
}   
global_end = get_time();

printf("Fastest: %1.9f\nSlowest: %1.9f\nTotal Time: %1.9f\n", fastest, slowest, global_end-global_start);
logger_destroy(); 
```

获取时间过程以微秒为单位返回时间

```
double get_time()
{
    struct timeval t;
    struct timezone tzp;
    gettimeofday(&t, &tzp);
    return t.tv_sec + t.tv_usec*1e-6;
} 
```

根据传递给 logger_init 的参数，logger_write 将直接写入文件或将其插入队列（队列大小不得超过某些特定限制）。正在使用[GAsyncQueue](http://developer.gnome.org/glib/2.31/glib-Asynchronous-Queues.html)

我目前用来计算最快和最慢写入的方法当然有效，但我的问题是：是否有工具或分析器可以为我做到这一点？即给我关于每个函数的统计数据（最大、最小和平均调用）

到目前为止我尝试过但没有运气的工具：

*   gprof
*   飞涨
*   Kcachegrind
*   VTune

**TL:DR** 我正在寻找一种工具来为我提供特定功能的最小、最大和平均执行时间，而不是总时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T11:36:42.570

*   使用正确的高分辨率 OS API 函数进行基准测试。
*   不要从测量本身内部计算执行时间，*尤其是*在使用浮点数时。
*   你为什么要调用睡眠功能？您是在尝试强制进行上下文切换还是类似的怪事？操作系统可能会比您的程序处理得更好、更高效。

# android - 强制关闭呼叫意图

> ID：11327965
> 
> 赞同：0
> 
> 时间：2012-07-04T11:14:18.587
> 
> 标签：android, android-intent

我正在我的 android 应用程序中实现呼叫意图。但是，每次单击按钮时，应用程序都会强制关闭。我已添加`android.permission.CALL_PHONE`到我的清单中。此外，电子邮件按钮工作正常。

我正在使用以下代码从 mysql 数据库中获取号码：

```
phonenumber = json_data.getString("phone"); 
```

这是按钮的 OnClickListener

```
call.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                String number = phonenumber;
                Intent callintent = new Intent(android.content.Intent.ACTION_CALL);
                callintent.putExtra(android.content.Intent.EXTRA_PHONE_NUMBER, number);
                startActivity(callintent);
            }
        }); 
```

使用字符串是否有问题，因为 JSON 数据已转换为字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T11:18:54.693

试试这个，

```
String number = phonenumber;
Intent callintent = new Intent(android.content.Intent.ACTION_CALL, Uri.parse("tel:"+number));
startActivity(callintent); 
```

# android - 在 Android Cordova-app 中关闭 textarea 和 inputfields 的自动完成功能

> ID：11327968
> 
> 赞同：8
> 
> 时间：2012-07-04T11:14:25.623
> 
> 标签：android, input, autocomplete, textarea, cordova

我正在使用 Cordova (1.9.0)、html5、javascript 开发一个 Android 应用程序 (2.3.3)。

它是一种语言培训工具，因此当用户在文本区域或输入字段中输入答案时，我不希望他们看到建议。

我已经在 textarea 和 input 标记以及表单标记中尝试了 autocomplete="off" ，但都不起作用。有谁知道如何关闭这些建议？

我的 test-html 看起来像这样：

```
<div><b>With form:</b>
    <form autocomplete="off">
        <p>Wie   <input size="5" value="b" autocorrect="off" autocapitalize="off" autocomplete="off" spellcheck="false">  jij?</p>
        <textarea spellcheck="false" autocorrect="off" autocapitalize="off" autocomplete="off"></textarea>
    </form>
</div>
<div><b>No form:</b>
    <p>Jan, ik   <input size="5" value="b" autocorrect="off" autocapitalize="off" autocomplete="off" spellcheck="false">  Jan.</p>
    <textarea spellcheck="false" autocorrect="off" autocapitalize="off" autocomplete="off"></textarea>
</div> 
```

更新：我创建了一个 html-testpage 并使用 Android 手机在那里浏览，仍然遇到相同的自动完成/建议问题。所以也许这不是 Cordova 应用程序的问题，而是 Android 浏览器的问题？看看（在 Android 手机上）[http://jsfiddle.net/f3AJq/](http://jsfiddle.net/f3AJq/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T11:22:43.450

试试`android:inputType="textNoSuggestions"`你的EditText

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T14:31:02.087

我刚刚发现它！，它是如此简单！，只需输入：`name="password"` Just it！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-24T07:17:13.857

在科尔多瓦应用程序中至少在 Android 4.4 之前，如上所述的 html5 属性 autocomplete="off" 没有任何效果。但是在 Android 6 上 autocomplete="off" 确实有效！

所以它取决于Android版本，而不是html。

（这是一个cordova 5.1.1 android平台，以防有人想知道）

# java - 玉兰认证

> ID：11327973
> 
> 赞同：0
> 
> 时间：2012-07-04T11:14:46.303
> 
> 标签：java, magnolia

这是我在这里的第一篇文章..请帮助我，我没有解决方案

我的问题是我在 magnolia 中创建了一个对话框，用户应该输入我想要阅读的 xsl 文件的 DMS 链接

我使用了 savehandler 并扩展了所需的类

当我开始阅读上传的文件时，我收到了这个错误

```
" HTTP response code: 401 for URL: " 
```

注意：我试图从我的计算机路径中读取相同的文件，一切正常

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T11:58:23.053

也许用户没有使用对`dms`工作区具有写权限？

# actionscript-3 - 打开/保存文件对话框

> ID：11327975
> 
> 赞同：1
> 
> 时间：2012-07-04T11:15:02.813
> 
> 标签：actionscript-3, flash, file, openfiledialog, savefiledialog

众所周知，File 类具有方法 browseForOpen() 和 browseForSave()。browseForSave 方法内置测试文件是否已存在。我不需要此测试并使用 browseForOpen 进行保存。如何在打开文件对话框中将文本“打开”更改为“保存”（或者如何在保存文件对话框中删除测试）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T12:21:36.377

你不能。文件打开或保存对话框来自操作系统或Flash Player，您无法修改它（如果可以，那将是FP 的一个非常大的安全漏洞）。

# apache-flex - xml 作为弹性图表的数据源

> ID：11327976
> 
> 赞同：0
> 
> 时间：2012-07-04T11:15:14.400
> 
> 标签：apache-flex, flex4, flex3

这是 MXML 代码。

```
<?xml version="1.0"?>
<!-- charts/XMLFileDataProvider.mxml -->
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml" >
<mx:Model id="results" source="data.xml"/>
<mx:Panel title="Line Chart">
 <mx:LineChart id="myChart" dataProvider="{results.result}" showDataTips="true" width="600" height="240">
    <mx:horizontalAxis>
       <mx:CategoryAxis categoryField="month"/>
    </mx:horizontalAxis>
    <mx:series>
       <mx:LineSeries yField="banana" displayName="Banana"/>
       <mx:LineSeries yField="apple" displayName="Apple"/>
       <mx:LineSeries yField="orange" displayName="Orange"/>
    </mx:series>
 </mx:LineChart>
 <mx:Legend dataProvider="{myChart}"/>     
 </mx:Panel>
</mx:Application> 
```

当我更改 xml 文件中的数据时，更改不会反映在图表中。谁能告诉我我哪里出错了

这是xml文件

```
 <data>
<result month="Jan-04">
    <apple>81768</apple>
    <orange>60310</orange>
    <banana>43357</banana>
</result>
<result month="Feb-04">
    <apple>81156</apple>
    <orange>58883</orange>
    <banana>49280</banana>

   </data> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T12:26:15.100

这可能会对您有所帮助，我已经创建了关于 HTTPService 的示例：-

您可以根据上述评论为您的问题实施逻辑。

```
 <?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600"
               creationComplete="init();switchImage()">
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
        <!--<fx:Model id="results" />-->
        <s:HTTPService id="results" result="resultHandler(event)" fault="{trace('Fault')}" />
    </fx:Declarations>
    <fx:Script>
        <![CDATA[

            import mx.rpc.events.ResultEvent;

            private function init():void
            {
                var timer:Timer = new Timer(2000);
                timer.addEventListener(TimerEvent.TIMER, switchImage);
                timer.start();
            }
            private function switchImage(event:TimerEvent = null):void
            {
                //url as external URL outside of project folder
                results.url = "C:/data/data.xml";
                results.send();
            }

            private function resultHandler(event:ResultEvent):void
            {
                myChart.dataProvider = null;
                myChart.dataProvider = event.result.data.result;
            } 
        ]]>
    </fx:Script>
    <mx:Panel title="Line Chart">
        <mx:LineChart id="myChart" showDataTips="true" width="600" height="240">
            <mx:horizontalAxis>
                <mx:CategoryAxis categoryField="month"/>
            </mx:horizontalAxis>
            <mx:series>
                <mx:LineSeries yField="banana" displayName="Banana"/>
                <mx:LineSeries yField="apple" displayName="Apple"/>
                <mx:LineSeries yField="orange" displayName="Orange"/>
            </mx:series>
        </mx:LineChart>
        <mx:Legend dataProvider="{myChart}"/>     
    </mx:Panel>
</s:Application> 
```

# mysql - LIMIT 0,1 会加速主键上的 SELECT 吗？

> ID：11327982
> 
> 赞同：6
> 
> 时间：2012-07-04T11:15:46.583
> 
> 标签：mysql, query-optimization, relational-database

有谁知道这两个查询之间是否存在任何速度差异*（显然对于足够大的表） ：*

```
SELECT field FROM table WHERE primary_key = "a particular value" 
```

或者：

```
SELECT field FROM table WHERE primary_key = "a particular value" LIMIT 0,1 
```

我应该注意，该`primary_key`字段实际上是一个主键。

`LIMIT 0,1`当查询将继续查找其他匹配项时，现在确实有帮助。我假设当涉及主键时，由于它的唯一性，它应该自动停止。所以我的猜测是添加它不会有任何收益。

有人遇到过这个吗？目前我没有足够大的数据集进行测试。我还假设相同的答案将适用于已设置为的任何字段`UNIQUE`。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-04T11:49:14.763

`explain`因此，在阅读了在两个查询上运行的 Hammerite（谢谢）提供的信息后，会产生：

*   编号 = 1
*   选择类型 = 简单
*   表 = 表
*   类型 = 常量
*   可能的键=主要
*   关键=主要
*   key_len = 767
*   参考 = 常量
*   行 = 1
*   额外=

它将两个查询标识为`CONST`，链接定义为：

> **常量**
> 
> 该表最多有一个匹配行，在查询开始时读取。因为只有一行，所以该行中列的值可以被优化器的其余部分视为常量。const 表非常快，因为它们只被读取一次。

因此，假设我正确理解了这两个查询，它们将被视为相同 - 这是我所期望的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-06T20:56:29.480

主键将作为索引进行搜索，速度非常快。

但是限制查询是最佳实践的一部分。

在任何更复杂的查询中，使用 Joins、Group_by 和 order by 甚至单个搜索，它允许 sql 在找到限制记录 row_count 后停止，例如：1

如果您使用 order by，它将允许 sql 从 order by 列适当地开始搜索并在找到 1 条记录后停止，即使在其他指定的列或条件中找到其他记录，例如：

`SELECT Primary_keycoll,field2 FROM table WHERE Primary_keycoll = "value1" or field2 = 'value1' order by field2 limit 0,1`也许 Primary_keycoll 是唯一的，但其他例如： field2 可能不是，限制为 1 ，允许 mysql 获取第一个并停止，否则它将遍历整个指定的列或资源以确保其他列不满足查询。

出于安全原因，在查询末尾使用限制是一种很好的做法，它会阻止一些 SQL 注入技巧。只要您的限制器经过适当的消毒。

[http://dev.mysql.com/doc/refman/5.0/en/limit-optimization.html](http://dev.mysql.com/doc/refman/5.0/en/limit-optimization.html)

LIMIT 0 将快速返回一个空集。

# model-view-controller - 是否可以将 Presentation Model Pattern 用于具有 EMF 域模型的基于 GEF 的 RCP 应用程序？

> ID：11327984
> 
> 赞同：1
> 
> 时间：2012-07-04T11:15:49.083
> 
> 标签：model-view-controller, mvvm, eclipse-emf, eclipse-gef, presentation-model

我正在开发一个 Eclipse RCP 应用程序，使用基于 EMF 的第三方域模型和 GEF 编辑器进行编辑。

GEF[使用 MVC 模式](http://www.eclipse.org/gef/gef_mvc/index.php)，如果我不必使用特定布局在编辑器视图上绘制模型图，这将是公平的。我正在使用的域模型不包含任何视觉信息（这本身就是一个好主意），但我希望能够`Figure`在他们`EditPart`的 s 中为 s 分配坐标。这将使我更容易计算图形在布局中的位置。

现在我偶然发现了 Martin Fowler 的[Presentation Model Pattern](http://martinfowler.com/eaaDev/PresentationModel.html)，这似乎正是我正在寻找的东西。[我还找到了一个关于 RCP UI 测试](http://splitshade.wordpress.com/2009/05/19/rcp-ui-testing-mal-ganz-ohne-framework/)（仅限德语​​）的老式教程，它在 Eclipse RCP 上下文中使用了这种模式。

现在我想知道：看到 GEF 明确使用 MVC，通常是否可以在 GEF 上下文中使用 PM？MVVM 是替代方案吗？

*请注意，出于多种原因，我无法使用 GMF。*

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T14:41:25.377

是的，这绝对是可能的，你有两个选择。

首先 - 是实现你自己的图形符号模型。我建议您使用 appreach，例如：

```
modelElement : ModelElement 1..1
x            : int          1..1
y            : int          1..1 
```

然后在 EditingDomain 中加载两个模型（EMF 将为您解析跨文档引用），创建所有缺少的图形符号元素等。

另一种选择是使用 GMF 或 Graphiti。他们有您正在寻找的开箱即用的模型，这将大大简化您的生活。以学习另一个怪物框架为代价（在 GMF 的情况下）。Graphiti，很容易（相对于 GEF/GMF），但 IMO 不太灵活。顺便说一句，GMF 将为您提供一个“免费”的 TransactionalEditingDomain，它将为您处理所有命令、撤消和重做。所以，就像对你[之前的问题](https://stackoverflow.com/questions/11235861/gef-emf-why-doesnt-my-editor-remove-the-figure-for-a-removed-object-when-ref)的评论一样，我建议你使用 GMF。

哦，对不起，我没有注意到你写的关于 GMF 的内容。

然后，第二个选项是让图形模型从域模型继承，然后针对这个模型编写 GEF 编辑器。

# php - 在第一次匹配后停止脚本或循环而不使用退出；

> ID：11327990
> 
> 赞同：0
> 
> 时间：2012-07-04T11:16:02.887
> 
> 标签：php, while-loop, exit, exit-code

不知道如何问这个问题......问题是如果`if ($current[$id][$i]['item'] == '')`为真，我需要停止循环运行，所以无论脚本需要做什么或在这种情况下回显，都不要重复 15 次。

如果使用`exit;`整个页面将停止渲染，那么，有什么想法吗？

提前致谢。

如果问题不够清楚，请随时使用评论提问，我将非常乐意澄清任何疑问。

```
$i=1; 
while($i<=15) { 
    if ($current[$id][$i]['item'] == '') { 
        echo 'Done!.';
        //do something
    } 
    $a++; 
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-04T11:17:38.803

采用[`break`](http://php.net/manual/en/control-structures.break.php)

```
$i=1; 
while($i<=15) { 
    if ($current[$id][$i]['item'] == '') { 
        echo 'Done!.';
        break;
    } 
    $i++;  //<- that should probably be $i instead of $a?
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-04T11:17:40.950

如何使用[`break`](http://php.net/manual/en/control-structures.break.php)控制结构？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-04T11:18:03.983

你需要**打破**。此外，您当前的循环是无限的，因此会超时。大概你的意思是增加`$i`，而不是`$a`。

```
$i=1; 
while($i<=15) { 
    if ($current[$id][$i]['item'] == '') { 
        echo 'Done!.';
        break; //<-- terminate loop
    } 
    $a++; //<-- shouldn't this be $i++?
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T11:18:34.150

只有两种方法可以打破循环......使用`exit;`和`break;`......

`break;`是你想要的它会退出循环并继续执行，exit 将结束脚本。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-04T11:17:33.307

```
$i=1; 
while($i<=15) { 
    if ($current[$id][$i]['item'] == '') { 
        echo 'Done!.';
        break;  //   or you can make value of $i = 20;
    } 
    $a++; 
} 
```

# symfony - symfony2，表单生成器，如何最初显示一个空的实体选择列表

> ID：11327998
> 
> 赞同：2
> 
> 时间：2012-07-04T11:16:29.907
> 
> 标签：symfony, twig

我有 3 个实体：品牌、型号和汽车。Make -> Model 是 oneToMany 关系， Auto->Model 是 manyToOne 关系。

我想要实现的是能够生成一个包含品牌列表的表单，例如福特、欧宝……并最初加载一个空的模型列表。只有在列表中选择了 Make 时，才应填充模型列表，这是通过 ajax 调用实现的。

我的问题是我需要做什么，模型列表最初是空的，因为表单构建器正在填充在任何 Make 中分配的所有模型。

我可以通过使用 query_builder 来实现类似的效果，比如说搜索一个不存在的模型，但这不是正确的方法。

```
class AutoType extends AbstractType {
   public function buildForm(FormBuilder $builder, array $options) { 
       $builder->add('make','choice', array(
                   'choices'=>Array('1'=>'Opel', '2'=>'Ford'),
                   'property_path'=>false,
                   'label'=>'Make'))
                ->add('model', 'entity', array(  // this fetches all models.  Also don't want a subset of models, just empty list with 'Select Model' 
                 'class' => 'Auto\SalonBundle\Entity\Model',
                 'empty_value' => 'Select Model'
                  ))
                ->add('km')
                ->add('cc')
                ->add('hp')
                ->add('kw')
          );
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T17:44:51.163

为了实现这一点，您必须创建自己的表单类型和相应的 _widget 块。或者，您可以使用捆绑包的 Dependent Filtered Form Type 更快地到达那里[https://github.com/shtumi/ShtumiUsefulBundle](https://github.com/shtumi/ShtumiUsefulBundle)。