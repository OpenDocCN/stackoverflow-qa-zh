# StackOverflow 问答 10745000-10745999

# objective-c - 从 uiviewcontroller 内部在自定义 uitableviews 之间切换

> ID：10745011
> 
> 赞同：1
> 
> 时间：2012-05-24T20:44:51.507
> 
> 标签：objective-c, ios, uiview, uitableview

所以我有一个名为 SocialMainViewController 的 UIViewController 类。它有一个 TwitterViewController 实例（继承自 UITableViewController）和一个 FacebookViewController 实例（也继承自 UITableViewController）。

```
@interface SocialMainViewController ()

@property (strong, nonatomic) TwitterViewController* twitterVC;
@property (strong, nonatomic) FacebookViewController* facebookVC;
...
@end

@implementation SocialMainViewController

@synthesize twitterVC = _twitterVC;
@synthesize facebookVC = _facebookVC;
..

- (void)viewDidLoad
{
    [super viewDidLoad];

    UIColor* color = [[UIColor alloc] initWithRed:0.2 green:0.2 blue:0.2 alpha:1.0];
    [self.navigationController.navigationBar setTintColor:color];

    // Do any additional setup after loading the view
    self.facebookVC = [[FacebookViewController alloc] init];
    self.facebookVC.view.frame = self.view.bounds;
    [self.view addSubview:self.facebookVC.view];
} 
```

因此 Facebook 视图控制器从 facebook 获取所有信息并将其存储在一个数组中。但是 FacebookViewController 类上的 cellForRowAtIndexPath 永远不会被调用，因此只有一个空的表视图是可见的。

我实际上是在尝试在 facebookviewcontroller 和 twitterviewcontroller 表视图之间切换。这就是为什么我在 socialmainview 控制器中有两个。

# ios - View Frame 与 IOS 4.3 和 IOS 5.1 不同——为什么？

> ID：10745012
> 
> 赞同：0
> 
> 时间：2012-05-24T20:44:56.460
> 
> 标签：ios

在 viewController 的主视图中布置 CALayer 对象时，我发现 IOS 43\. 和 5.1 之间存在差异

我在横向模式下运行。我想要一个 40 点宽的 CALayer 对象，显示在左上角——与导航栏和屏幕的整个高度（减去导航栏）对接。状态栏被禁用。我将图层的高度计算为视图的高度减去导航栏的高度。

在我的 viewController 的 viewDidLoad 中，我有以下代码....

```
[[UIApplication sharedApplication] setStatusBarHidden:YES];
CGRect viewFrame = self.view.frame;
float navBarHeight = self.navigationController.navigationBar.frame.size.height;

CGRect f = CGRectMake( 0, navBarHeight, 40, viewFrame.size.height - navBarHeight);
leftLayer = [[CALayer alloc] init];
leftLayer.frame = f;
leftLayer.backgroundColor = [UIColor greenColor].CGColor;  // for debug
[self.view.layer addSublayer:leftLayer]; 
```

当我在 5.1 viewFrame = (0, 0, 480, 288) 和 navBarHeight = 32 上运行它时。当我在 4.3 viewFrame = (0, 0, 480, 320) 和 navBarHeight = 32 上运行它时。我也试过了纵向模式下的比较，操作系统版本之间没有差异。

navBarHeight 似乎也是错误的——因为我的绿色 CALayer 对象在它和导航栏之间有大约 12 pts 的空白。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T20:57:09.617

使用 viewWillAppear 方法调整框架时我的运气更好，因为到那时视图已经根据方向调整大小。你在那个方法中有同样的问题吗？

# continuous-integration - 在代码签入之前运行一些测试自动化

> ID：10745013
> 
> 赞同：2
> 
> 时间：2012-05-24T20:45:06.633
> 
> 标签：continuous-integration, jenkins, perforce

我正在为我的组织维护源代码控制，并且我想在每次签入到达中央存储之前对其运行一些自动化测试。这意味着当用户提交他们的更改时，我将构建所有代码并启动测试套件。

我需要为此设置什么 - 假设我有 perforce 作为我的源代码控制？

这应该是一个非常普遍的问题，但我可能没有正确的词汇。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T20:59:17.383

我假设您正在使用标签中的 Perforce。有几种方法可以做到这一点：

1.  使用[分支](http://kb.perforce.com/?article=4)——让开发人员签入一个“测试”分支，并让 Jenkins 监控该分支的更改以构建您的代码并运行测试。然后，您可以将测试代码集成到一个单独的“主”分支中，供其他人从中提取。
2.  如果您有最新版本的 Perforce，则可以使用[搁置](http://www.perforce.com/perforce/doc.current/manuals/cmdref/shelve.html)功能。让开发人员创建搁置的更改列表并让 Jenkins 取消搁置更改以构建和运行测试。如果测试通过，可以将更改列表提交到中央仓库。

我们在我的工作中使用选项 2，因此如果需要，我可以为您提供更多详细信息 - 只需在此处发表评论即可。

# git - 在 Git 中推送子模块更改

> ID：10745014
> 
> 赞同：1
> 
> 时间：2012-05-24T20:45:09.467
> 
> 标签：git, git-submodules

我有一个 Git 子模块，已成功克隆到我的主项目中。但是，当我在子模块中进行更改并尝试将它们推送回原始子模块存储库时，Git 拒绝这样做。为什么，我该如何解决这个问题？

**示例：** 我在两个单独的文件夹中有项目子项目和项目超级项目。我将 sub 作为子模块包含在 super 下。我在文件夹 super/sub 中进行了更改，然后尝试将这些更改推送到原始项目 sub。吉特抱怨。

**编辑：**关于错误消息，我在 Windows 上使用 Git Bash，不幸的是无法从终端复制确切的错误消息。这是最相关的行：

> 远程：错误：拒绝更新签出分支：refs/heads/master。默认情况下，拒绝在非裸存储库中更新当前分支，因为它会使索引和工作树与您推送的内容不一致，并且需要“git reset --hard”来匹配工作树到 HEAD。

注意：两个存储库都位于我的硬盘上。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T20:54:01.820

**这与 repo 作为子模块无关。**

您正在使用工作副本（非裸仓库）推送到 git 存储库，并尝试推送到当前已签出的同一分支 - 默认情况下 git 不允许您这样做。

在继续之前，您应该问自己是否真的想这样做。这类似于，假设您直接克隆了一个同事 repo，然后尝试推送到它。如果您成功了，如果您的同事有未提交的更改，或者更新时将被跟踪文件覆盖的本地文件，您可能会导致他们失去工作。

**简单的解决方案**

最简单的解决方案是根本不推送，而是从您的其他仓库中提取。最终结果是相同的，但是由于您正在拉入更新（这很正常），git 不会对此发表任何评论。

**稍微不太容易的解决方案**

You *can* push into your other working copy, if you change the receiving repo's git config (read the rest of the error message) to allow it to be pushed into. To do that, in the receiving repo:

```
git config receive.denyCurrentBranch ignore 
```

More details about that are in the help (`git config --help`)

```
receive.denyCurrentBranch
    If set to true or "refuse", git-receive-pack will deny a ref update to the
    currently checked out branch of a non-bare repository. Such a push is potentially
    dangerous because it brings the HEAD out of sync with the index and working tree.
    If set to "warn", print a warning of such a push to stderr, but allow the push to
    proceed. If set to false or "ignore", allow such pushes with no message. Defaults
    to "refuse". 
```

# javascript - Javascript 函数 - 参数长度

> ID：10745018
> 
> 赞同：0
> 
> 时间：2012-05-24T20:45:51.517
> 
> 标签：javascript

我正在从超链接调用 javascript 函数，如下所示。

```
<a href="javascript:redirect('param1','param2','http://google.com');">Do this</a> 
```

在这种情况下，redirect() 函数按预期调用并重定向到第三个参数中的 url。但是如果 url 参数很大（比如说 >200 个字符），则永远不会调用 javascript 函数。参数长度有限制吗？我确实需要 URL 这么大，因为我传递的加密参数很少，而且它们很大......

- - - - -编辑 - - - - -

这是一个冗长的 URL 参数示例

```
<a href="javascript:redirect('A-0', '07', 'http://localhost:9083/xxxxx/aaa/bbbb/ccccc/redirectApply.do?token=9BsPtrGQPEYWv6dvbP9hsX9skeghTHnonkKZtsqrkZXSf7gKqKRYdo2i6CpcLOWxroqrWEDhyosk%0D%0A1aD1tQ0OBHHfsVjPKb%2B1kSFzjCg8lKyoGropGWc%2Bc7oCT8%2BYItwX');"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T21:14:34.700

我不会使用 javascript:redirect，而是动态更改 a 标签的 href。这允许浏览器使用“在新选项卡中打开链接”、Ctrl-单击或类似功能，并且可能不会出现您提到的问题。这也让用户在将鼠标悬停在链接上时可以看到他们要去哪里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T20:52:09.530

您可以动态附加它，而不是将 javascript 嵌入到 href 属性中。

前任：

```
<a id="example_link">Do this</a> 
```

然后：

```
document.getElementById('example_link').onclick = function(){
    redirect('param1','param2','http://google.com');
    return false;
}; 
```

如果您使用的是 jQuery 之类的 JavaScript 库，或者您有比通过 ID 更好的方式来识别锚点，那么有更好的解决方案。

# vb.net - VB.Net 复制一个列表以存储原始值以供以后使用

> ID：10745026
> 
> 赞同：2
> 
> 时间：2012-05-24T20:46:23.213
> 
> 标签：vb.net, list, collections

我有一个 WPF 表单，它采用具有位置和大小的对象列表并将它们绘制在画布上。我目前正在尝试实现一个撤消按钮，该按钮将丢弃对对象位置所做的所有更改，并恢复为加载表单时检索到的原始集合。

就目前而言，我在加载表单时访问数据库并获取所有需要显示的对象，然后将返回的列表分配给两个单独的集合。出现的问题是这两个集合实际上是指向原始集合的指针，并且每当更改一个集合时，更改都会反映在第二个集合中。

是否可以复制对象列表，以便对一个集合所做的更改不会影响辅助集合？

到目前为止，我已经尝试简单地使用赋值运算符，将源集合传递给一个函数`byval`并滚动列表的每个元素，手动将其添加到第二个集合中，并使用 linq 从原始列表中获取所有对象并推送结果到一个单独的临时列表并将第二个集合分配给临时列表。

我觉得我把这个问题复杂化了，但我在谷歌搜索时遇到的几乎所有地方都说这种行为是设计使然，我理解，但这似乎是一个相当普遍的想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T21:33:32.687

这是我以前用来制作对象的“深度”副本的函数：

```
Public Function DeepCopy(ByVal ObjectToCopy As Object) As Object

    Using mem as New MemoryStream

        Dim bf As New BinaryFormatter
        bf.Serialize(mem, ObjectToCopy)

        mem.Seek(0, SeekOrigin.Begin)

        Return bf.Deserialize(mem)

    End Using

End Function 
```

与其他一些答案相比，这是一种低级方法，但允许您深度复制任何对象。我已经在与您类似的情况下成功使用了它，我需要一个数组的深层副本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-05T07:34:47.100

只需使用此代码将 listA 的所有项目分配给 listB

```
For Each elm In ListA
   ListB.Add(elm) 
Next 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T20:53:30.627

此后删除了另一个答案，据说用于`var copy = list.ToList();`获取列表的副本。这将适用于以下警告：两个列表仍将引用相同的对象，因此对这些对象的任何更改都将反映在两个列表中。只要您只更改列表中对象的顺序，此解决方案就完全可行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T20:57:26.830

您必须创建一个新列表并将 list1 中的项目的副本添加到其中。您可以使用对象初始化来做到这一点，例如

```
Dim list2 = (From item in list1
             Select New ItemType With {.Property1 = item.Property1, .Property2 = item.Property2}.ToList() 
```

另一种方法是将 Copy 构造函数添加到 ItemType

```
Public Sub New(item as ItemType)
    Me.Property1 = item.Property1
    Me.Property2 = item.Property2
End Sub 
```

您的列表副本可以简化为

```
Dim list2 = (From item in list1
             Select New ItemType(item)}.ToList() 
```

请注意，如果您的 ItemType 的任何属性是引用，您还需要制作这些对象的副本。（这称为[深拷贝](http://en.wikipedia.org/wiki/Object_copy#Deep_copy)）

# iphone - 撤消核心数据托管对象

> ID：10745027
> 
> 赞同：6
> 
> 时间：2012-05-24T20:46:30.010
> 
> 标签：iphone, objective-c, ios, core-data

我有这个代码：

```
Store* store = [NSEntityDescription insertNewObjectForEntityForName:@"Store"];
store.name = @"My Company"
... 
```

现在商店是在上下文中管理的，并且会在保存上下文时保存，但是我有一个按钮，用户可以在其中取消收集数据的表单。如何从上下文中撤消或删除它？还是我想错了？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-24T20:58:54.957

Core Data[内置了对 undo 的支持](http://developer.apple.com/library/mac/documentation/cocoa/conceptual/coredata/Articles/cdUsingMOs.html#//apple_ref/doc/uid/TP40001803-207821-TPXREF148)`-undo`，因此您可以通过将消息发送到上下文来撤消单个更改：

```
[store.managedObjectContext undo]; 
```

它还支持`-redo`. 您可以使用以下方法撤消直到最近保存的所有更改`-rollback`：

```
[store.managedObjectContext rollback] 
```

如@melsam 的回答所示。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-24T22:14:14.657

如前所述，您可以使用撤消管理器。或者，您可以简单地使用单独的 ManagedObjectContext，并在其中进行所有更改。如果您决定保留它们，请保存上下文。如果没有，只需丢弃它。MOC 只是工作的便签本，在保存之前对底层数据库没有影响。

您不能真正“分离实体”，但可以导致托管对象变回故障，丢失任何尚未保存的更改。

```
[managedObjectContext refreshObject:object mergeChanges:NO]; 
```

从文档中截取...

> 如果 flag 为 NO，则对象将变为故障，并且任何未决更改都将丢失。该对象在再次访问之前一直是错误的，此时它的属性值将从存储或上次缓存状态重新加载。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-24T20:49:11.323

```
[store.managedObjectContext rollback]; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-12-19T20:20:03.930

`Undo`仅在我创建`undoManager`（Swift 5）时才有效：

```
managedObjectContext.undoManager = UndoManager() 
```

完成此配置后，您可以撤消最后一次更改：

```
managedObjectContext.undo() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-24T20:58:46.493

您还可以将用户的所有数据保存在一个数组中，当用户准备好时，您只需将数组保存到核心数据。

# ms-access - 如何在消息框中显示表单属性？

> ID：10745030
> 
> 赞同：2
> 
> 时间：2012-05-24T20:47:04.020
> 
> 标签：ms-access, vba

我有以下代码，它应该遍历项目中的所有表单，并给出一个包含每个表单设置的消息框。我知道循环是正确的，因为我在其他地方使用了循环并且我只是复制了它。为什么消息框是空白的？

```
 For Each frm In CurrentProject.AllForms
         DoCmd.OpenForm frm.Name, acDesign

        mess = "Form: " & frm.Name & vbCrLf & " Allow Addition: " & CStr(frm.AllowAdditions) & vbCrLf & "Allow Deletions: " & CStr(frm.AllowDeletions) & vbCrLf & "     Allow Edit: " & CStr(frm.AllowEdits)
        MsgBox (mess)
        DoCmd.Close acForm, frm.Name, acSaveYes

  Next frm
  Set frm = Nothing 
```

借助 Remou 的提示，我得到了以下工作：

```
 For Each frm In CurrentProject.AllForms
     DoCmd.OpenForm frm.Name, acDesign
    Set frm = Forms(frm.Name)
    mess = "Form: " & frm.Name & vbCrLf & " Allow Addition: " & CStr(frm.AllowAdditions) & vbCrLf & "Allow Deletions: " & CStr(frm.AllowDeletions) & vbCrLf & "     Allow Edit: " & CStr(frm.AllowEdits)
    MsgBox (mess)
        DoCmd.Close acForm, frm.Name, acSaveNo

  Next frm
  Set frm = Nothing 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T20:54:23.067

不打开表单就无法访问表单属性。您应该只将 Set 与对象一起使用，而不是与字符串一起使用。

请参阅[Access 2010：哪个表单控件触发宏？](https://stackoverflow.com/questions/10732748/access-2010-which-form-control-fires-a-macro/10733311#comment13943735_10733311)

```
For Each f In CurrentProject.AllForms
    DoCmd.OpenForm f.Name, acDesign

    Set frm = Forms(f.Name)
    mess = "Form: " & frm.Name & vbCrLf
    mess = mess & " Allow Addition: " & CStr(frm.AllowAdditions) & vbCrLf
    mess = mess & "Allow Deletions: " & CStr(frm.AllowDeletions) & vbCrLf
    mess = mess & "     Allow Edit: " & CStr(frm.AllowEdits)
    MsgBox mess

    DoCmd.Close acForm, f.Name, acSaveNo
Next 
```

# c - 如何使用 UDP_CORK 正确设置 UDP 套接字

> ID：10745036
> 
> 赞同：2
> 
> 时间：2012-05-24T20:47:37.490
> 
> 标签：c, sockets, network-programming, udp, setsockopt

我在 UDP 下创建了一个回显服务器，并且正在开发一个客户端，它将给定的文件拆分为数据包并将其传输到服务器，然后服务器返回数据包以由客户端重新组合。

发送单个数据包工作得很好。但是，我正在尝试使用 UDP_CORK 套接字选项在一个数据包中传输尽可能多的文件部分。我正在使用以下代码：

```
#define LINE_SIZE 80

...
// s = socket descriptor.
...

int one = 1;
int zero = 0;

setsockopt(s, IPPROTO_UDP, UDP_CORK, &one, sizeof(one));  // cork

/* Send to server, receive from server, write to new file. */

FILE *orig, *copy;
char line[LINE_SIZE];

if ((orig = fopen(input + 3, "rb")) == NULL) // original file
    print_error(input);

if ((copy = fopen(filename, "wb")) == NULL)  // copy of file
    print_error("fopen");

while (fread(line, sizeof(char), LINE_SIZE, orig) > 0) {
    if (sendto(s, line, LINE_SIZE, 0, (struct sockaddr *)&srv, len) == -1)
    print_error("sendto");
}

setsockopt(s, IPPROTO_UDP, UDP_CORK, &zero, sizeof(zero));  // uncork

if (recvfrom(s, line, LINE_SIZE, 0, (struct sockaddr *)&srv, &len) == -1)
    print_error("recvfrom");

fwrite(line, sizeof(char), LINE_SIZE, copy); 
```

服务器表明它只接收一个“正常大小”的数据包，而不是我想要的软木化数据包。因此它只发回这个正常的数据包，由客户端通过 recvfrom() 调用接收。

我不确定我是否正确设置了 UDP_CORK。第二个论点正确吗？我不熟悉第二个选项的真正含义，因为手册页并不完全清楚。我也可能误解了软木塞的工作原理。

需要注意的几点：

*   我认为自己是一名中级程序员，但我几乎没有网络编程经验。
*   我意识到 UDP 不是传输文件的最佳方式。这最终将适应我正在帮助开发的不同协议。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T21:36:24.210

文件有多大？您知道 UDP 数据报的大小限制为 64K，对吧？然后任何超过 1472 字节（1500 字节的可用以太网有效负载减去最少 20 字节的 IP 标头，最少 8 字节的 UDP 标头）被 IP 分段。

然后你永远不会检查`setsockopt(2)`. 你怎么知道它成功了？

然后`fread(3)`告诉你它读了多少，但你仍然尝试发送`LINE_SIZE`字节。这是错误的。

# bidirectional - 为什么插入符号在此双向文本中移动？

> ID：10745037
> 
> 赞同：0
> 
> 时间：2012-05-24T20:47:39.103
> 
> 标签：bidirectional, word-2010

考虑 MS Word 2010 中的以下双向文本，其中插入符号通过鼠标单击位于希伯来字母 dalet**左侧的右侧。**

![在此处输入图像描述](../Images/23ec307609a7a655330df263eb257f44.png)

如果我然后按 Delete，插入符号将移动到其新位置：

![在此处输入图像描述](../Images/0ecd0885310a75257cc4075ea5d27fec.png)

据我所知，在这种情况下插入符号不应该移动。有什么解释吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T21:30:04.457

插入符号“移动”从刚好在 dalet 之后（但在视觉上之前）到行尾之前。它们处于不同的视觉位置，但具有相同的逻辑位置。

我还比较了 Firefox 4（我碰巧很方便）和 Firefox 15（每晚）中的行为。Firefox 4 有一个错误，即按右箭头在希伯来语字符之间循环，但是在您的情况下按删除时它不会移动插入符号。Firefox 15 没有右箭头错误，但它表现出相同的删除“错误”。

# android - Android无法访问加速度计

> ID：10745039
> 
> 赞同：1
> 
> 时间：2012-05-24T20:47:52.943
> 
> 标签：android, accelerometer, android-logcat

在我的 android 应用程序中，它似乎不允许我使用加速度计。当我在声明中调用它时，应用程序崩溃了。似乎导致崩溃的声明是：

```
SensorManager sensorManager = (SensorManager)getSystemService(Context.SENSOR_SERVICE); 
```

应用程序很简单，只调用加速度计并在没有此语句时运行，上面的语句在 onCreate 方法之前调用，日志猫在下面

```
05-24 20:08:46.990: E/AndroidRuntime(1149): FATAL EXCEPTION: main
05-24 20:08:46.990: E/AndroidRuntime(1149): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.b00348312.workout/com.b00348312.workout.WorkoutAppActivity}: java.lang.IllegalStateException: System services not available to Activities before onCreate()
05-24 20:08:46.990: E/AndroidRuntime(1149):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2585)
05-24 20:08:46.990: E/AndroidRuntime(1149):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
05-24 20:08:46.990: E/AndroidRuntime(1149):     at android.app.ActivityThread.access$2300(ActivityThread.java:125)
05-24 20:08:46.990: E/AndroidRuntime(1149):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
05-24 20:08:46.990: E/AndroidRuntime(1149):     at android.os.Handler.dispatchMessage(Handler.java:99)
05-24 20:08:46.990: E/AndroidRuntime(1149):     at android.os.Looper.loop(Looper.java:123)
05-24 20:08:46.990: E/AndroidRuntime(1149):     at android.app.ActivityThread.main(ActivityThread.java:4627)
05-24 20:08:46.990: E/AndroidRuntime(1149):     at java.lang.reflect.Method.invokeNative(Native Method) 
05-24 20:08:46.990: E/AndroidRuntime(1149):     at java.lang.reflect.Method.invoke(Method.java:521)
05-24 20:08:46.990: E/AndroidRuntime(1149):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
05-24 20:08:46.990: E/AndroidRuntime(1149):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
05-24 20:08:46.990: E/AndroidRuntime(1149):     at dalvik.system.NativeStart.main(Native Method)
05-24 20:08:46.990: E/AndroidRuntime(1149): Caused by: java.lang.IllegalStateException: System services not available to Activities before onCreate()
05-24 20:08:46.990: E/AndroidRuntime(1149):     at android.app.Activity.getSystemService(Activity.java:3526)
05-24 20:08:46.990: E/AndroidRuntime(1149):     at com.b00348312.workout.WorkoutAppActivity.<init>(WorkoutAppActivity.java:25)   
05-24 20:08:46.990: E/AndroidRuntime(1149):     at java.lang.Class.newInstanceImpl(Native Method)
05-24 20:08:46.990: E/AndroidRuntime(1149):     at java.lang.Class.newInstance(Class.java:1429)
05-24 20:08:46.990: E/AndroidRuntime(1149):     at android.app.Instrumentation.newActivity(Instrumentation.java:1021) 
05-24 20:08:46.990: E/AndroidRuntime(1149):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2577)
05-24 20:08:46.990: E/AndroidRuntime(1149):     ... 11 more 
```

当这个语句在不同的程序中工作时，我无法从 logcat 中找出这个问题的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T20:58:27.297

这是双重否定？大声笑剪切调用系统服务的代码并粘贴到您的 onCreate

```
 public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

//PLACE YOUR ACCEL CODE IN HERE       

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T20:50:04.003

在调用 onCreate 之后，您必须获取 SensorManager。

“系统服务在 onCreate() 之前对活动不可用”

# ruby-on-rails - Rspec没有找到对对象的提交更改

> ID：10745044
> 
> 赞同：0
> 
> 时间：2012-05-24T20:48:19.587
> 
> 标签：ruby-on-rails, rspec

我是 rspec 和 ruby​​ 的新手...

我在 course_rspec.rb 之一中有以下代码

...它“启用课程后检查活动课程” do course = Course.create(:title => "Testing", :description => "Testing") course.enabled = true course.save

```
active_courses = Course.where(:enabled => true)
active_courses.length.should eql 1 
```

结尾 ...

我收到以下错误

1）启用课程失败/错误后对活动课程的课程检查：active_courses.length.should eql 1

```
 expected: 1
        got: 0

   (compared using eql?)
 # ./course_spec.rb:86:in `block (2 levels) in <top (required)>' 
```

为什么 Course.where 方法不返回任何对象？当我在 Rails 控制台中执行此操作时，它工作正常。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T21:33:52.213

您是在`test`模式下还是在`development`模式下运行 rails 控制台？请记住，用于测试和开发应用程序的 rails 使用不同的数据库。确保在测试之前准备好所有记录并将其存储在数据库中。为此，您可以使用固定装置或工厂（`factory_girl`例如）。

附言。相反`active_courses.length.should eql 1`，您可以使用`active_courses.should have(1).item`哪个更具可读性。

# arrays - 如何使用 VBScript 将数组添加到数组中

> ID：10745045
> 
> 赞同：1
> 
> 时间：2012-05-24T20:48:24.337
> 
> 标签：arrays, vbscript

更新：这是结果数据的样子：

```
arrComm rows 0-6
454-45-45   45345-3454   FIN  Elected   Finance Committee  Details  More Details
343-343-3   343-944244   COM  Appointed Comm Committee     Details  More Details

arrComm added row 7 that has array of all members of that committee
This below array is named newMembers and 1 array for each row is added to the 
arrComm with this code:  arrComm(j,7) = newMembers

454-45-45   John   S   Smith  Chair   2003   2005
454-45-45   Sara   T   Jones  VP      2012   2013
454-45-45   Tim    R   Jane   Pres    2011   2014 
```

我编写了代码来向 VBScript 中现有数组的每个“行”添加一个数组。我没有出错，但我不知道我是否做得正确。每当我尝试从放置新数组的列中访问数据时，我什么也得不到。有人可以告诉我在 Vbscript 中将数组添加到现有数组的正确语法吗？

现在，我正在遍历每一行并将我的数组添加到末尾。像这样：

* * *

```
ReDim Preserve arrComm(UBound(arrComm), 7)

'Loop through Committee Array and add Members Array 
Dim newMembers()

For j = 0 to UBound(arrComm)
'create a new array out of Members for each committee
 cmt_key = arrComm(j,0)

     'First find count of Members array that matches committee  
     y=0
     For s = 0 to UBound(arrMembers)
        If arrMembers(s,0) = cmt_key Then
        y=y+1
        End If  
     Next

     'Next build new array only with those members that match committee

     Redim newMembers(y,8)

     'Now loop through Original Members Array and add to New Members Array
     y=0
     For s = 0 to UBound(arrMembers)
        If arrMembers(s,0) = cmt_key Then
            newMembers(y,0) = arrMembers(s,0)
            newMembers(y,1) = arrMembers(s,1)
            newMembers(y,2) = arrMembers(s,2)
            newMembers(y,3) = arrMembers(s,3)
            newMembers(y,4) = arrMembers(s,4)
            newMembers(y,5) = arrMembers(s,5)
            newMembers(y,6) = arrMembers(s,6)
            newMembers(y,7) = arrMembers(s,7)
            newMembers(y,8) = arrMembers(s,8)
            y=y+1

        End If  
     Next

     'Now finally add newly created members array to Committee array

     arrComm(j,7) = newMembers(y,8)

Next 
```

* * *

更新：让我试着更好地解释我上面的代码。1\. ReDim Preserve arComm... 采用我现有的 7 列数组并添加第 8 列。UBound(arrComm) 确保将其设置为正确数量的现有行。

1.  接下来我创建一个名为 newMembers 的新数组

2.  然后我必须指定 newMembers 的长度，所以我循环遍历从 (arrMembers) 中拉出我的 newMembers 的数组，并从 arrMembers 中获取将放入 newMembers 的数量。(y)

3.  然后，一旦我有了这个计数，我用 (y) 和 9 列 Redim newMembers

4.  然后我通过 arrMembers 并将符合我的条件的金额提取到 newMembers

5.  然后我将新创建的名为 newMembers 的数组添加到 arrComm 数组的最后一列。

6.  然后我重新循环，转到 arrComm 数组的下一行并重新开始，创建另一个 newMembers 数组，这次不同数量的行，最后将它添加到 arrComm 数组的下一行。一遍又一遍，直到我为每一行添加一个新数组到 arrComm 的最后一列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T23:30:12.697

如果没有提供测试数据，很难进行故障排除，但是按照您所说的，您想要“向现有数组的每个“行”添加一个数组”，这不是我在您的代码中看到的情况。实际上，您将一个数组的*元素*添加为另一个数组的元素。如果你想添加*整个数组*，我想你会这样做，你会做类似的事情：

```
arrComm(j,7) = newMembers 
```

因为你想要那里的所有成员，对吧，不只是最后一个？（更不用说你已经在循环中增加了 y，所以事实上你甚至没有得到最后一个。）然后，当然，在你的输出代码中，你必须询问 newMembers 中的 ubounds，因为它是动态创建的。

这是复杂性几乎要求您将代码分成带有虚拟数据的独立可运行页面以进行测试的情况之一，尤其是为了帮助我们发现问题。

添加示例代码以转储结果数组：

```
dim tempMembers
' pick a Members element for testing
tempMembers = arrComm(0,7)
' dump the array
dim a,b
for a = 0 to ubound(tempMembers,1)
    for b = 0 to ubound(tempMembers,2)
        response.write (tempMembers(a,b) & ",")
    next
    response.write "<br />"
next 
```

我们真正需要的是一些样本入站数据。我能够使用以下代码运行代码，但显然它不能反映现实：

```
dim arrMembers()
dim arrComm()
ReDim Preserve arrComm (1,1)
ReDim Preserve arrMembers (1,8)
arrComm (0,0) = "target"
arrMembers (0,0) = "target" 
```

你能把它充实起来以反映真实数据的样子吗？填充所有尺寸的一两行就足够了。

基于您的一些测试数据的完整工作示例：

```
dim arrMembers()
dim arrComm()
ReDim Preserve arrComm (2,7)
ReDim Preserve arrMembers (2,8)
arrComm (0,0) = "454-45-45"
arrComm (0,1) = "45345-3454"
arrComm (0,2) = "FIN"
arrComm (0,3) = "Elected"
arrComm (0,4) = "Finance Committee"
arrComm (0,5) = "Details"
arrComm (0,6) = "More Details"
arrComm (1,0) = "343-343-3"
arrComm (1,1) = "343-944244"
arrComm (1,2) = "COM"
arrComm (1,3) = "Appointed"
arrComm (1,4) = "Comm Committee"
arrComm (1,5) = "Details"
arrComm (1,6) = "More Details"
'
arrMembers (0,0) = "454-45-45"
arrMembers (0,1) = "John"
arrMembers (0,2) = "S"
arrMembers (0,3) = "Smith"
arrMembers (0,4) = "Chair"
arrMembers (0,5) = "2003"
arrMembers (0,6) = "2005"
'
arrMembers (1,0) = "454-45-45"
arrMembers (1,1) = "Sara"
arrMembers (1,2) = "T"
arrMembers (1,3) = "Jones"
arrMembers (1,4) = "Chair"
arrMembers (1,5) = "2012"
arrMembers (1,6) = "2013"
' non-match member
arrMembers (2,0) = "343-343-3"
arrMembers (2,1) = "Joe"
arrMembers (2,2) = "T"
arrMembers (2,3) = "Schmoe"
arrMembers (2,4) = "Chair"
arrMembers (2,5) = "2012"
arrMembers (2,6) = "2013"

ReDim Preserve arrComm(UBound(arrComm), 7)

'Loop through Committee Array and add Members Array 
Dim newMembers()

For j = 0 to UBound(arrComm)
'create a new array out of Members for each committee
 cmt_key = arrComm(j,0)

     'First find count of Members array that matches committee  
     y=0
     For s = 0 to UBound(arrMembers)
        If arrMembers(s,0) = cmt_key Then
        y=y+1
        End If  
     Next

     'Next build new array only with those members that match committee

     Redim newMembers(y,8)

     'Now loop through Original Members Array and add to New Members Array
     y=0
     For s = 0 to UBound(arrMembers)
        If arrMembers(s,0) = cmt_key Then
            newMembers(y,0) = arrMembers(s,0)
            newMembers(y,1) = arrMembers(s,1)
            newMembers(y,2) = arrMembers(s,2)
            newMembers(y,3) = arrMembers(s,3)
            newMembers(y,4) = arrMembers(s,4)
            newMembers(y,5) = arrMembers(s,5)
            newMembers(y,6) = arrMembers(s,6)
            newMembers(y,7) = arrMembers(s,7)
            newMembers(y,8) = arrMembers(s,8)
            y=y+1

        End If  
     Next

     'Now finally add newly created members array to Committee array

     arrComm(j,7) = newMembers

Next
'response.write (arrComm(0,7)(0,0))
dim tempMembers
' pick a Members element for testing
tempMembers = arrComm(0,7)
response.write (ubound(tempMembers,1) & " | " & ubound(tempMembers,2) & "<br />")
' dump the array
dim a,b
for a = 0 to ubound(tempMembers,1)-1
    for b = 0 to ubound(tempMembers,2)-1
        response.write (tempMembers(a,b) & ",")
    next
    response.write "<br />"
next 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T21:14:59.227

我不明白你的代码，但如果你想增长一个数组，你必须使用 ReDim **Preserve**来保留以前的内容，而 ReDim Preserve 只允许增长最后一个维度。

WRT评论：

这：

```
Option Explicit

Dim i
For i = 0 To 3
    ReDim Preserve a(0, i)
    WScript.Echo i, "growing to", UBound(a, 2)
    a(0, i) = Array(i, "a", "b")
Next
WScript.Echo "--------"
For i = 0 To UBound(a, 2)
    WScript.Echo i, "the array", Join(a(0, i))
Next 
```

输出：

```
cscript 00.vbs
0 growing to 0
1 growing to 1
2 growing to 2
3 growing to 3
--------
0 the array 0 a b
1 the array 1 a b
2 the array 2 a b
3 the array 3 a b 
```

演示如何增长一个数组并将另一个数组存储到增长的（最后一个！）维度。

**请标出两者的区别**

```
ReDim Preserve arrComm(UBound(arrComm), 7) 
```

和

```
ReDim Preserve a(0, i) 
```

# forms - symfony2 多对多实体形式

> ID：10745049
> 
> 赞同：1
> 
> 时间：2012-05-24T20:48:37.410
> 
> 标签：forms, authentication, symfony, many-to-many

我有两个实体`User` `Role`。两者都在 Symfony2 中用于身份验证。身份验证过程需要在返回数组的 User 类中具有方法“getRoles”。另一方面，表单构建器需要以集合形式给出的角色。我如何强制表单生成器使用特定的 getter 来获取角色集合？

```
 class UserType extends AbstractType{
 //...
 ->add('roles', 'entity', array( 'class' => 'MyBundle:Role',
                                    'property' => 'name',
                                    'required' => false, 
                                    'multiple' => true,
                                    'expanded' => true,
                                    );

 //...
  }

 class User implements UserInterface {
 //...
    public function getRoles() {
    return $this->roles->toArray();  //This needs authentication mechanism
   }

 public function getRolesCollection() {
    return $this->roles;            //This needs form builder.
}
 //...
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T23:12:17.997

也许您可以尝试将其全部反转：

```
class UserType extends AbstractType{
 //...
 ->add('rolesCollection', 'entity', array( 'class' => 'MyBundle:Role',
                                    'property' => 'name',
                                    'required' => false, 
                                    'multiple' => true,
                                    'expanded' => true,
                                    );

 //...
  }

 class User implements UserInterface {
  protected $rolesCollection
 //...
    public function getRoles() {
    return $this->rolesCollection->toArray();  //This needs authentication mechanism
   }

 public function getRolesCollection() {
    return $this->rolesCollection;            //This needs form builder.
}
 //...
 } 
```

# vb.net - Asp.net MVC3 合适的模型通过VB.net

> ID：10745050
> 
> 赞同：3
> 
> 时间：2012-05-24T20:48:43.573
> 
> 标签：vb.net, asp.net-mvc-3, html-helper

我对 MVC 很陌生，虽然我一直在尝试遵循最佳实践，但我相信我可能不了解其中任何一个的某些基础知识

-一个。适当地使用模型和视图模型 -b. 将模型传递给控制器​​以进行验证。

我的程序的一般目的是从存储过程列表中选择一个存储过程，创建一个表单，用户可以在其中填写所有适当的输入变量，然后执行该存储过程。该工具适用于非技术人员，因此我最终将不得不进行大量输入验证。

因此，我有四个模型：脚本模型、参数模型、参数枚举模型和查询模型，以及两个视图模型：生成要填写的表单的 paramviewmodel，以及创建填充可能脚本的列表框的 scriptviewmodel选择。我正在使用预先编写的数据库系统在控制器的 init 方法中填写我的视图模型（我不确定这样做是否正确？）。

视图模型如下：

```
Imports System
Imports System.Collections.Generic

Public Class ScriptViewModel

    Public Property SelectedItemId As Integer
    Public Property Scripts As DataTable
    Public Property ScriptList As List(Of ScriptModel)

    Sub InitScriptData()
        ' Fills the data from an outside database.  
        ' And fills out the properties above.  Does nothing else
    End Sub

End Class 
```

另一个

```
Imports System
Imports System.Collections.Generic

Public Class ParamViewModel

    Public Property Params As DataTable
    Public Property ParamEnums As DataTable
    Public Property ParameterList As List(Of ParameterModel)
    Public Property ParamEnumList As List(Of ParamEnumModel)
    Public Property ParamEnumDictionary As Dictionary(Of Integer, List(Of ParamEnumModel))

    Sub InitParamData(ByVal Script_Index As String)
        ' Uses an outside database
        ' Fills out all the above variables    
    End Sub
End Class 
```

它们的关联视图如下所示：

脚本：

```
@ModelType Scripter.ScriptViewModel
@Html.ValidationSummary("Please correct the errors and try again.")
@Using (Html.BeginForm("ParamChoice", "Parameter", FormMethod.Post))
    @<div>
    @Html.ListBox("ScriptListBox", New SelectList(Model.ScriptList, "Script_Index", "CustomerScriptName"), New With {.class = "LargeListBox", .title = "LargeListBox"})
    </div>
    @<input type="submit" value="Execute Script" />
End Using 
```

参数选择：

```
@ModelType Scripter.ParamViewModel
@Code
    ViewData("Title") = "ParamChoice"
End Code

<h2>ParamChoice</h2>

<!-- Helper Method defined in App_Code that creates a form with a dynamic number of fields of appropriate input types -->
@HelperMethods.CreateVariableInputParameterFields(Model.ParameterList, Model.ParamEnumDictionary) 
```

说助手（这是我主要的困惑所在）（注意，继承助手页面是指允许我在 app_code 中的@helper 中使用 htmlhelpers 的类）

```
@inherits Scripter.HelperPage

@Imports System.Web.Mvc
@Imports System.Web.Mvc.Html

@helper CreateVariableInputParameterFields(ByVal ParamList As List(Of Scripter.ParameterModel), ByVal EnumDictionary As Dictionary(Of Integer, List(Of Scripter.ParamEnumModel)))
    Dim item As Scripter.ParameterModel

    @Html.ValidationSummary("Please correct the errors and try again.")

    Using (Html.BeginForm("QueryServer", "Query", FormMethod.Post))

    Dim iterator As Integer = 0
    Dim ParamValue(ParamList.Count) As String
    Dim ParamName(ParamList.Count) As String
    Dim ParamType(ParamList.Count) As String

    For Each item In ParamList
        If (String.Compare(item.ParamType, "Int") = 0 Or String.Compare(item.ParamType, "String") = 0) Then
            @<br />
            @Html.Label(item.ParamName)
            @Html.TextBox("ParamValue", Nothing, New With {.class = "text-box", .id = CStr(iterator)})
            @Html.Hidden("ParamName", item.ParamName, New With {.id = CStr(iterator)})
            @Html.Hidden("ParamType", item.ParamType, New With {.id = CStr(iterator)})
            iterator += 1
        ElseIf (String.Compare(item.ParamType.ToString, "Enum") = 0) Then
            Dim tlist = EnumDictionary.Item(item.Param_Index)
            @<br />
            @Html.Label("label", item.ParamName, New With {.class = "display-label"})
            @Html.DropDownList("ParamValue", New SelectList(tlist, "EnumValue", "EnumValue"), New With {.id = CStr(iterator)})
            @Html.Hidden("ParamName", item.ParamName, New With {.id = CStr(iterator)})
            @Html.Hidden("ParamType", item.ParamType, New With {.id = CStr(iterator)})
            iterator += 1
        Else
            @<br />
            @Html.Label("label", item.ParamName, New With {.class = "display-label"})
            @Html.CheckBox("ParamValue", Nothing, New With {.id = CStr(iterator)})
            @Html.Hidden("ParamName", item.ParamName, New With {.id = CStr(iterator)})
            @Html.Hidden("ParamType", item.ParamType, New With {.id = CStr(iterator)})
            iterator += 1
        End If
    Next

    @Html.Hidden("Script_Index", ParamList.Item(0).Script_Index)

    @<div>
        <input type="submit" value="Query Server"/>
    </div>
    Html.EndForm()
End Using
End helper 
```

脚本控制器作为我一直在做的一个例子：

```
Namespace Scripter
    Public Class ScriptController
        Inherits System.Web.Mvc.Controller

        Function Index() As ActionResult
            Dim Test As New ScriptViewModel
            Test.InitScriptData()

            Return View(Test)
        End Function

    End Class
End Namespace 
```

对不起，上面的一切都太丑了哈哈，我正在努力解决这个功能。另外，我认为这可能是视图中的代码过多，即使其中大部分是显示代码。

无论如何，我有两个主要问题。一，在我的控制器中创建模型，在其上调用 init 方法，然后将其传递给视图在 mvc 上下文中是否有意义（如果没有，我将如何进行？）。二，如果我想对我在 htmlhelper 中输出的表单执行验证，但我想使用我的查询模型验证（而不是我的 paramviewmodel），我该怎么做？我见过的大多数示例都涉及接收适当模型变量的控制器，并且绑定是在控制器本身之外执行的。然后他们只检查模型状态。有什么办法可以在这里做类似的事情吗？

请随时在这里击落我的代码。我对此非常陌生（vb.net 和 mvc），还没有机会拿起一本书。我一直在拼凑在线资源，但我确信我做错了很多事情。

编辑：有什么办法可以使语法突出显示不那么糟糕？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T21:17:47.490

通常，视图模型不打算具有将从数据库中获取数据的 Init 方法。在大多数情况下，视图模型是一个标准的 POCO 类，其中包含将保存特定视图需要使用的数据的属性。

另一方面，您可以拥有一个或多个域模型，负责从各种数据源中检索信息。

控制器操作将负责查询您的域模型及其各种方法，以便最终构建一个特定的视图模型，该模型将被处理到视图以进行显示。视图模型可以表示从多个域模型和各种数据源聚合的数据。

所以基本上这里是标准 GET 控制器操作的伪代码：

```
Function Index() As ActionResult
    Dim model1 As DomainModel1 = ... fetch the domain model from somewhere
    Dim model2 As DomainModel2 = ... fetch the domain model from somewhere

    Dim vm As ViewModel = ... map all the domain models to a single view model specifically designed for the view

    Return View(vm)
End Function 
```

在这里，域模型负责从您正在使用的各种数据源（数据库、文件、远程 Web 服务......）中获取数据。视图模型只是这些数据以适合视图的方式的投影。

# apache - .htaccess mod_rewrite 与动态文件夹

> ID：10745053
> 
> 赞同：1
> 
> 时间：2012-05-24T20:48:51.187
> 
> 标签：apache, mod-rewrite

我已经尝试了一段时间，只是无法开始工作：

```
RewriteRule ^([^])/([^])\.php$ /$1.php [L,QSA] 
```

我有一个网站：www.mysite.com/dummyfolder/file.php

我希望它实际加载：

www.mysite.com/file.php

仅供参考 - dummyfolder 是动态的，因此会发生变化。

更复杂的部分是我希望能够在某些文件夹上忽略它，例如能够访问：www.mysite.com/acutalfolder/file.php。acutalfolder 存在且不更改其名称的位置。

非常感谢 - 它真的让我陷入困境，无法弄清楚。

**Ansari，感谢您的回答和解决，但是我需要更正我的实际文件夹声明：**

我的实际文件夹位于此处：

```
www.mysite.com/acutalfolder/file.php 
```

但我想像这样出现在 URL 中：

```
www.mysite.com/dummyfolder/acutalfolder/file.php 
```

如果我使用它（如果我使用的是实际文件夹，请尝试忽略）：

```
RewriteRule ^([^/]+)(!^actualfolder$)/([^/]+)\.php$ /$2.php [L,QSA] 
```

转到实际文件夹地址可以正常工作，但是原始的重写页面不再起作用。有什么想法我打错了吗？

**更新**在安萨里的帮助下。现在可以很好地使用以下代码：

```
RewriteCond %{REQUEST_URI} ^/([^/]+)/(actualfolder/.*\.php)$
RewriteCond %{DOCUMENT_ROOT}/%2 -f
RewriteRule .* %2 [L,QSA]

RewriteCond %{REQUEST_URI} ^/(?!actualfolder)([^/]+)/(.*\.php)$
RewriteCond %{DOCUMENT_ROOT}/%2 -f
RewriteRule .* %2 [L,QSA] 
```

非常感谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T20:59:30.323

尝试这个：

```
RewriteRule ^([^/]+)/([^/]+)\.php$ /$2.php [L,QSA] 
```

至于实际文件夹何时存在，您无需为此做任何事情，除非您在实际文件夹中的另一个 .htaccess 文件中进行一些重写。

**OP 重新提出问题后进行**编辑：****

 **```
RewriteCond %{REQUEST_URI} ^/([^/]+)/(actualfolder/.*\.php)$
RewriteCond %{DOCUMENT_ROOT}/%2 -f
RewriteRule .* %2 [L,QSA]

RewriteCond %{REQUEST_URI} ^/([^/]+)/(.*\.php)$
RewriteCond %{DOCUMENT_ROOT}/%2 -f
RewriteRule .* %2 [L,QSA] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T09:31:47.777

**更新**在安萨里的帮助下。现在可以很好地使用以下代码：

```
RewriteCond %{REQUEST_URI} ^/([^/]+)/(actualfolder/.*\.php)$
RewriteCond %{DOCUMENT_ROOT}/%2 -f
RewriteRule .* %2 [L,QSA]

RewriteCond %{REQUEST_URI} ^/(?!actualfolder)([^/]+)/(.*\.php)$
RewriteCond %{DOCUMENT_ROOT}/%2 -f
RewriteRule .* %2 [L,QSA] 
```

非常感谢...**

# php - 使用 PHP 上传和显示时扭曲和不扭曲图像

> ID：10745054
> 
> 赞同：3
> 
> 时间：2012-05-24T20:48:52.293
> 
> 标签：php, codeigniter, image-uploading, distortion

我正在使用 PHP 并使用 Codeigniter 框架。有没有办法，在服务器上上传和保存图像时，我可以扭曲它并在网页上显示它时不扭曲？

我想要的是，如果有人拿到了他们看不到里面有什么的图像。这是为了额外的安全级别。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T21:08:39.700

您可以在上传图像后对其进行加密，并在用户请求它们时再次对其进行解密。如果您提供大量图像，这将是 CPU 密集型的，但如果您想确保您的图像不能被可能已经访问您服务器硬盘的第三方读取，那么加密是要走的路。

当然，如果这是您想要防止的，您不应该将解密密钥存储在您的服务器上！所以你需要实现某种公私钥系统，用户自己持有他们图像的解密密钥。

为了获得最大的安全性，您还可以考虑使用 SSL 连接进行上传和下载。

# jquery - 是否可以动态生成 jQuery Tools 工具提示元素？

> ID：10745058
> 
> 赞同：0
> 
> 时间：2012-05-24T20:49:00.727
> 
> 标签：jquery, tooltip, jquery-tools

根据 jQuery Tools[文档](http://jquerytools.org/documentation/tooltip/index.html)，tooltip 元素必须紧跟在 HTML 中的触发器之后。但是，我需要将工具提示事件应用于动态生成的项目列表。由于我事先不知道项目的数量并且每个项目的工具提示内容是唯一的，因此我需要动态生成工具提示元素（来自 JavaScript）。因此，我想知道是否有一种方法可以使用 jQuery Tools 工具提示，而无需在触发器附近显式编码工具提示元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T20:56:07.267

您可以使用委托事件对其进行初始化：

```
$("#content").delegate(".tooltop:not(.jqtooltip)","mouseover",function(){
    $(this).addClass("jqtooltip").tooltip(...);
}) 
```

当然假设 #content 是所有动态工具提示的祖先。

# epub - 我们的 EPUB 文件如何在不同设备之间呈现相似的效果？

> ID：10745063
> 
> 赞同：1
> 
> 时间：2012-05-24T20:49:24.243
> 
> 标签：epub, device

我们很快将制作 EPUB 文件以分发文化和科学论文。我们希望它们在不同设备上呈现类似的效果，但我们担心它会类似于几年前的浏览器（见鬼）。创建验证 EPUB 文件是否足以确保跨设备的渲染相似？在这方面该做什么和不该做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T09:29:49.997

是的，就像几年前的浏览器一样。

ePub 2，只要您根本不做任何特别的事情，您就可以在各种设备上保持一致。

ePub 3——嗯，目前支持它的设备（iBooks、Kindle Fire（有点但不是真的）、Nook 和其他几个）做的事情完全不同。部分原因是 ePub 3 很大程度上是建立在 HTML5 的基础上的，目前 HTML5 在浏览器中并没有完全标准化。

对您而言，问题很可能是您想要制作 ePub 3，因为它支持 MathML，尽管这取决于您正在制作的科学论文的类型。

[Liz Castro](http://www.pigsgourdsandwikis.com)今年早些时候在[O'Reilly 的变革工具会议上](http://toc.oreilly.com)做了一个关于*[ePub](http://www.toccon.com/toc2012/public/schedule/detail/22073)*的演讲（请注意此页面上链接的 PDF；我将在下面列出很多示例）。我对各种读者支持的内容的简要说明是：

大家支持：

*   粗体和斜体

*   字体大小

*   文本缩进

*   上边距和下边距

*   图片

*   注意事项：NOOK 用自己的（不是发布者的默认值）覆盖默认值，并且粗体仅显示在某些用户选择的字体中

最支持：

*   字体系列

*   小帽子

*   领导

*   左右边距

*   浮动和宽度

*   文本换行

*   边框、背景

*   颜色

一旦你开始谈论音频/视频覆盖、自由分页符、首字下沉和其他简洁的东西，你就必须开始进行媒体查询，或者决定针对特定平台而将其他平台抛在后面。例如，此时您可能只选择 Kindle Fire 和 iBooks，而将其他人排除在外，但这将是您做出的商业决策。

# vb.net - VB.net itextsharp 附件

> ID：10745065
> 
> 赞同：1
> 
> 时间：2012-05-24T20:49:30.073
> 
> 标签：vb.net, itextsharp

我正在尝试使用 itextsharp 发送 PDF 文件，电子邮件发送正常但没有 pdf 附件可以告诉我我的代码有什么问题吗？
这是我的代码：

```
Dim pdfFile As MemoryStream = New MemoryStream()
            Dim d As Document = New Document(PageSize.A4, 60, 60, 40, 40)
            Dim w As PdfWriter = PdfWriter.GetInstance(d, pdfFile)
            w.Open()
            w.Add(New Paragraph("do foo something "))

            Dim message As New MailMessage()
            message.From = New MailAddress("******")
            message.To.Add(New MailAddress("***************"))
            message.Subject = "new image "
            message.Body = "this is the apak chart img"
            Dim data As New Attachment(pdfFile, New System.Net.Mime.ContentType("application/pdf"))
            message.Attachments.Add(data)
            Dim client As New SmtpClient()
            client.Host = "smtp.gmail.com"
            client.Credentials = New NetworkCredential("*****", "*******")
            client.EnableSsl = True
            client.Port = 587
            client.Send(message) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T21:46:37.873

尝试刷新 writer 并倒带流：

```
Dim pdfFile As MemoryStream = New MemoryStream()
Dim d As Document = New Document(PageSize.A4, 60, 60, 40, 40)
Dim w As PdfWriter = PdfWriter.GetInstance(d, pdfFile)
w.Open()
w.Add(New Paragraph("do foo something "))

w.CloseStream = false;
d.Close();
pdfFile.Position = 0; 
```

改编自：[iTextSharp - 在电子邮件附件中发送内存中的 pdf](https://stackoverflow.com/questions/1196059/itextsharp-sending-in-memory-pdf-in-an-email-attachment)

# android - 扩展 xml 布局文件时出错

> ID：10745068
> 
> 赞同：0
> 
> 时间：2012-05-24T20:49:34.967
> 
> 标签：android, layout

我是android编程的新手...所以请耐心等待..

我正在尝试将自定义视图（ArticleView）加载到活动中，其中我的自定义视图定义为活动类的子类。我为包含自定义视图的活动创建了以下 xml 布局文件：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/MainLayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/ArticleLayout"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <aarddict.android.ArticleView // here's the line # 14
            android:id="@+id/ArticleView"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/ButtonLayout"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_alignParentRight="true"
        android:layout_marginBottom="5dp"
        android:layout_marginRight="5dp"
        android:gravity="bottom" >

        <Button
            android:id="@+id/NextButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:drawableRight="@drawable/ic_next"
            android:visibility="gone" />
    </LinearLayout>

</RelativeLayout> 
```

发生的事情是我不断收到运行时错误（应用程序死掉），查看我得到的 LogCat：

```
 05-24 23:41:06.685: E/AndroidRuntime(600): java.lang.RuntimeException: Unable to start activity ComponentInfo{aarddict.alidev.android/aarddict.alidev.android.ArticleViewActivity}: android.view.InflateException: Binary XML file line #14: Error inflating class aarddict.android.ArticleView
05-24 23:41:06.685: E/AndroidRuntime(600):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
05-24 23:41:06.685: E/AndroidRuntime(600):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
05-24 23:41:06.685: E/AndroidRuntime(600):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
05-24 23:41:06.685: E/AndroidRuntime(600):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
05-24 23:41:06.685: E/AndroidRuntime(600):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-24 23:41:06.685: E/AndroidRuntime(600):  at android.os.Looper.loop(Looper.java:137)
05-24 23:41:06.685: E/AndroidRuntime(600):  at android.app.ActivityThread.main(ActivityThread.java:4424)
05-24 23:41:06.685: E/AndroidRuntime(600):  at java.lang.reflect.Method.invokeNative(Native Method) 
```

代码：

```
interface ScrollListener {
    void onScroll(int l, int t, int oldl, int oldt);
}

private ScrollListener scrollListener;

public ArticleView(Context context) {
    super(context);
}

public ArticleView(Context context, AttributeSet attrs) {
    super(context, attrs);
}

public ArticleView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
}

@Override
protected void onScrollChanged(int l, int t, int oldl, int oldt) {
    super.onScrollChanged(l, t, oldl, oldt);
    if (scrollListener != null) {
        scrollListener.onScroll(l, t, oldl, oldt);          
    }
}

public void setOnScrollListener(ScrollListener l) {
    this.scrollListener = l;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T20:56:16.470

如果您要创建一个您想要的自定义视图或其中一个子视图（// ） ，则您不能`Activity`在其中添加一个`Activity``extend View``LinearLayout``RelativeLayout``TextView`

[http://developer.android.com/guide/topics/ui/custom-components.html](http://developer.android.com/guide/topics/ui/custom-components.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-03T06:47:09.530

正确答案是错误的。您可以在项目上定义不同的活动。错误很简单
aarddict.android.ArticleView must be yourpackagename.ArticleView

# python - 以编程方式在 matplotlib 中增长一个图形

> ID：10745071
> 
> 赞同：6
> 
> 时间：2012-05-24T20:49:47.910
> 
> 标签：python, matplotlib

![插图](../Images/393df9d365795b0d077129bf393381c6.png)

如何在 matplotlib 中增加图形的大小，以容纳可变数量的子图，同时保持高度不变？

我正在绘制大量数字，每个数字都包含一个主子图（绿色），它应该覆盖图像高度的 90%。除此之外，我添加了可变数量的注释子图（橙色），每个子图应占据 10% 的高度。换句话说，具有一个注释的图形的基本情况将导致高度为 100% 的图形，而具有 5 个注释的图形的总高度为 140%

一个允许我绘制主图然后在添加每个子图时增大图形的命令将是理想的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T13:08:25.410

我不认为这是一个自动选项。我可能是错的。有[`figure.set_figheight`](http://matplotlib.sourceforge.net/api/figure_api.html#matplotlib.figure.Figure.set_figheight)以英寸为单位调整大小的。问题是轴是相对于图形尺寸定义的，因此在调整大小之前，图形上的任何子图都会被缩放以填充额外的 40% 空间。

您必须编写一个例程来调整图形的高度和比例并替换图形中的任何内容。并非不可能，但我再次认为此功能尚不存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T13:30:48.800

```
br@ymir:~/temp$ python
Python 2.6.5 (r265:79063, Apr 16 2010, 13:57:41) 
[GCC 4.4.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import matplotlib.pyplot as plt
>>> fig=plt.figure()
>>> fig.get_size_inches()
array([ 8.,  6.])
>>> fig.set_size_inches([8.,12.])
>>> ax=fig.add_subplot(111)
>>> ax.plot([1,1,2],[3,4,5],'ro-')
[<matplotlib.lines.Line2D object at 0x2428590>]
>>> ax1 = fig.add_subplot(212)
>>> ax1.plot([2,3,4],[8,9,11],'bs-')
[<matplotlib.lines.Line2D object at 0x2461450>]
>>> fig.subplots_adjust() 
```

生产 ![在此处输入图像描述](../Images/7474c9415fea6456dafe8c1a2e570703.png)

您可以轻松地对其进行进一步微调。

# php - 调用多个存储过程时出现 PHP MYSQL 错误

> ID：10745075
> 
> 赞同：7
> 
> 时间：2012-05-24T20:50:05.737
> 
> 标签：php, stored-procedures, mysqli

当我在一个页面中多次调用一个过程时，我很难调用和显示内容。我正在尝试显示来自 MYSQL 的两个不同 SP 调用的两个单独的记录集。我可以显示第一个电话，但第二个电话失败。我不确定我做错了什么，但也许有人可以帮忙？

当我调用第二个程序时，我不断收到错误消息：

```
Error calling SPCommands out of sync; you can't run this command now 
```

我在windows上运行

下面的代码... PHP

```
// First call to SP
$page = 2;
$section = 1;

include("DatabaseConnection.php"); //general connection - works fine

$sql = 'CALL GetPageContent("'.$page.'", "'.$section.'")';

$result = mysqli_query($conn, $sql) or die('Error calling SP' .mysqli_error($conn));

while($row=mysqli_fetch_assoc($result))
{
   // DO STUFF< REMOVED TO MAKE READING CLEARER
}

mysqli_free_result($result);

//SECOND CALL BELOW

$section = 2; // change parameter for different results

$sql = 'CALL GetPageContent("'.$page.'", "'.$section.'")';

$result = mysqli_query($conn, $sql) or die('Error calling SP' .mysqli_error($conn));

while($row=mysql_fetch_assoc($result))
{
   // DO STUFF< REMOVED TO MAKE READING CLEARER
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-24T21:22:16.943

要解决此问题，请记住`next_result()`在每次存储过程调用后调用 mysqli 对象上的函数。请参见下面的示例：

```
<?php
// New Connection
$db = new mysqli('localhost','user','pass','database');

// Check for errors
if(mysqli_connect_errno()){
 echo mysqli_connect_error();
}

// 1st Query
$result = $db->query("call getUsers()");
if($result){
     // Cycle through results
    while ($row = $result->fetch_object()){
        $user_arr[] = $row;
    }
    // Free result set
    $result->close();
    $db->next_result();
}

// 2nd Query
$result = $db->query("call getGroups()");
if($result){
     // Cycle through results
    while ($row = $result->fetch_object()){
        $group_arr[] = $row;
    }
     // Free result set
     $result->close();
     $db->next_result();
}
else echo($db->error);

// Close connection
$db->close();
?> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-04-25T11:51:04.300

如果您在单个脚本页面上调用多个过程，则应`mysqli_next_result($connection_link)`在调用另一个过程之前调用。考虑下面的示例代码块：

```
<?php
    $data = new \stdClass();
    require('./controller/dbController.php');

    $query = 'CALL getActiveProductCount()';
    $result = mysqli_query($con, $query);
    $result = mysqli_fetch_assoc($result);
    $data->active_product = $result['count'];
    mysqli_next_result($con);  // required to perform before calling the procedure again

    $query = 'CALL getPurchasedProductCount()';
    $result = mysqli_query($con, $query);
    $result = mysqli_fetch_assoc($result);
    $data->purchased = $result['count'];
    mysqli_next_result($con); 
```

# objective-c - 传递 NSAlert Sheet 中的 NSComboBox 值

> ID：10745076
> 
> 赞同：1
> 
> 时间：2012-05-24T20:50:23.103
> 
> 标签：objective-c, macos, cocoa, combobox, nsalert

我有一个 NSAlert 表，里面有一个 NSComboBox。当用户按下 NSAlert 的按钮时，如何传递组合框值？
代码：

```
NSComboBox* comboBox = [[NSComboBox alloc] initWithFrame:NSMakeRect(0, 0, 150, 26)];
        [comboBox setTitleWithMnemonic:@"2"];

        for (int i=2; i<[array count]+1; i++){
            [comboBox addItemWithObjectValue:[NSString stringWithFormat:@"%i", i]];
        }

        [comboBox setEditable:NO];

        NSAlert *alert = [[NSAlert alloc] init];
        [alert addButtonWithTitle:@"Okay"];
        [alert addButtonWithTitle:@"Cancel"];
        [alert setMessageText:@"Choose a number"];
        [alert setAccessoryView:comboBox];
        [alert beginSheetModalForWindow:_window modalDelegate:self didEndSelector:@selector(alertToChooseX:returnCode:contextInfo:) contextInfo:nil];

- (void)alertToChooseX:(NSAlert *)alert returnCode:(NSInteger)returnCode contextInfo:(void *)contextInfo {
    if (returnCode == NSAlertFirstButtonReturn) {
        NSLog(@"Pressed Okay");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T21:22:58.340

在您的头文件中描述*组合框*，并在按下按钮“*确定*”后将其值设为：

在**.h**

```
NSComboBox *comboBox; 
```

**米**_

 **```
comboBox = [[NSComboBox alloc] initWithFrame:NSMakeRect(0, 0, 150, 26)];
[comboBox setTitleWithMnemonic:@"2"];
.... // Your all code goes here 
```

```
- (void)alertToChooseX:(NSAlert *)alert returnCode:(NSInteger)returnCode contextInfo:(void *)contextInfo {
    if (returnCode == NSAlertFirstButtonReturn) {
        NSLog(@"Pressed Okay");

        NSLog(@"Selected ComboBox's String Value: %@", [comboBox stringValue]);
        NSLog(@"Selected ComboBox's Object Value: %@", [comboBox objectValueOfSelectedItem]);
        NSLog(@"Selected ComboBox's Item Index: %ld", [comboBox indexOfSelectedItem]);
    }
} 
```

**注意：**不要忘记释放组合*框*，因为它正在分配内存。**

# eclipse - Eclipse 插件中的提示文件搜索

> ID：10745077
> 
> 赞同：0
> 
> 时间：2012-05-24T20:50:29.393
> 
> 标签：eclipse, file, search, plugins

我正在为 Eclipse 编写一个插件，它从当前打开的项目和当前选择中收集一些数据，我想让用户通过双击显示的一些数据来打开 Eclipse 附带的文件搜索窗口。

理想情况下，“包含文本”将设置为用户双击的数据，“正则表达式”未选中，“文件名模式”设置为“ *.* ”，“范围”设置为“工作区”

有没有办法从我的代码中显示 Eclipse 文件搜索对话框？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T17:01:20.917

在以下位置找到了答案：

[http://bassistance.de/2009/11/17/eclipse-dev-custom-search-page](http://bassistance.de/2009/11/17/eclipse-dev-custom-search-page)

归结为：

```
NewSearchUI.runQueryInBackground(TextSearchQueryProvider.getPreferred().createQu‌​ery(idText.getText())); 
```

# rabbitmq - RabbitMQ 和消息优先级

> ID：10745084
> 
> 赞同：47
> 
> 时间：2012-05-24T20:50:52.213
> 
> 标签：rabbitmq

RabbitMQ 有消息优先级的概念吗？我有一个问题，一些更重要的消息正在被放慢，因为队列中的消息不太重要。我希望高优先级的优先并排在队列的最前面。

我知道我可以使用两个队列来近似这一点，一个“快”队列和一个“慢”队列，但这似乎是一个 hack。

有谁知道使用 RabbitMQ 的更好解决方案？

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2015-03-16T01:20:44.097

这个问题的答案已经过时了。从 RabbitMQ 3.5.0 开始，现在有对 AMQP 标准每消息优先级的核心支持。该[文档](https://www.rabbitmq.com/priority.html)包含所有血淋淋的细节，但简而言之：

*   您需要在创建队列时定义队列的优先级范围；
*   没有设置优先级的消息的优先级为 0；
*   数字优先级高于队列中设置的最大值的消息将获得队列支持的最高优先级。

文档中有更有趣的警告。非常值得一读。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-05-25T06:20:41.533

Rabbit 没有优先级的概念，正如 Brian 简洁地说的那样，前面的那个首先到达那里。;-)

我建议实施一组队列来满足您的特定消息传递需求，并让这些队列模拟您的优先级需求，例如，将它们称为“MyQueueP1”、“MyQueueP2”等等，然后让我们的消费者检查 P1在 P2 （等）之前，首先从那里发送服务消息。

如果你有一个高优先级的消息，你可以通过合适的路由键将它发布到适当的优先级队列中，瞧。

[更新]检查这个问题： [In a FIFO Queueing system, what's the best way the implementation of priority messages](https://stackoverflow.com/questions/1139203)

[更新] **根据最近的 RabbitMQ 版本 3.5.0，这个答案现在已经过时**，应该被认为只对这个版本之前的版本有效。 [https://stackoverflow.com/a/29068288/489888](https://stackoverflow.com/a/29068288/489888)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-05-25T02:51:18.963

IIRC RabbitMQ 仍然使用 AMQP 协议版本 0.9.1（在[此处](http://www.amqp.org/specification/0-9-1/amqp-org-download)获取规范）。该规范明确提到了消息优先级：

```
Messages may have a priority level. A high priority message is sent ahead of lower     priority messages
waiting in the same message queue. When messages must be discarded in order to maintain a specific
service quality level the server will first discard low-priority messages. 
```

和：

```
Note that in the presence of multiple readers from a queue, or client transactions, or use of priority fields,
or use of message selectors, or implementation-specific delivery optimisations the queue MAY NOT
exhibit true FIFO characteristics. 
```

规范说优先级是必须的，所以我猜 RabbitMQ 应该实现它，但您可能需要查阅它的文档。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-06-12T11:50:16.750

是的，RabbitMQ 支持优先级队列。

要使队列作为优先级队列工作，`x-max-priority`请在声明队列时提供属性。

属性`x-max-priority`定义队列支持的最大优先级数。

在 Java 中，您可以执行以下操作：

```
Map<String, Object> props = new HashMap<>();
props.put("x-max-priority", 10); // max priority number as 10
channel.queueDeclare(QUEUE_NAME, durable, false, false, props); 
```

要发布特定优先级的消息，请执行以下操作：

```
String message = "My message with priority 7";
AMQP.BasicProperties.Builder basicProps = new AMQP.BasicProperties.Builder();
basicProps.contentType("text/plain")
            .priority(7);
channel.basicPublish("", QUEUE_NAME, basicProps.build(), message.getBytes()); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-11T19:53:00.307

[我们可以通过从https://www.rabbitmq.com/community-plugins.html](https://www.rabbitmq.com/community-plugins.html)安装插件 rabbitmq_priority_queue 使 rabbitmq 成为分布式优先级队列。您必须下载插件 rabbitmq_priority_queue-3.3.x-72d20292.ez 并放入您的 rabbit mq 安装目录的 plugins 文件夹中。重新启动服务器。现在您可以按优先级将项目插入队列并相应地使用它，已将示例代码粘贴在[如何轮询 RabbitMQ 以连续按优先级顺序获取消息？](https://stackoverflow.com/questions/25795695/how-to-poll-the-rabbitmq-to-get-messages-in-order-of-priority-continously).

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2012-05-25T02:39:49.663

RabbitMQ / AMQP 肯定有一个消息优先级的概念 - 队列头部的消息优先于它后面的消息，并且该消息优先于它后面的消息，以此类推，无穷无尽。

你能改变那个模型吗？没有！:)

* * *

## 回答 #7

> 赞同：-11
> 
> 时间：2013-05-06T23:48:28.493

如果它实现了优先级，它就不是一个 MQ。

MQ 是数据的电子邮件。并且在所有数据传输中保持顺序是至关重要的。如果您切换顺序，删除发生在插入之前，更新会失去顺序。没有什么能正常工作。

您可能有一个有效的实现，但也有一些例外，但我发现大多数优先级队列的设计是因为人们对他们的系统架构和其中部件的交互进行了肤浅的思考。保持事物的顺序几乎总是正确的做法，对于实体内和实体间的交互都是如此。

为了说事件 A 的优先级高于事件 B，这两个事件必须始终解耦。当这种情况发生时，人们想知道为什么它们存在于同一个队列结构中。再说一次，如果它与有效载荷相关，那么该有效载荷的计算工作量也会影响系统的性能，因此请尽早做出决定，即在使有效载荷有意义之前。

# jquery - 使用 getJSON() 传递数组

> ID：10745087
> 
> 赞同：0
> 
> 时间：2012-05-24T20:51:01.543
> 
> 标签：jquery, arrays, getjson

我有一个有几个选择的表格。我有一个 js 函数，当被调用时，它会构建一个二维数组，其中包含选择 id 和其中的选定值：

```
function sendQueryPredicates(){
priorID = null;
id = null;
var predArray = new Array();
$("select option:selected").each(function () { // finds all selected options from all selects
    id = $(this).parent().attr("id");
    if(id != priorID){
        //make a new subarray
        predArray[id] = new Array();
        i = 0;
    }
    text = $(this).text();
    predArray[id][i] = text;
    priorID = $(this).parent().attr("id");
    i++;
});
$.getJSON("ajaxJQ_server.php", // server page called by jquery
{ // Data sent via ajaxJQ
    "callingForm": "queryForm",
    "callingElementID" : "jQquery_btn",
    "callingState": "query",
    "thisPasses": predArray['cageType'][0],
    "thisDoesntPass": predArray
},
submitMouseQueryCallBck  //function executed after return from ajax/jquery call to server
);
} 
```

当我`$_GET`在服务器上检查数组时，`"thisDoesntPass": predArray`丢失了，而`"thisPasses": predArray['cageType'][0]`, 确实通过了。

我不能在这个方法中传递数组吗？任何想法将不胜感激。

# javascript - HTML5 画布中的希腊字母

> ID：10745088
> 
> 赞同：3
> 
> 时间：2012-05-24T20:51:02.557
> 
> 标签：javascript, html, canvas

有没有办法在 HTML5 画布上打印希腊字母？我试过使用 html 实体名称和编号，像这样

```
canvas2.cx.fillText("&xi;", 50, 50); 
```

和

```
canvas2.cx.fillText("&#958;", 50, 50); 
```

但它只是按字面意思打印出来，因为画布不知道如何解释这些符号。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-24T20:53:43.287

只需使用 UTF-8。

您不必转义字符就可以在 HTML 或 Canvas 中编写它们。

在文档中使用正确的标题：

```
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF8"> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-24T20:55:02.630

如果您想将 JavaScript 源限制为 ASCII，但仍然在字符串中包含非 ASCII 字符，则可以使用 Unicode 转义序列：（小 xi 的代码点为 U+03BE）：

```
canvas2.cx.fillText("\u03be", 50, 50); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T20:53:32.700

喜欢`α`和`β`？如果您使用的是 UTF-8，则可以只键入字符文字。例子：

```
canvas2.cx.fillText("α", 50, 50); 
```

# p2p - 使用套接字的 P2P 应用程序

> ID：10745089
> 
> 赞同：0
> 
> 时间：2012-05-24T20:51:11.997
> 
> 标签：p2p, socketserver

我有两个 P2P 应用程序正在运行，一个在 10.7.1.1(A) 中，另一个在 10.7.1.3(B) 中。这是一种聊天应用程序，每个人都只发送和接收文本消息，没有其他内容。基本上，我在 A 和 B 中都与 2 个 UDP 套接字连接，用于侦听和发送文本。目前我已经在两个系统中硬编码端口号来建立套接字。现在我如何通过动态计算端口号来建立套接字来改进相同的应用程序？换句话说，我希望应用程序只接受来自用户的 IP 地址，然后自己建立一个端口用于套接字连接？这个设计能实现吗？有什么方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T21:05:24.203

您可以使用一些尚未描述的服务注册您的端口，这将允许您的第二个实例确定您的第一个实例正在侦听的端口。

或者你可以开始监听你的硬编码端口，然后作为初始握手的一部分，切换到一个动态生成的端口。

# android - 在 Achartengine 中显示图表值

> ID：10745090
> 
> 赞同：1
> 
> 时间：2012-05-24T20:51:14.693
> 
> 标签：android, achartengine

我正在使用 achartengine 制作折线图。图形绘制正确，但点顶部的显示值完全不同。y轴正确的点是173.011，但是显示的值是158691406，为什么值不一样？我正在使用 achartengine0.6。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T08:56:05.917

我建议你升级到 AChartEngine 1.0.0。

# android - 选项卡中的图标未显示

> ID：10745092
> 
> 赞同：20
> 
> 时间：2012-05-24T20:51:21.417
> 
> 标签：android

我从 Android 开始，当我尝试用图标和文本做 TabHost 时。只有文本可见，如果我将文本留空，则可以看到图标。我想在屏幕上看到两者。

有人可以给我建议吗？

```
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main);

Usuario usu = new Usuario();
usu.nombre = "fsdf";
lista.add(usu);

adaptador = new AdaptadorCelda(this,lista);
ListView lstView = (ListView)findViewById(R.id.lista);
lstView.setAdapter(adaptador);

Button btn = (Button)findViewById(R.id.btnSalva);

btn.setOnClickListener(onSave);

Resources res = getResources();

TabHost tabs=(TabHost)findViewById(R.id.tabhost);
tabs.setup();

TabHost.TabSpec spec=tabs.newTabSpec("mitab1");
spec.setContent(R.id.tab1);
spec.setIndicator("",res.getDrawable(android.R.drawable.ic_menu_rotate));

tabs.addTab(spec);

spec=tabs.newTabSpec("mitab2");
spec.setContent(R.id.tab2);
spec.setIndicator("ddd",
       res.getDrawable(android.R.drawable.presence_invisible));
tabs.addTab(spec);

tabs.setCurrentTab(0);

spec.setIndicator("",res.getDrawable(android.R.drawable.ic_menu_rotate)) In this case icon appears.

spec.setIndicator("ddd",
       res.getDrawable(android.R.drawable.presence_invisible)); 
```

这是 main.xml

```
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/tabhost"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<LinearLayout
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<TabWidget
    android:id="@android:id/tabs"
    android:layout_width="match_parent"

    android:layout_height="wrap_content" />

<FrameLayout
    android:id="@android:id/tabcontent"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <RelativeLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/tab1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >
       <TextView
            android:id="@+id/lblNombre"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_marginTop="17dp"
            android:text="Nombre"
            android:textAppearance="?android:attr/textAppearanceLarge" />

        <EditText
            android:id="@+id/txtNombre"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignTop="@+id/lblNombre"
            android:layout_marginLeft="35dp"
            android:layout_toRightOf="@+id/lblNombre"
            android:ems="10" >

            <requestFocus />
        </EditText>

        <EditText
            android:id="@+id/txtApellido"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@+id/txtNombre"
            android:layout_below="@+id/txtNombre"
            android:ems="10" />

        <TextView
            android:id="@+id/lblApellido"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignBottom="@+id/txtApellido"
            android:layout_alignParentLeft="true"
            android:text="Apellidos"
            android:textAppearance="?android:attr/textAppearanceLarge" />

        <RadioGroup
            android:id="@+id/tipos"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/txtApellido"
            android:layout_marginTop="35dp"
            android:layout_toLeftOf="@+id/txtApellido" >

            <RadioButton
                android:id="@+id/rdbAlta"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="alta" />

            <RadioButton
                android:id="@+id/rdbBaja"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="baja" />

            <RadioButton
                android:id="@+id/rdbTramite"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="tramite" />
        </RadioGroup>

        <Button
            android:id="@+id/btnSalva"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@+id/txtApellido"
            android:layout_alignTop="@+id/tipos"
            android:layout_marginLeft="58dp"
            android:layout_marginTop="30dp"
            android:text="Button" />

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_below="@+id/txtApellido"
            android:src="@drawable/ic_menu_chart" />

    </RelativeLayout>

    <LinearLayout
        android:id="@+id/tab2"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <ListView
            android:id="@+id/lista"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_below="@+id/tipos"
            android:layout_marginTop="24dp" >
        </ListView>
    </LinearLayout>
</FrameLayout> 
```

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-07-08T00:12:15.717

您是否在运行 Ice Cream Sandwich 的设备上测试过您的应用程序？我最近注意到，默认值的`TabHost`行为取决于目标设备和 android 平台版本。

运行一个提供图标和文本的应用程序`setIndicator`（如问题的来源），具有以下测试结果：

*   装有 Android 2.1 的手机：显示的图标和文本（如预期的那样在图标下方添加标签）
*   带有 4.0.3 的电话：图标未显示，**只有文本**可见。
*   运行 ICS 的平板电脑：带有图标和文本的选项卡

正如您也发现的那样，用**空字符串**替换标签，**图标出现**在电话上 - 但是用户需要猜测图标的含义。除此之外：在预 ICS 手机上运行此版本的应用程序时：选项卡保持其大小并在图像下方留下空白区域。

要更改此设备驱动的选项卡应获得多少空间的决定，我在本[教程中找到了有关如何自定义选项卡](http://ondrejcermak.info/en/programovani/custom-tabs-in-android-tutorial/)的解决方案：

首先，您需要提供**自己的选项卡指示器**布局（本教程中的“layout/tab_indicator.xml”），包括一个`ImageView`和一个`TextView`. 然后你告诉`TabSpec`通过`setIndicator`. 瞧：您也可以使用 ICS 获得手机上的图标和标签。

这是有关如何设置指标的重要部分（这 = 当前活动）：

```
TabHost.TabSpec spec = this.getTabHost().newTabSpec(tag);

View tabIndicator = LayoutInflater.from(this).inflate(R.layout.tab_indicator, getTabWidget(), false);
((TextView) tabIndicator.findViewById(R.id.title)).setText(label);
((ImageView) tabIndicator.findViewById(R.id.icon)).setImageResource(drawableResourceId);

spec.setIndicator(tabIndicator); 
```

如果您喜欢旧手机和新手机上相同的标签外观，请在此处查看：http: [//jgilfelt.github.com/android-actionbarstylegenerator/](http://jgilfelt.github.com/android-actionbarstylegenerator/)。此页面生成图像和样式以自定义包含选项卡的操作栏，并帮助我弄清楚需要如何定义 9-patch 背景图像。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-12-15T23:10:19.117

这是在 ICS 中显示文本和图标的简单方法。设置 Tabhost 后，我​​调用下一个方法：

```
setTabIcon(mTabHost, 0, R.drawable.ic_tab1); //for Tab 1
setTabIcon(mTabHost, 1, R.drawable.ic_tab2); //for Tab 2

public void setTabIcon(TabHost tabHost, int tabIndex, int iconResource) {
    ImageView tabImageView = (ImageView) tabHost.getTabWidget().getChildTabViewAt(tabIndex).findViewById(android.R.id.icon);
    tabImageView.setVisibility(View.VISIBLE);
    tabImageView.setImageResource(iconResource);
} 
```

如果您想要更高级的解决方案，您需要创建像***@sunadorer***推荐的布局。我的建议是您可以使用 holo 主题布局创建布局，在***sdk_dir/platforms/android-14/data/res/layout/tab_indicator_holo.xml***上搜索文件。

我的高级解决方案是下一个，您需要创建这样的布局：

**tab_indicator.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_height="wrap_content"
              android:orientation="vertical"
              android:paddingTop="5dp"
              android:paddingBottom="5dp"
              style="@android:style/Widget.Holo.Tab">

    <ImageView
        android:id="@android:id/icon"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:visibility="visible" />

    <TextView
        android:id="@android:id/title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        style="@android:style/Widget.Holo.ActionBar.TabText" />

</LinearLayout> 
```

在您的活动或片段中，创建下一个函数：

```
public View createTabIndicator(LayoutInflater inflater, TabHost tabHost, int textResource, int iconResource) {
    View tabIndicator = inflater.inflate(R.layout.tab_indicator, tabHost.getTabWidget(), false);
    ((TextView) tabIndicator.findViewById(android.R.id.title)).setText(textResource);
    ((ImageView) tabIndicator.findViewById(android.R.id.icon)).setImageResource(iconResource);
    return tabIndicator;
} 
```

最后，当您在活动或片段中创建选项卡时，请使用以下代码：

```
mTabHost.addTab(
    mTabHost.newTabSpec("tab1")
    .setIndicator(createTabIndicator(inflater, mTabHost, R.string.tab1, R.drawable.ic_tab1))
    .setContent(R.id.tab1)
); 
```

我已经在 ICS 中测试了这个解决方案并且工作正常。

祝你好运 ：）

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-10-23T12:32:17.750

对此还有另一个非常简单的解决方案。

似乎问题出在新的 Holo 主题和`TabWidget`. 所以你应该做的是在你的`values-v11`文件夹中定义 Holo 主题，但使用像这样的旧`TabWidget`样式：

> ```
> <style name="MyAppTheme" parent="@android:style/Theme.Holo.NoActionBar">
>     <item name="android:tabWidgetStyle">@android:style/Widget.TabWidget</item>
> </style> 
> ```

它对我有用，希望对某人有所帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-07T08:48:28.027

我尝试以下方式来做到这一点，它工作正常：

1.  使用 setIndicator("TAB") 仅设置文本。
2.  使用 setBackgroundDrawable(-) 设置图标。

示例代码：

```
 final TabHost               tabHost = (TabHost)findViewById(android.R.id.tabhost);
    final Resources             res = getResources();
    int i;

    tabHost.setup(); //Call setup() before adding tabs if loading TabHost using findViewById(). 

    TabHost.TabSpec ts = tabHost.newTabSpec("trackinfo");
    //ts.setIndicator("", res.getDrawable(R.drawable.icon_trackinfo));
    ts.setIndicator("Track Information");
    ts.setContent(R.id.tabTrackInfo);
    tabHost.addTab(ts);

    TabHost.TabSpec ts2 = tabHost.newTabSpec("collection");
    //ts2.setIndicator("", res.getDrawable(R.drawable.icon_collection_gray));
    ts2.setIndicator("My Collection");
    ts2.setContent(R.id.tabMyCollecton);
    tabHost.addTab(ts2);

    tabHost.setOnTabChangedListener(new OnTabChangeListener(){
        @Override
        public void onTabChanged(String tabId) 
        {
            if("trackinfo".equals(tabId)) {
                //
                TabWidget tw = (TabWidget)tabHost.findViewById(android.R.id.tabs);
                View tabView = tw.getChildTabViewAt(0);
                TextView tv = (TextView)tabView.findViewById(android.R.id.title);
                tv.setTextColor(TabColor[0]);
                tabView.setBackgroundDrawable(res.getDrawable(R.drawable.icon_selected));

                tabView = tw.getChildTabViewAt(1);
                tv = (TextView)tabView.findViewById(android.R.id.title);
                tv.setTextColor(TabColor[1]);

                tabView.setBackgroundDrawable(res.getDrawable(R.drawable.icon_gray));
            }
            if("collection".equals(tabId)) {
                //
                TabWidget tw = (TabWidget)tabHost.findViewById(android.R.id.tabs);
                View tabView = tw.getChildTabViewAt(0);
                TextView tv = (TextView)tabView.findViewById(android.R.id.title);
                tv.setTextColor(TabColor[1]);
                tabView.setBackgroundDrawable(res.getDrawable(R.drawable.icon_gray));

                tabView = tw.getChildTabViewAt(1);
                tv = (TextView)tabView.findViewById(android.R.id.title);
                tv.setTextColor(TabColor[0]);
                tabView.setBackgroundDrawable(res.getDrawable(R.drawable.icon_selected));

        }
        }}); // END OF tabHost.setOnTabChangedListener

    // After Tabs being added
    // change font settings 
    TabWidget tw = (TabWidget)tabHost.findViewById(android.R.id.tabs);
    for(i=0;i<2;i++)
    {
        View tabView = tw.getChildTabViewAt(i);
        TextView tv = (TextView)tabView.findViewById(android.R.id.title);
        tv.setHeight(25);
        tv.setTextColor(TabColor[i]);
        tv.setTypeface(Typeface.SANS_SERIF, Typeface.BOLD_ITALIC);
        tv.setTextSize(20);      
        tabView.setBackgroundDrawable(res.getDrawable(TabIcon[i]));

    } 
```

# r - 通过 ASCII 文件编辑器从 R 打印 ASCII 文件

> ID：10745095
> 
> 赞同：0
> 
> 时间：2012-05-24T20:52:12.253
> 
> 标签：r

我正在使用 R (windows) 并且有一个函数可以使用`sink()`. 然后我尝试使用系统命令打印文件：

`system(paste('"c:/Program files (x86)/IDM Computer Solutions/UltraEdit/uedit32.exe"',' /p d:/R/rtmpfile.prt'), intern=TRUE)`

上面经过了这些动作，但实际上并没有打印任何东西（尽管有时它实际上会打印）。但是，如果我打开一个命令窗口并执行与批处理文件相同的命令，它总是打印 OK（即`c:\program files (x86)\idm computer solutions\ultraedit\uedit32.exe /p d:\R\rtmpfile.prt`）。

简而言之，我想将保存在文件夹中的 ASCII 文件发送到我的本地打印机（并使用 R 函数）。有什么建议么？

# android - IndexOutOfBoundsException 但错误在代码中没有给我一行

> ID：10745098
> 
> 赞同：4
> 
> 时间：2012-05-24T20:52:49.013
> 
> 标签：android

我更新了我的应用程序并突然收到此错误。因为我的代码中没有行，所以我无法确定它的头部或尾部。

人们已经在我在一个模拟器上看到的手机上看到了这个，但在我的家用机器上它工作正常。删除数据库并重新开始，仍然没有

欢迎任何想法谢谢

```
java.lang.IndexOutOfBoundsException: Invalid index 1, size is 1
at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:251)
at java.util.ArrayList.get(ArrayList.java:304)
at android.widget.ArrayAdapter.getItem(ArrayAdapter.java:337)
at android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:390)
at android.widget.ArrayAdapter.getView(ArrayAdapter.java:362)
at android.widget.Spinner.makeAndAddView(Spinner.java:398)
at android.widget.Spinner.layout(Spinner.java:349)
at android.widget.Spinner.onLayout(Spinner.java:313)
at android.view.View.layout(View.java:11359)
at android.view.ViewGroup.layout(ViewGroup.java:4531)
at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1628)
at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1486)
at android.widget.LinearLayout.onLayout(LinearLayout.java:1399)
at android.view.View.layout(View.java:11359)
at android.view.ViewGroup.layout(ViewGroup.java:4531)
at android.widget.FrameLayout.onLayout(FrameLayout.java:431)
at android.view.View.layout(View.java:11359)
at android.view.ViewGroup.layout(ViewGroup.java:4531)
at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1628)
at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1486)
at android.widget.LinearLayout.onLayout(LinearLayout.java:1399)
at android.view.View.layout(View.java:11359)
at android.view.ViewGroup.layout(ViewGroup.java:4531)
at android.widget.FrameLayout.onLayout(FrameLayout.java:431)
at android.view.View.layout(View.java:11359)
at android.view.ViewGroup.layout(ViewGroup.java:4531)
at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1628)
at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1486)
at android.widget.LinearLayout.onLayout(LinearLayout.java:1399)
at android.view.View.layout(View.java:11359)
at android.view.ViewGroup.layout(ViewGroup.java:4531)
at android.widget.RelativeLayout.onLayout(RelativeLayout.java:925)
at android.view.View.layout(View.java:11359)
at android.view.ViewGroup.layout(ViewGroup.java:4531)
at android.widget.FrameLayout.onLayout(FrameLayout.java:431)
at android.view.View.layout(View.java:11359)
at android.view.ViewGroup.layout(ViewGroup.java:4531)
at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1628)
at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1486)
at android.widget.LinearLayout.onLayout(LinearLayout.java:1399)
at android.view.View.layout(View.java:11359)
at android.view.ViewGroup.layout(ViewGroup.java:4531)
at android.widget.FrameLayout.onLayout(FrameLayout.java:431)
at android.view.View.layout(View.java:11359)
at android.view.ViewGroup.layout(ViewGroup.java:4531)
at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1665)
at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2695)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:154)
at android.app.ActivityThread.main(ActivityThread.java:4974)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T13:09:43.727

我已经修好了。我正在设置一个从数据库中保存的值中选择的默认值，但这与我在微调器中的值的数量不匹配。感谢您为我指明正确的方向

# salesforce - SalesForce 渲染为调用 javascript 函数

> ID：10745099
> 
> 赞同：1
> 
> 时间：2012-05-24T20:52:51.293
> 
> 标签：salesforce, visualforce

有没有办法让渲染的属性调用 javascript 函数？我希望它调用 javascript 函数的原因是我正在使用的页面没有控制器，所以我不能做类似的事情`rendered="{!canRender}"`

我正在使用 apex:outputText 来显示文本，并且我希望对某些用户隐藏该文本。

我尝试执行以下操作，但没有一个有效。

```
rendered="javascript:myfucntion();"
rendered="myfunction();" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T00:01:23.507

您不能使用渲染属性执行此操作，但您可以在页面加载时使用 javascript 来隐藏您不想显示的字段，方法是将其显示样式属性设置为无。

# entity-framework - 验证导航属性中的数据输入

> ID：10745100
> 
> 赞同：0
> 
> 时间：2012-05-24T20:52:55.800
> 
> 标签：entity-framework, entity-framework-4

如何验证或阻止用户执行操作`Product.Ingredients.Add(new Ingredient())`？当用户这样做时，会在成分表中添加新成分。我希望它只添加现有的成分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T03:46:24.457

您可以通过覆盖 DBContext 中的保存更改方法来检查这一点。

```
public class YourDbContext:DBContext
{
//......

   public override int SaveChanges(){

      foreach(var entry in ChangeTracker.Entries<Ingredient>())
      {
         var entity = entry.Entity;
        if (entry.State == EntityState.Added)
        {
           this.Detach(entity );
        }
       }
     base.SaveChanges();
  }

} 
```

# git - Aptana 3 和 Git：切换分支代码保持不变。我无法尝试添加新功能

> ID：10745101
> 
> 赞同：1
> 
> 时间：2012-05-24T20:53:00.617
> 
> 标签：git, git-branch, aptana3

我是使用 git 和 Aptana 的新手。

读了一些关于 git 的东西，我发现我可以创建新的分支。我可以用 Aptana 做到这一点。

但我明白，如果我创建一个新分支，我将拥有一个单独的环境，我可以在其中工作而无需处理我所做的更改，因为它们不会应用于我的主要源代码。

所以我希望，如果在 Aptana 中，我在分支之间切换，我打开的文件应该是特定分支的文件。

因此，如果我`A`在分支中有带有“一些内容”的文件“” `master`，如果我创建一个新分支（称为“ `testBranch`”）并编辑文件“ `A`”写入其中“一些新内容”，如果我切换回`master`分支并打开`A`它应该再次包含“一些内容”的文件。
如果我从 中打开同一个文件`testBranch`，我应该在其中找到“一些新内容”。

相反，使用 Aptana，如果我在分支之间切换，我也会看到修改后的文件。
但我认为这不是 git 的开发人员认为该工具的方式。

我认为如果我在`master`分支文件“ `A`”应该包含“一些内容”，而如果我切换到“ `testBranch`”文件“A”应该包含“一些新内容”。

我错了吗？我有什么误解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T06:18:00.650

如果您修改了一个文件，但没有提交它，Aptana 不会在您切换分支时修改它（即检出另一个分支）。

但是如果您已经在当前分支中提交了该文件（切换之前），并且内容没有变化，那么它可能与这个错误有关：“ [Git checkout from GUI (App Explorer)有时不签出分支](https://aptanastudio.tenderapp.com/discussions/problems/2599-git-checkout-from-gui-app-explorer-sometimes-doesnt-checkout-branch)” .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-22T07:34:57.980

遇到同样的问题，我决定创建分支并使用 bash（命令提示符）切换到它，然后因为我刷新无处可去，而 Aptana 仍然没有得到它。我决定重新启动 Aptana（关闭我项目的所有实例），然后再次启动它，新分支可用，但我的工作空间指向 HEAD。返回命令提示符并运行 $git status，以查看我所在的分支以及我在重启前的 $git branch checkout // 指令中的新分支。选择新的分支和你的好去。

# objective-c - 为什么 UITableCell 不显示内容

> ID：10745103
> 
> 赞同：0
> 
> 时间：2012-05-24T20:53:22.350
> 
> 标签：objective-c, ios

我使用 IB 和 Storyboards 在 UITableView 中制作了一个自定义单元格。下面的代码是加载该自定义单元格的代码；问题是虽然 cA.cBusName 和 cA.cOrderDate 中有有效数据，但单元格标签（cell.busNameLabel.text、cell.orderDateLagbel.text）没有设置。 **问题是：为什么这不起作用？**

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath  {

    static NSString *CellIdentifier = @"CustomerListingsCell";

    CustomerListingsCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[CustomerListingsCell alloc]
                initWithStyle:UITableViewCellStyleDefault 
                reuseIdentifier:CellIdentifier];
    }

    // Configure the cell...
    SingletonListOfCustomers *shareInstance = [SingletonListOfCustomers sharedInstance];
    cArray *cA = [shareInstance.listOfCustomers objectAtIndex: indexPath.row];

    cell.busNameLabel.text = cA.cBusName;
    cell.orderDateLabel.text = cA.cOrderDate;

    NSLog(@"\n\nindexPath.row: %d, busNameLabel: %@, orderDateLabel: %@", indexPath.row, cA.cBusName, cA.cOrderDate);
    NSLog(@"\nindexPath.row: %d, cell.busNameLabel: %@, cell.orderDateLabel: %@", indexPath.row, cell.busNameLabel.text, cell.orderDateLabel.text);

    return cell;

} 
```

CustomerListingsCell 定义为：

```
@interface CustomerListingsCell : UITableViewCell  {

}

@property (nonatomic, strong) IBOutlet UILabel *busNameLabel;
@property (nonatomic, strong) IBOutlet UILabel *orderDateLabel;

@end 
```

NSLog 语句输出为：

> 2012-05-24 14:01:55.363 空白面料[4876:f803]
> 
> indexPath.row: 0, busNameLabel: 隐藏针迹, orderDateLabel: 05/24/2012 2012-05-24 14:01:55.364 Blank Fabrics[4876:f803] indexPath.row: 0, cell.busNameLabel: (null), cell .orderDateLabel: (null) 2012-05-24 14:01:55.365 空白面料[4876:f803]
> 
> indexPath.row: 1, busNameLabel: Prager, Software, orderDateLabel: 05/24/2012 2012-05-24 14:01:55.373 Blank Fabrics[4876:f803] indexPath.row: 1, cell.busNameLabel: (null), cell.orderDateLabel：（空）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T21:03:11.710

您的 IBOutlets 是否为这两个标签都设置了？检查 cell.busNameLabel 是否不为零...

# .net - 在移动设备和笔记本电脑之间同步 sql server 数据

> ID：10745105
> 
> 赞同：1
> 
> 时间：2012-05-24T20:53:27.253
> 
> 标签：.net, mobile, sql-server-ce, sync

我关于移动平台应用程序的第二个问题。

我们正在为移动计算机 MC2100 做一个应用程序，并使用 SQL CE 作为数据库。既然应用程序已经完成并且我的 SQL CE 数据库中有数据，我正在寻找将这些数据与在平板电脑上运行的 SQL Express 同步（2 路同步）的方法。

我可以选择如何进行同步，即可以查看所有可行的选项。

1.例如，我可以从平板电脑上运行的.Net代码**直接**连接到设备中的CE DB吗，即在连接字符串中放入一条路径，将我直接带到CE DB（我对此表示怀疑）但如果可能的话我在找什么。

2.此外，由于所涉及更新的性质， 将 CE DB**复制**到平板电脑，然后进行双向更新并最终复制回移动设备不是理想的路线，老实说我不也知道该怎么做！

3.是否有我可以使用的第 3 方实用程序，这可能会有所帮助 - [http://www.primeworks-mobile.com/Products/DataPortCommand.html](http://www.primeworks-mobile.com/Products/DataPortCommand.html)，但我无法在大多数情况下使用它。有人用过这个吗？

感谢所有的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T01:32:16.527

也看看这个演练：演练：[创建一个偶尔连接的智能设备应用程序](http://msdn.microsoft.com/en-us/library/cc488004.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T22:07:58.137

1 - 不幸的是，这不是一个选项。SQL CE 不支持远程连接。

2 - 我知道你说不需要，但这正是我在 Windows Mobile 6.5 设备上涉及 SQL CE 数据库同步到服务器上的 SQL Express 数据库的非常相似的任务所采取的路线。

该过程涉及使用 RAPI 将数据库从设备复制到服务器，然后使用 Sync Framework 将 CE 数据库与 SQL 数据库同步，然后再次使用 RAPI 将数据库复制回设备。

虽然这听起来像是一个复杂的过程，但它实际上工作得很好，我认为这可能是你最好的选择。

3 - 我在这里帮不上什么忙，但根据该网页，该实用程序似乎仅用于复制整个数据库，而不是用于执行 2 路同步。

# css - 如何制作一个项目之间具有可变空间的ul li css菜单

> ID：10745106
> 
> 赞同：4
> 
> 时间：2012-05-24T20:53:29.100
> 
> 标签：css, menu, html-lists, padding, margin

这个想法是制作一个包含固定数量项目的菜单。每个项目都必须有一个固定的填充，以使它们在周围放置边框时看起来不错。（到目前为止一切都很好）但是这些项目必须以固定大小分布在一个 div 中，均匀分布 - 项目本身的大小不会相同，因为这取决于这些项目中的文本。

我无法弄清楚的是如何确保这些项目位于 1 行，并且它们之间的动态（或多或少）均匀间距在固定 div 内（在我的情况下为 1000px）。第一项应该排在 div 的左边缘。最后一项应该排在 div 的右边缘。

以下是我到目前为止所拥有的。这已经在它上面放置了填充和边框，但是我不能在它上面设置一个 margin: 0 auto ，我可以，但是它没有做任何事情。主要问题是它们之间的间距应该是动态的，因为项目往往会在缩放浏览器时跳跃，这反过来又会扰乱外部项目的对齐方式，甚至会使一些项目跳转到下一行。这就是为什么（缩放会使事情变得混乱 - 特别是在固定宽度的情况下）我不愿意在每个项目上放置一个实际宽度（我知道我需要一个宽度才能正确使用 margin: 0 auto ，但即使我确实使用了一个宽度，它似乎没有做我想做的事）。

```
<div id="navigation">
    <ul>
        <li class="menu-1"><a href="" >Home</a></li>
        <li class="menu-2"><a href="" class="">Nieuws</a></li>
        <li class="menu-3"><a href="" class="">Producten</a></li>
        <li class="menu-4"><a href="" class="">Algemene informatie</a></li>
        <li class="menu-5"><a href="" class="">Promoties</a></li>
        <li class="menu-6"><a href="" class="">Algemene voorwaarden</a></li>
        <li class="menu-7"><a href="" class="">Contact</a></li>
    </ul>
</div>

#navigation ul {
    margin:0px;
    padding:0px;
    list-style:none;
    width:1000px;   
    display:block;
}

#navigation li {
    float: left;
    display:inline;
}

#navigation li a {
    padding:10px 15px 10px 15px;
    float:right;

    display: block;
    border: 0.1em solid #dcdce9;
    color: #6d6f71;
    text-decoration: none;
    text-align: center; 
    font-size:18px;
    font-weight:bold;
}

#navigation{
    width:100%;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T20:57:14.173

最简单的方法是使用表格而不是 li items ：您可以定义表格宽度，并且将自动计算单元格宽度。

您可以选择以百分比为单位赋予它们宽度以使它们相等或决定让它们按比例调整。

不必害怕桌子：有时它们做得更简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T21:03:19.677

使用表格显示模式：http: [//jsfiddle.net/pnUdp/1/](http://jsfiddle.net/pnUdp/1/)

```
#navigation {
    margin:0px;
    padding:0px;
    display:table;
    width:1000px;
    border-collapse: collapse;
}

#navigation ul{
    margin:0px;
    padding:0px;
    list-style:none;
    display:table-row-group;
}

#navigation li{
    display:table-cell;
    border: 0.1em solid #dcdce9;
    vertical-align: middle;
}

#navigation li a{
    padding:10px 15px 10px 15px;
    display:block;
    color: #6d6f71;
    text-decoration: none;
    text-align: center; 
    font-size:18px;
    font-weight:bold;
} 
```

我不确定这是如何跨浏览器...

# ruby-on-rails - fields_for 导致过滤器链停止错误

> ID：10745109
> 
> 赞同：1
> 
> 时间：2012-05-24T20:53:36.363
> 
> 标签：ruby-on-rails

我正在尝试为事件记录创建一个新的 EventPlace。我已将 Event 设置为 Accepts_nested_attributes_for :event_places 以及我认为的以下代码：

```
<div id="add_venue_form" style="border:2px solid black; padding: 5px;">
<% form_for @event, :html => {:name => "form2"} do |f| -%>
    <% f.fields_for @event_place do |v| -%>
      <%= v.text_field :place_id %>
    <% end -%>
    <a class="button" style="margin-left:10px;margin-top:4px;" href="javascript:document.form2.submit();" onclick="this.blur();"><span>Save</span></a>

<% end -%> 
```

当我在字段中添加一个 ID 号并单击保存按钮时，它给了我这个错误：

```
Processing EventController#update (for 127.0.0.1 at 2012-05-24 15:43:39) [PUT]
Parameters: {"id"=>"48404", "action"=>"update", "controller"=>"event", 
    "_method"=>"put", "event"=>{"event_place"=>{"place_id"=>"3"}}}
SQL (0.1ms)   SET NAMES UTF8
Redirected to http://localhost:3001/event/list
Filter chain halted as [#<Proc:0x00000001094746e0@/Users/anthonylassiter/.rbenv/versions/ree-1.8.7 2012.02/lib/ruby/gems/1.8/gems/actionpack-2.3.10/lib/action_controller/verification.rb:82>] rendered_or_redirected.
Completed in 8ms (DB: 0) | 302 Found [http://localhost/events/48404] 
```

我的更新方法

```
 def update
     @event = Event.find(params[:id])
     if @event.update_attributes(params[:event])
       redirect_to index
     end
 end 
```

看起来参数是正确的。它似乎甚至没有在我的 event_controller 上点击我的更新方法，而是导致一些内部错误并尝试重定向到不存在的 /list，但是如果更新正在工作，我不应该需要它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T21:10:20.080

参数不正确，`event_places_attributes`你必须有 r 参数...尝试 在 fields_for 中`@event.event_places.build`使用`:event_places`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T21:32:17.540

在您的控制器（或其超类之一）中的某处，您`verify`用于限制可以发出的请求（或者您正在使用的插件可能称为验证）。记录的请求未通过其中一个验证步骤，因此 rails 将其重定向。

# java - 为什么原生 libmpg123 在带有 libgdx 的 android 上花费这么长时间？

> ID：10745110
> 
> 赞同：0
> 
> 时间：2012-05-24T20:53:41.117
> 
> 标签：java, android, mp3, libgdx

我正在尝试使用 gdx-audio 扩展，但在解码 mp3 时遇到问题。它有效，但非常缓慢！一个 10 秒的文件需要 6.57 秒来解码 :( 这是方法：

```
public void decode() {
    Mpg123Decoder decoder = new Mpg123Decoder(externalFile);

    short[] sampleArray = new short[1024];

    // read until we reach the end of the file
    while (decoder.readSamples(sampleArray, 0, sampleArray.length) > 0) {}
} 
```

谁能告诉我为什么要花这么长时间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T16:36:03.790

因为 libmpg123 是一个软件解码器，它在 CPU 上完成所有工作。根据您拥有的 CPU，您通常只能获得 2 倍的实时解码。我们还没有在我们的 libmpg123 构建中启用 ARM 程序集，这可能有助于加快它的速度，但通常不会很多。

# php - PHP while 循环加 2

> ID：10745113
> 
> 赞同：10
> 
> 时间：2012-05-24T20:53:51.557
> 
> 标签：php, loops, scripting

目前我有一个看起来像这样的代码：

```
for ($i=0; $i<=($num_newlines - 1); $i++) 
{
$tweetcpitems->post('statuses/update', 
                    array('status' => wordFilter("The item $parts[$i]  has been released on Club Penguin. View it here:   http://clubpenguincheatsnow.com/tools/swfviewer/items.swf?id=$parts[$id]")));
sleep(90);
} 
```

我想做的是使“i++”部分加二而不是加一，但我该怎么做呢？请帮忙！

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-05-24T20:54:21.160

```
for ($i=0; $i<=($num_newlines - 1); $i+=2) { 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-24T20:57:50.287

```
$i++ : increment by one

$i+=2 : increment by two

$i+=3 : increment by three 
```

ETC..

# c# - 在 xna 中，我如何正确引用相对于原点的 vector2 坐标？

> ID：10745115
> 
> 赞同：1
> 
> 时间：2012-05-24T20:53:56.123
> 
> 标签：c#, vector, xna, 2d, coordinates

在 xna 中，当引用精灵绘图的坐标时，我有一个位置为 vector2 的精灵。（暂时忽略 z，这是基于屏幕位置正确堆叠精灵的失败尝试）。当手动引用vector2坐标时，我似乎总是在原点结束，请明白我的意思。

```
//draw sprite, this is called repeatedly during gameplay, it's inside a draw function
theGame.spriteBatch.Draw(headings[heading][frame], new Rectangle((int)theSprite.position.X, (int)theSprite.position.Y, theSprite.width, theSprite.height), null, Color.White, 0f, Vector2.Zero, SpriteEffects.None, theSprite.z); 
```

在通过引用它的 X 和 Y 矢量坐标来绘制精灵时，一切都是笨拙的。如果我尝试以任何其他我能想到的方式手动使用这些相同的坐标，坐标似乎总是以原点（左上角）结束。除此之外，一切顺利，精灵的运动很好

```
//the movement code for the particular sprite:
// this is a function i call repeatedly during gameplay, it moves the sprite
        public void Move(GameTime Time)
        {
            if (!move) { return; } //not even moving? exit function

            direction = destination - position;//these are all vector2 orbjects
            //speed is a float
            position += direction * (speed * (float)Time.ElapsedGameTime.TotalSeconds);

            syncBounds();

            if (Vector2.Distance(position,destination)<bounds_sphere.Radius) //close enough? stop moving
            { 
                move = false;
            }
         }

//here's the moveTo function which triggers the move-event, i typically call it with screen coordinates
        public void moveTo(float _x, float _y, string _anim)

            destination = new Vector2(_x - (width / 2), _y - (height / 2));

            curr_anim = _anim;
            move = true; //kicks off trigger 
        }

 //here's an example of moveTo working with basic coordinates
 // Process touch events
        TouchCollection touchCollection = TouchPanel.GetState();
        foreach (TouchLocation tl in touchCollection)
        {
            if ((tl.State == TouchLocationState.Pressed))//|| (tl.State == TouchLocationState.Moved))
            {
                float px = tl.Position.X; //touch x
                float py = tl.Position.Y; //touch y

                gameObjects.Sprites[player].moveTo(px, py, "running");

            }
        } 
```

所以在使用屏幕坐标时，精灵会很好地移动到目的地；但是如果我使用精灵自己的向量-x 和 y 坐标作为其目的地的一部分会发生什么，随着时间的推移，精灵最终会出现在左上角，就像命运一样。为什么会这样？它发生在手动参考坐标时，也以其他方式发生，例如碰撞检测。我实际上可以看到 2 个坐标在循环中向下倒数到原点，即使我将向量归零并将其坐标重新应用回向量也会发生这种情况（我假设除了删除任何幅度之外什么都不做，如果 vector2 甚至持有该信息）。谢谢您的帮助！

```
// i don't think this actually does anything
vector2 savepos = position;
position = Vector2.Zero;
position.x = savepos.x;
position.y = savepos.y;

//example of my code failing when referencing the vector2 coordinates
//sprite (me) auto-flee function code
int x = (int) me.position.X;
int y = (int) me.position.Y;
int dist = 2;
me.moveTo(rand.Next(x-dist,x+dist), rand.Next(y-dist, y+dist), running); //kick off moveTo function, begin the animation sequence 
```

有趣的是，如果我指定另一个精灵的 vector2 位置坐标，它似乎工作正常：

```
//this works and the sprites move to the other object
me.moveTo(gameObjects.Sprites["anotherspriteobject"].position.X, gameObjects.Sprites["anotherspriteobject"].position.Y, running); //kick off moveTo function, begin the animation sequence 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T15:51:28.363

如果你经常使用这些参数调用 moveTo 函数，精灵自然会出现在左上角。精灵的位置成员是它的左上角。但是，在 moveTo 函数中，您期望中心的位置。这就是为什么你减去它的一半大小。因此，当您将精灵的中心永久移动到其左上角时，当您阻止精灵离开时，它将导致屏幕的左上角。

解决方案是使用精灵的实际中心点作为参考：

```
int x = (int) me.position.X + me.width/2; 
int y = (int) me.position.Y + me.height/2; 
int dist = 2; 
me.moveTo(rand.Next(x-dist,x+dist), rand.Next(y-dist, y+dist), running); //kick off moveTo function 
```

因此，您可以将 CenterPosition 属性添加到精灵的类。

# ruby - Sequel::Model (Ruby ORM) 中的单表继承

> ID：10745117
> 
> 赞同：2
> 
> 时间：2012-05-24T20:54:13.313
> 
> 标签：ruby, orm, model, sequel, default-scope

我的数据库中`providers`有一个名为的表，其类型列名为`provider_type`. `provider_type`可以是以下任意一种：

*   中央
*   赞助

我想创建一个继承自`Sequel::Model`被调用的类`Center`和一个被调用的类`Sponsor`，生成的方法将通过`provider_type = 'center'`or限定相应类的所有查询`provider_type = 'sponsor'`。

我能够做到这一点并不是 100% 必要的，但如果可能的话，那将是理想的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T00:02:50.797

You want the single_table_inheritance plugin:

```
class Provider < Sequel::Model
  plugin :single_table_inheritance, :provider_type
end
class Center < Provider
end
class Sponsor < Provider
end 
```

This will work, but only if the provider_type column matches exactly "Center" or "Sponsor". If not, you might need to add a :model_map option to the plugin call. The documentation on this plugin is located at [http://sequel.jeremyevans.net/rdoc-plugins/classes/Sequel/Plugins/SingleTableInheritance.html](http://sequel.jeremyevans.net/rdoc-plugins/classes/Sequel/Plugins/SingleTableInheritance.html)

# sql - 在 Oracle 中订购 VARCHAR2 日期

> ID：10745118
> 
> 赞同：3
> 
> 时间：2012-05-24T20:54:14.260
> 
> 标签：sql, oracle

我有一列`VIEW`包含格式为“MM/DD/YYYY”的日期值。

如果此列仅包含我列出的格式的日期值，我可以`ORDER BY`在列上执行一个带有 a 的列，`TO_DATE`以使 VIEW 按该日期排序：

```
ORDER BY TO_DATE(MY_DATE_COLUMN, 'MM/DD/YYYY') desc 
```

但是，此列中的数据未格式化为“MM/DD/YYYY”。

无论如何只是使用`SQL`能够对这个被实现为列的列进行排序`DATE`？

我认为这是不可能的，因为数据未格式化为“MM/DD/YYYY”，但我不完全确定......

我也不想在 中添加另一列`VIEW`来完成此操作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T21:03:43.183

一种方法是手动验证日期：

```
order by (case when substr(MY_DATE_COLUMN, 1, 2) between '01' and '12' and
                    substr(my_date_column, 3, 1) = '/' and
                    substr(my_date_column, 4, 2) between '01' and '31' and
                    substr(my_date_column, 5, 1) = '/' and
                    substr(my_date_column, 6, 4) between '1900' and '2100' and
                    len(my_date_column) = 10
               then to_date(MY_DATE_COLUMN, 'mm/dd/yyyy')
          end) desc 
```

这对于大多数用途来说可能已经足够了，尽管它允许 2 月 30 日。

您真正想要的是 Oracle 中的 IsDate 函数，但它不可用。

发布后我意识到可能有更简单的方法：

```
order by substr(my_date_column, 6, 4) desc, substr(MY_DATE_COLUMN, 1, 2) desc,
         substr(my_date_column, 4, 2) desc 
```

它只是提取年、月和日并按降序排序。非日期将被混入，具体取决于它们包含的内容。然而，提问者似乎并不关心顺序，只是简单地消除了语法错误。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-24T21:16:18.680

您可以在此列上创建一个函数，尝试转换日期，但捕获任何异常，并按此排序。

您还可以嵌套例外并尝试多种格式进行转换，然后再默认为您选择的某个日期。例如。

```
CREATE OR REPLACE FUNCTION my2date( p_str in VARCHAR2) RETURN DATE is

BEGIN
      RETURN to_date( p_str, 'MM/DD/YYYY' );
EXCEPTION WHEN OTHERS THEN
    BEGIN
        RETURN to_date( p_str, 'DD/MM/YYYY');
    EXCEPTION WHEN OTHERS THEN
        RETURN sysdate; /* or some other fixed date - depends on if you want these first or last */
    END;
END;
/ 
```

然后只需使用该子句：

```
ORDER BY my2date(MY_DATE_COLUMN) desc; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-24T21:23:32.990

如何修复数据，并添加触发器以防止进一步的错误数据...或添加适当的日期列而不是 varchar ...

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-24T21:25:18.533

实现这一点的最简单方法可能是定义您自己的`to_date()`函数，该函数返回 null（或任何其他默认值，如`sysdate`）。这是可能的，因为`to_date`当它无法处理输入值时会简单地引发异常。

```
CREATE OR REPLACE FUNCTION to_date_null(date_str IN varchar2, format_mask IN varchar2)
RETURN DATE
IS
  l_date DATE;
BEGIN
  l_date := to_date( date_str, format_mask );
  RETURN l_date;
EXCEPTION
  WHEN others THEN
    RETURN null;
END to_date_null; 
```

然后你可以在你的`order by`子句中使用这个函数

```
order by to_date_null(MY_DATE_COLUMN, 'MM/DD/YYYY') desc NULLS LAST; 
```

通过指定`NULLS FIRST`或`NULLS LAST`您可以定义放置非日期值的位置。

# css - Scriptaculous Effect.toggle 不显示外部设置时不出现

> ID：10745119
> 
> 赞同：0
> 
> 时间：2012-05-24T20:54:15.707
> 
> 标签：css, prototypejs, scriptaculous

我在使用 scriptaculous Effect.toggle 让元素出现时遇到问题，我希望元素开始隐藏并在点击时出现。如果我将元素显示设置为无内联，则元素将出现在点击时，但如果我在外部 css 文件中将元素显示设置为无，则它不起作用。

响应式菜单需要该脚本，因此必须在外部 css 文件中设置显示，并且必须切换效果。

两个例子的 Jsfiddle：http: [//jsfiddle.net/TjFKy/](http://jsfiddle.net/TjFKy/)

有谁知道如何解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T20:56:54.427

根据[文档](http://madrobby.github.com/scriptaculous/faq/)，您必须`display: none;`在这些容器上设置内联才能使这些效果正常工作。

# javascript - Jasmine + JSTestDriver + Coverage + RequireJS

> ID：10745126
> 
> 赞同：7
> 
> 时间：2012-05-24T20:54:57.643
> 
> 标签：javascript, backbone.js, requirejs, jasmine, js-test-driver

哇，真是一团糟。这就是场景。

*   骨干驱动的 JS 应用程序。
*   AMD 功能的 RequireJS，初始化如下：

    ```
    <script data-main="js/main" src="js/require.js" type="text/javascript"></script> 
    ```

    然后在 main.js 中使用以下配置代码：

    ```
    require.config(
    {
        paths:
        {
            ... : ...
        }
    }); 
    ```

    每个 Backbone View/Model/Router 都是一个“define(...)”模块，并且在 main.js 中调用了一次“require("theOneRouter", ...)”。

*   r.js 用作 Uglify/Closure 的优化器。在 ./release 子文件夹中创建了一个“已编译”的 main.js，我在 .net 框架中动态选择了该子文件夹。

*   花了很长时间才让 Backbone + Require.JS 工作，但现在工作得很好！

*   然后在上面拍打茉莉花也需要一些定制工作，但效果很好。我必须从我的 SpecRunner.html 加载 require.js，使用 require 的 define(...) 调用将每个测试模块定义为 AMD，然后我从一次对 require 的 require(...) 调用的调用中实例化并运行 Jasmine在 SpecRunner.html 中：

    ```
    require(
    [
    //"test/specs/testSpec1",
    "test/specs/views"
    ],
    function ()
    {
        jasmine.getEnv().updateInterval = 1000;
        var reporter = new jasmine.TrivialReporter();
        jasmine.getEnv().addReporter(reporter);
        ....
        ....
    }); 
    ```

    这也很好用。测试加载并运行，没有问题。Require 处理一切。

现在，我想要一个像 JSTestDriver 这样的框架来充当我的跑步者。我选择 JSTD 是因为它简单、能够在远程浏览器上进行测试、支持代码覆盖率，但我仍然愿意接受其他建议。

JSTestDriver 本身工作正常，我唯一的问题是将 JSTD + Jasmine + ReuireJS 组合在一起运行。最大的问题是，如果我在配置文件中告诉 JSTD 关于 Jasmine/Require 测试模块以便加载它，我会收到以下错误：

[http://requirejs.org/docs/errors.html#mismatch](http://requirejs.org/docs/errors.html#mismatch)

如果我使用 r.js 将我的所有代码优化到一个 main.js 中，那么组合工作，包括 Coverage，但覆盖率被收集在一个巨大的文件中并且难以分析。更不用说检测一个 50k 行代码的 js 文件并通过 JSTD 运行它需要很长时间。

我尝试创建一个类似夹具的 js 文件来加载我所有的 Jasmine 测试模块和代码模块，但我不断返回上面的“不匹配”错误，并且，如果我没有单独告诉 JSTD 每个模块（通过加载一个 html /js 夹具进行真正的加载）它们不会被检测到代码覆盖率。

有没有人让这个特定的组合起作用？可能是我要求太高了……

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T01:10:22.357

解决方案与 devadvocate 提到的完全一样。因为 JsTestDriver 和 Require.js 正在竞争管理文件/依赖项的加载，所以当您尝试 100% 使用 Require.js 方式（使用匿名模块和定义）时，JsTestDriver 会非常适合。相反，您必须命名您的模块并使用 require([...], function(...) {... 而不是 define([...]。我写了一篇文章，展示了如何集成 QUnit、Requirejs、和 JSTD 的代码覆盖率：[js-test-driver+qunit+coverage+requirejs](http://pseudobry.com/js-test-driver-qunit-coverage-requirejs/). 我在示例中使用 QUnit，但您可以轻松地将 QUnit 替换为 Jasmine。在试图解决这个问题时，我考虑过只使用 PhantomJS，但对于我们的用户群来说，我们必须进行跨浏览器测试、IE7、IE8、IE9 等，因此单个 WebKit 不会削减它。JsTestDriver 非常有用，但我担心糟糕的文档会让开发人员望而却步。很快我就会在 GitHub 上获取我的示例代码。希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T12:00:05.530

我无法让它工作，最终使用 PhantomJS 来运行我的 jasmine 测试。[http://phantomjs.org/](http://phantomjs.org/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-27T22:46:18.493

您是否尝试过命名被测模块并在测试中使用 require 而不是 define ？

[https://github.com/podefr/jasmine-reqjs-jstd](https://github.com/podefr/jasmine-reqjs-jstd)

编辑：

我刚刚发布了一个开源工具包，希望它能帮助其他人，就像它帮助我一样。它是许多开源工具的组合，它为您提供了一个开箱即用的 requirejs 主干应用程序。

它提供单个命令来运行：dev web server、jasmine 单浏览器测试运行器、jasmine js-test-driver 多浏览器测试运行器，以及 JavaScript 和 CSS 的连接/缩小。它还输出应用程序的未缩小版本以进行生产调试，预编译您的车把模板，并支持国际化。无需设置。它只是工作。

它还支持正在测试的未命名模块。

[http://github.com/davidjnelson/agilejs](http://github.com/davidjnelson/agilejs)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-20T18:10:58.423

查看这个 repo ( [Bredele appolo](https://github.com/bredele/appolo) )，它是一个在加载了 require.js 和 JsTestDriver的**匿名模块**上运行 Jasmine BDD 规范的环境。

如果您正在开发非匿名模块，我还建议使用[podefr](https://github.com/podefr)解决方案。

奥利维尔

# android - HelloAndroid.java 未自动创建 - Eclipse 中的 Hello World Android 应用程序

> ID：10745129
> 
> 赞同：0
> 
> 时间：2012-05-24T20:55:09.467
> 
> 标签：android, eclipse

我终于安装了 Android SDK/Eclipse 并正确设置了所有内容（我想），但是当我创建一个新的 Android 项目时，它不会自动创建必要的文件（缺少 HelloAndroid.java）。

我只是想做一个简单的[HelloAndroid 示例](http://developer.android.com/resources/tutorials/hello-world.html)来验证所有设置是否正确，显然我可以自己添加文件，但我的设置都是默认设置，我不明白为什么每次都不会为我创建这个文件教程假设它是。事实上，我也找不到其他人关于这个问题的任何帖子。*但是，会*创建HelloAndroidActivity.java 文件。

任何想法为什么没有为我创建这个文件？我是否以错误的方式开始了一个新项目？我在 OSX 10.7.3 上使用 Eclipse。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T21:01:24.690

它是 HellowWorld.java 还是 HelloWorldActivity.java 取决于您在此步骤中选择的内容。无论名称是什么，只要它扩展了 Activity 类就可以了。

![在此处输入图像描述](../Images/72a978c3ce0fa1e9b7dac6e65cb8000f.png)

# windows-phone-7 - 必应地图 WP7 错误

> ID：10745131
> 
> 赞同：0
> 
> 时间：2012-05-24T20:55:11.833
> 
> 标签：windows-phone-7, bing-maps

我正在关注本教程：[http ://www.silverlighthack.com/post/2010/03/21/Using-the-Silverlight-Bing-Maps-control-on-the-Windows-Phone-7.aspx](http://www.silverlighthack.com/post/2010/03/21/Using-the-Silverlight-Bing-Maps-control-on-the-Windows-Phone-7.aspx)

任务 5 表明如果我将 System.Windows.Browser 添加到项目中，它将解决问题。但是，情况并非如此，我收到以下错误：

无法解析主要引用“System.Windows.Browser”，因为它的“5.0.5.0”版本高于当前目标框架中的版本。在当前目标框架中找到的版本是“2.0.5.0”。

无法解析主要参考“System.Windows.Browser”，因为它间接依赖于具有更高版本“5.0”的 .NET Framework 程序集“mscorlib，Version=5.0.5.0，Culture=neutral，PublicKeyToken=7cec85d7bea7798e” .5.0” 比当前目标框架中的版本“2.0.5.0”。

有人知道怎么修这个东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T21:03:54.657

那篇文章描述了在手机上使用 Bing 地图的旧方法。如果您阅读更新段落，它指出：

> Windows Phone 7 RTM 工具包括为 Windows Phone 7 量身定制的全新更新的 Bing 地图控件。如果您对在手机上显示地图感兴趣，请使用该控件。分步说明包含在此处的 Windows Phone 7 培训工具包中。下面的代码仍然有效，如果您需要在 Windows Phone 7 RTM 上使用完整的 Silverlight 控件，这仍然有效。但是，Windows Phone 7 的 Bing 地图控件针对手机运行时、手势和有限资源进行了优化。

您是否考虑过使用[培训套件](http://www.microsoft.com/en-us/download/details.aspx?id=1678)中更新的、改进的控制？

# magento - Magento 和递归

> ID：10745132
> 
> 赞同：1
> 
> 时间：2012-05-24T20:55:15.780
> 
> 标签：magento, recursion

我在这上面花了好几个小时，可以用第二双眼睛。我正在使用 Magento 并想打印类别的“文本层次结构”。就像是：

```
Default Category > Weightlifting Bars & Plates > Bars 
```

我的文字是重复的。这是我的故障应该是什么样子

类别名称（top_category、sub_category1、sub_sub_category1、sub_sub_sub_category3 等）

这是我所拥有的：

```
 Default Category (Default Category)
    Weightlifting Bars & Plates (Default Category > Weightlifting Bars & Plates)
        Bars (Default Category > Weightlifting Bars & Plates > Bars)
            Men's 20kg Bars (Default Category > Weightlifting Bars & Plates > Bars > Men's 20kg Bars)
            Women's 15kg Bars (Default Category > Weightlifting Bars & Plates > Bars > Men's 20kg Bars > Women's 15kg Bars)
            Junior 10k Bars (Default Category > Weightlifting Bars & Plates > Bars > Men's 20kg Bars > Women's 15kg Bars > Junior 10k Bars)
            Technique Bars (Default Category > Weightlifting Bars & Plates > Bars > Men's 20kg Bars > Women's 15kg Bars > Junior 10k Bars > Technique Bars) 
```

请注意，它在“Men's 20kg Bars”之后开始重复。那是因为变量没有被重置。

这是我的代码：

```
function print_tree($tree, $level, $category, $root_id, $print_category) {
    $r = $root_id;
    $cat = $category;
    $level++;

    foreach($tree as $item) {
        if ( $item['name'] == "Default Category" || $r != '' ) {
            if ($level == 1) {
                $cat = $item['name'];
            }
            else {
                $cat .= " &gt; " . $item['name'];
            }

            $parent_id = ($r != '' ? $r : $item['category_id']);
            echo str_repeat("&nbsp;&nbsp;&nbsp;&nbsp;", $level) . $item['name'] . " (" . $cat . ")<br/>";

            $this->print_tree(
                $item['children'],
                $level,
                $cat,
                $parent_id,
                $print_category
            );
        }
    }

    return;
} 
```

什么叫它：

```
$string = Mage::helper('googlemerchant/data')->print_tree($tree['children'], 0, 'Default Category', 0, $cat->getName()); 
```

不要关注 $print_category。这是我用于其他用途的变量。我知道这是一个逻辑错误，而不是 Magento 错误。代码工作正常。

感谢帮助。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T12:52:08.100

我想到了。我不得不修复 $new_cat（以前的 $cat）。

```
 function print_tree($tree, $level, $category, $root_id, $print_category) {
    $r = $root_id;
    $old_cat = $category;
    $new_cat = $category;
    $level++;

    foreach($tree as $item) {
        if ( $item['name'] == "Default Category" || $r != '' ) {
            if ($level == 1) {
                $new_cat = $item['name'];
            }
            else {
                $new_cat = $old_cat . " &gt; " . $item['name'];
            }

            $parent_id = ($r != '' ? $r : $item['category_id']);

            if ( count($item['children']) != 0 ) {
                echo "level " . $level . str_repeat("&nbsp;&nbsp;&nbsp;&nbsp;", $level) . $item['name'] . " (" . $old_cat . ") <br/>";
                $this->print_tree(
                    $item['children'],
                    $level,
                    $new_cat,
                    $parent_id,
                    $print_category
                );
            }
            else {
                echo "level " . $level . str_repeat("&nbsp;&nbsp;&nbsp;&nbsp;", $level) . $item['name'] . " (" . $old_cat . ")<br/>";
                $this->print_tree(
                    $item['children'],
                    $level,
                    $old_cat,
                    $parent_id,
                    $print_category
                );
            }
        }
    }

    return;
} 
```

# python - python paramiko ssh

> ID：10745138
> 
> 赞同：22
> 
> 时间：2012-05-24T20:55:31.053
> 
> 标签：python, ssh, paramiko

我是 python 新手。我写了一个脚本来连接主机并执行一个命令

```
ssh = paramiko.SSHClient()
ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())
ssh.connect(host, username=user, password=pw)

print 'running remote command'

stdin, stdout, stderr = ssh.exec_command(command)
stdin.close()

for line in stdout.read().splitlines():
    print '%s$: %s' % (host, line)
    if outfile != None:
        f_outfile.write("%s\n" %line)

for line in stderr.read().splitlines():
    print '%s$: %s' % (host, line + "\n")
    if outfile != None:
        f_outfile.write("%s\n" %line)

ssh.close()

if outfile != None:
    f_outfile.close()

print 'connection to %s closed' %host

except:
   e = sys.exc_info()[1]
   print '%s' %e 
```

当远程命令不需要 tty 时工作正常。我找到了一个带有 Paramiko 的 invoke_shell 示例[嵌套 SSH 会话](https://stackoverflow.com/questions/1911690/nested-ssh-session-with-paramiko)。我对此解决方案不满意，因为如果服务器的提示未在我的脚本中指定 -> 无限循环或脚本中指定的提示是返回文本中的字符串 -> 并非所有数据都将被接收. 有没有更好的解决方案，比如在我的脚本中将 stdout 和 stderr 发回？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2016-06-01T22:30:42.313

接受的答案有问题，有时（随机）会从服务器带来剪辑响应。我不知道为什么，我没有调查接受答案的错误原因，因为这段代码非常适合我：

```
import paramiko

ip='server ip'
port=22
username='username'
password='password'

cmd='some useful command' 

ssh=paramiko.SSHClient()
ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())
ssh.connect(ip,port,username,password)

stdin,stdout,stderr=ssh.exec_command(cmd)
outlines=stdout.readlines()
resp=''.join(outlines)
print(resp)

stdin,stdout,stderr=ssh.exec_command('some really useful command')
outlines=stdout.readlines()
resp=''.join(outlines)
print(resp) 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-05-25T17:04:50.193

您可以在以下位置找到大量 paramiko API 文档：http: [//docs.paramiko.org/en/stable/index.html](http://docs.paramiko.org/en/stable/index.html)

我使用以下方法在受密码保护的客户端上执行命令：

```
import paramiko

nbytes = 4096
hostname = 'hostname'
port = 22
username = 'username' 
password = 'password'
command = 'ls'

client = paramiko.Transport((hostname, port))
client.connect(username=username, password=password)

stdout_data = []
stderr_data = []
session = client.open_channel(kind='session')
session.exec_command(command)
while True:
    if session.recv_ready():
        stdout_data.append(session.recv(nbytes))
    if session.recv_stderr_ready():
        stderr_data.append(session.recv_stderr(nbytes))
    if session.exit_status_ready():
        break

print 'exit status: ', session.recv_exit_status()
print ''.join(stdout_data)
print ''.join(stderr_data)

session.close()
client.close() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-03T13:33:06.090

**@ThePracticalOne**的代码非常适合显示用法，除了一件事： 有时输出会不完整。（`session.recv_ready()`在`if session.recv_ready():`while`session.recv_stderr_ready()`之后`session.exit_status_ready()`变为真，在进入下一个循环之前变为真）

所以我的想法是在准备退出会话时检索数据。

```
while True:
if session.exit_status_ready():
while True:
    while True:
        print "try to recv stdout..."
        ret = session.recv(nbytes)
        if len(ret) == 0:
            break
        stdout_data.append(ret)

    while True:
        print "try to recv stderr..."
        ret = session.recv_stderr(nbytes)
        if len(ret) == 0:
            break
        stderr_data.append(ret)
    break 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-02T06:13:09.613

无密码 SSH 为我工作

```
import paramiko

def connect_SSH():
    ssh = paramiko.SSHClient()
    username = '<uname>'
    port = <port-no>
    ip = '<ip-address>'
    ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())
    ssh.connect(ip,port,username)

    stdin, stdout, stderr = ssh.exec_command('<cmd>')
    outlines = stdout.readlines()
    resp=''.join(outlines)
    print(resp) 
connect_SSH() 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2020-04-26T12:41:17.010

```
###### Use paramiko to connect to LINUX platform############
import paramiko

ip='server ip'
port=22
username='username'
password='password'
ssh=paramiko.SSHClient()
ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())
ssh.connect(ip,port,username,password)

--------Connection Established-----------------------------

######To run shell commands on remote connection###########
import paramiko

ip='server ip'
port=22
username='username'
password='password'
ssh=paramiko.SSHClient()
ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())
ssh.connect(ip,port,username,password)

stdin,stdout,stderr=ssh.exec_command(cmd)
outlines=stdout.readlines()
resp=''.join(outlines)
print(resp) # Output 
```

# javascript - 重新排列区域内的图块

> ID：10745140
> 
> 赞同：3
> 
> 时间：2012-05-24T20:55:40.737
> 
> 标签：javascript, jquery, html, jquery-ui-sortable, tiles

我正在尝试创建一个可以重新排列的平铺网格。瓷砖大小不一。这是我已经走了多远。

[http://jsfiddle.net/psivadasan/dMtRs/](http://jsfiddle.net/psivadasan/dMtRs/)

如何防止瓷砖在灰色区域之外重新排列？我不希望这种情况发生：http: [//i.imgur.com/0JAfY.png](http://i.imgur.com/0JAfY.png)

感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T21:12:25.487

只需使用`containment`选项：这将阻止元素被拖到外面。

```
$('ul').sortable( "option", "containment", 'parent' ); 
```

[http://jsfiddle.net/dazefs/dMtRs/7/](http://jsfiddle.net/dazefs/dMtRs/7/)

# python - 有效地迭代 SQLAlchemy 集合

> ID：10745142
> 
> 赞同：3
> 
> 时间：2012-05-24T20:55:49.633
> 
> 标签：python, sqlalchemy

我有一个 SQLAlchemy ORM 模型，用于将特定行（完整对象图）从我们的生产数据库传输到我们的测试和开发数据库。这工作得非常好，直到我得到一个包含很多子依赖项的集合，然后我遇到了`MemoryError`. 我已经在对象层次结构的关键点设置了动态加载，并使用不同的查询分别加载子项，但仍有一些集合具有足够的子数据，我遇到了内存问题。

一次只加载一个集合的一个元素的最佳方法是什么，这样我就可以一次复制单个对象（及其所有子行）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T15:00:45.200

[尝试在使用Session.expunge](http://docs.sqlalchemy.org/en/rel_0_7/orm/session.html#sqlalchemy.orm.session.Session.expunge)处理每个节点（带有子节点）后清理会话。下面的示例代码打印会话中的实例数：

```
class Node(Base):
    __tablename__ = 'node'
    id = Column(Integer, primary_key=True)
    parent_id = Column(Integer, ForeignKey('node.id'))
    name = Column(String(50))
    children = relationship("Node",
            backref=backref("parent", remote_side=[id],)
            )

def process_node(node, expunge=False, ident=1):
    print "Node: ", "-" * ident, node, " --> ", len(session.identity_map)
    for child in node.children:
        process_node(child, expunge, ident + 4)
        session.expunge(child)

roots = session.query(Node).filter(Node.parent == None)
for root in roots:
    process_node(root, True) 
```

# c# - If 语句 - 'or' 但不是 'and'

> ID：10745144
> 
> 赞同：7
> 
> 时间：2012-05-24T20:56:10.070
> 
> 标签：c#, if-statement

在 C Sharp 中，如何设置一个 if 语句来检查多个条件之一是否为真？它必须只有一个条件，如果零个或两个或多个为真，则 if 应为假。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-24T21:03:22.907

你可以写一个辅助方法。这样做的好处是短路，只评估必要的数量，

```
public static bool IsExactlyOneTrue(IEnumerable<Func<bool>> conditions) {
    bool any = false;
    foreach (var condition in conditions) {
        bool result = condition();
        if (any && result) {
            return false;
        }
        any = any | result;
    }
    return any;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-24T21:02:06.943

您可以使用将布尔值组合成一个`bool`序列，然后应用 LINQ：

```
bool[] conditions = new bool[] { cond1, cond2, cond3, cond4 };
bool singleTrue = conditions.Count(cond => cond) == 1; 
```

对于两个布尔值，独占 or 变得更简单：

```
bool singleTrue = cond1 != cond2; 
```

**编辑**：为了实现按需评估*和*短路，我们需要将我们的`bool`序列提升为一个`Func<bool>`序列（其中每个元素都是一个封装条件评估的函数委托）：

```
IEnumerable<Func<bool>> conditions = // define sequence here
int firstTrue = conditions.IndexOf(cond => cond());
bool singleTrue = firstTrue != -1 && 
                  conditions.Skip(firstTrue + 1).All(cond => !cond()); 
```

上面的代码片段假设存在基于谓词的`IndexOf`运算符，该运算符在当前版本的 LINQ 下不可用，但可以定义为扩展方法，如下所示：

```
public static int IndexOf<T>(this IEnumerable<T> source, Func<T, bool> predicate)
{
    int i = 0;

    foreach (T element in source)
    {
        if (predicate(element))
            return i;

        i++;
    }

    return -1;
} 
```

用于测试的样本数据（可以在每个上设置断点`false`或`true`在评估之后设置断点）：

```
IEnumerable<Func<bool>> conditions = new Func<bool>[] 
{ 
    () => 
        false,
    () => 
        true,
    () => 
        false,
    () => 
        false,
}; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-24T21:04:48.117

```
List<Func<Customer, bool>> criteria = new List<Func<Customer, bool>>();

criteria.Add(c => c.Name.StartsWith("B"));
criteria.Add(c => c.Job == Jobs.Plumber);
criteria.Add(c => c.IsExcellent);

Customer myCustomer = GetCustomer();

int criteriaCount = criteria
  .Where(q => q(myCustomer))
  // .Take(2)  // optimization
  .Count()
if (criteriaCount == 1)
{
} 
```

* * *

Jason 的方法签名的 Linq 实现：

```
public static bool IsExactlyOneTrue(IEnumerable<Func<bool>> conditions)
{
  int passingConditions = conditions
    .Where(x => x())
    // .Take(2) //optimization
    .Count();
  return passingConditions == 1;
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-24T20:59:37.360

为简单起见，您可以保持运行计数：

```
int totalTrue = 0;
if (A) totalTrue++;
if (B) totalTrue++;
if (C) totalTrue++;
...
return (1 == totalTrue); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-24T21:04:12.810

我认为这可以解决问题

```
 int i= 0;
 if ( (!A || ++i <= 1) && 
      (!B || ++i <= 1) && 
      (!C || ++i <= 1) && 
      ... && 
      (i == 1)) 
```

如果我对此没有想错的话，这`if`将是错误的`i > 1`。如果`i`永远不会增加并且我们达到最后一个条件，则将是错误的，因为`i == 0`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-28T17:49:30.393

这些答案中的大多数都将起作用并具有“良好的性能”。但最简单的答案是：

```
if( (A & !(B || C)) || 
    (B & !(A || C)) ||
    (C & !(A || B)) )
{
   ...
} 
```

你最终会多次评估 A/B/C，所以这只有在你有简单的布尔值时才有用。

# php - 将逗号应用于表格 td 中的数字

> ID：10745149
> 
> 赞同：-1
> 
> 时间：2012-05-24T20:56:36.760
> 
> 标签：php, mysql, numbers, comma

我在 mySQL 生成的表中有一个数字列表：

如何将逗号应用于数字字段：“min”和“max”

```
$query = "SELECT min, max, qty FROM cartons_current LIMIT 0,50";
$result = $db->query($query, MYSQLI_STORE_RESULT);
$o = '<table><thead><tr><th>Min</th><th>Max</th><th>Qty</th></tr></thead><tbody>';
while(list($min, $max, $qty) = $result->fetch_row()) {

$o .= '<tr><td>'.$min.'</td><td>'.$max.'</td><td>'.$qty.'</td></tr>';}
$o .= '</tbody></table>';
echo $o;
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T20:58:52.457

您可能想使用`number_format()`.

[http://us3.php.net/manual/en/function.number-format.php](http://us3.php.net/manual/en/function.number-format.php)

# delphi - 检测 Windows 是否关闭或应用程序是否尝试从系统菜单关闭 (WM_CLOSE)

> ID：10745151
> 
> 赞同：12
> 
> 时间：2012-05-24T20:56:40.487
> 
> 标签：delphi, tray

我有托盘应用程序。

Onj FormCloseQuery 我检查程序是否应该进入托盘而不是关闭它我把它放在托盘中（CanClose := False）

但是，如果 Windows 由于 Windows 关闭而试图关闭我的应用程序，我不想将我的应用程序移动到托盘中，而是关闭它。

Win7 终止了我的应用程序，但 XP 没有关闭，因为我的应用程序仍在托盘中。

如何检测 Windows 是否处于某种“关闭”模式？

谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-24T22:07:54.177

如果`OnCloseQuery`响应`WM_QUERYENDSESSION`消息触发事件，设置`CanClose=False`将导致消息返回`FALSE`。

在 XP 和更早版本上，这将取消 Windows 关闭。到那时，任何收到消息的应用程序`WM_QUERYENDSESSION`都会收到一条`WM_ENDSESSION`消息，其`wParam`值设置为`FALSE`告诉这些应用程序**不要**自行终止。这就是您的应用程序进入托盘并且在 Windows 关闭期间不退出的原因。

Microsoft 在 Windows Vista 中更改了此行为，因此应用程序无法再取消 Windows 关机`WM_QUERYENDSESSION`。这就是 Windows Vista 及更高版本将终止您的应用程序的原因。如果应用程序需要故意停止 Windows 关机，则会引入一个全新的 API。

这记录在 MSDN 上：

[Windows Vista 中的应用程序关闭更改](http://msdn.microsoft.com/en-us/library/ms700677.aspx)

要执行您的要求，您必须`WM_QUERYENDSESSION`直接拦截该消息，以便确定是否`OnCloseQuery`由于 Windows 关闭而被调用。例如：

```
type
  TForm1 = class(TForm)
  private
    procedure WMQueryEndSession(var Message: TWMQueryEndSession); message WM_QUERYENDSESSION;
    procedure WMEndSession(var Message: TWMEndSession); message WM_ENDSESSION;
  end;

var
  ShuttingDown: Boolean = False;

procedure TForm1.WMQueryEndSession(var Message: TWMQueryEndSession);
begin
  ShuttingDown := True;
  inherited;
end;

procedure TForm1.WMEndSession(var Message: TWMEndSession);
begin
  ShuttingDown := Message.EndSession;
  inherited;
end;

procedure TForm1.FormCloseQuery(Sender: TObject; var CanClose: Boolean);
begin
  CanClose := ShuttingDown;
  if not ShuttingDown then
  begin
    // your Tray logic here ...
  end;
end; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-24T21:29:11.137

您的问题源于使用`OnCloseQuery`which 是错误的事件。Remy 的回答解释了如何解决默认 VCL 结束会话消息处理阻止 Windows 关机的问题。而这又是由事件中的设置`CanClose`引起`False`的`OnCloseQuery`。

该解决方法将完成工作，但有一种更简单的方法来处理这个问题。与其阻止表单关闭，不如让它继续关闭。完全删除您的`OnCloseQuery`活动。将其替换为`OnClose`事件。

```
procedure TMainForm.FormClose(Sender: TObject; var Action: TCloseAction);
begin
  Action := caNone;
  Visible := False;
end; 
```

当主窗体关闭时，这段相当琐碎的代码足以使您的应用程序*最小化到托盘。*

# java - 我如何测试以查看是否在 java 的文本字段中按下了 enter 键？

> ID：10745156
> 
> 赞同：3
> 
> 时间：2012-05-24T20:56:57.640
> 
> 标签：java, swing, user-interface, actionlistener, jtextfield

我正在制作一个命令行程序，我需要测试一下是否按下了回车键。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-24T20:58:17.227

如果在具有s 的一段[`JTextField`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTextField.html)时间内按下 enter 键，则触发 an。`JTextField``ActionListener``ActionEvent`

```
JTextField field = ...
field.addActionListener(new ActionListener() {
    @Override
    public void actionPerformed(ActionEvent e) {
        System.out.println("Enter key pressed");
    }
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-25T06:44:40.467

向文本字段添加按键侦听器，并在 keyPressed() 中检查 KeyEvent 的 keyCode。试试下面的例子：

```
public class TestEnterKeyPressInJTextField
{
  public static void main(String[] args)
  {
    JFrame frame = new JFrame();
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    JTextField textField = new JTextField(20);
    textField.addKeyListener(new KeyAdapter()
    {
      public void keyPressed(KeyEvent e)
      {
        if (e.getKeyCode() == KeyEvent.VK_ENTER)
        {
          System.out.println("ENTER key pressed");
        }
      }
    });

    frame.getContentPane().add(textField);
    frame.pack();
    frame.setVisible(true);
  }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-24T23:07:59.450

命令行程序还是 gui 应用程序？

在这里查看[详细答案](https://stackoverflow.com/questions/1457071/how-to-know-when-a-user-has-really-released-a-key-in-java)

```
public void keyTyped(KeyEvent e) {
}

public void keyPressed(KeyEvent e) {
    System.out.println("KeyPressed: "+e.getKeyCode()+", ts="+e.getWhen());
}

public void keyReleased(KeyEvent e) {
    System.out.println("KeyReleased: "+e.getKeyCode()+", ts="+e.getWhen());
} 
```

按您想要的每个键并查看 KeyCode

# django - Django Admin中的动态表单

> ID：10745157
> 
> 赞同：1
> 
> 时间：2012-05-24T20:57:00.237
> 
> 标签：django, django-admin

一个给定的交易有一个激励。根据激励，有 0 个或多个必填字段。该字段的“名称”由 IncentiveRequiredField.name 给出。所以关系就是对于每一个Transaction+RequiredField，都有一个唯一的值。

```
class Transaction(models.Model):
    incentive = models.ForeignKey(Incentive)

class TransactionRequiredField(models.Model):
    transaction=models.ForeignKey(Transaction)
    incentiverequiredfield=models.ForeignKey(IncentiveRequiredField)
    value=models.CharField(max_length=100)

class Incentive(models.Model):
    name = models.CharField(max_length=100)

class IncentiveRequiredField(models.Model):
    incentive = models.ForeignKey(Incentive)
    name = models.CharField(max_length = 100) 
```

我认为我对模型的这一部分是正确的，尽管我不确定。

当我尝试添加新事务时，麻烦就来了。在用户从下拉列表中选择激励之后，我需要能够显示一组标有 IncentiveRequiredField.name 的 TextInputs。这些输入需要绑定到 TransactionRequiredField 模型。

我知道我将需要使用 Javascript 来完成此操作，并且我很乐意通过 jQuery 设置 AJAX 调用以获取 Transaction 的RequiredFields 列表（给定incentive_id），但我对 Django 完全陌生（并且一般是python），所以我不知道如何将它添加到Django Admin中的添加/更改事务视图中。

有人可以向我解释（比如我 5 岁），我该怎么做？

# ruby - 你如何比较两个哈希中的元素

> ID：10745163
> 
> 赞同：1
> 
> 时间：2012-05-24T20:57:16.773
> 
> 标签：ruby

我希望比较两个哈希以确定哪些值可以匹配。例如：

```
hash1 = {
    "hash1_key_a" => 1,
    "hash1_key_b" => 2
}

hash2 = {
    "hash2_key_a" => 1,
    "hash2_key_b" => 3,
    "hash2_key_c" => 4
}

# The method here should display the matching keys & values,
# and then delete them from their hashes. For example:

puts "#{hash1_key_a};#{hash2_key_a};1" # 1 is representing the referral we should
                                       # put in for the value 
```

谁能指导我正确的方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T21:15:56.920

哈希是否有不同的键？然后你可以做这样的事情：

```
hash1.merge(hash2).group_by{|k,v| v}.each{ |v,ks|
   puts "#{ ks.map(&:first)*';' };#{ v }"
} 
```

# jquery - 根据温度范围更改背景颜色

> ID：10745164
> 
> 赞同：1
> 
> 时间：2012-05-24T20:57:19.397
> 
> 标签：jquery, json, api, variables

`body`我从 Weather Underground 获得了一些 API 信息，想知道是否可以使用 API 提供的信息通过 jQuery更改整个背景颜色。

我想做的是`body`根据通过 API 返回的特定温度范围在标签上设置一个类。例如：

```
"current_observation": {
    "image": {
    "url":"http://icons-ak.wxug.com/graphics/wu2/logo_130x80.png",
    "title":"Weather Underground",
    "link":"http://www.wunderground.com"
    },
    "display_location": {
    "full":"Bowling Green, KY",
    "city":"Bowling Green",
    "state":"KY",
    "state_name":"Kentucky",
    "country":"US",
    "country_iso3166":"US",
    "zip":"42101",
    "latitude":"37.02899933",
    "longitude":"-86.46366119",
    "elevation":"154.00000000"
    },
    "observation_location": {
    "full":"Ridgeview Drive, Bowling Green, Kentucky",
    "city":"Ridgeview Drive, Bowling Green",
    "state":"Kentucky",
    "country":"US",
    "country_iso3166":"US",
    "latitude":"36.993744",
    "longitude":"-86.522827",
    "elevation":"714 ft"
    },
    "estimated": {
    },
    "station_id":"KKYBOWLI7",
    "observation_time":"Last Updated on May 24, 2:25 PM CDT",
    "observation_time_rfc822":"Thu, 24 May 2012 14:25:18 -0500",
    "observation_epoch":"1337887518",
    "local_time_rfc822":"Thu, 24 May 2012 14:25:29 -0500",
    "local_epoch":"1337887529",
    "local_tz_short":"CDT",
    "local_tz_long":"America/Chicago",
    "local_tz_offset":"-0500",
    "weather":"Clear",
    "temperature_string":"86.8 F (30.4 C)",
    "temp_f":86.8 
```

这是我要引入的一些信息。最后一个`temp_f`是我想要关注的。

范围的示例是 - 应显示 80 到 90`background:#dd7f35`

我试图为此设置自定义变量，但总是会破坏事情。我似乎无法弄清楚如何使用从 JSON 中提取的信息来设置变量（如果这甚至可能，因为`temp_f`使用小数。）

这是我如何调用 JSON

```
$().ready(function(){ 
    $.getJSON("http://api.wunderground.com/api/[MY API KEY]/conditions/q/autoip.json?callback=?",
    function(data){
        $.each(data, function(i, json) {
        content = '<h1>' + json.icon + '</h1>';
        content += '<img src=' + json.icon_url +'>';
        content += '<p>' + json.temp_f + '<p>';
        $(content).appendTo("#area");
        });
    console.log(data)
    });
}); 
```

这是我尝试过的东西

```
var backDrop = ' + json.temp_f + ' 
```

我之所以使用`+ json.temp_f +`它是因为这对于常规 HTML 来说是很好的，但我可以假设在这种情况下这不起作用？

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T21:03:19.037

```
 var backDrop = json.temp_f; 
```

只需摆脱引号和优点。

或者你可以做这样的事情：

```
 var colorOutput = '';

 if(json.temp_f < 20){
     colorOutput = 'blue'; //use hex color
 }else if(json.temp_f >=20 && json.temp_f < 60){
     colorOutput = 'orange'; //use hex color
 }

 $('#colorMeElement').css('background',colorOutput); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T21:05:09.510

为每个范围颜色组合设置 CSS 样式，例如具有 background:#dd7f35 的 .range_80_90。然后，您可以在脚本中动态创建类并将其应用于适当的元素。

# iphone - cocos2d 场景释放

> ID：10745167
> 
> 赞同：0
> 
> 时间：2012-05-24T20:57:28.483
> 
> 标签：iphone, ios, cocos2d-iphone

我有一个带有 CCMenu 的 Cocos2d 场景（CCLayer）。我将 dealloc 实现为

```
- (void) dealloc {
    [menu release];
    menu = nil;

    [super dealloc];
} 
```

当我使用共享导演将场景替换为另一个场景时，它会加载第二个场景，然后在 dealloc 中程序崩溃，尤其是在

```
[super dealloc]; //Thread1: Program received signal: "EXC_BAD_ACCESS". 
```

替换场景的调用是

```
[[CCDirector sharedDirector] replaceScene:
     [CCTransitionFade transitionWithDuration:0.5f scene:[SomeOtherScene scene]]]; 
```

为什么会这样？我应该调用 [super dealloc] 还是不调用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T16:38:06.680

如果是用 创造`menu`的`[CCMenu menuWithItems:...]`，则不需要在 中释放`dealloc`，因为它没有被保留。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T21:01:44.200

我认为您需要将菜单设置为 nil 然后释放它，这可能是您的问题。要回答您的第二个问题，是的，您绝对应该调用 [super dealloc] ，否则可能会导致更多问题。

# asp.net-4.0 - 无法编辑单元格是 ASP.Net 4.0 / Visual Studio 2010 中的 Infragistics WebDataGrid。为什么？

> ID：10745172
> 
> 赞同：0
> 
> 时间：2012-05-24T20:57:55.233
> 
> 标签：asp.net-4.0, infragistics, webdatagrid

当我双击一个单元格时，我的 Infragistics WebDataGrid 没有进入单元格编辑模式。它没有进入服务器模式 - 没有任何反应。只有客户端事件发生，但我怀疑这些是必要的。下面的 asp.net 段有什么问题？

```
<infra:WebDataGrid ID="wdgProjects" runat="server" EnableAjax="true" AutoGenerateColumns="False"
                        DataSourceID="sqlProjects" DataKeyFields="ProjectID"
                        OnInitializeRow="wdgProjects_InitializeRow"
                        OnCellSelectionChanged="wdgProjects_CellSelectionChanged"
                        OnActiveCellChanged="wdgProjects_ActiveCellChanged" 
                    >
                        <Columns>
                            <infra:TemplateDataField Key="ProjectID" Header-Text="Project ID">
                                <ItemTemplate>
                                    <asp:Label ID="lblProjectID" runat="server" />
                                </ItemTemplate>
                            </infra:TemplateDataField>
                            <infra:TemplateDataField Key="ProjectName" Header-Text="Project Name">
                                <ItemTemplate>
                                    <asp:Label ID="lblProjectName" runat="server" />
                                </ItemTemplate>
                            </infra:TemplateDataField>
                            <infra:TemplateDataField Key="ReportingPeriod" Header-Text="Reporting Period">
                                <ItemTemplate>
                                    <asp:Label ID="lblReportingPeriod" runat="server" />
                                </ItemTemplate>
                            </infra:TemplateDataField>
                            <infra:TemplateDataField Key="ProjectCreator" Header-Text="Project Creator">
                                <ItemTemplate>
                                    <asp:Label ID="lblProjectCreator" runat="server" />
                                </ItemTemplate>
                            </infra:TemplateDataField>
                            <infra:TemplateDataField Key="ProjectCreation" Header-Text="Project Creation Date">
                                <ItemTemplate>
                                    <asp:Label ID="lblProjectCreation" runat="server" />
                                </ItemTemplate>
                            </infra:TemplateDataField>
                        </Columns>
                        <Behaviors>
                            <infra:Activation Enabled="true" />
                            <infra:Selection RowSelectType="Single" CellClickAction="Cell" />
                            <infra:EditingCore AutoCRUD="false" Enabled="true" BatchUpdating="false">
                                <Behaviors>
                                    <infra:CellEditing Enabled="true" EditModeActions-MouseClick="Double">
                                        <ColumnSettings>
                                            <infra:EditingColumnSetting ColumnKey="ProjectID" ReadOnly="true" />
                                            <infra:EditingColumnSetting EditorID="txtProjectName" ColumnKey="ProjectName" />
                                            <infra:EditingColumnSetting EditorID="ddlReportingPeriod" ColumnKey="ReportingPeriod"/>
                                            <infra:EditingColumnSetting EditorID="txtProjectCreator" ColumnKey="ProjectCreator" />
                                            <infra:EditingColumnSetting EditorID="calProjectCreation" ColumnKey="ProjectCreation" />
                                        </ColumnSettings>
                                    </infra:CellEditing>
                                    <infra:RowAdding Alignment="Bottom" EditModeActions-MouseClick="Double"/>
                                    <infra:RowDeleting Enabled="true" />
                                </Behaviors>
                            </infra:EditingCore>
                            <infra:Sorting>
                                <ColumnSettings>
                                    <infra:SortingColumnSetting ColumnKey="ProjectID" />
                                    <infra:SortingColumnSetting ColumnKey="ProjectName" />
                                    <infra:SortingColumnSetting ColumnKey="ReportingPeriod" />
                                    <infra:SortingColumnSetting ColumnKey="ProjectCreator" />
                                    <infra:SortingColumnSetting ColumnKey="ProjectCreation" />
                                </ColumnSettings>
                            </infra:Sorting>
                            <infra:Paging PageSize="15" />
                        </Behaviors>
                        <EditorProviders>
                            <infra:TextEditorProvider ID="txtProjectName">
                                <EditorControl ClientIDMode="Predictable"/>
                            </infra:TextEditorProvider>
                            <infra:DropDownProvider ID="ddlReportingPeriod">
                                <EditorControl DataSourceID="sqlReportingPeriod" TextField="Name" ValueField="Value"
                                    EnableDropDownAsChild="False" DisplayMode="DropDownList" ClientIDMode="Predictable" DropDownContainerMaxHeight="200px"
                                >
                                    <DropDownItemBinding TextField="Name" ValueField="Value" />
                                </EditorControl>
                            </infra:DropDownProvider>
                            <infra:TextEditorProvider ID="txtProjectCreator">
                                <EditorControl ClientIDMode="Predictable"/>
                            </infra:TextEditorProvider>
                            <infra:WebDateChooserProvider ID="calProjectCreation"/>
                        </EditorProviders>
                        <AjaxIndicator Enabled="True" />
                    </infra:WebDataGrid>

                    <asp:SqlDataSource runat="server" ID="sqlProjects" ConnectionString="<%$ ConnectionStrings:HelloUranus %>"
                        SelectCommand="<%$ AppSettings:GetProjects %>" SelectCommandType="StoredProcedure"
                        InsertCommand="<%$ AppSettings:InsertProject %>" InsertCommandType="StoredProcedure"
                        UpdateCommand="<%$ AppSettings:UpdateProject %>" UpdateCommandType="StoredProcedure"
                        DeleteCommand="<%$ AppSettings:DeleteProject %>" DeleteCommandType="StoredProcedure"
                        OnSelecting="sqlProjects_Selecting"
                        OnUpdating="sqlProjects_Updating"
                    >
                        <SelectParameters>
                            <asp:Parameter Name="ProjectID" Type="Int32" />
                            <asp:Parameter Name="ProjectName" Type="String" />
                        </SelectParameters>
                    </asp:SqlDataSource>
                    <asp:SqlDataSource runat="server" ID="sqlReportingPeriod" ConnectionString="<%$ ConnectionStrings:Floobarf %>"
                        SelectCommand="<%$ AppSettings:ReportingPeriods %>"
                    /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T23:34:03.727

使用 TemplateDataField 时，模板中的控件将始终显示，并且这些单元格没有编辑模式，除非您在模板中实现它。如果您正在寻找可以双击编辑单元格的默认行为，那么您应该改用 BoundDataField。如果这样做了，那么网格将使用您在 ColumnSettings 中为您的 CellEditing 行为指定的编辑器。

# iphone - Facebook apprequest 从移动网站打开应用程序

> ID：10745173
> 
> 赞同：2
> 
> 时间：2012-05-24T20:57:56.367
> 
> 标签：iphone, ios, facebook, facebook-graph-api, apprequests

我有一个 iphone 应用程序，可以成功地将 Facebook apprequests 发送给其他 FB 用户。当 FB 用户单击 FB 移动 iphone 应用程序中的 apprequest 通知时，它会执行预期的行为。如果用户已经安装了该应用程序，它会立即打开该应用程序。如果应用程序未安装，它会将用户重定向到应用程序商店。

但是，如果 FB 用户从他们的 iphone 查看移动网页 (m.facebook.com) 并单击通知，它将始终将他们重定向到应用程序商店，无论是否安装了应用程序。如何使行为与 FB 应用程序相同（如果已安装则打开应用程序，如果未安装则打开应用程序商店）？

我在 FB 应用程序设置中尝试了不同的移动 Web URL，但这似乎没有效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T17:39:30.817

截至 2012 年 5 月 25 日，这是一个已知错误，没有解决方法。问题是从浏览器，他们无法判断是否安装了应用程序，所以他们总是重定向到应用程序商店。由FB员工确认。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T17:35:42.107

您可以设置您的移动 web url 页面，以便它执行智能计时器应用商店/应用重定向。此处描述：[https](https://stackoverflow.com/a/1109200/383839) : //stackoverflow.com/a/1109200/383839 当您从移动 Safari 在 m.facebook.com 上运行它时，它可以正常工作。但是 Facebook 应用程序浏览器在此失败，因为它尝试打开 fb123456789:// 方案，即使它不存在 - 由于 ios 限制，它无法检测设备上注册的 url 方案。因此，当从 Facebook 应用程序访问移动 Web url 时，您可以选择检测 Facebook 浏览器并始终显示应用商店链接，而不是运行重定向 javascript。

# django - 使用 jQuery Mobile、Django 和 Phonegap 构建移动应用程序

> ID：10745177
> 
> 赞同：18
> 
> 时间：2012-05-24T20:58:32.670
> 
> 标签：django, json, jquery-mobile, cordova

我目前开始使用 jQuery Mobile 构建一个移动应用程序，并用 Phonegap 包装它以支持本机应用程序，它是我们现有的用 Django 编写的桌面应用程序的扩展，我的问题是连接客户端的最佳方式是什么用html5 / js / css编写的应用程序到服务器端，我是否只使用JSON来发送/接收数据，有没有人有关于这方面的好文章？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-25T00:16:35.720

我个人创建了多个本地应用程序，其中 JqueryMobile 作为我的前端 - Django 作为服务器端 - 并使用 phonegap 本地包装到一个 iTunes 商店应用程序中。这确实是一个很好的技术组合——如果做得正确——可以产生一个快速的本机应用程序。

首先你应该看看Tastypie。Tastypie 是一种创建即时 RESful API 的非常简单的方法，该 API 可以将 JSON 数据发送到 javascript/JQuery。它是一个 Django 应用程序，它非常 Pythonic（大量简单的类/方法覆盖 - 一切都是透明的）。

数据传输流程如下所示：

1.  使用 jquery.ajax 函数或 getJSON 函数从指定的 URL 获取/发布/放置 JSON 数据。

2.  此 URL 是从您的模型创建的美味派 API。它可能看起来像 /api/vi/blogs/all/

3.  现在，您在前端使用 Jquery 获得了 JSON 数据 - 您可以使用它做任何您想做的事情 - 填写表格 - 使用表单 - 等等。

首先查看一些 Jquery/Jquery 移动 ajax 函数以及如何使用 Jquery 库在前端使用 JSON。其次熟悉将 JSON 发送回 Django 视图（解析数据并将其保存到数据库）。然后深入了解 JQuery Mobile 用户界面的细节以及使其与 PhoneGap 良好配合的步骤。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-24T21:14:09.447

您需要注意的一件事是 jquery 内置的同源特性。由于 phonegap 使用带有 url file:// 的 webview，因此您发出的任何 web 请求都将是跨域的，因此您需要配置 jquery mobile 以允许它。

见[http://jquerymobile.com/test/docs/pages/phonegap.html](http://jquerymobile.com/test/docs/pages/phonegap.html)

除此之外，phonegap 移动应用程序和常规 Web 应用程序在获取/发布 JSON 方面没有太大区别。

# sdl.net - SurfaceControl 上未引发 sdl.net 键盘事件

> ID：10745182
> 
> 赞同：0
> 
> 时间：2012-05-24T20:58:46.790
> 
> 标签：sdl.net

我正在使用 SdlDotNet 6.1，我喜欢它 :)

我的 SurfaceControl WinForm 控件（pictureBox），我没有收到按键向上和向下事件所有其他事件（MouseDown、MouseMotion、Tick）似乎只有在调用 Events.Run()（锁定线程......）后才起作用

WinForm 事件“PreviewKeyDown”也没有引发。

我发现 SurfaceControl 需要焦点来引发这些事件。我在 MouseMove 事件上使用 mySurfaceControl.Select() 来强制关注它。

我的问题是keyboardDown事件不是在每个键上引发的......它在AZ Escape NumLock Enter Space F1-12 Pause Home Delete上引发。它不会在 Ctrl Shift Tab 返回 1-9 1-9(num) 个箭头​​符号上引发。Alt 和 Alt-Gr 被提升为 Keys.Menu。

我的 Azerty 键盘（对不起，我是法国人）不是原因，我在 Qwerty 模式下进行了测试。

在 WinForm 事件“PreviewKeyDown”上检测到所有键，但 WinForm 不提供 PreviewKeyup 事件...

所以 Keyboard.IsKeyPressed 总是返回 false 并且 KeyboardState 返回 323 false 但 Events.IsEventEnabled() 是 true。

我需要检测何时按下 AZ：好的 我需要检测是否按下了 Ctrl/Shift/Alt：不可以

有任何想法吗 ？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T09:41:06.230

我尝试了 IsInputKey=true （在 PreviewKeyDownArgs 中），但对 SDL 事件没有影响。

实际上，除了 PreviewKeyDown 之外，还有 KeyDown 和 KeyUp 事件，但它们不显示在属性窗口（Visual Studio 2010）中，并且这些事件有效。与鼠标事件不同，这些事件需要将焦点放在控件上（Control.Select() 提供焦点）。

这些事件对我有帮助，即使 KeyboardState 会更容易！

解决了。

# php - 带有 AJAX 调用的视频 JS 控件

> ID：10745186
> 
> 赞同：0
> 
> 时间：2012-05-24T20:59:06.320
> 
> 标签：php, ajax, html5-video

再会，

我正在尝试创建一个网页，当用户单击某些内容（由 javascript onClick 触发）调用时，将向服务器发送一个 ajax 请求，该请求触发一个 php 文件以生成要分配给 .innerHTML 的 div 的 html。

一切正常，除了视频没有控件（如播放按钮、全屏等）

如果没有 AJAX 调用，一个简单的硬编码版本可以通过控件很好地显示视频，所以使用 AJAX。我正在使用 Video JS 播放器，据我所知，该代码没有任何需要执行的脚本。

这是我的php代码...

```
<?php

    echo '<video id="example_video_1" class="video-js vjs-default-skin" controls preload="auto" width="720" height="528" data-setup=\'{"controls":true}\'><source src="videos/'.$_GET["fn"].'" type=\'video/ogg\'/></video>';

?> 
```

我相信这与javascript没有在AJAX调用上执行的事实有关，但我不确定......

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T22:19:49.567

当您的 AJAX 结果标记尚未加载时，VideoJS 在页面加载时检查视频标签。您需要在视频通话返回后手动初始化 VideoJS。

```
var myPlayer = _V_("example_video_1"); 
```

有关详细信息，请参阅 VideoJS API 文档：http: [//videojs.com/docs/api/](http://videojs.com/docs/api/)

# javascript - Javascript中'this'关键字的目的是什么

> ID：10745187
> 
> 赞同：5
> 
> 时间：2012-05-24T20:59:07.773
> 
> 标签：javascript

与其他语言不同，在 JavaScript 中`this`总是指我们正在执行的函数的“所有者”，或者更确切地说，指的是函数作为方法的对象。

与其他语言相比，这种行为的优势/目的是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T21:04:16.983

因为你可以设置'this'，你可以设置你调用的任何函数的范围，允许你用函数闭包做一些有趣的事情。这就是大多数 JS 框架允许您执行更自然的面向对象的类行为的方式。当您有事件侦听器并想要设置侦听功能的范围时，这尤其有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T21:08:28.143

*   默认情况下，this 指的是全局对象。
*   当函数作为父对象的属性调用时，this 指的是该函数内的父对象。
*   当使用 new 运算符调用函数时，this 指的是该函数内新创建的对象。
*   当使用 call 或 apply 调用函数时，this 指的是传递给 call 或 apply 的第一个参数。如果第一个参数为 null 或不是对象，则 this 指的是全局对象。

取自[http://unschooled.org/2012/03/understanding-javascript-this/](http://unschooled.org/2012/03/understanding-javascript-this/)

也调查一下。

[http://javascriptplayground.com/blog/2012/04/javascript-variable-scope-this](http://javascriptplayground.com/blog/2012/04/javascript-variable-scope-this)

# html - 将 HTML 格式的 SQL 数据转换为 SSRS 中的标准文本

> ID：10745188
> 
> 赞同：0
> 
> 时间：2012-05-24T20:59:12.540
> 
> 标签：html, sql, ssrs-2008, data-conversion

我有一个 MVC2 C#。网络应用程序，它以 html 格式存储某些描述字段的数据。使用 SSRS 显示数据时，数据显示为带有扩展的 html 字符...即，

```
&lt;p&gt;&amp;quot;YOU KNOW WHAT IT MEANS TO ASSUME&amp;quot;&lt;/p&gt; 
```

所以它在报告中看起来很奇怪。我可以对文本进行嵌套替换以创建正确的输出：

```
"YOU KNOW WHAT IT MEANS TO ASSUME" 
```

但似乎应该有某种内置的 functinin SQL 可以做到这一点。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T21:03:09.237

你谷歌搜索“html ssrs”吗？

我找到了这个页面：[在 Reporting Services 2008 中显示 HTML 内容](http://sqlblog.com/blogs/greg_low/archive/2008/08/25/displaying-html-content-in-reporting-services-2008.aspx)

以下是步骤：

1.  在我要显示列的表中，右键单击单元格并选择创建占位符...。

2.  在常规选项卡（新占位符的属性）上，将值设置为所需的列。

3.  在标记类型中，选择 HTML 选项 - 将 HTML 标记解释为样式

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T21:04:49.190

常用表达：

```
= System.Text.RegularExpressions.Regex.Replace(StringWithHTMLtoStrip, "<[^>]+>","") 
```

[来源](http://weblogs.asp.net/rosherove/archive/2003/05/13/6963.aspx)

另一个很好的[例子](http://www.4guysfromrolla.com/webtech/042501-1.shtml)

# wordpress - .htaccess 永久链接重定向

> ID：10745191
> 
> 赞同：0
> 
> 时间：2012-05-24T20:59:21.753
> 
> 标签：wordpress, .htaccess

我想将我的 Wordpress 帖子从 /%title/ 重定向到 %year/%month/%title/。

由于 WP 会在您执行新的永久链接结构时自动重定向页面，因此我希望在我的 .htaccess 文件中进行重定向，以便 Google 了解更改。

这就是我的 .htaccess 文件中的内容，所以我想确认这是正确的结构：

`RedirectMatch 301 http://url-example.com/$3 ^/([0-9]{4})/([0-9]{2})/(.*)$`

让我知道，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T21:02:28.823

由于 WordPress URL 的动态特性，我不相信你会在一个规则中做到这一点。

您可以在`.htaccess`. 但是，WordPress 很可能会为 Google 正确处理这些重定向（即 301）。

使用 Firebug 或 HTTP Live Headers 进行验证。

# svn - 如何将我的 Google Code Subversion 存储库移动到 CollabNet

> ID：10745192
> 
> 赞同：2
> 
> 时间：2012-05-24T20:59:22.920
> 
> 标签：svn, google-code, collabnet

我很难弄清楚如何将我的 Subversion 存储库从 Google Code 移动到我的 CollabNet Subversion Edge 服务器。我已阅读有关制作转储文件、迁移、备份和同步的信息，但找不到正确的答案。我认为正在发生的事情是我不知道在谷歌中输入什么。我完全不知所措。我现在已经搜索了大约 3 个小时。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T22:23:44.473

从 Google Code 获取存储库的转储文件。在 Subversion Edge 中，创建一个新的空存储库，然后使用 Load 选项加载您从 Google Code 获得的转储文件。

如果 Google 不允许您下载转储文件，那么您应该能够在 SVN Edge 中创建一个新的空存储库，然后使用任何客户端的 svnsync 命令行工具将存储库从 Google Code 同步到您的 Subversion Edge 存储库。为此，您只需打开 Subversion Edge 存储库中的 pre-revprop-change 挂钩。钩子脚本可以只是一个空文件或只有一行“exit 0”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-01T04:59:51.003

除了 之外`svnsync`，还有一种更简单的方法可以获取存储库的转储：使用[Apache Subversion 1.7](http://subversion.apache.org/docs/release-notes/1.7.html#svnrdump)版本[`svnrdump`](http://www.visualsvn.com/support/svnbook/ref/svnrdump/)中引入的工具。

# facebook - 将 Facebook 活动分享到我的墙上

> ID：10745197
> 
> 赞同：4
> 
> 时间：2012-05-24T20:59:51.033
> 
> 标签：facebook, facebook-php-sdk, facebook-wall

我似乎无法获得事件的图片，并且在尝试连接到事件图像时也给了我一个致命错误。
**我可以分享一个（已经创建的）事件（不是创建一个，只是链接到它 - 带有图片和描述）并将其发布到我的墙上吗？**

他是我已经拥有的：

```
$facebook->api('/me/feed', 'post', array(
          'message' => 'event test',
          'link' => 'https://www.facebook.com/events/event id/',
          'picture' => 'https://www.facebook.com/events/event id/',//produces an error
          'name' => 'event test',
          'caption' => '',
          'description' => 'event desc',
    )); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T21:34:31.227

这：

```
$facebook->api('/me/feed', 'post', array(
   'link' => 'https://www.facebook.com/events/event id/'
)); 
```

不工作？所有其他信息都应可用于 facebook。

* * *

# 编辑

我不知道为什么简单地分享活动是行不通的。即使在提供信息时，也无法加载图像（如您所写），并显示一条消息，指出无法共享从 fb CDN 提供的图片。

不过，我有两种可能的解决方法：

1）您可以使用 api 请求事件信息，然后发布，例如使用 js sdk：

```
FB.api("EVENT_ID", function(response) {
    FB.ui({
        method: "feed",
        link: "http://www.facebook.com/events/EVENT_ID/",
        name: response.name,
        description: response.description
    });
}); 
```

至于图像，由于您是在服务器上进行的，因此您可以下载图像 ( `https://graph.facebook.com/EVENT_ID/picture?type=large`)，将其存储在您的服务器上，然后将其添加到帖子中。

2）根据[Event对象的Invited连接](http://developers.facebook.com/docs/reference/api/event/#invited)：

> 您可以通过向 /EVENT_ID/invited/USER_ID 发出 HTTP POST 来邀请用户参加活动。您可以通过向 /EVENT_ID/invited?users=USER_ID1,USER_ID2,USER_ID3 发出 HTTP POST 来邀请多个用户。这两个都需要 create_event 权限，如果邀请成功则返回 true。

因此，您可以直接邀请朋友参加活动。
我知道它不一样，但它可能总比没有好，这取决于你需要这个。

我建议您在[Bugs 系统](http://developers.facebook.com/bugs)上打开一个错误报告。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T21:41:03.667

尝试使用`/me/links`连接而不是`link`作为 Facebook 事件链接和`message`您要添加的描述

![共享的链接](../Images/82ae99d9ec7cb769ca644b47a2f156ed.png)

![在股票上](../Images/69b1ce1f53851a4f69ca7caec051e638.png)

在这里它与内置共享进行比较

![比较两者，显示相同的演示文稿](../Images/87b11c96519f6536f1a1c8e24712e9c4.png)

有关更多信息，`/links`请参阅[http://developers.facebook.com/docs/reference/api/user/#links](http://developers.facebook.com/docs/reference/api/user/#links)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-28T08:52:36.947

FYI`/me/links`有一个已知的错误，其中有一些它应该接受的参数。Afaik, FB 尽管最初是去年报道的，但仍然没有修复它，然后在今年一月再次报道。尽管错误报告是针对页面帖子的，但它可能与您面临的问题有关：

[错误链接](https://developers.facebook.com/bugs/230178987060765)

我正在尝试做和你类似的事情，它从一开始就是皇家 PITA，经过很多努力我仍然没有成功。祝你好运！

# java - 如何使用操作系统的默认文件选择器？爪哇

> ID：10745198
> 
> 赞同：16
> 
> 时间：2012-05-24T20:59:52.170
> 
> 标签：java, jfilechooser

我只是想知道：Gmail 如何使用 Windows/Mac 文件选择器来上传文件？有没有办法**在 Java**中做到这一点？

[![在此处输入图像描述](../Images/8456504cb72df5daa9220b41c6fe16ed.png)](https://i.stack.imgur.com/9MMkc.jpg)

就个人而言，我不喜欢它的`JFileChooser`外观，我认为让我的用户能够使用他们更习惯的东西会更好。提示任何人？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-24T21:07:18.137

请改用旧的 java.awt.FileDialog：

```
new java.awt.FileDialog((java.awt.Frame) null).setVisible(true); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-05-24T21:11:58.887

您可以尝试使用 JFileChooser 但将外观设置为平台外观：

```
 try {
        UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
    }catch(Exception ex) {
        ex.printStackTrace();
    } 
```

这将使所有摆动组件看起来更好！

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-24T21:08:38.983

GMail 是一个最终依赖于浏览器来显示该组件的 Web 应用程序。现在一个好的解决方案是使用系统的 Native Look&Feel，它提供了一个与您显示的非常相似的 JFileChooser：

```
UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName()); 
```

![在此处输入图像描述](../Images/80307aad989bdc46e224ad8483cac223.png)

编辑：Pulsar 的解决方案更好，因为它提供了您正在寻找的确切对话框。我不确定它是否提供了 JFileChooser 的所有功能。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-24T21:17:44.073

[SWT](http://en.wikipedia.org/wiki/Standard_Widget_Toolkit)组件的样式始终与正在运行的操作系统中的样式相同。你可以看到一些例子：

*   [文件对话框示例：对话框 « SWT JFace Eclipse « Java](http://www.java2s.com/Code/Java/SWT-JFace-Eclipse/FileDialogExample.htm)
*   [eclipse.platform.swt.git - Eclipse SWT](http://git.eclipse.org/c/platform/eclipse.platform.swt.git/tree/examples/org.eclipse.swt.snippets/src/org/eclipse/swt/snippets/Snippet72.java)

假设从 Java 7 版本开始，Swing 样式将更像操作系统的样式，但可能会在 Java 8 中看到。

# php - 变量不会在 foreach 循环中重写

> ID：10745200
> 
> 赞同：-1
> 
> 时间：2012-05-24T20:59:55.327
> 
> 标签：php

我有这个 php 代码，我很确定它没问题。但是$category 变量没有被重写，即即使$category 是'251'，if 循环也不会执行为真。

任何想法为什么？

```
foreach($cars->cardata as $cardata ){

    $category = $cardata->categorie;

    if($category == '251'){
        $category = 'BWM';
    }

    echo $category;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T21:17:59.023

```
foreach($cars->cardata as $cardata ){

    $category = $cardata->categorie;

    if(trim($category) == '251'){
        $category = 'BWM';
    }

    echo $category;
} 
```

# c++ - 在为嵌入类定义方法时，有没有办法避免重复包含类？

> ID：10745203
> 
> 赞同：2
> 
> 时间：2012-05-24T21:00:02.180
> 
> 标签：c++, namespaces, nested-class

在 C++ 中，我可以在声明成员函数的另一个类中定义一个类。后来，当我为这些声明定义定义时，有没有办法不重复包含类。例如，我的标题可能如下所示：

```
class Outer {
  class Inner {
    void one();
    void two();
    void three();
  };
}; 
```

稍后，我的定义可能如下所示：

```
void Outer::Inner::one() { ... }
void Outer::Inner::two() { ... }
void Outer::Inner::three() { ... } 
```

是否有某种方式可以省略 Outer 而无需在声明点进行定义，可能是通过使用命名空间成为：

```
void Inner::one() { ... }
void Inner::two() { ... }
void Inner::three() { ... } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T21:11:30.910

我没有专门尝试过这个（这里没有编译器），但我会冒险猜测如果你正在使用内部类，比如 ::iterator，你可能会这样做：

```
using outerclass::innerclass; 
```

然后做：

```
innerclass::foo() { /* def */ } 
```

假设在外部类的范围内没有与您的内部类同名的全局变量。

此外，您绝对可以使用宏，并且可能使用 typedef（不确定，但值得一试）。

*我想说所有这一切都会使您的代码可读性降低，尽管无论您如何解决它，这都是一个坏主意。*

# mysql - 如何从表中的单个列中检索匹配值？

> ID：10745205
> 
> 赞同：-2
> 
> 时间：2012-05-24T21:00:29.707
> 
> 标签：mysql, sql

我有一张下表

```
Id     Avatar
1      Smarty.resident
2      ticklethis.resident
3      Renae resident
4      ticklethis
5      Smarty resident
6      Hirpantemp
7      loveyoubaby
8      Hirpantemp.resident
9      Renae
10     Sweetme
11     ticklethis resident 
```

我无法编写 SQL 命令来获得类似的名称，如下所示

```
Id     Avatar
1      Smarty.resident
5      Smarty resident
2      ticklethis.resident
4      ticklethis
11     ticklethis resident
3      Renae resident
9      Renae
6      Hirpantemp
8      Hirpantemp.resident 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T21:13:59.060

这对于替换中的假设有点可疑，但这可能适用于给定的数据集：

```
select ID, Avatar
from MyTable
where replace(replace(Avatar, '.resident', ''), ' resident', '') in (
    select replace(replace(Avatar, '.resident', ''), ' resident', '') as Avatar
    from MyTable
    group by replace(replace(Avatar, '.resident', ''), ' resident', '')
    having count(*) > 1
) 
```

# eclipse - eclipse 产品导出向导 - 镜像工件描述符时的消息

> ID：10745206
> 
> 赞同：0
> 
> 时间：2012-05-24T21:00:38.730
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp, osgi, product

我有一个 Eclipse 产品，我使用“eclipse 产品导出向导”导出到不同的操作系统

该应用程序曾经在导出中包含 javax.mail_1.4.0.v201005080615.jar，但它不再需要该 jar。

应用程序在没有这个 jar 的情况下运行完美，但是当我从 pr 中删除它时

但是，如果我从依赖项中删除它，我会得到以下异常

`C:\Users\Kris\workspace.metadata.plugins\org.eclipse.pde.core\temp\org.eclipse.pde.container.feature\assemble.org.eclipse.pde.container.feature.p2.xml:47: The following error occurred while executing this line: C:\Users\Kris\workspace.metadata.plugins\org.eclipse.pde.core\temp\org.eclipse.pde.container.feature\assemble.org.eclipse.pde.container.feature.p2.xml:127: Messages while mirroring artifact descriptors. Artifact not found: osgi.bundle,javax.mail,1.4.0.v201005080615. The following error occurred while executing this line: C:\Users\Kris\workspace.metadata.plugins\org.eclipse.pde.core\temp\org.eclipse.pde.container.feature\assemble.org.eclipse.pde.container.feature.p2.xml:127: Messages while mirroring artifact descriptors. Artifact not found: osgi.bundle,javax.mail,1.4.0.v201005080615.`

它最烦人，因为我不知道这意味着什么？！

然后，当我部署应用程序时，我还必须删除导出中包含的这个 jar

帮助，eeeeck！

克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T22:34:17.153

搜索您的所有插件和功能项目，以确保“javax.mail”不在您不期望的地方。并确保您正在导出到一个新目录（这样它就不会在那里找到其他任何东西）。

# php - htmlpurifier 在用户输入 html 时返回问号？

> ID：10745207
> 
> 赞同：1
> 
> 时间：2012-05-24T21:00:56.853
> 
> 标签：php, html, validation, htmlpurifier

```
&nbsp; 
```

它几乎不像是需要净化的 html 代码。

当它显然应该是一个空格时，为什么 htmlpurifier 将该字符串变成一个问号？

我确切的 html 净化代码是：

```
//purify the html input
include_once('inc/htmlpurifier-4.4.0/library/HTMLPurifier.auto.php');

$config = HTMLPurifier_Config::createDefault();
$config->set('Core.Encoding', 'UTF-8');
$config->set('HTML.Doctype', 'HTML 4.01 Transitional');

if (defined('PURIFIER_CACHE')) {
    $config->set('Cache.SerializerPath', PURIFIER_CACHE);
} else {
    # Disable the cache entirely
    $config->set('Cache.DefinitionImpl', null);
}

$input = $_POST["about_me"];

# Help out the Purifier a bit, until it develops this functionality
while (($cleaner = preg_replace('!<(em|strong)>(\s*)</\1>!', '$2', $input)) != $input) {
    $input = $cleaner;
}

$filter = new HTMLPurifier($config);
$htmlpurified_output = $filter->purify($input); 
```

我在我的 php 页面标题中启用了 utf8，并且在保存信息时也为 mysql 启用了 utf8。

我能够在同一页面上的其他文本区域内写入、保存到数据库并重新显示其他 UTF8 字符。罪魁祸首肯定是 htmlpurifier 返回问号而不是实际字符。

我会回答我能回答的任何其他问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T23:23:43.650

而答案是……

始终确保您的编码在所有区域都正确设置。

我将表的“about_me”行仅设置为接受 ascii 字符。呃。

很抱歉浪费了大家的时间。

# ruby-on-rails-3 - Rails 3：ActiveRecord 结果和 Array#include？

> ID：10745212
> 
> 赞同：0
> 
> 时间：2012-05-24T21:01:27.307
> 
> 标签：ruby-on-rails-3, activerecord

这是我的模型结构：

```
A User has and belongs to many groups
A Group has many subscriptions
A Group has and belongs to many users
A Group has many GroupAdmins
A Subscription belongs to a group
A GroupAdmin belongs to a user
A GroupAdmin belongs to a Group 
```

当我查询数据库（使用活动记录）时，我应该能够执行以下操作：

```
u = User.find 47238 
```

在我的用户模型中，我有一个名为订阅的方法：

```
def subscriptions
    self.groups.where(:status => 'active').collect { |group| group.subscriptions.where("subscriptions.status = ? AND subscriptions.expiration_date > ?", 'active', "#{Time.zone.now}").last  }.flatten
  end 
```

然后继续我的查询：

```
u.subscriptions.first.group.group_admins 
```

上面返回了一个组的记录和我最初查询的用户 ID。但是由于某种原因，当我在 Group 内部运行这个方法时，我得到了一个错误的返回：

```
def is_group_admin?(user)
    self.group_admins.include? user
  end 
```

工作代码：

```
def is_admin?(user)
    self.group_admins.collect { |ga| ga.user }.include? user
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T22:51:35.850

`group_admins`返回 GroupAdmin 对象的集合。这些可能（通过它们的 user_id）对应于用户，但它们实际上不是用户，因此`group_admins.include?(user)`只能返回 false。

根据您的操作，您可以调用`include?`或`group_admins.collect {|ga| ga.user}`搜索具有适当`user_id`值的 GroupAdmin。

# android - WebView 不会缩小以适应页面的高度

> ID：10745213
> 
> 赞同：2
> 
> 时间：2012-05-24T21:01:28.240
> 
> 标签：android, android-layout, android-webview

我一直在使用 a`WebView`来加载不同的数据（HTML 数据），一切正常。但是问题来了`WebView`，当我加载一个较小的页面时拒绝收缩。WebView 的高度设置为`WRAP_CONTENT`.

我尝试了很多事情，例如清除历史记录（也许历史记录中的一个页面将他卡在这个大小），尝试将高度设置为 0，然后`WRAP_CONTENT`在每次页面更改之前再次设置并尝试使用`clearView()`，但这完全破坏了 WebView .

无论如何，这是我的加载代码：

```
// Clearing the web view
mWebView.loadUrl("about:blank");
mWebView.loadData(mItem.getHtml(), "text/html", "utf-8"); 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T22:52:26.037

WebViews 不会包装到正在显示的 html 的内容，因为它们在加载 webview 的内容之前通过布局。WebView 内容通常是动态的，因此这样包装没有意义。

如果您只是尝试使用 HTML 设置文本样式，则实际上可以为此使用 textview。

```
mTextView.setText(Html.fromHtml(text)); 
```

# c# - 如何将数据保存到数据库

> ID：10745214
> 
> 赞同：1
> 
> 时间：2012-05-24T21:01:32.023
> 
> 标签：c#, sql-server-2008

我已经搜索并找到了将数据保存到数据库的代码，连接字符串是好的，并且没有抛出异常/错误，但我不知道为什么这段代码没有将数据保存到我的数据库中..

```
 string query = "Insert Into BookConfiguration (BookNum, x_axis, y_axis, BookName) Values (@BookNum, @x_axis, @y_axis, @BookName)";
    string connStr = "Data Source=.\\SQLEXPRESS;AttachDbFilename=|DataDirectory|\\BookShelf.mdf;Integrated Security=True;User Instance=True";

    try
    {
        using (SqlConnection conn = new SqlConnection(connStr))
        {                   
                SqlDataAdapter da = new SqlDataAdapter();
                da.InsertCommand = new SqlCommand(query, conn);
                da.InsertCommand.Parameters.Add("@BookNum", SqlDbType.Int).Value = quantity;
                da.InsertCommand.Parameters.Add("@x_axis", SqlDbType.Int).Value = x;
                da.InsertCommand.Parameters.Add("@y_axis", SqlDbType.Int).Value = y;
                da.InsertCommand.Parameters.Add("@BookName", SqlDbType.Text).Value = openFileDialog1.FileName;
            conn.Open();    

            da.InsertCommand.ExecuteNonQuery();

            conn.Close();
        }
    }

    catch (SqlException ex)
    {
        MessageBox.Show("Error Occured " + ex.Message);
    } 
```

**编辑** 我现在改变了代码同样的问题

代码：

```
 try
        {
            using (TransactionScope scope = new TransactionScope())
            {

                using (SqlConnection conn = new SqlConnection(connStr))
                {
                    conn.Open();
                    using (SqlCommand cmd = new SqlCommand(query, conn))
                    {
                        cmd.Parameters.Add(new SqlParameter("@BookNum", quantity));
                        cmd.Parameters.Add(new SqlParameter("@x_axis", x));
                        cmd.Parameters.Add(new SqlParameter("@y_axis", y));
                        cmd.Parameters.Add(new SqlParameter("@BookName", openFileDialog1.FileName));
                        cmd.ExecuteNonQuery();
                    }
                    conn.Close();
        }

                scope.Complete();
            }
        } 
```

我希望它清楚而不是模糊......

在 c# Visual Studio 2010 sql server 2008 中编码...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T21:20:43.020

我几乎可以保证，由于您使用的是已弃用的用户实例/AttachDbFileName 功能，因此您正在查看与程序不同的数据库副本。

请在此处查看@marc_s 的答案以了解如何进行：

[https://stackoverflow.com/a/10740026/61305](https://stackoverflow.com/a/10740026/61305)

本质上，停止使用这个无用的功能。将您的数据库附加到 SQL Server 的真实实例，然后您的数据库是固定的，您可以连接到与您的程序相同的副本...

# javascript - Javascript - 获取一行中的最后一个单词

> ID：10745218
> 
> 赞同：3
> 
> 时间：2012-05-24T21:01:39.090
> 
> 标签：javascript, word-wrap

这是一个例子：

```
<div><span style="font-size:15px;">some text here which is </span>
<span style="color:red;">split automatically by the browser.</span></div> 
```

浏览器呈现为（当然有样式）：

```
some text here which is split
automatically by the browser. 
```

我正在构建一个 javascript 应用程序，它必须理解每一行中的最后一个单词（`split`在这种情况下）。目前我正在使用 CSS`white-space`属性来处理溢出文本。因此，浏览器不会告诉我它在哪里断线。那么，什么是理解每行最后一个单词的好功能呢？

**编辑**

我使用的是纯 javascript，所以 jQuery 不是一个选项，并且该`white-space`属性应用于`div`. 所以实际上，将其`div`视为线渲染器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T22:16:49.117

您可以逐字重写整个句子，跟踪高度变化。以下是通过代码进行的一些解释：

HTML：

```
<div id="flop" class="foobar">Lorem ipsum dolor sit amet, consectetur adipisicing 
elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim 
ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea 
commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit 
esse cillum dolore eu fugiat nulla pariatur.</div>
<br>
<button value="Go" onclick="foo();">Go</button>​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

脚本：

```
function foo(){
    var d = document.getElementById('flop');
    var t = d.innerHTML;
    var w = t.split(' ');       

    d.innerHTML = w[0];
    var height = d.clientHeight;
    for(var i = 1; i < w.length; i++){
        d.innerHTML = d.innerHTML + ' ' + w[i];

        if(d.clientHeight > height){
            height = d.clientHeight;
            console.log(w[i-1]);
        }
    }
} 
```

这会将每行的最后一个单词记录到控制台，除了最后一行。我把它留给你。这个解决方案的好处是即使在调整窗口大小后它也能正常工作。

顺便说一句，[蒋毅](https://stackoverflow.com/users/313758/yi-jiang)在 SO 上对[这个问题](https://stackoverflow.com/questions/3738490/finding-line-wraps)的回答值得称赞。

# math - 来自 3D 体积的随机 2D 切片

> ID：10745221
> 
> 赞同：2
> 
> 时间：2012-05-24T21:01:46.680
> 
> 标签：math

我想从计算机程序中的 3D 体积中获取随机 2D 切片以生成噪声。我决定使用旋转矩阵，据我所知，它必须是旋转组 SO(3) 的成员。如何创建该组的统一随机成员？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T22:14:54.503

在 0 和 1 之间选择三个随机值 u [1]、 u [2]和 u [3 。]

均匀随机四元数[由下式给出](http://planning.cs.uiuc.edu/node198.html)：

*   w = sqrt(1 - u [1] )sin(2pi*u [2] )

*   x = sqrt(1 - u [1] )cos(2pi*u [2] )

*   y = sqrt(u [1] )sin(2pi*u [3] )

*   z = sqrt(u [1] )cos(2pi*u [3] )

然后，您可以使用[以下公式](http://www.flipcode.com/documents/matrfaq.html#Q54)生成适当的旋转矩阵：

```
 |       2     2                                |
    | 1 - 2y  - 2z    2xy - 2zw      2xz + 2yw     |
    |                                              |
    |                       2     2                |
M = | 2xy + 2zw       1 - 2x  - 2z   2yz - 2xw     |
    |                                              |
    |                                      2     2 |
    | 2xz - 2yw       2yz + 2xw      1 - 2x  - 2y  |
    |                                              | 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T21:10:45.580

您可以绘制一个随机 3D 向量，由三个独立的随机变量作为每个轴组成。然后，您可以将此向量定义为随机 2D 切片的法线向量以及该 2D 切片与原点的距离。我很确定（尽管没有正式的证据）这种方法应该在可能的 2D 切片上提供均匀分布（前面的陈述基本上是非正式的）。

编辑：再三考虑，您可能应该绘制一个自变量来表示 2D 切片与原点的距离。否则，您将得到一个 2D 切片分布，这些切片更有可能与原点相距一定距离。

# wpf - WPF DataGrid 的绑定速度非常慢，在单元格内使用大数据（~75k）调整大小

> ID：10745224
> 
> 赞同：2
> 
> 时间：2012-05-24T21:01:49.980
> 
> 标签：wpf, performance, datagrid

我有一个 WPF DataGrid，我从 SQL 数据库加载数据。一些单元格填充了长达 80k 的文本。即使对于少于 10 行，这也会使 DataGrid 绑定到数据非常慢，并且重新调整大小或滚动也非常慢。

我正在考虑向我将 SQL 数据拉入的数据对象添加另一个属性，以便为显示目的对这些大字符串进行截断（前 30 个字符左右）版本。但是，我认为这并不少见，并且想知道 DataGrid 中是否存在处理此问题的构造或模式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T21:38:30.930

好吧，你不应该把 80k 的文本数据放在 DataGrid 中，这在各种方面都是非常糟糕的设计。

添加带有摘录文本的附加列，例如 20 个字符左右，绑定到该列，让用户将鼠标悬停或打开子窗口以动态加载完整的数据集。

# c# - ICustomMarshaler::MarshalNativeToManaged，从本机 dll 接收正确数据“丢失”它返回的对象

> ID：10745225
> 
> 赞同：2
> 
> 时间：2012-05-24T21:01:55.353
> 
> 标签：c#, pinvoke

我正在使用我自己的实现 ICustomMarshaler 的编组器来使用本机（非托管）dll C 函数。

在 MarshalNativeToManaged 函数中，我确实看到了来自 dll 端的正确结果。问题是 MarshalNativeToManaged 返回的对象没有“使用”。带有 (In, Out) 参数的调用函数中的对象没有改变。

（看起来这与之前在这里讨论过的问题完全相同“C#：具有自定义编组器的对象在 PInvoke 调用后不包含数据”） [C#：具有自定义编组器的对象在 PInvoke 调用后不包含数据](https://stackoverflow.com/q/2636166/1415939)

简单的类：

```
 [StructLayout(LayoutKind.Sequential)]
    class CMA { 
        public int a; 
        char b;
        public char get_b() { return b; }
    } 
```

该函数的签名如下所示：

```
[DllImport("first.dll", EntryPoint = "hack")]
    public static extern int hack([In, Out, MarshalAs(UnmanagedType.CustomMarshaler,
                                            MarshalTypeRef=typeof(ZMarshal))] CMA cma); 
```

在主要的某个地方，我这样称呼它：

```
int retcode = hack(cma); 
```

在 MarshalNativeToManaged 中，我确实看到了 dll 函数调用的正确结果。

```
 public object MarshalNativeToManaged(IntPtr pNativeData)
    {
        // everything is fine with pNativeData;
        // but let us even say I ignore it
        // and return the object in the following way:
        CMA cma = new CMA();
        cma.a = 999;
        return cma; // this will be lost. I mean cma object in the main will not be changed
    } 
```

我在这里做错了什么？只是一个简短的说明：我确实想知道如何使用 CustomMarshaler 而不是“其他方式”来处理它:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T14:45:30.670

好的，看起来我知道现在发生了什么。

诀窍在于，在处理 Object 时，我们实际上是在处理指针（无论 C# 多么努力地试图隐藏这一事实）并且一步一步地： 1) hack(CMA* pCMA); 2) MarshalManagedToNative(void* pCMA) // C# 传递我们传递给 hack 的指针 3) Void* MarshalNativeToManaged(void *_some_PTR_to_memory_visible_to_managed_and_unmanaged_area) 问题是.NET 对这个函数返回的 Void* ptr 做了什么？如果不使用 ref ，则无法更改 hack(cma) 中的对象。这个指针根本不在任何地方使用。该函数可能无效。

```
 public class ZMarshal : System.Runtime.InteropServices.ICustomMarshaler
{
    static ZMarshal static_instance;
    object oo;
    public IntPtr MarshalManagedToNative(object o)
    {
        if (!(o is CMA))
           throw new System.Runtime.InteropServices.MarshalDirectiveException("Blabala");
        oo = o; 
```

后来在 MarshalNativeToManaged

```
 public object MarshalNativeToManaged(IntPtr pNativeData)
    {

        // some code that deals with the pNativeData really
        // but for our example only let us say we simply ignore what we just got
        // from the unmanaged world and simply change our object

        ((CMA)oo).a = 999;
        return oo; // this will not be lost now :) 
```

如果我们像这样使用 ref hack(ref CMA); // 感谢上一个答案顺便说一句，在这种情况下，它是 hack(CMA**pp)，.NET 确实使用了我们从 MarshalNativeToManaged 返回的指针 *pp = oo;

底线是我们要么必须保留我们的指针并更改它指向的内存值，要么（使用 ref）将指针传递给指针（是的，旧的好**真的）并更改指针本身的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T00:27:15.523

C# 语言要求您将参数声明为*ref*或*out*以允许它返回新值。使固定：

```
[DllImport("first.dll", EntryPoint = "hack")]
public static extern int hack(
    [In, Out]
    [MarshalAs(UnmanagedType.CustomMarshaler, MarshalTypeRef=typeof(ZMarshal))]
    ref CMA cma); 
```

# facebook - facebook api 的限制是什么？

> ID：10745235
> 
> 赞同：-3
> 
> 时间：2012-05-24T21:02:43.403
> 
> 标签：facebook, api

我在哪里可以找到有关它们的更多信息？

我看过但找不到任何东西，所以我假设没有？

（“限制”与每秒/分钟/小时/天可以“点击”他们的 API 的次数有关）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T21:06:07.580

当然有限制。

例如，当某人授予使用您的 Facebook 应用程序的权限时，您无法收集该人的朋友的电子邮件地址。您也无法获得 Facebook 页面的所有粉丝（过去有可能，但现在似乎不再可能），因为它很容易被滥用于发送垃圾邮件。文档中并未明确提及所有限制，因此您只需尝试查看即可。

# ant - 在单独的 JVM 中运行目标

> ID：10745242
> 
> 赞同：0
> 
> 时间：2012-05-24T21:03:11.927
> 
> 标签：ant, exec

wsimport 任务中有一个有趣的错误，它似乎在任务完成时破坏了类加载器的内容。NetBeans 喜欢在“进程中”运行 ant 脚本，这个错误在运行包含任务的脚本后会引发各种破坏。

为了解决这个 bug 造成的破坏，我想强制 ant 创建一个单独的子进程，用于 ant 的二次调用，它将 wsimport 任务隔离在它自己的私有 JVM 中。

看起来“ant”和“antcall”任务将目标调用保持在同一个JVM中......尽管我可能错了。

对于用户可能多次安装 ant 的情况，exec 似乎很笨拙，因为用户正在运行的 ant 可能不是在 ant 尝试查找可执行文件 =“ant”时得到解析的可执行文件。

有没有一种安全的方法来获取当前被用作将用于在不同 JVM 中运行目标的蚂蚁？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T12:17:34.997

您可以使用该`ant.home`属性的值。

```
<project default="test">
    <target name="test">
        <echoproperties>
            <propertyset>
                <propertyref prefix="ant."/>
            </propertyset>
        </echoproperties>
        <echo>Ant Home: ${ant.home}</echo>
    </target>
</project> 
```

# java - 尝试从 Java 连接到 Amazon S3 时出现“无效参数 GET '/'”，有什么想法吗？

> ID：10745243
> 
> 赞同：2
> 
> 时间：2012-05-24T21:03:14.200
> 
> 标签：java, amazon-s3

我正在使用 JetS3t 工具包从我的 Java 应用程序连接到 S3。这在过去运行良好，并且与运行代码的 Linux 服务器上的当前代码一起运行良好。

但是最近当我尝试在我的 Mac 上运行相同的代码时，我得到了这个异常： 原因：

```
org.jets3t.service.S3ServiceException: Request Error: java.net.SocketException: Invalid 
argument GET '/' on Host 's3.amazonaws.com'
    at org.jets3t.service.S3Service.getBucket(S3Service.java:1911)
...
Caused by: java.net.SocketException: Invalid argument
    at java.net.SocketInputStream.socketRead0(Native Method)
    at java.net.SocketInputStream.read(SocketInputStream.java:150)
    at java.net.SocketInputStream.read(SocketInputStream.java:121)
    at sun.security.ssl.InputRecord.readFully(InputRecord.java:312)
... 
```

有谁知道可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T02:21:12.117

检查您是否可以在 Mac 上安装更新版本的 Java。如果您在网上搜索有关 Java、套接字和 OSX 的问题，包括您列出的问题，会有很多问题。
当前安装的是什么版本的 Java ( `java -version`) 以及您运行的是什么版本的 OSX？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T05:47:25.280

你检查你的数据和时间了吗？

# rest - LinkedIn API - 如何查询连接总数？

> ID：10745255
> 
> 赞同：3
> 
> 时间：2012-05-24T21:03:56.123
> 
> 标签：rest, linkedin

我正在尝试查询这样的连接总数：

```
/people/id=QM86-RIKjb:(connections total) 
```

并在此处使用 API 示例：[https ://developer.linkedin.com/documents/profile-api](https://developer.linkedin.com/documents/profile-api)

在底部的 xml 示例中，显示此字段：`<connections total="" >`

我正在尝试查询它，但我得到一个异常，我有一个错误的 URI：

```
URI::InvalidURIError: bad URI(is not URI?): /v1/people/id=QM86-RIKjb:(connections total) 
```

我做错了什么？是否有正确的方法来查询这些参数？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T12:08:04.783

你不能这样做（你不能得到特定标签的属性）

做这个，

```
http://api.linkedin.com/v1/people/id=nbqwYraDfd:(connections) 
```

获取返回的响应并解析以您的编程语言返回的 XML 并读取标签的属性`total`。`connections`

如果您只对获取总数感兴趣，我建议您使用此查询来过滤返回的响应，

```
http://api.linkedin.com/v1/people/id=nbqwYraDfd:(connections:()) 
```

您使用哪种编程语言，可能我可以帮助解析返回的 XML。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-25T14:07:51.747

要从[Profile API](https://developer.linkedin.com/documents/profile-api)获取连接数，您可以直接询问 API：

`http://api.linkedin.com/v1/people/id=nbqwYraDfd:(num-connections,num-connections-capped)`

哪个会返回（取决于连接数）：

```
<?xml version="1.0" encoding="UTF-8"?>
<person>
  <num-connections>500</num-connections>
  <num-connections-capped>true</num-connections-capped>
</person> 
```

请记住，对查看用户可用的字段有限制 - 请查看[配置文件字段](https://developer.linkedin.com/documents/profile-fields)文档以获取详细信息。例如，不可能获得“连接的连接” - 如果在上面的示例中`nbqwYraDfd`代表当前查看用户，则可以使用：

`http://api.linkedin.com/v1/people/id=nbqwYraDfd:(connections)`

哪个会返回：

```
<?xml version="1.0" encoding="UTF-8"?>
<person>
  <connections total="XXX" count="YYY" start="0">
    <person>
    ...
    </person>
  </connections>
</person> 
```

然后通过遍历 XML（语言相关）检查 total 的值。

但是，如果`nbqwYraDfd`是当前用户的连接，或者是非连接，你会得到一个 403 响应：

```
<?xml version="1.0" encoding="UTF-8"?>
<error>
  <status>403</status>
  <timestamp>1337954306491</timestamp>
  <request-id>25P44ZN249</request-id>
  <error-code>0</error-code>
  <message>Access to other member's connections denied</message>
</error> 
```

# javascript - 在 Backbone 模型中定义实例变量的正确方法是什么？

> ID：10745257
> 
> 赞同：1
> 
> 时间：2012-05-24T21:04:05.343
> 
> 标签：javascript, backbone.js, coffeescript

我想知道如何在主干模型中定义实例变量。这是我目前正在这样做的方式：

```
class GeneSet extends Backbone.Model
    initialize: (parsedGenes)->
        @set parsedGenes: parsedGenes
        @set geneNames: (gene.gene_name for gene in @get("parsedGenes"))
        @set geneIds: ("gene_#{id}" for id in [1..@get("parsedGenes").length])
        @set columnNames: @getColumnNames()
        @set columnGroups: @getColumnGroups()
        @set geneExpressions: @getGeneExpressions()
        @set groupedGeneExpressions: @getGroupedGeneExpressions()
        @set extent: @getExtent()

    clusterColor: ->
        d3.scale.category20()()

    getGeneNameById: (geneId)->
        @get("geneNames")[@get("geneIds").indexOf(geneId)]

    getColumnGroups: ->
        _.uniq((@get("columnNames")).map((columnName)->
            columnName.split("_")[0]
        ))

    getExtent: ->
        expressions = _.flatten(@get("geneExpressions").map (geneExpression)->
            geneExpression.map (item)->
                item.y
        )
        d3.extent(expressions)

    getColumnNames: ->
        Object.keys(@get("parsedGenes")[0]).filter (columnName) ->
            !columnName.match(/cluster/) && isNumber(parsedGenes[1][columnName])

    getGeneExpressions: ->
        @get("parsedGenes").map (gene) =>
            @get("columnNames").map (columnName) -> 
                x: columnName
                y: +gene[columnName] # make numeric 
```

这似乎有点多余，`@set columnGroups: @getColumnGroups()`并且必须使用每个变量`@get("...")`似乎有点冗长（我希望我能这样做`@variableName`）。我的问题是，这是使用模型和实例变量的正确方法还是我做错了？另外，这样做有什么区别吗？：

```
 class GeneSet extends Backbone.Model
        initialize: (parsedGenes)->
            @parsedGenes = parsedGenes
            @geneNames = (gene.gene_name for gene in @parsedGenes)
            @geneIds = ("gene_#{id}" for id in [1..@parsedGenes.length])
            @clusters = (gene.cluster for gene in @parsedGenes)
            @descriptions = (gene.description for gene in @parsedGenes)
            @columnNames = @getColumnNames()
            @columnGroups = @getColumnGroups()
            @geneExpressions = @getGeneExpressions()
            @groupedGeneExpressions = @getGroupedGeneExpressions()
            @extent = @getExtent() 
```

然后，从刚刚做的观点来看`@model.columnNames`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T21:54:10.713

这是我在基本模型超类中所做的。这几乎与骨干设计背道而驰，但我也讨厌使用`get`and`set`我想要所有属性访问背后的真实方法。所以我做了一些元编程并生成命名的 get/set 方法。因此，不必这样做：

```
model.get("name")
model.set("name", "Tom") 
```

我只能做

```
model.name()
model.name("Tom") 
```

`attributes`这是我为任何任意对象自动执行此操作的基本代码。

```
addConvenienceMethods = ->
  for prop, value of this.attributes
    ((prop) ->
      #Define a setter/getter function
      this[prop] = (newValue...) ->
        if newValue.length
          obj = {}
          obj[prop] = newValue[0]
          this.set obj
          return this
        else
          return this.get prop
      #Use the newly-defined setter function to store the default value
      this[prop](value)
    ).call(this, prop)

########## Base Model Superclass ##########
class exports.Model extends Backbone.Model
  initialize: ->
    addConvenienceMethods.call this 
```

请注意，这是在一个足够老的骨干版本上编写的，不支持`set("key", "value")`. 如果我要更新它，我可能会使用那个变体。请注意，由于`set`风味返回对象，它们是可链接的：`model.name("John").email("john@example.com").role("admin")`

# php - Wordpress 选项页面和循环回调函数

> ID：10745263
> 
> 赞同：0
> 
> 时间：2012-05-24T21:04:28.613
> 
> 标签：php, wordpress, foreach, settings, admin

我正在创建一个简单的 Wordpress 插件，它将在“设置”菜单中设置一个“选项”页面，客户可以在其中添加他们的业务详细信息。

我注册了我的所有字段：

```
// Lets set an array for the inputs:
   $fields = array (
       array( "name",           "Business Name:"),
       array( "tagline",        "Business Tagline:"),
       array( "logo",           "Business Logo:"),
       array( "owner_name",     "Owner's Name:"),
       array( "owner_title",    "Owner's Title"),
       array( "address",        "Address:"),
       array( "city",           "City:"),
       array( "province",       "Province:"),
       array( "country",        "Country:"),
       array( "phone",          "Phone:"),
       array( "secondary_phone","Secondary Phone:"),
       array( "fax",            "Fax:"),
       array( "toll_free",      "Toll Free:"),
       array( "email",          "Email:"),
       array( "website",        "Website:"),
   );

   foreach($fields as $field) {
       //id, title (label), callback, page, section(from add_settings_section), args
       add_settings_field("business_{$field[0]}", $field[1], "business_{$field[0]}_setting", __FILE__, 'main_section');
   } 
```

这只是循环遍历数组中的设置，添加我需要的所有字段，并使用 设置对回调函数的引用`business_{$field[0]}_setting`。

然后我必须为每个创建回调函数，例如：

```
function business_name_setting() {
  $options = get_option('plugin_options');  
  echo "<input name='plugin_options[business_name]' type='text' value='{$options['business_name']}' />";
} 
```

我假设有一种更优雅的方法可以做到这一点，因为当它们基本上相同时单独创建所有回调将是非常多余的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T21:40:44.370

解决方法如下：

该`add_settings_field`函数采用第 6 个参数，将其传递给回调函数。我已经发送了它的值`$field[0]`。我还将`add_settings_field`函数设置为将所有回调发送到现在称为`business_setting`.

新的 foreach 循环：

```
foreach($fields as $field) {
       //id, title (label), callback, page, section(from add_settings_section), args
       add_settings_field("business_{$field[0]}", $field[1], "business_setting", __FILE__, 'main_section', $field[0]);
   } 
```

新的回调函数，它现在传递了我们`$field[0]`之前的值，现在可以使用该键来创建正确的输入：

```
function business_setting($field) {
  $options = get_option('plugin_options'); 
  $full_field = 'business_'.$field;
  echo "<input name='plugin_options[{$full_field}]' type='text' value='" . $options[$full_field] . "' />";
} 
```

# javascript - 方法未按正确顺序/异步方法调用

> ID：10745264
> 
> 赞同：1
> 
> 时间：2012-05-24T21:04:39.430
> 
> 标签：javascript, jquery, ajax, datatables, jquery-events

当我尝试按此顺序加载这些函数时，我遇到了一个问题：顺便说一下，我正在使用 Datatables 和 jQuery，我相信你们中的许多人可能已经知道了。

```
currPage = LookupPts.oTable.fnPagingInfo();
LookupPts.oTable.fnReloadAjax();
LookupPts.oTable.fnPageChange(currPage.iPage); 
```

当我知道这是由于 asyncronous 导致的时间问题`fnPageChange()`后立即尝试运行时失败，我的问题是如何在完成时调用 get 。`fnReloadAjax()``fnReloadAjax``fnPageChange``fnReloadAjax`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T13:20:59.913

好的，我把它修好了。

在我发布我的问题之前，我尝试了与你们所有人描述的相同的方法，但我仍然遇到了同样的问题。由于某种原因，它不起作用。

我必须做些什么来修复它？

调试插件后发现参数的顺序不正确。插件的参数有：oSettings、sNewSource、bStandingRedraw、fnCallback。

我注意到当调用该方法时，我的参数顺序不正确。我的顺序是 oSettings = object，nNewSource = null，fnCallback = null，bStandingRedraw = function。

诀窍是像这样以正确的顺序放置参数，回调在参数列表中排在第二位：

```
 currPage = LookupPts.oTable.fnPagingInfo();
                        LookupPts.oTable.fnReloadAjax(null, function(){
                           LookupPts.oTable.fnPageChange(currPage.iPage);
                           console.log("finished loading the page details");
                        }, null); 
```

我对第一个参数 oSettings 感到困惑。顺便说一句，第一个参数如何加载对象？谢谢大家！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T21:08:52.517

查看具有此签名的[插件文档：](http://datatables.net/plug-ins/api)`fnReloadAjax()`

> fnReloadAjax = 函数 (oSettings, sNewSource, fnCallback, bStandingRedraw) { }

因此，您可以将回调函数作为第三个参数传递，以便在 AJAX 调用完成时执行。试试这个：

```
currPage = LookupPts.oTable.fnPagingInfo();
LookupPts.oTable.fnReloadAjax(null, null, function() { 
    LookupPts.oTable.fnPageChange(currPage.iPage);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T21:09:54.587

试试这个：

```
currPage = LookupPts.oTable.fnPagingInfo();
LookupPts.oTable.fnReloadAjax(null, null, function() {
    LookupPts.oTable.fnPageChange(currPage.iPage);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T21:10:25.707

您需要实现回调，因为 Javascript 是一种非阻塞语言，不能逐步执行命令。因此，您需要在方法完成后运行的回调。

我只是查看了 ReloadAjax 方法的定义（我从未使用过这个）。如果我得到了正确的，那就是：函数（oSettings，sNewSource，fnCallback，bStandingRedraw））下面的代码应该可以工作：

```
currPage = LookupPts.oTable.fnPagingInfo();
LookupPts.oTable.fnReloadAjax(null, null, function(){
   LookupPts.oTable.fnPageChange(currPage.iPage);
}); 
```

# java - Java中基于文本的纸牌游戏，不能添加到arraylists？

> ID：10745268
> 
> 赞同：-2
> 
> 时间：2012-05-24T21:05:02.970
> 
> 标签：java, arrays, arraylist, war

好的，所以我在 java 中进行纸牌游戏大战，出于某种原因`b>d`，`b<d`它没有在数组中添加和删除元素。我知道我每副牌有 52 张牌，我会解决的。

另外，关于在 b==d 时做事的更简单方法的任何提示？（卡片之间的领带）提前谢谢，这一直困扰着我

```
import java.io.File;
import java.io.FileNotFoundException;
import java.util.ArrayList;
import java.util.Random;
import java.util.Scanner;

public class war {
   public static void printYourCard(ArrayList a, int b) {
      if (a.get(b).equals(11))
         System.out.println("Jack");
      else if (a.get(b).equals(12))
         System.out.println("Queen");
      else if (a.get(b).equals(13))
         System.out.println("King");
      else if (a.get(b).equals(14))
         System.out.println("Ace");
      else
         System.out.println(a.get(b));
   }

   public static void printOppCard(ArrayList a, int b) {
      if (a.get(b).equals(11))
         System.out.println("Jack");
      else if (a.get(b).equals(12))
         System.out.println("Queen");
      else if (a.get(b).equals(13))
         System.out.println("King");
      else if (a.get(b).equals(14))
         System.out.println("Ace");
      else
         System.out.println(a.get(b));
   }

   public static void main(String args[]) {
      Scanner cards = null;

      try {
         // Create a scanner to read the file, file name is parameter
         cards = new Scanner(new File("C:\\Users\\Phil\\Desktop\\cards.txt"));
      } catch (FileNotFoundException e) {
         System.out.println("File not found!");
         // Stop program if no file found
         System.exit(0);
      }

      Scanner cards2 = null;

      try {
         // Create a scanner to read the file, file name is parameter
         cards = new Scanner(new File("C:\\Users\\Phil\\Desktop\\cards2.txt"));
      } catch (FileNotFoundException e) {
         System.out.println("File not found!");
         // Stop program if no file found
         System.exit(0);
      }

      ArrayList oppDeck = new ArrayList();
      ArrayList yourDeck = new ArrayList();
      int x = 0;

      while (cards.hasNext()) {
         /*
          * oppDeck[x] = cards.nextInt(); yourDeck[x] = oppDeck[x]; x++;
          */

         oppDeck.add(cards.nextInt());
         yourDeck = oppDeck;
      }

      /*
       * for(int y = 0; y<=51; y++) { System.out.print(yourDeck.get(y)); }
       */
      Random randomGenerator = new Random();
      Random randomGenerator2 = new Random();

      int randOpp = 0;
      int randYour = 0;

      Scanner askQ = new Scanner(System.in);
      String answer = "";

      while (oppDeck.size() != 0 || yourDeck.size() != 0) {

         System.out.print("Press 'd' to draw a card: ");
         answer = askQ.nextLine();

         randYour = randomGenerator.nextInt(yourDeck.size());
         System.out.print("You played the card: ");

         printYourCard(yourDeck, randYour);

         randOpp = randomGenerator.nextInt(oppDeck.size());
         System.out.print("Your opponent played the card: ");
         printOppCard(oppDeck, randOpp);
         System.out.println("");

         Integer a = new Integer(yourDeck.get(randYour).toString());
         int b = a.intValue();

         Integer c = new Integer(oppDeck.get(randOpp).toString());
         int d = c.intValue();

         if (b > d) {
            oppDeck.remove(oppDeck.get(randOpp));
            oppDeck.trimToSize();
            yourDeck.trimToSize();
         } else if (b < d) {
            oppDeck.add(yourDeck.get(randYour));
            yourDeck.remove(yourDeck.get(randYour));
            yourDeck.trimToSize();
         } else if (b == d) {
            ArrayList keep = new ArrayList();

            keep.add(yourDeck.get(randYour));
            yourDeck.remove(yourDeck.get(randYour));
            keep.add(oppDeck.get(randOpp));
            oppDeck.remove(oppDeck.get(randOpp));

            // next drawn important card Your
            Random nextCard = new Random();
            int nCard = nextCard.nextInt(yourDeck.size());
            Integer e = new Integer(yourDeck.get(nCard).toString());
            int f = e.intValue();
            yourDeck.remove(yourDeck.get(nCard));

            // draw 3 and remove those
            Random warYou1 = new Random();
            int warY1 = warYou1.nextInt(yourDeck.size());
            keep.add(yourDeck.get(warY1));
            yourDeck.remove(yourDeck.get(warY1));

            Random warYou2 = new Random();
            int warY2 = warYou1.nextInt(yourDeck.size());
            keep.add(yourDeck.get(warY2));
            yourDeck.remove(yourDeck.get(warY2));

            Random warYou3 = new Random();
            int warY3 = warYou1.nextInt(yourDeck.size());
            keep.add(yourDeck.get(warY3));
            yourDeck.remove(yourDeck.get(warY3));

            // next drawn important card Opp
            Random oppNextCard = new Random();
            int oCard = oppNextCard.nextInt(oppDeck.size());
            Integer g = new Integer(oppDeck.get(oCard).toString());
            int h = g.intValue();
            oppDeck.remove(oppDeck.get(oCard));

            // draw 3 and remove those
            Random warOpp1 = new Random();
            int warO1 = warYou1.nextInt(yourDeck.size());
            keep.add(oppDeck.get(warO1));
            oppDeck.remove(oppDeck.get(warO1));

            Random warOpp2 = new Random();
            int warO2 = warYou1.nextInt(yourDeck.size());
            keep.add(oppDeck.get(warO2));
            oppDeck.remove(oppDeck.get(warO2));

            Random warOpp3 = new Random();
            int warO3 = warYou1.nextInt(yourDeck.size());
            keep.add(oppDeck.get(warO3));
            oppDeck.remove(oppDeck.get(warO3));

            if (f > h) {
               for (int i = 0; i < keep.size(); i++) {
                  yourDeck.add(keep.get(i));
               }
            } else if (f < h) {
               for (int i = 0; i < keep.size(); i++) {
                  oppDeck.add(keep.get(i));
               }
            }
         }// exit tie breaker

         System.out.println("--Your cards left: " + yourDeck.size());
         System.out.println("--Your opponents cards left: " + oppDeck.size());
         System.out.println();
      }
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T21:13:39.370

在这种情况下它不添加卡片的原因`b>d`是***您没有告诉它***在这种情况下添加到数组列表中。您有两个“调整大小”命令和一个“删除”命令，但没有“添加”命令。

# perl - 使用 Solaris 11 64 位安装 CGI、DBI 和 DBD::Oracle

> ID：10745271
> 
> 赞同：2
> 
> 时间：2012-05-24T21:05:14.063
> 
> 标签：perl, oracle, solaris, dbi, dbd

我尝试在 64 位 Solaris 环境中安装[CGI](http://p3rl.org/CGI)、[DBI](http://p3rl.org/DBI)和[DBD::Oracle和驱动程序，但收效甚微。](http://p3rl.org/DBD%3a%3aOracle)我遇到的错误数量令人难以置信，而我尝试过的变通解决方案的数量——从更改环境变量、更改目录引用、移动和复制文件、更改编译器等——甚至更糟。最糟糕的是，在最新版本的 Solaris 中安装上述模块的文档很少。

这是我们已经完成的初始步骤。

1.  首先我们去[http://search.cpan.org/](http://search.cpan.org/)。然后我们下载：

    *   [http://search.cpan.org/dist/CGI/](http://search.cpan.org/dist/CGI/)
    *   [http://search.cpan.org/dist/DBI/](http://search.cpan.org/dist/DBI/)
    *   [http://search.cpan.org/dist/DBD-Oracle/](http://search.cpan.org/dist/DBD-Oracle/)
2.  接下来我们打开一个终端窗口，切换到root，然后导航到我们的“下载”文件夹。

3.  从这里我们解压之前下载的文件（这里没有问题）：

    ```
    gunzip -c CGI.pm-3.59.tar.gz |tar xvf -
    gunzip -c DBI-1.621.tar.gz |tar xvf -
    gunzip -c DBD-Oracle-1.44.tar.gz |tar xvf - 
    ```

4.  然后我们将 tar 文件归档以备日后需要。

    ```
    mkdir archive_tar
    mv *.gz $HOME/Downloads/archive_tar 
    ```

5.  这是有点令人困惑的地方，因为我们不确定这些步骤是否完全必要。基本上，我们*认为*我们需要设置正确的 Perl（最新的 Oracle 需要 64 位，默认使用的 Perl 是 32 位）。

    1.  键入`which perl`以确定您正在使用的 Perl 的当前版本。它应该表明您使用的是默认版本（或 32 位）。
    2.  通过执行以下操作验证您是否有可用的 64 位 Perl 安装：`file /opt/oracle/rdbms/perl/bin/perl`
    3.  你应该看到`ELF 64-bit LSB executable AMD64 Version 1 [SSE2 SSE FXSR CMOV FPU], dynamically linked, not stripped<`。
    4.  通过将它添加到`PATH`变量来切换到使用这个版本的 Perl：`export PATH=/opt/oracle/rdbms/perl/bin:$PATH`
    5.  键入`which perl`。验证这现在是否显示位于 的 Perl `opt/oracle/rdbms/perl/bin/perl`。
    6.  键入`perl -V`，如果显示错误，请设置以下变量：

        ```
        export PERL5LIB=/opt/oracle/rdbms/perl/lib/5.10.0
        export PERLLIB=/opt/oracle/rdbms/perl/lib/5.10.0 
        ```

6.  现在我们设置`cc`（编译器）工作，以便我们可以安装 CGI/DBI/DBD-Oracle。

    1.  键入`cc --version`以验证它是否说`cc`未找到。
    2.  打开浏览器并导航到[Solaris Studio](http://www.oracle.com/technetwork/server-storage/solarisstudio/downloads/index.html)。在这里，您将找到一个包含 Sun 编译器的软件包。
    3.  下载适用于 Solaris 11 OS 平台的“Solaris SPARC 上的 Tarfile”。
    4.  在您的终端窗口中，通过键入以下内容解压缩上述文件：`bzcat SolarisStudio12.3-solaris-sparc-bin.tar.bz2 | tar xf -`
    5.  将`.bz2`文件移动到我们之前创建的存档文件夹：`mv SolarisStudio12.3-solaris-sparc-bin.tar.bz2 $HOME/Downloads/archive_tar`
    6.  现在我们想将新编译器添加到我们的路径中，我们通过以下方式执行此操作：`export PATH=$PATH:/home/oracle/Downloads/SolarisStudio12.3-solaris-sparc-bin/solarisstudio12.3/bin`
    7.  Type `cc --version`，这个命令不应该做任何事情（可能会抛出一些警告），但它不会再说`cc not found`了。
7.  在这里，我们开始安装模块和驱动程序，从 CGI 模块开始：

    1.  导航`$HOME/Downloads/CGI.pm-3.59`
    2.  类型`perl Makefile.PL`
    3.  我们需要更改 make 文件以指向正确的位置。

        1.  类型`vi Makefile`
        2.  `:%s,../lib/site_perl/5.10.0,/opt/oracle/rdbms/perl/lib/site_perl/5.10.0,g`
        3.  `:%s,../lib/5.10.0,/opt/oracle/rdbms/perl/lib/5.10.0,g`
    4.  现在输入`make`

    5.  然后输入`make install`
    6.  接下来我们进入 DBI 模块。导航到`$HOME/Downloads/DBI-1.621`。
    7.  类型`perl Makefile.PL`
    8.  同样，我们需要更改此 make 文件以指向正确的位置。

        1.  类型`vi Makefile`
        2.  `:%s,../lib/site_perl/5.10.0,/opt/oracle/rdbms/perl/lib/site_perl/5.10.0,g`
        3.  `:%s,../lib/5.10.0,/opt/oracle/rdbms/perl/lib/5.10.0,g`
    9.  然而，这些改变了我们不想改变的两条线。因此，请查找`MAKEMAKER`并将`XSUBPPDIR`它们设置回以下值。

        ```
        MAKEMAKER = /opt/oracle/rdbms/perl/lib/5.10.0/ExtUtils/MakeMaker.pm
        XSUBPPDIR = /opt/oracle/rdbms/perl/lib/5.10.0/ExtUtils 
        ```

    10.  现在输入`make`

    11.  然后输入`make install`
    12.  现在导航到`$HOME/Downloads/DBD-Oracle-1.44`
    13.  类型`perl Makefile.PL`

这基本上就是我们`use DBI 1.51;`在 Makefile 中的第 21 行遇到致命错误的地方，并且跟踪堆栈表明`@INC`cannot locate `DBI.pm`。这就是我试图移动二进制库文件的原因。我目前无法访问 Solaris 盒子，所以我无法重新发布确切的错误代码，我应该可以在星期二包含该代码（我最早可以回到机器上）。有人对此有任何想法吗？

# 使用 CPAN shell 的替代路由

1.  打开终端窗口并以`root`用户身份安装以下软件包：

    ```
    pkg install system/header
    pkg install gcc-45
    pkg install developer/build/gnu-make
    pkg install archiver/gnu-tar 
    ```

2.  导航到 $oracle_home`cd $oracle_home`并：

    ```
    mkdir /apps
    mkdir /apps/twiki-root
    mkdir /apps/twiki-root/perlmodules 
    ```

3.  修改`PERL5LIB`环境变量：

    *   `export PERL5LIB=/apps/twiki-root/perlmodules`
    *   通过键入以下内容进行验证：`echo $PERL5LIB`
4.  打开 CPAN shell 并更新它：

    ```
    /usr/perl5/bin/perlgcc -MCPAN -e shell 
    ```

    如果这是第一次，请按`return`接受自动配置。现在输入以下命令来修改 CPAN 的镜像位置：

    ```
    o conf urllist shift
    o conf urllist
    o conf urllist unshift http://mirror.ox.ac.uk/sites/www.cpan.org/
    o conf urllist
    o conf commit
    install Bundle::CPAN
    reload cpan 
    ```

5.  打开`Config.pm`文件并按如下所述进行修改：

    ```
    cd /usr/perl5/5.12/lib/CPAN/
    vi Config.pm 
    ```

    修改这些值：

    ```
    'make' => q[/usr/sfw/bin/gmake],
    'make_install_make_command' => q[/usr/sfw/bin/gmake],
    'makepl_arg' => q[LIB=/apps/twiki-root/perlmodules PREFIX=/apps/twiki-root/perlmodules INSTALLMAN3DIR=/apps/twiki-root/perlmodules/man/man3],
    'mbuild_arg' => q[--install_base /apps/twiki-root/perlmodules],
    'mbuild_install_arg' => q[--install_base /apps/twiki-root/perlmodules],
    'mbuildpl_arg' => q[--install_base /apps/twiki-root/perlmodules],
    'prefs_dir' => q[~/.cpan/prefs],
    'tar' => q[/usr/sfw/bin/gtar], 
    ```

    写入/保存到文件并退出 →`:wq`

6.  确保您`gcc`已设置：

    通过以下方式验证：`which gcc`

7.  现在再次打开 CPAN shell 并开始安装 DBI 模块。

    ```
    /usr/perl5/bin/perlgcc -MCPAN -e shell
    install DBI 
    ```

这就是一切都变得废话的地方。错误：

```
Reading '/home/oracle/.cpan/Metadata'
Database was generated on Sun, 03 Jun 2012 22:27:03 GMT
Running install for module 'DBI'
Running make for T/TI/TIMB/DBI-1.621.tar.gz
Subroutine config redefined at /usr/perl5/5.12/lib/CPAN/LWP/UserAgent.pm line 12.
Subroutine get_basic_credentials redefined at /usr/perl5/5.12/lib/CPAN/LWP/UserAgent.pm line 23.
Subroutine no_proxy redefined at /usr/perl5/5.12/lib/CPAN/LWP/UserAgent.pm line 32.
Subroutine mirror redefined at /usr/perl5/5.12/lib/CPAN/LWP/UserAgent.pm line 67.
Fetching with HTTP::Tiny:
http://mirror.ox.ac.uk/sites/www.cpan.org/authors/id/T/TI/TIMB/DBI-1.621.tar.gz
Fetching with HTTP::Tiny:
http://mirror.ox.ac.uk/sites/www.cpan.org/authors/id/T/TI/TIMB/CHECKSUMS
Checksum for /home/oracle/.cpan/sources/authors/id/T/TI/TIMB/DBI-1.621.tar.gz ok
Scanning cache /home/oracle/.cpan/build for sizes
............................................................................DONE

CPAN.pm: Building T/TI/TIMB/DBI-1.621.tar.gz

*** Your LANG environment variable is set to 'en_US.UTF-8'
*** This may cause problems for some perl installations.
*** If you get test failures, please try again with LANG unset.
*** If that then works, please email dbi-dev@perl.org with details
*** including the output of 'perl -V'

Creating test wrappers for DBD::Gofer:
t/zvg_01basics.t
t/zvg_02dbidrv.t
t/zvg_03handle.t
t/zvg_04mods.t
t/zvg_05concathash.t
t/zvg_06attrs.t
t/zvg_07kids.t
t/zvg_08keeperr.t
t/zvg_09trace.t
t/zvg_10examp.t
t/zvg_11fetch.t
t/zvg_12quote.t
t/zvg_13taint.t
t/zvg_14utf8.t
t/zvg_15array.t
t/zvg_16destroy.t
t/zvg_19fhtrace.t
t/zvg_20meta.t
t/zvg_30subclass.t
t/zvg_31methcache.t
t/zvg_35thrclone.t
t/zvg_40profile.t
t/zvg_41prof_dump.t
t/zvg_42prof_data.t
t/zvg_43prof_env.t
t/zvg_48dbi_dbd_sqlengine.t
t/zvg_49dbd_file.t
t/zvg_50dbm_simple.t
t/zvg_51dbm_file.t
t/zvg_52dbm_complex.t
t/zvg_60preparse.t
t/zvg_65transact.t
t/zvg_70callbacks.t
t/zvg_72childhandles.t
t/zvg_80proxy.t
t/zvg_85gofer.t
t/zvg_86gofer_fail.t
t/zvg_87gofer_cache.t
t/zvg_90sql_type_cast.t
Creating test wrappers for DBI::SQL::Nano:
t/zvn_48dbi_dbd_sqlengine.t
t/zvn_49dbd_file.t
t/zvn_50dbm_simple.t
t/zvn_51dbm_file.t
t/zvn_52dbm_complex.t
t/zvn_85gofer.t
Creating test wrappers for DBI::PurePerl:
t/zvp_01basics.t
t/zvp_02dbidrv.t
t/zvp_03handle.t
t/zvp_04mods.t
t/zvp_05concathash.t
t/zvp_06attrs.t
t/zvp_07kids.t
t/zvp_08keeperr.t
t/zvp_09trace.t
t/zvp_10examp.t
t/zvp_11fetch.t
t/zvp_12quote.t
t/zvp_13taint.t
t/zvp_14utf8.t
t/zvp_15array.t
t/zvp_16destroy.t
t/zvp_19fhtrace.t
t/zvp_20meta.t
t/zvp_30subclass.t
t/zvp_31methcache.t
t/zvp_35thrclone.t
t/zvp_40profile.t
t/zvp_41prof_dump.t
t/zvp_42prof_data.t
t/zvp_43prof_env.t
t/zvp_48dbi_dbd_sqlengine.t
t/zvp_49dbd_file.t
t/zvp_50dbm_simple.t
t/zvp_51dbm_file.t
t/zvp_52dbm_complex.t
t/zvp_60preparse.t
t/zvp_65transact.t
t/zvp_70callbacks.t
t/zvp_72childhandles.t
t/zvp_80proxy.t
t/zvp_85gofer.t
t/zvp_86gofer_fail.t
t/zvp_87gofer_cache.t
t/zvp_90sql_type_cast.t
Creating test wrappers for DBD::Gofer + DBI::SQL::Nano:
t/zvxgn_48dbi_dbd_sqlengine.t
t/zvxgn_49dbd_file.t
t/zvxgn_50dbm_simple.t
t/zvxgn_51dbm_file.t
t/zvxgn_52dbm_complex.t
t/zvxgn_85gofer.t
Creating test wrappers for DBD::Gofer + DBI::PurePerl:
t/zvxgp_01basics.t
t/zvxgp_02dbidrv.t
t/zvxgp_03handle.t
t/zvxgp_04mods.t
t/zvxgp_05concathash.t
t/zvxgp_06attrs.t
t/zvxgp_07kids.t
t/zvxgp_08keeperr.t
t/zvxgp_09trace.t
t/zvxgp_10examp.t
t/zvxgp_11fetch.t
t/zvxgp_12quote.t
t/zvxgp_13taint.t
t/zvxgp_14utf8.t
t/zvxgp_15array.t
t/zvxgp_16destroy.t
t/zvxgp_19fhtrace.t
t/zvxgp_20meta.t
t/zvxgp_30subclass.t
t/zvxgp_31methcache.t
t/zvxgp_35thrclone.t
t/zvxgp_40profile.t
t/zvxgp_41prof_dump.t
t/zvxgp_42prof_data.t
t/zvxgp_43prof_env.t
t/zvxgp_48dbi_dbd_sqlengine.t
t/zvxgp_49dbd_file.t
t/zvxgp_50dbm_simple.t
t/zvxgp_51dbm_file.t
t/zvxgp_52dbm_complex.t
t/zvxgp_60preparse.t
t/zvxgp_65transact.t
t/zvxgp_70callbacks.t
t/zvxgp_72childhandles.t
t/zvxgp_80proxy.t
t/zvxgp_85gofer.t
t/zvxgp_86gofer_fail.t
t/zvxgp_87gofer_cache.t
t/zvxgp_90sql_type_cast.t
Creating test wrappers for DBI::SQL::Nano + DBI::PurePerl:
t/zvxnp_48dbi_dbd_sqlengine.t
t/zvxnp_49dbd_file.t
t/zvxnp_50dbm_simple.t
t/zvxnp_51dbm_file.t
t/zvxnp_52dbm_complex.t
t/zvxnp_85gofer.t
Creating test wrappers for DBD::Gofer + DBI::SQL::Nano + DBI::PurePerl:
t/zvxgnp_48dbi_dbd_sqlengine.t
t/zvxgnp_49dbd_file.t
t/zvxgnp_50dbm_simple.t
t/zvxgnp_51dbm_file.t
t/zvxgnp_52dbm_complex.t
t/zvxgnp_85gofer.t
Checking if your kit is complete...
Looks good
Have /usr/perl5/5.12/lib/Sun/Solaris/PerlGcc
Want /usr/perl5/5.12/lib/i86pc-solaris-64int
Your perl and your Config.pm seem to have different ideas about the
architecture they are running on.
Perl thinks: [PerlGcc]
Config says: [i86pc-solaris-64int]
This may or may not cause problems. Please check your installation of perl
if you have problems building this extension.

    I see you're using perl 5.012003 on i86pc-solaris-64int, okay.
    Remember to actually *read* the README file!
    Use  'make' to build the software (dmake or nmake on Windows).
    Then 'make test' to execute self tests.
    Then 'make install' to install the DBI and then delete this working
    directory before unpacking and building any DBD::* drivers.

Writing Makefile for DBI
Writing MYMETA.yml and MYMETA.json
/usr/perl5/5.12/bin/perl -MExtUtils::Command -e 'mkpath' -- blib/lib/DBI
rm -f blib/lib/DBI/Changes.pm
cp Changes blib/lib/DBI/Changes.pm
cp Driver_xst.h blib/arch/auto/DBI/Driver_xst.h
cp lib/DBI/Gofer/Response.pm blib/lib/DBI/Gofer/Response.pm
cp lib/DBD/Proxy.pm blib/lib/DBD/Proxy.pm
cp lib/DBI/Util/_accessor.pm blib/lib/DBI/Util/_accessor.pm
cp lib/DBI/Gofer/Transport/Base.pm blib/lib/DBI/Gofer/Transport/Base.pm
cp lib/DBD/DBM.pm blib/lib/DBD/DBM.pm
cp DBIXS.h blib/arch/auto/DBI/DBIXS.h
cp dbixs_rev.pl blib/lib/dbixs_rev.pl
cp lib/DBI/Const/GetInfoType.pm blib/lib/DBI/Const/GetInfoType.pm
cp lib/DBI/Gofer/Serializer/DataDumper.pm blib/lib/DBI/Gofer/Serializer/DataDumper.pm
cp lib/DBI/DBD/Metadata.pm blib/lib/DBI/DBD/Metadata.pm
cp lib/DBI/Const/GetInfo/ODBC.pm blib/lib/DBI/Const/GetInfo/ODBC.pm
cp lib/DBD/Gofer/Transport/pipeone.pm blib/lib/DBD/Gofer/Transport/pipeone.pm
cp lib/DBI/ProfileDumper/Apache.pm blib/lib/DBI/ProfileDumper/Apache.pm
cp lib/DBD/File.pm blib/lib/DBD/File.pm
cp Driver.xst blib/arch/auto/DBI/Driver.xst
cp lib/DBD/File/Roadmap.pod blib/lib/DBD/File/Roadmap.pod
cp lib/DBI/Util/CacheMemory.pm blib/lib/DBI/Util/CacheMemory.pm
cp lib/DBI/ProfileSubs.pm blib/lib/DBI/ProfileSubs.pm
cp lib/DBD/NullP.pm blib/lib/DBD/NullP.pm
cp dbi_sql.h blib/arch/auto/DBI/dbi_sql.h
cp lib/DBD/Gofer.pm blib/lib/DBD/Gofer.pm
cp lib/DBD/File/HowTo.pod blib/lib/DBD/File/HowTo.pod
cp dbd_xsh.h blib/arch/auto/DBI/dbd_xsh.h
cp dbivport.h blib/arch/auto/DBI/dbivport.h
cp lib/DBI/DBD/SqlEngine/HowTo.pod blib/lib/DBI/DBD/SqlEngine/HowTo.pod
cp dbixs_rev.h blib/arch/auto/DBI/dbixs_rev.h
cp lib/DBD/Gofer/Transport/corostream.pm blib/lib/DBD/Gofer/Transport/corostream.pm
cp lib/DBD/Gofer/Transport/Base.pm blib/lib/DBD/Gofer/Transport/Base.pm
cp lib/DBI/FAQ.pm blib/lib/DBI/FAQ.pm
cp lib/DBD/Gofer/Policy/rush.pm blib/lib/DBD/Gofer/Policy/rush.pm
cp lib/DBI/SQL/Nano.pm blib/lib/DBI/SQL/Nano.pm
cp lib/DBI/Gofer/Request.pm blib/lib/DBI/Gofer/Request.pm
cp lib/DBI/Const/GetInfo/ANSI.pm blib/lib/DBI/Const/GetInfo/ANSI.pm
cp lib/DBD/Gofer/Transport/stream.pm blib/lib/DBD/Gofer/Transport/stream.pm
cp lib/DBD/Gofer/Policy/classic.pm blib/lib/DBD/Gofer/Policy/classic.pm
cp lib/DBI/Gofer/Transport/stream.pm blib/lib/DBI/Gofer/Transport/stream.pm
cp lib/DBI/Const/GetInfoReturn.pm blib/lib/DBI/Const/GetInfoReturn.pm
cp DBI.pm blib/lib/DBI.pm
cp lib/DBI/Gofer/Serializer/Storable.pm blib/lib/DBI/Gofer/Serializer/Storable.pm
cp lib/DBD/Gofer/Policy/Base.pm blib/lib/DBD/Gofer/Policy/Base.pm
cp lib/DBD/Sponge.pm blib/lib/DBD/Sponge.pm
cp lib/DBD/Gofer/Policy/pedantic.pm blib/lib/DBD/Gofer/Policy/pedantic.pm
cp lib/DBI/Gofer/Transport/pipeone.pm blib/lib/DBI/Gofer/Transport/pipeone.pm
cp lib/DBI/DBD/SqlEngine/Developers.pod blib/lib/DBI/DBD/SqlEngine/Developers.pod
cp lib/DBI/W32ODBC.pm blib/lib/DBI/W32ODBC.pm
cp lib/DBD/Gofer/Transport/null.pm blib/lib/DBD/Gofer/Transport/null.pm
cp lib/Bundle/DBI.pm blib/lib/Bundle/DBI.pm
cp lib/DBD/File/Developers.pod blib/lib/DBD/File/Developers.pod
cp lib/DBI/Profile.pm blib/lib/DBI/Profile.pm
cp lib/DBI/ProfileDumper.pm blib/lib/DBI/ProfileDumper.pm
cp lib/DBI/Gofer/Serializer/Base.pm blib/lib/DBI/Gofer/Serializer/Base.pm
cp lib/DBI/ProxyServer.pm blib/lib/DBI/ProxyServer.pm
cp dbipport.h blib/arch/auto/DBI/dbipport.h
cp lib/DBI/Gofer/Execute.pm blib/lib/DBI/Gofer/Execute.pm
cp lib/DBI/DBD.pm blib/lib/DBI/DBD.pm
cp lib/Win32/DBIODBC.pm blib/lib/Win32/DBIODBC.pm
cp lib/DBI/DBD/SqlEngine.pm blib/lib/DBI/DBD/SqlEngine.pm
cp lib/DBI/PurePerl.pm blib/lib/DBI/PurePerl.pm
cp lib/DBD/ExampleP.pm blib/lib/DBD/ExampleP.pm
cp lib/DBI/ProfileData.pm blib/lib/DBI/ProfileData.pm
/usr/perl5/5.12/bin/perl -p -e "s/~DRIVER~/Perl/g" ./Driver.xst > Perl.xsi
/usr/perl5/5.12/bin/perl /usr/perl5/5.12/lib/ExtUtils/xsubpp  -typemap /usr/perl5/5.12/lib/ExtUtils/typemap -typemap typemap  Perl.xs > Perl.xsc && mv Perl.xsc Perl.c
gcc -c   -DPTR_IS_LONG -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -DPERL_USE_SAFE_PUTENV -xO4   -DVERSION=\"1.621\" -DXS_VERSION=\"1.621\" -KPIC "-I/usr/perl5/5.12/lib/i86pc-solaris-64int/CORE"  -DDBI_NO_THREADS Perl.c
gcc: unrecognized option '-KPIC'
gcc: language O4 not recognized
gcc: language O4 not recognized
gcc: Perl.c: linker input file unused because linking not done
/usr/perl5/5.12/bin/perl /usr/perl5/5.12/lib/ExtUtils/xsubpp  -typemap /usr/perl5/5.12/lib/ExtUtils/typemap -typemap typemap  DBI.xs > DBI.xsc && mv DBI.xsc DBI.c
gcc -c   -DPTR_IS_LONG -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -DPERL_USE_SAFE_PUTENV -xO4   -DVERSION=\"1.621\" -DXS_VERSION=\"1.621\" -KPIC "-I/usr/perl5/5.12/lib/i86pc-solaris-64int/CORE"  -DDBI_NO_THREADS DBI.c
gcc: unrecognized option '-KPIC'
gcc: language O4 not recognized
gcc: language O4 not recognized
gcc: DBI.c: linker input file unused because linking not done
Running Mkbootstrap for DBI ()
chmod 644 DBI.bs
rm -f blib/arch/auto/DBI/DBI.so
cc  -G -L/usr/lib -L/usr/ccs/lib  -L/lib -L/usr/gnu/lib DBI.o  -o blib/arch/auto/DBI/DBI.so     \
            \

gmake: cc: Command not found
gmake: *** [blib/arch/auto/DBI/DBI.so] Error 127
TIMB/DBI-1.621.tar.gz
/usr/sfw/bin/gmake -- NOT OK
Running make test
Can't test without successful make
Running make install
Make had returned bad status, install seems impossible
Failed during this command:
TIMB/DBI-1.621.tar.gz                        : make NO 
```

对不起，我花了这么长时间来编辑这个并提出错误，一路上有点忙。任何人都知道这个巨大的错误意味着什么？我认为这与编译器有关，只是不确定是什么。

**新编辑**

因此，在我找到解决方法后，它经历了安装过程（花费了令人惊讶的时间），最终得到了这个......

```
Test Summary Report
-------------------
../cpan/CGI/t/tmpdir.t                                          (Wstat: 0 Tests: 9 Failed: 0)
  TODO passed:   3, 6, 8
../cpan/Socket/t/getnameinfo.t                                  (Wstat: 256 Tests: 14 Failed: 1)
  Failed test:  10
  Non-zero exit status: 1
Files=2334, Tests=522101, 1212 wallclock secs (90.50 usr 58.34 sys + 533.70 cusr 288.26 csys = 970.80 CPU)
Result: FAIL
*** Error code 1
make: Fatal error: Command failed for target `test_harness'
Installed /home/oracle/perl5/perlbrew/build/perl-5.16.0 as perl-5.16.0 successfully. Run the following command to switch to it.

  perlbrew switch perl-5.16.0 
```

正是基于此，我继续前进，`/home/oracle/perl5/perlbrew/bin/perlbrew switch perl-5.16.0`但它又回来了，`perl-5.16.0 is not installed`

：/

我只是继续尝试寻找 perl-5.16.0 的实例并做了......

```
root@dr-solaris11:~/perl5/perlbrew/build# cd /home/oracle/perl5/perlbrew/build/perl-5.16.0
root@dr-solaris11:~/perl5/perlbrew/build/perl-5.16.0# ls
Artistic                 MANIFEST                 README.cn
AUTHORS                  mathoms.c                README.cygwin
autodoc.pl               mathoms.o                README.dgux
av.c                     META.yml                 README.dos
av.h                     metaconfig.h             README.epoc
av.o                     metaconfig.SH            README.freebsd
beos                     mg_data.h                README.haiku
bitcount.h               mg_names.c               README.hpux
cflags                   mg_raw.h                 README.hurd
cflags.SH                mg_vtable.h              README.irix
Changes                  mg.c                     README.jp
charclass_invlists.h     mg.h                     README.ko
config_h.SH              mg.o                     README.linux
config.h                 minimod.pl               README.macos
config.over              miniperl                 README.macosx
config.sh                miniperlmain.c           README.micro
configpm                 miniperlmain.o           README.mpeix
Configure                mkppport                 README.netware
configure.com            mkppport.lst             README.openbsd
configure.gnu            mpeix                    README.os2
cop.h                    mro.c                    README.os390
Copying                  mro.o                    README.os400
cpan                     myconfig                 README.plan9
Cross                    myconfig.SH              README.qnx
cv.h                     mydtrace.h               README.riscos
cygwin                   NetWare                  README.solaris
deb.c                    nostdio.h                README.symbian
deb.o                    numeric.c                README.tru64
dist                     numeric.o                README.tw
djgpp                    op_reg_common.h          README.uts
doio.c                   op.c                     README.vmesa
doio.o                   op.h                     README.vms
doop.c                   op.o                     README.vos
doop.o                   opcode.h                 README.win32
dosish.h                 opmini.c                 realclean.sh
dquote_static.c          opmini.o                 reentr.c
dump.c                   opnames.h                reentr.h
dump.o                   os2                      reentr.o
DynaLoader.o             overload.c               regcharclass.h
embed.fnc                overload.h               regcomp.c
embed.h                  pad.c                    regcomp.h
embedvar.h               pad.h                    regcomp.o
epoc                     pad.o                    regcomp.sym
ext                      parser.h                 regen
ext.libs                 patchlevel.h             regen_perly.pl
EXTERN.h                 perl                     regen.pl
extra.pods               perl.c                   regexec.c
fakesdio.h               perl.h                   regexec.o
fakethr.h                perl.o                   regexp.h
feature.h                perlapi.c                regnodes.h
form.h                   perlapi.h                run.c
generate_uudmap          perlapi.o                run.o
generate_uudmap.c        perldtrace.d             runtests
generate_uudmap.o        perlio.c                 runtests.SH
genpacksizetables.pl     perlio.h                 scope.c
git_version.h            perlio.o                 scope.h
globals.c                perlio.sym               scope.o
globals.o                perliol.h                sv.c
globvar.sym              perlmain.c               sv.h
gv.c                     perlmain.o               sv.o
gv.h                     perlmini.c               symbian
gv.o                     perlmini.o               t
h2pl                     perlsdio.h               taint.c
haiku                    perlsfio.h               taint.o
handy.h                  perlsh                   TestInit.pm
hints                    perlvars.h               thread.h
hv.c                     perly.act                time64_config.h
hv.h                     perly.c                  time64.c
hv.o                     perly.h                  time64.h
INSTALL                  perly.o                  toke.c
install_lib.pl           perly.tab                toke.o
installhtml              perly.y                  uconfig.h
installman               plan9                    uconfig.sh
installperl              pod                      uconfig64.sh
INTERN.h                 Policy_sh.SH             universal.c
intrpvar.h               Policy.sh                universal.o
iperlsys.h               Porting                  unixish.h
keywords.c               pp_ctl.c                 utf8.c
keywords.h               pp_ctl.o                 utf8.h
keywords.o               pp_hot.c                 utf8.o
l1_char_class_tab.h      pp_hot.o                 utfebcdic.h
lib                      pp_pack.c                util.c
libperl.a                pp_pack.o                util.h
locale.c                 pp_proto.h               util.o
locale.o                 pp_sort.c                utils
mad                      pp_sort.o                utils.lst
madly.c                  pp_sys.c                 uts
make_ext.pl              pp_sys.o                 uudmap.h
make_patchnum.pl         pp.c                     veryclean.sh
makedef.pl               pp.h                     vmesa
makedepend               pp.o                     vms
makedepend.SH            proto.h                  vos
makefile                 qnx                      warnings.h
Makefile                 README                   win32
Makefile.micro           README.aix               write_buildcustomize.pl
makefile.old             README.amiga             x2p
Makefile.SH              README.beos              XSUB.h
malloc_ctl.h             README.bs2000
malloc.c                 README.ce 
```

然后我尝试了，`/home/oracle/perl5/perlbrew/bin/perlbrew switch /home/oracle/perl5/perlbrew/build/perl-5.16.0`我仍然得到：`/home/oracle/perl5/perlbrew/build/perl-5.16.0 is not installed`

：/

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T09:52:35.327

1.  撤消所有操作，保留 GNU 编译器工具链（gnu-make、gcc-45）。
2.  按照[http://perlbrew.pl/](http://perlbrew.pl/)上的说明进行安装`perlbrew`。（如果要将 perlbrew 的文件存储在非默认目录中，请注意首先设置环境变量`PERLBREW_ROOT`。）在安装结束时，它会告诉您将 shell 命令添加到登录 shell 配置并再次登录，不要忽略这些步骤。
3.  用于`perlbrew`安装受支持的 Perl：

    ```
    perlbrew -v install perl-5.16.0 -Dcc=gcc
    perlbrew switch perl-5.16.0
    perlbrew install-cpanm 
    ```

4.  `cpanm`是 的替代品`cpan`，无需进一步配置。

    ```
    cpanm -v CGI
    cpanm -v DBI
    cpanm -v DBD::Oracle 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T13:48:26.040

回到你的安装：

步骤 1-5 很好。不要导出 PERL5LIB 或 PERLLIB 不确定这是什么意思。

步骤 6) 编译 DBI

`cd DBI-1.621`

由于您想使用不同的 perl，请执行以下操作：

`/opt/oracle/rdbms/perl/bin/perl Makefile.PL`

这应该获取该 perl 的编译器选项和 perl 库位置（我假设您正在尝试使用 oracle 安装中的 perl，不确定这是否明智）。在 DBI-1.621 中运行 make 然后进行安装。

步骤 7) 编译 DBD:Oracle 并再次使用 Makefile.PL 上的 /opt/oracle/rdbms/perl/bin/perl 创建 makefile，不要编辑 Makefile.PL。如果要进行测试，请确保设置了 ORACLE_HOME 和 ORACLE_USERID。您可能还必须将 LD_LIBRARY_PATH 设置为包含 $ORACLE_HOME/lib 如果它还没有。像使用 DBI 一样运行 make 和 install。

步骤 8) 编译 CGI，如前所述，在 Makefile.PL 上使用 /opt/oracle/rdbms/perl/bin/perl 生成正确的 makefile，然后运行 ​​make 并安装。

替代方法是：

```
执行步骤 1-5
export ORACLE_HOME="进入 oracle 主页"
导出 LD_LIBRARY_PATH=${LD_LIBRARY_PATH}:$ORACLE_HOME/lib

/opt/oracle/rdbms/perl/bin/perl -MCPAN -e 'shell'
cpan>安装DBI
cpan>安装 DBD::Oracle
cpan>安装CGI

```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T16:52:40.887

1.  我不确定您为什么要更改发行版的安装位置，但要这样做，请使用

    ```
    perl Makefile.PL PREFIX=/opt/oracle/rdbms 
    ```

    或一些这样的。不要编辑`Makefile`。

2.  您更改了模块的安装位置，但不清楚您是否告诉 Perl 模块的安装位置。对于上面的命令，你需要一些东西：

    ```
    export PERL5LIB=/opt/oracle/rdbms/lib/site_perl 
    ```

    如果你仍然不能让它工作，请提供完整的错误信息——它应该指定 Perl 的查看位置——并且目录的完整补丁`DBI.pm`位于安装后。（使用上述设置，它可能会在类似的东西中找到`/opt/oracle/rdbms/lib/site_perl/5.16.0/x86_64-linux-thread-multi/DBI.pm`。）

# ruby-on-rails - text_field_tag 和 number_to_phone 使用情况

> ID：10745274
> 
> 赞同：0
> 
> 时间：2012-05-24T21:05:29.800
> 
> 标签：ruby-on-rails, ruby-on-rails-3, textfield

我有一个输入字段，用户可以在其中输入电话号码

```
<%= text_field_tag :mobile_number, '', 
```

我需要使用`number_to_phone`如何将此方法添加到我的电话号码重新格式化`text_field_tag`

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-24T22:48:19.910

也许像

```
text_field_tag :mobile_number, number_to_phone(1234567890) 
```

如果您已经为该字段设置了默认编号。

# javascript - 动画折叠移动其他元素

> ID：10745283
> 
> 赞同：0
> 
> 时间：2012-05-24T21:06:55.327
> 
> 标签：javascript, html

我正在使用 animatedcollapse 创建一个菜单，其中包含在单击时展开的 div。它可以工作，但是当一个 div 被折叠而另一个 div 被展开时，会移动以下元素，从而产生轻微的晃动效果。我很确定解决方案涉及将可折叠的 div 包装在另一个容器中，但我无法完全理解它。

网站： http: [//nicholasarehart.com/designs/sites/RCA/expertise/](http://nicholasarehart.com/designs/sites/RCA/expertise/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T07:28:12.597

我在我的一个项目中使用了相同的 Js 代码，有两种解决方案：

1.  在创建 div 时没有自动调整 div 的大小，它会转换到下一个“切换”div 的大小，如果您将所有 div 设置为相同大小，它应该消除大小之间的转换
2.  绝对定位元素，使其不会移动，考虑到您的网站，这将是这两个选项中复杂得多的一个。

我用两者来解决我的问题。

# c - C 双向链表变量未正确更新

> ID：10745285
> 
> 赞同：1
> 
> 时间：2012-05-24T21:07:12.380
> 
> 标签：c, doubly-linked-list

我在使用双向链表时遇到问题，所以我有两个问题。

首先，描述。

我是`struct`这样制作的：

```
typedef struct team{
    char *name;
    char *teamPlace;
}Team; 
```

并以这种方式创建了我的列表：

```
typedef struct nodeTeam{
    int numberOfTeams;
    Team team;
    struct nodeTeam *next;
    struct nodeTeam *prev;
}NodeTeam; 
```

所以，我的清单会有一个`head`和一个`tail`。当我将一些添加`Team`到我的列表中时，我`head` `int numberOfTeams;`将拥有我列表中的团队数量。`tail`将包含我列表的最后一个元素，`int numberOfTeams;`之后`head`将包含`Team`ID。

我的列表将以这种方式创建：

```
int createsListOfTeams(NodeTeam **head, NodeTeam **tail);
int addNodeTeamsSorted(NodeTeam *head, NodeTeam **tail, Team team);
void printListOfTeams(NodeTeam *listofTeams);

int main()
{
    NodeTeam *headTeams,*tailTeams;
    Team eq;
    /*Creates the doubly linked list*/
    if(createsListOfTeams(&headTeams,&tailTeams)){ /*See below this part of the code*/
        printf("\nError\n");
        return 0;
    }

    /*Teams are on a .txt file. The code for reading from a file is missing. It´s working ok so I believe it's not needed.
    After reading one line after another it will do this

    addNodeEquipasSorted(headTeams,tailTeams,eq);

    where eq is a `struct` with the team data.
    */

    /*Will print all the teams*/
    printListOfTeams(headTeams);

    return 0;
} 
```

这是创建列表的代码：

```
/*Add the teams to the doubly linked list. At the end, all teams will be sorted by name*/
int createsListOfTeams(NodeTeam **head, NodeTeam **tail){
    (*head) = (NodeTeam *)malloc(sizeof(NodeTeam));

    if ((*head) == NULL){
        return -1;
    }
    (*head)->numberOfTeams = 0;
    strcpy((*head)->team.teamPlace,"");
    strcpy((*head)->team.name,"");
    (*head)->next = NULL;
    (*head)->prev = NULL;

    *tail = *head;
    return 0;
} 
```

在我的列表中添加（按团队名称排序）a 的代码`Team`是这样的：

```
/*Creates the doubly linked list*/
int addNodeTeamsSorted(NodeTeam  *head, NodeTeam  **tail, Team team){
    NodeTeam  *no, *aux;

    /*Memory alloc for a new node*/
    no = (NodeTeam*) malloc(sizeof(NodeTeam));
    if (no == NULL){
        return -1;
    }

    /*Updates the number of element of the list*/
    head->numberOfTeams++;

    /*Creates a copy of tail*/
    aux = (*tail);

    /*Puts team data on node*/
    no->team = team;

    /*to see if the list it's empty(no it's the first element of my list) or the last node as a name "smaler" then node*/
    if(head == *tail || strcmp((*tail)->team.name,no->team.name) <= 0)
    {
        if (head == *tail){
            no->numberOfTeams = 1;
        }
        else{
            no->numberOfTeams = head->numberOfTeams;
            (*tail)->numberOfTeams = no->numberOfTeams - 1;
        }
        no->next = (*tail)->next;
        no->prev = *tail;
        (no->prev)->next = no;
        (*tail) = no;
        aux = (*tail);
    }
    else{ /*If not the first element*/
        head = head->next; /*To advance to the first item after my head*/
        while(strcmp(head->team.name,no->team.name) < 0 && strcmp((*tail)->team.name,no->team.name) > 0 && head != *(tail)){
            head = head->next;
            (*tail) = (*tail)->prev;
        }
        if(strcmp(head->team.name,no->team.name) >= 0){
            no->next = head;
            no->prev = head->prev;
            head->prev = no;
            (no->prev)->next = no;
            no->numberOfTeams = (no->next)->numberOfTeams;
            (no->next)->numberOfTeams = no->numberOfTeams + 1;
            if((no->prev)->prev != NULL){
                (no->prev)->numberOfTeams = no->numberOfTeams - 1;
            }
        }
        else{
            no->next = (*tail)->next;
            no->prev = (*tail);
            no->numberOfTeams = (no->prev)->numberOfTeams + 1;
            (no->prev)->next = no;
            (no->next)->prev = no;
        }
    }

    /*Puts `tail` pointing to the right position*/
    if (aux != (*tail)){
        (*tail) = aux;
    }

    return 0;
} 
```

在我的 .txt 文件中，我有以下数据：

```
E team;E team place
J team;J team place
G team;G team place
F team;F team place
L team;L team place
A team;A team place
H team;H team place
O team;O team place
K team;K team place
P team;P team place
N team;N team place
B team;B team place
C team;C team place
M team;M team place
D team;D team place
I team;I team place 
```

这就是输出。

```
---------------------------------------------------------
|                     List of Teams                     |
---------------------------------------------------------
|        Number of Teams       |                     16 | no 00740ff0 | prev 00000000 | next 00741240 |
--------------------------------------------------------
|  ID  |       Team Name       |        Team Place      |
--------------------------------------------------------
|    1 | A team                | A team place           | no 00741240 | prev 00740ff0 | next 00741450 |
|    2 | B team                | B team place           | no 00741450 | prev 00741240 | next 007436b0 |
|    3 | C team                | C team place           | no 007436b0 | prev 00741450 | next 00743760 |
|    4 | D team                | D team place           | no 00743760 | prev 007436b0 | next 00741088 |
|    5 | E team                | E team place           | no 00741088 | prev 00743760 | next 00741190 |
|    2 | F team                | F team place           | no 00741190 | prev 00741088 | next 00741138 |
|    3 | G team                | G team place           | no 00741138 | prev 00741190 | next 00741298 |
|    4 | H team                | H team place           | no 00741298 | prev 00741138 | next 007437b8 |
|    5 | I team                | I team place           | no 007437b8 | prev 00741298 | next 007410e0 |
|    4 | J team                | J team place           | no 007410e0 | prev 007437b8 | next 00741348 |
|    5 | K team                | K team place           | no 00741348 | prev 007410e0 | next 007411e8 |
|    7 | L team                | L team place           | no 007411e8 | prev 00741348 | next 00743708 |
|    8 | M team                | M team place           | no 00743708 | prev 007411e8 | next 007413f8 |
|    8 | N team                | N team place           | no 007413f8 | prev 00743708 | next 007412f0 |
|    9 | O team                | O team place           | no 007412f0 | prev 007413f8 | next 007413a0 |
|   10 | P team                | P team place           | no 007413a0 | prev 007412f0 | next 00000000 |
-------------------------------------------------------- 
```

通过此输出，我可以看到我的团队正在按名称排序添加到我的列表中。我打印内存地址的调试显示一切正常。问题在于团队 ID。它的`int numberOfTeams;`

所以，最后在所有这些文本之后，这些是我的问题：

**问题 1**如何解决我的团队 ID，即在`Team`我的列表中插入新的 ID 后，ID 更新为正确的 ID。

**问题 2**虽然我`addNodeTeamsSorted`正在使用 ID exeption，但我相信它是“不稳定的”。你能推荐一些优化吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T21:13:27.440

> 我可以做些什么来解决我的团队 ID 名称，即在我的列表中插入一个新团队后，ID 会更新为正确的 ID。

这是非法的内存写入：

```
(*head) = (NodeTeam *)malloc(sizeof(NodeTeam));

if ((*head) == NULL){
    return -1;
}
(*head)->numberOfTeams = 0;
strcpy((*head)->team.teamPlace,"");   <<------- here, and
strcpy((*head)->team.name,"");        <<------- here 
```

`teamPlace`并且`name`是统一`char*`的，所以`strcpy()`遗嘱写到它不应该写的地方。您需要为这些分配内存或将它们定义为固定大小的数组（如果可能）。

# android - Android 通知 setLastestEventInfo 的设置样式

> ID：10745289
> 
> 赞同：1
> 
> 时间：2012-05-24T21:07:35.693
> 
> 标签：android

是否可以在 Android 中设置通知的样式？

```
 Notification notification = new Notification(R.drawable.notification_icon,
        null,
        mSystem.currentTimeMillis());
    notification.setLatestEventInfo(this,
        getResources().getString(R.string.initializing_notification_title),
        null,
        pendingIntent); 
```

不幸的是，无法在 Android 中以编程方式设置字体样式。有没有办法让我在显示此通知之前设置它的字体颜色和字体大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T21:31:37.197

在 Android SDK 文档中，他们有一个使用自定义通知布局的好例子：

[http://developer.android.com/guide/topics/ui/notifiers/notifications.html#CustomExpandedView](http://developer.android.com/guide/topics/ui/notifiers/notifications.html#CustomExpandedView)

# jquery - 从函数中排除一个类

> ID：10745295
> 
> 赞同：4
> 
> 时间：2012-05-24T21:08:03.003
> 
> 标签：jquery

基本上，我正在为我的作品集制作一个过滤器，以便您可以单击“网页设计”，例如，它会淡出未标记为此类的 div。问题是我在“#content”中有一些我不想触摸的标题 div 房屋。

```
$(document).ready(function() {
    $('#filternav a').click(function() {
        $('#filternav .current').removeClass('current');
        $(this).parent().addClass('current');

        var filterVal = $(this).text().toLowerCase().replace(' ','-');

        if(filterVal == 'view-all') {
            $('#content div.hidden').fadeIn('slow').removeClass('hidden');
        } else {

            $('#content div').each(function() {
                if(!$(this).hasClass(filterVal)) {

                    $(this).fadeOut('normal').addClass('hidden');

                } else {
                    $(this).fadeIn('slow').removeClass('hidden');
                }
            });
        }

        return false;
    });
}); 
```

我想添加一些东西做那行 #content div 。each(function) 将排除具有“标题”类的事物。我认为它应该像 if 语句一样简单，但我一定做错了什么，而且我对 jQuery 很陌生，所以我不确定这种语法应该是什么。谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-24T21:09:38.083

尝试使用`.not`如下，

```
$('#content div').not('.title').each(function() { 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-24T21:11:10.203

[您可以使用:not 选择器](http://api.jquery.com/not-selector/)立即将其排除：

```
$('#content div:not(.title)') 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-24T21:09:41.950

使用[.not() 选择器](http://api.jquery.com/not-selector/)。

**代替**

```
$('#content div') 
```

**和**

```
$('#content div').not(".title") 
```

# iphone - iPhone 倾斜和 iPhone 抖动

> ID：10745298
> 
> 赞同：2
> 
> 时间：2012-05-24T21:08:11.397
> 
> 标签：iphone, ios, ipad

我正在编写一个需要根据 iPhone 加速执行某些操作的应用程序。话虽如此，它还需要很好地区分 iPhone 抖动和 iPhone 倾斜事件。因此，如果我知道设备正在摇晃（这在某种程度上意味着倾斜），我应该只对“摇晃”而不是“倾斜”采取行动，反之亦然。有人能指出我正确的方向或提供一些示例代码吗？

问候万岁

# javascript - Javascript将函数的返回值转换为变量

> ID：10745303
> 
> 赞同：2
> 
> 时间：2012-05-24T21:08:31.480
> 
> 标签：javascript, node.js, express

我怎样才能使它`app.locals.user`成为返回值而不是函数？现在我必须跑`app.locals.user().name`。

我怎样才能做到，这样我就可以跑了`app.locals.user.name`？

```
 app.locals.user = function(){
            if(typeof(req.session.user) != 'undefined'){
                console.log(req.session.user.name.full);
                return req.session.user;
            }else{
                return false;
            }
        }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T21:16:35.010

只是`return whateverVariable;`

没有输入 Javascript，因此您实际上无法将其放入函数签名中。

```
function foo() {
    var x = { a : 10, b : 20};
    return x;
}

var y = foo();
debug(y.a);  //prints 10 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T22:17:28.547

您可以立即执行该函数以将结果存储为变量：

```
 app.locals.user = (function(){
            if(typeof(req.session.user) != 'undefined'){
                console.log(req.session.user.name.full);
                return req.session.user;
            }else{
                return false;
            }
        })(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T09:31:31.790

好吧，你可以使用[__defineGetter__](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/DefineGetter)：

```
app.locals.__defineGetter__("user", function() {
    if(typeof(req.session.user) != 'undefined') {
        console.log(req.session.user.name.full);
        return req.session.user;
    } else {
        return false;
    }
}); 
```

**编辑**： __defineGetter__ 似乎已被弃用，这是一个更好的方法：

```
Object.defineProperty(app.locals, "user", { get : function() {
    if(typeof(req.session.user) != 'undefined') {
        console.log(req.session.user.name.full);
        return req.session.user;
    } else {
        return false;
    }
}); 
```

# winforms - 移动扫描仪上的 Windows 窗体应用程序，无法扫描到文本框

> ID：10745310
> 
> 赞同：0
> 
> 时间：2012-05-24T21:09:07.830
> 
> 标签：winforms, mobile, barcode-scanner

在我的扫描仪上的 windows 窗体上设置简单的文本框时遇到一些问题。我必须将新文本框添加到现有已创建的应用程序中，而我的新文本框似乎不起作用。

当我将焦点设置到我的文本框时，然后我尝试扫描条形码，文本框中没有显示任何数据。我可以很好地将条形码扫描到应用程序中已经创建的文本框中，不知道有什么区别。

我看不出两个文本框的属性有什么不同，一切都一样。

请指教

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T06:24:29.560

我认为不同之处在于您的扫描仪读取事件处理程序附加到现有文本框。您必须将相同的处理程序添加到您的新文本框中。

# javascript - 菜单在 Firefox 上运行不佳

> ID：10745312
> 
> 赞同：3
> 
> 时间：2012-05-24T21:09:18.103
> 
> 标签：javascript, jquery, html, firefox

我有这个 HTML 代码：

```
<ul class="navigation-links">
    <li class="link-item">
        <img src="images/new-menu/menu-item_04.png" width="150" height="41" alt="" />
        <div style="display: none" class="sub-menu">
            <div class="sub-col">
                <img src="images/new-menu/home.png" width="46" height="14" alt="" />
                <ul>
                    <li>item</li>
                    <li>item</li>
                    <li>item</li>
                    <li>item</li>
                    <li>item</li>
                    <li>item</li>
                </ul>
            </div>
            <div class="sub-col">
                <img src="images/new-menu/home.png" width="46" height="14" alt="" />
                <ul>
                     <li>item</li>
                    <li>item</li>
                    <li>item</li>
                    <li>item</li>
                </ul>
            </div>
            <div class="sub-col">
                <img src="images/new-menu/sataer.png" width="124" height="17" alt="" />
                <ul>
                    <li>item</li>
                    <li>item</li>
                    <li>item</li>
                    <li>item</li>
              </ul>
          </div>
            <div class="clear"></div>
        </div>
    </li>
    <li class="link-item">
        <img src="images/new-menu/menu-item_03.png" width="154" height="41" alt="" />
        <div style="display:none" class="sub-menu index-menu-col2">
            <div class="sub-col">
                <img src="images/new-menu/decor.png" width="53" height="15" alt="" />
                <ul>
                  <li>item</li>
                    <li>item</li>
                    <li>item</li>
                    <li>item</li>
                    <li>item</li>
                    <li>item</li>
                    <li>item</li>
                    <li>item</li>
              </ul>
          </div>
            <div class="sub-col">
                <img src="images/new-menu/acc.png" width="94" height="15" alt="" />
                <ul>
                  <li>item</li>
                    <li>item</li>
                    <li>item</li>
                    <li>item</li>
                    <li>item</li>
                    <li>item</li>
              </ul>
          </div>
            <div class="sub-col">
                <img src="images/new-menu/out-decor.png" width="120" height="17" alt="" />
                <ul>
                    <li>item</li>
                    <li>item</li>
                    <li>item</li>
                    <li>item</li>
              </ul>
          </div>
            <div class="clear"></div>
        </div>
    </li>
    <li class="link-item">
        <img src="images/new-menu/menu-item_02.png" width="152" height="41" alt="" />
        <div style="display: none" class="sub-menu index-menu-col3">
            <div class="sub-col">
                <img src="images/new-menu/lighting.png" width="35" height="16" alt="" />
                <ul>
                  <li>item</li>
                    <li>item</li>
                    <li>item</li>
                    <li>item</li>
              </ul>
          </div>
            <div class="sub-col">
                <img src="images/new-menu/electric.png" width="106" height="19" alt="" />
                <ul>
                    <li>item</li>
                    <li>item</li>
                    <li>item</li>
                    <li>item</li>
                    <li>item</li>
                    <li>item</li>
                    <li>item</li>
              </ul>
          </div>
          <div class="clear"></div>
        </div>
    </li>
    <li class="link-item"><img src="images/new-menu/menu-item_01.png" width="151" height="41" alt="" /></li>
</ul> 
```

和这个 JavaScript 代码：

```
$(document).ready(function(e) {
$(".link-item").hover(function(e) {
    $(this).children(".sub-menu").slideDown("slow");
});
$(".link-item").mouseleave(function(e) {
    $(this).children(".sub-menu").slideUp("fast");
}); 
```

当我在 Firefox 上打开此页面并尝试其中一个菜单时，它的行为会非常奇怪。并且指向的菜单会不断向下滑动和向上滑动。

[演示页面](http://www.mfrsht.com/demo/demo.php)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T21:13:42.530

问题是因为您只提供了一个函数`hover()`，然后它将在`mouseenter`和上执行`mouseleave`。你应该给它两个功能，每个事件一个。试试这个：

```
$(document).ready(function(e) {
    $(".link-item").hover(
        function(e) { $(this).children(".sub-menu").slideDown("slow"); },
        function(e) { $(this).children(".sub-menu").slideUp("fast"); }
    );
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T21:13:52.303

看起来您的链接下方有一些“空白”区域，导致菜单上下移动。您可以尝试向上移动菜单，以免鼠标悬停在空白区域，这会导致执行“mouseleave”功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T21:11:49.107

嗯，是。悬停函数有两个参数，一个用于“鼠标进入”，另一个用于“鼠标移出”，但您将鼠标放在悬停之外。多尝试这样...

```
$(document).ready(function(e) {
  $(".link-item").hover(function(e) {
    $(this).children(".sub-menu").slideDown("slow");
  },
  function(e) {
    $(this).children(".sub-menu").slideUp("fast");
  })
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T21:13:29.150

尝试：

```
$(document).ready(function(e) {
    $(".link-item").mouseover(function(e) {
        $(this).children(".sub-menu").stop().slideDown("slow");
    }).mouseleave(function(e) {
        $(this).children(".sub-menu").stop().slideUp("fast");
    });
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-24T21:14:02.483

您需要防止动画队列建立，尝试这样的事情：

```
$(document).ready(function(e) {
$(".link-item").hover(function(e) {
    $(this).children(".sub-menu").stop().slideDown("slow");
});
$(".link-item").mouseleave(function(e) {
    $(this).children(".sub-menu").stop().slideUp("fast");
}); 
```

# css - css 或 js 锚定图像翻转，对窗口调整大小具有“粘合到背景”效果

> ID：10745313
> 
> 赞同：0
> 
> 时间：2012-05-24T21:09:19.933
> 
> 标签：css, image, rollover

几天来我一直在尝试创建这个，但没有 100% 的工作结果。我想为我的网站制作 5 个锚定图像翻转（用于导航菜单）。我现在一定已经读过十几个教程了。他们中的一些人推荐我使用 js，其他人推荐我使用 css。所有这些都产生了大部分问题。最普遍的问题是，当我进行功能性图像翻转并使用 css 定位它时，当我调整浏览器大小时，它不会与其余图像（具有“粘到背景”效果）成比例地转换其位置窗户。基本上我希望所有图像（包括翻转）都具有“粘在背景上”的效果。

我现在拥有的是最接近预期效果的东西。在 Firefox 中，只有当鼠标悬停在图像的顶部 25% 并且“粘在背景上”效果不起作用时，翻转才有效。在 chrome 中，锚定的翻转图像可以正常工作，但“粘在背景上”的效果也不起作用。这是代码：

```
#news {
position:relative;
left:180px;
bottom:450px;
width:210px;
height:67px;
}

<div id="news" align="center">
<a href="news.html" 
onmouseover="document.news.src='newsRO.png'" 
onmouseout="document.news.src='news.png'">
<img src="news.png" name="news" width="210px" height="67"/>
</a>
</div> 
```

这是一个现场示例的链接：[http](http://www.scissormanmusic.com/index_new2.html) ://www.scissormanmusic.com/index_new2.html 显然，我仍然需要对网站上的其他一些元素进行大量定位和内容开发。但是一旦我可以使菜单正常运行，我应该能够将它们放在正确的位置...我想

请。任何见解将不胜感激。谢谢你！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T22:24:07.757

还有要显示的代码吗？活生生的例子？

通过猜测：试穿`display:block`你的锚

# asp.net - 部署一个包含多个项目的 ASP.NET 网站解决方案

> ID：10745314
> 
> 赞同：1
> 
> 时间：2012-05-24T21:09:28.133
> 
> 标签：asp.net, asp.net-mvc, deployment, web-deployment-project

我正在尝试上传一个包含多个解决方案的 asp.net 网站项目，例如一个解决方案用于数据访问层，其他解决方案是业务逻辑层、UI、commonUtilities..

在本地它工作正常，但是当我在远程服务器上上传文件时，如果我只单独上传用户界面，其中存储了 aspx 文件，它不会显示任何期望。当我右键单击主解决方案时，它也不会显示发布选项。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-24T21:14:40.410

一个更正，这是错误的：您在一个网站项目下有多个解决方案。

你有一个 Visual Studio**解决方案，它下面有多个项目，**包括 UI 项目、数据访问项目、类库等......

你应该只发布**UI 项目**（你有 ASPX 文件的地方）。右键单击该特定项目，您将在上下文菜单中看到发布选项。您的其他项目将被编译为程序集（**DLL**文件），并在您发布时位于名为 bin 的文件夹中（*假设您已在 UI 项目引用部分中为这些项目添加了适当的引用*）。将这些文件（ASPX 文件、bin 文件夹、您拥有 Scripts/CSS 的任何文件夹）移动到您的服务器，这样您就可以了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T21:11:27.173

如果您的 Web 应用程序正在引用其他项目，Visual Studio 将部署它们的 DLL 以及 Web 应用程序/用户界面。

高温高压

# clojure - 匹配列表

> ID：10745318
> 
> 赞同：1
> 
> 时间：2012-05-24T21:09:52.800
> 
> 标签：clojure, clojure-core.logic

我想知道是否可以使用 matche 之类的东西与 core.logic 中的列表进行模式匹配

与向量类似

```
=> (defn checko [code r] (matche [code] ([['foo ?a ?b]] (== r [?a ?b]))))
=> (run* [q] (checko [:foo :u 2] q))
  ([:u 2]) 
```

效果很好，但我不知道如何匹配列表 (foo :u 2) 而不是向量。原因是我想使用 core.logic 分析 clojure 程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T00:17:52.843

您的 checko 应该可以很好地用于匹配列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T02:41:12.823

如果作者本人的保证还不够，我使用 core.match 和向量模式匹配列表（实际上是一般的 seqs）就好了——这就是他们应该做的。

# installation - IBM Rhapsody 看不到许可证服务器

> ID：10745325
> 
> 赞同：0
> 
> 时间：2012-05-24T21:10:21.347
> 
> 标签：installation, license-key, rhapsody, ibm-rational

我们有多个 Rational Rhapsody 的学术许可证，但似乎我们仍然无法使应用程序正常工作。我们的一台机器上有许可证文件，但其他机器看不到用作许可证服务器的一台机器。

错误信息是

> 网络软件 (WINSOCK) 无法获取计算机“SPL-X60S”的 IP 地址。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T21:22:50.577

我在学术网络上发现，取决于您所在的网络，`27000@<hostname>`如果您的所有密钥都在一台计算机上，有时它对于服务器来说很简单。但是在大学里，我在计算机科学系工作，而 CS 网络不允许这样做。因此，除了正确的安全设置，我们还没有找到任何其他方法，而不是专门在 CS 服务器上。

尝试`27000@<hostname>`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T21:23:49.767

如果服务器计算机和我自己都关闭了 VPN 并且服务器的防火墙被关闭，它对我有用。但是，这仅在防火墙重新打开后的一个小时内有效。

# windows - 在其他机器上运行 C++ 程序

> ID：10745334
> 
> 赞同：1
> 
> 时间：2012-05-24T21:11:22.690
> 
> 标签：windows, dll, installation

所以我知道这是一个常见的问题。我希望能够在其他 Windows 机器上运行 C++ 程序，而无需在它们上安装 Visual Studio。自然，我会收到有关缺少 dll 文件的错误消息。我想知道是否可以创建一个安装程序来安装该 dll，然后能够运行该程序。那会工作还是有其他需要的文件？如果会，我会怎么做这样的事情？有一个自动安装程序肯定会很好。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T21:12:56.113

看看有没有`static`编译选项。应该有。这样您就可以静态编译程序，将所有必要的`dll`文件放入可执行文件中，这样您就可以在其他 Windows 平台上移动 exe 文件，而无需安装`VS`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T21:16:12.657

确定您需要哪些 DLL（和控件等）的常用方法是使用[Dependency Walker](http://www.dependencywalker.com/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T21:24:28.263

如果您确切知道缺少哪些 dll 文件，您可以简单地在应用程序旁边提供它们，例如以 .zip 文件的形式。

为 Windows 制作安装程序并非易事。您可能想研究为您完成此任务的软件，例如[Setup Factory](http://www.indigorose.com/products/setup-factory/)（付费）或[Nullsoft Scriptable Install System](http://nsis.sourceforge.net/Main_Page)（免费）。这些软件将允许您非常轻松地创建具有专业外观的安装。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T21:25:29.573

您是否知道您不必安装整个 VS 即可在其中运行您的应用程序，而只需安装可能比静态编译的应用程序更小的 (~5 MB)的 VS 可[再发行包？](http://www.microsoft.com/en-us/download/details.aspx?id=5555)如果您希望您的应用程序（包括先决条件）看起来是一体成型的，您也可以使用[部署引导程序。](http://msdn.microsoft.com/en-us/library/h4k032e1.aspx)

但是，静态链接也是一个不错的选择，尤其是当您的程序不包含太多二进制文件并且正在执行非常简单的任务时。

# spring - Freemarker 和 Spring：将 servlet 路径添加到带有 @spring.url 的链接

> ID：10745335
> 
> 赞同：1
> 
> 时间：2012-05-24T21:11:27.103
> 
> 标签：spring, freemarker

我的应用程序使用 Freemarker 和 Spring 3 以及不是根的 servlet 路径。像“/csm/*”这样的东西。

所以，我的 URL 应该是：“http://localhost:8080/myapp/csm/*”。

问题是当我使用@spring.url（来自spring.flt）时，它只添加了“http://localhost:8080/myapp”，没有servlet路径“/csm/*”。

有没有办法将 servlet 路径也添加到 URL 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T14:27:51.093

您可以在构建链接时访问当前的 HTTPServletRequest 对象：

```
${Request.getRequest().getServletPath()} 
```

# php - 如何使用 MVC 从 PHP 生成模板化 HTML

> ID：10745342
> 
> 赞同：1
> 
> 时间：2012-05-24T21:11:52.720
> 
> 标签：php, html, model-view-controller, html-generation

我有相当复杂的 HTML 文档要生成，格式为

`<head> (a css that needs to be inserted here) </head>`

以及具有多种 HTML 模板位的主体。简单地说，我可能有一个 PHP 函数（让我们假设域是新闻文章，因为这是最简单的），比如

```
generateNewsBlob($title, $author, $imageSrc)
showUserInfo($userInfoStruct)
//etc. 
```

这将输出带有填充模板的参数的 HTML。

至少我只想要一个易于编辑 PHP 和易于编辑 HTML 和 CSS 的漂亮文件夹。到目前为止，我已经将所有内容都放在一个 .php 文件中—— `'lots of HTML <img src="' . $imgSrc . "'> more HTML ...'` 这使得我们的设计师很难进行修改，而我们的编码员（那就是我）很难进行修改。所以我需要把它解耦。但我不确定如何拥有一个纯 html 文件，其中包含要由 php 填充的“漏洞”，因为我会在 PHP 中实现这些漏洞...... catch-22。

在之前的 SO question 中建议 MVC 是实现此目的的方法。这听起来很可信，但我不知道如何去做。我不能引入任何 IDE - 开发人员应该能够在控制台的文本编辑器中进行处理。

如果它们恰好“更好”，那么 Python 和 Java 也是选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T21:16:54.433

PHP 和其他平台有很多 MVC 框架。[http://www.phpwact.org/php/mvc_frameworks](http://www.phpwact.org/php/mvc_frameworks)使用这些有很多好处，但如果你想要更简单的东西，你可以使用 PHP 模板引擎[http://www.smarty.net/](http://www.smarty.net/)

# javascript - 使用 casper/phantomjs 输出客户端控制台

> ID：10745345
> 
> 赞同：20
> 
> 时间：2012-05-24T21:12:01.637
> 
> 标签：javascript, console, phantomjs, headless-browser, casperjs

通过 casperjs 文档，我找不到可以从客户端 javascript 中看到 console.log 的位置。这可能吗？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-05-28T11:09:07.270

我不确定是否完全理解您的问题，但您可以执行以下操作：

```
var casper = require('casper').create({
    logLevel: "debug"
});

casper.on('remote.message', function(message) {
    this.echo(message);
});

casper.start('http://google.com/', function() {
    this.evaluate(function sendLog(log) {
        // you can access the log from page DOM
        console.log('from the browser, I can tell you there are ' + log.length + ' entries in the log');
    }, this.result.log);
});

casper.run(); 
```

输出：

```
$ casperjs log.js 
from the browser, I can tell you there are 4 entries 
```

# ruby-on-rails - 在金钱和时间中添加尾随零

> ID：10745348
> 
> 赞同：2
> 
> 时间：2012-05-24T21:12:21.960
> 
> 标签：ruby-on-rails, ruby, time, currency

我想知道如何在时间和现金上添加尾随零。

我有这个：

> 0h1 0.0 $

但我想像这样得到它：

> 0h01 0.00 $

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T21:19:31.017

对于货币，使用[number_to_currency](http://api.rubyonrails.org/classes/ActionView/Helpers/NumberHelper.html#method-i-number_to_currency)。它应该是这样的

> number_to_currency（1.4，格式：“%n %u”）

对于时间，请使用[strftime](http://www.ruby-doc.org/core-1.9.3/Time.html#method-i-strftime)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-08-15T15:35:51.933

你在这里想要的是：

```
'%.2f' % your_thing 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T21:15:51.970

Rails 中有一些用于数字的辅助方法。看看[http://api.rubyonrails.org/classes/ActionView/Helpers/NumberHelper.html](http://api.rubyonrails.org/classes/ActionView/Helpers/NumberHelper.html)（特别是 number_with_precision 在你的情况下可能很有趣）

# javascript - 是否有一种规范的方式来为加载缓慢的网页呈现“加载”弹出窗口？

> ID：10745353
> 
> 赞同：2
> 
> 时间：2012-05-24T21:12:36.387
> 
> 标签：javascript, user-interface, dom-events

**前言：**

我有一个以简单方式工作的网络应用程序：

1.  用户单击第 1 页上的按钮。这将提交第 2 页的 POST 请求。

2.  第 2 页需要 1-2 分钟才能在后端检索数据。

3.  Page 2 后端将计算出的 HTML 发送到浏览器，需要一段时间（10-30 秒）才能呈现。

这里**明显**的可用性问题是，当在第 1 步中单击按钮时，用户必须坐在那里，而网页似乎什么也没做（浏览器显示它正在连接到状态栏上的第 2 页，但大多数用户没有没有注意到）；然后它将第 1 页的内容替换为一个 EMPTY 页面，该页面也坐在那里似乎什么也没做，而内容正在被渲染并且 DOM 是从一个大型数据集构建的。

我撇开上述解决方案经过精心设计，需要适当地重新设计以：（1）利用 AJAX 检索数据；和/或 (2) 以较小的（人类可消费的）块检索数据，并根据需要逐步加载更多数据。由于资源限制，没有这样的重新设计，**我正在尝试应用**以下性质的快速而肮脏的可用性修复：

A. 单击第 1 页上的按钮后，用户会看到一个模式弹出窗口，上面写着“正在处理和重新加载数据。这可能需要大约 3 分钟才能完成”。

B. 重要的是，模式弹出窗口应该在第 2 页加载开始时持续存在（或者至少可以无缝地重新创建）。

* * *

**问题**：

**构建这种模式弹出窗口的“最佳实践”方法是什么？**

显然，单独实现#A 是微不足道的（页面 1 上的弹出窗口将一直持续到来自页面 2 的 HTTP 响应到达客户端并且页面 2 开始渲染替换页面 1）。

但是，当第 2 页到达时，保存/重新克隆此弹出窗口的最佳方法是什么？这里的两个问题是尽可能地实现从 HTTP 响应之前的弹出和之后的弹出的无缝过渡；更重要的是，避免必须等待完整的第 2 页呈现（在显示弹出窗口之前等待 30 秒）。

**澄清：**

*   任何建议的方法都不应该是 AJAX。例如，所做的任何事情都必须包含在第 2 页的 HTTP 响应发送的相同 HTML 内容中。

*   我正在寻找一般技术指针，不一定是示例代码。“使用`window.onload`处理程序来执行此操作”的顺序（显然错误的答案正确性）。

*   理想情况下，该解决方案应该使用纯 Javascript，但如果存在使用 jQuery 或 YUI 的**更好**解决方案，我会考虑它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T21:29:00.370

所以这实际上是一个非常简单的修复。查看[此小提琴](http://jsfiddle.net/DAPuj/2)以获取一些示例叠加代码。

当您的页面准备就绪时，只需进行以下调用（如果您使用的是 jQuery）：

```
$(function(){
    $('.overlay').fadeOut();
}); 
```

基本上，默认情况下，您的叠加层将在那里，并且下面加载的任何内容都将被隐藏。加载完所有内容后，只需淡出叠加层即可！您不需要任何特殊脚本或任何东西，只需默认打开叠加层并在准备好时将其关闭。

如果您想开始将它用于 AJAX，在您进行 ajax 调用之前，只需调用`$('.overlay').fadeIn();`它也很容易更改覆盖层内的文本。只要找到节点，

```
$('.overlay').find('.message p').text('Some new text').end().fadeIn(); 
```

如果您只想使用标准 JS，您可以`window.onload`按照您的建议将该函数附加到，但这只会检测页面何时准备好，而不是 DOM，就像 jQuery 所做的`.ready()`那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T21:31:59.477

所以从我对你的论文问题的理解来看（这是一堆诚实的阅读）

*   我假设您的页面请求只是正常的“单击此链接并加载非常慢的页面”。
*   你想表明它加载的东西非常慢
*   在第 2 页到达时再显示指示器 10 多秒以呈现

好吧，您应该尽早加载第 2 页的模态。在头部加载库和脚本。由于解析通常是自上而下的，因此模式应该在慢速内容之前，以便对其进行解析并可供脚本使用。

利用 jQuery 的优势，`$(document).ready()`它在 DOM 准备好后立即执行，而不是`window.onload`在呈现所有内容（DOM、图像和所有内容）时执行

```
<script src="jquery.js"></script> <!--libraries like jquery-->
<script>
    $(function(){             //execute dialog as soon as 
        $('#modal').dialog(); //the modal div is available
    });
</script>
<body>
    <div id="modal"></div>
    <!--the rest of the slow rendering page-->
</div> 
```

# javascript - Javascript onclick选择具有类的兄弟

> ID：10745356
> 
> 赞同：2
> 
> 时间：2012-05-24T21:12:45.377
> 
> 标签：javascript, onclick, show-hide

我想显示/隐藏一个 2 兄弟元素`onclick`。

在页面上，我有多个`detailLinksItem`将包含此显示/隐藏功能，因此只需要选择兄弟姐妹。我需要`onclick`为`.style.display = 'block';`兄弟姐妹`.showLess`和`.moreLinksContainer`.

```
 <div class="detailLinksItem">
                <div class="searchIcon"></div>
                <a href="#"></a>
                <a href="#"></a>
                <div class="detailDate"></div>
                <div class="arrow-down"></div>
                <a href="#" class="showMore" onclick="showStuff(moreLinksContainer); return false;">Show more</a>
                <a href="#" class="showLess" onclick="hideStuff('moreLinksContainer'); return false;" style="display: none;">Show less</a>
                <div class="moreLinksContainer" style="display: none;">
                <ul>
                    <li><a href="#">Link Title Goes Here!!</a><div class="moreDetailDate">6 hours</div></li>
                    <li><a href="#">Link Title Goes Here!!</a><div class="moreDetailDate">1 day</div></li>
                    <li><a href="#">Link Title Goes Here!!</a><div class="moreDetailDate">3 days</div></li>
                    <li><a href="#">Link Title Goes Here!!</a><div class="moreDetailDate">1 week</div></li> 
                </ul>
                </div>
            </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T21:22:38.997

您应该避免添加内联事件声明。理想情况下，在 document.ready 操作中添加点击事件。这是您特定要求的工作示例：http: [//jsfiddle.net/P8trE/](http://jsfiddle.net/P8trE/)

它还具有隐藏“少显示”链接所需的操作:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T21:24:14.160

我建议你从 jQuery 开始，它会帮助你加快你的 javascript 开发。在您使用 jQuery 的情况下，您可以执行以下操作：

1.  删除当前的 onclick
2.  将 jQuery 库包含到头部
3.  $(function() { //分配自定义事件 $(".showMore").click(function(){ $(".showMore").hide();//隐藏显示按钮 $(".showLess"). show();//显示隐藏按钮 $(".moreLinksContainer").slideDown(); //打开容器有效果 })

    $(".hideStuff").click(function(){ $(".showLess").hide();//隐藏隐藏按钮 $(".showMore").show();//显示显示按钮 $( ".moreLinksContainer").slideUp(); //隐藏容器 }) });

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T21:19:52.640

```
<script type="text/javascript">
    function showStuff(_container){
       var c = document.getElementsByClassName(_container);
       c[0].style.display = "block";
    }
    function hideStuff(_container){
       var c = document.getElementsByClassName(_container);
       c[0].style.display = "none";
    }
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T21:20:35.517

既然你说jQuery很好：

```
$(function(){
    // When .showMore is clicked
    ​$(".showMore").on("click", function(){
        // Of all the succeeding elements, show those with these classes
        $(this).nextAll(".showLess, .moreLinksContainer").show();    
    });​
    // When .showLess is clicked
    $(".showLess").on("click", function(){
        // Take the next element, and this element, and hide them
        $(this).next().andSelf().hide();    
    });
}); 
```

演示： http: [//jsfiddle.net/EmNsT/](http://jsfiddle.net/EmNsT/) 有了这个，您可以`onclick`从链接中删除属性：

```
<a href="#" class="showMore">Show more</a>
<a href="#" class="showLess">Show less</a> 
```

将您的内联样式也移到样式表中：

```
.showLess,
.moreLinksContainer {
    display: none;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-24T21:25:56.003

我会使用 javascript 向 detailLinksItem div 添加一个附加类，然后使用级联 css 来显示或隐藏适当的子元素。

CSS：

```
.detailLinksItem .showLess, .detailLinksItem .moreLinksContainer {
   display: none;
}
.detailLinksItem.more .showMore {
   display: none;
}
.detailLinksItem.more .showLess, .detailLinksItem.more .moreLinksContainer {
   display: block;
} 
```

JS：

```
detailLinksItemElement.className = "detailLinksItem more"; 
```

# javascript - 在 a 中的行首折叠 标签

> ID：10745359
> 
> 赞同：2
> 
> 时间：2012-05-24T21:12:56.257
> 
> 标签：javascript, html, css, tinymce

我正在使用 TinyMCE 允许我的用户创建自己的网页。我的目标是让人们在编辑器中输入的内容看起来与它发布的页面完全一样。我几乎明白了，除了 Tinymce 添加了一个`&nbsp;`if 用户在他们的句子之间放置两个空格。显然，在编辑器中，`&nbsp;`如果它位于一行的开头，则它会折叠，以便每一行都一直靠在编辑器的左侧。但是，在完成的页面中，这会导致在“p”标记中的行首有空格的情况。我可以去掉`&nbsp;`，但它在编辑器中的外观与最终页面不同。

有谁知道在标签`&nbsp;`的行首折叠 a 的方法？`P`或者有没有办法在 TinyMCE 中设置不同的格式，以便编辑器和最终页面看起来完全相同？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T21:16:31.493

没有办法“折叠”它。您必须使用 REGEX 或字符串替换将其删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T07:52:47.947

正如 Diodeus 已经说过的那样，您不能折叠单个角色，如果您想摆脱它，就必须将其剥离。许多浏览器会将连续输入的多个空格“压缩”为一个空格。这意味着即使用户输入了 15 个空格，也只有一个可见空格。这就是tinymce进入受保护空间的原因。现在，所有输入的空间都将以不同类型空间的价格显示。

更新：插入跨度并检查其位置的示例代码。汇总到“左”的值将是您感兴趣的

```
 var ed = this.editor, box = null;

        if ( $(ed.getBody()).find('p:first').css('line-height') != 'normal'){
            lineHeight = $(ed.getBody()).find('p:first').css('line-height') ;
        }
        else {
            lineHeight = $(ed.getBody()).find('p:first').css('min-height');
        }

        var lineHeight = lineHeight.substr(0, lineHeight.length -2 );//box.height;

        var rng = ed.selection.getRng();
        rng.collapse(true);

        bm = ed.selection.getBookmark();
        $marker = $(ed.getBody()).find('#'+bm.id);
        var elem = ed.getDoc().getElementById(bm.id+'_start');
        box = elem.getBoundingClientRect();

        var doc = ed.getDoc(),
            docElem = doc.documentElement,
            body = ed.getBody(),
            win = ed.getWin(),
            clientTop  = docElem.clientTop  || body.clientTop  || 0,
            clientLeft = docElem.clientLeft || body.clientLeft || 0,
            scrollTop  = win.pageYOffset || jQuery.support.boxModel && docElem.scrollTop  || body.scrollTop,
            scrollLeft = win.pageXOffset || jQuery.support.boxModel && docElem.scrollLeft || body.scrollLeft,
            top  = box.top  + scrollTop  - clientTop,
            left = box.left + scrollLeft - clientLeft;

        // set Bookmark
        ed.selection.moveToBookmark(bm); 
```

# android - 开源 Android 库？可重用视图、视图组、适配器等？

> ID：10745360
> 
> 赞同：53
> 
> 时间：2012-05-24T21:13:00.217
> 
> 标签：android, open-source, android-widget, android-ui, library-project

这就是我真正想要的：一个为 Android 收集可重用组件的网站。

我找到了各种[小](http://androidcontrols.org/controls) [列表](http://android-libraries.com/)，其中最大的是[Open Intents](http://www.openintents.org/en/libraries)库列表。Mark Murphy（嗨，Mark）还列出了他出版的图书馆项目。

这些都与[Cocoa Controls](http://cocoacontrols.com/controls?sort=rating)或[Cocoa Objects](http://cocoaobjects.com)的顺序不同。

你去哪里获取可重用的 Android 库？

**编辑**：这不仅仅是关于图书馆项目，尽管这将是理想的。另一方面：除了“Github”之外，我在哪里发布我的开源库项目。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-05-24T21:19:16.740

*2013 年 6 月 28 日更新：更多库*

一些高质量的：

*   [actionbarsherlock.com](http://actionbarsherlock.com)

*   [拖动排序列表视图](https://github.com/bauerca/drag-sort-listview)

*   [FadingActionBar](https://github.com/ManuelPeinado/FadingActionBar)

*   [Square 开源 Android 库](http://square.github.io/#android)（多个高质量库）

*   [ActionBar-PullToRefresh](https://github.com/chrisbanes/ActionBar-PullToRefresh)

*   [寻呼机滑动标签条](https://github.com/astuetz/PagerSlidingTabStrip)

*   [有趣的适配器](https://github.com/amigold/FunDapter)

*   [viewpagerindicator.com](http://viewpagerindicator.com)

*   [GreenDroid](http://greendroid.cyrilmottier.com/)或~~[GDDatalog 演示应用程序](https://play.google.com/store/apps/details?id=com.cyrilmottier.android.gdcatalog)~~

也可以看看：

*   [Android UI Patterns](https://plus.google.com/108176685096570584154/posts/FMGdzuMY2nZ) App 演示并列出来自不同开发人员的*大量*组件（该应用程序已从 playstore 中删除，指向它的链接指向开发人员在 google 中发布的内容以及二进制文件和额外信息）
*   [安卓视图](http://www.androidviews.net/)
*   [Android 周刊的工具箱页面](http://androidweekly.net/toolbox)
*   用于图表等的[Androidplot](http://androidplot.com)
*   [**Android-Arsenal**](http://android-arsenal.com)各种库的大合集

有关的：

*   [android-resources-每个开发者都应该知道](http://www.bongizmo.com/blog/android-resources-each-developer-should-know/)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-11-29T16:06:32.380

您可能想看看[Android Views](http://www.androidviews.net/)。

它是相当新的，但它为 Android 提供了可重用组件的有用链接。

它还有一个简单的评级和评论系统。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-05-25T02:29:46.793

该站点是收集 Android 以及其他移动应用平台的库的绝佳参考：

[http://appdevwiki.com/wiki/show/HomePage](http://appdevwiki.com/wiki/show/HomePage)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-26T10:40:39.273

这些站点有大量的 android 开源库，以防您有兴趣：

[http://android-arsenal.com/](http://android-arsenal.com/)

[https://f-droid.org/](https://f-droid.org/)

您还可以下载这些应用程序以查看不同的库：

[https://play.google.com/store/apps/details?id=com.inappsquared.devappsdirect](https://play.google.com/store/apps/details?id=com.inappsquared.devappsdirect)

[https://play.google.com/store/apps/details?id=com.tual](https://play.google.com/store/apps/details?id=com.tual)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-13T18:56:44.240

一些有用的库：

我想向您推荐一些制作精良的 android 库（我认为）：

[AndroidSideMenu](https://github.com/dmitry-zaitsev/AndroidSideMenu) - 让您创建幻灯片菜单（如在 YouTube 应用中）。我知道有很多选择，但这个要快得多。绘制时减少了过度绘制并缓存了主要布局，因此如果您的布局“重”，它是完美的解决方案。Horizo​​ntalScrollView 没有技巧 - 这个使用纯 android 方式创建视图。

[CircleLayout](https://github.com/dmitry-zaitsev/CircleLayout) - 让您将视图排列成圆形（视图只是排列成圆形）或饼图（视图被裁剪以形成漂亮的饼图）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-03T14:50:43.807

[Scott Alexander Brown](https://twitter.com/scottyab)进行了[精彩的演讲](http://www.alexander-bown.com/2012/11/write-less-do-more-droidcon-2012/)，涵盖了一些非常有用的工具。

他还指出了类似于 Cocoa Controls 的 Ultimate Android Library (TUAL)。

**编辑：** 网站[DroidStyle](http://droidstyle.aaplab.com)提供了一系列 UI 模式示例。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-07T18:47:33.530

我在 OAK Android 工具包上提交：[http ://willowtreeapps.github.com/OAK/](http://willowtreeapps.github.com/OAK/)

它还包括一个快速入门，可以在很短的时间内启动并运行一个 android 应用程序：

[http://willowtreeapps.github.com/OAK/quick-start.html](http://willowtreeapps.github.com/OAK/quick-start.html)

# excel - 无法使用 Excel 宏将所有数据保存到 Excel 电子表格中

> ID：10745361
> 
> 赞同：0
> 
> 时间：2012-05-24T21:13:06.043
> 
> 标签：excel, excel-2007, vba

我对 Excel 宏不太擅长

我现在能够实现的是递归搜索我指定的目录中的所有子文件夹，然后抓取所有包含“Issues.xls*”的excel电子表格，然后我将信息复制到excel电子表格中并合并主 Excel 电子表格。所有的 Issues.xlsx 都有 17 列和未知的行号。如果我在合并信息时将触发宏的按钮放在同一张表中，我就可以做到这一切。

我不能做的是将按钮放在另一个名为“控制面板”的工作表中，并将所有组合信息放在另一个名为“主问题”的工作表中。如果我这样做，我只能在“主问题”中获得部分信息，而不是完整数据。

每个子文件夹我只能得到一个 excel 电子表格。例如，如果我有 3 个问题，程序只会从一张 excel 工作表中获取数据，而不是所有 3 个问题。我知道我必须在代码中犯一些愚蠢的错误，但我看不出我在哪里做错了。

如果您能帮助我，我将不胜感激。非常感谢！！

** 下面是我的代码

谢谢您的帮助。

```
Option Explicit
Sub FileListingAllFolder()

Dim pPath As String
Dim FlNm As Variant
Dim ListFNm As New Collection ' create a collection of filenames

Dim ShtCnt As Integer
Dim Sht As Integer

Dim LR As Long, NR As Long
Dim wbkOld As Workbook, wbkNew As Workbook, ws As Worksheet
Dim i As Integer

' Open folder selection
    With Application.FileDialog(msoFileDialogFolderPicker)
        .Title = "Select a Folder"
        .AllowMultiSelect = False
        If .Show <> -1 Then GoTo NextCode
        pPath = .SelectedItems(1)
    End With

    Application.WindowState = xlMinimized
    Application.ScreenUpdating = False
    Application.EnableEvents = False
    Application.DisplayAlerts = False

    ' Create master workbook with single sheets
    Set wbkNew = ThisWorkbook
    Set ws = wbkNew.Sheets("Master Issues") 'sheet report is built into...edit to match

    If MsgBox("Import new data to this report?", vbYesNo) = vbNo Then Exit Sub

    If MsgBox("Clear the old data first?", vbYesNo) = vbYes Then
        ws.Range("A2:A" & Rows.Count).EntireRow.ClearContents
        NR = 2
    Else
        NR = ws.Range("A" & Rows.Count).End(xlUp).Row + 1
    End If

    ' Filling a collection of filenames (search Excel files including subdirectories)
    ' Call FlSrch(ListFNm, pPath, "*.xls", True)
    Call FlSrch(ListFNm, pPath, "Issues.xls*", True)

    ' Print list to immediate debug window and as a message window
    For Each FlNm In ListFNm ' cycle for list(collection) processing
        'Do While Len(FlNm) > 0
        'Open file
            Set wbkOld = Workbooks.Open(FlNm)
        'Find last row and copy data
            Sheets(1).Activate 'Sheets(1).Activate
            LR = Range("A" & Rows.Count).End(xlUp).Row   'find the bottom row of data...change to a different column if "A" isn't reliable for spotting this value
            Range("A2:A" & LR).EntireRow.Copy _
                ws.Range("A" & NR)
        'close file
            wbkOld.Close False
        'Next row
            NR = Range("A" & Rows.Count).End(xlUp).Row + 1
        'move file to "imported" folder
            'Name fPath & fName As fPathDone & fName         'optional
        'ready next filename
            'FlNm = Dir
        'Loop
    Next FlNm

    ' Print to immediate debug window and message if no file was found
    If ListFNm.Count = 0 Then
        Debug.Print "No file was found !"
        MsgBox "No file was found !"
        End
    End If

    Cells.Select
    Selection.EntireColumn.AutoFit
    Range("A1").Select
    ActiveSheet.Columns.AutoFit
    Application.DisplayAlerts = True
    Application.EnableEvents = True
    Application.ScreenUpdating = True
    Application.WindowState = xlMaximized

    End

NextCode:
    MsgBox "You Click Cancel, and no folder selected!"

End Sub

Private Sub FlSrch(pFnd As Collection, pPath As String, pMask As String, pSbDir As Boolean)

Dim flDir As String
Dim CldItm As Variant
Dim sCldItm As New Collection

' Add backslash at the end of path if not present
pPath = Trim(pPath)

If Right(pPath, 1) <> "\" Then pPath = pPath & "\"

' Searching files accordant with mask
flDir = Dir(pPath & pMask)
    Do While flDir <> ""
        pFnd.Add pPath & flDir 'add file name to list(collection)
        flDir = Dir ' next file
    Loop

' Procedure exiting if searching in subdirectories isn't enabled
If Not pSbDir Then Exit Sub

' Searching for subdirectories in path
flDir = Dir(pPath & "*", vbDirectory)
    Do While flDir <> ""
    ' Do not search Scheduling folder
        If flDir <> "Scheduling" Then
            ' Add subdirectory to local list(collection) of subdirectories in path
            If flDir <> "." And flDir <> ".." Then If ((GetAttr(pPath & flDir) And _
            vbDirectory) = 16) Then sCldItm.Add pPath & flDir
        End If
        flDir = Dir 'next file
    Loop

' Subdirectories list(collection) processing
For Each CldItm In sCldItm
    Call FlSrch(pFnd, CStr(CldItm), pMask, pSbDir) ' Recursive procedure call
Next

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T21:28:57.063

我认为您应该在所有参考文献前面加上适当的书/表！例如：

```
'Find last row and copy data
wbkOld.Sheets(1).Activate 'Sheets(1).Activate
LR = wbkOld.Range("A" & Rows.Count).End(xlUp).Row 
```

如果你不这样做，你就会冒着引用 ActiveWorkbook 的 Activesheet 的风险，不管那是什么。你也可以用 改写上面的代码`With`，这样：

```
'Find last row and copy data
With wbkOld
    .Sheets(1).Activate 'Sheets(1).Activate
    LR = .Range("A" & Rows.Count).End(xlUp).Row
End With 
```

# iphone - objective-c 错误：[UIView copyWithZone:]：无法识别的选择器发送到实例

> ID：10745362
> 
> 赞同：3
> 
> 时间：2012-05-24T21:13:15.233
> 
> 标签：iphone, objective-c

我在使用块和继承时遇到了一些极端困难。

我在 .h 文件中声明了一个块：

```
void (^block)(BOOL); 
```

在.m中初始化它：

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        block = ^(BOOL noshow)
        {
            if(noshow){
                AutoTracView.hidden = YES;
                MarineTracView.hidden = YES;

            }
        };
    }
    return self;
} 
```

现在我将它以及 UIVIEw 实例传递给 UIViewController 的类别：

```
NSDictionary *const collection = [NSDictionary dictionaryWithObjectsAndKeys: //make global
                                  @"1", AutoTracView,
                                  @"2", MarineTracView,
                                  nil];

[self renderView:[current_unit.unit_type intValue] onCollection:(NSDictionary *)collection withBlock:block]; 
```

在 UIViewController+extensions.m 中：

```
-(void)renderView:(int)value onCollection:(NSDictionary *)collection withBlock:block
{
    block(TRUE);
    NSString *index = [NSString stringWithFormat:@"%d", value];
    UIView *view = [collection objectForKey:index];
    view.hidden = NO;    
} 
```

不幸的是，block(TRUE) 抛出编译错误：“调用的对象类型 id 不是函数或函数指针”

好的，所以我很绝望，只​​是尝试让块的工作正常，所以我将块作为参数调用删除。并在确实有效的控制器中调用它。但随之而来的另一个问题是：

```
NSDictionary *const collection = [NSDictionary dictionaryWithObjectsAndKeys: //make global
                                  @"1", AutoTracView,
                                  @"2", MarineTracView,
                                  nil]; 
```

上面的说法失败了：

```
-[UIView copyWithZone:]: unrecognized selector sent to instance 0x6ee2b80
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[UIView copyWithZone:]: unrecognized selector sent to instance 0x6ee2b80' 
```

我不允许传递我的 UIView 实例吗？

这是头文件：

```
@property (weak, nonatomic) IBOutlet UIView *AutoTracView;

@property (weak, nonatomic) IBOutlet UIView *MarineTracView; 
```

我现在觉得做任何事情都被困住了。这似乎是一个两部分的问题，但实际上我放弃了传递块的概念，只是寻找关于错误“[UIView copyWithZone:]: unrecognized selector sent to instance”的想法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T21:54:20.967

一个问题是您对`dictionaryWithObjectsAndKeys:`. 我认为您想让 UIViews 成为对象，将数字字符串作为键，但是按照您的编码方式，您将字符串作为值，将 UIViews 作为键。UIView 没有实现 NSCopyable，因此它们不能用作键。您应该在通话中颠倒顺序，如下所示：

```
NSDictionary *const collection = [NSDictionary dictionaryWithObjectsAndKeys: //make global
                                  AutoTracView, @"1",
                                  MarineTracView, @"2",
                                  nil]; 
```

Really, if all you want to do is give them numeric indexes, you could use an NSArray instead of an NSDictionary, but there's no reason it won't work either way.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T21:33:04.347

方法定义呢？是这样的：

```
-(void)renderView:(int)value onCollection:(NSDictionary *)collection withBlock:(void(^)(BOOL))block; 
```

也许您没有以正确的方式定义类别中的方法

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T21:56:05.320

A dictionary's keys are copied, and your code attempts to use instances of `UIView` as keys. I suspect you have your argument order wrong and meant to use the strings as keys. When using a variadic argument list to initialize a dictionary, the values come first.

# python - Ubuntu Linux：当我获得完整的 Twitter Streaming API 时，终端限制了输出

> ID：10745363
> 
> 赞同：1
> 
> 时间：2012-05-24T21:13:17.310
> 
> 标签：python, linux, ubuntu, console, terminal

我有这个 python 脚本，可以将 Twitter 流输出到我的终端控制台。现在有趣的是： * 在雪豹上，我得到了我想要的所有数据。* 在 Ubuntu（我的电脑）上，这些数据是有限的，旧数据会被删除。

两个终端控制台都在 Bash 中运行，所以它可能是操作系统的东西。

我的问题是：我该如何关闭它？为了我的学士论文，我想让我的电脑开机一周以捕获大约 1 或 2 GB 的数据！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T21:15:43.650

`>`使用或将输出重定向到文件`>>`。说

`$ cmd > filename.txt`

这会将所有内容放在 filename.txt 中，您也可以使用`2>error.txt`.

```
Edit -> profile preference -> Scrolling -> check on unlimited 
```

以防万一你想要它在控制台上。但我会建议使用文件重定向并稍后处理文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T21:19:46.890

我也避免使用终端执行此操作，而是直接回答问题：

*   右键单击终端窗口
*   简介
*   个人资料偏好
*   责骂
*   scollback：无限制

最好重定向到一个文件，然后访问该文件。“tail -f”非常有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T21:18:30.347

尝试使用`tee(1)`：

```
man tee
command | tee outputfile 
```

你也可以`nohup(1)`一起使用`tail(1)`（如果你真的需要标准输出中的输出）。

```
nohup command &
tail -f nohup.out 
```

# iphone - 当输入并不总是相同时，在objective-c中格式化小数

> ID：10745364
> 
> 赞同：0
> 
> 时间：2012-05-24T21:13:19.010
> 
> 标签：iphone

对于我从数据库中获取的变量，有时数字是 2 个十进制数字（0.12），有时数字是 4 个十进制数字（0.1234）。

有什么方法可以将其格式化为输入的任何内容？而不是总是格式化为 4 个数字？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T01:30:14.313

You can format any number to x decimal places with `stringWithFormat:`

```
NSString dbString = @"2.4312"; // Or however you get this number from your database
float *number = [dbString floatVal];
NSString *formattedNumber = [NSString stringWithFormat:@"%.2f", number]; 
```

# php - 贝叶斯评级设置

> ID：10745368
> 
> 赞同：3
> 
> 时间：2012-05-24T21:13:37.017
> 
> 标签：php, mysql, rating-system

我试图弄清楚如何开始在 MYSQL 中设置贝叶斯评级系统。我没有使用 5 星评级，而是类似的东西。我的将是一个 5 卷的酒吧。

这是我的专辑页面。用户不会对专辑进行评分，而是对歌曲进行评分，这些歌曲将被平均成为专辑评分。

*   `$songsum`
*   `$songavg`
*   `$numofrated`
*   `$totalsongs`
*   `$albumrating`

1.  `$songsum / $numofrated = $songavg`
2.  `$songavg * ($numofrated / $totalsongs) = $albumrating`

另一个页面（艺术家页面）也将被评分。

```
$avg_num_votes  = 18;  // Average number of votes in all products
$avg_rating     = 3.7; // Average rating for all products
$this_num_votes = 6;   // Number of votes for this product
$this_rating    = 4;   // Rating for this product

$bayesian_rating =
    ( ($avg_num_votes * $avg_rating) + ($this_num_votes * this_rating) )
  / ($avg_num_votes + $this_num_votes); 
```

我应该如何开始设置？应该`$this_rating`和专辑在同一张桌子吗？

* * *

**附加信息**

*   MYSQL 中的表：专辑、歌曲、流派、独奏、组
*   已经有外键链接

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T22:25:02.443

您对评级方案的最初想法可能会改变（尤其是对于专辑），因此您最好存储交易信息，这样您就可以随时重新计算所有内容。

create a new table called "Ratings" that fkeys on "Songs" and "Users":

*   id
*   song_id
*   (album_id)
*   user_id
*   rating

album_id isn't necessary since you have the song_id, but it'll save some time and disk-space is cheap

add the following fields to the database:

*   song.summary_votes
*   song.summary_average
*   album.summary_votes
*   album.summary_average

periodically run a script that updates the summary_ fields to whatever you want them to be.

# vb.net - VB.net 在非字母数字、非连字符上拆分字符串

> ID：10745370
> 
> 赞同：2
> 
> 时间：2012-05-24T21:13:42.677
> 
> 标签：vb.net, string, split

有没有比这个 for 循环更好的方法？

基本上，对于从要拆分的字符串创建的 charArray 中的每个字符，如果该字符是字母、数字或连字符，我会将其附加到临时字符串中。当我看到一个拆分字符或最后一个字符，并且临时字符串有值时，我将它添加到集合中以返回。

```
 For i As Integer = 0 To (charArrayLength - 1)

        charToInspect = CChar(charArray.GetValue(i))

        If IsLetterOrDigit(charToInspect) Or charToInspect = hyphen Then
            tempString = tempString + charToInspect

            If i = (charArrayLength - 1) Then
               listOfStringToReturn.Add(tempString)
            End If

        ElseIf tempString.Length > 0 Then
            listOfStringToReturn.Add(tempString)
            tempString = String.Empty

        End If
    Next

    Return listOfStringToReturn 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T21:17:56.383

该方法已经提供了此逻辑，该[**`string.Split`**](http://msdn.microsoft.com/en-us/library/system.string.split.aspx)方法采用可能的分隔符列表进行拆分。

```
Return myString.Split("-"C) 
```

如果您有更复杂的分隔符，您可以查看[**`Regex.Split`**](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.split.aspx).

# python - 获取 TypeError：“POST 数据应该是字节或字节的可迭代。它不能是 str。” 同时遵循简单的在线示例

> ID：10745375
> 
> 赞同：2
> 
> 时间：2012-05-24T21:13:53.423
> 
> 标签：python, selenium, python-3.2

我正在尝试学习一些自动化测试，但一开始就碰壁了。

当我尝试从该网站运行非常简单的示例时，标题中出现错误：[https ://gist.github.com/1126917](https://gist.github.com/1126917)

这是代码：

```
from selenium import webdriver
from selenium.webdriver.common.keys import Keys

driver = webdriver.Firefox()
driver.get("http://www.python.org")
assert "Python" in driver.title
elem = driver.find_element_by_name("q")
elem.send_keys("selenium")
elem.send_keys(Keys.RETURN)
assert "Google" in driver.title
driver.close() 
```

我试过调试，但我没有任何运气。我什至无法分辨哪条数据输入错误。请记住，我只是将其中的大部分安装到了我的环境中，所以我并没有乱七八糟。

相关资料：

*   Python 3.2.3
*   硒 2

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T21:21:16.337

[如文档中所述](http://code.google.com/p/selenium/wiki/PythonBindings)，Python 的 Selenium 绑定仅与 Python 2.6 和 2.7 兼容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T21:30:10.347

在线示例在 Python 2 中，其中`str`和`bytes`本质上是相同的。

看看[这个](http://blog.ludovf.net/python-str-unicode/)或更好的[这个](http://nedbatchelder.com/text/unipain.html)来解释。

简而言之，在 Python 3 中，您需要在`str`（Unicode 字符串）和`bytes`（编码字符串）之间进行显式转换。这是 Python 2.x 和 3.x 之间的主要区别之一。

考虑到[蒂姆的回答](https://stackoverflow.com/a/10745462/1258041)，错误很可能发生在`selenium`模块内部的某个地方，因此您可能应该安装 Python 2.7 以使用 Selenium。

# java - 解析 Simulink 模型

> ID：10745376
> 
> 赞同：4
> 
> 时间：2012-05-24T21:13:53.343
> 
> 标签：java, parsing, simulink

我们正在寻找一个库来解析 Simulink 模型。我们找到了一个 python 库，但没有 Java 解决方案。有没有可以解析 Simulink 2012a 模型的开源库？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T21:18:04.533

试试 ConQAT（持续质量评估工具包）[ConQAT Simulink 库](http://conqat.in.tum.de/index.php/Simulink_Library)。

# .htaccess - 如何将子域中的一个文件重定向到新 URL？

> ID：10745387
> 
> 赞同：2
> 
> 时间：2012-05-24T21:14:48.983
> 
> 标签：.htaccess, mod-rewrite, redirect

我一直在使用`.htaccess`将旧网站上的 URL 重定向到包含旧站点文件的子域。例如，我的`.htaccess`文件充满了如下规则：

```
RewriteRule ^some-file.html$ http://subdomain.domain.com/some-file.html [NC,R=301,L] 
```

但是，子目录中有一个文件我想指向不同的 URL。如何为一个文件反转这个，并让`http://subdomain.domain.com`301 重定向到`http://www.domain.com/some/directory/`？

**编辑：**这是我目前在我的`.htaccess`

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} ^old\.domain\.com$ [NC]
RewriteRule ^(somefile.html)/?$ http://www.domain.com/some/directory/ [L,R=302,NC]

RewriteCond %{HTTP_HOST} ^old\.domain\.com$ [NC]
RewriteRule ^(some-file.html)/?$ http://www.domain.com/some/directory/ [L,R=302,NC] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T21:29:40.730

将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下`subdomain.domain.com`：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} ^subdomain\.domain\.com$ [NC]
RewriteRule ^(some-file|somefile)\.html$ http://www.domain.com/some/directory/ [L,R=302,NC] 
```

一旦您确认该规则工作正常，只需更改`R=302`为`R=301`.

这将重定向`some-file.html`或``somefile.html`重定向到`www.domain.com/some/directory/`

# ios - 当它们没有出现在 JSON 中时，Restkit 删除 Coredata 中的对象

> ID：10745388
> 
> 赞同：2
> 
> 时间：2012-05-24T21:14:49.093
> 
> 标签：ios, core-data, restkit

我遇到了一个问题……这有点令人沮丧。但这是由于我自己（缺乏）作为程序员的技能:)。

基本上，我有一个在线 Rails 服务，可以将博客文章发送到我的应用程序（使用休息套件和核心数据制作）。Restkit 然后将它们映射到一个 tableview 上。一旦 restkit 做到这一点，当向服务器发出“最后一次成功”请求时，我会在我的应用程序中创建一个时间戳。完美运行。

下次我更新时，它会将该时间戳发送到 rails 应用程序，然后该应用程序才会发回从那时起添加的对象（以 JSON 格式）（即增量更新）。

现在解决这个问题，由于某种原因，当 restkit 收到此消息时，它会从核心数据中的先前更新中删除所有对象，并且只显示它在 JSON 中接收到的“增量”/新对象。所以我认为restkit认为由于旧对象不是新JSON的一部分，所以它们必须是孤立的并继续删除它们。

我怎样才能阻止这种情况发生？我的问题是我不想每次有更新请求时都传输我的整个在线数据库（我认为带宽浪费和有点不雅）。有没有办法保持 coredata 数据库完好无损，只能“添加”到它？

我看过一些帖子提出了同样的问题，但没有一个回答这个问题（我想，但我有时会很愚蠢）！

请帮忙

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T11:34:44.183

弄清楚了;

查看 RkManagedObjectLoader.m 文件并查找方法 deleteCachedObjectsMissingFromResult

禁用此方法以防止删除核心数据中的任何内容。

希望这可以帮助

# c# - FaultException `1 未处理：证书无效？

> ID：10745393
> 
> 赞同：0
> 
> 时间：2012-05-24T21:15:18.600
> 
> 标签：c#, wcf, certificate

构建客户端应用程序以使用受证书保护的 WCF。Cert 已安装并可通过 IE 访问 WSDL，但应用程序在遇到 CaseExists 时会抛出“FaultException `1 was unhanded: Invalid Certificate”。有任何想法吗？如果证书无效，在 IE 中点击 WSDL 时会不会出错？

```
using System;
using System.Configuration;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.ServiceModel;
using System.ServiceModel.Security;
using System.Security.Cryptography.X509Certificates;
using System.ServiceModel.Description;
using ConsoleApplication1.ServiceReference1;
using System.Diagnostics;
using System.ServiceModel.Channels;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            // binding
            BasicHttpBinding b = new BasicHttpBinding();
            b.Security.Mode = BasicHttpSecurityMode.Transport;
            b.Security.Transport.ClientCredentialType = HttpClientCredentialType.Certificate;

            // endpoint
            EndpointAddress ea = new EndpointAddress(
                "https://cut out endpoint.svc");

            // fire it up 
            EBondingClient client = new EBondingClient(b, ea);

            // toss in cert              
            client.ClientCredentials.Peer.PeerAuthentication.CertificateValidationMode =
                System.ServiceModel.Security.X509CertificateValidationMode.None;

            client.ClientCredentials.ClientCertificate.SetCertificate(
                StoreLocation.CurrentUser,
                StoreName.My,
                X509FindType.FindBySubjectName,
                "cut.out.cert.name");

            // call
            Console.WriteLine(client.CaseExists("hello world"));
            client.Close();
            Console.ReadLine();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T01:42:48.073

你得到一个类型错误异常（这就是`FaultException``1`意思）。据我所知，这些只能由服务器代码显式抛出。如果服务主机检测到证书问题，它应该抛出一个`MessageException`.

我会检查实际的代码，`CaseExists`看看它是否会抛出和`FaultException<>`分类并从那里开始。此外，尝试捕获`FaultException`并查看属性是什么类型的对象`Detail`，因为它通常包含有关故障的更多信息。（具体来说，每个单独`FaultException<T>`的具体类型都有一个`public T Detail`属性。）

另外，我*认为*这不相关，但是您确定需要指定客户端证书吗？这与保护服务（和 WSDL）的服务器端证书是分开的。服务器要求客户端提供证书是不寻常的（尽管并非闻所未闻），因此我会确认您正在做正确的事情。

# node.js - 路由如何与 Node.js 模块一起使用？

> ID：10745395
> 
> 赞同：0
> 
> 时间：2012-05-24T21:15:21.813
> 
> 标签：node.js, routes, socket.io, npm

我想看看使用 node.js 的模块添加了哪些路由。例如使用 Socket.io，我需要 /socket.io/socket.io.js，但在我的公共目录或 socket.io 目录中看不到这个：

![在此处输入图像描述](../Images/8adfedd6d0f7fee9a2f12ce4a7830af3.png)

```
 <script src="/socket.io/socket.io.js"></script>
    <script>
      var socket = io.connect('http://localhost');
      socket.on('news', function (data) {
        console.log(data);
        socket.emit('my other event', { my: 'data' });
      });
    </script> 
```

当我检查 url 时，资源会加载一个文件：

![在此处输入图像描述](../Images/35a8ec0f9995d2f8807852162f602e85.png)

```
http://localhost:3111/socket.io/socket.io.js 
```

如何使用相当于“rake routes”的rails？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T21:23:21.977

您的浏览器请求的 URL 不必映射到文件系统上的物理文件。例如，Socket.IO 通过[文件将脚本添加到服务器的路由](https://github.com/LearnBoost/socket.io/blob/master/lib/static.js)[中`lib/static.js`](https://github.com/LearnBoost/socket.io/blob/master/lib/static.js)；查看代码，您将看到 JavaScript、SWF 资源等的路由。

# c++ - gdb python pretty printers 用于打印向量的单个元素的语法

> ID：10745397
> 
> 赞同：2
> 
> 时间：2012-05-24T21:15:36.753
> 
> 标签：c++, stl, gdb, pretty-print

有没有办法像旧的漂亮打印机宏一样直接打印向量的元素。我有包含 100,000 个条目的向量，当我知道我希望的元素的索引时，我不想翻阅所有输出

以前的老路是这样的

```
pv Vector 10500 
```

将打印元素 10500。

我已经尝试`revision 187855`了 SVN 的最新版本，但没有任何乐趣。

除了使用由 Dan Marinescu 编写的宏之外 - 有没有办法用 python 来做到这一点（不写我自己的）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T07:12:31.807

如果 operator[] 被编译，你应该能够：

```
p Vector[10500] 
```

否则我不确定。

# javascript - 使用 Nettuts 资源进行 CSS 导航；如果父元素有子元素，底部阴影消失

> ID：10745400
> 
> 赞同：0
> 
> 时间：2012-05-24T21:15:46.887
> 
> 标签：javascript, css, html

我正在尝试根据自己的需要调整在 Nettuts 上找到的解决方案。总的来说，它工作得很好，除了当我将鼠标悬停在具有子导航的顶级导航元素上时遇到一些奇怪的行为 - 该特定元素下方的阴影消失并且不会回来。Nettuts 资源可以在[这里](http://net.tutsplus.com/tutorials/html-css-techniques/how-to-create-a-drop-down-nav-menu-with-html5-css3-and-jquery/)找到。

这是 HTML 的一个片段：

```
<div class='navbar'>
      <div class='content'>
        <nav id='topNav'>
          <ul>
            <li>
              <a class='nav home' href='/' title='Home'>Home</a>
            </li>
            <li class='parent'>
              <a class='nav about' href='/about' title='About'>About</a>
              <ul>
                <li>
                  <a href='/about' title='History'>History</a>
                </li>
                <li>
                  <a href='/leadership' title='Leadership'>Leadership</a>
                </li>
                <li>
                  <a href='/directors' title='Directors'>Directors</a>
                </li>
                <li>
                  <a href='/science_advisory_board' title='Scientific Advisory Board'>Scientific Advisory Board</a>
                </li>
                <li>
                  <a href='/mission_statement' title='Acetylon Mission'>Acetylon Mission</a>
                </li>
                <li class='last'>
                  <a href='/careers' title='Careers'>Careers</a>
                </li>
              </ul>
            </li>
          </ul>
        </nav>
      </div>
    </div> 
```

这是CSS：

```
 .no-js nav li:hover ul { display: block; }

div.container { width: 100%; }
div.navbar { background: url("/images/navbar_bg.jpg") repeat-x scroll center top transparent; border: medium none; box-shadow: 0 3px 3px #555555; height: 44px; width: 100%; }

nav { font: 1.4em 'myriad-pro', sans-serif; margin: 0 auto; position: relative; width: 978px; z-index: 1; height: 0; }
nav ul { padding: 0; margin: 0; }
nav li { position: relative; display: inline-block; list-style-type: none; margin-bottom: 0; }
nav li br { display: block; line-height: .4em; }
nav li:first-child a { border-left: none; }
nav li.last a { border-right: none; }
nav li a { display: inline-block; color: #fff; text-decoration: none; font-family: 'myriad-pro', sans-serif; font-weight: 600; font-size: 15px; color: #fff; text-decoration: none; width: 130px; vertical-align: bottom; padding: 0 16px 0 22px; }
nav li a:focus { outline: none; text-decoration: underline; }
nav li a.nav { word-wrap: break-word; line-height: 3.1em; height: 3.1em; }
nav li a.center { line-height: 1em; height: 3.1em; }
nav li a.nav:hover, nav li a.center:hover { background: url("/images/navbar_hover_bg.jpg") top center repeat-x; border: none; }
nav li a.center:hover { background: url("/images/navbar_hover_bg.jpg") top center repeat-x; border: none; }
nav li a.home { width: 64px; text-align: center; }
nav li a.about { width: 121px; }
nav ul:after { content: "."; display: block; height: 0; clear: both; visibility: hidden; }
nav a span { display: block; float: right; margin-left: 5px; }
nav ul ul { display: none; width: auto; position: absolute; left: 0; background: #E6F1F8; width: 180px; padding-bottom: 10px; }
nav ul ul li { float: none; display: block; }
nav ul ul a { margin-top: 11px; padding: 0 10px; border-left: none; border-right: none; font-size: .8em; color: #606062; line-height: 1em; }
nav ul ul a:hover { color: #004d9d; } 
```

和 JS

```
 $(document).ready(function() {
var nav = $("#topNav");
//add indicator and hovers to submenu parents
nav.find("li").each(function() {

  if ($(this).find("ul").length > 0) {
    $("<span>").appendTo($(this).children(":first"));
    $("<li><hr style='width: 90%; color: #606062;' /></li>").appendTo($(this).find('li:not(:last-child)'));

    //show subnav on hover
    $(this).hover(
      function() {
        $(this).find("ul").stop(true, true).slideDown();
        $($(this).closest('.parent').children()[0]).css('background', 'url("/images/navbar_hover_bg.jpg") top center repeat-x');
      },
      function() {
        $(this).find("ul").stop(true, true).slideUp();
        $($(this).closest('.parent').children()[0]).css('background', 'url("/images/navbar_bg.jpg") top center repeat-x');
      }
    );
  }
}); 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T04:59:38.383

结果证明代码大部分都很好。虽然我确实把它清理了很多，让它变得更短了。真正的问题是使用的悬停图像在高度方面与原始图像不匹配，因此导致了奇怪的行为。经验教训：提防邪恶的图像。

# ruby-on-rails - 如何在 Rails 中的同一模型之间创建深层关系？

> ID：10745401
> 
> 赞同：0
> 
> 时间：2012-05-24T21:15:47.587
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

基于本教程

**自指关联**

[http://railscasts.com/episodes/163-self-referential-association](http://railscasts.com/episodes/163-self-referential-association)

我们可以看到我们添加的朋友，还可以使用以下代码转到用户的个人资料并查看他的朋友：

```
 <% for friendship in @user.friendships %>
     <%= friendship.friend.username %>
  <% end %>

  <% for user in @user.inverse_friends %>
    <li><%= user.username %></li>
  <% end %> 
```

但是我怎样才能更深入地看到一个朋友的朋友，我的意思是如果你去一个用户的个人资料，你可以通过 friensips 看到他的朋友，这是 1 级，我怎么能看到他朋友的朋友同一页，有可能吗？

我给出的这个是 railscasts 的例子，因为我的应用程序工作相同，我需要更深入，因为我需要制作 jqueryChart 并且我需要更多分支，为了拥有更多分支，我需要获取用户朋友之间的关系和他朋友的朋友（伙计，这很难）。非常感谢你。

```
 User
level 1         user.friend 1            user.friend 2                user.friend 3
level 2    friend 4 of user.friend 1     friend 1 of user.friend 2
level 3    friend 5 of friend 4 
```

所以这可能会让它更清楚，我怎样才能至少在同一个用户页面上达到第 2 级？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T23:58:18.193

首先，您可以将其添加到您的用户模型中，以便更容易获得所有朋友

```
has_many :friends, :through => friendships 
```

所以你现在可以做

```
<% for friend in @user.friends %>
  <%=friend.username %>
<% end %> 
```

代替

```
<% for friendship in @user.friendships %>
  <%= friendship.friend.username %>
<% end %> 
```

并使用每种方法

```
<% @user.friends.each do |friend| %>
  <%=friend.username %>
<% end %> 
```

所以，我认为这解决了你的问题，但它不是一个很好的生产解决方案。

```
<% @user.friends.each do |friend| %>
  <%=friend.username %>
  <%= friend.friends.each do |fof| %>
    <ul>
      <li><%= fof.username %></li>
    </ul>
  <% end %>
<% end %> 
```

那么，为什么这有效？因为friends其实也是来自User模型，和@user有同样的方法，所以每个朋友身上也有friends方法。你可以做所有你不想要的嵌套。在那个截屏视频中，他使用 user.friendships 而不是 user.friends 只是因为他需要friendship_id 来创建link_to 来删除友谊。因此，如果您只想显示用户名，可以直接使用 user.friends。

为什么这可能是一个不好的做法？因为您为每个朋友创建了一个新的数据库查询，所以您必须得到他们的朋友。但也许它实际上并没有那么糟糕，如果有一些缓存，这些查询实际上应该比连接更好，因为连接查询对于当前用户来说是唯一的，并且它的缓存将只从他那里使用，如果每个用户都有一个单独的查询，那么这些缓存的查询将被使用更多次，因为所有朋友都会看到其他朋友的朋友。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T21:35:21.310

这实际上是一个相当深的问题，要正确地做到这一点需要付出一些努力。查看：

[图形边缘导轨](https://stackoverflow.com/questions/836800/graph-edges-rails)

# google-app-engine - 有谁知道为什么 C2DMConfigLoader (c2dm-server.jar) 被巧妙地改变了？

> ID：10745406
> 
> 赞同：0
> 
> 时间：2012-05-24T21:16:02.893
> 
> 标签：google-app-engine, android-c2dm

在 eclipse c2dm 连接项目中，会为您生成 c2dm-server.jar 并将其添加到您的项目中。如果您深入了解它的源代码，您会发现它与原始 chrometophone 项目的源代码几乎相同：

[http://code.google.com/p/chrometophone/source/browse/trunk/appengine/c2dm/com/google/android/c2dm/server/C2DMConfigLoader.java?r=2](http://code.google.com/p/chrometophone/source/browse/trunk/appengine/c2dm/com/google/android/c2dm/server/C2DMConfigLoader.java?r=2)

但是有一个很大的不同： InputStream 行从：

```
InputStream is = this.getClass().getClassLoader()
                                .getResourceAsStream("/dataMessagingToken.txt"); 
```

到

```
InputStream is = servletContext.getResourceAsStream("/dataMessagingToken.txt"); 
```

最大的不同是您现在需要一个 ServletContext 而不仅仅是任何类来从战争中获取该 dataMessagingToken.txt 资源。我问的唯一原因是因为我正在尝试恢复旧样式行，因此不需要 ServletContext 来获取该资源，但无论出于何种原因，该行不再有效，并且永远找不到文件。（要清楚，我已经尝试将该文件放在战争的基础目录中，因为默认项目有它，并且也像其他人建议的那样放在 /WEB-INF/classes 目录中）

最后一件事，对于那些想知道我为什么要这样做而不只是传递 ServletContext 的人。这是因为我想从任务队列发送，而不是从任何用户交互。所以我可能会以错误的方式处理这一切，但我觉得我很接近。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T18:24:31.043

你可以解决这个问题，或者*我认为*你会发现任务队列中的任务是作为 servlet 执行的，并且还会有一个 ServletContext。

此外，如果没有通过您的电话传递，您应该可以通过以下方式在任何地方获取它：

getThreadLocalRequest().getSession().getServletContext()

# c++ - Windows 和 linux 的 C++ Qt 标头是否相同？

> ID：10745419
> 
> 赞同：2
> 
> 时间：2012-05-24T21:16:47.200
> 
> 标签：c++, qt, header-files, cross-compiling

我已经在我的 ubuntu 机器上用 mingw 建立了一个交叉编译环境，我正在尝试用 Qt 建立它。

我已经阅读了几篇关于设置它的博客文章和其他参考页面，但它们似乎都没有解释从哪里获取 Qt 标头。在少数这样做的人中，他们似乎都说下载 Windows 的 Qt creator 的安装程序，在 wine 中运行它，浏览到头文件所在的位置并将它们复制出来。

这些文件与我已经安装的文件不同吗？（我从 apt-get 安装了 Qt 包）如果我已经有了我需要的文件，我看不到半个演出下载和解包时间的意义。

提前欢呼:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T07:19:05.500

> Windows 和 linux 的 C++ Qt 标头是否相同？

他们是不同的。在 windows 平台上从源代码编译期间，qt 至少生成一个特定于平台的文件，该文件不存在于原始源代码分发存档中。

其中一个文件是 qconfig.h (src/corelib/global/qconfig.h)，它间接包含在 QtGlobal 中，并包含某些特定于平台的定义，例如：

```
#define Q_BYTE_ORDER Q_LITTLE_ENDIAN

// Compile time features
#define QT_ARCH_WINDOWS 
```

在 linux 上，该文件将具有非常不同的内容。

该文件在源代码分发中不存在，是在编译过程中生成的。在 linux 系统上，这个文件会有不同的内容。所以不，你不能只使用 linux 头文件。您*也许*可以手动调整标头，但简单地抓取现有的安装包会更容易。而且，显然，您需要库（*.dll/* .lib（或 *.a））与 Qt 链接，而 linux 库不适合这样做。

> 看不到半场演出下载的重点

而不是下载 sdk 下载[库](http://qt.nokia.com/downloads)（见页面底部）。每个包为 200..300 MB，不到“半个演出”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T21:28:26.823

头`.h`文件和文件定义了一个标准接口，您可以通过该接口在该平台上与 Qt 进行交互。平台特定的实现会因平台而有所不同。所以头文件是相同的，但库本身会不同，这意味着您需要在 Windows 系统上安装 Windows 版本的 Qt，但相同的代码应该在其中任何一个上编译。

在 Ubuntu 中，您需要`libqt4-dev`.

# sql-server - 避免串联列表中的重复项

> ID：10745422
> 
> 赞同：1
> 
> 时间：2012-05-24T21:17:13.087
> 
> 标签：sql-server, sql-server-2005

我有一个场景，我想要 csv 列表中两个表中的发票号码。我可以使用 Stuff 完成此操作，如下所示：

```
SELECT
   sopnumbe
  ,custname 
  ,Invoices = 
        STUFF((SELECT DISTINCT ', '+ RTRIM(a.sopnumbe)+', '+ RTRIM(B.sopnumbe)
               FROM 
                  SOP10100  a
                  fULL OUTER JOIN 
                  SOP30200 B
                  ON a.ORIGNUMB =B.ORIGNUMB
               WHERE a.ORIGNUMB =@ordernumb
               FOR XML PATH('')) , 1 , 1 , '' )
FROM SOP10100
WHERE
    SOPNUMBE = @ordernumb 
```

上述查询产生正确的结果，但列表中的重复发票编号除外。有没有其他方法可以做到这一点？

* * *

```
if the result of simple outer join query is:

INV1527157              INV1523836        
INV1527157              INV1526475 
```

* * *

* * *

东西查询的结果：

```
K08081383206      BACHELOR CONTROLS INC    INV1527157, INV1523836, INV1527157, INV1526475 
```

* * *

INV1527157 被重复，我想摆脱重复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T21:23:42.137

您可能想从and`UNION`一起尝试结果，而不是完全外连接：`A``B`

```
SELECT ', '+ RTRIM(sopnumbe)
FROM (SELECT sopnumbe FROM SOP10100 a WHERE a.ORIGNUMB = @ordernumb
      UNION
      SELECT sopnumbe FROM SOP30200 b WHERE b.ORIGNUMB = @ordernumb
) RESULT 
```

这将只返回来自两个子查询的不同结果。

# ios - NSManagedObjectContext 保存但不持久

> ID：10745431
> 
> 赞同：0
> 
> 时间：2012-05-24T21:18:03.620
> 
> 标签：ios, xcode, core-data, nsmanagedobject, nsmanagedobjectcontext

在一个玩具 iOS 项目中，我使用 MagicalRecord 在应用程序委托中设置 CoreData 堆栈。使用以下代码：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
  [MagicalRecord setupCoreDataStackWithStoreNamed:@"ToyProject.sqlite"];
  [[NSManagedObjectContext MR_defaultContext] setUndoManager:[[NSUndoManager alloc] init]];

...
} 
```

我有一个正在编写的 NSManagedObject 的子类（NSRailsManagedObject——我分叉了 NSRails 并添加了 CoreData 支持），并且我给了它一个 saveContext 方法：

```
- (void)saveContext {
  dispatch_async(dispatch_get_main_queue(), ^{
    @try {
        NSError *error = nil;
        if (![self.managedObjectContext save:&error]) {
          NSLog(@"Failed to save core data: %@", [error localizedDescription]);
        } else {
          NSLog(@"\"Successfully\" saved your data.");
        }
    }
    @catch (NSException *exception) {
      NSLog(@"Couldn't save your data! Try again later :(");
    }
    @finally {
      NSLog(@"Look, I don't know what else to tell you, mang.");
    }
  });
} 
```

当我尝试使用此方法保存此类的子类时，我没有收到任何错误，并且保存表面上是成功的。但是，在应用程序的下一次运行中，前一次运行中存在的任何数据都不存在。如果 saveContext 方法包含以下代码，则它可以正常工作：

```
- (void)saveContext {
  [[NSManagedObjectContext MR_defaultContext] MR_save];
} 
```

此外，如果我将两者混合，保存不会持久化数据。

```
- (void)saveContext {
  dispatch_async(dispatch_get_main_queue(), ^{
    @try {
        NSError *error = nil;
        if (![[NSManagedObjectContext MR_defaultContext] save:&error]) {
          NSLog(@"Failed to save core data: %@", [error localizedDescription]);
        } else {
          NSLog(@"\"Successfully\" saved your data.");
        }
    }
    @catch (NSException *exception) {
      NSLog(@"Couldn't save your data! Try again later :(");
    }
    @finally {
      NSLog(@"Look, I don't know what else to tell you, mang.");
    }
  });
} 
```

我真的不知道还能尝试什么。谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T22:01:33.430

好吧，我从未使用过 MagicalRecord，但我怀疑您的问题与它有关。不幸的是，您没有提供正确的信息。

具体来说，您的托管对象上下文是什么？即 self.managedObjectContext 返回什么，以及该上下文是如何创建的？

它与默认的 MR 上下文有什么关系？我认为 MR 做了一些线程特定的上下文映射，所以如果你要使用 MR，你应该坚持使用 MR。

基本上，如果它是相同的上下文，你应该可以，但如果它不是相同的，你将不得不与其他人协调更改。另外，请注意，如果您将其创建为子级，则子级上下文的保存只会将更改推送到父级，而不会保存它们。

另外，请确保您的 MOC 不是 nil ... nil MOC 将什么也不做，发送 save: 消息（或任何与此相关的消息）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T19:34:57.040

MagicalRecord 创建其 defaultContext 嵌套在另一个（主要是私有的）上下文中，称为 rootSavingContext。结果是在嵌套（子）上下文中调用 Core Data 的标准 -save 方法*不会*写入磁盘，而只会将其更改传播回父 rootSavingContext。

基本上，我认为你有两个选择：

1.  调用 MR_save 让 MagicalRecord 处理；IE：

    ```
    [[NSManagedObjectContext MR_defaultContext] MR_save]; 
    ```

2.  在 defaultContext 上调用 NSManagedObjectContext save，然后在父上下文上调用 save 来跟进：

    ```
    [[NSManagedObjectContext MR_defaultContext] save];
    [[NSManagedObjectContext MR_rootSavingContext] save]; 
    ```

# javascript - 将 ember-resource 与 couchdb 一起使用 - 我如何保存我的文档？

> ID：10745433
> 
> 赞同：4
> 
> 时间：2012-05-24T21:18:11.367
> 
> 标签：javascript, couchdb, ember.js

我正在使用 ember.js 和 couchdb 实现一个应用程序。我选择 ember-resource 作为数据库访问层，因为它很好地支持嵌套的 JSON 文档。

由于 couchdb 使用属性 _rev 在每个文档中进行乐观锁定，因此在将数据保存到 couchdb 后，必须在我的应用程序中更新此属性。

我实现这一点的想法是在保存到数据库后立即重新加载数据，并将新的 _rev 与文档的其余部分一起返回。

这是我的代码：

```
// Since we use CouchDB, we have to make sure that we invalidate and re-fetch
// every document right after saving it. CouchDB uses an optimistic locking
// scheme based on the attribute "_rev" in the documents, so we reload it in
// order to have the correct _rev value.
didSave:     function() {
    this._super.apply(this, arguments);
    this.forceReload();
},

// reload resource after save is done, expire to make reload really do something
forceReload: function() {
    this.expire();  // Everything OK up to this location
    Ember.run.next(this, function() {
        this.fetch()  // Sub-Document is reset here, and *not* refetched!
            .fail(function(error) {
                App.displayError(error);
            })
            .done(function() {
                App.log("App.Resource.forceReload fetch done, got revision " + self.get('_rev'));
            });
    });
} 
```

这适用于大多数情况，但如果我有一个嵌套模型，则在执行获取之前，子模型将替换为旧版本的数据！

有趣的是，正确的（更新的）数据存储在数据库中，而错误的（旧的）数据在获取后存储在内存模型中，尽管 _rev 属性是正确的（以及主对象的所有属性）。

这是我的对象定义的一部分：

```
App.TaskDefinition = App.Resource.define({

url: App.dbPrefix + 'courseware',

schema: {
    id:          String,
    _rev:        String,
    type:        String,
    name:       String,
    comment:    String,
    task:        {
        type:   'App.Task',
        nested: true
    }
}
});

App.Task = App.Resource.define({

schema: {
    id: String,
    title:       String,
    description: String,

    startImmediate: Boolean,
    holdOnComment: Boolean,
    ..... // other attributes and sub-objects
}
}); 
```

问题可能出在哪里？

非常感谢您的任何建议！

亲切的问候，托马斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T21:13:51.727

我找到了一个更好的解决方案，可以从数据库中取回新修订版，而无需在每次保存后重新加载数据。

如果使用更新选项`save`调用`ember-resource`，则来自 db 的响应将合并到资源对象中。couchdb 对保存请求的回答类似于

```
{"ok":true,"id":"mydocument-123","rev":"10-5f3cb46df301143a966251148f88663d"} 
```

所以我只是将`_rev`我的对象的属性设置`rev`为数据库中的值。

我的应用程序特定资源类作为所有 couchdb 对象的超类如下：

```
App.Resource = Ember.Resource.extend({

    save: function(options) {
        options = options || {};
        options.update = true; // sets id and rev after saving in ember-resource; rev is copied to _rev in didSave callback!
        this.set('rev', undefined);
        return this._super(options);
    },

    // we get the new revision in the "rev" attribute of the response from the save-request.
    // since we set options.update to true, we get this value in the attribute "rev", which we simply copy to "_rev"
    didSave:     function() {
        this._super.apply(this, arguments);
        this.set('_rev', this.get('rev'));
    }

    .... // other properties and functions
}); 
```

资源定义如下：

```
App.TaskExecution = App.Resource.define({

    ....

    schema: {

        id:   String,
        _rev: String,
        rev:  String,
        type: String,
        .....  // other attributes
    }

}); 
```

到目前为止工作得很好......

# android - android：从MultiAutoComplete Textview 中获取所选项目并修改和更新EditView？

> ID：10745435
> 
> 赞同：1
> 
> 时间：2012-05-24T21:18:13.923
> 
> 标签：android, android-edittext, autocompletetextview, simpleadapter

1.我创建了一个MultiAutoCompleteTextview。（我使用SimpleAdapter来显示列表）

2.我试过搜索一个字符串。

3.如果我单击列表中的一个项目，它会在 EditText 中显示它的内容。

我的问题是有没有一种可能的方法来将该文本保存在一个字符串中并操作该字符串并在 MultiAutoCompleteTextVew 的 EditText 中显示更新的字符串。例如，如果列表显示姓名列表，并且如果我选择了一个名字说“Mr.X”（默认情况下它将在 EditText 中显示文本“Mr.X”），但我希望它显示“Mr.X”。 X - 男性，”在 EditText 中。

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T22:06:00.250

> For example if the list show the list of name's and if i selected a name say "Mr.X" (by default it will display the text "Mr.X," in the EditText), but i want it to display "Mr.X - Male," in the EditText.

(Honestly, this is the only part of your question that I understood. So I'll base my answer off of this example.)

Simply override a click listener to add the data that you want, like this:

```
mAutoComplete.setOnItemClickListener(new OnItemClickListener() {
    public void onItemClick(AdapterView<?> parent, View view, int index, long position) {
        // Query your data to determine if the person is male or female and store it in gender;
        String text = mAutoComplete.getText().toString();
        gender = determineGender(text); // returns a string either "Male" or "Female"
        mAutoComplete.setText(text + " - " + gender);
    }
}); 
```

# .net - 有没有像“Allmyapps”这样的应用程序供开发人员使用？

> ID：10745438
> 
> 赞同：1
> 
> 时间：2012-05-24T21:18:24.700
> 
> 标签：.net, silverlight

Allmyaps 适用于很多程序。我想找到类似的东西，可以为 Visual Studio、silverlight 等安装服务包。

设置新的开发机器是一件令人头疼的事情。

有什么建议么？

# c++ - C++ 中的类型转换问题

> ID：10745441
> 
> 赞同：-2
> 
> 时间：2012-05-24T21:18:34.730
> 
> 标签：c++, casting

我在从基类到派生的类型转换方面遇到问题（我正在转换，因为我确定该对象是那个确切的类型）。这是我的代码（简化）：

```
class MyCollection 
{
public:
 Element* Get(int i) {
  return elements[i]; 
 }
 void Add(Element* element) {
   //finding i
   elements[i] = element;
 }
private:
 Element* elements[100]; 
}

class Element {
 public:
  int ID; 
}

class SpecialElement : public Element 
{
public:
 SpecialElement(char* name) { 
   this-> Name = name; 
 }
 char* GetName() { return Name; }
private:
 char* Name; 
} 
```

现在，当我添加到 SpecialElement 的 MyCollection 对象时，当我在添加时放置断点并在即时窗口中转换 Add 方法的参数并调用 GetName 方法时，它会返回我的对象​​名称，但是当我执行以下操作时：

```
void main() {
 MyCollection coll = new MyCollection();
 coll.Add(new SpecialElement("MyName"));
 SpecialElement* foundElement = (SpecialElement*)coll->Get(0); 
 foundElement->GetName(); //Error
} 
```

我想知道这是为什么？不是 SpecialElement 类型的已创建对象吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T21:22:33.863

```
 Element* Get(int i) {
  return elements[i]; 
 }
 void Add(Element* element) {
   //finding i
   elements[i] = element;
 } 
```

这甚至如何编译？您将 an 分配`Element*`给 an `Element`，反之亦然，但它们是完全不同的东西。你的整个逻辑都是荒谬的。

您过度使用动态分配，假设引用语义和错误的`char*`字符串。获取 C++ 书籍。

此外，这个类已经存在 - 它是`std::array<Element*, 100>`. 或者`std::vector<Element*>`，如果您想要动态大小。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-24T21:23:01.513

您将其投射到基础上`Element`，从而切片您的`SpecialElement`对象。从您的基础转换回原始类型`Element`已丢失数据`Name`，因为这不是基础的一部分。

AFAIK，你不能做你想做的事。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T21:26:10.837

您应该`Element* elements[100];`适当地使用和更新您的代码，否则使用对象赋值而不是指针赋值会杀死多态性。

# algorithm - 为什么clojure中的并行qsort比common的实现慢？

> ID：10745445
> 
> 赞同：1
> 
> 时间：2012-05-24T21:19:19.860
> 
> 标签：algorithm, clojure, functional-programming

我正在编写一个并行 qsort 算法，但他的工作速度比普通实现慢。我认为问题出在函数“concat”中。如何加快算法速度？

```
(defn qsort-orig [L]
  (if  (empty? L)
    '()
    (let [[pivot & l] L]
      (concat (qsort-orig (for [y l :when (<  y pivot)] y))
              (list pivot)
              (qsort-orig (for [y l :when (>= y pivot)] y))))))

(defn qsort [L]  
(if (empty? L)
  '()
  (let [ [pivot & l] L 
        Left  (for [y l :when (<  y pivot)] y)
        Right (for [y l :when (>= y pivot)] y)]
    (concat (apply concat (pmap qsort 
                            (if (list? Left) 
                              Left 
                              (list Left))))
            (list pivot)
            (apply concat (pmap qsort 
                            (if (list? Right) 
                              Right 
                              (list Right))))))))
# for test
(time (qsort (repeatedly 10000 #(rand-int 10000))))
(time (qsort-orig (repeatedly 10000 #(rand-int 10000)))) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T22:32:00.327

这两者的内存分配时间很可能正在消除它们之间的实时差异。

*   如果你使用`recur`in`qsort-orig`那么它不会很快破坏堆栈并且应该运行得更快，因为它会花费更少的时间分配内存。
*   使用 apply 和 concat allocates 将为左侧和右侧的每个调用创建一个长序列，因为它构建了对 concat 的调用，这将需要为每个调用分配内存
*   pmap 为数组中的每个条目分配一个小结构（未来调用）。

# .net - HttpHandler 的用途是什么，它与 HttpModule 有何不同？

> ID：10745448
> 
> 赞同：1
> 
> 时间：2012-05-24T21:19:42.950
> 
> 标签：.net, httphandler, httpmodule

我试图了解 HttpHandler 是什么以及 HttpModule 是什么，当我知道我必须使用其中一个或另一个时。请你能为我解释一下。

谢谢，

萨钦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T21:24:38.663

处理程序用于响应特定类型的请求（例如，您可以为 .png 文件编写一个以提供动态图像）

模块用于为可能的任何类型的请求操作管道（例如，您可以使用一个`HttpContext`基于请求 IP 将地理数据添加到，这样代码就不需要了。尽管在实践中它们往往比那）

也就是说，随着 Asp.Net MVC 等技术的出现，可以将这两组功能实现为网站代码的一流功能。

现在可以使用 MVC 中的动作过滤器来完成诸如身份验证等横切关注点（通常使用以前的模块实现）。处理动态文件类型可以通过一些巧妙的路由来完成。例如，我已经完成了后者，以使用数据库后端实现 css/js 和图像的动态内容覆盖。

# meteor - 定义 Meteor 应用程序中使用的对象和方法的最安全方法是什么

> ID：10745451
> 
> 赞同：0
> 
> 时间：2012-05-24T21:19:57.933
> 
> 标签：meteor

根据我对服务器的理解，Meteor 应用程序在 node.js 纤维中的单个线程中运行。在客户端，代码在全局窗口中运行。

那么在服务器端和客户端定义 Meteor 应用程序中的对象和方法的最安全和最佳实践是什么？

在哪些情况下传递给方法的变量是安全的并且不会被另一个方法调用覆盖？

1.  静止的？

    var myObj = {};

    myObj.someFunc = function(){...};

2.  作为标准对象定义 var myObj = function () { this.x = function () {...}; };

    var myObj = new MyObject();

3.  作为原型的方法？

    函数 MyObject() { ... }

    MyObject.prototype.someFunc = function() { }

    var myObj = new MyObject();

虽然我相信我了解静态对象、对象和原型，并且在这些方面已经使用控制台和 Meteor 进行了一些实验，但我仍然是一个菜鸟并且非常新手，我不确定并希望获得更多经验和经验丰富的开发人员的建议。

谢谢小号

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T15:53:28.390

不知道你在这里问什么，但示例项目是寻找适合流星开发的代码风格的最佳场所：[http ://www.meteor.com/examples/](http://www.meteor.com/examples/)

您会看到，将客户端 js 分组到“客户端”文件夹中，将服务器端 js 分组到“服务器”文件夹中是框架的运行方式。

客户端方法通常定义为

```
var game = function () {}; 
```

服务器端方法在 Meteor.methods 调用中声明（参见[http://docs.meteor.com/#meteor_methods](http://docs.meteor.com/#meteor_methods)）：

```
Meteor.methods({
  start_new_game: function (evt) {};
}); 
```

希望有帮助。

# php - 检查 youtube 视频 URL 的有效性

> ID：10745452
> 
> 赞同：1
> 
> 时间：2012-05-24T21:19:59.387
> 
> 标签：php, zend-framework, youtube, zend-gdata, invalid-url

我正在开发一个应用程序，它从用户那里输入 youtube 视频链接并将其嵌入到页面中。是否有任何机制可以检查它是否是有效链接。任何检查客户端或服务器端的方法都可以。

**注意**- 我正在使用**zend 框架**

# python - 继承输入类的所有活动变量

> ID：10745454
> 
> 赞同：1
> 
> 时间：2012-05-24T21:20:28.970
> 
> 标签：python, class

想象一下我有一堂课`A`

```
class A(object):
    def __init__(self, x, y)
        self.x = x
        self.y = y 
```

然后我定义了一个由（而不是作为它的基础）和其他参数`B`初始化的类`A``A`

```
class B(object):
    def __init__(self, a):
        if isinstance(a, A):
            self.a = a 
```

问题是，假设`A`定义了大量变量并且应该`B`经常引用，是否有可能`B`知道这些变量`A`，以便`B`我可以做到

```
self.x 
```

而不是

```
self.a.x 
```

?

我知道这种自动继承的变量有点危险，甚至可能是破坏性的，但是输入很多额外`self.a.x`的东西看起来有点笨拙。可以选择暂时或在小段代码中打开此继承应该很有用。

**编辑**

`__dict__`基本上提出了一切，包括`methods`和`functions`，可能只保留数值变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T21:25:19.583

你可以写：

```
class B(object):
    def __getattr__(self, attr):
        if hasattr(self.a, attr):
            return getattr(self.a, attr)
        else:
            return object.__getattribute__(self, attr) 
```

每当您访问 的属性时`B`，它都会检查是否`a`具有该属性。如果是这样，它将返回。如果没有，它会`B`自行查找属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T21:24:18.153

（更新为不包括方法）：

```
class B(object):
    def __init__(self, a, g):
        if isinstance(a, A):
            for k,v in a.__dict__.iteritems():
                if not callable(v):
                    self.__dict__[k] = v 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T21:25:28.320

```
class B(object):
    def __init__(self, a):
        self.__dict__.update(a.__dict__) 
```

Python 中的最佳实践通常不是检查类型，`isinstance()`而是使用“鸭子类型”。我不知道你在做什么的全部细节，所以我不知道你是否有正当理由需要`isinstance()`检查，但我写了上面的代码没有它。

这会将您的实例设置为`B`具有与您的实例相同的成员名称`A`，并且将相同的值引用绑定到这些名称。

# java - TestNG 我无法正确配置我的类路径

> ID：10745457
> 
> 赞同：0
> 
> 时间：2012-05-24T21:20:43.213
> 
> 标签：java, testng, noclassdeffounderror

我正在使用 ant 运行我的 testng 测试。我得到一个 noclassdeffounderror。我相信这是因为我没有正确设置我的类路径，但我似乎无法弄清楚。`

```
<!-- This is the command that will be run when the tests are run from outside the vob and for 
SWIT purposes. The only test that should be run is the SWIT group which is the only test
needed for SWIT in the jar file. -->
<target name="run-swit-tests">
    <tstamp>
        <format property="touch.time" pattern="MM_dd_yyyy_hh_mm_aa" offset="-5" unit="hour" />
    </tstamp>

    <echo>Exluding non-SWIT groups: ${nonswit.groups}</echo>

    <testng outputdir="reports" 
        haltonfailure="false" verbose="2" excludedgroups="${nonswit.groups}">
        <classpath>
               <pathelement path="${TestClasses}"/>
               <pathelement path="${Libs}"/>
        </classpath>
        <jvmarg value="-Dtangosol.coherence.cacheconfig=foo.xml" />
        <jvmarg value="-Dtangosol.coherence.override=bar.xml" />
        <jvmarg value="-Dtangosol.coherence.distributed.localstorage=false" />
        <jvmarg value="-Dtangosol.pof.enabled=true" />
        <jvmarg value="-Dtangosol.coherence.management=all" />
        <jvmarg value="-Dtangosol.coherence.member=${user.name}-${touch.time}" />

        <jvmarg value="-javaagent:lib/org.springframework.instrument-3.0.5.RELEASE.jar" />

        <classfileset dir="." includes="**/Test*.class" excludes="**/Abstract*.class ${excluded.tests}"/>

        <reporter>
            <property name="generateGroupsAttribute" value="true" />
        </reporter>
    </testng>
</target>` 
```

非常感谢任何帮助。这是错误：引起：java.lang.ClassNotFoundException：org.springframework.test.context.testng.AbstractTestNGSpringContextTests

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T15:33:54.403

似乎我所有的罐子都放在 lib 文件夹中，但路径声明在某种程度上是错误的。这是我为解决问题而添加的。 `<path id="testng.classpath"> <fileset dir="${Libs}"> <include name="**/*.jar"/> </fileset> </path>`我从 ant 任务中删除了 Libs 路径元素，并将其替换为对 testng.classpath 的引用，并找到了我的所有类。

# android - Intent.ACTION_CALL 崩溃的应用程序

> ID：10745463
> 
> 赞同：0
> 
> 时间：2012-05-24T21:21:18.567
> 
> 标签：android

我编写了这个简单的应用程序来根据毫秒的处理程序延迟进行调用。但是由于某种原因，当我`public void callme(View view)`通过按钮 onClick 事件操作时，它会使应用程序崩溃。

我相信这很简单，也许有人可以指出我的错误。谢谢

```
 import android.app.Activity;
    import android.content.Intent;
    import android.net.Uri;
    import android.os.Bundle;
    import android.os.Handler;
    import android.view.View;
    import android.widget.EditText;

    public class CallButtonActivity extends Activity {

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);

          }

     public void callme(View view) {

       EditText edit_seconds = (EditText)findViewById(R.id.seconds);
       CharSequence edit_seconds_value = edit_seconds.getText();

        int mSeconds = Integer.parseInt(edit_seconds_value.toString());   

         Handler myHandler = new Handler();
         myHandler.postDelayed(mMyRunnable, mSeconds);

     }

     private Runnable mMyRunnable = new Runnable()
     {
         public void run()
         {

             EditText msisdn = (EditText)findViewById(R.id.msisdn);

             Intent callIntent = new Intent(Intent.ACTION_CALL);
             callIntent.setData(Uri.parse("tel:" + msisdn));
             startActivity(callIntent);
         }
      };

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T21:25:38.980

如果没有看到 android 清单，我不能肯定地说，但请确保您已将正确的权限添加到 AndroidManifest.xml。具体来说，应将此标签添加到应用程序标签上方：

```
<uses-permission android:name="android.permission.CALL_PHONE"></uses-permission> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T21:27:27.653

尝试将此所需权限添加到您的清单

```
<uses-permission android:name="android.permission.CALL_PHONE"></uses-permission> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T21:37:00.203

你正在传递`msisdn`给`uri.parse`. 这是一个编辑文本！toString 方法将被调用，但它不会将电话号码传递给解析器，而是传递 EditText 对象的标识符。

在您使用`ACTION_CALL`时，可能没有进一步的验证，应用程序就会崩溃。这应该有效的想法：

```
EditText msisdn = (EditText)findViewById(R.id.msisdn);

Intent callIntent = new Intent(Intent.ACTION_CALL);
callIntent.setData(Uri.parse("tel:" + msisdn.getText()));
startActivity(callIntent); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-24T22:08:22.630

在这一行...

```
int mSeconds = Integer.parseInt(time.toString()); 
```

应该是`time.getText().toString()`。您还需要使用`getText().toString()`电话号码 - 不仅仅是`getText()`（在 an 上`EditText`）返回 an`Editable`而不是 a `String`。

但是，我不确定`findViewById(...)`与 a 一起使用`Runnable`是否合法，尽管我可能是错的。

# javascript - 这个 JQuery 代码是什么意思，什么时候会被调用？

> ID：10745466
> 
> 赞同：3
> 
> 时间：2012-05-24T21:21:28.653
> 
> 标签：javascript, jquery, html

我是 JQuery 新手，我在网页中看到一段代码：

```
$(function() {
     //do something...
}); 
```

我不明白这里的语法。它定义了一个函数吗？它什么时候会被调用？我可以重复使用它吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T21:22:06.380

那是 jQuerys DOM 就绪处理程序的简短版本。当`DOMReady`事件触发时，函数内的代码将在页面加载时被调用。

它等同于以下内容，它更冗长但更清晰：

```
$(document).ready(function() {
    // code here
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T21:22:59.423

一旦文档对象模型 (DOM) 准备好（页面加载），就会调用该函数。

它是以下的简写：

```
$(document).ready(function() { 
  // Commands here
}); 
```

您可以将页面加载后要加载的所有函数/脚本放入其中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T21:25:23.287

**[它是在 DOM 加载时触发的ready()](http://api.jquery.com/ready/)事件的包装器。**

```
$(document).ready(function() {

}); 
```

*这是 DOM 加载时触发的事件（但不包括图像）。*

**另一种选择是**

```
$(window).load(function() {

}); 
```

*加载所有内容（包括图像）时触发*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-24T21:30:28.777

这是使 jQuery 工作所需的主要内容。该功能将*在文档完全加载（不包括图像）后*发生。里面的任何东西，或者这个（您粘贴的代码是以下内容的简写）：

```
$(document).ready(function() {
  // anything inside this will happen only after the document has fully loaded
}); 
```

如果您只是将代码放在脚本标签中，如下所示：

```
<script type="text/javascript">
  $('div').css('background-color','green'); // sets all <div> CSS background to green
</script> 
```

它只能在这些标签之前的 div 上工作（如果你把它放在`<head>`，那么它根本就不起作用）。如果您将其放入`$(function() { });`或`$(document).ready(function() { });`（无论您喜欢什么，我更喜欢第二个选项），那么它将`div`在完全加载后对 DOM 中存在的所有元素起作用（只是实际的 HTML，而不是在图像加载后）。

是的，您可以在页面上多次使用它。

更多信息：[教程：介绍 $(document).ready()](http://docs.jquery.com/Tutorials%3aIntroducing_%24%28document%29.ready%28%29)

# c - 无法运行 make - 创建的可执行文件

> ID：10745467
> 
> 赞同：2
> 
> 时间：2012-05-24T21:21:44.307
> 
> 标签：c, makefile, valgrind

我编写了一个简单的程序来运行河内塔游戏（hanoi.c）。Makefile 非常简单：

```
CFLAGS=-Wall -g

all: hanoi

clean:
rm -f hanoi 
```

我调用`make`它并生成一个可执行文件`hanoi`，但是当我尝试运行时，`./hanoi`我只得到以下输出：

```
bash: ./hanoi: No such file or directory 
```

当我使用 valgrind 运行时，它说：

```
 valgrind: m_ume.c: can't open interpreter 
```

任何想法为什么会这样？我之前正在运行其他简单的 C 程序，没有遇到这样的麻烦，也不知道任何应该影响 gcc 或 make 的更改......我正在运行 Ubuntu 11.10。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T21:40:59.830

你在`fat/vfat`你的硬盘分区吗？如果你可以在 cwd 中看到 hanoi (executable) 文件，然后检查它是否是可执行文件`ls -all`，应该有`x`. 还要检查 的输出`file hanoi`，它应该类似于

```
hanoi: ELF 32-bit LSB executable, Intel 80386, version 1 (SYSV), dynamically linked (uses shared libs), for GNU/Linux 2.6.15, not stripped 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T20:08:29.893

我自己也遇到了这个。当动态链接的应用程序指向不存在的动态加载程序时，就会出现这两个错误。

如果您的动态加载程序是`/lib64/ld.so.1`（例如），您应该能够将应用程序运行为：

```
/lib64/ld.so.1 ./hanoi 
```

并在 Valgrind 下运行它

```
valgrind /lib64/ld.so.1 ./hanoi 
```

要确定程序期望的动态加载器，您可以使用`readelf -l ./hanoi`. 输出应在中间包含一行，例如：

```
[Requesting program interpreter: /lib/ld.so.1] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T21:25:17.463

如果那是您的整个 makefile，我看不到 make 的规则`hanoi`。你可能对这样的事情感兴趣。

```
hanoi: hanoi.c
    gcc CFLAGS -o $@ $< 
```

# google-places-api - 在地图上显示 Google Places API 结果

> ID：10745468
> 
> 赞同：0
> 
> 时间：2012-05-24T21:21:45.500
> 
> 标签：google-places-api

我需要在谷歌地图上放置一个地址，并根据用户请求在它周围显示设施，我是谷歌地图的新手，我阅读了谷歌地方 API，但它给我的唯一东西是 XML 或 JSON 格式的位置细节，但它不告诉我如何在实际地图上放置位置

任何帮助真的很感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T01:21:52.087

听起来您正在尝试使用 Places API 网络服务，但您为什么不使用[JavaScript Maps API 的 Places 库](https://developers.google.com/maps/documentation/javascript/places)。那里有大量关于如何将它们放在地图上的文档和示例。

# c# - 如何使用游标通过 TweetSharp 检索所有 Twitter 用户？

> ID：10745475
> 
> 赞同：2
> 
> 时间：2012-05-24T21:22:33.707
> 
> 标签：c#, .net, twitter, cursor, tweetsharp

我在 WPF .NET 4.0 C# 应用程序中使用 TweetSharp 并使用经过身份验证的 Twitter 服务对象。**我在遍历关注者列表以检索每个个人资料时遇到问题。**我正在使用以下代码：

```
TwitterCursorList<TwitterUser> followers = twitterService.ListFollowersOf(userID, -1);
while (followers != null)
{
    foreach (TwitterUser follower in followers)
    {
        //Do something with the user profile here
    }
    followers = twitterService.ListFollowersOf(userID, (long)followers.NextCursor);
} 
```

当我将其用于我自己的帐户时，我看到了一种奇怪的行为，截至撰写本文时，该帐户有 1271 个关注者。第一次运行代码时，我得到了一个包含 100 个关注者的列表，在下一次 ListFollowersOf 调用中，关注者为空并且循环结束。

**这是奇怪的部分**：如果我再次运行此代码，无论是在同一个应用程序实例中，还是我停止 Visual Studio 并重新启动，都没有关系，我得到了一个额外的迭代，现在我得到了 200 个关注者。如果我再次使用此技巧，现在我会在获得空值之前获得 300 个关注者，依此类推。我重复了很多次，直到一次调用上述代码返回所有 1271 个关注者。

真正奇怪的是这最终会重置。我认为这与 Twitter API 限制重置时间有关，但我尚未验证。我会看看这是否与 API 重置一致。一旦重置发生，我只会得到 100 个关注者，然后是 200 个，依此类推。

我已经查看了 TweetSharp 单元测试和以下帖子，但它们对我不起作用：

*   [如何获取完整的关注者列表](https://stackoverflow.com/questions/8743551/how-to-get-the-complete-list-of-followers)
*   [为什么 TweetSharp 总是只返回 100 个关注者？](https://stackoverflow.com/questions/10694566/why-does-tweetsharp-always-return-only-100-followers)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T07:02:53.520

我使用这样的东西：

```
public static List<TwitterUser> GetFollowers(this TwitterService svc)
{
    List<TwitterUser> ret = new List<TwitterUser>();

    var followers = svc.ListFollowers(-1);
    ret.AddRange(followers);
    while (followers.NextCursor != null && followers.NextCursor.Value > 0)
    {
        followers = svc.ListFollowers(followers.NextCursor.Value);
        ret.AddRange(followers);
    }
    return ret;
} 
```

接着

```
var f = svc.GetFollowers(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T15:08:06.243

我没有图书馆，但根据例子，你应该有这样的东西：

```
TwitterCursorList<TwitterUser> followers = twitterService.ListFollowersOf(userID, -1);
while (followers.NextCursor != null)
{
    if(followers != null)
    {
        foreach (TwitterUser follower in followers)
        {
            //Do something with the user profile here
        }
    }
    followers = twitterService.ListFollowersOf(userID, (long)followers.NextCursor);
} 
```

同样，我无法运行代码，因为我没有库（也懒得下载它），但试一试，让我知道它是否有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T23:44:55.173

如果您得到任何回报，那是因为您的代码运行良好。

很容易找出问题所在，然后相应地开始解决您的问题。我怀疑您是正确的，并且您受到 Twitter 的限速。

在您的 while 循环之后将此添加到您的代码中：

```
if(followers == null) {
    Console.WriteLine("Error " + twitterService.Response.Error);
} 
```

事实上，任何时候返回某些东西，`null`您都可以检查 Response 对象的 Error 以查看 TweetSharp 认为出了什么问题。[看到这个](https://github.com/danielcrenna/tweetsharp#handling-errors)。

# amazon-web-services - 使用 PHP 设置 Amazon EC2 环境变量

> ID：10745477
> 
> 赞同：0
> 
> 时间：2012-05-24T21:22:33.993
> 
> 标签：amazon-web-services

我在 Amazon EC2 机器上的 ubuntu 用户下安装了 EC2 工具，我的 shell 脚本利用这些工具来更新各种环境中的代码。现在我们将 PHP 放在这些 shell 脚本之上，我正在使用 shell_exec 从 Web 执行这些 shell 脚本，但出现以下错误：

```
home/ubuntu/ec2-tools/bin/ec2-describe-instances: line 9: EC2_HOME: EC2_HOME is not set 
```

我相信这是因为 PHP 将脚本作为 www-data 执行，并且 EC2_HOME 是为 ubuntu 用户定义的。echo $EC2_HOME 在以 Ubuntu 身份登录时从命令行为我提供正确的路径。

任何人都可以帮助我如何使用 PHP 成功执行 shell 脚本。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T16:28:25.993

你为什么不呢：

*   在使用 shell_exec 之前，使用 php 函数 putenv (http://php.net/manual/en/function.putenv.php) 设置环境变量 EC2_HOME。
*   获取 Web 服务器以设置 EC2_HOME 环境变量。（“SetEnv”用于 apache，如果使用 fastcgi 和 nginx，则使用“fastcgi_param EC2_HOME /somelocation”）

# sql - 比较列与列

> ID：10745479
> 
> 赞同：2
> 
> 时间：2012-05-24T21:22:42.147
> 
> 标签：sql, oracle11g

所以我在一个表（statename）中有一个如下所示的列：TBLOTHER（statename）

*   伊达尔戈联邦高速公路 130
*   墨西哥联邦高速公路 130
*   普埃布拉联邦高速公路 130
*   韦拉克鲁斯-拉夫联邦高速公路 130

另一个表中的另一列没有联邦公路号码，只有州名 TBLSTATE(name)

*   伊达尔戈
*   墨西哥
*   普埃布拉
*   韦拉克鲁斯-拉夫

如何将 tblstate(name) 中的列与 tbother(name) 进行比较？我想基于相同的名称将 TBLSTATE 中不同列的值复制到 TBLOTHER ..谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T21:25:06.687

也许是这样的：

```
where tbl2.name like tbl1.name ||'%' 
```

或者你可以做一些花哨的 substr 比较

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T21:45:20.123

有趣的。我会采取不同的方法

```
where substr(tblother.statename, 1, len(tblstate.name)) = tblstate.name 
```

也就是说，将两个字符串比较到实际状态名称的长度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T21:39:13.230

如果里面的数据和`TBLOTHER`这里一样有规律，我的猜测是去掉“Federal Hwy”位然后比较是最安全的，即

```
where tblstate.name = substr( tblother.statename, 
                              1, 
                              instr( tblother.statename, 'Federal Hwy' ) - 1 ) 
```

这比做直道要多一些工作，`LIKE`但如果你可能有像“Puebla”这样的名字并且`Puebla-Foo`其中一个包含另一个，它会有所帮助。

# jquery - 滚动到页面顶部

> ID：10745485
> 
> 赞同：24
> 
> 时间：2012-05-24T21:23:02.210
> 
> 标签：jquery

如果单击按钮，是否有一种简单的方法可以强制浏览器滚动到顶部？

我试过了

```
jQuery('html').scrollTop();
jQuery('body').scrollTop();
jQuery(window).scrollTop(); 
```

他们似乎都没有滚动到页面顶部。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-05-24T21:30:55.813

由于跨浏览器的奇怪，有些浏览器会响应，有些会`'html'`响应`'body'`. 也许这只是我的运气，但`.scrollTop(0)`从来没有让我移动页面。试一试：

```
jQuery('html,body').animate({scrollTop:0},0); 
```

此版本针对所有桌面浏览器和移动设备进行了测试和跨浏览器。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-05-24T21:32:27.807

简单的纯 javascript，也适用于移动设备

```
window.scrollTo(0,0); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-24T21:23:46.817

你可以使用这个：

```
jQuery('body').scrollTop(0); 
```

或这个：

```
jQuery(window).scrollTop(0); 
```

或者最后这个：

```
jQuery('html').scrollTop(0); 
```

因此，为了调用该[`scrollTop`](http://api.jquery.com/scrollTop/)方法并使您的页面滚动，您应该传递一个带有表示 scrollTop 位置的数值的参数。否则它将像您需要获取 scrollTop 位置一样工作。

最后两种方法应该在所有浏览器中始终有效，而第一种方法可能不适用于某些版本的 IE。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-05-28T21:45:16.380

由于没有人提到所需的 HTML，我将在此处添加它。

首先创建你的锚元素：

`<a href="#" title="Scroll to Top" class="ScrollTop">Scroll To Top</a>`

请注意，该类由以下 jQuery 引用。

然后添加你的jQuery：

```
$(document).ready(function(){
  $('.ScrollTop').click(function() {
    $('html, body').animate({scrollTop: 0}, 800);
  return false;
    });
}); 
```

要调整动画的速度，请更改“800”值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-24T21:31:41.993

这是跨浏览器的方式，

```
function scrollableElement(els) {
    for (var i = 0, argLength = arguments.length; i <argLength; i++) {
        var el = arguments[i],
        $scrollElement = $(el);
        if ($scrollElement.scrollTop()> 0) {
            return el;
        } else {
            $scrollElement.scrollTop(1);
            var isScrollable = $scrollElement.scrollTop()> 0;
            $scrollElement.scrollTop(0);
            if (isScrollable) {
                return el;
            }
        }
    }
    return [];
}

var scrollElem = scrollableElement('html', 'body');

$(scrollElem).scrollTop(0); 
```

*来自 css-tricks 的代码*

# knockout.js - 自动修剪所有可观察值的空白

> ID：10745486
> 
> 赞同：18
> 
> 时间：2012-05-24T21:23:02.480
> 
> 标签：knockout.js

我在 Knockout 中有一个 ViewModel，它主要来自映射插件（即动态）。这工作正常。但是，现在我的客户希望我确保所有输入在提交到服务器之前都已删除空格。显然，修剪代码非常简单，但是对于 Knockout 来说相对较新，我不确定该代码到底应该放在哪里。我阅读了有关[扩展器](http://knockoutjs.com/documentation/extenders.html)的信息，但是返回并将其添加到每个可观察对象中似乎非常冗长且重复。另外，我什至不确定我是否可以对动态生成的 observables 执行此操作（例如，映射插件）。

**是否有任何我可以扩展/覆盖的中心机制，每次可观察到的变化时我都可以注入一些修剪代码？**基本上，我试图避免花费数小时浏览我们所有的表单并在 HTML 中添加特殊的绑定语法（如果我不需要）。

谢谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-08T18:23:00.003

我有同样的问题。我写了一个扩展，这样你就可以调用`trimmed`你的视图模型而不必改变你的绑定。例如：

```
var vm = {
    myValue: ko.observable('').trimmed()
} 
```

扩展：

```
ko.subscribable.fn.trimmed = function() {
    return ko.computed({
        read: function() {
            return this().trim();
        },
        write: function(value) {
            this(value.trim());
            this.valueHasMutated();
        },
        owner: this
    });
}; 
```

代码[在 JSFiddle 上](http://jsfiddle.net/joeyespo/g9ezw/)，带有示例。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-08-22T20:21:56.100

以防万一有人在使用更新版本的 Knockout 时遇到此问题，当前排名靠前的答案将无法正常工作。

这是一个更新的[小提琴](http://jsfiddle.net/g9ezw/41/)和代码，以显示所需的更改：

```
ko.subscribable.fn.trimmed = function() {
    return ko.computed({
       read: function() {
           return this().trim();
       },
       write: function(value) {
           this(value.trim());
           this.valueHasMutated();
       },
       owner: this
   }).extend({ notify: 'always' });
}; 
```

如果有人知道为什么`extend`现在需要，请告诉我。我花了很长时间才弄清楚为什么它在 Knockout 3.1.0 中不能正常工作

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-24T21:30:28.453

您可以编写一个自定义绑定来修剪 observable。类似的东西

[http://jsfiddle.net/belthasar/fRjdq/](http://jsfiddle.net/belthasar/fRjdq/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-07-01T17:23:36.890

以 Joe 的解决方案为起点，我们实现它的方式稍有不同。

**注意：**

*   `ko.observable()`括号中没有任何内容
*   新的`trimmed`read 函数只是简单地返回`this()`并且不会得到任何 null 或未定义的异常。

**型号代码：**

```
var vm = {
    myValue: ko.observable().trimmed()
} 
```

**扩展：**

```
ko.subscribable.fn.trimmed = function() {
    return ko.computed({
        read: function() {
            return this();
        },
        write: function(value) {
            this(value.trim());
            this.valueHasMutated();
        },
        owner: this
    });
}; 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-07-27T16:22:25.190

您可以创建一个在内部调用绑定的自定义绑定，或者您可以在实际绑定之前将绑定`value`覆盖为自动修剪（不推荐）。`value`

基本思想：

*   拦截`value`绑定
*   将传递的 observable 包装在一个`computed`
*   进行绑定`read`并`write`从计算的而不是从原始的 observable
*   当新输入到达时，在我们写之前修剪它
*   当模型值发生变化时，修剪它并根据需要更新模型和 UI

```
ko.bindingHandlers.trimmedValue = {
  init: function(element, valueAccessor, allBindings) {
    const ogValue = valueAccessor();
    let newVa = valueAccessor;

    // If this is a type="text" element and the data-bound value is observable,
    // we create a new value accessor that returns an in-between layer to do
    // our trimming
    if (element.type === "text" && ko.isObservable(ogValue)) {
      const trimmedValue = ko.observable().extend({"trim": true});

      // Write to the model whenever we change
      trimmedValue.subscribe(ogValue);

      // Update when the model changes
      ogValue.subscribe(trimmedValue);

      // Initialize with model value
      trimmedValue(ogValue());

      // From now on, work with the trimmedValue 
      newVa = () => trimmedValue;
    }

    // Note: you can also use `ko.applyBindingsToNode`
    return ko.bindingHandlers.value.init(element, newVa, allBindings)
  }
}

// Our observable to check our results with
var myObs = ko.observable("test ");
myObs.subscribe(function(newValue) {
  console.log("Change: \"" + newValue + "\"");
});

// The extender that does the actual trim
ko.extenders.trim = function(target, option) {
  return ko.computed({
    read: target,
    write: function(val) {
      target(
        val && typeof val.trim === "function"
          ? val.trim()
          : val
      );

      // This makes sure the trimming always resets the input UI
      if (val !== target.peek()) {
        target.valueHasMutated();
      }
    }
  }).extend({notify: "always"});
};

ko.applyBindings({
  myObs: myObs
});
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.4.2/knockout-min.js"></script>

<h4><code>type="text" trimmedValue</code></h4>
<input type="text" data-bind="trimmedValue: myObs">
```

## 如果你不关心`valueHasMutated`模型中一些不需要的 s

棘手的部分是确定您希望在模型中接收哪些更新......下面的示例不会触发`valueHasMutated`或改变模型的 observable。*但是*，如果您将*模型*值更改为未修剪的字符串，绑定处理程序将立即重置它。eg：`myObs(" test ")`会触发

1.  `Change: " test "`， 和
2.  `Change: "test"`

如果您只需要从 UI 修剪到模型，并且不介意一些额外的更新，您可以使用：

```
ko.bindingHandlers.value.init = function(element, valueAccessor, allBindings) {
  const ogValue = valueAccessor();
  const newVa = (element.type === "text" && ko.isObservable(ogValue))
    ? () => ogValue.extend({"trim": true})
    : valueAccessor;

  return ogValueInit(element, newVa, allBindings)
}; 
```

## 覆盖默认`value`绑定

要将此行为用作标准行为（同样，不推荐），您可以执行以下操作：

```
const ogValueInit = ko.bindingHandlers.value.init;
ko.bindingHandlers.value.init = function( /*... */ ) {
  // ...
  return ogValueInit( /* ... */);
}; 
```

```
const ogValueInit = ko.bindingHandlers.value.init;
ko.bindingHandlers.value.init = function(element, valueAccessor, allBindings) {
  const ogValue = valueAccessor();
  let newVa = valueAccessor;

  // If this is a type="text" element and the data-bound value is observable,
  // we create a new value accessor that returns an in-between layer to do
  // our trimming
  if (element.type === "text" && ko.isObservable(ogValue)) {
    const trimmedValue = ko.observable().extend({"trim": true});

    // Write to the model whenever we change
    trimmedValue.subscribe(ogValue);

    // Update when the model changes
    ogValue.subscribe(trimmedValue);

    // Initialize with model value
    trimmedValue(ogValue());

    // From now on, work with the trimmedValue 
    newVa = () => trimmedValue;
  }

  return ogValueInit(element, newVa, allBindings)
};

// Our observable to check our results with
var myObs = ko.observable("test ");
myObs.subscribe(function(newValue) {
  console.log("Change: \"" + newValue + "\"");
});

// The extender that does the actual trim
ko.extenders.trim = function(target, option) {
  return ko.computed({
    read: target,
    write: function(val) {
      target(
        val && typeof val.trim === "function"
          ? val.trim()
          : val
      );

      // This makes sure the trimming always resets the input UI
      if (val !== target.peek()) {
        target.valueHasMutated();
      }
    }
  }).extend({notify: "always"});
};

ko.applyBindings({
  myObs: myObs
});
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.4.2/knockout-min.js"></script>

<h4><code>type="text" value</code></h4>
<input type="text" data-bind="value: myObs">
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-05-03T23:02:54.010

另一种对我们来说很好的方法 - 在编辑字段时进行修剪：

```
$(document.body).on('blur', 'input, textarea', function () { this.value = this.value.trim(); $(this).trigger('change'); }); 
```

'change' 事件的触发器确保 KO 获取更改（使用 KO v2 测试）。

# javascript - Google Maps API v3：控制街景的方向并使用地址而不是纬度/经度

> ID：10745488
> 
> 赞同：0
> 
> 时间：2012-05-24T21:23:15.867
> 
> 标签：javascript, google-maps-api-3, google-street-view

我正在学习谷歌地图 API v3。我能够把这段代码放在一起。我试图让它尽可能简单。有用...

我遇到的问题是街景地图没有指向正确的方向/地址。右边的建筑物是拐角处的黄色建筑物（您需要向左滚动街景几次）。

当我在[谷歌地图](http://maps.google.com/maps?q=34.028339,%20-118.2881768&layer=c&z=17&iwloc=A&sll=34.028340,-118.288177&cbp=13,124.9,0,0,0&cbll=34.028358,-118.288208&hl=en&gl=us&ved=0CAsQ2wU&sa=X&ei=Gqe-T9uNIcaniALWh7y1Bw "谷歌地图")中使用相同的线时，它指向正确的建筑物/地址。我的地图街景指向对面/建筑物。

*   有没有办法在给定的绳索内控制街景地图指向的方向？-北/南/西...等。
*   **另外，是否可以只使用一个地址，并让谷歌 api 计算 latLong？**- 找出并找到超过 300 个地址并不断增加的正确坐标效率不高>_<

我的代码使用存储在 mysql 数据库中的 LatLon，但对于这个例子，我使用单点来说明我的情况：

**谷歌地图代码：street_view.js**

```
//<![CDATA[
// ************************   Variables   ************************
var infoWindow = new google.maps.InfoWindow();

//Map Options
var options = {
    lat: 34.028339,
    lon: -118.2881768,
    zoom: 15,
    type: 'roadmap',
    tytle: "Address: 1256 W. 29th St. Los Angeles, CA  90007",
    html: '<div class="tooltip"><span>Address</span>: 1256 W. 29th St. Los Angeles, CA  90007<\/div>',
    icons: {
        red:  'http://labs.google.com/ridefinder/images/mm_20_red.png',
        blue: 'http://maps.google.com/mapfiles/ms/micons/blue-dot.png',
        shadow: 'http://maps.google.com/mapfiles/ms/micons/msmarker.shadow.png'
        }
    };

// ************************   Functions   ************************
function bindInfoWindow(marker, map, infoWindow, html) {
    google.maps.event.addListener(marker, 'click', function() {
        infoWindow.setContent(html);
        infoWindow.open(map, marker);
        //marker.openInfoWindowHtml(html);
        infoWindow.getContent();marker.openInfoWindowTabsHtml(infoTabs);
    });
}

function googleMaps()
{
    var map = new google.maps.Map(document.getElementById("map"), { 
        center: new google.maps.LatLng( options.lat , options.lon ),
        zoom: options.zoom,
        mapTypeId: options.type
    });

    var marker = new google.maps.Marker({
        map: map,
        position: map.getCenter(),
        title: options.title,
        icon: options.icons.blue,
        shadow: options.icons.shadow
        });

    bindInfoWindow(marker, map, infoWindow, options.html);

    map.StreetView = new  google.maps.StreetViewPanorama(document.getElementById("map_StreetView"), {
        position: map.getCenter(),
        zoom: 1
    });
    //map.setStreetView(map.StreetView); //This line adds a street view icon to the roadmap and binds it together with streetView

} //end of load()

// ************************   Load   ************************
//Call googleMaps after document is loaded
google.maps.event.addDomListener(window, 'load', function(){
    googleMaps();
    //you can add more code here
    });
//]]> 
```

**HTML：**

```
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <title><?php echo $map['address']?></title>

    <!-- START: Google Maps API -->
    <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>
    <script type="text/javascript" src="http://www.mydomain.com/_api/google/maps/v3/street_view.js"></script>
    <!-- __END: Google Maps API -->
</head>

<body>
    <div id="map-container" >
        <div id="map_StreetView" style="width: 350px; height: 250px"></div><br/>
        <div id="map" style="width: 350px; height: 250px"></div>
    </div>
</body>
</html> 
```

PS。我试图给你一个 jsFiddle，但无论出于何种原因，它都没有显示地图......？[http://jsfiddle.net/EdsB6/](http://jsfiddle.net/EdsB6/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T22:20:05.597

首先，在初始化 StreetViewPanorama 时使用[`pov`选项](https://developers.google.com/maps/documentation/javascript/reference#StreetViewPov)设置相机位置。

```
map.StreetView = new google.maps.StreetViewPanorama
  (document.getElementById("map_StreetView"), {
    position: map.getCenter(),
    pov: { heading: 135, pitch: 0, zoom: 1 }
}); 
```

更新的 JS Fiddle：http: [//jsfiddle.net/EdsB6/2/](http://jsfiddle.net/EdsB6/2/)

有关更多信息，请阅读 StreetView 上的文档

[https://developers.google.com/maps/documentation/javascript/streetview](https://developers.google.com/maps/documentation/javascript/streetview)

关于第二个问题，您需要地理编码。（不幸的是，不，没有“简单”的单行方法通过 API 使用地址）。如果您重复查询同一个地方，最好只做一次并保存 LatLngs。在这里阅读：

[https://developers.google.com/maps/documentation/javascript/geocoding](https://developers.google.com/maps/documentation/javascript/geocoding)

这个答案显示了如何将地址转换为 LatLng，实际上它是一个数组，但每个地址都被一一转换。

[https://stackoverflow.com/a/10743457/1325290](https://stackoverflow.com/a/10743457/1325290)

```
 function codeAddress(address, callback) {
    geocoder.geocode( { 'address': address}, function(results, status) {
      if (status == google.maps.GeocoderStatus.OK) {
        callback(results[0].geometry.location);
      } 
    });
  }

  function initialize() {
    codeAddress("Chicago, IL", function(default_location) {
      var map = new google.maps.Map(document.getElementById("map_canvas"),
        { center: default_location,
        zoom: 3, mapTypeId: google.maps.MapTypeId.ROADMAP });

      locations = ["Los Angeles", "Davis", "Truth or Consequences",
        "Ann Arbor", "Massachusetts"];

      for (var i = 0; i < locations.length; i++) {
        codeAddress(locations[i], function(latLng) {
          new google.maps.Marker({map:map, position:latLng});
        });
      }
    });
  } 
```

# ruby-on-rails-3.2 - current_user 和 created_at 导致 TypeError

> ID：10745493
> 
> 赞同：0
> 
> 时间：2012-05-24T21:23:42.527
> 
> 标签：ruby-on-rails-3.2

我正在玩红宝石，试图实现一个基本的社交网络，比如应用程序。

我有两个要显示状态更新的视图，用户#show 和主页（您可以在其中添加状态更新并可视化您自己的）。

在家里，它在 Home#index 中返回一个错误 TypeError，无法将 nil 转换为确切的数字。但是，如果我将@user 硬编码为 User.find(1) 工作正常，那么如果@user = current_user （我正在使用设计），它似乎就会发生冲突。

家庭控制器：

```
 class HomeController < ApplicationController
  def index
    @user = current_user
    @new_status_update = current_user.status_updates.build if user_signed_in?
    @status_updates = @user.status_updates
  end
end 
```

用户控制器：

```
class UsersController < ApplicationController
  before_filter :authenticate_user!
  load_and_authorize_resource :only => :index

  def show
    @user = User.find(params[:id])
    @status_updates = @user.status_updates
  end

end 
```

视图中的循环是相同的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T12:37:55.017

好的，我通过将 current_user 包装在 User.find(current_user) 中解决了这个问题

这可能不是最好的方法，但至少有效..

# python - 在 python 中，如何让诸如 repr() 之类的函数与我的代理类一起使用？

> ID：10745496
> 
> 赞同：1
> 
> 时间：2012-05-24T21:23:58.253
> 
> 标签：python, factory-pattern, proxy-classes, repr

我设计了一个代理类，它允许我用工厂方法替换任何类型/类，并且仍然保留类对象的大部分功能。这是它如何工作的示例：

```
class ProxyClass:
    def __init__(self, cls):
        self._ProxyClass_cls = cls
    def __getattr__(self, name):
        return getattr(self._ProxyClass_cls, name)

class _strProxy(ProxyClass):
    def __call__(self, s):
        if '\n' in s:
            raise ValueError
        if s not in self._cache:
            self._cache[s] = self._ProxyClass_cls(s)
        return self._cache[s]

str = _strProxy(str)
str._cache = {}

>>> s = str('hello')
>>> s
'hello'
>>> type(s)
<type 'str'>
>>> str('hello\n')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 4, in __call__
ValueError 
```

我喜欢这种工厂方法的实现，因为它完全替换了原始类对象，并且仍然允许以下内容：

```
>>> map(str.split, [str('foo bar'), str('bar foo')])
[['foo', 'bar'], ['bar', 'foo']] 
```

我发现的唯一问题是对类本身的操作，例如`repr()`：

```
>>> repr(str)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: descriptor '__repr__' of 'str' object needs an argument 
```

在此示例中，`repr()`正在尝试调用`str.__repr__()`而不是`type.__repr__(str)`. 我尝试修复更改`str.__class__`，但发现在这种情况下这是不可能的：

```
>>> str.__class__ = type
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: __class__ must be set to a class 
```

有谁知道恢复功能的任何方法`repr(str)`或另一种方法来完成我正在做的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T21:35:04.950

为什么不做

```
>>> class _strPproxy(ProxyClass):
...     def __call__(self, s):
...         self.s = s
...         if '\n' in s:
...             raise ValueError
...         if s not in self._cache:
...             self._cache[s] = self._ProxyClass_cls(s)
...         return self._cache[s]
...     def __repr__(self): 
...         return repr(self.s) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T21:35:11.983

确保您的所有类都继承自`object`：

```
class ProxyClass(object): 
```

在 Python 3.x 中，所有类都继承自`object`反正，所以你不需要这样做。但是在 Python 2.x 中，除非所有涉及的类都是从`object`.

`repr(str)`进行上述更改后，对我来说效果很好。

# java - 行返回不一致

> ID：10745500
> 
> 赞同：0
> 
> 时间：2012-05-24T21:24:19.313
> 
> 标签：java, sql, oracle, jdbc

**我的问题**：我想知道为什么来自准备好的语句的查询结果每次运行都应该不一致。

**警告**前方奇怪的东西。

我在 Oracle 数据库上。我正在使用`ojdbc6.jar`驱动程序。我有一个查询，它返回大约 1300 行（它随着时间的推移而变化，因为有一个`where`子句取决于`sysdate`）。当我在 Toad（SQL Developer 工具）和 Netbeans 服务工具（与数据库的另一个接口）中运行它时，它运行良好。我的结果是一致的。但是当我在 java 代码中运行查询时，我的结果非常不一致。为了尝试查看每个结果计数返回的频率，我将其放入 for 循环并迭代 10 次。每次运行中都有相对一致的行数，但跨运行时则不然。我的输出和代码如下。让我知道是否有更多信息有帮助。

当尝试有效时（排序...）：

```
Got real queries (1308)
Got real queries (1308)
Got real queries (1308)
Got real queries (1307)
Got real queries (1307)
Got real queries (1317)
Got real queries (1317)
Got real queries (1317)
Got real queries (1317)
Got real queries (1315) 
```

当尝试不起作用时：

```
Got real queries (212)
Got real queries (212)
Got real queries (212)
Got real queries (212)
Got real queries (212)
Got real queries (212)
Got real queries (212)
Got real queries (212)
Got real queries (212)
Got real queries (212) 
```

我的代码：

```
public static void main(String[] args) throws Exception {
  for (int i = 0; i < 10; i++) {
    List<String> realQueries = new ArrayList<>();
    String sqlAllRealQueries = "select V.SQL_FULLTEXT" + StringHelper.newline
            + "from v$sql v" + StringHelper.newline
            + "where V.PARSING_SCHEMA_NAME = 'DSS1_PTC'" + StringHelper.newline
            + "and to_number(replace(replace(replace(v.last_load_time,'-',''), '/',''), ':','')) > to_number(to_char(sysdate - (24/24),'yyyymmddHH24mmss'))" + StringHelper.newline
            + "order by V.LAST_LOAD_TIME desc";
    try (ResultSet rs = getInstance().executeQuery(sqlAllRealQueries)) {
      while (rs.next()) {
        realQueries.add(rs.getString(1));
      }
    }

    System.out.println("Got real queries (" + realQueries.size() + ")");
  }
  System.exit(0);
}

public ResultSet executeQuery(String connection, String query, QueryParameter... params) throws DataException, SQLException {
  Connection conn = ConnectionPool.getInstance().get(connection);
  PreparedStatement pstmt = conn.prepareStatement(query);
  for (int i = 1; i <= params.length; i++) {
    //... stuff to fill in the '?'s of the query (in this case, there are none).
    }
  }

  ResultSet rs = pstmt.executeQuery();
  ConnectionPool.getInstance().release(conn);
  return rs;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T22:45:42.783

您在日期格式“yyyymmddHH24mmss”中有小错误，应该是“yyyymmddHH24miss”（“mi”而不是“mm”）mm 表示月份，分钟是“mi”。

# iphone - HTML&CSS 页脚，iPhone 上的宽度较短

> ID：10745501
> 
> 赞同：0
> 
> 时间：2012-05-24T21:24:27.427
> 
> 标签：iphone, html, css

我有这个网站[http://northshorelandscapefirm.ca/](http://northshorelandscapefirm.ca/)它在所有浏览器中看起来都很好，除了在 iphone 上......页脚宽度比网络浏览器上的短......有人知道我在说什么吗？

这是我的代码

```
<div class="footerWrapper">
<div class="footer">

<div class="footerNav">
<ul>
<li><a href="home.php">Home</a></li>
<li><a href="about.php">About Us</a></li>
<li><a href="gallery.php">Gallery</a></li>
<li><a href="services.php">Services</a></li>
<li><a href="contact.php">Contact Us</a></li>
</ul>
</div><!--footerNav-->

<div class="footerContact">
<ul>
<li>Email - <span style="text-transform:lowercase"><a href="mailto:email@northshorelandscapefirm.ca">email@northshorelandscapefirm.ca</a> | <a href="mailto:email2@northshorelandscapefirm.ca">email2@northshorelandscapefirm.ca</a></span></li>
<li> | </li>
<li>PHONE - <a href="callto:+5555555555">555.555.5555</a> | <a href="callto:+5555555555">555.555.5555</a></li>
</ul>
</div><!--footerContact--> 
```

和 CSS

```
.footerWrapper{
    width:100%;
    background:#000;
    float:left;
    padding-bottom:20px;
}

.footerNav{
    padding-top:10px;
    margin: 0 auto;
    position: relative;
    width:1080px;
    z-index:1000;
}

.footerNav ul {
    list-style-type: none;
    margin: 0;
    padding: 0 0 0 8px;
}

.footerNav li {
    float: left;
}

.footerNav ul a {
    color: #FFFFFF;
    display: block;
    padding: 0 30px 0 0;
    text-decoration: none;
    font-size:36px;
    text-transform:uppercase;
}

.footer{
    margin: 0 auto;
    position: relative;
    width: 1101px;
    background-color:#888888;
    min-height:145px;
    opacity:0.44;
    filter:alpha(opacity=44);
}

.footerContact{
    margin: 0 auto;
    position: relative;
    width: 1200px;
    padding-top: 108px;
}

.footerContact ul {
    list-style-type: none;
    margin: 0;
    padding: 0 0 0 8px;
}

.footerContact li {
    float: left;
    color: #FFFFFF;
    display: block;
    padding: 0 30px 0 0;
    text-decoration: none;
    font-size:20px;
    text-transform:uppercase;
}

.footerContact Ul a{
    text-decoration:none;
    color:#FFFFFF;
} 
```

它有很多代码，我知道，但如果有人能提供帮助，将不胜感激，

提前致谢，J

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T11:51:22.380

只是跟进 Tony318 的回答。你可以使用类似的东西：

```
if (window.navigator.userAgent.indexOf('iPhone') != -1) {
    //iphone specific code to resize footer
} 
```

# c# - 尝试从自定义类以编程方式在设计时添加添加到表单的 winforms 控件

> ID：10745508
> 
> 赞同：2
> 
> 时间：2012-05-24T21:24:43.753
> 
> 标签：c#, winforms

好的，所以我在 winforms 应用程序中向 form1 添加了一个 contextmenustrip。我在其他地方有一个标准类，它将树节点作为参数并对其进行处理。我想做的一件事是设置上下文菜单。上下文菜单是在设计时手动添加到表单中的。

我试过这样的事情：

```
public static void MethodThatAddsAContextMenu(TreeNode node)
{
    node.ContextMenuStrip = Application.OpenForms[0].Controls["myContextMenu"] as ContextMenuStrip;
} 
```

似乎有一百万个微妙而不是那么微妙的变化。我的代码找不到控件。尽管当我通过监视列表进行深入研究时，上下文菜单实际上并不是表单控件集合的一部分。

任何帮助表示赞赏。我也在我的 iPad 上做了这个，看起来它的格式没问题，但如果不是，请道歉。

提前致谢。

好的，根据您的建议，Boo 发布代码可能更容易：

```
private static TreeNode CreateSecurityNode(Security Sec)
{
    TreeNode sn = new TreeNode(Sec.SecurityName);
    sn.Tag = Sec;
    sn.ContextMenuStrip = Application.OpenForms[0].Container.Components["securityContext"] as ContextMenuStrip;
} 
```

容器返回`null`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T21:32:43.200

ContextMenuStrip 不会是`Form.Controls`集合的一部分。它是一个组件，而不是一个控件。

我会尝试使用 TreeNode 传入 ContextMenuStrip。

或者，您可以让您的类构造并在运行时附加上下文菜单。

还-

`List<ContextMenuStrip>`您可以使用所有上下文菜单（或 a ）填充 a`Dictionary<ContextMenuStrip>`并将其作为表单的属性公开：

```
public List<ContextMenuStrip> contextMenus {get;set;}

// // form load event, possibly
this.contextMenus.Add(myContextMenu); 
```

# objective-c - iOS RESTful POST 调用在 UIWebView 中有效，但在从线程调用时无效

> ID：10745510
> 
> 赞同：2
> 
> 时间：2012-05-24T21:24:56.207
> 
> 标签：objective-c, ios, rest, post, webserver

我正在尝试在 iOS 应用程序中创建一个身份验证系统，该系统允许用户登录并在他们还没有帐户的情况下进行注册。我昨天完全启动并运行了登录系统，但是当我为注册系统设置代码时，代码甚至无法 ping 服务器。然后我再次尝试测试登录系统，代码现在也不会ping服务器。

RegistrationTableViewController 的相关代码（它是一个自定义 TVC，在某些单元格中包含文本字段 - 例如，考虑创建新日历事件的视图）：

```
- (IBAction)signUpButtonPressed { 
    // Get the values out of the text fields that the user has filled out.
    NSString *email = self.emailTextField.text;
    NSString *firstName = self.firstNameTextField.text;
    NSString *lastName = self.lastNameTextField.text;
    NSString *password = self.passwordTextField.text;
    // Assuming that sign-up could potentially take a noticeable amount of time, run the
    // process on a separate thread to avoid locking the UI.
    dispatch_queue_t signUpQueue = dispatch_queue_create("sign-up authenticator", NULL);
    dispatch_async(signUpQueue, ^{
        // self.brain refers to a SignUpBrain property. See the code for the class below.
        [self.brain signUpUsingEmail:email firstName:firstName lastName:lastName  
          andPassword:password];  
        dispatch_async(dispatch_get_main_queue(), ^{  
            [self performSegueWithIdentifier:@"ShowMainFromSignUp" sender:self];  
        });  
    });  
    dispatch_release(signUpQueue);  
} 
```

SignUpBrain 的相关代码：

```
- (void)signUpUsingEmail:(NSString *)email firstName:(NSString *)firstName
                lastName:(NSString *)lastName andPassword:(NSString *)password {
    self.email = email;
    self.firstName = firstName;
    self.lastName = lastName;
    self.password = password;

    // Handle sign-up web calls.
    NSMutableURLRequest *signUpRequest = [[NSMutableURLRequest alloc] initWithURL:[NSURL 
      URLWithString:@"URL GOES HERE"]]; // obviously there's an actual URL in real code
    NSString *postString = [NSString stringWithFormat:@"uname=%@&pw=%@&fname=%@&lname=%@", 
      email, password, firstName, lastName];
//NSLog(postString);
    [signUpRequest setHTTPMethod:@"POST"];
    [signUpRequest setHTTPBody:[postString dataUsingEncoding:NSUTF8StringEncoding]];
    NSURLConnection *signUpConnection = 
      [NSURLConnection connectionWithRequest:signUpRequest delegate:self];
    [signUpConnection start];

    // Store any user data.
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
    self.signUpResponse = data;
    NSError *error;
    NSDictionary *jsonLoginResults = [NSJSONSerialization JSONObjectWithData:data 
      options:0 error:&error];
    if (error) {
        NSLog(error.description);
    }
    NSLog(jsonLoginResults.description);

    // Return whether the user has successfully been registered.
    // If success is 1, then registration has been completed successfully. 0 if not.
    if ([jsonLoginResults objectForKey:@"status"]) {
        NSLog(@"Success!");
    }
} 
```

我还将注意到我创建了一个在 UIWebView 中使用这些相同 Web 调用的测试，并且它可以成功运行。

如果我需要澄清任何内容或包含更多代码，请告诉我！提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T23:06:45.813

几年前我写了一篇关于这个确切问题的博客文章，所以它可能有点过时了：http: [//www.sortedbits.com/nsurlconnection-in-its-own-thread](http://www.sortedbits.com/nsurlconnection-in-its-own-thread)

很高兴知道 NSURLConnection 实际上确实可以正常触发，但是没有收到委托调用。当您将 NSRunLoop 放在那里时，它可以确保您的连接不会超出该线程的范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T20:08:29.383

在正常情况下，您不需要在不同的线程上运行网络操作。

您需要避免的是主线程上的同步操作。这将导致 iOS 终止您的应用程序，因为它会在网络传输繁忙时停止响应事件。

Apple 的建议是在主线程上使用异步操作，而不是在另一个线程上进行同步操作。

使用异步操作将导致网络本身在后台运行。您可以将其视为 Apple 的专用线程。您的委托方法将在主线程上以正确的顺序调用，以赶上 iOS 认为合适的网络。

## 使用 NSURLConnection

`NSURLConnection`Apple在 URL 加载系统编程指南，[使用 NSURLConnection](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html#//apple_ref/doc/uid/20001836-BAJEAIEE)中包含了一个如何使用的示例。这是一篇简短的文章，充满了简单的代码示例。你应该花几分钟时间阅读这篇文章。

简而言之，这是模式：

*   为您的响应数据保留一个`NSMutableData`。
*   清除 中的内容`NSMutableData`实例`didReceiveResponse`。（当您被重定向时，您可能会收到多个`didReceiveResponse`事件，但您应该只使用最后一个事件的数据。）
*   将您收到的数据附加`didReceiveData`到`NSMutableData`. 不要试图立即处理它；您*通常*`didReceiveData`会在一次传输中收到多个事件。
*   在`connectionDidFinishLoading`中，您的数据是完整的。在这里，你可以用它做点什么。

当您拥有所有数据时，您可以将其发送到不同的线程，或者（更简单）`dispatch_async`发送到不在主线程上运行的队列。[请参见URL 加载系统编程指南](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html#//apple_ref/doc/uid/20001836-170129)的清单 5，“示例 connectionDidFinishLoading：实现” 。

这里的想法是您开始（或重新启动）在 中累积数据，在`didReceiveResponse:`中追加数据`didReceiveData:`，并实际对 中的数据执行某些操作`connectionDidFinishLoading:`。

当然，**可以**`NSURLConnection`在另一个线程上运行。该线程将需要使用运行循环来接收来自网络的委托事件。但除非出于某种原因您**需要**一个单独的线程，否则使用异步网络是 Apple 的解决方案。

使用`NSURLConnection`要求类成员在传输时累积数据。这意味着如果您要同时进行多个传输，则需要更复杂的东西。可能是一个包装类来驱动`NSURLConnection`，并保持每个响应分开。在您编写此包装类时，您可能已经编写了`AFHTTPRequestOperation`AFNetworking 的一部分的幼稚版本。

假设您一次只进行一次传输，代码看起来有点像这样：

```
- (void)signUpUsingEmail:(NSString *)email firstName:(NSString *)firstName
                lastName:(NSString *)lastName andPassword:(NSString *)password {

    // set up your connection here, but don't start it yet.

    receivedData = [[NSMutableData alloc] init]; // receivedData should be a class member
    [signUpConnection start];
}

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {
    [receivedData setLength:0];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
    [receivedData appendData:data];
}

- (void)connection:(NSURLConnection *)connection
  didFailWithError:(NSError *)error {
    // do something with error here
    // if you're not using ARC, release connection & receivedData here
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection {
    dispatch_async(someQueue, ^{
        // do something that takes a long time with receivedData here
        dispatch_async( dispatch_get_main_queue(), ^{
            // go back to your main screen here
        });
    });
    // if you're not using ARC, release connection & receivedData here
} 
```

## 使用 AFNetworking

既然我已经解释了所有这些，我将提出一个替代方案。[使用AFNetworking](https://github.com/AFNetworking/AFNetworking/)可能会更好。

AFNetworking 是一个开源的第三方库。它最基本的类包装`NSURLConnection`在 a 中`NSOperation`（因此，可以添加到 a 中的东西`NSOperationQueue`）。AFNetworking 自动处理我谈到的这些事件。相反，您编写一个完成块。当你得到这个块时，传输要么成功，要么失败。如果失败，则错误在`AFHTTPRequestOperation`实例上可用。如果成功，您可以使用`AFHTTPRequestOperation`实例上的数据。

（注意：我相信`AFHTTPRequestOperation`实际上确实从另一个线程运行连接。但是，它是编写良好且经过良好测试的代码。这样做没有任何“错误”，只是更难实现并且通常是不必要的。但是如果您的库确实给你，为什么不呢？）

AFNetworking 提供了一些`NSURLConnection`没有的 HTTP 逻辑。使用 AFNetworking，您只需使用 a`AFHTTPRequestOperation`并设置一个完成块。以上所有内容都变成了这样：

```
HTTPOperation = [[AFHTTPRequestOperation alloc] initWithRequest: URLRequest];
HTTPOperation.completionBlock = ^{
    dispatch_async(someQueue, ^{
        // get possible error or content from HTTPOperation
    }
};
[HTTPOperation start]; 
```

过去，我直接使用 NSURLConnection 编写。但最近，我更频繁地使用 AFNetworking。与其他一些库不同，它与 NSURLConnection 并没有完全不同的形状。事实上，它使用 NSURLConnection，只是包装在一个 NSOperation 中（希望 Apple 现在可以发布任何版本）。至少值得考虑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T21:31:10.617

NSURLConnection 需要一个默认情况下在辅助线程上不可用的 runloop。如果需要在辅助线程上创建连接，请添加在 NSDefaultRunLoopMode 下运行的 runloop。

在创建 NSURLConnection 对象之前使用以下代码。"finished" 是一个 BOOL 类型的 iVar，当连接加载完成时应该更新为 YES。

```
 do {
        [[NSRunLoop currentRunLoop] runMode:NSDefaultRunLoopMode beforeDate:[NSDate distantFuture]];
    } while (!finished); 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T23:39:57.607

每个线程都有一个关联的运行循环。NSURLConnection 的委托方法被触发需要运行循环。

在您的`- (void)signUpUsingEmail:...`方法中，在`[signUpConnection start];`安排 URL 连接后在该线程上运行（由 GCD 创建和管理）运行循环，如下所示 -

```
[signUpConnection scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];

[[NSRunLoop currentRunLoop] run]; 
```

# iphone - 自动调整大小遮罩问题

> ID：10745511
> 
> 赞同：0
> 
> 时间：2012-05-24T21:25:03.427
> 
> 标签：iphone, objective-c, ipad, uiview, autoresizingmask

我有一个 ViewController 调用另一个视图，该视图包含 a `contentView`，然后是`webView`顶部的 a 。我正在尝试在顶部添加按钮，`webView`并试图让它们使用自动调整大小遮罩大约两个小时，但没有成功。当我尝试在旋转时重置框架时，按钮需要几分钟才能重新定位，因此看起来很滞后。这是我`init`的视图方法：

```
self = [super initWithFrame:frame];
    if (self) {
        _contentView = [[UIView alloc] initWithFrame:frame];
        _contentView.backgroundColor = [UIColor whiteColor];
        _contentView.clipsToBounds = YES;
        self.clipsToBounds = YES;

        UIImage *facebookShare = [UIImage imageNamed:@"share_facebook_focus_pad"];
        self.facebookButton = [[UIButton alloc] initWithFrame:CGRectMake(700, 150, facebookShare.size.width, facebookShare.size.height)];
        //[facebookButton setAutoresizingMask:UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleBottomMargin];
        [self.facebookButton setImage:facebookShare forState:UIControlStateNormal];
        [_webView addSubview:self.facebookButton];

        UIImage *twitterShare = [UIImage imageNamed:@"share_twitter_focus_pad"];
        self.twitterButton = [[UIButton alloc] initWithFrame:CGRectMake(self.facebookButton.frame.origin.x, self.facebookButton.frame.origin.y + facebookShare.size.height, twitterShare.size.width, twitterShare.size.height)];
        //twitterButton.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;
        [self.twitterButton setImage:twitterShare forState:UIControlStateNormal];
        [_webView addSubview:self.twitterButton];

        UIImage *mailShare = [UIImage imageNamed:@"share_mail_focus_pad"];
        self.mailButton = [[UIButton alloc] initWithFrame:CGRectMake(self.facebookButton.frame.origin.x, self.facebookButton.frame.origin.y + facebookShare.size.height + twitterShare.size.height, mailShare.size.width, mailShare.size.height)];
        //mailButton.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;
        [self.mailButton setImage:mailShare forState:UIControlStateNormal];
        [_webView addSubview:self.mailButton];

        [_contentView addSubview:_webView];
        [self addSubview:_contentView];

        self.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;
        self.contentView.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;
        self.webView.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;
        self.webView.frame = CGRectMake(CGRectGetMinX(self.frame), CGRectGetMinY(self.frame), CGRectGetWidth(self.frame), CGRectGetHeight(self.frame));

    } 
```

只需在`_webView`. 我试图将它们放在右上角，因此，我需要屏蔽`left`和`bottom`. 在这里，我注释掉了 twitter 和邮件按钮，并使用 Facebook 按钮对其进行了测试。我**专门**将 Facebook 按钮设置为 x 坐标 700 - 但是一旦我取消注释自动调整大小蒙版线，如上所示，Facebook 按钮就会消失！！这是怎么发生的？除非已旋转，否则自动调整蒙版不会与 x 坐标一起使用！尽管如此，它应该很好地对齐它并将它推到右上角，因为我掩盖了左下角。这是怎么回事？这非常令人沮丧 - 我已经与它战斗了大约 2 个小时！

**PS：我没有使用界面生成器。请不要建议我使用它。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T13:22:55.107

尝试

```
self.facebookButton.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight; 
```

并首先设置 webview 的框架，然后添加按钮，然后尝试更改方向。

# javascript - 计算不与订单脚本相加

> ID：10745521
> 
> 赞同：0
> 
> 时间：2012-05-24T21:25:47.737
> 
> 标签：javascript, html

我做了一个移动网站，所以我可以计算虚构的订单。我有滑块，可以让人们选择他们想订购多少三明治。我需要计算同一页面上不同三明治的总价格，但我无法让它工作。

所以我在头脑中使用的代码是：

```
<script>
function bereken(){
    document.write( (prijzen[0]*aantal[0]) + (prijzen[1]*aantal[1]) + (prijzen[2]*aantal[2]) + (prijzen[3]*aantal[3]));
}
</script>

<

\\  

// > <h3>
                    Uw Bestelling
                </h3>
                <a data-role="button" data-transition="fade" href="#page5" data-icon="home" data-iconpos="left">
                    Home
                </a>
            </div>
            <div data-role="content">
                <div style="width: 100%; height: 30px; position: relative; background-color: #fbfbfb; border: 1px solid #b8b8b8;">
                    <img src="http://www.cookschool.org/media/34429/pizza-banner.jpg" alt="pizza" style="width: 100%; height: 30px" />
                </div>
                <div data-role="fieldcontain">
                    <fieldset data-role="controlgroup">
                        <label for="slider2">
                            Broodje Italia €2,95
                        </label>
                        <input type="range" name="slider" id="slider2" value="1" min="0" max="100" data-highlight="false" />
                    </fieldset>
                </div>
                <div data-role="fieldcontain">
                    <fieldset data-role="controlgroup">
                        <label for="slider3">
                            Broodje Formagio €3,45
                        </label>
                        <input type="range" name="slider" id="slider3" value="1" min="0" max="100" data-highlight="false" />
                    </fieldset>
                </div>
                <div data-role="fieldcontain">
                    <fieldset data-role="controlgroup">
                        <label for="slider4">
                            Broodje Tricolore €3,25
                        </label>
                        <input type="range" name="slider" id="slider4" value="1" min="0" max="100" data-highlight="false" />
                    </fieldset>
                </div>
                <div data-role="fieldcontain">
                    <fieldset data-role="controlgroup">
                        <label for="slider5">
                            Broodje Parma €3,96
                        </label>
                        <input type="range" name="slider" id="slider5" value="1" min="0" max="100" data-highlight="false" />
                    </fieldset>
                </div>
               <input name="Totaalprijs" type="button" value="Uitrekenen" onClick="javascript:bereken();">
                                              <script>
prijzen=new Array();
prijzen[0]=2.95;
prijzen[1]=3.45;
prijzen[2]=3.25;
prijzen[3]=3.95;

aantal=new Array();
aantal[0]=document.getElementById('slider2').value;
aantal[1]=document.getElementById('slider3').value;
aantal[2]=document.getElementById('slider4').value;
aantal[3]=document.getElementById('slider5').value;
</script>
            </div>
            <div data-theme="a" data-role="footer" data-position="fixed">
                <h3>
                    Schoolopdracht
                </h3>
            </div>
        </div>
\\ > 
```

这就是问题所在的 div。

我希望我给了你们足够的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T21:46:26.940

伙计，你做得很好。问题是您说“嘿页面（文档）这是您的新值（document.write）”所以，您正在覆盖同一个文档（您的 HTML 页面）。您需要写入页面的元素。所以，试试这样的事情：

```
<script type="text/javascript">
    document.getElementById("myElement").innerHTML="Some text";
</script> 
```

这里有一个例子：[http ://www.w3schools.com/js/js_howto.asp](http://www.w3schools.com/js/js_howto.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T21:53:06.500

不要使用 document.write。尝试使用警报来进行调试。而是通过设置另一个元素的 innerHTML 将输出写入页面。看这个例子，你的代码基本上可以工作。您的函数需要在其中包含`document.getElementById`调用，否则它们不会在每次按下按钮时重新初始化。

[http://jsfiddle.net/6eEVf/](http://jsfiddle.net/6eEVf/)

```
prijzen=new Array();
prijzen[0]=2.95;
prijzen[1]=3.45;
prijzen[2]=3.25;
prijzen[3]=3.95;

function bereken(){
    aantal=new Array();
    aantal[0]=document.getElementById('slider2').value;
    aantal[1]=document.getElementById('slider3').value;
    aantal[2]=document.getElementById('slider4').value;
    aantal[3]=document.getElementById('slider5').value;

    alert( (prijzen[0]*aantal[0]) + (prijzen[1]*aantal[1]) + (prijzen[2]*aantal[2]) + (prijzen[3]*aantal[3]));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T21:59:24.467

它工作正常。

![在此处输入图像描述](../Images/0959c00fa9282ff9848c8c0d3a1182b2.png)

不要`document.write`用于这个，更推荐这个：

*   创建一个 div`id = "total"`
*   用于`document.getElementById("total").innerHTML = "calculated total here"`更新值

此外，使用您当前的脚本，即使您实现了输入值，输出也不会改变。为什么？`aanatal`因为您仅在页面加载时才存储 的值。

如果您想在每次调用函数时获取值，只需将它们移入即可。

像这样的东西

```
<input id="slider1" value="1" />
<input id="slider2" value="1" />
<input id="slider3" value="1" />
<input id="slider4" value="1" />
<div id="total">Total: </div>
<input type="button" value="Uitrekenen" onClick="bereken();" />

<script type="text/javascript">
    function bereken() {
        for (var i = 0, total = 0; i < 4; i++) {
            aantal[i]= document.getElementById("slider" + (i + 1)).value; //get new values, (i+1) because we start at i=0
            total += (prijzen[i] * aantal[i]);//add them together
        }

        document.getElementById("total").innerHTML = "Total: " + total; //update the total
    }

    var aantal = new Array(4); //create the array that we will be using
    var prijzen = [2.95, 3.45, 3.25, 3.95]; //the same above, but placing placing the values outside the function as they won't change
</script> 
```

## [演示](http://jsfiddle.net/6eEVf/10/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T21:45:55.667

初始化页面时，您将获得滑块的初始值。当函数 bereken 被调用时，它总是使用滑块的初始值。您需要重写函数以在调用函数时使用滑块的值。

# android - 暂时禁用 SeekBar

> ID：10745526
> 
> 赞同：2
> 
> 时间：2012-05-24T21:26:06.287
> 
> 标签：android, seekbar, seek

我正在开发一个应用程序，该应用程序对控制器进行网络调用，以根据应用程序中的搜索栏更改亮度级别。它工作得很好，但如果用户疯狂地滑动搜索栏，它会冻结应用程序，我会用力关闭。

为了解决这个问题，我需要在异步任务执行某些业务时禁用搜索栏，一旦这个异步任务完成，我将重新启用搜索栏。我使用一个 onTouch 监听器来监听 ACTION_UP 事件的搜索栏，然后我触发了一个异步任务，所以我不能禁用 Clickable。

有任何想法吗？谢谢阅读。

# entity-framework - 使用 Dapper 和实体框架时放宽或禁用表约束？

> ID：10745529
> 
> 赞同：0
> 
> 时间：2012-05-24T21:26:19.727
> 
> 标签：entity-framework, .net-4.0, edmx, dapper

我想`dataSet1.EnforceConstraints = false;`使用 Dapper.Net ORM 和实体框架来做这样的事情。

我在 VS2010 中创建了模型，其中有一个属性：

```
 [EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=false)]
    [DataMemberAttribute()]
    public global::System.String ethnicname
    {
        get
        {
            return _ethnicname;
        }
        set
        {
            OnethnicnameChanging(value);
            ReportPropertyChanging("ethnicname");
            _ethnicname = StructuralObject.SetValidValue(value, false);
            ReportPropertyChanged("ethnicname");
            OnethnicnameChanged();
        }
    } 
```

... 什么时候`value`，`null`我在`StructuralObject.SetValidValue...`. 如何以及在哪里关闭它？

我的数据调用如下所示：

```
 public DAL.Models.PROFILE GetProfile(int profileID)
    {
        using (IDbConnection connection = OpenConnection("MyDBConnectionString"))
        {
            try
            {

                var profiles = connection.Query<DAL.Models.PROFILE>("SELECT * FROM PROFILES WHERE ID=@ID", new { ID = profileID }); // IEnumerable
                var profile = profiles.First<DAL.Models.PROFILE>();

                return profile;
            }
            catch (Exception ex)
            {
                ErrorLogging.Instance.Fatal(ex);
                return null;
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T10:02:15.610

如果您使用基于自动生成`EntityObject`的实体并将字段标记为不可为空（您的数据库使其不可为空），则无法关闭此验证。的第二个参数`SetValidValue`决定是否允许 null。

# php - 包含现有文件会产生 WordPress 的 404 页面

> ID：10745534
> 
> 赞同：0
> 
> 时间：2012-05-24T21:26:59.250
> 
> 标签：php, wordpress, http-status-code-404

我有一个在 WordPress 上运行的网站。在这个站点的文档根目录中，我有一个目录，我在其中测试与我的 WordPress 安装无关的 PHP 脚本。我注意到每当我需要或包含一个确实存在的文件时，我都会收到 404。如果我注释掉 require 语句，一切都很好。起初，这是因为语法错误。但是我清理了它，并且不再在 error_log 文件中得到任何东西。是什么赋予了？

编辑：在我的主要 error_log: 中找到了这个`malformed header from script. Bad header=X-UA-Compatible: ide.php`。我在其他 Apache 服务器上从来没有遇到过这个问题。

以下是有问题的脚本：

ide.php

```
<?php

require_once 'config.php';

if (isset($_SESSION['username'])) {
    if (isset($_POST['command'])) {
        if ($_POST['session'] == '@') {
            session_destroy();
            header('Location: /area51/ide.php');
        } else {
            echo 'None';
        }
    } else {
        $smarty->assign('version', shell_exec("/home1/tylercro/local/python3/bin/python3 -c \"import sys;print('Python', sys.version)\""));
        $smarty->display('ide.tpl');
    }
} else {
    if (isset($_POST['username']) && isset($_POST['password'])) {
        if ($_POST['username'] == 'user' && $_POST['password'] == 'password') {
            $_SESSION['username'] = $_POST['username'];
        }
        header('Location: /area51/ide.php');
    } else {
        $smarty->display('ide-login.tpl');
    }
}

?> 
```

配置文件

```
<?php

error_reporting(E_ALL);

session_start();

if (!headers_sent()) {
    header('X-UA-Compatible: chrome=1');
    header('Content-Type: text/html; charset=UTF-8');
}

require_once 'Smarty-3.1.8/Smarty.class.php';

$smarty = new Smarty();
$smarty->setTemplateDir('Smarty-3.1.8/templates/');
$smarty->setCompileDir('Smarty-3.1.8/templates_c/');
$smarty->setCacheDir('Smarty-3.1.8/cache/');
$smarty->setConfigDir('Smarty-3.1.8/configs/');

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T21:37:56.607

这是一个标题问题。我发送的标头中有一些语法错误。

# javascript - IE8 中的 JavaScript 字符串比较

> ID：10745536
> 
> 赞同：0
> 
> 时间：2012-05-24T21:27:18.780
> 
> 标签：javascript, string, internet-explorer, comparison, string-comparison

我正在尝试比较两个字符串，由于某种原因，结果是“假”。

我已将代码分解为最简单的功能：

```
<script type="text/javascript">
function selectCat(cat) {
    var catName = cat.firstChild.nodeValue;
    alert(catName);
    if(catName.toString() == "Acronyms") {
        alert("True");
    } else {
        alert("False");
    }
}
</script>
</head>

<body>
<ul>
<li onclick="selectCat(this)">Acronyms</li>
</ul>
</body> 
```

这在 Dreamweaver 的 Live View 和 IE8 中运行良好（当我按 F12 进行预览时）。但是，当我将此页面上传到我公司的 Web 内容管理器 (IBM WebSphere Portal) 时，它不再起作用。

我不知道环境之间有什么不同，但这很令人沮丧。任何人都知道为什么它可能不会将类别名称视为字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T22:10:37.403

出于某种原因，IE 在 nodeValue 的末尾包含了一个额外的空格，即您实际得到的是“Acronyms”。

**编辑**：要删除尾随空格，您可以添加

```
if(catName.charAt(catName.length-1) == " "){
    catName = catName.substr(0,catName.length-1);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T22:28:54.500

如果 IE 在 nodeValue 末尾包含一个额外的空格，请尝试 -

```
var catName; 
catName = (catName.toString()).trim(); 
```

然后将其与“Acronyms”进行比较。

# java - Eclipse 刷新

> ID：10745537
> 
> 赞同：2
> 
> 时间：2012-05-24T21:27:21.913
> 
> 标签：java, eclipse, refresh

在Eclipse中，当我刷新项目时，大多数情况下它会以正常速度刷新项目的98％，然后刷新进度卡在98％。

知道为什么会发生这种情况吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T22:31:30.150

这可能是因为你有大文件接近尾声。如果没有任何更改，通常刷新会非常快，因为它只使用文件修改时间，但如果修改了许多文件，或者它们非常大，则可能需要更多时间。

比分析更简单的检查方法是在 Eclipse 发生时获取一些 Eclipse 线程转储，然后您可以轻松查看发生了什么。如果您当时不明白，请将它们附加到您的问题中。

# php - MySQL 查询仅在 IE6 下失败

> ID：10745539
> 
> 赞同：2
> 
> 时间：2012-05-24T21:27:32.957
> 
> 标签：php, mysql, internet-explorer-6

我有一个商店网站，用户可以从显示的产品列表中添加/编辑到购物车。很简单的东西。在我的“添加到购物车”按钮上，（这是由客户请求）弹出一个确认框并询问用户是否想将更多内容添加到他们的购物车中。如果他们不这样做，它会转到购物车页面进行结帐，如果他们确实想添加更多，它只是刷新同一页面。

我遇到的问题是在他们单击确认框中的某些内容并且该页面刷新后，以某种方式查询产品以再次显示它们的 SELECT 查询（它刚刚执行的确切查询）中断......仅在 IE6 中。

查询本身看起来像这样：

```
 $query_Recordset1 = sprintf("SELECT ProductID, Lang, MasterPack, ProductCategory, ProductSubCategory, Restricted1, ProductCode, ProductDesc, UnitsInStock, Image, Chargeable, UnitPrice, PDFName FROM tblInventory WHERE Client='Tenneco' AND InventoryGroup IN($invGroupStr) ORDER BY ProductCategory, ProductSubCategory, ProductDesc ASC LIMIT %s,50", GetSQLValueString($pg, "int")); 
```

`$invGroupStr) AND ProductCategory='%s'`它在支架处折断。我确信 $invGroup 设置了一些东西。

sprintf 之后的查询是这样的：

```
SELECT ProductID, Lang, MasterPack, ProductCategory, ProductSubCategory, 
       Restricted1, ProductCode, ProductDesc, UnitsInStock, Image, 
       Chargeable, UnitPrice, PDFName 
FROM tblInventory 
WHERE 
    Client='Tenneco' AND InventoryGroup IN('A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', '') 
ORDER BY ProductCategory, ProductSubCategory, ProductDesc ASC 
LIMIT 0,50 
```

有什么明显的事情我应该调查吗？这个网站最初是用 PHP4 编写的，而且总体上编码很差（我的任务是从已有的东西中接管它）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T21:35:31.987

查询不在浏览器中运行。*IE不可能*是MySQL 查询失败的原因，因为查询是在*您的*服务器上运行的，而不是在客户端的浏览器上运行。

尝试使用以下命令打印出与*损坏*的查询相关的错误[`mysql_error()`](http://php.net/manual/en/function.mysql-error.php)：

```
$result = mysql_query( $brokenQuery ) or die( mysql_error() ); 
```

然后从那里向后工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T22:36:59.553

原来这是一个愚蠢的错误。当“添加到购物车”执行 ajax 请求时，它会在 NOT www 下执行。域，IE6 将其视为新用户并删除当前用户的会话。然后使 $invGroup 无效，因此查询失败。不知道为什么有人会这样设置。

有一天，我会用适当的 PHP5 重做整个网站……有一天。

感谢@Jonathan Sampson 的帮助。

# java - 通过 JAX RS 公开可变参数或集合参数

> ID：10745540
> 
> 赞同：0
> 
> 时间：2012-05-24T21:27:35.807
> 
> 标签：java, rest, jax-rs

我正在开发一个服务器应用程序，它将从许多不同类型的客户端接收书籍详细信息列表。书籍详细信息列表完全在客户端生成。

示例列表如下：

```
/*
    +-----+----------------+--------------------+-------------+
    |Isbn | Author         | title              |notes        |
    +-----+----------------+--------------------+-------------+
    |02-1 | Stephen King   |Cojo                |blah blah    |
    +-----+----------------+--------------------+-------------+
    |05-3 | JK Rowlings    |Harry Potter        |rubbish      |    
    +-----+----------------+--------------------+-------------+
    |09-5 | Sun Tzu        |The Art of War.     |Interesting  |
    +-----+----------------+--------------------+-------------+
  */  
    public interface Book { }

    public interface ReadingListAPI {
        List<Book> save(Book... books);
    }

    public class ReadingListAPIImpl implements ReadingListAPI {
        @POST
        @Override
        List<Book> save(Book... books) {

        }
    } 
```

`ReadingListAPIImpl.save`是否可以通过 JAX-RS 向客户端公开“ ”方法？客户端需要使用什么格式来发送数据。

我对此进行了一些研究，并相信客户端可以以 XML 格式发送数据，而服务器可以使用 JAXB 来解组数据。然而，这似乎很复杂，我不确定它是否支持接收用户定义类型的列表。
还有其他更简单的方法，例如使用 JSON 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T21:34:30.637

Varargs 实际上是一个变相的数组。所以我认为它将作为元素的集合公开。如果没有，您可以将其替换为`List<Book>`- 无论如何您都会对其进行迭代。

# c# - 对象到字符串数组

> ID：10745542
> 
> 赞同：53
> 
> 时间：2012-05-24T21:27:55.677
> 
> 标签：c#, c#-4.0, c#-3.0

我正在尝试将一个对象（在这里声明为'obj'：对象是数组，原始）转换为字符串数组。

对象可以是任何 uint[]、int16[] 等。

我一直在尝试使用

```
string[] str = Array.ConvertAll<object, string>((object[])obj, Convert.ToString); 
```

当我尝试将未知类型对象转换为 object[] 时，就会出现问题。我一直收到铸造错误。

我做了一次尝试，但失败了，正在使用

```
object[] arr = (object[])obj; 
```

或者

```
IEnumerable<object> list = obj as IEnumerable<object>
object[] arr = (object[])list; 
```

我看到有关转换的值类型和引用类型问题的帖子。

是否有一个简单的代码可以处理转换为 object[] 而不管对象的类型，只要它是一个数组？我试图避免手动处理每种可能的类型转换。

提前致谢

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-05-24T21:30:17.983

您可以使用每个数组都实现的事实`IEnumerable`：

```
string[] arr = ((IEnumerable)obj).Cast<object>()
                                 .Select(x => x.ToString())
                                 .ToArray(); 
```

这将适当地装箱原语，然后将它们转换为字符串。

转换失败的原因是，尽管*引用*类型的数组是协变的，但*值*类型的数组不是：

```
object[] x = new string[10]; // Fine
object[] y = new int[10]; // Fails 
```

铸造只是`IEnumerable`会工作。哎呀，如果你愿意，你可以投到`Array`。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-05-24T21:31:04.667

如果它始终是某种类型（数组、列表等）的集合，那么请尝试转换回普通的旧版本`System.Collections.IEnumerable`并从那里开始

```
string[] str = ((System.Collections.IEnumerable)obj)
  .Cast<object>()
  .Select(x => x.ToString())
  .ToArray(); 
```

这是一个更彻底的实现，它也处理非集合

```
static string[] ToStringArray(object arg) {
  var collection = arg as System.Collections.IEnumerable;
  if (collection != null) {
    return collection
      .Cast<object>()
      .Select(x => x.ToString())
      .ToArray();
  }

  if (arg == null) {
    return new string[] { };
  }

  return new string[] { arg.ToString() };
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2016-08-31T09:09:57.017

我的例子：

```
 public class TestObject
    {
        public string Property1 { get; set; }

        public string Property2 { get; set; }

        public string Property3 { get; set; }
    }

    static void Main(string[] args)
    {
        List<TestObject> testObjectList = new List<TestObject>
        {
            new TestObject() { Property1 = "1", Property2 = "2", Property3 = "3" },
            new TestObject() { Property1 = "1", Property2 = "2", Property3 = "3" },
            new TestObject() { Property1 = "1", Property2 = "2", Property3 = "3" }
        };

        List<string[]> convertedTestObjectList = testObjectList.Select(x => new string[] { x.Property1, x.Property2, x.Property3 }).ToList();
    } 
```

# php - 在 MySQL 中使用 distinct 函数

> ID：10745543
> 
> 赞同：4
> 
> 时间：2012-05-24T21:28:03.303
> 
> 标签：php, mysql, sql, database, distinct

这听起来像是一个奇怪的问题，但我正在尝试使用 distinct 子句来获取数据库中的所有名称，但是我希望名字是唯一的

**表结构**

```
id fname lname 头发颜色
1 约翰·多·布朗
2 鲍勃·西格尔 金发女郎
3 凯文史密斯红
4 鲍勃·德·格林

```

**期望的输出**

```
约翰·多·布朗
鲍勃·西格尔 金发女郎
凯文史密斯红

```

我努力了

```
SELECT fname, lname, haircolor
FROM MainTable
INNER JOIN (select distinct frame from MainTable) as Names
ON MainTable.fname=Names.fname 
```

这没有奏效。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T21:30:34.147

尝试`GROUP BY`改用：

```
SELECT fname, lname, haircolor
FROM yourtable
WHERE id IN
(
    SELECT MIN(id) FROM yourtable GROUP BY fname
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T21:31:21.240

尝试使用[GROUP BY](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html)

```
SELECT fname, lname, haircolor FROM MainTable GROUP BY fname 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T21:49:56.023

尝试这个：

```
SELECT fname,SUBSTRING_INDEX( MAX(CONCAT(lname,'~',haircolor)) , '~', 1 ) lname
 ,SUBSTRING_INDEX(SUBSTRING_INDEX( MAX(CONCAT(lname,'~',haircolor)) , '~', 2 ),'~',-1) haircolor from MainTable 
```

# java - 未知尺寸的面板布局

> ID：10745549
> 
> 赞同：0
> 
> 时间：2012-05-24T21:28:35.490
> 
> 标签：java, jpanel

我有一个 jpanel，我不知道它的大小（由用户决定）

我想在面板中放置 M 个标签（M 在运行时确定），这样每个标签都将居中并且其宽度将为 90%。高度将是绝对的..（每 2 个标签之间会有单独的线）

你建议做热吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T21:35:11.080

尝试使用面向Y_AXIS 的[BoxLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/box.html)来实现。您可以将[JSeparator](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/JSeparator.html)用于线条。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T23:31:41.163

使用 a `GridLayout(0, 1, 0, horizGap)`-- 0, 1 表示 1 列，可变行数，下一个 0 表示您不需要的垂直间隙，以及 horizGap 表示行之间的水平间隙。

然后将其放置在另一个 JPanel 中，该 JPanel 通过 EmptyBorder 在右侧填充。

# visual-studio-2008 - 未找到专门的系统集合

> ID：10745550
> 
> 赞同：2
> 
> 时间：2012-05-24T21:28:55.917
> 
> 标签：visual-studio-2008, .net-3.5, c++-cli

尝试使用 VS 2008 和 .NET 框架 3.5 编译 c++/cli 程序

这些陈述有效：

```
using namespace System::Collections;
using namespace System::Collections::Generic; 
```

但没有出现专门的集合命名空间

```
using namespace System::Collections::Specialized; 
```

我究竟做错了什么？我缺少一些程序集吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T00:17:30.270

不，它主要存在于 System.dll 中，它总是由项目模板添加。未添加任何程序集引用的 Virgin C++/CLI 项目：

![在此处输入图像描述](../Images/e359c8772f0218476679c2a8dc3a8437.png)

# python - 我可以嵌套 virtualenvs 吗？

> ID：10745553
> 
> 赞同：18
> 
> 时间：2012-05-24T21:29:02.453
> 
> 标签：python, virtualenv

可以嵌套 2 个 virtualenvs 吗？

我想要一个基本的 virtualenv，然后是一个更具体的 virtualenv，它可以从基本的 virtualenv 访问所有包，然后拥有自己的。

任何提示表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T22:50:29.520

不，这目前是不可能的。不过，有一个功能请求和一个针对该功能的补丁：

[https://github.com/pypa/virtualenv/issues/33](https://github.com/pypa/virtualenv/issues/33)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T10:01:24.290

将 virtualenv 的 python 脚本作为另一个 virtualenv 的子进程运行时，您可能会遇到麻烦。我发现从子进程 PYTHONPATH 和 BUILDOUT_ORIGINAL_PYTHONPATH 的环境中删除很有用。

# javascript - 阻止 Opera Mobile 勾勒触摸的元素

> ID：10745558
> 
> 赞同：1
> 
> 时间：2012-05-24T21:29:28.593
> 
> 标签：javascript, html, css, opera-mobile

有谁知道如何阻止 Opera Mobile（Windows 模拟器）为触摸的 HTML 元素显示蓝色轮廓？

触摸时出现蓝色轮廓： ![蓝色轮廓](../Images/71e45ed28a95f415aaf8f3f6d0e204b6.png)

我要这个： ![这就是我要的](../Images/c07962801a779655ac1d06d5f4538215.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T02:56:45.380

可能不是您想听到的答案，但目前无法禁用或覆盖蓝色突出显示。正如 Tony318 所说，这是设计使用户能够立即看到他们按下了哪个链接（对于靠近在一起的小按钮/链接尤其重要）。但是，能够覆盖大纲已被记录为功能请求，因此这种行为将来可能会改变。

顺便说一句，这里有一个很好的禁用大纲的通用资源，尽管在这种情况下它不适用于 Opera Mobile：http: [//people.opera.com/patrickl/experiments/keyboard/test](http://people.opera.com/patrickl/experiments/keyboard/test)

# c - 将 select 与线程与 TCP C 程序相结合

> ID：10745561
> 
> 赞同：1
> 
> 时间：2012-05-24T21:29:52.803
> 
> 标签：c, multithreading, select, tcp, client-server

我很困惑：是否可以/建议组合线程并在 fd 上选择？例如：我想制作一个线程化的 tcp 客户端-服务器程序，客户端可以向服务器发送消息，服务器将其传播给所有连接的客户端（客户端可以继续通信）。

我制作了一个服务器-客户端程序，所有客户端在连接时都有一个单独的线程；但我在beej指南中读到“如果你在accept（）调用上阻塞怎么办？你将如何同时接收recv（）数据？“使用非阻塞套接字！”没办法！你不想要成为一个 CPU 猪。然后呢？

在这种情况下，我不明白阻塞意味着什么；因为在我的程序中，当我输入文本并按下输入时，文本会发送到服务器，但为什么他的意思是同时接收数据？当我输入文字时？这怎么可能？我想我很困惑 :p 比我认为这些是处理程序的完全不同的方式但是我没有看到选择提供的优势？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T22:27:34.193

当然可以使用多个调用 的线程`select`，但不是必需的。服务器可以只用一个线程为所有客户端提供服务。如何？一次一个。当事件发生在您提供的集合中的一个套接字上时， 该`select`函数（及其替代品，例如`poll`、等）可以通知您。当一个ing 套接字可以时也会通知你。所以服务器可以只有一个事件循环处理监听和连接的套接字。`epoll``select``listen``accept`

至于优点和缺点是什么，我只是给你一个[C10K问题](http://www.kegel.com/c10k.html)文章的链接。这是一个相当古老的辩论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-16T11:17:10.390

> 在这种情况下，我不明白阻塞意味着什么；因为在我的程序中，当我输入文本并按下输入时，文本会发送到服务器，但为什么他的意思是同时接收数据？

当然可以。例如，您可以`select()`在选择的 fd 上并在其他线程中处理它们（因此持续时间不会阻止可能发生的其他事件`select()`）。

> 在这种情况下，我不明白阻塞意味着什么；因为在我的程序中，当我输入文本并按下输入时，文本会发送到服务器，但为什么他的意思是同时接收数据？

他可能的意思是，当您有一个线程用于接受和接收数据时，您要么阻塞（等待）接受或接收。阻塞意味着您正在等待传入连接（accept）或传入发送数据（receive）。如果您使用非阻塞套接字，如果没有事件发生，它将返回 -1`EWOULDBLOCK`或`EAGAIN errno`。

您可以同时等待`select()`并使用您的监听 fd 和已连接的客户端 fd。然后，您可以同时等待 fd 上的任何事件（新连接、接收到的数据等）

# javascript - 仅跟踪 iframe 历史记录

> ID：10745564
> 
> 赞同：5
> 
> 时间：2012-05-24T21:30:15.863
> 
> 标签：javascript, html, iframe

我有一个包含 iframe 的页面，我只想跟踪 iframe 的历史记录。我尝试像这样使用历史对象：

```
<!DOCTYPE html>
<html>
    <head>
        <title></title>
        <script type="text/javascript">
        function checkFrameHistory() {
            alert(window.frames["test2"].history.length);
        }

        function checkThisHistory() {
            alert(history.length);
        }
        </script>
    </head>
    <body>

        <iframe name="test2" src="test2.html"></iframe>

        <div>
            <input type="button" onclick="checkFrameHistory()" value="Frame history"/>
            <input type="button" onclick="checkThisHistory()" value="This history"/>
        </div>

    </body>
</html> 
```

test2.html

```
<!DOCTYPE html>
<html>
    <head>
        <title></title>
        <script type="text/javascript">
        function checkMyHistory() {
            alert(history.length);
        }
        </script>
    </head>
    <body>
    <div>
        Test2
    </div>

    <div>
        <input type="button" onclick="checkMyHistory()" value="My history"/>
    </div>

    </body>
</html> 
```

但它实际上给了我包括父窗口在内的历史。

例如，我去了主窗口中的另一个站点，然后又回到了我的 iframe 测试站点。两者都`window.frames["test2"].history.length`通过`history.length`将长度增加 2 给了我相同的计数。

我做错了吗？有没有办法只跟踪 iframe 历史记录？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T16:31:07.557

Chrome 在窗口基础上管理历史记录；不在单独的框架上。这种行为可能是您的问题的原因。

不知道它是否适用于所有浏览器的默认行为。

编辑：您必须维护您的导航历史服务器端。如另一个答案中所述，在主窗口上保留一个数组在您还使用父窗口导航时不起作用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-04T12:43:30.070

有一种简单的方法可以做到这一点，当然前提是 iframe 内容是同一个域。

从您绑定到iframe 窗口对象的`beforeUnload`或事件的父级。`load`在事件的回调处理程序中，您只需按照`locations.push(getElementById("iframe").contentWindow.location.href)`where 位置当然是父范围中先前定义的数组来做一些事情。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-04T18:33:31.310

使用它来访问 iframe 的历史记录

```
document.getElementById("test2").contentWindow.history.length 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-29T15:16:50.533

[由于同源策略](https://developer.mozilla.org/en/Same_origin_policy_for_JavaScript)，您不太可能访问与框架关联的任何对象。

您是否尝试将页面本身和 iframe 上的域设置为相等？例如

```
//somewhere on your page in a script tag
document.domain = "your-top-level-domain.com"; 
```

这应该向浏览器发出信号，表明页面相互信任，并且应该可以访问它们的内部状态

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-05T06:14:43.390

If the frame contains **contentWindow**, you can use **frame.contentWindow.history**.

But not all browsers support this property. If not, the frame's location should be stored in some variables. Bind event handler on your frame onload event like below(using jquery)

```
var frameHistory = [];
$(document).ready(function(){
    var frame = window.frames["test2"];
    $.bind(frame, "onload", function(){ //store location when frame loads
        frameHistory.push(frame.window.location.href);
    }
}); 
```

And in your button click event handler:

```
alert(frameHistory.length); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-05T13:36:29.597

**只要您可以访问这两个域，就有**可能击败 SOP。**您可以使用辅助 IFRAME 从 BODY 传递 onchange 事件。**

 **这篇文章应该非常有帮助： [Resizing an iframe based on content](https://stackoverflow.com/questions/153152/resizing-an-iframe-based-on-content)**

# php - 在 SQL 同步期间检测主/客户端是否删除了条目

> ID：10745566
> 
> 赞同：0
> 
> 时间：2012-05-24T21:30:26.190
> 
> 标签：php, mysql, sql, phpmyadmin, xml-rpc

我有两个网站，一个主客户端，一个~~从~~ *客户端*（必须是 PC）。每个都有一个 SQL 数据库。我正在开发一个同步两者的功能，但我需要检测一个条目是否已被删除，而不是另一个。例子：

```
Master: Apple, Orange, Banana
Client: Apple, Orange, Banana 
```

然后主用户删除 Orange。一个简单的实现会将 Orange 从客户端传播回 Master。如何设置它以便主服务器或客户端可以删除一个条目，并且它将在另一端被删除？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T21:45:40.140

实现自己的多主复制方案将非常困难。但对您来说，好消息是您不必这样做。[Mysql 的多主复制](http://dev.mysql.com/doc/refman/5.5/en/mysql-cluster-replication-multi-master.html)已经可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T21:40:38.270

如果您正在编写[复制服务](http://en.wikipedia.org/wiki/Replication_%28computing%29#Database_replication)而不使用数据库提供程序的内置系统（您没有说明您正在使用哪个数据库服务器，但我猜是 MS SQL Server），那么您[最好](http://weblogs.asp.net/jgalloway/archive/2008/01/27/adding-simple-trigger-based-auditing-to-your-sql-server-database.aspx)在您的数据库，然后让您的服务来回发送审计行。

这样您就可以知道何时发生了哪个编辑，并能够解析当前的数据集。

老实说，如果您可以使用“现成的”复制系统，那么编写自己的复制系统将会很困难。

# c - 多维数组和地址

> ID：10745578
> 
> 赞同：0
> 
> 时间：2012-05-24T21:31:02.693
> 
> 标签：c

我在 c 中编写了以下代码只是为了检查代码是否会中断：

```
int main(void)
{
    int A [5] [2] [3];
    printf("%d\n\n", A[6]);
    printf("%d\n\n", &A[6][0][0]);
    system("pause");
} 
```

现在，代码没有中断，这是我没想到的。当我们声明一个多维数组：`int A [5][2][3]`时，这在概念上是否意味着 A 在其第一级是一个由 5 个元素 ( 0 - 4 ) 组成的一维数组，并且该数组的每个元素本身就是一个由 2 个元素组成的一维数组并且该数组的每个元素都是 3 个元素的一维数组？如果这个概念是正确的，那怎么可能 `A[6][0][0]`存在——因为在第一级我们只有 5 个元素（从 0 开始）。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T21:32:52.990

您正在访问数组外的位置，没有`A[6]`. 这是未定义的行为，任何事情都可能发生。

请注意，这`A[5]`是一个定义明确的位置（在数组末尾之后），因此获取指向它的指针是合法的，但尝试访问该指针是不合法的。但是，获取指向`A[6]`或任何其他更大索引的指针是完全未定义的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T21:37:08.300

C 不做数组边界检查。对于`int A[4]`，将其`A[5]`视为指针算术：`*(A + 5)`。

即使`A`只用 5 个元素 (0-4) 声明，C 也允许您使用`A`.

此访问的结果是未定义的。如果你阅读`A[5]`，你可能会得到垃圾；如果你写`A[5]`ie `A[5] = 13`，你可能会破坏另一个分配的内存块。

[wiki 文章](http://en.wikipedia.org/wiki/Pointer_arithmetic#C_arrays)是理解这一点的一个很好的开始，但我建议你拿起一份[K&R](http://en.wikipedia.org/wiki/The_C_Programming_Language)的副本，阅读它，然后做所有的练习。

# ruby - Ruby - 访问模块和类中的函数

> ID：10745582
> 
> 赞同：0
> 
> 时间：2012-05-24T21:31:11.237
> 
> 标签：ruby

一个基本问题 - 如何访问模块内的函数，然后是另一个模块，然后是一个类。

在宝石中 -

```
module Handsoap
  module Http

    # Represents a HTTP Request.
    class Request
      attr_reader :url, :http_method, :headers, :body, :username, :password, :trust_ca_file, :client_cert_file, :client_cert_key_file
      attr_writer :body, :http_method

      def set_trust_ca_file(ca_file)
         @trust_ca_file = ca_file

      end
    end
  end
end 
```

在我的文件中，我正在尝试这个 -

```
Handsoap:Http::Request.set_trust_ca_file('/etc/ssl/certs/ca-certificates.crt')

:Http is not a class/module (TypeError) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T04:36:29.463

我相信检查的答案是不正确的。set_trust_ca_file() 方法不是类方法。它是设置和实例变量，所以它是一个实例方法。

您需要在 Request 类的实例上调用 set_trust_ca_file() ：

```
var = Handsoap::Http::Request.new
var.set_trust_ca_file(ca_file) 
```

您还可以完全消除该方法，因为 attr_accessor 语句将使实例变量 @trust_ca_file 可从类外部设置：

```
var = Handsoap::Http::Request.new
var.trust_ca_file = "new_value" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T21:31:57.120

你有一个错字。应该

```
Handsoap::Http::Request 
```

此外，您的方法应该是类实例方法

```
def self.set_trust_ca_file(ca_file)
  # ...
end 
```

# javascript - 如何使用html表单验证来显示图片

> ID：10745586
> 
> 赞同：0
> 
> 时间：2012-05-24T21:31:40.853
> 
> 标签：javascript, html, validation, forms

我创建了一个 HTML 表单，其中有许多不同的文本框。我想要做的是创建一个 javascript 脚本，该脚本将在其中没有文本的框旁边显示小图像。这是我想做的一个例子：

![在此处输入图像描述](../Images/4099f8894c508bcd50163c71874fcad2.png)

目前我已经创建了以下脚本，它可以根据需要验证表单，但是它只显示一个弹出框，因为我不知道如何显示图像/文本。这是我的代码：

```
 <script type="text/javascript">
    function validateForm()
    {
        var x=document.forms["email_form"]["name"].value;
        if (x==null || x=="")
        {
            alert("Please enter your name in the box provided.");
            return false;
        }

        var x=document.forms["email_form"]["email"].value;
        if (x==null || x=="")
        {
            alert("Please enter your e-mail address in the box provided.");
            return false;
        }

        var x=document.forms["message-title"]["name"].value;
        if (x==null || x=="")
        {
            alert("Please enter a message title in the box provided.");
            return false;
        }

        var x=document.forms["email_form"]["message"].value;
        if (x==null || x=="")
        {
            alert("Please enter your message in the box provided.");
            return false;
        }
    }
    </script> 
```

请有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T21:44:30.333

您可以在输入元素旁边放置错误图像元素，但将显示属性隐藏在 css 中。您可以为链接到其输入元素的每个错误图像设置一个 id。例如，对于电子邮件输入，除了它之外还有和 img 元素。有一个像这样的初始 css ->

```
#email_form img{
    display: none;
} 
```

然后在您的javascript中，只需显示隐藏的图像 -

```
 var x=document.forms["email_form"]["email"].value;
    if (x==null || x=="")
    {
        var error_image = document.getElementById('error_email');
        error_image.style.display = 'inline';
        alert("Please enter your e-mail address in the box provided.");
        return false;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T21:48:49.957

在你的 CSS 中定义一个类

```
.validateimage
{
 display:none;
} 
```

并将该类分配给所有图像标签，例如

```
<img class="validateimage" id="image1">
.
.
. 
```

然后

```
 <script type="text/javascript">
        function validateForm()
        {
            var x=document.forms["email_form"]["name"].value;
            if (x==null || x=="")
            {
                document.getElementById('image1').style.display='block';
                return false;
            }

            var x=document.forms["email_form"]["email"].value;
            if (x==null || x=="")
            {
                document.getElementById('image2').style.display='block';

                return false;
            }

            var x=document.forms["message-title"]["name"].value;
            if (x==null || x=="")
            {
                document.getElementById('image3').style.display='block';
                return false;
            }

            var x=document.forms["email_form"]["message"].value;
            if (x==null || x=="")
            {
                document.getElementById('image4').style.display='block';
                return false;
            }
        }
        </script> 
```

# html - 出现在 Firefox 中的底部滚动条

> ID：10745589
> 
> 赞同：0
> 
> 时间：2012-05-24T21:31:49.727
> 
> 标签：html, css, firefox, layout

除了在 Firefox 中出现底部滚动条外，我网站上的所有内容都显示良好。我查看了css，找不到任何太宽或边缘被推到右边的东西。关于做什么的任何建议。该网站是[eagleview.it](http://eagleview.it)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T21:58:30.287

我认为更改`overflow: auto`为`overflow-x: hidden`容器应该可以解决问题。我使用 Firebug 完成了它，它对我有用。

```
.container {
    background-color: #D5D5D5;
    bottom: 0;
    left: 0;
    overflow-x: hidden;
    position: fixed;
    right: 0;
    top: 0;
    width: 100%;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T22:13:13.863

尝试设置：`overflow-x:hidden;`在您的容器 DIV 上。

此方法将允许您的页面继续垂直滚动。

# python - 不允许 str.split() 反转字符串的字序

> ID：10745593
> 
> 赞同：5
> 
> 时间：2012-05-24T21:32:11.197
> 
> 标签：python, string

这样做的pythonic方法是什么？

从这个：'This is a string to try' 到 this：'try to string a is This'

我的第一个猜测是：

```
for w in 'This is a string to try'.split(' ')[::-1]:
    print w, 
```

但*str.split()*是不允许的。然后我想出了这个：

```
def reverse_w(txt):
    tmp = []
    while (txt.find(' ') >= 0):
        tmp.append(txt[:txt.find(' ')])
        txt = txt[txt.find(' ')+1:]
    if (txt.find(' ') == -1):
        tmp.append(txt)
   return tmp[::-1] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T21:41:43.840

```
def reverse(sentence):
sentence = 'This is a string to try'
    answer = ''
    temp = ''
    for char in sentence:
        if char != ' ':
            temp += char
        else:
            answer = temp + ' ' + answer
            temp = ''
    answer = temp + ' ' + answer
    return answer.rstrip(' ') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T22:42:45.743

这是一个 O(n) 实现（不使用连接 via `+`）：

```
def reverse_w(txt):
    words = []
    word = []

    for char in txt:
        if char == ' ':
            words.append(''.join(word))
            word = []
        else:
            word.append(char)
    words.append(''.join(word))

    return ' '.join(reversed(words)) 
```

这从字面上实现了拆分算法——手动将字符串拆分为单词，然后反转单词列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T22:40:50.253

```
>>> import re
>>> s = 'This is a string to try'
>>> z = re.split('\W+', s)
>>> z.reverse()
>>> ' '.join(z)
'try to string a is This' 
```

按要求提供一个班轮（'import re' 位除外）：

```
>>> reduce(lambda x, y: u'%s %s' % (y, x), re.split('\W+', 'This is a string to try'))
u'try to string a is This' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T21:36:04.813

创建一个向后遍历字符串的循环，使用字符串索引来获取每个字符。请记住，在 Python 中，您可以使用以下命令访问字符串：

```
s = "Strings!"
sOne = s[1] // == "t" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-07T07:13:29.403

在某些采访中，您在使用 Python 时会受到限制，例如不要使用`reversed`、`[::-1]`或`.split()`.

在这些情况下，下面的代码`Python 2.7`可以工作（从上面 Darthfett 的回答中采用）：

```
def revwords(sentence):
    word = []
    words = []

    for char in sentence:
        if char == ' ':
            words.insert(0,''.join(word))
            word = []
        else:
            word.append(char)
    words.insert(0,''.join(word))

    return ' '.join(words) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-12-16T10:51:08.377

使用重新

```
import re
myStr = "Here is sample text"
print " ".join(re.findall("\S+",myStr)[::-1]) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-12-16T11:16:08.477

如果允许 string.partition 作为替换：

```
def reversed_words(s):
    out = []
    while s:
        word, _, s = s.partition(' ')
        out.insert(0, word)
    return ' '.join(out) 
```

否则回退到 string.find：

```
def reversed_words(s):
    out = []
    while s:
        pos = s.find(' ')
        if pos >= 0:
            word, s = s[:pos], s[pos+1:]
        else:
            word, s = s, ''
        out.insert(0, word)
    return ' '.join(out) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-03-07T16:43:45.833

不使用任何内置方法的最简单程序：

```
def reverse(sentence):
    answer = ''
    temp = ''
    for char in sentence:
        if char != ' ':
            temp += char
            continue
        rev = ''
        for i in range(len(temp)):
            rev += temp[len(temp)-i-1]
        answer += rev + ' '
        temp = ''
    return answer + temp
reverse("This is a string to try") 
```

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2012-05-24T21:35:17.503

编辑：好吧，如果`str.split`允许的话，就是这样 ;-) 或者，您当然可以编写自己的 split 版本。

```
>>> s = 'This is a string to try'
>>> r = s.split(' ')
['This', 'is', 'a', 'string', 'to', 'try']
>>> r.reverse()
>>> r
['try', 'to', 'string', 'a', 'is', 'This']
>>> result = ' '.join(r)
>>> result
'try to string a is This' 
```

分为三个步骤：按空格分割，用单词反转列表，将字符串列表连接成一个字符串，中间有空格。

# python - 是什么导致通过元类包装的方法在调用时忘记自我？

> ID：10745595
> 
> 赞同：3
> 
> 时间：2012-05-24T21:32:13.757
> 
> 标签：python, metaclass

下面的代码可以让我跟随元类如何工作的操作。但是，当第 21 和 22 行未注释时，`Metaclass.__init__`将失败，因为`self`参数未传递给包装的方法。是什么导致`VerboseFunction.__call__`没有将所需的`Metaclass`实例传递给初始化程序？

```
import sys, types

def sign(prefix, argcount=None):
    f = sys._getframe(1)
    print('{}.{}({})\n'.format(prefix, f.f_code.co_name,
        ', '.join(repr(f.f_locals[name])
        for name in f.f_code.co_varnames[:f.f_code.co_argcount
        if argcount is None else min(argcount, f.f_code.co_argcount)])))

class VerboseMetaclass(type):

    def __new__(cls, name, bases, classdict):
        sign('VerboseMetaclass')
        for key in sorted(classdict):
            classdict[key.encode()] = value = classdict.pop(key)
            classdict[key] = cls.wrap('{}.{}'.format(name, key), value)
        return super().__new__(cls, name, bases, classdict)

    def wrap(key, value):
        sign('VerboseMetaclass')
##        if isinstance(value, types.FunctionType):
##            return VerboseFunction(key, value)
        return value

class VerboseFunction:

    def __init__(self, name, func):
        vars(self).update(locals())

    def __call__(self, *args, **kwargs):
        if self.name.endswith('.__init__'):
            print('SPECIAL !!!')
        name = self.call(args, kwargs)
        print('[ -> ] {!s}\n'.format(name))
        try:
            value = self.func(*args, **kwargs)
            print('[ <- ] {!s} [return {!r}]\n'.format(name, value))
            return value
        except:
            value = sys.exc_info()[1]
            print('[ <- ] {!s} [raise {!r}]\n'.format(name, value))
            raise

    def call(self, args, kwargs):
        args = tuple('{!r}'.format(item) for item in args)
        kwargs = tuple('{!s}={!r}'.format(key, kwargs[key])
                       for key in sorted(kwargs))
        return '{}({})'.format(self.name, ', '.join(args + kwargs))

class Metaclass(type, metaclass=VerboseMetaclass):

    @classmethod
    def __prepare__(metacls, name, bases):
        sign('Metaclass')
        return super().__prepare__(name, bases)

    def __new__(cls, name, bases, classdict):
        sign('Metaclass')
        for key, value in {'__new__': cls.new, '__init__': cls.init}.items():
            if key in classdict:
                classdict[key.encode()] = classdict[key]
                classdict[key] = value
        return super().__new__(cls, name, bases, classdict)

    def __init__(self, name, bases, classdict):
        sign('Metaclass')
        return super().__init__(name, bases, classdict)

    def __call__(self):
        sign('Metaclass')
        return super().__call__()

    def new(cls):
        sign('Metaclass')
        return vars(cls)[b'__new__'](cls)

    def init(self):
        sign('Metaclass')
        return vars(self.__class__)[b'__init__'](self)

class Test(metaclass=Metaclass):

    def __new__(cls):
        sign('Test')
        return super().__new__(cls)

    def __init__(self):
        sign('Test')
        return super().__init__()

    def run(self):
        sign('Test')

Test().run() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T13:19:20.850

`VerboseMetaclass`可以修改类，也`VerboseFunction`可以删除类。`VerboseMetaclass.wrap`应作如下修改，并`wrap_function`应加以补充。

```
@classmethod
def wrap(cls, key, value):
    sign('VerboseMetaclass')
    if isinstance(value, types.FunctionType):
        return cls.wrap_function(key, value)
    return value

def wrap_function(name, func):
    sign('VerboseMetaclass')
    @functools.wraps(func)
    def verbose_function(*args, **kwargs):
        args_str = tuple(repr(item) for item in args)
        kwargs_str = tuple('{!s}={!r}'.format(*pair)
                           for pair in sorted(kwargs.items()))
        signature = '{}({})'.format(name, ', '.join(args_str + kwargs_str))
        print('[ -> ] {}\n'.format(signature))
        try:
            value = func(*args, **kwargs)
            print('[ <- ] {!s} [return {!r}]\n'.format(signature, value))
            return value
        except:
            value = sys.exc_info()[1]
            print('[ <- ] {!s} [raise {!r}]\n'.format(signature, value))
            raise
    return verbose_function 
```

* * *

**编辑：**此代码的完成的第二稿可以在下面看到。此示例的目的是观察创建、实例化和监视类及其实例所涉及的“机器”。大部分代码也是自我监控的（除了`VerboseMetaclass`），因此可以看到代码本身是如何运行的。通过将类的元类设置为`Metaclass`，您自己的类及其实例也将打印出监控消息。该`Test`课程提供了一个示例。

```
import types, functools, sys

class VerboseMetaclass(type):

    def __new__(cls, name, bases, classdict):
        for key in sorted(filter(
            lambda name: isinstance(name, str), classdict)):
            classdict[key] = cls.wrap('{}.{}'.format(name, key), classdict[key])
        return super().__new__(cls, name, bases, classdict)

    @classmethod
    def wrap(cls, name, value):
        if isinstance(value, types.FunctionType):
            return cls.wrap_function(name, value)
        if isinstance(value, classmethod):
            return classmethod(cls.wrap_function(name, value.__func__))
        if isinstance(value, staticmethod):
            return staticmethod(cls.wrap_function(name, value.__func__))
        try:
            return VerboseData(name, value)
        except NameError:
            return value

    def wrap_function(name, func):
        @functools.wraps(func)
        def verbose_function(*args, **kwargs):
            args_str = tuple((object.__repr__(item)
                              if isinstance(item, VerboseData)
                              else repr(item)) for item in args)
            kwargs_str = tuple('{!s}={!r}'.format(*pair)
                               for pair in sorted(kwargs.items()))
            signature = '{}({})'.format(name, ', '.join(args_str + kwargs_str))
            print('[ -> ] {}\n'.format(signature))
            try:
                value = func(*args, **kwargs)
                print('[ <- ] {!s} [return {!r}]\n'.format(signature, value))
                return value
            except:
                value = sys.exc_info()[1]
                print('[ <- ] {!s} [raise {!r}]\n'.format(signature, value))
                raise
        return verbose_function

class VerboseData(metaclass=VerboseMetaclass):

    def __init__(self, name, value):
        vars(self).update(locals())

    def __repr__(self):
        return repr(self.value)

    def __get__(self, instance, owner):
        value = self.value
        if isinstance(value, (property, VerboseData)):
            value = value.__get__(instance, owner)
        print('[ get ] {!s} = {!r}\n'.format(self.name, value))
        return value

    def __set__(self, instance, value):
        print('[ set ] {!s} = {!r}\n'.format(self.name, value))
        if isinstance(self.value, (property, VerboseData)):
            self.value.__set__(instance, value)
        else:
            self.value = value

    def __delete__(self, instance):
        print('[ XX ] {}\n'.format(self.name))
        if isinstance(self.value, (property, VerboseData)):
            self.value.__delete__(instance)
        else:
            del self.value

    def __iter__(self):
        return iter(self.value)

class Metaclass(VerboseMetaclass, metaclass=VerboseMetaclass):

    @classmethod
    def __prepare__(metacls, name, bases):
        return super().__prepare__(name, bases)

    def __new__(cls, name, bases, classdict):
        for key, value in {'__new__': cls.new, '__init__': cls.init}.items():
            if key in classdict:
                classdict[key.encode()] = classdict[key]
                classdict[key] = value
        return super().__new__(cls, name, bases, classdict)

    def __init__(self, name, bases, classdict):
        return super().__init__(name, bases, classdict)

    def __call__(self, *args, **kwargs):
        return super().__call__(*args, **kwargs)

    def new(cls, *args, **kwargs):
        for base in cls.__mro__:
            try:
                return vars(base)[b'__new__'](cls, *args, **kwargs)
            except KeyError:
                pass
        return object.__new__(cls, *args, **kwargs)

    def init(self, *args, **kwargs):
        for base in self.__class__.__mro__:
            try:
                return vars(base)[b'__init__'](self, *args, **kwargs)
            except KeyError:
                pass
        return object.__init__(self)

if __name__ == '__main__':
    class Test(metaclass=Metaclass):

        def __new__(cls):
            return super().__new__(cls)

        def __init__(self):
            return super().__init__()

        def run(self):
            pass

    Test().run() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T00:13:21.277

您只是迷失在自己设计的迷宫中，无论是那个人还是我 :)

您的错误可以建模为：

```
class VerboseFunction:

    def __init__(self, name, func):
        self.name, self.func = name, func

    def __call__(self, *args, **kwargs):
        return self.func(*args, **kwargs)

class Metaclass:

    def __init__(self):
        pass

    # Comment out the line below
    __init__ = VerboseFunction('Metaclass.__init__', __init__)

print(Metaclass()) 
```

这意味着您`Metaclass.__init__()`直接调用而没有 self 实例。

# logging - 企业图书馆

> ID：10745598
> 
> 赞同：0
> 
> 时间：2012-05-24T21:32:22.843
> 
> 标签：logging, enterprise-library

我已将日志记录配置为在滚动日志文件和事件日志中完成。但是，如果一个失败，第二个也不会成功。有没有办法可以配置 EntLib 在失败之前尝试两者？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T08:00:08.507

处理跟踪侦听器的逻辑深入到企业库的实现中，因此没有内置的配置方式。

一种替代方法是下载源代码并进行所需的更改，重新构建并使用该自定义版本的企业库。

另一种方法是使用 Unity 注入自定义代码，以便在发生错误时添加额外的逻辑来处理多个跟踪侦听器。您必须重新创建大部分企业库逻辑，但不必直接修改企业库源。[您可以在http://randylevy.wordpress.com/2012/04/04/enterprise-library-logging-extensions-part-2/](http://randylevy.wordpress.com/2012/04/04/enterprise-library-logging-extensions-part-2/)找到后一种方法的完整详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T17:12:06.243

日志记录块根据类别检测故障，而不是跟踪侦听器。因此，如果某个类别中的一个跟踪侦听器失败，则该类别中的所有跟踪侦听器都不会从该点开始运行。

你最好的选择是将两个听众分成不同的类别。

# .net - .net 4.5 是否与 .net 4.0 并行工作？

> ID：10745600
> 
> 赞同：35
> 
> 时间：2012-05-24T21:32:29.343
> 
> 标签：.net, .net-4.0, .net-4.5

我有兴趣安装 .NET 4.5。

但我听说这是就地升级。

由于我公司的用户使用的是 Windows XP。[我无法发布任何使用 .NET 4.5 的客户端应用程序。](http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/2723735-make-net-4-5-work-on-any-os-that-supports-4-0)

我知道我可以在编写代码时以 .net 4.0 为目标，但是，如果我安装 .net 4.5，是否存在在我的机器上运行而无法在 Windows XP 机器（只有 .net 4.0）上运行的风险？

（顺便说一下，我看了但没有看到有人问过这个问题。如果有人问过，请指点我，我会尝试删除这个问题。）

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-25T06:50:45.500

是的，存在您描述的那种风险。.NET 4.0 接口没有改变，因此如果您以 .NET 4.0 为目标，您的程序将在带有 .NET 4.0 的 XP 上编译和运行，但 .NET 4.0 的 .NET 4.5 实现也包含错误修复。如果您依赖的 .NET Framework 没有错误，并且 XP 唯一可用的 .NET Framework 有错误，那么您的程序将会遇到这些错误。我在 Entity Framework 中遇到过这种情况，但也可能有其他错误修复。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T18:27:47.193

我在 WPF 论坛上问了这个问题，得到的答案与@hvd 给出的答案基本相同。

[http://social.msdn.microsoft.com/Forums/en/wpf/thread/c05a8c02-de67-47a9-b4ed-fd8b622a7e4a](http://social.msdn.microsoft.com/Forums/en/wpf/thread/c05a8c02-de67-47a9-b4ed-fd8b622a7e4a)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-26T10:36:39.373

接受的答案非常相关，但让我添加一个示例，说明在 4.5+ 机器上编译的 4.0 目标不如具有固定错误的 4.0 有用。

如果您`ComReference`的项目中有任何项目，它们将从构建机器上的 .NET 4.5 调用`tlbimp.exe`。这可能会导致您的软件包含引用的包装器，例如，`System.Reflection.MethodInfo.CreateDelegate(System.Type)`仅存在于 .NET 4.5 中的方法。你会`MissingMethodException`在 WinXP 机器上得到一个。

我在使用`ComAdmin`命名空间时发生了这种情况，命名空间是用于访问 COM+ 目录的 COM 对象，但我怀疑问题可能更广泛。

# html - 如何将 div 附加到另一个的底部，以便内容可滚动

> ID：10745601
> 
> 赞同：0
> 
> 时间：2012-05-24T21:32:34.207
> 
> 标签：html, css

好的，所以基本上我有：

```
<div style="overflow-x:scroll">
    <div class="content">
        <div class="text"></div>
        <div class="seperator"></div>
    </div>
</div> 
```

我想将底部 div（它基本上是一种水平线）放在内容 div 的底部

我已经尝试`position: absolute`嵌入一个`position: relative`div 标签，但是因为顶部 div 是可滚动的，所以当我滚动时分隔符保持固定

我将如何完成这项工作（我必须在`class=content`div 中使用分隔符，这样它就不会破坏我为它设置的背景

编辑：好的，所以我的分隔符有一些阴影和东西，所以我需要它与内容重叠，所以我需要某种绝对定位，但不是页面，'top div'

有没有办法相对定位它，所以它总是在父 div 的底部？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T22:04:59.990

Change this:

```
.sep {
 border-bottom: 4px solid rgba(0,0,0,0.5)   
 position: absolute;
    bottom: 0;
}​ 
```

To this:

```
.sep {
 border-bottom: 4px solid rgba(0,0,0,0.5);
}​ 
```

If I am not understanding your question please feel free to correct me.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T21:34:07.243

```
#top-div { position:relative; /* fixed height or width */ }
#bot-div { position:absolute; bottom:0 } 
```

# wpf - DataGrid 没有数据时缺少空白行

> ID：10745607
> 
> 赞同：1
> 
> 时间：2012-05-24T21:32:48.450
> 
> 标签：wpf, datagrid

我正在研究 WPF，我正在设计一个包含数据网格的控件，到目前为止一切顺利。

但是刚刚发生了一些奇怪的事情：如果我在数据网格中显示一行或多行，数据网格最后会显示用于添加新行的空白行，正常情况下，但是如果数据网格中没有行，则空白行也没有显示！

所以，我需要我的数据网格始终在末尾有空白行，无论是否有数据。

我已经尝试过使用这些属性`CanUserAddRows`，`IsReadOnly`但正如我之前所说，它仅在有一行或多行时才有效。

有谁知道如何实现这一目标？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T21:48:31.103

你的意思是空行吗？看看[wpf datagrid空白行缺失的答案](https://stackoverflow.com/questions/1466951/wpf-datagrid-blank-row-missing "wpf datagrid空白行丢失")

这个基本设置确实显示了一个空白行（即使绑定的 ItemsSource 没有数据）

XAML

```
<Window x:Class="Demo.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525"
    DataContext="{Binding RelativeSource={RelativeSource Self}}"
    >
<Grid>
    <DataGrid ItemsSource="{Binding Items}">
        <!--Must define columns if you need columns before bound collection has data-->
        <DataGrid.Columns>
            <DataGridTextColumn Header="Property"  Binding="{Binding Path=MyProperty}">   </DataGridTextColumn>
        </DataGrid.Columns>
    </DataGrid>
</Grid>
</Window> 
```

背后的代码

```
public class Data
{
    public Data(string value) { MyProperty = value; }
    public Data() { }  // Must have default constructor
    public String MyProperty { get; set; }
}

/// <summary>
/// Interaction logic for MainWindow.xaml
/// </summary>
public partial class MainWindow : Window
{        
    List<Data> _items = new List<Data>(); 
    public List<Data> Items
    {
        get { return _items; }
    }

    public MainWindow()
    {
        InitializeComponent();
   } 
```

# android - 我的 onResume() 抛出 NullPointerException

> ID：10745618
> 
> 赞同：0
> 
> 时间：2012-05-24T21:34:13.723
> 
> 标签：android, onresume, onpause

我正在读取加速度计读数以捕捉摇晃手机的用户。当用户摇动手机时，我想设计它来做一些事情。它工作正常，但我输入了一个 onPause() 方法，因为当用户不在应用程序中时，我不需要加速度计检测任何晃动运动，因为这会产生不希望的结果。所以在 onPause() 中，我从 SensorManager 中取消注册加速度计。

我希望在 onResume() 中我可以重新注册 SensorManager，然后继续我的业务。显然，它并不完全那样工作。我已经阅读了文档，老实说，我无法弄清楚发生了什么。

代码：

我声明全局变量sensorMgr：

```
private SensorManager sensorMgr; 
```

然后我将它注册到加速度计：

```
sensorMgr = (SensorManager) getSystemService(SENSOR_SERVICE);

    // Detect if device has accelerometer
    boolean accelSupported = sensorMgr.registerListener(this,
            SensorManager.SENSOR_ACCELEROMETER,
            SensorManager.SENSOR_DELAY_GAME);

    if (!accelSupported) {
        // No accelerometer on this device
        sensorMgr.unregisterListener(this,
                SensorManager.SENSOR_ACCELEROMETER);
    }
    sensorMgr.registerListener(this, SensorManager.SENSOR_ACCELEROMETER,
            SensorManager.SENSOR_DELAY_GAME); 
```

暂停（）：

```
protected void onPause() {
    if (sensorMgr != null) {
        sensorMgr.unregisterListener(this,
                SensorManager.SENSOR_ACCELEROMETER);
        sensorMgr = null;
    }
    super.onPause();
} 
```

onResume():

```
protected void onResume() {
    sensorMgr.registerListener(this, SensorManager.SENSOR_ACCELEROMETER,
        SensorManager.SENSOR_DELAY_GAME);
    super.onResume();
} 
```

错误：

```
05-24 14:35:54.058: E/AndroidRuntime(16783): java.lang.RuntimeException: Unable to resume activity : java.lang.NullPointerException 
```

我非常感谢你们可以提供的任何帮助，并提前感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T21:37:37.457

`sensorMgr`到达时为 null `onResume()`，因为您在`onPause()`方法中将其强制设置为 null 。在调用之前重新初始化`sensorMgr`( ) 。`getSystemService(...)``registerListener()`

# facebook - 像门一样处理 Facebook 上的用户

> ID：10745625
> 
> 赞同：0
> 
> 时间：2012-05-24T21:34:35.193
> 
> 标签：facebook, facebook-like, facebook-apps, facebook-page

我正在编写一个类似门的 facebook，这是我的配置的屏幕截图：[http ://www.kreatoo.com/rav/facebook_info.png](http://www.kreatoo.com/rav/facebook_info.png)

我需要签名请求 ($facebook->getSignedRequest()) 以了解用户是否喜欢此页面，并且我只有第一次拥有此信息。如果我单击链接，我会丢失此信息..

第二次，当我登录我的用户（使用 $facebook->getLoginUrl()）时，facebook 重定向到服务器（www.vibrantmarketing.ca/...）而不是应用程序（https://www.facebook.com /coppertone/app_432377713445313..).. 我尝试使用“redirect_uri”或“next”选项，但没有...

谢谢大家的帮助

PS：对于感兴趣的应用程序是：[https ://www.facebook.com/pages/TestCactOos/255835411190164?sk=app_335457189856398](https://www.facebook.com/pages/TestCactOos/255835411190164?sk=app_335457189856398)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T22:33:35.240

让我们从你的第一个问题开始

*   Facebook Like Gating - 您实际上不需要请求登录您的应用程序只是为了限制您的 Facebook Like。例如，在您的情况下，您将应用程序用于 Facebook 页面，并且您可以在购买时获得 SignedRequest，而无需用户登录您的应用程序。

*   再次，我检查了你的应用程序，它在下面的 url 中重定向了我：这对我有好处，如果页面没有在 iFrame 中查看，你唯一需要做的就是重定向你的用户。

    *   [https://www.vibrantmarketing.ca/coppertone/facebook/littlemiss/en/like#_=_](https://www.vibrantmarketing.ca/coppertone/facebook/littlemiss/en/like#_=_)

注意：一件事，当我检查您的应用程序时，它会不时重定向。我认为这是因为您的页面底部的 Javascript 每次都登录。

# c# - C# 将 xml 解析为数组

> ID：10745627
> 
> 赞同：0
> 
> 时间：2012-05-24T21:35:01.413
> 
> 标签：c#, .net

我有 400 多条这种格式的数据记录：

```
<rs:data>
   <z:row ows_ID='360' ows_LinkTitle='GEI Survey data to Sharepoint' ows_Project_x0020_Priority='0' ows_AssignedTo='615;#Jeremy, Ron' ows_Status='In Progress' ows_Priority='(2) Normal' ows_DueDate='2012-04-27 00:00:00' ows_PercentComplete='0.700000000000000' ows_Modified='2012-04-30 10:44:15' ows_Alignment='TSS Delivery Mgmt' ows_SME='44;#Lewis, Clark' />

   <z:row ows_ID='378' ows_LinkTitle='Create back end and environment to support User demographic reporting' ows_Project_x0020_Priority='0' ows_AssignedTo='615;#Sam, Johns' ows_Status='In Progress' ows_Priority='(2) Normal' ows_DueDate='2012-05-11 00:00:00' ows_PercentComplete='0.800000000000000' ows_Modified='2012-05-09 13:50:17' ows_Alignment='Team Internal' ows_SME='7;#CORP\sscer;#9;#CORP\vreer' />

   <z:row ows_ID='249' ows_LinkTitle='Training Material to Muti Media' ows_AssignedTo='620;#Jenkins, Kristen' ows_Status='Not Started' ows_Priority='(2) Normal' ows_DueDate='2012-08-10 00:00:00' ows_PercentComplete='0' ows_Modified='2012-05-16 11:20:29' ows_Alignment='Diver Support' ows_SME='1;#CORP\vsswer;#7;#CORP\adder' />

</rs:data> 
```

如何创建独立数组来存储 ows_ID、ows_LinkTitle 等的值？

> foreach（activeItemData 中的 System.Xml.XmlNode 节点）
> 
> ```
>  {
>             if (node.Name == "rs:data")
>             {
>                 for (int i = 0; i < node.ChildNodes.Count; i++)
>                 {
>                     if (node.ChildNodes[i].Name == "z:row")
>                     {
>                         string [] resultTitle;
>      resultTitle = (node.ChildNodes[i].Attributes["ows_Title"].Value).ToArray();
>                         Console.ReadLine(); 
>                     } 
>                 } 
>           } 
>       } 
> ```

其抛出错误错误无法在 resultTitle 处将类型“char[]”隐式转换为“string[]”。我该如何纠正？谢谢。

我做了

```
char[] resultTitle;
resultTitle = (node.ChildNodes[i].Attributes ["ows_Title"].Value).ToArray();
string s = new string(resultTitle);
Console.ReadLine(); 
```

我该如何处理 ["ows_Title"] 的所有值。? 谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T22:21:31.150

这段代码

```
char[] resultTitle;
resultTitle = (node.ChildNodes[i].Attributes ["ows_Title"].Value).ToArray(); 
string s = new string(resultTitle);
Console.ReadLine(); 
```

将字符串值转换为字符数组。`).ToArray()`然后立即将字符数组转换回字符串。

这是同样的事情，没有额外的内存分配

```
string s = node.ChildNodes[i].Attributes ["ows_Title"].Value; 
```

* * *

但是，如果我是您，我只会使用 linq to xml。我也想最终得到一个`List<string>`

```
XNamespace z = "#RowsetSchema";
List<string> list = (from row in xdoc.Descendants(z + "row")
                     select (string)row.Attribute("ows_LinkTitle")
                    ).ToList(); 
```

完整样本

```
 static void Main(string[] args)
    {
        string xstring = @"<xml xmlns:rs='urn:schemas-microsoft-com:rowset'
                         xmlns:z='#RowsetSchema'>
                            <rs:data>
                                <z:row ows_ID='360' ows_LinkTitle='GEI Survey data to Sharepoint' ows_Project_x0020_Priority='0' ows_AssignedTo='615;#Jeremy, Ron' ows_Status='In Progress' ows_Priority='(2) Normal' ows_DueDate='2012-04-27 00:00:00' ows_PercentComplete='0.700000000000000' ows_Modified='2012-04-30 10:44:15' ows_Alignment='TSS Delivery Mgmt' ows_SME='44;#Lewis, Clark' />
                               <z:row ows_ID='378' ows_LinkTitle='Create back end and environment to support User demographic reporting' ows_Project_x0020_Priority='0' ows_AssignedTo='615;#Sam, Johns' ows_Status='In Progress' ows_Priority='(2) Normal' ows_DueDate='2012-05-11 00:00:00' ows_PercentComplete='0.800000000000000' ows_Modified='2012-05-09 13:50:17' ows_Alignment='Team Internal' ows_SME='7;#CORP\sscer;#9;#CORP\vreer' />
                               <z:row ows_ID='249' ows_LinkTitle='Training Material to Muti Media' ows_AssignedTo='620;#Jenkins, Kristen' ows_Status='Not Started' ows_Priority='(2) Normal' ows_DueDate='2012-08-10 00:00:00' ows_PercentComplete='0' ows_Modified='2012-05-16 11:20:29' ows_Alignment='Diver Support' ows_SME='1;#CORP\vsswer;#7;#CORP\adder' />
                          </rs:data> 
                          </xml>";

        XDocument xdoc = XDocument.Parse(xstring); // there are other ways to construct your xdoc
        XNamespace z = "#RowsetSchema";
        List<string> list = (from row in xdoc.Descendants(z + "row")
                            select  (string)row.Attribute("ows_LinkTitle")
                            ).ToList();

        foreach (var item in list)
            Console.WriteLine(item);

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T21:37:30.087

简单就用

```
char[] resultTitle; 
```

代替

```
string [] resultTitle; 
```

# web-services - 连接到托管 CRM 在线 2011 的肥皂错误

> ID：10745629
> 
> 赞同：0
> 
> 时间：2012-05-24T21:35:09.890
> 
> 标签：web-services, soap, dynamics-crm, dynamics-crm-2011

很长时间以来，我一直在尝试解决此错误。“验证消息安全时出错”我做了一些研究，人们说这是因为服务器和客户端之间的时间差异。这其他人有同样的问题吗？以下是我的错误的详细信息

```
 System.ServiceModel.FaultException was caught
  Message=An error occurred when verifying security for the message.
  Source=mscorlib
  StackTrace:
    Server stack trace: 
       at System.ServiceModel.Channels.ServiceChannel.HandleReply(ProxyOperationRuntime operation, ProxyRpc& rpc)
       at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)
       at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)
       at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)
    Exception rethrown at [0]: 
       at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)
       at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type)
       at WindowsFormsApplication1.CrmSdk.Discovery.IDiscoveryService.Execute(DiscoveryRequest request)
       at WindowsFormsApplication1.CrmSdk.Discovery.DiscoveryServiceClient.Execute(DiscoveryRequest request) in WindowsFormsApplication1\Service References\CrmSdk.Discovery\Reference.cs:line 723
       at WindowsFormsApplication1.Form1.DiscoverOrganizationUrl(String organizationName, String discoveryServiceUrl) in Form1.cs:line 110
  InnerException: 
```

这是我用来访问托管 CRM 在线网络服务的代码

```
 using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Web;
//using System.ServiceModel;
//using System.ServiceModel.Description;

namespace WindowsFormsApplication1
{
    using CrmSdk;
    using CrmSdk.Discovery;
    using System.Net;
    using System.Globalization;
    using LocalServices;
    using System.ServiceModel;
    using System.Web.Services.Protocols;

    public partial class Form1 : Form
    {
        ///hosted CRM online
        private const string DiscoveryServiceUrl = "https://disco.crm.dynamics.com/XRMServices/2011/Discovery.svc";

        private IOrganizationService _service;

        private string fetchXML =
                                     @"
                                         <fetch version='1.0' output-format='xml-platform' mapping='logical' distinct='false'>
                                          <entity name='account'>
                                            <attribute name='name' />
                                            <attribute name='address1_city' />
                                            <attribute name='primarycontactid' />
                                            <attribute name='telephone1' />
                                            <attribute name='accountid' />
                                            <order attribute='name' descending='false' />
                                            <filter type='and'>
                                              <condition attribute='ownerid' operator='eq-userid' />
                                              <condition attribute='statecode' operator='eq' value='0' />
                                            </filter>
                                            <link-entity name='contact' from='contactid' to='primarycontactid' visible='false' link-type='outer' alias='accountprimarycontactidcontactcontactid'>
                                              <attribute name='emailaddress1' />
                                            </link-entity>
                                          </entity>
                                        </fetch>                        

                                    ";

        public Form1()
        {
            InitializeComponent();
            //GetDataFromCRM();

            GetDataFromCRM2();

        }
        private void GetDataFromCRM2()
        {

        private string DiscoverOrganizationUrl(string organizationName, string discoveryServiceUrl)
        {
            using (CrmSdk.Discovery.DiscoveryServiceClient client = new CrmSdk.Discovery.DiscoveryServiceClient("CustomBinding_IDiscoveryService", discoveryServiceUrl))
            {
                //ApplyCredentials(client, credentials);

                client.ClientCredentials.Windows.ClientCredential.UserName = UserName;
                client.ClientCredentials.Windows.ClientCredential.Password = Password
                client.ClientCredentials.Windows.ClientCredential.Domain = Domain

                CrmSdk.Discovery.RetrieveOrganizationRequest request = new CrmSdk.Discovery.RetrieveOrganizationRequest()
                {
                    UniqueName = organizationName
                };

                try
                {
                    CrmSdk.Discovery.RetrieveOrganizationResponse response = (CrmSdk.Discovery.RetrieveOrganizationResponse)client.Execute(request);
                    foreach (KeyValuePair<CrmSdk.Discovery.EndpointType, string> endpoint in response.Detail.Endpoints)
                    {
                        if (CrmSdk.Discovery.EndpointType.OrganizationService == endpoint.Key)
                        {
                            Console.WriteLine("Organization Service URL: {0}", endpoint.Value);
                            return endpoint.Value;
                        }
                    }

                    throw new InvalidOperationException(string.Format(CultureInfo.InvariantCulture,
                        "Organization {0} does not have an OrganizationService endpoint defined.", organizationName));

                }
                catch (FaultException e)
                {
                    MessageBox.Show(e.Message);
                    throw;
                }

                catch (SoapHeaderException e)
                {
                    MessageBox.Show(e.Message);
                    throw;
                }
                catch (SoapException e)
                {
                    MessageBox.Show(e.Message);
                    throw;
                }
                return null;
            }

        }
        //private static void ApplyCredentials<TChannel>(ClientBase<TChannel> client, ICredentials credentials)
        //    where TChannel : class
        //{
        //    client.ClientCredentials.Windows.ClientCredential = credentials.Windows.ClientCredential;
        //}
        private void ExecuteFetch(string serviceUrl)
        {
            using (OrganizationServiceClient client = new OrganizationServiceClient("CustomBinding_IOrganizationService", new EndpointAddress(serviceUrl)))
            {
                client.ClientCredentials.Windows.ClientCredential.UserName = UserName;
                client.ClientCredentials.Windows.ClientCredential.Password = Password;
                client.ClientCredentials.Windows.ClientCredential.Domain = Domain;

                _service = (IOrganizationService)client;

                FetchExpression expression = new FetchExpression();

                expression.Query = 
                         @"
                                         <fetch version='1.0' output-format='xml-platform' mapping='logical' distinct='false'>
                                          <entity name='account'>
                                            <attribute name='name' />
                                            <attribute name='address1_city' />
                                            <attribute name='primarycontactid' />
                                            <attribute name='telephone1' />
                                            <attribute name='accountid' />
                                            <order attribute='name' descending='false' />
                                            <filter type='and'>
                                              <condition attribute='ownerid' operator='eq-userid' />
                                              <condition attribute='statecode' operator='eq' value='0' />
                                            </filter>
                                            <link-entity name='contact' from='contactid' to='primarycontactid' visible='false' link-type='outer' alias='accountprimarycontactidcontactcontactid'>
                                              <attribute name='emailaddress1' />
                                            </link-entity>
                                          </entity>
                                        </fetch>      
                          ";

                EntityCollection result = _service.RetrieveMultiple(expression);
                DataTable temp =  ConvertEntityToTable(result);

            }
        }
        /// Convert Entity To datatable 
        private DataTable ConvertEntityToTable(EntityCollection result)
        {
            DataTable dt = new DataTable();
            int rowCount = result.Entities.Count();
            try
            {
                for (int i = 0; i < rowCount; i++)
                {
                    DataRow dr = dt.NewRow();
                    Entity currentEntity = (Entity)result.Entities[i];
                    var keys = currentEntity.Attributes.Count();

                    for (int j = 0; j < keys; j++)
                    {
                        string columName = currentEntity.Attributes[j].Key;
                        string value = currentEntity.Attributes[j].Value.ToString();

                        if (dt.Columns.IndexOf(columName) == -1)
                            dt.Columns.Add(columName, Type.GetType("Sysem.String"));
                        dr[columName] = value;
                    }
                    dt.Rows.Add(dr);
                }

                return dt;
            }
            catch (Exception exp)
            {
                throw;
            }
        }
    }
} 
```

应用程序配置

```
<bindings>
   <customBinding>
    <binding name="CustomBinding_IDiscoveryService">
     <textMessageEncoding maxReadPoolSize="64" maxWritePoolSize="16"
      messageVersion="Default" writeEncoding="utf-8">
      <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
       maxBytesPerRead="4096" maxNameTableCharCount="16384"  />
     </textMessageEncoding>
     <httpsTransport manualAddressing="false" maxBufferPoolSize="524288"
      maxReceivedMessageSize="65536" allowCookies="false" authenticationScheme="Anonymous"
      bypassProxyOnLocal="false" decompressionEnabled="true" hostNameComparisonMode="StrongWildcard"
      keepAliveEnabled="true" maxBufferSize="65536" proxyAuthenticationScheme="Anonymous"
      realm="" transferMode="Buffered" unsafeConnectionNtlmAuthentication="false"
      useDefaultWebProxy="true" requireClientCertificate="false" 

                         />

    </binding> 
```

它在 FaultException 处引发错误感谢所有帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T13:16:35.403

普遍的共识似乎是，除了实际时间之外，时区和夏令时设置似乎是导致此错误的原因。客户端和服务器需要彼此同步。

# android - Android 4.0.3 不再与我的手机兼容

> ID：10745634
> 
> 赞同：2
> 
> 时间：2012-05-24T21:35:15.050
> 
> 标签：android, eclipse

我已经在带有 Android 2.3.4 的 Droid X2 上开发了大约 4 个月。我一直使用的 SDK 是 Android 4.0.3，它可以正常工作。我下载并设置了用于旧手机的 2.2 SDK，现在没有任何 SDK 与我的手机“兼容”。我弄乱了清单（最小/最大/目标版本），创建了新的简单程序并尝试使用它运行，但没有任何效果。我也重新安装了所有东西。有任何想法吗？谢谢你。

# c - strcmp() 不比较

> ID：10745641
> 
> 赞同：1
> 
> 时间：2012-05-24T21:35:34.687
> 
> 标签：c, string, compare, strcmp

**大家好，** 我是新手，我正在编写一个代码，主要目的是在两个字符串相等时打印一个数字。第一个字符串是从文件中获取的，第二个是要比较的字符串。

***编码：***

```
int main()
{
char *string[2];
FILE *stream;
stream = fopen("REL","r");
if( (stream = fopen("REL","r")) == NULL)
{  
    printf("Can't open %s\n","REL");
    exit(1);
}
for(int i=0;i<92;i++)
{
    fscanf(stream,"%s",&string);
    if( strcmp("20", *string) == 0 )
    {
        printf("%d",20);
    }
}
fclose(stream);
} 
```

并且...当我在 shell 上进行测试时，它提示我：

```
~/CM$ ./file2 
Segmentation fault (core dumped) 
```

我可能会犯一个愚蠢的错误。但是，作为一个新手，我无法弄清楚脚本出了什么问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T21:40:54.197

`string`是 2 的统一数组`char*`。`fscanf`正在尝试写入不应该写入的内存。声明`string`为 char 数组：

```
char string[256]; 
```

和：

```
fscanf(stream, "%255s", string); /* Limit number of
                                    chars read to prevent buffer overrun. */ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T21:43:30.483

试试这个：

```
char string[128];
fscanf(stream, "%s", string); 
```

进而：

```
if (!strcmp("20", string)) {
    /* The strings are equals */
} 
```

# c - 为什么这个 C 程序会崩溃？

> ID：10745644
> 
> 赞同：0
> 
> 时间：2012-05-24T21:35:51.253
> 
> 标签：c, crash

我在 C 中有一个简单的测试程序来打乱堆上的一组值。旁注：我知道这里的随机逻辑有一个缺陷，不允许“位移”值超过`RAND_MAX`，但这不是这篇文章的重点。

关键是，当我以 N = 10000 运行代码时，每隔一段时间它就会崩溃，而且信息很少（下面发布的屏幕截图）。我正在使用 MinGW 编译器。我似乎无法重现更低或更高 N 值（例如 1000 或 100000）的崩溃。

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>

const int N = 10000;

int main() {
    int i, rand1, rand2, temp, *values;

    /* allocate values on heap and initialize */
    values = malloc(N * sizeof(int));
    for (i = 0; i < N; i++) {
        values[i] = i + 1;
    }

    /* scramble */
    srand(time(NULL));
    for (i = 0; i < N/10; i++) {
        rand1 = (int)(N*((double)rand()/(double)RAND_MAX));
        rand2 = (int)(N*((double)rand()/(double)RAND_MAX));
        temp = values[rand1];
        values[rand1] = values[rand2];
        values[rand2] = temp;
    }

    int displaced = 0;
    for (i = 0; i < N; i++) {
        if (values[i] != (i+1)) {
            displaced++;
        }
    }
    printf("%d numbers out of order\n", displaced);

    free(values);
    return 0;
} 
```

![在此处输入图像描述](../Images/02f97c94be844ea943e2afe485afac53.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T21:38:48.693

可能是因为`rand()`生成了一个从 0 到 RAND_MAX （*含*）的随机数，所以`(int)(N*((double)rand()/(double)RAND_MAX))`可以是 N，它超出了数组边界。但是，我不明白为什么这会随着数组大小而变化（它确实解释了为什么它有时只会崩溃）。

尝试`/(1+(double)RAND_MAX)`（请注意，加法是双精度，以避免溢出，具体取决于 RAND_MAX 的值）（尽管我不相信这将始终有效，具体取决于所涉及的类型。测试 N 并重试会更安全）。

另外，学习使用工具[是否有一个好的 Valgrind 替代 Windows？](https://stackoverflow.com/questions/413477/is-there-a-good-valgrind-substitute-for-windows)- 他们让这种事情很容易修复（他们会告诉你在运行程序时到底出了什么问题）。

# matlab - Matlab - 在包内的路径上定位文件

> ID：10745645
> 
> 赞同：2
> 
> 时间：2012-05-24T21:35:52.057
> 
> 标签：matlab

一直在尝试（未成功）使用 'which' 在包中定位 .m 文件。例如，当 Company.m 位于 +Contents 文件夹中时，调用“which('Company.m')”。

因此，如果我当前的文件夹是 C:\Users\Documents\Contents（添加到 Matlab 路径的路径），“which('Company.m')”表示找不到文件，但如果我当前的文件夹是 C:\Users*** \Documents\Contents\ +Contents，然后它就会知道位置。

为什么是这样？我认为'which'命令递归搜索所有子目录？无论如何都可以检索“Company.m”的路径名而不必专门输入该文件夹？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T01:15:50.443

那应该是：

```
which Contents.Company 
```

如果您事先不知道它驻留在哪个包中（或者即使它在一个包中），您可以将它们全部导入：

```
import Contents.*
import OtherPackage.*
which -all Company 
```

如果您仍然不满意，您可以获取所有可用顶级包的列表，并搜索它们公开的方法以获得您想要的功能：

```
 %# warning: this might take more than a few seconds
 p = meta.package.getAllPackages;
 b = cellfun(@(pkg) ismember('Company',{pkg.FunctionList.Name}), p);
 idx = find(b, 1, 'first');
 p{idx}.Name 
```

# java - 按下按钮时如何显示从列表中随机选择的文本？

> ID：10745656
> 
> 赞同：-1
> 
> 时间：2012-05-24T21:37:12.270
> 
> 标签：java, arrays, string, button

我正在尝试在 Eclipse 中开发一个应用程序，当单击按钮时随机显示字符串中的文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T21:38:58.627

有一个简单的解决方案。您使用 Random() 类或使用 Math.random() 将字符串作为字符数组进行迭代。然后你只需选择它的随机位，直到它消失。

不过，您必须确保始终检查数组大小，以免遇到 OutOfBoundsException

# objective-c - Objective-C 编码指南

> ID：10745657
> 
> 赞同：2
> 
> 时间：2012-05-24T21:37:13.320
> 
> 标签：objective-c, ios, cocoa-touch

所以在指南中它说：

> 对于仅在 iOS 上运行的代码，最好使用自动合成的实例变量。
> 
> 合成实例变量时，使用@synthesize var = var_; 因为这样可以防止意外调用 var = blah; 当 self.var = blah; 旨在。

```
 // Header file
@interface Foo : NSObject
// A guy walks into a bar.
@property(nonatomic, copy) NSString *bar;
@end

// Implementation file
@interface Foo ()
@property(nonatomic, retain) NSArray *baz;
@end

@implementation Foo
@synthesize bar = bar_;
@synthesize baz = baz_;
@end 
```

问题是，这是否仅适用于公共变量或私有变量？文档上并不是很清楚，但想对为什么“如果”这仅适用于公共或私人有一些想法或观点？我认为这对所有公共/私人来说都是有意义的，这样你就不会弄乱 ivars 并使用该属性

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T22:56:13.703

我认为所讨论的变量是公共的还是私有的并不特别重要。当您直接访问变量而不是使用生成的访问器方法时，以不同名称进行综合的做法使其变得明确。

也许您要问的还有一个不同的问题：*我通常应该通过访问器还是直接访问私有 ivars？*我认为大多数熟练的 iOS 开发人员倾向于使用访问器，除非有特殊原因不使用（性能、避免 KVO 等副作用等）。这样做更具前瞻性，并允许底层实现具有灵活性。以一种非常小的方式，您正在对接口而不是实现进行编码。

还可能值得指出的是，Clang 的默认行为将在未来发生变化，因此支持属性的 ivars 被合成为`_foo` *default*命名。显然，被考虑的权力认为强调 ivars 是最佳实践。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T22:24:12.257

我很确定这很大程度上取决于个人喜好，所以这是我的，因为它们的价值：

*   我喜欢区分公共属性和“私有”实例变量。
*   属性总是通过它们的访问器访问，除了初始化（以及在手动创建的访问器方法中，出于显而易见的原因）。因此，支持 ivar 中的下划线很有用，在我日常使用这些属性时并不是真正的问题。
*   实例变量用于保存方法内部使用的状态，但不（直接）由其他类使用。
*   我非常喜欢在 .m 文件中声明我的实例变量。不错，干净且简单（无需在 .h 和 .m 之间来回切换来声明 ivars）。
*   我发现这种区别有助于我理清思路，并确定一个属性是否是外部代理应该直接获取和/或设置的东西（.h 中的一个属性），或者它是否真的只是帮助我的方法实现工作（ .m 中的 ivar）。

我同意 Paul.s 的观点。这种一致性是你的朋友，但对我来说，区别也是朋友。

# php - 有没有办法让 PHP 将 sql 结果直接转换为 JSON？

> ID：10745661
> 
> 赞同：2
> 
> 时间：2012-05-24T21:37:37.527
> 
> 标签：php, mysql, json

我很好奇我是否必须自己动手，或者是否有一个我忽略的预制 PHP SQL 库，我可以通过它传入一个 sql 选择查询并让它返回一个 JSON 对象（或字符串）因此。

在伪代码中，我想要的是：

```
$startIndex = 0;
$myJSON = magicSqlToJSON("select first_name, last_name, phone,  (select count(id) from users) as total from users limit $startIndex, 2"); 
```

$myJSON 现在是：

```
{"users":[
   {"first_name":"Peter", "last_name":"O'Tool","phone":"1234567890","total":"100"},
   {"first_name":"Gary", "last_name":"Shandling","phone":"1234567890","total":"100"}
]} 
```

我知道自己写这篇文章不会花很长时间，但我有点认为这是一种太普遍的需求，以至于它已经不存在了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T21:40:06.217

PHP中没有原生的*单一函数*

但是，您可以使用`mysqli_fetch_array()`（例如）和`json_encode()`. 您可能需要稍微调整父格式（即在“*用户*”下方）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T21:45:21.837

## PHP

PHP 具有用于此目的的`json_encode()`and`json_decode()`函数，但您需要使用 a`foreach`或类似函数手动循环数据。

## MySQL

您可以使用用户定义函数，例如[lib_mysqludf_json](http://www.mysqludf.org/lib_mysqludf_json/index.php)，这将允许您从查询中返回 JSON 数组，如下所示：

```
select json_array(
           customer_id
       ,   first_name
       ,   last_name
       ,   last_update
       ) as customer
from   customer 
where  customer_id =1; 
```

产生这个结果：

```
+------------------------------------------+
| customer                                 |
+------------------------------------------+
| [1,"MARY","SMITH","2006-02-15 04:57:20"] |
+------------------------------------------+ 
```

该 UDF中还有一个`json_object`函数，它应该为您提供问题中样本的非常接近的表示形式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T21:39:32.057

没有直接功能，*但*您可以做其他事情：

结果来自一个数组，所以只需调用

json_encode（数组）；-> [http://php.net/manual/en/function.json-encode.php](http://php.net/manual/en/function.json-encode.php)

在它上面，就是这样

例子：

```
$query = "select first_name, last_name, phone,  (select count(id) from users) as total from users limit $startIndex, 2";
$result = mysql_query($query) or die(mysql_error());

echo json_encode(mysql_fetch_array($result)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T22:16:22.357

我假设你使用 PDO

```
echo json_encode($pdo->exec($sql)->fetchAll()); 
```

否则，一般模式是

```
$handle = execute_query($sql);
$rows = array();
while ($row = get_row_assoc($handle)) {
    $rows[] = $row;
}
echo json_encode($rows); 
```

# proof - 证明形式逻辑的正确性

> ID：10745662
> 
> 赞同：2
> 
> 时间：2012-05-24T21:37:39.260
> 
> 标签：proof, formal-methods, post-conditions, hoare-logic, proof-of-correctness

我想知道是否有人可以帮助我回答这个问题。它来自以前的试卷，我可以知道为今年考试准备的答案。

这个问题似乎很简单，以至于我完全迷失了，它到底在问什么？

> 考虑以下涉及整数变量的代码部分：
> 
> ```
> if (i < j) {
>     m = i;
> } else {
>     m = j;
> } 
> ```
> 
> 通过陈述一个合适的输出条件，然后验证这段代码的正确性，证明执行后m等于i和j的最小值。

我的后置条件为：{m = i ∧ i < j ∨ m = j ∧ j < i}

它是否正确？你如何验证这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T20:34:58.340

您的帖子条件是正确的。我个人发现以下变体（等效）更自然：

```
(i<j → m=i) ∧ (i≥j → m=j) 
```

要证明程序满足后置条件，请执行以下操作。

1.  请注意，要确保程序*始终*满足后置条件，您应该将`true`其用作前置条件。

2.  所以你有以下 Hoare 三元组：

    ```
    {true}
    if (i < j) {

        m = i;

    } else {

        m = j;

    }
    {(i < j → m = i) ∧ (i ≥ j → m = j)} 
    ```

3.  后置条件需要保持在两个分支的末尾，因此（根据条件的标准最弱前置条件规则）我们有

    ```
    {true}
    if (i < j) {

        m = i;
        {(i < j → m = i) ∧ (i ≥ j → m = j)}     <--.
    } else {                                       |
                                                   |
                                                   |
        m = j;                                     |   copy
        {(i < j → m = i) ∧ (i ≥ j → m = j)}     <--|
    }                                              |
    {(i < j → m = i) ∧ (i ≥ j → m = j)}  ----------' 
    ```

4.  根据分配产生的最弱前提条件将公式进一步推高

    ```
    {true}
    if (i < j) {

        {(i < j → i = i) ∧ (i ≥ j → i = j)}   <---.
        m = i;                                    | m replaced by i
        {(i < j → m = i) ∧ (i ≥ j → m = j)}   ----'
    } else {

        {(i < j → j = i) ∧ (i ≥ j → j = j)}   <---.
        m = j;                                    | m replaced by j
        {(i < j → m = i) ∧ (i ≥ j → m = j)}   ----'
    }
    {(i < j → m = i) ∧ (i ≥ j → m = j)} 
    ```

5.  在 true 分支的顶部，我们知道，`i < j`在 else 分支的顶部，我们知道`¬(i < j)`：

    ```
    {true}
    if (i < j) {
        {i < j}                               (1)  <--- added
        {(i < j → i = i) ∧ (i ≥ j → i = j)}   (2)
        m = i;
        {(i < j → m = i) ∧ (i ≥ j → m = j)}
    } else {
        {¬(i < j)}                            (3)  <--- added
        {(i < j → j = i) ∧ (i ≥ j → j = j)}   (4)
        m = j;
        {(i < j → m = i) ∧ (i ≥ j → m = j)}
    }
    {(i < j → m = i) ∧ (i ≥ j → m = j)} 
    ```

6.  剩下要展示的是对于任何两个连续的断言，第一个断言意味着第二个断言。（这些通常被称为“证明义务”。）我们有两个这样的义务：`(1)`应该暗示`(2)`和`(3)`应该暗示`(4)`。情况显然如此。

    --“qed”:-)

# c++ - boost::bimap 用于枚举

> ID：10745664
> 
> 赞同：6
> 
> 时间：2012-05-24T21:37:55.153
> 
> 标签：c++, boost, map, bimap

我正在尝试为 C++ 中的枚举创建一个简单的双向查找工具。我有单向查找工作正常...

```
enum MyEnum
{ 
    One, 
    Two, 
    Three 
};

const boost::unordered_map<MyEnum,std::string> MyEnumMap = map_list_of
    (One, "One")
    (Two, "Two")
    (Three, "Three"); 
```

然后通过

```
MyEnumMap.at(One) 
```

这有效，但它只允许基于键的查找。我想使用双向查找容器，例如 boost:bimap 来允许基于值和键的简单反向查找。不过，map_list_of 似乎与 boost::bimap 不兼容。

首先，我应该仍然使用带有 boost::bimap 的 map_list_of，还是需要其他类型？
这些地图都将是一个基本的（枚举，字符串）类型。

其次，有没有办法我仍然可以像上面那样简单地将地图定义为 const ？我正在尝试使其尽可能易于更新和维护，而不会涉及太多额外的 typedef 等。感谢您的洞察力。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-24T22:45:55.587

尝试直接使用 list_of ：

```
typedef boost::bimap< MyEnum, std::string > bm_type;
const bm_type MyEnumMap =
  boost::assign::list_of< bm_type::relation >
    ( One, "One" )
    ( Two, "Two" )
    ( Three, "Three" ); 
```

注意使用“relation”而不是“value_type”。

# jquery - 用 jquery 改变 -webkit-transition-delay

> ID：10745666
> 
> 赞同：2
> 
> 时间：2012-05-24T21:38:02.510
> 
> 标签：jquery, webkit, delay, jquery-isotope

我目前在这里设置我的延迟：

```
.isotope .isotope-item {
    -webkit-transition-property: left, top, opacity;
    -moz-transition-property: left, top, opacity;
    -ms-transition-property: left, top, opacity;
    -o-transition-property: left, top, opacity;
    transition-property: left, top, opacity;
    -webkit-transition-delay: 0s, 0.8s, 0s;
    -moz-transition-delay: 0s, 0.8s, 0s;
    -ms-transition-delay: 0s, 0.8s, 0s;
    -o-transition-delay: 0s, 0.8s, 0s;
    transition-delay: 0s, 0.8s, 0s;
} 
```

我在 jQuery 中有一个条件语句，需要能够像这样更改我的延迟：

```
.isotope .isotope-item {
    -webkit-transition-delay: 2s, 0.8s, 0s;
    -moz-transition-delay: 2s, 0.8s, 0s;
    -ms-transition-delay: 2s, 0.8s, 0s;
    -o-transition-delay: 2s, 0.8s, 0s;
    transition-delay: 2s, 0.8s, 0s;
} 
```

任何想法，如果这可能实现或任何其他解决方案来解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T21:48:19.973

jQuery 可以很好地处理供应商前缀。

```
$(".isotope-item").css('-webkit-transition-delay', '2s, 0.8s, 0s' )
   .css('-moz-transition-delay', '2s, 0.8s, 0s')
   .css('-ms-transition-delay', '2s, 0.8s, 0s')
   .css('-o-transition-delay', '2s, 0.8s, 0s')
   .css('transition-delay', '2s, 0.8s, 0s'); 
```

如果您不想像 Rory 建议的那样添加新课程，它将起作用。

[http://jsfiddle.net/qzuDr/](http://jsfiddle.net/qzuDr/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-24T21:40:33.440

在您的情况下，将另一个类添加到需要较长延迟的元素中，例如`foo`，然后将您的第二种样式更改为：

```
.isotope .isotope-item.foo {
    -webkit-transition-delay: 2s, 0.8s, 0s;
    -moz-transition-delay: 2s, 0.8s, 0s;
    -ms-transition-delay: 2s, 0.8s, 0s;
    -o-transition-delay: 2s, 0.8s, 0s;
    transition-delay: 2s, 0.8s, 0s;
} 
```

更高的特异性将确保这些元素接收更长的延迟时间。

# erlang - 当 gen_server 方法被两个客户端同时调用时会发生什么？

> ID：10745669
> 
> 赞同：6
> 
> 时间：2012-05-24T21:38:13.737
> 
> 标签：erlang, gen-server

我有一个 gen_server 模块，它在客户端进程发送数据时将数据记录到文件中。当两个客户端进程同时向该模块发送数据时会发生什么？文件操作会不会相互冲突？[erlang 文档](http://www.erlang.org/doc/man/gen_server.html#Module%3ahandle_info-2)在这里令人沮丧地不清楚。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-24T22:28:24.500

每个 Erlang 进程都维护一个消息队列。该过程将获取一条消息并一一处理这些消息。

在您的示例中，如果两个客户端`gen_server`同时调用，这些调用将成为`gen_server`进程队列中的一条消息，并且`gen_server`将一一处理这些消息。所以不必担心冲突。

但是如果一个进程必须处理来自其他进程的太多消息，则需要考虑进程的容量并优化设计，否则它将成为瓶颈。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-30T12:23:18.853

它`gen_server`在与您的客户端进程不同的进程中运行，因此当您对其执行`call`/`cast`时，您实际上是在向服务器进程发送消息。

所有消息都放在一个进程的消息队列中，进程一个接一个地处理它们的消息。如果消息在进程繁忙时到达，则将其放入消息队列中。因此，同时到达的日志消息将永远不会相互干扰，因为它们将按顺序处理。

这不是 erlang 本身的属性，`gen_server`而是 erlang 中所有进程的一般属性，这就是为什么在 gen_server 文档中没有提及这一点的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T00:58:36.463

Fortunately, the source for OTP is readily available at [github](https://github.com/erlang/otp/blob/maint/lib/stdlib/src/gen_server.erl), but the short answer is that gen_server runs in a loop, answering requests in order received, with no priority of one type (handle_cast, handle_call, or handle_info) over another.

Using handle_call can potentially be an issue, as the gen_server process will have to return before it can deal with the next cast/call/info in queue. For example, in a handle_call, avoid gen_server:call with self()!

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T23:49:11.117

gen_server just handles requests in the order that they was done, not matter they was done from one process or many.

In case of writing to log there is no reason to worry about race-conditions.

# python - 我不确定如何使用 for 循环返回表中对于 python 唯一的条目数？

> ID：10745670
> 
> 赞同：0
> 
> 时间：2012-05-24T21:38:18.673
> 
> 标签：python

例子：

```
help([[1, 2, 2], [1, 1, 2]]) 
```

应该返回 2。

```
def help(num):
    lst = ()
    for n in num:  
        return(len(lst)) 
```

所以我需要表中所有数字的总和。

另一个例子：

```
help([[32, 12, 52, 63], [32, 64, 67, 52], [64, 64, 17, 34], [34, 17, 76, 32]]) 
```

返回：9

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T21:58:02.060

试试这个（[itertools.chain](http://docs.python.org/library/itertools.html#itertools.chain)用于“连接”可迭代对象）：

```
table = [ [32, 12, 52, 63], 
          [32, 64, 67, 52], 
          [64, 64, 17, 34], 
          [34, 17, 76, 32] ]

from itertools import chain
n_unique_values = len(set( chain(*table) ))

print n_unique_values # prints 9 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T21:41:38.250

```
def allElementsInTable(table):
    for row in table:
        for elem in row:
            yield elem 
```

演示：

```
>>> set(allElementsInTable([[1,2,2],[1,1,2]]))
{1,2}

>>> len(set(allElementsInTable([[1,2,2],[1,1,2]])))
2 
```

如果您进行大量表操作，您可能希望查看`numpy`数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T21:43:04.667

```
>>> x = [[1, 2, 2], [1, 1, 2]]
>>> unique_items = lambda n: len(set(n))
>>> map(unique_items, x)
[2, 2] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-24T21:46:11.040

@garnertb 当然是正确的，但是为了 Python 的乐趣：

```
>>> x = [[1, 2, 2], [1, 1, 2]]
>>> map(len, map(set, x))
[2, 2] 
```

编辑：此页面上的此解决方案和其他解决方案的一个问题是，如果 x 变长，它的扩展性会很差。我很想：

```
>>> import itertools
>>> itertools.imap(len, itertools.imap(set, x))
<itertools.imap object at 0xb7437b8c> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-24T21:57:52.033

```
compound_list = []
for sublist in lists:
    compound_list += sublist
len(set(compound_list)) 
```

# ruby-on-rails - Rails，SQLException：没有这样的列

> ID：10745671
> 
> 赞同：1
> 
> 时间：2012-05-24T21:38:19.157
> 
> 标签：ruby-on-rails, sqlite

在重新检查代码、重新启动计算机并运行 rake db:migrate 之后，我不知道还能做什么。我不断收到以下错误：

```
SQLite3::SQLException: no such column: uploads.user_id: SELECT COUNT(*) FROM "uploads"  WHERE "uploads"."user_id" = 1

Extracted source (around line #12):

9:     </section>
10:   </aside>
11:   <div class="span8">
12:     <% if @user.uploads.any? %>
13:       <h3>Uploads (<%= @user.uploads.count %>)</h3>
14:       <ol class="uploads">
15:         <%= render @uploads %> 
```

这与 has_many 关联有什么关系吗？

**显示.html.erb**

```
<% provide(:title, @user.name) %>
<div class="row">
<aside class="span4">
<section>
  <h1>
    <%= gravatar_for @user %>
    <%= @user.name %>
  </h1>
</section>
</aside>
<div class="span8">
<% if @user.uploads.any? %>
  <h3>Uploads (<%= @user.uploads.count %>)</h3>
  <ol class="uploads">
    <%= render @uploads %>
  </ol>
  <%= will_paginate @uploads %>
<% end %>
</div>
</div> 
```

**上传.rb**

```
class Upload < ActiveRecord::Base
attr_accessible :title

belongs_to :user

validates :title, presence: true
validates :user_id, presence: true

default_scope order: 'uploads.created_at DESC'
end 
```

**用户.rb**

```
class User < ActiveRecord::Base
attr_accessible :name, :email, :password, :password_confirmation
has_secure_password
has_many :uploads, dependent: :destroy

before_save { |user| user.email = email.downcase }
before_save :create_remember_token

validates :name, presence: true, length: { maximum: 50 }
VALID_EMAIL_REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i
validates :email, presence:   true,
                format:     { with: VALID_EMAIL_REGEX },
                uniqueness: { case_sensitive: false }
validates :password, length: { minimum: 6 }
validates :password_confirmation, presence: true

private

def create_remember_token
  self.remember_token = SecureRandom.urlsafe_base64
end
end 
```

**来自 users_controller.rb**

```
 def show
  @user = User.find(params[:id])
  @uploads = @user.uploads.paginate(page: params[:page])
  end 
```

**20120524145724_create_uploads.rb**

```
class CreateUploads < ActiveRecord::Migration
def self.up
create_table :uploads do |t|
  t.string :title
  t.integer :user_id

  t.timestamps
  end
  add_index :uploads, [:user_id, :created_at]
end

def self.down
drop_table :uploads
end
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T23:15:18.927

运行迁移后，如果您对其进行更新，rails 将不会重新运行它（它不知道您进行了哪些更改）。

在编辑之前回滚迁移 (rake db:rollback)，或者创建一个添加额外列的新迁移。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T23:22:41.270

迁移有时可能会失败，如果你有一些错误，例如它不会工作。确保它确实运行了，您可以检查您的 sqlite 数据库以查看是否有 user_id

# xml - 引用 xml 的 AS3 组合框

> ID：10745672
> 
> 赞同：0
> 
> 时间：2012-05-24T21:38:19.250
> 
> 标签：xml, actionscript-3, flash, actionscript

我对动作脚本很陌生，我有这个场景。我有一个组合框“elementPicker”，我有一个从 XML 文件加载图像的项目，XML 文件的设置如下

```
<elements>
<head>
   <imgpath>/img/x.png</imgpath>
</head>
<head>...</head>
<head>...</head>

<eyes>...</eyes>
<eyes>...</eyes>
<eyes>...</eyes>
</elements> 
```

依此类推，所以在我的组合框中，我会有“头”、“眼睛”等选项。我想要的是基于组合框中的数据来更改将哪个 xml 元素加载到包含图像路径的数组中

我尝试了类似的东西

```
var comboSelection:String = elementPicker.selectedItem.label; 
```

然后，当我循环将路径放入数组时：

```
elementPathList.push(theXMLData.comboSelection.imgpath[ b ]); 
```

但这不起作用，输出显示：TypeError：错误＃1009：无法访问空对象引用的属性或方法。

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T21:52:08.597

不确定我是否完全理解这个问题，但类型错误告诉你 comboSelection （字面意思是，不是值，而是那个词）不作为 theXMLData 对象的属性存在，根据你发布的内容是正确的。

comboSelection 没有被“视为”为您创建的局部变量或它的值，而是作为 XMLData 对象的属性，因此它不是类型错误。

看来你想要做的是在列表中找到具有相应属性的项目，你可以使用 E4X 来实现这一点，谷歌它你会找到使用 e4x 的详细信息，它会类似于 theXMLData.(@nodeName=comboSelection) .head.imgpath。

但是，我认为更好的方法是使用值对象填充组合框，这些值对象既具有标签属性，又具有与对象直接关联的实际源路径。这样，您可以只使用 elementPicker.selectedItem.imgPath 而不是事后尝试在 XML 中查找它。此解决方案将使代码更少混乱且更快。如果您自己无法做到这一点，您可以发布更多关于您的组合框以及您如何在 XML 中加载的代码，我可以帮助您修改它以实现我所解释的内容。

如果代码很大，您可以将其发布到 pastebin 并在原始帖子中放置一个链接。

好吧，既然你安抚了我，我就试了一下，这是我的两个结果：

[http://www.shaunhusain.com/FlashAvaEditor/](http://www.shaunhusain.com/FlashAvaEditor/)

[http://www.shaunhusain.com/FlexAvaEditor/](http://www.shaunhusain.com/FlexAvaEditor/)

右键单击 flex 的源代码，我在这里打包了 FLA 的文件

[http://www.shaunhusain.com/FlashAvaEditor/FlashAvaEditor.zip](http://www.shaunhusain.com/FlashAvaEditor/FlashAvaEditor.zip)

让我知道您对这种方法的看法，或者我是否错过了目标。

# scheme - 定义和定义的区别*

> ID：10745684
> 
> 赞同：1
> 
> 时间：2012-05-24T21:39:19.253
> 
> 标签：scheme, gambit

原谅我的无知，但这两者有什么区别：

```
(define blah)
(define* blah) 
```

? 不幸的是，谷歌忽略了星号字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T05:28:39.063

[SRFI 89](http://srfi.schemers.org/srfi-89/srfi-89.html)是由 Gambit 的作者编写的，因此假设 Gambit 的`define*`所作所为是公平的。:-)

换句话说，它是语法糖`lambda*`（如 SRFI 89 中所述）而不是`lambda`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T00:34:03.077

在 Gambit Scheme 的（相当广泛的）[文档](http://www.iro.umontreal.ca/~gambit/doc/gambit-c.html)中，没有提到`define*`特殊形式；它可能是某些过程、定义、宏或特殊形式，只能在您看到的代码中找到。`define*`您应该发布一个引用正在使用的代码源的链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T07:44:43.773

这个问题的更多背景会很好。

有时 * 只是意味着表单做了一些额外的事情。因此，我的猜测是 define* 就像普通的定义一样工作，但同时做了一些额外的事情。这个额外的可能会自动从模块中导出名称。

这个定义是在 Racket ffi-lib 中找到的，说明了这个原理：

```
(define-syntax define*
  (syntax-rules ()
    [(_ (name . args) body ...)
     (begin (provide name) (define (name . args) body ...))]
    [(_ name expr)
     (begin (provide name) (define name expr))])) 
```

# php - 我应该为 AJAX Web 应用程序元素构建一个 REST api 吗？

> ID：10745686
> 
> 赞同：0
> 
> 时间：2012-05-24T21:39:28.753
> 
> 标签：php, jquery, codeigniter, rest

我看到了[这个](https://stackoverflow.com/questions/127228/should-a-web-app-use-its-own-public-api-to-display-data)问题，它提出了一些关于构建 RESTful API 的问题。对于我的应用程序，我想做一些类似于 Twitter 或 Facebook 的新闻提要的东西，在用户使用 jQuery 滚动页面时，它使用 AJAX 来拉取额外的提要信息。我不确定构建这个的最佳方法是什么。创建一个 REST api 来公开我只打算在我自己的 Web 应用程序中使用的这个功能是否有点矫枉过正？我需要考虑哪些权衡？

注意：该项目使用 PHP/CodeIgniter/jQuery

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T21:59:01.510

考虑一下 PHP 和 Javascript 最擅长的语言——那就是 JSON。所以，除非你想要完整的 RESTful 服务，否则为什么要做比 JSON 更复杂的事情呢？

RESTful 真的是为支持广泛的服务而设计的。你只需要一个。不要让自己变得更复杂。

# android - Android 清单文件-targetSDKVersion

> ID：10745687
> 
> 赞同：0
> 
> 时间：2012-05-24T21:39:31.173
> 
> 标签：android, android-manifest

如果我设置“targetSdkVersion=8”，应用程序能否在 Gingerbread 设备等上运行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T23:58:16.950

简而言之：是的，它将支持从`Android 2.2`(Froyo) 到当前`Android 4.0.4`(ICS) 的每个版本。以下是 API 级别的概述：

```
Android Version: API Level

Android 4.0.3:  15  
Android 4.0:    14 
Android 4.0.1:  14
Android 4.0.2:  14  
Android 3.2:    13  
Android 3.1.x : 12  
Android 3.0.x:  11  
Android 2.3.4:  10
Android 2.3.3:  10  
Android 2.3.2:  9
Android 2.3.1:  9
Android 2.3:    9   
Android 2.2.x:  8   
Android 2.1.x:  7   
Android 2.0.1:  6   
Android 2.0:    5   
Android 1.6:    4   
Android 1.5:    3   
Android 1.1:    2       
Android 1.0:    1 
```

我希望我能帮上忙

来源：http: [//developer.android.com/guide/appendix/api-levels.html](http://developer.android.com/guide/appendix/api-levels.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T21:43:06.613

它将在 Froyo 2.2 及更高版本的设备上运行......所以，是的。

# javascript - 如何使用 JAVASCRIPT 检查 HTML 表单的输入并在现场打印错误消息？

> ID：10745688
> 
> 赞同：0
> 
> 时间：2012-05-24T21:39:31.313
> 
> 标签：javascript, html

```
<script>
function validate(){
u=document.CustomerLogin.UserName.value;
p=document.CustomerLogin.Password.value;
rp=document.CustomerLogin.RePassword.value;

if (u==""){
 document.write("Enter a unique username");
 return false;
 }
if (p!=rp){
 document.write("Retype Password Incorrect");
 return false;
 }
return true;
}
</script> 
```

消息打印在单独的页面上，但我希望它们打印在文本框前面的同一位置！请帮忙。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T21:49:17.880

永远不要使用 Document write，它很危险......

document.getElementById("anidofanElementinthePage").innerHTML = " 要通过 javascript 添加的字符串";

```
<script>
function validate(){
u=document.CustomerLogin.UserName.value;
p=document.CustomerLogin.Password.value;
rp=document.CustomerLogin.RePassword.value;

if (u==""){
  document.getElementById("theIdOfyourTextBlocInForm").innerHTML = "Enter a unique username";
 return false;
 }
if (p!=rp){
 document.getElementById("theIdOfyourTextBlocInForm").innerHTML = "Retype Password Incorrect";
 return false;
 }
return true;
}
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T21:43:03.283

您需要检测文本更改。一种方法是使用它：

```
<input name="blah" onchange="validate()" ... /> 
```

**编辑** 要在同一页面上添加文本，请使用脚本包含脚本`<script src=...>`，然后`<div id='validation[i]'></div>`在每个输入旁边添加，其中每次`[i]`增加 1（因此 validation1 validation2 依此类推）。然后，使用`getElementById('validation[i]').innerHtml`更改值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T21:51:06.803

document.write 只会将消息附加到页面的末尾。最简单的解决方案是将其更改为这样的警报：

```
if (u==""){
 alert("Enter a unique username");
 return false;
} 
```

否则，您将需要创建新的 DOM 元素（在手之前或检测到错误时）以保存消息并将它们放置在输入旁边

# jsf - 浏览器倍数标签 - JSF 1.2 广告

> ID：10745690
> 
> 赞同：0
> 
> 时间：2012-05-24T21:39:32.640
> 
> 标签：jsf

我正在开发一个 `JSF 1.2`+`RichFaces`系统。这个系统是一种博客。用户可以创建自己的博客并对其进行管理。可以通过 url 类型访问博客：

```
www.meublog.com/NameOfBlog 
```

我使用了一个单一`Managed Bean`的会话范围来制作所有控件。当用户访问博客时，我使用过滤器通过 URL 识别正在访问的博客，将`ID`博客的 放入会话中并转发给博客索引。我使用此会话`ManagedBean`来控制博客视图中的所有内容。问题是浏览器在多个选项卡之间共享相同的会话。当用户`www.meublog.com/julio`在一个选项卡和`www.meublog.com/fulano`另一个选项卡上访问这样的博客时，我无法识别这两个博客，因为我只建立了一个会话。

我想知道是否有人知道这里的正确路径......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T22:09:59.910

出于您所面临的原因，您不应将请求范围的信息存储在会话范围中。使用请求范围的托管 bean，而不是根据请求 URI 进行初始化。[`ExternalContext`](http://docs.oracle.com/javaee/5/api/javax/faces/context/ExternalContext.html)您可以通过和/或获取大部分请求详细信息[`HttpServletRequest`](http://docs.oracle.com/javaee/5/api/javax/servlet/http/HttpServletRequest.html)。

例如，在 bean 的构造函数或`@PostConstruct`方法内部：

```
ExternalContext ec = FacesContext.getCurrentInstance().getExternalContext();

// If you use suffix mapping like *.jsf
String servletPath = ec.getRequestServletPath(); 

// Or if you use prefix mapping like /faces/*
String pathInfo = ec.getRequestPathInfo();

// Now initialize based on the value of either servletPath or pathInfo. 
```

### 也可以看看：

*   [如何选择合适的bean范围？](https://stackoverflow.com/questions/7031885/how-to-choose-the-right-bean-scope/7031941#7031941)

# dynamic - 在 compojure 中动态添加路由

> ID：10745693
> 
> 赞同：2
> 
> 时间：2012-05-24T21:40:12.737
> 
> 标签：dynamic, path, clojure, compojure

嗨，伙计们：我有一个“层次结构”风格的网站，有一个像这样的 defroutes 声明：

```
(defroutes main-routes
  (GET "/" [] (resp/redirect "/public/index.html")
  (GET "/blog" [] (resp/redirect "/public/blogs/index.html")
  (GET "/tools" [] (resp/redirect "/public/tools/index.html")) 
```

但是，我希望这些页面更具动态性——也就是说，我希望通过扫描 /blog 目录的内容来生成 index.html 页面，同样，对于 /tools 路由也是如此。

也就是说，最后，我希望路线看起来像这样：

```
(defroutes main-routes
      (GET "/" [] (resp/redirect "/public/index.html")
      (GET "/blog" [] (generate-index "/public/blog"))
      (GET "/tools" [] (generate-index "/public/tools"))) 
```

是否有通过 compojure 构建通过我的站点的动态路径的简单路线图？

更具体地说----关于如何构建一个（生成索引）函数来扫描输入的路径并返回所有文件的链接有什么建议吗？我认为 compojure 可能已经具有这样的功能，因为最近兴起了许多基于这种成语的博客平台。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T23:40:10.247

做你说的大部分是相当简单的。

您需要特别关注两件事，以及一些有助于您了解正在发生的事情的一般性阅读材料。

首先，您将要了解某种形式的 HTML 模板工具。虽然可以只构建必要的字符串，但如果你使用一个，事情会更简单。我已经为他们看到了两种不同的主要风格，选择哪种取决于你的口味。

*   [Hiccup](https://github.com/weavejester/hiccup)专注于获取 Clojure 数据结构并将其转换为 HTML
*   [Enlive](https://github.com/cgrand/enlive)专注于获取 HTML 模板文件并将它们转换为正确的最终形式

要实际获取文件列表，请考虑使用[`file-seq`](http://clojure.github.com/clojure/clojure.core-api.html#clojure.core/file-seq). 将文件名转换为适当的帖子名称和文件，然后将其用作数据以生成指向页面的链接。

您还想了解更多关于[Compojure 路由模板](https://github.com/weavejester/compojure/wiki/Routes-In-Detail)和关于[Ring Responses](http://mmcgrana.github.com/ring/ring.util.response.html)的更多信息。

Compojure 的路由模板可以很容易地传递路由参数，然后您可以从中生成响应。下面是一个简单的示例，它使用 html 页面名称作为参数提供一个简单的静态 html 文件。

```
(GET "/blog/:post" [post] (ring/file-response (str "/public/blogs/" post ".html"))) 
```

最后，考虑阅读 Compojure 和 Ring wiki 的其余部分。Ring wiki 提供了一些关于核心“事物如何工作”的非常好的信息。Compojure wiki 提供了一些关于如何最好地利用 Compojure 的很好的示例，它只专注于提供一种简单的方法——但远非唯一的方法——来处理路由并简化 Ring 的页面生成。

根据您希望站点的位置，我还考虑查看[Noir](http://webnoir.org/)，这是一个框架，可以很好地整合所有部分并解决过程中的一些常见问题。

# vim - 如何在 vim 中的搜索和替换中操作字符大小写？

> ID：10745694
> 
> 赞同：2
> 
> 时间：2012-05-24T21:40:18.900
> 
> 标签：vim, replace

例如，我有：

```
 double foo = 0.0;  
  double bar = 0.0; 
```

我想编写某种搜索来查找每个变量并将其更改为：

```
 double Foo = 0.0;  
  double Bar = 0.0; 
```

我不想一次做这一个变量（例如：%s/foo/Foo/g），而是一次全部做，接近

```
:%s/  double \(\w\+\)/  double \1/c 
```

（并以某种方式将 \1 的第一个字符大写）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T21:44:39.750

在替换子句中使用`\u`匹配的前缀：

一次一个：

```
:%s/ double \(\w\+\)/ double \u\1/c 
```

一次全部：

```
:%s/ double \(\w\+\)/ double \u\1/g 
```

如果要使整个匹配大写，请使用`\U`and`\E`分隔符：

```
:%s/ double \(\w\+\)/ double \U\1\E/g 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T21:46:27.017

使用\u

```
%s/ double \(\w\+\)/ double \u\1/c 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T22:01:57.463

```
s:\(\<double\>\)\(\<\w\+\>\):\1 \u\2:g 
```

or sume-such.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T21:48:48.957

无法让其他人工作，这对我有用：

```
:%s/\(double \)\<\(\w\)\(\w*\)\>/\1\u\2\L\3/g 
```

# reporting-services - 隐藏/显示取决于导出格式的文本框项目

> ID：10745699
> 
> 赞同：3
> 
> 时间：2012-05-24T21:40:43.843
> 
> 标签：reporting-services

导出为 excel 格式时需要隐藏文本框。我使用的是 SRSS 2008，而不是（SRSS 2008 R2），

我找到要隐藏的文本框的 Hidden 属性，并编写以下表达式：

```
=IIF(Globals!RenderFormat.Name = "EXCEL", True, False). 
```

但是在这个版本的 Reporting Services 中没有出现*“RenderFormat.Name”*选项，有人知道在 SRSS 2008 中执行此操作的其他方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T03:15:41.343

公开渲染格式的全局变量是[SSRS 2008 R2 的新功能](http://blogs.msdn.com/b/robertbruckner/archive/2010/05/02/globals-renderformat-aka-renderer-dependent-report-layout.aspx)。在 R2 之前，报告没有/没有办法知道用户选择了哪种格式来导出。

我认为您唯一的选择（除了升级到 R2）是创建两个版本的报告。一种用于导出到 EXCEL，另一种则不是。

# excel - 如何使用 URL 在特定单元格上打开 Excel

> ID：10745706
> 
> 赞同：0
> 
> 时间：2012-05-24T21:41:11.967
> 
> 标签：excel, url, format

我想要一个带有指向本地 Excel 文件中特定单元格的 URL 的 HTML 文件。例如，使用 file://temp/Workbook.xlsx#Sheet1!$A$5 打开 Workbook.xlsx 电子表格，光标已位于工作表 Sheet1 的 A5 处。找不到相应的 URL 格式。那可能吗？

# jquery - 如果选择选项空白，则选择选项 3

> ID：10745707
> 
> 赞同：0
> 
> 时间：2012-05-24T21:41:13.657
> 
> 标签：jquery, jquery-selectbox

提前感谢任何对此提供帮助的人。

我们在第一个下拉菜单中有一个空白选项。

```
<select id="Flags">
<option></option>
<option value="Corporate">Corporate.png</option>
<option value="Store2">Store2.png</option>
</select> 
```

如果选择了第一个空白选项，如何将其删除并选择“Store2”？

```
If $('#Flags option[value=""]')
Then .remove();
and $('#Flags').val ("Store2") 
```

非常感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T21:42:21.440

尝试这个：

```
$("#Flags").change(function() {
    if (!$(this).val()) 
        $(this).val("Store2");
}); 
```

最好只`Store2`使用非空白选项作为默认选项，因为如果他们选择空白项目，您可能会混淆您的用户，但看到“Store2.png”被选中。

# java - 为什么我的 CGI Java 到 HTML 输出最后会被截断？

> ID：10745715
> 
> 赞同：1
> 
> 时间：2012-05-24T21:42:14.290
> 
> 标签：java, html, cgi

我正在尝试使用类的 CGI 脚本将 Java 输出到 HTML。

我想知道为什么我似乎无法正确比较我正在检查的变量的值。该代码有效，但无法比较变量并且没有正确结束 HTML 代码。由于某种原因，它永远不会到达代码的末尾。（从不写出结束正文和 html 标记）

post.java

```
import java.io.*;

public class post {
    public static void main(String [] args) {       
        System.out.println("Content-Type: text/html\n\n");
        System.out.println("<HTML><BODY>");
        System.out.println("<h1>Here is your stupid user report:</h1>");
        String fullname = "";
        String address = "";
        String city = "";
        String state = "";
        String washhands = "";
        String takeshower = "";
        boolean stupidity = false;
        String comments = "";       
        String data = "";
        try {
            BufferedReader br = 
                new BufferedReader(new InputStreamReader(System.in));
            data = br.readLine();
        } catch(IOException ioe) {
          System.out.println ("IOException reading POST data: " + ioe);
        }               
        if (data.length() > 0) {
            String[] paramArray = data.split("&");      
            for(String param : paramArray){
                String[] paramVals = param.split("=");
                String paramName = paramVals[0];
                System.out.println(paramName + "<br/>");
                String paramVal = paramVals[1];
                System.out.println(paramVal + "<br/>");
                if (paramName == "fullname") fullname = paramVal;
                if (paramName == "address") address = paramVal;
                if (paramName == "city") city = paramVal;
                if (paramName == "state") state = paramVal;
                if (paramName == "washhands") washhands = paramVal;
                if (paramName == "takeshower") takeshower = paramVal;
                if (paramName == "stupidity") stupidity = true;
                if (paramName == "comments") comments = paramVal;
            }
            System.out.println("HELLOOOOO");
            if (fullname != ""){
                System.out.println("Here we have <font color=blue>" + fullname + "</font> ");
            }
            if (fullname == ""){
                System.out.println("Here's a <i>nobody</i> ");
            }
            if (address != ""){
                System.out.print("who lives on <font size=20>" + address + "</font> ");
            }
            if (city != ""){
                System.out.print("from the city of <u>" + city + "</u> ");
            }
            if (state != ""){
                System.out.print("in the state of <b><u>" + state + "</u></b> ");
            }
            if (washhands != ""){
                if (washhands == "no") System.out.print("who <b>doesn't</b> wash his/her hands after using the bathroom...");
                if (washhands == "yes") System.out.print("who washes his/her hands after using the bathroom...");
            }
            if (takeshower != ""){
                if (takeshower == "everyday") System.out.println("<center>He/she takes a shower everyday.</center>");
                if (takeshower == "never") System.out.println("<center>He/she never takes a shower.</center>");
            }
            if (stupidity == true){
                System.out.println("<tt>He/she is stupid.</tt>");
            }
            if (comments != ""){
                System.out.println("<h3>Here are what he thinks about this assignment:" + comments + "</h3>");
            }
        }           

        System.out.println("</BODY></HTML>");
    }
} 
```

我正在使用的 CGI 文件 - post.cgi（位于 /cgi-bin/post.cgi）

```
#!/bin/sh

java post 
```

我用来允许输入的 HTML 文件：post.html

```
<html>
<head>
<title>Lab 9 Form</title>
</head>
<body>
<h1>Embarrassing questions form</h1>
<form action="../cgi-bin/post.cgi" method="post" name="embarassmentform">
<label for="fullname">Name</label>
<input type="text" name="fullname" id="fullname" />
<br/><label for="address">Address</label>
<input type="text" name="address" id="address" />
<br/><label for="city">City</label>
<input type="text" name="city" id="city" />
<br/><label for="selectastate">State</label><select name="selectastate">
<option>NY</option>
<option>FL</option>
</select>
<p/>
<label for="washhands">Do you wash your hands after using the bathroom?</label>
<br/><input type="radio" name="wash" value="yes">Yes</input>
<br/><input type="radio" name="wash" value="no">No</input>
<p/>
<label for="takeshower">How often do you take a shower?</label>
<br/><input type="radio" name="shower" value="everyday">Every day</input>
<br/><input type="radio" name="shower" value="never">Never</input>
<p/>
<input type="checkbox" name="stupidity" value="stupid"/><label for="stupidity">Check this box if you're stupid.</label>
<p/>
<label for="comments">Questions and comments can go here</label><br/><textarea name="comments"></textarea>
<br/><input type="submit" name="submitButton" value="Submit the form" />

</form>

</body></html> 
```

如果您能指出任何可能的问题...调试输出有效，因为它设法输出变量值，但由于某种原因完全忽略了 if 语句。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T21:44:34.357

> 我想知道为什么我似乎无法正确比较我正在检查的变量的值。

因为您正在比较字符串*引用*是否相等，而不是比较*strings 的内容*。每次你使用类似的东西：

```
if (city != "") 
```

你要：

```
if (!city.equals("")) 
```

或者如果`city`可能为空：

```
if (!"".equals(city)) 
```

应用`==`和`!=`引用*总是*只是比较 Java 中的引用——没有运算符重载来允许比较对象的内容。

# windows - 使用 windows cmd.exe 在 eclipse/CDT 中调试应用程序

> ID：10745718
> 
> 赞同：1
> 
> 时间：2012-05-24T21:42:39.383
> 
> 标签：windows, eclipse

我正在 C 中制作一个 pdcurses 应用程序，使用 eclipse/CDT 作为 IDE。

默认情况下，Eclipse 使用自己的内置控制台来运行应用程序，但是当我调用该`initscr()`函数时，进程一开始就终止了。

我需要它来使用 cmd.exe 控制台运行和调试应用程序，而且我几乎可以肯定我过去曾这样做过。

我到处搜索，尝试了他们建议的所有可能的配置，我记得但这次没能做到。

你能给我一些启示吗？

谢谢你。

# ios - iPad 图像尺寸

> ID：10745719
> 
> 赞同：1
> 
> 时间：2012-05-24T21:42:45.357
> 
> 标签：ios

我正在为 iPad 创建一个应用程序，我从平面设计师那里获得的图像非常大，几乎是两倍大。

根据平面设计师的说法，这些图像是在 iPad 3 上创建的。因此，如果我将图像尺寸缩小到一半并使用它们，在 iPad3 上会不会有什么不同？

或者没有区别，并且两者都兼容。我是 iOS 开发的新手，不确定图像大小的详细调整。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T22:48:16.040

您将拥有每个图像的两个版本，其中一个是另一个大小的两倍，操作系统将决定使用哪个版本。您只需要正确命名图像。

ipad3 的图像名称中将包含@2x。例子

*   image.png <--- 非视网膜 ipad
*   image@2x.png <----- 视网膜 ipad (ipad3)

这是一篇解释更多的帖子：[为更高的分辨率准备你的 iPhone 应用程序](http://mobile.tutsplus.com/tutorials/iphone/preparing-your-iphone-app-for-higher-resolutions/)

# ruby-on-rails-3 - 验证失败时生成多个 (n) 相同的嵌套表单的平方时间 (n*n)

> ID：10745722
> 
> 赞同：1
> 
> 时间：2012-05-24T21:43:01.670
> 
> 标签：ruby-on-rails-3, nested-forms, nested-attributes

用户有两个地址 shipping(:address_type=0) 和 billing(:address_type=1) 每次提交和验证失败时，都会生成每个地址类型的 2 个经典嵌套表单的用户表单。

**楷模：**

```
class User < ActiveRecord::Base
    has_many :addresses, :dependent => :destroy
    accepts_nested_attributes_for :addresses
    validates_associated :addresses
end

class Address < ActiveRecord::Base
    belongs_to :user  
    validates :user, :address_type, :first_name, :last_name, :street
end 
```

**控制器**

```
class UsersController < ApplicationController

public
    def new
        @user = User.new
        @shipping_address = @user.addresses.build({:address_type => 0})
        @billing_address = @user.addresses.build({:address_type => 1})
    end

    def create
        @user = User.new(params[:user])
        if @user.save
            #fine
        else
            render => :new
        end
    end 
```

**不完整的表格**

```
=form_for @user, :html => { :multipart => true } do |ff|
    =ff.fields_for :addresses, @shipping_address do |f|
        =f.hidden_field :address_type, :value => 0

    =ff.fields_for :addresses, @billing_address do |f|
        =f.hidden_field :address_type, :value => 1

    =ff.submit 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T08:30:16.000

表格应如下所示：

```
=form_for @user, :html => { :multipart => true } do |ff|
    =ff.fields_for :addresses do |f| 
```

没有其他的。Addressess 已经是一个集合，所以你应该只有一个渲染。此外，“:addresses, @shipping_address” 使得它可以呈现地址和送货地址，即使它包含在@user.addresses 中。

新操作中内置的地址将显示在那里，因为它们在地址集合中。

**编辑**：

如果只需要这两个地址，可以排序后直接传给fields_for：

```
=form_for @user, :html => { :multipart => true } do |ff|
    =ff.fields_for ff.object.addresses.sort{|a,b| a.address_type <=> b.address_type } do |f| 
```

那应该这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T22:06:30.510

惊讶吗？我想不是，但我是。我发现我说的对吗？它愚蠢而简单。

当验证失败并再次呈现新操作（表单）时，没有@shipping_address 也没有@billing_address。但是@user 已经构建了 2 个地址，并且嵌套表单的行为正确，可以在第一次验证失败时分别渲染两次。

```
 def create
        @user = User.new(params[:user])
        if @user.save
            #fine
        else
          @user.addresses.clear
          @user_address = @user.addresses.build({:address_type => 0})
          @user_address.attributes = params[:user][:addresses_attributes]["0"]

          @billing_address = @user.addresses.build({:address_type => 1})
          @billing_address.attributes = params[:user][:addresses_attributes]["1"]
          render => :new
        end
    end 
```

# c++ - z 阶曲线中的下一次迭代

> ID：10745733
> 
> 赞同：2
> 
> 时间：2012-05-24T21:43:28.110
> 
> 标签：c++, bit-manipulation, quadtree, octree

我正在使用[这篇维基百科文章](http://en.wikipedia.org/wiki/Z-order_curve)中描述的技术构建一个四叉树。我将坐标存储在 2 维或 3 维数组中。

```
boost::array<unsigned int, 2 /* 3 */> coord; 
```

我需要一种方法来计算 z 顺序中下一个框的坐标。它可以通过交错位来工作，增加一而不是去交错，但这会变得非常复杂。我希望有一个类似于文章中 cmp_zorder(...) 方法的实现，它可以在不交错位的情况下工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T16:43:54.667

好的，这是“残缺”加法算法，`x`既是`y`输入也是输出，假设交错坐标中的最低位是（与[维基百科文章](http://en.wikipedia.org/wiki/Z-order_curve)`x`中的相同）

```
int carry = 1;
do
{
    int newcarry = x & carry;
    x ^= carry;
    carry = newcarry;
    newcarry = (y & carry) << 1;
    y ^= carry;
    carry = newcarry;
} while (carry != 0); 
```

我确实测试了它，但只有一点点。

# java - Spring 3.1 HandlerInterceptor 未被调用

> ID：10745736
> 
> 赞同：7
> 
> 时间：2012-05-24T21:43:37.490
> 
> 标签：java, spring

我遵循了 HandlerInterceptors 的文档。请注意，在新版本的 Spring 中：“配置的拦截器将应用于使用带注释的控制器方法处理的所有请求”。

以下是在一个 xml 配置文件中： ![在此处输入图像描述](../Images/945819c63eefaf43951ade6df9b0c414.png)

我有一个带注释的控制器，开头是这样的：

![在此处输入图像描述](../Images/375575d65a1896ce429d7a9f13f0265e.png)

当我请求一个执行控制器代码的 url 时，我的拦截器代码永远不会被调用。谁能解释一下为什么？

拦截器代码是：

```
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.springframework.web.servlet.handler.HandlerInterceptorAdapter;

public class DomainNameInterceptor extends HandlerInterceptorAdapter {
    public boolean preHandle(HttpServletRequest request,
                           HttpServletResponse response, Object handler) 
         throws Exception {
    System.out.println("Why is this not called?");
    return true;
  }
} 
```

我正在使用以下文档： [Spring Core 3.1.x 文档](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/)

我搜索了 HandlerInterceptor 并按照包含链接中文档中给出的示例进行操作。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-25T01:17:01.643

如果您使用 配置了 MVC 上下文`<mvc:annotation-driven/>`，那么我认为在基于此自定义命名空间定义 bean 时创建的 handlerMapping 将覆盖您定义的 handlerMapping。注册拦截器的更好方法是使用`<mvc:interceptors>`子标签来定义拦截器，这样它将注册到正确的 handlerMapping：

```
<mvc:annotation-driven>
    <mvc:interceptors>
        <ref bean="interceptor"/>
    </mvc:interceptors>
</mvc:annotation-driven> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-11T06:51:22.303

Biju 上面的回答是正确的，除非在 spring 3.1 中你必须这样做：

```
<mvc:interceptors>
   <mvc:interceptor>
     <mvc:mapping path="/pathToIntercept/**" />
     <bean class="com.foo.bar.Interceptor" />
   </mvc:interceptor>
</mvc:interceptors> 
```

# c# - 如何从 Type 对象中获取可为空的 Type 对象

> ID：10745740
> 
> 赞同：1
> 
> 时间：2012-05-24T21:44:21.847
> 
> 标签：c#, .net

实现此方法的最佳方法是什么：

```
Type GetNullableTypeFromType(Type tp); 
```

以便

```
Type tpString = GetNullableTypeFromType(typeof(string));   // Returns typeof(string)
Type tpInt = GetNullableTypeFromType(typeof(int));   // Returns typeof(int?) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-24T21:50:43.107

```
public static Type GetNullableType(Type t)
{
    if (t.IsValueType && (Nullable.GetUnderlyingType(t) == null)) 
        return typeof(Nullable<>).MakeGenericType(t); 
    else
        return t;
} 
```

# mysql - SQL 更新加入错误

> ID：10745742
> 
> 赞同：0
> 
> 时间：2012-05-24T21:44:23.480
> 
> 标签：mysql, sql, join

我已经阅读了有关加入 SQL 更新的其他一些问题，但无法完成查询。

系统全在 MySQL（INNODB 表结构）

我们希望更新一个表中的金额，该金额将根据另一个表中的 2 个变量增加金额。在更新中需要检查一些约束，以确保第二个表中的变量与要更新的表中的键匹配

> UPDATE
> as1 SET as1.amount = as1.amount + (b1.workers * b1.level)
> FROM account_stock AS as1
> INNER JOIN building AS b1 ON as1.accountID = b1.accountID
> INNER JOIN building_seed AS bs1 ON bs1.buildingID = b1.buildingID
> 其中 bs1.stockID = as1.stockID
> AND b1.accountID = as1.accountID
> AND b1.locID = as1.locID
> AND b1.status = active
> AND b1.gTime > 0

它出现错误，我无法选择它。对不起，如果这是一个简单的问题，我所有的 SQL 都是自学的，所以我的一些习惯不是很好！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T21:47:39.370

MySQL 的语法[`UPDATE`](http://dev.mysql.com/doc/refman/5.5/en/update.html)不同。没有`FROM`：

```
UPDATE 
    account_stock AS as1
  INNER JOIN building AS b1 ON as1.accountID = b1.accountID
  INNER JOIN building_seed AS bs1 ON bs1.buildingID = b1.buildingID

SET as1.amount = as1.amount + (b1.workers * b1.level)

WHERE bs1.stockID = as1.stockID
  AND b1.locID = as1.locID
  AND b1.status = active
  AND b1.gTime > 0 ;

  --- removed duplicate : 
  --- AND b1.accountID = as1.accountID 
```

另外：是`active`专栏还是您打算写？：`AND b1.status = 'active'`

# .net - 设置 ListView ItemTemplate 并获取 ObservableCollection 相关对象

> ID：10745750
> 
> 赞同：2
> 
> 时间：2012-05-24T21:44:54.847
> 
> 标签：.net, wpf, listview, observablecollection, itemssource

我有一个`ListView`，我将它的`ItemsSource`属性设置`ObservableCollection`为：

```
public class Item
{
    public string Name { get; set; }
} 
```

所以：

```
ObservableCollection data = new ObservableCollection<Item>();
MyList.ItemsSource = data; 
```

这是我的`ListView`：

```
<ListView x:Name="MyList">
    <ListView.ItemTemplate>
        <DataTemplate>
            <Button Click="Button_Click"/>
        </DataTemplate>
    </ListView.ItemTemplate>
</ListView> 
```

现在我向我的 ObservableCollection 添加一个新项目并捕获 Button_Click 事件：

```
Item item1 = new Item();
item1.Name = "item1";
data.Add(item1);

private void Button_Click(Button sender, RoutedEventArgs e)
{
    // How to get item1 here from sender?
} 
```

所以，我想获得与我点击的按钮相关的项目。我怎么能这样做？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T22:13:07.900

你的`Item`意志在`DataContext`其中：`ListViewItem``Button`

```
private void Button_Click(object sender, RoutedEventArgs e)
{
    Button button = sender as Button;
    Item item = button.DataContext as Item;
} 
```

# android - 当我动态添加视图时，EditText 上的键盘重叠

> ID：10745752
> 
> 赞同：3
> 
> 时间：2012-05-24T21:45:00.490
> 
> 标签：android

我正在动态添加视图（`RelativeLayout`with `EditText`）并使用方法`FrameLayout`设置它们的位置。`setTranslate`但在屏幕键盘上我的`EditText`.

我试过设置

```
android:windowSoftInputMode="stateHidden|adjustResize|adjustPan" 
```

在清单中，但仍然没有结果。我正在使用 11 SDK。

如何解决这个问题？

这是截图：

![在此处输入图像描述](../Images/923eff9b04bfc5f48208b70884eb8aea.png) ![在此处输入图像描述](../Images/34b6a4782f777f3814b955b5593d9352.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T05:29:26.970

正如您已经在 Manifest 中尝试过活动 android:windowSoftInputMode 一样。您可以通过将布局更改为相对并使您的 EditText **android:layout_alignParentBottom="true"**

参考这个[例子](https://stackoverflow.com/a/5401828/598170)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T07:59:51.757

用 . 围绕您的相对布局`<ScrollView>`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T16:41:24.183

将您的视图放在其中。ScrollView 只接受一个孩子，因此您可能需要将所有组件添加到 LinearLayout，然后将 LinearLayout 添加到 ScrollView 内。

```
<ScrollView
android:layout_width="fill_parent"
android:layout_height="fill_parent">  

</ScrollView> 
```

如果这不是您要查找的内容，请添加

```
android:layout_alignParentBottom="true" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-06T17:49:03.480

唯一对我有用的是在特定活动标记内的清单文件中进行更新，该活动标记托管其布局导致滚动问题的片段。解决方案由下式给出：

```
android:windowSoftInputMode="stateVisible|adjustPan" 
```

# hudson - 如何在 Jenkins 中制作预构建步骤脚本以跳过工作并使其成功？

> ID：10745753
> 
> 赞同：2
> 
> 时间：2012-05-24T21:45:06.800
> 
> 标签：hudson, jenkins, jenkins-plugins

我想在 Jenkins 作业中运行预构建步骤 shell/perl，并且在某些条件下，我希望它跳过其余的作业，但仍使其成功。有没有办法做到这一点？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T04:46:11.863

我使用通过[Groovy 插件](https://wiki.jenkins-ci.org/display/JENKINS/Groovy+plugin)运行的系统 Groovy 脚本构建步骤来完成：

```
def thr = Thread.currentThread()
def thisBuild = thr?.executable

thisBuild.setResult(hudson.model.Result.SUCCESS)
thisBuild.executor.interrupt(hudson.model.Result.SUCCESS) 
```

警告：某些插件（最突出的是运行条件插件）不能优雅地处理“中断构建”（尽管据我所知，它们必须这样做）并且如果构建步骤“属于”它们在该代码之后运行，那么构建将失败。

# ember.js - 创建一个可以显示其所有子视图或仅一个子视图的 EmberJS 视图的最佳习惯用法是什么？

> ID：10745754
> 
> 赞同：3
> 
> 时间：2012-05-24T21:45:10.827
> 
> 标签：ember.js

假设我有一个模型 App.Page、一个 App.Page 的 ArrayController 和一个 App.PageView 来渲染每个 App.Page。

我试图弄清楚如何最好地实现*App.MyPagesView*所以它的工作方式如下：

*   **如果*App.showAllPages*为真**：我希望 MyPagesView 包含一个 App.PageView(s) 用于显示 App.pages 中的每个 App.Page
*   **Else**：我希望 MyPagesView 只显示一个 App.PageView，绑定到 App.pages.currentPage。

我想到的最直接的实现是使用这样的模板：

```
// MyPagesViewApproach1
{{#unless App.showAllPages}}
    {{view App.PageView pageBinding="pages.currentPage"}}
{{else}}
    {{#each pages}}
        {{view App.PageView pageBinding="this"}}
    {{/each}}
{{/unless}} 
```

**但这不会在用户每次打开和关闭*showAllPages时为现有模型创建新视图吗？***此外，当我尝试使用此模板时，我会收到有关性能问题的 emberJS 警告。

PageView(s) 的渲染可能非常复杂且昂贵。我真的很想为每个页面创建一次 PageView，并在不使用时从 DOM 中删除/隐藏不相关的 PageView。

```
App = Ember.Application.create({
    showAllPages: false,
    pages: Ember.ArrayController.create({
        content: []
        currentPage: null
    }),
    ready: function () {
        this.pages.pushObject(App.Page.create({title: 'Page One'});
        this.pages.pushObject(App.Page.create({title: 'Some Other Page'});
        this.pages.pushObject(App.Page.create({title: 'Grrreatest Page Evar'});
        this.pagesController.set('currentPage',
            this.pagesController.get('firstObject'));
    }
});
App.Page = Ember.Object.extend({
    title: null
    // etc, etc...
});
App.PageView = Ember.View.extend({
    templateName: 'page',
    page: null    // should be bound to an App.Page
});

App.MyPagesView_Approach1 = Ember.View.extend({
    pagesBinding: 'Elicitation.pages'
    // ???
});
App.MyPagesView_Approach2 = Ember.ContainerView.extend({
    // ???
}); 
```

还有我的 HTML：

```
<script type="text/x-handlebars" data-template-name="page">
    The title of this page is {{ page.title }}
</script>

{{view App.MyPagesView }} 
```

**回顾一下，什么是正确的 EmberJS-y 方式来实现 MyPagesView 以便它响应*App.showAllPages*而无需在每次切换时重新创建所有视图？**

它应该是某种 ContainerView 吗？或者我应该使用问题顶部显示的除非/否则模板吗？还是完全不同的东西？我觉得 EmberJS 中存在一个非常简单的解决方案，但它使我难以理解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T00:01:12.697

这是我想出的最好的，封装为一个名为“CurrentCollectionView”的可重用视图类。我正在使用 CollectionView，并使用 view.set('isVisible') 来隐藏/显示适当的子视图。基本上像 CollectionView 一样使用它，但您可以将 currentContent 设置为隐藏除一个元素之外的所有内容，或者使用 showAllContent 覆盖 currentContent。

```
App.CurrentCollectionView = Ember.CollectionView.extend({
    showAllContent: false,
    currentContent: null,

    currentContentChanged: function () {
        console.log("Elicitation.PagesView.currentContentChanged()");
        var showAllContent = this.get('showAllContent');

        if (Ember.none(showAllContent) || !showAllContent) {
            var contents = this.get('content');
            var currentContent = this.get('currentContent');
            this.get('childViews').forEach(function (view, i) {
                var isVisible = contents.objectAt(i) == currentContent;
                view.set('isVisible', isVisible);
            });
        } else {
            this.get('childViews').forEach(function (view) {
                view.set('isVisible', true);
            });
        }
    }.observes('currentContent', 'showAllContent', 'childViews')
}); 
```

使用 CurrentCollectionView 实现 MyPagesView 的示例：

```
App.MyPagesView = App.CurrentCollectionView.extend({
    itemViewClass: App.PageView,
    contentBinding: 'App.pages',
    currentContentBinding: 'App.pages.currentPage',
    showAllContentBinding: 'App.showAllPages',
}); 
```

或将其内联用作模板：

```
{{view App.CurrentCollectionView itemViewClass="App.PageView" contentBinding="App.pages" currentContentBinding="App.pages.currentPage" showAllContentBinding="App.showAllPages"}} 
```

希望其他人发现这很有用和/或可以改进它（拜托！）

# internet-explorer-9 - Ckeditor 图像上传 - 单击确定时的自定义消息

> ID：10745757
> 
> 赞同：0
> 
> 时间：2012-05-24T21:45:34.443
> 
> 标签：internet-explorer-9, ckeditor, image-upload

通过 ckeditor 上传图像时，IE 9 不显示进度条。这是非常用户不友好的，因为用户看不到任何进展，并且不会等待一两分钟来上传大图像。

在对话框中，将图像发送到服务器后，必须单击确定按钮。

我的问题：单击确定按钮后，如何修改 config.js 或其他文件以显示简单的消息，例如“请稍候，我们正在上传您的图像。这可能需要一些时间”？

这是我的第一个问题，也是我第一次在这里找不到解决方案！！！

谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T13:47:23.987

CKEditor/CKFinder 确实有一个状态栏：

![状态栏图片](../Images/c3e9e620ef4226a552f862159ecd3efc.png)

您只需在“图像信息”选项卡中按“浏览服务器”，就会出现上述菜单。一个更简单的解决方案是让人们使用该功能而不是“上传”选项卡，后者没有任何传输指示符。无论如何，要修改对话框，请查看[这个示例页面](http://nightly.ckeditor.com/7487/_samples/api_dialog.html)（源代码有额外的信息）和[这个 API 页面](http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.dialog.html)。操作指南的[对话框窗口部分](http://docs.cksource.com/CKEditor_3.x/Howto)还解释了如何更改对话框。

# php - 当用户提供无效的返回电子邮件地址时，php联系表单不起作用

> ID：10745760
> 
> 赞同：0
> 
> 时间：2012-05-24T21:45:55.987
> 
> 标签：php, forms, contact

我有一个 PHP 联系表单，仅当用户提供有效的返回电子邮件地址（电子邮件格式正确，它不是有效的工作电子邮件）时，才会将表单数据发送给我。我无法看到任何他们提供的其他数据，即姓名、电话号码或评论。它永远不会影响到我。这是正常工作的方式吗？电子邮件系统是否真的检查格式有效的电子邮件地址实际上可以发送/接收电子邮件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T21:57:41.863

好吧，您可以像这样验证它是正确的电子邮件：

```
$result = filter_var($email, FILTER_VALIDATE_EMAIL);
if ($result == TRUE) {
   //is an email
   } else {
   //not an email
} 
```

[filter_var()](http://php.net/manual/en/function.filter-var.php)

[验证过滤器](http://www.php.net/manual/en/filter.filters.validate.php)

# php - 从多维数组中的 HTML 获取值并使用 PHP 计算值

> ID：10745763
> 
> 赞同：0
> 
> 时间：2012-05-24T21:46:15.537
> 
> 标签：php, arrays

我已经搜索但无法解决这个问题。

我正在开发一个应用程序，它将生成未知数量的项目，并让用户从每个项目的下拉列表中选择数量。例如。

```
Item(s) | price | Select qty
Rice     23      3
Beans    22      4
Eggs     52      5

...
...
...
unknown 
```

请问，我怎样才能在一个数组中捕获上述内容，并计算所有选定项目的总值和相应的费用？

我有以下 HTML 代码：

```
<form id='form1' name='form1' method='post' action='item_calc.php'>
<?php
    .....
while($t_row = mysql_fetch_assoc($get_items)) {

echo "<p><label>$t_row['$item_name']
<input type='text' READONLY name='item_price[]' value='$t_row['$item_price']' /></label>
<input type='text' READONLY name='item_fees[]' value='$t_row['$item_fee']' /> 
<select name="item_qty">
<option value="1">
<option value="2">
<option value="3">
<option value="4">
<option value="5">
</select>
</p><p>";

}

        echo "<label><input type='submit' name='submit'  value='Submit' /></label></p>
         </form>"; 
```

请问，我怎样才能获得所有选定项目的 item_price[] + item_fees[] * item_qty？

这是我尝试过的：

```
for ($i = 0; $i < count($_POST['item_price']); $i++) {
   // Do something here with $_POST['checkbx'][$i]

   foreach ($_POST['item_fees'] as $tkey => $tvalue) {
    //echo "Key: $tkey; Value: $tvalue<br>";
   }

   foreach ($_POST['item_price'] as $pkey => $pvalue) {
    //echo "Key: $pkey; Value: $pvalue<br>";
   }

   $total = $tvalue + $pvalue;

}
echo $total; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T22:54:50.790

我建议不要将费用和价格填入表格并从 POST 请求中读出。有些人会做一些坏事，比如 html 注入或[后期参数操作](http://www.cgisecurity.com/owasp/html/ch11s04.html "后参数操作")。您使他们能够使用操纵的 POST 参数向您发送带有自己的价格和费用的请求。

最简单的方法是使用 firefox 打开您的页面并使用 firebug 操作 price[] 和 fee[] 的值，然后按提交 - 即使输入是只读的！

我的提示 - 执行以下操作：

```
<select name="quantity[unique-id]">
  <option value="null">choose...</option>
  ...your options...
</select> 
```

其中 unique-id 是每个产品的唯一标识符，如数据库 ID。

然后在 php

```
foreach ($_POST['quantity'] as $uniqueId => $quantity) {
  //... don't forget to check $uniqueId and $quantity for injections (like sql injections)
  //skip the products with no numeric quantity value
  if (!is_int($quantity) || $quantity < 1) {
    continue;
  }
  $fee = getFeeFor($uniqueId); // from database?
  $price = getPriceFor($uniqueId); // from database?
  //... do what you want: $price + $fee * $quantity
} 
```

我希望这能帮到您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T09:11:59.720

1.  首先，当您引用数组时，不要在双引号字符串中包含单引号，您可能会遇到“封装字符串”错误。
2.  您还包括一个双引号字符串，`"item_qty"`其中可能会导致错误。
3.  关闭`option`标签`/>`作为最佳实践。
4.  您的`LABEL`标签使用不当。正确的语法是：`<label for='html_element_id'>My pretty label</label> <input id='html_element_id ... (my form control) ... />`并且对于复选框或单选以外的其他控件，它非常无用（尽管总是更加语义化和结构化）。
5.  您可以考虑使用 a`TABLE`而不是`P`标签来排列所有内容。更好的是，你可以使用 CSS 来排列东西，更好的做法。
6.  如果您对选择进行硬编码，则可能难以处理需求更改：如果您需要从 1 到 10 的数量怎么办？如果您选择使用文本框而不是`SELECT`怎么办？

    ```
    while($t_row = mysql_fetch_assoc($get_items)) 
    {
        // Generate quantity string - can change the $qty string
        // for any imput method you like

        $qtyName = "item_qty[]";

        $qty = "<select name='" . $qtyName . "'>";
        for ($i=1; $i<6; $i++)
        {
            // close the option tag as best practice!
            $qty .= "<option value='" . $i . "' />";
        }
        $qty .= "</select>";

        echo sprintf("<p>%s
        <input type='text' READONLY name='item_price[]' value='%s' /></label>
        <input type='text' READONLY name='item_fees[]' value='$s' /> " . $qty . "</p>",
        $t_row['item_price'],
        $t_tow['item_fee']);
    } 
    ```

收集数据很简单：

```
$sum = 0;
$fees = $_POST['item_fee'];
$qtys = $_POST['item_qty'];
$prices = $_POST['item_price'];
$total = count($prices);

for ($i = 0; $i<total; $i++)
{
    $item_fee = $fees[$i] + 0; // trick to filter only numerical values and avoid data tampering
    $item_price = $price[$i] + 0;
    $item_quantity = $qtys[$i] + 0;

    $item_total = $item_price + $item_fee * $item_quantity; 

    $sum += $item_total;

} 
```

我也同意，在您的表单中直接表示价格无论如何都会导致数据篡改，建议您检查数据库的用户给出了非常明智的建议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T22:39:43.657

```
$total = 0;
$fee = $_POST['item_fee'];
$qty = $_POST['item_qty'];

foreach($_POST['item_price'] as $k => $price) {
    $total += $price + ($fee[$k] * $qty[$k];
} 
```

不确定您是想要所有项目的总和，还是每个项目的总和。

如果想要每个项目的总数，请更改`$total += $price + ($fee[$k] * $qty[$k];`并`$total = $price + ($fee[$k] * $qty[$k];`删除第一行 ( `$total = 0;`)。

更改`<select name="item_qty">`为`<select name="item_qty[]">`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T15:23:24.197

我有一个**非常简单**的解决方案。

首先更改`<select name="item_qty">`为`<select name="item_qty[]">`

然后在你的`item_calc.php`，写这个

```
$itemprice = $_POST["item_price"];//tested with array(10,35,21)
$itemfees = $_POST["item_fees"];//tested with array(3,7,4)
$itemqty = $_POST["item_qty"];//tested with array(2,5,3)
$i = 0;
$total = 0;
foreach($itemprice as $price){
  $feesx = $itemfees[$i];
  $qtyx = $itemqty[$i];
  $calculated = ($price+$feesx)*$qtyx;
  $total = $total + $calculated;
  $i++;
}
echo $total;//echos 311 [{(10+3)*2}+{(37+7)*5}+{(21+4)*3}] 
```

我对其进行了测试，并且运行良好。希望这可以帮助`:)`

# objective-c - 将文档预加载到 iOS 应用程序中

> ID：10745768
> 
> 赞同：3
> 
> 时间：2012-05-24T21:46:28.347
> 
> 标签：objective-c, ios, filesystems

**情况**：我有一个 iOS 应用程序，它处理文件并让用户保存、编辑、打开这些文件并执行各种操作。我希望能够在用户打开应用程序（例如模板）以及他们自己的自定义文档时查看一些预制文档。

**问题**：我如何创建一个文档（或模板文件）并在用户安装我的应用程序并启动它（以及之前的所有时间）后让它出现在 Documents 文件夹中？

**背景**：此文档（将安装到应用程序文档目录中的文档）由我创建，而不是用户创建。

我知道要做到这一点，你需要将它保存在你的包中，然后当你的应用程序第一次运行时，默默地将它复制到文档目录中。我应该将它复制到 appDidFinishLaunchingWithOptions 方法还是我的 viewDidLoad 方法中并编写逻辑来检测它是否是应用程序第一次运行？

**我的代码**：在这个网页上： http: [//textsnip.com/d35fbc](http://textsnip.com/d35fbc)     但是当它运行时，它总是说：“文件不存在[在文档文件夹中]”，然后它告诉我它正在被复制。问题是，当我检查应用程序的文档文件夹时，它从不存在，它仍然在包中。

为什么不使用此代码复制它是如何工作的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T20:56:41.413

这些文件实际上必须添加到应用程序包中，然后在应用程序启动时静默复制。

以下代码将一个文本文件从我的包的顶层复制到文档目录（如果它尚不存在）。

```
NSFileManager *fileManager = [NSFileManager defaultManager];
NSError *error;
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];

NSString *txtPath = [documentsDirectory stringByAppendingPathComponent:@"txtFile.txt"];

if ([fileManager fileExistsAtPath:txtPath] == NO) {
    NSString *resourcePath = [[NSBundle mainBundle] pathForResource:@"txtFile" ofType:@"txt"];
    [fileManager copyItemAtPath:resourcePath toPath:txtPath error:&error];
} 
```

这段代码中唯一的缺陷是，如果用户删除了文件，当他们再次打开应用程序时，它会立即重新出现。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T21:53:08.320

正如您所说，您将它包含在您的应用程序包中（将其添加到您的项目中并确保它是您的目标的一部分）。然后你可以通过调用这样的东西来访问它的路径：

```
NSString *bundlePath = [[NSBundle mainBundle] pathForResource:@"MyTemplateDoc" 
                                                       ofType:@"extension"]; 
```

然后将其复制到应用程序的文档文件夹中。

```
NSString *docPath = <a path in your documents folder>
NSError *error = nil;
[[NSFileManager defaultManager] copyItemAtPath:bundlePath 
                                        toPath:docPath 
                                         error:&error];
if (error) {
    // handle copy error.
} 
```

# c - 在C中将表示前缀掩码的ipv6地址转换为整数格式

> ID：10745770
> 
> 赞同：2
> 
> 时间：2012-05-24T21:46:40.343
> 
> 标签：c, ipv6, mask

将表示前缀掩码的 IPv6 地址转换为整数的 C 代码是什么。

例如，此 IPv6 地址前缀掩码：FFFF:FFFF:FFFF:FFFF:0000:0000:0000:0000

将转换为 64

谢谢

需要将其从 sockaddr_in6 更改为 int

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T08:22:37.650

我的方法与 Zan 的方法有关，但可以解决`struct in6_addr`包含在 a 中的 a`struct sockaddr_in6`本质上是 16 个字符的数组的事实。

所以你应该遍历字节直到你找到一个值`!= 0xFF`。

```
int bits = 0;
struct in6_addr * addr = &((struct sockaddr_in6 *)ai_addr)->sin6_addr;
for (i=0; i<16; i++) {
    if (addr->s6_addr[i] == '\xFF') {
        bits += 8;
    } else {
        case (addr->s6_addr[i]) {
            '\xFE': bits += 7; break;
            '\xFC': bits += 6; break;
            '\xF8': bits += 5; break;
            '\xF0': bits += 4; break;
            '\xE0': bits += 3; break;
            '\xC0': bits += 2; break;
            '\x80': bits += 1; break;
            '\x00': bits += 0; break;
            default: complain();
        }
        break;
    }
} 
```

但是，正如 Zan 所写，最好保留已有的号码，如果需要，请生成掩码，而不是相反。

但是，@SamuelChampagne，真的：你真的应该接受有效的答案！有一天，人们会完全拒绝帮助你。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-25T04:04:14.453

找到位数的最好方法是永远不要忘记它们。由于 IPv6 要求通过地址/位方法指定位掩码，因此记录位并保留它。

如果你不这样做，那么这有点计数问题。由于这些位必须全部在开头，我会尝试通过一次检查 Word-Size 位来接近它。Word-Size 可能是 32 或 64。当它不再等于时`-1UL`，请检查半字大小、四分之一字大小和 1 个字节。对最后一个字节使用 256 项查找表。

可能有一些非常酷的位旋转方法可以非常快速地完成此操作。您必须自己查找。

# javascript - 添加另一个 javascript 时的 javascript 问题

> ID：10745772
> 
> 赞同：0
> 
> 时间：2012-05-24T21:46:49.933
> 
> 标签：javascript

我有以下脚本可以正常工作，直到我在下面添加其他 javascript...

标题标签中的第一个脚本

```
function validateForm() {   
    var valid = true;
    var errMsg = "";
    var email = document.emailform.email.value;
    var filter = /^([a-zA-Z0-9_.-])+@(([a-zA-Z0-9-])+.)+([a-zA-Z0-9]{2,4})+$/;

   if(email.length <= 0) {
      valid = false;
      errMsg += "Email address is required.\n";
   } else {
      if (!filter.test(email)) {
         valid = false;
         errMsg += "Please provide a valid email address.\n";
      }
   }   
   if (errMsg.length > 0) {
      alert(errMsg);
      return false;
   }
} 
```

就在我的结束标签之前......

```
$('#form').submit(validateForm); 
```

上面的工作正常，除了一旦我添加下面的脚本，`validateForm`就不再工作了。以下是在结束正文标记之前添加的。

```
cbr202=Math.random()*10000000000000000;document.write('<scr'+'ipt language="JavaScript" src="http://example.com/landing.php?lpip=411&202cb='+cbr202+'" type="text/javascript"></scr' + 'ipt>'); 
```

我似乎无法弄清楚是什么导致了这个问题。希望有经验的人能看出问题。

* * *

已解决：我想通了......这是由于我自己的马虎。我应该在 document.write 脚本下面而不是在它上面有 jquery 事件处理程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T21:50:28.957

您忘记在函数中添加结束 }。这导致了一个错误，并导致之后的任何 JS 都无法执行。

```
function validateForm() {   
    var valid = true;
    var errMsg = "";
    var email = document.emailform.email.value;
    var filter = /^([a-zA-Z0-9_.-])+@(([a-zA-Z0-9-])+.)+([a-zA-Z0-9]{2,4})+$/;

   if(email.length <= 0) {
      valid = false;
      errMsg += "Email address is required.\n";
   } else {
      if (!filter.test(email)) {
         valid = false;
         errMsg += "Please provide a valid email address.\n";
      }
   }   
   if (errMsg.length > 0) {
      alert(errMsg);
      return false;
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T22:00:56.020

src="http://mysite.com/landing.php?lpip=411&202cb='+cbr202 生成的 url 不存在。浏览器尝试使用 get 请求从 url 加载脚本并失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T01:16:31.393

```
cbr202=Math.random()*10000000000000000; 
```

我认为您需要更改以下相同的代码

```
var cbr202=Math.random()*10000000000000000; 
```

# regex - 正则表达式允许在匹配之间重用文字

> ID：10745775
> 
> 赞同：0
> 
> 时间：2012-05-24T21:47:08.830
> 
> 标签：regex

我想从这样的字符串中创建一组结果：

```
results|foofoofooresults|barbarbarbarresults|googoogoo 
```

我似乎无法让正则表达式一直工作到下一次出现“结果|”的边缘

```
1.results|foofoofoo

2.results|barbarbar

3.results|googoogoo 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T21:51:13.480

环顾四周

[http://www.regular-expressions.info/lookaround.html](http://www.regular-expressions.info/lookaround.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T21:51:15.477

对于您提供的示例，此正则表达式将起作用：

```
results\|(\w+)\1\1 
```

我无法从您的示例中确切知道您在寻找什么，但还有其他几种可能性，包括：

```
results\|\w+{9}
results\|(\w{3})\1\1
results\|\w+?(?=results) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T21:51:27.900

尝试这个：

```
results\|.*?(?=results\||$) 
```

`results|`这使用[前瞻断言](http://www.regular-expressions.info/lookaround.html)从一个匹配到下一个（或字符串结尾） 。

# java - 使用 Nimbus 外观时，JButton 在 JToolBar 中不可见

> ID：10745776
> 
> 赞同：0
> 
> 时间：2012-05-24T21:47:08.890
> 
> 标签：java, swing, nimbus, jtoolbar

我想知道是否有人可以解决我在`Nimbus`外观上遇到的以下布局问题。

问题是工具栏中的按钮不可见，因为`JToolBar`布局管理器没有正确考虑`JTextField`. `Metal`外观似乎没有表现出这个错误。

```
import java.awt.*;
import javax.swing.*;

public class TextFieldTest extends JFrame
{
    public TextFieldTest()
    {
        // Create the text field
        JTextField textField = new JTextField( 20 )
        {
            @Override
            public Dimension getMaximumSize()
            {
                return super.getPreferredSize();
            }
        };

        // Create the tool bar
        JToolBar toolBar = new JToolBar();
        toolBar.add( textField );
        toolBar.add( Box.createHorizontalGlue() );
        toolBar.add( new JButton( "Button" ) );

        // Layout the frame
        getContentPane().setLayout( new BorderLayout() );
        getContentPane().add( toolBar, BorderLayout.NORTH );
        setPreferredSize( new Dimension( 800, 600 ) );
        pack();
    }

    public static void main( String[] args )
    {
        SwingUtilities.invokeLater( new Runnable()
        {
            public void run()
            {
                TextFieldTest test = new TextFieldTest();
                test.setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );
                test.setVisible( true );
            }
        } );
    }
} 
```

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T21:58:18.267

Nimbus 中 JToolBar 的默认布局是：

```
class javax.swing.plaf.synth.SynthToolBarUI$SynthToolBarLayoutManager 
```

你应该设置它：

```
 toolBar.setLayout(new BoxLayout(toolBar, BoxLayout.X_AXIS)); 
```

# ruby - 如何从具有值作为数组的哈希中获取值？

> ID：10745777
> 
> 赞同：2
> 
> 时间：2012-05-24T21:47:13.537
> 
> 标签：ruby, arrays, hash

我有一个哈希：

```
a = {
  "person" => [
    {
      "age"     => ["0"],
      "details" => [
        {
          "hobby"    => ["6"],
          "interest" => ["programming"]
        }
      ]
    }
  ]
} 
```

我想获得“细节”的价值。最简单的方法是

```
a["person"].first["details"].first 
```

但是，它太长了，看起来不太好。我还有其他方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T22:06:46.433

从哈希中获取价值的原始代码对我来说看起来不错。如果您想做更好的事情，只需修改哈希：

```
a = {"person"=>{"age"=>["0"], "details"=>{"hobby"=>["6"], "interest"=>["programming"]}}} 
```

然后您可以以更好的方式获得访问权限：

```
a['person']['details'] #=> {"hobby"=>["6"], "interest"=>["programming"]} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T22:13:38.333

如果您的搜索条件基于哈希结构，最简单的方法是在访问命令中表示您所做的这个结构。

如果你想要少几个字符，这里是：

```
a["person"][0]["details"][0] 
```

如果您的搜索条件基于键名，您可以在 Hash 类中创建自己的函数来搜索嵌套哈希并执行以下操作：

```
a.search(:details).first 
```

如果您不喜欢方括号，请使用[https://github.com/intridea/hashie](https://github.com/intridea/hashie)并通过属性访问哈希中的数据：

```
a.person.first.details.first 
```

无论如何，你什么都做不了，因为你的代码对于任何 ruby​​ist 来说看起来都很平常。

# xslt - 使用 XSL 取消转义此模板中的转义字符

> ID：10745779
> 
> 赞同：0
> 
> 时间：2012-05-24T21:47:30.340
> 
> 标签：xslt

我有一个包含转义 HTML 的 XML 节点。样式表的输出方法是 HTML。

```
 <ORDCNFMNT>Line 1 of text &lt;BR /&gt; Line 2 of text</ORDCNFMNT> 
```

我想把“<” 和“>” 回到“<”和“>”以产生

```
 <ORDCNFMNT>Line 1 of text <BR /> Line 2 of text</ORDCNFMNT> 
```

现在用于处理这个节点的模板只取节点的值：

```
<xsl:template name="ordCnfmNtTmplt">
    <xsl:value-of select="ORDCNFMNT"/>
</xsl:template> 
```

我应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T04:38:57.963

XSL中没有`<xsl:replace>`元素，`fn:replace()`XPath 功能仅在 XPath 2.0 中可用。可以编写一个 XSL 模板来为您执行字符串替换，但在这种情况下，它不是正确的解决方案。

有效的 XML 文档不能包含文字或字符`<`，如果您要转换为另一个 XML 文档，那么 XSLT 将不允许您将它们放入。`>``&`

如果您正在使用转换为文本输出，`<xsl:output method="text" />`那么实体将自动为您翻译，而无需您明确执行。

无论哪种方式，XSLT 都会做正确的事情，而无需进行任何更改。

# javascript - Backbone.js 真的是 MVC 吗？

> ID：10745782
> 
> 赞同：18
> 
> 时间：2012-05-24T21:47:40.767
> 
> 标签：javascript, model-view-controller, model, backbone.js

Backbone.js 被称为 Javascript 的 MVC 框架。但是是吗？

这是模型的描述，来自[http://documentcloud.github.com/backbone/](http://documentcloud.github.com/backbone/)

> **模型**是任何 JavaScript 应用程序的核心，包含交互式数据以及围绕它的大部分逻辑：转换、验证、计算属性和访问控制。您可以使用特定于域的方法扩展 Backbone.Model，并且 Model 提供了一组用于管理更改的基本功能。

现在，这根本不是我对 MVC 模型的理解。在我的理解中，模型只是为域建模的类，因此您的学生、学校和教师对象。控制器确实对它们执行业务逻辑并与视图交互以显示和接收输入。

这种理解与我在网上找到的各种定义一致，IE [http://en.wikipedia.org/wiki/Model_view_controller](http://en.wikipedia.org/wiki/Model_view_controller)：

> **模型-视图-控制器 (MVC)**是一种用于计算机用户界面的设计模式，它将应用程序划分为三个责任区域：
> 
> *模型*：表示应用程序状态的域对象或数据结构。

所以，我的问题是：backbone.js 在某种意义上真的是一个 MVC 框架，还是只是一种帮助你将所有东西粘合在一起的通用方式？

顺便说一句，backbone.js 的常见问题解答中的模型定义似乎与我上面引用的不同（也来自backbone.js [http://documentcloud.github.com/backbone/#FAQ-mvc](http://documentcloud.github.com/backbone/#FAQ-mvc)：

> **Backbone.Model** – 就像 Rails 模型减去类方法。在业务逻辑中包装一行数据。

那么在什么意义上，backbone.js 是否真的是 MVC？

（警告：我目前正在评估backbone.js。）

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-24T21:54:05.067

Backbone 就是其中之一 MV*（MV-star）。没有*控制器*，因为操作应用程序的逻辑在视图中（类似于 M(V+C)）。

并且“模型”没有统一的定义，因为它在不同语言的不同框架中的使用方式不同。但通常，模型只是数据存储的抽象，并且可选地具有一些逻辑，如验证、格式化和状态更改挂钩。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-20T11:38:25.590

当您尝试查找“ **M** ”（**模型**）、“ **V** ”（**视图**）和“ **C** ”（**控制器**）时，它有点**令人困惑**。

 ******这样，我们总是可以就条款进行争论，但重要的是意图。

**将“条款**”与“**意图**”相交：

**他们” ：**

骨干**模型**。**Collections**与**Models**相关联。

**“V”：**

默认的**Underscore.js**模板代表标准**MVC的“****视图意图”**

 ****“C”：**

主干**视图**是**控制器**。它在主干中被称为**View**（就像在许多其他人中一样**Django**），因为它处理渲染。从**MVC**的角度来看，它是一个控制器。**路线**与**视图相关联**

现在，有时只是为了满足**MVC**的缩写，有些人称它为“**模型视图集合**”。但这是不应该说的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-24T21:57:50.317

我想你对名字很感兴趣。并非每个 MVC 框架都遵循相同的命名约定。例如，在 Django 中，控制器称为视图，视图称为模板。Backbone 遵循类似的命名模式。注意，Backbone 在视图部分非常灵活，不强制执行任何特定的模板库。

如前所述，Backbone 模型中包含的逻辑是模型关注的逻辑。标准关系数据库是模型（表）的集合，通常关心列中数据的类型。

通常会进入控制器（Backbone 的“视图”）的逻辑是处理瞬态会话数据、检查用户状态（例如经过身份验证，尽管您不会在 js 中这样做）、将视图绑定到模型（Backbone 确实正是这一点，根据用户操作和绑定模板管理模型的存储/创建位置和时间，以更新模型更改）。

因此，总而言之，Backbone 实际上非常适合 MVC，比大多数服务器端“MVC”框架要好得多，这些框架通常是真正的“PAC”框架（Presentation-Abstraction-Control）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-24T22:00:46.590

两者兼而有之。如果您正在查看模型的严格意义；也就是说，模型只是数据，那么没有。但是验证、转换等已经被放置在那里，因为 Backbone 相当以模型为中心。根据我自己的经验，我通常处理传统意义上的 Backbone 模型，因为该模型是应用程序对后端数据存储的表示，并且它所拥有的只是操作该数据的访问器方法。

关键是，尽管存在验证或执行访问控制等设施，但您可以选择遵循更经典的 MVC 模式。这完全取决于你。我喜欢 Backbone 的地方在于它为您提供了一个 MVC 引擎，您可以在该引擎上构建整个应用程序架构。如果你想遵循经典的 MVC 设计模式，你当然可以这样做。干杯!

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-12T19:43:55.280

如果你在 Backbone.js 中寻找控制器，你可能想看看这个：[http ://chance-an.github.com/backbone-mvc/](http://chance-an.github.com/backbone-mvc/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-24T22:46:13.153

在backbone.JS **MVC**代表**模型视图集合**...********

# c - 在 C 中通过套接字传输数据

> ID：10745786
> 
> 赞同：0
> 
> 时间：2012-05-24T21:48:31.250
> 
> 标签：c, arrays, sockets, udp

我有一个通过 Internet 套接字 (UDP) 传输数据的程序。所以定义了 char 数组作为数据包。例如`char packet1[] = 11`(header[2 digit]) + `192.168.100.158`(sender_IP[15 digit]) + `006`(TTL [3 digit])+... ( `11192.168.100.158006...`)。接收端根据数组的索引提取数据（例如0-1是header，2-16是sender_IP）。

我的问题是，当我将 sender_IP 定义为 [2-16] 并且 IP 地址短于 15 位（例如 192.168.100.5）时，接收方会错误地提取数据。我的问题是，即使 IP 地址是 15 位或 14 位（不添加额外字符来定义 sender_IP 的字符串长度），如何确保正确提取 sender_IP？

我正在考虑创建一个结构类型并定义类似`

```
struct packet {
   char header[1];
   char senderIP[15]
   , TTL[2];
  }; 
```

. 但我无法弄清楚该写什么而不是 `buf`在这一行上`sendto(s, buf, BUFSIZE, 0,(struct sockaddr *) &si_other, slen)`，因为`buf`我知道需要是 char 。我需要 ASCII 表示的 IP 地址作为发送一些数据到`sender_IP`address `(inet_aton(sender_IP, &si_other.sin_addr)`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T22:02:51.120

There is a way to copy it to a local struct which has one more byte to make place for an extra added NUL byte.

```
struct packet *in;
struct cooked_packet {
   char header[1];
   char sender_ip[1+ sizeof in->ip];
   char ttl[2];
   } this;

this.header = in.header;
strncpy(this.ip, in->ip, sizeof in->ip);
this->ip [ sizeof this.ip -1] = 0;
memcpy(this.ttl, ip->ttl, 2); 
```

UPDATE: This is one of these rare places where strncpy() could be useful.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T21:52:22.233

以 32 位整数形式发送 IP，或将字符串用零打包，使其长度合适，例如 192.168.100.005。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T21:52:38.567

使用像 = "!!!" 这样的限制组字符 或“xxx”并检测它以知道从哪里开始检测

# plugins - Adobe Flash 扩展目录

> ID：10745792
> 
> 赞同：0
> 
> 时间：2012-05-24T21:49:17.283
> 
> 标签：plugins, directory, flash-cs5.5

我通过 Adob​​e Extension Manager CS5.5 为 Adob​​e Flash CS5.5 安装了 Flash 扩展，但我想知道这个扩展目录在我的 Mac 上的位置。

有谁知道 Adob​​e 在哪里安装了这个扩展？我尝试了应用程序文件夹、库文件夹和应用程序支持文件夹，但仍然找不到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T22:00:43.413

/Users//库/Application Support/Adobe/Adobe Flash CS 5.5/Configuration/_/

要查看它安装了哪些文件，请查看该文件中的 Extensions/.mxi。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T17:40:42.707

该文件夹位于“Home”文件夹下的“Library”文件夹内。

这是路径（在我的电脑上）：

Finder > Go > Home (shit+command+H) > Library > Application Support > Adob​​e > Extension Manager CS5.5 > Configuration > Extensions

如果您的“Home”文件夹没有“Library”文件夹，则它是隐藏的，您需要打开终端并输入以下控制台代码行：`chflags nohidden ~/Library/`

再次打开“Home”文件夹，您应该会看到“Library”文件夹。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T12:14:29.203

我正在运行 Flash CS6 和里昂山，我的扩展位于：

/Users/用户名/库/Application Support/Adobe/Flash CS6/en_US/Configuration/Commands

# php - PHP动态返回多维数组

> ID：10745794
> 
> 赞同：0
> 
> 时间：2012-05-24T21:49:24.447
> 
> 标签：php, mysql, arrays, multidimensional-array

我在学习如何动态返回多维数组方面做了大量工作——但我似乎不知道如何嵌套它们。

我有两个表，每个表都有相同的格式：ID、名称。

表一：SSC-sscid-sscname

表二：srv-srvid-srvname

我要做的是在表一列表中的每个项目下打印表二中的所有项目。

表一项目是标题，表二项目作为复选框（以 srvid 作为值）和标签（srvname）返回。

我可以把它全部打印在一起，但它是一个。一个巨大的结果列表，它在一个

```
| checkbox | table 1: name | table 2: name | format. 
```

一点也不漂亮（尽管能走到这一步对我来说是一个进步）。

运行查询并获得结果后，我的代码如下所示：

现在，我对 re:the database tables go 的概念设计有了一些额外的想法，但是我读到的所有内容都表明它们确实需要在自己的表上，并且它们应该能够被 key 引用从一个表和另一个表的键（最终在一个带有用户 ID 引用的联合表中结束）因为它们是数字索引的，我不知道为什么这对我来说是个问题；但是我似乎无法让它正常工作。

我应该提到，当我更改代码以尝试使 ssc_name 跨越 2 列并使其更像标题时，它会为每个复选框/srv 行返回标题行，而不是为所有复选框/srv 行返回标题行。

```
if($result) {
    echo '<table border="1" align="center" cellspacing="3" cellpadding="3" width="300">
    <tr><th colspan="2"><h3>Options</h3></th></tr>
    <tr><td></td><td align="left"><b>Services</b></td></tr>';
    $numfields = mysql_num_fields($result);
    $data = array();
    $flist = array();
    for($i=0;$i<$numfields;$i++)$flist[] = mysql_field_name($result,$i);
    $data[0] = $flist;
    while($row = mysql_fetch_assoc($result)) {
        $data[] = $row;
        echo '<tr><td colspan="2" align="center"><b>' . $row['ssc_name'] .'</b><td></tr>
        <tr><td align="center"><input type="checkbox" value="'. $row['ssv_id'] .'" / </td>
        <td align="left">' . $row['ssvname'] . '</td>
        </tr>';
    }
    echo '</table>';
} 
```

谁能帮我解决这个问题，好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T20:32:31.610

`>`你在这条线上缺少一个

```
<tr><td align="center"><input type="checkbox" value="'. $row['ssv_id'] .'" / </td> 
```

应该

```
<tr><td align="center"><input type="checkbox" value="'. $row['ssv_id'] .'" /></td> 
```

您可能可以通过更好的格式获得一些东西......

```
<?php

    if ($result) {      
        echo <<<EOD
<table border="1" align="center" cellspacing="3" cellpadding="3" width="300">
    <tr>        
        <th colspan="2"><h3>Options</h3></th>       
    </tr>       
    <tr>    
        <td></td>       
        <td align="left"><b>Services</b></td>       
    </tr>
EOD;
        while ($row = mysql_fetch_assoc($result)) {         
            echo <<<EOD
    <tr>        
        <td colspan="2" align="center"><b>{$row['ssc_name']}</b><td>            
    </tr>       
    <tr>        
        <td align="center"><input type="checkbox" value="{$row['ssv_id']}" /></td>          
        <td align="left">{$row['ssvname']}</td>         
    </tr>           
EOD;
        }       
        echo '</table>';
    }

?> 
```

而且我不确定这些阵列中有哪些业务。

# ios - OpenGL/CoreGraphics 到页面卷曲层（不是动画）

> ID：10745795
> 
> 赞同：1
> 
> 时间：2012-05-24T21:49:44.117
> 
> 标签：ios, xcode, opengl-es, uiview, core-graphics

我正在尝试使用 CALayer 并在右下角放置一个小卷页。类似于 iPad 上 iOS 地图的外观。

我认为他们如何做到这一点是通过开始卷曲并将其停止在 0.004 左右，所以你所看到的只是角落被拉起。然后，当您点击它时，它会完成动画序列。

我在 iOS 5 上执行此操作，但似乎无法使其正常工作，我不确定 Apple 是否可以接受此实现。

这是它的样子：

![在此处输入图像描述](../Images/2e998508530ffd070f7dda5a3aea8532.png)

这是动画序列的开始和结束位置。

# java - 为什么在调用 onItemClick() 时对 ListVIew 中显示的每一行再次调用 getView()？

> ID：10745798
> 
> 赞同：2
> 
> 时间：2012-05-24T21:50:00.190
> 
> 标签：java, android

为什么每次在带有自定义适配器的 ListView 上调用 onItemClick() 事件时，都会再次调用适配器中的 getView() 方法？

我在 API 级别 7 中有以下代码，当我尝试更改行的 CheckedTextView 对象（存储在[ViewHolder](http://developer.android.com/training/improving-layouts/smooth-scrolling.html#ViewHolder)中）中的选中值时，会调用每行的适配器 getView() 并且我得到了一个奇怪的行为（选定的listView 中的行选中/取消选中另一行中的 CheckedTextView）：

活动的代码是：

```
public class EnvioImagenesActivity extends Activity implements OnItemClickListener {

    ListView listView;
    private EnvioImagenAdapter adapter;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.envio_imagenes);
        listView=(ListView) findViewById(R.id.listViewEnvios);
        adapter=new EnvioImagenAdapter(this,Store.getImages());
        listView.setAdapter(adapter);
        listView.setOnItemClickListener(this);
    }

    public void onItemClick(AdapterView<?> arg0, View view, int pos,
            long id) {
        ViewHolder holder=(ViewHolder) view.getTag();
        holder.checkedTextView.toggle();
    }

} 
```

Xml 布局活动的代码是：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_height="fill_parent"
    android:layout_width="fill_parent"
    android:orientation="vertical">

    <TextView
        android:id="@+id/textView1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/envioImagenes"
        android:textAppearance="?android:attr/textAppearanceLarge" android:gravity="center"/>

    <ListView
        android:id="@+id/listViewEnvios"
        android:layout_width="fill_parent"
        android:layout_height="0dip"
        android:layout_weight="1"
      android:choiceMode="multipleChoice">

    </ListView>

</LinearLayout> 
```

列表视图适配器：

```
 public class EnvioImagenAdapter extends BaseAdapter {

        private List<ImageUri> items;
        private Context context;

        public EnvioImagenAdapter(Context context, List<ImageUri> items) {
            this.context=context;
            this.items = items;
        }

        public int getCount() {
            return items.size();
        }

        public Object getItem(int position) {
            return items.get(position);
        }

        public long getItemId(int position) {
            return position;
        }

        public View getView(int position, View convertView, ViewGroup parent) {
            System.out.println("---getView() method called");
            View v = convertView;
            ViewHolder holder;
            if (v == null) {
                LayoutInflater vi = (LayoutInflater) context
                        .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                v = vi.inflate(R.layout.row_envio_imagen, null);
                holder = new ViewHolder();
                holder.imageView = (ImageView) v.findViewById(R.id.imageView1);
                holder.textView = (TextView) v.findViewById(R.id.textView1);
                holder.temporalProgressBar = (ProgressBar) v
                        .findViewById(R.id.progressBar1);
                holder.checkedTextView = (CheckedTextView) v
                        .findViewById(R.id.checkedTextView12);
                holder.selected = true;
                holder.position = position;
                v.setTag(holder);
            } else {
                holder = (ViewHolder) v.getTag();
            }
            ImageUri imageUri = items.get(position);
            File f = new File(imageUri.getImageUri().getPath());
            String fileSize = Util.formatFileSize(f.length());
            holder.textView.setText(fileSize);
            new ImageTask(imageUri).execute(holder);
            return v;
        }

        class ImageTask extends AsyncTask<ViewHolder, Void, Bitmap> {

            public ImageTask(ImageUri imageUri) {
                this.imageUri = imageUri;
            }

            private ImageUri imageUri;
            private ViewHolder viewHolder;

            @Override
            protected Bitmap doInBackground(ViewHolder... params) {
                viewHolder = params[0];
                Bitmap bmp = BitmapFactory.decodeFile(imageUri.getThumbUri()
                        .getPath());
                return bmp;
            }

            protected void onPostExecute(Bitmap result) {
                super.onPostExecute(result);
                viewHolder.temporalProgressBar.setVisibility(View.GONE);
                viewHolder.imageView.setVisibility(View.VISIBLE);
                viewHolder.imageView.setImageBitmap(result);
            };

        }

        class ViewHolder {
            public int position;
            CheckedTextView checkedTextView;
            ProgressBar temporalProgressBar;
            ImageView imageView;
            TextView textView;
            boolean selected;
        }

    } 
```

每行的xml布局是：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="?android:attr/listPreferredItemHeight"
    android:padding="6dip" >

    <ProgressBar
        android:id="@+id/progressBar1"
        android:layout_width="45dip"
        android:layout_height="45dip"
        android:layout_alignParentLeft="true" />

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="45dip"
        android:layout_height="45dip"
        android:layout_alignParentLeft="true" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingLeft="5dip"
        android:layout_toRightOf="@id/imageView1" />

    <CheckedTextView
        android:id="@+id/checkedTextView12"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:checkMark="?android:attr/textCheckMark"
        android:checked="true" 
        android:layout_alignParentRight="true">
    </CheckedTextView>

    <ProgressBar
        android:id="@+id/progressBar2"
        style="?android:attr/progressBarStyleHorizontal"
        android:layout_height="wrap_content"
        android:layout_width="0dip"
        android:layout_below="@+id/textView1"
        android:layout_toLeftOf="@id/checkedTextView12"
        android:layout_toRightOf="@id/imageView1"
        android:paddingLeft="5dip"
        android:paddingTop="2dip" />

</RelativeLayout> 
```

当我在模拟器中运行应用程序并连续单击时，我在 LogCat 中获得：

```
System.out(2947): ---getView() method called 
```

对于列表中显示的每一行。

**提前致谢！！！！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-12-12T21:45:15.320

我在导致的代码中遇到了类似的问题

```
ListView.setChoiceMode (ListView.CHOICE_MODE_SINGLE); 
```

当您单击每个项目的项目 getview 再次召唤时，在您的情况下，您可以尝试删除`android:choiceMode="multipleChoice"`

也许这会对你有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T20:20:18.203

我注意到从 getView() 外部访问视图很少会产生预期的行为。我想这是因为回收机制。两个替代选项有效：

1)`onClick()`实施`getView()`

2）如果您想将您的逻辑排除在适配器之外，`onItemClick()`请更改基础数据并调用`adapter.notifyDatasetChanged()`. 复选框将切换。

# nhibernate - 另一个 log4net，流畅的 nhibernate 配置问题

> ID：10745801
> 
> 赞同：0
> 
> 时间：2012-05-24T21:50:19.020
> 
> 标签：nhibernate, fluent-nhibernate, log4net

这让我发疯......我花了半天时间试图扭转一切，但我无法让 log4net 吐出任何关于 NHibernate 的信息。

这是我当前的 Fluent NHibernate 配置：

```
var configuration = Fluently.Configure()
    .Database(SQLiteConfiguration.Standard.UsingFile(AppConstants.PATH_FILENAME_DB))
    .Mappings(m => m.FluentMappings.AddFromAssemblyOf<...>())
    [...Mappings...]
    .Diagnostics(x => x.Enable()); 
```

我的 app.config：

```
<configSections>
  <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler, log4net"/>
</configSections>

<log4net>
  <appender name="LogFileAppender" type="log4net.Appender.FileAppender">
    <param name="File" value="data/log/unprocessed.log"/>
    <param name="AppendToFile" value="true"/>
    <layout type="log4net.Layout.PatternLayout">
      <param name="ConversionPattern" value="%d [%t] %-5p %c %m%n"/>
    </layout>
  </appender>

  <appender name="ConsoleAppender" type="log4net.Appender.ConsoleAppender">
    <layout type="log4net.Layout.PatternLayout">
      <param name="ConversionPattern" value="%d [%t] %-5p %c %m%n"/>
    </layout>
  </appender>

  <logger name="NHibernate.SQL" additivity="false">
    <level value="ALL"/>
    <appender-ref ref="LogFileAppender"/>
  </logger>

  <root>
    <level value="INFO"/>
    <appender-ref ref="LogFileAppender"/>
  </root>
</log4net> 
```

我可以在初始化主表单后立即记录内容：

```
log4net.Config.XmlConfigurator.Configure();
logger.Info("Here is a debug log!!"); 
```

它100％有效。但是我无法从 Nhibernate 中得到任何东西。

我试过了：

*   在我的 Fluent NHibernate 配置中设置 ShowSql() => SQL 出现在 VS 控制台中。
*   添加 NHibernate 记录器
*   去除可加性
*   使用 ConsoleAppender 而不是 LogFileAppender （尽管我从应用程序获取常规日志，但输出中仍然没有 SQL）
*   重新编译 Fluent NHibernate，尝试了 3 个不同版本的 log4net ...

我的 Fluent Nhibernate 映射很好，我的应用程序在没有 log4net 的情况下也能完美运行。

我仍然无法记录来自 NHibernate 的任何查询...不知道发生了什么，但如果您有任何线索，我会很乐意尝试！！！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T07:41:08.767

好吧，我最终找到了问题...

我所有的 DLL 都位于 /lib 文件夹而不是输出文件夹中。

我的 app.config 的一部分有这个：

```
<supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/></startup>
<runtime>
  <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
    <probing privatePath="lib"/>
    <dependentAssembly>
      <assemblyIdentity name="System.Data" publicKeyToken="b77a5c561934e089"/>
      <bindingRedirect oldVersion="2.0.0.0" newVersion="4.0.0.0"/>
    </dependentAssembly>
  </assemblyBinding>
</runtime> 
```

将 log4net.dll 放在我的输出文件夹中解决了这个问题。

# android - Android cassandra 客户端示例

> ID：10745802
> 
> 赞同：1
> 
> 时间：2012-05-24T21:50:26.693
> 
> 标签：android, cassandra

我需要更新一个 Android 应用程序才能与 Cassandra 数据库通信。任何人都可以向我指出一个示例或库来支持这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T21:53:28.223

通常，您不会直接执行此操作。您应该开发适当的 API（可能是 Web 服务、RESTful 或其他方式）或移动网站。然后，您的 Web 服务/站点将位于 Android 应用程序和 Cassandra 之间。您可以使用您选择的服务器端语言和框架。

**编辑**：一个很好的尝试方法是带有[JAX-RS](http://en.wikipedia.org/wiki/JAX-RS)的 RESTFUL API 。

# ruby-on-rails - Rails 自定义验证打破了我的测试

> ID：10745805
> 
> 赞同：0
> 
> 时间：2012-05-24T21:50:34.740
> 
> 标签：ruby-on-rails, ruby, validation, activerecord

我有以下包含许多订单项的购物车模型。它仅包含一种添加新行项目并增加其数量的方法。

```
class Cart < ActiveRecord::Base
  has_many :line_items, dependent: :destroy
  validate :cart_total_price_cannot_be_greater_than_500

  def add_product(product_id)
    current_item = line_items.find_by_product_id(product_id)

    # Updates quantity or add a new line item
    if current_item
      current_item.quantity += 1
    else
      current_item = line_items.build(product_id: product_id)
              current_item.quantity = 1
      product = Product.find(product_id)
      current_item.product_price = product.price
    end

    current_item
  end

  def cart_total_price
    line_items.to_a.sum { |item| item.product_price * item.quantity }
  end

  def cart_total_price_cannot_be_greater_than_500
    if cart_total_price > 500 
      errors.add(:base, "has a too high price") 
    end
  end
end 
```

订单项模型如下：

```
class LineItem < ActiveRecord::Base
  belongs_to :product
  belongs_to :cart

  def total_price
    product.price * quantity
  end
end 
```

以下测试工作正常：

```
require 'test_helper'

class CartTest < ActiveSupport::TestCase
  fixtures :products

  test "add duplicated products to cart" do
    cart = Cart.create

    # :ruby is a product
    cart.add_product(products(:ruby).id).save
    cart.add_product(products(:ruby).id).save

    assert_equal 1, cart.line_items.size
    assert_equal 2, cart.line_items.first.quantity
  end
end 
```

一切顺利，直到我添加了第三行`validate :cart_total_price_cannot_be_greater_than_500`。这现在打破了我的测试，我收到以下错误`rake test`：

```
Finished tests in 0.294143s, 23.7979 tests/s, 84.9927 assertions/s.

  1) Failure:
test_add_duplicated_products_to_cart(CartTest) [/home/luca/Documents/Sites/depot/test/unit/cart_test.rb:14]:
<2> expected but was
<1>. 
```

我做错了什么？如果我注释掉 validate 方法，测试将正确通过。

PS我的第二个问题是：为什么如果我在cart_total_price方法上调用sum之前不添加“to_a”方法它不起作用？

谢谢！

**编辑：**关于第二个问题，不是 to_a 方法在不执行求和的情况下查询数据库吗？我想在数据库而不是服务器端执行计算。我正在从 .NET 和 LINQ 学习 Rails，我可以使用：

```
int sum = dbContext.LineItems.Where(l => l.CartId == cartId).Sum(l => l.Quantity * l.ProductPrice) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T22:35:12.910

这有点复杂。首先考虑无验证情况。

你打电话`line_items.find_by_product_id`和`line_items.build`。这些实际上都不会导致 line_items 关联被加载，因此在测试的最后一行中，您要求`cart.line_items.first`从数据库中新加载行项目，数量 == 2。

在第二种情况下，您的验证（在`Cart.create`调用时运行）强制 rails 尝试从数据库加载关联（此时为空）。当你构建你的 line_item 时，这个构建的对象被添加到加载关联的缓存中（数量 == 1）

然后您再次添加该产品。`line_items.find_by_product_id`从数据库中获取产品。由于 activerecord 没有标识映射，因此这实际上是与缓存中保存的行项目不同的 ruby​​ 对象（尽管它引用相同的数据库对象）。该（现在陈旧的）对象仍然有数量 == 1，尽管数据库中的行的数量为 2。

当您请求`cart.line_items.first`rails 时，发现它已经加载了该关联，因此将第一次调用 add_product 时的缓存行项目对象返回给您，该对象具有陈旧的数量值。因此，您的断言失败。

`cart.reload`添加产品后，您可以通过调用使您的规范通过。

要回答您的第二个问题，这是因为`to_a`Array#sum 中的结果被调用，而没有它，您想要对需要一组不同参数的行项目进行 SQL 求和。

# python - Pygame旋转导致图像结结巴巴

> ID：10745806
> 
> 赞同：1
> 
> 时间：2012-05-24T21:50:38.910
> 
> 标签：python, pygame

老实说，我不知道为什么这不起作用。旋转导致图像不断放大和缩小。我环顾四周，并没有找到解决我问题的方法。主[http://tinypaste.com/1c5025fa](http://tinypaste.com/1c5025fa) 模块[http://tinypaste.com/f42f9c58](http://tinypaste.com/f42f9c58)

也有人可以解释为什么这个程序的盒子突然停止旋转？等'http://tinypaste.com/82b3b30e'（去掉引号，我不允许发布超过2个超链接）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T05:21:09.023

据我所知，您看到的缩放是旋转操作如何工作的一种人工制品。当一个矩形被旋转时，边界框必然会比原来的矩形大。例如，请参见下图中的蓝色矩形。R 是矩形的半径......所以当它旋转时，矩形扫过第二张图像中红色圆圈所覆盖的区域。旋转的边界框现在是灰色矩形。pygame 必须同时填充红色区域和灰色区域。pygame用什么颜色填充填充区域？

pygame.transform.rotate[文档](http://www.pygame.org/docs/ref/transform.html#pygame.transform.rotate)说...

“除非旋转 90 度增量，否则图像将被填充更大以保持新大小。如果图像具有像素 alpha，则填充区域将是透明的。否则 pygame 将选择与表面颜色键或左上角像素值匹配的颜色。”

因此，解决方案是显式设置图像的颜色键或 alpha 值（在您的情况下，当您构建 saved_image 表面时。）然后，当 save_image 旋转时，新生成的图像将填充填充区域合适的颜色。

试一试，看看是否可行。

![在此处输入图像描述](../Images/3042f7e8dd270e055ebcbebaabfdb1fc.png)

# java - 如何在 Java 中使用带有值的终端参数？

> ID：10745811
> 
> 赞同：1
> 
> 时间：2012-05-24T21:50:57.117
> 
> 标签：java, terminal, arguments

对于我的学校项目，我正在为 iPhone 创建一个像 Bad Apples 这样的游戏（不是我个人的选择，但这不是问题）。

游戏需要有两个版本，第一个在控制台，第二个在 JavaFX。但我想更进一步。我想添加用户在启动游戏时可以添加到终端的参数，例如

> java -jar BadApplesClone.jar --height=10 --width=10 --numPieces=5

然后我将处理所有引入的值并更改变量。

我正在使用 OpenJDK6，所以我现在这样做：

```
 for (int i=0; i<args.length; i++)
    {
        if (args[i].equals("--help"))
            throw new UnsupportedOperationException("Not yet implemented");

        if (args[i].equals("--largura"))
            throw new UnsupportedOperationException("Not yet implemented");

        if (args[i].equals("--altura"))
            throw new UnsupportedOperationException("Not yet implemented");

        if (args[i].equals("--pecas_inicio"))
            throw new UnsupportedOperationException("Not yet implemented");

        if (args[i].equals("--javafx"))
        {
            JavaFX javaFX = new JavaFX(ALTURA, LARGURA, PECAS_INICIO);
            javaFX.initJogo();
        }
    } 
```

但我不知道如何处理 --width=10 之类的值。我想到了一个枚举，但我真的不知道该怎么做。

谁能解释我实现这一目标的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T21:54:43.903

如果您被允许使用外部库，请查看[Apache Commons CLI](http://commons.apache.org/cli/)，这将使您免于重新发明轮子。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T22:25:25.863

要回答您实际提出的问题...

args 数组的某些元素采用“--SOMETHING=ANOTHER”形式。

所以，你首先需要的是：

```
if(args[x].startsWith("--SOMETHING")) { 
```

第二个问题是解析 ANOTHER。

```
args[x].split("=") 
```

是开始的地方。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T21:56:06.660

如果您使用的是 JavaFX，您可以`getParameters`在 Application 类中使用该方法（请注意，*不是*在构造函数中），它处理来自命令行以及来自 jnlp 文件的**两个参数！**

> public final Application.Parameters getParameters()
> 
> 检索此应用程序的参数，包括在命令行上传递的任何参数以及在小程序或 WebStart 应用程序的 JNLP 文件中指定的任何参数。注意：不应从 Application 构造函数调用此方法，因为它将返回 null。它可以在 init() 方法中或之后的任何时间调用。

[http://docs.oracle.com/javafx/2/api/javafx/application/Application.html#getParameters](http://docs.oracle.com/javafx/2/api/javafx/application/Application.html#getParameters) ()

有关更多详细信息，请参阅返回对象的文档：http: [//docs.oracle.com/javafx/2/api/javafx/application/Application.Parameters.html](http://docs.oracle.com/javafx/2/api/javafx/application/Application.Parameters.html)

它处理命名和未命名（当然总是可以获取原始参数）。

> **`Map`您从调用中获得的**命名参数**`getNamed()`包括在 JNLP 文件中明确指定的那些对。它还包括以下形式的任何命令行参数：“--name=value”**
> 
>  ****`List`您通过调用获得的**未命名参数**`getUnnamed()`是您今天在代码中已经处理的简单参数，这意味着命名参数（即表示为对的参数）从 this 中过滤掉`List`。****

 ***** * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-24T22:07:21.053

在这篇博文中有一个关于 JavaFX 和命令行参数的有趣讨论： [Exploring JavaFX 2 - Accessing application parameters](http://nagaimasato.blogspot.com/2012/05/javafx-and-application-parameters.html)，其中作者建议您“让[Application.getParameters()](http://docs.oracle.com/javafx/2/api/javafx/application/Application.html#getParameters%28%29)充当传输器并要求 Apache Commons CLI 获取主要工作”，他的意思是只获取原始参数数据而不是解析参数：

```
getParameters().getRaw().toArray(new String[getParameters().getRaw().size()]) 
```

这会将 JavaFX 示例的参数转换为您从命令行应用程序获得的相同类型的字符串数组，然后您可以使用通用函数处理参数解析。

如果您不能在您的项目中使用[Apache Commons CLI](http://commons.apache.org/cli/)，您可以自己为您的应用程序实现一个基本参数解析器，它在一个通用函数中处理基于从`getParameters().getRaw().toArray`调用中检索到的参数（在 JavaFX 模式下）或`main()`传递给的参数的解析您的应用程序（在命令行模式下）。****

# ruby-on-rails - Rails 验证搜索参数

> ID：10745814
> 
> 赞同：4
> 
> 时间：2012-05-24T21:51:07.990
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, validation, activerecord

我有一个相当安静的 API，但我正在努力弄清楚如何干净地实现搜索。我希望能够搜索两个日期时间之间的所有记录，日期时间最多允许相隔 6 小时。目前在我的控制器方法中，我有以下内容：

```
required_params = [:start_time, :end_time]
if check_required_params(required_params, params) and check_max_time_bound(params, 6.hours)
   ... rest of controller code here ...
end 
```

check_required_pa​​rams 是一个如下所示的应用程序方法：

```
def check_required_params(required_params, params_sent)
required_params.each do |param|
  unless has_param(param, params_sent)
    unprocessable_entity
    return false
  end
end
  true
end 
```

check_max_time 非常相似。

我知道在控制器中进行验证是违反最佳实践的，但我看不出如何将它干净地添加到模型中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T04:05:13.983

实际上你正在做的是（几乎）`best practice`并且将（几乎）被合并到 Rails 4 中`strong parametsers`。（我说几乎是因为您`check_max_time`看起来应该是您模型中的验证。）

您今天应该继续使用该功能，让自己更轻松地进行升级。强参数 [https://github.com/rails/strong_parameters](https://github.com/rails/strong_parameters)

文档在那里，但这里是你如何合并它。

```
class SearchController < ApplicationController
  include ActiveModel::ForbiddenAttributesProtection

  def create
    # Doesn't have to be an ActiveRecord model
    @results = Search.create(search_params)
    respond_with @results
  end

  private

  def search_params
    # This will ensure that you have :start_time and :end_time, but will allow :foo and :bar
    params.require(:start_time, :end_time).permit(:foo, :bar #, whatever else)
  end
end

class Search < ActiveRecord::Base
  validates :time_less_than_six_hours

  private

  def time_less_than_six_hours
    errors.add(:end_time, "should be less than 6 hours from start") if (end_time - start_time) > 6.hours
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T22:16:46.470

从来没有找到一个干净的答案。但是，如果您正在制作 API，[Grape](https://github.com/intridea/grape)具有内置的参数验证和强制功能来处理它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T05:01:52.927

好吧，在这种情况下我要做的是在这两个日期时间之间设置默认值，这样我就不必进行验证并引发异常。

```
class SearchController < ApplicationController
  before_filter :assign_default_params

  def index
  end

  private
  def assign_default_params
    params[:start_time] ||= Time.now
    params[:end_time]   ||= params[:start_time] + 6.hours
    params[:end_time]     = params[:start_time] + 6.hours if ((params[:end_time] - params[:start_time]) / 3600).round) > 6
  end
end 
```

使用上面的代码，它总是具有搜索所需的参数。如果默认值不是从客户端发送的，该方法`assign_default_params`会尝试分配默认值。它所做的最后一件事是分配`params[:end_time]`一个最大值。

它更简洁，因为我们不必进行验证，客户端也不需要处理不同的响应代码，例如`422`. 你应该有一个 API 文档，说明这个事实。

# asp.net-mvc-3 - 是否可以使用 AJAX 访问 html 助手？

> ID：10745818
> 
> 赞同：3
> 
> 时间：2012-05-24T21:51:23.770
> 
> 标签：asp.net-mvc-3, razor, helper

在 asp.net mvc3 中，

我正在使用 javascript API 来动态呈现用户界面。输入部分的一部分将取决于用户想要输入数据的项目数量。结果，这样的事情不会起作用

```
@(Html.EditorFor(m => m.P[5].C.Description)) 
```

因为这不能在运行时完成。在运行时使用 AJAX 时，我将使用什么类型的进程来调用该助手？我会有一个控制器操作，它只返回使用调用的信息`$.ajax()`吗？它会在与控制器动作不同的地方吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T22:09:21.393

在运行时，您可以对控制器操作执行 ajax 获取，该操作会将视图呈现为字符串，然后可以将其插入/附加到 DOM 中。

创建一个返回 JSON 的新操作结果，如下所示：

```
 return new JsonResult
    {
        JsonRequestBehavior = JsonRequestBehavior.AllowGet,
        Data = new { html = this.RenderPartialViewToString("YourPartialView", model) }
    }; 
```

注意，上面使用了以下控制器扩展：

```
 public static string RenderPartialViewToString(this Controller controller, string viewName = null, object model = null)
    {
        if (string.IsNullOrEmpty(viewName))
        {
            viewName = controller.ControllerContext.RouteData.GetRequiredString("action");
        }

        controller.ViewData.Model = model;

        using (var sw = new StringWriter())
        {
            ViewEngineResult viewResult = ViewEngines.Engines.FindPartialView(controller.ControllerContext, viewName);
            var viewContext = new ViewContext(controller.ControllerContext, viewResult.View, controller.ViewData, controller.TempData, sw);
            viewResult.View.Render(viewContext, sw);
            return sw.GetStringBuilder().ToString();
        }
    } 
```

有关此扩展方法的进一步阅读：http: [//craftycodeblog.com/2010/05/15/asp-net-mvc-render-partial-view-to-string/](http://craftycodeblog.com/2010/05/15/asp-net-mvc-render-partial-view-to-string/)

剩下的就是执行一个 get 传递一个参数来表示要渲染的项目数量并将返回的内容附加到您的视图中。也许是这样的：

```
 $.getJSON('url', numberofitems, function (data) {
        $('#somecontainer').html(data.html);
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T05:11:14.980

如果您要提取 HTML 并将其插入 DOM，则不必通过 JSON。只需让您的操作返回 PartialView。它已经是 Html 的形式，可以插入到你的 DOM 中

JS

```
$.getJSON('/someurl/GetMyView',{count:10}, function (data) {
        $('#target').html(data);
    }); 
```

控制器：

```
[HttpGet]
public ActionResult GetMyView(int count)
{
  MyModel model = //Get the model from somewhere
  return PartialView(model);
} 
```

看法：

```
@model MyModel

<div>
    @Model.SomeProperty
<div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T22:05:52.523

如果我理解正确，您希望在客户端上动态插入字段以允许用户添加 N 个字段而无需在表单上预渲染大量字段，并且您正在尝试使用 ajax 来执行此操作？

我相信您可以通过在服务器上呈现 html 并将其推送到客户端来做到这一点...您是否考虑过通过 javascript 将其动态添加到页面？与 Webforms 不同，MVC 不关心页面渲染时页面上有哪些元素，它只关心它在 HttpPost 中接收到的数据。

# geolocation - GeoIP 安装失败，需要建议

> ID：10745819
> 
> 赞同：0
> 
> 时间：2012-05-24T21:51:25.520
> 
> 标签：geolocation, geo, geoip

几个小时的挫败感，看看是否有人有任何建议。

我正在尝试安装 GeoIP vie Homebrew 并在安装完成之前收到以下错误：

“错误：链接步骤未成功完成公式已构建，但未符号链接到 /usr/local 您可以使用 `brew link geoip' 重试”

brew link geoip 返回此错误：

“错误：无法符号链接文件：/usr/local/Cellar/geoip/1.4.8/etc/GeoIP.conf.default /usr/local/etc 不可写。您应该更改其权限。”

我还尝试了“sudo link geoip”并收到此错误：

“懦弱地拒绝‘sudo brew link’”

我对权限等并不完全熟悉，并且想知道我需要从命令行做什么才能正确链接。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T22:11:54.230

我想我找到了答案。此脚本修复了权限问题：

ruby -e "$(curl -fsSL [https://gist.github.com/raw/768518/fix_homebrew.rb](https://gist.github.com/raw/768518/fix_homebrew.rb) )"

# django - Django：登录页面中的下一个值发生了奇怪的变化

> ID：10745824
> 
> 赞同：0
> 
> 时间：2012-05-24T21:52:00.583
> 
> 标签：django, authentication, next

如果他们已经登录并尝试直接转到“../login/”，我想将我的应用程序中的用户重定向到他们的用户页面。我找到了这个答案：

[Django：从登录页面重定向登录用户](https://stackoverflow.com/questions/2320581/django-redirect-logged-in-users-from-login-page)

在我决定点击登录字段下方的“注册”链接之前，它的效果非常好。我不知道为什么，但是当我点击它时，我再次重定向到登录页面，但唯一改变的是 url，由于某种原因它变成“ [http://localhost:8000/users/login/?next =/users/register/](http://localhost:8000/users/login/?next=/users/register/) ”，它不会带我到我的注册页面。

如果我在登录模板中使用另一个 url 设置它，为什么“下一个”变量会发生变化，如下所示：

```
{% extends "base.html" %}
    {% block title %}User Login{% endblock %}
    {% block head %}User Login{% endblock %}
    {% block content %}
        {% if form.errors %}
            <p>User name or password is incorrect.</p>
        {% endif %}
        <form method="post" action="{% url login %}">
            {% csrf_token %}
            <p><label for="id_username">Username:</label>
                {{ form.username }}</p>
            <p><label for="id_password">Password:</label>
                {{ form.password }}</p>
            <input type="submit" value="Login" />
            <input type="hidden" name="next" value="users/"/>
        </form>
            <li><a href="/users/register/">Register</a></li>
    {% endblock %} 
```

我正在使用 django1.4 和 python 2.7。我的 urls.py 是：

对于整个应用程序：

```
urlpatterns = patterns('',
    url(r'^$', main_page, name="main_page"),
    url(r'^users/',include('user_manager.urls')),
) 
```

对于 user_manager 模块：

```
urlpatterns = patterns('user_manager.views',
    url(r'^$', users, name="user_page"),
    url(r'^logout/$', user_logout, name="logout"),
    url(r'^login/$', user_login, name="login"),
    url(r'^(\w+)/$', user_page),
    url(r'^register/$', register_page),
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T22:59:02.950

你有那个视图的`@login_required`装饰器吗？`register_page`如果是这样，请将其删除

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T14:56:37.787

好的，我发现了问题。Django 按顺序检查 urls 正则表达式，因此“注册”url 匹配用于用户页面的“(\w+)/”。所以我所要做的就是把那个 url 放在最后，urls.py 现在看起来像这样：

```
urlpatterns = patterns('user_manager.views',
    url(r'^$', users, name="user_page"),
    url(r'^logout/$', user_logout, name="logout"),
    url(r'^login/$', user_login, name="login"),
    url(r'^register/$', register_page),
    url(r'^(\w+)/$', user_page),
) 
```

尽管如此，我仍然不太明白为什么那个错误的匹配会改变下一个值。我知道这是导致它，但我不知道为什么...

非常感谢您的宝贵时间！

# c# - “使用”语句中的灾难性故障，即 using(var a= new stream()) 和 a.Something() 引发异常

> ID：10745829
> 
> 赞同：1
> 
> 时间：2012-05-24T21:52:17.467
> 
> 标签：c#, .net, idisposable, using, finalize

所以我知道在 using 块语句的末尾，调用了 dispose 方法。

如果我使用`'using(var a = new Stream()) { a.SomethingThrowsAnException() }'`

流是否仍然通过他的处置方法？

我编写了一个实现 IDisposable 的类，它是关键任务，我不会丢失内存中的内容，因此我计划在发生灾难性事件时序列化数据，即我有一个自定义流，如我正在使用的对象。

有什么建议么？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T21:55:13.630

是的。该`using`块编译为：

```
var a = new Stream();
try
{
     a.SomethingThrowsAnException();
}
finally
{
     a.Dispose();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T01:28:53.477

我认为可能有一种情况，finally 子句最终由不同的线程执行（我在这个问题上发布了一个单独的问题）。这可能很重要，因为某些操作（例如 lock.release）需要在执行 lock.acquire 的同一线程上发生。我不确定是什么原因造成的，或者如何延迟线程终止以确保 a.Dispose 发生在执行原始新操作的线程上......

# asp.net-mvc-3 - 接受数组的 ASPX 中的 Telerik 报告

> ID：10745834
> 
> 赞同：1
> 
> 时间：2012-05-24T21:52:30.990
> 
> 标签：asp.net-mvc-3, webmethod, telerik-reporting

我有一个 MVC3 应用程序，我们正在使用 Telerik Reporting。Telerik 报表查看器必须托管在名为 ReportPage.aspx 的 ASPX 页面中。在其 PageLoad 方法中是根据查询字符串确定要显示哪个报表的逻辑。我想从 MVC 视图发起对报告的请求，并且我希望该视图保持存在，因此我需要一个弹出窗口或一个新的浏览器窗口来显示报告。用户关闭报告窗口后，原始窗口应完整显示。

我相信我可以满足上述要求，但这是复杂的。我需要将大量整数作为参数传递给 ReportPage.aspx，因此 querystring 对我不起作用。据我所知，我需要使用 JSON 对象和 WebMethod 来传递数组。但是我看不到WebMethod（即使它是ReportPage.aspx的方法）如何打开ReportPage.aspx。

有没有人看到一种方法来完成这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T22:05:53.067

If your asp.net web site and your MVC web site have access to a shared database then:

1.  Store dynamically the large array in the shared database and assign a unique report ID
2.  Pass in the query string the report ID only.
3.  In the aspx page load the report using the report ID
4.  Run a sql job every night that deletes the previous day report IDs. No need to store them forever

# jquery-mobile - jquery mobile listview的autodividersSelector不起作用

> ID：10745837
> 
> 赞同：0
> 
> 时间：2012-05-24T21:52:41.140
> 
> 标签：jquery-mobile, jsrender

我正在尝试使用 jquery-mobile 列表视图的 autodividersSelector 选项，如[jquery-mobile 文档的列表视图部分的“Autodividers”部分中所述](http://jquerymobile.com/test/docs/lists/docs-lists.html)。

**该列表呈现良好，但没有任何分隔符。**分配给 autodividersSelector 的函数永远不会被调用。

这里还有一些其他的复杂性，比如 jsrender 等，所以我将它们原封不动地保留下来，但你会在下面看到它们，我不认为它们是问题的一部分。我错过了什么？

相关代码如下：

```
<div data-role="page" id="myListPage">

    <div data-role="content">   

        <ul id="myListView" 
            data-role="listview"
            data-autodividers="true"
            >

        </ul>

    </div><!-- /content -->

</div><!-- /page -->

<script type="text/javascript">
$( "#myListPage" ).on("pagebeforecreate", function(event) {
    renderTemplates();
});

function renderTemplates() {
    var data = {
        testItems: [
            {name:1},
            {name:2},
            {name:3},
        ]
    };
    $('#myListView').html(
        $('#myTemplate').render(data)
    );
}

/********** FORMATTING **********/
$("#myListPage").on("pagecreate", function (event) {
    console.log("pagecreate");
    $("#myListView").listview({
        autodividers: true,

        autodividersSelector: function (li) {
            console.log("autodividersSelector");
            var out = "hi"; //var out = $(li).find("h3").text;
            return out;
        }
    });
    $("#myListView").listview("refresh");
});
/********** FORMATTING **********/

</script>
<script id="myTemplate" type="text/x-jsrender">

    {{for testItems}}
        <li><a href="#">
         <h3>Name: {{:name}}</h3>
         <p>Test: {{:name}}</p>
        </a></li>
    {{/for}}

</script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T07:14:28.063

您链接到的文档是实验性的。你正在尝试实现一些尚未完成的东西。请注意 url 如何表示 test。

# python - 在单个项目中为多个应用程序使用 django 用户身份验证和 taggit

> ID：10745839
> 
> 赞同：7
> 
> 时间：2012-05-24T21:52:55.317
> 
> 标签：python, django, django-taggit

**背景：**我有 5 个独立的 Django 项目，我试图将它们组合成 1 个由多个应用程序组成的 Django 项目。换句话说：projA 有 appA，projB 有 appB，projC 有 appC，等等。我想要 1 个 masterProj，它有 appA、appB 和 appC。

目前每个应用程序都连接到它自己的独立数据库（应用程序不共享数据）。每个项目都使用 Django 用户认证、Django 注册、taggit、profiles、comments 和 sorl-thumbnail。

我正在使用 Django 1.4 并[根据这个 stackoverflow 答案设置数据库路由，](https://stackoverflow.com/questions/3637419/multiple-database-config-in-django-1-2)这样，一旦组合到一个项目中，新组合的 Django 项目中的每个应用程序仍然能够连接到自己的数据库。进展顺利，但我开始遇到用户身份验证和 taggit 之类的问题：

**1)**如前所述，每个应用程序连接到不同的数据库，每个数据库都有一个名为“auth_user”的表。但是，我发现对 auth_user 表的所有读/写调用（无论哪个应用程序进行读/写调用）都被路由到默认数据库（在本例中为 appA 的数据库）：

```
# settings.py:
DATABASES['default'] = DATABASES['appA']
DATABASE_ROUTERS = ['appA.db.DBRouter', 'appB.db.DBRouter', 'appC.db.DBRouter']

# appA/dbrouterA.py (appB, appC routers are identical this, replacing 'appA' with 'appB', etc.)
class DBRouter(object):
    def db_for_read(self, model, **hints):
        if model._meta.app_label == 'appA':
            return 'appA'
        if model._meta.app_label == 'auth':
            return 'appA'
        return None

    def db_for_write(self, model, **hints):
        if model._meta.app_label == 'appA':
            return 'appA'
        if model._meta.app_label == 'auth':
            return 'appA'
        return None 
```

**2）** *假设我让路由正常工作，如果用户登录 appA，我不希望他们登录 appB*。我看到很多人发布了相反的问题（他们希望他们的应用程序共享用户凭据），但是有没有人在同一个项目的多个独立应用程序中成功使用 Django 用户身份验证？如果是这样，你是怎么做到的？

**3)**我的 taggit 代码出现以下错误，但我无法弄清楚如何将“related_name”参数传递给 taggit。我正在使用 taggit 的基本实现 - 没有子类化任何东西：

```
# appA/models.py
tags = TaggableManager(blank=True)

# appB/models.py
tags = TaggableManager(blank=True) 
```

错误：

```
appA.userprofile: Accessor for m2m field 'tagged_items' clashes with related m2m field 'TaggedItem.userprofile_set'. Add a related_name argument to the definition for 'tagged_items'.
appB.userprofile: Accessor for m2m field 'tagged_items' clashes with related m2m field 'TaggedItem.userprofile_set'. Add a related_name argument to the definition for 'tagged_items'. 
```

**4)**我开始觉得结合所有这些应用程序是一个滑坡；稍后我可能会遇到 sorl-thumbnail 或尚未出现的评论的问题。有没有人成功地将应用程序合并到一个项目中？还是我试图做一些 Django 根本不支持的事情？

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T15:15:03.930

Django 的架构旨在围绕一个 Django 项目和几个 Django 应用程序展开。项目本身只不过是您的设置和主 URL 配置模块，而应用程序是遵循一些文件约定的简单包。

现在，应用程序本身永远不会与特定项目耦合（尽管它们可以通过引用它们来耦合到其他应用程序）。这个想法是让您保留设计项目源代码结构的自由，并且对于大多数 Django 项目来说，一种常见的方法是在项目的顶级包下分发 Django 应用程序，就像大多数 Python 应用程序一样。这种方法可以方便地获得项目提供的所有功能的整体视图（当您应用有意义的应用程序标签时），创建名称空间并为开发人员提供访问特定项目源的便捷且有组织的路径。

这对于大型项目以及当您想要并置和合并多个重复使用相似设计和方法的不同项目时都非常有用。虽然这只会影响您的项目的结构，但选择是为单个 Django 项目配置还是为固定的 Django 应用程序集配置多个 Django 项目有一些重要的影响。

当您创建一个 Django 项目时，您基本上将 Django 应用程序插入到框架的工具中并公开应用程序行为，正如我们在 Web 应用程序中所理解的那样，通过配置和包含来自您的 Django 应用程序的 URL 和视图的映射模式。

关键是您可以以任何适合您的方式重新组织资源。你的包可以组织成`proj.appA`, `proj.appB`, 等或`proj.common1`, `proj.common2`, `proj.projA.app1`, `proj.projA.app2`, `proj.projB.app1`，这完全取决于你。

您应该知道的是，您不需要单一的设置和 URL 模块，而是求助于数据库路由和管理数据库连接，您也可以为每个项目设置一个设置和 URL 模块，它们引用不同的应用程序并公开不同的行为. 使用每个项目的数据库设置，您已经重用代码并同时为每个项目保持数据库数据和状态不同。

# mysql - 合并具有不同 ID 但等效数据的 MySQL 行

> ID：10745840
> 
> 赞同：0
> 
> 时间：2012-05-24T21:53:04.930
> 
> 标签：mysql, merge, whitespace, rows, matching

我有一个“游戏”表，每个游戏都有不同的条目，如下所示：

```
gameID   internalName
1        game1
2        game 1
3        game 2
4        game2
5        game3 
```

等等

所以，现在的问题是我想结合游戏标题（去掉空格）相同的情况。在其他情况下，gameID 为 2 的行将与 1 合并，并被删除。

此外，我想更新其他表中使用 gameID 作为外键的任何条目，以指向新键。

我知道我可以做这样的事情，以获得哪些标题有重复的列表：

```
SELECT gameID, count(REPLACE(internalName, ' ', '')), internalName  FROM games GROUP BY REPLACE(internalName, ' ', '') HAVING count(REPLACE(internalName, ' ', ''))  > 1 
```

但是，这并不能真正帮助我实现我需要做的事情。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T22:16:06.083

类似的东西可以帮助你开始

```
select g1.gameID as toKeep, g2.gameID toEliminate
from games g1
inner join games g2 on replace(g1.internalName, ' ', '') = replace(g2.internalName, ' ', '')
where g1.gameID < g2.gameID 
```

但如果你有 3 个项目要合并，这将不会那么好......

见[http://sqlfiddle.com/#!2/fb294/6](http://sqlfiddle.com/#!2/fb294/6)

但是在存储过程或 php（或其他语言）中，您应该能够得到您想要的东西。

**更好的**

有了这个，即使是 3、4 或 5 个相同的结果也会起作用

```
select g1.gameID as toKeep, g2.gameID toEliminate
from games g1
inner join games g2 on replace(g1.internalName, ' ', '') = replace(g2.internalName, ' ', '')
where g1.gameID < g2.gameID
and g1.gameID not in (SELECT g4.gameID
                      from games g4
                      inner join games g3 on replace(g3.internalName, ' ', '') = replace(g4.internalName, ' ', '')
                      where g3.gameID < g4.gameID) 
```

[http://sqlfiddle.com/#!2/8fb21/1](http://sqlfiddle.com/#!2/8fb21/1)

编辑：（未经测试的）存储过程的示例

```
CREATE PROCEDURE CLEANGAMENAMES()
BEGIN
  DECLARE toKeep, toEliminate INT;
  DECLARE cur1 CURSOR FOR 
    SELECT g1.gameID AS toKeep, g2.gameID AS toEliminate
    FROM games g1
    INNER JOIN games g2 ON REPLACE(g1.internalName, ' ', '') = REPLACE(g2.internalName, ' ', '')
    WHERE g1.gameID < g2.gameID
    AND g1.gameID NOT IN (SELECT g4.gameID
                          FROM games g4
                          INNER JOIN games g3 ON REPLACE(g3.internalName, ' ', '') = REPLACE(g4.internalName, ' ', '')
                          WHERE g3.gameID < g4.gameID)

  OPEN cur1;

  read_loop: LOOP
    FETCH cur1 INTO toKeep, toEliminate;
    UPDATE <anyTable> set gameId = toKeep where gameId = toEliminate;
    -- as many tables as you need
    DELETE FROM games where gameID = toEliminate;
    UPDATE games set internalName = REPLACE(internalName, ' ', '');

  END LOOP;

  CLOSE cur1;
END; 
```

# eclipse - eclipse 和 tomcat 中的 java.lang.NoClassDefFoundError 但是 WAR 在独立的 tomcat 中工作

> ID：10745843
> 
> 赞同：1
> 
> 时间：2012-05-24T21:53:18.260
> 
> 标签：eclipse, tomcat, maven, deployment, classnotfoundexception

我正在尝试在eclipse中将maven生成的war文件部署到tomcat服务器中。但是我在jar文件上得到了java.lang.NoClassDefFoundError。我多次验证，jar在.war中，对应的类文件也在jar中。我可以从eclipse中生成的位置复制战争并成功部署到tomcat的webapps中（使用与eclipse中安装的服务器相同的服务器）。

除了部署程序集（已列出 jar）和 Java 构建路径（ jar 在 Maven 依赖项中可用）之外，我不确定还有什么要检查的配置。我正在使用 JRE --> 指向 JDK 1.6 的备用 JRE

完整的错误日志：

```
2012-05-24 16:43:09,379 [main] ERROR org.springframework.web.context.ContextLoader -       Context initialization failed
java.lang.NoClassDefFoundError: Lcom/att/cso/uss/client/ws/CciClientImpl;

at java.lang.Class.getDeclaredFields0(Native Method)
at java.lang.Class.privateGetDeclaredFields(Class.java:2291)
at java.lang.Class.getDeclaredFields(Class.java:1743)
at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.findPersistenceMetadata(PersistenceAnnotationBeanPostProcessor.java:373)
at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.postProcessMergedBeanDefinition(PersistenceAnnotationBeanPostProcessor.java:321)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyMergedBeanDefinitionPostProcessors(AbstractAutowireCapableBeanFactory.java:830)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:493)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:385)
at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:284)
at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:3972)
at org.apache.catalina.core.StandardContext.start(StandardContext.java:4467)
at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)
at org.apache.catalina.core.StandardHost.start(StandardHost.java:722)
at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)
at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:443)
at org.apache.catalina.core.StandardService.start(StandardService.java:516)
at org.apache.catalina.core.StandardServer.start(StandardServer.java:710)
at org.apache.catalina.startup.Catalina.start(Catalina.java:593)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)

Caused by: java.lang.ClassNotFoundException: com.att.cso.uss.client.ws.CciClientImpl
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1484)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1329)
    ... 33 more 
```

请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T14:52:02.280

使用服务器实例与在 tomcat 中部署 WAR 不同。服务器视图集成 tomcat 'hot' 部署源文件夹。我建议您检查 Java Build 路径设置，因为在服务器视图中将源项目“部署”到服务器时会使用这些设置。你是如何制造战争的？我假设您使用的是 maven。如果您使用的是 maven（我个人不喜欢它），它应该为您管理依赖项。您可能必须在 java 中复制 maven 的设置，或者可能使用 maven 插件进行 Eclipse。[http://www.eclipse.org/m2e/]

# google-maps - 谷歌地图叠加渲染问题

> ID：10745847
> 
> 赞同：5
> 
> 时间：2012-05-24T21:53:28.303
> 
> 标签：google-maps

![注意工具提示的呈现方式](../Images/917e3bcdc125291dec673bab089b2eef.png)

由于某些奇怪的原因，谷歌地图倾向于像那样加载工具提示。缩放滑块也倾斜。有没有人遇到过这个问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-24T21:57:00.537

肯定以前看过:)

[google maps api v3 地图显示问题](https://stackoverflow.com/questions/10466737/google-maps-api-v3-map-display-issue/10466752)

添加到您的 CSS

```
#map_canvas label { width: auto; display:inline; }
#map_canvas img { max-width: none; }  (sometimes max-height: none; is needed too) 
```

`map_canvas`（如果您的地图 div 被命名为其他名称，则替换。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T09:11:10.367

我遇到过同样的问题。这对我有用。

```
#map_canvas label { width: auto; display:inline; }
#map_canvas img { max-width: none; max-height: none; background-color: transparent;} 
```

# c++ - 在 Linux 中使用 C++ 跨卷移动文件

> ID：10745849
> 
> 赞同：2
> 
> 时间：2012-05-24T21:53:49.583
> 
> 标签：c++, linux, move

我正在尝试编写一些可以在所有平台上跨卷移动文件的东西。目前，我使用 rename(...) 函数来移动文件，即使在 Windows 上的卷/驱动器之间，这也有效。但是，在 Linux 上，我得到一个 EXDEV 错误（通过 strace），杀死了我的应用程序:(

看来我可能需要通过 system(...) 调用“mv”，但这似乎很hacky。那个，或者将 boost 集成到我的应用程序中，这不是一个简单的操作。

我还有其他选择吗？

感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T22:08:35.547

如果你想写一些需要跨平台的东西，而不是依赖于系统特定的实现——你必须坚持标准。虽然较新的 C++11 标准可能允许附加功能来帮助您，但一个简单的解决方案是实现一个从一个`fstream`到另一个的普通副本。

# php - Wordpress 后置计数器

> ID：10745855
> 
> 赞同：0
> 
> 时间：2012-05-24T21:54:36.513
> 
> 标签：php, wordpress

我如何获得我有多少帖子的价值？有没有一个wordpress标签？

我想在我的主题中使用它：*帖子数：37*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T22:51:40.987

是的，有一个功能可以做到这一点：

```
$count_posts = wp_count_posts(); 
```

来自官方[文档](http://codex.wordpress.org/Function_Reference/wp_count_posts)：

> 默认用法返回已发布帖子的计数。这将是一个对象，您可以通过 var_dump() 内容来调试输出。

或者：再次引用：

> 如果要显示已发布帖子的数量，请使用此代码。

```
$published_posts = wp_count_posts();
echo $published_posts->publish; 
```

我不确定哪一种是正确的方法，以前从未尝试过，但似乎两者都可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-11T14:59:23.480

此代码可以帮助您在当前页面中显示没有帖子

```
<?php
$count = 1;
if (have_posts()) : while(have_posts()): the_post(); ?>
layout of regular template file here
<?php $count++;
      endwhile; endif;
echo $count;
 ?> 
```

或者，您可以按照 Wordpress 文档[wp_count_posts中所示使用](https://codex.wordpress.org/Function_Reference/wp_count_posts)

```
<?php
$count_posts = wp_count_posts();
?> 
```

# c# - 实体框架遍历并返回自引用表中的子记录

> ID：10745859
> 
> 赞同：13
> 
> 时间：2012-05-24T21:55:16.593
> 
> 标签：c#, .net, entity-framework, entity-framework-4

我正在使用实体框架并有一个 BusinessUnits 表，它可以引用同一类型的另一条记录以形成子父层次结构。

我还有一组用户和用户权限，在此表中定义的每个用户都应该有权访问业务单元和层次结构中的所有子业务单元。用户不应访问所引用的业务单元（如果存在）之上的业务单元。

如何形成 LINQ 查询来处理这个自引用关系树并返回该用户有权访问的所有业务单位（带有子单位）？是否可以在一个查询中完成，或者我是否需要自己使用 for 循环手动构建树？

我已经从节点到父节点以这种方式看到模式的引用，这是否意味着我必须从最远的子节点开始一次由一个父节点构建树？

提前致谢，

克里斯

```
class BusinessUnit
{
    int BusinessUnitID {get;set;}
    public string BusinessName {get;set;}
    BusinessUnit ParentBusinessUnit {get;set;}
}

class User
{
    int UserID {get;set;}
    string Firstname {get;set;}
}

class UserPermissions
{
    [Key, ForeignKey("BusinessUnit"), Column(Order = 0)] 
    BusinessUnit BusinessUnit {get;set;}
    [Key, ForeignKey("User"), Column(Order = 1)] 
    User User {get;set;}
}

IEnumerable<BusinessUnit> GetUnitsForWhichUserHasAccess(User user)
{
/* Example 1
 given: BusinessUnitA (ID 1) -> BusinessUnitB (ID 2) -> BusinessUnitC (ID 3)
 with user with ID 1:
 and UserPermissions with an entry: BusinessUnit(2), User(1)
 the list { BusinessUnitB, BusinessUnitC } should be returned
*/

/* Example 2
 given: BusinessUnitA (ID 1) -> BusinessUnitB (ID 2) -> BusinessUnitC (ID 3)
 with user with ID 1:
 and UserPermissions with an entry: BusinessUnit(1), User(1)
 the list { BusinessUnitA, BusinessUnitB, BusinessUnitC } should be returned
*/
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-11T19:11:51.623

好的，这里有几件事。我们可以通过向您的模型添加更多属性来简化此操作。这是一个选择吗？如果是这样，请将集合属性添加到实体。现在，我不知道您使用的是哪个 EF API：DbContext（代码优先或 edmx）或 ObjectContext。在我的示例中，我使用了带有 edmx 模型的 DbContext API 来生成这些类。

如果您愿意，只需添加一些注释，您就可以省去 edmx 文件。

```
public partial class BusinessUnit
{
    public BusinessUnit()
    {
        this.ChlidBusinessUnits = new HashSet<BusinessUnit>();
        this.UserPermissions = new HashSet<UserPermissions>();
    }

    public int BusinessUnitID { get; set; }
    public string BusinessName { get; set; }
    public int ParentBusinessUnitID { get; set; }

    public virtual ICollection<BusinessUnit> ChlidBusinessUnits { get; set; }
    public virtual BusinessUnit ParentBusinessUnit { get; set; }
    public virtual ICollection<UserPermissions> UserPermissions { get; set; }
}

public partial class User
{
    public User()
    {
        this.UserPermissions = new HashSet<UserPermissions>();
    }

    public int UserID { get; set; }
    public string FirstName { get; set; }

    public virtual ICollection<UserPermissions> UserPermissions { get; set; }
}

public partial class UserPermissions
{
    public int UserPermissionsID { get; set; }
    public int BusinessUnitID { get; set; }
    public int UserID { get; set; }

    public virtual BusinessUnit BusinessUnit { get; set; }
    public virtual User User { get; set; }
}

public partial class BusinessModelContainer : DbContext
{
    public BusinessModelContainer()
        : base("name=BusinessModelContainer")
    {
    }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        throw new UnintentionalCodeFirstException();
    }

    public DbSet<BusinessUnit> BusinessUnits { get; set; }
    public DbSet<User> Users { get; set; }
    public DbSet<UserPermissions> UserPermissions { get; set; }
} 
```

@Chase 奖章是正确的，因为我们无法编写递归 LINQ（甚至 Entity SQL）查询。

**选项 1：延迟加载**

启用延迟加载后，您可以执行以下操作...

```
 private static IEnumerable<BusinessUnit> UnitsForUser(BusinessModelContainer container, User user)
    {
        var distinctTopLevelBusinessUnits = (from u in container.BusinessUnits
                                             where u.UserPermissions.Any(p => p.UserID == user.UserID)
                                             select u).Distinct().ToList();

        List<BusinessUnit> allBusinessUnits = new List<BusinessUnit>();

        foreach (BusinessUnit bu in distinctTopLevelBusinessUnits)
        {
            allBusinessUnits.Add(bu);
            allBusinessUnits.AddRange(GetChildren(container, bu));
        }

        return (from bu in allBusinessUnits
                group bu by bu.BusinessUnitID into d
                select d.First()).ToList();
    }

    private static IEnumerable<BusinessUnit> GetChildren(BusinessModelContainer container, BusinessUnit unit)
    {
        var eligibleChildren = (from u in unit.ChlidBusinessUnits
                                select u).Distinct().ToList();

        foreach (BusinessUnit child in eligibleChildren)
        {
            yield return child;

            foreach (BusinessUnit grandchild in child.ChlidBusinessUnits)
            {
                yield return grandchild;
            }
        }
    } 
```

**选项 2：预加载实体**

但是，有一些方法可以优化它以避免重复访问服务器。如果您在数据库中只有少量的业务单位，您可以加载整个列表。然后，由于 EF 能够自动修复关系，只需从数据库加载用户及其权限即可满足我们的所有需求。

澄清一下：此方法意味着您加载*所有*`BusinessUnit`实体；即使是用户无权访问的那些。但是，由于它大大减少了与 SQL Server 的“喋喋不休”，它的性能仍可能比上面的选项 1 更好。与下面的选项 3 不同，这是“纯”EF，不依赖于特定的提供者。

```
 using (BusinessModelContainer bm = new BusinessModelContainer())
        {
            List<BusinessUnit> allBusinessUnits = bm.BusinessUnits.ToList();

            var userWithPermissions = (from u in bm.Users.Include("UserPermissions")
                                       where u.UserID == 1234
                                       select u).Single();

            List<BusinessUnit> unitsForUser = new List<BusinessUnit>();

            var explicitlyPermittedUnits = from p in userWithPermissions.UserPermissions
                                           select p.BusinessUnit;

            foreach (var bu in explicitlyPermittedUnits)
            {
                unitsForUser.Add(bu);
                unitsForUser.AddRange(GetChildren(bm, bu));
            }

            var distinctUnitsForUser = (from bu in unitsForUser
                                        group bu by bu.BusinessUnitID into q
                                        select q.First()).ToList();
        } 
```

请注意，以上两个示例可以改进，但可以作为一个示例来帮助您前进。

**选项 3：使用公用表表达式的定制 SQL 查询**

如果您有大量业务单位，您可能想尝试最有效的方法。那将是执行自定义 SQL，该 SQL 使用分层公用表表达式一键取回信息。这当然会将实现绑定到一个提供程序，可能是 SQL Server。

您的 SQL 将是这样的：

```
 WITH UserBusinessUnits
            (BusinessUnitID,
            BusinessName,
            ParentBusinessUnitID)
            AS
            (SELECT Bu.BusinessUnitId,
                    Bu.BusinessName,
                    CAST(NULL AS integer)
                    FROM Users U
                    INNER JOIN UserPermissions P ON P.UserID = U.UserID
                    INNER JOIN BusinessUnits Bu ON Bu.BusinessUnitId = P.BusinessUnitId
                    WHERE U.UserId = ?
            UNION ALL
            SELECT  Bu.BusinessUnitId,
                    Bu.BusinessName,
                    Bu.ParentBusinessUnitId
                    FROM UserBusinessUnits Uu
                    INNER JOIN BusinessUnits Bu ON Bu.ParentBusinessUnitID = Uu.BusinessUnitId)
    SELECT  DISTINCT
            BusinessUnitID,
            BusinessName,
            ParentBusinessUnitID
            FROM UserBusinessUnits 
```

您将使用如下代码来具体化用户有权访问的 BusinessUnit 对象的集合。

```
bm.BusinessUnits.SqlQuery(mySqlString, userId); 
```

上述行与@Jeffrey 建议的非常相似的代码之间存在细微差别。上面使用[DbSet.SqlQuery()](http://msdn.microsoft.com/en-us/library/system.data.entity.dbset.sqlquery(v=VS.103).aspx)而他使用[Database.SqlQuery](http://msdn.microsoft.com/en-us/library/gg696545(v=vs.103).aspx)。后者生成不受上下文跟踪的实体，而前者返回（默认情况下）跟踪的实体。跟踪实体使您能够进行和保存更改，以及自动修复导航属性。如果您不需要这些功能，请禁用更改跟踪（使用[.AsNoTracking()](http://msdn.microsoft.com/en-us/library/gg679352(v=vs.103).aspx)或使用[Database.SqlQuery](http://msdn.microsoft.com/en-us/library/gg696545(v=vs.103).aspx)）。

**概括**

没有什么能比使用真实数据集进行测试来确定哪种方法最有效。使用手工编写的 SQL 代码（选项 3）总是可能表现最好，但代价是拥有更复杂的代码，移植性较差（因为它与底层数据库技术相关联）。

另请注意，您可用的选项取决于您正在使用的 EF 的“风格”，当然，也取决于您选择的数据库平台。如果您想要一些更具体的指导来说明这一点，请使用额外信息更新您的问题。

*   你用什么数据库？
*   您的项目是使用 EDMX 文件还是先使用代码？
*   如果使用 EDMX，您是使用默认 ( `EntityObject`) 代码生成技术还是 T4 模板？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T23:36:05.060

如果我理解正确，您想要的是递归查询（原始 T-SQL 中的递归公用表表达式）。据我所知，没有办法在纯 LINQ to Entities 中编写这样的递归查询。

但是，如果您知道层次结构的最大深度，则可以构建一个单独的查询，该查询将自身连接固定次数以获得您想要的结果。

```
int userIdOfInterest = ...
IQueryable<BusinessUnit> units = ...

// start with a query of all units the user has direct permission to
var initialPermissionedUnits = units.Where(bu => bu.UserPermissions.Any(up => up.User.Id == userIdOfInterest));

var allHierarchyLevels = new Stack<IQueryable<BusinessUnit>();
allHierarchyLevels.Push(initialPermissionedUnits);
for (var i = 0; i < MAX_DEPTH; ++i) {
    // get the next level of permissioned units by joining the last level with 
    // it's children
    var nextHierarchyLevel = allHierarchyLevels.Peek()
            // if you set up a Children association on BusinessUnit, you could replace
            // this join with SelectMany(parent => parent.Children)
            .Join(units, parent => parent.BusinessUnitId, child => child.ParentBusinessUnit.BusinessUnitId, (parent, child) => child));
    allHierarchyLevels.Push(nextHierarchyLevel);
}

// build an IQueryable<> which represents ALL units the query is permissioned too
// by UNIONING together all levels of the hierarchy (the UNION will eliminate duplicates as well)
var allPermissionedUnits = allHierarchyLevels.Aggregate((q1, q2) => q1.Union(q2));

// finally, execute the big query we've built up
return allPermissionedUnits.ToList(); 
```

当然，生成的查询的性能很可能会随着 MAX_DEPTH 的增加而恶化。但是，在 for 循环中为层次结构的每个级别执行 1 个查询可能会更好。

如果您不知道 MAX_DEPTH，您可以考虑在您的业务单位表中添加一个深度列（易于在插入时设置，因为它始终为 parent.depth + 1）。然后，您可以在运行权限查询之前轻松查询 MAX_DEPTH。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T19:23:57.420

要在单个请求中获取层次结构，您需要使用特殊的表结构。一种可能的解决方案是拥有一个包含此记录的所有父项的特殊密钥。在这种情况下，您可以使用简单且非常快速（它比 cte 递归更快）的查询来获取所有子项。
但是，如果您想将记录移动到层次结构的另一个分支，这将是非常广泛的操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T19:39:05.790

如果您不依赖于使用 linq 作为解决方案，那么在 sql 中使用 CTE 会更加简单和快捷：

```
var sql = @"
WITH BusinessUnitHierarchy ( BusinessUnitID, BusinessName, ParentBusinessUnitID )
AS(
    Select bu.BusinessUnitID, bu.BusinessName, bu.ParentBusinessUnitID
    from BusinessUnit bu
    inner join [UserPermissions] up on bu.BusinessUnitID = up.BusinessUnitID
    where up.UserID = @userID
    UNION ALL

    Select
    bu.BusinessUnitID, bu.BusinessName, bu.ParentBusinessUnitID
    from BusinessUnit bu
    inner join BusinessUnitHierarchy buh on bu.ParentBusinessUnitID = buh.BusinessUnitID
)
SELECT * FROM BusinessUnitHierarchy buh
";
context.Database.SqlQuery<BusinessUnit>(sql, new SqlParameter("userID", [[your user ID here]])); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-11T21:13:51.500

SQL 中的递归 CTE 只是一种使用基本规则的技术。您可以使用这些基本规则在 LINQ 中构建相同的查询。

以下是要遵循的简单步骤

1) 从 UserPermissions 表中获取权限列表 2) Foreach 权限，递归树找到权限的子集

有很多方法可以优化\调整这些查询，但这里是核心：

```
//Gets the list of permissions for this user
        static IEnumerable<BusinessUnit> GetPermissions(int userID)
        {
            //create a permission tree result set object
            List<BusinessUnit> permissionTree = new List<BusinessUnit>();

            //Get the list of records for this user from UserPermissions table
            IEnumerable<UserPermissions> userPermissions = from UP in UPs
                                         where UP.User.UserID == userID
                                         select UP;

            //for each entry in UserPermissions, build the permission tree
            foreach (UserPermissions UP in userPermissions)
            {
                BuildPermissionTree(UP.BusinessUnit, permissionTree);
            }

            return permissionTree;
        }

//recursive query that drills the tree.
        static IEnumerable<BusinessUnit> BuildPermissionTree(BusinessUnit pBU,List<BusinessUnit> permissionTree)
        {
            permissionTree.Add(pBU);

            var query = from BU in BUs
                        where BU.ParentBusinessUnit == pBU
                        select BU;

            foreach (var BU in query)
            {
                BuildPermissionTree(BU,permissionTree);
            }
            return permissionTree;
        } 
```

查询用户 1 时的 O\p -> (B,C) 中的权限（参见图表）

![样本层次结构](../Images/99f23c36d5ecbe15aaa07df8bcb82414.png)

```
BusinessUnitB
BusinessUnitG
BusinessUnitC
BusinessUnitD
BusinessUnitF
BusinessUnitE 
```

这是完整的代码：

```
class BusinessUnit
    {
        public int BusinessUnitID { get; set; }
        public string BusinessName { get; set; }
        public BusinessUnit ParentBusinessUnit { get; set; }

        public override string ToString()
        {
            return BusinessUnitID + " " + BusinessName + " " + ParentBusinessUnit;
        }
    }

    class User
    {
        public int UserID { get; set; }
        public string Firstname { get; set; }

        public override string ToString()
        {
            return UserID + " " + Firstname;
        }
    }

    class UserPermissions
    {
        public BusinessUnit BusinessUnit { get; set; }
        public User User { get; set; }

        public override string ToString()
        {
            return BusinessUnit + " " + User;
        }
    }

    class SOBUProblem
    {
        static List<BusinessUnit> BUs = new List<BusinessUnit>();
        static List<User> Users = new List<User>();
        static List<UserPermissions> UPs = new List<UserPermissions>();

        static void Main()
        {
            //AutoInitBU();
            InitBU();
            InitUsers();
            InitUPs();
            //Dump(BUs);
            //Dump(Users);
            //Dump(UPs);
            //SpitTree(BUs[2]);
            int userID = 1;
            foreach (var BU in GetPermissions(userID))
                Console.WriteLine(BU.BusinessName);

        }
        //Gets the lsit of permissions for this user
        static IEnumerable<BusinessUnit> GetPermissions(int userID)
        {
            //create a permission tree result set object
            List<BusinessUnit> permissionTree = new List<BusinessUnit>();

            //Get the list of records for this user from UserPermissions table
            IEnumerable<UserPermissions> userPermissions = from UP in UPs
                                         where UP.User.UserID == userID
                                         select UP;

            //for each entry in UserPermissions, build the permission tree
            foreach (UserPermissions UP in userPermissions)
            {
                BuildPermissionTree(UP.BusinessUnit, permissionTree);
            }

            return permissionTree;
        }

        //recursive query that drills the tree.
        static IEnumerable<BusinessUnit> BuildPermissionTree(BusinessUnit pBU,List<BusinessUnit> permissionTree)
        {
            permissionTree.Add(pBU);

            var query = from BU in BUs
                        where BU.ParentBusinessUnit == pBU
                        select BU;

            foreach (var BU in query)
            {
                BuildPermissionTree(BU,permissionTree);
            }
            return permissionTree;
        }

        static void Dump<T>(IEnumerable<T> items)
        {
            foreach (T item in items)
            {
                Console.WriteLine(item.ToString());
            }
        }

        static void InitBU()
        {
            BusinessUnit BURoot = new BusinessUnit() { BusinessUnitID = 1, BusinessName = "BusinessUnitA" };
            BUs.Add(BURoot);
            BusinessUnit BUlevel11 = new BusinessUnit() { BusinessUnitID = 2, BusinessName = "BusinessUnitB", ParentBusinessUnit = BURoot };
            BusinessUnit BUlevel12 = new BusinessUnit() { BusinessUnitID = 3, BusinessName = "BusinessUnitC", ParentBusinessUnit = BURoot };
            BUs.Add(BUlevel11);
            BUs.Add(BUlevel12);
            BusinessUnit BUlevel121 = new BusinessUnit() { BusinessUnitID = 4, BusinessName = "BusinessUnitD", ParentBusinessUnit = BUlevel12 };
            BusinessUnit BUlevel122 = new BusinessUnit() { BusinessUnitID = 5, BusinessName = "BusinessUnitE", ParentBusinessUnit = BUlevel12 };
            BUs.Add(BUlevel121);
            BUs.Add(BUlevel122);
            BusinessUnit BUlevel1211 = new BusinessUnit() { BusinessUnitID = 6, BusinessName = "BusinessUnitF", ParentBusinessUnit = BUlevel121 };
            BUs.Add(BUlevel1211);
            BusinessUnit BUlevel111 = new BusinessUnit() { BusinessUnitID = 7, BusinessName = "BusinessUnitG", ParentBusinessUnit = BUlevel11 };
            BUs.Add(BUlevel111);
        }

        static void AutoInitBU()
        {
            BusinessUnit BURoot = new BusinessUnit() { BusinessUnitID = 1, BusinessName = "BusinessUnitA" };
            BUs.Add(BURoot);
            Dictionary<int, string> transTable = new Dictionary<int, string>() {{2,"B"},{3,"C"} };
            //Create Child nodes
            for (int i = 0; i < 2; i++)
            {
                BUs.Add(new BusinessUnit() { BusinessUnitID = i + 2, BusinessName = "BusinessUnit" + transTable[i+2],ParentBusinessUnit =  BUs[i]});
            }
        }

        static void InitUsers()
        {
            Users.Add(new User() {UserID = 1,Firstname="User1" });
        }

        static void InitUPs()
        {
            UPs.Add(new UserPermissions() { BusinessUnit = BUs[1], User = Users[0] });
            UPs.Add(new UserPermissions() { BusinessUnit = BUs[2], User = Users[0] });
        }
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-06-30T16:31:04.617

我必须解决将分层 json 数据返回到网络的问题，我首先使用 Olly 建议使用通用表达式表 (CET)，我的代码是

```
 static public IEnumerable<TagMaster> GetHierarchy(IEnumerable<int> surveyId, Entities dbContext)
    {
        var sql = String.Format( @"
WITH SurveyTags ([TagID], [TagTitle], [SurveyID], [ParentTagID]) AS (
    SELECT [TagID], [TagTitle], [SurveyID], [ParentTagID]
    FROM [dbo].[TagMaster]
    WHERE [SurveyID] in ({0}) and ParentTagID is null
    UNION ALL
    SELECT
        TagMaster.[TagID], TagMaster.[TagTitle], TagMaster.[SurveyID], TagMaster.[ParentTagID]
        FROM [dbo].[TagMaster]
        INNER JOIN SurveyTags ON TagMaster.ParentTagID =  SurveyTags.TagID
)
SELECT [TagID], [TagTitle], [SurveyID], [ParentTagID]
FROM SurveyTags", String.Join(",", surveyId));
        return dbContext.TagMasters.SqlQuery(sql).Where(r => r.ParentTagID == null).ToList();
    } 
```

但是我注意到在访问孩子时，Web 应用程序仍在对数据库进行往返！将 Entity 对象传递给 Json 也很痛苦，因为很多人最终会得到不需要的字段。

我想出的最终解决方案不需要 CET，只需要一次访问数据库。就我而言，我可以根据 SurveyId 提取所有记录，但如果您没有这样的密钥可供使用，您仍然可以使用 CET 来获取层次结构。

这就是我将平面记录转换为树并获取我需要的字段的方式。

1）首先从数据库加载我需要的记录。

```
var tags = db.TagMasters.Where(r => surveyIds.Contains(r.SurveyID)).Select(r => new { id = r.TagID, name = r.TagTitle, parentId = r.ParentTagID }).ToList(); 
```

2) 为其创建一个 ViewModels 字典。

```
var tagDictionary = tags.Select(r => new TagHierarchyViewModel { Id = r.id, Name = r.name }).ToDictionary(r => r.Id); 
```

3）然后将其转换为层次结构。

```
 foreach (var tag in tags) {
     if (tag.parentId.HasValue)  {
                    tagDictionary[tag.parentId.Value].Tags.Add(tagDictionary[tag.id]);
     }
  } 
```

4) 删除所有子节点。

```
var tagHierarchy = from td in tagDictionary
    join t in tags on td.Key equals t.id
    where t.parentId == null
    select td.Value; 
```

结果：

![浏览器上的层次结构](../Images/958464ceb6281ff3d188edb8b14962d8.png)

# c# - .NET 的 SSO 选项

> ID：10745860
> 
> 赞同：2
> 
> 时间：2012-05-24T21:55:16.790
> 
> 标签：c#, .net, facebook, single-sign-on

我正在寻找 .NET/C# 的 SSO 选项，到目前为止遇到了 OpenID 和 DotNetOpenAuth。尚未详细研究它们，但只是想询问一些我应该考虑的其他建议。

我希望为 Google 和 Facebook 实现 SSO，理想情况下它将是一个支持两者的单一 3rd 方库，试图避免手动实现每个库。

如果您以前处理过此问题，请分享使用的方法/工具。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T22:04:47.930

OpenID 和 DotNetOpenAuth 是迄今为止您最好的选择。

DotNetOpenAuth 的有用链接

[http://www.tkglaser.net/2012/03/single-sign-on-using-facebook-in-asp.html](http://www.tkglaser.net/2012/03/single-sign-on-using-facebook-in-asp.html)

编辑：DotNetOpenAuth 主页：

[http://www.dotnetopenauth.net/](http://www.dotnetopenauth.net/)

OpenID 的有用链接

[http://www.hanselman.com/blog/TheWeeklySourceCode25OpenIDEdition.aspx](http://www.hanselman.com/blog/TheWeeklySourceCode25OpenIDEdition.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T22:51:34.170

您可能想要研究的另一件事是 Azure ACS 的使用。[这是启用 Windows Live 和 Facebook](http://community.composite.net/Blog/2011/07/06/Facebook-and-Windows-Live-validation-using-Windows-Azure)的示例。

我也将它用于谷歌凭据。

在这种方法中，您实际上将应用程序配置为仅与 Azure ACS 交互，并配置您希望通过 Azure 的 UI 启用的身份提供程序。因此，您的应用程序不需要单独担心每个提供程序，并且您确实可以添加更多提供程序而无需更改应用程序中的一行代码。

# oop - 咖啡脚本扩展类构造函数

> ID：10745867
> 
> 赞同：11
> 
> 时间：2012-05-24T21:56:04.513
> 
> 标签：oop, coffeescript

```
 class RedGuy
       constructor : (@name) ->
           @nameElem = $ @name
           @nameElem.css color : red

 class WideRedGuy extends RedGuy
       constructor : ->
           @nameElem.css width : 900

 jeff = new WideRedGuy '#jeff' 
```

我想`#jeff`既红又宽，但我总是得到`this.name is undefined`。如何扩展构造函数（追加？）以便可以访问原始对象的属性？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-24T21:58:04.540

您需要明确调用`super`它才能工作。调用将调用`super`的构造函数，之后将正确定义。如需更深入的解释，您应该查阅咖啡脚本关于此事[的文档](http://coffeescript.org/#classes)。`WideRedGuy``RedGuy``@nameElem`

```
class RedGuy
      constructor : (@name) ->
          @nameElem = $ @name
          @nameElem.css color : red

class WideRedGuy extends RedGuy
      constructor : ->
          ## This line should fix it
          super # This is a lot like calling `RedGuy.apply this, arguments`
          @nameElem.css width : 900

jeff = new WideRedGuy '#jeff' 
```

# android - 如何比较Android中第一个按钮中的数据（int）和第二个按钮中的数据（int）？

> ID：10745870
> 
> 赞同：0
> 
> 时间：2012-05-24T21:56:14.617
> 
> 标签：android, button

我有一个问题，我想比较按钮中的数据

```
package lynn.calculate.KaunterKalori;

import lynn.calculate.KaunterKalori.R;
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.TextView;
import android.widget.EditText;

public class CalculateAll extends Activity implements OnClickListener {

protected int totalKalori1;
protected int totalKalori2;
protected int totalKalori3;

EditText EstimateCalorie;
TextView TotalKaloriSehari;
TextView totalsarapan;
TextView totallunch;
TextView totaldinner;
TextView calorieneeds;
TextView resultDiff;

public CalculateAll() {

}

@Override
public void onCreate(Bundle savedInstancesState) {
    super.onCreate(savedInstancesState);
    setContentView(R.layout.calculate_all);

    View kiraButton = findViewById(R.id.buttonKiraAll);
    kiraButton.setOnClickListener(this);

    View bezaButton = findViewById(R.id.caloriediff);
    bezaButton.setOnClickListener(this);

    TotalKaloriSehari = (TextView) findViewById(R.id.JumlahKalori);
    totalsarapan = (TextView) findViewById(R.id.sarapantext);
    totallunch = (TextView) findViewById(R.id.lunchtext);
    totaldinner = (TextView) findViewById(R.id.dinnertext);
    EstimateCalorie = (EditText) findViewById(R.id.BMR);
    // calorieneeds = (TextView) findViewById(R.id.BMR);
    resultDiff = (TextView) findViewById(R.id.result);

    Bundle extras = getIntent().getExtras();
    if (extras != null) {
        totalKalori1 = extras.getInt("totalBreakfast");
        totalKalori2 = extras.getInt("totalLunch");
        totalKalori3 = extras.getInt("totalDinner");
    }

    totalsarapan.setText(totalKalori1 + "");
    totallunch.setText(totalKalori2 + "");
    totaldinner.setText(totalKalori3 + "");

}

public void onClick(View v) {
    if (v.getId() == R.id.buttonKiraAll) {

     int TotalKalori = calculateTotalKalori(totalKalori1, totalKalori2,
                totalKalori3);
        TotalKaloriSehari.setText(TotalKalori + "");

    }

    else if (v.getId()== R.id.caloriediff) {

        int nilaikalori = Integer.parseInt(EstimateCalorie.getText()
                .toString());

        int bmr = calculatebmr(nilaikalori);

        String deskripsiKalori = describekalori(bmr);
        resultDiff.setText("kalori makanan" + TotalKalori + " calori  diperlukan " + bmr + "=" + deskripsiKalori); 
// --> this TotalKalori also can't be used

        Intent n = new Intent(this, MainActivity.class);
        startActivity(n);

    }

}

public int calculateTotalKalori(int totalKalori1, int totalKalori2,
        int totalKalori3) {
    return (int) (totalKalori1 + totalKalori2 + totalKalori3);

}

public int calculatebmr(int nilaikalori) {
    return (int) (nilaikalori);
}

private String describekalori(int bmr) { 

    if (bmr < TotalKalori ) { //<-- this TotalKalori can't be read/used
        return "bykkan makan";
    } else if (bmr == TotalKalori) {

        return "kekalkan jumlah kalori ini";

    } else if (bmr > TotalKalori) {

        return "kurangkan pengambilan kalori";

    } else
        return "oiii";

} 
} 
```

第一个按钮 buttonKiraAll 读取 int totalKalori，然后我想使用 totalKalori 数据与第二个数据按钮 calorieDiff 进行比较，我想如何让第二个按钮可以读取 totalKalori？所以我可以进行比较

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T00:03:49.930

Or you can use getTag(); setTag(); to store the variables on the buttons...

Use setTag to the data you want

```
 myButton.setTag("fun Stuff"); 
```

Then on the listener just get the tag (you will need to do a type cast):

```
 OnClickListener myListner = new OnClickListener() {
             public void onClick(View view) {
                 doSomethingAwesome(view, (String) view.getTag());
             }
         }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T22:05:47.290

It's a scoping problem, you are declaring **int TotalKalori** locally in the onClick event.

Declare it like you have done with **totalKalori1** and it should work

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T15:54:39.743

仅全局声明一次**int TotalKalori**（在您声明的部分中`protected int totalKalori1; protected int totalKalori2;...`）并简单地将其用于两个按钮，例如：在 button1 TotalKalori = calculateTotalKalori(totalKalori1, totalKalori2,totalKalori3); 这个值是全局的，所以 button2 已经可以通过简单地在需要的地方使用 TotalKalori 以及比较部分来访问它。

# jquery - Jquery slideToggle 滑动现有内容，但使目标只是切换

> ID：10745874
> 
> 赞同：0
> 
> 时间：2012-05-24T21:56:57.190
> 
> 标签：jquery, slidetoggle

我有一个在页面加载时隐藏的 div，但是当您单击链接时，它应该垂直滑动，将页面上的其余内容向下推以腾出空间。这在 webkit 中运行良好，但在 Firefox（v12、Mac）和 XP 上的 IE7（也许是 Vista 上的 IE8）中，现有内容可以正常滑动，但有问题的 div 看起来就像我对其应用了切换功能，而不是漂亮的动画。

我尝试在 JS 和 CSS 中专门为 div 添加高度，但都没有奏效。

如何让新的 div (#div-more) 滑入，而不仅仅是出现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T14:08:43.933

我忘了我发布了这个，但解决方案是我试图将 slideToggle 应用于表单，这显然在 Firefox 中不起作用。

# android - 如何在android中为视图的背景设置动画

> ID：10745876
> 
> 赞同：0
> 
> 时间：2012-05-24T21:57:04.237
> 
> 标签：android, animation, android-animation

我的目标是 11 级以上

通过执行类似的操作很容易为整个视图的 alpha 设置动画

```
view.animate().alpha(0) 
```

但这淡化了整个观点。

我有兴趣只淡化视图的背景资源/可绘制对象。

我该怎么做？

现在我正在这样做：

```
view.getBackground().setAlpha(0) 
```

但这显然不会动画（淡出）它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-01T12:53:43.303

你可以使用九个旧机器人（[https://github.com/JakeWharton/NineOldAndroids](https://github.com/JakeWharton/NineOldAndroids)）

```
 ValueAnimator colorAnim = ObjectAnimator.ofInt(this, "backgroundColor", /*Red*/0xFFFF8080, /*Blue*/0xFF8080FF);
colorAnim.setDuration(3000);
colorAnim.setEvaluator(new ArgbEvaluator());
colorAnim.setRepeatCount(ValueAnimator.INFINITE);
colorAnim.setRepeatMode(ValueAnimator.REVERSE);
colorAnim.start(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T21:59:55.287

您可以在相对布局中转换视图并在其中设置两个单独的视图，一个用于背景（带有 alpha 动画），一个用于内容

# xml - 在存储过程中高效访问 Xml 参数

> ID：10745877
> 
> 赞同：2
> 
> 时间：2012-05-24T21:57:26.940
> 
> 标签：xml, sql-server-2005, stored-procedures

我正在尝试优化依赖于`XML`变量输入的一些类型参数的存储过程。对执行计划的分析表明与访问这些参数中的数据相关的成本很高。

鉴于：

```
DECLARE @FirstNameXML  XML; 
```

格式为

```
<FirstNames>
  <Name>John</Name>
  <Name>Joe</Name>
</FirstNames> 
```

我需要执行一些操作（假设参数为非空）：

**提供的名称计数**

```
SET @FirstNameCount = 
  (SELECT COUNT(FirstNameValues.Name.value('.','VARCHAR(50)'))
  FROM @FirstNameXML.nodes('/FirstNames/Name') 
  AS FirstNameValues(Name)) 
```

**如果计数 = 1**

```
...
AND First_Name LIKE
  (SELECT TOP(1) FirstNameValues.Name.value('.','VARCHAR(50)') + '%'
  FROM @FirstNameXML.nodes('/FirstNames/Name') 
  AS FirstNameValues(Name))
... 
```

**否则，如果计数 > 1**

```
...
AND First_Name IN
(SELECT FirstNameValues.Name.value('.','VARCHAR(50)')
  FROM @FirstNameXML.nodes('/FirstNames/Name') 
  AS FirstNameValues(Name))
... 
```

我尝试了一些优化：

**将计数查询更改为**：

```
SET @FirstNameCount = 
  (SELECT CAST(CAST(@FirstNameXML.query('count(/FirstNames/Name)') 
    AS VARCHAR(10)) AS INT) 
```

**将 count == 1 查询更改为**：

```
...
AND First_Name LIKE
  (SELECT @FirstNameXML.value('(/FirstNames/Name)[1]', 'VARCHAR(50)') + '%')
... 
```

不知何故，优化后存储过程运行得更慢，即使更改似乎降低了执行计划的成本。这给我留下了几个问题：

1.  **我是否误解了我实施的优化？**
2.  **有没有更有效的方法来解决这个问题？**（基于 XML 参数的查询）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T05:43:53.750

将 XML 中的行添加到表变量或临时表中。确保表变量/临时表的名称列上有索引。我也不认为需要对计数为 1 或多个时进行不同的查询。这样，您将只解析一次 XML。

笔记。当涉及到 XML 时，执行计划成本是不可信的。更好地测试`set statistics time on`和测量实际性能。

```
-- Test data
declare @FirstNameXML xml;
set @FirstNameXML = 
'<FirstNames>
  <Name>John</Name>
  <Name>Joe</Name>
</FirstNames>'

-- Put your data in a table variable.
-- Have Name as a primary key and you will get an index
declare @T table
(
  Name varchar(50) primary key
)

-- Add rows from XML to @T
insert into @T(Name)
select distinct T.N.value('.', 'varchar(50)')
from @FirstNameXML.nodes('FirstNames/Name') as T(N)

select *
from YourTable
where First_Name in (select Name from @T) 
```

# apache - Apache 的 Ubuntu 错误：（98）地址已在使用中

> ID：10745878
> 
> 赞同：32
> 
> 时间：2012-05-24T21:57:40.560
> 
> 标签：apache, ubuntu-11.10

当我尝试在 Ubuntu 中启动 Apache 时出现此错误。

```
 (98)Address already in use: make_sock: could not bind to address 0.0.0.0:80
 no listening sockets available, shutting down
 Unable to open logs
 Action 'start' failed. 
```

我的ports.conf中有这个

```
NameVirtualHost *:80
Listen 80 
```

这是我的虚拟主机文件

```
<VirtualHost *:80>
          ServerAdmin example@example.com
          ServerName rails.server.com
          # ServerAlias
          DocumentRoot /var/www/sample_app/current/public
          ErrorLog /var/www/sample_app/error.log

          RailsEnv production
        <Directory "/var/www/sample_app/current/public">
          Options Indexes FollowSymLinks MultiViews
          Order allow,deny
          Allow from all
        </Directory>
</VirtualHost> 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2013-05-31T04:46:46.460

```
netstat -ltnp | grep :80 
```

这将返回以下内容：

> tcp6 0 0 :::80 :::* 听 1047/apache2

然后运行以下命令：

```
sudo kill -9 1047 
```

（1047 - PID 号）

（出现在您的特定实例上的 pid。）

重启阿帕奇。

```
sudo service apache2 restart 
```

参考[Ubuntu 论坛](http://ubuntuforums.org/showthread.php?t=1636667)。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-24T22:00:43.953

看来80端口已经被占用了。使用另一个端口或尝试`netstat`（`grep`结果仅选择其中值为 80 的行），`ps`并`kill`查看哪个应用程序占用了该端口并将其关闭。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-11-26T04:10:11.903

在所有情况下，终止进程可能不起作用，因为使用端口 80 的进程将重新启动并且不允许使用该端口。所以可以做的是改变apache的端口，如果这无关紧要的话。

为此需要改变两件事：

1.  使用任何文本编辑器打开`/etc/apache2/ports.conf`并将条目的值更改为`Listen 80`所需的端口（例如`Listen 8080`）。

2.  将条目更改为您在（例如）中的文件中`<virtualhost 80>`提供的相同端口号。`/etc/apache2/ports.conf``/etc/apache2/sites-enabled/000-default``<virtualhost 8080>`

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-07-31T11:16:15.987

确保您没有`Listen 80`在多个地方拥有该命令。

就我而言，我遇到了同样的错误，原因是该命令同时位于 ports.conf 和 sites-enabled/000-default 中。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2016-08-23T19:57:41.523

就我而言，它是 nginx（因为我的服务器上有它）。

```
sudo service nginx stop
sudo service apache2 start 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-06-20T20:42:15.187

```
sudo netstat -tulpn| grep :80 
```

`pkill`进程（nginx？）

禁用任何绑定到您不想绑定到端口 80 的虚拟主机（nginx？）。它在 /etc/nginx/sites-enabled 或 /etc/apache2/sites-enabled

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-07-14T23:15:54.830

sudo kill -9 -2321 (pid) Restart BT Done..... 无需更改 conf。文件。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-05-17T06:38:26.613

当您通过终端重新启动或启动服务器时，您可能忘记在命令前添加**sudo**。

使用`sudo /etc/init.d/apache2 reload`代替`/etc/init.d/apache2 reload`

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-12-20T07:30:26.397

我遇到了同样的问题，原因却截然不同。我在 CentOS 6.5 上运行 Apache 2.4.7 和 PHP 5.5.6。

我通过同时设置 output_handler=ob_gzhandler 和 zlib.output_compression=On 搞砸了 php.ini（可以设置其中一个，不能同时设置）。

所以在重新启动 Apache 时，它​​绑定到端口 80，但没有其他任何事情发生。看起来它正在运行，但是 php 的错误将它锁定在某个地方。

线索是检查“php -v”……当我看到它没有返回任何东西（它把错误写入error_log）时，我修复了php.ini，Apache又开心了。

也许这可以帮助某人...

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-01-05T18:16:10.273

**启动 apache2 时，我在全新安装 Ubuntu 12.10 时遇到此错误。**

这是apache2中的一个错误。它被挂在后台。这是我对软件中可能存在错误的位置的演练。

这是我得到的错误：

```
el@titan:~$ sudo service apache2 start
 * Starting web server apache2               
(98)Address already in use: make_sock: could not bind to address 0.0.0.0:80
no listening sockets available, shutting down
Unable to open logs
Action 'start' failed.
The Apache error log may have more information.
                                                                         [fail] 
```

地址已在使用中？它可以用来做什么？看看这个：

```
el@titan:~$ grep -ri listen /etc/apache2
/etc/apache2/apache2.conf:#   supposed to determine listening ports for incoming connections, and which
/etc/apache2/apache2.conf:# Include list of ports to listen on and which to use for name based vhosts
/etc/apache2/ports.conf:Listen 80
/etc/apache2/ports.conf:    Listen 443
/etc/apache2/ports.conf:    Listen 443 
```

这意味着 apache2 正在阻止 apache2 启动。奇怪。这将确认：

```
el@titan:~$ ps -ef | grep apache2
root      1146   954  0 15:51 ?        00:00:00 /bin/sh /etc/rc2.d/S91apache2 start
root      1172  1146  0 15:51 ?        00:00:00 /bin/sh /usr/sbin/apache2ctl start
root      1181  1172  0 15:51 ?        00:00:00 /usr/sbin/apache2 -k start
root      1193  1181  0 15:51 ?        00:00:00 /bin/bash /usr/share/apache2/ask-for-passphrase 127.0.1.1:443 RSA
el        5439  5326  0 16:23 pts/2    00:00:00 grep --color=auto apache2 
```

是的，在这种情况下 apache2 正在运行，我试图在同一个端口上第二次启动 apache2。

让我感到困惑的是，`service`报告 apache2 没有运行：

```
el@titan:~$ sudo service apache2 status
Apache2 is NOT running. 
```

当您查询 apache2ctl 的状态时，它会挂起。

```
root@titan:~# /usr/sbin/apache2ctl status
**hangs until Ctrl-C is pressed. 
```

所以 Ubuntu 在启动时似乎无法管理 apache2。是时候停止 apache2：

```
root@titan:~# /usr/sbin/apache2ctl stop
httpd (no pid file) not running 
```

一个大线索！您尝试停止 apache2 并且它丢失了进程 ID！所以Ubuntu无法阻止apache2，因为它不知道它在哪里！

您会认为重新启动会修复它，但这不是因为 apache2 在启动时启动并挂起。apache2 的正常启动过程无法正常工作。

## 那么如何解决呢？

**我能够**通过分析`ps`命令输出来解决这个问题。请注意，该`ps`命令告诉我们该进程是由“/etc/rc2.d/S91apache2 start”启动的。

那是需要快速踢的违规程序。

`/etc/rc2.d/S91apache2`是用于在计算机启动时为您启动 apache2 的符号链接。由于某种原因，它似乎正在启动 apache2 然后挂起。所以我们必须告诉它不要那样做。

所以去看看那个`/etc/rc2.d/S91apache2`。

```
el@titan:/etc/rc2.d$ ls -l
lrwxrwxrwx   1 root root    17 Nov  7 21:45 S91apache2 -> ../init.d/apache2* 
```

这是一个我们不希望它存在的符号链接。这样做可以防止 apache2 在启动时启动：

```
root@titan:~# sudo update-rc.d -f apache2 remove
 Removing any system startup links for /etc/init.d/apache2 ...
   /etc/rc0.d/K09apache2
   /etc/rc1.d/K09apache2
   /etc/rc2.d/S91apache2
   /etc/rc3.d/S91apache2
   /etc/rc4.d/S91apache2
   /etc/rc5.d/S91apache2
   /etc/rc6.d/K09apache2 
```

重新启动计算机以确保 apache2 不会启动并挂起。好的好的。现在您可以将 apache2 恢复原状，但这会使它再次失败。

```
root@titan:~$ sudo update-rc.d apache2 defaults     //(don't do this)
 Adding system startup for /etc/init.d/apache2 ...
   /etc/rc0.d/K20apache2 -> ../init.d/apache2
   /etc/rc1.d/K20apache2 -> ../init.d/apache2
   /etc/rc6.d/K20apache2 -> ../init.d/apache2
   /etc/rc2.d/S20apache2 -> ../init.d/apache2
   /etc/rc3.d/S20apache2 -> ../init.d/apache2
   /etc/rc4.d/S20apache2 -> ../init.d/apache2
   /etc/rc5.d/S20apache2 -> ../init.d/apache2 
```

相反，像这样启动 apache2：

```
sudo service apache2 start 
```

并且 apache2 已备份并再次提供页面。apache2/Ubuntu 12.10 似乎存在一些严重的错误，导致 apache2 启动并挂起。这是一种解决方法，我想解决方法是获取更新版本的 apache2 和 Ubuntu，并希望获得最好的结果。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-04-07T18:29:22.487

就我而言，我删除了默认`ssl.conf`文件（重命名为`ssl.conf.bak`），并拥有自己的 ssl 配置文件。

然后我做了一个`yum update`并且它更新了 apache... 这也重新引入了文件`ssl.conf`，这意味着我有 2 个 conf 文件`Listen 443`。

解决方案（通用 - CentOS）：去`/etc/httpd/conf.d`，做一个`grep -r 'Listen' .`，看看你是否有重复的`Listen XXX`语句，根据需要删除它们。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-03-23T09:18:02.460

### 当前运行的服务列表，

```
$ sudo netstat -tulpn

Active Internet connections (only servers)
Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name
tcp        0      0 0.0.0.0:8069            0.0.0.0:*               LISTEN      6399/python     
tcp        0      0 0.0.0.0:53670           0.0.0.0:*               LISTEN      6681/Brackets-node
....
.... 
```

### 仅查找特定服务，

```
$ sudo netstat -tulpn| grep python
jpa@jpa-dell:~/odoo/master-hr-holidays-newapi-jpa$ sudo netstat -tulpn| grep python
tcp        0      0 0.0.0.0:8069            0.0.0.0:*               LISTEN      6399/python     
tcp        0      0 127.0.0.1:41974         0.0.0.0:*               LISTEN      3123/python 
```

您是否注意到上面运行 python 的结果 PID (6399)。

### 使用以下命令终止该服务，

```
$ sudo kill -9 -6399 
```

现在服务已完全停止，您可以正常重新启动。

* * *

用于查找正在运行的服务的额外命令，

```
$ ps -ef
$ ps -ef | grep python 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-06-21T13:45:22.913

除了解决方案找到在 :80 上运行的进程并杀死，然后重新启动，

如果您在 apache conf 文件或 apache conf 文件中包含的任何 .conf 文件中有多个“Listen”条目，则可能会出现此错误。希望这对某人有帮助..!!

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-09-02T10:07:11.190

这是由于端口 80 被其他服务转移使用。

```
sudo killall httpd 
```

检查任何服务是否仍在使用 80

```
sudo netstat -tulpn| grep :80 
```

并重新启动服务器

```
sudo service httpd start 
```

[![在此处输入图像描述](../Images/12eb22ce079b1a19d42327e7175193b3.png)](https://i.stack.imgur.com/tW7G0.png)

# foursquare - canonicalUrl 从foursquare 用户对象中消失了？

> ID：10745881
> 
> 赞同：1
> 
> 时间：2012-05-24T21:57:48.777
> 
> 标签：foursquare

我没有在[更改日志](https://developer.foursquare.com/docs/changelog)中看到任何关于从 Foursquare 用户对象中删除 canonicalUrl 字段的内容，但我不再看到该字段被返回。

具体来说，在运行场所详细信息查询时，位于tips 字段内的用户对象丢失。我使用 v=20120524 作为版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T22:22:58.983

不，它不再可用。但您只需要用户 ID 即可生成它：

```
https://www.foursquare.com/user/{user_id} 
```

# php - mysqli 使用 fetch_assoc 准备好的语句

> ID：10745885
> 
> 赞同：5
> 
> 时间：2012-05-24T21:57:56.680
> 
> 标签：php, sql, mysqli

我的目标是能够获取一个变量（使用 php）并在准备好的语句（使用 mysqli）中使用它，然后 fetch_assoc。由于某种原因，此代码将不起作用（没有错误）。我有 rtm 并且我没有找到任何将 fetch_assoc 与准备好的语句结合起来的东西，所以我不确定它是否可能。感谢您提供任何帮助以使其正常工作，这是我目前的代码。

```
$where = $_GET['section'];
            $mysqli = mysqli_connect("localhost", "root", "","test");

            if($stmt = mysqli_prepare($mysqli,"SELECT title, img, active, price FROM ? ORDER by ID limit 5 ")){
                mysqli_stmt_bind_param($stmt, 's', $where);
                mysqli_stmt_execute($mysqli);
                mysqli_stmt_fetch($mysqli);
                 while($row = mysqli_fetch_assoc($stmt)){
                    if($row['active']=="yes"){
                        echo 'the rest of my stuff goes here'; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T22:20:30.917

[从mysqli->prepare](http://www.php.net/manual/en/mysqli-stmt.prepare.php)的 PHP 网站页面（重点添加到最相关的部分）：

> 笔记：
> 
> 标记仅在 SQL 语句中的某些位置是合法的。例如，它们可以在 INSERT 语句的 VALUES() 列表中使用（以指定行的列值），或者在与 WHERE 子句中的列进行比较以指定比较值时。
> 
> ***但是，它们不允许用于标识符（例如表名或列名）***、在命名要由 SELECT 语句返回的列的选择列表中）或指定二元运算符（例如 = 等号）的两个操作数。后一个限制是必要的，因为不可能确定参数类型。通常，参数仅在数据操作语言 (DML) 语句中合法，在数据定义语言 (DDL) 语句中不合法。

假设您可以解决该问题，那么您的使用`mysqli`会有些混乱。您正确绑定参数并执行，但您混淆了两种不同的获取结果的方式。任何一个

1.  用于`mysqli_stmt_get_result`获取结果集，然后`mysqli_fetch_assoc`在其上使用，或者
2.  使用绑定结果`mysqli_stmt_bind_result`，然后使用`mysqli_stmt_fetch`将下一组结果提取到绑定变量中。（通常你会使用类似的东西来迭代结果`while(mysqli_stmt_fetch($stmt)){ //do stuff here }`

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2015-09-08T03:32:26.037

另一种方式风格，我们可以写在下面：

```
$mysqli=new mysqli("host","user","pass","db");
$stmt = $mysqli->prepare($query);
$stmt->bind_param('s', $variable);
$stmt->execute();
$result = $stmt->get_result();
while($row = $result->fetch_assoc()){
....
} 
```

# active-directory - LDAP:// OpenDirectory 到 ActiveDirectory 查询更改

> ID：10745889
> 
> 赞同：0
> 
> 时间：2012-05-24T21:58:16.427
> 
> 标签：active-directory, ldap, openldap

这可以连接到 OpenDirectory LDAP

```
<add name="LDAP" 
     type="LBOX.Membership.LDAPMembershipProvider" 
     LDAPRoot="LDAP://10.0.1.6:389/cn=users,dc=fileserver,dc=office,dc=example,dc=com" /> 
```

如果我希望它连接到 Windows 2008 R2 Active Directory，那么此行中是否有方案更改？AD 的主机名是 winvm1 域是 office.example.com

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T05:06:44.067

对于 Active Directory，我会尝试：

```
LDAPRoot="LDAP://winvm1/cn=users,dc=office,dc=lbox,dc=com" 
```

我删除了 IP 和端口并将其替换为`winvm1`服务器名称，加上`dc=fileserver`您的 LDAP 字符串中的 - 当您的域是时您真的需要`office.example.com`吗？

或者，您可以使用 Active Directory 的“无服务器”绑定 - 尝试以下路径：

```
LDAPRoot="LDAP://cn=users,dc=office,dc=lbox,dc=com" 
```

这行得通吗？

# windows - “密钥”应该如何保留在内存中？

> ID：10745893
> 
> 赞同：3
> 
> 时间：2012-05-24T21:58:52.397
> 
> 标签：windows, security, memory, encryption, session-cookies

我们有一个服务器，它通过自定义登录程序安全地向客户端发送密钥。该密钥随后用于加密进一步的客户端请求。该密钥像 cookie 一样保存在客户端的磁盘上，并由可能在客户端决定注销并导致密钥过时之前多次启动和停止的程序使用（因此密钥保存在磁盘上，因为当没有程序运行时，登录和注销之间可能有很长的时间）。

将密钥仅保存在内存中而不是磁盘上似乎更安全（如果崩溃或重新启动丢失密钥并随后强制重新登录，这没关系）。

在 Windows 上，在程序的单独执行之间仅将密钥保留在内存中（忽略内存可能是虚拟的并分页到磁盘）的最佳方法是什么？

一种可能的解决方案是让一个普通的 Windows 服务在接受密钥的客户端上运行，将其保留在服务的内存中，并在请求时返回它（或使用执行相同操作的等效普通 DDE 服务器）。首选非.net 解决方案。

是否有一个通常运行的标准 Windows 服务已经提供了这种能力？

有更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T22:16:19.203

您可能可以尝试几种不涉及正在运行的进程的解决方案：

*   将其存储在易失性注册表项（[REG_OPTION_VOLATILE](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724844%28v=vs.85%29.aspx)）中

*   将其存储在[全局原子表中](http://msdn.microsoft.com/en-us/library/windows/desktop/ms649060%28v=vs.85%29.aspx)。密钥必须存储为字符串。您可能需要两个原子；一个存储密钥，一个用于定位第一个原子，以便您可以调用 GlobalGetAtomName。第二个原子应该有一个已知名称，如“YourAppName:S-UsersSidGoesHere”，这样您就可以调用 GlobalFindAtom。

如果您决定将其存储在 %temp% 的文件中，您可以使用[TOKEN_STATISTICS.AuthenticationId](http://msdn.microsoft.com/en-us/library/windows/desktop/aa379632%28v=vs.85%29.aspx)作为用于加密真实密钥的密钥的一部分。您可以使用 EFS (FILE_ATTRIBUTE_ENCRYPTED) 加密文件本身...

# .net - How do I begin to implement Forms Authentication in .NET

> ID：10745894
> 
> 赞同：1
> 
> 时间：2012-05-24T21:58:59.670
> 
> 标签：.net, c#-4.0, forms-authentication

I want to use forms authentication in my .NET application. How do I go about doing this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T22:55:25.930

Not sure if this answers your question but if this is a new project I would highly recommend using ASP.NET Membership stuff.

> ASP.NET membership enables you to validate and manage user information for your Web application. It provides functionality for validating user credentials, creating and modifying membership users, and managing user settings such as passwords and e-mail addresses. ASP.NET membership is primarily intended for use with ASP.NET forms authentication, but can be used anywhere within an ASP.NET application.

[Managing Users by Using Membership](http://msdn.microsoft.com/en-us/library/tw292whz)

# haskell - 为什么值构造函数不能在不参数化类型的情况下采用类型变量？

> ID：10745896
> 
> 赞同：4
> 
> 时间：2012-05-24T21:59:04.203
> 
> 标签：haskell

作为初学者，我不清楚为什么不允许这样做：

```
data Pair = Pair a b 
```

也就是说，为什么要`Pair 5 "foo"`和`Pair 'C' []`必须生产不同的类型？为什么不允许他们都创建 type 的值`Pair`？

我正在从“Learn you a”、RWH 和 Haskell WikiBook 中学习，但一直无法找到描述我正在寻找的参数化类型的那种精确、不稳定的语言。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-24T22:03:52.860

从根本上说，问题在于您将没有关于`Pair`. 如果您只知道它包含*任何*类型的值，那么您可以在其上使用的唯一真正的函数就是`id`，这是非常没用的！

问题是，由于每个值都可以是*任何东西*，因此您根本无法保证它们。所以你甚至不能使用`==`: 如果值是一个函数呢？您无法比较函数是否相等！

想象一下编写一个作用于您假设`Pair`类型的函数：

```
fn (Pair a b) = ... 
```

您还可以在`a`和上使用哪些其他功能`b`？

任何具有任何具体类型（例如`Int -> Int`或其他东西）的东西都行不通，因为你无法判断是否`a`是`Int`. 像这样的更复杂的类型`Num n => n -> n`不起作用，因为您甚至不知道是否`a`是数字。唯一可以使用的函数是*类型*为`t1 -> t1`or的函数`t1 -> t2`。然而，第一类唯一合理的功能是`id`，并且根本没有第二类的*合理*功能。

现在，你可以说“我要试试这个函数，如果类型不起作用，就抛出一个错误。” 但这将是动态类型，并且基本上会完全抛弃类型系统。这听起来很可怕，但有时它可能有意义，所以你可以用它`Data.Dynamic`来完成类似的事情。但是，作为初学者，您不必担心它，而且您可能永远不需要使用它——到目前为止，我还没有。为了完整起见，我只是将其包括在内。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-24T22:28:06.037

使用存在类型语言扩展，您可以定义这样的类型：

```
{-# LANGUAGE ExistentialQuantification #-}

data Pair = forall a b. Pair a b

a, b :: Pair                                
a = Pair 1 2
b = Pair "abc" 'x' 
```

这里两者都`a`具有`b`相同的类型。

通常这不是这样做的，因为要对 a 做任何有用的事情，`Pair`您需要知道它包含什么，并且定义`Pair`删除了所有这些信息。

因此，如果您真的需要，您可以创建这样的值，但是很难找到任何有用的东西来处理它们。

# python - 如何使用 while 循环来计算结果？

> ID：10745897
> 
> 赞同：-4
> 
> 时间：2012-05-24T21:59:11.270
> 
> 标签：python

例子：

```
choice(['Aa', 'Bb', 'Cc') 
```

应该打印：

```
Enter choice: Aa
Enter choice: Cc
Enter choice: Aa
Enter choice: Aa
Enter choice: Bb
Enter choice: Cc
Enter choice: Aa
Enter choice:

There are 4 choices for Aa.

There are 2 choices for Cc.

There are 1 choices for Bb.

There is 1 choice for Unknown. 
```

请注意，它会一直询问您的选择是什么，直到出现空白为止。

至今：

默认选择（n）：

```
while True:

    vote = input('Enter choice: ') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T00:29:13.790

这听起来很像家庭作业，所以这里有一些伪代码：

```
function choice gets an options list

    counter is a dictionary
    for each option in the options list
        counter[option] is 0
    counter[unknown] is 0

    loop
        ask for input
        if input is blank
            exit the loop
        otherwise if input is in the option array
            increment counter[input]
        otherwise
            increment counter[unknown]

    for each option in the options list
        "Option {option} had {counter[option]} votes"
    "Option unknown had {counter[unknown]} votes" 
```

# javascript - 使用 JavaScript 检测 HTML5 上下文菜单支持？

> ID：10745898
> 
> 赞同：0
> 
> 时间：2012-05-24T21:59:17.173
> 
> 标签：javascript, jquery

我在 Modernizr 的文档中没有注意到它，但我想你创建一个`menu`元素然后检查它是否存在？我唯一担心的是浏览器可能支持但不支持**type** `context`。有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T21:54:53.863

我想出了一个相当劣质的解决方案，`true`据我所知，它返回 Firefox，然后返回`false`Chrome、IE 和 Opera。一探究竟：

```
// Detect context menu support.

function contextMenuSupported() {

    var oMenu = document.createElement("menu");

    // Kind of backwards but seems to work.

    if (oMenu.type == "list")
        return true;

    return false;

} 
```

让我知道这是否让你**感到恐惧**。似乎当使用支持它的浏览器创建菜单元素时，某些属性是固有定义的*。*

# c# - 按另一个列表过滤列表 C#

> ID：10745900
> 
> 赞同：35
> 
> 时间：2012-05-24T21:59:35.567
> 
> 标签：c#, linq

我有以下业务对象：

```
 public class ItemCategoryBO
    {
       public string ItemCategory { get; set; }
       public string Title { get; set; }
    }

    public class ItemBO
    {
       public int ItemId { get; set; }
       public string Title { get; set; }
       public string ItemCategory { get; set; } 
    }

    List<ItemCategoryBO> categoryList = new List<ItemCategoryBO>();

    ItemCategoryBO itemCategory = new ItemCategoryBO();
    itemCategory.ItemCategoryCd = "CARS";
    itemCategory.Title = "Cars";

    ItemCategoryBO itemCategory2 = new ItemCategoryBO();
    itemCategory.ItemCategoryCd = "PLANES";
    itemCategory.Title = "Planes";

    categoryList.Add(itemCategory);
    categoryList.Add(itemCategory2);

    List<ItemBO> itemList = new List<ItemBO>();

    ItemBO item1 = new ItemBO();
    item1.ItemId = 1;
    item1.Title = "1st item";
    item1.ItemCategoryCd = "OTHER";

    ItemBO item2 = new ItemBO();
    item2.ItemId = 2;
    item2.Title = "2nd Item";
    item2.ItemCategoryCd = "CARS";

    ItemBO item3 = new ItemBO();
    item3.ItemId = 3;
    item3.Title = "3rd Item";
    item3.ItemCategoryCd = "PLANES";

    itemList.Add(item1);
    itemList.Add(item2);
    itemList.Add(item3); 
```

如果我有几个类别的列表，我如何在类别列表中找到包含某个类别的项目列表？（在我的示例中，我想取回项目 2 和 3）

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2012-05-24T22:19:38.263

如果你有这样的情况：

```
List<ItemBO> items;
List<ItemCategoryBO> categories; 
```

并且您希望获取具有类别列表中的类别的所有项目，您可以使用它：

```
IEnumerable<ItemBO> result = items.Where(item =>
    categories.Any(category => category.ItemCategory.equals(item.ItemCategory))); 
```

Any 运算符枚举源序列，如果任何元素满足谓词给出的测试，则返回 true。在这种情况下，如果类别列表包含 ItemCategoryBO，其中 ItemCategory 字符串与项目的 ItemCategory 字符串相同，则返回 true。[MSDN](http://msdn.microsoft.com/en-us/library/bb394939.aspx#standardqueryops_topic15)上有关它的更多信息

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T22:04:30.553

Try this:

```
List<ItemBO> items = ...;
ItemCategoryBO category = ...;

List<ItemBO> filteredItems = items
    .Where( i => i.ItemCategory.Equals(category) )
    .FirstOrDefault(); 
```

**Updated to address OP's updated question:**

If I have a list of a few categories, how could I find a list of items that contain a category in the list of categories? (In my example, I want to get back items 2 and 3)

I think you actually should do this in two steps. First, get your distinct list of items. Then, from your items, get your list of categories. So:

```
// First, get the distinct list of items
List<ItemBO> items = new List<ItemBO>();
foreach ( var category in categories )
{
    foreach ( var item in category.Items )
    {
        if ( !items.Contains(item) )
            items.Add(item);
    }
}

// Second, get the list of items that have the category.
List<ItemBO> filteredItems = items
    .Where( i => i.ItemCategory.Equals(category) )
    .FirstOrDefault(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T22:03:56.783

Try using some linq

```
 List<ItemBO> itm = new List<ItemBO>;
 //Fill itm with data

 //get selected item from control

 string selectedcategory = cboCatetories.SelectedItem;

 var itms = from BO in itm where itm.ItemCategory = selectedcategory                              select itm;

itms now contains all items in that category 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-24T22:14:08.110

这是我在[Linqpad中所做的事情](http://www.linqpad.net)

```
无效的主要（）
{

    var cat1 = new ItemCategoryBO {ItemCategory="c1", Title = "c1"};
    var cat2 = new ItemCategoryBO {ItemCategory="c2", Title = "c2"};

    var item1 = new ItemBO { ItemId = 1, Title = "item1", ItemCategory="c1"};
    var item2 = new ItemBO { ItemId = 1, Title = "item2", ItemCategory="c2"};
    var item3 = new ItemBO { ItemId = 1, Title = "item3", ItemCategory="c2"};
    var item4 = new ItemBO { ItemId = 1, Title = "item4", ItemCategory="c3"};

    var items = new List() {item1, item2, item3, item4};
    var categories = new List() {cat1, cat2};

    var itemsInCategory = 来自项目中的项目
    将 item.ItemCategory 上的 category 中的 category 等于 category.ItemCategory 加入 itemInCategory
    来自 itemInCategory 中的 categoryItem
    选择新的 {item.Title, item.ItemCategory};

    itemsInCategory.Dump();
}

// 这里定义其他方法和类
      公共类 ItemCategoryBO
        {
           公共字符串 ItemCategory { 获取；放; }
           公共字符串标题 { 获取；放; }
        }

        公共类 ItemBO
        {
           公共 int ItemId { 获取；放; }
           公共字符串标题 { 获取；放; }
           公共字符串 ItemCategory { 获取；放; }
        }

```

这将返回：

```
标题、项目类别
项目1 c1
项目2 c2
项目3 c2

```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-07-25T11:20:45.213

希望这可以帮助：

```
var result = (Object to search in).Where(m => (Object to compare to).Any(r => r.Equals(m.Key)).ToList(); 
```

# javascript - 在javascript中单击“确定”按钮之前如何不做任何事情？

> ID：10745901
> 
> 赞同：2
> 
> 时间：2012-05-24T21:59:36.940
> 
> 标签：javascript

我有一个 $.ajax() 函数，它请求带有字符串位置的东西。

假设 ajax 响应中的 result.location = "Somewhere"，但理论上它可以是任何字符串。

成功（结果）它会：

```
Line 1: alert("Hello There");
Line 2: alert("Look Here" + result.location); // Look here Somewhere 
```

发生的情况是弹出“Hello There”的警报框，并且直到用户关闭“Hello There”警报框后才显示“Look here”警报框。

但是，如果对于第 1 行而不是警报，我有一个 div 而不是显示的警报框，例如：

```
<div>Hello There <input type="button">OK</input></div> 
```

所以我有：

```
Line 1: showDivAlert();
Line 2: alert("Look Here" + result.location); // Look here Somewhere 
```

然后会发生 div 出现并弹出警报“Look Here”。我可以在函数“showDivAlert()”中添加什么，以便在用户单击“确定”按钮之前，showDivAlert() 下面的任何代码都不会被执行？

注意：这里的关键是保留 ajax 请求的 result.location 字符串

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T22:02:45.503

与其在显示对话框的同一块中定义您的 post-OK 代码，不如在自定义对话框中按下 OK 按钮的事件处理程序应该触发任何其他行为。

像这样的东西：

```
<div>Hello There <input type="button" onclick="okClicked()" value="OK"/></div> 
```

* * *

```
function okClicked() {
    alert('Look Here');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T22:05:27.473

更改您的 HTML，以便您拥有：

```
<div>Hello There <input type="button" id="alert-ok">OK</input></div> 
```

现在您可以通过#alert-ok id 定位按钮。

如果您使用的是 jQuery，只需附加一个事件：

```
showDivAlert();
$("#alert-ok").click(function() {
    //do work
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-24T22:49:56.723

`alert()`在javascript中有效地阻塞了执行线程，导致下一行代码直到对话框关闭才被执行。

相反，您`showDivAlert();`不会阻塞线程并继续正常执行。要解决此问题，您应该在方法中添加回调功能。

与 类似，只有*在服务器发出有效响应后才会*执行`$.ajax()`where ；你可以像这样添加一个参数：`success`

 *```
function showDivAlert(callbackOK_){
    //render a fancy popup with a #btn-ok
    $('#btn-ok').click(callbackOK_);//attach the callback passed
} 
```

*您指出了另一个`result.location`“丢失”的答案 - 相反，它在回调函数的执行范围内根本不可用。*

```
showDivAlert(function(){
    alert("Look Here" + result.location);
}); 
```

[摆弄](http://jsfiddle.net/ovfiddle/PNAxn/)*

# php - Ajax表单将变量返回给php

> ID：10745903
> 
> 赞同：2
> 
> 时间：2012-05-24T21:59:51.147
> 
> 标签：php, ajax, forms

我有另一个问题：

Ajax 表单运行良好。他们中的大多数需要做 mysql 的东西，并且只有在条目可以写入或不可以写入的情况下才返回值。我只使用了 echo 语句。例如回显“1”；如果可以写入值并回显“2”；如果无法写入值。

现在我需要回调 3 个变量。我知道我可以将它们写在一个数组中。我的问题只是，我无法将此变量返回到我的可见站点。

这是我的 JavaScript 代码：

```
//Show statistic
$('.statistic_submit').click(function(){
    if ($('#month').val() == 'none' || $('#year').val() == 'none') {
        $("#dialog_empty").dialog( "open" );
        return false;
    }

    var form = $('#statistic_view');  
    var data = form.serialize(); 

    $.ajax({
        url: "include/scripts/user_statistic.php",
        type: "POST",
        data: data,
        success: function (reqCode) {
            if (reqCode == 1) {
                //Show generated table
                $('.done').fadeOut('slow'); 
                $('.done').fadeIn('slow');
            }
            if (reqCode == 2) {
                //No values found
                $('.done').fadeOut('slow');
                $("#dialog_error").dialog( "open" );
            }
        }
    });
    return false;
}); 
```

这是我的html代码：

```
<div>
    <form id="statistic_view" action="include/scripts/user_statistic.php" method="post">
        <select name="month" id="month">
            <option value="none" class="bold italic">Monat</option>
            <?php 
                for($i=1; $i<=12; $i++){
                    if($i == $month)
                        echo "<option value=\"".$i."\" selected>".$month_name[$i]."</option>\n";
                    else
                        echo "<option value=\"".$i."\">".$month_name[$i]."</option>\n";
                }
            ?>
        </select>
        <select name="year" id="year">
            <option value="none" class="bold italic">Jahr</option>
            <?php 
                for($i=2012; $i<=$year; $i++){
                    if($i == $year)
                         echo "<option value=\"".$i."\" selected>".$i."</option>\n";
                    else
                        echo "<option value=\"".$i."\">".$i."</option>\n";
                }
            ?>
        </select>
        <br/><br/>
        <div id="user_statistic">
            <input type="submit" id="small" class="statistic_submit" value="Daten anzeigen">
        </div>
    </form> 
    <br />
    <div class="done">
        <p class="bold center"><?php echo "Besucher ".$month_name[$month]." ".$year; ?></p>
        <canvas id="cvs" width="680" height="250">[No canvas support]</canvas>
        <script>
            chart = new RGraph.Line('cvs', <?php print($data_string) ?>);
            chart.Set('chart.tooltips', <?php print($labels_tooltip) ?>);
            chart.Set('chart.tooltips.effect', 'expand');
            chart.Set('chart.background.grid.autofit', true);
            chart.Set('chart.gutter.left', 35);
            chart.Set('chart.gutter.right', 5);
            chart.Set('chart.hmargin', 10);
            chart.Set('chart.tickmarks', 'circle');
            chart.Set('chart.labels', <?php print($labels_string) ?>);        
            chart.Draw();
        </script>
    </div>
</div> 
```

这是我的 user_statistic.php：

```
... (mysql stuff)
    /******************************/
    /** Create diagram
    /******************************/
    $labels = array();
    $data   = array();

    for ($j=1; $j<=$days; $j++) {
        $labels[$j] =$j;
        $data[$j] = $day_value[$j];
    }

    // Aggregate all the data into one string
    $data_string = "[" . join(", ", $data) . "]";
    $labels_string = "['" . join("', '", $labels) . "']";
    $labels_tooltip =  "['" . join("', '", $data) . "']";

    //data written 
    echo "1"; 
```

所以回显“1”；告诉我的脚本一切都很好。但现在我需要 $data_string、$labels_string 和 $labels_tooltip。那么如何将这些值从 user_statistic.php 返回到我身边呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T22:03:22.067

避免自行将数组转换为字符串。如果您需要将 PHP 数组传递回 jQuery，您应该使用以下[`json_encode`](http://www.php.net/manual/en/function.json-encode.php)函数：

```
echo json_encode( $array ); 
```

这将作为一个 JSON 对象出现，然后您可以在客户端处理该对象。您的 JSON 字符串将返回到您的`$.ajax`方法的回调中：

```
$.ajax({
  url: "include/scripts/user_statistic.php",
  type: "POST",
  data: data,
  dataType: 'json',
  success: function ( response ) {
     /* response is your array, in JSON form */
  }
}); 
```

例如，如果我们的 PHP 脚本执行以下操作：

```
$response = array(
  'message' => 'Success',
  'allData' => array( 'Jonathan', 'Mariah', 'Samuel', 'Sally' )
);

echo json_encode( $response ); 
```

`message`我们可以像这样从我们的 jQuery中警告：

```
success: function ( response ) {
   alert( response.message );
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T22:07:23.053

这里最好的方法是返回一个 json 对象。在服务器端创建一个数组 -

```
$response['error_code'] = '1'; //everything ok. 0 if not ok
$response['data_string'] = 'this will have some data';
$response['labels_string'] = 'labels';
$response['labels_tooltip' = 'here goes the tooltips';
echo json_encode($response); 
```

并在您的 javascript 代码中，将返回数据类型提及为 json -

```
$.ajax({
    url: "include/scripts/user_statistic.php",
    type: "POST",
    data: data,
    dataType: json,
    success: function (reqCode) {
        if (reqCode.error_code == 1) {
            alert('this is the data string '+resCode.data_string);
            //Show generated table
            $('.done').fadeOut('slow'); 
            $('.done').fadeIn('slow');
        }
        if (reqCode.error_code == 2) {
            //No values found
            $('.done').fadeOut('slow');
            $("#dialog_error").dialog( "open" );
        }
    }
}); 
```

# spring - c3p0 连接提供程序未设置

> ID：10745910
> 
> 赞同：0
> 
> 时间：2012-05-24T22:00:34.487
> 
> 标签：spring, hibernate, jakarta-ee, c3p0

我正在使用 spring 一个 Hibernate，这里是 Hibernate.properties 问题是即使有 c3p0 设置，连接提供程序也不会更改为 c3p0ConnectionProvider。它们只是被加载，似乎什么也没做。

```
 hibernate.show_sql=true
hibernate.hbm2ddl.auto=validate
hibernate.c3p0.testConnectionOnCheckin = true
hibernate.c3p0.checkoutTimeout = 0
hibernate.c3p0.acquireIncrement=5
hibernate.c3p0.idleConnectionTestPeriod=3000
hibernate.c3p0.initialPoolSize=10
hibernate.c3p0.maxIdleTime=300
hibernate.c3p0.maxPoolSize=50
hibernate.c3p0.maxStatements=100
hibernate.c3p0.minPoolSize=5
hibernate.c3p0.testConnectionsOnCheckout=true 
```

这是堆栈跟踪。

```
 main INFO [org.springframework.web.context.ContextLoader] - Root WebApplicationContext: initialization started
    main INFO [org.springframework.web.context.support.XmlWebApplicationContext] - Refreshing org.springframework.web.context.support.XmlWebApplicationContext@70074fd2: display name [Root WebApplicationContext]; startup date [Thu May 24 15:39:51 MDT 2012]; root of context hierarchy
    main INFO [org.springframework.beans.factory.xml.XmlBeanDefinitionReader] - Loading XML bean definitions from ServletContext resource [/WEB-INF/core-data-annotation-context.xml]
    main INFO [org.springframework.beans.factory.xml.XmlBeanDefinitionReader] - Loading XML bean definitions from ServletContext resource [/WEB-INF/core-data-datasource-context.xml]
    main INFO [org.springframework.beans.factory.xml.XmlBeanDefinitionReader] - Loading XML bean definitions from class path resource [META-INF/cxf/cxf.xml]
    main INFO [org.springframework.beans.factory.xml.XmlBeanDefinitionReader] - Loading XML bean definitions from class path resource [META-INF/cxf/cxf-extension-soap.xml]
    main INFO [org.springframework.beans.factory.xml.XmlBeanDefinitionReader] - Loading XML bean definitions from class path resource [META-INF/cxf/cxf-servlet.xml]
    main INFO [org.springframework.beans.factory.xml.XmlBeanDefinitionReader] - Loading XML bean definitions from ServletContext resource [/WEB-INF/core-profile-datasource-context.xml]
    main INFO [org.springframework.web.context.support.XmlWebApplicationContext] - Bean factory for application context [org.springframework.web.context.support.XmlWebApplicationContext@70074fd2]: org.springframework.beans.factory.support.DefaultListableBeanFactory@2f41eb55
    main INFO [org.springframework.beans.factory.support.DefaultListableBeanFactory] - Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@2f41eb55: defining beans [org.springframework.beans.factory.config.PropertyPlaceholderConfigurer#0,org.springframework.context.annotation.internalPersistenceAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,pagingProviderHibernate,daoEager,dao,coreDataResourceLocator,cachingService,randomUtilService,randomWordGenerationService,placeHolderResolver,logsDbDao,subsetDbDao,profilesdbDao,resourceProfileLoaderNew,org.springframework.context.config.internalBeanConfigurerAspect,cxf,org.apache.cxf.bus.spring.BusApplicationListener,org.apache.cxf.bus.spring.BusWiringBeanFactoryPostProcessor,org.apache.cxf.bus.spring.Jsr250BeanPostProcessor,org.apache.cxf.bus.spring.BusExtensionPostProcessor,org.apache.cxf.resource.ResourceManager,org.apache.cxf.configuration.Configurer,org.apache.cxf.binding.BindingFactoryManager,org.apache.cxf.transport.DestinationFactoryManager,org.apache.cxf.transport.ConduitInitiatorManager,org.apache.cxf.wsdl.WSDLManager,org.apache.cxf.phase.PhaseManager,org.apache.cxf.workqueue.WorkQueueManager,org.apache.cxf.buslifecycle.BusLifeCycleManager,org.apache.cxf.endpoint.ServerRegistry,org.apache.cxf.endpoint.ServerLifeCycleManager,org.apache.cxf.endpoint.ClientLifeCycleManager,org.apache.cxf.transports.http.QueryHandlerRegistry,org.apache.cxf.endpoint.EndpointResolverRegistry,org.apache.cxf.headers.HeaderManager,org.apache.cxf.catalog.OASISCatalogManager,org.apache.cxf.endpoint.ServiceContractResolverRegistry,org.apache.cxf.binding.soap.SoapBindingFactory,org.apache.cxf.binding.soap.SoapTransportFactory,org.apache.cxf.binding.soap.customEditorConfigurer,org.apache.cxf.transport.servlet.ServletTransportFactory,infobutton-service,dataSource,sessionFactory,hibernateTemplate,org.springframework.aop.config.internalAutoProxyCreator,org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0,org.springframework.transaction.interceptor.TransactionInterceptor#0,org.springframework.transaction.config.internalTransactionAdvisor,transactionManager,subsetlogDao,logDao,profiledataSource,profilesessionFactory,profilehibernateTemplate,profiletransactionManager,profilesDao,pDao]; root of factory hierarchy
    main INFO [org.springframework.beans.factory.config.PropertiesFactoryBean] - Loading properties file from ServletContext resource [/WEB-INF/datasource-mysql.properties]
    main INFO [org.springframework.beans.factory.config.PropertiesFactoryBean] - Loading properties file from ServletContext resource [/WEB-INF/hibernate.properties]
    main INFO [org.springframework.beans.factory.config.PropertiesFactoryBean] - Loading properties file from ServletContext resource [/WEB-INF/datasource-mysql.properties]
    main INFO [org.hibernate.cfg.annotations.Version] - Hibernate Annotations 3.4.0.GA
    main INFO [org.hibernate.cfg.Environment] - Hibernate 3.3.1.GA
    main INFO [org.hibernate.cfg.Environment] - loaded properties from resource hibernate.properties: {hibernate.c3p0.maxStatements=100, hibernate.c3p0.maxIdleTime=300, hibernate.c3p0.idleConnectionTestPeriod=3000, hibernate.c3p0.testConnectionOnCheckin=true, hibernate.c3p0.acquireIncrement=5, hibernate.c3p0.initialPoolSize=10, hibernate.c3p0.maxPoolSize=50, hibernate.c3p0.minPoolSize=5, hibernate.hbm2ddl.auto=validate, hibernate.c3p0.testConnectionsOnCheckout=true, hibernate.bytecode.use_reflection_optimizer=false, hibernate.show_sql=true, hibernate.c3p0.checkoutTimeout=0}
    main INFO [org.hibernate.cfg.Environment] - Bytecode provider name : javassist
    main INFO [org.hibernate.cfg.Environment] - using JDK 1.4 java.sql.Timestamp handling
    main INFO [org.hibernate.cfg.AnnotationBinder] - Binding entity from annotated class: com.asd.subsetdb.domain.Logs
    main INFO [org.hibernate.cfg.annotations.EntityBinder] - Bind entity com.asd.subsetdb.domain.Logs on table logs
    main INFO [org.hibernate.validator.Version] - Hibernate Validator 3.1.0.GA
    main INFO [org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean] - Building new Hibernate SessionFactory
    main INFO [org.hibernate.search.Version] - Hibernate Search 3.4.2.Final 
```

> **主要信息 [org.hibernate.connection.ConnectionProviderFactory] ​​- 初始化连接提供者：org.springframework.orm.hibernate3.LocalDataSourceConnectionProvider**

```
 main INFO [org.hibernate.cfg.SettingsFactory] - RDBMS: MySQL, version: 5.0.77
    main INFO [org.hibernate.cfg.SettingsFactory] - JDBC driver: MySQL-AB JDBC Driver, version: mysql-connector-java-5.1.17 ( Revision: ${bzr.revision-id} )
    main INFO [org.hibernate.dialect.Dialect] - Using dialect: org.hibernate.dialect.MySQL5Dialect
    main INFO [org.hibernate.transaction.TransactionFactoryFactory] - Transaction strategy: org.springframework.orm.hibernate3.SpringTransactionFactory
    main INFO [org.hibernate.transaction.TransactionManagerLookupFactory] - No TransactionManagerLookup configured (in JTA environment, use of read-write or transactional second-level cache is not recommended)
    main INFO [org.hibernate.cfg.SettingsFactory] - Automatic flush during beforeCompletion(): disabled
    main INFO [org.hibernate.cfg.SettingsFactory] - Automatic session close at end of transaction: disabled
    main INFO [org.hibernate.cfg.SettingsFactory] - JDBC batch size: 15
    main INFO [org.hibernate.cfg.SettingsFactory] - JDBC batch updates for versioned data: disabled
    main INFO [org.hibernate.cfg.SettingsFactory] - Scrollable result sets: enabled
    main INFO [org.hibernate.cfg.SettingsFactory] - JDBC3 getGeneratedKeys(): enabled
    main INFO [org.hibernate.cfg.SettingsFactory] - Connection release mode: auto
    main INFO [org.hibernate.cfg.SettingsFactory] - Maximum outer join fetch depth: 2
    main INFO [org.hibernate.cfg.SettingsFactory] - Default batch fetch size: 1
    main INFO [org.hibernate.cfg.SettingsFactory] - Generate SQL with comments: disabled
    main INFO [org.hibernate.cfg.SettingsFactory] - Order SQL updates by primary key: disabled
    main INFO [org.hibernate.cfg.SettingsFactory] - Order SQL inserts for batching: disabled
    main INFO [org.hibernate.cfg.SettingsFactory] - Query translator: org.hibernate.hql.ast.ASTQueryTranslatorFactory
    main INFO [org.hibernate.hql.ast.ASTQueryTranslatorFactory] - Using ASTQueryTranslatorFactory
    main INFO [org.hibernate.cfg.SettingsFactory] - Query language substitutions: {}
    main INFO [org.hibernate.cfg.SettingsFactory] - JPA-QL strict compliance: disabled
    main INFO [org.hibernate.cfg.SettingsFactory] - Second-level cache: enabled
    main INFO [org.hibernate.cfg.SettingsFactory] - Query cache: disabled
    main INFO [org.hibernate.cfg.SettingsFactory] - Cache region factory : org.hibernate.cache.impl.NoCachingRegionFactory
    main INFO [org.hibernate.cfg.SettingsFactory] - Optimize cache for minimal puts: disabled
    main INFO [org.hibernate.cfg.SettingsFactory] - Structured second-level cache entries: disabled
    main INFO [org.hibernate.cfg.SettingsFactory] - Echoing all SQL to stdout
    main INFO [org.hibernate.cfg.SettingsFactory] - Statistics: disabled
    main INFO [org.hibernate.cfg.SettingsFactory] - Deleted entity synthetic identifier rollback: disabled
    main INFO [org.hibernate.cfg.SettingsFactory] - Default entity-mode: pojo
    main INFO [org.hibernate.cfg.SettingsFactory] - Named query checking : enabled
    main INFO [org.hibernate.impl.SessionFactoryImpl] - building session factory
    main INFO [org.hibernate.impl.SessionFactoryObjectFactory] - Not binding factory to JNDI, no JNDI name configured
    main INFO [org.hibernate.tool.hbm2ddl.SchemaValidator] - Running schema validator
    main INFO [org.apache.jcs.engine.control.CompositeCacheConfigurator] - setting defaultElementAttributes to [ IS_LATERAL = true, IS_SPOOL = true, IS_REMOTE = true, IS_ETERNAL = false, MaxLifeSeconds = 7200, IdleTime = 1800, CreateTime = 1337895600422, LastAccessTime = 1337895600422, getTimeToLiveSeconds() = 7199, createTime = 1337895600422 ] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T08:16:25.007

通过将此添加到 context/persistence.xml 进行修复

```
<bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource"> 
  <property name="driverClass"><value>com.mysql.jdbc.Driver</value></property> 
  <property name="jdbcUrl"><value>jdbc:mysql://localhost XXX</value>    

 </property> 
  <property name="user"><value>zzz</value></property> 
  <property name="password"><value>xxx</value></property> 
</bean> 
```

我仍然不确定为什么没有**com.mchange.v2.c3p0.ComboPooledDataSource**就无法工作。

# android - 如何在android上调试纯本机代码？

> ID：10745911
> 
> 赞同：6
> 
> 时间：2012-05-24T22:00:43.113
> 
> 标签：android, debugging, native-code

我已经从纯 C++ 代码构建了一个二进制可执行文件，它在 android 设备上运行时会提示时间错误。

如何调试 android 的纯原生代码？似乎现有的方法不适用于纯本机代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-26T02:38:30.030

**第 1 步：**将*gdbserver* 和***未剥离*** *的本机二进制可执行文件*（假设它名为 testexec）放在 android 模拟器上。例如，您可以将它放在文件夹/data/data/test 下。并使用**chmod**命令为它们添加权限。

**Step2：** 启动gdb调试器。此步骤包括以下子步骤：

**步骤 2.1：**通过在主机终端上键入命令来启动模拟器的 gdb 调试器：

```
 adb shell /data/data/test/gdbserver 10.0.2.2:1234 /data/data/test/testexec 
```

然后模拟器将侦听端口 1234。

**Step 2.2** : 将本地机器的 gdb 调试器与模拟器的 gdbserver 连接起来：

```
telnet localhost 5554 
```

会提示：

**Android 控制台：键入“帮助”以获取命令列表**

**好的**

然后输入：

```
redir add tcp:1234:1234 
```

启用数据重定向，然后键入

```
exit 
```

**Step2.3**：启动本地机器的gdb调试器。输入：

```
arm-linux-androideabi-gdb.exe YOUR_ EXECUTABLE_PATH_ON_LOCAL_MACHINE\testexec 
```

之后，输入

```
target remote localhost:1234 
```

连接到 gdbserver。

最后，享受你的调试吧！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-24T23:21:03.400

Android 支持使用[GDB](http://mhandroid.wordpress.com/2011/01/25/how-cc-debugging-works-on-android/)。但是，我应该注意，如果您所说的“纯 C++”是指应用程序中根本没有 Java，这在技术上是不允许的（尽管您绝对可以这样做）。请参阅[NDK 页面。](http://developer.android.com/sdk/ndk/index.html)

# jquery - how to make jquery print the character from an ascii &###?

> ID：10745917
> 
> 赞同：1
> 
> 时间：2012-05-24T22:01:13.273
> 
> 标签：jquery, html

I have a problem printing some text... i am making an append to some array, but the array contents chracter in this way &###; like & aacute; but I get the code at my web instead the á ... any idea how to solve it?

its a select tag, so I need to append the options, and i tried with append().html and with append only but no results.

Thanks

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T22:17:36.937

从 ASCII 值中获取字符

```
String.fromCharCode(<ascii_code>) 
```

将字符转换为 ASCII 码

```
"<your_string>".charCodeAt(<0_based_position_of_character_in_string>) 
```

**参考：**

*   [String.fromCharCode()](http://www.w3schools.com/jsref/jsref_fromCharCode.asp)
*   [charCodeAt()](http://www.w3schools.com/jsref/jsref_charCodeAt.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T22:58:25.797

您的问题并不完全清楚，但我认为您的意思是您有一个 JavaScript 数组，其中包含您想要读取的字符的 html 编码并在 DOM 中呈现为文本。

[当从输入字段读取用于 html 编码/解码的属性时，HTML 编码](https://stackoverflow.com/questions/1219860/javascript-jquery-html-encoding)中出现了许多技术丢失，尽管不必手动进行解码。

如果没有参数，jquery .html() 方法是一个 getter，它返回匹配选择器的第一个元素的内部 html。但是，听起来您想要做的是设置该元素的 html（编码字符必须添加为 html 而不是文本才能正确显示）。您可以直接设置 html，也可以解码字符（使用该帖子中的方法）并设置文本（第一个似乎更简单）。你会这样做：

```
$(element).html("... &aacute; ..."); 
```

如果您想将数组中的每个字符附加到同一个元素，您可以使用 append 方法，因为它需要一个 html 字符串作为其参数。

```
var x = $(element);
$.each(charArray, function(index,value) {
    x.append(value);
}); 
```

或者您可以简单地通过连接数组的内容来创建一个字符串，然后只调用一次 append ，将该字符串作为其参数。

我希望我理解你的问题。如您所知，jQuery append 方法与数组无关，并且在 append 之后调用 .html() 只会返回元素的新内部 html（它不会改变任何内容）。

# xcode - Navgation Controller and UIImageView in a custom cell in UITableView

> ID：10745921
> 
> 赞同：0
> 
> 时间：2012-05-24T22:01:51.650
> 
> 标签：xcode, uitableview, uinavigationcontroller, uiimageview

In my app's navigation controller is an UITableViewContoller then a ViewController. The user selects an item in the UITableViewContollrer, this calls the ViewController. If the user hits the back button I need to visually show which item was selected before. Doing this with a UIImage, basically want to hide or show it. Problem is I cannot find a method that will parse each cell in the UITableView and determine if the the cell was selected before when the UITable is called again.

Some background on the UITableView, it is based on an entity in core data. The selected item is stored in a different entity in core data.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T08:51:08.727

首先声明 NSIndexPath *selectedIndexPath 并创建它的属性。现在在 tableView 委托中：

```
- (void)selectRowAtIndexPath:(NSIndexPath *)indexPath animated:(BOOL)animated scrollPosition:(UITableViewScrollPosition)scrollPosition
{
    selectedIndexPath = indexPath;
} 
```

您已在 tableView 中选择了单元格的 IndexPath。当点击导航栏的返回按钮时，将调用 ViewControllers viewWillApper

```
- (void)viewWillAppear:(BOOL)animated
{
  [super viewWillAppear:animated];
  if(selectedIndexPath)
  {
   //if you have custom cell then you will get custom cell which was selected just use custom cell object in place of UITableViewCell

   UITableViewCell *cell = (UITableViewCell*)[YourtableView cellForRowAtIndexPath:selectedIndexPath];

   //You have cell reference which was selected when one view controller was pushed in navigation controller.
   // you can change image or label text which are present in your cell
   // cell.ImageView or cell.labelText anything
  }
} 
```

希望它是有用的。

# macos - How to resync development projects to github after git uninstalled / re-installed from OS X?

> ID：10745923
> 
> 赞同：1
> 
> 时间：2012-05-24T22:02:01.917
> 
> 标签：macos, git, github

I believe git, somehow, was uninstalled during an update of OS X. I have reinstalled git and I want to re-sync my local development folders to the appropriate github repos but am not sure how.

I have since created a new repo so my github account is linked properly, but I don't know how to link the existing stuff.

For example, say one project is located at:

/users/stephen/development/cs

and it's corresponding github SSH location is at:

git@github.com:stephen/cs.git

How do I get these synced back up?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T01:34:09.803

When you say that "git was somehow uninstalled", I assume you mean you cannot use the command `git` and you get `-bash: git: command not found` error. So the following should help.

### Is `git` installed?

The first thing to do is type `which git` and that will tell you if its included in your path. If nothing is prints, then you know thats your first problem:

1.  It's not installed, or
2.  It is installed, but not included in your `$PATH`.

The solution to these problems, obviously, is [install it](http://git-scm.com/book/en/Getting-Started-Installing-Git) or find it on your system. Typically on Mac OSX, it is found in `/usr/bin/git`. Add it to your `$PATH` like so:

```
export PATH=/usr/bin/:$PATH 
```

in your `.bashrc` or `.bash_profile` (substitute `/user/bin` with the directory where you find `git`. )

### Does the `git` repository still exists?

Now, check that the is repo didn't get destroyed. Most likely, it did not.

```
$ cd project/
$ ls -la
drwxr-xr-x  3 user  staff  102 May 24 18:31 .
drwxr-xr-x  6 user  staff  204 May 24 18:31 ..
drwxr-xr-x  9 user  staff  306 May 24 18:31 .git
-rw-r--r--  1 user  staff  119 May 24 18:34 README.md 
```

The presence of the `.git` directory means it still exists, therefore finding/installing `git` is your only problem. As soon as you fix that problem, you should be able to use `git` exactly how you used to.

However, if the `.git` file is gone (highly unlikely), there are several things you can do.

1.  If you know your directory was in a clean state (all committed changes) and pushed to github before your loss, you can just delete the directory on your local machine and pull in a new fresh copy of the repo (easiest).
2.  If you know your repo was clean, but NOT pushed to github OR you had a dirty directory (with changes not committed), you are in a bad spot. However, it is not impossible to regain your repo to its original state. Without knowing your repo directory structure, I can't go into too much detail. But the following should work for most cases:
    1.  Initialize a new repo in the project directory.
    2.  Add all files and commit.
    3.  Add the remote repository
    4.  Pull down the repo to merge them together.
    5.  Resolve conflicts.

Good luck :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T22:08:00.757

我认为即使 git 被卸载，repo 也不会失去它的身份。你`git status`在那个 repo 上尝试过命令吗？它说什么？此外，我会`git init`在备份后尝试添加遥控器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T22:31:11.237

Git 存储库只是文件的集合，独立于 Git 工具本身。卸载 Git 不会删除存储库，因此您的旧来源可能仍然存在。

```
cd /users/stephen/development/cs
git remote -v 
```

如果您看到旧的原点，请将其指向新位置：

```
git remote set-url origin git@github.com:stephen/cs.git
git fetch origin 
```

如果您没有看到您的旧来源，请添加它...

```
git remote add -f origin git@github.com:stephen/cs.git 
```

...并为现有的本地分支机构设置跟踪器：

```
git branch --set-upstream master origin/master
git branch --set-upstream another-local-branch origin/a-remote-branch-to-be-tracked
etc. 
```

# java - 从属性文件中获取常量？

> ID：10745928
> 
> 赞同：4
> 
> 时间：2012-05-24T22:03:05.177
> 
> 标签：java, properties, constants

是否可以从 java 属性文件中获取常量？我正在尝试开发我的应用程序，以便我可以在主属性文件中设置一个标志，指示应用程序是使用开发配置文件还是生产配置文件。

大多数应用程序工作正常，但我在实体类中的数据库表映射遇到了一些障碍。我正在使用 Dynamo DB，因此实际类本身需要如下注释：

```
@DynamoDBTable(tableName = "table_name")
public class EmailTemplates {
... 
```

tableName 值必须是一个常量，我正在尝试使用以下内容从属性文件中检索值并将其传递给 tableName；

```
@DynamoDBTable(tableName = DynamoTable.TABLE_NAME)
public class EmailTemplates {
... 
```

DynamoTable 类：

```
public final class DynamoTable {

    public static final String TABLE_NAME = ResourceBundle.getBundle(ResourceBundle.getBundle("ProjectStage").getString("ProjectStage")).getString("EmailTemplates");

} 
```

不幸的是，它不能像它所说的那样工作，价值不是一个常数。如果我只是简单地放置一个文字字符串（即“aStringValue”），那么它很好，但不是来自属性文件。

注意。需要明确的是，上述代码从属性文件中检索值没有问题。问题是它没有被视为常数。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-24T22:16:10.563

你不能做你想做的事。

您要求 javac 编译器*执行*任意代码以从磁盘读取属性文件，提取一个值，并将其作为常量插入到您的代码中（在*编译时*）。

如您所见，编译器要做的事情有点多。

您只能在*运行时*执行该代码，这不适合您的情况，因为您正在尝试为注释分配值（因此注释的值必须在*编译时*可用）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T14:07:37.597

如果您使用 DynamoDBMapper 类进行数据库交互，则可以选择为加载、保存、删除、查询和扫描提供额外的 DynamoDBMapperConfig 参数。

您可以在运行时构建此配置，然后将其传递给 dynamoDB 操作。

```
private DynamoDBMapperConfig getEnvironmentConfig(DymanoTable tableEntity, String environment)
{
    DynamoDBTable annotation = (DynamoDBTable) tableEntity.getClass().getAnnotation(DynamoDBTable.class);
    DynamoDBMapperConfig.TableNameOverride tableNameOverride = new DynamoDBMapperConfig.TableNameOverride(environment + annotation.tableName());
    return new DynamoDBMapperConfig(tableNameOverride);
} 
```

您将需要创建一个 DynamoDBMapper...

```
AWSCredentials credentials = new PropertiesCredentials(
                ObjectPersistenceQueryScanExample.class.getResourceAsStream("AwsCredentials.properties"));

        client = new AmazonDynamoDBClient(credentials);
        DynamoDBMapper mapper = new DynamoDBMapper(client); 
```

并将其用于您的 dynamoDB 交互

```
public void save(DynamoTable entity)
{
    mapper.save(entity, getEnvironmentConfig(entity,"dev"));
} 
```

# java - 插入和删除值的最佳 DS？

> ID：10745929
> 
> 赞同：0
> 
> 时间：2012-05-24T22:03:13.423
> 
> 标签：java, data-structures, arraylist

我有一个场景，我有一个作为服务器侦听器的类。当我收到通知时，我会不断将一串值添加到`ArrayList`. 我现在有从 this 中读取的线程`ArrayList`。

这`ArrayList`有可能变得非常大。我正在考虑生成一个线程，每 10 分钟检查一次是否已达到最大大小并删除添加的几行。

我想知道实现这一目标的最佳方法是什么？

我应该使用另一个 DS 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T22:11:30.103

您可能要考虑使用[`LinkedList`](http://docs.oracle.com/javase/7/docs/api/java/util/LinkedList.html).

```
 ArrayList    LinkedList
add                O(1)*         O(1)
remove             O(n)          O(n)
Iterator.remove    O(n)          O(1)
insert             O(n)          O(1)
get                O(1)          O(n) 
```

*`ArrayList.add`如果需要调整数组大小，则在 O(n) 最坏情况下运行。

# python - 与其他语言相比，Python 套接字 I/O 性能

> ID：10745931
> 
> 赞同：2
> 
> 时间：2012-05-24T22:03:25.673
> 
> 标签：python, performance, sockets, programming-languages, io

我正在编写一个 python 程序，在 Windows 上工作，该程序具有繁重的线程和 I/O，它在其 I/O 中大量使用套接字来发送和接收来自远程位置的数据，除此之外，它还有一些字符串操作使用正则表达式。

我的问题是：在性能方面，与 Java 或 C# 相比，python 是此类程序的最佳编程语言吗？是否有另一种更适合上述描述的语言？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T22:10:29.663

有趣的问题。处理套接字的 python 模块直接包装了底层的操作系统功能。因此，在给定的操作中，您不可能看到任何速度差异，具体取决于包装语言。

如果您参与了**非常紧密**的循环，例如查看流中的每个字符，您会注意到 python 的速度问题。

您没有指明要发送多少数据。除非您正在采用必须维护大量 I/O 的解决方案，否则 python 可能会做得很好。在 python 中实现 nginx 或 memcached 或 redis ......不是一个好主意。

和往常一样……基准。如果它足够快，那为什么要改变？

PS。您的程序员可能会在 python 中更快地完成它！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T15:27:57.173

您的要求是：

1.  在窗户上工作；
2.  该程序具有繁重的线程和 I/O
3.  它在其 I/O 中大量使用套接字来发送和接收数据
4.  它使用正则表达式进行了一些字符串操作。

很难确定哪种语言*最*适合此任务的原因是几乎所有语言都符合您的要求。

1.  Windows：所有语言的笔记
2.  大量使用线程：C#、Java、C、C++、Haskell、Scala、Clojure、Erlang。基于处理的线程或其他变通方法：Ruby、Python 和其他没有真正细粒度并发的解释型语言。
3.  套接字：所有注释语言
4.  正则表达式：所有需要注意的语言

最有趣的约束是需要做大量的并发 IO。这意味着您的瓶颈将在于上下文切换、线程成本以及是否可以在多个内核上运行线程池。根据您的缩放比例，您可能希望使用一种编译语言，以及一种具有轻量级线程的语言，可以轻松使用多个内核。这将列表缩减为 C++、Haskell、Erlang、Java、Scala。等等。您可能可以通过使用分叉进程来解决 Python 中的全局解释器锁，但它不会那么细粒度。

# c# - mvc cannot call view from controller

> ID：10745932
> 
> 赞同：0
> 
> 时间：2012-05-24T22:03:29.990
> 
> 标签：c#, asp.net-mvc

I am trying to get started learning MVC. I built the MVC Music Store project that I found on the Microsoft site. [http://www.asp.net/mvc/tutorials/mvc-music-store/mvc-music-store-part-1](http://www.asp.net/mvc/tutorials/mvc-music-store/mvc-music-store-part-1).

I got it working pretty well but I ran into trouble when I tried to modified it. I want to put the data in a separate project. I used Linq to Entities for the data access.

Here is my class to access the data

```
public class clsUtilities
{
    Utilities.MVCMusicStoreEntities db = new Utilities.MVCMusicStoreEntities();

    public object GetAlbums(string GenreName)
    {
        var query = from tags in db.vieAlbumArtists
                    where tags.GenreName.Equals(GenreName)
                    select tags;

        return query;
    }
} 
```

In my Controller my code is

```
public ActionResult Browse2(string genre)
{
    // retrieve Genre and its associated albums from the database

    var genreModel = mcloUtilities.GetAlbums(genre);

    return View(genreModel);
} 
```

I generate a cshtml file in my view

```
@model Utilities.vieAlbumArtist

@{
    ViewBag.Title = "Browse2";
} 
```

This all compiles ok but when I run it I get:

The model item passed into the dictionary is of type `System.Data.Objects.ObjectQuery'1[Utilities.vieAlbumArtist]`, but this dictionary requires a model item of type `Utilities.vieAlbumArtist`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T22:09:34.467

改变

`@model Utilities.vieAlbumArtist`

至

`@model IEnumerable<Utilities.vieAlbumArtist>`

您正在返回一个*列表*，`vieAlbumArtist`而不仅仅是一个实例。

你可能还想改变

`public object GetAlbums(string GenreName)`

至

`public IEnumerable<Utilities.vieAlbumArtist> GetAlbums(string GenreName)`

绕过`objects`不是最好的主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T22:09:16.437

这是你的问题：

```
public object GetAlbums(string GenreName) 
```

您将数据作为对象返回。但是视图期望接收一个类型的项目`Utilities.vieAlbumArtist`。要么更改`GetAlbums()`方法以返回适当的类型，要么确保在控制器中将其转换为视图期望的类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T19:33:00.237

在你们给我的提示的帮助下，我能够解决这个问题。

来自 clsUtilies

```
 public class clsUtilities
    {
        Utilities.MVCMusicStoreEntities db = new Utilities.MVCMusicStoreEntities();

        public IEnumerable<Utilities.vieAlbumArtist> GetAlbums(string GenreName)
        {

        IEnumerable<vieAlbumArtist> query = from tags in db.vieAlbumArtists
                    where tags.GenreName.Equals(GenreName)

                    select tags;

            foreach (var n in query)
            {

            }

        return query;

        } 
```

从控制器

```
 public ActionResult Browse2(string genre)
        {
            // retrieve Genre and its associated albums from the database

            var genreModel = mcloUtilities.GetAlbums(genre);

            return View(genreModel );
        } 
```

从意见

```
@model IEnumerable< Utilities.vieAlbumArtist> 

@{
    ViewBag.Title = "Browse Albums";
}

@foreach(var album in Model) 
{ 
   <ul>  
       <a href="@Url.Action("Details", new { id=album.AlbumId})">
       <img alt="@album.Title" src="@album.AlbumArtUrl" />
       <span>@album.Title (   @album.Name ) </span> </a>
       </ul>
} 

} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-24T22:10:20.600

要显示专辑列表，请尝试以下操作：

```
<ul>
@foreach(var item in vieAlbumArtist)
{
   <li>item.Name</li> //Not sure if you actually have a name property
}
</ul> 
```

# android - 使用 Ant/Ivy 构建 Android 项目

> ID：10745933
> 
> 赞同：5
> 
> 时间：2012-05-24T22:03:39.927
> 
> 标签：android, eclipse, ant, ivy

我目前正在开发一个不断增长的 Android 项目。为了将“Jar Hell”冻结在它的轨道上，我正在尝试使用 Ant 设置 Ivy 来管理依赖项。我已经构建了一个 ivy.xml 文件，该文件在调用时成功检索了它的所有依赖项。完成此操作后，我安装了 Eclipse IvyDE 插件，以便在我当前的项目中使用 ivy.xml。所有依赖项都显示在 Eclipse 中，当我转到构建路径时，它们就在那里。当我单击“作为 android 应用程序运行”时，一切都会构建。当应用程序加载（在模拟器或实际手机中）时，它会在启动时立即崩溃。据我所知，我的应用程序没有编译依赖项。Eclipse 本身似乎知道依赖关系，因为它不会产生任何错误消息。

所以......谁能指出我解决这个问题的正确方向？我对 Ivy 或 IvyDE 插件有什么误解吗？谢谢！

我也看过这个问题[Add Ivy managed dependencies to Android build path](https://stackoverflow.com/questions/8524116/add-ivy-managed-dependencies-to-android-build-path)提问者似乎遇到了同样的问题。我正在使用所有相关工具的最新版本。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-29T21:37:53.143

尽管没有人对此做出回应，但我想我会回答它以向任何其他迷路的谷歌员工展示我所做的事情。原来我的问题与我设置 ivysettings.xml 的方式有关。我误解了检索模式的工作方式。幸运的是，我在 GitHub 上找到了这个项目，它演示了如何在 Android 项目中使用 Ivy。这个示例项目为我的工作奠定了坚实的基础，我希望它也可以帮助你。

[https://github.com/h8/IvyAndroidExample](https://github.com/h8/IvyAndroidExample)

# visual-c++ - Working with vector values in C++ CLI

> ID：10745938
> 
> 赞同：1
> 
> 时间：2012-05-24T22:04:06.103
> 
> 标签：visual-c++, vector, c++-cli

Here is my header file in Visual C++ Express 2010 (note the last line):

```
/* custom class header to communicate with LynxMotion robot arm */

using namespace System;
using namespace System::IO::Ports;

public ref class LynxRobotArm
{
public:
    LynxRobotArm();
    ~LynxRobotArm();
    void connectToSerialPort(String^ portName, int baudRate);
    void disconnectFromSerialPort();
    void setCurrentPosition(int channel, int position);
    int getCurrentPosition(int channel);
    void moveToPosition(int channel, int position);

private:
    void initConnection();
    SerialPort^ serialPort;
    array<String^> ^serialPortNames;
    String^ portName;
    int baudRate;
    std::vector<int> *currentPosition;
}; 
```

I try to assign a value to the vector by using this function;

```
void LynxRobotArm::setCurrentPosition(int channel, int position)
{
    currentPosition[channel] = position;
} 
```

The compiler gives me an error C2679: `binary '=' : no operator found which takes a right-hand operand of type 'int' (or there is no acceptable conversion)`

I looked up at [MSDN](http://msdn.microsoft.com/en-us/library/h1925w4w%28v=vs.71%29.aspx) and they say:

> To use the operator, you must overload it for the specified type or define a conversion to a type for which the operator is defined.

I tried using `currentPosition.at(channel) = position` but it did not make a difference.

I am stuck... quite new to pointers, noted that using `std::vector<int> currentPosition;` instead of `std::vector<int> *currentPosition;` does not compile.

How should my set-function work? (will try getter afterwards..)

# ruby-on-rails-3 - 将变量传递到 rails 部分

> ID：10745940
> 
> 赞同：0
> 
> 时间：2012-05-24T22:04:09.607
> 
> 标签：ruby-on-rails-3

所以基本上在我的部分我有以下代码行

```
...
<%= " active" if current_user."#{prop_row}" == "repeat-x" %>
... 
```

所以我尝试使用以下变量“prop_id”，“prop_row”传递：

```
<%= render :partial => "users/image_props/repeat", :prop_id => "mbr", :prop_row => "main_background_repeat" %> 
```

我得到错误

```
/Users/codyjames408/rails/moz/app/views/users/image_props/_repeat.html.erb:4: syntax error, unexpected tSTRING_BEG
...= ( " active" if current_user."#{prop_row}" == "repeat-x" );...
...     

                      ^ 
```

我认为错误是因为它附加了一个字符串而不是行方法。但我正在拉扯我的头发，试图弄清楚如何解决这个问题。

我很想把它变成一个大帮手方法什么的！我只是不知道怎么...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T22:08:05.500

如果 prop_row 是一个字符串，包含一个属性的名称，你可以这样做：

```
<%= " active" if current_user.attributes[prop_row] == "repeat-x" %> 
```

或者使用这个：

```
<%= " active" if current_user.send(prop_row.to_sym) == "repeat-x" %> 
```

# android - 在 Android 上使用 GL_OES_get_program_binary（编译着色器）

> ID：10745944
> 
> 赞同：1
> 
> 时间：2012-05-24T22:04:36.993
> 
> 标签：android, opengl-es, shader

我希望使用 Android SDK（非本机）在 Android 上使用 GL_OES_get_program。

[http://www.khronos.org/registry/gles/extensions/OES/OES_get_program_binary.txt](http://www.khronos.org/registry/gles/extensions/OES/OES_get_program_binary.txt)

Android SDK 允许以二进制格式上传着色器，但如何从 Java 驱动程序中获取二进制文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T22:31:54.833

检索程序二进制文件的想法是，在提供带有着色器源代码的 OpenGL(-ES) 实现后，您会收到已编译的二进制文件以缓存它。如果驱动程序或操作系统版本发生变化，可能需要重新编译源代码。因此，着色器二进制程序接口并非仅用于传送着色器二进制文件。

您可以通过调用来检索着色器二进制文件`glGetProgramBinaryOES`。Franky，我不太了解您的问题，因为您链接的规范文本末尾有示例代码。

# javascript - 通过 Bookmarklet 发送整个 DOM

> ID：10745948
> 
> 赞同：1
> 
> 时间：2012-05-24T22:04:55.450
> 
> 标签：javascript, ajax, bookmarklet

我有一个保存 URL 的网站，我想处理和保存整个 DOM（以防网站出现故障——我仍然可以访问内容）。

我的 javascript 书签的当前版本（仅保存 URL 和页面标题）已将一系列 GET 变量提交到 PHP 页面。但是，这不适用于整个 DOM，因为存在 URL 限制限制（通常看起来约为 15,000 个字符）。

我认为使用 POST 可以让我发送更多信息，但我相信浏览器会因为 XSS（跨站点脚本）问题而停止它。

有没有办法从 javascript 小书签发送大量数据（15,000char+）？

我很高兴澄清！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T22:25:23.083

创建一个表单（在 iframe 中）-> 设置其值-> 提交-> 删除 iframe。

iframe 的原因是当您提交表单时页面不会导航。

不会有任何权限问题。

# android - dependency problems installing ADT with Helios

> ID：10745949
> 
> 赞同：0
> 
> 时间：2012-05-24T22:04:55.743
> 
> 标签：android, eclipse-plugin

nooby I'm afraid.

Windows7 32bit Java 1.7.0_04 Eclipse Java EE IDE for Web Developers. Version: Helios Release Build id: 20100617-1415 android-sdk_r18 ADT 18.0.0

Followed instructions on Android site to install the above. Problem occurred during the downloading the ADT plugin stage. Reported a list of dependency problems. I have the error log available if it helps.

In a fit of hopefulness, tried going on to the next phase but Android not listed in the Preferences dialog.

Any help appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T08:23:12.493

我认为您应该附加错误消息的重要部分。一般的答案是安装依赖项并重试。

# ios - Error after calling endTurnWithNextParticipant on a GKTurnBasedMatch in iOS using game center

> ID：10745950
> 
> 赞同：3
> 
> 时间：2012-05-24T22:04:59.663
> 
> 标签：ios

I corrected the leaderboard id in the new update of my iOS turn based game and now I'm getting this, has anyone seen this before? This is right after submitting my turn data by calling endTurnWithNextParticipant.

It seems the server also can't match players against each other anymore but invites work fine. Everything works fine in the simulator but not on the device.

Even with the error the data gets submitted and the other player sees it and can play the entire game to the end but this error gets logged with every turn:

Error Domain=GKErrorDomain Code=3 "The requested operation could not be completed due to an error communicating with the server." UserInfo=0xee64400 {NSUnderlyingError=0xee51590 "The operation couldn‚Äôt be completed. status = 5001, Missing versions for adamId: 123456789 from bundleVersion: 1.4 adamId: 123456789 game: Tic Tac Toe Unlimited Free compatGames:null", NSLocalizedDescription=The requested operation could not be completed due to an error communicating with the server.}

Any ideas? Thanks

# asp.net - ASP.NET -> How to POST data to the form such that images are displayed

> ID：10745952
> 
> 赞同：0
> 
> 时间：2012-05-24T22:05:01.103
> 
> 标签：asp.net, jquery, post, http-get, imageurl

Scenario : ASP.NET site has a page named ShowDesign.aspx.

ASPX page has lot of controls. I have a DIV tag and I load the images in code behind. DIV is defined something like below in the ASPX.

```
<div id="pImageHolder" runat="server"></div> 
```

Below is the code behind that loads images.

```
 protected override void OnInit(EventArgs e)
{
    base.OnInit(e);
    //Loop inside PreviewImages which has lots of images.
    foreach (String imgFile in this.PreviewImages)
    {
        Image pImage = new Image();

        pImage.ImageUrl =  imgFile; //URL length is longer. Do something.

        this.pImageHolder.Controls.Add(pImage);
    }
} 
```

**Update : Jun 1,2012 ->** I have updated this question with more clarity as to what I am trying to do.

In OnInit(), I get the URL of the image (in the above loop). Every image will have unique URL.

Since the URL length of every image is longer, it doesn't display. The solution to this issue seems to be POSTING data to the form. The data that needs to be POSTED will be the URL contents.

The URL contains lot of '&' and I need to submit the contents of each '&' to the form. Don't know if I need to use AJAX or Jquery here.

I need some help here to achieve the above.

Hope my question is clear. If not, please let me know.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T23:03:56.933

根据最新评论，这个问题历史和最后你想将数据发布到另一个 url 并获得响应 html。试试这个（我从上一个问题中剪掉了你的原始网址，因为它真的很大）：

```
 string strangeUrl = "http://example.com/is/m//company1/Rec-Sc-105-QL2?setAttr.safe={visible=false}&setAttr.insertedTextPlaceholder={visible=false}";
  string data = strangeUrl.Substring(strangeUrl.IndexOf("?") + 1);

  WebClient wc = new WebClient();
  wc.Headers[HttpRequestHeader.ContentType] = "application/x-www-form-urlencoded";
  string result = wc.UploadString("www.example.com/addres-for-post.aspx", data); 
```

# android - MainActivty 启动时未显示警报对话框

> ID：10745954
> 
> 赞同：1
> 
> 时间：2012-05-24T22:05:23.723
> 
> 标签：android, eclipse, button, dialog

当我运行我的应用程序时，对话框没有弹出，我错过了什么吗？

这是我的代码：

```
AlertDialog.Builder builder = new AlertDialog.Builder(this);
builder.setMessage("This is a test!")
   .setCancelable(false)
   .setPositiveButton("I Agree", new DialogInterface.OnClickListener() {
       public void onClick(DialogInterface dialog, int id) {
            MainScreen.this.finish();
       }
   })
   .setNegativeButton("I Disagree", new DialogInterface.OnClickListener() {
       public void onClick(DialogInterface dialog, int id) {
            dialog.cancel();
       }
   })
   //Set your icon here
   .setTitle("Alert!")
   .setIcon(R.drawable.ic_launcher);
AlertDialog alert = builder.create(); 
```

感谢所有帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T22:12:29.493

您应该`alert.show()`在代码末尾调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T22:23:09.863

好的，我发现我必须输入 alert.show(); 在我的代码末尾。

# git - git在压缩对象时冻结

> ID：10745957
> 
> 赞同：3
> 
> 时间：2012-05-24T22:05:36.727
> 
> 标签：git, github, git-push, git-commit

嗨，我正在使用 Github 将一些文件从本地服务器推送到我的 Github 存储库。我不小心在提交中包含了一个 500Mb 的视频文件，我认为这完全搞砸了`add/commit/push`.

具体来说，我的命令停在`push`这样的地方：

```
git push -u myGithubRepository master
Counting objects: 52, done.
Delta compression using up to 4 threads.
Compressing objects:  97% (36/37) 
```

已经好几个小时了，仍然卡住了。

我想提交我所做的所有其他更改，所以我不想恢复到我的 Github 存储库中的内容。我只是想解决这个冲突。我是 Git 新手，所以请放轻松。

谢谢，蒂姆

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T02:48:46.390

是否有某些原因*必须*将文件包含在您的存储库中？我建议您可以取出存储库的 500mb 文件，并将其存储在其他地方。

1.  停止进程 ( `^C`)
2.  删除文件，方法是把它放在你的`.gitignore`文件中，或者将它完全移出项目。
    *   如果您决定将其放入`.gitignore`文件中，则必须从存储库中删除该文件的缓存：`git rm --cached <file>`. 否则，它仍然会出现在项目中。**注意：**这根本不会*删除*文件，只会删除存储库对它的引用。毕竟，该文件仍将位于目录中。
3.  犯罪
4.  推
5.  幸福

祝你好运 ：）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-08T19:23:24.750

@torek 是正确的，“它实际上并没有被冻结，只是需要很长时间才能压缩那个巨大的物体。”

# algorithm - 是否有一个简单的公式来计算这些代码？

> ID：10745961
> 
> 赞同：2
> 
> 时间：2012-05-24T22:05:55.480
> 
> 标签：algorithm, encoding

```
Switch 1 can be set to F or S.
Switch 2 can be set to M or A or C or N.
Switch 3 can be set to U or B.
Switch 4 can be set to Z or Y. 
```

以下 3 位数字（被认为是十进制）表示所示开关设置的组合。没有其他组合重要或将遇到。

```
036 == F, M, U, Z
037 == S, M, U, Z
040 == F, M, B, Y
041 == F, M, U, Y
042 == S, M, B, Y
043 == S, M, U, Y
080 == F, A, B, Z
081 == F, A, U, Z
082 == F, C, B, Z
083 == F, C, U, Z
090 == S, A, B, Z
091 == S, A, U, Z
092 == S, C, B, Z
093 == S, C, U, Z
140 == F, A, B, Y
141 == F, A, U, Y
142 == S, A, B, Y
143 == S, A, U, Y
240 == F, C, B, Y
241 == F, C, U, Y
242 == S, C, B, Y
243 == S, C, U, Y
260 == F, N, U, Z
261 == S, N, U, Z
270 == F, N, U, Y
271 == S, N, U, Y
300 == F, N, B, Z
301 == S, N, B, Z
310 == F, N, B, Y
311 == S, N, B, Y
700 == F, M, B, Z
702 == S, M, B, Z 
```

是否有一个简单的公式（不是查找表或树）用于从开关设置中计算 3 位数字？如果公式包含上面未列出的组合，则可以，因为这些组合永远不会被输入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T23:02:51.443

似乎您可以使用[卡诺图](http://en.wikipedia.org/wiki/Karnaugh_map)或其等价物之一（例如[Quine-McCluskey 算法](http://en.wikipedia.org/wiki/Quine%E2%80%93McCluskey_algorithm)）来解决问题

这样，您的 3 位数字的二进制表示就是您的输出，并且您有 5 个输入，开关 1、3 和 4 各有 1 位，开关 2 有 2 位。

如果您的输入是固定的（因此您不需要编写程序来为您提供表达式），您可能会从将卡诺方法与您知道的其他操作混合在一起中受益更多。卡诺图为您提供和/或表达式，但在您的应用程序中，您可能还可以使用加法和其他可用操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T06:14:28.830

您所拥有的是[USPS 服务代码的子集](https://ribbs.usps.gov/intelligentmail_mailpieces/documents/tech_guides/stid.pdf)。F是First Class，S是Standard，M是手动，A是ASR，C是CSR，N是none，B是basic，U是full，Z是no confirm，Y是confirm。完整的代码集使得它更不可能有一个简单的公式，但您可以尝试联系 USPS 设计师。

# python - Web.py db.insert() 不插入行

> ID：10745963
> 
> 赞同：2
> 
> 时间：2012-05-24T22:06:15.687
> 
> 标签：python, mysql, web.py

我正在使用 Web.py 0.37，并尝试在我的 mysql 数据库中添加一行。这是我的代码：

```
com.globals.db.insert('users', email=data.email, fullname=data.fullname, password=pwh, _test=False) 
```

这是输出（在调试器窗口中）：

```
0.09 (2): INSERT INTO users (fullname, password, email) VALUES ('Juan', 'f3bab99...d05cee4', 'no@email.com')
0.09 (3): SELECT last_insert_id();
30 
```

我可以看到 id 字段在增加，但是当我检查数据库时，没有创建新行。为什么会这样？输出的 sql 语句在 mysql 终端中执行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T16:03:50.940

你提交数据了吗？

您很可能正在使用事务，并且需要提交数据才能在其他进程中看到它。

我不知道如何在 Web.py 中做到这一点！

（从我对 Helgi 建议的原始评论中复制）

# jquery - 混合 HTTP / HTTPS 网站的集成问题

> ID：10745966
> 
> 赞同：2
> 
> 时间：2012-05-24T22:06:35.120
> 
> 标签：jquery, http, https, cross-domain

我在业余时间一直在开发一个 webapp。

它主要面向公开发布/消费内容，因此内容有望通过 http 公开查看。它还允许/包含 3rd 方小部件，因此需要 http 访问（许多供应商没有 https 版本，然后在 https 页面上存在 http 的混合内容问题）。由于这个和其他一些业务目标，99% 的网站必须在 http 上可用。

到目前为止，我实施的锁定方案是这样的：

*   一切都在同一个域上
*   /account 和 /api 下的所有内容都通过 https 和仅限 https 的 cookie 处理。只有这些安全会话 ID 可用于写入或访问个人身份资料。
*   其他一切都通过 http 和一组单独的 http cookie 处理。这些 cookie 主要用于基于浏览器的 javascript 自定义，而不是用于“写入”或查看敏感内容）

这导致我的问题...

如果有人想在 webapp 上执行书签或社交活动，则需要通过 HTTPS 通道进行 - 使用 HTTPS cookie 等 - 但是浏览器的同源策略将 http 和 https 视为两个不同的服务器。

我正在尝试考虑有效（最好是简单）的方法来允许从 HTTP 内容对 HTTPS 服务器进行 API 调用。我的第一个想法是使用 JSONP，但我需要会话 cookie——而这对我来说是不可见的。

有人有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T22:31:32.387

让我试着理解你的工作流程：你的 HTTP 页面必须调用 HTTPS 服务器，然后它会访问会话 cookie，并且你需要 HTTP 页面可以访问响应，对吗？

一种方法是使用单独的 iframe 来托管与服务器通信的脚本，并让主页和 iframe 使用 HTML5 [postMessage](https://developer.mozilla.org/en/DOM/window.postMessage)进行通信。因此，实现上述工作流程的步骤将是：

1.  您使用`postMessage`带有（序列化）请求参数的 iframe；
2.  iframe 的消息回调接收请求，**确认它来自您的页面**，并向服务器提交 Ajax 请求（传递会话 cookie）；
3.  `postMessage`使用;接收、序列化并发送到主页面的响应
4.  主页的消息回调接收响应并对其进行处理。

这应该不难封装在单个函数调用中。这里棘手的部分是上面的粗体片段：如果 iframe 中的脚本没有正确确认请求来自正确的页面，这可能会产生 CSRF 漏洞（恶意页面可能会将您的安全脚本嵌入 iframe，发送请求并且，只要在发生这种情况时对用户进行了身份验证，iframe 就会接受该请求）。

对于这个问题，不幸的是，我几乎没有什么建议。总体而言，在 HTTP 页面中嵌入 HTTPS 内容是一个坏主意，但既然您有理由这样做，您也应该处理安全隐患。

# php - 从 PHP 的 strtotime 函数中删除 hh:mm:ss

> ID：10745971
> 
> 赞同：1
> 
> 时间：2012-05-24T22:07:13.050
> 
> 标签：php, highcharts

我正在设置一个 HighCharts 折线图，x 轴标签与数据点不匹配。数据点累积到一整天（无小时）。但是，当我添加 pointStart 时，我得到了运行它时的 unix 时间戳：

`pointStart: <?php echo strtotime("-1 month -1 day") * 1000; ?>`

*我可以说“在午夜*给我一个月零一天前的 unix 时间戳”而不会使事情复杂化吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T22:13:43.723

当然可以 ：

`<?php echo strtotime(date('Y-m-d', strtotime("-1 month -1 day"))); ?>`

该`date()`格式将删除小时分钟和秒，然后您可以重新获取您的时间戳

# php - 检索重定向 url 的内容 | 卷曲与上下文

> ID：10745972
> 
> 赞同：3
> 
> 时间：2012-05-24T22:07:19.307
> 
> 标签：php, javascript

我正在使用 file_get_contents

```
file_get_contents( $url1 ). 
```

然而实际 url 的内容来自 $url2。

下面是一个具体案例：

```
$url1 = gmail.com

$url2 = mail.google.com 
```

我需要一种在 PHP 或 JavaScript 中以编程方式获取 $url2 的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T22:12:11.007

如果你想提取当前的 url，在 JS 中你可以使用 window.location.hostname

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T22:21:48.297

我相信你可以通过创建一个上下文来做到这一点：

```
$context = stream_context_create(array('http' =>
    array(
        'follow_location'  => false
    )));
$stream = fopen($url, 'r', false, $context);
$meta = stream_get_meta_data($stream); 
```

$meta 应该包括（除其他外）状态代码和用于保存重定向 url 的 Location 标头。如果 $meta 指示 200，您可以使用以下方法获取数据：

```
$meta = stream_get_contents($stream) 
```

不利的一面是，当您获得 301/302 时，您必须使用 Location 标头中的 url 再次设置请求。起泡，冲洗，重复。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T22:26:28.450

我不明白你为什么想要 PHP***或***JavaScript。我的意思是......他们在解决问题方面*有点*不同。

假设您想要一个服务器端 PHP 解决方案，这里有一个全面的解决[方案](http://www.webmasterworld.com/php/3681920.htm)。逐字复制的代码太多，但是：

```
function follow_redirect($url){
  $redirect_url = null;

  //they've also coded up an fsockopen alternative if you don't have curl installed
  $ch = curl_init($url);
  curl_setopt($ch, CURLOPT_HEADER, true);
  curl_setopt($ch, CURLOPT_NOBODY, true);
  curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
  $response = curl_exec($ch);
  curl_close($ch);

  //extract the new url from the header
  $pos = strpos($response, "Location: ");
  if($pos === false){
    return false;//no new url means it's the "final" redirect
  } else {
    $pos += strlen($header);
    $redirect_url = substr($response, $pos, strpos($response, "\r\n", $pos)-$pos);
    return $redirect_url;
  }
}

//output all the urls until the final redirect
//you could do whatever you want with these
while(($newurl = follow_redirect($url)) !== false){
  echo $url, '<br/>';
  $url = $newurl;
} 
```

# regex - 简单的 .htaccess 重定向：如何使用参数重定向？

> ID：10745977
> 
> 赞同：7
> 
> 时间：2012-05-24T22:07:39.043
> 
> 标签：regex, apache, .htaccess, mod-rewrite

我的目标只是重定向：

`/jsn.php?parameters`到`http://www.site2.com/jsn.php?parameters`

我试过了

```
Redirect permanent /jsn.php(.)* http://www.site2.com/jsn.php$1 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-25T00:47:05.330

查询字符串参数会自动传递，您只需这样做：

```
Redirect permanent /jsn.php http://www.site2.com/jsn.php 
```

`(.)*`不适用于该指令`Redirect`，您可能正在考虑`RedirectMatch`，但无论哪种方式，您都不需要它。而且`(.)*`应该是`(.*)`，否则**$1**反向引用只会得到第一个字符。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T22:26:44.223

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteRule ^(jsn\.php)$ http://www.site2.com/$1 [L,NC,R=301] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T22:19:48.273

您可以在 .htaccess 文件中使用显式 URL 重写：

```
RewriteRule ^/jsn\.php\?(.*) http://www.site2.com/jsn.php?$1 [R] 
```

**注意：**您需要转义 . 和 ？因为它们也是正则表达式字符。

如果您在使用 时遇到问题`mod_rewrite`，请发布您的文件内容。

# javascript - socket.io 和 node.js 的区别

> ID：10745987
> 
> 赞同：12
> 
> 时间：2012-05-24T22:08:23.643
> 
> 标签：javascript, node.js, socket.io

`socket.io`和`node.js`项目之间有什么区别（目的） ？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-24T22:11:03.550

从根本上说，它们彼此没有任何关系。

Node.js 是 JavaScript 的宿主，通常用作事件驱动服务器。

Socket.IO 是 Web Sockets 的包装器，它允许客户端和服务器之间的简单通信。它还可以作为一种在本身不支持 Web Sockets 的浏览器中引入类似 Web-Socket 的功能的方法。

您的困惑可能源于 Socket.IO 托管在服务器上的 Node.js 项目中。为了比较，您的问题类似于“汽车和道路有什么区别？” 它们是相互使用的，但不是一回事。这里可能有一个更好的类比，但我想不出一个。也许其他人可以对此发表评论并添加。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-24T22:15:38.307

简单地说，node.js 是在服务器上执行 JavaScript 的运行时环境。

socket.io 是一个构建在 node.js 之上的框架，用于启用客户端和服务器之间的 Web 套接字通信。

# ios5 - 在 C4 中为多种颜色设置动画

> ID：10745989
> 
> 赞同：3
> 
> 时间：2012-05-24T22:08:34.237
> 
> 标签：ios5, c4

我想为形状对象的颜色设置动画，使其从一种颜色变为另一种颜色，然后再返回。我尝试用一​​种方法设置对象的颜色，然后用另一种方法将其设置回原始颜色，但这对我来说似乎相当麻烦。有没有更好的方法来使用 C4 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T15:51:18.330

你是对的，你采取的方法很麻烦。

要向前动画并立即向后动画，您可以使用以下代码行：

```
object.animationOptions: AUTOREVERSE;
object.fillColor = [UIColor ...]; 
```

要永远这样做：

```
object.animationOptions: AUTOREVERSE | REPEAT;
object.fillColor = [UIColor ...]; 
```

...此外，您可以将这些动画选项用于 C4 中任何可见对象的所有动画属性。因此，您可以自动反转/重复原点更改、中心点、更改形状、更改图像等...

# javascript - 功能性的JavaScript？

> ID：10745991
> 
> 赞同：14
> 
> 时间：2012-05-24T22:08:36.047
> 
> 标签：javascript, coffeescript, functional-programming, livescript

我想使用“javascript 派生语言”来学习和使用当今一些常用的 Web 技术，如 node.js、jquery 等。

在玩弄了一段时间的函数概念和语言（主要是 F#）之后，我正在寻找 Javascript 世界中是否有类似的东西。到目前为止，我发现并考虑的是：

*   **Javascript 的功能方式**：尽可能广泛地使用 javascript 的功能部分，利用 Underscore 或其他功能库。这种方法的优点是学习“母语”。对我来说，缺点是我真的不喜欢它的语法，并且在 Javascript 中编写“功能优先”的程序感觉不是很自然。

*   **CoffeeScript +** Underscore：我见过一些使用 CoffeScript + Underscore 的例子，它们看起来很吸引人。例如：[http](http://autotelicum.github.com/Smooth-CoffeeScript/SmoothCoffeeScript.html#toc-Chapter-7)
    ://autotelicum.github.com/Smooth-CoffeeScript/SmoothCoffeeScript.html#toc-Chapter-7 这样做的好处是 CoffeScript 正在广泛传播，并且似乎是设计用于与javascript虚拟机。它的语法对我来说感觉更自然，我可以以更简单的方式以功能方式编写一些东西。
    缺点将远离 javascript 本身（这对我来说真的不是太大的问题）并且处于非真正功能的中间地带。

*   [**Livescript**](http://gkz.github.com/LiveScript/)：源自 Coco（它本身源自 CoffeScript），它的语法对我来说更有吸引力（它甚至还有我钟爱的 F# 管道 '|>' 运算符）。优点是它是最实用的方法。缺点是它不是很普及（我在 SO 中进行了搜索，但实际上并没有任何关于它的内容）和所有暗示（没有太多的社区、支持、教程等）。

在考虑了所有这些之后，我没有真正的结论，所以如果习惯使用 javascript、CoffeeScript 等的人能够指导我了解这些问题的真正重要性，那就太好了。

以防万一...我还没有真正考虑过使用[Pit](http://pitfw.org/)（因此继续使用 F#），因为尽管它编译为 javascript，但我认为它没有与上述任何 javascript 库集成，并且不遵循相同的工作流程或与 javascript 生态系统以及列出的选项集成。

非常感谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-25T01:47:47.997

我可能有点偏见（我是 LiveScript 的创建者），但你应该试试 LiveScript！我目前正在为它开发一个标准库，它将比下划线更好地集成。正如您所说，使用它的人还不是很多，但是社区必须从某个地方开始！正如您所指出的，在所有其他条件相同的情况下，这似乎是最好的选择——所以潜心尝试吧！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T22:24:55.487

你基本上有两个选择：

*   使用 JS 派生的语言，如 CoffeeScript
*   使用函数式语言编译 JS

对于选项 1，它可能是与其他 JS 代码互操作的最佳选择。如果您真的想与其他可能不熟悉`<insert functional language>`.

如果您实际上对 JS 不是很熟悉，我建议您使用选项 1。如果您不了解 JS 基础，那么在您选择的语言/工具中遇到错误时，理解事情的工作原理可能会很棘手。

选项 2 使用起来可能更有趣，因为您可能会在 JS 中获得您最喜欢的语言的好处。除了您提到的 Pit 项目之外，还有一些尝试将 Haskell 编译成 JS，这也可能是一种选择。

选项 2 的缺点可能是项目到今天还不是（afaik）非常先进的事实，并且它可能编译成不是非常有效的 JS 代码。

最后，还有一些基于 JS 的 Haskell 风格的语言，类似于 CoffeeScript，但我似乎忘记了它的名字。如果有人能弄清楚它叫什么，那可能值得一试：D

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-24T22:34:40.990

还有一个“FUNCTIONAL”函数库，+咖啡脚本+下划线；）！

[http://osteele.com/sources/javascript/functional/](http://osteele.com/sources/javascript/functional/)

# ruby - Ruby DateTime 人类时区输出

> ID：10745994
> 
> 赞同：4
> 
> 时间：2012-05-24T22:08:45.780
> 
> 标签：ruby, datetime, timezone

我正在尝试输出 ruby​​ DateTime 对象的时区：

```
DateTime.parse('2012/05/23').strftime('%Z') 
```

这输出`"+00:00"`. 根据文档，它应该返回`GMT`.

我做错了什么，还是我发现了一个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T22:41:31.173

该类`DateTime`似乎不支持将区域数据作为区域名称。然而，`Time`该类正确地做到了这一点。所以要么这样做：

```
require 'date'
require 'time'

Time.parse('...').strftime('%Z') 
```

或者，如果您已经有了`DateTime`格式数据，那么：

```
Time.parse(DateTime.parse('...').to_s).strftime('%Z') 
```

# visual-studio-2010 - Visual Studio 2010，无法拖动数据库项目

> ID：10745995
> 
> 赞同：0
> 
> 时间：2012-05-24T22:08:52.893
> 
> 标签：visual-studio-2010

我在使用 Visual Studio 时遇到问题，突然我不能在服务器资源管理器中拖放任何东西，导致我无法将表添加到我的 Linq2Sql 数据上下文中。有任何 1 以前有过这个错误并且知道如何“修复”它吗？

# c++ - 带有 char 数组的 Ifstream

> ID：10745996
> 
> 赞同：0
> 
> 时间：2012-05-24T22:09:00.120
> 
> 标签：c++, stl, ifstream

我怎样才能做到这一点？我正在使用 Visual Studio 2010 C++。

```
char * Buffer = new char[Filesize];
//Fill it with data here

std::ifstream BinaryParse(Buffer, std::ios::binary);
if(BinaryParse.is_open())
{
   BinaryParse.read((char*)&Count, sizeof(unsigned int));
} 
```

那是行不通的。除了从 char 数组读取之外，如何使 ifstream 的行为方式与读取文件相同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T00:02:05.160

You can try istringstream, which uses a C++ string as the input stream.

Here is an example from [C++ reference](http://www.cplusplus.com/reference/iostream/istringstream/istringstream/):

```
// using istringstream constructors.
#include <iostream>
#include <sstream>
#include <string>
using namespace std;

int main () {
  int n,val;
  string stringvalues;

  stringvalues = "125 320 512 750 333";
  istringstream iss (stringvalues,istringstream::in);

  for (n=0; n<5; n++) {
    iss >> val;
    cout << val*2 << endl;
  }

  return 0;
} 
```

You can find another example here: [http://www.fredosaurus.com/notes-cpp/strings/stringstream-example.html](http://www.fredosaurus.com/notes-cpp/strings/stringstream-example.html).

# ruby-on-rails - Rails 如何将预编译的资产上传到 Cloudfront

> ID：10745998
> 
> 赞同：14
> 
> 时间：2012-05-24T22:09:19.993
> 
> 标签：ruby-on-rails, ruby-on-rails-3, amazon-web-services, asset-pipeline, amazon-cloudfront

*   我正在使用 Rails 3.2 应用程序
*   我创建了一个具有 S3 源的 Cloudfront 发行版
*   我已经将 config.action_controller.asset_host 更改为我的云端资产
*   我正在使用 capistrano

我想知道，每次部署时如何将我的预编译资产上传到 Cloudfront

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-25T04:04:53.787

不需要 s3 存储桶，因为 Amazon Cloudfront 现在支持“自定义来源”。过去您必须指定一个 s3 存储桶作为源，但现在您可以将您的云端分发指向您的 rails 应用程序。

[http://aws.typepad.com/aws/2010/11/amazon-cloudfront-support-for-custom-origins.html](http://aws.typepad.com/aws/2010/11/amazon-cloudfront-support-for-custom-origins.html)

因此，在您创建指向您可公开访问的应用程序的发行版后，您将资产主机设置在适当的配置文件中，例如 production.rb，然后您就可以参加比赛了。

```
config.action_controller.asset_host = "url of your cloudfront distribution" 
```

这是一篇关于如何配置的文章：

[http://ryantownsend.co.uk/post/13126016608/cloudfront-cdn-on-rails](http://ryantownsend.co.uk/post/13126016608/cloudfront-cdn-on-rails)

不要对有关为源子域设置 CNAME recprds 的内容感到困惑。这仅在您想使用自己的子域而不是亚马逊时才相关。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-05-24T22:32:39.373

安装 aws-s3 gem 后，您可以在 capistrano 配方的末尾添加：

```
set :cdn_user, "KEY ID" # This is called "CDN KEY API" for AWS
set :cdn_api_key, "YOUR KEY SECRET"
set :cdn_container, "bucket name"

namespace :assets do
    task :to_cdn do
      require 'aws/s3'
      AWS::S3::Base.establish_connection!(:access_key_id => cdn_user, :secret_access_key => cdn_api_key )
      assets_dir = "#{shared_path}/assets"
      Dir.glob(assets_dir + "/**/*").each do |file|
        if !File.directory?(file)
          cdn_filename = file.gsub(assets_dir,"assets")
          AWS::S3::S3Object.store(cdn_filename, open(file) , cdn_container)
        end
      end
    end
end 
```

使用这样的触发器：

```
after "deploy:assets:precompile", "assets:to_cdn" 
```

您还需要在配方中的某个时间点启动编译：

```
load 'deploy/assets' 
```

结果：在您的资产编译结束时，您的所有资产都将被推送到 S3 上，您将能够从云端访问它们。

然后，您必须更新您的 config/environment/production.rb 以指向您的 CDN URL。

```
config.action_controller.asset_host = "http://assets.example.com" 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-09T16:18:18.333

有一个很棒的 Ruby gem 可以处理这个问题，叫做[AssetSync](https://github.com/rumblelabs/asset_sync)。如果将它与[turbo-sprockets](https://github.com/ndbroadbent/turbo-sprockets-rails3)结合使用，则可以确保在部署时只复制新的或更新的资产。