# StackOverflow 问答 12243000-12243999

# html - 我的网页是 2 列但在放大时重叠为 1 列？

> ID：12243003
> 
> 赞同：0
> 
> 时间：2012-09-03T06:33:19.163
> 
> 标签：html, css, positioning, two-columns

我很沮丧：每当我缩小这个网页时，一切都会变得一团糟。如何使网页居中以便我可以缩小并且元素不会被错误定位。（它应该是 2 列，但所有内容都合并为 1）我已经尝试过`<center>`，但由于某种原因这不起作用。

[www.officialnewvintage.com/joel.html](http://www.officialnewvintage.com/joel.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T07:07:11.527

不要使用中心标签。它已过时且无效。我会将 id 设置为 > margin: 0 auto; 此站点上显示了一个基本示例：http: [//css-tricks.com/snippets/css/centering-a-website/](http://css-tricks.com/snippets/css/centering-a-website/) 希望这会有所帮助。:)

# php - .htaccess Url 重写删除查询字符串键

> ID：12243005
> 
> 赞同：5
> 
> 时间：2012-09-03T06:33:20.347
> 
> 标签：php, .htaccess, zend-framework, url-rewriting

我有一组网址，例如...

```
www.example.com/page/1/name/abc
www.example.com/city/la/name/abc
www.example.com/page/1/name/abc/city/la
www.example.com/page/1/ 
```

并想将它们转换为..

```
www.example.com/1/abc
www.example.com/la/abc
www.example.com/1/abc/la
www.example.com/1/ 
```

基本上我想隐藏查询字符串中的键。

这个怎么做？有什么帮助吗？

**编辑**

我每页都有不同的键，每页大约有 25 个键。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T16:41:40.420

您可以使用[Zend_Controller_Router_Route](http://framework.zend.com/manual/1.12/en/zend.controller.router.html#zend.controller.router.routes.standard.variable-requirements)和/或[Zend_Controller_Router_Route_Regex](http://framework.zend.com/manual/1.12/en/zend.controller.router.html#zend.controller.router.routes.regex)并定义路由

```
$route = new Zend_Controller_Router_Route(
    ':key/:city_name',
    array(
        'controller' => 'somecontroller',
        'action'     => 'pageAction'
    ),
    array('key' => '^\d+$')
);
$router->addRoute('page', $route); // www.example.com/1/abc

$route = new Zend_Controller_Router_Route(
    ':key/:city_name',
    array(
        'controller' => 'somecontroller',
        'action'     => 'cityAction'
    ),
    array('key' => '^\d+\w+$') // www.example.com/1a/abc
);
$router->addRoute('city', $route); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T06:25:14.347

我会保留将`.htaccess`所有请求（除了前端资源，如 img、css、js 等）路由到`index.php`. 然后在引导程序中添加[路由来处理您的重定向。](http://framework.zend.com/manual/1.12/en/zend.controller.router.html)

对于您想要更改为新网址的现有网址，我将创建一个`RedirectController`带有重定向的操作 - 真正重定向，使用 HTTP 301 代码，而不仅仅是执行相同的操作 - 到您想要的网址。

有一个有效的论点反对通过路由在应用程序级别实现重定向而不是处理它`.htaccess`：它会降低性能，因为需要整个引导/调度周期来实现重定向。这是一个公平的论点，但我发现将我的所有路由信息放在一个地方更清楚，而不是在两个`.htaccess`路由和我的应用级路由之间拆分。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-03T07:04:33.507

前端控制器是一种通过单点映射 uri 的设计模式，Zend 使用的是前端控制器模式。此映射可以在 bootstrap.php 中更改。我用谷歌搜索，发现[这个问题](https://stackoverflow.com/questions/8402088/zend-url-parameter-hide-key-and-show-value)非常相似。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-12T17:36:35.173

尝试这个

```
<IfModule mod_rewrite.c>
    RewriteEngine on

    #1 www.example.com/1/abc to www.example.com/page/1/name/abc (/number/string)
    RewriteRule ^([0-9]+)/([^/]+)$ /page/$1/name/$2 [L,QSA]

    #2 www.example.com/la/abc to www.example.com/city/la/name/abc (/string/string)
    RewriteRule ^([^/]+)/([^/]+)$ /city/$1/name/$2 [L,QSA]

    #3 www.example.com/1/abc/la to www.example.com/page/1/name/abc/city/la (/number/string/string)
    RewriteRule ^([0-9]+)/([^/]+)/([^/]+)$ /page/$1/name/$2/city/$3 [L,QSA]

    #4 www.example.com/1/ to www.example.com/page/1/ (/number/)
    RewriteRule ^([0-9]+)/$ /page/$1/ [L,QSA]
</IfModule> 
```

规则顺序非常重要。不要换。规则 1 必须始终在规则 2 之前。规则 4 必须始终在最后。顺序是从最具体到最通用的规则。规则 3 可以在任何位置，但在规则 4 之前。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-14T19:14:40.457

1.  尝试统一您的网址。然后它会更容易使用。这是一个实际的例子。

**.htaccess**文件：

```
RewriteEngine on

# Remove trailing '/' from URL
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d 
RewriteCond %{REQUEST_URI} ^(.+[^/])/$
RewriteRule ^(.*)/$ /$1 [R=301,L]

# Convert url to ?q=/US/en/0001
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d 
RewriteCond %{REQUEST_URI} ^(.*)$
RewriteRule ^(.*)$ index.php?q=%1 [NS,L]

# Input: /US/en/0001
# Output print_r($_GET);
# Array
# (
#    [country] => US
#    [locale] => en
#    [pid] => 0001
# )
RewriteCond %{QUERY_STRING} ^q=/([A-Z]{2})/([a-z]{2})/([0-9a-zA-Z]{4})$
RewriteRule ^(.*)$ ?country=%1&locale=%2&pid=%3 [NS,L]

# Input: /US/en
# Output print_r($_GET);
# Array
# (
#    [country] => US
#    [locale] => en
# )
RewriteCond %{QUERY_STRING} ^q=/([A-Z]{2})/([a-z]{2})$
RewriteRule ^(.*)$ ?country=%1&locale=%2 [NS,L]

# Input: /US
# Output print_r($_GET);
# Array
# (
#    [country] => US
# )
RewriteCond %{QUERY_STRING} ^q=/([A-Z]{2})$
RewriteRule ^(.*)$ ?country=%1 [NS,L] 
```

**索引.php**

```
<?php
    print_r($_GET);
?> 
```

# asp-classic - 将字典存储到会话

> ID：12243006
> 
> 赞同：2
> 
> 时间：2012-09-03T06:33:29.250
> 
> 标签：asp-classic, vbscript

我创建了这个函数，但它似乎给了我一个问题。我想将字典存储到 Session 变量中，以便可以访问整个网站的字典。我不断收到错误**Object required: DictionaryObject**或者它会说**This key already exists in the dictionary**。有人可以告诉我我做错了什么吗？

在这篇文章中，我确实看过[在会话中存储字典，](https://stackoverflow.com/questions/4838129/storing-dictionary-in-session)但并不真正适合我想要做的事情！

```
Function LoadPermissions()

    Dim SQLString
    SQLString ="SELECT datafields here... FROM " & TBL_employees_permissions & " AS p WHERE p.eid = '" & Clng(12) & "';"

    If IsObject(Session("dicPermissions")) = True Then
        Set dicPermissions = Session("dicPermissions")
    Else
        Set dicPermissions = Server.CreateObject("Scripting.Dictionary")
    End If

    db_conn conn, rs '
    Set myRS = conn.Execute (SQLString) 

    For each item in myRS.Fields
        If IsObject(Session("dicPermissions")) = True AND DictionaryObject.Exists(Trim(item.Name)) = False Then
            dicPermissions.Add Trim(item.Name), Trim(myRS(item.Name))
        End If
    Next
    db_disconn conn, rs

    Set Session("dicPermissions") = dicPermissions 'Store Dictionary to session array.

End Function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T06:48:22.977

我能够让它工作，这就是我所做的？如果有人看到任何错误或者我需要添加任何错误捕获。用户登录时加载一次。

暗淡的 SQLString

```
 SQLString ="SELECT Datefields here... & " AS p WHERE p.eid = '" & Clng(12) & "';"

    'Create the dictionary object.
    Set Session("dicPermissions") = Server.CreateObject("Scripting.Dictionary") 'Create the Dictionary object.

    'sets up a connection to the database
    db_conn conn, rs 'Open account table.
    Set myRS = conn.Execute (SQLString) ' Uses any ADODB connection

    For each item in myRS.Fields 'Create the dictionary with the field names and cell data.
            'dicPermissions.Add fieldname, feild value
            Session("dicPermissions").Add Trim(item.Name), Trim(myRS(item.Name))
    Next
    db_disconn conn, rs 'Close the database 
```

您可以像这样访问它：

```
Response.write Session("dicPermissions").Item("itemnamehere...") 
```

# ios - iOS - 为什么我的音频不能在后台播放？

> ID：12243007
> 
> 赞同：-4
> 
> 时间：2012-09-03T06:33:42.417
> 
> 标签：ios, xcode, ios5

我无法在 iphone 的后台播放音频。我的项目在[这里](http://musicmenow.com/musicBox.zip)，有人可以看看吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T06:58:06.953

![截屏](../Images/14e5fad2dc6eb002506e7f38b53a92b3.png)

我已更改为 iOS 5.1，因为我不想将手机更新到 iOS 的 beta 版本……在这种情况下存在编译错误。

如果您展示如何创建播放器会很有帮助：

```
NSURL *url = [NSURL fileURLWithPath:[[NSBundle mainBundle]
                                         pathForResource:_detailItem
                                         ofType:@"mp3"]];
    NSError *error;
    player = [[AVAudioPlayer alloc]
              initWithContentsOfURL:url
              error:&error]; 
```

我正在使用其他播放器，它在后台很好地播放无线电 URL：

```
 streamPlayer = [[MPMoviePlayerController alloc] initWithContentURL: [NSURL URLWithString:radioUrl]];
    streamPlayer.movieSourceType = MPMovieSourceTypeStreaming;
    streamPlayer.useApplicationAudioSession = NO; 
```

也许

```
streamPlayer.useApplicationAudioSession = NO; 
```

是关键吗？我忘记了，我无法启动您的代码。

# tridion - Tridion 组件链接无法解析

> ID：12243009
> 
> 赞同：1
> 
> 时间：2012-09-03T06:33:51.837
> 
> 标签：tridion, tridion-2011

我正在使用 SDL Tridion 2011。我创建了一个字段类型为“文本”的组件，并将已发布的组件链接到其中的文本。

在此之后，我将组件插入到页面并发布（我使用了 Link Resolver TBB）。当我在浏览器中查看该页面时，链接没有出现，当我检查代码时，以下是代替链接编写的

```
<tridion:ComponentLink runat="server" PageURI="tcm:150-12575-64" 
    ComponentURI="tcm:150-12344" TemplateURI="tcm:0-0-0" AddAnchor="false"
    LinkText="component" LinkAttributes=" title=&#34;Video link&#34; 
    target=&#34;_blank&#34; " TextOnFail="true"/> 
```

模板类型是复合模板和代码：-

```
<CompoundTemplate xmlns="http://www.tridion.com/ContentManager/5.3/CompoundTemplate">
  <TemplateInvocation>
    <Template xlink:href="tcm:150-12576-2048" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:title="Test" />
    <TemplateParameters>
      <Parameters xmlns="uuid:b81e2790-ded1-4fb2-b09a-4a2975c2938e" />
    </TemplateParameters>
  </TemplateInvocation>
  <TemplateInvocation>
    <Template xlink:href="tcm:150-12176-2048" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:title="Default Finish Actions" />
    <TemplateParameters>
      <Parameters xmlns="uuid:a13c5753-adfc-4e93-912f-ee3d93b6a828" />
    </TemplateParameters>
  </TemplateInvocation>
</CompoundTemplate> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-03T08:04:25.207

链接解析器 TBB 将根据部署程序和/或发布目标的配置将组件链接解析为 ASP.NET 或 JSP 标记。查看您的标记，它被解析为 ASP.NET 标记（从`runat="server"`属性判断）。

现在要使其工作，您必须确保为 ASP.NET Web 应用程序配置 API 服务器角色，当然您的页面需要具有正确的文件扩展名（通常为 .aspx）以确保执行其中的标签。

简单地说，您需要为 SDL Tridion Dynamic Link 标签注册标签前缀。您可以在 wep 应用程序`web.config`文件中执行此操作，如下所示：

```
<configuration>
    <system.web>
        <pages>
            <controls>
                <add tagPrefix="tridion" 
                     namespace="Tridion.ContentDelivery.Web.UI"
                     assembly="Tridion.ContentDelivery" />
            </controls>
        </pages>
    </system.web>
</configuration> 
```

有关此主题的更多信息，请参阅我们的在线文档：[为 .NET Web 应用程序配置 API 服务器角色](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/task_FF19F86A63E246F793D64495849EDEDF)（需要登录，详情请参见[此处](http://docportal.sdl.com/sdltridion)）

# django - Django reversion 不保存在 shell 中所做的修订

> ID：12243011
> 
> 赞同：10
> 
> 时间：2012-09-03T06:34:10.637
> 
> 标签：django, django-models, django-reversion

我做了[初始安装](https://github.com/etianen/django-reversion/wiki)步骤并创建了初始修订版，但是当我在 django shell 中保存模型时，没有创建新修订版：

```
In [1]: s = Shop.objects.all()[0]
In [2]: import reversion
In [3]: s.name = 'a'
In [4]: s.save()
In [5]: s.name = 'b'
In [6]: s.save()

In [7]: reversion.get_for_object(s)
Out[7]: [<Version: <1> "X">] 
```

这是最初的修订。

当我从视图更新模型时，会成功创建修订。

我错过了什么？

models.py 文件是：

```
 ...
 class Shop(Model):
     ...

 import reversion
 reversion.register(Shop)
 <EOF> 
```

我在接收器中看到了一个反转方法`post_save`，尽管在我调试它时没有调用它。

我有 Django v1.4.1，版本 v1.6.2。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-12-07T09:30:10.960

我写了 django-reversion，所以我想我可以对这个问题有所了解。

保存模型时会自动保存模型的版本，前提是满足以下条件：

1.  该模型使用 django-reversion 注册。
2.  代码块被标记为在修订中。

第 1 点可以通过使用 注册模型或在您的 models.py 文件中`VersionAdmin`显式调用来实现。`reversion.register()`

第 2 点可以通过使用`RevisionMiddleware`、`reversion.create_revision()`装饰器或上下文管理器来实现。中的任何管理员视图`VersionAdmin`也会保存修订。

因此，如果您的 shell 没有创建版本，那么第 1 点或第 2 点都没有得到满足。以下是解决方法：

1.  如果您使用的是 VersionAdmin，请在您的 shell 代码中导入相关的管理模块以启动自动注册。或者，调用`reversion.register()`您的 models.py 文件。
2.  在您的 shell 代码中，使用`reversion.create_revision()`调用周围的上下文管理器进行保存。

```
with reversion.create_revision():
    s.save() 
```

Low Level API wiki 页面上有关此类事情的更多信息：

[http://django-reversion.readthedocs.org/en/latest/api.html](http://django-reversion.readthedocs.org/en/latest/api.html)

# php - PHP 中的 UserVoice API 调用

> ID：12243012
> 
> 赞同：0
> 
> 时间：2012-09-03T06:34:12.197
> 
> 标签：php, uservoice

任何人都可以在 PHP 中给出一个简单的 UserVoice API 调用示例来检索某些东西（可能是文章等），因为我找不到任何正在做类似事情的示例......！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T11:44:27.963

我在很多地方都见过，即使我在使用它之前进行了很多搜索，有没有 PHP 使用 UserVoice API 检索数据的示例，但在很多事情之后我找不到解决方案，所以我自己找到了解决方案，这是我发布的一个示例，但很少需要的东西：

1.  确保您拥有 API 密钥，您可以通过进入 Settings>Channels 获得
2.  在 API 部分申请 API Client 点击“添加 API 客户端”按钮填写表格，它会生成一个 API 密钥和一些其他有用的信息
3.  现在打开您的 PHP 文件假设您想使用 API 获取网站上的所有文章，那么您可以使用以下代码：

    ```
    $r = new HttpRequest('https://YOUR_DOMAIN_NAME/api/v1/articles.json', HttpRequest::METH_GET);
    $r->addQueryData(array('client' => 'INSERT_YOUR_API_KEY_HERE'));
            try {
                    $r->send();
                    if ($r->getResponseCode() == 200) {                                       

                                   $obj=json_decode($r->getResponseBody());
                                   print_r($obj);

                           }
                } 
        catch (HttpException $ex) {
                   echo $ex;
                 } 
    ```

# jquery - 如何将焦点自动设置到 jquery 中的子网格行？

> ID：12243014
> 
> 赞同：1
> 
> 时间：2012-09-03T06:34:22.057
> 
> 标签：jquery, jqgrid-asp.net, jqgrid-formatter, subgrid

我在 jqgrid 的子网格中动态添加行。添加后，我想将焦点自动设置到正在添加到子网格中的新行。我正在使用 asp.net。我怎么能做到这一点..请帮帮我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T06:45:32.207

如果你能得到最新添加的行

如果您要添加最新的行以最后使用它

```
$('#grid tr:last').focus(); 
```

如果您要添加最新的行以首先使用它

```
$('#grid tr:first').focus(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T09:35:02.167

使用Jqgrid中的编辑行功能得到了我的解决方案。语法如下：

```
$("#grid_id").editRow(rowid, keys, oneditfunc, succesfunc, url, extraparam, aftersavefunc,errorfunc, afterrestorefunc); 
```

有关详细信息，请查看[http://www.trirand.com/jqgridwiki/doku.php?id=wiki:inline_editing](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:inline_editing)

# c# - 通过 C# 代码隐藏将列表项添加到 jqueryui

> ID：12243019
> 
> 赞同：0
> 
> 时间：2012-09-03T06:35:01.090
> 
> 标签：c#, jquery, .net, jquery-ui, jquery-ui-selectable

我正在使用[这个插件](http://jqueryui.com/demos/selectable/)来显示一个可选择的列表。

虽然它工作正常，但我需要从 C# 后面的代码中填充这些列表项。你能指出我正确的方向吗？

这是代码隐藏部分：

```
 wnetEntities1 db = new wnetEntities1();
 var wl = from w in db.wnet_available
         join role in db.wnet_userinfo
         on w.UserID equals role.UserId
         where w.AvailStatus == 1 && role.WLId == 1
         select new { w.UserID, role.FirstName };

wl.ToList();
foreach (var w in wl)
{
    var name = w.FirstName; 
```

//猜测这是应该生成li项目的地方。}

这是html列表（需要从asp.net生成）：

```
 <ol id="selectable">

        <li class="ui-widget-content">Item 1</li>
        <li class="ui-widget-content">Item 2</li>
        <li class="ui-widget-content">Item 3</li>
        <li class="ui-widget-content">Item 4</li>
        <li class="ui-widget-content">Item 5</li>
        <li class="ui-widget-content">Item 6</li>
        <li class="ui-widget-content">Item 7</li>
    </ol> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T07:52:57.247

为了能够`ol`在服务器端看到您的元素，首先添加`runat="server"`：

```
<ol id="selectable" runat="server"> 
```

然后您可以轻松地将您`li`的 s 添加到其中：

```
foreach (var w in wl.ToList())
{
    HtmlGenericControl li = new HtmlGenericControl("li");
    li.Attributes.Add("class", "ui-widget-content");
    li.InnerText = w.FirstName;
    selectable.Controls.Add(li);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T06:41:48.730

像这样 ？

```
 <% var items = wl.ToList(); %>

        <ol id="selectable">

         <%   foreach (var w in items)
            { %>
            <li class="ui-widget-content"><%=w.FirstName %></li>

            <% } %>
       </ol> 
```

# java - Android 通知首选项

> ID：12243020
> 
> 赞同：0
> 
> 时间：2012-09-03T06:35:06.843
> 
> 标签：java, android

我正在尝试将我的复选框首选项与我的通知联系起来，以便当用户单击任何复选框首选项时，通知按指定工作。我希望“输入”仅在单击“警报输入”首选项时才起作用。退出和振动也是如此。

```
 public void onReceive(Context context, Intent intent) {
    // TODO Auto-generated method stub
    String key = LocationManager.KEY_PROXIMITY_ENTERING;

    Boolean entering = intent.getBooleanExtra(key, false);

    if (entering){
        Log.d(getClass().getSimpleName(), "entering");
    }
    else{
        Log.d(getClass().getSimpleName(), "exiting");
    }

    SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(context);
    String alertName = prefs.getString("name_preference", "");
    String alertMessage = prefs.getString("message_preference", "");
    //boolean enteringRegion = prefs.getBoolean("alarm_entering", true);
    //boolean exitRegion = prefs.getBoolean("alarm_exiting", false);
    //boolean vibrate = prefs.getBoolean("vibrate_preference", true);

    NotificationManager notificationManager = (NotificationManager)context.getSystemService(Context.NOTIFICATION_SERVICE);
    PendingIntent pendingIntent = PendingIntent.getActivity(context, 0, null, 0);

    Notification notification = createNotification();
    notification.setLatestEventInfo(context, alertName, alertMessage, pendingIntent);

    notificationManager.notify(NOTIFICATION_ID, notification);
}

private Notification createNotification(){
    Notification notification = new Notification();

    notification.icon = R.drawable.icon_notification;
    notification.when = System.currentTimeMillis();

    notification.flags |= Notification.FLAG_AUTO_CANCEL;
    notification.flags |= Notification.FLAG_SHOW_LIGHTS;
    notification.defaults |= Notification.DEFAULT_LIGHTS;

    long[] vibrate = new long[] {2000, 2000, 2000, 2000, 2000};
    notification.vibrate = vibrate;

    Uri ringURI = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_ALARM);
    notification.sound = ringURI;

    notification.ledARGB = Color.BLUE;
    notification.ledOnMS = 1500;
    notification.ledOffMS = 1500;
    notification.flags = notification.flags | Notification.FLAG_SHOW_LIGHTS;

    return notification; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T06:40:37.887

我会这样尝试：

```
 myPrefListner = new OnSharedPreferenceChangeListener()
    {
        public void onSharedPreferenceChanged(SharedPreferences prefs, String key) 
        {
            //check if alarm key is set as wanted and if so launch notification
        }
    }; 
```

但我不太清楚你所说的“进入”是什么意思？

# php - 如何覆盖“form_div_layout”基本模板？

> ID：12243021
> 
> 赞同：5
> 
> 时间：2012-09-03T06:35:20.997
> 
> 标签：php, forms, symfony

我想覆盖要在树枝中使用的基本寺庙。

我用过这个

```
twig:
    form:
        resources:
            - 'form_div_layout.html.twig' 
```

我已将文件从原始位置复制到， `app/resources/views/Form/form_div_layout.html.twig`但我仍然无法看到模板渲染的变化。

基本上我只想在生成的 DIV 框中添加类

```
{% block form_widget_compound %}
{% spaceless %}
    <div class="MYCLASS" 
    {{ block('widget_container_attributes') }}>
        {% if form.parent is empty %}
            {{ form_errors(form) }}
        {% endif %}
        {{ block('form_rows') }}
        {{ form_rest(form) }}
    </div>
{% endspaceless %}
{% endblock form_widget_compound %} 
```

我需要做更多的改变吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-03T06:45:49.803

如果您只想自定义一个字段，则无需复制完整文件。做这个：

如果您只想为一个模板执行此操作，请将其添加到您的模板中：

```
{% form_theme form _self %}

{% block form_widget_compound %}
{% spaceless %}
    <div class="MYCLASS" >
    {{ block('widget_container_attributes') }}>
        {% if form.parent is empty %}
            {{ form_errors(form) }}
        {% endif %}
        {{ block('form_rows') }}
        {{ form_rest(form) }}
    </div>
{% endspaceless %}
{% endblock form_widget_compound %} 
```

如果您想在多个模板中自定义它，请执行以下操作：使用以下代码在您的包中创建一个模板文件：

```
{# src/Acme/DemoBundle/Resources/views/Form/fields.html.twig #}
{% block form_widget_compound %}
{% spaceless %}
    <div class="MYCLASS" >
    {{ block('widget_container_attributes') }}>
        {% if form.parent is empty %}
            {{ form_errors(form) }}
        {% endif %}
        {{ block('form_rows') }}
        {{ form_rest(form) }}
    </div>
{% endspaceless %}
{% endblock form_widget_compound %} 
```

然后在您要使用此自定义字段的那些模板中，执行以下操作：

```
{% form_theme form 'AcmeDemoBundle:Form:fields.html.twig' %} 
```

如果您希望此自定义可在捆绑包的所有模板中使用，请将其添加到您的配置文件中：

```
# app/config/config.yml
twig:
    form:
        resources:
            - 'AcmeDemoBundle:Form:fields.html.twig' 
```

如果您希望它可用于所有捆绑包，请将此文件复制到

```
app/Resources/AcmeDemoBundle/views/Form/fields.html.twig 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T09:06:52.803

要执行您正在尝试的操作，只需将**form_div_layout.html.twig**复制到没有**Form**文件夹的资源中，然后在配置中以这种方式引用它：**::form_div_layout.html.twig**

```
twig:
    form:
        resources:
            - '::form_div_layout.html.twig' 
```

您不必复制所有内容。您只能扩展它的一部分..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-22T03:28:08.777

在这里，简单明了。要仅覆盖**应用程序范围内的**某些块，您*必须*使用不同的文件名，`form_div_layout.html.twig`否则会出错。如果您复制整个文件并进行更改，这不是问题。但是，如果您只想覆盖某些块，您可以这样做：

创建文件`app/Resources/views/forms.html.twig`并粘贴到您要自定义的块中。文件名并不重要，只要它*不是* `form_div_layout.html.twig`.

接下来将其添加到树枝配置中`app/config/config.yml`

```
# app/config/config.yml
twig:
    form:
        resources: ["::forms.html.twig"] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-02T15:09:06.143

要完全覆盖原始**form_div_layout.html.twig**模板但不复制整个文件，请执行*以下操作*

理论：

1.  为原始文件添加 twig 加载**路径**（以避免 requrssion）
2.  选修的。添加显式 form_themes
3.  将新的“form_div_layout.html.twig”放在默认路径中
4.  通过 [path] namescpace 从原始文件中扩展新文件

所以。实践

在你的 symfony 树枝配置中放置它：

```
# symfony/config/packages/twig.yaml
twig:
    default_path: '%kernel.project_dir%/templates'
    # 1 step
    paths:
        - value: '%kernel.project_dir%/../vendor/symfony/twig-bridge/Resources/views/Form/'
          namespace: 'TwigBridge'

    form_themes:
        - '@SonataForm/Form/datepicker.html.twig'
        # 2nd
        - 'form_div_layout.html.twig' 
```

创建新文件**symfony** *dir* /templates/form_div_layout.html.twig

 *```
# '%kernel.project_dir%/templates'
# OR
# templates/form_div_layout.html.twig*
{#{% extends 'vendor/symfony/twig-bridge/Resources/views/Form/form_div_layout.html.twig' %}#}
{% extends '@TwigBridge/form_div_layout.html.twig' %}

# make override - replace original form widget
{%- block dateinterval_widget -%}
  {{ parent() }}
{%- endblock dateinterval_widget -%} 
```

要进行本地覆盖，请参阅其他答案。*

# barcode - 条形码是对称的吗？

> ID：12243028
> 
> 赞同：-2
> 
> 时间：2012-09-03T06:36:22.323
> 
> 标签：barcode, barcode-scanner

这只是一个确认。条码是否对称。对称我的意思是，如果我将条形码旋转 180 度。它是否会解码相同的数据。基本上扫描条形码时角度是否重要？条形码类型是否有任何例外。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T06:39:54.407

不，条形码本身通常不是对称的（我会澄清一下 - 你*可能*会找到一个对称的，但绝大多数标准的不是）。

但是，任何*体面的*阅读器（例如您当地超市的阅读器）都会在大量不同的方向上进行扫描以处理这一点，不仅是向后和向前，而且在其他角度也是如此。因此，您通常可以随心所欲地旋转它们。

即使是那些在一行中扫描的设备（例如一些手持设备）也可以双向扫描 - 这取决于您支付的费用。当然，如果您有“Dodgy Brothers”品牌阅读器，您可能会发现它*不会那样*做。

一些条码标准将允许检测倒置条码。例如，UPCA 在右侧交换黑白，以便读者可以进行调整。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T06:40:30.290

通常每个条形码中都有一个起始码和一个校验码，因此角度无关紧要。

# android - 找不到 Android 支持包

> ID：12243030
> 
> 赞同：1
> 
> 时间：2012-09-03T06:36:23.743
> 
> 标签：android

我已经安装了 Android SDK 管理器中提供的所有内容，SDK 和 ADT 都是最新的。如何找到 Android 支持包？

SDK 管理器截图：![SDK 管理器截图](../Images/8a507c12ae4e7db8c678939f6f25b2e8.png)

# c# - 向 WPF 窗口标题栏添加更宽的图标

> ID：12243033
> 
> 赞同：1
> 
> 时间：2012-09-03T06:36:55.793
> 
> 标签：c#, wpf, window, icons, titlebar

我想向 WPF 窗口标题栏添加一个图标，但我的图标比标题栏接受的图标的固定大小（16x16）宽一点有没有办法向标题栏添加更宽的图标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T07:43:54.473

这是不可能的，因为 Windows 处理标准窗口镶边。您必须做一个自定义窗口并更换镀铬。[例如这个](http://www.dreamincode.net/forums/topic/121576-c%23-wpf-custom-title-bar-tutorial/)或看看[这个](http://www.codeproject.com/Articles/30062/WPF-Non-Client-Area-Design-Techniques-For-Custom-W)。

# asp.net-mvc-3 - 不想在 kendoUI 编辑器中编辑数据

> ID：12243034
> 
> 赞同：0
> 
> 时间：2012-09-03T06:36:59.433
> 
> 标签：asp.net-mvc-3, visual-studio-2010, kendo-ui

我正在使用 kendoui 编辑器。我正在将数据加载到编辑器中。我想让它只可读。使其不可编辑。如何使编辑器内的数据不可编辑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T22:46:35.620

为什么要使用编辑器来显示只读数据？

为什么不在 KendoUI 编辑器下创建一个单独的文件并将其用于只读信息。

然后，您可以根据需要在编辑器和 div 之间切换可见性。

# .net - 用于 .NET 开发的 Windows 8 上的重大变化？

> ID：12243037
> 
> 赞同：3
> 
> 时间：2012-09-03T06:37:08.700
> 
> 标签：.net, visual-studio

我不确定我是否做错了什么，但当我在 .NET 框架中使用一些最简单的功能时，我发现 Windows 8 发生了重大变化。我的一台机器是带有 Visual Studio 2010 高级版的 Windows 7 X64，另一台是带有完全相同的 Visual Studio 的 Windows 8 X64。Win7 / Win8 系统都是作为 MSDN 订阅者下载的，所以它们都是官方的。但是对于以下代码：

```
static void Main(string[] args)
{
    byte[] dataBytes = new byte[256 * 256 * 4 + 256];
    MemoryStream resultStream = new MemoryStream();
    DeflateStream deflateStream = new DeflateStream(resultStream, CompressionMode.Compress);
    deflateStream.Write(dataBytes, 0, dataBytes.Length);
    Console.WriteLine(resultStream.Length);//2330

    Bitmap a = new Bitmap(256, 256);
    MemoryStream memoryStream1 = new MemoryStream();
    a.Save(memoryStream1, ImageFormat.Png);
    byte[] byteArray1 = memoryStream1.ToArray();
    Console.WriteLine(byteArray1.Length);//1275

    Console.Read();
} 
```

它在 Window 7 上返回 2330/1275，但在 Windows 8 上返回 0/384。代码相同，都在 .NET Framework 4 Client Profile 下。

所以我做错了什么，或者它是 Windows 8 上的重大变化？

首先十分感谢。

* * *

感谢您的所有帮助。对于第一种情况，我尝试了以下代码

```
 byte[] dataBytes = new byte[256 * 256 * 4 + 256];
        MemoryStream resultStream = new MemoryStream();
        DeflateStream deflateStream = new DeflateStream(resultStream, CompressionMode.Compress);
        deflateStream.Write(dataBytes, 0, dataBytes.Length);
        deflateStream.Close();
        Console.WriteLine(resultStream.ToArray().Length); 
```

我在 Windows7 上得到 2338，在 Windows8 上得到 271。因此，Windows 8 似乎确实做了一些优化以使结果流更小。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T07:58:42.660

[您应该关闭并处置](https://stackoverflow.com/questions/7524903/should-i-call-close-or-dispose-for-stream-objects)压缩器流，以确保它已将所有数据写入底层流。

在两个系统上尝试这个：

```
byte[] dataBytes = new byte[256 * 256 * 4 + 256];

using(MemoryStream resultStream = new MemoryStream())
{
    using(DeflateStream deflateStream = new DeflateStream(resultStream, CompressionMode.Compress)
        deflateStream.Write(dataBytes, 0, dataBytes.Length);

    Console.WriteLine(resultStream.Length); // ?
} 
```

第二个代码部分必须在其他系统上有 PNG 压缩差异。从 1275 -> 流大小下降趋势来看，可能工作得更好。

# android - 我可以在 SQLite Android 的表中插入多少行？

> ID：12243039
> 
> 赞同：3
> 
> 时间：2012-09-03T06:37:21.197
> 
> 标签：android, sqlite, csv, rows, import-from-csv

我有一个 50 万行的 CSV 文件。我必须将 CSV 文件的所有行插入到 SQLite Android 中创建的表中。我想知道我可以在 SQLite 的任何表中插入多少行？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-03T06:41:34.280

从 sqlite3 文档：

> 表中的最大行数
> 
> 表中的理论最大行数为 264（18446744073709551616 或大约 1.8e+19）。由于将首先达到 14 TB 的最大数据库大小，因此无法达到此限制。一个 14 TB 的数据库最多可以容纳大约 1e+13 行，并且只有在没有索引并且每行包含非常少的数据的情况下。

有关限制，请参阅此[问题](http://www.sqlite.org/limits.html)[，](https://stackoverflow.com/questions/784173/what-are-the-performance-characteristics-of-sqlite-with-very-large-database-files)有关某些性能特征，请参阅此问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T06:39:42.930

随心所欲。理论上，没有限制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-25T18:38:39.913

根据您的设备性能，这是合理的。随着大小的增加，您需要更多的 RAM 和处理能力来运行查询。不幸的是，存储不仅仅是重要的检索和处理也很重要......

# delphi - 是否可以更改 TScreenTipsWindow 的 BiDi 模式？

> ID：12243041
> 
> 赞同：1
> 
> 时间：2012-09-03T06:37:30.683
> 
> 标签：delphi

我想`TScreenTipsManager`在我的应用程序中显示办公室风格的提示窗口，但到目前为止，我无法访问 private 成员`FWnd: TScreenTipsWindow`来更改它，`BiDiMode`因为它被声明为**private**。我可以创建 的后代`TScreenTipsWindow`，更改它`BiDiMode`，然后将其传递给`ScreenTipsManager`事件`OnGetScreenTipWinClass`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T07:01:12.270

是的，这完全没问题。这就是[`OnGetScreenTipWinClass`](http://docwiki.embarcadero.com/Libraries/en/Vcl.ScreenTips.TScreenTipsManager.OnGetScreenTipWinClass)活动的目的。您只需将自己的[`TScreenTipsWindowClass`](http://docwiki.embarcadero.com/Libraries/en/Vcl.ScreenTips.TScreenTipsWindowClass)类后代传递给`ScreenTipWinClass`事件参数，该类将用于实例化提示窗口。

如果您不处理该事件或更改其参数中的类，则默认[`TScreenTipsWindow`](http://docwiki.embarcadero.com/Libraries/en/Vcl.ScreenTips.TScreenTipsWindow)类将用于提示窗口。

# android - 在android中实现向一组联系人发送短信？

> ID：12243043
> 
> 赞同：1
> 
> 时间：2012-09-03T06:38:01.923
> 
> 标签：android, sms

在 Android 中，我发现我们使用 `android.telephony.SmsManager`函数 void 发送短信`sendTextmessage(..)`，带有字段`destinationAddress = contact number`。

例子：

```
SmsManager sm = SmsManager.getDefault(); 
String destinationAddress = "9508170711";
sm.sendTextMessage(destinationAddress, null, "Test SMS Message", null, null); 
```

如果我必须向从电话簿中检索到的一组联系人发送短信，使用什么实现/功能？如果我们使用相同的功能`sendTextmessage(..)`..应该`destinationAddress`是什么？

# pdf - 是否可以在 Ghostscript 中为 PDF 的每一页添加水印

> ID：12243044
> 
> 赞同：9
> 
> 时间：2012-09-03T06:38:03.773
> 
> 标签：pdf, jpeg, ghostscript, watermark, postscript

我转换*PDF -> 许多 JPEG*和*许多 JPEG -> 许多 PDF*使用`ghostscript`. 我需要在每个转换后的 JPEG (PDF) 页面上添加水印文本。是否可以仅使用 Ghostscript 和 PostScript？

我发现的唯一方法：

> gswin32c -q -sDEVICE=pdfwrite -dBATCH -dNOPAUSE -sOutputFile=output.pdf watermark.ps input.pdf

但这会`watermark.ps`在`output.pdf`.

我可以直接在输出 PDF 页面上执行此操作吗？

我可以直接在输出 JPEG 页面上执行此操作吗？

```
<<
   /BeginPage
   { gsave
       /Helvetica_Bold 120 selectfont
       .85 setgray 130 70 moveto 50 rotate (Sample) show
     grestore
   } bind
>> setpagedevice 
```

如果我使用`/EndPage`而不是`/BeginPage`- 它说不`setpagedevice`适用......

如何重新制作这个脚本`/EndPage`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-26T07:26:51.787

评论有点太大了，所以我添加了一个新答案。EndPage 过程（请参阅 PostScript 语言参考手册的第 441 页）在堆栈上采用两个附加参数，一个到目前为止发出的页面计数，以及一个原因代码。

您可以使用页面计数来做有趣的事情，例如双面打印，或者只标记偶数页或其他什么，但我假设在这种情况下您不想要它，所以您只需从堆栈中“弹出”它。

原因代码告诉您为什么发出页面，您可能也不在乎，所以您只需弹出该值。

最后，EndPage 必须向解释器返回一个布尔值，说明是否传输页面（这允许您做其他有趣的事情，比如只打印前 10 页等等）。

因此，您首先需要删除两个值，执行您的代码并返回一个布尔值。相当琐碎：

```
<<
   /EndPage
   { pop pop %% *BEFORE* gsave as that puts a gsave object on the stack
     gsave
     /Helvetica_Bold 120 selectfont
     .85 setgray 130 70 moveto 50 rotate (Sample) show
     grestore
     true %% transmit the page, set to false to not transmit the page
   } bind
>> setpagedevice 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-08-07T16:25:19.430

接受的答案是为我插入页面。除了水印，页面都是空白的。如果您遇到这种情况，请尝试在此处添加 2eq 位

```
<<
   /EndPage
   {
     2 eq { pop false }
     {
         gsave      
         /Helvetica_Bold 120 selectfont
         .85 setgray 130 70 moveto 50 rotate (Sample) show
         grestore
         true
     } ifelse
   } bind
>> setpagedevice 
```

我发现以下网站为我指明了正确的方向

[http://habjan.blogspot.com/2013/10/how-to-programmatically-add-watermark.html](http://habjan.blogspot.com/2013/10/how-to-programmatically-add-watermark.html)

这是上述文件保存为 watermark.ps 和 gswin32c 引用 ghostscript exe 的调用语法

```
gswin32c -dBATCH -dNOPAUSE -q -sDEVICE=pdfwrite -sOutputFile=watermarked.pdf watermark.ps original.pdf 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T07:11:35.007

我不知道你说的“直接”是什么意思。正如您所发现的，让 PostScript 解释器在每页的基础上执行多种操作是可能的。PostScript 毕竟是一种编程语言。

我建议从页面设备字典中的 /BeginPage 和/或 /EndPage 过程开始。这些允许您在每一页的开头或结尾执行任意 PostScript。

如果您定义 /BeginPage 过程，那么它将在输入程序的任何标记操作*之前*执行，如果您定义 /EndPage，那么它将在输入程序的标记操作*之后*执行（逐页（.

这使您可以让自己的标记位于程序标记的“下方”或“上方”。

# android - 在平板电脑中设置为全屏的触摸视频视图

> ID：12243046
> 
> 赞同：0
> 
> 时间：2012-09-03T06:38:10.497
> 
> 标签：android, android-layout, android-intent, android-emulator

我是 android 新手，在 Android 中开发了一个小应用程序。

在我的应用程序中，当我在触摸时拉伸视频视图时正在播放视频，它应该设置为全屏。任何人都可以建议它，怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T09:37:25.527

//将你的父布局设置为Relativelayout

```
<VideoView android:id="@+id/videoview"
             android:layout_width="fill_parent"
             android:layout_alignParentRight="true"
             android:layout_alignParentLeft="true"
             android:layout_alignParentTop="true"
             android:layout_alignParentBottom="true"
             android:layout_height="fill_parent">
    </VideoView> 
```

//这里的alignparent属性是做到这一点的重要角色。

```
 android:layout_alignParentRight="true"
                 android:layout_alignParentLeft="true"
                 android:layout_alignParentTop="true"
                 android:layout_alignParentBottom="true" 
```

# javascript - 在 jquery ui 中使用更改关键字

> ID：12243050
> 
> 赞同：0
> 
> 时间：2012-09-03T06:39:00.210
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-autocomplete

我正在尝试使用代码使用 jquery UI 自动完成来运行自动搜索选项的查询，

```
$("#srchBox").autocomplete({
 source: "http://localhost:8080/cleo-primer/rest/elements/search?uid=1"
}); 
```

当我运行它时，它会发送查询 `GET http://192.168.2.243:8080/cleo-primer/rest/elements/search?uid=1&term=in`，，

但原始查询应该是`GET http://192.168.2.243:8080/cleo-primer/rest/elements/search?uid=1&query=in`，

查询后的部分是我们在搜索框中输入的内容。是否可以将单词“term”更改为“query”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T06:43:31.813

更改`callback`功能并处理响应：

```
$("#srchBox").autocomplete({
    source: function(request, response) {
        $.get('http://192.168.2.243:8080/cleo-primer/rest/elements/search', {
          query: request.term,
          uid: 1
        }, function(data) {
            // process data
        });
    }
}).data("autocomplete")._renderItem = function(ul, item) {
    $(ul).attr('id', 'search-autocomplete');
       return $("<li class=\""+item.type+"\"></li>")
       .data( "item.autocomplete", item )
       .append("<a href=\""+item.url+"\">"+item.title+"</a>").appendTo(ul);
}; 
```

# ios - 究竟哪些 iOS 设备支持区域监控？

> ID：12243051
> 
> 赞同：12
> 
> 时间：2012-09-03T06:39:03.693
> 
> 标签：ios, cllocationmanager, device, regions, clregion

从我可以从[Apple 示例区域监控代码](http://developer.apple.com/library/ios/#samplecode/Regions/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010726)的运行时要求中理解，区域监控可在 iPhone 4、iPad 2 Wifi + 3G 或更高版本上使用。所以我假设它在 3G 的 iPad1 或 iPhone 3G/3GS 上不可用。

这是一个正确的解释吗？我无法对此进行测试，因为我没有所有这些设备，也找不到有关此的官方文档。

PS：我知道我可以通过调用`regionMonitoringAvailable`方法在代码中检查它，但我需要这些信息来决定我的应用程序的架构，所以我需要预先知道这一点。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-05T19:28:02.453

从我在启用区域监控的设备上工作的经验来看，您是正确的。

目前，仅以下设备（运行 iOS 5.x）支持区域监控。

*   iPhone 4
*   iPhone 4S
*   iphone 5
*   iPad 2、3 和 4（新 iPad）3G/4G
*   iPad 3 和 4（新 iPad）
*   （希望对 iPod Touch 型号的区域监控提供一些反馈）

在 WWDC 上有人告诉我，随着 iOS 6 中位置图块的出现，区域监控将出现在所有 iOS 6 设备上。然而，到目前为止，我的测试只让我获得了支持 Wifi 的 iPad 3。我还没有能够在 iPhone 3GS 上进行测试，但我并没有屏住呼吸。他们可能会在以后的测试版或发布时启用此功能，但我并不乐观。

希望这些信息有所帮助。

# django - django 运行硒测试

> ID：12243052
> 
> 赞同：0
> 
> 时间：2012-09-03T06:39:09.557
> 
> 标签：django, selenium

我在使用单独的 django 命令运行 selenium 测试时遇到问题。默认的“test”命令查看“tests”文件夹并运行 unittests ok。问题是，我想创建文件夹“seleniumtests”并放置测试文件以使用命令“test_selenium”运行它们。我希望这个命令与默认的 django “test” 一样，但在另一个目录中。
带有硒的tests.py：

```
from django_liveserver.testcases import LiveServerTestCase
from selenium.webdriver.firefox.webdriver import WebDriver

class MySeleniumTests(LiveServerTestCase):
#    fixtures = ['test-data.json']

@classmethod
def setUpClass(cls):
    cls.selenium = WebDriver()
    super(MySeleniumTests, cls).setUpClass()

@classmethod
def tearDownClass(cls):
    super(MySeleniumTests, cls).tearDownClass()
    cls.selenium.quit()

def test_admin(self):
    self.selenium.get(self.live_server_url +'/admin/')
    self.assertIn("Django", self.selenium.title) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T06:45:43.040

按照本教程了解如何将测试放入文件夹：[http ://www.pioverpi.net/2010/03/10/organizing-django-tests-into-folders/](http://www.pioverpi.net/2010/03/10/organizing-django-tests-into-folders/)

一般来说：

```
from [Project Name].[App Name].tests.[filename] import *  
from [Project Name].[App Name].seleniumtests.[selenium] import *  

#starts the test suite  
__test__= {  
           'your_django_tests': [filename],
            'selenium': [selenium],
           } 
```

# css - 如何在 JSP 上打印账单

> ID：12243055
> 
> 赞同：2
> 
> 时间：2012-09-03T06:39:25.160
> 
> 标签：css, jsp, printing, billing

我正在尝试为我的客户打印账单。

我一开始用过`window.print()`，但问题是我无法设置打印机的撕纸，有时对齐会改变。

因此，作为替代方案，我需要一个打印账单的解决方案。有人可以推荐一些吗？

我可以使用小程序来连接打印机吗？我已经经历了其中的大部分，它告诉我应该使用报告，如果是这样的话，哪个对我更好。我使用点阵打印机进行打印作业。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T12:24:17.443

[我想您需要使用css-media-types](http://www.w3schools.com/css/css_mediatypes.asp "CSS 媒体类型的基础教程")使您的页面对打印特定的 CSS 友好。

您可以将其包含在您的 JSP 中：

```
<link rel="stylesheet" type="text/css" href="only_4_print.css" media="print" /> 
```

注意该`media="print"`属性，CSS 不会应用于用户正在查看的普通页面，但是当他尝试打印页面时，输出将具有来自该文件的 CSS。

如果你想在你的 JSP 中直接包含用于打印的 CSS，它可能看起来像这样：

```
@media print {
     body {font: 12pt georgia,serif;}
     h1 {font-size: 18pt;}
     h2 {font-size: 15pt; color: #000;}
} 
```

所以你需要为同一个页面有两个 CSS 文件：

1.  在浏览器上正常显示
2.  用于打印页面（即应用于打印页面的 CSS）

希望这可以帮助。

这里有更多链接可以帮助您更好地理解这种方法：

1.  [媒体特定 CSS 简介](http://www.usabledevelopment.com/cssmedia#intro)
2.  [如何创建一个简单的打印](http://www.onextrapixel.com/2009/05/05/how-to-create-a-simple-print-css-for-your-site/)
3.  [CSS 媒体类型](http://www.javascriptkit.com/dhtmltutors/cssmedia.shtml "另一个 CSS 媒体类型的好链接，还有一个小教程")
4.  [一篇关于打印 CSS 的好文章](http://www.alistapart.com/articles/goingtoprint/)

# c# - 制作 TabPage 的模板？

> ID：12243061
> 
> 赞同：0
> 
> 时间：2012-09-03T06:40:16.423
> 
> 标签：c#, .net, winforms

我将 Tab 控制器与 TabPages 一起使用，并为所有 TabPages 提供相同的外观和感觉，我想扩展现有的 TabPage，在其中放置一些通用控件，然后将其用作新 TabPages 的父级，以便所有 TabPages 可能具有相同的外观。

我有一点 .Net 经验，但对 WinForms 了解不多，请建议我如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T16:29:33.403

I suggest that you create a UserControl as a prototype content. Then, use [Visual Inheritance](http://msdn.microsoft.com/en-us/library/1z3efhd2.aspx) to extend the UserControl when you need to create a content for the next TabPage.

# regex - 正则表达式匹配模式与（可选）内部相同的模式

> ID：12243064
> 
> 赞同：0
> 
> 时间：2012-09-03T06:40:31.847
> 
> 标签：regex, nested

所以我必须在代码中找到所有函数调用，例如：_t（anything）也可以为这些调用提供参数，例如：“_t（anything，_t（anything2））”，对于这样的例子，我只想匹配顶部调用_t() 有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T07:10:47.187

编程就是要为工作选择正确的工具，而正则表达式并不是只匹配函数顶层部分的正确工具。然而，编写一个程序来获取顶层部分是一项相当简单的任务，这是一个用 C++ 编写的程序，它将完成此任务。它将解析存储在变量“str”中的字符串，并找到存储在“func”中的函数的顶层部分，因此在这种情况下它会找到“_t(”

```
#include <iostream>
#include <string>

using namespace std;

int main () {
    string str = "_t(another, anything)\nanything0 _t(anything, _t(anything2))\n_t(anything)\n_m(this, should, not, match)\n_t(anything1, anything2)";
    string func = "_t(";

    int pos = 0;
    int lastPos = 0;

    while (pos != -1) {
      pos = str.find (func, lastPos);

      if (pos == -1) break;

      int depth = 1;
      string tmp;

      pos += func.size ();
      while (depth > 0) {
        if (str[pos] == '(') {
          depth++;
        }
        else if (str[pos] == ')') {
          depth--;
        }

        if (depth != 0) {
          tmp += str[pos];
        }
        pos++;
      }

      cout << tmp << endl;

      lastPos = pos;
    }

    return 0;
} 
```

给定以下输入（存储在字符串“str”中）：

```
_t(another, anything)
anything0 _t(anything, _t(anything2))
_t(anything)
_m(this, should, not, match)
_t(anything1, anything2) 
```

以下是输出：

```
another, anything
anything, _t(anything2)
anything
anything1, anything2 
```

* * *

**更新：** 我确实觉得，在处理嵌套项目时，正则表达式并不是最好的解决方案，但是，这可能适合您的需要：

```
_t\(([\w\d _\(\),]+)?\) 
```

这是一个用 PHP 编写的示例（正如您在另一条评论中所说的那样）：

```
<?php 
$pattern = '/_t\(([\w\d _\(\),]+)?\)/';
$subject = '_t(another, anything)\nanything0 _t(anything, _t(anything2))\n_t(anything)\n_m(this, should, not, match)\n_t(anything1, anything2)';

preg_match_all ($pattern, $subject, $matches);

print_r ($matches);
?> 
```

输出如下：

```
Array
(
    [0] => Array
        (
            [0] => _t(another, anything)
            [1] => _t(anything, _t(anything2))
            [2] => _t(anything)
            [3] => _t(anything1, anything2)
        )

    [1] => Array
        (
            [0] => another, anything
            [1] => anything, _t(anything2)
            [2] => anything
            [3] => anything1, anything2
        )

) 
```

这似乎与您在 $matches[1] 数组中查找的内容相匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T06:51:39.300

我不确定您是只想匹配函数名称还是删除参数（包括非顶级调用）。无论如何[，这里](http://regexr.com?3215f)是一个替换正则表达式，它输出：

```
_t()
_t()
_t() 
```

和

```
_t(anything, _t(anything2))
_t(anything)
_t(anything1, anything2) 
```

作为输入：

```
/(_t\().*(\))/\1\2/g 
```

# objective-c - 在 Xcode 中启动动画

> ID：12243066
> 
> 赞同：2
> 
> 时间：2012-09-03T06:40:38.890
> 
> 标签：objective-c, ios

我正在尝试开始在 Xcode 中编写一些动画。我试图谷歌它，但我没有几个解决方案。

一种是 Quartz 2D，另一种是核心动画。

我不确定哪个更好，更容易使用和学习。我的动画应该是线条动画（2d）。我需要两个点之间的这条动画线。制作容易吗？我很困惑，因为我不知道从哪里开始。您能给我一些建议或代码示例吗？非常感谢你！

*添加描述

我想定义 10 个点。像这样：

```
1        2         3

4        5         6

7        8         9

0 
```

当我有用户输入时，例如 37459 行应该在这些数字之间进行动画处理。

线应该有渐变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T08:13:45.940

听起来像 Quartz2D 是要走的路。使用 Core Animation，您可以定义一个对象，然后以各种方式对其进行转换，默认情况下，该转换是动画的。

但是，您需要做的是自己为它设置动画，因为您不是简单地变换对象。您需要跟踪当前正在“增长”的行以及已经完全动画化的行。随着时间的推移，您需要在其端点之间绘制更多的增长线。您可能可以使用一个简单的计时器来完成所有这些操作，该计时器在 0.0 和 1.0 之间增加进度（就像这样`NSAnimation`做一样），并使用它来定义当前增长的线有多长。

# licensing - 我可以在 GPLv2 下重新分发 LGPLv2.1 许可代码吗？

> ID：12243070
> 
> 赞同：1
> 
> 时间：2012-09-03T06:40:54.793
> 
> 标签：licensing, gpl, lgpl

我有一个代码，它基于 LGPLv2.1 类的代码。（不仅仅是链接，而是直接复制代码片段。）

我想在 GPLv2.0 下分发它。

这种组合会带来一些问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T07:54:09.577

LGPL 2.1 第 3 节说“您可以选择将普通 GNU 通用公共许可证的条款而不是本许可证的条款应用于库的给定副本。”

# r - r 使用 paste 或 paste0 时保持 0.0

> ID：12243071
> 
> 赞同：5
> 
> 时间：2012-09-03T06:41:01.803
> 
> 标签：r, paste, digits, significant-digits

这是一个简单的问题，但它开始让我烦恼，我找不到解决方案....

我希望能够在使用 paste 或 paste0 时将其用作输出时保留 0.0 所以如果我有以下内容：

```
y <- c(-1.5,-1.0,-0.5,0.0,0.5,1.0,1.5)
> y
[1] -1.5 -1.0 -0.5  0.0  0.5  1.0  1.5
paste0("x",y,"x") 
```

我得到：

```
[1] "x-1.5x" "x-1x"   "x-0.5x" "x0x"    "x0.5x"  "x1x"    "x1.5x" 
```

但想要：

```
[1] "x-1.5x" "x-1.0x"   "x-0.5x" "x0.0x"    "x0.5x"  "x1.0x"    "x1.5x" 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-03T06:47:28.353

您可以使用`sprintf()`：

```
paste0("x", sprintf("%.1f", y), "x") 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-03T07:02:31.493

还有`formatC`：

```
paste0("x", formatC(y, digits = 1, format = "f"), "x") 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-03T06:56:25.393

还有`format`和`drop0trailing`

```
paste0('x',format(y,drop0Trailing = F),'x') 
```

而且，如果您真的只想`0`替换为`0.0`, 而不是 (`1.0`或`-1.0`) 那么

```
paste0('x',gsub(x = gsub(x = format(y, drop0trailing = T),'0$', '0.0'),' ',''),'x')
## [1] "x-1.5x" "x-1x"   "x-0.5x" "x0.0x"  "x0.5x"  "x1x"    "x1.5x" 
```

或者，正如@mrdwab 建议的那样（并且打字较少）

```
paste0('x',gsub("^0$", "0.0", as.character(y)),'x') 
```

# android - 自工厂重置android以来的时间

> ID：12243073
> 
> 赞同：1
> 
> 时间：2012-09-03T06:41:10.217
> 
> 标签：android, broadcastreceiver

我正在尝试记录设备运行多长时间的可靠时间。我已经尽力了`BOOT_COMPLETED` `BroadcastReceiver`。由于如果应用程序被强制停止，所有接收器都会被删除，这种方法对我不起作用。

我想知道自上次执行出厂重置以来是否有办法获得 Android 设备的正常运行时间？

清单：

```
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <receiver android:name=".TestReceiver" 
        android:enabled="true" 
        android:exported="true" 
        android:label="Test Receiver" >
         <intent-filter>
            <action android:name="android.intent.action.BOOT_COMPLETED" />
        </intent-filter>
    </receiver>
</application> 
```

收货人代码：

```
public class TestReceiver extends BroadcastReceiver {
@Override
public void onReceive(Context context, Intent intent) {

    Log.i("bootreceiver", intent.toString());
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-10T15:04:15.630

对于任何达到此目标的人实际上正在寻找标题问题的答案：

您可以尝试获取其中一个系统包的安装时间，例如：

```
long curTime = System.currentTimeMillis();
long installTime = getPackageManager().getPackageInfo("com.android.providers.applications", 0).firstInstallTime;
long timeDiff = curTime - installTime; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T08:30:30.367

您在清单中定义权限时遇到问题。它应该是这样的：

```
<uses-sdk
    android:minSdkVersion="7"
    android:targetSdkVersion="16" />
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED"/>

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <receiver android:name=".TestReceiver" 
        android:enabled="true" 
        android:exported="true" 
        android:label="Test Receiver" >
         <intent-filter>
            <action android:name="android.intent.action.BOOT_COMPLETED" />
        </intent-filter>
    </receiver>
</application> 
```

您应该在 Uses 块中定义您的应用程序的权限。以及您添加到广播的权限 - 它不会添加您接收它的权限，它只是强制任何其他可以触发您的广播的应用程序拥有此权限。在你的情况下没用。

希望能帮助到你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T06:48:55.453

我不太确定你想如何从出厂重置计算正常运行时间，而不是从上次重启计算。但是，如果您要存储一些数据并检查它是否在启动时被删除 - 它可能会起作用。

但是，我认为将 BroadcastReceiver 用于 BOOT_COMPLETED 是一个好主意。并且在强制关闭后删除接收器通常是错误的。它仅适用于来自代码的接收器。

相反，您可以在 Manifest 中定义您的接收器 - [http://developer.android.com/guide/topics/manifest/receiver-element.html](http://developer.android.com/guide/topics/manifest/receiver-element.html) 如果您愿意 - 它将在每次重启时执行，不管任何事情。

祝你好运

# python - python：通过增加数字更改xml节点值

> ID：12243074
> 
> 赞同：0
> 
> 时间：2012-09-03T06:41:19.897
> 
> 标签：python, tags, numbers

我有一个 XML 文档“data.xml”：我需要编写 python 脚本，它可以用新数字替换所有带有标签“Num”的值节点并将其写回磁盘。不同的是，新的值不是字符串，而是一系列不断增加的数字，比如1000、1100、1200、1300……我在网上做过研究，大多数代码示例都是字符串替换，而不是这种变量替换。有人有好主意吗？示例如下：

更改前：

`<Param><Num>123</Num></Param> <Param><Num>123</Num></Param> <Param><Num>123</Num></Param>`

更改后：

`<Param><Num>1000</Num></Param> <Param><Num>1100</Num></Param> <Param><Num>1200</Num></Param>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T07:12:44.457

[使用lxml](http://lxml.de/)库很容易实现

```
from lxml import  objectify

class Parser(object):
    def __init__(self, tree, counter_start, counter_interval):
        self.tree = tree
        self.root = tree.getroot()
        self.counter_start = counter_start
        self.counter_interval = counter_interval

    def parse(self):
        counter = self.counter_start
        # for loop to iter voltage items
        # using counter += counter_interval to set the value for example
        # save the tree within the parser class or in the handle function

def handle(file):
    f = open(file)
    tree = objectify.parse(f)
    parser = Parser(tree, 1000, 100)
    parser.parse()
    f.close()

handle("/Desktop/bar.XML") 
```

# ruby-on-rails - 如何将使用 CarrierWave 和 Rails 上传的文件链接到模型？

> ID：12243076
> 
> 赞同：0
> 
> 时间：2012-09-03T06:41:27.637
> 
> 标签：ruby-on-rails, carrierwave

我是一名前 MS Access 开发人员，我是 RoR / Web 开发的新手。我的头缠在这个轴上。这是我正在尝试做的事情：

对于我的第一个应用程序，我正在创建一个 CRM，该 CRM 将部分跟踪商业资产列表。我希望单个属性具有文件存储功能，可以将文档和图像上传到 Amazon S3 并与特定属性相关联。这些文件将包括图片。我希望我的应用程序显示上传到 S3 的与当前显示的属性相关联的图片。

我对此有几个问题，但我想我现在会坚持一个。在 CarrierWave 自述文件中，它描述了您应该如何在表中创建一个新字段，然后将该字段挂载到 Carrierwave，例如，上传到系统的单个图像（头像）将与该特定用户相关联. 图像与用户的这种“关联”是自动发生的。（Rails 中有很多事情会神奇地发生。）就我而言，我希望针对一个特定的属性存储多个文件，所以我不确定我是否可以只使用一个字段来实现该目的。

在 Access 中，我将创建一个单独的文件表，该表将列出所有上传的文件以及每个文件相关的属性。该表将被“手动”填充（使用 VB）。

在 CarrierWave 中，我究竟该怎么做？我要装什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-28T20:28:13.283

像这样的东西：

```
rails g uploader Photo
rails g model Image property_id:integer photo:string 
```

```
class Property < ActiveRecord::Base
  has_many :images
end

class Image < ActiveRecord::Base
  belongs_to :property
  mount_uploader :photo, PhotoUploader
end 
```

# android - 如何在 Android 应用中对 Facebook 照片发表评论？

> ID：12243078
> 
> 赞同：1
> 
> 时间：2012-09-03T06:41:37.923
> 
> 标签：android, facebook, facebook-graph-api

目前，我正在努力在 facebook 墙上对照片发表评论。

任何人都可以指导我在 facebook 照片上发表评论的 graph-api 吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T07:05:39.453

所以，如果你想发布一些东西，你需要使用`POST`request for `facebook-graph-api`。

Facebook 有一个图结构，因此，每个事物都与其他事物有联系。

您需要在照片上发布消息。行。

如果您有`access_token`，您可以`POST`请求`Graph-API`.

好的，毕竟，只需为 request: 创建一个 URL`https://graph.facebook.com/PHOTO_ID/comments?message=MESSAGE&access_token=ACCESS_TOKEN`并使用`POST`：

`POST https://graph.facebook.com/PHOTO_ID/comments?message=MESSAGE&access_token=ACCESS_TOKEN`

[在发布部分](http://developers.facebook.com/docs/reference/api/)查看更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T10:03:27.343

1.  添加图标

您可以从应用程序的仪表板管理图标：[https ://developers.facebook.com/apps/APP_ID/appdetails](https://developers.facebook.com/apps/APP_ID/appdetails)

# java - .aar 文件的附加文件

> ID：12243085
> 
> 赞同：0
> 
> 时间：2012-09-03T06:41:56.300
> 
> 标签：java, web-services, axis2

我正在使用 Netbeans 为 Axis2 开发一些 Web 服务。

问题是生成的`.aar`文件仍然需要一些附加文件（一些简单`.txt`文件和可能的`.jar`依赖项）才能运行。

我试图将它们复制到`WEB-INF/services`文件夹中，但没有运气。
我应该把这些文件放在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T08:58:57.517

附加文件应该是axis2`bin`文件夹。

# java - 无法使用 selenium 2.0 读取搜索结果

> ID：12243087
> 
> 赞同：1
> 
> 时间：2012-09-03T06:41:57.650
> 
> 标签：java, selenium

我正在使用 JDev 运行一个 java 转换的 selenium 2.0 脚本。我有一个案例，我打开一个模式窗口并搜索一个类似的字符串`%SomeText%`，它会在它下面产生一个记录，w/n 相同的窗口。现在，我想确保它产生了我正在寻找的文本，如果我得到该文本，请在模态窗口中单击“确定”。任何想法如何做到这一点......我正在做以下事情：

```
//this is working
driver.findElement(By.id("_afrFilterpt1_afr__UISatr_afr_0_afr_AT1_afr__ATp_afr_t2_afr_c3::content")).sendKeys(Keys.RETURN); 

//this doesn't work, text given here is part of the text which is returned after search
assertTrue((driver.findElements(By.xpath("contains(text(),'Approved:Create Grade Ladder (AU_New Grade Ladder205, 2012-08-31)')")).size() > 0) ? true:false); 

//this works if above line is deleted, else this also does not work
driver.findElement(By.xpath("//button[text()='OK']")).click(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T14:38:39.067

您可以编写第 2 行的另一种方法是 driver.getPageSource().contains(text);

其次，您的 xpath 不正确，因为它正在寻找包含“已批准：创建等级阶梯（AU_New Grade Ladder205, 2012-08-31）”作为参考节点的根节点尚未提供给 xpath。

简而言之，您正在寻找看起来像这样的标记：

```
<html>
  Approved:Create Grade Ladder (AU_New Grade Ladder205, 2012-08-31)
</html> 
```

如果您从 w3schools 学习 xpath，这可能听起来有点令人困惑，但它很像目录。

默认情况下，您的引用从 / 开始，因此，标签必须包含您正在搜索的文本。除此之外， text() 只给你当前节点的文本，而不是它下面的节点。

举个例子

```
<html>
  <body>
   <div>Some text <span>with a span</span>.</div>
  </body>
</html> 
```

如果你这样做了，`driver.findElements(By.xpath("//div[contains(text(),'Some text with a span.')]")).size();`你会发现它等于 0。

如果您只使用 xpath 选择文本节点，您就会明白为什么。见下图： ![Xpath 示例](../Images/b44349f28c302e9c55ed6da85ff2a688.png)

# excel - Excel - 需要创建一个下拉列表（数据验证）是指两个或多个列

> ID：12243089
> 
> 赞同：1
> 
> 时间：2012-09-03T06:42:10.443
> 
> 标签：excel

我想限制 excel sheet 中的值，它应该只接受不同 excel 文件中某些列中可用的值。例如：

Excel1.xls

```
Col1  Col2  
A      E  
B      F  
C 
```

Excel2.xls

Col3 *应该只接受 Col1,Col2 中可用的 (A,B,C,E,F)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-03T06:51:58.640

感谢您提出这个问题 - 早些时候我不确定答案。但现在，我肯定会这样做。

我建议您从这里检查完整的解决方案：http: [//www.contextures.on.ca/xlDataVal02.html](http://www.contextures.on.ca/xlDataVal02.html)

# android - 默认显示gridview的最后一项

> ID：12243090
> 
> 赞同：1
> 
> 时间：2012-09-03T06:42:11.987
> 
> 标签：android, position, selection, android-gridview

我想默认显示gridview的最后一项，以防万一。网格视图中的项目。

我尝试了 gridview 属性 setSelection，但这对我没有帮助。

请指导我。

# css - 当 html 设置为 100% 时 IE 不允许滚动

> ID：12243092
> 
> 赞同：1
> 
> 时间：2012-09-03T06:42:56.170
> 
> 标签：css, internet-explorer, internet-explorer-8

在即，当我尝试使我的背景在正文和 html 标记高度上使用 100% 扩展页面长度时，它消除了滚动的能力。有什么办法我可以做到这两点吗？我正在 ie8 中对此进行测试，但我不确定问题是否存在于其他地方。如果需要该页面的链接，请请求它，我可以发布它。我的背景是一个 CSS 渐变，无论内容高度如何，它都会在所有浏览器上填充页面。然而，在 ie 中，内容高度决定了背景的高度。我查了一下，这可以通过

```
 html, body {height:100%;}//this results in a loss in the ability to scroll on pages with lengthy content but does produce a background that fills the page with short content. 
```

或者

```
html, body {min-height:100%}//this results in a background that falls short of the full page when short content is present 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T06:45:16.090

添加`overflow-y: scroll;`到您的 html 标记。

# asp.net - Visual Studio 2012 javascript & css 参考

> ID：12243094
> 
> 赞同：1
> 
> 时间：2012-09-03T06:43:01.083
> 
> 标签：asp.net, visual-studio-2012

刚刚使用默认模板站点尝试了 VS2012，我对如何包含 javascript 和 css 的概念完全陌生。在 MasterPage 中，使用 scriptmanager 和 scriptreference 包含的 javascript 接缝。

还有一些文件，如 package.config。

有人可以解释一下应该如何使用它。如何包含我自己的 javascript 和 css。如何将 jquery ready() 添加到 site.master？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T06:52:19.773

要将 css 文件包含到您的站点中`<head>`，请在页面部分添加一个链接标签，对于 javascript 添加一个脚本标签。

```
<head>
    <link href="file.css" type="text/css" /> // This wil include your css file
     // For JavaScript
      <script src="jquery.js" type="text/javascript" ></script> // This wil include your java script file
     <script type="text/javascript" >
          // write Your JavaScript code here

         // For using jquery code, add jquery method inside the script tag, example below

         $("document").ready( {
               // your jquery code
           });

     </script>
</head> 
```

[脚本管理器](http://msdn.microsoft.com/en-us/library/bb398863%28v=vs.100%29.aspx)用于不同的目的：

1) 使用 Ajax 控件

2）当我们在客户端访问网络服务时

3）页面方法等

来自 MSDN 关于 ScriptManager：

> 您必须在页面上使用 ScriptManager 控件来启用 ASP.NET 的以下 Microsoft Ajax 功能：
> 
> Microsoft Ajax 库的客户端脚本功能，以及您想要发送到浏览器的任何自定义脚本。有关详细信息，请参阅使用 Microsoft Ajax 库创建自定义客户端脚本。
> 
> 部分页面渲染，使页面上的区域可以独立刷新而无需回发。ASP.NET UpdatePanel、UpdateProgress 和 Timer 控件需要 ScriptManager 控件才能支持部分页面呈现。
> 
> 用于 Web 服务的 JavaScript 代理类，使您能够使用客户端脚本来访问 ASP.NET 页面中的 Web 服务和特殊标记的方法。它通过将 Web 服务和页面方法公开为强类型对象来做到这一点。
> 
> 用于访问 ASP.NET 身份验证、配置文件和角色应用程序服务的 JavaScript 类。

# css - 如何在背景中设置照片

> ID：12243096
> 
> 赞同：-2
> 
> 时间：2012-09-03T06:43:12.130
> 
> 标签：css, html

最近，我经常看到背景图片是照片的网站。如何做同样的事情并且图片在不同的分辨率下被拉伸以收缩？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-03T07:06:14.240

```
 html or body { 
                background: url(images/bg.jpg) no-repeat center center fixed; 
                -webkit-background-size: cover;
                -moz-background-size: cover;
                -o-background-size: cover;
                background-size: cover;
filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='.myBackground.jpg', sizingMethod='scale');
-ms-filter: "progid:DXImageTransform.Microsoft.AlphaImageLoader(src='myBackground.jpg', sizingMethod='scale')";
            } 
```

更多教程 最佳资源[完美整页背景图片](http://css-tricks.com/perfect-full-page-background-image/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T07:10:24.130

我希望你看起来像这样：- [http://jsfiddle.net/GNxqK/embedded/result/](http://jsfiddle.net/GNxqK/embedded/result/)

我们可以通过以下方式实现这个目标：-

```
background-size: cover; 
```

并且图像将根据页面的主体进行调整....根据演示....

# python - python性能与freebasic相比

> ID：12243103
> 
> 赞同：-2
> 
> 时间：2012-09-03T06:43:39.363
> 
> 标签：python, performance, freebasic

我发现我的 python 代码真的很慢，使用 8 分钟完成，而 freebasic 需要 1 分钟，
任何人都可以建议一些优化

首先创建 digit_array["a","b","c","d","e","f","g","h","i","j"]。
除以，得到余数，一次又一次，将其存储到 array_index[] 中，1 作为最后一位。
else if 和 else 代码来处理未完成除法的最后一次迭代。
将最大索引存储为变量 i。
然后将array_index从最大值循环到1，将其映射到digit_array，
然后生成一个字符串（代码注释）

补充说：20120903
我这样做是为了用 digit_array 中的字母组合创建字符串，所以我可以跳过一些不常见的字母，如 'q' 'z' 或一些数字如 '4'
currpos 可以让我从上次开始
x 让我调整总数digit_array 中的字母，可以是 a-z+A-Z+0-9+' '
currpos_end 1024th 会给出，
如果 digit_array 是 ['0','1','2','3','4 ','5','6','7','8','9'] , x = 10
如果 digit_array 是 ['a','b','c','d',' e','f','g','h','i','j'] , x = 10
如果 digit_array 是 ['0','1','2','3', 则结果 1467, '4','5','6','7','8'] , x = 9
如果 digit_array 为 ['0','1','2','3','4','5','6', 则结果为 2000, '7'] , x = 8
现在我可以打印结果了，只是性能下降

python 3代码，

```
 digit_array=[]
    for i in range(0, 10): # range(10) ----> 0 1 2 3 4 ... 9
        digit_array.append("")
    digit_array[0] = "a"
    digit_array[1] = "b"
    digit_array[2] = "c"
    digit_array[3] = "d"
    digit_array[4] = "e"
    digit_array[5] = "f"
    digit_array[6] = "g"
    digit_array[7] = "h"
    digit_array[8] = "i"
    digit_array[9] = "j"

    array_index=[]
    for i in range(0, 51):
        array_index.append(0)

    currpos = 0
    currpos_end = pow((26+10+1),5)
    #currpos_end = 1024
    print (currpos)
    currpos2 = currpos
    x = 10 # ubound digit_array + 1, ("0","1") binary then x = 2
    print ()

    for currpos in range(currpos, currpos_end):

        currpos2 = currpos
        i = 1

        while True :
            if currpos2 > x:
                array_index[i] = currpos2 % x
                currpos2 = int(currpos2 / x)
            elif currpos2 == x:
                array_index[i] = 0
                i += 1
                array_index[i] = 1
                break
            else:
                array_index[i] = currpos2
                break
            i += 1

        print (i, " . ", currpos, currpos2)

        for j in range(i , 1, -1):
        #    break   #uncomment this and comment next 3 lines for speed testing  
            print (digit_array[array_index[j]], end='')
        print (digit_array[array_index[1]], end='')
        print ()

    try:
        input(".")
    except:
        pass 
```

freebasic代码，

```
 Dim digit_array(0 To 100) As String
    digit_array(0) = "a"
    digit_array(1) = "b"
    digit_array(2) = "c"
    digit_array(3) = "d"
    digit_array(4) = "e"
    digit_array(5) = "f"
    digit_array(6) = "g"
    digit_array(7) = "h"
    digit_array(8) = "i"
    digit_array(9) = "j"

    Dim array_index(0 To 50) As ULongInt
    For i As Integer = 0 To 50
        array_index(i) = 0
    Next

    Dim As ULongInt currpos
    Dim As ULongInt currpos_end
    Dim As ULongInt currpos2
    Dim As ULongInt x = 10 'ubound digit_array + 1, ("0","1") binary then x = 2
    Dim As ULongInt i

    currpos = 0
    currpos_end = (26+10+1)^5
    'currpos_end = 1024
    Print currpos
    currpos2 = currpos
    Print

    For currpos = currpos To currpos_end

        currpos2 = currpos
        i = 1

        Do
            If currpos2 > x Then
                array_index(i) = currpos2 Mod x
                currpos2 = CULngInt(currpos2 / x)
            ElseIf currpos2 = x Then
                array_index(i) = 0
                i += 1
                array_index(i) = 1
                Exit Do
            Else
                array_index(i) = currpos2
                Exit Do
            EndIf
            i += 1
        Loop

        'Print i; " . "; currpos; " "; currpos2

        '''first = i Until 1 = last
        For j As Integer = i To 1 Step -1
            'Print digit_array(array_index(j));
        Next
        'Print

        'Sleep
    Next

    Print "."
    Sleep 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T02:47:53.483

thx[如何将任何基数的整数转换为字符串？](https://stackoverflow.com/questions/2267362/convert-integer-to-a-string-in-a-given-numeric-base-in-python)

```
def calculation():
    while 1:
        global s, n
        r = n % base
        if r == 0: return
        s = digits[r] + s
        n = n // base
        if n == 0: return

#                  .          .          .
digits = "X0123456789"
digits = "X23456789AJKQ" #first digit not use, remain for calculation
currpos = 0
currpos = 30941 #22222 base13 13^4+13^3+13^2+13+1
#currpos_end = 371292 #QQQQQ base13 13^5-1
currpos_end = pow((26+10+1),5)
currpos_end = 371292
#currpos_end = 1024
base = len(digits)
print (currpos)
print (base)
print ()

for currpos in range(currpos, currpos_end):
    n = currpos
    s = ""
    calculation()
    if s == "":
        continue
    print (s, " . ", currpos, " . ", n)
    #do something here with s 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T08:16:13.490

为了好玩，我试图弄清楚你想在代码中做什么，但放弃了。

无论如何，这里有一些你的代码清理了一下：

```
digit_array=[
             "a",
             "b",
             "c",
             "d",
             "e",
             "f",
             "g",
             "h",
             "i",
             "j"
             ]

array_index = [0] * 51 

#currpos_end = pow((26+10+1),5)
currpos_end = 1024

x = 10 # ubound digit_array + 1, ("0","1") binary then x = 2
for currpos in range(currpos_end):
    i = 1
    while True :
        if currpos > x:
            array_index[i] = currpos % x
            currpos = int(currpos / x)

        elif currpos == x:
            array_index[i] = 0
            i += 1
            array_index[i] = 1
            break

        else:
            array_index[i] = currpos
            break
        i += 1

result = "".join([digit_array[i] for i in array_index])
print(result) 
```

这将产生结果：

```
adcabaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa 
```

# android - 如何以编程方式将音乐文件添加到android中的sdcard

> ID：12243108
> 
> 赞同：0
> 
> 时间：2012-09-03T06:44:05.027
> 
> 标签：android, mp3, sd-card, ringtone

我不知道如何将音乐文件添加到 SD 卡中。然后我必须选择该音乐文件并将其分配为特定联系人的铃声

# c++ - 什么情况下应该使用C++临时？

> ID：12243109
> 
> 赞同：0
> 
> 时间：2012-09-03T06:44:07.543
> 
> 标签：c++

在什么情况下我应该在 C++ 中使用临时对象？这个概念有什么好处？

任何人都可以用一些例子来解释这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T18:45:48.620

当值不需要超出语句块或函数定义的范围时，应使用临时变量。

有例外：

1.  该变量也在语句块的范围之外使用，例如`for`循环中的索引。
2.  该变量的大小足以超出本地存储（即堆栈）。
3.  大型只读数据，例如字符文本。
4.  该变量需要作为参考返回给客户端。

定位变量（范围）的一些经验法则或指南：

*   声明变量尽可能接近它们的用法。
*   在语句块内部和外部引用的变量都应该被排除在语句块之外。
*   函数之间共享的变量应该在任何文件之外的文件中声明为“文件本地范围”。
*   巨大的变量应该使用动态内存。
*   比简单 POD 更大的变量应该使用动态内存并通过智能指针传递。

HTH。

# android - 裁剪图像并显示

> ID：12243112
> 
> 赞同：0
> 
> 时间：2012-09-03T06:44:28.487
> 
> 标签：android

我从 Internet 获取图像，并将图像显示到 ImageView。请让我知道有什么方法可以压缩图像（到特定大小/尺寸）并将其显示在 Imageview 上，因为图像是用户上传的图像。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T06:48:43.503

您可以使用`BitmapFactory.Options`类将图像裁剪为任何大小。

您可以使用以下内容：

```
BitmapFactory.Options options = new BitmapFactory.Options();
options.inJustDecodeBounds = true;
options.inSampleSize = 8; // 1/8th of actual image.
BitmapFactory.decodeResource(getResources(), R.id.myimage, options);
int imageHeight = options.outHeight;
int imageWidth = options.outWidth;
String imageType = options.outMimeType; 
```

有关更多信息，请参阅[此](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T06:52:15.440

如果您需要以编程方式进行，第一个答案是正确的。然而，ImageView 也有一个选项来控制如何裁剪或重新缩放图像。有一个 API ImageView.setScaleType(type)。如果您固定 ImageView 的尺寸，那么您可以通过此方法控制图像如何适合该区域。请看这个链接： http: [//developer.android.com/reference/android/widget/ImageView.html#setScaleType](http://developer.android.com/reference/android/widget/ImageView.html#setScaleType(android.widget.ImageView.ScaleType) (android.widget.ImageView.ScaleType )

# c# - 在 C# 中从查询中获取值到标签

> ID：12243118
> 
> 赞同：0
> 
> 时间：2012-09-03T06:44:36.933
> 
> 标签：c#, sql

如何从查询结果中获取值到标签？

我有两个标签，一个是**labelName**，另一个是**labelDepartment**

因此，当我运行查询时，如何从查询结果中获取值并使用 c# 将其分配给标签？

这是我的 Sql 命令：

```
 "SELECT tbl_staff.staffName,tbl_department.department 
    FROM tbl_staff,tbl_logs,tbl_department 
    WHERE tbl_staff.userID = tbl_logs." + listStaff.SelectedValue + " and tbl_staff.idDepartment = tbl_department.idDepartment;" 
```

这是 C# 中的当前代码

```
//Open SQL connection

SqlConnection openCon = new SqlConnection(connString);
openCon.Open();

string SQL = string.Format("SELECT tbl_staff.staffName,tbl_department.department FROM tbl_staff,tbl_logs,tbl_department WHERE tbl_staff.userID = tbl_logs.userID and tbl_staff.idDepartment = tbl_department.idDepartment" + listStaff.SelectedValue + ";");

SqlCommand command = new SqlCommand(SQL);
SqlDataReader reader = command.ExecuteReader();

while(reader.Read())
{
    labelName.Text = reader["tbl_staff.staffName"];
    labelDepartment.Text = reader["tbl_department.department"];
} 
```

注意：我们的记录将只返回一行.. MS SQL 和 C#.. 感谢您的帮助...；）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T07:10:01.453

```
 string name = null;
        string department = null;
        string listStaff = "MylistStaff";

        string sql =  "SELECT tbl_staff.staffName,tbl_department.department " +
            "FROM tbl_staff,tbl_logs,tbl_department " +
            "WHERE tbl_staff.userID = tbl_logs." + listStaff + " and tbl_staff.idDepartment = tbl_department.idDepartment;";
        //change this connection string... visit www.connectionstrings.com
        string connString = "Server=localhost; Database=myDatabaseName; Trusted_Connection=Yes";
        using (SqlConnection conn = new SqlConnection(connString))
        {
            conn.Open();
            using (SqlCommand command = new SqlCommand(sql,conn))
            {
                SqlDataReader reader = command.ExecuteReader();
                while (reader.Read())
                {
                    name = reader[0] as string;
                    department = reader[1] as string;
                    //break for single row or you can continue if you have multiple rows...
                    break;
                }
            }
            conn.Close();
        } 
```

然后可以轻松地将部门和 listStaff 应用于标签文本，例如：

DepartmentLabel.Text = 部门；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T06:56:56.253

您需要通过 SQLDataReader 读取结果

```
SQLCommand command = new SQLCommand("your sql string here");
SQLDataReader reader = command.executeReader();
while(reader.read())
{
 set your label values here with reader["cloumn"]
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T06:48:27.850

您可以使用类读取查询返回的行的内容`DataReader`。它具有获取单个值的方法，或者您可以对每一行进行迭代。告诉我您的查询返回了多少行，以便我提供准确的代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T07:10:38.777

检查这个 - 同时设置您的连接字符串以及此代码

```
SQLCommand command = new SQLCommand();
command.CommandText = " SELECT tbl_staff.staffName,tbl_department.department 
    FROM tbl_staff,tbl_logs,tbl_department 
    WHERE tbl_staff.userID = tbl_logs." + listStaff.SelectedValue + " and tbl_staff.idDepartment = tbl_department.idDepartment ";

SQLDataReader reader = command.executeReader();

while(reader.read())
{
 labelName.Text = reader.GetString(0);
 labelDepartment.Text = reader.GetString(1);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-03T07:24:10.560

一种方法：

```
private void getData()
{
    DataTable dt = new DataTable();
    SqlConnection connection = new SqlConnection("YOUR CONNECTION STRING HERE");
    connection.Open();
    SqlCommand sqlCmd = new SqlCommand(" SELECT tbl_staff.staffName,tbl_department.department 
FROM tbl_staff,tbl_logs,tbl_department 
WHERE tbl_staff.userID = tbl_logs." + listStaff.SelectedValue + " and tbl_staff.idDepartment = tbl_department.idDepartment", connection);
    SqlDataAdapter sqlDa = new SqlDataAdapter(sqlCmd);

    sqlCmd.Parameters.AddWithValue("@username",user);
    sqlDa.Fill(dt);
    if (dt.Rows.Count > 0)
    {
           lable.Text = dt.Rows[0]["staffName"].ToString(); //Where "staffName" is ColumnName 

    }
        connection.Close();
} 
```

建议使用非行内查询的存储过程来避免 SQL 注入攻击。

[存储过程示例](http://www.c-sharpcorner.com/UploadFile/gtomar/storedprocedure12052007003126AM/storedprocedure.aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-04T10:18:52.263

```
//Open SQL connection

SqlConnection openCon = new SqlConnection(connString);
openCon.Open();

string SQL = string.Format("SELECT tbl_staff.staffName,tbl_department.department FROM tbl_staff,tbl_logs,tbl_department WHERE tbl_staff.userID = tbl_logs.userID and tbl_staff.idDepartment = tbl_department.idDepartment" + listStaff.SelectedValue + ";");

SqlCommand command = new SqlCommand(SQL);
SqlDataReader reader = command.ExecuteReader();

while(reader.Read())
{
    labelName.Text = reader["tbl_staff.staffName"].ToString();
    labelDepartment.Text = reader["tbl_department.department"].ToString();
} 
```

转换类型是您在代码中留下的内容....

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-11-11T09:44:14.147

尝试仅更改此

```
SqlConnection openCon = new SqlConnection(connString);
openCon.Open();

string SQL = string.Format("SELECT tbl_staff.staffName,tbl_department.department FROM tbl_staff,tbl_logs,tbl_department WHERE tbl_staff.userID = tbl_logs.userID and tbl_staff.idDepartment = tbl_department.idDepartment" + listStaff.SelectedValue + ";");

SqlCommand command = new SqlCommand(SQL);
SqlDataReader reader = command.ExecuteReader();

while(reader.Read())
{
    labelName.Text = reader["tbl_staff.staffName"].toString();
    labelDepartment.Text = reader["tbl_department.department"].toString();
}` 
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2012-09-03T06:54:41.743

使用您的查询填充数据集，然后从数据集中检索值并将其分配给您的标签。

假设您的数据集是 DS，那么：

```
labelName.Text=DS.Tables[0]["tbl_staff.staffName"].tostring();
labelDepartment.Text=DS.Tables[0]["tbl_department.department"].tostring(); 
```

希望这可以帮助。

# java - 如何设置 GWT 对话框的样式？

> ID：12243120
> 
> 赞同：3
> 
> 时间：2012-09-03T06:44:44.843
> 
> 标签：java, gwt

GWT 没有为 DialogBox 提供任何样式，而且没有任何样式看起来很糟糕。有没有一些简单的方法来获得类似[GWT 展示页面](http://gwt.google.com/samples/Showcase/Showcase.html#!CwCheckBox)上显示的内容？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T06:44:44.843

事实证明，解决方案非常简单。在您的主 HTML 文件中包含以下 CSS，然后下载[http://gwt.google.com/samples/Showcase/showcase/gwt/clean/images/hborder.png](http://gwt.google.com/samples/Showcase/showcase/gwt/clean/images/hborder.png)、[http://gwt.google.com/samples/ Showcase/showcase/gwt/clean/images/vborder.png](http://gwt.google.com/samples/Showcase/showcase/gwt/clean/images/vborder.png)和[http://gwt.google.com/samples/Showcase/showcase/gwt/clean/images/circles.png](http://gwt.google.com/samples/Showcase/showcase/gwt/clean/images/circles.png)到您的项目中。

```
.gwt-PopupPanelGlass {
  background-color: #000;
  opacity: 0.3;
  filter: alpha(opacity=30);
}

.gwt-DialogBox .Caption {
  background: #F1F1F1;
  padding: 4px 8px 4px 4px;
  cursor: default;
  font-family: Arial Unicode MS, Arial, sans-serif;
  font-weight: bold;
  border-bottom: 1px solid #bbbbbb;
  border-top: 1px solid #D2D2D2;
}
.gwt-DialogBox .dialogContent {
}
.gwt-DialogBox .dialogMiddleCenter {
  padding: 3px;
  background: white;
}
.gwt-DialogBox .dialogBottomCenter {
  background: url(images/hborder.png) repeat-x 0px -2945px;
  -background: url(images/hborder_ie6.png) repeat-x 0px -2144px;
}
.gwt-DialogBox .dialogMiddleLeft {
  background: url(images/vborder.png) repeat-y -31px 0px;
}
.gwt-DialogBox .dialogMiddleRight {
  background: url(images/vborder.png) repeat-y -32px 0px;
  -background: url(images/vborder_ie6.png) repeat-y -32px 0px;
}
.gwt-DialogBox .dialogTopLeftInner {
  width: 10px;
  height: 8px;
  zoom: 1;
}
.gwt-DialogBox .dialogTopRightInner {
  width: 12px;
  zoom: 1;
}
.gwt-DialogBox .dialogBottomLeftInner {
  width: 10px;
  height: 12px;
  zoom: 1;
}
.gwt-DialogBox .dialogBottomRightInner {
  width: 12px;
  height: 12px;
  zoom: 1;
}
.gwt-DialogBox .dialogTopLeft {
  background: url(images/circles.png) no-repeat -20px 0px;
  -background: url(images/circles_ie6.png) no-repeat -20px 0px;
}
.gwt-DialogBox .dialogTopRight {
  background: url(images/circles.png) no-repeat -28px 0px;
  -background: url(images/circles_ie6.png) no-repeat -28px 0px;
}
.gwt-DialogBox .dialogBottomLeft {
  background: url(images/circles.png) no-repeat 0px -36px;
  -background: url(images/circles_ie6.png) no-repeat 0px -36px;
}
.gwt-DialogBox .dialogBottomRight {
  background: url(images/circles.png) no-repeat -8px -36px;
  -background: url(images/circles_ie6.png) no-repeat -8px -36px;
}
* html .gwt-DialogBox .dialogTopLeftInner {
  width: 10px;
  overflow: hidden;
}
* html .gwt-DialogBox .dialogTopRightInner {
  width: 12px;
  overflow: hidden;
}
* html .gwt-DialogBox .dialogBottomLeftInner {
  width: 10px;
  height: 12px;
  overflow: hidden;
}
* html .gwt-DialogBox .dialogBottomRightInner {
  width: 12px;
  height: 12px;
  overflow: hidden;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T10:44:11.027

另一种方法是扩展 DialogBox 类并在 UiBinder 中设置它的样式。它避免改变，甚至避免拥有全局风格。

您可以使用`@external`关键字导入预定义的样式（否则由于混淆而隐藏）。

[DialogBox Javadoc](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/DialogBox.html)解释了哪个样式元素对应于 DialogBox的每个部分。

```
<ui:style>
  @external .gwt-DialogBox .Caption;
  .gwt-DialogBox .Caption {
    font-weight: bold;
    text-align: center;
  }
</ui:style>

<g:HTMLPanel>
  <g:SimplePanel ui:field="mainPanel"></g:SimplePanel>
  <g:Button ui:field="okButton">OK</g:Button>
</g:HTMLPanel> 
```

例如，相应的类将是：

```
public class MyDialogBox extends DialogBox {

  @UiField SimplePanel mainPanel;
  @UiField Button okButton;

  interface Binder extends UiBinder<Widget, MyDialogBox> {}

  public MyDialogBox() {
    super.setWidget(GWT.<Binder> create(Binder.class).createAndBindUi(this));
  }

  @UiHandler("okButton")
  void onDismiss(ClickEvent e) {
    hide();
  }

  @Override
  public void setWidget(Widget widget) {
    mainPanel.setWidget(widget);
  }

  @Override
  public void center() {
    super.center();
    okButton.setFocus(true);
  }
} 
```

然后，您可以像任何其他小部件一样实例化和使用 MyDialogBox。

# qemu - Kvm/Qemu 最大虚拟机计数限制

> ID：12243129
> 
> 赞同：2
> 
> 时间：2012-09-03T06:45:24.437
> 
> 标签：qemu, kvm, libvirt

对于一个研究项目，我试图在 Ubuntu 服务器 12.04 下的 KVM 中使用 python libvirt 绑定启动尽可能多的 VM。所有虚拟机在启动后都设置为空闲，并使用最少的内存。最多我能够在单个主机上启动 1000 个 VM，此时内核（Linux 3x）变得无响应，即使 CPU 和内存使用量都远未接近极限（48 核 AMD，128GB 内存。）之前这样，在几百个 VM 之后，启动过程逐渐变慢。

我认为这一定与 KVM/Qemu 驱动程序有关，因为 linux 内核本身在处理这几个进程时应该没有问题。但是，我确实读到 Qemu 驱动程序现在是多线程的。关于这种缓慢的原因可能是什么的任何想法 - 或者至少我应该从哪里开始寻找？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T08:25:45.883

您正在使用 qemu-kvm 正确启动所有 VM，并且在 100 多个 VM 之后，您会觉得它变得越来越慢。所以当你觉得它停止使用 kvm 时，只需使用 qemu 启动，我希望你会看到同样的缓慢。我的猜测是，在这么多虚拟机之后，KVM（硬件支持）就会耗尽。因为 KVM 只是用于添加少量硬件寄存器的软件层。所以 KVM 可能是这里的罪魁祸首。

还有这个实验的目的是什么？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-02T08:40:49.427

The following virtual hardware limits for guests have been tested. We ensure host and VMs install and work successfully, even when reaching the limits and there are no major performance regressions (CPU, memory, disk, network) since the last release (SUSE Linux Enterprise Server 11 SP1).

Max. Guest RAM Size --- 512 GB

Max. Virtual CPUs per Guest --- 64

Max. Virtual Network Devices per Guest --- 8

Max. Block Devices per Guest --- 4 emulated (IDE), 20 para-virtual (using virtio-blk)

Max. Number of VM Guests per VM Host Server --- Limit is defined as the total number of virtual CPUs in all guests being no greater than 8 times the number of CPU cores in the host

for more limitations of KVm please refer [this](http://doc.opensuse.org/products/draft/SLES/SLES-kvm_sd_draft/cha.kvm.limits.html) document link

# android - 图像上的网格

> ID：12243130
> 
> 赞同：0
> 
> 时间：2012-09-03T06:45:25.810
> 
> 标签：android, android-layout, grid

有没有办法将网格视图平移到水平方向。我正在图像上实现网格视图。因此，每当我缩放图像网格时，也应该在所有方向上进行缩放和平移，这样我就可以选择图像的特定区域。

我用谷歌搜索了网格的平移，但没有得到满意的答案。请帮我一些示例代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T07:14:59.260

我也搜索了一些标准方法来缩放图像视图以外的视图，但没有找到任何东西。所以，我为此做了一个解决方法，它有效。
要缩放视图，您可以在启用了 fillAfter 属性的视图上应用缩放动画。

您可以这样做：

```
 ScaleAnimation scale;
    final float MAX_SCALE_FACTOR = 5f;
    float currentScaleFactor = 1;
    public static final long DURATION = 500;

    GridView grid = (GridView)findViewById(R.id.grid);

    public void scaleMyView()
    {
        if(currentScaleFactor <= MAX_SCALE_FACTOR)
        {
             DecelerateInterpolator interpolator = new  DecelerateInterpolator();
             scale = new ScaleAnimation(currentScaleFactor, currentScaleFactor*1.2f, 
                            currentScaleFactor, currentScaleFactor*1.2f);
             currentScaleFactor *= 1.2;
             scale.setDuration(DURATION);
             scale.setInterpolator(interpolator);
             scale.setFillEnabled(true);
             scale.setFillAfter(true);

             grid.startAnimation(scale);
       }
  } 
```

每次调用此方法时，都会缩放视图并保存尺寸。您可以减少动画持续时间以提供即时缩放的效果。现在您可以调用此方法 onPan 或 onTouch 来应用缩放。

我希望这将有所帮助。

# asp.net-mvc-3 - 如何获取和更改 EF 对象集元素？

> ID：12243131
> 
> 赞同：0
> 
> 时间：2012-09-03T06:45:25.810
> 
> 标签：asp.net-mvc-3, entity-framework

我在 mvc3 中有数据库第一个应用程序。有 Rating 表，它有整数类型的**ID**和**Value**属性。计数始终为 5。我想输入新值，将其设置为 Ratings 的最后一个元素，并且每个元素的值都传递到元素的值之前。价值观从最后一个滑到第一个。

```
public ActionResult UpdateRating( int newValue )
{

var rating0 = db.Ratings.ElementAt( 0 );
var rating1 = db.Ratings.ElementAt( 1 );
var rating2 = db.Ratings.ElementAt( 2 );
var rating3 = db.Ratings.ElementAt( 3 );
var rating4 = db.Ratings.ElementAt( 4 );

rating0.Value = rating1.Value;
rating1.Value = rating2.Value;
rating2.Value = rating3.Value;
rating3.Value = rating4.Value;
rating4.Value = newValue ;

db.Ratings.Attach( rating0 );
db.ObjectStateManager.ChangeObjectState( rating0 , EntityState.Modified );
db.Ratings.Attach( rating1 );
db.ObjectStateManager.ChangeObjectState( rating1 , EntityState.Modified );
db.Ratings.Attach( rating2 );
db.ObjectStateManager.ChangeObjectState( rating2 , EntityState.Modified );
db.Ratings.Attach( rating3 );
db.ObjectStateManager.ChangeObjectState( rating3 , EntityState.Modified );
db.Ratings.Attach( rating4 );
db.ObjectStateManager.ChangeObjectState( rating4 , EntityState.Modified );
db.SaveChanges();
...
} 
```

我收到错误 db.Ratings.ElementAt(); 线。我该怎么做这个操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T06:55:30.213

用。。。来代替

```
public ActionResult UpdateRating( int newValue )
{

List<Rating> ratings = db.Ratings.OrderBy(r => r.id)
                        .ToList();

ratings[0].Value = ratings[1].Value;
ratings[1].Value = ratings[2].Value;
ratings[2].Value = ratings[3].Value;
ratings[3].Value = ratings[4].Value;
ratings[4].Value = newValue;

db.SaveChanges();
} 
```

# php - php array , delete a value if matching

> ID：12243137
> 
> 赞同：1
> 
> 时间：2012-09-03T06:45:41.973
> 
> 标签：php, arrays

I have an array like the following:

```
 5-9-21, 
 5-10-22,
 5-10-22,
 5-11-23,
 3-17-29,
 3-19-31,
 3-19-31,
 1-25-31,
 7-30-31 
```

I wil get a value dynamically. Then I have to compare that value with the middle part of array.

```
9,
10,
10,
11,
17,
19,
19,
25,
30 
```

If it's matching then I have to remove the whole part from array. For example. If I am getting a value dynamically is 19, then I wil match with that array. And 3-19-31 is there two times. So it will remove all 3-19-31\. After exploding with "-".

How can I do this?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T06:50:21.477

You could use `array_filter` to get a new array.

```
$new_arr = array_filter($old_arr, function($var) use ($input) {
  $ret = explode('-', $var);
  return !(isset($ret[1]) && $ret[1] === $input);
}); 
```

Or use a normal loop and then use unset to remove the values.

```
for ($arr as $key => $value) {
  $ret = explode('-', $value);
  if (isset($ret[1]) && $ret[1] === $input) {
    unset($arr[$key]);
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T06:56:25.067

```
foreach($array as $key=>$value){
    $parts = explode('-', $value);
    if($parts[1] == $search) {
        unset($array[$key]);
    }
} 
```

Or if your search is an array

```
foreach($array as $key=>$value){
    $parts = explode('-', $value);
    if(in_array($parts[1], $search)) {
        unset($array[$key]);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T06:52:34.137

You can try this...

```
$arr; // your array
$value = 19;

foreach ($arr as $key=>$a)
{
    if(strpos($a, "-".$value."-") !== false)
        unset($arr[$key]);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T06:54:23.553

There are few ways you can do this. If you are going to have only one digit always in the first eliment of your triplet, the following code should work;

```
$triplet_array = array(5-9-21, 5-10-22, 5-10-22, 5-11-23, 3-17-29, 3-19-31, 3-19-31, 1-25-31, 7-30-31);
$i = 0;
foreach($triplet_array as triplet){
  $middle = substring($triplet,2,0);
  if($middle == $my_dynamic_value) unset($triplet_array[$i]);
  $i++
} 
```

but, if the first part is not going to contain only one digit always;

```
foreach($triplet_array as triplet){
  $this_triplet = explode('-',$triplet);
  if($this_triplet[1] == $my_dynamic_value) unset($triplet_array[$i]);
  $i++
} 
```

hope this helps :-)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-03T06:55:10.720

use this function, this will give you all the keys which are matched:

```
function custom_array_search($keyword,$array){
  if(!is_array($array)){
    return false;
  }
  $ret_keys = array();
  foreach($array as $key=>$value){
    if(strpos("-{$keyword}-",$value)!==false){
      $ret_keys[] = $key;
    }
  }
  return $ret_keys;
} 
```

This function will give you all keys in an array.

Now you can delete those i.e. unset all keys from that array. :)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-03T06:55:52.417

```
<?php
$arr = array('5-9-21', '5-10-22', '5-10-22', '5-11-23', '3-17-29', '3-19-31', '3-19-31', '1-25-31', '7-30-31');
$k = '10';
#print_r($arr);
foreach ($arr as $key => $value)
{
    $t = explode('-',$value);
    if($t[1] == $k)
    {
        unset($arr[$key]);
        #echo "deleted<br>";
    }
}
#print_r($arr);
?> 
```

# marklogic - MoreLikeThis 在 Marklogic 中的工作原理

> ID：12243139
> 
> 赞同：3
> 
> 时间：2012-09-03T06:45:47.730
> 
> 标签：marklogic

Lucene 有一个“更像这样”的特性，可以找到类似的文档。我将如何使用 MarkLogic 做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T18:02:08.073

尝试`cts:similar-query`：[http ://docs.marklogic.com/5.0doc/docapp.xqy#display.xqy?fname=http://pubs/5.0doc/apidoc/SearchBuiltins.xml&category=SearchBuiltins&function=cts:similar-query](http://docs.marklogic.com/5.0doc/docapp.xqy#display.xqy?fname=http://pubs/5.0doc/apidoc/SearchBuiltins.xml&category=SearchBuiltins&function=cts:similar-query)

另请查看[http://docs.marklogic.com/5.0doc/docapp.xqy#display.xqy?fname=http://pubs/5.0doc/xml/search-dev-guide/similar.xml](http://docs.marklogic.com/5.0doc/docapp.xqy#display.xqy?fname=http://pubs/5.0doc/xml/search-dev-guide/similar.xml)

# cmis - OpenCMIS/dotcmis：如何查找服务器是否具有特定能力？

> ID：12243142
> 
> 赞同：0
> 
> 时间：2012-09-03T06:46:08.623
> 
> 标签：cmis, dotcmis, opencmis

使用[OpenCMIS](http://chemistry.apache.org/java/opencmis.html)（或[dotcmis](http://chemistry.apache.org/dotnet/dotcmis.html)），从存储库中获取 Repository 对象后，如何检查它是否具有特定的能力？

例如，CapabilityChanges 是否设置为`all`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T11:39:58.217

这更好一点：

```
if ( repository.Capabilities.ChangesCapabilities == CapabilityChanges.All ) { ... } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T06:56:04.503

可能有一种更优雅的方式来做到这一点，但现在我正在使用这个：

```
if ( repository.Capabilities.ChangesCapabilities.GetCmisValue().Equals("all") )
  { ... } 
```

# java - Glassfish - 读取文件 - 正确的目录

> ID：12243146
> 
> 赞同：0
> 
> 时间：2012-09-03T06:46:40.770
> 
> 标签：java, path, glassfish, directory

我正在使用 Jersey 和 Glassfish 编写一个 Web 应用程序。我需要加载一个文件。在我的项目中，它位于目录 src/main/resources/example.txt 中。一切都在 Tomcat 中运行，但是当我在 Glassfish 中运行它时，我得到了 FileNotFoundException。它没有找到文件，因为当我尝试在 Glassfish 中获取路径时，它向我显示了 Glassfish 目录：\glassfish3122eclipsedefaultdomain\config\src\main\resources\example.txt，而不是在我获得文件时的项目目录. 我怎样才能改变它？或者有没有办法配置项目以在编译时将文件复制到所需的目录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T06:57:16.950

我是玻璃鱼的新手。但我认为它应该工作。

```
final String instanceRoot = System.getProperty( "com.sun.aas.instanceRoot" );

if (instanceRoot == null)
{
    throw new FileNotFoundException( "Cannot find Glassfish instanceRoot. Is the com.sun.aas.instanceRoot system property set?" );
}

File configurationFolder = new File( instanceRoot + File.separator + glassfishDomainConfigurationFolderName );
File configFile = new File( configurationFolder, fileName ); 
```

# iis - IIS Webdeploy：将文件复制到客户端

> ID：12243147
> 
> 赞同：1
> 
> 时间：2012-09-03T06:46:43.390
> 
> 标签：iis, msdeploy, webdeploy

我正在尝试将一些文件复制到目标文件夹（Webdeploy 应该没有问题），然后我想在客户端（正在启动 msdeploy 进程的计算机）上获取这些文件。似乎有很多关于如何将文件复制到服务器的示例，但我找不到任何关于从服务器获取文件的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T07:22:14.757

MSDeploy 目前不支持您所描述的内容。我能想到的解决方法包括：

*   定义将[`postSync`](http://technet.microsoft.com/en-us/library/dd569089%28v=ws.10%29.aspx)文件复制到可通过 FTP 访问的目录的参数
*   在客户端上安装 MSDeploy 并让服务器触发单独的部署回客户端（这将要求客户端可公开访问）

# java - 如何将分页放入非持久域列表 - grails

> ID：12243151
> 
> 赞同：0
> 
> 时间：2012-09-03T06:47:30.070
> 
> 标签：java, grails, groovy, pagination

嗨，我有一个非持久域的实体列表，因为它具有两个实体的组合属性。我通常使用

```
def c = Case.createCriteria()       
def caseList = c.list(  [max: criteria.max, offset: criteria.offset] 
```

但这在我的列表中不起作用，因为数据的获取是不同的。我必须首先从表 A 中获取数据，然后将其与表 B 中的数据结合起来。然后我循环每个以创建一个新实体。看下面的代码。

```
if(criteria.caseNoteType==0)
        {
            caseNoteList = searchClaimNotesByClaimNote(criteria)
            for (CaseNote n: caseNoteList)
            {
                note = new ClaimNote()
                note.dateAssigned = new SimpleDateFormat("yyyy-MM-dd").format(n.cmCaseIdCmCase.assignedDate) //n.cmCaseIdCmCase.assignedDate
                note.claimOwner = n.cmCaseIdCmCase.employeeIdEmployee.formatName()
                note.caseNoteType = "Claim Notes"
                note.caseNoteTitle = n.caseNoteTitle
                note.noteOwner = n.employeeIdEmployee.formatName()
                note.claimNo = n.cmCaseIdCmCase.id
                note.clientName= n.cmCaseIdCmCase.clientIdClient.formatLastNameFirstNameMiddleInit()
                note.caseNoteText = n.caseNoteText
                note.id = n.id

                claimNotesList.add(note)
            }
            cmcaseList = searchClaimNotesByCaseComments(criteria)
            for (CmCase n: cmcaseList)
            {
                note = new ClaimNote()
                note.dateAssigned = new SimpleDateFormat("yyyy-MM-dd").format(n.assignedDate) // n.assignedDate
                note.claimOwner = n.employeeIdEmployee.formatName()
                note.caseNoteType = "Case Comments"
                note.caseNoteTitle = n.caseTitle
                note.noteOwner = n.employeeIdEmployee.formatName()
                note.claimNo = n.id
                note.clientName= n.clientIdClient.formatLastNameFirstNameMiddleInit()
                note.caseNoteText = n.caseComment
                note.id = n.id
                claimNotesList.add(note)

            }

        }

        def cmCaseListFinal = null
        def cmCaseCount = claimNotesList.size()
        if ('caseNoteType' == criteria.sort  ) {
            cmCaseListFinal = claimNotesList.sort { a, b ->
                if ( 'asc' == criteria.order )  a?.caseNoteType <=> b?.caseNoteType
                else   b?.caseNoteType <=> a?.caseNoteType
            }
        } else if ('dateAssigned' == criteria.sort  ) {
            cmCaseListFinal = claimNotesList.sort { a, b ->
                if ( 'asc' == criteria.order )  a?.dateAssigned <=> b?.dateAssigned
                else   b?.clientIdClient?.dateAssigned <=> a?.dateAssigned
            }
        } else {
            cmCaseListFinal = claimNotesList
        }

        return  cmCaseListFinal

    } 
```

这是使用条件进行搜索的代码。合并的其他实体也是如此。

```
def searchClaimNotesByCaseComments(ClaimNoteSearchCriteria criteria)
{

    log.info ( criteria )
    def c =  CmCase.createCriteria()

    def cmCaseList = c.list([max: criteria.max, offset: criteria.offset] )
    {

        createAlias("clientIdClient", "client")
        createAlias("employeeIdEmployee", "employee")
        createAlias("internalOrgIdInternalOrg", "InternalOrg")

        if ( criteria.clientSsnSearch  != null && criteria.clientSsnSearch.trim() != '' ) {
            criteria.clientSsnSearch = criteria.clientSsnSearch.trim()
            like('client.clientSsnSearch', criteria.clientSsnSearch)
        }
        //C#
        if (  criteria.clientVaFileNbrSearch  != null && criteria.clientVaFileNbrSearch.trim() != '' ) {
            criteria.clientVaFileNbrSearch = criteria.clientVaFileNbrSearch.trim()

            eq ( 'client.clientVaFileNbrSearch',  criteria.clientVaFileNbrSearch.toString()   )

        }
        // Service Number
        if (  criteria.clientMilitaryServiceNbr   != null && criteria.clientMilitaryServiceNbr.trim() != '' ) {
            criteria.clientMilitaryServiceNbr = criteria.clientMilitaryServiceNbr.trim()

            like ( 'client.clientMilitaryServiceNbr', ( criteria.clientMilitaryServiceNbr  as String).trim() + '%'  )

        }
        // Last Name
        if ( criteria.clientLastName != null && criteria.clientLastName != '' ) {

            like ( 'client.clientLastName', (criteria.clientLastName as String).trim() + '%'  )

        }
        // FirstName
        if (  criteria.clientFirstName  != null && criteria.clientFirstName  != ''  ) {

            like ( 'client.clientFirstName',   (criteria.clientFirstName  as String).trim() + '%'  )

        }
        // employeeIdEmployee
        if ( criteria.employeeIdEmployee != null ) {

            eq ( 'employee.id', criteria.employeeIdEmployee )

        }
        //poaStatus
        if ( criteria.intOrgLegalName != null && criteria.intOrgLegalName != '' ) {

            like ( 'InternalOrg.intOrgLegalName',  (criteria.intOrgLegalName  as String).trim() + '%'  )

        }
        if ( criteria.caseNoteText != null  && criteria.caseNoteText != '' ) {

            like( 'caseComment',  (criteria.caseNoteText  as String).trim() + '%'  )
        }

    }

    return cmCaseList

} 
```

这是我的分页代码

```
<div class="gadgetLong">
  <div> <span class="gadgetName"><g:message code="claimSearch.searchResult.label" default="Search Results" /></span><span class="gadgetNumber">${ claimNoteList.size() }</span></div>
   <span class="gadgetNumber">${ claimNoteList.size() }</span>
  <span class="gadgetNumber"> <g:paginate next="Next" prev="Back"
        maxsteps="0" action="sortclaimSearch" 
          total="${ claimNoteList.size() }" /></span>
  </div>
  <div> 
```

我想在不使用创建条件的情况下将分页添加到最终列表，因为它已经超出了搜索范围。有解决办法吗？或者我在做什么？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T14:44:56.220

也许您可以使用一种方法来获取子列表并在视图中将子列表呈现为列表，并将 list.size() 作为总数......也许在服务中是这样的（无论你想要什么）：

```
def getSubList(List objectList, Map params) {
    //verify params
    try {
        params.max = params.max.toInteger()
        params.offset = params.offset.toInteger()
    } catch (Exception exceptionInstance) {
        params.max = 10
        params.offset = 0
    }
    //Verify pagination params... if not you add them
    if (params.max <= 0) {
        params.max = 10
    }
    //Get total size of the list
    def objectInstanceTotal = objectList.size()
    //verify offset.
    if (params.offset < 0 || params.offset > objectInstanceTotal) {
        params.offset = 0
    }
    //Verify the pagination border (don't excess from array border).
    Integer bordeInteger = params.max + params.offset
    if (bordeInteger > objectInstanceTotal) {
        bordeInteger = objectInstanceTotal
    }

    //Extract the sublist based on the pagination.
    def objectSubList = objectList.subList(params.offset, bordeInteger)

    return objectSubList
} 
```

在控制器中：

```
def list = {

   def list = //Define your list

   def subList = service.getSubList(list, params)

   [list: subList, listInstanceTotal: list.size()]
} 
```

在视图中，您一如既往地调用 de list 操作进行分页

希望这可以帮助 ;）

# android - android中的rtmp直播问题

> ID：12243155
> 
> 赞同：0
> 
> 时间：2012-09-03T06:48:13.220
> 
> 标签：android

我正在尝试在 Android 设备中播放 rtmp 直播。

我已经在 webview 中嵌入了 flash 播放器。这是流式传输网址和文件。

**网址：** `rtmp://cp86418.live.edgefcs.net/live`

**文件名：** `CatholicTV-LIVE@17230`

据我所知，flash 应该适用于高于 2.2 的 sdk 版本。流正在播放所有高于 2.2 的设备，例如三星 Galaxy Tab（型号 GT P1010，Sdk 版本 2.2.1），三星 T-Mobile（型号 SGH-T679，Sdk 版本 2.3.5），但奇怪的是就是说，三星王牌（型号 GT-S5830i，SDK 版本 2.3.6）和一些更多的设备 sdk 版本超过 2.2 时没有播放同样的东西。

不播放直播的设备有什么特别之处吗？还是需要更多插件或编码？

有人可以通过分享他们的宝贵建议和建议来帮助我摆脱这种困境吗？

感谢和问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T08:52:38.530

这不是答案，只是为您提供检查 Flash 是否可用的逻辑。

```
private boolean isFlashAvailable(){
    String version;
    try {
        version = getPackageManager().getPackageInfo("com.adobe.flashplayer", 0).versionName;
        Log.d(TAG, "Flash installed version = " + version);
        return true;
    } catch (NameNotFoundException e) {
        Log.d(TAG, "No flash installed!");
        return false;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T06:59:34.507

在清单文件中添加 android:hardwareAccelerated="true"。我的问题就这样解决了。

```
 <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:hardwareAccelerated="true" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T09:21:26.573

我们在安卓版本和视频播放方面也有类似的问题。我认为原因是android版本和硬件的结合。我无法流式传输 Galaxy Ace、Galaxy Mini、ZTE Blade 和其他一些低端设备上的视频，即使是在嵌入在活动中的本机播放器中。共同点是所有设备都具有 android 版本 2.2 或更低版本。当我将 Galaxy Mini 和 Galaxy Ace 升级到 2.3（甚至是非官方 rom）时，我能够流畅地播放它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T10:53:43.390

虽然这不是这个刻录问题的解决方案，但我找到了一个列出闪存支持设备的 url。 [http://www.adobe.com/devnet-apps/flashruntimes/certified-devices.html](http://www.adobe.com/devnet-apps/flashruntimes/certified-devices.html)

并且只有那些设备支持上面 url 中列出的 web 视图中的 flash。希望这也能解决一些问题..

# ruby-on-rails - 完成 rake db:migrate 后如何在 ROR 3.0 中添加新列？

> ID：12243160
> 
> 赞同：1
> 
> 时间：2012-09-03T06:48:27.807
> 
> 标签：ruby-on-rails, database, ruby-on-rails-3, rails-migrations

嗨，我是 Rails 3.0 上的新 ruby​​，我想知道如何创建新的第一列我迁移的文件

我使用创建了迁移

```
rake db:migrate 

class CreateCheckings < ActiveRecord::Migration
  def change

    create_table :checkings do |t|

         t.string :phone, :limit => 20
          t.string  :email 
        t.integer  "country_id"
            t.string   "registration_via"
            t.string   "industry_type", :limit => 2
            t.boolean  "is_admin",              :default => false
            t.boolean  "is_account_blocked",    :default => false   

      t.timestamps
    end
  end
end 
```

现在创建了新表以添加一些列我该如何处理终端请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T06:55:48.590

然后运行 `rails g migration add_column_name_to_table_name column_name:type`或创建一个迁移`rails g migration add_columns_to_tables`

```
def change
    add_column :table_name, :column_name, :type
end 
```

参考[http://guides.rubyonrails.org/migrations.html](http://guides.rubyonrails.org/migrations.html) , [http://api.rubyonrails.org/classes/ActiveRecord/Migration.html](http://api.rubyonrails.org/classes/ActiveRecord/Migration.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T07:41:46.107

在终端

```
rails g migration add_column_name_to_table_name column_name:type

rails g migration add_columns_to_tables 
```

# numbers - 源策略的主机名

> ID：12243166
> 
> 赞同：1
> 
> 时间：2012-09-03T06:48:54.240
> 
> 标签：numbers, port, hostname, policy

具有相同域名的不同主机名是否会破坏源策略？
让我澄清一下我的问题。

```
[abc.xyz.net](abc.xyz.net)  
[pqr.xyz.net](pqr.xyz.net) 
```

这两个具有相同域的主机名会破坏源策略吗？如果端口号不同怎么办：

```
[abc.xyz.net:8088](abc.xyz.net:8088)  
[pqr.xyz.net:8081](pqr.xyz.net:8081) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T06:53:15.987

[http://en.wikipedia.org/wiki/Same_origin_policy#Origin_determination_rules](http://en.wikipedia.org/wiki/Same_origin_policy#Origin_determination_rules)

所以

abc.xyz.net 与 pqr.xyz.net 不同

也是 abc.xyz.net:8088 也不同于 pqr.xyz.net:8081

主机名、端口和协议必须匹配。因为一切都可以用来利用信息。

# java - compareTo() 和成员指针

> ID：12243168
> 
> 赞同：2
> 
> 时间：2012-09-03T06:49:03.943
> 
> 标签：java

我有一个成员是指向数组的指针。比较该类的两个实例，我想对数组成员的*地址而**不是*内容进行简单排序。

我可以对数组成员 进行相等性检查`==`，但`<`也不能`>`。如何比较数组的引用地址？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T07:08:23.637

在内部，`Object.equals()`方法比较对象的 hashCodes。你可以在这里做同样的事情。就像是 ：

```
Integer[] intArray = new Integer[10];

for(int i=0;i<10;i++)
    intArray[i] = i;

if(intArray[0].hashCode() > intArray[1].hashCode()) { // comparison, <, >, ==
    // do whatever you want
} 
```

# php - 我想显示我数据库中的最后一条记录（行）

> ID：12243169
> 
> 赞同：0
> 
> 时间：2012-09-03T06:49:03.663
> 
> 标签：php, mysql, sql, database

但我不知道如何以及在哪里将 sql 代码放在 php 中，有人可以帮我吗？我知道它像`SELECT * FROM form ORDER BY 'Klant_id' ASC LIMIT 1`

```
<html>
    <header>
    <link rel="stylesheet" href="css/style.css" type="text/css"  />
    </header>
    <body>

     <?php 
             //makes an connection to the db

             mysql_connect("localhost", "root", '') or die(mysql_error());
             mysql_select_db('databaseimage') or die(mysql_error());

             $data = mysql_query("SELECT * FROM form ORDER BY 'Klant_id' ASC LIMIT 1")
             or die(mysql_error()); 

             echo "<table border cellpadding=3>"; 
             while($info = mysql_fetch_array( $data)) 
             { 
             echo "<tr>";    
             echo "<th>surname:</th> <td>".$info['Surname'] . "</td> "; 
             echo "<th>insertion:</th> <td>".$info['Insertion'] . "</td> ";
             echo "<th>initials:</th> <td>".$info['Initials'] . "</td> ";
             echo "<th>name:</th> <td>".$info['Name'] . "</td> "; 
             echo "<th>sex:</th> <td>".$info['Sex'] . "</td> ";
             echo "<th>adress:</th> <td>".$info['Adress'] . "</td> ";
             echo "<th>postcode:</th> <td>".$info['Postcode'] . "</td> ";
             echo "<th>location:</th> <td>".$info['Location'] . "</td> ";
             echo "<th>private phone:</th> <td>".$info['Private_phone'] . "</td> ";
             echo "<th>mobile phone:</th> <td>".$info['Mobile_phone'] . "</td> ";
             echo "<th>work phone:</th> <td>".$info['Work_phone'] . "</td> ";
             echo "<th>private email:</th> <td>".$info['Private_email'] . "</td> ";
             echo "<th>work email:</th> <td>".$info['Work_email'] . "</td> ";

             } 
             Print "</table>"; 
             ?> 
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T07:20:02.733

不要`Klant_ID`用单引号将列括起来。单引号与反引号非常不同。

```
SELECT * 
FROM form tablename 
ORDER BY Klant_id DESC 
LIMIT 1 
```

或者

```
SELECT * 
FROM form tablename 
ORDER BY `Klant_id` DESC 
LIMIT 1 
```

**差异：**

`Backticks`( ` ) 用于表和列标识符，但仅当标识符是**[MySQL 保留关键字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)**时才需要。

`Single quotes`( ' ) 应该用于`VALUES()`列表中的字符串值。

`Double quotes`MySQL 也支持字符串值，但单引号被其他 RDBMS 更广泛地接受，因此使用单引号而不是双引号是一个好习惯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T06:51:44.107

当您拥有带有 auto_increment 的主键时，您应该使用`DESC`降序获取它。为了获取最后插入的记录。

尝试这个。

```
SELECT * FROM form ORDER BY `Klant_id` DESC LIMIT 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T07:15:59.743

如果您有设置了 auto_increment 的主键。你可以通过两种方式做到这一点

**第一的**

```
SELECT * FROM form WHERE Klant_id=(select MAX(Klant_id) FROM form) 
```

**第二**

```
SELECT * FROM form ORDER BY Klant_id DESC LIMIT 1; 
```

# database - Flyway 无法实例化 jdbc 驱动程序

> ID：12243172
> 
> 赞同：10
> 
> 时间：2012-09-03T06:49:31.813
> 
> 标签：database, spring, flyway

刚开始使用 Flyway 和 Spring 3.0。到目前为止，我所做的只是将 Flyway 依赖项和插件添加到我的 pom.xml 中。接下来，我尝试`mvn flyway:status`在命令行中运行。但是，它抱怨它无法实例化 jdbc 驱动程序（我正在使用 postgres）。

有谁知道可能是什么原因造成的？我正在使用 Springsource Tool Suite 开发我的应用程序。postgres 驱动程序位于 WEB-INF/lib/postgresql-9.1-902.jdbc4.jar 下

任何帮助是极大的赞赏！谢谢！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-09T11:49:12.137

要使 Maven 插件正常工作，您必须：

将此依赖项添加到您的项目（或只是插件）：

```
<dependency>
    <groupId>postgresql</groupId>
    <artifactId>postgresql</artifactId>
    <version>9.1-901-1.jdbc4</version>
</dependency> 
```

并像这样配置插件：

```
<plugin>
    <groupId>com.googlecode.flyway</groupId>
    <artifactId>flyway-maven-plugin</artifactId>
    <version>1.7</version>
    <configuration>
        <driver>org.postgresql.Driver</driver>
        <url>jdbc:postgresql://...</url>
        <user>...</user>
        <password>...</password>
    </configuration>
</plugin> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T16:53:44.007

您还必须提供 Postgresql jdbc 驱动程序作为 maven 依赖项：

```
<dependency>
    <groupId>postgresql</groupId>
    <artifactId>postgresql</artifactId>
    <version>9.1-902.jdbc4</version>
</dependency> 
```

# javascript - Html 输入图片类型在 maplayer 下

> ID：12243175
> 
> 赞同：0
> 
> 时间：2012-09-03T06:50:02.670
> 
> 标签：javascript, jquery, css, openlayers

有关如何解决 html 输入（图像类型）问题的任何建议，它用于在单击时显示 div（具有 id="map"）的全屏，如果再次单击则恢复正常。它可以在不添加地图的情况下正常工作，但是当通过在就绪状态下调用函数 init() 添加地图时，它将不起作用，输入类型位于地图下方

这是一个工作示例：http: [//jsfiddle.net/TXbBc/1/](http://jsfiddle.net/TXbBc/1/)。请评论 init() 函数调用，以便您可以看到它在不添加地图的情况下工作正常。

任何指导和帮助表示赞赏..！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T06:59:52.883

将您的按钮 css 更改为：

```
.btn-full-screen {
    background-color: Gray;
    border-style: solid;
    border-width: 1px;
    bottom: 0;
    height: 3%;
    position: absolute;
    right: 0;
    width: 3%;
    z-index: 9999;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T06:53:12.710

设置 z-index

```
<input id="btn-full-screen" style="z-index:9999;" title="Full Screen" class="btn-full-screen" type="image" src="img/fullscreen-en.png" alt="settings"/> 
```

工作示例：http: [//jsfiddle.net/gbsandeep/TXbBc/2/](http://jsfiddle.net/gbsandeep/TXbBc/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T06:54:23.863

尝试设置输入按钮的`z-index`属性

# php - php - 需要帮助将 python 命令转换为 php 代码

> ID：12243176
> 
> 赞同：0
> 
> 时间：2012-09-03T06:50:08.170
> 
> 标签：php, python, md5, hashlib

我正在使用 python hashlib 使用以下命令获取压缩的 md5 值，有人可以帮助我使用兼容的功能吗？

```
hashlib.md5('my string').hexdigest() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T06:53:47.523

```
$string = 'my string'
$encoded_string = md5($string); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T07:06:59.547

```
echo md5('apple');
// => 1f3870be274f6c49b3e31a0c6728957f 
```

产生与

```
require 'digest/md5';
print Digest::MD5.hexdigest('apple');
# => 1f3870be274f6c49b3e31a0c6728957f 
```

# c# - 使用命令行参数从 C# 运行 Python 脚本

> ID：12243180
> 
> 赞同：2
> 
> 时间：2012-09-03T06:50:49.450
> 
> 标签：c#, ironpython

我需要使用 IronPython 从 C# 执行 Python 脚本并将一些命令行参数传递给它。有什么办法吗？

我的示例代码：

```
 var e = Python.CreateEngine();
        var source = e.CreateScriptSourceFromFile(@"...");
        source.Execute(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T07:05:29.143

当然。创建引擎时，调用接受附加选项的重载并将 设置`"Arguments"`为字符串数组。

```
var options = new Dictionary<string, object>
{
    { "Arguments", new[] { "foo", "bar", "biz baz" } },
};
var engine = Python.CreateEngine(options);
var script = @"
import sys
print sys.argv # ['foo', 'bar', 'biz baz']
";
engine.Execute(script); 
```

# html - CSS背景属性不能覆盖IE过滤器属性？

> ID：12243182
> 
> 赞同：3
> 
> 时间：2012-09-03T06:50:59.800
> 
> 标签：html, css

### 你好..

我有一个标签，其背景默认为渐变（IE）。

```
 label{
      width:100px;
      height:100px;
      border:1px solid red;
      filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorStr="#ff3333",endColorStr="#663300");
     }
<label> Rama Rao </label> 
```

我允许用户更改背景颜色渐变或正常。我正在获取用户输入的值，并设置 css：

```
<label style="background:#val1"> Rama Rao </label> 
```

或者

```
 <label style="filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorStr="#val1",endColorStr="#val2");"> Rama Rao </label> 
```

如果用户再次设置渐变它会起作用......但如果用户输入正常颜色则不会......但据我所知，`inline-style`可以覆盖内部样式......但它不起作用（我的意思是，过滤`filter`器*不能被背景覆盖）* ......我该如何克服这个问题？
**注意：**对于名称抖动，我在`<label>`这里提到过......但它可能发生在任何标签上......

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-03T07:20:41.647

您可以使用以下方法将其删除：

```
filter: progid:DXImageTransform.Microsoft.gradient(enabled = false); 
```

您也可以查看我在[这里](http://jsfiddle.net/D2Ajs/)制作的小提琴。

您用于渐变的代码仅适用于 Internet Explorer。如果您想要与大多数浏览器兼容的代码，请[在此处](http://www.colorzilla.com/gradient-editor/)查看此工具。

# c++ - 简单线程按顺序工作

> ID：12243184
> 
> 赞同：0
> 
> 时间：2012-09-03T06:51:17.720
> 
> 标签：c++, multithreading

我的 VC++ 2010 快速安装时间已过期，因此如果不从右下更改日期，我将无法再使用它。我不想这样做，所以我问你这些问题：

**你认为，下面的多线程程序的线程是按顺序工作的吗？**

**如果我再放置类似的 3 个线程来计算下一个 1000 个粒子，contet-switches 会变得筋疲力尽还是只是 Sleep(10) 筋疲力尽？**

注意：每次计算（force,vel.,pos.）大约需要 9 ms。

```
Something like this:
core1:first 1000 particles forces     //
core2:first 1000 particles velocities //===>these 3 are connected
core3:first 1000 particles positions  // ------------------------------
                                                                      |
core4:next 1000 particles forces      //                               ====these 2 will be connected
core5:next 1000 particles velocities  //===>these 3 are connected     |
core6:next 1000 particles positions   // ------------------------------

boolean locker1;
boolean locker2;
boolean locker3;

boolean worker1;
boolean worker2;
boolean worker3;

void core1(void * x)
{
    while(worker1)
    {
         while(!locker1){Sleep(10);}
         for(int i=0;i<1000;i++)
         {
              //calculate 1000 particles forces
         }
         locker2=true; //starts core2 thread
         while(locker2){Sleep(10);} //core2 must be working
         while(locker3){Sleep(10);} //core3 must be working
    }
   _endthread();
}

void core2(void * y)
{
    while(worker2)
    {
         if(!locker2){Sleep(10);}
         for(int i=0;i<1000;i++)
         {
              //calculate 1000 particles velocities
         }
         locker3=true; //starts core3 thread
         while(locker3){Sleep(10);} //core3 must be working
         while(locker1){Sleep(10);} //core1 must be working
    }
   _endthread();

}

void core3(void * z)
{
    while(worker3)
    {
         if(!locker3){Sleep(10);}
         for(int i=0;i<1000;i++)
         {
              //calculate 1000 particles positions
         }
         locker1=true; //starts core1 thread
         while(locker1){Sleep(10);} //core1 must be working
         while(locker2){Sleep(10);} //core2 must be working
    }
   _endthread();

}

int main()
{
    locker1=false; 
    locker2=false;
    locker3=false;
    worker1=true; 
    worker2=true;
    worker3=true;
    _beginthread(core1,0,(void *)0);
    _beginthread(core2,0,(void *)0);
    _beginthread(core3,0,(void *)0);

    locker1=true; //gets the waiting core1-thread working
                  //so i think when it finishes, it releases core2 to work
                  //when core2 finishes, core3 starts working

    Sleep(100);
    worker1=false;
    worker2=false;
    worker3=false; //after a while i shut them down

} 
```

如果有 VC++ 的人能给我一些提示或建议，我将不胜感激。

```
Or should i just forget the 3+3-->2 system and do this(6)? :

core1 first 233 particles for computing forces ----->all for velocity ----->all for psoition
core2 next 233 particles for computing forces ----->all for velocity ----->all for psoition
core3 next 233 particles for computing forces ----->all for velocity ----->all for psoition
core4 next 233 particles for computing forces ----->all for velocity ----->all for psoition
core5 next 233 particles for computing forces ----->all for velocity ----->all for psoition
core6 last 233 particles for computing forces ----->all for velocity ----->all for psoition

and just wait all of them finish to get to next calculation? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T07:08:37.397

“你认为，多线程程序下面的线程是按顺序工作的吗？”

一点也不。您违反了太多关于多线程编程的规则。

此外，线程的重点是并行执行事物。如果您需要依次执行 A、B 和 C，请在同一个线程中执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T07:12:09.313

在这种情况下，我真的看不到线程的优势，这个想法是让它们一起运行，您的储物柜变量似乎被设计为确保在任何给定时间三个中的两个处于睡眠状态。如果是这样，那么为什么不按顺序在同一个线程中运行它们。在我看来，这些计算是相互依赖的，因此没有并行线程可以帮助你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T07:24:31.890

如果您有兴趣在 C++ 程序中添加并行性并且正在使用 Visual C++，我建议您查看 Microsoft 的[并发运行时](http://msdn.microsoft.com/en-us/library/dd504870%28v=vs.100%29)，尤其是[Parallel Patterns Library (PPL)](http://msdn.microsoft.com/en-us/library/dd492418%28v=vs.100%29)。这些使得并行工作变得非常简单，而无需在低级细节中摸索。

英特尔广泛的[线程构建模块](http://threadingbuildingblocks.org)是另一个值得研究的选择。

# android - 在画布中调整图像大小

> ID：12243185
> 
> 赞同：1
> 
> 时间：2012-09-03T06:51:20.013
> 
> 标签：android, bitmap, imageview, android-canvas

我在 Inside ImageView 上显示位图并使用 Canvas 。

ImageView ：无论图像有多大，它都会显示整个图像，它会在 Imageview 的宽度/高度内压缩位图。

画布：画布绘制位图，但如果位图较大，它会超出屏幕。

如何在像 Imageview 显示这样的画布上对位图进行相同的行为。？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T07:00:32.433

要调整位图的大小，请查看[`drawBitmap`](http://developer.android.com/reference/android/graphics/Canvas.html#drawBitmap%28int%5B%5D,%20int,%20int,%20float,%20float,%20int,%20int,%20boolean,%20android.graphics.Paint%29)画布中的方法，每个重载方法都允许您指定大小。例如，这里是其中一种方法的签名

`public void drawBitmap (int[] colors, int offset, int stride, int x, int y, int width, int height, boolean hasAlpha, Paint paint)`

它允许您指定宽度和高度。

或者

使用[`public void drawBitmap (Bitmap bitmap, Matrix matrix, Paint paint)`](http://developer.android.com/reference/android/graphics/Canvas.html#drawBitmap%28android.graphics.Bitmap,%20android.graphics.Matrix,%20android.graphics.Paint%29)和

用于[`public void setScale (float sx, float sy)`](http://developer.android.com/reference/android/graphics/Matrix.html#setScale%28float,%20float%29)调整大小

使用它根据您的需要重新调整图像大小

# iphone - 使用 MPMoviePlayerViewController 在 iPhone 模拟器上播放视频

> ID：12243186
> 
> 赞同：0
> 
> 时间：2012-09-03T06:51:27.153
> 
> 标签：iphone, objective-c, ios, xcode, cocoa-touch

我正在使用 MPMoviePlayerViewController 播放视频。我添加了以下代码，但是它没有播放。视图呈现黑屏并立即隐藏而不播放。

```
 MPMoviePlayerViewController  *moviePlayerVC = [[MPMoviePlayerViewController alloc]initWithContentURL:[NSURL URLWithString:@"/Users/gui_test/Desktop/273_0.mp4"]];
    moviePlayerVC.moviePlayer.allowsAirPlay = YES; 
    moviePlayerVC.view.backgroundColor = [UIColor blackColor];
    [self presentMoviePlayerViewControllerAnimated:moviePlayerVC];
    [moviePlayerVC.moviePlayer play]; 
```

我需要做更多的事情来播放 mp4 文件注意：我正在模拟器中尝试。是否可以在模拟器中播放 (.mp4) 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T16:52:36.260

试试这个代码:)，我猜它只支持 .mov 文件，你的视频没有播放，因为它的 mp4

```
NSString*thePath=[[NSBundle mainBundle] pathForResource:@"filename" ofType:@"mov"];
NSURL*theurl=[NSURL fileURLWithPath:thePath];
NSLog(@"the url= %@",theurl);

moviePlayer=[[MPMoviePlayerController alloc] initWithContentURL:theurl];
[moviePlayer.view setFrame:CGRectMake(0, 0, 320, 480)];
[moviePlayer prepareToPlay];
[moviePlayer setFullscreen:YES];
[moviePlayer setShouldAutoplay:YES]; 
[self.view addSubview:moviePlayer.view]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T06:58:27.343

我使用了 MPMoviePlayerController 而不是 MPMoviePlayerViewController：

```
moviePlayer = [[MPMoviePlayerController alloc] initWithContentURL:songUrl];
[[self.moviePlayer view] setBounds:CGRectMake(0, 0, 320, 480)];
[moviePlayer.backgroundView setBackgroundColor:[UIColor blackColor]];   
moviePlayer.controlStyle = MPMovieControlStyleDefault;
[moviePlayer setScalingMode:MPMovieScalingModeNone];
[moviePlayer prepareToPlay];
[self.view addSubview:moviePlayer.view];
[moviePlayer setFullscreen:YES animated:NO]; 
```

试试这个应该可以。

# android - 如何让 ant build 在 Eclipse Android 插件中工作？

> ID：12243190
> 
> 赞同：1
> 
> 时间：2012-09-03T06:51:38.520
> 
> 标签：android, eclipse, ant, configuration, build

当我在 Eclipse 中按下运行按钮时，它会将我带到一个显示“创建、管理和运行配置”的窗口。我应该在这里做什么？我是初学者。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T08:13:25.217

您是否安装了[android sdk](https://dl-ssl.google.com/android/eclipse/) for eclipse？

如果是，那么在开始之前，您必须创建一个 avd（android 虚拟设备）。有关更多信息，[此](http://developer.android.com/sdk/installing/installing-adt.html)链接应该是有帮助的。

**编辑：**

![在此处输入图像描述](../Images/1ce0b491fb64180ee9328e678d42beb4.png)

1.  右键单击 Android 应用程序（在左侧菜单中）

2.  点击新建

3.  命名并选择项目

![在此处输入图像描述](../Images/141bad8bb5847cd18ca32bfa8974b060.png)

4.选择创建的avd

5.点击申请

6.点击运行

# extjs - 在 app.js Extjs 中定义控制器

> ID：12243194
> 
> 赞同：2
> 
> 时间：2012-09-03T06:51:46.797
> 
> 标签：extjs, extjs4, extjs-mvc

这是我的 app.js 代码：

```
Ext.Loader.setConfig({
    enabled: true
});

Ext.application({
    name: 'KP',
    appFolder: 'scripts/app',

    controllers: [
        'login.Login'
    ],

    views: [
        'login.Login'
    ],

    launch: function () {

        var view = Ext.widget('login')
    }

}); 
```

如果我想在我的应用程序中使用其他一些视图、控制器、模型和存储，我应该在 app.js 中定义它们吗？（像这样：控制器[....我所有的控制器.....]）还有其他方法可以在我的控制器中使用初始化功能吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T08:13:21.290

有很多方法...

***先了解一些基础知识：***

应用程序控制器的控制器数组中列出的所有控制器都在启动时被实例化（应用程序使用 onReady 事件进行初始化。此外，列出的控制器的[init()](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.app.Controller-method-init)和[onLaunch()](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.app.Controller-method-onLaunch)方法也被调用。有关详细信息，请参阅链接的 API发生这种情况）。现在每个实例化的控制器都初始化它的存储、视图和模型（为所有创建 getter 并创建每个存储的实例同时覆盖[storeId](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Store-cfg-storeId)并将它们附加到[Ext.StoreMgr](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.StoreManager)）。请注意，每个控制器都将包含他自己的模型、存储和视图。

接收未在应用程序控制器中列出的控制器的最简单方法是使用应用程序控制器的引用并调用[getController(name)](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.app.Application-method-getController)

重要的是要知道，当使用这种方式接收控制器实例时，getter 方法不会为调用的控制器调用[init()](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.app.Controller-method-init)或[onLaunch()](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.app.Controller-method-onLaunch)方法，它只会尝试获取或创建控制器。您还应该注意这些控制器中这些方法的 API 不再正确。您需要为这些控制器设置一个 init bool 并在[getController(name)](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.app.Application-method-getController)方法返回给您的引用上检查它。如果它是 undefined/false 你自己调用[init()](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.app.Controller-method-init) / [onLaunch()](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.app.Controller-method-onLaunch)并在之后设置它。我自己使用这些技术来减少更大应用程序的初始负载。我猜你并不真的需要这个仅仅为少数控制器。

> **更新**
> 
> 由于 4.1.x 版本中的一些更改，不再需要手动初始化控制器。这现在由*getController*方法为我们完成

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T08:19:15.650

您可以根据需要定义任意数量的控制器。要实现层次结构，您可以在其中定义与某些控制器相关的视图和存储。

例如：

```
controller/
  artists.js (inside: artistsView1.js, artistsView2.js, artistsStore.js)
  paintings.js (inside: paintingsView1.js, paintingsStore.js) 
```

您在控制器中使用的所有视图和存储都将在 Applocation 加载过程中被加载和初始化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T08:23:02.823

您在应用程序中定义的控制器在调用应用程序之前加载`launch()`。随着每个控制器的加载，它的`models`,`views`和`stores`(MVS) 也被加载。

尽管您可以在应用程序中定义 MVS，但我建议每个控制器都定义其相关的 MVS，因为程序员可以根据请求而不是默认加载控制器（及其相关的 MVS）。从可重用性的角度来看，这也是一个很好的实践（因此，如果您曾经重用控制器，您就会知道它附带了哪些 MVS）。

如果在没有控制器的情况下使用它们，您可能希望在应用程序中包含一些视图，例如在系统出现错误时显示的某种自定义窗口。

# javascript - jQuery - 检查是否已触发 .noconflict

> ID：12243203
> 
> 赞同：1
> 
> 时间：2012-09-03T06:52:21.817
> 
> 标签：javascript, jquery

我正在将 jQuery 脚本动态加载到随机页面中。有时他们支持 jQuery，有时他们有其他库，有时他们根本没有任何库..

我需要支持所有情况，因此，首先我检查 jQuery 是否已加载。不是的，我使用 .noconflict 将 jQuery 动态加载到页面中（以避免在有其他库的情况下发生冲突，daahhh），然后继续我的脚本。

如果已经加载，我需要知道页面是否触发了 .noconflict 功能。为什么 ？这很简单。假设一个随机页面同时具有 Prototype 和 jQuery（发生，是的）。站长为 jQuery 触发 .noconflict 模式，避免与它发生冲突。之后，我触发我的脚本，并检查 jq 是否已加载（是）。然后，我必须知道天气才能使用 $() 或 jQuery() 方法，因为如果我继续使用 $() 我可能会访问 Prototype 处理程序，而我不希望那样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T06:56:32.020

[`.noConflict`](http://api.jquery.com/jQuery.noConflict/)只删除`$`对象而不是`jQuery`对象。（除非您添加`true`为第一个参数。

所以你可以随时使用`jQuery()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T06:58:06.190

正如其他人所说，您应该始终默认使用完整的 jQuery 对象而不是别名。如果是输入数量问题，请使用 $ 然后在文本编辑器中查找替换，然后再推送。

...但是，如果您绝对，肯定地必须以荒谬的方式这样做，那很简单：

```
​if​ ($ == jQuery) { alert("YAY"); }​​​​​​ 
```

这是我使用 jQuery 1.8 和单独加载的 MooTools 1.4.5 在 JSFiddle 上制作的一个示例：http: [//jsfiddle.net/fL9rk/2/](http://jsfiddle.net/fL9rk/2/)

运行一次，然后卸载外部 MooTools 并重试。

不要说我们没有警告你。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-03T07:00:38.267

您可以使用：

```
jQuery(function( $ ){
//Insert your javascript code here

}); 
```

并且您所有的 jQuery 代码都将在这些大括号中，并且永远不会与其他原型冲突。

# facebook - facebook帖子墙我该怎么办？

> ID：12243204
> 
> 赞同：0
> 
> 时间：2012-09-03T06:52:26.717
> 
> 标签：facebook

我试过这段代码贴墙

```
<?php
   $app_id = "XXXXXXXX";
   $canvas_page = "XXXXXXXX";
   $message = "My story";
   $feed_url = "http://www.facebook.com/dialog/feed?app_id="
                 . $app_id . "&redirect_uri=" .urlencode($canvas_page) . "&message=" . $message;

   if (empty($_REQUEST["post_id"])) {
     echo("<script> top.location.href='" . $feed_url . "'</script>");
  } else {
     echo ("Feed Post Id: " . $_REQUEST["post_id"]);
  }
?> 
```

但我真的很想这样贴墙：

![](../Images/20f14096a2e534d4aa07810bcf2a44be.png)

有人可以给我一个例子吗？拜托！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T11:53:31.713

该图像显示了一个看起来像 Facebook 对话框的弹出窗口，但实际上是由应用程序开发人员设计的，因此您可以自己构建它。

PS：我建议尝试使用[https://developers.facebook.com/docs/reference/dialogs/feed/](https://developers.facebook.com/docs/reference/dialogs/feed/)而不是您当前的方法。

# c# - WinRT 和 DLL：我究竟可以使用什么？

> ID：12243208
> 
> 赞同：2
> 
> 时间：2012-09-03T06:52:41.937
> 
> 标签：c#, dll, windows-runtime, json.net, html-agility-pack

这对我来说并不完全清楚，所以我希望这里有人知道答案。我正在使用 C# Json.Net 和 C# HtmlAgilityPack，它们都是从“任何 CPU”的源代码构建的。我注意到这两个都包括使用引用程序集的指令，这些指令在 Metro 中似乎不可用，但它们都构建得很好。

如果我引用它们，这是否意味着我的应用程序将转为非托管代码？

究竟是什么导致了未管理的代码？

为什么允许 DLL 引用 WinRT 不可用的程序集而我的应用程序不可用？

这是否会通过 Windows 商店的审批流程？

我需要担心的应用程序中包含的 DLL 的一般规则是什么？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T21:47:13.527

在开发面向 WinRT 的应用程序时，该应用程序应仅使用 Windows 8 WinRT 中可用的 API。API 是在 WinMD 文件中定义的。如果应用程序使用了桌面 API，那么它将在 Windows 商店批准过程中被拒绝。

想象一下这个场景。您开发了一个 WinRT 应用程序，该应用程序在桌面模式（客户端配置文件）中使用 .NET DLL。该应用程序部署在 Windows 商店中，用户在 ARM 平板电脑上下载。该应用程序将崩溃，因为它在 ARM 设备上没有桌面（客户端）.NET DLL。

所以这给我们带来了一个问题，即在为 WinRT 开发应用程序时可以使用哪些 .NET 类。文章[http://kishore1021.wordpress.com/2012/08/06/what-is-portable-class-library-project-in-visual-studio-2012-net-4-5/](http://kishore1021.wordpress.com/2012/08/06/what-is-portable-class-library-project-in-visual-studio-2012-net-4-5/)列出了可用的 .NET 类用于 WinRT 应用程序开发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T07:27:58.583

将所有开源项目依赖项更改为以 WinRT 为目标。查看 WinRT 中是否缺少某些方法/类，导致代码无法编译。尝试找到替代方法/类。

如List.FindAll()，改为Linq Where()

# php - 如何在 Moodle 中制作自定义备份格式？

> ID：12243209
> 
> 赞同：0
> 
> 时间：2012-09-03T06:52:53.153
> 
> 标签：php, moodle

如何在moodle中制作自定义备份格式？是否可以在 Moodle 中开发自定义备份格式？然后请建议我如何做到这一点？

# jsp - JSP 一页将值传递给另一页

> ID：12243213
> 
> 赞同：0
> 
> 时间：2012-09-03T06:53:18.683
> 
> 标签：jsp, jetty

我用码头网络服务器做到这一点。

前提是网络服务器已经启动。

我用 JSP 编写的主页试图从传入连接中获取 IP 地址。

因此，我将它分成两个 JSP 页面。（比方说，a.jsp 和 b.jsp）

b.jsp 用于获取客户端 ip 地址，然后将其传递给 a.jsp 而

a.jsp 是专门为显示从 b.jsp 获取的 ip 地址而设计的。

我的 b.jsp 中有一个静态字符串，用于存储传入的连接 IP 地址。

两个问题：

1.  我希望 a.jsp 不会显示任何内容，除非它获取从 b.jsp 发送的数据（IP 地址）。如何更新页面？

2.  如何将值从 b.jsp 传递给 a.jsp？

提前致谢

我的 b.jsp 看起来像...

```
<%@ include file="index.jsp" %>
<%@ page language="java" contentType="text/html; charset=UTF-8"
pageEncoding="UTF-8"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org  /TR/html4/loose.dtd">
    <%!
    static String clientIpAddress = "";
    %>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Insert title here</title>
</head>
<body>
    <% 
        clientIpAddress=request.getRemoteAddr();
        if(clientIpAddress!=null){
            //How can I pass clientIpAddress to a.jsp to display?
        }
        else{
            out.println("Nothing happened here");
        }
    %>

</body>
</html> 
```

我添加了

```
<%@ include file="a.jsp" %> 
```

在我的代码顶部，因为我认为我必须这样做才能将 clientIpAddress 传递给 a.jsp。

1.  a.jsp 收到 b.jsp 的数据后会自动更新吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T06:57:19.920

您可以使用`<jsp:include/>`或`<jsp:forward/>`操作。

```
<jsp:forward page="a.jsp">
  <jsp:param name="foo" value="10"/>
</jsp:forward> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T07:06:54.570

您不需要在页面之间传递 IP 地址，您可以跳过`b.jsp`并将用户直接发送到`a.jsp`- 您可以使用以下方式提取 IP 地址：
`request.getRemoteAddr()`

至于您关于在页面之间传递值的问题，我会通过将值保存到会话来做到这一点，或者在重定向之前添加一个 GET/POST 参数。

# ios - 如何使用 UITapGestureRecognizer 引用“选定对象”？

> ID：12243215
> 
> 赞同：2
> 
> 时间：2012-09-03T06:53:40.450
> 
> 标签：ios, xcode, uitextview, uigesturerecognizer, ivar

我想使用点击手势识别器来选择一个对象（`UITextView`在我这里是一个）。当对象被点击时，`"recognizer.view"`将返回我认为被点击的对象。以下是我记录识别器视图时得到的结果。

```
<UITextView: 0xf67afc0; frame = (155.5 119.5; 100 100); text = 'string'; clipsToBounds = YES; tag = 1; layer = <CALayer: 0xf67b1f0>; 
```

我假设我想在这里取第一个值：`UITextView: 0xf67afc0;`并将其应用于`UITextView`ivar。我这样设置

```
UITextView *selectedTextView; 
```

但是当我尝试分配`recognizer.view`给这个 ivar 时，我得到一个错误：！**`Incompatible pointer types assigning to "UITextView" __strong from "UIView".`**我想我需要以某种方式只取第一个值`UITextView: 0xf67afc0`并将其分配给 ivar？我该怎么做，或者我在这里吠错了树？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T07:11:27.450

您需要`view`将识别器上的属性向下转换为 a`UITextView`而不是 a `UIView`。

```
UITextView *selectedTextView = (UITextView *)recognizer.view; 
```

希望这会有所帮助，如果您有任何问题，请告诉我。

# c# - 回发后保存下拉列表值并设置所选索引

> ID：12243219
> 
> 赞同：0
> 
> 时间：2012-09-03T06:53:47.333
> 
> 标签：c#, .net, webforms

我有一个带有 3 个下拉列表和文本框的小页面。我的目标是在每个下拉框（或任何组合）中选择一个值，然后在回发后将所选值设置为上次搜索的值。问题之一是 1\. 在 IE 中的每次选择之后，页面都会回发（显然），即使添加了启用视图状态的属性，下拉列表也不会保留所选值。

```
 <%@ Page Language="C#" AutoEventWireup="true" CodeFile="QSerch.aspx.cs" Inherits="QSerch"
    EnableViewState="true" EnableEventValidation="true" EnableViewStateMac="true"%>

<%@ Register Assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
    Namespace="System.Web.UI" TagPrefix="asp" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <style type="text/css">
        .ddlstl
        {
            font-size: 13px;
            font-family: Arial;
        }
        #Iframe1
        {
            height: 700px;
            width: 540px;
        }
        .style2
        {
            width: 243px;
        }
    </style>
</head>
<body dir="rtl">
    <form id="form1" runat="server" enableviewstate="true">
    <asp:ScriptManager ID="ScriptManager1" runat="server" EnableScriptGlobalization="True"
        EnablePartialRendering="true" LoadScriptsBeforeUI="false" ScriptMode="Release">
    </asp:ScriptManager>
    <div style="float: right; width: 28px;">
        &nbsp;</div>
    <div style="text-align: right; float: right;">
        <table border="0" cellpadding="0" cellspacing="0">
            <tr>
                <td>
                    <table border="0">
                        <tr>
                            <td style="width: 170px;">
                                <asp:DropDownList ID="ddlMec" runat="server" AutoPostBack="True" CssClass="ddlstl"
                                    Height="22px" Width="160px" EnableViewState="true" OnSelectedIndexChanged="ddlMec_SelectedIndexChanged">
                                </asp:DropDownList>
                            </td>
                        </tr>
                        <tr>
                            <td style="width: 20px;">
                                <asp:DropDownList ID="ddlTMec" runat="server" AutoPostBack="True" CssClass="ddlstl"
                                    Height="22px" Width="160px" OnSelectedIndexChanged="ddlTMec_SelectedIndexChanged"
                                    EnableViewState="true">
                                    <asp:ListItem Value="-1">בחר תפקיד</asp:ListItem>
                                </asp:DropDownList>
                            </td>
                        </tr>
                        <tr>
                            <td style="width: 170px;">
                                <asp:DropDownList ID="ddlArea" runat="server" AutoPostBack="True" CssClass="ddlstl"
                                    DataSourceID="adsArea" DataTextField="name_area" DataValueField="id_area" Height="22px"
                                    Width="160px" OnSelectedIndexChanged="ddlArea_SelectedIndexChanged" AppendDataBoundItems="true"
                                    EnableViewState="true">
                                    <asp:ListItem Value="-1" Text="בחר איזור"></asp:ListItem>
                                </asp:DropDownList>
                                <asp:AccessDataSource ID="adsArea" runat="server" DataFile="~/App_Data/Adam.mdb"
                                    SelectCommand="SELECT [id_area], [name_area] FROM [table_area] ORDER BY [name_area]">
                                </asp:AccessDataSource>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <asp:TextBox runat="server" Text="חיפוש חופשי" ID="txtFreeText" Style="font-size: 12px;
                                    height: 15px; width: 151px" />
                                <%--<input type="text" value="חיפוש חופשי" onfocus="deleteFreeText()" id="FreeText" name="FreeText"
                                            style="font-size: 12px; height: 15px; width: 151px" runat="server" />--%>
                                <br />
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
            <tr>
                <td align="right">
                    <asp:UpdatePanel ID="UpdatePanel2" runat="server" RenderMode="Inline" UpdateMode="Conditional">
                        <ContentTemplate>
                            <iframe id="Iframe1" runat="server" frameborder="0" name="Iframe1" scrolling="no"
                                width="360px" src="" style="overflow: auto"></iframe>
                        </ContentTemplate>
                    </asp:UpdatePanel>
                </td>
            </tr>
        </table>
    </div>
    </form>
</body>
</html>

    protected void Page_Load(object sender, EventArgs e)
    {
        TextBox tb = (TextBox)FindControl("txtFreeText");
        tb.Attributes.Add("onfocus", "this.value = ''");
        if (!Page.IsPostBack)
        {
            LoadProffesion();
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T07:26:06.253

前两个下拉列表 (id=ddlMec & id=ddlTMec) 没有任何与之相关的数据。希望它会在页面加载期间绑定。

假设您必须在第三个下拉列表（id：ddlArea）上遇到问题，这可能是由于您正在使用数据源控件绑定数据。所以每次页面加载时，它都会重新填充数据并且所选项目会丢失。

为了解决这个问题，请尝试在页面加载时绑定下拉列表，并通过 Page.IsPostBacK 属性的帮助来控制它来防止覆盖。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T07:31:24.143

只需从标签中删除 AutoPostBack="True" 即可。

DropDownList 不需要 AutoPostBack。

# javascript - 用数组键/值替换字符

> ID：12243220
> 
> 赞同：0
> 
> 时间：2012-09-03T06:53:56.360
> 
> 标签：javascript, jquery

我尝试根据替换地图替换一些特殊字符（表情符号）。
我写了这段代码，但它仍然不起作用..

```
var char_map = {
    '■': 'e',
    '­♥': 'a',
    '♦': 'm',
};

$.fn.map_replace = function() {
    $(this).html(function(i, content) {
        $.each(char_map, function(key, value) {
            content = content.replace(key, value);
        });
        return content;
    });
};

$(".comment").map_replace(); 
```

[jsFiddle上的这段代码](http://jsfiddle.net/NaX6v/ "jsFiddle")

感谢您的帮助:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T07:04:51.000

一种方法是使用转义码而不是文字 Unicode 字符，并使用正则表达式替换它们：

```
var char_map = {
    'e' : /\u25A0/g,
    'a' : /\u2665/g,
    'm' : /\u2666/g,
};

$.fn.map_replace = function() {
    $(this).html(function(i, content) {
        $.each(char_map, function(character, regex) {
            content = content.replace(regex, character);
        });
        return content;
    });
};

$(".comment").map_replace(); 
```

[更新了 jsFiddle](http://jsfiddle.net/KK6nk/1/)

您的初始方法不起作用的原因是默认情况下 String.replace() 仅替换搜索表达式的*第一次*出现。通过使用正则表达式并指定“g”（代表“global”）标志，您可以告诉它替换所有匹配项。

# php - PHPStorm 无视@deprecated 注释

> ID：12243225
> 
> 赞同：1
> 
> 时间：2012-09-03T06:54:26.873
> 
> 标签：php, phpstorm

我通过在 docBlock 中添加 @deprecated 来弃用我的项目中的一个方法，希望 PHPStorm 在处理该特定方法时能够选择该方法。*但是，我的*PHPStorm 似乎忽略了评论，并且没有将该方法的用法标记为已弃用。

现在**我**确实知道不再允许使用这种方法，但我的一些同事可能不会。我刚刚检查了别人的电脑，他收到了弃用警告，所以这对每个人来说可能都不是问题。不过我不能保证。

我使缓存无效，重新启动 PHPStorm，删除并重新添加了@deprecated，但似乎没有任何效果。

有人有建议吗？有没有我缺少的设置？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-03T07:01:27.697

哎呀，找到了……

由于某种原因，我的设置已更改/设置回默认值，并且“不推荐使用时出错”设置已关闭。

设置 -> 检查 -> PHP -> 常规 -> 已弃用 -> 作为错误

# jquery - 电子邮件验证不起作用

> ID：12243226
> 
> 赞同：0
> 
> 时间：2012-09-03T06:54:32.673
> 
> 标签：jquery, validation, email

我在[http://info.cfgt.com.au/diploma-of-management/sq1/上使用这个脚本](http://info.cfgt.com.au/diploma-of-management/sq1/)

```
<script type="text/javascript">

jQuery(document).ready(function() {
function validateEmail(sEmail) {
var filter = /^([\w-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/;
if (filter.test(sEmail)) {
    return true;
}
else {
    return false;
}
}
});

jQuery(document).ready(function() {
jQuery('form').submit(function() {
    var sEmail = jQuery('#inf_field_Email').val();

    if (validateEmail(sEmail)) {
        alert('Email is valid');
        e.preventDefault();
    }
    else {
        alert('Invalid Email Address');
        e.preventDefault();
    }
});
});
</script> 
```

无论我做什么，表单都会提交并重定向到默认的 infusionsoft 错误页面。

我一生都无法弄清楚我错过了什么，而我已经到了第 7 个小时。

有任何想法吗？

干杯，

约翰·德特莱夫斯

编辑：

我现在正在使用以下内容，哪种有效：

```
<script>
jQuery(document).ready(function() {
jQuery('form').submit(function() {
email_address = jQuery('#inf_field_Email');           
email_regex = /^[a-z0-9\._]*[a-z0-9_]@[a-z0-9][a-z0-9\-\.]*[a-z0-9]\.[a-z]{2,6}$/i;
if(!email_regex.test(email_address.val())){
alert('Please enter a valid email');
return false;
}else{
alert('All Good!');
return true;
}
});
});
</script> 
```

我现在唯一的问题是它会接受任何@anything 并且似乎根本不需要“.domain”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T07:11:44.820

当您有多个`jQuery(document).ready(function()`块时，不能从另一个块中调用其中定义的函数。请参阅[Can you have multiple $(document).ready(function(){ ... }); 部分？](https://stackoverflow.com/questions/1327756/can-you-have-multiple-document-readyfunction-sections)

所以试着把它们组合成一个大函数，看看能不能解决它。

另外，您是否考虑过使用 jQuery Validate 插件？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T07:03:15.457

我检查了你的页面。您的页面中几乎没有错误..

首先，找不到您的 jQuery。

```
http://info.cfgt.com.au/wp-content/plugins/jquery.validity.1.2.0/jquery.js" 
```

因此，它没有将 $ 识别为函数。所以你的 $(function()) 给出错误。

关于电子邮件部分

将正则表达式更改为

```
var filter = /^[a-z0-9\._]*[a-z0-9_]@[a-z0-9][a-z0-9\-\.]*[a-z0-9]\.[a-z]{2,6}$/i; 
```

# php - Symfony2 购物车捆绑包

> ID：12243230
> 
> 赞同：4
> 
> 时间：2012-09-03T06:55:05.273
> 
> 标签：php, session, symfony, twig

我在为一家家族经营的葡萄酒进口商建立一个小型电子商务网站时，正在学习使用 Symfony2 的方法。慢慢地，我开始了解 Symfony2 的概念，但是在继续构建购物车捆绑包时，我不太确定实现它的正确方法（至少根据 Sf2 标准）是什么。

我根据会话制作了简单的购物车捆绑包。

我的问题是，当我在购物车中添加产品时，它会一直工作，直到产品 ID 为 0 到 9 并且产品数量会自动增加，但是在产品 ID 为 10 之后，它的数量等于产品 ID，而它应该是一个。而且产品信息错误是当我们想要获取产品信息时。

我希望这不是一个太宽泛的问题。我很清楚这样一个事实，一个真正强大的购物车实施不是一件容易的事。

# 我的代码在这里：

*   购物车控制器.php

    ```
    <?php

    namespace Webmuch\CartBundle\Controller;

    use Symfony\Bundle\FrameworkBundle\Controller\Controller;
    use Sensio\Bundle\FrameworkExtraBundle\Configuration\Method;
    use Sensio\Bundle\FrameworkExtraBundle\Configuration\Route;
    use Sensio\Bundle\FrameworkExtraBundle\Configuration\Template;
    use Symfony\Component\HttpFoundation\Response;

    use Webmuch\ProductBundle\Entity\Product;

    /**
     * @Route("/cart")
     */
    class CartController extends Controller
    {
    /**
     * @Route("/", name="cart")
     */
    public function indexAction()
    {
        // get the cart from  the session
        $session = $this->getRequest()->getSession();
        // $cart = $session->set('cart', '');
        $cart = $session->get('cart', array());

        // $cart = array_keys($cart);
        // print_r($cart); die;

        // fetch the information using query and ids in the cart
        if( $cart != '' ) {

            foreach( $cart as $id => $quantity ) {
                      $productIds[] = $id;

            }           

            if( isset( $productIds ) )
            {
                $em = $this->getDoctrine()->getEntityManager();
                $product = $em->getRepository('WebmuchProductBundle:Product')->findById( $productIds );
            } else {
                return $this->render('WebmuchCartBundle:Cart:index.html.twig', array(
                    'empty' => true,
                ));
            }

            return $this->render('WebmuchCartBundle:Cart:index.html.twig',     array(
                'product' => $product,
            ));
        } else {
            return $this->render('WebmuchCartBundle:Cart:index.html.twig',     array(
                'empty' => true,
            ));
        }
    }

    /**
     * @Route("/add/{id}", name="cart_add")
     */
    public function addAction($id)
    {
        // fetch the cart
        $em = $this->getDoctrine()->getEntityManager();
        $product = $em->getRepository('WebmuchProductBundle:Product')->find($id);
        //print_r($product->getId()); die;
        $session = $this->getRequest()->getSession();
        $cart = $session->get('cart', array());

        // check if the $id already exists in it.
        if ( $product == NULL ) {
             $this->get('session')->setFlash('notice', 'This product is not     available in Stores');          
            return $this->redirect($this->generateUrl('cart'));
        } else {
            if( isset($cart[$id]) ) {

                $qtyAvailable = $product->getQuantity();

                if( $qtyAvailable >= $cart[$id]['quantity'] + 1 ) {
                    $cart[$id]['quantity'] = $cart[$id]['quantity'] + 1; 
                } else {
                    $this->get('session')->setFlash('notice', 'Quantity     exceeds the available stock');          
                    return $this->redirect($this->generateUrl('cart'));
                }
            } else {
                // if it doesnt make it 1
                $cart = $session->get('cart', array());
                $cart[$id] = $id;
                $cart[$id]['quantity'] = 1;
            }

            $session->set('cart', $cart);
            return $this->redirect($this->generateUrl('cart'));

        }
    }

    /**
     * @Route("/remove/{id}", name="cart_remove")
     */
    public function removeAction($id)
    {
        // check the cart
        $session = $this->getRequest()->getSession();
        $cart = $session->get('cart', array());

        // if it doesn't exist redirect to cart index page. end
        if(!$cart) { $this->redirect( $this->generateUrl('cart') ); }

        // check if the $id already exists in it.
        if( isset($cart[$id]) ) {
            // if it does ++ the quantity
            $cart[$id]['quantity'] = '0';
            unset($cart[$id]);
            //echo $cart[$id]['quantity']; die();
        } else {
            $this->get('session')->setFlash('notice', 'Go to hell');    
            return $this->redirect( $this->generateUrl('cart') );
        }

        $session->set('cart', $cart);

        // redirect(index page)
        $this->get('session')->setFlash('notice', 'This product is Remove');
        return $this->redirect( $this->generateUrl('cart') );
    }
    } 
    ```

    *   index.html.twig：

    ```
    {% block body %}
    <h1>"FLAIRBAG" SHOPPING-CART</h1>

    <ul class="thumbnails">

    {% if empty %}
    <h5>Your shopping cart is empty.</h5>
    {% endif %}
    {% set cart = app.session.get('cart') %}

    {% if product %}

    <ul class="thumbnails">
    {% if app.session.hasFlash('notice') %} 

     <divclass="flash-notice">

      {{app.session.flash('notice') }} 
      {{ app.session.removeFlash('notice') }}

     </div>

    {% endif %}         
    {% for key, item in cart %}
        <p>ID:{{ key }}</p>
         <p>Quantity:{{ item }}</p>
         <button class="btn btn-primary"><a href="{{ path('cart_remove', {'id':     key}) }}">Remove</a></button>

       {% for item in product %}
            <p>{{ item.title }}</p>
        <p>{{ item.preview }}</p>
    {% endfor %}

    {% endfor %}
    </ul>

    {% endif %}
    </ul>

    <a href="{{ path('products') }}">Products</a>

    {% endblock %} 
    ```

    请帮我解决一下这个。

    谢谢！我感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T07:25:40.097

问题出在您的购物车数组中。根据您的模板，您希望有一个具有以下结构的数组：

```
cart {
    id => quantity
} 
```

即，数组的键是产品的 id，值是数量

但是然后在您的控制器中，您可以：

```
 $cart[$id] = $id;
        $cart[$id]['quantity'] = 1; 
```

这是一个非常不同的事情。你应该做：

```
 $cart[$id] = 1; 
```

在控制器中使用 $cart[$id]['quantity'] 的所有其他地方，请改用 $cart[$id] 。例如：

```
 $cart[$id] = $cart[$id] + 1; 
```

编辑：

在您的控制器中执行以下操作：

```
 $em = $this->getDoctrine()->getEntityManager();
    foreach( $cart as $id => $quantity ) {
          $product[] = $em->getRepository('WebmuchProductBundle:Product')->findById($id)
    }           

    if( !isset( $product ) )
    {
        return $this->render('WebmuchCartBundle:Cart:index.html.twig', array(
            'empty' => true,
        ));
    } 
```

# iphone - 如何修复此错误消息：“未声明的标识符”？

> ID：12243231
> 
> 赞同：2
> 
> 时间：2012-09-03T06:55:08.737
> 
> 标签：iphone, ios5, xcode4

这是代码：

```
 EKEventStore *store = [[EKEventStore alloc]
                       initWithAccessToEntityTypes:EKEntityMaskEvent];
NSArray *eventCalendars = [store calendarsForEntityType:EKEntityTypeEvent];

NSDate *monday, *sunday;
NSPredicate *predicate;
predicate = [store predicateForEventsWithStartDate:monday
                                           endDate:sunday
                                         calendars:eventCalendars];
NSArray *events = [store eventsMatchingPredicate:predicate];
NSLog(@"Events this week:");
for (EKEvent *event in events) {
    NSLog(@"%@ - starts at %@", event.title, event.startDate);
} 
```

我收到一条错误消息，提示“使用未声明的标识符'EKEntityMaskEvent'”和使用未声明的标识符'EKEntityTypeEvent'

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T08:02:57.727

来自[http://developer.apple.com/library/mac/#documentation/EventKit/Reference/EKEventStoreClassRef/Reference/Reference.html#//apple_ref/doc/uid/TP40009567](http://developer.apple.com/library/mac/#documentation/EventKit/Reference/EKEventStoreClassRef/Reference/Reference.html#//apple_ref/doc/uid/TP40009567)

`initWithAccessToEntityTypes:`在 OS X v10.8 及更高版本中可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T08:10:16.283

看起来您可能正在使用尚未公开的未来版本的 iOS SDK。为了完成这项工作，您必须使用支持新 SDK 的未发布版本的 Xcode。（也许你需要使用**Xcode 4.5 ？）**

如果您对未来未发布的 SDK 有任何疑问，请在 Apple Developer Forum 发帖！

# vim - 如何在 vim 中自动加载 cscope.out

> ID：12243233
> 
> 赞同：4
> 
> 时间：2012-09-03T06:55:15.900
> 
> 标签：vim, cscope

我想`cscope.out`在我的项目的子目录中自动加载我的，所以我在我的中添加了这个脚本，`.vimrc`如下所示：

```
set cscopequickfix=s-,c-,d-,i-,t-,e-

if has("cscope")
    set csprg=/usr/bin/cscope
    set csto=1
    set cst
    set csverb
    set cspc=3
    "add any database in current dir
    if filereadable("cscope.out")
        cs add cscope.out
    "else search cscope.out elsewhere
    else
       let cscope_file=findfile("cscope.out", ".;")
        "echo cscope_file
        if !empty(cscope_file) && filereadable(cscope_file)
            exe "cs add" cscope_file
        endif      
     endif
endif 
```

一开始它有效。但是每次我尝试做的时候：

```
:cs find c [tag] 
```

搜索结果将出现在 QuickFix 列表中，但包含结果的文件无法打开。

任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T07:43:18.727

如果添加一个`cscope.out`确保它设置正确的路径前缀。否则它将显示结果但无法加载文件。

例子：

```
 cs add ../cscope.out ../ 
```

所以你应该把你的脚本改成

```
 ...
 else
   let cscope_file=findfile("cscope.out", ".;")
   let cscope_pre=matchstr(cscope_file, ".*/")
   "echo cscope_file
   if !empty(cscope_file) && filereadable(cscope_file)
      exe "cs add" cscope_file cscope_pre
   endif
 ... 
```

# java - 将绘制的画布组件存储到数组中

> ID：12243243
> 
> 赞同：0
> 
> 时间：2012-09-03T06:56:11.843
> 
> 标签：java, android

有没有办法将所有绘制的对象放入一个数组中？这仅适用于绘图游戏，因此可以保存所有对象并通过这种方式将它们加载回来。谢谢，如果这是可能的！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T07:05:36.177

看看`Picture`类 - [http://developer.android.com/reference/android/graphics/Picture.html](http://developer.android.com/reference/android/graphics/Picture.html)

附加到画布后，它会记录所有绘图操作并存储它。在您可以将它们全部绘制在另一个画布上之后，或者存储/传输图片以在另一台设备上或以后制作。

**UPD**：像这样

```
 Picture picture = new Picture();
    Canvas canvas = picture.beginRecording(300, 300);
    canvas.drawRect(new Rect(5, 5, 10, 10), new Paint()); // configure paint here
    picture.endRecording();

    picture.writeToStream(new FileOutputStream("stored_drawing.pict")); 
```

现在，您将能够从文件中恢复此矩形并将其绘制在任何其他画布上。所以通常你可以通过这个类来包装你的用户绘图，它将存储所有用户绘图操作。

祝你好运

# javascript - 如何阻止来自 onScreenSubmitted 事件的 Aviarc 屏幕提交？

> ID：12243248
> 
> 赞同：1
> 
> 时间：2012-09-03T06:56:25.237
> 
> 标签：javascript, aviarc

onScreenSubmitted 系统事件的描述是

“在提交屏幕之前触发的事件，以允许小部件提示未保存的更改等。”

但是我找不到任何关于如何从其中实际停止提交的信息。如果您无法阻止丢弃更改，那么通知用户他们有未保存的更改并不是很有用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T07:10:13.867

为了取消屏幕的提交，您需要有一个自定义操作小部件，它只是将“false”返回到执行状态：

```
run: function(state) {
    state.getExecutionState().setReturnValue(false);
} 
```

然后在屏幕中，您应该能够使用类似这样的操作小部件（我将操作小部件称为“取消事件”）：

```
<when system-event="onBeforeScreenSubmit">
    <if>
        <confirm message="Are you sure you want to leave?" />
        <else>
            <cancel-event />
        </else>
    </if>
</when> 
```

# android - Android 平板电脑：使用外部触控板和触摸板（绘图）

> ID：12243253
> 
> 赞同：-3
> 
> 时间：2012-09-03T06:57:13.723
> 
> 标签：android

我想用我的 android 平板电脑连接外部触控板，我想做一些绘图类型的东西。你能帮我怎么做吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T07:06:06.080

只需将触摸板/触控板插入平板电脑上的 USB 主机连接器即可。

# iphone - UIbutton的对齐方式

> ID：12243256
> 
> 赞同：1
> 
> 时间：2012-09-03T06:57:44.120
> 
> 标签：iphone, uibutton

我正在开发一个简单的应用程序，其中包含两个带有按钮的选项卡，按钮在它们之间导航。因为我是 iphone 编程新手，所以无法将按钮对齐到所需的位置。在搜索谷歌时，我得到了一些包含在我的代码中的代码。我附上代码

```
-(void)viewDidLoad
{
[super viewDidLoad];
UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[button addTarget:self action:@selector(method)forControlEvents:UIControlEventTouchDown];
[button setTitle:@"forward" forState:UIControlStateNormal];
button.frame = CGRectMake(60, 70, 70, 60);
[self.view addSubview:button];
button.titleLabel.textColor = [UIColor redColor];
button.titleLabel.textAlignment = UITextAlignmentRight; //IT IS NOT WORKING
// button.titleLabel.font = [UIFont boldSystemFontOfSize:FONT_SIZE];
//[button setTitle:fromButton.titleLabel.text forState:UI
// Do any additional setup after loading the view, typically from a nib. 
} 
```

因为我已通过此代码将按钮对齐到右侧，但它位于默认位置。没变。请指导我。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T09:03:33.117

```
button.frame = CGRectMake(120, 70, 70, 60); 
```

CGRectMake(x, y, 宽度, 高度)

你玩过[CGRect](http://www.cocoanetics.com/2010/07/cgrect-tricks/)吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T07:19:26.463

尝试这个 ：

```
button.contentHorizontalAlignment = UIControlContentHorizontalAlignmentRight; 
```

# xslt - XSLT 父子遍历不能正常工作

> ID：12243259
> 
> 赞同：-2
> 
> 时间：2012-09-03T06:57:59.623
> 
> 标签：xslt, grouping, xslt-1.0, xslt-2.0

这是真实的场景，只有我更改了数据。我有以下父子关系xml。我正在尝试使用 XSLT 转换下面的 xml。我能够遍历父数据，但无法提供子节点的条件，例如子节点是否随时更改，它应该分隔样本，否则它应该由子节点分隔。

# 输入文件

```
<Samples>
    <Sample>
        <a1>a1name</a1>
        <b1>b1desc</b1>
        <c1ref>101</c1ref>
        <childref>101</childref>
        <eno>test</eno>
        <ename>somename</ename>
    </Sample>
    <Sample>
        <a1>a1name</a1>
        <b1>b1desc</b1>
        <c1ref>101</c1ref>
        <childref>101</childref>
        <eno>test123</eno>
        <ename>someothername</ename>
    </Sample>
    <Sample>
        <a1>a1name1</a1>
        <b1>b1desc1</b1>
        <c1ref>102</c1ref>
        <childref>102</childref>
        <eno>test1234</eno>
        <ename>someothername1</ename>
    </Sample>
    <Sample>
        <a1>a1name</a1>
        <b1>b1desc</b1>
        <c1ref>101</c1ref>
        <childref>101</childref>
        <eno>test</eno>
        <ename>somename</ename>
    </Sample>
    <Sample>
        <a1>a1name1</a1>
        <b1>b1desc1</b1>
        <c1ref>103</c1ref>
        <childref>103</childref>
        <eno>test1234</eno>
        <ename>someothername1</ename>
    </Sample>
</Samples> 
```

# OP没有解释的东西。可能是预期的输出文件

```
<Samples>
    <Sample>
        <a1>a1name</a1>
        <b1>b1desc</b1>
        <c1ref>101</c1ref>
        <childs>
            <childref>101</childref>
            <eno>test</eno>
            <ename>somename</ename>
        </childs>
        <childs>
            <childref>101</childref>
            <eno>test123</eno>
            <ename>someothername</ename>
        </childs>
    </Sample>
    <Sample>
        <a1>a1name1</a1>
        <b1>b1desc1</b1>
        <c1ref>102</c1ref>
        <childs>
            <childref>102</childref>
            <eno>test1234</eno>
            <ename>someothername1</ename>
        </childs>
    </Sample>
</Samples> 
```

**下面的 XSLT 工作，但它再次重复 childref 101。**

```
 <?xml version="1.0" encoding="UTF-8"?> 
    <xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
    version="1.0">       
    <xsl:output indent="yes" method="xml"/>
    <xsl:template match="Samples">     
    <xsl:copy>         
    <!-- select the first Sample -->
    <xsl:apply-templates select="Sample[1]"/>
    </xsl:copy> </xsl:template>  
    <xsl:template match="Sample">
    <!-- the a1 attribute in Sample will act as the identifier 
    (check if it is the same      element) -->     
    <xsl:variable name="identifier" select="a1"/>
     <xsl:copy>         
      <xsl:apply-templates select="a1"/> 
        <xsl:apply-templates select="b1"/>
         <xsl:apply-templates select="c1ref"/>
         <xsl:element name="childs">
             <xsl:apply-templates select="childref"/>
             <xsl:apply-templates select="eno"/>
             <xsl:apply-templates select="ename"/>
         </xsl:element>         
         <!-- get childs of Sample with same identifier -->
         <xsl:apply-templates 
         select="following-sibling::Sample[a1=$identifier]"
         mode="SameElement"/>     
</xsl:copy>     
<!-- select the nex Samples with different identifier -->
<xsl:apply-templates select="following-sibling::Sample[a1!=$identifier][1]"/>      </xsl:template>
<xsl:template match="Sample" mode="SameElement">
     <!-- here only output the child elements -->
     <xsl:element name="childs">
         <xsl:apply-templates select="childref"/>
         <xsl:apply-templates select="eno"/>
         <xsl:apply-templates select="ename"/>
     </xsl:element> </xsl:template>
<xsl:template match="*|@*|text()"> 
    <xsl:copy>
         <xsl:apply-templates/>
     </xsl:copy> 
</xsl:template> 
</xsl:stylesheet> 
```

**如何编写将产生上述输出的 xslt？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T13:02:26.307

老实说，我无法弄清楚您的 XSLT 中的错误。所以我想出了我自己的版本，使用层次分组（由 Jeni Tennison 描述）。这是一个 XSLT 1.0 解决方案。如果我使用这个输入 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<Samples>
<Sample>
    <a1>a1name</a1>
    <b1>b1desc</b1>
    <c1ref>101</c1ref>
    <childref>101</childref>
    <eno>test</eno>
    <ename>somename</ename>
</Sample>
<Sample>
    <a1>a1name</a1>
    <b1>b1desc</b1>
    <c1ref>101</c1ref>
    <childref>101</childref>
    <eno>test123</eno>
    <ename>someothername</ename>
</Sample>
<Sample>
    <a1>a1name1</a1>
    <b1>b1desc1</b1>
    <c1ref>102</c1ref>
    <childref>102</childref>
    <eno>test1234</eno>
    <ename>someothername1</ename>
</Sample>
<Sample>
    <a1>a1name</a1>
    <b1>b1desc</b1>
    <c1ref>101</c1ref>
    <childref>101</childref>
    <eno>test</eno>
    <ename>somename</ename>
</Sample>
<Sample>
    <a1>a1name1</a1>
    <b1>b1desc1</b1>
    <c1ref>103</c1ref>
    <childref>103</childref>
    <eno>test1234</eno>
    <ename>someothername1</ename>
</Sample>
</Samples> 
```

并应用此 XSLT：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">

<xsl:output method="xml" indent="yes"/>

<xsl:key name="keyByc1ref" match="Sample" use="c1ref"/>

<xsl:template match="Samples">
    <xsl:variable name="uniqueSet" select="Sample[generate-id()=generate-id(key('keyByc1ref',c1ref)[1])]"/>
    <Samples>
        <xsl:apply-templates select="$uniqueSet" mode="group"/>
    </Samples>
</xsl:template>

<xsl:template match="Sample" mode="group">
    <Sample>
        <xsl:copy-of select="a1"/>
        <xsl:copy-of select="b1"/>
        <xsl:apply-templates select="key('keyByc1ref',c1ref)" mode="item"/>
    </Sample>
</xsl:template>

<xsl:template match="Sample" mode="item">
    <childs>
        <xsl:copy-of select="childref"/>
        <xsl:copy-of select="eno"/>
        <xsl:copy-of select="ename"/>
    </childs>
</xsl:template>

</xsl:stylesheet> 
```

我得到这个 XML 输出。我认为它看起来不错，我不确定预期的输出：

```
<?xml version="1.0" encoding="UTF-8"?>
<Samples>
<Sample>
    <a1>a1name</a1>
    <b1>b1desc</b1>
    <childs>
        <childref>101</childref>
        <eno>test</eno>
        <ename>somename</ename>
    </childs>
    <childs>
        <childref>101</childref>
        <eno>test123</eno>
        <ename>someothername</ename>
    </childs>
    <childs>
        <childref>101</childref>
        <eno>test</eno>
        <ename>somename</ename>
    </childs>
</Sample>
<Sample>
    <a1>a1name1</a1>
    <b1>b1desc1</b1>
    <childs>
        <childref>102</childref>
        <eno>test1234</eno>
        <ename>someothername1</ename>
    </childs>
</Sample>
<Sample>
    <a1>a1name1</a1>
    <b1>b1desc1</b1>
    <childs>
        <childref>103</childref>
        <eno>test1234</eno>
        <ename>someothername1</ename>
    </childs>
</Sample>
</Samples> 
```

使用开头的键，您可以识别所有独特的项目集。对于每个标识的组，您运行“mode=group”模板，该模板复制 a1 和 b1，并调用将其他 3 个元素复制到子节点的 item-template。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T10:24:26.187

这是一个分组问题，可以使用[`xsl:for-each-group`](http://www.w3.org/TR/xslt20/#xsl-for-each-group).

但是，我还没有设法从您的示例中准确计算出您的分组标准，因此我无法为您提供精确的代码。

# c# - 将 SQL 数据归档到文件系统中

> ID：12243262
> 
> 赞同：0
> 
> 时间：2012-09-03T06:58:06.903
> 
> 标签：c#, sql-server-2005, filesystems, archive

我有一个 sql 数据库，需要将数据库归档到文件系统（excel 文件）中。

当我迁移到文件系统时，数据的大小是否会增加？

我正在通过 C# 进行存档并保存到文件中。

一些专家建议文件系统的数据比 sql 数据更多。

是对还是错？

# javascript - 为什么我得到带有额外字符的 responseText（通过 Ajax 从 Servlet 到 javaScript）？

> ID：12243263
> 
> 赞同：2
> 
> 时间：2012-09-03T06:58:14.287
> 
> 标签：javascript, ajax, servlets

我正在一个项目中工作。我试图从使用以下代码创建的会话中获取用户名：-

**获取当前用户信息.java**

```
package servlet;

import java.io.IOException;
import java.io.ObjectOutputStream;
import java.io.OutputStream;
import java.util.Vector;

import javax.servlet.ServletConfig;
import javax.servlet.ServletContext;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

public class GetCurrentUserInfo extends HttpServlet
{

    ServletContext contx = null;
    public void init(ServletConfig config) throws ServletException
    {
        contx = config.getServletContext();
    }

    public void doPost(HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException
    {
        try
        {
            OutputStream outer = res.getOutputStream();
            ObjectOutputStream oos = new ObjectOutputStream(outer);
            String userName = (String) req.getSession().getAttribute("username");
            oos.writeChars(userName);
            oos.flush();
            oos.close();
        }

        catch (Throwable e)
        {
            e.printStackTrace();

        }
    }
} 
```

**调用.js**

```
 function getUserInfo()
 {
     var userInfoHttp;
     if (window.XMLHttpRequest)
     {
         userInfoHttp = new XMLHttpRequest()
     }
     else if (window.ActiveXObject)
     {
         userInfoHttp = new ActiveXObject("Microsoft.XMLHTTP")
     }
     userInfoHttp.open("POST", "GetCurrentUserInfo", false);
     userInfoHttp.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
     userInfoHttp.onreadystatechange = function ()
     {
         if (userInfoHttp.readyState == 4)
         {
             if (userInfoHttp.status == 200)
             {
                 var res = TrimString(userInfoHttp.responseText);
                 alert(res);
             }
         }
     }
     userInfoHttp.send(null);
     isAnnotationUpdate = false;

 } 
```

我知道我正在获取带有一些额外字符的用户名，例如：-“���w�s�@�s�.�c�o�m”实际上我的用户名仅 s@s.com。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T07:10:45.223

我认为有两件事可以解决您的编码问题

首先使用 OutputStreamWriter 并为其赋予编码值

```
OutputStream stream = response.getOutputStream();
OutputStreamWriter writer = new OutputStreamWriter(stream, "UTF-8");
String userName=(String)req.getSession().getAttribute("username");
writer.write(userName);
writer.flush(); 
```

然后确保您的响应具有正确的编码

```
response.setCharacterEncoding("UTF-8"); 
```

相关文章：[从 servlet 下载文件客户端时出现意外字符](https://stackoverflow.com/questions/9416687/unexpected-character-when-downloading-file-client-side-from-a-servlet)

**更新**

还有一些我在原始答案中忘记的东西。将响应对象的 ContentTyoe 设置为 text/plain 因为您实际上是在返回纯文本字符

```
response.setContentType("text/plain"); 
```

# php - PHP strtotime() 为 JavaScript 日期字符串返回 false

> ID：12243266
> 
> 赞同：0
> 
> 时间：2012-09-03T06:58:32.693
> 
> 标签：php, javascript, date, strtotime

在浏览器中，在 JS 中

```
var today = new Date()
todaySendToServer = today.toString(); 
```

我在 AJAX 调用中或作为 URL 的一部分将 todaySendToServer 发送到服务器。

在服务器上，在 PHP 中：

```
$todayJsDateString1 = preg_replace('#^(\d+)/(\d+)/(\d+)\s([\d:]+)\s([a-zA-z]{0,2})$#','$3-    $2-$1 $4 $5', $todayJsDateString); 
$todayTimestamp = strtotime(todayJsDateString1); 
```

对于某些浏览器（如 IE9）返回的日期字符串，strtotime() PHP 调用返回 false

有没有其他方法可以实现这一目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T07:01:11.713

而是传递时间戳，所以你甚至不需要`strtotime`在 php 端使用。

```
var today = new Date();
var ts = today.getTime() / 1000; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T07:04:38.380

为什么不将其作为时间戳一路发送？

```
var timestamp = new Date().getTime() / 1000;

$todayTimestamp = $todayJsDateString; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T06:59:58.670

我猜这只是一个简单的错字，你错过了一个美元符号：

```
$todayJsDateString1 = preg_replace('#^(\d+)/(\d+)/(\d+)\s([\d:]+)\s([a-zA-z]{0,2})$#','$3-    $2-$1 $4 $5', $todayJsDateString); 
$todayTimestamp = strtotime($todayJsDateString1); 
```

# delphi - Delphi 2007 是否支持Windows 2008 R2？

> ID：12243268
> 
> 赞同：3
> 
> 时间：2012-09-03T06:58:36.273
> 
> 标签：delphi, windows-server-2008-r2, delphi-2007

客户端通过 Citrix XenApp 在 Windows 2008 R2 上运行我们的 Delphi 2007 应用程序。他一直面临文件打开对话框有时会崩溃的问题。他为 windows 和 Citrix 应用了最新更新。我在网上看过很多文章，其中除了 Delphi 之外的各种应用程序（如 MS Office 应用程序、VS 2008、Adobe PDF 等）也出现了类似问题。客户在任何其他应用程序上都没有遇到这种情况，因此指责我们的应用程序。

如果我们的应用程序的“兼容模式”是“Windows XP SP3”，那么一切都很好。因此，客户提出了一个问题，说明我们的 Delphi 应用程序是否通过了 Windows 2008 R2 认证。

如果我们必须使我们的 Delphi 2007 应用程序通过 Windows 7/2003/2008/2008 R2 认证，需要进行哪些更改？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T13:50:15.327

我们通过 DPR 中的这些附加行修复了**Windows 2008 R2 64 位终端服务器环境中许多奇怪的 Delphi (2009) 应用程序崩溃：**

```
// make it Terminal Server Aware (app without installer writing to ini files / registry)
{$SetPEOptFlags IMAGE_DLLCHARACTERISTICS_TERMINAL_SERVER_AWARE} 
```

注：编译需要`Windows`单位

崩溃出现在许多意想不到的地方，例如打开的对话框。使用出色的 madExcept 工具，我们发现应用程序在某些 Windows DLL 的操作系统例程中崩溃，并在我们添加“**终端服务器感知**”标志时消失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T07:01:53.430

我不是 Delphi 开发人员，但 Google 搜索 Delphi 2007 系统要求将我带到此页面[http://edn.embarcadero.com/article/36573#requirements](http://edn.embarcadero.com/article/36573#requirements)

支持以下 Windows 平台：

```
Microsoft® Windows 2000 Professional or Windows 2000 Server (SP4 or higher and security updates are recommended)
Microsoft Windows XP Professional (SP2)
Microsoft Windows Vista™
Microsoft Windows Server 2003 (SP1)
The latest service packs and security updates are recommended for all platforms
Microsoft Internet Explorer 6.0 SP1 or later 
```

我在这里看不到 Windows 2008。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T13:34:01.470

以下情况并不少见：

您可以自行决定和测试您的应用程序在 2008 年的运行情况。要知道，随着每个 Windows 版本的发布，很多事情都会发生变化，更不用说服务器/工作站了。

您告诉他们您将支持您的应用程序运行的情景。

如果您要求您的应用程序以与 xp sp3 的兼容模式运行，并告诉他们，并告诉他们您在该配置之外不支持它。如果您在虚拟环境下不支持它..那么您告诉他们。

显然，更好的答案是在 2008 R2 上对其进行测试，并检查您的所有功能并说您将支持它在自然状态下运行。

# email - opa : 发送邮件

> ID：12243269
> 
> 赞同：1
> 
> 时间：2012-09-03T06:58:41.633
> 
> 标签：email, opa

我正在尝试使用 SmtpClient.try_send() 发送电子邮件。此代码用于在 opa 切换到 node.js 后端之前工作：

```
import stdlib.web.mail.smtp.client
import stdlib.web.mail

function start()
{
        Email.email from = {name:some("name"), address:{local:"contact", domain:"hello.com"}}
        Email.email to = {name:some("name"), address:{local:"contact", domain:"hello.com"}}
        Email.content content = {text : "This is Great!"}
        SmtpClient.try_send(from, to, "subject",content, Email.default_options)
        <>Hello</>
}

Server.start(
   {port:8092, netmask:0.0.0.0, encryption: {no_encryption}, name:"test"},
   [
     {page: start, title: "test" }
   ]
) 
```

但现在它失败并出现以下错误：

```
Test serving on http://ks3098156.kimsufi.com:8092

node.js:201
        throw e; // process.nextTick error, or 'error' event on first tick
              ^
Error: write EPIPE
    at errnoException (net.js:646:11)
    at Object.afterWrite [as oncomplete] (net.js:480:18) 
```

怎么了 ？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T16:31:18.693

你可以试试：

`SmtpClient.try_send(from, to, "subject", content, { Email.default_options with to:[to] })`

# android - 动态更改通过 xml 膨胀的 RelativeLayout 的边距

> ID：12243274
> 
> 赞同：0
> 
> 时间：2012-09-03T06:59:23.953
> 
> 标签：android, android-relativelayout

我正在尝试通过膨胀 xml 来动态添加十个 relativeLayouts，但是相对布局会重叠。如何通过代码动态更改膨胀 xml 的边距。

下面是代码reuse.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/aaa"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
     >

    <ImageView
        android:id="@+id/image"
        android:layout_width="40dp"
        android:layout_height="40dp"
        android:layout_marginLeft="5dp"
        android:scaleType="centerCrop"
        android:src="@drawable/ballaya" />

    <TextView
        android:id="@+id/text"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="left|center_vertical"
        android:layout_marginLeft="50dp"
        android:layout_marginTop="12dp"
        android:layout_weight="1"
        android:text="Srimannarayana earns Rs 8.65 cr on day 1"
        android:textColor="#FFFFFF"
        android:textSize="11sp"
        android:textStyle="bold" />

    <View
        android:id="@+id/seperator"
        android:layout_width="fill_parent"
        android:layout_height="0.5dp"
        android:layout_below="@+id/image"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="5dp"
        android:background="#FFFFFF" />

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="10dp"
        android:layout_height="10dp"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:layout_marginRight="10dp"
        android:src="@drawable/popover_bg_rghtarw" />

</RelativeLayout> 
```

item.xml 的代码

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#06516E" >

    <RelativeLayout 
     android:layout_width="fill_parent"
    android:layout_height="20dp" 
    android:background="#49C7F9">
         <TextView
            android:id="@+id/HeadLines"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"

            android:text="Latest News"
            android:textColor="#FFFFFF"
            android:textSize="12sp"
            android:textStyle="bold" />

    </RelativeLayout>

    <RelativeLayout
        android:id="@+id/newsLayout"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginTop="30dp" >

    </RelativeLayout>
</RelativeLayout> 
```

Java 代码

```
@Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub

        super.onCreate(savedInstanceState);
        setContentView(R.layout.item);

        newsLayout =(RelativeLayout)findViewById(R.id.newsLayout);

        LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        RelativeLayout row[] = new RelativeLayout[10];
         TextView text[]= new TextView[10];
        for(int i=0;i<10;i++){

        RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(
                LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);

       row[i] = (RelativeLayout) inflater.inflate(R.layout.reuse,null);
       params.setMargins(0, 50, 0, 0);
        newsLayout.addView(row[i],params);

         text[i]= (TextView) row[i].findViewById(R.id.text);
        text[i].setText("AAAAAAA");

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T07:04:31.793

您可以使用`LinearLayout`而不是`RelativeLayout`for`newsLayout`并将方向设置为 VERTICAL。

而不是`newsLayout =(RelativeLayout)findViewById(R.id.newsLayout);` 写：`newsLayout =(LinearLayout)findViewById(R.id.newsLayout);`

其余代码将保持原样。

这将解决您的问题。

# jquery - 从另一个页面直接链接到 jQuery ajaxtab？

> ID：12243275
> 
> 赞同：0
> 
> 时间：2012-09-03T06:59:25.097
> 
> 标签：jquery

您好我在另一个页面上链接到 ajaxtabs 时遇到问题。

我已经[从另一个页面直接查看了此链接到 jQuery 选项卡？](https://stackoverflow.com/questions/10818754/link-directly-to-a-jquery-tab-from-another-page/10818889#10818889)这正是我想做的。但是我的内容是通过 Ajax 加载的，它也有 'stickytab' cookie。

我正在使用 jQuery UI Tabs 1.8.22，可以帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T03:13:18.490

```
 <script>
  $(function() {
    $( "#tabs" ).tabs({
      ajaxOptions: {
        error: function( xhr, status, index, anchor ) {
          $( anchor.hash ).html(
            "Couldn't load this tab. We'll try to fix this as soon as possible. " +
            "Please contact webmaster@tch.anu.edu.au" );
        }
      }
    });
  });
  </script>

     <script type="text/javascript">
    $(function(){
      $(".tabs").tabs();
      if($(".tabs") && document.location.hash){
        $.scrollTo(".tabs");
      }
      $(".tabs ul").localScroll({
        target:".tabs",
        duration:0,
        hash:true
      });
    });
  </script>

<script type="text/javascript">
  $( function()
  {
    var cookieName = 'stickyTab';

    $( '#tabs' ).tabs( {
      selected: ( $.cookies.get( cookieName ) || 0 ),
      select: function( e, ui )
      {
        $.cookies.set( cookieName, ui.index );
      }
    } );
  } );
</script> 
```

# php - PHP Preg_match_all 正则表达式模式

> ID：12243276
> 
> 赞同：0
> 
> 时间：2012-09-03T06:59:25.913
> 
> 标签：php, regex, preg-match-all

我需要你的帮助来解决我自己做不到的模式。

我得到了这个文件：

```
 description1="SIOUH : Authentification Cerbere - Acces"
    description2="Acces formulaire authentification SIOUH"
    addheader="Pragma: no-cache "
    method="get"
    url="${AUTH_URL}/login/LoginDispatchAction.do?appId=${APP_ID}&backURL=${APP_URL_ENC}"
    errormessage="Phase 1 : Impossible atteindre le formulaire authentification CERBERE pour SIOUH"
    serveur="yes"
    verifypositive="loginConnectAppliForm"
    logrequest="yes" logresponse="no" /> 
```

我有这个完美的 preg_match_all ：

```
preg_match_all  ( '#(.*?)="(.*?)"#s', $contents, $matches, PREG_SET_ORDER ); //Chaque option 
```

我的问题是我可以有简单的引号而不是双引号，我怎样才能改变我的模式来处理它？例如，我需要像所有其他人一样抓住这条线：

```
parseresponse='name="conversationId" value="|"' 
```

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T07:03:54.690

尝试使用正则表达式

```
^(.*?)=[\'"](.*?)[\'"]$ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T07:42:22.100

使用反向引用来要求结束引号与开始引号匹配：

```
'#(.*?)=([\'"])(.*?)\2#' 
```

# linux - 通过命令行为 linux 中的 pgagent 设置作业计划

> ID：12243283
> 
> 赞同：1
> 
> 时间：2012-09-03T07:00:18.067
> 
> 标签：linux, postgresql, job-scheduling, pgagent

我无法在 linux shell 中为 pgagent 设置作业计划。但是，我可以在 pgAdmin GUI 中执行此操作，但不能在命令行中执行此操作。有人在linux命令行中做过吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T07:05:00.060

它是 postgres 数据库上的 INSERT 或 UPDATE，在模式 pgagent 中。

```
SELECT * FROM pg_tables WHERE schemaname = 'pgagent'; 
```

# java - 如何在java中读取来自雅虎的未读电子邮件

> ID：12243284
> 
> 赞同：1
> 
> 时间：2012-09-03T07:00:21.293
> 
> 标签：java

我想阅读来自雅虎邮件的未读邮件。所以我使用了以下代码，但它给了我错误

如下

```
javax.mail.MessagingException: Connect failed;
  nested exception is:
    java.io.IOException: Connect failed
    at com.sun.mail.pop3.POP3Store.protocolConnect(POP3Store.java:148)
    at javax.mail.Service.connect(Service.java:275)
    at javax.mail.Service.connect(Service.java:156)
    at ReadYahooMail.<init>(ReadYahooMail.java:20)
    at ReadYahooMail.main(ReadYahooMail.java:56)
Caused by: java.io.IOException: Connect failed
    at com.sun.mail.pop3.Protocol.<init>(Protocol.java:104)
    at com.sun.mail.pop3.POP3Store.getPort(POP3Store.java:201)
    at com.sun.mail.pop3.POP3Store.protocolConnect(POP3Store.java:144)
    ... 4 more 
```

我使用以下代码

```
 import java.io.*;
import java.util.*;
import javax.mail.*; 
public class ReadYahooMail {
    public ReadYahooMail(){
        String host = "smtp.mail.yahoo.com";
  String user = "1234";
  String password = "*******"; 
try{
  // Get system properties 
   Properties properties = System.getProperties(); 

  // Get the default Session object.
  Session session = Session.getDefaultInstance(properties);

  // Get a Store object that implements the specified protocol.
  Store store = session.getStore("pop3");

  //Connect to the current host using the specified username and password.
  store.connect(host, user, password);

  //Create a Folder object corresponding to the given name.
  Folder folder = store.getFolder("inbox");

  // Open the Folder.
  folder.open(Folder.READ_ONLY);

  Message[] message = folder.getMessages();

  // Display message.
  for (int i = 0; i < message.length; i++) {

  System.out.println("------------ Message " + (i + 1) + " ------------");

  System.out.println("SentDate : " + message[i].getSentDate());
  System.out.println("From : " + message[i].getFrom()[0]);
  System.out.println("Subject : " + message[i].getSubject());
  System.out.print("Message : ");

  InputStream stream = message[i].getInputStream();
  while (stream.available() != 0) {
  System.out.print((char) stream.read());
  }
  System.out.println();
  }

  folder.close(true);
  store.close();
}
catch(Exception e){
    e.printStackTrace();
}

    }
    public static void main(String args[]){
        ReadYahooMail r=new ReadYahooMail();
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T07:08:42.480

嗯，可能会使用 IMAP 协议，就像在这个例子中一样：

[在 Java 中使用 IMAP 从 Yahoo 检索电子邮件](http://www.mindfiresolutions.com/Retrive-email-from-Yahoo--Gmail-server-using-IMAP-in-JAVA-1244.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T07:14:36.153

与其他电子邮件提供商不同，雅虎不提供免费的 POP 或 IMAP 服务。因此，这可能是 IOException 的原因。

# javascript - 无法将 Java 脚本函数与 Panel 的 OnLoad 事件绑定

> ID：12243287
> 
> 赞同：0
> 
> 时间：2012-09-03T07:00:46.340
> 
> 标签：javascript, asp.net, panel

我正处于使用 java 脚本的初始阶段，我刚刚在 asp.net 中编写了一个用于使用 Google Maps APIv3 的小应用程序。我想在面板中显示地图。这是我编写的代码，但在将 java 脚本与 Panel 的 OnLoad 事件绑定时遇到问题：

```
<%@ Page Language="C#" AutoEventWireup="true"  CodeFile="Default.aspx.cs" Inherits="_Default" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head runat="server">
  <title>Map Test</title>
    <style type="text/css">
      html{height:100%}
      body{height:100%; margin:0;padding:0}
      #map_can{height:100%}
    </style>
  <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?key=AIzawerwerQ55N500rxxxxdPNvMoQ74aRYO30Wo&sensor=true">
  </script>
  <script type="text/javascript">
     function init()
     {
       var mapoptions=
          {
            center: new google.maps.LatLng(17.379064211298, 78.478946685791),
            zoom:8,
            mapTypeId: google.maps.MapTypeId.ROADMAP
          };
       var map=new  google.maps.Map(document.getElementById("map_can"),mapoptions);
     }
  </script>
</head>
<body>
  <form id="form1" runat="server">
    <asp:Panel  OnLoad="init()" ID="Panel1" runat="server" 
      style="z-index: 1; left: 37px; top: 59px; position: absolute; height: 273px; width: 565px">
      <div id="map_can" style="width:100%; height:100%"></div>
    </asp:Panel>
  </form>
</body>
</html> 
```

错误：`ASP.default_aspx' does not contain a definition for 'init'`

我想我以错误的方式绑定它。请提出建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T07:23:35.353

Panel`OnLoad`属性用于为 Load 事件设置*服务器端*处理程序（它应该是页面类中的方法）。

无法在 Panel 控件上设置*客户端*加载事件，因为它生成 DIV 元素（并且 DIV 元素不支持加载事件）。

一个原始的方法是使用BODY 元素的*客户端*加载事件：

```
<body onload="init();" >
    ...
</body> 
```

但更好的方法是等待 DOM 准备好调用函数。一种简单且跨浏览器的方法是使用[jQuery](http://jquery.com/)之类的库：

```
<script type="text/javascript">
    $(document).ready(function() {
        var mapoptions = {
            center: new google.maps.LatLng(17.379064211298, 78.478946685791),
            zoom: 8,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        var map = new  google.maps.Map(document.getElementById("map_can"),mapoptions);  
    });
</script> 
```

# iphone - 未调用 UIButton 操作

> ID：12243288
> 
> 赞同：0
> 
> 时间：2012-09-03T07:00:47.030
> 
> 标签：iphone, objective-c, ios, uibutton

我有一个 UIButton，我正在使用从 XML 文件解析的内容动态添加它（它也被缓存）。

我第一次运行应用程序时，按钮的操作没有被调用 - 但它的图像和其他一切都加载得很好。我第二次运行该应用程序时，该按钮有效。

关于为什么在我第一次运行应用程序时按钮的操作没有被调用的任何线索？

```
- (void)fetchHeader
{
    [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:YES];

    // Initiate the request...

    channel1 = [[FeedStore sharedStore] fetchFeaturedHeaderWithCompletion:
            ^(RSSChannel *obj, NSError *err) {

                if(!err) {
                    [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:NO];

                    // Set our channel to the merged one
                    channel1 = obj;

                    RSSItem *d = [[channel1 items] objectAtIndex:0];
                    RSSItem *c = [[channel1 items] objectAtIndex:1];

                    NSString *param = [d photoURL]; // the URL from the XML
                    NSString *param1 = [c photoURL]; // the URL from the XML

                    featured1 = [[UIButton alloc] init];
                    [featured1 addTarget:self action:@selector(featuredButtonPress:) forControlEvents:UIControlEventTouchUpInside];
                    [featured1 setFrame:CGRectMake(18, 20, 123, 69)];
                    [featured1 setImageWithURL:[NSURL URLWithString:param] placeholderImage:[UIImage imageNamed:@"featuredheaderbg.png"]];
                    featured1.tag = 1;
                    [[self view] addSubview:featured1];
                }
       }];
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T18:14:00.467

问题是 UIView 覆盖了它下面的按钮。因为视图是透明的，所以我没有意识到它覆盖了任何东西。

# templates - 如何创建 PCL 要素类的通用实例？

> ID：12243295
> 
> 赞同：1
> 
> 时间：2012-09-03T07:01:16.343
> 
> 标签：templates, eigen, point-cloud-library

我想用 PCL 计算各种特征。我的想法是创建一个程序，根据命令行上给出的内容（类的名称及其参数）创建功能，计算它们并将它们写入文件中。

因此，我需要一些创建“通用”功能的代码。PCL 功能是模板类。必须使用输入类型（您要计算它们的数据类型）和输出类型来实例化它们。输入类型通常是`pcl::PointCloud`所以我认为这不是问题。对于输出，我将`Eigen::MatrixXf`其用作“通用”输出类型。但是我有一些奇怪的错误。

我写了一个最小的例子（它使用了一些`typedef`以便更容易修改）：

```
#include <pcl/point_types.h>
#include <pcl/features/normal_3d.h>
#include <pcl/features/fpfh.h>

typedef pcl::PointXYZ  Input_T;
//#define USE_EIGEN
#ifdef USE_EIGEN
#warning "USING EIGEN"
typedef Eigen::MatrixXf Output_T;
#else
typedef pcl::PointNormal Output_T;
#endif

int main()
{
  pcl::Feature<Input_T, Output_T>* q = new pcl::NormalEstimation<Input_T, Output_T>;
} 
```

如果您“按原样”编译它，它应该可以工作。如果您取消注释第 7 行，它将不再起作用。GCC给出的错误是：

```
tmp/test.cc:16:49: erreur: cannot convert ‘pcl::NormalEstimation<pcl::PointXYZ, Eigen::Matrix<float, -0x00000000000000001, -0x00000000000000001> >*’ to ‘pcl::Feature<pcl::PointXYZ, Eigen::Matrix<float, -0x00000000000000001, -0x00000000000000001> >*’ in initialization 
```

我在 Ubuntu 12.04 下使用 PCL 1.6 和 GCC 4.6.3。

知道出了什么问题吗？我已经询问了 PCL 用户邮件列表，但没有成功。

# c# - “/”应用程序中的服务器错误

> ID：12243298
> 
> 赞同：4
> 
> 时间：2012-09-03T07:01:36.983
> 
> 标签：c#, asp.net, .net, web-config

我收到这样的错误，所有其他页面都可以正常运行，但出现错误我已在本地网站中添加了新页面，这正在运行

> ## “/”应用程序中的服务器错误。
> 
> 运行时错误描述：服务器上发生应用程序错误。此应用程序的当前自定义错误设置可防止远程查看应用程序错误的详细信息（出于安全原因）。但是，它可以被本地服务器机器上运行的浏览器查看。
> 
> 详细信息：要在远程计算机上查看此特定错误消息的详细信息，请在位于当前 Web 应用程序根目录的“web.config”配置文件中创建一个标签。然后，此标记应将其“模式”属性设置为“关闭”。
> 
> ```
> <!-- Web.Config Configuration File -->
> 
> <configuration>
>     <system.web>
>         <customErrors mode="Off"/>
>     </system.web>
> </configuration> 
> ```
> 
> 注意：您看到的当前错误页面可以通过修改应用程序配置标记的“defaultRedirect”属性以指向自定义错误页面 URL 来替换为自定义错误页面。
> 
> ```
> <!-- Web.Config Configuration File -->
> 
> <configuration>
>     <system.web>
>         <customErrors mode="RemoteOnly" defaultRedirect="mycustompage.htm"/>
>     </system.web>
> </configuration> 
> ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T07:56:39.707

如果您想知道错误是什么，请更改您的 web.config 文件，如下所示：

```
 <configuration>
     <system.web>
         <customErrors mode="Off"/>
     </system.web>
 </configuration> 
```

基本上，您得到的错误是告诉您这样做，以便您能够看到实际的错误。

警告：如果您的网站在互联网上，那么任何尝试查看的人都会看到确切的错误消息。这可能是一个安全问题，因为它可能使人们能够看到您的部分代码甚至配置。

# iphone - 如何在 iPhone 的通讯录中添加联系人收藏夹

> ID：12243305
> 
> 赞同：4
> 
> 时间：2012-09-03T07:02:10.003
> 
> 标签：iphone, ios, abaddressbook

我想以编程方式在 iPhone 的通讯录中添加一个联系人，并希望将其设为收藏夹，以便显示在本机联系人应用程序的收藏夹列表中。也可以以编程方式将已经存在的号码添加到收藏夹列表中吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T09:18:30.317

这对开发人员来说是不可用的，因为我发现很难

# java - 使用 ServerSocket 引发的 ConnectException

> ID：12243312
> 
> 赞同：0
> 
> 时间：2012-09-03T07:02:46.047
> 
> 标签：java

以下代码在编译时是正确的，但在运行时显示： ConnectException 错误图像：

![错误图像](../Images/745ed2b5e1778029979597039bacc84a.png)

```
import java.net.*;
import java.io.*;

class TcpChat 
 {
public static void main(String[] args) throws Exception
 {
Socket s = new Socket("Ip",20000);
ServerSocket ss = new ServerSocket(20000);

new Thread(new TcpClient(s)).start();
new Thread(new TcpServer(ss)).start();
 }
 }

class TcpClient implements Runnable
 {
Socket s;
TcpClient(Socket s)
 {
this.s = s;
 }

public void run()
 {
try
 {
OutputStream out = s.getOutputStream();
out.write("hello javaserver".getBytes());
s.close();
 }
catch (Exception e)
{
 }
 }
 }

class TcpServer implements Runnable
{
ServerSocket ss;
TcpServer(ServerSocket ss)
 {
this.ss = ss;
 }

public void run()
 {
try
{
Socket s = ss.accept();
InputStream in = s.getInputStream();
byte[] buf =new byte[1024];
int length =in.read(buf);
String ip =s.getInetAddress().getHostAddress();
String data = new String(buf,0,length);

System.out.println(ip+":::"+data);

s.close();
ss.close();

 }
catch (Exception e)
{
}
}

} 
```

* * *

此外，我使用的 IP 地址没有错误，在我的 PC 中我使用自己的 IP。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T07:06:13.493

您没有发布整个代码，因此很难检查，但似乎您在实际打开服务器套接字*之前尝试连接到端口（即打开客户端套接字）。*当然，那是行不通的，因为该端口上还没有任何东西在监听（因此：连接被拒绝）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T07:23:40.957

更改您的主要方法，例如

```
 ServerSocket ss = new ServerSocket(20000);
    Socket s = new Socket("127.0.0.1", 20000);
    new Thread(new TcpServer(ss)).start();
    new Thread(new TcpClient(s)).start(); 
```

`Chat Server` [你可以在这里](http://inetjava.sourceforge.net/lectures/part1_sockets/InetJava-1.9-Chat-Client-Server-Example.html)找到一个更好的例子。您也可以`sockets`从[这里阅读](http://docs.oracle.com/javase/tutorial/networking/sockets/readingWriting.html)

# asp.net-mvc-3 - 1,2,3，下一个网格视图页面创建

> ID：12243313
> 
> 赞同：0
> 
> 时间：2012-09-03T07:02:59.393
> 
> 标签：asp.net-mvc-3, razor

我正在关注 1,2,3 Next 的网格视图。[这](http://www.asp.net/web-pages/tutorials/introducing-aspnet-web-pages-2/form-basics)是我正在关注的教程。但它具有如下所示的数据库访问权限。实际上本教程是通过使用 Web Metric 完成的。这是直接在cshtml代码中访问数据库。

```
@{
    var db = Database.Open("xxxxx");
    var selectedData = db.Query("SELECT * FROM yyyy");
    var grid = new WebGrid(source: selectedData);
} 
```

但我的意图是使用实体框架做查询表单。我已经为数据访问创建了一个单独的项目。我正在使用该 ddl 进行数据处理。这样我就有权如此处所示。您建议如何使用实体框架作为单独的项目创建网格视图。

ps：我正在将一个 IEnumerable 对象列表传递给视图。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T08:44:55.237

首先阅读有关实体框架的本教程。

[http://afana.me/post/paging-sorting-and-searching-ef-cf-and-mvc.aspx](http://afana.me/post/paging-sorting-and-searching-ef-cf-and-mvc.aspx)

使用实体框架时，现在您将从`selectedData`控制器传递到您的视图。

现在你的 webGrid 会像这样使用它，

```
var grid = new WebGrid(source: Model.selectedData); 
```

# volume - 成交量指标技术

> ID：12243314
> 
> 赞同：-1
> 
> 时间：2012-09-03T07:03:04.377
> 
> 标签：volume, indicator

我拼命地试图建立一个音量指标

刚刚找到了一些音量滑块示例。我要找的如下图所示：

有哪些好的成交量指标技术可以处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T00:56:05.863

我试图创造你需要的东西。请看[这里](http://simulator.su/demo/volume-slider/)。

如果它是您正在寻找的，这里是代码：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009" 
     xmlns:s="library://ns.adobe.com/flex/spark" 
     xmlns:mx="library://ns.adobe.com/flex/mx" creationComplete="group1_creationCompleteHandler(event)">

<fx:Script>
    <![CDATA[
        import mx.events.FlexEvent;

        private static const BAR_HEIGHT:Number = 44;
        private static const BAR_WIDTH:Number = 5;
        private static const BAR_GAP:Number = 2;
        private static const BAR_COUNT:Number = 50;
        private static const BAR_COLOR_ACTIVE:uint = 0x00ff00;

        [Bindable]
        public var initialPercent:Number;

        private var totalBarHeight:Number;

        protected function group1_creationCompleteHandler(event:FlexEvent):void
        {
            totalBarHeight = BAR_HEIGHT * BAR_COUNT;
            drawBars(blackBars);
            update(initialPercent);
        }

        public function update(percent:Number):void {
            drawBars(greenBars, BAR_COLOR_ACTIVE, percent);
        }

        public function drawBars(where2draw:Group, color:uint = 0x000000, percent:Number = 100):void {
            //complete bars
            var completeBars:Number = Math.floor(BAR_COUNT * percent / 100); 
            where2draw.graphics.clear();
            for (var i:int = 0; i < completeBars; i++) 
            {
                var barX:Number = (BAR_WIDTH + BAR_GAP) * i;
                where2draw.graphics.beginFill(color);
                where2draw.graphics.drawRect(barX, 0, BAR_WIDTH, BAR_HEIGHT);
                where2draw.graphics.endFill();
            }
            //partial bars, if needed
            var reminderBarHeight:Number = totalBarHeight * percent / 100 - completeBars * BAR_HEIGHT;
            var barY:Number = BAR_HEIGHT - reminderBarHeight;
            var barX:Number = (BAR_WIDTH + BAR_GAP) * completeBars;
            where2draw.graphics.beginFill(color);
            where2draw.graphics.drawRect(barX, barY, BAR_WIDTH, reminderBarHeight);
            where2draw.graphics.endFill();
        }

    ]]>
</fx:Script>

<s:Group id="blackBars"/>
<s:Group id="greenBars"/>

</s:Group> 
```

使用 ActionScript 构建它可能会更好。我创建它只是为了传达这个想法。

谈到您需要的第二个组件，它应该更容易。您可以通过在组件上绘制渐变并在值发生变化时为蒙版设置动画来实现该效果。

谢谢！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T15:09:53.357

这是您需要的：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600"
               creationComplete="application1_creationCompleteHandler(event)" backgroundColor="0x000000">

    <fx:Script>
        <![CDATA[
            import mx.events.FlexEvent;

            private static const SLIDER_HEIGHT:Number = 237;
            private static const SQUARE_HEIGHT:Number = 9;
            private static const SQUARE_GAP:Number = 3;

            protected function hslider1_changeHandler(event:Event):void
            {
                updateSlider(volumeSlider.value);
            }

            protected function application1_creationCompleteHandler(event:FlexEvent):void
            {
                var squaresNumber:Number = Math.floor((SLIDER_HEIGHT + SQUARE_GAP) / (SQUARE_HEIGHT + SQUARE_GAP));
                for (var i:int = 0; i < squaresNumber ; i++) 
                {
                    sliderMask.graphics.beginFill(0x000000);
                    sliderMask.graphics.drawRect(0, i * (SQUARE_HEIGHT + SQUARE_GAP), SQUARE_HEIGHT, SQUARE_HEIGHT);
                    sliderMask.graphics.endFill();
                }
                updateSlider(volumeSlider.value);
            }

            private function updateSlider(value:Number):void
            {
                redEntry.color = value >= 1 ? 0xbf0000 : 0x009c00;
                yellowEntry.color = value >= 1 ? 0xe0ec0b : 0x009c00;
                greenEntry.ratio = value > 50 ? 1 : value / 50;
                redEntry.ratio = value > 50 ? (value/50 - 1) * .67 + .33 : value / 50 * .33;;
                yellowEntry.ratio = value > 50 ? (value/50 - 1) * .33 + .67 : value / 50 * .67;
            }

        ]]>
    </fx:Script>

    <s:Group verticalCenter="0" horizontalCenter="0" height="{SLIDER_HEIGHT}" width="9">
        <s:Rect height="100%" width="100%" mask="{sliderMask}">
            <s:fill>
                <s:LinearGradient rotation="90">
                    <s:GradientEntry id="redEntry" ratio="0" color="0xbf0000"/>
                    <s:GradientEntry id="yellowEntry" ratio="0" color="0xe0ec0b"/>
                    <s:GradientEntry id="greenEntry" ratio="0" color="0x009c00"/>
                </s:LinearGradient>
            </s:fill>
        </s:Rect>
        <s:Group id="sliderMask"/>
    </s:Group>

    <s:HSlider verticalCenter="{SLIDER_HEIGHT / 2 + 30}" horizontalCenter="0" 
               id="volumeSlider" maximum="100" minimum="0" value="20" change="hslider1_changeHandler(event)"/>

</s:Application> 
```

有一点需要澄清。当您一个一个添加 GradientEntry 并将每个比率设置为 0 时，前两个条目不会消失。因此，每当滑块位于 0 或 1 或介于两者之间时，我必须将黄色和红色条目更改为绿色。

干杯!

# ruby-on-rails - 如何将嵌套资源路由路由到另一个？

> ID：12243319
> 
> 赞同：0
> 
> 时间：2012-09-03T07:03:28.687
> 
> 标签：ruby-on-rails, dynamic, routing, controller, nested

我正在实施董事会。

现在我有 BoardsController 和 PostsController。

默认情况下，帖子由板嵌套。

我希望所有董事会的帖子列表都有使用相同 PostsController 的特殊路线

所以我在 route.rb 中做了这个

`resources :notice, :controller => "posts", :board_id => 1
resources :faq, :controller => "posts", :board_id => 2
resources :qna, :controller => "posts", :board_id => 3` 

起初，它似乎有效。但是我意识到了一个问题。因为我在这些资源中使用了相同的“PostsController”。

执行控制器操作时与路径相关的代码相同

喜欢，

post_controller `def create @post = Board.find(params[:board_id]).posts.build(params[:post])`

 ````
 if @post.save
        redirect_to board_posts_path(@post.board_id)
    else
        render 'new'
    end
end 
````  `当我去 localhost:3000/notice/new 时，它工作正常

但是当我提交新帖子时，控制器重定向到 localhost:3000/boards/1/posts/

因为 `redirect_to board_posts_path(@post.board_id)`

这不是我想要的。

我可以使用 if 语句来处理这个问题，但它看起来很乱。

有什么适当的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T07:10:32.693

您可以使用`self.send`控制器上的 来通过帖子类型动态解析路径。假设您在字符串中有创建的帖子的类型（如果 Notice < Post 并且如果您使用单表继承，我不明白您的问题）：

```
post_type = # Get the specific post type ( "notice, faq ...")
redirect_to self.send("#{post_type}_path", @post.board_id) 
````

# php - PHP ImageMagick 缩小图像以适应给定的大小

> ID：12243321
> 
> 赞同：0
> 
> 时间：2012-09-03T07:03:42.913
> 
> 标签：php, imagemagick

我想使用 '>' 选项来调整图像大小，但它不适用于 PHP。

它应该这样做：[ImageMagick 收缩](http://www.imagemagick.org/Usage/resize/#shrink)

但它什么也没做。

这是我的代码：

```
exec($P_IMAGEMAGICK."convert input.jpg -resize x500\> output.jpg"); 
```

我希望我的照片始终具有 500 像素的高度，但如果它们小于/等于 500 像素则不会。是的，图片应该按比例调整大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T08:00:26.463

好的。我自己找到了解决方案。这不合逻辑，但现在有效：

```
exec($P_IMAGEMAGICK."convert input.jpg -resize x500> output.jpg"); 
```

没有：`\`

THX 给所有人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T07:28:01.133

将命令放入一个字符串并在 exec 中使用它，但也将其输出以进行调试，以确保它与您在命令行上用于执行相同操作的字符串完全相同。

例如：

```
$cmd="convert input.jpg -resize x500\> output.jpg";
print("DEBUG $cmd\n";
exec($P_IMAGEMAGICK.$cmd); 
```

另外，尝试捕获 exec 的输出以查看是否有任何错误：

例子：

```
$cmd="convert input.jpg -resize x500\> output.jpg 2>&1";
exec($cmd, $output);
print($output); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T07:20:44.120

因为您正在转义`>`并`\`自动被删除，所以 escape `\`。

试试这样：

```
exec($P_IMAGEMAGICK."convert input.jpg -resize x500\\> output.jpg"); 
```

确保你有足够的权限来编写你的`output.jpg`，首先创建一个单独的文件夹 images/，chmod it 755 并更改为：

```
exec($P_IMAGEMAGICK."convert input.jpg -resize x500\\> images/output.jpg"); 
```

# iphone - 如何制作接受格式“Mr. 5 star hotel & cool bar”的正则表达式

> ID：12243324
> 
> 赞同：0
> 
> 时间：2012-09-03T07:04:10.353
> 
> 标签：iphone, regex, nsregularexpression

我需要一个接受格式的正则表达式`"Mr. 5 star hotel & cool bar"`。

我怎样才能创建这个格式？任何想法？我做了一个，我在这里给出了一些接受我的条件的东西，但我现在面临的问题是它在“&”和“。”之后不允许有空格。公式是：`^([A-Za-z0-9]+([\\s\\.[&]][A-Za-z0-9]+)*)$` 提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T07:29:53.510

我不确定你想在这里做什么......但是，像这样的东西：[http](http://regex101.com/r/wX9fL0) ://regex101.com/r/wX9fL0 ？

`/^(\w+)\.\s*(\d+)([^&]+)&(.+)$/`

# windows-runtime - 检索 winRT 中当前进程的当前目录

> ID：12243325
> 
> 赞同：0
> 
> 时间：2012-09-03T07:04:15.937
> 
> 标签：windows-runtime

由于 getCurrentDirectory 在 winRT 中不可用，有什么方法可以在 winRT 中找到当前进程的当前目录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T08:34:27.927

尝试`Package.Current.InstalledLocation`或`ApplicationData.LocalFolder.InstalledLocation`

# android - MediaStore.Video.Media.DATE_MODIFIED 格式

> ID：12243327
> 
> 赞同：0
> 
> 时间：2012-09-03T07:04:29.850
> 
> 标签：android

谁能告诉我如何将 MediaStore.Video.Media.DATE_MODIFIED 格式化为人类可读的日期格式。我在文档中读到时间以秒为单位。所以我只需将它乘以 1000 并使用 SimpleDateFormat 。这是我的代码

```
 Date d=new Date(mills*1000);
    DateFormat df=new SimpleDateFormat("dd-mm-yyyy");
    df.setTimeZone(TimeZone.getTimeZone("UTC"));
    return df.format(d); 
```

这将返回一个不正确的字符串 25-35-2012。有什么帮助吗？

亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T07:07:29.437

你应该用大写`M`，`m`指`minute in hour`同时`M`指`Month in year`。

看到[这个](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html)了解更多信息

# c# - 选择值后过滤可用值列表 LS2011

> ID：12243329
> 
> 赞同：1
> 
> 时间：2012-09-03T07:04:31.987
> 
> 标签：c#, filter, foreign-keys, foreign-key-relationship, visual-studio-lightswitch

是否有可能在添加新记录时过滤可用值？请看下面的屏幕：
![在此处输入图像描述](../Images/4b49912c4ac5ab1a50a1fa512488e82e.png)
每个`MES_OPERATION`都分配给一个`MES_ROUTE`（都是外键）。现在我想实现，在选择一个s`MES_ROUTE`列表后，`MES_OPERATIONS`应该只显示`MES_OPERATIONS`分配给该特定 selected 的 s `MES_ROUTE`。

跟随屏幕：
![在此处输入图像描述](../Images/908a42e5e20bfefaaf2c24c68441153f.png)
为了您的理解：**在**选择路线“ *Daniel* ”后，操作选择框应该只显示分配给路线“ *Daniel* ”的操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T01:06:57.503

您想要做的称为“嵌套”组合框或“级联”组合框。这可以在详细信息屏幕中轻松完成，但我不确定是否可以在网格中进行（我所有的网格都是只读的）。

看看这两篇文章，它们将解释这项技术，你可以自己看看它是否适用于网格。

[用于数据输入的嵌套 AutoCompleteBox](http://dotnettim.wordpress.com/2011/03/20/lightswitch-nested-autocompletebox-for-data-entry/)

[用于数据输入的嵌套 AutoCompleteBox 第 2 部分](http://dotnettim.wordpress.com/2011/04/11/lightswitch-nested-autocompletebox-for-data-entry-part-2/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-03T07:39:39.977

使用 ORM 系统。如果您想要最简单的方法，请使用 VS2010 和 EntityFramework。它将根据您的数据库自动生成一组类并映射它们。Entity Framework 将识别您的 PK 和 FK 关系并在 Route 类中创建操作集合。然后在代码中你可以使用这样的东西（对不起，我不知道表和数据库名称）。

```
var route = objectSet.Routes.Select(p=>p.Id=="some id").Single();
foreach (var operation in route.Operations)
{
//do your stuff
} 
```

您也可以使用其他 ORM，例如 NHibernate。这里有一些有用的链接可以帮助您入门： [简单的 NHibernate 应用程序。](http://www.packtpub.com/article/nhibernate-3-creating-sample-application)

[有关 Fluent NHibernate 的更多详细信息。](http://marekblotny.blogspot.com/2009/02/fluent-nhbernate-and-collections.html)

# asp.net - 下载文件时需要显示进度

> ID：12243332
> 
> 赞同：1
> 
> 时间：2012-09-03T07:04:42.687
> 
> 标签：asp.net, c#-4.0

我创建了一个网页，其中有一个网格视图控件（见附图![在此处输入图像描述](../Images/ad42ea8397b3c070dd5f13d2a909b9de.png)），该网格视图中有一个链接按钮（下载）。如果我单击下载按钮文件将下载。下载时间很短，所以我需要显示进度（比如仍在下载......）。我使用了更新面板，更新进度控件对我不起作用，并且我还使用了图像控件，这对我也没有帮助。给我一些提示来显示进展中的味精..请。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T07:34:07.343

这是您可以采取的一种选择：

1.  编写将监视字节到字节处理的 ashx 通用处理程序在此处理程序内保存当前处理位置。调用这个 ashx 来下载文件。
2.  编写服务器端函数，该函数将返回由 ashx 处理程序保存的当前处理位置 此函数必须可用于 javascript
3.  在客户端只需调用这个调用服务器端函数的javascript函数

这是整个概念。如果我需要向您详细解释一些事情，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T07:35:55.967

[http://www.dreamincode.net/forums/topic/115491-download-file-asynchronously-with-progressbar/](http://www.dreamincode.net/forums/topic/115491-download-file-asynchronously-with-progressbar/)

# perl - PL/Perl 在 Postgresql 中发送邮件

> ID：12243335
> 
> 赞同：0
> 
> 时间：2012-09-03T07:04:52.180
> 
> 标签：perl, postgresql, plpgsql

> **可能重复：**
> [psql 触发器发送电子邮件](https://stackoverflow.com/questions/12002662/psql-trigger-send-email)

我使用 PL/Perl 语言在 Postgresql 中发送邮件。当数据集表upload_status更改为已发布时，它会向数据集表中作者的电子邮件地址发送邮件。并且在信中包含该作者在数据集中的一些记录。数据集 PK 是标识符。

比如从 xx@mail.com 发送到 (dataset.email)@mail.com

亲爱的博士（dataset.author）

你的......（dataset.product）已经......

那么如何使用 PL/Perl 和触发函数编写函数。

谢谢，我使用这种方法[http://evilrouters.net/2008/02/01/send-email-from-postgresql/](http://evilrouters.net/2008/02/01/send-email-from-postgresql/)

```
mydb=# CREATE OR REPLACE FUNCTION mydb_mytable_insert_send_mail_function()
mydb-# RETURNS "trigger" AS
mydb-# $BODY$
mydb$# use Mail::Sendmail;
mydb$#
mydb$# $message = "A new entry has been added to the 'mytable' table.\n\n";
mydb$# $message .= "The new name is: $_TD->{new}{name}\n\n";
mydb$#
mydb$# %mail = ( From => $_[0], To => $_[1], Subject => $_[2], Message => $message);
mydb$#
mydb$# sendmail(%mail) or die $Mail::Sendmail::error;
mydb$# return undef;
mydb$# $BODY$
mydb-# LANGUAGE 'plperlu' VOLATILE;

mydb=# CREATE TRIGGER mydb_mytable_insert_send_mail_trigger
mydb=# AFTER INSERT ON mytable
mydb=# FOR EACH ROW
mydb=# EXECUTE PROCEDURE mydb_mytable_insert_send_mail_function('from@domain.com',          'to@domain.com', 'subject here'); 
```

但它显示发生错误 Can't locate Mail/Sendmail.pm in @INC(@INC contains: /usr/...

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-03T08:41:00.947

仅仅因为你可以并不意味着你应该。有更好的方法来做到这一点。不要直接从 PL 中执行此操作。如果您想忽略我的警告，请使用 PL/PerlU 并像使用任何其他电子邮件客户端一样编写它。您可以使用任何您喜欢的 CPAN 模块，让您的生活更轻松。

不去的两个理由：

1）如果您的交易中止/回滚怎么办？您已发送电子邮件但未对数据库进行相应更改。你在事务中做非事务性的事情。

2）如果您的电子邮件挂起等待响应，直到您在 2 分钟后获得 tcp 超时，该怎么办？你会忘记给客户发电子邮件吗？中止交易（不能发送电子邮件，不能说我们已经发货了！）？

这是个**坏**主意。不要这样做。感谢 PostgreSQL 出现此错误并将其移至另一个守护程序。

**更好**的方法是使用 LISTEN 和 NOTIFY 以及队列表。然后，您可以像这样创建一个表：

```
CREATE TABLE email_queue (
    id serial not null unique,
    email_from text,
    email_to text not null,
    body text not null
); 

CREATE FUNCTION email_queue_trigger() RETURNS TRIGGER 
LANGUAGE PLPGSQL AS $F$
    BEGIN
        NOTIFY emails_waiting;
    END;
$F$; 
```

然后让您的存储过程插入到该表中。

然后，让第二个客户端应用程序在 emails_waiting 上侦听（sql 语句`LISTEN emails_waiting`），然后执行以下操作：

1.  检查 email_queue 中是否有记录。如果没有，请转到 3。
2.  读取数据、发送电子邮件、删除记录并提交。
3.  当队列为空时，睡眠 x 秒
4.  唤醒时，检查异步。通知（取决于客户端库，检查文档）。如果有，转1，如果没有，转3。

这允许您的电子邮件排队等待在您的交易中发送，并自动传递到另一个应用程序，然后如果您选择，该应用程序可以与 MTA 连接。

第二个客户端应用程序可以使用您知道的任何工具以您选择的语言编写。它的优点是可以在事务之外完成所有网络事务，因此如果您通过第二个 SMTP 服务器发送，并且连接挂起，您的整个数据库事务不会等待 2 分钟以使其超时并中止事务. 因此，对于未来的需求变化，它也更安全。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-03T08:34:43.857

简短的回答：不要。

长答案：使用单独的流程发送电子邮件，并在数据库中记录发送的要求。

发送电子邮件可能会暂时失败，也可能会永久失败。迟早你会想要暂停发送电子邮件而不停止数据库的其余部分。然后有人会希望更改消息模板，而您并不想仅仅为此更新数据库。

您的解决方案可以像 message_queue 表和每分钟运行一次的 cron-job 或使用 LISTEN/NOTIFY 的守护程序一样简单。我已经这样做了几次，并且拥有一个单独的电子邮件发件人一直是更好的选择。

# wordpress - 自定义帖子类型类别页面

> ID：12243338
> 
> 赞同：0
> 
> 时间：2012-09-03T07:05:12.990
> 
> 标签：wordpress, custom-post-type

我有一个名为“社论”的自定义帖子类型的博客。这些文章的链接如下所示：`www.domain.com/editorial/test-article`。现在，如果我访问`www.domain.com/editorial/`它，它会显示一个随机帖子。我怎样才能让它像一个普通的帖子类别一样工作，所以它会列出所有的“社论”文章？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T08:40:20.670

WP 不会自动为自定义帖子类型创建存档页面，您需要一些代码来实现它。

阅读Jonathan Brinley 的[这篇文章](http://xplus3.net/2010/08/08/archives-for-custom-post-types-in-wordpress/)，它解释了如何做你想做的事。:)

# c++ - C++ 中的 LNK2019 链接错误

> ID：12243339
> 
> 赞同：2
> 
> 时间：2012-09-03T07:05:17.387
> 
> 标签：c++, class, templates, linker, external

> **可能重复：**
> [C++ 模板，链接错误](https://stackoverflow.com/questions/1353973/c-template-linking-error)

我有两个链接错误，我不知道代码有什么问题以及如何修复它们：

> main.obj:-1: 错误: LNK2019: 函数“public: __thiscall”中引用的未解析外部符号“public: __thiscall A::A(void)”(??0?$A@VB@@@@QAE@XZ) B::B(void)" (??0B@@QAE@XZ)

和

> main.obj:-1：错误：LNK2019：未解析的外部符号“public：void __thiscall A::exec(void (__thiscall B::*)(void))”(?exec@?$A@VB@@@@ QAEXP8B@@AEXXZ@Z) 在函数 "public: void __thiscall B::run(void)" (?run@B@@QAEXXZ) 中引用

稍微解释一下代码：这个类必须从派生类中执行一个函数。函数 exec 从派生类中调用，并带有派生类参数中的函数。这个函数的签名是`void function();`

//header.h

```
#ifndef HEADER_H
#define HEADER_H

template <class T>
class A
{
public:
    typedef void (T::*ExtFunc)();

    A();
    void funcA();
    void exec(ExtFunc func);
};

#endif // HEADER_H 
```

//header.cpp

```
#include "header.h"

template<typename T>
A<T>::A() { }

template<typename T>
void A<T>::funcA()
{
    cout << "testA\n";
}

template<typename T>
void A<T>::exec(ExtFunc func)
{
    (T().*func)();
} 
```

在`main.cpp`我从 A 类派生一个类并将派生类作为模板参数传递。然后我`exec`通过函数执行`run()`函数。//main.cpp

```
#include <iostream>
#include "header.h"
using namespace std;

class B : public A<B>
{
public:
    B() { }

    void run()
    {
        exec(&B::funcB);
    }

    void funcB()
    {
        cout << "testB\n";
    }
};

int main()
{
    B ob;
    ob.run();

    return 0;
} 
```

谁能告诉我这是怎么回事？...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T07:10:11.327

当您使用模板时，通常不能将实现放在 .cpp 文件中 - 您必须将整个类放在标题中。因此，将所有代码从 header.cpp 移动到 .h。

您可以通过在 .cpp 文件中进行显式实例化来解决此问题 - 为特定类型实例化模板。但这要求您提前知道哪些类型需要实例化，并且会阻止您添加新的实例化。唯一的好处是减少了编译时间。

# c# - 共享和更新库

> ID：12243341
> 
> 赞同：1
> 
> 时间：2012-09-03T07:05:26.590
> 
> 标签：c#, .net, visual-studio, shared-libraries, updates

事实：

*   我有一个名为***A***的库。
*   我有两个项目，**B**和**C**，引用***A***。
*   当我编译**B**或**C时，它们都会创建*****A***的编译副本。

我想要实现的是为**B**和**C**创建设置文件。
我还希望他们使用***A***的相同 dll 。

因此，如果我将`B 1.0`which has `A 1.0`with it 安装到一台机器上，然后与它一起安装`C 1.2`，`A 1.2`我希望**B**使用***A***的更新版本。

我怎样才能做到这一点？
我认为将 dll 保存到设置的公共位置并使用应用程序动态加载它，但我不确定。这里的最佳做法是什么？如果我要把它保存到一个共同的地方，那会是哪里？Visual Studio 附带的设置项目是否允许此类操作？

（我在 Visual Studio 2012 上使用 .NET 4.5）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T07:11:08.783

您将创建 dll 地狱执行此操作。您应该将它们分开并为每个项目编译更新版本。

使用更新的 dll 创建一个共享引用文件夹。使两个项目都从共享引用文件夹中引用项目 A 的 dll。

为每个新版本创建版本号以控制您的 dll

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T07:11:48.217

您可以使用程序集重定向来实现此目的。请参阅程序[集重定向](http://msdn.microsoft.com/en-us/library/7wd6ex19%28v=vs.110%29.aspx)

# java - Ant 独立包或其他安装程序（用于 java web-app、windows）

> ID：12243345
> 
> 赞同：1
> 
> 时间：2012-09-03T07:05:39.517
> 
> 标签：java, windows, web-applications, ant, installation

我想为我的应用程序创建一个安装程序。由于我使用 ant 进行构建自动化，所以我也想使用 ant 进行安装，但我想尽可能地为用户省去麻烦，包括安装 ant。

有没有一种方法可以创建一个独立的 ant 包（不依赖于系统中安装的 ant），或者有另一种方法来创建安装程序？我必须在 Windows 上安装 Apache Tomcat、MySQL 和其他一些东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T20:58:32.350

我认为您正在寻找[ANT 安装程序包](http://antinstaller.sourceforge.net/)。

为其他人的应用程序编写自定义安装程序时要小心（吃力不讨好）。对于您的应用程序具有的第 3 方依赖项，我会考虑使用[Chef](http://www.opscode.com/chef/)和[Puppet](http://puppetlabs.com/)等工具。唯一的问题是这两种工具对 Windows 的支持目前才刚刚出现。

# visual-studio-2008 - 旧版 MFC 应用程序在具有 Aero 主题的 windows7 操作系统上无法正常运行，但在经典主题下表现良好

> ID：12243347
> 
> 赞同：0
> 
> 时间：2012-09-03T07:05:44.097
> 
> 标签：visual-studio-2008, visual-c++, windows-7, mfc

我们有一个 MFC 应用程序，它是在 Visual Studio 2008 专业版上使用 VC9.0 编译器开发的。该应用程序在 windows server 2003、windows xp 和 2008 R2 OS 上运行良好。当我在 windows7 上运行它（使用默认 Aero 主题）时，它的行为很奇怪，但是通过在 windows7 上应用经典主题，它运行良好。这背后的原因可能是什么？有人可以澄清吗？

我是否需要通过添加所需的更改来重新编译应用程序以在 windows7 操作系统上支持它？这些变化是什么，请在 msdn 上提供任何参考链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T09:46:58.700

您的程序中存在错误：很可能在代码中的某处它依赖于某些操作系统函数以特定方式执行某些操作，这在过去是正确的，但函数的文档不能保证，现在表现不同与航空。

抱歉，这不是很有帮助，但没有简单的解决方法：您将不得不尝试缩小问题范围并对其进行调试。就是这样。

# c++ - 包括来自 C++ 的 C-DLL

> ID：12243353
> 
> 赞同：4
> 
> 时间：2012-09-03T07:06:06.287
> 
> 标签：c++, c, windows, dll, mingw

这感觉像是一个菜鸟问题，所以如果它是一个骗子，请指出我正确的位置:)

我尝试将用 C 编写的 DLL 包含到 C++ 程序中。它没有用；gcc 说

> test.cpp: xxx: 错误：函数参数太多。

这是一个最小的工作示例：

DLL 函数的包装器：

```
/* myWrapper.h */

#ifndef _MYWRAPPER_H
#define _MYWRAPPER_H
#include <windows.h>

#ifdef __cplusplus
extern "C" {
#endif

extern  FARPROC   EXPORTED_functionNameP;

int GetDLLpointers();

#ifdef __cplusplus
}
#endif

#endif 
```

其实施：

```
/* myWrapper.c */
#include <windows.h>
#include "myHeader.h"

#ifdef __cplusplus
extern "C" {
#endif

HINSTANCE drvsHANDLE;

extern  FARPROC   EXPORTED_functionNameP;

int GetDLLpointers()
{
    static int result;

    drvsHANDLE = LoadLibrary("myLibrary.dll");
    if (drvsHANDLE == NULL) return (result=0);

    EXPORTED_functionNameP = GetProcAddress(
        drvsHANDLE, "originalFunctionName");    
    if (EXPORTED_functionNameP == NULL) return (result = 0);

    return (result = 1);
}

#ifdef __cplusplus
}
#endif 
```

当然，我自己没有写过这些，也没有写过库，最好它们都应该保持原样。但是，我*确实*添加了这些`extern "C"`行。

然后，我的主文件：

```
// my Main
#include <windows.h>
#include "myHeader.h"

int main(int argc, char **argv)
{
    int arg = 1;
    EXPORTED_functionNameP(arg);

    return 0;
} 
```

构建命令：

```
gcc -I. -c -o myHeader.o myHeader.c -L. -lmyLibrary
g++ -I. -o main.exe myMain.cpp myHeader.o -L. -lmyLibrary 
```

如果我将 my 重写`main.cpp`为有效的 C 并使用`gcc`而不是`g++`.

我尝试更改`extern "C"`为`extern "C++"`无济于事，我尝试了所有排列或`gcc`对于`g++`两个构建命令，什么都没有。

我知道这与名称修改有关，但我认为`gcc`当您包含这些行时会处理好`extern "C"`...有人可以解释一下我在这里缺少什么吗？

以防万一——

Windows XP Pro（稍后将是 Win7）

(MinGW) gcc 4.6.2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T07:21:12.003

类型是不带参数的函数的`FARPROC`函数指针。您应该`EXPORTED_functionNameP`这样声明（替换`void`为函数真正返回的任何内容）：

```
extern void (*EXPORTED_functionNameP)(int); 
```

并像这样初始化它（`GetProcAddress()`几乎总是需要将返回的值转换为正确的类型）：

```
EXPORTED_functionNameP = (void (*)(int)) GetProcAddress(drvsHANDLE, "originalFunctionName"); 
```

函数类型的 A`typedef`可能会使事情更具可读性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-01-08T22:51:29.697

我知道这是一个非常古老的问题，但我遇到了完全相同的问题，但与编写通用包装模板来包装对 LoadLibrary() 和 GetProcAddress() 的调用有关

以[https://blog.benoitblanchon.fr/getprocaddress-like-a-boss/](https://blog.benoitblanchon.fr/getprocaddress-like-a-boss/)为灵感，他似乎将 FARPROC 视为一种“Windows 函数的 void*”，然后将其转换为正确的类型。

我需要稍微调整一下代码才能为我工作，并在这里重现它：

```
class ProcPtr
{
public:
    explicit ProcPtr(FARPROC ptr) : m_ptr(ptr) {}

    template <typename T>
    operator T* () const { return reinterpret_cast<T*>(m_ptr); }

private:
    FARPROC m_ptr;
};

class DllHelper
{
public:
    explicit DllHelper(LPCTSTR filename) : m_module(LoadLibrary(filename)) {}
    ~DllHelper() { FreeLibrary(m_module); }

    ProcPtr operator[](LPCSTR proc_name) const
    {
        return ProcPtr(::GetProcAddress(m_module, proc_name));
    }

private:
    HMODULE m_module;
}; 
```

因此，有了现在可用的辅助代码，我们可以使用它来编写一个封装类，该类封装了 Advapi32 库中的几个函数：

```
class Advapi32
{
public:
    Advapi32() : m_dll(TEXT("Advapi32"))
    {
        getUserName    = m_dll["GetUserNameA"];
        openSCManager  = m_dll["OpenSCManagerA"];
        bogusFunction  = m_dll["BogusFunctionThatDoesNotExist"];
    }

    decltype(GetUserNameA)*         getUserName;
    decltype(OpenSCManagerA)*       openSCManager;
    decltype(GetWindowsDirectoryA)* bogusFunction;

private:
    DllHelper m_dll;
}; 
```

bogusFunction 是一个与 GetWindowsDirectoryA 具有相同签名但在 Advapi32 中不存在的函数。这就是我试图实现的目标——在可能没有特定功能的旧操作系统上优雅地回退。

所以，最后一个测试应用程序......

```
int main()
{
    Advapi32 advapi32;

    auto func1 = advapi32.getUserName;
    if (func1)
    {
        TCHAR  infoBuf[256];
        DWORD  bufCharCount = sizeof(infoBuf);

        if (func1(infoBuf, &bufCharCount))
        {
            std::cout << "Username: " << infoBuf << std::endl;
        }
    }

    auto func2 = advapi32.openSCManager;
    if (func2)
    {
        SC_HANDLE handle = func2(NULL, NULL, SC_MANAGER_CONNECT);
        if (handle)
        {
            std::cout << "opened SC Manager" << std::endl;
        }
    }

    auto func3 = advapi32.bogusFunction;
    if (func3)
    {
        std::cerr << "This should not happen!" << std::endl;
    }
    else
    {
        std::cout << "Function not supported" << std::endl;
    }
} 
```

输出：

```
Username: TestAccount 
opened SC Manager 
Function not supported 
```

注意：这是在 VS2019 下使用 VS2015_XP 工具集编译为带有 MBCS 而不是 Unicode 的 Windows 32 位控制台应用程序，因为这是我需要的目标（不要问）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T07:21:11.717

C 和 C++ 之间存在差异。

```
int (FAR WINAPI * FARPROC) () 
```

> 在 C 中，FARPROC 声明表示具有未指定参数列表的回调函数。然而，在 C++ 中，声明中的空参数列表表示函数没有参数。

CallWindowProc 上的[MSDN 页面](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633571%28v=vs.85%29.aspx)解释了更多内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-03T07:20:19.880

快速谷歌搜索后，似乎`FARPROC`是这样定义的：

```
typedef int (FAR WINAPI *FARPROC)(); 
```

也就是说，`FARPROC`是一个返回 an`int`且不带参数的函数。因此，您不能将其用于任何其他情况。

而是`EXPORTED_functionNameP`像这样声明：

```
extern void (*EXPORTED_functionNameP)(int); 
```

Now`EXPORTED_functionNameP`是一个指向函数的指针，该函数接受一个`int`参数并且不返回任何值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-03T07:30:58.033

这是因为 FARPROC 被定义为：

```
int (FAR WINAPI * FARPROC) () 
```

所以你不能在 C++ 中将任何参数传递给这样的函数。要修复它，您应该将其定义`EXPORTED_functionNameP`为具有相同语义的函数的指针，如 DLL 库中定义的那样。例如：

```
typedef (void* EXPORTED_functionNameP)(int value);
EXPORTED_functionNameP ExportedFns;
...
ExportedFns = GetProcAddress(drvsHANDLE, "originalFunctionName"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-03T07:20:08.037

FARPROC 定义为

```
typedef int (FAR WINAPI *FARPROC)(); 
```

当你传递一个额外的参数时，尽管原型的参数列表是空的，你会得到错误。

您需要一个适当的原型定义，`PORTED_functionNameP`并将结果从函数`GetProcAddress`中转换为该类型`GetDLLPopinters`。

# com - 如何创建 System32 dll 的类型库？

> ID：12243354
> 
> 赞同：0
> 
> 时间：2012-09-03T07:06:08.267
> 
> 标签：com, typelib

我需要使用 msctf.dll（文本服务框架的 COM 服务器）。我使用 REGASM 创建一个 tlb 文件。我使用的是 .NET 4.0 和 Visual Studio 2012。

命令：REGASM c:windows/System32/msctf.dll \tlb:msctf.tlb

错误：RegAsm：错误 RA0000：无法加载“C:\Windows\System32\msctf.dll”，因为它不是有效的 .NET 程序集

最后我需要使用 tlbimp.exe 创建一个 msctf 的互操作库，并在 C# 文本服务中使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T13:48:13.303

使用 cmd 时需要添加环境变量 如果是 VS2012 Native tools 命令提示符，那么它会立即生效。

# ios5 - 调用 selectRow:inComponent:animated: 方法

> ID：12243356
> 
> 赞同：0
> 
> 时间：2012-09-03T07:06:09.517
> 
> 标签：ios5, uipickerview

我的应用程序中有 2 个 UIpicker 视图，我希望选择器在我保存数据后显示最后选择的行。我正在使用这个 selectRow:inComponent:animated: 方法，但是我应该在哪里调用这个方法呢？

在 viewDidLoad 中：

```
if (self.pickerView == nil) {
    self.pickerView = [[UIPickerView alloc] init];
    self.pickerView.delegate = self;
    self.pickerView.showsSelectionIndicator = YES; 
```

在pickerView:viewForRow:forComponent:reusingView:

```
if (component == 0)
        {
            for (int j =20; j<=200; j++)
            {
            NSString* myString           = [NSString stringWithFormat:@"%d",j];
            [myArray addObject:myString];
            }
            UILabel *weightLabel0        = [[UILabel alloc] initWithFrame:CGRectMake(40, 0, 100, 32)];
            Label0.text            = [myArray objectAtIndex:row];
            Label0.textAlignment   = UITextAlignmentLeft;
            Label0.backgroundColor = [UIColor clearColor];
            [rowView insertSubview:weightLabel0 atIndex:1];
return rowView;

        } 
```

我在这里有一个方法：

```
-(void) refreshPicker
{

    NSArray* mArray = [self.myTextField.text componentsSeparatedByString:@"."];
    NSNumber* str1 = [mArray objectAtIndex:0];
    int selectRow1 = [str1 intValue]-20;
    NSNumber* str2 = [mArray objectAtIndex:1];
    int selectRow = [str2 intValue];

    if (selectRow == 0) {
        int selectRow2 = 0;
        [self.pickerView selectRow:selectRow2 inComponent:1 animated:NO];
    }
    else if (selectRow == 5) {
        int selectRow2 = 1;
        [self.pickerView selectRow:selectRow2 inComponent:1 animated:NO];
    }

    [self.pickerView  selectRow:selectRow1 inComponent:0 animated:NO];

    [pickerView_ reloadAllComponents];

} 
```

我应该怎么把它放在一起？例如，如果我在 viewDidLoad 调用此方法，则不会发生任何事情。请帮忙=）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T03:55:38.440

我想出了一个主意。因为我的选择器仅在调用文本字段时创建项目，即成为第一响应者，因此，我在 textFieldDidBeginEditing 中调用我的 refreshPicker 方法。并且不要忘记将文本字段委托设置为 self。=）给那些遇到我的问题的人，干杯。

# ruby-on-rails - Neo4j 在 Heroku 上使用 Rails

> ID：12243360
> 
> 赞同：3
> 
> 时间：2012-09-03T07:06:16.790
> 
> 标签：ruby-on-rails, heroku, neo4j

是否有一个很好的教程来解释如何在 Rails 中使用 Neo4j 并在 Heroku 上进行设置。

在部署到 Heroku 之前，我无法理解如何在本地设置 Neo4j 和 Rails 以进行测试。在我的本地机器上，鉴于 Neo4j 是嵌入式 Java 数据库，但 Rails 是基于 Ruby 的，我想在 Rails 中设置 Neo4j 到底应该做什么。更准确地说，我在 rails 的哪个位置给出命令“运行 Java 虚拟机”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T08:16:56.417

嗯，你是对的。对于嵌入式 Rails 设置，这不是正确的地方。在这种情况下做亚马逊怎么样？否则，请尝试[https://github.com/maxdemarzi/neography](https://github.com/maxdemarzi/neography)这在 Heroku 上效果很好？

# android - 在小部件中实现 Android LocationListener

> ID：12243361
> 
> 赞同：0
> 
> 时间：2012-09-03T07:06:17.773
> 
> 标签：android, geolocation, widget

我正在为 Android 开发一个小部件，它显示您当前的位置。要获取当前的纬度和经度，我有以下代码：

```
public class LocationInfo extends Activity {

RemoteViews remoteViews;

LocationManager locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
myLocationListener locationListener = new myLocationListener();
LocationProvider locationProvider = locationManager.getProvider(LocationManager.NETWORK_PROVIDER);
locationManager.requestLocationUpdates(locationProvider, 0, 0, locationListener);

class myLocationListener implements LocationListener {

    public void onLocationChanged(Location location) {
        if(location != null)
        {
            double Long = location.getLongitude();
            double Lat = location.getLatitude();

            remoteViews.setTextViewText(R.id.widget_textview3, Double.toString(Long));
        }

        else {
            remoteViews.setTextViewText(R.id.widget_textview3, "LOADING...");
        }

    }

    public void onProviderDisabled(String arg0) {
        // TODO Auto-generated method stub

    }

    public void onProviderEnabled(String arg0) {
        // TODO Auto-generated method stub

    }

    public void onStatusChanged(String arg0, int arg1, Bundle arg2) {
        // TODO Auto-generated method stub

    }
}
} 
```

但是，我在 requestLocationUpdates 的参数中遇到错误。它在 0,0，locationListener 处**显示“令牌上的语法错误，应使用 VariableDeclarator” 。**

此外，这是一个单独的类。然后我将如何在我的小部件中运行它？就像是：

```
LocationInfo locationProvider = new LocationInfo();
LocationProvider.run(); 
```

也许？再次，任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T07:10:00.327

您无权执行

```
locationManager.requestLocationUpdates(locationProvider, 0, 0, locationListener); 
```

方法之外。例如，只需进入`onCreate`Activity。

祝你好运

# java - 使用 Runtime.exec 将 CC 添加到 mailx 命令

> ID：12243362
> 
> 赞同：1
> 
> 时间：2012-09-03T07:06:36.037
> 
> 标签：java, unix, aix

我是 AIX 环境的新手，第一次使用 mailx 命令。我已经理解了发送电子邮件的命令，但我还想包括抄送电子邮件地址。

我正在尝试通过 Java 的 Runtime.exec 执行它 我的命令如下

```
cat EMAIL_BODY|mailx -s MAIL_SUBJ MAIL_TO 
```

如何向此命令添加 CC

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T07:15:16.933

设置变量`askcc`：

```
 askcc
        Prompt for the copy list. The default is noaskcc. 
```

阅读[手册页](http://pubs.opengroup.org/onlinepubs/7908799/xcu/mailx.html) 以获取更多信息。

您可以使用`-c`可以指定逗号分隔的抄送收件人列表的选项。

```
echo "This is a test msg" | mailx -s Hello! -c xy@xy.com recipient@domain.com 
```

您可以在 java 的运行时 exec 的命令中简单地使用它。

# mysql - 如何运行两个查询？（Joomla，mysql）

> ID：12243363
> 
> 赞同：1
> 
> 时间：2012-09-03T07:06:35.190
> 
> 标签：mysql, joomla, transactions

我希望当有人为文章信息投票时，它被插入到两个表中（或运行任何两个查询，没关系，插入、更新或选择）。我正在使用 Joomla！2.5.0 稳定。

`components/com_content/models/article.php` `public function storeVote($pk = 0, $rate = 0)`

执行此查询时：

`$db->setQuery( 'INSERT INTO #__content_rating ( content_id, lastip, rating_sum, rating_count )' . ' VALUES ( '.(int) $pk.', '.$db->Quote($userIP).', '.(int) $rate.', 1 )'`

我希望`#__content`表格中的信息也将被插入。我该如何做到这一点？我尝试了以下操作，但它不起作用：

`$db->setQuery( 'INSERT INTO #__content_rating ( content_id, lastip, rating_sum, rating_count )' . ' VALUES ( '.(int) $pk.', '.$db->Quote($userIP).', '.(int) $rate.', 1 )'`

`// 'UPDATE #__content ' . ' SET testas2 = rating_sum + '.(int) $rate . ' WHERE content_id = '.(int) $pk`

`// 'INSERT INTO #__content ( testas2 )' . ' VALUES (7799)' );`

这是带有语法的图片：http: [//i49.tinypic.com/1ruux0.jpg](http://i49.tinypic.com/1ruux0.jpg)

我阅读了有关 MySQL 事务的信息，在这种情况下对我有帮助吗？如果是，那么语法应该是什么样的？非常感谢任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T04:02:26.340

尝试直接在数据库中运行以下命令（使用 phpAdmin）：

```
UPDATE edqfi_content_rating , edqfi_content 
SET edqfi_content_rating.rating_count = edqfi_content_rating.rating_count + 1, 
edqfi_content_rating.rating_sum = edqfi_content_rating.rating_sum + 3, 
edqfi_content_rating.lastip = '88.119.189.154',
edqfi_content.testas2=edqfi_content_rating.rating_sum + 3 
WHERE edqfi_content_rating.content_id = 13
AND edqfi_content.id= 13 
```

看看你是否有任何错误。

# ios - xcode项目中非常奇怪的重复符号

> ID：12243366
> 
> 赞同：0
> 
> 时间：2012-09-03T07:07:01.480
> 
> 标签：ios, xcode, hyperlink, clang

Projet SampleAppRef 参考项目 B。项目 B 的目标是 libyodo1SDK_SNS-AD-ALS-GMG.a 。

当我构建项目 SampleAppRef 时，它有这个错误，它告诉我重复的符号：

```
ld: duplicate symbol _OBJC_METACLASS_$_AdViewAdapterDomobImpl in /Users/dengjian/project/SDK_iOS/trunk/Yodo1SDK/Prj/yodo1SDK/build-yodo1SDK_SNS-AD-ALS-GMG/Release-iphonesimulator/libyodo1SDK_SNS-AD-ALS-GMG.a(AdViewAdapterDoMob.o) and /Users/dengjian/project/SDK_iOS/trunk/Yodo1SDK/Prj/yodo1SDK/build-yodo1SDK_SNS-AD-ALS-GMG/Release-iphonesimulator/libyodo1SDK_SNS-AD-ALS-GMG.a(AdViewAdapterDoMob.o) for architecture i386 
```

和 ld 命令是：

```
Ld build-SampleAppRef/Release-iphonesimulator/SampleApp.app/SampleApp normal i386
cd /Users/dengjian/project/SDK_iOS/trunk/Yodo1SDKSample/SampleApp
setenv MACOSX_DEPLOYMENT_TARGET 10.6
setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch i386 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk -L/Users/dengjian/project/SDK_iOS/trunk/Yodo1SDKSample/SampleApp/build-SampleAppRef/Release-iphonesimulator -F/Users/dengjian/project/SDK_iOS/trunk/Yodo1SDKSample/SampleApp/build-SampleAppRef/Release-iphonesimulator -filelist /Users/dengjian/project/SDK_iOS/trunk/Yodo1SDKSample/SampleApp/build-SampleAppRef/SampleAppRef.build/Release-iphonesimulator/SampleAppRef.build/Objects-normal/i386/SampleApp.LinkFileList -mmacosx-version-min=10.6 -Xlinker -objc_abi_version -Xlinker 2 -all_load -lxml2 -Xlinker -no_implicit_dylibs -D__IPHONE_OS_VERSION_MIN_REQUIRED=40200 -framework SystemConfiguration -framework Security -framework QuartzCore -framework MobileCoreServices -framework MessageUI -framework MediaPlayer -framework MapKit -framework ImageIO -framework iAd -framework EventKit -framework CoreVideo -framework CoreTelephony -framework CoreMotion -framework CoreMedia -framework CoreLocation -framework CFNetwork -framework AVFoundation -framework AudioToolbox -lz -lstdc++ -lsqlite3 -liconv -framework UIKit -framework Foundation -framework CoreGraphics /Users/dengjian/project/SDK_iOS/trunk/Yodo1SDK/Prj/yodo1SDK/build-yodo1SDK_SNS-AD-ALS-GMG/Release-iphonesimulator/libyodo1SDK_SNS-AD-ALS-GMG.a -o /Users/dengjian/project/SDK_iOS/trunk/Yodo1SDKSample/SampleApp/build-SampleAppRef/Release-iphonesimulator/SampleApp.app/SampleApp 
```

1.  当我删除参考项目 B 并单独构建项目 B 时。然后将 yodo1SDK_SNS-AD-ALS-GMG.a 添加到项目 SampleAppRef 中，效果很好！

2.  当我从项目项目 B 中删除重复文件 AdViewAdapterDoMob.h 和 AdViewAdapterDoMob.m 时，它也运行良好！我可以运行并调用 AdViewAdapterDoMob.m 的代码。

项目 SampleAppRef self 没有任何“AdViewAdapterDomobImpl”代码。那么为什么它有dumplcate符号呢？

有人可以给我一些提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T04:12:37.353

尝试清除日志然后按停止。之后再次清除日志并退出xcode。重新启动mac，然后重试。看看这是否有效。

# android - 如何逐行阅读短信回复

> ID：12243370
> 
> 赞同：0
> 
> 时间：2012-09-03T07:07:14.103
> 
> 标签：android, sms

这是我阅读短信的代码。如果第一行不包含 00，我想逐行读取收到的短信，如果第 2 行包含此字符串，则执行此操作，等等。

下面是我的代码，它只读取包含 00 的短信，然后不逐行读取我如何更改此代码以逐行读取短信

```
 public void onReceive(Context context, Intent intent) 
{
    //---get the SMS message passed in---
    Bundle bundle = intent.getExtras();        
    SmsMessage[] msgs = null;
    String str = "";  

    if (bundle != null)
    {
        //---retrieve the SMS message received---
        Object[] pdus = (Object[]) bundle.get("pdus");
        msgs = new SmsMessage[pdus.length];            
        for (int i=0; i<msgs.length; i++){
            msgs[i] = SmsMessage.createFromPdu((byte[])pdus[i]);                
            str += "SMS from " + msgs[i].getOriginatingAddress();   

            str += " :";
            str += msgs[i].getMessageBody().toString().split("/n");;
            str += "\n"; 

            if(str.contains("00"));
            {

                 Intent l = new Intent(context,AgAppMenu.class);
                 l.putExtra("msg",str);
                 l.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);   
                 context.startActivity(l);

            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T07:40:01.910

使用[String.split()](https://developer.android.com/reference/java/lang/String.html#split%28java.lang.String%29)。

例如，要从 String 中获取不同的行，请执行以下操作：

```
String example = "Hello\nWorld!";
String[] parts = example.split("\n");

// parts[0] contains "Hello"
// parts[1] contains "World!" 
```

对于您的情况，要获取消息的每一行，请使用以下内容：

```
String[] msg_lines = msgs[i].getMessageBody().toString().split("/n"); 
```

所以你的代码可能看起来像：

```
String[] msg_lines = null;
for(...) {
    msgs[i] = SmsMessage.createFromPdu((byte[])pdus[i]);                
    str += "SMS from " + msgs[i].getOriginatingAddress();                     
    str += " :";
    str += msgs[i].getMessageBody().toString();
    str += "\n";

    msg_lines = msgs[i].getMessageBody().toString().split("\n");
    for (String line : msg_lines)
    {
        if (line.contains("00")) { /*then*/ }
    }
} 
```

# php - 使用 php 处理 http 请求

> ID：12243371
> 
> 赞同：0
> 
> 时间：2012-09-03T07:07:15.277
> 
> 标签：php, http, httprequest

我对 PHP 非常陌生，需要使用 HTTP 请求来下载服务器外部的 URL。该 URL 是一个 PHP 函数，它返回我已解码的 JSON 代码。有什么建议么？

我尝试了基本代码：

```
 <?php   
    //Code for forming the url (which I'm sure is correct)
    $url = ...
    $response = fopen($url,"x+");
    $response = json_decode($response);
    echo $response;
    ?>
    //javascript in a seperate file that calls the php code
    var response = xmlhttp.responseText;
alert(response); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T07:11:00.417

尝试这个：

```
<?php
$url = 'YOUR_URL_HERE';

$data = file_get_contents( $url ); // it is a JSON response as per your statement.

$data= json_decode($data);
print_r($data); // now, it's a normal array.
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T07:09:26.913

如果配置允许，您可以使用`fopen`cURL 或`fsockopen`函数来执行此操作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T07:10:21.030

你可以使用：

```
$json_str = file_get_contents($url);
$json = json_decode($json_str, true); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T07:10:43.037

你不能使用 file_get_contents 吗？例如

```
<?php

$url = "YOUR_URL";
$json = file_get_contents($url);

// handle the data
$data = json_decode($json, TRUE);

    var_dump($data); // example
?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-03T07:13:14.633

如果你有很多请求，你可以尝试使用像 Buzz 这样的 http 类，这将有助于清理你的代码[https://github.com/kriswallsmith/Buzz](https://github.com/kriswallsmith/Buzz)

# android - 将 EditText 和 Spinner 的值从 Activity 传递到另一个 Activity 的 TextView

> ID：12243374
> 
> 赞同：0
> 
> 时间：2012-09-03T07:07:22.900
> 
> 标签：android, android-intent, android-edittext, textview, android-spinner

我在将活动的 EditText 和 Spinner 的值传递给来自另一个活动的 TextView 时遇到问题。我只能将第一个活动链接到第二个活动。这些值不会显示在 textview 中。

另外，我得到了 NullPointerException ，它指向`String name = b.getString("name");`哪个来自第二个活动。

下面是第一个活动代码（将值传递给第二个活动） - PersonalInformation：

```
btnView = (Button) findViewById(R.id.btnView);
    btnView.setOnClickListener(new View.OnClickListener()
        {

            @Override
            public void onClick(View v)
            {
                nameSpinner = (Spinner) findViewById(R.id.nameSpinner);
                EditText txtDate = (EditText) findViewById(R.id.txtDate);
                EditText txtType = (EditText) findViewById(R.id.txtType);
                EditText txtLikes = (EditText) findViewById(R.id.txtLikes);
                EditText txtDislikes = (EditText) findViewById(R.id.txtDislikes);

                Intent i = new Intent(PersonalInformation.this, SavedInfo.class);                   
                Bundle b = new Bundle();
                b.putString("name", nameSpinner.getSelectedItem().toString());
                b.putString("date", txtDate.getText().toString());
                b.putString("category", txtType.getText().toString());
                b.putString("likes", txtLikes.getText().toString());
                b.putString("dislikes", txtDislikes.getText().toString());
                i.putExtras(b);
                startActivity(i);

                Intent viewIntent = new Intent(context, SavedInfo.class);
                startActivity(viewIntent); 
```

这些用于从第一个活动中获取值的代码 - SavedInfo.java

```
@Override
    public void onCreate(Bundle savedInstanceState)
    {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.saved_info);

        Bundle b = this.getIntent().getExtras();
        String name = b.getString("name");
        String date = b.getString("date");
        String category = b.getString("category");
        String likes = b.getString("likes");
        String dislikes = b.getString("dislikes");

        ((TextView)findViewById(R.id.textName)).setText(name);
        ((TextView)findViewById(R.id.textDate)).setText(date);
        ((TextView)findViewById(R.id.textType)).setText(category);
        ((TextView)findViewById(R.id.textLikes)).setText(likes);
        ((TextView)findViewById(R.id.textDislikes)).setText(dislikes); 
```

下面是我的 LogCat

```
09-03 14:31:49.021: I/dalvikvm(573): threadid=3: reacting to signal 3
09-03 14:31:49.121: I/dalvikvm(573): Wrote stack traces to '/data/anr/traces.txt'
09-03 14:31:49.391: D/gralloc_goldfish(573): Emulator without GPU emulation detected.
09-03 14:31:51.960: D/dalvikvm(573): GC_FOR_ALLOC freed 101K, 3% free 9255K/9479K, paused 47ms
09-03 14:31:55.960: D/AndroidRuntime(573): Shutting down VM
09-03 14:31:55.960: W/dalvikvm(573): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
09-03 14:31:55.980: E/AndroidRuntime(573): FATAL EXCEPTION: main
09-03 14:31:55.980: E/AndroidRuntime(573): java.lang.RuntimeException: Unable to start activity ComponentInfo{main.page/main.page.SavedInfo}: java.lang.NullPointerException
09-03 14:31:55.980: E/AndroidRuntime(573):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
09-03 14:31:55.980: E/AndroidRuntime(573):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
09-03 14:31:55.980: E/AndroidRuntime(573):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
09-03 14:31:55.980: E/AndroidRuntime(573):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
09-03 14:31:55.980: E/AndroidRuntime(573):  at android.os.Handler.dispatchMessage(Handler.java:99)
09-03 14:31:55.980: E/AndroidRuntime(573):  at android.os.Looper.loop(Looper.java:137)
09-03 14:31:55.980: E/AndroidRuntime(573):  at android.app.ActivityThread.main(ActivityThread.java:4424)
09-03 14:31:55.980: E/AndroidRuntime(573):  at java.lang.reflect.Method.invokeNative(Native Method)
09-03 14:31:55.980: E/AndroidRuntime(573):  at java.lang.reflect.Method.invoke(Method.java:511)
09-03 14:31:55.980: E/AndroidRuntime(573):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
09-03 14:31:55.980: E/AndroidRuntime(573):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
09-03 14:31:55.980: E/AndroidRuntime(573):  at dalvik.system.NativeStart.main(Native Method)
09-03 14:31:55.980: E/AndroidRuntime(573): Caused by: java.lang.NullPointerException
09-03 14:31:55.980: E/AndroidRuntime(573):  at main.page.SavedInfo.onCreate(SavedInfo.java:19)
09-03 14:31:55.980: E/AndroidRuntime(573):  at android.app.Activity.performCreate(Activity.java:4465)
09-03 14:31:55.980: E/AndroidRuntime(573):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
09-03 14:31:55.980: E/AndroidRuntime(573):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
09-03 14:31:55.980: E/AndroidRuntime(573):  ... 11 more 
```

我需要将 EditText 和 Spinner 的值作为 TextView 传递给第二个活动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T07:13:09.373

您已经在代码中为同一活动启动了两次活动。

使用此代码：

```
btnView = (Button) findViewById(R.id.btnView);
btnView.setOnClickListener(new View.OnClickListener()
    {

        @Override
        public void onClick(View v)
        {
            nameSpinner = (Spinner) findViewById(R.id.nameSpinner);
            EditText txtDate = (EditText) findViewById(R.id.txtDate);
            EditText txtType = (EditText) findViewById(R.id.txtType);
            EditText txtLikes = (EditText) findViewById(R.id.txtLikes);
            EditText txtDislikes = (EditText) findViewById(R.id.txtDislikes);

            Intent i = new Intent(PersonalInformation.this, SavedInfo.class);                   
            Bundle b = new Bundle();
            b.putString("name", nameSpinner.getSelectedItem().toString());
            b.putString("date", txtDate.getText().toString());
            b.putString("category", txtType.getText().toString());
            b.putString("likes", txtLikes.getText().toString());
            b.putString("dislikes", txtDislikes.getText().toString());
            i.putExtras(b);
            startActivity(i); 
```

并在您的 SavedInfo.java 文件中：

使用从包中获取字符串 n 微调器值

```
Bundle extras = i.getExtras();
String date = extra.getString("date");
...
... 
```

希望它会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T07:13:20.780

我认为问题在于您要开始活动两次：

```
 startActivity(i);

            Intent viewIntent = new Intent(context, SavedInfo.class);
            startActivity(viewIntent); 
```

只需删除最后两行，它应该适合你。祝你好运

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T07:13:28.683

您已经两次调用同一活动类的意图。

```
 i.putExtras(b);
                startActivity(i);

                Intent viewIntent = new Intent(context, SavedInfo.class);
                startActivity(viewIntent); 
```

所以删除最后两行`viewIntent`代码的其他部分似乎没问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T07:21:55.820

除了上面的答案，还要检查一下，SavedInfo 不应该是一个简单的 java 类吗？如果它是一个类，则不能将其作为 StartActivity 参数的一部分。

需要从 Activity 类派生它成为一个活动，然后可以按照它被使用的方式使用它。

# asp.net-mvc-3 - Asp.net 网站管理工具图标未显示

> ID：12243381
> 
> 赞同：0
> 
> 时间：2012-09-03T07:08:21.760
> 
> 标签：asp.net-mvc-3

我在 VS2012 上的 MVC3 中创建了一个 asp.net 项目。它有 AccountController 和所有其他 View 文件夹。但我没有在解决方案资源管理器上看到管理工具图标来创建管理员。我怎样才能得到这个或启用图标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T03:50:12.163

如果有人有同样的问题并且他们没有看到 ASP.NET 配置的图标。您可以单击项目 -> ASP.NET 配置。它将打开同一个站点，您可以在其中设置管理员用户。

# php - 多文件表单上传

> ID：12243384
> 
> 赞同：0
> 
> 时间：2012-09-03T07:08:39.967
> 
> 标签：php, file-upload, multifile-uploader

现在第一件事是我在网上到处都看到了如果我想做的事情不起作用该怎么办，我已经尝试了所有的解决方案，但它们都不起作用，我显然是遗漏了什么。

我正在从表单字段上传多个文件。这完美地工作并运行一些调整大小等的代码删除 tmp 文件等等。

问题是如果我不想上传任何文件，上传和图像处理脚本仍然会运行并抛出一堆错误。

我已经尝试了以下...加上更多一些奇怪的变化：P

```
if($_FILES['gallery']['name']!=""){      // if files then...
include_once("gallery_edit_script.php");
  } 
```

和

```
if (count($_FILES["gallery"]["name"] > 0)){   // if files count is more than 0 then...
include_once("gallery_edit_script.php");
  } 
```

Gallery_edit_script.php 是一个包含的事实是否与它有关？

我检查了文件错误...

```
$_FILES["gallery"]["error"] 
```

它显示没有选择要上传的文件，这正是我想要的。

任何想法的人？

感谢任何看过这个的人。

干杯

添加了 HTML，但就像我说的上传工作正常，当我想发布表单而不包含要上传的文件时，我希望它跳过图库脚本。这是在编辑页面上，所以用户已经提交了表单、添加到数据库的数据和上传的文件，然后回来想要编辑数据但不上传文件。

HTML（简化为有大量字段等）

```
<form action="inventory_edit_lease.php" enctype="multipart/form-data" name="myForm" id="myForm" method="post">
Gallery Photos <input class="input-file" type="file" name="gallery[]" id="gallery" multiple="multiple" />
<input class="button-edititem" type="submit" name="submit" id="button" value="" onclick="javascript:return validateMyForm();"/>
</form> 
```

抱歉，我第一次没有添加 HTML，表单有效，所以我认为我真的不需要它；）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T07:12:23.597

### 几个检查清单...

1.  确保您已将您命名`<input type="file" />`为`gallery`：

    `<input type="file" />`

2.  确保`<form>`标签具有正确的 URL `method="post"`。`action=""`

3.  另外，请确保您的`<form>`标签有，`enctype="multipart/form-data"`否则您将无法通过该表单上传文件！

我们需要先查看您文件的 HTML 代码，然后才能提出建议。确保您已遵循上述清单，即使它不起作用，也请发布代码并让我们知道！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T07:15:22.613

如果没有 HTML 表单，我只是在猜测：

*   对于同名的多个文件上传，您必须将文件归档为
*   在服务器端，您将收到它们`$_FILES["gallery"]`

    `$_FILES["gallery"]`将是一个元素数组，例如：

    ```
     foreach($_FILES["gallery"] as $file){
         var_export($file);
     } 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T01:22:59.857

对于那些感兴趣的人来说，这是有效的:)

我从另一个线程得到这个[if($_FILES['files']['name']!="") 如果文件运行，如果没有文件就不要运行头痛](https://stackoverflow.com/questions/12380612)

```
if(!empty($_FILES['gallery']['tmp_name']))
 {
 include_once("gallery_edit_script.php");
 }
   else
   {
   header("Location: inventory_list_sales.php");
   } 
```

有趣的是，我在另一个网站上尝试了这个，我正在使用几乎相同的代码，因为我复制了所有文件并且只编辑了小部分，但它不起作用大声笑

感谢大家的帮助：）

# html - 大字体不能使布局流动

> ID：12243387
> 
> 赞同：1
> 
> 时间：2012-09-03T07:08:57.143
> 
> 标签：html, layout, font-size, liquid-layout

在开始时，我没有设置`font-size`，在 中插入一个长文本`div`，例如：

```
<div>Hello World Hello World Hello World Hello World Hello World Hello World</div> 
```

如果我缩小浏览器，溢出部分将变为下一行；

但是如果我将文本`font-size`大小设置为大尺寸，例如：

```
<div style="font-size:72px;">asdasdasasdasdasd</div> 
```

我缩小浏览器，溢出部分无法更改为下一行：

演示[在这里](http://jsfiddle.net/hh54188/dxXBQ/1/)

那么为什么会这样呢？我该如何解决这个问题？我希望无论我设置多大的尺寸`font-size`，布局都会像往常一样流动

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T07:23:08.970

至于您的演示，您没有给长字符串留任何空间，因此通常浏览器会将其视为一个“单词”并且不希望将其拆分。

要将您的演示分成几行，请添加空格：http: [//jsfiddle.net/dxXBQ/2/](http://jsfiddle.net/dxXBQ/2/)

当然我相信那不是你真正的内容。如果您的真实内容确实有很长的单词并且您仍然希望它们换行，请使用`word-wrap`CSS 样式：http: [//jsfiddle.net/dxXBQ/4/](http://jsfiddle.net/dxXBQ/4/)

# c - 在函数的返回类型中定义结构

> ID：12243393
> 
> 赞同：4
> 
> 时间：2012-09-03T07:09:56.063
> 
> 标签：c, struct

```
#include <stdio.h>
#include <string.h>

struct s
{
    int data;
} fun()
{
    static struct s ss; 
    ss.data = 20;
    return ss;
}

int main()
{
    struct s ss;
    memcpy(&ss, &(fun()), sizeof(struct s));

    printf("\n Data: :%d", ss.data);

    return 0;
} 
```

在上面的程序中，我试图定义一个提到返回类型的结构。`struct s`定义成功。

这是一个有效的用法吗？我从未见过这样的真实场景。

如何使这个程序工作？

我收到此编译器错误：

```
asd.c: In function ‘main’:
asd.c:21:15: error: lvalue required as unary ‘&amp;’ operand 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-03T07:12:41.997

除了您的`memcpy`行之外的所有内容都是正确的（尽管有点难以阅读），并且编译器错误会告诉您出了什么问题：您不能获取“临时”的地址（即函数调用表达式的结果）。

但是，您可以而且应该以更自然的方式编写：

```
struct s ss = fun(); 
```

# facebook - 从 Facebook 评论框登录/注销时如何捕获事件？

> ID：12243395
> 
> 赞同：1
> 
> 时间：2012-09-03T07:09:58.997
> 
> 标签：facebook, events, refresh

当我从任何 Facebook 社交插件（如评论框或点赞按钮）登录或注销时，有什么方法可以捕获 Facebook 事件？每当用户登录 Facebook 插件时，我想刷新我的页面。因为当我使用评论框登录时，它不会显示我已登录，因此我无法使用“赞”按钮。但是当我刷新我的页面时，它显示我已登录到这两个插件。

这是我的代码：

```
<div id="fb-root">
</div>
<script>
    window.fbAsyncInit = function () {
        FB.init({ appId: 'My App ID', status: true, cookie: true, xfbml: false });

        setTimeout(aaa, 6000);

        FB.Event.subscribe("xfbml.render", function (targetUrl) {
            $("#myh1").html("Facebook Loaded");
            alert('edge.create');
        });

        FB.Event.subscribe('auth.authResponseChange', function (response) {
            alert('The status of the session is: ' + response.status);
        });
    };
    (function () {
        var e = document.createElement('script'); e.async = true;
        e.src = document.location.protocol +
  '//connect.facebook.net/en_US/all.js';
        document.getElementById('fb-root').appendChild(e);
    } ());

    function aaa() {
        FB.XFBML.parse(document.getElementById('fbDiv'), function () {
            alert('I rendered');
        });
    }
</script>

<div id="fbDiv">
    <div class="fb-comments" data-href="http://www.facebook.com/AiLiveCaptions" data-num-posts="2" data-width="470">
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T09:23:08.217

在我看来，当您使用两个单独的插件时，这可能是默认行为，它们属于 facebook 或任何第三方网站 iefacepile/commentbox。

您的浏览器需要重新加载才能跨同一页面上的多个插件更新页面上的会话，就像您在多个选项卡上打开任何邮件 ID 并在不同浏览器上打开相同 ID 时的区别一样。

# opencv - 如何使用 OpenCV 创建图像的 3D 透视图？

> ID：12243401
> 
> 赞同：0
> 
> 时间：2012-09-03T07:10:24.380
> 
> 标签：opencv, perspective

我在墙上有一个图像。我想自己创建它的 3D 透视图。假设给定图像上的点、相机位置、相机方向，如何获得 3d 透视矩阵来播放原始图像？

我知道我可以使用相机的方向来计算 3d 旋转矩阵，但我不知道如何计算后续的投影矩阵......

我遇到了[这个链接](http://en.wikipedia.org/wiki/3D_projection#cite_note-3)（请参阅部分透视投影），但我不明白投影后发生了什么。相机位置和观众位置之间有什么区别？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T13:26:29.593

使用 openGl 及其开放示例来解决您的问题。

在下面的链接中有很好的样本可以理解 3d 重建： http: [//www.songho.ca/opengl/gl_transform.html](http://www.songho.ca/opengl/gl_transform.html)

希望有帮助

# postgresql - postgres update join 不更新任何记录

> ID：12243403
> 
> 赞同：0
> 
> 时间：2012-09-03T07:10:33.550
> 
> 标签：postgresql

执行以下查询时，daily_subscriptions_stats 表中的记录不会更新：

```
UPDATE daily_subscriptions_stats dss SET arrivals_count = da.arrivals_count
FROM daily_arrivals da
WHERE da.year = dss.year AND da.month = dss.month AND da.day = dss.day 
```

daily_subscriptions_stats 中的列如下：

```
consecutive_day, bigint
date, timestamp
arrivals_count, integer
departures_count, integer
year, integer
month, integer
day, integer 
```

AND 在 daily_arrivals 中：

```
year, integer
month, integer
day, integer
arrivals_count, integer 
```

有谁知道为什么查询不更新记录？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T07:27:59.440

尝试使用这个：

```
UPDATE daily_subscriptions_stats dss SET arrivals_count =(SELECT da.arrivals_count
FROM daily_arrivals da
WHERE da.year = dss.year AND da.month = dss.month AND da.day = dss.day); 
```

[这是工作的 SQL Fiddle](http://sqlfiddle.com/#!1/539ba/1)

# android - gluUnProject - 无法获得正确的值

> ID：12243407
> 
> 赞同：-1
> 
> 时间：2012-09-03T07:10:45.727
> 
> 标签：android, opengl-es, opengl-es-2.0

我正在打电话给 gluUnProject（应用程序正在使用 GLES20）。对于我的生活，我无法获得我正在寻找的价值。

我在 (-9, 0, 0) 有一个对象，所以我需要 gluUnProject 的结果以某种方式等于它。相机位于 (0, 20, 4)，近/远平面距离为 (3, 100)。我什至尝试在函数运行时打印出当前矩阵（在这种情况下，屏幕上触摸的像素位置是 (160, 345)，非常接近对象的位置）：

```
win: (160,345,0.0)
model: (1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 1.0)
viewport: (0, 0, 1280, 720)
proj: (0.5625, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, -1.020202, -1.0, 0.0, 0.0, -2.020202, 0.0) 
```

近平面：

```
obj: (-1.3333333, -0.041666687, -1.0, 1.0)
final: (-1.3333333, -0.041666687, -1.0) 
```

远平面：

```
obj: (-1.3333333, -0.041666687, -1.0, 0.00999999)
final: (-133.33345, -4.1666727, -100.0001) 
```

我应该在这里使用为 Z 值计算的东西吗？如果我提供大约 0.864 的值，我会得到大约正确的 X 值 (-9)，这对我来说真的没有意义。我在任何计算中都找不到这个值。我一遍又一遍地玩这些数字，但不能让它们一起工作。我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T13:22:15.503

这是我的未项目

```
glm::vec3 World::Unproject(glm::vec3 v){
  glm::mat4 pv = ProjectionMatrix * ViewMatrix;
  glm::mat4 inv = glm::inverse(pv);
  glm::vec4 v4(v, 1.f);
  glm::vec4 r4 = inv * v4;
  glm::vec3 r(r4.x / r4.w, r4.y / r4.w, r4.z / r4.w);
  return r;
} 
```

`v`是`(x,y,1.0)`

`-1.0 < x,y < 1.0`

Camera, Unproject(v) - 定义光线 你可以计算到光线的距离

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T11:59:58.537

你不能用 gluUnProject 做到这一点。

第三个参数是屏幕空间中所需点的深度（即介于 0 和 1 之间，0 映射到近平面，1 映射到远平面）

因为你不知道这个值，所以你不能使用这个函数。

如果您尝试实现拾取，您应该手动启动射线并测试与您的对象的交叉点（或使用碰撞/物理引擎为您执行此操作）。

# java - 如何将 zip 上的文件作为 Files[] 数组获取？

> ID：12243409
> 
> 赞同：0
> 
> 时间：2012-09-03T07:10:50.557
> 
> 标签：java

> **可能重复：**
> [如何列出 JAR 文件中的文件？](https://stackoverflow.com/questions/1429172/how-do-i-list-the-files-inside-a-jar-file)

这主要是问题，如何将 zip 文件中的文件作为文件数组获取

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T07:49:03.097

简单的答案是你不能。A`File`本质上是主机操作系统文件系统中对象的抽象文件系统路径。但是 ZIP 文件中的文件不是文件系统中的对象，因此没有文件系统路径。

想想看。你能制定一个`<pathname>`ZIP 文件条目，让你（比如说）`cat <pathname>`在 Linux 上运行吗？或者在 Windows 上类似的东西？

* * *

所以，你可以做什么？

*   您可以将 ZIP 文件提取到文件系统（使用外部命令最简单），然后参考包含提取条目的文件。您需要花点时间将 ZIP 的目录结构转换为*相应*的路径名。

*   您可以使用`ZipEntry`对象而不是 File 对象……尽管我认为它们仅在 Zip 文件保持打开状态时才有效/可用。

*   您可以找到……或编写一个 Java 7 风格的`FileSystem`实现，允许您将 ZIP 文件视为文件系统。但是那些 API 不使用`File`对象等。

*   如果您的操作系统支持它，您可以将 ZIP 文件“挂载”为文件系统，然后`File`就可以工作了。例如：[http](http://en.wikipedia.org/wiki/Filesystem_in_Userspace) ://en.wikipedia.org/wiki/Filesystem_in_Userspace加上[http://code.google.com/p/fuse-zip/](http://code.google.com/p/fuse-zip/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T07:18:17.840

除了从 zip 中提取文件之外，我不知道直接在 zip 文件中引用文件的 URI 方案。因此，您将以文件名列表作为`String`非`File`实例结束。

因此，您可以使用诸如`ZipFile`、、`ZipEntry`输入流和子类之类的类从 Zip 中提取文件，然后您可以有一个 File 实例在数组中引用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T07:15:10.560

您可能想查看`java.util.zip`具有解压缩文件实用程序的软件包。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T07:17:49.647

## 更新

要在 zip 中获取文件数组，必须首先将它们提取到临时位置：

```
import java.util.zip.*;
import java.io.File;
import java.util.ArrayList;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.InputStream;
import java.util.Enumeration;
import java.io.IOException;

public class ZipFileExtractor {

    public static void main(String[] args) {
        File[] zipFiles = ZipFileExtractor.getFileArray("archive.zip");
        System.out.println(zipFiles.length);
    }

    public static File[] getFileArray(String archiveFileName) {

        ArrayList<File> zipArrayList = new ArrayList<File>();

        try {

            ZipFile zFile = new ZipFile(archiveFileName);

            for (Enumeration<? extends ZipEntry> e = zFile.entries(); e.hasMoreElements(); ) {

                ZipEntry zEntry = e.nextElement();

                InputStream in = zFile.getInputStream(zEntry);

                File temp = File.createTempFile(zFile.getName(), null);
                temp.deleteOnExit();

                FileOutputStream out = new FileOutputStream(temp);

                byte[] buffer = new byte[1024];
                while (in.read(buffer) != -1) {
                    out.write(buffer);
                }

                zipArrayList.add(temp);
            }

        } catch (IOException e) {

        }

        return zipArrayList.toArray(new File[zipArrayList.size()]);
    }
} 
```

* * *

包中有一个名为[ZipInputStream](http://docs.oracle.com/javase/6/docs/api/java/util/zip/ZipInputStream.html)的API 类`java.util.zip`。

它有很多方法，其中`getNextEntry()`几乎可以做到：

```
ArrayList<ZipEntry> zipArrayList = new ArrayList<ZipEntry>();

ZipInputStream zis = ZipInputStream(new FileInputStream("archive.zip"));

while ((ZipEntry ze = zis.getNextEntry()) != null) {
   zipArrayList.add(ze.getName());
} 
```

我没有尝试编译上面的代码，所以它可能有一些问题，但我希望这个想法很清楚。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-03T07:19:38.753

另请查看 Apache Commons Compress api，其中有一些关于如何开始的示例[http://commons.apache.org/compress/examples.html](http://commons.apache.org/compress/examples.html)

# c# - “Suppress JIT optimization on module load”调试选项有什么作用？

> ID：12243410
> 
> 赞同：11
> 
> 时间：2012-09-03T07:10:57.107
> 
> 标签：c#, .net, vb.net, visual-studio-2005, jit

`"Suppress JIT optimization on module load"`调试选项的作用是什么？

我最近不得不将其关闭以处理能够成功调试使用 COM 组件的应用程序。

关闭它有什么风险？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-03T07:20:22.550

抑制 JIT 优化意味着您正在调试未优化的代码。代码运行速度有点慢，因为它没有经过优化，但您的调试体验要彻底得多。仅当您遇到优化代码中出现但无法在非优化版本中重现的错误时，才建议调试优化代码。

如果您清除 Suppress JIT optimization on module load 选项，您可以调试优化的 JIT 代码，但您的调试能力可能会受到限制，因为优化的代码与源代码不匹配。因此，调试器窗口（例如 Locals 和 Autos 窗口）显示的信息量可能不如调试未优化代码时显示的信息量多。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-03T07:22:10.190

这意味着 JIT 代码不会针对调试进行优化。例如：

```
private int Add(int x, int y)
    {
        int notUsed = 2;
        return x + y;
    } 
```

在此代码中，notUsed 变量将通过优化从 JIT 代码中排除，因为不需要此代码。如果您开始调试优化代码，它可能看起来不像您编写的代码（但会做同样的事情）。优化的另一个例子是方法内联。

# regex - 将大量字符串与固定数量的正则表达式模式匹配的有效算法

> ID：12243416
> 
> 赞同：0
> 
> 时间：2012-09-03T07:11:28.917
> 
> 标签：regex, performance, algorithm

# 语境

在解析 Web 访问日志时，需要将机器人与人类用户代理分开。

我手动构建了它们的列表，提取了类似 bot 的模式（例如包含**bot**）。然后我有一个模式列表（大约 300 项大），我实时验证传入的访问日志。随着时间的推移，这已经成为一个相当大的瓶颈，因为我的（低效的）算法会寻找任何模式；即使我们忽略了意味着 DoS 漏洞的性能下降。

# 代码（Java）

```
String userAgent;
List<Pattern> botPatterns;

    for (Pattern botPattern : botPatterns)
    {
        if (botPattern.matcher(userAgent).find())
        {
            return true;
        }
    }
    return false; 
```

# 已经探索的答案

### 使用 WURFL

这可能是一个简单的解决方案，但结果有时不准确。现在想避免使用内置解决方案。

### 使用用户代理缓存

通过将用户代理字符串存储在哈希图中，可以缓存结果。然而，即使这提高了性能，这也增加了使用随机生成的用户代理字符串进行简单 DoS 攻击的脆弱性。

# 问题

是否有一种有效的算法可以将大量 (N) 字符串与固定数量的正则表达式模式 (m) 进行匹配？

# 编辑：基准答案

我使用真实数据以及随机生成的用户代理字符串对@stemm 的答案进行了基准测试。我在 10 秒内运行了测试，并对计算时间进行了平均。缓存是一个大小为 5000 的简单 LFU ehcache

这是我的结果：

## 模式循环

### 没有缓存

真实数据：101us

随机数据：193us

### 带缓存

真实数据：4us

随机数据：203us

## 单一模式

### 没有缓存

真实数据：100us

随机数据：160us

### 带缓存

真实数据：3us

随机数据：154us

# 结论

*   对于现实生活中的情况，缓存是最有效的解决方案。
*   与循环模式相比，具有单一模式可提供 25% 的增益。
*   缓存不像我想象的那样容易受到 DoS 攻击。

谢谢大家的回答和评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T07:36:54.017

如果您有固定数量的模式，您可以构建[有限状态机](http://en.wikipedia.org/wiki/Finite-state_machine)来表示您的模式，从而大大提高性能。但是这个解决方案需要对逻辑和表示 FSM 进行额外的开发。

示例您有多种模式 [abc, abd, acd, dab]

有限状态机看起来像：

```
start -> a -> b -> c -> finish
                -> d -> finish
           -> c -> d -> finish
      -> d -> a -> b -> finish 
```

您可以将 FSM 视为具有有限数量状态的有序图。您想`abd`在这些模式上匹配字符串。从 start 开始，您遇到 a -> b -> d 并完成。Thta 表示该字符串与您可以从路径恢复的模式匹配。具有类似功能的更复杂的模式，`*`您`?`可以通过将状态链接到自身（`*`）来表示，或者完全跳过此状态（`?`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T09:28:59.347

**主要思想是创建收集模式，其中包含您拥有的所有正则表达式。**

例如 - 您想查找与以下任何正则表达式匹配的字符串：`^\d+$`or`^[aA]+$`或`^[a-z\s]+$`. 因此，您可以将它们组合成这样的正则表达式：`(^\d+$|^[aA]+$|^[a-z\s]+$)`

示例java代码：

```
public class Test {

    public static Pattern gather( String... patterns ) {
        StringBuilder finalRegexBuilder = new StringBuilder( "(" );
        for ( String ptr : patterns ) {
            finalRegexBuilder.append( ptr ).append( "|" );
        }
        finalRegexBuilder.setLength( finalRegexBuilder.length() - 1 );
        finalRegexBuilder.append( ")" );
        return Pattern.compile( finalRegexBuilder.toString() );
    }

    public static void main( String[] args ) {
        Pattern regex = gather( "^\\d+$", "^[aA]+$", "^[a-z\\s]+$" );

        System.out.println( regex.toString() ); // (^\d+$|^[aA]+$|^[a-z\s]+$)

        System.out.println( regex.matcher( "1235" ).find() ); // true
        System.out.println( regex.matcher( "1235fdjg" ).find() ); // false
        System.out.println( regex.matcher( "AAAaaaAaa" ).find() ); // true
        System.out.println( regex.matcher( "hello world" ).find() ); // true
    }
} 
```

*事实上 - 正则表达式的底层机制是一个有限状态机。所以，在上面的代码中，我们得到了@mishadoff 谈到的 FSM。*

# javascript - JQuery：如果attr（left）等于0px，如何写？

> ID：12243418
> 
> 赞同：1
> 
> 时间：2012-09-03T07:11:34.143
> 
> 标签：javascript, jquery, if-statement

我需要检查一个元素左定位是否等于 0px，但我不确定如何去做。

到目前为止，我有：

```
if($('#slide-panel').attr(left) == '0px'){

//do something

}; 
```

但我不确定如何使语法起作用。

任何意见，将不胜感激！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T07:12:36.943

使用[.position](http://api.jquery.com/position/)方法：

```
if($('#slide-panel').position().left == 0){

    //do something

}; 
```

该位置是相对于偏移父级的，如果要相对于文档，则使用`.offset()`方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T07:13:21.647

使用[`.offset()`](http://api.jquery.com/offset/)这样的函数 - 获取匹配元素集中第一个元素相对于文档的当前坐标。

```
var p = $("#slide-panel'"); 
var offset = p.offset(); 
if(offset.left ==0) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T07:15:07.217

**尝试以下任何一种：**

```
if($('#slide-panel').attr("style") == 'left:0px'){
    //do something
}; 
```

**或者：**

```
if($('#slide-panel').css("left") == '0px'){
    //do something
}; 
```

**或者：**

```
if($('#slide-panel').position().left == 0){
    //do something
}; 
```

# jquery - 检查复选框是否被动态禁用并使用 jquery 使用某个类更新其标签

> ID：12243420
> 
> 赞同：1
> 
> 时间：2012-09-03T07:11:38.810
> 
> 标签：jquery, checkbox

我有以下 jQuery 函数，它用图像替换复选框和单选按钮。这是我从[htmldrive](http://www.htmldrive.net/items/show/637/CSS-and-jQuery-Custom-Checkbox-and-Radio-Button-Inputs-Styled)获得的代码。除了禁用的检测部分外，一切正常。

这个想法是我有四个复选框，其中一个是独占的。如果选中了独占的，则其余的将被禁用。所以我需要从禁用的属性中获取这个禁用的属性，并使用“禁用”类更新它们各自的标签。

请记住，此处的**输入**是复选框或单选按钮，但我主要关注的是复选框。

注释代码是我试图检查输入是否被禁用并使用类更新其标签但它似乎不起作用的地方。任何帮助将不胜感激。

**更新** 以下是我完整使用的功能

```
jQuery.fn.customInput = function(){
 $(this).each(function(i){ 
  if($(this).is('[type=checkbox],[type=radio]')){
   var input = $(this);

   // get the associated label using the input's id
   var label = $('label[for='+input.attr('id')+']');

   //get type, for classname suffix 
   var inputType = (input.is('[type=checkbox]')) ? 'checkbox' : 'radio';

   // wrap the input + label in a div 
  $('<div class="custom-'+ inputType +'"></div>').insertBefore(input).append(input, label);

  // find all inputs in this set using the shared name attribute
  var allInputs = $('input[name='+input.attr('name')+']');
  input.attr('disabled', false);

  // necessary for browsers that don't support the :hover pseudo class on labels
  label.hover(
   function(){ 
   $(this).addClass('hover'); 
   if(inputType == 'checkbox' && input.is(':checked')){ 
    $(this).addClass('checkedHover'); 
   } 
  },
   function(){ $(this).removeClass('hover checkedHover'); }
 );

 //bind custom event, trigger it, bind click,focus,blur events     
 input.bind('updateState', function(){ 
   if (input.is(':checked')) {
    if (input.is(':radio')) {    
     allInputs.each(function(){
   $('label[for='+$(this).attr('id')+']').removeClass('checked');
  });  
 };
 label.addClass('checked');
}
else { label.removeClass('checked checkedHover checkedFocus'); }

/* if (input.is(':checkbox')  && input.prop('disabled'))
{
  label.addClass('disabled');
  label.removeClass('checked');
} */

})
 .trigger('updateState')
 .click(function(){ 
  $(this).trigger('updateState'); 
 })
 .focus(function(){ 
  label.addClass('focus'); 
  if(inputType == 'checkbox' && input.is(':checked')){ 
   $(this).addClass('checkedFocus'); 
  } 
 })
 .blur(function(){ label.removeClass('focus checkedFocus'); });
  }
 });
}; 
```

然后我将它实例化如下：

```
$(document).ready(function(){
    $('input').customInput();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T07:40:48.363

您使用的 JQuery 版本将决定您是使用 prop 还是 attr。

你可以用这个

```
if(!$(this).prop('disabled')) 
```

检查这个[小提琴](http://jsfiddle.net/SNAG12/eJ3bs/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T07:20:49.117

尝试 ：

```
if (input.is(':checkbox')  && input.attr("disabled") )
{
 label.addClass('disabled');
 label.removeClass('checked');
} 
```

# artificial-intelligence - 加权 A* 中的启发式函数

> ID：12243421
> 
> 赞同：4
> 
> 时间：2012-09-03T07:11:39.963
> 
> 标签：artificial-intelligence, heuristics

三个AI新手问题：

1.  为什么 A* 应该采用启发式算法来找到最佳路径？
2.  如果障碍物挡在路上，平局制动技术有什么好处？
3.  什么算法适合在有障碍物的网格上寻找路径？（像吃豆人）

**对于第一个问题**，让我们以`Manhattan distance`启发式为基础，调用是 h(x)。现在，为什么 A* 应该找到一条具有 8*h(x) + 5 的新启发式的非最优路径？（随机数）。据我在 A* 算法中的理解，将根据函数做出决定，`f(x) = g(x) + h(x)`所以如果我按比例放大 h，为什么最大值 \ 最小值会改变？

我读过[这篇文章](http://theory.stanford.edu/~amitp/GameProgramming/Heuristics.html)，他们在那里谈到了乘以一个小的系数来进行平拉制动，这在某种程度上符合我的理论，但他们坚持认为这个系数应该很小。所以我不知道该怎么想。

**对于第二个问题**，我尝试了解决吃豆人游戏的链接中的技术。曼哈顿距离启发式的任何变化都会导致更多节点扩展。我什至“发明”了一个新的加权方案，我更喜欢外壳上的路径——同样的事情。后来我试图取所有函数中的最大值（这也应该是可以接受的），但仍然表现不佳。我错过了什么？

第三个问题没什么可补充的。如前所述 - 我找不到比曼哈顿距离更好的东西了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T19:36:12.233

1) The terse answer is, if your heuristic is not admissible, you will (possibly) get a non-optimal result. I think you knew this. For the intuition, recall the definition of an admissible heuristic: It is a heuristic which is never more pessimistic than reality. (We usually say, "it is always optimistic," since if you had a heuristic that was neither optimistic nor pessimistic, you'd basically have your answer already.) If your heuristic is pessimistic in some places, then it ends up avoiding the best choices.

As for scaling up and scaling down the heuristics as per your question, remember, you are only scaling up the *heuristic* part of your formula, not the sunk cost part of the formula. If you could scale them up exactly the same, you couldn't see the difference, but you can't always do that. Even in your example, the additive bit you tacked on spoils it.

2-3) It's not clear to me what you mean by "solving" pacman. If it's anything more complex than finding a shortest path to eat all the dots in an empty grid, you're getting well beyond the scope of A*, I think. Even then, A* would not be my tool of choice.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T10:27:56.897

1.  如果启发式不可接受，那么您的启发式将（有时）估计达到目标的成本高于可能的最低成本。因此，最终路径可能不是最优的，因为它可能没有探索由于“坏”听力而显得过于昂贵的路径。在您的情况下，使用`8*h(x) + 5`单调增加所有估计成本，因此虽然所有估计路径的成本都会更大，但它们仍将以相同的方式排序（例如，使用您的启发式，路径长度`A`为 5，路径长度为 3 `B`B（成本 29）仍然估计比 A（成本 45）短。
2.  如[文章](http://theory.stanford.edu/~amitp/GameProgramming/Heuristics.html#breaking-ties)所示，曼哈顿距离+第一个提到的决胜局对障碍物效果很好。您是否将估计的最大路径长度保留为 1000，或者对于您的 Pac-Man 实施，该值是否应该更高？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T11:56:16.780

问题 3：

如果您实际上是在制作 Pac Man 游戏，您必须在其中找到*每个*“幽灵”的路径，您还可以使用[Dijkstra 算法](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)，以 Pac Man 的位置为目标，一次性计算出每个幽灵的最佳路径. 而且由于每个“边”（从一个单元格到下一个单元格）的成本始终相同，因此您也可以使用简单的广度优先搜索。最后，您还可以看看[Collaborative Diffusion](http://scalablegamedesign.cs.colorado.edu/wiki/Collaborative_Diffusion)以不同的方式发送每个幽灵。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T15:48:00.717

通常，如果您的启发式函数不可接受，您可以在更短的时间内找到*“非最佳”*解决方案（是一种“问题缓解”）。如果您对解决方案“最优性”没有严格限制，则可以使用不允许的启发式函数。（例如，在游戏 AI 中，您需要快速解决方案而不是最佳解决方案）。

现在是吃豆人 AI 的答案。**在最初的吃豆人 AI 中，没有 A***，没有复杂的路径规划，没有网格空间导航。[Iann Millington 的《人工智能游戏](https://rads.stackoverflow.com/amzn/click/com/0124977820)》一书中有一个简单的吃豆人 AI 算法，非常简单但非常有效。

1.  一个幽灵直线移动，直到它到达一个**路口**。
2.  在一个路口，他们**半随机地**选择了下一个方向。

停止。就这样。

对于半随机，我的意思是有两种情况：

1.  `x/10`次它选择一个随机方向。
2.  `(10-x)/x`它选择玩家方向的路线的次数（由玩家和幽灵位置之间的简单偏移量计算）。

您可以为每个幽灵选择不同的 x，从而为每个幽灵实现不同的“个性”。

如果你仍然想在吃豆人 AI 中使用 A*，我的建议是只表示连接点（每个节点都是一个连接点的图形），而不是所有的方格世界。走廊里的广场基本上是没用的。;)

# sql-server - 全文搜索不匹配阿拉伯语 Kaaf 字母在阿拉伯语模式下

> ID：12243423
> 
> 赞同：3
> 
> 时间：2012-09-03T07:11:47.050
> 
> 标签：sql-server, sql-server-2008, arabic, full-text-search

当我使用阿拉伯语全文并在表格中搜索时，任何包含阿拉伯语 Kaaf 字母 (ك) 的记录都不会出现在结果中。

当我在中性模式下使用全文时，我可以搜索它们！

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T09:09:38.133

阿拉伯语 Kaaf 有两种不同的 Unicode 字符，根据操作系统版本和用户工作站上安装的键盘，这两种字符都可能存在于您的数据库中。

U+0643 ك U+06A9 带

我为解决类似问题所做的是编写一个小实用程序来将所有 Kaafs 转换为相同的字符。然后，如果您确保您的搜索输入使用正确的字符，它应该可以工作。祝你好运 ：）

# javascript - javascript 表单字段提交：对象在 IE8 中不支持此属性或方法

> ID：12243428
> 
> 赞同：0
> 
> 时间：2012-09-03T07:11:57.687
> 
> 标签：javascript, internet-explorer-8

我在 IE8 中遇到以下错误

```
Object doesn't support this property or method 
```

我在下一行收到此错误

```
fieldName.form.action = 'some action url'; 
```

我已经提醒 fieldName 如下

```
alert(typeof(fieldName)); 
```

它提醒“对象”

有人对此有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T10:22:17.660

通过替换以下行解决了问题

```
fieldName.form.action = 'some action url'; 
```

到

```
fieldName.form.setAttribute('action','some url'); 
```

从[这里得到答案](https://stackoverflow.com/questions/10825806/unable-to-set-form-action-via-javascript-errorobject-doesnt-support-this-prop?rq=1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T07:24:49.017

试试这个代码

```
document.form_name.action='some url'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T07:33:17.540

```
document.getElementById('IdOfForm').action='some action URL'; 
```

# apache - 重写重定向规则？

> ID：12243432
> 
> 赞同：-3
> 
> 时间：2012-09-03T07:12:21.493
> 
> 标签：apache, redirect, rewrite

如何编写 Apache 重写规则？
我想将[http://abc.com/test/filename.air](http://abc.com/test/filename.air)重定向到[http://abc.com/test/filename.exe](http://abc.com/test/filename.exe)。

我试过了

```
ProxyPass /test/filename.air http://abc.com/test/filename.exe 
```

和

```
RewriteRule ^(.*)/filename.air $1/filename.exe 
```

没有为我工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T09:28:00.520

这对我有用

> RedirectMatch (.*)/filename.air$ $1/filename.exe

# javascript - 在服务器端实现 webrtc

> ID：12243438
> 
> 赞同：8
> 
> 时间：2012-09-03T07:12:51.087
> 
> 标签：javascript, html5-video, webrtc

是否可以在服务器端实现 webRTC？即，我希望我的浏览器使用 webRTC 协议连接到 http 服务器（运行基于 java 的应用程序以流式传输视频的 tomcat）并从服务器获取流？

我认为编译 webRTC api 并通过 JNI 访问它会有所帮助。还有其他简单的方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T12:50:51.427

现在在 Asterisk 中有一个 WebRTC 的服务器端实现，应该可以实现：[https ://wiki.asterisk.org/wiki/display/AST/Asterisk+WebRTC+Support](https://wiki.asterisk.org/wiki/display/AST/Asterisk+WebRTC+Support)

我还没有深入研究它，所以我不能确定它是否符合您的要求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-23T15:18:36.680

看看[Lynckia 的 Licode 项目](http://lynckia.com/licode/index.html)。然而，它是 Node.js 服务器端。

# events - 如何捕获 dijit.form.NumberSpinner 的递增和递减事件？

> ID：12243443
> 
> 赞同：4
> 
> 时间：2012-09-03T07:13:10.663
> 
> 标签：events, dojo, dijit.form

当用户在此小部件中按下向上或向下箭头时，是否有任何方法可以捕获 dijit.form.NumberSpinner 的递增和递减事件？我知道“_arrowPressed”事件，但由于某些原因我不想使用它。我正在使用 onChange 事件，但直到你失去对这个小部件的关注才会被触发。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-03T08:23:51.813

准备`intermediateChanges:true`好进行`onChange`每一次更改（不失去焦点）：

```
<div
    id="spinner1"       
    data-dojo-type="dijit/form/NumberSpinner"   
    data-dojo-props="
        name: 'spinner1',
        smallDelta: 1,
        largeDelta: 10,
        constrains: {min: 0, max: 100, places: 0},
        value: 10,
        intermediateChanges: true
    "    
></div> 
```

在这个 jsFiddle 上查看它是如何工作的：http: [//jsfiddle.net/phusick/HCx3w/](http://jsfiddle.net/phusick/HCx3w/)

# iphone - 将 RootviewController 更改为导航控制器

> ID：12243448
> 
> 赞同：6
> 
> 时间：2012-09-03T07:13:23.550
> 
> 标签：iphone, ios, ipad, uinavigationcontroller, rootview

我是 iPhone 新手，

我想将我的课程更改`Rootviewcontroller`为我的新课程并使其成为导航控制器。

这是我的代码片段，

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {    

    UINavigationController *navigationController=[[UINavigationController alloc] initWithRootViewController:detailViewController];
    [self.window addSubview:navigationController.view];

    [self.window makeKeyAndVisible];

    return YES;
} 
```

我`SIGABRT`说`'adding a root view controller <NewClass: 0x6a8dd50> as a child of view controller:`

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-03T07:18:05.703

每当你想设置：

```
DetailViewController *detailViewController = [[DetailViewController alloc] initWithNibName:@"DetailViewController" bundle:nil];
UINavigationController *navigationController=[[UINavigationController alloc] initWithRootViewController:detailViewController];
self.window.rootViewController =nil;
self.window.rootViewController = navigationController;
[self.window makeKeyAndVisible]; 
```

**编辑**：直接用于`AppDelegate` `instance`设置`rootViewController`，`UIWindow`如上所示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T07:15:45.707

代替：

```
[self.window addSubview:navigationController.view]; 
```

制作：`navigationController`_ `rootViewController`_`window`

```
 self.window.rootViewController = navigationController; 
```

另外，是`detailViewController`类型`UINavigationController`吗？您不能将其设置`UINavigationController`为另一个`UINavigationController`对象的根。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T07:57:50.083

只需添加这一行，

`RootViewController *defaultViewController=[[RootViewController alloc]initWithNibName:@"NAME_OF_XIB" bundle:nil];`

在 UINavigationController 的初始化之前，

```
RootViewController *defaultViewController=[[RootViewController alloc]initWithNibName:@"NAME_OF_XIB" bundle:nil];
UINavigationController *navigationController=[[UINavigationController alloc] initWithRootViewController:detailViewController];
[self.window addSubview:navigationController.view];

[self.window makeKeyAndVisible];
return YES; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-03T11:53:38.083

将您的 RootViewController 更改为 NavigationController..

```
UINavigationController *navigationController=[[UINavigationController alloc] initWithRootViewController:self.detailViewController]; 
```

# python - wxPython 添加标志

> ID：12243454
> 
> 赞同：0
> 
> 时间：2012-09-03T07:13:53.637
> 
> 标签：python, wxpython

我在玩 wx.Frame.SetWindowStyleFlag() 并注意到要添加一个新标志，我可以使用“+”或“|”，两者结果相同。我的问题是，是否存在产生不同结果的情况？两者之间有任何性能差异吗？我注意到像 wxPython Application development cookbook 这样的书使用'|' 而不是“+”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T15:09:59.873

我建议始终使用“|”。我唯一一次看到使用的其他位运算符是在 wxPython 演示中的 AGW 库演示中。我怀疑速度有差异。“|” 是我看到的唯一一个经常使用的，因为 Robin Dunn（wxPython 的创建者）一直在使用它，我认为我们也应该使用它。

# java - 在 dao 中将 hibernate 与 spring 集成而没有 spring 依赖

> ID：12243459
> 
> 赞同：1
> 
> 时间：2012-09-03T07:14:36.780
> 
> 标签：java, spring, hibernate

当我们将hibernate与spring集成时，我们通常实现@Repository spring注解使用的基于注解的方法。我了解到这样做的目的是为了消除我们 dao 中的 spring 依赖，并且由于 hibernate3 支持上下文会话来管理会话

```
@Repository
public class HibernateSpitterDao implements SpitterDao{

privateSessionFactorysessionFactory;

@Autowired
public HibernateSpitterDao(SessionFactory sessionFactory){
  this.sessionFactory=sessionFactory;
}

private SessioncurrentSession(){
  return sessionFactory.getCurrentSession();
}
...
} 
```

例如，如果我们不使用基于注解的方法，我们的 dao 将直接依赖于 spring 特定的类，比如需要扩展 HibernateDaoSupport。

但是即使有了注释，DAO 仍然依赖于 Spring 知道吗？因为@Repository 是spring注解。我们不能完全独立于春天知道吗？它更像是依赖弹簧注释而不是依赖弹簧类，是吗？

我只是想一段时间后我们需要用其他东西来切换弹簧。在那种情况下，如果我们的 DAO 与 spring 的依赖关系为零，我们根本不需要接触我们的 DAO。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T08:47:14.160

要实现完全解耦，您将不得不摆脱注释，就像您已经发现的那样。要么，您必须使用 spring 基于 XML 的配置，或者您创建一个[@Configuration](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/beans.html#beans-java)类（也称为基于 java 的配置）来构建您的 bean 工厂。

我只是想对你的想法发表评论。花时间在一个完全解耦的解决方案上，理由是“也许在未来的某个时候我们会想要切换”对我来说听起来像是浪费了很多时间。您是否有任何理由怀疑或假设这种转换将在可预见的将来完成，或者永远？你的去耦是有代价的，这很清楚。您必须维护 XML 文件和/或配置类，而不是易于查看的注释，这两者往往会变得相当复杂，并且在一段时间后难以概述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T09:24:25.283

我会说您提供的示例*并不*紧密依赖于 Spring。您使用的唯一 Spring 组件是 @Repository 注释，它 1) 充当 @Component 并让您对类进行组件扫描，以及 2) 使您的类有资格进行数据访问转换 ( [Source](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/stereotype/Repository.html) )。

这根本不会将您的实现与 Spring 耦合。相反，您使用的是 Hibernate 的会话工厂，并且您与它耦合。没关系，您的实现与 Hibernate 相结合。

事实上，这就是定义接口并拥有不同实现的全部目的。在这种情况下，您有一个 SpitterDAO 接口和一个 HibernateSpitterDAO 实现。如果您将来决定使用 iBatis 或 Spring 的 HibernateTemplate 或 JDBCTemplate，您可以编写不同的实现。

春天大部分时间都试图避开你。它主要用作管理依赖注入的容器，实际上只是协调您的代码如何“粘合在一起”。我认为当你的类实现了 ApplicationSessionAware 和 BeanPostProcessor 之类的东西时，代码会与 Spring 紧密耦合，我会尽量避免这种情况。

只是因为我不确定你是否知道 SessionFactory 和 Spring 的 HibernateTemplate 之间的优缺点，这里有一篇来自 SpringSource 比较和对比它们的精彩博客文章：http: [//blog.springsource.org/2007/06/26/所以你应该仍然使用springs-hibernatetemplate-andor-jpatemplate/](http://blog.springsource.org/2007/06/26/so-should-you-still-use-springs-hibernatetemplate-andor-jpatemplate/)

以下是博客文章中的最终建议片段：

> 所以简而言之（正如 HibernateTemplate 和 JpaTemplate 的 JavaDoc 已经提到的），如果您开始在新项目中分别使用 Hibernate 或 JPA，我建议您直接开始使用 Session 和/或 EntityManager API——请记住：Spring 尝试是非侵入性的，这是另一个很好的例子！

# facebook - 如何作为页面本身发布到 Facebook 页面

> ID：12243460
> 
> 赞同：0
> 
> 时间：2012-09-03T07:14:35.983
> 
> 标签：facebook, curl, facebook-php-sdk

我正在开发一个博客模块。当管理员添加新博客帖子时，将在页面的 facebook 墙上发布新帖子（我们称之为`Mypage`）。它的代码是：

```
$_accessKey = FB_ACCESS_KEY;
$_feedId = FB_FEED_ID;

$attachment =  array(
                    'access_token'  => $_accessKey,
                    'message'       =>  $postData['message'],
                    'name'          => $postData['name'],
                    'description'   => $postData['caption']
            );

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL,'https://graph.facebook.com/'.$_feedId.'/feed');
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, $attachment);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
$result = curl_exec($ch);
curl_close ($ch); 
```

在上面的代码中：

`FB_ACCESS_KEY`是来自用户的应用程序的访问令牌`Test`
`FB_FEED_ID`是页面的提要 id。

现在发布到 的`Mypage`工作正常，但帖子以`Added by Test`.
我怎样才能使帖子就好像它是自己制作的一样`Mypage`？
`Test`是页面的管理员`Mypage`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T11:58:23.490

作为页面进行身份验证应该可以为您解决问题：[https ://developers.facebook.com/docs/authentication/pages/](https://developers.facebook.com/docs/authentication/pages/)

# wordpress - Wordpress：用多个值填充自定义字段（可能是数组）

> ID：12243461
> 
> 赞同：0
> 
> 时间：2012-09-03T07:14:49.557
> 
> 标签：wordpress, custom-fields

我需要一个自定义字段，我可以在其中填充多个值，例如

自定义字段值

图片 = img1.jpg、img2.jpg、img3.jpg

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T08:34:23.170

你能更准确地说明你想做什么吗？您是否正在处理主题文件中的帖子元数据？

如果是这样，您实际上可以将数组传递给`update_post_meta`它，它会自动序列化它。

# android - 简单的安卓加减应用

> ID：12243462
> 
> 赞同：2
> 
> 时间：2012-09-03T07:14:54.487
> 
> 标签：android, android-emulator

我正在制作一个应用程序，当我们单击添加按钮时，它会将数字加 1，当我们单击减法时，它会减去数字。

我做的一切都是正确的，但不知道为什么它在模拟器中处理时会出错。

下面是我的源代码：

**XML 代码**

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/total"
    android:id="@+id/tvDisplay"
    android:textSize="20dp"
    android:layout_gravity="center"
    android:layout_marginTop="30dp"
    android:layout_marginBottom="30dp"
    />
    <Button
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/add"
    android:layout_gravity="center"
    android:textSize="20dp"
    android:id="@+id/bAdd"
    android:layout_marginTop="25dp"
    android:layout_marginBottom="2dp"
    />
    <Button
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/sub"
    android:layout_gravity="center"
    android:textSize="20dp"
    android:id="@+id/bSub"
    android:layout_marginTop="25dp"
    android:layout_marginBottom="25dp"
    />

    </LinearLayout> 
```

**Java 代码**

```
 package com.example.plus.minus;

  import android.os.Bundle;
  import android.app.Activity;
  import android.view.View;
  import android.widget.Button;
  import android.widget.TextView;

  public class PlusMinus extends Activity {

int counter;
Button add , sub;
TextView display; 

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    counter = 0;
    add = (Button) findViewById(R.id.bAdd);
    sub = (Button) findViewById(R.id.bSub);
    display = (Button) findViewById(R.id.tvDisplay);

    add.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            // Adds 1 to the counter
            counter = counter + 1;
            display.setText(" Your total is :" + counter);
        }
    });

    sub.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            // Subtract 1 from counter
            counter = counter - 1;
            display.setText(" Your total is :" + counter);
        }
    });
}
} 
```

另外请让我知道如何自己找到运行时错误。以及如何自己调试错误。提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T07:17:28.177

因为你投错了观点。

改变

```
display = (Button) findViewById(R.id.tvDisplay); 
```

至

```
display = (TextView) findViewById(R.id.tvDisplay); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T07:18:33.610

```
 display = (TextView) findViewById(R.id.tvDisplay); 
```

不是`Button`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T22:36:47.730

它应该是 TextView 而不是 Button

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T07:18:46.280

## [ClassCastException](http://developer.android.com/reference/java/lang/ClassCastException.html)

这是因为您将您的身份识别`TextView`为`Button`所以，只需尝试将您的身份识别`TextView`为如下

```
display = (TextView) findViewById(R.id.tvDisplay); 
```

代替

```
display = (Button) findViewById(R.id.tvDisplay); 
```

# android - Android对话框标题自定义XML布局高度

> ID：12243470
> 
> 赞同：2
> 
> 时间：2012-09-03T07:15:28.573
> 
> 标签：android, android-layout

我将此代码用于自定义对话框标题 XML 布局

```
 public class UtilityDialog extends Dialog
 {
  onCreate(Bundle savedInstanceState)
  {
....
....
....
  getWindow().requestFeature(Window.FEATURE_CUSTOM_TITLE);
  getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.dialog_title);
  setContentView(content);
  }
 } 
```

它可以工作，但标题的高度太小并且它不包含 R.layout.dialog_title 的任何 UI 元素

![在此处输入图像描述](../Images/a24cd3dcdbdaaf4b003a31ff93566fe9.png)

R.layout.dialog_title-->

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="65dip"
    android:padding="2dip"
    android:background="@android:color/transparent">

    <ImageView
        android:id="@+id/logoImage"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_centerVertical="true"
        android:src="@drawable/logo" />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true"
        android:text="Cellalert" />

</RelativeLayout> 
```

# r - R中的遗传数据模拟

> ID：12243471
> 
> 赞同：0
> 
> 时间：2012-09-03T07:15:29.603
> 
> 标签：r, simulation, genetics

我正在寻找可用于模拟特定 SNP 和定量表型之间的遗传关联的最佳方法或最佳软件包，模拟数据与我的真实数据最相似，除了我知道因果变异。我在 R 中看到的所有软件包似乎都专门用于谱系数据或指定了合并和其他进化因素的种群数据，但我没有任何种群遗传学经验，我只想模拟欧洲的简单案例与我的真实数据具有相似特征的人群（即性状的正态分布和基因型的加性效应，相似的等位基因频率……）例如，如果我的遗传数据是 X，我的定量变量是 Y：

```
X <-rbinom(1000,2,0.4)
Y <- rnorm(1000,1,0.4) 
```

我在 R 中寻找类似于 Plink 中的函数的东西，其中需要指定等位基因频率的范围、表型的范围，并指定应该与基因型相关的特定变体（这很重要，因为我需要在不同的数据集中重复这些关联，因果变量相同）

有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T07:20:36.883

如果基因型只改变表型的平均值，这很简单。

```
phenotype.means <- c(5, 15, 20)  # phenotype means for genotypes 0, 1, and 2
phenotype.sd <- 5
X <- rbinom(1000,2,0.4)
Y <- rnorm(1000, phenotype.means[X], phenotype.sd) 
```

这将导致`Y`包含 1000 个正态分布变量，其中具有纯合隐性基因型 (`aa`或 0) 的变量的平均值为 5，具有杂合基因型 (`Aa`或 1) 的变量平均值为 15，而具有纯合显性基因型的变量平均值为(`AA`或 2) 的平均值为 20。

如果您想要更传统的 2 设置表型（`AA/Aa`与`aa`），只需设置`phenotype.means`为`c(5, 20, 20)`.

# java - 选择和取消选择参数作为 JSON 的输出，具体取决于 java 中的传入请求

> ID：12243473
> 
> 赞同：1
> 
> 时间：2012-09-03T07:15:43.330
> 
> 标签：java

例如，我有一个带有 URL 的传入请求：“/cid/{cid}/{action}”

对于路径变量 {action}，我可以有两个值，即 {action}：**1）列表 2）平铺**

我的带有 JSON 输出参数的 POJO 类如下：

```
public class Area {

    private Integer aId;
    private String aName;
    private Integer allSpaces;
    private Integer violated;
    private Integer percent;
    private Integer level;
    private List<Space> space = new ArrayList<Space>(); // this List should be depend on condition

    public Area(Integer aId, String aName, Integer allSpaces, Integer violated, Integer percent, Integer level) {
        this.aId = aId;
        this.aName = aName;
        this.allSpaces = allSpaces;
        this.level = level;
        this.violated = violated;
        this.percent = percent;
    }

    public Integer getaId() {
        return aId;
    }

    public void setaId(Integer aId) {
        this.aId = aId;
    }

    public String getaName() {
        return aName;
    }

    public void setaName(String aName) {
        this.aName = aName;
    }

    public Area addSpace(Space s) {
        space.add(s);

        return this;
    }

    public List<Space> getSpace() {
        return space;
    }

    public void setSpace(List<Space> space) {
        this.space = space;
    }

    public Integer getAllSpaces() {
        return allSpaces;
    }

    public void setAllSpaces(Integer allSpaces) {
        this.allSpaces = allSpaces;
    }

    public Integer getViolated() {
        return violated;
    }

    public void setViolated(Integer violated) {
        this.violated = violated;
    }

    public Integer getPercent() {
        return percent;
    }

    public void setPercent(Integer percent) {
        this.percent = percent;
    }

    public Integer getLevel() {
        return level;
    }

    public void setLevel(Integer level) {
        this.level = level;
    }
} 
```

我的输出不应该包含*action =list*`private List space = new ArrayList()`的参数，而是显示*action=tile*的参数。

 **如果有任何机构可以帮助我，这将有很大帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T07:25:47.397

如果该类被序列化，并且您想`space`从序列化中排除为 JSON，则可以将其标记为`transient`.

```
private transient List<Space> space = new ArrayList<Space>(); 
```

如果您想决定是否发生这种情况，您可以子类化`Area` 所以您的控制器将调用`ListArea`或`TileArea`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T10:18:02.360

我得到了我的问题的答案

我初始化`private List<Space> space = null;`而不是`private List<Space> space = new ArrayList<Space>();`

并在我的 pojo 顶部添加了**@JsonSerialize(include=JsonSerialize.Inclusion.NON_NULL) ，如下所示**

**@JsonSerialize(include=JsonSerialize.Inclusion.NON_NULL) 公共类区域 {**

现在`value==null`将不包含在序列化输出中的参数，但我可以通过使用构造函数动态初始化它，并在需要时检索输出。**

# android - 如何在android中自定义列表视图的子文本视图上进行点击事件

> ID：12243476
> 
> 赞同：0
> 
> 时间：2012-09-03T07:15:54.033
> 
> 标签：android, android-layout, android-widget, android-listview, textview

基本上我是Android新手，对它了解不多。我正在制作一个测验程序，其中我使用 custom`ListView`和 5 个 custom `TextViews`，一个用于问题，另外 4 个用于选项。我的问题是我希望`TextView`可点击`LisView`模式和选择模式一样单一。也就是说，如果我单击一个文本，所有其他`TextView`s 应该变得不可点击。我的问题是每当我单击`TextView`子布局中的 a 时，只有外部布局，即被`ListView`选中的项目。这是我的列表视图的屏幕截图

[https://picasaweb.google.com/108429569548433380582/Android?authkey=Gv1sRgCJ3kxJz7tLvaTg#5783846428648608706](https://picasaweb.google.com/108429569548433380582/Android?authkey=Gv1sRgCJ3kxJz7tLvaTg#5783846428648608706)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T07:23:44.950

你可以通过两种方式做到这一点：

**1.**像这样直接使用 onClickListener ：

```
textView.setOnClickListener(new View.OnClickListener(
        public void onClick(View arg0) {

            // Do anything here.

        }
    }); 
```

或者

**2.**在`XML`文件中，在声明中`<TextView />`再添加一个属性：

```
android:onClick="onClickTextView" 
```

并在您的活动中，添加此功能：

```
public void onClickTextView(View view) {

         // Do anything here.
} 
```

**更新：**

使用以下代码获取 TextView 上的点击事件：

```
// Click event for single list row
        getListView().setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                    long arg3) {
                TextView tv = (TextView) (findViewById(R.id.title));
                if (tv != null) {
                    tv.setOnClickListener(new View.OnClickListener() {

                        @Override
                        public void onClick(View v) {
                            Toast.makeText(MainActivity.this, "CLICKED",
                                    Toast.LENGTH_LONG).show();
                        }
                    });
                } else {
                    Toast.makeText(MainActivity.this, "TV not found",
                            Toast.LENGTH_LONG).show();
                }
            }
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T07:36:09.790

假设您扩展 BaseAdapter 以设置列表视图内容 ->

打开当前持有者位置的TextView监听器和settag，在onclick方法中执行你的操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T07:46:50.757

试试这个 ：

当您选择一个文本视图时，其他三个将不可点击

```
 final TextView texta = (TextView) findViewById(R.id.text_a);
    final TextView textb = (TextView) findViewById(R.id.text_b);
    final TextView textc = (TextView) findViewById(R.id.text_c);
    final TextView textd = (TextView) findViewById(R.id.text_d);
    texta.setOnClickListener(new OnClickListener()
    {
        public void onClick(View v) {

            textb.setClickable(false);
            textc.setClickable(false);
            textd.setClickable(false);
        }

    });
    textb.setOnClickListener(new OnClickListener()
    {
        public void onClick(View v) {

            texta.setClickable(false);
            textc.setClickable(false);
            textd.setClickable(false);
        }

    });
    textc.setOnClickListener(new OnClickListener()
    {
        public void onClick(View v) {

            texta.setClickable(false);
            textb.setClickable(false);
            textd.setClickable(false);
        }

    });
    textd.setOnClickListener(new OnClickListener()
    {
        public void onClick(View v) {

            texta.setClickable(false);
            textb.setClickable(false);
            textc.setClickable(false);
        }

    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T07:48:16.360

这是 ListView 的默认行为。只有一个可以点击：列表行或行内的项目。

> 例如：如果行项目是 textView（如您的情况），则列表行将是可点击的，但如果行项目是按钮，则列表行将不可点击。如果您将 TextView 设置为可点击，情况也是如此。

根据您的要求，更好的方法是使用 RadioGroup（而不是多个文本视图并禁用和启用它们）。您应该为列表项使用自定义布局，其中 TextView 用于问题，RadioGroup 用于选项。

布局可能是这样的：
![在此处输入图像描述](../Images/775830799ffb234514314f58185df8a6.png)

请按照以下链接进行参考：对于[RadioGroup的](http://www.mkyong.com/android/android-radio-buttons-example/)[listView](http://www.mkyong.com/android/android-listview-example/)

我希望这个能帮上忙

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-07T12:35:16.227

感谢 Shrikant 和 adam 的帮助 抱歉，我很抱歉回复得太晚了。

或者像 Shrikant 那样在适配器类中使用它：

```
textViewa.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            // Do anything here.
        }
    });

    textViewb.setOnClickListener(new View.OnClickListener() {
        public void onClick(View arg0) {
            // Do anything here.
        }
    });

    //and so on...

    // or better to use ViewHolder holder; for these type of listviews;

    View.OnClickListener clickListener = new View.OnClickListener() {
        @Override
        public void onClick(View view) {

            // Do what you want to do.

            // for my i have to call a method in my parent activity. so in    constructor of adapter, I passed the activity and then typecasted it like

            ParentActivity parent = (ParentActivity) activity;
            parent.chosenAnswer(view.getId());

            // then in chosenAnswer(int id) in parentActivity use a switch case for the same logic as in Adam's answer.

            // OR 
            //you can write like this too..

            switch (view.getId()) {
                case R.id.textViewa:
                    break;
                case R.id.textViewb:
                    break;
                case R.id.textViewc:
                    break;
                case R.id.textViewd:
                    break;
            }
        }
    }; 
```

# hibernate-envers - 如果我只想保留已删除的实体，我可以使用 Hibernate Envers 吗？

> ID：12243478
> 
> 赞同：1
> 
> 时间：2012-09-03T07:15:58.620
> 
> 标签：hibernate-envers

现在我们不删除实体，而是在表中设置一个标志为“非活动”（并将这些实体过滤掉以进行正常操作）。有人将我指向 Hibernate Envers，但对我来说它看起来有点矫枉过正。我的问题是：

*   我们可以使用 Envers 来执行我们的机制（活动/非活动标志）吗？
*   如果没有，Envers 是否可以将已删除实体的副本存储在存档表中，但不执行任何版本控制/审计工作？
*   这项任务是否有轻量级的替代方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T19:16:58.693

您可以在此处使用 Envers，通过扩展审计侦听器并忽略插入/更新事件，但我同意这是一种矫枉过正的做法。

简单地使用带有专用 DAO 方法的活动标志或编写简单的 Hibernate 事件侦听器应该更适合此任务。

# java - 使用反射一一运行@Test

> ID：12243480
> 
> 赞同：0
> 
> 时间：2012-09-03T07:16:01.647
> 
> 标签：java, unit-testing, junit

我正在尝试使用反射运行一个包含许多单元测试的包（一个接一个，而不是一个类），所以当我得到所有需要运行的 @Test 方法时，我尝试做

```
Result result = new JUnitCore().run(Request.method(Class
                                .forName(packageAndClass),getTestName())); 
```

但是在 packageAndClass 中返回的类有 @Before、@BeforeClass 方法（也可能在它的超类中）

因此，当运行上面的代码时，我让所有测试都运行并失败（因为它们的一些值是在 @Before 和 @BeforeClass 方法中分配的）但是当从 eclipse 运行它时（选择测试方法名称->右键单击->运行as -> Junit test）它们都通过了（一起运行或一个接一个运行）是否有一个请求的api可以运行之前的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T07:22:05.547

你为什么这样做？JUnit 应该为您运行测试！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T14:34:37.433

我用 junit 4.9 运行了以下测试：

```
public class RunOneTest {
    public static void main(final String[] args) {
        final Result result = new JUnitCore().run(Request.method(RunOneTest.class, "oneTest"));
        System.out.println("result " + result.wasSuccessful());
    }

    @Test
    public void oneTest() throws Exception {
        System.out.println("oneTest");
    }

    @Test
    public void anotherTest() throws Exception {
        System.out.println("anotherTest");
    }

    @Before
    public void before() {
        System.out.println("before");
    }

    @BeforeClass
    public static void beforeClass() {
        System.out.println("beforeClass");
    }

    @After
    public void after() {
        System.out.println("after");
    }

    @AfterClass
    public static void afterClass() {
        System.out.println("afterClass");
    }
} 
```

输出是：

```
beforeClass
before
oneTest
after
afterClass
result true 
```

你真的确定这些方法没有运行吗？

# c++ - 在 C++ 中枚举安装在 Windows 上的应用程序

> ID：12243481
> 
> 赞同：0
> 
> 时间：2012-09-03T07:16:16.647
> 
> 标签：c++, mfc, using

我想在 c 中列出所有已安装的应用程序。我们可以使用两种方式来做到这一点。1\. 使用卸载注册表和 2\. WMI 和 Win32_product 类。

但是使用注册表来枚举已安装的产品是否可靠？WMI 也只列出通过 MSI 安装程序安装的产品？还有另一种方法吗？如果不是，哪个是最好和推荐的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T07:25:09.250

您的直觉是正确的，迭代注册表是找出“已安装”哪些程序的最完整方法。显然，这不会找到未在 Windows 注册表中注册的独立二进制文件/应用程序。

查看[与添加/删除程序列表不同的 WMI“已安装”查询？](https://stackoverflow.com/questions/673233/wmi-installed-query-different-from-add-remove-programs-list)

[Rob Haupt 的答案](https://stackoverflow.com/a/673284/40175)链接到[一些](http://gallery.technet.microsoft.com/scriptcenter/b994f262-be39-448d-ab62-edbbeacf2b0f)用于检查注册表的代码

# c# - ASP .Net jQuery AJAX 登录安全吗？

> ID：12243482
> 
> 赞同：4
> 
> 时间：2012-09-03T07:16:47.543
> 
> 标签：c#, asp.net, jquery

我正在尝试在 ASP.NET 中创建一个登录表单，其中我有两个选项，第一个是传统的发回服务器，另一个是使用 jQuery ajax 验证用户凭据......现在这是我的问题：

你认为哪个更好？如果您使用 jQuery ajax 将数据传递给代码隐藏，会有一些安全问题吗？

先感谢您！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T07:18:59.957

只要与服务器的连接至少是加密的，用于发布信息的方法就没有重要区别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T07:38:52.430

严格验证用户名/密码，这与将登录表单提交到同一位置一样安全。安全问题将来自您在成功函数和未来的 ajax 请求中所做的（或未做的），因为 javascript 可以即时伪造/更改以篡改您设置的变量（特别是用户 ID）。

# c# - 版本化 asp.net WebApi 的正确方法

> ID：12243483
> 
> 赞同：1
> 
> 时间：2012-09-03T07:16:52.613
> 
> 标签：c#, web-services, asp.net-web-api

我即将使用我使用新 webapi 编写的 api 上线。

我想通过 api 的某种版本控制来保证未来的发展——这意味着如果客户端在发布后立即开始使用 api，我不希望他们不得不返回并使用我可能做出的任何更改来更新他们的代码。

我可以想到几种应用版本的方法。

1.  //myapi.com/foo?bar=1234&v1
2.  //myapi.com/v1/foo?bar=1234

大多数人在做什么？我想遵循最佳实践，但我也希望 api 易于管理。

欢迎提出建议:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T07:29:34.083

Web API 与编写 RESTful 服务的另一种方式完全不同。请到此线程了解更多详细信息[API 版本控制的最佳实践？](https://stackoverflow.com/questions/389169/best-practices-for-api-versioning)

# ios - ios 5 和 ios6 兼容性功能 -xcode

> ID：12243485
> 
> 赞同：0
> 
> 时间：2012-09-03T07:17:26.090
> 
> 标签：ios, xcode, release, beta, ios6-maps

我想创建一个基于地图的应用程序，但苹果将不再在 ios 6 中使用谷歌地图。我还不想升级到开发人员测试版，因为我正在等待最终版本。但我也想尽快开始。如果我现在开始我的项目，它会改变还是当 ios 6 可用时代码会有所不同？换句话说，如果我成功构建了 ios 5，当我升级到 ios6 时会不会成功？我是否必须重写整个东西，或者一切都将兼容，从而导致构建也成功？先感谢您..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T07:27:49.717

您的代码将正常工作。
iOS 6 和 MKMapKit 在代码方面几乎没有任何变化。
在 iOS 6 中唯一不同的是您从应用程序内部调用本机地图应用程序的方式。（如果您正在使用此功能）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T07:33:01.953

您无需等待使用 XCode 的 beta 版本，您可以将它们放在硬盘上的不同位置，并保留当前的 ​​XCode。

然后，您可以在 iOS 6 模拟器中进行测试，以确保它与 iOS 5 一样好用。

# sql - Oracle SQL 分析查询 - 类似电子表格的递归运行总计

> ID：12243488
> 
> 赞同：13
> 
> 时间：2012-09-03T07:17:35.403
> 
> 标签：sql, oracle, recursive-query, analytic-functions, cumulative-sum

我有以下数据，由`A`值组成，按`MM`（月）排序。

该`B`列`GREATEST(current value of A + previous value of B, 0)`以类似电子表格的方式计算。

如何`B`使用 SQL 查询进行计算？

*   我尝试使用分析函数，但无法成功。
*   我知道有[示范条款](http://docs.oracle.com/cd/B19306_01/server.102/b14223/sqlmodel.htm)；我找到[了一个类似的例子](http://www.orafaq.com/forum/mv/msg/180678/551890/156078/#msg_551890)，但我不知道从哪里开始。

我使用的是 Oracle 10g，因此不能使用递归查询。

* * *

这是我的测试数据：

```
MM         | A      | B
-----------+--------+------
2012-01-01 |    800 |  800
2012-02-01 |   1900 | 2700
2012-03-01 |   1750 | 4450
2012-04-01 | -20000 |    0
2012-05-01 |    900 |  900
2012-06-01 |   3900 | 4800
2012-07-01 |  -2600 | 2200
2012-08-01 |  -2600 |    0
2012-09-01 |   2100 | 2100
2012-10-01 |  -2400 |    0
2012-11-01 |   1100 | 1100
2012-12-01 |   1300 | 2400 
```

这是“表定义”：

```
select t.* from (
  select date'2012-01-01' as mm, 800 as a from dual union all
  select date'2012-02-01' as mm, 1900 as a from dual union all
  select date'2012-03-01' as mm, 1750 as a from dual union all
  select date'2012-04-01' as mm, -20000 as a from dual union all
  select date'2012-05-01' as mm, 900 as a from dual union all
  select date'2012-06-01' as mm, 3900 as a from dual union all
  select date'2012-07-01' as mm, -2600 as a from dual union all
  select date'2012-08-01' as mm, -2600 as a from dual union all
  select date'2012-09-01' as mm, 2100 as a from dual union all
  select date'2012-10-01' as mm, -2400 as a from dual union all
  select date'2012-11-01' as mm, 1100 as a from dual union all
  select date'2012-12-01' as mm, 1300 as a from dual
) t; 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-03T10:16:40.577

因此，让我们在这个问题上释放`MODEL`子句（一个只有它的力量才能超越神秘的装置）：

```
with data as (
  select date'2012-01-01' as mm,    800 as a from dual union all
  select date'2012-02-01' as mm,   1900 as a from dual union all
  select date'2012-03-01' as mm,   1750 as a from dual union all
  select date'2012-04-01' as mm, -20000 as a from dual union all
  select date'2012-05-01' as mm,    900 as a from dual union all
  select date'2012-06-01' as mm,   3900 as a from dual union all
  select date'2012-07-01' as mm,  -2600 as a from dual union all
  select date'2012-08-01' as mm,  -2600 as a from dual union all
  select date'2012-09-01' as mm,   2100 as a from dual union all
  select date'2012-10-01' as mm,  -2400 as a from dual union all
  select date'2012-11-01' as mm,   1100 as a from dual union all
  select date'2012-12-01' as mm,   1300 as a from dual
)
select mm, a, b
from (
  -- Add a dummy value for b, making it available to the MODEL clause
  select mm, a, 0 b
  from data
)
      -- Generate a ROW_NUMBER() dimension, in order to access rows by RN
model dimension by (row_number() over (order by mm) rn)
      -- Spreadsheet values / measures involved in calculations are mm, a, b
      measures (mm, a, b)
      -- A single rule will do. Any value of B should be calculated according to
      -- GREATEST([previous value of B] + [current value of A], 0)
      rules (
        b[any] = greatest(nvl(b[cv(rn) - 1], 0) + a[cv(rn)], 0)
      ) 
```

以上产生：

```
MM              A     B
01.01.2012    800   800
01.02.2012   1900  2700
01.03.2012   1750  4450
01.04.2012 -20000     0
01.05.2012    900   900
01.06.2012   3900  4800
01.07.2012  -2600  2200
01.08.2012  -2600     0
01.09.2012   2100  2100
01.10.2012  -2400     0
01.11.2012   1100  1100
01.12.2012   1300  2400 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-03T08:03:57.860

我想出了一个用户定义的聚合函数

```
create or replace type tsum1 as object
  (
  total number,

  static function ODCIAggregateInitialize(nctx IN OUT tsum1 )
       return number,

  member function ODCIAggregateIterate(self IN OUT tsum1 ,
                                       value IN number )
       return number,

  member function ODCIAggregateTerminate(self IN tsum1,
                              retVal OUT  number,
                              flags IN number)
       return number,

  member function ODCIAggregateMerge(self IN OUT tsum1,
                          ctx2 IN tsum1)
       return number
)
/

create or replace type body tsum1
 is

 static function ODCIAggregateInitialize(nctx IN OUT tsum1)
 return number
 is
 begin
   nctx := tsum1(0);
   return ODCIConst.Success;
 end;

 member function ODCIAggregateIterate(self IN OUT tsum1,
                                    value IN number )
 return number
 is
 begin
   self.total := self.total + value;
     if (self.total < 0) then
       self.total := 0;
     end if;
   return ODCIConst.Success;
 end;

 member function ODCIAggregateTerminate(self IN tsum1,
                                        retVal OUT number,
                                        flags IN number)
 return number
 is
 begin
   retVal := self.total;
   return ODCIConst.Success;
 end;

 member function ODCIAggregateMerge(self IN OUT tsum1,
                                    ctx2 IN tsum1)
 return number
 is
 begin
   self.total := self.total + ctx2.total;
   return ODCIConst.Success;
 end;
 end;
 /

CREATE OR REPLACE FUNCTION sum1(input number)
RETURN number
PARALLEL_ENABLE AGGREGATE USING tsum1;
/ 
```

这是查询

```
with T1 as(
   select date'2012-01-01' as mm, 800 as a from dual union all
   select date'2012-02-01' as mm, 1900 as a from dual union all
   select date'2012-03-01' as mm, 1750 as a from dual union all
   select date'2012-04-01' as mm, -20000 as a from dual union all
   select date'2012-05-01' as mm, 900 as a from dual union all
   select date'2012-06-01' as mm, 3900 as a from dual union all
   select date'2012-07-01' as mm, -2600 as a from dual union all
   select date'2012-08-01' as mm, -2600 as a from dual union all
   select date'2012-09-01' as mm, 2100 as a from dual union all
   select date'2012-10-01' as mm, -2400 as a from dual union all
   select date'2012-11-01' as mm, 1100 as a from dual union all
   select date'2012-12-01' as mm, 1300 as a from dual
 )

 select mm
      , a
      , sum1(a) over(order by mm) as b
  from t1

    Mm         a      b
 ----------------------------  
 01.01.2012    800    800  
 01.02.2012    1900   2700  
 01.03.2012    1750   4450  
 01.04.2012   -20000  0  
 01.05.2012    900    900  
 01.06.2012    3900   4800  
 01.07.2012   -2600   2200  
 01.08.2012   -2600   0  
 01.09.2012    2100   2100  
 01.10.2012   -2400   0  
 01.11.2012    1100   1100  
 01.12.2012    1300   2400 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-03T07:41:42.220

```
with sample_data as (
  select date'2012-01-01' as mm, 800 as a from dual union all
  select date'2012-02-01' as mm, 1900 as a from dual union all
  select date'2012-03-01' as mm, 1750 as a from dual union all
  select date'2012-04-01' as mm, -20000 as a from dual union all
  select date'2012-05-01' as mm, 900 as a from dual union all
  select date'2012-06-01' as mm, 3900 as a from dual union all
  select date'2012-07-01' as mm, -2600 as a from dual union all
  select date'2012-08-01' as mm, -2600 as a from dual union all
  select date'2012-09-01' as mm, 2100 as a from dual union all
  select date'2012-10-01' as mm, -2400 as a from dual union all
  select date'2012-11-01' as mm, 1100 as a from dual union all
  select date'2012-12-01' as mm, 1300 as a from dual
) 
select mm, 
       a, 
       greatest(nvl(a,0) + lag(a,1,0) over (order by mm), 0) as b
from sample_data; 
```

但是它**不会**产生这一行：

```
2012-05-01 | 900 | 900

```

因为它在该行中计算 900 - 20000，并且零大于结果。如果您使用该`abs`函数消除计算中的负值，则可以“修复”该问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-10-03T14:14:42.667

很抱歉，如果这是题外话，鉴于问题的 Oracle 版本，但我们现在可以使用 SQL:2016 MATCH_RECOGNIZE 子句：

```
select * from t
match_recognize(
  order by mm
  measures case classifier() when 'POS' then sum(a) else 0 end as b
  all rows per match
  pattern (pos* neg{0,1})
  define pos as sum(a) > 0
); 
```

# objective-c - 我怎样才能拥有一个完全透明的 UIAlertView？

> ID：12243489
> 
> 赞同：0
> 
> 时间：2012-09-03T07:17:34.930
> 
> 标签：objective-c, uialertview, transparent

我需要一个 UIALertView，它在弹出时应该足够透明，以便以褪色的方式显示 alertview 后面的背景，并且不应该出现警报视图的蓝色，因为警报视图后面的背景是黑色和灰色的。更改颜色并将图像放入警报视图是可以在链接中看到的一件事：[iOS 5 黑色透明 UIAlertView](https://stackoverflow.com/questions/7984732/ios-5-black-transparent-uialertview)和[更改 UIAlertView 的背景颜色？](https://stackoverflow.com/questions/883208/changing-the-background-color-of-a-uialertview)
但我需要一个透明的 UIAlertView。有可能得到一个吗？如果是，怎么办？我在这里先向您的帮助表示感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T07:43:35.123

如果您查看[Apple 的 UIAlertView 文档页面，](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIAlertView_Class/UIAlertView/UIAlertView.html)您会看到以下说明：

> UIAlertView 类旨在按原样使用，不支持子类化。**此类的视图层次结构是私有的，不得修改。**

换句话说，Apple 不希望开发人员在涉及 UIAlertView 时乱用颜色、字体或*背景。*如果 Apple 在更高版本的 iOS 中更改了 UIAlertView 的内部内容，那么当该修改后的警报出现时，您的应用程序可能会产生意外和不想要的效果。

如果你想要自定义 UIAlertView 的行为，为什么不**编写你自己的 UIView**，它的外观和行为很像 UIAlertView。然后你可以完全控制它的绘制方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-31T06:07:48.857

我知道为时已晚，但我会将此命令留给其他开发人员。

。H

```
@interface CustomAlertView:UIAlertView {} 
```

.m

```
// override
- (void)drawRect:(CGRect)rect
{
    for(UIView * sub in self.subviews)
    {
        [sub removeFromSuperview];
    }
    // this removeFromSuperview will clear all thing such as background view and buttons

    // do something
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T07:52:27.197

正如迈克尔所说，你不能使用 UIAlertView，你必须自己构建它。

你可以试试 BlockAlertsAnd-ActionSheets，它就像一个可定制的 UIAlerView [https://github.com/gpambrozio/BlockAlertsAnd-ActionSheets](https://github.com/gpambrozio/BlockAlertsAnd-ActionSheets)

# sql-server-2008 - 如何更改列的类型？

> ID：12243490
> 
> 赞同：1
> 
> 时间：2012-09-03T07:17:43.053
> 
> 标签：sql-server-2008, sqldatatypes

我在 SQL SERVER 中有一个包含几列的表。此列之一的类型为：`VARCHAR(1000)`。但我想将其更改为`VARCHAR(MAX)`. 如何通过执行查询来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T07:19:37.473

你可以使用类似的东西：

```
ALTER TABLE [table] ALTER COLUMN [column] VARCHAR(MAX) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T07:19:36.453

试试这个：

您只需要在 sql server 中执行[ALTER TABLE](http://www.w3schools.com/sql/sql_alter.asp)语句

```
alter table <table> alter column col_name varchar(max) 
```

或者，您可以提供 NULL/NOT NULL、DEFAULT 等以及 alter 语句本身

[有关更多示例，请参见此链接](http://www.w3schools.com/sql/sql_alter.asp)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T07:20:54.033

做这样的事情

```
ALTER TABLE [table] ALTER COLUMN [column] VARCHAR(MAX) 
```

但我更喜欢在列中使用固定大小而不是 MAX，因为它需要更多内存，因此会以某种方式降低速度。

# qt - 如何在 Qt 中绘制 QLabel

> ID：12243501
> 
> 赞同：1
> 
> 时间：2012-09-03T07:18:38.887
> 
> 标签：qt

我必须在 Qt 中创建一个屏幕，在其中我必须显示一个遥控器，其中有很多按钮，当用户单击实际遥控器上的某个按钮时，图像中的相应按钮会突出显示。所以我所做的是，我已经使用`QLabel`并将远程图像设置为背景图像，然后我为每个按钮放置了小矩形标签并用半透明颜色填充它们，当用户单击实际远程标签颜色中的按钮时，但是通过使用这种方法，很多标签都在使用，使代码看起来效率低下，所以我正在考虑`QLabel`在按钮上绘制（它有一个遥控器作为背景图像）。

任何人都可以建议我，我应该使用 Qt 的哪个 API，以及如何跟进？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T16:55:52.420

我相信 QGraphics 是完全自定义图形界面的正确途径，但如果你想尝试一些不需要你改变太多现有方法的东西，你可以使用自定义绘制事件做一个小部件：

*这是用 PyQt 编写的，但您可以轻松地转换为 Qt*

```
from PyQt4 import QtCore, QtGui

class LabelButton(QtGui.QWidget):

    clicked = QtCore.pyqtSignal()

    def __init__(self, labelStr, pixStr, parent=None):
        super(LabelButton, self).__init__(parent)
        self.label = labelStr
        self.pix = QtGui.QPixmap(pixStr)

    def paintEvent(self, event):
        super(LabelButton, self).paintEvent(event)
        rect = event.rect()
        painter = QtGui.QPainter(self)

        painter.drawPixmap(rect, self.pix)

        pos = (rect.bottomLeft()+rect.bottomRight()) / 2
        pos.setY(pos.y()-10)
        painter.drawText(pos, self.label)

        painter.end()

    def mousePressEvent(self, event):
        event.accept()
        self.clicked.emit()

def handleClick():
    print "CLICK"

if __name__ == "__main__":
    app = QtGui.QApplication([])
    widget = LabelButton("A Text Label", "myImage.png")
    widget.resize(600,400)
    widget.show()
    widget.raise_()

    widget.clicked.connect(handleClick)

    app.exec_() 
```

这是一个粗略的例子。您可以对文本的绘制进行更精细的调整。这个小部件接受一个标签字符串和一个图片路径，并将图片绘制为背景，将文本绘制为标签。您可以在绘制事件以及自定义信号和事件中使用此自定义小部件执行任意数量的操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-30T06:48:22.227

我已经使用此代码在标签中绘制图像：图像在 Ui 中加载，代码如下在paintevent中

```
void ColorTab::paintEvent(QPaintEvent *e){ 

ui->lbl_capture_img->setSizePolicy(QSizePolicy::Ignored, QSizePolicy::Ignored);
ui->Lbl_color_tab_WG->setSizePolicy(QSizePolicy::Ignored, QSizePolicy::Ignored);

Cap_Image = QImage(ui->lbl_capture_img->pixmap()->toImage());
Lbl_Image = QImage(ui->Lbl_color_tab_WG->pixmap()->toImage());

QPainter painter_Lbl(&Lbl_Image);
QPainter painter_Cap(&Cap_Image);

QPen pen(Qt::white, 5, Qt::DotLine, Qt::RoundCap, Qt::RoundJoin);
painter_Lbl.setPen(pen);
painter_Cap.setPen(pen);
painter_Lbl.drawPolygon(blinkRect_Lbl);
painter_Cap.drawPolygon(blinkRect_Cap);
ui->lbl_capture_img->setPixmap(QPixmap::fromImage(Cap_Image));
ui->Lbl_color_tab_WG->setPixmap(QPixmap::fromImage(Lbl_Image));

painter_Cap.end();
painter_Lbl.end();
} 
```

# codeigniter - CodeIgniter 上传一张图片到两个目录

> ID：12243502
> 
> 赞同：0
> 
> 时间：2012-09-03T07:18:40.803
> 
> 标签：codeigniter

我想将一张图片上传到 CodeIgniter 中的不同目录，所以一张图片存储在 2 个文件夹中。

路径一 etc/www/image1/ 和路径二 etc/www/image2/

代码

```
$config[‘upload_path’] =‘etc/www/image1/’;
$config[‘allowed_types’] = ‘jpg|jpeg|gif|png’;
$config[‘file_name’]=“imageone.jpg”;
$config[‘max_size’] = ‘10000’;

$this->upload->initialize($config); 
if(!$this->upload->do_upload(‘userfile’)){
echo $this->upload->display_errors();
}else {
$this->upload->data(‘userfile’);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T07:51:46.423

在 CI 控制器方法中成功上传文件后，只需使用 PHP 的[Copy()函数...](http://php.net/manual/en/function.copy.php)

前任：

```
$file = '/www/image1/example.txt';
$newfile = '/www/image1/example.txt';

if (!copy($file, $newfile)) {
    echo "failed to copy $file...\n";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-19T19:30:43.003

```
 $config['upload_path'] = FCPATH.'upload/';
    $config['allowed_types'] = FCPATH.'gif|jpg|jpeg|png';
    $config['encrypt_name'] = TRUE;
    $this->load->library('upload',$config);
    $upload = $this->upload->do_upload("resim");
    if($upload){
        $resim = $this->upload->data();
        $resimadi = $resim['file_name'];
        $resimkayit = 'upload/'.$resimyolu.'';
        $resimhotnews = 'upload/hotnews'.$resimadi.'';
        $resimlastnews = 'upload/lastnews'.$resimadi.'';
        $config['image_library'] = 'gd2';
        $config['source_image'] = 'upload/'.$resimadi.'';
        $config['new_image'] = 'upload/hotnews'.$resimadi.'';
        $config['create_thumb'] = FALSE;
        $config['maintain_ratio'] = FALSE;
        $config['quality'] = '%80';
        $config['width'] = 500;
        $config['height'] = 350;

        $this->load->library('image_lib', $config);
        $this->image_lib->initialize($config);
        $this->image_lib->resize();
        $this->image_lib->clear();
        //tmb folder resim uploading end 
```

//迷你文件夹resim上传开始

```
 $config1['image_library'] = 'gd2';
        $config1['source_image'] = 'upload/'.$resimadi.'';
        $config1['new_image'] = 'upload/lastnews/'.$resimadi.'';
        $config1['create_thumb'] = FALSE;
        $config1['maintain_ratio'] = FALSE;
        $config1['quality'] = '%80';
        $config1['width'] = 200;
        $config1['height'] = 150;

        $this->load->library('image_lib', $config1);
        $this->image_lib->initialize($config1);
        $this->image_lib->resize();
        $this->image_lib->clear(); 
```

//在mac电脑上，你必须给文件夹一个可写的权限

# javascript - Highchart js 最多绘制 15 个图

> ID：12243503
> 
> 赞同：4
> 
> 时间：2012-09-03T07:18:44.730
> 
> 标签：javascript, highcharts

我在 Highchart js 中尝试了很多，但仍然找不到减少系列中元素数量的方法。

如果我获得超过 15 天的数据，我必须将其减少回来并作为 15 天的数据显示给用户，以便用户可以在不拥挤数据的情况下查看数据。系列中最多 90 天，我必须减少到 15 天。

[在http://jsfiddle.net/MULZL/](http://jsfiddle.net/MULZL/)中检查我当前的代码

谁能给我一个解决方案？

PS：我不想减少到前 15 天或后 15 天。我想这样做只是因为图表中的 90 天看起来很拥挤，我不想应用缩放功能。如果超过 15 天，我想要忽略某些数据（天）的解决方案使其 15 天

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T14:46:53.713

您可以尝试[highStock](http://api.highcharts.com/highstock#plotOptions.column.dataGrouping)的 dataGrouping 功能

```
var dataGrouping = {
    groupPixelWidth: 40,
    units: [[
        'day',
        [1, 2, 3,4,5,6]
        ]]
}; 
```

Highcharts 将确保您的所有列都至少是指定的宽度（40），如果列数很大，以至于不可能有那个宽度，它将使用单位对数据进行分组，因此它将对 1 的数据进行分组一天分成 1 列或 2 天分成 1 列，依此类推。不确定您是否真的想要正好 15 个图，但我认为您担心的是避免数据拥挤，这正是这样做的，但列数会根据您指定的宽度、plotArea 的宽度和允许的单位和它的倍数。根据您的数据和图表的宽度调整值。 [jsFiddle](http://jsfiddle.net/jugal/JraJW/4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T07:52:24.597

[您可以使用Axis.setExtremes](http://api.highcharts.com/highcharts#Axis.setExtremes%28%29)方法以编程方式放大所需的时间范围。在您的情况下，您可能希望[在加载时执行此操作](http://api.highcharts.com/highcharts#Highcharts.Chart%28%29)

这是您的操作方法，如果您想放大给定数据的第一个 15 天，您可以轻松修改为放大过去 15 天。

```
function zoomTo15Points(chart){
    var points=chart.series[0].points;
    if(points.length<15)   return;
    var min=points[0].x;    
    var max=points[14].x;
    // If you wish to zoom to 15 days and not 15 points, you can modify max as
    // var max=min + 1000*60*60*24*14
    chart.xAxis[0].setExtremes(min,max);    
    chart.showResetZoom();
} 
```

如果您不想让用户缩小，您可以禁用最后一行，但您也必须禁用缩放，否则如果用户在 15 天内缩放，则会出现该按钮。

[Highchart 加载时缩放@jsFiddle](http://jsfiddle.net/jugal/JraJW/)

# ruby-on-rails - 运行 rake db:migrate 给出“在任何来源中都找不到 coffee-script-source-1.3.3”错误

> ID：12243509
> 
> 赞同：0
> 
> 时间：2012-09-03T07:19:11.173
> 
> 标签：ruby-on-rails, ruby, rake, bundler

我刚刚制作了一个新的 Rails 应用程序（Rails v3.2.8）并尝试`rake db:migrate`使用一次迁移运行，但我总是收到此错误：

```
Could not find coffee-script-source-1.3.3 in any of the sources
Run `bundle install` to install missing gems. 
```

但是，当我运行时`bundle install`，它表明 coffee-script-source-1.3.3 已经安装：

```
Using rake (0.9.2.2) 
Using i18n (0.6.1) 
Using multi_json (1.3.6) 
....
Using coffee-script-source (1.3.3) 
...
Your bundle is complete! Use `bundle show [gemname]` to see where a bundled gem is installed. 
```

有任何想法吗？如果有帮助，我也在运行`ruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-darwin12.1.0]`，我通过安装`brew install ruby`

编辑：我没有使用 rvm

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T08:33:42.233

rake 任务可能没有在您当前的包（由您的 Gemfile 指定）的上下文中执行。为确保您的任务在正确的上下文中运行，请`bundle exec rake db:migrate`改为运行。

通过 bundle exec 运行可执行文件被认为是最安全的途径，因为它保证只会使用您期望的版本的 gem（即：在 Gemfile.lock 中声明的内容）。

来源：[bundle-exec 手册页](http://gembundler.com/man/bundle-exec.1.html)

# iphone - CGBitmapContextCreateImage 错误

> ID：12243511
> 
> 赞同：7
> 
> 时间：2012-09-03T07:19:15.283
> 
> 标签：iphone, ios, uiimage, avfoundation

我在我的控制台中收到这样的错误：

：CGBitmapContextCreate：无效数据字节/行：对于 8 个整数位/分量、3 个分量、kCGImageAlphaPremultipliedFirst，应至少为 1920。: CGBitmapContextCreateImage: 无效的上下文 0x0

我使用下面的代码：

```
- (UIImage *) imageFromSampleBuffer:(CMSampleBufferRef) sampleBuffer 
{
    // Get a CMSampleBuffer's Core Video image buffer for the media data
    CVImageBufferRef imageBuffer = CMSampleBufferGetImageBuffer(sampleBuffer); 
    // Lock the base address of the pixel buffer
    CVPixelBufferLockBaseAddress(imageBuffer, 0); 

    // Get the number of bytes per row for the pixel buffer
    void *baseAddress = CVPixelBufferGetBaseAddress(imageBuffer); 

    // Get the number of bytes per row for the pixel buffer
    size_t bytesPerRow = CVPixelBufferGetBytesPerRow(imageBuffer); 
    // Get the pixel buffer width and height
    size_t width = CVPixelBufferGetWidth(imageBuffer); 
    size_t height = CVPixelBufferGetHeight(imageBuffer); 

    // Create a device-dependent RGB color space
    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB(); 

    // Create a bitmap graphics context with the sample buffer data
    CGContextRef context = CGBitmapContextCreate(baseAddress, width, height, 8, 
                                                 bytesPerRow, colorSpace, kCGBitmapByteOrder32Little | kCGImageAlphaPremultipliedFirst); 
    // Create a Quartz image from the pixel data in the bitmap graphics context
    CGImageRef quartzImage = CGBitmapContextCreateImage(context); 
    // Unlock the pixel buffer
    CVPixelBufferUnlockBaseAddress(imageBuffer,0);

    // Free up the context and color space
    CGContextRelease(context); 
    CGColorSpaceRelease(colorSpace);

    // Create an image object from the Quartz image
    UIImage *image = [UIImage imageWithCGImage:quartzImage];

    // Release the Quartz image
    CGImageRelease(quartzImage);

    return (image);
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-26T12:16:02.340

这就是解决我的问题的原因：正如“Wildaker”所建议的那样，或多或少是“调用它的代码”。

在 Apple 示例中，设置了输出格式。也许你跳过这部分来简化？！

`output.videoSettings = [NSDictionary dictionaryWithObject: [NSNumber numberWithInt:kCVPixelFormatType_32BGRA] forKey: (id)kCVPixelBufferPixelFormatTypeKey];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-12T08:37:59.710

`void *baseAddress = CVPixelBufferGetBaseAddress(imageBuffer);`应改为：`uint8_t *baseAddress = (uint8_t*)CVPixelBufferGetBaseAddress(imageBuffer);`

# django - 查看所有注册用户

> ID：12243514
> 
> 赞同：-3
> 
> 时间：2012-09-03T07:19:30.110
> 
> 标签：django, django-admin

我建立了一个登录表单，我可以以主管理员身份登录，我希望当我以管理员身份登录时，auth_user 表中的所有用户都列在管理员配置文件中，以便我可以手动编辑它们。

所以请告诉我如何访问该 auth_user 表，以便获取所有用户信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T07:23:05.757

使用单行 sql 命令

```
SELECT * from  auth_user; 
```

别的

导入您的用户模型，例如

```
from django.contrib.auth.models import User 
```

试试这个（Django 查询集）

```
User.objects.all() 
```

# tridion - 如何在 Tridion 中获取组的成员

> ID：12243526
> 
> 赞同：-3
> 
> 时间：2012-09-03T07:20:04.013
> 
> 标签：tridion, tridion-2011

在事件处理程序的帮助下，我得到了完成工作流活动的用户的 ID。

为了获得我正在写的Id，如下所示：

`foreach(var user in activity.Performers)`

`userId=user.Title.ToString();`

现在，类似地，我如何获取用户所属组的成员（他们的 id）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T07:34:00.163

如果您在事件处理程序中，那么您正在使用 TOM.NET。您需要获取组中的用户列表。每个组都有`GetGroupMembers`您可以使用的方法。这是您需要的代码：

```
foreach (var user in activity.Performers)
{
     var groupMemberships = ((User)user).GroupMemberships;

     var filter = new GroupMembersFilter(session);
     foreach (var groupMembership in groupMemberships)
     {
         var users = groupMembership.Group.GetGroupMembers(filter);
     }
} 
```

您可以通过设置属性来控制返回的数据量`filter`

# objective-c - 基于 ARC 的 iPad 项目中的 LowMemory 访问崩溃报告

> ID：12243534
> 
> 赞同：0
> 
> 时间：2012-09-03T07:20:32.397
> 
> 标签：objective-c, ios, ipad, memory-management, automatic-ref-counting

我在 ipad 中遇到了一些严重的内存警告问题。

我的项目是基于 ARC 的。及其简单的 UIKit 基础游戏。

在这里，我附上了在设置 -> 常规 -> 关于 -> 诊断和使用 -> 诊断和使用数据中生成的错误日志的屏幕截图

![在此处输入图像描述](../Images/ffc67b7e2ac1532d5646410602342f88.png)

还有我的 ipad 细节在这里。硬件型号：iPad 1 操作系统版本：iPhone OS 5.0.1

我的 ipad 项目几乎是 120 MB 左右的源文件（我的意思是从这个项目创建的 IPA 的大小。）。它在模拟器中运行良好。但不在ipad中。

我在这里找不到的到底是什么问题..？

如果有人对此查询有帮助，请告诉我。

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T10:41:24.523

在您的项目中使用 ARC 并不能自动解决所有可能的内存问题。您很可能仍然存在内存泄漏，或者您分配了过多的内存并试图保持分配的过多内存。您应该使用仪器检查内存使用情况并搜索这两个问题。

如果您不知道如何使用仪器，这个 stackoverflow 答案会重点介绍一些相关的 WWDC 视频：[Understanding Instruments in Xcode, testing for leaks](https://stackoverflow.com/questions/8248345/understanding-instruments-in-xcode-testing-for-leaks/8248424#8248424)

# java - WebService 无法处理没有命名空间前缀的 SOAP 主体的请求

> ID：12243539
> 
> 赞同：11
> 
> 时间：2012-09-03T07:20:44.563
> 
> 标签：java, web-services, soap, namespaces, jax-ws

当客户端调用 Web 服务而不在 SOAP 正文中传递前缀时，我的 Web 服务无法处理客户端的请求，如下所示：

```
<soap:Body> 
 <GetPatientResultsRequest xmlns="http://urlA"> 
  <PatientIdentification> 
      <PersonCivilRegistrationIdentifier xmlns="http://UrlB"/> 
  </PatientIdentification> 
  <Period> 
    <From>2012-05-26</From> 
     <To>2012-06-26</To> 
   </Period> 
 </GetPatientResultsRequest> 
</soap:Body> 
```

错误是和其他对应的Java对象`GetPatientResultsRequest`为空。

似乎当 Body 中没有前缀时，反序列化没有正确发生。我的 Web 服务只有在 SOAP Body 有一个前缀时才能响应

```
<soap:Body> 
 <m:GetPatientResultsRequest xmlns:m="http://urlA">
  <PatientIdentification> 
      <PersonCivilRegistrationIdentifier xmlns="http://UrlB"/> 
  </PatientIdentification> 
  <Period> 
    <From>2012-05-26</From> 
     <To>2012-06-26</To> 
   </Period> 
 </m:GetPatientResultsRequest> 
</soap:Body> 
```

谁能让我知道该怎么做，以便我的 Web 服务可以接受各种类型的 SOAP 请求（即在正文中带有和不带有前缀）？

我正在使用 JAX-WS (SOAP 1.1)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-05T21:09:16.367

Web 服务**定义了调用它时必须遵循的契约。**您发布的示例中只有一条消息与该合同匹配，因此一条有效，另一条无效。

在您的第一条消息中，您定义了一个默认命名空间（因为`xmlns`包装器中的属性），并且所有没有取消声明它并且没有前缀的元素都在同一个命名空间中，因为它们从它们的父级继承。

在您的第二条消息中，您有一个显式前缀声明，并且只有包装器位于该名称空间中，其他元素不在名称空间中，并且不从父级继承默认元素（因为`xmlns`缺少属性）。

正如我一开始所说，Web 服务定义了一个契约。**修改客户端以发送正确的消息而不是更改服务以接受来自客户端的错误消息更有意义。**

要控制元素的名称空间，您需要使用Web 服务和客户端**`targetNamespace`的 JAX-WS 注释上的值。**

这是一个示例，可以查看更改目标命名空间时代码和消息格式的差异。我将为此使用一个基本的 WSDL：

```
<?xml version="1.0" encoding="utf-8"?>
<wsdl:definitions 
xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" 
xmlns:tns="http://tempuri.org" 
xmlns:xs="http://www.w3.org/2001/XMLSchema" 
xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" 
targetNamespace="http://tempuri.org" 
name="CalculatorWS">
  <wsdl:types>
    <xs:schema targetNamespace="http://tempuri.org">
      <xs:element name="add" type="tns:add" />
      <xs:element name="addInput" type="tns:addInput" />
      <xs:element name="addResponse" type="tns:addResponse" />
      <xs:element name="addOutput" type="tns:addOutput" />
      <xs:complexType name="add">
        <xs:sequence>
          <xs:element name="addInput" type="tns:addInput" />
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="addInput">
        <xs:sequence>
          <xs:element name="a" type="xs:int" />
          <xs:element name="b" type="xs:int" />
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="addResponse">
        <xs:sequence>
          <xs:element name="addOutput" type="tns:addOutput" />
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="addOutput">
        <xs:sequence>
          <xs:element name="result" type="xs:int" />
        </xs:sequence>
      </xs:complexType>
    </xs:schema>
  </wsdl:types>
  <wsdl:message name="add">
    <wsdl:part name="parameters" element="tns:add" />
  </wsdl:message>
  <wsdl:message name="addResponse">
    <wsdl:part name="parameters" element="tns:addResponse" />
  </wsdl:message>
  <wsdl:portType name="CalculatorWS">
    <wsdl:operation name="add">
      <wsdl:input message="tns:add" />
      <wsdl:output message="tns:addResponse" />
    </wsdl:operation>
  </wsdl:portType>
  <wsdl:binding name="CalculatorWSPortBinding" type="tns:CalculatorWS">
    <soap:binding transport="http://schemas.xmlsoap.org/soap/http" style="document" />
    <wsdl:operation name="add">
      <soap:operation soapAction="http://tempuri.org/add" />
      <wsdl:input>
        <soap:body use="literal" />
      </wsdl:input>
      <wsdl:output>
        <soap:body use="literal" />
      </wsdl:output>
    </wsdl:operation>
  </wsdl:binding>
  <wsdl:service name="CalculatorWSService">
    <wsdl:port name="CalculatorWSPort" binding="tns:CalculatorWSPortBinding">
      <soap:address location="http://localhost:8080/WebServices/CalculatorWS" />
    </wsdl:port>
  </wsdl:service>
</wsdl:definitions> 
```

这定义了如下消息：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"
        xmlns:tem="http://tempuri.org">
   <soapenv:Body>
      <tem:add>
         <addInput>
            <a>?</a>
            <b>?</b>
         </addInput>
      </tem:add>
   </soapenv:Body>
</soapenv:Envelope> 
```

和：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"
       xmlns:tem="http://tempuri.org">
   <soapenv:Body>
      <tem:addResponse>
         <addOutput>
            <result>?</result>
         </addOutput>
      </tem:addResponse>
   </soapenv:Body>
</soapenv:Envelope> 
```

看到包装器上的命名空间前缀了吗？这是因为元素是在`http://tempuri.org`命名空间中声明的，而其他元素则不是，也不在命名空间中。

您甚至可以从命名空间中删除所有元素。从 WSDL 中剥离目标名称空间，使其看起来像这样：

```
<?xml version="1.0" encoding="utf-8"?>
<wsdl:definitions 
xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" 
xmlns:xs="http://www.w3.org/2001/XMLSchema" 
xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" 
name="CalculatorWS">
  <wsdl:types>
    <xs:schema>
      <xs:element name="add" type="add" />
      <xs:element name="addInput" type="addInput" />
      <xs:element name="addResponse" type="addResponse" />
      <xs:element name="addOutput" type="addOutput" />
      <xs:complexType name="add">
        <xs:sequence>
          <xs:element name="addInput" type="addInput" />
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="addInput">
        <xs:sequence>
          <xs:element name="a" type="xs:int" />
          <xs:element name="b" type="xs:int" />
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="addResponse">
        <xs:sequence>
          <xs:element name="addOutput" type="addOutput" />
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="addOutput">
        <xs:sequence>
          <xs:element name="result" type="xs:int" />
        </xs:sequence>
      </xs:complexType>
    </xs:schema>
  </wsdl:types>
  <wsdl:message name="add">
    <wsdl:part name="parameters" element="add" />
  </wsdl:message>
  <wsdl:message name="addResponse">
    <wsdl:part name="parameters" element="addResponse" />
  </wsdl:message>
  <wsdl:portType name="CalculatorWS">
    <wsdl:operation name="add">
      <wsdl:input message="add" />
      <wsdl:output message="addResponse" />
    </wsdl:operation>
  </wsdl:portType>
  <wsdl:binding name="CalculatorWSPortBinding" type="CalculatorWS">
    <soap:binding transport="http://schemas.xmlsoap.org/soap/http" style="document" />
    <wsdl:operation name="add">
      <soap:operation soapAction="http://tempuri.org/add" />
      <wsdl:input>
        <soap:body use="literal" />
      </wsdl:input>
      <wsdl:output>
        <soap:body use="literal" />
      </wsdl:output>
    </wsdl:operation>
  </wsdl:binding>
  <wsdl:service name="CalculatorWSService">
    <wsdl:port name="CalculatorWSPort" binding="CalculatorWSPortBinding">
      <soap:address location="http://localhost:8080/WebServices/CalculatorWS" />
    </wsdl:port>
  </wsdl:service>
</wsdl:definitions> 
```

这个新的 WSDL 将对应于如下消息：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
   <soapenv:Body>
      <add>
         <addInput>
            <a>?</a>
            <b>?</b>
         </addInput>
      </add>
   </soapenv:Body>
</soapenv:Envelope> 
```

和：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
   <soapenv:Body>
      <addResponse>
         <addOutput>
            <result>?</result>
         </addOutput>
      </addResponse>
   </soapenv:Body>
</soapenv:Envelope> 
```

在这种情况下没有前缀。

现在`wsimport.exe`在两个 WSDL 上使用，您将看到我在开始时谈到的目标名称空间，即对此的更改：

```
@WebService(name = "CalculatorWS", targetNamespace = "http://tempuri.org")
public interface CalculatorWS {
    @WebMethod(action = "http://tempuri.org/add")
    @WebResult(name = "addOutput", targetNamespace = "")
    @RequestWrapper(localName = "add", targetNamespace = "http://tempuri.org", className = "your.pack.age.Add")
    @ResponseWrapper(localName = "addResponse", targetNamespace = "http://tempuri.org", className = "your.pack.age.AddResponse")
    public AddOutput add(
        @WebParam(name = "addInput", targetNamespace = "")
        AddInput addInput);
} 
```

对此：

```
@WebService(name = "CalculatorWS", targetNamespace = "")
public interface CalculatorWS {
    @WebMethod(action = "http://tempuri.org/add")
    @WebResult(name = "addOutput", targetNamespace = "")
    @RequestWrapper(localName = "add", targetNamespace = "", className = "your.pack.age.Add")
    @ResponseWrapper(localName = "addResponse", targetNamespace = "", className = "your.pack.age.AddResponse")
    public AddOutput add(
        @WebParam(name = "addInput", targetNamespace = "")
        AddInput addInput);
} 
```

控制`targetNamespace`，您将控制消息的外观。

# database - 如何在注册时获取用户 ID 并添加到自定义表中

> ID：12243541
> 
> 赞同：1
> 
> 时间：2012-09-03T07:20:50.923
> 
> 标签：database, wordpress

我正在尝试在注册时获取用户 ID 并将该 ID 自动添加到我的自定义表中。我正在使用 wp-members 插件进行注册。

因此，是否可以在注册时即时获取用户 ID，并将该 ID 添加到另一个使用 WP-Members 插件的自定义表中。

或者，如果需要，我可以使用自定义注册页面。但是需要一些指导如何在注册过程中即时获取用户 ID。

我将下面的代码添加到我的主题functions.php，但没有任何效果..我不知道我错在哪里或者这段代码完全错误？

```
function get_customs_id($user_id){
    global $wpdb;
    $wpdb->insert( 'wp_customs', array( 'customs_id' => 'value1' ), array( '%d' ) );
}
add_filter('user_register', 'get_customs_id'); 
```

请帮我让它工作.. :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-17T02:16:15.850

除了“user_register”是一个动作钩子而不是过滤器这一事实之外，这应该可以工作。

查看问题的日期，当时该插件可能没有使用 wp_insert_user 。我不确定。但它现在可以了，所以这个钩子应该可以工作。

还有一个特定于插件的操作钩子也可以使用 - [wpmem_post_register_data](http://rocketgeek.com/plugins/wp-members/users-guide/filter-hooks/wpmem_post_register_data)。这个钩子是在用户注册并插入数据库之后出现的。它接收包含 id 的所有用户字段的数组。

所以使用那个钩子和你的其他代码，这应该可以工作：

```
function get_customs_id($fields){
    global $wpdb;
    $wpdb->insert( 'wp_customs', array( 'customs_id' => $fields['ID'] ), array( '%d' ) );
}
add_filter('user_register', 'get_customs_id'); 
```

# jquery - jQuery quickSand 插件

> ID：12243542
> 
> 赞同：0
> 
> 时间：2012-09-03T07:20:52.310
> 
> 标签：jquery, css, quicksand

请在此处查看工作演示：

[jQuery 流沙演示](http://www.evoluted.net/thinktank/demos/simple-jquery-filtering-part2/)

文件的来源可以从[这里下载。](http://www.evoluted.net/thinktank/wp-content/uploads/2011/04/simple-jquery-filtering-part2.zip)

这按以下方式对数据进行排序：

```
 A B C D

    E F G H

    I J K L 
```

我试图让它像这样排序和显示：

```
A D G
B E H
C F I 
```

我已更改 css 以将其显示在 3 列中，而不是 4 列。但是根据排序算法，您能否建议如何完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T10:37:51.513

我猜你正在寻找一种以 CSS 为中心的方法来显示结果。我建议有 3 个`ul`，每个都具有`float:left`固定的高度，它`li`就是`display: block`。由于每个高度是固定的，您可以轻松确定适合您要求`li`的总高度。`ul`这样您就可以完全按照上面的描述显示结果。

这有意义吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T07:40:58.200

您可以先对数组进行排序，然后获得：

```
`sortedList = [A,B,C,D,E,F,G,H,I,...]` 
```

并从这里计算一个列表，该列表以流顺序存储项目以供您显示：

```
var colSortedList = [];
var gap = sortedList.length / colnumber;
var i, j;
for (i=0; i<colnumber; i++){
   for(j=0; j+i < sortedList.length; j+=gap){
       colSortedist.push( sortedList[j+i] );
   }
} 
```

（这是一个未经测试的补丁，一两件事需要调整）

现在您可以从 colSortedList 创建您的 html 项目

[编辑]

如果我理解正确，你有你的初始`<ul id="source">`显示，你需要建立一个新的 html 节点`<ul id="destination">`，并调用`$('#source').quicksand( $('#destination') );`

如果您想“构建一个新的 html 节点”，它对每列的项目进行排序：

*   使用上述算法让您的项目以正确的顺序排序
*   `<li>`按照订单插入您的项目`colSortedList`

# magento - 如何在magento Go的产品列表页面中显示“You Save XXX”？

> ID：12243545
> 
> 赞同：0
> 
> 时间：2012-09-03T07:20:58.403
> 
> 标签：magento, magento-go

我需要在产品列表页面中添加“您节省 $xxx”金额。

我怎么能只在产品列表页面中添加它，而在 magento 中添加呢？

有可能这样做吗？

请任何人建议我..

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-07T13:10:00.993

为了在 magento 中显示“特价”产品的“You Save”——使其看起来类似于亚马逊的价格显示——您可以执行以下操作：

**复制**

```
app/design/frontend/base/default/template/catalog/product/price.phtml 
```

**至**

```
app/design/frontend/default/YOURTEMPLATE/template/catalog/product/price.phtml 
```

然后在您刚刚复制的 price.phtml 中，就在上面：

在这段代码下面：

```
<?php endif; /* if ($_finalPrice == $_price): */ ?> 
```

**插入**

```
<?php // KZN Show discounted percentage and price ?>
    <?php if($_finalPrice < $_price): ?>
    <?php 
    $_savePercent = 100 - round(($_finalPrice / $_price) * 100); 
    $_saveAmount = number_format(($_price - $_finalPrice), 2);  
    ?>
        <p class="yousave">
            <span class="price-label label">You Save: </span>
            <span class="price">
                <strong class="save-amount">$<?php echo $_saveAmount; ?></strong> (<?php echo $_savePercent; ?>%)
            </span>
        </p>
    <?php endif; ?>
<?php // KZN Show discounted percentage and price ?> 
```

**然后你可能想要设计它的样式。所以把它插入你的主题样式表（例如style.css）**

```
/********** < Product Prices */
.price { white-space:nowrap !important; }

.price-label { font:normal 12px/15px verdena, Arial, Helvetica, sans-serif; white-space:nowrap; display:inline-block; width:80px; text-align:right; color:#666; }

.price-box { margin:5px 0 10px; }
.price-box .price { font-size:13px; line-height:22px;font-weight:bold; color:#3399ff; }

/* Regular price */
.regular-price { color:#3399ff; }
.regular-price .price { font-size:18px; font-weight:normal; color:#900; font-family:verdana, arial, helvetica, sans-serif;}
.product-view .regular-price .price {}
.product-view .regular-price .price:before { content:"Price: "; color:#666; font:normal 12px/15px verdena, Arial, Helvetica, sans-serif;}

/* Old price */
.old-price { margin:0; }
.old-price .price-label { }
.old-price .price {  font-weight:normal; font-size:13px; color:#000; text-decoration:line-through; }

/* Special price */
.special-price { margin:0; }
.special-price .price-label { }
.special-price .price { font-size:18px; font-weight:normal; color:#900; font-family:verdana, arial, helvetica, sans-serif;}

/* You save price */
.yousave { margin:0; }
.yousave .price-label { }
.yousave .price { font-weight:normal; color:#900; font-family:verdana, arial, helvetica, sans-serif;} 
```

当然，您可能需要调整 CSS 类以反映您的主题。但是现在您将拥有类似于亚马逊价格显示的东西。

**参考**

[http://duntuk.com/add-you-save-amount-and-percentage-special-price-magento](http://duntuk.com/add-you-save-amount-and-percentage-special-price-magento)

# html - 最佳实践使网页布局适合一页

> ID：12243546
> 
> 赞同：0
> 
> 时间：2012-09-03T07:21:06.010
> 
> 标签：html, css, printing

我想为网页创建打印布局。它已经被设计成一页，但由于 HTML 和 CSS 不适合打印，我遇到了将“数字”页面与“真正的可打印”页面匹配的问题。我知道有一些`@media print and (min-resolution: 72dpi)`选项，但我无法预测每台打印机的分辨率。

所以我的问题是：***有没有更好的方法将网页或网页的一部分适合一个真正的可打印页面***？

编辑：澄清我的担忧。我希望网页的内容**始终适合**一页。我知道如何为 html 设置打印样式；）我知道 html/css 不是为此而开发的。但我认为有某种解决方案。

我想到的一种方法是生成一个包含所有内容的 PDF，然后将 PDF 页面大小“缩小”到 DIN A4 或我想要的任何内容。但这感觉有点糟糕。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T07:34:58.697

通过在样式表声明中添加值为“print”的媒体属性，我会为您的针对打印机的布局推荐一个单独的样式表，如下所示：

```
<link rel="stylesheet" media="screen" href="<?php echo $Root; ?>styles/layout-screen.php" />
<link rel="stylesheet" media="print" href="<?php echo $Root; ?>styles/layout-print.php" /> 
```

然后，在样式表中，您将给 html 元素及其全页大小的每个子元素的宽度设置为“100%”，如下所示。

```
#html, #body, #wrapper { width:100%; } 
```

当然，高度取决于您拥有的内容量，假设您使用浮动 div 来包含内容。您可能应该获得我所感知的经验水平。请注意，这将使页面宽度适合打印页面，而不管用户的打印机 dpi 分辨率如何。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T08:28:57.433

您可以使用媒体查询来编写覆盖默认样式的仅打印样式：

```
@media print {
    /* Your stylesheet for printers here */
} 
```

或者您可以使用单独的样式表：

```
 <link rel="stylesheet" href="print.css" type="text/css" media="print" /> 
```

您不需要预测任何分辨率，但请记住打印机可以覆盖您的样式。因此，如果您需要严格的布局（如发票或任何官方文件），请考虑提供 PDF。

我建议[这篇](http://coding.smashingmagazine.com/2011/11/24/how-to-set-up-a-print-style-sheet/)关于设置打印样式的文章。

# webpage - 如何测试用于 Retina 显示的网页？

> ID：12243549
> 
> 赞同：74
> 
> 时间：2012-09-03T07:21:16.230
> 
> 标签：webpage, retina-display

我编写了一个用于视网膜显示的网页。我目前没有视网膜显示器。

是否有任何模拟器应用程序或工具来测试网页的视网膜显示？

或者，是否有类似于 Apple 视网膜显示器的显示器（不是 Apple 的 MacBook 或 iPad）？

提前致谢。

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2013-06-21T05:18:13.710

**关于：Firefox 上的配置破解**

您实际上可以使用 Firefox：

1.  去`about:config`
2.  寻找`layout.css.devPixelsPerPx`
3.  将其更改为所需的比例（1 表示正常，2 表示视网膜等）

**截图：（**[来源：][[staticflickr.com](https://farm8.staticflickr.com/7512/26854390370_c7844dde05_z.jpg)][）]

[![](../Images/fa4b09536ef8ea2587cc1260f1bffdca.png)](https://i.stack.imgur.com/LYaSR.jpg)

刷新您的页面 - 繁荣，您的媒体查询现在开始了！向 Firefox 致敬，因为它非常适合 Web 开发！

这是在带有 Firefox 21.0 的 Windows 7 上完成的。

这个解决方案的优点是它会触发媒体查询和其他高级逻辑。如果您不这样做，而只是为每个人提供 HiDPI 图像，则可以使用 Chrome 等放大（或者编写 CSS 来为您缩放，如果这会让您的船漂浮）。

**放大 Firefox 和 Edge**

目前在 Firefox 和 Edge 上，如果你缩放它会触发基于 dppx 的媒体查询。因此，这种更简单的方法可能就足够了，但请注意，该功能被报告为 Firefox的“无法修复”[错误，因此这可能会改变。](https://bugzilla.mozilla.org/show_bug.cgi?id=809788)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2014-09-02T03:22:53.730

您可以使用 Chrome 浏览器检查视网膜显示是否正常工作，请使用本指南

1.  打开`Chrome Browser`然后`right click`点击`inspect element`
2.  在底部栏中，您会发现一些选项卡`console, search, emulation and rendering`
3.  单击选项卡`emulation`，然后拉起栏选项卡，如下所示
4.  根据上的菜单`left`调整，调整设备，屏幕等。

请查看本文以获取详细指南：[http ://www.gee.web.id/2014/09/how-test-retina-display-on-chrome.html](http://www.gee.web.id/2014/09/how-test-retina-display-on-chrome.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-05-15T16:34:01.380

你可以添加这个CSS。一切看起来都是 2 倍的大小，但如果有任何问题，它很容易发现。Javascript Web Retina Emulator 对我不起作用（在 Safari 中模糊）

```
body {
  zoom: 200%;
  -moz-transform: scale(2);
  -moz-transform-origin: 0 0;
} 
```

zoom: 200% 适用于 webkit，-moz 适用于 firefox，因此 Safari/Chrome/Firefox 这将起作用，不确定 IE。

如果你应用 -webkit-transform: scale(2) 东西会看起来很模糊，所以你需要使用 zoom: 200%;

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-23T00:51:10.607

GitHub 上有一个 JavaScript [Web Retina Emulator](https://github.com/jayphelps/web-retina-emulator)。

您还可以使用 Opera Mobile Emulator 测试自定义分辨率。这里有一个[关于如何做到这一点](http://www.quora.com/iPhone-Applications/How-do-I-test-my-website-for-Apple-retina-display)的解释。

如果您有一台较旧的 Apple 计算机（没有视网膜显示器），您可以使用 XCode 中的一个工具 Quartz Debug 模拟视网膜显示器。同样在 XCode 中，您可以使用 iOS 模拟器测试带有视网膜显示器的 iOS 设备。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-12T08:49:05.523

```
body {
  zoom: 200%;
  -moz-transform: scale(2);
  -moz-transform-origin: 0 0;
} 
```

仅凭该代码无法解决问题。如果您使用媒体查询，则应将像素比切换为 1，而不是 1.5 或 2，以达到目的。否则，它不会将图像切换到更高分辨率的对应物。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-04-23T08:27:01.430

只需在 Firefox 或 Chrome 中进入响应模式，然后编辑分辨率以选择：带 HiDPI 屏幕的笔记本电脑。它会做的工作！;)

# jquery - 使用 jquery keyup 进行 django 搜索

> ID：12243557
> 
> 赞同：0
> 
> 时间：2012-09-03T07:21:54.847
> 
> 标签：jquery, ajax, django

我正在使用 jquery keyup 函数进行搜索功能。我曾经在模板中查看搜索到的联系人。我的观点是：

```
def contacts_profile(request, search_id=None):
    contact = Invitation.objects.filter(send_visitid = request.user.username, accept_status = True,from_user__username__icontains = search_id)
    results = [ x.from_user.username for x in contact ]
    json = simplejson.dumps(results)
    return HttpResponse(json, mimetype='application/javascript') 
```

我的 Django 模板为：

```
<div id="contact_image">
    {% for contact in contacts %}
        {% if contact.from_user.image  %}
            <img src="/site_media/{{contact.from_user.image}}" id="{{contact.from_user.id}}" onclick="profile(this.id)" alt="" style="border-radius: 10px 10px 10px 10px; width:50px; height:50px;"/>{{contact}}<br><br>
        {% else %}
            <img src="/site_media/img/contact-img.png" alt="" />{{contact}}<br><br>
        {% endif %}
    {% endfor %}
    </div>

<div><input type="text" class="form-text" name="search_field" id="id_search_field" placeholder="Search Contacts here" /> 
```

请帮助我在 ajax 中查看此模板中搜索到的联系人：

```
$("#id_search_field").keyup(function () {
        var a =($('#id_search_field').val());
        alert(a);
        var html_str = ""
        $.ajax({
            "type"      : "GET",
            "url"       : "/profile_information/contacts_profile/" +a+ "/",
            "dataType"  : "json",
            "cache"     : false,
            "success"   : function(json) {
                alert(json)
                    }
                });     
         }); 
```

帮我查看模板中的 json 值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T12:19:53.953

我会使用 Dajaxice/Dajax。请参阅[文档](http://www.dajaxproject.com/)（以及[我在此处的答案](https://stackoverflow.com/questions/11711687/django-and-ajax-what-can-i-do/11715295#11715295)）了解它的工作原理。基本上，您获得了一个包装器，用于 (1) 使 AJAX 调用更加无缝，以及 (2) 能够轻松地编写 HTML 修改指令，例如“将此 HTML 放入该 div”或其他任何东西，放入您的 AJAX 响应中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T14:21:10.920

好吧，我认为您的 jquery ajax 有点错误：而不是：

```
$.ajax({
   "type"      : "GET",
   "url"       : "/profile_information/contacts_profile/" +a+ "/",
   "dataType"  : "json",
   "cache"     : false,
   "success"   : function(json) {
        alert(json)
    }
}); 
```

利用：

```
$.ajax({
   type      : "GET",
   url       : "/profile_information/contacts_profile/" +a+ "/",
   dataType  : "json",
   cache     : false,
   success   : function(json) {
        //see below for the json object
    }
}); 
```

然后将响应对象实际转换为 json，执行

```
json = eval(json); 
```

这样你就可以有 json.<property> 调用

# c# - 在 WinRT 的默认程序中打开 StorageItem？

> ID：12243558
> 
> 赞同：2
> 
> 时间：2012-09-03T07:21:56.070
> 
> 标签：c#, microsoft-metro, windows-runtime

目前我正在编写一个 XAML/C#/WinRT Modern UI 应用程序，其中包括一个简单的（几乎）任意类型的 StorageItems 管理系统，主要是图像、PDF/Office 文档、文本文件，......

现在，如果我可以在用户想要的时候在“默认程序”中打开一个文件，我会得到最好的用户体验。在 C#/WinRT 中是否有任何编程可能性以使用默认程序/应用程序（图像 -> 照片应用程序、pdf -> 阅读器应用程序、Word/Excel -> Office，...）打开 StorageItem？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-03T13:55:30.200

```
 Windows.ApplicationModel.Package.current.installedLocation.getFileAsync(fileToOpen).done(
            function (file) {
                Windows.System.Launcher.launchFileAsync(file).done(
                    function (success) {
                        // anything you want to do after default program launched        });
            }); 
```

# magento - 我的帐户中的订单详细信息页面 - Magento

> ID：12243559
> 
> 赞同：1
> 
> 时间：2012-09-03T07:21:57.837
> 
> 标签：magento

谁能帮我？

在`My Account->My Order`页面中，它在表格中显示所有订单，但是如果我单击`View Order`链接，它不会重定向到另一个页面 - 它会停留在同一页面中。

链接是正确`http://.../index.php/sales/order/view/order_id/142/`的 ( ) 但它仍然没有重定向到`Order Details`页面。

我正在使用 magento 1.4.1。如果您需要更多详细信息，我会提供，但请帮助我。是否有任何设置意味着“订单详情”页面不会显示？

请帮我解决这个问题。

# android - 无法使用 GPS 找到当前位置

> ID：12243560
> 
> 赞同：2
> 
> 时间：2012-09-03T07:21:58.910
> 
> 标签：android, eclipse, gps

我试过下面的程序。它在eclipse中工作->如果你通过ddms给出纬度和经度值意味着它在模拟器中显示为当前位置....但它没有检测到android手机中的当前位置。

```
private class mylocationlistener implements LocationListener {

    public void onLocationChanged(Location location) {    
     Date today = new Date();  
Timestamp currentTimeStamp = new Timestamp(today.getTime());

LocationManager lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
LocationListener ll = new mylocationlistener();    
boolean isGPS = lm.isProviderEnabled(LocationManager.GPS_PROVIDER); 

          if (isGPS){
              lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, ll); 
              if (location != null) {

        Log.d("LOCATION CHANGED", location.getLatitude() + "");
        Log.d("LOCATION CHANGED", location.getLongitude() + "");
        String str = "\n CurrentLocation: "+
        "\n Latitude: "+ location.getLatitude() + 
        "\n Longitude: " + location.getLongitude() + 
        "\n Accuracy: " + location.getAccuracy() + 
        "\n CurrentTimeStamp "+ currentTimeStamp;         
          Toast.makeText(MainActivity.this,str,Toast.LENGTH_SHORT).show();
          tv.append(str);           
                   }      
        else
           {
        String s1="GPS activation in process";
            Toast.makeText(MainActivity.this,s1,Toast.LENGTH_SHORT).show();
            /*alert.setTitle("gps");
            alert.setMessage("GPS activation in progress,\n Please click after few second.");
            alert.setPositiveButton("OK", null);
            alert.show();*/

           }
          }
            else
           {
               String s2="Enable Gps";
            Toast.makeText(MainActivity.this,s2,Toast.LENGTH_SHORT).show();
           }

    } 

public void onProviderDisabled(String provider) {
    // TODO Auto-generated method stub

}

public void onProviderEnabled(String provider) {
    // TODO Auto-generated method stub

}

public void onStatusChanged(String provider, int status, Bundle extras) {
    // TODO Auto-generated method stub

} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T07:27:48.713

我为此做了一项服务。使用它很容易获得经度/纬度。

将此类复制/粘贴到您的项目中。

```
package com.sample;
    import com.sample.globalconstant;
    import android.app.Service;
    import android.content.Context;
    import android.content.Intent;
    import android.location.Location;
    import android.location.LocationManager;
    import android.os.Bundle;
    import android.os.IBinder;
    import android.util.Log;
    import android.widget.Toast;

    public class MyServiceGPS extends Service
    {
        private static final String TAG = "BOOMBOOMTESTGPS";
        private LocationManager mLocationManager = null;
        private static final int LOCATION_INTERVAL = 1000;
        private static final float LOCATION_DISTANCE = 10f;

        private class LocationListener implements android.location.LocationListener{
            Location mLastLocation;
            public LocationListener(String provider)
            {
                Log.e(TAG, "LocationListener " + provider);
                mLastLocation = new Location(provider);
            }
            public void onLocationChanged(Location location)
            {
                Log.e(TAG, "onLocationChanged: " + location.getLatitude() +"....."+ location.getLongitude());
                globalconstant.lat  = location.getLatitude();
                globalconstant.lon  = location.getLongitude();
                Toast.makeText(getApplicationContext(), location.getLatitude() +"....."+ location.getLongitude(), 1000).show();
                mLastLocation.set(location);
            }
            public void onProviderDisabled(String provider)
            {
                Log.e(TAG, "onProviderDisabled: " + provider);           
            }
            public void onProviderEnabled(String provider)
            {
                Log.e(TAG, "onProviderEnabled: " + provider);
            }
            public void onStatusChanged(String provider, int status, Bundle extras)
            {
                Log.e(TAG, "onStatusChanged: " + provider);
            }
        }
        LocationListener[] mLocationListeners = new LocationListener[] {
                new LocationListener(LocationManager.GPS_PROVIDER),
                new LocationListener(LocationManager.NETWORK_PROVIDER)
        };
        @Override
        public IBinder onBind(Intent arg0)
        {
            return null;
        }
        @Override
        public int onStartCommand(Intent intent, int flags, int startId)
        {
            Log.e(TAG, "onStartCommand");
            super.onStartCommand(intent, flags, startId);      
            return START_STICKY;
        }
        @Override
        public void onCreate()
        {
            Log.e(TAG, "onCreate");
            initializeLocationManager();
            try {
                mLocationManager.requestLocationUpdates(
                        LocationManager.NETWORK_PROVIDER, LOCATION_INTERVAL, LOCATION_DISTANCE,
                        mLocationListeners[1]);

            } catch (java.lang.SecurityException ex) {
                Log.i(TAG, "fail to request location update, ignore", ex);
            } catch (IllegalArgumentException ex) {
                Log.d(TAG, "network provider does not exist, " + ex.getMessage());
            }
            try {
                mLocationManager.requestLocationUpdates(
                        LocationManager.GPS_PROVIDER, LOCATION_INTERVAL, LOCATION_DISTANCE,
                        mLocationListeners[0]);
            } catch (java.lang.SecurityException ex) {
                Log.i(TAG, "fail to request location update, ignore", ex);
            } catch (IllegalArgumentException ex) {
                Log.d(TAG, "gps provider does not exist " + ex.getMessage());
            }
        }
        @Override
        public void onDestroy()
        {
            Log.e(TAG, "onDestroy");
            super.onDestroy();
            if (mLocationManager != null) {
                for (int i = 0; i < mLocationListeners.length; i++) {
                    try {
                        mLocationManager.removeUpdates(mLocationListeners[i]);
                    } catch (Exception ex) {
                        Log.i(TAG, "fail to remove location listners, ignore", ex);
                    }
                }
            }
        }
        private void initializeLocationManager() {
            Log.e(TAG, "initializeLocationManager");
            if (mLocationManager == null) {
                mLocationManager = (LocationManager) getApplicationContext().getSystemService(Context.LOCATION_SERVICE);
            }
        }
    } 
```

当你想开始时，将这段代码复制到你的活动中：

```
startService(new Intent(this,MyServiceGPS.class)); 
```

创建一类全局常量：

```
public class globalconstant { public static double lat, lon; } 
```

当你想在你的项目中当前的纬度和经度时，只写这个`globalconstant.lat ,globalconstant.lon`

添加`uses-permission in Manifest`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T07:30:35.883

如果你想覆盖你当前的位置，那么最好使用默认方法而不是自定义覆盖。

这是当前位置的默认叠加方法。

```
MyLocationOverlay mMyLocationOverlay = new MyLocationOverlay(getApplicationContext(),
                Your_MapView);
mMyLocationOverlay.enableMyLocation();
mMyLocationOverlay.onProviderEnabled(LocationManager.NETWORK_PROVIDER);

mapOverlays = map_view.getOverlays(); 
```

你也可以使用 GPS

```
mMyLocationOverlay.onProviderEnabled(LocationManager.GPS_PROVIDER); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T07:38:08.663

您可以使用此[示例定期查找位置](https://github.com/commonsguy/cwac-locpoll)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T07:43:04.223

你的安卓手机有没有可能没有 GPS 信号？如果 GPS 还没有时间修复，locationManager.getLastKnownLocation 将返回 null。Android 不提供“现在给我位置”方法。当 GPS 得到修复后，onLocationChanged() 将运行。如果模拟器没问题，那么设备有问题。结帐我的问题[无法通过 GPS 获取位置：Android](https://stackoverflow.com/questions/12028117/not-able-to-get-location-by-gps-android)我有类似的问题。我发生的事情是我正在通过网络提供商在谷歌地图中接收位置。你确定你是通过 GPS 接收的吗？

# ruby - 为什么在 if 条件下分配数组会导致警告，而字符串不会？

> ID：12243568
> 
> 赞同：1
> 
> 时间：2012-09-03T07:22:34.300
> 
> 标签：ruby

我使用 ruby​​ 1.9.3-p194 收到以下代码的警告

```
if (x = true)
  puts 'it worked'
end

# => warning: found = in conditional, should be == 
```

但是，如果我分配一个数组，则没有警告

```
if (x = [true])
  puts 'it worked'
end

# => 'it worked', then returns nil since return of 'puts' is nil 
```

为什么使用字符串会导致警告？或者也许是一个更好的问题，为什么使用数组不会引起警告？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T07:29:33.293

Ruby 在赋值（文字：Fixnum、Symbol、String）、nil 和 true/false 时报告警告

红宝石-1.9.3-p194

解析.c:15026

```
static int
assign_in_cond(struct parser_params *parser, NODE *node)
{
    switch (nd_type(node)) {
      case NODE_MASGN:
        yyerror("multiple assignment in conditional");
        return 1;

      case NODE_LASGN:
      case NODE_DASGN:
      case NODE_DASGN_CURR:
      case NODE_GASGN:
      case NODE_IASGN:
        break;

      default:
        return 0;
    }

    if (!node->nd_value) return 1;
    switch (nd_type(node->nd_value)) {
      case NODE_LIT:
      case NODE_STR:
      case NODE_NIL:
      case NODE_TRUE:
      case NODE_FALSE:
        /* reports always */
        parser_warn(node->nd_value, "found = in conditional, should be ==");
        return 1;

      case NODE_DSTR:
      case NODE_XSTR:
      case NODE_DXSTR:
      case NODE_EVSTR:
      case NODE_DREGX:
      default:
        break;
    }
    return 1;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T07:35:37.877

*   您的两个程序都有相同的输出“它有效”。
*   您的两个程序都使用赋值语句的值
*   第**一个**使用编译器认为通常表示错误的模式（因此警告）
*   第二**个**使用的表达式（显然）太复杂而无法触发警告消息

# algorithm - 如何找到所有小于 N 的出租车号码？

> ID：12243571
> 
> 赞同：31
> 
> 时间：2012-09-03T07:22:42.327
> 
> 标签：algorithm

出租车号码是一个整数，可以用两种不同的方式表示为两个整数立方的和：`a^3+b^3 = c^3+d^3`. 设计一个算法来找出所有 a、b、c 和 d 小于 N 的出租车号码。

请给出 N 的空间复杂度和时间复杂度。我可以在空间中`o(N^2.logN)`及时完成`O(N^2)`。

迄今为止我发现的最佳算法：

形成所有对：`N^2`
对总和进行排序：`N^2 logN`
查找小于 N 的重复项

但这需要`N^2`空间。我们能做得更好吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2014-05-14T15:03:14.740

> 但这需要 N^2 空间。我们能做得更好吗？

存在基于**优先级队列的****O(N) 空间解决方案**。时间复杂度为**O(N^2 logN)**。为了勾勒出算法的思想，这里是矩阵 M 使得 M[i][j] = i^3 + j^3 （当然，矩阵**永远不会在内存中创建**）：

 ******```
0    1    8    27    64    125
1    2    9    28    65    126
8    9    16   35    72    133
27   28   35   54    91    152
64   65   72   91    128   189
125  126  133  152   189   250 
```

观察每一行和每一行都按升序排序。令 PQ 为优先队列。首先，我们将最大的元素放入优先队列。然后执行以下操作，只要 PQ 不为空：

1.  从PQ中弹出最大的元素
2.  如果 PQ 没有该行中的任何元素，则在上面添加相邻元素
3.  如果 PQ 没有来自该列的任何元素，并且它不在矩阵的对角线下方，则在左侧添加相邻元素（以避免冗余元素）

注意

1.  您不需要在内存中创建矩阵来实现算法
2.  元素将按降序从 PQ 中弹出，从矩阵的最大元素到最小的元素（避免来自矩阵冗余半部分的元素）。

每次 PQ 发出两次相同的值时，我们就找到了出租车号码。

作为说明，这里是 C++ 中的一个实现。时间复杂度为 O ( **N^2 logN)**，**空间复杂度为 O(N)**。

```
#include <iostream>
#include <cassert>
#include <queue>

using namespace std;

typedef unsigned int value_type;

struct Square
{
    value_type i;
    value_type j;
    value_type sum_of_cubes;
    Square(value_type i, value_type j) : i(i), j(j), sum_of_cubes(i*i*i+j*j*j) {}
    friend class SquareCompare;
    bool taxicab(const Square& sq) const
    {
        return sum_of_cubes == sq.sum_of_cubes && i != sq.i && i != sq.j;
    }
    friend ostream& operator<<(ostream& os, const Square& sq);
};

class SquareCompare
{
public:
    bool operator()(const Square& a, const Square& b)
    {
    return a.sum_of_cubes < b.sum_of_cubes;
    }
};

ostream& operator<<(ostream& os, const Square& sq)
{
    return os << sq.i << "^3 + " << sq.j << "^3 = " << sq.sum_of_cubes;
}

int main()
{
    const value_type N=2001;
    value_type count = 0;
    bool in_i [N];
    bool in_j [N];

    for (value_type i=0; i<N; i++) {
    in_i[i] = false;
    in_j[i] = false;
    }

    priority_queue<Square, vector<Square>, SquareCompare> p_queue;

    p_queue.push(Square(N-1, N-1));
    in_i[N-1] = true;
    in_j[N-1] = true;

    while(!p_queue.empty()) {
    Square sq = p_queue.top();

    p_queue.pop();
    in_i[sq.i] = false;
    in_j[sq.j] = false;

    // cout << "pop " << sq.i << " " << sq.j << endl;

    if (sq.i > 0 && !in_i[sq.i - 1] && sq.i-1 >= sq.j) {
        p_queue.push(Square(sq.i-1, sq.j));
        in_i[sq.i-1] = true;
        in_j[sq.j] = true;
        // cout << "push " << sq.i-1 << " " << sq.j << endl;
    }
    if (sq.j > 0 && !in_j[sq.j-1] && sq.i >= sq.j - 1) {
        p_queue.push(Square(sq.i, sq.j-1));
        in_i[sq.i] = true;
        in_j[sq.j - 1] = true;
        // cout << "push " << sq.i << " " << sq.j-1 << endl;
    }

    if (sq.taxicab(p_queue.top())) {
        /* taxicab number */
        cout << sq << " " << p_queue.top() << endl;
        count++;
    }
    }
    cout << endl;

    cout << "there are " << count << " taxicab numbers with a, b, c, d < " << N << endl;

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-02-19T10:30:41.040

Novneet Nov 和 user3017842 给出的答案都是使用 minHeap 找到存储 O(N) 的出租车号码的正确想法。再解释一下为什么大小为 N 的 minHeap 有效。首先，如果你有所有的和 (O(N^2)) 并且可以对它们进行排序 (O(N^2lgN))，你只需在遍历排序数组时选择重复项。好吧，在我们使用 minHeap 的例子中，我们可以按顺序遍历所有总和：我们只需要确保 minHeap 始终包含最小的未处理总和。

现在，我们有大量的和 (O(N^2))。但是，请注意，这个数字可以分成 N 组，每组都有一个易于定义的最小值！（修复`a`，`b`从`0 to N-1`=> 更改这里是您的`N`组。一组中较小的总和小于同一组中`b`较大的总和`b`- 因为`a`是相同的）。

> 这些组的最小联合是这些组的分钟的联合。因此，如果您将这些组的所有最小值保留在 minHeap 中，则可以保证在 minHeap 中具有总最小值。

现在，当您从堆中提取 Min 时，您只需从该提取的 min 的组中添加下一个最小元素（因此，如果您提取了`(a, b)`add `(a, b+1)`）并且您可以保证您的 minHeap 仍然包含所有总和的下一个未处理的 min 。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-07-23T21:12:05.200

我在这里找到了解决方案/代码：[时间复杂度 O(N^2 logN)，空间复杂度 O(N)](http://algs4.cs.princeton.edu/24pq/Taxicab.java.html) 该解决方案是借助优先级队列实现的。

通过查看代码可以轻松完成逆向思考。它可以在大小为 N 的数组中完成，因为在与下一个最小值比较后，从数组中删除最小和，然后通过添加新的和 - (i^3 + (j+1) 使数组的大小为 N ^3)。

一个直观的证明在这里：

最初，我们在最小优先级队列中添加了 (1,1),(2,2),(3,3),...,(N,N)。

假设 a^+b^3=c^3+d^3，并且 (a,b) 是接下来将从优先级队列中取出的最小值。为了能够检测到这个出租车号码，(c,d) 还必须在优先队列中，该队列将在 (a,b) 之后取出。

注意：我们将在提取 (a,b) 之后添加 (a,b+1)，因此提取 (a,b) 不会导致将 (c,d) 添加到优先级队列中，所以它必须已经存在于优先级队列中。

现在让我们假设 (c,d) 不在优先级队列中，因为我们还没有得到它。相反，优先级队列中有一些 (c,d-k)，其中 k>0。

由于正在取出(a,b)，所以a^3+b^3≤c^3+(d−k)^3

但是，a^3+b^3=c^3+d^3

所以，

c^3+d^3≤c^3+(d−k)^3 d≤d−k k≤0

由于k>0，这是不可能的。因此，我们的假设永远不会实现。因此，对于从 min-PQ 中删除的每个 (a,b)，如果 a^3+b^3=c^3+d，则 (c,d) 已经在 min-PQ 中（或刚刚被删除） ^3

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-09-03T08:46:57.617

在任何情况下，算法的时间复杂度都不能小于**O(N ² )**，因为您最多可以打印**O(N ² )**出租车号码。

为了减少空间使用，理论上你可以使用这里提到的建议：[little link](https://math.stackexchange.com/a/2822/17694)。基本上，这个想法是首先你尝试所有可能的对**a、b**并找到解决方案：

> a = 1 - (p - 3 * q)(p ² + 3 * q ² )
> 
> b = -1 + (p + 3 * q)(p ² + 3q ² )

然后，您可以使用以下命令找到合适的**c、d**对：

> c = (p + 3 * q) - (p ² + 3 * q ² )
> 
> d = -(p - 3 * q) + (p ² + 3 * q ² )

并检查它们是否都小于 N。这里的问题是求解该方程组可能会有点混乱（“有点”我的意思是**非常**乏味）。

**O(N ² )**空间解决方案要简单得多，并且可能足够高效，因为可以在合理的时间限制内运行的任何二次时间复杂度都可能适用于二次空间使用。

我希望这有帮助！

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-07-11T15:02:46.420

version1 使用 List 并排序
*O(n^2*logn) 时间和 O(n^2) 空间*

```
 public static void Taxicab1(int n)
    {
        // O(n^2) time and O(n^2) space
        var list = new List<int>();
        for (int i = 1; i <= n; i++)
        {
            for (int j = i; j <= n; j++)
            {
                list.Add(i * i * i + j * j * j);
            }
        }

        // O(n^2*log(n^2)) time
        list.Sort();

        // O(n^2) time
        int prev = -1;
        foreach (var next in list)
        {
            if (prev == next)
            {
                Console.WriteLine(prev);
            }
            prev = next;
        }
    } 
```

version2 使用 HashSet
*O(n^2) 时间和 O(n^2) 空间*

```
 public static void Taxicab2(int n)
    {
        // O(n^2) time and O(n^2) space
        var set = new HashSet<int>();
        for (int i = 1; i <= n; i++)
        {
            for (int j = i; j <= n; j++)
            {
                int x = i * i * i + j * j * j;
                if (!set.Add(x))
                {
                    Console.WriteLine(x);
                }
            }
        }
    } 
```

version3 使用面向最小值的[优先级队列](https://en.wikipedia.org/wiki/Priority_queue)
*O(n^2*logn) 时间和 O(n) 空间*

```
 public static void Taxicab3(int n)
    {
        // O(n) time and O(n) space
        var pq = new MinPQ<SumOfCubes>();
        for (int i = 1; i <= n; i++)
        {
            pq.Push(new SumOfCubes(i, i));
        }

        // O(n^2*logn) time
        var sentinel = new SumOfCubes(0, 0);
        while (pq.Count > 0)
        {
            var current = pq.Pop();

            if (current.Result == sentinel.Result)
                Console.WriteLine($"{sentinel.A}^3+{sentinel.B}^3 = {current.A}^3+{current.B}^3 = {current.Result}");

            if (current.B <= n)
                pq.Push(new SumOfCubes(current.A, current.B + 1));

            sentinel = current;
        }
    } 
```

SummOfCubes 在哪里

```
public class SumOfCubes : IComparable<SumOfCubes>
{
    public int A { get; private set; }
    public int B { get; private set; }
    public int Result { get; private set; }

    public SumOfCubes(int a, int b)
    {
        A = a;
        B = b;
        Result = a * a * a + b * b * b;
    }

    public int CompareTo(SumOfCubes other)
    {
        return Result.CompareTo(other.Result);
    }
} 
```

[github](https://github.com/dlarionov/algorithms/tree/master/Part%20I/IQ/07%20-%20Priority%20Queues/Taxicab%20numbers)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-07-10T23:40:10.080

1.  创建一个数组：1^3, 2^3, 3^3, 4^3, .... k^3。这样 k^3 < N 和 (k+1)^3 > N。数组大小将是 ~ (N)^(1/3)。数组是排序的。
2.  在与数组大小成正比的线性时间内使用 2sum 技术（[链接）。](https://stackoverflow.com/questions/11928091/linear-time-algorithm-for-2-sum)如果我们找到 2 对数字，那就是成功。
3.  通过每次将 N 减 1 来循环第 2 步。

这将使用 O(N^(1/3)) 额外空间和 ~ O(N^(4/3)) 时间。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-02-21T06:11:10.383

理解[时间复杂度 O(N^2 logN)、空间复杂度 O(N)](http://algs4.cs.princeton.edu/24pq/Taxicab.java.html)的一种简单方法是将其视为已`N`排序数组的合并加上先前合并元素的簿记。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-06-20T14:02:28.753

看起来像一个具有适当界限的简单蛮力算法在与**n^1.33成正比的时间和与****n**成正比的空间解决它。或者谁能​​指出我错的地方？

考虑 4 个嵌套循环，每个循环从 1 运行到**n 的三次根**。使用这些循环，我们可以遍历 4 个值的所有可能组合，并找到形成出租车号码的对。这意味着每个循环所花费的时间与n 的**三次根**或**n^(1/3)**成正比。将该值乘以 4 次，得到：

```
(n^(1/3)^4 = n^(4/3) = n^1.33 
```

我用 JavaScript 编写了一个解决方案并对其进行了基准测试，它似乎正在工作。一个警告是*结果只是部分排序的*。

这是我的 JavaScript 代码（它还不是最优的，可以进一步优化）：

```
function taxicab(n) {
  let a = 1, b = 1, c = 1, d = 1,
  cubeA = a**3 + b**3,
  cubeB = c**3 + d**3,
  results = [];

  while (cubeA < n) { // loop over a
    while (cubeA < n) { // loop over b
      // avoid running nested loops if this number is already in results
      if (results.indexOf(cubeA) === -1) {
       while (cubeB <= cubeA) { // loop over c
        while (cubeB <= cubeA) { // loop over d
          if (cubeB === cubeA && a!=c && a!=d) { // found a taxicab number!
            results.push(cubeA);
          }
          d++;
          cubeB = c**3 + d**3;
        } // end loop over d
        c++;
        d = c;
        cubeB = c**3 + d**3;
       } // end loop over c
      }
      b++;
      cubeA = a**3 + b**3;
      c = d = 1;
      cubeB = c**3 + d**3;
    } // end loop over d
    a++;
    b = a;
    cubeA = a**3 + b**3;
  } // end loop over a

  return results;
} 
```

在浏览器控制台中运行`taxicab(1E8)`大约需要 30 秒，结果会产生 485 个数字。十倍小的值`taxicab(1E7)`（1000 万）几乎需要 1.4 秒并产生 150 个数字。`10^1.33 * 1.4 = 29.9`，即**n**乘以**10**会导致运行时间增加**10^1.33**倍。结果数组是未排序的，但在快速排序后，我们得到了正确的结果，如下所示：

```
[1729, 4104, 13832, 20683, 32832, 39312, 40033, 46683, 64232, 65728,
110656, 110808, 134379, 149389, 165464, 171288, 195841, 216027, 216125,
262656, 314496, 320264, 327763, 373464, 402597, 439101, 443889, 513000, 
513856, 515375, 525824, 558441, 593047, 684019, 704977, 805688, 842751, 
885248, 886464, 920673, 955016, 984067, 994688, 1009736, 1016496, 1061424,
1073375, 1075032, 1080891, 1092728, 1195112, 1260441, 1323712, 1331064,
1370304, 1407672, 1533357, 1566728, 1609272, 1728216, 1729000, 1734264,
1774656, 1845649, 2048391, 2101248, 2301299, 2418271, 2515968, 2562112,
2585375, 2622104, 2691451, 2864288, 2987712, 2991816, 3220776, 3242197,
3375001, 3375008, 3511872, 3512808, 3551112, 3587409, 3628233, 3798613,
3813992, 4033503, 4104000, 4110848, 4123000, 4174281, 4206592, 4342914,
4467528, 4505949, 4511808, 4607064, 4624776, 4673088, …] 
```

这是基准测试的代码：

```
// run taxicab(n) for k trials and return the average running time
function benchmark(n, k) {
  let t = 0;
  k = k || 1; // how many times to repeat the trial to get an averaged result

  for(let i = 0; i < k; i++) {
    let t1 = new Date();
    taxicab(n);
    let t2 = new Date();
    t += t2 - t1;
  }
  return Math.round(t/k);
} 
```

最后，我测试了它：

```
let T = benchmark(1E7, 3); // 1376 - running time for n = 10 million
let T2 = benchmark(2E7, 3);// 4821 - running time for n = 20 million
let powerLaw = Math.log2(T2/T); // 1.3206693816701993 
```

所以这意味着在这个测试中时间与**n^1.32**成正比。用不同的值重复这个多次总是会产生大致相同的结果：从**1.3**到**1.4**。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-05-23T19:17:38.500

首先，我们将**构建**出租车号码而不是搜索它们。我们将用于构建出租车号码的范围即`Ta(2)`会上升到`n^1/3`not `n`。因为如果你对一个大于`n^1/3`它的数字进行立方运算，它将大于`n`，而且我们也不能对负数进行立方运算，以根据[定义](https://en.wikipedia.org/wiki/Taxicab_number)防止这种情况。我们将使用 HashSet 来记住算法中两个立方数的和。这将帮助我们`O(1)`在我之前提到的范围内迭代每对可能的数字时及时查找以前的立方和。

时间复杂度：`O(n^2/3)`

空间复杂度：`O(n^1/3)`

```
def taxicab_numbers(n: int) -> list[int]:
    taxicab_numbers = []
    max_num = math.floor(n ** (1\. / 3.))
    seen_sums = set()
    for i in range(1, max_num + 1):
        for j in range(i, max_num + 1):
            cube_sum = i ** 3 + j ** 3
            if cube_sum in seen_sums:
                taxicab_numbers.append(cube_sum)
            else:
                seen_sums.add(cube_sum)
    return taxicab_numbers 
```******

# java - JAVA SQL JDBC PreparedStatement Insert with Case 不是唯一的？

> ID：12243572
> 
> 赞同：0
> 
> 时间：2012-09-03T07:22:42.640
> 
> 标签：java, sql, jdbc, insert, prepared-statement

我有一个有效的 dbconnection（JDBC、Oracle），并且大多数请求都可以正常工作，尤其是一些 Prepared Batched Statements。我有一个带有**主键**
的现有数据库。 `testdb` **`MESSID`**

 **使用语句（未准备好）`stm`时，以下工作正常：

```
stm.addBatch("insert into testdb (\"MESSID\",\"METAFID\",\"POSITIONSNUMMER\") select case when count(*)=0 then 1 else 1+max(messid) end,HEXTORAW(''3637534FD7ED259449DBF86E2A283890''),1 from testdb");
stm.addBatch("insert into testdb (\"MESSID\",\"METAFID\",\"POSITIONSNUMMER\") select case when count(*)=0 then 1 else 1+max(messid) end,HEXTORAW(''A17F5E246F1E44D78228C39274E226B2''),2 from testdb");
stm.addBatch();
stm.executeBatch() 
```

当对preparedCalls（PreparedStatements，插入“METAFID”，“POSITIONSNUMMER”和set ...）做同样的事情时，这些查询在做`.executeBatch`.
我不确定，但在想，`select case when count(*)=0 then 1 else 1+max(messid)`片段出了问题（**java.sql.BatchUpdateException: ORA-00001: Unique Constraint (????.testdb)**）。
谁能帮助或讲述自己的经历？**

# spring - Spring-JMS(Websphere MQ)

> ID：12243574
> 
> 赞同：2
> 
> 时间：2012-09-03T07:22:59.283
> 
> 标签：spring, ibm-mq, spring-jms

我在 Spring 中有以下配置，它工作正常但性能太低（20 条消息需要 1 分钟）。您能否建议我进行更改以提高性能。

```
<bean id="jmsConnectionFactory" class="com.ibm.mq.jms.MQQueueConnectionFactory"> 
        <property name="transportType"><value>1</value></property> 
        <property name="queueManager"><value></value></property> 
        <property name="hostName"><value></value></property> 
        <property name="port"><value></value></property> 
        <property name="channel"><value></value></property> 
        <property name="clientId"><value></value></property>        
    </bean>
        <bean id="SenderJMSTemplate" class="org.springframework.jms.core.JmsTemplate"> 
        <property name="connectionFactory"><ref bean="jmsConnectionFactory" />  </property> 
        <property name="pubSubDomain"><value>false</value></property> 
        <property name="defaultDestination"><ref bean="senderQueue" /></property> 
    </bean>  
<bean id="senderQueue" class="com.ibm.mq.jms.MQQueue"> 
        <constructor-arg value="TEST" /> 
        <property name="baseQueueManagerName"><value>tree.queue.manager</value></property> 
        <property name="baseQueueName"><value>ORANGE.QUEUE</value></property>  
    </bean> 
    <bean id="jmsSender" class="org.tree.jms.spring.JMSSender"> 
        <property name="jmsTemplate"><ref bean="SenderJMSTemplate"/></property>     
    </bean> 
```

我从春天打电话给

```
JMSSender obj = (JMSSender) context.getBean("jmsSender"); 
```

我的发件人程序是：

```
 @Cacheable("message")

     public void sendMesage() {

        jmsTemplate.send(new MessageCreator() {
        public Message createMessage(Session session)throws JMSException {
        message = (Message) session.createTextMessage(stringBuffer.toString());
        return message;
        }
        });

    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T12:23:23.870

使用 JMSTemplate 从 JavaEE 容器发送消息时的一个常见问题是它非常慢，因为它为每条消息获取一个新连接（然后关闭它）。您可能需要一个池化/缓存连接来提高速度。

阅读这篇文章，它是为 ActiveMQ 编写的，但适用于 WebSphere MQ：[http ://activemq.apache.org/jmstemplate-gotchas.html](http://activemq.apache.org/jmstemplate-gotchas.html)

您可以使用以下方式在 spring 中设置缓存连接工厂：

```
<bean id="cachedConnectionFactory"
class="org.springframework.jms.connection.CachingConnectionFactory"
p:targetConnectionFactory-ref="jmsConnectionFactory"
p:sessionCacheSize="10" /> 
```

然后用它代替原来的 JMS 连接。

# android - 从 MOBILE 控制嵌入式系统。安卓还是 iOS？请提出建议和解释

> ID：12243575
> 
> 赞同：1
> 
> 时间：2012-09-03T07:22:59.380
> 
> 标签：android, iphone, ios, pic, avr

作为可行性研究的一部分。我需要在 Android 或 iOS 之间进行选择，以便将其与嵌入式系统集成。

基本上，该嵌入式系统将具有 AVR 或 PIC 微控制器。我想在移动设备和特定系统之间建立通信。

需要一些无线技术进行通信（蓝牙、wifi、互联网等。）微控制器有通信端口，如 UART、USART 等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T07:31:45.357

这实际上取决于您需要的通信类型。

特别是，如果您有正常的 WIFI 连接并且您的控制器可以通过 wifi 接收和发送您的数据，您可以使用 iOS 或 Android。

但是，如果您需要某种自由格式的串行通信，则需要使用 Android，通过 USB 串行电缆。

考虑到其他因素，我想这真的只是个人品味问题。

您能否提供更多信息，说明您的手机和设备本身之间的通信方式和内容以及您拥有的通信设备类型。

不确定这是否与您的想法相似，但您可能会看一下：[http](http://www.arduino.cc/) ://www.arduino.cc/可能是这种情况下最著名的例子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T07:36:33.437

使用一些串口转蓝牙模块将是最容易实现的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-01T18:24:55.220

除非您的目标受众是摄影师，否则我会选择 Android。严重地。此外，对于 iOS，您需要小心。例如，您想使用蓝牙，但并非所有 iOS 设备都会连接到键盘的蓝牙协议。（啊！您不知道蓝牙协议不止一个吗？）而且我认为任何 iOS 设备都不会让您使用蓝牙串行端口协议进行连接。

With Android you can jump in and start flying immediately by using the (or a copy of) the PIC 24F based IOIO board. And if you are an Android / Eclipse developer (I think) you can down load and use the IOIO JAVA / Android libraries. I have been told this makes programming the IOIO board just about as easy as programming an Arduino. Especially if you are well versed in JAVA, Android and the Eclipse editor. Add to this the IOIO board can be a host to the Android (i.e. connected by wired USB) or host to some Bluetooth modules (i.e. connect to the Andoid's bluetooth radio).

If you don't want to go it along you can buy the Microchip Android Development Kit (ADK) board which is also a PIC 24F based "USB wired" using AOA protocol to connect to an Android. I say "not going it alone" as I would expect you can then get limited support from Microchip w.r.t. their hardware (the ADK board), software (Android) and firmware (PIC ADk board). This solution, however, does not have built in Bluetooth support. I am guessing you can add it, it's just not part of the ADK software/firmware that Microchip put together.

# java - 如何在 Java 应用程序中更新会话超时的 oracle 表

> ID：12243579
> 
> 赞同：0
> 
> 时间：2012-09-03T07:23:15.230
> 
> 标签：java, oracle

当用户的 http 会话超时时，我需要更新 oracle 中的数据库表。我怎样才能做到这一点？

谢谢达瓦尔·马赫什瓦里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T07:30:58.300

您可以考虑几个选项。第一种可能是使用客户端代码（即 Javascript）来捕获这些类型的事件，然后触发适当的数据库更新。问题可能是确保在客户端代码中您可以识别哪个用户已注销。

更好的选择可能是使用 HTTPSessionListener（参见 javax.servlet.http.HttpSessionListener），它会在会话被销毁时更新您的数据库表。如果您使用 HttpSession 来确定授权等，那么这可能是更好的选择。

# sql - oracle11g sql查找同一表中行之间的差异

> ID：12243585
> 
> 赞同：0
> 
> 时间：2012-09-03T07:24:06.203
> 
> 标签：sql, group-by, oracle11g

我有一个表**SAMPLE**具有唯一列（sal_id、gal_id）和金额、税款、日期和更多列。

**样品表**

```
 actual_id, sal_id, gal_id, processed_flag, amount, tax     date    
   1          101     201     Y             10       1     25-Aug-12  
   2          101     201     Y             20       3     27-Aug-12  
   3          101     201     N             15       2     29-Aug-12 
```

现在我需要找出最大日期的未处理数据（process_flag='N'）和继续数据（process_flag='Y'）之间的区别。我需要计算 (sal_id + gal_id) 组合的金额和税金之间的差异。

所以查询返回应该是这样的：

在此示例中，由于对于 (101, 201)，我们有 2 个已处理的行，并且 (actual_id 2 具有最大日期。因此需要找到 actual_id 3 和 actual_id 2 行之间的差异。

```
actual_id,  sal_id,  gal_id, total_amount, total_tax  date    
    3          101     201    -5 (15-20)    -1 (2-3)   29-Aug-12 
```

我正在使用 Oracle 11g。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T08:55:46.643

试试这个：

```
WITH t AS (SELECT DISTINCT "sal_id" sid,"gal_id" gid,"processed_flag" pf, max("amount") over
(partition BY "sal_id","gal_id","processed_flag") am,
max("tax") over
(partition BY "sal_id","gal_id","processed_flag") tx,
           max("actual_id") over
(partition BY "sal_id","gal_id","processed_flag") aid,
           max("date") over
(partition BY "sal_id","gal_id","processed_flag") dt
FROM sample)
SELECT t1.aid, t1.sid, t1.gid, t1.am-t2.am, t1.tx-t2.tx, t1.dt FROM t t1 JOIN t t2 ON t1.sid=t2.sid AND t1.gid=t2.gid
WHERE t1.pf='N' AND t2.pf='Y'; 
```

[这](http://www.sqlfiddle.com/#!4/fc505/11)是一个小提琴

* * *

**更新：**前面的答案假设 max(date) 也有 max(amount)。
一个更好的解决方案可以是：

```
WITH t AS (SELECT *
FROM sample s
WHERE s."date" = (SELECT max("date") FROM sample s_in
                WHERE s_in."sal_id" = s."sal_id"
                AND s_in."gal_id" = s."gal_id"
                AND s_in."processed_flag" = s."processed_flag"))
SELECT t1."actual_id", t1."sal_id", t1."gal_id", t1."amount"-t2."amount" total_amount, t1."tax"-t2."tax" total_tax, t1."date"
FROM t t1 JOIN t t2 ON t1."sal_id"=t2."sal_id" AND t1."gal_id"=t2."gal_id"
WHERE t1."processed_flag"='N' AND t2."processed_flag"='Y'; 
```

[这](http://www.sqlfiddle.com/#!4/fc505/23)是小提琴

# ruby-on-rails - 如何从 Model ROR3.0 中的控制器运行

> ID：12243590
> 
> 赞同：1
> 
> 时间：2012-09-03T07:24:22.500
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

嗨，我是新的 ruby​​ on rails 我需要了解一些有关如何从控制器调用函数到模型的基本信息

例如：- 控制器名称：检查

```
 def create
    @data = Checking.check()
  end 
```

型号名称为 Checking

```
 def check
    @a="xxxxx"
  end 
```

我如何从控制器功能调用模型功能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T07:25:53.650

检查是实例方法，您必须使类方法按类名调用，`def self.check end`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T09:07:16.403

我们可以使用两种格式从控制器调用模型方法，

1\. 创建单例方法。单例方法是使用 self 关键字创建的。例子

```
 class Check < ActiveRecord::Base
    def self.check
    end
  end

  we can call this singleton method using following format,

  @checks = Check.check 
```

2\. 创建实例方法。实例方法是使用没有 self 关键字创建的

```
 class Check < ActiveRecord::Base
    def check
    end
  end

  we can call this singleton method using following format,

  @check =Check.new
  @checks = @check.check 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T07:31:28.103

似乎您指的是静态函数调用。在 ruby​​ 中，静态函数用`self`.

```
def self.check
    a="xxxxx"
end 
```

但是，在 Rails 中，您不应该在模型中填充实例变量。在这种情况下，您可以从`check`函数返回值并将其分配给控制器函数，例如

```
def self.check
    return "xxxxx"
end

#In controller
@data = Checking.check()  # "xxxxx" will be stored in @data 
```

但是，定义任何函数而不`self`意味着它是一个实例函数。因此，您需要通过该类的任何对象调用该函数。

# android - 在内容可编辑的 webview [Android] 中如何禁用“建议”？

> ID：12243592
> 
> 赞同：3
> 
> 时间：2012-09-03T07:24:31.513
> 
> 标签：android

当您在 Android 中的内容可编辑 web 视图中（此处运行 4.03）并建议打开软键盘时，似乎存在错误。它只会在按空格键或其他东西后显示最后输入的字符。

**当您在内容可编辑的 webview 环境中时，有没有办法关闭建议？**

# php - 如何将库中的文件包含到codeigniter的页面中？

> ID：12243593
> 
> 赞同：0
> 
> 时间：2012-09-03T07:24:32.903
> 
> 标签：php, codeigniter

```
I tried like 
$this->obj->load->library('phpmailer');
$this->obj->load->library('phpmailer/class.phpmailer'); 
```

但这会导致php错误。请提出解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T09:57:34.100

转到 phpmailer 库并输入此指令

```
include('phpmailer/class.phpmailer.php'); 
```

您的 phpmailer 和文件夹 phpmailer 应位于库文件夹中。您的 phpmailer 文件夹应包含文件 class.phpmailer.php。现在叫它

```
$this->load->library('phpmailer '); 
```

完毕！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T07:58:20.643

为其创建一个自定义加载器。您可以在 codeigniter 的 github 站点上的 codeigniter 教程中找到如何扩展数据库类，从该教程中您可以获得正在发生的事情的提示，然后您可以实现如何创建自定义库加载器，如果不是，您可以使用“核心”文件夹，它是库的自动加载器。检查 codeigniter 的文档。

检查这些链接：

[扩展数据库驱动程序](https://github.com/EllisLab/CodeIgniter/wiki/Extending-Database-Drivers)

[核心课程](http://codeigniter.com/user_guide/general/core_classes.html)

# vb.net - 如何使用 for next 禁用数据绑定文本框

> ID：12243594
> 
> 赞同：0
> 
> 时间：2012-09-03T07:24:38.847
> 
> 标签：vb.net

下面给出的代码仅禁用非数据绑定文本框。

```
Private Sub DisableFields()
    Dim ctrl As Control
    For Each ctrl In Me.Controls
        If TypeOf (ctrl) Is TextBox Then
            CType(ctrl, TextBox).Enabled = False
        End If
    Next
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T08:59:09.047

这不是正确的做法。
您应该进入每个 TextBox 的 xaml 并将 IsEnabled 绑定到您放入视图模型/代码后面的属性（expl：AllowEdit）。此属性必须引发 NotifyPropertyChanged。您甚至可以将其设置为 TextBox 的默认行为，方法是在 Style 或默认 Style 中设置绑定，如果您需要在这里或那里覆盖，您可以设置 IsEnabled="true"。

编辑：要遍历所有可用的文本框，您需要使用 VisualTreeHelper 来遍历可视化树：

```
 Public Sub ApplyOnAllDescendant(ByVal BaseUIElement As UIElement, 
                                      ByVal TargetType As Type, 
                                             ByVal NewIsEnabled As Boolean)
    If BaseUIElement Is Nothing Then Return
    If BaseUIElement.GetType() = TargetType Then
        BaseUIElement.IsEnabled = NewIsEnabled
    Else
        Dim ChildCount As Integer = VisualTreeHelper.GetChildrenCount(BaseUIElement)
        For i = 0 To ChildCount - 1
            ApplyOnAllDescendant(VisualTreeHelper.GetChild(BaseUIElement, i), 
                                           TargetType, NewIsEnabled)
        Next
    End If
  End Sub 
```

你打电话给：

```
 ApplyOnAllDescendant(Me, GetType(TextBox), False) 
```

如果你想知道是否有绑定，你可以使用

```
Dim Bindings = CType(BaseUIElement, Control)
                                 .GetBindingExpression(TextBox.TextProperty) 
```

然后查看Bindings的内容。

但同样，这不是一种“干净”的方式。

# java - 如何通过将 cron 表达式放在 XML 文件中来使其可配置

> ID：12243599
> 
> 赞同：0
> 
> 时间：2012-09-03T07:25:32.167
> 
> 标签：java, xml, cron

我每分钟使用 cron 调度程序执行一项作业。后来我需要这个间隔是可配置的。有什么方法可以从 XML 文件中读取 cron 设置并将其提供给调度程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T07:32:15.140

好吧，cron 理解某种不是 XML 的格式。您可以添加一个 cron 作业，该作业将：

1.  将xml转换为cron格式
2.  将自身添加到 cron
3.  更新 cron 计划

# java - 降序快速排序在重复条目上无法正常工作

> ID：12243602
> 
> 赞同：1
> 
> 时间：2012-09-03T07:25:52.360
> 
> 标签：java, algorithm, quicksort

我在使用递归快速排序算法时遇到了一些问题。元素未按正确顺序排序。输入数据也是具有重复条目的字符串。我使用整数来区分升序（1）和降序（-1）排序。枢轴是中间元素。每当比较重复条目时（ compareTo(String s) 将返回 0），我比较当前索引并返回一个负数，如果正在比较的字符串的索引大于另一个的索引。我不确定到底出了什么问题。下面是代码

```
// Quick sort Algorithm
public void sort(int left, int right)
{
    int  i = left, j = right;
    String mid;

    mid = (String)vect.elementAt((left + right)/2);

    while (i <= j)
    {
        // Compare the elements to the left
        while ((i < right) && 
                (compare((String)vect.elementAt(i), mid) < 0))
            i++;
        // Compare the elements to the right
        while ((j > left) && (compare((String)vect.elementAt(j), mid) > 0))
            j--;

        if (i <= j)
        {
            if(i!=j)
                swap(i, j);

            i++;
            j--;

        }
    }
    // Recursively call the sort method until indices cross.
    if(left < j)
        sort(left, j);
    if(i < right)
        sort(i, right);
}

/*
 * Compare method to compare the elements.
 * type = 1, for ascending sort
 * type = -1, for descending sort
 */
public int compare(String firstObj, String secondObj)
{
    int resCompare = firstObj.compareTo(secondObj)*type;
    if(resCompare == 0)
    {
        int index_firstObj = vect.indexOf(firstObj);
        int index_secObj = vect.indexOf(secondObj);
        if(index_firstObj < index_secObj)
            return -1;
        else
            return 1;
    }
    return resCompare;
}
// Swap the elements at i and j.
public void swap(int i, int j)
{
    String tmp1 = (String)vect.elementAt(i);
    String tmp2 = (String)vect.elementAt(j);

    vect.setElementAt(tmp1, j);
            vect.setElementAt(tmp2, i);

} 
```

示例：输入 = {"AA","BB","zz","cc","aa","AA","PP","hh" }; 升序排序输出 = {"AA","AA","BB","PP","aa","cc","hh","zz"}; 降序排序输出 = {"zz","hh","cc","BB","aa","PP","AA","AA"};

该算法中的问题可能不适用于升序排序以及其他一些输入数据。因此，在代码/逻辑中找到故障的任何帮助都将非常有帮助。在此先感谢。

已解决：无需查找 index_firstObj 和 index_SecondObj。如果 resCompare 为零，则不要做任何事情。public int compare(String firstObj, String secondObj) { int resCompare = firstObj.compareTo(secondObj)*type; 返回资源比较；}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T08:08:56.210

如果 i 或 j 成为中间值怎么办？另一个还不是中间？这不也会出现问题吗？您可能需要检查其中一个是否成为中间值。

# java - 使用 Dii 方法的 Java Web 服务

> ID：12243604
> 
> 赞同：1
> 
> 时间：2012-09-03T07:26:03.083
> 
> 标签：java, web-services

嗨，朋友们，我是 Web 服务的新手，现在我想创建一个 Web 服务并将其他 Web 服务用于我的项目。我进行了大量搜索，发现使用 Web 服务动态调用接口 (DII) 是最好的方法。我了解如何使用此链接[http://netbeans.org/kb/docs/websvc/jax-ws.html](http://netbeans.org/kb/docs/websvc/jax-ws.html)创建 web 服务。但是，除了我使用 DII 创建的其他 web 服务之外，我不知道任何人都可以告诉一些材料和示例来测试它，以及如何保护 web 服务.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T08:56:39.243

您可以使用 java 开发以下 Web 服务

1.  SOAP/WDSL
2.  宁静的

这两种服务都有自己的长处和短处。只需搜索“soap vs restful”，您就会发现很多关于此主题的文章可供阅读，并希望您能够决定哪些应该在哪里实现。

以下是一些最近帮助我开发 Web 服务的有用链接。

*   [www.w3schools.com/webservices/default.asp](http://www.w3schools.com/webservices/default.asp)
*   [netbeans.org/kb/docs/websvc/jax-ws.html](http://netbeans.org/kb/docs/websvc/jax-ws.html)
    这是开发一个restful服务。您可以使用来自 java.net 的 jersey 库来实现或使用 netbeans 模块包含它。
*   [http://netbeans.org/kb/docs/websvc/jax-ws.html](http://netbeans.org/kb/docs/websvc/jax-ws.html)

# apache - 我的 htaccess 重写不起作用

> ID：12243606
> 
> 赞同：0
> 
> 时间：2012-09-03T07:26:07.773
> 
> 标签：apache, .htaccess, mod-rewrite

我有这样的文件夹结构

```
/localhost/parent/ 
```

我有一个 .htaccess 居住在

```
/localhost/parent/ 
```

我想重写一切`/localhost/parent/WebContent/`从`/localhost/parent/`

这是我的代码

```
RewriteEngine on
RewriteRule ^$ WebContent/$1

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !^WebContent/
RewriteRule ^(.*)$ WebContent/$1 
```

出于某种原因，前两行工作正常，但其余行不起作用。所以我只能重定向主页。

## 更新

```
RewriteBase /parent/

RewriteEngine on
RewriteRule ^$ WebContent/$1

#RewriteCond %{REQUEST_URI} !WebContent
RewriteRule (.*) /parent/WebContent/$1 [R=301,L,QSA] 
```

进入无限循环。我现在只需要避免那个循环

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T07:38:55.480

尝试切换行的顺序，以便

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d 
```

先于一切。

您也可以尝试添加这一行：

```
RewriteBase /WebContent/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T08:43:47.327

我用这个

```
RewriteEngine on
RewriteRule ^$ /parent/WebContent/$1

RewriteCond %{REQUEST_URI} !WebContent
RewriteRule ^(.*)$ /parent/WebContent/$1 
```

# testing - 使用 dbunit 和 jetty 进行集成测试 - dbunit 不填充表

> ID：12243608
> 
> 赞同：1
> 
> 时间：2012-09-03T07:26:14.880
> 
> 标签：testing, maven, integration-testing, dbunit

您好我正在尝试进行集成测试，
我使用码头作为容器和 dbunit 在内存数据库中填充 HSQLDB。
我用来用 dataset.xml 文件填充数据库的代码有效，因为我在我的单元测试中使用它，所以如果有人可以看看它并给我一些建议，我将非常感激。这是 pom 的相关部分和我的代码。

pom.xml

```
<plugin>
            <groupId>org.mortbay.jetty</groupId>
            <artifactId>maven-jetty-plugin</artifactId>
            <version>6.1.26</version>
            <configuration>
                <scanIntervalSeconds>10</scanIntervalSeconds>
                <stopKey>foo</stopKey>
                <stopPort>9999</stopPort>
                <contextPath>/messages</contextPath>
                <connectors>
                    <connector implementation="org.mortbay.jetty.nio.SelectChannelConnector">
                        <port>8080</port>
                        <maxIdleTime>60000</maxIdleTime>
                    </connector>
                </connectors>
                <webApp>
                    ${basedir}/target/messages
                </webApp>
                <scanIntervalSeconds>0</scanIntervalSeconds>
                <daemon>true</daemon>

                <scanTargetPatterns>
                    <scanTargetPattern>
                        <directory>
                           ${basedir}/target/test-classes/integrationtest/
                        </directory>
                        <includes>
                            <include>**/*.properties</include>
                            <include>**/*.xml</include>
                        </includes>
                    </scanTargetPattern>
                </scanTargetPatterns>
            </configuration>
            <executions>
                <execution>
                    <id>start-jetty</id>
                    <phase>pre-integration-test</phase>
                    <goals>
                        <goal>run</goal>
                    </goals>
                </execution>
                <execution>
                    <id>stop-jetty</id>
                    <phase>post-integration-test</phase>
                    <goals>
                        <goal>stop</goal>
                    </goals>
                </execution>
            </executions>
            <dependencies>
                <dependency>
                    <groupId>commons-logging</groupId>
                    <artifactId>commons-logging</artifactId>
                    <version>1.1.1</version>
                </dependency>
                <dependency>
                    <groupId>commons-dbcp</groupId>
                    <artifactId>commons-dbcp</artifactId>
                    <version>1.2.2</version>
                </dependency>
                <dependency>
                    <groupId>org.hsqldb</groupId>
                    <artifactId>hsqldb</artifactId>
                    <version>2.2.8</version>
                </dependency>
            </dependencies>
        </plugin> 
```

代码：

```
 @BeforeClass
  public static void init() throws Exception {
Context ctx = new InitialContext();

ctx.createSubcontext("jdbc");

BasicDataSource dataSource = new BasicDataSource();
dataSource.setDriverClassName(org.hsqldb.jdbcDriver.class.getName());
dataSource.setUrl("jdbc:hsqldb:mem:MESSAGES");
dataSource.setUsername("sa");
dataSource.setPassword("");

ctx.bind("jdbc/messages", dataSource);

databaseTester = new DataSourceDatabaseTester(dataSource);
createTables(databaseTester.getConnection().getConnection());

databaseTester.setDataSet(getDataSet());
databaseTester.setSetUpOperation(DatabaseOperation.CLEAN_INSERT);
databaseTester.setTearDownOperation(DatabaseOperation.DELETE_ALL);

databaseTester.onSetup(); 
```

}

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T14:00:37.753

集成测试在与 Jetty 服务器不同的 JVM 中运行，因此内存数据库将为集成测试和 Jetty 服务提供不同的数据集。

最好的办法是使用磁盘数据库，`target/somedir`并让测试和 servlet 容器通过 hsql 协议访问该数据库。

并更改您的 jdbc uris 以引用服务器和端口。

至此，这个[插件](https://github.com/tblachowicz/hsqldb-maven-plugin/tree/master/src/main/java/org/hsqldb/server)看起来可能很有用。尽管作者尚未将其发布到中央存储库中（耻辱）。如果您无法说服该插件的作者将其推送到中央并且您想要其他人可以使用的构建，您可能可以使用 exec-maven-plugin 启动 hsqldb

另一种方法是让您的测试用例自行启动和停止码头。

# ruby-on-rails - 在 Rails 中创建用于样式目的的方法

> ID：12243609
> 
> 赞同：0
> 
> 时间：2012-09-03T07:26:18.390
> 
> 标签：ruby-on-rails, decorator, view-helpers

我在 Rails 上有一个非常基本的博客应用程序，我需要帮助来创建一个方法。

对于每个帖子，用户必须指定一个社区，并且出于样式目的，我想知道该社区是否属于某个桶，以便我可以相应地为该帖子着色。例如，邻里“SOMA”是“Downtown”桶的一部分。

我想象我要做的是将邻域传递给一个方法，该方法确定它属于哪个存储桶，并且我可以以某种方式输出存储桶以对应于索引中的 div 类。接受其他建议。

有谁知道这样的方法会在哪里？

更新：

我在 PostsHelper 中添加了一个准系统方法以查看它是否有效，然后我可以充实逻辑

模块 PostsHelper

```
def bucket(neighbor)
    case neighbor
        when "SOMA"
        puts "Downtown"

        when "Mission"
        puts "Dolores"

        else
        puts "foo"
    end

end 
```

结尾

然后我尝试在帖子索引中调用该方法，但没有任何反应。这可能是有史以来最愚蠢的问题，但我错过了什么？这甚至是正确的方法吗？

```
<ul id="post-list">
<% @posts.each do |post| %>

<li><%= post.content %></li>
<li><%= post.attribution %> in <%= post.neighborhood %> 
<span class="post-date"><%=time_ago_in_words(post.created_at) %> ago</span></li>
<li> <%= bucket(yield(post.neighborhood)) %> </li> 

<% end %>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T07:34:52.917

这种方法应该存在于装饰器中。

请参阅此 railscast：[http: //railscasts.com/episodes/286-draper](http://railscasts.com/episodes/286-draper)

* * *

根据您的详细信息进行编辑

```
def bucket(neighbor)
  case neighbor
  when "SOMA"    then "Downtown"
  when "Mission" then "Dolores"
  else
    "foo"
  end
end 
```

在您看来：

```
<li> <%= bucket(post.neighborhood) %> </li> 
```

但是你真的应该考虑使用装饰器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T08:01:03.500

您可以做的是创建一个资源（表 + 模型，Bucket）来跟踪您关心的存储桶 - 其中 Bucket name 属性可能包含您提到的更大地理区域的名称。然后你可以让 Post 属于 Bucket。

在您看来，您可以使用 post.bucket.name 填充帖子容器的类，然后使用预设颜色等为不同的存储桶名称创建样式。

**如果您想提高查询效率：**

如果您采用这种方法，请考虑将 Bucket name 属性缓存为 Post 的属性（因此不必在每次呈现视图时都进行额外的查询）。仍然拥有 Bucket 类（而不仅仅是 Post 模型中的 bucket_name 属性）的目的是让您可以规范化 Bucket 名称，并可能自己更新它们。为了确保缓存的 bucket_name 属性在您的 Post 记录中得到更新，您可以在 Bucket 模型中创建一个 after_update 回调，以选择属于该 Bucket 的所有帖子，并更新它们的 bucket_name 属性。

# php - 如果选中复选框，则将状态设置为 OK

> ID：12243612
> 
> 赞同：0
> 
> 时间：2012-09-03T07:26:40.223
> 
> 标签：php, mysql

嘿家伙我有以下问题：我有这行代码，其中包括一个复选框：

```
echo('<td bgcolor="'.$Color.'"><input type="checkbox" name="altgeraet" value="'.$resultarray['Status_Altgeraet'].'"></td'); 
```

现在我想要在选择复选框时，statch_altgeraet的MySQL值设置为OK，如果不是它应该设置为NOK。在我的页面底部有一个按钮，当有人点击它时，它会转到我的下一个 php 文件，所有数据都在该文件中进行处理。这是应该更新mysql值的地方。我已尝试将复选框放入变量中以使用它，但它似乎不起作用：

```
$Altgeraet = $REQUEST['Status_Altgeraet'])); 
```

我不是 php 专家，只是一个初学者。希望大家能给我一些解决方法：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T07:29:39.750

```
$Altgeraet = isset($REQUEST['altgeraet']) ? 'OK' : 'NOK'; 
```

或者使用更熟悉的语法：

```
if (isset($_REQUEST['altgeraet'])) {
    $Altgeraet = 'OK';
} else {
    $Altgeraet = 'NOK';
} 
```

如果未选中该复选框，则它根本不会出现在`$_REQUEST`//`$_GET`中`$_POST`。

# jquery - 一定时间后删除 .val

> ID：12243616
> 
> 赞同：0
> 
> 时间：2012-09-03T07:26:55.257
> 
> 标签：jquery, jquery-animate

我正在使用一个函数向成功注册时事通讯添加“谢谢”消息。

```
$('#subForm').animate({opacity : 1}, 300);
      } else {
        $('#subForm input[type="text"]').val('Thank you');
        $('#subForm').animate({opacity : 1}, 300);
      }
}); 
```

我要解决的是如何在几秒钟后删除“谢谢”值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T07:28:40.133

您可以使用[`setTimeout()`](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)：

```
setTimeout(function() {
    $("#subForm input[type='text']").val("");
}, 1000); 
```

第二个参数代表延迟的毫秒数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T07:28:22.403

使用 setTimeout

```
setTimeout("$('#subForm input[type=\"text\"]').val('');", 2000); 
```

# git - 如何使用命令行删除我在 Git 上的存储库？

> ID：12243619
> 
> 赞同：16
> 
> 时间：2012-09-03T07:27:22.147
> 
> 标签：git, github, repository

> **可能重复：**
> [如何完全删除使用 init 创建的 git 存储库？](https://stackoverflow.com/questions/1213430/how-to-fully-delete-a-git-repository-created-with-init)

我在 git 上有一个测试存储库，我想使用命令行删除它。我发现 `git rm <file>` 删除了存储库中的文件，而不是存储库本身。任何人都可以在这里提供帮助吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-03T07:29:48.580

对于本地仓库，运行

```
rm -r .git 
```

你不能通过命令行远程删除一个仓库到 github。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-03T07:29:43.797

尝试

`rm -r .git`

从存储库的根目录。

# c++ - 将向量声明为类成员

> ID：12243621
> 
> 赞同：3
> 
> 时间：2012-09-03T07:27:31.663
> 
> 标签：c++, unix, solaris

我在头文件中有一个简单的类：**a.hh**

```
#ifndef a_hh
#define a_hh

class a
{
public: 
    int i;
    a()
    {
        i = 0;
    }

};
#endif 
```

然后我有一个文件：**b.cc**

```
#include <iostream> 
#include "a.hh"

using namespace std;

int main(int argc, char** argv)
{

    a obj;
    obj.i = 10;
    cout << obj.i << endl;
    return 0;
}
> 
```

到此为止，一切都很好。我编译了代码，它编译得很好。但是只要我在类中添加一个向量：

```
#ifndef a_hh
#define a_hh

class a
{
public: 
    int i;
    vector < int > x;
    a()
    {
        i = 0;
    }

};
#endif 
```

我收到如下编译错误：

```
> CC b.cc
"a.hh", line 7: Error: A class template name was expected instead of vector.
1 Error(s) detected. 
```

在这里将向量声明为成员有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T07:31:48.637

您需要`#include <vector>`并使用限定名称`std::vector<int> x;`：

```
#ifndef a_hh
#define a_hh

#include <vector>

class a{
public:
    int i;
    std::vector<int> x;
    a()             // or using initializer list: a() : i(0) {}
    {
        i=0;
    }
};

#endif 
```

其他要点：

*   （由 EitanT 评论）我删除`a::`了构造函数的附加限定
*   阅读[为什么“使用命名空间标准”被认为是不好的做法？](https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-a-bad-practice-in-c)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T09:09:27.430

将向量声明为类成员：

```
#include <iostream>
#include <vector>
using namespace std;

class class_object 
{
    public:
            class_object() : vector_class_member() {};

        void class_object::add_element(int a)
        {   
            vector_class_member.push_back(a);
        }

        void class_object::get_element()
        {
            for(int x=0; x<vector_class_member.size(); x++) 
            {
                cout<<vector_class_member[x]<<" \n";
            };
            cout<<" \n";
        }

        private:
            vector<int> vector_class_member;
            vector<int>::iterator Iter;
};

int main()
{
    class_object class_object_instance;

    class_object_instance.add_element(3);
    class_object_instance.add_element(6);
    class_object_instance.add_element(9);

    class_object_instance.get_element();

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-03T07:45:50.620

1.你需要`#include <vector>`and `using namespace std`，然后 a.hh 就像下面这样：

```
#ifndef a_hh
#define a_hh

#include <vector>
using namespace std;

class a
{
public: 
    int i;
    vector <int> x;
    a()
    {
        i = 0;
    }

};
#endif 
```

2.如果你不想在所有代码中只使用std命名空间，你可以在类型之前指定命名空间，就像 `std::vector<int> x;`

# ios5 - fetchcontroller 在 facebook 聊天 ios 应用程序中没有获得价值

> ID：12243622
> 
> 赞同：0
> 
> 时间：2012-09-03T07:27:37.390
> 
> 标签：ios5, core-data, xcode4.2, nsfetchrequest, nsfetchedresultscontroller

我已使用以下方法在我的 FBChat 应用程序中注销时删除了存储在 Core Data 中的所有条目。

```
//delete persistance.......         

 if ([__persistentStoreCoordinator persistentStores] == nil)
     return;

 [self.managedObjectContext reset];
 [self.managedObjectContext lock];

 NSPersistentStore *store = [[self.persistentStoreCoordinator persistentStores] lastObject];

 if (![self.persistentStoreCoordinator removePersistentStore:store error:&error]) {
     NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
     abort();
 }  

// Delete file

 if ([[NSFileManager defaultManager] fileExistsAtPath:store.URL.path]) {
     if (![[NSFileManager defaultManager] removeItemAtPath:store.URL.path error:&error]) {
         NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
         abort();
     } 
 }

 __persistentStoreCoordinator = nil;

 __persistentStoreCoordinator = [self persistentStoreCoordinator];
 [self.managedObjectContext unlock]; 
```

但是当我再次登录时，`fetchcontroller`没有得到值。我已经设置了`fetchcontroller=nil`while注销。的委托方法`fetchcontroller`在登录时被调用。

如果有人有想法，请帮助我。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T20:40:36.330

这是预期的行为。删除所有内容后，您将无法获得值。如果您的获取结果控制器是延迟创建的（代码未显示，但这通常是设计模式），它会在需要时自行创建。

这里没有惊喜。

# javascript - 页面加载时如何激活 JS 数据过滤器？

> ID：12243625
> 
> 赞同：2
> 
> 时间：2012-09-03T07:27:51.227
> 
> 标签：javascript, filter

我在这个网站上工作[http://fireworkslove.com](http://fireworkslove.com)

我制作了一个包含不同类别（推荐、新闻等）的导航，我想在页面打开时显示“推荐”类别（`data-filter=".recommended"`）。现在“推荐”在视觉上被选中，但过滤器显示“全部显示”类别（data-filter=".recommended"）。

这是导航的代码：

```
<li><a href="#" data-filter=".recommended" class="selected">Recommended</a></li>
<li><a href="#" data-filter=".news">News</a></li>
<li><a href="#" data-filter=".community">Community</a></li>
<li><a href="#" data-filter=".resources">Resources</a></li>
<li><a href="#" data-filter=".extensions">Extensions</a></li>
<li><a href="#" data-filter=".tutorials">Tutorials</a></li>
<li><a href="#" data-filter=".articles">Articles</a></li>
<li><a href="#" data-filter=".influencers">Influencers</a></li>
<li><a href="#" data-filter="*">Show all</a></li> 
```

我认为我必须在“Filter - Isotope”（第 78 行）部分更改 firefox.com/js/custom.js 上的代码

这是代码

```
//##########################################
// Filter - Isotope 
//##########################################

var $container = $('#filter-container');

$container.imagesLoaded( function(){
    $container.isotope({
        itemSelector : 'figure',
        filter: '*',
        resizable: false,
        animationEngine: 'jquery'
    });
});

// filter buttons

$('#filter-buttons a').click(function(){

    // select current
    var $optionSet = $(this).parents('#filter-buttons');
    $optionSet.find('.selected').removeClass('selected');
    $(this).addClass('selected');

    var selector = $(this).attr('data-filter');
    $container.isotope({ filter: selector });
    return false;
}); 
```

我想`data-filter=".recommended"`在页面加载时激活。

希望有人可以帮助我，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T07:32:25.657

完毕！我必须改变；

筛选： '*'

至

过滤器：'.recommended'

谢谢大家！

# oauth - 为gmail imap生成有效的oauth令牌和秘密？

> ID：12243629
> 
> 赞同：3
> 
> 时间：2012-09-03T07:28:04.447
> 
> 标签：oauth, gmail, google-apps

我一直在到处寻找[xoauth.py](http://code.google.com/p/google-mail-xoauth-tools/wiki/XoauthDotPyRunThrough)的 Java 端口。因为我真的想在我的 java web 应用程序中使用相同的身份验证过程。

我曾尝试使用 GoogleOAuthHelper 生成令牌和机密，但是当我将它们插入到[谷歌邮件 java 示例](http://code.google.com/p/google-mail-xoauth-tools/wiki/JavaSampleCode)中时，我收到错误消息，说凭据无效。

如果有人可以提供帮助，我将不胜感激。我已经坚持了很长时间了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T07:50:10.123

您是否尝试过此页面上的链接[https://developers.google.com/google-apps/gmail/oauth_libraries](https://developers.google.com/google-apps/gmail/oauth_libraries)

和 [https://developers.google.com/google-apps/gmail/#oauth_access_to_imap_and_smtp](https://developers.google.com/google-apps/gmail/#oauth_access_to_imap_and_smtp)

这是假设您要访问的服务是 gmail（因为您将问题标记为 gmail）。如果您希望使用其他服务（例如 Drive），那么您的起点是[https://code.google.com/apis/console上的 api 控制台](https://code.google.com/apis/console)

# android - 无法解析 Activity 的超类

> ID：12243631
> 
> 赞同：11
> 
> 时间：2012-09-03T07:28:24.480
> 
> 标签：android, android-activity

我在基于 OpenGL ES 10 的新项目中收到此错误：

```
 09-03 12:44:07.870: W/dalvikvm(599): Unable to resolve superclass of Lcom/example/basicgl10test/MainActivity; (416)
  09-03 12:44:07.870: W/dalvikvm(599): Link of class 'Lcom/example/basicgl10test/MainActivity;' failed
  09-03 12:44:07.870: D/AndroidRuntime(599): Shutting down VM
  09-03 12:44:07.910: W/dalvikvm(599): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
  09-03 12:44:07.920: I/dalvikvm(599): Wrote stack traces to '/data/anr/traces.txt'
  09-03 12:44:07.980: E/AndroidRuntime(599): FATAL EXCEPTION: main
  09-03 12:44:07.980: E/AndroidRuntime(599): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.basicgl10test/com.example.basicgl10test.MainActivity}: java.lang.ClassNotFoundException: com.example.basicgl10test.MainActivity
  09-03 12:44:07.980: E/AndroidRuntime(599):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1880)
  09-03 12:44:07.980: E/AndroidRuntime(599):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
  09-03 12:44:07.980: E/AndroidRuntime(599):    at android.app.ActivityThread.access$600(ActivityThread.java:123)
  09-03 12:44:07.980: E/AndroidRuntime(599):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
  09-03 12:44:07.980: E/AndroidRuntime(599):    at android.os.Handler.dispatchMessage(Handler.java:99)
  09-03 12:44:07.980: E/AndroidRuntime(599):    at android.os.Looper.loop(Looper.java:137)
  09-03 12:44:07.980: E/AndroidRuntime(599):    at android.app.ActivityThread.main(ActivityThread.java:4424)
  09-03 12:44:07.980: E/AndroidRuntime(599):    at java.lang.reflect.Method.invokeNative(Native Method)
  09-03 12:44:07.980: E/AndroidRuntime(599):    at java.lang.reflect.Method.invoke(Method.java:511)
  09-03 12:44:07.980: E/AndroidRuntime(599):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
  09-03 12:44:07.980: E/AndroidRuntime(599):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
  09-03 12:44:07.980: E/AndroidRuntime(599):    at dalvik.system.NativeStart.main(Native Method)
  09-03 12:44:07.980: E/AndroidRuntime(599): Caused by: java.lang.ClassNotFoundException: com.example.basicgl10test.MainActivity
  09-03 12:44:07.980: E/AndroidRuntime(599):    at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
  09-03 12:44:07.980: E/AndroidRuntime(599):    at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
  09-03 12:44:07.980: E/AndroidRuntime(599):    at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
  09-03 12:44:07.980: E/AndroidRuntime(599):    at android.app.Instrumentation.newActivity(Instrumentation.java:1023)
  09-03 12:44:07.980: E/AndroidRuntime(599):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1871)
  09-03 12:44:07.980: E/AndroidRuntime(599):    ... 11 more
  09-03 12:44:08.061: W/ActivityManager(92):   Force finishing activity com.example.basicgl10test/.MainActivity 
```

我的活动课是这样的：

```
 package com.example.basicgl10test;
  import com.example.gl10gameadvlib.GL10GameActivity;
  import com.example.gl10gameadvlib.Screen;
  public class MainActivity extends GL10GameActivity { 
```

父活动在另一个包中是这样的：

```
 package com.example.gl10gameadvlib;
  import javax.microedition.khronos.egl.EGLConfig;
  import javax.microedition.khronos.opengles.GL10;
  public abstract class GL10GameActivity extends Activity { 
```

构建过程中没有错误。我重新创建了一个新项目，clean+build，问题仍然存在。

我正在使用带有 Android 4.0 模拟器的 Eclipse IDE。问题存在于任何模拟器或真实设备上。

谢谢苏维克

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-05-17T10:47:48.480

**我在GOOGLE IO 2013**之后遇到了这个问题， 当我更新我的**ADT 插件、Android SDK 工具到修订版 22** 和**Android SDK 平台工具到修订版 17**

我以前工作的所有项目在更新后无缘无故地开始抛出 ClassNotFoundException。然后我注意到有一个名为 Android Private Libraries 的新 Android 包，经过数小时的尝试，我找到了解决此问题的方法。

然后右键单击您的项目

转到**构建路径-> 配置构建路径-> 订购和导出**

当您在那里时，您应该检查**Android Private Libraries**，然后单击确定。

如果您仍然遇到问题，请删除 bin 文件夹中的所有文件并重建您的项目。

希望这可以解决您的问题

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-03T07:37:55.453

为确保您的 jar 在构建时实际导出，您应该：

*   把它放在`libs`文件夹里
*   或在项目属性 > Java 构建路径 > 订购和导出选项卡中填写与您的 jar 对应的复选框

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T07:37:46.513

如果您正在使用一些外部库，除了在 Eclipse 中链接之外，不要忘记将它们放在应用程序的“libs”文件夹中。它应该在 /src、/res 等附近。只需 /libs/yourLibrary.jar。

它会告诉编译器（不完全是）将此库包含到您的 APK 中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T08:03:25.410

我有同样的问题。我所做的是：

1.  配置构建路径。
2.  选择订单和导出选项卡，
3.  选择所有列出的路径或 JAR 文件。
4.  试试看！

祝你好运。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-04T19:12:26.943

实际上，我正在导入的库也是一个 Android 项目，我已将其定义为库。在其他项目中，它的工作方式相同。

我的清单如下：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.basicgl10test"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

    <!-- Only Single Touch and OpenGLES less than 2.0 versions used by default -->
    <!-- We will use both multi and single touch handlers by using a class based SDK Version qualifier -->
    <uses-permission android:name="android.permission.WAKE_LOCK"/>
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>

</manifest> 
```

# android - 如何传递 Arraylist 从一项活动到另一项活动？

> ID：12243635
> 
> 赞同：0
> 
> 时间：2012-09-03T07:28:43.340
> 
> 标签：android, serializable, parcelable

我有两个名为“活动 A”和“活动 B”的活动。在我的活动 A 中，我需要传递`Arraylist<BeanClass>`给活动 B。这是活动 A 代码....

```
Arraylist<BeanClass> list;
list.add(new BeanClass(nm, Add, Phn));
Intent i = new Intent(Activity A.this,Activity B.class); 
```

现在如何传递`list`到下一个活动并接收它......

这是一个 BeanClass.java

```
public class BeanClass 
{
    String name,address,phone;

    BeanClass(String name,String address,String phone)
    {

        this.name=name;
        this.address=address;
        this.phone=phone;
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T08:14:36.343

您必须使`BeanClass`课程可序列化。

```
public class BeanClass implements Serializable
{
  //fields
  //constructors
  //setter/getter 
} 
```

准备`List`并通过`Intent.putExtra()`

```
 Intent intent=new Intent(MainActivity.this, NextActivity.class);
 ArrayList<BeanClass> list=new ArrayList<BeanClass>();
 list.add(new BeanClass(nm, Add, Phn));
 ...

 intent.putExtra("list", list); 
 startActivity(intent); 
```

并接收`List`in`NextActivity's onCreate`方法

```
 Intent intent=getIntent();
 ArrayList<BeanClass> list=(ArrayList<BeanClass>)intent.getSerializableExtra("list"); 
```

# ruby-on-rails - 在 after_save_filter 中生成 CSV 时未定义的方法“column_names”

> ID：12243636
> 
> 赞同：2
> 
> 时间：2012-09-03T07:28:43.887
> 
> 标签：ruby-on-rails, csv, after-save

我想在用户创建他的帐户后生成 CSV 文件，所以我`after_save`在模型中创建了过滤器`User`，但我遇到了错误。

这是我的代码：

```
 after_save :to_csv

    def to_csv(options = {})
    require 'csv'
    CSV.generate(options) do |csv|
        csv << self.column_names//also tried User.column_names
        csv << self.attributes.values_at(*column_names)
    end
    end 
```

但是当创建用户时我得到错误：

```
 undefined local variable or method `column_names' for #<User:0x326f778>       
     app/models/user.rb:52:in `block in to_csv'
     app/models/user.rb:50:in `to_csv'
     app/controllers/users_controller.rb:27:in `create' 
```

为什么我得到这个？我正在使用这个 railscast - [http://railscasts.com/episodes/362-exporting-csv-and-excel](http://railscasts.com/episodes/362-exporting-csv-and-excel)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T07:38:57.323

`column_names`是类上的一个方法。你在实例上调用它。如果你真的想要`column_names`然后使用`self.class.column_names`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-03T07:37:30.270

尝试`self.attributes.keys`哪些返回列

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-26T12:20:21.057

玩游戏有点晚了，但就是这样

```
self.attribute_names 
```

为我做这项工作。

# nginx - 使用 aws stack 的多个应用服务器配置 nginx Web 服务器

> ID：12243637
> 
> 赞同：1
> 
> 时间：2012-09-03T07:28:46.757
> 
> 标签：nginx, amazon-ec2, amazon-web-services, webserver

我是一名 DevOps 人员，目前我在 ubuntu ec2 上运行我的 Ruby on Rails 应用程序，其中应用程序和 Web 服务器位于同一个盒子内，但我们使用的是 mysql RDS 集群。由于网站的流量增加，我可以看到很多峰值。所以我打算改变系统。我想将 Web 服务器 nginx 放在一个单独的实例中，并将 Web 应用程序放在一个单独的实例中。但这需要一个负载均衡器，它应该驻留在 nginx 盒子中，但是一旦流量上升，nginx 实例可以配置为自动扩展。应用服务器实例呢？它可以配置为自动扩展，但它需要将自身附加到 Web 服务器，并且 Web 服务器需要发现创建的新应用服务器。怎样才能做到这一点？请帮我完成这件事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T07:53:24.093

当您目前使用单个 Web 服务器时，过渡到使用 nginx 作为静态 Web 服务器和另一个实例上另一个后端 Web 服务器的代理确实很有意义，并且会给您带来性能提升。

但是我不确定你是否真的需要自动缩放。如果您想对快速的流量峰值等做出反应，自动缩放最有意义。如果您的工作负载或多或少可能会随着时间的推移而增加，那么手动启动并在 nginx 配置中添加另一个后端服务器应该更容易。如果这对您不起作用，您仍然可以在之后查看[Amazon 的 Elastic Loadbalancers](http://aws.amazon.com/de/elasticloadbalancing/)和 Autoscaling。

# php - php 在执行长时间运行的脚本时停止工作

> ID：12243638
> 
> 赞同：0
> 
> 时间：2012-09-03T07:29:04.557
> 
> 标签：php, sockets, iis

我有一个长时间执行的 php 脚本，它必须运行几个小时，但需要 10 到 20 分钟。脚本停止生成输出，但页面仍在执行时间。当我刷新页面时，它将继续生成输出。几次刷新后，php 停止生成任何输出。我在脚本中使用套接字，所有超时都设置为 24 小时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T13:49:22.213

前段时间我问过[类似的问题](https://stackoverflow.com/questions/12194187/why-php-script-may-stop)，还是没有得到答案，不过你可以试试看：

*   你的 apache 错误日志
*   您的 php_error 日志文件（将其设置在 php.ini 中，或者仅`ini_set`在代码开头使用）
*   记录您的内存消耗 - 这可能是原因。

# ios - 在拨打电话时获取用户的位置

> ID：12243639
> 
> 赞同：3
> 
> 时间：2012-09-03T07:29:07.187
> 
> 标签：ios, core-location

在拨打电话号码时，我需要在后台获取确切的位置（尽可能准确）（呼叫将通过应用程序进行）。据我从文档中了解到，我可以听到背景位置的重大变化。我想知道重大更新的准确性如何，何时触发。

我需要拨打电话的位置，因为这将是紧急电话。并且在前台收听位置然后拨打电话不是一个好主意，因为这将是紧急情况 - 将立即拨打电话。

是否有解决方案可以在后台获取用户的准确位置？你有什么建议吗？

**编辑：**位置将立即发送到服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T08:48:07.203

难道你不想在你的应用 plist 文件中添加那个标志来请求位置服务在后台模式下运行。

然后在您的应用程序中，当用户按下“呼叫”按钮时，您可以在执行呼叫之前执行正常的 CLLocationManager didUpdateToLocation。

在您的 didUpdateToLocation 方法中，您可以在写入应用程序沙箱库/缓存文件夹的 TXT 文件中记录用户的位置，也可以使用 NSUserDefaults。

注意：我编写了一个应用程序，即使用户按下锁定屏幕，它也会在用户开车时记录他们的 GPS 位置，所以我相信即使应用程序被最小化，您的应用程序也可以将 GPS 坐标写入 TXT 文件，只要当您启动您的位置管理器时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T08:25:40.893

至于准确性，您可以在这些[条件](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/LocationAwarenessPG/CoreLocation/CoreLocation.html)下在后台获得准确的位置：

> 在后台获取位置事件
> 
> 如果您的应用程序需要在前台或后台提供位置更新，则有多种选择。首选选项是使用显着位置更改服务在适当的时间唤醒您的应用程序以处理新事件。但是，如果您的应用程序需要使用标准位置服务，您可以将您的应用程序声明为需要后台位置服务。
> 
> 只有当缺少这些服务会损害其运行能力时，应用程序才应请求后台定位服务。此外，任何请求后台定位服务的应用程序都应该使用这些服务为用户提供切实的好处。例如，逐向导航应用程序可能是后台定位服务的候选者，因为它需要跟踪用户的位置并报告下一次转弯的时间。

至于在通话过程中获取位置，我自己并没有使用它，但是像“ [waze](http://www.waze.com) ”这样的导航应用程序确实会在通话过程中通知转弯和导航事件，所以我猜你问的是可能的。

如果我了解您的需求，您有两种选择：

1.  如果您认为用户将是静态的，那么只需在调用之前获取用户位置即可。或者当您的应用程序在午餐时间拨打紧急电话时更好。

2.  如果用户正在移动，那么您可以“询问”以获取背景位置事件。**即使这样**，您也应该考虑使用“显着更改位置服务”，因为您不需要比用户位置更多的信息。标准的“定位服务”用于导航“转弯”服务。

**最后评论 **

如果您的应用程序是紧急应用程序，您应该阅读上一个链接中的“节省电池电量的提示”。您不希望您的用户电池在跟踪他的位置时耗尽。

# facebook-fql - 在哪里可以获得所有 facebook 流帖子类型的列表？

> ID：12243641
> 
> 赞同：2
> 
> 时间：2012-09-03T07:29:08.847
> 
> 标签：facebook-fql

我可以在这里找到帖子类型[http://developers.facebook.com/docs/reference/fql/stream/](http://developers.facebook.com/docs/reference/fql/stream/)（在字段“类型”的描述中），但它绝对不是完整列表。因为查询

```
SELECT post_id, type, message FROM stream WHERE filter_key in (SELECT filter_key FROM stream_filter WHERE uid=me() AND type='newsfeed') AND is_hidden = 0 
```

返回类型 65、161。我相信还有其他一些帖子类型，此处未记录[http://developers.facebook.com/docs/reference/fql/stream/](http://developers.facebook.com/docs/reference/fql/stream/)。

我在哪里可以获得完整列表？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T09:22:08.557

似乎这是 Facebook 上的一个已知问题。在这个带有错误描述的页面上，您可以找到更多错误代码：

[http://developers.facebook.com/bugs/154511994682996/](http://developers.facebook.com/bugs/154511994682996/)

来自：Osborne Lopes · National Securities Depository Ltd. (NSDL) 助理经理

代码是：

11 - 创建组。
12 - 已创建事件。
46 - 状态更新。
56 - 从另一个用户发布到时间轴。
60 - 更改个人资料图片。
65 - 标记照片。
66 - 已创建注释。
80 - 发布链接（共享照片/链接）。
128 - 视频发布。
161 - 喜欢*。
245 - 喜欢照片/链接*。
247 - 发布照片。
237 - 应用程序/游戏故事。
257 - 已创建评论。
272 - 应用故事。
283 - 喜欢一个链接*。
285 - 签到一个地方。
295 - 从其他朋友发布到朋友的时间线。
308 - 在群组中发帖。
347 - 喜欢一个链接*。
373 - 更新封面照片。

# java - 相互依赖的计算项目

> ID：12243649
> 
> 赞同：-2
> 
> 时间：2012-09-03T07:29:49.310
> 
> 标签：java, database-design, jpa

我想开发一个 java 应用程序，用户应该能够根据彼此添加计算项。考虑这种情况：

*   添加一个具有值的项目（A）让我们说 50
*   添加另一个项目 (B)，即项目 A*5
*   添加项目 (C)，其值为 (A*50%)+B
*   只要在其他项目中使用，删除项目 (A) 就会失败。

当我回忆起使用方程解析器或类似的东西时，我可以将方程作为 varchar 存储在数据库中，并在 java 中将其解析回。但是当我尝试这个时，问题是如果项目 A 被删除了怎么办？如果我使用 varchar，数据库将不知道该项目是否链接到另一个项目。我希望使用外键将项目相互链接，我该如何实现？

抱歉，如果这是一个重复的问题，但我找不到解决我问题的正确答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T08:06:42.533

您可以使用[树 java 结构](http://penguin.ewu.edu/cscd300/Topic/ExpressionTree/index.html)来表示表达式。每个节点将代表一个运算符和 2 个操作数。具体值将在叶级别。计算将是一个简单的按顺序在树上行走。

在数据库中，您将需要表达式（树）的表示，指向其所有组件（树节点）。

（或使用替代表达式树 DB 表示）

```
 EXP1:
        OPERATOR:+
          /    \
         /      \
        /        \
   OPERAND:1   OPERAND:2 
```

数据库

**表达式条目表**：

```
| ID     | NAME    |  DEPENDS_ON_NODE_ID  |
| 1      | EXP1    |  1                   |
| 2      | EXP1    |  2                   |
| 2      | EXP1    |  3                   | 
```

**节点表**：

```
| ID     | NAME     |  TYPE         |  VALUE |
| 1      | NODE1    |  OPERATOR     |   +    |
| 2      | NODE1    |  OPERAND      |   1    |
| 3      | NODE1    |  OPERAND      |   2    | 
```

# android - 从命令行运行 Robotium 测试套件

> ID：12243650
> 
> 赞同：2
> 
> 时间：2012-09-03T07:29:50.330
> 
> 标签：android, shell, robotium

谁能建议我在命令行中运行机器人测试套件的方法。

adb shell am 仪器 -w com.package/android.test.InstrumentationTestRunner

这会运行该包中的所有测试用例，但在我的应用程序中，内部的测试应该按顺序执行。有没有办法从命令行按顺序运行测试套件或单个测试用例？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-31T09:57:08.160

顺序运行测试

```
am instrument -w -e class_name#method name package-name/runner 
```

例如

```
am instrument -w -e class com.example.test.class1#test1 com.example.test/android.test.InstrumentationTestRunner` 
```

参考：http: [//developer.android.com/tools/testing/testing_otheride.html#RunTestsCommand](http://developer.android.com/tools/testing/testing_otheride.html#RunTestsCommand)

您可以尝试以这种方式运行多个测试，但更好的方法是创建一个测试套件，以确保顺序执行（添加测试的顺序）

执行测试套件

```
adb shell am instrument -w -e class class_name package_name/runner 
```

例如

```
adb shell am instrument -w -e class com.example.test.class1 com.example.test/android.test.InstrumentationTestRunner 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-21T17:16:59.247

我注意到在 robotium 中，测试是根据它们的名称按顺序运行的。因此，如果您希望它们按顺序排列，则可以

```
 public void test1*test case 1*
    {..}

    public void test2*test case 2*
    {..} 
```

等等，当然用你想要测试用例调用的内容替换“*”文本。希望这会有所帮助^.^

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T06:04:40.953

如果你的包名是 com.package.test 并且测试类名是 test1，你可以单独运行这个类： adb shell am instrument -e class com.package.test.test1 -w com.package.test/android.test .InstrumentationTestRunner

# tags - 如何使用struts标签迭代器和OGNL实现多行选择

> ID：12243652
> 
> 赞同：0
> 
> 时间：2012-09-03T07:30:06.653
> 
> 标签：tags, iterator, struts, selection, ognl

我想做多行选择。通过strut2标签s：iterator显示行，我怎样才能得到选择信息，它应该包含一个选定的“id”列表

```
<s:form action='Selection'>
<s:iterator value="transInfos"> 
  <input type='hidden' name=id value='<s:property value="id" />' />
  <s:checkbox name="selected"/>
  <s:property value="name" />
</s:iterator>
<s:submit value="Selection" />
</s:form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T13:49:33.940

在我看来，一种选择是在您的表单中创建一个隐藏字段，例如

```
<s:form action="selection">
<input type='hidden' name="selectedId" value=""/>
</s:form> 
```

您可以将点击事件添加到您的复选框，如果它被选中，您可以添加值 ta 变量并在隐藏字段中设置，每个新添加都应该以逗号分隔的方式添加为新值，就像在结尾隐藏字段中一样应该像

```
<input type='hidden' name="selectedId" value="1,2,3,4"/> 
```

提交表单的那一刻，您可以解析表单值并根据分隔符对其进行拆分`","`

另一种选择是将复选框命名为相同的名称，以便在提交时将选中的值作为集合提交，选择权在您手中，您需要决定走哪条路

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T06:45:13.177

我很高兴我能自己回答这个问题。答案很简单。

```
<s:form action="..." >
 <s:iterator value="transInfos">
  <input type="checkbox" name="transIds" value='<s:property value="transID" />'/>
 </s:iterator>                          
 <s:submit value="Select"/>
</s:form> 
```

复选框的值是您要传递给动作的值，所有选中的复选框都会将它们的值作为列表传递给动作。

# php - 查询包含空间时如何使用google place api？

> ID：12243654
> 
> 赞同：0
> 
> 时间：2012-09-03T07:30:19.337
> 
> 标签：php, google-places-api

最近，我尝试使用 google place api 来搜索地点。起初，它运作良好。然后我发现当我传递包含空格的查询时。响应总是错误的请求。但是，当我将查询直接放入浏览器时，它运行良好。这是我的代码，有人可以帮我吗？

```
$url = "https://maps.googleapis.com/maps/api/place/textsearch/json?query=$name&location=$lat,$lng&radius=$raidus&types=restaurant&sensor=false&key=mykey";
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
// Set so curl_exec returns the result instead of outputting it.
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
// Get the response and close the channel.
$response = curl_exec($ch); 
```

例如，如果 $name 是 'restaurant'，它可以工作。但如果 $name 是“餐厅食物”，则表示请求不正确。但是，我将 url 放入浏览器，它又可以工作了。我尝试清理查询参数，但响应仍然表示错误请求。我希望有人可以帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T07:34:30.043

总是在某处传递 URL 时，您应该对其进行编码。这将用 %20 等替换例如空格。所以你的 $name 将是 = restaurant%20food

不用担心谷歌，它会自动解码。

您可以手动对其进行编码，也可以使用如下功能：

```
$query = urlencode($query); 
```

希望能帮助到你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T07:39:07.247

正如其他人所说，您需要使用 PHP 对 URL 参数进行编码`urlencode()`：

```
$url = "https://maps.googleapis.com/maps/api/place/textsearch/json?query=". urlencode($name) ."&location=$lat,$lng&radius=$raidus&types=restaurant&sensor=false&key=mykey";
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
// Set so curl_exec returns the result instead of outputting it.
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
// Get the response and close the channel.
$response = curl_exec($ch); 
```

# ruby-on-rails - 使用现有的 TestUnit 测试和 Simplecov 覆盖运行 RSpec

> ID：12243655
> 
> 赞同：4
> 
> 时间：2012-09-03T07:30:29.010
> 
> 标签：ruby-on-rails, rspec, code-coverage, testunit

我是 ROR 新手，想知道 Simplecov 是否为同一项目中的 TestUnit 和 RSpec 测试提供测试覆盖？

我正在将我们在 RSpec 中编写的一些测试从独立的 webapp 迁移到当前使用 TestUnit 的现有 webapp。

我知道 RSpec 和 TestUnit 都可以存在于同一个项目中，但我无法看到 Simplecov 将如何为这两个测试框架生成覆盖率。

当我在命令行 bundle exec rake spec 上运行时，我得到：

`Coverage report generated for RSpec to /.../coverage. 0 / 0 LOC (0.0%) covered.`

当我运行时，`bundle exec rake test`我会生成测试覆盖率。

计划是将所有内容从 TestUnit 迁移到 rspec，但是对于 400 多个测试，我们希望在迁移到 TestUnit 的同时让 Simplecov 涵盖 TestUnit 和 RSpec 测试。

我确定我的配置中一定有什么不正确的地方

任何帮助将非常感激！

我有以下设置：

--- 耙文件 ---

```
require File.expand_path('../config/application', __FILE__)
require 'rake'
require 'simplecov'

if Rails.env == 'test' || Rails.env == 'development'
  require 'ci/reporter/rake/test_unit'
  require 'ci/reporter/rake/rspec'
end

SimpleCov.start 'rails' do
  add_filter "/test/"
  add_filter "/spec/"
end 
```

-- 规范/spec_helper.rb --

```
ENV["RAILS_ENV"] ||= 'test'

require 'simplecov'
SimpleCov.start 'rails'

require File.expand_path("../../config/environment", __FILE__)
require 'rspec/rails'
require 'rspec/autorun' 
```

-- 测试/test_helper.rb --

```
require 'simplecov'
SimpleCov.start 'rails' do
  add_filter "/vendor/"
end

ENV["RAILS_ENV"] = "test"

require File.expand_path('../../config/environment', __FILE__) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T23:19:34.500

这不能直接回答您的问题，但如果有帮助，我有一个 bash 脚本，它为您完成了从 TestUnit 移植到 RSpec 的大量工作。它位于[https://github.com/Noreaster76/porter](https://github.com/Noreaster76/porter)。您可以使用它来转换您的 TestUnit 文件，并且在稍微清理一下结果之后，您将不会遇到必须同时运行 RSpec 和 TestUnit 的问题。

# c# - 使用 LINQ 的对象层次结构的深度优先扁平化集合

> ID：12243658
> 
> 赞同：4
> 
> 时间：2012-09-03T07:30:44.133
> 
> 标签：c#, linq, hierarchy, depth-first-search, flatten

我有一个对象层次结构（MasterNode -> ChildNodes），其中主节点和子节点属于同一类型，并且只有两个级别（顶级和子级）像这样（'A' 是 D、E 和 F 的父级，' B' 是 G 的父级，等等）

```
A--+
|  D
|  E
|  F
|
B--+
|  G
|
C--+
   H
   I 
```

假设我有一个**MasterNodes**作为父对象（A，B，C）的 IEnumerable，并且给定一个父对象**X**，我可以通过**X.children获得其子对象的 IEnumerable**

我知道我可以使用**SelectMany**方法或使用枚举所有叶子（子节点）

```
from parent in Masternodes
from child in parent.children
select child 
```

这会给我这个序列：

```
[D,E,F,G,H,I] 
```

，但这不是我要的。

**获取 MasterNodes 集合中对象的深度优先序列的 LINQ 查询是什么？**（返回第一个父母，然后是它的所有孩子，然后是下一个父母，然后是它的所有孩子等等）

预期的结果应该是这样的序列：

```
[A,D,E,F,B,G,C,H,I] 
```

**更新**：

我要求纯 .NET 就绪的 LINQ。我知道我可以定义自己的方法来做事，但我想要一些仅基于框架提供的方法的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T07:51:01.817

如果你有像下面这样的课程

```
public class Node
{
    public string Name;
    public List<Node> Children = new List<Node>();
} 
```

你的 linq 将是

```
 Func<IEnumerable<Node>, IEnumerable<Node>> Flatten = null;
 Flatten = coll => coll.SelectMany(n=>n.Concat(Flatten(n.Children))); 
```

测试代码：

```
Node[] roots = new Node[]{ new Node(){Name="A"},new Node(){Name="B"},new Node(){Name="C"} };
roots[0].Children.Add(new Node(){Name="D"});
roots[0].Children.Add(new Node(){Name="E"});
roots[0].Children.Add(new Node(){Name="F"});

roots[1].Children.Add(new Node(){Name="G"});

roots[2].Children.Add(new Node(){Name="H"});
roots[2].Children.Add(new Node(){Name="I"});

Func<IEnumerable<Node>, IEnumerable<Node>> Flatten = null;
Flatten = coll => coll.SelectMany(n=>n.Concat(Flatten(n.Children)));

var result = String.Join(",",Flatten(roots).Select(x=>x.Name));

Console.WriteLine(result); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-03-01T09:09:42.430

如果您需要两个以上的层次结构级别，您可以使用以下扩展方法递归地遍历您的对象图：

```
public static IEnumerable<T> Flat<T>(this IEnumerable<T> l, Func<T, IEnumerable<T>> f) =>
        l.SelectMany(i => new T[] { i }.Concat(f(i).Flat(f))); 
```

`IEnumerable<T>`它使用将 a 映射`T`到`IEnumerable<T>`描述数据的父 -> 子关系的函数来扁平化给定值。

深度优先展平是通过将每个元素与其子树连接起来，然后将它们与`SelectMany`.

你可以像这样使用它：

```
var flattened = Masternodes.Flat(c => c.children); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-03T07:55:27.260

由于您只有两个级别，因此以下方法应该有效：

```
var result = (from parent in masternodes
              select new Node[] { parent }.Concat(parent.children)).SelectMany(i => i); 
```

首先，它创建了父级及其子级的枚举：

```
[A, D, E, F]
[B, G]
[C, H] 
```

然后用`SelectMany`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T07:41:22.487

说，我们有以下类：

```
public class MasterNode : ChildNode
{
    public List<ChildNode> ChildNodes;
}

public class ChildNode
{
    public string Value;
} 
```

然后

```
 List<MasterNode> list = new List<MasterNode>
        {
            new MasterNode
            {
                Value="A", 
                ChildNodes = new List<ChildNode>
                {
                    new ChildNode{Value = "D"},
                    new ChildNode{Value = "E"},
                    new ChildNode{Value = "F"}
                }
            },
            new MasterNode
            {
                Value="B", 
                ChildNodes = new List<ChildNode>
                {                        
                    new ChildNode{Value = "G"}
                }
            },
            new MasterNode
            {
                Value="C", 
                ChildNodes = new List<ChildNode>
                {
                    new ChildNode{Value = "H"},
                    new ChildNode{Value = "I"}
                }
            }
        };

        foreach (ChildNode c in list.SelectMany(l =>
                                {
                                   List<ChildNode> result = l.ChildNodes.ToList();
                                   result.Insert(0, l);
                                   return result;
                                }))
        {
            Console.WriteLine(c.Value);
        } 
```

# javascript - Javascript：在 jQuery 中使用 xpath

> ID：12243661
> 
> 赞同：17
> 
> 时间：2012-09-03T07:30:57.760
> 
> 标签：javascript, jquery, xpath

例如，我有下一个 XPath 查询：

```
//div[span="something"]/parent::div/child::div[@class=\"someClass\"] 
```

我想在 JavaScript 中使用这个 XPath 查询：

```
return $("a:contains('Fruits')").mouseover(); 
```

我试过这个：

```
return $("div[span=\"something\"]/parent::div/child::div[@class=\"someClass\"]").mouseover(); 
```

但它没有用。XPath 查询是否有另一种语义以便在 JavaScript 中使用它们？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-12-10T13:32:24.060

您可以将现有 XPath 评估的结果添加到 jQuery 选择中，我将这个 jquery 扩展拼凑在一起，它似乎为您完成了所有工作。

示例用法：

```
$(document).xpathEvaluate('//body/div').remove() 
```

这是加载项。

```
$.fn.xpathEvaluate = function (xpathExpression) {
   // NOTE: vars not declared local for debug purposes
   $this = this.first(); // Don't make me deal with multiples before coffee

   // Evaluate xpath and retrieve matching nodes
   xpathResult = this[0].evaluate(xpathExpression, this[0], null, XPathResult.ORDERED_NODE_ITERATOR_TYPE, null);

   result = [];
   while (elem = xpathResult.iterateNext()) {
      result.push(elem);
   }

   $result = jQuery([]).pushStack( result );
   return $result;
} 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-09-03T08:00:26.677

您可以将 xpath 查询重写为 CSS 选择器：

```
$('div:has(> div > span:contains(something)) > div.someClass'); 
```

`parent::`您可以达到与使用`:has`pseduo 选择器根据其子元素选择元素相同的效果：`div.foo:has(> div.bar)`将选择所有具有 class且具有 class子`div`元素的元素。这相当于。`foo``div``bar``div[@class="bar"]/parent::div[@class="foo"]`

看：

*   [jQuery API：选择器](http://api.jquery.com/category/selectors/)
*   [嘶嘶作响的文档](https://github.com/jquery/sizzle/wiki/Sizzle-Documentation)

您可能可以使用[jQuery 的 DOM 遍历方法的](http://api.jquery.com/category/traversing/)各种组合以其他几种方式来解决此问题。例如，这将是您的 xpath 查询的非常直接的翻译：

```
$('div:has(> span:contains(something))')  // //div[span="something"]
    .parent('div')                        // /parent::div
    .children('div.someClass');           // /child::div[@class="someClass"] 
```

值得注意的是，`div.someClass`在 CSS 中并不完全等同于`div[@class="someClass"]`在 xpath 中。CSS 会匹配`<div class='foo someClass bar'>`，但 xpath 不会。有关更多详细信息，请参阅[Brian Suda 关于使用 XSLT 解析微格式的文章。](http://www.xml.com/pub/a/2007/09/04/parsing-microformats.html?page=2)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-07T19:32:34.377

[作为Wicked Good XPath](https://github.com/google/wicked-good-xpath)的合著者，我当然推荐它用于跨浏览器 XPath 支持（在 HTML 文档上，您可以尝试将它与 XML 文档一起使用，但支持不完整）。

我们欢迎对我们的库进行任何类型的正确性测试/性能基准测试。在开发过程中，该库已在 IE 7 到 10 以及不支持原生 XPath 的 Android 2.2 浏览器上进行了测试。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-03T07:51:34.443

据我所知，没有跨浏览器实现。有一个用于 jQuery 的[xpath 插件](http://archive.plugins.jquery.com/project/xpath)，它说仍在开发中。

除此之外，还有一个由 Google 编写的 DOM Level 3 XPath 规范的纯 JavaScript 实现，称为[wicked-good-xpath](https://github.com/google/wicked-good-xpath)，这很好。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-08-24T18:15:02.543

如果要从父窗口中选择 iframe 内的元素，则应将 evaulate() 函数的第二个参数更改为 iframe 的文档元素，例如：

```
var iFrameDocument = $('iframe#myPage').get(0).contentWindow.document;
xpathResult = this[0].evaluate(xpathExpression, iFrameDocument, null, XPathResult.ORDERED_NODE_ITERATOR_TYPE, null); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-03T07:42:42.727

我不确定该`parent::div`子句，但如果没有它，它应该如下所示：

```
$('div[span="something"] div.someClass'); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-03T07:41:46.683

从这里阅读有关该`evaluate`方法的信息： [https ://developer.mozilla.org/en-US/docs/Introduction_to_using_XPath_in_JavaScript](https://developer.mozilla.org/en-US/docs/Introduction_to_using_XPath_in_JavaScript)

```
var xpathResult = document.evaluate( xpathExpression, contextNode, namespaceResolver, resultType, result ); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-03T07:43:41.087

jQuery 对 XPath 的支持有限。您可以在此处查看它所支持的内容：http: [//docs.jquery.com/DOM/Traversing/Selectors#XPath_Selectors](http://docs.jquery.com/DOM/Traversing/Selectors#XPath_Selectors)

正如@Ameoo 所提到的，您可以使用在大多数现代浏览器中都可用的评估方法 - 除了可以预见的 IE： [jquery select element by xpath](https://stackoverflow.com/questions/6453269/jquery-select-element-by-xpath)

# vbscript - 如何在目录中的所有文件上运行 VB 脚本？

> ID：12243663
> 
> 赞同：0
> 
> 时间：2012-09-03T07:31:15.380
> 
> 标签：vbscript, batch-file

我想在目录中的所有文件上运行一个名为“cscript”的 Visual Basic 脚本，而不是一次运行一个文件。这可能吗？

手动的，一次一个的命令是：

```
cscript "C:\Program Files\Jampal\ptts.vbs" -w sample.wav < sample.txt 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T20:51:01.610

您可以从命令行使用简单的单行程序，而无需任何批处理脚本。

我不知道您的 VB 脚本是创建 .wav 文件还是使用该文件。

如果您的脚本创建 .wav 文件，则：

```
for %F in (*.txt) do cscript "C:\Program Files\Jampal\ptts.vbs" -w "%~dpnF.wav" <"%F" 
```

如果您的脚本需要 .txt 和 .wav 文件，那么您应该在尝试处理之前验证两者都存在：

```
for %F in (*.txt) do if exist "%~dpnF.wav" cscript "C:\Program Files\Jampal\ptts.vbs" -w "%~dpnF.wav" <"%F" 
```

# jquery - 如何验证 Zend_Form？

> ID：12243668
> 
> 赞同：2
> 
> 时间：2012-09-03T07:31:41.583
> 
> 标签：jquery, zend-framework, validation, zend-form

首先，我尝试在 stackoverflow 上搜索类似的主题。我知道一些类似的帖子被关闭了，因为已经有回复的帖子，我真的觉得它没有帮助（这里：[zend form validation](https://stackoverflow.com/questions/5457027/zend-form-validation)，也许我不够聪明），所以请管理员，允许这个帖子呆一会儿>**

就我而言，首先我在控制器中声明表单：

```
 $this->_helper->layout->disableLayout();
    $form = new Zend_Form();
    $form->setAction('/user/login')
         ->setMethod('post');

    // Create and configure username element:
    $username = $form->createElement('text', 'username');
    $username->addValidator('alnum')
             ->addValidator('regex', false, array('/^[a-z]+/'))
             ->addValidator('stringLength', false, array(6, 20))
             ->setRequired(true)
             ->addFilter('StringToLower');

    // Create and configure password element:
    $password = $form->createElement('password', 'password');
    $password->addValidator('StringLength', false, array(6))
             ->setRequired(true);

    // Add elements to form:
    $form->addElement($username)
         ->addElement($password)
         // use addElement() as a factory to create 'Login' button:
         ->addElement('submit', 'login', array('label' => 'Login')); 
```

然后我在我的视图文件中输出：

```
<?php echo  $this->testForm;?> 
```

我们发现了一些非常酷的用于表单验证器的 Jquery 插件，但我看不出它是如何与 Zend Form 中的代码集成的。我尝试引用 Zendx_Jquery，似乎它甚至不包含表单验证选项。

任何人都可以撕碎灯吗？谢谢。

**PS, you might find in my code I already I have some params for validations, that's not what I want, all I want for front-end using some jquery plugin for real-time input validation.**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T07:54:18.663

To add jQuery validation you can add some decorators to form, example :

```
 $form->setName('postForm');
    $form->setMethod('post');
    $form->addDecorator('HtmlTag', array('tag' => 'div', 'class' => 'my-lovely-form'));
    $form->setAttrib('enctype', 'multipart/form-data'); 
```

Then you do jQuery validation in `View.phtml` example:

```
$('#postForm').validate({
            submitHandler: function(form) {
                $("#submit").attr('disabled', 'disabled');
                form.submit();
            },
            onchange: true,         
            errorLabelContainer: $('.error-container'),
            wrapper: "p",
            rules: {
                name: {
                    required: true,
                    minlength: <?php echo $this->validationConfig->form->name->minlength; ?>,
                    maxlength: <?php echo $this->validationConfig->form->name->maxlength; ?>
                },
                title: {
                    required: true,
                    minlength: <?php echo $this->validationConfig->form->title->minlength; ?>,
                    maxlength: <?php echo $this->validationConfig->form->title->maxlength; ?>
                }
            },
            messages: {
                name: {
                    required: "Full name is required",
                    minlength: "Full name has to be at least <?php echo $this->validationConfig->form->name->minlength; ?> characters long",
                    maxlength: "Full name has to be less than <?php echo $this->validationConfig->form->name->maxlength; ?> characters long"
                },
                title: {
                    required: "Title is required",
                    minlength: "Title has to be at least <?php echo $this->validationConfig->form->title->minlength; ?> characters long",
                    maxlength: "Title has to be less than <?php echo $this->validationConfig->form->title->maxlength; ?> characters long"
                }
            }
        }); 
```

I hope this can help you.

# java - Java-方法同步

> ID：12243672
> 
> 赞同：2
> 
> 时间：2012-09-03T07:31:54.767
> 
> 标签：java, methods, synchronization

```
import java.util.logging.Level;
import java.util.logging.Logger;

public class test {

    private static void m1(final String a) {
        Thread t1 = new Thread(new Runnable() {

                @Override
                public void run() {
                    try {
                        Thread.sleep(1000);
                        System.out.print(a);
                    } catch (InterruptedException ex) {
                        Logger.getLogger(test.class.getName()).log(Level.SEVERE,
                                                                   null, ex);
                    }
                }
            });
        t1.start();
    }

    private static void m2(final String a) {
        Thread t2 = new Thread(new Runnable() {

                @Override
                public void run() {
                    try {
                        Thread.sleep(1000);
                        System.out.print(" " + a);
                    } catch (InterruptedException ex) {
                        Logger.getLogger(test.class.getName()).log(Level.SEVERE,
                                                                   null, ex);
                    }
                }
            });
        t2.start();
    }

    public static void main(String[] args) {
        for (int i = 0; i < 10; i++) {
            m1("Mihi");
            m2("Cherub");
            System.out.println("");
        }
    }
} 
```

我想像 MihiCherub MihiCherub 同样输出 10 次

但现在我的输出是“MihiMihi Cherub CherubMihi CherubMihiMih”。我想同步我的两种方法，并希望得到 mihicherub 的结果。请帮忙..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T07:37:09.857

如果要同步行为，最好的办法是使用一个线程。

线程是为相对独立的任务而设计的，越独立越好。

你可以通过同步、等待和通知来做你想做的事，但这会相对复杂（而且毫无意义）

在您的情况下，`println("")`将在任何其他 print() 之前执行。这是故意的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T10:00:34.877

使用`CountDownLatch`你可以实现这一点，但它不是一种有效的方法。我已将您的代码修改如下。

```
import java.util.concurrent.CountDownLatch;
import java.util.logging.Level;
import java.util.logging.Logger;

public class test {

private static void m1(final String a, final CountDownLatch sharedCountDownLatch,
        final CountDownLatch masterCountDownLatch,
        final CountDownLatch doneCountDownLatch) {
    Thread t1 = new Thread(new Runnable() {

        @Override
        public void run() {
            try {
                sharedCountDownLatch.countDown();
                sharedCountDownLatch.await();
                System.out.print(a);
                masterCountDownLatch.countDown();

            } catch (InterruptedException ex) {
                Logger.getLogger(test.class.getName()).log(Level.SEVERE,
                        null, ex);
            } finally {
                doneCountDownLatch.countDown();
            }
        }
    });
    t1.start();
}

private static void m2(final String a, final CountDownLatch sharedCountDownLatch,
        final CountDownLatch masterCountDownLatch,
        final CountDownLatch doneCountDownLatch) {
    Thread t2 = new Thread(new Runnable() {

        @Override
        public void run() {
            try {
                sharedCountDownLatch.countDown();
                sharedCountDownLatch.await();
                masterCountDownLatch.await();
                System.out.print(" " + a + " ");
            } catch (InterruptedException ex) {
                Logger.getLogger(test.class.getName()).log(Level.SEVERE,
                        null, ex);
            } finally {
                doneCountDownLatch.countDown();
            }
        }
    });
    t2.start();
}

public static void main(String[] args) throws InterruptedException {
    for (int i = 0; i < 10; i++) {
        CountDownLatch doneCountDownLatch = new CountDownLatch(2);//CountDownLatch which will be to ensure that both threads executed.
        CountDownLatch sharedCountDownLatch = new CountDownLatch(2);//CountDownLatch that will be shared between both threads so that it will ensure that both threads are at the same execution point 
        CountDownLatch masterCountDownLatch = new CountDownLatch(1);//CountDownLatch which will be used when master thread completes it work
        m1("Mihi", sharedCountDownLatch, masterCountDownLatch,
                doneCountDownLatch);
        m2("Cherub", sharedCountDownLatch, masterCountDownLatch,
                doneCountDownLatch);
        System.out.println("");
        doneCountDownLatch.await();
    }
}
} 
```

输出为：

```
Mihi Cherub 
Mihi Cherub 
Mihi Cherub 
Mihi Cherub 
Mihi Cherub 
Mihi Cherub 
Mihi Cherub 
Mihi Cherub 
Mihi Cherub 
Mihi Cherub 
```

# delphi - 使用 Hudson 构建时“找不到所需的包 rtl”

> ID：12243673
> 
> 赞同：7
> 
> 时间：2012-09-03T07:32:00.130
> 
> 标签：delphi, continuous-integration, hudson, delphi-xe

我正试图让[Hudson](http://hudson-ci.org/)与我的 Delphi 项目合作。我正在使用以下批处理文件来构建我的项目（如本[博](http://christerblog.wordpress.com/2010/04/25/using-hudson-to-build-delphi-projects/)文中所建议的那样）：

```
call "C:\Program Files\Embarcadero\RAD Studio\8.0\bin\rsvars.bat"
msbuild /p:Win32LibraryPath="$(BDS)\lib;$(BDS)\lib\win32\release;$(BDS)\lib\win32\debug;$(BDSUSERDIR)\Imports;$(BDS)\Imports;$(BDSCOMMONDIR)\Dcp;$(BDS)\include;" /t:build /p:config=Debug /verbosity:detailed "MyProject\src\MyProject.dproj"
if errorlevel 1 exit 1 
```

我总是以错误告终

```
Embarcadero Delphi for Win32 compiler version 22.0
Copyright (c) 1983,2010 Embarcadero Technologies, Inc.
Fatal: E2202 Required package 'rtl' not found 
```

我不明白这`rtl.dcp`是在库路径上的“$(BDS)\lib\win32\release”中。顺便说一句，我正在使用运行时包。

任何提示我可以做些什么来解决这个问题？

**编辑**似乎路径并没有在命令行中结束，它看起来像（在删除特定于项目的路径之后）：

```
C:\Program Files\Embarcadero\RAD Studio\8.0\bin\dcc32.exe -$O- -$W+ --inline:off -$A4 -$R+ -$Q+ --doc --no-config -B -LUrtl;vcl;ReportingR;ComponentsR -Q -AWinTypes=Windows;WinProcs=Windows;DbiTypes=BDE;DbiProcs=BDE;DbiErrs=BDE -DDEBUG;CONSTRAINT_CHECKING;_VER6;EUREKALOG_VER6;EurekaLog -V -VN -GD --drc -W-SYMBOL_DEPRECATED -W-SYMBOL_PLATFORM -W-UNIT_PLATFORM -W-UNIT_DEPRECATED   Myproject.dpr 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-03T09:38:58.450

我在对原始博客文章的评论中找到了答案。事实证明，在 Delphi XE 中，他们将`Win32LibraryPath`属性名称更改为`DelphiWin32LibraryPath`. 相应地更改批处理脚本可以解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-08-23T06:52:04.670

XE、XE2 和 XE 10.2 的第一个路径 $(BDS)\Lib 应更改为 $(BDSLIB)\$(PLATFORM)\release

# php - SimplePie Rss 合并到 rss 输出帮助：[

> ID：12243675
> 
> 赞同：0
> 
> 时间：2012-09-03T07:32:18.263
> 
> 标签：php, xml, simplepie

[http://pastebin.com/3wAphNpT](http://pastebin.com/3wAphNpT)

[http://cal5not.dyndns.tv:8080/DEV/transmission/test4.php](http://cal5not.dyndns.tv:8080/DEV/transmission/test4.php)

上面链接的是我的 simplepie 脚本，创建的目的是为了将 `rss feeds`内容合并然后导出为`rss`. 不幸的是，我似乎无法摆脱 xml 错误。任何帮助将不胜感激 **更新** 确定这与 guid 字段有关现在我只需要弄清楚如何在循环中正确显示 guid

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T01:11:32.583

[我这样做了](http://blog.muschamp.ca/2012/04/27/merging-feeds-with-simplepie-and-php/)，记录了它，并与 SimplePie 开发人员共享。它在我的网站上实时运行没有问题...

# mysql - 通过 ODBC 从 SSRS 调用 MySQL 存储过程

> ID：12243679
> 
> 赞同：2
> 
> 时间：2012-09-03T07:32:32.197
> 
> 标签：mysql, stored-procedures, reporting-services, odbc, ssrs-2008

我正在尝试调用一个存储过程，该过程在 Mysql 上从`ssrs`. 通过连接`ODBC`。我使用以下语法调用 using `query designer`：

```
`CALL test.ClientSelectExtract(?)` 
```

而且我收到以下错误。

```
`SQLBindParameter not used for all parameters` 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-26T06:48:47.380

我找到了解决方案。从一篇文章中读到 MySql ODBC 不支持命名参数。所以我像这样调用存储过程
`CALL test.ClientSelectExtract(?)`
在参数文件夹中添加了一个名为 parameter1 的参数，然后设置类型和值，然后显式创建一个名为 parameter1 的参数来引用？也在数据集上，然后一切正常。

注意：如果我有更多？占位符下一个参数将是参数2，相同的步骤等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-24T18:29:35.800

您应该从 MYSQL 在 SSMS 中创建链接服务器，然后我们才会调用存储过程。调用存储过程的语法：

EXEC ('CALL GASP_sales_aps(?, ?)', @dt_start, @dt_end)AT MySQL(链接服务器名称)

GASP_sales_aps ---->程序名称

(@dt_start,@dt_end)------> 是参数。

# plugins - Vim 选项卡映射不起作用

> ID：12243680
> 
> 赞同：1
> 
> 时间：2012-09-03T07:32:54.970
> 
> 标签：plugins, vim

在我的**vimrc**中，我在可视模式、普通模式下将选项卡映射到 %，我认为命令模式与

```
:map <tab> %
"colon necessary 
```

这样当我点击制表符时，它就充当 %. 一切正常，除了在视觉模式下，如果我点击选项卡而不是跳转到匹配的对，它只会删除视觉上选择的任何内容。在正常和命令模式下，这不会发生。

即使我使用

```
vmap <tab> % 
```

在我的 vimrc 中它仍然不起作用。但是当我在编辑文件时手动设置它时

```
:vmap <tab> % 
```

然后 tab 就像它应该的那样充当 % 。

顺便说一句，我有 supertab 和 snipmate。但即使问题出在插件上，我也不明白为什么在我的 vimrc 中设置选项卡时手动设置选项卡不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T09:03:05.567

如果您确定覆盖默认映射不会损害您使用其他插件的方式（在您的情况下为 snipMate；我认为`%`映射不是核心映射，只是为了避免某些极端情况可能会破坏它） ，您可以注释掉原始映射（`~/.vim/after/plugin/SnipMate.vim`，在您的情况下），或者（推荐，因为它使原始插件保持不变）：

创建一个文件`~/.vim/after/plugin/zzzmappings.vim`并将您的`vmap`映射放在那里。`.../after/`以及`zzz`前缀部分确保这是最后一个来源，因此覆盖了之前定义的所有内容。（`.vimrc`相比之下，您的 是在任何插件*之前获取的。）*

# mongodb - MongoDB 支持 ACID 到什么级别？

> ID：12243683
> 
> 赞同：0
> 
> 时间：2012-09-03T07:33:03.440
> 
> 标签：mongodb, acid

MongoDB 不是关系数据库，产品也不遵循关系架构。但是对于来自 RDBMS 世界的人，我想知道 MongoDB 在多大程度上支持 ACID（原子性、一致性、隔离性、持久性）。还是我们不应该从 ACID 的角度评估 MongoDB？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T07:37:16.967

我多么喜欢文档：[http](http://docs.mongodb.org/manual/faq/fundamentals/#does-mongodb-support-transactions) ://docs.mongodb.org/manual/faq/fundamentals/#does-mongodb-support-transactions和这个网站：[MongoDB 不符合 ACID 的真正含义是什么？](https://stackoverflow.com/questions/7149890/what-does-mongodb-not-being-acid-compliant-really-mean)

在 MongoDB 中有多种方法支持事务，`go`驱动程序现在甚至内置了事务查询。

这是一个两阶段提交的简短示例：http: [//cookbook.mongodb.org/patterns/perform-two-phase-commits/](http://cookbook.mongodb.org/patterns/perform-two-phase-commits/)更复杂的查询需要更多的工作。

基本上，MongoDB 的 ACID 合规性的含义可以通过文档页面和这个问题来解释。

它可能是 MongoDB 中谈论最多的主题之一，快速的 Google 搜索将为您提供比我们在此处的答案中提供的更多信息。

# php - 如何生成耶稣出生年份的日历？

> ID：12243684
> 
> 赞同：2
> 
> 时间：2012-09-03T07:33:15.413
> 
> 标签：php, codeigniter

我写的

```
$this->calendar->generate(1,1) 
```

显示日历，但返回为 2001, 1

我错过了什么？

# eclipse - 主题化 Eclipse Indigo

> ID：12243687
> 
> 赞同：9
> 
> 时间：2012-09-03T07:33:29.337
> 
> 标签：eclipse, themes

我曾尝试在 Eclipse 4.2 (Juno) 上使用[Eclipse E4 ，它运行良好。](http://wiki.eclipse.org/E4)我试过在这个[链接](https://github.com/eclipse-color-theme/eclipse-ui-themes)`Dark Theme`上使用Github 提供的，但只是错过了变暗最小化视图和菜单栏。此外，我尝试使用[Eclipse Color Theme](http://eclipsecolorthemes.org/)来查看我的编辑器。但这不是真正的问题。`Sublime Text`

虽然 Eclipse 4.2 (Juno) 支持主题化，但我们有没有办法在 Eclipse 3.7 (Indigo) 上安装类似于[Eclipse E4的软件？](http://wiki.eclipse.org/E4)（[Eclipse 颜色主题](http://eclipsecolorthemes.org/)除外）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-03T11:20:29.867

对我来说这个插件很棒： [https](https://github.com/jeeeyul/eclipse-themes) ://github.com/jeeeyul/eclipse-themes （对于 eclipse 4.2+）

安装后转到*Pereferences → General → Appearance*并在下拉菜单中选择*Jeeeyul 的主题*。

然后转到*Pereferences → General → Appearance → Chrome Theme*并根据您的需要进行调整。

在这个面板的右上角，你也可以选择“预设”，但是黑暗主题没有很好的，所以我自己做了。

好像没有导入导出，但是如果你想试试我的，把这个文件复制到./configuration/net.jeeeyul.eclipse.themes/user-presets.xml

并在“用户的预设”中选择它作为 dev_pool

文件：[https ://dl.dropboxusercontent.com/u/60080800/user-presets.xml](https://dl.dropboxusercontent.com/u/60080800/user-presets.xml)

它看起来像这样：

![在此处输入图像描述](../Images/32172f3888c57fb69eeb8023b159b3ad.png)

# php - for循环中的正则表达式

> ID：12243689
> 
> 赞同：0
> 
> 时间：2012-09-03T07:33:35.563
> 
> 标签：php, expression

我有一个这样的字符串：

```
1\. Zentrallager # TF Schrankwandp (u) -EG- 2\. ASH 25 # TF silentglider (u) WS 3\. Gutinedu # TF ottomatic 4\. Deep Space Three # TF Kleissi1978 F & P 5\. crafted by trapper12 # TF trapper12 VR 6\. -8- # TF Mrs-Shooter (u) -=SC=- 7\. 8\. Standard Libelle # TF silentglider (u) WS 9\. crafted by phiLLLdd # TF phiLLLdd -=SC=- 10\. V8 Vote111 (u) 3R 11\. Nimbus # TF silentglider (u) WS 12\. Speed Astir # TF silentglider (u) WS 13\. I Want My Tears Back # TF KlappstuhI (u) ReX 14\. RK-Weporinag # TF ImperatorMar (gu) -=SC=- 15\. RK-Hohoieugo # TF -sledge- (gu) > TdE < 16\. Oununu # TF Xantros 
```

我需要“1”之间的值。和“2”。和“2”。和“3”。…………

我的尝试看起来像这样：

```
for($i=1;$i<16;$i++){ // I know there are ever 16 counts
     $j = $i+1;
     $regex = "/$i\. (.*) $j\./";
     preg_match_all($regex, strval($string),$matches);} 
```

我的结果每次都是空的。匹配数为 0。为什么？

该变量绝对是一个字符串，并且正则表达式在一些在线测试人员中是有效的，但在我的脚本中却不是。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T07:44:20.720

怎么样：

```
$arr=preg_split ("/[\d|\d\d]\./", $yourstring) 
```

现在 $arr[n] 将包含字符串的 n+1 部分

# ruby-on-rails - 收到错误“超出可用参数键空间”？

> ID：12243694
> 
> 赞同：11
> 
> 时间：2012-09-03T07:34:11.583
> 
> 标签：ruby-on-rails, ruby

在我的 rails 应用程序中，表单发布后，出现错误`exceeded available parameter key space`。表单内的表单字段太多。这是错误的原因吗？有什么看法吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-03T07:41:22.957

如果您真的非常需要它，请尝试增加`key_space_limit`

```
Rack::Utils.key_space_limit = 262144 
```

但这可能是危险的，因为根据“[对](https://github.com/rack/rack/issues/318)POST 解析 DOS 攻击的更高风险”。

检查这个

[https://github.com/rack/rack/issues/318](https://github.com/rack/rack/issues/318)

[Rails / javascript：“参数键太多” - 规范化表单数据的好方法是什么？](https://stackoverflow.com/questions/9122411/rails-javascript-too-many-parameter-keys-whats-a-good-way-to-normalize-f)

[http://myrailsway.blogspot.in/2012/04/rangeerror-exceeded-available-parameter.html](http://myrailsway.blogspot.in/2012/04/rangeerror-exceeded-available-parameter.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T07:41:52.830

如果您指定了 POST 以外的提交方法（例如`method: :get`），您可能必须让表单提交 POST 请求。

# asp.net-mvc - MVC 网站在仅启用 Windows 身份验证的情况下转发到 /Account/Login

> ID：12243699
> 
> 赞同：14
> 
> 时间：2012-09-03T07:34:39.597
> 
> 标签：asp.net-mvc, windows-authentication

我有一个 MVC3 网站，仅启用了 Windows 身份验证（因此匿名和表单被禁用）。每当我尝试点击默认页面时，都会有一些东西将我转发到这个 URL；

> .../MyApp/Account/Login?ReturnUrl=%2fMyApp%2f

我得到一个错误；

> 无法找到该资源。说明：HTTP 404。您要查找的资源（或其依赖项之一）可能已被删除、名称已更改或暂时不可用。请查看以下 URL 并确保其拼写正确。
> 
> 请求的 URL：/MyApp/Account/Login

我的 web.config 中没有任何内容被配置为查找此 URL，但是我删除了有关使用表单身份验证的部分；

```
<authentication mode="Forms">
    <forms loginUrl="~/Account/LogOn" timeout="2880" />
</authentication> 
```

我应该重新配置此设置而不是彻底删除它吗？我尝试添加它；

```
<authentication mode="Windows"></authentication> 
```

但它仍然转发回同一个地方。我应该在这里做些什么额外的事情吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-18T14:16:46.897

好的，所以我遇到了以下文章：[http ://martinnormark.com/asp-net-mvc-3-windows-authentication-problem-redirects-to-account-login](http://martinnormark.com/asp-net-mvc-3-windows-authentication-problem-redirects-to-account-login)

然后，我在应用程序设置部分的 web.config 中添加了以下键：

```
<add key="autoFormsAuthentication" value="false" />
<add key="enableSimpleMembership" value="false"/> 
```

这解决了我的问题 - Windows 身份验证现在按预期工作，并且不再重定向到不存在的登录页面。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-13T12:40:27.397

当我们以前看到这个时；它与此身份验证问题有关，但任何解决方案均未解决

[将 css/script 重定向到带有 HTTP 302 的登录页面的表单身份验证](https://stackoverflow.com/questions/6304547/forms-auth-redirecting-css-script-includes-to-the-login-page-with-http-302/6304624#6304624)

我们的问题只是有一个额外的文件夹，其中包含复制到 bin 目录的 dll，而该文件夹不应该包含在部署中。手动删除 bin 和 obj 目录并在为我们清除它之后重建 Web 应用程序。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-18T14:19:34.250

检查您是否有对`WebMatrix.Data.dll`和`WebMatrix.WebData.dll`文件的引用，并尝试删除它们的引用。

如果您通过 添加引用`Add Deployable Dependencies`，也从`_bin_deployableAssemblies`文件夹中删除。

# ektron - 无法在 Ektron CMS 的 iframe 中显示页面

> ID：12243706
> 
> 赞同：2
> 
> 时间：2012-09-03T07:35:00.570
> 
> 标签：ektron

我正在使用 Ektron 8.6.0.060 CMS，在管理仪表板上添加了一个自定义小部件，在其中我为内容页面调用 iframe，在从 iframe 中选择 URL 时，出现 404 page not found 错误。所有 URL 和标志都正确使用，但仍会出现错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T18:56:31.253

确保您在 IFrame 中输入了完全限定的域名。除非您对路径非常小心，否则相对位置可能不正确。确保包含您的协议，而不是“/page/item.aspx”或“www.site.com/page/item.aspx”，例如“http://www.site.com/page/item.aspx”。如果您是动态生成此 url，则特别容易忘记这一点。

此外，如果您指向 ektron 内容，请确保内容已发布并公开。

# c# - 显示数据集中的数据？

> ID：12243707
> 
> 赞同：2
> 
> 时间：2012-09-03T07:35:19.017
> 
> 标签：c#, web-services, dataset

我正在尝试查看 a 中的数据`Dataset`，我不介意它是什么视图，我可以将其打印在 a 中`text file`或显示在 a`Datagrid`我只是想发现里面有什么。我正在测试一个 Web 服务以查看它是否返回结果并且我让它返回一个`Dataset`.

```
ServiceReference1.PropertiesSoapClient ws1 = new ServiceReference1.PropertiesSoapClient();
            ws1.Open();

 DataSet datasetprint = new DataSet();
            if (ws1 != null)
            {
                ServiceReference1.ReturnValuationRequest request = new ServiceReference1.ReturnValuationRequest(UserID, trackingNumber);
                ServiceReference1.ReturnValuationResponse response = ws1.ReturnValuation(request);
                if (response.ReturnValuationResult != null)
                {
                    DataSet ds = response.ReturnValuationResult;
                    datasetprint = ds;            
                }
            } 
```

我查看其内容的最佳方式是什么？

* * *

**编辑：**

我宁愿不只是把断点看作是无止境的，因为它有太多没有意义的数据。

![在此处输入图像描述](../Images/1b126165fd11ac3aca32a1a992b9a2b1.png)

我更喜欢在数据网格甚至文本文件中查看它。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-03T07:46:31.503

如果您想在没有任何额外代码的情况下查看它，只需在填充数据集后使用调试器设置断点并将鼠标悬停在数据集变量名称上，会出现一个小弹出窗口，然后单击弹出窗口中的小放大镜。

我认为它被称为数据集可视化工具。

请注意，它可以使您的调试会话超时并做一些其他时髦的事情。如果超时，那么您将无法继续单步执行您的代码。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-03T08:15:19.190

您应该使用外观类图标。鼠标悬停菜单由以下元素组成：

*   展开对象属性（“+”图标）
*   变量名（'datasetprint'）
*   镜子（图片）
*   下拉菜单（不知道是什么：P）
*   对象类型 (System.Data.DataSet)
*   大头针图标（因此悬停菜单保持在原位）

当您按下窥镜时，datagridview 将打开，您可以在此处查看数据或将其复制到其他地方查看。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-05-27T15:28:20.947

将其导出到文件系统上的 XML 并使用任何阅读器进行检查

```
ds.WriteXml("c:\\test.xml") 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-03T09:02:49.510

你的意思是这样的：

```
foreach (DataRow row in dt.Rows)
{
    foreach (DataColumn col in dt.Columns)
        textBox.Text += row[col] + ", ";

    textBox.Text += "\r\n";
} 
```

粗，但会工作。我确信我在某处使用 LINQ 有一个更优雅、更灵活的解决方案......

尝试将 DataSet 搜索为 CSV，因为在某些时候，会将每个数据集行转换为分隔字符串，这基本上是您所追求的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-03T11:23:01.850

此 SO 答案中突出显示了一种替代方法： [StackOverflow：“如何将 DataTable 转换为 C# 中的字符串？”](https://stackoverflow.com/a/1104159/1285450)

基本上：

```
using(var writer = new StringWriter())
{
  myDataSet.WriteXml(writer);
  Console.WriteLine(writer.ToString());
} 
```

这够好吗？

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-04-02T13:29:04.060

如果您想填充 DataGridView，只需将数据集中的表分配给 DataGridView 数据源。例子：

```
DataGridView1.DataSource = dataset.Tables[0] 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-03T07:42:57.823

如果你只想知道 DataSet 里面有什么，在下面的行设置一个断点，调试，看看里面有什么：

```
datasetprint = ds; 
```

# xml - 处理文件夹中的多个 XML 文件

> ID：12243709
> 
> 赞同：0
> 
> 时间：2012-09-03T07:35:19.837
> 
> 标签：xml, c#-4.0

我在 C#.Net 中工作。我有一个 XML 文件。从那里我会得到数据，然后我会处理它。默认情况下，XML 将在一个文件夹中，我将使用它。这是我的代码..

```
XmlDocument xDoc = new XmlDocument();
xDoc.Load(System.IO.Path.Combine(System.IO.Directory.GetCurrentDirectory(), "Test.xml"));
--My Process Starts Here..... 
```

在同一个文件夹中，我将有多个 XML 文件。（即）Test.XML、Test1.XML、Test2.XML 等...我想处理所有 XML 文件。每次我都无法更改源代码中的文件名。我想将文件名本身作为参数传递。我想知道这是否正确。或者任何其他方式来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T08:39:03.887

我试过这个..现在我可以访问所有的 XML 文件。

```
 XmlDocument xDoc = new XmlDocument();
        string path = Directory.GetCurrentDirectory();
        foreach (string file in Directory.EnumerateFiles(path, "*.xml"))
        {
          xDoc.Load(System.IO.Path.Combine(System.IO.Directory.GetCurrentDirectory(), file));
          string strpath = xDoc.BaseURI;
        } 
```

# xcode - 雪豹的 Xcode 下载

> ID：12243710
> 
> 赞同：6
> 
> 时间：2012-09-03T07:35:21.300
> 
> 标签：xcode, download, xcode9, xcode10, xcode9.4

较早的线程提到，如果您以注册的 iOS 开发人员身份登录，则在[https://developer.apple.com/downloads/index.action?name=Xcode](https://developer.apple.com/downloads/index.action?name=Xcode)上的 Xcode 下载中列出了适用于 Snow Leopard 的 Xcode 下载-但我看不到。

对此线程的评论有一个直接下载链接，但单击该链接会重定向到“拒绝访问”错误页面：

[https://stackoverflow.com/questions/7662246/cant-download-xcode-4-for-snow-leopard-anymore](https://stackoverflow.com/questions/7662246/cant-download-xcode-4-for-snow-leopard-anymore)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-03T07:38:46.827

你可以参考[这里](https://superuser.com/questions/346639/is-there-an-xcode-4-2-for-snow-leopard)。或者，如果您有良好的互联网连接，请尝试通过 torrent 下载。链接在这里。[通过 torrent 的 xcode 链接](http://thepiratebay.se/torrent/6721955/)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-03-27T11:23:31.710

您需要的软件可在此链接中获得，[https://developer.apple.com/downloads/](https://developer.apple.com/downloads/)

目前 Xcode 4.2 在第 6 页。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-08T10:02:04.940

**请注意：OS X 10.6.8（雪豹）现在太旧了，无法发布应用程序。**

您需要一台装有 OS X 10.8（山狮）的 Mac。Apple 没有保持向后兼容性：满足应用商店要求所需的 Xcode 或 Application Launcher 的最低版本不会在 10.6.8 上运行。

您可以使用旧 Mac 进行开发、测试和模拟，但最终要构建和发布您的应用程序，您将需要更新的 Mac。

# uiview - '对 UINavigationController 的开始/结束外观转换的不平衡调用'？

> ID：12243719
> 
> 赞同：1
> 
> 时间：2012-09-03T07:36:28.993
> 
> 标签：uiview, xcode4.3, uisplitviewcontroller, uianimation

我只是在纵向视图中编译我的 ipad 应用程序，我只是移动到**我的视图以拆分视图**并返回到我遇到错误的视图：

> 对 **UINavigationController的****开始/结束外观转换**的不平衡调用

 **我在 xcode 4.3.2 中工作。我刚刚编译了 xcode 4.2 版本，它没有问题。有谁知道为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T07:00:04.733

在 Xcode 4.2.1 我添加了这个代码

```
if (popoverController != nil){[self.popoverController dismissPopoverAnimated:YES];} 
```

在 xcode 4.3 中不需要上面的代码。这就是我面临的问题。谢谢...**

# django - django-celery 排队和检索结果

> ID：12243723
> 
> 赞同：2
> 
> 时间：2012-09-03T07:36:51.440
> 
> 标签：django, python-2.7, celery, django-celery

我们使用 django-celery 进行应用。我对我们遵循的工作流程有疑问。

当前，当用户单击链接时，使用以下代码将任务排队

```
result=retrieveDatausingWorker.apply_async(args=[type,dictParamList]) 
```

然后视图返回一个向用户显示等待消息的页面。该页面还返回当前任务的 task_id 然后使用将任务 ID 发送到服务器的 ajax 调用，我正在检查当前排队任务的状态。

代码

```
def getDocketDownloaderWorkerStatus(request):

 if request.method=="POST":         

     task_id=request.POST.get('task_id')
     result = AsyncResult(task_id)
     if result:
         state, retval = result.state, result.result
         response_data = dict(id=task_id, status=state, result=safe_str(retval))            

     if (state=='SUCCESS' or state=='FAILURE') and ('task_id' in request.session):
         del request.session['task_id']             
     return HttpResponse(serialize(response_data), mimetype="application/json") 
```

此 ajax 函数将每 5 秒调用一次，直到服务器返回 status=='SUCCESS' 以及结果。

这是正确的方法吗。或者使用起来贵吗`result = AsyncResult(task_id)`

我使用数据库作为我的经纪人。该数据库托管在 xeround 云数据库中。当我运行一个工作线程时，CPU 使用率会超过 95%，我们会收到有关此的严重错误消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T09:26:02.490

您正在使用正确的检查方法，但实际上并不推荐使用数据库作为代理。

我建议切换到 Redis 或 RabbitMQ（RabbitMQ 对您的情况来说可能是多余的）。这应该会大大减少cpu的使用。

# html - 替代 HTML 中的隐藏字段

> ID：12243727
> 
> 赞同：0
> 
> 时间：2012-09-03T07:37:05.173
> 
> 标签：html, outlook

> **可能重复：**
> [HTML 中隐藏字段的替代方案](https://stackoverflow.com/questions/12244775/alternatives-to-hidden-field-in-html)

当我发送机密电子邮件时，我使用隐藏字段来隐藏某些字段。当我发送包含嵌入其中的隐藏字段的电子邮件时，我可以使用 Java 检索隐藏字段。我的问题是，当我转发同一封电子邮件时，HTML 中缺少隐藏字段。这种情况也适用于退回的电子邮件。我的要求是从退回的电子邮件中提取那些隐藏的字段值。我想知道是否有任何替代隐藏字段或如何使用隐藏字段完成任务。

任何帮助深表感谢。

谢谢

* * *

我遇到的问题不是关于机密数据，而是关于信息。例如，正如您所说，我在发送电子邮件时发送带有唯一 ID 的电子邮件作为隐藏。但是，一旦我转发该电子邮件或退回的电子邮件，相同的唯一 ID 似乎已从 html 中消失。简而言之，隐藏类型的标签在发送电子邮件后会消失。任何有关这方面的信息都会有很大帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T07:42:39.660

即使您在 HTML 中隐藏了一个字段，用户仍然可以通过查看 html 源代码来查看信息。**不要在 HTML 隐藏字段或评论中隐藏机密数据！它不安全！**

通过电子邮件记住某些数据的最安全方法是将数据保存到私有数据库中，并创建一个唯一的随机密钥来表示数据。然后，您可以在发送的电子邮件中包含唯一键。

要在收到电子邮件退回时取回数据，只需在数据库中查找唯一键，即可获得信息。

收到该电子邮件的任何其他人都将无法看到私人和机密数据。

# asp.net - 如何创建跨域asp.net web服务

> ID：12243731
> 
> 赞同：1
> 
> 时间：2012-09-03T07:37:18.750
> 
> 标签：asp.net, ajax, web-services, cross-domain

我创建了一个网络服务。我想使用 Ajax jQuery 访问这个 Web 服务。我可以访问同一个域。但我想从另一个域访问此 Web 服务。

有谁知道如何在 asp.net 中创建跨域 Web 服务？文件中的任何设置，`web.config`以便我从另一个域访问它？

我的网络服务

```
[WebService(Namespace = "http://tempuri.org/")]
[System.Web.Script.Services.ScriptService]
public class Service : System.Web.Services.WebService
{
    public Service () {
    }

    [WebMethod]
    public string SetName(string name) {
        return "hello my dear friend " + name;

    }
} 
```

JavaScript

```
$.ajax({
    type: "GET",
    url:'http://192.168.1.119/Service/SetName.asmx?name=pr',
    ContentType: "application/x-www-form-urlencoded",
    cache: false,
    dataType: "jsonp",
    success: onSuccess
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T09:14:34.210

安装 nuget 然后试试这些 下面是 nuget 库上 Json.Net 的链接：nuget.org/packages/Newtonsoft.Json

```
using Json;
using Newtonsoft.Json;
using System.Xml.Serialization;

     [WebService(Namespace = "http://tempuri.org/")] 
        [System.Web.Script.Services.ScriptService] 
        public class Service : System.Web.Services.WebService 
        { 
            public Service () { 
            } 

            [WebMethod] 
        [ScriptMethod(ResponseFormat = ResponseFormat.Json)]
            public string SetName(string name) { 
         return JsonConvert.SerializeObject("hello my dear friend " + name, Newtonsoft.Json.Formatting.Indented);

            } 
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T10:13:10.647

使用 jQuery 的 jsonp 数据类型确实是一个不错的选择，因为它可以使跨域脚本编写成为可能……但由于这是 json-with-padding，因此您必须确保您的 web 服务返回 json..

例如在这里查看一个好的入门：[http ://encosia.com/asp-net-web-services-mistake-manual-json-serialization/](http://encosia.com/asp-net-web-services-mistake-manual-json-serialization/)

# android - LogCat 条目在内存中保留多长时间？

> ID：12243736
> 
> 赞同：8
> 
> 时间：2012-09-03T07:37:55.020
> 
> 标签：android, logcat, android-logcat

LogCat 日志会在什么时间后从手机内存中删除？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-03T07:45:40.033

它不取决于时间，而是取决于使用的内存。

您可以通过使用`adb logcat -g`（通常返回 64Kb 和 512Kb 之间的值）来了解大小限制。

# php - 如何使 PHP 函数在用户定义的时间自动触发

> ID：12243737
> 
> 赞同：0
> 
> 时间：2012-09-03T07:37:58.713
> 
> 标签：php, zend-framework, cron, scheduled-tasks

我正在为`PHP`使用`Zend`框架的公司开发内部系统。我需要它的一个功能在用户指定的时间执行。

我对此事的研究发现了几种使用`CPanel` `Cron`作业和在服务器上设置计划任务的方法。但是在这种情况下，我没有`CPanel`并且我已经使用了计划任务。但我的挑战是为用户提供一个接口来指定触发功能的时间。

非常感谢您对此的任何帮助！:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T07:41:00.007

您可以 [通过您必须提供的接口] 在数据库中存储一个“作业”，然后在 Cron 中执行脚本 [例如每分钟]，检查是否有任何待处理的作业以及它们的 start_date 是否 > now()。如果是，则执行它，否则什么也不做。不要忘记将它们标记为完成以避免多次运行它们:)

# c# - 行为不端的 Screen.AllScreens.Length

> ID：12243738
> 
> 赞同：2
> 
> 时间：2012-09-03T07:38:00.753
> 
> 标签：c#, .net, windows-services

我在笔记本电脑上安装了带有扩展显示器的 windows7 32 位。**Screen.AllScreens.Length在从****Windows 服务**调用时返回**1**，但从**Windows 应用程序**或**控制台应用程序**给我的是**2**。

 ******* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T07:52:28.477

基本上，您没有屏幕作为“普通”Windows 服务；您也没有正常运行的 GDI/GDI+ 函数。

请参阅[从 Windows 服务获取桌面大小？](https://stackoverflow.com/questions/9507612/get-desktop-size-from-windows-service)了解更多信息。

请参阅[允许服务与 Windows](https://stackoverflow.com/questions/4237225/windows-service-allow-service-to-interact-with-desktop)中的桌面交互以与桌面交互。请注意，这在 Vista 中是不允许的。******

# css - 为什么 webkit 浏览器在值设置为“0px”时将 css 左侧位置值警报为“auto”

> ID：12243739
> 
> 赞同：2
> 
> 时间：2012-09-03T07:38:06.683
> 
> 标签：css, internet-explorer, firefox, webkit

请参阅此[示例](http://jsfiddle.net/akhurshid/hQCS4/)。

**代码：**

```
alert( "slide-panel2 position: " + $('#slide-panel2').css("left") ) 
```

**CSS：**

```
#slide-panel2 { left: 0px; } 
```

为什么 WebKit 浏览器会在实际值设置为时提醒 css`left position`值？`auto``0px`

在 Firefox 和 IE 中，它会`0px`按预期发出警报。

**编辑：**

正如**亚历克斯**在下面的[回答](https://stackoverflow.com/a/12243821/1516616)中所说（我同意他的观点）：

> 因为你的元素有 position: static （默认情况下），所以它会忽略 left 属性关于它的布局。如果您的位置属性设置为绝对、相对或固定，浏览器只关心左（及其朋友）。
> 
> 将其更改为 position: relative 会给出预期的结果。

但根据[这个参考](https://developer.mozilla.org/en-US/docs/CSS/position)：

> `position`CSS 属性具有默认值`static`
> 
> 而在`static`Top、right、bottom 和 left 属性不适用。

那么为什么`0px`在 Firefox 和 IE 以及`auto`WebKit 浏览器中会显示警报呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T07:44:32.007

因为你的元素有`position: static`（默认情况下），所以它会忽略`left`关于它的布局的属性。如果您的属性设置为,或，浏览器只关心`left`（及其朋友）。`position``absolute``relative``fixed`

将其更改为`position: relative`给出预期的结果。

[js小提琴](http://jsfiddle.net/B4kDn/)。

> 那么为什么`0px`在 Mozilla 和 IE 以及`auto`WebKit 浏览器中会显示警报呢？

因为浏览器有不同的实现，不一定同意。即使是显示的浏览器`0px`仍然将其视为`auto`.

# delphi - Windows 7 中的智能卡

> ID：12243743
> 
> 赞同：0
> 
> 时间：2012-09-03T07:38:28.243
> 
> 标签：delphi, windows-7, smartcard

我在我的 Delphi 应用程序中使用[ACOS3X智能卡进行用户身份验证。](http://acs.com.hk/index.php?pid=images&id=ACOS3X)在 Windows XP 中一切正常，但在 Windows 7 中，每次我将卡放入读卡器（即 ACR38-CCID）时，Windows 都会尝试为其安装驱动程序，但无济于事。这不会以任何方式影响我的应用程序，但这真的很烦人。我应该为我的卡编写一个驱动程序来满足 Windows 7 吗？如果是的话，有人可以告诉我是否可以用 Delphi 创建驱动程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T14:15:05.920

This is what Windows 7 (and IIRC also Vista) does. If you insert a smart card, it tries to locate a minidriver through Windows Update.

Not sure if it works, but you can maybe modify Windows registry to include the necessary entry for your card (but not point to a working implementation).

Look into Windows Minidriver Specification (available from MS) and the "discovery" section in that document.

# ruby-on-rails-3 - 在两个活动的管理类中使用相同的模型

> ID：12243744
> 
> 赞同：8
> 
> 时间：2012-09-03T07:38:38.433
> 
> 标签：ruby-on-rails-3, activeadmin

我正在为大型生产应用程序开发 ActiveAdmin 应用程序。我目前正在尝试对两个 activeadmin“实体”使用相同的模型。

所以，说我有

```
class Person < ActiveRecord::Base

  scope :special, where(:is_special => true)
  scope :ordinary, where(:is_special => false)

end 
```

我可以做类似的事情吗

```
ActiveAdmin.register Person, :name => "Special People" do

  # columns, filters for special people

  controller do
    def scoped_collection
      Person.special
    end
  end  

end

ActiveAdmin.register Person, :name => "Ordinary People" do

  # columns, filters for ordinary people

  controller do
    def scoped_collection
      Person.ordinary
    end
  end  

end 
```

（我在这里编造了一些语法来解释我想要做什么。）

这两种类型的人将显示为 ActiveAdmin.register 块中定义的菜单项和不同的 CRUD 界面。他们只会有相同的基础模型。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-11-07T19:31:49.580

活动管理员模型代码：

```
 ActiveAdmin.register Person, as: "Special People" do
      scope :Special, default: true do |person|
        person = Person.special
      end

      controller do
        def scoped_collection
          Person.special
        end
      end
    end

    ActiveAdmin.register Person, as: "Ordinary People" do
      scope :Ordinary, default: true do |person|
        person = Person.ordinary
      end

      controller do
        def scoped_collection
          Person.ordinary
        end
      end
    end 
```

现在在路线中：

```
match '/admin/special_people/scoped_collection/:id' => 'admin/special_people#scoped_collection'

match '/admin/ordinary_people/scoped_collection/:id' => 'admin/ordinary_people#scoped_collection' 
```

尝试上述更改。希望这能解决您的问题。谢谢。

# c# - 如果用户在 GridView 中输入除数字以外的任何字符，如何向用户发出通知

> ID：12243746
> 
> 赞同：1
> 
> 时间：2012-09-03T07:38:39.077
> 
> 标签：c#, asp.net, gridview

我有一个`GridView`可编辑的并绑定到数据库。所以GridView中每一列的数据类型在数据库中都是Int。因此 my`GridView`只接受整数。

`GridView`但是，如果用户在单元格中输入除数字以外的任何其他字符，我想向用户发出通知。

基本上我需要验证并给出错误消息。

有人可以帮我怎么做吗？

我已经为我的`GridView`.

因此，假设我输入了除数字以外的任何字符，它会给我一条异常消息：**System.Data.SqlClient.SqlException：将 nvarchar 值“a”转换为数据类型 int 时转换失败。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T07:44:08.133

您最好的办法是将 转换`BoundField`为 a`TemplateField`并将验证控件添加到`EditItemTemplate`.

```
<asp:TemplateField HeaderText="Application" SortExpression="APPName">
    <EditItemTemplate>
        <asp:TextBox ID="txtApp" runat="server" Text='<%# Bind("APPName") %>'/>
        <asp:RequiredFieldValidator runat='server' ID='requiredApp' 
            ErrorMessage='Application Name Cannot Be Empty' ControlToValidate='txtApp' /> 
    </EditItemTemplate>
    <ItemTemplate>
        <asp:Label ID="labelApp" runat="server" Text='<%# Bind("APPName") %>'/>
    </ItemTemplate>
</asp:TemplateField> 
```

**[资源](https://stackoverflow.com/a/1190347/491243)**

# sql-server - 无效的对象名称，对已删除对象的引用

> ID：12243748
> 
> 赞同：1
> 
> 时间：2012-09-03T07:38:46.900
> 
> 标签：sql-server

我有`ProductAdmin`视图已重命名为`ProductDetail`. 现在，如果我执行 SQL 数据库修改更新，我会收到以下错误。似乎某个地方参数 ProductAdmin 仍然存在。我是 SQL Server 新手，如何解决这个问题？

```
[208] Invalid object name 'dbo.ProductAdmin'.

The following SQL command caused the error:

EXEC sp_refreshview N'[dbo].[ProductDetail]'

The following messages were returned from the SQL Server:

[0] Altering [dbo].[Product]
[0] Refreshing [dbo].[OrderDetail]
[0] Refreshing [dbo].[UserDetail]
[0] Refreshing [dbo].[ProductDetail] 
```

# hlsl - 着色器中的高度图不起作用

> ID：12243749
> 
> 赞同：3
> 
> 时间：2012-09-03T07:38:51.710
> 
> 标签：hlsl, heightmap

我正在尝试实现基于 GPU 的几何剪辑映射，但在将简单的高度图应用于我的地形时遇到了问题。对于高度图，我使用表面格式为“单一”的简单纹理。我从[Catalinz 的 XNA 博客](http://www.catalinzima.com/tutorials/4-uses-of-vtf/terrain-rendering-using-heightmaps/)中获取了纹理。

我要做的只是从顶点世界坐标的纹理中获取单个浮点值，并将该值应用于顶点的 Y 值。我通过着色器应用高度图，因为没有可以应用的固定网格代码。到目前为止我尝试过的是使用该`tex2Dlod`函数，但似乎没有输出或输出为 0。Direct X 顶点着色器的代码如下所示：

```
float4 worldPos = mul(float4(pos.x,0.0f,pos.y, 1.0f), worldMatrix);
float elevation = tex2Dlod(HeightmapSampler, float4(worldPos.x, worldPos.z,0,0));
worldPos.y = elevation * 128; 
```

`HeightmapSampler`高度图纹理的点镜采样器在哪里。这是输出，我实际上没有得到任何高度：

![截屏](../Images/1756914f0472e3c7b4b0fd836f6ec69c.png)

这是我正在使用的高度图：

![高度图](../Images/da8e5a18fd24001825ec411efffeb211.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T12:39:08.437

忘记了纹理坐标在纹素中，所以将它与纹素相乘来修复它。

```
float elevation = tex2Dlod(HeightmapSampler, float4(worldPos.x*texel, worldPos.z*texel,0,0)); 
```

# asp.net - tbody 未在 ASP.NET 4.5 中编译的服务器端 HTML 表

> ID：12243755
> 
> 赞同：2
> 
> 时间：2012-09-03T07:39:11.490
> 
> 标签：asp.net, webforms, visual-studio-2012, .net-4.5

> **可能重复：**
> [如何在 ASP.NET 表中创建 thead 和 tbody？](https://stackoverflow.com/questions/4015839/how-to-create-thead-and-tbody-in-asp-net-table)

以下 HTML 无法在 ASP.NET 网站中编译

```
<table runat="server" id="tbl1">
  <tbody>
    <tr>
      <td>
      </td>
    </tr>
  </tbody>
</table> 
```

我得到这个编译错误：

```
The best overloaded method match for ‘System.Web.UI.HtmlControls.HtmlTableRowCollection.Add(System.Web.UI.HtmlControls.HtmlTableRow)’ has some invalid arguments 
```

*   安装 VS2012 和 .NET 4.5 后开始出现此错误
*   它出现在 VS2012 和 VS2010 中
*   它出现在 ASP.NET 网站项目模板中，代码在 ASP.NET WebApplication 项目模板中编译良好
*   删除“runat”属性或“tbody”标签时错误消失
*   奇怪的是项目编译失败但发布成功没有错误
*   页面在浏览器中正确呈现
*   如果我卸载 VS2012 和 .NET 4.5，相同的代码将在 VS2010 中再次运行

**更新：**

我不确定为什么这个问题首先被关闭，它不是重复的。无论如何，微软已经承认这是一个错误并正在努力修复。更多信息[在这里](http://connect.microsoft.com/VisualStudio/feedback/details/766115/value-of-type-system-web-ui-htmlcontrols-htmlgenericcontrol-cannot-be-converted-to-system-web-ui-htmlcontrols-htmltablerow)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-03T07:46:55.063

您可能想尝试：

```
 <table id="yourId" runat="server">
     <thead>
         .
         .
         .
     </thead>
      <tbody>
          <tr>
             <td>
             </td>
          </tr>    
            </tbody>
  </table> 
```

# java - Maven webapp“javac：-endorseddirs 需要一个参数”

> ID：12243760
> 
> 赞同：1
> 
> 时间：2012-09-03T07:39:26.233
> 
> 标签：java, maven, maven-compiler-plugin

我有一个使用 maven-compiler-plugin 的 Maven webapp。几天前，我可以很好地编译和运行该应用程序，但是发生了一些事情，现在编译失败并出现以下错误：

```
[ERROR] Failure executing javac, but could not parse the error:
javac: -endorseddirs requires an argument
Usage: javac <options> <source files> 
```

它与编译器有关，但我无法理解。这是我的 pom.xml（只是插件）：

```
 <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.3.2</version>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
                <compilerArguments>
                    <endorseddirs>${endorsed.dir}</endorseddirs>
                </compilerArguments>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-war-plugin</artifactId>
            <version>2.1.1</version>
            <configuration>
                <failOnMissingWebXml>false</failOnMissingWebXml>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-dependency-plugin</artifactId>
            <version>2.1</version>
            <executions>

            </executions>
        </plugin>
    </plugins> 
```

我已经尝试过一些这样的解决[方案](https://stackoverflow.com/a/4782553/1333954)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T07:47:19.790

据我所知，`${endorsed.dir}`不是标准的 Maven 属性。您是否从某个地方复制了此示例而没有替换`${endorsed.dir}`为实际值？或者您是否在您的其他地方定义了这个值，`pom.xml`但它已被删除？

如果是这种情况，Maven 会将字段视为空白，我可以想象编译器不会收到参数的任何`-endorseddirs`参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T12:03:04.030

Java 编译器无法`${endorsed.dir}`在您的 POM 中找到属性，请确保它已在您的 POM 中定义。通过 来检查 POM 的配置`mvn help:effective-pom`，这将在考虑所有配置后显示实际的 POM。

# android - 如何解决这个问题：“运行 android lint”问题

> ID：12243762
> 
> 赞同：20
> 
> 时间：2012-09-03T07:39:49.523
> 
> 标签：android, eclipse, nullpointerexception, android-lint

在我项目的任何活动中，如果我做了一些更改然后保存该活动，我会收到消息“运行 android lint 遇到问题”。

这是我的错误日志：

```
java.lang.NullPointerException
at com.android.ide.eclipse.adt.AdtUtils.workspacePathToFile(AdtUtils.java:466)
at com.android.ide.eclipse.adt.internal.lint.EclipseLintClient.getClassPath(EclipseLintClient.java:753)
at com.android.tools.lint.client.api.LintClient.getJavaClassFolders(LintClient.java:198)
at com.android.tools.lint.detector.api.Project.getJavaClassFolders(Project.java:270)
at com.android.tools.lint.client.api.LintDriver.checkIndividualClassFiles(LintDriver.java:977)
at com.android.tools.lint.client.api.LintDriver.checkClasses(LintDriver.java:920)
at com.android.tools.lint.client.api.LintDriver.runFileDetectors(LintDriver.java:785)
at com.android.tools.lint.client.api.LintDriver.checkProject(LintDriver.java:661)
at com.android.tools.lint.client.api.LintDriver.analyze(LintDriver.java:288)
at com.android.ide.eclipse.adt.internal.lint.LintJob.run(LintJob.java:151)
at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54)\ 
```

我不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2014-07-03T11:09:00.590

以下步骤帮助我解决了同样的问题。

1.  上`My Project -> Context Menu -> Android Tools -> Fix Project Properties`
2.  **在AndroidManifest.xml**中更改为最新版本

     **```
    android:targetSdkVersion="21" 
    ```** 

 **也许只有其中一个就足够了:)。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-08-22T10:25:37.453

在**`Window > Preferences > Android > Lint Error Checking`**; 取消选中**“保存文件时检查错误”。**

我希望它会帮助你

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-09-03T07:45:06.267

然而，这里的根本原因是某种无效的项目定义——一个或多个类路径条目指向一个无法打开的资源；例如，您可能有一个相对于类路径变量的类路径引用，并且类路径变量不再指向绝对位置。

上面的 CL 将简单地确保 lint 在这种情况下不会引发异常，但它实际上无法包含给定的引用。

您需要查看项目属性对话框并确保所有构建路径和资源都是正确的——这是解决此问题之前的解决方法

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-07-10T11:16:19.920

对我有用的是在我的包资源管理器上打开“appcompat_v7”项目。我之前关了它，忘了打开，所以我遇到了和 OP 一样的问题。现在一切都解决了

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-07-18T16:55:24.653

Here is another solution, just tested it.

Go to `Project properties -> Java` and set compiler change Compiler compliance level: to 1.7.

If this is not working then try `Project properties -> Android` switch from what ever it is using to android 4.4.2.

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-07-21T17:13:30.730

在我的特殊情况下，问题是由键绑定冲突引起的。

检查项目文件夹中的 .metadata/.log 以获取提示。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-10-13T07:54:58.223

为什么会出现这个错误？

似乎它与我们包资源管理器中的 appcompat_v7 库有关。如果您使用 API (targetSdkVersion) 级别 21，则不会遇到此问题。

对于 Mac OS X 操作系统：

转到菜单：Eclipse -> Preferences -> Android -> Lint 错误检查和取消检查：“保存文件时，检查错误”

对于 Windows 操作系统：

转到菜单：Window -> Preferences -> Android -> Lint 错误检查和取消检查：“保存文件时，检查错误”

您可能会发现这篇文章很有帮助：[http ://code2care.org/pages/solution-running-android-lint-has-encountered-a-problem-nullpointerexception-error/](http://code2care.org/pages/solution-running-android-lint-has-encountered-a-problem-nullpointerexception-error/)**

# qt - QML DropArea 接受外部拖动

> ID：12243764
> 
> 赞同：1
> 
> 时间：2012-09-03T07:39:52.070
> 
> 标签：qt, qml, qt5

我注意到 Qt5 中有一个新的 DropArea 组件。我正在尝试从 Finder (Mac) 中拖动文件，但只调用了 onEntered 方法。

```
import QtQuick 2.0

Rectangle {
    id: background;
    color: "white";
    width: 300;
    height: 300;

    DropArea {
        id: dropArea;
        anchors.fill: parent;
        onEntered: {
            background.color = "gray";
            drag.accept (Qt.CopyAction);
            console.log("onEntered");
        }
        onDropped: {
            console.log ("onDropped");
        }
        onExited: {
            bckground.color = "white";
            console.log ("onExited");
        }
    }
} 
```

这是窗口创建代码：

```
int main(int argc, char *argv[])
{
    QApplication a(argc, argv);

    QQuickView qmlView;
    qmlView.setGeometry(0, 200, 600, 400);
    qmlView.setResizeMode (QQuickView::SizeRootObjectToView);
    qmlView.setSource(QUrl::fromLocalFile("/Users/ivann/Projects/QtGuiTestApp/testView.qml"));
    qmlView.show();

    return a.exec();
} 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T10:58:42.097

似乎是一个特定于 Mac 的问题（至少在 Linux 上可以正常工作）。向诺基亚填写错误报告：[https ://bugreports.qt.io/browse/QTBUG-27125](https://bugreports.qt.io/browse/QTBUG-27125)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-09T09:25:43.393

正如 chebum 附加的链接中所述，在撰写本文时，QtQuick 在任何平台上都不支持该功能。

只是为了让未来的读者知道而发帖。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-06T11:06:15.143

QtQuick 5.2 支持从外部应用程序拖放。请参阅示例[http://qt-project.org/doc/qt-5/qtquick-externaldraganddrop-example.html](http://qt-project.org/doc/qt-5/qtquick-externaldraganddrop-example.html)

# java - JAVA：处理套接字断开连接

> ID：12243765
> 
> 赞同：1
> 
> 时间：2012-09-03T07:39:53.410
> 
> 标签：java, sockets, stream, inputstream, outputstream

1.  两台电脑通过socket连接。如果服务器/客户端从他们的一端关闭连接（即关闭`InputStream`,`OutputStream`和`Socket`），那么我如何通知另一端断开连接？我知道一种方法-尝试从 中读取`InputStream`，这会引发`IOException`if 连接已关闭，但是还有其他方法可以检测到这一点吗？
2.  另一个问题，我在网上查了这个问题，发现`inputStream.available()` 并没有解决这个问题。这是为什么？

**附加信息：**我要求另一种方式，因为如果我必须尝试从 中读取 `InputStrem`以检测断开连接，我的项目将变得难以处理。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-03T08:18:25.200

> trying to read from the InputStream, which throws an IOException

That is not correct. If the peer closes the socket:

*   `read()` returns -1
*   `readLine()` returns null
*   `readXXX()` throws `EOFException`, for any other X.

As `InputStream` only has `read()` methods, it only returns -1: it doesn't throw an `IOException` at EOS.

Contrary to other answers here, there is no TCP API or Socket method that will tell you whether the peer has closed the connection. You have to try a read or a write.

You should use a read timeout.

`InputStream.available()` doesn't solve the problem because it doesn't return an EOS indication of any kind. There are few correct uses of it, and this isn't one of them.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T07:55:12.797

问题不在于“如果服务器/客户端关闭连接”。问题是“如果他们不关闭连接但连接断开了怎么办？”

如果没有您自己的心跳协议，就无法检测到这一点。

另一种选择是将 SO_KEEPALIVE 设置为 true。

“当为 TCP 套接字设置了 keepalive 选项并且 2 小时内没有数据在任一方向上通过套接字交换时（注意：实际值取决于实现）”

根据我的经验，它比每 2 小时快得多。更像是大约 5 分钟。除了使用 So_KEEPALIVE 之外，你真的被搞砸了：P

在我的通信协议中，我使用每 2 秒发送一次的保留“心跳”字节。我自己的 filterInputStream 和 filterOutputStream 发送/消化心跳字节。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T07:58:02.057

连接断开时，没有 OOO 方法可以获取回调/异常。只有在对套接字流进行显式读/写时，您才能了解断开的连接。

有两种从套接字读取的方法，即。在它们到达时逐字节同步读取；或等到流中可用的所需字节数，然后进行批量读取。您可以通过在套接字流上调用 available() 来进行检查，它会为您提供当前可供读取的字节数。在第二种情况下，如果套接字连接由于某种原因中断，则无法通知您。在这种情况下，您需要使用超时机制来等待。在您进行显式读/写的第一种情况下，您会遇到异常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T07:59:28.957

Q1 如果您关闭服务器上的套接字连接，如果不是立即，客户端应该抛出异常，当然在下一次读取尝试时，反之亦然。

来自 JavaDocs 的 Q2

> 返回可以从此输入流中读取（或跳过）的字节数的**估计值**，而不会被下一次调用此输入流的方法阻塞。下一次调用可能是同一个线程或另一个线程。单次读取或跳过这么多字节不会阻塞，但可能会读取或跳过更少的字节。

这不是流中当前字节数的指示，而是对可能从不会阻塞当前线程的实现中读取的字节数的估计

# xamarin.ios - 如何将 UISwitch 添加到分组表视图中的单元格

> ID：12243772
> 
> 赞同：1
> 
> 时间：2012-09-03T07:40:21.460
> 
> 标签：xamarin.ios, uitableview

我正在尝试将 UISwitch 添加到分组表视图中的单元格，但我没有得到正确的方法来执行此操作。请帮我。谢谢和问候， 查克里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T08:18:02.740

Set `UISwitch` button as accessory for `UITableViewCell`:

```
-(UITableViewCell*) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString* cellId = @"cellId";
    UITableViewCell* cellView = [self.tableView dequeueReusableCellWithIdentifier:cellId];
    if(!cellView) {
        cellView = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellId];
        UISwitch* switchBtn = [[UISwitch alloc] init];
        [switchBtn addTarget:self action:@selector(onSwitchBtn:) forControlEvents:UIControlEventValueChanged];
        cellView.accessoryView = switchBtn;
    }
    return cellView;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T14:23:47.827

您可以将现有的（Objective-C）答案转换为 C#，但是，由于您使用的是 MonoTouch，因此您应该看看[MonoTouch.Dialog](https://github.com/migueldeicaza/MonoTouch.Dialog)（它是示例应用程序）。

它提供了一个更简单的 API，`UITableView`并且仍然涵盖了大多数需要表的常见用法/场景。

查看屏幕截图（来自上一个链接）以查看`UISwitch`在单元格中使用的情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T08:03:11.893

您使用的是故事板还是 xibs？我认为在情节提要中，您可以将 UISwith 拖到单元格中。

如果您使用的是 xibs，您将需要一个自定义单元格。使用界面生成器将 UITableViewCell 拖到 tableview 外的 xib 中，将 UISwitch 拖到 UITableViewCell 内，然后在 UITableViewCell 中放置一个 IBOutlet，然后

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
if (indexPath.row == rowWhereYouWantTheCellWithTheUISwitch){
    return UITableViewCellWithTheSwitchName;
}
} 
```

rowWhereYouWantTheCellWithTheUISwitch 是您想要自定义单元格的单元格的编号。UITableViewCellWithTheSwitchName 是您创建的 IBOutlet 的名称。

# matlab - 与屏幕像素的眼睛位置映射

> ID：12243773
> 
> 赞同：1
> 
> 时间：2012-09-03T07:40:32.737
> 
> 标签：matlab, mapping, mouse

我目前正在使用 MATLAB 做一个名为眼控光标的项目。在我提取虹膜中心（可以认为是瞳孔位置）之前，我有几个阶段。face detetcion -> eye detection -> iris detection -> 最后我得到了如图所示的虹膜中心。

现在，我正在尝试将此位置 (X,Y) 映射到我的计算机屏幕像素 (1366 x 768)。在我发现的大多数期刊中，它们都需要一个参考点，例如嘴唇、鼻子或眼角。但我只能通过进行某些阈值处理来提取虹膜的中心。如何将此位置（X，Y）映射到我的计算机屏幕像素（1366 x 768）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T07:47:20.837

好吧，您要么必须将头部固定到某个位置（这不是很实用），要么您**必须**适应面部位置。根据您的图像，您必须选择始终在该图像上且易于检测的点。如果您只有一个点（例如鼻子），则只能针对头部的 x/y 偏移进行调整。如果您有更多点（例如 4 个眼角、鼻子，可能还有嘴角），您还可以提取头部的 3 个旋转值，从而更好地计算视线方向。对于第一种方法，我猜只有眼睛的两个内角（它们“容易”检测到）会做。

我还建议使用校准序列。你在屏幕的角落向用户展示了一系列 4 个红点，他必须看着它们。然后，您可以记录学生的位置并在它们之间进行插值。

# z3 - 如何使用 z3 在定点中获得变量约束？

> ID：12243774
> 
> 赞同：1
> 
> 时间：2012-09-03T07:40:45.203
> 
> 标签：z3, z3-fixedpoint

我想得到定点phi中元素的约束，在下面的例子中，约束应该是c2<=c1+5.0, c1>=5.0 在Z3中应该如何实现呢？或者有什么办法不使用 Z3 中的定点

```
(set-option :produce-models true)
(set-option :dl_engine 1)
(set-option :dl_pdr_use_farkas true)
(declare-var c1 Real)
(declare-var c2 Real)
(declare-var lambda Real)
(declare-rel phi(Real Real))
(rule 
   (=>
      (and
        (>= lambda 0.0)
        (phi c1 c2)
      )
      (phi (+ c1 lambda) (+ c2 lambda))
   )
)
(rule 
    (=>
       (>= c1 5.0)
       (<= c2 10.0)
       (phi c1 c2)
    )
)

(query (phi c1 c2)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T12:49:14.023

Z3 不会尝试计算最小不动点。它试图建立可达性（derivability）或建立一个后定点，即查询不可到达（derivable）。所以它没有提供一种从一组规则中获得最小不动点的方法。

通过指定

```
 (query (phi c1 c2) :print-certificate true) 
```

Z3 将打印满足查询的最小定点成员对应的内容。

# python - Django - 当我扩展 index.html 时，我没有得到变量

> ID：12243776
> 
> 赞同：1
> 
> 时间：2012-09-03T07:40:48.727
> 
> 标签：python, django, django-templates, django-views

我为它写了一个 index.html 和一个 views.py。我得到日期并将月份数据转换为口头数据，如下所示。它适用于索引页面，但是当我从其他页面扩展索引页面时，日期不会到来。

```
def index(request):

    datenow = date.today()
    datemonth = date.today().month
    if datemonth == 8:
        date_month="Ağustos"
    elif datemonth == 9:
        date_month = "Eylül"
    elif datemonth == 10:
        date_month = "Ekim"
    elif datemonth == 11:
        date_month ="Kasım"
    elif datemonth == 12:
        date_month ="Aralık"
    elif datemonth == 1:
        date_month ="Ocak"
    elif datemonth == 2:
        date_month ="Şubat"
    elif datemonth == 3:
        date_month ="Mart"
    elif datemonth == 4:
        date_month ="Nisan"
    elif datemonth == 5:
        date_month ="Mayıs"
    elif datemonth == 6:
        date_month ="Haziran"
    elif datemonth == 7:
        date_month ="Temmuz"

    news = New.objects.all()[:10]
    programs= Program.objects.filter(date=date.today())
    print date.today()
    print date_month
    template = "index.html" 
    context = {'news':news,
               'programs':programs,
               'datenow':datenow,
               'date_month':date_month}
    return render_to_response(template,context,context_instance=RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T09:46:19.313

如果你想在每个页面中都有这个日期和时间，你应该使用 Django 上下文处理器[链接这里](https://docs.djangoproject.com/en/dev/ref/templates/api/#writing-your-own-context-processors)

```
def datetime(request):

    datenow = date.today()
    datemonth = date.today().month
    if datemonth == 8:
        date_month="Ağustos"
    elif datemonth == 9:
    date_month = "Eylül"
    elif datemonth == 10:
        date_month = "Ekim"
    elif datemonth == 11:
    date_month ="Kasım"
    elif datemonth == 12:
        date_month ="Aralık"
    elif datemonth == 1:
        date_month ="Ocak"
    elif datemonth == 2:
        date_month ="Şubat"
    elif datemonth == 3:
        date_month ="Mart"
    elif datemonth == 4:
        date_month ="Nisan"
    elif datemonth == 5:
        date_month ="Mayıs"
    elif datemonth == 6:
        date_month ="Haziran"
    elif datemonth == 7:
        date_month ="Temmuz"

context = {'datenow':datenow,'date_month':date_month}
return context 
```

在 settings.py

```
TEMPLATE_CONTEXT_PROCESSORS = (
    'django.core.context_processors.request',
    'django.contrib.auth.context_processors.auth',
    'django.core.context_processors.i18n',
    'django.core.context_processors.media',
    'django.core.context_processors.static',
    'django.contrib.messages.context_processors.messages',
    'django.core.context_processors.csrf',
    # Custom Context Proccessors
    'apps.your-app.context_processor.datetime',

) 
```

然后在 HTML 文件中，您可以使用

`{{ datenow }}`和`{{ date_month }}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T08:04:50.063

据我了解。你有一个从另一个页面延伸出来的页面。但另一个页面没有显示继承的数据。

这仅仅是因为`index.html`从`views.py`. 变量和更新是从`view.index()`

当另一个页面继承`index.html`时，它不会仅仅因为它是由另一个函数处理而不是更新日期`views.index()`（我希望我的想法在这里很清楚）。

解决问题的一个简单方法是复制 views.index 的内容并将变量再次发送到新的 html 模板。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T08:07:14.273

如果我理解您的问题，那么我认为您假设扩展 index.html 页面也扩展了由`def index(request)`. 不幸的是，您必须在每个视图中提供日期变量，因为模板`index.html`仅提供了一种以 html 格式查看变量的方法。

与其在每个视图中重复您的日期格式代码，这看起来像是自定义模板过滤器的一个很好的案例。看看将上面的索引函数转换为模板标签（参见[https://docs.djangoproject.com/en/dev/howto/custom-template-tags/](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/)），然后您可以在视图中设置日期，例如

```
def my_other_view(request):
    context = {'date': my_date } 
```

然后在您的模板文件中，您可以`my_date_template_filter`像这样构建使用

```
{extend 'index.html'}

{% block content %}
    {{ my_date|my_date_template_filter}}
{% endblock %} 
```

当然，您必须按照上面链接中的定义定义自定义模板过滤器。

# java - 更改 Swing 链接标签的禁用颜色

> ID：12243777
> 
> 赞同：1
> 
> 时间：2012-09-03T07:40:50.803
> 
> 标签：java, html, swing, jlabel

我正在使用 Java Swing 链接标签。当链接被禁用时，默认颜色为灰色，但我希望它为黑色。有没有办法改变禁用链接标签的颜色？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T16:03:12.727

并非所有外观实现都支持它，但您可以在实例化任何 GUI 元素之前尝试更改 UI 默认值：

```
UIManager.put("Label.disabledForeground", Color.black); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-03T07:45:28.967

因为`JLabel`你必须改变`opacity`，因为默认情况`JLabel`下`transparent`

```
JLabel.setOpaque(true);
JLabel.repaint(); 
// not required in most cases, but missed for MouseEvents in the API 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-03T07:43:28.963

是的，UIDefaults 只是打印出所有键，选择需要修改的键并更改值。之后启动 GUI

这将改变您的应用程序中的所有标签颜色，而不仅仅是 1 个实例。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-03T07:57:42.030

您可以尝试使用 HTML 标签，例如

```
welcomeLabel.setText(this.htmlIfy("<p style='color:#000000;'>Welcome</p>")); 
```

htmlIfy 函数在哪里

```
private static final String HTML = "<html>";
    private static final String HTML_END = "</html>";
public static String htmlIfy(String s) {
        return HTML.concat(s).concat(HTML_END);
    } 
```

# mysql - MySQL按问题排序

> ID：12243779
> 
> 赞同：0
> 
> 时间：2012-09-03T07:40:58.727
> 
> 标签：mysql, sql-order-by

我有以下代码..

```
echo "<form><center><input type=submit name=subs value='Submit'></center></form>";

$val=$_POST['resulta']; //this is from a textarea name='resulta'
if (isset($_POST['subs'])) //from submit name='subs'
{
    $aa=mysql_query("select max(reservno) as 'maxr' from reservation") or die(mysql_error()); //select maximum reservno
    $bb=mysql_fetch_array($aa);
    $cc=$bb['maxr'];
    $lines = explode("\n", $val);
    foreach ($lines as $line) {
        mysql_query("insert into location_list (reservno, location) values ('$cc', '$line')")
          or die(mysql_error()); //insert value of textarea then save it separately in location_list if \n is found
    } 
```

如果我在 textarea 上输入以下数据（假设我从预订表中有最大的 reservno '00014'），

```
Davao - Cebu
Cebu - Davao 
```

然后提交它，我将在我的 location_list 表中包含这些数据：

```
loc_id || reservno || location
00001  || 00014    || Davao - Cebu
00002  || 00014    || Cebu - Davao 
```

然后这段代码：

```
$gg=mysql_query("SELECT  GROUP_CONCAT(IF((@var_ctr := @var_ctr + 1) = @cnt, 
                            location, 
                            SUBSTRING_INDEX(location,' - ', 1)
                           ) 
                           ORDER BY loc_id ASC
                           SEPARATOR ' - ') AS locations

    FROM location_list, 
         (SELECT @cnt := COUNT(1), @var_ctr := 0 
          FROM location_list 
          WHERE reservno='$cc'
         ) dummy
    WHERE reservno='$cc'") or die(mysql_error()); //QUERY IN QUESTION
    $hh=mysql_fetch_array($gg);
    $ii=$hh['locations'];
    mysql_query("update reservation set itinerary = '$ii' where reservno = '$cc'")
      or die(mysql_error()); 
```

应该更新预订表，`'Davao - Cebu - Davao'`但它会返回这个，`'Davao - Cebu - Cebu'`. 我以前在这个论坛的帮助下让这段代码正常工作，但现在我面临另一个困难。只是无法让它工作。请帮我。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T09:13:15.137

`ORDER BY loc_id ASC`只要我将 phpMyAdmin 操作 loc_id 升序设置，我就可以正常工作（没有）。但是每当我删除所有数据时，它都会以 loc_id 降序返回，所以我必须重置它。它并不能完全解决问题，但我想这是我能做到的。:)) 我只需要确保表列 loc_id 始终按升序排列。谢谢你们每一个人的帮助！对此，我真的非常感激！但是，如果您有更好的答案，例如如何将表格列设置为始终按升序排列或更好的查询等，请随时在此处发布。愿上帝保佑你们！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T08:45:45.013

允许数据库服务器重写您的查询以优化其执行。这可能会影响各个部分的顺序，尤其是执行各种分配的顺序。我假设一些这样的重新编码会导致查询的结果变得未定义，这样它就可以在 sqlfiddle 上运行，但不能在您的实际生产系统上运行。

我无法确定出错的确切位置，但我认为问题的核心在于 SQL 旨在处理关系，但您却试图滥用它进行顺序编程。**我建议您使用可移植的 SQL 从数据库中检索数据，而无需任何变量骇客，然后使用 PHP 执行您可能需要的任何后处理。**PHP 更适合表达您正在制定的想法，并且不会对语句进行优化或重新排序。由于您的查询目前只产生一个值，因此在 PHP 代码中获取多行并将它们组合成一个值不会增加太多复杂性。

* * *

# 编辑：

在使用类似技术[讨论](https://stackoverflow.com/questions/12275048/get-a-query-to-list-the-records-that-are-on-and-in-between-the-start-and-the-end#comment16465116_12275747) [另一个答案时（](https://stackoverflow.com/a/12275747/1468366) [Omesh](https://stackoverflow.com/users/1514653/omesh)也是如此，就像您的代码所基于[的答案一样），我在](https://stackoverflow.com/a/12171808/1468366)[MySQL 手册](http://dev.mysql.com/doc/refman/5.6/en/user-variables.html)中发现了这一点：

> 作为一般规则，您永远不应为用户变量赋值并在同一语句中读取该值。您可能会得到预期的结果，但这不能保证。涉及用户变量的表达式的求值顺序是未定义的，并且可能会根据给定语句中包含的元素而改变；此外，不保证此顺序在 MySQL 服务器的版本之间是相同的。

因此，无法保证这些变量分配的评估顺序，因此无法保证查询符合您的预期。它可能会起作用，但它可能会突然而意外地失败。因此我强烈建议你避免这种方法，除非你有一些可靠的机制来检查结果的有效性，或者真的不关心它们是否有效。

# cron - 如何在 Aviarc 调度程序中指定自定义频率

> ID：12243786
> 
> 赞同：1
> 
> 时间：2012-09-03T07:41:31.313
> 
> 标签：cron, aviarc

我刚刚注意到 Aviarc 中的计划工作流运行器现在具有“自定义”频率。

我该如何指定？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T00:09:56.100

可用的工作流调度选项包括每日、每周、每月或 Cron。[因此，您可以使用Cron 语法](http://en.wikipedia.org/wiki/Cron#Examples)设置自定义计划频率。在调度面板中，还有一个语法指南和一个用于检查模式有效性的按钮。

# android - 更新列表视图下方空间的代码

> ID：12243789
> 
> 赞同：0
> 
> 时间：2012-09-03T07:41:49.237
> 
> 标签：android

```
<TextView
        android:id="@+id/_tv_title_labels"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="20dp"
        android:layout_marginTop="30dp"
        android:text="Profile Labels :"
        android:textColor="@drawable/black"
        android:textSize="14dp"
        android:textStyle="bold" />                 

    <RelativeLayout 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:layout_below="@+id/_tv_title_labels">

        <LinearLayout
            android:id="@+id/asda"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_above="@+id/TableLayout01"
            android:layout_marginLeft="50dp"
            android:layout_marginRight="40dp">

            <ListView
                android:id="@+id/_lv_labels"
                android:layout_width="wrap_content"
                android:layout_height="380dp"
                android:layout_weight="1"
                android:choiceMode="multipleChoice" >
            </ListView>

        </LinearLayout>

        <TableLayout
            android:id="@+id/TableLayout01"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true" 
            android:layout_alignRight="@+id/asda"
            android:paddingTop="20dp"
            android:gravity="bottom">

            <TableRow
                android:id="@+id/TableRow01"
                android:gravity="bottom" >

                <Button
                    android:id="@+id/_btn_scannewitem"
                    android:layout_width="90dp"
                    android:layout_height="wrap_content"
                    android:layout_marginRight="2dp"
                    android:text="Scan New Item" />

                <Button
                    android:id="@+id/_btn_saveNewItem"
                    android:layout_width="90dp"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="2dp"
                    android:text="Save Your Item"
                    android:visibility="gone" />

                <Button
                    android:id="@+id/_btn_changeprofile"
                    android:layout_width="80dp"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="2dp"
                    android:text="Change Profile" />
            </TableRow>
        </TableLayout>
    </RelativeLayout> 
```

但是当文本下方的空闲空间被删除时，这个空闲空间会在按钮上方找到。我的页面不应包含可用空间。我已经按照你的建议更新了代码，但我发现我的设计有任何变化。还是空间问题。 ![这里的空间在下面](../Images/8ce3de75f060c766bbf7866144d80d20.png)

![在此处输入图像描述](../Images/8ce3de75f060c766bbf7866144d80d20.png)

# svn - 原始 svn 基础文件丢失

> ID：12243793
> 
> 赞同：24
> 
> 时间：2012-09-03T07:42:08.910
> 
> 标签：svn, tortoisesvn

我正在尝试`svn update`使用 TortoiseSVN 对我的 SVN 工作副本，但更新失败，要求先执行清理。

但是，`svn cleanup`失败也表明`\.svn\pristine\20\20long-namecbf.svn-base file cannot be found`.

我已经尝试释放锁，但这也不起作用。

**知道我应该如何进行吗？**

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-07-23T03:07:45.040

这个问题：

> 找不到文件 .svn\pristine\24\24fd530d4bd82341fb514ab912c9e10adbc4ad89.svn-base

我从其他文件中复制了一个 svn-base 并将其重命名为 24fd530d4bd82341fb514ab912c9e10adbc4ad89.svn-base。并执行清理操作。之后我遇到了另一个文件丢失。使用相同的方式，最后我解决了这个问题。

从安装了 SilkSVN 的 Windows 命令行：

```
cd project directory
svn status 
```

这将产生错误。选择并复制目录和文件名文本，然后粘贴：

```
echo > .svn\pristine\<paste> 
```

例如：

```
echo > 24\24fd530d4bd82341fb514ab912c9e10adbc4ad89.svn-base 
```

有了这些知识，编写一个可以为每个人自动修复这些问题的批处理文件将是相当简单的。svn 命令将生成一个可以检查失败的 %ERRORLEVEL% 值。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2017-03-26T22:12:05.773

我解决了这个问题

1.  创建一个空文件 /workingdirectory/.svn/pristine/da/da39a3ee5e6b4b0d3255bfef95601800afd80009.svn-base

2.  运行**svn 清理**

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-02-01T06:44:57.743

我通过用刚签出的副本中的相同目录替换 .svn 目录而逃脱了。对我来说幸运的是，本地副本与 repo 的修订版相同。如果不是这种情况，不确定会产生什么影响。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-08-03T13:41:37.050

对我来说，文件在那里，但在名称后面附加了 (1)。(一份)ff4c7be3da460bb91144d6761cc5743536c983f4(1).svn-base

我删除了“（1）”并且清理运行良好 ff4c7be3da460bb91144d6761cc5743536c983f4.svn-base

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-02-28T15:25:23.973

接受了 chunguiw 的回答并为它写了一个 Python (2.7) 脚本，以防万一有人感兴趣。

它遵循以下程序：尝试清理，解析输出，触摸丢失的文件，重复直到完成。

```
import os
import sys
import subprocess
import re

def touch(fname, times=None):
    with open(fname, 'a'):
        os.utime(fname, times)

svnbase_regex = re.compile(r"svn: E720002: Can't open file \'([^']+)\':")

if __name__ == "__main__":
    # Can pass SVN working copy's root folder as a parameter, otherwise runs on CWD
    try:
        root_folder = sys.argv[1]
    except IndexError:
        root_folder = "."
    root_folder = os.path.abspath(root_folder)
    os.chdir(root_folder)
    count = max_times = 10
    # Repeats file touching at most N times (the number above)
    while count > 0:
        count -= 1
        try:
            svn_output = subprocess.check_output("svn cleanup", stderr=subprocess.STDOUT)
        except subprocess.CalledProcessError, e:
            svn_output = e.output
        regex_match = svnbase_regex.search(svn_output)
        if not regex_match:
            break
        touch(regex_match.group(1))
        print "Done %s" % regex_match.group(1)
    print "Exited, fixed up %s missing entries." % (max_times - count)
    print "last SVN output:"
    print svn_output 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-02T07:25:55.697

您可以使用[SmartSVN](http://www.smartsvn.com/)恢复丢失的原始文件。
下载并安装它。它不是免费的，但 30 天的免费试用应该足以修复您的存储库。 **在SmartSVN**
中打开您的工作副本。要修复，请选择***修改***>***验证管理区域...*** 享受吧！

 ******* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-04-18T18:05:50.113

这也可以作为单线：

```
while [ 1 ] ; do OUTPUT=`svn cleanup 2>&1 | sed 's/^.* open file //' | sed 's/:.*$//' | sed "s/'//g"`;if [ "X${OUTPUT}" == "X" ] ; then   break; fi; echo $OUTPUT;touch $OUTPUT;done 
```******

# mysql - MySQL - 如何从动态查询中获取字段值？

> ID：12243800
> 
> 赞同：0
> 
> 时间：2012-09-03T07:42:27.700
> 
> 标签：mysql, stored-procedures

我想知道如何从动态查询中获取字段值。我在 MySQL 中的存储过程上执行此操作。我有以下代码：

```
...
DECLARE l_query VARCHAR(500);
DECLARE l_table VARCHAR(50);

SET l_table = 'tb_user';
SET @l_query = concat('SELECT count(1) FROM ', l_table);
-- #Note that l_table will not always for tb_user,
-- it can be changed with other table name.

PREPARE l_sql FROM @l_query;
EXECUTE l_sql;
... 
```

问题是，如何获取计数结果 ( `count(1)`) 的值 ..？
我需要这个值，因为**它将在同一个存储过程的下一个进程中使用**。

非常感谢之前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T07:45:18.963

Short：用于`SELECT INTO`将值选择到变量中。

在你的情况下：

```
...
DECLARE l_query VARCHAR(500);
DECLARE l_table VARCHAR(50);
DECLARE cnt INTEGER;

SET l_table = 'tb_user';
SET @l_query = concat('SELECT count(1) INTO @cnt FROM ', l_table);
-- #Note that l_table will not always for tb_user,
-- it can be changed with other table name.

PREPARE l_sql FROM @l_query;
EXECUTE l_sql;
-- Use cnt variable here
... 
```

# python - Python获取图像矩阵PIL

> ID：12243803
> 
> 赞同：9
> 
> 时间：2012-09-03T07:42:44.343
> 
> 标签：python, numpy, python-imaging-library

我正在尝试加载图像，对其进行转换并打印矩阵。我有以下代码；

```
im = Image.open("1.jpg")
im = im.convert("L")
print im 
```

当我打印“我”时，我得到了这个`<PIL.Image.Image image mode=L size=92x112 at 0x2F905F8>`。我怎样才能看到图像矩阵？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-03T07:50:16.433

You can use `numpy.asarray()`:

```
>>> import Image, numpy
>>> numpy.asarray(Image.open('1.jpg').convert('L')) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-03T10:22:27.617

Function load will give you access to pixels like this:

```
b = im.load()
print b[x,y]
b[x,y] = 128    # or a tupple if you use another color mode 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-03T07:49:39.187

`im.show()`将在弹出窗口中显示它。

`im.tostring()`将图像转储为字节字符串。

`im.save()`将其保存到文件中。

# wordpress - Wordpress - 在同一页面中单独的登录和注册表格

> ID：12243808
> 
> 赞同：2
> 
> 时间：2012-09-03T07:43:10.810
> 
> 标签：wordpress, plugins, login, registration

我需要在 Wordpress 中创建一个页面。在其中我需要三个选项卡：登录、注册、忘记密码。显然，它们将包含一个登录表单、一个注册表单和一个密码恢复表单。我在这里找到了有关如何创建自定义登录表单的说明：

[http://www.tutorialstag.com/custom-wordpress-login-without-using-a-plugin.html](http://www.tutorialstag.com/custom-wordpress-login-without-using-a-plugin.html)

以及如何在此处创建自定义注册表单：

[http://www.tutorialstag.com/create-custom-wordpress-registration-page.html](http://www.tutorialstag.com/create-custom-wordpress-registration-page.html)

这两个解决方案对我来说似乎很好，所以我想使用它们。出现问题是因为两个代码都使用 $_POST 发送数据，并且它们都在 if($_POST) 循环中执行某些代码。现在，如果我将两个代码放在同一个页面上，并且如果用户尝试登录，它也会触发注册表单的 if($_POST) 循环，反之亦然。

有没有办法让我分开这两个循环，比如 if($_POST['login']) 和 if($_POST['register']) 或其他方式？

理想情况下，我想创建一个插件，为登录表单、注册表单和忘记密码表单添加简码。分离代码并让它们在同一页面中协同工作的最佳方法是什么？

另外，是否有更简单的方法来实现我所需要的？我尝试寻找可能看起来相似但没有运气的插件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T12:24:57.307

是的，和你在这里描述的差不多。

在每个提交按钮上设置“名称”属性 - 例如

```
<input type="submit" name="login" value="Login" class="mybtnclass" /> 
```

然后在解析时，检查是否设置了该值

```
if(isset($_POST['login'])) :
  // Do login
elseif(isset($_POST['register'])) :
  // Do registration
elseif(isset($_POST['reset'])) :
  // Do password reset
endif; 
```

编辑：

另一种方法是为所有按钮提供相同的“名称”，然后测试“值”属性以确定哪个按钮被按下，例如

```
<input type="submit" name="submit" value="Login" class="mybtnclass" />
<input type="submit" name="submit" value="Register" class="mybtnclass" />
<input type="submit" name="submit" value="Reset Password" class="mybtnclass" />

<?php
if('Login'===$_POST['submit']) : 
  // Do login
elseif('Register'===$_POST['submit']) : 
  // Do register
elseif('Reset Password'===$_POST['submit']) : 
  // Do password reset
endif;
?> 
```

# javascript - 将 Google 翻译添加到网站

> ID：12243818
> 
> 赞同：15
> 
> 时间：2012-09-03T07:44:19.050
> 
> 标签：javascript, html, css, google-translate

看这里[谷歌翻译](https://translate.google.com/manager/)我得到以下代码。

```
<meta name="google-translate-customization" content="9f841e7780177523-3214ceb76f765f38-gc38c6fe6f9d06436-c"></meta>

<div id="google_translate_element">
</div>
<script type="text/javascript">
  function googleTranslateElementInit() {
    new google.translate.TranslateElement({pageLanguage: 'en', layout: google.translate.TranslateElement.InlineLayout.SIMPLE}, 'google_translate_element');
  }
</script>
<script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script> 
```

但是在这里查看[html-5-tutorial](http://www.html-5-tutorial.com/)，在右上角，我看到以下代码：

```
<div class="translate">
  <div id="google_translate_element">
    <div dir="ltr" class="skiptranslate goog-te-gadget">
      <div id=":0.targetLanguage">
        <select class="goog-te-combo">
          <option value="">Select Language</option>
          <option value="af">Afrikaans</option>
          <option value="sq">Albanian</option>
          <option value="ar">Arabic</option>
          <option value="hy">Armenian</option>
          <option value="az">Azerbaijani</option>
          <option value="eu">Basque</option>
          <option value="be">Belarusian</option>
          <option value="bn">Bengali</option>
          <option value="bg">Bulgarian</option>
          <option value="ca">Catalan</option>
          <option value="zh-CN">Chinese (Simplified)</option>
          <option value="zh-TW">Chinese (Traditional)</option>
          <option value="hr">Croatian</option>
          <option value="cs">Czech</option>
          <option value="da">Danish</option>
          <option value="nl">Dutch</option>
          <option value="eo">Esperanto</option>
          <option value="et">Estonian</option>
          <option value="tl">Filipino</option>
          <option value="fi">Finnish</option>
          <option value="fr">French</option>
          <option value="gl">Galician</option>
          <option value="ka">Georgian</option>
          <option value="de">German</option>
          <option value="el">Greek</option>
          <option value="gu">Gujarati</option>
          <option value="ht">Haitian Creole</option>
          <option value="iw">Hebrew</option>
          <option value="hi">Hindi</option>
          <option value="hu">Hungarian</option>
          <option value="is">Icelandic</option>
          <option value="id">Indonesian</option>
          <option value="ga">Irish</option>
          <option value="it">Italian</option>
          <option value="ja">Japanese</option>
          <option value="kn">Kannada</option>
          <option value="ko">Korean</option>
          <option value="la">Latin</option>
          <option value="lv">Latvian</option>
          <option value="lt">Lithuanian</option>
          <option value="mk">Macedonian</option>
          <option value="ms">Malay</option>
          <option value="mt">Maltese</option>
          <option value="no">Norwegian</option>
          <option value="fa">Persian</option>
          <option value="pl">Polish</option>
          <option value="pt">Portuguese</option>
          <option value="ro">Romanian</option>
          <option value="ru">Russian</option>
          <option value="sr">Serbian</option>
          <option value="sk">Slovak</option>
          <option value="sl">Slovenian</option>
          <option value="es">Spanish</option>
          <option value="sw">Swahili</option>
          <option value="sv">Swedish</option>
          <option value="ta">Tamil</option>
          <option value="te">Telugu</option>
          <option value="th">Thai</option>
          <option value="tr">Turkish</option>
          <option value="uk">Ukrainian</option>
          <option value="ur">Urdu</option>
          <option value="vi">Vietnamese</option>
          <option value="cy">Welsh</option>
          <option value="yi">Yiddish</option>
        </select>
      </div>
      Powered by 
      <span style="white-space: nowrap;">
        <a class="goog-logo-link" href="http://translate.google.com" target="_blank">
          <img style="padding-right: 3px;" src="http://www.google.com/images/logos/google_logo_41.png" width="37" height="13">
          Translate
        </a>
      </span>
    </div>
  </div>
  <script>
    function googleTranslateElementInit() {
      new google.translate.TranslateElement({
        pageLanguage: 'en'
      }, 'google_translate_element');
    }
  </script>
</div> 
```

前者仅适用于实时站点，而不适用于本地计算机，因此我无法使用 CSS 定位和设置样式。它也不包含任何 SELECT 和 OPTION 标记。

后者包含 SELECT 和 OPTION 标记，但如果我复制并粘贴整个代码，它在实时站点上不起作用。

我想我的问题是如何使用后来的标记来实现谷歌翻译？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-03T07:54:40.457

这是应该在本地和远程工作的标记 - 从[https://www.w3schools.com/howto/howto_google_translate.asp](https://www.w3schools.com/howto/howto_google_translate.asp)复制：

```
<div id="google_translate_element"></div>
<script>
    function googleTranslateElementInit() {
        new google.translate.TranslateElement(
            {pageLanguage: 'en'},
            'google_translate_element'
        );
    }
</script>
<script src="http://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-08-03T03:59:32.210

```
<div id="google_translate_element"></div>
<script type="text/javascript">
  function googleTranslateElementInit() {
    new google.translate.TranslateElement({
      pageLanguage: 'en',
      includedLanguages: 'es',
      layout: google.translate.TranslateElement.InlineLayout.SIMPLE
    }, 'google_translate_element');
  }
</script>
<script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-10T19:02:33.553

让谷歌翻译成为移动友好摆脱布局部分，布局：google.translate.TranslateElement.InlineLayout.SIMPLE

```
<div id="google_translate_element">
</div>
<script type="text/javascript">
function googleTranslateElementInit() {
new google.translate.TranslateElement({pageLanguage: 'en'}, 'google_translate_element');
}
</script>
<script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script> 
```

它适用于我的网站，并且对移动设备友好。[https://livinghisword.org/articles/pages/whoiscernandisourworld.php](https://livinghisword.org/articles/pages/whoiscernandisourworld.php)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-26T13:09:35.660

```
function googleTranslateElementInit() {
  new google.translate.TranslateElement(
    {pageLanguage: 'en'},
    'google_translate_element'
  );
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-05T05:56:22.910

```
{{-- Google Language Translator  START --}}
<style>
.google-translate {
    display: inline-block;
    vertical-align: top;
    padding-top: 15px;
}

.goog-logo-link {
    display: none !important;
}

.goog-te-gadget {
    color: transparent !important;
}

#google_translate_element {
    display: none;
}

.goog-te-banner-frame.skiptranslate {
    display: none !important;
}

body {
    top: 0px !important;
}

</style>

<script src="{{asset('js/translate-google.js')}}"></script>

<script type="text/javascript">
function googleTranslateElementInit2(){
    new google.translate.TranslateElement({
                    pageLanguage:'en',
                    includedLanguages: 'en,es',
        // https://ctrlq.org/code/19899-google-translate-languages
        // includedLanguages: 'en,it,la,fr',
        // layout:     google.translate.TranslateElement.InlineLayout.SIMPLE,
        autoDisplay:true
    },'google_translate_element2');
    var a = document.querySelector("#google_translate_element select");
    // console.log(a);

    if(a){
        a.selectedIndex=1;
        a.dispatchEvent(new Event('change'));
    }
}
</script>

<ul class="navbar-nav my-lg-0 m-r-10">
<li>
    <div class="google-translate">
        <div id="google_translate_element2"></div>
    </div>
</li> 
```

{{-- 谷歌语言翻译结束 --}}

```
// translate-google.js
(function () {
var gtConstEvalStartTime = new Date();

function d(b) {
    var a = document.getElementsByTagName("head")[0];
    a || (a = document.body.parentNode.appendChild(document.createElement("head")));
    a.appendChild(b)
}

function _loadJs(b) {
    // console.log(b);
    var a = document.createElement("script");
    a.type = "text/javascript";
    a.charset = "UTF-8";
    a.src = b;
    d(a)
}

function _loadCss(b) {
    var a = document.createElement("link");
    a.type = "text/css";
    a.rel = "stylesheet";
    a.charset = "UTF-8";
    a.href = b;
    d(a)
}

function _isNS(b) {
    b = b.split(".");
    for (var a = window, c = 0; c < b.length; ++c)
        if (!(a = a[b[c]])) return !1;
    return !0
}

function _setupNS(b) {
    b = b.split(".");
    for (var a = window, c = 0; c < b.length; ++c) a.hasOwnProperty ? a.hasOwnProperty(b[c]) ? a = a[b[c]] : a = a[b[c]] = {} : a = a[b[c]] || (a[b[c]] = {});
    return a
}
window.addEventListener && "undefined" == typeof document.readyState && window.addEventListener("DOMContentLoaded", function () {
    document.readyState = "complete"
}, !1);
if (_isNS('google.translate.Element')) {
    return
}(function () {
    var c = _setupNS('google.translate._const');
    c._cest = gtConstEvalStartTime;
    gtConstEvalStartTime = undefined;
    c._cl = 'en';
    c._cuc = 'googleTranslateElementInit2';
    c._cac = '';
    c._cam = '';
    c._ctkk = eval('((function(){var a\x3d3002255536;var b\x3d-2533142796;return 425386+\x27.\x27+(a+b)})())');
    var h = 'translate.googleapis.com';
    var s = (true ? 'https' : window.location.protocol == 'https:' ? 'https' : 'http') + '://';
    var b = s + h;
    c._pah = h;
    c._pas = s;
    c._pbi = b + '/translate_static/img/te_bk.gif';
    c._pci = b + '/translate_static/img/te_ctrl3.gif';
    c._pli = b + '/translate_static/img/loading.gif';
    c._plla = h + '/translate_a/l';
    c._pmi = b + '/translate_static/img/mini_google.png';
    c._ps = b + '/translate_static/css/translateelement.css';
    c._puh = 'translate.google.com';
    _loadCss(c._ps);
    _loadJs(b + '/translate_static/js/element/main.js');
})();
})(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-12-16T09:10:26.670

```
<script type="text/javascript" src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
<script type="text/javascript">
  function googleTranslateElementInit() {
      new google.translate.TranslateElement({pageLanguage: 'en'}, 'google_translate_element');
  }
</script> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-01-21T19:07:30.293

实现[谷歌翻译 html 代码](https://www.coderepublics.com/howto/how-to-google-translate.php)非常容易。在您的项目中使用此代码，希望对您有所帮助。

```
 <div id="google_translate_element"></div>
<script> 
function googleTranslateElementInit() {
  new google.translate.TranslateElement({
    pageLanguage: 'en'
  }, 'google_translate_element');
}
</script>
<script src="http://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-04-13T19:05:47.760

```
<div id="google_translate_element"></div><script type="text/javascript">
function googleTranslateElementInit() {
  new google.translate.TranslateElement({pageLanguage: 'fr', layout: google.translate.TranslateElement.FloatPosition.TOP_RIGHT}, 'google_translate_element');
}
</script><script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-03-31T11:35:35.450

2021 此遗留代码在 mycase [Github中有效](https://github.com/nofikoff/google-translate-js-in-one-click/blob/master/index.html)

我修改了这些家伙 gtranslate.io 的代码。它在所有现代浏览器中的工作原理示例[https://pogonyalo.com 。](https://pogonyalo.com)

更新：如果您想选择应该翻译的内容 - 只需将 class="notranslate" 添加到不应翻译的元素中。

[![在此处输入图像描述](../Images/2261322499bf4636ca51d92899576c3c.png)](https://i.stack.imgur.com/crXrG.png)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-09-27T12:36:09.720

**代码**

```
<div id="google_translate_element"></div>
<script type="text/javascript">
function googleTranslateElementInit() {
  new google.translate.TranslateElement({pageLanguage: 'hi', layout: google.translate.TranslateElement.InlineLayout.SIMPLE}, 'google_translate_element');
}
</script>
<script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script> 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-09-20T07:33:11.080

```
<div id="google_translate_element"></div><script type="text/javascript">
function googleTranslateElementInit() {
  new google.translate.TranslateElement({pageLanguage: 'en', includedLanguages: 'ar', layout: google.translate.TranslateElement.InlineLayout.SIMPLE}, 'google_translate_element');
}
</script><script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script> 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2016-12-04T16:00:50.057

```
<div id="google_translate_element"></div><script type="text/javascript">
function googleTranslateElementInit() {
  new google.translate.TranslateElement({pageLanguage: 'ko', layout: google.translate.TranslateElement.InlineLayout.SIMPLE}, 'google_translate_element');
}
</script><script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script> 
```

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2016-06-27T21:05:43.990

```
<div id="google_translate_element"></div><script type="text/javascript">
function googleTranslateElementInit() {
  new google.translate.TranslateElement({pageLanguage: 'en', includedLanguages: 'th,zh-CN,zh-TW', layout: google.translate.TranslateElement.InlineLayout.SIMPLE}, 'google_translate_element');
}
</script><script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script> 
```

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2017-01-23T20:59:53.747

```
<div id="google_translate_element"></div><script type="text/javascript">
function googleTranslateElementInit() {
  new google.translate.TranslateElement({pageLanguage: 'en', includedLanguages: 'ar', layout: google.translate.TranslateElement.InlineLayout.SIMPLE}, 'google_translate_element');
}
</script><script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script> 
```

* * *

## 回答 #15

> 赞同：-4
> 
> 时间：2016-08-13T07:41:38.363

利用：

```
c._ctkk=eval('((function(){var a\x3d2143197373;var b\x3d-58933561;return 408631+\x27.\x27+(a+b)})())'); 
```

```
<script type="text/javascript"> 
    (function(){
        var d="text/javascript",e="text/css",f="stylesheet",g="script",h="link",k="head",l="complete",m="UTF-8",n=".";
        function p(b){
            var a=document.getElementsByTagName(k)[0];
            a||(a=document.body.parentNode.appendChild(document.createElement(k)));
            a.appendChild(b)}
        function _loadJs(b){
            var a=document.createElement(g);
            a.type=d;
            a.charset=m;
            a.src=b;
            p(a)}
        function _loadCss(b){
            var a=document.createElement(h);
            a.type=e;
            a.rel=f;
            a.charset=m;
            a.href=b;
            p(a)}
        function _isNS(b){
            b=b.split(n);
            for(var a=window,c=0;c<b.length;++c)
                if(!(a=a[b[c]])) return ! 1;
            return ! 0}
        function _setupNS(b){
            b=b.split(n);
            for(var a=window,c=0;c<b.length;++c)
                a.hasOwnProperty?a.hasOwnProperty(b[c])?a=a[b[c]]:a=a[b[c]]={}:a=a[b[c]]||(a[b[c]]={});
            return a}
        window.addEventListener&&"undefined"==typeof document.readyState&&window.addEventListener("DOMContentLoaded",function(){document.readyState=l},!1);
    if (_isNS('google.translate.Element')){return}
    (function(){
        var c=_setupNS('google.translate._const');
        c._cl='en';
        c._cuc='googleTranslateElementInit1';
        c._cac='';
        c._cam='';
        c._ctkk=eval('((function(){var a\x3d2143197373;var b\x3d-58933561;return 408631+\x27.\x27+(a+b)})())');
        var h='translate.googleapis.com';
        var s=(true?'https':window.location.protocol=='https:'?'https':'http')+'://';
        var b=s+h;
        c._pah=h;
        c._pas=s;
        c._pbi=b+'/translate_static/img/te_bk.gif';
        c._pci=b+'/translate_static/img/te_ctrl3.gif';
        c._pli=b+'/translate_static/img/loading.gif';
        c._plla=h+'/translate_a/l';
        c._pmi=b+'/translate_static/img/mini_google.png';
        c._ps=b+'/translate_static/css/translateelement.css';
        c._puh='translate.google.com';
        _loadCss(c._ps);
        _loadJs(b+'/translate_static/js/element/main.js');
    })();
    })();
</script> 
```

# c# - 不排除空格的文件名的正则表达式

> ID：12243820
> 
> 赞同：2
> 
> 时间：2012-09-03T07:44:30.160
> 
> 标签：c#, regex, file-extension

我一直在使用这个正则表达式从文件路径字符串中提取文件名：

```
Regex r = new Regex(@"\w+[.]\w+$+"); 
```

只要文件名中没有空格，这将有效。例如：

```
r.Match("c:\somestuff\myfile.doc").Value = "myfile.doc"
r.Match("c:\somestuff\my file.doc").Value = "file.doc" 
```

我需要我的正则表达式给我“我的 file.doc”，而不仅仅是“file.doc”

我试着自己弄乱这个表情。特别是我在得知那是为了匹配空格之后尝试添加 \s+ 。我没有得到我希望的结果。

我确实设计了一个解决方案来完成工作：我从字符串的末尾开始，向后退直到到达反斜杠。这给了我以相反顺序的文件名（即 cod.elifym）到一个字符数组中，然后我使用 Array.Reverse() 来扭转它。但是我想通过简单地修改我原来的正则表达式来学习如何实现这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T07:47:10.447

它必须是正则表达式吗？请改用[System.IO.Path.GetFileName()](http://msdn.microsoft.com/en-us/library/system.io.path.getfilename.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T07:47:40.773

```
Regex r = new Regex(@"[\w ]+\.\w+$"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T07:47:09.477

一个有效的[正则表达式](http://regexr.com?3216d)可能看起来像：

```
[^\\]+$ 
```

考虑使用：

```
System.IO.Path.GetFileName(path) 
```

# php - 显示 5-6 种货币汇率/转换的简单方法？

> ID：12243823
> 
> 赞同：-4
> 
> 时间：2012-09-03T07:44:40.253
> 
> 标签：php, javascript, wordpress, currency

我正在寻找一种方法来显示一个包含 5-6 种货币汇率的简单表格。只需一个简单的代码即可显示 1 美元在欧元、挪威克朗、丹麦克朗、英镑等中的价值...

有没有人有解决这个问题的好方法？

[已解决] 如果将来有人需要，我在这里找到了一个很好的解决方案： [http ://www.dynamicguru.com/php/currency-conversion-using-php-and-google-calculator-api/#more-285](http://www.dynamicguru.com/php/currency-conversion-using-php-and-google-calculator-api/#more-285)

这是我使用它的方式：

```
<?php
function currency($from_Currency,$to_Currency,$amount) {
$amount = urlencode($amount);
$from_Currency = urlencode($from_Currency);
$to_Currency = urlencode($to_Currency);
$url = "http://www.google.com/ig/calculator?hl=en&q=$amount$from_Currency=?$to_Currency";
$ch = curl_init();
$timeout = 0;
curl_setopt ($ch, CURLOPT_URL, $url);
curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt ($ch, CURLOPT_USERAGENT , "Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1)");
curl_setopt ($ch, CURLOPT_CONNECTTIMEOUT, $timeout);
$rawdata = curl_exec($ch);
curl_close($ch);
$data = explode('"', $rawdata);
$data = explode('"', $data['3']);
$var = $data['0'];
return round($var,1);
}
?>

<strong>Results:</strong><br />
100NOK to USD = <?php echo currency("NOK","USD",100); ?><br />
100NOK to EUR = <?php echo currency("NOK","EUR",100); ?><br />
100NOK to GBP = <?php echo currency("NOK","GBP",100); ?><br />
100NOK to SEK = <?php echo currency("NOK","SEK",100); ?><br />
100NOK to DKK = <?php echo currency("NOK","DKK",100); ?><br /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T07:50:24.117

You can always use Google's Currency converter

Here is a start point:

```
http://www.google.com/ig/calculator?hl=en&q=1USD=?EUR 
```

# asp.net-mvc - 在 MVC 的 Telerik Grid 中禁用复选框

> ID：12243825
> 
> 赞同：0
> 
> 时间：2012-09-03T07:44:53.380
> 
> 标签：asp.net-mvc, asp.net-mvc-3, telerik, telerik-grid, client-side-templating

是否可以在 MVC 模式的 Telerik gridview 中禁用复选框？我正在使用 clientTemplate 而不是服务器端。要求为 - 需要根据相应行中另一列中的值禁用包含复选框的列。是否可以在 Javascript 中实现？如果我不清楚，请告诉我。

提前致谢..

```
columns.Bound(i => i.Visible).ClientTemplate("<input type='checkbox' disabled='disabled' <#=Visible? checked='checked' : '' #> />").Width("7%"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T07:14:28.183

您可以在 RowDataBound 时使用客户端事件执行此操作。做类似这段代码的事情。

```
 function onRowDataBound(e) {

    if (e.dataItem.ColumnB == "MatchingValue") {
        $(e.row).find('#checkboxId').attr("disabled", true);

    } 
```

# testing - 如何编写一个在windows中对c、cpp程序执行测试的工具？

> ID：12243828
> 
> 赞同：0
> 
> 时间：2012-09-03T07:45:24.463
> 
> 标签：testing, cmd

我想在windows中编写一个工具，在windows上编译ac/cpp程序并对其执行一系列测试？

它实际上就像[Spoj.pl](http://www.spoj.pl/) .. 我在 linux 中使用`fork()`. 但我不能在 Windows 中。谁能告诉我应该从哪里开始？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T08:26:41.757

Windows 有自己的功能来创建新进程，但也许你不想那样做。相反，了解如何从命令行运行 C 编译器，然后使用[Python](http://www.python.org/)或[PowerShell](http://en.wikipedia.org/wiki/Windows_PowerShell)等脚本语言来运行它和测试。

使用脚本语言的优势在于它们拥有强大的工具来创建进程并与它们对话；加上 Python 随附电池，因此使用它创建测试结果的漂亮报告非常简单。

# java - j-interop 无法通过 WMI 监控 Win7

> ID：12243830
> 
> 赞同：0
> 
> 时间：2012-09-03T07:45:32.297
> 
> 标签：java, wmi, jacob, opennms, j-interop

我使用 j-interop 通过 Java 中的 WMI 监控 Windows 系统。它确实适用于从 Windows 和 Linux 客户端监视远程 WinXP。但是从 Windows 和 Linux 客户端远程监控 Windows7 不起作用。我还检查了 OpenNMS，它也使用了 j-interop，也不适用于 Win7。我的问题是：

1.  是否有任何解决方法可以让 j-interop 用于监控 Windows7？
2.  是否有任何其他 java 库可以跨平台工作而没有 Windows 7 问题？我已经测试了 JACOB，它确实适用于 Windows7，但它不是跨平台的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T07:07:41.890

1.  以“管理员”身份启动“regedit.exe”
    1.  找到以下注册表项：'HKEY_CLASSES_ROOT\CLSID{76A64158-CB41-11D1-8B02-00600806D9B6}'
    2.  右键单击并选择“权限”
    3.  单击“高级”按钮。
    4.  选择标有“所有者”的标签
    5.  添加您要允许连接到所有者列表的用户
    6.  单击“确定”按钮。
    7.  现在突出显示用户并授予完全控制权
    8.  点击“确定”

取自“http://www.opennms.org/wiki/WmiConfiguration”；

我已经测试过它确实适用于Win7

# android - Spinner OnItemSelectedListener 问题

> ID：12243834
> 
> 赞同：1
> 
> 时间：2012-09-03T07:46:10.790
> 
> 标签：android, listener, android-spinner

我的微调器控制有问题。我正在尝试动态设置微调器项目。最初我在微调器中有一个项目。

当我尝试注册 spinner.setOnItemSelect 侦听器时，它会立即调用它的 onItemSelected 方法。但是，我不想在我的活动开始后立即调用此方法。

所以为此我提出了以下条件。

```
public class SpinnerActivity extends Activity implements OnItemSelectedListener {

Spinner spinner;

String[] str_arr = {"aaaaaaaa"};

private int mSpinnerCount=0;

private int mSpinnerInitializedCount=0;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_spinner);

    spinner = (Spinner) findViewById(R.id.spinner1);

    spinner.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, str_arr));

    spinner.setOnItemSelectedListener(this);        

    mSpinnerCount=1;

}

@Override
public void onItemSelected(AdapterView<?> adapterView, View view, int position, long id) {

    if (mSpinnerInitializedCount < mSpinnerCount) {
        mSpinnerInitializedCount++;
    }

    else {

        Intent intent = new Intent(this, NextActivity.class);
        startActivity(intent);
    }

}

@Override
public void onNothingSelected(AdapterView<?> arg0) {

}
  } 
```

但是当我尝试在微调器上选择一个项目时，它会在 logcat 中给出以下警告，

09-03 13:02:02.528: W/InputManagerService(59): 窗口已经聚焦，忽略焦点增益：com.android.internal.view.IInputMethodClient$Stub$Proxy@450fafb8

我的想法是，除非微调项不会更改，否则不会调用此方法。

但是我在微调器中有一个价值，那么如何获得焦点，有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T07:58:49.177

试试我在评论中所说的...

```
@Override
public void onItemSelected(AdapterView<?> adapterView, View view, int position, long id) {

    if (position > 0) {
       //Your actions
    }

    else {
      // Nothing or can show a toast to say user to select a value... 
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T12:03:28.583

像这样试试

```
@Override
public void onItemSelected(AdapterView<?> adapterView, View view, int position, long id) {

    if (position != 0) {
       //put your actions here
    }

    else {
      // nothing here or toast 
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T07:56:10.223

当您尝试打开已打开的窗口或尝试对已聚焦的视图执行类似 onFocus 之类的操作时，您会收到此警告。

在这里，您已经在 Spinner 中选择了项目

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T07:52:18.010

我认为下面的代码不正确，因为您实现了 OnItemSelectedListener

```
spinner.setOnItemSelectedListener(this); 
```

# jakarta-ee - Java EE Servlet 作为 XMPP 连接器的容器

> ID：12243841
> 
> 赞同：3
> 
> 时间：2012-09-03T07:47:06.033
> 
> 标签：jakarta-ee, servlets, xmpp

我正在 WebLogic 10.3.5 上编写我的第一个 Java EE 5 应用程序。并且需要一些架构建议。

当应用程序启动时，我需要打开到 XMPP 服务器的持久连接以发送即时消息。消息将不断地从表格中提取，该表格将由应用程序的另一部分填充。

正如我所看到的，我不能为此使用容器管理的对象，例如 EJB，因为这样我就无法控制对象和套接字连接的生命周期。

Servlet 是否适合以应用程序开头并持有持久套接字连接的进程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T09:55:03.763

看起来您将使用 Markus Eisele 在他的博文中列出的选项[之一](http://blog.eisele.net/2010/12/seven-ways-to-get-things-started-java.html)。提到了应用程序生命周期侦听器的特定于 Weblogic 的机制（但它不是纯 Java EE）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T16:26:30.433

我通过创建实例化 EJB 3.0 无状态会话 bean 的 ServletContextListener 解决了这个问题。

然后会话 bean 使用 @PostConstruct 方法实例化 XMPP 连接并使用 @PreDestroy 方法关闭连接。

我让会话 bean 使用 EJB 3.0 计时器每隔几分钟轮询一次消息队列表。

# localhost - 如何将 url 重定向到 localhost？

> ID：12243845
> 
> 赞同：2
> 
> 时间：2012-09-03T07:47:14.223
> 
> 标签：localhost, windows-server-2008-r2, ipv6, ipv4

我想在我的 Windows 2008 R2 服务器上做一些测试。也就是说，让一个 URL 重定向到`localhost`.

例如，让`"http://mysample.mydomain.com/index.html"`实际访问“http://localhost/index.html”。有什么办法可以做到这一点吗？

我试图编辑`windows\system32\drivers\etc\hosts`文件，添加`127.0.0.1 -> mysample.mydomain.com`映射，但它不起作用。看起来`127.0.0.1`和`localhost`不一样。我可以访问“http://localhost/index.html”，但无法访问“http://127.0.0.1/index.html”！

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T07:52:57.920

编写从 System.Web.UI.Page 继承的类，然后在加载时覆盖：

```
public abstract class CorePage : Page
{
    protected override void OnLoad(EventArgs e)
    {
        base.OnLoad(e);

        //TODO: check request url and make a redirect if required!

    }
} 
```

将所有页面更改为从 CorePage 继承，工作就完成了！这当然只适用于应用程序级别的 aspx 页面，而不适用于整个 IIS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T17:34:22.783

由于您使用的是 Windows 2008 R2 服务器，我猜您正在使用 IIS 进行测试。另请注意，Windows Server 2008 是第一个默认“启用”IPv6 的 Windows 版本 - 但您的 IPv4 版本是否也启用了...？

```
Enable IPv4: [Control panel > Network and sharing center > Change adapter settings > Right click the adapter used for connectivity and select properties > See if IPv4 is checked. ] 
```

我认为您的 localhost 在内部已被解析为使用 ::1 (IPv6) 环回地址。您可以通过检查来确认：

对于 IPv6 测试：`ping localhost -6`和对于 IPv4 测试：`ping localhost -4`. 如果它解析为 ::1，则它使用 IPv6 地址。

您的 \etc\hosts 文件应包含以下条目：

```
::1 locahost mysample.mydomain.com 
```

现在做一个 ping 测试`ping mysample.mydomain.com -6`。这应该确认 mysample.mydomain.com 已使用 IPv6 解析为您的本地环回地址。

参考：

1.  [127-0-0-1 和 localhost 之间的区别](https://stackoverflow.com/questions/7382602/difference-between-127-0-0-1-and-localhost)
2.  [本地主机](http://en.wikipedia.org/wiki/Localhost)

# checkbox - Rally SDK 2.00 p2 添加多个复选框

> ID：12243848
> 
> 赞同：2
> 
> 时间：2012-09-03T07:47:30.763
> 
> 标签：checkbox, rally

我正在尝试为 Rally Report 版本 2.00p2 添加复选框。

我为过滤器（releaseFilter 和 stateFilter）定义了几个占位符，最后在 onReady 函数的主体中添加了复选框。

但是，我得到的不是 5 个不同的复选框，而是位于 Release 过滤器之上的 1 个。抱歉，我无法添加图片。

```
Rally.onReady(function() {

      Ext.define('CustomApp', {
            extend: 'Rally.app.App',
            componentCls: 'app',

        autoScroll: 'true',
            items: [
                {
                    xtype: 'container',
                    itemId: 'releaseFilter',
                    style: {
                        margin: '5px'
                        }
                },
                {
                    xtype: 'container',
                    itemId: 'stateFilter',
                    style: {
                        margin: '5px'
                        }
                },
                {
                    xtype: 'container',
                    itemId: 'grid',
                    style: {
                        margin: '10px',
                        }
                },
                // SOME CODE
        ],
            launch: function() {
                Rally.data.ModelFactory.getModel({
                    type: 'UserStory',
                    success: function(model) {
                        this.grid = this.add({
                            xtype: 'rallygrid',
                            model: model,
                            columnCfgs: [
                                'FormattedID',
                                'Release',
                                'Iteration',
                                'PlanEstimate',
                                'PlanDevEstDays',
                                'PlanQAEstDays'
                            ],
                            storeConfig: {
                                filters: [
                                    {
                                        property: 'ScheduleState',
                                        operator: '=',
                                        value: 'Accepted'
                                    }
                                ]
                            }
                        });
                    this.down('#releaseFilter').add(
                    {
            xtype: 'rallyreleasecombobox'                           
        }
                );

                this.down('#stateFilter').add([{
                        xtype: 'menucheckitem',
                                                    text: 'Backlog',
                                                    floating: 'false'
                    },{
                        xtype: 'menucheckitem',
                                                    text: 'Defined'
                    },{
                        xtype: 'menucheckitem',
                                                    text: 'In-Progress'
                    },{
                        xtype: 'menucheckitem',
                                                    text: 'Completed'
                    },{
                        xtype: 'menucheckitem',
                                                    text: 'Accepted'
                    }]
                );

                    },
                    scope: this
                });
            }
       });

        Rally.launchApp('CustomApp', {
            name: 'Grid Example'
        });
    }); 
```

您的 javadoc 中的原始条目是：

```
Ext.create('Ext.menu.Menu', {
width: 100,
height: 110,
floating: false,  // usually you want this set to True (default)
renderTo: Ext.getBody(),  // usually rendered by it's containing component
items: [{
    xtype: 'menucheckitem',
    text: 'select all'
 },{
    xtype: 'menucheckitem',
    text: 'select specific',
 },{
    iconCls: 'add16',
    text: 'icon item'
 },{
    text: 'regular item'
 }]
}); 
```

我做错了什么 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T18:22:00.107

不要使用`menucheckitem`，而是使用标准的 Ext 复选框。像这样：

```
this.down('#stateFilter').add([{
        xtype: 'checkbox',
        fieldLabel: 'Backlog'
    },
    ...
]); 
```

确保将其从更改`text`为`fieldLabel`

# asp.net - Asp.net - 会话超时（关闭确认消息）

> ID：12243855
> 
> 赞同：0
> 
> 时间：2012-09-03T07:48:24.157
> 
> 标签：asp.net

为会话超时实施了此操作，效果很好：

```
var sessionTimeoutWarning = "1";
var sessionTimeout = "2";
var timeOnPageLoad = new Date();
var sessionWarningTimer = null;
var redirectToWelcomePageTimer = null;
//For warning
var sessionWarningTimer = setTimeout('SessionWarning()', parseInt(sessionTimeoutWarning) * 60 * 1000);
//To redirect to the welcome page
var redirectToWelcomePageTimer = setTimeout('RedirectToWelcomePage()', parseInt(sessionTimeout) * 60 * 1000);

//Session Warning
function SessionWarning() {
    var minutesForExpiry = (parseInt(sessionTimeout) - parseInt(sessionTimeoutWarning));
    //var minutesForExpiry = "1";
    var message = "Your session will expire in another " + minutesForExpiry + " mins. Do you want to extend the session?";

    //Confirm the user if he wants to extend the session
    answer = confirm(message);

    //if yes, extend the session.
    if (answer) {

        //Clear the RedirectToWelcomePage method
        if (redirectToWelcomePageTimer != null) {
            clearTimeout(redirectToWelcomePageTimer);
        }

        var currentTime = new Date();
        var timeForExpiry = timeOnPageLoad.setMinutes(timeOnPageLoad.getMinutes() + parseInt(sessionTimeout));
        if (Date.parse(currentTime) > timeForExpiry) {
              alert("Session expired. You will be redirected to welcome page");
            window.location = "../login.aspx";
        }
        else {
            timeOnPageLoad = new Date();
            sessionWarningTimer = setTimeout('SessionWarning()', parseInt(sessionTimeoutWarning) * 60 * 1000);
            redirectToWelcomePageTimer = setTimeout('RedirectToLoginPage()', parseInt(sessionTimeout) * 60 * 1000);
        }
    }
    else {
        timeOnPageLoad = new Date();
        sessionWarningTimer = setTimeout('SessionWarning()', parseInt(sessionTimeoutWarning) * 60 * 1000);
        redirectToWelcomePageTimer = setTimeout('RedirectToLoginPage()', parseInt(sessionTimeout) * 1);

    }

}

//Session timeout
function RedirectToLoginPage() {
    window.location = "../login.aspx";
} 
```

查询：当确认消息出现时，我们如何跟踪/启用如果用户在 5 分钟内没有点击该确认消息，那么我想自动关闭它并显示会话已过期的新弹出窗口。

请指教

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T09:30:20.770

打开警报框后，您将无法控制它。您最多可以做的是在显示警告框 5 分钟后刷新页面。因此，您可以在显示警报框后编写 setTimeout，然后重定向一个页面，您可以在其中显示会话已过期的弹出窗口。

# c# - 单击使用 HttpWebResponse 获取的 html 页面上的按钮

> ID：12243859
> 
> 赞同：1
> 
> 时间：2012-09-03T07:49:05.187
> 
> 标签：c#, html, httpwebresponse

我以这种方式在整个 HttpWebResponse 中有一个 html 页面：

```
HttpWebRequest request = (HttpWebRequest)WebRequest.Create(sslServerHost);
response = (HttpWebResponse)request.GetResponse(); 
```

当我在浏览器中访问相同的 URL 时，我得到一个带有两个按钮的页面。我需要单击其中之一：

```
<form id="confirmationForm" name="confirmationForm" action="/oauth/oauth/authorize"
                  method="post">
     <input name="user_oauth_approval" value="true" type="hidden"/>
     <button name="authorize" type="submit" class="allow-button">
          Allow access
     </button>
</form> 
```

如何使用我得到的 HttpWebResponse 以编程方式单击名称为“授权”的按钮？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T07:54:19.560

解决此问题的最简单方法是在 Web 浏览器中加载页面，并使用 HTTP 代理（如[Fiddler](http://www.fiddler2.com/fiddler2/) ）运行，然后单击按钮并查看响应。将其复制出来，然后将其用于单击按钮的请求。

# android - Cordova：如何在 Android App 中调用 loadUrl() 时设置 HTTP ACCEPT 标头？

> ID：12243863
> 
> 赞同：2
> 
> 时间：2012-09-03T07:49:17.983
> 
> 标签：android, cordova

我在活动的 onCreate() 方法中使用 loadUrl() 方法将内容从外部 Web 服务器加载到 Web 视图中（我正在构建一个 Android 应用程序）。

```
public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  super.loadUrl("http://server-name/path/to/my/server/app/");
} 
```

在服务器上，我检查 ACCEPT HTTP 标头以决定将哪种数据格式传递给客户端。

现在的问题是：loadUrl() 方法似乎总是发送 ACCEPT 标头值“application/xml，...”，这将导致我的服务器传递的数据不是布局良好的 html（这就是我想要的 webview )，而是作为纯 xml（这对于某些 Web 服务客户端来说是很好的）。

所以我想做的是将 ACCEPT HTTP 标头设置为“text/html”，但 loadUrl() 方法不允许我这样做。

我查看了 cordova/android 的源代码，发现 loadUrl() 方法（在 CordovaWebView.java 中）最终调用了（android sdk）WebView 的 loadUrl() 方法，该方法被重载以获取一些额外的 http 标头。但是我无法通过正常的科尔多瓦使用访问该 loadUrl 方法。

所以我编辑了 CordovaWebView 的 loadUrlNow() 方法，该方法调用了 WebView 的 loadUrl() 方法并硬编码了一个额外的标头：

```
void loadUrlNow(String url) {
  ...
  Map<String, String> extraHeaders = new HashMap<String, String>();
  extraHeaders.put("ACCEPT", "text/html");
  super.loadUrl(url, extraHeaders);
} 
```

然后编译它，用我自己的替换原来的 cordova.jar 并重建我的 android 应用程序。但是，如果我现在启动应用程序并检查服务器端的 ACCEPT HTTP 标头，则 ACCEPT 标头没有改变。它的值与硬编码额外标头之前的值相同；看来我无法更改该标题。

那么，在调用 loadUrl() 方法时，有什么方法可以设置 ACCEPT http 标头吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T15:19:16.507

好的，我自己找到了答案。我发现，我无法覆盖 WebView 发送的标头；如果我这样做了，它们会被 WebView 的默认值覆盖，正如 ADT 文档在此处所说的那样（请参阅方法*loadUrl*，参数*additionalHttpHeaders*）：

[http://developer.android.com/reference/android/webkit/WebView.html#loadUrl(java.lang.String](http://developer.android.com/reference/android/webkit/WebView.html#loadUrl(java.lang.String) , java.util.Map)

> 请注意，如果此映射包含此 WebView 默认设置的任何标头，例如控制缓存、接受类型或用户代理的标头，则它们的值可能会被此 WebView 的默认值覆盖。

我不确定两周前的文档是否清晰（时间戳为 2012 年 9 月 13 日）。作为一种解决方法，我正在尝试将 *MYAPP_ACCEPT* 之类的自定义 HTTP 标头设置为“text/html”，我可以在服务器端对其进行评估。不过，要添加这个额外的 HTTP 标头，我需要使用我自己编译的 cordova 库。

# collections - 在主干集合视图中按月分组项目？

> ID：12243867
> 
> 赞同：0
> 
> 时间：2012-09-03T07:49:43.410
> 
> 标签：collections, backbone.js

我的主干应用程序中有一个简单的文档集合。这个集合有一个包含所有文档的视图，它们应该按创建的月份分组。

此视图必须实时更新 - 当我创建新文档或修改现有文档时，应将其添加/移动到视图中的正确位置。

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T08:12:19.013

Backbone 集合有很多方法，包括[groupBy](http://underscorejs.org/#groupBy)。这可用于对您的收藏进行分组。

视图必须监听`reset`集合事件，所以如果集合重置（意味着它被分组和更新），视图必须相应地更新 DOM。最简单的解决方案，只是完全重新渲染视图。如果需要，您可以进行一些优化，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T14:59:03.027

您应该为您的集合创建一个[比较器](http://backbonejs.org/#Collection-sort)方法（使用 groupBy，如上一个答案所建议的那样，或任何其他适合您需要的方法）。然后，您应该让您的集合在每次触发“添加”、“删除”或“重置”事件时触发渲染方法，以便“实时”更新视图。

例如，在您的视图初始化方法中，一种方法是：

```
 collection.documents.on "add", @render
  collection.documents.on "remove", @render
  collection.documents.on "reset", @render 
```

比较器方法的目的正是使集合元素始终保持排序。

# c# - sitemap hierarchy levels

> ID：12243869
> 
> 赞同：1
> 
> 时间：2012-09-03T07:49:53.563
> 
> 标签：c#, asp.net, sitemap

I am trying to make site map of my website. I have hireachy of 4 levels.

Now the top level sitemap will be an index sitemap xml file, containing path of lower level site map file. The last level sitemap will be a urlset sitemap xml file, containing the urls of the website pages.

What about the second level and third level sitemap, should they be index sitemaps or urlset sitemaps?

# android - 将发送的短信写入 content://sms/sent 表

> ID：12243870
> 
> 赞同：11
> 
> 时间：2012-09-03T07:49:56.877
> 
> 标签：android, sms, android-contentprovider

我正在开发一个 android 短信应用程序。我可以使用以下代码向单个联系人发送短信。

```
sms.sendTextMessage(phoneNumber, null, message, sentPI, deliveredPI); 
```

现在我想向多联系人发送短信。有人建议使用循环。所以现在我正在使用循环向多联系人发送短信。

发送每条短信后，我将这些值写入发送表。

```
 ContentValues values = new ContentValues();
    values.put("address", mobNo);
    values.put("body", msg);
    getContentResolver().insert(Uri.parse("content://sms/sent"), values); 
```

每个新地址都会创建一个新的线程 ID。例如，如果我的接收者的地址是 x，那么线程 id 1，对于 y 线程 id 2。如果我想向 x 和 y 发送短信，那么我该如何写入 sms/sent 表。如果我使用循环，那么它不会创建任何新的线程 id，因为发送地址 x 已经有线程 id 1 并且 y 已经有线程 id 2。所以消息将列在线程 id 1 和 2 下永远不会创建新的线程 id。

我试图手动插入线程ID

```
values.put("thread_id", 33); 
```

但是随后新线程 id 下的消息未在默认应用程序中列出，而是在我的应用程序中列出。

请朋友帮帮我

编辑：我尝试使用0，然后读取生成的thread_id，然后用这个thread_id放置下一条短信，仍然不起作用。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-19T07:57:44.473

您需要`thread_id`手动创建一个新的，`contentResolver.insert(...)`对于多个收件人的消息，通常不会这样做。要创建新的`thread_id`，请查询以下 uri

`content://mms-sms/threadID`

并为其附加必要的收件人，以便最终看起来像这样

`content://mms-sms/threadID?recipient=9808&recipient=8808`

所以完整的例子看起来像这样。说收件人是`9808`和`8808`

```
Uri threadIdUri = Uri.parse('content://mms-sms/threadID');
Uri.Builder builder = threadIdUri.buildUpon();
String[] recipients = {"9808","8808"};
for(String recipient : recipients){
    builder.appendQueryParameter("recipient", recipient);
}
Uri uri = builder.build(); 
```

现在您可以`uri`以正常方式查询，这将为您提供一个`thread_id`可用于指定收件人的，如果一个不存在，它将创建一个新的 id 或返回一个现有的。

```
Long threadId = 0;
Cursor cursor = getContentResolver().query(uri, new String[]{"_id"}, null, null, null);
if (cursor != null) {
    try {
        if (cursor.moveToFirst()) {
            threadId = cursor.getLong(0);
            }
    } finally {
            cursor.close();
    }
} 
```

现在用于`threadId`插入您的短信。

有几点需要注意。

不要使用它来为或`threadId`插入单个收件人消息，为每个创建一个新的 thread_id 或只做一个而不指定.`9908``8808``insert``thread_id`

另外，要非常小心这个`builder.appendQueryParameter(...)`部分，确保密钥是`recipient`和不是`recipients`，如果你使用`recipients`它仍然可以工作，但你总是会得到相同的`thread_id`，你所有的短信都会在一个线程中结束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T17:49:33.747

看起来您应该为组消息创建一个新线程并将其插入到新线程以及各个线程中。

# iphone - How to make a function call in ios to wait, till the block inside that function is executed completely?

> ID：12243871
> 
> 赞同：5
> 
> 时间：2012-09-03T07:49:56.713
> 
> 标签：iphone, objective-c, ios5, objective-c-blocks

Inside the following function, I've used a block. But when I call this function, it is returned even before the block is executed. I understood that Block inturn uses the threads and executes separately so that the function doesnt wait for it to return. But, Is there any other way I could make the function execution wait, or any other way to achieve the functionality of this block without using the block itself ?

```
-(int)findCurrentZip
{
        CLLocation *userLocation = [[CLLocation alloc] initWithLatitude:[self findCurrentLatitude]
                                                              longitude:[self findCurrentLongitude]];
         int zipcode;
        self.myGeocoder = [[CLGeocoder alloc] init];
        [self.myGeocoder 
         reverseGeocodeLocation:userLocation
         completionHandler: (id)^(NSArray *placemarks, NSError *error) {
             if (error == nil && [placemarks count] > 0)
             {
                 NSLog(@"Placemarks: %@",placemarks);
                 CLPlacemark *placemark = [placemarks objectAtIndex:0]; 
                 NSLog(@"Country = %@", placemark.country);
                 NSLog(@"Postal Code = %@", placemark.postalCode);
                 zipcode = (int)placemark.postalCode;
                 NSLog(@"Locality = %@", placemark.locality);
                 NSLog(@"Country%@",[placemarks lastObject]);
             }
             else if (error == nil && [placemarks count] == 0)
             {
                 NSLog(@"No results were returned.");
             }
             else if (error != nil)
             {

             }
        }];

        return zipcode;
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-03T08:23:08.780

首先，我建议重新考虑您的设计。与其从该方法返回 zipCode 值，不如调用 completionHandler 中的其他方法（创建协议/委托或其他）。该`reverseGeocodeLocation::`方法可能需要一些时间，并且您不想暂停执行等待结果的主线程。

如果您确实想阻止，您可以考虑使用（滥用？） a `dispatch_semaphore_t`。将其初始化为 0 并`dispatch_semaphore_wait`在调用`reverseGeocodeLocation::`. 在 completionHandler 中用`dispatch_semaphore_signal`.

更多信息：[使用调度信号量来规范有限资源的使用](http://developer.apple.com/library/ios/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/OperationQueues/OperationQueues.html#//apple_ref/doc/uid/TP40008091-CH102-SW24)

编辑：和其他人建议的一样，使用 __block 限定符声明 zipCode

# tridion - Delete the object through tridion core service

> ID：12243872
> 
> 赞同：5
> 
> 时间：2012-09-03T07:49:58.527
> 
> 标签：tridion, tridion-2011

I am not able to delete the object through core service.

I am getting object reference not found error. I am able to create and get the object but delete functionality fails.

I am using this code:

```
var client = new CoreService2010Client();
client.ClientCredentials.Windows.ClientCredential.UserName = Settings.UserID;
client.ClientCredentials.Windows.ClientCredential.Password = Settings.Password;
client.Open();
client.Delete(TCMURI); 
```

here's the error:

```
Server stack trace: 
   at System.ServiceModel.Channels.ServiceChannel.HandleReply(ProxyOperationRuntime operation, ProxyRpc& rpc)
   at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)
   at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)
   at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)

Exception rethrown at [0]: 
   at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)
   at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type)
   at Tridion.ContentManager.CoreService.Client.ICoreService.Delete(String id)
   at Tridion.ContentManager.CoreService.Client.CoreServiceClient.Delete(String id)
   at TridionCoreService.Program.testing() in C:\WORK\My Work\TridionCoreService\TridionCoreService\Program.cs:line 125
   at TridionCoreService.Program.Main(String[] args) in C:\WORK\My Work\TridionCoreService\TridionCoreService\Program.cs:line 25 
```

* * *

I am using above code only and pass the tcm URI

Error Code : {System.ServiceModel.FaultCode}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T18:19:17.650

我有同样的错误，它与 UGC 有关。我禁用了 UGC（注释掉了配置中的模型和编辑器以及 ugc 中的 eventsystem.dll），重新启动了服务器，一切正常。

检查 Content Manager 服务器上的“Tridion”Windows 事件日志。可能存在与 UGC 相关的错误。我认为你需要联系 CS 来解决这个问题，因为错误在来自 UGC 的 Eventsystem dll 中

# spring - @ManagedProperty in a Spring managed bean is null

> ID：12243873
> 
> 赞同：8
> 
> 时间：2012-09-03T07:50:06.723
> 
> 标签：spring, jsf, null, managed-property

I've some trouble with injecting one managedbean in another by defining a managedproperty. I'm googling and stackoverflowing now for 3 days, but with no result...

I'm developing with eclipse 4.2 and deploying to an integrated Tomcat 7

So, can anybody tell me, why my property is null?

**pom.xml**

```
<properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <spring.version>3.0.5.RELEASE</spring.version>
        <java.version>1.6</java.version>
    </properties>    
<dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-web</artifactId>
            <version>${spring.version}</version>
        </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-expression</artifactId>
        <version>${spring.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-orm</artifactId>
        <version>${spring.version}</version>
        <type>jar</type>
        <scope>compile</scope>
    </dependency> 
```

**web.xml**

```
 <web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation=" 
    http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
  <context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/applicationContext*.xml</param-value>
  </context-param>
  <listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
  </listener> 
```

I have set the beans in applicationContext for scanning @Autowired annotation. (Yes, i tried it without beans in applicationContext, but ManagedProperty will not be set, too.)

**applicationContext.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tx="http://www.springframework.org/schema/tx"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">

<context:annotation-config />

<context:component-scan base-package="myPackage" />

<bean class="org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor"/>

<bean class="myPackage.dao.UserDao" id="userDao" />
<bean class="myPackage.dao.WorldDao" id="worldDao" />
<bean class="myPackage.dao.BuildingTypeDao" id="buildingTypeDao" />
<bean class="myPackage.dao.BuffTypeDao" id="buffTypeDao" />
<bean class="myPackage.dao.ClanDao" id="clanDao" />

<bean class="myPackage.bean.MainBean" id="mainBean" />
<bean class="myPackage.bean.UserBean" id="userBean" />
<bean class="myPackage.bean.AdminBean" id="adminBean" /> 
```

**MainBean**

```
package myPackage.bean;
import java.io.Serializable;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import myPackage.model.MainModel;

@ManagedBean
@SessionScoped
public class MainBean implements Serializable {

private static final long serialVersionUID = 1L;

private static final Logger logger = LoggerFactory.getLogger(MainBean.class);

private MainModel model;

/**
 * @return the model
 */
public MainModel getModel() {
    if (model == null) {
        model = new MainModel();
    }
    return model;
}

/**
 * @param model the model to set
 */
public void setModel(MainModel model) {
    this.model = model;
    }
} 
```

**UserBean**

```
package myPackage.bean;

import java.io.Serializable;

import javax.faces.application.FacesMessage;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.ManagedProperty;
import javax.faces.bean.RequestScoped;
import javax.faces.context.FacesContext;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.beans.factory.annotation.Autowired;

import myPackage.dao.UserDao;
import myPackage.entity.User;

@ManagedBean
@RequestScoped
public class UserBean implements Serializable {

private static final long serialVersionUID = 1L;

private static final Logger logger = LoggerFactory.getLogger(UserBean.class);

@ManagedProperty(value="#{mainBean}")
private MainBean mainBean;

@Autowired
private UserDao userDao;

/**
 * @return the mainBean
 */
public MainBean getMainBean() {
    return mainBean;
}

/**
 * @param mainBean the mainBean to set
 */
public void setMainBean(MainBean mainBean) {
    this.mainBean = mainBean;
}

public String doLogin() {
    User user = userDao.getUserByUsernameAndPassword(getMainBean().getModel().getUser().getUsername(), getMainBean().getModel().getUser().getPassword());
    if (user != null) {
        getMainBean().getModel().setUser(user);
        logger.info("User '"+getMainBean().getModel().getUser().getUsername()+"' logged in");
        getMainBean().getModel().setSelectedTab(0);
    } else {
        FacesContext.getCurrentInstance().addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR,"Login failed", "Username and/or password wrong!"));
        logger.warn("User '"+getMainBean().getModel().getUser().getUsername()+"' login failed");
    }
    return null;
} 
```

**UserDao**

```
package myPackage.dao;

import java.util.List;

import javax.persistence.EntityManager;
import javax.persistence.PersistenceContext;
import javax.persistence.Query;

import org.springframework.stereotype.Repository;
import org.springframework.transaction.annotation.Transactional;

import myPackage.entity.User;

@Repository
public class UserDao {

@PersistenceContext
private EntityManager entityManager;

@Transactional
public void save(User user) {
    if (user.getId() == null) {
        entityManager.persist(user);    
    } else {
        entityManager.merge(user);
    }
}

@SuppressWarnings("unchecked")
public List<User> list() {
    return entityManager.createQuery("select u from User u")
            .getResultList();
}

public User getUserByUsername(String username) {
    try {
        Query q = entityManager.createQuery("select u from User u where u.username = :username");
        q.setParameter("username", username);
        User u = (User) q.getSingleResult();
        return u;
    } catch (Exception e) {
        return null;
    }
}

public User getUserByUsernameAndPassword(String username, String password) {
    try {
        Query q = entityManager.createQuery("select u from User u where u.username = :username and u.password = :password");
        q.setParameter("username", username);
        q.setParameter("password", password);
        User u = (User) q.getSingleResult();
        return u;
    } catch (Exception e) {
        return null;
    }
}

@Transactional
public User getUserById(Long id) {
    return entityManager.find(User.class, id);
}

@Transactional
public void delete(User user) {
    entityManager.remove(user);
}

public void deleteById(Long id) {
    delete(getUserById(id));
}

} 
```

And now the Exception...

```
Caused by: java.lang.NullPointerException
    at myPackage.bean.UserBean.doLogin(UserBean.java:47)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597) 
```

Line 47:

```
 User user = userDao.getUserByUsernameAndPassword(getMainBean().getModel().getUser().getUsername(), getMainBean().getModel().getUser().getPassword()); 
```

Debugging shows that getMainBean() returns null.

I'm open for suggests to improve my concept!

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-03T08:52:57.847

您的 JSF 支持 bean (`MainBean`和`UserBean`) 应该由 JSF 或 Spring 管理，但不能同时由它们管理。

如果您的 bean 由 JSF 管理：

*   `@ManagedBean`你用和注释它们`@...Scoped`
*   你不需要在`applicationContext.xml`
*   即使您需要注入由 Spring 管理的 bean，您也可以使用`@ManagedProperty`而不是（不要忘记 setter，需要它）：`@Autowired``@ManagedProperty`

    ```
    @ManagedProperty("#{userDao}")
    private UserDao userDao; 
    ```

如果您的 bean 由 Spring 管理：

*   您使用适当的范围声明它们`applicationContext.xml`（不支持查看范围）
*   你不需要`@ManagedBean`和`@...Scoped`
*   您使用`@Autowired`而不是，`@ManagedProperty`并且不能以这种方式注入由 JSF 管理的 bean

在这两种情况下，您都需要在以下位置配置 Spring-JSF 桥`faces-context.xml`：

```
<application>
    <el-resolver>
        org.springframework.web.jsf.el.SpringBeanFacesELResolver
    </el-resolver>
</application> 
```

# backbone.js - 如何在 jeditable 函数中传递集合？

> ID：12243876
> 
> 赞同：1
> 
> 时间：2012-09-03T07:50:20.933
> 
> 标签：backbone.js, jeditable

我想使用**jeditable**编辑我的集合，其中**modifyCollection**是与事件 dblclick 关联的**函数**。我有以下代码：

```
initialize : function(options) {
        view.__super__.initialize.apply(this, arguments);
        this.collection = this.options.collection;
        this.render();
    },

render : function() {
        var template = _.template(tpl, {
            collectionForTemplate : this.collection ,
            });
            this.el.html(template);
            return this;
    },

modifyCollection : function (event){
        $('#name').editable(function(value, settings) {
            return (value);
        }
        , 
           { onblur: function(value) {
                this.modelID=event.target.nameID;
                    this.collection = this.options.collection;

                console.log("This Collection is: " + this.collection); //Shows : undefined
                            //  
                            this.reset(value);
                    $(this).html(value); 
                    return (value); 
            }
        }); 
```

想法是更新模型，随后通过 jeditable 更新集合。就地编辑工作正常，但问题是，我无法将集合传递给函数。我想在本地保存对我的集合的所有更改，并在以后将它们发送到服务器。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T03:17:04.967

将评论移至正式答案，以防其他人找到此线程。

`this`你的函数内部没有`onblur()`指向这个集合。尝试`var self = this;`在您的`modifyCollection()`函数中添加，然后在您的`onblur()`更改`this.collection`中添加`self.collection`如下：

```
modifyCollection : function (event) {

    var self = this;  // Added this line
    // When working with functions within functions, we need
    // to be careful of what this actually points to.

    $('#name').editable(function(value, settings) {
        return (value);
    }, {
    onblur: function(value) {
        // Since modelID and collection are part of the larger Backbone object,
        // we refer to it through the self var we initialized.
        self.modelID = event.target.nameID;
        self.collection = self.options.collection;

        // Self, declared outside of the function refers to the collection
        console.log("This Collection is: " + self.collection);
            self.reset(value);

            // NOTICE: here we use this instead of self...
            $(this).html(value); // this correctly refers to the jQuery element $('#name')
            return (value); 
        }
    });
}); 
```

**更新 - 关于自我的预感**

@muistooshort 很好地提到它`self`实际上是 window 的一个属性，所以如果你没有`var self = this;`在你的代码中声明，你将引用一个 window obj。如果您不确定为什么`self`似乎存在但似乎不起作用，可能会加重病情。

这种编码的普遍使用倾向于使用`that`or`_this`而不是`self`. 你被警告了。;-)

# c++ - Compiler error undefined symbol

> ID：12243880
> 
> 赞同：0
> 
> 时间：2012-09-03T07:50:33.430
> 
> 标签：c++, unix, solaris

I have simple class ina header file:

```
> cat Algorithms.hh
#ifndef Algorithms_hh
#define Algorithms_hh
#include<vector>
class Algorithms
{
public:

Algorithms();
void BubbleSort();

std::vector<int> myarray;

};
#endif 
```

Then a corresponding c file:

```
> cat Algorithms.cc
#include <iostream>
#include <vector>
#include "Algorithms.hh"

Algorithms::Algorithms()
{
myarray.push_back(0);
}

void Algorithms::BubbleSort()
{
      int i, j, flag = 1;    // set flag to 1 to start first pass
      int temp;             // holding variable
      int numLength = myarray.size(); 
      for(i = 1; (i <= numLength) && flag; i++)
     {
          flag = 0;
          for (j=0; j < (numLength -1); j++)
         {
               if (myarray[j+1] > myarray[j])      // ascending order simply changes to <
              { 
                    temp = myarray[j];             // swap elements
                    myarray[j] = myarray[j+1];
                    myarray[j+1] = temp;
                    flag = 1;               // indicates that a swap occurred.
               }
          }
     }
}
> 
```

And then the main function:

```
> cat algo2.cc
#include <iostream>
#include <vector>
#include "Algorithms.hh"

using namespace std;

int main(int argc,char **argv)
{

Algorithms *arr=new Algorithms();
arr->myarray.push_back(1);
arr->myarray.push_back(2);
arr->myarray.push_back(100);
return 0;
}

> 
```

When i compile the main: I get the below error:

```
> CC algo2.cc 
Undefined                       first referenced
 symbol                             in file
Algorithms::Algorithms()              algo2.o
ld: fatal: Symbol referencing errors. No output written to a.out 
```

Can anyone tell me where i am wrong?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T07:53:11.113

这是一个链接器错误，链接器告诉您它找不到 class 的构造函数的定义`Algorithms`。你应该编译：

```
CC Algorithms.cc algo2.cc 
```

您可以识别它是链接器错误，因为错误`ld:`前面有。

当然，正如Kerrek SB所说，您需要在没有`Algorithms::`前面的情况下声明您的构造函数......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T08:02:39.983

您刚刚忘记将两个 .cc 文件都包含在编译中：

```
cc algo2.cc Algorithms.cc 
```

如果您包含带有声明的头文件，例如

```
#include "Algorithms.hh" 
```

您还应该在 .c 或 .lib 中提供实现、定义。或动态加载带有定义的库。在您的情况下，您的库是 Algorithms.cc，因此只需将其添加到编译阶段，然后将两个临时目标文件添加到

```
Algo2.a + Algorithms.a 
```

将会去

```
a.out 
```

# javascript - jQuery or javascript age calculator

> ID：12243881
> 
> 赞同：1
> 
> 时间：2012-09-03T07:50:33.393
> 
> 标签：javascript, jquery

I want jQuery or javascript age calculator, set the age of a user when their birthday is selected, I want do show from her age that a few days and months and years last.

For example:

> user birthday is : **29/04/2010**
> The result should be like this: **2 years, 4 months, 5 days old.**

What should be the best way to do this by jQuery or javascript?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-10-26T18:57:17.340

```
function calAge()
{

    var curday = $("#curDay").val();
    var curmon = $("#curMonth").val();
    var curyear = $("#curYear").val();

    var calday = $("#calDay").val();
    var calmon = $("#calMonth").val();
    var calyear = $("#calYear").val();

    if (curday == "" || curmon == "" || curyear == "" || calday == "" || calmon == "" || calyear == "")
    {
        alert("Please fill all the values and click go");
        return false;
    }

    if (parseFloat(calyear) > parseFloat(curyear))
    {
        alert("Enter your date of birth year less than current year");
        return false;
    }

    if (parseFloat(calyear) == parseFloat(curyear) && parseFloat(calmon) > parseFloat(curmon))
    {
        alert("Enter your date of birth month less than current month");
        return false;
    }

    if (parseFloat(calyear) == parseFloat(curyear) && parseFloat(calmon) == parseFloat(curmon) && parseFloat(calday) > parseFloat(curday))
    {
        alert("Enter your date of birth date less than current date");
        return false;
    }

    if (curday == calday && curmon == calmon && curyear == calyear)
    {
        alert("Happy Birthday...!");
        return false;
    }

    var curd = new Date(curyear, curmon - 1, curday);
    var cald = new Date(calyear, calmon - 1, calday);

    if (cald.getMonth() != (calmon - 1))
    {
        alert("Enter your valid date of birth");
        return false;
    }

    if (curd.getMonth() != (curmon - 1))
    {
        alert("Enter your valid date");
        return false;
    }

    if (curd.getFullYear() < cald.getFullYear())
    {
        alert("Enter your valid date");
        return false;
    }

    var diff = Date.UTC(curyear, curmon - 1, curday, 0, 0, 0) - Date.UTC(calyear, calmon - 1, calday, 0, 0, 0);

    var dife = datediff(cald, curd);

    console.log(dife);

    $(".your_age").text(dife.years + " years " + dife.months + " months " + dife.days + " days");

    var secleft = diff / 1000 / 60;
    $(".your_age_min").text(secleft + " minutes");

    var hrsleft = secleft / 60;
    $(".your_age_hour").text(hrsleft + " hours");

    var daysleft = hrsleft / 24;
    $(".your_age_days").text(daysleft + " days");

    // var secondsleft = secleft * 60;
    // $("#r8").val(secondsleft + " seconds");

    var as = parseInt(calyear) + dife.years + 1;

    var diff = Date.UTC(as, calmon - 1, calday, 0, 0, 0) - Date.UTC(curyear, curmon - 1, curday, 0, 0, 0);
    var datee = diff / 1000 / 60 / 60 / 24;

    if ((curday == calday) && (curmon == calmon))
    {
        $(".your_birthday span").html("Happy Birthday");
    } else
    {
        $(".your_birthday span").html(datee + " days left until your next birthday");
    }

    return true;

} 
```

参考：[https ://www.quizexpo.com/how-old-am-i-age-calculator/](https://www.quizexpo.com/how-old-am-i-age-calculator/)

# symfony - Symfony2 - Set minimum number of embedded forms

> ID：12243889
> 
> 赞同：0
> 
> 时间：2012-09-03T07:51:16.793
> 
> 标签：symfony

Using the scenario in [How to Embed a Collection of Forms](http://symfony.com/doc/current/cookbook/form/form_collections.html "How to Embed a Collection of Forms"), I would like to ensure that a `Task` always have at least 1 `Tag`. For my case however, the relationship of `Task` and `Tag` is `1:n` rather than `n:m`.

I am particularly concerned on the scenario where all `Tags` are removed (I'd like to prevent this). How can I ensure that a `Task` form always have at least 1 `Tag`?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T06:01:40.830

[正如m0c](https://stackoverflow.com/a/12247266/1349295)所指出的，该解决方案确实是利用自定义验证约束。然而，我发现 Symfony2.1 中已经存在这样的约束验证器，所以我冒昧地将它移植到 2.0（因为某些接口在 2.1 中显然发生了变化）。

以下是[Bernhard Schussek 的](https://github.com/bschussek) `Count.php`移植版本（适用于 2.0）和`CountValidator.php`用于计数集合（参见[https://github.com/symfony/Validator/tree/master/Constraints](https://github.com/symfony/Validator/tree/master/Constraints)）。

## 计数.php

```
namespace MyVendor\MyBundle\Validator\Constraints;

use Symfony\Component\Validator\Constraint;
use Symfony\Component\Validator\Exception\MissingOptionsException;

/**
 * @Annotation
 *
 * @api
 */
class Count extends Constraint
{
    public $minMessage = 'This collection should contain {{ limit }} elements or more.';
    public $maxMessage = 'This collection should contain {{ limit }} elements or less.';
    public $exactMessage = 'This collection should contain exactly {{ limit }} elements.';
    public $min;
    public $max;

    public function __construct($options = null)
    {
        if (null !== $options && !is_array($options)) {
            $options = array(
                'min' => $options,
                'max' => $options,
            );
        }

        parent::__construct($options);

        if (null === $this->min && null === $this->max) {
            throw new MissingOptionsException('Either option "min" or "max" must be given for constraint ' . __CLASS__, array('min', 'max'));
        }
    }
} 
```

## CountValidator.php

```
namespace MyVendor\MyBundle\Validator\Constraints;

use Symfony\Component\Validator\Constraint;
use Symfony\Component\Validator\ConstraintValidator;
use Symfony\Component\Validator\Exception\UnexpectedTypeException;

class CountValidator extends ConstraintValidator
{
    /**
     * {@inheritDoc}
     */
    public function isValid($value, Constraint $constraint)
    {
        if (null === $value) {
            return false;
        }

        if (!is_array($value) && !$value instanceof \Countable) {
            throw new UnexpectedTypeException($value, 'array or \Countable');
        }

        $count = count($value);

        if ($constraint->min == $constraint->max
                && $count != $constraint->min) {
            $this->setMessage($constraint->exactMessage, array(
                '{{ count }}' => $count,
                '{{ limit }}' => $constraint->min,
            ));

            return false;
        }

        if (null !== $constraint->max && $count > $constraint->max) {
            $this->setMessage($constraint->maxMessage, array(
                '{{ count }}' => $count,
                '{{ limit }}' => $constraint->min,
            ));

            return false;
        }

        if (null !== $constraint->min && $count < $constraint->min) {
            $this->setMessage($constraint->minMessage, array(
                '{{ count }}' => $count,
                '{{ limit }}' => $constraint->min,
            ));

            return false;
        }

        return true;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T11:47:29.583

我将创建一个自定义验证器，它检查关系商店在实体级别上映射到的属性是否在集合中具有某些元素。

验证器失败：

```
 public function isValid($value, Constraint $constraint)
    {
        if (count($value) <1 ) {
            //also define a message for your custom validator
            $this->setMessage($constraint->message, array('%string%' => $value));
            return false;
        }
        return true;
    } 
```

有关如何实现此自定义验证器的说明：http: [//symfony.com/doc/current/cookbook/validation/custom_constraint.html](http://symfony.com/doc/current/cookbook/validation/custom_constraint.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T12:12:12.610

您是否只想在发布时验证，是否至少有 1 个标签，

还是您希望表单在加载时实际上已经有 1 个空标签？（我假设是因为你说*“我怎样才能确保任务**表单**总是至少有 1 个标签？”*）

如果你需要第二个，就

```
$tag1 = new Tag();
$tag1->name = 'tag1';
$task->getTags()->add($tag1); 
```

前

```
$form = $this->createForm(new TaskType(), $task); 
```

就像文档说的那样..

# python - Looping through a mutidimentional array in python

> ID：12243891
> 
> 赞同：1
> 
> 时间：2012-09-03T07:51:17.260
> 
> 标签：python

How do i achieve line 9 and 10 i.e the two `for` loops in python

```
matrix = [
    [1, 2, 3, 4],
    [5, 6, 7, 8],
    [9, 10, 11, 12]
]

newMatrix = []

for (i=0; i < len(matrix); i++):
    for (j=0; j < len(matrix[i]); j++):
        newMatrix[j][i] = matrix[i][j]
print newMatrix 
```

PS: i know i can do `[[row[i] for row in matrix] for i in range(4)]` but how i do only using for loops

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T07:55:01.440

使用`range`（或`xrange`）。

```
for i in range(len(matrix)):
  for j in range(len(matrix[i])): 
```

仅供参考，分配给`newMatrix[i][j]`将失败，因为`newMatrix`是一个空的`list`. 您需要为每一行添加一个新的空`list`值`newMatrix`，然后在每次迭代中将新值附加到该列表中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T07:57:22.150

您可以使用该[`enumerate()`函数](http://docs.python.org/library/functions.html#enumerate)遍历两个矩阵值并为您提供索引：

```
newMatrix = [[0] * len(matrix) for _ in xrange(len(matrix[0]))]
for i, row in enumerate(matrix):
    for j, value in enumerate(row):
        newMatrix[j][i] = value 
```

这输出：

```
[[1, 5, 9], [2, 6, 10], [3, 7, 11], [4, 8, 12]] 
```

因为您正在直接寻址新矩阵中的行和列，所以您需要先用空值初始化该新矩阵。我的示例第一行的列表理解为您执行此操作。给定一个大小为 ( *x* , *y* ) 的输入矩阵，它创建一个大小为 ( *y* , *x* ) 的新矩阵。

 **[`zip`或者，您可以通过（ab）使用函数](http://docs.python.org/library/functions.html#zip)来完全避免显式循环：

```
newMatrix = zip(*matrix) 
```

它采用每一行`matrix`并将这些行中的每一列分组为新行。

在一般情况下，python`for`构造循环序列。[`range()`](http://docs.python.org/library/functions.html#range)and[`xrange()`](http://docs.python.org/library/functions.html#xrange)函数可以为您生成数字序列，这些生成数字序列的方式与 C 或 JavaScript 中的循环`for`生成的方式非常相似：

```
>>> for i in range(5):
>>>   print i,
0 1 2 3 4 
```

但是该构造比 C 风格的`for`构造要强大得多。在大多数此类循环中，您的目标是为某个序列提供索引，python 构造绕过索引并直接转到序列中的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T08:12:46.807

只是为了混合答案，如果您正在使用 Python 进行*任何*类型的矩阵运算，请考虑使用[`numpy`](http://numpy.scipy.org/)：

```
>>> import numpy
>>> matrix = numpy.matrix([
...     [1, 2, 3, 4],
...     [5, 6, 7, 8],
...     [9, 10, 11, 12]
... ]) 
```

转置非常简单：

```
>>> matrix.transpose()
matrix([[ 1,  5,  9],
       [ 2,  6, 10],
       [ 3,  7, 11],
       [ 4,  8, 12]]) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-03T08:12:51.610

如果我理解正确，您想要做的是[矩阵转置](http://en.wikipedia.org/wiki/Transpose)，可以通过以下方式完成：

```
 zip(*matrix) 
```**

# pdf - How to automate LaTeX to PDF conversion with quickrun.vim

> ID：12243893
> 
> 赞同：0
> 
> 时间：2012-09-03T07:51:31.650
> 
> 标签：pdf, plugins, latex, vim

I want to automatically convert LaTeX to PDF with `pdflatex`, then open the PDF in Evince using `quickrun.vim`.

I've read the documentation for `quickrun.vim`, and it seems that I should use a function `:function! quickrun#register_outputter(name, outputter)`, but how can I realize that by configuring my `.vimrc`?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T10:52:07.433

我对 quickrun.vim 一无所知，但一个简单的映射也足够了。将此添加到您的 .vimrc 中：

```
autocmd FileType tex noremap <buffer> <F5> :w<CR> :!pdflatex -shell-escape "%" && evince %:p:r.pdf<CR> 
```

然后点击将运行 pdflatex 并在 evince 中打开 pdf。

# android - Set 9patch background dynamically

> ID：12243896
> 
> 赞同：4
> 
> 时间：2012-09-03T07:51:36.573
> 
> 标签：android, button, background, nine-patch

does anyone have tried to set 9Patch background of button dynamically? If it is important, button's width and height is set wrap_content

If yes, how have you solved the "black line" issue?

Thanks

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T16:11:38.543

如果您看到您在 9-patch 图像上绘制的黑点，那是因为您没有预编译您的图像。

要在运行时将 9-patch 图像设置为背景，必须在移除边框并将其编码为 PNG 块时预先编译它们。

您可以通过在`res/drawable`应用程序的文件夹中插入 .9.png 图像、编译它并生成 .apk 来做到这一点（在 Eclipse 上，右键单击您的`project root > Android Tools > Export Unsigned Application Package`. 然后解压缩 .apk，您将获得 .9.png 图像，其中包含 9-patch 编译数据。

使用预编译的 9-patch 图像，执行类似的操作来加载图像：

```
private Drawable loadNinePatch(String path, Context context) {
        Bitmap bitmap = BitmapFactory.decodeFile(path);
        byte[] chunk = bitmap.getNinePatchChunk();
        if(NinePatch.isNinePatchChunk(chunk)) {
            return new NinePatchDrawable(context.getResources(), bitmap, chunk, new Rect(), null);
        } else return new BitmapDrawable(bitmap);
} 
```

然后将其设置为按钮的背景：

```
button.setBackgroundDrawable(loadNinePatch("/data/data/your.app/files/button_background.9.png", context)); 
```

# javascript - 如何选择 contenteditable div 中的所有文本？

> ID：12243898
> 
> 赞同：40
> 
> 时间：2012-09-03T07:51:45.607
> 
> 标签：javascript, jquery, html, contenteditable

在将其标记为重复之前，我希望您意识到实际上没有人为这个特定问题提供好的答案。在[select all text in contenteditable div when it focus/click](https://stackoverflow.com/questions/3805852/select-all-text-in-contenteditable-div-when-it-focus-click)时，接受的答案和 Tim Down 的答案都没有帮助，因为它们仅在元素已经获得焦点时才起作用。就我而言，我希望在单击按钮后选择 contenteditable div 中的所有文本，即使该 div 事先没有聚焦。

我怎么能这样做？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-09-03T08:53:32.423

我使用了[这个线程](https://stackoverflow.com/questions/985272/jquery-selecting-text-in-an-element-akin-to-highlighting-with-your-mouse)中的一些代码来得出我的答案。它也是您要求的 100% jQuery。希望你喜欢 ：）

```
jQuery.fn.selectText = function(){
   var doc = document;
   var element = this[0];
   console.log(this, element);
   if (doc.body.createTextRange) {
       var range = document.body.createTextRange();
       range.moveToElementText(element);
       range.select();
   } else if (window.getSelection) {
       var selection = window.getSelection();        
       var range = document.createRange();
       range.selectNodeContents(element);
       selection.removeAllRanges();
       selection.addRange(range);
   }
};

$("button").click(function() {
    $("#editable").selectText();
});​ 
```

[jsfiddle](http://jsfiddle.net/zAZyy/)链接。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-03T08:18:05.010

例如，在下一个场景中，如果用户将焦点设置为可编辑 div（使用鼠标、键盘或单击按钮），则选择可编辑 div 的内容。

```
<div id="editable" style=" border:solid 1px #D31444" contenteditable="true" 
    onfocus="document.execCommand('selectAll', false, null);">
  12 some text...
</div>

<button onclick="document.getElementById('editable').focus();" >Click me</button>
```

在 JSFiddle：http: [//jsfiddle.net/QKUZz/](http://jsfiddle.net/QKUZz/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-06-04T23:56:07.990

很棒的功能。

我已经对其进行了调整，以通过一个类在任意数量的可编辑 div 中启用文本的完整选择，无论是直接单击还是通过选项卡：

```
$.fn.selectText = function(){
    var doc = document;
    var element = this[0];
    //console.log(this, element);
    if (doc.body.createTextRange) {
        var range = document.body.createTextRange();
        range.moveToElementText(element);
        range.select();
    } else if (window.getSelection) {
        var selection = window.getSelection();        
        var range = document.createRange();
        range.selectNodeContents(element);
        selection.removeAllRanges();
        selection.addRange(range);
    }
};

$(".editable").on("focus", function () {
    $(this).selectText();
});
$(".editable").on("click", function () {
    $(this).selectText();
});
$('.editable').mouseup(function(e){
    e.stopPropagation();
    e.preventDefault();
    // maximize browser compatability
    e.returnValue = false;
    e.cancelBubble = true;
    return false; 
}); 
```

HTML：

```
<div class="editable" style="border:dotted 1px #ccc;" contenteditable="true">01 text...</div>
<div class="editable" style="border:dotted 1px #ccc;" contenteditable="true">02 text...</div>
<div class="editable" style="border:dotted 1px #ccc;" contenteditable="true">03 text...</div> 
```

小提琴：

[http://jsfiddle.net/tw9jwjbv/](http://jsfiddle.net/tw9jwjbv/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-10-22T09:45:49.683

Chrome 确实选择了所有内容，所以我只是添加了 RAF 来解决它：

```
requestAnimationFrame(() => document.execCommand('selectAll')); 
```

演示：http: [//jsfiddle.net/0aqptw8m/](http://jsfiddle.net/0aqptw8m/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-03T08:07:22.707

```
<div id="test" style=" border:solid 1px #D31444" contenteditable="true" onclick="document.execCommand('selectAll',false,null)">12 some text...</div> 
```

从链接中提供的这个答案来看，你不能在你的按钮中使用点击代码。

我说的甚至在 div 中说`onfocus="document.execCommand('selectAll',false,null)"`

然后使用jQuery触发焦点`$('#test').focus();`

# mono - Do Xamarin support in-app purchases

> ID：12243899
> 
> 赞同：2
> 
> 时间：2012-09-03T07:51:51.083
> 
> 标签：mono, xamarin.ios, xamarin.android, xamarin

I would think it supports this, but I cant find any documentation about it

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T13:31:32.963

是的，看看[StoreKit](http://docs.go-mono.com/?link=N%3aMonoTouch.StoreKit) API。

# c++ - median selection algorithm

> ID：12243902
> 
> 赞同：-1
> 
> 时间：2012-09-03T07:51:58.307
> 
> 标签：c++, selection, median

here is my version of code for median selection

```
#include<iostream>
using namespace std;
#define max 1000
int a[max];
int n;//number of elements
void Swap(int i,int j)
{
    int k=a[i];
    a[i]=a[j];
    a[j]=k;

}
int randint(int l, int u)
{   return l + (RAND_MAX*rand() + rand()) % (u-l+1);
}

void read()
{
    cout<<"  enter number of elements ";
    cin>>n;
    for(int i=0;i<n;i++)
        cin>>a[i];

}

void select(int l,int u,int k)
{
    int i,j;
    int t,temp;
    if(l>=u)
         return;
    Swap(l,randint(l,u));
    t=a[l];
    i=l;
    j=u+1;
    for(;;)
    {
        do i++; while(i<=u && a[i]<t);
        do j--;while(a[j]>t);
        if(i>j)
             break;
        temp=a[i];a[i]=a[j];a[j]=temp;
    }
    Swap(i,j);
    if(j<k)
        select(j+1,u,k);
    else if(j>k)
        select(l,j-1,k);

}
int main()
{
    read();
    int l=0;
    int u=n-1;
    int k=int(n/2);
    select(l,u,k);
    if((n&1)==1)
        cout<<a[k]<<endl;
    else
        cout<<(a[k]+a[k-1])/2<<endl;

    return 0;
} 
```

but when i run this code,i have input number of element 5 and input

```
5 3 1 7 2 
```

result is 5,i dont undertsand why it shows me 5?i think result must be 3 is not it?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-03T07:56:59.770

如果您有兴趣以最少的麻烦计算中位数，我建议使用具有线性复杂度的[std::nth_element 。](http://en.cppreference.com/w/cpp/algorithm/nth_element)这是一个奇数大小向量的示例，很容易与数组一起使用，尽管我建议调整您的代码以使用`std::vector`：

```
#include <algorithm> // for std::nth_element
#include <vector> // for std::vector

std::vector<int> v = ....;
size_t midIndex = v.size()/2;
std::nth_element(v.begin(), v.begin() + midIndex, v.end()); 
```

中值为

```
v[midIndex]; 
```

这也可以很容易地适应于覆盖偶数阵列的情况。

# php - 通过 cURL 将文件获取到远程服务器的问题

> ID：12243903
> 
> 赞同：0
> 
> 时间：2012-09-03T07:51:58.697
> 
> 标签：php, curl

cURL 新手，无法将文件上传到远程服务器。我有一个具有文件上传输入的 .html 文件。然后它转到一个带有 cURL 代码的 .php，然后转到服务器。

HTML 如下所示：

```
<form action="send.php" method="post"
enctype="multipart/form-data">
<label for="file">Filename:</label>
<input type="file" name="file" id="file" /> 
<br />
<input type="submit" name="submit" value="Submit" />
</form> 
```

cURL 页面如下所示：

```
<?php
$curlPost = array('fileupload' => '@'.$_FILES['theFile'] ['tmp_name']);
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, 'http://24.18.65.72:8008/upload_file.php');
curl_setopt($ch, CURLOPT_HEADER, 1);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $curlPost);
$data = curl_exec();
curl_close($ch);
?> 
```

远程服务器上的接收 .php 如下所示：

```
<?php
$folder = "files/";
$path = $folder . basename( $_FILES['file']['name']); 
if(move_uploaded_file($_FILES['file']['tmp_name'], $path)) {
    echo "The file ".  basename( $_FILES['file']['name']). " has been uploaded";
} else{
    echo "There was an error uploading the file, please try again!";
}
?> 
```

这甚至接近工作吗？

# enyo - 如何在窗口操作系统上使用 enyo.js

> ID：12243908
> 
> 赞同：0
> 
> 时间：2012-09-03T07:52:19.710
> 
> 标签：enyo

# 现在我必须在 enyo.js 和 echonest 上工作。我是新手。所以请任何人告诉我应该在哪个 IDE 中开始使用 enyo.js 以及如何逐步开始。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-07T12:34:40.037

enyo 的建议/推荐 IDE 是 ARES：[ares IDE 的 github 链接](https://github.com/enyojs/ares-project)

有关初始使用指南，您可以参考此视频演示：[http ://www.youtube.com/watch?v=qQkzUDtiC-I](http://www.youtube.com/watch?v=qQkzUDtiC-I)

有关更多详细信息，请参阅以下常见问题：[http](http://forums.enyojs.com/categories/ares) ://forums.enyojs.com/categories/ares ，以便您获得有关进展和所有方面的一些基本想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T23:56:45.273

任何具有文本编辑器的 IDE 就足够了 :)

从这里开始：

[http://enyojs.com/docs](http://enyojs.com/docs)

另外，看看 Sampler 应用程序：

[http://enyojs.com/sampler](http://enyojs.com/sampler)

# ssl - 进程收到套接字关闭消息前多长时间

> ID：12243909
> 
> 赞同：0
> 
> 时间：2012-09-03T07:52:23.053
> 
> 标签：ssl, erlang, gen-tcp

假设您有一个正在处理套接字 (gen_tcp/ssl) 的 Erlang 进程，并且对等方关闭了连接。

该过程需要多长时间才能收到如下消息：

```
{tcp_closed, Socket} 
```

或者

```
{ssl_closed, Socket} 
```

这个时间量是在 Erlang 代码中的某个地方指定的还是与系统有关？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T08:06:34.447

除非出现拥塞，否则它应该需要一个网络 ping 时间。

# macos - mac os x 访问帧缓冲区原始数据

> ID：12243914
> 
> 赞同：6
> 
> 时间：2012-09-03T07:52:28.763
> 
> 标签：macos, framebuffer

我必须执行一些需要访问 OS X 帧缓冲区中的屏幕数据的任务。在 10.6.8 中，我们可以使用 Quart Display Service API 获取帧缓冲区基地址，但在 10.7 或 10.8 中我们不能这样做。

Apple 建议使用 CGDisplayCreateImage 获取屏幕图像。但是获取原始图像数据效率很低，因为我们必须将获取的图像对象绘制到上下文中。

还有其他方法可以获取帧缓冲区的原始数据吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-20T10:02:05.963

您无需绘制返回的图像`CGDisplayCreateImage`即可检索原始图像数据。您可以使用`CGImageGetDataProvider`后跟从`CGDataProviderCopyData`中获取数据。

# regex - 获取正则表达式匹配的位置？

> ID：12243916
> 
> 赞同：0
> 
> 时间：2012-09-03T07:52:45.453
> 
> 标签：regex, r

这是一个字符串：

```
str1="ha,hihi,aaaaa,ok" 
```

我想得到的位置`","`，`str1`可以数`3,8,14`。
我怎样才能在 R 中得到它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T07:55:57.167

您可以使用以下表达式获得所需的向量：

```
as.integer(gregexpr(",", str1)[[1]]) 
```

将`[[1]]`选择结果列表的第一个元素。如果`str1`是一个长度不是 1 的向量，那么`gregexpr`将产生一个包含那么多项目的列表，每个元素对应一个`str1`.

将`as.integer`去除其他属性，例如匹配文本的长度。在许多情况下，您可以忽略这一点，因为其他代码可能会简单地忽略这些属性。但是，对于控制台的输出，它可能不那么令人困惑，所以我将它包含在我的答案中。

# c++ - 将 QTreeWidgetItem 连接到数据库

> ID：12243917
> 
> 赞同：1
> 
> 时间：2012-09-03T07:52:47.123
> 
> 标签：c++, database, qt, user-interface

我正在做一个项目，我试图构建一个具有多个 QTreeWidgetItems 的 QTreeWidget，一旦我单击特定项目，它就会连接到数据库并在 tableview 模型中显示查询结果，直到现在一切正常。

问题是我希望每个项目根据同一张表上的某些标准输出不同的结果，其中该标准仅更改属性的值，并且该值与项目名称相同。例如名为 122 的项目，并且该表具有名为 no 的属性。当我们单击项目 122 时，必须显示此查询的结果（从表中选择 *，其中 no=122）

任何帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T12:56:32.490

我假设您有一个由`QSqlQueryModel`or支持的 QTableView `QSqlTableModel`。

您可以连接到信号`QTreeWidget::itemSelectionChanged()`，然后在插槽中使用 获取当前项目`selectedItems()[0]`。然后你创建你的查询：

```
QSqlQuery query;
query.prepare("select * from table where no=:no");
query.bindValue(":no", number);
query.exec(); 
```

最后你可以`setQuery (const QSqlQuery & query)`在模型上使用。这应该会更新您的视图。

我希望我能正确理解你想要达到的目标。

# iphone - 垂直滚动的类似 Rolodex 的 iOS 应用

> ID：12243923
> 
> 赞同：1
> 
> 时间：2012-09-03T07:53:12.177
> 
> 标签：iphone, ios, xcode, ipad, scroll

我想创建一个看起来像 Rolodex Card 的应用程序，其中您必须在不同的视图中垂直滚动，当点击时，将使用关闭按钮进入全屏视图以返回到 Rolodex 类型的上一个视图-菜单。我希望它看起来类似于 PepperUI iOS 控件，但不是让它水平滚动，我希望它垂直滚动，如下图所示：

![在此处输入图像描述](../Images/e9179ca5270b35154abdda9e213d8667.png)

关于如何实现这种应用程序的任何想法？我在想，当用户点击卡片中的任何视图时，滚动卡片式视图控制器和缩放特定视图时，这只会涉及核心动画。

感谢您对此的任何意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T09:00:16.943

我会推荐[NickLockwood](https://github.com/nicklockwood/iCarousel)的这款 iCarousel。伟大的项目。你可以随心所欲地调整它，相信我。使其垂直，并查看其类型，因为它支持 11 种类型，包括您想要的那种。一探究竟！

希望这可以帮助。

# eclipse - 如何在资源树被锁定时延迟对资源树的修改

> ID：12243926
> 
> 赞同：8
> 
> 时间：2012-09-03T07:53:30.340
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp

我得到了例外：

> org.eclipse.core.internal.resources.ResourceException：资源树被锁定以进行修改。

经过一番搜索，我发现这是因为我正在尝试向文件添加标记。当我收到文件更改通知时，我正在这样做。因此，当我的修改代码被调用时，工作区仍处于通知过程的中间，并且不允许修改资源树。

如何保存标记以便稍后将它们添加到文件中，或者还有什么方法可以延迟此更改？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-03T19:33:51.497

您不能从资源增量事件处理程序修改资源树（如果可以的话，想象一下完全混乱的可能性）。我所知道的最常见的方法是安排一个 Job 并在 Job 的 run() 方法中进行修改。这意味着您需要记住要进行的修改，以便可以在作业中完成。这也意味着您不能对资源树的状态做出太多假设，因为理论上其他一些作业可能会在您之前运行，从而对树进行更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-29T07:26:41.500

更改 IResourceChangeEvent.PRE_BUILD 将解决此问题.. 为我工作

# iphone - 单击时如何使自定义按钮键像iPhone按钮键一样大

> ID：12243928
> 
> 赞同：4
> 
> 时间：2012-09-03T07:53:34.287
> 
> 标签：iphone, ios, uibutton, uicontrolevents

单击时，我想要这张图片中的大字母。

![点击时大写字母](../Images/dfa230076b207279b07c51ba4f4d791d.png)

如何为我的新按钮“ក”执行此操作？这是我创建按钮的代码：

```
consonantButton = [UIButton buttonWithType:UIButtonTypeCustom];

[consonantButton setTitle:@"ក" forState:UIControlStateNormal];
 consonantButton.titleLabel.font = [UIFont fontWithName:@"Hanuman" size:30];
consonantButton.frame = CGRectMake(242.0, 328.0, 27.0, 42.0);
[consonantButton setTitleColor:[UIColor blackColor] forState:UIControlStateNormal];
[consonantButton setTitleShadowColor:[UIColor whiteColor] forState:UIControlStateNormal];
//  [consonantButton setTitleColor:[UIColor whiteColor] forState:UIControlStateHighlighted];
//  [consonantButton setTitleShadowColor:[UIColor whiteColor] forState:UIControlStateHighlighted];
//  consonantButton.titleLabel.shadowOffset = CGSizeMake(0, -1);

[consonantButton setBackgroundImage:[UIImage imageNamed:@"doneButtonNormal-khmer"] forState:UIControlStateNormal];
//  [consonantButton setBackgroundImage:[UIImage imageNamed:@"doneButtonHighlighted-khmer"] forState:UIControlStateHighlighted];

[consonantButton addTarget:self action:@selector(touchConsonantButton:) forControlEvents:UIControlEventTouchUpInside]; 
```

点击时如何制作这样的形状？这叫什么 ？这是我为操作所做的代码： - (void) touchConsonantButton:(UIButton*)sender{ // [self.target performSelector:consonantAction withObject:sender]; consonantButton.frame = CGRectMake(242.0, 310.0, 54.0, 84.0); consonantButton.titleLabel.font = [UIFont fontWithName:@"Hanuman" size:50];}

这是屏幕截图：（默认情况下它不会消失）

![点击时](../Images/cd7f51c45f1d817678d91e0081105edb.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T09:10:47.823

将两个目标添加到您的按钮：

```
[consonantButton addTarget:self action:@selector(touchUpConsonantButton:) forControlEvents:UIControlEventTouchUpInside];
[consonantButton addTarget:self action:@selector(touchDownConsonantButton:) forControlEvents:UIControlEventTouchDownInside]; 
```

现在选择器是：

```
-(void)touchUpConsonantButton(id)sender
{
  UIButton *btnClicked = (UIButton *)sender;
  // your code here
  [UIView animateWithDuration:0.1 delay:0 options:UIViewAnimationOptionCurveEaseOut animations:^{
    btnClicked.transform = CGAffineTransformMakeScale(2.0f, 2.0f);
  } completion:^(BOOL finished){
    // if you want to do something once the animation finishes, put it here
  }];
} 
```

* * *

```
-(void)touchDownConsonantButton(id)sender
{
  UIButton *btnDown = (UIButton *)sender;
   // your code here
  [UIView animateWithDuration:0.1 delay:0 options:UIViewAnimationOptionCurveEaseOut animations:^{
    btnDown.transform = CGAffineTransformIdentity;
  } completion:^(BOOL finished){
    // if you want to do something once the animation finishes, put it here
  }];
} 
```

# php - Mongodb odm docrine - 自引用多对多（获取具体数据）

> ID：12243929
> 
> 赞同：1
> 
> 时间：2012-09-03T07:53:36.357
> 
> 标签：php, doctrine-orm, zend-framework2, mongodb-php, doctrine-odm

我想知道如何从这个模型中选择特定的朋友。
模型结构在这里：

```
 /**
     * @MongoDB\ReferenceMany(targetDocument="Users", mappedBy="myFriends")
     */
    public $friendsWithMe;

    /**
     * @MongoDB\ReferenceMany(targetDocument="Users", inversedBy="friendsWithMe")
     */
    public $myFriends;

    public function __construct() {
        $this->friendsWithMe = new \Doctrine\Common\Collections\ArrayCollection();
        $this->myFriends = new \Doctrine\Common\Collections\ArrayCollection();
    }

    /**
     * Add friend
     * @param Users $user
     */
    public function addFriend(Users $user) {
        $user->friendsWithMe[] = $this;
        $this->myFriends[] = $user;
    }

    /**
     * Get friends
     * @return Array $myFriends
     */
    public function getFriends() {
        return $this->myFriends;
    } 
```

为了获得用户朋友，我使用以下代码：

```
foreach($userSearch->getFriends() as $friend){
    $output .= "&nbsp;FriendName: " . $friend->getFirstName() . " - ID: " . $friend->getId() . "<br>";
} 
```

因此，如果我不想获得所有朋友并遍历他们，我如何才能获得特定用户或用户（朋友/s）让我们说 20 岁以上。

**编辑** 在这里我添加了集合中的文档，所以我正在寻找一种方法来检索两个朋友中的一个，例如谁比 x 年大而不是客户端的循环。

```
{
   "_id": ObjectId("503f3028e71a38840d000000"),
   "birthdate": ISODate("2012-08-30T09: 19: 36.0Z"),
   "email": "mail",
   "firstName": "asd",
   "myFriends": {
     "0": {
       "$ref": "Users",
       "$id": ObjectId("503e1683921da8c80b000002"),
       "$db": "testing" 
    },
     "1": {
       "$ref": "Users",
       "$id": ObjectId("503e0a8ee71a38080b000001"),
       "$db": "testing" 
    } 
  },
   "password": "123",
   "role": {
     "$ref": "UserRoles",
     "$id": ObjectId("50486ba1e71a384c15000000"),
     "$db": "testing" 
  },
   "username": "gizmo" 
} 
```

**注意：**我正在使用 ZF2 项目的模块（ZF2 + DoctrineOdmMongodb）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T01:34:39.173

假设您有一个托管用户文档`$user`和一个`UserRepository` `$userRepository`.

```
$users = $userRepository->createQueryBuilder()->field('myFriends')->includesReferenceTo($user)->field('age')->gt(20)->getQuery()->execute(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T01:12:24.523

使用过滤器。

有关 ORM 等效项，请参见[http://docs.doctrine-project.org/en/latest/reference/filters.html](http://docs.doctrine-project.org/en/latest/reference/filters.html)。过滤器是几个月前在 ODM 中实现的，可以通过 DoctrineMongoODMModule 进行配置。

基本上，您创建过滤器类。在 DoctrineMongoODMModule 配置中添加一行，然后使用`$documentManager->getFilterCollection()->enable('myFilter');`

您将在此处找到一些过滤器使用示例[https://github.com/doctrine/mongodb-odm/blob/master/tests/Doctrine/ODM/MongoDB/Tests/Functional/FilterTest.php](https://github.com/doctrine/mongodb-odm/blob/master/tests/Doctrine/ODM/MongoDB/Tests/Functional/FilterTest.php)

# c# - Web 应用程序根本不更新数据库

> ID：12243930
> 
> 赞同：0
> 
> 时间：2012-09-03T07:53:42.643
> 
> 标签：c#, asp.net, sql-server, tsql, ado.net

我有下表：

```
|   product_no    |   product_name   |   price  |
=================================================
|    10000        |   teapot         |   5.00   |
|    10001        |   grasspot       |   2.00   |
|    10002        |   glasspot       |  10.00   |
|    10003        |   jackpot        |  15.00   | 
```

我有两个文本字段 -`m_pname`和`m_pprice`.

当用户从下拉列表中选择产品名称时，这两个字段将显示产品名称和价格 -`dropdownlist1`

这两个文本字段都是可编辑的，因此当用户编辑它们并单击`Modify`按钮`Button4`时，该按钮将更新数据库。

然而，问题来了——数据库**没有**更新，而且`dropdownlist1`仍然反映旧值。

`dropdownlist1`选中`Autopostback`复选框。

所以，我想知道这是否是由`Autopostback`复选框引起的。

部分代码如下：

```
protected void Page_Load(object sender, EventArgs e)
{
    SqlConnection conn = ConnectDB("Data Source=WR2\\SQLEXPRESS;Initial Catalog=testbase;Integrated Security=True");

    try
    {
        conn.Open();

        SqlDataReader testtable = SQLReadCommand(conn, "Select * from testtable where product_no='" + DropDownList1.SelectedValue + "'");

        if (testtable.HasRows)
        {
            while (testtable.Read())
            {
                m_pname.Text = testtable["product_name"].ToString();
                m_pprice.Text = testtable["price"].ToString();

                modify_status.Text = modify_status.Text + "[ Name: " + m_pname.Text + " Price: " + m_pprice.Text + " ]";
            }
        }
        testtable.Close();

        //modify_status.Text = "";
        conn.Close();
    }
    catch (Exception err)
    {
       modify_status.Text = err.Message;
    }
}

protected void Button4_Click(object sender, EventArgs e)
{
    SqlConnection conn = ConnectDB("Data Source=WR2\\SQLEXPRESS;Initial Catalog=testbase;Integrated Security=True");

    try
    {
        conn.Open();
        String vpname = m_pname.Text;

        SQLWriteCommand(conn, "UPDATE testtable SET product_name = '" + m_pname.Text + "', price = " + m_pprice.Text + " WHERE product_no = " + DropDownList1.SelectedValue);

        modify_status.Text = "Changed " + DropDownList1.SelectedValue + " to " + vpname;
        conn.Close();
    }
    catch (Exception err)
    {
        modify_status.Text = err.Message;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T08:05:07.610

当您单击按钮时，您会重新绑定下拉列表，因此所选值将丢失并替换为下拉列表的第一项。

您可以在页面加载中调整数据绑定

```
if(! IsPostBack)
{
   //Bind of datas

} 
```

因此，当您发布数据时，您不会删除选定的值

注意： selectedValue 与 ViewState 保持一致

# netty - 具有多个协议的多个端口上的 Netty 4.0？

> ID：12243932
> 
> 赞同：5
> 
> 时间：2012-09-03T07:53:53.203
> 
> 标签：netty

我正在寻找一个服务器示例，它将端口 80 上的 http 处理程序和同一个 jar 中另一个端口上的 protobuf 处理程序结合起来。谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-09-04T20:13:35.527

在我看来，创建不同的 ServerBootstrap 并不是完全正确的方法，因为它会导致创建未使用的实体、处理程序、双重初始化、它们之间可能的不一致、EventLoopGroups 共享或克隆等。

一个好的选择是在一个 Bootstrap 服务器中为所有需要的端口创建多个通道。如果以[Netty 4.x "Getting Started"](http://netty.io/wiki/user-guide-for-4.x.html)中的 "Writing a Discard Server" 为例，我们应该替换

```
 // Bind and start to accept incoming connections.
    ChannelFuture f = b.bind(port).sync(); // (7)

    // Wait until the server socket is closed.
    // In this example, this does not happen, but you can do that to gracefully
    // shut down your server.
    f.channel().closeFuture().sync() 
```

和

```
 List<Integer> ports = Arrays.asList(8080, 8081);
    Collection<Channel> channels = new ArrayList<>(ports.size());
    for (int port : ports) {
        Channel serverChannel = bootstrap.bind(port).sync().channel();
        channels.add(serverChannel);
    }
    for (Channel ch : channels) {
        ch.closeFuture().sync();
    } 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-11T11:30:15.223

我不知道你到底在找什么。它只是关于创建两个不同的 ServerBootstrap 实例，配置它们并调用 bind(..) 就是这样。

# android - 获取显示的姓名，但不是 Android 联系人列表中的号码

> ID：12243933
> 
> 赞同：0
> 
> 时间：2012-09-03T07:53:54.420
> 
> 标签：android

我想从 Android 联系人列表中获取数据。我得到了 display_name，但没有得到数字。我使用了这段代码：

```
while(people.moveToNext()){
            try{
                int nameFieldColumnIndex = people.getColumnIndex(Phone.DISPLAY_NAME);
                String name = people.getString(nameFieldColumnIndex);
                try{
                    int numberFieldColumnIndex = people.getColumnIndex(Phone.NORMALIZED_NUMBER);
                    String number = people.getString(numberFieldColumnIndex);
                    HashMap<String,String> contactMap=new HashMap<String, String>();
                    contactMap.put("name", name); // per la chiave image, inseriamo la risorsa dell immagine
                    contactMap.put("number",number); // per la chiave name,l'informazine sul nome
                    data.add(contactMap);  //aggiungiamo la mappa di valori alla sorgente dati
                }catch(IllegalStateException e){e.printStackTrace();} 
```

我试过了：

```
Uri uri = ContactsContract.CommonDataKinds.Phone.CONTENT_URI;
        String[] projection    = new String[] {ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME,
                        ContactsContract.CommonDataKinds.Phone.NUMBER};

        Cursor people = getContentResolver().query(uri, projection, null, null, null); 
```

但结果是一样的，我得到了显示的名称而不是数字。我读了一些有用的帖子，但我没有完成。建议？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T13:13:25.413

自己解决了。我需要编写一个单独的查询来获取与每个联系人关联的号码：

```
ArrayList<HashMap<String, String>> data = new ArrayList<HashMap<String, String>>();

            if (cur.getCount() > 0) {
            while (cur.moveToNext()) {
                id = cur.getString(cur.getColumnIndex(ContactsContract.Contacts._ID));
                name = cur.getString(cur.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
                 if (Integer.parseInt(cur.getString(cur.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER))) > 0) {

                         if (Integer.parseInt(cur.getString(cur.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER))) > 0) {
                             Cursor pCur = cr.query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null, ContactsContract.CommonDataKinds.Phone.CONTACT_ID +" = ?", new String[]{id}, null);
                            while (pCur.moveToNext()) {
                                number = pCur.getString(pCur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
                                HashMap<String,String> contactMap=new HashMap<String, String>();
                                contactMap.put("name", name); // per la chiave image, inseriamo la risorsa dell immagine
                                contactMap.put("number",number); // per la chiave name,l'informazine sul nome
                                data.add(contactMap);  //aggiungiamo la mappa di valori alla sorgente dati
                            } 
                            pCur.close();
                        }
            }
            }

    }   
        cur.close(); 
```

# jquery - iframe 中的进度条

> ID：12243934
> 
> 赞同：0
> 
> 时间：2012-09-03T07:53:55.380
> 
> 标签：jquery, iframe, progress-bar

我有一个主要的jsp页面，它有两个iframe，其中第一个iframe加载菜单**（即leftFrame）**和其他根据菜单加载动态页面。**（即 mainFrame）** 我的问题是在第二个 iframe 中加载任何页面时，我必须显示微调器***（进度条）***。我如何在 jquery 中对其进行编码。

这是代码

```
<body>
  <table>
<tr>
    <td style="height:100%"><iframe name="leftFrame" id="leftFrame" src="leftnavigation.jsp" height="600" width="200" frameborder="0"></iframe></td>

    <td style="height:100%"><iframe name="mainFrame" id="mainFrame" src="news.jsp"  height="600" width="1000" frameborder="0" scrolling="auto"> </iframe></td>

</tr>   

</table>
</body> 
```

![在此处输入图像描述](../Images/534c49bae836e402e78b4a78a534e7b6.png)微调器.gif

会是什么剧本。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T08:41:18.750

If you would like to add a progress indicator for your IFrame you can achieve it by putting a transparant CSS overlay on top of the Iframe and rendering the loading indicator on top of the overlay.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T09:21:39.680

你可以通过`.ready`jquery的功能来做到这一点。您所要做的就是在 iFrame 顶部放置一个透明分区，让您在中心加载图像。并在 iFrame 准备好时淡出分割。

我为此做了一个演示。在此处查看[**演示**](http://jsfiddle.net/UHuKG/4/)。

不是完美的设计，但你会明白的。

# c# - 如何跨对象链处理事件？

> ID：12243935
> 
> 赞同：8
> 
> 时间：2012-09-03T07:54:06.103
> 
> 标签：c#, .net, events, event-handling

如果有以下情况：

```
public static void main() { 
    MyClass1 obj = new MyClass1();
    obj.Method1();
}
public class MyClass1() {
    public void Method1() {
        MyClass2 obj = new MyClass2();
        obj.Method1();
    }
}
public class MyClass2() {
   public void Method1() {
       MyClass3 obj = new MyClass3();
       obj.Method1();
   }
}
public class MyClass3() {
   public void Method1() {
       // Raise event here that is handled in MyClass1?    
   }
} 
```

可以`MyClass3.Method1()`引发在 中处理的事件`MyClass1`吗？

如果我想实现这一点，将如何编写事件处理代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T08:07:10.467

是的，它可以，但是由于每个级别都不知道您链的更深层次，因此您必须在每个类上创建事件。有些像这样：

```
public static void main() { 
    MyClass1 obj = new MyClass1();
    obj.MyEvent += (s, e) => { Console.WriteLine("Fired!"); };
    obj.Method1();
}

public class MyClass1 {
    public void Method1() {
        MyClass2 obj = new MyClass2();
        obj.MyEvent += (s, e) => { OnMyEvent(); };
        obj.Method1();
    }
    public event EventHandler MyEvent;
    private void OnMyEvent() {
        var myEvent = MyEvent;
        if (myEvent != null)
            myEvent(this, EventArgs.Empty);
    }
}
public class MyClass2 {
    public void Method1() {
        MyClass3 obj = new MyClass3();
        obj.MyEvent += (s, e) => { OnMyEvent(); };
        obj.Method1();
    }
    public event EventHandler MyEvent;
    private void OnMyEvent() {
        var myEvent = MyEvent;
        if (myEvent != null)
            myEvent(this, EventArgs.Empty);
    }
}
public class MyClass3 {
    public void Method1() {
        // Raise event here that is handled in MyClass1?    
        OnMyEvent();
    }
    public event EventHandler MyEvent;
    private void OnMyEvent() {
        var myEvent = MyEvent;
        if (myEvent != null)
            myEvent(this, EventArgs.Empty);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T08:15:32.110

要链接事件处理程序，请使用 MyClass2 中的添加/删除语法。从 MyClass1 中设置 SomeEvent 并在 MyClass3 中引发它。

```
public class MyClass1             
{             
    MyClass2 obj = new MyClass2(); 

    public MyClass1()
    {
        obj.SomeEvent += obj_SomeEvent;
    }

    public void Method1()             
    {                      
        obj.Method1();             
    }             

    private static void obj_SomeEvent(object sender, EventArgs e)             
    {             
        Console.WriteLine("Some event fired");             
    }             
}  

public class MyClass2() 
{    
   MyClass3 cls3 = new MyClass3();

   public void Method1() 
   {     
       cls3.FireSomeEvent();    
   }   

    public event MyEventHandler SomeEvent
    { 
        add { this.cls3.SomeEvent += value; } 
        remove { this.cls3.SomeEvent -= value; } 
    }  
}

public class MyClass3() 
{
    public event EventHandler SomeEvent;

    private void OnSomeEvent() 
    { 
        if (SomeEvent!= null) 
        { 
            SomeEvent(this, new EventArgs()); 
        } 
    } 

    public void FireSomeEvent
    {
        OnSomeEvent();
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T21:10:42.847

如果你想避免回调解决方案和每个类中的事件链，你基本上有2个解决方案。

第一个包括将 MyClassX 类型的局部变量转换为字段，即像 Chris Gessler 建议的那样，但完全遵循这种方法并删除局部变量。

```
public static void main() { 
    MyClass1 obj = new MyClass1();
    obj.c2.c3.SomeEvent += obj_SomeEvent;      
    obj.Method1();
}

private static void obj_SomeEvent(object sender, EventArgs e)             
{             
    Console.WriteLine("Some event fired");             
}

public class MyClass1() {
    public MyClass2 c2 = new MyClass2();

    public void Method1() {
        c2.Method1();
    }
}
public class MyClass2() {
   public MyClass3 c3 = new MyClass3();

   public void Method1() {
       c3.Method1();
   }
}
public class MyClass3() {
    public event EventHandler SomeEvent;

    private void OnSomeEvent() 
    { 
        if (SomeEvent!= null) 
        { 
            SomeEvent(this, new EventArgs()); 
        } 
    } 
   public void Method1() {
       OnSomeEvent();    
   }
} 
```

您的另一个选择（但如果可行，这实际上取决于您要尝试做什么，而且我无论如何都不喜欢）是将 MyClass3 中的事件简单地定义为静态：

```
public static void main() { 
    MyClass3.SomeEvent += obj_SomeEvent;
    MyClass1 obj = new MyClass1();
    obj.Method1();
}

private static void obj_SomeEvent(object sender, EventArgs e)             
{             
     Console.WriteLine("Some event fired");             
}

public class MyClass1() {
    public void Method1() {
        MyClass2 obj = new MyClass2();
        obj.Method1();
    }
}
public class MyClass2() {
   public void Method1() {
       MyClass3 obj = new MyClass3();
       obj.Method1();
   }
}
public class MyClass3() {
    public static event EventHandler SomeEvent;

    private void OnSomeEvent(MyClass3 anObj) 
    { 
        if (SomeEvent!= null) 
        { 
            SomeEvent(anObj, new EventArgs()); 
        } 
    }

    public void Method1() {
       OnSomeEvent(this);    
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-03T08:05:31.700

事件处理 ABC 假设您有订阅者和发布者。所以你可能希望你的 MyClass3 有公共事件，而 MyClass1 订阅这个事件。

但是，在您的特定代码中，这种复杂性没有任何意义 - 使用回调函数的最简单方法：

```
public static void main() { 
    MyClass1 obj = new MyClass1();
    obj.Method1();
}
public class MyClass1{
    public void Method1() {
        MyClass2 obj = new MyClass2();
        obj.Method1(MyEventHandler);
    }

    public void MyEventHandler() {
    //...
    }

}
public class MyClass2{
   public void Method1(Action callback) {
       MyClass3 obj = new MyClass3();
       obj.Method1(callback);
   }
}
public class MyClass3{
   public void Method1(Action callback) {
       // Raise event here that is handled in MyClass1?    
       callback();
   }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-03T08:15:15.510

您可以将事件添加到中间类以连接事物。像这样的东西：

```
using System;
using System.Windows.Forms;

namespace Demo
{
    class Program
    {
        static void Main(string[] args)
        {
            MyClass1 obj = new MyClass1();
            obj.Method1();
        }
    }

    public class MyClass1
    {
        public void Method1()
        {
            MyClass2 obj = new MyClass2();
            obj.SomethingHappened += somethingHappened;
            obj.Method1();
        }

        private static void somethingHappened(object sender, EventArgs e)
        {
            Console.WriteLine("Something happened!");
        }
    }

    public class MyClass2
    {
        public void Method1()
        {
            MyClass3 obj = new MyClass3();
            obj.SomethingHappened += onSomethingHappened;
            obj.Method1();
        }

        public event EventHandler SomethingHappened;

        private void onSomethingHappened(object sender, EventArgs e)
        {
            var handler = SomethingHappened;

            if (handler != null)
            {
                handler(this, e);
            }
        }
    }

    public class MyClass3
    {
        public void Method1()
        {
            onSomethingHappened();
        }

        private void onSomethingHappened()
        {
            var handler = SomethingHappened;

            if (handler != null)
            {
                handler(this, new EventArgs());
            }
        }

        public event EventHandler SomethingHappened;
    }
} 
```

您可能要考虑的一件事是您如何处理中间类中的“发件人”参数。您可以将其设为 MyClass2（如上面的代码中所示），或者您可以像这样保留原始发件人：

```
private void onSomethingHappened(object sender, EventArgs e)
{
    var handler = SomethingHappened;

    if (handler != null)
    {
        handler(sender, e);
    }
} 
```

# c - 无法将 char 分配给 char 指针

> ID：12243938
> 
> 赞同：1
> 
> 时间：2012-09-03T07:54:11.287
> 
> 标签：c, arrays, pointers

这是我的代码：

```
 printf("%s\n", "test1");
    char c = '2';
    char * lines[2];
    char * tmp1 = lines[0];

    *tmp1 = c;
    printf("%s\n", "test2"); 
```

我`printf`在控制台中看不到第二个。

**问题**：谁能解释我的代码有什么问题？

注意：我正在努力学习`C`:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T08:02:23.010

这一行：

```
char * lines[2]; 
```

`char`声明一个包含两个指针的数组。但是，您实际上并没有*初始化*指向任何东西的指针。所以稍后当你这样做时，`*tmp1 = (char)c;`你将字符分配`c`到内存中的某个地方，甚至可能是地址零（即`NULL`），这是一件坏事。

解决方案是将数组创建为数组数组，例如

```
char lines[2][30]; 
```

这将声明行有两个数组，每个数组有 30 个字符，并且由于字符串需要一个特殊的终止符，因此您可以在其中包含最多 29 个字符的字符串。

第二种解决方案是为字符串动态分配内存：

```
char *lines[2];
lines[0] = malloc(30);
lines[1] = malloc(30); 
```

本质上，这与上面的array-of-arrays声明相同，但在堆上分配内存。

当然，也许您只是想要一个单个字符的字符串（加上终止符），那么您几乎是对的，只需删除星号：

```
char line[2];  /* Array of two characters, or a string of length one */ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-03T07:55:42.770

`lines`未初始化，`tmp1`初始化错误。

它应该是：

```
char lines[2];
char * tmp1 = lines; 
```

或者，您可以说：

```
char * tmp1 = &lines[0]; 
```

或者对于字符串数组：

```
char lines[2][30];
char * tmp1 = lines[0]; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-03T07:59:02.120

未初始化的数组`lines`。因此`lines[0]`是一个未初始化的指针。取消引用它`*tmp1`是纯粹的**未定义行为**。

这是另一种选择，可能与您想要的相对应，也可能不相对应：

```
char lines[2];
char * tmp1 = lines;   // or "&lines[0]"

*tmp = c; 
```

或者，更容易：

```
char lines[2] = { c, 0 }; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-03T07:59:52.497

线

```
char * lines[2]; 
```

创建一个包含两个 char 指针的数组。但这不会分配内存，它只是内存中指针的“句柄”或“名称”。指针没有指向有用的东西。

您要么必须使用以下方式分配内存`malloc()`：

```
char * lines = malloc(2); 
```

或者告诉编译器为你分配内存：

```
char lines[2]; 
```

注意：不要忘记`0`在使用它之前用一个字节终止字符串。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-03T08:04:23.823

`char *lines[2];`: char 指针的两个元素数组。

`char *tmp;` : 指向字符的指针。

`char *tmp = lines[0]`: 将数组的数组元素内的`0`值`lines`转入`tmp`. 因为它是一个自动数组，所以它会有垃圾作为`lines[0]`.

`*temp` ：取消引用垃圾值。未定义的行为。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-03T08:06:24.983

```
char * tmp1 = lines[0]; 
```

在这里，您声明一个 char 指针并将其指针值初始化为 line[0]，即存储在 line 数组中的第一个元素，该元素也未初始化。

现在 tmp 指向某个未知且实际上无法访问的地方。当你

```
*tmp1 = (char)c; 
```

您正在对导致分段错误的无效内存地址进行操作。

# javascript - 如何从javascript调用sharepoint快速搜索网络服务？

> ID：12243939
> 
> 赞同：0
> 
> 时间：2012-09-03T07:54:12.317
> 
> 标签：javascript, web-services, authentication, sharepoint-2010, fastsearch

如何从 sharepoint 快速搜索 Web 服务调用方法 ex: QueryEx , GetQuerySuggestions 我关注了这篇 [文章](http://blogs.msdn.com/b/pasen/archive/2012/04/01/using-sharepoint-2010-search-webservice-in-javascript-for-fast-search-for-sharepoint-2010.aspx)

但每次我得到这个错误：

`<soap:envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><faultcode>soap:Client</faultcode><faultstring>Data at the root level is invalid. Line 1, position 1.</faultstring></soap:envelope>`

我还用提琴手检查了传出的消息，我发现正文是 0，它返回“401 Unauthorized”有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T10:15:33.993

问题是从 JavaScript 到 WCF 服务的跨域调用，所以我在 Web 应用程序的同一域中创建了一个新的 Web 服务，并从中使用了其他服务。

javascript ----call----> Proxy webservice ----call-----> 不同域中的webservice

# css - 如何在 UIWebView 中使用 css？

> ID：12243950
> 
> 赞同：0
> 
> 时间：2012-09-03T07:54:43.483
> 
> 标签：css, ios4, uiwebview

在从 UIViewController 派生的类中，我有一个 UIWebView* 类型的类变量，称为 helpView。我将以下代码用于 viewDidLoad。

```
- (void)viewDidLoad {
    [super viewDidLoad];
    NSURL *helpFileURL=[NSURL fileURLWithPath:[NSString stringWithFormat:@"%@/tutorial.html",
                                               [[NSBundle mainBundle] resourcePath]]];
    NSURLRequest *request = [NSURLRequest requestWithURL:helpFileURL];
    [helpView loadRequest:request];
} 
```

一切正常，我可以在我的模拟器和设备上看到“tutorial.html”。

现在这是我的问题，我想使用一个名为 tutorial.css 的 CSS 文件和我的 tutorial.html。与 tutorial.html 在 app bundle 中一样，tutorial.css 也在 app bundle 中。

我应该如何修改上面的代码才能使其正常工作？我自己尝试了一些东西，但失败了。而且我在网上找不到任何明确的答案。显然，如果我使用通常的：

```
 <link href="css/tutorial.css" rel="stylesheet" type="text/css" /> 
```

在我的 tutorial.html 文件中还不够。

感谢您提供任何信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T08:10:13.787

离开 css 目录，你的包不能那样工作。

```
<link href="tutorial.css" rel="stylesheet" type="text/css" /> 
```

然后更改您的代码以使用漂亮的基本 url 加载 html：

```
- (void)viewDidLoad {
    [super viewDidLoad];

    NSString *filePath = [[NSBundle mainBundle] pathForResource:@"tutorial" ofType:@"html"];
    NSString *htmlString = [NSString stringWithContentsOfFile:filePath encoding:NSUTF8StringEncoding error:nil];

    NSURL *baseURL = [NSURL fileURLWithPath:[[NSBundle mainBundle] bundlePath]];

    [webView loadHTMLString:htmlString baseURL:baseURL];
} 
```

# ios - 回合制多人iOS游戏的模板，例如Words With Friends？

> ID：12243954
> 
> 赞同：2
> 
> 时间：2012-09-03T07:54:56.760
> 
> 标签：ios, game-engine

我想开始制作更多的“社交”游戏，我认为回合制异步游戏有很多机会。但是，我想这样一个游戏的后端是相当复杂的，所以如果有一个模板或第三方解决方案（付费很好）我可以实现，这样我就可以花更多的时间来开发我的游戏，而不是重新发明轮子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T23:26:55.983

[Apple 的 Game Center](http://developer.apple.com/library/ios/#DOCUMENTATION/NetworkingInternet/Conceptual/GameKit_Guide/Users/Users.html)为您提供了回合制游戏的框架。WWDC 提供了很多[文档](https://developer.apple.com/devcenter/ios/gamecenter/)以及优秀的视频（需要 Apple 开发者 ID 才能查看）。

> 多人游戏提供了终极挑战，并创造了 App Store 中最引人注目的游戏类型之一。了解 Game Center 如何通过添加本地多人游戏支持在 iOS 上更进一步。了解对回合制和在线多人游戏 API 的改进以及发送邀请和重新比赛的新功能。

以下是一些带有源代码的详细教程：

[使用 ios-5-part-1 开始回合制游戏](http://www.raywenderlich.com/5480/beginning-turn-based-gaming-with-ios-5-part-1)

[如何制作一个简单的多人游戏与游戏中心教程第 2 部分](http://www.raywenderlich.com/3325/how-to-make-a-simple-multiplayer-game-with-game-center-tutorial-part-22)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-07T22:09:01.217

您还可以使用我们公司的 (Trymph) API，该 API 旨在支持回合制手机游戏，例如 Word with Friends。它已经被用于许多类似风格的游戏中。结帐[https://www.trymph.com/](https://www.trymph.com/)

# sql - 有没有使用 sql server/TSQL 进行十六进制算术的简单方法？

> ID：12243956
> 
> 赞同：2
> 
> 时间：2012-09-03T07:55:04.517
> 
> 标签：sql, sql-server-2000, hex

我在表中有一列十六进制值。我想为该表中的所有值添加一个十六进制值。如果它是一个简单的 int 我会运行这样的东西：

```
UPDATE myTable
SET num = num + 4000 
```

有没有办法简单地使用十六进制算术来做到这一点？还是我必须将列值转换为十进制，将我要添加的值转换为十进制，添加它们，然后将值转换回十六进制？（如果是这样，最简单的方法是什么？）

（注意：我们目前使用的是 sql server 2000。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T18:31:14.953

使用类似的东西：

```
print convert(varbinary(4),0 + 0x002E + 0x001D) 
```

它应该给你一个类似的结果：

```
0x0000004B 
```

等式中的零会欺骗它相信它的所有数字，因此它会计算值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T15:51:33.583

假设这`num`实际上是十六进制数的字符串表示，我认为您可以使用几个用户定义的函数将其转换为整数：

```
-- Based on Feodor's solution on
-- http://blog.sqlauthority.com/2010/02/01/sql-server-question-how-to-convert-hex-to-decimal/
CREATE FUNCTION fn_HexToInt(@str varchar(16))
RETURNS BIGINT AS BEGIN

SELECT @str=upper(@str)
DECLARE @i int, @len int, @char char(1), @output bigint
SELECT @len=len(@str),@i=@len, @output=case  WHEN @len>0 THEN 0 END

WHILE (@i>0)
BEGIN
    SELECT @char=substring(@str,@i,1)
         , @output=@output
                    +(ASCII(@char)
                        -(case when @char between 'A' and 'F' then 55
                          else case when @char between '0' and '9' then 48 end
                          end))
                                *power(16.,@len-@i)
        ,  @i=@i-1
END
RETURN @output
END

-- Example conversion back to hex string - not very tested
CREATE FUNCTION fn_IntToHex(@num int)
    RETURNS VARCHAR(16) AS BEGIN
    DECLARE @output varchar(16), @rem int
    SELECT @output = '', @rem=0
    WHILE (@num > 0)
    BEGIN   
        SELECT @rem = @num % 16
        SELECT @num = @num / 16
        SELECT @output = char(@rem + case when @rem between 0 and 9 then 48 else 55 end) + @output 
    END
    RETURN @output
END

select dbo.fn_HexToInt ('7FFF') -- = 32767
select dbo.fn_IntToHex(32767) -- = 7FFF 
```

所以你可以试试

```
UPDATE myTable
SET num = dbo.fn_IntToHex(dbo.fn_HexToInt(num) + 4000) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T07:59:38.457

您可以使用前缀，`0x` 例如

```
Select 0x3F + 2 
```

返回 65

所以

```
UPDATE myTable 
SET num = num + 0x4000 
```

（这适用于 SQL 2008 - 我不确定它是否是 SQL 2000 以来的新功能 - 请告诉我！）

如果您有两个 0x 值，它们会被`+`运算符连接起来，因此请使用 convert 将其中一个转换为 int

# ios - 在 UIScrollView 和 UIView 的组件上检测触摸事件 [放置在 UIScrollView 内]

> ID：12243963
> 
> 赞同：14
> 
> 时间：2012-09-03T07:55:36.607
> 
> 标签：ios, uiscrollview, uitapgesturerecognizer

我的简单故事板 IPad 项目中有 UIViewController，其中包含放置在整个表面 (1024 x 768) 上的 UIScrollView。我创建了 3 个 XIB 文件，它们是我的应用程序在 viewDidLoad 启动时加载的 UIView，并将它们添加到 UIScrollView 中。这 3 个 XIB 文件中的每一个都只包含一个 UIButton。

这是层次结构：

> ~ UIViewController ( **UIViewControllerClass**是这个 UIViewController 的类)
> 
> ~~ UIScrollView（包含 3 个相同的 UIViews）
> 
> ~~~ UIView ( **UIViewClass**是这个 XIB 文件的文件所有者)
> 
> ~~~~ UIButton

我希望我的 UIViewControllerClass 能够意识到这两者：触摸 UIScrollView 组件上的任何位置，如果触摸 UIScrollView，如果触摸 UIScrollView 中的 UIView 内部的 UIButton，以获取确切触摸该按钮的信息。

我在 UIViewClass 中创建了 IBAction，以便在 UIScrollView 中的 UIView 中触摸 UIButton，并且当我在所有元素（UIViewController、UIView 和 UIScrollView）上设置 User Interaction Enabled = YES 时，应该调用此方法。

但此时我的 UIViewControllerClass 并不知道在该 UIButton 上的 UIScrollView 内发生了触摸。我制作了这样的触摸识别器：

```
UITapGestureRecognizer *touch = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleTouch)];
touch.numberOfTouchesRequired = 1; 
```

并将其添加到 UIScrollView 组件。通过这种方式，我能够在 UIViewControllerClass 中检测到 UIScrollView 组件上的触摸事件，但不再调用 UIScrollView 中 UIView 中 UIButton 的触摸事件处理程序。

所以，我需要在 UIViewControllerClass 中有这两个信息：

*   触摸 UIScrollView 组件
*   触摸 UIScrollView 内的 UIView 中的 UIButton（如果触摸此按钮）

我想将触摸事件识别器附加到整个 UIScrollView 组件不是解决方案，因为它禁用了我在 UIViewClass 中编写的所有触摸事件处理程序。

我认为解决方案是以某种方式对 UIScrollView 内的 UIView 中的组件进行的触摸应该发送到 UIViewControllerClass，但我没有找到这样做的方法。

如果有人可以帮助我，我将不胜感激。提前致谢。

* * *

**[编辑#1：郑的回答]**

点击手势必须将**cancelsTouchesInView**选项设置为**NO**！

对于我上面的例子，这条线解决了所有问题：

```
touch.cancelsTouchesInView = NO; 
```

非常感谢郑。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-03T08:55:10.133

我不知道这是否适合你，但我在这里给出了关于滚动视图内视图的触摸事件的答案：

[关闭 UIScrollView 中的键盘](https://stackoverflow.com/questions/5143873/dismissing-the-keyboard-in-a-uiscrollview/11149702#11149702)

这个想法是告诉滚动视图不要吞下滚动视图区域内的所有点击手势。

无论如何我都会在这里粘贴代码，希望它能解决你的问题：

```
UITapGestureRecognizer *tapGesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(hideKeyboard)];

// prevents the scroll view from swallowing up the touch event of child buttons
tapGesture.cancelsTouchesInView = NO;    

[pageScrollView addGestureRecognizer:tapGesture];

[tapGesture release];

...

// method to hide keyboard when user taps on a scrollview
-(void)hideKeyboard
{
    [myTextFieldInScrollView resignFirstResponder];
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-03T08:10:50.533

您可以继承您的 UIScrollView 并覆盖`- hitTest:withEvent:`系统调用的方法以确定哪个视图将处理事件。每当调用它时，您都可以假设滚动视图内部发生了触摸事件，并且通过调用超级实现，您可以获得通常会处理该事件的视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-01T18:14:10.780

您可以在 UIscrollView 中捕获任何类型的手势。确保您还处理了一些默认属性，例如将 cancelsTouchesInView 属性设置为 false，默认情况下为 true。还要为您的子视图提供一些标签号，以在选择器中进行区分。& 还使他们的用户交互成为真实。

> 让点击 = UITapGestureRecognizer（目标：自我，动作：
> 
> 选择器(didTapByUser(_:)))

# python - AuthSub。如何检查令牌是否存在？Python gdata 客户端

> ID：12243965
> 
> 赞同：0
> 
> 时间：2012-09-03T07:55:45.530
> 
> 标签：python, youtube, gdata, authsub

我开发了一个装饰器来验证我的应用程序并开始使用 youtube API。装饰器指定包装一个 REST 资源类的方法。

```
def youtube_auth(f):                                            
    def wrap(self, *args, **kwargs):                            
        youtube_serv = gdata.youtube.service.YouTubeService()   
        youtube_serv.ssl = True                                 
        youtube_serv.developer_key = YOUTUBE_DEVELOPER_KEY      
        youtube_serv.client_id = YOUTUBE_CLIENT_ID              
        def get_auth_sub_url():                                 
            # TODO: do not forget to change it to real URL      
            next = 'http://www.example.com/video_upload'        
            scope = 'http://gdata.youtube.com'                  
            secure = False                                      
            session = True                                      

            return youtube_serv.GenerateAuthSubURL(next, scope, 
                 secure, session)                            

        # TODO: understand how to check authsub token           
        # if not youtube_serv.is_authenicated():                
        #     return redirect(get_auth_sub_url())               
        # else:                                                 
        #     parameters = cgi.FieldStorage()                   
        #     authsub_token = parameters.get('token')           
        #     yt_service = gdata.youtube.service.YouTubeService(
        #     yt_service.SetAuthSubToken(authsub_token)         
        #     yt_service.UpgradeToSessionToken()                

        return f(self, *args, **kwargs)                         
    return wrap 
```

如何检查用户是否经过身份验证（令牌是否存在）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T20:35:08.577

由于这是一个新应用程序，您应该考虑使用新的 OAuth 2.0 界面。此处的文档：[https ://developers.google.com/youtube/2.0/developers_guide_protocol_oauth2](https://developers.google.com/youtube/2.0/developers_guide_protocol_oauth2)

工作示例（php）：[Youtube Oauth 2.0 API Videos Upload Failed](https://stackoverflow.com/questions/10575404/youtube-oauth-2-0-api-videos-upload-failed/12222459#12222459)

# javascript - 在javascript数组中隐藏一个元素

> ID：12243972
> 
> 赞同：0
> 
> 时间：2012-09-03T07:56:26.103
> 
> 标签：javascript, kendo-ui

```
var question= dataQuestions; 
```

我正在加载`dataQuestions`这是一个数组集合。

接下来，我在`0`以下位置添加另一个项目

```
question.splice(0,0,{"Qid":0,"Answer":null,"Text":""} 
```

现在，我调用以下函数：

```
function insertData(sQ, question) {
        sQ.kendoDropDownList({
            dataTextField : "Text",
            dataValueField : "Qid",
            dataSource : question

        });
    } 
```

所以现在我的下拉列表包含几个问题，比如“什么是......？”，但在位置`0`会有一个空行。我希望该空行隐藏或不可点击。（基于我单击下拉列表中的任何其他行，会发生一些功能）。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T08:18:49.973

Grab the first element with javascript (or jQuery if present) and add a "disabled" attribute to it.

Something like this: [http://jsfiddle.net/rU9mp/](http://jsfiddle.net/rU9mp/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T08:02:00.173

好吧，您有几个选项可以将没有第一项的数组传递给下拉列表。

最简单的如果可能使用`dataQuestions`而不是`questions`：

```
var question = dataQuestions;
question.unshift({"Qid":0,"Answer":null,"Text":""});

function insertData(sQ, question) {
    sQ.kendoDropDownList({
        dataTextField : "Text",
        dataValueField : "Qid",
        dataSource : dataQuestions
    });
} 
```

# android - 一个 Android 类可以处理多个活动以及如何开始正确的活动吗？

> ID：12243973
> 
> 赞同：0
> 
> 时间：2012-09-03T07:56:29.410
> 
> 标签：android, android-layout, android-intent

我特别需要“设置”设置，其中列出了 4 个选项（年龄、身高、体重和性别）。现在，每个列表项必须打开新的“视图”（活动、窗口），它实际上并没有做太多事情。例如，性别是单选按钮和“确定”按钮，然后将性别保存在共享首选项中。

所以，我有一个很棒的想法来创建“设置”类，然后以某种方式处理这个问题。当第 1 项被选中时，它将显示 layout1.xml 并从 Settings 类调用 function1。

Item2 调用 layout2.xml 并从 Settings 类调用 function2。

这是一个好方法，还是我应该为每一帧创建一个类，并有一个小的“GenderSelector”类，实际上除了处理单选按钮什么都不做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T08:55:58.097

1.  您可以使用[对话框](http://developer.android.com/reference/android/app/Dialog.html)。
2.  您用于启动活动的意图可以保存正在启动的活动可访问的原始数据。然后，您可以有条件地使用控件填充已启动的活动。毕竟，您可以将结果返回给第一个活动。

以指定模式启动活动的代码片段（模式常量定义如下）：

```
public class SettingsActivity extends Activity
{
    public static final String EXTRA_MODE = "your_mode_extra_name";
    public static final int MODE_AGE = 0;
    public static final int MODE_GENDER = 1;

    private static final int MODE_DEFAULT = MODE_AGE;

    @Override
    public void onCreate(Bundle savedInstance)
    {
        int mode = getIntent().getIntExtra(EXTRA_MODE, MODE_DEFAULT);

        switch(mode)
        {
            case MODE_AGE:
                setContentView(R.layout.age_mode_layout);
                //TODO: find controls by ID and set their event handlers here
                break;

             case MODE_GENDER:
                setContentView(R.layout.age_mode_gender);
                //TODO: find controls by ID and set their event handlers here
                break;
        }
    }
} 
```

返回性别的代码片段：

```
public class SettingsActivity extends Activity
{
    public static final String EXTRA_GENDER = "your_gender_extra_name";

    public static final int GENDER_FEMALE = 0;
    public static final int GENDER_MALE = 1;

    private void returnGender(int gender)
    {
        setResult(RESULT_OK, new Intent().putExtra(EXTRA_GENDER, gender));
        finish();
    }
} 
```

最后显示设置活动并返回结果：

```
public class MainActivity extends Activity
{
    //actually we could use mode constants from SettingsActivity;
    //just to show that generally this is separate constants set
    private static final int ID_AGE = 0;
    private static final int ID_GENDER = 1;

    private void requestAge()
    {
        Intent intent = new Intent(getApplicationContext(), SettingsActivity.class);
        intent.putExtra(SettingsActivity.EXTRA_MODE, SettingsActivity.MODE_AGE);

        startActivityForResult(intent, ID_AGE);
    }

    private void requestGender()
    {
        Intent intent = new Intent(getApplicationContext(), SettingsActivity.class);
        intent.putExtra(SettingsActivity.EXTRA_MODE, SettingsActivity.MODE_GENDER);

        startActivityForResult(intent, ID_GENDER);
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data)
    {
        if (resultCode != RESULT_OK)
            return; //something went wrong

        switch(requestCode)
        {
            case ID_GENDER:
                int gender = data.getIntExtra(SettingsActivity.EXTRA_GENDER, -66666);
                //you've got the gender, use it
                break;

            case ID_AGE:
                //get age from the intent and use it
                break;
        }
    }
} 
```

# iphone - 将 UIAccelerometer 数据转换为 iPhone 中的度数？

> ID：12243979
> 
> 赞同：0
> 
> 时间：2012-09-03T07:57:38.047
> 
> 标签：iphone, uiaccelerometer, degrees

知道如何将加速度计数据转换为度数吗？我已经开发了一个加速度计应用程序，我需要获得度数？

```
 UIAccelerometer *accel = [UIAccelerometer sharedAccelerometer];
     accel.delegate = self;
     accel.updateInterval = 1.0f/50.0f;

- (void)accelerometer:(UIAccelerometer *)acel didAccelerate:(UIAcceleration *)aceler 
    {

          NSLog(@"%f %f %f",aceler.x,aceler.y,aceler.z);

    } 
```

我需要度数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T08:12:36.073

XY 角度的一个简单示例：

```
- (void)accelerometer:(UIAccelerometer *)acel didAccelerate:(UIAcceleration *)aceler 
{
   // get angle in radians
   float angle = atan2(aceler.x, aceler.y);
   // convert to degrees
   float angleInDegrees = (angle * 180/M_PI);
   NSLog(@"%f degrees",angleInDegrees); 
} 
```

# solr - Solr 日期范围搜索没有结果

> ID：12243982
> 
> 赞同：0
> 
> 时间：2012-09-03T07:57:49.160
> 
> 标签：solr

我很难确定为什么我的 Solr 日期范围搜索不起作用。我正在现有的工作搜索的基础上添加两个新字段来帮助进行住宿搜索。

我将以下两个字段添加到架构中 - 第一个实际上是日期数组，第二个是单个值：

```
<field name="available_checkin_dates" type="date" indexed="true" stored="false" multiValued="true" />
<field name="available_unit_count" type="int" indexed="true" stored="false" /> 
```

我验证了索引文档已创建并发送到 Solr，并填充了两个字段，但以下搜索词没有产生任何结果：

```
* AND available_checkin_dates:[* TO NOW]
* AND available_checkin_dates:[NOW TO *]
* AND available_checkin_dates:"2012-08-31T00:00:00.0000000Z"
* AND available_checkin_dates:"2012-08-31T00:00:00Z"
* AND available_unit_count:1
* AND available_unit_count:* 
```

要么我使用了错误的语法，要么文档没有被索引。我很难阅读 catalina 日志，也找不到检查实际索引文档的工具。

关于如何帮助我确定这一点的任何想法？我是一个相对的 Solr 新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T09:02:35.137

没关系，自动提交设置有问题，所以缓冲区没有被刷新。文档在 commit 为 false 的情况下被提交，但是当未提交文档的级别达到一定数量时，自动提交设置没有到位以刷新。

# c# - 如何在 ASP.NET 网页上使用属性进行身份验证？

> ID：12243984
> 
> 赞同：0
> 
> 时间：2012-09-03T07:57:49.490
> 
> 标签：c#, asp.net, attributes, webforms

我有一个网站，其中有几个从 PageBase 类派生的 aspx 页面。例如其中之一如下：

```
public partial class Pages_Home_Default : PageBase
{
} 
```

在其中一些页面中，我想阻止访问，除非登录。我可以使用 IsMember 属性在我的 PageBase 中获取客户端是否登录。

我想使用属性来实现这一点。例如：

```
[AuthenticationRequired(true)]
public partial class Pages_Home_Default : PageBaseList
{
}

[AttributeUsage(AttributeTargets.Class)]
public class AuthenticationRequired : Attribute
{
    public AuthenticationRequired(bool isMemberRequired)
    {
        Value = isMemberRequired;
    }

    public bool Value { get; private set; }
} 
```

例如在 PageBase 中：

```
protected override void OnPreInit(EventArgs e)
{
    //Retrieve the AuthenticationRequired attribue value and if not authenticated Redirect client to a login page if logged in, continue displaying the page
} 
```

我还发现这个来获取和读取属性

```
System.Reflection.MemberInfo info = typeof(Pages_Home_Default);
        object[] attributes = info.GetCustomAttributes(true); 
```

但是，当您想在 BASE 类而不是 DERIVED 类上执行此操作时，这是不切实际的。

这可以做到吗？

非常感谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T08:00:18.913

如果您使用 MVC，则有一个 att - [AuthorizeAttribute](http://msdn.microsoft.com/en-us/library/system.web.mvc.authorizeattribute%28v=vs.108%29.aspx)。

如果您使用 WebForms 那么您不需要使用属性，您可以使用[授权](http://msdn.microsoft.com/en-us/library/8d82143t%28VS.71%29.aspx)元素从 web.config 控制它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T08:07:33.353

为什么不在属性本身中检查它？

```
[AttributeUsage(AttributeTargets.Class)]
public class AuthenticationRequired : Attribute
{
    public AuthenticationRequired(bool isMemberRequired)
    {
        if(isMemberRequired && !HttpContext.Current.User.Identity.IsAuthenticated)
        {
          FormsAuthentication.RedirectToLoginPage();
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T13:35:31.693

行。我将之前给出的代码与其他来源的简单代码行结合起来，这是我想出的代码：

```
[AttributeUsage(AttributeTargets.Class)]
public class AuthenticationRequired : Attribute
{
    public AuthenticationRequired(bool isMemberRequired)
    {
        Value = isMemberRequired;
    }

    public bool Value { get; private set; }
}

public class Utility
{
    public static T GetCustomAttribute<T>(Type classType) where T : Attribute
    {
        object Result = null;

        System.Reflection.MemberInfo Info = classType;

        foreach (var Attr in Info.GetCustomAttributes(true))
        {
            if (Attr.GetType() == typeof(T))
            {
                Result = Attr;
                break;
            }
        }
        return (T)Result;
    }
}

public class PageBase : System.Web.UI.Page
{
    protected override void OnPreInit(EventArgs e)
    {
        AuthenticationRequired AttrAuth = Utility.GetCustomAttribute<AuthenticationRequired>(this.GetType());

        if (AttrAuth != null && AttrAuth.Value)
        {
            if(!IsMember)
                HttpContext.Current.Response.Redirect("Membership.aspx");
        }
    }
} 
```

# ruby-on-rails-3 - 如何将值从控制器传递到 ROR3.0 中的模型？

> ID：12243986
> 
> 赞同：1
> 
> 时间：2012-09-03T07:57:55.807
> 
> 标签：ruby-on-rails-3, ruby-on-rails-3.1

我是 ROR3.0 控制器代码的新手

```
def create
   @data = Checking.check(arg1,arg2,arg3,agr4)
end 
```

型号代码

```
def self.check
   @vl1=arg1
   @vl2=arg2
   @vl3=arg3
   @vl4=arg4
end 
```

如何将值从控制器传递到模型

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T08:00:08.907

声明模型类方法的参数列表。

```
def self.check(arg1,arg2,arg3,agr4)
   @vl1=arg1
   @vl2=arg2
   @vl3=arg3
   @vl4=arg4
end 
```

# c# - 如何从 Visual Studio 2012 项目中删除 Fakes 程序集？

> ID：12243989
> 
> 赞同：11
> 
> 时间：2012-09-03T07:58:15.687
> 
> 标签：c#, unit-testing, visual-studio-2012, microsoft-fakes

我已通过“添加 Fakes 程序集”参考上下文菜单选项将[Fakes 程序集](http://www.peterprovost.org/blog/2012/04/15/visual-studio-11-fakes-part-1)添加到 Visual Studio 2012 C# 单元测试项目。完全删除 Fakes 程序集的程序是什么，即撤消我将其添加到项目中的过程？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-16T19:28:51.843

从 Visual Studio 2012 RTM 开始，要从单元测试项目中完全删除 Fakes 程序集，您需要：

*   从项目的 Fakes 文件夹中删除 .Fakes 文件
*   从项目中的（隐藏的）FakeAssemblies 文件夹中删除 .* 文件
*   从项目中删除 .Fakes 程序集引用

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-03T08:01:19.203

只需删除对假项目程序集的引用，然后它将使用红色标记使用已删除引用的 using 语句，这将帮助您完全删除任何剩余的引用。这当然是一种手动方法，如果您需要不同的方法，请使用 3rd 方工具，例如 resharper。

# jquery - 仅由 @ 触发 typeahead (bootstrap)

> ID：12243991
> 
> 赞同：0
> 
> 时间：2012-09-03T07:58:20.953
> 
> 标签：jquery, twitter-bootstrap

推特引导。仅由@触发打字头。我正在开发一个 twitter 网络应用程序。目前打字头由任何匹配的字母触发。但是，如果用户键入 @ 然后匹配字母，我希望它被触发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T09:12:13.640

您必须自己重写 Bootstrap 的 typeahead JS 文件以将其限制为`@`仅触发搜索。

这是唯一的方法。

# php - 在 {php} 中将新变量分配给 smarty

> ID：12243992
> 
> 赞同：4
> 
> 时间：2012-09-03T07:58:21.177
> 
> 标签：php, templates, smarty

目前我在一个模板中，需要 {php} 从模型/数据库中读取一些东西。这现在应该是当前模板中的一个新的 smarty 变量。我该如何解决这个问题？

例如：

```
{php}
   $var["newSmartyVar"] = model_gimme_data();
   $currentTemplate->assign($var);
{/php}

The value is {$newSmartyVar} ! 
```

这里的正确代码是什么？

（是的，不常见且不抽象，但仅用于快速原型制作。代码将在稍后进入控制器。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T08:27:29.373

`$this`指当前 smarty 实例：

```
{php}
$this->assign('foo', 'bar');
{/php}
{$foo} 
```

但是，您应该避免像瘟疫一样的 {php}。使用 {php} 是缺少抽象的标志。您可以考虑创建一个函数插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T08:14:43.753

```
{php}
global $currentTemplate;
$var = model_gimme_data();
$currentTemplate->assign('newSmartyVar',$var);
{/php} 
```

从模型中得到一些东西：

```
{php}
global $currentTemplate;
$this->_tpl_vars['variableName'];
{/php} 
```

# python - 如何“暂停”和“恢复”下载工作？

> ID：12243997
> 
> 赞同：7
> 
> 时间：2012-09-03T07:58:46.520
> 
> 标签：python, binary, download

通常，从服务器下载文件是这样的：

```
fp = open(file, 'wb')
req = urllib2.urlopen(url)
for line in req:
    fp.write(line)
fp.close() 
```

在下载过程中，只需完成下载过程。如果进程停止或中断，则需要重新开始下载进程。所以，我想让我的程序暂停和恢复下载，我该如何实现呢？谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-03T09:18:35.867

Web 服务器必须支持`Range`请求标头以允许暂停/恢复下载：

```
Range: <unit>=<range-start>-<range-end> 
```

`Range`然后，如果他/她想要检索指定的字节，客户端可以使用标头发出请求，例如：

```
Range: bytes=0-1024 
```

在这种情况下，服务器可以用一个`200 OK`表示它不支持`Range`请求的响应，或者它可以`206 Partial Content`这样响应：

```
HTTP/1.1 206 Partial Content
Accept-Ranges: bytes
Content-Length: 1024
Content-Range: bytes 64-512/1024

Response body.... till 512th byte of the file 
```

看：

*   [范围请求标头](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Range)
*   [内容范围响应标头](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Range)
*   [Accept-Ranges 响应标头](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Accept-Ranges)
*   [206部分内容](https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/206)
*   [HTTP 1.1 规范](http://www.w3.org/Protocols/rfc2616/rfc2616.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T08:04:54.037

在python中，你可以这样做：

```
import urllib, os

class myURLOpener(urllib.FancyURLopener):
    """Create sub-class in order to overide error 206\.  This error means a
       partial file is being sent,
       which is ok in this case.  Do nothing with this error.
    """
    def http_error_206(self, url, fp, errcode, errmsg, headers, data=None):
        pass

loop = 1
dlFile = "2.6Distrib.zip"
existSize = 0
myUrlclass = myURLOpener()
if os.path.exists(dlFile):
    outputFile = open(dlFile,"ab")
    existSize = os.path.getsize(dlFile)
    #If the file exists, then only download the remainder
    myUrlclass.addheader("Range","bytes=%s-" % (existSize))
else:
    outputFile = open(dlFile,"wb")

webPage = myUrlclass.open("http://localhost/%s" % dlFile)

#If the file exists, but we already have the whole thing, don't download again
if int(webPage.headers['Content-Length']) == existSize:
    loop = 0
    print "File already downloaded"

numBytes = 0
while loop:
    data = webPage.read(8192)
    if not data:
        break
    outputFile.write(data)
    numBytes = numBytes + len(data)

webPage.close()
outputFile.close()

for k,v in webPage.headers.items():
    print k, "=", v
print "copied", numBytes, "bytes from", webPage.url 
```

您可以找到来源：[http ://code.activestate.com/recipes/83208-resuming-download-of-a-file/](http://code.activestate.com/recipes/83208-resuming-download-of-a-file/)

它仅适用于 http dls